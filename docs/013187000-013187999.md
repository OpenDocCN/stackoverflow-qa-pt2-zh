# StackOverflow 问答 13187000-13187999

# zurb-foundation - Foundation 使用什么来进行语法高亮？

> ID：13187001
> 
> 赞同：2
> 
> 时间：2012-11-01T23:19:44.287
> 
> 标签：zurb-foundation

我正在使用 CSS 的 Foundation 构建一个博客，我需要能够在不执行的情况下在帖子中发布代码（主要是 php、js 和 html）。现在我在标签内发布代码`<pre>`。

我在 Foundation 的文档中注意到他们的代码示例有一些样式，但我不知道它是否包含在 Foundation 框架中，或者他们是否使用了外部的东西。

你可以在这里看到一个例子：

[http://foundation.zurb.com/docs/navigation.php#btopCode](http://foundation.zurb.com/docs/navigation.php#btopCode)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T16:13:01.023

看起来他们正在使用一个名为 Rainbows 的 JavaScript 库。这是一个链接。[http://craig.is/making/rainbows](http://craig.is/making/rainbows)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-08T20:51:46.957

基础文档使用[http://highlightjs.org/](http://highlightjs.org/)带有 github css 主题的荧光笔，作者[Vasily Polovnyov](http://code.google.com/p/srcsoft-spoiler/source/browse/trunk/highlight/github.css?r=11)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T07:04:55.747

没有语法高亮作为基础的一部分。您可能有兴趣尝试[代码片段。](http://www.steamdev.com/snippet/)

# javascript - iOS 6.0.1 中是否解决了 iOS 6 缓存 $.ajax 结果问题？

> ID：13187002
> 
> 赞同：1
> 
> 时间：2012-11-01T23:20:12.727
> 
> 标签：javascript, ajax, caching, safari, ios6

> **可能重复：**
> [iOS 6 上的 Safari 是否缓存 $.ajax 结果？](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)

有谁知道现在臭名昭著的[iOS 6 缓存 $.ajax 结果问题](https://stackoverflow.com/questions/12506897/is-safari-on-ios-6-caching-ajax-results)是否在 iOS 6.0.1 中得到解决？

# .net - 转换数组 到系统::字符串^

> ID：13187004
> 
> 赞同：1
> 
> 时间：2012-11-01T23:20:26.500
> 
> 标签：.net, arrays, string, c++-cli

如何将 CLI 数组转换为 String^ ？

这是我的例子：

```
int main(array<String^>^ args)
{
    Application::Run(gcnew Main_Form(args));
    return 0;
}

Main_Form(array<String^> ^params)
{
    if (params->Length > 0)
    {
        String^ start_param;
        //how do i convert the array to normal String^ ?
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T23:01:38.737

一年后我自己发现了:)

```
String^ start_param = String::Concat(params); 
```

# jquery-ui - 自动完成 Jquery 不显示结果

> ID：13187009
> 
> 赞同：1
> 
> 时间：2012-11-01T23:20:50.970
> 
> 标签：jquery-ui, jquery, jquery-autocomplete, jquery-ui-autocomplete

我使用[Jquery 自动完成](http://jqueryui.com/autocomplete/)，我有以下代码：

客户端：

```
 $( "#tags" ).autocomplete({
    source: function(request, response) {
        $.ajax({
            url: "get_professionals",
            data: request,
            dataType: "json",
            type: "POST",
            success: function(data){
                alert("hello");
            }
        });
    }  
}); 
```

服务器端：

```
function get_professionals() {
    if ($_POST["term"]):
        $professionals = Professional::find('all', array('conditions' => "name LIKE '%" . $_POST["term"] . "%'"));
        foreach ($professionals as $professional):
            echo $professional->to_json();
        endforeach;  
    endif;
} 
```

URL 是正确的，事实上，我从服务器获得了结果（我在“post”选项卡中从 Firebug 中检查了它）但没有显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:53:46.273

[自动完成需要在数据中返回一个`label`和/或字段。`value`](http://api.jqueryui.com/autocomplete/#option-source)

> > 数组：数组可用于本地数据。有两种支持的格式：
> > 
> > 字符串数组：[ "Choice1", "Choice2" ]
> > 
> > **具有标签和值属性的对象数组： [ { label: "Choice1", value: "value1" }, ... ]**
> > 
> > 标签属性显示在建议菜单中。当用户选择一个项目时，该值将被插入到输入元素中。如果只指定了一个属性，它将用于两者，例如，如果您只提供值属性，则该值也将用作标签。

`value`调整您的查询以在和/或`label`字段的自动完成中返回您想要的内容。

```
SELECT name AS label, id AS value from professionals..... 
```

或者，其他一些返回值的方法，例如上面文档中的粗体示例。例如，您可以在成功函数中设置`label`和`value`字段：

```
success: function(data) {
    response($.map(data, function(item) {
        return {
                label: item.name,
                id: item.id
                };
        }));
      } 
```

# assembly - 试图将 at&t 转换为 nasm

> ID：13187015
> 
> 赞同：2
> 
> 时间：2012-11-01T23:21:32.477
> 
> 标签：assembly, syntax, x86, nasm

我是`at&t`语法新手。我用 .c 编译了一个 test.c 文件`gcc -S test.c`。

test.s 文件的一部分：

```
 1\. .file "test.c"
 2\. .local temp
 3\. .comm temp,8,4
 4\. ...
 5\. funtion1:
 6\. blah
 7\. blah
 8\. blah
 9\. movl $temp, -8(%ebp) 
```

我知道`-8(%ebp)`是本地变量，但不确定是什么`$temp`意思

如何在 nasm 中做到这一点？

我在 .bss 部分有一个全局温度

我能说......么：

1.  `mov eax, [ebp-8]`; eax 是否包含 [ebp-8] 的内存地址？
2.  `mov ebx, temp`; ebx 是否包含 temp 的地址？
3.  `mov [eax], ebx`; 这是否意味着使局部变量指向 temp，或者它在局部变量中创建 temp 的副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:30:42.433

`movl $temp, -8(%ebp)`将您的地址写入`temp`局部变量中`ebp-8` 这可以在 nasm 中完成`mov dword [ebp-8], temp`

要回答您的其他问题：

1.  不，`eax`包含局部变量 at 的值`[ebp-8]`。要加载地址，您可以使用`lea eax, [ebp-8]`
2.  是的
3.  `temp`如果保存局部变量的地址，则使局部变量成为指向 的指针`eax`（参见第 1 点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T19:31:00.077

要转换成普通的 x86 语法： 1\. 删除寄存器前面的 %：movl $LC0, (%esp) => movl $LC0, (esp) 2\. 删除常量前面的 $：movl $LC0 , (esp) => movl LC0, (esp) 3\. 将 () 改为 []: movl LC0, (esp) => movl LC0, [esp] 4\. 反转操作数的顺序：movl LC0, [esp] = > movl [esp], LC0 5\. 将指令大小后缀转换为前缀：mov [esp], dword LC0。

我在这里找到了答案： [http ://www.cplusplus.com/forum/lounge/88169/](http://www.cplusplus.com/forum/lounge/88169/)

# html-parsing - iText xmlWorker 上边距

> ID：13187019
> 
> 赞同：2
> 
> 时间：2012-11-01T23:22:11.790
> 
> 标签：html-parsing, itext, margin

当我运行这段代码时，我在文档顶部得到了一个边距。

![图片](../Images/89e7ca5e5d6a20604585c7f445965716.png)

我不知道如何摆脱它。我正在运行最新版本的 iText 和 XMLWorker。

```
Document document = new Document(PageSize.A5.rotate(), 0f, 0f, 0f, 0f);
PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("E:/itext/test.pdf"));
HtmlPipelineContext htmlContext = new HtmlPipelineContext(null);

htmlContext.setTagFactory(Tags.getHtmlTagProcessorFactory());

CSSResolver cssResolver = XMLWorkerHelper.getInstance().getDefaultCssResolver(false);

cssResolver.addCss("p{color: #a00; font-size: 20pt; margin: 0; padding: 0;}", true);

Pipeline<?> pipeline = new CssResolverPipeline(cssResolver, new HtmlPipeline(htmlContext, new PdfWriterPipeline(document, writer)));

XMLWorker worker = new XMLWorker(pipeline, true);
XMLParser xmlParser = new XMLParser(worker);

document.open();

String htmlData = "<html> <p>Lorem ipsum</p> </html>";

xmlParser.parse(new StringReader(htmlData));

document.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:01:32.580

HTML`<p>`标记通常在上方和下方都有填充。`<div>`如果您改用标签，也许您会得到您正在寻找的结果？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-23T15:06:09.043

您可以设置文档对象的边距。

```
document.setMargins(0,0,0,0); 
```

# c# - sqldatareader 错误“读取器关闭时调用读取的尝试无效。”

> ID：13187020
> 
> 赞同：0
> 
> 时间：2012-11-01T23:22:13.673
> 
> 标签：c#

当我从 sqldatareader 读取数据时，我收到错误“读取器关闭时调用读取的尝试无效”。我的代码如下

显然，这已被 ExecSqlDataReader 中的 using 语句关闭

我希望能够调用此方法，然后在另一个类中使用阅读器，有没有办法绕过这个而不必循环通过 ExecSqlDataReader 方法中的 SqlDataReader ？

希望这是有道理的

谢谢

代码：

```
SqlDataReader reader = data.ExecSqlDataReader(1);
 while (reader.Read())
  {
   .....
  }

       public SqlDataReader ExecSqlDataReader(int queryType = 0)
       {
        using (var conn = new SqlConnection(this.ConnectionString))
        {
            try
            {
                PrepareCommandForExecution(conn, queryType);
                return _cmd.ExecuteReader();

            }
            finally
            {
                _cmd.Connection.Close();
            }
        }
    }

    private SqlCommand PrepareCommandForExecution(SqlConnection conn, int sqlType = 0)
    {

            _cmd.Connection = conn;
            switch (sqlType)
            {
                case 0:
                    _cmd.CommandType = CommandType.StoredProcedure;
                    break;
                case 1:
                    _cmd.CommandType = CommandType.Text;
                    _cmd.CommandText = _tSqltext;
                     break;
                case 2:
                    _cmd.CommandType = CommandType.TableDirect;
                    break;
            }

            _cmd.CommandTimeout = this.CommandTimeout;
            _cmd.Connection.Open();

            return _cmd;

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:28:59.803

问题是离开函数（通过 return 语句）会将您踢出`using`块，因此您正在使用的 SqlDataReader 和 SqlConnections 被释放。要解决此问题，请尝试更改函数签名，如下所示：

```
public static IEnumerable<IDataRecord> ExecSqlDataReader( int queryType ) 
```

然后像这样更新函数的中间：

```
using ( var reader = cmd.ExecuteReader() )
{
    while ( reader.Read() )
    {
        yield return reader;
    }
} 
```

如何使用它：

```
var first10 = ExecSqlDataReader(0).Take(10);
foreach (var rec in first10)
{
    int ID = rec.GetInt32(0);
} 
```

所以这应该有效，因为产量会导致连接保持活动状态：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:29:01.770

您也许应该修改您的设计以传回（断开连接）`DataTable`而不是尝试保持连接打开（然后可能“泄漏”）。

# c++ - C ++将用户输入传递给变量到函数的参数

> ID：13187021
> 
> 赞同：1
> 
> 时间：2012-11-01T23:22:27.483
> 
> 标签：c++, parameters

在编程方面，我是个大菜鸟，但我一直在 youtube 上观看一些教程，我决定尝试混合不同视频中教授的一些概念。我想要做的是有一个函数，它有 3 个参数来计算股票市场投资的回报。在我的 main 中，我想从用户那里获取函数的 3 个参数，并将每个参数存储在一个变量中，并在调用函数时将这些变量用作参数。我目前遇到了一个错误，但在我输入整个内容之前，我会向你们展示我的代码，也许你们会发现问题所在。

```
 #include <iostream>
  #include <cmath>

  using namespace std;

float stockMarketCalculator(float p, float r, int t){
float a;

for(int day = 1; day <=t; day++){
    a = p * pow(1+r, day);
        cout << a << endl;
}

}

int main()
{
float p;
float r;
int t;

cout << "Please enter the principle" << endl;
cin >> p >> endl;

cout << "Please enter the rate" << endl;
cin >> r >> endl;

cout << "Please enter the time in days" << endl;
cin >> t >> endl;
cout << stockMarketCalculator(p, r, t);

return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:32:35.727

第一个错误：你的 stockMarketCalculator 函数应该返回值！

```
return a; 
```

第二个错误（3次）：endl中不需要cin。只需将其删除。

享受！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:35:27.633

您的代码已更正

```
#include <iostream>
#include <cmath>

using namespace std;

void stockMarketCalculator(float p, float r, int t)
{
    float a;

    for(int day = 1; day <= t; day++)
    {
        a = p * pow(1+r, day);
        cout << a << endl;
    }
}

int main()
{
    float p;
    float r;
    int t;

    cout << "Please enter the principle" << endl;
    cin >> p;

    cout << "Please enter the rate" << endl;
    cin >> r;

    cout << "Please enter the time in days" << endl;
    cin >> t;

    stockMarketCalculator(p, r, t);

    return 0;
} 
```

**更正**

`cin`流不需要`endl`

您不需要您`stockMarketCalculator`返回要打印的值，因为它已经在打印您想要的值，所以我声明了它`void`并简单地在`main`函数中调用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T23:26:37.453

我读了你的原型

```
float stockMarketCalculator(float p, float r, int t) 
```

并假设函数的返回很重要。事实上，从你的 main() 函数，你写：

```
cout << stockMarketCalculator(p, r, t); 
```

在您的原始代码中，它将尝试编写一些不确定的值。

如果你不关心返回值，你应该使用：

```
void stockMarketCalculator(float p, float r, int t) 
```

并且不要尝试`cout`从值`main()`- 直接调用它（参见 unziberla 的答案）。

另一方面，如果您确实关心返回值，请`return`在下面添加我原来的答案。如果您只关心最终值，这是一个更简洁的界面。

**原答案：（**留给后人）

您需要添加

```
return a; 
```

给你的`stockMarketCalculator`.

通常，这会被编译器报告为警告，但可能不取决于您的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:30:45.793

同意，您的`stockMarketCalculator`函数说它将返回一个浮点数，但没有返回语句。

`return a;`在 for 循环之后，在函数的右花括号之前`stockMarketCalculator`。

# winforms - 为什么淡化具有非矩形区域的表格无法正常工作？

> ID：13187025
> 
> 赞同：1
> 
> 时间：2012-11-01T23:22:37.097
> 
> 标签：winforms, graphics, region, animatewindow

我创建了一个顶级表单并将其 Region 属性更改为一个椭圆区域。然后，我使用 AnimateWindow 函数使表单淡入。当窗体淡入时，仍显示窗体的矩形形状。当形态结束褪色时，矩形消失，取而代之的是椭圆形。有没有人遇到同样的问题？下面是代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Drawing.Drawing2D;
using System.Drawing;

namespace AnimateWindowSample
{
    public class MainForm : Form
    {
        private Button button_Show;
        private ChildForm childForm;
        private bool childFormShown = false;

        public MainForm()
        {
            this.button_Show = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // button_Show
            // 
            this.button_Show.Location = new System.Drawing.Point(12, 12);
            this.button_Show.Name = "button_Show";
            this.button_Show.Size = new System.Drawing.Size(105, 23);
            this.button_Show.TabIndex = 0;
            this.button_Show.Text = "&Show/Hide";
            this.button_Show.UseVisualStyleBackColor = true;
            this.button_Show.Click += new EventHandler(button_Show_Click);
            // 
            // MainForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 262);
            this.Controls.Add(this.button_Show);
            this.Name = "MainForm";
            this.Text = "MainForm";
            this.ResumeLayout(false);
        }

        void button_Show_Click(object sender, EventArgs e)
        {
            if (this.childForm == null)
            {
                this.childForm = new ChildForm();
            }

            if (this.childFormShown)
            {
                this.childForm.FadeOut();
            }
            else
            {
                this.childForm.FadeIn();
            }

            this.childFormShown = !this.childFormShown;
        }
    }

    public class ChildForm : Form
    {
        const int CS_DROPSHADOW = 0x00020000;
        const int WS_EX_TOPMOST = 0x00000008;
        const int AW_HIDE = 0x00010000;
        const int AW_BLEND = 0x00080000;

        [DllImport("User32.dll", CharSet = CharSet.Auto)]
        static extern bool AnimateWindow(IntPtr hWnd, uint dwTime, uint dwFlags);

        protected override CreateParams CreateParams
        {
            get
            {
                CreateParams cp = base.CreateParams;

                cp.ClassStyle |= CS_DROPSHADOW;
                cp.ExStyle |= WS_EX_TOPMOST;

                return cp;
            }
        }

        protected override bool ShowWithoutActivation
        {
            get
            {
                return true;
            }
        }

        public ChildForm()
        {
            this.FormBorderStyle = FormBorderStyle.None;

            GraphicsPath path = new GraphicsPath();

            path.AddEllipse(this.Bounds);

            Region region = new Region(path);

            this.Region = region;
        }

        public void FadeIn()
        {
            AnimateWindow(this.Handle, 300, AW_BLEND);
        }

        public void FadeOut()
        {
            AnimateWindow(this.Handle, 300, AW_BLEND | AW_HIDE);
        }

        protected override void OnPaint(PaintEventArgs e)
        {
            base.OnPaint(e);

            Rectangle bounds = this.ClientRectangle;

            e.Graphics.FillRectangle(Brushes.Black, bounds);
            e.Graphics.FillEllipse(Brushes.Blue, bounds);
        }
    }

    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainForm());
        }
    }
} 
```

# html - 网站 HTML 截断屏幕底部

> ID：13187028
> 
> 赞同：-2
> 
> 时间：2012-11-01T23:23:16.093
> 
> 标签：html, css, flash

经过多次搜索后，我仍然无法找到解决问题的方法。我创建了两个网站。一个基于 Flash 的[www.riverviewhurricanes.org](http://www.riverviewhurricanes.org) 和一个基于 HTML 的[www.golfcartsuncity.com](http://www.golfcartsuncity.com)。在宽屏上查看时，两个网站都在底部截断。当有人回复时，我会发布源代码或 java 脚本，但我是刚开始的菜鸟，不确定我是否更改了索引源 style.js 或 layout.css 或 ie.css。让我知道我应该发布什么来源，以便您以最有效的方式帮助我。这两个网站都是实时的，我提前感谢所有帮助。非常感谢您，期待您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:39:11.970

我认为高尔夫网站没有问题。但是，对于 Flash 站点，问题在于其中包含 Flash 的表格设置为 100%，并且您在其上方有一个 24 像素高的 div。所以 24px 总是被截断，导致滚动。

降低桌子高度以容纳 G+ 栏，或将其放在桌子上。一种方法是添加`position: absolute;`到该 div。

# gridview - WinRT - 如何在 GridView 上进行操作？

> ID：13187029
> 
> 赞同：0
> 
> 时间：2012-11-01T23:23:15.677
> 
> 标签：gridview, windows-runtime

我想打开幻灯片功能`GridView`，所以我使用操作但它不起作用，这里是 XAML 代码：

```
 <GridView x:Name="DaysGridView" HorizontalAlignment="Right" IsItemClickEnabled="True"
 ManipulationMode="All" ManipulationInertiaStarting="DaysGridView_ManipulationInertiaStarting"
 ManipulationStarting="DaysGridView_ManipulationStarting" 
 ManipulationStarted="DaysGridView_ManipulationStarted"
 ManipulationDelta="DaysGridView_ManipulationDelta"
 ManipulationCompleted="DaysGridView_ManipulationCompleted" 
 ItemClick="DaysGridView_ItemClick"
 SelectionChanged="DaysGridView_SelectionChanged"> 
```

当我用鼠标滑动时，它可以工作；但是当我在 Windows 模拟器的“基本触摸模式”中滑动时，它不起作用；如果我更改`GridView`并`Grid`添加上述操作事件，它也可以工作。那么，我怎样才能使操纵起作用`GridView`呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:32:24.643

我今天刚刚问了 MS 人一个类似的问题，你不能用简单的方式来做，因为 GridView 模板中的 ScrollViewer 捕获触摸输入，你不能访问这些事件。我的解决方案是用一个透明矩形覆盖控件，在该矩形上捕获所有输入并过滤所有输入，以便我可以操作我的子元素、ScrollViewer 或两者兼而有之。您确实需要知道如何将这些输入转换为 SV 上的 ScrollTo...Offset 调用，这并不容易，然后您可能需要添加自己的 ScrollBars 等。查看我之前对[类似问题](https://stackoverflow.com/questions/12636216/scrollviewer-and-handling-manipulation-events-on-child-elements)的回答以了解更多想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:38:51.503

我为这种情况找到了解决方案：只需设置`ScrollViewer.HorizontalScrollMode="Disabled"`（我需要水平滑动），然后操作就可以了！

# sql - 在 varbinary 中查找唯一标识符

> ID：13187035
> 
> 赞同：0
> 
> 时间：2012-11-01T23:24:15.567
> 
> 标签：sql

我对 sql 很薄弱，但我的任务是修复现有功能。基本上有许多 uniqueidentifiers 已存储在 varbinary(max) 中，我想提取适当的标识符。我已经尝试 `SELECT * FROM MyTable WHERE CONVERT(varbinary,[fieldId]) IN (fieldvarBinary)` 了其他一些简单的查询 - 但似乎没有什么可以撤回适当的记录。我错过了一些明显的东西吗？

编辑：来自字段的示例数据 -`0x4B9E33FF49A41F4290C51298E20A8515`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:36:58.430

单程：

由于每个唯一标识符 (GUID) 的长度固定为 16 字节，因此请编写一个表值函数，将 varbinary 分解为一个 16 字节值的表，然后加入该表。

# php - 如何更新为随机值

> ID：13187036
> 
> 赞同：1
> 
> 时间：2012-11-01T23:24:21.153
> 
> 标签：php, mysql

我有一个像这样的小 PHP 脚本；

我想从这 18 种不同类型的级别中更新排名。

```
//Getting values
$getir=mysql_query("SELECT username FROM users WHERE bot='1'");
//First level
$level1="Ayakci";
// While for all
while($getirx=mysql_fetch_array($getir)) {
    echo $getirx[0] . "<br>";
    $guncelle=mysql_query("UPDATE users SET rank='$level1' WHERE bot='1'");
    //Pick a random level1 while exiting while
    $seviye1=rand(1,18);
    if($seviye1==1){
        $level1="Baron";
    } elseif($seviye1==2){
        $level1="Patron";
    } elseif($seviye1==3){
        $level1="Baskan";
    } elseif($seviye1==4){
        $level1="Lider";
    } elseif($seviye1==5){
        $level1="Mit Ajani";
    } elseif($seviye1==6){
        $level1="Efsane";
    } elseif($seviye1==7){
        $level1="Efsanevi Baba";
    } elseif($seviye1==8){
        $level1="Baba";
    } elseif($seviye1==9){
        $level1="Isadami";
    } elseif($seviye1==10){
        $level1="Tetikci";
    } elseif($seviye1==11){
        $level1="Suclu";
    } elseif($seviye1==12){
        $level1="Seri Katil";
    } elseif($seviye1==13){
        $level1="Kiralik Katil";
    }elseif($seviye1==14){
        $level1="Katil";
    }elseif($seviye1==15){
        $level1="Hirsiz";
    }elseif($seviye1==16){
        $level1="Ozel Koruma";
    }elseif($seviye1==17){
        $level1="Bodyguard";
    }elseif($seviye1==18){
        $level1="Ayakci";
    }

    echo $level1 . "<br>";
} 
```

它随机回显，但不将“排名”值更新为随机。它正在选择一个随机的 $level1 并适用于所有相同。

它会更新所有 bot='1' 值，但会将相同级别应用于所有这些值。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:32:23.247

好的一些清理项目和建议：

首先，您应该强烈考虑使用 switch/case 而不是多个 if/elseif：

```
switch ($seviye1)
{
    case 1:
        $level1 = "Baron";
        break;
    case 2:
        $level1 = "Patron";
        break;
    // and so on...
} 
```

但是，您可能想要更进一步并定义一些数组，并使用您返回的数字作为对数组索引的引用：

```
$avails = array
(
    "Baron",
    "Patron",
    "Baskan",
    "Lider",
    // et. al.
);

$seviye1 = rand(0, 17);
$level1 = $avails[$seviye1]; 
```

**编辑：**

经过进一步考虑，您似乎正在尝试为所有`bot`值为 1 的用户分配一个随机排名。

这是我将如何重写它：

```
// Get user id's having bot = 1
$getir = mysql_query("SELECT username FROM users WHERE bot = 1;");

// Available levels
$avails = array
(
    "Baron", "Patron", "Baskan", "Lider",
    "Mit Ajani", "Efsane", "Efsanevi Baba", "Baba",
    "Isadami", "Tetikci", "Suclu", "Seri Katil",
    "Kiralik Katil", "Katil", "Hirsiz", "Ozel Koruma",
    "Bodyguard", "Ayakci"
);

// Update database; assign random levels to users
while($getirx = mysql_fetch_array($getir))
{
    echo $getirx[0] . "<br />";

    // Pick random level
    $level1 = $avails[rand(0, count($avails) - 1)];

    // Perform update
    $update_query = "UPDATE users SET rank = '$level1' WHERE bot = 1 AND username = '{$getirx[0]}';";
    $guncelle = mysql_query($update_query);
} 
```

如果为第一个用户分配“Ayakci”的等级/级别很重要，那么您可以将其重新添加；此示例中省略了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:31:55.143

我想这就是您一直在努力实现的目标：

```
$guncelle=mysql_query("UPDATE users SET rank='".$level1."' WHERE bot='1' AND username = '".$getirx[0]."'"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:30:19.537

这个查询：

```
UPDATE users SET rank='$level1' WHERE bot='1' 
```

将用户表中的所有记录更新为 $level1 的值，其中 bot 等于 1。

它在每个循环中运行，这意味着排名字段每次都会在每条记录上发生变化。

编辑：我同意 Michael Berkowski 对您的问题的第二条评论。

# java - 在 method.invoke() 中捕获自定义异常

> ID：13187037
> 
> 赞同：3
> 
> 时间：2012-11-01T23:24:32.077
> 
> 标签：java, exception, exception-handling

如果我使用method.invoke来调用一个抛出自定义异常A的方法。有什么方法可以捕获这个异常并在try catch周围的method.invoke中处理它？我能想到的唯一方法是捕获所有异常并检查异常类型；

```
try{
 ...
 method.invoke
 ...
} catch (A e) {

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T23:28:36.250

尝试：

```
try {
    method.invoke
} catch (InvocationTargetException e) {
   Throwable mainException = e.getCause();
   if (mainException instanceof .....) {
   }
} 
```

InvocationTargetException 是方法抛出的异常的包装器。

在您的情况下， mainException 将属于*A*类型。

# php - 我可以使用 CodeIgniter 上传 .c 或 .cpp 文件吗？

> ID：13187041
> 
> 赞同：3
> 
> 时间：2012-11-01T23:25:01.310
> 
> 标签：php, codeigniter, file-upload

我想上传一个 .c 文件。我正在使用 CodeIgniter。我正在使用的代码适用于 .pdf 但每当我尝试上传 .c 文件时，它都会显示“不允许您尝试上传的文件类型。”。

我的代码如下：

```
$config = array
(
    'upload_path' => './solutions',
    'allowed_types' => 'c',
    'file_name' => $file_name,
    'file_size' => 1000,
    'remove_spaces' => 'true'
);
$this->upload->initialize($config); 
```

当我以允许的类型编写 pdf 时，它可以工作，但在 C 的情况下则不行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T23:28:56.903

在 allowed_types 中，您需要具有 MIME 类型。

对于将是“text/plain”的 ac 源文件，因为没有“c”MIME 类型。

见[http://en.wikipedia.org/wiki/Internet_media_type](http://en.wikipedia.org/wiki/Internet_media_type)

# css - 带有字体和本地的“Segoe UI”字体

> ID：13187044
> 
> 赞同：21
> 
> 时间：2012-11-01T23:25:42.070
> 
> 标签：css, fonts, embed, font-face, typography

如果它安装在用户的计算机中，我想在网站中使用“Segoe UI”字体。

我已经声明了所有样式，`@font-face`以便使用该`font-weight`属性来更改字体的粗细（这是一个非常酷的功能！）。

问题是我无法使用**Segoe UI Bold**（我认为名称错误）。任何想法？

这里举个例子。(4) 和 (5) 相同：http: [//jsfiddle.net/kxHQR/1/](http://jsfiddle.net/kxHQR/1/)

* * *

```
@font-face {
  font-family: 'Myname';
  font-style: normal;
  font-weight: 700;
  src: local('Segoe UI Bold'), local('SegoeUI-bold'), local('segoeuib');
}
@font-face {
  font-family: 'Myname';
  font-style: normal;
  font-weight: 600;
  src: local('Segoe UI Semibold'), local('SegoeUI-Semibold');
}
@font-face {
  font-family: 'Myname';
  font-style: normal;
  font-weight: 400;
  src: local('Segoe UI'), local('SegoeUI');
}
@font-face {
  font-family: 'Myname';
  font-style: normal;
  font-weight: 300;
  src: local('Segoe UI Light'), local('SegoeUI-Light');
}

/* ... */

BODY {
 font-family: 'Myname';    
}

.boldtext {
    font-family:'Segoe UI';
    font-weight:700;
} 
```

```
<p style='font-weight:300'>1\. Text with font-weight:300\. OK</h1>
<p>2\. Here is normal text. OK</p>
<p style='font-weight:600'>3\. Text with font-weight:600\.  OK</p> 
<p style='font-weight:700' >4\. Text with font-weight:700\. It must be like (5), but it is like (3). :(</p>
<p class='boldtext'>5\. Text with font-family:'Segoe UI' (no font-face) and font-weight:700; </p> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-11T08:24:54.027

This is from Microsoft's own [stylesheet for Windows 8 (Metro) apps](http://www.csupomona.edu/~chrischen/CIS466/AREA%20Tablet/App4/App4/css/ui-dark.css.txt):

```
/*
Explicitly define a Segoe UI font-family so that we can assign Segoe UI 
Semilight to an appropriate font-weight.
*/
@font-face {
    font-family: "Segoe UI";
    font-weight: 200;
    src: local("Segoe UI Light");
}
@font-face {
    font-family: "Segoe UI";
    font-weight: 300;
    src: local("Segoe UI Semilight");
}
@font-face {
    font-family: "Segoe UI";
    font-weight: 400;
    src: local("Segoe UI");
}
@font-face {
    font-family: "Segoe UI";
    font-weight: 600;
    src: local("Segoe UI Semibold");
}
@font-face {
    font-family: "Segoe UI";
    font-weight: 700;
    src: local("Segoe UI Bold");
}
@font-face {
    font-family: "Segoe UI";
    font-style: italic;
    font-weight: 400;
    src: local("Segoe UI Italic");
}
@font-face {
    font-family: "Segoe UI";
    font-style: italic;
    font-weight: 700;
    src: local("Segoe UI Bold Italic");
} 
```

The above approach works for me and is also the approach used by **Open Sans** and **Google fonts**. However, it is the exact opposite of [this](http://sixrevisions.com/css/font-face-guide/) approach, originally from Paul Irish:

```
@font-face {
    font-family: 'ChunkFiveRegular;
    src: url('whatever source');
    font-weight: normal;
    font-style: normal;
} 
```

Paul Irish's approach allows (read: requires) setting weights and italics later in the CSS, but the result is "faux": Since the browser doesn't have all the fonts in the family, it has to calculate the weight and shape of the characters on its own to make up for that. The single, and limited strength in Paul's approach is that it *might* reset the font across all browsers - but it does depend on the font in use - because all browsers render fonts differently!

I like Microsoft's approach better, because it allows to specify the `font-style`s and `font-weight`s you need, and the browser will display the correct font file, instead of computing faux sizes, bold and italics. However, it does require you to provide a font file for every font variation in the family you'll be using.

In the end it all comes down to what font you'll be using and how you use it (different weights, italics, etc). Regardless of what approach you go for, I recommend out of my own experience (and Paul [recommends](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/) too) to use [FontSquirrel's font-face generator](http://www.fontsquirrel.com/fontface/generator) for all your web typography endeavors. FontSquirrel can significantly reduce font sizes, by leaving out unnecessary character sets, compressing the fonts, and so on.

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T14:09:27.593

尽管基本方法是合乎逻辑的，但浏览器似乎很难使用它，这显然是由于它们对字体数据的不同处理造成的。似乎以下是使用不同权重的 Segoe UI 最有效的方法：

1.  对于光，使用`font-family: Segoe UI Light`
2.  对于常规，仅使用`font-family: Segoe UI`
3.  对于半粗体，使用 use`font-family: Segoe UI Semibold`
4.  对于粗体，使用`font-family: Segoe UI; font-weight: bold`

这是混乱且不合逻辑的，但它适用于 Firefox、Chrome、IE、Opera、Safari（在 Win 7 上测试）。

在网页上，最好尝试找到合适的具有不同权重的免费字体并通过`@font-face`. 毕竟，Segoe UI 远非通用，也没有简单的方法为其设置合适的后备。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-01T18:51:38.620

```
@font-face {
    font-family: 'Segoe UI';
    src: url('./ui/segoeui.eot');
    src: local("Segoe UI"),
         local("Segoe"),
         local("Segoe WP"),
         url('./ui/segoeui.eot?#iefix') format('embedded-opentype'),
         url('./ui/segoeui.woff') format('woff'),
         url('./ui/segoeui.svg#SegoeUI') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Segoe UI Semibold';
    src: url('/semibold/seguisb.eot');
    src: local("Segoe Semibold"),
         local("Segoe WP Semibold"), 
         url('/semibold/seguisb.eot?#iefix') format('embedded-opentype'),
         url('/semibold/seguisb.woff') format('woff'),
         url('/semibold/seguisb.svg#SegoeUISemibold') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Segoe UI Bold';
    src: url('/bold/segoeuib.eot');
    src: local("Segoe Bold"),
         local("Segoe WP Bold"),
         url('/bold/segoeuib.eot?#iefix') format('eot'), /* Wrong format will tell IE9+ to ignore and use WOFF instead. MSHAR-2822 */
         url('/bold/segoeuib.woff') format('woff'),
         url('/bold/segoeuib.svg#SegoeUIBold') format('svg');
    font-weight: normal;
    font-style: normal;
}

@font-face {
    font-family: 'Segoe UI Light';
    src: url('/light/segoeuil.eot');
    src: local("Segoe UI Light"),
         local("Segoe WP Light"),
         url('/light/segoeuil.eot?#iefix') format('embedded-opentype'),
         url('/light/segoeuil.woff') format('woff'),
         url('/light/segoeuil.svg#SegoeUILight') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

下载：

[https://github.com/KingRider/frontcom/tree/master/css/fonts](https://github.com/KingRider/frontcom/tree/master/css/fonts)

# ios - 通过蓝牙查找设备，然后从数据库中获取特定数据？（无配对）

> ID：13187046
> 
> 赞同：1
> 
> 时间：2012-11-01T23:25:48.623
> 
> 标签：ios, database, networking, bluetooth

我想获取有关蓝牙设备的信息，而无需输入密码并配对设备。想法是，当蓝牙设备靠近我的设备时，我想获取有关从数据库中提取的设备的信息。就像我找到的设备已在我的数据库中注册一样，应用程序将（无需配对）从数据库中获取我想要的信息。所以蓝牙仅用于感应设备在附近。

我可以在没有配对的情况下在 iOS 中做到这一点吗？也许获得一个蓝牙 Mac 地址，然后在数据库中检查与该蓝牙 Mac 匹配的注册设备？

# netbeans - MinGW g .exe：错误的文件号

> ID：13187051
> 
> 赞同：1
> 
> 时间：2012-11-01T23:26:42.257
> 
> 标签：netbeans, mingw, mingw32, msys

NetBeans 7.2.1、MinGW 0.5beta 20120426、msys 1.10.11

构建后抛出：

> make[2]: execvp: g++.exe: 错误文件号

任何想法？我设置了路径：当我将 c++ 编译器列更改为 mingw32-g++.exe 时，它​​可以工作，但是当我尝试使用一些库运行项目时，它会抛出

> make[2]: execvp: g++.exe: 错误的文件号 make[2]: *** [build/Debug/MinGW-Windows/main.o] 错误 127

可能的解决方案？

# expressionengine - 如何调整 ExpressionEngine 搜索速率限制？

> ID：13187055
> 
> 赞同：5
> 
> 时间：2012-11-01T23:26:57.530
> 
> 标签：expressionengine

[我使用标准搜索模块](http://expressionengine.com/user_guide/modules/search/index.html)标签向我的 ExpressionEngine 站点添加了搜索功能。但是，我偶尔会遇到此错误消息：

*您只能每 15 秒搜索一次。*

这似乎只在我注销时发生。

我想减少搜索之间所需的时间。我该如何调整这个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-01T23:26:57.530

这是按组设置的（因此为什么它只在您注销时发生）。已注销成员（*来宾*组）的默认值为 15 秒。

您可以在控制面板的*成员*>*成员组*>*编辑*组下为每个组调整此值。

# c++ - boost::interprocess::managed_shared_memory 在不同版本的 boost 之间的兼容性

> ID：13187063
> 
> 赞同：9
> 
> 时间：2012-11-01T23:28:00.300
> 
> 标签：c++, boost, boost-interprocess

是否有任何明确的兼容性保证 boost::interprocess::managed_shared_memory 可以跨不同的 boost 版本工作？我打算用它在多个进程之间共享一个整数或十个整数（这实际上将充当它们都读取和写入的一段数据的修订号）。这些流程是单独发布的，并且偶尔会终止。

问题是：我是否因为 1.51 中的 managed_shared_memory 无法与 1.44 中的 managed_shared_memory 对话而将自己锁定在一个给定版本的 boost 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:34:46.343

根据[Boost 常见问题解答](http://www.boost.org/users/faq.html)：

> **Boost 库如何成功地用于重要项目？**
> 
> 许多 Boost 库都得到了积极的维护和改进，因此与以前的版本向后兼容并不总是可能的。通过冻结项目使用的 Boost 库版本来解决这个问题。仅在项目生命周期中的一点更改不会导致问题的点进行升级。始终可以从 boost 存储库中获得单个错误修复。

因此，您似乎将自己锁定在一组`Boost Interprocess`与您将使用的版本兼容的未来版本中，这是不可预测的版本数量（兼容性可能会在明天被破坏，也可能永远不会被破坏）。

如果您有能力在新版本的 boost 出现并破坏兼容性时投入一些时间来改进您的代码，那么您一切都很好。在实践中，我认为这更有可能每隔几年发生一次，而不是一个月一次，图书馆制造商倾向于在发布更新之前考虑向后兼容性。

# jquery - 数据表搜索栏

> ID：13187068
> 
> 赞同：0
> 
> 时间：2012-11-01T23:28:28.083
> 
> 标签：jquery, symfony, datatables

我正在使用数据表插件，当您扫描意图时我遇到了问题。如本页所述，按列进行的搜索：

[http://jquery-datatables-column-filter.googlecode.com/svn/trunk/external.html](http://jquery-datatables-column-filter.googlecode.com/svn/trunk/external.html)

问题是我想过滤的数据不仅有文本数字，所以我想用数字创建一个隐藏列，但我只做这样的事情：

```
tablalistaproductos = $('#tablalistaproductos').dataTable( {
    "bJQueryUI": true,  
    "sScrollY": "450px",
    "bPaginate": false, 
    "bScrollCollapse": true,            
    "oLanguage": espanol,
    "aoColumns": [null,null,null,{ "bVisible":false},null,null,null,null,null,null,null,null]
    })

<table cellpadding="0" cellspacing="0" border="0" class="display" id="tablalistaproductos">
  <thead>
    <tr>
            <th>Id</th>
            <th>Descripcion</th>
            <th>Stock</th>
            <th>Stockoculto</th>
            <th>Stockreservado</th>
            <th>Precio venta</th>
            <th>Precio compra</th>
            <th>Marca</th>
            <th>Iva</th>
            <th>Familia</th>
            <th>Proveedor</th>
            <th>Acciones</th>

    </tr>
  </thead>

  <tbody>
      {% for entity in entities %}

    <tr>
            <td><a href="{{ path('producto_show', { 'id': entity.id }) }}">{{ entity.id }}</a></td>
            <td>{{ entity.descripcion }}</td>
            <td>{{ entity.stock }} unidades</td>
            <td>{{ entity.stock }}</td>
            <td>{{ entity.stockreservado }} Unidad/es</td>
            <td>{{ entity.pventa }} €&lt;/td>
            <td>{{ entity.pcompra }} €&lt;/td>
            <td>{{ entity.marca }}</td>
            <td>{{ entity.iva }} %</td>
            <td>{{ entity.familia }}</td>
            <td> {{ entity.proveedor}}</td>
            <td><div class="boton" id="editarproducto">Editar</div></td>

        </tr>
  {% endfor %}
 </tbody> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:34:15.427

我解决了这个问题。我用了 colvis() ：

```
tablalistaproductos = $('#tablalistaproductos').dataTable( {
    "bJQueryUI": true,  
    "sScrollY": "450px",
    "bPaginate": false, 
    "bScrollCollapse": true,
    "aoColumns": [null,null,null,{ "bVisible": false },null,null,{ "bVisible": false },null,null,null,null,null,null],
    "oLanguage": espanol
                })

    tablalistaproductos.columnFilter({"bUseColVis": true,"aoColumns": [null,null,null,{sSelector: "#numeros1", type:"number-range" },null,null,{sSelector: "#numeros", type:"number-range" },null,null,null,{ sSelector: "#mostrarproductofamilia", type:"select" },{ sSelector: "#mostrarproductoproveedor", type:"select" },null]}); 
```

谢谢

# c# - 获取应用程序根

> ID：13187075
> 
> 赞同：0
> 
> 时间：2012-11-01T23:29:06.657
> 
> 标签：c#, asp.net

我正在尝试以编程方式获取我的应用程序的物理和相对根目录，但我遇到了一些问题。我很容易使用 获得物理路径`HttpContext.Current.Server.MapPath("~/")`，但相对根证明很棘手。

我尝试了推荐的解决方案：

```
HttpContext.Current.Request.Url.Scheme + "://" + HttpContext.Current.Request.Url.Host 
```

但这只是给了我`htpp://localhost`，删除了最后`.com/`一部分。

我唯一的解决方案是访问完整的 URL 并尝试通过分解字符串来获取域，但我想知道是否有更好的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:33:01.880

这应该有助于制定路径语法：

[http://www.west-wind.com/weblog/posts/2009/Dec/21/Making-Sense-of-ASPNET-Paths](http://www.west-wind.com/weblog/posts/2009/Dec/21/Making-Sense-of-ASPNET-Paths)

您应该在实时服务器上看到 .com 部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:59:55.720

太晚了，我忘了`.com`本地主机上没有。我通过这样做让它工作`HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority)`。

# ruby-on-rails - 使用 will_paginate 在 Ruby 中对数组进行分页

> ID：13187076
> 
> 赞同：34
> 
> 时间：2012-11-01T23:29:20.390
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, will-paginate, kaminari

我有一个数组@level1，它看起来像这样：

```
[[3.0, 4, 2], [2.0, 48, 3], [2.1, 56, 4], ............] 
```

我想在这个数组上应用分页，这样每个页面一次只显示几行。我试过这个：

```
@temp1 = @level1.paginate(:page => params[:page]) 
```

但它会引发以下错误：

```
undefined method `paginate' for [[3.0, 4, 2], [2.0, 48, 3], [2.1, 56, 4]]:Array 
```

如何使用 will_paginate 对此进行分页？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-02T00:15:49.027

见[https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/array.rb](https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/array.rb)

就`require 'will_paginate/array'`在你尝试之前，它会工作得很好。如果是我，我会把它说出来，`config/initalizers/will_paginate_extensions.rb`这样它就可以立即从任何地方使用。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-11-01T23:40:08.830

当然，您可以使用`WillPaginate::Collection`跨集合构建任意分页。假设一个名为 的数组`values`：

```
@values = WillPaginate::Collection.create(current_page, per_page, values.length) do |pager|
  pager.replace values
end 
```

然后，您可以`@values`像对待任何其他 WillPaginate 集合一样处理，包括将其传递给`will_paginate`视图助手。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-08-02T15:22:55.453

`collection`在 Rails 项目中给定一个数组

```
will_paginate ~>3.0.5

collection.paginate(page: params[:page], per_page: 10) 
```

返回数组值的分页。

不要忘记`require 'will_paginate/array'`在控制器的顶部。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-01-15T18:27:04.587

这是我基于@chris-heald 回答的示例

```
products = %w(i love ruby on rails)
@products = WillPaginate::Collection.create(params[:page], params[:per_page], products.length) do |pager|
   pager.replace products[pager.offset, pager.per_page]
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-13T15:27:35.650

我对这个线程中提供的答案并不满意。

我想出了这个解决方案。

```
# app/lib/paged_array.rb

require 'will_paginate/array'

class PagedArray
  delegate_missing_to :@paged_collection

  def initialize(collection, page: 1, per_page: 20)
    @paged_collection = collection.paginate(
      page: page,
      per_page: per_page
    )
  end
end 
```

你可以这样使用它：

```
superheroes = %w[spiderman batman superman ironman]

PagedArray.new(superheroes, page: 1, per_page: 2) 
```

我喜欢这个解决方案，因为它是明确的，而且你不会污染你的标准类。

话虽如此，由于我使用“delegate_missing_to”，因此您依赖于 rails。

# jquery - 查找节点点击jsTree点击事件展开或折叠

> ID：13187079
> 
> 赞同：1
> 
> 时间：2012-11-01T23:29:26.847
> 
> 标签：jquery, jstree, struts2-jquery

我有 4 个级别的树：

```
- 注册1
  -2级
   - 3级
      - 4级
  +2级
+Reg2
 2级
    3级
      4级
  2级
+Reg3
 2级
    3级
      4级
  2级
+Reg4
 2级
    3级
      4级
  2级

```

我已经使用`struts2 jQuery JSTree`使用 JSON 数据的插件实现了这一点。

如果我选择任何子节点（例如：Reg1 --> Level 2 --> level 3 --> level 4），当我尝试折叠或展开包含所选子节点（级别 4）的树节点时，它会触发点击事件。

当我在不同层次结构（Reg 2 或 Reg 3 或 Reg 4）中的其他节点上展开/折叠时，它不会触发 click 事件。

无论如何我们可以捕获单击事件上单击了哪个元素，这样如果它是带有 INS 标签的图像，那么我可以跳过我的逻辑吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:30:01.873

[http://struts.jgeppert.com/struts2-jquery-showcase/index.action](http://struts.jgeppert.com/struts2-jquery-showcase/index.action)

查看`More widgets`->`Tree`部分

使用`onClickTopics`捕捉点击事件

例子

```
<sjt:tree 
            id="jsonTree" 
            href="%{treeDataUrl}"
            onClickTopics="treeClicked" 
        /> 
```

并且可以在listen topic中获取点击了哪个元素

```
$.subscribe('treeClicked', function(event, data) {
          var item = event.originalEvent.data.rslt.obj;
          alert('Clicked ID : ' + item.attr("id") + ' - Text ' + item.text());
    }); 
```

# ruby-on-rails - Rails：before_save 变量内容

> ID：13187082
> 
> 赞同：3
> 
> 时间：2012-11-01T23:29:47.663
> 
> 标签：ruby-on-rails, before-save

我正在阅读有关 Rails 的指南，并且在 Model 类中遇到了这一行：

```
before_save { |user| user.email = email.downcase } 
```

这是为了确保电子邮件地址在进入数据库之前是小写的（但你已经知道了，因为你们很聪明！）。

但是，为什么不这样做：

```
before_save { |user| user.email.downcase! } 
```

这不是更容易执行，还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:01:21.237

两者都做同样的事情......它只是归结为味道。

# java - 如何在不使用数组的情况下读取字符串并存储到不同的变量中

> ID：13187085
> 
> 赞同：1
> 
> 时间：2012-11-01T23:30:01.167
> 
> 标签：java, string, store, calculator

我有一个家庭作业，我应该以这种格式读取字符串 [1+2/3+4] 然后我必须存储 5 个变量，即前 3 个数字和前 2 个运算符。我的问题是如何遍历字符串并将值存储到不同的变量中。这就是我到目前为止所拥有的。

公共类表达式评估{

```
static String expression;
static double o1;
static double o2;
private static double o3;
static char operator1;
private static char operator2;

public static  String getOperand(String s) {
    s = s.trim();
    String num = "";

    while (s.length() > 0 && s.charAt(0) >= '0' && s.charAt(0) <= '9') {

     num = num + s.charAt(0);
     s = s.substring(1);

    }

    expression = s;
    return (num);
}

public static char getOperator(String s) {
    s = s.trim();
    char r = 0;
    int i = 0;
    while (s.length() > 0 && s.charAt(0) >= '0' && s.charAt(0) <= '9') {

        r = s.charAt(i);
        s = s.substring(i+1);

        i++;
    }

    return (r);
}

public static double add(double a, double b) {

    return (a + b);

}

public static double sub(double a, double b) {

    return (a - b);

}

public static double mult(double a, double b) {

    return (a * b);

}

public static double div(double a, double b) {

    return (a / b);

}

public static double solveExpresion(String e) {

    double answer = 0;

    for(int i = 0;i< e.length();i++){

    String operand1;
    String operand2;

    operand1 = getOperand(e);
    o1 = Double.parseDouble(operand1);

    operand2 = getOperand(expression);
    o2 = Double.parseDouble(operand2);

    operator1 = getOperator(expression);

    }

    return (answer);

}
} 
```

这是我的主要课程

```
 import java.util.Scanner;

    public class TestCalc {

public static void main(String args[]) {

    Scanner kb = new Scanner(System.in);

    String equation;
    System.out.println("Please enter your equation: ");
    equation = kb.nextLine();

    double newNum = ExpresionEvaluation.solveExpresion(equation);

    //System.out.println(newNum);

    System.out.println(ExpresionEvaluation.o1);
    System.out.println(ExpresionEvaluation.operator1);
    System.out.println(ExpresionEvaluation.o2);
    //System.out.println(ExpresionEvaluation.expression);
}

} 
```

每次我运行它时，它都会说我有一个空字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:11:08.080

`Matcher`这是我使用/按预期检索 5 个变量的快速解决方案`Pattern`：

```
 public static void main(String[] args) throws ParseException {
        String operation = getOperationFromInput();
        List<Integer> firstThreeNumbers = retrieveFirstThreeNumbers(operation);
        List<Character> firstTwoOperators = retrieveFirstTwoOperators(operation);
        printNumbersAndOperators(firstThreeNumbers, firstTwoOperators);
    }

    private static String getOperationFromInput() {
        Scanner scanner = new Scanner(System.in);
        scanner.useDelimiter("\n");
        return scanner.next();
    }

    private static List<Integer> retrieveFirstThreeNumbers(String operation) {
        List<Integer> firstThreeNumbers = new ArrayList<>();
        Pattern patternNumber = Pattern.compile("\\d");
        Matcher matcher = patternNumber.matcher(operation);
        for (int i = 0; i < 3 && matcher.find(); i++) {
            firstThreeNumbers.add(Integer.valueOf(matcher.group()));
        }
        return firstThreeNumbers;
    }

    private static List<Character> retrieveFirstTwoOperators(String operation) {
        List<Character> firstTwoOperators = new ArrayList<>();
        Pattern patternOperator = Pattern.compile("[+-/*]");
        Matcher matcher = patternOperator.matcher(operation);
        for (int i = 0; i < 2 && matcher.find(); i++) {
            firstTwoOperators.add(matcher.group().charAt(0));
        }
        return firstTwoOperators;
    }

    private static void printNumbersAndOperators(List<Integer> firstThreeNumbers, List<Character> firstTwoOperators) {
        System.out.println(firstThreeNumbers + " " + firstTwoOperators);
    } 
```

在这段代码中，我将前三个数字存储在 a 中`List<Integer>`，将前两个运算符存储在 a 中`List<Character>`。

有多种方法可以实现解决方案，因此作为家庭作业，请尝试寻找其他方法:)

# jquery - 导航栏下的jQuery滑块使用固定位置

> ID：13187087
> 
> 赞同：1
> 
> 时间：2012-11-01T23:30:15.030
> 
> 标签：jquery, css, nav

我试图在主导航栏下创建一个滑块，所以当用户将鼠标放在主要项目上时，滑块会跟随鼠标，我大部分时间都在工作，但是当我滚动出菜单幻灯片时，它不会停留在菜单项。这是因为固定定位，但如果没有固定定位，我无法让它工作......真的卡住了

这是我的代码 css 首先

```
#navbar {
position: relative;
width: 980px;
height: 29px;
}
/* MENU SLIDER */
/*#slider-container{ position: relative;}*/
#slider-container {
height: 5px;
width: 980px;
position: relative;
}
#menu-slide {
height: 4px;
width: 52px;
background: url(../images/pictures/large/system-files/glowbg.png) no-repeat;
font-size: 1px;
line-height: 1px;
z-index: -5;
position: fixed;
display:inline-block;
} 
```

现在剩下的

```
<!DOCTYPE html>
<html>
<head><title>Bretts Gaming</title>
<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source Sans Pro"> 
<link href="./css/style.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="./css/superfish.css" media="screen">
<!--[if IE]>
    <link href="./css/style2.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="./css/superfish2.css" media="screen">
<![endif]-->
<script type="text/javascript" src="javascript/jquery-1.8.2.js"></script>
<script type="text/javascript" src="javascript/go.fullBg.js"></script>
<script type="text/javascript" src="javascript/superfish.js"></script>
<script type="text/javascript" src="javascript/hoverIntent.js"></script>
<script type="text/javascript" src="javascript/jquery.cycle.all.js"></script>
<script type="text/javascript">
 $(document).ready(function() {
     var left = $('.first').offset().left + ($('.first').width() / 2 - 15 );
        $('#menu-slide').stop().animate( {left: left  }, 400 );
    $('li').mouseover( function() { 
        var left = $(this).offset().left + ($(this).width() / 2 - 20 );
        $('#menu-slide').stop().animate( {left: left  }, 400 );
    });
    $('li').mouseleave(function(){
         var left = $('.first').offset().left + ($('.first').width() / 2 - 20);
         $('#menu-slide').stop().animate( {left: left  }, 400 );
    }); 
 });
</script>
</head>
<body>     
 <div id="topnav">                    
            <ul id="navbar"class="sf-menu">
                <li class="current first"><a href="#a">HOME</a></li>
                <li><a href="#">ABOUT US</a>
                    <ul>
                        <li><a href="#">Menu 1</a></li>
                        <li><a href="#">Menu 2</a></li>
                    </ul>
                </li>
                <li><a href="#">CORPORATE</a></li>
                <li><a href="#">CRUSING</a></li>
                <li><a href="#">LEISURE</a></li>
                <li><a href="#">GROUPS</a></li>
                <li><a href="#">VIRTUOSO</a></li>
                <li><a href="#">LINKS</a></li>
                <li class="last"><a href="#">CONTACT</a></li>
            </ul>
            <div id="slider-container">
                <div id="menu-slide"></div>
            </div>
</div>
</body>
</html> 
```

任何帮助都会很棒

谢谢

# php - PHP启动任务一段时间

> ID：13187093
> 
> 赞同：-2
> 
> 时间：2012-11-01T23:31:50.380
> 
> 标签：php, tabs, cron, task, crontab

我有一个小问题，我搜索了一段时间，但没有找到任何适合我的问题的答案，所以这里是：

我有一个带有用户数据库的 PHP 脚本，我希望用户有一个小按钮，可以让某个任务执行一段时间（想象 2 小时），并且这个任务将一直运行直到工作完成。用户可以停止任务并点击继续，2小时后任务将停止执行！

任何想法我该怎么做？

我的实际主机有 crontab。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:40:51.377

好吧，您没有足够详细地解释您的问题，但是您通常应该这样做：

当用户发布任务时，将这些任务写入数据库表中，以及其他信息，例如开始时间和结束时间（您可以根据用户的新输入更新这些信息），然后编写一个脚本，从数据库中读取这些任务并比较当前时间开始时间，如果是运行时间，则运行任务。
现在把这个单一的脚本放在一个 cron 作业中

这实际上是比为每个用户定义的任务创建一个 cron 作业更好的主意

# ios - 如何在 iPhone 上实现 sharepoint 的基于表单的身份验证

> ID：13187096
> 
> 赞同：1
> 
> 时间：2012-11-01T23:32:00.347
> 
> 标签：ios, forms, sharepoint, authentication

我们想使用sharepoint提供的webservice。在我们使用 webservice 之前，我需要访问表单身份验证。现在我使用 UIWebView 来显示网站。它有效，但我知道这不是正确的方法。谁能通过代码做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T01:11:24.310

使用sharepoint提供的身份验证webservice，它可以工作。

# sharepoint - 将工作流链接到 sharepoint 中的自定义表单

> ID：13187103
> 
> 赞同：0
> 
> 时间：2012-11-01T23:32:33.090
> 
> 标签：sharepoint

我是使用 2007 的相对较新的 sharepoint 用户！

我建立了一个列表，并使用设计器定制了一个用户输入表单以完成。表单上提交的数据是在一段时间内构建的，完成后需要使用不同的活动，这些活动需要用户手动触发。

我的用户流程如下：用户在第一阶段完成新表单的信息，用户更新信息并在第 2 步完成编辑表单的信息（如果不是所有数据可用，此步骤可能会重复），链接到显示表单以供之前查看提交工作流。我需要从这个表单链接到工作流启动屏幕。

我在列表中设置了 2 个 oob 批准工作流，并希望将用户从表单导航到工作流启动屏幕，以便他们选择要发送的工作流以及何时发送。使用其中一个列表字段，我为每个列表 ID 填充了此屏幕的 URL。

但是它在路径中有一个 &，所以当我尝试将这些数据拉到表单中时，它会将其更改为 &，并断开链接！知道如何解决这个问题吗？

我要补充一点，我对sharepoint之外的知识知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:59:50.723

`&amp;`是 的 html 表示形式`&`，它不会在 URL 中翻译。

当您填充 URL 时，您可以尝试将 替换`&`为`%26`ASCII 十六进制代码`&`，它可能会起作用。

希望这可以帮助？

# r - 从字段中删除相似字符

> ID：13187105
> 
> 赞同：0
> 
> 时间：2012-11-01T23:32:36.280
> 
> 标签：r

我有 File1.csv 包含 3000 条记录，我需要从中删除与地址无关的字符。

每条记录都从“&”或“A/O”开始。我需要清理我的“Address1”字段，如果字段中没有地址相关信息，我需要有空记录。

例子：

```
File1.csv:

Address1
&&2340 Clemb Street
&&564 7th Street
&&&10th Street
A/O11th Street
A/ONorth Street
A/O/OSouth Street
A/Ocareof
A/Otttt
A/Oyuyuyu
A/Ouiuiuiuiui
A/O/yuyyuyuyuyugggh 4510th Street
&uhhhhhello 56 11th Street 
```

我期待 File1 的结果 - 没有 A/O、A/O/O、A/Ouiuiuiui 等：

文件 1.csv：

```
Address1
2340 Clemb Street
564 7th Street
10th Street
11th Street
North Street
South Street
<blank record>
<blank record>
<blank record>
<blank record>
4510th Street
56 11th Street 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:51:19.470

There are almost certainly fancier matching patterns you could use, but `gsub()` and the following seem to get the job done with this dataset:

```
x <- c('&&2340 Clemb Street',
       '&&564 7th Street',
       '&&&10th Street',
       'A/O11th Street',
       'A/ONorth Street',
       'A/O/OSouth Street')

gsub("&|A/O|/O", "", x)
#-----
[1] "2340 Clemb Street" "564 7th Street"    "10th Street"       "11th Street"      
[5] "North Street"      "South Street" 
```

Intro to regex can be found [here](http://www.regular-expressions.info/reference.html).

# sqlite - 如果 where 子句不匹配任何内容，则 SQL 返回结果

> ID：13187106
> 
> 赞同：1
> 
> 时间：2012-11-01T23:32:39.790
> 
> 标签：sqlite, android-sqlite

我有一个包含两个表的数据库：`trips`和`days`. 中的每个条目`days`都有一个对应于 中的条目的 id `trips`。

我想运行一个查询，该查询将返回在提供的日期发生的行程，如果在该日期没有发生，则返回该日期之后的下一次行程。这是我当前的查询（`daystring`在代码中生成，假设它是一个有效的 SQL 日期字符串）：

```
SELECT _id, number, date 
FROM trips 
INNER JOIN days ON trips._id = days.trips_id 
WHERE days.date > DATE( daystring, "start of day", "-1 day" ) 
  AND days.date < DATE( daystring, "start of day", "+1 day" ); 
```

但是，该查询仅在提供的日期存在旅行时才返回结果。仅当该日期没有行程时，如何修改它以返回该日期之后的下一次行程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:44:58.863

```
SELECT _id, number, date FROM trips INNER JOIN days ON trips._id = days.trips_id 
WHERE days.date > DATE( daystring, "start of day", "-1 day" ) 
order by date Limit 1; 
```

是一个快速修复。如果您没有索引，可能需要日期列上的索引。

# javascript - D3 和 jQuery 有什么区别？

> ID：13187112
> 
> 赞同：108
> 
> 时间：2012-11-01T23:33:34.697
> 
> 标签：highcharts, flot, wijmo, javascript, jquery, d3.js

参考这个例子：

[http://vallandingham.me/stepper_steps.html](http://vallandingham.me/stepper_steps.html)

从某种意义上说，D3 和 jQuery 库似乎非常相似，它们都以对象链接的方式进行 DOM 操作。

我很想知道 D3 使哪些功能比 jQuery 更容易，反之亦然。有大量使用 jQuery 作为基础的图形和可视化库（例如[highcharts](/questions/tagged/highcharts "显示标记为“highcharts”的问题")、[flot](/questions/tagged/flot "显示标记为“flot”的问题")、[wijmo](/questions/tagged/wijmo "显示标记为“wijmo”的问题")）。

请举例说明它们有何不同。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2013-04-30T01:49:08.690

*   D3 是*数据驱动的*，但 jQuery 不是：使用 jQuery *，您可以直接操作*元素，但使用 D3，您可以通过 D3 的 unique和方法和 D3 操作元素来*提供数据和回调。*`data()``enter()``exit()`

*   D3 通常用于数据可视化，但 jQuery 用于创建 Web 应用程序。D3 有很多数据可视化扩展，jQuery 有很多 web 应用插件。

*   两者都是 JavaScript DOM 操作库，具有 CSS 选择器和流畅的 API，并且基于 Web 标准，这使得它们看起来很相似。

以下代码是 jQuery 无法使用的 D3 用法示例（在[jsfiddle](http://jsfiddle.net/as96qngg/)中尝试）：

```
 // create selection
  var selection = d3.select('body').selectAll('div');

  // create binding between selection and data
  var binding = selection.data([50, 100, 150]);

  // update existing nodes
  binding
    .style('width', function(d) { return d + 'px'; });

  // create nodes for new data
  binding.enter()
    .append('div')
    .style('width', function(d) { return d + 'px'; });

  // remove nodes for discarded data
  binding.exit()
    .remove(); 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-11-01T23:39:20.173

d3 有一个愚蠢的描述。jQuery 和 d3 一点也不相似，你只是不要将它们用于相同的事情。

jQuery 的目的是进行一般的 dom 操作。它是一个通用的 javascript 工具包，可用于您可能想做的任何事情。

d3 的主要设计目的是让使用数据制作闪亮的图表变得容易。如果您想对数据进行图形可视化，您绝对应该使用它（或类似的东西，或在它之上构建的东西）。

如果您想要一个通用 JS 库来满足您所有的交互式表单需求，请考虑使用 jQuery 或 proto 或 mootools。如果你想要一些小东西，可以考虑 underscore.js。如果您想要具有依赖注入和可测试性的东西，请考虑使用 AngularJS。

来自维基百科的[一般比较指南。](http://en.wikipedia.org/wiki/Comparison_of_JavaScript_frameworks)

我明白为什么有人会认为他们很相似。它们使用类似的选择器语法——$('SELECTOR')，d3 是一个非常强大的工具，用于选择、过滤和操作 html 元素，尤其是在将这些操作链接在一起时。d3 试图在其主页上通过声称是一个通用库来向您解释这一点，但事实是大多数人在*制作图表*时都会使用它。因为 d3 的学习曲线非常陡峭，所以将它用于您的平均 dom 操作是非常不寻常的。然而，它是一个比 jQuery 更通用的工具，通常人们在 d3 之上构建其他更具体的库（例如 nvd3）而不是直接使用它。

@JohnS 的回答也很好。Fluent API = 方法链。我也同意插件和扩展将您带入库的位置。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-08-16T23:26:40.580

我最近一直在使用两者。由于 d3 使用 Sizzle 的选择器，您几乎可以混合选择器。

请记住 d3.select('#mydiv') 不会返回与 jQuery('#mydiv') 完全相同的结果。它是同一个 DOM 元素，但它被不同的构造函数实例化。例如，假设您有以下元素：

```
<div id="mydiv" rel="awesome div" data-hash="654687867asaj"/> 
```

让我们抓住一些常用的方法：

```
> d3.select('#mydiv').attr('rel') ;
 "awesome div"

> jQuery('#mydiv').attr('rel');
 "awesome div" 
```

似乎是合法的。但如果你走得更远一点：

```
> d3.select('#mydiv').data();
 [undefined]

> jQuery('#mydiv').data();
 Object {hash: "654687867asaj"} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-08-19T13:24:07.173

D3 不仅仅是关于可视化图表。数据驱动的文档。使用 d3 时，会将数据绑定到 dom 节点。由于 SVG 我们能够制作图表，但 D3 远不止这些。您可以使用 D3 替换 Backbone、Angular 和 Ember 等框架。

不知道谁投了反对票，但让我更清楚一点。

许多网站从服务器请求数据，这些数据通常来自数据库。当网站收到这些数据时，我们必须对新内容进行页面更新。许多框架都这样做，d3 也这样做。因此，您可以使用 html 元素，而不是使用 svg 元素。当您调用重绘时，它会使用新内容快速更新页面。没有像 jquery、backbone + 它的插件、角度等所有额外的开销真是太好了。你只需要知道 d3。现在 d3 没有内置路由系统。但你总能找到一个。

另一方面，Jquery 的唯一目的是编写更少的代码。它只是一个简写版本的 javascript，已经在许多浏览器上进行了测试。如果您的网页上没有很多 jquery。这是一个很棒的图书馆。它很简单，并且为多个浏览器的 javascript 开发付出了很多努力。

如果您尝试以类似 d3 的方式实现 jquery，它会很慢，因为它不是为该任务而设计的，同样，d3 也不是为了将数据发布到服务器而设计的，它只是为了消费和呈现数据而设计的.

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-11-01T23:39:22.653

d3 是为数据可视化而设计的，它通过过滤 DOM 对象并应用转换来实现。

jQuery 专为 DOM 操作而设计，让许多基本 JS 任务的工作变得更轻松。

如果您希望将数据转换为漂亮的交互式图片，D3 非常棒。

如果您希望移动、操作或以其他方式修改您的网页，jQuery 就是您的工具。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2014-04-09T11:05:22.587

好问题！

虽然这两个库共享许多相同的特性，但在我看来，jQuery 和 D3 之间最大的区别在于焦点。

jQuery 是一个通用库，专注于跨浏览器和易于使用。

D3 专注于数据（操作和可视化），仅支持现代浏览器。虽然它看起来确实像 jQuery，但使用起来要困难得多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-10T22:41:49.130

两者都可以解决创建和操作 DOM（无论是 HTML 还是 SVG）的相同目的。D3 提供了一个 API，可简化您在基于数据生成/操作 DOM 时执行的常见任务。它通过 data() 函数对数据绑定的本机支持来做到这一点。在 jQuery 中，您必须手动处理数据并定义如何绑定到数据以生成 DOM。正因为如此，你的代码变得更加程序化，更难推理和遵循。使用 D3，它的步骤/代码更少，声明性更强。D3 还提供了一些更高级别的函数来帮助在 SVG 中生成数据可视化。range()、domain() 和 scale() 等函数可以更轻松地获取数据并将它们绘制在图表上。像 axis() 这样的函数还可以更轻松地绘制您期望在图表/图形中出现的常见 UI 元素。

# php - 从 foreach PHP 上的数组中删除值

> ID：13187117
> 
> 赞同：0
> 
> 时间：2012-11-01T22:59:25.390
> 
> 标签：php, arrays

我有一个这样的数组：

```
 Array
(
    [0] => Array
        (
            [id] => 68
            [type] => onetype
            [type_id] => 131
            [name] => name1
        )

    [1] => Array
        (
            [id] => 32
            [type] => anothertype
            [type_id] => 101
            [name] => name2
        )
) 
```

如果用户有权限或看不到这种类型，我需要从中删除一些数组。我正在考虑用一个 for each 来做，并在里面做必要的 ifs 来删除或让它原样。

我的问题是：最有效的方法是什么？该数组将不超过 100 条记录。但是有几个用户会请求它并一遍又一遍地进行过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:33:58.560

我认为您了解 PHP 的基础知识并剥离数组。

剥离数组后您可以做什么将其存储在会话中，以便在页面刷新或加载不同页面后重新使用。这样，您只需执行一次。

见：[http ://www.php.net/manual/en/function.session-start.php](http://www.php.net/manual/en/function.session-start.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:49:21.733

使用[in_array()](http://php.net/manual/en/function.in-array.php)函数，以便您可以找到要删除的数组。

然后使用[unset()](http://php.net/manual/en/function.unset.php)函数取消设置要从现有数组中删除的数组或变量。

这样，您不需要一遍又一遍地循环您的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:27:40.210

使用这1个简单易行

```
foreach ($display_related_tags as $key => $tag_name) {
    if($tag_name == $found_tag['name']) {
       unset($display_related_tags[$key]);
     }
 } 
```

# c++ - 抑制编译器警告 C++

> ID：13187118
> 
> 赞同：0
> 
> 时间：2012-11-01T23:34:41.783
> 
> 标签：c++, visual-c++, compiler-errors, warnings, compiler-warnings

我收到编译时错误。它抱怨我正在初始化一个变量，但没有引用它。发生的事情是我对其进行了初始化，然后制作了一个调试打印语句，该语句仅编译用于调试版本，而不是发布版本。有问题的错误是警告 c4189（它被视为错误并且不会编译）。

是否可以抑制此警告？一般的警告呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-01T23:37:30.690

不要压制警告，修复它！包装变量的声明和初始化，使其也只存在于调试版本中。

# php - pdo::execute($array) 没有进入表没有错误

> ID：13187123
> 
> 赞同：-1
> 
> 时间：2012-11-01T23:35:27.613
> 
> 标签：php, pdo, execute

我目前正在使用此代码并且没有错误它只是没有将它添加到表中。

```
$fields["firstName"] = $_POST['firstName']; 
$fields["middleName"] = $_POST['middleName'];
$fields["lastName"] = $_POST['lastName']; 
$fields["suffix"] = $_POST['suffix'];
$fields["age"] = $_POST['age'];
.....etc

$t = array();
foreach($fields as $k=>$v)
{
$count++;
$n .= $k;
$u .= $k;
if($count != count($fields))
{
    $n .= ", ";
    $u .= ", :";
}
$s = ":".$k;
$t[$s]= $v;
}

 $q="INSERT INTO search_requests SET (".$n.") VALUE(:".$u.")";

 $prep=$conn->prepare($q);
 $prep->execute($t); 
```

你可以使用这样的数组还是我必须在执行函数中写出每个变量

```
 $prep->execute(array(':firstName=>$_POST['firstName'], etc..)); 
```

sql代码

```
INSERT INTO search_requests SET (user_email, datestamp, historicalMatches, 
firstName, middleName, lastName, suffix, etc...) VALUE(:user_email, 
:datestamp, :historicalMatches, :firstName, :middleName, :lastName, :suffix,etc...) 
```

他们都匹配。

```
Array ( [:user_email] => Email@domain.com [:datestamp] => 02 Nov 2012 10.24.39 AM   
[:historicalMatches] => [:firstName] => First [:middleName] => m [:lastName] => lastname 
[:suffix] => etc...) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:38:01.733

是的。

我建议你做一个 print $q; 查看代码是否生成正确的 sql。

# iphone - 控制器消失时如何防止NSFetchedResultsController更新tableview？

> ID：13187126
> 
> 赞同：7
> 
> 时间：2012-11-01T23:35:42.267
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我有一个`UITabbar`带有多个控制器的。其中一个控制器用于向 Core Data 添加事件，而另一个控制器用于在 UITableView 中使用`NSFetchedResultsController`.

这是我想要实现的行为：消失后， UITableView 停止更新，当用户回来时，重新加载整个表格视图。否则，从另一个控制器插入事件需要更长的时间，因为在 中创建新行`UITableView`，即使它不可见。

我想知道如何实现这种行为，因为它似乎不像我预期的那样工作：

我已将 NSFetchedResultsController 的委托设置为 nil in `viewWillDisappear`，并将其恢复为 in `viewWillAppear`，同时调用`[UITableView reloadData]`;

不知何故，我没有看到新数据，并且怀疑这是由于 NSFetchedResultsController 在没有委托的情况下停止获取的方式。

如何正确地将更新“暂停”到`UITableView`它消失时，但在控制器重新出现时仍然能够看到整个数据集？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T00:09:07.947

在将其委托设置回 后尝试发送`performFetch:`到`NSFetchedResultsController`in 。`viewWillAppear:``self`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T11:37:17.000

我认为您不必“暂停”表格视图更新。无论如何， A`UITableView`只会从*可见*`NSFetchedResultsController`单元格中请求数据。如果表格视图不可见，则不会触发任何更新。

 *您是否测试过从另一个控制器插入事件是否真的需要更长的时间？我对此表示怀疑。仪器说什么？

如果您的委托方法被触发，您仍然可以在进行任何更新之前检查表视图是否可见。

之后，您完全按照 rob 的建议进行操作：do a `performFetch:`in `viewWillAppear:`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:06:50.113

尝试将 of 的对象设置为 nil，`delegate`而`NSFetchedResultsController`不是将 的 设置为 nil`viewWillDisappear``NSFetchedResultsController`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-30T16:53:46.567

这种粗暴的做法怎么样？没有测试它。

```
@property (nonatomic) BOOL bruteForceReload;

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    self.bruteForceReload = NO;
}

-(void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
    self.bruteForceReload = YES;
}

-(void)setBruteForceReload:(BOOL)bruteForceReload {
    _bruteForceReload = bruteForceReload;
    if (_bruteForceReload) {
        [self.tableView reloadData];
    }
}

- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller
{
    if (!self.bruteForceReload) {
        [self.tableView beginUpdates];
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{
    if (!self.bruteForceReload) {
        switch(type) {
            case NSFetchedResultsChangeInsert:
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
                break;

            default:
                return;
        }
    }
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject
       atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type
      newIndexPath:(NSIndexPath *)newIndexPath
{
    if (!self.bruteForceReload) {
        UITableView *tableView = self.tableView;

        switch(type) {
            case NSFetchedResultsChangeInsert:
                [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeDelete:
                [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;

            case NSFetchedResultsChangeUpdate:
                [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
                break;

            case NSFetchedResultsChangeMove:
                [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
                [tableView insertRowsAtIndexPaths:@[newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
                break;
        }
    }
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller
{
    if (!self.bruteForceReload) {
        [self.tableView endUpdates];
    } else {
        [self.tableView reloadData];
    }
} 
```*

# django - django字段标签标签类

> ID：13187129
> 
> 赞同：6
> 
> 时间：2012-11-01T23:35:59.423
> 
> 标签：django, django-forms

有没有办法将表单中的类应用于 {{ field.label_tag }}

我正在使用 twitter bootstrap 并希望将一个类添加到 field.label_tag 的标签标签

希望有办法处理这个问题。我正在使用 django 小部件调整来为表单的另一半输入信息。只是希望有一些我错过的东西能让这部分变得同样简单。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T01:08:39.540

您是否尝试过手动创建标签元素，如下所示：

```
<label class="your-class" for="{{ field.auto_id }}">{{ field.label }}</label> 
```

参考： [循环表单字段](https://docs.djangoproject.com/en/dev/topics/forms/?from=olddocs#looping-over-the-form-s-fields)

# java - 将文本文件解析为字符串 (JAVA)

> ID：13187130
> 
> 赞同：1
> 
> 时间：2012-11-01T23:36:04.230
> 
> 标签：java, arrays, file, list, text

我正在尝试编写一个将文本文件读入数组列表的编码。但是，我不确定如何将我的文本文件解析为字符串以正确放入数组列表中。这是我需要使用的示例文本文件。

这应该是示例问题。

```
2
one
two
three
four
0
4
6 
```

我的Java代码如下：

```
package javaapplication8;

import java.util.*;
import java.io.*;
public class JavaApplication8 {

public static void main(String[] args) throws IOException{

    Scanner inScan = new Scanner(System.in);

    String file_name;
    System.out.print("What is the full file path name?\n>>");
    file_name = inScan.next();

    Scanner fScan = new Scanner(new File(file_name));
    int numItems = Integer.parseInt(fScan.nextLine());
    ArrayList<String> Questions = new ArrayList<String>();

    for(int i=0; i < numItems; i++)
    {
        Questions.add(fScan.nextLine());
    }

    System.out.print("The array is: " + Questions);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T23:45:41.843

从您对`numLines`下面变量的评论中，您不需要从内容中解析整数，因此您可以删除该行：

```
int numItems = Integer.parseInt(fScan.nextLine()); 
```

然后将每一行输出到数组，您可以使用`Scanner.hasNextLine()`：

```
while (fScan.hasNextLine()) {
   questions.add(fScan.nextLine());
} 
```

# c++ - 带指针的 C++ 向量

> ID：13187136
> 
> 赞同：5
> 
> 时间：2012-11-01T23:37:01.647
> 
> 标签：c++

我被困在家庭作业上。我必须从文件中读取文本，将每个单词分配到内存，然后使用指针将其发送到`vector<string*>`. 我的程序不断用文件中的新词覆盖向量，而不是仅仅添加它。我无法弄清楚为什么会这样。

```
#include <iostream>
#include <fstream>
#include <vector>
#include <string>
using namespace std;

void WordFunctions(string *pstr, vector<string*> &words)
{
    words.push_back(pstr);
}
int main(){
    ifstream file;
    vector<string*> a;
    string word;
    int w =0;
    file.open("word.txt");
    while (!file.eof())
    {
        w++;
        file >> word;

        WordFunctions(&word, a);
    }
    file.close();

     for (int i=0;i<10;i++){
        cout<<(*a[i])<<" ";
        delete a[i];
    }

     system ("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:39:34.450

在堆上使用`vector<string>`或分配新字符串：

```
void WordFunctions(string *pstr, vector<string*> &words)
{
    words.push_back(new string(*pstr));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:52:10.183

You are pushing the same element into vector which is the address of word. I massage a bit on your code

```
// pass reference to eliminate copy
void WordFunctions(string &str, vector<string> &words)
{
    words.push_back(str);
}
int main(){
    ifstream file;
    vector<string> a;  // you want to store string not the address of the string
    string word;
    int w =0;
    file.open("words.txt");
    while (!file.eof())
    {
        w++;
        word.clear();   // clear the content before store something into it
        file >> word;
        WordFunctions(word, a);
    }
    file.close();

     for (size_t i=0;i<a.size();i++){  // use size instead of hard code magic number
        cout<<(a.at(i))<<" ";  // use at function instead of []
    }

     system ("pause");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-01T23:54:26.487

您的`word`字符串在内存中始终具有相同的地址，因此在循环中您正在更改字符串的值，但随后您调用`WordFunctions`始终将相同的地址传递给他。

如果它是使用`vector<string*>`而不是的约束`vector<string>`，您可能需要为循环中的新字符串分配内存，将您的单词复制到那里，然后将新引用传递给`WordFunctions`

```
char *wordPtr

while (!file.eof())
{
    w++;
    file >> word;

    wordPtr = (char *)malloc((strlen(word)+1)*sizeof(char));
    strcpy(wordPtr, *word);

    WordFunctions(wordPtr, a);
} 
```

# c# - .net 中的日期格式 - 我怎么说使用给定的文化信息？

> ID：13187137
> 
> 赞同：0
> 
> 时间：2012-11-01T23:37:03.577
> 
> 标签：c#, .net, datetime, cultureinfo

当使用 CultureInfo 呈现数字时，#,000.00 并不意味着放置 a ，用于千位分隔符和 a 。为小数。这意味着在这些位置使用来自该文化的正确字符。

但是，无论文化如何，使用“mm-dd-yyyy”都会按该顺序放置月、日、年。有没有办法告诉它我正在通过美国格式但更改以匹配通过的文化？

更多细节：

```
CultureInfo ci = new System.Globalization.CultureInfo("de-DE");
DateTime birthday = new DateTime(1955, 9, 26);
string displayValue = BIRTHDAY.tOsTRING("M/d/yyyy", ci); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:50:50.577

Use [DateTimeFormatInfo.ShortDatePattern](http://msdn.microsoft.com/en-us/library/system.globalization.datetimeformatinfo.shortdatepattern.aspx) instead of hard coded string.

```
var text = date1.ToString(CultureInfo.CreateSpecificCulture("fr-FR")
  .DateTimeFormat.ShortDatePattern); 
```

# java - 离散事件模拟中的时钟

> ID：13187142
> 
> 赞同：2
> 
> 时间：2012-11-01T23:37:40.100
> 
> 标签：java, timer, scheduling, simulation, clock

我正在为我的离散事件模拟开发一个时钟类。我已经在 PriorityQueue 中举行了一些活动，因此根据哪个活动具有最近的活动时间进行排序。但是，有一件事我无法理解。在我读过的关于离散事件模拟的论文中，明确指出时钟从一个事件跳到另一个事件，因此没有必要有一个“滴答”的时钟。

但是这将如何工作，我有一个 EventScheduler 类，它将事件保存在 PriorityQueue 中。因此，在确定下一个事件发生的时间之后，我是否可以在时钟中调用一个“setTime”方法，EventScheduler 在下一个事件的给定时间调用该方法？但是，它永远不会真正像时钟一样运行，它只会一直跳到下一个事件？

我在想时钟运行（滴答声），然后它知道 EventScheduler 何时会发生事件，当时钟到达该时间时，它会处理事件，更新系统状态并可能生成输出事件。

抱歉有点不清楚，但我只是对有关时钟如何工作的任何提示感兴趣，它是否会滴答作响，然后仅在事件发生时“做”事情，或者它只是从一个事件跳到另一个事件？

还有你建议我可以使用的java中的任何内置功能吗？例如定时器类

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:44:29.393

这个想法是，如果不进入您的事件队列，*什么都不会发生。*想一想：在“滴答”的时候，你的时钟在做什么，但没有事件？没有什么。那么，为什么要处理这些时间呢？

所以是的，您只需在队列中从一个事件到另一个事件。确实，离散事件中的“时钟”几乎正是您所构建的：按“时间”顺序排序的优先级队列和某种“现在”感，即队列中的位置。

如果你从头队列中弹出，那么“现在”可能只是*队列*的头，你就完成了。通常，更复杂的模型可能具有更多特征，例如能够检测何时尝试在“现在”之前安排事件 - 例如，这表明模型响应太慢：在现实世界中，它总是会“迟到”并赶上整个模拟中发生的事情。

例如，如果您有一个需要每秒更新的模型，那么您必须将这些事件放入队列中，否则它们不会发生。通常，对于非常适合离散事件仿真模型的问题（在我的职业生涯中，这是基于物理的建模），这不是问题：您的模型通常在没有事件时“空闲”，并且可以计算它们的状态在未来任何特定时间，当没有事件改变其状态时。

如果您的模型不是这样，那么离散事件建模可能并不适合您的问题域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-24T20:30:52.517

java.util.concurrent 包（从 Java 5 开始可用）有助于构建可以从多核系统和 DES 应用程序中受益的并发应用程序。这是为此类应用程序设计的项目列表。 [http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/package-summary.html)

# jquery - 如何创建从固定位置开始的浮动标签？

> ID：13187146
> 
> 赞同：0
> 
> 时间：2012-11-01T23:38:04.230
> 
> 标签：jquery, html, draggable

我想创建一个关于 width=200px 和 height=100px 的小 DIV 并使其有点透明。

DIV 需要在图片上。我希望客户端能够在屏幕上的任何位置拖动 DIV。

在初始页面加载时，我需要将 DIV 放置在相同的固定位置才能启动。

有没有人有任何 jquery 脚本可以做到这一点？

感谢您。

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:53:01.393

这很古怪，但可能会给你一个简单的开始。希望其他人可以参与！:)

JSFiddle [http://jsfiddle.net/V3TQ9/](http://jsfiddle.net/V3TQ9/)

CSS（我没有添加透明度）

```
<style type="text/css">

    #moveit {
    width:200px;
    height:50px;
    position:absolute;
    left:0px;
    top:0px;
    z-index:100;
    background-color:#666666;
    display:block;
}

</style> 
```

HTML

```
<div id="moveit"></div> 
```

jQuery

```
<script type="text/javascript">

$('#moveit').mouseup(function(e){ 

        $('#moveit').css({ left : (e.pageX - 100) , top : (e.pageY - 25) });
        $('#moveit').off('mousemove');

}).mousedown(function(){  

        $('#moveit').on('mousemove', function(e){       
            $('#moveit').css({ left : (e.pageX - 100) , top : (e.pageY - 25) });
        });

});

</script> 
```

# c# - 在自定义错误页面中显示错误堆栈跟踪信息

> ID：13187148
> 
> 赞同：0
> 
> 时间：2012-11-01T23:38:18.197
> 
> 标签：c#, asp.net, ajax, visual-studio-2010

我正在使用VS2010。

我在 Application_Error 中记录我的异常，然后自动重定向到自定义错误页面。

在自定义错误页面上，我想显示错误的堆栈跟踪。

我无法实现下一篇文章中的方法，因为我在所有页面中都使用了 ajax 控件，如果我使用下一篇文章中的解决方案，我会收到 ajax 错误。

我更新了 web.config 如下：

```
<customErrors defaultRedirect="~/CustomError.aspx" mode="On" redirectMode="ResponseRewrite" /> 
```

web.config的ajax错误如下：

**Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。此错误的常见原因是通过调用 Response.Write()、响应过滤器、HttpModules 或启用了服务器跟踪来修改响应。详细信息：在 ' 附近解析错误**

[ASP.NET 自定义错误页面 - Server.GetLastError() 为空](https://stackoverflow.com/questions/343014/asp-net-custom-error-page-server-getlasterror-is-null)

我不能使用以下方法，因为我被告知要远离会话和应用程序级存储。

[Asp.net 4.0：如何在自定义错误页面中获取异常详细信息？](https://stackoverflow.com/questions/11425032/asp-net-4-0-how-to-get-exception-details-in-custom-error-page)

那我有什么选择？？有没有其他方法可以在 Application_Error 中存储错误信息并在自定义错误页面上恢复错误堆栈跟踪？此页面由 asp.net 引擎自动重新路由。

# php - 将jquery div id值存储到php变量中

> ID：13187149
> 
> 赞同：0
> 
> 时间：2012-11-01T23:38:18.773
> 
> 标签：php, javascript, jquery, ajax

我有一个问题，需要一个解决方案。我有一个服务器发送事件，每次数据库发生更改时都会更新为 div id。现在我的问题是如何从该 div id 中获取值并将其保存到 PHP 变量中。

```
<script>
    if(typeof(EventSource)!=="undefined")
    {
        var source=new EventSource("bookcounterevent.php");
        source.onmessage=function(event)
        {
            document.getElementById("bookcounter").innerHTML=event.data;
        };
    }
    else
    {
    document.getElementById("bookcounter").innerHTML="Please update your browser!!";
    }
    </script>
    <div id="bookcounter"></div> 
```

上面的代码更新了`<div id="bookcounter"></div>`，我想要我在 id **bookcounter**收到的值，我想将它保存到一个 php 变量`$book`中。怎么可能呢？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:04:38.973

```
<style>
#notification {
    color:green;
}
#nonotification {
    color:red;
}
</style>
<script> 
      if(typeof(EventSource)!=="undefined") 
      { 
          var source=new EventSource("bookcounterevent.php"); 

          source.onmessage=function(event) 
          { 
              if(parseInt(event.data) > 0){ 
                document.getElementById("bookcounter").innerHTML=event.data; 
              } 
              else{ 
                document.getElementById("nonotification").innerHTML= 'nothing to display'; 
              } 
          }
      } 
      else 
      { 
        document.getElementById("bookcounter").innerHTML="Please update your browser!!"; 
      } 
  </script>

<div id="notification"></div>
<div id="nonotification"></div> 
```

# c++ - 选择正确的数据结构

> ID：13187153
> 
> 赞同：1
> 
> 时间：2012-11-01T23:38:29.983
> 
> 标签：c++, sorting, stl

我有一个 Tool 结构，其中包含有关从数据库表中检索到的工具的信息，其中在程序启动时检索所有工具。

```
struct Tool {
    const int            id;
    const std::string    name;
    const std::string    category;
    int                  outcomeID;
} 
```

我有一个 ToolManager 类，它现在将这些工具保存在一个向量中。我正在苦苦挣扎的是，根据我需要如何检索和显示它们，哪种容器最适合存储它们。

有时它们需要按其结果ID 显示在表格分组工具中。很多时候，它们按类别显示在树结构中，并且只有一个或两个结果 ID，如下所示：

```
CategoryName1
    Tool_1
    Tool_3
CategoryName2
    Tool_5 
```

我宁愿**不**使用 Boost::multi_index （对于项目的性质来说太复杂了）。什么是存储和检索这些的简单、有效的方法？

编辑：要清楚，我需要能够通过类别或结果ID 的组合来存储和查找这些工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:54:06.690

一种解决方案是使用带有永久迭代器（例如`list`）的容器作为主存储，并使用迭代器的辅助容器进行快速检索：

```
#include <list>
#include <set>

typedef std::list<Tool> container_type;
typedef container_type::iterator iterator_type;

struct outcome_cmp
{
    bool operator<(iterator_type const & a, iterator_type const & b) const
    {
        return a->outcomeID < b->outcomeID;
    }
};

container_type tools;
std::multi_set<iterator_type, outcome_cmp> outcome_index;

// insert "x":
auto it = tools.insert(tools.end(), x);
outcome_index.insert(it); 
```

现在，您可以使用通常的多集迭代模式来获取按结果 ID 分组的工具。

同样，您可以对类别和名称进行排序：

```
#include <tuple>  // for std::tie and free lexicographic ordering

struct cat_cmp
{
    bool operator<(iterator_type const & a, iterator_type const & b) const
    {
        return std::tie(a->category, a->name) < std::tie(b->category, b->name);
    }
};

std::multiset<iterator_type, cat_cmp> cat_index; 
```

# c# - 以回调函数为参数导出 C++ 函数

> ID：13187154
> 
> 赞同：1
> 
> 时间：2012-11-01T23:38:29.800
> 
> 标签：c#, c++, callback

我在 dll 中有一个名为 DoAllWork 的 c++ 函数。它周围有 ac# 包装器。我在 c# 包装器中创建了一个委托，并将它作为回调传递给 dll 中的 c++ 函数。

我的c#代码如下：

```
 public delegate int UpdateDelegate(int status);

            public static int UpdateDelegate(int status)
            {
                return status;
            }

            [DllImport(_dllLocation)]
            public static extern int DoAllWork( string param1, string param 2,... UpdateDelegate callbackproc);
        } 
```

我在c++头文件中声明了DoAllWork函数，并在cpp文件中实现如下：

.h 文件：

```
int DoAllWork(string param1, string param 2,... int (*statusfunction(int)) 
```

.cpp 文件：

```
int DoAllWork(string param1, string param 2,... int (*statusfunction(int))
 {
//do work;
} 
```

然后我们从名为 ExportAll.cpp 的第三个 cpp 文件中导出 c++ 函数 DoAllWork，代码如下：

```
EXPORT_FUNC Init(const char* path)
{
    cppLibrary = new CPPLibrary();
    return cppLibrary->Init(path);
}

EXPORT_FUNC DoAllWork(string param1, string param 2,..., 
int(*statusfunction(int))
        )
{
return cppLibrary->DoAllWork(string param1, string param 2,..., ??????);
} 
```

我的问题是，无论我尝试为最后一个参数（ int(*statusfunction(int))) 传递参数的方式如何，我都会遇到错误

知道如何在导出带有回调函数作为参数的 c++ 函数时传递参数吗？

谢谢

# javascript - jQuery each() - 它是如何在内部真正工作的？

> ID：13187156
> 
> 赞同：5
> 
> 时间：2012-11-01T23:39:06.900
> 
> 标签：javascript, jquery

我已经咨询了 jQuery 源代码，但我必须承认这可能超出了我的理解——或者我找错了地方。 [https://github.com/jquery/jquery/blob/master/src/core.js](https://github.com/jquery/jquery/blob/master/src/core.js)

在第 222 行附近有一个看起来是递归的函数，然后在第 566 行附近又有一个在 .extend() 命名空间中声明的函数。

我只是好奇——这究竟是如何工作的？例如，当我打电话时：

```
$('.item').each(function(){
    // Do Something
}); 
```

它如何知道循环遍历 DOM 元素数组、何时停止、如何应用函数？它不能只是做

```
$('.item').doThis() 
```

因为 doThis() 可能不是该对象的成员。

请赐教：）谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:44:01.837

据我所知，这

```
$('selector').each(func); 
```

相当于这样做：

```
func = ...;
$selector = $('selector');
for (var i = 0; i < $selector.length; i++) {
    if (func.call($selector[i], i, $selector[i]) === false) {
        break;
    }
} 
```

$ 选择返回的对象实际上是一个 DOM 元素数组，并附加了一大堆额外的方法，因此您基本上可以像使用 Array 一样使用它。希望这能说明问题！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:46:39.577

不，它不是递归的。[第222 行](https://github.com/jquery/jquery/blob/master/src/core.js#L222)的函数是 jQuery 原型 ( `$.fn`) 上的函数，而它调用的函数是- 一个在[第 566 行](https://github.com/jquery/jquery/blob/master/src/core.js#L566)`jQuery.each`定义的静态属性。注意是如何工作的：如果没有给出要扩展的对象，它使用. 它既适用于代码的不同部分，也适用于代码的不同部分。[`extend`](https://github.com/jquery/jquery/blob/master/src/core.js#L272)`this``jQuery``jQuery.fn`

> 那么这到底是如何工作的呢？

`$obj.each(callback)`正在调用该`$.fn.each`方法，该方法适用`$.each`于 jQuery 实例（DOM 包装器）本身：[第 223 行](https://github.com/jquery/jquery/blob/master/src/core.js#L223)。

现在，在 中`$.each`，有四种情况：有或没有提供`args`的数组，以及在类似数组的结构或其他对象上。您没有传递额外的参数，并且 jQuery 实例有一个属性并且在数字索引中具有 DOM 元素，因此将执行[第 596 行](https://github.com/jquery/jquery/blob/master/src/core.js#L596)`length`中的循环。所以你的电话相当于

```
for (var i=0, len=$obj.length; i<len; i++)
    if ( callback.call($obj[i], i, $obj[i]) === false ) break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:48:38.330

您在 jQuery 中执行的每个查询都存储为类似数组的对象，这意味着您可以通过执行以下操作访问您的查询找到的 DOM 元素列表：

```
$('.item')[0] //The first item found by your query 
```

在内部，$().each 使用 $.each，这是一种遍历集合的方法，调用作为参数传递的函数，并使用 'Function.apply' 将 'this' 设置为当前对象被迭代通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T23:55:06.033

查看[源代码中的第 566 到 605 行](https://github.com/jquery/jquery/blob/master/src/core.js)

它是迭代的并且相当简单。

# xml - 如何通过 XSL 从现有 XML 文件中的字符串正确调用图像？

> ID：13187157
> 
> 赞同：2
> 
> 时间：2012-11-01T23:39:07.897
> 
> 标签：xml, xslt, image

我在将图像调用到转换后的 xsl 文件时遇到问题。

这似乎很简单，但我找不到解决方案。我已经尝试在这里搜索并使用提供的各种类似答案，但没有运气。

我正在尝试使用里面的字符串

```
<image>string</image> 
```

作为显示我的图形的文件路径。

我尝试过的任何结果总是给我一个破碎的小图形图标。

提前致谢。

编辑：我会更具体。（抱歉，这一天太长了）

我正在使用带有“XML 工具”插件的 Notepad++，当我专注于 XML 文件时，我可以通过指定 xsl 文件来应用 XSL 转换。我将它保存为新创建的 html 文件。

打开它应该显示我所有的数据+图像。但是，当无法找到图形时，我会得到占位符。（即在 Internet Explorer 中，它是带有红十字的小图标。）

在文件开头使用样式表方法调用还应该允许我查看转换，而无需使用 Firefox 创建任何新文件。但它也无法显示。

这是我的 XML：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <?xml-stylesheet href="aperture_event_page.xsl" type="text/xsl"?>
    <listings
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="aperture_venues.xsd">

        <venue id="apv_01">
            <image>/images/apv_01.png</image>
            <other elements></other elements>
            ...
            <more elements>
                <elements></elements>
                ...
            </more elements>
        </venue>

        <venue id="apv_02">
            #repeat#
        </venue>

        <venue id="apv_03">
            #repeat#
        </venue>

        <venue id="apv_04">
            #repeat#
        </venue>
    </listings/> 
```

和我的 XSL：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <xsl:element name="html">
            <xsl:element name="head">
                <xsl:element name="title">Event</xsl:element>
            </xsl:element>

            <xsl:element name="body">
                <xsl:element name="image">
                    <img src="{image}"/>
                </xsl:element>
                <xsl:apply-templates select="/listings/venue/image"/>
            </xsl:element>
        </xsl:element>
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:25:11.633

```
 <xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="html" omit-xml-declaration="yes"/>
    <xsl:template match="/">
    <xsl:element name="html">
    <xsl:element name="head">
    <xsl:element name="title">Event: Concert</xsl:element>
    </xsl:element>
    <xsl:element name="body">
    <xsl:apply-templates select="/listings/venue/event[@id='eve_01']"/>
    </xsl:element>
    </xsl:element>
    </xsl:template>
    <xsl:template match="event">
    <xsl:element name="img">
    <xsl:attribute name="src">
    <xsl:text>
    http://url to image path/xml/task2/event_page
    </xsl:text>
    <xsl:value-of select="../image/text()"/>
    </xsl:attribute>
    </xsl:element>
    </xsl:template>
    </xsl:stylesheet> 
```

使用 xsl:text，我能够指定图像路径 url，然后将图像元素字符串作为文件名来完成完整路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T02:10:52.087

您在`<xsl:element>`不需要它的地方使用它，并且没有在您需要的地方使用它。

这里还不足以完全告诉我你在追求什么，但这应该让你更接近：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" omit-xml-declaration="yes"/>

    <xsl:template match="/">
        <html>
            <head>
                <title>Event</title>
            </head>

            <body>
                <xsl:apply-templates select="/listings/venue/image"/>
            </body>
        </html>
    </xsl:template>

    <xsl:template match="image">
        <xsl:element name="img">
            <xsl:attribute name="src">
                <xsl:value-of select="." />
            </xsl:attribute>
        </xsl:element>
    </xsl:template>

 </xsl:stylesheet> 
```

这将生成一系列 html`<img>`标签，其`src`属性正确包含`<image>`原始 xml 中每个标签的图像路径。

如果您希望输出为 xhtml 而不是纯 html（因此标签正确终止为 xml），如果您使用 XSL 1.0，则可以将输出方法更改为“xml”，如果您使用的是“xhtml”使用 XSL 2.0。

# c# - ConcurrentDictionary.AddOrUpdate()

> ID：13187164
> 
> 赞同：0
> 
> 时间：2012-11-01T23:39:40.863
> 
> 标签：c#, .net-4.0, concurrentdictionary

我正在尝试在 ConcurrentDictionary 类中使​​用 AddOrUpdate() 方法。我遇到了更新问题。以下是代码：

```
dictionary.AddOrUpdate(oid, pList, (o,p) =>
{
    for (int i=0; i < p.Count; i++)
        p[i] = pList[i];
    return p;
}); 
```

当/如果我用已经存在的键点击字典时，我想更新 pList 对象中包含的 3 个值。目前，只有最后一次迭代（ p[2]）在字典中被更新。我错过了什么？

# c++ - 将两个链表相加，其中每个节点都是一个数字

> ID：13187168
> 
> 赞同：1
> 
> 时间：2012-11-01T23:40:19.953
> 
> 标签：c++, linked-list

我正在尝试编写一个对整数求和的函数，每个整数都由一个链表表示，其中每个节点->数据是一个数字 0-9。最低有效位在列表的开头，最高位在末尾。

这是来自《破解编码面试》一书。这是我的代码：

```
SinglyLinked<int>& addLists(SinglyLinked<int>& ll1, SinglyLinked<int>& ll2)
{
  SinglyLinked<int> *sumList = new SinglyLinked<int>;

  ListNode<int> *node1 = ll1.head; ListNode<int> *node2 = ll2.head;

  int sum, carry = 0;
  while(node1 || node2)
  {
    if(node1)
      sum += node1->data;
    if(node2)
      sum += node2->data;
    sum += carry;

    carry = 0;
    sumList->insertAtEnd(sum%10);
    if(sum > 9)
      carry = 1;
    sum = 0;
    node1 =  node1->next; node2 = node2->next;
  }
  return *sumList;
} 
```

首先，这段代码是否正确？它似乎有效，但是当给定两个不同长度的链表（整数）时，它会出现故障。我想知道这个问题是否只是为了解决整数长度相同的情况。如果不是，我将如何将两个不同长度的列表相加？我天真的解决方案是存储每个列表的长度，然后使用它来创建只有一个数字会贡献的数字，直到两个整数对齐。还有比这更优雅的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:44:51.530

它在不同长度的列表上出现段错误，因为`node1`or`node2`指向 null。

改变

> 节点1 =节点1->下一个；节点2 =节点2->下一个；

到

```
if (node1)
    node1 = node1->next;

if (node2)
    node2 = node2->next; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:42:53.247

```
while(node1 || node2) 
```

如果任一节点都正常，请继续。但是该块希望两个节点在它到达这里时都是有效的：

```
node1 =  node1->next; node2 = node2->next; 
```

您需要在 if node1 检查中使用“下一步”：

```
if(node1) {
  sum += node1->data;
  node1 = node1->next;
} 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-16T11:45:17.437

有一个条件，其中 node1 和 node2 将指向 NULL，如果前一个数字操作有进位，它将不会附加到 sumlist 的末尾。例如，6->5->4 + 4->5->6 应该是 0->1->1->1 但 sumlist 将是 0->1->1。因此，在返回行之前，您应该添加：

```
if (carry)
   sumList->insertAtEnd(carry); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-07T19:16:44.997

这个问题的另一个解决方案是，当您将每个列表中的数字相加时，将它们相加以获得等于两个列表之和的大和，将该和转换为字符串，并将字符串的每个字符附加到一个新列表中。希望它可以帮助某人。下面是代码。

节点.h 文件

```
#ifndef node_h
#define node_h

class LinkedList
{

private:
    struct node
    {
        int data;
        node *next;
    };
    node *head;

public:
    LinkedList ();
    node *createNode (int key); 
    void appendNodeBack (const int &key);
    void printList ();
    int SumOfNodes (const LinkedList list1);
};
#endif 
```

节点.cpp 文件

```
#include "node.h"
#include <math.h>

LinkedList::LinkedList ():head(NULL) {}

LinkedList::node *LinkedList::createNode (int key)
{
    node *newNode = new node;
    newNode->data = key;
    newNode->next = NULL;
    return newNode;
}

void LinkedList::appendNodeBack (const int &key)
{
    node *newNode = createNode (key);

    //if tree is empty
    if (head == NULL)
    {
        head = newNode;
        return;
    }

    //if tree is not empty
    //traverse to the last node in the list
    node *temp = head;
    while (temp->next != NULL)
        temp = temp->next;
    temp->next = newNode;
}

void LinkedList::printList ()
{
    //if tree is empty
    if (head == NULL)
    {
        std::cout << "Tree is empty!\n";
        return;
    }

    //if tree not empty
    node *temp = head;
    while (temp != NULL)
    {
        std::cout << temp->data<<"-->";
        temp = temp->next;

    }
    std::cout << "NULL\n";
}

int LinkedList::SumOfNodes (const LinkedList list1)
{   
    //find the length of the list
    node *temp = head;
    int count = 0;

    while (temp != NULL)
    {
        count++;
        temp = temp->next;
    }

    //re-assign temp to head
    temp = head;

    //calculate the sum
    unsigned int sum = 0;

    for (unsigned int i = 1; i < pow (10, count); i = i * 10)
    {
        sum = sum + temp->data * i;
        temp = temp->next;
    }

    return sum;
} 
```

main.cpp 文件

```
#include <iostream>
#include "node.cpp"

int main ()
{
    LinkedList list1, list2, list3;
    list1.appendNodeBack (2);
    list1.appendNodeBack (3);
    list1.appendNodeBack (5);
    list1.appendNodeBack (4);

    list2.appendNodeBack (5);
    list2.appendNodeBack (6);
    list2.appendNodeBack (7);
    list2.appendNodeBack (8);

    list1.printList ();
    std::cout << list1.SumOfNodes (list1) << std::endl;

    list2.printList ();
    std::cout << list2.SumOfNodes (list2) << std::endl;

    unsigned int sum = list1.SumOfNodes (list1) + list2.SumOfNodes (list2);

    //convert the number to string
    std::string str = std::to_string (sum);

    //append integer value to the new list
    for (unsigned int i = 0; i < str.length (); i++)
        list3.appendNodeBack (int (str[i] - '0'));

    std::cout << "The new list becomes\n";
    list3.printList();

    return 0;
} 
```

# java - Java：GC透明背景

> ID：13187176
> 
> 赞同：2
> 
> 时间：2012-11-01T23:41:12.997
> 
> 标签：java, swt

我正在使用 GC (org.eclipse.swt.graphics.GC) 将一些图片组合成一个图像（使用 drawImage）。问题是，默认情况下 GC 有白色背景。是否可以将背景设置为透明？或任何其他解决方案从一张图片中剪切一部分并粘贴到第二张？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T09:12:36.883

简单来说，GC就是一支笔，笔无法控制画布的透明度。它只能在画布上绘制一些东西。所以，GC 不能操作 image 本身，只是 GC 可以在 Image 上绘制一些东西。

但是，您可以使用 ImageData API 直接控制透明度数据。你应该知道ImageData上除了setPixel(x, y, pixel), setAlpha(x, y, alpha)之外没有什么高级绘图API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-21T14:03:34.627

你可以使用没有背景的画布

```
Canvas canvas = new Canvas(parent, SWT.NO_REDRAW_RESIZE | SWT.NO_BACKGROUND); 
```

然后您可以（如在此[示例](http://www.eclipse.org/articles/Article-SWT-images/graphics-resources.html#Transparency)中）使图像的一种（或多种）颜色透明。

```
ImageData ideaData = new ImageData(getClass().getResourceAsStream("Idea.jpg"));
int whitePixel = ideaData.palette.getPixel(new RGB(255,255,255));
ideaData.transparentPixel = whitePixel;
Image transparentIdeaImage = new Image(display,ideaData); 
```

# android - 事件太多

> ID：13187177
> 
> 赞同：2
> 
> 时间：2012-11-01T23:41:26.553
> 
> 标签：android, accessibility

我想为通知区域上显示的每个新通知获取一个事件。为了做到这一点，我使用了接下来展示的accessibilityEvent。我的问题是我得到了太多的事件。我什至得到我自己的应用程序事件。但是其中许多（大多数）与通知无关。如果手机正在充电，我会每 10 秒开机一次。在模拟器中，我每 2 秒（或多或少）从我的应用程序中收到一个事件。

那么问题来了，有没有办法知道任务栏中是否显示了新的通知呢？或者，我如何浏览所有与通知无关的事件？

这是我使用的代码：

在清单中：

```
<service android:name=".MyAccessibilityEventClass" android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
   <intent-filter >
      <action android:name="android.accessibilityservice.AccessibilityService" />
   </intent-filter>
   <meta-data
      android:name="android.accessibilityservice"
      android:resource="@xml/accessibilityservice" />
</service> 
```

和文件 res/xml/accessibilityservice.xml：

android:accessibilityEventTypes="typeNotificationStateChanged" android:accessibilityFeedbackType="feedbackSpoken" android:notificationTimeout="100" />

在 MyAccessibilityEventClass 中：

```
@Override public void onAccessibilityEvent(AccessibilityEvent event)
{   if(event.getEventType() == AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED)
    {  final String s = String.valueOf(event.getPackageName());
       ShowToast(s);  <-- Too many messages because too many events
    }
} 
```

谢谢你们

# asp.net - 使用添加更新删除选项创建动态表

> ID：13187179
> 
> 赞同：0
> 
> 时间：2012-11-01T23:41:43.233
> 
> 标签：asp.net, c#-4.0

我是 asp.net 的新手，所以我不知道处理以下情况的最佳方法。我想创建一个像下面这样执行添加更新删除的动态表 -

```
Player SmartGoal Decision Thinking
ABC      10          10      9
PQR      7            9     10 
```

下一个时间表将是 -

```
Player Decision   Learning
ABC      10          5      
PQR      7           9 
```

我正在使用 C#

我认为我们必须创建数据绑定来以编程方式控制和控制。

我应该使用什么控件？这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:32:18.140

您应该使用[GridView](http://code.msdn.microsoft.com/CSASPNETGridView-5b16ce70)控件。
或者对于更高级和更简洁的东西，您可能想尝试 [telerik][2] 控件（不是免费的）这一切都需要由数据库驱动。

随便搜索两篇教程上手：如何创建sql server数据库，如何使用GridView控件。

如果您需要显示分层数据，您可以尝试使用[ListView](http://mattberseth.com/blog/2008/01/building_a_grouping_grid_with.html)控件：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:05:27.147

一种方法是：从数据库中获取列名并将它们添加到标签中。喜欢`lblColumn1.Text = colname1`&等等。使用循环。

下一步是获取条目并将它们再次添加到文本框/标签。 `similar coding`. 忘记不要对异常使用 Try/catch。您永远不知道 DB 中的哪一列没有值或空值。

用于编辑/添加/删除。在每条记录之前添加按钮到`delete and edit` `add`按钮应该在顶部。

**无需数据绑定或类似的东西。**基本的asp知识就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:28:34.980

据我了解，您正在从数据库中获取数据并绑定到某些控件。我认为最好的方法是从数据库中获取数据集并绑定到 gridview。您可以在网上找到许多用于在互联网上绑定 sql 数据集的示例。请让我知道任何进一步的澄清。

谢谢乌塔姆

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T04:23:37.287

据我了解，您正在从数据库中获取数据并绑定到某些控件。我认为最好的方法是从数据库中获取数据集并绑定到 gridview。您可以在网上找到许多用于在互联网上绑定 sql 数据集的示例。请让我知道任何进一步的澄清。

如果可能，请提供更多详细信息。这里我举一个例子，在运行时创建动态表

Private Sub BuildSTX9Header() Dim dtTemp As New DataTable Dim dr As DataRow

```
 dtTemp.Columns.Add(Me.GetLocalResourceObject("STXLocationID").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("SKU").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("SKU Description").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("MED").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("MSFSupportedProduct").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("Infor365 Product").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("SupportPlan").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("No.Users").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("SAM").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("LocationName").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("SerialNumber").ToString)
    dtTemp.Columns.Add(Me.GetLocalResourceObject("Phone").ToString)

    For i = 0 To dsData.Tables(0).Rows.Count - 1
        dr = dtTemp.NewRow()

        dr(0) = dsData.Tables(0).Rows(i)(2)
        dr(1) = dsData.Tables(0).Rows(i)(3)
        dr(2) = dsData.Tables(0).Rows(i)(4)
        dr(3) = dsData.Tables(0).Rows(i)(5)
        dr(4) = dsData.Tables(0).Rows(i)(6)
        dr(5) = dsData.Tables(0).Rows(i)(7)
        dr(6) = dsData.Tables(0).Rows(i)(8)
        dr(7) = dsData.Tables(0).Rows(i)(9)
        dr(8) = dsData.Tables(0).Rows(i)(10)
        dr(9) = dsData.Tables(0).Rows(i)(11)
        dr(10) = dsData.Tables(0).Rows(i)(12)
        dr(11) = dsData.Tables(0).Rows(i)(13)
        dtTemp.Rows.Add(dr)
    Next
    gvLoadRuntime.DataSource = dtTemp
    gvLoadRuntime.DataBind()
    ViewState("RowCount") = dtTemp.Rows.Count
    ViewState("dvRuntimeData") = dtTemp 
```

谢谢乌塔姆

# c++ - C++::overloading operator* 用于矩阵 - 向量乘法

> ID：13187183
> 
> 赞同：0
> 
> 时间：2012-11-01T23:41:59.457
> 
> 标签：c++, matrix-multiplication

我想重载 operator* 以进行矩阵 - 向量乘法。这是我的向量和矩阵类：

```
class Vec2
{
  public:
    Vec2(){}
    Vec2(const RealNumber& a, const RealNumber& b)
    {
      a_ = a; b_ = b;
    }

    Vec2& operator =  (const Vec2& B)
    {
      a_ = B.a_;
      b_ = B.b_;
      return(*this);
    }

    void a(const RealNumber& a){
      a_ = a;
    }

    void b(const RealNumber& b){
      b_ = b;
    }

    const RealNumber a(void){
      return(a_);
    }

    const RealNumber b(void){
      return(b_);
    }

  private:
    RealNumber a_,b_;
}; 
```

和矩阵类：

```
class Mat2x2
{
  public:
    Mat2x2(){}
    Mat2x2(const RealNumber& a,
           const RealNumber& b,
           const RealNumber& c,
           const RealNumber& d)
    {
      a_ = a; b_ = b; c_ = c; d_ = d;
    }

    Mat2x2& operator =  (const Mat2x2& B)
    {
      a_ = B.a_;
      b_ = B.b_;
      c_ = B.c_;
      d_ = B.d_;
      return(*this);
    }

    const RealNumber a(void){
      return(a_);
    }

    const RealNumber b(void){
      return(b_);
    }

    const RealNumber c(void){
      return(c_);
    }

    const RealNumber d(void){
      return(d_);
    }
    // compile time problem with this overloading function
    const Vec2 operator * (const Vec2& B) const {
      Vec2 result;
      result.a(this->a_*B.a()+this->b_*B.b());
      result.b(this->c_*B.a()+this->d_*B.b());
      return result;
    }    

  private:
    RealNumber a_,b_,c_,d_;
}; 
```

我编译代码`g++`并得到以下错误：

`error: passing ‘const rln::Vec2’ as ‘this’ argument of ‘const rln::RealNumber rln::Vec2::a()’ discards qualifiers [-fpermissive]`

我无法弄清楚如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T23:44:57.270

使您的访问器函数`const`，如下所示：

```
RealNumber a() const { return a_; }
//             ^^^^^ 
```

（顺便说一句，没有必要制作返回值`const`；事实上，这是 C++11 中不推荐使用的模式。保持简单即可。）

# authentication - 使用 Play 框架进行 CAS 身份验证

> ID：13187185
> 
> 赞同：2
> 
> 时间：2012-11-01T23:42:14.863
> 
> 标签：authentication, playframework-2.0, cas

我需要使用 CAS 来授权对使用 Play 构建的 Web 应用程序的访问！2.x 框架。玩！1.x 有一个 CAS 模块（http://www.playframework.org/modules/cas）；玩！2.x 没有（我已经找到了）。

有没有人愿意分享示例代码？提示/技巧/陷阱？否则，我将深入研究 1.x 模块，看看是否可以调整它以与 2.x 一起使用。

我正在使用 Scala 进行开发。

谢谢，拜伦

[更新] 我也在Play上问过这个！谷歌组。詹姆斯罗珀回复说：

> 好吧，Play 2 与 Play 1 完全不同，所以不要指望它很容易移植。您有两种通用方法：
> 
> 1）简单但不太好的方法，使用官方的 CAS Java 客户端在 CAS 服务器上进行阻塞调用。确保您的 Akka 线程池为此进行了调整，默认情况下，它们为每个核心提供一个线程，如果您采用这种方法，您可能需要 100-200 个线程，否则其他请求将被正在尝试的请求阻塞与 CAS 服务器通信，尤其是在 CAS 服务器响应缓慢的情况下。
> 
> 2) 困难但更好的方法是使用 Play WS API 实现您自己的非阻塞 CAS 客户端。该协议在这里描述：[http ://www.jasig.org/cas/protocol](http://www.jasig.org/cas/protocol)

我目前的想法是在 Play 前面放置一个 Apache 服务器来进行 CAS 身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T09:19:20.097

我已经创建了您正在寻找的东西：Scala 和 Java 中的 Play 2.x 客户端，它支持 OAuth/CAS/OpenID/HTTP 身份验证和用户配置文件检索：[https](https://github.com/leleuj/play-pac4j) ://github.com/leleuj/play-pac4j 。

它完全支持 CAS 协议：

*   CAS 1.0 / 2.0 / SAML valition + 代理票证验证
*   注销请求
*   CAS 代理

# javascript - 一张画布，两组数据

> ID：13187187
> 
> 赞同：0
> 
> 时间：2012-11-01T23:42:17.927
> 
> 标签：javascript, canvas, d3.js

所以我有两组数据，我们称它们为 A 和 B，然后是一个画布 X

所以首先我这样做：

```
var selection=canvas.selectAll("circle")
                    .data(A)                    
selection.enter().append("circle")
selection
   .attr(...)
   .attr(...) 
```

因此，这可以满足我的要求，并制作了我的第一组圈子。但是后来我想根据数据 B 制作第二组具有不同属性的圆圈，所以我尝试执行以下操作：

```
var selection2 = canvas.selectAll("circle")
selection2.enter().append("circle").data(B)
selection2
  .attr(...)
  .attr(...) 
```

但是，这似乎不起作用，并且 selection2 会干扰选择一。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:04:23.273

只需将它们添加为具有不同选择器的元素...例如

```
var selection2 = canvas.selectAll(".circleb")
selection2.enter().append("circle").data(B)
selection2
  .classed(".circleb")
  .attr(...)
  .attr(...) 
```

使用您当前的方法，您正在选择所有*圆形* 元素（当前绑定到数据集 A），并尝试将它们重新绑定到数据集 B。通过使用不同的选择器（根据我的示例），您可以创建第二组绑定的元素到数据集 B，将原始元素绑定到数据集 A。

已编辑以修复夜间故障（如评论中所指出的）

# plone - 我应该如何设置从开发到生产 Plone 的工作流程？

> ID：13187189
> 
> 赞同：0
> 
> 时间：2012-11-01T23:42:20.280
> 
> 标签：plone, web-deployment

几年前我曾使用 Plone 2，但它的工作流程和安全系统（更不用说新的主题引擎）似乎最适合当前项目。从可用性的角度来看，Plone 4 看起来要好得多，但是在它不强制用户进行特定设置的驱动下，如何最好地将它托管在我们面向公众的 Ubuntu 服务器上已经变成了一个迷宫。我已经使用 Unified Installer (in `/home/plone/Plone/zinstance`) 安装了 Plone，并一直在前台运行它以进行开发，但我现在需要进行设置以使该网站上线。

我想在项目服务器上实现一个开发实例，我们可以将其用于我们自己的定制（在我们的桌面上使用其他本地实例进行测试，然后再签入开发实例），然后是一个我们的客户可以在他们开始之前测试的站点直播，最后是直播网站。

尤其：

1.  我假设现场站点将基于 ZEO，而测试和开发将是独立的；那有意义吗？

2.  目前，一切都存在于 中`/home/plone/Plone`，而我们所有其他（通常是 PHP CMS）网站都托管在`/srv/<domain>/www`; 然后一次性备份域的所有内容。布局不同的 Plone 实例以适应这种情况的最佳方法是什么？

3.  在从开发到测试再到现场站点的整个周期中，将我们的更改转移到构建和产品的最佳方式是什么？我们目前有一个使用 Mercurial 用于其他系统的基本部署过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T10:55:55.113

当前的最佳实践是使用[buildout](http://www.buildout.org)来定义完全可重现的部署。

通常，您使用 a`production.cfg`和 a`development.cfg`配置通过包含共享配置，以根据任一环境的特定需求调整部署；您可以根据需要扩展此模型。例如，一个大项目可能需要`staging.cfg`首先将新功能部署到测试环境。

您是否在开发中使用 ZEO 完全取决于您的用例。大多数开发设置当然不需要它，但是在包含异步工作器的大型部署中，您可能会发现无论如何在开发时都需要 ZEO 服务器。同样，buildout 将使您更轻松地切换开发环境以满足不断变化的需求，尤其是与[supervisord](http://supervisord.org/)结合使用来管理设置中使用的各种守护程序时。

对于我管理的最大部署，我们使用 subversion 和 git 的组合，但仅出于历史原因。这一切都被转移到一个 git 存储库中。最后，存储库将保存完整的构建及其各种配置，`development.cfg`以及`staging.cfg`每个生产机器的配置文件（生产集群中的每台服务器一个）。例如，对于 3 机 ZEO 设置，这将是一个`zeo.cfg`and`instances-1.cfg`和`instances-2.cfg`。核心开发鸡蛋存储在同一存储库中`src/`。

开发*仅*在每个功能和每个问题的分支中进行。完成后，将一个分支合并到暂存分支中，并更新并重新启动暂存服务器。一旦客户在每个合并的分支上签字，并计划推出，我们将批准的分支合并到主分支并标记发布。然后，生产集群机器切换到该新标签并重新启动。

我们还使用[Jenkins](http://jenkins-ci.org/)进行持续集成测试；主分支和暂存分支每天至少进行一次测试，让我们及早发现问题。

所有守护进程都由一个专门的 supervisord 管理，它是通过一个 crontab 条目 ( `@reboot`) 启动的，而不是本机 OS`init.d`结构。这样我们就可以完全通过 buildout 来管理正在运行的守护进程。构建甚至生成 logrotate 配置和 munin 监控插件；根据需要将这些符号链接到操作系统位置。

因为扩展是完全独立的，所以在机器上设置生产扩展的*位置*并不重要。一定要选择一致的东西，记录下来并坚持下去。确保你有足够的磁盘空间来满足你的守护进程需求，否则不要太担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:37:26.767

1.  ZEO 与否 - 用于生产或开发 - 取决于个人需求和偏好。许多开发人员使用 ZEO 进行生产和开发，但很多人没有。扩展需要 ZEO（多个应用服务器）

2.  没人在乎...将 Plone 安装在您想要或需要的地方...在移动安装后重新运行构建可修复重定位问题。这是你的系统，不是我们的……*你*决定。

3.  通常构建配置存在于存储库中，并且可以从存储库中拉到生产服务器上......否则您需要自己复制相关的构建文件。典型的安装工作如下：

    *   运行虚拟环境
    *   从 git/subversion 签出构建配置
    *   运行引导程序
    *   运行构建

# bash - 仅打印之间匹配的图案 和 在 sed

> ID：13187191
> 
> 赞同：2
> 
> 时间：2012-11-01T23:42:31.683
> 
> 标签：bash, shell, sed

输入 -

```
ajflkajlkaj
ddddddddddd/need/to/print/thiskkkkkkkkkkkk
ahfkjahkfja 
```

需要输出

```
/need/to/print/this 
```

谷歌搜索和调整我能够通过这样做提取“这个” -

```
sed -n 's/^.*\(this\).*$/\1/p' myfile 
```

但似乎无法正确获取从“/需要”开始的其余模式的语法。

我将不胜感激任何指针/建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:46:35.270

尝试这个 ：

```
sed -n 's![^/]\+\(.*/this\).*!\1!p'  filename.txt 
```

**笔记**

`sed`分隔符可以是你想要的，而不是默认的`/`。我`!`这里用。

如果您愿意，`grep`也可以使用一个简单的命令：

```
grep --binary-files=text -o '/.*/this' filename.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T23:47:52.340

您需要让我们知道 ddd 和 kkk 真正代表什么。假设“this”后面有一些空白，您可以改为匹配此模式：

```
sed -n 's/^[^\/]*\(.*\)\s.*$/\1/p' myfile 
```

`[^\/]*`表示首先匹配尽可能多的非/字符。

# objective-c - reloadRowsAtIndexPaths 什么都不做

> ID：13187192
> 
> 赞同：1
> 
> 时间：2012-11-01T23:42:39.243
> 
> 标签：objective-c

我需要在设备旋转时更改文本的单元格。这是我的代码：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{

[self.lista beginUpdates];
NSIndexPath *durPath = [NSIndexPath indexPathForRow:0 inSection:0];
NSArray *paths = [NSArray arrayWithObjects:durPath, nil];

UITableViewCell *celda = [self.lista cellForRowAtIndexPath:
[NSIndexPath indexPathForRow:0 inSection:0]];
celda.textLabel.text = @"new text for the cell";

[self.lista reloadRowsAtIndexPaths:paths withRowAnimation:UITableViewRowAnimationNone];
[self.lista endUpdates];

} 
```

什么也没有发生。怎么了？

# javascript - Knockoutjs 不工作

> ID：13187196
> 
> 赞同：2
> 
> 时间：2012-11-01T23:43:06.687
> 
> 标签：javascript, html, knockout.js

我开始学习knockoutjs，我遇到了一个错误。Aptana 编辑器在以下位置显示错误：

```
data-bind: .... 
```

抱怨它是专有标签的标签的属性。我已确保包含所有需要的 javascript 文件，并且我检查了之前的问题：[knockoutjs template not working](https://stackoverflow.com/questions/9277588/knockoutjs-template-not-working)。这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>  
        <script type='text/javascript' src='jquery-1.8.2.min.js'></script>
        <script src='jquery.tmpl.min.js' type='text/javascript'></script>
        <script src='knockout-2.2.0.js' type='text/javascript'></script>
    </head>

    <body>
        <script>
            function AppViewModel() {
                this.firstName = "Bert";
                this.lastName = "Bertington";
            }

            ko.applyBindings(new AppViewModel());       
        </script>
        <p>First name: <strong data-bind="text: firstName"></strong></p>
        <p>Last name: <strong data-bind="text: lastName"></strong></p>
    </body>
</html> 
```

即使在忽略了 Aptana 并希望浏览器会显示它之后，我仍然一无所获。我正在使用 Firefox 16，但我也在 IE 8 上尝试过，但无济于事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:53:19.330

将您的脚本标签移动到您的标记下方。

```
<body>
    <p>First name: <strong data-bind="text: firstName"></strong></p>
    <p>Last name: <strong data-bind="text: lastName"></strong></p>
    <script>
        function AppViewModel() {
            this.firstName = "Bert";
            this.lastName = "Bertington";
        }

        ko.applyBindings(new AppViewModel());       
    </script>
</body> 
```

# jquery - AngularJS 和 Jquery DataTables 如何使用删除和编辑图标

> ID：13187199
> 
> 赞同：0
> 
> 时间：2012-11-01T23:43:16.067
> 
> 标签：jquery, datatables, angularjs

我正在研究什么是最好的客户端 JavaScript 框架，我正在研究 AngularJS、BackboneJS 和 Dojo。我的第一个测试是使用 AngularJS，在每个框架中我需要做一个 TreeView、DataTable 和图表。

我在 AngularJS 中使用 DataTable 进行了第一次测试，但我需要做一个更完整、具有更多功能的 DataTable。但我发现了问题，也许是为了更好地理解框架。

我发现这个链接有一个我需要的完美例子。但是现在我对插件（DataTables）和o AngularJS之间的集成有疑问。

[http://jsfiddle.net/zdam/7kLFU/](http://jsfiddle.net/zdam/7kLFU/)

此范围数组将我的 Json 数据与 VIEW 链接（jsfiddle 中的完整代码）：

```
 $scope.columnDefs = [ 
        { "bSearchable":false, "mDataProp": "@uri", "aTargets":[0]},
        { "bSearchable":false, "mDataProp": "id", "aTargets":[1]},
        { "bSearchable":true, "mDataProp": "title", "aTargets":[2] },
        { "bSearchable":false, "mDataProp": "count", "aTargets":[3] },
        { "mData": null, "sDefaultContent": "<img ng-click='edit()' src='edit.gif' />", "aTargets":[-1] }
    ]; 
```

我想用这种方式有点奇怪，因为如果我要放，例如，图标（编辑，删除），我需要放，例如，这样：

```
{ "mData": null, "sDefaultContent": "<img ng-click='edit()'
> src='edit.gif' />", "aTargets":[-1] } 
```

我正在混合 HTML。我认为有更好的方法来做到这一点。最好的方法是什么？

我的另一个问题。你认为哪一个是最好的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:16:41.880

最终，您将不得不使用`img`with`src`或`span/div`with`class`在数据表列中显示图像

这很好INMO。

# python-3.x - 在 Gtk3 (python) 中动态设置 TreeView 中 Row 的 Selected 属性

> ID：13187207
> 
> 赞同：0
> 
> 时间：2012-11-01T23:44:50.263
> 
> 标签：python-3.x, treeview, gtk3

这与[我上一个](https://stackoverflow.com/questions/13128817/tweaking-the-treeview-of-pygtk-python)问题中的问题相同，但我转向 python3/gtk3 以便能够使用 css 来设置基本属性。

从python文件：

```
self.w = Gtk.Window()
self.w.set_name("App") 
```

我可以使用 CSS：

```
#App GtkTreeView row:selected {
    border-color: #000000;
    border-top-width: 1px;
    border-bottom-width: 1px;
    color: #000;
} 
```

并轻松永久更改选择的样式。对我来说，这意味着我应该能够动态访问`row`-object 及其样式，我可以在其中`bg`设置`Gtk.StateFlags.SELECTED`.

我尝试了一堆奇怪的方法，例如（在哪里`bg_color`可以`Gdk.Color`正常工作，例如更改 a`Label`外部的样式`TreeView`）。

```
 style=self.treeview.get_style_context()
        col = style.get_background_color(Gtk.StateFlags.SELECTED)
        col.alpha =  1.0
        col.blue = bg_color.blue
        col.red = bg_color.red
        col.green = bg_color.green 
```

或者：

```
 style = self.treeview.get_style().copy()
        style.bg[Gtk.StateFlags.SELECTED] = bg_color
        self.treeview.set_style(style) 
```

（产生错误`style.bg[Gtk.StateFlags.SELECTED] = bg_color IndexError: list assignment index out of range`：）

等等……

那么请问，如何找到根据行的正常颜色动态更改选择效果的方法？或者换句话说，我如何找到实际保存选择的样式设置的对象的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:22:17.060

在发布后，我有一个关于如何完成的最后一个想法，它实际上最终起作用了：

动态重新加载css：

在 css 中，我添加了一行，将背景的值留给动态替换：

```
#App GtkTreeView row:selected {
    border-color: #400;
    border-top-width: 2px;
    border-bottom-width: 2px;
    background: {0};
    color: #000;
} 
```

然后我在python中加载了css：

```
 screen = Gdk.Screen.get_default()
    self._css_provider = Gtk.CssProvider()
    css = open("notify_stack.css", 'rb')
    self._css = css.read()
    css.close()
    self._css_from = bytes("{0}".encode("utf8"))
    self._css_provider.load_from_data(self._css.replace(
        self._css_from,   
        bytes("#fff".encode("utf8"))))
    context = Gtk.StyleContext()
    context.add_provider_for_screen(screen, self._css_provider,
        Gtk.STYLE_PROVIDER_PRIORITY_APPLICATION) 
```

稍后在选择一行时的回调中，我放置了这一行（`data`是我的`ListStore`）：

```
 self._css_provider.load_from_data(
            self._css.replace(self._css_from,
                bytes(data[rows[0]][self.BG_COLOR].encode("utf8")))) 
```

感觉真的很野蛮，一定有更好的方法，但是嘿，它确实有效。

# .net - 用 VB.Net 在我的表单上画圈

> ID：13187215
> 
> 赞同：0
> 
> 时间：2012-11-01T23:45:27.520
> 
> 标签：.net, vb.net, winforms

我怎样才能在我的表格上画圈？

我试过的：

```
Dim bmp As New Bitmap(Me.Width, Me.Height)
cWidth = 3
Me.BackgroundImage = Circle (Me.Width, Me.Height,bmp,cWidth) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:00:54.157

覆盖 OnPaint 事件处理程序并从那里执行，f.ex：

```
Protected Overrides Sub OnPaint(e As System.Windows.Forms.PaintEventArgs)
    MyBase.OnPaint(e)

    Dim myPen As New Pen(Color.Red, 3) 'to set width of pen

    e.Graphics.DrawEllipse(myPen, 0, 0, _
                           Me.ClientSize.Width - 1, Me.ClientSize.Height - 1)

    myPen.Dispose()

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:08:53.087

好的，这是一个*圆圈*；-)

```
Public Class Form1
    Private Sub Form1_Paint(sender As System.Object, e As System.Windows.Forms.PaintEventArgs) Handles MyBase.Paint
        Dim p As Pen
        Dim d As Integer
        Dim x As Integer

        d = Math.Min(Me.ClientRectangle.Width, Me.ClientRectangle.Height)
        x = Me.ClientRectangle.Width / 2 - d / 2

        p = New Pen(Brushes.Navy, 7)
        e.Graphics.DrawEllipse(p, New Rectangle(x, 0, d, d))
    End Sub

    Private Sub Form1_Resize(sender As System.Object, e As System.EventArgs) Handles MyBase.Resize
        Me.Invalidate()
    End Sub
End Class 
```

# tags - 升级到 1.7.3 后，Google App Engine Search API 在 Django 中给出空白结果

> ID：13187217
> 
> 赞同：0
> 
> 时间：2012-11-01T23:45:30.283
> 
> 标签：tags, django-templates, full-text-search

升级到 GoogleAppEngineLauncher 1.7.3 (1.7.3.333) 后，在 django 模板中接收到 Search API 的结果时，每个字段的值显示为空白。

在升级之前，使用语法`{{ result.fields.1.value }}`，它会正确显示该字段的值。

为了测试，我将语法更改为：`{{ result.title }}`它给出了以下结果：

```
 [search.TextField(name=u'title', value=u'Title of first document')] 
```

但是，如果我使用`{{ result.title.value }}`它，它会再次出现空白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-14T19:26:00.320

我在处理它时遇到了类似的问题，但经过几次尝试后，我能够提出正确的解决方案，您可以使用以下选项正确显示数据

```
{{result.title.0.value}} 
```

# ninject - Ninject InRequestScope 与 asp.net web api 委托处理程序

> ID：13187221
> 
> 赞同：1
> 
> 时间：2012-11-01T23:46:10.047
> 
> 标签：ninject

我正在使用 ninject 和 asp.net web api。我已将所有接口与其实现绑定，并且全部与**InRequestScope 绑定**。

在控制器中一切正常，但是，如果我试图在委托处理程序中注入依赖项，那么整个 InRequestScope 开始失败。

我看到在几个请求过去后调用 Dispose 方法的行为。构造函数也只在第一个请求时被调用。

**通过设计解决** 了它，委托处理程序没有被 di 容器实例化。

# javascript - 为什么鼠标事件没有在正确的元素上触发？

> ID：13187222
> 
> 赞同：0
> 
> 时间：2012-11-01T23:46:17.223
> 
> 标签：javascript, d3.js

我对以下代码有疑问。鼠标悬停的图形周围应出现黄色边框。'mouseover'/'mouseout' 事件仅针对 Chart 类的最后一个实例触发。将鼠标悬停在 Chart 的第一个和第二个实例上会在 Chart 的最后一个实例上产生 mouseover/mouseout 事件。我在 Firefox、Safari 和 Chrome 下测试了这段代码，结果相同。为什么-我做错了什么？

```
<!DOCTYPE html>
<html>
<head>
<title>test</title>
<meta charset="utf-8">
</head>
<style>
rect { fill: #fff0e0; stroke: #000; stroke-width: 2.0px; }
.line { fill: none; stroke: steelblue; stroke-width: 3.0px; }
</style>
<body>
<script src="d3.v2.js"></script>

<script>
var kev_vs_rho= [{ 
values: [{x: 0.01, y: 0.2058},{x: 0.03, y: 0.2039},{x: 0.99, y: 23.2020}] }];
kev_vs_rho.minX=0.01; kev_vs_rho.maxX=0.99;
kev_vs_rho.minY=0.01; kev_vs_rho.maxY=33.66;
</script>

<script>
var kev_vs_sec= [{ 
values: [{x: 1.5, y: 0.2058},{x: 9.494, y: 1.6468},{x: 1000.0, y:23.4699}] }];
kev_vs_sec.minX=1.50; kev_vs_sec.maxX=1000.00;
kev_vs_sec.minY=0.01; kev_vs_sec.maxY=33.66;
</script>

<div id="chart1"> </div> <hr/>
<div id="chart2"> </div> <hr/>
<div id="chart3"> </div>

<script>
"use strict";
function Chart ( _width, _height, _data, _anchor ) {
    self = this;
    this.data = _data;
    this.anchor = _anchor;
    this.margin = {top: 30, right: 30, bottom: 30, left: 80};
    this.width = _width - this.margin.left - this.margin.right;
    this.height = _height - this.margin.top - this.margin.bottom;

    this.xscale = d3.scale.linear()
        .domain([this.data.minX, this.data.maxX])
        .range([0, this.width]);

    this.yscale = d3.scale.linear()
        .domain([this.data.minY, this.data.maxY])
        .range([this.height, 0]);

    this.lineA = d3.svg.line()
        .x(function (d) { return self.xscale(d.x); })
        .y(function (d) { return self.yscale(d.y); });

    this.div = d3.select(this.anchor).append("div");
    this.svg = this.div.append("svg")
        .datum(this.data[0].values)
        .attr("width", this.width + this.margin.left + this.margin.right)
        .attr("height", this.height + this.margin.top + this.margin.bottom)
        .append("g")
        .attr("transform", "translate(" + this.margin.left + "," + this.margin.top + ")");

    this.svg.append("rect")
        .attr("width", this.width)
        .attr("height", this.height);

    this.lineB = this.svg.append("path")
        .attr("class", "line")
        .attr("d", self.lineA);

    d3.select(this.anchor)
        .on("mouseover", function () {
            self.div.style("background", "yellow");
        })
        .on("mouseout", function () {
            self.div.style("background", null);
        })
};

Chart.prototype.redraw = function() {
    this.lineB
        .datum(this.data[0].values)
        .attr("d", this.lineA);
};

var chart3 = new Chart( 960, 200, kev_vs_rho, "#chart3");
var chart2 = new Chart( 960, 200, kev_vs_sec, "#chart2");
var chart1 = new Chart( 960, 200, kev_vs_rho, "#chart1");

chart1.redraw();
chart2.redraw();
chart3.redraw();

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:19:29.740

两个（可能的）原因是您有一个透明元素覆盖链接到每个图形的页面（并且因为第三个图形是最后绘制的，它在顶部结束）拦截所有鼠标移动，或者您的事件处理程序中有一些问题分配（如重复使用的参考）。

您可以使用 firebug（或其他等效的浏览器）来测试透明元素（只需右键单击并“在此处检查”，然后查看它在 DOM 对象图中的位置）。要测试事件处理程序分配，请尝试将代码的最后一步更改为：

```
d3.select(this.anchor)
    .on("mouseover", function () {
        d3.select(this).select("div").style("background", "yellow");
    })
    .on("mouseout", function () {
        d3.select(this).select("div").style("background", null);
    }) 
```

因为在处理程序内部，*这*将被设置为触发事件的元素 - 因此，如果您真的将鼠标悬停在图表 2 上，那么*应该*将其设置为 Chart2，因此 Chart2 将获得背景。

如果这不起作用，我可以建议您将代码放入 jsfiddle 中（包括任何其他 JS / CSS / 等，以便人们可以实际使用它并自己查看问题。

编辑：更新以更正选择树。

# android - Android res/layout 文件夹未包含在 APK 文件中（但包含在 ANE 中）

> ID：13187223
> 
> 赞同：0
> 
> 时间：2012-11-01T23:46:19.390
> 
> 标签：android, air, android-resources, air-native-extension

我在使用 Adob​​e ANE Android 扩展的资源时遇到问题：

> android.content.res.Resources@NotFoundException: id.myView

我有一个 xml 布局文件，它包含在 ANE 文件中（通过解压缩 ANE 文件并查看来检查`META-INF/ANE/Android-ARM`）

在 APK 文件（使用 Flash Builder 4.6 生成）中，缺少顶层`layout`文件夹（内部），但它包含在文件夹的深处：`res``assets`

```
- META-INF    
- res
    drawable
    drawable-hdpi
    drawable-ldpi
    drawable-mdpi
    raw
- assets
    META-INF
        AIR
            extensions
                org.dornad.ane.MyTestExtension
                    META-INF
                        ANE
                            Android-ARM
                                    drawable-hdpi
                                    drawable-mdpi
                                    drawable-xhdpi
                                    layout
                                    values 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:01:36.387

已解决：这是用于编译 ANE 的 Ant 脚本中的一个问题。

# autohotkey - 当窗口的一部分改变颜色时单击

> ID：13187225
> 
> 赞同：0
> 
> 时间：2012-11-01T23:46:31.453
> 
> 标签：autohotkey

我正在尝试制作一个程序，一旦桌面应用程序中的某个位置改变颜色，该程序就会在某个位置单击。它从白色变为绿色。或者是否有某种方式我可以弄清楚客户端在单击某个按钮时发送给程序的命令，然后循环该命令直到该按钮可用。

我知道这听起来令人困惑和奇怪，但请告诉我哪种编程语言最适合这些选项。另外我想知道编程会有多大的挑战，以及如何去做。目前我正在使用自动热键。如果我需要澄清一些事情，请告诉我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:35:24.073

请参阅AutoHotkey 文档中的[PixelGetColor](http://l.autohotkey.net/docs/commands/PixelGetColor.htm)。请记住，像素必须是可见的，并且 X 和 Y 是相对于活动窗口的，除非由[CoordMode](http://l.autohotkey.net/docs/commands/CoordMode.htm)更改。

```
PixelGetColor, OutputVar, X, Y [, Alt|Slow|RGB] 
```

然后，您可以将颜色与您要查找的颜色进行比较。请记住，颜色为 BGR 格式，因此 0000FF 为红色。如果您有 RGB 中的颜色，请更改它 (112233 => 332211) 或使用 RGB 参数。

# c - C 中的数组和循环

> ID：13187228
> 
> 赞同：1
> 
> 时间：2012-11-01T23:46:39.797
> 
> 标签：c, arrays

```
int main()
{
int marks[3];
int counter=0;
for (i in marks){
     printf(marks[i];
         counter=counter+1;
}
return 0

} 
```

对 C 很陌生，虽然我知道 Python。我不知道语法，但我正在尝试创建和数组，然后打印数组中的每个变量。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:49:16.630

```
#include <stdio.h>
#define NUM_MARKS 3
int main()
{
    int marks[NUM_MARKS];
    /* marks contains all undefined data */
    int counter=0;
    int i;
    for (i = 0; i < NUM_MARKS; i++){
         printf("%d\n", marks[i]);
         counter++;
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-01T23:48:57.637

1.  That's not how you do a `for` loop in C. See my example. And search google or SO.
2.  You missed a closing bracket on the `printf` line.
3.  You missed a semicolon `;` after `return 0`.
4.  You didn't define any data in the array.
5.  `printf` takes a string, not an int as it's first argument.

    ```
    int main()
    {
        int marks[] = {1, 2, 3};
        int i;
        for (i = 0; i < 3; i++){
            printf("%d", marks[i]);
        }
        return 0;
    } 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-01T23:49:42.287

```
for (int i = 0; i < 3; i++) 
```

assuming C99 support. Without C99 support,

```
int i;
for (i =0; i < 3; i++) 
```

You can also use `NUM_MARKS` in place of the 3:

```
enum { NUM_MARKS = 3 };
int marks[NUM_MARKS]; 
```

or:

```
enum { NUM_MARKS = sizeof(marks) / sizeof(marks[0]) }; 
```

The net result is the same.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T23:50:25.447

C does not have foreach type loops as Python does. You can't just assume that language A works like language B. You need:

```
for(int i = 0; i < sizeof(marks) / sizeof(marks[0]); ++i) {
    printf("%d\n", marks[i]);
} 
```

If you're working in VS (and actually compiling as C) then you'll need to declare all of your variables at the top of the function. C99 changed this, but unfortunately MS will never support C99.

# javascript - 如何使用 Google 的 Closure 库获取 DOM 元素的当前视口位置？

> ID：13187231
> 
> 赞同：2
> 
> 时间：2012-11-01T23:47:07.130
> 
> 标签：javascript, positioning, google-closure, google-closure-library

我正在为一个项目使用谷歌的闭包库，并希望在页面上找到给定元素的位置。基本上我想做 Quirksmode findPos() 所做的事情：

[http://www.quirksmode.org/js/findpos.html](http://www.quirksmode.org/js/findpos.html)

我查看了谷歌的定位文档：

[http://closure-library.googlecode.com/svn/docs/namespace_goog_positioning.html](http://closure-library.googlecode.com/svn/docs/namespace_goog_positioning.html)

...但我找不到与获取元素当前位置相关的任何内容。**该库是否提供了解决方案，还是我应该求助于本机 javascript 来处理这个问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:40:11.917

您要查找的功能位于 中`goog.style`，我很确定[`goog.style.getPageOffset`](http://google.github.io/closure-library/api/namespace_goog_style.html#getPageOffset)这就是您想要的。

# c# - 在 C# 中获取文本数据并将其拆分为 2 个单独的一维数组

> ID：13187235
> 
> 赞同：1
> 
> 时间：2012-11-01T23:47:47.940
> 
> 标签：c#, arrays, input

我正在做一个项目，我完全被卡住了。我基本上需要从格式如下的文件中读取文本数据：

每行 4 个数字，用逗号分隔（没有多少行的硬性规定，这个程序应该能够处理任意数量的行）

```
2, 32, 4, 7
4, 8, 3, 8
33, 11, 56, 65 
```

基本上我只需要这个文本文档中的 0 元素和第 3 个（最后一个）元素，我需要将它们转换为整数并将它们放入自己的数组中：

所以对于 0 元素我会有一个数组（如果使用上面的文本示例）：

```
zeroArray[] = 2, 4, 33
thirdArray[] = 7, 8, 65 
```

所以，如果我`zeroArray[1]`说它会`4`，如果我`thirdArray[0]`说它会说`7`（*这是使用上面的示例数据，它需要能够使用任何数字）

我需要将这些数据转换为`int`它们自己的数组，以便以后可以对每个元素进行计算。我需要能够调用将执行这些计算的方法（我将编写）。

这是我遇到的问题。

1.  我无法`intArray`退出 while 循环，因为它是在 while 循环中声明的，这就是它的范围。但是，如果我尝试声明`intArray`退出 while 循环，它会给我错误“使用未分配的局部变量” `intArray`。当我在 while 循环中声明它并尝试在`intArray`while 循环之外使用时，它给了我错误`the name intArray does not exist in the current context`。所以我的主要问题是我需要能够访问`intArray`，以便我可以将它用作我的方法的参数来对其执行计算。

2.  我的第二个问题`intArray`基本上是保存所有 4 行数据。如果我打印`intArray[0]`，它会打印出所有列出的第一个数字，（*使用上面的示例文本*）它会打印：

    2 4 33

如果我打印 intArray[3]，它会打印出文本数据中的所有第 4 个整数，如下所示：

```
7
8
65 
```

我假设我需要做的是再制作两个数组，一个保存文本的第一个元素，另一个保存文本的第四个元素，因为这些需要以不同的方式处理。

我试图制作数组来存储这些数据，但无论我尝试什么，它都不起作用。而不是`zeroArray[0] = 2`，当我打印它时，它给了我整个列表：

```
2
4
33 
```

如果我再打印`zeroArray[1]`，期待`4`它再次打印出整个列表

```
2
4
33 
```

不幸的是，我只能使用循环和一维数组。我不能使用列表、OOP 或二维数组。因此，如果我可以使用列表/二维数组，编码效率就不会那么高。

我目前将值存储到 int 数组`intArray`中，因为我不确定如何创建一个能够将不同值存储到两个不同数组中的 for 循环。我实在想不出办法。我尝试过的任何方法都失败了。

我可以使用两个数组而不是列表吗？`intArray`确实保存了转换后的整数值（4个不同的部分，我只需要其中的2个进行计算）。无论如何要创建两个包含`intArray[0]`和`intArray[3]`值的数组，以便我可以继续对它们进行计算？另外我怎样才能做到这一点，以便我可以在循环外使用这两个数组？如果我在循环外创建一个数组，它不会让我在循环内使用它，如果我在循环内创建一个数组，它不会让我在循环外使用它。

任何帮助将不胜感激

附加的代码是当前正在运行的代码。由于我无法弄清楚如何正确存储这两个数组，因此它们尚未包含在我的代码中

```
static void Main(string[] args)
{

    //declarations
    string inputString = "";
    string[] results;
    int holder = 0;

    //import file for reading
    FileStream inFile = new FileStream("input.txt", FileMode.Open, FileAccess.Read);
    StreamReader myStream = new StreamReader(inFile);

    //reads first line
    inputString = myStream.ReadLine();

    while (inputString != null)
    {
        //split the line
        results = inputString.Split(',');
        int[] intArray = new int[results.Length];

        //do whatever processing you need to do to store it

        for (int index = 0; index < results.Length; index++)
        {
            if (int.TryParse(results[index], out holder))
            {
                intArray[index] = holder;
            }//end if
        }//end for

    //reads next line
    inputString = myStream.ReadLine();

    }//end while

    //This is a test to see if the ints are correctly stored
    Console.WriteLine(intArray[0]);  //<--error here stating that 'The name intArray' does not exist in the current context'

}//end main 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:01:57.927

最简单的方法是使用 List 而不是数组，因为您不知道文件有多少行，如果需要，您可以使用列表的`ToArray()`方法轻松地从列表中获取数组。**编辑：由于您在评论中声明您需要数组，因此针对该用途调整了代码。**如果每行有四个数字，则此代码可能对您有用。我警告你，我从不检查连续数字是否少于四个：

```
static void Main(string[] args) {
        {

            //declarations
        string inputString = "";
        string[] results;
        int holder = 0;
        int []zeroArray = new int[100];
        int []thirdArray = new int[100];

        //import file for reading
        FileStream inFile = new FileStream("input.txt", FileMode.Open, FileAccess.Read);
        StreamReader myStream = new StreamReader(inFile);

        //reads first line
        inputString = myStream.ReadLine();
        int count = 0;
        while (inputString != null)
        {
            //split the line
            results = inputString.Split(new char [] {','},StringSplitOptions.RemoveEmptyEntries);
            if (int.TryParse(results[0].Trim(), out holder))
            {
                zeroArray[count] = holder;
            }
            if (int.TryParse(results[3].Trim(), out holder))
            {
                thirdArray[count] = holder;
            }
            count++;
            if(count == zeroArray.Length)
            {
                int capacity = zeroArray.Length;
                int []oldArray = zeroArray;
                zeroArray = new int[2*capacity];
                oldArray.CopyTo(zeroArray,0);
                oldArray = thirdArray;
                thirdArray = new int[2*capacity];
                oldArray.CopyTo(thirdArray,0);
            }
            //reads next line
            inputString = myStream.ReadLine();
        }//end while

     }//end main 
```

请注意，您必须定期检查您的阵列的容量是否超出，如果超出，您应该创建具有两倍于先前容量的新实例并将旧实例复制到新实例。此外，当你完成时，`count`将保存每个数组中的数字数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:59:52.270

这是我尝试并完美地工作的方法。希望对您有所帮助。快乐分享知识

```
 using (StreamReader sr = new StreamReader(@"C:\Users\Administrator\Documents\test.txt"))
    {
        int[] ZeroArray = null;
        int[] ThirdArray = null;

        int[] ZeroArrayTemp = null;
        int[] ThirdArrayTemp = null;

        int[] tempZero = null;
        int[] tempThird = null;

        int i = 0;

        do
        {
            i++;
            string line = sr.ReadLine();
            string[] values = line.Split(',');

            //get value for ZeroArray
            int valueZero = int.Parse(values[0]);

            //get value for ThirdArray
            int valueThird = int.Parse(values[2]);

            ZeroArrayTemp = new int[i + 1];
            ThirdArrayTemp = new int[i + 1];

            if (tempZero != null)
            {
                for (int j = 0; j < tempZero.Length - 1; j++)
                {
                    ZeroArrayTemp[j] = tempZero[j];
                }
            }

            if (tempThird != null)
            {
                for (int j = 0; j < tempThird.Length - 1; j++)
                {
                    ThirdArrayTemp[j] = tempThird[j];
                }
            }

            ZeroArrayTemp.SetValue(valueZero, i - 1);
            ThirdArrayTemp.SetValue(valueThird, i - 1);

            tempZero = ZeroArrayTemp;
            tempThird = ThirdArrayTemp;

        }while(sr.Peek() != -1);

        //Copy valid value to final array
        ZeroArray = new int[ZeroArrayTemp.Length - 1];
        Array.Copy(ZeroArrayTemp, ZeroArray, ZeroArrayTemp.Length - 1);

        ThirdArray = new int[ThirdArrayTemp.Length - 1];
        Array.Copy(ThirdArrayTemp, ThirdArray, ThirdArrayTemp.Length - 1);

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:17:42.390

运行一次文件并计算行数。然后你可以声明你的数组并通过第二次运行来读取数据。

```
static void Main(string[] args)
{

    //declarations
    string inputString = "";
    string[] results;
    int holder = 0;
    int lines = 0;

    //import file for reading
    FileStream inFile = new FileStream("input.txt", FileMode.Open, FileAccess.Read);
    StreamReader myStream = new StreamReader(inFile);

    //reads first line
    inputString = myStream.ReadLine();

    while(inputString != null){
        lines++;
    }

    int[] zeroArray = new int[lines], thirdArray = new int[lines];

    FileStream inFile = new FileStream("input.txt", FileMode.Open, FileAccess.Read);
    StreamReader myStream = new StreamReader(inFile);

    //reads first line
    inputString = myStream.ReadLine();

    for(int line = 0 ; line < ilnes; line++)
    {
        //split the line
        results = inputString.Split(',');
        zeroArray[line] = int.Parse(results[0]);
        thirdArray[line] = int.Parse(results[3]);

        inputString = myStream.ReadLine();
    }//end for

    //zeroArray and thirdArray should have your info now

}//end main 
```

我能想到的避免两次读取文件的唯一其他选择是手动调整大小`zeroArray`并`thirdArray`根据需要进行调整，因为您不知道开始时要使它们多大。这就是`List<int>`内部工作的方式。

```
//need to resize
int[] newArray = new int[oldArray.Length *2];
for(int i=0; i<oldArray.Length; i++){
    newArray[i] = oldArray[i];
}
oldArray = newArray; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:34:31.053

你是linqed吗？会很容易

```
 var splitted = System.IO.File.ReadAllLines("input.txt")
       .Select(i => i.Split(',')).ToArray();
 var zeroArray = splitted.Select(s => s[0]).ToArray();
 var thirdArray = splitted.Select(s => s[3]).ToArray(); 
```

# javascript - How to sort 's based on class with javascript?

> ID：13187238
> 
> 赞同：5
> 
> 时间：2012-11-01T23:48:07.677
> 
> 标签：javascript

I have a TODO list app with an Unordered list. Within it I have a few list items. The li classes are high,medium,low. I would like li's with the class high to be placed before li's with the class medium and last ones with low.

```
<ul id="tasks">
  <li id="item3" class="priority low"><span></span><a href="#" class="closex" onclick="removeItem('item3')"></a><span>This is a low priority task</span></li>
  <li id="item4" class="priority high"><></span><a href="#" class="closex" onclick="removeItem('item4')"></a><span>This is a high priority task</span></li>
  <li id="item5" class="priority low"><span></span><a href="#" class="closex" onclick="removeItem('item5')"></a><span>This is another Low</span></li>
  <li id="item7" class="priority medium"><span></span><a href="#" class="closex" onclick="removeItem('item7')"></a><span>And now a Medium</span></li>
</ul> 
```

So the li with id of item4 should be first and then it should be item7 and then the li's with class low after.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:03:21.470

这是@ŠimeVidas jQuery 解决方案的纯 JS 版本。

```
var tasks = document.querySelector('#tasks'),
    items = document.querySelectorAll('#tasks > li');

for (var i = 0, arr = ['high', 'medium', 'low']; i < arr.length; i++) {
    for (var j = 0; j < items.length; j++) {
        if (~(" " + items[j].className + " ").indexOf(" " + arr[i] + " "))
            tasks.appendChild(items[j]);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:47:58.670

这是另一个没有 jQuery 的选项：

```
// Just a helper
function toArray(obj) {
  var result = [];
  for (var i=0, iLen=obj.length; i<iLen; i++) {
    result[i] = obj[i];
  }
  return result;
}

// Uses querySelectorAll, but could use getElementsByTagName instead
function sortByPriority(id) {
  var nodes;
  var el = document.getElementById(id);

  if (el) { 
    nodes = toArray(el.querySelectorAll('li.priority'));
    nodes.sort(function(a, b) {
      function getIndex(el) {
        return el.className.indexOf('low') != -1? 1 : 
               el.className.indexOf('medium') != -1? 2 :
               el.className.indexOf('high') != -1? 3 :
               0; // default
      }
      return getIndex(b) - getIndex(a);
    });

    for (var i=0, iLen=nodes.length; i<iLen; i++) {
      el.appendChild(nodes[i]);
    }
  }
} 
```

它比基于 jQuery（或任何库）的解决方案多使用了几行，但您也不必加载数千行库。

此外，它在 Firefox 和 IE 9 中的运行速度比 jQuery 解决方案快 5 倍，在 Chrome 中快 10 倍（参见[http://jsperf.com/sortelementlist](http://jsperf.com/sortelementlist)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:57:34.290

假设您可以使用 jQuery，并且假设您的列表不是很大，并且假设您只有这三种固定类型而没有计划更改它，我可能只是将整个集合转储到内存中，清除列表，然后将它们按顺序放回列表中。就像是：

```
jQuery(document).ready(function() {
    var i;
    var items = jQuery("#tasks li");
    var lowItems = [];
    var medItems = [];
    var highItems = [];
    for (i = 0; i < items.length; ++i) {
        var jqItem = jQuery(items[i]);
        if (jqItem.hasClass("low")) lowItems.push(jqItem);
        if (jqItem.hasClass("medium")) medItems.push(jqItem);
        if (jqItem.hasClass("high")) highItems.push(jqItem);
    }
    var tasks = jQuery("#tasks");
    tasks.html("");
    for (i = 0; i < highItems.length; ++i) {
        tasks.append(highItems[i]);
    }   
    for (i = 0; i < medItems.length; ++i) {
        tasks.append(medItems[i]);
    }   
    for (i = 0; i < lowItems.length; ++i) {
        tasks.append(lowItems[i]);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:06:12.860

没有jQuery：

```
<ul id="tasks">
 <li id="item3" class="priority low"><span></span><a href="#" class="closex" onclick="removeItem('item3')"></a><span>This is a low priority task</span></li>
 <li id="item4" class="priority high"><></span><a href="#" class="closex" onclick="removeItem('item4')"></a><span>This is a high priority task</span></li>
 <li id="item5" class="priority low"><span></span><a href="#" class="closex" onclick="removeItem('item5')"></a><span>This is another Low</span></li>
 <li id="item7" class="priority medium"><span></span><a href="#" class="closex" onclick="removeItem('item7')"></a><span>And now a Medium</span></li>
</ul>

<script type="text/javascript">
var tasks = document.getElementById("tasks");
var liElements = tasks.getElementsByTagName("li");
var lowPriority = [];
var mediumPriority = [];
var highPriority = [];
var removal = [];
for (var i = 0, len = liElements.length; i < len; i++) {
    if (liElements[i].getAttribute("class").indexOf("low") > -1) lowPriority.push(liElements[i].cloneNode(true));
    if (liElements[i].getAttribute("class").indexOf("medium") > -1) mediumPriority.push(liElements[i].cloneNode(true));
    if (liElements[i].getAttribute("class").indexOf("high") > -1) highPriority.push(liElements[i].cloneNode(true));
    removal.push(liElements[i]);
}

for (var i = 0, len = removal.length; i < len; i++ ) {
    var liItem = removal[i];
    liItem.parentNode.removeChild(liItem);
}

for( var i = 0, len = lowPriority.length; i < len; i++){
    tasks.appendChild(lowPriority[i]);
}
for (var i = 0, len = mediumPriority.length; i < len; i++) {
    tasks.appendChild(mediumPriority[i]);
}
for (var i = 0, len = highPriority.length; i < len; i++) {
    tasks.appendChild(highPriority[i]);
}
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T00:02:21.757

尝试这个：

```
$(function(){
    var sorter = [],
        tasks = $('#tasks');
    $('li.priority').each(function(){
        var $this = $(this),
            priority = $this.hasClass('high') ? 3 : ($this.hasClass('medium') ? 2 : 1);
        sorter.push({
            el : this,
            priority : priority
        });
    }).detach();

    sorter.sort(function(a, b){
        return a.priority - b.priority;
    });

    $.each(sorter, function(){
        tasks.append(this.el);
    });
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T01:07:30.703

使用纯 JavaScript 和简单的代码！

```
var tasks = document.getElementById("tasks");
var lis = tasks.getElementsByTagName("li");
var lisarr = Array.prototype.slice.call(lis);

var priority = function(e){
    var prio = {low: 0, medium: 1, high: 2};
    return prio[e.getAttribute("class").match(/low|high|medium/)[0]];
};

lisarr.sort(function(a,b){
    var ap = priority(a), bp = priority(b);
    return bp - ap;
});

tasks.innerHTML = lisarr.reduce(function(prev, current){
    return prev + current.outerHTML;
}, ''); 
```

# perl - Summing a column of numbers in a text file using Perl

> ID：13187239
> 
> 赞同：16
> 
> 时间：2012-11-01T23:48:19.760
> 
> 标签：perl

Ok, so I'm very new to Perl. I have a text file and in the file there are 4 columns of data(date, time, size of files, files). I need to create a small script that can open the file and get the average size of the files. I've read so much online, but I still can't figure out how to do it. This is what I have so far, but I'm not sure if I'm even close to doing this correctly.

```
#!/usr/bin/perl

open FILE, "files.txt";
#@array = File;

while(FILE){
    #chomp;

    ($date, $time, $numbers, $type) = split(/ /,<FILE>);

    $total += $numbers;

}
print"the total is $total\n"; 
```

This is how the data looks in the file. These are just a few of them. I need to get the numbers in the third column.

```
12/02/2002  12:16 AM              86016 a2p.exe
10/10/2004  11:33 AM               393 avgfsznew.pl
11/01/2003  04:42 PM             38124 c2ph.bat 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T00:29:35.027

您的程序相当接近工作。通过这些更改，它将完全按照您的意愿行事

*   *始终*在程序开始时使用`use strict`和`use warnings`，并使用 . 声明所有变量`my`。这将帮助您找到许多您可能会忽略的简单错误

*   使用词法文件句柄，即 的三参数形式`open`，并*始终*检查任何`open`调用的返回状态

*   `$total`在循环外声明变量。在循环内声明它意味着它将在每次循环周围被创建和销毁，并且无法累积总数

*   以同样的方式声明一个`$count`变量。您将需要它来计算平均值

*   仅使用`while (FILE) {...}`测试`FILE`是正确的。您需要从中读取，因此您必须使用`readline`类似的运算符`<FILE>`

*   您希望*默认*调用`split`（不带任何参数），它将所有非空格字段`$_`作为列表返回

*   您需要在分配中添加一个变量以允许每行中的 athe `AM`or`PM`字段

这是对您的代码的修改，效果很好

```
use strict;
use warnings;

open my $fh, '<', "files.txt" or die $!;

my $total = 0;
my $count = 0;

while (<$fh>) {

    my ($date, $time, $ampm, $numbers, $type) = split;

    $total += $numbers;
    $count += 1;

}

print "The total is $total\n";
print "The count is $count\n";
print "The average is ", $total / $count, "\n"; 
```

**输出**

```
The total is 124533
The count is 3
The average is 41511 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-01T23:57:47.087

`awk`使用 Perl 的类似自动拆分选项很诱人。有5列；三包含日期和时间信息，然后是大小，然后是名称。

我写的脚本的第一个版本也是最冗长的：

```
perl -n -a -e '$total += $F[3]; $num++; END { printf "%12.2f\n", $total / ($num + 0.0); }' 
```

( `-a`auto-split) 选项将空白处的一行拆分为数组`@F`。结合`-n`选项（使 Perl 在循环中运行，依次读取文件名参数或标准输入，而不打印每一行），代码将`$F[3]`（第四列，从 0 开始计数）添加到`$total`，自动初始化为首次使用为零。它还计算`$num`. 当读取所有输入时执行该`END`块；它用于`printf()`格式化值。`+ 0.0`确保算术是在浮点数中完成的，而不是整数算术。`awk`这与脚本非常相似：

```
awk '{ total += $4 } END { print total / NR }' 
```

程序的初稿很少是最佳的——或者，至少，我不是一个好的程序员。修订有帮助。

Perl 在某种程度上被设计为`awk`杀手。仍然有一个`a2p`随 Perl 分发的程序，用于将`awk`脚本转换为 Perl（也有`s2p`用于将`sed`脚本转换为 Perl）。Perl 确实有一个自动（内置）变量来跟踪读取的行数。它有几个名字。最有趣的是`$.`；如果您在脚本中，助记符名称`$NR`可用；[`use English;`](http://perldoc.perl.org/perlvar.html#Variables-related-to-filehandles)也是`$INPUT_LINE_NUMBER`。所以，使用`$num`是没有必要的。事实证明，Perl 无论如何都会进行浮点除法，所以这`+ 0.0`部分是不必要的。这导致了下一个版本：

```
perl -MEnglish -n -a -e '$total += $F[3]; END { printf "%12.2f\n", $total / $NR; }' 
```

或者：

```
perl -n -a -e '$total += $F[3]; END { printf "%12.2f\n", $total / $.; }' 
```

您可以调整打印格式以适应您的奇思妙想。这基本上是我长期使用的脚本；这是相当清楚的，没有以任何方式冗长。如果需要，脚本可以分成多行。这是一个足够简单的任务，单行的易读性不是问题，IMNSHO。这样做的美妙之处在于，您不必自己处理`split`数组和读取循环；Perl 为您完成了大部分工作。（当然，它确实在空输入时爆炸；该修复是微不足道的；见下文。）

### 推荐版本

```
perl -n -a -e '$total += $F[3]; END { printf "%12.2f\n", $total / $. if $.; }' 
```

测试读取的`if $.`行数是否为零；如果为零，则省略和除法，因此在没有输入时脚本不输出任何内容`printf`。`$.`

* * *

在 Stack Overflow 的早期，有一种名为“Code Golf”的高贵（或卑鄙）游戏，但 Code Golf 问题不再被认为是好问题。Code Golf 的目标是编写一个以尽可能少的字符完成特定任务的程序。如果您不太担心输出的格式并且您至少使用 Perl 5.10，您可以使用它来玩 Code Golf 并进一步压缩它：

```
perl -Mv5.10 -n -a -e '$total += $F[3]; END { say $total / $. if $.; }' 
```

而且，很明显，里面有很多不必要的空格和字母：

```
perl -Mv5.10 -nae '$t+=$F[3];END{say$t/$.if$.}' 
```

然而，这并不像推荐的版本那样清晰。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T23:56:58.000

```
#!/usr/bin/perl

use warnings;
use strict;

open my $file, "<", "files.txt";
my ($total, $cnt);
while(<$file>){
        $total += (split(/\s+/, $_))[3];
        $cnt++;
}
close $file;
print  "number of files: $cnt\n";
print  "total size: $total\n";
printf "avg: %.2f\n", $total/$cnt; 
```

或者您可以使用`awk`：

```
awk '{t+=$4} END{print t/NR}' files.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-01T23:57:35.833

尝试这样做：

```
#!/usr/bin/perl -l

use strict; use warnings;

open my $file, '<', "my_file" or die "open error [$!]";

my ($total, $count);

while (<$file>){
    chomp;
    next if /^$/;
    my ($date, $time, $x, $numbers, $type) = split;
    $total += $numbers;
    $count++;
}

print "the average is " . $total/$count . " and the total is $total";

close $file; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T00:00:24.650

此解决方案打开文件并循环遍历文件的每一行。然后，它通过拆分 1 个或多个空格将文件拆分为行中的五个变量。

*   打开文件进行读取，`"<"`如果失败，则引发错误`or die "..."`
*   `my ($total, $cnt)`是我们的列总数和添加的文件数
*   `while(<FILE>) { ... }`使用文件句柄循环遍历文件的每一行并将该行存储在`$_`
*   `chomp`删除 . 中的输入记录分隔符`$_`。在 unix 中，默认分隔符是换行符`\n`
*   `split(/\s+/, $_)``$_`用分隔符分割由 , 表示的当前行`\s+`。`\s`代表一个空格，`+`后面的意思是“1个或多个”。因此，我们将下一行拆分为 1 个或多个空格。
*   接下来我们更新`$total`和`$cnt`

    ```
    #!/usr/bin/perl

    open FILE, "<", "files.txt" or die "Error opening file: $!";
    my ($total, $cnt);

    while(<FILE>){
      chomp;
      my ($date, $time, $am_pm, $numbers, $type) = split(/\s+/, $_); 
      $total += $numbers;
      $cnt++; 
    }
    close FILE;

    print"the total is $total and count of $cnt\n";` 
    ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T06:05:22.047

就这么简单：

```
perl -F -lane '$a+=$F[3];END{print "The average size is ".$a/$.}' your_file 
```

测试如下：

```
> cat temp
12/02/2002  12:16 AM              86016 a2p.exe
10/10/2004  11:33 AM               393 avgfsznew.pl
11/01/2003  04:42 PM             38124 c2ph.bat 
```

现在执行：

```
> perl -F -lane '$a+=$F[3];END{print "The average size is ".$a/$.}' temp
The average size is 41511
> 
```

**解释：** -F -a 表示以数组格式存储行。默认分隔符为空格或制表符。所以 nopw $F[3] 有你文件的大小。总结第 4 列中的所有大小，直到处理完所有行。END 将在处理完文件中的所有行后执行。

所以$。最后将给出行数。所以$a/$。将给出平均值。

# python - Bundle tweepy with GitHub project

> ID：13187241
> 
> 赞同：1
> 
> 时间：2012-11-01T23:48:24.650
> 
> 标签：python, external, libraries

I have a Python project stored in GitHub that is going to use tweepy, a Twitter Python library stored in GitHub too. In the INSTALL file says that I can use git to bundle it in my project but I have no idea on how to do this. I thought to use git submodule but this will fetch all the project, not only the sources that is what I need. How could I do it? Is there a best way to work with external libraries in a project?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:21:59.890

您不能仅使用 git-submodule 获得子目录（请参阅[此问题](https://stackoverflow.com/questions/5303496/how-to-change-a-git-submodule-to-point-to-a-subfolder)）。

捆绑也是不好的做法（在库错误的情况下更新库代码变得更加困难，并导致无用的重复）。`tweepy`在[PyPI 上](http://pypi.python.org/pypi/tweepy/)，所以最好的方法不是捆绑它，而是在你的中要求它`setup.py`或在你的中列出它`requirements.txt`（取决于你是为 PyPI 打包它还是只是构建需要有一种简单的方法来安装你的项目依赖项）。这样做时，您可以指定允许的库版本，这样 tweepy 就不会在您的脚下改变。

如果您打算对 进行更改`tweepy`，礼貌的做法是将这些更改提交给项目，而不是在您的项目中进行更改（或者如果`tweepy`不接受更改，则可能在 GitHub 上维护自己的分支）。请注意，`pip`如果您需要 PyPI 中不可用的版本，则可以安装包的 git 版本。

# php - 在具有透明背景的单色PNG图像上更改/覆盖颜色？

> ID：13187244
> 
> 赞同：0
> 
> 时间：2012-11-01T23:48:44.037
> 
> 标签：php, python, image, image-processing, canvas

我想要做的是只需输入所需的颜色代码而不会丢失透明背景，就可以将纯单色 png 动态更改为另一种颜色。我见过的实现往往有点草率，所以我想知道是否有人可以就如何实现它给我建议。

我对 PHP 解决方案最满意，但 Python 也可以，我什至会采用一个好的画布解决方案。非常感谢任何有关此的建议/示例，谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:42:51.730

这是一个简单的画布实现：

```
colorize = function(image, r, g, b) {

    var newImg = $('<canvas>')[0];
    newImg.width = image.width;
    newImg.height = image.height;
    var newCtx = newImg.getContext('2d');
    newCtx.drawImage(image, 0, 0);

    var imageData = newCtx.getImageData(0, 0, image.width, image.height);
    data = imageData.data;
    for (var i = 0; i < data.length; i += 4) {
        data[i+0] = r;
        data[i+1] = g;
        data[i+2] = b;
    }
    newCtx.putImageData(imageData, 0, 0);

    return newImg;
}; 
```

JSFiddle：http: [//jsfiddle.net/bK7P9/6/](http://jsfiddle.net/bK7P9/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:55:33.083

您可以在 Python 中使用[PIL](http://www.pythonware.com/products/pil/)和[numpy来执行此操作。](http://numpy.scipy.org/)假设我们有一个方法`NewSolidImage`（我们将在下面定义），我们可以将图像转换为像素数组，使用该方法转换像素然后保存到新文件：

```
import numpy
from PIL import Image

def CreateNewImage(current_filename, new_filename, new_color):
  image = Image.open(current_filename)
  image_values = numpy.array(image)

  new_image_values = NewSolidImage(image_values, new_color)
  new_image = Image.fromarray(new_image_values)

  new_image.save(new_filename) 
```

现在来定义这个方法。我们只需要一个数组，确保它是我们期望的形状，然后在不是 100% 透明的像素上，我们将红色、绿色、蓝色值设置为传入的实体值。

```
def NewSolidImage(rgba_array, new_color):
  new_r, new_g, new_b = new_color

  rows, cols, rgba_size = rgba_array.shape
  if rgba_size != 4:
    raise ValueError('Bad size')

  for row in range(rows):
    for col in range(cols):
      pixel = rgba_array[row][col]
      transparency = pixel[3]
      if transparency != 0:
        new_pixel = pixel.copy()
        new_pixel[0] = new_r
        new_pixel[1] = new_g
        new_pixel[2] = new_b

        rgba_array[row][col] = new_pixel

  return rgba_array 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T03:21:26.077

通常我喜欢在 RGB 颜色空间中工作，但这是 HLS 工作得很好的情况。Python 中的转换很简单，只需替换 H 和 S 并保持 L 不变。

```
import colorsys
from PIL import Image

def recolor(im, r, g, b):
    h, l, s = colorsys.rgb_to_hls(r/255.0, g/255.0, b/255.0)
    result = im.copy()
    pix = result.load()
    for y in range(result.size[1]):
        for x in range(result.size[0]):
            r2, g2, b2, a = pix[x, y]
            h2, l2, s2 = colorsys.rgb_to_hls(r2/255.0, g2/255.0, b2/255.0)
            r3, g3, b3 = colorsys.hls_to_rgb(h, l2, s)
            pix[x, y] = (int(r3*255.99), int(g3*255.99), int(b3*255.99), a)
    return result

recolor(im_flag, 255, 0, 0).save(r'c:\temp\red_flag.png') 
```

![原来的](../Images/b386bec26852164976246a225f008fb5.png) ![结果为 (255,0,0)](../Images/08d1dd2cf7ff3042f8a27d278f7bc395.png)

# c - 从 strchr 获取 int 而不是指针

> ID：13187254
> 
> 赞同：0
> 
> 时间：2012-11-01T23:50:08.873
> 
> 标签：c, string

如何将字符串中第一次出现的字符的索引作为 int 而不是指向其位置的指针？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:51:14.943

如果您有两个指向 C 中数组的指针，您可以简单地执行以下操作：

```
index = later_pointer - base_address; 
```

`base_address`数组本身在哪里。

例如：

```
#include <stdio.h>
int main (void) {
    int xyzzy[] = {3,1,4,1,5,9};       // Dummy array for testing.

    int *addrOf4 = &(xyzzy[2]);        // Emulate strchr-type operation.

    int index = addrOf4 - xyzzy;       // Figure out and print index.
    printf ("Index is %d\n", index);   //   Or use ptrdiff_t (see footnote a).

    return 0;
} 
```

输出：

```
Index is 2 
```

如您所见，无论基础类型如何，它都能正确缩放以提供索引（这并不重要，`char`但在一般情况下了解它很有用）。

因此，对于您的具体情况，如果您的字符串是并且从is`mystring`的返回值，只需使用来获取索引（假设您当然*找到*了字符，即）。`strchr``chpos``chpos - mystring`*`chpos != NULL`*

 ** * *

^((a))正如评论中正确指出的那样，指针减法的类型`ptrdiff_t`可能与 具有不同的范围`int`。为了完全正确，指数的计算和打印最好如下：

```
 ptrdiff_t index = addrOf4 - xyzzy;       // Figure out and print index.
    printf ("Index is %td\n", index); 
```

请注意，只有当您的数组足够大以至于差异不适合`int`. 这是可能的，因为这两种类型的范围没有直接关系，因此，如果您高度重视可移植代码，您应该使用`ptrdiff_t`变体。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-01T23:52:01.033

使用指针算术：

```
char * pos = strchr( str, c );
int npos = (pos == NULL) ? -1 : (pos - str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-01T23:53:51.697

如果您正在处理 std::string 而不是普通的 c 字符串，那么您可以使用 std::string::find_first_of

[http://www.cplusplus.com/reference/string/string/find_first_of/](http://www.cplusplus.com/reference/string/string/find_first_of/)*

# php - php如何将文本放入框中

> ID：13187258
> 
> 赞同：2
> 
> 时间：2012-11-01T23:50:25.880
> 
> 标签：php, text, fonts, truetype

我有一个矩形框的边界。是否可以在不知道文本大小的情况下将文本（使用自定义字体）放入框中。我的意思是，是否有一个 php 函数可以设置正确的文本大小，以便将文本放入用户定义的框中？我不需要文字换行。

我发现的唯一功能是[imagettfbbox](http://fr.php.net/manual/en/function.imagettfbbox.php)和 [imagettftext](http://fr.php.net/manual/en/function.imagettftext.php)。

imagettfbbox 正好相反（给出边界，提供字体大小），而 imagettftext 用于在图像上写入文本，前提是 fontSize 已知。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-01T23:55:40.050

你在使用 php gd 吗？如果是这样，那么我会使用`imagettfbbox`. 只需定义除大小之外的所有参数。然后在该循​​环之外的大小，直到它足够小以适合您定义的空间。我以前做过。它不会在内存中执行任何实际的图像创意，因此它非常快（比实际创建图像要快得多）。

```
for($size=40;$size>5;$size--){
  $sizearray=imagettfbbox ( $size , 0- , 'font.ttf' , $message );
    $width=$sizearray[0] + $sizearray[4];
    if($width<$threshold/*you define*/){
      //you've got your $size
      break;
    }
} 
```

# javascript - 我的 if 语句不起作用

> ID：13187263
> 
> 赞同：0
> 
> 时间：2012-11-01T23:51:18.733
> 
> 标签：javascript, arrays, html

如果内容不同，此 JavaScript 代码用于更改 div 的背景：

```
function myfunction() {
    $a = document.getElementById('t').getElementsByTagName('div');
    var x = 0;
    while(x < $a.length) {
        var b = ($a[x].innerHTML);
        b.toString;
        alert(x + b[x]);
        if(b == 'PENDING SELECTING TEAM MEMBER' ||b == 'PENDING APPROVAL BY SCHEME MANAGER' ||b == 'PENDING SELECTING TEAM MEMBER' ||b == 'PENDING REVIEW TEAM MEMBER BY LEAD ASSESSOR' ||b == 'PENDING ACKNOWLEDGEMENT BY TA/LA' ||b == 'PENDING PREPARE AUDIT PLAN BY LA' ||b == 'PENDING REVIEW AUDIT PLAN BY AO' ||b == 'PENDING ACCEPT LA BY LAB' ||b == 'PENDING VERIFY REASON BY AO' ||b == 'PENDING CONDUCT ASSESSMENT' || b == 'PENDING CORRECTIVE ACTION BY CAB' || b == 'PENDING REVIEW BY AO' || b == 'PENDING CORRECTIVE ACTION APPROVAL BY SCHEME MANAGER' ||b == 'PENDING APPROVAL BY DOA' ){
            document.getElementById('status'+x).style.background="maroon";
            alert(x + b);
        }
        x++;

    }
} 
```

它不起作用，因为`if`语句失败。

有人可以帮我找出问题所在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T23:58:58.037

就像一个注释，`b.toString;`应该是`b.toString();`

而且我个人更喜欢使用双引号，但这只是因为习惯于强输入它们并且在字符和字符串之间存在差异。

***看到其他人这么说，但只是为了强调：函数中没有'var'关键字的变量使它们成为全局变量，这意味着它们是可访问的，并且可以在程序的任何范围内更改。***

尝试使用以下 javascript 代码：[JSFiddle](http://jsfiddle.net/xkFLc/1/)

更改了设置背景颜色的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:23:33.703

考虑使用[`_.contains`](http://underscorejs.org/#contains)from `underscore.js`，这会使`if`复杂度降低一些。相反，它看起来更像：

```
var collection = [
    'PENDING SELECTING TEAM MEMBER', 
    'PENDING APPROVAL BY SCHEME MANAGER', 
    'PENDING SELECTING TEAM MEMBER', 
    'PENDING REVIEW TEAM MEMBER BY LEAD ASSESSOR', 
    'PENDING ACKNOWLEDGEMENT BY TA/LA', 
    'PENDING PREPARE AUDIT PLAN BY LA', 
    'PENDING REVIEW AUDIT PLAN BY AO', 
    'PENDING ACCEPT LA BY LAB', 
    'PENDING VERIFY REASON BY AO', 
    'PENDING CONDUCT ASSESSMENT', 
    'PENDING CORRECTIVE ACTION BY CAB', 
    'PENDING REVIEW BY AO', 
    'PENDING CORRECTIVE ACTION APPROVAL BY SCHEME MANAGER', 
    'PENDING APPROVAL BY DOA'];

if(_.contains(collection, b)) {
    alert("this condition is true!");
    //...
} 
```

如果它发出警报，则它是 if 语句中的问题。如果不是，则不满足条件，我可能会先查看 HTML 中的前导和尾随空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:49:28.380

您可以通过简化 if 语句来“测试”它（这是一种通用调试技术）：

```
var b = 'PENDING SELECTING TEAM MEMBER';

if (b == 'PENDING SELECTING TEAM MEMBER' || b == 'PENDING APPROVAL BY SCHEME MANAGER' || b == 'PENDING SELECTING TEAM MEMBER' || b == 'PENDING REVIEW TEAM MEMBER BY LEAD ASSESSOR' || b == 'PENDING ACKNOWLEDGEMENT BY TA/LA' || b == 'PENDING PREPARE AUDIT PLAN BY LA' || b == 'PENDING REVIEW AUDIT PLAN BY AO' || b == 'PENDING ACCEPT LA BY LAB' || b == 'PENDING VERIFY REASON BY AO' || b == 'PENDING CONDUCT ASSESSMENT' || b == 'PENDING CORRECTIVE ACTION BY CAB' || b == 'PENDING REVIEW BY AO' || b == 'PENDING CORRECTIVE ACTION APPROVAL BY SCHEME MANAGER' || b == 'PENDING APPROVAL BY DOA')
{
    alert("Working");
} 
```

# ruby-on-rails - 在主干模型中发送的参数不同

> ID：13187265
> 
> 赞同：0
> 
> 时间：2012-11-01T23:51:49.140
> 
> 标签：ruby-on-rails, backbone.js

在一个简单的主干应用程序中，我有这个模型：

```
class Rcbvm2.Models.Item extends Backbone.Model
  initialize: (modelName) ->
    @modelName = modelName
    @paramRoot = @modelName
    @urlRoot = "http://localhost:3000/#{@modelName}" 
```

当我尝试这个时：

```
item = new Rcbvm2.Models.Item('pages')
item.set('body', 'test')
item.id = 2
item.save() 
```

因此，有一个请求发送到我的 rails 应用程序：

```
Started PUT "/pages/2" for 127.0.0.1 at 2012-11-01 19:39:40 -0400
Processing by PagesController#update as JSON
  Parameters: {"pages"=>{"silent"=>true}, "body"=>"test", "id"=>"2", "page"=>{"body"=>"test"}} 
```

好的，它有效。我的问题是当我这样做时：

```
item = new Rcbvm2.Models.Item('news') //change the model's name
item.set('body', 'test')
item.id = 2
item.save() 
```

我有这个 ：

```
Started PUT "/news/2" for 127.0.0.1 at 2012-11-01 19:40:04 -0400
Processing by NewsController#update as JSON
  Parameters: {"news"=>{"silent"=>true}, "body"=>"test1", "id"=>"2"} 
```

如您所见，哈希“new”中有“body”。

**编辑 1**

有了页面，我有了这个`"page"=>{"body"=>"test"}`，有了新闻，什么都没有……

**结束编辑 1**

我还尝试了“用户”模型，这是我的 rails 应用程序中不存在的模型，它的想法与新闻相同。

我不明白。你有想法吗？

**编辑 2**

这是我的路线：

```
resources :pages
resources :news 
```

两者都是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:06:43.513

我认为一切都是正确的，问题是您必须在新闻控制器中返回正确的 JSON。查看您的 Pages Controller，并将其与您的 News Controller 进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:36:13.150

I found the solution. First, "new" seems to be a reserved word. Secondly, I must to add the right attr_accessible in my models.

Thanks!

# android - Set color of touched Pixel to FrameLayout

> ID：13187272
> 
> 赞同：0
> 
> 时间：2012-11-01T23:52:17.173
> 
> 标签：android, bitmap, background-color

Im trying to get the color of the touched pixel and set this color as a backgroundcolor to a FrameLayout, but it doesnt work. why?

Here is my code:

```
 @Override
        public boolean onTouch(View v, MotionEvent event) {

            float xPos = event.getX();
            float yPos = event.getY();

            ImageView iview = (ImageView)v;
            Bitmap bitmap = ((BitmapDrawable)iview.getDrawable()).getBitmap();
            int color = bitmap.getPixel(Math.round(xPos), Math.round(yPos));

            myFrameLayout.setBackgroundColor(Integer.parseInt(Integer.toString(color), 16));

            return true;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:33:58.917

错误在于解析颜色。

直接使用 int 颜色应该可以满足您的需要。

```
 int color = bitmap.getPixel(Math.round(xPos), Math.round(yPos));
    myFrameLayout.setBackgroundColor(color); 
```

但是，如果你真的想对其进行解析和重构，请使用 Color.argb(int, int, int, int) 方法来执行此操作，其中 int 参数是 0x00-0xFF 值，用于透明度、红色、绿色、蓝色分量颜色。

```
 int color = bitmap.getPixel(Math.round(xPos), Math.round(yPos));
    myFrameLayout.setBackgroundColor(Color.argb(
         (color & (255 << 24)) >> 24, // take the top 8 bits
         (color & (255 << 16)) >> 16, // take the second 8 bits
         (color & (255 << 8 )) >> 8   // take the third 8 bits
          color & 255)         // take the last 8 bits
    ); 
```

希望这可以帮助。

# php - 每次调用最少的内存使用？

> ID：13187273
> 
> 赞同：2
> 
> 时间：2012-11-01T23:52:19.357
> 
> 标签：php, performance

我刚刚注意到 - 通过使用 php-fastcgi 和 NGINX 对“空”php 文件调用 memory_get_peak_usage()，结果是大约 120KB 的内存

```
<?php

    print_r(memory_get_peak_usage());

?> 
```

PHP 真的每次调用都需要“大量”内存，还是只发生在第一次调用（初始化我猜的东西），然后每次连续调用都需要更少的内存？

我在问，因为我有点惊讶一个空文件已经用完 140KB - 猜测几个类、函数和数组会很快推动这个数字。

是的，我知道这可能算作过早的优化，但我真的很想知道这 120KB 的来源，以及是否有办法降低每次调用的成本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:00:05.557

php.net 文档页面上的第一条评论指出：

> 例如，如果您注意到脚本的峰值内存使用量为 7MB，请不要立即担心或通过进行表面计算来计算给定页面将为 1000 名访问者消耗多少内存来加剧担心。记住这个非常重要的事实：脚本内存消耗的峰值是微秒级的。在我们的示例中，特定脚本需要专用 7000MB 内存的唯一方法是，如果所有 1000 名访问者都在同一微秒内访问了该页面。

[http://php.net/manual/en/function.memory-get-peak-usage.php](http://php.net/manual/en/function.memory-get-peak-usage.php)

每个连接的默认分配在 8-16mb 之间，所以你仍然远低于此。

对于它的价值，在我的服务器上做同样的事情会产生 650kb，所以你已经比我做得更好了；）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:00:12.623

与每次调用需要 5 到 15 MB 的真实应用程序相比，这算不了什么。我不确定 120KB 来自哪里，但我想来自加载的扩展、回溯、日志......

您是否有 APC 或任何其他加速器处于活动状态？

# c - SysV Semaphore Removal

> ID：13187274
> 
> 赞同：3
> 
> 时间：2012-11-01T23:52:27.627
> 
> 标签：c, semaphore

Is it possible to determine if a process is the only one currently utilizing a SysV semaphore and then somehow "lock" the semaphore so that the process may safely remove it before another process requests access again?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:42:13.523

```
int a;

  if((a = semget(IPC_PRIVATE,1,0777|IPC_CREAT))==-1) {              // get semaphore a
           perror("\nFailed to create semaphore.");
           exit(0);
   }

   if((semctl(a,0,IPC_RMID,0))==-1) {                                // Return semaphore a 
           perror("\nCan't RPC_RMID.");                                             
           exit(0);                                                                                
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T10:09:56.380

我会尽力回答你的问题。如果我不够准确，请随时编辑（或评论）我的答案。

* * *

首先，信号量大致是一个简单的整数值。当一个进程想要通过`semop()`函数使用它时，它有 3 个可能的目标：

*   增加它的价值（意味着它释放或增加信号量的资源）
*   降低它的值（意味着它从信号量中获取或删除一些资源）
*   等待信号量取值 0

信号量本身不包含有关在给定时间可能正在使用它的进程的任何信息。

然后，没有办法建立系统范围的“锁定”机制：

根据`semop()`手册页，所有特权进程（被授予能力`CAP_IPC_OWNER`）都可以在信号量集上运行操作。此外，所有`semctl()`命令都可用于特权进程（包括`IPC_RMID`）。

这意味着您的代码必须为这种特殊情况做好准备，并且必须处理由此产生的错误。例如，可以通过`ipcrm -s <sem_id here>`以特权用户身份运行命令，随时立即删除信号量集。

# iphone - 使用 UITableView 向下移动 44pix

> ID：13187277
> 
> 赞同：1
> 
> 时间：2012-11-01T23:52:52.417
> 
> 标签：iphone, objective-c, uitableview, storyboard

我正在使用 Storyboard 创建所有表格，但我需要将表格向下移动以在每个表格上方插入 UIView。使用 nib 和 Interface builder 或在代码中这是微不足道的，但我似乎无法通过界面构建​​和故事板来做到这一点。好的，然后我尝试编写代码，但也没有运气：

在 viewDidLoad 中：

```
CGRect frame = self.view.frame;
self.view.frame = CGRectMake(frame.origin.x, frame.origin.y + 44.0f, frame.size.width,
                             frame.size.height - 44.0f); 
```

如果我同时检查 self.view.frame 和 self.tableView.frame 它们已经重新调整大小，但是当表格显示时没有任何反应。

我已经四处寻找，但没有找到解决方案，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:58:30.497

添加您`UIView`的表头`tableHeaderView`。

此外，将自定义高度设置为表头 - sectionHeaderHeight：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:01:43.830

用这个：

```
-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section{
    return 50.0;
} 
```

# php - PHP - 通过 HTTP 上传文件

> ID：13187278
> 
> 赞同：0
> 
> 时间：2012-11-01T23:52:57.000
> 
> 标签：php, linux

我知道使用 PHP 脚本我可以通过 FTP 协议将文件上传到另一台服务器。

但是是否可以使用 HTTP 协议将文件上传到另一台服务器？

**我的意思是，我将文件夹权限更改为 linux-“777”，我的 php 脚本可以使用用户名和密码直接在该文件夹中上传文件，例如？**

**这是否可能或仅适用于 FTP 协议？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:54:11.983

HTTP 不能那样工作。为了使用 HTTP 将文件上传到另一台服务器，该服务器上应该有一个脚本，该脚本接受文件并将其放入特定目录。

所以从你这边你需要发送 POST 请求，并且在那一边应该有一个脚本来处理它。

# java - 我在Java的这段代码中做错了什么？

> ID：13187279
> 
> 赞同：0
> 
> 时间：2012-11-01T23:53:11.090
> 
> 标签：java

我的这部分作业一直有问题。问题要求将平均值写入另一个文件，但是当我在另一个文件中看到结果时，平均值显示一个问号，平均值答案应该是。我唯一的问题是while循环内的代码，其他一切似乎都在工作。谁能告诉我我做错了什么？

```
File file = new File (filename);
Scanner inputFile = new Scanner (filename);

filename = inputFile.nextLine();

while(inputFile.hasNext())
{
   double number = inputFile.nextDouble();
   sum =  number + sum;
   count++;
   line = inputFile.nextDouble();
}
inputFile.close();
mean = sum / count; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T23:55:45.270

```
double number = inputFile.nextDouble();
sum =  number + sum;
count++;
line = inputFile.nextDouble(); 
```

您调用 nextDouble 两次，并且只考虑第一次调用，这意味着您正在跳过一个值。这就是为什么您的总和因此均值不正确的原因。

删除最后一行： line = inputFile.nextDouble();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T23:56:03.740

您`nextDouble()`在循环中调用了两次，因此只会读取第二个数字。

# css - jQuery UI 对话框 CSS 定位

> ID：13187282
> 
> 赞同：-1
> 
> 时间：2012-11-01T23:53:42.177
> 
> 标签：css

我试图以与 jQuery-UI 对话框相同的方式定位元素。

当一个对话框打开时，它可以很好地放置在您指定其位置的任何位置（相对于视口）。但是，如果您滚动页面，对话框将与页面内容的其余部分一起移动。

这是如何用 CSS 完成的？

澄清一下 - 我希望定位的元素是隐藏的，我使用 $("#element").show(); 显示它

我希望它相对于视口出现并且表现得就像一个对话框一样（然后在你滚动页面时移动）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:14:18.740

即使您滚动，固定位置也会使对话框保持在浏览器屏幕上的相同位置。CSS：

```
position: fixed; 
```

绝对位置将使对话框与您的内容保持在同一位置，因此当您向上滚动时，它会随着您的内容向上移动。CSS：

```
position: absolute; 
```

这是两者的示例：http: [//jsfiddle.net/sRkbf/](http://jsfiddle.net/sRkbf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:06:11.053

`position:fixed;`在对话框上使用，然后在需要的位置使用和定位`top`。`left`这样，它将随着页面滚动。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T03:45:37.120

阅读 UI 对话框，他们使用 UI position() 插件。我想他们在模态时会随着页面滚动。

通过使用相同的东西，我已经足够接近我想要的东西了。我对对话框和页面本身都有“警报”。对于对话框警报，我使用 position() 将警报放置在对话框的中心和页面警报的视口中心。它们的位置是固定的，但由于它们被精确放置它就可以了。

能够显示与视口相关的元素然后让它随着页面滚动会很好，就像绝对和固定的混合一样，但我找不到任何人这样做过。

# android - 用于内容的 Widget RemoteViewsFactory 中的 Android 权限拒绝

> ID：13187284
> 
> 赞同：14
> 
> 时间：2012-11-01T23:53:47.560
> 
> 标签：android, android-widget, android-contentprovider, android-permissions

我有一个小部件，我试图用它在列表视图中显示来自应用程序本地数据库的信息。

我正在使用 RemoteViewsService.RemoteViewsFactory 接口来加载列表的内容。如果我运行在 onDataSetChanged 方法中重新加载列表的代码块。该应用程序崩溃并显示以下消息：

`11-01 16:40:39.540: E/ACRA(27175): DataDisplay fatal error : Permission Denial: reading com.datadisplay.content.ContentProviderAdapter uri content://com.datadisplay.provider.internalDB/events from pid=573, uid=10029 requires the provider be exported, or grantUriPermission()`

但是，在类的构造函数中运行的相同代码可以正常工作。当然，我需要让这个也可以在 onDataSetChanged 方法中进行更新和填充。

这是我的提供商在清单中的条目：

```
 <provider android:name="com.datadisplay.content.ContentProviderAdapter"
        android:authorities="com.datadisplay.provider.internalDB"
        android:exported="true"
        android:enabled="true"
        android:grantUriPermissions="true">
            <grant-uri-permission android:pathPattern="/events/"/>
    </provider> 
```

我正在导出它并授予 Uri 权限，如错误消息请求，但它仍然失败。我发现了这个问题，这家伙遇到了问题，但最终删除了他的自定义权限并且它起作用了。我没有这样的自定义权限，但仍然没有运气：

[带有内容提供者的小部件；无法使用 ReadPermission？](https://stackoverflow.com/questions/9497270/widget-with-content-provider-impossible-to-use-readpermission)

如果有人有见识，我将不胜感激，这令人难以置信的沮丧，哈哈。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-12-17T22:19:55.637

This is happening because RemoteViewsFactory is being called from a remote process, and that context is being used for permission enforcement. (The remote caller doesn't have permission to use your provider, so it throws a SecurityException.)

To solve this, you can clear the identity of the remote process, so that permission enforcement is checked against your app instead of against the remote caller. Here's a common pattern you'll find across the platform:

```
final long token = Binder.clearCallingIdentity();
try {
    [perform your query, etc]
} finally {
    Binder.restoreCallingIdentity(token);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T14:16:57.417

如果这只发生在 4.2 而不是其余版本，则需要设置 android:exported="true"，因为默认值已更改：http: [//developer.android.com/about/versions/android-4.2.html](http://developer.android.com/about/versions/android-4.2.html)

> 默认情况下不再导出内容提供程序。也就是说，android:exported 属性的默认值现在是“false”。如果其他应用能够访问您的内容提供程序很重要，您现在必须显式设置 android:exported="true"。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-02T14:47:43.837

把它放在你的`onDataSetChanged()`方法中：

```
 Thread thread = new Thread() {
        public void run() {
            query();
        }
    };
    thread.start();
    try {
        thread.join();
    } catch (InterruptedException e) {
    } 
```

`query()`从内部方法的数据库中获取数据。我不知道为什么在单独的线程中获取数据有助于解决这个问题，但它确实有效！我从其中一个 Android 示例中得到了这个。

# ios - 通过 Instruments 命令行在多个 iOS 设备上运行 UIAutomation 脚本

> ID：13187286
> 
> 赞同：5
> 
> 时间：2012-11-01T23:54:05.280
> 
> 标签：ios, xcode, instruments, ios-ui-automation

有没有办法在多个连接的 iOS 设备上运行 UIAutomation 脚本？目前我使用带有 -w 开关的仪器以及每个设备的 UDID？

我很欣赏你的想法。

# kdtree - libkdtree++ (kdtree) 的问题

> ID：13187288
> 
> 赞同：1
> 
> 时间：2012-11-01T23:54:11.387
> 
> 标签：kdtree

我是一名学生，试图在 linux 86*64 上将 kdtree 与 libkdtree++ 一起使用。./configure 顺利，虽然 sudo make install 失败

```
cd . && /bin/sh /home/preetigupta25/kdtree-project/nvmd-libkdtree-7bb7e83/missing --run aclocal-1.10

/home/preetigupta25/kdtree-project/nvmd-libkdtree-7bb7e83/missing: line 54: aclocal-1.10: command not found

WARNING:     `aclocal-1.10' is missing on your system. 

/home/preetigupta25/kdtree-project/nvmd-libkdtree-7bb7e83/missing: line 54: automake-1.10: command not found
WARNING: `automake-1.10' is missing on your system. 

cd . && /bin/sh /home/preetigupta25/kdtree-project/nvmd-libkdtree-7bb7e83/missing --run autoconf
configure.ac:10:  error: possibly undefined macro: AM_INIT_AUTOMAKE

make: *** [configure] Error 1

but when I run it again it gives a different problem

[preetigupta25@dhalsim nvmd-libkdtree-7bb7e83]$ sudo make install
[sudo] password for preetigupta25:
/bin/sh ./config.status --recheck

running CONFIG_SHELL=/bin/sh /bin/sh ./configure --no-create --no-recursion
./configure: line 2082: syntax error near unexpected token `-Wall'
./configure: line 2082: `AM_INIT_AUTOMAKE(-Wall -Werror)'
make: *** [config.status] Error 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T20:18:29.027

很可能你会有一个更新的 automake 版本——我猜是 1.11。

你将不得不改变它`configure`：

```
am__api_version='1.11' 
```

您必须`configure`在第一次调用之前执行此操作。

# c++ - 根据用户输入移动 3x3 数组中的元素（选择上、下、左或右）

> ID：13187289
> 
> 赞同：-2
> 
> 时间：2012-11-01T23:54:10.997
> 
> 标签：c++, arrays

所以基本上我需要帮助来获取一个现有的数组并在该数组中移动一个特定的数字，即 3X3 并将其向上移动，等等，在它移动它周围的值之后需要相应地移动。示例 123 321 123

我想将点 (3, 2) 向左移动 123 213 123

上下元素也一样，程序也会跟上你所处的位置并相应地改变它们

我的程序也需要跟踪坐标，我还没有弄清楚如何实现。

```
#include <iostream>
#include <iomanip>
#include <array>

using namespace std;

void printarray(int num[3][3])
{
    for(int i = 0;i < 3; i++)
    {
        for(int j = 0; j< 3; j++)
        {
            cout << num[i][j] << " ";
        }
        cout << "\n";
    }
}

void swapValues(int (&array)[3][3], int i1,int j1,int i2,int j2)
{
    int temp = array[i1][j1];
    array[i1][j1] = array[i2][j2];
    array[i2][j2] = temp;
}

void moveleft(int (&array)[3][3], int i, int j)
{
    if (i>0 && i<3 && j>=0 && j<3)
    {
        swapValues(array, i, j, i-1, j);
        swapValues(array, i, j, i+1, j);
    }
    else
    {
        cout << "wrong move!" << endl;
    }
    //swapValues(array, i, j, i, j-1);
    //swapValues(array, i, j, i, j+1);
}

void movedown(int (&array)[3][3], int i, int j)
{
    swapValues(array, i+1, j, i, j);
    swapValues(array, i-1, j, i, j);
}

void moveright(int (&array)[3][3], int i, int j)
{
    swapValues(array, i, j+1, i, j);
    swapValues(array, i, j-1, i, j);
}

void moveup(int (&array)[3][3], int i, int j)
{
    //here you MUST check the indexes to make sure you CAN move left
    //int lim = (3*3)-1;
    //for(int x = lim; x >= 1; x--)
    //{

    swapValues(array, i, j, i-1, j);
    swapValues(array, i, j, i+1, j);
    int coord1d = j * 3 + i;
}

class Puzzle
{
public:
    Puzzle();
    void swapValues(int num[3][3], int i1, int j1, int i2, int j2);
    //void moveleft(int[3][3], int start1, int start2);
    void moveup(int (&array)[3][3], int i, int j);
    void moveright(int (&array)[3][3], int i, int j);
    void moveleft(int (&array)[3][3], int i, int j);
    void movedown(int (&array)[3][3], int i, int j);
    void printarray(int[3][3]);
};

int main()
{
    int state1[3][3] = {{2, 8, 3}, {1, 6, 4}, {7, 0, 5}};
    int state2[3][3] = {{2, 8, 1}, {4, 6, 3}, {0, 7, 5}};
    int gstate[3][3] = {{1, 2, 3}, {8, 0, 4}, {7, 6, 5}};
    cout << "this is state 1" << endl;
    printarray(state1);
    cout << "\n\n";
    cout << "now this is state 2" << endl;
    printarray(state2);
    cout << "\n\n";
    cout << "now this is the goal state" << endl;;
    printarray(gstate);
    int start1, start2;
    cout << endl << endl << "please enter your starting point in the states listed above on the x axis(left to right)" << endl;
    cin >> start1;
    cout << "now enter the point on the y axis(up or down)" << endl;
    cin >> start2;
    //moveleft(state1, start1, start2);
    cout << "this is moving coordinate (1, 1) upwards" << endl;
    moveup(state1, start1, start2);
    printarray(state1);
    cout << endl;
    cout << "this is moving coordinate (1, 1) to the left" << endl;
    moveleft(state1, start1, start2);
    printarray(state1);
    cout << endl;
    cout << "this is moving coordinate (1, 1) downwards" << endl;
    movedown(state1, start1, start2);
    printarray(state1);
    cout << endl;
    cout << "this is moving coordinate (1, 1) to the right" << endl;
    moveright(state1, start1, start2);
    printarray(state1);
    cout << endl;

    cin.get();
    cin.get();
    return 0;
} 
```

请给我代码示例，解释很好，但对我来说还不够清楚。不要求你给出答案，只是帮助我看到正确的答案

*   所以我更新了我的代码，它有点工作，唯一的问题是，当我使用除 (1, 1) 之外的任何其他坐标时，我会得到内存地址而不是数组编号。对此的任何解释将不胜感激，我不知道如何解决这样的问题，因为我不确定问题是如何存在的？

此外，该代码是完全可编译的并且可以使用，所以如果我解释得不够好，请运行看看我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:36:18.223

这是一个可能的解决方案

使用此函数交换给定索引处的值

```
void swapValues(int (&array)[3][3], int i1,int j1,int i2,int j2)
{
    int temp = array[i1][j1];
    array[i1][j1] = array[i2][j2];
    array[i2][j2] = temp;
} 
```

然后，例如，您`moveLeft`将是这样的

```
void moveLeft(int (&array)[3][3], int i, int j)
{
    if (i>0 && i<3 && j>=0 && j<3)
    {
        swapValues(array, i, j, i-1, j);
    }
    else
    {
        cout << "wrong move!" << endl;
    }
} 
```

请注意，我将数组作为参考传递，否则您的修改将在您的`main`函数中不可见

# oracle - Oracle在另一个表中获取按时间排序的前行和后行

> ID：13187291
> 
> 赞同：1
> 
> 时间：2012-11-01T23:54:16.033
> 
> 标签：oracle, group-by, analytic-functions

我有 2 个表，每个表都有一个时间戳列。如何查询 A 中的每一行，B 中的第一个前后时间戳？

我想：

A.id A.timestamp first_preceding(B.timestamp) first_following(B.timestamp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:00:17.383

我会试试这个：

```
SELECT DISTINCT a.id, a.timestamp, b0.timestamp, b1.timestamp
FROM a, b b0, b b1
WHERE
b0.timestamp = (SELECT MAX(timestamp) FROM b WHERE timestamp < a.timestamp)
AND b1.timestamp = (SELECT MIN(timestamp) FROM b WHERE timestamp > a.timestamp); 
```

# session - umbraco cms 中的会话状态？

> ID：13187298
> 
> 赞同：0
> 
> 时间：2012-11-01T23:55:26.533
> 
> 标签：session, content-management-system, umbraco

我目前正在使用 umbraco cms。我注意到在 web.config 中对会话状态的引用。

我的网站将位于没有状态服务器的网络场上。umbraco 依赖于会话状态吗？如果是这样，是内容创作需要它还是内容服务需要它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T12:56:46.703

前端根本不使用任何会话变量，除非您对其进行编码，因此对于内容服务方面来说应该没问题。

我不是 100% 在后台，但我认为这一切都是用 cookie 完成的，而不是会话。最简单的检查方法是禁用 web.config 文件中的会话并尝试使用后台。如果它有效，你就可以了，否则它确实需要会话来进行内容编辑。

# iphone - UITextView：如何使可滚动？

> ID：13187305
> 
> 赞同：2
> 
> 时间：2012-11-01T23:56:12.633
> 
> 标签：iphone

我有一个 UITextView 我想滚动。现在的问题是键盘出现了，所以用户只能在屏幕的前半部分输入评论。我想要的是 TextView 可以滚动，以便用户可以输入新信息。

这是我正在使用的代码：

```
[comments setScrollEnabled:YES];
[comments setUserInteractionEnabled:YES]; 
```

不知道我错过了什么。我看不到滚动条。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:27:19.137

UITextView 仅在文本超出框架时才可滚动。如果文本适合框架，则无法滚动它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T02:54:57.633

您需要调整大小，`UITextView`使其适合键盘上方的区域。如果文本太大而无法在显示区域中固定，文本将在文本视图中自动滚动。

Apple 有一份文件涵盖了这一点。请参阅[移动位于键盘下方的内容](https://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:05:21.943

将您的 UITextView 嵌入到 UIScrollView 中，然后检查此[链接](https://stackoverflow.com/questions/1126726/how-to-make-a-uitextfield-move-up-when-keyboard-is-present)，我可能会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T09:42:17.900

UITextView 类是 UIScrollView 的子类，因此它继承了相同的行为。因此，如果文本视图的内容大小大于其边界，则只有文本视图是可滚动的。因此，您可以做的一件事是使文本视图的边界小一点，以便文本视图可以滚动。请参阅[此链接以供参考](https://stackoverflow.com/questions/10801794/uiscrollview-cannot-see-scrollbars-indicators/10802219#10802219)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-09T23:17:14.760

我有一个按钮来激活滚动功能，以下对我有用。

```
@IBOutlet var NotePadTextField: UITextView!

@IBAction func ClickOnNotePadTextView(_ sender: UIButton) {
    NotePadTextField.isScrollEnabled = true
    NotePadTextField.alwaysBounceVertical = true
    NotePadTextField.isUserInteractionEnabled = true
} 
```

# xml - 使用 xsl:analyze-string 将嵌套的正则表达式组输出为嵌套 XML

> ID：13187307
> 
> 赞同：2
> 
> 时间：2012-11-01T23:56:36.580
> 
> 标签：xml, regex, xslt, xslt-2.0

我有一个捕获嵌套组的正则表达式，我想输出与这些组相关的嵌套 XML，就像`fn:analyze-string`. 这是一个简单的例子：

### 正则表达式

```
((Luckenbach|Houston|Little Rock),\s(TX|AK)) 
```

### 输入

```
Let's go to Luckenbach, TX with Waylon and Willie and the boys. 
```

### 期望的输出

```
<s:analyze-string-result xmlns:s="http://www.w3.org/2009/xpath-functions/analyze-string">
    <s:non-match>Let's go to </s:non-match>
    <s:match>
        <s:group nr="1">
            <s:group nr="2">Luckenbach</s:group>, <s:group nr="3">TX</s:group
        </s:group>
    </s:match>
    <s:non-match> with Waylon and Willie and the boys.</s:non-match>
</s:analyze-string-result> 
```

问题是似乎没有办法递归处理in中的`regex-group()`值（或者像 xQuery fn:analyze-string() 一样将它们作为 XML 访问）。`xsl:analyze-string``xsl:matching-substring`

该解决方案需要足够通用以使用不同的正则表达式，其中许多具有多个级别的嵌套捕获组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:50:59.940

当上下文节点包含示例文本时，以下会产生所需的输出：

```
 <snip>
        <xsl:analyze-string 
                select="." 
                regex="((Luckenbach|Houston|Little Rock),\s(TX|AK))">
            <xsl:matching-substring>
                <location>
                    <city><xsl:value-of select="regex-group(2)"/></city>
                    <xsl:text>, </xsl:text>
                    <state><xsl:value-of select="regex-group(3)"/></state>
                </location>                       
            </xsl:matching-substring>
            <xsl:non-matching-substring>
                <xsl:value-of select="."/>
            </xsl:non-matching-substring>
        </xsl:analyze-string>    
    </snip> 
```

如果您只想生成`<snip>`如果 REGEX 匹配，您可以稍微调整 REGEX 和组的处理：

```
 <xsl:analyze-string 
                select="." 
                regex="((.*)((Luckenbach|Houston|Little Rock),\s(TX|AK))(.*))">
            <xsl:matching-substring>
                <snip>
                    <xsl:value-of select="regex-group(2)"/>
                    <location>
                        <city><xsl:value-of select="regex-group(4)"/></city>
                        <xsl:text>, </xsl:text>
                        <state><xsl:value-of select="regex-group(5)"/></state>
                    </location>
                    <xsl:value-of select="regex-group(6)"/>
                </snip>   
            </xsl:matching-substring>
            <xsl:non-matching-substring>
                <xsl:value-of select="."/>
            </xsl:non-matching-substring>
        </xsl:analyze-string> 
```

* * *

如果要重现 XQuery 函数[analyze-string()](http://www.w3.org/TR/xpath-functions-30/#func-analyze-string)的行为，可以定义自己的自定义函数：

```
<xsl:function name="my:analyze-string" as="item()*" xmlns:my="http://stackoverflow.com/questions/13187307/output-nested-regex-groups-as-nested-xml-using-xslanalyze-string">
    <xsl:param name="val" />

    <analyze-string-result xmlns="http://www.w3.org/2005/xpath-functions">   
        <xsl:analyze-string select="$val" regex="((.*)((Luckenbach|Houston|Little Rock),\s(TX|AK))(.*))">
            <xsl:matching-substring>
                <xsl:for-each select="1 to 6">
                    <xsl:if test="regex-group(.)">
                        <match>
                            <group  nr="{.}">
                                <xsl:value-of select="regex-group(.)"/>
                            </group>
                        </match>
                    </xsl:if>
                </xsl:for-each>
            </xsl:matching-substring>
            <xsl:non-matching-substring>
                <non-match>
                    <xsl:value-of select="."/>
                </non-match> 
            </xsl:non-matching-substring>
        </xsl:analyze-string>    
    </analyze-string-result>   
</xsl:function> 
```

当像这样调用时：

```
 <xsl:variable name="value" 
      select='"Let&apos;s go to Luckenbach, TX with Waylon and Willie and the boys."'/>
 <xsl:copy-of select="my:analyze-string($value)"
    xmlns:my="http://stackoverflow.com/questions/13187307/output-nested-regex-groups-as-nested-xml-using-xslanalyze-string"/> 
```

它产生以下输出：

```
<analyze-string-result xmlns="http://www.w3.org/2005/xpath-functions"
                       xmlns:my="http://stackoverflow.com/questions/13187307/output-nested-regex-groups-as-nested-xml-using-xslanalyze-string">
   <match>
      <group nr="1">Let's go to Luckenbach, TX with Waylon and Willie and the boys.</group>
   </match>
   <match>
      <group nr="2">Let's go to </group>
   </match>
   <match>
      <group nr="3">Luckenbach, TX</group>
   </match>
   <match>
      <group nr="4">Luckenbach</group>
   </match>
   <match>
      <group nr="5">TX</group>
   </match>
   <match>
      <group nr="6"> with Waylon and Willie and the boys.</group>
   </match>
</analyze-string-result> 
```

# java - 在 Java 中通过用户输入显示形状

> ID：13187308
> 
> 赞同：0
> 
> 时间：2012-11-01T23:56:37.920
> 
> 标签：java

我正在尝试创建一个程序，通过用户输入显示形状并将它们输出到窗口。我有一个单独的类，它定义了形状和图形窗口，但是我不知道如何获取用户对形状的输入。一般来说，我是 Java 和 OOP 的新手。到目前为止，这是我的代码：

```
import java.util.Scanner;

public class Input {
    public static void main(String [] args) {
        GraphicsScreen g = new GraphicsScreen();
        Scanner s = new Scanner(System.in);
        int val1 = 0;
        int val2 = 0;
        String line; 
        String [] sut;
        System.out.println("Please enter your commands here. Type 'end' to quit.");
        line = s.nextLine();

        while ( line.equalsIgnoreCase("end"));

        sut = line.split(", ");
        line = sut [0];
        if (sut.length > 1) {
            val1 = Integer.parseInt(sut[1]);
            if (sut.length > 2) {
                val2 = Integer.parseInt(sut[2]);
            }
        }
        if (line.equals("moveTo" + val1 + val2)) {
            g.moveTo(val1, val2);
        }
        else if (line.equals("lineTo" + val1 + val2)) {
            g.lineTo(val1, val2);
        }
        else if (line.equals("circle" + val1)) {
            g.circle(val1);
        }
        else {
            System.out.println("The commands you have entered are invalid. Please try again.");
        }   
    }
} 
```

基本上，在顶部定义的 int 必须设置为一个值，否则 Eclipse 返回一个编译器错误，所以我将它们设置为零。在最后一个 IF 语句中，我尝试连接最后的值，但这显然会导致形状为零值。

我将如何改变它以便用户定义`val1`并将`val2`结果输出到窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:04:38.947

```
if (line.equals("moveTo" + val1 + val2)) {
    g.moveTo(val1, val2);
} 
```

这不应该只是

```
if (line.equals("moveTo")) {
    g.moveTo(val1, val2);
} 
```

你已经用逗号打破了排队。

# jsp - Liferay 无法为 JSP 编译类

> ID：13187310
> 
> 赞同：1
> 
> 时间：2012-11-01T23:56:56.923
> 
> 标签：jsp, liferay

我在使用 Liferay 5.2 扩展系统时遇到了问题，问题是它在某些环境中工作而不在其他环境中工作。在失败的环境中，它会抛出这些异常。

```
23:32:24,363 ERROR [IncludeTag:78] Current URL /web/guest;jsessionid=BFE790BBC107B870740C0268238CEA16 generates exception: Unable to compile class for JSP: 

An error occurred at line: 33 in the jsp file: /html/portlet/ext/courseschedule2/view.jsp
GroupConstants.COMM_CATEGORY_AWR cannot be resolved
30: <%
31: 
32:         if (tabs1.equals("available-AWR")) {
33:             groupCat = GroupConstants.COMM_CATEGORY_AWR;
34:             catTitle = GroupConstants.COMM_CATEGORY_AWR_LABEL;
35:         } else if(tabs1.equals("available-HOT")) {
36:             groupCat = GroupConstants.COMM_CATEGORY_HOT;

Stacktrace:
    at org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:92)
    at org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330)
    at org.apache.jasper.compiler.JDTCompiler.generateClass(JDTCompiler.java:439)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:356)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:334)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:321)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:592)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:328)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.taglib.util.IncludeTag.doEndTag(IncludeTag.java:66)
    at org.apache.jsp.html.common.themes.portlet_jsp._jspService(portlet_jsp.java:2736)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

23:32:27,263 ERROR [IncludeTag:78] Current URL /web/guest;jsessionid=853515070BC187028375B6213F30D246 generates exception: org.apache.jasper.JasperException: Unable to load class for JSP
23:32:27,268 ERROR [IncludeTag:164] java.lang.ClassNotFoundException: org.apache.jsp.html.portlet.ext.courseschedule2.view_jsp
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:134)
    at org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:66)
    at org.apache.jasper.JspCompilationContext.load(JspCompilationContext.java:628)
    at org.apache.jasper.servlet.JspServletWrapper.getServlet(JspServletWrapper.java:149)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:340)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646)
    at org.apache.catalina.core.ApplicationDispatcher.doInclude(ApplicationDispatcher.java:551)
    at org.apache.catalina.core.ApplicationDispatcher.include(ApplicationDispatcher.java:488)
    at com.liferay.taglib.util.IncludeTag.doEndTag(IncludeTag.java:66)
    at org.apache.jsp.html.common.themes.portlet_jsp._jspService(portlet_jsp.java:2736)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:388) 
```

这些环境安装了相同的 Ant、Tomcat 和 Java。我还授予了对我的 Tomcat 目录的所有权限。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:47:42.697

判断因为它是一个编译问题并且`GroupConstants.COMM_CATEGORY_AWR`不是标准的 Liferay 常量`GroupConstants`。我会仔细检查以确保您正在导入正确的`GroupConstants`类并且您已正确部署您的代码。

# ruby-on-rails - ejabberd：管理添加/删除朋友

> ID：13187314
> 
> 赞同：3
> 
> 时间：2012-11-01T23:57:27.060
> 
> 标签：ruby-on-rails, ejabberd

严重的头痛，试图让 ejabberd 集成到现有的 Rails 应用程序中以支持聊天部分。希望任何实现这一点的人都可以分享一些关于如何最好地解决目前存在问题的原因的见解。

我的目标：

**1.将所有数据存储在mysql数据库中以便于备份** 我已经使用mysql驱动程序为ejabberd设置了mysql使用到目前为止一切顺利

**2\. 轻松从彼此的名册中添加和删除用户（添加和删除好友连接）**为此我设置了模块 rest 和 mod_admin_extra 以便能够从 rails 应用程序对 ejabberd 进行 restfull 调用。ejabberd 管理模块允许添加和删除用户但是（溢出：[https](https://stackoverflow.com/a/5229902/355281) : //stackoverflow.com/a/5229902/355281）作者说它不可能在 mysql 中存储数据 Mnesia 总是被 mod_admin_extra 使用

**3\. 暂时将用户添加到彼此的列表中**，或者最好有一些临时空间来添加 2 个用户，这样只要该组存在，他们就可以聊天。不知道如何解决这个问题

这一切的问题

1.  好像不是所有的数据都可以存储在mysql中，所以数据崩溃了 Mnesia & Mysql ，非常糟糕的是有两个地方的数据并且无法轻松备份mysql数据库
2.  必须使用 rest 模块对数据库做一些事情，这本身就很好，但是我不清楚如何向每个好友列表添加 2 个用户。

尽管 ejabberd 似乎是最完整的开箱即用 xmpp 服务器，但我可能需要寻找另一台解决上述问题的服务器。我项目的这一部分一直很头疼，希望有人能澄清一下，提供一些关于如何处理的建议。

例如：

*   如果 facebook 使用 ejabberd 他们是如何解决这些问题的？
*   是否有解决上述问题的 ejabberd 的干净重写？也许是一个商业 xmpp 服务器，具有不错的 api 以及在 1 个中心位置添加/删除用户和存储数据的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T06:25:22.533

由于您已经在使用 MySQL，您可以直接使用 Rails/MySQL 管理名册。如果您不想直接在数据库中进行操作，这是完全可以理解的，您可以通过 bosh ( [http://xmpp.org/extensions/xep-0206.html](http://xmpp.org/extensions/xep-0206.html) ) 连接到服务器，您可以在其中完成所有操作要求。有一个 JS bosh 客户端可以用作在 Rails 中实现它的指南，它被称为[http://strophe.im/](http://strophe.im/) 关于在两个地方拥有数据，您应该拥有（或能够拥有）MySQL 中的所有名册特定表，此外，您可以将几乎所有持久性数据配置为在 mysql 上，我需要了解更多关于您的具体问题和配置，以便能够对此进行更多详细说明。eJabberd 是高度可配置和可扩展的，根据我的经验（使用 eJabberd 超过 8 年），您基本上可以通过一种或另一种方式实现任何类型的行为。

# javascript - Wicket 6.2 AbstractDefaultAjaxBehavior getCallbackUrl 不再解析 JS 变量

> ID：13187319
> 
> 赞同：2
> 
> 时间：2012-11-01T23:58:04.540
> 
> 标签：javascript, apache, callback, wicket

最近，我一直在努力将使用 wicket 1.4.18 的大型 Web 应用程序升级到 6.2。我们有一种情况，我们会创建 javascript 变量来跟踪拖放列表中的位置。这只是代码的检票口方面，因为 js 一直有效并且没有改变。

```
ListItem.add(new AbstractDefaultAjaxBehavior()
{
    private static final long serialVersionUID = 1L;

    @Override
    public void onComponentTag(ComponentTag tag)
    {
        tag.put("ondrop", "var value = $(ui.item[0]).attr('hiddenvalue');"
            + this.getCallbackScript());
    }

    @Override
    public final CharSequence getCallbackUrl()
    {
        return super.getCallbackUrl() + "&hiddenvalue' + value + '";
    }
} 
```

但是我遇到的问题是javascript变量没有解析为值，现在在getCallbackUrl中被视为文字字符串（例如：'value'而不是5）。这不是 wicket 1.4.18 的情况，我不相信这个问题源于我们迁移到 1.5.8。

最后，我们只希望能够使用

```
@Override
protected void respond(AjaxRequestTarget target)
{
    getRequest().getRequestParameters().getParameterValue("hiddenvalue");
} 
```

对此有何建议？我希望我已经提供了足够的信息。提前感谢您的帮助。其中一些超出了我的知识范围，可能会令人生畏，不知道在哪里看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:13:52.497

Wicket Ajax 已针对 Wicket 6 完全重写。有关详细说明，请参阅[此页面](https://cwiki.apache.org/confluence/display/WICKET/Wicket+Ajax)。

在您的情况下，您应该像这样使用新的[AjaxRequestAttributes](http://ci.apache.org/projects/wicket/apidocs/6.0.x/org/apache/wicket/ajax/attributes/AjaxRequestAttributes.html)：

```
@Override
protected void updateAjaxAttributes(final AjaxRequestAttributes attributes) {
    super.updateAjaxAttributes(attributes);
    attributes.getExtraParameters().put("hiddenvalue", "value");
} 
```

从请求中检索值仍然与以前相同。

```
@Override
protected void respond(AjaxRequestTarget target)
{
    getRequest().getRequestParameters().getParameterValue("hiddenvalue");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-09T01:34:06.783

另一种更简洁的方法是使用回调函数

```
 AbstractDefaultAjaxBehavior ajaxBehavior = new AbstractDefaultAjaxBehavior() {

        @Override
        protected void respond(AjaxRequestTarget target) {
            String param1Value = getRequest().getRequestParameters().getParameterValue(AJAX_PARAM1_NAME).toString();
            String param2Value = getRequest().getRequestParameters().getParameterValue(AJAX_PARAM2_NAME).toString();
            System.out.println("Param 1:" + param1Value + "Param 2:" + param2Value);
        }

        @Override
        public void renderHead(Component component, IHeaderResponse response) {
            super.renderHead(component, response);
            String callBackScript = getCallbackFunction(CallbackParameter.explicit(AJAX_PARAM1_NAME), CallbackParameter.explicit(AJAX_PARAM2_NAME)).toString();
            callBackScript = "sendToServer="+callBackScript+";";
            response.render(OnDomReadyHeaderItem.forScript(callBackScript));
        }

    };
    add(ajaxBehavior); 
```

在 javascript var sendToServer 中为函数定义一个变量；

它将通过带有回调函数的 wicket 在 dom 就绪事件上初始化

从 javascript 调用 sendToServer(x,y) 将参数传递给服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-13T16:15:42.097

```
private static final String MY_PARAM = "myparam";
public static class SampleCallbackBehavior extends AbstractDefaultAjaxBehavior {        
    @Override
    public void renderHead(Component component, IHeaderResponse response) {
        super.renderHead(component, response);
        response.render(OnDomReadyHeaderItem.forScript("var myfunction : " + getCallbackFunction(CallbackParameter.explicit(MY_PARAM))));
    }
    @Override
    protected void respond(AjaxRequestTarget target) {
        StringValue paramValue = getComponent().getRequest().getRequestParameters().getParameterValue(MY_PARAM);
        //TODO handle callback
    }       
} 
```

在此之后，您应该只从 javascript 调用该函数

```
myfunction("paramValue"); 
```

# php - PHP PDO：如何处理 bindValue() 和保留关键字？

> ID：13187322
> 
> 赞同：2
> 
> 时间：2012-11-01T23:58:59.247
> 
> 标签：php, mysql, database, pdo

在我的数据库中，我有像*"status"*这样的字段，它们是保留关键字。这段代码对我来说很好（*状态*由*``*转义）：

```
$sql = "UPDATE $table SET `status`='$status' WHERE `id`='123'"; 
```

但现在我只想使用准备好的语句！我的 Database.class：

```
class Database extends \PDO {
    private $_sth; // statement
    private $_sql;

    public function update($tbl, $data, $where, $where_params = array()) {
        // prepare update string and query
        $update_str = $this->_prepare_update_string($data);
        $this->_sql = "UPDATE $tbl SET $update_str WHERE $where";
        $this->_sth = $this->prepare($this->_sql);

        // bind values to update
        foreach ($data as $k => $v) {
            $this->_sth->bindValue(":{$k}", $v);
        }

        // bind values for the where-clause
        foreach ($where_params as $k => $v) {
            $this->_sth->bindValue(":{$k}", $v);
        }

        return $this->_sth->execute();
    }

    private function _prepare_update_string($data) {
        $fields = "";
        foreach ($data as $k => $v) {
            $fields .= "`$k`=:{$k}, ";
        }
        return rtrim($fields, ", ");
    }
} 
```

更新不起作用的示例：

```
$DB = new Database();
$DB->update("tablename",
        array("status" => "active"),
        "`username`=:username AND `status`=:status",
        array("username" => "foofoo", "status" => "waiting")); 
```

我认为，这是因为 reserverd 关键字“状态”。但我不知道如何逃脱它。我试图将 _prepare_update_string($data) 中的占位符转义为：

```
bindValue("`:{$k}`", $v) 
```

但没有结果。

我希望解决方案非常简单，它只是我大脑中的一个卡住溢出。;-) 提前感谢人们！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:19:58.073

当您构造 SQL 字符串（我认为是prepare_update_string）时，以及在绑定数据的两个 foreach 循环中，运行递增计数并将其附加到绑定值。所以“:status”变成了“:status1”。

就像是：

```
$i = 1;
foreach ($data as $k => $v) {
    $this->_sth->bindValue(":{$k.$i}", $v);
    $i++;
} 
```

这将解决任何保留关键字的问题。

它还解决了需要多次绑定到同一个占位符的问题（我相信您将来会遇到）。

例如，而不是以下，由于 :status 占位符上的两个绑定而引发错误

```
SELECT * from table WHERE `status` = :status AND `otherfield` = :status 
```

随着计数的增加，这变为：

```
SELECT * from table WHERE `status` = :status1 AND `otherfield` = :status2 
```

享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-24T19:15:44.257

我有一个类似的问题，并通过引用传递参数来解决

我有一个 varchar(3) 字段，并且传递了一个指针而不是 'aaa' 值

这有效（$val 通过引用）：

```
<?php
foreach ($params as $key => &$val) {
    $sth->bindParam($key, $val);
}
?> 
```

这将失败（$val by value，因为 bindParam 需要 &$variable）：

```
<?php
foreach ($params as $key => $val) {
    $sth->bindParam($key, $val);
}
?> 
```

参考：Vili 的评论

[https://www.php.net/manual/pt_BR/pdostatement.bindparam.php](https://www.php.net/manual/pt_BR/pdostatement.bindparam.php)

# php - 使用 Python -> PHP 通过 http 发布二进制数据

> ID：13187323
> 
> 赞同：0
> 
> 时间：2012-11-01T23:59:01.520
> 
> 标签：php, python, http, post

我想将 Python 脚本中的二进制数据字符串发布到 Web 服务器，PHP 脚本应该在其中提取并存储它。我收到了我在 Python 端的 php 脚本的 POST 部分中回显的任何内容，因此我假设实际的 POST 有效。但是，我发布了 23 个字节，而 strlen($_POST['data']) 保持为 0。我的 PHP 脚本用于获取数据如下所示：

```
if (isset($_REQUEST["f"]) && $_REQUEST["f"]=="post_status") {
    $fname = "status/".time().".bin";
    if (file_exists($fname)) {
            $fname = $fname."_".rand();
              if (file_exists($fname)) {
                $fname = $fname."_".rand();
              }
    }
    echo strlen($_POST['data'])." SUCCESS!";

} 
```

Python POST 脚本如下所示：

```
 data = statusstr
    host = HOST
    func = "post_status"
    url = "http://{0}{1}?f={2}".format(host,URI,func)
    print url
    r = urllib2.Request(url, data,{'Content-Type': 'application/octet-stream'})
    r.get_method = lambda: 'PUT'
    response = urllib2.urlopen(r)
    print "RESPONSE " + response.read() 
```

为什么我的数据似乎没有通过，我想知道？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:04:41.897

对于作为表单数据内容类型之一发送的数据，PHP 只会将发布的值填充到 $_POST/REQUEST 数组中。在您的情况下，您需要直接从标准中读取二进制数据，如下所示：

```
$postdata = file_get_contents("php://input"); 
```

# php - 如何在 zf2 的控制器插件中设置视图变量？

> ID：13187324
> 
> 赞同：3
> 
> 时间：2012-11-01T23:59:34.677
> 
> 标签：php, zend-framework2

我编写了一个控制器插件，它将一些变量传递给我的视图。但在我看来，这些变量是无法访问的。

这是示例代码：

```
namespace Application\Controller\Plugin;

use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\View\Model\ViewModel;

class Myclass extends AbstractPlugin
{
    public function setup($event)
    {
        $view = new ViewModel();
        return $view->setVariables(array(
            'MyVariable' => 'VALUE' //this variable is not accessible from within view
        ));

    }   
} 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T22:33:59.703

如果您通过以某种方式将其附加到事件管理器来执行插件逻辑（给定参数，看起来就像您一样`$event`），那么您可以简单地使用：

`$viewModel = $event->getViewModel();`并以这种方式添加您的变量。

请注意，这仅适用于事件类型`MvcEvent::EVENT_DISPATCH`，`MvcEvent::EVENT_RENDER`因为此时控制器操作已经创建了 ViewModel，而您只是在修改它。否则，当您的动作控制器触发时，您在此处所做的任何事情都将被覆盖。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-02T05:40:14.690

您可以附加 MvcEvent::EVENT_RENDER 事件并在事件触发时访问视图模型：

```
use Zend\Mvc\Controller\Plugin\AbstractPlugin;
use Zend\Mvc\MvcEvent;
class Myclass extends AbstractPlugin
{
    public function __invoke()
    {
        $this->getController()->getEvent()->getApplication()->getEventManager()->attach(MvcEvent::EVENT_RENDER, array($this, 'onRender'));
    }

    public function onRender($event)
    {
        $viewModel = $event->getViewModel();
        $viewModel->setVariables(array(
            'MyVariable' => 'VALUE'
        ));
    }

} 
```

# linux - 此 bash 脚本中的以下行有什么作用？

> ID：13187338
> 
> 赞同：1
> 
> 时间：2012-11-02T00:01:17.497
> 
> 标签：linux, bash

此行在我`/etc/rc.sysinit`在 linux 上的文件中：

```
[ -r /proc/mdstat -a -r /dev/md/md-device-map ] && /sbin/mdadm -IRs 
```

我对它实际完成的工作并不感兴趣，而不是语法的工作原理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:02:46.250

它测试文件是否存在并且可读（`/proc/mdstat`），如果是，则执行。`/dev/md/md-device-map``-r``/sbin/mdadm -IRs`

方括号是程序的替代名称`test`（或 Bash 替代名称），它可以测试很多东西，例如文件的存在。这`-a`是一个逻辑“和”。

有关详细信息，请参阅 中的“条件表达式” [`man bash`](http://linux.die.net/man/1/bash)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:02:20.830

the`[`实际上是一个命令名本身，即相当于`test`命令。所以，`man test`用来找出是什么`-r`意思。

根据您的系统，您可能会`[`在以下位置找到`/usr/bin`：

```
$ ls -l /usr/bin/[
-rwxr-xr-x 1 root root 37000 Oct  5  2011 /usr/bin/[ 
```

或者它可能是一个符号链接：

```
$ ls -l /usr/bin/[
-rwxr-xr-x 1 root root 4 Oct  5  2011 /usr/bin/[ -> test 
```

一些 shell 还具有`[`内置命令（有些甚至`[[`提供了额外的选项）。不过，与大多数内置命令一样，您也会在文件系统中找到一个实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:03:05.743

这表示 ：

如果您可以阅读`/proc/mdstat`并且您`/dev/md/md-device-map`可以阅读，则运行`/sbin/mdadm -IRs`

看`help test`

**笔记**

`[[`是一个与命令类似（但比`[`命令更强大）的 bash 关键字。请参阅[http://mywiki.wooledge.org/BashFAQ/031](http://mywiki.wooledge.org/BashFAQ/031)和[http://mywiki.wooledge.org/BashGuide/TestsAndConditionals](http://mywiki.wooledge.org/BashGuide/TestsAndConditionals)

除非您正在编写 POSIX sh，否则我们建议使用`[[`.

# c++ - 从服务应用程序访问访客帐户系统注册表配置单元

> ID：13187339
> 
> 赞同：0
> 
> 时间：2012-11-02T00:01:18.927
> 
> 标签：c++, windows, winapi, registry

我需要使用 C++ 和 WinAPI 从本地服务应用程序修改用户模式程序的设置。对于大多数用户帐户，我可以通过读取以下注册表项来访问它们：

> HKEY_USERS\ [UserSID] \软件

但我似乎找不到内置访客帐户的用户配置单元。知道它的设置存储在注册表中的什么位置吗？

PS。本地服务是一个 32 位应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:51:45.300

来宾帐户是 SID `S-1-5-21-domain-501`，它没有自己的注册表项 AFAIK。

请参阅[Well-Known SID](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379649.aspx)和[Well-known security identifiers](http://support.microsoft.com/kb/243330)。

操作特定用户的注册表配置单元的正确方法是模拟用户，然后使用该用户正常`RegOpenCurrentUser()`访问该用户的`HKEY_CURRENT_USER`密钥，而不是`HKEY_USERS`直接操作该密钥。

# android - 重新启动活动是这里唯一的解决方案吗？

> ID：13187345
> 
> 赞同：0
> 
> 时间：2012-11-02T00:02:02.997
> 
> 标签：android, android-listview, android-fragments, android-activity, android-arrayadapter

我有两个`Fragment`班级和一个`dragEventListner`活动班级。每个片段类都有一个`imageScroller`由它们自己控制的`imageAdapter`和`listArray`。`Fragment1`类有一组图像，它们被拖放到`Fragment2`. 从 sd 卡中读取图像。当图像被丢弃时，我更新`listArray`of`Fragment2`并调用`<adapter>.notifyDataSetChanged()`. 图像被添加到列表中（正如我在文件资源管理器中看到的那样），但在我重新启动应用程序之前，更改不会显示在活动中（即我看不到丢弃的图像）。但是，我尝试重新启动应用程序`finish()`，然后调用已保存的意图。下面的代码：

```
Intent intent = getIntent();
finish();
startActivity(intent); 
```

`Unfortunately, app has stopped working`由于弹出崩溃消息然后恢复，这不是最好的。是重新启动应用程序唯一的解决方案还是我还有其他选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:22:33.433

你在imagescroller的适配器上使用notifyDataSetChanged()吗？我的项目中有类似的东西：

```
mAdapter.setArticles(ArticleList);
mPager.setAdapter( mAdapter );

ArticleList.add (0, ProcessXMLArticle(ArticleSearched)); 
mPager.getAdapter().notifyDataSetChanged(); 
```

其中 mPAger 是视图寻呼机，我只是将一个项目添加到列表中并在您的情况下调用 notify() mPager 将是您的 imageScroller

# jquery - 使用 Bootstrap 创建多个列表下拉菜单

> ID：13187346
> 
> 赞同：1
> 
> 时间：2012-11-02T00:02:05.227
> 
> 标签：jquery, html, css, twitter-bootstrap

我正在尝试使用最新版本的 Bootstrap 创建一个下拉导航栏。我想创建一个下拉列表，其中我在下拉列表中有两个单独的列表，彼此垂直相邻（类似于[本网站上的空气净化器下拉列表](http://www.air-purifiers-america.com/)

目前看来，Bootstrap 只支持[水平分隔线](http://twitter.github.com/bootstrap/components.html#dropdowns)。有谁知道我可以用来解决这个问题的 css/html hack？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:06:19.893

看到这个小提琴：http: [//jsfiddle.net/manishie/CVYq6/](http://jsfiddle.net/manishie/CVYq6/)

基本上，您采用常规引导下拉菜单并将其从 ul 更改为 div。但是你保持类名相同。在那个 div 中，你可以拥有任何你想要的东西。

在这种情况下，您需要两个并排的列表，但您可以有图像或任何您想要的 html。

Bootstrap 使用类名，因此当您单击切换时，将显示 .dropdown-menu 类中的任何内容。

HTML：

```
<div class="dropdown">
  <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown trigger</a>
  <div class="dropdown-menu" role="menu">
      <ul>
          <li>one</li>
          <li>two</li>
          <li>three</li>
          <li>four</li>
      </ul>
      <ul>
          <li>blah</li>
          <li>blah blah</li>
          <li>blah blah blah</li>
      </ul>
  </div>
</div>​ 
```

CSS：

```
.dropdown-menu ul {
    float: left;
}

.dropdown-menu ul:first-of-type {
    border-right: 1px solid black;
    padding-right:20px
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:27:26.297

我相信这个功能还没有开箱即用。

[github 上的相关问题](https://github.com/twitter/bootstrap/issues/2965)。

您可以尝试破解它并手动注入列，或者根本不使用引导程序就这样做。

如果你需要这个菜单，你可以试试 mega menu 或[flexbox](http://flexbox.codeplex.com/)

# ruby-on-rails - 我应该拆分这个模型和表格吗？

> ID：13187347
> 
> 赞同：0
> 
> 时间：2012-11-02T00:02:07.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, sti

我想创建简单的 ResumeBank 应用程序。

**问题**：

作为用户，我只想添加两个简历。这两个简历的形式不同，只有两个字段。简历有 12 个相同的属性，但有 2 个不同。

**问题**：

我是否应该将该简历模型和表格拆分为 ex：PolishResume 和 EnglishResume、polish_remsumes 和 english_remsumes？

或者也许我应该使用 STI 并创建 PolishResume < Resume 并使用一张表。

拆分选项的缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T04:58:05.347

似乎经典继承应该解决它

```
class ResumeBase{...}
class ResumeWith12Forms: public: ResumeBase{
     //use options to determine which unique 2 forms to show
     //options could be an enum or even boolean
     ResumeWith12Forms(options){ };
}

class User{ std::vector< std::shared_ptr<ResumeBase> userResume; } 
```

# javascript - 自定义投影如何在 d3 3.0 中工作？

> ID：13187351
> 
> 赞同：2
> 
> 时间：2012-11-02T00:02:21.407
> 
> 标签：javascript, d3.js, leaflet

我尝试将 Mike Bostock 的[Leaflet + d3 mashup](http://bost.ocks.org/mike/leaflet/)移植到 d3 3.0 的最新版本，但我遇到了“投影”行的一些问题：

```
Uncaught TypeError: Object function (x){
    var point = self.map.latLngToLayerPoint(new L.LatLng(x[1], x[0]));
    return [point.x, point.y];
} has no method 'point' 
```

自定义项目的工作方式似乎发生了重大变化，但我不太确定如何。

谁能阐明 Leaflet + d3 示例在 d3 3.0 中的外观？

# javascript - 使用 jquery css() 在模态中从 typeahead 样式下拉列表

> ID：13187361
> 
> 赞同：0
> 
> 时间：2012-11-02T00:03:59.533
> 
> 标签：javascript, jquery, css, twitter-bootstrap

我正在使用 Twitter 引导程序。我正在尝试从预先输入的 jquery-css 下拉列表。预输入是模态的。此代码应该可以工作，但不能

```
$(function(){
    $("ul.typeahead.dropdown-menu li:even").css({ 
        'background': 'white'
});
    $("ul.typeahead.dropdown-menu li:odd").css(
        'background', '#black'
    );
}); 
```

在css中应该是这样的。我没有使用这个，因为并非所有浏览器都支持它。这就是为什么我使用 jquery 但它不起作用...

```
ul.typeahead.dropdown-menu li:nth-child(even) {background: white;}
ul.typeahead.dropdown-menu li:nth-child(odd) {background: black;} 
```

有谁知道如何解决这一问题？

# html - 当内部有图像时，HTML垂直对齐表格单元格的内容

> ID：13187366
> 
> 赞同：2
> 
> 时间：2012-11-02T00:04:43.143
> 
> 标签：html, vertical-alignment, valign

有没有办法让文本垂直对齐`Hello World!`到表格单元格的中间而不分成两个单元格？

```
<table border="1">
    <tr>
        <td valign="middle" style="vertical-align:middle;">
            Hello World! <img src="https://www.google.com/images/srpr/logo3w.png" border="1" />
        </td>
    </tr>
</table> 
```

[http://jsfiddle.net/U4Qs4/](http://jsfiddle.net/U4Qs4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:07:00.133

您需要垂直对齐图像，而不是 td 元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:20:24.847

适用于 Chrome FF 和 IE7 ....

```
<style>
.mid {
    vertical-align:middle
    }
</style>

<table border="1">
    <tr>
        <td class="mid">
            <img src="https://www.google.com/images/srpr/logo3w.png" class="mid" border="1" />Hello World!
        </td>
    </tr>
</table> 
```

# .htaccess - 重写规则 url 字符替换

> ID：13187367
> 
> 赞同：2
> 
> 时间：2012-11-02T00:04:56.717
> 
> 标签：.htaccess, replace, rewrite, character

如何在我的网址中将 + 替换为 -。我应该在我的 htacces 中添加什么代码来摆脱 + 并用减号替换它。

```
RewriteCond %{QUERY_STRING} ^search=([^&]+)$
RewriteRule ^ http://mysite.com\/Download\/free\/%2.html? [R,L,NE] 
```

如果我键入包含空格的搜索，则每个空格都变为 +，而我想要 -。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:38:17.007

我假设 URL: 的**bla+bla+bla**部分`http://mysite.com/Download/free/bla+bla+bla.html`来自查询字符串`search=`的值。根据您可能拥有的其他规则，您可以通过 2 种不同的方式来解决此问题。您可以先从查询字符串中删除所有空格，然后再将其重定向到 .html 文件。或者您可以将查询字符串重写为 URI，然后在*重定向*之前删除空格。它会是这样的：

```
RewriteCond %{QUERY_STRING} ^search=(.*?)(\+|%20)(.*)$
RewriteRule ^ /?search=%1-%3 [L,NE]

RewriteCond %{QUERY_STRING} !(\+|%20)
RewriteCond %{QUERY_STRING} ^search=([^&]+)$
RewriteRule ^ http://mysite.com\/Download\/free\/%1.html? [R,L,NE] 
```

请注意，在您的 htaccess 中，您有**%2**反向引用，它似乎没有引用任何内容。

或者先重写为URI，然后重定向：

```
RewriteCond %{QUERY_STRING} ^search=([^&]+)$
RewriteRule ^ /Download\/free\/%1.html? [L,NE]

RewriteCond %{REQUEST_URI} !(\ )
RewriteRule ^ - [L,R]

RewriteRule ^(.*)\ (.*)$ /$1-$2 [L] 
```

# javascript - Google Chrome 中未显示脚本选项卡或脚本面板

> ID：13187370
> 
> 赞同：1
> 
> 时间：2012-11-02T00:05:34.470
> 
> 标签：javascript, google-chrome

当我打开 Google Chrome 的开发者工具时，我没有得到脚本选项卡。我在两台计算机上完成了这项工作，一台运行 Windows 7，另一台运行 Windows Server 2008 R2。你能告诉我我需要做什么才能恢复“脚本”选项卡吗？非常感谢！

![在此处输入图像描述](../Images/635326422a10ed1c57f15a196ce0007d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:09:22.900

你看到的截图？脚本现在位于“来源”下

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:12:18.960

Chrome 调试器中不再有脚本选项卡。您可以在“资源”选项卡下查看 javascript（尽管我在“资源”选项卡中发现它并不是很有用）。

您可以在 Sources 选项卡下查看和设置脚本中的断点。现在转到 Sources 选项卡，单击左上角的向右箭头（元素正下方），然后找到您要查找的脚本。在此处单击它，它将创建一个仅包含该脚本的选项卡。然后，您可以设置断点。

# c++ - 我如何使用函数来计算，并使用 void 函数来显示？

> ID：13187371
> 
> 赞同：2
> 
> 时间：2012-11-02T00:05:38.563
> 
> 标签：c++, visual-studio-2010, visual-c++

我对 c++ 中的许多概念都比较陌生。这是学校的工作。现在我正在使用

```
if(smartPhones >= 6000)
    commission = (smartPhones - 6000) * .25;
else(commission = 0);
if(serviceContracts >= 3500)
    commission1 = (serviceContracts - 3500) * .10;
else(commission1 = 0);
if(accessories >= 2000)
    commission2 = (accessories - 2000) * .05;
else(commission2 = 0);
if(maintenance >= 500)
    commission3 = (maintenance - 500) * .07;
else(commission3 = 0); 
```

计算手机销售佣金。如果某人销售超过 6000 部手机，他们将获得每部超过 6000 部手机的 25% 的佣金，超过 3500 份服务合同他们将获得每份超过 3500 部合同的 10% 的佣金。如果他们没有达到这些限制，他们将不会收到任何佣金对于那个类别。

我需要不断调用并使用单个函数来计算所有 4 个标准（智能手机、服务合同、配件和维护合同）的佣金。我将如何正确地做到这一点，我需要在函数中包含什么？我可以在函数内部使用 If/Else 语句吗？

```
double calcComm(double sales, double base, double percent)
{

} 
```

计算佣金后，我需要使用 void 函数来调用并在列和行中显示排列的数据量。类似的东西

```
void display()
{
    double ID, totalCommission, smartPhones, serviceContracts, accessories, maintenance, commission, commission1, commission2, commission3, base, total;
cout << "Commission Statement for Salesman #: "<< ID << endl;
cout << left << "Product and Sales Amount " << endl;
cout << left << "Smart Phones: " << smartPhones << endl;
cout << left << "Service Contracts: "<< serviceContracts << endl;
cout << left << "Accessories: " << accessories << endl;
cout << left << "Maintenance Contracts: " << maintenance << endl;

cout << left << "Commission for all Products" << endl;
cout << left << "Smart Phones: " << commission << endl;
cout << left << "Service Contracts: " << commission1 << endl;
cout << left << "Accessories: " << commission2 << endl;
cout << left << "Maintenance Contracts: " << commission3 << endl;

cout << left << "Total Commission " << totalCommission << endl;
cout << left <<"Base Pay " << base << endl;
cout << left << "Total Due " << total << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:12:58.373

1.  是的，您可以在函数中使用 if-else。事实上，您可以使用大多数 C++ 关键字（有些在其他上下文中受到限制，例如`class`，`template`...）

2.  与 John3136 相反，我认为枚举可能就足够了，并且也适合规定的框架。无论哪种方式，您都需要向该函数传递一个参数，使其能够区分不同类型的销售，因为佣金不同且基数不同。在函数内部，您可以使用该参数并使用 if-else。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:10:17.307

最简单的方法是创建一个包含所有佣金类型的 Commissions 类，并获取第一个代码块来创建（填充）Commissions 实例。

然后，您可以将 Commissions 实例传递给您的 display 方法。

# java - 为什么带有字符串的对象打印为空？

> ID：13187379
> 
> 赞同：1
> 
> 时间：2012-11-02T00:06:52.200
> 
> 标签：java

可能是一个菜鸟问题，但为什么这段代码打印为空？

```
public class Bug1 { 
    private String s;
    public void Bug1() {
        s = "hello";
    }
    public String toString() {
        return s;
    }
    public static void main(String[] args) {
        Bug1 x = new Bug1();
        System.out.println(x);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:08:06.310

您在`void`这里有关键字，使您的“构造函数”成为一个方法（从不调用），因此`String` `s`永远不会初始化。`null`默认情况下，类级别的对象引用。

```
public void Bug1() { 
```

修复，更改为：

```
public Bug1() { 
```

构造函数没有返回类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:09:29.280

```
public class Bug1 { 
    private String s;
    public Bug1() {
        s = "hello";
    }
    public String toString() {
        return s;
    }
    public static void main(String[] args) {
        Bug1 x = new Bug1();
        System.out.println(x);
    }
} 
```

您将 Bug1 定义为方法而不是构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T03:57:38.073

java中的构造函数一直没有返回类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:08:37.440

因为你定义了一个方法而不是一个构造函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T00:09:51.417

阅读[Java 中的构造函数](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)。

这是你应该做的：

```
public class Bug1 { 
    private String s;
    public Bug1() { //Parameterless constructor
        s = "hello";
    }
    public String toString() {
        return s;
    }
    public static void main(String[] args) {
        Bug1 x = new Bug1();
        System.out.println(x);
    }
} 
```

# android - Android App > Widget (AppWidgetProvider) > 如何制作切换按钮？

> ID：13187381
> 
> 赞同：0
> 
> 时间：2012-11-02T00:07:00.520
> 
> 标签：android, background, widget, alignment, togglebutton

我想创建一个非常简单的小部件。1x1 单元格。下方有文字的按钮。见下图，“时钟”图标/文本是我希望它对齐的方式。“你好”是我迄今为止所做的努力。拥有一个切换按钮会非常好，所以有两种状态，点击后它应该冻结“按下”状态。再次单击后，它应该返回正常状态。

我的愿望：
- 我想创建一个小部件：
- 1x1 单元格- 切换按钮
（关闭两种状态：正常和按下，点击后必须冻结）
- 下面的文本
- 切换按钮有背景，比例必须是 4:4每时每刻。完美的圆圈。
- 当按钮冻结在“按下”状态时，文本也必须更改为另一个字符串

由于小部件不支持切换按钮，因此我正在寻找高质量的答案。我正在努力对齐文本、小部件中的切换按钮、背景：保持 4:4 的比例而不是拉伸……那么最好的方法是什么？其他小部件如何构建它？

见图片：http: [//i.stack.imgur.com/HnAS3.jpg](http://i.stack.imgur.com/HnAS3.jpg)

到目前为止我的代码：http: [//paste2.org/p/2414784](http://paste2.org/p/2414784)

帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:07:21.587

***编辑：***与代码示例类似的 SO 问题，kudos Mortalus：

[在 AppWidget 中制作切换按钮](https://stackoverflow.com/questions/10862460/making-a-toggle-button-in-an-appwidget)

在 中创建切换按钮的教程`Activity`：

[http://www.edumobile.org/android/android-programming-tutorials/create-a-toggle-button/](http://www.edumobile.org/android/android-programming-tutorials/create-a-toggle-button/)

还有一个关于创建`AppWidget`s 的很棒的教程：

[http://blog.doityourselfandroid.com/2011/05/24/developing-android-home-screenwidgets/](http://blog.doityourselfandroid.com/2011/05/24/developing-android-home-screenwidgets/)

我认为您从小部件指南中获得了 40dp，这是一个极好的资源：

[http://developer.android.com/guide/practices/ui_guidelines/widget_design.html](http://developer.android.com/guide/practices/ui_guidelines/widget_design.html)

我注意到您的图像似乎水平受限，垂直拉伸，这似乎与您的以下行相匹配`Button`：

```
android:layout_width="match_parent"
android:layout_height="wrap_content" 
```

您可以尝试将两者都设置为`wrap_content`（或相反，设置为`match_parent`）以使它们均匀。至于对齐，这里有更多信息：

[http://developer.android.com/guide/topics/appwidgets/index.html#AddingMargins](http://developer.android.com/guide/topics/appwidgets/index.html#AddingMargins)

# java - 将表格格式化数据输出到控制台

> ID：13187382
> 
> 赞同：1
> 
> 时间：2012-11-02T00:07:01.683
> 
> 标签：java, text

有谁知道 Java 库或内置的我可以用来将数据格式化为适合打印到控制台的表格？

我知道使用 String.format 的字符串对齐和填充，但我正在寻找自动调整列宽以适应数据的东西，类似于`column`BSD 系统上的命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:09:17.993

您可以使用`String.format`和`Apache StringUtils.center()`自动填充文本以使其在单元格中居中：

[https://commons.apache.org/lang/api-2.1/org/apache/commons/lang/StringUtils.html](https://commons.apache.org/lang/api-2.1/org/apache/commons/lang/StringUtils.html)

# shell - Shell脚本：读取行错误

> ID：13187383
> 
> 赞同：0
> 
> 时间：2012-11-02T00:07:02.660
> 
> 标签：shell

我有一个shell脚本，它从文件“input_file”中读取多行，前几行如下：

```
04fcgFs-mjA
0DZ7DbdeOeE
0yvHWyvexZA
1IAhDGYlpqY
1Vajuce8nyU
1Y_wJR1I-9s
2dn-ULkQl5M
2GmVajkqLNU
2X85PdfQqnM
37LAPz7pnQI 
```

在脚本中，我有：

```
while read line
do
blabla .....
done< input_file 
```

非常有趣的是，当脚本读取偶数行时，比如第二、第四、第六，第一个字符会丢失。例如，当它读取第二行时，得到的字符串是`DZ7DbdeOeE`，而不是`0DZ7DbdeOeE`。

我试图编写一个简单的脚本，只有：

```
while read line
do
echo $line
done< input_file 
```

然后就可以正确读取了`0DZ7DbdeOeE`。

由于我的shell脚本很长，所以我不在这里发布，但我认为内部代码与“input_file”无关。顺便说一句，有一些块像

```
if [condition]
  continue
fi 
```

所以我只想知道这种现象的潜在原因是什么？太奇怪了！

我已经在这个链接中发布了脚本内容：http: [//goo.gl/Iwory](http://goo.gl/Iwory)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T22:21:28.007

您的某些`blablabla`内容正在从标准输入读取，可能是为了查看它是否在终端上或类似的东西上。确保您在那里运行的所有外部进程都将其标准输入从`/dev/null`.

`blablabla`您当然可以通过注释掉您的部分并查看行为何时发生变化来弄清楚它在做什么。

# php - 下面的查询可以改正吗

> ID：13187384
> 
> 赞同：-1
> 
> 时间：2012-11-02T00:07:17.243
> 
> 标签：php, sql, mysqli

我在查询中需要一些帮助，但我不知道是否包含正确的 GROUP BY 子句并从 SELECT 子句中的正确表中选择字段：

下面是数据库表：

**会话表**

```
SessionId  SessionName
1          AAA
2          AAB 
```

**问题表**

```
SessionId  QuestionId  QuestionContent            QuestionMarks
1          1           What is 2+2?               2
1          2           What is 4+4?               3
2          1           What is 10+10 and 11+11?   5
2          2           What is 15+15?             5
2          3           What is 20+20 and 40+40?   7 
```

**答案表**

```
AnswerId SessionId  QuestionId Answer
1        1          1          B
2        1          2          C
3        2          1          A
4        2          1          D
5        2          2          A
6        2          3          D
7        2          3          E 
```

以下是查询：

```
 $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, q.QuestionMarks 
   FROM Session s 
   INNER JOIN Question q ON s.SessionId = q.SessionId
   JOIN Answer an ON q.QuestionId = an.QuestionId
   WHERE SessionName = "AAB"
   GROUP BY an.SessionId, an.QuestionId
   "; 
```

我想显示属于会话“AAB”的每个问题。所以它应该显示 QuestionId、QuestionContent、Answer 和 QuestionMarks，如下所示：

```
 QuestionId  QuestionContent              Answer  QuestionMarks
    1           What is 10+10 and 11+11?     AD       5
    2           What is 15+15                A        5
    3           What is 20 + 20 and 40+40?   DE       7 
```

目前，如果我在“AAB”会话中搜索让我们说问题，它会在下面显示：

```
QuestionId  QuestionContent              Answer  QuestionMarks
    1           What is 10+10 and 11+11?     AD       5
    2           What is 15+15                A        5
    3           What is 20 + 20 and 40+40?   DE       7
    1           What is 10+10 and 11+11?     AD       5
    2           What is 15+15                A        5
    3           What is 20 + 20 and 40+40?   DE       7
    1           What is 10+10 and 11+11?     AD       5
    2           What is 15+15                A        5
    3           What is 20 + 20 and 40+40?   DE       7
    1           What is 10+10 and 11+11?     AD       5
    2           What is 15+15                A        5
    3           What is 20 + 20 and 40+40?   DE       7
    1           What is 10+10 and 11+11?     AD       5
    2           What is 15+15                A        5
    3           What is 20 + 20 and 40+40?   DE       7 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:02:47.260

您的答案表中有一个会话 ID，看起来您在加入时错过了它。此外，您不应该在 group_concat 中使用 DISTINCT，除非您为同一个问题/会话多次存储相同的答案是偶然的，在这种情况下，我会解决该事故，而不是在查询中编写解决方法。

```
SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, GROUP_CONCAT(DISTINCT Answer SEPARATOR '') AS Answer, q.QuestionMarks 
FROM Session s 
INNER JOIN Question q ON s.SessionId = q.SessionId
JOIN Answer an ON q.QuestionId = an.QuestionId
             AND an.sessionID = s.sessionID
WHERE SessionName = "AAB"
GROUP BY an.SessionId, an.QuestionId 
```

# php - Yii 缓存过滤器指定动作

> ID：13187385
> 
> 赞同：1
> 
> 时间：2012-11-02T00:07:42.893
> 
> 标签：php, yii

我想在我的控制器中仅缓存指定的操作，我如何指定使用该过滤器？

```
public function filters()
{
    return array('accessControl',
                array(
                    'COutputCache',
                    'duration'=>100,
                    'varyByParam'=>array('id'),
                ),
            );
} 
```

信息：

上述过滤器配置将使过滤器应用于控制器中的所有操作。我们可以仅通过使用加号运算符将其限制为一个或几个动作。更多细节可以在过滤器中找到。

但我不知道如何使用它=/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T07:36:40.187

其实很简单，看[指南](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter "http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter")：

> 使用加号和减号运算符，我们可以指定过滤器应该和不应该应用于哪些操作。在上面，postOnly 过滤器将应用于编辑和创建操作，而 PerformanceFilter 过滤器将应用于除编辑和创建之外的所有操作。如果过滤器配置中既没有出现加号也没有出现减号，则过滤器将应用于所有操作。

所以你的代码会变成这样：

```
array(
    'COutputCache + actionId, actionId2', // applies filter to only actions actionId and actionId2
    'duration'=>100,
    'varyByParam'=>array('id'),
), 
```

或者，如果您想将过滤器应用于除 actionId 和 actionId2 之外的所有操作：

```
array(
    'COutputCache - actionId, actionId2', // applies filter to all actions except actions actionId and actionId2
    'duration'=>100,
    'varyByParam'=>array('id'),

) 
```

要使用`+`或`-`取决于哪个集合更小要指定，例如从 10 个动作中您想要将过滤器应用于除 2 个动作之外的所有动作，然后用于`-`指示过滤器不应该应用于的 2 个动作。但是，如果您想从 10 个操作中仅对 2 个操作应用过滤器，则使用`+`.

* * *

注意：如果你想知道actionId，它是在action之后的字符串`public function actionHelloWorld(){...}`，所以在这个例子中是`helloWorld`。

# vim - 在 vim 的 snipmate 插件中按 tab 会使输入增加三倍

> ID：13187387
> 
> 赞同：3
> 
> 时间：2012-11-02T00:07:56.357
> 
> 标签：vim, code-snippets, snipmate

Snipmate 将我的输入增加了三倍。我执行以下操作：

```
template[press tap here] 
```

我得到一个扩展：

```
template <class T = >
class  {
public:
  () {}
  ~() {}
private:
}; 
```

它只是遵循中的定义`~/.vim/vim-addons/snipmate-snippets/snippets/cpp.snippets`

```
# template
snippet template
    template <class ${1:T} = ${2}>
    class ${3:`Filename('$3', 'name')`} {
    public:
        $3() {}
        ~$3() {}
    private:
    }; 
```

`{$1}`我输入和`{$2}`制表位没有问题，但是当我输入“lala”时`{$3}`，我得到了

```
template <class T = int>
class lala lala  alal {
public:
  lala  alal() {}
  ~lala  alal() {}
private:
}; 
```

snipmate 语法非常简单。我对自己做错了什么感到困惑。

我通过 VAM 安装了 snipmate

```
call vam#ActivateAddons(['snipmate-snippets'], {'auto_install' : 0}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T00:01:06.930

我写的内容可能有点偏颇，但是当 SirVer 有 UltiSnips 时，我看不出有任何使用 snipMate[的](https://github.com/SirVer/ultisnips)理由。不要误会我的意思，snipMate 很棒，或者更好地说 - 很棒，但现在它远远落后于 UltiSnips 插件。

请务必查看`README`该项目中发布的截屏视频 - 以查看我上面所说的证明。

祝你好运。

# java - 我无法将 epubcheck jar 添加到我在 netbeans 中的代码中

> ID：13187391
> 
> 赞同：0
> 
> 时间：2012-11-02T00:08:32.783
> 
> 标签：java, netbeans, jar

在文件夹库中，我添加了包含 epubcheck 的 jar 文件的文件夹（[http://code.google.com/p/epubcheck/](http://code.google.com/p/epubcheck/)）。但由于某种原因，它不起作用。

我还添加了这行代码：

```
import com.adobe.epubcheck.api; 
```

我错过了什么吗？

![在此处输入图像描述](../Images/ae06f469599b0832913994d89d4e4cc1.png) ![在此处输入图像描述](../Images/e20458cfaa9e8a7da17717d1de002e70.png)

**更新**

即使图书馆文件夹中的所有罐子......它仍然无法正常工作。

![在此处输入图像描述](../Images/da28476891569096c604811818b97b34.png)

以下是从 epubchecker README 中将 lib 添加到代码中的说明：

> 用作图书馆
> 
> 您还可以将 EpubCheck 用作 Java 应用程序中的库。EpubCheck 公共接口可以在 com.adobe.epubcheck.api 包中找到。EpubCheck 类可用于实例化验证引擎。使用其构造函数之一，然后调用 validate() 方法。Report 是一个接口，您可以实现该接口以获取验证引擎报告的错误和警告列表（而不是打印出错误列表）。

**输出**

```
deps-jar:
Created dir: /Users/.../NetBeansProjects/epubValidation/build
Updating property file: /Users/.../NetBeansProjects/epubValidation/build/built-jar.properties
Created dir: /Users/.../NetBeansProjects/epubValidation/build/classes
Created dir: /Users/.../NetBeansProjects/epubValidation/build/empty
Created dir: /Users/.../NetBeansProjects/epubValidation/build/generated-sources/ap-source-output
Compiling 1 source file to /Users/.../NetBeansProjects/epubValidation/build/classes
/Users/.../NetBeansProjects/epubValidation/src/epubvalidation/EpubValidation.java:6: package com.adobe.epubcheck does not exist
import com.adobe.epubcheck.api;
1 error
/Users/.../NetBeansProjects/epubValidation/nbproject/build-impl.xml:915: The following error occurred while executing this line:
/Users/.../NetBeansProjects/epubValidation/nbproject/build-impl.xml:268: Compile failed; see the compiler error output for details.
BUILD FAILED (total time: 9 seconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:35:43.003

从您的库中删除`/Users/...`条目。在类路径中添加文件夹不会添加该文件夹中的所有 jar，它会添加文件夹，就*好像它是 jar 一样。*它试图读取该文件夹，就好像它包含 .class 文件一样，这是不正确的。相反，选择 external jars 选项并将所有 jars 添加到 中`lib`，就像您添加 epubcheck jar 的方式一样。

另一种选择：使用[Maven](http://maven.apache.org/)。它将为您完成所有这些库管理，Netbeans 使它非常易于使用。[这是一个教程](http://platform.netbeans.org/tutorials/nbm-maven-quickstart.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:50:27.970

您已经完成了以下操作：
a) 将 epubcheck jar 添加到库
右键单击​​库并选择“添加 JAR/文件夹...”，导航到您的目录
/Users/xxx/epubcheck-3.0b5-db 并选择 epubcheck -3.0b5.jar
b) 将整个 epubcheck 文件夹添加到库
中右键单击库并选择“添加 JAR/文件夹...”，导航到目录
/Users/xxx/epubcheck-3.0b5-db 并选择它

a) 正确 b) 不正确 - 您应该在 /Users/xxx/epubcheck-3.0b5-db/lib 中添加每个单独的 jar 文件

要更正，请在 Netbeans 中执行此操作：
c) 如下删除 (b)
右键单击​​ Libraries->/Users/xxx/epubcheck-3.0b5_db 并选择删除。
d) 将 epubcheck lib 文件夹中的 batik-css-1.7.jar 添加到库
右键单击​​库并选择“添加 JAR/文件夹...”，导航到目录
/Users/xxx/epubcheck-3.0b5-db/lib &选择 batik-css-1.7.jar
e) 对每个 batik-util-1.7.jar、commons-compress-1.2.jar、jing-20120227.jar、sac-1.3.jar、saxon-9.1.0.8 重复 (d) 。罐

替代解决方案
您可以将所有 /Users/xxx/epubcheck-3.0b5_db 添加为单独的 Netbeans 项目：
i) 复制/移动 /Users/xxx/epubcheck-3.0b5_db 到
netbeansWorkspaceFolder/epubcheck-3.0b5/epubcheck-3.0b5
ii)将 epubcheck-3.0b5.jar 移动到 netbeansWorkspaceFolder/epubcheck-3.0b5/epubcheck-3.0b5/dist/epubcheck-3.0b5.jar iii) 将其添加为 Netbeans 项目：
添加项目 -> Java -> 使用现有源的 Java ->下一步 ->
设置项目名称=epubcheck-3.0b5 -> 浏览 -> 选择 epubcheck-3.0b5 目录 -> 下一步 ->
对于源包文件夹选择“添加文件夹...”并选择“epubcheck-3.0b5/epubcheck-3.0 b5" -> 下一步 ->
包含的文件列表现在应该显示所有必需的 lib jar (lib/*.jar) -> 完成
iv) 选择 epubValidation 项目 -> 库文件夹并右键单击并选择“添加项目...”并选择“epubcheck-3.0b5”项目 v) 现在 epubcheck-3.0 中的 lib jar 的 dist/epubcheck-3.0b5.jar b5 可用于 epubValidation

=B)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-08T00:08:01.057

要导入 epubcheck，您需要执行以下操作：

![创建一个新的 Java 项目...](../Images/4689ff46e61c486d227c3a10973c7ad3.png)

创建一个新的 Java 项目...取消选中**Create Main Class**，这是使其工作的唯一方法。

![右键单击库](../Images/10a8b320231d23024c45a508d1429f7c.png)

右键单击库以选择添加 JAR/文件夹...

![添加 JAR](../Images/2824d4c193413c730a3cc3e1e13cd64f.png)

添加罐子...

![添加其余的 JAR](../Images/d9ef6bebcf8aa98d6b5288550d0f8443.png)

添加其他 JAR。

![新文件...](../Images/136adef11cb70f3351f06c5b100dd7b9.png)

新文件...新类...

![新课...](../Images/ba2d64809a57f117955fcc83d4f742ef.png)

确保包输入为空。

![写代码...](../Images/c6313eac31b4f862ccb2461ab4ff664f.png)

编写导入...

你去吧。

我不太确定为什么你必须这样做......但这是我发现解决问题的唯一方法。

# javascript - 如何管理和处理谷歌地图标记

> ID：13187394
> 
> 赞同：1
> 
> 时间：2012-11-02T00:08:55.933
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试使用谷歌地图和 js 解决一个难题。我从未使用过谷歌地图，而且我对 JS 的了解有限。

我的主要问题是：`How do I Create multiple independent markers on google map, store them into some sort of data structure and then delete particular markers when I need it?`

例如，每个标记都有自己的 id 号，我得到它的 lat 和 lon，然后我使用这个函数将它添加到地图：

```
function createMarkers(geocoder, map, name, latitude, longitude, ib, image) {                
//Setting the onclick marker function
var onMarkerClick = function() {
    var marker = this;
    var latLng = marker.getPosition();
    ib.setContent(name);
    ib.open(map, marker); 
};

google.maps.event.addListener(map, 'click', function() {
    ib.close();
});

//In array lat long is saved as an string, so need to convert it into int.
var lat = parseFloat(latitude);
var lng = parseFloat(longitude);

var marker = new google.maps.Marker({
    map: map,
    icon: image,
    position: new google.maps.LatLng(lat, lng),
    title: name
});

//Adding the marker.
google.maps.event.addListener(marker, 'click', onMarkerClick);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:37:17.443

根据 Google Maps API V3，标记实例具有 setMap 方法。它“在指定的地图或全景图上渲染标记。如果地图设置为空，标记将被删除。” 从[Google Maps API V3 文档中提取](https://developers.google.com/maps/documentation/javascript/3.exp/reference#Marker)

像这样的东西

```
marker.setMap(null); 
```

另一方面，如果您想删除特定标记，正如您所说，您将不得不在某些数据结构中保存标记实例，以便能够访问特定标记。由于您有一个 id，考虑到该标记的 id 是唯一的，您可以使用哈希。类似的东西。

```
// this variable must be global and accesible from your createMarkers method
var all_markers = {};

function createMarkers(geocoder, map, name, latitude, longitude, id, image) {   

//........

var marker = new google.maps.Marker({
    map: map,
    icon: image,
    position: new google.maps.LatLng(lat, lng),
    title: name
});

all_markers[id] = marker;

//.....................

}

function removeMarker(id) {
  all_markers[id].setMap(null);
  delete all_markers[id];
} 
```

# jquery - 使用 WYSIHTML5 和 jQuery 将文本附加到文本区域

> ID：13187397
> 
> 赞同：3
> 
> 时间：2012-11-02T00:09:17.133
> 
> 标签：jquery, wysihtml5

我正在使用最新 (0.3.0) 版本的 WSYIHTML5 作为留言板。该板的功能之一是报价发布选项。我一直在试图弄清楚如何将引号附加到文本区域。

我有以下 jQuery 作为测试

```
$('.quote').click(function(){
  $('textarea').append('test this');
  alert($('textarea').text());
}); 
```

警报显示文本已附加到隐藏的文本区域，但它不会在 WYSIHTML5 视图的 iframe 中更新。

奇怪的是，如果我在初始化 WYSIHTML5 后直接附加文本，它会很好地附加。

关于让它发挥作用的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-02T02:43:33.420

所以为了更新 iframe 并让它用 HTML 格式化任何文本，我做了以下..

```
var value = editor.getValue();
var text = '<b>some text</b>;'
editor.setValue(value + text, true); 
```

这是假设 WYSIHTML5 在变量“编辑器”下实例化。它会附加引号，并正确格式化文本。布尔值是如果您希望该值通过 WYSIHTML5 解析器规则运行。

如果有人知道更好的方法，我会全力以赴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-20T17:15:35.623

```
$('iframe').contents().find('.wysihtml5-editor').html('your new content  here'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-19T04:18:46.150

对于 bootstrap-wysihtml5 使用以下函数：

```
<script>

  $(function () {
    // Replace the <textarea id="editor1"> with a CKEditor
    // instance, using default configuration.
  //  CKEDITOR.replace('editor1');
    //bootstrap WYSIHTML5 - text editor
    $(".textarea").wysihtml5();

  });

function injectString(str){
   var sel=frames[0].getSelection();
   var nd=sel.anchorNode;
   var txt=nd.data+'';
   var pos=sel.anchorOffset||0;
   sel.anchorNode.data=txt.slice(0,pos)+str+txt.slice(pos);
 }</script> 
```

像这样使用

```
<button id="name" data-wysihtml5-command="foreFrac" onclick="injectString('{name}')" type="button" class="btn btn-block btn-success btn-lg">Name </button> 
```

# python - 使用 Django FileTransfers 下载文件时遇到问题

> ID：13187401
> 
> 赞同：0
> 
> 时间：2012-11-02T00:09:30.293
> 
> 标签：python, django, django-templates, django-views, download

我正在通过我的网站的管理部分上传一个文件，我希望能够通过我的网站公开下载该文件。我知道我上传的文件已成功上传，因为我可以在 App Engine Blob 存储中查看它。我无法找出以下代码不起作用的地方：

我的模型的相关部分：

```
class CalendarEvent (models.Model):
    file = models.FileField(upload_to='uploads/%Y/%m/%d/%H/%M/%S/') 
```

在我的 views.py 文件中，相关代码是：

```
def calendar(request):
    events = CalendarEvent.objects.exclude(start__lt=datetime.datetime.now()).order_by('start')
    return render_to_response('home/calendar.html',{'events': events},context_instance=RequestContext(request))

def download_handler(request, pk):
    upload = get_object_or_404(CalendarEvent, pk=pk)
    return serve_file(request, upload.file, save_as=True) 
```

在我的模板中，相关代码是：

```
{% for e in events %}
    {% url Calendar.views.download_handler pk=e.pk as fallback_url %}
    <a href="{% firstof e.file|public_download_url fallback_url %}">Download</a>
{% endfor %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:42:31.857

您的 download_handler 的视图名称应该是`<appname>.views.download_handler`. 您可能没有一个名为“e”的应用程序，其中没有适当的视图。

# c++ - 在 tinyxml2 中添加文本

> ID：13187402
> 
> 赞同：5
> 
> 时间：2012-11-02T00:09:31.433
> 
> 标签：c++, xml, tinyxml2

我正在尝试使用 TinyXML2 创建一个 XML 文件。虽然有很多关于加载的示例和教程，但关于保存的内容似乎很少。

我基本上想结束：

```
<node>text</node> 
```

我知道我可以通过添加元素来获得“节点”部分，但是如何设置文本部分？元素有，`GetText`但我找不到`SetText`。还有一个`XMLText`类，但是没有设置文本的方法！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T00:15:01.907

我在 OS X 10.6 上使用 G++ 4.2.1 构建，并且运行良好。输出是`<Version>1.0.0</Version>`。

```
#include "tinyxml2.h"

using namespace tinyxml2;

int main(int argc, char* argv[])
{
   tinyxml2::XMLDocument doc;
   tinyxml2::XMLElement* versionNode = doc.NewElement("Version");
   tinyxml2::XMLText* versionText = doc.NewText("1.0.0");

   versionNode->InsertEndChild(versionText);
   doc.InsertEndChild(versionNode);

   XMLPrinter printer;
   doc.Print();

   return 0;
} 
```

# mysql - MySQL/InnoDB：最好有两个非唯一索引列或将它们组合在唯一主键中？

> ID：13187403
> 
> 赞同：0
> 
> 时间：2012-11-02T00:09:36.493
> 
> 标签：mysql, innodb, composite-primary-key, database-indexes

我将 MySQL 与 InnoDB 一起使用。

就语义而言，我不需要主键，那么主键（或者更确切地说，唯一索引）是否比非唯一索引更快查询？

我有两列适合索引但不唯一。但是，两列的组合始终是唯一的。这些列也是非空的。

将两个非唯一列设置为索引，还是在两列的组合上创建一个主键更好？

访问模式通常会修改两行或四行，其中第一列是给定值（第二列将不同，正如我提到的每个组合都是唯一的）。

例如， col1 和 col2 就像

1 1
1 2
1 3
1 5
2 1
2 2
2 3
2 5
3 1
3 2
3 3

一个示例是一次更改行 (1, 2) 和 (1, 3)

一个后续问题是关于数据类型的。col1 适合 smallint， col2 适合 tinyint。但是，我不确定在组合成单个索引时使用小于 int 类型和不同类型的性能影响是什么。该手册说，当用于主键时，多个列被连接起来。使用相同的类型smallint会更好吗？甚至使用整数？在内存访问方面，不对齐，全字访问最快？这对这里有影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:30:00.650

无论你是否使用它，InnoDB 总是有一个主键。InnoDB 使用聚集索引来存储数据，这基本上意味着主键和数据在同一个地方。如果您没有定义合适的索引，它会创建一个内部索引。这也意味着主键是“免费的”；它不需要任何额外的空间，因为数据存储在索引中。如果您总是通过使用两列来找到要更新的行，那么您绝对应该创建一个复合主索引。即使您不是每次都使用两列来过滤数据，您也可能会从复合主索引中受益。

至于数据类型，我会让两者都尽可能小。我不确定如何在内存中处理索引的具体细节，但由于内存访问差异，您可能无法测量任何显着差异，并且较小的索引大小不会受到伤害。

# algorithm - 树中最长路径的线性时间算法

> ID：13187404
> 
> 赞同：4
> 
> 时间：2012-11-02T00:09:37.097
> 
> 标签：algorithm, graph-theory

我收到了一个让我难过的作业问题。我可能只是想得太用力了...问题如下。

*给出一个线性时间算法来确定无环无向图（即树）中最长的无权路径。*

我的第一个意图是使用 DFS。但似乎 DFS 只会给我从我开始的节点到另一个顶点的最长路径；但是，问题要求树中最长的路径......不是从我开始的节点开始的最长路径。有人可以让我直截了当吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T00:28:33.670

一种这样的方法是选择任何节点 A，并在线性时间内计算到所有其他节点的距离。假设 B 离 A 最远。在步骤 2 中，找到离 B 最远的节点。

令 d(P,Q) 表示从 P 到 Q 的距离。请注意，如果 E 是 A、B、C 的最低共同祖先，则 d(A,B) = d(A,E)+d(E,B )~~并且还要注意 d(E,B) ≥ d(E,C)。~~

*编辑1：*算法或方法——找到离任何A最远的B；找到离B最远的C；声称 d(B,C) 在图中的所有顶点对上是最大的——这似乎是合理的，但以上并不能证明这一点。

一方面，不必是 d(E,B) ≥ d(E,C)，另一方面，仅此不足以确定 d(B,C) ≥ d(F,G) 其中F, G 是树中的任意节点。...

# jsf-2 - java.lang.IllegalAccessError：试图访问类 com.sun.faces.context.ApplicationMap

> ID：13187405
> 
> 赞同：0
> 
> 时间：2012-11-02T00:09:41.783
> 
> 标签：jsf-2, jar, tomcat7

我有一个 jsf 应用程序，可以在 eclipse 上使用 tomcat 7 正常工作。当我打包它（使用 mvn 包..）并将 .war 文件放在 tomcat webapps 目录中部署它时，问题就发生了。

在我得到的tomcat控制台中：

```
SEVERE: Error listenerStart
Nov 2, 2012 12:38:09 AM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/jsf_prime_ldap] startup failed due to previous errors
Nov 2, 2012 12:38:09 AM org.apache.catalina.loader.WebappClassLoader checkThread
LocalMapForLeaks
SEVERE: The web application [/jsf_prime_ldap] created a ThreadLocal with key of
type [com.sun.faces.config.ConfigureListener$1] (value [com.sun.faces.config.Con
figureListener$1@6972f1]) and a value of type [com.sun.faces.config.ConfigureLis
tener.ServletContextAdapter] (value [com.sun.faces.config.ConfigureListener$Serv
letContextAdapter@18fee4f]) but failed to remove it when the web application was
stopped. Threads are going to be renewed over time to try and avoid a probable
memory leak. 
```

有关此问题的更多详细信息，请在本地主机的 tomcat 日志文件中：

```
 SEVERE: Exception sending context initialized event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.IllegalAccessError: tried to access class com.sun.faces.context.ApplicationMap from class com.sun.faces.config.InitFacesContext$ServletContextAdapter
    at com.sun.faces.config.InitFacesContext$ServletContextAdapter.getApplicationMap(InitFacesContext.java:331)
    at javax.faces.FactoryFinder$FactoryManagerCacheKey.<init>(FactoryFinder.java:850)
    at javax.faces.FactoryFinder$FactoryManagerCache.getApplicationFactoryManager(FactoryFinder.java:719)
    at javax.faces.FactoryFinder$FactoryManagerCache.access$100(FactoryFinder.java:691)
    at javax.faces.FactoryFinder.setFactory(FactoryFinder.java:373)
    at com.sun.faces.config.ConfigureListener.configure(ConfigureListener.java:666)
    at com.sun.faces.config.ConfigureListener.configure(ConfigureListener.java:417)
    at com.sun.faces.config.ConfigureListener.contextInitialized(ConfigureListener.java:348)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4791)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5285)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619)
Nov 2, 2012 12:38:09 AM org.apache.catalina.core.StandardContext listenerStop
SEVERE: Exception sending context destroyed event to listener instance of class com.sun.faces.config.ConfigureListener
java.lang.IllegalAccessError: com/sun/faces/context/ApplicationMap
    at com.sun.faces.config.InitFacesContext$ServletContextAdapter.getApplicationMap(InitFacesContext.java:331)
    at javax.faces.FactoryFinder$FactoryManagerCacheKey.<init>(FactoryFinder.java:850)
    at javax.faces.FactoryFinder$FactoryManagerCache.removeApplicationFactoryManager(FactoryFinder.java:810)
    at javax.faces.FactoryFinder.releaseFactories(FactoryFinder.java:395)
    at com.sun.faces.config.ConfigureListener.contextDestroyed(ConfigureListener.java:378)
    at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4831)
    at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5478)
    at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1600)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

在 tomcat lib 目录中，我添加了这些罐子：commons-beanutils-1.8.3/commons-collections-3.2.1/commons-digester-1.5/commons-logging-1.1.1/el-impl-2.2/jsf-api -2.1.11/jsf-impl-2.1.11/jsp-api-2.1/jstl-1.2/primefaces-3.4.1

应用程序的 pom 文件：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.jsfprimeldap</groupId>
    <artifactId>jsf_prime_ldap</artifactId>
    <packaging>war</packaging>
    <version>0.0.1-SNAPSHOT</version>
    <name>jsf_prime_ldap Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <repositories>
        <repository>
            <id>prime-repo</id>
            <name>Prime Repo</name>
            <url>http://repository.primefaces.org</url>
        </repository>
    </repositories>

    <dependencies>

        <!-- PrimeFaces -->
        <dependency>
            <groupId>org.primefaces</groupId>
            <artifactId>primefaces</artifactId>
            <version>3.4.1</version>
        </dependency>

        <!-- JSF 2 -->
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-api</artifactId>
            <version>2.1.11</version>
        </dependency>
        <dependency>
            <groupId>com.sun.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>2.1.11</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
        </dependency>

        <!-- EL -->
        <dependency>
        <groupId>org.glassfish.web</groupId>
        <artifactId>el-impl</artifactId>
        <version>2.2</version>
        </dependency>

        <dependency>
            <groupId>javax.faces</groupId>
            <artifactId>jsf-impl</artifactId>
            <version>1.1_02</version>
        </dependency>

        <!-- Tomcat 6 need this <dependency> <groupId>com.sun.el</groupId> <artifactId>el-ri</artifactId> 
            <version>1.0</version> </dependency> -->

    </dependencies>
    <build>
        <finalName>jsf_prime_ldap</finalName>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

和我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>jsf_prime_ldap</display-name>
<welcome-file-list>
  <welcome-file>faces/index.xhtml</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我在谷歌没有发现任何类似的问题。我希望在这里找到解决这个问题的方法。感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:21:02.947

> *在 tomcat lib 目录中，我添加了这些罐子：commons-beanutils-1.8.3/commons-collections-3.2.1/commons-digester-1.5/commons-logging-1.1.1/el-impl-2.2/jsf-api -2.1.11/jsf-impl-2.1.11/jsp-api-2.1/jstl-1.2/primefaces-3.4.1*

撤消此步骤。如果您不确定，请完全重新安装 Tomcat。除非您真正了解自己在做什么，否则永远不要触摸它。这是整个问题的原因。类路径变得一团糟，重复的 JAR/类相互冲突。

Webapp 特定的 JAR 不属于其中。它们属于`/WEB-INF/lib`，*除了*EL 和 JSP JAR；Tomcat 作为一个 JSP/Servlet/EL 容器*已经*有它自己的实现。您根本不应该将不同容器 make/version 的 JSP/Servlet/EL 库放在类路径中。

从技术上讲，至少 JSF JAR、JSTL JAR 和 PrimeFaces JAR 都应该在`/WEB-INF/lib`. 但是，当您使用 Maven 时，它应该已经注意到这一点。你不需要对此做任何事情。因此，您需要做的就是将 Tomcat 从非法 JAR/类中释放出来。

# java - 将对象返回到 Double 或 double 的通用方法

> ID：13187406
> 
> 赞同：1
> 
> 时间：2012-11-02T00:09:48.897
> 
> 标签：java, generics

我想从一个方法返回 2 种不同类型的类（`List<double[]>`或），如下面的伪代码所示。`List<Double[]`如何做到这一点？

编辑的代码和注释：Eclipse 甚至不允许编译，因为它要求更改返回或数据类型。我了解 YserieScaledCasted 必须手动进行投射。

```
protected List<E[]> getYserieRescaledList(Class<E> c) {

    if (Double[].class == c)
        return this.YserieScaled;
    else if (double[].class == c)
        return this.YserieScaledCasted;

} 
```

EDIT2：我发现我的问题的正确方法是重载[这里](https://stackoverflow.com/a/2669413/461212)描述的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:43:18.010

你意识到你正在返回一个数组列表，对吧？:-)

简短的回答：

*   即使您正在传入`Class<E>`，您也不能在泛型类型上使用 instanceof 运算符，因此您不能执行上面概述的 if 语句

*   以下是非法的，并且不会在两个 instanceof 运算符中的每一个上编译：

> ```
> class trash {
>     protected <T> List<T[]> getYserieRescaledList(Class<T> cl) {
>        List<T[]> result = null;
>        if (cl instanceof Class<Double>) {
>                result = ...;
>        } else if (cl instanceof Class<double>) {
>                result = ...;
>        }
>        return result;
>     }
> } 
> ```

*   这样做的原因是泛型是仅编译时的构造。所有实例化的泛型类都转换为非泛型类，插入类型并执行类型转换等。询问泛型类是否在运行时用特定类型实例化是没有意义的——泛型类已被替换为非泛型类。泛型类

*   相反，删除 if 语句并简单地使用实例化类型来声明变量和数组，然后使用您的算法填充它们并返回结果：

> ```
> class treasure {
>     protected <T> List<T[]> getYserieRescaledList(Class<T> cl) {
>        List<T[]> result = null;
>        // apply general algorithm here to populate the array
>        // will work identically whether instantiated with Double or double
>        return result;
>     }
> } 
> ```

更长的答案：

泛型类应该代表可以应用于各种特定实例化类型的通用处理的“模板逻辑”。

很好的例子是 java Collections、持久性查询框架（例如 JPA Criteria API）、用于不同类型投资的财务计算器，甚至是具有标准服务“容器”基础架构逻辑的 SOA 服务模板。

在您的情况下，使用伪方法重载（即名称略有不同的两个方法）可能更简单：

```
protected List<Double[]> getYserieRescaledList() {
    return this.Y;
}

protected List<double[]> getYserieRescaledList2() {
    return this.YCasted;
} 
```

或者甚至更好，只是坚持 double[] 作为唯一的情况。当您将值提取到其他变量/方法参数中时，编译器将根据需要透明地进行从 double 到 Double 的自动装箱转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:55:35.957

这里发生了一些有趣的事情。所以你`List<double[]>`是一个包含原始s的`List<Array>`对象。`Array``double`

我敢说泛型在这里不是正确的解决方案。

我认为您最好的选择是使用 Google Lists 库。

像这样的东西：

```
protected List<Double[]> getYserieRescaledList() {
   return this.YseriesScaled;
} 
```

然后，无论您拨打什么电话，您`getYseriesRescaledList()`都可以执行以下操作来获得`List<double[]>`：

Lists.transform(getYseriesRescaledList(), toPrimitiveDouble());

这将使用下面的函数（来自 Google Guava）在一行代码中构造一个 List 对象：

```
private Function<Double[], double[]> toPrimitiveDouble(){
    return new Function<Double[], double[]>() {
        @Override
        public double[] apply( Double[] doubles) {
            double[] doubleArray = new double[doubles.length];

            int i = 0;
            for (Double doubleObject : doubles){
                doubleArray[i] = doubleObject.doubleValue();
                ++i;
            }

            return doubleArray;
        }
    };
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:13:32.797

只需使用`Double[].class`和`double[].class`。请注意，您不能将 a`Double[]`转换为 a `double[]`，反之亦然，您必须手动复制它。因此，通过扩展，您不能`List<Double[]>`转换为`List<double[]>`任何一个。**编辑：**尽管乍一看，这似乎是您要纠正的限制。

# c++ - c++编程迭代和递归

> ID：13187409
> 
> 赞同：1
> 
> 时间：2012-11-02T00:10:12.190
> 
> 标签：c++, algorithm, recursion, iteration

我正在寻找一些关于家庭作业的快速提示。我们遇到了一些问题，必须编写两个快速程序来说明如何用迭代和递归中的一个来解决这些问题。我敢肯定这比我想象的要容易，但是我很容易对这两者感到困惑。我不希望任何人为我完全解决问题，我不会学到任何东西！但是，如果你能看看我到目前为止所拥有的，让我知道我是否朝着正确的方向前进。此外，代码不需要编译，我们的教授希望我们对迭代与递归的区别有一个大致的了解。

问题：检查一个字符串是否为回文。

我的解决方案-我认为这是迭代解决方案：

```
bool iterative_palindrome (const string& str) {
string line, result;
stack <char> stack_input;

//user enters string, program takes it
cout << "Enter string: " << endl;
while (getline (cin, line) && (line != "")) {

    //push string into stack
    for (size_t i = 0; i < line.size(); i++) {
        stack_input.push(line[i]);

        //create reverse of original string
        while (!stack_input.empty()) {
            result += stack_input.top();
            stack_input.pop();
            return result;
        }
        //check for palindrome, empty string
        if (line == result || line = "0" || line.empty()) {
            return true;
            cout << line << " is a palindrome!" << endl;
        } else {
            return false;
            cout << line << " is NOT a palindrome." << endl;
            cout << "Enter new string: " << endl;
        }
     }
  }
} 
```

我提醒大家，我对这个东西很陌生。我已经读过一些东西，但我仍然很难理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:30:24.723

这是一般的想法：

迭代：初始化两个指针，一个指针指向字符串的开始和结束。

1.  比较指出的字符，如果不同 -> 不是回文。
2.  增大起始指针并减小结束指针。
3.  重复直到开始指针 >= 结束指针。

递归（在这种情况下比迭代更困难）：

结束条件：长度为零或一的字符串是回文。

如果第一个和最后一个字符相同并且没有第一个和最后一个字符的字符串是回文，则字符串是回文。

您可以通过传递指向字符串中第一个和最后一个字符的指针来更有效地实现此递归算法，而不是在递归之间复制字符串。

希望这可以帮助 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:26:50.880

我认为编写代码是解释这两种方法的最佳方式。这段代码可以理解吗？

```
bool iterative_palindrome(const string& str) {
    int size = str.size();

    for (int i=0; i<str.size()/2; i++) {
        if (str[i] != str[size-i-1])
            return false;
    }

    return true;
} 
```

你这样称呼它`recursive_palindrome(str, 0)`。

```
bool recursive_palindrome(const string& str, int index) {
    int size = str.size();

    if (index >= size/2)
        return true;

    if (str[index] == str[size-index-1])
        recursive_palindrome(str, index+1);
    else
        return false;
} 
```

# mysql - 带有左连接和日期函数的 MySQL 查询的 Grails 标准或 HQL

> ID：13187412
> 
> 赞同：0
> 
> 时间：2012-11-02T00:10:29.937
> 
> 标签：mysql, grails, hql

我有一个 MySQL 数据库，其中存储了某些商品的销售情况。我想比较过去两天的销售额，例如过去 10 天和过去 9 天。为此，我制定了 MySQL 查询：

```
select s1.sales - s2.sales from ProductSales as s1
left join ProductSales as s2 on s2.date >= DATE(DATE_ADD(Now(), INTERVAL '-10' DAY)) and s2.date <= DATE(DATE_ADD(Now(), INTERVAL '-9' DAY)) and s2.product_id = s1.product_id
where s1.date >= DATE(DATE_ADD(Now(), INTERVAL '-9' DAY)); 
```

我想在 Grails 应用程序中以编程方式执行此操作，并且需要将此查询转换为条件或 HQL 查询。我该怎么做？

**更新**：我试过这样：

```
def date1 = new Date() - 2
def date2 = new Date() - 1
def sales = ProductSales.executeQuery( """
    select s1.sales - s2.sales from ProductSales s1
    left join ProductSales s2
    where s1.date >= :date2
    and s2.date >= :date1 and s2.date < :date2 and s2.product_id = s1.product_id""",
[ date1: date1, date2: date2 ] ) 
```

不幸的是，这给了我：

```
ERROR hql.ast.ErrorCounter -  Path expected for join!
ERROR hql.ast.ErrorCounter -  Invalid path: 's2.sales'
ERROR hql.ast.ErrorCounter -  right-hand operand of a binary operator was null
ERROR hql.ast.ErrorCounter -  Invalid path: 's2.date'
ERROR hql.ast.ErrorCounter - <AST>:0:0: unexpected end of subtree
ERROR hql.ast.ErrorCounter -  left-hand operand of a binary operator was null
ERROR hql.ast.ErrorCounter -  Invalid path: 's2.date'
ERROR hql.ast.ErrorCounter - <AST>:0:0: unexpected end of subtree
ERROR hql.ast.ErrorCounter -  left-hand operand of a binary operator was null
ERROR hql.ast.ErrorCounter -  Invalid path: 's2.product_id'
ERROR hql.ast.ErrorCounter - <AST>:0:0: unexpected end of subtree
ERROR hql.ast.ErrorCounter -  left-hand operand of a binary operator was null
ERROR logging.impl.SLF4JLog - QuerySyntaxException occurred when processing request: [GET] /app/dashboard
Path expected for join! 
```

**更新 2**：由于我无法回答我自己的问题，我在这里添加我的回复：

显然这可以正常工作：

```
def now = new Date()
def date1 = now - 2
def date2 = now - 1
def sales = ProductSales.executeQuery( """
    select s1.owner, s1.sales - s2.sales from ProductSales s1, ProductSales s2
    where s1.date >= :date2 and s1.date < :now 
    and s2.date >= :date1 and s2.date < :date2 and s2.product = s1.product""",
    [ date1: date1, date2: date2, now: now ]
    ) 
```

不过，我不完全确定 a`left join`和 a之间有什么区别`select from T1, T2`。`now`除此之外，我为最近的条目添加了一个上限 ( ) 并将其更改`product_id`为`product`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T13:51:11.070

显然这可以正常工作：

```
def now = new Date()
def date1 = now - 2
def date2 = now - 1
def sales = ProductSales.executeQuery( """
    select s1.owner, s1.sales - s2.sales from ProductSales s1, ProductSales s2
    where s1.date >= :date2 and s1.date < :now 
    and s2.date >= :date1 and s2.date < :date2 and s2.product = s1.product""",
    [ date1: date1, date2: date2, now: now ]
    ) 
```

不过，我不完全确定 a`left join`和 a之间有什么区别`select from T1, T2`。`now`除此之外，我为最近的条目添加了一个上限 ( ) 并将其更改`product_id`为`product`.

# php - PhP - 如何收听表单按钮

> ID：13187413
> 
> 赞同：0
> 
> 时间：2012-11-02T00:10:31.370
> 
> 标签：php

我想听这个名为 submitDetails 的按钮，这是我的注册按钮。基本上我想将表单中的信息发送到 mysql 但那部分现在应该没问题我希望我的按钮可以收听电话。当被调用时，它应该收集我认为我在我的代码行中完成的所有信息，但我不确定我是否正确地完成了那部分（我使用了 isset($_GET..)而不是 $_POST ?? 认为我需要在 POST 之前获取它们 .. 还是我错了？

我还没有玩过PhP，而且我之前没有制作按钮来听电话然后采取行动，所以我不确定..我阅读的另一种方式是ajax，但它非常令人困惑，我不能让我头脑清醒，它只能通过将您发送到另一个 php 页面来工作，对吗？或者我可以让它在当前的 PhP 页面中向 mysql 发送数据吗？

这是代码行，请告诉我我的按钮如何收听电话然后放

```
 // here you do whatever you want when button is pressed 
```

好的，这里是代码：

```
<style type="text/css">
body {
background-image: url(http://i45.tinypic.com/2iw61x5.png);
background-color: #333;
}
</style>
<?php

    echo "<form><font color='white'><P ALIGN='right'>• Hello guest, please <a href='loginPage.php'><font color='white'>login</font></a> / <a href='registerPage.php'><font color='white'>register</font></a>.</P></font>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";  // starting from here
    echo "<tr><td>

            <u><P ALIGN='left'><b><font size='5' color='black'>Register_______________________________________________________________</font></b></P></u>   
            </td></tr>";
    echo "</form></table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>"; 
    echo "<tr><td>
            <TR>
            <TD><b><Username: </b></TD>
            <TD><input type='text' name='Username' id='Username' size='121.5' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";
    echo "<tr><td>
            <TR>
            <TD><b>Password: <b></TD></P>
            <TD><input type='password' name='Password' id='Password' size='122' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";
    echo "<tr><td>
            <TR>
            <TD><b>Re-Password: <b></TD></P>
            <TD><input type='password' name='Re-Password' id='Re-Password' size='118' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";
    echo "<tr><td>
            <TR>
            <TD><b>Email: <b></TD></P>
            <TD><input type='password' name='EmailAddress' id='EmailAddress' size='126' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<form method='post'><divstyle='float:center'><P ALIGN='center'><input type='submit' id='submitDetails' name='submitDetails' value='Register'></P></div></form>";

    $username = isset($_GET['Username']);
    $password = isset($_GET['Password']);
    $repassword = isset($_GET['Re-Password']);
    $email = isset($_GET['EmailAddress']);

    if(!$email == "" && (!strstr($email,"@") || !strstr($email,".")))
    {
        echo "<h2>Please enter valid e-mail.</h2>\n";
        die ("Thank you.");
    }

    if(empty($username)  || empty($password) || empty($repassword) || empty($email))
    {
        echo "<h2>Please fill in all fields, click the back button to retry</h2>\n";
        die ("Thank you.");
    }

    $message = "Hello $username" .", We have successfuly recieved all your details and stored in our database, please proceed by logging in the website if havn't already.";
    $subject = "Media Registration";

    mail("hidden",$subject,$message,$email);

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:18:29.207

```
<style type="text/css">
body {
background-image: url(http://i45.tinypic.com/2iw61x5.png);
background-color: #333;
}
</style>
<?php

    echo "<form method='post' action='?'><font color='white'><P ALIGN='right'>• Hello guest, please <a href='loginPage.php'><font color='white'>login</font></a> / <a href='registerPage.php'><font color='white'>register</font></a>.</P></font>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";  // starting from here
    echo "<tr><td>

            <u><P ALIGN='left'><b><font size='5' color='black'>Register_______________________________________________________________</font></b></P></u>   
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>"; 
    echo "<tr><td>
            <TR>
            <TD><b><Username: </b></TD>
            <TD><input type='text' name='Username' id='Username' size='121.5' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";
    echo "<tr><td>
            <TR>
            <TD><b>Password: <b></TD></P>
            <TD><input type='password' name='Password' id='Password' size='122' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";
    echo "<tr><td>
            <TR>
            <TD><b>Re-Password: <b></TD></P>
            <TD><input type='password' name='Re-Password' id='Re-Password' size='118' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<table width='850' cellpadding='1' cellspacing='1' border='0' align='center' bgcolor='#ECF7F7'>";
    echo "<tr><td>
            <TR>
            <TD><b>Email: <b></TD></P>
            <TD><input type='password' name='EmailAddress' id='EmailAddress' size='126' /></TD>
            </TR>
            </td></tr>";
    echo "</table>";
    echo "<div style='float:center'><P ALIGN='center'><input type='submit' id='submitDetails' name='submitDetails' value='Register'></P></div></form>";

if(isset($_POST['submitDetails']))
{
    $username = $_POST['Username'];
    $password = $_POST['Password'];
    $repassword = $_POST['Re-Password'];
    $email = $_POST['EmailAddress'];

    if(!$email == "" && (!strstr($email,"@") || !strstr($email,".")))
    {
        echo "<h2>Please enter valid e-mail.</h2>\n";
        die ("Thank you.");
    }

    if(empty($username)  || empty($password) || empty($repassword) || empty($email))
    {
        echo "<h2>Please fill in all fields, click the back button to retry</h2>\n";
        die ("Thank you.");
    }

    $message = "Hello $username" .", We have successfuly recieved all your details and stored in our database, please proceed by logging in the website if havn't already.";
    $subject = "Media Registration";

    mail("zdamagedz@hotmail.co.uk",$subject,$message,$email);

}

    ?> 
```

I fixed the form tags, I added method="post" and the action="?" in order to post the data to the same page, in the "POST" method.

I have also added the `isset($_POST['submitDetails'])` condition, in order to check whether the submit button was clicked or not.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:15:23.303

Ok, in your tag you need to specify the location, where the request and all the form that will be sent. it must be a php file, which can receive this data either from $_GET or $_POST arrays, read them and do whatever you need. use this form tag: create a file called formPost.php in the same location of your current file, open it and write: that might give you a sight where you are now

# r - R grep：有 AND 运算符吗？

> ID：13187414
> 
> 赞同：21
> 
> 时间：2012-11-02T00:10:37.633
> 
> 标签：r, regex

假设我有以下数据框：

```
User.Id    Tags
34234      imageUploaded,people.jpg,more,comma,separated,stuff
34234      imageUploaded
12345      people.jpg 
```

我如何使用 grep （或其他工具）只抓取包含“imageUploaded”和“people”的行？换句话说，我如何创建一个子集，其中仅包含带有字符串“imageUploaded”和“people.jpg”的行，而不管顺序如何。

我试过了：

```
data.people<-data[grep("imageUploaded|people.jpg",results$Tags),]
data.people<-data[grep("imageUploaded?=people.jpg",results$Tags),] 
```

有 AND 运算符吗？或者也许是另一种获得预期结果的方法？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-02T00:17:28.020

感谢[这个答案](https://stackoverflow.com/questions/3041320/regex-and-operator)，这个正则表达式似乎有效。您想使用`grepl()`which 返回一个逻辑来索引到您的数据对象。我不会声称完全理解正则表达式的内部工作原理，但无论如何：

```
x <- c("imageUploaded,people.jpg,more,comma,separated,stuff", "imageUploaded", "people.jpg")

grepl("(?=.*imageUploaded)(?=.*people\\.jpg)", x, perl = TRUE)
#-----
[1]  TRUE FALSE FALSE 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-02T01:36:10.043

我喜欢@Chase 的回答，这对我来说很有意义，但是使用人们不完全理解的结构可能有点危险。

这个答案旨在让任何想使用@thelatemail 更直接的方法的人放心，它也同样有效，并且在速度方面完全具有竞争力。这当然是我在这种情况下会使用的。（同样令人放心的是，更复杂的 Perl 兼容正则表达式因其强大的功能和易于扩展而无需支付性能成本。）

```
library(rbenchmark)
x <- paste0(sample(letters, 1e6, replace=T), ## A longer vector of
            sample(letters, 1e6, replace=T)) ## possible matches

## Both methods give identical results
tlm <- grepl("a", x, fixed=TRUE) & grepl("b", x, fixed=TRUE)
pat <- "(?=.*a)(?=.*b)"
Chase <- grepl(pat, x, perl=TRUE)
identical(tlm, Chase)
# [1] TRUE    

## Both methods are similarly fast
benchmark(
    tlm = grepl("a", x, fixed=TRUE) & grepl("b", x, fixed=TRUE),
    Chase = grepl(pat, x, perl=TRUE))
#          test replications elapsed relative user.self sys.self
# 2       Chase          100    9.89    1.105      9.80     0.10
# 1 thelatemail          100    8.95    1.000      8.47     0.48 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-02T00:50:45.087

为了可读性，你可以这样做：

```
x <- c(
       "imageUploaded,people.jpg,more,comma,separated,stuff",
       "imageUploaded",
       "people.jpg"
       )

xmatches <- intersect(
                      grep("imageUploaded",x,fixed=TRUE),
                      grep("people.jpg",x,fixed=TRUE)
                     )
x[xmatches]
[1] "imageUploaded,people.jpg,more,comma,separated,stuff" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-06T00:14:36.723

下面是使用 hadley 的 grep 的替代方法`stringr::str_detect()`。这避免了使用`perl=true`@jan-stanstrup。此外，`dplyr::filter()`它将返回数据帧本身内的行，因此您永远不需要离开 df.

```
library(stringr)
libary(dplyr)
 x <- data.frame(User.Id =c(34234,34234,12345), 
                 Tags=c("imageUploaded,people.jpg,more,comma,separated,stuff",
                        "imageUploaded",
                        "people.jpg"))

 data.people <- x %>% filter(str_detect(Tags,"(?=.*imageUploaded)(?=.*people\\.jpg)"))
 data.people

# returns
#  User.Id                                                Tags
# 1   34234 imageUploaded,people.jpg,more,comma,separated,stuff 
```

如果“people.jpg”总是跟随“imageUploaded”，这更简单并且有效

```
str_extract(x,"imageUploaded.*people\\.jpg") 
```

# r - quantmod ... 无法获取当天的 OHLCV 符号数据

> ID：13187415
> 
> 赞同：3
> 
> 时间：2012-11-02T00:10:47.313
> 
> 标签：r, quantmod

`getSymbols()`我无法使用 Quantmod调用从雅虎获取当天的 OHLCV 数据。数据存在于yahoo 上，也可以在我的图表平台中看到今天的OHLCV 数据。作为解决方法，我使用`getQuote(..)`call 从 yahoo 获得了今天的 EOD 报价。但是当我尝试通过 rbind 将其附加到下载的符号数据时，数据对象会被填充为 NULL。

我很感激有关如何将今天的报价附加到下载的历史交易品种数据或任何 R API 的建议，我可以在市场交易时间后调用以获取包括今天在内的交易品种 EOD（OHLCV 数据）。谢谢。

```
library(quantmod)
library(blotter) 
library(PerformanceAnalytics)

getSymbols("SPY")
spy.quote = getQuote("SPY", what = yahooQuote.EOD)

> tail(SPY, n=3)
           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
2012-10-25   142.02   142.28  140.57    141.43  134457400       141.43
2012-10-26   141.30   141.84  140.39    141.35  146023500       141.35
2012-10-31   141.85   142.03  140.68    141.35  103341300       141.35

> spy.quote
             Trade Time   Open   High    Low  Close    Volume
SPY 2012-11-01 04:00:00 141.65 143.01 141.52 142.83 100990760

> SPY = rbind(SPY, spy.quote)
> tail(SPY, n=3)
          SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
          NULL     NULL     NULL    NULL      NULL       NULL               
          NULL     NULL     NULL    NULL      NULL       NULL        
spy.quote NULL     NULL     NULL    NULL      NULL       NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:16:43.367

您需要将报价数据从 a 转换`data.frame`为`xts`对象，并为 Adjusted price 添加一列。然后就可以了`rbind`。

```
getSymbols("SPY", src='yahoo', to='2012-10-31')
spy.quote = getQuote("SPY", what = yahooQuote.EOD)

# convert to xts
xts.quote <- xts(spy.quote[, -1], as.Date(spy.quote[, 1])) # use Date for indexClass
xts.quote$Adjusted <- xts.quote[, 'Close'] # add an Adjusted column

tail(rbind(SPY, xts.quote), 3)
           SPY.Open SPY.High SPY.Low SPY.Close SPY.Volume SPY.Adjusted
2012-10-26   141.30   141.84  140.39    141.35  146023500       141.35
2012-10-31   141.85   142.03  140.68    141.35  103341300       141.35
2012-11-01   141.65   143.01  141.52    142.83  100995568       142.83 
```

# ruby-on-rails - mongoid 和 devise 给出了不寻常的错误

> ID：13187416
> 
> 赞同：0
> 
> 时间：2012-11-02T00:10:58.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, mongoid, ruby-on-rails-3.2

带有设计的 Mongoid 似乎为我抛出了这个错误，无论何时使用设计。

```
undefined method `-' for nil:NilClass 
```

这是堆栈跟踪

```
moped (1.2.7) lib/moped/cluster.rb:172:in `block in refresh'
moped (1.2.7) lib/moped/cluster.rb:179:in `each'
moped (1.2.7) lib/moped/cluster.rb:179:in `refresh'
moped (1.2.7) lib/moped/cluster.rb:132:in `nodes'
moped (1.2.7) lib/moped/cluster.rb:240:in `with_secondary'
moped (1.2.7) lib/moped/session/context.rb:104:in `with_node'
moped (1.2.7) lib/moped/session/context.rb:43:in `query'
moped (1.2.7) lib/moped/query.rb:112:in `first'
mongoid (3.0.10) lib/mongoid/contextual/mongo.rb:201:in `first'
mongoid (3.0.10) lib/mongoid/contextual.rb:18:in `first'
orm_adapter (0.4.0) lib/orm_adapter/adapters/mongoid.rb:22:in `get'
devise (2.1.2) lib/devise/models/authenticatable.rb:183:in `serialize_from_session'
devise (2.1.2) lib/devise/rails/warden_compat.rb:29:in `deserialize'
warden (1.2.1) lib/warden/session_serializer.rb:35:in `fetch'
warden (1.2.1) lib/warden/proxy.rb:212:in `user'
warden (1.2.1) lib/warden/proxy.rb:318:in `_perform_authentication'
warden (1.2.1) lib/warden/proxy.rb:127:in `authenticate!'
devise (2.1.2) lib/devise/controllers/helpers.rb:48:in `authenticate_user!'
activesupport (3.2.8) lib/active_support/callbacks.rb:418:in `_run__532752988157179990__process_action__39271927218028622__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.8) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.8) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.8) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.8) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
actionpack (3.2.8) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.8) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.8) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.8) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.8) lib/action_dispatch/routing/route_set.rb:600:in `call'
mongoid (3.0.10) lib/rack/mongoid/middleware/identity_map.rb:34:in `call'
warden (1.2.1) lib/warden/manager.rb:35:in `block in call'
warden (1.2.1) lib/warden/manager.rb:34:in `catch'
warden (1.2.1) lib/warden/manager.rb:34:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.1) lib/rack/etag.rb:23:in `call'
rack (1.4.1) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/cookies.rb:339:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `_run__4054107343433525264__call__3237741633973160553__callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.8) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.8) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.8) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.8) lib/rails/engine.rb:479:in `call'
railties (3.2.8) lib/rails/application.rb:223:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
/Users/amit/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
/Users/amit/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
/Users/amit/.rvm/rubies/ruby-1.9.3-p286/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

控制器有一个 before_filter :authenticate_user！对此发表评论，允许页面工作。

这里可能有什么问题？

我已经尝试通过这样做来破坏所有设计安装

```
rails d devise user
rails d devise:views
rails d devise:install 
```

然后重新安装设计，它没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T14:30:07.347

刚刚发现我使用的是 ruby​​ 1.9.2，它至少需要 1.9.3

见[http://mongoid.org/en/mongoid/docs/tips.html](http://mongoid.org/en/mongoid/docs/tips.html)

这已经解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T04:56:30.780

问题是 mongod 没有运行。由于某种原因，而不是抛出无法连接的消息，rails 现在抛出这个。

# sql - 使用 PostgreSQL 更新前 N 个值

> ID：13187419
> 
> 赞同：15
> 
> 时间：2012-11-02T00:11:18.880
> 
> 标签：sql, postgresql, sql-update, sql-order-by, sql-limit

我想更新表中列的前 10 个值。我有三列；`id`,`account`和`accountrank`. 要获得前 10 个值，我可以使用以下内容：

```
SELECT  * FROM accountrecords    
ORDER BY account DESC
LIMIT 10; 
```

我想做的是根据 的大小将 in 的值设置为`accountrank`一系列。这可以在 PostgreSQL 中做到吗？`1 - 10``account`

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-02T00:32:32.507

```
WITH cte AS (
   SELECT id, row_number() OVER (ORDER BY account DESC NULLS LAST) AS rn
   FROM   accountrecords    
   ORDER  BY account DESC NULLS LAST
   LIMIT  10
   )
UPDATE accountrecords a
SET    accountrank = cte.rn
FROM   cte
WHERE  cte.id = a.id; 
```

加入表表达式通常比相关子查询快。它也更短。

使用[窗口函数`row_number()`](https://www.postgresql.org/docs/current/interactive/functions-window.html)可以保证不同的数字。如果您希望具有相同值的行共享相同的数字，请使用`rank()`（或可能）。`dense_rank()``account`

仅当 中可以有`NULL`值时`account`，您才需要附加[`NULLS LAST`](https://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-ORDERBY)降序排序，或者`NULL`值在顶部排序：

*   [PostgreSQL 按日期时间 asc 排序，先为空？](https://stackoverflow.com/questions/9510509/postgresql-sort-by-datetime-asc-null-first/9511492#9511492)

如果可以同时进行写访问，则上述查询会受到**竞争条件**的影响。考虑：

*   [Postgres 中的原子更新 .. SELECT](https://stackoverflow.com/q/11532550/939860)
*   [Postgres 更新……限制 1](https://dba.stackexchange.com/a/69497/3684)

然而，如果是这样的话，硬编码前十名的整个概念将是一种可疑的方法。

使用 CTE 而不是普通的子查询（就像我一开始那样）来执行`LIMIT`可靠的。请参阅上面的链接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T00:19:56.937

当然，您可以在子查询中使用您的 select 语句。生成排名顺序并非易事，但这里至少有一种方法可以做到。我还没有测试过这个，但在我的脑海中：

```
update accountrecords
set accountrank =
    (select count(*) + 1 from accountrecords r where r.account > account)
where id in (select id from accountrecords order by account desc limit 10); 
```

这有一个怪癖，如果两条记录具有相同的值`account`，那么它们将获得相同的排名。您可以认为这是一个功能... :-)

# python - osx上的pycairo安装错误

> ID：13187420
> 
> 赞同：1
> 
> 时间：2012-11-02T00:11:26.363
> 
> 标签：python, macos, pycairo

当我在 osx 上使用 easy_install 安装 pycairo 时，出现如下错误消息：

```
Searching for pycairo
Reading http://pypi.python.org/simple/pycairo/
Reading http://cairographics.org/pycairo
Best match: pycairo 1.10.0
Downloading http://cairographics.org/releases/pycairo-1.10.0.tar.bz2
Processing pycairo-1.10.0.tar.bz2
error: Couldn't find a setup script in /tmp/easy_install-hnheQI/pycairo-1.10.0.tar.bz2 
```

请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:21:44.183

看起来 pycairo 没有设置为`easy_install`能够（或`pip`能够）。

第一个问题是 PyPI 包 pycairo 指向 Python 3.x 版本，而不是 2.x 版本（称为 py2cairo），这意味着你不能`easy_install`或`pip install`它用于 2.x。而且他们没有单独的 py2cairo PyPI 包。所以，你必须明确地`easy_install http://cairographics.org/releases/py2cairo-1.10.0.tar.bz2`.

第二个问题是 tarball 不是为构建而设计的`setuptools`；你必须使用`waf`.

因此，您将不得不下载上面的链接（或者，更好的是[http://cairographics.org/pycairo/](http://cairographics.org/pycairo/)上的最新 py2cairo ），解压它，然后阅读并按照安装说明进行操作。

这也假设您已经正确安装了 Cairo（例如，通过 Homebrew）。

PS，并不是说它在这里会有什么不同，但你真的应该使用`pip`而不是`easy_install`. 您想要使用的唯一时间`easy_install`是安装`pip`自身 ( `sudo easy_install pip`)，并安装两个或三个`easy_install`可以但不可以的软件包`pip`。

您提到您通过 MacPorts 获得了 Cairo。MacPorts 不能很好地与非 MacPorts 配合使用。事实上，这就是重点：拥有一套完全隔离的工具和库，可以一起维护。这意味着如果你有 MacPorts' `cairo`，你可能想要它的`py27-cairo`, 和`python27`包。

如果您想要更好地与您的系统集成，请查找二进制文件、使用[Homebrew](http://mxcl.github.com/homebrew/)或自己构建。（我注意到 Homebrew 也有一个公式`py2cairo`，我相信它会安装到你的系统 2.7 Python 中，但我没有测试它。通常，Homebrew 不提供 Python/Ruby/Perl 模块，因为你已经有了`pip`// `gem`，`cpan`但它们对不能使用标准工具和/或难以设置的包进行了例外处理。）

# c++ - 在插入 C++ STL 映射之前是否需要使用 new 分配内存？

> ID：13187422
> 
> 赞同：-1
> 
> 时间：2012-11-02T00:11:43.487
> 
> 标签：c++, stl, map

我有以下将对插入 STL 映射的函数。我需要在插入之前使用 new 分配内存吗？

```
char* foo(char* lnumber)
{

       char* sData = “A,B,C”;
       Char delim[] = “,”;                       
       typedef std::map<std::string, std::string> TStrStrMap; 
       typedef std::pair<std::string, std::string> TStrStrPair;
       TStrStrMap tMap;

       if(strstr(sData,delim) != 0)
       {
          tok = strtok( sData, delim);
          while( ( tok != NULL))
          {
             int bytes = strlen(tok)+1;
             char* ll = new char[bytes];
             memset(ll,0,bytes);
             strcpy(ll,tok);
             ll[bytes] = '\0';
             int bytes1 = strlen("yes")+1;
             char* ll1 = new char[bytes1];
             memset(ll1,0,bytes1);
             strcpy(ll1,”yes”);
             ll1[bytes1] = '\0';
             tMap.insert(TStrStrPair(ll,ll1));
             tok = strtok( NULL, delim);
          }
        }

        std::string strValue = tMap[lnumber];
        return(strdup(strValue.c_str()));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:30:03.000

要回答您的具体问题 - 不，鉴于您显示的声明，您不需要自己分配内存。 `std::string`将管理字符串值的内存，`std::pair`将处理其`std::string`值的内存，`std::map`并将处理其值的内存`std::pair`。

您当前的代码正在泄漏`char[]`您使用“new []”分配的每个缓冲区。您的`std::string`价值观正在制作数据的副本，因此您在`delete[]`使用完它们时需要它们，例如：

```
char* foo(char* lnumber)
{
    char sData[] = "A,B,C";
    char *delim = ",";                       
    typedef std::map<std::string, std::string> TStrStrMap; 
    typedef std::pair<std::string, std::string> TStrStrPair;
    TStrStrMap tMap;

    if(strstr(sData, delim) != 0)
    {
        char *tok = strtok(sData, delim);
        while (tok != NULL)
        {
            int bytes = strlen(tok)+1;
            char* ll = new char[bytes];
            strcpy(ll, tok);
            int bytes1 = strlen("yes")+1;
            char* ll1 = new char[bytes1];
            strcpy(ll1, "yes");
            tMap.insert(TStrStrPair(ll,ll1));
            delete[] ll; // <-- here
            delete[] ll1; // <-- here
            tok = strtok( NULL, delim);
        }
    }

    std::string strValue = tMap[lnumber];
    return strdup(strValue.c_str());
} 
```

话虽如此，由于`std::string`有一个接受`char*`输入的构造函数，因此您的循环代码可以大大简化为以下内容：

```
// you really should be using std::string instead
// of char* for the function's input and output...
//
char* foo(char* lnumber)
{
    char sData[] = "A,B,C";
    char *delim = ",";                       
    typedef std::map<std::string, std::string> TStrStrMap; 
    typedef std::pair<std::string, std::string> TStrStrPair;
    TStrStrMap tMap;

    char *tok = strtok(sData, delim);
    while (tok != NULL)
    {
        tMap.insert(TStrStrPair(tok, "yes"));
        tok = strtok(NULL, delim);
    }

    std::string strValue = tMap[lnumber];
    return strdup(strValue.c_str());
} 
```

# algorithm - 最大似然和支持向量复杂度

> ID：13187423
> 
> 赞同：3
> 
> 时间：2012-11-02T00:11:49.833
> 
> 标签：algorithm, classification

谁能提供一些参考资料来说明如何确定最大似然和支持向量机分类器的计算复杂度？我一直在网上搜索，但似乎没有找到一个好的文档来详细说明如何找到对这些分类器算法的计算复杂度进行建模的方程。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:47:58.747

支持向量机和一些最大似然拟合是凸最小化问题。因此，理论上它们可以使用[http://en.wikipedia.org/wiki/Ellipsoid_method](http://en.wikipedia.org/wiki/Ellipsoid_method)在多项式时间内求解。

我怀疑如果您考虑方法，您可以获得更好的估计。[http://www.cse.ust.hk/~jamesk/papers/jmlr05.pdf](http://www.cse.ust.hk/~jamesk/papers/jmlr05.pdf)说标准支持向量机拟合 m 个实例需要 O(m^3) 时间和 O(m^2) 空间。[http://research.microsoft.com/en-us/um/people/minka/papers/logreg/minka-logreg.pdf](http://research.microsoft.com/en-us/um/people/minka/papers/logreg/minka-logreg.pdf)给出了逻辑回归的每次迭代成本，但没有给出估计迭代次数的理论基础。在实践中，我希望这在大多数情况下都能达到二次收敛，并且不会太糟糕。

# c - 有没有办法检查文件是否是 SQLite3 DB？

> ID：13187424
> 
> 赞同：3
> 
> 时间：2012-11-02T00:11:50.240
> 
> 标签：c, sqlite

我正在编写一个简单的 C 程序来检查文件 F 是否是可用的 SQLite3 数据库。

我尝试将乱码写入文件`test.db`，但`sqlite3_open("test.db", &db)`返回 0。

我想要么`sqlite3_status()`做我想做的事，要么`sqlite3_db_status()`做我想做的事，但文档说明了一些不同的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:15:41.987

看看这个[线程](http://sqlite.1065341.n5.nabble.com/sqlite3-open-on-non-DB-file-td43197.html)。

`sqlite3_open`即使文件不是数据库，它看起来也会返回 SQLITE_OK 。但是，当您尝试执行语句时，您将获得 SQLITE_NOTADB。您可以`SELECT * FROM sqlite_master;`在打开数据库后检查是否返回 SQLITE_NOTADB，而不是读取标题。您可以更进一步，使用返回的数据来确保所有表都存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:28:32.363

[文件必须以固定的标题开头](http://www.sqlite.org/fileformat.html)。如果您想识别有效文件，那应该没问题。

# perl - 如何在 Heroku 机器上为 Perl 安装 DBI 模块

> ID：13187433
> 
> 赞同：1
> 
> 时间：2012-11-02T00:12:32.483
> 
> 标签：perl, heroku, dbi

所以我有我成功发布到 heroku 的 Ruby-on-rails 应用程序。然而，为了填充数据库，我有几个 perl 脚本，它们基本上将本地数据库上的表与远程数据库同步。

在我的开发机器上（在 ec2 上）它工作正常，但随着时间的推移，我也安装了很多东西。

当我尝试运行我的脚本时，出现以下错误（顺便安装了最新的 perl）

```
Can't locate DBI.pm in @INC (@INC contains: /etc/perl /usr/local/lib/perl/5.10.1 /usr/local/share/perl/5.10.1 /usr/lib/perl5 /usr/share/perl5 /usr/lib/perl/5.10 /usr/share/perl/5.10 /usr/local/lib/site_perl .) at copyStaff.pl line 4.
BEGIN failed--compilation aborted at copyStaff.pl line 4. 
```

如何在 heroku 上为 Perl 安装 DBI 模块？我尝试过 bash

```
apt-get install libdbi-perl 
```

这给了我一个输出

```
W: Not using locking for read only lock file /var/lib/dpkg/lock
E: Unable to write to /var/cache/apt/
E: The package lists or status file could not be parsed or opened. 
```

[这可能无关紧要] 我尝试运行此命令

```
dpkg --configure -a 
```

但它告诉我它需要超级用户权限

```
su -l root -c "dpkg --configure -a" 
```

*   要求输入root密码，显然我不知道密码（它不是heroku登录名），不知道它可能是什么。

我也直接下载了文件，但我需要超级用户访问权限。我也试过

```
$perl -MCPAN -e shell
cpan> install DBI 
```

（这有同样的问题，无法保存文件）

我有一种感觉，我可能会以完全错误的方式进行操作，但我无法弄清楚我需要做什么来运行这些脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T23:25:22.253

您将不得不调查 Heroku 的 Perl Buildpacks，其中我知道 Perloku 的存在，另外两个自称类似于 perl-heroku。

Buildpacks 尝试安装 Heroku 本身不支持的环境，例如 Perl。我发现一些安装 Mojolicious，另一个安装 apache2/mod_perl 环境。

您必须与 buildpack 维护人员交谈以了解他们是否安装了 DBI/DBD::mysql，但很可能他们安装了，这只是基于这些模块的流行程度。

如果你做到了，那么你所要做的就是同步数据库:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T16:10:23.720

好吧，我从客户支持那里得到了答案，只是将其粘贴在这里

* * *

不幸的是，我们不支持在我们的堆栈中安装额外的库或二进制文件。最好的解决方法是将这些供应商到您的项目中。您需要使用 64 位 Linux 版本才能使它们在 Heroku 上运行；静态编译还可以帮助确保包含所需的任何依赖项。同样，对于依赖于外部库的 gem，我们建议静态编译 gem 并将其出售到您的项目中。

如果您确实希望尝试提供您的二进制文件、库或 gem，您可以使用 Heroku 作为您的构建环境。我们的一位工程师创建了一个构建服务器，允许您上传源代码、运行编译步骤，然后下载生成的二进制文件。你可以在这里找到这个项目： [https ://github.com/heroku/vulcan](https://github.com/heroku/vulcan)

# java - Java类继承组织

> ID：13187434
> 
> 赞同：0
> 
> 时间：2012-11-02T00:12:43.060
> 
> 标签：java, class, inheritance

我很难找到我需要的东西，并弄清楚如何要求它，所以请考虑一下：

```
public class Environment {
    int x = 0;
    int y = 0;
    Operations op = new Operations();

    public Environment(){
        Operations.changeSuper();
    }
} 
```

和：

```
public class Operations extends Environment {
    public void changeSuper(){
        x++;
        y--;
    }
} 
```

这是我已经尝试过的简单表示。但是我不认为在环境中初始化操作是正确的，因为它会导致构造函数循环。但如果我不这样做，那么当我尝试调用 changeSuper() 时会得到空指针。

这是使用扩展的正确方法吗？谁有更好的方法从类文件中抽象方法。

长话短说，我想将方法​​移出类文件，但仍然允许它们影响它的局部变量

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:25:02.520

`Environment`不是`Operations`..所以不。听起来你需要作曲。而且你应该让你的班级`Operation`没有`Operations`。

所以有这样的事情：

```
public class Environment {
    int x = 0;
    int y = 0;
    Operation op ;

    public Environment(){
         op=new Operation(this);

    }

    public void changeEnvironment() {}
    public void incrementX(){}
    public void incrementY() {}
} 
```

和：

```
public class Operation   {
    Environment e;
    public Operation(Environment e){
        this.e = e;
        e.incrementX();
        e.decrementY();
    }
    public void changeEnvironment()
    {   
       e.changeEnvironment() ;
    }
} 
```

如果仅在 中进行更改`Environment`，则它使维护更容易，同时也保留了封装性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:30:37.733

您**不能通过继承**`Operations`引用Super Class 中的子类。相反，制作为抽象类并定义为抽象方法，如下所示：**`Environment``changeSuper`**

 **```
 public abstract class Environment {
    int x = 0;
    int y = 0;
    public abstract void changeSuper();

    public Environment(){
     changeSuper();
    }
  } 
```

然后定义`Operations`类来扩展`Environment`和实现`changeSuper()`方法如下：

```
 public class Operations  extends Environment {
     @Override
     public void changeSuper(){
           x++;
           y--;
     }
  } 
```

现在，如果您在类中创建一个`main`方法：`Operations`

```
public static void main(String[] args) {
    Environment env = new Operations();
    System.out.println("x="+env.x+"&y="+env.y);//<- it will print x=-1&y=-1
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:19:10.313

我相信 changeSuper 应该是静态的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T03:13:43.290

我认为您不希望运营兼而有之

*   环境的一个子类型和

*   Environment 的实例变量

如果 Environment 是 Operations 的超类型 - 它们将自动共享非私有实例变量（不需要一个调用另一个）。如果不是超类型，那么通过直接访问实例变量来破坏封装是不好的做法。

**试试这个：**

```
public class Environment {
    int x = 0;
    int y = 0;

    public Environment(){
    }
}

and:

public class Operations extends Environment {
    public void changeState(){
        x++;
        y--;
    }
}

and:

public class MasterControl {
   Operations op = new Operations();
   op.changeState();
} 
```

**或者**

```
public class Environment {
    int x = 0;
    int y = 0;
    Operations op = new Operations();

    public Environment(){
        op.changeState();
    }

    public int getX() {return x;}
    public setX(int x) {this.x = x;}
    public int getY() {return y;}
    public setY(int x) {this.y = y;}

} 
```

和：

```
public class Operations {
    public void changeState(Environment env){
        env.setX(env.getX+1);
        env.setY(env.getY-1);
    }
} 
```

在这里，Environment 负责存储环境状态并使其可供其他对象使用。在这里，Operations 正在执行一项专门的操作来修改环境状态。

凯？**

# spring-mvc - spring MVC XmlViewResolver 配置

> ID：13187435
> 
> 赞同：1
> 
> 时间：2012-11-02T00:12:57.640
> 
> 标签：spring-mvc

我们希望提供替代的 PDF 视图以及来自控制器的常规 JSP 视图，并添加了 a`ContentNegotiatingViewResolver`和 an`XmlViewResolver`来处理这个问题。我找到的所有示例，包括 Spring 文档，都返回一个简单的视图名称，该名称`XmlViewResolver`映射到它的 views.xml 文件中的一个 bean ID（在我们的例子中，一个将 PDF 写入`HttpResponse`.

但是，我们将 jsps 组织在 InternalResourceViewResolver 中定义的位置的子文件夹中。

例如，

```
<bean id="viewResolver" class= "org.springframework.web.servlet.view.InternalResourceViewResolver"  p:order="2">          
    <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <property name="prefix" value="/WEB-INF/pages/"/>
    <property name="suffix" value=".jsp"/>
 </bean> 
```

因此，在我们的控制器中，我们为 /WEB-INF/pages/a/b/c.jsp 中的 JSP 返回视图名称，例如“a/b/c”。

这适用于 JSP，除了不能在 views.xml 中将 bean id 定义为“a/b/c”；它不是有效的 bean ID。我们已经调查了几个要么不起作用且不令人满意的选项：

1.  将所有 JSP 放在一个文件夹中，这样我们就可以使用 bean-id-naming 兼容的视图名称，该名称可以由`XmlViewResolver`. 这很有效，但对于组织我们的 JSP 来说并不理想。
2.  有多个`InternalResourceViewResolver`使用不同前缀的定义。这只是行不通；如果找不到匹配的视图，这种类型的第一个解析器不会返回 null，它只是失败并出现异常并且`ViewResolvers`不使用后续。
3.  使用单独的控制器方法（或控制器中的条件代码，根据请求的内容类型或 URL 后缀返回视图名称）；这些解决方案似乎`Controller`违背了对其观点一无所知的目的。
4.  尝试在`location`XmlViewResolver 的属性中使用通配符；这失败了，但有一个例外。

我确信有一个很好的优雅解决方案，但它现在正在躲避我。有没有更好的方法让我可以返回一个视图名称，例如 'a/b/c' ，它有可能被 XmlViewResolver 解析？

感谢您的任何建议。

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:38:37.583

当然，bean 别名是要走的路……经过一番挖掘：

在 XmlViewResolver 定位的 views.xml 文件中：

```
<bean id="PdfView" class="com.blah.PdfDocView" /> 
<alias name="PdfView" alias="/a/b/structuredDocument"/> 
```

它将“/a/b/structuredDocument”映射到 PdfDocView bean。

# php - PHP 打印包含的 XML 文件

> ID：13187438
> 
> 赞同：1
> 
> 时间：2012-11-02T00:13:19.207
> 
> 标签：php, xml

我正在尝试通过 PHP 文件回显 XML 文件。像这样：

url访问viewxml.php?id=1

php 打开一个特定的 XML 文件，例如`"xmlfile_".$_GET['id'].".xml"`并打印它，就好像他们正在访问 xml 文件本身一样。

我使用 PHP 的原因是进行会话检查以确保允许他们查看 xml 文件。

这就是我这样做的方式：

```
header("Content-type: text/xml; charset=utf-8");
// send the saved XML file.
include "xmlfile_".$id.".xml"; 
```

这样做会给我以下 GC XML 错误：![错误。](../Images/9dcbdfaf86f129926e009a84f6fc006d.png)

*它下面没有任何东西。*

我尝试了不同的方法，例如将其打印或将其转换为字符串，但是在某些软件上读取 XML 时遇到了问题。我希望你们中的一个可以帮助我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:15:55.267

`include()`将尝试评估文件；如果那里有一些看起来像 PHP 的东西，那么它会破坏你的结果。

尝试使用[readfile](http://php.net/readfile)代替；这只会输出文件内容。

# javascript - 从 C++ 访问 qml 元素 ID

> ID：13187439
> 
> 赞同：2
> 
> 时间：2012-11-02T00:13:21.873
> 
> 标签：javascript, c++, methods, qml

在c ++方面我写了这段代码

```
 :::::::::::::
    QMetaObject::invokeMethod(rootObject,"changeText",Q_ARG(QVariant,"txt1"),
Q_ARG(QVariant,"hello")) 
```

在 qml 方面我写了这个

```
Text {
  id: txt1
  text: "hi"
}

function changeText(id,str){
        id.text=str
} 
```

changeText 函数在 qml 端有效，但当我从 c++ 端调用它时它不起作用。我认为 Cpp 端方法将“txt1”作为 QString 发送，因此 changeText 函数不起作用。

你能告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T07:29:30.980

从 c++ 更改 qml 对象的属性的正确方法是在 c++ 中获取该对象，然后调用**setProperty()**方法。示例：qml：

```
Rectangle
{
  id: container
  width: 500; height: 400

  Text {
    id: txt1
    objectName: "text1"
    text: "hi"
  }
} 
```

请注意，您必须添加用于获取子对象的对象名称属性。在此示例中，矩形是根对象。然后在 C++ 中：

```
QObject *rootObject = dynamic_cast<QObject*>(viewer.rootObject());
QObject *your_obj = rootObject->findChild<QObject*>("text1");
your_obj->setProperty("text", "500"); 
```

您可以将其压缩为一行调用，如下所示：

```
viewer.rootObject()->findChild<QObject*>("text1")->setProperty("text", "You text"); 
```

另一种方法是使用您之前使用的方法，但将对象名称赋予**changeText**方法并遍历主对象的子对象，直到找到您感兴趣的对象：

```
Rectangle {
  id: container
  width: 500; height: 400

  Text {
    id: txt1
    objectName: "text1"
    text: "hi"
  }

  function changeText(objectName,str){
    for (var i = 0; i < container.children.length; ++i)
      if(container.children[i].objectName === objectName)
      {
        container.children[i].text = str;
      }
  }
} 
```

# cuda - NVIDIA CUFFT 限制使用 scikits.cuda 进行 FFT 的大小和批次

> ID：13187443
> 
> 赞同：1
> 
> 时间：2012-11-02T00:14:02.313
> 
> 标签：cuda, fft, scikits

这个问题将在 Python 命令行中使用 scikits.cuda [1]，但可以等效地在纯 C/CUDA 中尝试（我没有尝试过）。

我正在尝试为一维复杂到复杂的转换创建一个 CUFFT 计划，该转换将应用于许多输入（所以很多批次）。使用 Tesla C2050，我执​​行以下操作

```
import scikits.cuda.fft as cufft
import numpy as np
p = cufft.Plan((64*1024,), np.complex64, np.complex64, batch=100)
p = cufft.Plan((64*1024,), np.complex64, np.complex64, batch=1000)
p = cufft.Plan((64*1024,), np.complex64, np.complex64, batch=10000) # !!! 
```

最后一次尝试的计划引发 cufftAllocFailed 异常。如果我减小变换的大小（从 64K 开始），我可以得到一批 10'000，但目前我需要 64K 大小的变换。

我的问题是：这是 CUFFT 的硬性限制吗？如果是这样，在 CUDA [2] 或 CUFFT [3] 文档中的哪些地方指定了变换大小与批次（与维度？）的限制？

[1] [http://scikits.appspot.com/cuda](http://scikits.appspot.com/cuda)
[2] [http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)
[3] [http:// /docs.nvidia.com/cuda/pdf/CUDA_CUFFT_Users_Guide.pdf](http://docs.nvidia.com/cuda/pdf/CUDA_CUFFT_Users_Guide.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T01:09:38.570

计划中有大约 2^27 个元素的硬性限制。

# java - 程序看不到重载的构造函数

> ID：13187447
> 
> 赞同：2
> 
> 时间：2012-11-02T00:14:22.837
> 
> 标签：java, constructor

我的代码中出现错误（这是我作业的最后一行，我似乎无法解决它），它位于 addStudent 方法中。它说我尝试访问重载的构造函数实际上是在尝试访问默认构造函数，并且没有变量可供我通过。所以，简而言之：

“studentArray[i] = new Student(firstname, lastname, gender, sClass, sID);”

正在尝试访问：

“公共无效学生（）{}”

但我希望它访问：

“公共无效学生（字符串名字，字符串姓氏，字符串性别，字符串sClass，字符串sID）”

谢谢您的帮助！

-安德烈斯

```
public void Student() 
{
    setFirstName("Unknown");
    setLastName("Unknown");
    setGender("Unknown");
    setClass("Freshman");
    setID("0000");
}

public void Student(String firstname, String lastname, String gender, String sClass, String sID) 
{
    setFirstName(firstname);
    setLastName(lastname);
    setGender(gender);
    setClass(sClass);
    setID(sID);
}

public static boolean addStudent(String firstname, String lastname, String gender, String sClass, String sID)
{
    for (int i=0; i<studentArray.length; i++) 
    {
        if (studentArray[i] == null)
        {
            studentArray[i] = new Student(firstname, lastname, gender, sClass, sID);
            totStudent++;
        }else {JOptionPane.showMessageDialog(null, "Max students reached.");}
    }
    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:15:53.037

您正在用 声明您的“构造函数” `void`，实际上是使它们成为`void`方法，而不是构造函数。因此，编译器只能使用默认构造函数，这就是您收到该错误的原因。`void`因此：您应该在尝试定义构造函数的任何地方删除关键字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:16:27.133

从构造函数中删除`void`关键字：

```
public void Student(String firstname, String lastname, String gender, String sClass, String sID) 
```

改成

```
public Student(String firstname, String lastname, String gender, String sClass, String sID) 
```

相似地

```
public void Student() 
```

改成

```
public Student() 
```

构造函数没有返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:19:08.060

构造函数没有返回类型，因为当您将它们与 new 关键字一起使用时，它们返回一个与定义它们的类相同类型的新 Object。

对象 o = 新对象（）；// 你正在调用 Object 构造函数。

-- 编辑 -- 我也建议改变这个

```
public Student() 
{
    setFirstName("Unknown");
    setLastName("Unknown");
    setGender("Unknown");
    setClass("Freshman");
    setID("0000");
} 
```

到

```
public Student() 
{
    this("Unknown", "Unknown", "Unknown", "Freshman", "0000"); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:17:04.433

构造函数没有返回类型，甚至不是 void。你用 void 声明你的构造函数，这将使它们成为方法而不是构造函数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T00:40:16.853

从构造函数中删除，`void`不需要调用`setter`方法。您可以直接访问以下属性：

```
 public void Student() 
 {
    this.firstName = "Unknown";
    this.lastName = "Unknown";
    this.gender = "Unknown";
    this.class = "Freshman";
    this.ID="0000";
 } 
```

相似地

```
 public void Student(String firstname, String lastname, 
                                         String gender, String sClass, String sID) 
 {
    this.firstName = firstname;
    this.lastName = lastname;
    this.gender = gender;
    this.class = sClass;
    this.ID=sID;
 } 
```

你应该准备好了。

# hibernate - 持久化后休眠不会将实体添加到持久化上下文

> ID：13187449
> 
> 赞同：2
> 
> 时间：2012-11-02T00:14:29.420
> 
> 标签：hibernate, jpa, entitymanager, persist

我有一个托管bean，其中包含当前页面的实体对象列表。在我创建一个新对象并在事务中使用 persist() 将其持久化到数据库之后；在我调用合并时的另一个事务中（因为实体由于先前的事务提交而处于分离状态）；entitymanager 无法在持久性上下文中找到对象并向数据库抛出选择查询。我错过了什么还是这是正常行为？

更新：当我使用 mysql 数据库和自动生成的 Id 列时，存在上述问题。当我使用 Oracle 时，它​​不存在，我使用序列作为 Ids；但仍然；持久化上下文应该知道生成的 id；还有什么方法可以查看持久性上下文以查看哪些实体存在；我正在使用休眠顺便说一句

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:12:54.620

这是正常的行为。默认情况下，持久性上下文具有与事务相同的生命周期。这是完全正常的：一旦事务提交，其他事务可能会修改实体，Hibernate 必须从数据库中重新加载实体以确保它不会返回过时的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:13:32.673

这是正常行为。如果实例不在持久化上下文中，它需要知道它是否存在（应该被覆盖或稍后新创建）。

ID 生成：生成的 ID 通常在调用 persist(..) 时返回，非常方便，因此您的应用程序可以立即使用新创建的 ID，无需等待事务结束。

您可以通过调用检查给定对象是否在持久性上下文中： [https ://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#contains%28java.lang.Object%29](https://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/Session.html#contains%28java.lang.Object%29)

# jquery - 页面加载时显示动画并隐藏其他

> ID：13187450
> 
> 赞同：0
> 
> 时间：2012-11-02T00:14:33.133
> 
> 标签：jquery

我不想在页面加载之前显示我的页面。并且还想展示动画

我正在使用此代码

```
jQuery(window).load(function (){
jQuery('#loading').show();
jQuery('#main-container').hide();

}); 
```

但它就像一些不正确的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:18:47.310

您应该隐藏您的页面并最初使用 CSS 显示加载器

```
#main-container { display: none }
#loading { display: block } 
```

页面加载完成后，隐藏加载器并显示内容

```
jQuery(window).load(function() {
    jQuery('#loading').hide();
    jQuery('#main-container').show();
}); 
```

# c++ - 动态加载窗口图标

> ID：13187453
> 
> 赞同：8
> 
> 时间：2012-11-02T00:14:41.090
> 
> 标签：c++, winapi

在注册一个窗口类`WNDCLASSEX wcex`时，我`wcex.hIcon = LoadIcon( hInstance, (LPCTSTR) IDI_APPLICATION )`用来设置窗口的图标。

有没有办法从文件中动态加载图标以注册窗口？类似`LoadIcon ( hInstance, "iconfile.ico" )`或可能使用该文件创建图标资源。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T00:57:04.157

您可以使用[`LoadImage`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648045%28v=vs.85%29.aspx)：

```
wcex.hIcon = (HICON) LoadImage( // returns a HANDLE so we have to cast to HICON
  NULL,             // hInstance must be NULL when loading from a file
  "iconfile.ico",   // the icon file name
  IMAGE_ICON,       // specifies that the file is an icon
  0,                // width of the image (we'll specify default later on)
  0,                // height of the image
  LR_LOADFROMFILE|  // we want to load a file (as opposed to a resource)
  LR_DEFAULTSIZE|   // default metrics based on the type (IMAGE_ICON, 32x32)
  LR_SHARED         // let the system release the handle when it's no longer used
); 
```

确保将`wcex.hIconSm`（小图标）设置为 NULL 或加载小图标。当您将其设置为 NULL 时，它将自动使用 hIcon 指定的图像。使用 LoadImage 加载小图标时，应将宽度和高度设置为 16 并删除 LR_DEFAULTSIZE 标志。如果它是设计为具有透明部分的图标，请添加 LR_LOADTRANSPARENT 标志

# php - phpexcel填充空单元格

> ID：13187455
> 
> 赞同：2
> 
> 时间：2012-11-02T00:15:04.070
> 
> 标签：php, loops, phpexcel

我想使用 phpexcel 填充 csv 列的空白及其在一列中 我添加了一个演示供您查看： 流检查 B2 不为空 如果 B3 为空，则转到下一个 B3 从 B2 获取值。

这是我的尝试可以把我的代码片段，但我已经发布了与演示和我的尝试相同的帖子。

[PHP Excel 填写空单元格。](http://www.daniweb.com/web-development/php/threads/438892/phpexcel-fill-in-empty-cells#post1886143)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:46:15.350

PHPExcel 没有为此提供任何内置函数：它只会在您明确告诉它这样做的情况下更改单元格的内容。您需要遍历工作表测试包含 NULL 或空字符串的单元格，并在保存到 CSV 之前使用所需的值填充它们。

就像是：

```
for ($i=2;$i<$highestRow;$i++) {
    $colB = $objPHPExcel->getActiveSheet()->getCell('B'.$i)->getValue();
    if ($colB == NULL || $colB == '') {
        $objPHPExcel->getActiveSheet()->setCellValue(
            'B'.$i, 
            $objPHPExcel->getActiveSheet()->getCell('B'.($i-1))->getValue();
        );
    }
} 
```

# sql - Oracle — 单独的时间和日期

> ID：13187456
> 
> 赞同：3
> 
> 时间：2012-11-02T00:15:08.327
> 
> 标签：sql, oracle

我对 Oracle 有疑问（我已经安装了 Oracle 11g Express Edition）。我想插入“日期”和“时间”的值，但我无法将它们分开。

```
create table Match 
(
    numMatch number(2) constraint PKMatch primary key,
    dateM date, 
    heureM date,
    numE_Eq number(2),
    numE_Eq2 number(2),
    nomTerrain varchar2(30)
); 
```

--"工具"=>"首选项"=>"日期格式：DD/MM/YYYY HH24:MI:SS"

```
insert into Match values (1,to_date
('10/12/2010','DD/MM/YYYY'),to_date('15:00:00','HH24:MI:SS'),1,3,'Stade Argentina'
); 
```

***结果：***

```
dateM: 10/12/2010 00:00:00

heureM: 01/11/2012 15:00:00 
```

PS：我试过用 to_char 代替 to_date，但根本没用。

* * *

是的，我知道'DATE 数据类型同时包含日期和时间'，但坚持在表格中分别显示日期和时间的是教授，我以前看过你的解决方案，但对我来说，这是一个查询，不要在表中“插入值”。

所以我想知道如何让表格直接显示日期和时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:35:25.493

Oracle 没有 TIME 数据类型。您可以存储带有时间组件的 DATE，并且只需根据时间查询，并根据时间显示。

```
select to_char(my_date_field, 'HH24:MI:SS') 
from my_table
where to_date(my_date_field, 'HH24:MI') = '18:51'; 
```

或者，您可以将午夜的秒数存储为整数，并据此计算一天中的时间。我认为它还将使查询范围时间更容易。

此外，在会话中，执行以下操作以按照您希望的方式格式化所有日期：

```
alter session set nls_date_format = 'YYYY-MM-DD HH24:MI:SS' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-10T21:29:43.987

在 Oracle 中表示 TIME 等效类型的另一种方法是使用 INTERVAL 类型，例如：

```
SQL> CREATE TABLE foo (
       bar INTERVAL DAY(0) TO SECOND(3)
     ); 
```

这将允许存储一个时间段，其中 DAY 分量的精度为 0，而 SECOND 分量的精度为 3 个小数点。插入示例是：

```
SQL> INSERT INTO foo VALUES ('0 01:01:01.333'); 
```

这种方法的优点在于它会自动以直观的格式显示 SELECT 的结果，而无需进行转换：

```
SQL> SELECT * FROM foo;

BAR
---------------------------------------------------------------------------
+0 01:01:01.333 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-10T22:10:08.003

> 但坚持在表格中分别显示日期和时间的是教授

虽然这听起来像是一个非常愚蠢的要求，但您可以做的一件事是创建两个计算列，将日期和时间显示为 varchar 列：

```
create table match 
(
  nummatch number(2) constraint pkmatch primary key,
  the_date date,
  datem generated always as to_char(the_date, 'yyyy-mm-dd'),
  heurem generated always as to_char(the_date, 'hh24:mi')
  nume_eq number(2),
  nume_eq2 number(2),
  nomterrain varchar2(30)
);

insert into Match (nummatch, the_date, nume_eq, nume_eq2, nomterrain) 
values 
(1,to_date('10/12/2010 15:00:00','DD/MM/YYYY hh24:mi:ss'),1,3,'Stade Argentina'); 
```

然后一个

```
select *
from match; 
```

将返回：

```
NUMMATCH | THE_DATE            | DATEM      | HEUREM | NUME_EQ | NUME_EQ2 | NOMTERRAIN     
---------+---------------------+------------+--------+---------+----------+----------------
       1 | 2010-12-10 15:00:00 | 2010-12-10 | 15:00  |       1 |        3 | Stade Argentina 
```

或者，您可以在表格上创建一个视图，使用分隔日期和时间`to_char()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:29:44.340

Oracle DATE 类型包括 DATE 和 TIME 信息（因为在添加标准 DATE、TIME 和 TIMESTAMP 类型时它早于 SQL-92 标准）。因此，您不能在表格中将它们分开；也没有理由这样做。如果您愿意，可以创建一个视图，将 DATE 字段显示为单独的仅日期和仅时间显示字段。

# perl - 在多个文件的开头和结尾插入行

> ID：13187458
> 
> 赞同：3
> 
> 时间：2012-11-02T00:15:20.277
> 
> 标签：perl, command-line

我有大约 2000 个文件需要在开头和结尾添加行。

我需要在每个文件的开头这些行：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"> 
```

我还需要将其作为每个文件的最后一行：

```
</urlset> 
```

这些文件都在同一个文件夹中，并且都是 .xml 文件。

我认为最好和最快的方法是通过命令行或 perl，但我真的不确定。我已经看过一些关于这样做的教程，但我认为我需要插入的行中的所有字符都搞砸了。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:49:59.293

既然你要求 Perl...

将整个文件加载到内存中的版本：

```
perl -i -0777pe'
   $_ = qq{<?xml version="1.0" encoding="UTF-8"?>\n}
      . qq{<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n}
      . $_
      . qq{</urlset>\n};
' *.xml 
```

一次只读取一行的版本：

```
perl -i -ne'
   if ($.==1) {
      print qq{<?xml version="1.0" encoding="UTF-8"?>\n},
            qq{<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n};
   }
   print;
   if (eof) {
      print qq{</urlset>\n};
      close(ARGV);
   }
' *.xml 
```

注意：`eof`不等于`eof()`.
注意：`close(ARGV)`导致行号重置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T00:49:50.003

对于 Perl，您可以使用[Tie::File](http://perldoc.perl.org/Tie/File.html)轻松完成。

```
#!/usr/bin/env perl
use utf8;
use v5.12;
use strict;
use warnings;
use warnings  qw(FATAL utf8);
use open      qw(:std :utf8);

use Tie::File;

for my $arg (@ARGV) {
  # Skip to the next one unless the current $arg is a file.
  next unless -f $arg;

  # Added benefit: No such thing as a file being too big
  tie my @file, 'Tie::File', $arg or die;

  # New first line, will become the second line
  unshift @file, '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">';

  # The real first line.
  unshift @file, '<?xml version="1.0" encoding="UTF-8"?>';

  # Final line.
  push @file, '</urlset>';

  # All done.
  untie @file;
} 
```

保存到您想要的任何内容，然后将其运行为`perl whatever_you_named_it path/to/files/*`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T00:31:49.590

使用 sed：

```
sed -i -e '1i<?xml version="1.0" encoding="UTF-8"?>\
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' \
-e '$a</urlset>' *.xml 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T00:18:10.557

尝试在[shell](/questions/tagged/shell "显示标记为“外壳”的问题")中执行此操作，我只使用[glob](/questions/tagged/glob "显示标记为“glob”的问题")和简单的[串联](/questions/tagged/concatenation "显示标记为“连接”的问题")。

```
for file in *.xml; do
    {
        echo '<?xml version="1.0" encoding="UTF-8"?>
            <urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">'
        cat "$file"
        echo "</urlset>"
    } > /tmp/file$$ &&
    mv /tmp/file$$ "$file" 
done 
```

# php - 在标头php curl中发送身份验证

> ID：13187462
> 
> 赞同：9
> 
> 时间：2012-11-02T00:15:51.307
> 
> 标签：php, authentication, curl, header

试图在 PHP 中做同样的事情 - 并且失败了:)：

```
curl -H "X-abc-AUTH: 123456789" http://APIserviceProvider=http://www.cnn.com; 
```

“123456789”是 API 密钥。命令行语句工作正常。

PHP代码（不起作用）：

```
$urlToGet = "http://www.cnn.com";
$service_url = "http://APIserviceProvider=$urlToGet";

//header

 $contentType = 'text/xml';          //probably not needed
 $method = 'POST';                   //probably not needed
 $auth = 'X-abc-AUTH: 123456789';    //API Key

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $service_url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);

//does not work

// curl_setopt($ch, CURLOPT_HTTPHEADER, Array('Content-type: ' . 
   // $contentType . '; auth=' . $auth));

    //works!   (THANKS @Fratyr for the clue):

    curl_setopt($ch, CURLOPT_HTTPHEADER, Array($auth));

//this works too (THANKS @sergiocruz):

curl_setopt($ch, CURLOPT_HTTPHEADER, array(
  'Some_custom_header: 0',
  'Another_custom_header: 143444,12'
));

//exec

$data = curl_exec($ch);
echo $data;
curl_close($ch); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T00:24:54.710

为了将自定义标头放入您的 curl 中，您应该执行以下操作：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
  'Some_custom_header: 0',
  'Another_custom_header: 143444,12'
)); 
```

因此，以下内容应该适用于您的情况（假设 X-abc-AUTH 是您需要发送的唯一标头）：

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
  'X-abc-AUTH: 123456789' // you can replace this with your $auth variable
)); 
```

如果您需要额外的自定义标题，您所要做的就是添加到 curl_setopt 中的数组中。

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-05T15:38:37.670

使用以下语法

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"http://www.example.com/process.php");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS,$vars);  //Post Fields
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$headers = array();
$headers[] = 'X-abc-AUTH: 123456789';
$headers[] = 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8';
$headers[] = 'Accept-Encoding: gzip, deflate';
$headers[] = 'Accept-Language: en-US,en;q=0.5';
$headers[] = 'Cache-Control: no-cache';
$headers[] = 'Content-Type: application/x-www-form-urlencoded; charset=utf-8';
$headers[] = 'Host: 202.71.152.126';
$headers[] = 'Referer: http://www.example.com/index.php'; //Your referrer address
$headers[] = 'User-Agent: Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:28.0) Gecko/20100101 Firefox/28.0';
$headers[] = 'X-MicrosoftAjax: Delta=true';

curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);

$server_output = curl_exec ($ch);

curl_close ($ch);

print  $server_output ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:29:56.837

您只设置了一个请求标头，而不是您想要的两个。例如，您可以这样做：

```
// input
$urlToGet    = "http://www.cnn.com";

// url
$service_url = sprintf("http://APIserviceProvider=%s", urlencode($urlToGet));

//header
$contentType = 'Content-type: text/xml'; //probably not needed
$auth        = 'X-abc-AUTH: 123456789'; //API Key
$method      = 'POST'; //probably not needed

// curl init
$ch = curl_init($service_url);
curl_setopt_array($ch, [
    CURLOPT_RETURNTRANSFER => true,
    CURLINFO_HEADER_OUT    => true,
    CURLOPT_HTTPHEADER     => [
        $contentType,
        $auth,
    ],
]);

// curl exec
$data = curl_exec($ch);
curl_close($ch);

// output
echo $data; 
```

（将服务网址更改为正确的网址以使其正常工作）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T00:19:45.110

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
'auth=' . $auth
)); 
```

# ios - 如何复制 ABNewPersonViewController 布局

> ID：13187466
> 
> 赞同：1
> 
> 时间：2012-11-02T00:16:04.440
> 
> 标签：ios

我正在尝试创建一个非常类似于 ABNewPersonViewController 的布局，它允许用户在我的应用程序中创建一个新联系人。我的应用程序不使用地址簿，也不需要 ABNewPersonViewController 中的几个字段，因此我试图在情节提要中复制 ABNewPersonViewController 的布局。

我现在正在解决以下解决方案......

```
视图控制器
  看法
    UIButton（'添加照片'按钮，左对齐）
    表格视图（约 85% 的宽度以允许“添加照片”按钮）
      带文本字段的单元格（名字）
      带文本字段的单元格（姓氏）
    表格视图（100% 宽度）
      带有剩余细节的单元格

```

首先，我很好奇是否有人对更好的布局有任何建议。

其次，我不知道如何为某些单元格实现垂直边框（例如，电话号码的左侧详细信息带有类型 [mobile, home, iPhone]，然后右侧的文本字段带有实际号码）。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:25:48.290

联系人选择器在我看来就像一个使用分组单元格的 UITableView。每个小组都有圆形的外观。

iOS SDK 提供了不同类型的 UITableViewCell。您所描述的在 Interface Builder 中称为“Left Detail”，并以编程方式称为 UITableViewCellStyleValue2。您可以根据 UITableViewController cellForRowAtIndexPath 方法中的需要单独设置每个单元格。

编辑：

在 IB 中创建它的一种可能方法是创建一个 UIView，然后向其中添加一个图像容器和两个表视图。

UIView（主视图）--> UIImageView（在左上角。）--> Grouped UITableView（在右上角。包含first、last和company。）--> Grouped UITableView（在上述两项下方，跨越屏幕。包含其余部分。）

# javascript - 使用 Backbone 从带有额外引号的文本文件导入

> ID：13187469
> 
> 赞同：1
> 
> 时间：2012-11-02T00:16:23.910
> 
> 标签：javascript, backbone.js

我从 Backbone 集合中导出了所有模型，`JSON.stringify(collection.toJSON())`并设法将其保存在文本文件中。

我想导入它，重新创建集合。

问题是，如果我复制文本内容并粘贴到控制台中......

```
collection.add(<-- and paste the text here -->) 
```

集合已创建，一切正常，但如果我获取文件内容（使用 File API），它就不起作用。

经过长时间的检查，我认为问题出在这里：

`[{ ....... }]`工作但`"[{ ..... }]"`不工作，我不明白它们之间的区别是什么。如何从 转换`"[{ ..... }]"`为`[{ ....... }]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:23:09.030

您的数据似乎以某种方式被双重编码。在您已经拥有一个 JSON 字符串之后的某个时间点，您`JSON.stringify()`再次运行它。这就是为什么你在外面有额外的报价。

如果您需要这样做，您应该`JSON.parse()`在将文件内容传递给`collection.add()`.

# eclipse - tomcat 上的 java web 服务 (jersey) 仅在从 eclipse 运行时有效

> ID：13187472
> 
> 赞同：4
> 
> 时间：2012-11-02T00:17:10.860
> 
> 标签：eclipse, web-services, rest, jersey, tomcat7

我使用 Eclipse 和 Jersey 以及 Tomcat 7 作为服务器开发了一些 Web 服务。

从 Eclipse 运行项目时，一切正常。但是，将项目 WAR 文件直接部署到 Tomcat（使用它的管理器）时，调用服务时出现 404 错误。

我的 WEB-INF\lib 目录包含所有球衣库。

我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>myApp</display-name>
    <welcome-file>index.html</welcome-file>
  </welcome-file-list>
  <servlet>
    <servlet-name>myApp REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>com.myapp.resources</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>myApp REST Service</servlet-name>
    <url-pattern>/rest/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

我相信我在 Tomat 配置上遗漏了一些东西，但不知道......

任何想法？

阿汉克斯，阿萨夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T18:02:53.893

好的...

通过采取以下两个措施解决了问题：

**一个。**配置 \tomcat\conf\server.xml 的以下条目，将“localhost”属性替换为实际的服务器名称：

```
<Engine name="Catalina" defaultHost="localhost"> 
<Host name="localhost" appBase="webapps" unpackWARs="true" autoDeploy="true"> 
```

**湾。**照顾Windows防火墙，以允许入站http：8080。我感到有点尴尬——出于某种原因，我认为设置亚马逊安全规则就足够了（-：

感谢您的关注。

阿萨夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T05:56:44.977

试试这个...

```
<servlet>
    <servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.hrms.admin.jersey.service</param-value>
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/rest/*</url-pattern>
</servlet-mapping> 
```

访问这个：[泽西岛](http://www.mkyong.com/webservices/jax-rs/jersey-hello-world-example/)

# php - 代码适用于除 Firefox 之外的所有浏览器

> ID：13187479
> 
> 赞同：-2
> 
> 时间：2012-11-02T00:18:03.240
> 
> 标签：php, javascript, jquery, mysql, firefox

我一直在研究一个非常大的带有重置按钮的 html 表单。重置时，会发生数据库操作。

我有一个这样的javascript函数，它在重置时被调用：

```
function clearDatabaseOfAnySavedForm() {
    window.name = 1;                        
    $.post('assets/scripts/reset-form.php');    
    window.location.reload();
    $(document).load().scrollTop(0);            
    return false;
} 
```

此函数中引用的 php 文件的代码为：

```
<?php
    //Authcate
    $authcate = xxxxx;  

    $username = "xxxxx";
    $password = "xxxxx";
    //$hostname = "xxxxx";  
    $hostname = "xxxxx";  
    $database = "xxxxx";
    $conn = mysql_connect($hostname, $username, $password);
    mysql_select_db($database, $conn) or die( "Unable to select database");  

    if (!empty($authcate)) {        
        $table = "xxxxx";

        $sqlSelectQuery = "SELECT * FROM $table WHERE authcate = '$authcate'";
        $selectResults = mysql_query($sqlSelectQuery);
        $selectNumResults = mysql_num_rows($selectResults);
        if ($selectNumResults > 0) {
            $sqlUpdateQuery = "DELETE FROM $table WHERE authcate = '$authcate'";
            $result = mysql_query($sqlUpdateQuery);
        } 
    }
    mysql_close($conn); 
} 
```

所有浏览器都可以正常工作，但由于某种原因，php 文件不会在 Firefox 中被调用。有没有人有任何建议的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T00:22:06.817

你的代码充满了竞争条件和不可能的步骤。我很惊讶它会在其他浏览器中运行。

```
function clearDatabaseOfAnySavedForm()
{
    window.name = 1;                        
    $.post('assets/scripts/reset-form.php'); <-- call server with asynchronous call  
    window.location.reload();  <-- reload page, it will cancel out the server call
    $(document).load().scrollTop(0); <-- um page is been reload, what does this do ?
    return false;  <-- page is reloaded, what are you cancelling?
} 
```

确保服务器上的代码运行的唯一方法是确保回调发生，而不是重新加载页面。发布请求是异步的。不能保证浏览器会执行它。大多数浏览器会在页面退出时获取任何打开的连接并终止它们。这就是 Firefox 不执行它的原因。

在 Firefox 中，您正在失去竞争条件。调用已完成，在它完成连接到服务器之前，请求被切断，因此浏览器可以发送请求以刷新页面。您需要等待请求与服务器建立连接。您需要等待 readyState 至少达到 2。

但是为什么还要费心进行 Ajax 调用，向页面提交一个发布请求。该页面将重新加载并重定向回您的来源。Ajax 不是正确的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:25:12.330

扩展@epascarello 的答案，您可能想要使用回调函数，这将在您的帖子完成后执行代码。[在这里](http://api.jquery.com/jQuery.post/)阅读

```
function clearDatabaseOfAnySavedForm(){
  $.post('assets/scripts/reset-form.php', function(){
    //this will execute when the post returns
    window.location.reload();
  })
} 
```

而且您不需要 scrollTop 并返回 false；

如果您不知道什么是回调函数，请在[此处](http://www.w3schools.com/jquery/jquery_callback.asp)阅读。我记得当我第一次开始使用 javascript 时，这是一个非常不寻常的概念。

# android - Java程序的ARM多核惩罚

> ID：13187481
> 
> 赞同：3
> 
> 时间：2012-11-02T00:18:07.837
> 
> 标签：android, concurrency, arm, memory-barriers

我想知道在多核 ARM 芯片与单核芯片上运行 Dalvik+JIT 是否会受到惩罚？

例如，如果我在我的 Android 系统构建中禁用多核支持并使用单个 CPU 内核执行整个手机，在运行单线程 Java 基准测试时我会获得更高的性能吗？

多核上内存屏障和同步的成本是多少？

我之所以问，是因为我隐约记得看到单核手机与双核手机的单线程基准测试分数。只要 Mhz 差不多，这两款手机就没有太大区别。我曾预计双核手机会放缓....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:54:03.657

简单的答案是“你为什么不试试看呢？”

复杂的答案是：进行多核同步是有成本的，但拥有多核也有好处。毫无疑问，您可以设计一个病态的情况，即程序遭受同步原语的额外开销，从而深受其性能的影响。这通常是由于锁定在太深的级别（在您的快速循环内）。但在一般情况下，十几个其他系统程序能够在其他内核上获得 CPU 时间，以及内核服务中断和 IO 而不是中断您的进程，这一事实可能会大大压倒由MP同步。

在回答您的问题时，DSB 可能需要数十或数百个周期，而 DMB 可能成本更高。根据实现，独占加载存储指令可能非常快或非常慢。WFE 可能会消耗几微秒，但如果您没有遇到争用，则不需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:30:57.133

背景：http: [//developer.android.com/training/articles/smp.html](http://developer.android.com/training/articles/smp.html)

为 SMP 构建的 Dalvik 确实有额外的开销。Java 内存模型要求强制执行某些保证，这意味着发布额外的内存屏障，特别是在处理易失性字段和不可变对象时。

增加的开销是否明显取决于您正在做什么以及您使用的设备，但一般来说，除非您运行有针对性的基准测试，否则您不太可能注意到它。

如果您为 UP 构建并在具有多个内核的设备上运行 Dalvik，您可能会看到不稳定的行为——请参阅上面引用的文档中的“SMP 故障示例”附录。

# xpath - xpath中的参数化深度查询

> ID：13187484
> 
> 赞同：4
> 
> 时间：2012-11-02T00:18:17.997
> 
> 标签：xpath

我正在尝试选择`<BBB>`在其后代中至少有 2 个不同深度的相同类型元素的元素。我发现有可能：

```
//BBB//BBB//BBB 
```

但如果我想改变查询的深度，我必须写：

```
//BBB//BBB//BBB//BBB
or
//BBB//BBB 
```

是否可以使用参数指定查询的深度？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T00:31:07.117

您可以搜索具有至少两个/三个/...祖先类型的元素，例如：

```
//*[count(ancestor::BBB) >= 2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:47:50.673

**使用**：

```
//BBB[ancestor::BBB[$pN]] 
```

where`$pN`应该替换`BBB`为不同深度的所需后代数量。

# node.js - 猫鼬嵌套文档更新失败？

> ID：13187486
> 
> 赞同：4
> 
> 时间：2012-11-02T00:18:29.927
> 
> 标签：node.js, mongodb, mongoose

如果我有一个嵌套文档，如何在 Mongoose 中更新该嵌套文档中的字段？

我使用我能找到的所有东西仔细研究了这个问题，甚至更改了我的测试代码以匹配 Stackoverflow 上关于此问题的类似回答问题，但我仍然无法弄清楚这一点。这是我的模式和模型、代码和 Mongoose 调试输出。我无法理解我做错了什么，在这里。

```
var mongoose = require('mongoose')
  , db = mongoose.createConnection('localhost', 'test')
  , assert = require("node-assert-extras");

var Schema = mongoose.Schema;
var ObjectId = Schema.ObjectId;

db.once('open', function () {
  // yay!
});
mongoose.set('debug', true);

var PDFSchema = new Schema({
      title     : { type: String, required: true, trim: true }
})

var docsSchema = new Schema({
     PDFs           : [PDFSchema] 
});

var A = db.model('pdf', PDFSchema);
var B = db.model('docs', docsSchema);

function reset(cb) {
  B.find().remove();
  // create some data with a nested document A
  var newA = new A( { title : "my title" })
  var newB = new B( { PDFs: newA});
  newB.save();
  cb();
}

function test1( ) {
    reset(function() {
        B.findOne({}, 'PDFs', function(e,o)
        {
            console.log(o);
            pdf_id = o.PDFs[0]._id;
            console.log("ID " + pdf_id);
            B.update(
                { 'pdfs.pdf_id': pdf_id }, 
                { $set: { 
                    'pdfs.$.title': 'new title'
                }}, function (err, numAffected) { 
                    if(err) throw err;
                    assert.equal(numAffected,1);  //KA Boom!
                }
            );  

        });
    });
}

test1();

/*
$ node test2.js
Mongoose: docs.remove({}) {}  
Mongoose: docs.findOne({}) { fields: { PDFs: 1 }, safe: true }  
Mongoose: docs.insert({ __v: 0, PDFs: [ { _id: ObjectId("50930e3d0a39ad162b000002"), title: 'my title' } ], _id: ObjectId("50930e3d0a39ad162b000003") }) { safe: true }  
{ _id: 50930e3d0a39ad162b000003,
  PDFs: [ { _id: 50930e3d0a39ad162b000002, title: 'my title' } ] }
ID 50930e3d0a39ad162b000002

assert.js:102
  throw new assert.AssertionError({
        ^
AssertionError: 0 == 1

*/ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:52:44.843

您没有在`B.update`通话中使用正确的字段名称。应该是这样的：

```
B.update(
    { 'PDFs._id': pdf_id },           // <== here
    { $set: {
        'PDFs.$.title': 'new title'   // <== and here
    }}, function (err, numAffected) {
        if(err) throw err;
        assert.equal(numAffected,1);
    }
); 
```

您还应该修复您的`reset`函数，使其在完成之前不调用其回调`save`：

```
function reset(cb) {
  B.find().remove();
  // create some data with a nested document A
  var newA = new A( { title : "my title" })
  var newB = new B( { PDFs: newA});
  newB.save(cb);  // <== call cb when the document is saved
} 
```

# python - 如何使 Python 站点包在我的安装目录之外可用？

> ID：13187490
> 
> 赞同：0
> 
> 时间：2012-11-02T00:19:18.840
> 
> 标签：python, windows, libraries

我正在运行 Windows 7 并安装了 Python 2.7.3。我的安装目录是 C:\Python27，我下载的包（例如 numpy、pyserial、scipy 等）可以在 C:\Python27\Lib\site-packages 中找到。

是否可以将库（特别是 pyserial）安装到网络驱动器？最终，我想要实现的是让任何在他们的机器上安装了 Python 的人都能够运行某些东西，即使他们没有安装特定的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:20:36.100

[sys.path.append](http://docs.python.org/2/library/sys.html#sys.path)是您正在寻找的。

# regex - 用于 grep 的正则表达式，用于 1280x720 形式的屏幕分辨率

> ID：13187495
> 
> 赞同：0
> 
> 时间：2012-11-02T00:19:45.553
> 
> 标签：regex, bash

我正在尝试为 grep 提供屏幕分辨率的正则表达式模式（例如`1280x720`），如下所示

```
[0-9]{3,}x[0-9]{3,} 
```

但它似乎没有工作。

以下有效，但不能转化为上述。

```
[0-9][0-9][0-9][0-9]*x[0-9][0-9][0-9][0-9]* 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:39:32.550

这是一个 ERE（扩展正则表达式），grep 使用 BRE（默认情况下是基本正则表达式。您可以转义 {}：

```
grep '[0-9]\{3,\}x[0-9]\{3,\}' 
```

或告诉 grep 将其解释为 ERE：

```
grep -E '[0-9]{3,}x[0-9]{3,}' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:21:49.227

您的正则表达式似乎适用于 bash ：

```
[[ 1280x720 =~ [0-9]{3,}x[0-9]{3,} ]] && echo OK
OK 
```

如果你想使用`grep`：

```
$ cat B
640x480
$
$ grep -c "[0-9]\{3,\}x[0-9]\{3,\}" B
1
$
$ grep --version
grep (GNU grep) 2.14 
```

# c - 静态链接 glibc，但使用 GCC 动态链接其他一些库

> ID：13187499
> 
> 赞同：15
> 
> 时间：2012-11-02T00:20:02.073
> 
> 标签：c, linker, glibc, static-linking

我需要将 glibc 静态链接到我的项目，因为目标平台只支持一个非常旧的平台（但它适用于我的工具链中的静态链接 glibc，我已经检查过了）

不幸的是，这个应用程序必须使用 pthread 库，但是静态链接的 libpthread 占用了太多空间。

我想静态链接glibc，动态链接pthread。

运行此命令后

```
powerpc-unknown-linux-gnu-gcc object_files -lrt -lpthread -Wl,-Bstatic -lc 
```

我得到：

```
/powerpc-unknown-linux-gnu/bin/ld: cannot find -lgcc_s 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T00:32:12.583

有一个`-static-libgcc`如果可能有帮助

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T00:29:13.623

你应该使用`-static`，而不是`-Wl,-static`。后者绕过了 gcc 的知识，因此 gcc 仍在尝试链接 shared`libgcc_s.so`而不是 static `libgcc_eh.a`。

如果您的目标是静态链接 libc 而动态链接 libpthread，那么这根本行不通。您不能混合和匹配不同版本的 libpthread；它是 glibc 的一部分，只是一个单独的文件，内部需要匹配。即使使用相同的版本，我认为静态链接 libc 和动态链接 libpthread 也会很糟糕。

如果 glibc 对您的需要来说太大了，您可以尝试使用替代 libc，例如[uClibc](http://www.uclibc.org)或[musl](http://www.musl-libc.org)。

# android - 无需在 Android 应用程序中单击即可自动关闭对话框

> ID：13187505
> 
> 赞同：0
> 
> 时间：2012-11-02T00:21:09.467
> 
> 标签：android, android-dialog

我们可以创建一个警报对话框，它会在执行一些活动后出现并自动关闭而无需任何单击（无论是单击任何按钮还是在警报对话框外单击）？就像，如果我们可以在对话框中添加一些延迟以在指定的几秒钟后关闭。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:30:38.963

自动关闭警报对话框的更好方法是使用 Handler 来延迟对话框。

例子：

```
new Handler().postDelayed(new Runnable() {

        public void run() {
            Dialog.dismiss();
        }
    }, 2000); 
```

这里 2000 指定延迟警报对话框的毫秒数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:24:32.450

[http://developer.android.com/guide/topics/ui/notifiers/toasts.html](http://developer.android.com/guide/topics/ui/notifiers/toasts.html) 这应该可以完成。吐司不需要点击，并且可以定时。

# android - 拖动时将数据附加到不同的视图

> ID：13187513
> 
> 赞同：0
> 
> 时间：2012-11-02T00:22:28.540
> 
> 标签：android

我有多个视图被拖动，每个视图都代表一种情感。这个想法是让每个视图向数据库发送一个条目，该条目根据拖动的视图而变化。

视图是在这里创建的：

```
_root = (ViewGroup)findViewById(R.id.root);

_view = new ImageView(this);
_view.setImageResource(R.drawable.smile); 
_view2 = new ImageView(this);
_view2.setImageResource(R.drawable.frown); 

RelativeLayout.LayoutParams layoutParams = new RelativeLayout.LayoutParams(150, 50);
layoutParams.leftMargin = 250;
layoutParams.topMargin = 250;
layoutParams.bottomMargin = -250;
layoutParams.rightMargin = -250;
_view.setLayoutParams(layoutParams);
_view.setOnTouchListener(this);

RelativeLayout.LayoutParams layoutParams2 = new RelativeLayout.LayoutParams(150, 50);
layoutParams2.leftMargin = 250;
layoutParams2.topMargin = 500;
layoutParams2.bottomMargin = -250;
layoutParams2.rightMargin = -250;
_view2.setLayoutParams(layoutParams2);
_view2.setOnTouchListener(this);
_root.addView(_view);
_root.addView(_view2);

} 
```

移动和拖动在这里定义：

```
public boolean onTouch(View view, MotionEvent event) {
    final int X = (int) event.getRawX();
    final int Y = (int) event.getRawY();
    switch (event.getAction() & MotionEvent.ACTION_MASK) {
        case MotionEvent.ACTION_DOWN:
            RelativeLayout.LayoutParams lParams = (RelativeLayout.LayoutParams) view.getLayoutParams();
            _xDelta = X - lParams.leftMargin;
            _yDelta = Y - lParams.topMargin;
            break;
        case MotionEvent.ACTION_UP:  
            Intent intent = new Intent(this, Exit_Activity.class);
         startActivity(intent);
            break;
        case MotionEvent.ACTION_POINTER_DOWN:
            break;
        case MotionEvent.ACTION_POINTER_UP:
            break;
        case MotionEvent.ACTION_MOVE:
            RelativeLayout.LayoutParams layoutParams = (RelativeLayout.LayoutParams) view.getLayoutParams();
            layoutParams.leftMargin = X - _xDelta;
            layoutParams.topMargin = Y - _yDelta;
            layoutParams.rightMargin = -250;
            layoutParams.bottomMargin = -250;
            view.setLayoutParams(layoutParams);
            break;
    }
    _root.invalidate();
    return true;
}

} 
```

如您所见，ACTION_UP 当前将用户发送到下一个活动，而不管拖动哪个视图。让应用区分视图的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:06:54.987

为单个视图设置 ID。单击视图时检索 ID。[ID](http://developer.android.com/reference/android/view/View.html)是每个视图的唯一标识。设置标识：

```
view.setId(x); 
```

单击后，检索 id：

```
id = view.getId(); 
```

# facebook - 如果我声明 Facebook 页面用户名，他们会自动从旧 URL 重定向吗？

> ID：13187517
> 
> 赞同：-1
> 
> 时间：2012-11-02T00:23:07.207
> 
> 标签：facebook

我的 Facebook 页面目前有 URL [https://www.facebook.com/pages/sitenamecom/129112207588](https://www.facebook.com/pages/sitenamecom/129112207588)。我想声明我的用户名，所以它会变成[https://www.facebook.com/sitename](https://www.facebook.com/sitename)。我的问题是指向旧网址的现有链接是否会自动重定向到新网址。我在很多地方都有链接，并且会随着时间的推移而改变，但如果我错过了一些链接，它们会自动转到新页面的 URL 还是会出现错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T10:23:53.623

> 我的问题是指向旧网址的现有链接是否会自动重定向到新网址。

是他们会。

我不知道这是否在某处明确记录，但根据个人经验，我可以说到目前为止，一旦设置了页面名称，仍然使用页面的“旧”地址没有问题。

点击旧链接的用户将被重定向到新地址，指向“旧”页面地址的点赞按钮将自动显示并计算“新”地址的点赞数（因为它们基本上都指的是同一个对象） .

# c# - 无法从 ASP.NET 访问受密码保护的 Java Web 服务

> ID：13187519
> 
> 赞同：0
> 
> 时间：2012-11-02T00:23:10.897
> 
> 标签：c#, asp.net, web-services

我有以下场景：我有一个 ASP.NET 2.0 中的网站。它调用另一个 Web 服务（在 JAVA 中）来检索用户的信息。此网络服务受密码保护并使用“https”作为其传输方式（如果我在浏览器的地址栏中输入网络服务的地址，“Windows 安全”窗口会弹出“未受保护根 [IP 地址] 的服务器需要用户名和passowrd，我不知道这是否被称为受密码保护的 web 服务。）在我输入 webservice 组提供的用户名和密码后，我可以看到他们的一些一般消息，表明身份验证已完成。

以下代码是否适用于上述场景：

```
WebServiceProxy client=new WebServiceProxy();
client.Url=@"serviceEndPoint"; 
```

...

```
NetworkCredential netCred=new NetworkCredential();
netCred.UserName="UserName";//*User name supplied by WebService group.
netCred.Password="Password";//*Password supplied by WebService group.
client.Credentials=netCred;
var retObject=client.GetUserInfo(userId); 
```

这是我应该做的传递用户名/密码吗？

为了解决这个问题，我在一个名为“soapUI”的工具中创建了一个 Soap 消息并调用了该服务，并且我能够获得带有用户信息（用户对象）的响应。但是从代码中，我得到了响应，但用户对象为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:35:20.480

服务是用 Java 还是 DotNet 创建的。没关系，一切都会以同样的方式被消耗掉。

# python - 从字典中调用函数，导入设置文件中的字典

> ID：13187520
> 
> 赞同：0
> 
> 时间：2012-11-02T00:23:13.540
> 
> 标签：python

所以我有一本字典，里面有一堆我用来调用函数的名字。它工作正常，但我更喜欢将它放在我的设置文件中。但是，如果我这样做，我会从设置文件中得到错误，指出没有该名称的函数（即使我当时没有调用它们）。任何解决方法？

```
def callfunct(id, time):
    #stuff here
def callotherfunct(id, time):
    #stuff here
dict = {"blah blah": callfunct, "blah blah blah": callfunct, "otherblah": callotherfunct}
dict[str(nameid)](id, time) 
```

希望这是有道理的。也对其他想法持开放态度，但基本上我有大约 50 次这些定义的迭代以及由 nameid 传递的需要调用特定函数的唯一名称，所以这就是我这样做的原因，以便我可以快速添加新名称. 如果我也可以将字典无缝地放入设置文件中，那显然会更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:32:18.467

如果你试试

```
def f_one(id, time):
    pass

def f_two(id, time):
    pass

d = {"blah blah":"f_one", "blah blah blah":"f_one", "otherblah","f_two"
locals()[d[str(nameid)]](id, time) 
```

（用您要调用的函数的字符串名称加载配置文件来替换字典初始化），这行得通吗？

如果不是，则需要更多信息：配置文件是什么样的，您是如何加载它的？

我猜配置文件部分不工作的原因是你试图直接从配置文件中引用函数，这不应该工作。这是使用存储在配置文件中的任何内容并在字典中查找它`locals()`（如果你在一个函数中，你将不得不使用它`globals()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:33:46.293

只有当您尝试访问它时，您才能使用查找功能初始化字典：

```
d = {}
d.setdefault('func1', globals()['func1'])() 
```

# c# - 在文本框中使用图像

> ID：13187522
> 
> 赞同：1
> 
> 时间：2012-11-02T00:23:37.690
> 
> 标签：c#, wpf, input, textbox

我正在创建一个显示十六进制值的控件（例如 FFAA-CA10-56D7）。现在该值由图像组成。控件的值如下所示：

![在此处输入图像描述](../Images/ef4a5dca0592e6e351607c0991274d9d.png)

对于只读控件，我没有问题。我能够根据值放置适当的图像。因此，如果我必须将值设置`FF`为例如，我将遍历字符串上的字符，然后放置相应的图像。

**现在问题**出在读写控件上。如果我可以使用相同的字体，那就太好了。现在我在用户输入值时附加图像。**但它并不友好**。如果用户想通过拖动鼠标选择 3 个字符怎么办？或者我如何执行将选择多个字符的 shift+箭头组合键。

**所以简而言之，**我希望保持控件的外观和感觉，并且我不想替换文本框的图像。你们推荐什么方法，以便我可以保持相同的外观和感觉。

**我尝试过的事情：**

我试图从那些 png 中创建我的自定义字体。但是没有成功找到合适的程序，使我能够从 png 图像创建字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:41:21.753

我会通过使用一个自定义 ListBox 来做到这一点，其中一个水平 StackPanel 作为它的 ItemPanelTemplate，它的 ItemsSource 将是一个 char 列表。那么您可以提供一个包含相应图像的适当 DataTemplate（取决于 char 值，可能使用 DataTriggers）。ListBox 具有多选功能，因此您在模仿 TextBox 的文本选择行为时应该没有问题，并且通过将 char 列表作为 ItemsSouce，您还可以允许复制（通过在 ListBox 中执行您自己的 EditCommands.Copy 实现。

编辑：这是您肯定要实现自己的[自定义控件的情况之一](http://www.codeproject.com/Articles/14340/Creating-a-look-less-custom-control-in-WPF)

# ajax - 使用 AJAX 发送电子邮件

> ID：13187523
> 
> 赞同：0
> 
> 时间：2012-11-02T00:23:40.490
> 
> 标签：ajax, jquery

我正在尝试使用 Webscript ( [http://webscript.io](http://webscript.io) ) 制作 AJAX 联系表格，但我遇到了问题。如果没有 AJAX，表单运行良好并且电子邮件已送达。尝试添加 AJAX 功能后，我停止通过表单接收电子邮件，但 AJAX 似乎运行成功。这是一个带有我的示例代码的 JS Bin：http: [//jsbin.com/aqahok/1/edit](http://jsbin.com/aqahok/1/edit)。我感觉问题不在于 Webscript（我相信您无法查看），而在于 JS，因为该表单在没有 AJAX 的情况下工作。

感谢您查看我的问题，并随时问我您可能遇到的任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:28:23.023

您创建的 JS Bin 使 webscript.io 返回**500 Internal Server Error**（您可以在 Firebug 或 Chrome 开发工具中看到它）。AJAX 部分只是不检查响应并显示“已提交联系表单！”。所以问题就在他们这边。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:36:46.043

您的 JavaScript 正在寻找`input[name="message"]`，但它应该正在寻找`textarea[name="message"]`。我改变了它并尝试发送电子邮件。它似乎有效（没有错误），所以希望就是这样。

# joomla - 重命名 index.php 并访问 Joomla 中的其他页面

> ID：13187524
> 
> 赞同：2
> 
> 时间：2012-11-02T00:24:08.760
> 
> 标签：joomla

我必须在我的网站上在线进行一些修改，我不希望用户看到这些页面。因此，我将 index.php 重命名为 index_orig.php，并放置了另一个 index.html，为我的用户显示一条消息（网站正在建设中）。

我的问题是我想在线访问我的其余页面以检查修改直到满意，但是当我尝试通过整个 URL 访问其余页面时（显示 404 错误）。示例：www.mywebsite.com/floder1/pagetarget.php。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T00:41:38.753

放回index.php。在您的全局配置中，将站点设置为离线并放置消息和徽标等（假设您使用的是 2.5 或 3）。您将能够登录并查看该站点。

请记住，在数据库驱动的 cms 中，没有您在静态 html 站点中认为它们的方式的页面。一切都被推入模板文件的 index.php 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:25:32.590

在您使用的任何网络服务器上更新目录默认文档。还要更新任何可能指向 index.php 的重写规则

# xslt - XSL:IF 内 XSL:for-each-group

> ID：13187528
> 
> 赞同：1
> 
> 时间：2012-11-02T00:24:41.467
> 
> 标签：xslt

在我的 XSLT 中，我有类似的东西：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="UTF-8" omit-xml-declaration="yes"/>

<xsl:template match="PhyscianTotals" name="PhyscianTotals">
<xsl:for-each select="PhysicianTotals">
    <xsl:for-each-group select="Statistic" group-by="Type">
        <xsl:if test="Title='PHYSICIAN DETAIL TOTAL'">
            <xsl:element name="totals">
    </xsl:element>
     </xsl:if>
</xsl:for-each-group>
</xsl:for-each>
</xsl:template>

</xsl:stylesheet> 
```

这是有效的 XSLT 吗？具体来说，“xsl:if 在 xsl:for-each-group 内”部分。我们调用的 XSLT 编译工具之一总是报错：在样式表的这个位置不允许使用 xsl:if。如果我删除 xsl:for-each-group，它就会通过。我不确定是我的 xslt 有错误还是编译工具。

* * *

结果我们的工具只支持 XSLT 1.0。所以我想我回来只使用 1.0 标签重写 XSLT。

原始 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<PhysicianTotals>
    <Statistic>
      <Title>PHYSICIAN TOTAL</Title>
      <Type>Type 1</Type>
      <Key>Cases</Key>
      <Value>1</Value>
    </Statistic>
    <Statistic>
      <Title>PHYSICIAN TOTAL</Title>
      <Type>Type 1</Type>
      <Key>Percentage</Key>
      <Value>25.0%</Value>
    </Statistic>
    <Statistic>
      <Title>PHYSICIAN TOTAL</Title>
      <Type>Type 2</Type>
      <Key>Cases</Key>
      <Value>3</Value>
    </Statistic>
    <Statistic>
      <Title>PHYSICIAN TOTAL</Title>
      <Type>Type 1</Type>
      <Key>Percentage</Key>
      <Value>75.0%</Value>
    </Statistic>
</PhysicianTotals> 
```

输出将如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<totals>
<type>PHY_DETAIL</type>
<detailInfo>
    <code>Type 1</code>
</detailInfo>
<count>
    <caseValue>1</caseValue>
    <percentValue>25.0%</percentValue>
</count>
</totals>
<totals>
    <type>PHY_DETAIL</type>
<detailInfo>
    <code>Type 2</code>
</detailInfo>
<count>
    <caseValue>3</caseValue>
    <percentValue>75.0%</percentValue>
</count>
</totals> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:18:21.463

Apart from the copy/paste error in the xsl:output declaration, your code looks perfectly OK to me. It's a bit suspect - do you really have an element called PhyscianTotals with a child called PhysicianTotals - so I suspect you're not showing us the code that actually generates the error.

Another possibility is that the tool generating the error is an XSLT 1.0 processor.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:36:24.123

> ```
> enchttp://stackoverflow.com/editing-helpoding="UTF-8" 
> ```

**这是语法/词法非法的名称：`enchttp://stackoverflow.com/editing-helpoding`**

你的意思是`encoding`？

**除此之外，没有其他词法/语法错误，而且转换似乎存在许多逻辑问题，可能不会产生想要的结果**——但如果没有看到源 XML 文档和期望的结果。

# c# - 编写批处理文件以运行 .exe 文件

> ID：13187529
> 
> 赞同：0
> 
> 时间：2012-11-02T00:24:41.433
> 
> 标签：c#, visual-studio-2010, batch-file

我已经用 Visual Studio 2010 创建了一个 C# 控制台应用程序。我想在没有人工交互的情况下运行我的程序，甚至不需要打开 Visual Studio。手动执行此操作将导航到 pathName\programName\programName\bin\Debug\ 并双击应用程序文件 programName.exe

但我怎样才能做到这一点自动化？没有打开VS？

谢谢， 莱恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:29:25.790

打开记事本，输入1行：

```
pathName\programName\programName\bin\Debug\programName.exe 
```

另存为`Runner.bat`

随心所欲地运行“Runner.bat”。

但是，除非您指定任何额外的参数，或者任何其他影响程序执行的东西，否则这是完全多余的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:28:49.553

```
@echo off
title LainsAutoRun

ECHO "Running Application"

"YourApp.exe" 

:end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:30:27.633

如果您的文件名为 C:\run.exe，您可以从批处理文件中运行它，如下所示：

创建一个批处理文件 myfile.bat 将其粘贴到您的批处理文件“C:\run.exe”中保存

现在运行这个批处理文件将运行你的 exe。

要自动执行此操作，请将任务添加到 Windows 计划程序中。您可以指定希望自动运行批处理文件或 exe 的频率。

顺便说一句，要在不打开 VS 的情况下运行此 exe，只需在命令提示符下键入 C:\run.exe。

有关 Windows 调度程序的更多信息在[这里](http://windows.microsoft.com/en-US/windows7/schedule-a-task)

# iphone - 使用 UIGestures 删除选定的 uiimage？

> ID：13187535
> 
> 赞同：3
> 
> 时间：2012-11-02T00:25:15.333
> 
> 标签：iphone, uiview, uiimage, gestures

我正在尝试通过长按手势来删除图像......问题是我可以在同一个视图上有多个图像。并且可能希望通过按住图像来删除每个图像。

所以可以说我有：

```
 @property (nonatomic, retain) IBOutlet UIImageView *Image1;
 @property (nonatomic, retain) IBOutlet UIImageView *Image2;
 @property (nonatomic, retain) IBOutlet UIImageView *Image3; 
```

都在同一个视图中。现在我按住 Image1。如何让 Longpress 手势知道我选择了 Image1 ？

```
- (void)handleDelete:(UILongPressGestureRecognizer *)recognizer {
   //Something in here to detect image is selected and delete :)
 } 
```

谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:04:43.060

提供`UIGestureRecognizerDelegate`in .h 文件，然后尝试此代码...

```
 UILongPressGestureRecognizer *longpressGesture = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressHandler:)];
    longpressGesture.minimumPressDuration = 5;
    [longpressGesture setDelegate:self];
    [self.yourImages addGestureRecognizer:longpressGesture];
    [longpressGesture release];

    - (void)longPressHandler:(UILongPressGestureRecognizer *)gestureRecognizer {
        NSLog(@"longPressHandler");
        UIImageView *tempImage=(UIImageView*)[gestureRecognizer view];
        [tempImage removeFromSuperview];
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:54:57.547

添加`UILongPressGestureRecognizer`到单个图像，然后在检测到手势时将其删除，如下所示：

```
UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(longPressDetected:)];
longPressRecognizer.minimumPressDuration = 3;
longPressRecognizer.numberOfTouchesRequired = 1;
[self.Image1 addGestureRecognizer:longPressRecognizer];
[self.Image2 addGestureRecognizer:longPressRecognizer];
[self.Image3 addGestureRecognizer:longPressRecognizer];

- (IBAction)longPressDetected:(UILongPressGestureRecognizer *)sender {
    NSLog(@"Long Press");
    // Delete/Remove sender object
} 
```

# ios - 这个按钮叫什么？

> ID：13187544
> 
> 赞同：0
> 
> 时间：2012-11-02T00:26:24.523
> 
> 标签：ios, facebook, button, navigation

这可能是一个非常快速的问题，我似乎无法找到答案：

我们在左侧的 facebook 导航栏上看到的按钮类型是什么？

![在此处输入图像描述](../Images/3b10d7e3781c6bfe670d40a84b94fe8d.png)

有什么特别的名字吗？

我检查了苹果人机界面上的标准按钮，但似乎找不到它列出：http: [//developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/UIElementGuidelines/UIElementGuidelines.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:19:10.043

我最近在许多应用程序中看到了这个按钮。您可以将其称为拆分视图显示按钮或侧边栏显示按钮。我不相信它有一个官方名称，但有许多开源项目正在实施它。

这是一个涵盖如何编程的stackoverflow链接：

[SplitView 就像 iPhone 上的 Facebook 应用程序](https://stackoverflow.com/questions/7775195/splitview-but-on-iphone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:40:11.183

从 Cocoa 或 Apple Development 的角度来看，该按钮没有特殊名称。该图标可用于显示列表或菜单项或其他任何内容，具体取决于不同应用程序的开发实践或 UI 指南。最好检查一下 facebook 文档是否有任何特殊名称。

# backbone.js - 主干.js 更改事件仅触发第一次

> ID：13187545
> 
> 赞同：0
> 
> 时间：2012-11-02T00:26:27.860
> 
> 标签：backbone.js, model, event-binding

我有一个包含日历的主干.js 模型。用户可以在日历中来回切换，我可以获取所选日历日的事件。

在我的模型中，我有

```
初始化：函数（）{
    this.on('change:date',this.get_cal());
},
get_cal：函数（）{
    alert('获取日历');
    这个.fetch(...
}

```

在我看来我有

```
cal_date：函数（移动）{
    Myapp.cal.attributes.date.setDate(Myapp.cal.attributes.date.getDate()+move);

}

```

当日期更改时，我希望主干触发更改事件，并获取新日期的日历事件。不幸的是，这并没有发生。

我也尝试将打印的日期放入模型中

```
Myapp.cal.set({print_date: formatted_date});

```

认为骨干可能缺少更新，因为我没有调用“设置”，或者因为它看到一个日期对象并认为它已经有一个日期对象，因此没有改变。

我也尝试`Myapp.cal.trigger('change')`在视图中使用 , 触发更改，但这也不起作用。也没有通过调用`Myapp.cal.cal_events.refresh()`where cal_events 是保存日期事件的集合来删除日历事件。

你知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:45:50.660

我认为问题在于这一行的**get_call**之后的括号：

```
this.on('change:date',this.get_cal()); 
```

您应该删除它们，因为它们在初始化时调用**get_call**而不是使它们成为事件处理程序。

# sql - 显示 Oracle 表中的索引

> ID：13187546
> 
> 赞同：0
> 
> 时间：2012-11-02T00:26:32.377
> 
> 标签：sql, oracle, indexing

**问题陈述：-**

给定一个 oracle 表名，我如何才能确定是否在该表的特定列上创建了任何索引？

我知道这是一个非常基本的问题，我对 SQL 的东西不太熟悉，所以这就是为什么会出现问题。因此，如果有人可以帮助我，请在这里发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:40:32.800

```
SELECT index_name
  FROM all_ind_columns
 WHERE table_name = 'THE_TABLE'
   AND column_name = 'THE_COLUMN'
   AND index_owner = 'THE_OWNER'; 
```

这应该告诉您在表 'THE_TABLE' 中具有所有者 'THE_OWNER' 的任何索引的名称。该列可能是也可能不是索引中的唯一列。

与字典成为朋友。它会帮助你！

# java - 如何将微调器项目设置为等于一个值

> ID：13187549
> 
> 赞同：0
> 
> 时间：2012-11-02T00:27:17.733
> 
> 标签：java, android, loops

我正在尝试设置一个微调器项目**Equal** to a **Specific Integer**。我正在使用**onItemSelected**来尝试完成此操作，但问题是，我需要为所选项目设置的整数**乘以**与**Integer****在****同一**行中的另一个**EditText**。稍微混淆一下，我试图乘以的行中的**所有****EditTexts**都被**引用**到一个列表，然后进行**迭代**，以便我可以将它们全部加起来。如何将每个**EditText与****Selected Spinner Item**放在同一行中********************（它有一个Int **Value**）**乘以****Selected Spinner Item**？到目前为止，这是我所拥有的……**对不起，一团糟！**********************

 ****```
 int count = 1;
double gradeValue;
List<EditText> allEd = new ArrayList<EditText>();
List<Spinner> allSp = new ArrayList<Spinner>();

@SuppressWarnings("deprecation")
public void onClick(View v) {
    TableLayout tableLayout1 = (TableLayout) findViewById(R.id.tableLayout1);

    switch(v.getId()){
    case R.id.button1:
        if(count != 16){
            count++;

            // Create the row only when the add button is clicked
            TableRow tempRow = new TableRow(MainActivity.this);
            EditText tempText1 = new EditText(MainActivity.this);
            EditText tempText2 = new EditText(MainActivity.this);
            TextView tempTextView = new TextView(MainActivity.this);
            Spinner spinnerTemp = new Spinner(MainActivity.this);
            EditText editText1 = (EditText) findViewById(R.id.editText1);
            EditText editText2 = (EditText) findViewById(R.id.editText2);
            TextView textView3 = (TextView) findViewById(R.id.textView3);
            Spinner s = (Spinner) findViewById(R.id.spinner1);
            tempTextView.setText(count + ".");

            tempRow.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
            tempText1.setLayoutParams(editText1.getLayoutParams());
            tempText2.setLayoutParams(editText2.getLayoutParams());
            tempTextView.setLayoutParams(textView3.getLayoutParams());
            tempText1.setInputType(InputType.TYPE_CLASS_TEXT);
            tempText2.setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_DECIMAL);
            tempText2.setId(count);
            spinnerTemp.setLayoutParams(s.getLayoutParams());
            spinnerTemp.setId(count);
            String options[] = { "A+", "A", "A-", "B+", "B", "B-", "C+", "C", "C-", "D+", "D", "D-", "F" };

            ArrayAdapter<String> spinnerArrayAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item, options);
            spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); // The drop down view
            spinnerTemp.setAdapter(spinnerArrayAdapter);

            allEd.add(tempText2);
            allEd.add(editText2);
            allSp.add(spinnerTemp);

            tempRow.addView(tempTextView);
            tempRow.addView(tempText1);
            tempRow.addView(tempText2);
            tempRow.addView(spinnerTemp);
            tableLayout1.addView(tempRow);
        } 
        }
        break;
    case R.id.button2:
        if(count != 1){
            count--;
            tableLayout1.removeView(tableLayout1.getChildAt(count));
        }

        break;
    case R.id.button3:
        int calculation = 0;
        double spinnerChoice = 0;
        for(int i = 0; i < allEd.size(); i++) {
            EditText totalUnits = allEd.get(i);
            try {
            int units = Integer.parseInt(totalUnits.getText().toString());

            calculation += units;
            }catch (Exception e) {
                //ignore
            }

        for(int j = 0; j < allSp.size(); j++) {
            Spinner gradeTotal = allSp.get(j);
            try {
            int grades = gradeTotal.getCount();

            }catch (Exception e) {
                //ignore
            }

        }
    }
    }

public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    if (pos == 0){
        //A+
        gradeValue = 4.0;
    } else if (pos == 1){
        //A
        gradeValue = 4.0;
    } else if (pos == 2){
        //A-
        gradeValue = 3.7;
    } else if (pos == 3){
        //B+
        gradeValue = 3.3;
    } else if (pos == 4){
        //B
        gradeValue = 3.0;
    } else if (pos == 5){
        //B-
        gradeValue = 2.7;
    } else if (pos == 6){
        //C+
        gradeValue = 2.3;
    } else if (pos == 7){
        //C
        gradeValue = 2.0;
    } else if (pos == 8){
        //C-
        gradeValue = 1.7;
    } else if (pos == 9){
        //D+
        gradeValue = 1.3;
    } else if (pos == 10){
        //D
        gradeValue = 1.0;
    } else if (pos == 11){
        //D-
        gradeValue = 0.7;
    } else if (pos == 12){
        //F
        gradeValue = 0.0;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:35:15.623

遍历适配器以查找要匹配的值。跟踪循环的索引。找到匹配项后，将微调器的 selectedItem 设置为该索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:31:16.667

这看起来比应该的要难，因为您使用的是表格布局。如果您的所有行都相似并且对您的设计无害，那么您可能会考虑使用列表视图。那么您可以简单地通过它们的位置来引用同一行上的事物 - 作为参数方便地提供。

但是既然你有这样的，你可以在arraylist中的位置获取所选微调器项目的索引。然后您可以参考 EditText 数组列表。在我的脑海中，我在想你`setTag()`对你选择的微调器项目做一个标签。然后你循环寻找标签并在它存在时做一些事情。这是我想出的。请注意，我将您的 onitemselected 方法更改为返回双精度值的方法，因为我发现它对此类任务更有用：

```
 private double calcGradeValue (int pos) {
         if (pos == 0){
             //A+
             gradeValue = 4.0;
         } else if (pos == 1){
             //A
             gradeValue = 4.0;
         } else if (pos == 2){
             //A-
             gradeValue = 3.7;
         } else if (pos == 3){
             //B+
             gradeValue = 3.3;
         } else if (pos == 4){
             //B
             gradeValue = 3.0;
         } else if (pos == 5){
             //B-
             gradeValue = 2.7;
         } else if (pos == 6){
             //C+
             gradeValue = 2.3;
         } else if (pos == 7){
             //C
             gradeValue = 2.0;
         } else if (pos == 8){
             //C-
             gradeValue = 1.7;
         } else if (pos == 9){
             //D+
             gradeValue = 1.3;
         } else if (pos == 10){
             //D
             gradeValue = 1.0;
         } else if (pos == 11){
             //D-
             gradeValue = 0.7;
         } else if (pos == 12){
             //F
             gradeValue = 0.0;
         }
        return gradeValue;
    }

    public void spinnerLoop() {
        for(int i = 0; i < allSp.size(); i++) {
            if (allSp.get(i).getTag().toString() == "TAGGED!") {
                double gradeValue = calcGradeValue(allSp.get(i).getSelectedItemPosition()); 
                double calculation = (gradeValue) * (Integer.parseInt(allEd.get(i).getText().toString()));
//              do something with your calculation double
            }
        }
    } 
```****

# c++ - 慢 DirectX 帧速率

> ID：13187554
> 
> 赞同：1
> 
> 时间：2012-11-02T00:27:37.783
> 
> 标签：c++, directx

有谁知道在不减慢相机移动的情况下减慢场景帧速率的最佳方法。我基本上想调试一些关键帧动画但不影响相机。

任何想法，将不胜感激。

# xml - 在不包含其他元素的元素上应用模板

> ID：13187555
> 
> 赞同：1
> 
> 时间：2012-11-02T00:27:47.960
> 
> 标签：xml, xslt, xpath

假设我有一个元素 x，如果该元素不包含另一个元素 y，我想做一些事情，例如：

```
<xsl:for-each select="//x">
    <xs:if test="expression to check does not contain y">

    </xs:if>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:33:26.257

```
 not(y) 
```

测试元素是否没有直接子元素 y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:26:04.463

**更好的使用**：

```
<xsl:apply-templates select = "//x[not(y)]"/> 
```

这会将模板应用于没有子元素的任何`x`元素`y`。

通过这种方式，您无需在选择执行的匹配模板中指定任何条件逻辑。

**如果“包含”是指“有后代（不仅是孩子），那么上述内容应指定为**：

```
<xsl:apply-templates select = "//x[not(descendant::y)]"/> 
```

# jquery - jQuery Countdown - 倒计时结束时的事件

> ID：13187560
> 
> 赞同：1
> 
> 时间：2012-11-02T00:28:23.850
> 
> 标签：jquery, countdown

我使用下面的代码在网页上显示倒数计时器。如果可能，当倒计时达到零时如何显示内容？

问候

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript" src="../js/countdown.js"></script>
<script>
$(document).ready(function(){
    $("#countdown").countdown({
        date: "09 november 2012 12:00:00",
        format: "on"
    },
    function() {
        // callback function
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:34:25.390

如果你正在使用[这个 jQuery countdown](http://keith-wood.name/countdown.html)，你想要的东西可以通过在 options 中指定**onExpire**回调来实现。

# javascript - 我可以在 JavaScript 中运行 JavaScript 吗？

> ID：13187563
> 
> 赞同：3
> 
> 时间：2012-11-02T00:28:38.703
> 
> 标签：javascript

> **可能的重复：**
> [是否可以沙盒 JavaScript 在浏览器中运行？](https://stackoverflow.com/questions/195149/is-it-possible-to-sandbox-javascript-running-in-the-browser)

我想让用户能够在这样的文本区域中输入 JavaScript：

```
<!DOCTYPE html>
  <html>
    <head>
      <script>
        function lapzwans()
        {
          var d = document.getElementById("area").value;
          document.getElementById("blahblah").innerHTML = d;
        }
      </script>
    </head>
  <body>
    <h1>Javascript in Javascript</h1>
    <p>This experiment attempts to launch a script from another script.</p>
    <p>Enter your script in the text area</p>
    <textarea type="text" id="area"></textarea>
    <button onclick="lapzwans()">Click here</button>
    <p id="blahblah"></p>
    <p id="deegroller">Make this text green</p>
  </body>
</html> 
```

我已经尝试过了，但我没有得到任何结果。
这是不可能的，还是我做错了？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:38:26.247

eval 方法接受传递给它的任何字符串并尝试运行它。

```
eval("alert('foo')"); 
```

会提醒“foo”；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:40:36.943

您不需要使用邪恶的 eval 来执行此操作。

```
function lapzwans()
{
       var d=document.getElementById("area").value;
       document.getElementById("blahblah").innerHTML=d;

       var userScript = new Function(d);
       userScript();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T00:46:18.357

一个可能的答案：

```
eval(/* some JS here */); 
```

请注意，尽管您尝试执行的操作可能很危险（在某些情况下），因为您允许执行用户编写的任意 JS。

相关阅读：

*   [eval 有多邪恶？](http://javascriptweblog.wordpress.com/2010/04/19/how-evil-is-eval/)
*   [JavaScript 什么时候`eval()`不是邪恶的？](https://stackoverflow.com/questions/197769/when-is-javascripts-eval-not-evil)

# c++ - memset 或 bzero 是否保证结构中的字段指针将被清空？

> ID：13187570
> 
> 赞同：4
> 
> 时间：2012-11-02T00:29:29.777
> 
> 标签：c++, pointers, memset

假设你有一个 C++ 类 Foo，你说：

```
Foo* foos = new Foo[SOME_CONSTANT];
memset(foos, 0, sizeof(Foo)*SOME_CONSTANT);
//or the bzero equivalent 
```

并且 Foo 有一个数据成员`Bar* barPtr`。上述操作会保证 barPtr 为 NULL 吗？（即零）。我在 gdb 中遇到了一个案例，这不适用于 memset，我很好奇为什么。

我知道以上可能是不好的做法，但我是出于好奇。

我意识到我有一个额外的*，我在 memset 中做 sizeof(Foo* )*SOME_CONSTANT ......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:34:53.093

一方面，它是实现定义的。`memset`或`bzero`将用全零位模式填充指针值，这不能保证是给定平台上空指针的物理表示。它甚至不能保证产生一个有效的指针值，这意味着你最终可能会得到所谓的*陷阱表示*，它在访问时会触发未定义的行为。

另一方面，`bzero`是（或曾经是）POSIX 规范的一部分。如果内存服务，POSIX 要求（或至少曾经要求）空指针由全零位模式表示，这意味着在 POSIX 系统上它确实会将指针设置为空。

但同样，POSIX 提供的保证只是我回答的第一部分中提到的特定于实现的属性的一个示例。语言（C 或 C++）不提供此类保证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T00:30:38.300

不，空指针的表示不需要全部为零。

请参阅[comp.lang.c FAQ](http://www.c-faq.com/)的[第 5 节](http://www.c-faq.com/null/index.html)和[问题 7.31](http://www.c-faq.com/malloc/calloc.html)。

# asp.net-mvc - 即使设置了有效数据，实体框架也会在 saveChanges 时抱怨必填字段

> ID：13187573
> 
> 赞同：4
> 
> 时间：2012-11-02T00:29:49.143
> 
> 标签：asp.net-mvc, entity-framework, postgresql, devart

我在 MVC 中使用实体框架（首先使用数据库的 DbContext）。当用户从表单保存时，我在控制器中有一个条件，根据我的一些内部标志将实体发送到插入**方法的****更新。**

 **将实体发送到更新方法时，我将其标记为已修改 using `context.Entry(myEntity).State = EntityState.Modified;`，我调用 saveChanges() 并且一切正常。

将实体发送到插入方法时，我将其标记为添加使用`context.Entry(myEntity).State = EntityState.Added;`，但在调用 saveChanges() 时，我收到有关 2 个必需字段的错误...

问题是这两个字段不是空的，并且它们在保存之前有效地包含有效数据......我什至尝试在保存之前将新值强制到这两个字段但同样的错误。

提到我正在使用 Devart DotConnect For PostgreSQL 作为数据库提供程序可能会很有用。

知道如何调试这个问题吗？

**编辑：**

这是错误：

> 一个或多个实体的验证失败。有关更多详细信息，请参阅“EntityValidationErrors”属性。

在查找此 EntityValidationErrors 时，我收到以下 2 个特定错误：

> flg_actif 字段是必需的
> 
> user_creation 字段是必需的

如前所述，这些字段在保存之前填充了数据，所以我不明白发生了什么。

我正在使用 EF v4.0.30319（system.data.entity=> v4.0 和 EntityFramework=> v4.4）

**EDIT2：** 只是为了澄清一点：我试图插入的实体已经存在于数据库中。表格显示该数据库行的数据。保存时，我决定是否更新行（这很好用），但有时，我需要将编辑的行作为新寄存器插入，而不是更新它以保留数据库更改的历史记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:00:15.740

您能否验证您尝试保存的项目的 EntityKey 属性是否已设置或为空？

如果它已经有一个键，则上下文已经知道该项目，您应该使用 Attach 而不是将状态设置为手动添加。

编辑：从下面总结要点。看起来您正在做的是插入已与上下文关联的行的新副本。这几乎肯定是你的问题。*尝试根据*您的原始行创建一个新对象（即复制变量值或使用复制构造函数），然后添加该新对象。

此外，您不需要在新添加的对象上手动设置状态。您正在尝试强制此处的状态，因为上下文不会将该项目视为新项目。**

# http - Dart 的 HttpServer 和客户端缓存

> ID：13187579
> 
> 赞同：2
> 
> 时间：2012-11-02T00:30:18.583
> 
> 标签：http, caching, client-side, dart

所以，我注意到使用 Dart 内置的 HttpServer 类往往会每次都向每个文件发出客户端请求。

在 Apache 上，可以告诉客户端将文件缓存一段最长的时间——Dart 是否支持此功能以减轻 HttpSever 上的负载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:39:29.477

感谢您的提问！您可以在 HTTP 响应中设置任何 HTTP 标头。

例如：

```
onRequest(HttpRequest request, HttpResponse response) {
  ...
  response.headers.add("Cache-Control", "max-age=3600");
  ...
} 
```

如果您想要更复杂的处理，例如尊重 Etags 或 If-Modified-Since，您可能必须自己添加它们。一般来说，在 Nginx 或 Apache 等服务器后面代理 Dart HTTP 服务器是有意义的，然后让该服务器负责处理所有静态文件。

# git - 大型 66GiB 遗留 CVS 存储库 — 迁移到 GIT 或 Mercurial 是个好主意？

> ID：13187589
> 
> 赞同：4
> 
> 时间：2012-11-02T00:31:12.890
> 
> 标签：git, mercurial, cvs

十多年来，我们有一个非常大的遗留 CVS 存储库 (66GiB)，并且还在不断增加。现在我们有一些分包公司，需要在一些模块和分支上工作。

我们需要为他们创建一些分支并将这些分支发送给他们。我们还需要不时将他们的更改合并到我们的主要分支中。

我们关心的是：

*   我们不能绝对给他们整个回购，主要是担心安全。

*   我们需要向他们发送一些历史信息，而不仅仅是“HEAD”版本的代码。

*   我们仍在做一些开发工作，所以我们需要不时向他们发送变更集。

GIT 和 Mercurial 是从 CVS 迁移的好选择吗？GIT/Mercurial 能满足我们的需求吗？

编辑：我认为我们实际上需要一个具有多站点功能的集中式修订控制，能够基于部分中央回购创建异地回购。并且可以很容易地在站点之间合并。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T00:44:03.647

使用 Git，您可以使用该[`git subtree`](http://apenwarr.ca/log/?m=200904#30)命令“剪切”出您可以提供给分包商的子目录，然后轻松地将他们的更改重新集成到您的主线中。如果需要，您还可以定期向他们提供更新。该`git subtree`命令最初是一个附加组件，但已被纳入`contrib`官方 Git 发行版的目录。

可以限制您提供给外部用户的存储库中包含的历史记录数量。

不过，我预计您最关心的将是转向具有如此大的起始存储库的 DVCS。Git 会压缩你的 repo，所以当你完成时它不太可能是 66 GB，但它仍然会相当笨重（可能在 10 GB 左右，取决于你在那里存储的内容）。如果你不认为这是一个问题，那就去吧。

[我限制了对 Git 的回答，因为我对 Git 比对 Mercurial 更熟悉。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:37:54.160

66 GB 听起来很多。然而，众所周知，CVS 存储数据的效率并不高。Git 肯定会为您工作，但您必须将项目拆分为几个较小的 git 存储库。对于大多数项目，将功能拆分为几个独立的子项目（通常是子目录）并不是很困难。通常，您希望将任何给定 git 存储库的大小限制为平均小于 1-2 GB，当然它不应超过 5-10 GB。但是，请记住，git 非常擅长压缩其元数据（只要您`git gc`偶尔运行一次）。

现在，一旦您将项目拆分为几个子项目（“很少”是相对术语 - Android 有 300 多个），您需要找到一种方法如何将它们再次“粘合”到连贯的目录结构中。

为此，有两种常见的方法：

1.  使用[`repo`](http://source.android.com/source/using-repo.html)Android项目开发的工具。它涉及创建仅包含一个 XML 文件（称为清单）的小型 git 存储库，该文件跟踪您的子项目签入的位置以及它们如何粘合在一起。这在 Linux 和 Mac 上运行良好，但不幸的是不支持 Windows（`repo`需要操作系统的符号链接支持）。
2.  使用`git submodule`'s。创建一个没有任何真实文件的 git 存储库，并将所有原始子项目作为子模块添加到该存储库中。从某种意义上说，这个*超级*git repo 与 Android repo manifest 的作用基本相同。这种方法的优点是它受到任何操作系统的支持，包括 Windows。

现在，如果您只想共享庞大项目的一小部分，您可以通过将任何子模块/子项目作为标准 git 存储库直接共享给您的合作伙伴来实现。

事实上，为了更方便，我强烈建议安装[Gerrit](http://code.google.com/p/gerrit/) - Java 中的 git 服务器实现，它也恰好是非常强大的代码审查引擎（Android 项目也使用）。Gerrit 的代码审查功能是完全可选的（如果您不想使用，则不必使用它），但您一定会喜欢 Gerrit 的统一用户身份验证、ssh 密钥管理和控制每个 git 存储库的访问权限的能力。这使得分享给第 3 方变得非常方便 - 您只需使用 Gerrit 让他们访问小部件，您就完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T15:08:38.693

> 十多年来，我们有一个非常大的遗留 CVS 存储库 (66GiB)，并且还在不断增加。现在我们有一些分包公司，需要在一些模块和分支上工作。
> 
> 我们需要为他们创建一些分支并将这些分支发送给他们。我们还需要不时将他们的更改合并到我们的主要分支中。

听起来您只想为分包商过渡，而不是为其他所有人。我强烈建议你不要这样做。要么转换所有人，要么不转换任何人。运行混合系统是一件非常痛苦的事情，尤其是在从 DVCS 上的人员那里获取更改时。

> 我们关心的是：
> 
> *   我们不能绝对给他们整个回购，主要是担心安全。

是您的 CVS 存储库中有多个模块，但不能给它们所有模块，或者您想限制它们可以访问的历史记录？

当模块存储为单独的存储库而不是一个存储库中的多个模块时，DVCS 工作得更好*。这有很多原因，但主要是为了不同模块中的更改不会导致不必要的合并。

（* CVCS 也是如此，但是创建一个人们只做一次的新模块通常会很痛苦。我怀疑如果它被拆分，你不会有 66GB。）

因此，如果您进行转换，则需要分离模块。这将允许您共享一些模块而不是其他模块。我知道 Mercurial 能够在转换期间从多模块存储库中设置的路径创建存储库。我希望 Git 具有类似的功能。

> *   我们需要向他们发送一些历史信息，而不仅仅是“HEAD”版本的代码。

这几乎决定了 DVCS。这是一个定义属性。

> *   我们仍在做一些开发工作，所以我们需要不时向他们发送变更集。

...这就是为什么您应该使用与他们相同的 VC 工具。否则，您将花费所有时间在系统之间转换变更集。

> GIT 和 Mercurial 是从 CVS 迁移的好选择吗？GIT/Mercurial 能满足我们的需求吗？

是的，是的，但这不是按钮转换。它需要计划、承诺和教育。

> 编辑：我认为我们实际上需要一个具有多站点功能的集中式修订控制，能够基于部分中央回购创建异地回购。并且可以很容易地在站点之间合并。

一个集中但分布式的版本控制系统。被我耍到了！

最后一点，不要将集中/分布式开发实践与集中/分布式工具混淆。在具有分布式 VCS 的集中式开发模型中工作是完全合理的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T01:13:14.057

选择 git。如果可以的话，更喜欢子模块而不是树，因为您可以更好地控制项目与其各自子项目之间的依赖关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-07T16:51:20.227

我会让其他发帖者回答子树和子历史问题，因为我对此并不熟悉。但是，我可以告诉你一些关于回购规模的事情。首先，你的 git repo 很可能比你的 CVS 小得多（我猜它会在当前 66GiB 的十分之一到一半之间）。

其次，是的，如果您将整个 CVS 存储库放入一个 git 存储库中，那么您的内部开发人员将在他们的个人 PC 上拥有整个存储库的副本。我每天使用的 git 存储库是 12GB，它不会引起任何实际问题。假设您的存储库很大，因为您的工作副本很大，当您想要在分支之间移动时，它实际上可以节省大量时间，因为您没有通过网络获取这么多文件。对我们来说，12GB 的 git repo 并不是什么大不了的事，因为我当前的工作副本（包含大多数目标的构建对象）是 git repo 本身之上的额外 37GB。在这种大小的存储库上，git 的命令比 subversion 的运行速度要快得多。

因此，请务必阅读其他人对子树和模块等的看法，但请放心，如果必须，您可能只导入整个内容。

# ios - Coretext 使 nsmutableattributtedstring 的一部分可链接

> ID：13187590
> 
> 赞同：0
> 
> 时间：2012-11-02T00:31:20.760
> 
> 标签：ios, core-text, nsattributedstring

假设我有一个`NSMutableAttributedString`带有以下文字的 CoreText：“继续阅读”

我想让第一个单词“继续”可点击，以便我可以点击它并显示另一个负载`UIView`。我已经找到了如何使它加下划线并将颜色更改为蓝色，但我怎样才能使它可链接。有什么例子吗？

这是我的代码，使其带有下划线，前景色为蓝色。

```
CFAttributedStringSetAttribute(string, CFRangeMake(0, 10),kCTForegroundColorAttributeName, [UIColor blueColor].CGColor);
          SInt32 type = kCTUnderlineStyleSingle;

CFNumberRef underline = CFNumberCreate(NULL, kCFNumberSInt32Type, &type);
CFAttributedStringSetAttribute(string, CFRangeMake(0, text.length),kCTUnderlineStyleAttributeName, underline);
CFAttributedStringSetAttribute(string, CFRangeMake(0, text.length),kCTUnderlineColorAttributeName, [UIColor blueColor].CGColor); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:20:59.877

那里有很多资源，可以在此处找到[Hyperlink in coretext](http://danielgorst.wordpress.com/2012/07/30/embedding-a-hyperlink-into-coretext/)

您需要做的是找到您想要使其可点击的单词/部分的边界，并在这些边界内添加一个处理点击的子视图。希望能帮助到你！

# javascript - 大型 Backbone / RequireJS App 上的全局资源共享

> ID：13187593
> 
> 赞同：0
> 
> 时间：2012-11-02T00:32:05.237
> 
> 标签：javascript, backbone.js, requirejs

我正在构建我的第一个大型 Backbone + Requiere 应用程序，我遇到了一个场景，访问某种“应用程序范围”范围是有意义的。我正在考虑在全局范围内创建一个新的命名空间，例如：

```
window.APP = {
  someProp : someValue,
  ....
} 
```

还有其他选择/良好做法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:56:40.987

在使用 require.js 时，我总是尽量避免全局作用域，最好避免它。

一个解决方案是创建一个`config.js`文件：

```
#config.js

define([], function() {
    return {
        someProp : someValue
    }
}) 
```

然后，当您需要在另一个模块中访问这些值时，您可以执行以下操作：

```
#foo-module.js

require(['config', 'backbone', 'underscore'], function(config, Backbone, _) {
    console.log(config.someProp)
}) 
```

# asp.net-mvc-3 - 验证多个文本字段 MVC 3

> ID：13187598
> 
> 赞同：0
> 
> 时间：2012-11-02T00:32:19.630
> 
> 标签：asp.net-mvc-3, jquery-validate

我想做多个文本字段的验证

**值必须介于 0 和 @ViewBag.MaxNote 之间**

在视图中，我有以下内容：

```
@model IList<RolesMVC3.Models.STUDENTS>
<P>Please enter a value between 0 and : @ViewBag.MaxNote<P>
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "myForm" }))
{

  @Html.ValidationSummary(true)

    @for (var i = 0; i < Model.Count(); i++)
    {
          @Html.TextBox("txt")
    }
 <input type="submit" value="type="submit" class="btn btn-primary" /> 
} 
```

我必须根据“@ViewBag.MaxNote”的值验证该字段

我怎么能做到这一点？

# r - tolower() 中的错误无效多字节字符串

> ID：13187605
> 
> 赞同：17
> 
> 时间：2012-11-02T00:33:06.127
> 
> 标签：r

这是我尝试在`tolower()`无法更改的文件中运行字符向量时收到的错误（至少，不是手动 - 太大）。

`Error in tolower(m) : invalid multibyte string X`

`É`字符的问题似乎是法国公司名称。尽管我还没有调查所有这些（也无法手动进行）。

这很奇怪，因为我的想法是编码问题会在 期间`read.csv()`而不是在事后的操作期间被发现。

有没有快速删除这些多字节字符串的方法？或者，也许是一种识别和转换的方法？或者甚至完全忽略它们？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-02T03:50:44.813

这是我解决问题的方法：

首先，我在文本编辑器（本例中为 Geany）中打开原始数据，单击属性并确定编码类型。

之后我使用了该`iconv()`功能。

```
x <- iconv(x,"WINDOWS-1252","UTF-8") 
```

更具体地说，我`data.frame`对导入的 CSV 中的每一列都执行了此操作。重要的是要注意我在电话中设置`stringsAsFactors=FALSE`的`read.csv()`。

```
dat[,sapply(dat,is.character)] <- sapply(
    dat[,sapply(dat,is.character)],
    iconv,"WINDOWS-1252","UTF-8") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-01-18T15:49:21.197

我遇到了同样的错误。但是，就我而言，不是在我读取文件时，而是在处理文件时稍晚一些。我意识到我遇到了错误，因为首先没有使用正确的编码读取文件。

我找到了一个更简单的解决方案（至少对我而言）并想分享。我只是添加了如下编码并且它起作用了。

`read.csv(<path>, encoding = "UTF-8")`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-07-22T19:26:44.757

我知道这已经得到了回答，但我想我会分享我的解决方案，因为我经历了同样的事情。

就我而言，我使用`str_trim()`包中的函数`stringr`来修剪字符串开头和结尾的空格。

`com$uppervar<-toupper(str_trim(com$var))`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-24T14:46:15.810

```
library(tidyverse)

data_clean = data %>%
    mutate(new_lowercase_col = tolower(enc2utf8(as.character(my_old_column)))) 
```

`new_lowercase_col`我用旧的大写字母命名的新列的名称在哪里，称为`my_old_column`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-08T19:48:50.840

```
# to avoid datatables warning: error in tolower(x) invalid multibyte string
# assuming all columns are char
new_data <- as.data.frame(
  lapply(old_data, enc2utf8),
  stringsAsFactors = FALSE
) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-26T06:41:39.850

我对这个问题的解决方案

```
library(dplyr) # pipes
library(stringi) # for stri_enc_isutf8

#Read in csv data
old_data<- read.csv("non_utf_data.csv", encoding = "UTF-8")

#despite specifying utf -8, the below columns are not utf8:
all(stri_enc_isutf8(old_data$problem_column))

#The below code uses regular expressions to cleanse. May need to tinker with the last 
#portion that selects the grammar to retain

utf_eight_data<- old_data %>% 
  mutate(problem_column = gsub("[^[:alnum:][:blank:]?&/\\-]", "", old_data$problem_column)) %>%
rename(solved_problem = problem_column)

#this column is now utf 8.

all(stri_enc_isutf8(utf_eight_data$solved_problem)) 
```

# asp.net-mvc - MVC3 Html.ActionLink 到子控制器

> ID：13187606
> 
> 赞同：0
> 
> 时间：2012-11-02T00:33:15.173
> 
> 标签：asp.net-mvc, razor

是否可以将`Html.ActionLink()`链接呈现到看起来像这样的路径？

```
/posts/1/comments/2 
```

在我的应用程序中，我有这条路线：

```
context.MapRoute(
    "CommentRoute",
    "posts/{postId}/comments/{action}/{commentId}",
    new {
        controller = "Comments",
        action = "details",
        commentId = UrlParameter.Optional }); 
```

我可以发送哪些重载/一组参数`Html.ActionLink`来获得像上面这样的漂亮路径？

如果这不可能，是否有推荐的自定义助手实现来达到相同的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:34:43.950

`Html.ActionLink`将查看您的路由表以生成适当的链接。

您可以照常调用它，它将使用正确的 URL：

```
@Html.ActionLink("details", "Comments", new { postId, action, commentId }) 
```

# asp.net - ASP.NET 上的 WebSockets/长轮询 - 共享主机？

> ID：13187608
> 
> 赞同：0
> 
> 时间：2012-11-02T00:33:45.767
> 
> 标签：asp.net, websocket, hosting, long-polling

我正在构建一个将处理许多持久连接的网站 - 通过长轮询或 WebSockets（如果我得到一个具有 IIS8 的主机）。我的问题是，这些在共享主机上是否可行？还是我需要真正的专用服务器？

我知道长轮询需要我对服务器处理的最大请求数进行一些自定义配置。所以这似乎不是共享主机上的选项。WebSockets 呢？而且，这些中的任何一个都适用于“虚拟”或“云”托管吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:17:44.540

如果您想要或需要使用共享主机，那么您可以将持久连接的处理卸载到[实时 Web 托管服务](http://www.leggetter.co.uk/real-time-web-technologies-guide#hosted-services)。我为这样一家公司工作，[Pusher](http://pusher.com)，但也有其他一些公司（所有链接都来自上面的指南）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:36:31.927

这些技术适用于任何类型的主机，但您会很快超过共享主机的资源限制。所以我建议至少从 VPS 开始。

# php - ajax喜欢/不喜欢按钮不切换回来

> ID：13187615
> 
> 赞同：2
> 
> 时间：2012-11-02T00:34:30.540
> 
> 标签：php, jquery, ajax

我正在尝试在页面上制作一个赞按钮，但似乎无法使其正常工作。基本上有三个函数使用 ajax 将数据发送到更新数据库的 php 页面。我检查了数据库并且所有三个都正确更新。如果用户最初不喜欢并单击它，它会正确显示不同的按钮，但是，如果您单击不同的按钮，它不会切换回来（尽管它确实会更新数据库）。

这是设置它的正确方法吗？我对 ajax 很陌生，不确定这是否是正确的方法。在此先感谢史蒂夫

```
public function likesScript($p){?>
    <script>

//display list of people who like this
    function getLikes(){
    $.ajax({
        type: "POST",
        url: "likelist.php",
        data: { p: "<?php echo $_GET['p']?>"}
    }).success(function(res) {

         //check to see if current user likes this   
        if($('li#<?PHP echo $_SESSION['userId']; ?>').length){
            $(".Like").addClass('hidden');

            $(".UnLike").removeClass('hidden');
        }
        else{  
            $(".UnLike").addClass('hidden');
            $(".Like").removeClass('hidden');

        }

        $("#likedBy").append(res); 
        console.log(res);

    });
}

function removeLike() {
    $.ajax({
        type: "POST",
        url: "likedata.php",
        data: { arg1: "<?php echo $_SESSION['userId']?>", arg2: "<?php echo $p;?>", arg3: "0" }
    })

    getLikes();

    return false; 
}

function addLike() {

    $.ajax({
        type: "POST",
        url: "likedata.php",
        data: { arg1: "<?php echo $_SESSION['userId']?>", arg2: "<?php echo $p;?>", arg3: "1" }
    })

    getLikes();

    return false; 
}

$(document).ready(function() {   getLikes();
 $(".UnLike").live('click',removeLike);
 $(".Like").live('click',addLike);

});

    </script> 
```

likelist.php：

```
<?php
require $_SERVER['DOCUMENT_ROOT'].'/view.class.php';

$view = new view();
include $_SERVER['DOCUMENT_ROOT'].'/profile.class.php';
include $_SERVER['DOCUMENT_ROOT'].'/init.php';  

$profile = new profile($dbh);

if(isset($_POST)){
$p = $_POST['p'];

$view->printLikes($profile->getLikes($p));

} 
```

喜欢data.php：

```
<?php
include $_SERVER['DOCUMENT_ROOT'].'/profile.class.php';
include $_SERVER['DOCUMENT_ROOT'].'/init.php';  

$profile = new profile($dbh);

if(isset($_POST)){
$liker = $_POST['arg1'];
$likee = $_POST['arg2'];
$likeYesNo = $_POST['arg3'];

$profile->insertLikes($liker, $likee, $likeYesNo);

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:49:49.113

AJAX 是 ayshcronous，因此这些`getLikes`函数将在 AJAX 完成之前`addLike`触发`removeLike`。您肯定需要放入`getLikes`成功回调中，`$.ajax`这样它就不会检索可能尚未更新的数据

```
function addLike() {
    $.ajax({
        type: "POST",
        url: "likedata.php",
        data: { arg1: "<?php echo $_SESSION['userId']?>", arg2: "<?php echo $p;?>", arg3: "1" },
        success: getLikes
    })

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T00:06:01.017

好的...这是我从使用 ajax 重复调用中学到的...

IE 讨厌它们，有时它们只是不按应有的方式工作。

尝试这个

```
function addLike() {

    var randnum = Math.floor(Math.random()*1001); //Add This Here on all Ajax Calls

    $.ajax({
        type: "POST",
        url: "likedata.php",
        cache: false, //Add This Here - Assists in helping Browsers not to cache the Ajax call
        data: yourdata + '&random=' + randnum, // Add this to the end of your data you are passing along *'&random=' + randnum,*
        success: function() {
              getLikes();
        }
    })

} 
```

添加随机数据会导致浏览器认为这是一个新调用。

* * *

此外，**random=randnum**不会对 php 产生任何影响。

# mysql - 使用从 MySQL 数据库中检索到的信息重新绘制面板

> ID：13187617
> 
> 赞同：0
> 
> 时间：2012-11-02T00:34:31.750
> 
> 标签：mysql, vb.net

我正在尝试创建一个显示不同类别选择的面板。![在此处输入图像描述](../Images/ddc1f1ae9a3ddbff81e7d76233880f29.png)

我需要一个标签和一个图像来显示。标签和图片框将由我从数据库中提取的信息设置。我需要生成它们并填充圆圈（当然以更线性的方式）。所以我可以允许通过数据库更新数据，我需要图片框和标签的数量是动态的。如果可能的话，我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:33:36.397

我会尽力给你一些方向。
我会使用 tableLayoutPanel。这是一个强大的控制，如果你研究它，你可以达到你想要的结果。
使用 tableLayoutPanel 您可以拥有行和列（具有不同的大小）。您还可以在运行时添加更多行/列。
因此，假设您的数据库返回 10 个类别。
然后我会做 3 列和 8 行

```
 Rows/Columns      1                 2                     3   
       1        Label1            Label2                  Label3
       2     PictureBox1       PictureBox2             PictureBox3
       3        Label4            Label5                  Label6
       4     PictureBox4       PictureBox5             PictureBox6
       5        Label7            Label8                 Label9
       6     PictureBox7       PictureBox8             PictureBox9
       7        Label10          
       8     PictureBox10 
```

您可以选择更改表单的大小或保持相同的大小并有一个滚动条（如果您有很多类别）
希望对我有所帮助。请让我知道你的进展如何

# wxwidgets - 如何在 wxWidgets wxHtmlWindow 中设置链接的颜色？

> ID：13187618
> 
> 赞同：2
> 
> 时间：2012-11-02T00:34:33.823
> 
> 标签：wxwidgets, wxhtmlwindow

wxWidgets 库包括一个简单的 HTML 解析器和查看器，我试图用它来显示一些简单的 HTML。我想将某些链接（指向尚不存在的项目的链接）设置为不同的颜色，或者以其他方式指示它们需要创建，但我没有看到任何明显的方法。

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T09:25:16.020

对 span 使用颜色 CSS 样式（类似于 `<a href="#"><span style='color:red;'>Red Link</span></a>`）。这是来自类文档的引用here

> 支持的样式列表
> 
> wxHTML 并没有真正的 CSS 支持，但它确实支持一些简单的样式：您可以对所有元素使用“text-align”、“width”、“vertical-align”和“background”，而对于 SPAN 元素，可以使用其他一些样式被额外认可：
> 
> ```
> color
> font-family
> font-size (only in point units)
> font-style (only "oblique", "italic" and "normal" values are supported)
> font-weight (only "bold" and "normal" values are supported)
> text-decoration (only "underline" value is supported) 
> ```

请参阅：[https ://docs.wxwidgets.org/3.1/overview_html.html](https://docs.wxwidgets.org/3.1/overview_html.html)

# python - 列表中的子列表

> ID：13187619
> 
> 赞同：11
> 
> 时间：2012-11-02T00:34:38.737
> 
> 标签：python, list, sublist

创建了一个列表`flowers`

```
>>> flowers = ['rose','bougainvillea','yucca','marigold','daylilly','lilly of the valley'] 
```

然后，

我必须指定列表`thorny`的子列表列表，该列表`flowers`由列表中的前三个对象组成。

这是我尝试过的：

```
>>> thorny = []
>>> thorny = flowers[1-3]
>>> thorny
'daylilly'
>>> thorny = flowers[0-2]
>>> thorny
'daylilly'
>>> flowers[0,1,2]
Traceback (most recent call last):
  File "<pyshell#76>", line 1, in <module>
    flowers[0,1,2]
TypeError: list indices must be integers, not tuple
>>> thorny = [flowers[0] + ' ,' + flowers[1] + ' ,' + flowers[2]]
>>> thorny
['rose ,bougainvillea ,yucca'] 
```

我怎样才能得到列表花的前 3 个对象，同时保持列表中列表的外观？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-02T00:36:36.147

切片符号`[:3]`不是`[0-3]`：

```
In [1]: flowers = ['rose','bougainvillea','yucca','marigold','daylilly','lilly of the valley']

In [2]: thorny=flowers[:3]

In [3]: thorny
Out[3]: ['rose', 'bougainvillea', 'yucca'] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T00:39:04.890

在 Python 中：

```
thorny = flowers[1-3] 
```

这等于`flowers[-2]`因为 (1 - 3 == -2)，这意味着它从列表的末尾开始查找，即 - 从末尾开始的第二个元素 - 例如黄花菜...

要分割（但不包括）前 3 个元素，您可以使用`thorny = flowers[:3]`，如果您想要这些之后的所有内容，那么它就是`flowers[3:]`.

阅读 Python 切片

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T00:37:57.783

你会想做`flowers[0:3]`（或等效地，`flowers[:3]`）。如果您这样做`flowers[0-3]`（例如），它将等同于`flowers[-3]`（即 . 中倒数第三项`flowers`）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-31T12:26:32.973

任何给定列表都可以有 3 种可能的子列表类型：

```
e1  e2  e3  e4  e5  e6  e7  e8  e9  e10     << list elements
|<--FirstFew-->|        |<--LastFew-->|
        |<--MiddleElements-->| 
```

1.  **FirstFew**主要由**+ve**索引表示。

    ```
    First 5 elements - [:5]      //Start index left out as the range excludes nothing.
    First 5 elements, exclude First 2 elements - [2:5] 
    ```

2.  **LastFew**主要由**-ve**索引呈现。

    ```
    Last 5 elements - [-5:]       //End index left out as the range excludes nothing.
    Last 5 elements, exclude Last 2 elements - [-5:-2] 
    ```

3.  *MiddleElements*可以通过正索引和负索引来表示。

    ```
    Above examples [2:5] and [-5:-2] covers this category. 
    ```

* * *

> 只是列表花的前 3 个对象

```
[0 : 3]   //zero as there is nothing to exclude.
or
[:3] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T00:37:17.270

干得好：

```
thorny = flowers[0:3] 
```

# c - 扩展除法/乘法的 gcc 内在函数

> ID：13187629
> 
> 赞同：14
> 
> 时间：2012-11-02T00:35:42.873
> 
> 标签：c, gcc

现代 CPU 可以在两个原生大小的字之间执行扩展乘法，并将低和高结果存储在单独的寄存器中。同样，在执行除法时，它们将商和余数存储在两个不同的寄存器中，而不是丢弃不需要的部分。

是否有某种可移植的 gcc 内在函数，它会采用以下签名：

```
void extmul(size_t a, size_t b, size_t *lo, size_t *hi); 
```

或类似的东西，对于除法：

```
void extdiv(size_t a, size_t b, size_t *q, size_t *r); 
```

我知道我可以通过在代码中添加#ifdef 来通过内联汇编和鞋拔可移植性自己完成它，或者我可以使用部分和来模拟乘法部分（这会显着变慢），但我想避免这种情况以提高可读性。当然存在一些内置函数可以做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T00:59:16.310

对于 4.6 版以来的 gcc，您可以使用`__int128`. 这适用于大多数 64 位硬件。例如

要获得 64x64 位乘法的 128 位结果，只需使用

```
void extmul(size_t a, size_t b, size_t *lo, size_t *hi) {
    __int128 result = (__int128)a * (__int128)b;
    *lo = (size_t)result;
    *hi = result >> 64;
} 
```

在 x86_64 上，gcc 足够聪明，可以将其编译为

```
 0:   48 89 f8                mov    %rdi,%rax
   3:   49 89 d0                mov    %rdx,%r8
   6:   48 f7 e6                mul    %rsi
   9:   49 89 00                mov    %rax,(%r8)
   c:   48 89 11                mov    %rdx,(%rcx)
   f:   c3                      retq 
```

不需要本机 128 位支持或类似支持，并且在内联后只`mul`保留指令。

编辑：在 32 位拱门上，这以类似的方式工作，您需要将移位宽度替换`__int128_t`为`uint64_t`32。优化将适用于更旧的 gcc。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-09-22T12:12:13.583

对于那些想知道问题的另一半（除法）的人，gcc 没有为此提供内在函数，因为处理器除法指令不符合标准。

对于 64 位 x86 目标的 128 位红利和 32 位 x86 目标的 64 位红利都是如此。问题是，在标准规定结果应该被截断的情况下，DIV 会导致除法溢出异常。例如`(unsigned long long) (((unsigned _int128) 1 << 64) / 1)`应该评估为 0，但如果使用 DIV 评估会导致除法溢出异常。

（感谢[@ross-ridge](https://stackoverflow.com/questions/32540740/intrinsics-for-128-multiplication-and-division#comment52940284_32540826)提供此信息）

# jquery - 检索存储在 cookie 中的数组

> ID：13187631
> 
> 赞同：0
> 
> 时间：2012-11-02T00:36:04.697
> 
> 标签：jquery, jquery-ui, cookies

我有一个在 JQuery 中创建的 cookie，如下所示：

```
var tmzoffset = "+03:00"; 
var txtlocation= "Etc/UTC"; 
var IP = "166.166.166.166"; 
$.cookie("user", [tmzoffset,txtlocation,IP]); 
```

现在我想从存储在该cookie中的数组中提取每个项目并将它们存储在其他单独的变量中，请问我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:53:26.223

使用 JSON 序列化和解析您的对象：

```
$.cookie("user", JSON.stringify([tmzoffset,txtlocation,IP]));

var array = JSON.parse($.cookie("user")); 
```

支持内置于现代浏览器中，但请参阅[http://json.org](http://json.org)以获取旧版本 (IE) 的后备脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T00:43:47.157

它存储为逗号分隔的字符串，因为 cookie 不能包含数组，所以如果你用逗号分割，你会得到你再次放回的数组（假设你的值中没有逗号，你没有' t):

```
var arr = $.cookie("user").split(',');

var tmzoffset = arr[0];
var txtlocation= arr[1];
var IP = arr[2]; 
```

# c# - Enterprise Library 5 验证类型安全吗？

> ID：13187632
> 
> 赞同：0
> 
> 时间：2012-11-02T00:36:04.573
> 
> 标签：c#, app-config, enterprise-library, enterprise-library-5

我最近发现了企业验证库，并正在使用它来验证我的 app.config 文件。我主要有易于应用验证的字符串。我也有一些布尔值，例如：

```
 class Options
{
    public bool IsRed { get; set; }
    public bool IsBlue { get; set; }
} 
```

然后在我的 app.config 中：

```
 <!--Options-->
<add key ="IsRed" value="true"/>
<add key ="IsBlue" value="Maybe"/> 
```

是否可以应用验证规则来检查以确保 app.config 文件中的值实际上是布尔值？

我能想到的最好的是：

```
 class Options
{
    [TypeConversionValidator(typeof(bool), MessageTemplate = "IsRed value must be a true/false")]
    public string IsRed { get; set; }
    [TypeConversionValidator(typeof(bool), MessageTemplate = "IsBlue value must be a true/false")]
    public string IsBlue { get; set; }
} 
```

这会起作用，但是我正在处理字符串而不是布尔值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:22:24.110

我决定使用动态类型。我的代码现在看起来像这样：

```
class Options
{
    [TypeConversionValidator(typeof(bool), MessageTemplate = "IsRed value must be a true/false")]
    public dynamic IsRed { get; set; }
    [TypeConversionValidator(typeof(bool), MessageTemplate = "IsBlue value must be a true/false")]
    public dynamic IsBlue { get; set; }
}

    private ValidationResults LoadOptions()
    {
        _options.IsRed = ConfigurationManager.AppSettings["IsRed"];
        _options.IsBlue = ConfigurationManager.AppSettings["IsBlue"];

        var valFactory = EnterpriseLibraryContainer.Current.GetInstance<ValidatorFactory>();
        var cusValidator = valFactory.CreateValidator<Options>();
        var optionValidator = cusValidator.Validate(_options);

        if (optionValidator.IsValid)
        {
            _options.IsBlue = Convert.ToBoolean(_options.IsBlue);
            _options.IsRed = Convert.ToBoolean(_options.IsRed);
        }

        return optionValidator;
    } 
```

# javascript - 滚动经过 div 中的元素时更新锚标记

> ID：13187633
> 
> 赞同：0
> 
> 时间：2012-11-02T00:36:16.677
> 
> 标签：javascript, anchor, getelementbyid

我不确定这是否可能，这就是我在这里询问的原因，所以如果您对如何实现这一点有任何想法，那么我将不胜感激！

好吧，说我有一个带有溢出-y 功能的 div。并说这个div里面有一个故事或大量的文字。无论如何，有没有可能通过行号或锚标记来让 Javascript 记住或保存你在这个 div 中的位置？这样，每当 div 消失时，例如我让 javascript 更改 div 的内容，我可以提示用户单击一个按钮，它会返回到他们原来所在的位置？

我根本没有办法！:( 我能想到的最简单的方法是给每一行一个锚标签，这是非常重复的，不值得花时间，我仍然不知道如何在滚动时获得锚标签。

```
<div style="overflow-y:scroll;height:200px;"> 

<span id="1">This would</span>

<span id="2">be too</span>

<span id="3"> repetitive and</span>

<span id="4">still dont know</span>

<span id="4">how to save the anchor</span>

 </div> 
```

我在想javascript可能是这样的。

```
<a href="#" onclick="document.getElementById('***CURRENTSPOT***').id = 'spot';">Save Spot</a> 
```

然后重新加载他们所要做的就是点击这个

```
<a href="#spot">Load Saved Spot</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:41:25.683

您可以尝试保存父 DOM 元素的 scrollTop 属性，并在用户加载保存的位置时再次设置。

查看[这篇 MDN 文章](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)了解更多详情

这是一个快速而肮脏的实现：http: [//jsbin.com/ezexaf/1/edit](http://jsbin.com/ezexaf/1/edit)

# mongodb - 将嵌入文档的顺序存储在一个单独的数组中

> ID：13187639
> 
> 赞同：0
> 
> 时间：2012-11-02T00:36:42.060
> 
> 标签：mongodb, angularjs, meteor

我有一组对象，用户可以任意排序。我想让我的客户记住对象集的排序，以便当用户再次访问该页面时，他/她选择的排序将被保留。但是，客户端框架还应该能够根据排序从它们存储的任何数组/哈希图中快速查找对象。这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:38:00.617

我发现这样做的最佳方法是使用一个数组，该数组以我想要的特定顺序存储数组的 ID。从那里，我可以通过使用 Underscore.js 将数组转换为哈希图来访问我想要的对象数组。

# python - 在不打开单独的 shell 的情况下运行 python 程序

> ID：13187641
> 
> 赞同：9
> 
> 时间：2012-11-02T00:37:14.230
> 
> 标签：python, powershell

在 powershell 中，当我使用以下命令运行 python 程序时：

```
> python hello.py 
```

该程序直接在我正在使用的 powershell 窗口中运行并打印任何输出。但是当我尝试在不显式调用 python 的情况下执行此操作时：

```
> hello.py 
```

它打开一个单独的窗口。我该如何解决这个问题，使它的行为与我显式调用 python 时的行为相同？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-02T08:11:50.657

如果你添加`.PY`到`PATHEXT`环境变量中，你应该可以运行`.\hello.py`或者只`.\hello`在当前控制台中运行。否则，它将启动一个新控制台`ShellExecute`的相关`Python.File`命令（检查）。`ftype Python.File`我通过临时修改环境变量检查了这一点：

```
$env:pathext = $env:pathext + ";.PY" 
```

# objective-c - 在找到所选字符串之前如何读取字符串？

> ID：13187644
> 
> 赞同：1
> 
> 时间：2012-11-02T00:37:20.110
> 
> 标签：objective-c, cocoa, nsstring, nsrange

我有一个字符串 NewString，我只想在字符“Choices:”之前显示文本。我只想在这些字符*之前*显示文本。我试过这个，但很明显它没有用。有什么建议么？

```
NewString = [NewString substringWithRange:NSMakeRange(0, @"Chocies:"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:41:05.463

```
NSRange range = [string rangeOfString:@"Choices:"];
NSString *newString = [string substringToIndex:range.location]; 
```

# python - 从 Python 文件中提取信息

> ID：13187645
> 
> 赞同：2
> 
> 时间：2012-11-02T00:37:22.030
> 
> 标签：python

假设我有一个 python 文件

```
def ihavefile(): i = 1
def anotherfile(): pass 
```

我想从文件中提取所有函数，比如`ihavefile`和`anotherfile`. 我怎么做？我只是逐行读取文件，也许写一个正则表达式还是有更好的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T00:42:47.423

鉴于你的例子：

```
from inspect import getmembers, isfunction, getsource

import your_module
print getmembers(your_module, isfunction)
# [('anotherfile', <function anotherfile at 0x028129B0>), ('ihavefile', <function ihavefile at 0x027F3570>)]
for name, func in getmembers(your_module, isfunction):
    print getsource(func) 
```

# perl - 提取表perl

> ID：13187647
> 
> 赞同：0
> 
> 时间：2012-11-02T00:37:41.100
> 
> 标签：perl, extract, text-mining

我开始学习 Perl 语言，因为它对我的研究非常有用。我不知道如何从文本文件中提取表格

我有一个文件夹，其中包含一定数量的按顺序命名的文本文件，如下所示：

```
1.txt
2.txt
3.txt
...
...
1000.txt 
```

这些 .txt 格式文件的示例可在以下链接中找到： [http ://www.sec.gov/Archives/edgar/data/1750/000104746909008102/0001047469-09-008102.txt](http://www.sec.gov/Archives/edgar/data/1750/000104746909008102/0001047469-09-008102.txt)

同一文件的 .htm 版本可在以下链接中找到： [http ://www.sec.gov/Archives/edgar/data/1750/000104746909008102/a2194264zdef14a.htm](http://www.sec.gov/Archives/edgar/data/1750/000104746909008102/a2194264zdef14a.htm)

现在，有时会调用我在这些文件中查找的表：

```
Non-Qualified Deferred Compensation Table 
```

其他一些有小的变化，如：

```
Non Qualified Deferred Compensation Table 
```

基本上这个表在标题中有这些词（有时它们可​​能因文件而略有不同）：

*   “贡献”
*   “总收益”
*   “总提款/分配”

和其他标题（从文件到文件略有不同，但这些词几乎出现在我的每个 .txt 文件的每个“延迟补偿表”中（查看 .htm 文件的链接和 .txt 文件的链接一个例子——在文件中搜索“不合格的递延补偿表”）。在这些标题下，有一定数量的经理的一些金额（表格行数因文件而异）。

有没有办法创建一个 perl 脚本，从每个文件中提取延迟补偿表并生成一个 .csv 输出，其中存储了所有延迟补偿表（下面的标题和数字）以及每个表对 .txt 文件的引用？

输出文件中的内容如下：

```
File    Manager Name    Contributions   Aggregate Earnings  Aggregate Withdrawal/Distributions
1.txt   Manager1    00000   00000   00000
1.txt   Manager2    00000   00000   00000
1.txt   Manager3    00000   00000   00000
2.txt   Manager1    00000   00000   00000
2.txt   Manager2    00000   00000   00000
2.txt   Manager3    00000   00000   00000
3.txt   Manager1    00000   00000   00000
3.txt   Manager2    00000   00000   00000
3.txt   Manager3    00000   00000   00000 
```

如果您能帮助我解决这个问题，我将不胜感激。我是新手，我正在尝试学习 Perl，但老实说，这个特定的任务对我来说似乎非常困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:52:04.313

Perl 可以轻松实现这一点。

你应该看看这个 Perl 模块：

*   [万维网::机械化](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm)
*   [XML::Xpath](http://search.cpan.org/~msergeant/XML-XPath-1.13/XPath.pm)

您会[在这里](https://stackoverflow.com/search)或[http://google.com上找到大量](http://google.com)[网络抓取](/questions/tagged/web-scraping "显示标记为“网络抓取”的问题")示例

# python - 将 \n 视为 python 中的原始文本？

> ID：13187648
> 
> 赞同：1
> 
> 时间：2012-11-02T00:37:45.363
> 
> 标签：python

问题，所以我现在需要在一个数据包中发送 \n，但 python 将其视为 EOL。我如何告诉它将 \n 视为原始文本和数据包的一部分？

`logcom = "LOGON\n Protocol-Version: 2.0\n App-type: Windows x86\n Operator: PC_CLIENT\n name: " + pal_user + "\n capabilities: 4\n"`

我需要在一个数据包中发送所有这些，但是当数据包有多行时它会将 \n 视为 EOL，但当它只是 LOGON 时则不会\n

`socket.sendall("'LOGON\n ^ SyntaxError: EOL while scanning string literal`

错误^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:05:41.710

您几乎可以肯定一行中缺少一个结束引号。像这样使用它：

```
logcom = "LOGON\n Protocol-Version: 2.0\n App-type: Windows x86\n Operator: PC_CLIENT\n name: " + pal_user + "\n capabilities: 4\n"
socket.sendall(logcom) 
```

如果您想在源代码中将其拆分为几行，就像您在问题中所遇到的那样，您应该用三引号这样写：

```
logcom = """LOGON
Protocol-Version: 2.0
App-type: Windows x86
Operator: PC_CLIENT
name: {}
capabilities: 4
""".format(pal_user)
socket.sendall(logcom) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:50:27.490

如果您需要在“\n”中发送“\”，那么您需要做的就是转义字符。因此，您应该发送：

```
logcom = "LOGON\\n Protocol-Version: 2.0\\n App-type: Windows x86\\n Operator: PC_CLIENT\\n name: " + pal_user + "\\n capabilities: 4\\n" 
```

如果您需要发送包含换行符的数据，我会尝试`socket.send`循环使用。

# java - 一键通，加解密

> ID：13187652
> 
> 赞同：8
> 
> 时间：2012-11-02T00:38:15.600
> 
> 标签：java, encryption, cryptography, one-time-pad

我正在尝试学习密码学并且一直在尝试这个练习

编写一个程序（最好是 Java）来生成一次性便笺簿，这是一个包含所有随机数据的相对较大的文件（例如 1 MB）。该程序还应该能够根据生成的一次性密码对文件进行加密/解密。

提示：使用以下测试向量检查您的程序是否正确加密。

**明文 (ASCII)：每个云都有一线希望
OTP (HEX)：6dc72fc595e35dcd38c05dca2a0d2dbd8e2df20b129b2cfa29ad17972922a2
密文 (HEX)：28b14ab7ecc33ea157b539ea426c5e9def0d81627eed04cc588**

我尝试使用随机数生成器生成一次性填充，因为我需要将它们转换为 HEX 形式。我很确定我很困惑或者没有以正确的方式解决它

```
public static void oneTimePad()
{
    Random ran = new Random();
    String s = "0123456789ABCDEF";
    for(int i = 0; i < 100; i++)
    {   
        System.out.print(s.charAt(ran.nextInt(s.length())));
    }
} 
```

以上是我的一次性密码本，我想知道如何使用一次性密码本实现加密并对其进行解密。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-24T09:31:41.010

这里有一个完整的工作示例：

```
 // convert secret text to byte array
    final byte[] secret = "secret".getBytes()

    final byte[] encoded = new byte[secret.length];
    final byte[] decoded = new byte[secret.length];

    // Generate random key (has to be exchanged)
    final byte[] key = new byte[secret.length];
    new SecureRandom().nextBytes(key);

    // Encrypt
    for (int i = 0; i < secret.length; i++) {
        encoded[i] = (byte) (secret[i] ^ key[i]);
    }

    // Decrypt
    for (int i = 0; i < encoded.length; i++) {
        decoded[i] = (byte) (encoded[i] ^ key[i]);
    }

    assertTrue(Arrays.equals(secret, decoded)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T01:01:00.067

对于一次性填充，您需要一个字节数组，而不是十六进制。十六进制仅用于显示数据（我们往往难以读取位）。您可以使用 Apache Commons 库（编解码器包）从字节数组创建十六进制，或者如果您想将测试向量从十六进制解码为字节，则返回。

您应该使用**安全**的随机数生成器，而不是`Random`. 所以`new SecureRandom()`改用。要生成随机数据，首先创建一个字节数组，然后调用`nextBytes()`随机数生成器。不需要生成整数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T01:03:43.140

首先是指定的 OTP 算法，称为 HOTP，它是标准 RFC。几乎所有其他 OTP 都是适当的，我们不知道它们的算法。

[https://www.rfc-editor.org/rfc/rfc4226](https://www.rfc-editor.org/rfc/rfc4226)

那里有一些 java 代码，您可以使用它来了解它是如何完成的。其次，如果您要进行加密，请不要使用随机。Random 非常适合伪随机，但如果你真的想要一个好的随机数据来源，你需要采用 SecureRandom。这是适用于加密算法的更好的随机数来源。

要将事物转换为十六进制，您可以轻松使用

[http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html#toString(int)](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html#toString(int))

或 Long.toString(value,radix)、Integer.toString(value,radix) 或 Byte.toString(value,radix) 的任何品种。

```
byte[] bytes = ...;
for( int i = 0; i < bytes.length; i++ ) {
    System.out.println( Integer.toString( bytes[i], 16 );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-26T18:09:04.970

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace one_time_pad
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.WriteLine("                   TRYING\n");

            Console.WriteLine("Enter : ");
            int input= int.Parse( Console.ReadLine());

            //random num generation
            Random rnd = new Random();
            int random = rnd.Next(1,10);

            //binary conversion
            string binary = Convert.ToString(random,2);
            string inbinary = Convert.ToString(input,2);

            Console.WriteLine("Data :   " +input +"   Binary :   " + inbinary);
            Console.WriteLine(" Key :   " +random + "   Binary :    " + binary);    

            // taking xor
            int Ghul = input ^ random;

            //binary conversion
            string intcon = Convert.ToString(Ghul,2);

            Console.WriteLine("Encrypted : " + intcon);

            Console.WriteLine(":)");

            Console.Read();    
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-03T14:39:07.490

```
<dependency>
    <groupId>work.eddiejamsession</groupId>
    <artifactId>jam-one-time-pad</artifactId>
    <version>0.67</version>
</dependency> 
```

```
JamOneTimePad pad = new JamOneTimePad();
String heyEncrypted = pad.encrypt("hey"); //encodes additionally in base64 for url safety
String heyDecrypted = pad.decrypt(heyEncrypted);
System.out.println(heyDecrypted.equals("hey")); 
```

```
Output: true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-30T10:29:12.260

[https://en.wikipedia.org/wiki/One-time_pad](https://en.wikipedia.org/wiki/One-time_pad)

```
public static String crypt(String string, String keyString) {
    // convert secret text to byte array
    byte[] bytes = string != null ? string.getBytes() : new byte[0];
    int size = bytes != null ? bytes.length : 0;
    final byte[] encoded = new byte[size];
    final byte[] key = keyString != null ? keyString.getBytes() : new byte[0];
    // loop on input  bytes
    for (int i = 0; i < size; i++) {
        // shift key index 
        // (we assume key can be smaller or equal if larger then adjust)
        int keyi = i >= keySize ? size % (keySize-1) : i;
        // pad
        encoded[i] = (byte) (bytes[i] ^ key[keyi]);
    }
    return new String(encoded);
}

public static void test(String string, String keyString) {
    String encrypt = crypt(string, keyString);
    String decrypt = crypt(encrypt, keyString);
    assert(string.equals(decrypt));
} 
```

*   `test("test","1234");`
*   `test("test","123");`

附言。您可以通过拉起字符串并用字节替换来重构方法

```
public static byte[] crypt(byte[] bytes, byte[] key) {
    int size = bytes != null ? bytes.length : 0;
    final byte[] encoded = new byte[size];
    int keySize = key != null ? key.length : 0;
    // loop on input bytes 
    for (int i = 0; i < size; i++) {
        // shift key index (assuming key <= bytes)
        int keyi = i >= keySize ? size % (keySize-1) : i;
        // pad 
        encoded[i] = (byte) (bytes[i] ^ key[keyi]);
    }
    return encoded;
} 
```

# javascript - 根据选择的单选按钮显示行

> ID：13187654
> 
> 赞同：0
> 
> 时间：2012-11-02T00:38:29.330
> 
> 标签：javascript, html

我已经阅读了有关 stackoverflow 的许多类似问题，但对于如何根据我的特定情况进行修改有点迷茫。我想根据选择的单选按钮以不同的方式在 html 中输出 2 行。我还在学习javascript...

请问我错过了什么？以及如何在单选按钮表单项之后直接输出 html？

我的表格是这样的；

```
<tr>
  <td>Select your option</td>
  <td><input type="radio" name="your_store" id="store_yes" value="1" onclick = "addrow()" />
  <?php echo $text_yes; ?>
  <input type="radio" name="your_store" id="store_no" value="0" onclick = "addrow()" />
  <?php echo $text_no; ?></td>
</tr> 
```

在此之后，我还有其他几个表单项

在表格的底部，我有这个功能；

```
<script type="text/javascript"><!-- 
function addrow() {   
  if(document.getElementById('store_yes').checked) {
    html  = '<tr>'; 
    html  = '<td>Row is showing this</td> '; 
    html  = '</tr>'; 
  } else {
    html  = '<tr>';
    html  = '<td>Row is showing something else</td> '; 
    html  = '</tr>'; 
  }
//--></script> 
```

**编辑**，如果选择 YES，则出现 2 行，如果随后选择 NO，则行需要再次消失，即改变用户的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:31:47.177

这是您的代码，我使用 Jquery 将行附加到表的末尾。在此处阅读[有关 jquery 中 .append() 的](http://api.jquery.com/append/)更多信息。

修改后的功能：

```
function addrow() {
    if (document.getElementById('store_yes').checked) {
        $('#yourTable').append('<tr><td>Row is showing this</td></tr>');
    } else {
        $('#yourTable').append('<tr><td>Row is showing something else</td></tr>');
    }
} 
```

修改后的 HTML

`

```
<table border="1" id="yourTable"><tr>
  <td>Select your option</td>
  <td><input type="radio" name="your_store" id="store_yes" value="1" onclick = "addrow()" />
    <input type="radio" name="your_store" id="store_no" value="0" onclick = "addrow()" />
  </td>
</tr>
</table> 
```

`

[在这里查看演示](http://jsfiddle.net/cULH3/6/)

**更新**
演示已更新，如果用户改变主意，将删除附加的行

# sql - Oracle SQL - 将可能相互矛盾或重叠的日期范围放在一起

> ID：13187663
> 
> 赞同：1
> 
> 时间：2012-11-02T00:39:32.667
> 
> 标签：sql, oracle

我有一张这样的桌子：

```
Id    Begin_Date    End_date    
1     01-JAN-12     05-JAN-12
1     01-FEB-12     01-MAR-12
1     15-FEB-12     05-MAR-12 
```

对于给定的 ID，它给出了一组日期范围。假设如果日期介于该 ID 的开始日期和结束日期之间，则该 ID 为“on”。否则，“关闭”

这里的问题是最后两行——日期范围重叠并相互矛盾。第二行声称 1 在 01-FEB-12 和 01-MAR-123 之间“开启”，但第三行声称 1 在 2012 年 2 月 14 日之前关闭。同样，第二行声称 1 在 2012 年 3 月 2 日关闭，但第 3 行声称它已打开。

我想应用的和解逻辑是，在出现矛盾的情况下，选择最早的开始日期和之后的最早的结束日期。因此，结果将是：

```
Id    Begin_Date    End_date    
1     01-JAN-12     05-JAN-12
1     01-FEB-12     01-MAR-12 
```

我能够使用滞后分析功能来解决这个问题，但我在其他用例中遇到了困难。取这个输入数据集。

```
Id    Begin_Date    End_date    
1     01-JAN-12     10-JAN-12
1     5-JAN-12      8-JAN-12
1     12-JAN-12     15-JAN-12
1     1-JAN-12      14-JAN-12 
```

我在这里期望的输出是：

```
Id    Begin_Date    End_date    
1     01-JAN-12     8-JAN-12
1     01-JAN-12     14-JAN-12 
```

...因为第一行是最早的开始日期，而其结束日期是之后最早的结束日期。下一行是上一个结束日期之后的最早开始日期，该行的结束日期是之后最早的结束日期。12 年 1 月 14 日之后没有开始日期，所以我完成了。

我解决这个问题的运气很差。我尝试的一种方法是按 id 划分排名并将其与最大排名进行比较。然后我使用滞后函数与之前的排名进行比较。但是，对于上述用例，此策略完全失败。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:39:40.663

好吧，关键要求在于：

> 我想应用的和解逻辑是，在出现矛盾的情况下，选择最早的开始日期和之后的最早的结束日期。

[sqlfiddle在这里](http://sqlfiddle.com/#!4/fdea7/1)

```
CREATE TABLE table1
(
  id INT,
  DateStart DATE,
  DateEnd DATE
);

INSERT INTO table1
VALUES
(1, TO_DATE('20110101','YYYYMMdd'), TO_DATE('20110110','YYYYMMdd'));
INSERT INTO table1
VALUES
(2, TO_DATE('20110105','YYYYMMdd'), TO_DATE('20110108','YYYYMMdd'));
INSERT INTO table1
VALUES
(3, TO_DATE('20110112','YYYYMMdd'), TO_DATE('20110115','YYYYMMdd'));
INSERT INTO table1
VALUES
(4, TO_DATE('20110101','YYYYMMdd'), TO_DATE('20110114','YYYYMMdd'));
INSERT INTO table1
VALUES
(5, TO_DATE('20110206','YYYYMMdd'), TO_DATE('20110208','YYYYMMdd'));
INSERT INTO table1
VALUES
(6, TO_DATE('20110201','YYYYMMdd'), TO_DATE('20110207','YYYYMMdd')); 
```

选择语句：

```
SELECT ID, DATESTART, DATEEND
FROM 
(
  SELECT ID, TYPE, DATES AS DATESTART, 
         LEAD(DATES) OVER (ORDER BY DATES) AS DATEEND
  FROM
  (
    SELECT ID, TYPE,DATES,
      LAG(ID) OVER (ORDER BY DATES) AS LASTID,
      LAG(TYPE) OVER (ORDER BY DATES) AS LASTTYPE,
      LAG(DATES) OVER (ORDER BY DATES) AS LASTDATES
    FROM
    (
      SELECT ID,'START' AS TYPE,DATESTART AS DATES
      FROM table1
      UNION ALL
      SELECT ID,'END',DATEEND
      FROM table1
    )
  ) H
  WHERE TYPE != LASTTYPE OR LASTTYPE IS NULL
)
WHERE TYPE = 'START'
ORDER BY DATESTART 
```

*以下是每个子查询*的分步说明：

1.  将每一行`date start`分解`date end`为一列

2.  使用复制最后一行`LAG`并将其放入当前行

3.  过滤掉中间的行（例如 1,2,3,4 删除 2,3）

    在下一行中获取结束日期，因为这些是第一行或最后一行

4.  只提取有用的行，那些行`TYPE = START`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:21:49.117

对于第二个数据集：

```
Id    Begin_Date    End_date    
1     01-JAN-12     10-JAN-12
1     5-JAN-12      8-JAN-12
1     12-JAN-12     15-JAN-12
1     1-JAN-12      14-JAN-12 
```

在您的对帐逻辑之后，结果将是：

```
Id    Begin_Date    End_date    
1     01-JAN-12     8-JAN-12 (includes the rows 1,2 and 4 -> minimum begin_date is 1-JAN, minimum end_date is 8-JAN)
1     12-JAN-12     15-JAN-12 (includes row 3) 
```

# mysql - 多个表的 SQL 查询（涉及外键）

> ID：13187664
> 
> 赞同：0
> 
> 时间：2012-11-02T00:39:50.123
> 
> 标签：mysql, sql

我目前在 MySQL 数据库中有 5 个表。其中一些共享外键并且相互依赖。我正在尝试创建一个查询，它将并排显示所有结果（`major`、、、`course`等`semester`）。我创建的查询它没有显示我想要的结果，因为我没有添加其他表。我不确定如何实现其他表。如何修改 mysql-query 以按顺序显示所有结果？

**询问**

```
select * from course left join major on course.id = majors.id left join majors on courses_major_xref.majors_id = majors.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:45:33.343

我认为您的查询中只有一些操作顺序问题，请尝试：

```
SELECT * from course
LEFT JOIN major_course_xref
ON course.id = major_course_xref.courseID
LEFT JOIN major 
ON major.id = major_course_xref.major_id 
LEFT JOIN course_semester_xref
ON course.id = course_semester_xref.course_id
LEFT JOIN semester
ON course_semester_xref.semester_id = semester.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:48:17.170

尝试以下

```
SELECT * FROM course 
INNER JOIN major_courses_xref ON course.id = major_courses_xref.course_id 
INNER join majors ON major_courses_xref.majors_id = majors.id 
INNER JOIN courses_semester_xref ON course.id = courses_semester_xref.course_id 
INNER JOIN semester ON courses_semester_xref.semester_id = semester.id; 
```

# magento - 在 Magento 中调整图像大小

> ID：13187672
> 
> 赞同：0
> 
> 时间：2012-11-02T00:41:08.053
> 
> 标签：magento

我有一个名为的图像：

```
Mage::getModel('catalog/product')->load($_product->getId())->getMediaGalleryImages()->getItemByColumnValue('position','2') 
```

那是第二张图片（排序依据）。

需要能够在此使用 Magento 的 resize() ，我能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:45:20.380

未测试，但尝试

```
$_image = Mage::getModel('catalog/product')->load($_product->getId())->getMediaGalleryImages()->getItemByColumnValue('position','2');

echo $this->helper('catalog/image')->init($_product, 'thumbnail', $_image->getFile())->resize(30, 30); 
```

/app/code/core/Mage/Catalog/Helper/Image.php

```
public function init(Mage_Catalog_Model_Product $product, $attributeName, $imageFile=null) 
```

请参阅[http://www.magentocommerce.com/boards/v/viewthread/264272/#t356324](http://www.magentocommerce.com/boards/v/viewthread/264272/#t356324)

# facebook - 亲子功能

> ID：13187677
> 
> 赞同：3
> 
> 时间：2012-11-02T00:41:58.253
> 
> 标签：facebook, parent-child

是否有一项功能允许在一个企业的主页上显示一个企业的多个位置？在单个 Facebook 页面上显示多个营业地点的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T02:36:10.153

Facebook 有一个父子页面设置工具，适用于具有公司本地结构的有限企业。安排父页面和子页面之间的连接后，父页面将在其编辑页面管理界面导航菜单中包含一个位置选项卡。

Facebook 的 Locations 应用程序于 2011 年 8 月首次出现，作为对父子页面管理工具的有限私人测试的一部分，但 Facebook 似乎暂时将其保留给选定的合作伙伴。

有权访问 Facebook 客户代表或与 Facebook 的首选营销开发人员之一合作的企业应与这些联系人联系以请求访问应用程序。其他企业将不得不开发自己的商店定位器应用程序。

[Facebook 亲子模型](http://www.slideshare.net/steph_king/facebook-parent-child-model)

[Facebook 更新 Locations 应用程序，但该功能仍仅适用于部分页面](http://www.insidefacebook.com/2012/04/25/facebook-updates-locations-app-but-feature-still-only-available-to-select-pages/)

[Page_Locations PDF](http://ads.ak.facebook.com/ads/FacebookAds/Page_Locations.pdf)

[父子企业本地位置页面位置](http://www.insidefacebook.com/2011/07/11/parent-child-corporate-local-locations-pages-places/)

[知乎主题](http://www.quora.com/Facebook-Pages/Is-it-possible-to-add-multiple-locations-to-a-Facebook-Page-for-business)

# php - 不使用 3xx 重定向代码重定向到另一个页面

> ID：13187678
> 
> 赞同：1
> 
> 时间：2012-11-02T00:41:58.330
> 
> 标签：php, javascript, html, redirect, http-status-codes

我正在尝试将用户重定向到另一个页面，但是，我需要Referer 标头来显示存在重定向。换句话说，如果用户从 SiteA 开始，然后转到 SiteB，然后重定向到 SiteC，我需要 Referer 标头来显示用户在到达 SiteC 时来自 SiteB。

大多数浏览器在遇到 3xx（301、307 等）重定向代码时不会更改 Referer 标头，因此我无法使用它。所以我想知道完成我需要的最好方法是什么？我可以使用 HTML、PHP 和必要的 JavaScript。

谢谢，哈利

PS 我已经完成了足够多的 HTML、PHP 和 JavaScript 编码，但还不足以知道这个问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:01:32.877

如果我错了，请纠正我，但 3xx 状态代码是告诉浏览器页面已移动，并且他们将在新的 url 处再次请求页面。所以对于浏览器来说，当前页面没有改变，因此引用者将保持不变。

在页面加载期间使用类似 location=url 的 javascript 来重定向页面。

# c++ - 防止变量超出范围，以便它们持续存在于另一个线程中

> ID：13187679
> 
> 赞同：0
> 
> 时间：2012-11-02T00:42:11.167
> 
> 标签：c++, multithreading

我有一个创建一堆局部变量的函数，然后将它们的地址传递给在单独线程中运行的函数 - 如下所示：

```
void MyFunction()
{
    MyClass a;
    AnotherClass b;
    ...
    FinalClass z;

    CallFunctionInNewThread(&a,&b,&c,...,&z);
} 
```

当然，当 MyFunction 超出范围时，这些变量会被销毁（因此线程中的函数现在指向垃圾），因此此设置不起作用。我在这里有什么选择？如果我用'new'分配堆上的变量，我将永远没有机会删除它们。如果我让它们成为智能指针或类似的东西，我必须让线程函数接受它们作为智能指针，否则它们的引用计数不会增加，所以它们仍然会立即被销毁。看起来他们有点想成为 MyFunction 的包装类的成员变量，但是有几百行和几十个这样的东西，那将是疯狂的混乱。还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:32:47.223

您可以做的一个小技巧是将信号量对象传递给线程函数，然后等待该信号量发出信号。您确实需要检查线程是否已成功创建。

新线程首先制作值的本地副本（或智能指针的引用），然后向信号量发出信号并继续。

然后，调用线程可以继续并将这些对象从堆栈中删除，而不会干扰您的新线程。它甚至可以删除信号量对象，因为任何一个线程都不再需要它。

这确实意味着调用线程必须等到线程启动并复制其数据，但这可能会很短。如果您要努力生成一个线程来完成任何工作，那么父线程中的这种轻微延迟应该是可以接受的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:52:16.997

> 还有其他选择吗？

只需复制（如果微不足道）或移动/交换数据（如果创建繁重） - 类似于将所有权从一个线程转移到另一个线程。似乎线程 A 确实不需要描述中的引用。奖励：这消除了程序中并发访问的复杂性。

# erlang - gen_tcp:recv 和 prim_inet recv 有什么区别

> ID：13187682
> 
> 赞同：1
> 
> 时间：2012-11-02T00:42:42.620
> 
> 标签：erlang, inet

什么是 prim_inet 模块，它是如何工作的？
我试图谷歌它，但我没有找到任何有用的文档。
我查看了源文件 prim_inet.erl 但没有什么特别之处，剂量 prim_inet:async_recv 为每个 recv 生成一个新进程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T00:47:54.007

您没有找到有用的文档，因为没有记录`erlang`内部模块并且不打算直接从应用程序调用。

请参阅[“为什么 prim_inet 未记录。](http://erlang.2086793.n4.nabble.com/why-prim-inet-undocument-td2102408.html) 在该链接中，您将阅读以下内容：

> 它没有被记录，因为它是一个内部模块，不能从应用程序中调用。即使在最小的补丁中，它的界面也可能会在没有警告的情况下发生变化。
> 
> 如果您需要的功能未在 gen_tcp、gen_udp、gen_sctp、inet 等中提供...您只需询问它，可能有另一种方法可以做到这一点，或者它可能被添加到它应该的公共接口是。

但是，您可能会发现[prim_inet:async_accept/2](http://erlang.2086793.n4.nabble.com/prim-inet-async-accept-2-td2113087.html)很有用。

# c# - 在 C# 中截断

> ID：13187686
> 
> 赞同：1
> 
> 时间：2012-11-02T00:43:22.463
> 
> 标签：c#, math

```
string input = Console.ReadLine();
decimal sum = Convert.ToDecimal(input);
if (sum >= (decimal)500.01)
{
    //40% and 8 dollars off shipping costs are taken off total amount
    decimal totalprice;
    totalprice = (sum - 8) * .60m;
    Math.Truncate(totalprice);
    Console.WriteLine("Your final cost is:${0:0.00}", totalprice);
    Console.Read(); 
```

问题是，当我在程序中输入价格 598.88 美元时，我应该得到 354.52。

数学：

```
598.88 - 8 = 590.88\. 590.88 * 60% = 354.528 
```

我实际上是`354.53`因为 C# 向上舍入而不是向下舍入。例如，

如果我得到这样的答案`519.998`，我希望它留在`519.99`。另一个例子，如果我得到一个`930.755`我希望它保持在的答案`930.75`。

我查看了一些答案，但`Math.Truncate`显然对我不起作用，并且使用该`*100 / 100`技巧也不起作用。请记住，我是一名新学生，因此，如果答案可以是菜鸟安全的，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:57:37.533

`* 100 / 100`效果很好，你可能用错了。 在下面试试这个：

```
decimal totalprice = TruncateToTwoDigits((sum - 8) * .60m);
Console.WriteLine("Your final cost is:${0:0.00}", totalprice);

... 

private static decimal TruncateToTwoDigits(decimal Value)
{
    int adjusted = (int)Math.Truncate(Value * 100m);
    return adjusted / 100m;
} 
```

作为旁注，`Math.Truncate`返回截断的值，它不会像您的代码所暗示的那样更改输入参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T00:57:47.503

Math.Truncate 像所有其他 Math 函数一样返回函数调用后的值。该函数不会改变您的变量。实际上，这对于双打是不可能的（请参阅参考参数）。所以你需要这样做：

```
totalprice = Math.Truncate(totalprice); 
```

请注意，totalprice 将只有整数部分，因此如果值为 45.985，则结果为 45，因此您需要乘以 100，然后再除。[http://msdn.microsoft.com/en-us/library/7d101hyf.aspx](http://msdn.microsoft.com/en-us/library/7d101hyf.aspx)

你得到的四舍五入是因为 console.Write 调用 String.Format 会做到这一点。请参阅[http://www.csharp-examples.net/string-format-double/](http://www.csharp-examples.net/string-format-double/)以获取您的 write 函数调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T20:11:48.837

模数也可以。（很难说哪个在安全性、可读性和性能方面更好。）

```
Decimal totalprice = (sum - 8m) * 0.60m;  // Discount $8.00 and then 40%.
totalprice -= totalprice % 0.01;  // Truncate to two decimal places. 
```

[截断小数点后两位不四舍五入](https://stackoverflow.com/questions/3143657/truncate-two-decimal-places-without-rounding)的类似问题

# android - 致命例外：主要，机器人

> ID：13187690
> 
> 赞同：2
> 
> 时间：2012-11-02T00:44:32.740
> 
> 标签：android

每当我从菜单屏幕上启动我的活动时，我都会遇到“致命例外：主要”。除了一些其他错误，这里是 LogCat

```
11-01 20:02:22.095: E/AndroidRuntime(272): FATAL EXCEPTION: main
11-01 20:02:22.095: E/AndroidRuntime(272): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{the.Newboston/the.Newboston.Snake_Basic}: java.lang.NullPointerException
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.os.Looper.loop(Looper.java:123)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.ActivityThread.main(ActivityThread.java:4627)
11-01 20:02:22.095: E/AndroidRuntime(272):  at java.lang.reflect.Method.invokeNative(Native Method)
11-01 20:02:22.095: E/AndroidRuntime(272):  at java.lang.reflect.Method.invoke(Method.java:521)
11-01 20:02:22.095: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-01 20:02:22.095: E/AndroidRuntime(272):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-01 20:02:22.095: E/AndroidRuntime(272):  at dalvik.system.NativeStart.main(Native Method)
11-01 20:02:22.095: E/AndroidRuntime(272): Caused by: java.lang.NullPointerException
11-01 20:02:22.095: E/AndroidRuntime(272):  at the.Newboston.Snake_Basic.<init>(Snake_Basic.java:21)
11-01 20:02:22.095: E/AndroidRuntime(272):  at java.lang.Class.newInstanceImpl(Native Method)
11-01 20:02:22.095: E/AndroidRuntime(272):  at java.lang.Class.newInstance(Class.java:1429)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
11-01 20:02:22.095: E/AndroidRuntime(272):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
11-01 20:02:22.095: E/AndroidRuntime(272):  ... 11 more 
```

我的代码是

```
package the.Newboston;

import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnTouchListener;

public class Snake_Basic extends Activity implements OnTouchListener {

SnakeView padView;
float x, y;
Bitmap up_pad, down_pad, left_pad, right_pad, static_pad_temp, static_pad;
boolean isRunning = false;
int screen_width = padView.getWidth();
int screen_height = padView.getHeight();
int snake_screen_width = (screen_width / 4);
int d_pad_width = snake_screen_width;
int d_pad_height = d_pad_width;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    padView = new SnakeView(this);
    padView.setOnTouchListener(this);
    x = 0;
    y = 0;
    up_pad = BitmapFactory.decodeResource(getResources(),
            R.drawable.control_pad_up);
    down_pad = BitmapFactory.decodeResource(getResources(),
            R.drawable.control_pad_down);
    left_pad = BitmapFactory.decodeResource(getResources(),
            R.drawable.control_pad_left);
    right_pad = BitmapFactory.decodeResource(getResources(),
            R.drawable.control_pad_right);
    static_pad_temp = BitmapFactory.decodeResource(getResources(),
            R.drawable.control_pad_neutral);
    static_pad = Bitmap.createScaledBitmap(static_pad_temp, d_pad_width,
            d_pad_height, true);

    setContentView(padView);

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    padView.pause();
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    padView.resume();
}

public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    x = event.getX();
    y = event.getY();
    return true;
}

public class SnakeView extends SurfaceView implements Runnable {

    SurfaceHolder ourHolder;
    int string_creator = 0;
    Thread ourThread = null;
    boolean isRunning = false;

    public SnakeView(Context context) {
        super(context);
        ourHolder = getHolder();
    }

    public void pause() {
        isRunning = false;
        while (true) {
            try {
                ourThread.join();
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            break;
        }
        ourThread = null;
    }

    public void resume() {

        ourThread = new Thread(this);
        ourThread.start();

        isRunning = true;
    }

    public void run() {
        // TODO Auto-generated method stub
        while (isRunning) {
            if (!ourHolder.getSurface().isValid())
                continue;

            Canvas canvas = ourHolder.lockCanvas();
            canvas.drawRGB(02, 02, 150);

            if (x != 0 && y != 0) {
                canvas.drawBitmap(static_pad, x
                        - (static_pad.getWidth() / 2),
                        y - (static_pad.getHeight() / 2), null);
            }

            ourHolder.unlockCanvasAndPost(canvas);
        }
    }
}

} 
```

我完全理解是否有太多人需要筛选以找出错误。因为我是初学者，所以很可能是初学者的错误。顺便说一句，我在运行之前没有收到错误（我在 Eclipse 中编码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T00:48:50.167

您在`padView`设置其值之前访问。这就是为什么您进入`NullPointerException`并且`Snake_Basic.<init>(Snake_Basic.java:21)`您的活动无法使用`RuntimeException`.

将所有类成员初始化移入`onCreate()`, after`padView`设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T00:48:29.877

请从`Snake_Basic`下面的类中查看这些行：

```
SnakeView padView;
float x, y;
Bitmap up_pad, down_pad, left_pad, right_pad, static_pad_temp, static_pad;
boolean isRunning = false;
int screen_width = padView.getWidth(); 
```

您没有`padView`在第一行初始化并在最后一行使用它`padView.getWidth();`，这是导致`NullPointerException`. `padView`请通过在上面的第一行中初始化来更正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T00:48:36.410

1）感谢您的回溯，以及相应的代码。两者都是无价的。

2）回溯说问题是“Snake_Basic.java”第21行的“空指针异常”：

```
11-01 20:02:22.095: E/AndroidRuntime(272): Caused by: java.lang.NullPointerException
11-01 20:02:22.095: E/AndroidRuntime(272):  at the.Newboston.Snake_Basic.<init>(Snake_Basic.java:21) 
```

3) 倒数到第 21 行，看起来“padView.getWidth()”正在返回一个“null”……当你尝试引用它时它就快死了。我怀疑“padView.getHeight()”可能也会失败，如果你的程序走得那么远。

问：您在哪里创建“padView”的实例？你确定它真的成功了吗？

*确保在成功创建*之前不要尝试*使用*“padView” ！

 *============ 建议更改 =============

```
public class Snake_Basic extends Activity implements OnTouchListener {

  // These members are implicitly initialized to "0" (numbers) or "null" (objects)
  // *DON'T* try to initialize any objects here
  SnakeView padView;
  float x, y;
  Bitmap up_pad, down_pad, left_pad, right_pad, static_pad_temp, static_pad;
  boolean isRunning = false;
  int screen_width, screen_height;
  ...
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    padView = new SnakeView(this);

    // Initialize stuff here, in your onCreate() method
    screen_width = padView.getWidth();
    screen_height = padView.getHeight();
    snake_screen_width = (screen_width / 4);
    d_pad_width = snake_screen_width;
    ... 
```*

# timeout - 2秒后自动隐藏和显示div

> ID：13187694
> 
> 赞同：1
> 
> 时间：2012-11-02T00:45:48.180
> 
> 标签：timeout, hide, show, intervals

我对这类脚本非常陌生，非常感谢您的帮助。

我有 3 个旋转 div，希望 div1 显示 2 秒，然后 div2 显示 2 秒，然后 div3 显示 2 秒，然后整个循环从头开始。一次一个 div，而其他 2 个被隐藏。我也想摆脱单击以启动该功能，但只要我访问该页面，循环就开始了。

我基本上是从以下帖子中获取代码。[2秒后](https://stackoverflow.com/questions/3174750/auto-hide-div-after-2-seconds)我得到了所有的工作 自动隐藏div

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:55:03.323

使用 jquery`.fadein()`和`.fadeout()`或`.css('display','none')`并使用`window.setInterval(FunctionName, 2000);`

您在第一个参数中输入的函数将每两秒运行一次。创建一个变量来跟踪您将要显示的 div。当变量变为 3 时，您将其重置为 1，以便该过程可以无限继续。

编辑：

风格：

```
div{
    width:500px;
    height:500px;
    margin-left:50px;
    border:1 px solid black;
    float:left;
    opacity:0;
}
#div3
{
    opacity:1;
}

div:nth-child(odd){
    background:#dad;
}
div:nth-child(even){
    background:#a55;
} 
```

jQuery/js：

```
var Index = 1;

window.setInterval(ChangeVisibleDiv, 2000);

function ChangeVisibleDiv()
{
    var nextIndex = Index + 1;
    var prevIndex = Index - 1;
    //reset on 4, not 3 because then the 3rd div would never be faded out.
    if(Index == 4)
        nextIndex = 1;
    // opposite story here as above
    if(Index == 1)
        prevIndex = 3;

     $(("#div" + prevIndex)).css('opacity',0);
     $(("#div" + nextIndex)).css('opacity',0);
     $(("#div" + Index)).css('opacity',1);

    Index++;

    //reset on 4, not 3 because then the 3rd div would never be faded out.
    if(Index == 4)
        Index = 1;

} 
```

html

```
<div id="div1">

</div>
<div id="div2">

</div>
<div id="div3">

</div> 
```

它从第三个 div 开始，我希望你不介意，因为我懒得修复 =)

不过，我真的建议您学习一些 jquery 和 javascript。如果你不知道它是如何工作的，那么使用它是不聪明的。至少要学习基础知识。

此外，这个论坛上的人想要有趣和具有挑战性的问题，而不是学校的作业=）

# iphone - 自动递增 NSMutableDictionary 中的键

> ID：13187695
> 
> 赞同：0
> 
> 时间：2012-11-02T00:45:48.570
> 
> 标签：iphone, plist, auto-increment, nsmutabledictionary

我想自动增加一个键和一个 NSMutableDictionary。

我试图这样做，但它不起作用：

```
NSMutableDictionary *array = [[NSMutableDictionary alloc] init];

int testAutoIndex = 0;
[array setObject:[NSNumber numberWithInt:testAutoIndex++] forKey:@"index"];
[array release]; 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T00:58:26.940

用这个：

```
NSMutableDictionary *array = [[NSMutableDictionary alloc] init];

int testAutoIndex = 0;
[array setObject:[NSNumber numberWithInt:++testAutoIndex] forKey:@"index"];
[array release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T21:20:46.007

如果你想创建一个包含 N 个条目的字典，那么可以使用代码

```
int N = 100; // or what ever number you want
NSArray *arrayOfObjectsYouWantToPumpIntoDictionary = ....;
NSMutableDictionary *mutableDictionary = [NSMutableDictionary dictionaryWithCapacity:100];

for(int i=0;i<N;i++){

    NSString *key = [NSString stringWithFormat:@"%d"i];
    [mutableDictionary setObject:[arrayOfObjectsYouWantToPumpIntoDictionary objectAtIndex:i] forKey:];
}

// Later some where else if you want to retrieve object with key of x (x can be 1, or 2 or what ever value), you can do

 objectToBeRetrieved = [mutableDictionary objectForKey:[NSString stringWithFormat:@"%d",x]; 
```

# python - Python 可变/不可变容器

> ID：13187697
> 
> 赞同：0
> 
> 时间：2012-11-02T00:45:53.420
> 
> 标签：python, immutability

以下容器在 Python 中是可变的还是不可变的？

*   列表

*   元组

*   字典

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T00:46:35.713

列表，字典：可变

元组：不可变

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-15T21:13:22.837

**可变**意味着变量的值可以在存储或引用变量的同一内存块本身中更改。

**不可变**意味着，当您尝试更改变量的值时，它会创建一个新的内存块并将新值存储在那里。

不可变——字符串、元组、数字等可变——列表、字典、类等

*例子：*

让我们考虑一个列表，它是可变的......

a=[1,2,3] 假设列表 'a' 现在位于名为“A0XXX”的内存块中，如果您想将 4,5 添加到列表中... b=[4,5] 将它们都附加一个 + =b now a=[1,2,3,4,5] 所以，现在最终列表'a'也存储在同一个内存块“A0XXX”

由于列表是可变的，它存储在同一个内存块中。

如果它是不可变的，最终列表“a”将存储在其他一些内存块“B0XXX”中，因此可以更改可变对象并将其存储在同一个内存块中，当您尝试对不可变对象执行相同操作时，一个新的创建内存块以存储更改的值。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T00:46:57.717

```
tuple - immutable

list- mutable

dictionary - mutable 
```

# openlayers - 将 CSS 规则应用于 OpenLayers 矢量特征

> ID：13187698
> 
> 赞同：1
> 
> 时间：2012-11-02T00:46:02.983
> 
> 标签：openlayers

我想通过在我的 SVG 饼图和我的 OpenLayers 矢量图层上使用相同的 css 样式来简化我的代码。这样，如果我将 css 更改为一种功能类型的不同颜色，我只有一个地方可以修改。但是，我找不到在矢量图层上设置特征的 css 类的方法。有可能吗？尽管我可以在创建每个功能时设置类，但我可能不得不使用样式映射和上下文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T10:27:46.100

您可以尝试在您的 css 文件中这样做吗：

```
svg[id *= "_something"]
{
    stylexyz1: valuexyz1;
    stylexyz2: valuexyz2;
    stylexyz3: valuexyz3;
    stylexyz4: valuexyz4;
    stylexyz5: valuexyz5;
} 
```

# javascript - 如何使用 javascript 从 html 表单评估和生成结果

> ID：13187699
> 
> 赞同：1
> 
> 时间：2012-11-02T00:46:11.907
> 
> 标签：javascript, html

正如标题所说，我需要创建一个游戏，但我的问题是我不知道如何使用 javascript 读取单选按钮，并且基于选项，它会生成一个具有玩家选择难度的游戏模式场景。我使用一个文本输入作为昵称，使用 2 个像这样的字段集供玩家选择游戏类型和难度。

```
 <fieldset>
            <legend>Dificuldade:</legend>
                    <input type="radio" name="dificuldade" value="easy"> easy </input>
                    <input type="radio" name="dificuldade" value="medium"> medium </input>
                    <input type="radio" name="dificuldade" value="hard"> hard </input>
            </fieldset> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T00:58:00.803

我建议你使用 jQuery，它让生活变得如此简单：

```
$('[name=dificuldade]:checked').val() 
```

JSFiddle：http: [//jsfiddle.net/3bc9m/](http://jsfiddle.net/3bc9m/)

否则，您将不得不检查 DOM 中的每个单选按钮，并检查它们的`checked`属性。当您找到带有 的那个时`checked === true`，您可以读取它的`value`属性。像这样：

```
var fieldset = document.getElementById('difficuldade'); // You'd need to set an ID to the fieldset element
var curr = fieldset.firstChild;

while (curr != null) {
    if (curr.checked) {
        break;
    }
    curr = curr.nextSibling;
}

curr.value; // This is your selected value 
```

JSFiddle：http: [//jsfiddle.net/3bc9m/1/](http://jsfiddle.net/3bc9m/1/)

正如 Nate 所说，确保 DOM 已准备好，否则这将不起作用。这意味着您的所有代码都应该在元素的`onload`事件上运行。`body`有关更多详细信息，请参见：http: [//www.w3schools.com/jsref/event_body_onload.asp](http://www.w3schools.com/jsref/event_body_onload.asp)

# java - 无法确定程序中读取的文本文件中的各种元素（java）

> ID：13187702
> 
> 赞同：0
> 
> 时间：2012-11-02T00:46:43.700
> 
> 标签：java, file, text, arraylist

我无法确定如何以可用的方式拆分文本文件中的单独元素。我的程序是在一个文本文件中读入一个数组列表，显示可能的答案，要求一个答案，只有在给出正确答案时才继续。麻烦的是，文本文件必须有不同数量的答案，因此没有数字方法来确定何时在文本文件中找到问题以及有多少问题。以下是测验文本文件的示例：

舔几下才能到达 tootsie pop 的 tootsie roll 中心？（**问题**）

4（**分配给正确答案的数值**）

（**可能的答案**）

一

二

三

四

你叫什么名字？

3

亚瑟，英国国王

勇敢的兰斯洛特爵士

罗宾爵士不像兰斯洛特爵士那样勇敢

谁先上？

5

什么

为什么

因为

谁

我不知道

我讨厌问你们一个广泛的逻辑问题，但我真的坚持这一点。这是我的代码：

```
import java.util.*;
import java.io.*;
public class JavaApplication8 {

/**
 * @param args the command line arguments
 */
public static void main(String[] args) throws IOException{

    Scanner inScan = new Scanner(System.in);

    String file_name;
    System.out.print("What is the full file path name?\n>>");
    file_name = inScan.next();

    Scanner fScan = new Scanner(new File(file_name));
    ArrayList<String> Questions = new ArrayList();

    while (fScan.hasNextLine()) 
    {
        Questions.add(fScan.nextLine());
    }

    System.out.println(Questions.get(0));
    System.out.println(Questions.get(2));
    System.out.println(Questions.get(3));
    System.out.println(Questions.get(4));
    System.out.println(Questions.get(5));

    String guess;
    System.out.print("What is your answer?\n>>");
    guess = inScan.next();

    if (guess == Questions.get(1))
    {
        System.out.println("Correct");
    }

    else

        System.out.println("Incorrect");

} 
```

**我没有为其他问题编写代码，只有第一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:55:03.323

似乎问号的唯一实例`?`是有问题时。测试文件中的每一行以查看该行中是否有问号。如果是这样，那么这是一个新的问题/答案集。

# xcode - 使用 TCP/IP 发送数据包以在 XCode 中使用

> ID：13187706
> 
> 赞同：2
> 
> 时间：2012-11-02T00:46:52.873
> 
> 标签：xcode, network-programming, tcp-ip

我对网络编程非常陌生，希望能帮助我理解一些好的进展步骤。我正在设计一个 iOS 应用程序，该应用程序需要通过网络从另一台机器传送实时信息。我知道这台机器的 IP 地址，以及这台机器在发送和接收消息方面所遵循的 API。

通过一些研究，似乎我需要在机器的一个端口上打开一个套接字，并在我的计算机上打开另一个套接字，然后使用 TCP/IP 在两者之间发送和接收数据包。

在这一点上我需要做的过程的一个很好的概述是什么？您会建议哪种语言和环境最有效地让我能够从这台机器获取我需要的信息到我的 XCode 项目中？

谢谢！任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T21:12:21.570

您只需要寻找如何为 IOS 进行“套接字编程”的示例。这是一个资源：

[http://www.tekritisoftware.com/sites/default/files/Socket_Programing_for_IOS.pdf](http://www.tekritisoftware.com/sites/default/files/Socket_Programing_for_IOS.pdf)

# windows - 阻止对特定名称的任何目录的访问

> ID：13187709
> 
> 赞同：0
> 
> 时间：2012-11-02T00:47:17.473
> 
> 标签：windows, security, iis, iis-7

在 IIS 中是否可以阻止访问公共 Web 文件夹中具有特定名称的任何目录。例如`private_cms`？

如果可能的话，这是否有任何性能损失？将文件存储在 www 文件夹之外会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:14:15.823

将您的目录添加到 IIS 中的“请求过滤器”：

不好意思我用的是中文版的windows

![在此处输入图像描述](../Images/a51af65b22ace86917cf84c9c338b19d.png)

![在此处输入图像描述](../Images/20ad2dffc5fc601e64e64bc528275fc0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:56:28.113

是的，使用 Windows 资源管理器删除 IIS 用户从该文件夹读取的权限。

# python - 如何从这个 xml 标签中获取时间？

> ID：13187711
> 
> 赞同：1
> 
> 时间：2012-11-02T00:47:24.807
> 
> 标签：python, xml

我试图从一个[长的 xml 文档中获取一些属性。](http://waterservices.usgs.gov/nwis/iv/?format=waterml,1.1&sites=01646500&parameterCd=00060,00065)具体来说，我希望获得该代码可靠地完成的阶段 cfs 和 ft 级别。困难是我似乎无法弄清楚如何从标签中提取时间戳作为日期时间值，类似于：

```
<ns1:value qualifiers="P" dateTime="2012-11-01T18:45:00.000-05:00">54800</ns1:value> 
```

非常感谢任何帮助和改进建议。

```
def getLevels(gaugeId):

    # create url string 00060=cfs and 00065=ft
    urlRoot = "http://waterservices.usgs.gov/nwis/iv/?format=waterml,1.1&sites="
    urlTail = "&parameterCd=00060,00065"
    url = urlRoot + str(gaugeId) + urlTail
    del urlRoot, urlTail

    # open connection to url
    urlFile = urllib2.urlopen(url)

    # convert urlFile to string data:
    urlData = urlFile.read()

    # close file to release memory
    urlFile.close()

    # parse downloaded xml
    domData = parseString(urlData)

    # extract xml element values for stage cfs and ft
    index = 0
    elementCount = domData.getElementsByTagName("ns1:value").length
    output = []
    while elementCount >= index:
        xmlString = domData.getElementsByTagName("ns1:value")[index].toxml()
        output.append(stripXmlTags(xmlString))
        index = index + 1

    # extract and return
    return output 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:15:42.153

ElementTree 的 iter() 方法也可以方便地获取一些您想要的数据，如下所示。一些示例输出跟随程序。

```
#!/usr/bin/env python
from xml.etree import cElementTree as ET
from datetime import datetime
import re

with open('waterservices.usgs.gov.xml','r') as fi:
    waterData = ''.join(fi.readlines())
waterData = re.sub('ns[12]:', '', waterData)
root = ET.fromstring(waterData)
dates = [v.get('dateTime') for v in root.iter('value')]
valus = [float(v.text) for v in root.iter('value')]
units = [v.text for v in root.iter('variableName')]
print 'valus', valus
print 'units', units
print 'dates', dates
dates = [datetime.strptime(t[:-6], '%Y-%m-%dT%H:%M:%S.%f') for t in dates]
print 'dates', dates
a = zip (valus, units, dates)
for v in a:
    print v 
```

（注意，我不知道如何正确处理前缀`ns1:`和，`ns2:`因此在上面通过`re.sub`. `urllib2`，不处理时区。）下面的示例输出基于 [来自问题链接的](http://waterservices.usgs.gov/nwis/iv/?format=waterml,1.1&sites=01646500&parameterCd=00060,00065)XML 数据文件，保存为本地文件`waterservices.usgs.gov.xml`。

```
valus [53200.0, 6.86]
units ['Streamflow, ft&#179;/s', 'Gage height, ft']
dates ['2012-11-01T19:45:00.000-05:00', '2012-11-01T19:45:00.000-05:00']
dates [datetime.datetime(2012, 11, 1, 19, 45), datetime.datetime(2012, 11, 1, 19, 45)]
(53200.0, 'Streamflow, ft&#179;/s', datetime.datetime(2012, 11, 1, 19, 45))
(6.86, 'Gage height, ft', datetime.datetime(2012, 11, 1, 19, 45)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:35:31.067

您可以以此为起点 - 请注意，这目前忽略了时区...

```
from xml.etree import ElementTree as ET

tree = ET.fromstring(urlData)
for elem in tree.findall('.//{http://www.cuahsi.org/waterML/1.1/}value'):
    print datetime.strptime(elem.attrib['dateTime'][:-10], '%Y-%m-%dT%H:%M:%S') 
```

# mysql - 简单查询需要移动到模型

> ID：13187712
> 
> 赞同：0
> 
> 时间：2012-11-02T00:47:30.377
> 
> 标签：mysql, ruby-on-rails

我有一个简单的 mysql 查询需要输入我的管理员。它显示了被禁止客户的列表，以及他们的姓名、备注字段和电子邮件。在这个过时的 Rails 2.3 应用程序中，我们到处都有查询。尽管我是 Rails 的新手，但我很确定这需要存在于 Customer 模型中。我知道如何在视图中构建表格，我只是不确定模型的语法，它是否应该是一个命名范围，例如，yata yat ya...任何建议或帮助都会非常受欢迎！

```
SELECT first_name, last_name, notes, email_primary
FROM customer
WHERE banned = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:58:08.370

命名范围是合适的：

```
class Customer
  named_scope :banned, :conditions => {:banned => true}
end

Customer.banned # returns a collection of banned customers 
```

# c# - 如何使用 ASP.NET 托管在南希使用 SignalR 将服务器与客户端通信？

> ID：13187713
> 
> 赞同：4
> 
> 时间：2012-11-02T00:47:39.090
> 
> 标签：c#, signalr, nancy

我为[SignalR](http://signalr.net/)找到的大多数示例都假设为 ASP.NET（无论是否为 MVC）。我正在使用[NancyFX](http://www.nancyfx.org)。我只有一个问题，所以我希望有些事情我忽略了，或者我需要在 Nancy 做一些事情来弥补不是 ASP.NET。

我的一个目标是能够在服务器事件发生时通知客户端浏览器。我不打算用集线器方法替换我的南希路线。但我希望能够从我的路由（操作）调用浏览器。

我按照[SignalR Wiki](https://github.com/SignalR/SignalR/wiki/QuickStart-Hubs)中的示例创建了非常简单的集线器。我什至不确定我是否需要它，因为我不打算将客户端调用到服务器。

```
public interface IUserNotifier
{
    void Start();
    void Notify(object @event);
} 
```

我使用了一个接口，希望以后能够注入相同的集线器以在我的 nancy 路由中使用……我不确定这是否可行。

```
[HubName("userNotifier")]
public class UserNotifier : Hub, IUserNotifier
{        
    public void Start()
    {
        Notify(new {Status = "Started"});
    }

    public void Notify(object @event)
    {
        Clients.notification(@event);
    }
} 
```

当我的 html 文件中有以下代码时，我可以看到它执行`Start()`方法，然后执行`Notify()`方法，将内容传递给我的客户端。

```
var communicator = $.connection.userNotifier;

$.extend(communicator, {
    Notification: function(event) {
        alert("notification received from server!");
        console.log(event);
    }
});

$.connection.hub.start()
    .done(function() {
        communicator.start();
}); 
```

就像我说的，“启动”集线器工作并向客户端发送通知。很酷。但是，我的主要目标还没有实现。我需要从我的代码中可能与“请求”没有直接关联的其他地方启动这些通知。

我尝试在我的 nancy 模块中注入我的 IUserNotifier 以在路由中使用，但是当`Notify()`被触发时，我得到：

![无法对空引用执行运行时绑定](../Images/a365427e450f7907deb3fa6af59ee33a.png)

那是因为基类`Clients`上的属性`Hub`为 null（尚未初始化）。所以，我换了档。我尝试遵循多个示例，包括[wiki 页面中有关集线器](https://github.com/SignalR/SignalR/wiki/Hubs)的示例，该示例位于名为“从集线器外部通过集线器进行广播”的部分：

```
public class NotifierModule : NancyModule
{
    public NotifierModule(){

        Get["/notify/{message}"] = p => { 
            var context = GlobalHost.ConnectionManager.GetHubContext<UserNotifier>();
            context.Clients.notification(new { Message = p.message });
        };
    }
} 
```

我的南希路线执行没有抛出错误。除了我的浏览器永远不会收到消息。如果我在路由中设置断点，我可以看到它`Clients`已初始化。也许客户端的集合已初始化但为空。谁知道？也许你会。:)

同样，我的主要目标是能够随时随地从我的代码中的任何位置向浏览器发送事件/通知。那是过分的要求？我应该在这里做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-19T02:54:41.753

我相信你一定已经找到了答案。但是，我想我可以尝试提供帮助，以防其他人遇到类似问题。为了让 .NET 端的服务器向客户端发送消息，它还需要与集线器建立连接。

```
var connection = new HubConnection("http://localhost/");
connection.Start();
connection.Notify("Hello"); 
```

在以下位置查看官方示例：

[https://github.com/SignalR/SignalR/blob/master/samples/Microsoft.AspNet.SignalR.Client.Samples/Program.cs](https://github.com/SignalR/SignalR/blob/master/samples/Microsoft.AspNet.SignalR.Client.Samples/Program.cs)

# php - （谷歌美化）语法高亮在回调后不起作用

> ID：13187717
> 
> 赞同：1
> 
> 时间：2012-11-02T00:48:05.353
> 
> 标签：php, javascript, syntax-highlighting

该方法适用于单个 php 文件：

因此，在我的 html 页面中，我尝试使用 js 并调用 php 文件并通过 google prettify 突出显示内容

```
<!DOCTYPE html>
<html lang="en">
<head>
<link href="googleprettify/prettify.css" type="text/css" rel="stylesheet" />

<script src="googleprettify/prettify.js" type="text/javascript"></script>   
<script>
function loadXMLDoc()
{
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("myDiv").innerHTML=xmlhttp.responseText;

    }
  }
xmlhttp.open("GET","callback_json.php",true);
xmlhttp.send();

}
</script>
   </head>

  <body onload="prettyPrint()" >

  <button onclick="loadXMLDoc();">Get Data</button>
<div id="...">
<pre class='prettyprint;'> 
    function foo()
    {
        if (counter == 10)
            return;
        // it works!
    }</pre>
</div>

<div id="myDiv">
need to be replaced
</div>
 </body>

</html> 
```

第一段代码工作得很好但是当我调用 php 文件时

```
<?php
  $ch = curl_init();
  $url='someurl';
  $timeout = 5;
  curl_setopt($ch, CURLOPT_URL, $url);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
  $data = curl_exec($ch);
  curl_close($ch);

  echo '<pre class="prettyprint;"> ';
  echo $data;
  echo "</pre>";?> 
```

并且返回代码无法突出显示。我怀疑 body onload="prettyPrint()" 是否存在问题，因为 prettyprint() 仅在页面加载时运行，但我不确定这一点。还是代码结构有问题？或者无论如何在不加载整个页面的情况下再次加载漂亮打印功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:04:44.867

更新 DOM 后，`prettyPrint()`再次调用，否则只插入了一些新的 HTML，但美化没有运行：

```
...
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
      document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
      prettyPrint();
      ^^^^^^^^^^^^^^ 
```

# ember.js - Ember.js 支持哪些事件？

> ID：13187719
> 
> 赞同：7
> 
> 时间：2012-11-02T00:48:19.567
> 
> 标签：ember.js

我无法在任何地方找到此文档或在任何问题中回答。我唯一确定存在的是“点击”（通过使用[操作处理事件](http://emberjs.com/documentation/#toc_handling-events-with-action)）。

我见过的相关问题（没有回答我的问题）：

*   [除了点击以外的 Ember 事件](https://stackoverflow.com/questions/9237741/ember-events-other-than-click)
*   [使用 Ember.js，如何在渲染视图后运行一些 JS？](https://stackoverflow.com/questions/8881040/using-ember-js-how-do-i-run-some-js-after-a-view-is-rendered)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-02T01:18:30.020

支持的事件名称列在[http://emberjs.com/api/classes/Ember.View.html](http://emberjs.com/api/classes/Ember.View.html)中。只需搜索“可能的事件名称”：

**触摸事件**：'touchStart'、'touchMove'、'touchEnd'、'touchCancel'

**键盘事件**：'keyDown'、'keyUp'、'keyPress'

**鼠标事件**：'mouseDown'、'mouseUp'、'contextMenu'、'click'、'doubleClick'、'mouseMove'、'focusIn'、'focusOut'、'mouseEnter'、'mouseLeave'

**表单事件**：'submit'、'change'、'focusIn'、'focusOut'、'input'

**HTML5 拖放事件**：'dragStart'、'drag'、'dragEnter'、'dragLeave'、'drop'、'dragEnd'

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T18:11:41.613

这也是源中[的列表](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/event_dispatcher.js#L32-60)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-17T19:59:58.043

为了清楚起见，我只想在这里列出。

从`ember-views/lib/system/event_dispatcher.js`

列表：

```
 events: {
    touchstart  : 'touchStart',
    touchmove   : 'touchMove',
    touchend    : 'touchEnd',
    touchcancel : 'touchCancel',
    keydown     : 'keyDown',
    keyup       : 'keyUp',
    keypress    : 'keyPress',
    mousedown   : 'mouseDown',
    mouseup     : 'mouseUp',
    contextmenu : 'contextMenu',
    click       : 'click',
    dblclick    : 'doubleClick',
    mousemove   : 'mouseMove',
    focusin     : 'focusIn',
    focusout    : 'focusOut',
    mouseenter  : 'mouseEnter',
    mouseleave  : 'mouseLeave',
    submit      : 'submit',
    input       : 'input',
    change      : 'change',
    dragstart   : 'dragStart',
    drag        : 'drag',
    dragenter   : 'dragEnter',
    dragleave   : 'dragLeave',
    dragover    : 'dragOver',
    drop        : 'drop',
    dragend     : 'dragEnd'
  }, 
```

# scala - Scala：复制具有特征的案例类

> ID：13187722
> 
> 赞同：10
> 
> 时间：2012-11-02T00:48:29.683
> 
> 标签：scala

我对 Scala 相当陌生，我有一个关于复制案例类同时保留来自特征的数据的最佳方法的问题。例如，假设我有以下内容：

```
trait Auditing {

  var createTime: Timestamp = new Timestamp(System.currentTimeMillis)
}

case class User(val userName: String, val email: String) extends Auditing

val user = User("Joe", "joe@blah.com") 
```

然后我想制作一个更改了一个参数的新副本：

```
val user2 = user.copy(email = "joe@newemail.com") 
```

现在，在上面的示例中，属性 createTime 不会被复制，因为它没有在 User case 类的构造函数中定义。所以我的问题是：假设将 createTime 移动到构造函数中不是一个选项，那么获取包含特征值的 User 对象副本的最佳方法是什么？

我正在使用 Scala 2.9.1

提前致谢！乔

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T02:25:02.407

您可以使用该行为覆盖复制方法。

```
case class User(val userName: String, val email: String) extends Auditing
{
  def copy(userName = this.userName, email = this.email) {
   val copiedUser = User(userName, email)
   copiedUser.createTime = createTime
   copiedUser      
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T07:35:15.043

虽然除了 Reuben 的解决方案，我没有看到其他解决方案，但我不明白保持构造函数 args 不变的要求。这将是最自然的解决方案：

```
case class User(userName: String, email: String, 
   override val createTime:Timestamp = new Timestamp(System.currentTimeMillis)) 
      extends Auditing 
```

如果您不希望用户能够覆盖`createTime`，您仍然可以使用：

```
case class User private (userName: String, email: String, 
   override val createTime:Timestamp) extends Auditing {
   def this(userName: String, email: String) =
     this(userName, email, new Timestamp(System.currentTimeMillis))
} 
```

唯一的缺点是您需要编写`new User("Joe", "joe@blah.com")`，因为主构造函数现在是私有的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-06T05:39:10.327

最好不要使用案例类。您可以轻松实现自己需要的功能。下面的代码实现了您想要的复制方法，一个没有 new 的构造函数，隐藏了原始构造函数，并创建了一个提取器，以便您可以在 case 语句中使用 User。

```
class User private(val userName: String,
                   val email: String,
                   val timeStamp: Timestamp =
                   new Timestamp(System.currentTimeMillis)) {

    def copy(uName: String = userName,
             eMail: String = email) =
    new User(uName, eMail, timeStamp)
}

object User {
  def apply(userName: String, email: String) =
    new User(userName, email)

  def unapply(u: User) = Some((u.userName, u.email, u.timeStamp))
} 
```

# ruby-on-rails - Cancan授权自定义模块

> ID：13187726
> 
> 赞同：0
> 
> 时间：2012-11-02T00:48:50.493
> 
> 标签：ruby-on-rails, ruby-on-rails-3, cancan

我在我的应用程序控制器中加载的 lib 目录中有一个自定义模块。我开始使用 cancan，现在我的自定义模块中的所有操作都收到拒绝访问错误。我不想让 cancan 检查我的自定义模块的授权。解决此问题的一种方法是使用`except => [:action_name_in_my_custom_module]`，但我在许多地方的应用程序中使用了很多操作。我需要一个更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:36:08.400

假设您有一个控制器操作模块并且您将其包含在您的控制器中，您是否有理由没有将它们全部放入`ApplicationController`？

您可以尝试的一件事是`skip_before_filter`在模块中使用。这将在您包含 MyModule 的任何类上调用该方法：

```
module MyModule
  def self.included(klass)
    klass.class_eval <<-filters
      skip_before_filter :filter_method_to_skip, only: [:method_a, :method_b, ...]
    filters
  end
end

class MyController < ApplicationController
  before_filter :filter_method
  include MyModule
end 
```

*我相信在*定义过滤器之前需要包含它。

# c# - 在 C# 中嵌入声音

> ID：13187727
> 
> 赞同：2
> 
> 时间：2012-11-02T00:48:53.467
> 
> 标签：c#, visual-studio-2010, audio

我知道有很多关于同一主题的主题，但由于我还不明白的原因，这对我不起作用。

我有这个项目树：

![项目树](../Images/36e2c5c6d38c95fb05726c7458e79318.png)

我从 Project->Properties->Resources 菜单将 alarm.wav 嵌入到 .resx 文件中。

我尝试了不同的代码组合，但没有任何效果。

目前这是我正在尝试的代码。

```
using System;
using System.Media;
using System.Windows.Forms;
using System.Threading;
using System.Globalization;
using System.ComponentModel;
using System.Resources;
using AlarmForm;

namespace Alarm
{
    public partial class Form1 : Form
    {
        private bool estado = false;
        private SoundPlayer sonido;

        public Form1()
        {
            InitializeComponent();
            ResourceManager resources = new ResourceManager(typeof(Form1));
            sonido = new SoundPlayer(resources.GetStream("alarma"));
        }
    }
} 
```

## 在编译或运行时不会显示错误，但会听到错误哔声而不是声音。

**已编辑：**我在尝试使用 Alarm.Properties 时发现的错误

![Alarm.Properties 错误](../Images/f699aaab856ce73128ee09bceba3ae09.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:00:41.853

您为什么要尝试使用`resources.GetStream()`，而您可以直接使用链接文件`Alarm.Properties`？我相信这会容易得多。我看到您还忘记播放链接到的声音文件，`sonido`该文件代表新的`SoundPlayer`. 这是一个简单的例子，展示了如何使用`SoundPlayer`

**例子**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Resources;
using System.Media;
using AlarmForm.
using AlarmForm.Properties; //Required to call 'Resources' directly

namespace Alarm
{
    public partial class Form1 : Form
    {
        private bool estado = false;
        private SoundPlayer sonido;

        public Form1()
        {
            InitializeComponent();
            //ResourceManager resources = new ResourceManager(typeof(Form1)); //We do not actually need this
            sonido = new SoundPlayer(Resources.alarma); //Initialize a new SoundPlayer linked to our sound file (or Alarm.Properties.Resources.alarma if Alarm.Properties was not imported)
            sonido.Play(); //Required if you would like to play the file
        }
    }
} 
```

**请注意**：您可以随时停止`SoundPlayer`播放，`sonido.Stop()`因为如果尝试调用的 void是静态的，则它表示在下定义`sonido`了一个新的名称类。`SoundPlayer``public partial class Form1: Form``sonido`

谢谢，
我希望你觉得这有帮助:)

# c++ - 在没有宏的情况下省略移动/复制时推断类型

> ID：13187736
> 
> 赞同：6
> 
> 时间：2012-11-02T00:50:24.947
> 
> 标签：c++, templates, constructor, c++11

考虑以下简单`make_pair`类：

```
template <class X, class Y>
struct Pair
{
    X x;
    Y y;
}; 
```

此外，我们将创建一个简单的类来显示任何移动/复制：

```
struct C
{
    C(int n_) : n(n_) {};
    C(const C& x) { n = x.n; std::cout << "Copy: " << n << std::endl; }
    C(C&& x)      { n = x.n; std::cout << "Move: " << n << std::endl; }
    int n;
}; 
```

然后我们可以运行：

```
auto z1 = Pair<C, C>{C(1),C(2)}; 
```

并且没有输出，`C`没有移动或复制。

但是，我们必须在构造函数中指定类型`Pair`。假设我们想推断这些。我们可以这样做：

```
template <class X, class Y>
Pair<X, Y> make_pair(X&& x, Y&& y)
{
    return Pair<X, Y>{std::forward<X>(x), std::forward<Y>(y)};
} 
```

然后我们可以这样做：

```
auto z2 = make_pair(C(3),C(4)); 
```

但这打印：

```
Move: 3
Move: 4 
```

如果是堆分配类型，则不是问题`C`，但如果是堆栈分配类型，则移动基本上是副本。

但是然后让我们定义这个宏：

```
#define MAKE_PAIR(x,y) decltype(make_pair(x,y)){x,y} 
```

然后我们可以这样做：

```
auto z3 = MAKE_PAIR(C(5),C(6)); 
```

这确实是类型扣除并且不需要移动。但是我们需要做一个宏，我觉得有点乱，也阻止了我们使用操作符来做这种事情。

是否有执行以下操作的解决方案：

(1) 推导类型（如 2 和 3）
(2) 不需要复制或移动（如 1 和 3）
(3) 不需要宏（如 1 和 2）

我能得到的最好是三分之二，但肯定三分之三是可能的吗？我无法想象 C++ 会强迫人们使用宏来获得我所追求的行为，因为显然 C++ 正在远离宏。

代码在[这里](http://ideone.com/A6DqH1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:59:45.383

> 我无法想象 C++ 会强迫人们使用宏来获得我所追求的行为，因为显然 C++ 正在远离宏。

你所追求的行为一开始就没有得到标准的保证。省略是一种*优化*；任何实施都不需要它。因此，它们中的任何一个都不能保证做你想做的事情，尽管显然其中一些至少允许它成为可能。

转发有效地使省略成为不可能；对此事实无能为力。完美转发就是引用和引用折叠；省略是关于初始化值参数的值，它在初始调用站点无法知道。

在现实世界的情况下，这应该不是问题。大多数真正值得省略的东西都是复制*成本高昂*的东西。复制一些`int`s 或`floats`，尤其是对于一个琐碎的类，甚至可能不会在分析器上显示为一个光点。在绝大多数情况下，复制成本很高的对象是因为它们拥有某种资源，例如分配的内存。所以大多数复制成本高的类型也可以移动，因此移动成本低。

无论如何，是的，如果你想有省略的可能性，你不能使用转发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:00:09.910

在您的示例中，您仍然必须指定一次类型。如果您的目标是避免多次指定类型，您可以这样做：

```
auto z = Pair<C,C>{3,4}; 
```

请注意，如果您有更复杂的构造函数，这甚至可以工作：

```
struct C {
  C(int,int) { }
  C(int) { }
};

auto z = Pair<C,C>{{1,2},3}; 
```

并且不需要副本。

# c++ - 具有私有数据成员的内联类函数

> ID：13187746
> 
> 赞同：9
> 
> 时间：2012-11-02T00:51:53.760
> 
> 标签：c++, oop, class, function, inline

现在我一直在学习内联函数，我遇到了一些让我很困惑的事情

看这堂课

```
class Nebla{
private:
    int x;
public:
    inline void set(int y){x=y;}
    inline void print(){cout<<x<<endl;}
}; 
```

它有一个私有数据成员：`int x;`

它有两个公共的内联函数：`set(int y)` 和`print()`

现在，由于这两个函数是内联的，所以当它们被调用时，编译器会将函数调用替换为函数的内容。

所以如果我这样做

```
Nebla n;
n.set(1);
n.print(); 
```

由于这两个函数是内联的，它应该是等价的：

```
Nebla n;
n.x=1;
cout<<n.x<<endl; 
```

但等一下，`x`是私人的。因此，这不应该工作。

但它确实如此，我很困惑为什么它确实有效，尽管通常你不能从课堂外访问私人成员？

谁能解释一下为什么您可以从类外部访问私有数据成员，但是当成员函数是内联的时，尽管内联只是将函数调用替换为函数的内容，但它可以吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T01:10:09.970

数据成员保护纯粹是*概念性*的。它仅存在于编译器级别。当编译器翻译源代码时，它会被检查并强制执行。一旦代码被编译，公共数据成员和私有数据成员之间就没有区别了，即没有物理机制可以强制访问控制和阻止对私有数据成员的访问。

编译器根据语言规范强制执行成员访问。语言规范规定类成员函数（无论它们是否内联）可以访问类的私有成员。所以编译器允许这种访问。同时，禁止其他函数进行此类访问，因此编译器会抱怨它。

在您的示例中，您正在从成员函数访问私有数据成员。这是允许的，所以代码编译，即编译器不会抱怨。在函数被内联之后，在生成的机器代码中稍后发生的事情完全无关紧要。这里的所有都是它的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T00:55:48.213

您误解了内联的工作原理。编译器内联代码的*逻辑*，而不是代码的实际*文本*。

> 谁能解释一下为什么您可以从类外部访问私有数据成员，但是当成员函数是内联的时，尽管内联只是将函数调用替换为函数的内容，但它可以吗？

因为函数的*内容就是函数的内容*。它们不会因为被内联而不再是函数。您可以从成员函数内部访问私有成员变量。当一个成员函数被内联时，它的代码仍然在成员函数内部，因为该*函数*是内联的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T00:57:38.577

首先，是否内联取决于编译器。在很多情况下，它会决定不是最好的做法。

其次，在它内联它的情况下，它使用编译的二进制文件，C++ 源代码中描述的行为的产物，而不是实际的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T02:51:28.453

Morbo 说 inline 关键字不是这样工作的。

Morbo 说 inline 关键字表示链接器时涉及此函数的符号冲突应该被忽略，并且所有实现在类声明中的函数都是隐式内联的。

莫博是明智的。你应该听 Morbo，即使 inline 有一个小的技术附加含义，涉及获取地址。

更严重的是，内联只是让您将实现的定义放入头文件中。实际上使代码内联更容易，因为它不必在链接时发生（并且大多数 C++ 链接器都太懒了），但它不会导致代码内联。

最后，隐私是概念性的，它不是由 C++ 运行时强制执行的。它只是在编译时通过告诉您某些内容超出范围来强制执行。

# javascript - Javascript 包含导致 500 错误

> ID：13187747
> 
> 赞同：0
> 
> 时间：2012-11-02T00:52:00.063
> 
> 标签：javascript

所以我在 html 页面上使用以下代码：

```
var uploader = document.getElementById('uploader');
    upclick(
     {
      element: uploader,
      action: 'helpers/uploadScript.php', 
      onstart:
        function(filename)
        {
          alert('Start upload: '+filename);
        },
      oncomplete:
        function(response_data) 
        {
          alert(response_data);
        }
     }); 
```

这应该调用我找到的 Google 文件上传器，但我收到以下错误：

```
GET http://***/helpers/upclick.js 500 (Internal Server Error) add.html:6 
```

Uncaught ReferenceError: upclick is not defined add.html:17 (匿名函数)

难道我做错了什么？

# jquery - rails3-jquery-autocomplete：如何使用 RSpec 和 Capybara 进行测试？

> ID：13187753
> 
> 赞同：7
> 
> 时间：2012-11-02T00:53:17.533
> 
> 标签：jquery, ruby-on-rails, jquery-ui, rspec, capybara

我正在使用 Rails 3.2.8

*   宝石'jquery-rails'，'2.1.2'
*   宝石'rails3-jquery-autocomplete'，'1.0.9'
*   宝石'rspec-rails'，'2.11.4'
*   宝石'水豚'，'1.1.3'
*   宝石“水豚-webkit”，“0.12.1”

我最近将选择下拉列表转换为自动完成（使用 rails3-jquery-autocomplete）并尝试更新我的请求规范以填写自动完成。

我的方法是创建一个助手，如[本要点](https://gist.github.com/919459)所示：

```
def fill_autocomplete(field, options = {})
  fill_in field, :with => options[:with]

  selector = "ul.ui-autocomplete a:contains('#{options[:select]}')"

  page.should have_selector selector
  page.execute_script "$(\"#{selector}\").mouseenter().click()"
end 
```

如果我使用 Webkit 进行测试，测试会失败并显示以下消息：

```
expected css "ul.ui-autocomplete a:contains('Firstname Lastname')" to return something. 
```

如果我使用 Selenium 进行测试，当我在 Firefox 中观看测试时，我看*不到*下拉选择列表出现。添加一个`sleep 3`等待下拉菜单没有帮助。

我[在这里](https://github.com/thoughtbot/capybara-webkit/issues/50)看到capybara-webkit 有一个相关但有点老的问题，当一个字段被填写时，它会立即变得模糊，这当然会阻止自动完成选择列表的出现。但这似乎与其他已使其工作的人不相符。

目前是否可以使用 RSpec 和 Capybara 测试包含 rails3-jquery-autocomplete 字段的表单？如何？如果没有，有没有办法手动填写相应的隐藏`id`字段，以便我仍然可以测试表单是否创建了正确的数据？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T20:26:25.533

终于得到了至少与 Selenium 驱动程序一起工作的自动完成测试。

解决方案是将焦点放在字段上并发出 keydown 事件。

我首先通过浏览器中的手动测试确认了这一点。如果我使用鼠标（不是 Ctrl-V）将搜索词粘贴到自动完成字段中，则不会发生任何事情——不显示下拉选择列表。这显然等同于 Capybara 发送 fill_in 命令时发生的情况。但是，在术语在字段中之后，当焦点仍然在字段上时，如果我触摸任何键，例如 Shift 键，就会出现选择列表。所以显然选择列表只在按下一个键时出现。

**选项1**

一种解决方案是从原始问题扩展功能，如下所示：

```
def fill_autocomplete(field, options = {})
  fill_in field, :with => options[:with]

  page.execute_script %Q{ $('##{field}').trigger("focus") }
  page.execute_script %Q{ $('##{field}').trigger("keydown") }
  selector = "ul.ui-autocomplete a:contains('#{options[:select]}')"

  page.should have_selector selector
  page.execute_script "$(\"#{selector}\").mouseenter().click()"
end 
```

然后这样称呼它：

```
fill_autocomplete "to_contact_name", with: "Jone", select: "Bob Jones" 
```

**选项 2**

一种类似的方法，改编自主要 rails3-jquery-autocomplete gem 中的[Steak 测试](https://github.com/crowdint/rails3-jquery-autocomplete/blob/master/lib/steak/autocomplete.rb)，使用标准的 fill_in，然后是这个 choose_autocomplete_result：

```
def choose_autocomplete_result(item_text, input_selector="input[data-autocomplete]")
  page.execute_script %Q{ $('#{input_selector}').trigger("focus") }
  page.execute_script %Q{ $('#{input_selector}').trigger("keydown") }
  # Set up a selector, wait for it to appear on the page, then use it.
  item_selector = "ul.ui-autocomplete li.ui-menu-item a:contains('#{item_text}')"
  page.should have_selector item_selector
  page.execute_script %Q{ $("#{item_selector}").trigger("mouseenter").trigger("click"); }
end 
```

像这样调用：

```
fill_in "to_contact_name", :with => "Jone"
choose_autocomplete_result "Bob Jones", "#to_contact_name" 
```

我在测试中采用了第二种方法。Selenium 似乎很可靠，但不适用于 webkit，这太糟糕了，因为相比之下 Selenium 测试相当慢。欢迎在 webkit 下工作的解决方案！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-09T05:06:21.670

我自己也碰到了同样的痛点。在这上面花了几个小时之后，我有了一个很好的帮手，它可以同时使用 selenium 和 polstergeist，而且不使用`sleep()`. 以下代码已使用 Capybara 2.1.0 进行了测试：

```
 def fill_autocomplete(field, options = {})
    fill_in field, with: options[:with]

    page.execute_script %Q{ $('##{field}').trigger('focus') }
    page.execute_script %Q{ $('##{field}').trigger('keydown') }
    selector = %Q{ul.ui-autocomplete li.ui-menu-item a:contains("#{options[:select]}")}

    page.should have_selector('ul.ui-autocomplete li.ui-menu-item a')
    page.execute_script %Q{ $('#{selector}').trigger('mouseenter').click() }
  end 
```

基本上，我告诉 Capybara 填写输入字段，然后使用 JS 触发`keydown`事件以激活自动完成。但是`sleep()`，我利用了`page.should have_selector('ul.ui-autocomplete li.ui-menu-item a')`等待下拉列表出现的机会，而不是 。然后我用JS触发`mouseenter`事件然后点击。我希望有比使用 JS eval 做事更好的方法，但这是我能想到的最可靠的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-04T21:12:32.050

如果有人需要一些代码来获得灵感（即使在阅读了这个帖子之后我也花了一些时间），这很有效：

```
 context "with 5 items results" do
        before do
          5.times { FactoryGirl.create(:item, title: "chinese " + random_string(5) ) }
          page.execute_script("$('input#search_param').val('chinese')")
          page.execute_script("$('input#search_param').trigger('focus')")
          page.execute_script("$('input#search_param').trigger('keydown')")
        end
        specify { page.evaluate_script("$('input#search_param').val()").should == 'chinese' }
        specify { page.should have_css "#autocomplete-menu li", count: 5 }
      end 
```

感谢马克贝瑞的灵感。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-29T15:27:22.987

另一种选择是[capybara send_keys](http://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FNode%2FElement%3Asend_keys)方法：

`find('#my_object_id').send_keys 'bob'`

我更喜欢这个选项而不是注入 javascript 来触发 keydown/focus/mouseenter 事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-21T09:21:55.100

我没有使用 page.execute_script，而是在输入后用空白填充输入，以便触发事件。

```
fill_in("query", :with => "ma")
fill_in("query", :with => "")
# autocomplete suggestions will come up
all('.autocomplete div').first.should have_content("mango")
# other assertions 
```

# c# - 单引号后替换字符

> ID：13187755
> 
> 赞同：2
> 
> 时间：2012-11-02T00:53:49.047
> 
> 标签：c#, asp.net

我正在使用以下 C# 代码在单引号后将小写字母修改为大写：

```
public virtual string FirstName
{
    get { return _firstName; }
    set
    {
        if (value != null)
        {
            int pos = value.IndexOf("'", 0);
            int strlength = value.Length - 1;
            if (pos >= 0 && pos != strlength)
            {
                string temp = value[pos + 1].ToString();
                temp = temp.ToUpper();
                value = value.Remove(pos + 1, 1);
                value = value.Insert(pos + 1, temp);
            }
        }
    }
} 
```

对我来说，这看起来有点矫枉过正。有没有更简单的方法来达到预期的结果：

```
Value: Mc'donald
Expected: Mc'Donald 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:04:46.650

既然您对正则表达式持开放态度，那么这种超载会满足`Regex.Replace`您的需要吗？

[Regex.Replace 方法（字符串，MatchEvaluator）](http://msdn.microsoft.com/en-us/library/cft8645c.aspx)

这是上面链接中给出的示例的修改版本。我已将其更改为使用`'\w`模式并以大写形式返回匹配项。

```
using System;
using System.Text.RegularExpressions;

class RegExSample
{
static string CapText(Match m)
    {
        // Return the match in upper case
        return m.ToString().ToUpperInvariant();
    }

    static void Main()
    {
        string text = "Mc'donald";

        System.Console.WriteLine("text=[" + text + "]");

        Regex rx = new Regex(@"'\w");

        string result = rx.Replace(text, new MatchEvaluator(RegExSample.CapText));

        System.Console.WriteLine("result=[" + result + "]");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:11:11.177

这里没有正则表达式

```
 int pos = data.IndexOf("'");
  if (pos >= 0 && pos < data.Length - 1)
  {
    StringBuilder sbl = new StringBuilder(data);
    sbl[pos + 1] = char.ToUpper(sbl[pos + 1]);
    data = sbl.ToString();
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T01:02:53.390

也许是正则表达式？

```
string value = "Mc'donald";
string found = Regex.Match(value, "'[\\w]").Value;
string result = value.Replace(found, found.ToUpper());

Console.WriteLine(result); // Mc'Donald 
```

# python - Python 线程覆盖初始化

> ID：13187762
> 
> 赞同：4
> 
> 时间：2012-11-02T00:55:31.787
> 
> 标签：python, multithreading, class, inheritance, initialization

我正在使用 threading.py，我有以下代码：

```
import threading  
class MyClass(threading.Thread):  
    def __init__(self,par1,par2):
       threading.Thread.__init__(self)  
       self.var1 = par1  
       self.var2 = par2  
    def run(self):
       #do stuff with var1 and var2 while conditions are met
... 
... 
... 
myClassVar = MyClass("something",0.0) 
```

我收到以下错误：

```
18:48:08    57  S E myClassVar = MyClass("something",0.0)  
18:48:08    58  S E File "C:\Python24\Lib\threading.py", line 378, in `__init__`  
18:48:08    59  S E assert group is None, "group argument must be None for now"  
18:48:08    60  S E AssertionError: group argument must be None for now 
```

我是使用python的新手，这是我第一次使用线程......

这里的错误是什么？

谢谢，

乔纳森

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T00:58:28.413

您不必扩展`Thread`即可使用线程。我通常使用这种模式...

```
def worker(par1, par2):
    pass # do something

thread = threading.Thread(target=worker, args=("something", 0.0))
thread.start() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-10T16:56:12.330

您还可以像在示例中那样使用类并覆盖线程，您只需要将对 super 的调用更改为正确。例如：

```
import threading  
class MyClass(threading.Thread):  
    def __init__(self,par1,par2):
       super(MyClass, self).__init__()
       self.var1 = par1  
       self.var2 = par2  
    def run(self):
       #do stuff with var1 and var2 while conditions are met 
```

对 init 的调用已经被 self 发送给它，所以当你再次提供它时，它会在 Thread 类构造函数中设置另一个参数，事情就会变得混乱。

# php - 排序函数无法正确排序数组

> ID：13187768
> 
> 赞同：0
> 
> 时间：2012-11-02T00:56:08.417
> 
> 标签：php, sorting

我想对数组中的所有键进行排序。键值对是一个大数字和一个名称。它在小数字上对数组进行错误排序，当数字太大而无法存储为整数时，情况会变得更糟。如果整数太大，它们将作为字符串存储在数组中。而且这些字符串根本不会排序留在同一个地方。

我要做的就是将键值对从最大到最小进行排序。我不知道该怎么做，因为排序功能完全失败。
我会很感激我能得到的任何帮助。

这是我的代码：

```
<?php

$encodedNames = $_GET['names']; //names array from a html input encoded with  JSON.stringify(nameArray);

$names=json_decode($encodedNames); //decode the names

$namesLegacy = (array) NULL;  //array that will store key-value pairs (number=>name)

//for each name gets a large number and assigns it as a key
foreach($names as $name){
    $name = trim($name);
    array_push($namesLegacy, array(getFameNumber($name)=>$name)) ; 
}

echo var_dump($namesLegacy) . "<br />";//dumps the array before it is sorted
krsort($namesLegacy);
echo var_dump($namesLegacy) . "<br />";//dumps the array after its sorted

//simply prints each name in a list format
for ($i = 0; $i < sizeof($namesLegacy); $i++) {
   $keys =  array_values($namesLegacy[$i]);
    echo $i+1 .". ".$keys[0] . "<br/>" ;
}

//gets the large number that will become a key and returns it , as a string ? 
function getFameNumber($name)
{
    $resultTagId = "resultStats"; 
    $name = str_replace(" ", "+", trim($name));

    $url='url that will return the large number';
    /*can be tested with google url 
    $url='http://www.google.com/search?q='.$name.'&ie=utf-8&oe=utf-8&aq=t';*/   
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
    $data = curl_exec ($ch);
    curl_close ($ch);

    $dom = new DOMDocument();
    @$dom->loadHTML( $data );
    $resultsTag =  $dom->getElementById($resultTagId)->nodeValue;

    $results =  preg_replace("/[^0-9]/","",$resultsTag);
    return $results;
}
?> 
```

**更新：** 我已经运行了更多示例来测试它是否会对所有非字符串值进行正确排序，结果证明它没有。（以前它工作的地方现在失败了）我有一个数组

```
array(3) { [0]=> array(1) { [1800000000]=> string(6) "Robert" } [1]=> array(1) { [591000000]=> string(6) "albert" } [2]=> array(1) { [1100000000]=> string(4) "Anna" } } 
```

当我在它上面运行 krsort() 它返回

```
array(3) { [2]=> array(1) { [1100000000]=> string(4) "Anna" } [1]=> array(1) { [591000000]=> string(6) "albert" } [0]=> array(1) { [1800000000]=> string(6) "Robert" } } 
```

这不是正确的结果正确的结果是 1800000000, 1100000000, 591000000

我试图将这些字符串转换为浮点数，但它主要使它们以负数出现。所以我尝试以另一种方式将小整数转换为字符串，但奇怪的是它们已经是字符串。当我在数组中形成键值对时，它们似乎被转换为整数。

有人知道发生了什么吗？我是否错误地使用了 krsort 问题仍然是因为数字太大了吗？

我还将举例说明当我的数组中有一个非常大的数字时它的样子

```
array(1) { [0]=> array(1) { ["4430000000"]=> string(3) "son" } } 
```

注意前面数组中不存在的数字周围的“”标记

**更新2：**

好的，所以我知道这与整数的大小无关。我放置了这段代码来测试它，`$results = substr($results, 0, -3);` 但我仍然得到不正确的结果

```
array(3) { [2]=> array(1) { [1550]=> string(5) "Reeta" } [1]=> array(1) { [1800000]=> string(6) "Robert" } [0]=> array(1) { [1090000]=> string(4) "Anna" } } 
```

我还颠倒了键和值，并尝试`arsort()`使用相同的结果进行排序

如果有人能解释为什么字符串在被设置为数组中的键时会转换为整数，那也将不胜感激。

这是[krsort](http://php.net/manual/en/function.krsort.php)手册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:02:07.947

尝试

```
$key = getFameNumber($name);
array_push($namesLegacy, array("$key"=>$name)) ; 
```

# asp.net - 将 Asp.Net 转换为 MVC 并在 MVC 页面中重用 Asp.net 部分视图

> ID：13187772
> 
> 赞同：0
> 
> 时间：2012-11-02T00:57:01.497
> 
> 标签：asp.net, asp.net-mvc, razor

我正在尝试使用以ASP.Net 为基础编写的开放社区论坛（ *Yetanotherforum ）创建一个混合应用程序，并且我的所有扩展都将用 MVC 编写。*

我添加了所有引用并应用了调整`web.config`，`global.asax`现在我可以很好地运行 .aspx 和 mvc 页面。

但是，当我尝试使用以下代码行将 Asp.net 中定义的 UserControls 嵌入到 MVC 剃须刀页面中时：

```
@Html.Partial("~/pages/login.ascx") 
```

它抛出如下错误：

```
The view at '~/pages/login.ascx' must derive from ViewPage, ViewPage<TModel>, ViewUserControl, or ViewUserControl<TModel>. 
```

是否可以在 MVC 页面中呈现 .net Web 控件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:19:35.383

这里有一个带有演示代码的帖子[，](http://www.cnblogs.com/dudu/archive/2012/05/03/asp_net_mvc_ascx.html)但它是用中文写的。也许你可以通过谷歌翻译服务阅读。也可以在文末下载代码：

演示代码的链接是：[这里](http://files.cnblogs.com/dudu/CNBlogsDemoMvcAscx.rar)

# networking - 光子网络实例化错误（Unity3d）

> ID：13187775
> 
> 赞同：1
> 
> 时间：2012-11-02T00:57:17.590
> 
> 标签：networking, unity3d, instantiation, multiplayer, frame-rate

好的，所以我在 Unity 中制作了一个在线 FPS，我正在编写 Photon Networking 脚本来连接和生成播放器，但我不断收到以下两个错误：

```
Assets/Resources/GameManager.cs(64,23): error CS1502: The best overloaded method match for `PhotonNetwork.Instantiate(string, UnityEngine.Vector3, UnityEngine.Quaternion, int)' has some invalid arguments

Assets/Resources/GameManager.cs(64,23): error CS1503: Argument `#1' cannot convert `UnityEngine.Transform' expression to type `string' 
```

这是我的代码中的错误所在：

```
 // When Connected [Photon Callback]
void OnJoinedRoom()
{
    PhotonNetwork.Instantiate(playerPrefab, transform.position, Quaternion.identity, 0);
}

//In Game: Disconnect from room.
void InGameGUI()
{
    if (GUILayout.Button("Leave Game"))
        PhotonNetwork.LeaveRoom();
} 
```

}

我确实引用了顶部的变换：

```
public Transform playerPrefab; 
```

关于我做错了什么以及如何解决它的任何想法。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:42:36.293

`PhotonNetwork.Instantiate`需要 a `string`，而不是`Transform`对象作为它的第一个参数。（我相信这是`Transform`不久前从一个对象改变的）。只需命名您要实例化的预制件（必须在`Resources`文件夹中）。

# iphone - iPhone 定期获取位置

> ID：13187776
> 
> 赞同：0
> 
> 时间：2012-11-02T00:57:24.397
> 
> 标签：iphone, cllocation

> **可能重复：**
> [后台基于时间的 GPS 位置（iphone）](https://stackoverflow.com/questions/7560154/time-based-gps-location-in-background-iphone)

我正在尝试定期获取 iPhone 的位置。当应用程序进入后台时，会创建一个新线程并希望获取用户的位置，然后休眠 X 分钟。然后醒来，再次获取用户的位置并重新进入睡眠状态。

当线程唤醒时，我需要获取位置。我不能使用 CLLocationMangerDelegate，因为它会自行更新并在需要时调用委托方法。每当线程唤醒时，我都需要以某种方式获取用户的位置。

任何人都可以帮助我吗？我真的很感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:15:44.420

据我所知，不可能通过预定的方法调用来实现这一点（正如你所提到的）。我有类似的问题，我通过`CLLocationManager`在用户的位置更改大约 1 公里时触发来解决它。

这种实现的缺点是电池消耗。

# python - 将 pandas 数据框转换为 NumPy 数组

> ID：13187778
> 
> 赞同：629
> 
> 时间：2012-11-02T00:57:33.290
> 
> 标签：python, arrays, pandas, numpy, dataframe

我有兴趣了解如何将 pandas 数据帧转换为 NumPy 数组。

数据框：

```
import numpy as np
import pandas as pd

index = [1, 2, 3, 4, 5, 6, 7]
a = [np.nan, np.nan, np.nan, 0.1, 0.1, 0.1, 0.1]
b = [0.2, np.nan, 0.2, 0.2, 0.2, np.nan, np.nan]
c = [np.nan, 0.5, 0.5, np.nan, 0.5, 0.5, np.nan]
df = pd.DataFrame({'A': a, 'B': b, 'C': c}, index=index)
df = df.rename_axis('ID') 
```

给

```
label   A    B    C
ID                                 
1   NaN  0.2  NaN
2   NaN  NaN  0.5
3   NaN  0.2  0.5
4   0.1  0.2  NaN
5   0.1  0.2  0.5
6   0.1  NaN  0.5
7   0.1  NaN  NaN 
```

我想将其转换为 NumPy 数组，如下所示：

```
array([[ nan,  0.2,  nan],
       [ nan,  nan,  0.5],
       [ nan,  0.2,  0.5],
       [ 0.1,  0.2,  nan],
       [ 0.1,  0.2,  0.5],
       [ 0.1,  nan,  0.5],
       [ 0.1,  nan,  nan]]) 
```

我怎样才能做到这一点？

* * *

作为奖励，是否可以像这样保留 dtypes？

```
array([[ 1, nan,  0.2,  nan],
       [ 2, nan,  nan,  0.5],
       [ 3, nan,  0.2,  0.5],
       [ 4, 0.1,  0.2,  nan],
       [ 5, 0.1,  0.2,  0.5],
       [ 6, 0.1,  nan,  0.5],
       [ 7, 0.1,  nan,  nan]],
     dtype=[('ID', '<i4'), ('A', '<f8'), ('B', '<f8'), ('B', '<f8')]) 
```

或类似的？

* * *

## 回答 #1

> 赞同：514
> 
> 时间：2019-02-03T22:05:04.017

# `df.to_numpy()`比 好`df.values`，这就是为什么。^*

是时候弃用`values`and了`as_matrix()`。

pandas`v0.24.0`引入了两种从 pandas 对象获取 NumPy 数组的新方法：

1.  **`to_numpy()`**, 定义在`Index`, `Series`, 和`DataFrame`对象上, 和
2.  **`array`**`Index`, 仅在和`Series`对象上定义。

如果您访问 v0.24 文档[`.values`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.values.html#pandas.DataFrame.values)，您将看到一个大红色警告，上面写着：

> ### 警告：我们建议`DataFrame.to_numpy()`改用。

请参阅[v0.24.0 发行说明的这一部分](https://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.24.0.html#accessing-the-values-in-a-series-or-index)，以及[此答案](https://stackoverflow.com/a/54324513/4909087)以获取更多信息。

[* -`to_numpy()`对于需要在未来的多个版本中可靠运行的任何生产代码，我推荐的方法。但是，如果您只是在 jupyter 或终端中制作暂存器，那么使用`.values`来节省几毫秒的输入时间是一个允许的例外。您可以随时添加适合 n 完成以后。]

* * *

* * *

# **实现更好的一致性：[`to_numpy()`](http://pandas.pydata.org/pandas-docs/version/0.24.0rc1/api/generated/pandas.Series.to_numpy.html)**

本着在整个 API 中保持更好一致性的精神，`to_numpy`引入了一种新方法来从 DataFrames 中提取底层 NumPy 数组。

```
# Setup
df = pd.DataFrame(data={'A': [1, 2, 3], 'B': [4, 5, 6], 'C': [7, 8, 9]}, 
                  index=['a', 'b', 'c'])

# Convert the entire DataFrame
df.to_numpy()
# array([[1, 4, 7],
#        [2, 5, 8],
#        [3, 6, 9]])

# Convert specific columns
df[['A', 'C']].to_numpy()
# array([[1, 7],
#        [2, 8],
#        [3, 9]]) 
```

如上所述，此方法也定义在`Index`和`Series`对象上（参见[此处](https://stackoverflow.com/a/54324513/4909087)）。

```
df.index.to_numpy()
# array(['a', 'b', 'c'], dtype=object)

df['A'].to_numpy()
#  array([1, 2, 3]) 
```

默认情况下，会返回一个视图，因此所做的任何修改都会影响原始视图。

```
v = df.to_numpy()
v[0, 0] = -1

df
   A  B  C
a -1  4  7
b  2  5  8
c  3  6  9 
```

如果您需要副本，请使用`to_numpy(copy=True)`.

* * *

### 扩展类型的熊猫 >= 1.0 更新

如果您使用的是 pandas 1.x，那么您可能会更多地处理扩展类型。您必须更加小心这些扩展类型是否正确转换。

```
a = pd.array([1, 2, None], dtype="Int64")                                  
a                                                                          

<IntegerArray>
[1, 2, <NA>]
Length: 3, dtype: Int64 

# Wrong
a.to_numpy()                                                               
# array([1, 2, <NA>], dtype=object)  # yuck, objects

# Correct
a.to_numpy(dtype='float', na_value=np.nan)                                 
# array([ 1.,  2., nan])

# Also correct
a.to_numpy(dtype='int', na_value=-1)
# array([ 1,  2, -1]) 
```

这[在 docs 中被提及](https://pandas.pydata.org/pandas-docs/stable/whatsnew/v1.0.0.html#arrays-integerarray-now-uses-pandas-na)。

* * *

### 如果您需要`dtypes`结果中的...

如另一个答案所示，这[`DataFrame.to_records`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_records.html#pandas-dataframe-to-records)是一个很好的方法。

```
df.to_records()
# rec.array([('a', 1, 4, 7), ('b', 2, 5, 8), ('c', 3, 6, 9)],
#           dtype=[('index', 'O'), ('A', '<i8'), ('B', '<i8'), ('C', '<i8')]) 
```

`to_numpy`不幸的是，这不能用 来完成。但是，作为替代方案，您可以使用`np.rec.fromrecords`：

```
v = df.reset_index()
np.rec.fromrecords(v, names=v.columns.tolist())
# rec.array([('a', 1, 4, 7), ('b', 2, 5, 8), ('c', 3, 6, 9)],
#           dtype=[('index', '<U1'), ('A', '<i8'), ('B', '<i8'), ('C', '<i8')]) 
```

性能方面，它几乎相同（实际上，使用`rec.fromrecords`速度更快）。

```
df2 = pd.concat([df] * 10000)

%timeit df2.to_records()
%%timeit
v = df2.reset_index()
np.rec.fromrecords(v, names=v.columns.tolist())

12.9 ms ± 511 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
9.56 ms ± 291 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

* * *

* * *

# **添加新方法的理由**

`to_numpy()`（除了`array`）是在两个 GitHub 问题[GH19954](https://github.com/pandas-dev/pandas/issues/19954)和[GH23623](https://github.com/pandas-dev/pandas/issues/23623)下讨论的结果。

具体来说，文档提到了理由：

> [...]`.values`不清楚返回的值是实际数组、它的一些转换，还是 pandas 自定义数组之一（如`Categorical`）。例如，使用`PeriodIndex`,每次都会`.values` 生成一个新的 period 对象。`ndarray`[...]

`to_numpy`旨在提高 API 的一致性，这是朝着正确方向迈出的重要一步。`.values`在当前版本中不会被弃用，但我预计这可能会在未来的某个时候发生，所以我会敦促用户尽快迁移到更新的 API。

* * *

* * *

# **对其他解决方案的批评**

`DataFrame.values`如前所述，具有不一致的行为。

`DataFrame.get_values()`只是一个包装器`DataFrame.values`，所以上面所说的一切都适用。

`DataFrame.as_matrix()`现已弃用，**请勿**使用！

* * *

## 回答 #2

> 赞同：461
> 
> 时间：2016-05-05T05:29:51.800

要将 pandas 数据帧 (df) 转换为 numpy ndarray，请使用以下代码：

```
df.values

array([[nan, 0.2, nan],
       [nan, nan, 0.5],
       [nan, 0.2, 0.5],
       [0.1, 0.2, nan],
       [0.1, 0.2, 0.5],
       [0.1, nan, 0.5],
       [0.1, nan, nan]]) 
```

* * *

## 回答 #3

> 赞同：132
> 
> 时间：2014-07-17T01:13:50.003

***注意****：`.as_matrix()`此答案中使用的方法已弃用。熊猫 0.23.4 警告：*

> 方法`.as_matrix`将在未来的版本中删除。请改用 .values。

* * *

Pandas 内置了一些东西...

```
numpy_matrix = df.as_matrix() 
```

给

```
array([[nan, 0.2, nan],
       [nan, nan, 0.5],
       [nan, 0.2, 0.5],
       [0.1, 0.2, nan],
       [0.1, 0.2, 0.5],
       [0.1, nan, 0.5],
       [0.1, nan, nan]]) 
```

* * *

## 回答 #4

> 赞同：75
> 
> 时间：2014-03-26T06:23:21.847

我将链接[DataFrame.reset_index()](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reset_index.html)和[DataFrame.values](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.values.html)函数来获取数据帧的 Numpy 表示，包括索引：

```
In [8]: df
Out[8]: 
          A         B         C
0 -0.982726  0.150726  0.691625
1  0.617297 -0.471879  0.505547
2  0.417123 -1.356803 -1.013499
3 -0.166363 -0.957758  1.178659
4 -0.164103  0.074516 -0.674325
5 -0.340169 -0.293698  1.231791
6 -1.062825  0.556273  1.508058
7  0.959610  0.247539  0.091333

[8 rows x 3 columns]

In [9]: df.reset_index().values
Out[9]:
array([[ 0\.        , -0.98272574,  0.150726  ,  0.69162512],
       [ 1\.        ,  0.61729734, -0.47187926,  0.50554728],
       [ 2\.        ,  0.4171228 , -1.35680324, -1.01349922],
       [ 3\.        , -0.16636303, -0.95775849,  1.17865945],
       [ 4\.        , -0.16410334,  0.0745164 , -0.67432474],
       [ 5\.        , -0.34016865, -0.29369841,  1.23179064],
       [ 6\.        , -1.06282542,  0.55627285,  1.50805754],
       [ 7\.        ,  0.95961001,  0.24753911,  0.09133339]]) 
```

要获得 dtypes，我们需要使用[view](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.view.html)将此 ndarray 转换为结构化数组：

```
In [10]: df.reset_index().values.ravel().view(dtype=[('index', int), ('A', float), ('B', float), ('C', float)])
Out[10]:
array([( 0, -0.98272574,  0.150726  ,  0.69162512),
       ( 1,  0.61729734, -0.47187926,  0.50554728),
       ( 2,  0.4171228 , -1.35680324, -1.01349922),
       ( 3, -0.16636303, -0.95775849,  1.17865945),
       ( 4, -0.16410334,  0.0745164 , -0.67432474),
       ( 5, -0.34016865, -0.29369841,  1.23179064),
       ( 6, -1.06282542,  0.55627285,  1.50805754),
       ( 7,  0.95961001,  0.24753911,  0.09133339),
       dtype=[('index', '<i8'), ('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

* * *

## 回答 #5

> 赞同：38
> 
> 时间：2012-11-02T10:16:00.113

您可以使用该`to_records`方法，但如果它们不是您从一开始就想要的，则必须使用 dtypes。在我的例子中，从字符串中复制了你的 DF，索引类型是字符串（由`object`pandas 中的 dtype 表示）：

```
In [102]: df
Out[102]: 
label    A    B    C
ID                  
1      NaN  0.2  NaN
2      NaN  NaN  0.5
3      NaN  0.2  0.5
4      0.1  0.2  NaN
5      0.1  0.2  0.5
6      0.1  NaN  0.5
7      0.1  NaN  NaN

In [103]: df.index.dtype
Out[103]: dtype('object')
In [104]: df.to_records()
Out[104]: 
rec.array([(1, nan, 0.2, nan), (2, nan, nan, 0.5), (3, nan, 0.2, 0.5),
       (4, 0.1, 0.2, nan), (5, 0.1, 0.2, 0.5), (6, 0.1, nan, 0.5),
       (7, 0.1, nan, nan)], 
      dtype=[('index', '|O8'), ('A', '<f8'), ('B', '<f8'), ('C', '<f8')])
In [106]: df.to_records().dtype
Out[106]: dtype([('index', '|O8'), ('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

转换 recarray dtype 对我不起作用，但已经可以在 Pandas 中执行此操作：

```
In [109]: df.index = df.index.astype('i8')
In [111]: df.to_records().view([('ID', '<i8'), ('A', '<f8'), ('B', '<f8'), ('C', '<f8')])
Out[111]:
rec.array([(1, nan, 0.2, nan), (2, nan, nan, 0.5), (3, nan, 0.2, 0.5),
       (4, 0.1, 0.2, nan), (5, 0.1, 0.2, 0.5), (6, 0.1, nan, 0.5),
       (7, 0.1, nan, nan)], 
      dtype=[('ID', '<i8'), ('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

请注意，Pandas 没有`ID`在导出的记录数组中正确设置索引的名称（to ）（一个错误？），所以我们从类型转换中获益，也纠正了这一点。

目前，Pandas 只有 8 字节整数、`i8`和浮点数`f8`（请参阅[本期](https://github.com/pydata/pandas/issues/622)）。

* * *

## 回答 #6

> 赞同：30
> 
> 时间：2018-04-23T11:51:16.080

似乎`df.to_records()`对你有用。您正在寻找的确切功能[已被请求](https://github.com/pandas-dev/pandas/issues/16561)并`to_records`指出作为替代。

我使用您的示例在本地进行了尝试，该调用产生的结果与您正在寻找的输出非常相似：

```
rec.array([(1, nan, 0.2, nan), (2, nan, nan, 0.5), (3, nan, 0.2, 0.5),
       (4, 0.1, 0.2, nan), (5, 0.1, 0.2, 0.5), (6, 0.1, nan, 0.5),
       (7, 0.1, nan, nan)],
      dtype=[(u'ID', '<i8'), (u'A', '<f8'), (u'B', '<f8'), (u'C', '<f8')]) 
```

请注意，这是 a`recarray`而不是`array`. 您可以通过调用其构造函数将结果移动到常规 numpy 数组中`np.array(df.to_records())`。

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2019-05-28T15:46:22.087

尝试这个：

```
a = numpy.asarray(df) 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-06-11T05:38:53.180

这是我从 pandas DataFrame 制作结构数组的方法。

创建数据框

```
import pandas as pd
import numpy as np
import six

NaN = float('nan')
ID = [1, 2, 3, 4, 5, 6, 7]
A = [NaN, NaN, NaN, 0.1, 0.1, 0.1, 0.1]
B = [0.2, NaN, 0.2, 0.2, 0.2, NaN, NaN]
C = [NaN, 0.5, 0.5, NaN, 0.5, 0.5, NaN]
columns = {'A':A, 'B':B, 'C':C}
df = pd.DataFrame(columns, index=ID)
df.index.name = 'ID'
print(df)

      A    B    C
ID               
1   NaN  0.2  NaN
2   NaN  NaN  0.5
3   NaN  0.2  0.5
4   0.1  0.2  NaN
5   0.1  0.2  0.5
6   0.1  NaN  0.5
7   0.1  NaN  NaN 
```

定义函数以从 pandas DataFrame 创建一个 numpy 结构数组（不是记录数组）。

```
def df_to_sarray(df):
    """
    Convert a pandas DataFrame object to a numpy structured array.
    This is functionally equivalent to but more efficient than
    np.array(df.to_array())

    :param df: the data frame to convert
    :return: a numpy structured array representation of df
    """

    v = df.values
    cols = df.columns

    if six.PY2:  # python 2 needs .encode() but 3 does not
        types = [(cols[i].encode(), df[k].dtype.type) for (i, k) in enumerate(cols)]
    else:
        types = [(cols[i], df[k].dtype.type) for (i, k) in enumerate(cols)]
    dtype = np.dtype(types)
    z = np.zeros(v.shape[0], dtype)
    for (i, k) in enumerate(z.dtype.names):
        z[k] = v[:, i]
    return z 
```

用于`reset_index`创建包含索引作为其数据一部分的新数据框。将该数据框转换为结构体数组。

```
sa = df_to_sarray(df.reset_index())
sa

array([(1L, nan, 0.2, nan), (2L, nan, nan, 0.5), (3L, nan, 0.2, 0.5),
       (4L, 0.1, 0.2, nan), (5L, 0.1, 0.2, 0.5), (6L, 0.1, nan, 0.5),
       (7L, 0.1, nan, nan)], 
      dtype=[('ID', '<i8'), ('A', '<f8'), ('B', '<f8'), ('C', '<f8')]) 
```

编辑：更新 df_to_sarray 以避免使用 python 3 调用 .encode() 时出错。感谢[Joseph Garvin](https://stackoverflow.com/users/50385/joseph-garvin)和[halcyon](https://stackoverflow.com/users/8035165/halcyon) 的评论和解决方案。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2018-07-13T16:21:15.083

示例 DataFrame 的更简单方法：

```
df

         gbm       nnet        reg
0  12.097439  12.047437  12.100953
1  12.109811  12.070209  12.095288
2  11.720734  11.622139  11.740523
3  11.824557  11.926414  11.926527
4  11.800868  11.727730  11.729737
5  12.490984  12.502440  12.530894 
```

利用：

```
np.array(df.to_records().view(type=np.matrix)) 
```

得到：

```
array([[(0, 12.097439  , 12.047437, 12.10095324),
        (1, 12.10981081, 12.070209, 12.09528824),
        (2, 11.72073428, 11.622139, 11.74052253),
        (3, 11.82455653, 11.926414, 11.92652727),
        (4, 11.80086775, 11.72773 , 11.72973699),
        (5, 12.49098389, 12.50244 , 12.53089367)]],
dtype=(numpy.record, [('index', '<i8'), ('gbm', '<f8'), ('nnet', '<f4'),
       ('reg', '<f8')])) 
```

* * *

## 回答 #10

> 赞同：7
> 
> 时间：2019-05-30T04:05:44.960

我浏览了上面的答案。“ **as_matrix()** ” 方法有效，但现在已过时。对我来说，有效的是“ **.to_numpy()** ”。

这将返回一个多维数组。如果您从 excel 表中读取数据并且需要从任何索引访问数据，我会更喜欢使用此方法。希望这可以帮助 ：）

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2017-12-29T10:02:05.043

将数据帧转换为其 Numpy 数组表示的两种方法。

*   `mah_np_array = df.as_matrix(columns=None)`

*   `mah_np_array = df.values`

文档：[https ://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.as_matrix.html](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.as_matrix.html)

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2017-11-10T14:41:55.233

从数据框导出到 arcgis 表时遇到了类似的问题，偶然发现了 usgs 的解决方案（[https://my.usgs.gov/confluence/display/cdi/pandas.DataFrame+to+ArcGIS+Table](https://my.usgs.gov/confluence/display/cdi/pandas.DataFrame+to+ArcGIS+Table)）。简而言之，您的问题有类似的解决方案：

```
df

      A    B    C
ID               
1   NaN  0.2  NaN
2   NaN  NaN  0.5
3   NaN  0.2  0.5
4   0.1  0.2  NaN
5   0.1  0.2  0.5
6   0.1  NaN  0.5
7   0.1  NaN  NaN

np_data = np.array(np.rec.fromrecords(df.values))
np_names = df.dtypes.index.tolist()
np_data.dtype.names = tuple([name.encode('UTF8') for name in np_names])

np_data

array([( nan,  0.2,  nan), ( nan,  nan,  0.5), ( nan,  0.2,  0.5),
       ( 0.1,  0.2,  nan), ( 0.1,  0.2,  0.5), ( 0.1,  nan,  0.5),
       ( 0.1,  nan,  nan)], 
      dtype=(numpy.record, [('A', '<f8'), ('B', '<f8'), ('C', '<f8')])) 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-11-21T05:13:25.377

将数据帧转换为 numpy 数组的简单方法：

```
import pandas as pd
df = pd.DataFrame({"A": [1, 2], "B": [3, 4]})
df_to_array = df.to_numpy()
array([[1, 3],
   [2, 4]]) 
```

鼓励使用 to_numpy 以保持一致性。

参考： [https ://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_numpy.html](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_numpy.html)

* * *

## 回答 #14

> 赞同：5
> 
> 时间：2019-12-30T19:46:00.807

尝试这个：

```
np.array(df) 

array([['ID', nan, nan, nan],
   ['1', nan, 0.2, nan],
   ['2', nan, nan, 0.5],
   ['3', nan, 0.2, 0.5],
   ['4', 0.1, 0.2, nan],
   ['5', 0.1, 0.2, 0.5],
   ['6', 0.1, nan, 0.5],
   ['7', 0.1, nan, nan]], dtype=object) 
```

更多信息位于：[ [https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html]](https://docs.scipy.org/doc/numpy/reference/generated/numpy.array.html]) 适用于 numpy 1.16.5 和 pandas 0.25.2。

* * *

## 回答 #15

> 赞同：4
> 
> 时间：2016-03-13T15:16:01.110

除了流星的回答，我找到了代码

```
df.index = df.index.astype('i8') 
```

对我不起作用。所以我把我的代码放在这里是为了方便其他人遇到这个问题。

```
city_cluster_df = pd.read_csv(text_filepath, encoding='utf-8')
# the field 'city_en' is a string, when converted to Numpy array, it will be an object
city_cluster_arr = city_cluster_df[['city_en','lat','lon','cluster','cluster_filtered']].to_records()
descr=city_cluster_arr.dtype.descr
# change the field 'city_en' to string type (the index for 'city_en' here is 1 because before the field is the row index of dataframe)
descr[1]=(descr[1][0], "S20")
newArr=city_cluster_arr.astype(np.dtype(descr)) 
```

# linux-kernel - 用户空间 mmap 和驱动程序空间 mmap 指向不同的地址..？

> ID：13187781
> 
> 赞同：1
> 
> 时间：2012-11-02T00:57:44.047
> 
> 标签：linux-kernel, linux-device-driver, mmap

【我是设备驱动程序编程的新手，所以请大家耐心等待】

我正在编写一个字符设备驱动程序，并且我正在尝试将驱动程序中分配的内存的某些部分映射到用户空间。

在 init_module() 函数中，我像这样分配一些缓冲区空间 -

buf = (char*)vmalloc_user(SIZE_OF_BUFFER);

buf 现在指向某个地址。

现在，在驱动程序的 mmap 函数中，我设置了 VM_RESERVED 标志，然后调用

remap_vmalloc_range(vma, (void*)buf, 0);

然后我在 /dev 中使用正确的主设备号创建一个字符设备文件。

现在我在用户空间创建一个简单的程序来打开字符设备文件，然后调用 mmap() 并从这个 mmap 的内存中读取数据。

在用户空间中对 mmap() 的调用中，我知道有一个选项可以传递该区域的起始地址。但是有没有办法让用户空间 mmap 指向与驱动程序空间中的 buf 相同的地址？

我认为由于驱动程序空间中 buf 的地址与用户空间中 mmap() 返回的地址不同，我的用户空间程序最终会读取垃圾值。除了在用户空间的mmap()中实际输入地址之外，还有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:05:47.147

您几乎必须设计您的驱动程序接口，以便用户空间映射地址无关紧要。这意味着，例如，不在单个用户空间进程之外访问的 mmap 区域中存储指针。

通常，您将存储来自基映射地址的偏移量，而不是完整的指针。内核驱动程序和用户空间代码都可以将这些偏移量添加到它们的基指针中，并获得适合它们各自上下文的虚拟地址。

# android - 从 webview 打开应用程序菜单项

> ID：13187783
> 
> 赞同：0
> 
> 时间：2012-11-02T00:57:48.657
> 
> 标签：android, android-intent, webview, zxing, launch

我正在尝试启动从 web 视图中的链接打开 zxing 条形码扫描仪的意图。

我创建了一个菜单项，当有人点击手机上的菜单按钮时，它会从菜单中启动 zxing 扫描仪。但是有些平板电脑没有那个菜单按钮，所以我需要从 webview 添加对扫描仪的访问。

我不知道从哪里开始。我想有一种方法可以将 javascript 代码添加到 webview，当有人点击链接时，它会调用 android:id="@+id/scanNow" 或类似的东西。

或者有没有办法让我启动：

```
case R.id.scanNow:      
    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
    intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
    startActivityForResult(intent, 0);
    return true; 
```

从html网页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:23:35.067

你可能想要的是在你的 webview 中有一些 javascript 并将其链接到你的 Android 应用程序。为此，您将需要使用[addJavascriptInterface](http://developer.android.com/reference/android/webkit/WebView.html#addJavascriptInterface%28java.lang.Object,%20java.lang.String%29)。

查看[此链接](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)和[此链接](http://blog.objectgraph.com/index.php/2012/03/16/android-development-javascript-bridge-example-fully-explained/)以获取更多说明。

# vb.net - 从 Visual Studio 2008 到 Visual Studio 2012 express 的 Visual Basic PowerPacks。创建组件失败

> ID：13187785
> 
> 赞同：1
> 
> 时间：2012-11-02T00:58:03.217
> 
> 标签：vb.net, visual-studio-2010, visual-studio-2008

我在 Visual Studio 2008 (Visual Basic) 中有一个应用程序并安装了 Visual Studio Express 2012，当我尝试将 DataRepeater 添加到现有项目中的新表单时，它说已经存在，当我尝试添加 PrintForm 时也是如此。我不能以任何新的或预先存在的形式添加新的对象。

这是我收到的邮件内容：

```
---------------------------
Microsoft Visual Studio Express 2012 for Windows Desktop
---------------------------
Failed to create component 'DataRepeater'.  The error message follows:

 'System.Runtime.InteropServices.COMException (0x8004D745): A reference to the component 'Microsoft.VisualBasic.PowerPacks.Vs' already exists in the project.

   at VSLangProj.References.Add(String bstrPath)

   at Microsoft.VisualStudio.Design.VSTypeResolutionService.PerformReferenceUpdate(List`1 newReferences)

   at Microsoft.VisualStudio.Design.VSTypeResolutionService.System.ComponentModel.Design.ITypeResolutionService.ReferenceAssembly(AssemblyName name)

   at Microsoft.VisualStudio.Design.Serialization.CodeDom.AggregateTypeResolutionService.ReferenceAssembly(AssemblyName name)

   at System.Drawing.Design.ToolboxItem.GetType(IDesignerHost host, AssemblyName assemblyName, String typeName, Boolean reference)

   at System.Drawing.Design.ToolboxItem.CreateComponentsCore(IDesignerHost host)

   at System.Drawing.Design.ToolboxItem.CreateComponentsCore(IDesignerHost host, IDictionary defaultValues)

   at System.Drawing.Design.ToolboxItem.CreateComponents(IDesignerHost host, IDictionary defaultValues)

   ...'
---------------------------
OK   
--------------------------- 
```

它说了一些关于参考更新的内容，我不是 vb.net 的经验丰富的开发人员，所以不知道我应该去哪里修复它以及如何修复它。

# java - 以整数为键的 HashMap 的问题

> ID：13187788
> 
> 赞同：-4
> 
> 时间：2012-11-02T00:58:25.180
> 
> 标签：java, hashmap

嗨，我`HashMap`对`Integer`as 键有疑问。

当我 `Integer`用作地图的键时，我得到的结果不一致。

我读了几篇文章，这些帖子表明，如果我使用`Integer`as key in `Hashmap`，我需要确保覆盖和类的`hashcode`方法`Integer`都被覆盖。在 Integer 类中，方法`equals()`已被覆盖。现在我如何覆盖该`equals()`方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T02:25:37.980

使用整数作为 HashMap 的键原则上没有问题。

然而，一个微妙的问题是，就对 equals() 的调用而言，**包含相同数值的不同类的数字包装器不匹配。**

例如，如果我这样做：

```
map.put(3, "Test") 
```

然后尝试像这样检索值：

```
long x = 1;
map.get(x + 2) 
```

将找不到原始值。如果你依赖自动装箱而不考虑事情，你偶尔会遇到这个问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T01:01:38.883

`java.lang.Integer`已经覆盖了[`equals`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java#Integer.equals%28java.lang.Object%29)and [`hashCode`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java#Integer.hashCode%28%29)，就像内置库中提供的任何值类型一样。你不需要做任何事情。

# .net - 提取/获取windows用户名

> ID：13187791
> 
> 赞同：1
> 
> 时间：2012-11-02T00:58:39.157
> 
> 标签：.net, vb.net, winforms

如何从 Windows 中提取/获取当前用户名？

这是我尝试过的：

```
Dim username As String = Application.ExecutablePath.ToString.Split("\")(0)
If username <> "" then
MsgBox(username)
End if 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:04:57.607

您可以通过此方法获取用户名：

声明函数：

```
Declare Function GetUserName Lib "advapi32.dll" Alias _
"GetUserNameA" (ByVal lpBuffer As String, _
ByRef nSize As Integer) As Integer 
```

方法：
功能：

```
Public Function GetUserName() As String
Dim iReturn As Integer
Dim userName As String
userName = New String(CChar(" "), 50)
iReturn = GetUserName(userName, 50)
GetUserName = userName.Substring(0, userName.IndexOf(Chr(0)))
End Function 
```

利用：

```
Dim xstr As String = Space(255)
Dim max As Integer = 255
Dim rc As Integer
rc = GetUserName(xstr, max)
MessageBox.Show(Mid(xstr, 1, max)) 
```

GetUserName 函数检索与当前线程关联的用户的名称。

以及替代方法：
首先：

```
Dim username As String = Environment.UserName 
```

第二：

```
Dim username2 As String = SystemInformation.UserName 
```

不可取的方法：

```
MessageBox.Show(Application.ExecutablePath.ToString.Split("\")(2)) 
```

（你非常接近！，干得好。）
不要使用 msgbox()。
msgbox 适用于 Visual Basic 6。
MessageBox.Show 适用于 vb.net

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T01:15:29.150

如果您已`System.Windows.Forms`导入，这也有效：

```
 Dim username As String = SystemInformation.UserName 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:15:28.393

您也可以使用它来获取用户名：

```
 Dim username As String =
 Environment.GetEnvironmentVariables(EnvironmentVariableTarget.Process)("USERNAME") 
```

# .net - 使用 async await 来监听消息

> ID：13187792
> 
> 赞同：0
> 
> 时间：2012-11-02T00:58:44.857
> 
> 标签：.net, silverlight-5.0, async-await

我想使用异步等待来实现 Silverlight 的本地消息传递。

假设我创建了一个方法，`ListenTask()`它使用 LocalMessageReceiver 的`Listen`方法和 Message Received 事件返回包装在任务中的消息。我如何使用异步等待并在收到消息时对其进行处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:22:21.303

由于您期待许多消息，而不仅仅是一个，这可能更适合反应式扩展 - Observable.FromEvent 然后订阅。Task 非常适合单个未来值，IObservable 非常适合未来值的“流”。

在 Rx 2.0 中，如果您愿意，可以将 await 与 observables 一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T14:19:27.657

詹姆斯曼宁的回答很好；但是，如果您确实想使用 async/await，您当然可以使用[Dataflow 库](http://msdn.microsoft.com/en-us/library/hh228603.aspx)来非常稳健地完成“流式”异步消息传递。

# java - 在文件 IO 中保留换行符和间距

> ID：13187794
> 
> 赞同：0
> 
> 时间：2012-11-02T00:58:59.063
> 
> 标签：java, io, tokenize, substring

我正在处理一个非常巧妙的问题挑战，其中涉及从 .txt 文件中读取单词。该程序必须允许读取任何 .txt 文件，因此程序无法预测它将处理哪些单词。

然后，它把这些词变成他们的“Pig Latin”对应词，并将它们写入一个新文件。这个问题还有很多要求，但我只想说，我已经解决了每个部分，保存一个......当打印到新文件时，我无法保持行距。也就是说，如果第 1 行有 5 个单词，然后有一个 break，第 2 行有 3 个单词和一个 break……对于新文件也必须如此。就目前而言，一切正常，但所有转换后的单词都一个接一个地列出。

我有兴趣学习这个，所以如果你们都想在你的答案中表现得害羞，我可以。虽然我已经在这工作了 9 个小时，所以“半腼腆”也会受到重视 :) 请密切注意代码中的“while”语句，这是文件 IO 操作发生的地方。我想知道是否需要使用扫描仪中的 nextLine() 命令，然后从中创建一个字符串……然后从 nextLine() 字符串中创建子字符串，以一次一个地转换单词。子字符串可能是拆分或标记，或其他东西 - 我不清楚这部分和标记尝试给我编译器错误异常“java.util.NoSuchElementException” - 我似乎不理解拆分命令的正确调用。我尝试了类似 String a = scan.nextLine() 的东西，其中“scan”是我的扫描仪变量。然后尝试了 String b = a.split() 不行。无论如何，这是我的代码，看看你是否能弄清楚我错过了什么。

这是代码，非常感谢您提前Java神......

```
import java.util.*;
import javax.swing.*;
import java.io.*;
import java.text.*;

public class PigLatinTranslator
{
    static final String ay = "ay"; // "ay" is added to the end of every word in pig latin

    public static void main(String [] args) throws IOException
    {
        File nonPiggedFile = new File(...);
        String nonPiggedFileName = nonPiggedFile.getName();
        Scanner scan = new Scanner(nonPiggedFile);  

        nonPiggedFileName = ...;

        File pigLatinFile = new File(nonPiggedFileName + "-pigLatin.txt"); //references a file that may or may not exist yet

        pigLatinFile.createNewFile();
        FileWriter newPigLatinFile = new FileWriter(nonPiggedFileName + "-pigLatin.txt", true);
        PrintWriter PrintToPLF = new PrintWriter(newPigLatinFile);

        while (scan.hasNext()) 
        {
            boolean next;
            while (next = scan.hasNext()) 
            {
                 String nonPig = scan.next();
                 nonPig = nonPig.toLowerCase();
                 StringBuilder PigLatWord = new StringBuilder(nonPig);
                 PigLatWord.insert(nonPig.length(), nonPig.charAt(0) );
                 PigLatWord.insert(nonPig.length() + 1, ay);
                 PigLatWord.deleteCharAt(0);
                 String plw = PigLatWord.toString();

                 if (plw.contains("!") )
                 {
                     plw = plw.replace("!", "") + "!";
                 }

                 if (plw.contains(".") )
                 {
                     plw = plw.replace(".", "") + ".";
                 }

                 if (plw.contains("?") )
                 { 
                     plw = plw.replace("?", "") + "?"; 
                 }

                 PrintToPLF.print(plw + " ");
            }

            PrintToPLF.close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:27:44.020

使用`BufferedReader`，不使用`Scanner`。[http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html](http://docs.oracle.com/javase/6/docs/api/java/io/BufferedReader.html)

我把这部分作为原始海报的练习，一旦你知道使用正确的类就很容易了！（希望你能学到一些东西，而不是复制粘贴我的代码）。

然后将整行传递给这样的函数：（请注意，这不能正确处理引号，因为它将所有非撇号标点符号放在单词的末尾）。它还假设标点符号应该放在单词的末尾。

```
private static final String vowels = "AEIOUaeiou";
private static final String punct = ".,!?";

public static String pigifyLine(String oneLine) {
   StringBuilder pigified = new StringBuilder();
   boolean first = true;
   for (String word : oneLine.split(" ")) {
       if (!first) pigified.append(" ");
       pigified.append(pigify(word));
       first = false;
   }
   return pigified.toString();
}

public static String pigify(String oneWord) {
    char[] chars = oneWord.toCharArray();
    StringBuilder consonants = new StringBuilder();
    StringBuilder newWord = new StringBuilder();
    StringBuilder punctuation = new StringBuilder();
    boolean consDone = false; // set to true when the first consonant group is done

    for (int i = 0; i < chars.length; i++) {
        // consonant
        if (vowels.indexOf(chars[i]) == -1) {
            // punctuation
            if (punct.indexOf(chars[i]) > -1) {
                punctuation.append(chars[i]);
                consDone = true;
            } else {
                if (!consDone) { // we haven't found the consonants
                    consonants.append(chars[i]);
                } else {
                    newWord.append(chars[i]);
                }
            }
        } else {
            consDone = true;
            // vowel
            newWord.append(chars[i]);
        }
    }

    if (consonants.length() == 0) {
        // vowel words are "about" -> "aboutway"
        consonants.append("w");
    } 
    consonants.append("ay");

    return newWord.append(consonants).append(punctuation).toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:04:26.260

您可以尝试将每行的字数存储在单独的数据结构中，并在编写文件时将其用作何时移至下一行的指南。

我故意为你做了这个半模糊的，但可以根据要求详细说明。

# playframework - 如何在分布式 playframework 应用程序中更改配置

> ID：13187796
> 
> 赞同：5
> 
> 时间：2012-11-02T00:59:07.307
> 
> 标签：playframework, playframework-2.0

目前使用playframework 2.0.2，在我的application.conf中我设置了数据库连接信息

```
db.default.url="jdbc:mysql://localhost:3306/test"
db.default.driver=com.mysql.jdbc.Driver
db.default.user=test
db.default.pass=test 
```

但是我想知道的是，当我使用“play clean update dist”将我的应用程序投入生产然后在现场安装它时，没有application.conf。这意味着我必须在分发代码之前更改数据库连接？分发后有没有办法在配置文件中更改数据库连接？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T02:46:05.510

当您使用`play dist`配置文件时，会打包到 zip 中的 jar 文件中。您可以创建一个`conf/prod.conf`包含以下内容的文件：

```
include "application.conf"

db.default.url="jdbc:mysql://foo.com:3306/mydb"
db.default.driver=com.mysql.jdbc.Driver
db.default.user=foo
db.default.pass=bar 
```

然后，当您启动 Play 应用程序时，告诉它`prod.conf`通过运行以下命令使用该文件：

```
start -Dconfig.resource=prod.conf 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T02:27:15.630

为了完全避免打包配置文件，我建议您在生产服务器上创建一个 prod.conf 并将其存储在您将分发的文件解压缩到的文件夹之外的文件夹中。然后创建一个如下所示的启动脚本（或更复杂的启动脚本，将您的应用程序作为服务启动）。通过将配置文件与 dist 包分开，您可以避免在推出新更改时意外覆盖它的风险。

```
#!/bin/bash
sh start -Dconfig.file=/path/to/prod.conf & 
```

# c# - 从文件中设置 Web 服务 url

> ID：13187797
> 
> 赞同：0
> 
> 时间：2012-11-02T00:59:14.570
> 
> 标签：c#, web-services, windows-ce

我有一个 Web 服务并从 Windows CE 应用程序中使用。目前，我通过将 URL 添加为 Web 参考来对 URL 进行硬编码。有什么方法可以单独提供 URL，以便在更改 URL 时不必重新编译解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:37:56.770

您可以做的是：
1\. 在项目中创建您的 Web 服务引用
2\. 将设置更改为“动态 url”
3\. 将您的 url 存储在文件中。
4\. 更改 reference.cs 文件以使用您的 url。
完毕。
有关分步说明，您可以按照[此代码项目文章](http://www.codeproject.com/Articles/12317/How-to-make-your-Web-Reference-proxy-URL-dynamic)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-26T17:41:18.327

感谢 RAS 的回答，如果您在位于 Debug 文件夹中的 yourprojectname.exe.config 中设置所需的 URL，您可以在任何地方使用该服务，而无需重新编译。所以我完成了亲爱的 RAS 的回答：

1.  在您的项目中使用特殊 URL 创建您的 Web 服务引用（假设您的项目名称是 XYZ）
2.  将 webServive 的设置更改为“动态 url”
3.  编译你的项目。
4.  随时随地用旧的特殊 URL 替换 XYZ.exe.config 中所需的 URL。

# visual-studio - 如何在 Visual Studio 中更改连线背景颜色？

> ID：13187801
> 
> 赞同：2
> 
> 时间：2012-11-02T00:59:44.110
> 
> 标签：visual-studio, visual-studio-2012

我发现黑暗主题更容易集中注意力，但我想我前一段时间搞砸了一些东西，它把黑暗主题文本编辑器变成了一个怪物：

![在此处输入图像描述](../Images/ee6e2cd5677bea0db7d4b67917f7b82f.png)

我尝试在此菜单中单击重置为默认值：

![在此处输入图像描述](../Images/6c1f2bf273cf62675d1155f521c4ef5f.png)

但似乎该菜单无法控制此特定部分，因为它没有将其改回（或者上帝禁止它应该看起来像这样）

有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:55:01.457

看起来您安装了一个提供该颜色的扩展程序。转到 Tools->Extensions and Updates 并检查是否有任何关于交替线条颜色的内容（可能是[这个 extension](http://visualstudiogallery.msdn.microsoft.com/5e0c81c8-4e71-450f-82aa-c9e8731b80f0)），然后禁用或卸载它。

# javascript - 选择选项 - 无法选择选项

> ID：13187802
> 
> 赞同：1
> 
> 时间：2012-11-02T01:00:09.980
> 
> 标签：javascript, html, qunit, selectedindex

我认为我的 Select/Options 标签有问题...我无法访问所选选项。

这是 HTML 部分：

```
<select id="filter">
    <option value="value1" selected="selected" data-path="property1">option1</option>
    <option value="value2" data-path="property2">option2</option>
</select> 
```

我试过这样：

```
var property_filter = document.getElementById('filter'); 
```

在调试时，在控制台上，这是我尝试的：

```
input:  property_filter.options
output:  [<option value=​"value1" selected=​"selected" data-path=​"property1">​option1</option>​,<option value=​"value2" data-path=​"property2">​option2​&lt;/option>​] 
```

所以它抓住了正确的选择标签......但还是有问题：

```
input:  property_filter.selectedIndex
output:  -1 
```

同样，当我使用 JQuery 选择器找到它时，我没有得到我想要的。

```
input:  $('#filter').find('option')
output:  [<option value=​"value1" selected=​"selected" data-path=​"property1">​option1​&lt;/option>​, <option value=​"value2" data-path=​"property2">​option2​&lt;/option>​]

input:  $('#filter').find('option:selected')
output:  [] 
```

我一定是做错了什么……这也是一个如此简单的任务。我也尝试使用'selected'，而不是'selected="selected"'，但我得到了相同的结果。

顺便说一句，我在 OS 10.6.8 上使用 Chrome，并且在 Backbone View & QUnit 测试的上下文中（但这应该没关系，对吧？）。此外，此代码在 QUnit 之外工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:01:34.530

啊……对不起。我发现了为什么事情不起作用。正如彼得威尔金森所说，这是我引入的一个错误。

在尝试获取索引之前，我将索引设置为 2，（菜鸟错误！！）将索引设置为超出范围的索引。这就是为什么我一直将 -1 作为索引。

JQuery 或 selectedIndex 或我尝试过的任何方法都没有问题+我应该进一步调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:51:37.243

尝试

```
console.log($(this).find('#filter option:selected')); 
```

# php - 以“每行一行”的方式从文本文件中获取数据 - 并使用 PHP 将这些数据发送到 mysql

> ID：13187804
> 
> 赞同：0
> 
> 时间：2012-11-02T01:00:38.093
> 
> 标签：php, mysql

好的，我有一个类似这样的数据，写在一个文本文件中..

盒子,12

可以，99

.... 等等。

现在我想使用explode（）将它们执行到mysql表中，这不会有问题。

**但无论如何，任何想法如何将文本文件中的每行（每行）抓取到 PHP 中？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:12:37.997

你可以这样做：

```
// Trying to open TXT file
if( $file = fopen('file.txt', 'r') )
{
    // Loop until the End Of File
    while( ! feof($file) )
    {
        // Get current line
        $line = fgets($file);

        echo $line . '<br />';
    }

    // Closing TXT file
    fclose($file);
}
else
    echo 'fopen() fail'; 
```

有关功能的更多详细信息：

[fopen()](http://br2.php.net/manual/en/function.fopen.php)
[feof()](http://br2.php.net/manual/en/function.feof.php)
[fgets()](http://br2.php.net/manual/en/function.fgets.php)
[fclose()](http://br2.php.net/manual/en/function.fclose.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:15:48.193

像这样阅读它：

```
$lines = file('my/file/text.txt');

foreach ($lines as $line_num => $line) {
    echo "Line #<b>{$line_num}</b> : " . $line . "<br>\n";
} 
```

# c++ - 使用脚本扩展 C++

> ID：13187806
> 
> 赞同：0
> 
> 时间：2012-11-02T01:00:47.097
> 
> 标签：c++, swig

我正在考虑扩展调用脚本语言的 C++ 程序的可能性。我一直在搜索和阅读 SWIG 文档，但所有示例都只涉及从脚本语言调用 C++ 库，而不是以其他方式。SWIG 可以从 C++ 程序调用 PHP 或 Java 吗？如果不可能，还有什么比 boost.python 或 LUA 更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:07:31.423

它不是 C++，但它应该可以工作

```
char *argsa[] = {"/bin/bash","-c","script",(char *) 0 };
int execReturn = execv("/bin/bash",argsa); 
```

# xml - Text.XML.Cursor - 迷失在类型中

> ID：13187807
> 
> 赞同：3
> 
> 时间：2012-11-02T01:00:58.807
> 
> 标签：xml, haskell

对于这个问题，我将从我正在使用的 xml 文件中粘贴一个示例节，然后讨论我想用它做什么。

我有一个带有如下节的 xml 文件：

```
<mb model="460" rev="dba">
        <dmiblock block="Base Board Information">
                <dmiattr name="Manufacturer" value="MSI"/>
                <dmiattr name="Product Name" value="H61M-P25 (MS-7680)"/>
        </dmiblock>
        <dmiblock block="Memory Device">
                <dmiattr name="Bank Locator" value="A1_BANK0"/>
                <dmiattr name="Size" value="4096 MB"/>
        </dmiblock>
        <dmiblock block="Memory Device">
                <dmiattr name="Bank Locator" value="A1_BANK1"/>
                <dmiattr name="Size" value="No Module Installed"/>
        </dmiblock>
        <dmiblock block="Memory Device">
                <dmiattr name="Bank Locator" value="A1_BANK2"/>
                <dmiattr name="Size" value="No Module Installed"/>
        </dmiblock>
        <dmiblock block="Memory Device">
                <dmiattr name="Bank Locator" value="A1_BANK3"/>
                <dmiattr name="Size" value="No Module Installed"/>
        </dmiblock>

        <cpublock number="0">
                <cpuattr name="model name" value="Intel(R) Pentium(R) CPU G850 @ 2.90GHz"/>
        </cpublock>
        <cpublock number="1">
                <cpuattr name="model name" value="Intel(R) Pentium(R) CPU G850 @ 2.90GHz"/>
        </cpublock>
        <pciblock block="NIC">
                <pciattr string="Intel Corporation 82574L Gigabit Network Connection" number="2" />
        </pciblock>
        <blockblock block="model">
                <blockattr value="8GB SATA SSD T 3" number="1" />
                <blockattr value="WDC WD5003ABYX-0" number="1" />
        </blockblock>
</mb> 
```

我正在尝试`model`根据. 因此，在上面的节中，我将尝试匹配and 。与之匹配后，我想放入一个列表并继续在 other 中搜索具有相同属性的其他节。`mb` `node``value``mb` `node``model="460"``value="H61M-P25 (MS-7680)"``rev="dba"``mb` `nodes`

我根本没有走多远，我一直被这些类型绊倒。我正在使用[它](http://www.yesodweb.com/book/xml)来工作。

```
import Text.XML
import Text.XML.Cursor
import qualified Data.Text as T

getProfiles :: AdviseConf -> IO () -- AdviseResult
getProfiles  (AdviseConf model mb) = do
   doc <- Text.XML.readFile def xmlFile
   let cursor = fromDocument doc
   _ <- Prelude.writeFile "test.txt" $
        show                         $
        T.concat                     $
        cursor                       $//
        element "mb"                 >=>
        attributeIs "model" "460"    >=>
        element "dmiattr"            >=>
        attributeIs "value" "H61M-P25 (MS-7680)" 
        &// content 
```

我知道最终的功能`content`是错误的，但我不知道哪个是正确的。我正在尝试`rev`从匹配的节点中捕获所有属性。

因此，当我使用上述内容时，我最终会得到一个空列表、垃圾字符或类型错误。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T02:44:47.200

1.  我认为您正在寻找该`attribute`功能。
2.  通过使用`>=> element "dmiattr"`你说“当前元素的名称是`dmiattr`'。我想你可能是说`&/ element "dmiattr"`. 但是由于你想要父级的 @rev 属性，你可能需要使用该`check`函数。

# php - 具有多个数据库的单例

> ID：13187818
> 
> 赞同：6
> 
> 时间：2012-11-02T01:02:06.063
> 
> 标签：php, singleton, multiple-databases

示例应用程序，具有员工信息并被工资单和 pos 等不同应用程序访问。我在一个数据库中有员工数据，工资单数据和 pos 分别在不同的数据库中。

我有一个像下面这样的数据库连接类，所以每次我想连接到一个数据库时，我都会这样做`$conn = Database::getInstance(db1)`。

效果很好，但基本上超级慢。使应用程序运行非常缓慢。关于为什么会这样或更好的替代想法的任何提示？

任何帮助将不胜感激

```
<?php    
class Database {
        private $db;
        static $db_type;
        static $_instance;

        private function __construct($db){
            switch($db) {
                case "db1":
                  try{
                      $this->db = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME, DB_USER, DB_PASSWORD);
                  }
                  catch(PDOException $e){
                      print "Error!: " . $e->getMessage() . "<br />";
                      die();
                  }
                break;
                case "db2":
                  try{
                      $this->db = new PDO("mysql:host=" . DB_HOST_2 . ";dbname=" . DB_NAME_2, DB_USER_2, DB_PASSWORD_2);
                  }
                  catch(PDOException $e){
                      print "Error!: " . $e->getMessage() . "<br />";
                      die();
                  }
                break;
            }
            self::$db_type = $db;

        }

        private function __clone(){}

        static function getInstance($db_type){
            if(!(self::$_instance) || $db != self::$db_type){
                self::$_instance = new self($db_type);
            }
            return self::$_instance;
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:16:19.750

不要不断地创建新对象。发生的情况是，每次您请求另一种数据库类型时，您都是通过 new 关键字重新创建它（尽管如果没有看到使用它的代码就很难确认）。

$_instance 是一个静态成员，因此当您更改数据库类型时，您会不断地覆盖它。$db_type 也是如此

虽然这对你正在做的事情来说有点过头了（为什么每个数据库不只有两个变量？），你可以尝试更多这样的事情：

```
<?php    
class Database {
        private $db;
        static $db_types;

        private function __construct($db){
            switch($db) {
                case "db1":
                  try{
                      $db_types[$db] = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME, DB_USER, DB_PASSWORD);
                  }
                  catch(PDOException $e){
                      print "Error!: " . $e->getMessage() . "<br />";
                      die();
                  }
                break;
                case "db2":
                  try{
                      $db_types[$db] = new PDO("mysql:host=" . DB_HOST_2 . ";dbname=" . DB_NAME_2, DB_USER_2, DB_PASSWORD_2);
                  }
                  catch(PDOException $e){
                      print "Error!: " . $e->getMessage() . "<br />";
                      die();
                  }
                break;
            }

        }

        private function __clone(){}

        static function getInstance($db_type){
            if(!inarray($db_types[$db_type]){
                $db_types[$db_type] = new self($db_type);
            }
            return $db_types[$db_type];
        }
    }
?> 
```

注意：语法可能已关闭。只是想展示这种模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:16:44.833

有了这个设计。如果您更改数据库，那么它会破坏与先前数据库的连接。

为每个连接创建单独的对象，然后在连接对象之间切换。

此外，出于同样的原因，这不是线程安全的。如果多个功能同时达到此功能，则可以在完成加载之前断开另一个功能。

您真的应该为每个函数创建一个新的连接对象，而不是在函数或其他对象之间共享它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T01:28:44.090

除了您不断切换连接的事实之外，我不明白为什么这会使事情变慢。我在这里唯一可以建议的是允许多个连接而不是切换它们：

```
class Database {
   protected static $connections;

   protected $activeConnections = array();

   protected static $instance;

   protected function __construct() {

   }

   public static loadConnections(array $connections) {

      self::$connections = $connections;
   }

   public function getConnection($name)
   {
      if(!isset($this->activeConnections[$name]) {
          if(!isset(self::$connections[$name]) {
             throw new Exception('Connection "' . $name . '" is not configured.');
          }

           $this->activeConnections[$name] = new PDO(
              self::$connections[$name]['dsn'],
              self::$connections[$name]['username'], 
              self::$connections[$name]['password']
          ); 

      }

      return $this->activeConnections[$name];
   }
}

// usage

Database::loadConnections(array(
   'db1' => array(
       'dsn' => "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME,
       'user' => DB_USER,
       'password' => DB_PASSWORD,
    ),
    'db2' => array(
       'dsn' => "mysql:host=" . DB_HOST2 . ";dbname=" . DB_NAME2,
       'user' => DB_USER2,
       'password' => DB_PASSWORD2,
)));

$conn1 = Database::getInstance()->getConnection('db1');
$conn2 = Database::getInstance()->getConnection('db2'); 
```

使用类似的东西，您实际上可以一次管理多个打开的连接，并且它们是延迟加载的 - 这意味着您实际上不会实例化 PDO 连接，直到您使用`Database::getConnection`类似的方式您可以随时注入额外的 DSN 和凭据。就个人而言，我会将这些表单配置直接加载到类中，而不是使用类中的常量对它们进行硬编码。那么你可以这样：

```
// gives us an array
$config = Config::load('path/to/db/config.yml');

Database::loadConnections($config); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T01:20:22.320

检查 DB_HOST 和 DB_HOST_2 的值。以前我发现 MySQL 使用“127.0.0.1”连接非常慢，但使用“localhost”立即连接。

这取决于您的服务器的设置方式，但只是认为它可能会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T01:14:31.840

如何将其更改为也使用延迟加载。您不需要连接到承包商中的数据库。仅在首次需要数据库时进行连接。这样，如果页面只使用其中一个连接，则不需要等待其他数据库。

# javascript - AngularJS $resource @ 前缀参数

> ID：13187823
> 
> 赞同：13
> 
> 时间：2012-11-02T01:02:59.263
> 
> 标签：javascript, angularjs

我正在学习 AngularJS 并阅读它的 API

[Angular JS 资源](http://docs.angularjs.org/#!/api/ngResource.%24resource)

它说“如果参数值带有前缀，`@`则该参数的值是从数据对象中提取的”，代码示例：

```
var User = $resource('/user/:userId', {userId:'@id'});
var user = User.get({userId:123}, function() {
  user.abc = true;
  user.$save();
}); 
```

我太慢了，以至于在示例之后我仍然不明白前缀的`@`含义/作用。有人可以给我一些有和没有的例子`@`并详细说明吗？谢谢...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T02:23:58.030

当然。

这意味着当需要该属性时，您的 url 中的值将被用户对象中的属性`:userId`替换。`id`

那么什么时候需要呢？当您对现有用户做某事时，它是必需的，比如`get`ing 一个，更新一个。创建用户时不需要。

在大多数情况下，您希望在资源使用的 REST url 中至少有一个以 @ 为前缀的参数（可能是对象 ID）。如果你没有，这意味着为了保存一个对象的实例，你不需要知道它的存储位置。这意味着它是一个单例对象。也许像一个设置对象。

这是您期待已久的示例：

```
var User = $resource('/user/:userId/:dogName', {userId:'@id', dogName:@dog});
User.get({userId:123, dog:'Matt'}, function() { .. }) 
```

将产生请求：GET`/user/123/Matt`

# c - 斐波那契数列 c prog

> ID：13187827
> 
> 赞同：1
> 
> 时间：2012-11-02T01:03:36.447
> 
> 标签：c, fibonacci

我有 C 编程的问题。我想达到大量的斐波那契数列但程序，47 分钟数给出错误。这是预览。

```
1
2
3
5
8
13
21
34
55
89
144
233
377
610
987
1597
2584
4181
6765
10946
17711
28657
46368
75025
121393
196418
317811
514229
832040
1346269
2178309
3524578
5702887
9227465
14930352
24157817
39088169
63245986
102334155
165580141
267914296
433494437
701408733
1134903170
1836311903
**-1323752223** 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T01:06:01.283

看起来您超过了 32 位整数的限制。尝试使用 64 位整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T21:47:37.060

好吧，如果你想要非常大的数字，你可以使用一个数组来存储 fib 的数字，因为它是计算出来的

# javascript - 从 onClick 调用函数时找不到变量

> ID：13187828
> 
> 赞同：5
> 
> 时间：2012-11-02T01:03:40.900
> 
> 标签：javascript

我正在尝试使用 onClick 命令调用函数，但在 Safari 控制台中收到错误“找不到变量”并且未采取任何操作。我看不到任何错误，但我一定错过了导致此失败的某些内容。

**链接**

```
<a href="JavaScript:void(0);" onclick="controlWallMonitor('layout','Playback');">Show playback layout</a> 
```

**Javascript**

```
<script type="text/javascript">
$(document).ready(function() {
    function controlWallMonitor(variable, option) {
        var WallMonitor = "10.0.50.163:9000";
        $.ajax({
            url: 'changelayout.php?target=' + WallMonitor + '&variable=' + variable + '&option=' + option,
        });
        return false;
    };
}); 
```

我敢肯定它最终会变得非常明显，但我已经在谷歌上搜索并尝试了大约 2 个小时，但我一生都无法看到问题所在。

干杯。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T01:14:22.623

从函数周围删除 $(document).ready 调用，您所要做的就是将它放在 jQuery 脚本包含之后。

编辑：另外，不要使用 onclick，而是使用 jQuery 事件处理程序：

HTML：

```
<a href="JavaScript:void(0);" class="playback">Show playback layout</a> 
```

JS：

```
$(document).ready(function(){
    $("a.playback").click(function(){ controlWallMonitor('layout', 'Playback'); });
}); 
```

# opengl - 获得 OpenGL 纹理或渲染缓冲区的“平均”颜色的任何快速方法？

> ID：13187830
> 
> 赞同：2
> 
> 时间：2012-11-02T01:03:44.557
> 
> 标签：opengl

我有一个操作系统上的 OpenGL 应用程序，当应用程序失去焦点时，它可以抢走 OpenGL 上下文，即使应用程序仍在内存中。当应用程序返回焦点时，当我将纹理重新加载到新的 OpenGL 上下文中时，这会导致屏幕闪烁。

我正在努力将重新加载分解为增量，以便看起来更好。但我也想知道这种可能性：

1.  当程序注意到它将失去焦点时，捕获显示（或主纹理）的“平均”颜色。
2.  当程序重新获得焦点时，使用步骤 1 中捕获的颜色执行非常快速的 glClearColor(r,g,b)。
3.  然后，在用户看到步骤 2 中设置的颜色时，正常重新加载纹理。

我认为这将是一种视觉技巧，可以使闪烁不那么明显。有一个问题：我认为通过平均每个像素来捕获聚合颜色会花费太长时间并且不值得。

所以我想知道是否有任何 OpenGL 技巧可以让应用程序粗略估计用户在屏幕上看到的平均颜色？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T01:25:57.583

我听说过平均屏幕颜色的最快方法是将其复制到纹理中，调用[`glGenerateMipmap`](http://www.opengl.org/wiki/GLAPI/glGenerateMipmap)并抓取最小层（1x1 mip 级别），其中将包含像素颜色的平均值。不过，这对我来说听起来并不是特别快，所以不确定它是否对您的目的有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T15:18:00.740

听起来你需要一个直方图。GPU gems 有一篇文章，其中包含使用几何着色器制作的描述。

[https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch41.html](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch41.html)

Nicol 的方法或变体可能会更快（当然代码也更少），但调整起来并不容易。

# c# - 我应该使用单独的对象（内部）描述事物并公开识别它吗？

> ID：13187850
> 
> 赞同：1
> 
> 时间：2012-11-02T01:06:48.950
> 
> 标签：c#

我目前正在开发一个可以在连接到 PC 的设备上读取和设置配置值的库。每个配置字段都由一个常量 ( `public static readonly`) 对象描述，该对象包含该字段的名称、其数据类型（以及值限制）以及读取/写入它所需的命令序列。

这些信息大多只在图书馆内需要。但是，客户端代码需要能够告诉库读取/写入特定字段，并且我还想在将字段与其值相关联的字典中传递配置值的集合。为此，我需要提供标识字段的公共值。

可以使用相同的对象在内部描述字段并公开标识它们吗？感觉有点不对劲，但我无法说出原因。我希望您可以消除我的疑虑，或者告诉我为什么这是一个坏主意或要注意什么。

**更新**：我最终为字段标识和实现字段访问使用了相同的对象。现在，几个月后，我终于遇到了一个问题，它强调了为什么这不是一个干净的解决方案：正如我上面提到的，一个字段对象代表设备上的一个配置字段。这与访问此类字段的方式无关。

更笼统地说：我对事物的隐藏内部表示*并没有描述事物*。它描述了与不一定具有 1:1 关系的事物*相关的事物。*

如果您想更改字段访问权限，这可能会成为一个问题。例如，现在我无法创建一个提供“错误重试”访问行为的字段装饰器类。使用装饰器的代码会将其视为自己的字段，与实际的底层字段无关。

请注意，这*不是*对原始问题的回答，而是意识到我的假设是错误的。如果您真的确定您对事物的内部描述与事物本身具有 1:1 的关系，则此问题不适用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:53:35.137

这实际上取决于您的库如何运作以及客户端代码如何与之交互。将内部表示暴露给客户的一个潜在问题是，在不破坏客户代码的情况下，您没有足够的灵活性来更改内部表示。但是，我认为这不会太难克服，因为在您需要内部不同表示的时间点，您可以创建一个新的内部表示，并将旧表示保留为公共 API 的一部分.

如果您决定将内部表示作为公共 API 的一部分公开，需要注意的一件事是意外的副作用。例如，假设客户端代码向您传递一个对象，然后您在内部存储该对象。对象在 C# 中通过引用传递，这意味着对该对象的任何修改也将发生在内部存储的对象上。当然，您可以只制作对象的副本，这样就不会出现此问题。

最后，您可能想退后一步，从客户端的角度考虑公共 API（如果您还没有）。也许尝试在一些单元测试中使用它。您可能会发现，从客户的角度来看，内部表示并不是表示它的最佳方式。

For very simple API's using the internal structure is probably ok. I always tend to lean the other direction, and would opt for an abstraction and an isolation in my design that segregates the public API from the inner workings.

It's all about tradeoffs and just depends on what you're trying to accomplish. Hopefully this will help your decision a little bit.

# powershell - 应该在您的 PowerShell 配置文件中放入多少？

> ID：13187852
> 
> 赞同：1
> 
> 时间：2012-11-02T01:06:51.243
> 
> 标签：powershell

刚开始对 PowerShell 产生兴趣，并在我的个人资料中添加了一些自定义项。

我的问题是，个人资料有多少是太多了？我想为每个会话加载许多模块。如果我在配置文件中加载了太多模块，或者这纯粹是启动问题，那么会话期间的性能是否会受到影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:20:04.670

我通常在配置文件中设置别名，如 vim 和 shell 的其他设置。就您的问题而言，您需要为每个会话加载模块，将它们全部加载到配置文件中是可以的。加载的模块将始终在内存中，因此会影响计算机的性能。在 Powershell 3.0 中，您不再需要手动加载模块，它们会在需要时自动加载。您只需要正确设置您的 PSModulePath 环境变量，以确保如果您将模块放置在默认位置以外的位置，则可以找到您的模块。

# mysql - mysql查询找出不存在的用户

> ID：13187858
> 
> 赞同：1
> 
> 时间：2012-11-02T01:07:40.367
> 
> 标签：mysql, join

我正在玩 2 个数据库表。一个是**用户**表，其中包含用户详细信息，如全名和活动（用户是否活动）列。另一个是包含每个用户的任务详细信息的**任务表。**所以任务表有名为 UserID 和 StartTime 的列。以下查询将显示昨天输入任务的所有用户详细信息。

```
$today = mktime(0,0,0);
$yesterday = $today - 86400;
$res = $db->fetchAll("SELECT DISTINCT tasks.UserID,user.full_name FROM `tasks` JOIN `user` ON tasks.UserID=user.id WHERE user.active=1 AND tasks.StartTime > ".$db->quote($yesterday,'integer')." AND tasks.StartTime < ".$db->quote($today,'integer')); 
```

我需要找出昨天没有输入任务的用户详细信息。如何修改上述查询？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:23:39.403

How about getting just the yesterday records from tasks table before joining?

```
"SELECT DISTINCT tasks.UserID, user.full_name FROM `user` LEFT JOIN (
    select * from `tasks` where tasks.StartTime > ".$db->quote($yesterday,'integer')."
    ) `tasks_from_yesterday` 
    ON user.id=tasks_from_yesterday.UserID WHERE user.active=1 AND tasks_from_yesterday.StartTime = NULL" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:15:12.930

尝试这样的事情：

```
SELECT DISTINCT tasks.UserID, user.full_name FROM `user` LEFT JOIN `tasks` 
ON user.id=tasks.UserID WHERE user.active=1 AND tasks.StartTime = NULL; 
```

当 MySQL 在任务表中找不到用户时，它应该返回 NULL。

# php - 我的函数出现错误“为 foreach() 提供的参数无效”

> ID：13187863
> 
> 赞同：-1
> 
> 时间：2012-11-02T01:08:20.337
> 
> 标签：php, function, foreach

> **可能重复：**
> [为 foreach() 提供的参数无效](https://stackoverflow.com/questions/2630013/invalid-argument-supplied-for-foreach)

所以，我有这个功能：

```
 <?php
        function get_instagram($user_id=15203338,$count=6,$width=190,$height=190){
            $url = 'https://api.instagram.com/v1/users/'.$user_id.'/media/recent/?access_token=13137.f59def8.1a759775695548999504c219ce7b2ecf&count='.$count;
            // Let's create a cache
            $cache = './wp-content/themes/multiformeingegno/instagram_json/'.sha1($url).'.json';
            if(file_exists($cache) && filemtime($cache) > time() - 1000){
                // If a cache file newer than 1000 seconds exist, use that
                $jsonData = json_decode(file_get_contents($cache));
            } else {
                $jsonData = json_decode((file_get_contents($url)));
                file_put_contents($cache,json_encode($jsonData));
            }
            $result = '<div id="instagram">'.PHP_EOL;
            foreach ($jsonData->data as $key=>$value) {
                $title = (!empty($value->caption->text))?' '.$value->caption->text:'...';
                $location = (!empty($value->location->name))?' presso '.$value->location->name:null;
                $result .= "\t".'<a class="fancybox" data-fancybox-group="gallery" href="'.$value->images->standard_resolution->url.'"><img src="'.$value->images->low_resolution->url.'" alt="'.$value->caption->text.'" width="'.$width.'" height="'.$height.'" /></a>
                <div style="display: none;">'.htmlentities($title, ENT_QUOTES, "UTF-8").'<br><em style="font-size:11px">Scattata il '.htmlentities(strftime('%e %B %Y alle %R', $value->caption->created_time + 7200)).' '.htmlentities($location).' (<a target="_blank" style="color:darkgrey" rel="nofollow" href="http://maps.google.com/maps?q='.htmlentities($value->location->latitude).',+'.htmlentities($value->location->longitude).'">mappa</a>)</em></div>'.PHP_EOL;
            }
            $result .= '</div>'.PHP_EOL;
            return $result;
        }
        echo get_instagram();
        ?> 
```

我收到很多这样的错误：FastCGI 在标准错误中发送：“PHP 消息：PHP 警告：为 foreach() 提供的参数无效。问题所在是

```
foreach ($jsonData->data as $key=>$value) { 
```

那有什么问题？

提前谢谢各位！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:20:03.380

当你使用时，`json_decode`你会得到一个对象。如果你想要一个数组，你可以使用第二个参数`json_decode`是一个切换来返回一个对象或一个数组。`true`给出数组。

您需要调整代码以使用新数组。

另一件可能有帮助的事情（不确定，因为我不知道对象中有什么）是将对象转换为数组（但这有点 hack ;)）：

```
foreach ((array) $jsonData->data as $key=>$value) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:11:54.033

在你的 foreach 之前尝试以下操作：

```
if(is_array($jsonData->data)){
    // Do the for each
} else {
    // It wasn't an array so do something else
    // Like an error message or w/e
} 
```

当您在 json 中获得的内容并不总是数组时，这很有用。

如果假设它是一个数组，则仅将其用于调试并`var_dump($jsonData->data);`在 else 中执行以查看您实际得到的内容

# java - Java Applet 多边形数组

> ID：13187872
> 
> 赞同：-2
> 
> 时间：2012-11-02T01:09:38.237
> 
> 标签：java, japplet

我有一个功能程序，它通过每次鼠标单击来收集坐标，然后使用这些坐标绘制一个多边形。我添加了一个功能，这样当您完成绘制多边形并填充它时，您可以擦除屏幕并重新开始使用新形状。我遇到的麻烦是想办法重置坐标值。

我现在拥有的是在我的 actionPerformed 方法中，我将我的两个数组（XCoordinates 和 YCoordinates）清零。现在用户可以使用新坐标重新开始，但现在第一个坐标是 (0,0)。每次我画一个形状时，它都是从左上角开始的，哈哈。

我想将数组的值设置为初始化两个数组时最初的值。我尝试使用 actionPerformed 重新初始化数组，但它没有用，而且我确信这是非常糟糕的编程习惯。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:21:55.980

直接操作坐标数组字段很诱人`Polygon`，但您只能通过公共 API 进行操作。特别是，看看这些方法：

*   `invalidate()`，“应该在对坐标进行任何直接操作后调用。”

*   `reset()`，这使多边形为空。

*   `addPoint()`，它保持内部一致的状态。

[这里](https://stackoverflow.com/a/5878090/230513)有一个相关的例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T03:17:09.463

不提供任何代码会让您变得很困难，但这里有两个想法......

**使用多边形**

这基本上使用 a`Polygon`并不断向其添加点，直到您按 Enter 键...

```
public class PolyPainter {

    public static void main(String[] args) {
        new PolyPainter();
    }

    public PolyPainter() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PolyPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class PolyPane extends JPanel {

        private Polygon poly;
        private Point lastPoint;

        public PolyPane() {

            poly = new Polygon();

            InputMap im = getInputMap();
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "clear");
            ActionMap am = getActionMap();
            am.put("clear", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    poly = new Polygon();
                    repaint();
                }
            });

            addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    lastPoint = e.getPoint();
                    poly.addPoint(e.getX(), e.getY());
                    repaint();
                }
            });
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            Graphics2D g2d = (Graphics2D) g.create();
            g2d.draw(poly);
            if (lastPoint != null) {
                g2d.setColor(Color.RED);
                g2d.fillOval(lastPoint.x - 5, lastPoint.y - 5, 10, 10);
            }
            g2d.dispose();
        }
    }
} 
```

**使用点列表**

这基本上使用了一个点列表

```
public class PolyPainter1 {

    public static void main(String[] args) {
        new PolyPainter1();
    }

    public PolyPainter1() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PolyPane());
                frame.setSize(400, 400);
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    protected class PolyPane extends JPanel {

        private List<Point> poly;
        private Point lastPoint;

        public PolyPane() {

            poly = new ArrayList<Point>(25);

            InputMap im = getInputMap();
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "clear");
            ActionMap am = getActionMap();
            am.put("clear", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    poly.clear();
                    repaint();
                }
            });

            addMouseListener(new MouseAdapter() {
                @Override
                public void mousePressed(MouseEvent e) {
                    lastPoint = e.getPoint();
                    poly.add(lastPoint);
                    repaint();
                }
            });

        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g); 
            Graphics2D g2d = (Graphics2D) g.create();
            Polygon pg = new Polygon();
            for (Point p : poly) {
                pg.addPoint(p.x, p.y);
            }
            g2d.draw(pg);
            if (lastPoint != null) {
                g2d.setColor(Color.RED);
                g2d.fillOval(lastPoint.x - 5, lastPoint.y - 5, 10, 10);
            }
            g2d.dispose();
        }
    }
} 
```

就个人而言，第一个更有效，因为它不需要在`Polygon`每次重绘时都构造一个新对象。

# java - Web 服务中使用的 ElasticSearch 抛出 OverlappingFileLockException

> ID：13187875
> 
> 赞同：2
> 
> 时间：2012-11-02T01:10:09.330
> 
> 标签：java, web-services, elasticsearch

我们编写了一个使用 ElasticSearch 比较文档的库。它适用于 JSF 应用程序，但不适用于 Web 服务。

这两个应用程序具有相同的逻辑：首先它们创建一个存储库（构造函数从硬编码位置加载文档列表并对其进行索引），然后允许用户将自己的文档与存储库中的文档进行比较。JSF 应用程序提供了一些 GUI，但 web 服务层非常薄 - 它在启动时创建存储库（加载和索引文档），然后只是将比较请求传递给库。

更复杂的 JSF 应用程序运行时没有任何问题，而 web 服务应用程序甚至不加载（即它甚至不索引文档），存在重叠锁的问题。（请注意，我部署了一个或另一个应用程序，而不是同时部署两个应用程序。应用程序不共享任何数据。我只提到 JSF 应用程序，因为它可以工作，而另一个没有，即使它们使用相同的库。 )

JSF 应用程序和 Web 服务有什么不同，前者可以工作，而后者不能？

以下是一些细节（略微简化/修改）

网络服务：

```
@WebService(serviceName = "RepositoryWebService")
public class RepositoryWebService {
    private static Repository repository = Repository.getInstance();

    // some web methods (irrelevant since I never get that far)
}

public class Repository {
   private final static Repository instance = new Repository();

   public static Repository getInstance() {
       return instance;
   }
   :
} 
```

JSF 应用程序访问也创建了存储库的单例实例（使用`@ApplicationScoped`bean）。

我得到的网络服务的例外是：

```
java.nio.channels.OverlappingFileLockException
at sun.nio.ch.SharedFileLockTable.checkList(FileLockTable.java:255) [rt.jar:1.7.0_04]
    :
at java.nio.channels.FileChannel.tryLock(FileChannel.java:1154) [rt.jar:1.7.0_04]
at org.apache.lucene.store.NativeFSLock.obtain(NativeFSLockFactory.java:217) [lucene-core-3.6.1.jar:3.6.1 1362471 - thetaphi - 2012-07-17 12:40:12]
at org.elasticsearch.env.NodeEnvironment.<init>(NodeEnvironment.java:80) [elasticsearch-0.19.11.jar:]
at org.elasticsearch.node.internal.InternalNode.<init>(InternalNode.java:125) [elasticsearch-0.19.11.jar:]
at org.elasticsearch.node.NodeBuilder.build(NodeBuilder.java:159) [elasticsearch-0.19.11.jar:]
at org.elasticsearch.node.NodeBuilder.node(NodeBuilder.java:166) [elasticsearch-0.19.11.jar:]
at org.abc.Repository.<init>(Repository.java:56) [repository.jar:]
    : 
```

在`elasticsearch.yml`中，我有（除其他外）：

```
node.max_local_storage_nodes: 1
index:
    number_of_shards: 1
    number_of_replicas: 0 
```

我尝试了 glassfish 3.1.2 和 JBoss 7.1.1，结果相同。两者都在 JDK 1.7.0_07 64 位 Windows 7 上。

任何我做错了什么的建议将不胜感激。

**更新：**

当我将所有依赖的 jar（elasticsearch*、jna*、log4j*、lucene*、snappy-java* 和我的 jar）放入域的 lib 目录（在 Glassfish 上）时，它就可以工作。当 jars 只是 war 文件的一部分时，它不会。

不知道发生了什么。我虽然这可能与在 java 中仅加载一个本机库实例这一事实有关，但仅将 jna 和 snappy-java jar 放在那里是不够的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:02:29.063

不确定它是否会有所帮助，但这里有一些想法：

*   看起来您已经加载了 Web 服务类的多个实例。您确定 Repository.getInstance() 工作正常吗？
*   我有一个有效的演示项目（webapp - REST Webservice + 嵌入式 ES）：（看看这段[代码](https://github.com/scrutmydocs/scrutmydocs)）。我在这个项目中使用了 Spring 和 Elasticsearch Spring Factory: [Spring ElasticSearch](https://github.com/dadoonet/spring-elasticsearch)。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:26:05.573

看起来您正在为 JSF 和 Web 服务应用程序调用方法或类似方法之后加载列表。在最后一个中，您应该在部署应用程序时加载数据。为此，编写一个`ServletContextListener`并在方法中加载数据`contextInitialized`。

将`ServletContextListener`在所有`Servlet`s 加载到 Web 应用程序之前加载。通过这样做，您的所有 Web 服务方法都可以访问准备好的数据。

关于`ServletContextListener`：

*   [ServletContextListener 示例](http://www.javabeat.net/2009/02/servletcontextlistener-example/)

如果您需要/想要`ServletContext`从 Web Service 类访问，您可以通过设置这句话来实现

```
@WebService(serviceName = "RepositoryWebService")
public class RepositoryWebService {

    @Resource
    private WebServiceContext wsContext;

    @SuppressWarnings("unused")
    private ServletContext getServletContext() {
        return (ServletContext)wsContext.getMessageContext()
            .get(MessageContext.SERVLET_CONTEXT);
    }

    //your web methods here...
} 
```

# mongodb - 为什么我不能使用 Homebrew 更新到最新的 MongoDB？

> ID：13187877
> 
> 赞同：34
> 
> 时间：2012-11-02T01:10:16.450
> 
> 标签：mongodb, homebrew

我在我的 Mac 上安装了 2.0.2 版的 mongo，我使用 Homebrew 安装了它。我正在学习的课程是使用“聚合”功能，该功能仅在 Mongo 2.2 版中可用。我试着做

```
 brew upgrade mongodb 
```

我得到

```
Error: mongodb already upgraded 
```

有没有办法用 Homebrew 安装最新版本的 Mongo？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2014-08-18T08:21:05.890

如果 brew receipe 中的 mongodb 版本与安装的版本相同，则会收到所述错误。

通常，当您看到发布的最新稳定版本并希望将您的 mongodb 版本升级到它时，您首先必须更新您的 brew receipe，然后像您一样进行升级。

这意味着你首先要做

```
brew update 
```

进而

```
brew upgrade mongodb 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-11-02T07:21:40.430

此命令应将您的自制公式更新为最新版本：

```
brew update 
```

进而：

```
brew upgrade mongodb 
```

安装最新版本的 mongodb。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-02-06T14:10:01.683

### 适用于 MacOS Catalina 及更高版本

**首先，安装 Homebrew。如果您对 Homebrew 是什么感到好奇，请阅读这篇文章。**

```
# Installs Homebrew
/usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
```

**其次，找到 MongoDB 水龙头。**

```
brew tap mongodb/brew 
```

**第三，安装MongoDB。**

```
brew install mongodb-community 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-17T13:58:17.470

您应该能够运行： `brew upgrade mongodb`

现在它会在升级您的 mongodb 版本之前更新。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-19T22:33:57.043

我尝试了上述解决方案，但都没有奏效。我收到错误消息：
`no available formula or cask with the name "mongodb". Did you mean mongosh or monetdb?` 。我在此链接上找到了解决方案。

[Stackoverflow 解决方案没有可用的公式或木桶”](https://stackoverflow.com/questions/57856809/installing-mongodb-with-homebrew)

# objective-c - NSString drawAtPoint 文本未显示

> ID：13187881
> 
> 赞同：2
> 
> 时间：2012-11-02T01:10:57.253
> 
> 标签：objective-c, macos, cocoa

在我的应用程序中，我正在以编程方式构建一个`NSImage`对象，该对象设置为应用程序停靠图标。我想在图标上添加一些文本，并且一直在尝试使用`NSString drawAtPoint: withAttributes`，但它似乎不起作用。我已经使用日志消息确认字符串构造正确。

我似乎无法弄清楚我错过了什么，做错了什么。任何帮助将不胜感激。

这是我为绘制到`NSImage`

```
-(void) drawStringToImage:(NSString*) str{

    [theIcon lockFocus];

    NSLog([@"Drawing String: " stringByAppendingString:str]);
   //  [NSDictionary dictionaryWithObjectsAndKeys:font, NSFontAttributeName, nil];
    [str drawAtPoint:NSMakePoint(5,500) withAttributes:nil];

    [theIcon unlockFocus];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T14:55:02.563

使用[How to convert Text to Image in Cocoa Objective-C 中的](https://stackoverflow.com/questions/11442993/how-to-convert-text-to-image-in-cocoa-objective-c)修改后的代码，我能够在现有的顶部呈现文本`NSImage`

```
// Use Helvetica size 200 
CTFontRef font = CTFontCreateWithName(CFSTR("Helvetica Bold"), 200.0, nil);

// Setup the string attributes, set TEXT COLOR to WHITE
NSDictionary* attributes = [NSDictionary dictionaryWithObjectsAndKeys:
                            (__bridge id)(font), kCTFontAttributeName,
                            [[NSColor whiteColor] CGColor], (__bridge id)(kCTForegroundColorAttributeName),
                            nil];

NSAttributedString* as = [[NSAttributedString alloc] initWithString:string attributes:attributes];
CFRelease(font);

// Calculate the size required to contain the Text
CTLineRef textLine = CTLineCreateWithAttributedString((__bridge CFAttributedStringRef)as);
CGFloat ascent, descent, leading;
double fWidth = CTLineGetTypographicBounds(textLine, &ascent, &descent, &leading);
size_t w = (size_t)ceilf(fWidth);
size_t h = (size_t)ceilf(ascent + descent);

//Allocated data for the image
void* data = malloc(w*h*4);

// Create the context and fill it with white background
CGColorSpaceRef space = CGColorSpaceCreateDeviceRGB();
CGBitmapInfo bitmapInfo = kCGImageAlphaPremultipliedLast;
CGContextRef ctx = CGBitmapContextCreate(data, w, h, 8, w*4, space, bitmapInfo);
CGColorSpaceRelease(space);
CGContextSetRGBFillColor(ctx, 0.0, 0.0, 0.0, 0.0); // black background
CGContextFillRect(ctx, CGRectMake(0.0, 0.0, w, h));

// Draw the text in the new CoreGraphics Context
CGContextSetTextPosition(ctx, 0.0, descent);
CTLineDraw(textLine, ctx);
CFRelease(textLine);

// Save the CoreGraphics Context to a NSImage
CGImageRef imageRef = CGBitmapContextCreateImage(ctx);
NSBitmapImageRep* imageRep = [[NSBitmapImageRep alloc] initWithCGImage:imageRef];
NSImage *stringImage = [[NSImage alloc] initWithSize:size];
[stringImage addRepresentation:imageRep];

// Combine the original image with the new Text Image
[originalImage lockFocus];
[stringImage drawInRect:NSMakeRect(renderArea.origin.x, renderArea.origin.y, w, h) fromRect:NSZeroRect operation:NSCompositeSourceAtop fraction:1];
[originalImage unlockFocus];

CGImageRelease(imageRef);
free(data); 
```

# clearcase-ucm - ClearQuest 标志的命令行语法

> ID：13187885
> 
> 赞同：1
> 
> 时间：2012-11-02T01:11:17.380
> 
> 标签：clearcase-ucm, clearquest

我有一个 unix shell 脚本，它允许我从命令行创建 ucm 项目（因此我不必回忆所有开关，并且可以一次性完成所有操作（项目、集成流、开发流等）） .

我可以打电话`mkproject.sh myproject-1@/vobs/my_pvob`，它为我做了几乎所有的艰苦工作，包括制定所有的政策。

我无法从文档中找到的一件事是如何启用 ClearQuest 策略，特别是“Transition to Complete After Delivery”标志。

关于如何做到这一点的任何建议？

以下相关部分`mkproject.sh`：

```
cleartool mkproject -c "${PROJ_NAME}" \
 -in RootFolder@${PVOB} -model DEFAULT \
 -blname_template "component,date,time,basename" \
 -policy ${POLICY} -npolicy ${NEG_POLICY} \
 -crmenable ${CQ_USER_DB} -connection ${CQ_DB_CNXN} \
 -modcomp ${COMP_LIST} ${PROJ_NAME}@${PVOB} || \
    msg FATAL "error creating project ${PROJ_NAME}@${PVOB}" 
```

在哪里：

> > POLICY='POLICY_INTRAPROJECT_DELIVER_FOUNDATION_CHANGES,POLICY_INTERPROJECT_DELIVER,POLICY_INTERPROJECT_DELIVER_FOUNDATION_CHANGES,POLICY_INTERPROJECT_DELIVER_ALLOW_NONMOD_TGTCOMPS,POLICY_REBASE_CO,POLICY_CHSTREAM_UNRESTRICTED,POLICY_UNIX_INT_SNAP' NEG_POLICY='POLICY_DELIVER_NCO_DEVSTR,POLICY_DELIVER_NCO_SELACT,POLICY_DELIVER_REQUIRE_REBASE,POLICY_INTRAPROJECT_DELIVER_ALLOW_MISSING_TGTCOMPS,POLICY_INTERPROJECT_DELIVER_REQUIRE_TGTCOMP_VISIBILITY,POLICY_CHPROJECT_UNRESTRICTED,POLICY_WIN_DEV_SNAP,POLICY_WIN_INT_SNAP,POLICY_UNIX_DEV_SNAP'

我怀疑我需要运行一些 post mkproject 命令。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:27:55.377

我怀疑，如“[何时使用 Rational ClearQuest 脚本而不是 UCM 触发器](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/c_u_trg_when_scrpt.htm)”中所述，您需要首先启用 ClearQuest 链接。
见[`cleartool mkproject`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mkproject.htm)：

```
 –crm/enable ClearQuest-user-database-name [–con/nection crm-connection ] 
```

然后，可以启用任何 ClearQuest 策略，如“[定制 Rational ClearQuest 项目策略](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_proj.doc/c_u_cq_prjpol_cstmz.htm)”中列出的策略，其中包括**`UCM_CQActAfterDeliver_Def`**.
它表示交付后转换为完成的默认操作：请参阅“ [UCM-ClearQuest 集成策略的功能](http://www-01.ibm.com/support/docview.wss?uid=swg21128577#Untitled%20Section_0)”

```
REM Start of Global Script UCM_CQActAfterDeliver_Def

Function UCM_CQActAfterDeliver_Def (entity_type, entity_id)

' This implements the default behavior when the "Do ClearQuest
' Action After Delivery" policy is enabled: It attempts to transition
' the entity to a Complete-type state, using default actions. Note that
' any missing mandatory fields for the Complete-type state will cause
' this script to fail.
'
' INPUT:
'  - entity_type: type of entity on which action will be executed
'  - entity_id: id (e.g. "SAMPL0000001") of entity on which action will be
'     executed
' OUTPUT:
'  - If the action was successfully executed, this returns an empty string
'  - If the action was not successfully executed, this returns a string
'    to be displayed as an error message. 
```

# dependency-injection - 依赖注入，处理非单例类的范围

> ID：13187886
> 
> 赞同：2
> 
> 时间：2012-11-02T01:11:45.227
> 
> 标签：dependency-injection, inversion-of-control, ninject

我理解使用依赖注入框架（例如 Ninject / Spring / 等）的很多吸引力。我喜欢编写新类的想法，而不必考虑依赖项来自何处，只是它以某种方式提供给您。

我发现很多我读过的例子都使用单例类。所以你有类似的东西：

```
class A
{
    Database _db;

    A(Database db)
    {
        _db = db;
    }
} 
```

由于整个系统只有一个数据库，您可以在应用程序入口点注册数据库，如下所示：

```
Bind<Database>().AsSingleton() 
```

我不明白的是如何处理您的依赖项不是单例的情况，并且在任何时候都可能有多个实例。我见过的 DI 框架似乎只为您提供了将其定义为 Singleton 或为每个使用类创建一个新实例的选项。

手动依赖注入？定义一个选择要使用的实例的工厂对象？某种层次范围的机制让你假装他们是单身人士？这种情况下存在哪些类型的模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:41:59.260

你的问题很广泛。如果您有特定的用例，我们可以更准确地回答您的问题。

我使用的大多数 DI 框架都有你提到的单例和瞬态范围，它们通常也有每个线程。有些有更多，有些允许您创建自己的扩展来定义自己的范围。通过我看到的每个 http 请求、每个 http 会话和每个 WCF 操作的扩展。

也可以看看...

*   [Ninject 对象范围](https://github.com/ninject/ninject/wiki/Object-Scopes)
*   [温莎城堡生活方式](http://docs.castleproject.org/Windsor.LifeStyles.ashx)
*   [Unity 终身经理](http://msdn.microsoft.com/en-us/library/ff647854.aspx)
*   [简单的注入器对象生活方式管理](http://simpleinjector.codeplex.com/wikipage?title=ObjectLifestyleManagement)
*   [Spring.Net 对象范围](http://www.springframework.net/doc-latest/reference/html/objects.html#objects-factory-scopes)
*   [StructureMap 范围界定和生命周期管理](http://docs.structuremap.net/Scoping.htm)
*   [autofac 控制范围和生命周期](http://code.google.com/p/autofac/wiki/InstanceScope)

# websphere-6.1 - 无法启动 WAS

> ID：13187887
> 
> 赞同：1
> 
> 时间：2012-11-02T01:11:46.223
> 
> 标签：websphere-6.1

我无法启动 WAS。这是 startServer.log。任何人都可以解释我是什么问题..提前谢谢。

```
************ Start Display Current Environment ************ Host Operating System is Windows XP, version 5.1 build 2600 Service Pack 3
Java version = J2RE 1.5.0 IBM J9 2.3 Windows XP x86-32
j9vmwi3223ifx-20080811 (JIT enabled) J9VM - 20080809_21892_lHdSMr JIT - 20080620_1845_r8 GC - 200806_19, Java Compiler = j9jit23, Java VM name = IBM J9 VM
was.install.root = C:\Program Files\IBM\SDP\runtimes\base_v61
user.install.root = C:\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1
Java Home = C:\Program Files\IBM\SDP\runtimes\base_v61\java\jre
ws.ext.dirs = C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\java\\lib;C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\classes;C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\lib;C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\installedChannels;C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\lib\\ext;C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\web\\help;C:\\Program Files\\IBM\\SDP\\runtimes\\base_v61\\deploytool\\itp\\plugins\\com.ibm.etools.ejbdeploy\\runtime Classpath = C:\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1\properties;C:\Program Files\IBM\SDP\runtimes\base_v61\properties;C:\Program Files\IBM\SDP\runtimes\base_v61\lib\startup.jar;C:\Program Files\IBM\SDP\runtimes\base_v61\lib\bootstrap.jar;C:\Program Files\IBM\SDP\runtimes\base_v61/lib/j2ee.jar;C:\Program Files\IBM\SDP\runtimes\base_v61/lib/lmproxy.jar;C:\Program Files\IBM\SDP\runtimes\base_v61/lib/urlprotocols.jar;C:\Program Files\IBM\SDP\runtimes\base_v61\java\lib\tools.jar
Java Library path = C:\Program Files\IBM\SDP\runtimes\base_v61\java\jre\bin;.;C:\Program Files\IBM\SDP\runtimes\base_v61\bin;C:\Program Files\IBM\SDP\runtimes\base_v61\java\bin;C:\Program Files\IBM\SDP\runtimes\base_v61\java\jre\bin;C:\Program Files\MKS\IntegrityClient\bin;C:\PROGRA~1\MKS\Toolkit\bin;C:\PROGRA~1\MKS\Toolkit\bin\X11;C:\PROGRA~1\MKS\Toolkit\mksnt;C:\Orant\9iClient\bin;C:\Program Files\Oracle\jre\1.1.8\bin;C:\orant\forms6i\bin;C:\orant\forms6i\jdk\bin;C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\sybase15\DataAccess\ADONET\dll;C:\sybase15\DataAccess\OLEDB\dll;C:\sybase15\DataAccess\ODBC\dll;C:\sybase15\OCS-15_0\lib3p;C:\sybase15\OCS-15_0\dll;C:\sybase15\OCS-15_0\bin;C:\sybase15\DBISQL\bin;C:\WINDOWS\system32\WindowsPowerShell\v1.0;C:\Program Files\Intel\DMIX;C:\Program Files\Windows Imaging\;C:\WINDOWS\system32\WindowsPowerShell\v1.0
Current trace specification = *=info:com.ibm.*=all
************* End Display Current Environment *************
[11/1/12 14:32:15:963 EDT] 0000000a ManagerAdmin  I   TRAS0017I: The startup trace state is *=info:com.ibm.*=all.
[11/1/12 14:32:15:963 EDT] 0000000a WsServerContr 1   Executing executeUtilityOnWindows with args: C:\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1\config sreeNode01Cell sreeNode01 server1
[11/1/12 14:32:15:963 EDT] 0000000a WsServerContr 1   Getting WindowsService obj with: server1 and C:\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1\config sreeNode01Cell sreeNode01 server1
[11/1/12 14:32:15:979 EDT] 0000000a WindowsServic >  getWindowsServiceNameForServer() Entry
[11/1/12 14:32:15:979 EDT] 0000000a WindowsServic 1   In executeCommand, args are: C:\Program Files\IBM\SDP\runtimes\base_v61\bin\WASService.exe -getServiceName server1 -profilePath C:\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1
[11/1/12 14:32:15:979 EDT] 0000000a WindowsServic 1   Runtime.exec() returned process java.lang.ProcessImpl@72d872d8
[11/1/12 14:32:15:994 EDT] 0000000a WindowsServic 1   retCode from childProcess.waitFor() is 0
[11/1/12 14:32:15:994 EDT] 0000000a WindowsServic 3   exitCode = 0
[11/1/12 14:32:16:994 EDT] 0000000a WindowsServic 1   Trying to new up WindowsService using serverName=server1, winServiceName=null
[11/1/12 14:32:16:994 EDT] 0000000a ManagerAdmin  I   TRAS0018I: The trace state has changed. The new trace state is *=info.
[11/1/12 14:32:17:025 EDT] 0000000a AdminTool     A   ADMU0128I: Starting tool with the was61profile1 profile
[11/1/12 14:32:17:025 EDT] 0000000a AdminTool     A   ADMU3100I: Reading configuration for server: server1
[11/1/12 14:32:19:307 EDT] 0000000a AdminTool     A   ADMU3200I: Server launched. Waiting for initialization status.
[11/1/12 14:32:19:369 EDT] 0000000a AdminTool     A   ADMU3011E: Server launched but failed initialization. startServer.log, SystemOut.log(or job log in zOS) and other log files under C:\Program Files\IBM\SDP\runtimes\base_v61\profiles\was61profile1\logs\server1 should contain failure information. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-25T06:24:35.027

我认为这是由于 $WAS_HOME/profiles/profileName/properties/soap.client.properties 的密码无效/错误

我不确认这是问题，但上面的密码冲突会给出相同的错误消息，我已经看到了。服务器将启动但不会被初始化。

如果是这种情况，请执行此操作 $WAS_HOME/profiles/profileName/config/cells/cellName/security.xml 1）搜索字符串“已启用” 2）将值更改为 false 3）登录控制台 4）设置凭据

直到你分享日志，很难确认任何事情。

# c++ - 在 main() 中的 Google 测试中创建 xml 报告

> ID：13187896
> 
> 赞同：3
> 
> 时间：2012-11-02T01:13:33.790
> 
> 标签：c++, xml, unit-testing, googletest

是否有可能通过要求它来使 GoogleTest 输出一个 xml 文件`main()`？

我知道我可以更改系统环境变量（真的有人这样做吗？），或者使用命令行参数

> --gtest_output="xml:_path_to_output_file_"。

我想做的是让我的程序每次使用基于项目名称的文件名自动生成 xml。当然 - 它不会发生在我的电脑上......

我查看了 InitGoogleTest，但看不到任何可以触摸的东西。

（我想编写实际代码，而不是在 postbuild 中运行我的程序）。

有什么选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T02:24:38.863

您可以简单地分配`GTEST_FLAG(output) = "xml:_path_to_output_file_";`. 如果您在调用 之前执行此操作`InitGoogleTest`，它将作为默认值。如果您在调用 后执行此操作`InitGoogleTest`，它将覆盖`--gtest_output`您在命令行中提供的任何值。

# linux - Linux - 进程的堆栈大小

> ID：13187897
> 
> 赞同：2
> 
> 时间：2012-11-02T01:13:33.983
> 
> 标签：linux

在 Linux 中，进程的堆栈大小是否有限？也就是说，它的函数的堆栈总和不能超过固定大小吗？如果是固定的，这个大小是如何确定的，可以设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-05T11:25:13.573

我记得默认情况下，Linux 中进程堆栈的限制通常是 8MB，这可以用*ulimit*更改。

实际值可以通过以下方式获得：

```
$ ulimit -a | grep stack
stack size              (kbytes, -s) 8192 
```

*您可以从ulimit*手册页获取更多信息，或查看解释如何将堆栈大小分配给每个进程的问题：[https ://unix.stackexchange.com/questions/407204/program-stack-size](https://unix.stackexchange.com/questions/407204/program-stack-size)

# jquery - 滑动切换和切换文本时切换文本兄弟

> ID：13187899
> 
> 赞同：0
> 
> 时间：2012-11-02T01:13:39.180
> 
> 标签：jquery, toggle, slidetoggle, siblings

单击按钮时，我希望文本切换并说“阅读更多”或“阅读更少”。如果我单击另一个按钮，我希望上一个按钮返回其原始文本“阅读更多”

HTML：

```
 <div class="accordion">
  <div class="abtn">
    <input id="A-1" type="radio" value="A">
    <label class="chars" for="A-1">A</label>
    <div class="char-more">Learn More</div>
 </div>
<div class="acontent">Hello I am content A</div>

 <div class="abtn">
     <input id="B-1" type="radio" value="B">
     <label class="chars" for="B-1">B</label>
     <div class="char-more">Learn More</div>
 </div>
 <div class="acontent">Hello I am content B</div>

 <div class="abtn">
     <input id="C-1" type="radio" value="C">
     <label class="chars" for="C-1">C</label>
     <div class="char-more">Learn More</div>
   </div>
    <div class="acontent">Hello I am content B</div>
</div> 
```

jQuery：

```
 $(".abtn .char-more").click(function(){
       $(this).closest('.abtn').nextAll(".acontent").first().slideToggle("fast")
       .siblings(".acontent:visible").slideUp('fast');
       $(this).html("Read Less");
       $(this).siblings(".char-more").html("Read More");
   }); 
```

[提琴手](http://jsfiddle.net/zRqYM/31/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T02:26:32.280

使用以下 html 结构并向每个模块添加一个活动类，您可以简化如何找到激活的前一个模块（如果有的话），还可以使用 css 添加一些样式。阅读起来也比尝试调试不存在`nestaAll`的兄弟姐妹更直观一些

```
<div class="widgetWrap">
    <div class="abtn">
        <input id="A-1" type="radio" value="A">
        <label class="chars" for="A-1">A</label>
        <div class="char-more">Learn More</div>
     </div>
     <div class="acontent">Hello I am content A</div>
</div> 
```

您的代码将遵循如下模式：

```
$('.char-more').click(function(){ 
      var $prevActive=$('.activeClass');
     $prevActive.removeClass('activeClass').find('.char-more').text("Read Less");
     $prevActive.find('.acontent').slideUp(); 
     $(this).text("Read Less")
             .closest('.widgetWrap').addClass('activeClass').find('.acontent').slideDown(); 

}) 
```

# hadoop - Hadoop：用多棵树训练大数据（以GB为单位）（采样说N，比如x RandomTree）并测试

> ID：13187900
> 
> 赞同：1
> 
> 时间：2012-11-02T01:13:40.600
> 
> 标签：hadoop, mapreduce, machine-learning, classification, weka

我想写 MapReduce（可能是多轮！）

```
1\. Sample N records from Large data - for say X RandomTree
2\. Train each tree (totally X)
3\. And then test records on all these trees 
```

依次，

```
for X = 0 to 199:
    - sample N records from Large data
    - Train this tree
    - test for all test records 
```

这是我的作业问题，所以我只需要想法..！

我不确定

1.  在映射器中，我可以准确地采样 N 条记录并生成 200 个小型训练数据文件吗？
2.  为了测试所有 200 个*第一个选项* 的每条记录，我认为每个 reducer 将为所有树运行小测试（测试文件的一部分）。*第二个选项*我不确定，如何实现是，独立运行 200 棵树，测试文件在分布式缓存中，预测每个测试记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:37:37.707

这取决于你工作的正式程度。

*正式*的映射器不能准确地采样 N 条记录。因为它不能保留一个计数器，并且它不知道总数据大小。Hadoop 中的*实用映射器当然可以。*但他可能不知道他总共会收到多少张唱片。

但是正如您所说，这是一项家庭作业，我认为您不需要确保它恰好是 N。特别是，当您进行抽样时，恰好拥有 N 条记录有什么好处？

尝试以下操作：

1.  确定记录的总大小。
2.  让每个映射器向每棵树发出具有 N/D 可能性的每条记录（= 归约器的键）。
3.  让reducer根据它收到的所有记录训练树。

# javascript - 如何调用 SSRS URL 请求

> ID：13187902
> 
> 赞同：0
> 
> 时间：2012-11-02T01:14:16.807
> 
> 标签：javascript, ajax, reporting-services

有没有办法从我的 JavaScript AJAX 代码发出 SSRS URL 请求以获取文件夹列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:22:48.590

我过去也遇到过类似的问题。您需要使用[ReportExecution 服务](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.aspx)(reportexecution2005.asmx) 或 [ReportService](http://msdn.microsoft.com/en-us/library/ms152787%28v=sql.105%29.aspx) (reportservice2005.asmx)

两者的区别在于第一个允许您呈现报表，而第二个允许您操作报表服务器上的文件夹/文件。ReportService2005.asmx 有一个方法`ListChildren()`，我可以从 C# 中成功使用该方法。

# python - 有没有办法将 python 程序刻录到光盘上？

> ID：13187906
> 
> 赞同：1
> 
> 时间：2012-11-02T01:15:16.520
> 
> 标签：python, windows, burn

我做了这个很酷的几何和代数问题求解器，我想把它烧成交流给我的朋友，这样他们就可以像玩游戏一样运行它？关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:19:46.517

一种方法是将您的程序转换为`.exe`然后刻录它。有许多库可用于将 python 程序转换为`.exe`.，例如：

*   [cx_freeze](http://cx-freeze.sourceforge.net/)

*   [py2exe](http://www.py2exe.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:25:48.897

好吧，python 是一种解释型语言，它需要一个“解释器”（`python`程序）来读取 .py 文件并运行它。有帮助的是，有许多程序（如[py2exe](http://www.py2exe.org)）可以将 python 解释器和你的 python 文件捆绑到一个单独的 .exe 包中。（让您放一张 CD 并与您想要的任何人分享！）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T01:38:13.240

实际上，py2exe 可能是大多数正常用例的方法。

但是，如果您想将您的应用程序作为纯 Python 分发，您可以通过在您的应用程序中包含一个[可移植](http://www.portablepython.com/)的 Python（和所有必要的库）分发来实现。

# ruby-on-rails - 运行 cap deploy:cold 命令会出错

> ID：13187907
> 
> 赞同：1
> 
> 时间：2012-11-02T01:15:33.493
> 
> 标签：ruby-on-rails, capistrano

所以我一直在尝试在 Capistrano 的帮助下将我的 ruby​​ 部署在 Rails 网站上，当我运行`cap deploy:cold`这就是我得到的：

```
C:\Sites\blog>cap deploy:cold
  * ←[32m2012-11-02 00:47:49 executing `deploy:cold'←[0m
  * ←[32m2012-11-02 00:47:49 executing `deploy:update'←[0m
 ** transaction: start
  * ←[32m2012-11-02 00:47:49 executing `deploy:update_code'←[0m
    ←[33mexecuting locally: "git ls-remote git@github.com:averageAwesome/blog.gi
t master"←[0m
    ←[2;37mcommand finished in 2686ms←[0m
  * ←[33mexecuting "git clone --depth 1 git@github.com:averageAwesome/blog.git /
var/chroot/home/content/39/10025539/html/blow4849/blog/releases/20121102004752 &
& cd /var/chroot/home/content/39/10025539/html/blow4849/blog/releases/2012110200
4752 && git checkout -b deploy 700dd36e9e5476880fea92c48bffcfb6ff455fe8 && git s
ubmodule init && git submodule sync && export GIT_RECURSIVE=$([ ! \"`git --versi
on`\" \\< \"git version 1.6.5\" ] && echo --recursive) && git submodule update -
-init $GIT_RECURSIVE && rm -Rf  /var/chroot/home/content/39/10025539/html/blow48
49/blog/releases/20121102004752/.git && (echo 700dd36e9e5476880fea92c48bffcfb6ff
455fe8 >  /var/chroot/home/content/39/10025539/html/blow4849/blog/releases/20121
102004752/REVISION)"←[0m
    servers: ["188.121.54.128"]
Password:
    [188.121.54.128] executing command
 ** ←[35m[188.121.54.128 :: out] sh: git: command not found←[0m
    ←[2;37mcommand finished in 164ms←[0m
*** [←[34mdeploy:update_code←[0m] ←[34mrolling back←[0m
  * ←[33mexecuting "rm -rf  /var/chroot/home/content/39/10025539/html/blow4849/b
log/releases/20121102004752; true"←[0m
    servers: ["188.121.54.128"]
    [188.121.54.128] executing command
    ←[2;37mcommand finished in 131ms←[0m
failed: "sh -c 'git clone --depth 1 git@github.com:averageAwesome/blog.git /var/
chroot/home/content/39/10025539/html/blow4849/blog/releases/20121102004752 && cd
 /var/chroot/home/content/39/10025539/html/blow4849/blog/releases/20121102004752
 && git checkout -b deploy 700dd36e9e5476880fea92c48bffcfb6ff455fe8 && git submo
dule init && git submodule sync && export GIT_RECURSIVE=$([ ! \"`git --version`\
" \\< \"git version 1.6.5\" ] && echo --recursive) && git submodule update --ini
t $GIT_RECURSIVE && rm -Rf  /var/chroot/home/content/39/10025539/html/blow4849/b
log/releases/20121102004752/.git && (echo 700dd36e9e5476880fea92c48bffcfb6ff455f
e8 >  /var/chroot/home/content/39/10025539/html/blow4849/blog/releases/201211020
04752/REVISION)'" on 188.121.54.128 
```

任何想法可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:52:21.600

是的。这是重要的一行：

```
 ** ←[35m[188.121.54.128 :: out] sh: git: command not found←[0m 
```

您尚未`git`在部署服务器上安装，或者如果已安装，则它不在部署用户的路径中。

# javascript - 如何限制对函数的调用？

> ID：13187908
> 
> 赞同：3
> 
> 时间：2012-11-02T01:15:34.897
> 
> 标签：javascript, jquery

我目前正在寻找限制对函数的请求数量的最佳解决方案。

例子：

```
function CheckData() {
    if (d == "newdata") {
        GetData(2);
    }
}

function GetData(getcheck) {
    // Ajax Request here
} 
```

我正在寻找的解决方案是一种方法，当 CheckData 调用 GetData 时，有办法限制它调用 GetData 的频率，或者如果突然有大量请求通过，有没有办法让它说只得到最后一个请求？所以基本上它可以检查请求的频率，以便您可以说它现在停止了发送最后一个请求的大量请求吗？

我只是在寻找一种方法来限制 CheckData 调用 GetData 的频率，但最好的方法是尽量减少等待。

我查看了一些解决方案，但不确定如何将其应用于这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:18:35.037

**选项 1**
限制函数可以调用次数的通常模式是：

[节流](https://github.com/bestiejs/lodash/blob/master/lodash.js#L3416)和[去抖动](https://github.com/bestiejs/lodash/blob/master/lodash.js#L3209)

（你也可以在 underscore.js 中看到类似的实现）

**选项 2**
尽管对于 ajax，您可以创建一个**队列系统**来限制同一资源上的一个请求。

**选项 3**
或者，如果您的函数总是获得相同的资源，只需检查请求是否结束：

```
var GetData = (function() {
    var running = false;
    return function(getcheck) {
        // exit if ajax is running
        if ( running ) { return; }

        running = true;

        $.ajax(/* go */)
            .done(function() {
                /* do stuff with data */

                // call it over
                running = false;
            });
    }
}());

function CheckData() {
    if (d == "newdata") {
        GetData(2);
    }
} 
```

# javascript - 如何在没有构造函数的情况下在 Closure Compiler externs 中有一个类型

> ID：13187909
> 
> 赞同：2
> 
> 时间：2012-11-02T01:15:35.963
> 
> 标签：javascript, google-closure-compiler, google-closure

我正在尝试为没有构造函数的类型为 Google Closure Compiler 制作 externs。

我尝试了以下方法，但它给了我一个`Bad type annotation. Unknown type WindowsMediaActiveX.Cdrom`错误，因为没有任何东西告诉编译器这`WindowsMediaActiveX.Cdrom`是一种类型，而不仅仅是方法/属性的集合。

```
/**
 * @fileoverview Declares externs for the Windows media player ActiveX control.
 * @author Joshua Dwire
 * @suppress {duplicate}
 */

var WindowsMediaActiveX={};

/**
 * Methods and properties for accessing a CD or DVD in its drive.
 */
WindowsMediaActiveX.Cdrom={};

/**
 * Retrieves the CD or DVD drive letter.
 * @type {string}
 * @readonly
 */
WindowsMediaActiveX.Cdrom.prototype.driveSpecifier;

/**
 * Methods and properties for accessing a collection of CD or DVD drives.
 */
WindowsMediaActiveX.CdromCollection={};

/**
 * Retrieves the Cdrom object associated with a particular drive letter.
 * @param {string} driveSpecifier String containing the drive letter followed by a colon (":") character.
 * @returns {WindowsMediaActiveX.Cdrom}
 */
WindowsMediaActiveX.CdromCollection.prototype.getByDriveSpecifier=function(driveSpecifier){}; 
```

我知道我可以改变：

```
/**
 * Methods and properties for accessing a CD or DVD in its drive.
 */
WindowsMediaActiveX.Cdrom={}; 
```

到：

```
/**
 * Methods and properties for accessing a CD or DVD in its drive.
 * @constructor
 */
WindowsMediaActiveX.Cdrom=function(){}; 
```

但是如果我或其他人尝试使用`new WindowsMediaActiveX.Cdrom()`. 关于如何定义这个的任何想法？

对于那些想要了解更多信息的人，我正在开发一个媒体播放器，它将使用 Windows Media ActiveX 控件来播放媒体。我也在使用 Google Closure 编译器和库。我需要为播放器定义 externs 才能正常工作，但 ActiveX 控件使用的所有类型都没有构造函数。它们都是通过其他方法或通过在 html 中创建对象来创建的。我应该如何在 extern 文件中定义它？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:49:17.790

此模式的典型注释是：

```
/** @const */
var WindowsMediaActiveX = {};

/**
 * Methods and properties for accessing a CD or DVD in its drive.
 * @constructor
 * @private
 */
WindowsMediaActiveX.Cdrom=function(){}; 
```

注释表明`@private`构造函数不应该被直接调用。但是，当启用了 accessControls 警告组（带有 VERBOSE 警告）时，编译器只会报告该类型的直接实例化的警告。

编辑：更新答案以将所需的`@const`注释添加到命名空间。否则访问控制注释将被忽略。

# android - 新活动、标签和新应用：使用时

> ID：13187913
> 
> 赞同：2
> 
> 时间：2012-11-02T01:15:47.363
> 
> 标签：android, resources, tabs, views, cpu

简单的问题：

我什么时候应该使用新活动，什么时候新标签，什么时候新应用程序？我在这里从“资源”的角度询问。

我知道，显然，答案应该取决于应用程序。但是如何以及为什么？

示例：我正在编写一个画廊应用程序来显示我的图片。在一个“页面”中，我输入搜索正则表达式（与文件名匹配）。结果是一个文件名列表，每个文件名也有一个缩略图。然后，在检索结果后，应该打开第二个“页面”，显示带有缩略图的网格视图。单击缩略图时，我希望打开第三个“页面”，其中包含实际的大图片，全屏。

所以，我有 3 个“页面”。哪个是实现此功能的“最佳”方式：作为 3 个选项卡？作为 3 个在需要时打开的独立活动？或者也许最后两个“页面”作为单独应用程序中的选项卡？

在这里，“最佳”是指从资源/CPU/内存/滞后的角度来看。我知道每种方法都会提供不同的用户体验（例如，滑动对选项卡更有意义），但我不是指这个。我指的是**速度**。

我希望我的问题是有道理的，并且我让自己清楚......

谢谢！！！

L.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:15:51.270

使用标签没有区别。在 Android 中，即使您正在使用选项卡，在屏幕上的任何时刻也只有一个活动处于活动状态且可见，并且与其他选项卡关联的其他活动被隐藏起来，并且可以在资源变得不足时随时销毁。您应该仅将选项卡的使用视为随时可见的菜单，但缺点是它们占用了一些宝贵的屏幕空间。

是否使用不同的应用程序；就活动本身而言，没有太大区别：并不是因为活动与不同的应用程序相关联，所以当用户从一个活动切换到另一个活动时，它们会更早或更早地被销毁。但是，除了活动之外，应用程序本身也需要一些资源；因此很明显，启动与三个不同应用程序关联的三个活动将需要比与同一应用程序关联的三个活动更多的资源。

我从未见过应用程序所需的资源与其任何活动的启动进行比较；因此，与活动本身所需的资源相比，我无法告诉您向您的活动添加不必要的补充应用程序是否会占用更多资源。

# vb.net - 检测何时按下某些 Numpad 键，表单不在焦点上

> ID：13187914
> 
> 赞同：1
> 
> 时间：2012-11-02T01:15:51.777
> 
> 标签：vb.net

我很难找到一种方法来做到这一点。

我希望我的应用程序在用户按下数字键盘上的某个键时为用户显示一个消息框。主要问题是它必须在表格失焦的情况下完成。找不到使用 VB.NET 的任何方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:25:26.117

宣布 ：

```
Private Declare Function GetAsyncKeyState Lib "user32" (ByVal vKey As Integer) As Integer
Dim result As Integer 
```

表单加载：

```
Timer1.interval = 1
timer1.start() 
```

Timer1.tick ：

```
For i = 1 To 255 
result = 0 
result = GetAsyncKeyState (i)
If result = -32767 Then 
            If i = 103 Then
                MsgBox("Num 7")
            End If
End If 
Next i 
```

:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:00:32.793

您实际上在谈论的是全局键盘钩子，因为您想收听不是针对您的程序的消息。CodePlex 上有一个很好的库（[应用程序和全局鼠标和键盘挂钩库](http://globalmousekeyhook.codeplex.com/releases/view/73244)），它为.Net 实现了这个。

这是一个非常简单的示例，您需要下载上述库并将其添加`MouseKeyboardActivityMonitor`到您的参考文献中。

```
Imports MouseKeyboardActivityMonitor
Imports MouseKeyboardActivityMonitor.WinApi

Public Class Form1
    Private WithEvents myKeyboardHookManager As KeyboardHookListener
    Dim hookEnabled As Boolean
    Public Sub New()

        InitializeComponent()

        myKeyboardHookManager = New KeyboardHookListener(New GlobalHooker())
        myKeyboardHookManager.Enabled = True
    End Sub

    Private Sub HookManager_KeyDown(sender As Object, e As KeyEventArgs)
        Select Case e.KeyCode
            Case Keys.NumPad0 To Keys.NumPad9
                MessageBox.Show("KeyCode = " & e.KeyCode & vbCrLf & "Number = " & (e.KeyCode - 96))

        End Select

    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        If hookEnabled Then
            hookEnabled = False
            RemoveHandler myKeyboardHookManager.KeyDown, AddressOf HookManager_KeyDown
        Else
            hookEnabled = True
            AddHandler myKeyboardHookManager.KeyDown, AddressOf HookManager_KeyDown
        End If
    End Sub
End Class 
```

# java - 使用 Drive v2 Java API 将 CSV 上传到 Google Drive 电子表格

> ID：13187917
> 
> 赞同：1
> 
> 时间：2012-11-02T01:16:16.877
> 
> 标签：java, spreadsheet, google-drive-api

我正在尝试将 CSV 作为 Google 电子表格上传

我确实看到有一个请求参数 convert=true 可用

[谷歌开发者 - 插入。](https://developers.google.com/drive/v2/reference/files/insert)

有人可以帮助我如何在 Java API 中设置这个标志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:35:03.360

该类`Drive.Files.Insert`有一个`setConvert`方法，您可以在调用`execute`. 使用[file.insert 示例](https://developers.google.com/drive/v2/reference/files/insert)作为参考，您必须替换以下行：

```
File file = service.files().insert(body, mediaContent).execute(); 
```

和：

```
File file = service.files().insert(body, mediaContent).setConvert(true).execute(); 
```

# php - php login from cookie - 一些 SQL 注入预防示例

> ID：13187919
> 
> 赞同：2
> 
> 时间：2012-11-02T01:16:22.873
> 
> 标签：php, mysql, sql-injection, evernote

我编写了一个简单的 PHP 应用程序 (MyApp)，它允许用户使用 Evernote 的 PHP SDK 登录到他们的 Evernote 帐户。但是，在我的应用程序中，我想这样做：

1.  用户批准 Evernote 登录
2.  MyApp 接收#1 的 requestToken、requestTokenSecret 等。
3.  MyApp 将 #2 存储到 cookie 中，然后`$_SESSION`
4.  当用户稍后返回我的网站时，MyApp 通过 cookie 将他们登录

是的，我知道这种基于 cookie 的登录是不安全的。然而，我的应用程序不存储敏感数据。最简单的方法是什么？这是我的尝试：

```
//if cookie
if (isset($_COOKIE['requestToken'])) {
    $m = new mysqli(MYSQL_SERVER, MYSQL_USER, MYSQL_PASS, MYSQL_DB);
    $q = "SELECT uid FROM users WHERE token={$_COOKIE['requestToken']} and secret={$_COOKIE['requestTokenSecret']}";

   // cookie matches db?
   if ($result = $m->query($q)) { 
      $_SESSION['login']=TRUE;
      $result->close();
}
   else // no match
      $_SESSION['login']=FALSE; 
}
else { //no cookie - create
    if (EverNoteLogin()) {
       $year=time()+86400*365; //86400 = 1 day
       setcookie('requestToken',$_SESSION['requestToken'],$year); 
       setcookie('requestTokenSecret',$_SESSION['requestTokenSecret'],$year);
    }
} 
```

**建议改进版本**

```
//if cookie
if (isset($_COOKIE['requestToken'])) {
    //check db
    $m = new mysqli(MYSQL_SERVER, MYSQL_USER, MYSQL_PASS, MYSQL_DB);
    $s=$m->prepare("SELECT uid FROM user WHERE token=? AND secret=?");
    $s->bind_param('ss',$rt, $rs);
    $rt=$_COOKIE['requestToken'];
    $rs=$_COOKIE['requestTokenSecret'];
    $s->execute();
    $s->store_result(); 
    $n=$s->num_rows;
    //match db?
    if ($n) {
        if ($n==1) { // 1 match
                $s->bind_result($uid);
                $_SESSION['uid']=$uid;
                $_SESSION['login']=TRUE;
            }
        else
            $_SESSION['login']=FALSE; // >1 match not good
    }else
        $_SESSION['login']=FALSE;
}
else { //no cookie - create
    if (EverNoteLogin()) {
       $year=time()+86400*365; //86400 = 1 day
       setcookie('requestToken',$_SESSION['requestToken'],$year); 
       setcookie('requestTokenSecret',$_SESSION['requestTokenSecret'],$year);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:05:27.710

我认为从 SQL 注入的角度来看，使用准备好的语句的脚本版本看起来很合适。

我当然也建议您将 cookie 设置为安全 cookie（因此需要 https 连接）和仅 http cookie（从而防止访问 javascript 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T16:29:01.690

在您展示的情况下，使用`bind_param`是对 SQL 注入的有效防御。现在，cookie 中的值是什么并不重要，它们不能改变 SQL 语句的语义。

SQL 查询中的参数占位符*始终*用作单个标量值。如果该值恰好包含 SQL 语法，那没关系，它会像您将带引号的字符串放入查询中一样，并且每个特殊字符都完美转义。为了避免 SQL 注入漏洞，完全安全。

[您可以在我的演示文稿SQL 注入神话和谬误](http://www.slideshare.net/billkarwin/sql-injection-myths-and-fallacies)中或在我的书[SQL 反模式：避免数据库编程的陷阱中](http://pragprog.com/book/bksqla/sql-antipatterns)阅读有关 SQL 注入的更多信息。

然而，不安全的是将身份验证凭据以明文形式存储在 cookie 中。 **不要那样做。**
另请参阅[将密码存储在 cookie 中是否安全？](https://stackoverflow.com/questions/2100356/is-it-secure-to-store-passwords-in-cookies)或[如何在 PHP 中安全地存储包含敏感数据的 cookie？](https://stackoverflow.com/questions/11814350/how-to-store-cookies-containing-sensitive-data-securely-in-php)

# windows-8 - windows 8 store app和windows phone 8 app有什么关系

> ID：13187920
> 
> 赞同：2
> 
> 时间：2012-11-02T01:16:28.703
> 
> 标签：windows-8

我真的迷失了 Windows 8 商店应用程序和 Windows Phone 8 应用程序之间的关系。

谁能告诉我？

w8 商店应用程序>wp8 应用程序或 w8 商店应用程序=wp8 应用程序？

“windows 8 store app”的准确定义是什么？

网络应用程序？Windows 应用程序？移动应用程序？还是别的什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:22:55.837

`Windows Store Application`与**不同** `Windows Phone 8 Application`，它们完全不同（在 UI 和其他后端 api 方面）。`Windows Store Application`运行`Windows RT`，`Windows 8`而`Windows Phone 8`应用程序只运行在`Windows Phone 8`.

Windows Phone 8 和 Windows8 / Windows RT 的唯一相似之处在于它们具有相同的内核。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T10:08:40.650

这个 [page][1] 说得很好：“事实是它们相似但不同”。

[http://www.winsupersite.com/article/windows-phone-8/windows-phone-8-notes-sdk-143827](http://www.winsupersite.com/article/windows-phone-8/windows-phone-8-notes-sdk-143827)

# ios - 如何对字典数组进行排序

> ID：13187924
> 
> 赞同：-1
> 
> 时间：2012-11-02T01:16:49.630
> 
> 标签：ios, nsarray, nsdictionary

> **可能重复：**
> [如何对包含 NSDictionaries 的 NSArray 进行排序？](https://stackoverflow.com/questions/3361207/how-can-i-sort-an-nsarray-containing-nsdictionaries)

我有一系列字典。这就是我的字典的样子

```
MOD = 0;
MAU= 30;
MODN = "SOME WORD";
MODID = 518; 
```

我试过像这样对字典数组进行排序

```
sortedArray = [[ICArray valueForKey:@"MODN"] sortedArrayUsingSelector:@selector(localizedCaseInsensitiveCompare:)]; 
```

然而，这只给了我一个按字母顺序排列的MODN中的值数组......实际上我希望将每个字典排序到一个数组中。

任何帮助将不胜感激..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:07:20.373

您可以使用基于自定义块的比较器来查看每个字典中的值，并根据需要进行排序。像下面这样的东西应该适合你

```
NSArray *unsortedArray = @[@{@"MOD" : @(0), @"MAU" : @(30), @"MODN" : @"SOME WORD", @"MODID" : @(518)},
                           @{@"MOD" : @(0), @"MAU" : @(30), @"MODN" : @"ANOTHER WORD", @"MODID" : @(518)},
                           @{@"MOD" : @(0), @"MAU" : @(30), @"MODN" : @"THIRD WORD", @"MODID" : @(518)}];

NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:^(id obj1, id obj2) {
  return [[obj1 valueForKey:@"MODN"] localizedCaseInsensitiveCompare:[obj2 valueForKey:@"MODN"]];
}]; 
```

# python - 基本 Pygame 程序未执行

> ID：13187926
> 
> 赞同：2
> 
> 时间：2012-11-02T01:17:41.447
> 
> 标签：python, 2d, pygame, graphic

输入这个 pygame 代码进行动画测试，我期待一些错误，但程序根本不会执行：

第一部分导入模块

```
import sys
import os
import pygame
from pygame.locals import * 
```

初始化 pygame

```
pygame.init () 
```

加载精灵图像文件的类，然后加载声音

```
class Processes (object):
    @staticmethod
    def load_image (imagefile):
        image = pygame.image.load (imagefile)
        return image, image.get_rect () 
```

精灵类

```
class Sprite (pygame.sprite.Sprite):
    def __init__ (self):
        pygame.sprite.Sprite.__init__ (self)
        self.image, self.rect = Processes.load_image ('frame1.jpg') 
```

简单的动画功能——让生活更轻松

```
 def animation (self, key_event):
        if key_event == K_DOWN:
            self.rect.centery = self.rect.centery - 10

        if key_event == K_UP:
            self.rect.centery = self.rect.centery + 10

        if key_event == K_RIGHT:
            self.rect.centerx = self.rect.centerx + 10

        if key_event == K_LEFT:
           self.rect.centerx = self.rect.centerx - 10

        return self.rect 
```

主功能：

```
def main ():
    mecha = Sprite ()
    allsprites = pygame.sprite.RenderPlain ((mecha, )) 
```

游戏循环：

```
while True:
    Surface = pygame.display.set_mode ((400, 400))
    pygame.display.set_caption ('Animation Test')

    for event in pygame.event.get ():
        if event.type == KEYDOWN:
            mecha.animation (event.key)

        if event.type == QUIT:
            pygame.quit ()
            sys.exit (0)

    allsprites.draw (Surface)
    pygame.display.update () 
```

这是实际的“错误”

```
C:/Khan's Family/python/Bunnies Vs. Zombies/BvZ_Animtest.py 
```

现在这里是输出：

```
(Nothing)

C:/Khan's Family/python/Bunnies Vs. Zombies 
```

没有输出，这是我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:15:34.430

抱歉，我犯了定义“主”函数的愚蠢错误，但从未执行它。多谢你们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T18:57:36.143

当 pygame 出现错误时会发生什么，这就是我认为您所说的“不会执行”的意思。你必须点击 x 按钮来关闭它，错误将显示在 shell 中。在这个特定的程序上，错误是：

```
File "C:/Python32/projects/deletable.py", line 45, in <module>
    allsprites.draw (Surface)
NameError: name 'allsprites' is not defined 
```

你可以自己处理这些问题，但这就是发生的事情。

# php - PHP MYSQL - 根据它们是否匹配行号填充 HTML 表编号的行

> ID：13187927
> 
> 赞同：3
> 
> 时间：2012-11-02T01:17:43.187
> 
> 标签：php, html, mysql, sysadmin

所以，基本上我正在尝试制作数据中心驾驶室图。我们有一个 excel 电子表格，但这不容易更新，也不容易搜索。我在 MySQL 数据库中有三个表；db 是：机架，表是：机柜、设备和数据中心 - 每个表中的每一行都代表它是什么。机柜表有一列指定它在 U 中的高度（某些数据中心中的某些机柜比其他机柜高）。所以，当 php 绘制一个橱柜时，它会在相应的高度绘制橱柜。到目前为止，一切都在分组数据中心及其包含的机柜和它们各自的高度方面工作。我的问题是我似乎每个机柜不能安装多个设备。这是整个页面，MySQL DB 设置如下：

```
<SCRIPT LANGUAGE="JavaScript" type="text/javascript">
<!--
    function clickHandler(e)
    {
        var targetId, srcElement, targetElement;
        if (window.event) e = window.event; 
        srcElement = e.srcElement? e.srcElement: e.target;
        if (srcElement.className == "Outline")
        {
                targetId = srcElement.id + "d";
                targetElement = document.getElementById(targetId);

            if (targetElement.style.display == "none")
                {
                        targetElement.style.display = "";
                        srcElement.src = "images/minus.gif";
                    } 
            else
                {
                    targetElement.style.display = "none";
                    srcElement.src = "images/plus.gif";
                }
        }
    }
    document.onclick = clickHandler;
-->
</SCRIPT>
<noscript>You need Javascript enabled for this page to work correctly</noscript>
<?
function sql_conn()
{
    $username="root";
    $password="root";
    $database="racks";
    $server="localhost";

    @mysql_connect($server,$username,$password) or die("<h2 align=\"center\" class=\"red\">[<img src=\"images/critical.gif\" border=\"0\">] Unable to connect to $server [<img src=\"images/critical.gif\" border=\"0\">]</h2>");
    @mysql_select_db($database) or die("<h2 align=\"center\" class=\"red\">[<img src=\"images/critical.gif\" border=\"0\">] Unable to select $database as a database [<img src=\"images/critical.gif\" border=\"0\">]</h2>");
}

sql_conn();
$sql_datacenters="SELECT * FROM `datacenters`";

$sql_devices="SELECT * FROM `devices`";
$result_datacenters=mysql_query($sql_datacenters);
$result_devices=mysql_query($sql_devices);
$j=0;
echo "<table border='1' style='float:left;'>";
while ($datacenters_sqlrow=mysql_fetch_array($result_datacenters))
{
    echo "<tr><td>";
    echo "<h2 class='black' align='left'>";
    echo "<IMG SRC='images/plus.gif' ID='Out" . $j . "' CLASS='Outline' STYLE='cursor:hand;cursor:pointer'>"; // fancy icon for expanding-collapsing section
    echo " " . $datacenters_sqlrow['rack'] . ": " . $datacenters_sqlrow['cagenum'] . "</h2>"; // datacenter name and cage number
    echo "<div id=\"Out" . $j . "d\" style=\"display:none\">"; // opening of div box for section that is to be expanded-collapsed
    echo "<h3>" . $datacenters_sqlrow['notes'] . "</h3>"; // datacenter notes
    $sql_cabinets="SELECT * FROM `cabinets` WHERE `datacenter` = '$datacenters_sqlrow[0]' ORDER BY `cabinetnumber` ASC";
    $result_cabinets=mysql_query($sql_cabinets);
    while ($cabinets_sqlrow=mysql_fetch_array($result_cabinets))
    {
        $sql_devices="SELECT * FROM `devices` WHERE `datacenter` = '$datacenters_sqlrow[0]' AND `cabinet` = '$cabinets_sqlrow[1]' ORDER BY `ustartlocation` ASC";
        $result_devices=mysql_query($sql_devices);
        $num_devices=mysql_numrows($result_devices);
        echo "<table border='1' style='float:left;'>"; // opening of table for all cabinets in datacenter
        echo "<tr><td colspan='2' align='middle'>" . $cabinets_sqlrow[1] . "</td></tr>"; // cabinet number, spans U column and device name column
        while($row = mysql_fetch_array($result_devices))
        {
            $server = $row['devicename'];
            $ustart = $row['ustartlocation'];
        }
        for ($i = 0; $i < $cabinets_sqlrow[2]; $i++) // iterates through number of U in cabinet     
        {   
            $u = $cabinets_sqlrow[2] - $i; // subtracts current $i value from number of U in cabinet since cabinets start their numbers from the bottom up
            echo "<tr>";
            echo "<td width='15px' align='right'>$u</td>"; // U number
            echo "<td width='150px' align='middle'>";
            if ($u == $ustart) // determines if there is a device starting at this U
            {echo $server;} // device name
            else
            {echo "empty";} // empty space in cabinet
            echo "</td>";
            echo "</tr>";
        }
        $server="";
        $ustart="";

        echo "</table>"; // closes table opened in row 65
    }
    echo "</td></tr>";
    echo "</div>"; // close for div box that needs expanding-collapsing by fancy java
    $j++; // iteration for the fancy java expand-collapse
}
echo "</table>";
mysql_close();
?> 
```

这是 MySQL 设置：

```
-- phpMyAdmin SQL Dump
-- version 3.5.1
-- http://www.phpmyadmin.net
--
-- Host: localhost
-- Generation Time: Nov 02, 2012 at 02:13 AM
-- Server version: 5.5.25
-- PHP Version: 5.4.4

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";
SET time_zone = "+00:00";

--
-- Database: `racks`
--

-- --------------------------------------------------------

--
-- Table structure for table `cabinets`
--

CREATE TABLE `cabinets` (
  `id` tinyint(3) NOT NULL AUTO_INCREMENT,
  `cabinetnumber` varchar(25) NOT NULL,
  `numberofu` varchar(3) NOT NULL,
  `datacenter` tinyint(3) NOT NULL,
  KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=6 ;

--
-- Dumping data for table `cabinets`
--

INSERT INTO `cabinets` (`id`, `cabinetnumber`, `numberofu`, `datacenter`) VALUES
(1, '0101', '45', 2),
(2, '0102', '45', 2),
(3, '0101', '50', 1),
(4, '0102', '50', 1),
(5, '0103', '50', 1);

-- --------------------------------------------------------

--
-- Table structure for table `datacenters`
--

CREATE TABLE `datacenters` (
  `id` tinyint(3) NOT NULL AUTO_INCREMENT,
  `rack` varchar(20) NOT NULL,
  `cagenum` varchar(255) NOT NULL,
  `notes` longtext NOT NULL,
  KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=8 ;

--
-- Dumping data for table `datacenters`
--

INSERT INTO `datacenters` (`id`, `rack`, `cagenum`, `notes`) VALUES
(1, 'CAGE1', '', ''),
(2, 'CAGE2', '', ''),
(3, 'CAGE3', '', ''),
(4, 'CAGE4', '', ''),
(5, 'CAGE5', '', ''),
(6, 'CAGE6', '', ''),
(7, 'CAGE7', '', '');

-- --------------------------------------------------------

--
-- Table structure for table `devices`
--

CREATE TABLE `devices` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `devicename` varchar(255) NOT NULL,
  `datacenter` varchar(255) NOT NULL,
  `cabinet` varchar(255) NOT NULL,
  `frontorrear` tinyint(3) NOT NULL,
  `ustartlocation` varchar(255) NOT NULL,
  `usize` varchar(255) NOT NULL,
  `spare1` varchar(255) NOT NULL,
  `spare2` varchar(255) NOT NULL,
  `spare3` varchar(255) NOT NULL,
  KEY `id` (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

--
-- Dumping data for table `devices`
--

INSERT INTO `devices` (`id`, `devicename`, `datacenter`, `cabinet`, `frontorrear`, `ustartlocation`, `usize`, `spare1`, `spare2`, `spare3`) VALUES
(1, 'SERVER1', '1', '0101', 1, '33', '1', '', '', ''),
(2, 'SERVER2', '1', '0102', 1, '36', '1', '', '', ''),
(3, 'SERVER3', '1', '0101', 1, '40', '2', '', '', ''); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:24:05.900

为了直接解决这个问题（稍后我会谈到更多），您正在遍历设备的完整列表，*然后*- 在您完成所有设备的循环之后 - 您尝试显示它们。因此，您只显示被触摸的最终设备。

您当前的代码被截断，是：

```
while($row = mysql_fetch_array($result_devices)) {
    $server = $row['devicename'];
    $ustart = $row['ustartlocation'];
}
for ($i = 0; $i < $cabinets_sqlrow[2]; $i++) {
    $u = $cabinets_sqlrow[2] - $i;
    ...
    if ($u == $ustart) {
        echo $server;
    }
    ...
} 
```

如果我了解您要执行的操作，则需要将每个设备存储到“设备”数组中，并在循环的每次迭代中循环遍历它`for`。尝试类似：

```
$devices = array();
while($row = mysql_fetch_array($result_devices)) {
    $devices[] = array(
        'server' => $row['devicename'],
        'ustart' => $row['ustartlocation']
    );
}
for ($i = 0; $i < $cabinets_sqlrow[2]; $i++) {
    ...
    $output = 'empty';
    foreach ($devices as $device) {
        if ($u == $device['ustart']) {
            $output = $device['server'];
            break;
        }
    }
    echo $output;
    ...
} 
```

可以使用`ustartlocation`作为数组的索引来完成相同任务的更优雅的方法，但它需要对`ustartlocation`单个设备/服务器是唯一的：

```
$devices = array();
while($row = mysql_fetch_array($result_devices)) {
    $devices[$row['ustartlocation']] = $row['devicename'];
}
for ($i = 0; $i < $cabinets_sqlrow[2]; $i++) {
    ...
    echo (isset($devices[$u]) ? $devices[$u] : 'empty');
    ...
} 
```

这种方法将不再需要每次循环遍历设备列表，但同样 - 它要求`ustartlocation`是唯一的。

*旁注*（附加的，非特定于答案的评论）

1.  在代码的开头，您执行`$sql_devices="SELECT * FROM`devices`";`和`$result_devices=mysql_query($sql_devices);`，但从不使用此对象。它可以而且应该被删除，因为它是一个额外的（相当繁重的）查询。

2.  在第二个`while`循环中，您有该行`$num_devices=mysql_numrows($result_devices);`。没有 PHP-function `mysql_numrows()`，我相信这是[`mysql_num_rows()`](http://php.net/mysql_num_rows)函数的错字（或者你有一个自定义编写的函数来做同样的事情。此外，该`$num_devices`变量从未使用过，因此该行实际上可以完全删除。

3.  您正在使用旧的和已弃用的`mysql_`功能（请查看这些功能的任何文档页面顶部的警告消息；这里[`mysql_connect()`](http://php.net/manual/en/function.mysql-connect.php)供参考）。我以及社区都建议您升级到[`mysqli_`](http://php.net/manual/en/book.mysqli.php)or[`PDO`](http://php.net/manual/en/book.pdo.php)方法。

4.  您的代码对未经处理的 SQL 错误持开放态度，不仅限于 SQL 注入，因为您似乎没有直接从用户输入中获取输入，但也没有排除这个因素。例如，如果一个`cabinet`or`datacenter`值包含一个单引号会发生什么？由于您使用的是`mysql_`方法，我建议您[`mysql_real_escape_string()`](http://php.net/mysql_real_escape_string)在数据库调用中使用它们之前将它们包装起来：`$sql_cabinets="SELECT * FROM cabinets WHERE datacenter = '" . mysql_real_escape_string($datacenters_sqlrow[0]) . "' ORDER BY cabinetnumber";`

# c++ - -> 带有引用变量的运算符？(C++)

> ID：13187929
> 
> 赞同：-4
> 
> 时间：2012-11-02T01:18:06.903
> 
> 标签：c++

有没有在任何情况下使用 -> 运算符和引用变量/对象？

```
typedef ABC::Derived<Tmplt> THandle;
THandle m_oNew;    
m_oNew->m_u16GetState();    // This is the function call. Here "->" is used. 
```

这是“派生”类和函数定义：

```
template<class T>
class Derived;

class AnotherClass
{
    friend class Derived;

    inline AnimState m_u16GetState () const
    {
        return m_u16State;
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T01:39:00.907

如果使用 X->Y，则 X 必须是，a) 是指针变量，或者，b) '->' 运算符必须为 X 的类型重载

# c# - 扩展内容的替代方案，它存在于 JS 但不存在于 XAML？

> ID：13187932
> 
> 赞同：0
> 
> 时间：2012-11-02T01:18:31.003
> 
> 标签：c#, xaml, windows-8, visual-studio-2012

我想基本上扩展列表中的某些内容，并且我正在使用 XAML 和 C#。

我将如何调整列表中某个项目的大小、显示这些项目并将其他项目向下推？

[这里](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br212658.aspx)有一个例子：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:09:28.003

从您的示例来看，我认为您正在寻找在单选模式下设置的所谓[Accordion控件。](http://msdn.microsoft.com/en-us/library/microsoft.internal.pivot.controls.accordion%28v=vs.95%29.aspx)无论您使用什么进行开发，都应该可以使用它，至少这就是您的示例所显示的样子。希望这可以帮助 ：）

# php - PHP - 如果使用类函数，我们如何显示相关行的生成数字

> ID：13187935
> 
> 赞同：0
> 
> 时间：2012-11-02T01:18:34.720
> 
> 标签：php, mysql, auto-generate

如何为已从数据库中获取数据的表生成数字，这是我的情况：

//动作文件调用数据

```
$loads = array();
$loadno = $_GET['eig'];
$result = mysql_query("SELECT * FROM task_load WHERE load_no='$loadno' ORDER BY inv ASC");

while($row = mysql_fetch_assoc($result))
{
    $loads[] = new VerifyLoads($row);
}
        foreach($loads as $c){
             echo $c->markup_print();
        } 
```

// 类文件接收请求

```
 public function markup_print()
    {
    $d = &$this->data;

    return '
        <tr id="line-'.$d['id'].'">
            <td class="iprint">'.GENERATE_NUMBER_HERE.'</td>
            <td class="cprint">'.$d['customer_name'].'</td>
            <td class="cprint">'.$d['inv'].'</td>
            <td class="rprint">'.$d['value'].'</td>
            <td class="cprint">'.$d['ctn'].'</td>
            <td class="iprint"></td>
            <td class="iprint"></td>
            <td class="iprint"></td>
        </tr>       
        ';
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T02:54:36.473

虽然我不太确定您要生成什么*样*的数字，但根据您的输出，我假设您需要一个简单的行号来显示当前记录。在这种情况下，困难在于每一行都是`VerifyLoads`该类的一个单独实例。

要处理这个问题，你可以采取几种方法之一。最快和最简单的方法将起作用，因为您按照创建它们的顺序显示它们。该方法将涉及`VerifyLoads`类中的两个新变量；第一个是保持总行数的静态变量，第二个是保持当前实例计数的非静态变量：

```
class VerifyLoads {
    private $_lineTotal = 1;
    private $_lineNumber = -1;

    public function __construct() {
        $this->_lineNumber = self::$_lineTotal++;
    }

    public function markup_print() {
        $d = &$this->data;

        return '
            <tr id="line-'.$d['id'].'">
            <td class="iprint">'.$this->_lineNumber.'</td>
            <td class="cprint">'.$d['customer_name'].'</td>
            <td class="cprint">'.$d['inv'].'</td>
            <td class="rprint">'.$d['value'].'</td>
            <td class="cprint">'.$d['ctn'].'</td>
            <td class="iprint"></td>
            <td class="iprint"></td>
            <td class="iprint"></td>
            </tr>       
        ';
    }
} 
```

另一种方法是，如果您没有按照创建记录的相同顺序显示记录，则在类中也保留一个静态变量，但要有一个返回当前行的本地方法：

```
class VerifyLoads {
    private static $_lineNumber = 1;

    private function _currentLine() {
        return self::$_lineNumber++;
    }

    // .. code as normal ..
    // .. to access, just call $this->_currentLine()
} 
```

如果您需要使用第二种方法并使用它在同一页面上显示多个表，您可以实现一个`resetLineNumber()`方法来设置静态变量`1`。

另一方面，我可能完全误解了你的问题。如果是这种情况，请详细说明您需要显示什么样的数字，我会修改。

# nlp - 有判别训练的监督词性标注

> ID：13187936
> 
> 赞同：0
> 
> 时间：2012-11-02T01:18:50.553
> 
> 标签：nlp, svm, part-of-speech, pos-tagger

我必须实现一个经过判别训练的监督词性标注器，并且我一直在研究几种技术，包括最大似然、感知器和大边距 (SVM)。最后，在阅读了几篇研究论文中引用的一些实验结果后，我决定使用 SVM。我已经研究了一段时间，理论上有几件事似乎有点令人困惑。有人可以向我指出一些相关的阅读材料来实际实现，或者只是更清楚地说明如何使用维特比算法来实现它。

PS：我不是在寻求解决方案，而只是需要一些指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T12:52:49.347

我建议，阅读一些经典论文。

*   众所周知的基于三元组的方法，[TnT](http://delivery.acm.org/10.1145/980000/974178/p224-brants.pdf?ip=193.225.109.136&acc=OPEN&CFID=143714410&CFTOKEN=53138945&__acm__=1353329334_8766bcfd0694ca7c2edc0cb38b267e91)。
*   [Ratnaparkhi](http://acl.ldc.upenn.edu/W/W96/W96-0213.pdf)和他的[论文](http://www.ai.mit.edu/courses/6.891-nlp/READINGS/adwait.pdf)著名的最大熵方法：

以及在 Python NLTK 中使用 Maxent的分步构建[论文：](http://www.people.fas.harvard.edu/~gmalecha/pub/max-ent-pos.pdf)

你也可以学习一些开源软件，比如[Apache OpenNLP](http://opennlp.apache.org/)、[Python NLTK](http://nltk.org)或者我自己实现的[PurePos](https://github.com/ppke-nlpg/purepos)

对于使用 SVM，您可以查看[此处](http://www.cs.cornell.edu/people/tj/svm_light/svm_hmm.html)和[此处](http://www.lsi.upc.edu/~nlp/SVMTool/#)。

# javascript - 断言响应对象包含某些元素

> ID：13187937
> 
> 赞同：0
> 
> 时间：2012-11-02T01:18:57.593
> 
> 标签：javascript

我对 JavaScript 还是很陌生，并且负责过一些事情。我正在获取响应标头，并且在错误函数中需要一个 if 语句来检查它的存在，如果它不正确或不存在则返回错误。因此，在正确响应时，对象将是`data.info.http_code = 200`. 如果出现问题，`http_code`响应中不存在，所以我无法`http_code`基于`http_code`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:25:35.290

```
if (data != undefined && data.info != undefined && data.info.http_code == 200) {
    //It's ok here
}
else {
    //When either the code is different from 200 or doesn't exist
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T21:21:48.980

原来我需要的是 typeof...... 数据总是有结果，但很难知道结果中会包含什么。所以它看起来像这样：我想捕捉一个非常基本的错误，因为那里的某些东西未定义。

```
if(typeof data.result == "undefined"){
if (d.error) d.error(data);
} else {
if (d,success) d.success(data);
} 
```

# python - 定义 myDict = {}，然后 myDict[['a', 'b']] = 'foo'

> ID：13187939
> 
> 赞同：-3
> 
> 时间：2012-11-02T01:19:02.400
> 
> 标签：python, expression

> **可能重复：**
> [作为字典键的列表](https://stackoverflow.com/questions/6698307/a-list-as-a-key-for-a-dictionary)

`myDict = {}`, 那么是`myDict[['a', 'b']] = 'foo'`一个合法的 Python 表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:23:26.117

它不是。如有疑问，请尝试！运行此代码会产生：

```
dn52213m:~ austin$ python t.py 
Traceback (most recent call last):
  File "t.py", line 2, in <module>
  myDict[['a', 'b']] = "foo"
TypeError: unhashable type: 'list' 
```

您的代码创建了一个字典，然后尝试使用列表作为键将元素存储在字典中。不幸的是，列表不是字典中的有效键:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T01:21:30.660

不，因为列表不可散列，因此不能是字典键。

您可以使用

```
myDict['a', 'b'] = 'foo' 
```

因为你将使用一个元组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T01:21:47.040

不，不是，因为您尝试使用列表作为键，这会引发错误。字典只允许不可变对象作为键，所以你应该在这里使用元组。

```
In [9]: myDict = {}

In [10]: myDict[['a', 'b']] = 'foo'   #error
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)

/home/monty/Desktop/<ipython console> in <module>()

TypeError: unhashable type: 'list'

#using a tuple, works fine

In [11]: myDict[('a', 'b')] = 'foo'

In [12]: myDict
Out[12]: {('a', 'b'): 'foo'} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T01:25:13.090

这是不合法的，因为列表不能是字典键（因为它们是可变的）。但是元组（不可变）可以：

```
>>> myDict={}
>>> myDict[['a','b']] = 'foo'
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: unhashable type: 'list' 
```

这可能更接近您想要的：

```
>>> myDict['a','b'] = 'foo'
>>> myDict[('a','b')] = 'foo'  #same thing, slightly more explicit
>>> myDict
{('a', 'b'): 'foo'} 
```

# css - 使用引导程序，在两列设置中，当窗口变窄时表格重叠

> ID：13187944
> 
> 赞同：0
> 
> 时间：2012-11-02T01:19:40.497
> 
> 标签：css, twitter-bootstrap

我有一个相当简单的布局，有两行。第二行有两列，每列都有一个表格。当窗口很宽时，整个东西看起来很漂亮，但是当我开始使浏览器窗口变窄时，两个表开始重叠！

在较低分辨率的显示器上，这意味着浏览器的宽度可以是显示器宽度的 2/3，并且表格开始重叠！

如需演示，请查看[网站](http://fixsanity.targetcompid.com/)。点击“Sample data”，你会看到两个表中的数据是重叠的。专门寻找具有较长值的行。

我在 Chrome/Windows 中一直看到这一点。

这仅仅是引导程序的限制（正如我读过一些人抱怨的那样）还是我做错了什么？我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:43:53.100

你基本上在你的问题中确定了问题。“消息”行的长值最终在较窄的分辨率下太长。我的建议是从“.badge, .label”选择器中删除“white-space: nowrap”。这将有助于防止他们从桌子的一侧和他们适合的更广泛的分辨率中脱颖而出。

有道理？

# javascript - jQuery findClass 和 addClass

> ID：13187945
> 
> 赞同：0
> 
> 时间：2012-11-02T01:19:43.180
> 
> 标签：javascript, jquery, html

我正在编写一个程序，其中有 16 个 div，每个 div 都有一个唯一的类名，范围从 11、12、13... 44。现在我编写了一个数学函数来从该数组中随机选择一个数字。我想知道如何找到具有随机选择的类名的 div，然后我需要向这个 div 添加一个类。

下面的代码，

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <style>
            .row {
                width:520px;
                height:120px;
                border-color:#333;
                border-width:1px;
            }
            .sq-color {
                margin: 2px;
                width:120px;
                height:120px;
                float:right;
                background-color:#6C0;
            }
            .mole {
                background-image:url(images.jpg);
            }
        </style>
        <script>
            var items = Array(11, 12, 13, 14, 21, 22, 23, 24, 31, 32, 33, 34, 41, 42, 43, 44);
            var random = items[Math.floor(Math.random() * items.length)]
        </script>
        <title>Untitled Document</title>
    </head>
    <body>
        <div class="row">
            <div class="sq-color 11"></div>
            <div class="sq-color 12"></div>
            <div class="sq-color 13"></div>
            <div class="sq-color 14"></div>
        </div>
        <div class="row">
            <div class="sq-color 21"></div>
            <div class="sq-color 22"></div>
            <div class="sq-color 23"></div>
            <div class="sq-color 24"></div>
        </div>
        <div class="row">
            <div class="sq-color 31"></div>
            <div class="sq-color 32"></div>
            <div class="sq-color 33"></div>
            <div class="sq-color 34"></div>
        </div>
        <div class="row">
            <div class="sq-color 41"></div>
            <div class="sq-color 42"></div>
            <div class="sq-color 43"></div>
            <div class="sq-color 44"></div>
        </div>
    </body>
</html> 
```

* * *

感谢大家。我尝试了代码并相应地插入，但没有任何变化。似乎没有 DIV 显示 .mole 类中给出的背景图像。

下面是代码。请让我知道我在哪里恭维。我更正了命名约定并将字母“c”添加到类名中。我使用类只是为了有更多的灵活性。

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <style>
        .row {
            width:520px;
            height:120px;
            border-color:#333;
            border-width:1px;
        }
        .sq-color {
            margin: 2px;
            width:120px;
            height:120px;
            float:right;
            background-color:#6C0;
        }
        .mole {
            background-image:url(images.jpg);
        }
    </style>
    <script>
        var items = Array(11, 12, 13, 14, 21, 22, 23, 24, 31, 32, 33, 34, 41, 42, 43, 44);
        var random = items[Math.floor(Math.random() * items.length)]

         $('.c' + random).addClass('mole');
    </script>
    <title>Untitled Document</title>
</head>
<body>
    <div class="row">
        <div class="sq-color c11"></div>
        <div class="sq-color c12"></div>
        <div class="sq-color c13"></div>
        <div class="sq-color c14"></div>
    </div>
    <div class="row">
        <div class="sq-color c21"></div>
        <div class="sq-color c22"></div>
        <div class="sq-color c23"></div>
        <div class="sq-color c24"></div>
    </div>
    <div class="row">
        <div class="sq-color c31"></div>
        <div class="sq-color c32"></div>
        <div class="sq-color c33"></div>
        <div class="sq-color c34"></div>
    </div>
    <div class="row">
        <div class="sq-color c41"></div>
        <div class="sq-color c42"></div>
        <div class="sq-color c43"></div>
        <div class="sq-color c44"></div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:22:27.413

干得好：`$("." + random).addClass("someClass");`

顺便说一句，如果这些数字是唯一的，那么您最好使用 ID，因为选择器更快。此外，这意味着该数字必须是唯一的。注意 - 数字 ID 仅对 html5 文档类型有效：`<!doctype html>`

该选择器将是：`$("#" + random).addClass("someClass");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:22:52.107

您可以使用任何想要生成 jQuery 选择器字符串的连接方法，只要最终结果对于 jQuery 选择器实践是有效的

```
$('.' + random).addClass('someClass') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T01:29:24.650

请记住，您不应该只使用数字作为类名/id，另请参阅：[HTML 中 id 属性的有效值是什么？](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T01:24:36.630

```
$('.'+random).addClass('yourclass'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T01:28:18.330

阅读您的问题，我认为您要问的是切换课程以显示选择的随机数

```
$(".sq-color " + random).toggleClass("someClass"); 
```

# java - 将协议缓冲区对象从文件加载到集合中

> ID：13187956
> 
> 赞同：3
> 
> 时间：2012-11-02T01:21:25.963
> 
> 标签：java, protocol-buffers

如果我有一个文件，其中一个接一个地保存了许多协议缓冲区消息，我如何将该文件读回 Java 中的集合？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T02:33:31.100

你是如何界定 ​​protobuf 消息的？

如果您只是一个接一个地编写它们，不使用`writeDelimitedTo`就无法将它们读回，这不是协议缓冲区支持的格式。

如果你确实 use `writeDelimitedTo`，我想你可以找出相应的 parse 方法。

# ruby-on-rails - 使用 Heroku 将 Zip 上传到 S3，upzip 并允许其他人使用唯一链接访问提取的文件

> ID：13187959
> 
> 赞同：3
> 
> 时间：2012-11-02T01:21:32.267
> 
> 标签：ruby-on-rails, heroku, amazon-s3

我有一个有趣的情况，用户将上传一个 zip 文件，该文件需要移动到 S3，解压缩并通过唯一链接向其他用户公开。

例如：

我上传了 awesome.zip（假设它包含自己的迷你网页），它被移动到 S3 并解压缩并放入 123456/。然后，如果我想与某人分享我的迷你网页，他们可以访问 www.mysite.com/{username}/item/123456。

这可能吗？谁能给我任何关于如何去做的指导？任何事情都会非常感激。

谢谢，乔钦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T03:38:11.210

文件无法在 S3 上解压缩。这是我上次检查的平台的限制。我处理压缩文件的方式是在我的本地服务器上提取它们并将提取的文件上传到 s3。您可以使用 aws-sdk gem（亚马逊官方 gem）将提取的文件上传到 s3。

# objective-c - 为什么 NSMakePoint 在一个地方失败而在我的程序的其他地方工作？

> ID：13187961
> 
> 赞同：3
> 
> 时间：2012-11-02T01:21:36.510
> 
> 标签：objective-c, function, bezier

这可能有一个我应该立即看到的明显答案，但我什至没有找到一个晦涩难懂的答案。请帮忙。它甚至让我想怀疑一个错误，但这不太可能。

我正在尝试制作一个在 zz 点交叉的函数，它可以部分工作。

在函数末尾的断点处停止时，将鼠标悬停在 Debug 中的变量上会显示值。我将来自 NSMakePoint 的结果 z1 和 z2 作为注释插入到相应的行中。

为什么 NSMakePoint 在一个地方失败而在我的程序的其他地方工作？

第一次出现应将 zz.x 增加 10；而是将 zz.y 增加 10。
第二次出现应将 zz.x 减少 10；而是将 zz.y 递减 10。

在接下来的两次事件中，它工作正常。

首先，我尝试在参数中增加 x ，如顶部注释所示；然后我尝试在参数之前增加 x ，如图所示。我试过浮动以及 CGFloat。

这里有什么问题？

```
#import "untitled.h"

CGFloat xx,yy;
NSPoint z1,z2, zz; 
    NSBezierPath *path;

void markpoint (NSPoint zz){    //zz=   133.333, 100  OK

//  z2= NSMakePoint(zz.x+10,zz.y);  I tried this first and failed;  
    then I broke out the increment as follows:

    xx=zz.x+10;         //xx=   143.333  OK
    yy=zz.y;            //yy=   100      OK
    z1= NSMakePoint(xx,yy);     //z1=   133.333,110 but should be 143.333,100
    [path moveToPoint:z1];
    z2= NSMakePoint(zz.x-10,zz.y);  //z2=   133.333, 90 but should be 123.333,100
    [path lineToPoint:z2];

    z1= NSMakePoint(zz.x,zz.y+10);  //z1=   133.333, 110 OK
    [path moveToPoint:z1];
    z2= NSMakePoint(zz.x,zz.y-10);  //z2=   133.333,  90 OK
    [path lineToPoint:z2];
} 
```

附带问题：我找不到任何地方断言或否认 float 和 CGFloat 在 Bezier 系列函数和 Cocoa 中的 NSPoint 中是可互换的。他们是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:40:06.283

始终验证输入。验证传递给函数的参数是相关值。一种方法是在开始时始终初始化为已知值。这似乎是基本的 C 卫生。仅声明原始 C 类型的全局变量并不能保证它具有任何值，而只能保证在内存中为特定内存中该类型的大小留出一些空间

CGFloat 是在头文件中声明的 typedef。您需要熟悉如何在标题中查找这些内容，因为这将成为一项非常宝贵的技能。XCode 让它变得超级简单，但您还需要阅读 Xcode 帮助.. ;)

CGFloat 是双精度或浮点数，具体取决于硬件。所以，这是一个 ifdef typedef ...

# java - 如何在 App Engine、Java 上实现自定义 404 错误页面？

> ID：13187970
> 
> 赞同：15
> 
> 时间：2012-11-02T01:22:38.343
> 
> 标签：java, google-app-engine, http-status-code-404

您好我正在尝试为应用引擎上的 404 not found 错误设置静态错误页面。

根据[https://developers.google.com/appengine/docs/java/config/webxml#Error_Handlers](https://developers.google.com/appengine/docs/java/config/webxml#Error_Handlers)：它说 404 无法自定义。

根据： [https](https://developers.google.com/appengine/docs/java/config/appconfig#Custom_Error_Responses) ://developers.google.com/appengine/docs/java/config/appconfig#Custom_Error_Responses它似乎也不支持 404。

但是，[https://groups.google.com/forum/?fromgroups=#](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/3C-pY5ta2HQ) !topic /google-appengine-java/3C-pY5ta2HQ 似乎表明可以自定义 404 错误页面。我现在很困惑。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-04T03:03:53.400

我意识到在本地开发服务器上运行应用程序时会发生此问题。但是，当我将应用程序部署到应用程序引擎时。我可以看到使用 web.xml 配置的 404 错误页面。感谢你的帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T10:18:52.397

为什么不将 Java EE <error-page> 条目用于这些目的？

在您的 web.xml 中：

```
<error-page>
    <error-code>404</error-code>
    <location>/app/error/404</location>
</error-page>
....
<error-page>
    <error-code>500</error-code>
    <location>/app/error/500</location>
</error-page> 
```

您可以将它与 Spring 结合使用，并获得一个通用的错误控制器，例如：

```
....   
@Controller
public class ErrorController {

@RequestMapping(value = "/error/{errorCode}")
public final String errorCode(
        @PathVariable("errorCode") final String errorCode,
        final ModelMap modelMap) {
    modelMap.put("statusCode", errorCode);
    return "redirect:/ui/error.htm";
} 
```

和你的类似jsp的文件：

```
<h2>Error!!!</h2>
....
<h3>Status code: #{param.statusCode}</h3> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T08:17:09.487

您是对的，这目前在 App Engine 上的 Java 中不可用。但是，Python 有一个解决方法。有关这方面的示例，您可以查看[GAE Boilerplate](https://github.com/coto/gae-boilerplate)。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-24T16:19:15.947

我已经能够在本地开发服务器上的 App Engine SDK 版本 1.6.1 及更早版本中成功重定向 404 错误。但是，更新到 GAE SDK 1.7.5 后，我无法让它在本地工作。从那以后，我读到上面提到的 404 目前不支持它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-19T13:03:16.620

来自 Google App Engine 标准环境文档（2018 年 8 月 19 日）： [![在此处输入图像描述](../Images/b9b369e16d8c9c3e1a6630ed45adf7f0.png)](https://i.stack.imgur.com/8gGoW.png)

简而言之，您必须具有此 URL 的 servlet 映射，如下所示：

```
<web-app>
    <servlet>
        <servlet-name>404</servlet-name>
        <jsp-file>/404.jsp</jsp-file>
    </servlet>
    <servlet-mapping>
        <servlet-name>404</servlet-name>
        <url-pattern>/404</url-pattern>
    </servlet-mapping>

    ...

    <error-page>
        <error-code>404</error-code>
        <location>/404</location>
    </error-page>
</web-app> 
```

此配置按预期工作。尝试获取不存在的页面时显示错误页面（例如 www.domain.com/unknownPage）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-07T01:30:38.580

在应用引擎版本 1.9.48 中，这适用于云：

[网页.xml]

```
<web-app>

    ...    

    <error-page>
        <error-code>404</error-code>
        <location>/static-error.html</location>
    </error-page>
</web-app> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-21T04:28:43.030

它的官方..它将不受支持： [https ://cloud.google.com/appengine/docs/flexible/java/configuring-the-web-xml-deployment-descriptor](https://cloud.google.com/appengine/docs/flexible/java/configuring-the-web-xml-deployment-descriptor)

# html - 社交按钮之间的随机间距？

> ID：13187975
> 
> 赞同：1
> 
> 时间：2012-11-02T01:23:17.630
> 
> 标签：html, css

我无法弄清楚为什么我在 twitter 和 G+ 按钮之间有一个随机空间。这是一个例子：http: [//i951.photobucket.com/albums/ad356/osjoe2/Snip2.png](http://i951.photobucket.com/albums/ad356/osjoe2/Snip2.png)

CSS：

```
 #share { margin:0 30px; }
   #share ul { margin:0 0 10px 0; padding:0 0 5px 0; list-style:none; border-bottom:1px solid #eee }
   #share li { display:inline; vertical-align: top; } 
```

HTML：

```
 <div id="share">
    <ul>

    <li style="padding-bottom:5px">
    {exp:fbc:like
    href="{url_title_path="shout/comments"}"
    send="false"
    layout="button_count"
    width=""
    show_faces="false"
    action="like"
    colorscheme="light"
    font="arial"
    }
    </li>

    <li><g:plusone size="medium"></g:plusone></li>

    <li><a href="https://twitter.com/share" class="twitter-share-button">Tweet</a></li>

    </ul>
    </div> 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T01:34:59.887

不同的社交按钮，一旦动态添加到您的页面，就会有自己的宽度和高度属性。

您应该为每个类`<li>`（例如`.social-facebook`, `.social-twitter`）指定一个唯一的类，并相应地调整它们的宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T01:44:35.343

很高兴从 3 个社交按钮那里看到整个 html 和 css。像这样很难分辨是推特还是 g+

# javascript - D3 ...在鼠标悬停时出现一个圆圈，在鼠标悬停时消失

> ID：13187979
> 
> 赞同：2
> 
> 时间：2012-11-02T01:24:00.580
> 
> 标签：javascript, d3.js

我有一个折线图。当用户将鼠标悬停在该线上的某个点上时，我想显示一个圆圈（请参阅[this](http://nvd3.com/ghpages/linePlusBar.html)）

我没有使用nvd3，而只是d3。我有：

```
svg.selectAll(".dot")
      .data(data)
      .enter().append("circle")
      .attr("r", 1)
      .attr("cx", function(d) { return x(d.number); })
      .attr("cy", function(d) { return y(d.people); })
      .style("fill", "white").style("stroke","black")
      .style("display", "none")
      .on('mouseover', function() {
        d3.select(this).style("display","inline");
  })
      .on('mouseout', function() {
        d3.select(this).style("display", "none");
      }); 
```

我最初将圆圈的显示设置为“无”，然后当用户用鼠标悬停在圆圈上时显示为可见。然后，当他们鼠标移出时，我再次将其隐藏。但是，当我将鼠标悬停时，圆圈没有出现。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T01:26:42.200

如果圆圈设置为无显示，则一开始就没有任何东西可以捕捉到事件。尝试使用另一个元素作为圆圈的触发器。

# java - HttpUrlConnection 不会获得页面

> ID：13187981
> 
> 赞同：0
> 
> 时间：2012-11-02T01:24:23.073
> 
> 标签：java, android, web

试图获取页面

> http:www.thecinemas.aw/main/?date=2012-11-01

没有任何作用。但

> [http://www.thecinemas.aw/main/movies/details.html?id=1421](http://www.thecinemas.aw/main/movies/details.html?id=1421)

确实有效。

我能看到的唯一区别是`-`在第一个中使用减号 ( )。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T01:30:33.087

第一个 URL 应该以 开头`http://`，否则协议前缀无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T01:30:26.187

采用：

```
URI uri = new URI("http", "www.thecinemas.aw", "/main/?date=2012-11-01",null);
URL url = uri.toURL(); 
```

# ocaml - 是否可以使用 oasis 生成推断的 mli 文件？

> ID：13187983
> 
> 赞同：2
> 
> 时间：2012-11-02T01:24:27.710
> 
> 标签：ocaml, ocamlbuild

我意识到您可以使用 ocamlbuild xxx.inferred.mli 一个一个地生成推断的 mli 文件，但我希望这可以为我自动完成（也可以查看 ocaml 推断的类型并使用这些 mli 作为我自己的基础）。当然，我想跳过我自己已经指定了 mli 的模块。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:55:20.417

我认为 Oasis 不可能做到这一点，而且这不是 Oasis 的工作，因为这高度依赖于构建系统。

您应该考虑从已编译的接口文件 (.cmi) 生成 mli 文件，因为 cmi 已经编译，因此与系统无关。我不知道这样的工具是否已经存在，但对于熟悉 OCaml 编译器内部的人来说，它应该很容易，具有以下功能：

*   Cmi_format.read_cmi 加载 cmi 文件作为签名。
*   Printtyp.signature 以人类可读的形式 (=mli) 打印加载的签名。

# javascript - jQuery slideToggle 表滞后然后切换（无幻灯片）

> ID：13187986
> 
> 赞同：1
> 
> 时间：2012-11-02T01:24:52.080
> 
> 标签：javascript, jquery, html, jquery-ui

我有一个表格，它有一个标题行、一个“项目”行（如果你愿意的话）和一个详细信息行。项目行和明细行会重复，所以表中的每一个偶数行（即表中的第二行是第一个“项目”行）都是一个项目行，每个奇数行都是一个“详细信息”行，但标题除外。

下面的脚本有效，除了 jQuery slideToggle 不滑动。在展开动作中，它只是打开，而在折叠动作中，它需要一秒钟然后消失。

见下面的表结构和脚本：[jsFiddle](http://jsfiddle.net/we5ue/)（点击“Column[1,2,3]行）

```
<script type="text/javascript">
    $(document).ready(function () {
    $("#sometable tr:odd").addClass("odd");
    $("#sometable tr:not(.odd)").hide();
    $("#sometable tr:first-child").show();

    $("#sometable tr.odd").click(function () {
        $(this).next("tr").slideToggle("slow");
    });
}); 
```

```
<table id="sometable">
<tr>
    <th>
        Header1
    </th>
    <th>
        Header2
    </th>
    <th>
        Header3
    </th>
</tr>
<tr>
    <td>
        Column1
    </td>
    <td>
        Column2
    </td>
    <td>
        Column3
    </td>
</tr>
<tr>
    <td colspan="3">
        <p>Details about item 1</p>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:50:28.693

`slideToggle`不能很好地与`tr`. 我相信这与`overflow: hidden`不使用`tr`.

最简单的解决方法是简单`slideToggle`的`p`而不是`tr`.

[http://jsfiddle.net/hEyDN/4/](http://jsfiddle.net/hEyDN/4/)

# linux - 别名在 Unix 中的查找目录

> ID：13187987
> 
> 赞同：3
> 
> 时间：2012-11-02T01:25:03.697
> 
> 标签：linux, find, alias, csh, tcsh

我试过类似的东西：

```
alias fdi 'find . -type d -iname "*\!^*"' 
```

但这只会查找作为参数传递的确切名称。

`fdi abc`只会输出：

```
./d/abc 
```

不是这个：

```
./d/greabcyup 
```

我不只是在寻找确切的名字。它还应该显示`./d/greabcyup`

更新：我做了

```
echo $0 
```

tcsh

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T02:29:31.560

这是 c-shell 还是 tcsh？

简而言之， 我用[orielly lunix 进行了](http://docstore.mik.ua/orelly/linux/lnut/ch08_06.htm)dbl-checked ，`!^`这意味着它是当前命令行中的第一个单词，所以我不认为它在做你想做的事。`echo abc def !^`您可以使用cmd-line自己检查该理论。（我手边没有 csh）。

但很明显，当您创建别名时，它并没有获得嵌入在别名中的第一个单词 (alias) 或别名的第一个单词 (find)。这可能是关于 csh 的评估顺序。

一般来说，大多数 shell（不仅仅是 csh）中的任何别名都不能接受参数。它将在最后附加调用中包含的任何内容。因此，您的别名会扩展， abc 参数为

```
find . -type d -iname abc 
```

你得到的结果，支持这一点。（通过将顶部的 hash-bang 行更改为 ，打开 csh 调试，您可能会看到一些有用的信息`#!/bin/csh -vx`）

这就是为什么其他外壳具有功能的原因，

```
 function fdi() {
     find . -type d -iname "$@"
 } 
```

如果您因为政策原因不能使用其他 shell（bash、ksh、zsh 都是强大的编程语言），并且您将定期使用 csh，请务必拿起一份《Unix C shell 现场指南》 ，盖尔和保罗安德森。一本写得非常出色的书。

IHTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-07T06:28:07.913

别名`"*\!^*"`中的匹配模式未按预期解释。字符序列`\!^*`是有效的 shell 历史替换。换句话说，shell 使用最后一个星号作为 shell 历史替换的一部分，而不是将它传递给“find”命令。当您运行“fdi abc”时，正在执行的是

```
find . -type d -iname "*abc" 
```

最后一个 * 不见了。您可以通过运行“fdi abcyup”来确认它应该返回

```
./d/greabcyup 
```

您可以通过在别名定义中添加另一个星号来修复它

```
alias fdi 'find . -type d -iname "*\!^**"' 
```

问题在于，如果您为别名提供多个参数，则历史替换将消耗所有参数。如果您正在寻找名称中带有空格的目录，这可能就是您想要的。但更正确的做法是将历史替换与星号隔离，如下所示：

```
alias fdi 'find . -type d -iname "*\!{^}*"' 
```

# version-control - 当范围包括分支时，mercurial 的 bisect 是如何工作的？

> ID：13187988
> 
> 赞同：2
> 
> 时间：2012-11-02T01:25:06.480
> 
> 标签：version-control, mercurial, bisect

如果 bisect 范围包括多个分支，hg bisect 的搜索是如何工作的。它是否有效地将每个子分支一分为二（我认为这将是低效的）？

例如，感激地借用[这个相关问题](https://stackoverflow.com/questions/10456420/how-to-automate-hg-bisect-extend-to-follow-common-ancestors)的答案中的图表，如果二等分首先到达“好”右侧分支上的变更集 7 会怎样。

```
@  12:8ae1fff407c8:bad6
|
o  11:27edd4ba0a78:bad5
|
o    10:312ba3d6eb29:bad4
|\
| o  9:68ae20ea0c02:good33
| |
| o  8:916e977fa594:good32
| |
| o  7:b9d00094223f:good31
| |
o |  6:a7cab1800465:bad3
| |
o |  5:a84e45045a29:bad2
| |
o |  4:d0a381a67072:bad1
| |
o |  3:54349a6276cc:good4
|/
o  2:4588e394e325:good3
|
o  1:de79725cb39a:good2
|
o  0:2641cc78ce7a:good1 
```

然后它会看起来只在 7 到 12 之间，错过我们关心的真正的第一坏吗？（因此使用“哑”数字顺序）或者它是否足够聪明以使用完整的地形并知道第一个坏可能在右侧分支上低于 7，或者仍然可能在左侧分支上的任何位置。

我的问题的目的是（a）只是为了更好地理解算法，以及（b）理解我是否可以自由地扩展我的初始平分范围，而无需认真考虑我去哪个分支。我一直处于[高分支平分情况](https://stackoverflow.com/questions/12786890/does-a-bisect-in-version-control-benefit-from-using-a-rebaseif-workflow)，每次测试后它一直要求我扩展到下一次合并之外，因此整个过程基本上是 O(n)。我想知道我是否可以将第一个“好”标记扔回一些合并巢而不考虑太多，以及这是否会节省时间并给出正确的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T16:07:30.680

引用[*Mercurial：权威指南*](http://hgbook.red-bean.com/read/finding-and-fixing-mistakes.html)：

> hg bisect 命令知道 Mercurial 项目修订历史的“分支”性质，因此它在处理存储库中的分支、合并或多个头时没有问题。它可以通过一个探针来修剪整个历史分支，这就是它如此高效运行的方式。

* * *

完成这项工作的代码在[hbisect.py](http://selenic.com/repo/hg-stable/file/fac6d36d04cb/mercurial/hbisect.py)中，实际上是查看来自已确定状态的每个节点的后代树和祖先树。

在我看来，选择测试的变更集是通过在尚未测试的图表中加权“中心程度”来选择的（即按祖先与非祖先一分为二，而不是按年表）：

```
108     x = len(a) # number of ancestors
109     y = tot - x # number of non-ancestors
110     value = min(x, y) # how good is this test? 
```

# fft - 如何通过离散傅立叶变换找到音频中的所有频率？

> ID：13187992
> 
> 赞同：1
> 
> 时间：2012-11-02T01:25:14.277
> 
> 标签：fft, dft

我想分析一些音频并尽可能地将其分解为正弦波。我以前从未使用过 FFT，只是在做一些初步阅读，了解一些概念和可用的库，如 FFTW 和 KissFFT。

我在这一点上感到困惑......听起来DFT / FFT只会在某些频率下为您提供正弦幅度，即基频的倍数。例如，如果我以通常的 44100 Hz 对音频进行采样，并且我选择了一大块 256 个样本，那么该卡盘可能适合 44100/256=172Hz 的一个周期，并且 DFT 将给我 172 的正弦幅度， 172*2, 172*3 等等，对吗？那么你如何找到其他频率的强度呢？我想看到从 20Hz 到大约 15Khz 的频谱，以大约 1Hz 的增量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T11:24:46.353

傅立叶分解允许您获取任何时间函数并将其描述为正弦波的总和，每个正弦波具有不同的幅度和频率。但是，如果您想使用 DFT 解决此问题，则需要确保在频域中有足够的分辨率以区分不同的频率。一旦你有了它，你就可以确定哪些频率在信号中占主导地位，并创建一个由与这些频率相对应的多个正弦波组成的信号。您说得对，采样频率为 44.1 kHz，仅查看 256 个样本，您能够在这 256 个样本中检测到的最低频率是 172 Hz 的频率。

在频域中获得足够的分辨率：

频率的幅度值“仅在某些频率，基频的倍数”，对于傅里叶分解是正确的，而不是 DFT，它将具有一定增量的频率分辨率。DFT 的频率分辨率与用于计算 DFT 的时域信号的采样率和样本数有关。减小频率间隔将使您能够更好地区分靠近的两个频率，这可以通过两种方式完成；

1.  降低采样率，但这会使频率上的周期性重复更靠近。（记住这里的奈奎斯特定理）
2.  增加用于计算 DFT 的样本数。如果只有 256 个样本可用，则可以执行“零填充”，其中将 0 值样本附加到数据的末尾，但是需要考虑对此的一些影响。

如何得出结论：

如果您将不同音频信号的频率内容描绘成单独的图表，您会发现幅度略有不同。这是因为各个信号的声音不会相同，并且任何信号中总是存在固有的噪声（来自环境和硬件本身）。因此，您要做的是取两个或多个 DFT 信号的平均值以去除噪声并获得更准确的频率内容表示。根据您的应用程序，如果您正在捕获的声音随着时间的推移而显着变化（例如语音或音乐），这可能是不可能的。因此，仅当所有要平均的信号在声音上几乎相等时（“同一事物”的单独单独录音），平均才有用。只是为了澄清，例如，从四个时域信号，您想创建四个频域信号（使用 DFT 方法），然后将四个频域信号的平均值计算为单个平均频域信号。这将消除噪音并让您更好地表示音频中固有的频率。

另一种解决方案：

如果您知道您的信号应该包含一定数量的主频率（不是太多）并且这些是您唯一感兴趣的，那么我建议您使用 Pisarenko 的谐波分解 (PHD) 或多信号分类 ( MUSIC，不错的缩写！）来查找这些频率（及其相应的幅度值）。这比 DFT 在计算上的密集程度低。例如。如果您知道信号包含 3 个主要频率，Pisarenko 将返回这三个频率的频率值，但请记住，DFT 揭示了更多信息，让您得出更多结论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T21:04:41.477

你最初的假设是不正确的。FFT/DFT 不会仅在某些离散频率上为您提供幅度。这些离散频率只是 bin 的中心，每个 bin 构成一个窄带滤波器，其主瓣具有非零带宽，大致为 FFT bin 间隔的一两个宽度，具体取决于窗口（矩形、von Hann 等.) 在 FFT 之前应用。因此，bin 中心之间的频谱内容幅度将显示出来，但会分布在多个 FFT 结果 bin 中。

如果关键信号的分离足够大并且噪声水平足够低，那么您可以对 FFT 结果进行插值以检查 bin 中心之间的频率。您可能需要使用高质量的插值器，例如 Sinc 内核。

如果您的信号分离较小或噪声水平较高，那么您可能需要较长的数据窗口来提供较长的 FFT 以收集足够的分辨率信息。在 44.1k 采样率下，长度为 256 的 FFT 窗口几乎可以肯定地太短，无法收集有关低于 100 Hz 的频谱内容的足够信息，如果这些频率属于您希望检查的频率，因为它们无法分离干净地来自直流偏置（bin 0）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T01:36:16.810

不幸的是，在信号的固定样本中识别频率存在一定程度的不确定性。如果您使用较短的 FFT，则无法区分相当宽范围内的频率差异。如果您使用长 FFT 在频域中获得更高的分辨率，那么您将无法快速检测到频率变化。这是数学固有的。

突然想到：如果你想要一个 15kHz 的范围，以 1Hz 为增量，你需要一个 15000 点的 FFT，这在 44.1kHz 意味着你将获得每秒 3 次的频率图。（我可能错过了 2 倍，因为我不记得奈奎斯特限制是否意味着您实际上需要 30kHz 带宽。）

您可能还对[短时傅里叶变换](http://en.wikipedia.org/wiki/Short-time_Fourier_transform)感兴趣。它不能解决基本的权衡问题，但在实践中可能会得到你想要的。

# assembly - 将 16 位整数无符号数转换为 ASCII 字符串，以十六进制表示数字

> ID：13187993
> 
> 赞同：0
> 
> 时间：2012-11-02T01:25:16.293
> 
> 标签：assembly, ascii, 68hc11

对于 Asembly (68hc11) 这是在纸上处理的分配。

编写一个程序，将 16 位整数无符号数转换为 ASCII 字符串，以十六进制表示该数字。数字在寄存器 D0 中，字符串从寄存器 A0 中的地址开始放入内存中。

我如何将位数分成 4 位来表示汇编中的十六进制数，是否有执行此操作的说明？我也有一个问题来可视化程序的逻辑。将四位分开后，我如何使程序集将其转换为十六进制？当我得到十六进制字符时，我需要将它们与每个可能的 ascii 字符进行比较？

我真的不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T01:38:37.420

您可以使用按位移位和掩码来分隔每个十六进制数字的 4 位。然后您可以使用查找表将它们映射到ascii，或者使用字符表中0-9和AF连续的事实。

# ruby-on-rails - 添加 rmre 0.0.4 后如何解决这些 Rails gem 依赖项？

> ID：13187994
> 
> 赞同：0
> 
> 时间：2012-11-02T01:25:18.283
> 
> 标签：ruby-on-rails, rubygems, bundler, dependency-management

我制作了一个新的 rails 3.2.8 应用程序并添加了：

```
gem "rmre", "~> 0.0.4" 
```

到这个新的 gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

gem "rmre", "~> 0.0.4"

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'debugger' 
```

运行 bundle install 产生：

```
Bundler could not find compatible versions for gem "erubis":
  In Gemfile:
    rmre (~> 0.0.4) ruby depends on
      erubis (~> 2.6.6) ruby

    rails (= 3.2.8) ruby depends on
      erubis (2.7.0) 
```

我尝试注释掉版本号，甚至删除与资产管理相关的 gem。不过，我似乎无法得出在这里工作的 gem 版本的组合。这是我第一次遇到这种情况，我不确定我还能做些什么来尝试使用至少 3 点左右的 rails 版本的 rmre gem。

有没有一种聪明的方法来在这里寻找可行的依赖解决方案？如果没有满足推荐依赖的gem版本配置，有没有最不坏的方法去追求？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T17:03:56.887

You might try contacting the rmre gem author to see if they would be willing to loosen the dependency restriction, so that it's not tied to such a narrow erubis version. Forward compatibility is part of what gem authors need to maintain if they want their gem to continue to work with the latest versions of rails. – normalocity Nov 2 at 1:31
.
.
Worked.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:43:26.903

Download the zip file from the page. Then execute the gem command. Worked for me. Incredible program.