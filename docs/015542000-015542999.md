# StackOverflow 问答 15542000-15542999

# php - PHP 和 MySQL 驱动的动态谷歌地图位置

> ID：15542000
> 
> 赞同：0
> 
> 时间：2013-03-21T07:49:08.637
> 
> 标签：php, mysql

我有一个数据库驱动的网站，它获取地址，地址显示在谷歌地图上。这是包含谷歌地图嵌入的字符串。我没有位置的纬度，但我有地址和区域。地点没有出现。

```
<?php  $add = $row_rsDoc['Address'];
$address = str_replace(" ","+",$add);
$gtown = str_replace(" ","+",$row_rsDoc['Town']);
$gprov = str_replace(" ","+",$row_rsDoc['Province']);

$googlestr=$address.','.'+'.$gtown.','.'+'.$gprov;
echo $googlestr;
?>
<th width="446" class="entry" scope="col"><iframe width="441" height="243" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.za/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=<?php echo $googlestr; ?>&amp;aq=&amp;sll=-26.178375,28.033719&amp;ie=UTF8&amp;hq=&amp;hnear=&amp;radius=15000&amp;t=m&amp;output=embed"></iframe><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:57:35.813

您需要对地址进行地理编码以获得长/纬度，然后使用标记和叠加层将标记嵌入到您的谷歌地图上。在谷歌地图文档中有一个很好的例子，说明如何应用静态标记和如何进行地理编码。

这个过程是这样的。

在地址添加 -> 请求地理编码 -> 将返回的 long/lat 存储到 db -> 在地图加载时通过 ajax 回调到一个 php 页面，该页面返回一个 long/lats 数组以在地图上标记。

这正是我的做法，它最大限度地减少了您必须对 google api 执行的实际查询的数量，因为它对免费用户的请求有限。如果您想要实际代码，请告诉我，我可以从我的一个应用程序中复制和粘贴，这正是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T07:59:56.517

而不是使用`str_replace()`use `urlencode()`（请参阅[urlencode()](http://php.net/manual/en/function.urlencode.php)的文档）

此外，您在 URL 中包含位置坐标，请尝试使用：

```
<th width="446" class="entry" scope="col"><iframe width="441" height="243" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://maps.google.co.za/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=<?php echo $googlestr; ?>&amp;aq=&amp;ie=UTF8&amp;output=embed"></iframe><br /> 
```

# sql-server - 在 Visual Studio 的 C# 代码中使用动态 sql

> ID：15542003
> 
> 赞同：-1
> 
> 时间：2013-03-21T07:49:16.217
> 
> 标签：sql-server, c#-4.0, pivot-table, dynamic-sql

我正在开发一个应用程序，我需要在其中根据员工的进出条目生成报告。我没有使用动态查询的数据库相关应用程序的经验。在这个特定的应用程序中，我需要传递动态 sql 查询。

在此我需要根据用户选择选择列名，然后将它们作为参数传递给另一个 sql 查询。这是查询...

```
DECLARE @cols AS NVARCHAR(MAX),

    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(date +'_'+Logname) 
                    from
                    (
                      select doordate,
                        convert(char(10),doordate, 101) date, 
                        LogName
                      from DoorLog
                      cross apply
                      (
                        select 'In' LogName
                        union all
                        select 'Out' 
                      ) l
                    ) s   
                    group by convert(char(10), doordate, 112), date, Logname
                    order by convert(char(10), doordate, 112)
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'select employeeid, name, '+@cols+'
       from
       (
         select employeeid, name, 
          convert(char(8), doortime, 108) DoorTime,
          date + ''_''+ col col_names
         from
         (
            select p.employeeid,
              p.name,
              convert(char(10),d.doordate, 101) date,
              min(d.doordate) [In],
              max(d.doordate) [Out]
            from person p
            left join doorlog d
              on p.employeeid = d.employeeid
            group by p.employeeid, p.name, 
              convert(char(10),d.doordate, 101)
         )src
         unpivot
         (
           doortime
           for col in ([In], [Out])
         ) unpiv
       ) p
       pivot
       (
          max(doortime)
          for col_names in('+@cols+')
       ) piv'

execute(@query) 
```

我一直无法想出如何在 C# 代码中使用此代码的方法。

请帮忙。

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:00:48.643

您最好的选择是在您的数据库中创建一个可以处理传入请求并执行查询的存储过程。以下是有关存储过程的更多信息：

[http://msdn.microsoft.com/en-us/library/aa174792(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa174792(v=sql.80).aspx)

然后，您需要在 C# 代码中创建与数据库的连接：

[http://msdn.microsoft.com/en-us/library/s4yys16a(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/s4yys16a(v=vs.71).aspx)

最后，您需要使用刚刚创建的连接调用存储过程，并从 C# 代码中传递参数，这在 StackOverflow 上已多次回答：

[如何在 C# 程序中执行存储过程](https://stackoverflow.com/questions/1260952/how-to-execute-a-stored-procedure-from-c-sharp-program)

# image-processing - 图像处理开源程序？

> ID：15542006
> 
> 赞同：0
> 
> 时间：2013-03-21T07:49:27.030
> 
> 标签：image-processing, ocr, tesseract

所以我的项目涉及将jpg文件中的文本转录成文本文件，我们目前正在使用tesseract。但是，在目前的水平上，tesseract 在转录 jpg 文件中的文本方面做得并不好。所以我决定使用一些图像预处理程序来使图像文件更适合输入到 tesseract 中。

图片文件示例如下：http: [//i46.tinypic.com/opramo.jpg](http://i46.tinypic.com/opramo.jpg)

基本上是图像形式的旧新闻。

关于使用哪个图像处理引擎的任何建议？？？谢谢 ！

# mysql - 如何在mysql中按特殊字符排序

> ID：15542008
> 
> 赞同：1
> 
> 时间：2013-03-21T07:49:38.007
> 
> 标签：mysql

我的列值是

```
firstname
===============
mufi**alam
lam**slam
zia**busa 
```

我想在价值星之后订购。我们如何使用mySql的哪个查询

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:00:13.803

尝试这个

```
 SELECT SUBSTRING_INDEX(firstname, '*', -1) AS foo FROM Table1
   order by foo; 
```

[**在这里演示**](http://sqlfiddle.com/#!2/fd847b/1)

或者这个演示，如果你想显示名字列

[**演示**](http://sqlfiddle.com/#!2/fd847b/2)

或者这个没有 foo 列，只需在 *.

```
 SELECT firstname  FROM Table1
  order by SUBSTRING_INDEX(firstname, '*', -1); 
```

[**演示**](http://sqlfiddle.com/#!2/fd847b/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:44:03.700

尝试这个

SELECT first_name FROM people ORDER BY SUBSTRING_INDEX(first_name, '*', -1) [desc,asc];

这里 desc 表示降序，asc 表示升序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:06:00.197

试试这个查询

```
SELECT firstname FROM persons
ORDER BY SUBSTRING_INDEX(firstname, '*', -1); 
```

**输出**

```
|  FIRSTNAME |
--------------
| mufi**alam |
|  zia**busa |
|  lam**slam | 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!2/5454c/1)

# c# - 如何测试异步 void 方法

> ID：15542015
> 
> 赞同：3
> 
> 时间：2013-03-21T07:49:52.460
> 
> 标签：c#, unit-testing, async-await

请考虑如下所示的代码。通过调用 GetBrands，将为属性 Brands 分配适当的数据。

```
public class BrandsViewModel : ViewModelBase
{
    private IEnumerable<Brand> _brands;
    public IEnumerable<Brand> Brands
    {
        get { return _brands; }
        set { SetProperty(ref _brands, value); }
    }

    public async void GetBrands()
    {
        // ......

        Brands = await _dataHelper.GetFavoriteBrands();

        // ......
    }
} 
```

但是，如果我如下所示进行测试，则测试失败。如何等待 GetBrands 方法中的异步调用？

```
[TestMethod]
public void AllBrandsTest()
{
    BrandsViewModel viewModel = new BrandsViewModel();
    viewModel.GetBrands();
    Assert.IsTrue(viewModel.Brands.Any());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T08:16:38.867

这里的简单答案是：不要将其设为`async void`. 事实上，除非它绝对必须作为事件处理程序工作，否则**永远**不要做某事。丢失的`async void`东西***正是***您想要在这里进行测试的东西（并且可能是您的真实代码）。`async void`

 *改为使用`async Task`方法，您现在可以等待完成（超时）/添加延续，并检查它是成功退出还是异常退出。

这是一个单词的变化，以：

```
public async Task GetBrands()
{
    // ......

    Brands = await _dataHelper.GetFavoriteBrands();

    // ......
} 
```

然后在测试中：

```
[TestMethod]
public async Task AllBrandsTest()
{
    BrandsViewModel viewModel = new BrandsViewModel();
    var task = viewModel.GetBrands();
    Assert.IsTrue(task.Wait(YOUR_TIMEOUT), "failed to load in time");
    Assert.IsTrue(viewModel.Brands.Any(), "no brands");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:00:03.113

您的模型（DTO）正在填充自身（数据访问）。这对于一个班级来说太多了。通常当你问自己*“我到底该如何测试这个”*时，是时候进行重构了。创建一个单独的数据访问类：

```
BrandsViewModel viewModel = new BrandsViewModel();
var brandAccess = new BrandsDataAccess();
viewModel.Brands = await brandAccess.GetAllBrands();
Assert.IsTrue(viewModel.Brands.Any()); 
```

现在你可以测试了`BrandsDataAccess.GetAllBrands()`。*

# php - Apache 404 错误也将一个站点的错误页面重定向到所有其他站点

> ID：15542016
> 
> 赞同：0
> 
> 时间：2013-03-21T07:50:04.097
> 
> 标签：php, wordpress, apache, ubuntu-12.04

我的机器中有 3 个 wordpress 站点（在 localhost 中），名为 site1、site2、site3。每当找不到页面时，它就会被重定向到 site1 的 404 错误页面，而不是重定向到各自的 404 页面。可能是我在某处设置了 apache 的默认错误页面。任何人都可以在这方面帮助我。

如何重置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:54:24.163

检查`.htaccess`您网站根目录中的文件，我认为其中一行应该说类似的内容`ErrorDocument 404 /errors/404.html`

尝试用 a 注释掉该行`#`并刷新

# joomla - 是否可以隐藏一个特定用户组的内容？

> ID：15542023
> 
> 赞同：1
> 
> 时间：2013-03-21T07:50:25.157
> 
> 标签：joomla, joomla2.5, acl

我知道我们可以使用 Joomla ACL 根据用户访问级别显示内容，但是是否可以向除一个特定组之外的所有用户显示内容？如果是这样，怎么做？

我尝试创建一个名为的访问级别`news`，其中包括除`no_news`group 之外的所有组，然后将我的模块访问级别分配为`news`.

不幸的是，属于该`no_news`组的用户能够看到内容。有什么建议么？

该类`no_news`继承自已注册的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:11:34.410

你的 no_news 组是从 Public 继承的吗？如果是这样，请从 NEWS 访问级别排除公共组。基本上这个想法是，如果父组有权访问，那么所有子组也将拥有。

# visual-studio-2010 - 如何在vb中以编程方式激活gridview中的“启用选择”？

> ID：15542025
> 
> 赞同：0
> 
> 时间：2013-03-21T07:50:31.393
> 
> 标签：visual-studio-2010, gridview

我正在使用visualStudio 2010 vb

使用 Gridview 时，您可以扩展 cotextual 菜单并选择“启用选择”，这将在每一行中创建一个选择链接（可以更改为按钮），这允许选择行和触发器，例如，向下钻取行中包含的信息。

可以以编程方式激活此“启用选择”吗？

我尝试了以下没有任何结果：

GridView1.AutoGenerateSelectButton = True

谢谢

C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:30:09.737

我发现我缺少数据绑定。以下作品

```
GridView1.AutoGenerateSelectButton = True
GridView1.DataBind() 
```

# javascript - 检查字符串/数字类型的字段是否为空

> ID：15542028
> 
> 赞同：0
> 
> 时间：2013-03-21T07:50:35.590
> 
> 标签：javascript

我正在我的应用程序中使用[可编辑网格](http://www.editablegrid.net/en)。我有从字符串数据类型到数字的列，在验证网格单元格的空性时遇到了一些问题。听起来很简单，但它变得令人困惑和沮丧。

这是我用来检查该字段是否为空的：

```
if (value == "") {
//do work here
} 
```

这适用于具有`string`数据类型的列，但是当存在数据类型的值时`number`，它无法检查它，因为`NaN`此时值包含。[我已经尝试了这个答案](https://stackoverflow.com/questions/4597900/checking-something-isempty-in-javascript)中提到的大多数方法，但都是徒劳的。其次，在这种情况下，我还想避免嵌套或不必要的 ifs ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T07:53:28.160

您可以通过检查来检查[虚假值](http://www.sitepoint.com/javascript-truthy-falsy/)s

```
if (!value) {
    //do work here
} 
```

这将评估`true`为`0`, `""`, `null`, `undefined`,`false`和`NaN`

或者当然，如果您想测试该字段是否为*空*，您可以只检查一个`truthy`值

```
if (value) {
    //do work here
} 
```

`true`如果值*不是* *（以上都不是），*则评估为`falsy`

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T07:58:11.397

您可以检查***真实***值

```
if( value ) {
} 
```

评估`true`为它不是来自`('null', 'undefined', 'false', 'NaN' or 'empty' that is ("") )`*

# c++ - C++ 扫描无符号字符数组和无符号字符向量中某些元素的最快方法是什么？

> ID：15542029
> 
> 赞同：6
> 
> 时间：2013-03-21T07:50:38.843
> 
> 标签：c++

我有一个小问题，在 LARGE unsigned char 数组和仅包含 unsigned char 元素的向量中扫描某些元素的最快方法是什么？直接的答案会很棒，但深入详细的答案会很棒。我说的快是什么意思？基本上，至少在一秒钟内搜索某些字符。我知道这不是一个受过良好教育的定义...

注意：数组未排序。

**共同声明：**

```
unsigned char* Array = new unsigned char[ 50000 ];
std::vector< unsigned char > Vec( 50000 );
/*
 * Fill Array & Vec with random bytes
 */ 
```

可以说，我想在数组中搜索字母“a”，我只需编写这个循环来搜索它：

注意：搜索过程将搜索多个元素。主要是 256。因此，您可以利用这个神奇的数字。

**For循环方法：**

```
unsigned int Count = 0;
for ( unsigned int Index = 0; Index != 50000; ++ Index )
   if( Array[ Index ] == 'a' ) Count ++; 
```

**std::count 方法：**

```
unsigned int Count = std::count ( Array, Array + 50000, 'a' ); 
```

有没有更快的方法来搜索 Array 中的某些元素？

一些想法 - 请不要为此给我一个大拇指！它只是一个想法。我想要一些意见。

**排序**

如果我们复制 Array 并对其进行排序，速度会更好吗？为什么要复制？好吧，因为我们需要保留原始内容。目标是基本上扫描并计算一个字符的出现次数。记住，速度很重要。这意味着，复制过程必须很快。

```
Answer: No and its not worth it! 
```

为什么？好吧，让我们读一下：

@基里尔基洛夫：

> 依靠。如果您打算搜索单个字符 - 绝对不会。复制数组是一项昂贵的操作。对其进行排序 - 甚至更昂贵。
> 
> 好吧，如果您只有一个数组并且您计划搜索 100 个不同的字符，那么这种方法可以为您提供更好的性能。现在，这实际上取决于您的使用情况。对于这种情况，没有人能给你绝对正确的答案。您需要运行它并配置文件。

*向下滚动到@Kiril Krov 的信息帖子以获取更多信息。

**答案：** 到目前为止，还没有一个可靠的或答案，因为没有一个真正“快速”的方法来实现这个目标，尤其是当它没有排序的时候。但是，*线程*可能是一种可能的解决方案。但是，请注意我们的 CPU！这是基于@Andrea 提交的答案（向下滚动以获取更多信息） - 我希望我没看错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:08:23.313

正如其他人所写，最佳算法的复杂性是`O(n)`，尤其是因为您的数组未排序。

为了使搜索更快，您可以细分数组并在**单独的线程**中分别扫描每个部分。这将与您机器上可用的 CPU 内核数量成线性关系。

例如，如果您有四个可用内核，则生成四个线程并让每个线程扫描阵列的四分之一。

可能这个讨论可能会有所帮助：[Using threads to reduce array search time](http://www.dreamincode.net/forums/topic/245694-using-threads-to-reduce-array-search-time/)

* * *

在任何情况下（对于任何与性能相关的问题都是如此），您应该分析您的代码。为您拥有的方法创建一个测试用例，测量它所花费的时间并将其作为基线。然后，对于您所做的每一次修改，重新进行测量以检查它是否真的可以缩短执行时间。还要确保每次测量不止一次（在同一个测试用例中）并计算平均值，以减少缓存和其他预热效应（理想情况下，在开始第一次测量之前至少执行一次代码）。

这是与 Java 相关的，但给出了一些很好的反馈，表明并行化并非在所有情况下都有意义：[A Beginner´s Guide to Hardcore Concurrency](http://www.youtube.com/watch?v=DCdGlxBbKU4&feature=player_embedded)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T08:05:41.383

最好的算法是`O(n)`，其中`n`是元素的数量。

由于您需要检查每个元素，因此您必须遍历整个数组。

我能想到的简单方法已经写在您自己的答案中。

没有更快的方法可以做到这一点——内存是连续的，数组没有排序，你需要“触摸”每个元素。这是最快的解决方案。

* * *

关于您的编辑：使用`std::count`和“手动”循环遍历数组将为您提供相同的性能。

* * *

> 有没有更快的方法来搜索数组中的某些元素

是的，如果数组已排序。然后你可以达到`O( log(n) )`. 然后，您将需要一些现有的搜索算法，例如二进制搜索。

* * *

> 如果我们复制 Array 并对其进行排序，速度会不会更好

依靠。如果您打算搜索单个字符 - 绝对不会。复制数组是一项昂贵的操作。对其进行排序 - 甚至更昂贵。

好吧，如果您只有一个数组并且您计划搜索 100 个不同的字符，那么这种方法可以为您提供更好的性能。现在，这实际上取决于您的使用情况。对于这种情况，没有人能给你绝对正确的答案。您需要运行它并配置文件。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T08:32:25.713

“快”是什么意思？

快于复杂性，还是作为常数的改进？您无法使用未排序的数组获得更好的复杂性。但是，如果您很少更改数组并且经常搜索它，您可以考虑在每次更改后对其进行排序，或者更好的是，使用不同的数据结构（如 a`multimap`或 a `set`）。

如果你打算在你的`O(n)`，有一些巧妙的技巧可以使用/滥用 CPU 的缓存。如果您搜索多个元素，通常会更快地搜索每个字符的前几百个数组元素，然后搜索接下来的几百个，依此类推，而不是为每个搜索词扫描整个数组。改进并不在于复杂性，因此效果通常不会那么好。除非此搜索发生在您在其他算法深处重复的瓶颈处，否则我不会推荐它。因此，除非它在渲染算法、设备驱动程序或特定架构等内部，否则很可能不值得。但是，在可能合适的极少数情况下，通过使用内联汇编和滥用 CPU 缓存，我看到速度提高了 3 倍 - 4 倍或更多。

**编辑：**

您的评论表明，包含有关数据结构的简短介绍可能是个好主意。

*   数组，向量：访问速度最快，搜索速度较慢，如果未附加到末尾，则添加/删除速度较慢。
*   列表：访问慢、搜索慢、添加/删除最快
*   树，哈希表等：**最佳搜索**（有些允许`O(0)`搜索！），变化缓慢（取决于类型）

我建议学习 C++ 中的不同数据结构（向量、列表、映射、多重映射、集合、多重集合等），这样您就可以使用最适合您需求的一种。

关于 CPU 缓存：似乎选择更合适的数据结构和代码组织更为重要。但是，为了完整起见，我将其包括在内。如果您以较短的块而不是一次搜索整个数组，则该部分数组将添加到 CPU 的缓存中，并且访问缓存比访问 RAM 快得多。因此，您可以处理较小的数据块（例如，搜索多个元素），然后切换到下一个数据块，依此类推。这意味着，例如，

```
search "a" in elements 1..100
search "b" in elements 1..100
search "c" in elements 1..100
search "a" in elements 101..200
search "b" in elements 101..200
search "c" in elements 101..200
...
search "c" in elements 999901 .. 1000000 
```

可以比

```
search "a" in elements 1..1000000
search "b" in elements 1..1000000
search "c" in elements 1..1000000 
```

如果搜索到的元素（a、b、c、..）的数量足够大。为什么？因为在缓存大小为 100 的情况下，在第一个示例中，数据从 RAM 读取 10000 次，在第二个示例中，为 30000 次。

但是，这种效率（以及您对数据块大小的选择）在很大程度上取决于您的架构，并且仅在您确定这是您真正的瓶颈时才推荐使用。通常不是。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T08:40:31.970

取决于它是一次扫描或多次。排序对扫描速度有很大帮助，您始终可以通过 bisearch 缩小扫描范围。复杂度可能是 O(log(n))。

或者，如果您可以从插入开始并构建将要扫描的数组，则可以使用插入速度慢但始终排序的红黑树。

最后但并非最不重要的一点是，对于您正在扫描“无符号字符数组”的问题，其中元素的数量是有限的。您可以进行一次扫描，但它需要更多内存：使用 unsigned char 数组中每个元素的值作为另一个数组的索引，该数组用于存储扫描结果。

如果你想要每个元素的位置，另一个数组可以是：int scanresult[256][n]，其中 n 是某个字符数的最大数。

如果只需要计算数组中有多少个'a'，另一个数组可以是：int scanresult[256]，以此为例，复杂度为O(n)，但只需要运行一次：

```
unsigned char* Array = new unsigned char[ 50000 ];
/* Fill Array */
int scanresult[256];
for ( int i=0;i<256;++i) { scanresult[i]=0; }
for ( unsigned int Index = 0; Index != 50000; ++ Index )
   scanresult[Array[Index]]++; 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-21T09:05:17.600

对于单个字符搜索，`std::count`可能与您将获得的一样快。而对于小数据集（和 50000） *来说*，你不太可能注意到时间。当然，对于单个字符，几乎任何合理的算法都将花费比读取数据更少的时间。（`std::count`在现代机器上，向量或 C 样式数组中的 50000 个元素几乎是瞬时的。无论如何，您的“至少一秒钟”要好几个数量级。）

如果您想更快，解决方案是不要一开始就创建数组，而是在读取数据时动态进行处理（或通过 立即获取数组 `mmap`）。如果您需要多个字符的数据......只需在读取数据时建立一个字符频率表。并找到读取数据的最快方法（`mmap`在 Linux 下几乎可以肯定，至少根据我最近制定的一些措施）。之后，只需在需要计数时索引到该表。读取数据将是 O(n)（并且没有办法解决），但在那之后，获得计数是 O(1)，并且具有非常非常小的常数因子（在很多机器上不到一纳秒）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T08:51:52.540

别忘了，unsigned char > 0 && unsigned char <= 256...

```
#define MAX 50000 

unsigned char* Array = new unsigned char[ MAX ];
unsigned int Logs[ 256 ];

// Fill Array

::memset( &Logs, 0, sizeof( Logs ) * 256 );
for( unsigned int Index = 0; Index != MAX; ++ Index )
   Logs[ Array[ Index ] ] ++;

delete [] Logs; 
```

# android - 无法访问android.graphics.Bitmap的mBuffer

> ID：15542039
> 
> 赞同：0
> 
> 时间：2013-03-21T07:51:30.033
> 
> 标签：android, bitmap

我使用以下代码：</p>

```
Bitmap myBmp = Bitmap.createBitmap( 720, 1280, Config.ARGB_8888 );
byte []data = myBmp.mBuffer ???? 
```

但是我发现mBuffer无法访问。并且没有提示不能在 Eclipse 中访问。问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T07:55:03.513

如果要访问像素，请使用

```
Bitmap.getPixel(int,int) 
```

和

```
Bitmap.setPixel(int,int) 
```

这是你想做的吗？

**编辑：** “问题”是 Java 注释`@hide`，它隐藏了代码完成注释的成员，并引发了阻止 eclipse 编译的错误。

# xaml - GridView 选择模式

> ID：15542040
> 
> 赞同：3
> 
> 时间：2013-03-21T07:51:32.593
> 
> 标签：xaml, windows-store-apps

我正在开发 Windows 商店应用程序，在该应用程序中，我将选择模式设置为“SINGLE”，但默认情况下选择了网格视图上的第一项。只有当我们右击时才需要选择项目。

```
 <local:MyGridView x:Name="itemGridView" Grid.Row="1" Grid.Column="1"           SelectionMode="Single" RightTapped="AppBar"  AutomationProperties.AutomationId="ItemGridView"
        AutomationProperties.Name="Grouped Items"  > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-23T14:17:04.873

尝试将 SelectedItem 属性设置为 null？

# android - 如何在 Android 上测试压力传感器？

> ID：15542041
> 
> 赞同：1
> 
> 时间：2013-03-21T07:51:35.417
> 
> 标签：android, linux-device-driver

我看过[这个](https://play.google.com/store/apps/details?id=ctsr.android.SensorTest)应用程序，但是如何在 Android 上测试压力传感器的驱动程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:17:55.487

根据您的传感器的分辨率，您可能会看到根据海拔高度的变化。试着把它放在你的桌子和地板上，你应该会看到一些小的变化（或者在你的建筑物中向上移动一些楼层）。

我对压力传感器的经验是，它们以小分辨率测量小工具的高度是非常不准确的。

要读取传感器的值，您还可以尝试从 sysfs 读取值，如果您有 shell 访问权限。

# python - Theano 安装警告：未检测到 g++

> ID：15542043
> 
> 赞同：0
> 
> 时间：2013-03-21T07:51:40.970
> 
> 标签：python, g++, theano

安装 Theano 后，我尝试运行它，但收到以下错误消息：

```
WARNING (theano.configdefaults): g++ not detected! Theano will be unable to execute 
optimized C-implementations (for both CPU and GPU) and will default to Python 
implementations. Performance will be severely degraded. 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:00:17.403

尝试安装`g++`编译器。

Python 相当慢，因此对于性能关键部分，您需要一种编译语言，例如 C++。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T21:48:49.483

您可以尝试安装 mingw ( [http://www.mingw.org/](http://www.mingw.org/) )，如此处发布的答案中所述 -[未检测到 theano g++](https://stackoverflow.com/questions/36722975/theano-g-not-detected/37846308#37846308)

# javascript - 移动 Safari 对大图像进行下采样。如何挽留？

> ID：15542045
> 
> 赞同：7
> 
> 时间：2013-03-21T07:51:44.783
> 
> 标签：javascript, html, css, image, safari

我有一个 HTML 页面，其中包含 1675 像素 x 2640 像素的图像。我尝试在 iPad 上查看它，显然移动 safari 对图像进行了下采样。我们想展示高质量的图像，但 safari 限制了这一点。

我一直在寻找保留图像大小的解决方案。我一直在移动 safari 上的 iPad 3 上查看它。人们建议使用其他浏览器，但默认情况下我们使用的是移动 Safari。

是否有任何 CSS、JavaScript 或其他解决方案来解决此限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:18:20.207

我敢肯定你会喜欢这个答案，但简短的答案似乎是：“你不会得到 1:1 的大尺寸图像”。

稍长一点的答案是，Apple 故意强迫事情以这种方式工作，因为在它的工作方式之前，它只是根本不加载图像，或者崩溃。

现在，对于引用的更完整的答案......

[Apple 的已知资源限制](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingContentforSafarioniPhone/CreatingContentforSafarioniPhone.html#//apple_ref/doc/uid/TP40006482-SW15)

问题是，当图像被解码/解压缩时，它占用的 RAM 空间比图像文件大小要多得多。Apple 声明的公式是具有 512mb RAM 的设备，例如您提到的 ipad 3，将拒绝 5 兆像素以上的非 JPEG 图像，这会导致：

```
height * width <= 5 * 1024*1024 
```

对于 JPEG，Apple 指出他们将进行二次采样以允许您查看 jpeg：

> JPEG 的最大解码图像大小为 32 兆像素，使用二次采样。由于二次采样，JPEG 图像最高可达 32 兆像素，这允许 JPEG 图像解码为像素数十六分之一的大小。对大于 2 兆像素的 JPEG 图像进行二次采样，即解码为缩小的尺寸。JPEG 二次采样允许用户查看来自最新数码相机的图像。

请注意，它指出 2 兆像素是 JPEG 全尺寸查看的限制，即 2*1024*1024。由于您的图像大约略超过 4 兆像素，它将在 iPad 3 上进行二次采样。不，如果不使用外部程序，您真的无法强制它。

要使用外部程序进行最小改进，请参阅此链接，其中有人推荐 GoodReader：[Apple 论坛，在 MiniSfari 中寻求完整图像分辨率](https://discussions.apple.com/thread/2811298?start=0&tstart=0)

这是另一个具有类似问题/答案对的 Stackoverflow：[Mobile Safari 中的图像大小限制](https://stackoverflow.com/questions/6725851/image-size-limitations-in-mobile-safari)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T04:42:10.880

[Mobile Safari 不会对*渐进式*JPEG 进行下采样。](http://technocraz.com/2012/03/24/progressive-jpegs-are-the-key-to-high-resolution-web-images-for-new-ipad/)假设 JPEG 是您可以接受的格式，只需将它们转换为渐进式编码。假设您有一个现有的非逐行扫描 JPEG 图像，您可以使用诸如`jpegtran`无损地将编码转换为逐行扫描的工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T08:05:00.247

要享受 iPad Retina 和 iPhone 4 / 5 的视网膜功能，请使用以下两倍大小的图像：

```
<img src="test.jpg" width="837" height="1320" /> 
```

注意尺寸减半，但 test.jpg 不需要调整大小。

或者，您可以准备另一组高分辨率图形，并在检测到视网膜屏幕时显示它，使用媒体查询 (Modernizr)

**像素密度理论：** Retina 屏幕将 2 个像素放入 1 个像素中，例如`320px`宽度，它实际上包含`640px`内容。在此处阅读更多信息：[http ://www.sitepoint.com/css-techniques-for-retina-displays/](http://www.sitepoint.com/css-techniques-for-retina-displays/)

# mysql - 在 wordpress 数据库中的 INSERT 查询中出现 SQL 语法错误

> ID：15542047
> 
> 赞同：1
> 
> 时间：2013-03-21T07:51:54.063
> 
> 标签：mysql, sql, database, wordpress

我正在使用下面的插入查询为所有 wordpress 帖子添加自定义文件，但是出现 Sql 语法错误我不知道我在哪里做错了

```
INSERT INTO wp_postmeta (post_id, meta_key, meta_value)
SELECT ID AS post_id, 'CustomField'
AS meta_key 'MyValue AS meta_value
FROM wp_posts WHERE ID NOT IN
(SELECT post_id FROM wp_postmeta WHERE meta_key = 'CustomField')
'' AND post_type = 'post'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T07:52:32.593

您错过了用于分隔列的逗号和用于包装字符串的单引号。

```
INSERT INTO wp_postmeta (post_id, meta_key, meta_value)
SELECT ID AS post_id, 
       'CustomField' AS meta_key, 
       'MyValue' AS meta_value
FROM   wp_posts 
WHERE  ID NOT IN
       (SELECT post_id 
        FROM wp_postmeta 
        WHERE meta_key = 'CustomField')
       AND post_type = 'post'; 
```

使用的另一种方法`NOT IN`是连接两个表，

```
INSERT  INTO wp_postmeta (post_id, meta_key, meta_value)
SELECT  a.ID AS post_id, 
        'CustomField' AS meta_key, 
        'MyValue' AS meta_value
FROM    wp_posts a
        LEFT JOIN wp_postmeta b
            ON  a.ID = b.post_id AND 
                b.meta_key = 'CustomField'
WHERE   a.post_type = 'post' AND
        b.post_id IS NULL 
```

# ios - 仅在 iOS < 6.0 的情况下运行代码并进行预处理？

> ID：15542049
> 
> 赞同：0
> 
> 时间：2013-03-21T07:52:07.257
> 
> 标签：ios, xcode

我可以找到很多关于如何只编译/运行代码的示例，然后 iOS 版本是 > 的东西，但是我该如何做呢？我通过在模拟器中运行 iOS 5.0 尝试了以下操作：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED < __IPHONE_6_0
// Code for iOS < 6.0 here
#endif 
```

但是里面的代码`#if - #endif`并没有在iOS 5.0的模拟器上运行。我怎样才能做到这一点？

[编辑] 好的，所以我不确定我想要什么，抱歉 :) 问题是我希望 UITableViewDelegate 中的这段代码仅在设备运行 iOS < 6.0 时运行：

```
-(UIView*)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
} 
```

这是因为如果我运行 iOS < 6，我想做一些样式，但是在 iOS 6 上我可以更容易地做这个样式。但是在这个方法中运行时的版本检查并不是我真正想要的，因为那样就太晚了。

谢谢索伦_

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T07:59:46.997

之间有区别

1.  编译时检查您是否针对特定的 SDK 进行编译，并且
2.  检查您的代码在哪个操作系统上运行

检查 __IPHONE_6_0 宏只会检查您正在为哪个目标编译...这是您想要的吗？如果是这样，您可以使用`#ifndef __IPHONE_6_0`检查您是否**没有为 iOS 6 编译**。

如果您想知道您的代码在哪个操作系统上运行，您可以查看 MSK 的[答案](https://stackoverflow.com/a/15542116/210171)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T07:56:52.457

这是运行时而非编译时检查。

```
#define SYSTEM_VERSION_LESS_THAN(v)  ([[[UIDevice currentDevice] systemVersion] compare:v options:NSNumericSearch] == NSOrderedAscending) 
```

像使用它一样

if(SYSTEM_VERSION_LESS_THAN(@"6.0")) {

}

# c - 动态分配 固定长度字符串的二维数组

> ID：15542051
> 
> 赞同：1
> 
> 时间：2013-03-21T07:52:12.240
> 
> 标签：c, arrays, string, pointers, malloc

在一个程序中，我必须从输入中扫描

```
scanf("%s",currWord); 
```

未定义数量的单词，它们出现在未定义的行数中。

我想把单词放在一个二维的字符串数组中。字符串的长度是固定的`[MAX_WORD_LEN+1]`

我的想法是：

```
int row=10 //10 lines for starting
int col=5 //5 words in each line for starting
int i;

typedef char word[MAX_WORD_LEN+1]; //new type of 11char lenght string
word** matrix; //2 dimensional array (pointers) with no memory

matrix = malloc(row*sizeof(word*)); //allocate row number of word* (word pointer) size

for(i=0;i<row;i++)
{
  matrix[i] = malloc(col*sizeof(word)); //allocate col number of words to each row
} 
```

所以，我不知道这是否正确。

我会很高兴获得一些帮助和提示..

**编辑：**

从输入中接收单词时，如果需要，我必须增加内存（行数和每行中的单词），我该怎么做？（重新分配？）

我需要执行以下操作：

![图片](../Images/126bc7914b0e572f585125741bbb9877.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T06:11:52.417

**无需赘述，最简单的方法是使用 Matrix 作为 Linked-Lists 的 Linked-List ..**

```
struct matrix_field
{
    char data [11];
    matrix_field * next_field;
};

struct matrix_row
{
    matrix_field * first_field;
    matrix_row * next_row;
};

struct matrix
{
    matrix_node * first_row;
}; 
```

**您的数据在内存中将如下所示..**

```
[+]
 |
 v
[x]-->[a]-->[b]-->[c]-->
 |
 v
[y]-->[d]-->[e]-->[f]-->
 |
 v
[z]-->[g]-->[h]-->[i]-->
 |
 v

---------------

[+] matrix

[x] .. [z] matrix_row

[a] .. [i] matrix_field 
```

# javascript - 如何检测 Google Instant 页面已完全加载？

> ID：15542052
> 
> 赞同：7
> 
> 时间：2013-03-21T07:52:13.707
> 
> 标签：javascript, ajax, browser-extension, google-instant

我正在开发浏览器扩展程序（想想[SEOQuake](http://www.seoquake.com/)） - 我需要显示一些有关显示的搜索结果的数据。

问题：如果在加载过程中将任何内容添加到 Google Instant 结果页面，它将覆盖所有添加内容。我发现自己正在编写一些非常不稳定的 setInterval 业务（等到内容`ol#rso`停止大小变化，诸如此类），所以我想这意味着我不确定如何可靠地确定页面是否已完成加载。

我*可以*让它等待 1-2 秒，但我真的想在加载结果后立即开始获取数据以节省最大时间。

编辑：请记住，我不能使用 DOMElementWhatever，因为 IE8 不支持它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-07T09:05:55.833

Try this:

```
window.addEventListener("message", function(e) {if(e.data == 'jrc') console.log('loaded')}, false); 
```

That should work in IE 8+ and all other browsers: [http://caniuse.com/#feat=x-doc-messaging](http://caniuse.com/#feat=x-doc-messaging)

If that doesn't work in IE 8 (can't test in on my Mac right now), let me know. I believe I got some reasonably good understanding of the rs.js in the last hour. ;)

# android - ActionBar 中的微调器不出现

> ID：15542059
> 
> 赞同：1
> 
> 时间：2013-03-21T07:52:58.897
> 
> 标签：android, android-layout, android-actionbar, android-spinner

我已经像[这里](http://developer.android.com/guide/topics/ui/controls/spinner.html)一样实现了微调器。现在我想将微调器放在 ActionBar 中（将微调器设置为 CustomView 到 actionBar）但它没有出现在那里:(

```
Spinner spinner = (Spinner) findViewById(R.id.planets_spinner);
        ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                R.array.planets_array, android.R.layout.simple_spinner_item);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 

        spinner.setAdapter(adapter);

        actionBar.setCustomView(spinner); 
```

这是.XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:baselineAligned="false"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/parkfragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

    <Spinner
        android:id="@+id/planets_spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

请不要建议使用 ActionBar DropDown List，我不能使用它，因为我已经在使用 ActionBar Tabs。android不允许同时使用它们。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T11:25:45.460

您的代码缺少这一行：

```
actionBar.setDisplayShowCustomEnabled(true); 
```

请参阅[`ActionBar#setDisplayShowCustomEnabled(boolean showCustom)`](http://developer.android.com/reference/android/app/ActionBar.html#setDisplayShowCustomEnabled(boolean))以供参考。

* * *

### 更新：

为什么你的布局中有一个空白`FrameLayout`占据了所有的宽度和高度？去掉它。并删除`LinearLayout`，也是。只需将其用作布局：

```
<?xml version="1.0" encoding="utf-8"?>
<Spinner xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/planets_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" /> 
```

然后写这样的东西，一切都很好：

```
actionBar.setCustomView(R.layout.your_layout_with_the_spinner);
actionBar.setDisplayShowCustomEnabled(true);

Spinner spinner = (Spinner) findViewById(R.id.planets_spinner);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.planets_array, android.R.layout.simple_spinner_item);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spinner.setAdapter(adapter); 
```

# android - 默认 Android 时区列表

> ID：15542063
> 
> 赞同：8
> 
> 时间：2013-03-21T07:53:03.270
> 
> 标签：android, list, timezone

我想知道我是否可以在某个地方获得 android 版本 2.3.3 的时区选择列表的默认代码？

![在此处输入图像描述](../Images/8cd7c12be79e0c64072c630a2d694839.png)

![在此处输入图像描述](../Images/6c5ee3a76d252e04954fe20529f901f6.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-21T08:04:15.780

```
 String[] ids=TimeZone.getAvailableIDs();
   for(int i=0;i<ids.length;i++)
   {
       System.out.println("Availalbe ids.................."+ids[i]);
       TimeZone d= TimeZone.getTimeZone(ids[i]);
       System.out.println("time zone."+d.getDisplayName());
       System.out.println("savings."+d.getDSTSavings());
       System.out.println("offset."+d.getRawOffset());

      /////////////////////////////////////////////////////
      if (!ids[i].matches(".*/.*")) {
          continue;
      }

      String region = ids[i].replaceAll(".*/", "").replaceAll("_", " ");
      int hours = Math.abs(d.getRawOffset()) / 3600000;
      int minutes = Math.abs(d.getRawOffset() / 60000) % 60;
      String sign = d.getRawOffset() >= 0 ? "+" : "-";

      String timeZonePretty = String.format("(UTC %s %02d:%02d) %s", sign, hours, minutes, region);
      System.out.println(timeZonePretty);
      //////////////////////////////////////////////////////////////////
   }
    ListView listitems=(ListView)findViewById(R.id.list);
  ArrayAdapter<String> adapter=new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,ids);
   listitems.setAdapter(adapter);
  } 
```

时区的文档。[http://developer.android.com/reference/java/util/TimeZone.html](http://developer.android.com/reference/java/util/TimeZone.html)

设置时区

以下是根据美国设置时区的示例代码

```
 // First Create Object of Calendar Class
  Calendar calendar = Calendar.getInstance();        
  // Now Set the Date using DateFormat Class
  SimpleDateFormat sdf = new SimpleDateFormat("dd-MMM-yyyy hh:mm:ss z"); 
  // Finally Set the time zone using SimpleDateFormat Class's setTimeZone() Method
  sdf.setTimeZone(TimeZone.getTimeZone("America/Los_Angeles")); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-03T12:37:56.760

不幸的是，Android 设置从设置应用程序中包含的 XML 中获取该时区列表。您可以在[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/1.6_r2/com/android/settings/ZoneList.java)中看到这一点（第 161 行）：

```
 private List<HashMap> getZones() {
     List<HashMap> myData = new ArrayList<HashMap>();
     long date = Calendar.getInstance().getTimeInMillis();
     try {
        XmlResourceParser xrp = getResources().getXml(R.xml.timezones);
     ...
 } 
```

其他应用程序（例如 Google 日历）具有自己的值数组。可以通过对这些资源进行[逆向工程来检查它。](http://adivishayam.blogspot.com.es/2012/05/how-to-extract-resouces-and-source.html)

因此，除非您想维护自己的列表（考虑到多语言...），否则我建议您减少[java.util.TimeZone](http://developer.android.com/reference/java/util/TimeZone.html)提供的列表并仅显示您想要的那些时区，如 @ Raghunandan 在他的回答评论中推荐了你。

# asp.net-mvc-3 - 防止动作名称出现在 url

> ID：15542064
> 
> 赞同：0
> 
> 时间：2013-03-21T07:53:09.300
> 
> 标签：asp.net-mvc-3

mvc 中是否有任何方法可以在调用特定操作时防止操作名称进入 url，并且在调用其他操作时不影响此操作。

# arduino - 将温度传感器与 Arduino GBoard 一起使用

> ID：15542066
> 
> 赞同：0
> 
> 时间：2013-03-21T07:53:16.197
> 
> 标签：arduino, sensors, temperature

我们使用的是[LM35](http://www.ti.com/lit/ds/symlink/lm35.pdf)温度传感器和 Arduino 板引脚 A0 到 A7，实际上是其中的任何一个引脚。问题是我无法在 Arduino 软件的串行窗口中获得稳定准确的值。下面是我正在使用的代码：

```
int pin = 0; // analog pin
int tempc = 0, tempf = 0; // Temperature variables
int samples[8]; // Variables to make a better precision
int maxi = -100, mini = 100; // To start max/min temperature
int i;

void setup()
{
    Serial.begin(9600); // Start serial communication
}

void loop()
{
    for(i = 0; i <= 7; i++) { // Gets 8 samples of temperature
        samples[i] = ( 5.0 * analogRead(pin) * 100.0) / 1024.0;
        tempc = tempc + samples[i];
        delay(1000);
    }

    tempc = tempc/8.0; // Better precision
    tempf = (tempc * 9)/ 5 + 32; // Converts to fahrenheit

    if (tempc > maxi) {
        maxi = tempc;
    } // Set max temperature

    if (tempc < mini) {
        mini = tempc;
    } // Set min temperature

    Serial.print(tempc,DEC);
    Serial.print(" Celsius, ");

    Serial.print(tempf,DEC);
    Serial.print(" fahrenheit -> ");

    Serial.print(maxi,DEC);
    Serial.print(" Max, ");
    Serial.print(mini,DEC);
    Serial.println(" Min");

    tempc = 0;

    delay(1000); // Delay before loop
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:57:25.820

很高兴知道问题是什么，但这里有一些需要考虑的事情：

*   您正在平均几个样本。这是一个很好的步骤。
*   您可以通过事后而不是在循环本身中进行电压到温度的转换来使平均值更好*一些。*在循环中，只需将`analogRead`读数添加到某个值，然后在打印前将其转换为温度。这样可以避免一些潜在的浮点舍入错误。
*   如果您*不*这样做，至少将样本存储为`float`s
*   确保电压稳定，尤其是在使用电池运行时。在 Arduino 的电源和接地引脚之间有一个不错的大旁路电容器。
*   你没有展示LM35是如何连接的。这可能是问题的一部分。另外，如果我没记错的话，它驱动容性负载的能力非常有限。如果你的 LM35 的引线很长，那么接线本身就会有一些电容。查看 LM35[数据表](http://www.ti.com/lit/ds/symlink/lm35.pdf)，了解如何使 LM35 和微控制器之间的连接更加可靠。
*   如果您想了解更多技术信息，请查看[这篇](http://www.atmel.com/images/doc8003.pdf)关于如何提高 AVR ADC 精度的应用说明。虽然取决于您使用的 Arduino，但这可能不适用。

但是，更大的问题可能是电路的固有精度。在 25 度时，LM35 输出 0.25 V，显示为 ADC 上的读数 51，温度每变化 +1 度，ADC 的读数就为 +2，因此 ADC 精确到 1/2 度. LM35 在室温下精确到 1/2 度，所以现在您的精确度是 +1/-1 摄氏度，这可能是您抖动的原因。如果您只是测量 100 摄氏度以下的温度，您可以为您的 ADC 使用 3.3 V 参考电压（同样取决于您使用的 Arduino），这将为您提供更好的精度。

但是，您总会有*一些*抖动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-29T14:50:37.647

```
 void setup() {
   // initialize serial communication at 9600 bits per second:
    Serial.begin(9600);
  }

  int samples =0;
  float temprature = 0.0;
  // the loop routine runs over and over again forever:
  void loop() {
  // read the input on analog pin 0:
  int sensorValue = analogRead(A0);
  // Convert the analog reading (which goes from 0 - 1023) to a temprature
  temprature += sensorValue * (500.0 / 1023.0);
  // print out the value you read:
  samples++;
  if(samples >= 10){
      temprature = temprature/10;
      Serial.println(temprature);
      temprature = 0.0;
      samples = 0;
  }
  delay(50);
} 
```

# jsf - 重定向后如何从支持 bean 加载数据

> ID：15542082
> 
> 赞同：0
> 
> 时间：2013-03-21T07:54:49.327
> 
> 标签：jsf, jsf-2

当我不使用 中的`<redirect/>`标签时`faces-config.xml`，它不会更新浏览器 URL，但从支持 bean 成功加载数据。当我使用`<redirect/>`时，浏览器 URL 会更新，但数据不会从支持 bean 加载。在这种情况下，如何从支持 bean 加载数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:07:40.923

您可以`faces-redirect=true`在导航 URL中
使用例如

```
<h:form>
     <h:commandLink value="MyValue" action="MyPage?faces-redirect=true" />
</h:form> 
```

没有`<redirect/>`在你的`faces-config.xml`
现在 定义

1.  浏览器 URL 将被更新
2.  数据从支持 bean 成功加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:16:13.993

只需在与目标页面关联的支持 bean 的（后）构造函数中执行加载工作，如有必要，基于某些请求参数。

例如

```
@ManagedBean
@RequestScoped
public class Bean {

    private Data data;

    @PostConstruct
    public void init() {
        data = loadItSomehow();
    }

    // ...
} 
```

如果目标页面通过 引用 bean `#{bean}`，那么它将自动构造，并且您可以在构造函数或`@PostConstruct`方法中完成所有工作，甚至可以在附加的侦听器方法中完成所有工作，`<f:event type="preRenderView">`如果您碰巧有`<f:viewParam>`而不是`@ManagedProperty`。

### 也可以看看：

*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-make-url-reflect-the-current-page-and-not-the-previous-one)
*   [JSF 2：直接调用托管 bean](https://stackoverflow.com/questions/13488832/jsf-2-invoking-managed-bean-directly/13492293#13492293)
*   [ViewParam 与 @ManagedProperty(value = "#{param.id}")](https://stackoverflow.com/questions/4888942/viewparam-vs-managedpropertyvalue-param-id/4889226#4889226)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T10:03:59.543

JSF 将表单提交到当前页面而不是目标页面，因此地址栏中显示的 URL 将始终*落后于一个请求*。

例子：

```
Base-URL: example.org/index.jsf  // now we navigate to home.jsf
URL: example.org/home.jsf | Addressbar: example.org/index.jsf
// navigate to content.jsf
URL: example.org/content.jsf | Addressbar: example.org/home.jsf
// and so on 
```

通过使用`faces-redirect=true`- 参数，您告诉 servlet 重新路由您的请求，以便地址栏更新到您所在的实际站点。
如果用户应该能够明确地为该站点添加书签，则尤其需要此行为。

所以第一个问题是：这个页面应该可以收藏吗？
如果是这样，您将不得不使用重定向方法，或者通过在其中创建导航规则`faces-config.xml`（就像您所做的那样），或者您可以通过告诉您的操作组件（commandLink/Button）destination-viewId 并附`?faces-redirect=true`加到它来使用隐式导航。
如果不需要为此页面添加书签（或需要 GET 请求的任何其他类型的操作），您可以放弃处理这个问题并坚持使用标准的 POST 请求。

干杯

# android - 测试异步任务和 Junit

> ID：15542084
> 
> 赞同：0
> 
> 时间：2013-03-21T07:54:54.763
> 
> 标签：android, junit

所以我四处寻找有关编写异步测试的帮助，我发现了很多，但我只是不知道如何开始。我想测试一个扩展 AsyncTask 的类，并且只测试那个类。那么我应该在构造函数中放入什么来进行 Junit 测试呢？它扩展了 InstrumentationTestCase，因为我需要使用 restTestonUI。抱歉，如果这是一个愚蠢的问题，我以前从未使用过 Junit。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:10:49.400

**启动异步任务**

```
NameOfURTask task= new NameOfURTask ();
task.execute(); 
```

**你的异步任务**

```
public class NameOfURTask extends
        AsyncTask<Void, Void, Void> {

    ProgressDialog pDialog;

    protected void onPreExecute() {
        pDialog = new ProgressDialog(CueGenius.this);
        pDialog.setMessage("aysnc task...");
        pDialog.setCancelable(false);
        pDialog.show();

    }

    protected Void doInBackground(Void... unused) {

    //put here what u want to try   

        return (null);
    }

    @Override
    protected void onProgressUpdate(Void... values) {
        // TODO Auto-generated method stub
        super.onProgressUpdate(values);
    }

    protected void onPostExecute(Void unused) {
        pDialog.dismiss();
    }

} 
```

# nsis - 如何更改 nsis 应用程序的标题栏

> ID：15542085
> 
> 赞同：1
> 
> 时间：2013-03-21T07:54:55.077
> 
> 标签：nsis

我使用 nsis 制作了一个简单的应用程序来呈现网页。我被卡住的下一个要求是使用自定义控件实现自定义标题栏。我想我可以用皮肤或通过一些现有的插件来做到这一点，但无法找到任何可行的解决方案。

请建议我如何更改 NSIS 应用程序的标题栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:27:09.703

在 NSIS 中做到这一点的唯一方法是编写一个新插件（没有现有的插件可以覆盖非客户区，因为它很难做到，而且通常看起来像垃圾恕我直言）

为此，您基本上必须编写 3 个版本的皮肤处理：

1.  [<= Win2000](http://www.catch22.net/tuts/custom-titlebar)和 XP+ 关闭 uxtheme/视觉样式
2.  开启视觉样式的 XP/2003
3.  带航空的 Vista+

...最重要的是，您可能想要处理高对比度模式等

除了在 .onguiinit 中调用你的新插件来开始挂钩之外，NSIS 从来没有真正出现过，其余的需要在子类处理程序中发生，并且可能应该用 C/C++ 编写......

# ios - 从超级视图 ios 中删除视图

> ID：15542089
> 
> 赞同：0
> 
> 时间：2013-03-21T07:55:18.313
> 
> 标签：ios, uiview, addsubview

我有一个关于从超级视图中删除子视图的问题：现在我有一个名为：的子视图`subview1` ，然后我在其他 2 个视图中添加了这个子视图：

`[supperview1 addSubview: subview1]`

和

`[suppertview2 addSubview: subview1]`

...我只知道`removeFromSupperview`从 supperview 中删除子视图的方法，但在这种情况下，我想从 supperview1 中删除 subview1，但仍然是 supperview2 的子视图 .... 我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:16:14.977

你的代码是错误的。

如果你使用

```
[supperview1 addSubview: subview1] 
```

接着

```
[suppertview2 addSubview: subview1] 
```

`subview1`wil 只加在 上，`suppertview2`所以`subview1`唯一的是`suppertview2s subview`

苹果说：

> 视图只能有一个超级视图。如果视图已经有一个超级视图并且该视图不是接收者，则此方法会在使接收者成为其新的超级视图之前删除先前的超级视图。

# php - 如何在某些特定设计（div 和表）中安排 xml 响应

> ID：15542098
> 
> 赞同：0
> 
> 时间：2013-03-21T07:55:58.553
> 
> 标签：php, xml, soap

最近我开始了飞行门户网站。为了显示航班的详细信息，如可用性、取消、票价等。我在 php 中发送一个 SOAP XML 请求，代码如下

```
<?php
$xml_data="<arzHotelAvailReq><clientInfo>
<username>UdooInXML</username>
<userType>ArzooHWS1.1</userType>
<userID>77743543</userID>
<password>*CB8</password>
<partnerID>1002</partnerID>
</clientInfo>
<requestSegment>
<currency>INR</currency>
<searchType>search</searchType>
<residentOfIndia>true</residentOfIndia>
<stayDateRange>
<start>22/03/2013</start>
<end>23/03/2013</end>
</stayDateRange>
<roomStayCandidate>
<guestDetails>
<adults>1</adults>
<child>
<age>3</age>
<age>5</age>
</child>
</guestDetails>
<guestDetails>
<adults>2</adults>
<child>
<age>2</age>
</child>
</guestDetails>
</roomStayCandidate>
<hotelSearchCriteria>
<hotelCityName>BANGALORE</hotelCityName>
<hotelName></hotelName>
<area></area>
<attraction></attraction>
<rating></rating>
<sortingPreference>1
</sortingPreference>
<hotelPackage>Y</hotelPackage></hotelSearchCriteria></requestSegment></arzHotelAvailReq>
"; 
```

这里是soap客户端请求代码。

我得到了回应。到这里为止一切都很好。但我得到的响应是不规则的文本格式，如下所示。

```
100200

    INR
    search

      22/03/2013
      23/03/2013

        1

          3
          5

        2

          2

      BANGALORE

      1

      Y

    true

        00005380
        Veekay Tourist Home
        Overlooking the beautiful park, this homely abode is close to the ISKON Temple. Across three floors are 80 AC and non-AC rooms, which are maintained with room service. Guests can experience the essence of the city with a tour, which is organized by the home on demand. There is free parking facility provided to the guests to park their vehicles.

        1
        2
        400
        033
        arzooB

91/1, Railway Parallel Road Yeshwantpur

          NA

          Overlooking the beautiful park, this homely abode is close to the ISKON Temple. Across three floors are 80 AC and non-AC rooms, which are maintained with room service. Guests can experience the essence of the city with a tour, which is organized by the home on demand. There is free parking facility provided to the guests to park their vehicles.
          NA
          NA
          NA
          NA

          00:00
          12:00

          All
          NA
          NA

        Air_Conditioning,Restaurant,Conference_Hall,Health_Club,Travel_Desk,Transfers,Forex,Shopping,Swimming,Banquet,Business_Center

            NA
            cdn.travelpartnerweb.com/DesiyaImages/Image/1/nxd/maw/ryj/lbn/HO_TN.jpg

          N
          N
          Non AC Room
          No Amenities
          0000019527
          0000068265

            11111111
            +yWrLQerwfpRqCOBdo4d4Q+fTZgh1nupLJ4p4u6ke0DnoKrM1YnV+CyeKeLupHtAek/xho0eiejEOsNqkniCrj61Dp4lgPVpxhyWcxAZvAY6eaST9cxEwO77vKeHzGt7xDrDapJ4gq4OONbvuHIwesuQNW1tG3pMLXm9B6RXzcuVQyNiR9Nkmc5UwHnlMe/3R4pOa9nZpzWvpc4Pgi4QldI0kqzTn0R2SrrkswfU4tEe+FrLnNX0ikMr6KYsRwZ5weOUbgjswoE6Gc2xDYzFhoJPdnFEgTGV53WGRs0ArO3XjoptM/3++Ebal1NQKw41+CLkev7bTS2uy9dZCeYpxW/ouG38h9xmYh+h8WdKEfuf5HK8TIYqr3cMt7sdhfmbFluz6IhIkl5gGOFLUgob5fJgMkJc5m29X6/0s/8xt7Kj8slKZijCITtF+SlZboPr
            84
            751
            0
            0.0
            0

          N
          N
          AC Double
          No Amenities
          0000019528
          0000068266

            11111111
            MqJjfxbuxrY6eaST9cxEwDETzbfNeAOGmk9s1Uz6PbYSZIViwgQiY5pPbNVM+j22FHM8WEydgwBkOaDlTL6ZjC9zLGtHv0ypOnmkk/XMRMAPn02YIdZ7qUC2Sm/k4OAAweOUbgjswoF0RTNIMdh6k+Ld9K5fVWUdDznXXQXDz4XzARG+d1YhoTBLNxtfNxqmAcSIgU/v1x3EOsNqkniCrr6b1Ug4ytFJZ/0FayiZJBkPeiwpn9EJwEbIPnPEbTR4lWhM0grn0WLZ56unmN2SYl3cbsmEPmwq2OuHVC1F8Hu84Nfh1MF/h4/ba1HimMaE+uDhm6Ks2qonJVGPUcpVXdQrEjcaz9CVv8aChDAx1MrEOsNqkniCrtPU6ffG6Zo+VJRf6bY5MD9Jpvu9wmltGrCdLm1c957TFF2epIoxL54OaXRTmdyfd1yCAU1C72cA
            0
            1684
            60
            0.0
            0

        00005020
        U.G.DELUXE
        Located near to the Srinivasa Nursing Home, this brand new smoke-free property on the block is maintained with 42 deluxe rooms, which includes A/C and non-A/C accommodations. There are three dining outlets, namely Malabar Vegetarian Restaurant, Krishna Bhavan, and Sukh Sagar, which are all open for service from 6a.m to 10p.m. The property is designed with a garden area, where guests can lounge. They can also avail the assistance of the travel desk and take a tour of the beautiful city.

        0
        2
        550
        061
        arzooB

#9/1, 2nd Cross,Thulasithotam Balepet Near Srinivasa Nursing Home

          NA

          Located near to the Srinivasa Nursing Home, this brand new smoke-free property on the block is maintained with 42 deluxe rooms, which includes A/C and non-A/C accommodations. There are three dining outlets, namely Malabar Vegetarian Restaurant, Krishna Bhavan, and Sukh Sagar, which are all open for service from 6a.m to 10p.m. The property is designed with a garden area, where guests can lounge. They can also avail the assistance of the travel desk and take a tour of the beautiful city.
          NA
          NA
          NA
          NA

          00:00
          12:00

          All
          NA
          NA

        Air_Conditioning,Restaurant,Conference_Hall,Health_Club,Travel_Desk,Transfers,Forex,Shopping,Swimming,Banquet,Business_Center

            NA
            cdn.travelpartnerweb.com/DesiyaImages/Image/1/nxd/maw/rym/fbn/HO_TN.jpg

          N
          N
          Double Deluxe Non AC
          No Amenities
          0000018167
          0000058501

            11111111
            6rHbdJ5eYI7GHJZzEBm8BvOaNWWi+RUhLJ4p4u6ke0DPzHJ7gHRp3iyeKeLupHtAhduj3Vq+cinEOsNqkniCrj61Dp4lgPVpxhyWcxAZvAY6eaST9cxEwO77vKeHzGt7xDrDapJ4gq4OONbvuHIwepH1wYi4aVVmDxAoeeQIBeo7G/tKB6tJOYDfWwbV0F7ASAS/psz+s/vtFOZDhaz6EtGf96t/LsuWxw1Qqnbhmf3XYWyQ7VUjC8Q6w2qSeIKuoKFs0O+FVtNhRIfAcxLjf86bGU9wLBRNvD/Qlqcc//JzmIzIGoODhM1oJoq2rZMN1gD5nlU38lH0iT7gaoTgQlkLlahFGUKDXPHozEiWFpzUKxI3Gs/Qlb/GgoQwMdTKxDrDapJ4gq7T1On3xumaPlSUX+m2OTA/Sab7vcJpbRqwnS5tXPee0xRdnqSKMS+eDml0U5ncn3eFGMF7Jssn/w==
            0
            966
            44
            0.0
            0

          N
          N
          Double Deluxe AC
          No Amenities
          0000018168
          0000058502

            11111111
            sSCoszzZkH86eaST9cxEwDETzbfNeAOGmk9s1Uz6PbZGv/SG567OsZpPbNVM+j22DfbGKTDMXKFkOaDlTL6ZjC9zLGtHv0ypOnmkk/XMRMAPn02YIdZ7qUC2Sm/k4OAAweOUbgjswoF0RTNIMdh6kznLtLUAmNXdxBAFTfOqI33OVMB55THv90eKTmvZ2ac1r6XOD4IuEJXSNJKs059Edkq65LMH1OLRxhyWcxAZvAZDK+imLEcGecHjlG4I7MKBOhnNsQ2MxYZ+oLyPTZ3RMaAnkAotaRPKKfHYXniQp/S8zzpKPZaLArk7+CKaeLo9hOB8fqTxssT128imfeXuC/OgEXYIgsG2UHFvTjsO+sCf5HK8TIYqr+4vK3ryvrJwFluz6IhIkl4/hAHmlwnis6hroDhh/C42mx8+gs3lzQiWJgzCcdsB9fCEqLc7/4v1LJ4p4u6ke0CUdoTzsl6ZtBfc5EobFJGF
            0
            1318
            60
            0.0
            0

        00004788
        U.G.ROYAL
        Strategically located near to the railway station by 2kms, this smoke-free property is designed with 3floors with an elevator, and maintained with 24 rooms to reside in. The property is also maintained with a garden space and a travel counter for all travel assistance. A vegetarian fare can be savoured in the nearby Sukh Sagar Restaurant and non-vegetarian fare can be relished in any of the neighboring dining outlets, namely New Grand and Hyderabad.

        0
        2
        650
        062
        arzooB

# 42, Cottonpet Main Road

          NA

          Strategically located near to the railway station by 2kms, this smoke-free property is designed with 3floors with an elevator, and maintained with 24 rooms to reside in. The property is also maintained with a garden space and a travel counter for all travel assistance. A vegetarian fare can be savoured in the nearby Sukh Sagar Restaurant and non-vegetarian fare can be relished in any of the neighboring dining outlets, namely New Grand and Hyderabad.
          NA
          NA
          NA
          NA

          00:00
          12:00

          All
          NA
          NA

        Air_Conditioning,Restaurant,Conference_Hall,Health_Club,Travel_Desk,Transfers,Forex,Shopping,Swimming,Banquet,Business_Center

            NA
            cdn.travelpartnerweb.com/DesiyaImages/Image/1/nxd/maw/syf/lbv/HO_TN.jpg

          N
          N
          Double Deluxe Non AC
          No Amenities
          0000017219
          0000054610

            11111111
            oHS5Xd5Exyg6eaST9cxEwGZSjnNN3mhmmk9s1Uz6PbaNc1sEsAf/6JpPbNVM+j22if6NKX9Uk13Dy1lDA4noii9zLGtHv0ypOnmkk/XMRMAPn02YIdZ7qUC2Sm/k4OAAweOUbgjswoF0RTNIMdh6kznLtLUAmNXdU8J0wP+0TP07G/tKB6tJOYDfWwbV0F7ASAS/psz+s/vtFOZDhaz6EtGf96t/LsuWxw1Qqnbhmf3XYWyQ7VUjC8Q6w2qSeIKuoKFs0O+FVtN4j8rH+f6mNO5qfq4xpPlORexVeZq9N0yqKIuRorLprNQrEjcaz9CVv8aChDAx1MrEOsNqkniCrtPU6ffG6Zo+VJRf6bY5MD9Jpvu9wmltGrCdLm1c957TFF2epIoxL54OaXRTmdyfd0BBbtk2xLpA
            0
            1142
            52
            0.0
            0

          N
          N
          Deluxe Double AC
          No Amenities
          0000017221
          0000054612

            11111111
            TxbgXP3Nk6o6eaST9cxEwO0QCFlSnc8Cmk9s1Uz6PbaNc1sEsAf/6JpPbNVM+j22fMzm237c+vR3p+iuYvo+Ai9zLGtHv0ypOnmkk/XMRMAPn02YIdZ7qUC2Sm/k4OAAweOUbgjswoF0RTNIMdh6kznLtLUAmNXdU8J0wP+0TP07G/tKB6tJOYDfWwbV0F7ASAS/psz+s/vtFOZDhaz6EtGf96t/LsuWxw1Qqnbhmf3XYWyQ7VUjC8Q6w2qSeIKuoKFs0O+FVtN4j8rH+f6mNO5qfq4xpPlORexVeZq9N0yqKIuRorLprNQrEjcaz9CVv8aChDAx1MrEOsNqkniCrtPU6ffG6Zo+VJRf6bY5MD9Jpvu9wmltGrCdLm1c957TFF2epIoxL54OaXRTmdyfd4cJw1cUhwyo
            0
            1580
            72
            0.0
            0

        00004786
        U.G.GRAND
        A large photo frame of Lord Venkatesh at the lobby welcomes guests to a comfortable stay in this four floors hotel located in the NP Lane. There are 16 rooms facilitated with 24hours room service. A vegetarian fare can be relished at the Krishna Sagar Delhi Restaurant, which is open for service from 6a.m. to 10a.m., and non-vegetarian fare can be savoured in the Hyderabad Biryani Restaurant, which can be visited between 10a.m. to 11p.m. There is free valet parking facility also available in this hotel.

        0
        2
        650
        108
        arzooB

NO.10,N.P. LANE,COTTON PET BEHIND SHANTALA SILKS 
```

所以在这里我想以设计的格式安排响应。我怎样才能做到这一点。请给我您宝贵的建议。

提前致谢， Sree 公羊

# javascript - 如何检测文本节点中渲染的新行

> ID：15542103
> 
> 赞同：2
> 
> 时间：2013-03-21T07:56:22.690
> 
> 标签：javascript, jquery, detection

嘿，伙计们。

首先，我不想在文本节点中检测 \n 。我需要知道的是文本何时/何处换行到另一行。

我的想法是逐个字母迭代TextNode，创建一个新的TextNode复合所有字母直到当前步骤，之后我将计算文本节点的高度，如果当前步骤的高度与前一个不同一，然后换行。

问题是我很难弄清楚当前文本的高度。这是我到目前为止所拥有的：http: [//jsfiddle.net/mfnAT/2/](http://jsfiddle.net/mfnAT/2/)

可以看到返回的高度`getTextNodeHeight`不正确，不知道哪里出错了。我在[这里](https://stackoverflow.com/questions/6961022/measure-bounding-box-of-text-node-in-javascript)找到了这个功能。

你们有谁知道如何解决这个问题？还是解决这个问题的更好方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:26:13.950

在文本中间的某个位置设置一个坐标。在 setTimeout 测量的给定时间间隔内调用相对于该位置的左偏移量。在页面加载时初始化一个事件侦听器，该侦听器侦听左侧偏移为负（意味着它现在位于此位置的右侧） 该事件侦听器只需初始化第二个事件侦听器，该侦听器侦听左侧偏移为正，这将象征一个。来回调用两个事件监听器。如果您有任何问题，我会在几个小时后回复。

# javascript - 显示 Excel 工作表中的表格

> ID：15542106
> 
> 赞同：1
> 
> 时间：2013-03-21T07:56:28.340
> 
> 标签：javascript, html, excel, export, html-table

我想在我的 html 页面中显示来自 excel 工作表的表格。一个excel表中有多个表。我想显示一个特定的表格。请帮忙..

我用来从 excel 文件中提取信息的 HTML 代码

```
 <html>
 <head>
 <title>
 From Excel
 </title>
 <script language="javascript" >
 function GetData(cell,row){
 var excel = new ActiveXObject("Excel.Application");
 var excel_file = excel.Workbooks.Open("C:\\abc.xlsx");
 var excel_sheet = excel.Worksheets("25 PEs");
 var data = excel_sheet.Cells(cell,row).Value;
 document.getElementById('div1').innerText =data;
}
</script>
</head>

<body>

<div id="div1" style="background: #DFDFFF; width:'100%';" align="center">
Click buttons to fetch data from c:\abc.xlsx
</div>

<input name="Button1" type="button" onClick="GetData(1,1)" value="button1">
<input name="Button2" type="button" onClick="GetData(1,2)" value="button2">
<input name="Button3" type="button" onClick="GetData(2,1)" value="button3">
<input name="Button4" type="button" onClick="GetData(2,2)" value="button4">

</body>
</html> 
```

此代码一次提取一个单元格。我想一次提取整个表。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:16:06.983

一个不错的选择是使用 jquery 库 dataTables。然后，您可以使用诸如 DataConverter 先生提供的工具将您的电子表格转换为 json。然后，您将数据表指向 json 文件，过滤掉您不需要的任何列，中提琴，您的数据将显示在一个漂亮的 html 表中，并根据您的喜好进行自定义。我最近才使用这种方法，它使显示大量数据变得容易得多。

数据表 - [http://www.datatables.net/](http://www.datatables.net/)

数据转换器先生 - [http://www.shancarter.com/data_converter/index.html](http://www.shancarter.com/data_converter/index.html)

隐藏各个列的代码在 dataTables 初始化程序中看起来像这样：

```
"aoColumnDefs" : [{
    "bVisible" : false,
    "bSearchable": true, 
    "aTargets" : [0, 1, 4, 6, 9, 10, 11, 12]
} 
```

并重新排序列看起来像：

```
"aoColumns": [//reorder the columns
    { "mDataProp": [0] },
    { "mDataProp": [1] },
    { "mDataProp": [2] },
    { "mDataProp": [7] },
    { "mDataProp": [4] },
], 
```

希望这个对你有帮助...

# php - 如何从 Javascript 执行外部 php？

> ID：15542107
> 
> 赞同：1
> 
> 时间：2013-03-21T07:56:28.947
> 
> 标签：php, javascript, mysql

我正在开发一个 javascript 应用程序，我组织的事情如下：

*   屏幕上显示一个表（表来自 MySQL 数据库）
*   用户做出决定，可能是删除表格的一行，点击一个图标（不是表格）
*   想要启动一个带有类似 sintax 的外部 php 文件`<<tabledelete.php?codetokill='XXXXXX'>>`
*   刷新原始页面

不幸的是，我找不到调用外部 php 的正确方法，有些东西可以工作，但我无法返回主页，等等

有人可以给我一些建议吗？我使用了错误的方法吗？TY 给所有人。

编辑只是为了测试pourpose，我按照建议实现了以下代码：

```
JAVASCRIPT (this is a funcion called bay a button with onclick option)
function fn_deleterow(numrig,cod,descr) {
    messaggio="Hai deciso di eliminare ("+numrig+") "+cod+" - "+descr;
    var scelta = confirm(messaggio);
    if (scelta) {
        document.write('Ok delete')
        $.ajax({
        url: "PHPTest.php",
        type: "POST"
        })
        document.write('Happy ending')
        document.location.reload(true)
    }
}

PHP FILE
<?php
echo 'HERE WE ARE WITH PHP<abr>';
?> 
```

我可以看到“ok delete”和“happy ending”消息，并且页面重新加载，但根本没有“我们在这里使用 php”……我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:01:28.770

`Javascript`是服务器端的客户端语言`PHP`。您可以调用`PHP`页面中已有的变量`Javascript`。但是你不能`PHP`使用 Javascript 执行一些代码。因为`PHP`仅在服务器中执行。Javascript 无法与服务器通信。它只能与浏览器一起使用。

您可以`AJAX`用于此目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:08:11.873

例如：使用 Jquery/ajax 请求：

```
$(document).on("click", "a.myclass", function(e){
    e.preventDefault();
    var send_uri = $(this).attr("href");
    $.ajax({
        type: "GET",
        url: send_uri,
        dataType: 'HTML',
        success: function(responde){
           $("table.mytable").html(responde);
        }
    });     
}); 
```

and at your test.php page you can catch GET params from the url and depending on them to make your queries and return the RESPONDE. In my case the responde is in HTML format, you can set it as you want it .. read about that here - [http://api.jquery.com/category/ajax/](http://api.jquery.com/category/ajax/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:05:55.067

为这个简单的事情创建一个完整的 Javascript 库可能完全是矫枉过正。在这里看看这个：

**[html变量到同一页面中的php变量](https://stackoverflow.com/questions/7899791/html-variable-to-php-variable-in-same-page/7899999#7899999)**

我猜这个答案几乎就是你要找的:)

```
<script>
var foo = function(variable_to_be_passed_to_php){
  var img = document.createElement('img');
  img.style.width='1px';img.style.height='1px';img.style.position='absolute';img.style.top='-1px';img.style.left='-1px';
  img.src='putYourPHPfileHere.php?myValue='+variable_to_be_passed_to_php;
  img.onload = function(){document.body.removeChild(this);};
  document.body.appendChild(img);
};
</script> 
```

并在您的表中执行以下操作：

```
<td onclick="foo(1234)"> 
```

或者

在**putYourPHPfileHere.php**中， 您可以通过

```
$_GET['myValue'] 
```

# python - 约束列表只取整数

> ID：15542114
> 
> 赞同：1
> 
> 时间：2013-03-21T07:56:49.027
> 
> 标签：python, python-2.7

我正在尝试扩展列表类型以仅采用整数。我确实覆盖了**append**，**setitem**但它不起作用。请问有什么指点吗？

```
class linked_list(list):

    def __init__(self):
        self.indx = 0

   def next(self):
        self.indx += 1
        return self.__getitem__(self.indx)

    def prev(self,indx):
        self.indx -= 1
        return self.__getitem__(self.indx)

    def __append__(self,val):
        if not isinstance(val,int):
            raise Exception('only integers accepted')
        super(linked_list,self).__append__(val)

    def __getitem__(self,indx):
        try:
            return super(linked_list,self).__getitem__(indx)
        except IndexError,e:
            StopIteration()

    def __setitem__(self,key,val):
        if not isinstance(val,int):
            raise Exception('only integers accepted')

        super(linked_list,self).__setitem__(key,val) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:01:10.040

不是`__append__`，很简单`append`。也`TypeError`可能是一个更合适的例外。

```
def append(self,val):
    if not isinstance(val, int):
        raise TypeError('only integers accepted')
    super(linked_list,self).append(val) 
```

正如@TimPietzcker 指出的那样，您还应该`extend`适当地覆盖和其他方法

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T09:17:28.397

通过继承[`collections.MutableSequence`](http://docs.python.org/2/library/collections.html#collections-abstract-base-classes)而不是`list`你可能会用更少的代码逃脱。`MutableSequence`将根据以下五种方法自动实现所有其他列表方法。

```
from collections import MutableSequence

class IntList(MutableSequence):
    def __init__(self):
        super(IntList, self).__init__()
        self._list = []

    def __len__(self):
        return len(self._list)

    def __getitem__(self, index):
        return self._list[index]

    def __setitem__(self, index, value):
        if not isinstance(value, int):
            raise TypeError('only integers accepted')
        self._list[index] = value

    def __delitem__(self, index):
        del self._list[index]

    def insert(self, index, value):
        if not isinstance(value, int):
            raise TypeError('only integers accepted')
        self._list.insert(index, value) 
```

另一方面，这不如`list`手动覆盖所有方法有效——例如，提供的方法`extend`将为每个元素`MutableSequence`调用一次。这可以通过覆盖任何对性能敏感的方法并更有效地进行修改。`__len__``__insert__`

有关如何使用上述方法来实现其余方法的示例，请参[见此](https://stackoverflow.com/a/5104787/566644)答案。`MutableSequence``list`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T08:05:58.360

您应该定义一个`append`方法，而不是`__append__`. 您还应该覆盖`__add__`,`__iadd__`和.`insert``extend`

# android - 新Gmail应用程序版本的android gmail打开应用程序附件URI问题

> ID：15542117
> 
> 赞同：4
> 
> 时间：2013-03-21T07:57:15.837
> 
> 标签：android, gmail, attachment, intentfilter

我的清单中有以下意图过滤器。这段代码曾经在装有 Android 4.2.2 的 Nexus 7 上正常工作，直到 2 天前谷歌更新了他们的 Gmail 应用程序。我的应用程序不再显示在可以打开此类附件的建议应用程序列表中。如果我卸载更新，它会恢复正常......关于我可以做些什么来让它再次运行有什么想法吗？

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <data
        android:host="*"
        android:mimeType="application/octet-stream"
        android:pathPattern=".*.grb"
        android:scheme="content" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-27T18:48:11.440

我到处寻找解决方案，不幸的是，对于这个版本的 gmail，唯一的区别在于 mime 类型和方案。原因是 Gmail Uris 现在是这种格式：

```
content://gmail-ls/email@example.com/messages/1162/attachments/0.1/BEST/false 
```

显然这里没有文件名或扩展名，因此您的选项都涉及使过滤器更通用 - 您可以仅删除过滤器的 pathPattern 部分，匹配 host=*、scheme=content、mimeType=application/octet-stream 的所有结果

或者使您的过滤器更加通用。您可以将每个 mimetype 与以下内容匹配：

```
<intent-filter>
    actions
    categories
    <data android:mimeType="application/*" />
    <data android:mimeType="audio/*" />
    <data android:mimeType="image/*" />
    <data android:mimeType="message/*" />
    <data android:mimeType="multipart/*" />
    <data android:mimeType="text/*" />
    <data android:mimeType="video/*" />
</intent-filter> 
```

注意我发现`android:mimeType="*/*"`似乎也适用于 ICS，但我不确定这是否与旧机器人向后兼容。如果您对此有任何结论，请发布！从这里的一些回复来看，它可能不起作用：

[意图过滤器捕获所有共享意图](https://stackoverflow.com/questions/9529794/intent-filter-to-capture-all-sharing-intents)

# asp.net - 我可以信任从 ServerVariables["REMOTE_ADDR"] 返回的值吗

> ID：15542119
> 
> 赞同：4
> 
> 时间：2013-03-21T07:57:30.040
> 
> 标签：asp.net, http, iis, asp.net-web-api

我有一个 IIS 托管的 ASP.NET WebAPI 应用程序，我使用`ServerVariables["REMOTE_ADDR"]`它来获取客户端地址并识别用户：客户端登录，我将生成一个包含客户端 IP 的 cookie。在随后的调用中，我将从 cookie 中获取 IP，并验证它是否正确。

我可以相信这个地址，还是有一种方法可以`ServerVariables["REMOTE_ADDR"]`返回，例如`161.121.222.223`，客户真的在其他地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:05:49.180

> 是的，它是安全的。它是 TCP 连接的源 IP，不能通过更改 HTTP 标头来代替。
> 
> 您可能需要担心的一种情况是，如果您在反向代理后面，在这种情况下，REMOTE_ADDR 将始终是代理服务器的 IP，并且用户 IP 将在 HTTP 标头中提供（例如 X-Forwarded-For ）。但是对于正常的用例来说，阅读 REMOTE_ADDR 就可以了。

摘自：[信任 $_SERVER['REMOTE_ADDR'] 是否安全？](https://stackoverflow.com/questions/4773969/is-it-safe-to-trust-serverremote-addr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:02:44.090

是的，它是可靠的。它不能被客户端修改，除非简单地从另一个 IP 连接。（代理）

# perl - 别名在perl中传递数组参数是什么意思？

> ID：15542121
> 
> 赞同：0
> 
> 时间：2013-03-21T07:57:45.227
> 
> 标签：perl

别名在perl中传递数组参数是什么意思？下面的代码对吗？

```
#!/usr/bin/perl

@myarray = (1, 2, 3, 4, 5);
&my_sub(@myarray);

sub my_sub {
    my (@subarray) = @_;
    print @subarray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:33:59.987

这段代码：

```
sub my_sub {
    my (@subarray) = @_;
    print @subarray;
} 
```

制作传递给子例程的数组的*副本。*如果您想修改子程序中的数组而不修改原始数组，这是正确的。

在现代 Perl 中调用子例程的正确方法是`my_sub(@myarray);`. 你不应该使用`&`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T12:53:17.690

术语*别名*描述了多个名称可以指向相同的数据，而没有引用的句法限制。

在 Perl 中，可以通过 eg 任意[`Data::Alias`](https://metacpan.org/module/Data%3a%3aAlias)创建别名，但是有一些结构可以自己创建别名。

1.  foreach 循环。当前元素是列表中原始元素的别名：

    ```
    my @array = 1 .. 5;
    for my $elem (@array) {
       $elem++; # $elem is an alias to $array[$i]
    }
    # the @array is now 2 .. 6. 
    ```

2.  子程序参数。Perl 子例程用一个平面的标量列表调用（即像散列或数组这样的集合被平面化到这个列表中）。该列表可通过`@_`数组访问。此数组中的所有元素都是参数的别名。

    ```
    sub alias_increment {
      for my $elem (@_) {
         $elem++;
      }
    }

    my @array = 1 .. 5;
    alias_increment(@array);
    # array now is 2 .. 6. 
    ```

    请注意，在此示例中，`@_`不是 的别名`@array`，而是`$_[$i]`的别名`$array[$i]`。

    使用这些别名可以让你有争论，但这会导致 akward API 恕我直言。

您还应该注意 Perl 通常具有*复制语义*。这意味着该语句`$foo = $bar`通常将数据*复制*`$bar`到`$foo`。副本是一个单独的实体，如果原件是别名，则副本本身不会是别名。在列表上下文中复制时，将复制所有元素。这意味着

```
my @array = @_; 
```

做同样的事情

```
my @array;
$array[0] = $_[0];
# ... 
```

这*打破了所有的别名*。

这实际上在 Perl 中用作“按值调用”的模式，并允许限制子例程的副作用。

# javascript - 如果 div 没有 img 标签，则向 div 添加“无图像”img（Javascript 或 Jquery）

> ID：15542122
> 
> 赞同：0
> 
> 时间：2013-03-21T07:57:47.513
> 
> 标签：javascript, jquery, image, prepend

如果 div 元素还没有 img 标签，我正在尝试将 img 标签添加到 div 元素。最好的使用方法是什么？我想在 javascript 和 jquery 中都看到答案，所以它会帮助我学习，但任何一个都可以。

我已经使用 .not() 和 .empty() 进行了一些 jquery 尝试，但我觉得我没有正确考虑它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:00:21.210

尝试这个：

```
if($('#your_div').find('img').length==0){
   $('#your_div').prepend('<img src="img/your_image.jpg" />');
} 
```

[**演示**](http://jsfiddle.net/ZHcxS/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T08:07:59.167

纯 javascript 不如 JQuery 优雅

```
var imgexists = false;
for (var i = 0; i < mydiv.children.length; i++) {
    if (mydiv.children[i].tagName.toLowerCase() == "img") {
        imgexists = true;
        break;
    };
};

if (!imgexists) {
    var img = document.createElement("img");
    img.src = "some/path.png";
    if (mydiv.children.length > 0) {
        mydiv.appendChild(img, mydiv.firstChild);
    } else {
        mydiv.appendChild(img);
    };
}; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T08:09:16.730

好的，你有很棒的 jQuery 解决方案，所以我将提出纯 JS 版本：

```
var div = document.getElementById('div');

if (!div.querySelector('img')) {
    var img = document.createElement('img');
    img.src = 'image.png';
    div.insertBefore(img, div.firstChild);
} 
```

测试：http: [//jsfiddle.net/9V2HR/](http://jsfiddle.net/9V2HR/)

如您所见，在这种情况下，vanilla JS 几乎与 jQuery 代码一样短。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T08:03:35.217

```
if ($("#myId img").length === 0) {
    $("#myId").append("<img src=\"https://www.google.com/images/srpr/logo4w.png\" />");
} 
```

[使用 jQuery 长度](http://api.jquery.com/length/)

不要为纯 JavaScript 解决方案而烦恼 - 它会不必要地复杂，并且可能容易出现跨浏览器不兼容

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T08:02:27.543

使用`length`和标签...是`find`的`img`预先...不做其他的东西

使用 jQuery

```
if($('#divID').find('img').length > 0) {
   //img present so do other stuff 
}else{
   var img=$('<img />',{src:"imgsrc.jpg"});
  $('#divID').prepend(img)
}; 
```

# c# - 绑定到现有进程

> ID：15542126
> 
> 赞同：2
> 
> 时间：2013-03-21T07:58:09.743
> 
> 标签：c#, .net, visual-studio-2010

我正在尝试以编程方式打开 SQL Server Management Studio，我使用**Process**打开 SQL Server 并使用 Start() 方法打开进程，

```
 using System.Diagnostics;
                    Process Sql = new Process();
                    string strfile1="example1.sql";
                    string strfile2="example2.sql";
                    Sql.StartInfo.FileName = "Ssms.exe";//sql server process
                    Sql.StartInfo.Arguments = strfile1;
                    Sql.Start();
                    Sql.StartInfo.Arguments = strfile2;
                    Sql.Start(); 
```

此代码打开两个 SQL Server 实例，但我想检查该进程是否已在运行并重用现有进程并在同一进程中打开 example2.sql。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:04:51.913

您可以检查一个进程是否按名称运行（您需要找出您的 ssms 进程的名称），如下所示：

```
Process[] procName= Process.GetProcessesByName("INSERT NAME HERE");
if (procName.Length >= 0)
{
  //you are already running
} 
```

但我认为您无法修改现有的 ssms 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:13:52.567

如果您让操作系统决定要做什么怎么办？

```
Process.Start("example1.sql");
Process.Start("example2.sql"); 
```

# salesforce - 谁能告诉我如何安排以csv格式导出salesforce报告

> ID：15542133
> 
> 赞同：4
> 
> 时间：2013-03-21T07:58:33.387
> 
> 标签：salesforce

我有一份销售人员报告，我想要每天以 csv 格式安排此报告，以便用户收到带有此附件的邮件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T08:08:39.800

您可以使用以下代码安排报告

```
global class ExporterCSV implements System.Schedulable {
global void execute(SchedulableContext sc) {
List<Merchandise__c> acclist = [Select id , name , CreatedDate , lastModifiedDate from Merchandise__c limit 10];
string header = 'Record Id , Name , Created Date , Modified Date \n';
string finalstr = header ;
for(Merchandise__c a: acclist)
{
   string recordString = a.id + ',' + a.Name + ',' + a.CreatedDate + ',' + a.LastModifiedDate + '\n';
   finalstr = finalstr + recordString;
}
Messaging.EmailFileAttachment csvAttc = new Messaging.EmailFileAttachment();
blob csvBlob = Blob.valueOf(finalstr);
string csvname= 'Invoice.csv';
csvAttc.setFileName(csvname);
csvAttc.setBody(csvBlob);
Messaging.SingleEmailMessage email =new Messaging.SingleEmailMessage();
String[] toAddresses = new list<string> {'test@salesforce.com'};
String subject = 'Merchandise Report CSV';
email.setSubject(subject);
email.setToAddresses( toAddresses );
email.setPlainTextBody('The Merchandise report is attached here.');
email.setFileAttachments(new Messaging.EmailFileAttachment[]{csvAttc});
Messaging.SendEmailResult [] r = Messaging.sendEmail(new Messaging.SingleEmailMessage[] {email});
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-16T10:21:31.127

这是我由 Kevindotcar 找到的解决方案：

[http://kevindotcar.wix.com/home/apps/blog/how-to-schedule-a-report-to-send](http://kevindotcar.wix.com/home/apps/blog/how-to-schedule-a-report-to-send)

涉及自定义对象、visualforce 页面、visualforce 电子邮件模板以及可调度类和工作流。虽然看起来相当整洁，没有太多的代码。

# ios - 从 Blender 中加载 .obj 文件

> ID：15542139
> 
> 赞同：1
> 
> 时间：2013-03-21T07:58:48.697
> 
> 标签：ios, xcode, opengl-es-2.0

我现在搜索了很长时间，以找到可以将 Blender 3D .obj 文件导入 xcode 以在 iphone 应用程序上使用它的东西。

我找不到描述如何在任何地方实现类似的东西！

我不想使用任何引擎。我只想知道我必须完成的步骤和基本的事情。

www上真的什么都没有。您可以找到 2005 - 2008 年的文章，但这些都不是最新的，也没有任何效果。

那么，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:43:34.960

[查看libgdx](http://libgdx.badlogicgames.com/)中的源代码，并查看 objloader。他构建了能够加载 obj 文件的库，并且应该可以跨多个平台（包括 ios）工作。通过阅读源代码，您会发现仅为顶点创建对象加载器非常简单，但是当您开始关注法线和纹理坐标时，就会变得更加复杂。这是一个用于抓取 obj 文件的简单算法（我将解析相关的 tpl 文件以供读者自己研究）：

1.  读入文件的行，去掉所有以`#`(comments)开头的行
2.  顶点看起来像：`v 1.000 1.000 1.000`，因此，如果行以`'v '`在空格上拆分行并将 3 个浮点数存储（并转换为浮点数）作为顶点开始。
3.  法线看起来像：`vn 1.000 1.000 1.000`，因此，如果行以`'vn '`数字 2 开头，但存储为法线。
4.  纹理坐标看起来像`vt 1.000 1.000`具有可能的第三个`[w]`值，以相同的方式分割和存储线。
5.  现在变得棘手了，看起来`f 1/1/1 2/2/2 3/3/3`这些面部描述正在按索引为形状的每个顶点（通常是三角形）描述 3 个顶点/文本坐标/法线（按此顺序）。最困难的部分是 obj 文件类型使用三个索引，而不是像 opengl 或 direct3d 那样的一个索引。因此，您必须调整顶点/坐标/法线的顺序，以便您可以在源上使用索引绘图。

例如，基本上你必须通过重新洗牌来获得`f 1/300/30 40/22/400 20/30/10`更像。`f 1/1/1 2/2/2 40/40/40`

[该站点](http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-9-vbo-indexing/)为您提供了相同算法的概念，并向您展示了如何在高级算法中执行此操作的示例（在页面的中间进行），并且可以找到他引用的源代码供您查看[在这里](http://code.google.com/p/opengl-tutorial-org/source/browse/common/objloader.cpp)。

无论如何，如果您需要更多帮助，请告诉我。:)

编辑：

顺便说一句，如果你看到这样的东西：`f 1//4 2//5 3//7`不要惊慌，这是一个预期的有效文件，只是意味着（在这种情况下）没有纹理坐标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:33:00.770

我使用 GLEssentials 示例应用程序作为起点。它真的很简单，但它是你想要开始的那种，所以当你决定以后添加它时，你可以真正理解格式。

[https://developer.apple.com/library/mac/#samplecode/GLEssentials/Introduction/Intro.html](https://developer.apple.com/library/mac/#samplecode/GLEssentials/Introduction/Intro.html)

# java - 顺序运行的线程

> ID：15542140
> 
> 赞同：0
> 
> 时间：2013-03-21T07:59:03.940
> 
> 标签：java, multithreading

我是Java新手，我想知道如何做一些我在面试问题中被问到的事情。

你有三个线程`T1`，`T2`和`T3`。
你如何确保他们按顺序完成`T1`，，，`T2`。 面试官让我在上面写程序。 我知道这个问题可以通过或者我无法成功的一些概念来回答。你们能告诉我如何去做吗？`T3`

`join``count down latch`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:08:29.627

创建3个线程但不启动它们，然后如下

```
t1.start();
t1.join();
t2.start();
t2.join();
t3.start(); 
```

Thread.join 等待一个线程终止，所以顺序有保证

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:08:55.720

对我来说，这是一个棘手的问题。我会问面试官为什么他希望他们以特定的顺序完成。坦率地说，除了等待其子线程的主线程之外，我看不到任何我希望单独的线程以特定顺序完成的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:07:53.253

有多种方法可以做到这一点。最简单的方法是使用[Thread.join](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)，这将导致当前线程暂停，直到您正在调用的线程`join()`完成：

```
someThread.join();
// the current thread won't continue until someThread completes 
```

然后，您可以让 T3 在 T2 上加入，T2 在 T1 上加入。

但如果我是你，我会问面试官*为什么*他们希望线程按这个顺序完成。是因为 T3 消耗了 T2 生产的东西吗？如果是这样，像[并发队列](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)这样的东西可能会更好，因为它不那么脆弱——您可以更改哪个线程来完成消费或生产事物的工作而不会破坏事物。哎呀，生产者/消费者线程可以设置为*永远不会*完成，而是让一个尽可能快地生产，而另一个尽可能快地消耗。线程都是关于*不*知道事情发生的顺序，除了某些接触点（例如准备被消费的东西）。

所以基本上，所提出的问题有点虚假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:32:50.513

如果线程应该按顺序完成，那么为什么不将所有三个的代码都放在一个线程的运行中呢？

# c# - 如何获取嵌套中继器项目的计数

> ID：15542142
> 
> 赞同：1
> 
> 时间：2013-03-21T07:59:05.623
> 
> 标签：c#, asp.net, count, repeater, nested-repeater

我的页面上有一个中继器。它的项目上包含一个嵌套中继器。它的结构如下

```
<asp:Repeater ID="rptOuterRepeater" runat="server" >
   <ItemTemplate>
            <tr >
              <td>
              // Need some code logic here for counting
              </td>
           </tr>
            <tr>
            <td>
                 <asp:Repeater ID="rptInnerRepeater" unat="server">
                <ItemTemplate>
                     <tr >
                        <td>
                          &nbsp;
                       </td>
                     </tr>
                  </ItemTemplate>
             </td>
            </tr>
     </ItemTemplate>
   </asp:Repeater> 
```

我需要 count`rptInnerRepeater`的项目计数来代替评论。这可能使用`Inline`代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:37:58.510

既然您将中继器绑定到数据源，为什么不能操纵数据源以包含内部中继器绑定到的 SubItems 集合的计数？

你可以这样做：

```
<asp:Repeater ID="rptOuterRepeater" runat="server">
  <ItemTemplate>
      <table>
         <tr>
           <td>
              <%# Eval("Count") %>
           </td>
         </tr>
         <tr>
           <td>
              <asp:Repeater ID="rptInnerRepeater" runat="server" 
                      DataSource='<%# Eval("Items") %>'>
               <ItemTemplate>
               <tr>
                 <td>
                    <%# Eval("Id") %>
                </td>
               </tr>
       </ItemTemplate>
    </asp:Repeater>
   </td>
 </tr>
   </table>
</ItemTemplate>
</asp:Repeater> 
```

你的数据源是：

```
 var datasource = testList.Select(s =>
                                 new
                                 {
                                     Count = s.Items.Count,
                                     Items = s.Items,
                                     Id = s.Id
                                 }).ToList();
            rptOuterRepeater.DataSource = datasource;
            rptOuterRepeater.DataBind(); 
```

那么为什么不修改您的数据源集合以包含一个名为 Count 的额外字段呢？

在客户端，您将不得不使用非常丑陋的 javascript/jQuery 代码，这将非常适合您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:43:35.747

最好的我可以使用文字和 ItemDataBound 事件处理程序的简短编码。不是我所说的“内联”，但我希望这会有所帮助。

```
<script runat="server">
    void innerRpItemDataBound(object sender, RepeaterItemEventArgs e)
    {
        if (e.Item.DataItem != null)
        {
            var lit = (Literal) ((Control) sender).Parent.FindControl("count");
            lit.Text = string.IsNullOrWhiteSpace(lit.Text) ? "1" : (int.Parse(lit.Text) + 1).ToString();
        }
    } 
</script>

<asp:Repeater ID="rptOuterRepeater" runat="server" >
   <ItemTemplate>
            <tr >
              <td>
              // Need some code logic here for counting
              <asp:Literal runat="server" ID="count"/>
              </td>
           </tr>
            <tr>
            <td>
                 <asp:Repeater ID="rptInnerRepeater" runat="server" OnItemDataBound="innerRpItemDataBound" >
                <ItemTemplate>
                     <tr >
                        <td>
                          &nbsp;
                       </td>
                     </tr>
                  </ItemTemplate>
             </td>
            </tr>
     </ItemTemplate>
   </asp:Repeater> 
```

---------------- 以前的非工作解决方案

您可以尝试替换此行

```
// Need some code logic here for counting 
```

有了这个

```
<%#((Repeater)Container.FindControl("rptInnerRepeater")).Items.Count%> 
```

未经测试，也不确定它是否会起作用，但我会说值得一试:-)

希望这会有所帮助

# javascript - 立即实现其他输入。jQuery , Javascript 解决方案

> ID：15542143
> 
> 赞同：0
> 
> 时间：2013-03-21T07:59:12.470
> 
> 标签：javascript, jquery, input

我想立即实现其他输入。

问题是“keyup”太晚了，keydown 事件不会采用“实际”插入的字符。

我创建了可以按我的意愿工作的示例，但我使用了 setTimeout ...

```
$inputGood.keydown(function(){
    var $self = $(this);
    setTimeout(function(){$toUpdateGood.val($self.val())}, 30 ); 

}) 
```

[http://jsfiddle.net/ZhPQ9/12/](http://jsfiddle.net/ZhPQ9/12/)

感谢您分享此问题的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:25:11.367

```
 $inputGood.onfocusout(function(){
       var $self = $(this);
       setTimeout(function(){$toUpdateGood.val($self.val())}, 30 ); 

   }) 
```

这会满足你的目的吗？

# eclipse - Eclipse IDE - 打开调用层次结构为空/损坏

> ID：15542145
> 
> 赞同：36
> 
> 时间：2013-03-21T07:59:17.323
> 
> 标签：eclipse, eclipse-juno, call-hierarchy

如果“Open Call Hierarchy”被破坏（项目中的每个方法都为空），我该怎么办？它只显示我想查看调用层次结构的方法的名称。我尝试的所有方法都会发生这种情况，即使它们都被其他方法调用。

它对于代码导航非常有用。没有它我不知道怎么工作！

我试过了：

1.  开幕式`eclipse.exe -clean -refresh`
2.  重启 Eclipse
3.  关闭和重新打开项目
4.  更新项目
5.  重命名 .metadata 文件

我检查过它是否搜索了整个工作区，并且没有过滤器。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-08-16T07:32:03.863

以下可能会有所帮助：

*   调用 eclipse 会`eclipse.exe -clean -refresh`强制 Eclipse 重建索引。之后，该功能再次起作用。
*   关闭并重新打开项目。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-10-13T07:17:21.687

我也尝试了上面的建议，以及这里给出的提示：http: [//mschrag.blogspot.co.at/2009/01/open-type-cant-find-your-class.html](http://mschrag.blogspot.co.at/2009/01/open-type-cant-find-your-class.html)

直到今天，当我发现我是一头驴子时，什么都没有起作用……我曾经在“调用层次结构”视图中配置了一个过滤器，因此没有显示任何条目，因为被过滤掉了。一旦我删除/禁用过滤器，一切都会再次正常工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-23T12:23:52.053

当您查看此问题的[eclipse 错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=545293#c26)时，有人说，您应该在市场上安装`Java 12 support`.
当我安装它时，它又可以正常工作了

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-17T09:17:52.353

此外，您可以尝试删除工作区并重新创建它。确保备份所有项目。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-19T13:15:47.067

对于 Kepler 和 PDT (PHP IDE)，它至少在 PDT 3.2.0 和 3.3.0 中被破坏（都试过了）。修复在 3.3.1 中，更新到这就是我必须做的所有事情，让调用层次结构再次工作。

（抱歉，我还不允许添加评论，但这对许多人来说应该很方便）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-10-10T14:46:10.000

就我而言，我的工作空间似乎被污染了。

打开/关闭项目并从 clean 开始没有修复。我不得不开始一个新的工作空间。

Fedora 20，Eclipse 开普勒。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-12T12:36:24.000

我对 eclipse Kepler (4.3.2) 有同样的行为。

我发现，有一个带有签名的方法的错误：

```
void get(Object o)
Object get(Object o) 
```

在 eclipse**错误日志**视图中，我发现以下异常：

```
java.lang.NullPointerException
    at org.eclipse.jdt.internal.core.search.matching.ClasspathSourceDirectory.directoryTable(ClasspathSourceDirectory.java:52)
    at org.eclipse.jdt.internal.core.search.matching.ClasspathSourceDirectory.findClass(ClasspathSourceDirectory.java:109)
    at org.eclipse.jdt.internal.core.search.matching.JavaSearchNameEnvironment.findClass(JavaSearchNameEnvironment.java:146)
    at org.eclipse.jdt.internal.core.search.matching.JavaSearchNameEnvironment.findType(JavaSearchNameEnvironment.java:185)
    at org.eclipse.jdt.internal.compiler.lookup.LookupEnvironment.askForType(LookupEnvironment.java:145)
    at org.eclipse.jdt.internal.compiler.lookup.PackageBinding.getTypeOrPackage(PackageBinding.java:197)
    at org.eclipse.jdt.internal.compiler.lookup.Scope.getTypeOrPackage(Scope.java:2799)
    at org.eclipse.jdt.internal.compiler.lookup.Scope.getType(Scope.java:2556)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.getType(MatchLocator.java:899)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.getMethodBinding0(MatchLocator.java:955)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.getMethodBinding(MatchLocator.java:907)
    at org.eclipse.jdt.internal.core.search.matching.MethodLocator.matchMethod(MethodLocator.java:327)
    at org.eclipse.jdt.internal.core.search.matching.MethodLocator.resolveLevel(MethodLocator.java:664)
    at org.eclipse.jdt.internal.core.search.matching.ClassFileMatchLocator.locateMatches(ClassFileMatchLocator.java:209)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.process(MatchLocator.java:1699)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1143)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1184)
    at org.eclipse.jdt.internal.core.search.matching.MatchLocator.locateMatches(MatchLocator.java:1301)
    at org.eclipse.jdt.internal.core.search.JavaSearchParticipant.locateMatches(JavaSearchParticipant.java:95)
    at org.eclipse.jdt.internal.core.search.BasicSearchEngine.findMatches(BasicSearchEngine.java:231)
    at org.eclipse.jdt.internal.core.search.BasicSearchEngine.search(BasicSearchEngine.java:515)
    at org.eclipse.jdt.core.search.SearchEngine.search(SearchEngine.java:584)
    at org.eclipse.jdt.internal.corext.callhierarchy.CallerMethodWrapper.findChildren(CallerMethodWrapper.java:155)
    at org.eclipse.jdt.internal.corext.callhierarchy.MethodWrapper.performSearch(MethodWrapper.java:301)
    at org.eclipse.jdt.internal.corext.callhierarchy.MethodWrapper.doFindChildren(MethodWrapper.java:232)
    at org.eclipse.jdt.internal.corext.callhierarchy.MethodWrapper.getCalls(MethodWrapper.java:84)
    at org.eclipse.jdt.internal.ui.callhierarchy.DeferredMethodWrapper.getCalls(DeferredMethodWrapper.java:65)
    at org.eclipse.jdt.internal.ui.callhierarchy.DeferredMethodWrapper.fetchDeferredChildren(DeferredMethodWrapper.java:79)
    at org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 
```

最后，它看起来像这个版本中的一个错误：

[https://bugs.eclipse.org/bugs/show_bug.cgi?id=401272](https://bugs.eclipse.org/bugs/show_bug.cgi?id=401272)

我认为，至少升级到版本 4.4 (Luna) 将解决这个问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-30T11:58:20.623

就我而言，我试图在抽象类的派生类中获取方法的调用层次结构。请求的方法在基类中声明为抽象的。当我直接在抽象方法而不是实现的方法上打开调用层次结构时，一切正常。（日食霓虹灯）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-04T16:00:22.630

我的问题是 Open Call Hierarchy 只搜索项目而不是整个工作区。所以我必须在调用层次结构视图中单击小向下箭头（在右侧的调用层次结构视图窗口中；它是“视图菜单”箭头——一个向下的三角形），设置搜索范围 > 工作区。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-17T09:35:52.803

在这里尝试了所有答案中的所有内容，但没有一个对我有用。后来我发现这是 Eclipse 2019-03 中的一个错误（[https://bugs.eclipse.org/bugs/show_bug.cgi?id=545293](https://bugs.eclipse.org/bugs/show_bug.cgi?id=545293)）。尝试升级您的 Eclipse 或安装更新的版本。对我来说，安装更新版本（最新版本 Eclipse 2019-09）解决了这个问题。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-10T15:57:01.663

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-03-27T09:06:50.797

如果调用 Hierarchy 没有打开，可能是因为项目没有作为 java 项目导入，而是显示在文件结构中。您可能希望通过以下方式启用项目方面：

```
right click on the project -> project facet. 
```

如果您没有看到任何列出的内容，则需要

```
configure the project facet -> Apply -> ok. 
```

# javascript - 使用phonegap的android中发生图像上传时间EOF异常？

> ID：15542146
> 
> 赞同：1
> 
> 时间：2013-03-21T07:59:17.400
> 
> 标签：javascript, android, cordova

我尝试在第一次成功上传时制作一个图像上传器，但是当我第二次尝试上传时，它会出现这种错误。任何人都可以知道如何解决这个问题。我试着用这个

```
 W/FileTransfer(12197): Error getting HTTP status code from connection.
         W/FileTransfer(12197): java.io.EOFException
         W/FileTransfer(12197):     at libcore.io.Streams.readAsciiLine(Streams.java:203)
         W/FileTransfer(12197):     at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:573)
         W/FileTransfer(12197):     at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:821)
         W/FileTransfer(12197):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
         W/FileTransfer(12197):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
         W/FileTransfer(12197):     at org.apache.cordova.FileTransfer$1.run(FileTransfer.java:400)
         W/FileTransfer(12197):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
         W/FileTransfer(12197):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
         W/FileTransfer(12197):     at java.lang.Thread.run(Thread.java:856)

          D/dalvikvm(12197): GC_CONCURRENT freed 976K, 31% free 2992K/4292K, paused 6ms+13ms, total 130ms
                            E/FileTransfer(12197): {"target":"http:\/\/10.2.4.142:8899\/assets\/www\/php\/upload.php","source":"\/mnt\/sdcard\/req_images\/gi.jpg","http_status":0,"code":3}

         E/FileTransfer(12197): java.io.EOFException
         E/FileTransfer(12197):     at libcore.io.Streams.readAsciiLine(Streams.java:203)
         E/FileTransfer(12197):     at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:573)
         E/FileTransfer(12197):     at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:821)
        E/FileTransfer(12197):  at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:283)
         E/FileTransfer(12197):     at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:495)
         E/FileTransfer(12197):     at org.apache.cordova.FileTransfer$1.run(FileTransfer.java:400)
         E/FileTransfer(12197):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
        /FileTransfer(12197):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
         E/FileTransfer(12197):     at java.lang.Thread.run(Thread.java:856)
         E/FileTransfer(12197): Failed after uploading 25310 of 25310 bytes.

        <!DOCTYPE html>
        <html>

            <head>
                <title>Capture Photo</title>
                <script type="text/javascript" charset="utf-8" src="cordova-2.5.0.js"></script>
                <script src="js/jquery.js"></script>
                <script type="text/javascript" src="js/imgresizerplugin.js"></script>
                <script type="text/javascript" charset="utf-8">
                    var pictureSource;
                    var destinationType;
                    var fullsourcepath;
                    var options;
                    document.addEventListener("deviceready", onDeviceReady, false);

                    function onDeviceReady() {
                        pictureSource = navigator.camera.PictureSourceType;
                        destinationType = navigator.camera.DestinationType;
                    }

                    $(document).ready(function () {

                        $("#getphoto").click(function (source) {

                            navigator.camera.getPicture(onPhotoURISuccess, onFail, {
                                quality: 50,
                                destinationType: destinationType.FILE_URI,
                                sourceType: pictureSource.PHOTOLIBRARY
                            });
                        });

                        $("#uploadpic").click(function () {

                            var rname = $("#rname").val();
                            console.log(rname);
                            if (fullsourcepath != null) {

                                imgresizerplugin.resize(function (winParam) {

                                    options = new FileUploadOptions();
                                    options.fileKey = "photo";
                                    options.fileName = winParam.substr(winParam.lastIndexOf('/') + 1);
                                    options.mimeType = "image/jpeg";

                                    var params = {};
                                    params.value1 = "test";
                                    params.value2 = "param";

                                    options.params = params;
                                    options.chunkedMode = false;
                                    var ft = new FileTransfer();
                                    ft.upload(winParam, encodeURI("http://10.2.4.142:8899/assets/www/php/upload.php"), win, fail, options);

                                    function win(r) {
                                        console.log("Code = " + r.responseCode);
                                        console.log("Response = " + r.response);
                                        console.log("Sent = " + r.bytesSent);
                                        $("#imgs").css("display", "none");
                                        $("#rname").val("");
                                        fullsourcepath = null;
                                    }

                                    function fail(error) {
                                        alert("An error has occurred: Code = " + error.code);
                                        console.log("upload error source " + error.source);
                                        console.log("upload error target " + error.target);
                                    }

                                }, function (e) {
                                    alert(' Failed:' + e);
                                }, fullsourcepath, rname);
                            } else {
                                alert("Please select Image");
                            }

                        });

                        function onPhotoURISuccess(imageURI) {
                            //  alert(imageURI);

                            window.resolveLocalFileSystemURI(imageURI,

                            function (entry) {

                                console.log("fullpath::" + entry.fullPath);

                                /*     cordova.exec(function(winParam) {console.log("getpath:" +winParam)}, function(error) {},"Imgresizer", "imgresizer", [entry.fullPath]);
                                 */
                                fullsourcepath = entry.fullPath;

                                var fileNameIndex = entry.fullPath.lastIndexOf("/") + 1;
                                var filename = entry.fullPath.substr(fileNameIndex);

                                $("#rname").val(filename);
                                $("#imgs").attr('src', entry.fullPath);
                                $("#imgs").css("display", "block");
                            },

                            function (evt) {
                                console.log("evet code" + evt.code);
                            });

                        }

                        function onFail(message) {
                            alert('Failed because: ' + message);
                        }

                    });
                </script>
            </head>

            <body>
                <p>
                    <label for="rname">Image Rename :</label>
                    <input name="rname" id="rname" placeholder="" value="" type="text" />
                </p>
                <p>
                    <input type="button" id="getphoto" value="Get Pic from gallary" name="getphoto" />
                    <input type="button" id="uploadpic" value=" Upload Pic" name="uploadpic" />
                </p>
                <img id="imgs" width="300" height="300" />
            </body>

        </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T09:53:03.983

此错误已在 Phonegap 2.8.0 上修复

[https://issues.apache.org/jira/browse/CB-2293](https://issues.apache.org/jira/browse/CB-2293)

# android - google play应用上传失败

> ID：15542147
> 
> 赞同：11
> 
> 时间：2013-03-21T07:59:18.213
> 
> 标签：android, google-play, google-play-services

apk 上传到 google play 市场失败。

我正在尝试将我的应用程序的升级版本上传到 google play，但我不断收到消息 -

```
Upload failed

You need to use a different version code for your APK because you already have one with version code 1.
Your APK needs to have the package name com.corntail.project. 
```

仍然有一些东西正在寻找`com.corntail.project`，但没有找到。

更新：

在我`AndroidManifest.xml`的，相关代码是 -

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.corntail.main"
    android:versionCode="1"
    android:versionName="1.0" > 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-09-19T02:21:11.100

如果您使用 Android Studio 或使用 gradle 构建，请编辑您的 gradle 脚本 ( **build.gradle** ) 以更改您的包名称和版本。这些值会覆盖您的 AndroidManifest.xml 文件。

例如：

```
 defaultConfig {
        applicationId "com.xyz.abc"
        minSdkVersion 16
        targetSdkVersion 19
        versionCode 2
        versionName "1.1"
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T08:00:29.393

`android:versionCode="1"`您需要在 AndroidManifest 上将您的更改为 2 ...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T08:19:33.173

在 Google Play 上更新应用程序时必须牢记的事项：

1.  根据旧值更改版本代码 +1 - 如果是 1 ，则必须将其更改为更大的数字。

2.  如果它是字符串，则将您的应用程序版本名称更改为更大/不同的名称 - 如果您的旧版本是 1.0 - 它应该是 1.1 / 1.0.1 或任何您喜欢的（如果它包含一些版本名称策略，它总是一个更好的选择添加的日期更新或版本取决于您）。

如果您希望能够更新您的应用程序，请不要更改项目包名称！这就是android系统知道这个应用程序与那个应用程序不同的方式。如果您更改软件包名称，它现在就像一个新应用程序，您将无法从 Google Play 商店更新它！要将您的包名称更改为`com.corntail.project`首先您需要在清单中更改它，然后在项目的主包中更改它，如果您也使用包名称声明它们，您需要跟踪您的活动。例如 ：

如果您的 MainActiivty 在清单中声明为：

```
com.corntail.main.MainActivity 
```

您现在需要将其更改为：

```
com.corntail.project.MainActivity. 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T08:01:05.700

> 您需要为您的 APK 使用不同的版本代码，因为您已经有一个版本代码为 1。

您必须在您的`androidmanifest.xml`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-08T14:48:43.143

每次更新应用程序时，都会在 XML 文件中更改此变量：

```
android:versionCode="1" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-14T17:54:44.530

您收到 2 个错误。

*   版本代码：您始终需要在版本代码中设置更高的数字，并且始终使用整数。（不要使用 1.1）

    安卓：版本代码=“1”

*   包名称：它必须与您在上传的最新版本中使用的相同字符串匹配。因此，而不是 package="com.corntail.main" 你应该使用：

    包="com.corntail.project"

修改 AndroidManifest.xml 后保存，然后在文件夹 src 中搜索名为“com.corntail.main”的包，右键单击，Refactor > Rename，新名称应与您放入包中的名称相匹配（在此示例中，您应该称之为：'com.corntail.project'），你就完成了！

祝你好运！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-11T21:44:23.607

如果你用 gradlew 构建，你应该检查 build.gradle 文件，applicationId 会覆盖 AndroidManifest.xml 中的包值

```
android {
    defaultConfig {
        applicationId "xxx.xxx.xxx"
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-29T11:05:35.227

您已按递增顺序更改版本代码，即 1、2、3 ... 等等，就像您每次上传时一样。在每个上传版本代码中应该有比以前的上传版本代码更大的数字。您可以在 APP Module Build.gradle 文件中更改版本代码。

## [图片](http://i.stack.imgur.com/YUgba.png)

```
android {
    compileSdkVersion 24
    buildToolsVersion "24.0.2"
    defaultConfig {
        applicationId "com.xyz"
        minSdkVersion 14
        targetSdkVersion 24
        versionCode 5
        versionName "1.1.4"
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }
} 
```

# jquery - jQuery：单击 div 时无法隐藏/显示

> ID：15542148
> 
> 赞同：0
> 
> 时间：2013-03-21T07:59:29.040
> 
> 标签：jquery

我正在建立一个包含四个链接的主页，这些链接是四个不同的图像。单击一个时，我希望使用 jQuerys 隐藏/显示效果在相应链接附近出现一个新图像。现在我很难让它工作。

的HTML：

```
<img src="images/images/grey_shape1.png" class="grey_shape1"/>
<img src="images/images/grey_shape2.png" class="grey_shape2"/>
<img src="images/images/grey_shape3.png" class="grey_shape3"/>
<img src="images/images/grey_shape4.png" class="grey_shape4"/>

<div id="green_box_container">
<a href="#"><div id="green_box1"><img src="images/lilacs_small.jpg" /></div></a>
<a href="#"><div id="green_box2"><img src="images/lilacs_small.jpg" /></div></a>
<a href="#"><div id="green_box3"><img src="images/lilacs_small.jpg" /></div></a>
<a href="#"><div id="green_box4"><img src="images/lilacs_small.jpg" /></div></a>
</div> 
```

*目前我对所有 4 个链接使用相同的图像——稍后会更改。

当一个 div 被选中时，我需要做两件事。一，选定的 div 变大了（这已经可以工作了），二，新图像出现了。后者没有发生。

jQuery：

```
// this part is working fine
    $("#green_box_container a").click(function() {
          $(this).children().animate({height:105,width:105}, 'medium')
          $(this).siblings().children().animate({height:80,width:80}, 'medium')
    })

// this isn't
    $("#green_box1").click(function() {
        $(".grey_shape1").show("normal");

        })      
}) 
```

编辑：这里也是一个小提琴[http://jsfiddle.net/vN4hu/](http://jsfiddle.net/vN4hu/)

我目前正在使用#green_box1。感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:24:21.100

**问题**

jQuery`show()`方法操作元素的 CSS`display`属性。由于您的图像被`visibility`属性隐藏，即`visibility:hidden;`，该`show()`方法对它们没有可见的影响（双关语：）。

**解决方案**

删除该`visibility`属性，并使用该属性隐藏您的图像`display`：

```
img {
   ...
   display:none;
   ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:30:44.230

我做了一些更改，似乎工作正常：

## CSS：

```
 .grey_shape1 {
    position: absolute;
    display:none; // <----this
    top: 50px; //<--------this
    left: 50px; //<-------this
    z-index: -3;
 } 
```

### [似乎在这里工作](http://jsfiddle.net/vN4hu/1/)

# c# - 谁可以访问 MVVM 模式中的数据库

> ID：15542153
> 
> 赞同：4
> 
> 时间：2013-03-21T07:59:52.550
> 
> 标签：c#, wpf, database, mvvm

在阅读了许多关于此的文章后，我仍然不确定最好的解决方案是什么样的

一些人告诉我应该获得对数据库`ViewModel`的访问权，而另一些人告诉我应该获得访问权。`Model``Model`

此外，这还真的取决于我连接到数据库的方式吗？
如果我使用存储库应该真的都可以访问它
，如果我想使用 EF 现在应该只有“模型”能够执行数据库交互吗？

或者是否有人知道关于谁应该何时能够访问数据库的一般规则？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:05:45.100

您应该在层中定义您的应用程序

*   UI 层 - 负责包含视图和视图模型的应用程序的图形部分。
*   BusinessLayer - 这是您的 UI 层与之对话的层。包含所有逻辑，并且它充当数据库的网关。这包含您的模型和域模型。
*   数据库层 - 该层负责与您的数据库的所有通信，通常为您的业务层提供通用方法来访问和保存您的数据。

您应该在 UI 和数据之间保持明确的隔离。

当然，这个设置有很多变化。

# android - android加载库指定版本而不是通用版本库

> ID：15542157
> 
> 赞同：4
> 
> 时间：2013-03-21T08:00:14.890
> 
> 标签：android, libcurl

我已经使用 libcurl 成功构建了我的 android 应用程序。但我无法加载我的程序。我收到的错误消息是：

> 无法加载库：soinfo_link_image(linker.cpp:1635)：无法加载“mylib.so”所需的库“libcurl.so.5”；由 load_library(linker.cpp:745) 引起：找不到库“libcurl.so.5”

在我的程序中，我只有 libcurl.so 文件。我尝试只使用 libcurl.so 文件（删除 libcurl.so.5 文件并重新编译）。但是加载错误仍然存​​在。

我看到 .apk 文件里面只有 libcurl.so 文件。我认为我的问题是 mylib 在某处引用 libcurl.so.5。但是删除libcurl.so.5后，重新编译，错误依旧。如何使 mylib.so 依赖 libcurl.so，而不是依赖 libcurl.so.5 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:11:23.903

这很疯狂。我通过删除配置文件中的所有主要标签来修改配置文件。现在，至少，它起作用了。

# c# - 单独文件中的元数据未按预期显示

> ID：15542167
> 
> 赞同：0
> 
> 时间：2013-03-21T08:01:01.807
> 
> 标签：c#, asp.net-mvc-4

嗨，我正在尝试将我的元数据添加到单独的文件中，以保持我的模型尽可能干净，但似乎有些问题，因为现在似乎某些属性不显示验证。这是我的模型类：

```
public partial class BookModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Author { get; set; }
    public string Description { get; set;}
    public DateTime PublicationDate { get; set; }
    public int CategoryId { get; set; }
    public decimal Price { get; set; }
    public string BookUrl { get; set; }
} 
```

这是我的元数据部分类：

```
[MetadataType(typeof(BookModel))]
public partial class BookModelMetada
{
    public int Id { get; set; }

    [Required]
    public string Name { get; set; }

    [Required]
    public string Author { get; set; }

    [Required]
    [DataType(DataType.MultilineText)]
    public string Description { get; set; }

    [Required]
    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    public DateTime PublicationDate { get; set; }

    [Required]
    public int CategoryId { get; set; }

    [Required]
    [DataType(DataType.Currency)]
    [DisplayFormat(DataFormatString = "{0:c}")]
    public decimal Price { get; set; }

    public string BookUrl { get; set; }
} 
```

奇怪的字段是 PublicationDate 和 Price 显示验证错误，但其他属性不显示。

我究竟做错了什么？

**编辑：**

查看代码：

```
 <p>
            @Html.LabelFor(model => model.Book.Name, "Book Name")
            @Html.TextBoxFor(model => model.Book.Name)
        </p> 
        <p>
            @Html.LabelFor(model => model.Book.Author)
            @Html.TextBoxFor(model => model.Book.Author)
        </p>
        <p>
            @Html.LabelFor(model => model.Book.PublicationDate ,"Publication Date")
            @Html.TextBoxFor(model => model.Book.PublicationDate, new { @class="datepicker" })
        </p>
        <p>
            @Html.LabelFor(model => model.Book.Price)
            @Html.TextBoxFor(model => model.Book.Price)
        </p>
        <p>
            @Html.LabelFor(model => model.Book.CategoryId, "Select category")
            @Html.DropDownListFor(model => model.Book.CategoryId, new SelectList(Model.Categories, "Id", "Name"))
        </p>
        <p> 
            @Html.LabelFor(model => model.Book.Description)
            @Html.TextAreaFor(model => model.Book.Description)
        </p>
        <p>
            <input type="submit" value="Create" class="link"/>
            @Html.ActionLink("Back to List", "Books", "ProductManager", null, new { @class = "link" })
        </p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T12:03:32.413

问题是我添加`[MetadataType(typeof(BookModel))]`了元数据类而不是模型类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:37:19.243

可能有一个或多个原因：但首先要确保在视图或视图布局中包含 jquery.unobtrusive 和 jquery.validate。但是，您的视图似乎不清楚，您必须使用`@Html.LabelFor(model =>model.Book.Author)`. 请发布您的完整视图。

# c++ - 内存泄漏测试

> ID：15542170
> 
> 赞同：1
> 
> 时间：2013-03-21T08:01:07.493
> 
> 标签：c++, stl, instruments, memory-leaks

我正在使用 Instruments 对我们的产品进行内存泄漏测试。

`std:string`或`std::auto_ptr`物体被检测到泄漏。据我所知，这两种对象会自行释放。我想知道它们真的是泄漏还是只是因为我过早停止录制而 Instruments 没有检测到它们被释放？

Instruments 在这些类型的物体上是否准确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:48:27.617

您可以泄漏一个`std::string`对象，这并不难：

```
int main(){
  std::string* s = new std::string();
  return 0;
} 
```

同样的方式你可以泄漏一个`auto_ptr`. std::string 将释放它包含的动态分配的字符串数组，但不会`release itself`。

# wordpress - 在每月档案中按类别对帖子进行分组

> ID：15542172
> 
> 赞同：0
> 
> 时间：2013-03-21T08:01:11.547
> 
> 标签：wordpress, archive

我正在尝试按类别在每月存档中对帖子进行分组，但不知道如何实现。

有人可以帮我吗？

问候

* * *

这是我在 archive.php 中使用的 php 代码

```
<?php
        $terms = get_terms("publicationcat");
        $count = count($terms);
        if ( $count > 0 ){
            foreach ( $terms as $term ) {
                echo "<div class=\"publication-area\">";
                echo '<h3 class="term-heading">' . $term->name . '</h3>';
                echo "<div class=\"publication-txt\">";
                echo "<ul>";
                while ( have_posts() ) : the_post();
                echo "<li><a target=\"_blank\" href=\"" . wp_get_attachment_url(get_post_meta($post->ID, 'document_file_id', true)) . "\">".$post->post_title."</a></li>";
                endwhile; 
                echo "</ul>";
                echo "</div>";
                echo "</div>";
            }
        }
        ?> 
```

唯一的问题是它为所有术语显示相同的帖子标题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:56:45.997

当您遍历每个类别中的帖子时，您不会只找到与该类别相关的帖子，而是遍历每个帖子。以下（未经测试，如果您遇到错误，请发表评论）应该对您的问题进行排序。

但是请注意，如果帖子被分配到多个类别，您仍然可能会得到一些重复。

检查每个帖子以确保它在所需的类别中。好点 - 只有一个查询。坏点 - 循环遍历每只猫的所有帖子。

```
<?php
$terms = get_terms('publicationcat');

if(!empty($terms)) : foreach($terms as $term) :
?>
        <div class="publication-area">

            <?php sprintf('<h3 class="term-heading">%1$s</h3>', $term->name); ?>
            <div class="publication-txt">

                <?php if($my_query->have_posts()) : ?>

                    <ul>

                    <?php if(in_category($term->slug)) : ?>

                    <?php while($my_query->have_posts()) : $my_query->the_post(); ?>

                            <?php $link = wp_get_attachment_url(get_post_meta($post->ID, 'document_file_id', true)); ?>
                            <li><a target="_blank" href="<?php echo ($link !== '') ? $link : ''; ?>">
                                <?php the_title(); ?>
                            </a></li>

                        <?php endwhile; ?>

                    <?php endif; ?>

                    </ul>

                <?php endif; ?>

            </div>

        </div>
<?php
    endforeach;
endif;
?> 
```

重新查询帖子并输出所有抓取的内容。好点 - 只提取循环类别所需的帖子。坏点 - 大量查询，如此多的查询可能会减慢您的网站速度。

```
<?php
$terms = get_terms('publicationcat');

if(!empty($terms)) : foreach($terms as $term) :
?>
        <div class="publication-area">

            <?php sprintf('<h3 class="term-heading">%1$s</h3>', $term->name); ?>
            <div class="publication-txt">

                <?php
                $args = array(
                    'cat' => $term->term_id
                );
                $my_query = new WP_Query($args);
                ?>
                <ul>
                    <?php if($my_query->have_posts()) : while($my_query->have_posts()) : $my_query->the_post(); ?>

                            <?php $link = wp_get_attachment_url(get_post_meta($post->ID, 'document_file_id', true)); ?>
                            <li><a target="_blank" href="<?php echo ($link !== '') ? $link : ''; ?>">
                                <?php the_title(); ?>
                            </a></li>

                        <?php endwhile; ?>
                    <?php endif; ?>
                    <?php wp_reset_query(); ?>

                </ul>

            </div>

        </div>
<?php
    endforeach;
endif;
?> 
```

# ios - 相互连接 3 台以上的 ios 设备

> ID：15542174
> 
> 赞同：1
> 
> 时间：2013-03-21T08:01:14.953
> 
> 标签：ios, objective-c, webserver, cocoahttpserver

我想将 3 台 iOS 设备相互连接。例如，一个 iOS 设备将像一个服务器，而其他 2 个设备将像客户端一样连接到该服务器。为了使 iOS 设备作为服务器，我使用 CocoaHTTPServer，没有任何互联网连接，应该只使用 wi - fi 连接。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T10:37:54.477

我建议您使用 ichat 中使用的 bonjour 协议。这有助于解决您的问题。这些链接可能对您有所帮助。

[http://en.wikipedia.org/wiki/Bonjour_%28software%29](http://en.wikipedia.org/wiki/Bonjour_%28software%29)

[http://en.wikipedia.org/wiki/Apple_Filing_Protocol](http://en.wikipedia.org/wiki/Apple_Filing_Protocol)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T05:02:23.670

好的，我解决了这个问题。我拥有：
（1）一个 wi-fi 路由器
（2）两个 iOS 设备。

创建本地 wi-fi 网络，
连接 2 设备。
通过使用这个开源库 CocoaHTTPServer，其中一个设计将是服务器。
示例：
[https ://github.com/robbiehanson/CocoaHTTPServer/tree/master/Samples/iPhoneHTTPServer](https://github.com/robbiehanson/CocoaHTTPServer/tree/master/Samples/iPhoneHTTPServer)

在 iPhone（即服务器）中，您应该找到由 wi fi 网络提供的 ip，例如 192.168.0.101

然后uala，转到iphone浏览器（不是服务器）并输入url：192.168.0.101：9999号码

# ios - 我可以禁用单个单元格的 UITableView 选择吗？

> ID：15542180
> 
> 赞同：6
> 
> 时间：2013-03-21T08:01:26.960
> 
> 标签：ios

当您点击 a 中的一行时`UITableView`，该行将突出显示并被选中。是否可以禁用此功能，因此点击一行什么也不做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-02-24T19:19:56.150

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

or `[cell setSelectionStyle:UITableViewCellSelectionStyleNone];`

Further, make sure you either don't implement `-tableView:didSelectRowAtIndexPath:` in your `table view delegate` or explicitly exclude the cells you want to have no action if you do implement it.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T08:36:54.697

实现`tableView:willSelectRowAtIndexPath:`委托方法`UITableView`并返回`nil`。从此方法返回 nil 告诉表视图不选择行，因此`tableView:didSelectRowAtIndexPath:`不会调用该方法。但是这样做并不能阻止突出显示该行。要禁用对行设置单元格选择样式的突出显示效果`UITableViewCellSelectionStyleNone`为在上述答案中进行了解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T08:02:48.817

只需设置：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-21T08:04:10.110

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T11:22:50.220

如果您想停止突出显示，请使用代码说：您想要的值为 19

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 

{
if(indexpath.row == '19')
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
else
cell.selectionStyle = UITableViewCellSelectionStyleGray;

} 
```

但是，如果你想控制单元格的选择

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

if(indexpath.row == '19')
[tableView deselectRowAtIndexPath:indexPath animated:NO];

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-06T03:21:21.077

对于斯威夫特 3：

```
cell.selectionStyle = UITableViewCellSelectionStyle.none 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-04T17:40:34.313

这是针对您有**自定义单元格**的情况，但我在寻找答案时发现了这个问题，所以我想我会把它留在这里以防这对其他人有帮助。

* * *

转到您的自定义单元格，并在方法中设置`selectionStyle`为：`.none``awakeFromNib`

```
override func awakeFromNib() {
    super.awakeFromNib()

    // disable selection
    selectionStyle = .none;
} 
```

如果您在多个`UITableView`s 中使用此自定义单元格，则只需在自定义单元格中设置一次，而不是每次`UITableView`使用 :)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-11T07:11:44.943

斯威夫特 4

```
cell.selectionStyle = UITableViewCell.SelectionStyle.none 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-05T22:23:35.120

您可以简单地为**OBJ C**执行此操作：

```
 cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-07T20:08:30.233

接受的答案对我不起作用。这个问题让我发疯了一阵子，因为当下一个视图加载时，它看起来像任何选择的“故障”..

我的解决方案：我必须转到实际 TableViewCell（我构建的自定义单元格）的 .xib 文件选择单元格并选择 CellView。（确保选择单元格，而不是其中的子视图。它会变成蓝色，如图所示）。在左侧单击“选择”->“无”。这应该与使用代码完全相同，但由于某种原因它不起作用...... [![在此处输入图像描述](../Images/40d9a93160f6ea5f92faf6ec162368d5.png)](https://i.stack.imgur.com/JCj19.png)

# c - 使用cormen给出的算法在c中进行广度优先搜索

> ID：15542186
> 
> 赞同：0
> 
> 时间：2013-03-21T08:01:54.487
> 
> 标签：c

我尝试了 cormen 为 bfs 指定的算法，

代码是：

```
 bfs(int s){
     int i;
     int u,v;
     struct edge *e;
     graph[s].colour=1;
     graph[s].d=0;
     graph[s].pre=-1;

enqueue(s);
while (isempty()!=1){
    u=dequeue();
    printf("%d\t",u);
    e=graph[u].edgePtr;
    while(e!=NULL)
    {       
        v=e->vertexIndex;
        if(graph[v].colour==WHITE){
            graph[v].colour=GRAY;
            graph[v].d=graph[u].d+1;
            graph[v].pre=u;

            enqueue(v);
            e=e->edgePtr;
        }
        graph[u].colour=BLACK;
    }
}
 } 
```

我得到一个无限循环......有人能告诉我我到底哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:52:49.097

你搞混了你的收盘价`}`。因此，如果颜色为 ，则仅移动到下一条边，如果颜色为非`WHITE`，则在无限循环中停留在同一条边上。正确的形式应该是这样的：`u``WHITE`

```
bfs(int s){
  // …
  while (isempty()!=1){
    u=dequeue();
    // …
    while(e!=NULL) {       
      v=e->vertexIndex;
      if (graph[v].colour==WHITE){
        graph[v].colour=GRAY;
        graph[v].d=graph[u].d+1;
        graph[v].pre=u;

        enqueue(v);
      } // end if WHITE
      e=e->edgePtr; // update e for all colours!
    } // end loop over all edges e
    graph[u].colour=BLACK;
  } // end loop while queue is not empty
} // end function 
```

# node.js - Backbone.js 和 Node.js 有什么区别？哪个最好？

> ID：15542187
> 
> 赞同：27
> 
> 时间：2013-03-21T08:02:04.277
> 
> 标签：node.js, backbone.js

我感到有点困惑，Node.js 相关的“东西”有很多框架。有人能给我概述一下 Backbone.js 和 Node.js 之间有什么区别吗？哪个最好？提前致谢。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-03-21T08:19:01.333

我在这里从几个来源引用它：

[首先，在这里](https://stackoverflow.com/questions/7116332/confused-with-all-the-node-js-frameworks-libraries-etc-around)引用堆栈溢出问题：

> 您列出的大多数内容只是因为它们是用 JavaScript 编写或以其他方式使用 JavaScript 才相关的。比较它们就像比较苹果和橘子一样。这就像问丰田凯美瑞和V6发动机有什么区别。它们是相关的，但做不同的事情。
> 
> **节点**
> 
> Node 也称为 Node.js，是我们运行服务器端 JavaScript 代码的 JavaScript 环境。它基于[V8 JavaScript 引擎](http://code.google.com/p/v8/)。您编写的所有 JavaScript 代码，或从 NPM、GitHub 等的包中安装和运行的所有 JavaScript 代码都由 Node 运行时环境执行。
> 
> **骨干**
> 
> [Backbone](http://documentcloud.github.com/backbone/)可以比作 JavaScript 的[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller) 框架。我相信它最初是为浏览器编写的；它通过实现最常见的 MVC 模式（以及其他一些东西）来帮助保持客户端 JavaScript 的整洁，从而使您可以更轻松地将客户端 JavaScript 连接到服务器端代码。

此外，这是来自Quora 上同一[问题的答案。](https://www.quora.com/What-are-the-differences-between-Backbone-js-and-Node-js)归功于德鲁哈里：

> 它们几乎完全不相关。传统上，Backbone.js 是一个客户端库，而 Node.js 是一种用 Javascript 编写服务器端应用程序的方法。Backbone 旨在成为一个模型 + 视图系统，用于将数据模型与 DOM 元素绑定在一起，这些元素在网页中直观地表示该模型。Backbone 还提供模型集合，以及一系列实用函数，用于将这些模型与其服务器端表示同步。
> 
> Node.js 只是与标准库打包在一起的 v8 Javascript 运行时环境，用于使用 Javascript 做有用的服务器端事情。有很多为 Node 设计的包（查看 npm 以了解轻松安装这些包的方法，包括 Backbone），这些包可以扩展它来做各种有趣的事情。可以将 Backbone.js 与 Node.js 一起使用，但 Backbone 的设计并不是专门为在服务器上使用而设计的。

如果您发现材料有帮助，请去投票以上答案。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-21T08:18:46.143

几乎这两者唯一的共同点是它们都是基于 Javascript 的，并且围绕它们进行了大量的炒作（尽管不是不值得的）。

node.js 是 Javascript*服务器应用程序*的框架。它包括为 Chrome 开发的 V8 Javascript 引擎。它是异步和事件驱动的，因此非常适合处理大量小请求。

Backbone.js 是一个用于客户端 Web 应用程序的框架，专门用于所谓的“单页 Web 应用程序”，其中一开始只向浏览器发送一个 HTML 页面，之后的每次交互都由 AJAX 请求和 Javascript 处理转换页面的逻辑。

这意味着两者也可以有效地协同工作：使用backbone.js 为前端实现的应用程序可以使其AJAX 请求由使用node.js 的服务器部分处理——这是一种相当流行的组合，因为它允许您拥有一个完整的Web 应用程序仅使用 Javascript。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T08:05:33.880

Backbone.js 是一个 javascript 库，类似于 jQuery 或 YUI，但满足不同的需求。

Node.js 是一个 javascript 解释器，类似于 Internet Explorer 或 Firefox 或 Safari，但满足不同的需求。

我对backbone.js 了解不多，但我相信您可以将它与Node.js 一起使用，因为它使用常规的javascript。不过，您可能需要一个 DOM 仿真层来处理与 DOM 相关的内容。

* * *

## 补充回答：

一些谷歌搜索表明有人在 Node.js 上使用 Backbone。这样做的好处显然是您将能够使用相同的框架并在客户端和服务器上重用代码。

请参阅： http: [//nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product](http://nerds.airbnb.com/weve-launched-our-first-nodejs-app-to-product)

* * *

## 更多附加答案：

关于语义，我看到有些人不同意计算中的某些术语的含义。虽然这些术语使用松散，而且它们在某种程度上可以互换，但它们确实具有相当明确的含义。

一般来说，解释器是一个可执行文件，即一个程序，它把一些数据作为输入并作为一个程序来执行。V8不是这个。它不能单独使用 javascript 并运行它。它需要被编译成另一个程序，一个解释器才能运行 javascript。

V8 确实附带了示例代码来构建解释器。V8 附带的解释器称为 V8-shell。

引擎是实现解释器的库。这正是 V8 的本质。

上面的两个术语在某种程度上可以互换，因为“解释器”这个词也可以有效地用来代替“引擎”来描述库实现的内容。但是这个词的用法类似于“MVC 框架”或“UI 工具包”的用法，因为它被用作形容词。所以说“解释器”是一种图书馆是正确的。

但这个词最初用于表示执行编程语言的二进制文件。当以这种方式使用时，将其用作名词，因为它指的是文件系统上的某些东西。使用这种方式类似于“编译器”的用法。例如，人们会`clang`在这种意义上调用编译器，而人们会在前一种意义上调用编译器`llvm`使用的库。`clang`

让我们以非 javascript 为例：

*   tcl 是一种编程语言

*   tcl 也是实现 tcl 解释器的库。换句话说，引擎。

*   tclsh 是 tcl 解释器

让我们看另一个例子：

*   ruby 是一种编程语言

*   RubyC 是 ruby​​ 的众多引擎之一

*   ruby 是使用 RubyC 的解释器

在提到上述两种语言的二进制可执行解释器时，没有人使用“框架”这个词。听起来很傻。

但是等你说，Node.js 不仅仅指 node.exe。它确实提供了许多附加功能，可以用作编写出色程序的良好基础。换句话说，一个框架。

嗯，是。这样做不会使使用“解释器”一词来指代 node.exe 自动无效。就像用“地球”这个词来指代地球并不会使用这个词来指代土壤自动失效。

此外，那些额外的功能？tcl 和 ruby​​ 也是如此。对于 C 语言也是如此。Node.js 上的那些额外功能`fs`传统`http`上称为标准库。虽然 Node.js 项目称它为他们选择的框架。几乎没有人将他们的解释器 + 标准库称为框架。例如，PHP 的分布与 Node.js 完全一样，带有一堆非常高级的标准库，但没有人会称 PHP 为框架。当人们在节点之上编写实际框架时也有点傻 - 框架的框架。但我不会说他们错了，因为他们选择这样称呼它。这只是他们描述他们创造的东西的方式。给他们更多的权力。

我要说的是，那些说 node.js 不是解释器的人忽略了整个计算历史中这个词的使用。我不知道。来自亚洲背景的我很自然地认为一切都属于多个类别。也许这是一个西方的想法，即事物严格属于我不太了解的特定类别。

所以这里是事实：

1.  Node.js 不仅仅是一个 JavaScript 库。您需要 node.exe 才能使用 node 附带的标准库。

2.  另一方面，Backbone.js 是一个标准的 javascript 库。它不是可执行文件。

3.  到目前为止，Node.js 是唯一将解释器 + 库称为框架的示例。我在编程中所知道的所有其他框架示例都是指实现设计模式的库。

4.  称某物为“B”并不会自动使称其为“A”无效。

最后一件事：Web 浏览器还带有一个非常大的 javascript 高级标准库。它被称为 DOM（还有一堆其他的东西，比如 Math 和 XMLHttpRequest，但 DOM 是最大的）。因此，应该调用 Internet Explorer 和 Firefox javascript 框架，但没有人这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T08:15:44.170

节点.js：

后端的 Javascript。（如：php、ruby on rails、python 等）

骨干.js：

前端的 Javascript（在客户端的浏览器上运行）backbone.js 也使用 jquery，更多的客户端 javascript 框架是：1\. mootools 2\. ExtJS 3\. dojo 4\. 原型等等...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-21T09:22:16.813

两者都与javascript相关，但完全不同。

Node 是一个解释器/平台，用于在 JDK 或 Ruby 等服务器中执行 javascript 代码。简单来说，您需要安装 NodeJS 来解释服务器上基于 Backbone 的脚本。

在服务器端 MVC 方面，Geddy、RailwayJS、Express 等被认为比 Backbone 更好地服务于目的。

而 Backbone 是客户端的冠军 MVC 框架。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T08:19:44.090

Node.js 是一个专门用于构建网络应用程序的服务器端平台。它建立在 Google 的 V8 Javascript 引擎之上，并使用异步事件驱动的方法来构建应用程序。Backbone.js 是一个简单的 javascript 客户端库，可以更轻松地创建和维护客户端代码并符合 MVC 模式。因此，它们无法进行比较。

Backbone.js 有很多替代方案，它们使用稍微不同的方法来实现相同的目标。最知名的是：[knockout](http://knockoutjs.com)、[ember.js](http://emberjs.com)等。它也可以插入到 node.js 应用程序中。

# wordpress - Wordpress 电子邮件表格

> ID：15542189
> 
> 赞同：0
> 
> 时间：2013-03-21T08:02:18.370
> 
> 标签：wordpress, email

Wordpress 电子邮件表格

大家好

我一直在许多网站中使用这种电子邮件表单，并且一直有效。

我尝试在 Wordpress 网站中使用它，但它不会

是否有任何明显的原因说明这种方法在 Wordpress 网站中不起作用。

我需要一个不会重新加载联系页面的电子邮件表单，因为表单位于底部。

html

```
 <form action="#" id="contact_form">
         <input type="text" id="name" placeholder="Name:">
         <input type="text" id="email" placeholder="Email:">
         <textarea id="message" rows="8" cols="40" placeholder="Message:"></textarea>
                <input type="submit" id="submit"/>
                <div id="status">
           <p></p>
         </div>
     </form> 
```

jQuery

```
 $('#submit').click(function(){    
        //
        var nameVal = $('#contact_form #name').val();
        var emailVal = $('#contact_form #email').val();
        var messageVal = $('#contact_form #message').val();
        //
        $.post('/contact_form.php', {name: nameVal, email: emailVal, message: messageVal}, function(data){
            $("#status p").html(data);
            $("#status p").show().fadeOut(3500);
            if(data.indexOf('Thank You')==0) {document.forms[0].reset();}
        });
      }) 
```

php

```
 $errors = array();
        $required_fields = array('name','email','message');
        foreach($required_fields as $fieldname){
            if(!isset($_POST[$fieldname]) || empty($_POST[$fieldname])){
                $errors[] = $fieldname;
            }
        }

        if(empty($errors)){
            $name_field = Trim(stripslashes($_POST['name']));
            $name = explode(' ', $name_field);
            $firstname = ucfirst($name[0]);
            $email_field = Trim(stripslashes($_POST['email']));
            $message = Trim(stripslashes($_POST['message']));
            //
            $to = "info@ttmt.org.uk";
            $subject = "Email from Website";
            $body = "From: $name_field\n E-Mail: $email_field\n Message:\n $message";
            //
            mail($to, $subject, $body);
            echo "Thank You $firstname";
        }else{
            echo "Please complete all.";
        } 
```

*- - 更新 - -*

我现在已经有一部分工作了。

部分问题是 jquery 找不到 php.ini 文件。

我在 wp-conntent 中创建了一个“代码”文件夹并将 php 放在那里，jquery 看起来像这样。

```
 $j.post('wp-content/code/contactEngine.php', { theName:nameVal, theEmail:emailVal, theMessage:messageVal }, function(data){ 
```

现在我从 php 文件中获取返回的数据，但没有发送电子邮件。

这在WP中不起作用吗

```
 mail($to, $subject, $body); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:11:13.560

您不能在 Wordpress 中使用 $_POST['name']。为输入字段使用其他命名将解决您的问题，最终您可以使用“联系表格 7”Wordpress 插件以获得更好的用户体验 :-)

# ios - 用于创建属性设置器的 Xcode 宏

> ID：15542191
> 
> 赞同：0
> 
> 时间：2013-03-21T08:02:22.140
> 
> 标签：ios, objective-c, xcode, macros

我有一个具有许多属性的类。设置每个属性后，我需要更新应用程序的 UI。设置器看起来像这样：

```
@synthesize trackHighlightColour = _trackHighlightColour;

- (void)setTrackHighlightColour:(UIColor *)trackHighlightColour
{
    _trackHighlightColour = trackHighlightColour;
    [self updateUI];
} 
```

我不想输入 10 次，而是使用宏。这是我到目前为止所拥有的：

```
#if !defined(PROPERTY_SETTER)
#define PROPERTY_SETTER(PROPERTY_NAME, UPPER_PROPERTY_NAME) @synthesize (PROPERTY_NAME) = _(PROPERTY_NAME);\
\
- (void)set(UPPER_PROPERTY_NAME):(UIColor *)(PROPERTY_NAME)\
{\
    _(PROPERTY_NAME) = (PROPERTY_NAME);\
    [self updateUI];\
}
#endif 
```

不幸的是，这有一些问题。

1.  （次要）需要用两个大小写重复属性名称
2.  编译器不允许我传递属性名称，而是必须将其作为字符串传递：

    @implementation FooClass

    PROPERTY_SETTER(@"trackHighlightColour", "TrackHighlightColour");

    @结尾

放弃这种技术感觉太接近了。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:08:23.583

听起来您想要键值观察 (KVO)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:15:01.003

这就是我与 MRC 一起使用的

```
#define GENERATE_RETAIN_SETTER(ATTRIBUTE_NAME, UPDATER) \
    if (_##ATTRIBUTE_NAME != ATTRIBUTE_NAME) { \
        [_##ATTRIBUTE_NAME release]; \
        _##ATTRIBUTE_NAME = [ATTRIBUTE_NAME retain]; \
        \
        [self UPDATER]; \
    } 
```

用法

```
- (void)setColor:(UIColor*)color {
    GENERATE_PROPERTY_SETTER(color, updateUI)
} 
```

结果：

```
- (void)setColor:(UIColor*)color {
    if (_color != color) {
        [_color release];
        _color= [color retain];

        [self updateUI];
    }
} 
```

它可以根据您的特定需求进行更改，但无法在预处理器中将字符串大写。使用最新的编译器，您可能会丢失，`@synthesize`但要完全按照您的意愿进行操作，您可以创建一个带有四个参数的宏

```
#define GENERATE_RETAIN_SETTER(PROPERTY, TYPE, SETTER, UPDATER) \
@synthesize PROPERTY = _##PROPERTY; \
\
- (void)SETTER:(TYPE*)PROPERTY { \
    if (_##PROPERTY != PROPERTY) { \
        [_##PROPERTY release]; \
        _##PROPERTY = [PROPERTY retain]; \
        \
        [self UPDATER]; \
    } \
} 
```

使用

```
GENERATE_RETAIN_SETTER(color, UIColor, setColor, updateUI)
```

你应该得到

```
@synthesize color = _color;

- (void)setColor:(UIColor*)color {
    if (_color != color) {
        [_color release];
        _color= [color retain];

        [self updateUI];
    }
} 
```

# ruby-on-rails - 在 Rails 中放置自定义 Array 方法或 Enumerable 方法的位置

> ID：15542192
> 
> 赞同：2
> 
> 时间：2013-03-21T08:02:25.843
> 
> 标签：ruby-on-rails

我有自定义数组方法，例如

```
class Array
  def decreasing?
    for i in (0...self.size)
      return false if self[i] > self[i+1]
    end
    true
  end

  def increasing?
    for i in (0...self.size)
      return false if self[i] < self[i+1]
    end
    true
  end
end 
```

和

```
module Enumerable
  def sorted?
    each_cons(2).all? { |a, b| (a <=> b) <= 0 }
  end
end 
```

目前我将它们随机放在模型文件中。在哪里可以更好地将这些代码放入 Rails 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:14:53.707

我会把它放在一个名为and的初始化程序（in `config/initializers`）中。`array_extensions.rb``enumerable_extensions.rb`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:18:41.307

我认为它可以在`/lib`目录下。

# objective-c - NSDictionary 和 NSArray

> ID：15542203
> 
> 赞同：3
> 
> 时间：2013-03-21T08:03:05.057
> 
> 标签：objective-c, nsarray, nsdictionary, nsmutabledictionary

我有一系列名称和图像，如下所示

```
NSArray *names = [[NSArray alloc] initWithObjects:@"naveen", @"kumar",nil];
NSArray *images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.jpg"], [UIImage imageNamed:@"2.jpg"], nil]; 
```

我想创建以下格式的字典

```
list:
  item 0 : naveen
       1.jpg
  item 1: kumar
       2.jpg 
```

我怎样才能创建这个？请？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:43:29.700

你需要这样做：

```
NSMutableDictionary *nameImageDict=[NSMutableDictionary new];
for (NSInteger i=0; i<names.count; i++) {
    NSArray *array=@[names[i],images[i]];
    //or in older compiler 4.3 and below
    //NSArray *array=[NSArray arrayWithObjects:[names objectAtIndex:i],[images objectAtIndex:i], nil];
    [nameImageDict setObject:array forKey:[NSString stringWithFormat:@"item %d",i]];
} 
```

对于关键项 0：它将有一个数组。该数组包含名称和图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T08:24:27.667

像这样：

```
NSDictionary *dictionary = [[NSDictionary alloc] initWithObjects:images andKeys:names]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T08:24:36.700

像这样

```
NSDictionary * list = [NSDictionary dictionaryWithObjects:images forKeys:names]; 
```

# html - 在共享按钮中显示默认文本？

> ID：15542214
> 
> 赞同：4
> 
> 时间：2013-03-21T08:04:02.280
> 
> 标签：html, button, share

我想知道在按下推文和 google+ 按钮时是否可以显示一些预定义的文本。我知道这对 facebook 来说是可能的，但我找不到任何可用于 google+ 按钮的代码。

我为我的 facebook 分享按钮获得的代码（已经在工作）是：

```
<a title="send to Facebook"
 href="http://www.facebook.com/sharer.php?s=100&p[title]=EHBE Groningen&p[summary]=this is the text to share http://sharelink.com&p[url]=www.example.nl&p[images][0]=example_image"
 target="_blank">
 <span>
  <img width="14" height="14" src="'icons/fb.gif" alt="Facebook" /> Facebook 
 </span>
</a> 
```

我目前为我的推文按钮（也有效）获得的代码是：

```
<a href="http://twitter.com/?status=text to tweet" onclick="javascript:_gaq.push(['_trackEvent','outbound-article','http://twitter.com']);" target="_blank">Tweet over deze pagina</a> 
```

所以我的问题是，是否可以在为某种 google + 按钮点赞、分享或推特页面或文章时显示预定义的文本。

编辑

* * *

我希望能够更改实际单击按钮时出现的文本。所以按钮本身很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:59:17.493

你无法做到 facebook 和 twitter 提供的方式，从我可以收集到的查看他们的[Snippet 文档](https://developers.google.com/+/web/snippet/)。

你能做的，是这样的：

```
<!-- Update your html tag to include the itemscope and itemtype attributes. -->
<html itemscope itemtype="http://schema.org/Article">

<!-- Add the following three tags inside head. -->
<meta itemprop="name" content="my title">
<meta itemprop="description" content="a description">
<meta itemprop="image" content="http://my-url.com/logo.png"> 
```

我意识到如果您的内容是通过`AJAX`. 在这种情况下，您可以执行以下操作：

```
<body itemscope itemtype="http://schema.org/Product">
  <h1 itemprop="name">my title</h1>
  <img itemprop="image" src="http://my-url.com/logo.png" />
  <p itemprop="description">a description</p>
</body> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:22:44.797

[https://developers.google.com/+/web/+1button/](https://developers.google.com/+/web/+1button/)

阅读并添加这些标签/代码。

# python - **在python中是什么意思

> ID：15542216
> 
> 赞同：0
> 
> 时间：2013-03-21T08:04:03.000
> 
> 标签：python

我很困惑一个 * 和两个 ** 在参数前面的作用。

```
def wrapper(*args, **wdargs): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:04:54.793

这意味着关键字参数。

例如。

```
func(x, y, foo='a') # where foo is a keyword argument 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:06:00.567

它们用于接受可变数量的争论。看看这个：http: [//www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/](http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/)

# ios - UINavigationBar 中不出现自定义徽标和按钮

> ID：15542218
> 
> 赞同：1
> 
> 时间：2013-03-21T08:04:09.167
> 
> 标签：ios, objective-c, uinavigationcontroller, uinavigationbar, uinavigationitem

我有 UINavigarionController，我想在导航栏中添加自定义背景和徽标以及左按钮我可以添加背景但我的徽标和按钮没有出现，请您帮助我，提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:46:01.947

您不能在 AppDelegate 中创建

打开你的 ViewController.m

```
- (void)viewDidLoad
 {
    self.navigationItem.title=@"Title"; //Set the title
    [self CustomButton];
    [super viewDidLoad];
// Do any additional setup after loading the view from its nib.
}

-(void) CustomButton
{
    UIButton *but=[UIButton buttonWithType:UIButtonTypeCustom];//create a button
    but.frame=CGRectMake(290, 4, 40, 40);// set the button frame size
    [but setImage:[UIImage imageNamed:@"image.png"] forState:UIControlStateNormal];
    [but addTarget:self action:@selector(call here) forControlEvents:UIControlEventTouchUpInside];
    UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithCustomView:but];
    self.navigationItem.rightBarButtonItem = btn;
    self.navigationController.navigationBar.barStyle = UIBarStyleDefault;

} 
```

希望它对你有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:38:33.373

**barButton 不能设置为在整个应用程序中使用。**

每个都`ViewController`提供自己的，`barButtonItems`因此您必须将设置徽标和按钮的代码移动到 rootViewController 类`titleView``navigationItem`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:18:31.393

您的代码有效，我得到了徽标和按钮，但进行了一次更改

```
 UIButton *button =  [UIButton buttonWithType:UIButtonTypeCustom];
 [button setImage:[UIImage imageNamed:@"menu.png"] forState:UIControlStateNormal];
  //[button addTarget:self action:@selector(parametres:) forControlEvents:UIControlEventTouchUpInside];
[button setFrame:CGRectMake(0, 0, 25, 25)];

 UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithCustomView:button];
self.navigationItem.rightBarButtonItem = rightButton;

UIImageView *navigationImage=[[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 120, 30)];
navigationImage.image=[UIImage imageNamed:@"menu.png"];
UIImageView *workaroundImageView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 120, 30)];
[workaroundImageView addSubview:navigationImage];

self.navigationItem.titleView= workaroundImageView;
self.navigationItem.titleView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"menu.png"]]; 
```

只需将图像类型（即不是菜单）指定为 menu.png 并通过将 UINavigationControllerDelegate 设置为您的类来将其添加到您的导航项中，如上祝您好运，请分享您的结果

# sharepoint - 匿名用户无法在 SharePoint 中看到可重复使用的内容

> ID：15542224
> 
> 赞同：1
> 
> 时间：2013-03-21T08:04:20.577
> 
> 标签：sharepoint, sharepoint-2010, anonymous-access

我有一个用户可以匿名访问的 SharePoint 2010 外联网（企业版，完全服务打包）。在某些页面上，我使用代码在自定义 Web 部件中公开可重用内容；

```
SPListItem reusableItem = reusableList.GetItemById(someId); 
```

对于匿名用户的某些项目，该确切行失败，产生异常“**指定参数超出有效值范围**”。异常表明匿名用户根本看不到列表项。我没有使用任何类型的模拟，并且可重用内容列表中的项目都继承了它们的权限，这授予匿名用户读取访问权限。

SharePoint 场具有标准英语安装，顶部带有丹麦语语言包。Extranet 网站是用丹麦语创建的。

产生异常的项目是我在丹麦网站上创建的项目。这三个标准内置项在匿名用户访问时不会产生异常。

我猜这个问题与匿名用户的语言或文化有关。需要注意的一件事是异常消息是英语，而不是丹麦语，尽管整个外联网站点都是丹麦语。

也可能是编码问题。也许这三个内置项目使用英语编码，而我在网站上创建的任何项目都使用丹麦编码，包括 ae、oe 和 aa 的三个特殊丹麦字符。无论我是否在可重用内容中实际使用丹麦语字符，都会发生异常。

有谁知道为什么我在访问除三个内置可重用内容项之外的任何内容时会出现异常？

# templates - Symfony 为电子邮件加载 Twig 模板

> ID：15542225
> 
> 赞同：2
> 
> 时间：2013-03-21T08:04:22.747
> 
> 标签：templates, symfony, twig

在加载过程中，我在 symfony 树枝模板中遇到错误。

我需要包括这个吗：使用 Sensio\Bundle\FrameworkExtraBundle\Configuration\Template;

**[无效参数异常]**

`Unable to find template "CrudBundle:email.html.twig".`

**[Twig_Error_Loader]**

`Unable to find template "CrudBundle:email.html.twig".`

**[Twig_Error_Loader]**

```
Unable to find template "CrudBundle:email.html.twig" (looked into: C:\xampp
\htdocs\sample\vendor\symfony\symfony\src\Symfony\Bridge\Twig/Resourc
es/views/Form). 
```

这是文件夹结构。

`src/Btn/CrudBundle/command/SystemCommand.php`: 上课地点

`src/Btn/CrudBundle/Resources/views/email.html.twig`: 模板位置

```
class SystemCommand extends ContainerAwareCommand
{

    protected function configure()
    {

        $this
            ->setName('cron:email:send')
            ->setDescription('Verifies that accounts');
    }

    protected function execute(InputInterface $input, OutputInterface $output)
    {
        $output->writeln("This is a test");
        $message = \Swift_Message::newInstance()
            ->setSubject('Hello Email')
            ->setFrom('sample@sample.com')
            ->setTo('sample@sample.com')
            ->setBody(
                $this->getContainer()->get('templating')->render(
                    'CrudBundle:email.html.twig',
                    array('name' => $staffer->getUser())
                )
            )
        ;
        $this->get('mailer')->send($message);          
    }
} 
```

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:14:13.130

尝试`CrudBundle::email.html.twig`代替`CrudBundle:email.html.twig`.

# javascript - 如何使用 javascript 构造函数创建一个 html 元素？

> ID：15542227
> 
> 赞同：3
> 
> 时间：2013-03-21T08:04:36.850
> 
> 标签：javascript, constructor, prototype, return-value

我了解javascript构造函数的基本思想，例如

```
function Person(name){
  this.name = name
}

Person.prototype.sayhi = function(){
  return this.name+' says hi !!! '
}
var bob = new Person('bob')
bob.name // bob
bob.sayhi // bob says hi !!! 
```

但是可以说如果我想在真正的 web 应用程序中创建一个相册，服务器会发送一个 json 数据数组

```
like:[{'id':1,'album_name':'test','user':'user_id'}] 
```

，每个数组项应该是一个专辑，现在我想使用这个数组项将这张专辑构造为**div 元素**，我该怎么做？

我想要这个的原因是，如果我可以将专辑构建为真正的 div 元素，那么我可以做到这一点

```
 Album.prototype.open = function(){
    //some action
 }
 album = new Album(jdata)

 album.click(function(){
    this.open()
 }) 
```

这可能吗，如何定义这个构造函数，我认为这可能与构造函数返回值有关，这真的让我很困惑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:30:48.190

您可以执行以下操作：

```
var i, data, Albom, albom;

Albom = function Albom(data) {
  var i,
      div = document.createElement('div');

  for(i in data) {
    div.setAttribute('data-'+i, data[i]);
  }

  div.innerHTML = data.album_name;

  for(i in this) {
    if(typeof this[i] === 'function') {
      div[i] = this[i].bind(div);
    } else {
      div[i] = this[i];
    }
  }

  return div;
};

Albom.prototype.open = function open() {
  alert(this.getAttribute('data-id'));
};

data = [
  {'id':1,'album_name':'test1','user':'user_id1'},
  {'id':2,'album_name':'test2','user':'user_id2'}
];

for(i in data) {
  albom = new Albom(data[i]);
  document.body.appendChild(albom);
} 
```

现在`new Albom(data)`将生成新的 DOM 元素，该元素具有来自提供的`data`对象的属性，并且将在创建的元素中包含所有原型属性和函数，这些元素将在该 DOM 元素的范围内执行（因此您可以`this`在该方法内部引用）。

例如，您将能够打电话并弹出`albom.open()`带有文本的警报。`2`

您可以在以下位置看到工作示例：http: [//jsbin.com/isepay/10/edit](http://jsbin.com/isepay/10/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:13:33.843

使用与对象键匹配的类创建一些模板文件，然后循环遍历键并填充模板文件。例如：

```
function Album (album) {
    this.template = $('#template').clone().removeAttr('id');
    this.album = album;
}

Album.prototype.html = function () {
    var i, val;
    for (i in this.album) {
      if (!this.album.hasOwnProperty(i)) {
        continue;
      }
      val = this.album[i];
      this.template.find("." + i).html(val);
    }
    console.log(this.template);
    return this.template;
}

var foo = new Album({
    title: 'Cheap Thrills',
    artist: 'Frank Zappa',
    genre: 'Rock and Roll'
});

$('#main').html(foo.html()); 
```

这是*一种千篇一律的*尝试，尽管它并不能真正满足所有需求。对于此解决方案不符合您的需求的情况，您可以设置条件或您有什么。例如，如果数据是一个图像 url，设置 innerHTML 不是很有用，所以你应该设置 'src' 属性，或者创建一个带有 SRC 属性的 img 标签。

模板文件可能如下所示：

```
<div class="album">
  <div class="user"></div>
  <span class="foo"></span>
  <textarea class="bar"></textarea>
</div> 
```

这是一个快速的小提琴：http: [//jsfiddle.net/bxw7Z/](http://jsfiddle.net/bxw7Z/)

如果您不喜欢使用类的想法，请尝试使用[数据属性](http://ejohn.org/blog/html-5-data-attributes/)。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-03-21T08:25:47.460

我认为你的方法是错误的。您应该使用任何客户端模板引擎（例如 Handlebars.JS）呈现响应 JSON 对象。

然后定义构造函数和原型方法，如

```
function album(container){
    this.container=container
}

album.prototype.open=function() {
    container.show();
}

album.prototype.renderHTML=function(jdata) {
 //This is handlebar.js code

 template=$('#albumTemplate').text();
 compiledTemplate=Handlebars.compile(template);
 renderedTemplate=compiledTemplate(jdata);
 container.html(renderedTemplate);
} 
```

完成此操作后，您就可以准备好专辑类并可以像这样开始使用它

```
var container=document.getElementById('myalbum001'),
    album=new album(container);

container.on('click',function(e){
    album.render(jdata);  //You can get jdata by making AJAX call before this line
    album.open()  
} 
```

我会建议你快速浏览一下 Handlebar.js

# asp.net - 如何将文本框添加到表格行中的每个单元格并让用户添加多行？

> ID：15542236
> 
> 赞同：0
> 
> 时间：2013-03-21T08:05:00.087
> 
> 标签：asp.net, textbox, tablecell

以下是我的标记代码：

```
<asp:Table ID="tbldata"  runat="server" BorderWidth="2">
<asp:TableHeaderRow ID="tableheaderrow1" runat="server">
<asp:TableHeaderCell Width="80" runat="server">SNO</asp:TableHeaderCell>
<asp:TableHeaderCell Width="200" runat="server">Particulars</asp:TableHeaderCell>
<asp:TableHeaderCell Width="80" runat="server">Amount</asp:TableHeaderCell>
<asp:TableHeaderCell Width="120" runat="server">Tax</asp:TableHeaderCell>
<asp:TableHeaderCell Width="300" runat="server">OtherExpenditures</asp:TableHeaderCell>
<asp:TableHeaderCell Width="80" runat="server">NetAmount</asp:TableHeaderCell>
</asp:TableHeaderRow>
</asp:Table> 
```

以下是我的 CS 代码

```
protected void txtCalendar_TextChanged(object sender, EventArgs e)
{
    TextBox t = new TextBox();
    TableRow rowNew = new TableRow(); // Creating a new table row
    for (int i = 0; i < 6; i++)
    {
        TableCell tcell = new TableCell();
        tcell.Controls.Add(t);         // add the textbox control at cell zero
        // or you can add it as
        rowNew.Controls.Add(tcell);
    }
    tbldata.Controls.Add(rowNew);
} 
```

我想将文本框添加到表格行中的每个单元格，以便用户可以在那里输入数据，但是使用上面的代码，文本框只添加到最后一个单元格。我应该怎么做才能将文本框添加到每个单元格？如上面的标记所示，有 5 个标题列。我想为每一列添加文本框。我该怎么做？我还想包含一个名为 Add Row 的按钮，单击该按钮可让用户添加行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-21T08:33:03.727

这不是一个很容易满足的要求。

幸运的是，多年前 Matt Dotson 制作了[BulkEditGridView](http://blogs.msdn.com/b/mattdotson/archive/2005/11/09/real-world-gridview-bulk-editing.aspx)。

您可以从 codeplex 下载此自定义控件的[最新代码。](http://www.codeplex.com/ASPNetRealWorldContr)

# php - Preg 匹配未找到正确的字符串

> ID：15542241
> 
> 赞同：0
> 
> 时间：2013-03-21T08:05:26.583
> 
> 标签：php, xml, regex

我有一个问题，我有一个脚本应该在 XML 文件中搜索匹配的字符串。这是我的脚本：

```
 <?php
$file = "klein.xml";
$lines = file($file);
foreach ($lines as $line_num => $line)
{
    echo htmlentities($line);
    echo "<br>";

}

   if (preg_match("/message/", htmlentities($line), $found))
   {
     echo "Found!";
     echo $found[0]; 
     echo "test";
   }
   else
   {
       echo "Not Found!";
   }
?> 
```

这是我正在使用的 xml 文件：

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
<product-data>
<message-header>
<message-id>OR-1361163557-gr</message-id>
<message-timestamp>1361163557</message-timestamp>
<export-version current_version="1">OGPDX-2.01.01</export-version>
</message-header>
</product-data> 
```

问题是当我预匹配“产品”时它可以正常工作但是当我尝试预匹配另一个字符串即“消息”时它不起作用？

我很好奇解决方案，在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:13:34.133

你能检查一下这段代码吗，我注意到你把`if`循环放在外面`foreach`；因此只执行最后一行。

```
<?php
$file = "klein.xml";
$lines = file($file);
foreach ($lines as $line_num => $line)
{
   if (preg_match("/message/", htmlentities($line), $found))
   {
     echo "Found ".$found[0]."<br />";
   }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:14:46.993

问题出在你的逻辑上：你只检查最后一个值`$line`是包含`</product-data>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:16:10.330

所以你在搜索什么？xml 的一行...
当您搜索“产品”（在最后一行）时，$line 在最后一行。

```
foreach ($lines as $line_num => $line)
{
   if (preg_match("/message/", $line , $found))
   {
     echo "Line: $line_num - ".$found[0]." <br>";
   }
} 
```

# mysql - 数据库中的特定搜索

> ID：15542245
> 
> 赞同：0
> 
> 时间：2013-03-21T08:05:34.617
> 
> 标签：mysql

我正在寻找使用innodb引擎在mysql中搜索特定单词的方法。考虑以下示例：

```
Text:
1.Card has two sides.
2.This is my card.
3.We have a car.
4.Car has good color.
5.This was my car.
6.The car is nice. 
```

假设这些点是不同的行并且位于同一列“文本”下。我需要一个查询，该查询使用“like”提取带有“car”这个词的行，无论“car”这个词是在开头、中间还是结尾。请记住，“卡”不是必需的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:14:19.553

用它

```
SELECT * FROM table WHERE name LIKE '%car' or name LIKE '%car %'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T13:03:28.577

这里是..

```
SELECT * FROM table WHERE name LIKE '% car' or name LIKE 'car %' or name LIKE '% car %' or name like '% car.'; 
```

它将同时选择起始单词最后一个单词和单词之间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:11:15.577

如果要包括“汽车”并排除“卡”，您可以搜索

```
SELECT Text FROM Table WHERE Text LIKE '% Car.%' or Text LIKE '% Car %'; 
```

那将要求始终有一个“。”。到底。您可以添加另一个

```
or Text LIKE '% Car'; 
```

如果您对此不确定。

如果这变得更复杂，您可能需要查看正则表达式。虽然通常较慢，但如果您的 LIKE... OR... 表达式变得过于复杂，它们会更快。您可能需要进行一些基准测试以找出最适合您的情况。

# hadoop - 与 PostgreSQL 相比，Hive 索引重建太慢

> ID：15542248
> 
> 赞同：0
> 
> 时间：2013-03-21T08:05:47.277
> 
> 标签：hadoop, hive

我正在尝试比较我的 PostgreSQL 数据仓库和新创建的 Hive 数据仓库上的相同功能，该数据仓库在具有相同数据和相同表结构的同一个盒子上。我试图了解 Hive 的好处，但是......尽管数据加载到 PostgreSQL 中的运行速度要慢 3 倍 - PostgreSQL 上的索引创建/重建速度要快 20 倍，但不需要每次都重建索引蜂巢。我的问题是：我在 Hive 配置中缺少什么？

我的设置是： CREATE TABLE mytable (aa int, bb string) ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t' LOCATION '/data/spaces/hadoop/hadoopfs';

LOAD DATA LOCAL INPATH '/data/Informix94/spaces/postgres/myfile_big' OVERWRITE INTO TABLE mytable;

CREATE INDEX mytable_indx ON TABLE mytable(aa) AS 'org.apache.hadoop.hive.ql.index.compact.CompactIndexHandler' WITH DEFERRED REBUILD LOCATION '/data/spaces/hadoop/hadoopfs';

设置 hive.optimize.autoindex=true; 设置 hive.optimize.index.filter=true;

改变索引 mytable_indx ON mytable 重建；

我的 Box 是一个 3 克内存的虚拟机，上面运行着 PostgreSQL，占用了大约 1 克内存。他充当元数据存储。我正在使用 CentOS、Hadoop、Hive 的最新稳定版本，并且没有更改 Hive 默认设置，除了 matadata 存储位置和统计信息禁用。

结果：索引重建在 260.000.000 行上需要 4798 秒，在 5.000.000 行上需要 80 秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T14:57:22.747

只有当您的数据不再适合单台机器时，Hive 才能正常工作。所以你看到的结果是预期的结果。因此，一旦您收集了 TB 或 PB 的数据，您就会对 Hive 感到更加满意。在您描述的用例中，PostgreSQL 将是一个更好的匹配。

# android - 堆叠选项卡的外观在版本 < 3.0 上不同，在版本上不同 >3.0

> ID：15542257
> 
> 赞同：0
> 
> 时间：2013-03-21T08:06:25.580
> 
> 标签：android, android-ui

我已经从 actionBar 样式生成器创建了 actionBar 并将样式复制粘贴到我的应用程序中。我使用 tabwidget 创建了堆叠选项卡的 UI。但是当我在我的清单文件中使用这种动作栏样式时，比如 android:theme="@style/Theme.Customtheme"，它的外观和感觉与动作栏不同（在 4.2 版上），我是在动作栏样式生成器上创建的。其次是当我在 Android 2.3.3 上运行我的应用程序时，它会显示出与 android 4.2 不同的外观。我希望所有版本都具有相同的外观和感觉，并且我正在使用 sherlock 库来支持所有版本。我看了很多，但没有得到完美的解决方案。请任何人提出答案。提前致谢。

以下是我的代码 Sherlockfragment

```
public class CustomActivity extends SherlockFragmentActivity {
TabHost tHost;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_custom);

        tHost = (TabHost) findViewById(android.R.id.tabhost);
        tHost.setup();

        /** Defining Tab Change Listener event. This is invoked when tab is changed */
        TabHost.OnTabChangeListener tabChangeListener = new TabHost.OnTabChangeListener() {

            @Override
            public void onTabChanged(String tabId) {
                FragmentManager fm =   getSupportFragmentManager();
                ResidentialFragment resdentialFragment = (ResidentialFragment) fm.findFragmentByTag("residential");
                CommercialFragment commercialFragment = (CommercialFragment) fm.findFragmentByTag("commercial");
                FragmentTransaction ft = fm.beginTransaction();

                if (resdentialFragment!=null) {
                    ft.detach(resdentialFragment);
                }       
                /** Detaches the commercialfragment if exists */
                if (commercialFragment!=null) {
                    ft.detach(commercialFragment);
                }
                /** If current tab is residential */
                if(tabId.equalsIgnoreCase("residential")){

                    if(resdentialFragment==null){
                        /** Create residentialFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new ResidentialFragment(), "residential");
                    }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(resdentialFragment);
                    }

                }else{    /** If current tab is apple */
                    if(commercialFragment==null){
                        /** Create AppleFragment and adding to fragmenttransaction */
                        ft.add(R.id.realtabcontent,new CommercialFragment(), "commercial");
                     }else{
                        /** Bring to the front, if already exists in the fragmenttransaction */
                        ft.attach(commercialFragment);
                    }
                }
                ft.commit();
            }
        };

        /** Setting tabchangelistener for the tab */
        tHost.setOnTabChangedListener(tabChangeListener);

        /** Defining tab builder for residential tab */
        TabHost.TabSpec tSpecResidential = tHost.newTabSpec("residential");
        tSpecResidential.setIndicator("Residential");
        tSpecResidential.setContent(new DummyTabContent(getBaseContext()));
        tHost.addTab(tSpecResidential);

        /** Defining tab builder for commercial tab */
        TabHost.TabSpec tSpecComm = tHost.newTabSpec("commercial");
        tSpecComm.setIndicator("Commercial");
        tSpecComm.setContent(new DummyTabContent(getBaseContext()));
        tHost.addTab(tSpecComm);

    }
} 
```

以下是我的清单文件

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.customactivity"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="17" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher">
        <activity
            android:name="com.example.customactivity.CustomActivity"
            android:label="@string/projects"
            android:theme="@style/Theme.Customtheme" 
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.customactivity.ResidentialFragment"
            android:label="@string/title_activity_residential" >
        </activity>
        <activity
            android:name="com.example.customactivity.CommercialFragment"
            android:label="@string/title_activity_commercial" >
        </activity>

    </application>

</manifest> 
```

在这里，我附上了我想要的外观。

![在此处输入图像描述](../Images/9de1c515c5d538d383722f332bff2d27.png)

以下来自 4.2 版的图片

![在此处输入图像描述](../Images/cc54a9dba2e25d2a42fa81f20831194c.png)

以下来自版本 2.3.3 的图像

![在此处输入图像描述](../Images/77138e29c530617b46f1e34dd550afef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:34:08.163

首先，要`ActionBar`使用样式，`ActionBarSherlock`您需要为每个版本的android（几乎）创建相同的样式。例如，您需要在应用程序的这些文件夹中创建`styles.xml`和`theme.xml`

```
- res
 -- values
   -- styles.xml
   --themes.xml
 -- values-11
   -- styles.xml
   -- themes.xml
 -- values-14
   -- styles.xml
   -- themes.xml 
```

在这些文件夹/文件中，您将需要使用不同类型的指标。在默认值文件夹中，您必须使用`Theme.Sherlock`（不确定名称）作为父主题或您的自定义主题，并且您需要使用它的指示器来设置它的样式，例如`actionbarStyle:`，而不是`android:`在它前面。`values-14`例如，我将用作自定义主题的父主题，并且必须使用（因为我记得值的名称）来`Theme.Holo`设置操作栏的样式。`android:actionbarStyle`

因此，如果您想将操作栏的样式设置为在所有版本中看起来都相同，则应注意不同版本中的这些样式。

# primefaces - 如何使用 requiredMessage 属性获取警告消息而不是错误消息？

> ID：15542258
> 
> 赞同：0
> 
> 时间：2013-03-21T08:06:29.277
> 
> 标签：primefaces

我想使用 requiredMessage 属性获取警告消息。我能得到吗？如果可能的话，我该如何解决我的问题？

不改变托管bean我可以实现吗？意味着不使用 FacesMessage 可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:34:23.827

以下是您以编程方式处理它的方式：

```
FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_WARN, header, message)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T10:38:40.650

一种简单（且更安全）的方法是在服务器端进行检查。检查该字段，如果它为 null 或为空，您可以创建一个 FacesMessage。

```
String message = "Your message here";
FacesMessage facesMessage = new FacesMessage(FacesMessage.SEVERITY_WARN,message,null);
FacesContext facesContext = FacesContext.getCurrentInstance();
facesContext.addMessage(null,facesMessage); 
```

# .net - 建议在 .NET 语言上进行跨平台 GUI 编程？

> ID：15542260
> 
> 赞同：1
> 
> 时间：2013-03-21T08:06:33.610
> 
> 标签：.net, user-interface

我是一名大学生，我计划在今年夏天开始一个开源 UML 绘图项目，在这里寻求有关 .NET 平台的建议。

首先，我在 Windows 上没有任何编程经验（几年前我在 Visual Basic 中完成了 Hello World ..），但我在 Linux 中了解很多语言（Python、Ruby、Erlang、Lisps、C、Java）等. 我在Linux开源项目上也有一些经验。

.NET 编程是澳门许多政府工作的要求，这个项目旨在制作一个可用的开源 UML 绘图项目，并让自己尝试 .NET（和 Windows）编程。

虽然我有学习 Windows 编程的目的，但我仍然希望我的程序能够在 Linux（这是我使用最多的环境）上运行。所以我想要一些关于编程平台的建议：

1.  用C#开发跨平台的GUI程序，在Linux下用Mono运行会这么难吗？（在这个 UML 绘图案例中）
2.  我可以使用什么 GUI 库？我应该使用 QT 还是 GTK+？还是微软世界的其他东西？（我对微软的东西知之甚少）
3.  在linux中，我使用Emacs、Glade、命令行编写程序。Windows 程序员（通常）是否在命令行中输入“javac”或“gcc”？我可以使用什么 IDE 在 Windows 上开发 .NET GUI 程序？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:33:44.973

根据您的知识集，GTK# 可能是您的最佳选择。它是跨平台的，基于 GTK+。安装 MonoDevelop/Xamarin Studio 并创建一个 GTK# 项目。然后您可以探索 GTK# 提供的内容。建议 Mono 人为 GTK# 创建一个可视化设计器，这样您就不需要任何其他 IDE/工具来创建 UI。

Mono 还支持 WinForms 作为另一个跨平台选项。但由于 WinForms 源自微软，您可能需要使用 Windows + Visual Studio 来设计 WinForms UI（或使用 SharpDevelop）。一个名为 NClass 的基于 WinForms 的 UML 工具被移植到 Mono，[http://www.mono-project.com/Guide: _Porting_Winforms_Applications](http://www.mono-project.com/Guide:_Porting_Winforms_Applications)

Mono 通过 Qyoto 也支持 Qt，但是要开发 UI，您需要几个工具。我不是 Qt 专家，所以我不能说太多。

**Edited:** For more information, please visit [http://www.mono-project.com/Gui_Toolkits](http://www.mono-project.com/Gui_Toolkits)

# drupal-7 - Drupal 7 问卷调查表

> ID：15542263
> 
> 赞同：2
> 
> 时间：2013-03-21T08:06:54.340
> 
> 标签：drupal-7, drupal-webform

在 drupal 7 中创建问卷的最佳方法是什么？我们使用多项选择题。(+/- 20)

每页可以有一个问题吗？如何？

有没有办法给用户这个问卷的最终分数？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:24:02.427

您将需要安装[字段组](http://drupal.org/project/field_group)模块和[视图](http://drupal.org/project/views)模块。

添加内容类型“Test1”

*   在 Test1 中，添加一个文本字段“Question1”
*   另外，添加一个列表（文本）字段，输入
    *   q1|答一
    *   q2|答二
*   重复更多问题

使用字段组模块按页面划分问题。

要参加考试，请添加 Test1 " `/node/add/test1`"。

要创建答题卡，请参加测试并使用测试的节点 ID 进行下一步。

创建一个视图，使用视图。将任何参加的测试与答卷的节点 ID 匹配。您可以这样做，方法是在测试结束时包含一个链接，该链接链接到“ `/score/%NID%`”，`%NID%`即当前 TEST1 的节点 ID。在视图中创建一个页面，使用“ `/score/%`”作为路径。使用上下文过滤器从路径中获取 NID 并将其与备忘单的 NID 进行匹配。

[您可以通过实体 API](http://drupal.org/project/entity)和[实体引用](http://drupal.org/project/entityreference)模块使用引用字段来获得更高级的功能。

享受！

# oracle - 将具有数组的对象传递给 oracle 存储过程

> ID：15542265
> 
> 赞同：0
> 
> 时间：2013-03-21T08:07:10.590
> 
> 标签：oracle, oracle10g, oracle11g

我有一个“用户”类，如下所示：

```
public class User{
    private String firstname;
    private String lastname;
    private String[] departments;

} 
```

我想将 User 类型的对象传递给我的 oracle 存储过程，该存储过程将对象类型作为参数。所以我这样做是为了实现我的解决方案：-

```
1\. Created USER_SEARCH_OBJ as a type in database as follows:-
      create or replace
        TYPE USER_SEARCH_OBJ AS OBJECT (
              FIRST_NAME VARCHAR2(256),
              LAST_NAME VARCHAR2(256), 
              DEPARTMENTS TABLE_OF_VALUES,
        );

2\. Created TABLE_OF_VALUES as a type in database as follows:-
      create or replace TYPE TABLE_OF_VALUES AS TABLE OF VARCHAR2(20);

3\. Passed the User object from Java class as follows:-
       Object[] departments = {"1","2"};
       StructDescriptor objDescriptor = StructDescriptor.createDescriptor("USER_SEARCH_OBJ", conn.getMetaData().getConnection());
       ArrayDescriptor arrayDescriptor = ArrayDescriptor.createDescriptor("TABLE_OF_VALUES", conn.getMetaData().getConnection());
       ARRAY departmentArr = new ARRAY(arrayDescriptor, conn.getMetaData().getConnection(), departments );
       Object[] userProperties = new Object[2];
       userProperties [0] = "paras";//first_name
       userProperties [1] = "anand";//last_name
       userProperties [2] = departmentArr ;//department array
       STRUCT searchObj = new STRUCT(objDescriptor, conn.getMetaData().getConnection(), userProperties );
       CallableStatement cStmt = conn.prepareCall("PCK_SEARCH2.USER_SEARCH(?,?)");
       cStmt.setObject(1, searchObj);
       cStmt.registerOutParameter(2, OracleTypes.CURSOR);
       cStmt.execute(); 
```

但是当我运行这段代码时，我得到一个异常如下： -

```
java.sql.SQLException: Inconsistent java and sql object types
    at oracle.sql.StructDescriptor.toOracleArray(StructDescriptor.java:709)
    at oracle.sql.StructDescriptor.toArray(StructDescriptor.java:1296)
    at oracle.sql.STRUCT.<init>(STRUCT.java:165)
    at com.ensenda.lmp.web.controller.User.main(User.java:75) 
```

此异常出现在以下代码行：-

```
STRUCT searchObj = new STRUCT(objDescriptor, conn.getMetaData().getConnection(), userProperties ); 
```

请让我知道我哪里出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-25T06:16:20.187

首先我认为你应该得到一个**ArrayOutOfBoundException**因为你已经声明了一个 Object[2] 并试图将第三个元素放入其中。考虑到这是一个错字。

对于原始问题而不是使用 setObject 您可以使用 *JDBCUtil.setStruct(conn,cStmt,1,"USER_SEARCH_OBJ",userProperties);*

# java - 列出添加和删除元素

> ID：15542267
> 
> 赞同：3
> 
> 时间：2013-03-21T08:07:19.710
> 
> 标签：java, bukkit

我目前正在编写一个 bukkit 插件（bukkit 是我的世界服务器类型；）），在那里，你在一个名为[YamlConfiguration](http://jd.bukkit.org/rb/apidocs/org/bukkit/configuration/file/YamlConfiguration.html)的类中有一个方法，它具有以下方法：

```
public List<?> getList(String path) 
```

我的问题是：我想从这个返回的列表中添加和/或删除元素。但是当我尝试通过

```
YamlConfiguration config = YamlConfiguration.load("path/to/config.yml");
config.getList("a.path").add(new String("foo")); 
```

eclipse 抛出一个错误，因为

> List<capture#2-of ?> 类型中的方法 add(capture#2-of ?) 不适用于参数 (String)

我真的不知道该怎么办。^^'

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:15:18.747

您真的要加载您的项目`getList`吗？还有[`getStringList(...)`](http://jd.bukkit.org/rb/apidocs/org/bukkit/configuration/ConfigurationSection.html#getStringList%28java.lang.String%29)可用的。

所以也许你可以试试：

```
config.getStringList("a.path").add("foo"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T08:18:28.807

`List<?> list`可以指向任何类型的列表，例如`List<String`> 或`List<Integer`> 或任何其他。这意味着您不知道实际列表是什么，因此您只能添加`null`到此列表中。在本教程中阅读更多内容[http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:18:17.570

`?`是表示未知类型的通配符，因为您不知道的类型，`list<?>`因此您无法向其中添加任何元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:20:51.847

如果你确定它返回一个字符串列表，你可以转换它：

```
((List<String>)config.getStringList("a.path")).add("foo"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T08:22:29.647

我认为您必须替换`<?>` 为`<Object>`然后您可以将任何想法添加到您`Integer`的`String`列表中...

祝你好运 ：）

# .net - Winforms Textbox 控件，可以以可读格式呈现不可读的字符，例如

> ID：15542268
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:07:20.417
> 
> 标签：.net, textbox, richtextbox

有谁知道文本框控件可以以可读格式`<CR> <LF>`或类似格式呈现不可读字符

如果它有大文件支持也会有所帮助，即能够加载大量文本而不会停下来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:10:10.260

`RichTextBox`能够进行这种渲染。

# sitecore - 如何设置在浏览器上键入此 http://[instance name] 时显示的默认页面？

> ID：15542271
> 
> 赞同：0
> 
> 时间：2013-03-21T08:07:27.823
> 
> 标签：sitecore

我删除了默认主节点并创建了另一个名为 Home Page 的节点。当我输入 http://[instance name] sitecore 给我一个错误，显示没有找到布局。![在此处输入图像描述][1]

我可以正常使用页面编辑器和页面内容。但是当我在浏览器中输入 http://[instance name] 时，它不会显示默认页面。为什么？我只是 Sitecore 的新手，请更具体一些。

错误：未找到所请求文档的布局。最可能的原因：您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。您可以尝试什么： 返回上一页 转到起始页 更多信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T14:49:21.600

当我进行全新安装且尚未发布时，我通常会遇到此问题。发布使 master 和 web 同步，并且鉴于您的 Page Editor 体验很好，您的 Master 似乎处于良好状态，但 Web 却不是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T08:28:26.167

可能是您的新 Home 节点没有附加布局。如果您登录到 Sitecore 的内容编辑器并转到演示选项卡 -> 详细信息，您是否看到分配给默认设备的任何内容？
如果这样做，可能是因为您仍需要发布更改。如果不这样做，请尝试附加布局（Sitecore 还提供了一些示例布局，以检查是否存在问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T08:46:46.180

执行 Trayek 建议的检查，同时检查您的站点定义和主机名是否在 /app_config/include/sites.config 中（或直接在 web.config 中，但这不是推荐的方式）中设置正确，以确保您已将正确的实例名称附加到您的站点根目录。

此外，将 Sitecore 客户端切换到 Web 数据库并检查您的主页项目上分配的演示文稿，这可能是一个发布问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-22T09:21:08.307

Is it possible that you have the wrong "startItem" parameter in your site configuration? You have to set it to the correct item that should be visible wenn entered without an url (/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T01:00:06.460

我想你应该检查 Web.Config 配置标签。

请检查那里，那里有各种网站的startitem attibutes。将它们更改为您的 startItem 并尝试一下。

希望这可以帮助！

请让我们知道——它是否有效。

问候，

Varun Shringarpure

# magento-1.7 - Magento：将Taxvat从客户添加到帐单地址

> ID：15542272
> 
> 赞同：0
> 
> 时间：2013-03-21T08:07:30.700
> 
> 标签：magento-1.7

我想知道增值税号是如何保存在客户的帐单地址中的。我在代码中找不到它，也没有在网上找到解决方案。希望有人可以帮助我。

我正在寻找这个的原因：Magento Core 1.7 本身提供欧盟增值税服务，而不是安装第 3 方扩展。但它看起来@保存在地址中的增值税号，而不是来自客户的增值税号。遗憾的是，默认情况下无法在您在“我的帐户”中创建的地址中添加增值税号。

非常感谢任何可以提供帮助的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:43:22.460

在发票 PDF 中，我使用：

```
$taxvat = $order['customer_taxvat']; 
```

然后在你需要的地方回显。

在管理员中，我想您可以使用 {{order.customer_taxvat}}，但我还没有测试过。

# c++ - C++ 解析器生成器

> ID：15542276
> 
> 赞同：3
> 
> 时间：2013-03-21T08:07:45.730
> 
> 标签：c++, parsing, lexer, lexical

我正在编写自己的脚本语言，我需要一个软件工具来生成用于解析我的语言的 C++ 代码。我需要一个词法分析器和一个生成 C++ 代码的解析器生成器。如果我也能生成一个 Visual C++ 2010 项目，那就太好了。建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T08:11:27.647

[http://en.wikipedia.org/wiki/Comparison_of_parser_generators](http://en.wikipedia.org/wiki/Comparison_of_parser_generators)

对于 C/C++：[http ://epaperpress.com/lexandyacc/](http://epaperpress.com/lexandyacc/)

或查看：Boost.Spirit：

> “Spirit 是一组 C++ 库，用于使用表达式模板和模板元编程实现为特定领域嵌入式语言 (DSEL) 的解析和输出生成。”

你真的需要新语言吗？也许使用一些像Lua，Python这样的知名产品会更好？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:30:47.330

尝试使用 Flex 和 Bison。它们是很好的词法分析器和解析器生成器，可用于定义新语言。

[http://en.wikipedia.org/wiki/Flex_lexical_analysisr](http://en.wikipedia.org/wiki/Flex_lexical_analyser)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-11T15:35:58.027

这是一个老问题，但仍然可能相关：因为我对现有选项不满意，所以我最近编写了一个模板 c++ 解析器生成器，它不需要任何外部工具（您包含一个标题并直接在 c++ 源代码中定义语法） . 它使用可读的 PEG 语法，因此不需要单独的词法分析步骤。你可以在[Github](https://github.com/TheLartians/Parser)上查看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T09:08:04.917

[您有两个选择：是否通过创建AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree) （抽象语法树）来创建自己的解析器，那么这对您来说将是一个很好的练习，但它很长而且很难实现。或者您可以使用开源解决方案，例如具有 C/C++ 语法的[ANTLR](http://antlr.org/)解析器生成器以及预处理器。我从来没有使用过它，所以我不能说它对 C++ 的解析有多完整。那么如果你赶时间，想创建一个好的解析器，你最好使用第二种解决方案

# json - Angularjs 问题 $http.get 不工作

> ID：15542278
> 
> 赞同：20
> 
> 时间：2013-03-21T08:07:55.667
> 
> 标签：json, http, rest, get, angularjs

我是 Angularjs 的新手，并尝试遵循 angularjs 网站文档中为 $http.get 给出的示例。

我有一个 REST 服务，它在调用时返回数据如下：

```
http://abc.com:8080/Files/REST/v1/list?&filter=FILE

 {
  "files": [
    {
      "filename": "a.json",
      "type": "json",
      "uploaded_ts": "20130321"
    },
    {
      "filename": "b.xml",
      "type": "xml",
      "uploaded_ts": "20130321"
    }       
  ],  
 "num_files": 2} 
```

我的 index.html 文件的部分内容如下所示：

```
<div class="span6" ng-controller="FetchCtrl">
    <form class="form-horizontal">
        <button class="btn btn-success btn-large" ng-click="fetch()">Search</button>
    </form>
      <h2>File Names</h2>
      <pre>http status code: {{status}}</pre>
     <div ng-repeat="file in data.files">
      <pre>Filename: {{file.filename}}</pre>
    </div> 
```

我的 js 文件如下所示：

```
function FetchCtrl($scope, $http, $templateCache) {
  $scope.method = 'GET'; $scope.url = 'http://abc.com:8080/Files/REST/v1/list?&filter=FILE'; 
  $scope.fetch = function() {
    $scope.code = null;
    $scope.response = null;

    $http({method: $scope.method, url: $scope.url, cache: $templateCache}).
      success(function(data, status) {
        $scope.status = status;
        $scope.data = data;
      }).
      error(function(data, status) {
        $scope.data = data || "Request failed";
        $scope.status = status;
    });
  };      
} 
```

但是当我运行它时，我没有看到任何文件名结果，并且我看到 http 状态代码 = 0

当我跑步时，

```
http://abc.com:8080/Files/REST/v1/list?&filter=FILE
```

在浏览器中，我仍然可以看到想要的结果（如上所述）

我什至尝试在 Firefox 中使用 Firebug 进行调试，当我点击“搜索”按钮时，我看到上面的 URL 被调用，但响应看起来是空的。有趣的是，在 URL 下的 Firebug 中，它显示

```
   选项“高于 URL” 

```

代替

```
   获取“以上网址”

```

您能否告诉我，我做错了什么以及为什么我无法访问 JSON 数据？

谢谢，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-21T08:25:54.837

这是因为 Angular 如何处理 CORS 请求（跨站点 HTTP 请求）。Angular 默认添加了一些额外的 HTTP 标头，这就是为什么您看到的是`OPTIONS`request 而不是`GET`. 尝试通过添加以下代码行来删除`X-Requested-With`HTTP 标头：

```
delete $http.defaults.headers.common['X-Requested-With']; 
```

关于 CORS，[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS?redirectlocale=en-US&redirectslug=HTTP_access_control)上提到了以下内容：

> 跨域资源共享标准通过添加新的 HTTP 标头来工作，这些标头允许服务器描述允许使用 Web 浏览器读取该信息的源集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-26T16:51:01.830

我一直在使用 $resource 时遇到问题，它也使用 $http。

我注意到，当我使用 AngularJS 1.0.6 时，请求甚至不会出现在 Firebug 中，但是当使用 AngularJS 1.1.4 时，Firebug 会显示 GET 请求和 200 OK 响应以及正确的标头，但响应为空。实际上，标头还显示数据正在返回，如具有正确内容长度的“Content-Length”标头所示，并将其与我正在使用的 REST 客户端插件进行比较，该插件成功检索了数据。

在进一步怀疑之后，我决定尝试不同的浏览器。我最初使用的是 Firefox 16.0.1（也尝试过 20.0.1），但是当我尝试 IE 9（和 AngularJS 1.1.4）时，代码运行正常，完全没有问题。

希望这将帮助您找到解决方法。就我而言，我注意到我从来没有遇到过相对 URL 的问题，所以我正在更改我的应用程序，以便应用程序和 API 都在同一个端口上提供服务。这可能是一个 AngularJS 错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T06:10:16.333

我今天用firefox遇到了同样的问题。IE 运行良好。起初我不认为这是 cors，因为像你一样，我在控制台中没有错误，并且在我的错误方法中得到了 0 的状态。在 Firefox 控制台中，我在标题和内容长度中收到了 200 响应，但没有实际响应消息。Firefox 过去常常给你一个关于跨站点脚本的警告，这会为你指明正确的方向。我通过在我的 api 上设置 cors 解决了这个问题。这确实是最好的方法。如果您仅将 GET 与您的 api 一起使用，您也可以尝试使用 jsonp，它内置在 angular 中，当您不控制正在使用的 api 时，它是 cors 的一种解决方法。

```
$http.jsonp('http://yourapi.com/someurl')
    .success(function (data, status, headers, config) {
        alert("Hooray!");
    })
    .error(function (data, status, headers, config) {
        alert("Dang It!");
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T18:00:03.260

这是跨站点脚本保护。尝试使用 --disbable-web-security （通过命令行）启动 google chrome。如果这不起作用，请尝试将您的 Angular 内容放入 http 服务器，而不是使用文件协议。（提示：如果您想要一个专用于 --disable-web-security 的浏览器，请使用 chrome canary - 当然您也必须设置命令行参数，但两个 chrome 版本同时运行）。对于发布，您必须在提供 AngularJS-stuff 的服务器上设置一些 http 标头，以允许访问 twitter api 或您想要调用的任何内容。

# ios - 更改 tableView:heightForRowAtIndexPath

> ID：15542288
> 
> 赞同：2
> 
> 时间：2013-03-21T08:08:30.367
> 
> 标签：ios, uitableview

我对如何更改 UITableViewCell 有点困惑。这个对吗？

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath     *)indexPath
{
return 95;
} 
```

如果我需要解释更多，我可以。抱歉，如果这是一个愚蠢的问题，我是 iOS 开发新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:16:02.833

首先检查您是否在 .h 文件中声明了表视图委托。

无需使用属性声明表视图..

```
UITableView *tableView; 
```

像这样声明..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:13:48.437

该代码很好，它可能只是没有被调用。您需要正确设置`delegate`表格视图的属性才能调用此方法。

**或者**

由于您的高度都相同，您可以使用快捷方式并设置表格视图的[rowHeight](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableView/rowHeight)属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:48:29.143

设置表的数据源并从 .xib 委托给文件的所有者。

![在此处输入图像描述](../Images/6bb21dc6c3253c2394ee88322dc00a23.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:09:53.050

这个委托将改变表格视图单元格的高度

# python - 获得 django 查询的最佳匹配

> ID：15542289
> 
> 赞同：1
> 
> 时间：2013-03-21T08:08:35.857
> 
> 标签：python, django

我有一件事需要建议。请帮助我。

我的情况是：我在这个表中有一个模型，比如 ordercode 我有前缀

```
1  | US
12 | Canada
13 | UK
134 | Australia 
```

和更多。然后，我有像 12345678 这样的字符串，我需要得到这个字符串的最佳匹配。

如果用户输入 12345678 最佳匹配是 12|Canada ，如果用户输入 135678975 最佳匹配是 13|Uk，如果用户输入 1345676788 最佳匹配是 134。

我怎么能在 django 查询中做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:43:52.310

它将需要多个请求来检查给定订单代码中的每个字符...

```
def get_matching_country(order_num):
    i = 1
    matching_req = Country.objects.none()
    while true:
        req = Country.objects.filter(country_code=order_num[:i])
        if res.exists():
            matching_req = req
            i += 1
        else:
            break

    return matching_req 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T08:26:19.183

```
def match_country(request, string):
    qs = Country.objects.filter(country_code__startswith=string) #or int(string) but you might want to write an exception if person provides a letters in that numbers.

    return ... 
```

您是否将国家代码保存为字符串或整数？

# jquery - 大写的 Razor boolean html5 属性阻止了 jquery 中的条件语句

> ID：15542290
> 
> 赞同：3
> 
> 时间：2013-03-21T08:08:36.357
> 
> 标签：jquery, asp.net-mvc, html, razor

我有一个剃刀的看法：

```
<select id="roletypeddl" >
   <option value="@roletype.Id" selected="selected" data-assignabletoperson="@roletype.AssignableToPerson" >@roletype.Name</option>
</select> 
```

因此，在 jquery 中，如果 data-assignabletoperson 为真，我想运行一些代码，因此：

```
if ($('#roletypeddl').find('option:selected').data('assignabletoperson') == true)
{
  do something
} 
```

问题是这段代码永远不会被执行。

我认为这与正在生成的 html 有关：

```
<select id="roletypeddl">
  <option data-assignabletoperson="True" selected="selected" value="5">Manufacturer</option>
</select> 
```

我认为问题在于“True”是大写的。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:11:19.783

`data-`属性不知道您的数据类型。`@roletype.AssignableToPerson`html 输出是`True`，但这不是布尔值，这是字符串...

以下陈述

```
data-assignabletoperson="True" 
```

不是布尔值，它的字符串，所以你应该像这样比较：

```
if ($('#roletypeddl').find('option:selected').data('assignabletoperson') == "True")
{
    do something
} 
```

**更新：** `data`知道您的数据类型。问题是“真”。它必须是“真实的”。

和[示例](http://jsfiddle.net/jfriend00/6BA8t/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:17:39.177

尝试使用：

```
data-assignabletoperson="@roletype.AssignableToPerson.ToLower()" 
```

例如。

```
<select id="roletypeddl" >
   <option value="@roletype.Id" selected="selected" data-assignabletoperson="@roletype.AssignableToPerson.ToLower()" >@roletype.Name</option>
</select> 
```

参考：

[为什么 Boolean.ToString 输出“真”而不是“真”</a>](https://stackoverflow.com/questions/491334/why-does-boolean-tostring-output-true-and-not-true)

 [此外，您可以使用 javascript：](https://stackoverflow.com/questions/491334/why-does-boolean-tostring-output-true-and-not-true) 

[](https://stackoverflow.com/questions/491334/why-does-boolean-tostring-output-true-and-not-true)****[.toLowerCase()](http://www.w3schools.com/jsref/jsref_tolowercase.asp)****

 **例如。：

```
if ($('#roletypeddl').find('option:selected').data('assignabletoperson').toLowerCase() == 'true')
{
  //do something
} 
```**

# powershell - 带有条件检查的 Powershell 复制脚本

> ID：15542293
> 
> 赞同：0
> 
> 时间：2013-03-21T08:08:51.373
> 
> 标签：powershell, copy

我们的要求是将文件从源文件夹复制到目标文件夹。

该子句在脚本的第一次运行期间应复制所有内容，但在随后的运行中，它应仅复制那些尚未复制且是新文件的文件。

问题出在目标文件夹中，我们有一个脚本可以处理文件并在执行后将其删除。所以我们不希望将源中的重复文件复制到目标。

例子

```
source-> abc.txt,def.xt 
```

1 次后

```
dest->abc.txt,def.txt 
```

随后的运行

```
source->abc.txt,def.xt, ghi.txt

dest->abc.txt,def.xt, ghi.txt 
```

现在，当另一个脚本在 dest 文件夹上运行并被删除时`abc.txt`，`ghi.txt`逻辑应该是

```
source->abc.txt,def.xt, ghi.txt,jkl.txt 
```

现在，当脚本运行时，它应该只复制新文件

```
dest->ghi.txt, jkl.txt 
```

我在想我们是否可以在脚本第一次运行后将输出记录到 txt 文件中，然后在将任何内容从源文件夹复制到目标之前设置条件以检查该日志文件是否存在文本文件。

希望能够解释。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:00:11.277

您可以像这样复制那些不在您的历史记录中的文件：

```
$sourceFolder = "..."
$destFolder   = "..."
$historyFile  = "history.txt"

$recurse = $false

$history = Get-Content $historyFile

Get-ChildItem $sourceFolder -Recurse:$recurse | ? {
  -not $_.PSIsContainer -and $history -notcontains $_.FullName
} | % {
  Copy-Item $_.FullName $destFolder
  $_.FullName >> $historyFile
} 
```

该行将`$_.FullName >> $historyFile`复制的文件附加到历史文件。

# android - Android - XML 布局与编程

> ID：15542295
> 
> 赞同：5
> 
> 时间：2013-03-21T08:08:55.707
> 
> 标签：android, android-layout

我正在尝试将相对布局与扩展视图的自定义类和几个按钮一起使用。这就是我最终希望它的样子：

[http://imgur.com/B5MtdJ7](http://imgur.com/B5MtdJ7)

（原谅我发的是链接而不是图片，显然我还不够酷）

目前，这是用 dp 中的高度硬编码的（参见下面的 XML），这有两个问题：

*   它只在我的 Nexus 7 屏幕上看起来可以接受，在其他设备上没有
*   两个自定义视图的 onDraw 方法仍然提供高度和宽度与设备分辨率完全匹配的画布

如果我尝试将 layout_height 设置为 wrap_content，每个自定义视图都会尝试占据整个屏幕，这似乎与要点 2 一致，但显然不是我想要的。

我想要实现的是一个具有两个自定义视图的相对布局，它看起来与图片中显示的完全一样，但会根据它所在的屏幕尺寸进行缩放，并且自定义视图画布实际上知道屏幕的一部分它坐在上面。我该怎么做呢？

编辑：这是“vs programmatic”的原因是我认为覆盖度量不会是一个糟糕的喊叫，但我不知道这将如何与 XML 交互。我也希望将布局定义放在一个地方。

我的 XML 如下：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".TrajectoryView" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.5" >

    <com.sportsim.virtualcricket.view.SideProfileView
        android:id="@+id/side_profile_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </com.sportsim.virtualcricket.view.SideProfileView>
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.5" >

    <com.sportsim.virtualcricket.view.BirdsEyeView
        android:id="@+id/birds_eye_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />
</LinearLayout>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.25"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="0.5"
        android:text="Button" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:59:51.933

使用 LinearLayout 和权重这将相当容易。我在下面给出了一个示例，但目前无法对其进行测试。它应该提供一些方向。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".TrajectoryView" >

<com.sportsim.virtualcricket.view.SideProfileView
    android:id="@+id/side_profile_view"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.5"/>

<com.sportsim.virtualcricket.view.BirdsEyeView
    android:id="@+id/birds_eye_view"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.25" />

<LinearLayout 
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="0.25"
    android:orientation="horizontal">

<Button
    android:id="@+id/button1"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:text="Button" />

<Button
    android:id="@+id/button2"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.5"
    android:text="Button" />

</LinearLayout>
</LinearLayout> 
```

# mdx - MDX - 计算不存在关系的属性

> ID：15542300
> 
> 赞同：1
> 
> 时间：2013-03-21T08:09:30.407
> 
> 标签：mdx

我有一个具有两个属性的维度（帐户） - 组和帐户。多维数据集是预先构建的，没有在这些属性上定义层次结构。

我需要编写一个 MDX 查询，它可以为我提供每个组的帐户数量。更改多维数据集不是一种选择，因此我正在寻找一个纯粹的编程解决方案。

这在 T-SQL 中可能相当简单，但在 MDX 中似乎并不那么简单。

# actionscript-3 - AS3 - 循环播放影片剪辑并将它们光栅化为位图数据 - 如何确保帧准备就绪？

> ID：15542301
> 
> 赞同：1
> 
> 时间：2013-03-21T08:09:41.193
> 
> 标签：actionscript-3, mobile, air, gpu, bitmapdata

这是我之前提出但尚未收到答案的问题的较新版本。

我正在开发一个包含许多动画的移动 AIR 应用程序，测试表明使用位图和 GPU 渲染可以在所有移动模型中提供最佳性能。我从应用程序的艺术家那里收到了正常的矢量动画，并构建了一个系统，该系统**在运行时**循环这些动画并将内容绘制到位图数据中。

我担心的是循环播放电影剪辑的帧。如果我有这些代码行：

```
for (var i:uint=1; i<mc.totalFrames+1; i++) {
  mc.gotoAndStop(i);
  bitmapData.draw(mc);
} 
```

我不能确定框架在绘制之前是否已“构建”，而我对 Android 平板电脑的测试证明了这一点 -**有时**框架没有被绘制。

这个 mc 显然不在显示列表中（我们不需要渲染到屏幕上）。那么有没有办法在将框架绘制到位图数据之前确保框架已经构建？（并等待 FRAME_CONSTRUCTED、EXIT_FRAME 等。显然很慢且不需要）

有任何想法吗？谢谢萨尔

**更多信息以澄清：**

这是一本儿童读物。每个页面都有动画。所有这些动画都是我从开发艺术家（而不是用户）收到的 FLA 中时间轴中的矢量动画。每个页面都有我发布到 swf 的 FLA。

我实际上做的是用它们的位图版本替换加载的 SWF 中的矢量动画。在应用程序运行时，在每个新页面上，我加载 swf，浏览其中的所有动画（循环通过内容的子项），并将每个影片剪辑光栅化为位图数据数组。我的自定义“位图影片剪辑”在显示列表上为每个影片剪辑放置一个替换位图，在 ENTER_FRAME 上，我从数组中切换位图的位图数据。这提供了非常高的性能

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:20:32.143

对不起这是我的错

等待 FRAME_CONSTRUCTED 是答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:07:39.287

我建议使用闪屏，然后将要转换为位图的 MC 先放到舞台上，然后再绘制到您的 bitmapData。有几个问题让我不得不在实际绘制之前将一个正在绘制的 DisplayObject 放到舞台上，所以这对你来说也可能是一个快速修复。

```
var splashBD:BitmapData=new BitmapData(stage.stageWidth,stage.stageHeight,false,0xffffff);
var splashBM:Bitmap=new Bitmap(splashBD); // draw a thing as needed here
addChild(splashBM);
addChildAt(MC_to_convert,getChildIndex(splashBM)); 
// then advance it by frames and draw. 
```

# python - 升级到 gae 1.7.6 后远程 api 错误 10061

> ID：15542302
> 
> 赞同：2
> 
> 时间：2013-03-21T08:09:44.793
> 
> 标签：python, google-app-engine, python-2.7

切换到 gae 1.7.6 后，remote_api 不再工作。
1.7.5 运行良好。

## 应用程序.yaml

handlers:
- url: /rugad_remote.*
#script: google.appengine.ext.remote_api.handler.application #1.7.5
script: google.appengine.ext.remote_api.handler.app #1.7.6
login: admin

## rugadweb.py

```
HOST = '127.0.0.1:8080'      #test  
#HOST = 'xxx.appspot.com'    #prod  

def auth_func():
    return None, None             #test
    #return 'xxxxx', 'yyyyyyyy'   #prod

remote_api_stub.ConfigureRemoteApi(None, '/rugad_remote', auth_func, HOST)   #1.7.6
#remote_api_stub.ConfigureRemoteDatastore(None, '/rugad_remote', auth_func, HOST) #1.7.5 
```

```
    回溯（最近一次通话最后）：
      文件“C:\rugad\rugadweb.py”，第 28 行，在
        remote_api_stub.ConfigureRemoteApi（无，'/rugad_remote'，auth_func，主机）
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\remo
    te_api\remote_api_stub.py"，第 725 行，在 ConfigureRemoteApi
        app_id = GetRemoteAppIdFromServer（服务器，路径，rtok）
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\ext\remo
    te_api\remote_api_stub.py"，第 568 行，在 GetRemoteAppIdFromServer 中
        响应 = server.Send（路径，有效负载 = 无，**urlargs）
      文件“C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\ap
    pengine_rpc.py”，第 393 行，在发送中
        f = self.opener.open(req)
      文件“C:\Python27\lib\urllib2.py”，第 394 行，打开
        响应 = self._open（请求，数据）
      _open 中的文件“C:\Python27\lib\urllib2.py”，第 412 行
        '_open'，请求）
      _call_chain 中的文件“C:\Python27\lib\urllib2.py”，第 372 行
        结果 = 函数（*args）
      http_open 中的文件“C:\Python27\lib\urllib2.py”，第 1199 行
        返回 self.do_open(httplib.HTTPConnection, req)
      文件“C:\Python27\lib\urllib2.py”，第 1174 行，在 do_open
        引发 URLError(err)
    urllib2.URLError: urlopen 错误 [Errno 10061] Es konnte keine Verbindung herges
    Tellt werden, da der Zielcomputer die Verbindung verweigerte

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T15:00:11.903

我刚遇到同样的问题。我使用“localhost:8080”而不是“127.0.0.1:8080”修复它，并使用电子邮件地址登录。

```
HOST = 'localhost:8080'

def auth_func():
    return "user@example.com", "password"

remote_api_stub.ConfigureRemoteApi(None, '/rugad_remote', auth_func, HOST) 
```

# cakephp - Cakephp 删除特定语言的翻译

> ID：15542307
> 
> 赞同：3
> 
> 时间：2013-03-21T08:10:01.943
> 
> 标签：cakephp, internationalization

我试图在模型上创建一些翻译行为。但是我如何删除特定的翻译。

我的示例是具有应翻译名称的类别。可以说我有英文和西班牙文的翻译。我如何删除西班牙语翻译？我可以创建自己的 sql 查询，但是有 cakephp 方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:30:07.047

## 没有蛋糕功能可以做到这一点

但是，它很容易实现

## 删除给定语言环境的所有翻译

删除给定语言环境的所有翻译（与任何破坏性操作一样 -在执行任何操作*之前*进行数据库备份，以便在出现错误或意外删除某些内容时可以恢复）：

```
DELETE FROM i18n WHERE locale = 'esp'; 
```

当然，语言环境取决于您的特定应用程序 - 您可以检查您的配置，或者只是询问数据库：

```
SELECT DISTINCT(locale) FROM i18n; 
```

## 删除给定语言环境和模型的所有翻译

只需添加一个模型条件：

```
DELETE FROM i18n 
WHERE 
    locale = 'esp' AND 
    model = 'Category'
; 
```

## 删除特定模型字段的所有翻译

你需要知道你要操作的记录的id，然后：

```
DELETE FROM i18n 
WHERE 
    locale = 'esp' AND 
    model = 'Category' AND 
    foreign_key = 2468789 AND 
    field = 'name'
; 
```

如果您不确定直接在数据库上运行查询，请先运行 select 以查看要删除的内容：

```
SELECT * FROM i18n 
WHERE 
    locale = 'esp' AND 
    model = 'Category' AND 
    foreign_key = 2468789 AND 
    field = 'name'
; 
```

即找到你想要的，然后简单地将 更改`SELECT`为`DELETE`语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-13T08:04:43.400

令人惊讶的是，没有这样的原生 CakePHP 方法可以删除给定实体的任何翻译。@AD7six 显然是对的，但让我给你一个更“按部就班”的方法。

你可以这样做：

```
<a href="<?= $this->Url->build(['action' => 'deleteTranslation', 'foreign_key' => 123, 'model' => 'Pluginname.Controller', 'locale' => 'de_DE']); ?>"><?= __('Remove translation'); ?></a> 
```

然后创建一个利用该功能的方法：

```
//put this into src/AppController.php to enable that functionality across the whole application

public function deleteTranslation() {
    $this->loadModel('I18n');
    if($this->I18n->deleteAll([
        'locale' => $this->request->getQuery('locale'),
        'model' => $this->request->getQuery('model'),
        'foreign_key' => $this->request->getQuery('foreign_key')
    ])) {
        $this->Flash->success(__('Successfully deleted a translation.'));
    }
    else {
        $this->Flash->error(__('Could not delete a translation.'));
    }
    return $this->redirect($this->referer());
} 
```

# visual-studio-2010 - TFS 应用层，添加用户时出错

> ID：15542311
> 
> 赞同：0
> 
> 时间：2013-03-21T08:10:23.917
> 
> 标签：visual-studio-2010, tfs, admin, administration

我正在尝试将另一个用户（来自另一个域...）添加到管理控制台用户，并且在尝试将帐户添加到主数据库时该过程失败。

日志的相关部分是：

> 起始节点：ADDSYSTEMDBACCOUNT
> 
> [信息@07:21:43.223] NodePath：ADDCOLLACCOUNT/ADDSYSTEMDBACCOUNT
> 
> [Info @07:21:43.223] 将帐户添加到系统数据库...
> 
> [Info @07:21:43.223] 将帐户添加到主数据库...
> 
> [信息@07:21:43.223] ModifyExecRole: Add:DEV\helis
> 
> [错误@07:21:43.363] 未能将 DEV\helis 添加到主控。
> 
> [错误@07:21:43.363] System.Data.SqlClient.SqlException (0x80131904)：无法更改角色“TFSEXECROLE”，因为它不存在或您没有权限。在 Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.MapException（SqlException ex，QueryExecutionState queryState）在 Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.HandleException（异常异常）在 Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlResourceComponent.Execute（ExecuteType executeType , CommandBehavior 行为) 在 Microsoft.TeamFoundation.Framework.Server.TeamFoundationSqlSecurityComponent.ModifyExecRole(String accountName, String role, AccountsOperation operation) 在 Microsoft.TeamFoundation.Admin.ConfigureAddAccountToSystemDBs.AddToDatabase(ActivityContext context,
> 
> [信息@07:21:43.363] 节点返回：错误
> 
> [错误@07:21:43.363]
> 
> [Info @07:21:43.363] 完成 AddAccountToSystemDBs：错误
> 
> [信息@07:21:43.363] ----------------------------------------- ------------
> 
> [信息@07:21:43.363] 执行结果：
> 
> [Info @07:21:43.363] 总体结果：失败
> 
> [信息@07:21:43.363] 节点完成：2
> 
> [信息@07:21:43.363] 节点成功：1
> 
> [信息@07:21:43.363] 跳过的节点：0
> 
> [Info @07:21:43.363] 有错误的节点：1
> 
> [Info @07:21:43.363] 有警告的节点：0
> 
> [Info @07:21:43.363] 错误消息数：2
> 
> [Info @07:21:43.363] 警告消息数：0
> 
> [信息@07：21：43.363]信息消息数量：0
> 
> [错误@07:21:43.363] 活动失败。
> 
> [Info @07:21:43.363] Activity 失败并且没有处理失败，例如回滚

我在这台服务器上使用具有管理员权限的用户，所以我认为这是一个权限问题。

**编辑：** TFS 安装在不属于域（DEV）的机器（DEV-LOCAL）上。该机器现在是域的一部分。IE 在查看计算机属性时将计算机名称显示为“DEV-LOCAL”，将完整的计算机名称显示为“DEV-LOCAL.DEV.local”。域名：“DEV.local”

任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T12:27:20.537

要更改 SQL Server 中的角色，您需要具有 sysadmin 角色。

# c# - 用于 C# 的机器学习分类器 AdaBoost

> ID：15542313
> 
> 赞同：3
> 
> 时间：2013-03-21T08:10:30.320
> 
> 标签：c#, machine-learning, classification, adaboost

C# 中是否有用于 AdaBoost 算法的流行且稳定的库？除了经典的 AdaBoost（如 GentleBoost、LogitBoost 等）之外，这样的库是否包含不同风格的 boosting？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T17:42:48.667

[OpenCV](http://opencv.willowgarage.com/documentation/cpp/boosting.html)支持 AdaBoost 的基本风格（Discrete、Real、Logit 和 Gentle）。这个库在 C/C++ 中，但您可以使用名为[Emgu CV](http://www.emgu.com/)的 C# 包装器，尽管 API 比 C/C++ 更受限制（主要是 Train() 和 Predict() 方法）。

您也可以使用[Accord.Net](http://accord-framework.net/docs/html/N_Accord_MachineLearning_Boosting.htm)，但我还没有尝试过。

# c# - 如何调用这个 C# 类（PropertyRepository 类）方法

> ID：15542317
> 
> 赞同：1
> 
> 时间：2013-03-21T08:10:54.737
> 
> 标签：c#, interface, repository

我正在研究这种模式，我想执行一个方法，但我不知道如何调用它，因为这些参数化构造函数对我来说似乎很复杂。我遵循的代码由两个接口和两个类组成。下面是示例代码。请帮助我如何调用“TestMethod()”。如果可能的话，有人可以帮助我实现以下目标。

1.  调用“TestMethod()”。
2.  解释这种模式及其重要性。（如果简单更好，请帮助如何简化它们）。
3.  解释为什么构造函数是参数化的。（如果简单更好，请帮助如何简化它们）。

**控制台应用程序**

```
 class Program
    {
        private static IPropertyService _property;
        public Program(IPropertyService property)
        {
            _property = property;
        }
        static void Main(string[] args)
        {
            Console.WriteLine("Enter something...");
            _property.TestMethod(Console.ReadLine());
            Console.ReadLine();
        }
        public interface IPropertyService
        {
            string TestMethod(string strParam);
        }

        private class PropertyService : IPropertyService
        {
            private readonly IPropertyRepository _propertyRepository;

            public PropertyService(IPropertyRepository propertyRepository)
            {
                _propertyRepository = propertyRepository;
            }
            public string TestMethod(string strParam)
            {
                return _propertyRepository.TestMethod(strParam);
            }
        }
    }

    public interface IPropertyRepository
    {
        string TestMethod(string strParam);
    }
    public class PropertyRepository : IPropertyRepository
    {
        public string TestMethod(string strParam)
        {
            return string.Format("You have entered: {0}", strParam);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:58:35.353

程序是你的入口点类。不要使其参数化构造函数。它不会工作。

```
public Program(IPropertyService property) 
```

您不需要定义`IPropertyService`为私有静态方法。在 Main 方法中本地声明它就可以了。

```
static void Main(string[] args)
{
    Console.WriteLine("Enter something...");
    IPropertyService _property = //to be added;
    _property.TestMethod(Console.ReadLine());
    Console.ReadLine();
} 
```

现在让我们谈谈该`//to be added`部分。

在这种情况下，迄今为止最简单的解决方案是使用[Abstract Factory](http://blog.ploeh.dk/2012/03/15/ImplementinganAbstractFactory/)。手动编码示例：

```
public class PropertyServiceFactory{
  public IPropertyService Create(){
    IPropertyRepository repository = new PropertyRepository();
    PropertyService service = new PropertyService(repository);
    return service; 
  }
} 
```

实施：

```
Console.WriteLine("Enter something...");
PropertyServiceFactory factory = new PropertyServiceFactory();
IPropertyService _property = factory.Create();
_property.TestMethod(Console.ReadLine()); 
```

但是，如果您想打破 PropertyServiceFactory 和 PropertyRepository 之间的依赖关系，请将您的工厂修改为：

```
public class PropertyServiceFactory{
  private readonly IPropertyRepository _repository;
  public PropertyServiceFactory(IPropertyRepository repository){
    _repository = repository
  }
  public IPropertyService Create(){
    PropertyService service = new PropertyService(_repository);
    return service; 
  }
} 
```

这样，您就将 PropertyServiceFactory 和 PropertyRepository 解耦了。实施是：

```
Console.WriteLine("Enter something...");
IPropertyRepository repository = new PropertyRepository();
PropertyServiceFactory factory = new PropertyServiceFactory(repository);
IPropertyService _property = factory.Create();
_property.TestMethod(Console.ReadLine()); 
```

归功于马克·西曼

# haskell - 检查列表是否连续排序

> ID：15542328
> 
> 赞同：10
> 
> 时间：2013-03-21T08:11:29.673
> 
> 标签：haskell, functional-programming

Haskell 中是否有任何库函数可以让我检查列表是否连续排序？例如。[1,2,3,4] 有效，[1,2,3,10] 无效。

基本上我可以有一个范围在 3 到 5 个元素之间的列表，我正在尝试检查该列表是否是连续排序的。

我的尝试（我不确定这是否是正确的方法，似乎重复太多了）

```
isSucc:: [Integer] -> Bool
isSucc[]            = True
isSucc(x:y:zs)      = 
    if (x+1) == y
    then True && isSucc(y:zs)
    else isSucc(y:zs) 
```

在我使用此功能后，我打算使用它来过滤列表列表（仅将列表保留在列表中并且仅当它连续排序时）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-21T08:22:40.507

您可以使用该技巧`zipWith f xs (drop 1 xs)`应用于`f`连续的列表元素对。（注意`drop 1`而不是`tail`，因为如果列表为空，后者会失败！）

如果您替换`f`为，`<=`您将获得一个`Bool`值列表。现在看看它们是否都是`True`.

```
isSucc xs = and $ zipWith (<=) xs (drop 1 xs) 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-21T08:25:42.467

没有标准功能。

这是您的函数的固定版本，使其通用，删除冗余条件并添加缺少的条件：

```
isSucc :: (Enum a, Eq a) => [a] -> Bool
isSucc [] = True
isSucc (x:[]) = True
isSucc (x:y:zs) | y == succ x = isSucc $ y:zs
isSucc _ = False 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T12:18:56.827

我更喜欢使用比[MathematicalOrchid](https://stackoverflow.com/users/1006010/mathematicalorchid)提供的更易读的解决方案。

首先，我们将成对定义在许多不同情况下可能有用的*功利函数：*

```
pairwise xs = zip xs $ tail xs 
```

或更现代的方式：

```
import Control.Applicative ((<*>))

pairwise = zip <*> tail 
```

然后将它与其他组合器一起使用：

```
isSucc xs = all (\(x,y) -> succ x == y) $ pairwise xs 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T17:28:13.640

如果要检查所有连续差异是否等于一，可以使用

isIncreasingByOne :: (Eq a, Num a) => [a] -> Bool isIncreasingByOne = all (==1) (zipWith (-) (tail xs) xs)

这适用于数字类型（因此有`Num a`约束），包括`Float`and `Double`。例如，如果您想检查一个序列是否一次增加超过 5 个，也很容易适应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T13:24:53.347

还有一种方法，

```
isOrdered :: (Enum a, Eq a) => (a -> a -> Bool) -> [a] -> Bool
isOrdered op (a:b:ls) = op a b && isOrdered op (b:ls)
isOrdered op _ = True 
```

因此，

```
isSucc = isOrdered ((==) . succ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-07T18:42:30.410

-- 这会检查是否已订购

```
isordd:: [Int] -> Bool 
isordd [] = True
isordd (x:y:xs) 
 | x > y = False
 | lengh xs == 0 = True
 | otherwise = isordd (y:xs) 
```

-- 这会计算列表的长度

```
lengh::[Int]->Int
lengh [] = 0
lengh (x:xs) = 1+lengh xs 
```

# python - 如何使用函数的返回值作为在python中返回元组的while条件

> ID：15542329
> 
> 赞同：13
> 
> 时间：2013-03-21T08:11:39.023
> 
> 标签：python, python-2.7, opencv, while-loop, conditional

我一直在寻找这样的东西，但我找不到所以就这样了。

**一些背景**

我使用 opencv 从视频文件中检索帧。通常人们会在一个无限循环中这样做，例如：

```
while (True):
    s, img = cv.read() 
```

或者

```
for i in xrange(10000): #just a big number
    s, img = cv.read() 
```

现在我想检索所有帧并在没有更多帧时退出循环。但是，我在 python 方面的技能还不够强大，无法做我想做的事情。

**我想知道的**

`read`函数（或方法，我不知道它们在python中是如何调用的）返回一个元组：第一个代表操作成功，第二个代表返回的帧。当元组的第一个元素为假时，我想打破 while 循环。有 C 背景，我想也许这会起作用：

```
while ((success, img = capture.read())[0]):
    #do sth with img 
```

我认为当成功为假时这会打破循环。但它没有。然后我想也许这会起作用：

```
while ((success, img = capture.read()).success):
    #do sth with img 
```

它也没有工作。我不想做类似的事情

```
while(True):
    s, i = capture.read()
    if (s == False):
        break 
```

如果成功，如何测试条件而`while`不是`if`哪个中断？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-21T08:25:08.883

你可以写一个生成器函数。

```
def readframes(cv):
    while True:
        success, frame = cv.read()
        if success:
            yield frame
        else:
            return 
```

这样，您可以使用 for 循环遍历帧。

```
for frame in readframes(cv):
    do_something_with_frame(frame) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-21T08:16:23.037

思考 pythonic 的最好方法是忘记其他语言

```
s = True
while s:
    s, i = capture.read()
    if s:
        do_some_stuff(i) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-21T08:24:55.130

Python 有一个[替代`iter`签名](http://docs.python.org/2/library/functions.html#iter)，它将函数作为第一个参数，将确定停止条件的哨兵作为第二个参数。

使用它，你可以想出这样的东西：

```
for s,img in iter(cv.read, (False, None)):
    print img 
```

不过，我怀疑它是否比单纯`break`的`if`街区更好。

此外，它只接受哨兵作为整体返回值，并且不能将停止条件基于它的某些部分（例如元组的第一个值）。这可能是一种解决方法，但会使代码更加模糊：

```
>>> for s,img in itertools.takewhile(lambda x: x[0], iter(cv.read, None)):
    print img 
```

它用于[`itertools.takewhile`](http://docs.python.org/2/library/itertools.html#itertools.takewhile)确定返回元组的第一个值何时等于`False`。

* * *

完整版测试：

```
>>> class Capture(object):
    def __init__(self):
        self.L = iter([1,2,3,4,5])
    def read(self):
        try:
            img = self.L.next()
        except StopIteration:
            return (False,None)
        return True, img

>>> cv = Capture()
>>> for s,img in iter(cv.read, (False, None)):
    print img

1
2
3
4
5

>>> cv = Capture()
>>> for s,img in itertools.takewhile(lambda x: x[0], iter(cv.read, None)):
    print img

1
2
3
4
5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T08:17:13.410

这应该工作

```
while capture.read()[0]: 
    #do something 
```

当然，您将无法以这种方式访问​​框架！

还有另一种方式

```
s,v = capture.read()
while s:
    #Do sth
    s,v = capture.read() 
```

这当然是一种冗长的说法

```
while True: 
    s,v = capture.read()
    if not s: 
        break 
```

你不想做什么（出于某种原因）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T08:21:09.963

你不能做你在 python 中要求的事情（除非有我不知道的黑客）。

什么线：

```
s, i = capture.read() 
```

正在做的是通过解包一个元组来分配2个单独的变量，没有办法告诉python你想要第一个分配的变量。在 python 中，在或条件语句
中赋值也是非法的。`if``for``while`

你唯一能做的就是：

```
if(capture.read()[0]): 
```

这意味着您会丢失图像数据。
简而言之，解包元组实际上非常性感，没有理由不利用它提供的功能！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T08:23:29.660

这是关于使用返回元组的函数来打破循环的解决方案。

```
>>> def read(a):
...     if a == 0:
...         return (False, a+1)
...     return (True, a-1)
... 
>>> read(5)
(True, 4)
>>> read(0)
(False, 1)
>>> a = True
>>> i = 5
>>> while(a):
...     a, i = read(i)
...     if a:
...         print 'working'
...         
...     
... 
working
working
working
working
working
>>> 
```

现在您的代码将如下所示：

```
s = True
while(s):
    s, i = capture.read() 
```

# java - 是否可以在摇摆中将隐藏的 jpanel 转换为图像？

> ID：15542330
> 
> 赞同：0
> 
> 时间：2013-03-21T08:11:40.253
> 
> 标签：java, swing, jpanel

我想将 jpanel 转换为当前未激活的图像文件（即，该 jpanel 是隐藏的）。

请指导我如何做到这一点？有没有可能？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:22:07.337

*   您可以`BufferedImage`从任何`JComponents`返回创建`Dimension`

.

```
BufferedImage bufferedImage = new BufferedImage ((int)panel.getSize().getWidth(),
             (int)panel.getSize().getHeight(), BufferedImage.TYPE_INT_RGB); 
```

*   然后也可以更改其属性，更多的是[2D 图形跟踪打印](http://docs.oracle.com/javase/tutorial/2d/printing/index.html)

# android - 仅在配置配置更改期间隐藏 ScrollView 的 ScrollBar

> ID：15542332
> 
> 赞同：0
> 
> 时间：2013-03-21T08:11:53.830
> 
> 标签：android, android-scrollview

当`ScrollView`第一次出现，或者有配置改变时，滚动条会出现，然后逐渐消失。

如果我根本不想显示 ScrollView 的滚动条，我知道我可以

```
scrollView.setVerticalScrollBarEnabled(false); 
```

在 Activity 的 onCreate 期间。

但是，与此同时，我希望**仅在用户滚动时才**显示（然后淡出）滚动条，以便他知道滚动条的位置。

有什么办法让我两者兼得

1.  `ScrollView`首次出现时隐藏滚动条，或有配置更改。
2.  当用户滚动时显示滚动条。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T10:08:08.727

> ScrollView 第一次出现时隐藏滚动条，或者有配置变化。

采用：

```
scrollView.setVerticalScrollBarEnabled(false); 
```

在`onCreate`方法中。

> 当用户滚动时显示滚动条。

采用：

```
@Override
protected void onResume() { 
    super.onResume();
    scrollView.post(new Runnable() {

        @Override
        public void run() {              
           scrollView.setVerticalScrollBarEnabled(true);                
        }
    });
} 
```

为`onResume()`方法。

> 当 ScrollView 第一次出现，或者配置发生变化时，滚动条会出现，然后逐渐消失。

我会保留它，它是这样设计的，所以用户总是有一个清晰的视觉指示器，内容可以滚动（以及可以滚动的方向）。

# android - 创建自定义视图和 XML 命名空间

> ID：15542336
> 
> 赞同：0
> 
> 时间：2013-03-21T08:12:13.423
> 
> 标签：android

我正在尝试在 android 中创建自定义视图我在 MainActivity 和 XML 文件中提到了我的所有 arrtrs 列表，但我有一个错误`main.xml`：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:custom="http://schemas.android.com/apk/res/com.example.customviews.piechart"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <com.example.customviews.charting.piechart.MainActivity
        android:layout_width="match_parent"
        android:layout_height="?android:attr/listPreferredItemHeight"
        custom:titleText="Background color"
        custom:valueColor="@android:color/holo_green_light"
        />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:01:14.990

你有没有参数的构造函数吗？

您应该添加一个构造函数，例如：

```
public MainActivity(Context context, AttributeSet attrs) {
    super(context, attrs);
} 
```

或者

```
public MainActivity(Context context) {
    super(context);
} 
```

您要求提供一个自定义视图的简单示例：

```
public class BirdView extends ImageView {

private float direction = 0;
Paint paint = new Paint();

public BirdView(Context context) {
    super(context);
}

public BirdView(Context context, AttributeSet attrs) {
    super(context, attrs);
    paint.setColor(Color.WHITE);
    paint.setStrokeWidth(6);
}

public BirdView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    setMeasuredDimension(MeasureSpec.getSize(widthMeasureSpec),
            MeasureSpec.getSize(heightMeasureSpec));
}

@Override
public void draw(Canvas canvas) {
    canvas.save();
    int stratX = getWidth() / 2;
    int startY = getHeight() / 2;
    canvas.rotate(direction, stratX, startY);
    super.draw(canvas);
    canvas.restore();
    canvas.drawLine(stratX, startY, stratX, startY + 80, paint);
}

public void update(float dir) {
    direction = dir;
    invalidate();
} 
```

}

# jasper-reports - Japer Reports - 如何在该报告查询的 WHERE 子句中使用报告参数的值？

> ID：15542340
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:12:55.003
> 
> 标签：jasper-reports

比如说，我有一个带有数据源设置的简单报告。我将把报告嵌入到 Java 应用程序中。在该应用程序中，用户给出了特定的输入。该输入将作为参数传递到报告中。基于该参数，报告的查询应生成结果。如何做到这一点？

例如..

1.  要求用户输入 SCHOOL_ID，

2.  SCHOOL_ID 作为参数传递给报告，

3.  REPORT 将 SCHOOL_ID 的值放入 SQL 查询中，

    (SELECT * FROM Students WHERE SchoolID=$R{SCHOOL_ID};) <---

    （ $R{SCHOOL_ID} 是这里的报告参数）

4.  生成动态结果。

这可以做到吗？有教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:27:11.480

查询将是这样的

```
 SELECT * 
  FROM Students 
  WHERE SchoolID=$P{SCHOOL_ID} 
```

我们 $R{} 用于文本字段表达式，$P{} 用于参数。如果您在 iReport 中开发此查询，则只需将参数从要添加到查询中的参数列表中拖动。

要创建输入控件：-

1:- 在 iReport 中打开查询执行器。

2：-添加新参数-

```
Parameter Name:- SCHOOL_ID
Value expression:- Text(if it is string)
Default value expression :- "ID01" (if its a ftring use "") 
```

# c# - EF linq 查询子句的顺序会影响性能吗？

> ID：15542342
> 
> 赞同：5
> 
> 时间：2013-03-21T08:13:02.027
> 
> 标签：c#, performance, linq, entity-framework, linq-to-entities

我应该担心实体框架 linq 查询子句在性能方面的顺序吗？

在下面的示例中，更改两个 where 子句的顺序是否会对数据库查找产生性能影响？

```
 using (var context = new ModelContext())
        {
            var fetchedImages = (from images in context.Images.Include("ImageSource")
                                 where images.Type.Equals("jpg")
                                 where images.ImageSource.Id == 5
                                 select images).ToArray();
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:18:45.997

不，更改这两个`where`子句不会影响性能。无论如何，生成的 SQL 将如下所示：

```
WHERE [condition1] AND [condition2] 
```

此外，您可以编写条件，结合逻辑运算符：

```
where images.Type.Equals("jpg") && images.ImageSource.Id == 5 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T09:08:47.573

一般情况是`where`操作者会“短路”，所以如果第一个是假的，第二个甚至都不会被检查，所以如果一个失败的频率更高，一般你要先检查它。

但是，如果更频繁的故障处理速度较慢，则这种情况会发生故障。

**唯一确定的方法是使用适当的工具分析您的代码。**

# spring - 使用 spring 数据和休眠保证唯一的数字生成

> ID：15542358
> 
> 赞同：1
> 
> 时间：2013-03-21T08:14:21.740
> 
> 标签：spring, hibernate, jpa, spring-mvc, spring-data

我正在开发一个带有spring数据和hibernate的spring mvc webapp。

我有一个由布尔字段和整数字段组成的实体。

一开始，布尔字段为假，整数字段为空。

当布尔字段变为真时，我需要为整数字段分配一个等于 MAX(seq) +1 的唯一值

为此，我以这种方式编写我的服务方法：

```
@Override
public synchronized Obj save(Obj entry) {
    if (entry.getBool() && entry.getSeq() == null){
        Integer seq = objRepository.getLastSeq();
        if (seq == null){
            seq = 1;
        }
        entry.setSeq(seq);
    }
    return entry.save(entry);
} 
```

在我的存储库中：

```
@Query("select MAX(seq)+1 FROM Obj")
Integer getLastSeq(); 
```

我将同步关键字放在服务方法中，以确保一次只有一个线程可以获得唯一的 MAX+1 数字。但我不确定它是否适用于所有情况以及它是否是正确的方法。

我可以确定它保证 seq 的唯一性吗？

谢谢马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:30:11.480

看起来您的 Integer 是条目 id 还是不是？那么为什么不使用数据库序列，例如带有@id 注释：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "id")
private Long id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:40:08.827

Example how to use initializing bean for that purpose.

```
@Service
public class SequenceInitializer implements InitializingBean{

    @Autowired
    private ObjRepository objRepository;

    @Autowired
    private Service service;

    @Override
    public void afterPropertiesSet() throws Exception {

        try {
           Integer max = objRepository.getLastSeq();
           service.setLastSeq(max);
        } catch(Exception e){...}

 } 
```

In your service setLastSeq will set AtomicInteger field.

# pointers - 在汇编中通过引用传递

> ID：15542360
> 
> 赞同：4
> 
> 时间：2013-03-21T08:14:26.243
> 
> 标签：pointers, assembly, stack, pass-by-reference, lpc

我正在尝试编写一个程序来使用 ARM-C 互通计算数字的指数。我正在使用 LPC1769(cortex m3) 进行调试。以下是代码：

```
/*here is the main.c file*/

#include<stdio.h>
#include<stdlib.h>
extern int Start (void);
extern int Exponentiatecore(int *m,int *n);
void print(int i);
int Exponentiate(int *m,int *n);
int main()
{
Start();
return 0;
}

int Exponentiate(int *m,int *n)
{
    if (*n==0)
        return 1;
    else
    {
        int result;
        result=Exponentiatecore(m,n);
        return (result);
    }

}

void print(int i)
{
printf("value=%d\n",i);
} 
```

这是补充上述 C 代码的汇编代码

```
.syntax unified
        .cpu cortex-m3
        .thumb
        .align
        .global Start
        .global Exponentiatecore
        .thumb
        .thumb_func

Start:
    mov r10,lr
    ldr r0,=label1
    ldr r1,=label2
    bl Exponentiate
    bl print
    mov lr,r10
    mov pc,lr

Exponentiatecore:    // r0-&m, r1-&n

mov r9,lr
ldr r4,[r0]
ldr r2,[r1]
loop:
mul r4,r4
sub r2,#1
bne loop
mov r0,r4
mov lr,r9
mov pc,lr

label1:
.word 0x02

label2:
.word 0x03 
```

但是在调试会话期间，我遇到了执行“Exponentiatecore(m,n)”的 Hardfault 错误。

如调试窗口所示。

```
Name : HardFault_Handler
Details:{void (void)} 0x21c <HardFault_Handler>
Default:{void (void)} 0x21c <HardFault_Handler>
Decimal:<error reading variable>
Hex:<error reading variable>
Binary:<error reading variable>
Octal:<error reading variable> 
```

我是在对齐过程中造成了一些堆栈损坏，还是我的解释有误？请帮忙。先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T16:25:28.330

您的代码有几个问题。首先是你有一个无限循环，因为你的 SUB 指令没有设置标志。将其更改为 SUBS。下一个问题是您不必要地操作 LR 寄存器。你不会从 Exponentiatecore 调用其他函数，所以不要碰 LR。函数的最后一条指令应该是“BX LR”返回给调用者。问题 #3 是您的乘法指令是错误的。除了取 3 个参数外，如果将数字乘以自身，它会增长得太快。例如：

指数核心（10, 4）；
通过每个循环的值：
R4 = 10，n = 4
R4 = 100，n = 3
R4 = 10000，n = 2
R4 = 100,000,000 n = 1

问题 #4 是您正在更改非易失性寄存器 (R4)。除非您保存/恢复它们，否则您只能丢弃 R0-R3。试试这个：

```
Start:
    stmfd sp!,{lr}
    ldr r0,=label1
    ldr r1,=label2
    bl Exponentiatecore // no need to call C again
    bl print
    ldmfd sp!,{pc}

        Exponentiatecore:    // r0-&m, r1-&n

        ldr r0,[r0]
        mov r2,r0
        ldr r1,[r1]
        cmp r1,#0      // special case for exponent value of 0
        moveq r0,#1
        moveq pc,lr    // early exit
    loop:
        mul r0,r0,r2      // multiply the original value by itself n times
        subs r1,r1,#1
        bne loop
        bx lr 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T14:21:32.753

我只是添加 Start: push {r4-r11,lr} ... pop {r4-r11,pc}

指数核：@ r0-&m, r1-&n push {r4-r11,lr} ... pop {r4-r11,pc}

并在开始中清理 bl 打印，一切正常

# digital-signature - 空间受限的非对称签名

> ID：15542361
> 
> 赞同：1
> 
> 时间：2013-03-21T08:14:39.947
> 
> 标签：digital-signature, public-key-encryption

我需要使用非对称密钥加密方案签署一个小字符串。签名将与签名字符串一起存储在一个小芯片上。我几乎没有多余的空间（签名 + 字符串大约 60 字节），所以生成的签名应该尽可能小。我四处寻找如何去做，我发现我可以使用 RSA-SHA1，但生成的 512 位密钥签名是 64 字节。这有点多。我可以使用什么安全算法来生成小的非对称签名？如果我存储 RSA-SHA1 签名的 SHA1 总和，然后再验证它，它仍然安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T13:47:31.767

您在这里遇到的是[良好哈希函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function#Cryptographic_hash_algorithms)的属性之一- 返回值应该很长以防止[生日攻击](http://mathworld.wolfram.com/BirthdayAttack.html)（其中两个不同的输入导致相同的输出哈希）。通常首选 128-512 位，因此 SHA-1 签名为您提供 512 位。

与密码学中的所有事物一样，安全性是一种权衡。当您使用非对称签名时，您是否考虑过使用[RSA-MD5](http://www.w3.org/TR/1998/REC-DSig-label/RSA-MD5-1_0)作为您的签名选项？这将为您提供更短的 128 位返回，但这伴随着 MD5 被认为已损坏并且通常被移走的警告。

# android - TextView 中文本的自动大写

> ID：15542366
> 
> 赞同：0
> 
> 时间：2013-03-21T08:14:59.027
> 
> 标签：android, xml, textview

如何将 in中的所有文本**大写**？`TextView``android`

> 安卓：textAllCaps="真"

适用于`ICS`及以上版本，但不适用于较低版本。我希望`capitalisation`在 xml 中而不是通过`toUpper()`编程方式使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:24:02.773

利用`android:inputType="textCapCharacters"`

# android - 如何获取直接连接到默认 GW 的本地接口的 IP

> ID：15542371
> 
> 赞同：3
> 
> 时间：2013-03-21T08:15:30.227
> 
> 标签：android, vpn, tun

-环境-

1.  VPN连接(OpenVPN)
    -默认网关改为VPN服务器IP
    -VPN连接的虚拟接口(tunXX)直接连接到默认网关

2.  接口和默认网关

    > ```
    > interfaces :
    >   lo        inet addr:127.0.0.1
    >   wlan0     inet addr:150.149.131.5
    >   tun0      inet addr:10.8.0.14
    > 
    > default gateway : 10.8.0.2 
    > ```

在这种环境下，无论使用 Android API 的接口名称如何，**我都想知道“10.8.0.14” 。**

我发现只有一种方法可以在下面获取默认路由 IP 地址

```
mSocket = new Socket(dstAddress, peerPortNum); 
mStrMyIPAddr = mSocket.getLocalAddress().getHostAddress(); 
```

但是，我不想使用 Socket

# javascript - 使 td 的背景图像适合非静态图像的 100%

> ID：15542379
> 
> 赞同：6
> 
> 时间：2013-03-21T08:15:52.740
> 
> 标签：javascript, jquery, css

我有 td 标签：

```
<td class="np-logo" style="width: 228px; height: 50px;">
                                            </td> 
```

和 CSS：

```
.np-logo
{
background-repeat: no-repeat;
background-size: 100%;
} 
```

我正在根据公司徽标更改图像。所有图像都有不同的大小和宽度。

```
.np-logo{background-image:url('" + companylogo + "'); 
```

问题是图像没有正确安装到 td。我希望它们占据整个 td。但是对于每个公司，背景图像的位置是不统一的。我什至尝试在图像加载时使用 java 脚本以适应容器。但是没有用。

任何帮助家伙...？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T09:21:04.017

尝试

```
background-size: 100% 100%; 
```

其中第一个值是宽度，第二个值是高度。

您可以通过以下[链接了解更多信息](https://developer.mozilla.org/en-US/docs/CSS/background-size)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:18:24.257

你试过`cover`吗？

```
.np-logo {
    background-repeat: no-repeat;
    background-size: cover;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:21:30.847

试试这个 ：

```
<td class="np-logo" style="max-height: 100%; max-width: 100%"> 
```

或这个

```
<td class="np-logo" style="max-height: 228px; max-width: 50px"> 
```

# r - 控制堆叠条形图中条形之间的间距

> ID：15542383
> 
> 赞同：1
> 
> 时间：2013-03-21T08:16:14.263
> 
> 标签：r, plot

当我在 R 中绘制堆叠条形图时，条形之间的间距相等，x 轴值仅用作标签。我想根据 x 轴值将条形放置得更近或更远。有人可以帮我用 R 得到这个情节吗？

**编辑：**

```
# data.frame newtest
      A   B   C   D
100  0.2 0.3 0.1 0.4
400  0.3 0.5 0.1 0.1
500  0.1 0.3 0.4 0.2
600  0.4 0.2 0.2 0.2
1000 0.1 0.5 0.1 0.3
1500 0.3 0.2 0.2 0.3
1600 0.4 0.1 0.3 0.2
1700 0.1 0.1 0.7 0.1
2500 0.3 0.2 0.1 0.4

# plot
barplot(t(as.matrix(newtest)), col = c("cyan", "lightblue", "yellow", "green"), 
          legend = colnames(newtest), cex.main = 0.5, cex.axis = 0.5, 
          cex.lab = 0.5, lwd = 0.02) 
```

这是情节： ![条形图](../Images/2e53c6ead50793a75acc57326233ef68.png)

条形图仅根据行名称进行标记。但我希望 400,500,600 的条彼此更接近，*空白表示 700,800,900 没有块*，然后是 1000 的条，*然后是 1500 之前的空白*，1500、1600、1700等的条。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:22:09.947

鉴于 a 中的 x 轴`barplot`代表一个分类变量，我认为除了在您的数据中引入额外的虚拟观察之外没有其他解决方案：

```
extracolnames <- setdiff(seq(100,2500,by=100) ,rownames(newtest))
extracols <- replicate(length(extracolnames), rep(0,4))
colnames(extracols) <- extracolnames
dat <- cbind(t(as.matrix(newtest)), extracols)
dat <- dat[,order(as.numeric(colnames(dat)))]
barplot(dat, col=c("cyan","lightblue","yellow","green"), legend=colnames(newtest), cex.main=0.5, cex.axis=0.5, cex.lab=0.5, lwd=0.02) 
```

# symfony - Symfony2 FOSUserBundle 用户实体字段覆盖

> ID：15542386
> 
> 赞同：14
> 
> 时间：2013-03-21T08:16:20.210
> 
> 标签：symfony, doctrine-orm, fosuserbundle

我在覆盖实体时遇到问题。我需要该字段`emailCanonical`不是唯一的。

这是我所做的：根据 Doctrine2 文档，在我`UserBundle\Resources\config\doctrine\User.orm.xml`添加了以下配置`attribute-overrides`

```
<attribute-overrides>
    <attribute-override name="emailCanonical">
        <field column="email_canonical" unique="false" name="emailCanonical" />
    </attribute-override>
</attribute-overrides> 
```

然后我运行了以下控制台命令

```
$ php app/console doctrine:migrations:diff
$ php app/console doctrine:migrations:migrate 
```

一切正常。`emailCanonical`被制作为非唯一的。但是现在，当我需要在其他项目包中生成实体时，我遇到了一个奇怪的错误：

```
 $ php app/console doctrine:generate:entities SkyModelsBundle:Category
 Generating entity "Sky\Bundle\ModelsBundle\Entity\Category"

 [Doctrine\ORM\Mapping\MappingException]
 Invalid field override named 'emailCanonical' for class 'Sky\Bundle\UserBundle\Entity\User'.

 doctrine:generate:entities [--path="..."] [--no-backup] name 
```

但是，如果我从 xml 映射中删除覆盖设置，一切正常。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-08-30T13:24:48.083

您可以像这样使用 PHP 注释进行覆盖（从 2.3 版及更高版本的教义开始支持，请注意，在文档中它提到您不能覆盖类型，但是我当时能够使用最新版本的教义来做到这一点写它是2.4.4）：

```
<?php 
namespace Namespace\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use FOS\UserBundle\Model\User as BaseUser;

/**
 * User
 * @ORM\Entity
 * @ORM\AttributeOverrides({
 *     @ORM\AttributeOverride(name="id",
 *          column=@ORM\Column(
 *              name     = "guest_id",
 *              type     = "integer",
 *              length   = 140
 *          )
 *      )
 * })
 */
class myUser extends BaseUser
{
    /**
     * @ORM\Id()
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
} 
```

这在文档中指定：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#overrides](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/inheritance-mapping.html#overrides)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-01T15:31:24.647

引用官方[文档](https://github.com/FriendsOfSymfony/FOSUserBundle/blob/master/Resources/doc/doctrine.md#replacing-the-mapping-of-the-bundle)，所以可能是唯一的方法。

> 如果您需要更改映射（例如将字段名称调整为旧数据库），唯一的解决方案是再次编写整个映射，而不从映射的超类继承映射。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-21T11:01:03.293

我相信标签的`name`属性`field`不是必需的，因为它已经为`attribute-override`标签指定了

尝试这个

```
<attribute-overrides>
    <attribute-override name="emailCanonical">
        <field column="email_canonical" unique="false" />
    </attribute-override>
</attribute-overrides> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-19T06:52:19.373

It seems that FOSUserBundle entities aren't imported correctly into your project. Make sure FOSUserBundle is present in "mappings" section ("doctrine" branch) of your config.yml

```
doctrine:
    orm:
        entity_managers:
            default:
                connection:       default
                mappings:
                    AcmeDemoBundle: ~
                    FOSUserBundle: ~ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-29T09:17:26.840

我知道这是一篇旧帖子，但我找到了一个解决方案，至少它对我有用，也许对其他人有帮助。

好吧，我遇到了同样的问题，我正在为 fos_user 使用自定义管理器，在声明文件 config.yml 中的学说 entity_manager 自定义管理器下我声明了到 FOS_userBundle 的映射，但是缺少的是告诉 FOS_user 我们使用不同的经理，这是通过添加：

fos_user:
---- db_driver: orm
---- **model_manager_name: MyCustom_Manager**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-04T09:15:38.970

刚才遇到了同样的错误，我解决了。当 Doctrine 在其映射中找不到相关属性（属性或关系）时，会在 ClassMetadataInfo 中抛出此 Mappingexception。

因此，为了覆盖“emailCanonical”属性，您需要使用“attribute-overrides”和“attribute-override”（就像您所做的那样），并在您的实体中重新定义 php 类属性：

```
<?php
...
class YourUser extends BaseUser
{
    ...
    /**
     * Email canonical
     *
     * @var string
     *
     * @ORM\Column(name="email_canonical", type="string", length=255, unique=false)
     */
    protected $emailCanonical; 
```

@EDIT：使用这个解决方案会给我带来另一个错误。

`php app/console doctrine:schema:validate`它解决了关于“无效的字段覆盖命名...”的问题，但是当我尝试使用命令验证架构时，我得到了另一个“列的重复定义...” 。

任何想法 ？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-05T00:31:56.500

您扩展 BaseUser 的类应该是这样的：

```
<?php 
namespace Namespace\UserBundle\Entity;

use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use FOS\UserBundle\Model\User as BaseUser;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;
/**
 * User
 * @ORM\Entity
 * @ORM\Table(name="user")
 * @UniqueEntity(fields="email", message="your costum error message")
 *
 */
class myUser extends BaseUser
{
    /**
     * @ORM\Id()
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;
}

?> 
```

# ios - 我需要做 registerDefaults: 每次应用程序启动吗？

> ID：15542388
> 
> 赞同：0
> 
> 时间：2013-03-21T08:16:33.380
> 
> 标签：ios, objective-c

我正在使用最新的 SDK 开发一个 iOS 应用程序。

我这样做：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
    [standardUserDefaults registerDefaults: [PreferenceDefaultValues dictionary]];
    [standardUserDefaults synchronize];

    return YES;
} 
```

**是否需要做 registerDefaults: 每次应用程序启动？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:18:56.727

是的，`registerDefaults:`各州的文档明确：

> 注册域的内容不写入磁盘；您需要在每次应用程序启动时调用此方法。

请注意，出于同样的原因，无需调用`synchronize`after `registerDefaults:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:21:47.383

是的，根据苹果文档，有必要：

> 如果没有注册域，则使用指定的字典创建一个，并将 NSRegistrationDomain 添加到搜索列表的末尾。注册域的内容不写入磁盘；**您需要在每次应用程序启动时调用此方法**。您可以在应用程序的 Resources 目录中放置一个 plist 文件，然后使用从该文件中读取的内容调用 registerDefaults:。

当您注册默认值时，您通常会提供一个自定义 plist 文件。因此，当您更改一个值时，它会写入此 plist 文件，而当您获得一个值时，它会从此 plist 文件中获取。

# ruby-on-rails-3 - 在索引页面内渲染显示页面，如何在每个模式上放置不同的 id

> ID：15542391
> 
> 赞同：1
> 
> 时间：2013-03-21T08:16:38.570
> 
> 标签：ruby-on-rails-3, modal-dialog, partial

我正在使用模态在索引页面内弹出显示页面.....一切正常，直到我点击一个产品。出于某种原因，模态框上的每个产品都会弹出相同的名称

我知道这是一个简单的解决方法，请帮助....rails 新手 这是我的代码：

**意见**

_show.html.erb

```
<div id="myModal" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="content-inner hero-unit">
    <h1 class="pump-up center">
      <br>
      <strong>Coming Soon.</strong></h1>
      <br><br>
      <p>
        <b>Name: </b>
        **<%= @product.name %>**
      </p>
  </div>
</div> 
```

index.html.erb

```
<div class="row">
  <% @products.each do |product| %>
      <div class="span3">

      <%= render :partial => 'products/show', :locals => { :product => product }  %>
        <a href="#myModal" role="button" data-toggle="modal">
        <%=(image_tag product.photo(:medium))%></a>

      </div>
  <% end %>
</div> 
```

**模型**

产品.rb

```
class Product < ActiveRecord::Base
  attr_accessible :name, :photo
end 
```

**控制器**

products_controller.rb

```
class ProductsController < ApplicationController

  def show
    @product = Product.find(params[:id])
  end

  def index
    @products = Product.all
  end

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:27:50.877

好的，问题出在这段代码上。

在 Index.html.erb

它应该是

```
<a href="#myModal<%=product.id %>" role="button" data-toggle="modal"> 
```

并将您的 _show.html.erb 更改为此

```
<div id="myModal<%=product.id%>" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

这应该做的工作。

我还看到您没有使用从索引操作传递的局部变量。您正在使用可能是一个问题的@product，请尝试仅使用从 index.html.erb 传递的“产品”

# android - Logcat 消息在短时间内消失

> ID：15542393
> 
> 赞同：23
> 
> 时间：2013-03-21T08:16:40.453
> 
> 标签：android, eclipse, logcat

有时 eclipse logcat 消息会在关闭应用程序一小段时间后消失。（通常不会那么短。）如何让它永远不会自动消失？

编辑：我的设备仍然连接。以及如何设置它以显示日志，即使在设备分离后并在下次启动前清除？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-09T18:27:08.160

这也发生在我身上。设备已连接。因此，所有内部操作都被记录下来，错误消息很快消失。您应该尝试以下方法（它对我有用）

1.  重新启动 Eclipse（如此处所述，[为什么 logcat 没有显示任何内容？](https://stackoverflow.com/questions/9529628/why-logcat-is-not-showing-anything)）
2.  如果 1 不起作用，您可以尝试增加 logcat 消息大小。从 Window > Preferences > Android > LogCat （将大小增加到 5000 以上）

第一个为我工作。通过这种方式，您也不需要每次从 Eclipse 部署应用程序时分离设备。关于另一个问题 - 您可以随时从 [Clear log] 按钮清除现有日志。

# c# - 从对象拆箱时访问 PropertyInfo 的 ReflectedType

> ID：15542394
> 
> 赞同：1
> 
> 时间：2013-03-21T08:16:47.157
> 
> 标签：c#, reflection

让我们假设我有一些从反射过程创建的 PropertyInfo 对象。

通常我可以通过其 ReflectedType 属性获取内部对象的类型。但如果它被装箱到对象中，我就无法访问它。

```
var x = property.ReflectedType //Works as charm
var y = ((object)property).ReflectedType // Wouldn't work 
```

我应该如何访问被装箱到对象的 PropertyInfo 的 ReflectedType 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:24:08.950

如果您确定您的`object`引用 a `PropertyInfo`，然后转换回`PropertyInfo`并且您可以访问该属性。

```
var z = ((PropertyInfo)y).ReflectedType 
```

编辑关于您对该问题的附加评论：如果您仍然可以访问您想要执行的属性变量，那么只需使用它......我觉得您对这里的某些事情感到困惑，但您应该提供更多信息，因为除非你这样做，否则没有人能帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:54:31.280

在阅读您对@fish 答案的评论时，这可能是您想要做的：

```
private static void SetPropertyValue(object v, XElement item, PropertyInfo property)
{
  property.SetValue(v, Convert.ChangeType(item.Value, property.PropertyType));
} 
```

这有帮助吗？

# phpmailer - 使用 php mailer 时，在“收件人”标题中，相同的地址在邮件中显示两次

> ID：15542399
> 
> 赞同：3
> 
> 时间：2013-03-21T08:17:07.357
> 
> 标签：phpmailer, outlook-2007, php

当我使用 php mailer 向 ok@gmail.com 发送邮件时，然后在“收件人”标题中相同的地址在邮件中显示两次

像这样：致：ok@gmail.com；好的@gmail.com

简单我用这个：

```
$mail->AddAddress("ok@gmail.com");
$mail->Subject = $subject;
$mail->Body = $body;
$mail->IsHTML(true);
$mail->Send();
$mail->ClearAddresses(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:19:22.020

AddAddress 必须包含 2 个值接收者邮件和名称。

```
$mail->AddAddress("ok@gmail.com", "Mr. John Smith"); 
```

当您不设置名称时，邮件将用于邮件和名称。

# java - 在 Android 的 AsynTask 中解析 json 时出错

> ID：15542404
> 
> 赞同：2
> 
> 时间：2013-03-21T08:17:30.693
> 
> 标签：java, android, json, rest-client

我有一个`AsynTask`并试图检索`json`并解析它，但我收到了这个错误：

```
03-21 11:38:07.033: E/AndroidRuntime(8439): FATAL EXCEPTION: main
03-21 11:38:07.033: E/AndroidRuntime(8439): java.lang.NullPointerException
03-21 11:38:07.033: E/AndroidRuntime(8439):     at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at org.json.JSONTokener.nextValue(JSONTokener.java:94)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at org.json.JSONObject.<init>(JSONObject.java:154)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at org.json.JSONObject.<init>(JSONObject.java:171)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at Dic.proj.pkg.notifService.parse_if_update(notifService.java:191)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at Dic.proj.pkg.notifService$1$1$1.onPostExecute(notifService.java:153)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at Dic.proj.pkg.notifService$1$1$1.onPostExecute(notifService.java:1)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at android.os.AsyncTask.finish(AsyncTask.java:631)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at android.os.Looper.loop(Looper.java:137)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at android.app.ActivityThread.main(ActivityThread.java:4921)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at java.lang.reflect.Method.invokeNative(Native Method)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at java.lang.reflect.Method.invoke(Method.java:511)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1027)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:794)
03-21 11:38:07.033: E/AndroidRuntime(8439):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我的`parse_if_update`功能：

```
public static String parse_if_update(String jsonResponse) {
    String update="no";

    try {
        JSONObject json = new JSONObject(jsonResponse);
        update = json.getString("update");
    } catch (JSONException e) {
        e.printStackTrace();
    }

    if(update == null){
        update="no";
    }
    return update;
} 
```

怎么了？我花了两天时间来解决这个问题。有时我遇到空值，但我不知道如何处理它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:21:41.767

添加与空测试不同的简单测试。

```
public static String parse_if_update(String jsonResponse) {
String update="no";

    if (jsonResponse != null) {    
        try {
                JSONObject json = new JSONObject(jsonResponse);
                if (json != null) { 
                    update = json.getString("update");
                }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        if(update == null){
            update="no";
        }
    }
    return update;
} 
```

那你还有问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:22:12.207

下面的代码将起作用：

```
 public static String parse_if_update(String jsonResponse) {
        String update="no";

        try {
                JSONObject json = new JSONObject(jsonResponse);
                if(json!=null)
                   update = json.getString("update");
                else
                   update = "no";
        } catch (JSONException e) {
            e.printStackTrace();
        }

        if(update == null){
            update="no";
        }
        return update;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T08:24:46.680

检查字符串“更新”是否为空：

```
if (!json.isNull("update")) {
    update = json.getString("update");
} 
```

如果你不检查这个，它会引发一个空指针

# c# - 从仓库下载文件

> ID：15542405
> 
> 赞同：1
> 
> 时间：2013-03-21T08:17:35.627
> 
> 标签：c#, perforce

```
P4Command cm = new P4Command(ps, "sync", true, String.Format("{0}/...", deppath));
P4CommandResult results = cm.Run();

if (results != null)
    Console.WriteLine("no problem");

TaggedObjectList listfiledown = new TaggedObjectList();
listfiledown = (results.TaggedOutput);

foreach (TaggedObject obj in listfiledown)
{
    Console.WriteLine("no problem");
} 
```

我必须从仓库下载一个文件到我的工作区，所以如果我运行命令 taggedoutput 为 null ，有什么解决方案吗？

> *'你调用的对象是空的'*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:38:54.743

因此，您的命令返回 null `results.TaggedOutput`。我会在调试器下运行，break after `cm.Run()`，然后查看`results`它是否包含某种错误描述。

如果做不到这一点，请检查您的命令是否正确 - 例如，它`deppath`指向正确的路径。

# java - 可编辑 JCombobox 上的 FocusListener 未触发

> ID：15542410
> 
> 赞同：3
> 
> 时间：2013-03-21T08:18:07.117
> 
> 标签：java, swing, jcombobox, focuslistener

首先：抱歉，我无法提供 SSCCE。我试图在一个小项目上重新创建这个问题，但没有成功，或者我应该说成功，因为它在那里工作！

所以这是我的问题：我有一个可编辑的 JCombobox，它应该通过单击编辑器组件来监听焦点事件。但事实并非如此。

这是我附加侦听器的代码片段：

```
cmbZoom.setToolTipText(locale.getString("GUI_ZoomFactor"));
cmbZoom.setFont(new Font(Font.SANS_SERIF, Font.PLAIN, 16));
cmbZoom.setPreferredSize(new Dimension(88, 29));
cmbZoom.setEditable(true);
((JTextField)cmbZoom.getEditor().getEditorComponent()).setHorizontalAlignment(JTextField.CENTER);
cmbZoom.getEditor().getEditorComponent().addFocusListener(
  new FocusListener(){
    public void focusGained(FocusEvent arg0) {
      System.out.println("GAINED");
    }

    public void focusLost(FocusEvent arg0) {
      System.out.println("LOST");
    }
  }); 
```

我已经尝试删除组合框上的所有其他侦听器，删除观察者模式，使组合框受到保护并将侦听器附加到每个孩子，...

我还尝试重新实现它，就像在这篇文章中所写的那样： [JCombobox focusLost 没有触发 - 为什么会这样？](https://stackoverflow.com/questions/10293135/jcombobox-focuslost-is-not-firing-why-is-that)

有没有调试事件的好方法？

整个项目可以在 Github 上查看： [https ://github.com/nexxx/Database-Analyzer](https://github.com/nexxx/Database-Analyzer)

工具栏类可以在这里找到（代码从第 98 行开始）： [https ://github.com/nexxx/Database-Analyzer/blob/master/src/dba/gui/auxClasses/toolBars/ToolBar.java](https://github.com/nexxx/Database-Analyzer/blob/master/src/dba/gui/auxClasses/toolBars/ToolBar.java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T11:25:49.353

相同的代码在某些情况下会导致问题，但在其他情况下不会导致问题，这一事实使我怀疑您的代码可能没有在[AWT 事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:34:47.137

*   我建议不要混合`FocusListener`添加`Item & DocumentListener`到`JComboBox'es Editor`, 可以创建无限循环

例如，

```
import java.awt.*;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.util.Vector;
import javax.swing.*;
import javax.swing.UIManager;
import javax.swing.plaf.ColorUIResource;
import javax.swing.plaf.metal.MetalComboBoxButton;

public class MyComboBox {

    private Vector<String> listSomeString = new Vector<String>();
    private JComboBox someComboBox = new JComboBox(listSomeString);
    private JComboBox editableComboBox = new JComboBox(listSomeString);
    private JComboBox non_EditableComboBox = new JComboBox(listSomeString);
    private JFrame frame;

    public MyComboBox() {
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
//
        someComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        someComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        someComboBox.setEditable(true);
        someComboBox.getEditor().getEditorComponent().setBackground(Color.YELLOW);
        ((JTextField) someComboBox.getEditor().getEditorComponent()).setBackground(Color.YELLOW);
        someComboBox.getEditor().getEditorComponent().addFocusListener(fcsListener);
//
        editableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        editableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        editableComboBox.setEditable(true);
        JTextField text = ((JTextField) editableComboBox.getEditor().getEditorComponent());
        text.setBackground(Color.YELLOW);
        JComboBox coloredArrowsCombo = editableComboBox;
        Component[] comp = coloredArrowsCombo.getComponents();
        for (int i = 0; i < comp.length; i++) {
            if (comp[i] instanceof MetalComboBoxButton) {
                MetalComboBoxButton coloredArrowsButton = (MetalComboBoxButton) comp[i];
                coloredArrowsButton.setBackground(null);
                break;
            }
        }
        editableComboBox.getEditor().getEditorComponent().addFocusListener(fcsListener);
//
        non_EditableComboBox.setPrototypeDisplayValue("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        non_EditableComboBox.setFont(new Font("Serif", Font.BOLD, 16));
        non_EditableComboBox.addFocusListener(fcsListener);
//
        frame = new JFrame();
        frame.setLayout(new GridLayout(0, 1, 10, 10));
        frame.add(someComboBox);
        frame.add(editableComboBox);
        frame.add(non_EditableComboBox);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setLocation(100, 100);
        frame.pack();
        frame.setVisible(true);
    }

    //
    private FocusListener fcsListener = new FocusListener() {

        @Override
        public void focusGained(FocusEvent e) {
            dumpInfo(e);
        }

        @Override
        public void focusLost(FocusEvent e) {
            dumpInfo(e);
        }

        private void dumpInfo(FocusEvent e) {
            final Component c = e.getComponent();
            System.out.println("Source  : " + name(e.getComponent()));
            System.out.println("Opposite : " + name(e.getOppositeComponent()));
            System.out.println("Temporary: " + e.isTemporary());
            if (c instanceof JFormattedTextField) {//works for editable JComboBox too
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        ((JFormattedTextField) c).selectAll();
                    }
                });
            } else if (c instanceof JTextField) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        ((JTextField) c).selectAll();
                    }
                });
            } else if (c instanceof JTextField) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        ((JComboBox) c).getEditor().selectAll();
                    }
                });
            }
        }

        private String name(Component c) {
            return (c == null) ? null : c.getName();
        }
    };

    public static void main(String[] args) {
        UIManager.put("ComboBox.background", new ColorUIResource(Color.yellow));
        UIManager.put("JTextField.background", new ColorUIResource(Color.yellow));
        UIManager.put("ComboBox.selectionBackground", new ColorUIResource(Color.magenta));
        UIManager.put("ComboBox.selectionForeground", new ColorUIResource(Color.blue));
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                MyComboBox aCTF = new MyComboBox();
            }
        });
    }
} 
```

# box-api - 重定向网址在盒子应用程序中不起作用

> ID：15542420
> 
> 赞同：0
> 
> 时间：2013-03-21T08:18:36.543
> 
> 标签：box-api

为什么当我在盒子应用程序中提到它时我的重定向 url 不起作用？

脚步

```
1.created a new app
2.got the api key, client_id and client_secret 
3.gave my redirect url to be http://localhost:3000
4.click the app and add it to my box account it doesn't redirect to my local account,also
  tried with http://www.somesite.com and https://www.somesite.com 
```

但它不起作用任何人都可以告诉创建应用程序出了什么问题

# visual-studio-2012 - 如何在 web.config 转换过程中添加文件？

> ID：15542421
> 
> 赞同：81
> 
> 时间：2013-03-21T08:18:40.447
> 
> 标签：visual-studio-2012, web-config

我有一个在 Visual Studio 2012 中开发的网站。 web.config 当前在其转换中包含以下文件：- web.Debug.config - web.Release.config

我最近在我的项目中添加了一个新的构建配置（名为“Staging”）。如何创建“web.Staging.config”转换文件？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-05-30T00:32:46.743

在 VS 中生成 web.config 转换文件有两种方式：

1.  如果您有一个 Web 应用程序项目，*请右键单击 web.config 并选择添加配置转换。* 这将根据**构建配置添加项目中缺少的****任何**配置转换（即，如果您有生产和暂存构建配置，两者都将添加一个转换）。 ***   网站项目不支持此方法，因为它们不支持多个构建配置。** 
***   在任一 Web 项目类型中，*右键单击发布配置文件 (.pubxml) 并选择 Add Config Transform*。这将仅为该配置文件添加新的配置转换。
    *   这需要 VS2012 Update 2 或 VS2010 的 Azure SDK 2.0（*我认为*）。
    *   在网站项目中，新的转换文件*不会*嵌套在 web.config 下，因为 VS 不支持这种行为。只需在根文件夹中查找它。**

 *** * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-05-29T22:45:07.530

与 2012 年相比：

1.  转到构建-> 配置管理器
2.  单击活动解决方案配置并选择“新建”。
3.  输入新配置的名称，然后单击保存。
4.  右键单击您的 Web.config 文件并选择添加配置转换。

您的新转换文件将自动创建。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-12-18T10:48:18.033

您需要先安装[配置转换](https://marketplace.visualstudio.com/items?itemName=GolanAvraham.ConfigurationTransform)扩展 [**扩展**->**管理扩展**->**在线**部分] 以在右键单击`web.{environment}.config`文件时看到该选项。**

# model - Zend Framework 2 中的 View Helper 访问模型

> ID：15542429
> 
> 赞同：1
> 
> 时间：2013-03-21T08:19:05.240
> 
> 标签：model, zend-framework2, view-helpers

我正在尝试从自定义视图助手访问我配置的模型，以填写我的应用程序中的一些全局输入字段。

有没有办法从我从全局 layout.phtml 调用的视图助手中从该模型中获取对象

如果这是不可能的，我怎么能传递值来创建元素？

非常感谢您的帮助。乔治

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:13:18.403

有一个模块允许您访问视图中的服务管理器，但这不是从模型数据填写表单输入的好方法

最好的方法是将对象模型绑定到表单

欲了解更多信息： http: [//framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#binding-an-object](http://framework.zend.com/manual/2.0/en/modules/zend.form.quick-start.html#binding-an-object)

# python - 牛顿-拉夫森线性化？二阶非线性 ODE numpy-scipy Python

> ID：15542430
> 
> 赞同：0
> 
> 时间：2013-03-21T08:19:07.870
> 
> 标签：python, numpy, scipy, nonlinear-optimization

我试图解决一个多星期以上的[下一个方程：](http://www.wolframalpha.com/input/?i=d/dx%28du/dx%29%20=%20%28-3/%28k1%29%5Bx%5D%29*%28k4%5Bx%5D-%28k2%5Bx%5D%2bk3%5Bx%5D%29*u%5E%281/3%29%29%20*%28%28du/dx%29%5E%282/3%29%29)

![在此处输入图像描述](../Images/9489c2cdb84e324450d7db2f10d25c8d.png)

我必须使用 Newton-Raphson 方法来获得 u 的近似解。我有脚本可以做到这一点，但我需要“线性化”这个非线性 ODE。k1-k4 不是常数。在每个网格点 (x=1-100) 上，它们得到一个不同的计算值。初始条件是u(0)=0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:08:47.563

这是家庭作业吗？

另外，它是边值问题还是 ODE？从您写的内容来看，这听起来像是 BVP。此外，您的边界条件`u(0)`还不够。

如果是 BVP，您可以只使用[scikits.bvp_solver](http://pythonhosted.org/scikits.bvp_solver/index.html)或[scikits.bvp1lg](https://pypi.python.org/pypi/scikits.bvp1lg)来为您完成困难的部分。

如果是 ODE，将问题写为一阶系统，并使用`scipy.integrate.odeint`or `scipy.integrate.ode`。

关于线性化（假设这是一个 BVP）：实际上，通过数值微分计算牛顿法所需的偏导数通常就足够了。

# mysql - Hive - 成功 Sqoop 导入后没有表列出

> ID：15542435
> 
> 赞同：0
> 
> 时间：2013-03-21T08:19:34.107
> 
> 标签：mysql, apache, hadoop, hive, sqoop

**使用Sqoop**成功导入 Hive后，我在**Hive**中看不到最近导入的表。

`import`命令

```
./sqoop import --connect jdbc:mysql://localhost:3306/extedu --table user --username TALHA -P --warehouse-dir /home/talha/warehouse --direct 
```

**蜂巢表**

```
hive> show tables;
OK
Time taken: 0.038 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T12:21:38.213

这是 Hive 的常见问题，在 hive-site.xml 中设置以下属性

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=metastore_db;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

而不是`metastore-db`，给出一些绝对路径，例如

```
<property>
  <name>javax.jdo.option.ConnectionURL</name>
  <value>jdbc:derby:;databaseName=**/home/user/hive/metastore_db**;create=true</value>
  <description>JDBC connect string for a JDBC metastore</description>
</property> 
```

然后检查。希望它会奏效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T08:32:34.577

您的命令应包含“--hive-import”选项。

更多关于 Hive 导入[的信息](http://sqoop.apache.org/docs/1.4.2/SqoopUserGuide.html#_importing_data_into_hive)。

# oracle - ORACLE 触发器错误

> ID：15542436
> 
> 赞同：1
> 
> 时间：2013-03-21T08:19:43.850
> 
> 标签：oracle, triggers, oracle10g, toad

我有这个性感的触发器，它从字段 REFERENT 中获取一个值，对其进行解析，在某个视图中找到一行并将一些数据填充到需要插入的原始行中。然后我还重写了 REFERENT 字段并消除了额外的数据。

REFERENT 字段如下所示：“-XXX-123”，其中 123 是我在视图中搜索数据的键。希望这是有道理的。

```
CREATE OR REPLACE TRIGGER TRI_UPDATE
BEFORE INSERT
ON TBLASCENTOUTPUT_X
REFERENCING NEW AS NEW OLD AS OLD
FOR EACH ROW
WHEN (
new.STEVILKA_NAROCILA is NULL
      )
DECLARE
    PARSED_STNAROC   VARCHAR(255);
    PARSED_PRIMARY_VALUE VARCHAR(255);
BEGIN

    PARSED_STNAROC := SUBSTR(NEW.REFERENT, INSTR(NEW.REFERENT, '-', -1, 1) + 1);
    PARSED_PRIMARY_VALUE := SUBSTR(NEW.REFERENT, 1, INSTR(NEW.REFERENT, '-', -1, 1) - 1);

    select distinct v.STNAROCILA, v.DATNAROCILA, v.SIFKUPCA, v.STPONUDBE, PARSED_PRIMARY_VALUE 
        into  :NEW.STEVILKA_NAROCILA, :NEW.DATUM_NAROCILA, :NEW.SIFRA_KUPCA, :NEW.STEVILKA_PONUDBE, :NEW.REFERENT
        from ARH_NAROC v
        where v.STNAROCILA = PARSED_STNAROC;

END; 
```

我在编译时收到以下错误：

```
On line:  6
TRIGGER EASY.TRI_UPDATE
PLS-00201: identifier 'NEW.REFERENT' must be declared 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:29:47.940

之前遗漏了一个冒号字符`NEW.REFERENT`

# javascript - crm2011，javascript onchange 事件系统实体

> ID：15542439
> 
> 赞同：1
> 
> 时间：2013-03-21T08:19:54.157
> 
> 标签：javascript, entity, system, dynamics-crm-2011, onchange

我是 CRM2011 的新手并且可以，但是我接到了一个我不知道如何解决的任务，并且在 Google 中没有找到任何答案。

我有 2 个实体。案例和注释（注释 - 系统实体）。备注与案例相关，并由表单上的区域表示，用户可以在其中添加备注。添加新注释后，我需要运行 JS。我该怎么做？我不能分配 onchange 事件，因为它是系统实体，我不能在那里修改任何东西，甚至选择 OnChange 事件。我无法在此注释的案例表单上设置事件处理程序。属性也被阻止。如果我发送事件处理程序 onchange 区域，其中没有嵌入属性。

有谁知道如何在将相关系统属性更改为表单时运行 JS？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T21:48:34.923

I believe that, depending on the exact details of your task at hand, you might want to use a plugin instead. The downside is that you won't be using JavaScript but C# (if you haven't build a plugin before you're in for a treat). The upside is that you won't be using JavaScript but C#.

You might want to intercept the messages of *Create* on the entity *Note* or the message of *Update* on the entity *Case*.

Could you, please, elaborate on what is the goal?

# javascript - 使用 Object.create 时无法通过 setter 设置对象属性

> ID：15542441
> 
> 赞同：0
> 
> 时间：2013-03-21T08:19:55.810
> 
> 标签：javascript, object, setter

在尝试了解有关 Object.create 的更多信息时，我遇到了[Object.create(): the New Way to Create Objects in JavaScript](http://www.htmlgoodies.com/beyond/javascript/object.create-the-new-way-to-create-objects-in-javascript.html)。

上一页的一个例子：

```
var Car2 = Object.create(null); //this is an empty object, like {}
Car2.prototype = {
  getInfo: function() {
    return 'A ' + this.color + ' ' + this.desc + '.';
  }
};

var car2 = Object.create(Car2.prototype, {
  //value properties
  color:   { writable: true,  configurable:true, value: 'red' },
  //concrete desc value
  rawDesc: { writable: false, configurable:true, value: 'Porsche boxter' },
  // data properties (assigned using getters and setters)
  desc: { 
    configurable:true, 
    get: function ()      { return this.rawDesc.toUpperCase();  },
    set: function (value) { this.rawDesc = value.toLowerCase(); }  
  }
}); 
car2.color = 'blue';
alert(car2.getInfo()); //displays 'A blue PORSCHE BOXTER.' 
```

问题：

1.  上面的例子有多正确？~~[这个答案](https://stackoverflow.com/a/11682074/1640617)似乎与上面的例子相矛盾。~~它似乎给出了一个概念，即`rawDesc`可能是一个只能通过 getter/setter of 修改的私有成员`desc`。这有什么用吗？

2.  此外，尝试设置`desc`使用值`car2.desc = 'Merc'`似乎不起作用。为什么呢？

3.  Object.defineProperty 和 Object.create 的哪些部分相似？

研究：

有点相关的问题：[为什么我可以设置不可配置属性描述符的[可枚举性和]可写性？](https://stackoverflow.com/q/9829817/1640617) 我尝试删除`writable: false`并`value: 'Porsche boxter'`尝试设置该值，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:10:46.353

一些评论：

```
var Car2 = Object.create(null); //this is an empty object, like {} 
```

评论不太正确。`Car2`（即它的）的内部原型`[[Prototype]]`将是`null`，因此它不会继承 的任何属性`Object.prototype`，而使用创建的对象`{}`会。

```
Car2.prototype = {
  ...
};

var car2 = Object.create(Car2.prototype, { 
```

创建似乎毫无意义，`Car2`因为它不是函数，不能用作构造函数，也不能继承任何标准 Object 方法。它只是分配给的对象的占位符`Car2.prototype`。但我想这只是一个例子。

对于问题......</p>

> 上面的例子有多正确？这个答案似乎与上面的例子相矛盾。

它如何与示例相矛盾？

> 此外，尝试使用 car2.desc = 'Merc' 为 desc 设置值似乎不起作用。为什么呢？

因为 setter for`desc`实际上发生了变化`rawDesc`，但`rawDesc`被设置为`writeable: false`. 将其更改为`writeable: true`并更改值。但无论如何它是一个公共属性，所以通过设置其他属性来设置它的值有点毫无意义。

> Object.defineProperty 和 Object.create 的哪些部分相似？

[Object.create](http://ecma-international.org/ecma-262/5.1/#sec-15.2.3.5)和[Object.defineProperty](http://ecma-international.org/ecma-262/5.1/#sec-15.2.3.6)在 ECMA–262 中是相邻的，不难解决。基本上，第一个只是向现有对象添加一个属性，第二个创建一个新对象并设置它`[[Prototype]]`（即它相当于一个构造函数）。

# sql - SQL SERVER：数据插入

> ID：15542442
> 
> 赞同：0
> 
> 时间：2013-03-21T08:19:57.740
> 
> 标签：sql, sql-server

对不起大家！我只是不知道如何处理这个任务。[数据与此](https://stackoverflow.com/questions/15538639/number-of-similar-columns-occurences)问题中的数据相同，但是当我在 big_table.bench_id 中插入新数据并且我希望此数据在 BATCH_ID 表中也可见时该怎么办？我试图用键绑定它们，但是 big_table 已经有主键所以不知道该怎么做。请任何建议将不胜感激。

Big_table.bench_id：

```
**bench_id**
31
51
51
61
61
61
71
71 
```

我创建了另一个包含两列的 BATCH_ID 表：

```
**distinct_bench**           **number**
-----------------------------

31                               1
51                               2
61                               3
71                               2 
```

例如，如果我将新代码添加到 big_table.bench_id 中，例如“111”：

```
**bench_id**
    31
    51
    51
    61
    61
    61
    71
    71
    111 
```

所以它也会出现在另一个表中：

```
**distinct_bench**           **number**
    -----------------------------

    31                               1
    51                               2
    61                               3
    71                               2
    111                              1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:50:28.977

你真的需要另一张桌子吗？您可以创建一个视图来实现这一点。

```
create table xxTemp (bench_id int) ;

insert into xxTemp (bench_id) 
values (31)
    ,(51)
    ,(51)
    ,(61)
    ,(61)
    ,(61)
    ,(71)
    ,(71) ;

create view xxTempCount as 
Select  bench_id
    , COUNT(1) number 
From    xxTemp
Group By bench_id ;

select *
from xxTempCount ;

insert into xxTemp (bench_id) 
values (111) ;

select *
from xxTempCount ; 
```

埃尔默

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:56:13.970

您可以创建一个返回所需信息的视图，而不是为此创建一个表。例如，尝试以下操作：

```
CREATE VIEW vwBigTable
AS
    SELECT bench_id AS [**distinct_bench**], COUNT(*) AS [**number**]
    FROM big_table
    GROUP BY bench_id 
```

接着：

```
SELECT * FROM vwBigTable 
```

# facebook - 如何在开发过程中暂时从粉丝页面隐藏预构建的应用程序选项卡

> ID：15542449
> 
> 赞同：1
> 
> 时间：2013-03-21T08:20:30.050
> 
> 标签：facebook, tabs, fan-page

我想知道如何在标签正在开发时从已发布的粉丝页面中隐藏 Facebook 标签，以便它只显示给页面管理员？

我知道您可以为自定义构建的应用程序（沙盒设置）执行此操作，但这里我指的不是自定义构建的应用程序，而是预构建的应用程序，例如静态 HTML。

为了编辑选项卡，似乎必须将它们添加到页面中，以便能够编辑它们。这是自定义 Facebook 标签时的问题，因为您不希望您的粉丝在准备好发布之前看到您正在进行的内容。

有谁有这方面的经验吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:25:29.667

只有当管理员通过检查会话登录时才能显示它。

我无法为您提供更多帮助，因为您使用的信息太少了..

# syntax-error - MODx。空分区/管理器

> ID：15542450
> 
> 赞同：0
> 
> 时间：2013-03-21T08:20:34.593
> 
> 标签：syntax-error, modx

/manager 下的资源树丢失。**MODX 革命 2.2.5-pl（高级）**。登录到了admin面板，但是admin只是最上面的工具栏。

![在此处输入图像描述](../Images/99189f7eb5c61ecaf997c1dd8e9230db.png)

在 core/cache/logs/error.log 中：

```
[2013-03-21 11:18:22] (ERROR @ /index.php) `` is not a valid integer and may not be passed to makeUrl() 
```

即PHP /manager/index.php 部分没有错误。

登录后的萤火虫显示：

```
ReferenceError: _ is not defined
...rer:this.renderNoteCell.createDelegate(this)]});this.grid_panel=new Ext.grid.Gri...
modx.t...tory.js (строка 806)

ReferenceError: _ is not defined
params[this.paramNames.topic] = '/ys/user-' + MODx.user.id + '/';
modx.js (строка 820)

TypeError: MODx.user is undefined
params[this.paramNames.topic] = '/ys/user-' + MODx.user.id + '/';
modx.js (строка 820) 
```

铬显示：

```
 Failed to load resource: the server responded with a status of 401 (Not Authorized)  
http://example.com/connectors/lang.js.php?    
ctx=mgr&topic=topmenu,file,resource,setting,gallery:default&action=70
Uncaught ReferenceError: _ is not defined modx.tree.directory.js:806
Uncaught ReferenceError: _ is not defined modx.localization.js:5
Uncaught TypeError: Cannot read property 'id' of undefined modx.js:820 
```

在这个材料上发现错误，所有写的东西都是compress_js和compress_css。我将值从 1 调整为 0（表 modx_system_settings）。已删除缓存。我去管理面板 - 没有任何改变。现在在缓存中：core/cache/system_settings/config.cache.php

```
 'compress_css' => '0',
 'compress_js' => '0', 
```

为什么 Chrome 负责 Not Authorized 不清楚，好像我登录了，但是 MODx 不明白。我不明白问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T09:38:29.787

我有几乎同样的问题。请仔细检查所有配置文件，尤其是配置路径。我的任务是将域从 web 转移到 localhost。有两种重要的情况 - 首先，检查路径（特别注意斜线，在 Windows 下你有不同的，顺便说一句，你可以 / 和 \ 同时，这取决于）。其次，suhosin 扩展存在一些问题，但这不是我的情况。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T14:57:42.833

您已完成高级安装并移动了一个或两个 manager 和 core 目录？

首先，仔细检查 core/config 中的所有路径，站点根目录和管理器目录中的 2 config.core.php，查看所有这些：[http ://rtfm.modx.com/display/revolution20/Hardening+MODX+Revolution](http://rtfm.modx.com/display/revolution20/Hardening+MODX+Revolution)

如果您已将核心移出 web 根目录，请检查您的 php 设置并确保 php 可以读取/写入这些目录我必须在我的 php 配置中隐式添加核心父目录的路径。[我遇到了和你一样的错误]

此外，js & css 压缩已经有一段时间没有问题了。2.2.1 我认为。

# ios - 弹出键盘时禁用按钮

> ID：15542452
> 
> 赞同：1
> 
> 时间：2013-03-21T08:20:48.280
> 
> 标签：ios, objective-c, uistoryboard

我有一个 UITextField，当你点击它时会弹出一个键盘。我已经使用情节提要添加了 UITextField，现在我想在键盘弹出时禁用一个按钮。我怎样才能做到这一点？

禁用按钮：`[self.howButton setEnabled:NO];` 但是我应该把它放在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:29:22.073

您可以将您的键盘声明添加到`notifacticon`，当它显示时，然后禁用按钮，当它隐藏时，然后启用按钮

在init中添加观察者

```
- (void)init
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide) name:UIKeyboardWillHideNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow) name:UIKeyboardWillShowNotification object:nil];
} 
```

实现显示和隐藏方法

```
- (void)keyboardWillHide
{
    [self.howButton setEnabled:YES];
}

- (void)keyboardWillShow
{
    [self.howButton setEnabled:NO];
} 
```

最后删除观察者，当类被释放时

```
- (void)dealloc
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:29:48.923

注册 UIKeyboardWillShowNotification

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow) name:UIKeyboardWillShowNotification object:nil]; 
```

在keyboardWillShow 方法中禁用您的按钮。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide) name:UIKeyboardWillHideNotification object:nil]; 
```

如果需要，您可以通过注册上述通知重新启用该按钮。

# pdf - 在数据表的 pdf 文件中显示网站页眉和页脚

> ID：15542458
> 
> 赞同：0
> 
> 时间：2013-03-21T08:21:08.693
> 
> 标签：pdf, header, datatables, footer

当我尝试在我的 pdf 文件中添加我的网站的页眉和网站的页脚时，我遇到了问题。我可以使用 datatables 默认插件下载 pdf 文件。但是在pdf文件中我想在pdf文件中显示网站的页眉和页脚。我的代码是这样的：

```
"sDom": 'T<"clear">lfrtip',
"oTableTools": {
"aButtons": [
{
"sExtends": "pdf",
"bFooter": true
},
{
"sExtends": "print",
"sInfo": "Please press escape when done"
},
{
"sExtends": "csv",
"sButtonText": "Save to CSV",
"bFooter":false                     
}
]
} 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-20T10:01:33.083

我已经做到了。我通过修改数据表的 swf 文件在我的 PDF 中添加了自定义页眉和页脚。我添加了页眉图像和页脚文本。如果您仍然需要任何帮助，请联系我。

# php - SendMessage php_serial_class：sms 以空行开头，第二行以“>”符号开头

> ID：15542466
> 
> 赞同：0
> 
> 时间：2013-03-21T08:22:03.140
> 
> 标签：php, sms, serial-port

我正在使用 php_serial_class 和 php 发送短信，代码如下：

但是收到的短信以空行开头，第二行以“>”符号开头，例如：

> "
> 
> '>Rel1 锁"

（符号 ' 必须删除才能在本网站正确理解）

```
include "php_serial.class.php";

$serial = new phpSerial;
$serial->deviceSet("/dev/ttyS2");
$serial->confBaudRate(9600);

// Then we need to open it
$serial->deviceOpen();

$serial->sendMessage("ATZ\n\r");
// Wait and read from the port
//$read = $serial -> readPort();

$serial->sendMessage("ATE0\n\r");
// Wait and read from the port
//$read = $serial -> readPort();

// To write into
$serial->sendMessage("AT+cmgf=1;+cnmi=2,1,0,1,0\n\r");//
$serial->sendMessage("AT+cmgs=\"+7912_____\"\n\r");
$serial->sendMessage("Rel1 lock\n\r");
$serial->sendMessage(chr(26));

//wait for modem to send message
sleep(7);
$read=$serial->readPort();

$serial->deviceClose(); 
```

# javascript - Oauth 登录弹出窗口未在 ie 中关闭

> ID：15542470
> 
> 赞同：3
> 
> 时间：2013-03-21T08:22:24.767
> 
> 标签：javascript, internet-explorer

我已经为谷歌 OAuth 代码的 oauth 登录弹出窗口编写了 javascript 代码如下

```
 function authorize(authorize_url,get_token,get_token_secret)
    {
        console.log("acToken is "+get_token);

    var win         =   window.open(authorize_url, "windowname2", "width=800, height=600"); 

   var pollTimer   =   window.setInterval(function() { 
       try
       {
       if (win.document.URL.indexOf(oauth_callback) != -1) {
           console.log("url inside callback"+win.document.URL)
           window.clearInterval(pollTimer);

           win.close();

           getting_access_token(get_token,get_token_secret);
       }
       }catch(e)
       {

       }
   },100);
} 
```

在那个窗口中正在打开 oauth，但是在单击允许后，如果 window.setinterval 函数没有进入，这就是为什么弹出窗口没有在 ie 中关闭，而 chrome 窗口正在正确关闭如何在 ie 中解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-24T17:24:45.900

您应该在新窗口中打开登录页面，然后重定向到成功页面，然后关闭弹出窗口：

page.html

```
function login() {
    var win = window.open('', 'login.html', 'width=800,height=400');
    win.focus();
} 
```

登录.html

```
window.location.href = 'success.html'; // or use server-side redirect 
```

成功.html

```
window.opener.close(); 
```

# jasper-reports - Jasper Reports - 如何在报告中生成子类别或组？

> ID：15542473
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:22:35.233
> 
> 标签：jasper-reports

**表**：

```
| DOCID | TITLE | MAIN_CATEGORY | SUB_CATEGORY |
------------------------------------------------
|     1 |  DOC1 |            M1 |           S1 |
|     2 |  DOC2 |            M1 |           S2 |
|     3 |  DOC3 |            M2 |           S2 |
|     4 |  DOC4 |            M2 |           S1 | 
```

**要求的报告格式**

**文件报告**

类别 - **M1**

```
| DOCID | TITLE | SUB_CATEGORY |
--------------------------------
|     1 |  DOC1 |           S1 |
|     2 |  DOC2 |           S2 | 
```

类别 - **M2**

```
| DOCID | TITLE | SUB_CATEGORY |
--------------------------------
|     3 |  DOC3 |           S2 |
|     4 |  DOC4 |           S1 | 
```

## 问题

我应该使用什么元素来获得所需的输出？如何 ？有教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:47:21.097

您可以通过添加“添加报告组”来实现此目的。

实现这一目标的步骤：-

1:- 创建一个新报告。

2:- 添加查询

```
 SELECT * 
   FROM table
   ORDER BY MAIN_CATEGORY 
```

3:-进入iReport中的“Report inspector”并添加“Add Report Group”

```
 a:- Report Group name- category(It can be anything)

  b:- Group by following object:- MAIN_CATEGORY 
```

4：- 在类别组下拖动一个静态文本字段并将其命名为“类别”，然后在此静态字段旁边拖动一个文本字段并将文本字段表达式更改为 $F{MAIN_CATEGORY}

5：- 在详细字段中拖动“DOCID”、“TITLE”和“SUB_CATEGORY”的文本。

# javascript - jquery限制大于要求的数字

> ID：15542474
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:22:36.037
> 
> 标签：javascript, jquery

需要限制在 jquery 的文本框中输入超过 20 个数字。如何实施。

任何帮助表示赞赏。

```
<table>
    <tr>
        <td>
            <h:inputText id="Actualcard" styleClass="input-text-bx"></h:inputText>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:24:03.967

```
$("#Actualcard").attr('maxlength','20'); 
```

对于号码验证：

```
$("#Actualcard").validate({
  rules: {
    field: {
      required: true,
      number: true
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:42:11.123

**HTML**

```
<input type="text" name="Actualcard" maxlength="20" value="" /> 
```

**JS**

```
'use strict';
$(document).ready(function(){
    $("#your_from input[name=Actualcard]").change(function(){
        var input = trim($(this).attr('value'));

        // Check if it's not all digits
        if (!(typeof(input) == 'number' && parseInt(input) == input)) {
            // Do something with the value here
            $(this).attr('value', '0');
        }
    });
}); 
```

这样你就可以检查输入是否全是数字。如果工作，我不会 100% 失去`input[name=Actualcard]`理智。否则，在该输入字段上使用额外的类来访问它（`$("#your_from .my_digit_field")`）。

# ruby-on-rails - PrivatePub 未定义错误 Rails 3.2 private pub

> ID：15542484
> 
> 赞同：5
> 
> 时间：2013-03-21T08:23:23.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, faye, private-pub

我想在我的 rails 应用程序中使用私人 pub gem。我用 railscast 316 实现

后`rails g private_pub:install`

我的 private_pub.yml 文件：

```
development:
  server: "http://0.0.0.0:9292/faye"
  secret_token: "secret"
test:
  server: "http://0.0.0.0:9292/faye"
  secret_token: "secret"
production:
  server: "http://0.0.0.0/faye"
  secret_token: "98ec77eb7077c9899dc53f003abc4d6a0170512a57feab126ed5a32b114e3613"
  signature_expiration: 3600 # one hour 
```

我的 private_pub.ru 文件

```
 # Run with: rackup private_pub.ru -s thin -E production
    require "bundler/setup"
    require "yaml"
    require "faye"
    require "private_pub"

    Faye::WebSocket.load_adapter('thin')

    PrivatePub.load_config(File.expand_path("../config/private_pub.yml", __FILE__), ENV["RAILS_ENV"] || "development")
    run PrivatePub.faye_app

Faye::Logging.log_level = :debug
Faye.logger = lambda { |m| puts m } 
```

我的索引文件

```
<h1>Chat</h1>

<ul id="chat">
  <%= render @mesajlar %>
</ul>

<%= form_for Mesaj.new, remote: true do |f| %>
    <%= f.text_field :icerik %>
    <%= f.submit "Send" %>
<% end %>

<%= subscribe_to "/mesajlar/new" %> 
```

控制器文件：

```
def create
params[:mesaj][:gonderen_id]= current_kullanici.id
@mesaj = Mesaj.create!(params[:mesaj])
PrivatePub.publish_to("/mesajlar/new", "alert('#{@mesaj.icerik}');")
end 
```

我添加`//= require private_pub`到 application.js 文件

初始化页面后，我在 firebug 上收到以下错误：

```
**PrivatePub is not defined**
at 
<script type="text/javascript">PrivatePub.sign({"server":"http://0.0.0.0:9292","timestamp":1363853952047,"channel":"/mesajlar/new","signature":"7bf74474796412b524b6c6c8849c50cb245ce92d"});</script>
</div> 
```

Rails 日志和`RAILS_ENV=production bundle exec rackup private_pub.ru -s thin -E production`命令日志中没有输出

我搜索并没有找到解决方案。

哪里有问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T09:59:00.780

我找到了问题，我会写解决方案，因为其他人应该得到这个错误：

我的 javascripts 放在底部，所以

```
<%= subscribe_to "/mesajlar/new" %> line calling before private_pub.js is loaded. 
```

所以，在索引文件中

```
<% content_for :bottom do %>
<%= subscribe_to "/mesajlar/new" %>
<% end  %> 
```

灵魂解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T06:58:28.520

我想你忘了`private_pub.js`添加`application.js`：

```
//= require private_pub 
```

# iphone - 如何让自定义声音文件在 Apple 推送通知服务中播放？

> ID：15542489
> 
> 赞同：2
> 
> 时间：2013-03-21T08:23:39.827
> 
> 标签：iphone, ios, push-notification, apple-push-notifications

我想播放自定义声音文件来通知用户。我使用 java apns 作为第三方库，我开发了一个连接器来连接 java apns，以便向设备发送通知。我只有保存在服务器本地驱动器中的声音文件的文件路径。要构建有效负载，它需要声音属性的字符串输入。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:19:28.330

sound 属性仅用于提供已安装在设备上的应用程序的一部分的声音文件的文件名。您无法在通知中从服务器发送文件。

# android - 使用八哥对 Android 设备进行缩放会导致一些布局问题

> ID：15542496
> 
> 赞同：2
> 
> 时间：2013-03-21T08:24:06.827
> 
> 标签：android, actionscript-3, starling-framework

[我正在使用本文](http://wiki.starling-framework.org/manual/multi-resolution_development)中所写的第三多分辨率技术

为了确定比例因子和舞台大小，我使用了最初由 Jeff 编写的这段代码：

```
 if (Capabilities.screenDPI >= 200) {
            if (Capabilities.screenDPI >= 280) {
                AssetFactory.contentScaleFactor = 2;
            }
            else {
                AssetFactory.contentScaleFactor = 1.5;
            }
        }
        else {
            AssetFactory.contentScaleFactor = 1;
        }

        var mViewPort:Rectangle = new Rectangle(0, 0, stage.fullScreenWidth, stage.fullScreenHeight);

        mStarling = new Starling(Startup, stage,mViewPort);
        mStarling.stage.stageWidth = stage.fullScreenWidth /  AssetFactory.contentScaleFactor;
        mStarling.stage.stageHeight = stage.fullScreenHeight / AssetFactory.contentScaleFactor; 
```

然后我使用这个比例因子来确定我需要选择哪些大小的资产。

所以现在，我有一个背景，可以拉伸到舞台宽度和大小。当我使用大多数设备进行测试时，这种技术效果很好，但是我们有像 Barnes 和 Noble Nook Color 这样的设备。

该设备的分辨率为 600x1024，分辨率为 170 dpi。这意味着它将选择最小的资产 (320x480) 并将其拉伸到 600x1024。这当然是像素化的。关于如何克服这个问题的任何想法？

我还附上了一个测试应用程序，详细显示了这个问题[https://dl.dropbox.com/u/2192209/scaling%20test.zip](https://dl.dropbox.com/u/2192209/scaling%20test.zip)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T11:07:55.560

到目前为止，对我最有效的是根本不缩放 Starling 的视口。它应始终保持基本尺寸 (320x480)。

然后你有一个关于纹理应该有多大的比例因子。这是 Starling 在创建纹理时的内置功能 - 通过比例因子。这意味着如果您的舞台是 640x960，那么您的比例因子将为 2。您的图像（位图对象）的实际屏幕尺寸为 320x480（全屏，舞台尺寸为 1:1），但它是纹理（加载的资产 BitmapData ) 将是原来的两倍（640x960，1:1 与手机尺寸）。

为了更容易理解 - Starling (320x480) 的舞台将按比例放大以适合您手机的分辨率 (320 -> 640)。但是您的图像将按比例缩小以适合舞台（640 -> 320）。所以你得到完全正常的图像。

这有助于您保持固定大小的舞台。这真的很有帮助，因为否则很难定位对象 - 如果您希望对象位于中间，有时是 160，有时是 320，等等。这意味着您始终必须通过计算设置位置/大小，这是一个超载。

希望有帮助！

编辑：只记得我用来确定我的主要大小和资产比率的网站： http: [//screensiz.es/phone](http://screensiz.es/phone)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-27T08:01:42.143

如何设置最大比例尺寸？如果上述计算的结论使您的规模大于`2`，请使用更大的资产来降低规模比率。

您的计算只计算 screenDPI，尝试将它们与屏幕分辨率结合起来。

# xcode - 如何清理 xcode 用户特定设置（组织者、配置文件）？

> ID：15542500
> 
> 赞同：1
> 
> 时间：2013-03-21T08:24:22.343
> 
> 标签：xcode, provisioning-profile, organizer

当我按下管理器中的刷新按钮时，我的 xcode 崩溃了。似乎证书和配置文件存在一些问题。如果我在同一台 Mac 中以其他用户身份登录，一切正常。

那么，我可以在不影响 xcode 安装的情况下清理用户特定设置吗？比如清理管理器设置、配置文件等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T22:59:28.290

这是Apple的官方解决方法：

运行 /Applications/Utilities/Terminal.app 并执行以下语句：

> mkdir ~/Library/Developer/Xcode/OldPortalDBs；mv ~/Library/Developer/Xcode/connect1.apple.com* ~/Library/Developer/Xcode/OldPortalDBs

请参阅：[Xcode 4.6.1 在与开发人员门户交互时崩溃](https://devforums.apple.com/thread/182876?tstart=0)

# dom - ember.js 路由渲染：使用 setTimeout() 进行 dom 操作？

> ID：15542501
> 
> 赞同：1
> 
> 时间：2013-03-21T08:24:27.027
> 
> 标签：dom, ember.js, router

如果我想在渲染视图后调用一个 jquery 插件（例如，它将一个表插入到 dom 中），除了使用 window.setTimeout() 之外，还有其他可能吗？

这段代码完成了这项工作（1ms 超时；这很奇怪）：

```
Route.HomeRoute = Ember.Route.extend({
        renderTemplate: function() {

            this.render("home");   // render the home view

            window.setTimeout(function() {
                $(".tables").insertTables();    // this would add a table
            }, 1);

        }
    }) 
```

但是这段代码不起作用：

```
Route.HomeRoute = Ember.Route.extend({
        renderTemplate: function() {

            this.render("home");   // render the home view

            $(".tables").insertTables();    // this would add a table

        }
    }); 
```

我知道有 Ember.View.didInsertElement()，但因此我必须在父视图上设置回调，并且只是想知道为什么上面的代码示例不能按预期工作。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:28:26.757

**我不知道我的答案是否 100% 准确，但我想这就是它可以解释的方式：**

我想问题是，您认为 render() 方法是同步完成其工作的。但这种情况并非如此。相反，它会安排 HomeView 的呈现。渲染**被安排到 Ember 的 RunLoop 中**。在**第二个示例中，您的代码安排渲染，然后立即尝试访问其 DOM 元素**（我猜 .tables 是主模板的一部分）。但是此时没有渲染视图！第一个示例有效，因为涉及 1ms 超时。**在此超时期间，Ember RunLoop 将启动并开始其魔法。**它执行渲染，然后当 CPU 再次空闲时，可以调用超时函数。

实际上你想要在这里做的是：`do something on my DOM, when the View was successfully rendered`. 这可以在 Ember 中完成，无需使用 setTimeout。以下代码访问 RunLoop 并安排一个函数在 RunLoop 结束时执行。

```
Ember.run.next(function() {
     $(".tables").insertTables();    // this would add a table
}); 
```

这是一篇关于 RunLoop 的文章，如果你想了解 Ember 的那些细节，了解这篇文章很重要： - [machty 的文章](http://machty.github.com/blog/2013/01/12/everything-you-never-wanted-to-know-about-the-ember-run-loop/)

**最后但同样重要的是：**在 Route 中进行这样的 DOM 操作非常尴尬。你的路线应该永远是免费的，这些东西。元素和选择器以及 jQuery 插件只能在视图层中使用。其他一切似乎都很糟糕。也许你想分享更多关于你为什么选择这种方法的细节？可能有比这个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:29:18.100

第二个示例不起作用的原因可能是由于[Ember.js Run Loop](http://machty.github.com/blog/2013/01/12/everything-you-never-wanted-to-know-about-the-ember-run-loop/)。 `this.render`安排在当前运行循环中稍后插入 dom。

DOM 插入是在 run loop 结束时完成的，通过 using `setTimeout`，您在 run loop 结束后调用插件，从而保证模板被注入到 DOM 中。（不需要 1ms，0ms 可能会起作用）

你可能会说这个运行循环非常复杂，尤其是对于 Ember.js 初学者而言。理想情况下，它应该对应用程序开发人员透明。之所以遇到它的副作用，是因为 DOM 操作**不应该**在路由器中处理。

我的第一反应是告诉你使用`didInsertElement`, 或者 View 中的任何代码或钩子，因为那是 DOM 操作应该发生的地方。但是您似乎意识到了这一点并且由于某种原因无法使用它（我无法确认或否认，因为我没有足够的信息）。

我给你的建议，尽你所能在`didInsertElement`.

# java - 我们应该使用 clone 还是 BeanUtils.copyProperties 以及为什么

> ID：15542504
> 
> 赞同：33
> 
> 时间：2013-03-21T08:24:43.203
> 
> 标签：java, spring, clone

从外观上看 -`BeanUtils.copyProperties`似乎创建了一个对象的克隆。如果是这种情况，那么关于实现 Cloneable 接口的问题是什么（只有不可变对象是新的，而可变对象复制了引用）这是最好的，为什么？

**我昨天实现了可克隆，然后意识到我必须为非字符串/原始**元素提供自己的修改。然后我被告知`BeanUtils.copyProperties`我现在正在使用哪个。两种实现似乎都提供了类似的功能。

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-23T19:29:44.107

Josh Bloch 提供了一些相当不错的论据（包括您提供的论据），断言`Cloneable`从根本上是有缺陷的，而是倾向于使用复制构造函数。见[这里](http://www.artima.com/intv/bloch13.html)。

我还没有遇到过复制不可变对象的实际用例。您出于特定原因复制对象，大概是为了将一组可变对象隔离到单个事务中进行处理，确保在该处理单元完成之前没有任何内容可以更改它们。如果它们已经是不可变的，那么引用就像副本一样好。

`BeanUtils.copyProperties`通常是一种不那么侵入性的复制方式，而无需更改要支持的类，并且它在合成对象方面提供了一些独特的灵活性。

也就是说，`copyProperties`并不总是一刀切。您可能在某些时候需要支持包含具有专用构造函数但仍然是可变的类型的对象。您的对象可以支持内部方法或构造函数来解决这些异常，或者您可以将特定类型注册到某些外部工具中进行复制，但它甚至无法到达某些地方`clone()`。这很好，但仍然有限制。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-01T21:21:12.343

我检查了源代码，发现它只是复制**原始**属性的“第一级”。当涉及到嵌套对象时，嵌套属性仍然引用原始对象的字段，因此它不是“深拷贝”。

从`org.springframework.beans.BeanUtils.java`5.1.3 版的 Spring 源代码中检查以下片段：

```
/**
     * Copy the property values of the given source bean into the target bean.
     * <p>Note: The source and target classes do not have to match or even be derived
     * from each other, as long as the properties match. Any bean properties that the
     * source bean exposes but the target bean does not will silently be ignored.
     * <p>This is just a convenience method. For more complex transfer needs,
     * consider using a full BeanWrapper.
     * @param source the source bean
     * @param target the target bean
     * @throws BeansException if the copying failed
     * @see BeanWrapper
     */
    public static void copyProperties(Object source, Object target) throws BeansException {
        copyProperties(source, target, null, (String[]) null);
    }

...

    /**
     * Copy the property values of the given source bean into the given target bean.
     * <p>Note: The source and target classes do not have to match or even be derived
     * from each other, as long as the properties match. Any bean properties that the
     * source bean exposes but the target bean does not will silently be ignored.
     * @param source the source bean
     * @param target the target bean
     * @param editable the class (or interface) to restrict property setting to
     * @param ignoreProperties array of property names to ignore
     * @throws BeansException if the copying failed
     * @see BeanWrapper
     */
    private static void copyProperties(Object source, Object target, @Nullable Class<?> editable,
            @Nullable String... ignoreProperties) throws BeansException {

        Assert.notNull(source, "Source must not be null");
        Assert.notNull(target, "Target must not be null");

        Class<?> actualEditable = target.getClass();
        if (editable != null) {
            if (!editable.isInstance(target)) {
                throw new IllegalArgumentException("Target class [" + target.getClass().getName() +
                        "] not assignable to Editable class [" + editable.getName() + "]");
            }
            actualEditable = editable;
        }
        PropertyDescriptor[] targetPds = getPropertyDescriptors(actualEditable);
        List<String> ignoreList = (ignoreProperties != null ? Arrays.asList(ignoreProperties) : null);

        for (PropertyDescriptor targetPd : targetPds) {
            Method writeMethod = targetPd.getWriteMethod();
            if (writeMethod != null && (ignoreList == null || !ignoreList.contains(targetPd.getName()))) {
                PropertyDescriptor sourcePd = getPropertyDescriptor(source.getClass(), targetPd.getName());
                if (sourcePd != null) {
                    Method readMethod = sourcePd.getReadMethod();
                    if (readMethod != null &&
                            ClassUtils.isAssignable(writeMethod.getParameterTypes()[0], readMethod.getReturnType())) {
                        try {
                            if (!Modifier.isPublic(readMethod.getDeclaringClass().getModifiers())) {
                                readMethod.setAccessible(true);
                            }
                            Object value = readMethod.invoke(source);
                            if (!Modifier.isPublic(writeMethod.getDeclaringClass().getModifiers())) {
                                writeMethod.setAccessible(true);
                            }
                            writeMethod.invoke(target, value);
                        }
                        catch (Throwable ex) {
                            throw new FatalBeanException(
                                    "Could not copy property '" + targetPd.getName() + "' from source to target", ex);
                        }
                    }
                }
            }
        }
    } 
```

只需关注以下几行：

```
Object value = readMethod.invoke(source);
...
writeMethod.invoke(target, value); 
```

此行调用目标对象上的设置器。想象一下这个类：

```
class Student {
    private String name;
    private Address address;
} 
```

如果我们有`student1`and `student2`，第二个只是 intanciated 并且没有分配任何字段，`student1`has`address1`和 name `John`。

因此，如果我们调用：

```
 BeanUtils.copyProperties(student1, student2); 
```

我们正在做：

```
 student2.setName(student1.getName()); // this is copy because String is immutable
    student2.setAddress(student1.getAddress()); // this is NOT copy, we still are referencing `address1` 
```

当`address1`改变时，它也会改变`student2`。

因此，`BeanUtils.copyProperties()` *仅适用于对象的原始类型字段*；如果是嵌套的，则不起作用；或者，您必须确保原始对象在目标对象的整个生命周期内的不变性，这并不容易且不可取。

* * *

如果你真的想让它成为一个深拷贝，你必须实现一些方法来*递归地*在不是原语的字段上调用这个方法。最后你会到达一个只有原始/不可变字段的类，然后你就完成了。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-24T09:51:10.970

BeanUtils 比标准克隆更灵活，标准克隆只是将字段值从一个对象复制到另一个对象。clone 方法从同一类的 bean 复制字段，但 BeanUtils 可以为具有相同属性名称的不同类的 2 个实例执行此操作。

例如，假设您有一个具有字符串日期字段的 Bean A 和具有相同字段 java.util.Date 日期的 bean B。使用 BeanUtils，您可以复制字符串值并使用 DateFormat 自动将其转换为日期。

我用它来将 SOAP 对象转换为不具有相同数据类型的 Hibernate 对象。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-28T11:21:14.883

我认为您正在寻找深层副本。您可以在 util 类中使用以下方法并将其用于任何类型的对象。

```
public static <T extends Serializable> T copy(T input) {
    ByteArrayOutputStream baos = null;
    ObjectOutputStream oos = null;
    ByteArrayInputStream bis = null;
    ObjectInputStream ois = null;
    try {
        baos = new ByteArrayOutputStream();
        oos = new ObjectOutputStream(baos);
        oos.writeObject(input);
        oos.flush();

        byte[] bytes = baos.toByteArray();
        bis = new ByteArrayInputStream(bytes);
        ois = new ObjectInputStream(bis);
        Object result = ois.readObject();
        return (T) result;
    } catch (IOException e) {
        throw new IllegalArgumentException("Object can't be copied", e);
    } catch (ClassNotFoundException e) {
        throw new IllegalArgumentException("Unable to reconstruct serialized object due to invalid class definition", e);
    } finally {
        closeQuietly(oos);
        closeQuietly(baos);
        closeQuietly(bis);
        closeQuietly(ois);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-24T09:05:32.983

根据您的问题，我猜您需要对象的***深层副本***。如果是这种情况，请不要使用[`clone`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#clone%28%29)已经指定的方法，`oracle docs`因为它提供了关联对象的***浅表副本***。`BeanUtils.copyProperties`而且我对API没有足够的了解。
下面给出的是`deep copy`. 在这里，我正在深度复制一个`primitive array`. 您可以使用任何类型的对象尝试此代码。

```
import java.io.*;
class ArrayDeepCopy 
{
    ByteArrayOutputStream baos;
    ByteArrayInputStream bins;
    public void saveState(Object obj)throws Exception //saving the stream of bytes of object to `ObjectOutputStream`.
    {
        baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(obj);
        oos.close();
    }
    public int[][] readState()throws Exception //reading the state back to object using `ObjectInputStream`
    {
        bins = new ByteArrayInputStream(baos.toByteArray());
        ObjectInputStream oins = new ObjectInputStream(bins);
        Object obj = oins.readObject();
        oins.close();
        return (int[][])obj;
    }
    public static void main(String[] args) throws Exception
    {
        int arr[][]= {
                        {1,2,3},
                        {4,5,7}
                    };
        ArrayDeepCopy ars = new ArrayDeepCopy();
        System.out.println("Saving state...");
        ars.saveState(arr);
        System.out.println("State saved..");
        System.out.println("Retrieving state..");
        int j[][] = ars.readState();
        System.out.println("State retrieved..And the retrieved array is:");
        for (int i =0 ; i < j.length ; i++ )
        {
            for (int k = 0 ; k < j[i].length ; k++)
            {
                System.out.print(j[i][k]+"\t");
            }
            System.out.print("\n");
        }

    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-21T08:43:38.910

clone 创建对象的浅表副本，克隆对象始终与原始对象属于同一类。复制所有字段，无论是否私有。

BeanUtils.copyProperties API*在属性名称相同的所有情况下，将属性值从源 bean 复制到目标 bean。*

对我来说，这两个概念几乎没有共同之处。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-28T09:07:11.620

克隆由您完成。如果您尝试克隆的实例包含另一个实例的引用，您也必须向该实例编写克隆代码。如果实例包含对其他实例的引用链怎么办？因此，如果您自己进行克隆，您可能会错过一个小细节。

另一方面，BeanUtils.copyProperties 自己处理所有事情。它减少了你的努力。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-11T01:11:32.850

任何类的对象的深层副本的最佳解决方案是在对象内部也存在递归来处理对象，并且使用真正的 GET 和 SET 函数来维护对象完整性。

我想提出的解决方案是找到Source Object的所有GET函数，并将它们与Target Object的SET函数匹配。如果它们在 ReturnType -> Parameter 中匹配，则执行复制。如果它们不匹配，请尝试为这些内部对象调用深层复制。

```
private void objectCopier(Object SourceObject, Object TargetObject) {
        // Get Class Objects of Source and Target
        Class<?> SourceClass = SourceObject.getClass();
        Class<?> TargetClass = TargetObject.getClass();
        // Get all Methods of Source Class
        Method[] sourceClassMethods = SourceClass.getDeclaredMethods();
        for(Method getter : sourceClassMethods) {
            String getterName = getter.getName();
            // Check if method is Getter
            if(getterName.substring(0,3).equals("get")){
                try {
                    // Call Setter of TargetClass with getter return as parameter
                    TargetClass.getMethod("set"+getterName.substring(3), getter.getReturnType()).invoke(TargetObject, getter.invoke(SourceObject));
                }catch(IllegalAccessException | IllegalArgumentException | InvocationTargetException | NoSuchMethodException | SecurityException e) {
                    try {
                        // Get Class of the type Setter in Target object is expecting
                        Class<?> SetTargetClass = TargetClass.getMethod(getterName).getReturnType();
                        // Create new object of Setter Parameter of Target
                        Object setTargetObject = SetTargetClass.newInstance();
                        // Copy properties of return object of the Source Object to Target Object
                        objectCopier(getter.invoke(SourceObject), setTargetObject);
                        // Set the copied object to the Target Object property
                        TargetClass.getMethod("set"+getterName.substring(3),SetTargetClass).invoke(TargetObject, setTargetObject);
                    } catch (IllegalAccessException | IllegalArgumentException | InvocationTargetException
                            | NoSuchMethodException | SecurityException | InstantiationException ef) {
                        System.out.println(getterName);
                    }
                }
            }
        }
    } 
```

# c# - Linq to Objects 查询 LLBLGen 投影

> ID：15542508
> 
> 赞同：0
> 
> 时间：2013-03-21T08:24:50.790
> 
> 标签：c#, linq-to-objects, llblgenpro

我正在尝试使用推荐的 LLBLGen 语法来查询投影（[http://www.llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/Using%20the%20generated%20code/Adapter/gencode_usingentityview_adapter.htm#projections](http://www.llblgen.com/documentation/3.5/LLBLGen%20Pro%20RTF/Using%20the%20generated%20code/Adapter/gencode_usingentityview_adapter.htm#projections) )

```
IEntityView2 view = table.DefaultView;
List<A1AllocationHelp1TableDTO> something = 
    (from c in view
     select new A1AllocationHelp1TableDTO
     {
         RecordStatus = c.RecordStatus,
         UniqueIdent = c.UniqueIdent
     }).ToList(); 
```

但我在“选择”时收到此错误：

```
The type arguments for method 'IEnumerable<TResult>
System.Linq.Enumerable.Select<TSource, TResult>(this IEnumerable<TSource>,
Func<TSource, TResult>)' cannot be inferred from the query. 
```

有趣的是，同样的工作在 VB.Net 中也很好

```
Dim view As IEntityView2 = table.DefaultView
Dim something As List(Of A1AllocationHelp1TableDTO) = _
    (From c In view
     Select New A1AllocationHelp1TableDTO With _
          {
              .RecordStatus = c.RecordStatus, _
              .UniqueIdent = c.UniqueIdent
          }).ToList() 
```

我正在使用 VS2010、.NET 4 和 LLBLGen 2.6。不知道如何解决这个问题，谁能帮帮我？

谢谢

编辑：

IEntityView2 由 LLBLGen 生成，这是它的定义

```
public interface IEntityView2 : IEnumerable
{
    bool AllowEdit { get; set; }
    bool AllowNew { get; set; }
    bool AllowRemove { get; set; }
    int Count { get; }
    PostCollectionChangeAction DataChangeAction { get; set; }
    IPredicate Filter { get; set; }
    IEntityCollection2 RelatedCollection { get; }
    ISortExpression Sorter { get; set; }
    IEntity2 this[int index] { get; }
    event ListChangedEventHandler ListChanged;
    bool Contains(IEntity2 value);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, DataTable destination);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, IEntityCollection2 destination);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, IEntityDataProjector projector);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, DataTable destination, bool allowDuplicates);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, IEntityCollection2 destination, bool allowDuplicates);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, IEntityDataProjector projector, bool allowDuplicates);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, DataTable destination, bool allowDuplicates, IPredicate filter);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, IEntityCollection2 destination, bool allowDuplicates, IPredicate filter);
    void CreateProjection(List<IEntityPropertyProjector> propertyProjectors, IEntityDataProjector projector, bool allowDuplicates, IPredicate filter);
    int IndexOf(IEntity2 value);
    IEntityCollection2 ToEntityCollection();
    IEntityCollection2 ToEntityCollection(int startIndex);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:51:26.230

`IEntityView2`继承非泛型接口`IEnumerable`。然而，该`Select`方法需要通用版本。这就是您收到错误的原因。

假设您要访问的属性在 上定义`IEntity2`，以下将起作用：

```
view.Cast<IEntity2>()
    .Select(c => new A1AllocationHelp1TableDTO
           {
               RecordStatus = c.RecordStatus,
               UniqueIdent = c.UniqueIdent
           })
    .ToList(); 
```

它适用于 VB.NET，因为它使用后期绑定。您可以在以下示例中轻松看到这一点：

```
Dim view As IEntityView2 = table.DefaultView
Dim something As List(Of A1AllocationHelp1TableDTO) = _
(From c In view
 Select New A1AllocationHelp1TableDTO With _
      {
          .RecordStatus = c.IDontExist _
      }).ToList() 
```

我正在使用一个不存在的属性 ( `IDontExist`)。此代码仍将编译但在运行时抛出异常：

```
MissingMemberException: Public member 'IDontExist' on type 'IEntity2' not found.
   at Microsoft.VisualBasic.CompilerServices.Symbols.Container.GetMembers(String& MemberName, Boolean ReportErrors)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.ObjectLateGet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack)
   at Microsoft.VisualBasic.CompilerServices.NewLateBinding.LateGet(Object Instance, Type Type, String MemberName, Object[] Arguments, String[] ArgumentNames, Type[] TypeArguments, Boolean[] CopyBack)
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
   at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:15:51.907

.DefaultView 返回一个类型化的视图，它实现了 IEntityView2，但你不应该将它强制转换为 IEntityView2，因为你会丢失泛型类型。所以你应该这样做：

```
List<A1AllocationHelp1TableDTO> something = 
    (from c in table.DefaultView
     select new A1AllocationHelp1TableDTO
     {
         RecordStatus = c.RecordStatus,
         UniqueIdent = c.UniqueIdent
     }).ToList(); 
```

这样，编译器就知道视图的泛型类型。

# html - iframe 源为动态 URL

> ID：15542512
> 
> 赞同：0
> 
> 时间：2013-03-21T08:24:56.383
> 
> 标签：html, post, iframe, submit, form-submit

不经常使用 iFrame，所以我真的可以在这里得到你的帮助......

我在网页上有一个表格，它会根据表格中选择的日期打开一个可用的外部在线预订引擎。

我想在新页面 book.html 上的名为“mainframe”的 iframe 中打开外部预订页面。

表单的开始和结束代码是：

代码：

```
 <form name="roseform" method="post" action="http://www.hotelexec.co.uk/external.asp"></form>
  <input type="text" class="dimmed" placeholder="Brasil" id="keywords" name="keywords" />
  <a href="#" class="btn" onclick="submit()">Search</a> 
```

如何在 book.html 页面上将目标设置为“大型机”，以便表单的结果显示在那里？我知道我需要将 iframe 源设为动态 URL。

谢谢，

西装外套

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:27:46.557

只需添加**目标**属性。

```
<form name="roseform" target="mainframe" method="post" action="http://www.hotelexec.co.uk/external.asp"></form> 
```

**更新**

据我了解，您需要以下步骤：

开始将**.html**更改为**.php**

将表单的操作更改`itmjobs.ro/lidl/page1.php`为指向 page2.html

```
<form name="roseform" method="post" action="http://itmjobs.ro/lidl/page2.php"></form> 
```

在 page2.php 添加带有地址的 iframe`http://itmjobs.ro/search-results-jobs/`

```
<iframe src="http://itmjobs.ro/search-results-jobs/?<?php echo http_build_query($_POST)?>"></iframe> 
```

现在您将`http://itmjobs.ro/search-results-jobs/`在 iframe 中看到数据。

# php - 为什么在这个例子中 file_get_contents 不能正确加载 phpscript？

> ID：15542513
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:24:57.883
> 
> 标签：php, javascript

我写了一些代码，本质上做了以下事情：

```
<div id="thisDiv">
</div>

<?php
echo "<script>document.getElementById('thisDiv').innerHTML = '".addslashes(str_replace(array("\n", "\r"), "", file_get_contents('/path/to/file/example.php'')))."';</script>";
?> 
```

但是，我注意到这不起作用： `<?php ?>`example.php 内的标记中没有任何内容进入 div。为什么会这样，这是他们的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:02:04.730

使用时`file_get_contents()`，如果您尝试在 PHP 脚本上使用它，文件中的任何 PHP 都不会执行。如果要将 PHP 文件作为字符串返回，一种方法是使用以下`ob_*()`函数：

```
ob_start();
include '/path/to/file/example.php';
$content = ob_get_contents();
ob_end_clean(); 
```

现在您可以使用`$content`将 example.php 与 PHP 作为字符串执行。

# cron - Cronjob 以错误的时间表触发。

> ID：15542516
> 
> 赞同：2
> 
> 时间：2013-03-21T08:25:17.667
> 
> 标签：cron, crontab, cron-task

我有两个 cronjobs，我想以十分钟的小间隔运行这两个 cronjobs。两天一次，在 0100 时和 0110 时

这就是我正在尝试的。

```
0 1 */2 * * job1.sh
10 1 */2 * * job2.sh 
```

job1 没有按预期工作。它每天运行两次。job2 按预期运行（两天一次）。
我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:16:17.807

您需要添加执行脚本的二进制文件，以及文件的完整路径：

```
0 1 */2 * * /bin/sh /route/to/your/file/job1.sh
10 1 */2 * * /bin/sh /route/to/your/file/job2.sh 
```

`/bin/sh`可以是另一回事，只需从`which sh`.

# java - JSF 中重新渲染的属性

> ID：15542517
> 
> 赞同：3
> 
> 时间：2013-03-21T08:25:28.630
> 
> 标签：java, jsf, richfaces

我有一个如下表格：

```
<h:form id="x" prependId="false">

      <h:dataTable id="v" value="#{userBean.cdManagerCollection}" var="cd" 
         border="1">

            <f:facet name="header">
                Test Table 
            </f:facet>
            <h:column>
                <f:facet name="header">
                    <h:outputText value="Name" />
                </f:facet>
                <h:inputText id="title" value="#{cd.title}"  />
            </h:column>                                                     
        </h:dataTable>

        <input type="hidden" id='btnName' name="btnName" value="Apply"/>
        <a4j:commandButton  id="btn" value="SUBMIT" action="#{userBean.processCD}" reRender="x"/>

</h:form> 
```

我的问题是，当我使用 a4j:command 按钮提交表单然后重新呈现相同的表单时，请求参数（在这种情况下是隐藏的 btnName）是否可以访问？（意味着通过 facescontext 环境变量？）

基本上，我需要根据请求参数在返回 ${userBean.cdManagerCollection} 时决定数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T17:07:58.113

如果您的`<input>`元素当然可以作为 HTTP 请求的属性使用，则该值。换句话说，该参数将`userBean.processCD`通过以下调用在您的操作方法中显示为字符串：

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("btnName"); 
```

如果您想采用我强烈推荐的 JSF 方法，您可以将标记的`value`属性绑定`<h:inputHidden>`到 bean 属性，以便 JSF 可以自己进行输入转换（验证、转换、属性设置等）：

```
<h:inputHidden id="btnName" value="#{userBean.btnName}"/> 
```

具有托管 bean 的属性：

```
private String btnName;//getter+setter 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-21T08:26:38.087

如果您`btnName`从 中读取参数，`userBean`则该参数已经在您的`userBean`:

```
<input type="hidden" id="btnName" name="btnName" value="#{userBean.btnParameter}" /> 
```

# java - cvc-elt.1 找不到元素“beans:beans”的声明

> ID：15542519
> 
> 赞同：0
> 
> 时间：2013-03-21T08:25:36.293
> 
> 标签：java, maven, spring-mvc, spring-security

我正在尝试使用弹簧安全性，但出现此错误：

```
org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 9 in XML document from ServletContext resource [/WEB-INF/spring-security.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lin
eNumber: 9; columnNumber: 79; cvc-elt.1: Cannot find the declaration of element 'beans:beans'.
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
        at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
        at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebAppli

cationContext.java:125) 
```

下面是我的 spring-security.xml

```
<?xml version="1.0" encoding="UTF-8"?>  

<beans:beans xmlns="http://www.springframework.org/schema/security" 
    xmlns:beans="http://www.springframework.org/schema/beans" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemalocation="http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
        http://www.springframework.org/schema/security 
        http://www.springframework.org/schema/security/spring-security-3.0.3.xsd">  

    <http auto-config="true">  
        <intercept-url pattern="/**" access="ROLE_USER"></intercept-url>
    </http>  

    <authentication-manager>  
        <authentication-provider>  
            <user-service>  
            <user name="springaddon" password="123456" authorities="ROLE_USER"></user>
            </user-service>  
        </authentication-provider>  
    </authentication-manager>  

</beans:beans> 
```

这个想法标志着这一行的错误：`http://www.springframework.org/schema/security/spring-security-3.0.3.xsd`

下面是我的 pom.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.indra</groupId>
    <artifactId>addressbook</artifactId>
    <name>Addressbook</name>
    <packaging>war</packaging>
    <version>1.0.0-BUILD-SNAPSHOT</version>
    <properties>
        <java-version>1.6</java-version>
        <org.springframework-version>3.1.1.RELEASE</org.springframework-version>
        <org.aspectj-version>1.6.10</org.aspectj-version>
        <org.slf4j-version>1.6.6</org.slf4j-version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework-version}</version>
            <exclusions>
                <!-- Exclude Commons Logging in favor of SLF4j -->
                <exclusion>
                    <groupId>commons-logging</groupId>
                    <artifactId>commons-logging</artifactId>
                 </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework-version}</version>
        </dependency>

        <!-- AspectJ -->
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>${org.aspectj-version}</version>
        </dependency>   

        <!-- Logging -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${org.slf4j-version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${org.slf4j-version}</version>
            <scope>runtime</scope>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.15</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.mail</groupId>
                    <artifactId>mail</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.jms</groupId>
                    <artifactId>jms</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jdmk</groupId>
                    <artifactId>jmxtools</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>com.sun.jmx</groupId>
                    <artifactId>jmxri</artifactId>
                </exclusion>
            </exclusions>
            <scope>runtime</scope>
        </dependency>

        <!-- @Inject -->
        <dependency>
            <groupId>javax.inject</groupId>
            <artifactId>javax.inject</artifactId>
            <version>1</version>
        </dependency>

        <!-- Servlet -->
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.5</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet.jsp</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>

        <!-- Test -->
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.7</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6.1</version>
        </dependency>

        <dependency>
          <groupId>javax.validation</groupId>
          <artifactId>validation-api</artifactId>
          <version>1.0.0.GA</version>
        </dependency>

        <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-validator-annotation-processor</artifactId>
          <version>4.1.0.Final</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency> 

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency> 

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.3.RELEASE</version>
        </dependency>

    </dependencies>
    <build>
        <plugins>
            <plugin>
                <artifactId>maven-eclipse-plugin</artifactId>
                <version>2.9</version>
                <configuration>
                    <additionalProjectnatures>
                        <projectnature>org.springframework.ide.eclipse.core.springnature</projectnature>
                    </additionalProjectnatures>
                    <additionalBuildcommands>
                        <buildcommand>org.springframework.ide.eclipse.core.springbuilder</buildcommand>
                    </additionalBuildcommands>
                    <downloadSources>true</downloadSources>
                    <downloadJavadocs>true</downloadJavadocs>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-Xlint:all</compilerArgument>
                    <showWarnings>true</showWarnings>
                    <showDeprecation>true</showDeprecation>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.2.1</version>
                <configuration>
                    <mainClass>org.test.int1.Main</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

我已经在互联网上搜索了这个错误，它指出我的 spring 版本和 spring security 不匹配。我怎么知道我的罐子是否匹配？或者这个错误还有其他原因吗？

# javascript - grunt 如何监视子文件夹中的文件？

> ID：15542520
> 
> 赞同：68
> 
> 时间：2013-03-21T08:25:36.900
> 
> 标签：javascript, gruntjs

我的代码文件夹和文件是这样的，你永远不知道里面有多少子文件夹：

```
js/sub1/a.js
js/sub2/b.js
js/sub3/sub31/c.js
js/sub4/sub41/sub411/d.js 
```

这是 Gruntfile.js 的一部分：

```
grunt.initConfig({
    watch: {
        src: {
            files: ['js/*.js'],
            tasks: []
        }
    }
}); 
```

Grunt 无法使用`'js/*.js'`. 那么如何写出正确的文件路径表达式呢？

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-03-21T15:07:15.487

根据[有关文件 globbing 的官方文档](http://gruntjs.com/configuring-tasks#globbing-patterns)，要监视目录路径及其子目录中特定文件类型的文件的更改，您需要：

```
files: ['js/**/*.js'] 
```

# mysql - 当我使用spring存储图像Mysql时出现这种错误？

> ID：15542527
> 
> 赞同：0
> 
> 时间：2013-03-21T08:25:59.397
> 
> 标签：mysql, spring-mvc, blob

我在实体、私有 blob 图像中使用 blob 数据类型；// 创建了 getter 和 setter ....

我在控制器类中输入此编码

```
 @RequestMapping(value="save" , method=RequestMethod.POST)
public String save( @Valid Inpatient inpatient, RedirectAttributes redirectAttributes,
        @RequestParam("file") MultipartFile file) throws IOException
{

    System.out.println("Name:" + inpatient.getImagename());

    System.out.println("Filename :" + file.getName());

    Blob blob =(Blob) file.getInputStream();
      inpatient.setImagename(file.getOriginalFilename());
      inpatient.setImagefile(blob);

        inpatientService.save(inpatient); 
```

但我遇到了这种错误

> 创建名为 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0 的 bean 时出错

Mysql 我也只声明 blob .....

如果我使用

```
@Lob
Private Blob image; // get and set 
```

我遇到过这种错误

> java.lang.UnsupportedOperationException：Blob 不可缓存

# c++ - 使用 std::function 和 std::bind 时模板参数推导/替换失败

> ID：15542530
> 
> 赞同：28
> 
> 时间：2013-03-21T08:26:07.573
> 
> 标签：c++, function, templates, bind

在模板化成员函数中使用 std::function 时出现编译错误，以下代码是一个简单示例：

```
#include <functional>
#include <memory>
using std::function;
using std::bind;
using std::shared_ptr;

class Test {
public:
     template <typename T>
     void setCallback(function<void (T, int)> cb); 
};

template <typename T>
void Test::setCallback(function<void (T, int)> cb)
{
    // do nothing
}

class TestA {
public:
    void testa(int a, int b) {   }
};

int main()
{
    TestA testA;
    Test test;
    test.setCallback(bind(&TestA::testa, &testA, std::placeholders::_1, std::placeholders::_2));
    return 0;
} 
```

并带有以下编译错误：

> testtemplate.cpp：在函数“int main()”中：
> 
> testtemplate.cpp:29:92: 错误: 没有匹配函数调用'Test::setCallback(std::_Bind_helper)(int, int), TestA, const std::_Placeholder<1>&, const std::_Placeholder <2>&>::type)'</p>
> 
> testtemplate.cpp:29:92: 注意: 候选是: testtemplate.cpp:10:7: 注意: 模板无效 Test::setCallback(std::function)
> 
> testtemplate.cpp:10:7：注意：模板参数扣除/替换失败：
> 
> testtemplate.cpp:29:92：注意：'std::_Bind(TestA*, std::_Placeholder<1>, std::_Placeholder<2>)>' 不是从 'std::function' 派生的</p >

我正在使用 C++11 和 g++ 4.7

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-21T08:44:53.483

要找出问题，请分开声明：

```
auto f = bind(&TestA::testa, &testA, _1, _2); // OK
test.setCallback(f);                          // <<--- Error is here 
```

`setCallback`需要知道 type of`T`并且它不能从中推断出来`f`，所以给它一个 type

```
test.setCallback<TYPE>(f); // TYPE: int, float, a class, ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T18:28:23.597

您可以使用以下变体进行类型推导：

```
template<typename CALLBACK>
void setCallback(CALLBACK cb) {
  typedef CALLBACK::first_argument_type T;
  static_assert(is_same_type<CALLBACK,function<void(T,int)>>::value);
  ...
} 
```

这种方式 CALLBACK 可以通过查看参数来确定。如果 bind 实际上没有返回 std::function 而是可以转换为一个的东西，它可能会遇到麻烦。我不知道。

# javascript - 使用 jQuery 的 .click(function) 的基础知识？

> ID：15542534
> 
> 赞同：0
> 
> 时间：2013-03-21T08:26:27.863
> 
> 标签：javascript, jquery, html, css

一般来说，我对 jQuery 和 HTML 都很陌生。我只是想知道是否有人可以帮助我解决我正在尝试编写的这个小型 jQuery 脚本。

在我的 HTML 文档中，我有：

```
<body>
    <div class="banner"> 
       <nav> 
         <ul>
           <li id="home"><a href="#">Home</a></li>
           <li id="about"><a href="#">About</a></li>
           <li id="contact"><a href="#">Contact</a></li>
         </ul>
       </nav>
    </div>
<script type="text/javascript" src="my_script.js"></script>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
</body> 
```

我想在 jQuery 的帮助下，改变类横幅的整体外观，现在看起来像：

```
.banner {
    height:200px;
    width: 100%;
    position: absolute;
    top: 300px;
    background: lightblue;
} 
```

我也申请了这些样式：

```
nav ul {
    position: absolute;
    bottom: 0px;
    list-style-type: none;
    padding: 0px;
    margin: 0px;
}

nav ul li {
    display: block;
    float: left;
    line-height: 2.5em;
    padding-left:1em;
    margin-left:1em;
    border-left:1px dotted black;

} 
```

无论如何，我希望能够移动这个“横幅”，对其进行动画处理，使其有点滑动到页面顶部，定位〜顶部：10px。但只有点击`id="about"`或`id="contact"`，如果在访问过关于或联系后点击首页，它会回到原来的位置。

我开始编写我的`my_script.js`文件：

```
$(document.ready(function) {

   $("#about").click(function() {
    alert("hello!");

   }

}); 
```

看看我是否可以通过单击来显示警报，但显然，即使这对我来说也太难了。

如果有人可以就此给我一些建议，将不胜感激！另外，我正在使用`<div>`和`<nav>`标签。我猜我可以不用`<div>`标签并将类应用到我的`<nav>`标签上？（对 html5 也很陌生）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:33:38.577

首先，您的 jQuery 代码存在一些小的语法错误，可以在浏览器控制台中看到。如果您使用 Chrome，我建议您查看[DevTools 文档](https://developers.google.com/chrome-developer-tools/docs/overview)。

错误在更正后的代码中突出显示：

```
 missing right parenthesis
          |
          v
$(document).ready(function() {
   $("#about").click(function() {
    alert("hello!");
   }) // <-- missing right parenthesis
}) 
```

[**看演示**](http://jsfiddle.net/jCx6E/)

您还应该添加其中一个`return false`或[`event.preventDefault()`](http://api.jquery.com/event.preventDefault/)之后，`alert()`否则浏览器将在警报后跟随链接，这可能不是您想要发生的。

我还假设您已经在页面的某处包含了 jQuery 库，例如：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

或来自本地来源。

要回答问题的其他部分：

*   是的，你可以不用`<div>`. 从语义上讲，使用会更清楚`<nav>`
*   jQuery[`.slideUp()`](http://api.jquery.com/slideUp/)可以帮助动画/滑动，或者[`.animate()`](http://api.jquery.com/animate/).

动画`.banner`, 而不是`alert()`你可以使用

```
$('.banner').animate({top:'10px'}, 1000)
return false 
```

[**更新的演示**](http://jsfiddle.net/jCx6E/1/)

# perl - 为什么 encode_base64 的结果与 decode_base64 不对应？

> ID：15542536
> 
> 赞同：0
> 
> 时间：2013-03-21T08:26:36.663
> 
> 标签：perl

```
$ perl -MMIME::Base64 -e 'print encode_base64("syn_ack@163.com");'
c3luX2Fjay5jb20=
$ perl -MMIME::Base64 -e 'print decode_base64("c3luX2Fjay5jb20=");'
syn_ack.com 
```

编码结果无法解码为原始字符串，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:35:28.013

您必须转义`@`为`\@`或使用不同的引号。这是因为双引号被扩展，并被`@163`视为一个数组`@163`（即使这个名称不是有效的标识符）。

这按预期工作：

```
perl -MMIME::Base64 -e "print encode_base64('syn_ack@163.com');"
c3luX2Fja0AxNjMuY29t

perl -MMIME::Base64 -e 'print encode_base64("syn_ack\@163.com");'
c3luX2Fja0AxNjMuY29t

perl -MMIME::Base64 -e "print decode_base64('c3luX2Fja0AxNjMuY29t');"
syn_ack@163.com 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:34:58.233

切换引号。Perl 将在使用双引号时插入变量。

```
$ perl -MMIME::Base64 -e "print encode_base64('syn_ack@163.com');"
c3luX2Fja0AxNjMuY29t
$ perl -MMIME::Base64 -e "print decode_base64('c3luX2Fja0AxNjMuY29t');"
syn_ack@163.com 
```

[http://perlmeme.org/howtos/using_perl/interpolation.html](http://perlmeme.org/howtos/using_perl/interpolation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T09:57:56.080

当您使用 Perl 看到意外结果时，请确保已启用警告。

```
$ perl -w -MMIME::Base64 -e '打印 encode_base64("syn_ack@163.com");'
可能在 -e 第 1 行的字符串中意外插值 @163。
c3luX2Fjay5jb20=
```

单引号 ( `''`) 字符串中不会发生插值，因此您可以运行

```
perl -w -MMIME::Base64 -e 'print encode_base64('syn_ack@163.com');'
```

或留下双引号 ( `""`) 并转义`@`

```
perl -w -MMIME::Base64 -e 'print encode_base64("syn_ack\@163.com");'
```

要么输出

```
c3luX2Fja0AxNjMuY29t
```

解码给出

```
$ perl -w -MMIME::Base64 -e '打印 decode_base64("c3luX2Fja0AxNjMuY29t");'
syn_ack@163.com
```

# java - 我可以将新的 spring 3.2 与旧的 spring-security 3.0 一起使用吗

> ID：15542545
> 
> 赞同：4
> 
> 时间：2013-03-21T08:27:34.303
> 
> 标签：java, spring, spring-security, version, compatibility

我想将[Spring 框架](http://www.springsource.org/)从 3.0 升级到 3.2，但想暂时跳过升级[spring-security](http://static.springsource.org/spring-security/site/)。

我可以将新的 spring 3.2 与旧的 spring-security 3.0 一起使用吗？

使用的 Spring 模块是 spring-core、spring-orm、spring-mvc（仅用于 Web 服务）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T09:52:38.443

我们正在成功运行基于 Spring 3.2.1.RELEASE 和 Spring Security 3.1.3.RELEASE 的应用程序。我们在设置时没有任何特别的问题。

不幸的是，我没有任何消息来源表明这是官方支持的。

如果你在你的项目中使用 Maven，你应该强制版本以避免在你的类路径中有多个版本的相同 jar：

```
<properties>
    <spring.version>3.2.1.RELEASE</spring.version>
    <spring-security.version>3.1.3.RELEASE</spring-security.version>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context-support</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${spring-security.version}</version>
        </dependency>
        <!-- Etc. (specify a fixed version for each Spring jar) -->
    </dependencies>
</dependencyManagement> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-28T10:06:41.063

我正在运行稍微不同的组合 - **Spring 3.1.4**和**Spring Security 3.0.5**，它也可以正常工作：

```
<properties>
    <spring.version>3.1.4.RELEASE</spring.version>
    <spring.security.version>3.0.5.RELEASE</spring.security.version>
</properties>

<dependencies>
    <!-- SPRING -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${spring.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.flex</groupId>
        <artifactId>spring-flex</artifactId>
        <version>1.0.3.RELEASE</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-web</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-webmvc</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.security.version}</version>
    </dependency>

    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jms</artifactId>
        <version>${spring.version}</version>
    </dependency>
</dependencies> 
```

# c# - 文件被另一个进程异常C#使用

> ID：15542547
> 
> 赞同：0
> 
> 时间：2013-03-21T08:27:36.897
> 
> 标签：c#, .net, smtp, mailmessage

我创建了一个从数据库中的信息生成 excel 文件的应用程序。这些文件保存在我的硬盘上的一个文件夹中。

之后，我附上文件并通过邮件发送。当我生成另一批文件时，我删除旧文件，然后创建新文件。

我的问题是当我生成了一批文件然后发送它们，并且我想生成另一批文件时，我无法删除其中一个旧文件，因为邮寄方法仍在保留其中一个 excel 文件。

这是我的代码：

```
public void SendMailedFilesDKLol() {
    string[] sentFiles=Directory.GetFiles(some_Folder);

    if(sentFiles.Count()>0) {
        System.Net.Mail.SmtpClient client=new System.Net.Mail.SmtpClient("ares");
        System.Net.Mail.MailMessage msg=new System.Net.Mail.MailMessage();

        msg.From=new MailAddress("system@lol.dk");
        msg.To.Add(new MailAddress("lmy@lol.dk"));
        msg.Subject="IBM PUDO";

        msg.Body=
            sentFiles.Count()+" attached file(s) has been sent to the customer(s) in question ";

        msg.IsBodyHtml=true;

        foreach(string file in sentFiles) {
            Attachment attachment=new Attachment(file);
            msg.Attachments.Add(attachment);
        }

        client.Send(msg);
    }
} 
```

我试图处理客户端元素，但这没有帮助。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:41:34.790

System.Net.Mail.MailMessage 和 System.Net.Mail.SmtpClient 都是 IDisposable 类。您可以尝试以下方法，

```
 using (System.Net.Mail.SmtpClient client = new System.Net.Mail.SmtpClient("ares"))
    {
       using (System.Net.Mail.MailMessage msg = new System.Net.Mail.MailMessage())
       {
          msg.From = new MailAddress("system@lol.dk");
          msg.To.Add(new MailAddress("lmy@lol.dk"));
          msg.Subject = "IBM PUDO";
          msg.Body = sentFiles.Count() + " attached file(s) has been sent to the customer(s) in question ";
          msg.IsBodyHtml = true;
          foreach (string file in sentFiles)
          {
              Attachment attachment = new Attachment(file);
              msg.Attachments.Add(attachment);
          }

          client.Send(msg);
        }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:39:31.557

您需要处置附件对象。使用 LINQ 的示例：

```
public void SendMailedFilesDKLol() {
    string[] sentFiles=Directory.GetFiles(some_Folder);

    if(sentFiles.Count()>0) {
        System.Net.Mail.SmtpClient client=new System.Net.Mail.SmtpClient("ares");
        System.Net.Mail.MailMessage msg=new System.Net.Mail.MailMessage();

        msg.From=new MailAddress("system@lol.dk");
        msg.To.Add(new MailAddress("lmy@lol.dk"));
        msg.Subject="IBM PUDO";

        msg.Body=
            sentFiles.Count()+" attached file(s) has been sent to the customer(s) in question ";

        msg.IsBodyHtml=true;

        var attachments = sentFiles.Select(f => new Attachment(f)).ToList();

        attachments.ForEach(a => msg.Attachments.Add(a));

        client.Send(msg);

        attachments.ForEach(a => a.Dispose());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:31:44.460

听起来您在生成 excel 文件时可能没有关闭文件流，或者在尝试通过电子邮件发送它们时在 excel 中打开它们。

请您显示生成excel文件的代码。

# multilingual - 设置多语言 wordpress 网站

> ID：15542548
> 
> 赞同：0
> 
> 时间：2013-03-21T08:27:44.230
> 
> 标签：multilingual, wordpress

我正在尝试使用 wordpress 建立一个多语言网站。我浏览了[http://codex.wordpress.org/Multilingual_WordPress#Plugins_that_direct_you_to_external_translation_services](http://codex.wordpress.org/Multilingual_WordPress#Plugins_that_direct_you_to_external_translation_services)并决定使用这个选项插件，如 Multisite Language Switcher 和新人 Multilingual Press 通过来回 ping 将每种语言的单独 WordPress 网络（多站点）安装链接在一起。 .

现在我安装了多语种印刷机并建立了一个网络。我网站的网址是 wordpress.private.net，接下来是 it.wordpress.private.net。两个域都来自同一个文件夹。但是当我访问 it.__ 网站时，它仍然以英语显示，而且没有所有帖子。

我在网络仪表板上收到此错误

**您没有设置任何博客关系！您必须先设置它们才能使用多语种印刷机。为此，请转到网络 » 站点 » 并选择要编辑的博客。然后转到“多语言印刷机”选项卡并设置关系。**

但是没有选项可以在“多语言新闻”选项卡中设置关系。请指导我哪里出错了？

也欢迎任何其他设置方式。

我的主要目的是以两种语言运行我的 wordpress 网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:16:42.830

我也在用两种语言开发一个网站。

我没有使用你正在使用的东西，所以在这方面我无法帮助你。

对于我的项目，我安装了[qTranslate 插件](http://wordpress.org/extend/plugins/qtranslate/)，到目前为止我还没有遇到任何问题。

在插件设置中，您指定要使用的语言以及其他设置，例如语言在 URL 中的显示方式（?lang=en，/en/ 在 URL 前面，[http](http://en.yoursite.com) ://en.yoursite.com ）

当您编辑帖子或页面时，您将在编辑器中添加一个选项卡，每种语言都有一个选项卡，因此非常易于使用。

它还支持qTranslate Services，只需点击几下即可使用专业的人工翻译服务，但我还没有使用过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T19:30:22.703

一般注意事项：请勿使用 Google 翻译自动翻译您的网页。这基本上是向谷歌索引发送垃圾邮件。如果您想自动翻译您的页面，请使用谷歌翻译小部件。你也可以在谷歌指南的某个地方读到。

关于你的插件：qTranslate 很好而且很简单。但它确实将所有翻译存储到一篇文章中。因此，如果您稍后决定更改为其他插件，那您就完蛋了。

我听说过多语言，但我认为它可能仍然有点不稳定。

最常用的是WPML。可能不是最好的，也不是免费的。但它有效，我有很多客户很高兴地使用它。

但同样，不要自动翻译您的页面。这是没用的，会让你排名下降。

# android - android播放通知有时没有声音

> ID：15542549
> 
> 赞同：0
> 
> 时间：2013-03-21T08:27:46.100
> 
> 标签：android, notifications

好的，我的一些习惯说我的应用程序**有时**在收到 GCM 推送消息时没有播放通知声音......（手机是三星 Galaxy S3，我很确定手机处于 RING 模式，而不是静音或振动模式)

我想也许他们没有选择任何文件作为通知声音，所以我将代码更改为仅播放默认声音。

这是我播放默认通知声音的代码：

```
 Ringtone r=null;
    try
    {
      Uri uri=RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
      r=RingtoneManager.getRingtone(getApplicationContext(), uri);
      r.play();
    }
    catch(Exception e)
    {e.printStackTrace();} 
```

所以我得到了他们的s3，看看发生了什么。

但是，没有任何错误消息，没有任何错误堆栈出现，它只是没有播放默认通知声音......

我尝试过的 Android 设备：

*   HTC 蝴蝶（与美国称为 DroidDNA 的模块完全相同）
*   HTC DesireHD
*   宏达欲望
*   宏碁 A100(7" 平板电脑)
*   三星note2

以上 5 台设备都在播放通知声音。

**为什么三星s3有时**没有播放提示音......

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T11:02:20.343

我仍然不知道为什么三星的安卓手机会导致这个问题，而 HTC 和宏碁运行良好

我确实使用以下代码解决了这个问题：

```
PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
Notification notification = new Notification(R.drawable.icon_notify, tickerText, when);
if (allow play notify) {
    notification.defaults |= Notification.DEFAULT_SOUND;
}
if (allow vibrate) {
    notification.defaults |= Notification.DEFAULT_VIBRATE;
} 
```

所以我想我无法将自己的通知声音附加到我的应用程序

# google-ads-api - 开发者令牌批准？

> ID：15542552
> 
> 赞同：0
> 
> 时间：2013-03-21T08:27:58.493
> 
> 标签：google-ads-api

通常谷歌需要多长时间才能批准 GAdwords 开发者令牌？我在 1 月份向 Google Adwords API 团队发送了一封电子邮件，但还没有收到他们的回复。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-24T18:37:39.583

我肯定会跟进，可能错过了链条中的一个环节。然而，这可能需要几个月的时间——这对我来说确实如此，尽管营销团队反复锤击谷歌以获得结果。我工作的公司每年在 AdWords 上花费数百万美元，这并不一定会让我们成为一条“大鱼”……但如果你是一个孤独的开发者，可能需要更长的时间。

# die - 没有在php中打开或死亡命令

> ID：15542553
> 
> 赞同：0
> 
> 时间：2013-03-21T08:28:06.090
> 
> 标签：die

我已经编写了这些代码。但他们没有很好地工作。它有一些像这样的错误：

`Warning: mysqli_connect() [function.mysqli-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in C:\wamp\www...`

有时会显示`T_EXIT`错误。我的问题在于“或死”命令。假设它无法连接到数据库。然后它应该打开“或死亡”并终止程序。但它没有这样做。我该如何解决？

```
$dbc = mysqli_connect('localhost', 'user', 'pass', 'table')
 or die('Error connecting to MySQL server.'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:29:30.427

`My problem is in "or die" command. Suppose it cannot connect to database. Then it should switch on "or die" & terminates the the program.`

答案直接来自[PHP 手册](http://www.php.net/manual/en/mysqli.construct.php)

```
$link = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');

if (!$link) {
    die('Connect Error (' . mysqli_connect_errno() . ') '.mysqli_connect_error());
} 
```

# qt - 在 qt .pro 字段中添加 LDFLAGS

> ID：15542556
> 
> 赞同：6
> 
> 时间：2013-03-21T08:28:28.287
> 
> 标签：qt, shared-libraries

如何在 qt .pro 字段中添加 LDFLAGS？

考虑库文件夹和共享库（.so）位于 dir_path 文件夹中。

例如，添加这一行并不能解决问题 **LIBS+= -Ldir_path -llibrary_name**

有什么建议么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T12:37:06.073

qmake 有`QMAKE_LFLAGS`它的变量。

[您可以在此处](http://qt-project.org/doc/qt-4.8/qmake-variable-reference.html)阅读有关 qmake 变量的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T18:31:27.527

确保您使用“TEMPLATE = app”来获得正确的行为。使用“lib”模板会忽略 LIBS 变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-15T11:40:27.650

根据您的要求使用 QMAKE_LDFLAGS。

# php - 如何使用 php 从较长的链接中提取链接？

> ID：15542559
> 
> 赞同：0
> 
> 时间：2013-03-21T08:28:35.163
> 
> 标签：php, regex

我想知道是否有人知道从另一个链接中提取链接的最佳方法是什么，这是一个示例：

如果我有以下格式的链接：

```
http://www.youtube.com/watch?v=35HBFeB4jYg   OR
http://it.answers.yahoo.com/question/index?qid=20080520042405AApM2Rv  OR
https://www.google.it/search?q=rap+tedesco&aq=f&oq=rap+tedesco&aqs=chrome.0.57j62l2.2287&sourceid=chrome&ie=UTF-8#hl=en&sclient=psy-ab&q=migliori+programatori&oq=migliori+programatori&gs_l=serp.3..0i19j0i13i30i19l3.9986.13880.0.14127.14.10.0.4.4.0.165.931.6j4.10.0...0.0...1c.1.7.psy-ab.tPmiWRyUVXA&pbx=1&bav=on.2,or.r_cp.r_qf.&fp=ffc0e9337f73a744&biw=1280&bih=699 
```

我将如何只提取这样的网页：

```
http://www.youtube.com
http://it.answers.yahoo.com
https://www.google.it 
```

我想知道我是否可以使用 PHP 使用什么正则表达式来实现这一点，正则表达式也是要走的路吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:30:09.733

有一个用于解析 URL 的 PHP 函数：[`parse_url`](http://php.net/manual/en/function.parse-url.php)

```
$url = 'http://it.answers.yahoo.com/question/index?qid=20080520042405AApM2Rv';
$p = parse_url($url);
echo $p["scheme"] . "// . "$p["host"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:39:11.510

使用函数[parse_url](http://php.net/manual/en/function.parse-url.php)。

```
$link = "https://www.google.it/search?q=rap+tedesco";
$parseUrl = parse_url($link);
$siteName = $parseUrl['scheme']."://". $parseUrl['host']; 
```

使用**正则表达式**。

```
preg_match('@http(s?)://([\w]+\.){1}([\w]+\.?)+@',$link,$matches);
echo $matches[0]; 
```

[Codeviper 演示。](http://codepad.viper-7.com/jJon1h)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:31:11.047

您只想拥有页面的域，在 PHP 中有一个名为[parse_url](http://php.net/manual/en/function.parse-url.php)的函数可以提供帮助

# asp.net - Inline ReportViewer PDF 无法在新窗口中打开超链接

> ID：15542562
> 
> 赞同：0
> 
> 时间：2013-03-21T08:28:50.950
> 
> 标签：asp.net, pdf, reportviewer

我在网页（Asp.Net）中有一个由 ReportViewer 生成的旧报告。已更改，因此可以通过以下方式在同一窗口中将报告生成为内联 PDF：

```
 byte[] bytes = Master.ReportViewer.LocalReport.Render(
           "PDF", deviceInfo, out mimeType, out encoding,
            out extension,
           out streamids, out warnings);

        Response.ClearHeaders();
        Response.ClearContent();
        Response.Clear();
        Response.ContentType = mimeType;
        Response.AddHeader("Content-Disposition", "inline; filename=Report." + extension);
        Response.BinaryWrite(bytes);
        Response.Flush();
        Response.End(); 
```

目的：大型报告往往会使网页无响应。内联 PDF 没有同样的问题。

问题：超链接只能在同一个窗口中打开。

有人有同样的问题吗？或者有一个简单的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:35:42.503

你的链接是什么样子的？

您是否将超链接的目标设置为“_blank”？

# android - 将相对布局放在底部

> ID：15542563
> 
> 赞同：0
> 
> 时间：2013-03-21T08:28:58.207
> 
> 标签：android, android-linearlayout, android-relativelayout

我尝试将我的 google admob 放在屏幕底部，但它似乎被推了。我搜索了它，建议将它放在相对布局中并将其与 parentbottom 对齐。我这样做了，但它似乎不起作用..我的总体结构错了吗？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backrepeat"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="35dp"
        android:background="#25ab89"
        android:orientation="horizontal"
        android:weightSum="4" >

        <LinearLayout
            android:id="@+id/linearBack"
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:clickable="true"
            android:gravity="center"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/ivBackButton"
                android:layout_width="18dp"
                android:layout_height="18dp"
                android:src="@drawable/arrow" />
        </LinearLayout>

        <TextView
            android:id="@+id/tvScoreBoard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="2"
            android:gravity="center"
            android:text="level"
            android:textColor="#ffffff"
            android:textSize="18dp" />

        <LinearLayout
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:orientation="vertical"
            android:paddingRight="2dp" >

            <TextView
                android:id="@+id/tvScoreInfoOne"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="0/30"
                android:textColor="#ffffff"
                android:textSize="12dp" />

            <TextView
                android:id="@+id/tvScoreInfoTwo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="score:"
                android:textColor="#ffffff"
                android:textSize="12dp" >
            </TextView>
        </LinearLayout>
    </LinearLayout>

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="5dp"
        android:background="@drawable/backrepeat"
        android:columnWidth="100dp"
        android:gravity="center"
        android:horizontalSpacing="2dp"
        android:listSelector="@null"
        android:numColumns="4"
        android:stretchMode="columnWidth"
        android:verticalSpacing="2dp" >
    </GridView>

    <RelativeLayout xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
        android:id="@+id/InnerRelativeLayout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="320dp"
            android:layout_height="50dp"
            android:layout_alignParentBottom="true"
            android:layout_marginTop="6dp"
            ads:adSize="BANNER"
            ads:adUnitId="a150be111791eae"
            ads:loadAdOnCreate="true" />
    </RelativeLayout>

</LinearLayout> 
```

编辑

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/backrepeat"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="35dp"
        android:background="#25ab89"
        android:orientation="horizontal"
        android:weightSum="4" 
        android:id="@+id/llOneTop">

        <LinearLayout
            android:id="@+id/linearBack"
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:clickable="true"
            android:gravity="center"
            android:orientation="vertical" >

            <ImageView
                android:id="@+id/ivBackButton"
                android:layout_width="18dp"
                android:layout_height="18dp"
                android:src="@drawable/arrow" />
        </LinearLayout>

        <TextView
            android:id="@+id/tvScoreBoard"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="2"
            android:gravity="center"
            android:text="level"
            android:textColor="#ffffff"
            android:textSize="18dp" />

        <LinearLayout
            android:layout_width="0px"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:gravity="right"
            android:orientation="vertical"
            android:paddingRight="2dp" >

            <TextView
                android:id="@+id/tvScoreInfoOne"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="0/30"
                android:textColor="#ffffff"
                android:textSize="12dp" />

            <TextView
                android:id="@+id/tvScoreInfoTwo"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="score:"
                android:textColor="#ffffff"
                android:textSize="12dp" >
            </TextView>
        </LinearLayout>
    </LinearLayout>

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridView1"
        android:layout_below="@+id/llOneTop"
        android:layout_above="@+id/InnerRelativeLayout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="5dp"
        android:background="@drawable/backrepeat"
        android:columnWidth="100dp"
        android:gravity="center"
        android:horizontalSpacing="2dp"
        android:listSelector="@null"
        android:numColumns="4"
        android:stretchMode="columnWidth"
        android:verticalSpacing="2dp" >
    </GridView>

    <RelativeLayout 
        android:id="@+id/InnerRelativeLayout"
        android:layout_width="wrap_content"

        android:layout_alignParentBottom="true"
        android:layout_height="wrap_content">

        <com.google.ads.AdView xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
            android:id="@+id/adView"
            android:layout_width="320dp"
            android:layout_height="50dp"
            android:layout_alignParentBottom="true"
            android:layout_marginTop="6dp"
            ads:adSize="BANNER"
            ads:adUnitId="a150be111791eae"
            ads:loadAdOnCreate="true" />
    </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:33:57.797

关键是你的根布局应该是a `RelativeLayout`，然后你可以设置你的banner的`android:layout_alignParentBottom="true"`。现在`AdView`有一个`RelativeLayout`仍然在 a 中的父级`LinearLayout`。希望这很清楚。

# api - 如何从彭博专业人士那里检索任何类型的数据

> ID：15542565
> 
> 赞同：2
> 
> 时间：2013-03-21T08:29:08.173
> 
> 标签：api, bloomberg

我想在彭博下载许多公司的收益电话。我在互联网上找不到很多关于 Bloomberg API 的信息，所以在深入研究之前，我想知道您是否认为可以自动执行此任务，或者 Bloomberg 是否不允许这样做。我也听说过“sendkeys”功能，你认为我可以用它来找回来电吗？

# jquery - 使用锚标签显示多个 div

> ID：15542569
> 
> 赞同：0
> 
> 时间：2013-03-21T08:29:19.600
> 
> 标签：jquery, html

```
<ul class="dropdown-menu">
    <li><a href="#listjobsDiv" id="listJob">listJobs</a></li>
    <li><a href="#newJobDiv" id="newJOB">Add new Job</a></li>
    <li><a href="#editJobDiv" id="editJOB">Edit Job</a></li>
    <li><a href="#deleteJobDiv">Delete Job</a></li>
</ul>

<div id="adminBody">
    <div id="listjobsDiv" style="display:none">List Jobs Here</div>
    <div id="newJobDiv" style="display:none">New Job Here</div>
    <div id="editJobDiv" style="display:none">Edit Job Here</div>
    <div id="deleteJobDiv" style="display:none">Delete Job Here</div>
</div> 
```

当我单击使用 jQuery 的相应链接时，我试图显示其中一个部分，如下`div`所示：`adminBody`

```
$(document).ready(function() {  
    $("#newJOB").click(function() { 
        alert('newJob'); 
        $("#newJobDiv").css('display', 'block'); 
    });  
});

$(document).ready(function() {  
    $("#editJOB").click(function() { 
        alert('hi'); 
        $("#editJobDiv").css('display', 'block');   
    });  
}); 
```

但问题是当我单击链接时，前一个 div 也显示在`adminBody`div 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:33:30.310

您应该先隐藏它们，然后只显示有趣的。

就像是`$("div[id$='Div']").hide()`

注意：这将选择 ID 以“Div”结尾的所有 div。您可能希望对此更准确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:34:27.287

您必须再次隐藏以前的 div。

```
$("#adminBody div").hide(); 
```

你可以 .show() 和 hide() 代替。

```
 $("#newJobDiv").show(); 
```

看看这个工作示例：http: [//jsfiddle.net/bmems/](http://jsfiddle.net/bmems/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:38:23.770

首先，我建议您将您的重命名`listJobsDiv`为`listJobDiv`，然后将您的最后一个链接命名为`deletejob`：

`<li><a href="#deleteJobDiv" id="deleteJob">Delete Job</a></li>`

然后你可以做这样的事情：

```
 $(document).ready(function () {
        var adminBody = $("#adminBody");
        $(".dropdown-menu a").click(function () {
            adminBody.find('div').hide();
            var id = this.id;
            $("#" + id + "Div").show();
        });
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:36:08.530

试试这个：

```
$(document).ready(function() {  
  $(".dropdown-menu a").click(function (e) {
     e.preventDefault();
     $div = $(this).attr('href');
     $('#adminBody').children().hide();
     $('#adminBody').find($div).show();
  });  
}); 
```

### [试用小提琴](http://jsfiddle.net/3rSNf/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T08:33:08.220

其他 div 也在显示，因为它们的 display 属性仍然是`block`. 您需要将其他 div 的 css 设置为`display:none`

# git - 如何在git中添加多个文件

> ID：15542571
> 
> 赞同：3
> 
> 时间：2013-03-21T08:29:26.213
> 
> 标签：git, ubuntu, terminal, git-add

我在一个文件夹中有 4 个文件。我修改了其中的 3 个。如何一次添加和推送修改后的文件。将“git add .” 在这里工作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T08:30:59.880

```
git add .
git commit -m "message"
git push 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:32:19.187

**更新**
是在这种情况下，您可以简单地使用`git add .`. 您可以使用 . 检查哪些文件已被修改`git status`。如果只显示*你的*三个文件，一个简单`git add .`的就足够了，然后使用`git push`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-21T16:22:23.590

1）您只能添加三个修改过的文件：

```
git add file1 file2 file3 
```

2）或者您可以添加所有文件

```
git add . 
```

3）或者如果它们都是相同的类型并且说第四个具有不同的扩展名，那么您也可以使用以下方法添加三个文件：

```
git add *.js   //example for files with Javascript .js extension 
```

然后做 :`git commit -m "message"` 然后一个 :`git push`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-01T08:56:58.430

`git add -A`阶段所有；

`git add .`新阶段和修改阶段，没有删除；

`git add -u`阶段修改和删除，没有新的。

# opencv - 我可以使用 open cv 找到两张脸之间的匹配百分比吗？

> ID：15542574
> 
> 赞同：0
> 
> 时间：2013-03-21T08:29:32.797
> 
> 标签：opencv, ios6, ios5.1, core-image

我正在开发一个需要两个面孔之间匹配百分比的 iOS 应用程序。我在opencv中找到了一些人脸识别的例子，但我找不到百分比计算。

# android - 将移动设备显示到桌面

> ID：15542575
> 
> 赞同：0
> 
> 时间：2013-03-21T08:29:33.233
> 
> 标签：android, screen

我们设计了一个移动应用程序，并希望为大约 20 人举办一次演示。我们使用 Android 的三星 Galaxy S3 并希望将显示 1:1 放到投影仪上。

有任何想法吗？

最好的问候， KjubE

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:38:01.067

我们使用[Droid@Screen](http://droid-at-screen.ribomation.com/)应用程序来满足我们的需求。请看一看。只要安装了 adb 和设备驱动程序，任何设备都可以工作。您也不必扎根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T10:39:07.770

有一个简单的方法：

1.  [从https://code.google.com/p/android-screen-monitor/downloads/detail?name=ASM_2_50.zip&can=2&q=](https://code.google.com/p/android-screen-monitor/downloads/detail?name=ASM_2_50.zip&can=2&q=)下载 asm.jar 文件

2.  打开命令提示符 Enter

    ```
    C:\> adb devices 
    ```

3.  接着

    ```
    C:\>cd Users\santhosh\Desktop\ASM_2_50
    C:\>java -jar asm.jar 
    ```

4.  然后使用您的移动设备 ID 打开提示，然后单击确定按钮。

# php - 将 PHP 数组编码为 json

> ID：15542579
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:29:46.437
> 
> 标签：php, json

我想编码我的 php 数组

```
Array ( 
         [0] => Laravel, 
         [1] => hallo  
      ) 
```

到一个`json`看起来像这样的数组

```
{"val":["Laravel","hallo"]} 
```

有人知道我是怎么做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:36:17.803

试试这个 ：

```
$array    = array("val"=>$your_array);
$json_str = json_encode($array); 
```

参考： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:35:54.177

为您的目的使用 json_encode()

```
<?php
 $array = array('Laravel', 'hello');
 $json_encoded_array = json_encode($array);
 var_dump($json_encoded_array)
?> 
```

文档： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:31:04.010

使用`json_encode()`，见文档： http: [//php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:33:25.690

你需要`json_encode`.

```
json_encode($array) 
```

# c# - 使用 ADFS over WCF 的桌面应用程序（声明身份验证），为 issuetokenmixedsymmetricbasic256 提供通用“失败”代码

> ID：15542585
> 
> 赞同：1
> 
> 时间：2013-03-21T08:30:04.483
> 
> 标签：c#, .net, wcf, adfs2.0, adfs

有很多东西要讲，所以我会尽量保持结构化，因为所有优秀的程序员都应该......忍受我。

# 我的环境

*   .NET 3.5 SP1 智能客户端
*   使用 WCF+SOAP over HTTP 与服务器通信以进行业务逻辑/数据访问
*   通常使用自定义（用户名+密码）或 Windows 身份验证方案
*   当前的工作旨在扩展以包括新的基于声明的身份验证方案，以促进使用 ADFS 的 SSO

# 至今...

*   使用 ws2007FederationHttpBinding 绑定的主要服务端点，通过 trust/13/issuedtokenmixedsymmetricbasic256 ADFS 2.0 端点使用消息安全性设置配置
*   使用 IssuedTokenOverTransport 配置到 HTTPS trust/13/usernamemixed ADFS 2.0 端点的颁发者端点
*   服务已指定 federateServiceHostConfiguration 服务行为
*   创建临时证书颁发机构 (CA) 证书
*   创建由 CA 签署的临时证书
*   已安装证书（包括私钥）并可供 IIS 应用程序池进程帐户使用
*   更新了服务 WCF 配置以使用 X509 证书
*   使用新应用程序自己的客户端方案/模式修改客户端，以编程方式设置通道工厂以忽略临时证书引起的错误并禁用证书吊销检查
*   用户名/密码凭据已成功添加（通过标准 WCF ClientCredentials 对象）到令牌请求的 SOAP 信封
*   Token由usernamemixed端点成功生成并返回给客户端

# 我的问题

*   在发出令牌之后，对发出令牌混合对称基本 256 端点的后续调用将失败，并显示无法验证消息安全性的一般错误消息。对 SOAP 信封结果的检查除了简单的“失败”结果枚举值之外，根本没有提供任何信息
*   ADFS 2.0 服务器上已启用完全跟踪，但在事件日志或事件跟踪中根本没有记录任何事件以进一步诊断
*   到目前为止，无法配置为以联合方式工作；令牌在“测试”环境（内部 ADFS 服务器而不是远程服务器）中通过 usernamemixed 端点成功发出。在尝试获取令牌时，使用“live”环境会给出一个简单的无法解释的 401 HTTP 状态代码，无论是使用带有确认和有效凭据的 usernamemixed，还是 windowsmixed
*   通常：来自 Microsoft 或其他来源的资源要么非常稀缺，要么非常特定于一种情况，而且在某些情况下，完全错误或具有误导性

# 所以已经问了一个问题，doofus

为什么WCF获取token后调用issuedtokenmixedsymmetricbasic256会失败？如何诊断结果？除了我已经做的——在服务主机配置中启用所有跟踪标志，检查事件日志和事件跟踪数据，我还能做什么？

请注意，如果您要建议指向截屏视频/指南/博客/看似包罗万象的 MSDN 文章的链接，请停止。我相信我已经找到了它们，都尝试了它们，而我现在需要的是——如果你能帮助我——是对上述问题的回答。不是一般资源。

# c# - NetworkStream.Read 在空字节/秒后没有获得所有字节

> ID：15542593
> 
> 赞同：2
> 
> 时间：2013-03-21T08:30:21.090
> 
> 标签：c#, sockets, null, byte, networkstream

我正在制作一个能够远程控制诸如相机（Scopia XT5000 - Radvision）之类的设备的应用程序。我需要向设备发送初始化命令，以便能够发送控制设备的 AT 命令。

**一旦我发送初始化命令，服务器应该回复这个：**
**In String**

> ??\0\0\0 AT[<IP400C9XT5000-03.01.00.0028\r??\0\0\0OK\r

**以字节为单位**

> 170 170 0 0 0 32 65 84 91 60 73 80 52 48 48 67 57 88 84 53 48 48 48 45 48 51 46 48 49 46 48 48 46 48 48 50 56 13 170 170 7 0 130 5

当我在这里休息时，我尝试调试并获得这些值

> **serverStream.Read(inStream, 0, inStream.Length);**

但是每次我在没有调试或中断的情况下运行程序时，它都会给我不同的字符串和字节。就像这样
**在字符串中**

> ??\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0 \0\0\0\0\0\0

**以字节为单位**

> 170 170 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0

可能是什么问题呢？
是：
- Null 字节？
- 回车？“\r”？
- 多行？

**完整代码：**

```
{
    TcpClient clientSocket = new System.Net.Sockets.TcpClient();

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        msg("Client Started");                        
    }

    public void openSocket()
    { 
        if (clientSocket.Connected)
        {
            clientSocket.Close();
        }
        clientSocket = new System.Net.Sockets.TcpClient();
        clientSocket.Connect("10.0.3.202", 55003);
        label1.Text = "Client Socket Program - Server Connected ...";

    }

    private void btnSend_Click(object sender, EventArgs e)
    {
        openSocket();
        //header bytes and initAT bytes are the initialization command for me to send AT commands
        msg("Init: ");
        NetworkStream serverStream = clientSocket.GetStream();
        //header bytes to enable AT command
        byte[] header = {170,170,0,0,0,8 };
        serverStream.Write(header, 0, header.Length);
        serverStream.Flush();
        //Initialize the Interface
        byte[] initAT = System.Text.Encoding.ASCII.GetBytes("AT[&IPV\r"); 
        serverStream.Write(initAT,0, initAT.Length);
        serverStream.Flush();

        byte[] inStream = new byte[10025];
        serverStream.Read(inStream, 0, inStream.Length);
        string returndata = System.Text.Encoding.ASCII.GetString(inStream);
        msg("Data from Server : " + returndata);
    }

    private void btnRight_Click(object sender, EventArgs e)
    {
        msg("Right : ");
        NetworkStream serverStream = clientSocket.GetStream();
        //AT Command to move the main camera to right
        byte[] outStream3 = System.Text.Encoding.ASCII.GetBytes("AT[&SY011R\r");
        serverStream.Write(outStream3, 0, outStream3.Length);

        byte[] inStream2 = new byte[48];
        serverStream.Read(inStream2, 0,inStream2.Length);
        string returndata = System.Text.Encoding.ASCII.GetString(inStream2);            
        msg(returndata);
    }           

    public void msg(string mesg)
    {
        textBox1.Text = textBox1.Text + Environment.NewLine + " >> " + mesg;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:33:24.933

`Read`返回读取的字节数。您有一个 10025 字节的缓冲区，但在`Read`. 您可能需要循环，直到您想要的所有字节都被读取。

它在您调试时起作用，因为花费了额外的时间，网络流有时间完全接收结果，所以当`Read`被调用时，所有数据都可用并被放入缓冲区。

参考：http: [//msdn.microsoft.com/en-gb/library/system.io.stream.read.aspx](http://msdn.microsoft.com/en-gb/library/system.io.stream.read.aspx)

# css - 单个页面上不同大小的菜单按钮

> ID：15542601
> 
> 赞同：0
> 
> 时间：2013-03-21T08:30:55.273
> 
> 标签：css

我的页面上有 3 个菜单按钮。我想为每个人设置不同的宽度。为此，我做了以下事情：

```
<style>
  .ui-menu {
    width : 180px;
  }
</style> 
```

但是，这会将所有菜单按钮的宽度设置为 180 像素。我想分别有 180px、140px 和 160px 的宽度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:04:48.043

尝试这个：

```
<style>
.ui-menu:nth-child(1){
width : 180px;
}

.ui-menu:nth-child(2){
width : 140px;
}

.ui-menu:nth-child(3){
width : 160px;
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:32:27.487

您应该对每个人都有一些唯一的标识符（例如 an `id`）并使用它来设置它们的样式。或者，您可以使用 CSS3 `:nth-child`([文档](http://www.w3schools.com/cssref/sel_nth-child.asp)) 选择器，但对于您的需求来说，这可能是多余的。

# java - 运行时调试错误

> ID：15542603
> 
> 赞同：0
> 
> 时间：2013-03-21T08:31:02.993
> 
> 标签：java, android, google-maps

我已经尝试了针对我之前的问题给出的两种解决方案，这在谷歌地图中给了我错误，原因是我在我的示例中混合了 API1 和 API2 代码结构，但是在我得到问题的这个原因之后，我再次创建了 2 个示例一个用于 API1，第二个用于 API2，但在任何示例中我都没有得到解决方案，它无法将我的应用程序运行到平板电脑中，并给我带来如下问题：

```
"Application stopped unexpectedly.please try again". 
```

所以任何人都可以在我错的地方帮助我，我将把我的 API1 示例和 API2 示例的整个代码放在这个论坛上。

* * *

## 谷歌地图 API1 示例

**AndroidManifest**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.googlemapapi1_21march"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="7" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<application android:icon="@drawable/ic_launcher" android:label="@string/app_name">
    <uses-library android:name="com.google.android.maps" />
    <activity android:label="@string/app_name" android:name=".MapMarkerActivity">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>
</manifest> 
```

**主布局.XML**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="fill_parent" 
android:layout_height="fill_parent">

<com.google.android.maps.MapView 
    android:id="@+id/mapView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:enabled="true"
    android:clickable="true"
    android:apiKey="0l4sCTTyRmXTNo7k8DREHvEaLar2UmHGwnhZVHQ"
    />

<LinearLayout android:id="@+id/zoom" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_alignParentBottom="true" 
    android:layout_centerHorizontal="true" 
    /> 
</RelativeLayout> 
```

**MainActivity.java**

```
public class GM1_21_MarchMainActivity extends MapActivity {

    MapView mapView; 

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gm1_21__march_main);

        mapView = (MapView) findViewById(R.id.mapView);
        LinearLayout zoomLayout = (LinearLayout)findViewById(R.id.zoom);  
        View zoomView = mapView.getZoomControls(); 

        zoomLayout.addView(zoomView, 
            new LinearLayout.LayoutParams(
                LayoutParams.WRAP_CONTENT, 
                LayoutParams.WRAP_CONTENT)); 
        mapView.displayZoomControls(true);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_gm1_21__march_main, menu);
        return true;
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

* * *

## 谷歌地图 API2 示例

**AndroidManifest**

```
<?xml version="1.0" encoding="utf-8"?>

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.googlemapapi2_21march"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
android:minSdkVersion="8"
android:targetSdkVersion="17" />

<permission android:name="com.example.googlemapapi2_21march.permission.MAPS_RECEIVE"     android:protectionLevel="signature"/>
<uses-permission  android:name="com.example.googlemapapi2_21march.permission.MAPS_RECEIVE"/>
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
<uses-permission  android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

<uses-feature
android:glEsVersion="0x00020000"
android:required="true"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.example.googlemapapi2_21march.GMAPI2_MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

 </application>

 <meta-data
 android:name="com.google.android.maps.v2.API_KEY"
 android:value="AIzaSyAy_I76CpPtTMq3X6P8y78OamvLf_yaHJI" />

 </manifest> 
```

**主布局.XML**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<fragment
    android:name="com.google.android.gms.maps.SupportMapFragment"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />
</LinearLayout> 
```

**MainActivity.java**

```
public class GMAPI2_MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_gmapi2__main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_gmapi2__main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T12:24:30.997

对于 Google Maps API V2，就我现在看到的情况而言，您在地图布局中使用了错误的 Activity。您正在使用`SupportMapFragment`片段，因此您必须使用`FragmentActivity`对象而不是简单的`Activity`. 尝试将其更改为`FragmentActivity`.

并告诉我们发生了什么变化。

# design-patterns - 设计模式：异常/错误处理

> ID：15542608
> 
> 赞同：74
> 
> 时间：2013-03-21T08:31:31.153
> 
> 标签：design-patterns, exception-handling

是否有任何资源（网络或书籍）描述异常处理/错误处理设计模式？

有很多关于如何编写干净代码的文献，也有很多关于设计模式的书籍。然而，我从未见过任何设计模式涵盖了在何处以及如何最好地处理错误以及如何最好地将出现在低级函数中的错误传播到抽象级别的问题。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-03-21T08:37:50.130

这些模式和最佳实践通常与特定的平台/语言绑定，因此它们是寻找它们的第一个地方。

*   [异常模式 wiki](http://c2.com/cgi/wiki?ExceptionPatterns)是一个通用模式资源。

例如，检查以下 Java 链接：

*   [异常处理的最佳实践](http://www.onjava.com/pub/a/onjava/2003/11/19/exceptions.html)
*   [关于异常处理的 15 个最佳实践](http://codebuild.blogspot.com/2012/01/15-best-practices-about-exception.html)
*   [异常处理反模式](https://community.oracle.com/docs/DOC-983543)

浏览这些材料会让您大致了解异常处理机制。

还要检查其他 SO 问题：

*   [异常处理模式](https://stackoverflow.com/questions/4589750/exception-handling-pattern)
*   [Java 风格：正确处理异常](https://stackoverflow.com/questions/425281/java-style-properly-handling-exceptions?rq=1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:38:32.297

最好的方法是永远不要吞下应用程序代码中的任何异常。在引导时将处理程序连接到应用程序中未处理的异常，您可以在其中显示错误消息并进行一些日志记录。

我读过的一些不错的书推荐了这种方法。

[http://thibautvs.com/blog/?p=2238](http://thibautvs.com/blog/?p=2238)是一个很好的提到它的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:33:47.290

.NET 上使用异常的详细说明（但不仅如此）：http: [//msdn.microsoft.com/en-gb/library/5b2yeyab (v=vs.100).aspx](http://msdn.microsoft.com/en-gb/library/5b2yeyab%28v=vs.100%29.aspx)

什么时候应该使用它们，如何编写它们，如何正确处理它们等等......

# java - Java中的Luhn Check程序计算不正确

> ID：15542612
> 
> 赞同：1
> 
> 时间：2013-03-21T08:31:57.173
> 
> 标签：java, luhn

我在 Java 中创建了这个 Luhn 检查（或 Mod 10 检查），偶数和奇数的总和没有正确加起来，我不知道为什么。当我单独写出一个部分时它起作用了，而且它似乎工作正常。作为具有所有其他方法的整个程序，它不起作用。有人有想法么？

输入数字 4388576018410707 应该是有效的。

```
import java.util.Scanner;
import java.io.*;

public class combineAll {

    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        System.out.print("Enter a credit card number: ");
        long userInput = input.nextLong();

        int getSize=getSize(userInput); //Run getSize() Method.
        Integer z = (int) (long) getPrefix(userInput, getSize); //Run getPrefix() Method.

        if (prefixMatch(userInput, z)== true) { //Run prefixMatch() Method.
            long n=sumbOfDoubleEvenPlace(userInput); //Run sumbOfDoubleEvenPlace() Method.
            long m=sumOfOddPlace(userInput);  //Run sumOfOddPlace() Method.
            System.out.println("Total Even: " +n);
            System.out.println("Total Odd: " +m);
            long v=n+m;
            if (isValid(v)==true) {
                System.out.println("Valid");
            } else if (isValid(v)==false){
                System.out.println("Invalid");
            }
        } else {
            System.out.println("Invalid");
        }
    } //End main

    //Return the number of digits in d
    public static int getSize(long d) {
        String str = Long.toString(d);
        int x = str.length();
        return x;
    }

    //Return the first k number of digits from number. If the number of digits in number is less than k, return number
    public static long getPrefix(long number, int k) {
        int z=0;
        if (k>=13 && k<=16) {
            String str = Long.toString(number);
            String g = str.substring(0,1);
            String h = str.substring(0,2);

            int d=Integer.parseInt(g);
            int q=Integer.parseInt(h);

            if (d==4 || d==5 ||d==6) {
                z=d;
            } else if (q==37) {
                z=q;
            }

        } else {
            z=-1;
        }

        return z;
    }

    //Return true if the digit d is a prefix for number
    public static boolean prefixMatch(long number, int d) {
        if (d==4 || d==5 || d==6 || d==37) {
            return true;
        } else {
            return false;
        } 
    }

    //Get the result from step 2
    public static int sumbOfDoubleEvenPlace(long number) {
        long a=number;
        int d=0; //Adds each individual numbers.
        while (a>0) {
            long b=0;
            long c=0; //Equals the Mod of UserInput.
            a=a/10;
            c=a%10;
            System.out.println("even: " +c);
            b=c*2;

            if (b>=10) {
                Integer digit = (int) (long) b;
                d+=getDigit(digit); //Run getDigit() Method.
            } else {
                Integer digit = (int) (long) b;
                d+=b;
            }

            a=a/10; //Advance decimal one space to the left.
        }
        return d;
    }

    //Return sum of odd-place digits in number
    public static int sumOfOddPlace(long number) {
        long a=number;
        int d=0; //Adds each individual numbers.
        while (a>0) {
            long b=0;
            long c=0; //Equals the Mod of UserInput.
            c=a%10;
            System.out.println("odd: " +c); //Print for debugging.
            b=c*2;

            if (b>=10) {
                Integer digit = (int) (long) b;
                d+=getDigit(digit); //Run getDigit() Method.
            } else {
                Integer digit = (int) (long) b;
                d+=b;
            }

            a=a/10; //Advance decimal one space to the left.
            a=a/10;
        }
        return d;
    }

    //Return this number if it is a single digit, otherwise return the sum of the two digits
    public static int getDigit(int number) {
        int d=0;
        int x=0;
        int y=number;
        while (y>0) {
            x+=y%10;
            y=y/10;
        }
        return x;
    }

    //Return true if the card number is valid
    public static boolean isValid(long number) {    
        long c=number%10;
        if (c==0) {
            return true;
        } else {
            return false;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T14:04:55.803

代码有点难以理解。根据[Wikipedia](https://en.wikipedia.org/wiki/Luhn_algorithm)的算法描述形式，实现应该要简单得多。 [这](https://www.admfactory.com/luhn-algorithm-implementation-in-java/)是[Wikipedia](https://en.wikipedia.org/wiki/Luhn_algorithm)描述之后的其他实现。

```
public class Cards {
/**
 * Checks if the card is valid
 * 
 * @param card
 *           {@link String} card number
 * @return result {@link boolean} true of false
 */
public static boolean luhnCheck(String card) {
    if (card == null)
        return false;
    char checkDigit = card.charAt(card.length() - 1);
    String digit = calculateCheckDigit(card.substring(0, card.length() - 1));
    return checkDigit == digit.charAt(0);
}

/**
 * Calculates the last digits for the card number received as parameter
 * 
 * @param card
 *           {@link String} number
 * @return {@link String} the check digit
 */
public static String calculateCheckDigit(String card) {
    if (card == null)
        return null;
    String digit;
    /* convert to array of int for simplicity */
    int[] digits = new int[card.length()];
    for (int i = 0; i < card.length(); i++) {
        digits[i] = Character.getNumericValue(card.charAt(i));
    }

    /* double every other starting from right - jumping from 2 in 2 */
    for (int i = digits.length - 1; i >= 0; i -= 2)    {
        digits[i] += digits[i];

        /* taking the sum of digits grater than 10 - simple trick by substract 9 */
        if (digits[i] >= 10) {
            digits[i] = digits[i] - 9;
        }
    }
    int sum = 0;
    for (int i = 0; i < digits.length; i++) {
        sum += digits[i];
    }
    /* multiply by 9 step */
    sum = sum * 9;

    /* convert to string to be easier to take the last digit */
    digit = sum + "";
    return digit.substring(digit.length() - 1);
}

public static void main(String[] args)    {
    String pan = "4388576018410707";
    System.out.println("Validate pan number '" + pan + "': " + luhnCheck(pan2));
}    
} 
```

# tomcat7 - 使用 VirtualWebappLoader 使用自定义类路径运行 tomcat7 maven 插件

> ID：15542615
> 
> 赞同：4
> 
> 时间：2013-03-21T08:32:08.483
> 
> 标签：tomcat7, maven-3, maven-tomcat-plugin

我有一个 Maven*战争*项目，我正在尝试使用 tomcat7-maven-plugin 运行。我遇到的问题是每个环境的配置都在自定义文件夹中（它不在 /resources 中），因为每个环境（本地、测试、uat 或生产）都有一组不同的配置文件。

我试图弄清楚如何运行插件，同时指定一个包含**本地**配置目录的自定义类路径。我已经阅读了这个[改进票](https://issues.apache.org/jira/browse/MTOMCAT-189)，这样做的方法是提供一个带有`Loader`元素的 context.xml，但如果我这样做，webapp 将无法启动。

我在 pom 中的配置是

```
 <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0</version>
        <configuration>
           <path>/${project.build.finalName}</path>
           <contextFile>${basedir}/src/env/local/context.xml</contextFile>
           <contextReloadable>true</contextReloadable>
        </configuration>
     </plugin> 
```

context.xml 文件（tomcat 插件自动对此文件进行过滤）

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
   <Loader className="org.apache.catalina.loader.VirtualWebappLoader" 
           virtualClasspath="${basedir}/src/env/local/" />

   <JarScanner scanAllDirectories="true" />
</Context> 
```

我得到的错误是

```
[INFO] create webapp with contextPath: /webapp
Handler error
java.lang.ClassNotFoundException: org.apache.juli.FileHandler
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
        at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
        at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:521)
        at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:464)
        at org.apache.juli.ClassLoaderLogManager$2.run(ClassLoaderLogManager.java:377)
        at org.apache.juli.ClassLoaderLogManager$2.run(ClassLoaderLogManager.java:373)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.juli.ClassLoaderLogManager.getClassLoaderInfo(ClassLoaderLogManager.java:373)
        at org.apache.juli.ClassLoaderLogManager.readConfiguration(ClassLoaderLogManager.java:452)
        at org.apache.juli.ClassLoaderLogManager$2.run(ClassLoaderLogManager.java:377)
        at org.apache.juli.ClassLoaderLogManager$2.run(ClassLoaderLogManager.java:373)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.apache.juli.ClassLoaderLogManager.getClassLoaderInfo(ClassLoaderLogManager.java:373)
        at org.apache.juli.ClassLoaderLogManager.getLogger(ClassLoaderLogManager.java:223)
        at java.util.logging.LogManager.demandLogger(LogManager.java:389)
        at java.util.logging.Logger.getLogger(Logger.java:288)
        at org.apache.juli.logging.DirectJDKLog.<init>(DirectJDKLog.java:71)
        at org.apache.juli.logging.DirectJDKLog.getInstance(DirectJDKLog.java:196)
        at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:170)
        at org.apache.juli.logging.LogFactory.getLog(LogFactory.java:311)
        at org.apache.catalina.core.ContainerBase.getLogger(ContainerBase.java:452)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5162)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

有没有人对如何解决这个问题或以不同的方式实现同​​样的问题有任何建议？

我已经能够使用 cargo 插件来做到这一点，但是 tomcat 插件有一些我喜欢的功能:)。

# c++ - 将二进制文件读入结构（C++）

> ID：15542617
> 
> 赞同：8
> 
> 时间：2013-03-21T08:32:20.357
> 
> 标签：c++, file, file-io, struct, binary

因此，我遇到了一些问题，即无法将二进制文件正确读取到我的结构中。结构是这样的：

```
struct Student
{
    char name[25];
    int quiz1;
    int quiz2;
    int quiz3;
}; 
```

它是 37 个字节（25 个字节来自 char 数组，每个整数 4 个字节）。我的 .dat 文件是 185 字节。它是 5 名学生，有 3 个整数成绩。所以每个学生占用 37 个字节（37*5=185）。

它在纯文本格式中看起来像这样：

```
Bart Simpson          75   65   70
Ralph Wiggum          35   60   44
Lisa Simpson          100  98   91
Martin Prince         99   98   99
Milhouse Van Houten   80   87   79 
```

我可以使用以下代码单独读取每条记录：

```
Student stud;

fstream file;
file.open("quizzes.dat", ios::in | ios::out | ios::binary);

if (file.fail())
{
    cout << "ERROR: Cannot open the file..." << endl;
    exit(0);
}

file.read(stud.name, sizeof(stud.name));
file.read(reinterpret_cast<char *>(&stud.quiz1), sizeof(stud.quiz1));
file.read(reinterpret_cast<char *>(&stud.quiz2), sizeof(stud.quiz2));
file.read(reinterpret_cast<char *>(&stud.quiz3), sizeof(stud.quiz3));

while(!file.eof())
{
    cout << left 
         << setw(25) << stud.name
         << setw(5)  << stud.quiz1
         << setw(5)  << stud.quiz2
         << setw(5)  << stud.quiz3
         << endl;

    // Reading the next record
    file.read(stud.name, sizeof(stud.name));
    file.read(reinterpret_cast<char *>(&stud.quiz1), sizeof(stud.quiz1));
    file.read(reinterpret_cast<char *>(&stud.quiz2), sizeof(stud.quiz2));
    file.read(reinterpret_cast<char *>(&stud.quiz3), sizeof(stud.quiz3));
} 
```

而且我得到了一个漂亮的输出，但我希望能够一次读取一个完整的结构，而不仅仅是一次读取每个结构的单个成员。这段代码是我认为完成任务所需要的，但是......它不起作用（我将在它之后显示输出）：

*不包括打开文件和结构声明等类似部分。

```
file.read(reinterpret_cast<char *>(&stud), sizeof(stud));

while(!file.eof())
{
    cout << left 
         << setw(25) << stud.name
         << setw(5)  << stud.quiz1
         << setw(5)  << stud.quiz2
         << setw(5)  << stud.quiz3
         << endl;

    file.read(reinterpret_cast<char *>(&stud), sizeof(stud));
} 
```

输出：

```
Bart Simpson             16640179201818317312
ph Wiggum                288358417665884161394631027
impson                   129184563217692391371917853806
ince                     175193530917020655191851872800 
```

它唯一没有搞砸的部分是名字，之后它就在山下。我已经尝试了一切，但我不知道出了什么问题。我什至翻遍了我拥有的书籍，但我找不到任何东西。那里的东西看起来像我所拥有的并且它们工作，但出于某种奇怪的原因我的没有。我在第 25 个字节处执行了 file.get(ch)（ch 是一个字符），它返回了 K，它是 75 的 ASCII ......这是第一个测试分数，所以，一切都在它应该在的地方。只是没有正确阅读我的结构。

任何帮助将不胜感激，我只是坚持这个。

**编辑：** 在收到你们这么多出乎意料和令人敬畏的意见后，我决定接受你们的建议，坚持一次只读一个成员。我通过使用函数让事情变得更干净、更小。 **再次感谢您提供如此快速和启发性的意见。非常感谢。**

**如果您对**大多数人不推荐的解决方法感兴趣，请向下滚动到 user1654209 的第三个答案。该解决方法完美无缺，但请阅读所有评论以了解为什么它不受欢迎。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-21T08:37:33.970

您的结构几乎肯定已被填充以保持其内容的对齐。这意味着它不会是 37 个字节，并且这种不匹配会导致读数不同步。查看每个字符串丢失 3 个字符的方式，它似乎已被填充到 40 个字节。

由于填充可能位于字符串和整数之间，因此即使第一条记录也无法正确读取。

在这种情况下，我建议不要尝试将您的数据作为二进制 blob 读取，并坚持读取单个字段。它更加健壮，特别是如果您甚至想改变您的结构。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T08:46:16.960

在没有看到*写入*数据的代码的情况下，我猜测您按照第一个示例中读取数据的方式写入数据，每个元素一个接一个。*那么文件中的*每条记录确实会是 37 个字节。

但是，由于出于优化原因编译器填充结构以将成员置于良好的边界上，因此您的结构是 40 字节。因此，当您在一次调用中读取完整的结构时，实际上一次读取了 40 个字节，这意味着您的读取将与文件中的实际记录不同步。

您要么必须重新实现写入以一次性编写完整的结构，要么使用第一种读取方法，一次读取一个成员字段。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-21T09:03:37.783

一个简单的解决方法是将结构打包为 1 个字节

使用 gcc

```
struct __attribute__((packed)) Student
{
    char name[25];
    int quiz1;
    int quiz2;
    int quiz3;
}; 
```

使用 msvc

```
#pragma pack(push, 1) //set padding to 1 byte, saves previous value
struct  Student
{
    char name[25];
    int quiz1;
    int quiz2;
    int quiz3;
};
#pragma pack(pop) //restore previous pack value 
```

编辑：正如用户 ahans 所说：自 2.7.2.3 版（1997 年发布）以来 gcc 支持 pragma pack，因此如果您的目标是 msvc 和 gcc，使用 pragma pack 作为唯一的打包符号似乎是安全的

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-21T09:23:01.827

正如您已经发现的那样，填充是这里的问题。此外，正如其他人所建议的那样，解决此问题的正确方法是像您在示例中所做的那样单独阅读每个成员。我不认为这比一次性阅读整个内容的性能要高得多。但是，如果您仍想继续阅读一次，您可以告诉编译器以不同的方式进行填充：

```
#pragma pack(push, 1)
struct Student
{
    char name[25];
    int quiz1;
    int quiz2;
    int quiz3;
};
#pragma pack(pop) 
```

告诉编译器将当前包值保存在`#pragma pack(push, 1)`内部堆栈上，然后使用包值 1。这意味着您得到 1 个字节的对齐，这意味着在这种情况下根本没有填充。告诉编译器从`#pragma pack(pop)`堆栈中获取最后一个值并在之后使用它，从而恢复编译器在定义`struct`.

虽然`#pragma`通常表示不可移植的、依赖于编译器的特性，但这一特性至少适用于 GCC 和 Microsoft VC++。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-29T02:41:11.310

解决这个线程问题的方法不止一种。这是基于使用结构和字符 buf 的联合的解决方案：

```
#include <fstream>
#include <sstream>
#include <iomanip>
#include <string>

/*
This is the main idea of the technique: Put the struct
inside a union. And then put a char array that is the
number of chars needed for the array.

union causes sStudent and buf to be at the exact same
place in memory. They overlap each other!
*/
union uStudent
{
    struct sStudent
    {
        char name[25];
        int quiz1;
        int quiz2;
        int quiz3;
    } field;

    char buf[ sizeof(sStudent) ];    // sizeof calcs the number of chars needed
};

void create_data_file(fstream& file, uStudent* oStudent, int idx)
{
    if (idx < 0)
    {
        // index passed beginning of oStudent array. Return to start processing.
        return;
    }

    // have not yet reached idx = -1\. Tail recurse
    create_data_file(file, oStudent, idx - 1);

    // write a record
    file.write(oStudent[idx].buf, sizeof(uStudent));

    // return to write another record or to finish
    return;
}

std::string read_in_data_file(std::fstream& file, std::stringstream& strm_buf)
{
    // allocate a buffer of the correct size
    uStudent temp_student;

    // read in to buffer
    file.read( temp_student.buf, sizeof(uStudent) );

    // at end of file?
    if (file.eof())
    {
        // finished
        return strm_buf.str();
    }

    // not at end of file. Stuff buf for display
    strm_buf << std::setw(25) << std::left << temp_student.field.name;
    strm_buf << std::setw(5) << std::right << temp_student.field.quiz1;
    strm_buf << std::setw(5) << std::right << temp_student.field.quiz2;
    strm_buf << std::setw(5) << std::right << temp_student.field.quiz3;
    strm_buf << std::endl;

    // head recurse and see whether at end of file
    return read_in_data_file(file, strm_buf);
}

std::string quiz(void)
{

    /*
    declare and initialize array of uStudent to facilitate
    writing out the data file and then demonstrating
    reading it back in.
    */
    uStudent oStudent[] =
    {
        {"Bart Simpson",          75,   65,   70},
        {"Ralph Wiggum",          35,   60,   44},
        {"Lisa Simpson",         100,   98,   91},
        {"Martin Prince",         99,   98,   99},
        {"Milhouse Van Houten",   80,   87,   79}

    };

    fstream file;

    // ios::trunc causes the file to be created if it does not already exist.
    // ios::trunc also causes the file to be empty if it does already exist.
    file.open("quizzes.dat", ios::in | ios::out | ios::binary | ios::trunc);

    if ( ! file.is_open() )
    {
        ShowMessage( "File did not open" );
        exit(1);
    }

    // create the data file
    int num_elements = sizeof(oStudent) / sizeof(uStudent);
    create_data_file(file, oStudent, num_elements - 1);

    // Don't forget
    file.flush();

    /*
    We wrote actual integers. So, you cannot check the file so
    easily by just using a common text editor such as Windows Notepad.

    You would need an editor that shows hex values or something similar.
    And integrated development invironment (IDE) is likely to have such
    an editor.   Of course, not always so.
    */

    /*
    Now, read the file back in for display. Reading into a string buffer
    for display all at once. Can modify code to display the string buffer
    wherever you want.
    */

    // make sure at beginning of file
    file.seekg(0, ios::beg);

    std::stringstream strm_buf;
    strm_buf.str( read_in_data_file(file, strm_buf) );

    file.close();

    return strm_buf.str();
} 
```

调用 quiz() 并接收格式化为显示到 std::cout、写入文件或其他任何内容的字符串。

主要思想是联合中的所有项目都从内存中的相同地址开始。因此，您可以拥有与要写入文件或从文件读取的结构相同大小的 char 或 wchar_t buf。请注意，需要零演员表。代码中没有一个演员表。

我也不必担心填充。

对于那些不喜欢递归的人，对不起。对我来说，用递归解决它更容易，更不容易出错。也许对其他人来说并不容易？递归可以转换为循环。对于非常大的文件，它们需要转换为循环。

对于那些喜欢递归的人来说，这是使用递归的又一个例子。

我并没有声称使用 union 是最好的解决方案。似乎这是一个解决方案。也许你喜欢它？

# iphone - 如何自定义一个用于社交共享的 actionSheet，就像我使用 activityViewController 一样

> ID：15542627
> 
> 赞同：0
> 
> 时间：2013-03-21T08:32:55.973
> 
> 标签：iphone, objective-c, xcode, uiactionsheet, ios5.1

我正在使用 iOS 5.1。我正在使用操作表来执行社交共享功能。

有没有一种方法可以自定义它以在 ios 6 中获得类似照片[链接](http://www.absoluteripple.com/uploads/4/8/5/4/4854975/8948484.png?129)中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:37:00.487

我会看看 ShareThis。它已经为您完成了很多工作。[https://github.com/ign/ShareThis](https://github.com/ign/ShareThis)

对于 iOS 5 兼容性，请尝试 REActivityViewController。 [https://github.com/romaonthego/REActivityViewController](https://github.com/romaonthego/REActivityViewController)

# javascript - 如何使用 datetimepicker 插件格式化日期时间？

> ID：15542628
> 
> 赞同：2
> 
> 时间：2013-03-21T08:32:59.687
> 
> 标签：javascript, jquery

我想要的是这样的格式：

```
Thu ,  13 March 2013 03:28pm 
```

这是我迄今为止尝试过的：

```
$('.datetimepicker').datepicker({
   dateFormat : 'D , d M yy hh:mm'
}); 
```

这是我得到的结果：

```
Thu , 13 March 2013 hh:03 
```

我该怎么做才能获得所需的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:54:45.063

看到这个： [小提琴](http://jsfiddle.net/hwHe5/)

**[参考链接](http://trentrichardson.com/examples/timepicker/)**

```
 $('.datetimepicker').datetimepicker(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:40:36.090

使用以下代码：

```
$('.datetimepicker').datepicker({
   dateFormat: 'D , d M yy', timeFormat: 'hh:mm TT'
}); 
```

其中小`m`的代表数字月份。上面的代码将为您工作。供参考检查[此链接](http://timjames.me/jquery-ui-datetimepicker-plugin)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:41:26.183

开箱即用的 jQuery UI 日期选择器不提供时间作为可能的格式。请参阅[文档](http://api.jqueryui.com/datepicker/#utility-formatDate)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:53:39.620

我不认为你可以实现它，因为`dateFormat`它只是为了`datepicker`，你也需要通过它来实现它`timepicker`。这是一个博客，说明了如何获得它：

[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)

# winforms - 当允许gridview = false时，如何在GridView中启用新插入行的编辑？

> ID：15542631
> 
> 赞同：3
> 
> 时间：2013-03-21T08:33:07.933
> 
> 标签：winforms, gridview, devexpress, xtragrid

我在表单中有一个 xtraGrid 套件的 GridView 控件。当我第一次打开表单时，它是 AllowEdit = false。我希望当我按下添加新行链接（由控件内置）以使这唯一的新插入行可编辑。我读到我应该使用 ShowingEditor 事件，但我不知道如何。到目前为止我写了这个，但这不能编辑该行：

```
private void gridViewNote_ShowingEditor(object sender, System.ComponentModel.CancelEventArgs e)
        {
//this is first tryout  
            //if (gridViewNote.IsNewItemRow(gridViewNote.FocusedRowHandle))// == gridViewNote.GetFocusedDataRow())
            //{
            //    gridColumnStagione.OptionsColumn.AllowEdit = true;
            //}
//second tryout 
            GridView view = sender as GridView;
            SchedeMaterialiDaTaglioDS.SMTAGL_NOTERow currentRow = gridViewNote.GetFocusedDataRow() as SchedeMaterialiDaTaglioDS.SMTAGL_NOTERow;

            SchedeMaterialiDaTaglioDS.SMTAGL_NOTEDataTable changesTable = dsSchMatTaglio.SMTAGL_NOTE.GetChanges() as SchedeMaterialiDaTaglioDS.SMTAGL_NOTEDataTable;
            e.Cancel = !view.IsNewItemRow(view.FocusedRowHandle) &&
                !changesTable.Contains(currentRow);// set.Inserts.Contains(order);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-06T07:40:54.600

我希望我理解你的问题。一些简单的方法可以做到这一点：

1.  将存储库项添加到每个列并处理`ShowingEditor`事件，`e.Cancel`如果这应该是只读的，则使用。

2.  弹出一个窗口/文本框，让用户插入值并添加已通过代码插入的值的行。

3.  使用事件将两个不同的存储库项分配给同一列`gridView.CustomRowCellEdit`。像这样：

    ```
    RepositoryItemTextEdit rep = new RepositoryItemTextEdit();
    RepositoryItemTextEdit noRep = new RepositoryItemTextEdit();
    noRep.ReadOnly = true;

    private void button1_Click(object sender, EventArgs e)
    {
        gridView1.AddNewRow();
        justAddedName = true;
        gridView1.RefreshData();
    }

    private void gridView1_CustomRowCellEdit(object sender, DevExpress.XtraGrid.Views.Grid.CustomRowCellEditEventArgs e)
    {
        if (e.Column == colname)
        {
            if (e.RowHandle == gridView1.RowCount - 1 && justAddedName)
            {
                e.RepositoryItem = rep;
            }
            else
            {
                e.RepositoryItem = noRep;
            }
        }
    } 
    ```

并不完整，只是一个探索的方向。

希望我有所帮助。

# c++ - 是否可以让 GCC 3.4.6 使用 BOM 源文件编译 UTF-8？

> ID：15542634
> 
> 赞同：1
> 
> 时间：2013-03-21T08:33:23.177
> 
> 标签：c++, linux

我有一个在其中使用 unicode 字符串的 c++ 应用程序，我已经编译了解决方案----使用 Visual Studio 2012。 ------Window 7

该文件以带有 BOM（字节顺序标记）的 utf-8 格式保存。当我在linux中运行相同的文件时，出现以下错误：-错误：程序1中的流浪'\ 239'：错误：程序1中的流浪'\ 187'：错误：程序中的流浪'\ 191'

我发现 gcc 不支持 c++ 文件中的 BOM。如果我从文件中删除 BOM，错误得到解决。有没有一种方法可以编译我的应用程序，其中包含使用 BOM 保存在 utf-8 中的文件？

还有一件事，我正在“Red hat enterprise Linux 4 edition”中编译应用程序，其中 GCC 版本为 3.4.6。

请在这方面帮助我。

感谢和问候维卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-18T03:34:08.903

**@gcc：** 你可以使用

```
-lstdc++ 
```

作为编译器选项，编译 utf-8 BOM 文件

（我在这里添加这个，因为这个线程是谷歌关于这个主题的高评价结果）

# c - 缓冲区的大小应该是多少

> ID：15542636
> 
> 赞同：0
> 
> 时间：2013-03-21T08:33:25.550
> 
> 标签：c, android-ndk, streaming, buffer

我已经实现了一个 UDP 客户端-服务器。服务器是个人电脑，客户端是我的安卓设备。我在本机 c 中有一个解码器，它解码编码的帧并将其显示在屏幕上。现在我必须在其中添加流式传输选项。

UDP 客户端在 C 中，我能够从服务器接收数据并将其转储到文件中。现在我的任务是，与其将其转储到文件中，不如将其添加到缓冲区中，该缓冲区可以作为解码器的输入。那么，现在我的查询是**缓冲区的大小应该是多少？**因为从服务器接收到的数据可以是任意大小，所以我该如何修复我的缓冲区大小。

我想：

我可以制作一个链表，以及如何接收数据，我会将其作为节点添加到链表中。但这里的问题是，现在解码器将一个编码文件作为输入，所以我必须用我收到的数据替换这个输入文件。因此应该有一个与接收文件大小相等的缓冲区（如果是链表，我将有多个缓冲区）。

我恳请观众为此提供有用的建议。提前致谢。

# css - 容器未显示

> ID：15542639
> 
> 赞同：0
> 
> 时间：2013-03-21T08:33:32.683
> 
> 标签：css, html, css-float

我对 JSP 和 HTML 比较陌生。我被要求为我在 Perl 中的某个项目制作一个 GUI。但是，我对容器有疑问。基本上，每个容器都以单选按钮的形式显示从文件中读取的结果。它工作正常，但突然间，其中一个容器开始消失。任何帮助将不胜感激。

提前致谢 ：）

```
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8" import="java.io.*, java.net.*"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <title>Bi-Grams</title>
        <style type="text/css">
            body {background-color:white;}
            h3{color:black}
        </style>
    </head>
    <body>
        <h3>Tri-Grams of 13th Jan 2013 USA</h3> 
        <div id="content1" style="background-color:#EEEEEE;height:400px;width:400px;overflow:auto;border:2px solid;">
            <form>
                <%
                    int i=0;
                    String line = null;
                    String []line_parts;
                    request.setCharacterEncoding("UTF-8");
                    FileReader fis = new FileReader("/home/jones/testing/trigram-topics-13th.txt");
                    BufferedReader br = new BufferedReader(fis);
                        while(br.readLine() != null){
                        %>
                            <input type="radio" name="event_number" value="<%out.println(i);%>" >
                            <%  
                                line = br.readLine();
                                line_parts = line.split(" ");
                                out.println(line_parts[0]);
                            %>
                            <br>
                            <%
                            i++;
                        }
                    br.close();
                %>
            </form>
        </div>
        <br/>
        <h3>Tri-Grams of 14th Jan 2013 USA</h3>
        <div id="content2" style="background-color:#EEEEEE;height:400px;width:400px;overflow:auto;border:2px solid;">
            <form>
            <%
                request.setCharacterEncoding("UTF-8");
                fis = new FileReader("/home/jones/testing/trigram-topics-14th.txt");
                br = new BufferedReader(fis);
                    while(br.readLine() != null){
                    %>
                        <input type="radio" name="event_number" value="<%out.println(i);%>">
                        <%
                            line = br.readLine();
                            line_parts = line.split(" ");
                            out.println(line_parts[0]);
                        %>
                        <br>
                        <%
                        i++;
                    }
                br.close();
            %>
            </form>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T03:56:49.623

在 CSS 文件中试试这个：-

```
//lets assume you had it under the id 'container'
#container {
            display: inherit !important;
} 
```

或者您可以在 html 文件
示例中指定样式：

```
<div style="display: inherit !important;"></div> 
```

# android - 如何在 Android 的进度条中显示下载进度？

> ID：15542641
> 
> 赞同：6
> 
> 时间：2013-03-21T08:33:42.850
> 
> 标签：android, android-progressbar, download-manager

我正在使用 .net 网络服务，我可以在 sd 卡中下载文件，但是我想在特定文件开始下载并完成时显示进度条，然后我想显示查看和取消等选项。

点击事件类：

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id)
{
    LazyAdapter ca = (LazyAdapter)parent.getAdapter();
    FolderList item_name = (FolderList)ca.getItem(position);
    FolderList DocumentID = (FolderList)ca.getItem(position);
    FolderList type = (FolderList)ca.getItem(position);

    Intent mIntent = new Intent();  
    mIntent.putExtra("item_name", item_name.folder_name);
    mIntent.putExtra("item_id", DocumentID.ID);
    mIntent.putExtra("item_type", type.type);

    mIntent.getStringExtra("item_name");

    String Type = mIntent.getStringExtra("item_type");

    Log.i("Type", Type);

    if {
       // Some code here...
    } else {
        Intent i = new Intent(getApplicationContext(), Display_image.class);
        i.putExtra("item_name", item_name.folder_name);
        i.putExtra("ID", DocumentID.ID);
        i.putExtra("item_type", type.type);
        i.putExtra("User_ID",User_ID);

        i.getStringExtra("item_name");
        Id = i.getStringExtra("ID");
        i.getStringExtra("item_type");
        startActivity(i);
    }
} 
```

我的代码：我想使用下载管理器

```
 SoapPrimitive DocumentResponse = (SoapPrimitive)Envelope.getResponse();
        Log.i("DocumentResponse", DocumentResponse.toString());

        String DocAsString = DocumentResponse.toString();

        byte[] decodedString = Base64.decode(DocAsString, Base64.DEFAULT);

         File direct = new File(Environment.getExternalStorageDirectory() + "/MyFolder");

         if(!direct.exists())
         {
           direct.mkdir();
         }
        File photo = new File(Environment.getExternalStorageDirectory() + "/MyFolder", Name);

         if (photo.exists())
         {
           photo.delete();
         }
     try {

         DownloadManager.Request request = new DownloadManager.Request(Uri.parse(Name));
         request.setDescription("Have Fun ;)");
         request.setTitle("Downloading...");
         // in order for this if to run, you must use the android 3.2 to compile your app
         if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
             request.allowScanningByMediaScanner();
             request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED);
         }

       FileOutputStream fos=new FileOutputStream(photo.getPath());
       fos.write(decodedString);
       fos.close();

       DownloadManager manager = (DownloadManager) getSystemService(Context.DOWNLOAD_SERVICE);
       manager.enqueue(request);

       ContentValues values= new ContentValues();

       System.out.println(values);

     }
     catch (java.io.IOException e) 
     {
       Log.e("PictureDemo", "Exception in photoCallback", e);
     }
    } 
```

请建议如何使用下载管理器进入它？？？谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-21T08:51:32.143

您可以使用 ProgressBar 来完成此操作。

首先，在您的界面中添加一个进度条，如下所示：

```
<ProgressBar
    android:id="@+id/progress_bar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    style="@android:style/Widget.ProgressBar.Small"/> 
```

然后在您的代码中更新您的方法，如下所示：

```
protected ProgressBar mProgressBar;
protected long downloadId;
protected DownloadManager manager;

public void startdownload() {
    //<SET UP DOWNLOAD MANAGER HERE>
    downloadId = manager.enqueue(request);
    mProgressBar = findViewById(R.id.progress_bar);
    Timer myTimer = new Timer();
    myTimer.schedule(new TimerTask() {          
        @Override
            public void run() {
            DownloadManager.Query q = new DownloadManager.Query();
            q.setFilterById(downloadId);
            Cursor cursor = manager.query(q);
            cursor.moveToFirst();
            int bytes_downloaded = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_BYTES_DOWNLOADED_SO_FAR));
            int bytes_total = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_TOTAL_SIZE_BYTES));
            cursor.close();
            int dl_progress = (bytesDownloaded * 1f / bytesTotal) * 100;
            runOnUiThread(new Runnable(){
                @Override
                public void run(){
                    mProgressbar.setProgress((int) dl_progress);
                }
            });    
        }
    }, 0, 10);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-09T12:54:38.300

**2021 年更新：**

[![在此处输入图像描述](../Images/07d63e9bcab1adf683b1601f130bb8b8.png)](https://i.stack.imgur.com/AXVOx.png)

在布局中添加 ProgressBar（TextView 仅用于显示更多信息）：

```
 <ProgressBar
           android:id="@+id/progressBar"
           style="?android:attr/progressBarStyleHorizontal"
           android:layout_width="match_parent"
           android:layout_height="wrap_content" />

        <TextView
           android:id="@+id/textView1"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:layout_below="@id/progressBar"
           android:text="Hello World!" /> 
```

然后在onCreate之前：

```
 DownloadManager downloadManager;
           long downloadReference;
           TextView text1;
           ProgressBar progressBar;
           Timer progressTimer; 
```

之后，在 onCreate 中：

```
 text1 = (TextView) findViewById(R.id.textView1);
            progressBar = (ProgressBar) findViewById(R.id.progressBar); 
```

然后设置下载管理器后：

```
 // <Some codes which setup download manager>
            downloadReference = downloadManager.enqueue(request); // enqueue a new download

            // update progressbar
            progressTimer = new Timer();
            progressTimer.schedule(new TimerTask() {
                @Override
                public void run() {
                    DownloadManager.Query downloadQuery = new DownloadManager.Query();
                    downloadQuery.setFilterById(downloadReference);

                    Cursor cursor = downloadManager.query(downloadQuery);
                    if (cursor.moveToFirst()) { // this "if" is crucial to prevent a kind of error
                        final int downloadedBytes = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_BYTES_DOWNLOADED_SO_FAR));
                        final int totalBytes = cursor.getInt(cursor.getColumnIndex(DownloadManager.COLUMN_TOTAL_SIZE_BYTES)); // integer is enough for files under 2GB
                        cursor.close();

                        final float downloadProgress = downloadedBytes * 100f / totalBytes;
                        if(downloadProgress > 99.9) // stop repeating timer (it's also useful for error prevention)
                            progressTimer.cancel();

                        runOnUiThread(new Runnable() {
                            @Override
                            public void run() {
                                text1.setText(downloadedBytes + "\n" + totalBytes + "\n" + downloadProgress + "%");
                                progressBar.setProgress((int) downloadProgress);
                            }
                        });
                    }
                }
            }, 0, 1000); 
```

一些技巧：

*   如果您的文件大于 2GB，则应使用其他类型而不是**int**，例如 double 等。
*   您可以在其他地方停止计时器，例如，如果有的话，在 BroadcastReceiver 中。
*   任务执行是每**1000**毫秒（每 1 秒），这显然是可变的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-13T06:48:45.703

使用跟随方法

私有 NotificationManager mNotifyManager；

```
case R.id.btnSubmit:
mNotifyManager = (NotificationManager)            context.getSystemService(Context.NOTIFICATION_SERVICE);
            mBuilder = new NotificationCompat.Builder(context);
            mBuilder.setContentTitle("BuyMixTapes")
                    .setContentText("Download in progress")
                    .setSmallIcon(R.drawable.appiconmain);

new DownloadFile().execute(vv);
public class DownloadFile extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread
     * Show Progress Bar Dialog
     */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //context.showDialog(progress_bar_type);

        mBuilder.setProgress(100, 0, false);
        mNotifyManager.notify(id, mBuilder.build());
    }

    protected String doInBackground(String... f_url) {
        int count;
        try {
            for (int i = 0; i < f_url.length; i++) {
                Log.e("0url",""+f_url[0]);
                Log.e("1url",""+f_url[1]);
               // Log.e("1url",""+f_url[1]);
                URL url = new URL(f_url[i]);
                URLConnection conection = url.openConnection();
                conection.connect();
                // getting file length
                int lenghtOfFile = conection.getContentLength();

                // input stream to read file - with 8k buffer
                InputStream input = new         BufferedInputStream(url.openStream(), 8192);

                // Output stream to write file
                //   OutputStream output = new FileOutputStream("/sdcard/"+f_url[i]);
                OutputStream output = new FileOutputStream(
                        "/sdcard/" +i + "buymix.mp3");
                byte data[] = new byte[1024];

                long total = 0;

                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    // After this onProgressUpdate will be called
                    publishProgress("" + (int) ((total * 100) / lenghtOfFile));

                    // writing data to file
                    output.write(data, 0, count);
                }

                // flushing output
                output.flush();

                // closing streams
                output.close();
                input.close();
            }
        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        }

        return null;
    }

    /**
     * Updating progress bar
     */

    /**
     * After completing background task
     * Dismiss the progress dialog
     **/
    @Override
    protected void onProgressUpdate(String... values) {
        // Update progress
        mBuilder.setProgress(100, Integer.parseInt(values[0]), false);
        mNotifyManager.notify(id, mBuilder.build());
        super.onProgressUpdate(values);
    }

    protected void onPostExecute(String result) {
        super.onPostExecute(result);
        mBuilder.setContentText("Download complete");
        // Removes the progress bar
        String imagePath = Environment.getExternalStorageDirectory()
                .toString() + "/downloaded.mp3";
        mBuilder.setProgress(0, 0, false);
        mNotifyManager.notify(id, mBuilder.build());
    }

} 
```

# c# - 异常：对象实例已被释放，不能再用于需要连接的操作

> ID：15542643
> 
> 赞同：4
> 
> 时间：2013-03-21T08:33:45.817
> 
> 标签：c#, asp.net-mvc

我在一些类似于此问题的问题中搜索了解决方案，但无法解决，因此请提供有关如何解决此问题的清晰想法。

```
Order orderDetails= createOrder();
long voucherId = (long)orderDetails.Vouchers.FirstOrDefault().Number;  // exception here.. 
```

createOrder 函数返回 Order 类型的 orderDetails。

凭证是我的凭证表，

Number 是凭证表中的列名。

我不知道，为什么要解决这个异常。有什么想法吗？ **第一部分：** **编辑：* *

```
private Order createOrder()
    {
        IList<OfferInfo> offerInformation = new List<OfferInfo>();
        OfferInfo offer = new OfferInfo()
        {
            OfferId = 2,
            Message = "test msg",
            CreatedDate = System.DateTime.Now,
            Gender = "male",
            ReceiverName = "john",
            ReceiverEmail = "ebenezar@gmail.com"
        };
        offerInformation.Add(offer);

        Order order = new Order();
        order.Id = 721;
        order.Amount = 1000;
        order.CreatedDate = System.DateTime.Now;
        order.User = userDetails;
        return BLOrder.CreateOrder(order, offerInformation);
    } 
```

**注意：** 它反过来从 BLOrder 调用 CreateOrder，它以 Order 类型返回检索到的数据。（如果 var 是 Order 类型并被返回，它将有类似 var.xxx="some value" , var.yyy="some value"..）

**第二部分：**

```
public static Order CreateOrder(Order order, IList<OfferInfo> offerList)
    {
        order = CreateNewOrder(order, offerList);
        Intreat.MSMQ.MSMQHelper.AddOffers(order, offerList);
        return order;
    }

private static Order CreateNewOrder(Order order, IList<OfferInfo> offerList, bool updateUser = true)
    {
        try
        {

           if (updateUser)
            {
                VerifyUserDetails(order.User);

                senderUserId = BLUser.UpdateUser(order.User);
                order.User = null;
                Logger.WriteLog("Sender user added/updated successfully. UserID:" + senderUserId.ToString());
            }
            else
                senderUserId = order.UserId;

            if (order.Company != null)
                order.CompanyId = BLCompany.UpdateCompany(order.Company).Id;

            VerifyOrderDetails(order, offerList);

            using (IntreatEntities intreat = new IntreatEntities())
            {
                foreach (OfferInfo offer in offerList)
                {
                    orderAmt = (double)((from po in intreat.PartnerOffers
                                                  where po.Id == offer.OfferId
                                                  select po.Price * offer.Quantity).ToList()).Sum();
                    order.Amount += orderAmt;

                    if (offer.IsPos)
                        tableOrderAmt += orderAmt;
                }
                if ((tableOrderAmt > 0) && (order.TipPercentage != null) && (order.TipPercentage.Value) > 0)
                {
                    double tipAmt = (tableOrderAmt * (order.TipPercentage.Value * .01));
                    order.TipAmount = Math.Round(tipAmt);
                    order.Amount = (double)(order.Amount + order.TipAmount);
                }
                order.CreatedDate = DateTime.Now;
                order.UserId = (Guid)senderUserId;
                Logger.WriteLog(string.Format(CultureInfo.InvariantCulture, "order.TableNumber:{0}", order.TableNumber == null ? "(empty)" : order.TableNumber.ToString()));

                intreat.Orders.AddObject(order);
                intreat.SaveChanges();

                Logger.WriteLog("Order added successfully. OrderId:" + order.Id.ToString(CultureInfo.InvariantCulture));
            }
            return order;
        }
        catch (Exception ex)
        {
            Logger.WriteLog(ex);
            throw;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:12:53.947

合并这行代码**order.Vouchers.Load();** 如下所示并尝试

```
private static Order CreateNewOrder(Order order, IList<OfferInfo> offerList, bool updateUser = true)
{
    try
    {
        Guid? senderUserId = null;

        /// Process user first so that, the user details are stored even if there is any error in other areas
        /// 
        if (updateUser)
        {
            VerifyUserDetails(order.User);

            /// Create/update sending user.
            /// 
            senderUserId = BLUser.UpdateUser(order.User);
            order.User = null;
            Logger.WriteLog("Sender user added/updated successfully. UserID:" + senderUserId.ToString());
        }
        else
            senderUserId = order.UserId;

        /// Add company details before processing the order, so that the company details are stored if there is any error in other areas.
        /// 
        if (order.Company != null)
            order.CompanyId = BLCompany.UpdateCompany(order.Company).Id;

        /// Verify and process order
        /// 
        VerifyOrderDetails(order, offerList);

        using (IntreatEntities intreat = new IntreatEntities())
        {
            /// Find total amount for the order
            double orderAmt = 0;
            double tableOrderAmt = 0;

            order.Amount = 0;
            foreach (OfferInfo offer in offerList)
            {
                orderAmt = (double)((from po in intreat.PartnerOffers
                                              where po.Id == offer.OfferId
                                              select po.Price * offer.Quantity).ToList()).Sum();
                order.Amount += orderAmt;

                //If isPos, consider for tip calculation
                if (offer.IsPos)
                    tableOrderAmt += orderAmt;

            }

            //check if tip amount has to be calculated, by checking for the tableorderAmt
            if ((tableOrderAmt > 0) && (order.TipPercentage != null) && (order.TipPercentage.Value) > 0)
            {
                double tipAmt = (tableOrderAmt * (order.TipPercentage.Value * .01));
                order.TipAmount = Math.Round(tipAmt);
                order.Amount = (double)(order.Amount + order.TipAmount);
            }
            order.CreatedDate = DateTime.Now;
            order.UserId = (Guid)senderUserId;
            Logger.WriteLog(string.Format(CultureInfo.InvariantCulture, "order.TableNumber:{0}", order.TableNumber == null ? "(empty)" : order.TableNumber.ToString()));

            /// Create and save order in db
            /// 
            intreat.Orders.AddObject(order);
            intreat.SaveChanges();
            order.Vouchers.Load();
            Logger.WriteLog("Order added successfully. OrderId:" + order.Id.ToString(CultureInfo.InvariantCulture));
        }
        return order;
    }
    catch (Exception ex)
    {
        Logger.WriteLog(ex);
        throw;
    }
} 
```

# wordpress - 将wordpress一分为二

> ID：15542646
> 
> 赞同：-2
> 
> 时间：2013-03-21T08:33:51.023
> 
> 标签：wordpress, split

我正在为一家公司建立一个网站，该公司有两个部分，一个维修部分和一个开发部分。所以网站也必须分为两部分。可以在第一页上选择您想去的部分。

但是修复部分和开发部分有自己的菜单。

如何将 wordpress 一分为二，以便在这两个部分上显示另一个菜单？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T16:49:57.227

您的问题非常模糊，很难理解您的真正意图是什么。

但是，由于您用我标记了您的问题，因此`Wordpress`我假设您想要一个具有两个主要“区域”的 Wordpress 站点。

考虑到这一点，您可能想要：

*   一个简单的索引/主页
*   “修复”页面
*   “发展”页面
*   ...和其他维修或开发页面

您的索引/主页将仅链接到您的维修/开发登录页面（“登录页面”只是一个网站术语，与 wordpress 无关）。然后，每个登录页面都可以链接到其他页面。

这一切都可以通过简单的 Wordpress 页面实现。尝试通读 Wordpress 教程以熟悉基础知识。

...一旦开始，请随时在此处寻求帮助。试着确保你的问题是明确的、具体的，并提及你到目前为止所做的尝试。

# sql - 适配器 = 使用数据网格和参数将记录添加到 sql 数据库时没有错误返回

> ID：15542648
> 
> 赞同：0
> 
> 时间：2013-03-21T08:34:06.137
> 
> 标签：sql, vb.net, ado.net

在断点处返回错误--->adapter.InsertCommand = New SqlCommand(sqlsyntax, sqlconn)

它说适配器=无

关于如何使 sql 数据适配器工作的任何建议？

```
Dim sqlsyntax As String
Dim result As String

sqlsyntax = "INSERT INTO tblOfficeEquipmentProfile(OE_ID, OE_Category,OE_SubCategory, OE_Name, OE_User, OE_Brand, OE_Model, OE_Specs, OE_SerialNo, OE_PropertyNo, OE_Static_IP, OE_Vendor, OE_PurchaseDate, OE_WarrantyInclusiveYear, OE_WarrantyStatus, OE_Status, OE_Dept_Code,OE_Location_Code,OE_Remarks)" _
         & "VALUES(@OE_ID,@OE_Category,@OE_SubCategory,@OE_Name,@OE_User,@OE_Brand,@OE_Model,@OE_Specs,@OE_SerialNo,@OE_PropertyNo,@OE_Static_IP,@OE_Vendor,@OE_PurchaseDate,@OE_WarrantyInclusiveYear,@OE_WarrantyStatus,@OE_Status,@OE_Dept_Code,@OE_Location_Code,@OE_Remarks)"
Dim adapter As SqlDataAdapter

adapter.InsertCommand = New SqlCommand(sqlsyntax, sqlconn)

adapter.InsertCommand.Parameters.Add("@OE_ID", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Category", SqlDbType.Char)
adapter.InsertCommand.Parameters.Add("@OE_SubCategory", SqlDbType.Char)
adapter.InsertCommand.Parameters.Add("@OE_Name", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_User", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Brand", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Model", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Specs", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_SerialNo", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_PropertyNo", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Static_IP", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Vendor", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_PurchaseDate", SqlDbType.SmallDateTime)
adapter.InsertCommand.Parameters.Add("@OE_WarrantyInclusiveYear", SqlDbType.Int)
adapter.InsertCommand.Parameters.Add("@OE_WarrantyStatus", SqlDbType.Char)
adapter.InsertCommand.Parameters.Add("@OE_Status", SqlDbType.VarChar)
adapter.InsertCommand.Parameters.Add("@OE_Dept_Code", SqlDbType.Char)
adapter.InsertCommand.Parameters.Add("@OE_Location_Code", SqlDbType.Char)
adapter.InsertCommand.Parameters.Add("@OE_Remarks", SqlDbType.VarChar)

For i As Integer = 0 To DataGrid1.VisibleRowCount - 1
    'adapter.InsertCommand.Parameters(0).Value = Convert.ToInt32(txtEmpID.Text.Trim)
    adapter.InsertCommand.Parameters(0).Value = DataGrid1(i, 0).GetType
    adapter.InsertCommand.Parameters(1).Value = DataGrid1(i, 1).GetType
    adapter.InsertCommand.Parameters(2).Value = DataGrid1(i, 2).GetType
    adapter.InsertCommand.Parameters(3).Value = DataGrid1(i, 3).GetType
    adapter.InsertCommand.Parameters(4).Value = DataGrid1(i, 4).GetType
    adapter.InsertCommand.Parameters(5).Value = DataGrid1(i, 5).GetType
    adapter.InsertCommand.Parameters(6).Value = DataGrid1(i, 6).GetType
    adapter.InsertCommand.Parameters(7).Value = DataGrid1(i, 7).GetType
    adapter.InsertCommand.Parameters(8).Value = DataGrid1(i, 8).GetType
    adapter.InsertCommand.Parameters(9).Value = DataGrid1(i, 9).GetType
    adapter.InsertCommand.Parameters(10).Value = DataGrid1(i, 10).GetType
    adapter.InsertCommand.Parameters(11).Value = DataGrid1(i, 11).GetType
    adapter.InsertCommand.Parameters(12).Value = DataGrid1(i, 12).GetType
    adapter.InsertCommand.Parameters(13).Value = DataGrid1(i, 13).GetType
    adapter.InsertCommand.Parameters(14).Value = DataGrid1(i, 14).GetType
    adapter.InsertCommand.Parameters(15).Value = DataGrid1(i, 15).GetType
    adapter.InsertCommand.Parameters(16).Value = DataGrid1(i, 16).GetType
    adapter.InsertCommand.Parameters(17).Value = DataGrid1(i, 17).GetType
    adapter.InsertCommand.Parameters(18).Value = DataGrid1(i, 18).GetType

    result = adapter.InsertCommand.ExecuteNonQuery()
    MsgBox("success fully added")
    adapter.InsertCommand.Parameters.Clear()
Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:45:08.917

只需将,`adapter`的新实例标记为`SqlDataAdapter`

```
Dim adapter As New SqlDataAdapter 
```

# linux - 如何在远程 linux 屏幕中显示执行结果（通过 ssh 输入命令）？

> ID：15542652
> 
> 赞同：0
> 
> 时间：2013-03-21T08:34:24.133
> 
> 标签：linux, ssh, terminal, x11, remote-access

每个人 ：

我需要 ssh 来连接远程 linux，我已经知道如何在远程 linux 中运行和显示 GUI 程序。可以通过以下方式完成：

```
ssh username@ip
export DISPLAY=:0.0
firefox & 
```

但是，我的目标 linux 没有 X Window 系统，我需要在远程 linux 的屏幕上显示执行结果，例如：

我的电脑是A，远程电脑是B

A 使用 ssh 访问 B ，连接到 B 后，我在 A 中输入 ls 然后回车

执行结果应该显示在 B 的屏幕上（tty 什么的，我不知道应该叫什么）

任何的想法？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T19:11:53.580

基本思路：

```
a$ ssh user@b
b$ run-program >/dev/console 
```

（我使用`a$`和`b$`分别表示 A 和 B 上的 shell 提示。）

这个问题：

```
b$ ls -l /dev/console
crw------- 1 root root 5, 1 Mar 19 09:10 /dev/console 
```

只有 root 可以写入`/dev/console`.

可能的解决方法：

```
$b run-program | sudo tee /dev/console >/dev/null 
```

（重定向到`/dev/null`此处也可以防止输出显示在您的屏幕上。）

这确实取决于`user@b`是否允许运行`sudo tee /dev/console`。

如果您是 B 的系统管理员并且`user@b`不允许运行`sudo tee /dev/console`，请阅读[`man 5 sudoers`](http://linux.die.net/man/5/sudoers)并[`man 8 visudo`](http://linux.die.net/man/8/visudo)了解如何授予`user@b`此权限。

如果您*不是*B 的系统管理员并且`user@b`不允许运行`sudo tee /dev/console`，则必须要求 B 的系统管理员为您设置。

# android - 没有擦除背景图像的橡皮擦

> ID：15542655
> 
> 赞同：3
> 
> 时间：2013-03-21T08:34:34.787
> 
> 标签：android, background-image, paint, erase

嗨，我想做一个用于手指画女巫的橡皮擦，只擦除我画的东西，而不是导入的背景图像。我的擦除是白色的。我怎样才能做到这一点？

# java - Java 中的 equals() 方法是如何工作的

> ID：15542656
> 
> 赞同：6
> 
> 时间：2013-03-21T08:34:44.157
> 
> 标签：java, overriding, equals

该`equals`方法比较两个对象值是否相等。我的问题是它如何比较这两个对象？它如何判断两个对象是否相等？我想知道基于它比较两个对象的内容。我不包括该`hashCode`方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T08:36:11.243

默认实现，即 class 之一`java.lang.Object`，只是测试对同一对象的引用：

```
150    public boolean equals(Object obj) {
151        return (this == obj);
152    } 
```

引用相等运算符在[Java 规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.21.2)中是这样描述的：

> 在运行时，如果操作数的值都为 null 或都引用同一个对象或数组，则 == 的结果为真；否则，结果为假。

这种默认行为通常在语义上并不令人满意。例如，您不能使用以下方法测试大 Integer 实例的相等性`==`：

```
Integer a = new Integer(1000);
Integer b = new Integer(1000);
System.out.println(a==b); // prints false 
```

这就是该方法被覆盖的原因：

```
722     public boolean equals(Object obj) {
723         if (obj instanceof Integer) {
724             return value == ((Integer)obj).intValue();
725         }
726         return false;
727     } 
```

这可以实现：

```
System.out.println(a.equals(b)); // prints true 
```

覆盖默认行为的类应基于标识字段（通常是所有字段）的相等性来测试语义相等性。

如您所知，您应该`hashCode`相应地覆盖该方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T09:18:45.140

考虑以下示例，

```
public class Employee {
    String name;
    String passportNumber;
    String socialSecurityNumber;
    public static void main(String[] args) {
        Employee e1 = new Employee();
        Employee e2 = new Employee();
        boolean isEqual = e1.equals(e2);  // 1
        System.out.println(isEqual);
    }
} 
```

在注释 //1 的代码中，它调用`equals`从 Object 类继承的方法，该方法只是比较`e1`和的引用`e2`。所以它总是会`false`为使用`new`关键字创建的每个对象提供。

以下是 Object 的方法摘录

```
public boolean equals(Object obj) {
    return (this == obj);
} 
```

为了比较相等性检查，JLS 提供了`equals`在我们的类中覆盖的方法。这不是最终方法。JLS 不知道程序要在什么基础上使两个对象相等。所以他们给出了非最终方法来覆盖。
`hashcode`不检查对象的相等性。`hashcode`检查/查找对象可用的存储桶。我们`hashcode`在散列技术中使用，它被一些类使用，如 HashMap..

*如果两个对象的哈希码相等，并不意味着两个对象相等。*
*对于两个对象，如果`equals`方法返回 true，则哈希码必须相同。*

您将不得不重写`equals`方法来决定您想要对象的基础，`e1`并且`e2`在上面的代码中是相等的。是基于`passportNumber`还是`socialSecurityNumber` 结合`passportNumber+socialSecurityNumber`？

```
I want to know based on what it compares the two objects. 
```

答案是，默认情况下，在继承`Object`类的`equals`方法的帮助下，它使用 == 符号比较两个对象的引用相等性。上面给出了代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:37:46.863

从逻辑上讲，equals 不比较对象（但是你可以用它做任何事情），它比较值。对于对象比较，有 '==' 运算符

# android - 获取在 Android 的本机拨号器中拨打的号码

> ID：15542658
> 
> 赞同：0
> 
> 时间：2013-03-21T08:34:52.990
> 
> 标签：android, phone-call

我可以在运行时获取用户在本地拨号器中输入的号码吗？当他以编程方式输入本机拨号器时，我想一一获取数字吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T07:50:46.260

您无法从本机拨号程序获取关键事件，因为它会造成严重的安全问题，并且拨号程序很容易被监视。

# web-applications - JavaScript ExtJS - 具有权限的访问处理

> ID：15542662
> 
> 赞同：1
> 
> 时间：2013-03-21T08:35:15.730
> 
> 标签：web-applications, extjs4, privileges

我正在计划一个WebApplication。使用 ExtJS 构建我的前端和后端的 ASP WebService。通过 json 进行通信..

虽然心里有个大大的问号。我有多个视图，不同的用户控件可供不同类型的人使用。例如，只有上级可以看到此按钮等。我在后端实现了我的权限，但是与视图通信的最佳方式是我应该显示哪个按钮，哪个不显示。我不能只发送一个对每个人都不可用的单个控件的请求，我想这将是 fosy :D ..

如果你有这个问题的经验，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:40:32.873

我不止一次地处理过这个问题。我个人也喜欢在客户端实现角色。制作某种经理来保留当前角色和该角色附带的特权。在您的视图中，您可以简单地询问管理员当前用户是否有权查看特定控件。

我通常将所有不同的角色保留在某种类似枚举的结构中（基本上只是一个 javascript 数组：P）

# forms - 空字段上的 Codeigniter 回调？

> ID：15542663
> 
> 赞同：2
> 
> 时间：2013-03-21T08:35:19.227
> 
> 标签：forms, codeigniter, callback, validation

我在空字段上的回调有问题。

出于某种原因，我需要将字段的值与其他一些参数进行比较，并且只有在满足其他一些条件时才将其设为“必需”，从回调函数中购买检查它。

不幸的是，如果字段为空，则不会调用回调函数。

你知道如何克服这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-17T15:24:46.460

这个“bug”实际上是表单验证的一个“特性”。如果输入为空并且未设置所需的规则，则它会跳过所有其他规则（甚至是非回调函数）。即使输入为空白，您也可以扩展（或破解）验证以继续执行所有功能。

在`system/libraries/Form_validation.php`大约第 486 行，您将看到以下注释：

```
// If the field is blank, but NOT required, no further tests are necessary 
```

`return;`然后，您将在该评论后不久看到两行带有 a 的行。我的行在第 498 行和第 536 行（评论后大约 12 和 50 行）。如果您注释掉这两行，那么即使输入为空白，验证也将继续通过所有函数。

话虽如此，您可以通过在以下位置创建文件`application/libraries/Form_validation.php`并覆盖该`_execute`函数来扩展表单验证：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

class MY_Form_validation extends CI_Form_validation
{
    protected function _execute($row, $rules, $postdata = NULL, $cycles = 0)
    {
        ...
    }
} 
```

只需将整个函数复制到新文件并注释掉上述两个返回即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:48:55.390

你可以像这样定义验证规则

你可以设置一个条件

```
if($this->input->post('first_field_name')){
    $this->form_validation->set_rules('2ndfield','Field Name','required|callback_myfunction');
} 
```

# python - 添加元素时列表索引超出范围

> ID：15542666
> 
> 赞同：1
> 
> 时间：2013-03-21T08:35:28.403
> 
> 标签：python, python-2.7

我得到了`IndexError: list index out of range`，不明白为什么。我只是在动态列表中添加一个新元素：

```
 order_array = []
 for package in names_array:
      package = names_array[i]
      logInfo("NAME : " + package)
      command = vars.sdp_info_command + " -b " + package + " | grep 'Order' | awk --field-separator=:           '{print $2}'"
      tmp = []
      r_code = execute(command, output=tmp)
      if r_code != 0:
        return 1
  order_array.append(tmp[0].strip()) 
```

该程序在这里失败，但并非总是如此：`order_array.append(tmp[0].strip())`.

可能是什么问题呢？

# java - FTP 客户端类未连接

> ID：15542670
> 
> 赞同：3
> 
> 时间：2013-03-21T08:35:46.713
> 
> 标签：java, ftp

```
FTPClient client = new FTPClient();
FileInputStream fis = null;

try {
    client.connect("32.178.10.121");
    client.login("XXX", "XXX");

    //
    // Create an InputStream of the file to be uploaded
    //
    String filename = "Touch.dat";
    fis = new FileInputStream(filename);

    //
    // Store file to server
    //
    client.storeFile(filename, fis);
    client.logout();
} catch (IOException e) {
    e.printStackTrace();
} finally {
    try {
        if (fis != null) {
            fis.close();
        }
        client.disconnect();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

我已经尝试过了，但每次它都会给出时间超出限制的异常，并通过其他方式让我成功连接，但从这里开始可能是什么原因。

这是堆栈跟踪：

```
java.net.ConnectException: Connection timed out: connect
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.PlainSocketImpl.doConnect(Unknown Source)
    at java.net.PlainSocketImpl.connectToAddress(Unknown Source)
    at java.net.PlainSocketImpl.connect(Unknown Source)
    at java.net.SocksSocketImpl.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.connect(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at java.net.Socket.<init>(Unknown Source)
    at org.apache.commons.net.DefaultSocketFactory.createSocket(DefaultSocketFactory.java:53)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:162)
    at org.apache.commons.net.SocketClient.connect(SocketClient.java:250)
    at forTesting.FileUploadDemo.main(FileUploadDemo.java:15) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T10:23:16.813

首先尝试设置代理详细信息，如下所示

```
FTPClient ftp = new FTPHTTPClient(proxyHost, proxyPort, proxyUser, proxyPassword); 
```

然后尝试按照您的操作进行连接，并让我知道错误是否消失。
如果错误仍然存​​在，请检查 FTP 服务器的防火墙设置。还尝试使用 Filezilla 等 GUI 工具从系统连接以连接到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T10:59:27.120

如果您在防火墙或代理后面，您可能想尝试使用 PASV 模式。看看[这里](http://en.wikipedia.org/wiki/File_Transfer_Protocol)：

> 在客户端位于防火墙后面并且无法接受传入 TCP 连接的情况下，可以使用被动模式。在这种模式下，客户端使用控制连接向服务器发送 PASV 命令，然后从服务器接收服务器 IP 地址和服务器端口号，然后客户端使用它打开从任意客户端端口到服务器的数据连接。收到的服务器 IP 地址和服务器端口号。

# android - 如何保存结果？

> ID：15542678
> 
> 赞同：0
> 
> 时间：2013-03-21T08:36:11.553
> 
> 标签：android, button, android-activity, imageview

我是android编程的菜鸟。

我有一个小问题。当我单击 ImageView 时，我使该 ImageView 不可见并将 Button 设置为可见。我的问题是你如何保存这个？

例如，我单击 ImageView，Button 出现，而​​ ImageView 消失。然后我退出应用程序并重新进入相​​同的活动，我希望该按钮保留在那里。

我该怎么做呢？

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;

public class Flightplan extends Activity {

Button a;
ImageView b; 
private boolean isVisible;
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.flightplan);

b = (ImageView) findViewById(R.id.plus);
View v1 = findViewById(R.id.test); 
v1.setVisibility(View.GONE);
b.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

            View v2 = findViewById(R.id.test); 
            v2.setVisibility(View.VISIBLE);

            View v3 = findViewById(R.id.plus);
            v3.setVisibility(View.GONE); 
    }
});

} 
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:40:40.533

将状态保存到共享首选项中，然后在`onCreate`中检查该首选项。关于如何使用 Shared Preferences，[这个问题](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)的答案非常清楚，但是您可以[存储并获取 Boolean](http://developer.android.com/reference/android/content/SharedPreferences.html#getBoolean%28java.lang.String,%20boolean%29)来代替 Long 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:54:05.613

尝试这个：

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.ImageView;
import android.content.SharedPreferences;

public class Flightplan extends Activity {

  Button a;
  ImageView b;
  private boolean isVisible;
  SharedPreferences prefs = null;

  public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.flightplan);
prefs = this.getSharedPreferences(
    "com.your.app", Context.MODE_PRIVATE);

boolean imageVisible = prefs.getBoolean("imageVisible", false); 

b = (ImageView) findViewById(R.id.plus);

View v1 = findViewById(R.id.test);
if (!imageVisible){
  v1.setVisibility(View.GONE);
  v3.setVisibility(View.VISIBLE);
}else{
  v1.setVisibility(View.VISIBLE);
  v3.setVisibility(View.GONE);
}

b.setOnClickListener(new View.OnClickListener() {

  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub

    View v2 = findViewById(R.id.test);
    v2.setVisibility(View.VISIBLE);

    View v3 = findViewById(R.id.plus);
    v3.setVisibility(View.GONE);

    prefs.edit().putBoolean("imageVisible", true).commit();
  }
});

v1.setOnClickListener(new View.OnClickListener() {

  @Override
  public void onClick(View v) {
    // TODO Auto-generated method stub

    View v2 = findViewById(R.id.test);
    v2.setVisibility(View.GONE);

    View v3 = findViewById(R.id.plus);
    v3.setVisibility(View.VISIBLE);

    prefs.edit().putBoolean("imageVisible", false).commit();
  }
});

 }

 } 
```

我是用文本编辑器写的。可能是有一些编译器错误...

# android - 安卓图片下载

> ID：15542681
> 
> 赞同：0
> 
> 时间：2013-03-21T08:36:18.903
> 
> 标签：android, bitmap

我根据一个url返回一个Bitmap对象，下载图片的代码：

```
URL url = new URL(imageUrlStr);
       URLConnection conn = url.openConnection();
       conn.setDoInput(true);
       conn.connect();
       InputStream in = conn.getInputStream();
       Bitmap bitmap = BitmapFactory.decodeStream(in);
           in.close 
```

然后我把它保存到sdcard。保存图片就OK了。

现在的问题是使用这个url访问时会下载图片A。但它现在在 SDCARD 中显示了另一张 B 图片。如何解决这个问题？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:45:21.627

**您可以通过哈希码识别图像。不是一个完美的解决方案，适合演示**

```
 private Bitmap getBitmap(String url) {
                String filename = String.valueOf(url.hashCode());
                File f = new File(cacheDir, filename);
                // from SD cache
                Bitmap b = decodeFile(f);
                if (b != null)
                    return b;
                // from web
                try {
                    Bitmap bitmap = null;
                    InputStream is = new URL(url).openStream();
                    OutputStream os = new FileOutputStream(f);
                    CopyStream(is, os);
                    os.close();
                    bitmap = decodeFile(f);
                    return bitmap;
                } catch (Exception ex) {
                    ex.printStackTrace();
                    return null;
                }
            }

        private void CopyStream(InputStream is, OutputStream os) {
                    final int buffer_size = 1024;
                    try {
                        byte[] bytes = new byte[buffer_size];
                        for (;;) {
                            int count = is.read(bytes, 0, buffer_size);
                            if (count == -1)
                                break;
                            os.write(bytes, 0, count);
                        }
                    } catch (Exception ex) {
                    }
                }

/** decodes image and scales it to reduce memory consumption*/
    private Bitmap decodeFile(File f) {
        try {

            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inPurgeable = true;
            return BitmapFactory.decodeStream(new FileInputStream(f));

        } catch (FileNotFoundException e) {
        }
        return null;
    } 
```

使用你只需要使用方法“getBitmap(String)”和你想要的 url 作为字符串

# javascript - window.postMessage 在 Chrome 扩展上表现异常

> ID：15542683
> 
> 赞同：0
> 
> 时间：2013-03-21T08:36:29.323
> 
> 标签：javascript, html, google-chrome-extension

我在 Chrome 扩展内容脚本中使用 window.postMessage：

```
function() {
   window.addEventListener("message", function(event) {
        console.log(event);
   }, false);

   window.postMessage({ type: \"FROM_PAGE\"}, "*");} 
```

异常行为是我第一次调用这个函数，控制台打印一次事件；我第二次打电话，控制台打印两次；第三次，三次。
我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:42:28.993

这是因为您**每次****调用该函数**时都会添加一个**新**的EventListener 。

 ****因此，您添加的每个 EventListener 都会收到由发布的消息`postmessage`，然后执行

`console.log(event)`

所以第一次调用你的函数。你`EventListeners`的功能，只执行一次，因为只有**1** `EventListener`附加到调用的 DOM`console.log`

第二次有两个`EventListeners`执行`console.log` ，依此类推......

你应该附上你`EventListener`

```
window.addEventListener("message", function(event) {
...
} 
```

在你的职能之外。
并且只做`window.postMessage({ type: \"FROM_PAGE\"}, "*");` 函数内部的部分****

# cvs - 为什么 CVS 在提交时会忽略文件夹？

> ID：15542684
> 
> 赞同：0
> 
> 时间：2013-03-21T08:36:31.163
> 
> 标签：cvs, tortoisecvs

我确实有一个有结构的项目

```
project/lib/lib1/subfolders
           /lib2/... 
```

`lib2`是最近添加的，现在在 CVS 中。提交`/project`时，更改的文件`/project`和`/project/lib2`是提交的一部分，但`lib2/subfolders`不是。我可以单独提交每个子文件夹而`lib2`不会出错，但希望它们成为完整提交的一部分。

为什么 CVS 在提交时会忽略这些子文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T15:17:39.327

调查`lib2/CVS/entries`我发现了以下结构：

```
/index.html/1.3/Sat Mar 16 09:58:04 2013//
/humans.txt/1.1/Sat Mar 16 09:58:00 2013//
/robots.txt/1.1/Sat Mar 16 09:58:04 2013//
D 
```

然而，在 lib1 中`D`，每个目录分别显示，而不是 ：

```
D/css////
D/fonts////
D/js////
D/img//// 
```

问题显然是在 lib2 文件中没有提到`entries`文件夹。

我现在已将`entries`文件更改为明确包含目录，问题似乎已解决。不过，目前还不清楚添加 lib2 时会出现什么错误。

# c# - 进行 URL 重写时要记住的一般要点

> ID：15542685
> 
> 赞同：0
> 
> 时间：2013-03-21T08:36:31.997
> 
> 标签：c#, asp.net, url-rewriting

我使用 urlrewritingnet 进行 url 重写。

有人可以建议我链接那里可以列出在执行此操作时需要小心的要点。正如我在许多地方看到的那样，开发人员在使用它时会遇到问题。

完整的 url 重写列表是什么样的。该文件中需要涵盖哪些所有 url 规则？

因为我是新手。我不想重复任何错误，只想使用 url 重写来获得更好的 SEO（这是我知道的唯一一个好处）

希望我清楚我的要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:59:26.400

我认为你应该尝试：

1.  ASP.NET 路由
2.  IIS 7 URL 重写模块

**[ASP.NET 路由](http://msdn.microsoft.com/en-in/library/dd535618%28v=vs.100%29.aspx)**：

ASP.NET 路由使您能够使用不必映射到网站中特定文件的 URL。由于 URL 不必映射到文件，因此您可以使用用户更容易理解的 URL。

**[URL重写模块](http://www.iis.net/learn/extensions/url-rewrite-module/using-the-url-rewrite-module)**：

用于 IIS 7 及更高版本的 Microsoft URL Rewrite Module 2.0 使 IIS 管理员能够创建强大的自定义规则，将请求 URL 映射到更易于用户记住和更易于搜索引擎查找的友好 URL。您可以使用 URL 重写模块来执行 URL 操作任务，其中包括：

*   定义强大的规则，将复杂的 URL 转换为简单且一致的 Web 地址。

*   轻松替换 Web 应用程序 URL 以产生用户和搜索引擎友好的结果。

*   根据 HTTP 标头和 IIS 服务器变量重写 URL。

*   根据重写规则中表达的逻辑执行重定向、发送自定义响应或停止 HTTP 请求。

*   根据 URL 段或请求元数据控制对网站内容的访问。

# android - IAB 助手。queryInventoryAsync 不返回任何购买，但启动产品流程失败并显示“项目已拥有”

> ID：15542687
> 
> 赞同：18
> 
> 时间：2013-03-21T08:36:48.107
> 
> 标签：android, in-app-billing

我在使用 Google 提供的 IABHelper 的 In App Billing Version 3 时遇到间歇性问题。

在启动新购买之前，我使用 queryInventoryAsync 检查未消费的购买。如果发现我消费任何未消费的购买并开始新的交易，如果没有直接开始新的交易。99% 的时间它都能正常工作。

有时，当 queryInventoryAsync 没有返回未消费的购买时，以下 launchPurchaseFlow 会失败并显示响应：7：项目已拥有。

```
INFO    [IABHelper] Starting async operation: refresh inventory
INFO    [IABHelper] Querying owned items, item type: inapp
INFO    [IABHelper] Package name: jp.co.mycompany.myapp
INFO    [IABHelper] Calling getPurchases with continuation token: null
INFO    [IABHelper] Owned items response: 0
INFO    [IABHelper] Continuation token: null
INFO    [IABHelper] Querying SKU details.
INFO    [IABHelper] queryPrices: nothing to do because there are no SKUs.
INFO    [IABHelper] Querying owned items, item type: subs
INFO    [IABHelper] Package name: jp.co.mycompany.myapp
INFO    [IABHelper] Calling getPurchases with continuation token: null
INFO    [IABHelper] Owned items response: 0
INFO    [IABHelper] Continuation token: null
INFO    [IABHelper] Querying SKU details.
INFO    [IABHelper] queryPrices: nothing to do because there are no SKUs.
INFO    [IABHelper] Ending async operation: refresh inventory

INFO    [IABHelper] Constructing buy intent for jp.co.mycompany.myapp.myitem, item type: inapp
INFO    [IABHelper] Launching buy intent for jp.co.mycompany.myapp.myitem Request code: 1001
INFO    [IABHelper] Ending async operation: launchPurchaseFlow
INFO    [IABHelper] Purchase canceled - Response: 7:Item Already Owned 
```

queryInventoryAsync 表示用户不拥有该项目，但 launchPurchaseFlow 表示用户拥有。

奇怪的是，在等待（有时几分钟，有时更久）之后，问题就会自行解决。

有没有人经历过类似的事情？

作为参考，我使用的是 3 月 15 日最后更新的 IABHelper 版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T07:25:15.433

在移动设备中清除 Google Play 服务应用程序的缓存。它可能对你有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-28T01:26:39.823

我确信这种情况表明您的应用程序存在错误，但即使 Google IAP 也是导致问题的因素之一。

考虑这样的情况：用户购买项目，您正在服务器上处理它，然后应用程序在项目被消费之前崩溃。用户返回应用程序，您正尝试再次处理该项目，但 IAP 返回为空`Inventory`（根本没有购买）。用户单击要购买的项目但收到`ITEM_ALREADY_OWNED`。那很奇怪 ？！

所以没有购买，但该项目已经拥有，是吧？可以肯定的是，Google IAP 端有本地缓存​​，但导致此问题（应用程序崩溃）的是您的应用程序。**您可以等待几个小时，但在大多数情况下，这不会自行解决**。

有两种可能的解决方案。第一个对开发者有好处，它将清除谷歌 IAP 数据。

```
adb shell pm clear com.android.vending 
```

几秒钟后，您将能够再次购买该物品。

第二种解决方案对开发人员或最终用户都不利。您必须重新启动设备。重启后等待 20 秒到 5 分钟，您的商品将可以再次购买。如果在您客户的设备上发生这种情况，请他/她从设置中手动清除 Play 商店数据或重新启动设备。

请记住**，根本原因是您的应用程序崩溃，**这会在商品被消费之前扰乱 IAP 购买流程。修复它，问题将不再发生。

# c - C 函数参数 char * vs char []

> ID：15542697
> 
> 赞同：4
> 
> 时间：2013-03-21T08:37:22.730
> 
> 标签：c, function, arguments

我认为这个问题是[这个 SO answer](https://stackoverflow.com/a/1704433/1383051)的延伸。假设我有以下代码：

```
#include <stdio.h>
#include <string.h>

void func(char *str)
{
    strcpy(str, "Test");
}

int main()
{
    char testStr[20] = "Original";
    func(testStr);
    printf("%s\n", testStr);  /* Prints "Test" followed by a new-line */
    return 0;
} 
```

根据我的理解，不应该`func`期望一个指向*只读*文字的指针作为参数吗？然而，传递的是只读文字堆栈上的*副本。*

即使这会产生正确的结果，这样做是否 100% 正确？如果`func()`接受`char []`而不是，它会提高代码的可读性`char *`吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T08:38:32.080

你的理解是正确的。代码很好。

另一方面，以下不是：

```
void func(char *str)
{
    strcpy(str, "Test");
}

int main()
{
    char* testStr = "Original";
    func(testStr);
} 
```

这会尝试修改字符串文字，从而导致未定义的行为。

至于可读性的问题，这是主观的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:47:48.863

所有字符串都是指向 的数组的指针`char`，因此没有区别。函数中的堆栈上没有分配字符串的副本，它与传递的字符串相同，并且将参数声明为数组不会为函数中的字符串分配任何存储空间，这只是编写相同内容的另一种方式.

但是，如果您使用字符串文字初始化数组，则会将文字的副本制作到数组中。字符串是否来自文字并不重要，因为它是完全独立的。

如果您期望一个文字，您可以像`const`您想要的那样声明函数参数，但当然没有要求。在 C 中，字符串文字不是只读的，但它会导致未定义的行为改变它们。

# javascript - 未捕获的类型错误：对象# has no method '_initText' Error I am getting is (In the console): Uncaught TypeError: Object # has no method '_initText' kinetic.js:52 I am trying to add simple Te 问问题 问问题 2013-03-21T08:37:26.787 564 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. Error I am getting is (In the console): Uncaught TypeError: Object # has no method '_initText' kinetic.js:52 I am trying to add simple Text to my canvas (using Kinetic.Js) like this var simpleText = Kinetic.Text(); As soon as I commment this line out, there is no error or warning. But when I keep this I get the error. Judging by the fact that it's Text with capital T it is a constructor function and you have to new it up. var simpleText = new Kinect.Text() Check out this tutorial for example usage. More about JavaScript naming conventions here. javascriptcanvaskineticjs 4 1 回答 1 This answer is useful 1 从它是带有大写 T 的 Text 的事实来看，它是一个构造函数，你必须更新它。 var simpleText = new Kinect.Text() 查看本教程以了解示例用法。更多关于 JavaScript 命名约定的信息在这里。 于 2013-03-21T08:46:09.830 回答 Related 1 scala - 播放 2.0 eclipsify 命令时源已损坏？ 1 php - 用php生成缓存文件？ 3 classification - 如何在 Weka 中使用新训练的 NaiveBayes 分类器对未标记的数据集进行分类 3 php - 对属性的公共数组进行排序 3 android - 由意图过滤器启动时调试应用程序 1 sencha-touch - 如何在煎茶中添加画布标签 1 c# - 加密加密数据 1 r - 在 R 中，在 Ubuntu control-4 下退出 - 为什么？我怎样才能阻止它？ 8 mongodb - 无法在 Ubuntu 11.04 上重新启动 mongodb 1 email - 使用 Java 访问用户电子邮件地址的日历 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：15542698
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, canvas, kineticjs

Error I am getting is (In the console):

```
Uncaught TypeError: Object #<Object> has no method '_initText'      kinetic.js:52 
```

I am trying to add simple Text to my canvas (using Kinetic.Js) like this

```
var simpleText = Kinetic.Text(); 
```

As soon as I commment this line out, there is no error or warning. But when I keep this I get the error.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:46:09.830

从它是带有大写 T 的 Text 的事实来看，它是一个构造函数，你必须更新它。

```
var simpleText = new Kinect.Text() 
```

查看[本](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-text-tutorial/)教程以了解示例用法。更多关于 JavaScript 命名约定的[信息在这里](http://javascript.crockford.com/code.html)。

# mysql - 在 MYSQL 中使用 NOT IN 和 GROUP CONCAT

> ID：15542701
> 
> 赞同：4
> 
> 时间：2013-03-21T08:37:46.600
> 
> 标签：mysql, sql, subquery, group-concat

**我在我的 mysql 查询中使用带有“ NOT IN** ”语句的“ **GROUP_CONCAT** ”函数。但由于未知原因，它没有返回正确的值：

 **这是我的查询不起作用：

```
select firstname, lastname
from t_user
where (status_Id NOT IN(Select GROUP_CONCAT(id) from t_status where code = 'ACT'
or code = 'WACT'))

Returns 46 rows 
```

这是我的查询工作：

```
select firstname, lastname
from t_user
where (status_Id NOT IN(1,4))

Returns 397 rows 
```

**GROUP_CONCAT**子查询的结果

```
 (Select GROUP_CONCAT(id) from t_status where code = 'ACT' or code = 'WACT') = 1,4. 
```

似乎该查询只处理 GROUP_CONCAT 子查询返回的第一项。

所以我不明白发生了什么以及为什么我在两种情况下都没有相同的结果。

在此先感谢盖尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:40:16.663

在这种情况下，您不需要使用`GROUP_CONCAT`函数，因为它返回一个字符串值。AND与and
`1, 4`非常不同。`1``4`

```
select  firstname, lastname
from    t_user
where   status_Id NOT IN 
        ( Select id 
          from t_status 
          where code = 'ACT' or code = 'WACT'
        ) 
```

纠正查询的更好方法是使用`LEFT JOIN`,

```
SELECT  a.firstname, a.lastname
FROM    t_user a
        LEFT JOIN t_status b
            ON a.t_status = b.id AND
                b.code IN ('ACT', 'WACT')
WHERE   b.id IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-17T12:50:02.373

根据您的问题，可以利用从 GROUP_CONCAT 生成的列表。因此，一般来说，您可以使用 GROUP_CONCAT 中的列表，如下所示：

根据[规范](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_find-in-set)，您可以简单地使用 FIND_IN_SET 而不是 NOT IN 来通过子查询过滤字段

```
select firstname, lastname
from t_user
where NOT FIND_IN_SET(status_Id, 
    (Select GROUP_CONCAT(id) from t_status where code = 'ACT' or code = 'WACT')
); 
```**

# asp.net-mvc-4 - 如何使 Angularjs $http.delete 和 asp.net mvc4 缩小一起工作？

> ID：15542706
> 
> 赞同：3
> 
> 时间：2013-03-21T08:37:51.253
> 
> 标签：asp.net-mvc-4, angularjs, bundling-and-minification

我正在开发一个 AngularJs/asp.net mvc4 应用程序，该应用程序通过 asp.net mvc web api 与后端通信。

javascript文件的缩小是用mvc4完成的，但是当我`$http.delete`在角度代码中使用时，mvc4 minifyer在捆绑文件中返回以下错误：

```
/* Minification failed. Returning unminified contents.
(1029,11-17): run-time warning JS1010: Expected identifier: delete
(1029,11-17): run-time error JS1137: 'delete' is a new reserved word and should not be used as an identifier: delete 
```

我已经完成了替换保留字（在本例中为“删除”）的解决方法，此处描述，[https://stackoverflow.com/a/13418911/1029874](https://stackoverflow.com/a/13418911/1029874)

这意味着`$http.delete`将替换为`$http.fooDelete`，导致 angular 不再识别它。

是否有另一种解决方法或者是使用 jQuery ajax 的最简单解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T17:49:10.973

@larchii 使用 $http'delete' 作为@stewie 提到的。根据[本文](http://tech.pro/blog/1238/angularjs-and-ie8-gotcha-http-delete)，使用任何 IE 保留字都会导致引发预期的标识符错误。还有一个指向 IE 保留字列表的链接。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T04:00:58.200

我有同样的问题，但我的解决方法是这样做而不是使用快捷方式：

```
$http({method: 'DELETE', url: '/someUrl'}).
  success(function(data, status, headers, config) {
    // this callback will be called asynchronously
    // when the response is available
  }).
  error(function(data, status, headers, config) {
    // called asynchronously if an error occurs
    // or server returns response with an error status.
  }); 
```

# google-chrome - 谷歌 Chrome 开发者工具网络将网络调用结合在一起，你如何防止这种情况发生？

> ID：15542709
> 
> 赞同：1
> 
> 时间：2013-03-21T08:38:06.403
> 
> 标签：google-chrome, networking

我不知道谷歌浏览器是什么时候开始这样做的，但它已经开始将类似的网络调用组合在一起。例如，使用 ajax 在字典中查找单词的页面到搜索页面说查看 www.dictionary.com，然后用户点击其他任务说 www.google.com（ajax 按钮）和 www.yahoo.com（ ajax 按钮）永远不会离开页面只是向这些页面发送 ajax 调用然后点击字典 www.dictionary.com（再次是 ajax 按钮）我的网络面板看起来像这样

```
 www.dictionary.com
   www.dictionary.com
   www.google.com
   www.yahoo.com 
```

所以现在每次我点击字典按钮时它都不会填充在底部。我真的需要让每个动作在它发生时自行填充是否有可能让它像以前一样并显示

```
 www.dictionary.com
   www.google.com
   www.yahoo.com
   www.dictionary.com 
```

谢谢你的帮助。我的下一个问题是如何告诉 StackOverflow 链接不是代码。

# c++ - 为什么从 CMap 中检索元素没有排序

> ID：15542710
> 
> 赞同：0
> 
> 时间：2013-03-21T08:38:08.040
> 
> 标签：c++, map, mfc

在我的应用程序中，我有一个 CString 值的 CMap。在 Map 中添加元素后，如果我在其他地方检索元素，则不会按插入顺序获取元素。假设我检索第三个元素，我会得到第五个这样的元素。它是 CMap 的一种行为吗？为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T08:47:41.113

你问“为什么”，所以这里是：

Map 提供了一种通过键检索值的有效方法。它通过使用比列表或数组更快的巧妙数据结构来做到这一点（在您知道元素是否在其中之前，您必须搜索整个列表）。需要权衡取舍，例如内存使用量增加，以及无法做一些其他事情（例如知道插入的顺序）。

有两种常见的实现方式

*   一个哈希映射，它通过哈希值将键放入桶中。
*   树图，根据键的排序方式将键排列成二叉树

您可以迭代地图，但这将取决于它们在内部的存储方式，无论是键顺序（树图）还是完全不可预测的（哈希图）。您的 CMap 似乎是一个哈希图。

无论哪种方式，都不会保留插入顺序。如果需要，您需要一个额外的数据结构（例如列表）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T08:40:32.627

如何阅读 CMap 的文档？ [http://msdn.microsoft.com/ru-ru/library/s897094z%28v=vs.71%29.aspx](http://msdn.microsoft.com/ru-ru/library/s897094z%28v=vs.71%29.aspx)

真的是无序地图。你如何检索元素？通过`GetStartPosition`和`GetNextAssoc`？[http://msdn.microsoft.com/ru-ru/library/d82fyybt%28v=vs.71%29.aspx](http://msdn.microsoft.com/ru-ru/library/d82fyybt%28v=vs.71%29.aspx)在这里阅读备注

> 评论
> 
> 迭代顺序是不可预测的；因此，“地图中的第一个元素”没有特殊意义。

> CMap 是一个字典集合类，它将唯一键映射到值。将键值对（元素）插入映射后，您可以使用键有效地检索或删除该对来访问它。您还可以遍历地图中的所有元素。

# underscore.js - 使用 underdecore.js 过滤

> ID：15542711
> 
> 赞同：2
> 
> 时间：2013-03-21T08:38:15.493
> 
> 标签：underscore.js

```
var data1 = [
    {"year":2000,"country":"Madagascar","country_id":847,"group":"Economic Statistics "},
    {"year":2005,"country":"Madagascar","country_id":847,"group":"Economic Statistics "},
    {"year":2000,"country":"Madagascar","country_id":847,"group":"Economic Statistics "},
    {"year":2005,"country":"Libya","country_id":846,"group":"Demographic  and Social Statistics "},
    {"year":2008,"country":"Libya","country_id":846,"group":"Demographic  and Social Statistics "},
    {"year":2005,"country":"Libya","country_id":846,"group":"Demographic  and Social Statistics "}
] 
```

这是我的 JSON 数据，我想根据国家和年份（唯一）过滤它`underscore.js`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:26:34.147

如果要根据某个键选择唯一元素，可以使用[`_.uniq`](http://underscorejs.org/#uniq)(or `_.unique`) 方法。它可以选择使用回调将元素转换为其键以进行比较。具有相同内容的数组比较不同，因此您可能需要将您的 ke 字符串化；`JSON.stringify`可以用于此（或者您可以使用`+`- 后果）：

```
data1=_.uniq(data1, function(x){
    return JSON.stringify([x.year, x.country_id])
}); 
```

演示：http: [//jsfiddle.net/honnza/xGr9e/](http://jsfiddle.net/honnza/xGr9e/)

如果您只想保留具有某些特定值的值`year`和`country_id`，则更容易：

```
data1=_.filter(data1, function(x){
    return x.year === target_year && x.country_id === target_country_id
}); 
```

# php - kendoui网格不显示数据？

> ID：15542720
> 
> 赞同：0
> 
> 时间：2013-03-21T08:38:51.847
> 
> 标签：php, codeigniter, kendo-ui, kendo-grid

我在我的 codeigniter Web 应用程序中使用了 kendoui 网格。

网格正在显示，但其中没有加载任何数据。

这是我所做的详细信息。

我已经使用了查询，并在 json 编码的文件中回显了它。回显的输出是。

```
{"data":[{"Username":"admin","FirstName":"System","MiddleNames":"Default","LastName":"Administrator","City":"Sakhakot","Email":"kifayat@zorkif.com"},{"Username":"guest","FirstName":"System","MiddleNames":"Default","LastName":"Guest","City":"Peshawar","Email":"kifayat@zorkif.com"}]} 
```

我在其中完成上述回显的此数据文件的位置。是

```
http://localhost:12/projects/zorkif_nextgen/user_management/manage_users/list_view/ 
```

这是我想在其中显示网格的视图文件。

```
<?php
/**
 * Created by JetBrains PhpStorm.
 * User: Kill3rCoder-Lapi
 * Date: 3/21/13
 * Time: 10:58 AM
 * To change this template use File | Settings | File Templates.
 */

?>
<div id="grid"></div>
<script>
    $(function(){
        $("#grid").kendoGrid({
            dataSource:{
                read: {
                    read: "<?php echo base_url() ?>/index.php/user_management/manage_users/list_view/"
                },
                schema:{
                    data: "data"
                }
            },
            columns: [
                { field: "Username",
                  title:"Username"
                },
                { field: "FirstName",
                  title:"First Name"
                },
                {field:"MiddleNames"},
                {field:"LastName"},
                {field:"City"},
                {field:"Email"}
     ]
        });
    });
</script> 
```

这是我申请的主要部分。

```
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

    <meta charset="utf-8">
    <title>Zorkif Business One Next Generation</title>

        <link href="<?php echo base_url('kendo_ui/styles/kendo.common.min.css'); ?>" rel="stylesheet">
        <link href="<?php echo base_url('kendo_ui/styles/kendo.default.min.css'); ?>" rel="stylesheet">
        <script src="<?php echo base_url('kendo_ui/js/kendo.web.min.js'); ?>"></script>
        <script src="<?php echo base_url('kendo_ui/js/kendo.grid.min.js'); ?>"></script>

    <link href="<?php echo base_url('styles/zorkif_fluid_main.css'); ?>" rel="stylesheet" type="text/css">
    <!--  Designed By Zorkif.com Team  -->
    <link href="<?php echo base_url('styles/messages.css'); ?>" rel="stylesheet" type="text/css">
    <!--  The main message boxes appearing on the top of the page  -->
    <link href="<?php echo base_url('styles/header.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the header of the page  -->
    <link href="<?php echo base_url('styles/tab_bar.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the Tabs Menu and the Title Section of the page  -->
    <link href="<?php echo base_url('styles/action_buttons.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the action buttons and search box of the page  -->
    <link href="<?php echo base_url('styles/footer.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the header of the page  -->
    <link href="<?php echo base_url('styles/zorkif_slider.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the header of the page  -->
    <link href="<?php echo base_url('styles/login_form.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the header of the page  -->
    <link href="<?php echo base_url('styles/forms.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the form elements in the  page  -->
    <link href="<?php echo base_url('styles/tables.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the default tables and data view and data entry tables in page  -->
    <link href="<?php echo base_url('styles/tiles_cpanel.css'); ?>" rel="stylesheet" type="text/css">
    <!--  To style the information Tiles tabs for the cpanel  -->
    <link href="<?php echo base_url('styles/page_columns.css'); ?>" rel="stylesheet" type="text/css">
    <!--  The file is used to privide column based division of the page design  -->

    <script src="<?php echo base_url('scripts/jquery-1.8.3.min.js'); ?>" type="text/javascript"></script>
    <!--<script type="text/javascript" src="<?php /*base_url('scripts/cssrefreshNONE.js'); */?>"></script><!-- for Develoment Perpose Only and must be removed in the production version -->
    -->
    <!-- Start of Accordion Menu -->
    <link href="<?php echo base_url('scripts/horz_accordion_menu/accordion_menu.css'); ?>" rel="stylesheet" type="text/css">
    <script src="<?php echo base_url('scripts/horz_accordion_menu/accordion_menu.js'); ?>" type="text/javascript"></script>
    <!-- End of Accordion Menu -->

    <!--  Nivo Image Slider -->
    <link rel="stylesheet" href="<?php echo base_url('scripts/nivo-slider/themes/default/default.css'); ?>" type="text/css" media="screen" />
    <link rel="stylesheet" href="<?php echo base_url('scripts/nivo-slider/nivo-slider.css'); ?>" type="text/css" media="screen" />
    <!-- End of Image Slider -->

    <link rel="shortcut icon" href="<?php echo base_url('favicon.ico'); ?>" />

    <!-- Kendo UI Start  -->
        <!-- Kendo UI Web styles -->
        <link href="<?php echo base_url('kendo_ui/styles/kendo.common.min.css'); ?>" type="text/css"  />
        <link href="<?php echo base_url('kendo_ui/styles/kendo.default.min.css'); ?>" type="text/css"  />

        <!-- Kendo UI Web scripts -->
        <script src="<?php echo base_url('kendo_ui/js/jquery.min.js'); ?>" type="text/javascript"></script>
        <script src="<?php echo base_url('kendo_ui/js/kendo.web.min.js'); ?>" type="text/javascript"></script>
</head> 
```

所以现在我不知道我卡在哪里了？？？

有Kendoui专业知识的人吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:35:02.773

你写了：

```
read: {
    read: ...
} 
```

什么时候应该：

```
transport: {
    read: ...
} 
```

顺便说一句，您是否意识到包含两次 KendoUI？此外，您第一次包含它时，您包含之前没有包含 jQuery 的 Kendo。我认为那行不通

# android - Android 动画应用演练

> ID：15542721
> 
> 赞同：0
> 
> 时间：2013-03-21T08:38:55.293
> 
> 标签：android

我有一个项目，我的客户要求为每个屏幕创建动画帮助。他所说的动画帮助的意思是当你启动一个新的模拟器时，它会显示一只手，告诉你该做什么。如果您能给我任何从哪里开始的线索，我将非常感谢您的帮助。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:59:13.983

您应该能够通过使用[此库](https://github.com/Espiandev/ShowcaseView)和一些位图（对于您提到的手）重新创建默认帮助。

# javascript - 如何在 chrome 或 firefox 中获取图像数据或 WebPage 上的图像缓存路径？

> ID：15542724
> 
> 赞同：3
> 
> 时间：2013-03-21T08:39:16.580
> 
> 标签：javascript, google-chrome-extension, firefox-addon

我正在制作一个插件（附加组件）以在任何页面上上传图像。我只能获取图像的url，但我想获取图像数据或图像的本地缓存。

通过 chrome 或 firefox 上的 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T06:25:02.410

我通过画布在我的扩展中做到了。

我创建了两个函数。首先使用“toDataURL()”方法从画布中获取图像数据（将当前画布的内容作为图像返回，您可以将其用作另一个画布或 HTML 元素（如 img）的源），然后使用此数据获取 BLOB 对象。

```
function getImageDataURL(url) {
var data, canvas, ctx, blob;
var img = new Image();

img.onload = function() {
    canvas = document.createElement("canvas");
    canvas.width = img.width;
    canvas.height = img.height;

    ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);

    try {
        data = canvas.toDataURL();
        blob = dataURIToBlob(data);
    } catch(e) {
        // Handle errors here
        alert(e);
    }
};

img.src = url;
};

function dataURIToBlob (dataURI) {
var byteString = atob(dataURI.split(',')[1]);
var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
var ab = [];

for (var i = 0; i < byteString.length; i++) 
    ab.push(byteString.charCodeAt(i)); 

return new Blob([new Uint8Array(ab)], { type: mimeString });
}; 
```

在“blob”变量中，我们有带有完整图像数据的 BLOB 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-10T17:01:40.480

您可以使用 indexeDB（内部浏览器数据库）来存储对象而不是 URL。有关详细使用，请参阅 Google 开发教程。

# java - 我如何将 MS word 的书签导入和读取到 Java

> ID：15542726
> 
> 赞同：0
> 
> 时间：2013-03-21T08:39:26.213
> 
> 标签：java, api, ms-word, bookmarks

这是一个非常难的问题，我搜索了它，但没有找到任何好的答案！我想阅读Word女士的（关键）书签并使用Java程序语言在Word中设置值！我该怎么做？使用 Apache POI 不起作用！：（ 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:20:21.380

好的，我找到了解决方案，并编写了程序。此链接可能对您有所帮助！[http://apache-poi.1045710.n5.nabble.com/How-to-read-the-value-of-bookmarks-docx-td5710184.html](http://apache-poi.1045710.n5.nabble.com/How-to-read-the-value-of-bookmarks-docx-td5710184.html) 但它仅适用于新的 Ms Word (.docx) 对于旧版本 ( .doc）我自己编写了一个方法，但它不能正常工作。对于旧版本，我们应该使用**org.apache.poi.hwpf**但对于新版本**org.apache.poi.xwpf**！对于控制 Ms Word 或 MS Office，我们应该使用**Jacob Project**。有问题可以再问我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T21:05:42.790

你可以用 docx4j 做到这一点。

挑战在于书签是围绕任意内容的点标签。

因此，如果您的意图是替换书签的内容，您最好考虑另一种方法。

有关建议，请参阅[此演示文稿](http://www.slideshare.net/plutext/document-generation-2012osdcsydney)。

# php - PHP ffmpeg 转换错误

> ID：15542736
> 
> 赞同：2
> 
> 时间：2013-03-21T08:40:21.547
> 
> 标签：php, ffmpeg

我尝试使用 ffmpeg 和 PHP 转换一些视频。

当我在 PHP exec() 中执行以下命令时

```
/usr/local/bin/ffmpeg -i /home/test/public_html/test.m4v -vcodec libx264 -acodec libmp3lame -r 30 -s 640x480 -b 100k /home/test/public_html/output_640x480_test.m4v 
```

输出：

```
/usr/local/bin/ffmpeg: line 4: /var/log/ffmpeg.log: Permission denied
FFmpeg version SVN-r26402, Copyright (c) 2000-2011 the FFmpeg developers
  built on Apr 18 2012 05:19:10 with gcc 4.1.2 20080704 (Red Hat 4.1.2-52)
  configuration: --prefix=/usr/local/src/ffmpeg --libdir=/usr/lib64 --shlibdir=/usr/lib64 --mandir=/usr/share/man --incdir=/usr/include --disable-avisynth --extra-cflags='-O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC' --enable-avfilter --enable-libdirac --enable-libfaac --enable-libgsm --enable-libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libx264 --enable-gpl --enable-nonfree --enable-postproc --enable-pthreads --enable-shared --enable-swscale --enable-vdpau --enable-version3 --enable-x11grab --enable-libxvid --enable-libvorbis --enable-libtheora
  libavutil     50.36\. 0 / 50.36\. 0
  libavcore      0.16\. 1 /  0.16\. 1
  libavcodec    52.108\. 0 / 52.108\. 0
  libavformat   52.93\. 0 / 52.93\. 0
  libavdevice   52\. 2\. 3 / 52\. 2\. 3
  libavfilter    1.74\. 0 /  1.74\. 0
  libswscale     0.12\. 0 /  0.12\. 0
  libpostproc   51\. 2\. 0 / 51\. 2\. 0

Seems stream 1 codec frame rate differs from container frame rate: 1200.00 (1200/1) -> 10.00 (10/1)
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/home/test/public_html/test.m4v':
  Metadata:
    major_brand     : M4VP
    minor_version   : 1
    compatible_brands: M4VPM4V M4A mp42isom
    creation_time   : 2013-03-14 10:08:25
    encoder         : Mac OS X v10.7.4 (CMA 891, CM 705.78, x86_64)
    date            : 2013-03-10T14:05:41+1100
  Duration: 00:00:02.30, start: 0.000000, bitrate: 245 kb/s
    Stream #0.0(und): Audio: aac, 32000 Hz, 2 channels (FC), s16, 31 kb/s
    Metadata:
      creation_time   : 2013-03-14 10:08:25
    Stream #0.1(und): Video: h264, yuv420p, 400x226 [PAR 1:1 DAR 200:113], 216 kb/s, 10.35 fps, 10 tbr, 600 tbn, 1200 tbc
    Metadata:
      creation_time   : 2013-03-14 10:08:25
[buffer @ 0xf6093c0] w:400 h:226 pixfmt:yuv420p
[scale @ 0xf609790] w:400 h:226 fmt:yuv420p -> w:640 h:480 fmt:yuv420p flags:0xa0000004
[libx264 @ 0xf605cd0] broken ffmpeg default settings detected
[libx264 @ 0xf605cd0] use an encoding preset (e.g. -vpre medium)
[libx264 @ 0xf605cd0] preset usage: -vpre <speed> -vpre <profile>
[libx264 @ 0xf605cd0] speed presets are listed in x264 --help
[libx264 @ 0xf605cd0] profile is optional; x264 defaults to high
Output #0, ipod, to '/home/test/public_html/output_640x480_test.m4v':
    Stream #0.0(und): Video: libx264, yuv420p, 640x480 [PAR 150:113 DAR 200:113], q=2-31, 800 kb/s, 90k tbn, 10 tbc
    Metadata:
      creation_time   : 2013-03-14 10:08:25
    Stream #0.1(und): Audio: libmp3lame, 32000 Hz, 2 channels, s16, 64 kb/s
    Metadata:
      creation_time   : 2013-03-14 10:08:25
Stream mapping:
  Stream #0.1 -> #0.0
  Stream #0.0 -> #0.1
Error while opening encoder for output stream #0.0 - maybe incorrect parameters such as bit_rate, rate, width or height 
```

相同的转换在另一台服务器上运行良好。但不是在我们当前的服务器中。我应该怎么做才能摆脱这个错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-24T09:31:33.243

尝试重新安装 ffmpeg 并重试。

安装指南：[http ://w3tool.blogspot.in/search/label/ffmpeg](http://w3tool.blogspot.in/search/label/ffmpeg)

# java - HQL 查询中的 java.lang.NullPointerException

> ID：15542740
> 
> 赞同：5
> 
> 时间：2013-03-21T08:40:34.983
> 
> 标签：java, hibernate, hql

我有一个 HQL 查询，我通过传递一个列表来检查某些详细信息！确切地说是一个数组列表。下面是 HQL 查询。

```
<prop key="GET_HOTEL_TAX_RECORDS">
<![CDATA[
    select
        HotelLevelTax
    from HotelLevelTax ht
    left join ht.hotel as h
    left join ht.tax as t
    where h.id in (:hotelId) and t.id in (:taxId) order by ht.id
]]>
</prop> 
```

下面是我用来传输两个参数数组列表的代码。

```
if(searchCriteria.getHotel().getId() != null && searchCriteria.getTax().getId() != null){
    params.put("hotelId", searchCriteria.getHotel().getId());
    params.put("taxId", searchCriteria.getTax().getId());
}else{
    params.put("hotelId", hotels);
    params.put("taxId", tax);
}

Query k = queryManager.getQuery(GET_HOTEL_TAX_RECORDS, params, em); 
```

我从给定参数的 getQuery 行中得到一个空指针异常！在第一次运行时，searchCriteria 参数为空，所以 else 将被执行！我无法弄清楚 nullpointer 异常发生在哪里！

谢谢你。

这是我的堆栈跟踪！

```
 Unable to translate Exception : java.lang.NullPointerException
    java.lang.NullPointerException
at         org.hibernate.hql.ast.util.SessionFactoryHelper.findSQLFunction(SessionFactoryHelper.java:342)
at org.hibernate.hql.ast.tree.IdentNode.getDataType(IdentNode.java:266)
at         org.hibernate.hql.ast.tree.SelectClause.initializeExplicitSelectClause(SelectClause.java:143)
at org.hibernate.hql.ast.HqlSqlWalker.useSelectClause(HqlSqlWalker.java:705)
at org.hibernate.hql.ast.HqlSqlWalker.processQuery(HqlSqlWalker.java:529)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.query(HqlSqlBaseWalker.java:645)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.selectStatement(HqlSqlBaseWalker.java:281)
at org.hibernate.hql.antlr.HqlSqlBaseWalker.statement(HqlSqlBaseWalker.java:229)
at org.hibernate.hql.ast.QueryTranslatorImpl.analyze(QueryTranslatorImpl.java:228)
at org.hibernate.hql.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:160)
at org.hibernate.hql.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:111)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:77)
at org.hibernate.engine.query.HQLQueryPlan.<init>(HQLQueryPlan.java:56)
at org.hibernate.engine.query.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:72)
at org.hibernate.impl.AbstractSessionImpl.getHQLQueryPlan(AbstractSessionImpl.java:133)
at org.hibernate.impl.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:112)
at org.hibernate.impl.SessionImpl.createQuery(SessionImpl.java:1623)
at org.hibernate.ejb.AbstractEntityManagerImpl.createQuery(AbstractEntityManagerImpl.java:92)
at sun.reflect.GeneratedMethodAccessor166.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.orm.jpa.JpaTemplate$CloseSuppressingInvocationHandler.invoke(JpaTemplate.java:404)
at $Proxy1043.createQuery(Unknown Source)
at com.jkcs.khms.persistence.platform.HQLQueryManager.getQuery(HQLQueryManager.java:67)
at com.jkcs.khms.persistence.cashiering.impl.jpa.HotelTaxDaoImpl$1.doInJpa(HotelTaxDaoImpl.java:68)
at org.springframework.orm.jpa.JpaTemplate.execute(JpaTemplate.java:184)
at org.springframework.orm.jpa.JpaTemplate.execute(JpaTemplate.java:147)
at com.jkcs.khms.persistence.cashiering.impl.jpa.HotelTaxDaoImpl.findTaxByHQL(HotelTaxDaoImpl.java:54)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:77)
at com.jkcs.khms.persistence.platform.aspects.PersistenceProfilerAspect.profile(PersistenceProfilerAspect.java:56)
at sun.reflect.GeneratedMethodAccessor165.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:627)
at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:616)
at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:64)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:77)
at com.jkcs.khms.persistence.platform.aspects.PersistenceExceptionTranslatorAspect.invokeAndTranslate(PersistenceExceptionTranslatorAspect.java:65)
at sun.reflect.GeneratedMethodAccessor164.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:627)
at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:616)
at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:64)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy692.findTaxByHQL(Unknown Source)
at com.jkcs.khms.service.internal.HotelTaxServiceImpl.searchHotelTaxByHQL(HotelTaxServiceImpl.java:106)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:77)
at com.jkcs.khms.service.platform.aspects.ServiceProfilerAspect.profile(ServiceProfilerAspect.java:56)
at sun.reflect.GeneratedMethodAccessor162.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:627)
at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:616)
at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:64)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:54)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
at $Proxy712.searchHotelTaxByHQL(Unknown Source)
at com.jkcs.khms.service.api.impl.CashieringServiceBean.searchHotelTaxByHQL(CashieringServiceBean.java:256)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:112)
at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:166)
at com.jkcs.khms.service.platform.security.AuthenticationContextInterceptor.intercept(AuthenticationContextInterceptor.java:67)
at sun.reflect.GeneratedMethodAccessor195.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.jboss.ejb3.interceptor.InvocationContextImpl.proceed(InvocationContextImpl.java:118)
at org.jboss.ejb3.interceptor.EJB3InterceptorsInterceptor.invoke(EJB3InterceptorsInterceptor.java:63)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:54)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:79)
at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:191)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:95)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:62)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.aspects.remoting.ReplicantsManagerInterceptor.invoke(ReplicantsManagerInterceptor.java:51)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.aspects.security.AuthenticationInterceptor.invoke(AuthenticationInterceptor.java:77)
at org.jboss.ejb3.security.Ejb3AuthenticationInterceptor.invoke(Ejb3AuthenticationInterceptor.java:110)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:46)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.asynchronous.AsynchronousInterceptor.invoke(AsynchronousInterceptor.java:106)
at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:101)
at org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:240)
at org.jboss.ejb3.stateless.StatelessContainer.localInvoke(StatelessContainer.java:210)
at org.jboss.ejb3.stateless.StatelessLocalProxy.invoke(StatelessLocalProxy.java:84)
at $Proxy201.searchHotelTaxByHQL(Unknown Source)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:198)
at $Proxy1091.searchHotelTaxByHQL(Unknown Source)
at com.jkcs.khms.web.cashiering.hotelTax.HotelTaxAction.performSearch(HotelTaxAction.java:111)
at com.jkcs.khms.web.cashiering.hotelTax.HotelTaxAction.execute(HotelTaxAction.java:63)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:404)
at com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:267)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:229)
at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:184)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.jkcs.khms.web.platform.struts2.json.AerisJSONParamsIntercepter.doIntercept(AerisJSONParamsIntercepter.java:68)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:88)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.jkcs.khms.web.platform.struts2.interceptors.PageExceptionFlowInterceptor.doIntercept(PageExceptionFlowInterceptor.java:59)
at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at com.jkcs.khms.web.platform.struts2.interceptors.ProfileLoggingInterceptor.intercept(ProfileLoggingInterceptor.java:48)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:422)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:182)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:524)
at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:84)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:157)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:262)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:446)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T18:25:10.567

那是因为查询不正确。`ht`应使用定义的别名代替`HotelLevelTax`SELECT 子句：

```
select ht
from HotelLevelTax ht 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-20T21:21:47.117

万一其他人遇到这种情况，它也可能发生在一些语法错误上，比如`)`列表末尾的悬空。

# java - JAVA - 找出差异

> ID：15542742
> 
> 赞同：0
> 
> 时间：2013-03-21T08:40:38.553
> 
> 标签：java

我遇到了下面的问题，但是无论我采取什么方法，我都无法让它通过所有测试。谁能指出我哪里出错了？

该问题必须使用 Math.abs() 和 IF 语句来解决，没有循环/函数/等。

```
////////////////////////////// PROBLEM STATEMENT //////////////////////////////
// Given three ints, a b c, print true if one of b or c is "close"           //
// (differing from a by at most 1), while the  other is "far", differing     //
// from both other values by 2 or more. Note: Math.abs(num) computes the     //
// absolute value of a number.                                               //
//   1, 2, 10 -> true                                                        //
//   1, 2, 3 -> false                                                        //
//   4, 1, 3 -> true                                                         //
/////////////////////////////////////////////////////////////////////////////// 
```

我的代码：

```
 if ((Math.abs(a-b) <= 1 || Math.abs(a+b) <= 1) && (Math.abs(a-c) >= 2 || Math.abs(a+c) >= 2)) {

    if (Math.abs(a-c) >= 2 || Math.abs(a+c) >= 2) {
      System.out.println("true");
    } else {
      System.out.println("false");
    }

  } else if (Math.abs(a-c) <= 1 || Math.abs(a+c) <= 1) {

    if (Math.abs(a-b) >= 2 || Math.abs(a+b) >= 2) {
      System.out.println("true");
    } else {
      System.out.println("false");
    } 

  } else {
     System.out.println("false"); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:51:04.607

似乎过于复杂，您可能想要更简单的东西：

```
boolean abIsClose = Math.abs(a-b) <= 1;
boolean acIsClose = Math.abs(a-c) <= 1;
boolean bcIsClose = Math.abs(b-c) <= 1;
boolean result = abIsClose && !acIsClose && !bcIsClose;
result = result || (!abIsClose && acIsClose && !bcIsClose);
result = result || (!abIsClose && !acIsClose && bcIsClose); 
```

Abs 总是给出一个正数，这样你就不需要确认一个值在 -1 和 1 之间，你只需要确认 <= 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:54:23.973

您可以将其分解为两种可能的情况`true`

1.  `b`近而`c`远
2.  `c`近而`b`远

现在，1\. 是什么意思？

*   `b`很近 -`Math.abs(a-b) <= 1`
*   `c`很远 -`Math.abs(a-c) >= 2 && Math.abs(b-c) >= 2`

所以我们最终得到

```
if (Math.abs(a - b) <= 1 && Math.abs(a - c) >= 2 && Math.abs(b - c) >= 2) {
    return true;
} 
```

现在将相同的逻辑应用于第二个条件：

```
if (Math.abs(a - c) <= 1 && Math.abs(a - b) >= 2 && Math.abs(b - c) >= 2) {
    return true;
} 
```

所以最终的方法看起来像：

```
public static boolean myMethod(int a, int b, int c) {
    if (Math.abs(a - b) <= 1 && Math.abs(a - c) >= 2 && Math.abs(b - c) >= 2) {
        return true;
    }
    if (Math.abs(a - c) <= 1 && Math.abs(a - b) >= 2 && Math.abs(b - c) >= 2) {
        return true;
    }
    return false;
} 
```

输出：

```
public static void main(String[] args) {
    System.out.println(myMethod(1, 2, 10));
    System.out.println(myMethod(1, 2, 3));
    System.out.println(myMethod(4, 1, 3));
}
true
false
true 
```

# excel - On Error Goto 0 不重置错误捕获

> ID：15542747
> 
> 赞同：9
> 
> 时间：2013-03-21T08:40:58.913
> 
> 标签：excel, error-handling, vba

我的印象是`On Error GoTo 0`重置错误处理。

那么为什么似乎`On error resume next`没有在下面注册呢？

```
Sub GetAction()
Dim WB As Workbook
Set WB = ThisWorkbook

On Error GoTo endbit:
'raise an error
Err.Raise 69
Exit Sub
endbit:
On Error GoTo 0 '<<<reset error handling?

On Error Resume Next
WB.Sheets("x").Columns("D:T").AutoFit
MsgBox "ignored error successfully and resumed next"    

End Sub 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-21T10:24:55.713

您需要使用`On Error GoTo -1` *或* `Err.Clear`重置错误捕获。

检查我几个月前发布的[这个答案以获得更详细的解释。](https://stackoverflow.com/questions/14158901/difference-between-on-error-goto-0-and-on-error-goto-1-vba/14159999#14159999)

# java - 在 JAXB 中，我可以创建一个 Unmarshaller 实例并使用它多次解组 xml 节点或文件吗？

> ID：15542754
> 
> 赞同：2
> 
> 时间：2013-03-21T08:41:28.053
> 
> 标签：java, xml, jaxb, sax

我使用 SAX 解析一个很大的 xml 文件，该文件很大并且有很多重复的节点。并使用JAXB将解析后重复的dom节点映射到javabeans中进行持久化。

这是我的代码片段。我使用 JAXB 的`partial unmarshalling`示例代码，它在每次启动节点解析时创建 Unmarshaller 对象。***我可以将它重用于整个 xml 解析或缓存它以用于多个 xml 解析吗？***

```
public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException {
    ...

    if (namespaceURI.equals("") && localName.equals( “product” )) {
        Unmarshaller unmarshaller = null;
        try {
            //I want to reuse it, not create it in each startElement method
            unmarshaller = jaxbContext.createUnmarshaller();
        } catch (JAXBException e) {
            throw new SAXException(e);
        }
    ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T08:49:26.863

只要您的 JAXBContext 没有改变，您就可以重用 unmarshaller。

另请参阅[JAXBContext 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/JAXBContext.html)。它包含一个为多个 XML 文件重用相同解组器的示例，仅当上下文（的包`BazObject`不在上下文路径上）更改时，您需要从不同的上下文创建一个新的解组器。

# prolog - Prolog二叉树节点值计数

> ID：15542755
> 
> 赞同：0
> 
> 时间：2013-03-21T08:41:31.893
> 
> 标签：prolog

谁能帮助我如何在 Prolog 中实现计算二叉树所有节点数的谓词？

例如：

```
tree1(tree(1,
        tree(2,
            tree(3,nil,nil),
            tree(4,nil,nil)),
        tree(5,
            tree(6,nil,nil),
            tree(7,nil,nil))
    )
). 
```

会返回 28。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:48:18.933

简单的递归解决方案。*不是*尾递归的。

```
treesum(nil, 0).
treesum(tree(X,T1,T2), S) :-
    treesum(T1, S1), treesum(T2, S2),
    S is X+S1+S2. 
```

# php - 从表单中检索 POST 复选框数据（如果存在）

> ID：15542757
> 
> 赞同：0
> 
> 时间：2013-03-21T08:41:40.177
> 
> 标签：php, post, checkbox

你好知识渊博的人。我无法从表单中检索复选框数据。我有一个网站，用户可以在其中自己添加复选框，所以我将它们写成这样：

```
<table style="padding:10px;">
            <?php

            $query_boolean = $DB->prepare("SELECT * FROM moduls WHERE type='boolean'") or die(mysql_error());
            $query_boolean->execute();
            while (($row = $query_boolean->fetch()) != false)
                {

                    ?>
                    <tr>
                        <td>
                        <?php echo $row->name ?>:
                        </td>
                        <td>
                            <?php
                            $s = "";

                            $s .= sprintf('<input type="checkbox" class="textbox" name="boolean_%s" value="yes">%s', $row->id, Yes);
                            $s .= sprintf('<input type="checkbox" class="textbox" name="boolean_%s" value="no">%s', $row->id, No);

                            echo $s;
                            ?>
                        </td>
                    </tr>
                    <?php

                    }
                    ?>

            </table> 
```

现在我有一个高级搜索，我必须检查每个复选框以查看已选择的内容（ether none、Yes、No 或两者）。如何从变量中的每个复选框中获取信息？太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:46:34.760

要从复选框中获取 POST 数据，它们必须具有属性

> 检查=“检查”

编辑：如果你有 2 个这样的复选框..

```
<input type="checkbox" checked="checked" class="textbox" name="boolean_yes" value="yes">
<input type="checkbox" class="textbox" name="boolean_no" value="no"> 
```

当您提交表单时，带有选中属性的复选框将作为 POST 发送，而没有选中属性的复选框将不会发送..

```
if(isset($_POST['search'])) {
    $all_checked = array();
    foreach($_POST as $key=>$value){
       if(strpos($key, "boolean_") > -1){
          $all_checked[$key] = $value;
       }
    }

    var_dump($all_checked);
} 
```

这样，您将进入 $all_checked 数组中所有标记的框。所有其他复选框均未标记！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:48:46.103

如果要获取复选框值，则使用复选框名称作为数组

```
<input type="checkbox" name="email1[]" value=""> 
```

在另一页上得到它

```
<?php

$var2 = $_POST['email1'];
$v=implode(",",$var2);

echo $v;
?> 
```

试试看

# c# - 如何在 C# 应用程序中使用带有 Nustache 的 Partials？

> ID：15542759
> 
> 赞同：2
> 
> 时间：2013-03-21T08:41:43.723
> 
> 标签：c#, mustache

我有一个使用 Nustache 的 Windows 应用程序。我可以使用 Nustache 迭代对象或数组，但是如何使用 Nustache 进行部分枚举？

[检查此链接](http://coenraets.org/blog/2011/12/tutorial-html-templates-with-mustache-js/)

检查样品 11。

```
var data = { depts: [
{   name: "Engineering",
    employees: [
        {firstName: "Christophe", lastName: "Coenraets"},
        {firstName: "John", lastName: "Smith"}]
},
{   name: "Sales",
    employees: [
        {firstName: "Paula", lastName: "Taylor"},
        {firstName: "Lisa", lastName: "Jones"}]
}]     };

 var tpl = "{{#depts}}<h1>{{name}}</h1>" +
          "<ul>{{#employees}}{{>employee}}{{/employees}}</ul>{{/depts}}";

var partials = {employee:"<li>{{firstName}} {{lastName}}</li>"};
var html = Mustache.to_html(tpl, data, partials);
$('#sampleArea').html(html); 
```

如何在 C# 中实现相同的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T06:08:21.600

修改tpl如下图！

```
var tpl = "{{employee}}<li>{{firstName}} {{lastName}}</li>{{/employee}}{{#depts}}<h1>{{name}}</h1>" +
      "<ul>{{#employees}}{{>employee}}{{/employees}}</ul>{{/depts}}"; 
```

然后传递您的对象数组。它会正确获取。！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-20T03:46:41.993

我知道这是一个老问题，但我发现有一种方法可以满足您的要求。Nustache 允许使用 < 符号创建模板或部分内联，因此 {{>employee}}此处的部分模板 {{/employee}} 将是您的部分模板，然后当您要引用它时，只需使用 > 符号，例如：{{>员工}}

从 readme.txt 文件

```
64      {{<foo}}This is the foo template.{{/foo}}
65      The above doesn't get rendered until it's included
66      like this:
67      {{>foo}} 
```

所以你在 nastache 中的新代码将是：

```
 string tpl = "{{<employee}}<li>{{firstName}} {{lastName}}</li>{{/employee}}" +
"{{#depts}}<h1>{{name}}</h1><ul>{{#employees}}{{>employee}}{{/employees}}</ul>{{/depts}}";

    string html = Nustache.Core.Render.StringToString(tpl, data); 
```

使用这种技术允许递归模板渲染，下面将渲染部门和员工的层次结构

```
{{<employee}}<li>{{firstname}} {{lastname}}{{>dept}}</li>{{/employee}}
{{<dept}}   
    <ul>                            
        <li >
            <span >{{name}}</span>                  
            {{#employees}}                          
                {{>employee}}
            {{/children}}           
        </li>                       
    </ul>
{{/dept}}{{>dept}} 
```

# json - jqgrid 无法显示 json 数据

> ID：15542760
> 
> 赞同：0
> 
> 时间：2013-03-21T08:41:43.857
> 
> 标签：json, jqgrid, jqgrid-php

这真的让我发疯，我读过一些问题：

1.  [如何从 url 显示 jqgrid（本地数据有效，url 数据无效）](https://stackoverflow.com/questions/13402160/how-to-display-jqgrid-from-url-local-data-works-url-data-does-not)
2.  [jqGrid 不显示 JSON 数据](https://stackoverflow.com/questions/5018177/jqgrid-not-displaying-json-data)
3.  [jqGrid 不显示 JSON 数据](https://stackoverflow.com/questions/6682240/jqgrid-not-displaying-json-data)
4.  [jgGrid不显示json数据](https://stackoverflow.com/questions/3164347/jggrid-not-displaying-json-data)

他们都不适合我的案子。我已经在[http://jsonlint.com/](http://jsonlint.com/)上检查了我的 json ，它说**有效 JSON**。我希望 jqgrid 显示将从`localhost/mine/jqgrid/json`中输出的表：

```
[{"id":"1","invdate":"1","name":"1","note":"1","amount":"1"},
{"id":"2","invdate":"2","name":"2","note":"2","amount":"2"},
{"id":"3","invdate":"3","name":"3","note":"3","amount":"3"},
{"id":"4","invdate":"4","name":"4","note":"4","amount":"4"},
{"id":"5","invdate":"5","name":"5","note":"5","amount":"5"}] 
```

这是我的脚本：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        {nocache}
        <title>{$title}</title>
        {/nocache}
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!--jqGrid sangat tergantung kepada CSS jquery-ui-->
        <link rel="stylesheet" type="text/css" media="screen" href="{#base_url#}/mine/assets/default/styles/jqgrid/jquery-ui-custom.css" />
        <link rel="stylesheet" type="text/css" media="screen" href="{#base_url#}/mine/assets/default/styles/jqgrid/ui.jqgrid.css" />  
        <style type="text/css">
        html, body {
            margin: 0;
            padding: 0;
            font-size: 1em;
        }
        </style> 
        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        <script src="{#base_url#}/mine/assets/default/scripts/jqgrid/jquery.js" type="text/javascript"></script>
        <script src="{#base_url#}/mine/assets/default/scripts/jqgrid/jquery-ui-custom.min.js" type="text/javascript"></script>
        <script src="{#base_url#}/mine/assets/default/scripts/jqgrid/grid.locale-en.js" type="text/javascript"></script>
        <script src="{#base_url#}/mine/assets/default/scripts/jqgrid/jquery.jqGrid.min.js" type="text/javascript"></script>
        <!--prevent Smarty to parsing--> 
         {literal}
        <script type="text/javascript">
        $(function(){ 
          $("#list").jqGrid({
            //ini buat paging, value nya adalah ID dari HTML
            pager: '#pager',
            url:'localhost/mine/jqgrid/json',
            datatype: "json",
            height: 300,
            colNames:['ID','Inv Date','Name', 'Note','Amount','Tax','Total'],
            /**
             * to able to sort the right way, u must include sorttype:'int' for integer field
             */
            colModel :[ 
              {name:'id', index:'id',width:20, sorttype:'int'},
              {name:'invdate', index:'invdate', width:55}, 
              {name:'name', index:'name', width:90}, 
              {name:'note', index:'note', width:80, align:'right'}, 
              {name:'amount', index:'amount', width:80, align:'right'}, 
              {name:'tax', index:'tax', width:80, align:'right'}, 
              {name:'total', index:'total', width:150, sortable:true} 
            ],
            rowNum: 10,
            rowList:[10,20,30,40,50],
            recordpos: 'right',
            viewrecords: true,
            sortorder: "desc",
            sortname: "id",
            sorttype: "integer",
            viewrecords: true,
            multiselect: false,
            caption: "Manipulating JSON Data",
            recordtext: "Lihat {0} - {1} dari {2}",
            emptyrecords: "Tidak ada data",
            loadtext: "Loading...",
            pgtext : "Page {0} of {1}",
            jsonReader : { 
                repeatitems: false,
                id: "id",
                root: function (obj) {
                return obj;
            }},    
          });
        });
        </script>
        {/literal}
        <!--end of parsing-->
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!--this is it, jqGrid load in here-->
        <table id="list"><tr><td/></tr></table> 
        <div id="pager"></div> 
        <!--end of jqGrid-->
        <p>{#app_name#}</p>
    </body>
</html> 
```

请帮我解决这个问题，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:50:33.660

我认为您发布的代码几乎是正确的。[该演示](http://www.ok-soft-gmbh.com/jqGrid/barreybunshin.htm)使用您的 JSON 数据和几乎您的代码。它显示

![在此处输入图像描述](../Images/4047db580ec3626cf505201bc1c6b2e8.png)

我只删除了选项的重复`viewrecords`项并更改`height: 300`为`height: "auto"`更好看。`loadonce: true`如果您一次从服务器加载所有数据，我建议您使用。`datatype`在第一次从服务器加载数据后将更改为的情况下，`"local"`以后所有的数据排序、分页和过滤都将在本地实现。

我不知道你的代码有什么错误。一种可能的原因可能是服务器响应中的 HTTP 标头错误，因此 JSON 响应将被 jQuery 解释为 XML 或 HTML 数据。`loadError`如果网格仍然为空，我建议您另外包含回调以获取有关错误的更多信息。查看[答案](https://stackoverflow.com/a/6969114/315935)以获取更多详细信息。

顺便说一句，我发布[了建议](http://www.trirand.com/blog/?page_id=393/feature-request/autodetection-of-input-json-format/#p28404)（请参阅[src-file](http://www.ok-soft-gmbh.com/jqGrid/jquery.jqGrid-4.4.4/js/jquery.jqGrid.src-dynamicReader1.js)），这将允许自动检测输入 JSON 格式的不同变化。我希望 trirand 会接受这个建议，并且人们会看到更少关于读取 JSON 数据的问题的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:29:14.500

你的 json 数据应该是这样的

```
{
"page":"1",
   "total":2,
   "records":"13", 
   "rows": [{"id":"1","invdate":"1","name":"1","note":"1","amount":"1"},
            {"id":"2","invdate":"2","name":"2","note":"2","amount":"2"},
            {"id":"3","invdate":"3","name":"3","note":"3","amount":"3"},
            {"id":"4","invdate":"4","name":"4","note":"4","amount":"4"},
            {"id":"5","invdate":"5","name":"5","note":"5","amount":"5"}] 
} 
```

并改变

```
jsonReader : { 
                repeatitems: false,
                id: "id",
                root: function (obj) {
                return obj;
            }}, 
```

到

```
jsonReader : { 
             repeatitems: false,
             id: "id"
             }, 
```

# c# - 在多个线程中处理堆栈项

> ID：15542762
> 
> 赞同：3
> 
> 时间：2013-03-21T08:41:51.643
> 
> 标签：c#, multithreading, c#-4.0, concurrency

我有一个[ConcurrentStack](http://msdn.microsoft.com/en-us/library/dd267331.aspx)，其中的每一项都是一些网络资源的 URL。我也有 N 个线程（实际上`Tasks`），每个线程从堆栈进程中弹出一个项目，并根据某些标准将结果（结果是集合）添加到此堆栈或其他输出队列中。应该这样做，直到堆栈变空。

识别此过程结束并停止此任务的更优雅的方法是什么？换句话说，如何识别堆栈是空的并且没有执行任务会向堆栈添加更多项

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:37:56.443

终止条件似乎是当所有从堆栈读取的任务*都*在等待一个项目被堆积到堆栈时。当然，只有当您为任务提供一种被动等待该事件的方法时，才会发生这种情况。正如其他答案所建议的那样，您可以`BlockingCollection`在类的顶部使用`ConcurrentStack`来实现同步。

关于终止，最简单的方法是让一个任务（终止任务）等待该条件，所有其他任务操作一个表示等待任务数量的整数，在阻塞集合之前将其递增，并在获取项目时递减它. 当该数字达到堆栈的可能读取器总数时，当前尝试获取项目的任务会在阻塞集合之前触发条件变量，这将唤醒终止线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:52:36.953

由于您使用的是实现[IProducerConsumerCollection的 ConcurrentStack，因此您可以使用](http://msdn.microsoft.com/en-gb/library/dd287147.aspx)[BlockingCollection](http://msdn.microsoft.com/en-gb/library/dd267312.aspx)包装它（通过使用[此构造函数](http://msdn.microsoft.com/en-us/library/dd287133.aspx)创建一个）。这提供了一个[CompleteAdding()](http://msdn.microsoft.com/en-us/library/dd287086.aspx)方法，该方法允许您指示数据的结束。

底层的 IProducerConsumerCollection 将用于存储项目，因此它的行为仍然类似于堆栈，因为它是 LIFO。

您需要切换到使用[GetConsumingEnumerable()](http://msdn.microsoft.com/en-us/library/dd381957.aspx)重载之一来使用数据。我发现这是处理优雅任务终止的最优雅和最强大的方式。

也许这对你有用？

# javascript - 跨不同浏览器定位

> ID：15542764
> 
> 赞同：0
> 
> 时间：2013-03-21T08:42:03.483
> 
> 标签：javascript, html, browser, cross-browser

当我创建网页时，我希望页面上的所有功能都放在不同浏览器中的相同位置。有时，当我在不同的浏览器上运行页面时，某些功能被放置在不同的位置。我使用这些变量来确定正在打开的浏览器是正确的，例如，我使用 if 语句来确定一些选项。

```
//var firefox = (navigator.userAgent.indexOf("Firefox") != -1);
//var opera = (navigator.userAgent.indexOf("Opera") != -1);
//var ie = (navigator.userAgent.indexOf("MSIE") != -1);
//var safari = (navigator.userAgent.indexOf("Safari") != -1);
//var scrome = (navigator.userAgent.indexOf("Chrome") != -1); 
```

**1\. 当某些功能在不同浏览器的不同位置放置时，这样做是一种好方法吗？**

**2.我使用'navigator.userAgent.indexOf(...)'时返回什么类型。它是布尔值还是某种返回参数位置的集合，就像哈希表一样？究竟返回什么类型？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:02:29.753

所以你在找这个我想：

```
 <!--[if IE]> 
   <link rel="stylesheet" type="text/css" href="style.css" />
    <!--> 
```

该代码应放置在页面的 Head 部分中，您可以为每个浏览器指定多个 css 页面，例如此链接适用于 IE（Internet Explorer）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:59:49.063

(1) 不要根据用户代理字符串做浏览器检测。这是非常不可靠的，而且在 2013 年非常不可靠。您想使用像 modernizr 这样的框架来检测支持哪些功能（哪些不支持）。[这](http://modernizr.com/docs/)是一个好的开始。

(2) 不是一个集合，只是一个描述搜索到的字符串在原始字符串中的位置的数字。请参阅[此处](http://www.w3schools.com/jsref/jsref_indexof.asp)，或自行了解：

```
typeof(navigator.userAgent.indexOf("foo")) 
```

(3) 顺便说一句：发布初学者问题的好名字；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:57:24.127

1.  不同的浏览器可能有不同的初始位置行为，使它们行为相同的一个好做法是进行 CSS 重置。

2.  `navigator.userAgent`是一个字符串对象，因此`.indexOf(...)`返回整数`Number`

# jquery - Jquery 的多重选择器在 IE 中不起作用

> ID：15542769
> 
> 赞同：2
> 
> 时间：2013-03-21T08:42:33.373
> 
> 标签：jquery

我已经开发了这个代码来使 div 的高度与特定的 div 相同，但它在 IE9 及更低版本中不起作用。我不知道我正在做的错误......

演示：- [http://jsfiddle.net/ZWkm5/](http://jsfiddle.net/ZWkm5/)

JS：-

```
$(window).load(function() {

    var getWrapHeight = $('#wrap').height();
    console.log(getWrapHeight);
    $(".a1, .a2, .a3, .a4").css({
        "height" : getWrapHeight,
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:45:50.930

`console.log`实际上会在 IE 中引发 JavaScript 错误，因为它不存在。

如果您在 IE 中打开了“显示有关每个脚本错误的通知”设置，您会得到（这就是我得到的，我已经打开了）：

> 错误：“控制台”未定义。

删除它，它的工作原理。

**演示：http: [//jsfiddle.net/ZWkm5/1/](http://jsfiddle.net/ZWkm5/1/)**

**如果您真的想保留该登录，您可以将其替换为：**

```
if (window.console){
    console.log(getWrapHeight);
} 
```

# matlab - 如何从合并两个数字中删除第三个图例

> ID：15542770
> 
> 赞同：0
> 
> 时间：2013-03-21T08:42:34.540
> 
> 标签：matlab, plot

我在 [这里](https://stackoverflow.com/questions/15530943/merge-2-matlab-fig-into-1-how-to-use-color-linewidth-etc-using-copyobj)指的是这个问题。

我的问题是，在我创建的第 3 个图例中（有 2 个图例）有 3 个图例。2 个没问题，但有第 3 个图例（图 1 或图 2 中的图例）。如何以编程方式擦除它？

```
fig1=open('fig1.fig');
fig2=open('fig2.fig');

ax1=get(fig1,'Children');
ax2=get(fig2,'Children');

for i = 1 : numel(ax2) 

   ax2Children = get(ax2(i),'Children');
   tri=get(ax1(i),'Children');
   hold on;
   first=copyobj(tri, ax1(i));
   second=copyobj(ax2Children, ax1(i));

end

set(first,'color','g','marker','o');
set(second,'color','b','marker','x');
legend(first, {'first'}, 'Location','NorthWest', 'Color','g');
legend(second, {'second'}, 'Location','NorthWest', 'Color','b'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T20:56:11.513

你必须`hasbehavior(tri,'legend',false)` 在上面使用

```
set(hasbehavior(temp,'legend',false) 
```

# ruby-on-rails - 在 Rails 中重构为部分

> ID：15542772
> 
> 赞同：0
> 
> 时间：2013-03-21T08:42:37.667
> 
> 标签：ruby-on-rails, partial-views

在第 1 页中，我使用代码 A+B+C

在第 2 页中，我使用代码 B+C

因此，当我制作部分内容时，我真的不知道如何处理这个问题。

例如，在评论后系统中。我想在 2 个不同的页面中显示 @comments。在评论索引页面中，我们显示它所属的帖子。而在post show页面，我们只需要展示comments的内容。（因为不需要再展示comment.post）

```
 #Comment Index Page
    <% @comments.each do |comment| %>
        <%=  comment.post %>
        <%=  comment.author %>
        <%=  comment.content %>
    <% end %> 
```

..

```
 #Post Show Page
    <% @comments.each do |comment| %>
        <%=  comment.author %>
        <%=  comment.content %>
    <% end %> 
```

那么，如何使部分代码重用呢？也许像这样？但这有更优雅的方法吗？

```
 #Comment Index Page
    <% @comments.each do |comment| %>
        <%=  comment.post %>
        <%= render comment %>
    <% end %>

    #Post Show Page
    <% @comments.each do |comment| %>
        <%= render comment %> 
```

## <% 结束 %>

更新：我采用局部变量方法，并更新我的代码，如：

```
 # partial

    <% if include_topic %>
        <div class="Topic">
          <h5><%= link_to "#{comment.topic.content}", comment.topic %></h5>
        </div>
    <% end %>
    #Index
    <%= render @comments, :locals => {:include_topic => true } %> 
```

但是我得到未定义的局部变量或方法 `include_topic' for #<# 我只是找不到调试这个问题的地方

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:49:27.567

你的部分：

```
<%=  comment.post if include_post %>
<%=  comment.author %>
<%=  comment.content %> 
```

你的代码：

```
#index page
<%= render :partial => "partial_path", :collection => @comments, :as => :comment, :locals => {:include_post => true } %>

#show page
<%= render :partial => "partial_path", :collection => @comments, :as => :comment, :locals => {:include_post => false } %> 
```

语法可能要短得多，但这取决于您是否遵守 Rails 约定，[请参阅 doc](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)。

旁注：我不喜欢 1.8.7 语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:50:21.430

在局部，

```
<% comments.each do |comment| %>
  <%=  comment.post if params[:controller] == "comments" %>
  <%=  comment.author %>
  <%=  comment.content %>
<% end %> 
```

现在通过将**评论**指定为局部变量，在评论/索引和帖子/显示页面中呈现这个部分。

# java - Java验证图像头

> ID：15542775
> 
> 赞同：5
> 
> 时间：2013-03-21T08:42:39.383
> 
> 标签：java, image, bytearray

我有一个要求，我需要不是通过文件扩展名而是通过验证标题来识别图像的类型。我正在尝试通过幻数验证来验证 JPEG 文件。

```
File imgFile =
   new File("C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg");
byte[] ba = Files.toByteArray(imgFile); //Its a google guava library
int i = 0; 
if(ba [i] == 0xFF && ba[i+1] == 0xD8 && ba[i+2] == 0xFF && ba[i+3] == 0xE0){
   System.out.println("isJPEG");
} 
```

但条件根本得不到满足。`ba[i]` 返回`-1`。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T09:08:02.930

在 Java 中，`byte`原语是有符号的，范围从 -128 到 127，这意味着你的`ba[0]`输出为`-1`，而`0xFF`被解释为 int as `255`。`0xFF`如果您使用运算符进行按位与运算，`&`这会将有符号字节转换为正确的值，您的代码将正常工作，如下所示：

```
 File imgFile =
           new File("C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg");
        byte[] ba = Files.toByteArray(imgFile); //Its a google guava library
        int i = 0; 
        if((ba [i] & 0xFF) == 0xFF && (ba[i+1] & 0xFF) == 0xD8 && (ba[i+2] & 0xFF) == 0xFF 
           && (ba[i+3] & 0xFF) == 0xE0) {
           System.out.println("isJPEG");
        } 
```

但是，我不确定您使用的确切逻辑，因为 wikipedia 指出 JPEG 的幻数如下：

> JPEG 图像文件以 FF D8 开头并以 FF D9 结尾

`FF E0`是 JFIF 特定的，因此您可能需要仔细检查为什么要检查这个

以下是用于根据 Wikipedia 进行检查的代码：

```
 File imgFile =                 
                    new File("C:\\Users\\Public\\Pictures\\Sample Pictures\\Chrysanthemum.jpg");
        byte[] ba = Files.toByteArray(imgFile); //Its a google guava library
        int i = 0; 
        if((ba [i] & 0xFF) == 0xFF && (ba[i+1] & 0xFF) == 0xD8 && (ba[ba.length - 2] & 0xFF) == 0xFF 
           && (ba[ba.length - 1] & 0xFF) == 0xD9) {
           System.out.println("isJPEG");
        } 
```

# javascript - JavaScript - 简单查询

> ID：15542780
> 
> 赞同：0
> 
> 时间：2013-03-21T08:43:00.253
> 
> 标签：javascript, jquery

请参阅我已经拥有的[JSFiddle代码。](http://jsfiddle.net/cEaeK/13/)我的问题是我需要在文本字段中使用无线电检查**和**文本输入来启用其他无线电、复选框和文本字段。到目前为止，我只设法使用单选选项 1**或**单选选项 2 启用单选、复选框和文本字段。

这个[JSFiddle](http://jsfiddle.net/cEaeK/13/)可能会帮助你们，让你们更好地理解我的意思。

**HTML：**

```
 <div class='conlabel'>Have you started trading yet?</div>
  <table width="100">
          <tr>
            <td><label>
              <input type="radio" name="example" value="Yes" id="example_0" required />
              Yes</label></td>
      </tr>
      <tr>
        <td><label>
          <input type="radio" name="example" value="No" id="example_1" required />
          No</label></td>
      </tr>
</table><br>
  <li>
      <div class='conlabel'>If Yes, enter trading name:</div>
      <input type="text" id="field1" name="field1" placeholder="" disabled />
  </li><br>
  <li>
  <div class='conlabel'>If No, then:</div>
      <input type="text" id="field2" name="field2" placeholder="" disabled />
  </li><br>

<li>
      <div class='conlabel'>Enter trading start date (enabled when started trading yet = yes + trading name = notnull:</div>
      <input type="text" id="field3" name="field3" placeholder="" disabled />
 </li><br> 
```

**JS：**

```
$(function(){
$("#example_0, #example_1").change(function(){
    $("#field1, #field2").val("").attr("disabled",true);
    if($("#example_0").is(":checked")){
        $("#field1").removeAttr("disabled");
        $("#field1").focus();
    }
    else if($("#example_1").is(":checked")){
        $("#field2").removeAttr("disabled");
        $("#field2").focus();   
    }
});
}); 
```

在此示例中，代码当前启用并关注 field1**或**field2，具体取决于它们是 radio-example_0 还是 example_1。我无法弄清楚的是，如果他们选择是（example_0），然后在字段 1 中输入交易名称，那么如何启用字段 3。

希望这比我上次的尝试更清楚。谢谢你的帮助！（：

**答：由**[Daniel V](https://stackoverflow.com/users/989452/daniel-v)捐赠。

```
$(function(){
    $("#example_0, #example_1").change(function(){
        $("#field1, #field2").val("").attr("disabled",true);
            if($("#example_0").is(":checked")){
            $("#field1").removeAttr("disabled");
            $("#field1").focus();
        }
        else if($("#example_1").is(":checked")){
            $("#field2").removeAttr("disabled");
            $("#field2").focus();   
        }
    });
    });

$("#field1").blur(function(){
    if($("#example_0").is(":checked")){
             if($("#field1").val()!==""){
                   $("#field3").removeAttr("disabled");
            }
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:59:27.943

是的，您可以创建一个选择器来查找选中的复选框和一个非空文本框：

```
if ($('#example1:checked,#textfield1[value!=""]').length == 2) { 
```

演示：http: [//jsfiddle.net/Guffa/rQKRH/](http://jsfiddle.net/Guffa/rQKRH/)

### 编辑：

使用该 HTML 代码，您可以使用它来确定是否应启用文本框：

```
var enable = $('#example_0').is(':checked') && $('#field1').val() != ''; 
```

演示：http: [//jsfiddle.net/Guffa/cEaeK/18/](http://jsfiddle.net/Guffa/cEaeK/18/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:58:23.223

我不确定我是否理解你的正确，但你的意思是这样吗？

```
 if(($("#example1").is(":checked"))&&!$('#input').val()){//do} 
```

演示：http: [//jsfiddle.net/WULPL/1/](http://jsfiddle.net/WULPL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T11:20:26.967

```
 $("#field1").blur(function(){
   if($("#example_0").is(":checked")){
            if($("#field1").val()!==""){
                  $("#field3").removeAttr("disabled");
            }
        }
    }); 
```

# jquery - 如何以最简单的方式添加类和移除类

> ID：15542781
> 
> 赞同：0
> 
> 时间：2013-03-21T08:43:01.370
> 
> 标签：jquery

在某个其他元素收到点击事件之后，通过使用`addClass`和切换隐藏元素的最短方法是什么。`removeClass`

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#pps_Link").on('click', function(evt) {
            evt.preventDefault();
            var pssd = $(".psSelectDD");
            if (!pssd.hasClass("db")) {
                pssd.removeClass("dn").addClass("db");
            } else if (!pssd.hasClass("dn")) {
                pssd.removeClass("db").addClass("dn")
            }
            evt.stopPropagation();
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:44:51.873

而不是做`addClass()`和`removeClass()`seperataly ，为什么不只使用[toggleClass()](http://api.jquery.com/toggleClass/)：

像这样：

```
$(".psSelectDD").toggleClass('dn db'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:45:54.393

在这种情况下，ToggleClass 应该可以帮助您：http: [//api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

```
$(".psSelectDD").toggleClass('dn db'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:44:58.863

哇，你可以用两行完全相同的东西：

```
$("#pps_Link").click(function() {
    $(".psSelectDD").toggleClass('dn db');
    return false;
}); 
```

[切换类](http://api.jquery.com/toggleClass/#toggleClass-className)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:48:45.620

尝试以这种方式使用 toggleClass：

```
$("#pps_Link").on('click', function(evt) {
   evt.preventDefault();
   var pssd = $(".psSelectDD");
   pssd.toggleClass("db dn");
   evt.stopPropagation();
}); 
```

# c++ - 64 位 Windows 上的全局 Keyhook

> ID：15542783
> 
> 赞同：1
> 
> 时间：2013-03-21T08:43:13.043
> 
> 标签：c++, winapi, hook, keyhook

我目前无法在 Windows 7 64 位操作系统上使用全局键挂钩。现在我知道 Stackoverflow 上已经有很多关于这个主题的主题了，但是没有一个能给我一个我可以使用的答案，或者我不太明白这些主题是如何解决这个问题的。

因此，我将尝试解释我正在努力解决的问题，并希望任何人都可以帮助我或为我指明正确的方向。

基本上，我的目标是拦截 CTRL+C 和 CTRL+V 键盘输入，以实现一种剪贴板管理器。出于这个原因，我目前的尝试是注册一个系统范围的`WH_KEYBOARD`钩子，它可以根据我的需要处理截获的击键。

我在 64 位 Windows 7 O/S 上运行挂钩，这就是问题开始的地方。对我来说很明显 32 位 Hook DLL 会导致 64 位进程出现问题，反之亦然。出于这个原因，我生成了包含钩子的库的 x86 和 x64 版本，以及钩子的调用者（调用者`SetWindowsHookEx()`），两者都具有不同的文件名，如文档所示。

但是现在呢？如果我将我的 64 位 DLL 设置为**系统范围的钩子**，则所有 32 位应用程序只要我在聚焦时按下一个键就会开始挂起。当我应用 32 位挂钩时，我的 Windows 实际上无法使用，因为它`explorer.exe`是 64 位的。如果我设置了两个钩子，我的系统就会陷入停顿状态，从而引发一场全球性的“比特”斗争。

现在我假设问题出在例如试图注入 32 位进程的 64 位挂钩 DLL 等等，这当然是毫无意义的。但是对于这种情况，文档`SetWindowsHookEx()`说明如下：

> 因为钩子在应用程序的上下文中运行，所以它们必须与应用程序的“位数”相匹配。如果 32 位应用程序在 64 位 Windows 上安装全局挂钩，则 32 位挂钩将被注入每个 32 位进程（通常的安全边界适用）。在 64 位进程中，线程仍被标记为“已挂钩”。**但是，由于 32 位应用程序必须运行钩子代码，系统会在钩子应用程序的上下文中执行钩子；具体来说，在调用 SetWindowsHookEx 的线程上。这意味着挂钩应用程序必须继续发送消息，否则可能会阻止 64 位进程的正常运行。**

我不完全理解文本的粗体部分，但我将其解释为如果钩子目标的“位数”与钩子不同，它将在实际设置钩子的线程上执行所以它完全可以执行。此外，这意味着该线程必须仍然处于活动状态并且可能正在运行某种消息循环。它是否正确？还是我完全不喜欢这个？该文档似乎还提供了有关如何处理我的场景的确切说明：

> 要在 64 位 Windows 安装的桌面上钩住所有应用程序，请安装一个 32 位全局钩子和一个 64 位全局钩子，每个钩子都来自相应的进程，并确保在钩子应用程序中保持泵送消息，以避免阻塞正常运作。

但是我无法掌握在我的实施中必须做的事情。为了最终展示一些代码，让我们以这个尝试设置系统范围的 keyhook 的基本示例为例。我猜线程的创建代码应该是无关紧要的：

```
volatile static bool runThread = false;

DWORD WINAPI threadStart(LPVOID lpThreadParameter) {
    HMODULE hMod = LoadLibraryA(is64Bit() ? "keyhook.x64.dll" : "keyhook.x86.dll");
    HHOOK hHook = SetWindowsHookExA(WH_KEYBOARD, (HOOKPROC)GetProcAddress(hMod, "hookProc"), hMod, 0)));

    runThread = true;
    while(runThread) {
        // Message pump? Yes? No? How?
        Sleep(10);
    }

    UnhookWindowsHookEx(hHook);
    FreeLibrary(hMod);
    return 0;
} 
```

钩子本身保持相当简单 - 在跨越位数时足以引起挂断问题：

```
extern "C" LRESULT hookProc(int code, WPARAM wParam, LPARAM lParam) {
    if(code == HC_ACTION) {
    }

    return CallNextHookEx(nullptr, code, wParam, lParam);
} 
```

我想有些人现在可能会把手举过头顶，你可以看出我很少使用钩子；）

但这正是我要问的原因:)

简而言之：如果有人能告诉我如何更改上述示例以使系统范围的 keyhook 在 64 位 Windows 上工作，我将不胜感激。我的问题是某些具有除钩子之外的其他“位数”的应用程序开始挂起，我不知道如何解决这个问题。

很感谢任何形式的帮助！

谢谢并恭祝安康

葡萄干

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T18:35:50.400

好的，我知道问题出在哪里了。也许我的解决方案可以帮助其他遇到同样问题的人：如上所述，文档明确指出

> [...] 系统在（32 位）挂钩应用程序的上下文中执行（32 位）挂钩；具体来说，在调用 SetWindowsHookEx 的线程上。这意味着挂钩应用程序必须继续发送消息，否则可能会阻止 64 位进程的正常运行。

我遇到的是上面提到的阻塞行为，应该通过消息泵来克服。在我上面的代码示例中，正是缺少这种机制，因为我不知道这应该是一个简单的 Windows 消息循环（我以前不知道“泵”这个词）。我的初始代码中的最终代码片段必须如下所示：

```
volatile static bool runThread = false;

DWORD WINAPI threadStart(LPVOID lpThreadParameter) {
    HMODULE hMod = LoadLibraryA(is64Bit() ? "keyhook.x64.dll" : "keyhook.x86.dll");
    HHOOK hHook = SetWindowsHookExA(WH_KEYBOARD, (HOOKPROC)GetProcAddress(hMod, "hookProc"), hMod, 0)));

    MSG msg;
    runThread = true;
    while(runThread) {
        // Keep pumping...
        PeekMessage(&msg, nullptr, 0, 0, PM_REMOVE);
        TranslateMessage(&msg);
        DispatchMessage(&msg);
        Sleep(10);
    }

    UnhookWindowsHookEx(hHook);
    FreeLibrary(hMod);
    return 0;
} 
```

在此示例中，我使用非阻塞`PeekMessage()`而不是`GetMessage()`，因为我希望我的线程不断检查它的终止标志。

有了这个实现，我的钩子在所有本机 64 位或 WOW64 进程中都按预期工作，没有应用程序在钩子后立即挂起。消息泵是唯一缺少的部分。

经过所有这些实验后，我得出以下结论 - 如果我错了，请在评论中纠正我：

当安装了系统范围的钩子时，它会尝试将给定的 Hook-DLL 注入到每个正在运行的进程中。如果进程的“位数”与 Hook-DLL 中的“位数”匹配，则挂钩过程将作为目标进程中的远程线程执行（就像正常的 Injectors 工作一样）。如果“位数”不同，Windows 会回退到最初调用的进程和线程`SetWindowsHookEx()`（在我的示例中是代码片段中的线程），并充当不匹配的进程的执行代理“比特”。出于这个原因，这个线程需要不断地处理传入的消息，否则将不会为原始目标进程处理任何事件，这反过来又开始挂起。

同样，如果这不完全正确，不完整，或者如果有任何进一步的注释要添加，请在下面发表评论。谢谢！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-02T11:29:46.493

我的解决方案是将钩子应用程序（在其中`SetWindowsHookEx()`被调用）和 DLL（回调钩子函数所在的位置）编译为 x86 和 x64 版本。因此，我们有两个 EXE（xxx-x86.exe 和 xxx-x64.exe）和两个 DLL（xxx-x86.dll 和 xxx-x64.dll）。

然后实现一个复杂的 IPC 协议来同步 x86 应用和 x64 应用之间的数据。它看起来很有效，不会阻止另一个“位数”无与伦比的进程。但是很难处理精确的事件序列，它只能作为事件的粗略指标。

这个解决方案很丑陋，但我没有更好的方法......

# android - Android 的 loopj 中的响应字符串为空白

> ID：15542787
> 
> 赞同：0
> 
> 时间：2013-03-21T08:43:31.493
> 
> 标签：android, rest, response, loopj

这是我使用 loopj 用于异步 Http 请求的代码。

```
AsyncHttpClient loopjClient = new AsyncHttpClient();

    PersistentCookieStore loopjCookieStore = new PersistentCookieStore(this);
    loopjClient.setCookieStore(loopjCookieStore);

    RequestParams loopjParams = new RequestParams();
    loopjParams.put("username", username);
    loopjParams.put("email", emailID);
    loopjParams.put("password", password);
    Log.d(TAG, "RRRRRRlll");

    loopjClient.post("http://www.example.com/", loopjParams, new AsyncHttpResponseHandler() {
        @Override
        public void onSuccess(int k,String response) {
            super.onSuccess(k, response);
            Log.d(TAG, "RRRRRR "+ response );
        }

    }); 
```

我的服务器响应字符串就是以下没有 HTML 标记的字符串

```
{"AUTHENTICATION":{"SUCCESS":false,"USERNAME":"unregistered","USERID":0},"ALERTBOX":{"SHOW":true,"MESSAGE":"Message : Username or email ID already registered. Please choose a different one."}} 
```

但`loopj`不会在`onSuccess()`.

你能告诉我如何获取字符串还是我必须回退到默认的 Android http 库？

提前致谢。

**编辑**

如果我用“facebook”替换它而不是“example”（我的网站），我只会得到以下字符串作为响应，并带有 200 响应代码`<?xml version="1.0" encoding="utf-8"?>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:50:08.530

由于 AUTHENTICATION 的结果失败，我想知道您的服务器返回的状态码是否不是 200。您可以重写 onFailure 方法来处理这种情况。

```
@Override
public void onFailure(Throwable e) {
    Log.d(TAG, e.toString());
} 
```

**编辑**
另一个猜测，您是否在 Manifest.xml 中添加了以下行？

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

**再次编辑**
我看到了你的编辑，看起来你有一个有问题的 LogCat，就像评论中提到的@shailendra-rajawat，因为 LogCat 只打印了第一行。试试 Toast：

```
@Override
public void onSuccess(int k, String response) {
    Toast.makeText(getBaseContext(), response, 1).show();
} 
```

我发现[这篇文章](https://stackoverflow.com/a/11760332/928315)用于配置您的 LogCat，也许您可​​以尝试一下。（我的是 5000 仅供参考）

# c++ - 嗅探 UDP 端口是否存在数据，而不会阻止其他应用程序

> ID：15542790
> 
> 赞同：0
> 
> 时间：2013-03-21T08:43:36.567
> 
> 标签：c++, udp

从我的应用程序中，我想知道是否有一些数据到达 UDP 端口。同时我不希望我的应用程序阻塞另一个监听这个 UDP 端口的应用程序（VLC 播放器）。我只是想知道是否有任何数据来。

我使用 VLC-broadcast UDP 和另一个 VLC 进行接收。

在我的 C++ 应用程序中，我尝试为此使用 select()，但在 bind()'ing 套接字 VLC 后停止显示数据。

操作系统是Windows。

# jquery - 与同一网页上的 jQuery / CSS 样式的多个选择冲突

> ID：15542797
> 
> 赞同：0
> 
> 时间：2013-03-21T08:44:00.300
> 
> 标签：jquery, html, css, forms

所以我在一个使用 Jquery 和 CSS 样式的网站上有一个选择菜单（更少的 CSS，你会在规则中看到一些 @ 变量）。我需要做的是在同一页面上添加另一个选择菜单。但是，当我尝试这样做时，其中一个框无法正常工作，这似乎是 javascript 冲突（无疑是 id="dd" 部分）这是我拥有的代码，这一切都适用于一个选择框：

# HTML

```
<div id="dd" class="offers-menu" tabindex="1">Offer Menu
<ul id="menu-offers-menu" class="dropdown"><li><a href="#DayTrips">Day Trips</a></li>
<li><a href="#Excursions">Excursions for several days</a></li>
<li><a href="#Wellness">Wellness and beauty treatment on the boat</a></li>
<li><a href="#Events">Events like Cooking lessons</a></li>
<li><a href="#Catering">Catering /Self Catering</a></li>
<li><a href="#WaterSports">Water Sports</a></li>
</ul> 
</div> 
```

# CSS

```
.offers-menu {
/* Size & position */
position: relative;
width: 230px;
z-index: 99;
/* Styles */
background: @mainBlue;
border-radius: 5px;
box-shadow: 0 1px 0 rgba(0,0,0,0.2);
cursor: pointer;
outline: none;
-webkit-transition: all 0.3s ease-out;
-moz-transition: all 0.3s ease-out;
-ms-transition: all 0.3s ease-out;
-o-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
color: #fff;
float: right;
margin-top: 0;
margin-right: auto;
margin-bottom: 0;
margin-left: auto;
padding-top: 12px;
padding-right: 15px;
padding-bottom: 12px;
padding-left: 15px;
font-family: @mainFont;
}
.offers-menu:after { /* Little arrow */
content: "";
width: 0;
height: 0;
position: absolute;
top: 50%;
right: 15px;
margin-top: -3px;
border-width: 6px 6px 0 6px;
border-style: solid;        
border-color: #4cbeff transparent;
}
.offers-menu .dropdown {
/* Size & position */
position: absolute;
top: 100%;
left: 0;
right: 0;
/* Styles */
background: #fff;
border-radius: 0 0 5px 5px;
border: 1px solid rgba(0,0,0,0.2);
border-top: none;
border-bottom: none;
list-style: none;
-webkit-transition: all 0.3s ease-out;
-moz-transition: all 0.3s ease-out;
-ms-transition: all 0.3s ease-out;
-o-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
/* Hiding */
max-height: 0;
overflow: hidden;
}
.offers-menu .dropdown li {
padding: 0 10px;
}
.offers-menu .dropdown li a {
display: block;
text-decoration: none;
color: #333;
padding: 10px 0;
transition: all 0.3s ease-out;
border-bottom: 1px solid #e6e8ea;
}
.offers-menu .dropdown li:last-of-type a {
border: none;
}
.offers-menu .dropdown li i {
margin-right: 5px;
color: inherit;
vertical-align: middle;
}
/* Hover state */

.offers-menu .dropdown li:hover a {
color: @mainBlue;
}
/* Active state */

.offers-menu.active {
border-radius: 5px 5px 0 0;
background: @mainBlue;
box-shadow: none;
border-bottom: none;
color: white;
}
.offers-menu.active:after {
border-color: #82d1ff transparent;
}
.offers-menu.active .dropdown {
border-bottom: 1px solid rgba(0,0,0,0.2);
max-height: 400px;
} 
```

# 查询

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">

function DropDown(el) {
this.dd = el;
this.initEvents();
}
DropDown.prototype = {
initEvents : function() {
var obj = this;
obj.dd.on('click', function(event){
$(this).toggleClass('active');
event.stopPropagation();
}); 
}
}
$(function() {
var dd = new DropDown( $('#dd') );
$(document).click(function() {
// all dropdowns
$('.offers-menu').removeClass('active');
});
});
</script> 
```

这是我添加/修改以在页面上获得额外选择菜单的代码，但它没有工作！有人可以帮忙吗？

# HTML

```
<div id="dd" class="mobile-menu" tabindex="1">Offer Menu
<ul id="menu-offers-menu" class="dropdown"><li><a href="#DayTrips">Day Trips</a></li>
<li><a href="#Excursions">Excursions for several days</a></li>
<li><a href="#Wellness">Wellness and beauty treatment on the boat</a></li>
<li><a href="#Events">Events like Cooking lessons</a></li>
<li><a href="#Catering">Catering /Self Catering</a></li>
<li><a href="#WaterSports">Water Sports</a></li>
</ul> 
</div> 
```

# CSS

```
.mobile-menu {
/* Size & position */
position: relative;
width: 230px;
z-index: 99;
/* Styles */
background: @mainBlue;
border-radius: 5px;
box-shadow: 0 1px 0 rgba(0,0,0,0.2);
cursor: pointer;
outline: none;
-webkit-transition: all 0.3s ease-out;
-moz-transition: all 0.3s ease-out;
-ms-transition: all 0.3s ease-out;
-o-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
color: #fff;
float: right;
margin-top: 0;
margin-right: auto;
margin-bottom: 0;
margin-left: auto;
padding-top: 12px;
padding-right: 15px;
padding-bottom: 12px;
padding-left: 15px;
font-family: @mainFont;
}
.mobile-menu:after { /* Little arrow */
content: "";
width: 0;
height: 0;
position: absolute;
top: 50%;
right: 15px;
margin-top: -3px;
border-width: 6px 6px 0 6px;
border-style: solid;        
border-color: #4cbeff transparent;
}
.mobile-menu .dropdown {
/* Size & position */
position: absolute;
top: 100%;
left: 0;
right: 0;
/* Styles */
background: #fff;
border-radius: 0 0 5px 5px;
border: 1px solid rgba(0,0,0,0.2);
border-top: none;
border-bottom: none;
list-style: none;
-webkit-transition: all 0.3s ease-out;
-moz-transition: all 0.3s ease-out;
-ms-transition: all 0.3s ease-out;
-o-transition: all 0.3s ease-out;
transition: all 0.3s ease-out;
/* Hiding */
max-height: 0;
overflow: hidden;
}
.mobile-menu .dropdown li {
padding: 0 10px;
}
.mobile-menu .dropdown li a {
display: block;
text-decoration: none;
color: #333;
padding: 10px 0;
transition: all 0.3s ease-out;
border-bottom: 1px solid #e6e8ea;
}
.mobile-menu .dropdown li:last-of-type a {
border: none;
}
.mobile-menu .dropdown li i {
margin-right: 5px;
color: inherit;
vertical-align: middle;
}
/* Hover state */

.mobile-menu .dropdown li:hover a {
color: @mainBlue;
}
/* Active state */

.mobile-menu.active {
border-radius: 5px 5px 0 0;
background: @mainBlue;
box-shadow: none;
border-bottom: none;
color: white;
}
.mobile-menu.active:after {
border-color: #82d1ff transparent;
}
.mobile-menu.active .dropdown {
border-bottom: 1px solid rgba(0,0,0,0.2);
max-height: 400px;
} 
```

# 查询

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">

function DropDown(el) {
this.dd = el;
this.initEvents();
}
DropDown.prototype = {
initEvents : function() {
var obj = this;
obj.dd.on('click', function(event){
$(this).toggleClass('active');
event.stopPropagation();
}); 
}
}
$(function() {
var dd = new DropDown( $('#dd') );
$(document).click(function() {
// all dropdowns
$('.offers-menu').removeClass('active');
$('.mobile-menu').removeClass('active');
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T14:06:42.357

您需要创建一个新的 DropDown 对象才能使用另一个选择菜单。

```
var dd2 = new DropDown( $('#dd') ); 
```

# jquery - jsp中的模态弹出窗口

> ID：15542800
> 
> 赞同：2
> 
> 时间：2013-03-21T08:44:10.847
> 
> 标签：jquery, jsp, simplemodal, modalpopups, modalpopup

我希望我的表单在单击生成按钮时显示一个弹出窗口。当弹出窗口显示时，背景应该褪色。

下面是包含生成按钮的表单。

```
<table class="ds_box" cellpadding="0" cellspacing="0" id="ds_conclass" style="display: none;">
        <tr><td id="ds_calclass">
            </td></tr>
    </table>
    <form name="cashreciept" method="POST" action="/ColdStorage/cashreciept" id="cashreciept">

        <div id="maindiv" >
            <div align="center">
                <p>&nbsp;</p>
                <p id="Title" align="center">CHANDNA COLD STORAGE
                </p>
            </div><br>
            <p align="center" style="font-size: 21px">CASH RECIEPT</p>
            <fieldset>
                <legend>CASH RECIEPT DETAILS:</legend>
                <table width="823" height="146" border="0" cellpadding="10">
                    <tr>
                        <td width="155">AGREEMENT  NO.: </td>
                        <td width="272" height="56"><input type="text" name="agrno" id="agrno" placeholder="Agreement No" value ="<%=agrno%>" >
                            <input type="button" name="Fill Details" id="fill details" value="FILL DETAILS" width="10px" height="10px" onClick="javascript:submitcash()"></td>

                        <td width="124">RECIEPT NO.:</td>
                        <td width="182" height="56"><input type="text" name="Recieptno" id="Recieptno" placeholder="Reciept no" value="<%=recno%>"></td>
                    </tr>

                    <tr>
                      <td>LOT NO.:</td>
                        <td height="78"><input type="text" name="lotno" id="lotno" placeholder="Lot No" value ="<%=agrno%>/<%=bags%>"> </td>

                        <td>DATE : </td>
                        <td height="78"><input onClick="ds_sh(this);" name="Date" readonly style="cursor: text" placeholder="Date" value="<%=date2%>" /><br /> </td>

                    <script type="text/javascript" src="js/calendar.js" lang="Javascript"></script>
                    </tr>
                </table>
            </fieldset>
            <p>&nbsp;</p>

            <fieldset>

                <legend>STORAGE DETAILS:</legend
                ><table width="823" border="0" cellpadding="10">
                    <tr>
                        <td height="41">NAME:</td>
                      <td width="689"><input name="Name" type="text" id="Name" placeholder="Name" width="400px" value="<%=fname%> <%=lname%>" size="40px"></td>
                    </tr>
                    <tr>
                        <td width="88" height="46">VILL/P.O:</td>
                      <td width="689"><input type="text" name="Village" id="Village" placeholder="Village" width="400px" value="<%=village%>" size="40px" ></td>
                    </tr>
                </table>
                <table width="823" border="0" cellpadding="10">
                    <tr><br><br>
                    <td width="153"><label>PRODUCT NAME :</label></td>
                    <td width="624"> POTATO</td>
                    </tr>
                </table>

              <table width="526" border="0" cellpadding="10">
                    <tr>
                        <td width="144" height="80"><p>Wt(QTY)</p>
                            <p>
                                <input name="Weight" type="text" id="weight" size="10" placeholder="Weight" value="<%=wt%>" >
                            </p></td>
                        <td width="144" height="80" ><p>BAGS</p>
                            <p>
                                <input name="Bags" type="text" id="bags" size="10" placeholder="Bags" value="<%=bags%>" >
                            </p></td>
                        <td width="144" height="80"><p>RATE
                            </p>
                            <p>
                                <input name="Rate" type="text" id="rate" size="10" placeholder="Rate" value="<%=rate%>" >
                            </p></td>
                    </tr>
                </table>
            </fieldset>
            <p>&nbsp;</p>
          <fieldset>
                <legend></legend>
                <legend>PAYMENT DETAILS:
                </legend>
                <table width="94" border="0" cellpadding="10">
                    <tr>
                        <td width="88" height="56"><p>AMOUNT</p>
                            <p>
                                <input name="Amount" type="text" id="amount" size="10" placeholder="Amount" value="<%=amt%>" >
                            </p></td>
                    </tr>
                </table>

              <table width="823" height="78" border="0" cellpadding="10">
                    <tr>
                        <td width="105" height="72"><p>ADVANCE
                            </p><p>
                                -
                                <input name="Advance" type="text" id="advance" size="10" placeholder="Advance" value="<%=advamt%>">
                            </p></td>
                        <td width="134"><p>ADD AMOUNT
                            </p>
                            <p>
                                +
                                <input name="Addamt" type="text" id="addamt" size="10" placeholder="Additional amt">
                            </p></td>
                        <td width="138"><p>LESS AMOUNT</p>
                            <p>
                                -
                                <input name="Lessamt" type="text" id="lessamt" size="10" placeholder="Less Amount">
                            </p></td>
                        <td width="130"><p>POL AMOUNT</p>
                            <p>
                                +
                                <input name="Polamt" type="text" id="polamt" size="10" placeholder="Pol Amount">
                            </p></td>
                        <td width="204"><p><strong>TOTAL AMOUNT</strong></p>
                            <p>
                                =
                                <input name="Total" type="text" id="total" size="10" placeholder="Total Amount" onfocus="javascript:totalamt()">
                            </p></td>
                    </tr>
                </table>

          </fieldset>
          <p>&nbsp;</p>
            <p>GATE PASS :
              YES
              <input name="radio" type="radio" id="YES"        onClick="MM_showHideLayers('Gatepass','','show','Print','','show')"  value="YES"/>
              NO 
              <input name="radio" type="radio" id="NO"     onClick="MM_showHideLayers('Gatepass','','hide','Print','','hide')"  value="NO">
          </p>
            <p> 
```

每当我单击生成按钮时，它都会调用 javascript 函数，该函数又会调用另一个我想将其显示为弹出窗口的 jsp 页面。

那个jsp页面是

```
 <body>

    <fieldset id="gatepass" class="popup">

        <p align="center"><span style="size: 40px; font-size: 24px; alignment-adjust:middle">CASH RECIEPT</span></p>

        <table width="453" border="0" align="center" cellpadding="20px">
            <tr>
                <td width="188" height="51">RECIEPT NO : 
                    <label id="recno"><%=recieptno%></label></td>
                <td width="179">DATE : <label id="date"><%=date%></label></td>
            </tr>
            <tr>
                <td height="57">NAME : <label id="name" > <%=firstname%> <%=lastname%></label></td>
                <td>VILLAGE : <label id="village"> <%=vill%></label></td>
            </tr>
        </table>

        <p>&nbsp;</p>
        <table width="697" height="52" border="0" align="center" cellpadding="20px">
            <tr>
                <td width="205">AGREEMENT NO : <label id="agrno"> <%=agreno%></label> </td>
                <td width="149">LOT NO : <label id="lotno"><%=agreno%>/<%=bag%></label></td>
                <td width="151">BAGS : <label id="bags" ><%=bag%></label></td>
                <td width="174"> VEHICLE NO : <label id="vehicle"></label></td>
            </tr>
        </table>
        <p>&nbsp;</p>
        <table width="200" height="47" border="0" align="center" cellpadding="20px">
            <tr>
                <td> TOTAL AMOUNT : 
                    <label onloadstart="javascript:totalamt()" id="Totalamt" name ="total"></label></td>

            </tr>
        </table>
        <p align="center">
        <p align="center">
            <input type="button" name="Print" id="Print" value="PRINT">
            <input type="button" name="close" id="close" value="CLOSE" onClick = "closePopup();"  /> 

        <p>&nbsp;</p>
        <p>&nbsp;</p>
        <p>&nbsp;</p>

    </fieldset>
</div> 
```

谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T08:46:21.373

```
<div id="divId"><jsp:include page="jspName"/></div>

 function MM_showHideLayers()
 {
   $('#divId').dialog({ modal: true });
 } 
```

我不是关于 jsp:include 的确切语法

# extjs - Sencha Touch 数据视图和初始化不能一起工作

> ID：15542801
> 
> 赞同：0
> 
> 时间：2013-03-21T08:44:18.077
> 
> 标签：extjs, initialization, touch, dataview

我的代码有问题。我想使用 Sencha Touch DataView 并且一切正常，直到我尝试放置初始化事件。当我把它初始化时，我的数据视图无法生成。这是我的代码。你能帮助我吗 ：）？

```
Ext.define("xxx.view.Spread", {
extend: 'Ext.DataView',
xtype: 'xxxspread',
id: 'spreadForm',   
config : {
    styleHtmlContent: true,
    store: {
        //autoLoad: true,
        fields: ["name", "desc"],
        data: [
            {name: 'test',  desc: "testtest"},
            {name: 'test',  desc: "test"},
        ],
    },

    itemTpl: '<img src="https://si0.twimg.com/profile_images/1089012240/sencha-logo_normal.png" /><h1>{name}</h1><p>{desc}</p><div style="clear: both"></div>',

},  

initialize: function() {
    console.log("init");
},

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:48:03.483

您将不得不为您的`listeners`, 并在那里捕捉`initialize`事件。

```
config: {
    styleHtmlContent: true,
    store : ...
    //More config here
    listeners: {
        initialize: function() { console.log('init'); }
    }
} 
```

# docopt - Docopt - 需要一个或多个选项

> ID：15542804
> 
> 赞同：0
> 
> 时间：2013-03-21T08:44:46.923
> 
> 标签：docopt

我有三个参数： --a --b --c 并且我希望我的命令至少接受其中一个参数，但 a/b/c 的所有组合也是有效的。例如：

```
command.py --a
command.py --a --b
command.py --a --b --c
... 
```

但并非没有论据：

```
command.py 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T09:33:14.167

> 我希望我的命令至少接受其中一个

您可以执行以下操作：

```
>>> from docopt import docopt
>>> u = '''usage: command.py --a [--b --c]
...               command.py --b [--a --c]
...               command.py --c [--a --b]'''
>>> docopt(u, ['--a'])
{'--a': True,
 '--b': False,
 '--c': False}
>>> docopt(u, ['--b'])
{'--a': False,
 '--b': True,
 '--c': False}
>>> docopt(u, ['--c'])
{'--a': False,
 '--b': False,
 '--c': True}
>>> docopt(u, [])
usage: command.py --a [--b --c]
       command.py --b [--a --c]
       command.py --c [--a --b] 
```

尽管这可能不是最用户友好的命令行界面。也许，你可以更详细地解释你的接口，我可以建议你如何实现它（可能不仅有选项，还有命令和位置参数）。

# php - 查找关联数组的相同键值的平均值

> ID：15542808
> 
> 赞同：2
> 
> 时间：2013-03-21T08:44:53.653
> 
> 标签：php, arrays, associative-array, average

我有一个数组，例如

```
//$ary, $ary contains some 80 entries, I'm showing only the first 10
Array
(
    [0] => Array
        (
            [December 2012] => 58
        )
    [1] => Array
        (
            [November 2012] => 84
        )
    [2] => Array
        (
            [December 2012] => 83
        )
    [3] => Array
        (
            [November 2012] => 72
        )
    [4] => Array
        (
            [November 2012] => 47
        )
    [5] => Array
        (
            [December 2012] => 93
        )
    [6] => Array
        (
            [November 2012] => 79
        )
    [7] => Array
        (
            [October 2012] => 70
        )
    [8] => Array
        (
            [November 2012] => 75
        )
    [9] => Array
        (
            [October 2012] => 59
        )
    [10] => Array
        (
            [December 2012] => 67
        )
) 
```

我可以使用以下方法获得每个月的总数：

```
foreach($ary as $array)
{   
    foreach($array as $month=>$cent)
    {

        if(isset($abc[$month])) // prevent index warning
        {           
            $abc[$month] += $cent;
           // tried using $abc[$month] = $abc[$month]/2 but wrong values were returned
        }
        else
        {
            $abc[$month] = $cent;
        }
    }
} 
```

这导致

```
Array
(
    [December 2012] => 2195
    [November 2012] => 2159
    [October 2012] => 1631
) 
```

但我无法找到一种方法来找到每个月的平均值。就我而言，有 31 个实例`December 2012`、31 个实例`November 2012`和 25 个实例`October 2012`。因此，我需要掌握这些`31`、`31`和`25`值，以便我可以将一个月除以该数字。

我在想必须在`if(isset($abc[$month]))`循环内做一些事情来捕获，但到目前为止还没有成功。有没有其他方法可以得到平均值？

PS：为了比较的目的，我不能硬编码月份的名称（十月、十一月、十二月）。它们会定期更换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:55:08.583

```
$eachMonth = array();
foreach($ary as $array)
{   
   foreach($array as $month=>$cent)
  {

    $eachMonth[$month][] = $cent;

    if(isset($abc[$month])) // prevent index warning
    {           
        $abc[$month] += $cent
    }
    else
    {
        $abc[$month] = $cent;
    }
  }
} 
```

然后每个月你可以计算平均值：

```
foreach( $eachMonth as $month => $values)
{
   echo $month.' : '.$abc[$month] / count($values);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:58:37.240

试试这个 ：

```
$your_array = array(array("December 2012" => 58),
               array("December 2012" => 58)
              );

$res    = array();            
foreach($your_array as $val){
  $res[key($val)][] = $val[key($val)];
}

foreach($res as $k=>&$v){
   $v    = array_sum($v)/count($v);
}

echo "<pre>";
print_r($res); 
```

# sql-server - 尝试从 SSMS 连接到 SQL Azure 时出现与网络相关或特定于实例的错误

> ID：15542812
> 
> 赞同：1
> 
> 时间：2013-03-21T08:45:04.203
> 
> 标签：sql-server, sql-server-2008, azure-sql-database

当我尝试从 My SQLServer Management Studio 连接到 SQL Azure 帐户时出现以下错误。我在 Windows 7 32 位机器上使用“SQL Server 2008 R2”。

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供程序命名管道提供程序，错误 40 - 无法打开与 SQL Server 的连接）

我已按照[blog.sqlauthority.com](http://blog.sqlauthority.com/2009/05/21/sql-server-fix-error-provider-named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error/)的说明进行操作，但没有帮助。

这就是我尝试连接到我的 Azure 的方式：

![这就是我尝试访问的方式：](../Images/2ca829aae9fb6807c45f65fb7cf48482.png)

而且我注意到 SQL Server 服务中还有一个错误，但所有服务都在运行。

> 远程过程调用失败。[0x800706be]

![在此处输入图像描述](../Images/4e5e739d55651d9d0a24d30d38fd44c6.png)

PS：我还在windows azure的“管理IP地址”中添加了我的IP地址。

有任何想法吗！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T10:49:35.217

这是一个非常笼统的问题。您收到此网络相关错误的原因可能有很多。你以前有过它的工作吗？您确定服务器名称正确吗？你可以交叉检查吗？

或者你可以检查互联网连接和VPN的工作（如果你使用它）

# linux - php-fpm 中的高 CPU 使用率

> ID：15542819
> 
> 赞同：5
> 
> 时间：2013-03-21T08:45:20.463
> 
> 标签：linux, php, high-load

我们的 Web 项目有一个非常奇怪的问题。

我们用：

2 Intel(R) Xeon(R) CPU E5520 @ 2.27GHz
12 GB 内存
我们每秒大约有 20 次点击。每秒 4-5 个请求很重——这是一个搜索请求。
我们使用安装在另一台机器上的 nginx + php-fpm (5.3.22)
MySQL 服务器。
大多数时候，我们的平均负载低于 10，cpu 使用率约为 50%
有时我们的 cpu 使用率约为 95%，之后平均负载增长到 50 甚至更多！
您可以在此处查看平均负载和 CPU 使用率（我在此处发送图像的声誉很低）
[负载平均](http://clip2net.com/page/m85684/43809245)
[CPU 使用率](http://clip2net.com/page/m85684/43809244)

我们必须重新加载 php-fpm ( /etc/init.d/php-fpm reload) 以使情况正常化。
这可以每天发生 4-5 次。
我尝试使用 strace 来检查这种情况。
对不起，长日志！命令 strace -cp PID
PID 的输出是随机的 php-fpm 进程 ID（我们启动 100 个 php-fpm 进程）。
这两个导致高cpu使用率的时刻。

```
Process 17272 attached - interrupt to quit
Process 17272 detached
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 65.56    0.008817         267        33           munmap
 13.38    0.001799         900         2           clone
  9.66    0.001299           2       589           read
  7.43    0.000999         125         8           mremap
  2.84    0.000382           1       559        96 access
  0.59    0.000080          40         2           waitpid
  0.29    0.000039           0       627           gettimeofday
  0.16    0.000022           0       346           write
  0.04    0.000006           0        56           getcwd
  0.04    0.000005           0       348           poll
  0.00    0.000000           0        55           open
  0.00    0.000000           0        69           close
  0.00    0.000000           0        17           chdir
  0.00    0.000000           0       189           time
  0.00    0.000000           0        28           lseek
  0.00    0.000000           0         2           pipe
  0.00    0.000000           0        17           times
  0.00    0.000000           0         8           brk
  0.00    0.000000           0         8           getrusage
  0.00    0.000000           0        18           setitimer
  0.00    0.000000           0         8           flock
  0.00    0.000000           0         1           nanosleep
  0.00    0.000000           0        11           rt_sigaction
  0.00    0.000000           0        13           rt_sigprocmask
  0.00    0.000000           0         6           pread64
  0.00    0.000000           0         7           pwrite64
  0.00    0.000000           0        33           mmap2
  0.00    0.000000           0        18         4 stat64
  0.00    0.000000           0        34           lstat64
  0.00    0.000000           0        92           fstat64
  0.00    0.000000           0        63           fcntl64
  0.00    0.000000           0        53           clock_gettime
  0.00    0.000000           0         1           socket
  0.00    0.000000           0         1         1 connect
  0.00    0.000000           0         9           accept
  0.00    0.000000           0         1           send
  0.00    0.000000           0        21           recv
  0.00    0.000000           0         9         1 shutdown
  0.00    0.000000           0         1           getsockopt
------ ----------- ----------- --------- --------- ----------------
100.00    0.013448                  3363       102 total

[root@hp-php ~]# strace -cp 30767
Process 30767 attached - interrupt to quit
Process 30767 detached
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 52.88    0.016926         220        77           munmap
 29.06    0.009301           2      4343           read
  8.73    0.002794         466         6           clone
  3.59    0.001149           0      5598           time
  3.18    0.001017           0      3745           write
  1.12    0.000358           0      7316           gettimeofday
  0.64    0.000205           1       164           fcntl64
  0.39    0.000124          21         6           waitpid
  0.22    0.000070           0      1496       326 access
  0.13    0.000041           0      3769           poll
  0.03    0.000009           0       151           close
  0.02    0.000008           0       114           clock_gettime
  0.02    0.000007           0       110           getcwd
  0.00    0.000000           0       112           open
  0.00    0.000000           0        38           chdir
  0.00    0.000000           0        47           lseek
  0.00    0.000000           0         6           pipe
  0.00    0.000000           0        38           times
  0.00    0.000000           0       135           brk
  0.00    0.000000           0         3           ioctl
  0.00    0.000000           0        14           getrusage
  0.00    0.000000           0        38           setitimer
  0.00    0.000000           0        19           flock
  0.00    0.000000           0        40           mlock
  0.00    0.000000           0        40           munlock
  0.00    0.000000           0         6           nanosleep
  0.00    0.000000           0        27           rt_sigaction
  0.00    0.000000           0        31           rt_sigprocmask
  0.00    0.000000           0        13           pread64
  0.00    0.000000           0        18           pwrite64
  0.00    0.000000           0        78           mmap2
  0.00    0.000000           0       111        10 stat64
  0.00    0.000000           0        49           lstat64
  0.00    0.000000           0       182           fstat64
  0.00    0.000000           0         8           socket
  0.00    0.000000           0         8         5 connect
  0.00    0.000000           0        19           accept
  0.00    0.000000           0         7           send
  0.00    0.000000           0        66           recv
  0.00    0.000000           0         3           recvfrom
  0.00    0.000000           0        20         1 shutdown
  0.00    0.000000           0         5           setsockopt
  0.00    0.000000           0         4           getsockopt
------ ----------- ----------- --------- --------- ----------------
100.00    0.032009                 28080       342 total 
```

是的，输出脚本会读取很多信息。这个是正常的。
但是为什么 munmap 工作时间很长？？！！当我们遇到问题时， munmap**总是**在顶部！
为了比较，这是在常规情况下跟踪随机 php-fpm 进程的结果：

```
Process 28606 attached - interrupt to quit
Process 28606 detached
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 45.72    0.001816           1      2601           read
 32.88    0.001306         435         3           clone
  9.19    0.000365           0      2175           write
  6.95    0.000276           0      7521           time
  2.24    0.000089           0      4158           gettimeofday
  2.01    0.000080           1       114           brk
  0.28    0.000011           0      2166           poll
  0.20    0.000008           0       833       155 access
  0.20    0.000008           0        53           recv
  0.18    0.000007           2         3           waitpid
  0.15    0.000006           0        18           munlock
  0.00    0.000000           0        69           open
  0.00    0.000000           0        96           close
  0.00    0.000000           0        29           chdir
  0.00    0.000000           0        36           lseek
  0.00    0.000000           0         3           pipe
  0.00    0.000000           0        29           times
  0.00    0.000000           0        10           getrusage
  0.00    0.000000           0         5           munmap
  0.00    0.000000           0         1           ftruncate
  0.00    0.000000           0        29           setitimer
  0.00    0.000000           0         1           sigreturn
  0.00    0.000000           0        11           flock
  0.00    0.000000           0        18           mlock
  0.00    0.000000           0         5           nanosleep
  0.00    0.000000           0        19           rt_sigaction
  0.00    0.000000           0        24           rt_sigprocmask
  0.00    0.000000           0         6           pread64
  0.00    0.000000           0        12           pwrite64
  0.00    0.000000           0        69           getcwd
  0.00    0.000000           0         5           mmap2
  0.00    0.000000           0        35         7 stat64
  0.00    0.000000           0        41           lstat64
  0.00    0.000000           0        96           fstat64
  0.00    0.000000           0       108           fcntl64
  0.00    0.000000           0        87           clock_gettime
  0.00    0.000000           0         5           socket
  0.00    0.000000           0         4         4 connect
  0.00    0.000000           0        16         2 accept
  0.00    0.000000           0         8           send
  0.00    0.000000           0        15           shutdown
  0.00    0.000000           0         4           getsockopt
------ ----------- ----------- --------- --------- ----------------
100.00    0.003972                 20541       168 total

Process 29168 attached - interrupt to quit
Process 29168 detached
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 54.81    0.002366           1      1717           read
 26.41    0.001140           1      1696           poll
  8.29    0.000358           0      1662           write
  7.37    0.000318           2       131       121 stat64
  1.53    0.000066           0      3249           gettimeofday
  1.18    0.000051           0       746       525 access
  0.23    0.000010           0        27           fcntl64
  0.19    0.000008           0        62           brk
  0.00    0.000000           0         1           restart_syscall
  0.00    0.000000           0         7           open
  0.00    0.000000           0        16           close
  0.00    0.000000           0         3           chdir
  0.00    0.000000           0      1039           time
  0.00    0.000000           0         1           lseek
  0.00    0.000000           0         3           times
  0.00    0.000000           0         3           ioctl
  0.00    0.000000           0         1           getrusage
  0.00    0.000000           0         4           munmap
  0.00    0.000000           0         3           setitimer
  0.00    0.000000           0         1           sigreturn
  0.00    0.000000           0         1           flock
  0.00    0.000000           0         1           rt_sigaction
  0.00    0.000000           0         1           rt_sigprocmask
  0.00    0.000000           0         2           pwrite64
  0.00    0.000000           0         3           getcwd
  0.00    0.000000           0         4           mmap2
  0.00    0.000000           0         7           fstat64
  0.00    0.000000           0         9           clock_gettime
  0.00    0.000000           0         6           socket
  0.00    0.000000           0         5         1 connect
  0.00    0.000000           0         3         2 accept
  0.00    0.000000           0         5           send
  0.00    0.000000           0        64           recv
  0.00    0.000000           0         3           recvfrom
  0.00    0.000000           0         2           shutdown
  0.00    0.000000           0         1           getsockopt
------ ----------- ----------- --------- --------- ----------------
100.00    0.004317                 10489       649 total 
```

你可以看到 munmap 不在顶部。
现在我们不知道如何解决这个问题:(
我们检查了下一个潜在问题，答案是“否”：

*   额外的用户活动
*   长脚本执行（几秒钟）
*   使用交换

你能帮助我们吗？

# java - 尝试为 Vector 添加元素（）时的 NPE

> ID：15542825
> 
> 赞同：0
> 
> 时间：2013-03-21T08:45:51.210
> 
> 标签：java, vector, nullpointerexception, element, add

这是我的*所有权*课程的一部分。它没有编译错误，但是当我尝试与其他类一起运行并输入正确的输入时，它在 addOwner() 的 addElement() 行给了我一个 NPE ......我不知道为什么。*OwnerParser*不是问题，我肯定知道，输入也不是。我尝试在一个较小的项目中初始化一个 Vector，然后列出它的内容，它也给了我一个 NPE。基本上我需要知道如何**在没有得到 NullPointerException 的情况下将新的 Owner 对象添加到 OwnerList**谢谢。

```
 import java.util.*;
    import java.io.*;

    public class Ownership implements Serializable
    {
        private Vector<Owner> ownerList;
        private Vector<Pet> petList;

        public void Ownership()
        {
            ownerList = new Vector<Owner>();
            petList = new Vector<Pet>();
        }

     public boolean addOwner(String b)
       {
       Owner r = new Owner();
       r = OwnerParser.parseStringToOwner(b);
       ownerList.addElement(r);
               return true;
       }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:51:25.883

您的默认“构造函数”有一个`void`返回值，因此它不是构造函数，而是一个普通方法，命名类似于构造函数。因此，永远不会调用“构造函数”，并且永远不会初始化向量。

更改`public void Ownership() {...}`为`public Ownership() {...}`，它将起作用。

# java - SimonVT 菜单抽屉

> ID：15542828
> 
> 赞同：1
> 
> 时间：2013-03-21T08:45:57.023
> 
> 标签：java, android, menu

我有一个已经有很多活动和课程的应用程序。像个人资料、朋友、照片、新闻提要等。我想将那个滑动抽屉整合到我的主要活动中。在示例中，它们仅显示了实现 onClick 的数组列表。所以我的问题是如何更改该数组列表以成为我的活动，如朋友、个人资料、家庭等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-22T03:23:14.287

您可以将 ListView 与自定义适配器一起使用。要调整自定义适配器，您可以在您的 listView 中链接该适配器。在适配器中，您可以放置​​自定义图标

```
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflator = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View rowView = inflator.inflate(R.layout.row, parent, false);

    ImageView icon = (ImageView) rowView.findViewById(R.id.row_icon);
    TextView title = (TextView) rowView.findViewById(R.id.row_title);

    title.setText(proMenu[position]);

    String s = proMenu[position];

    if(s.equalsIgnoreCase("Home")){
        icon.setImageResource(R.drawable.icon_home);
    }

    else
        if(s.equalsIgnoreCase("Best Nearby")){
            icon.setImageResource(R.drawable.specialss);
        } 
```

# django - 访问和操作类元属性的值

> ID：15542831
> 
> 赞同：0
> 
> 时间：2013-03-21T08:46:01.063
> 
> 标签：django, django-models, django-views

是否可以更改 a 的属性值，`class Meta:`例如我有一个模型，例如：-

```
class Mymodel(models.Model):

    class Meta:
        ordering = ['-some_order'] 
```

例如，我想使用视图将 display 的值更改为某个值。如何访问`class Meta`属性以便我可以操纵值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:16:47.557

你不能改变它们。首次定义模型时，它们由元类处理：它们不可更改。虽然我无法想象你为什么想要。

`Mymodel._meta`如果你真的想要，你可以通过 阅读它们。

# php - 使用 htaccess 将带有参数的 url 重定向到新位置

> ID：15542834
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:46:05.627
> 
> 标签：php, .htaccess

我想重定向`domain.com/folder1/nisanth.php?id=1`到`domain.com/folder2/nisanth.php?id=1`. 我怎样才能写我的 htaccess 行？我尝试使用

```
Redirect 301 /folder1/nisanth.php?id=$1 /folder2/nisanth.php?id=$1 
```

但没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:23:20.053

这应该可以帮助你

```
RewriteEngine on
RewriteRule ^/folder1/nisanth.php?id=(.*)$ /folder2/nisanth.php?id=$1 [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:51:10.660

应该

```
Redirect 301 /folder1/nisanth.php?id=(.*) http://www.domain.com/folder2/nisanth.php?id=$1 
```

# rest - ExtJS 4 代理商店不使用交付的数据

> ID：15542841
> 
> 赞同：1
> 
> 时间：2013-03-21T08:46:22.487
> 
> 标签：rest, extjs, store, extjs4.1

我有两个网格，每个网格都有自己的代理存储。每个商店都绑定到具有以下定义的相同模型：

```
Ext.define('Issue', {
    extend: 'Ext.data.Model',
    fields : [{
        name : 'updated_on',
        type : 'string'
    }, {
        name : 'done_ratio',
        type : 'int'
    }, {
        name : 'start_date',
        type : 'string'
    }, {
        name : 'subject',
        type : 'string'
    }, {
        name : 'due_date',
        type : 'string'
    }, {
        name : 'created_on',
        type : 'string'
    }, {
        name : 'description',
        type : 'string'
    }, {
        name : 'id',
        type : 'int'
    }, {
        name : 'assigned_to',
        mapping: 'assigned_to.name'
    }, {
        name: 'parked',
        mapping: 'custom_fields[9].value',
        type: 'boolean'
    }]
}); 
```

存储它们的网格和相关的容器按钮等是在一个函数中创建的。这 2 个函数如下所示：

```
var createMyPanel = function() {
        var store = new Ext.data.Store({
            /*sorters: ['gemeinde','assigned_to'],
            groupField: 'gemeinde',*///comment in when want enable grouping
            model : 'Issue',
            autoLoad: true,
            autoSync: true,
            proxy : {
                type : 'rest',
                url : '/issues.json',
                reader : {
                    type : 'json',
                    root : 'issues'
                },
                extraParams : runtime.CView.Model.getParams('my')
            }
        });
        var groupingFeature = new Ext.grid.feature.Grouping({
            groupHeaderTpl: 'Gemeinde: {name} ({rows.length})'
        });
        var searching = new Ext.ux.grid.feature.Searching({
            minChars: 3,
            mode: 'local',
            searchText: 'Suche einschränken',
            selectAllText: 'Alle Felder (ab)wählen',
            searchTip: '',
            minCharsTipText: 'Bitte mindestens 3 Zeichen eingeben...',
            width: 200
        });
        var commentBtn = new Ext.Button({
            text: 'Kommentar zum gewählten Ticket erfassen',
            disabled: true,
            ticket: null,
            margin: 5
        });
        var toGfBtn = new Ext.Button({
            text: 'an GIS-Fachstelle melden',
            disabled: true,
            ticket:null,
            margin: 5
        });
        var abbruchBtn = new Ext.Button({
            text: 'als abgebrochen melden',
            disabled: true,
            ticket:null,
            margin: 5
        });
        var parkBtn = new Ext.Button({
            text: 'Ticket zurücklegen',
            disabled: true,
            ticket:null,
            margin: 5
        });
        var journalPanel = new Ext.Panel({
            title: 'Kommentare',
            html:'',
            border: false,
            autoScroll: true,
            flex: 30,
            padding: '5 5 5 5'
        });
        var buttonPanel = new Ext.Panel({
            padding: '30 30 10 30',
            border: false,
            flex: 20,
            layout: {
                type: 'vbox',
                align: 'stretch'
            },
            items:[toGfBtn, commentBtn, abbruchBtn, parkBtn]
        });
        var contentPanel = new Ext.Panel({
            title : 'Beschreibung',
            border: false,
            html:'',
            flex: 50,
            padding: '5 5 5 5'
        });
        var southPanel = new Ext.Panel({
            padding: '0 0 5 0',
            layout: {
                type: 'hbox',
                align: 'stretch'
            },
            flex: 30,
            items:[contentPanel, journalPanel, buttonPanel]
        });

        var grid = new Ext.grid.Panel({
            store : store,
            autoScroll : true,
            flex: 70,
            columns : [{
                        text : 'Ticket-Nummer',
                        width : 100,
                        sortable : true,
                        dataIndex : 'id',
                        menuDisabled : true
                    }, {
                        text : 'Abgabe-Datum',
                        sortable : true,
                        width : 100,
                        dataIndex : 'due_date',
                        menuDisabled : true
                    }, {
                        header : 'Thema',
                        width : 200,
                        sortable : true,
                        dataIndex : 'subject',
                        renderer : function(val) {
                            return '<div style="white-space:normal !important;">'
                                    + val + '</div>';
                        },
                        menuDisabled : true
                    }, {
                        header : 'Gemeinde',
                        width : 200,
                        sortable : true,
                        dataIndex : 'gemeinde',
                        menuDisabled : true

                    }, {
                        header : 'Parzelle',
                        width : 200,
                        sortable : true,
                        dataIndex : 'parzelle',
                        menuDisabled : true

                    }, {
                        header : 'zurückgelegt',
                        width : 200,
                        sortable : true,
                        dataIndex : 'parked',
                        menuDisabled : true,
                        renderer : function(val) {
                            if(val){
                                return 'Ja';
                            }else{
                                return 'Nein';
                            }
                        },
                    },{
                        header: 'Beschreibung',
                        dataIndex: 'description',
                        hidden: true,
                        menuDisabled : true
                    }],
            bbar: ['->'],
            features: [searching/*, groupingFeature*/],//comment this in when want to group
            selModel: new Ext.selection.RowModel()
        });

        var myPanel = new Ext.Panel({
            title: 'Meine Fälle',
            padding: '0 5 0 5',
            bl_id:'my',
            layout: {
                type: 'vbox',
                align: 'stretch'
            },
            items : [grid, southPanel]
        });
        return {
            that : myPanel,
            contentPanel: contentPanel,
            grid: grid,
            store: store,
            toGfBtn:toGfBtn,
            journalPanel:journalPanel,
            commentBtn:commentBtn,
            southPanel:southPanel,
            abbruchBtn:abbruchBtn,
            parkBtn:parkBtn
        }
    }; 
```

和：

```
var createAllPanel = function() {
    var store = new Ext.data.Store({
        /*sorters: ['gemeinde','assigned_to'],
        groupField: 'gemeinde',*///comment in when want enable grouping
        model : 'Issue',
        autoLoad: true,
        autoSync: true,
        proxy : {
            type : 'rest',
            url : '/issues.json',
            reader : {
                type : 'json',
                root : 'issues'
            },
            extraParams : runtime.CView.Model.getParams('all')
        }
    });
    var groupingFeature = new Ext.grid.feature.Grouping({
        groupHeaderTpl: 'Gemeinde: {name} ({rows.length})'
    });
    var searching = new Ext.ux.grid.feature.Searching({
        minChars: 3,
        mode: 'local',
        searchText: 'Suche einschränken',
        selectAllText: 'Alle Felder (ab)wählen',
        searchTip: '',
        minCharsTipText: 'Bitte mindestens 3 Zeichen eingeben...',
        width: 200
    });
    var commentBtn = new Ext.Button({
        text: 'Kommentar zum gewählten Ticket erfassen',
        disabled: true,
        ticket: null,
        margin: 5
    });
    var toGfBtn = new Ext.Button({
        text: 'an GIS-Fachstelle melden',
        disabled: true,
        ticket:null,
        margin: 5
    });
    var abbruchBtn = new Ext.Button({
        text: 'als abgebrochen melden',
        disabled: true,
        ticket:null,
        margin: 5
    });
    var parkBtn = new Ext.Button({
        text: 'Ticket zurücklegen',
        disabled: true,
        ticket:null,
        margin: 5
    });
    var journalPanel = new Ext.Panel({
        title: 'Kommentare',
        html:'',
        border: false,
        autoScroll: true,
        flex: 30,
        padding: '5 5 5 5'
    });
    var buttonPanel = new Ext.Panel({
        padding: '30 30 10 30',
        border: false,
        flex: 20,
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items:[toGfBtn, commentBtn, abbruchBtn, parkBtn]
    });
    var contentPanel = new Ext.Panel({
        title : 'Beschreibung',
        border: false,
        html:'',
        flex: 50,
        padding: '5 5 5 5'
    });
    var southPanel = new Ext.Panel({
        padding: '0 0 5 0',
        layout: {
            type: 'hbox',
            align: 'stretch'
        },
        flex: 30,
        items:[contentPanel, journalPanel, buttonPanel]
    });

    var grid = new Ext.grid.Panel({
        store : store,
        autoScroll : true,
        flex: 70,
        columns : [{
                    text : 'Ticket-Nummer',
                    width : 100,
                    sortable : true,
                    dataIndex : 'id',
                    menuDisabled : true
                }, {
                    text : 'Abgabe-Datum',
                    sortable : true,
                    width : 100,
                    dataIndex : 'due_date',
                    menuDisabled : true
                }, {
                    header : 'Thema',
                    width : 200,
                    sortable : true,
                    dataIndex : 'subject',
                    renderer : function(val) {
                        return '<div style="white-space:normal !important;">'
                                + val + '</div>';
                    },
                    menuDisabled : true
                }, {
                    header : 'Gemeinde',
                    width : 200,
                    sortable : true,
                    dataIndex : 'gemeinde',
                    menuDisabled : true

                }, {
                    header : 'Parzelle',
                    width : 200,
                    sortable : true,
                    dataIndex : 'parzelle',
                    menuDisabled : true

                }, {
                    header : 'zugewiesen an',
                    width : 200,
                    sortable : true,
                    dataIndex : 'assigned_to',
                    menuDisabled : true
                }, {
                    header : 'zurückgelegt',
                    width : 200,
                    sortable : true,
                    dataIndex : 'parked',
                    menuDisabled : true,
                    renderer : function(val) {
                        if(val){
                            return 'Ja';
                        }else{
                            return 'Nein';
                        }
                    },
                },{
                    header: 'Beschreibung',
                    dataIndex: 'description',
                    hidden: true,
                    menuDisabled : true
                }],
        bbar: ['->'],
        features: [searching/*, groupingFeature*/],//comment this in when want to group
        selModel: new Ext.selection.RowModel()
    });

    var allPanel = new Ext.Panel({
        title: 'Alle Fälle',
        padding: '0 5 0 5',
        bl_id:'all',
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items : [grid, southPanel]
    });
    return {
        that : allPanel,
        contentPanel: contentPanel,
        grid: grid,
        store: store,
        toGfBtn:toGfBtn,
        journalPanel:journalPanel,
        commentBtn:commentBtn,
        southPanel:southPanel,
        abbruchBtn:abbruchBtn,
        parkBtn:parkBtn
    }
}; 
```

正如你所看到的，这两个面板是一样的。当我加载页面时，请求会自动启动，导致商店将自动加载设置为 true。现在第一个商店很好地加载了数据。一切都很好，并且按预期工作。任何。第二家店没有。我通过萤火虫追踪到以下内容：

*   商店已创建
*   store 正确绑定到代理
*   调用加载函数
*   数据请求完成
*   数据看起来完全像它应该的那样
*   我可以通过萤火虫检查回答的对象

只有对象（在浏览器中）没有“加载”到商店中。存储数据项保持为零。重新加载后也是如此。我看不出这里的重点。

值得一提的是：第一家商店有大约 50 件商品，第二家商店有 220 件或更多。我试图为代理设置超时设置。没有帮助。我也试过换店。将存储一设置为网格 2，反之亦然（它由代理中的额外参数设置控制）。只有物品数量较少的商店才能很好地加载。

有人知道这个问题吗？这几天我还不能下结论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:47:29.273

从 Sencha 的文档中查看代理配置。

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json-cfg-totalProperty](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Json-cfg-totalProperty)

并且您的 json 不是有效的 json 格式，请在 json 查看器中验证它是否有错误。

编辑：您可以收听数据阅读器抛出的异常： [http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-event-exception](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.reader.Reader-event-exception)

# c++ - 如何使用 std::bind？

> ID：15542845
> 
> 赞同：5
> 
> 时间：2013-03-21T08:46:27.023
> 
> 标签：c++, bind, std

一个解释如何`std::bind`使用的简单示例如下：

假设我们有一个有 3 个参数的函数：f3(x, y, z)。我们希望有一个定义为 2 个参数的函数`f2(x,y) = f3(x,5,y)`：在 C++ 中，我们可以很容易地做到这一点`std::bind`：

```
auto f2 = std::bind(f3, _1, 5, _2); 
```

这个例子对我来说很清楚：`std::bind`将一个函数作为它的第一个参数，然后它接受 n 个其他参数，其中 n 是作为第一个参数的函数的参数数`std::bind`。

但是，我发现了 bind 的另一种用法：

```
void foo( int &x )
{
  ++x;
}

int main()
{
  int i = 0;

  // Binds a copy of i
  std::bind( foo, i ) (); // <------ This is the line that I do not understand.
  std::cout << i << std::endl;

} 
```

很明显，`foo`有一个参数，并且`std::bind`设置为`i`。但是为什么我们要在 之后使用另一对括号`(foo, i)`呢？为什么我们不使用输出`std::bind`？我的意思是，为什么我们没有`auto f = std::bind(foo, i)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T08:49:46.353

线

```
std::bind( foo, i ) (); 
```

相当于：

```
auto bar = std::bind( foo, i );
bar(); 
```

它创建一个绑定函子，然后立即调用它（使用第二对括号）。

编辑：以准确性的名义（@Roman，@daramarak 指出）这两者*实际上并不*等同于直接调用函数：i 按值传递给 std::bind。相当于`foo`直接用 i 调用的代码是：

```
auto bar = std::bind( foo, std::ref(i) );
bar(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T08:51:59.457

它绑定`foo`到一个临时对象，然后立即调用它：

```
 auto f = std::bind(foo, i);
  f(); 
```

单行版本：

```
std::bind(foo, i)(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T08:50:30.747

您的两个问题几乎可以相互回答。尾随`()`只是一个普通的函数调用。因此，表达式的意思是：“绑定`i`到`foo`；这将产生一个不带参数的函数；然后调用结果函数。” 由于代码作者决定调用该函数后不再需要它，因此它不会存储在任何地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-24T18:59:04.347

由于线

```
std::bind( foo, i ) () ; 
```

......做同样的事情......

```
foo(i); 
```

...这并不是您在实际代码中可能遇到的 std::bind 的真正“使用”，但它确实可以作为 std::bind 作用的简单说明，如其他答案中所述。

正如您所指出的，通常的情况是存储绑定的结果并在其他地方调用它，否则首先使用 std::bind 使代码复杂化是没有意义的。

# jquery - 一系列按钮上不显眼的 JavaScript

> ID：15542846
> 
> 赞同：0
> 
> 时间：2013-03-21T08:46:32.783
> 
> 标签：jquery, unobtrusive-javascript

我正在研究[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)，建议 JavaScript 应该与 HTML 分开。

在我的页面中，我使用`jQuery 1.9.1`with `jQuery Migrate plugin 1.1.1`。我`<li>`用来模拟我的页面的菜单。对于每个`<li>`，它都是一个菜单项。最初我将 JavaScript 分配如下：

```
 <ul>
        <li onclick="showQ('0001')">Q 1</li>
        <li onclick="showQ('0002')">Q 2</li>
        <li onclick="showQ('0003')">Q 3</li>
        <li onclick="showQ('0004')">Q 4</li>
    </ul> 
```

**第一个问题：**如何将其分别转换为 Unobtrusive JavaScript ？

JavaScript 函数如下：

```
function showQ(id) {
  $('#' + id).show();
} 
```

**第二个问题：（**这可能是一个 jQuery 问题）函数如何引用原始的`<li>`，例如通过添加一个类`.addClass('some_css_class');`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:00:22.277

更改`id`each`<li>`以包含要传递给`showQ`函数的 id。在文档就绪处理程序中，为`<li>`元素分配一个点击处理程序并`showQ`从那里调用函数，传入从 clicked 中提取的 id `<li>`。在单击处理程序中引用单击的`<li>`使用`$(this)`以向其添加类

html

```
<ul>
    <li id="i0001">Q 1</li>
    <li id="i0002">Q 2</li>
    <li id="i0003">Q 3</li>
    <li id="i0004">Q 4</li>
</ul> 
```

javascript

```
function showQ(id) {
  $('#' + id).show();
}

$(document).ready(function() {
    $("ul li").click(function() {
        var id = $(this).attr("id").substring(1);
        showQ(id);

        $(this).addClass("some_css_clas");
    });
}); 
```

[例子](http://jsfiddle.net/axrwkr/HrDUj)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:12:51.077

HTML：

```
<ul>
    <li>Q 1</li>
    <li>Q 2</li>
    <li>Q 3</li>
    <li>Q 4</li>
</ul> 
```

JS 片段：

```
$(document).ready(function(){

$('ul li').click(function(){

$(this).addClass('some_css_class');

}); 
```

});

**编辑：** 在您的功能代码中：

```
function showQ(id) {
  $('#' + id).show();
} 
```

`id`你想展示哪个？如果`li`with that`id`不可见，你怎么能点击它？

# git - gitolite git clone ssh:// 有效，但 git clone git:// 不适用于少数目录

> ID：15542847
> 
> 赞同：1
> 
> 时间：2013-03-21T08:46:33.483
> 
> 标签：git, gitolite

我有这个问题：

我可以`git clone git@myserver.com:myrepo`在我的 gitolite 服务器上进行回购。之后我安装了 git-daemon 以便能够对 git 协议执行相同的操作。现在我`git clone git://myserver.com/myrepo`只能使用那些没有用 ssh 协议克隆的 repos。
对于我得到的其他存储库：

```
Cloning into 'myrepo'...
fatal: The remote end hung up unexpectedly 
```

同时我在 gitweb 上没有看到那些存储库，但我看到了：
`usermod -a -G git www-data`# where www-data 是托管 apache2 的用户
`chmod -R 0755 /path/to/my/gitolite/repositories/`

现在我在 gitweb 上看到了所有的 repos。

我想这些问题是相关的，但我不知道为什么或如何。

我没有任何复杂的`.gitolite.rc`配置，我只是改变了`UMASK from 0077 to 0027`

所有存储库都属于组中的`git`用户`git`。

如果您需要更多详细信息，请向他们询问 :) 任何帮助或建议都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:32:34.697

我错误地配置了 git-daemon。在`/etc/sv/git-daemon/run`我拥有的文件中，`-ugitdaemon switch`而不是`-ugitdaemon:gitolite`.

这篇[文章](http://computercamp.cdwilson.us/git-gitolite-git-daemon-gitweb-setup-on-ubunt)引导我解决这个问题。

# ruby-on-rails - Active Record：与参数的急切负载关联

> ID：15542850
> 
> 赞同：6
> 
> 时间：2013-03-21T08:46:35.103
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有以下型号：

```
class Rating < ActiveRecord::Base
  belongs_to :item
  belongs_to :user
end

class Item < ActiveRecord::Base
  has_many :ratings
end 
```

我想获取所有项目，以及特定用户的评分，以在每个项目旁边显示当前用户的评分（如果存在！）。

我试过了...

```
Item.includes(:ratings).where('ratings.user_id = ?', user_id) 
```

...但这并没有给我没有评级的项目。

我的第一个想法是 has_many 与一个参数的关联，然后使用 include 方法传递该参数。但这似乎不存在。

**如何在不执行 N+1 查询或将所有实体加载到内存中的情况下获取所有帖子和预先加载的关联过滤参数？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-23T18:50:11.403

**第1步**

使`current_user`模型层中的可访问性（此处概述了一种技术：[https](https://stackoverflow.com/a/2513456/163203) ://stackoverflow.com/a/2513456/163203 ）

**第2步**

添加与在运行时评估的条件的关联。

**导轨 2**

```
class Item < ActiveRecord::Base
  has_many :ratings
  has_many :current_user_ratings, 
           :class_name => "Rating", 
           :conditions => 'ratings.user_id = #{User.current_user.try(:id)}'
end 
```

**Rails 3.1 及更高版本**

```
class Item < ActiveRecord::Base
  has_many :ratings
  has_many :current_user_ratings, 
           :class_name => "Rating", 
           :conditions => proc { ["ratings.user_id = ?", User.current_user.try(:id)] }
end 
```

**第 3 步**

```
Item.includes(:current_user_ratings) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-31T14:59:27.120

正如我最近在[这篇博](https://medium.com/@coorasse/eager-load-associations-with-parameters-in-rails-6e9fd7b65923)文中所写的那样，我建议您采取以下措施：

```
items = Item.all
ActiveRecord::Associations::Preloader.new.preload(items, :ratings, Rating.where(user_id: user_id)) 
```

您可以使用预加载器的自定义范围并访问`items.each { |i| i.ratings }`用户已经确定的范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:06:54.847

看起来您基本上是在为`has_many :through`关系建模：Item has_and_belongs_to_many User，Rating 是连接模型。您可以阅读[Rails Guide to Active Record Associations](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)`:through`中的关系。

如果是这种情况，我建议您使用`has_many :through`以下方式构建模型关系：

```
class Rating < ActiveRecord::Base
  attr_accessible :item_id, :user_id
  belongs_to :item
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :ratings
  has_many :rated_items, :through => :ratings
end

class Item < ActiveRecord::Base
  has_many :ratings
  has_many :rated_by_users, :through => :ratings, :source => :user
end 
```

然后，假设您在数据库中有以下记录：

```
$ sqlite3 db/development.sqlite3 'SELECT * FROM items';
1|2013-03-22 03:21:31.264545|2013-03-22 03:21:31.264545
2|2013-03-22 03:24:01.703418|2013-03-22 03:24:01.703418

$ sqlite3 db/development.sqlite3 'SELECT * FROM users';
1|2013-03-22 03:21:28.029502|2013-03-22 03:21:28.029502

$ sqlite3 db/development.sqlite3 'SELECT * FROM ratings';
1|1|1|2013-03-22 03:22:01.730235|2013-03-22 03:22:01.730235 
```

您可以使用以下语句请求所有项目，以及它们相关的 Rating 和 User 实例：

```
items = Item.includes(:rated_by_users) 
```

这将为您执行 3 个 SQL 查询：

```
Item Load (0.1ms)  SELECT "items".* FROM "items" 
Rating Load (0.2ms)  SELECT "ratings".* FROM "ratings" WHERE "ratings"."item_id" IN (1, 2)
User Load (0.2ms)  SELECT "users".* FROM "users" WHERE "users"."id" IN (1) 
```

并且尝试访问对每个项目进行评分的用户可以通过`#rated_by_users`在每个项目上调用关联方法来完成：

```
> items.map {|item| item.rated_by_users }
=> [[#<User id: 1, created_at: "2013-03-22 03:21:28", updated_at: "2013-03-22 03:21:28">], []] 
```

# gradle - Gradle - “展平”默认资源目录

> ID：15542855
> 
> 赞同：0
> 
> 时间：2013-03-21T08:47:01.987
> 
> 标签：gradle

在我的项目中，我有以下目录设置：

*   `src/main/resources/common`
*   `src/main/resources/local`
*   `src/main/resources/release`

我的目标是覆盖默认资源细化并在最终存档中“展平”这个目录树。

目前我发现只有这个丑陋的解决方案：

```
resources {
  exclude 'release'
  exclude 'common'
  exclude 'local'
  srcDir 'src/main/resources/common'
  srcDir 'src/main/resources/local'
  srcDir 'src/main/resources/release'
} 
```

使用此解决方案，我认为其中的文件`src/main/resources`将被复制到最终存档中。有没有办法排除资源默认目录？

有没有更好的方法来解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T10:16:02.243

更好的方法是覆盖默认位置：

```
sourceSets {
    main {
        resources {
            srcDirs = [
                'src/main/resources/common', 
                'src/main/resources/local',
                'src/main/resources/release'
            ]
        }
    }
} 
```

Gradle API 的一个常见习惯用法是提供允许设置集合（从而覆盖任何默认值）的*属性*（例如`srcDirs`），以及允许添加到集合（从而添加到默认值）的类似名称的*方法*（例如） `srcDir`）。

> 我的目标是 [...] 在最终存档中“展平”这个目录树。

不知道你的意思是什么。

# java - 捕获单独的异常或使用 instanceof - Java 6

> ID：15542859
> 
> 赞同：5
> 
> 时间：2013-03-21T08:47:10.543
> 
> 标签：java, exception-handling, instanceof

假设这段代码在 20 个地方并且总是相同的

```
try {
    // do something
} catch (FirstException e) {
    // log it
} catch (SecondException e) {
    // log it
} 
```

使用这样的东西不是更好还是`instanceof`不是好的解决方案？

```
try {
    // do something
} catch(Exception e) {
    logException(e);
}

void logException(Exception e) {
    if (e instanceof FirstException) {
        // log it
    } else if (e instanceof SecondException) {
        // log it differently
    } else {
        // do something with other exception 
    }
} 
```

我真正讨厌解决方案的唯一一件事是捕捉`Exception`这绝对不是最好的方法......有没有更好的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-21T08:50:45.620

1.  在 Java 7 中，使用`catch (FirstException1 | SecondException | ...)`
2.  可能没有什么问题`catch (Exception e)`——您确实想记录*所有*异常，不是吗？我实际上会建议`catch (Throwable t)`，因为`OutOfMemoryError`s 和`StackOverflowError`s 也想被记录。

多年记录异常经验的建议是以相同的方式记录它们。异常消息作为人类可读的文本就足够了，开发人员真正需要调试的是堆栈跟踪。

请注意一件事：永远不要过早捕获异常：在整个应用程序的一个地方捕获它们，即所谓的*异常屏障*——它位于您进入和退出工作单元的级别。

如果检查的异常在较低级别给您带来麻烦，请将它们包装成`RuntimeException`：

```
try {
  ...
} 
catch (RuntimeException e) {throw e;} 
catch (Exception e) {throw new RuntimeException(e);} 
```

**只有**当您提前准确地知道存在对您的应用程序具有业务级别意义的异常，并且*不会*中止当前工作单元，而是重定向其流程时，才适合在较低级别捕获该异常。在实践中，与应用程序代码抛出的所有可能异常相比，此类异常很少见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:50:19.507

第一种方法肯定更好。通常，捕获是一种不好的做法，`Exception`因为在这种情况下，您`RuntimeException`也会捕获 s。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-21T08:50:20.127

如果您只需要记录异常，前者是干净且很好的解决方案。

否则第一种方法更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T08:54:04.723

在“Refactoring to Patterns”一书中，常见的重构之一是“用多态替换 instanceof”——换句话说，每当您使用 instanceof 时，请考虑多态实际上是否会更好地工作。. .

话虽如此，对于这个特定的问题，Spring 用运行时异常替换受检异常的哲学浮现在脑海中（请原谅双关语）。

这个想法是检查的异常可以被过度使用——异常是可以恢复的吗？如果是的话，好的。. . 如果没有，就让它向上传播。您可以通过以下方式做到这一点：

*   重新抛出它。. . （但更好）
*   将其包装在 RuntimeException 中

**创建一个日志记录方面：**

要考虑的另一件事是，如果您确实需要在这些异常发生时准确记录这些异常，而不是让它们在链上传播，***并且***它们发生在 20 个不同的地方，那么它们是一个横切关注点。. . 您可以让常规方法重新抛出异常，然后编写一个方面来捕获并记录它们。. . . 再次使用 Spring 使这变得容易。

# search - 从 solr 访问有限的数据

> ID：15542861
> 
> 赞同：0
> 
> 时间：2013-03-21T08:47:12.407
> 
> 标签：search, solr, memcached

我有大量的数据要搜索。我想从 solr 中搜索，solr 只返回搜索到的记录的 id。现在我有一个 solr (Memcache) 中所有记录的缓存，并想从缓存中获取整个数据集。

这是个好主意吗？有什么帮助吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T14:16:47.500

问题是？只需将“fl”参数定义为您要返回的字段列表，在这种情况下为“id”。

如果您从未真正返回其他字段，请不要费心存储它们，仅将它们定义为索引。如果您确实必须存储它们但很少需要它们，请使用[solrconfig.xml中的 enableLazyFieldLoading 设置进行测试](http://wiki.apache.org/solr/SolrConfigXml)

# ios - 是否可以自定义应用程序图标徽章：Xcode？

> ID：15542862
> 
> 赞同：9
> 
> 时间：2013-03-21T08:47:18.697
> 
> 标签：ios, objective-c, xcode, customization, badge

这可能是一个愚蠢的问题。但我问它是因为我的好奇心。是否有任何可能的方法来自定义 iOS 应用程序图标徽章图像（如下：）..？

![在此处输入图像描述](../Images/5f4e3fbf2c327871233844a0c6119e36.png)

提前致谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T08:48:58.257

根本不可能。您必须使用默认值。应用启动后，您可以显示 UITabbar 的自定义徽章图标。

祝一切顺利 ！！！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-21T08:51:52.670

如果您的意思是可以在应用程序图标上显示的徽章编号，在红色圆圈上以白色文本显示，那么不，它不能设置为自定义图像。您只能控制显示的数字。它是使用`-[UIApplication setApplicationIconBadgeNumber:]`方法设置的，即`applicationIconBadgeNumber`UIApplication 上的属性：

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber:99]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-13T15:19:46.607

我有一个可能的解决方案，而不是使用操作系统添加徽章，如果您以编程方式将应用程序图标替换为内置徽章的版本会怎样。

您可以使用以下库： [https ://github.com/skb1129/react-native-change-icon](https://github.com/skb1129/react-native-change-icon)

唯一的问题是，有人知道苹果会不会有任何反对意见吗？

# mongodb - Why is regex prefix query on indexed array slow in MongoDB?

> ID：15542864
> 
> 赞同：1
> 
> 时间：2013-03-21T08:47:21.923
> 
> 标签：mongodb

I am trying to perform regex query on an array of strings in MongoDB collection. I could only find this limitation in the [docs](http://docs.mongodb.org/manual/reference/operator/regex/):

> $regex can only use an index efficiently when the regular expression has an **anchor for the beginning (i.e. ^) of a string** and is a **case-sensitive match**.

Let's make a test:

```
> for (var i=0; i<100000; i++) db.test.insert({f: ['a_0_'+i, 'a_1_2']})
> db.test.count()
100000
> db.test.ensureIndex({f: 1})
> db.test.find({f: /^a_(0)?_12$/ })
{ "_id" : ObjectId("514ac59886f004fe03ef2a96"), "f" : [ "a_0_12", "a_1_2" ] }
> db.test.find({f: /^a_(0)?_12$/ }).explain()
{
    "cursor" : "BtreeCursor f_1 multi",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 200000,
    "nscanned" : 200000,
    "nscannedObjectsAllPlans" : 200000,
    "nscannedAllPlans" : 200000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 482,
    "indexBounds" : {
        "f" : [
            [
                "a_",
                "a`"
            ],
            [
                /^a_(0)?_12$/,
                /^a_(0)?_12$/
            ]
        ]
    },
    "server" : "someserver:27017"
} 
```

The query is sloooow. On the other hand, this query is optimal: (but doesn't suit my use case)

```
> db.test.find({f: 'a_0_12' }).explain()
{
    "cursor" : "BtreeCursor f_1",
    "isMultiKey" : true,
    "n" : 1,
    "nscannedObjects" : 1,
    "nscanned" : 1,
    "nscannedObjectsAllPlans" : 1,
    "nscannedAllPlans" : 1,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 0,
    "indexBounds" : {
        "f" : [
            [
                "a_0_12",
                "a_0_12"
            ]
        ]
    },
    "server" : "someserver:27017"
} 
```

Why is regex query scanning all (sub)records when it has an index? What am I missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T00:15:30.403

Your test case has several characteristics that are unhelpful for regex and index usage:

*   each document includes an array of two values both starting with "a_". Your regex `/^a_(0)?_12$/` is looking for a string starting with a followed by an optional "0", so leads to a comparison of all index entries (200k values).
*   your regex also matches a value that *every* document has (`a_1_2`), so will end up matching all documents irrespective of the index

Since you have a multikey (array index), the number of index comparisons is actually *worse* than just doing a full table scan of the 100k documents. You can test with a [$natural](http://docs.mongodb.org/manual/reference/operator/natural/) hint to see:

```
db.test.find({f: /^a_(0|)12$/ }).hint({$natural:1}).explain()
{
    "cursor" : "BasicCursor",
    "isMultiKey" : false,
    "n" : 0,
    "nscannedObjects" : 100000,
    "nscanned" : 100000,
    "nscannedObjectsAllPlans" : 100000,
    "nscannedAllPlans" : 100000,
    "scanAndOrder" : false,
    "indexOnly" : false,
    "nYields" : 0,
    "nChunkSkips" : 0,
    "millis" : 192,
    "indexBounds" : {

    },
} 
```

More random data or a more selective regex will result in fewer comparisons.

# c# - Visual Studio 没有立即更新项目

> ID：15542868
> 
> 赞同：0
> 
> 时间：2013-03-21T08:47:38.880
> 
> 标签：c#, visual-studio-2010

我有一个非常奇怪的情况，当我的同事更新到我的软件的本地副本时，我的同事提交到存储库的更改，Visual Studio 无法立即识别它们并重新加载。结果（这很奇怪）是大多数时候，我会在不重新加载项目的情况下保存我的更改，并且会覆盖我同事的更改。令人尴尬的是，有时有人问我为什么必须更改一段代码，而实际上我没有。另一件事是，当我签入一些 VS 项目级别的更改时，例如当有人添加新类、表单或其他任何东西并继续在 Visual Studio 中工作时，我至少需要 5 到 10 分钟才能收到警告进行了一些更改，并被要求重新加载项目等...

我认为视觉工作室中应该有一个设置来触发自动重新加载，但找不到它。到目前为止，这影响了我和另一个人，但我的是最奇怪的，因为它可能需要长达 30 分钟才能开始重新加载项目。

欢迎任何想法

这是我的设置 ![在此处输入图像描述](../Images/20edb240a5b11204d6befdfda175a2df.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:51:45.107

如果您确定问题出在 Visual Studio 上（例如，文件在磁盘上确实*发生*了变化，但您在 Visual Studio 中看不到它）

确保`Detect when file is changed`选中该选项。

`Tools > Options > Environment > Documents > Detect when file is changed outside the environment`

![在此处输入图像描述](../Images/6bc9ea30552b06bc27b88e8376b86536.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:00:40.157

由于您有时会因外部更改而收到重新加载项目的警报，这意味着您已经拥有在 Visual Studio 中检测文件更改所需的设置。

但是，仅当 .csproj（或 .vbproj）或 .sln 文件发生更改时才会触发重新加载项目/解决方案。

顺便问一下，您是否使用了一些版本控制系统？您似乎只是在共享解决方案并同时进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-24T00:09:45.853

如果您正在使用源代码管理，您需要将本地工作区与服务器同步（“获取”最新代码），然后您的同事所做的任何更改将被复制到您的 PC。

如果您在进行更改之前没有“获取”最新代码，那么您可能必须将您的更改与其他人的更改合并，这可能是一个困难、耗时甚至危险的过程 - 特别是如果您使用默认的 Visual Studio 自动合并过程，这通常会做错事，导致代码基本上损坏（例如，就像您所描述的那样，看起来您删除了同事的作品）。

使用源代码控制的最佳方式是“很少且经常”的方法：

*   在开始任何新工作之前获取最新的源代码，以便您的 PC 尽可能保持最新。
*   经常“获取”最新代码通常是一种好习惯（例如，我每天早上第一件事就是这样做），以便尽早标记并处理任何合并冲突。在合并之前等待的时间越长，合并过程就越糟糕。（警告：在你得到它之前检查你的构建系统，确保服务器上的当前版本的代码正在运行——你不想把损坏的代码放到你的电脑上，因为它可能会阻止你工作）。
*   安排尽可能多的小增量步骤，以便在完成后安全地签入（而不是在数百个文件上工作 3 个月，然后将其作为一项重大更改转储到系统上）
*   当您准备好签入时，获取最新代码、重建并重新测试您的更改，以确保它们在与最新程序代码集成时仍然有效。仅在一切正常时才签入。

另请注意，当您尝试编辑文件时，源代码控制提供程序可能会自动为您“获取”该文件的最新版本（这可能导致 Visual Studio 告诉您它已重新加载文件，并可能解释您为什么说“更新”有时需要一段时间，因为直到您开始编辑最近被其他人更改的新文件时才会发生这种情况）。如果是这种情况，那么事实是您没有“更新”整套源代码，只有一个文件 - 在这种情况下，您确实需要获取源代码的所有最新更改（如果您不您可能会发现它是不可编译的，或者（更糟糕的是）编译但由于只有部分代码是最新的而表现出未定义的行为）

最后，签入代码时的一个非常好的做法是浏览您正在签入的文件列表，并将它们与最新的服务器代码逐一进行比较，以查看您所做的更改。这听起来可能很费力，但它有几个好处：

*   它会提醒您所做的事情，这有时有助于填写签入注释以清楚地描述您的所有更改并确保您不会错过重要说明。
*   您会很容易地发现在合并过程中被搞砸的任何东西 - 将会有一些您知道自己没有接触过的似乎被创建或删除的代码块。因此，您将能够在签入之前发现并解决这些问题，而不是通过“删除”他们的更改来惹恼您的同事。
*   我发现这对于查找我在签入之前忘记取出的临时调试代码非常有用。
*   有时您甚至可能对即将签入的一些代码进行双重检查，然后想“嗯？我为什么要这样做？”。然后你可能会决定重新检查甚至重写你认为好的代码。

最后提示：您在编辑中显示的选项*仅与**您 PC 上*的另一个程序*对您 PC 上*的文件所做的更改有关。如果其他用户进行更改并将其签入源代码管理，这些选项将*无效*。只有当您的源代码控制系统将这些更改复制到您的 PC 硬盘驱动器时，您可能会看到 Visual Studio 对这些更改做出反应（取决于您的源代码控制系统与 VS 的集成程度）。

# spring - 将对象转换为类对象

> ID：15542870
> 
> 赞同：1
> 
> 时间：2013-03-21T08:47:40.457
> 
> 标签：spring, spring-mvc, hibernate-criteria

在我使用 Hibernate 的 Spring MVC 项目中，通过使用 Criteria API，我正在应用 Group BY 和 Order BY 子句。查询在 DB 上成功执行，它也带来了结果，但它是一个对象数组——

这是 Criteria API 的代码

```
Criteria criteria = session.createCriteria(DashboardSubindicatorSubmission.class, "DashboardSubindicatorSubmission")
                .setProjection(Projections.projectionList()
                        .add(Projections.sum("InputValue").as("InputValue"))
                        .add(Projections.groupProperty("fkAccademicYearId"))
                        .add(Projections.groupProperty("fkAssessmentPlanID"))
                        .add(Projections.groupProperty("fkSubindicatorID"))
                        .add(Projections.groupProperty("InputTitle")))
                .addOrder(Order.asc("fkAccademicYearId"))
                .addOrder(Order.asc("fkAssessmentPlanID"))
                .addOrder(Order.asc("InputTitle"));
        List<DashboardSubindicatorSubmission> dashboardSubindicatorSubmissionList = (List<DashboardSubindicatorSubmission>)criteria.list();
        session.flush();
        transaction.commit();
        return dashboardSubindicatorSubmissionList; 
```

我正在铸造`criteria.list()`，`List<DashboardSubindicatorSubmission>`但是当我尝试`dashboardSubindicatorSubmissionList.get(i)`在控制器上执行时，它给了我异常`java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to mkcl.accreditation.model.DashboardSubindicatorSubmission`。

我知道了，尽管我将它转换为`List<DashboardSubindicatorSubmission>`仍然是它的列表，`object[]`这就是为什么我不能这样做`dashboardSubindicatorSubmissionList.get(i)`，因为它返回我的对象`DashboardSubindicatorSubmission`​​。**（如果我错了，请纠正我）**

那么如何将我的结果转换为`DashboardSubindicatorSubmission`类列表？setResultTransformer() 在这种情况下对我有帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:12:27.097

你有两个选择。当您使用投影时，Hibernate 不知道如何尊重每个字段，因为它使用每个字段的名称来构建对象，而他还不知道名称。

因此，您的第一个选项是命名分组的字段，以便它们与对象属性的名称相匹配。即使您在投影中使用的字符串已经是对象字段的名称，这也是必要的。就像是：

```
.add(Projections.groupProperty("fkAccademicYearId"), "fkAccademicYearId") // same value
.add(Projections.groupProperty("fkAssessmentPlanID"), "other") // other value 
```

第二种选择是按照您自己的建议进行操作，创建您自己的 ResultTransformer 实现。如果您想提取此查询的其他对象，我认为这是一个有趣的选项，例如当您制作报告时。

# performance - VS 2012 - 解决方案资源管理器展示（慢）

> ID：15542874
> 
> 赞同：1
> 
> 时间：2013-03-21T08:47:52.663
> 
> 标签：performance, visual-studio-2012, solution-explorer

我正在开发一个网站（不是 Web 应用程序项目），但我遇到了 IDE 性能问题。例如，当我向项目添加一个新类或者我正在处理现有的类并单击解决方案资源管理器时，在窗口显示之前它需要很多时间并冻结 VS。我正在寻找在 VS 中禁用哪些选项，因为它真的很烦人。现在我在选项/项目和解决方案/常规中取消选中解决方案资源管理器中的跟踪活动项目，但必须有别的东西。我有 VS 2012 高级版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:56:04.780

Windows SysInternals 网站有一个名为 Process Monitor ( [http://technet.microsoft.com/de-de/sysinternals/bb842062](http://technet.microsoft.com/de-de/sysinternals/bb842062) ) 的工具，它可以嗅探任何正在运行的程序对注册表和文件的访问。您可以尝试使用此工具找出需要这么长时间的原因。

也看看这篇文章：http: [//blog.geocortex.com/2007/12/07/slow-visual-studio-performance-solved/](http://blog.geocortex.com/2007/12/07/slow-visual-studio-performance-solved/) - 在这种情况下，原因是文件夹 C:\Users\$用户名\AppData\Local\Microsoft\WebSiteCache。

# eclipse - maven 目标，编译和部署到服务器

> ID：15542877
> 
> 赞同：0
> 
> 时间：2013-03-21T08:47:59.437
> 
> 标签：eclipse, maven, tomcat, compilation

我正在使用 Eclipse 来管理一个 Maven 项目。

在这个项目的 pom 中，我有一个特殊的插件，它在 generate-ressources 阶段创建一个文件：

```
<plugin>
    <groupId>org.eclipse.acceleo</groupId>
    <artifactId>maven</artifactId>
    <version>3.2.1</version>
    <executions>
        <execution>
            <phase>generate-resources</phase>
            <goals>
                <goal>acceleo-compile</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

我已将此插件目标链接到 eclipse 生命周期以在 eclipse 编译期间执行它：

```
<plugin>
    <groupId>org.eclipse.m2e</groupId>
    <artifactId>lifecycle-mapping</artifactId>
    <version>1.0.0</version>
    <configuration>
        <lifecycleMappingMetadata>
            <pluginExecutions>
                <pluginExecution>
                    <pluginExecutionFilter>
                        <groupId>org.eclipse.acceleo</groupId>
                        <artifactId>maven</artifactId>
                        <versionRange>[3.2.1,)</versionRange>
                        <goals>
                            <goal>acceleo-compile</goal>
                        </goals>
                    </pluginExecutionFilter>
                    <action>
                        <execute />
                    </action>
                </pluginExecution>
            </pluginExecutions>
        </lifecycleMappingMetadata>
    </configuration>
</plugin> 
```

当我用eclipse做一个干净的项目时，项目再次编译，并且在eclipse编译过程中生成了文件（我可以在目标目录中找到它）。

现在，我想在 tomcat 服务器上部署我的 webapp。我使用 eclipse 的服务器视图创建了一个 tomcat 服务器，并将项目拖放到该服务器中以同步和发布它。

该项目部署良好，我可以启动服务器并测试我的应用程序。

但是，需要由maven插件生成的文件在发布操作期间没有被复制......

所以我的问题是：为什么一个maven插件生成的文件在eclipse编译时生成的很好，但在eclipse自动服务器管理的发布/同步操作期间没有部署在服务器上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:06:59.663

答案在您的问题中，因为您将插件配置为仅在 eclipse 生命周期期间运行，但是您错过了将执行添加到构建生命周期中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:09:38.763

据我所知，您的 webapp 的发布是由 eclipse [wtp](http://www.eclipse.org/webtools/common/)工具完成的。

要配置它（部署到服务器的内容），请查看这个[问题](https://stackoverflow.com/q/2119351/332248)和相应的答案。

简而言之：我认为您需要配置生成的文件（从您的目标目录）在 wtp 部署您的应用程序时也被复制。

# php - 单个表中的父子关系

> ID：15542880
> 
> 赞同：2
> 
> 时间：2013-03-21T08:48:12.440
> 
> 标签：php, mysql, parent-child

我有一张如下表。

```
parentid   uid
10001      10001
10001      10002
10001      10003
10002      10004
10004      10005
10003      10006
10005      10007 
```

我需要在这个单表中的行之间建立父子关系。

我需要以相反的顺序让父级**直到 4 个级别**。例如，最后一条记录是**uid 10007**，其**parentid 是 10005**。现在**uid 10005**的父级是**10004**和**10004**的父级是**10002**和**10002**的父级是**10001**。

我正在使用 MySQL，所以递归似乎是不可能的。我有哪些选择以及如何解决这个多层次的问题。我使用 PHP/MySQL。

提前谢谢各位。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:55:56.623

由于您有有限的 4 个级别，因此您不需要递归（尽管能够使用例如 MS SQL CTE 会很方便）。

就像是：

```
SELECT
  t4.uid as child, 
  --t3.uid as parent,
  --t2.uid as grand_parent,
  --t1.uid as great_grand_parent,
  t1.parentid as great_great_grand_parent
FROM
  your_table_name t1

  inner join your_table_name t2
  on t2.parentid = t1.uid

  inner join your_table_name t3
  on t3.parentid = t2.uid

  inner join your_table_name t4
  on t4.parentid = t3.uin

where 
  t4.uid = '10007' -- your start node. 
```

如果您需要对多个节点执行此操作，则需要将其加入到选择起始节点的内容中，或者例如将上述`WHERE t4.uid = '10007'`子句替换为`WHERE t4.uid IN (SELECT DISTINCT uid FROM your_table_name)`

这是徒手完成的，因此对错别字表示歉意。

# php - PHP重定向在IE上不起作用？

> ID：15542881
> 
> 赞同：0
> 
> 时间：2013-03-21T08:48:19.490
> 
> 标签：php, html, internet-explorer, email, redirect

我尝试使用脚本发送电子邮件并重定向到主页。是的，这是工作！但...

在 IE 上，它不起作用。

代码示例：

```
<?php
if(isset($_POST['email'])) {

    // EDIT THE 2 LINES BELOW AS REQUIRED
    //$email_to1 = "a@abc.com";
    $email_to2 = "b@abc.com";
    $email_subject = "Email from www.abc.com";         
    ................
    ................                  
    // create email headers
    $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    //@mail($email_to1, $email_subject, $email_message, $headers);
    @mail($email_to2, $email_subject, $email_message, $headers);
    header("Refresh: 3; http://www.abc.com/Contact.html");
?>

<!-- include your own success html here -->

    Thank you for contacting us. We will be in touch with you very soon.<br>
    <a href="http://www.abc.com/Contact.html">back to website</a>
<?php
}
?> 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:01:01.513

请使用以下代码

```
 header('Location:http://www.abc.com/Contact.html')
    exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:52:59.643

请改用此代码

```
die(header('Location:http://www.abc.com/Contact.html')); 
```

您可以省略`die()`，但在这里很有用，因为使用它可以防止脚本在发送重定向标头后运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T13:33:25.513

改变

```
header("Refresh: 3; http://www.abc.com/Contact.html"); 
```

进入

```
header("Refresh: 3; URL=http://www.abc.com/Contact.html"); 
```

我认为这应该可以解决问题

还要注意这个答案：['Refresh' HTTP header](https://stackoverflow.com/questions/283752/refresh-http-header#answer-283794)和这个评论：['Refresh' HTTP header](https://stackoverflow.com/questions/283752/refresh-http-header#comment7046598_283752)

# c# - System.UnauthorizedAccessException 未被用户代码以简单代码处理

> ID：15542883
> 
> 赞同：0
> 
> 时间：2013-03-21T08:48:24.577
> 
> 标签：c#, sharepoint, sharepoint-2010

我在非常简单的代码中得到了这个异常，并且我以提升的权限运行它。它在sharepoint 2010中

```
private void ChangeVersioningOnDocumentLibrary(SPListItem item, SPItemEventProperties properties, SPSite site)
        {
            string sitename = item[MeetingsCommon.Constants.FIELDS_TEXT_TITLE_NAME].ToString();
            string prefix = item[MeetingsCommon.Constants.FIELDS_TEXT_TITLE_NAME].ToString().Substring(0, 2);
            bool isConfirmed = item.TaxonomyFieldValueIsGivenValue(properties.AfterProperties, MeetingsCommon.Constants.FIELDS_MEETINGSTATUS_NAME, MeetingsCommon.Constants.TERMVALUE_MEETINGSTATUS_CONFIRMED, 1033);
            bool isPublished = item.TaxonomyFieldValueIsGivenValue(properties.AfterProperties, MeetingsCommon.Constants.FIELDS_MEETINGSTATUS_NAME, MeetingsCommon.Constants.TERMVALUE_MEETINGSTATUS_PUBLISHED, 1033);

            if (isConfirmed)
            {
                SPSecurity.RunWithElevatedPrivileges(delegate()
                {
                    using (SPWeb web = site.OpenWeb(prefix + "/" + sitename))
                    {

                            if (web.Exists)
                            {
                                web.AllowUnsafeUpdates = true;
                                SPList agendaPoints = web.GetSafeListByName(MeetingsCommon.Constants.LISTS_AGENDAPOINTS_NAME);
                                agendaPoints.EnableModeration = true;
                                agendaPoints.DraftVersionVisibility = DraftVisibilityType.Author;
                                agendaPoints.Update();
                                web.AllowUnsafeUpdates = false;
                            }

                    }
                });
            }
            if (isPublished)
            {
                SPSecurity.RunWithElevatedPrivileges(delegate()
                {
                    using (SPWeb web = site.OpenWeb(prefix + "/" + sitename))
                    {                    
                        if (web.Exists)
                        {
                            web.AllowUnsafeUpdates = true;
                            SPList agendaPoints = web.GetSafeListByName(MeetingsCommon.Constants.LISTS_AGENDAPOINTS_NAME);
                            agendaPoints.EnableModeration = false;
                            agendaPoints.DraftVersionVisibility = DraftVisibilityType.Author;
                            agendaPoints.Update();
                            web.AllowUnsafeUpdates = false;
                        }                    
                    }
                });
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T07:33:55.757

问题是它使用了来自 RunWithElevatedPriviliges 外部的 spsite 对象，必须在内部再次创建 spsite 对象才能使其工作。

# xml - 远程读取xml文件

> ID：15542885
> 
> 赞同：0
> 
> 时间：2013-03-21T08:48:31.040
> 
> 标签：xml

我有一个独立的基于 Java 的桌面应用程序。此应用程序使用需要定期更新的属性文件（简单文本格式）。为此，此应用程序应连接到远程服务器，读取位于那里的 xml 文件并根据 xml 中的数据更新我的属性文件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T08:53:00.353

使用类 url

```
URL url = new URL("http://yourremoteserver.com/file_to_be_read.xml");
 URLConnection urlConnection = url.openConnection();
 InputStream in = new BufferedInputStream(urlConnection.getInputStream()); 
```

# qt - qt QTranslator 重用

> ID：15542887
> 
> 赞同：4
> 
> 时间：2013-03-21T08:48:44.080
> 
> 标签：qt, runtime, translation

我注意到 Qt 文档在翻译的某些方面不是很冗长。我一直在玩弄它，试图通过反复试验来弄清楚他们的行为。最终目标是在运行时更改翻译，但我很困惑 QTranslator 对象在多大程度上可以重用。

考虑一下（其中“a”是应用程序的主要实例）：

```
QTranslator translator;
translator.load("mytranslation_cz");
a.installTranslation(&translator);

(...)

a.removeTranslation(&translator) 
```

现在翻译器已从应用程序中删除，但翻译器对象发生了什么？

在我的测试中，上面的代码又跟了这个

```
translator.load("mytranslation_fr");
a.installTranslation(&translator); 
```

它在 main() 中没有做任何事情，当从其中一个小部件调用时（使用指向主应用程序的指针），它使应用程序崩溃。

因此，我怀疑每次要在应用程序中加载的翻译都需要创建一个 QTranslator 对象，并且*我无法重用 QTranslator 对象*。我的这个假设是对的吗？

作为一个附带问题。假设 QTranslator 对象没有被 removeTranslation() 触及，是否可以像这样稍后再次简单地安装它？

```
QTranslator translator; 
QTranslator translator1;
translator.load("mytranslation_cz");
translator1.load("mytranslation_fr");
a.installTranslation(&translator);
(...)
a.removeTranslation(&translator);
a.installTranslation(&translator1);
(...)
a.removeTranslation(&translator1);
a.installTranslation(&trasnlator); //Will this work? 
```

感谢您的澄清，因为我对在应用程序中安装和删除翻译时 QTranslation 对象会发生什么感到有些困惑，*特别是如果 QTranslation 对象可以在运行时以某种方式重用于多个翻译？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T15:26:47.820

[QTranslator::load](http://qt-project.org/doc/qt-4.8/qtranslator.html#load-2)基本上在简单的意义上可以被认为是一个打开给定`.qm`文件的函数，读取所有翻译的值并将其加载为特定语言。

现在，在一般操作中，您不希望将其用于多种语言，因为通过“重用”（即使允许），您`.qm`每次切换 UI 语言时都会增加为每种语言解析此给定文件的开销，这基本上是一个你不需要的开销。

您为每种语言创建一个的假设`QTranslator`是正确的。至于您的附带问题，是的，您也可以重复使用它。`QTranslator`这就是每次翻译都有单独的对象的好处。只需使用当前翻译调用[qApp->removeTranslator()](http://qt-project.org/doc/qt-4.8/qcoreapplication.html#removeTranslator)，然后`qApp->installTranslator()`使用新翻译。这样你就可以在你喜欢的时候重用加载的翻译。

我们构造它的方式是通过子类化`QApplication`和添加 2 个函数

```
void Application::CreateTranslators() {
  // translators_ is a QMap<QString, QTranslator*>
  if (!translators_.isEmpty())  
    return;
  QStringList languages;
  languages << "en" << "ar" << "zh";
  foreach(QString language, languages) {
    QTranslator* translator = new QTranslator(instance());
    translator->load(language);
    translators_.insert(language, translator);
  }
} 
```

现在这个函数在应用程序的一开始就被调用。

第二个功能如下

```
void Application::SwitchLanguage(QString language) {
  // current_translator_ is a QTranslator*
  if (current_translator_)
    removeTranslator(current_translator_);

  current_translator_ = translators_.value(language, nullptr);
  if (current_translator_)
    installTranslator(current_translator_);
} 
```

就是这样。使用第二个功能，您可以在运行时随意切换语言。

您还需要注意的几件事是`QTranslator`在运行时更改将自动更新`.ui`标记为可翻译的文件字符串中的所有翻译，但是从代码中设置的那些不会。为此，您必须覆盖[QWidget::changeEvent()](http://qt-project.org/doc/qt-4.8/qwidget.html#changeEvent)然后检查事件是否属于类型`QEvent::LanguageChange`，然后相应地设置所需的字符串`QWidget`（不要忘记`tr()`这样做的时候）

# c - #ifdef in c for filename 用于保护头文件中的静态函数

> ID：15542889
> 
> 赞同：0
> 
> 时间：2013-03-21T08:48:48.163
> 
> 标签：c, header-files

我有一种情况，我有一个头文件，并且必须包含在多个文件中。它有一些静态函数原型。我想做这样的事情

```
#ifdef filename.c 
 static foo(void );
 static bar(int );
#endif 
```

这意味着如果我将它包含在一个名为 filename.c 的文件中，那么这些函数原型是活动的，如果包含在其他文件中，它们是安静的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:52:36.197

`filename.c`是一个相对不常见的符号。除此之外，您还需要在 filename.c 文件中明确定义一个符号。喜欢：

```
#ifdef FILENAME_C_ 
 static foo(void );
 static bar(int );
#endif 
```

在你的`filename.c`-file

```
#define FILENAME_C_ 
```

您应该更喜欢 中的下划线`_`版本`FILENAME_C_`，它更常见且更易于阅读。但是，我不明白您为什么只声明这些功能？无论如何，您都需要在 filename.c 文件中定义它们。你想用这个实现什么？

# ipad - 在 ipad 中查看动态 Flash 网站

> ID：15542891
> 
> 赞同：0
> 
> 时间：2013-03-21T08:48:56.753
> 
> 标签：ipad, flash

大家好

我真的面临一个很大的问题。我创建了一个动态 AS3 flash 网站，它从 xml 文件加载图像和文本。

一切都很好，工作正常。除了它在 Ipad / iphone 中完全死机。我的客户不知何故没有意识到这一点。现在他对IPAD在当今世界等方面的重要性大发雷霆。

我知道 IPAD 不支持闪存。除了用 HTML5 等重新编码完整网站的 OBVIOUS 解决方案之外，我只是想知道是否有人尝试过任何其他可以使其工作的方法。

我听说过以下内容，想知道这是否有意义：

1\. 在 iPad 上使用支持 Flash 的浏览器应用程序

像光子，天火，海雀：这些兄弟有什么好处吗？观察！！

2\. 将 Flash 文件转换为 HTML5

使用 ：

(1) 谷歌 SWiffy

尝试使用 flash 专业 cs5 的 swiffy 扩展将 flash 转换为 HTML5，但输出是一场灾难。XMLlist 被忽略，....错误列表是无穷无尽的。

(2) 使用 Flash Professional CS6 / Toolkit for CreateJS

有没有人有这方面的经验？？有什么建议么。

(3) Sothink sWf反编译器——反编译成HTML5

(4) Adob​​e 小袋鼠

(5) 任何其他的东西……

3\. 使用 ADOBE AIR

(1) 重新打包为IOS的app

这会起作用，但永远不能提供网站的体验。有什么想法吗。

(2) 打包成 AIR 可执行文件，可以在 IPAD 上运行？？

Apple Ipad 是否允许安装 AIR 文件？

它可以以某种方式添加到浏览器中，并且可以自动加载到 IPAD 等中的 safari 浏览器中吗？它极不可能。有什么想法吗 ！！

如果有人可以分享他们对这些选项的经验以及是否值得一试，我将不胜感激！

唯一可用的选项是仅记录！！

谢谢...期待您的所有意见和建议

谢谢大家的期待

穆迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-29T18:17:48.297

像你一样，除了非常简单的 as2 动画之外，我发现 swiffy 在大多数事情上都是浪费时间。我不了解 AIR，但带有 createjs 的 CS6 工具包非常好。观看 adobe 网站 ( [http://www.adobe.com/devnet/createjs.html](http://www.adobe.com/devnet/createjs.html) ) 上的视频 - 它很好地介绍了您能做什么和不能做什么。

皮特

# android - ExpandableListView 中的子选择

> ID：15542892
> 
> 赞同：3
> 
> 时间：2013-03-21T08:48:57.790
> 
> 标签：android, expandablelistview

是否可以最初选择一个`ExpandableListView`子项，以便扩展包含组并将列表滚动到该子项的位置？

我认为`setSelectedChild`会做的伎俩，但它没有给出任何结果。

我使用以下代码进行了测试：

```
public class MainActivity extends Activity {

private static final String TITLE = "title";

@SuppressWarnings("serial")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    ExpandableListView listView = new ExpandableListView(this);
    SimpleExpandableListAdapter adapter = new SimpleExpandableListAdapter(this, 
        new ArrayList<Map<String,String>>() {
            {
                this.add(new HashMap<String, String>() {
                    {
                        this.put(TITLE, "Group 1");
                    }
                });
                this.add(new HashMap<String, String>() {
                    {
                        this.put(TITLE, "Group 2");
                    }
                });
                this.add(new HashMap<String, String>() {
                    {
                        this.put(TITLE, "Group 3");
                    }
                });
            }
        }, 
        android.R.layout.simple_expandable_list_item_1, 
        new String[] { TITLE }, 
        new int[] { android.R.id.text1 }, 
        new ArrayList<List<? extends Map<String,String>>>() {
            {
                this.add(new ArrayList<Map<String,String>>() {
                    {
                        this.add(new HashMap<String, String>() {
                            {
                                this.put(TITLE, "Child 1-1");
                            }
                        });
                        this.add(new HashMap<String, String>() {
                            {
                                this.put(TITLE, "Child 1-2");
                            }
                        });
                    }
                });
                this.add(new ArrayList<Map<String,String>>() {
                    {
                        this.add(new HashMap<String, String>() {
                            {
                                this.put(TITLE, "Child 2-1");
                            }
                        });
                        this.add(new HashMap<String, String>() {
                            {
                                this.put(TITLE, "Child 2-2");
                            }
                        });
                    }
                });
                this.add(new ArrayList<Map<String,String>>() {
                    {
                        this.add(new HashMap<String, String>() {
                            {
                                this.put(TITLE, "Child 3-1");
                            }
                        });
                        this.add(new HashMap<String, String>() {
                            {
                                this.put(TITLE, "Child 3-2");
                            }
                        });
                    }
                });
            }
        },
        android.R.layout.simple_expandable_list_item_2,
        new String[] { TITLE },
        new int[] { android.R.id.text1 }
    );
    listView.setAdapter(adapter);
    setContentView(listView);

    listView.setSelectedChild(1, 1, true);
}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-21T11:13:47.727

添加对`listView.expandGroup()`之前的调用`setSelectedChild()`。

`shouldExpandGroup`设置为 true in的参数`setSelectedChild()`似乎只有在至少有一个组首先展开时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T20:58:51.327

在 ExpandableListView 中是否可以最初选择一个子项，以便展开包含组并将列表滚动到该子项的位置：

```
//select child and open it's group
ExpListView.setSelectedChild(groupPos, childPos, true);
//scroll to selected child
ExpListView.smoothScrollToPosition(ExpListView.getFlatListPosition(ExpListView.getPackedPositionForChild(groupPos, childPos))); 
```

# c - C中的分段错误，似乎找不到原因

> ID：15542896
> 
> 赞同：0
> 
> 时间：2013-03-21T08:49:14.963
> 
> 标签：c, segmentation-fault

我似乎无法在下面的代码中找到分段错误的原因。在从evaluate() 跳回main() 后，代码在注释行中崩溃。我用 gdb 查看了这段代码，在评估函数中似乎一切正常 - 输出已正确填写，但是在我返回 main 后，内存中的任何内容都无法访问。gdb 中的“p j”返回内存不可访问错误，尝试打印任何其他变量也是如此。我检查了堆栈是否可能有很多值，但增加堆栈大小没有帮助。

疯狂的是我可以解决这个错误，但我不知道为什么它会改变任何东西。如果我在evaluate() 中的任何位置添加一个int 声明（例如`int iAmNotUsedEver;`），那么代码突然不会导致分段错误并且在gdb 中完美运行。编辑：在评估（`int *node = malloc(116*sizeof(int));`）中动态分配节点[116]也解决了这个问题，但我还是不知道为什么？

评估函数：（我删除了部分代码，否则会太长）

```
void evaluate(int *parameter, int output[][16]) {
    int node[116];
    node[0] = 0;
    output[0][0] = !node[0];
    node[1] = parameter[0];
    output[0][1] = !node[1];
    output[0][2] = !node[0];
    ...
    node[34] = !node[114] && !node[45];
    node[45] = !node[34] && !node[105];
    output[11][15] = node[45];
} 
```

主功能：

```
int main(int argc, char *argv[]) {
    int i;
    int j;
    int k;
    int ret;
    int parameter[8];
    int output[12][16];
    FILE *paramFile;
    FILE *outFile;

    paramFile = fopen(argv[1], "r");
    if (paramFile == NULL) {
        printf("I couldn't open the parameter file.\n");
        exit(0);
    }
    outFile = fopen(argv[2], "ab");
    if (outFile == NULL) {
        printf("Something went wrong with the output file.\n");
        exit(0);
    }
    while(1){
        for(i=0;i<8;i++){
            ret=fscanf(paramFile, "%d", &parameter[i]);
            printf("parameter: %d\n", parameter[i]);
        }
        if(ret!=1){
            break;
        }
        for(j=0;j<12;j++){
            for(k=0;k<16;k++){
                output[j][k] = 2;
            }
        }
        evaluate(parameter,output);
        printf("Evaluation is done. \t %d\n",i);
        for(j=0;j<12;j++){ //SEG FAULT HERE
            for(k=0;k<16;k++){
                fprintf(outFile, "%d", output[j][k]);
            }
            fprintf(outFile,"\n");
        }
        fprintf(outFile,"\n\n\n");
    }
    printf("Closing files\n");  
    fclose(paramFile);
    fclose(outFile);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:17:05.340

首先，您应该检查是否至少有两个参数。这也可能引发分段错误。

```
if (argc < 3)
    return -1; 
```

然后，在评估中，因为它们是固定数组，您应该传入参数

```
void evaluate(int parameter[8], int output[12][16]) {
    ...
} 
```

你也可以这样做

```
void evaluate(int *parameter, int **output) {
    ...
} 
```

我认为可以避免在这两个声明中使用一个段错误。

# java - 第二个表单提交时 XmlHttpReqest 缺少参数（仅限 IE）

> ID：15542901
> 
> 赞同：0
> 
> 时间：2013-03-21T08:49:24.027
> 
> 标签：java, jsp, nullpointerexception, xmlhttprequest, url-parameters

我的jsp中有一个简单的输入字段。它在大多数浏览器中都可以正常工作，而在 IE 中则不然。

当表单在 IE 中使用时，只有第一次提交才会起作用。由于表单中的某些参数丢失，因此之后的每次提交都会“失败”。这不是 Chrome 或 Firefox 的问题。如果我在每次提交之间重新加载页面，它在 IE 上也可以正常工作，但这不是一个选项。

形式：

```
<form id="form1" method="post" action="receiver.htm">
<table>
    <tr id="name">
        <td>Name</td>
        <td><input id="input_name" name="name"/></td>
    </tr>
    <tr>
        <td>Amount</td>
        <td><input id="amount" name="amount" type="text"/></td>
    </tr>
    <tr>
        <td>Unit</td>
        <td><input id="unit" name="unit" type="text"/></td>
    </tr>
    <tr>
        <td colspan="2"><input id="submit_button" type="submit" value="submit"/></div>
        </td>
    </tr>
</table>
</form> 
```

控制器：

```
@RequestMapping(value = "/receiver.htm", method = RequestMethod.POST)
@ResponseBody public String receive(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse) throws Exception {
    String name = httpServletRequest.getParameter("name");
    String amount = httpServletRequest.getParameter("amount");
    UnitType unit = UnitType.getValue(httpServletRequest.getParameter("unit"));
} 
```

UnitType 是我制作的一个枚举。并且在使用 IE 进行第二次提交后，它会引发以下异常，因为某些参数返回为 null：

```
java.lang.NullPointerException: Name is null 
```

# codeigniter - 使用 jquery 从数据库中获取单个结果的模型

> ID：15542906
> 
> 赞同：3
> 
> 时间：2013-03-21T08:49:31.607
> 
> 标签：codeigniter, jquery, model

我有一个由 jquery 调用的控制器函数：

```
 function get_sku_prices(){
    $this->load->model('Sales_model');
    if (isset($_GET['term'])){
      $q = strtolower($_GET['term']);
      $this->Sales_model->get_sku_price($q);
    }
} 
```

模型 get_sku_price 为：

```
 function get_sku_price($q){
    $this->db->select('price');
    $this->db->where('sku', $q);
    $query = $this->db->get('products');
    if($query->num_rows > 0){
      foreach ($query->result_array() as $row){
        $row_set[] = htmlentities(stripslashes($row['price'])); //build an array
      }
      $this->output->set_content_type('application/json')->set_output(json_encode($row_set));

    }
  } 
```

我想要的是将上述查询的结果（本质上是`select price from products where sku=36113`）返回到我的视图表单上的输入变量“价格”。

我的视图语法是：

```
<html>
   <head>
      <title>
         Capture blank Order
      </title>
      <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
      <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script> 
      <link rel="stylesheet" href="<?php echo base_url() ?>css/sales.css" />

<script type="text/javascript"> 
 function callAutocomplete(element) 
 { 
     $(element).autocomplete( 
     { 
         source: "sales/get_sku_codes", 
         messages: 
         { 
             noResults: '', 
             results: function() {} 
         }, 
         select: function( event, ui ) 
         {
             var selectedObj = ui.item; 
             $.post('sales/get_sku_prices', {data:selectedObj.value},function(result) { 
             $(ui).parent('tr').find('input[id^="pricepercube"]').val(result); 
             }); 
         } 
     }); 
 } 

 $(function() 
 { 
     var counter = 1; 
     jQuery("table.authors-list").on('change','input[name^="qty"]',function(event) 
     { 
         event.preventDefault(); 
         counter++; 
         var newRow = jQuery('<tr>'+ 
         ' <td><a class="deleteRow"> x </a></td>' + 
         ' <td><input type="text" id="product' + counter + '" name="product' + counter + '" /></td>' + 
         ' <td><input type="text" id="qty' + counter + '" name="qty' + counter + '" /></td>'+ 
         ' <td><input type="text" id="price' + counter + '" name="price' + counter + '" /></td>'+ 
         ' <td><input type="text" id="discount' + counter + '" name="discount' + counter + '"  /></td>'+ 
         ' <td valign=top><input type="checkbox" id="treated' + counter + '" name="treated' + counter + '" /></td>'+ 
         ' </tr>'); 
         jQuery('table.authors-list').append(newRow); 
         callAutocomplete("#product"+ counter); 
     }); 

$("#product").autocomplete( 
 { 
 source: "sales/get_sku_codes", 
 messages: 
 { 
 noResults: '', 
 results: function() {} 
 }, 
 select: function( event, ui ) 
 { 
 var selectedObj = ui.item; 
 $.post('<?=site_url("sales/get_sku_prices")?>', {data:selectedObj.value},function(result) 

 { 
 $("#price").val(result); 
 }); 
 } 
 });

 }); 

 </script>

  </head>
<body>

<table class="authors-list" border=0>
  <tr><td></td><td>Product</td><td>Qty</td><td>Price/Cube</td><td>Discount</td><td>treated</td></tr>
  <tr>
   <td><a class="deleteRow"> x </a></td>
   <td><input type="text" id="product" name="product" /></td>
   <td><input type="text" id="qty" name="qty" /></td>
   <td><input type="text" id="price" name="price" /></td>
   <td><input type="text" id="discount" name="discount" /></td>
   <td valign="top" ><input type="checkbox" id="treated" name="treated" /></td>
</tr>
</table>

</body>
</html> 
```

Firefox 返回 200 OK 消息。可以看到post信息中包含了商品输入的内容，但是返回的html是空白的？

**更新**

mysql ![在此处输入图像描述](../Images/4d65d8a85cd7bb3b4a85bccf9c21e2f9.png)

邮政 ![在此处输入图像描述](../Images/0900dbd0fd0c3041730d0b3299468f3d.png)

空白的html ![在此处输入图像描述](../Images/2fe3fcc230c8cf382af1a7139a4b11f8.png)

我的模型查询是否正确？帖子是否正确传递给他的模型？我怎样才能验证这一点？

再次感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:47:10.743

您在内部传递数据`$.post`并将其作为`term`.

改变

```
if (isset($_GET['term'])){ 
```

到

```
if (isset($_POST['data'])){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:04:31.127

您应该从控制器而不是模型输出数据。

控制器：

```
function get_sku_prices(){
    $this->load->model('Sales_model');
    if (isset($_GET['term'])){
        $q = strtolower($_GET['term']);
        $data = $this->Sales_model->get_sku_price($q);
        $this->output->set_content_type('application/json')->set_output(json_encode(data));
    } 
} 
```

模型：

```
 function get_sku_price($q){
    $this->db->select('price');
    $this->db->where('sku', $q);
    $query = $this->db->get('products');
    if($query->num_rows > 0){
        foreach ($query->result_array() as $row){
            $row_set[] = htmlentities(stripslashes($row['price'])); //build an array
       }
       return $row_set;
    }
  } 
```

除上述内容外，您通过 AJAX 将数据作为 POST 数据传递，但在您的控制器中，您正尝试从 GET 数组接收数据。

# excel - 随机化行的顺序

> ID：15542912
> 
> 赞同：0
> 
> 时间：2013-03-21T08:50:12.047
> 
> 标签：excel, random, excel-formula, worksheet-function

我正在 Excel 中创建一个测验。结构是：

```
序列号 问题 选择正确的选项 正确/错误标记
```

我有一些问题的列表，答案选项在下拉列表中。我想用他们的答案选项随机化问题[意味着我想随机化整行]。

是否有任何内置 Excel 功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T00:53:57.727

通过添加包含 `=RANDBETWEEN(x,y) 的列并对该列上的整个行进行排序，您可能会获得足够的结果。这里 x 可能是您的最低序列号，而 y 可能是最高的。可以用 更改`F9`。

RANDBETWEEN 是如何工作的，因为固有的（次要）缺陷并不是真正随机的，因为能够产生重复值将倾向于维持现状。

# eclipse - 在外部 jar 中打开或搜索资源

> ID：15542917
> 
> 赞同：0
> 
> 时间：2013-03-21T08:50:30.117
> 
> 标签：eclipse, jar, resources, external

有没有办法在 eclipse 中使用“Open Resource”或 Search -> File 来查找外部 jar 中的资源文件（例如 *.js、*.css）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:36:51.337

将这些外部 jar 添加到项目中，最好是在不同的文件夹中。**并通过在“包含文本”字段中输入文件名和在“****文件名模式”**中输入* * 来搜索 -> 文件

# ruby-on-rails - 一种在没有模型的情况下为控制器使用表单自动魔法的方法

> ID：15542919
> 
> 赞同：0
> 
> 时间：2013-03-21T08:50:31.203
> 
> 标签：ruby-on-rails

我有一个没有模型的控制器来处理非常周期性的任务。用户基本上是在填写表格，将其发送到服务器进行一些小的分析，然后服务器将几乎相同的内容反刍给用户。用户进行一些调整，然后重新开始该过程。

这个过程没有什么可以保存或存储的，所以它没有模型。

我正在使用的表单有大量字段需要处理。有没有一种方法可以将参数哈希传递回视图，并且重新填充字段时造成的混乱最少？

基本上，我想调整 params 散列中的几个值，但或多或​​少地将散列传回，以便它可以几乎完全按照提交时的状态重新填充视图。

使用 OpenStruct 的旧方法似乎很理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:59:46.150

也许 ActiveForm 对您的应用程序有好处。它用于管理（新建/创建/验证/...）没有或多个模型的表单。

[https://github.com/realityforge/rails-active-form](https://github.com/realityforge/rails-active-form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:57:52.963

这会有帮助吗？

在**控制器操作**中，只需初始化一个类似`@params`（或类似这样的东西）的变量，以便能够使用`params`该视图页面中可用的所有值。

# java - 如何使用正则表达式解析用户代理字符串？

> ID：15542920
> 
> 赞同：0
> 
> 时间：2013-03-21T08:50:39.623
> 
> 标签：java, regex, browser

我想要用户代理字符串中的“操作系统、设备、制造商”详细信息。但是，现在用户代理字符串格式不是链接[https://www.rfc-editor.org/rfc/rfc2616#section-14.43](https://www.rfc-editor.org/rfc/rfc2616#section-14.43)中提到的浏览器标准。

我分析了几个第三方，比如 ua-parser。我的感觉是如果推出任何新的浏览器或设备。我需要等待他们的发布或更改源代码。

如何提取详细信息？

是否有任何正则表达式可以找到详细信息？

# ruby-on-rails - 冒号作为 Rails Route 的分隔符？

> ID：15542936
> 
> 赞同：2
> 
> 时间：2013-03-21T08:51:26.930
> 
> 标签：ruby-on-rails, regex, url, routes, colon

我想在我的 rails route url 中使用冒号作为分隔符，而不是正斜杠。有可能做到这一点吗？

* * *

我正在追求类似以下的东西

```
match '*page_path/:title ":" *section_path ":" :section_title' => 'pages#show' 
```

所以对于 url`food/fruit/apples:cooking:pie:apple_pie`将返回参数：

```
:page_path = "food/fruit"
:title = "apples"
:section_path = "cooking:pie"
:section_title = "apple_pie" 
```

* * *

这在rails中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:07:19.640

这是一种方法：

```
match 'food/fruit/:id' => 'pages#show' # add constraints on id if you need

class Recipe < ActiveRecord::Base
  def self.from_param( param )
    title, section_path, section_title = extract_from_param( param ) 
    # your find logic here, ex: find_by_title_and_section_path_and_section_title...
  end

  def to_param
    # build your param string here, 
    # ex: "#{title}:#{section_path}:#{section_title}" 
    # Beware ! now all your urls relative to this resource
    # will use this method instead of #id. 
    # The generated param should be unique, of course.
  end

  private

  def self.extract_from_param( param )
    # extract tokens from params here
  end
end 
```

然后在你的控制器中：

```
 @recipe = Recipe.from_param( params[:id] ) 
```

请注意，使用内置的[to_param](http://apidock.com/rails/ActiveRecord/Base/to_param)方法是可选的。

# java - 创建一个具有自身列表或其他变量的 java 类

> ID：15542939
> 
> 赞同：0
> 
> 时间：2013-03-21T08:51:31.970
> 
> 标签：java, jpa

考虑这个示例类：

```
public class Foo {
    private List<Foo> manyFoos;
    private String Bar;
} 
```

我希望此类的实例仅填充两个属性之一。在普通的java中，我会使用一个接口并创建两个类，但我找不到一种方法来正确地注释它以便jpa工作（eclipselink）。是否可以通过一些巧妙的设计技术来实现这个逻辑，或者它是否需要在 getter 和 setter 中添加额外的代码，这会导致这种行为？

任何建议都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T13:32:59.120

我不会尝试将此规则放入您的模型结构中，而只是在您的方法或应用程序中实现该规则。

# jquery - 在提交时禁用文本框并在重置时启用

> ID：15542941
> 
> 赞同：0
> 
> 时间：2013-03-21T08:51:34.310
> 
> 标签：jquery, jquery-ui, validation

使用 Jquery，一旦提交文本框并单击清除按钮，需要禁用文本框，应清除并启用文本框中的值。

代码：

```
<table width="75%">
  <tr>
    <td>
      <h:outputLabel   value="Actual Card Number">
      </h:outputLabel>
     </td>
     <td>
       <h:outputLabel value="Disguised" style="font: 13px/15px Arial,sans-serif!important;">
       </h:outputLabel>

     </td>
  </tr>
  <tr>
    <td>
      <h:inputText id="Actualcard" styleClass="input-text-bx">

      </h:inputText>
    </td>
    <td>
      <h:inputText id="Disguisedcard" styleClass="input-text-bx">

      </h:inputText>
    </td>
  </tr>
  <tr>
  </tr>
  <tr class="field">
    <td>
      <h:commandButton styleClass="input-sub-btn" value="Submit">
      </h:commandButton>
    </td>
    <td align="center">
      <h:commandButton styleClass="input-sub-btn" value="Clear">
      </h:commandButton>
    </td>
  </tr>
  <tr>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:03:04.543

将相同的类应用于要禁用或启用的所有元素

提交：

```
 $('.className').attr('disabled','true'); 
```

重置：

```
 $('.className').attr('disabled','false'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:23:40.490

首先，您需要为提交（例如 btnSubmit）和清除（例如 btnClear）按钮提供 id。

```
$(document).ready(function(){
    $('#btnSubmit').click(function(){
        $('input[type="text"]').attr('disabled', 'true');   //disables all textbox
    });

    $('#btnClear').click(function(){
        $('input[type="text"]').val('').removeAttr('disabled');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T09:28:53.813

以下代码将执行所需的行为。

```
<script>
$(document).ready(function(){

$("[value='Submit']").click(function(event){
//code for Submit
$(".input-text-bx").attr("disabled","disabled"); //disable all text fields.
event.preventDefault();
});

$("[value='Clear']").click(function(event){
//code for Clear
$(".input-text-bx").removeAttr("disabled"); //enable all text fields.
$(".input-text-bx").attr("value",""); //clear all text fields.
event.preventDefault();
});

});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-08T05:33:44.507

禁用它所需要做的就是向该元素（输入、文本区域、选择、按钮）添加禁用属性。例如：

```
<form action="url" method="post">
  <input type="text" class="input-field" value=".input-field">
  <input type="button" class="button-field" value=".input-field">
  <input type="radio" class="radio-button" value=".input-radio">
  <select class="select-box">
    <option value="1">One</option>
  <select class="select-box">
</form> 
```

用于禁用表单元素并重新启用它们的 jQuery 代码：

```
// jQuery code to disable
$('.input-field').prop('disabled', true);
$('.button-field').prop('disabled', true);
$('.radio-button').prop('disabled', true);
$('.select-box').prop('disabled', true);

// To enable an element you need to either
// remove the disabled attribute or set it to "false"
// For jQuery versions earlier than 1.6, replace .prop() with .attr()
$('.input-field').prop('disabled', false);
$('.button-field').removeAttr('disabled');
$('.radio-button').prop('disabled', null);
$('.select-box').prop('disabled', false); 
```

# c# - 精确地对代码进行基准测试

> ID：15542947
> 
> 赞同：0
> 
> 时间：2013-03-21T08:51:56.233
> 
> 标签：c#, .net, benchmarking, performance-testing

我需要以尽可能高的精度来衡量我的代码的性能。

目前我正在使用：
- 秒表来测量时间
- 设置进程亲和性以始终使用相同的 CPU 内核
- 将线程优先级设置为最大值
- 在测量之前执行预热运行
- 运行测试 1000 次并计算平均值

但是，基准运行之间仍然存在差异（最大约 1%）。任何想法如何使这种测量更精确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:21:57.723

这可能很明显，但您的 CPU 并非专用于您的单个进程。它还负责操作系统和硬件的许多其他事情。

此外，内存使用情况、HDD 使用情况和 GC 行为可能因执行而异。也许您的计算需要虚拟内存，这比 RAM 访问慢得多。等等...

关于 GC，您可以尝试使用“GCSettings.LatencyMode”的不同设置来查看它是否会改变任何内容（请参阅[http://blogs.microsoft.co.il/blogs/sasha/archive/2008/08/10/low -latency-gc-in-net-3-5.aspx](http://blogs.microsoft.co.il/blogs/sasha/archive/2008/08/10/low-latency-gc-in-net-3-5.aspx)例如）。

在同一台计算机上的单个会话中，秒表非常准确：如果执行之间的持续时间不同，这可能不是因为测量缺乏准确性，而是因为过程本身并不总是花费相同的时间......显然，测试的每次“迭代”至少需要几百毫秒，秒表永远无法以纳秒为单位测量持续时间......

1% 的变化一点也不奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T08:55:16.557

是否有任何原因会导致性能不同，例如外部组件？

1% 的变化在性能上不会超过 1000 次运行，尤其是当它依赖于任何外部的东西时，例如与数据库或服务的连接。

秒表是测量时间最准确的方法，所以我不会担心

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-21T06:15:53.747

1.  在开始测量之前运行预热代码至少 10 秒。有必要确保 CPU 以最大速度运行。

2.  测量*最低*运行时间，而不是平均值。

通过这两项改进，我获得了非常稳定的测量结果。

# locking - 悲观锁定最坏情况

> ID：15542953
> 
> 赞同：1
> 
> 时间：2013-03-21T08:52:19.483
> 
> 标签：locking, pessimistic-locking

我们正在使用 Java EE。并且正在做一个应用程序，在最坏的情况下，大量的消息队列消息将来自同一个用户。

因此，我们正在寻找悲观的、SELECT FOR UPDATE 风格的锁定。这在理论上和第一次测试解决了我们的问题。

但我们害怕僵局。不是经典的：用户 X 锁定 A，用户 Y 锁定 B。但更多的场景如：系统崩溃，网络问题，......等等。数据库系统锁定，原因不明。我们将使用现代数据库，例如：oracle、MS SQL 和 postgresql。

我们想知道的是生产中使用的悲观锁定以及期望的实际问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:24:55.913

我见过的悲观锁定最严重的问题是数据库不可避免的瓶颈。

换句话说，只要您的代码在应用程序级别防止死锁（正如您在帖子中所说），性能就会成为问题 - 吞吐量下降，因为一次只有一个用户可以对给定的数据集执行更新。

如果发生系统异常以`select for update`执行但未提交，则锁定表可能保持锁定状态，但总的来说这并不常见（尽管这显然取决于您的代码）。我没有看到这种情况是通过与基础设施相关的问题发生的，只是通过应用程序错误。

如果可能，您可以通过批量更新来缓解吞吐量问题，但这实际上取决于您的特定情况。

# python - Python 正则表达式在模式中出现零次或多次

> ID：15542956
> 
> 赞同：2
> 
> 时间：2013-03-21T08:52:32.250
> 
> 标签：python, regex

我有一个有效的正则表达式，它给了我想要的结果，但它不包含它需要的安全性。（万无一失）

假设我有一个匹配路径部分的正则表达式，类似于：

```
import re
path = "C:/Projects/foo/dev/model/props/furniture/couch/data/fbx"
regex = re.compile("(.+)/dev/model/(.+)/(.+)/data/fbx")
m = regex.search(path)
if m:
    print m.groups()

# ('C:/Projects/foo', 'props/furniture', 'couch') 
```

我希望能够用匹配一个或多个文件夹的东西替换*匹配任何字符，直到正则表达式的以下部分。*

假设我们为简单起见将文件夹定义为以斜杠结尾的单词字符（无或更多），它将是：

```
[\w]*/ 
```

我想将其中的零到十个分组，我该怎么做？

在我的脑海中，我有类似的东西（请注意，这不起作用！）：

```
# match any number of word characters ending with a slash zero to ten times
([[\w]*/]{0,10})

# match any number of word characters ending with a slash zero to one time
([[\w]*/]?) 
```

编辑：

根据 RedBaron 和 jamylak 的回答，我得出以下结论：

```
((?:[:\w]+/){0,3}) 
```

这会将零到三个以斜杠“/”结尾的 [:\w] 字符分组。使用 ?: 在组的开头，它不会被发送回匹配的分组。因此，组合它们的外部组是。因此，我们只能得到完全分组的结果。

唯一的问题是我希望最后一部分也可能匹配一个文件。（所以不以斜杠结尾。）我什至更喜欢在没有正则表达式的斜杠的情况下将其取回，但我也可以轻松地去除结果末尾的斜杠。

非常感谢任何反馈。如果这是要走的路，我会将其添加为答案。

编辑：

它与：[根据预定义的文件夹结构查找文件夹](https://stackoverflow.com/questions/15531977/finding-folders-back-based-on-a-predefined-folder-structure)

**更新/编辑：**

根据迄今为止给出的所有答案，我提出了各种尝试，但最终它们都非常缓慢。

```
import re
path = "C:/Projects/foo/dev/model/props/furniture/couch/data/fbx"
regex = re.compile(r"""((?:^(?:[\w:]+/?)+)|(?:(?<=/)(?:[\w]+/?)+))/dev/model/""")
print 'search start'
m = regex.search(path)
print 'search done'
if m:
    print 'match', m, m.groups()
else:
    print 'no match' 
```

我不完全确定如何加快速度！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T08:57:28.057

您的`[]`正则表达式中的 不会对正则表达式进行分组。它用于指定字符类。

也许这会奏效-

```
\w*/{0,10} 
```

对于分组，只需使用`()`

```
(\w*/){0,10} 
```

**编辑**

根据您编辑的问题，我认为您想要的是目录名称匹配 0-3 次，然后文件名也匹配。

假设文件名中只有字母（以及可选的最多三个字符扩展名）

```
^((?:[:\w]+/){0,3})(\w+(?:\.\w{1,3})?)?$ 
```

这个很大但是可以分成两部分

这是你已经拥有的

```
((?:[:\w]+/){0,3}) 
```

还有我添加的

```
(\w+(?:\.\w{1,3})?)? 
```

这是末尾的可选文件名。（如果它不是可选的，您可以删除最后一个`?`）。文件名本身可以仅由字母组成，也可以具有最多 3 个字符的扩展名

添加`^`并将`$`停止虚假匹配

```
>>> pat=re.compile('^((?:[:\w]+/){0,3})(\w+(?:\.\w{1,3})?)?$')
>>> my_str='fwefw/wfwf/wefwf/dde.cdf'
>>> pat.search(my_str).groups()
('fwefw/wfwf/wefwf/', 'dde.cdf')
>>> my_str='fwefw/dde.cdf'
>>> pat.search(my_str).groups()
('fwefw/', 'dde.cdf') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T21:12:09.987

[取而代之的是，由于灾难性的回溯](http://www.regular-expressions.info/catastrophic.html)，这确实非常缓慢，

```
((?:^(?:[\w:]+/?)+)|(?:(?<=/)(?:[\w]+/?)+))/dev/model/ 
```

试试这个

```
(^[\w:]+(?:/\w+)*|(?<=/)\w+(?:/\w+)*)/dev/model/ 
```

或这个

```
(^[\w:]+[\w/]*|(?<=/)[\w/]+)/dev/model/ 
```

* * *

您可能需要考虑一种方法，首先使用`re.match`和模式验证字符串，例如`(\w:)?(/\w+)+$`

然后，当您已经可以预期某种结构时，您可以使用更简单的正则表达式来提取数据：

```
/?([^/]*(?:/[^/]+)*)/dev/model/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-21T08:57:43.267

你不能像在这儿那样`[]`放进去。相反，您想使用括号进行分组。`[]``([[\w]*/]{0,10})`

试试这个：

```
>>> re.match(r'(\w*/){0,10}', 'abc/def/ghi/').group()
'abc/def/ghi/' 
```

# windows - 在 Windows 上安装 mod_perl 时遇到一些问题

> ID：15542961
> 
> 赞同：0
> 
> 时间：2013-03-21T08:52:41.697
> 
> 标签：windows, perl, apache, xampp, mod-perl

我想在 Xampp for Windows 的 Apache 网络服务器上运行 Perl，但是当我想从这里的文档安装 Perl 时：http: [//perl.apache.org/docs/2.0/os/win32/install.html](http://perl.apache.org/docs/2.0/os/win32/install.html)，有1行我不太明白：

```
C:\modperl_src> perl Makefile.PL MP_AP_PREFIX=\Path\to\Apache2 
```

Apache 和 makefile.pl 的路径是什么意思？它是 Apache 文件夹的路径还是其他东西？我知道这可能看起来是一个非常愚蠢的问题，但这是我第一次必须这样做，所以我想做好。
提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T08:55:57.433

是的，它是 Apache 2 的路径。Makefile 用于在 *NIX 中“制作”。

# android - 使用 stopself() 停止服务

> ID：15542964
> 
> 赞同：0
> 
> 时间：2013-03-21T08:52:58.660
> 
> 标签：android, android-service

我编写了一个服务，它监听一些回调并获取 VCard，然后将其传递给 VCardService（这个类是在 android 联系人应用程序中定义的，我正在使用它）。现在我想在 VCardService 停止时停止此服务。我知道我们可以检查服务是否仍在运行。但我想要的是调用服务应该只在服务完成时知道。不然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:34:17.630

我不确定你到底想要什么，但如果你想在任务完成后自行停止服务，这里是解决方案：

假设你有一个扩展服务的类

```
public  class MyPersonalService extends Service {
            @Override
            public void onCreate() {
                // suppose you are downloading some file, so when you finished downloading your file, just call self stop like this:

                this.stopSelf();
            } 
```

调用 stopSelf() 方法将停止服务，您不必自己停止它，您只需要知道从何处以及何时调用 stopSelf() 方法即可。

# java - 列表或集合：在接口中使用哪一个？

> ID：15542967
> 
> 赞同：3
> 
> 时间：2013-03-21T08:53:00.683
> 
> 标签：java

假设我想要松散耦合的接口，我经常避免在方法签名中使用 List 实现（如 ArrayList），而更喜欢使用 List 接口。但是由于 Collection 是一个更通用的接口，你认为我应该更喜欢使用 Collection 而不是 List 吗？

**编辑**：我知道列表和集合之间的区别。我不关心订单或任何特定于列表的功能。这个问题是关于返回值和方法参数的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:55:18.043

从 List 的文档（它扩展了 Collection）：

> 有序集合（也称为序列）。此界面的用户可以精确控制每个元素在列表中的插入位置。用户可以通过整数索引（列表中的位置）访问元素，并在列表中搜索元素。

简而言之： List 保留其元素的顺序（插入顺序或您选择强加的任何其他顺序）。

因此，如果您关心这些事情中的任何一个，请使用 List。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-21T09:21:11.343

一个好的 API 应该提供所有需要的东西，而不会暴露不必要的实现细节。

我发现自己最常使用 List 或 Set。尝试用 Collection 替换 List 或 Set 有时会使 API 难以使用，而没有真正提供任何额外的解耦或抽象。

我尽量避免在方法签名中使用 Maps，因为我认为这是输入/输出过于复杂的迹象。这可以通过为该数据创建一个特定的包装类或通过更改方法的位置以便它可以直接访问数据来解决（例如，将其放入您传递给该方法的类中）。

不要忘记您的面向对象设计是为了让那些维护和调用您的代码的人的生活更轻松，而不是为了达到完美的圣杯。通常有几种合理的方法可以对问题进行建模，您选择哪一种取决于您自己的风格以及您正在处理的代码库的预期未来复杂性/用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-21T09:00:27.243

我只去`List`，`Set`或`Map`。这给调用者一些指示，他们可以期望得到什么，而不是太具体。

我认为将该指示作为方法签名的一部分很重要。它可以改变他们计划使用结果的方式。

例如。`Collection`不保证唯一的条目`Set`。返回`List`意味着结果将被排序，等等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-21T08:55:39.043

这取决于你打算做什么。

如果顺序不重要，`Collection`可以说得过去`List`。

一般来说，正如您所建议的，在方法参数中使用*高级*接口通常是一种很好的做法，这样调用代码确实需要进行任何转换以满足方法要求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-21T08:56:43.210

这取决于。该`Collection`接口具有与`List`. 当您迭代 a 的元素时，`Collection`您不会期望元素以特定顺序返回。（确实对于某些集合类型，迭代顺序实际上是不可预测的。）

此外，您可以使用 API 执行许多使用`List`API 无法执行的操作`Collection`。例如在特定位置获取、插入或删除元素。

# javascript - 数据表空表错误

> ID：15542969
> 
> 赞同：2
> 
> 时间：2013-03-21T08:53:10.167
> 
> 标签：javascript, jquery, datatables

我有一段代码在其中使用数据表插件。

表结构如下所示：

```
<thead>
    <tr>
        <th>col1</th>
        <th>col2</th>
        <th>col3</th>
        <th>col4</th>
        <th>col5</th>
        <th>col6</th>
        <th>col7</th>
        <th>col8</th>
    </tr>
</thead> 
```

但请注意，在初始化代码中，我隐藏了最后四列。

在我的代码中，我执行以下操作：

```
if($data->responseCode < 400)
{
    echo HTML Table
} 
```

这样可行

```
else
{
    echo '<tr><td colspan=4><h1 class="error">'.$data->errorMsg.'</h1></td></tr>';
} 
```

当我这样做时，我收到以下错误：

“DataTables 警告（表 id = 'DataTables_Table_0'）：从第 0 行的数据源请求未知参数 '1'”

这是数据代码：

```
var oTable = $('.table1').DataTable({
    "iDisplayLength": 100,
    "aaSortingFixed": [[0,'desc']],
    "aaSorting": [ [0,'asc'] ],
    "aoColumnDefs": [
          { "bVisible": false, "aTargets": [ 4,5,6,7 ] },
          { "bSearchable": false, "aTargets": [ 1,2,3,4,5,6,7] },
          { "bSearchable": true, "aTargets": [ 0 ] },
        ]
}); 
```

有人知道是什么原因造成的吗？我想也许是 colspan 但是当我删除它时，问题仍然存在。奇怪的是我在另一个页面上使用它，它似乎可以很好地处理一个空的结果集。

不知道这是否有帮助，但在玩了一点之后，我设法让以下错误出现在 firebug 中：

“类型错误：nTd 未定义”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-21T09:04:58.903

如果您经常使用数据表，那么这是您会遇到的常见错误。原因是您用于创建数据表的数据格式与表列不匹配，例如您有 4 列，而源数据只能提供 3 列。您可以发布数据格式和表结构，让我检查进一步的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-09-13T17:24:12.550

您可以用一个小逻辑来解决这个问题，检查空记录并为每个数据表动态设置表类。

```
<table class="table table-striped table-bordered <?php echo !empty($rows) ? 'data-table-display-class' : ''; ?>"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-15T14:33:12.630

这是因为 dataTable 检查标题和正文表中“列”的匹配总数

```
else
    {
        echo '<tr><td>'.$data->errorMsg.'</td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              </tr>';
    } 
```

它将显示为空行，并且在您的行的第一列中显示 errorMsg。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T08:56:28.070

您的`else`声明不包含`table`HTML 开始标记，也许这就是问题所在，您只回显了一行。尝试

```
else
{
    echo '<table id="table_id" class="table1"><tr><td colspan=4><h1 class="error">'.$data->errorMsg.'</h1></td></tr></table>';
} 
```

# javascript - Jquery.html 显示文字代码而不是在 application.js 中呈现 html

> ID：15542971
> 
> 赞同：1
> 
> 时间：2013-03-21T08:53:18.270
> 
> 标签：javascript, jquery, ruby-on-rails

我在我的 rails application.js 文件中实现了以下代码。当用户单击链接时，视图会重新加载完整的审阅者列表，而不是前 4 个：

```
$(document).ready(function(){
    $("#more_reviewers").click(function(e){
        $("#reviewer_list").html('<%= escape_javascript(render "restaurants/restaurant_reviewer_list", :venue => @restaurant, :limit => @restaurant.reviews.count) %>');
    });
}); 
```

问题：代码没有向我显示列表，而是将 Rails 代码作为文本返回。所以在我的屏幕上，我看到的不是用户列表，而是：

```
'<%= escape_javascript(render "restaurants/restaurant_reviewer_list", :venue => @restaurant, :limit => @restaurant.reviews.count) %>' 
```

这可能是一个简单的——我会很感激的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-21T08:57:45.077

Rails 是一种服务器端编程语言。Javascript是客户端。您不能动态地将 ruby​​ 代码放入您的网站客户端，因为它需要首先在服务器上运行。

您必须创建一个运行此行的 rails 脚本

```
<%= escape_javascript(render "restaurants/restaurant_reviewer_list", :venue => @restaurant, :limit => @restaurant.reviews.count) %> 
```

然后使用`load()`例如将其加载到您的元素中：

```
$(document).ready(function(){
    $("#more_reviewers").click(function(e){
        $("#reviewer_list").load('http://url.to/the/script/you/made');
    });
}); 
```

这样，服务器会收到对您的脚本的请求，它会运行脚本（服务器端）并将输出（html）传递到可以呈现它的 javascript（客户端）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T09:03:03.323

除了 Thomas 关于客户端和服务器端的解释，并假设您不必*向*服务器发出另一个请求：最简单的方法是将部分放在视图中的隐藏 div 中，然后使用 jQuery显示它。

显示.html.erb：

```
<div style="display:none;" id="hidden_div">
  <%= render "restaurants/restaurant_reviewer_list", :venue => @restaurant, :limit => @restaurant.reviews.count %>
</div> 
```

应用程序.js：

```
$(document).ready(function(){
  $("#more_reviewers").click(function(e){
    $("#hidden_div").show();
  });
}); 
```

# c# - 根据 c# 中 datagridview 中组合框的值从 SQL 服务器检索数据

> ID：15542972
> 
> 赞同：1
> 
> 时间：2013-03-21T08:53:29.053
> 
> 标签：c#, sql-server

我正在尝试根据 datagridview 中组合框的值从 SQL DB 的列中检索数据，我的代码是：

```
 private void dataGridView1_CellEndEdit(object sender, DataGridViewCellEventArgs 
 {
        using (SqlConnection conn = new SqlConnection("Data Source=POSSERVER\\SQLEXPRESS;Initial Catalog=ms;Integrated Security=True"))
        {
            string priceselected = ("SELECT price FROM Table_1 WHERE name=" + dataGridView1.CurrentRow.Cells[0].Value.ToString());
            SqlCommand cmd = new SqlCommand(priceselected, conn);
            conn.Open();
            cmd.ExecuteNonQuery();
            conn.Close();
        }
 } 
```

我想把价格放进去`dataGridView1.CurrentRow.Cells[2]`

但是每次我从组合框中选择项目时都会出现 sqlexception

有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T08:57:39.770

如果列的数据类型`Name`是 VARCHAR，则需要将值用单引号引起来，因为它是字符串文字。

```
string _val = dataGridView1.CurrentRow.Cells[0].Value.ToString();
string priceselected = ("SELECT price FROM Table_1 WHERE name='" + _val + "'"); 
```

但查询很容易受到`SQL Injection`. 请参数化查询，例如。

```
string _val = dataGridView1.CurrentRow.Cells[0].Value.ToString();
string priceselected = ("SELECT price FROM Table_1 WHERE name=@val");
SqlCommand cmd = new SqlCommand(priceselected, conn);
cmd.Parameters.AddWithValue("@val", _val);
conn.Open();
cmd.ExecuteNonQuery(); 
```

# javascript - 如何将自定义 Web 表单添加到 Joomla 网站

> ID：15542973
> 
> 赞同：0
> 
> 时间：2013-03-21T08:53:35.820
> 
> 标签：javascript, forms, validation, joomla

谁能告诉我这是否可能？我想通过 javascript 验证向我的 joomla 站点添加一个表单，数据不需要存储在数据库中，它需要发布到 Web 服务。

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:39:55.690

[这](http://extensions.joomla.org/extensions/contacts-and-feedback/forms)是各种此类扩展。希望，你会找到一个适合你的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:47:17.133

使用上面@Dmitry 的答案获取现成的组件或模块，您可以在其中获得此信息

或者，您可以使用 JFormField [http://docs.joomla.org/Form_field](http://docs.joomla.org/Form_field)和此处的组件教程自己编写组件：http: [//docs.joomla.org/Developing_a_Model-View-Controller_Component](http://docs.joomla.org/Developing_a_Model-View-Controller_Component)。如您在后端的示例组件教程中所见，Joomla 表单字段已内置验证（但是这在前端的工作方式相同）。

# windows-phone-7 - 如何使用特定的 URL 在 WP7 应用程序中打开网络浏览器？

> ID：15542975
> 
> 赞同：0
> 
> 时间：2013-03-21T08:53:53.567
> 
> 标签：windows-phone-7, browser

我正在开发一个应用程序，我只需要做两件事：

1)*使用推送通知。*

2)*在启动时**打开一个**特定的 URL 。***

我在我唯一的主页中编写了推送通知代码，如下所示：

```
namespace WindowsPush
{
    public partial class MainPage : PhoneApplicationPage
    {
        // Constructor
        public MainPage()
        {
            /// Holds the push channel that is created or found.
            HttpNotificationChannel pushChannel;

            // The name of our push channel.
            string channelName = "ToastSampleChannel";

            InitializeComponent();

            // Try to find the push channel.
            pushChannel = HttpNotificationChannel.Find(channelName);

            // If the channel was not found, then create a new connection to the push service.
            if (pushChannel == null)
            {
                pushChannel = new HttpNotificationChannel(channelName);

                // Register for all the events before attempting to open the channel.
                pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
                pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

                // Register for this notification only if you need to receive the notifications while your application is running.
                //pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

                pushChannel.Open();

                // Bind this new channel for toast events.
                pushChannel.BindToShellToast();

            }
            else
            {
                // The channel was already open, so just register for all the events.
                pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
                pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

                // Register for this notification only if you need to receive the notifications while your application is running.
                //pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

                // Display the URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
                System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
                // MessageBox.Show(String.Format("Channel Uri is {0}", pushChannel.ChannelUri.ToString()));

            }

        }

        void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
        {
            Dispatcher.BeginInvoke(() =>
            {
                // Display the new URI for testing purposes.   Normally, the URI would be passed back to your web service at this point.
                System.Diagnostics.Debug.WriteLine(e.ChannelUri.ToString());
                MessageBox.Show(String.Format("Channel Uri is {0}", e.ChannelUri.ToString()));
            });
        }

        void PushChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
        {
            // Error handling logic for your particular application would be here.
            Dispatcher.BeginInvoke(() =>
                MessageBox.Show(String.Format("A push notification {0} error occurred.  {1} ({2}) {3}", e.ErrorType, e.Message, e.ErrorCode, e.ErrorAdditionalData)));
        }

    }
} 
```

此代码位于 MainPage.xaml.cs 中。我如何在这里打开一个特定的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T09:19:48.647

要在 Windows Phone 中打开[URL](http://en.wikipedia.org/wiki/Uniform_resource_locator)，有两种方法。

*   使用[WebBrowserTask](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394020%28v=vs.105%29.aspx)*   使用[WebBrowser 控件](http://code.msdn.microsoft.com/wpapps/Mini-browser-Sample-b5587d2b)

    根据您的要求，您可以采用上述任何一种方法来显示[URL](http://en.wikipedia.org/wiki/Uniform_resource_locator)的内容。

# parsing - LL(1) 语法。如果有自递归规则，如何计算跟随集？

> ID：15542979
> 
> 赞同：3
> 
> 时间：2013-03-21T08:54:04.973
> 
> 标签：parsing, grammar, context-free-grammar, compiler-construction

根据[本文](http://www.cs.virginia.edu/~cs415/reading/FirstFollowLL.pdf)的规则：

> 1.  如果 A 是开始非终结符，则将 EOF 放入 FOLLOW(A)
>     找到右侧带有 A 的产生式：
> 2.  对于每个产生式 X → αAβ，将 FIRST(β) − {EPSILON } 放入 FOLLOW(A)
> 3.  如果 EPSILON 在 FIRST(β) 中，则将 FOLLOW(X) 放入 FOLLOW(A)
> 4.  对于每个产生式 X → αA，将 FOLLOW(X) 放入 FOLLOW(A)

我的语法中有下一段：

```
 ...
    A -> C B
    B -> , A
    C -> EPSILON
    C -> =
    B -> ;
 ... 
```

当我尝试根据规则 4 计算 FOLLOW(B) 时，我必须计算 FOLLOW(A)，反之亦然。所以我有 StackOverflowException 因为自递归。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T23:02:50.957

你不使用递归。您进行迭代，`FOLLOW`根据上一次迭代计算的结果计算集合：

1.  如果 A 是开始非终结符，则将*EOF*（指示输入结束的新终结符）放入 F[0](A)。

2.  对于每个产生式 X → αAβ，将 FIRST(β) − {EPSILON} 放入 F[n](A)，

3.  如果 EPSILON 在 FIRST(β) 中，则将 F[n-1](X) 放入 F[n](A)

4.  对于每个产生式 X → αA，将 F[n-1](X) 放入 F[n](A)。

5.  当 F[n](*) == F[n-1](*) 时停止

跟随(*) == F[n](*)

# node.js - 带有 $unset/$pull 的 Mongodb update() 不执行 $pull

> ID：15542982
> 
> 赞同：0
> 
> 时间：2013-03-21T08:54:20.907
> 
> 标签：node.js, mongodb, mongoose

我正在尝试从 MongoDB 文档中的数组中删除一些项目：

```
doc1
  items
    item
       id=1
    item
       id=2
    item
       id=3
doc2
  items
    item
      id=4
    item
      id=5
    item
      id=6 
```

我用它来删除例如项目 id=5：

```
(...)
updateItems({'items.id': 5},    { $unset: { 'items.$': 1 }},    { $pull: {'items'    : null} });
(...)
function updateItems(objmatch, objunset, objpull){  
coremodels.getProfileTable(req).update(
    objmatch, 
    objunset,
    {multi: true}, function(err) {
        coremodels.getProfileTable(req).update(
                        objmatch, 
                        objpull,
                        {multi: true}, function(err) {
        console.log('COMPLETED');
});
(...) 
```

$unset 工作正常，但 $pull 似乎没有工作。此操作的最终结果是一个空（Null）项 5。

任何想法为什么 $pull 不删除空文档？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T11:18:45.627

您的`updateArray`函数需要两个参数，但您要传递三个参数。我认为您根本没有发送`{ $pull: {'items' : null} }`给司机。

**添加：**

一旦您取消第 5 项，您的匹配文档将不再匹配任何内容。第二次更新时，尝试用 替换`objmatch`，`{ }`这应该只是删除任何空值。

# erlang - 返回erlang中的最后两条记录

> ID：15542986
> 
> 赞同：-1
> 
> 时间：2013-03-21T08:54:31.470
> 
> 标签：erlang, mnesia

我有这个记录：

```
-record(person, {id, firstname, lastname}). 
```

并且此表包含这种值：

```
1  anis    hila
2  samir   alagi
3  marwen  fares
4  sana    gabsi
5  safa    sassi 
```

我想开发一个返回表人的最后两条记录的函数

意思是只返回：

```
4  sana    gabsi
5  safa    sassi 
```

我有一个返回最后一个 id 的代码

```
Key=mnesia:last(person). 
```

有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:05:35.287

要在事务中执行某些操作，您只需要定义一个执行您想要的操作的函数，并将此函数作为 mnesia 事务的参数传递。

获取最后 N 人的函数：

```
getlast(N) ->
    % get list of the last N Keys in reverse order
    Keys = lists:foldl(fun(_Num,Acc) -> [mnesia:prev(person,hd(Acc))|Acc] end, [mnesia:last(person)],lists:seq(2,N)),
    % get the list of the last N records in correct order and return
    lists:foldl(fun(Key,Acc) -> [mnesia:read(person,Key)|Acc] end, [],Keys). 
```

获取最后 2 个元素的交易

```
Trans = fun() -> ?MODULE:getlast(2),
Result = mnesia:transaction(Trans). 
```

*注意：我没有测试此代码，因此它可能包含一些错误。我今晚会检查一下。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T08:58:02.463

这个怎么样：

```
LastKey = mnesia:last(person)
SecondLastKey = mnesia:prev(person, LastKey) 
```

# c# - 无法使用泛型列表填充 datagridview

> ID：15542987
> 
> 赞同：3
> 
> 时间：2013-03-21T08:54:32.423
> 
> 标签：c#, list, generics, dataset

我不明白以下简单代码有什么问题。它所做的只是获取一个列表并将其显示在 datagridview 中。这是我得到的错误：

> *错误 1 ​​可访问性不一致：返回类型“System.Collections.Generic.List”比方法“WindowsFormsApplication10.Form1.FillGridView()”更难访问*

另外，有没有办法将您的列表、数组列表等转换为数据集类型？

```
public partial class Form1 : Form
    {
    public Form1 ()
    {
        InitializeComponent ();
    }

    public List<Student> FillGridView ()
    {
        List<Student> l = new List<Student> ();
        l.Add (new Student { Fname="bloke", Lname="lll", Contact=293489485});
        l.Add (new Student { Fname = "dog", Lname = "assdf", Contact = 35345 });
        l.Add (new Student { Fname = "mary", Lname = "sdff", Contact = 6456 });
        l.Add (new Student { Fname = "john", Lname = "sdfsdf", Contact = 45656 });
        return l;

    }

    private void Form1_Load ( object sender, EventArgs e )
    {
        dataGridView1.DataSource = this.FillGridView ();
    }

    private void button1_Click ( object sender, EventArgs e )
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T09:02:10.810

你的方法需要公开吗？看起来您的学生课程不是公开的，因此将其列表返回给任何公开呼叫者都是不一致的。看起来，您的方法可以是私有的。

```
private List<Student> FillGridView() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:12:49.013

您的`Student`类访问修饰符可能是`non-public`.

`public`对于 .类型的方法没有意义`non-public`。*该方法如何对外部程序集起作用？*

您可以将`FillGridView`访问修饰符更改为`private`

```
private List<Student> FillGridView () 
```

阅读更多信息[`Access Modifiers`](http://msdn.microsoft.com/en-us/library/ms173121.aspx)

从[`C# Language Specification`](http://msdn.microsoft.com/en-us/library/ms228593.aspx)

> **10.3.6 成分类型**
> 
> 在成员声明中使用的类型称为该成员的组成类型。可能的组成类型是常量、字段、属性、事件或索引器的类型，方法或运算符的返回类型，以及方法、索引器、运算符或实例构造函数的参数类型。成员的组成类型必须至少与该成员本身一样可访问（第 3.5.4 节）。

# java - 我怎样才能使代码块通用？

> ID：15542989
> 
> 赞同：3
> 
> 时间：2013-03-21T08:54:40.650
> 
> 标签：java, xstream

```
public Item marshallItem(String xml) {
    // TODO Auto-generated method stub
    XStream xstream = new XStream();

    xstream.alias("Item", Item.class);

    return (Item) xstream.fromXML(xml);
} 
```

第 3 行：

"Item" 和 Item.class 是硬编码的值。

如果我必须编组 Order xml，那么我必须编写一个新方法或 if-else 条件来实现。

我怎样才能使这个方法更通用，以便我可以将此方法用于多个类..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T08:59:12.293

这样的事情会做的事情：

```
public <T> T marshallItem(String xml, Class<T> clazz) {
    XStream xstream = new XStream();
    xstream.alias(clazz.getSimpleName(), clazz);
    return (T) xstream.fromXML(xml);
} 
```

调用此方法：

```
Item info = marshallItem("yourXml", Item.class); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:03:07.230

这会做到：

```
public <T> T marshall(String xml, Class<T> type) {
    XStream xstream = new XStream();
    xstream.alias(type.getSimpleName(), type);
    return (T) xstream.fromXML(xml);
} 
```

我希望它有帮助！

# java - Spring 的用户会话管理（业务和事务管理）

> ID：15542996
> 
> 赞同：2
> 
> 时间：2013-03-21T08:55:05.617
> 
> 标签：java, spring, struts2

在我的应用程序中

Web 前端使用`Struts`和`Spring`用于业务和事务管理。

现在，我在业务逻辑端（bean）实现日志记录。

日志应该这样发生，服务中的每个方法都应该有登录的用户详细信息

一种方法是将用户对象发送到服务中的每个方法，当它被从 Servlet 调用时

但这真的很脏。

spring/struts2-spring 是否支持任何其他方式来做到这一点。？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:28:33.043

您应该使用[Spring AOP](http://www.mkyong.com/spring3/spring-aop-aspectj-annotation-example/)进行日志记录。这将使代码更清晰，您无需依赖开发人员在每个地方进行日志记录。
要打印用户详细信息，请使用SLF4J 的[MDC](http://www.slf4j.org/api/org/slf4j/MDC.html)功能。它就像一个 ThreadLocal 哈希图，您可以从任何地方访问它。所以你的入口方法可以把userdetails放到MDC中，可以在你的log方法中访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T01:10:32.990

使用[Spring AOP](http://static.springsource.org/spring/docs/2.5.5/reference/aop.html)为你做日志（附带一个日志框架），Struts2 与 Spring AOP 无关。Spring AOP 可以独立工作，无论它是 Web 应用程序还是具有 Minimal Setup 的 Swing 应用程序。

# asp.net - ASPX 密码文本框

> ID：15542999
> 
> 赞同：0
> 
> 时间：2013-03-21T08:55:11.737
> 
> 标签：asp.net, .net, textbox, passwords

默认情况下，密码字段框将用户键入的所有文本屏蔽为******。

我希望能够在密码字段框中显示一个字符串。

因此，在加载密码控件时，最初应该显示“请输入您的密码”。

目前 aspx 显示为***** ** *** *****

我怎样才能最好地做到这一点？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T09:00:52.170

使用文本模式。

```
<asp:TextBox ID="Password" runat="server" TextMode="Please enter your Password"  
onclick="this.value=''; this.type='password'; ">Password                                                    
</asp:TextBox> 
```

或者

使用占位符。

对于 EX：

```
<input type="password" placeholder="Please enter your Password"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:07:00.387

您可以使用 jquery 来实现它：

**HTML：**

```
<input id="password" value="password" class="password-input" /> 
```

**JS：**

```
$('.password-input').bind('click', function() {
    if ($(this).val() === "Please enter your Password")
    {
       this.type = "password";
       $(this).val(''); 
    }
});

$('.password-input').bind('blur', function() {
    if ($(this).val() === "")
    {
       this.type = "text";
       $(this).val('Please enter your Password');
    }
}); 
```

**JSFIDDLE：**

**[http://jsfiddle.net/V2Dh5/3/](http://jsfiddle.net/V2Dh5/3/)**

*您还可以查看以前关于同一件事的 SO 问题：*

**[设置密码输入的默认值，以便读取](https://stackoverflow.com/questions/4797166/set-default-value-of-a-password-input-so-it-can-be-read)**

**[在 IE 8 中设置密码输入/场景/问题的默认值](https://stackoverflow.com/questions/7938885/set-default-value-of-a-password-input-a-scenario-issue-in-ie-8)**

**[asp.net 文本框的默认值 -> TextMode = 密码](https://stackoverflow.com/questions/7977305/default-value-for-asp-net-textbox-textmode-password)**