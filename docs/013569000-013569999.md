# StackOverflow 问答 13569000-13569999

# meteor - 是否可以将流星应用程序开发为现有页面上的嵌入式组件？

> ID：13569007
> 
> 赞同：3
> 
> 时间：2012-11-26T16:29:56.633
> 
> 标签：meteor

当然，这可以使用 iframe 来完成，但我正在寻找一种解决方案，在加载时将应用程序注入到 dom 中，使用页面上已经可用的所有样式表和脚本。

这对于需要具有相当困难要求的组件（如实时推送更新）的网站很有用，这些组件在使用流星时开箱即用。

我不想在 iframe 中嵌入流星应用程序，因为需要在主页上复制脚本的样式表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T13:00:49.393

因为 Meteor 是一个全栈应用程序框架，所以这是不可能的。Meteor 不像一个典型的客户端 JavaScript 框架，您可以将它挂接到其他平台，它本身就是一个平台。所以我会问：你想做什么，为什么你认为在页面中插入 Meteor 会帮助解决你的问题？

# php - SQL 查询错误

> ID：13569011
> 
> 赞同：3
> 
> 时间：2012-11-26T16:30:11.197
> 
> 标签：php, mysql

> **可能重复：**
> [如何从 MySQL 中的多个表中删除？](https://stackoverflow.com/questions/3331992/how-to-delete-from-multiple-tables-in-mysql)

我有一个 SQL 查询如下

```
$deletebills=mysql_query("delete from bills,billsitems,cashier_trans where bills.bills_ID=billsitems.billsItems_BillItemSerial and bills.bills_ID=cashier_trans.cashier_trans_DocId and bills.bills_ID='".$_REQUEST['bills_ID']."'"); 
```

错误 ：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“其中 bills.bills_ID=billsitems.billsItems_BillItemSerial 和 bills.bills_ID=cas”附近使用正确的语法

我该如何解决。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:33:27.473

您不能一次从所有表中删除。您必须从每个表中删除。[MySql 删除](http://dev.mysql.com/doc/refman/5.0/en/delete.html)

# sql - 在 Sybase 数据库中执行脚本时出现语法错误

> ID：13569016
> 
> 赞同：0
> 
> 时间：2012-11-26T16:30:30.663
> 
> 标签：sql, sqlanywhere

我使用 SQL Anywhere 和 Sybase Central创建了一个**Sybase**数据库**emp_details 。**我在创建时将 emp/emp 作为 dba 用户名/密码。

创建了数据库，并在给定文件夹中生成了文件。

当我尝试使用 Ineractive SQL 运行以下脚本时：

```
use master
go

if exists (select 1 from master..sysdatabases where name='emp_details')
    checkpoint emp_details
go 
```

它引发了以下异常

```
Could not execute statement.
Syntax error near 'checkpoint' on line 2
SQLCODE=-131, ODBC 3 State="42000"
Line 4, column 1 
```

一直无法弄清楚语法问题到底是什么，并且已经坚持了一段时间。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:36:33.067

首先，您可能需要考虑将您的 SQL Anywhere 问题发布到[http://sqlanywhere-forum.sap.com/](http://sqlanywhere-forum.sap.com/)论坛。这是一个专门讨论 SQL Anywhere 产品线的论坛。

这两个句点一起可能会导致您的语法问题吗？

通常你不会得到错误来自的确切区域。看看是否有帮助。也请查看其他论坛。

# php - 在 Codeigniter/php 中转义 xml 字符

> ID：13569019
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:30:35.837
> 
> 标签：php, mysql, xml, codeigniter

我正在尝试使用 codeigniter & php 将我的 xml 文件中的数据保存到 mysql 数据库中。但是我找不到一种方法来转义特殊的 xml 字符以将我的数据从 xml 文件保存到我的表 cache_table 中。

```
 Code:

 $xml_source = str_replace(array("&amp;", "&"), array("&", "&amp;"),file_get_contents('XML/customer.xml'));

$xml = simplexml_load_string($xml_source);  
foreach($xml as $row )
{
 $attr = $row->attributes();

$results[] = array('CustomerAccountNumber' => $this->db->escape_str($attr->CustomerAccountNumber),'Desciption' => $this->db->escape_str($attr->Desciption) ):

$this->db->insert_batch('cache_cust',$results); 
```

但我收到此错误：

**错误：**

> simplexml_load_string()：实体：第 37 行：解析器错误：属性值中不允许未转义的“<”。

**客户.xml**

```
<?xml version="1.0" standalone="yes"?>
<Rows>
<Row CustomerAccountNumber="12" Name="Arj" Desciption="PJ psm" />  
<Row CustomerAccountNumber="1" Name="Aj" Desciption="*/Artic" />
<Row CustomerAccountNumber="2" Name="smla" Desciption="& light" />
<Row CustomerAccountNumber="3" Name="alik" Desciption="*/Artic" />
<Row CustomerAccountNumber="4" Name="wqla" Desciption="" />
<Row CustomerAccountNumber="5" Name="walij" Desciption="16-17" />
<Row CustomerAccountNumber="6" Name="li" Desciption="sales@llil.com" />
</Rows> 
```

如何避免此错误并避免特殊的 xml 字符，以便我的代码将 xml 文件中的所有记录保存到数据库中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:19:10.770

您将需要查看要编码的 htmlentities 和 html_entity_decode 以恢复它们。使用 htmlentities 将让您不必担心单独替换每个特殊字符（如＆符号），它也会替换箭头。我相信 escape_str 会为您处理报价。

以下链接中的文档可以帮助您解决任何未解答的问题。

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

[http://www.php.net/manual/en/function.html-entity-decode.php](http://www.php.net/manual/en/function.html-entity-decode.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:04:59.263

错误说明了一切：

```
Unescaped '<' not allowed in attributes values. 
```

所以你的 XML 无效。它最初是如何被破坏的？大概是因为这个：

```
$xml_source = str_replace(array("&amp;", "&"), array("&", "&amp;"),file_get_contents('XML/customer.xml')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:14:03.173

ActiveRecord 将负责转义带有引号字符的字符串，即`'`, `"`。因此，您不必显式使用[mysql_real_escape_string() 之](http://php.net/manual/en/function.mysql-real-escape-string.php)类的东西。其他 XML 字符也可以，不必转义`<`，例如`>`.

此外，您（或其他人）在 XML 属性中拼写“描述”错误。

# security - Web 应用程序上的身份验证系统唯一用户

> ID：13569027
> 
> 赞同：0
> 
> 时间：2012-11-26T16:30:47.070
> 
> 标签：security

我正在寻找有关身份验证的信息，但我是新手，所以我不知道任何系统。

我的要求是：用户只能从一台计算机/移动设备/平板电脑进行身份验证。

我正在考虑一个 MAC 地址监控系统，当用户使用其他设备连接时，我可以看到这就像一个警报。

还有哪些其他方法？证书？

重复一遍，我对此很陌生。

PD：我的应用程序是使用 Symfony2 框架开发的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:00:05.853

所以首先MAC地址是一个网络本地地址，这意味着在它通过路由器/交换机之后MAC地址会发生变化，所以你不能对此进行中继。即使您想使用客户端软件查找接口 MAC 地址，也可以更改 MAC。

其次，证书为您提供某些属性，例如不可否认性（您可以计算用户执行的操作的数字签名，然后无法否认在您的应用程序中执行某些操作）。但是公钥基础设施真的很难管理！您需要您的证书颁发机构提供有效证书，您需要监控和更新证书吊销列表以拒绝将被盗/无效/伪造的证书视为有效和真实的。

如果它不是一个以安全为中心的应用程序，并且在您分析了您的选项之后，我建议您使用简单的表单身份验证（用户名/密码/验证码）。并编写会定期（即每秒）发送 AJAX 请求刷新用户状态的机制，因此您可以识别用户是否关闭了浏览器或打开了窗口。在您的身份验证过程中，您可以检查给定用户名的其他活动会话并拒绝登录或以其他方式行事。如果您需要有关身份验证的更多信息，我建议您查看[安全模式](http://www.securitypatterns.org/)

# asp.net-mvc - ASP.NET MVC 插件和 AppDomain

> ID：13569028
> 
> 赞同：1
> 
> 时间：2012-11-26T16:30:48.110
> 
> 标签：asp.net-mvc, plugins, appdomain

我需要开发一个或多个程序集被视为插件的 ASP.NET MVC 应用程序，这些程序集在初始化阶段由 ASP.NET 动态加载。

我已经做到了，一切都运行得很好我的问题是我是否应该将它们加载到他们自己的 AppDomain 中，并且在这种情况下做类似下面的例子有意义吗？

```
AppDomain domain = AppDomain.CreateDomain(asmName.Name, AppDomain.CurrentDomain.Evidence, domainSetup, trustedPermissionSet);

Assembly assembly = domain.Load(asmName); //Assembly.Load(asmName);

BuildManager.AddReferencedAssembly(assembly); 
```

我问的原因是我真的不知道 BuildManager 如何处理 ASP.NET 中的程序集，任何澄清，这种方法的优缺点都会很棒。

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T04:17:06.320

我在[ASP.NET MVC 论坛上](http://forums.asp.net/t/1862072.aspx/1?ASP%20NET%20MVC%20plugins%20and%20AppDomain)发布了这个问题，似乎我得到了我正在寻找的大部分信息。

# mapreduce - HBase 中的旧式 mapred API 不起作用

> ID：13569029
> 
> 赞同：1
> 
> 时间：2012-11-26T16:30:54.417
> 
> 标签：mapreduce, hbase

我有一个 MapReduce 作业，它将 HBase 表作为我的 reduce 作业的输出目标。我的 reducer 类实现了`TableMap`package 中的接口`org.apache.hadoop.hbase.mapred`，我使用package 中的类中的`initTableReduceJob()` 函数来配置我的工作。`TableMapReduceUtil``org.apache.hadoop.hbase.mapred`

但是当我运行我的工作时，我在减少阶段收到以下错误

```
java.lang.NullPointerException
at org.apache.hadoop.mapred.Task.getFsStatistics(Task.java:1099)
 at
org.apache.hadoop.mapred.ReduceTask$OldTrackingRecordWriter.<init>(ReduceTask.java:442)
at org.apache.hadoop.mapred.ReduceTask.runOldReducer(ReduceTask.java:490)
 at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:420)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
 at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:396)
 at
org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1093)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

我的 HBase 版本是 0.94.0，我的 Hadoop 版本是 1.0.1。

我在以下位置找到了与我的问题类似的帖子： [https ://forums.aws.amazon.com/thread.jspa?messageID=394846](https://forums.aws.amazon.com/thread.jspa?messageID=394846)

谁能给我一些暗示为什么会这样？我应该坚持使用`org.apache.hadoop.hbase.mapreduce`包裹吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-08T22:20:28.397

此错误表明您可能在没有 HDFS 的本地文件系统上运行 HBase。尝试安装或运行 Hadoop HDFS。org.apache.hadoop.mapred API 似乎需要 HDFS。

为方便起见，您可以尝试将两者都打包的[Cloudera 开发 VM 。](http://www.cloudera.com/content/support/en/downloads/download-components/download-products.html?productID=F6mO278Rvo)

# .net - .NET 4.0 应用程序未从 GAC 中提取 DLL

> ID：13569030
> 
> 赞同：1
> 
> 时间：2012-11-26T16:31:01.110
> 
> 标签：.net, gac

我有一个 v4.0 程序集，它既位于 GAC（4.0 位置）中供运行时使用，也位于磁盘上的某个位置供设计时使用。我在注册表中设置了设计时 DLL 的位置，以便我可以通过 Visual Studio 中的添加引用来添加它。

我也有一个使用这个 DLL 的服务。我通过添加引用添加了它，并且在引用它的类时可以毫无问题地编译。但是，当我运行我的服务时，它不会从 GAC 中提取 DLL，并且我收到一个错误，即服务在 GACked DLL 中找不到类。我可以将“本地复制”更改为 true，它会正常工作，但这违背了在 GAC 中拥有 DLL 的目的。

有关如何排除故障的任何建议？

* * *

我可以添加作为对新控制台应用程序的引用并访问该对象。不确定服务的问题是什么。

* * *

它可能找不到类型..但我可以从控制台应用程序引用类型（使用 GACked 程序集），所以我不确定为什么在运行服务时找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:49:10.047

您需要在 machine.config 中的 system.web 标记下添加程序集

```
<system.web>
    <compilation>
        <assemblies>
            <add assembly="YOUR_DLL_NAME, Version=1.1.0.0, Culture=neutral, PublicKeyToken=YOUR_KEY_TOKEN" />  
        </assemblies>
    </compilation>
</system.web> 
```

根据您的设置，可以找到配置文件：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\Config\machine.config 或 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config\机器配置

# java - java.lang.IllegalArgumentException 发生在 Applet

> ID：13569035
> 
> 赞同：0
> 
> 时间：2012-11-26T16:31:08.517
> 
> 标签：java, applet, illegalargumentexception

我有一堂课如下：

```
public class JSemcorProcessor {

IConcordanceSet semcor;
String[] directories = { "brown1", "brown2", "brownv" };

public JSemcorProcessor() throws MalformedURLException {
    // construct the URL to the Semcor directory
    String path = "./files/semcor3.0/";
    URL url = new URL("file", null, path);

    // construct the semcor object and open it
    semcor = new Semcor(url);
    semcor.open();
}

public static void main(String[] args) throws IOException, ParseException {

    JSemcorProcessor jsp = new JSemcorProcessor();
    SynsetGraph graph = jsp.startOne("br-a06");

}
.......
} 
```

当我调用 main() 时它运行良好。但现在我想在 Applet 中使用这个类：

```
public void init() {

    JSemcorProcessor jsp = null;
    SynsetGraph graph = null;
    try {
        jsp = new JSemcorProcessor();
        graph = jsp.startOne("br-a06");
    } catch (Exception e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    } 
........
} 
```

出现这样的异常：

```
java.lang.IllegalArgumentException
    at edu.mit.jsemcor.main.Semcor.<init>(Semcor.java:105)
    at edu.mit.jsemcor.main.Semcor.<init>(Semcor.java:90)
    at edu.mit.jsemcor.main.Semcor.<init>(Semcor.java:77)
    // semcor = new Semcor(url);
    at edu.njit.tagging.JSemcorProcessor.<init>(JSemcorProcessor.java:40)
    // jsp = new JSemcorProcessor();
    at org.jgrapht.demo.JGraphAdapterDemo.init(JGraphAdapterDemo.java:157)
    at sun.applet.AppletPanel.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

为什么在 main() 中工作的相同代码在 Applet 中不起作用？似乎 URL 对象在 Semcor 中调用了这个问题。

谢谢。

# c# - 在 C# 中将 ' 替换为 \'

> ID：13569036
> 
> 赞同：5
> 
> 时间：2012-11-26T16:31:20.453
> 
> 标签：c#

在这个变量中，我想在每个 '.

```
string html = 
    "<a href=\"annee-prochaine.html\">Calendrier de l'annee prochaine</a>"

html = html.Replace("'", "\'"); //No change
html = html.Replace("\'", "\'"); //No change

html = html.Replace("\'", "\\'");
//html => <a href=\"annee-prochaine.html\">Calendrier de l\\'annee prochaine</a>
html = html.Replace("\'", @"\'");
//html => <a href=\"annee-prochaine.html\">Calendrier de l\\'annee prochaine</a> 
```

我想在 Replace 之后得到它：

```
//html => <a href=\"annee-prochaine.html\">Calendrier de l\'annee prochaine</a> 
```

有任何想法吗 ？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T16:34:31.983

我强烈怀疑您正在查看调试器中的字符串，这就是您看到双反斜杠的原因。

这个版本绝对没问题：

```
html = html.Replace("\'", "\\'"); 
```

（使用逐字字符串文字也可以。）与其在调试器中查看它，不如记录它或只是提供它，一切都应该没问题。

您在双引号中也看到它的事实进一步证明了这一点。例如，这个字符串：

```
string html = "<a href=\"anne..."; 
```

... 不*包含*反斜杠，但您的诊断程序正在显示它，这是我在调试器中所期望的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T16:34:06.313

反斜杠字符是转义字符，因此您需要放置其中的 2 个，或者使用忽略转义的 @ 字符串修饰符。

```
html=html.Replace("'", "\\'"); // this should work
html=html.Replace("'", @"\'"); // or this 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:34:20.447

```
 string html = "<a href=\"annee-prochaine.html\">Calendrier de l'annee prochaine</a>"

 html = html.Replace("'",@"\'"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:34:48.840

试试这个：

```
html=html.Replace("'", @"\'"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T16:36:04.847

这些行中的任何一个：

```
html=html.Replace("\'", "\\'");
html=html.Replace("\'", @"\'"); 
```

应该做你想做的。也许调试器告诉你有双 \ 字符，但实际上只有一个。

编辑：对不起，实际上它应该`"'"`作为第一个参数。

# php - 提交和接收ajax表单

> ID：13569038
> 
> 赞同：0
> 
> 时间：2012-11-26T16:31:37.567
> 
> 标签：php, javascript, jquery, ajax, forms

我有一个 php 脚本，仅用于学习目的。我想在我的网络应用程序 ajax 表单上使用。从来没有做过，这是测试php脚本。所以我想通过 ajax 表单名称和密码发送，在 php 脚本中将检查其是否正确，它将返回成功（当登录名和密码正确时）或错误（当不匹配时）。我的问题是如何在 js 或 jQuery 中正确发送和接收它。任何可以帮助我的人可能有更好的想法和/或更好的安全功能吗？

我在stackoverflow上找到并尝试了这个脚本：

```
 //bind an event handler to the submit event for your login form
    $('#login_form').live('submit', function (e) {

        //cache the form element for use in this function
        var $this = $(this);

        //prevent the default submission of the form
        e.preventDefault();

        //run an AJAX post request to your server-side script, $this.serialize() is the data from your form being added to the request
        $.post($this.attr('action'), $this.serialize(), function (responseData) {

        //in here you can analyze the output from your server-side script (responseData) and validate the user's login without leaving the page
});
}); 
```

我想知道在 php 脚本中它是否可以这样工作？：

```
<?php
$username = $_GET["name"];
$password = $_GET["password"];

if($username="*****" && $password==********)
{
header('Location:http://*****************/jaz/imes/index.html?login="success"');
}else{
header('Location:http://*****************/jaz/imes/index.html?login="error"');
}
?> 
```

正如我所说，这只是一个测试脚本，只是为了了解更多信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:42:30.427

首先，如果您使用的是 jQuery 1.8+，请尝试使用 on() 方法另一件事是您应该在 PHP 脚本中为该用户设置会话，然后使用 js 重定向用户：

jQuery：

```
$('#login_form').on('submit', function(){
        $.post($this.attr('action'), $this.serialize(), function (responseData) {
            if(responseData == 'success'){
                window.location = "userpanel.php"
            }else{
                alert('NO MATCHES');
            }
        });
}); 
```

PHP：

```
<?php
$username = $_POST['username'];
$password = $_POST['password'];

// VALIDATING HERE, in db maybe?
if($username == 'blah' && $password == 'blah'){
    $_SESSION['username'] = $username;
    echo "success";
}else{
    echo "failed";  
}

?> 
```

在您的 HTML 表单中，您需要有 2 个 ID 为“用户名”和“密码”的输入，以便上述代码可以工作。

# magento - 属性选项/标签排序在站点视图级别定义？

> ID：13569039
> 
> 赞同：0
> 
> 时间：2012-11-26T16:31:40.157
> 
> 标签：magento

我使用 Magento 1.6.2。

有没有办法在站点视图级别而不是全局级别上设置属性选项标签的位置？
原因：这里是英语和德语的颜色值

黑色 / Schwarz
Clear / 透明
铜 / Kupfer
黄色 / Gelb

很明显，不同语言的排序是不同的。
覆盖位置值并对首页代码中的值进行排序是不可能的，因为有些选项的字母数字排序没有意义：
即小中大

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:28:47.890

是的，这是很有可能的。但这是一个相当深刻的变化，取决于你想用它来完成什么。这将使您开始：

您想首先向表中添加一个新列`eav/attribute_option_value`。这是为此的设置脚本：

```
$installer = $this;

$installer->startSetup();

$installer->run("
    ALTER TABLE `{$this->getTable('eav/attribute_option_value')}` ADD COLUMN `sort_order` INT UNSIGNED NULL DEFAULT 0;
");

$installer->endSetup(); 
```

接下来，您需要重写`Mage_Eav_Model_Mysql4_Entity_Attribute_Option_Collection`. 为商店过滤器执行连接时，您需要在此处添加您的 sort_order：

```
public function setStoreFilter($storeId=null, $useDefaultValue=true)
{
    if (is_null($storeId)) {
        $storeId = Mage::app()->getStore()->getId();
    }
    $sortBy = 'store_default_value';
    if ($useDefaultValue) {
        $this->getSelect()
            ->join(array('store_default_value'=>$this->_optionValueTable),
            'store_default_value.option_id=main_table.option_id',
            array('default_value'=>'value'))
            ->joinLeft(array('store_value'=>$this->_optionValueTable),
            'store_value.option_id=main_table.option_id AND '.$this->getConnection()->quoteInto('store_value.store_id=?', $storeId),
            array('store_value'=>'value',
                'value' => new Zend_Db_Expr('IF(store_value.value_id>0, store_value.value,store_default_value.value)',
                'sort_order'))) // ADDED
            ->where($this->getConnection()->quoteInto('store_default_value.store_id=?', 0));
    }
    else {
        $sortBy = 'store_value';
        $this->getSelect()
            ->joinLeft(array('store_value'=>$this->_optionValueTable),
            'store_value.option_id=main_table.option_id AND '.$this->getConnection()->quoteInto('store_value.store_id=?', $storeId),
            'value',
            'sort_order') // ADDED
            ->where($this->getConnection()->quoteInto('store_value.store_id=?', $storeId));
    }
    $this->setOrder("store_value.sort_order", 'ASC'); // CHANGED

    return $this;
} 
```

显示发生了什么：每个属性都有一个源模型。源模型负责在前端下拉类型列表（选择、多选）中提供值。如果源模型是`Mage_Eav_Model_Entity_Attribute_Source_Table`（如果属性类型是 select 或 multiselect，则默认情况下是），则此代码检索值：

```
$collection = Mage::getResourceModel('eav/entity_attribute_option_collection')
    ->setPositionOrder('asc')
    ->setAttributeFilter($this->getAttribute()->getId())
    ->setStoreFilter($this->getAttribute()->getStoreId())
    ->load(); 
```

如您所见，我们正在重写该`setStoreFilter()`函数。这是最后一个调用。您可能想`unshiftOrder('main_table.sort_order', 'ASC')`在重写函数的开头添加一个，只是为了很好地衡量 `main_table.sort_order 不会妨碍您。

我将留给您对管理面板进行必要的调整，以提供设置排序顺序矩阵的选项。

# session - spring concurrencyFilter 在不同操作系统的不同选项卡上表现不同

> ID：13569041
> 
> 赞同：1
> 
> 时间：2012-11-26T16:31:42.653
> 
> 标签：session, web-applications, spring-security

我在工作项目中使用 Spring Security 3.0.7。我们的应用程序站点可以通过来自不同站点的重定向来访问。我们使用并发过滤器和会话身份验证策略。

情况 1：如果您从 Firefox 中的 referer 访问该站点，然后您从另一个浏览器（例如 Chrome）中的不同 referer 访问我们的站点，您在 Firefox 中的会话被破坏，您可以在 Chrome 中正常工作。

情况 2：有趣的部分是：我的工作站是 Ubuntu，当我尝试从选项卡中的引用者访问，然后尝试从不同选项卡上的另一个引用者访问时，旧会话再次被丢弃，我必须登录等等. 此行为与上段相同。

情况 3：我从我的 Ubuntu 桌面再次尝试，并从不同选项卡中的相同引荐来源访问应用程序站点。这次我之前的会话 id 被覆盖了，因此流程混乱了。

情况 4：顺便说一下，在 Windows 系统上，如果我从同一浏览器的不同选项卡的不同引用者分别访问应用程序，我的会话就会混淆，会话只是被覆盖，并且在应用程序上执行的操作也会混淆。与情况 3 相同的行为。

我的意图是摆脱情况 4，并将安全系统配置为情况 2。我可以用 spring security 做到这一点吗？

# javascript - 仅在数据存在时显示 Google 图表

> ID：13569043
> 
> 赞同：0
> 
> 时间：2012-11-26T16:31:49.017
> 
> 标签：javascript, function, charts, call

我有一个使用 SQL 数据的谷歌折线图。但是，当查询返回 0 行时，它会在页面上显示一个大的空图表。我想改为显示一些文本，说明没有数据。我尝试将图表函数包装在另一个函数中，如果数据存在则调用该函数，但即使数据存在，也没有显示任何内容。这是我的一些代码：

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
function displayChart()
{
    $(document).ready(function()
    {
        google.setOnLoadCallback(drawChart);
    });
}
function drawChart() 
{
// Here we tell it to make an ajax call to pull the data from the .json file
    var jsonData = $.ajax({
    url: "Data.json",
    dataType:"json",
    async: false
}).responseText;

// Create our data table out of JSON data loaded from server.
var data = new google.visualization.DataTable(jsonData);

// Options for the graph, we set chartArea to get rid of extra whitespace
var options = {
                'width':1300,
                'height':500,
                'chartArea': {top:'10%', left:'5%', height:'75%', width:'85%'}
              };

// Instantiate and draw our chart, passing in some options and putting it in the chart_div.
var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
chart.draw(data,options); 
}
</script>
<?

...

if($got_data == true)
{
    displayChart();
}
else
    echo "There is no data"; 
```

关于我做错了什么的任何想法，或者更好的方法来实现这一点？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:59:16.577

正如 Serg 的评论所说，您需要设置是否在 ajax 调用的回调中显示图表。这是因为从您的 ajax 调用返回的数据在您调用`$.ajax()`. 如果您低头查看[JQuery AJAX 页面](http://api.jquery.com/jQuery.ajax/)，您将看到几个如何处理来自 ajax 调用的数据的示例，但您正在寻找的内容类似于以下内容：

```
$.ajax({
    url: "Data.json",
    dataType:"json",
    async: false
}).complete(function(data) {
    if (data) {
        // draw chart
    } else {
        // say no data
    }
); 
```

# python - Python Sockets 使用函数而不是全局套接字调用

> ID：13569044
> 
> 赞同：1
> 
> 时间：2012-11-26T16:31:53.667
> 
> 标签：python

您好我正在尝试将一些 C 代码移植到 python。几个月没用python了，感觉有点生疏了。

想知道我怎么能做到这一点。我需要能够在 createConnection 函数中使用 sock 对象的发送值，而无需使 sock 对象成为全局对象。

有任何想法吗？

*干杯

示例代码

```
def createConnection(host, port, tcpTimeout):
    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM, socket.IPPROTO_TCP)
    sock.connect((host, port))
    return sock

def useConnectionOne():
    sock = createConnection("<Some IP>", <Some Port>, 5)
    sock.send("Hello world")

def useConnectionTwo():
    sock = createConnection("<Some IP>", <Some Port>, 5)
    sock.send("Hello again world") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:15:46.853

您要么需要使套接字对象成为全局对象，以便它们可以重复使用，要么将它们附加到其他对象/容器以跟踪它们。你可以这样做：

```
Connections = {}
Connections['host1'] = createConnection("<Some IP>", <Some Port>, 5)
Connections['host2'] = createConnection("<Some Other IP>", <Some Port>, 5) 
```

然后你可以发送：

```
Connections['host1'].send("Hello World") 
```

但是，如果没有一些外部容器，您的套接字对象会离开作用域，并在创建它们的函数返回时被垃圾收集。

如果我以某种方式误解了您，并且您想要一个连接对象并且能够编写两个分别使用它的方法，请创建一个包含该连接的类：

```
class ConnManager(object):
  def __init__(self, host, port, timeout)
    self._conn = socket.socket(socket.AF_INET, socket.SOCK_STREAM, socket.IPPROTO_TCP)
    self._conn.connect((host, port))

  def sendOne(self, data):
    self._conn.send(data)

  def sendTwo(self, data):
    self._conn.send(data) 
```

希望这能给你一个可以构建的想法。

# pyrocms - 如何将 RSS 提要添加到 PyroCMS？

> ID：13569048
> 
> 赞同：3
> 
> 时间：2012-11-26T16:32:11.780
> 
> 标签：pyrocms

我正在尝试通过 PyroCMS（版本 2.1.4）向网站添加 RSS 提要。我希望它成为我们 PyroCMS 中所有博客文章的提要。

我不想显示来自其他站点的 RSS 项目。我想联合我们的项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:33:08.893

PyroCMS 在博客模块中有一个 RSS 提要，可以在这里找到。

> [http://www.yoursite.com/blog/rss](http://www.yoursite.com/blog/rss)

从这里：[http ://docs.pyrocms.com/2.1/manual/modules/blog#blog-rss-feed](http://docs.pyrocms.com/2.1/manual/modules/blog#blog-rss-feed)

# linux - xargs 的 $1 与 shell 脚本中的 $1 冲突

> ID：13569049
> 
> 赞同：1
> 
> 时间：2012-11-26T16:32:16.740
> 
> 标签：linux, shell, arguments, xargs

我在一个 shell 脚本文件 foo.sh 中有这些行：

```
ps ax | grep -E "bar" | grep -v "grep" | awk '{print $1}' | xargs kill -9 $1 
```

当我使用这样的参数执行 shell 脚本时：

```
sh foo.sh arg_one 
```

xargs 现在无法工作。它从 shell 脚本中获取 $1 而不是 awk 的输出。

我知道我可以将 awk 的输出存储到一个文件中，然后在 xargs 中使用它。

但是，有没有更好的解决方案？

==已编辑==

感谢@peterph 的回答。但是，有什么方法可以在 xargs 中使用 $1 吗？

== 已编辑 2 ==

谢谢@Brian Campbell

尽管天气不好，示例中应该有一个无用的 $1，如果给出“shell 脚本文件”的参数，那么 xargs 中的 $1 将无法在我的计算机中按我的意愿工作（我认为也在你的计算机中）。为什么？而且，如何避免呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:40:26.607

`xargs`从中读取列表，如果您想要通过它们的 PID 杀死进程，`stdin`只需丢弃最后一行。`$1`

作为旁注，`ps`还可以根据命令名称打印进程（在 linux 上使用 procps 查看`-C`选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:48:09.303

代替那个复杂的管道，你总是可以用它`killall -9 name`来杀死一个进程，或者`pkill -9 pattern`如果你不知道进程的确切名称但知道一个子字符串（但请注意不要杀死任何意外的进程）。

为了使您的命令正常工作，只需删除`$1`; `xargs`从标准输入中获取其参数，并运行命令行，在命令末尾传入它从标准输入中获得的值。

**编辑**（响应您的编辑）：您希望`xargs`如何处理该`$1`论点？你希望在里面有什么？唯一有意义的解释`$1`是传递给脚本的第一个参数。

`$1`来自您的脚本`awk`的内容是`awk`在其输入的第一列中找到的；然后它会打印出来，并`xargs`从标准输入中获取这些值，并在命令行末尾使用这些值调用您传递给它的命令。所以如果`awk`命令返回：

```
100
120
130 
```

然后管道`xargs kill -9`将导致调用以下内容：

```
kill -9 100 120 130 
```

您不需要像`$1`使这项工作一样的变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:43:07.563

这应该有效：

```
ps ax | grep -E "bar" | grep -v "grep" | awk '{print $1}' | xargs kill -9 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T12:06:49.530

你也可以试试：

```
result=$(ps -ef | grep -E "bar" | grep -v "grep" | awk '{print $2}')
kill -9 $result 
```

在我的情况下，即使存在匹配的进程，管道 xargs 有时也会返回以下错误：

```
usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ]
usage: kill [ -s signal | -p ] [ -a ] pid ...
       kill -l [ signal ] 
```

# c - 将一串十六进制数字转换为整数

> ID：13569051
> 
> 赞同：1
> 
> 时间：2012-11-26T16:32:17.847
> 
> 标签：c

我正在尝试实现 htoi(s) [Dennis Ritchie 第 2 章练习 2-3 Q]，它将十六进制数字字符串转换为其等效整数，任何人都可以帮助我解决这个程序的逻辑，我不需要代码，我只需要实现它的逻辑。我无法得到正确的逻辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:39:19.567

让我们退后一步：

您将如何实现一个接受单个十六进制数字并返回其十进制等效值的函数？

换句话说，你将如何编写这个函数：

```
unsigned int hextodec(char c)
{
    ... your code here
} 
```

提示：对于十进制数字，计算时会发生什么`c -'0'`？

一旦你有了这个函数，用它来计算更长的十六进制字符串的转换应该是相当容易的。

提示：0xF 是 15，0x10 是 16

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:33:58.427

使用`strtol`以 16 为底的函数。

关于这种方式：

```
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

int xstrtol16(const char *s)
{
    errno = 0;
    char *endp = NULL;
    int result = strtol(s, &endp, 16);

    if (*charp || errno) {
       fprintf(stderr, "Failed to convert...\n");
       exit(1);
    }

    return result;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:55:02.217

想想什么是可打印的数字（任何基数）。基本上是代表简单数值（0...base-1）的符号列表，以及它们数字位置的相关“权重”。对于十进制，符号为“0123456789”，权重为 1、10、100、1000...

您可以通过查找每个符号的相应数值，将其乘以该数字位置的权重，并将这些乘积相加，将可打印数字转换为“整数”。有一些技巧可以有效地做到这一点，但是直接的“愚蠢”实现可以完美地完成工作。

十六进制有点复杂，因为有两个符号 - 0-9 和 AF - 有时需要同时接受大写和小写字母。处理这个问题还有一些技巧，但是以直接的方式进行（将每个字符与每次运行的限制进行比较并确定它适合哪个）是非常好的（并且比其他方法更通用）。您甚至可以使用索引操作，您只需在“0123456789ABCDEF”中找到字符的索引 - 效率低但简单。

# android - 仅针对一项活动将屏幕锁定为横向

> ID：13569052
> 
> 赞同：0
> 
> 时间：2012-11-26T16:32:21.193
> 
> 标签：android, landscape, portrait

我环顾四周，发现如何通过编辑 Manifest 文件将我的整个应用程序锁定到 Landscape。然而，这不是我想要的。

我希望每个活动都被锁定为纵向，除了一个将被锁定为横向的活动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T16:34:13.213

在您的清单文件中，找到您的 Activity 声明并使用以下内容：

```
 <activity
        android:name=".ActivityName"
        android:label="@string/app_name"
        android:screenOrientation="landscape" >
    </activity> 
```

# xml - 为大学课程编写 XML 代码

> ID：13569058
> 
> 赞同：3
> 
> 时间：2012-11-26T16:32:48.457
> 
> 标签：xml, xslt

我已经搜索了互联网/并在此处发布帖子，以尝试找到我所遇到问题的答案。我正在学习 XML，并且有一个任务，我必须将以前的 .xml 转换为 .xslt。我已经得到了所有这些，但有一小部分代码找不到我输入的值。例如; 我知道可能有很多其他方法可以实现这一点，但这是我得到的代码。

.xml的一部分如下：

```
 <collection>
     <movie>
     <title>Braveheart</title>
     <genre v_genre="Action"/>
     <rating v_rating="R"/>
     <grading v_grading="4"/>
        <summary>William Wallace, a commoner, unites the 13th Century Scots in their battle to overthrow Englands rule </summary>
    <year>1995</year>
    <director>Mel Gibson</director>
    <runtime>177</runtime>
    <studio>Icon Entertainment International</studio>
    <actors>
        <actor ID="001">Mel Gibson</actor>
        <actor ID="002">Sophie Marceau</actor>
        <actor ID="003">Patrick McGoohan</actor>
    </actors>
</movie> 
```

现在为此我不明白它的价值。如果有人可以帮助我理解那部分，我将不胜感激。问题的第 2 部分将转到一个 .xslt 文档，所有内容都正确填充，但以下部门除外：流派、评级和分级。我尝试了多种不同的方法来尝试获取要填充的值。这是代码的一部分。

```
<xslt:for-each select="collection/movie">

 <tr>

 <td>

 <xslt:value-of select="title"/>

 </td>

 <td>

  <xslt:value-of select="genre"/>

 </td>

 <td>

<xslt:value-of select="rating/v_rating"/>

</td>

<td>

 <xslt:value-of select="grading/v_grading"/>

 </td>
 <td>
 <xslt:value-of select="summary"/>
 </td>               
 <td>
  <xslt:value-of select="year"/>
  </td>
   <td>
  <xslt:value-of select="director"/>
  </td>
  <td>
  <xslt:value-of select="runtime"/>
   </td>
   <td>
    <xslt:value-of select="studio"/>
   </td>
   <td>
  <xslt:value-of select="actors"/>
  </td>
  </tr>

 </xslt:for-each>

  </table>

 </body>

  </html>

  </xslt:template>
  </xslt:stylesheet> 
```

我试图真正理解为什么将来使用这种方式。整个大学的事情。希望这不会被删除。我已经搜索了很多地方来弄清楚这一点，但没有任何例子以这种方式列出。提前谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:55:40.683

您遇到问题的元素是这些

```
 <genre v_genre="Action"/>
 <rating v_rating="R"/>
 <grading v_grading="4"/> 
```

因此，如果您注意到，您想要的值保存在属性中，而不是子文本节点中。因此，您需要将您的**xsl:value-of**更改为此（在**流派的示例中**

```
<xsl:value-of select="genre/@v_genre"/> 
```

如果您热衷于学习 XSLT，可能值得知道使用**xsl:apply-templates**优于**xsl:for-each**。此外，您应该考虑删除代码中的重复。查看您的示例，表格单元格的输出顺序与 XML 中的子元素相同。因此，您可以创建一个通用模板来匹配大多数子元素以输出表格单元格。

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:template match="/collection">
      <table>
         <xsl:apply-templates select="movie"/>
      </table>
   </xsl:template>

   <xsl:template match="movie">
      <tr>
         <xsl:apply-templates/>
      </tr>
   </xsl:template>

   <xsl:template match="genre">
      <td>
         <xsl:value-of select="@v_genre"/>
      </td>
   </xsl:template>

   <xsl:template match="rating">
      <td>
         <xsl:value-of select="@v_rating"/>
      </td>
   </xsl:template>

   <xsl:template match="grading">
      <td>
         <xsl:value-of select="@v_grading"/>
      </td>
   </xsl:template>

   <xsl:template match="*">
      <td>
         <xsl:value-of select="."/>
      </td>
   </xsl:template>
</xsl:stylesheet> 
```

请注意，XSLT 处理器将匹配更具体的命名元素（例如， **genre**），然后再匹配最后的通用模板`*`。

# android - Google Analytics V2 for Android 中的完整轨迹跟踪？

> ID：13569064
> 
> 赞同：4
> 
> 时间：2012-11-26T16:33:05.280
> 
> 标签：android, google-analytics, stack-trace

我使用适用于 Android 的 Google Analytics V2 进行崩溃报告。

我正确地遇到了崩溃，但我找不到在哪里阅读完整的堆栈跟踪。

使用 Google Analytics V2 for android 时是否可以看到完整的堆栈跟踪？

我能看到的只有以下内容。

![在此处输入图像描述](../Images/6f601dd3b63cd8f7b4c1174f15491f7e.png)

# html - 在电子邮件主题行中为心脏使用什么 HTML 实体？

> ID：13569067
> 
> 赞同：2
> 
> 时间：2012-11-26T16:33:11.653
> 
> 标签：html, encoding, entity

这个问题可能听起来很愚蠢，但我尝试了所有可能的 HTML 实体，我发送的电子邮件的主题行仍然没有在 Apple 设备（iPhone、iPad 等）上显示心脏。

它可能只是我用于测试的软件（MaxBulk Mailer、ExactTarget）。

我还尝试了不同的字符集（UTF-8、ascii 等）。

有谁知道如何让一颗心在 Apple 设备的电子邮件主题行中显示为一颗心？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T16:46:47.257

主题行是电子邮件标题的一部分。电子邮件标头只能包含 ASCII 字符。主题行不会被解释为 HTML 或其他任何内容，它是纯文本。您需要将字符嵌入为 Unicode 字符，但您不能这样做，因为标头必须是 ASCII 格式。要在标头中嵌入任何非 ASCII 字符，您需要使用[MIME](http://en.wikipedia.org/wiki/MIME) [Encoded-Word](http://en.wikipedia.org/wiki/MIME#Encoded-Word)。

看[`mb_encode_mimeheader`](http://php.net/manual/en/function.mb-encode-mimeheader.php)，阅读它的例子。

生成的标头需要如下所示：

```
Subject: =?utf-8?B?4p2k?= 
```

在邮件客户端中对此进行解码：

> ❤</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T08:42:21.857

关于您的问题[：](http://www.emailmarketingtipps.de/2012/02/21/specials-characters-and-symbols-in-email-subject-lines-does-it-work/#comment-2619)您可能选错了心。尝试 ♥ 而不是 ❤。[如本测试所示](http://www.emailmarketingtipps.de/2012/11/19/symbols-tested-in-subject-lines-on-iphone-hotmail/)，第一个也应在 BlackBerry（和 Android 2.2）上呈现。然而，后一个没有。

# javascript - 淘汰赛中的复选框数组在点击时全部被选中

> ID：13569068
> 
> 赞同：0
> 
> 时间：2012-11-26T16:33:18.660
> 
> 标签：javascript, json, knockout.js

我遇到了淘汰赛的问题，当我选中一个框时，它们都被选中了...

这就是我所拥有的：_Categories_List 包含所有项目，而 My_categories 是我想要添加每个 id 的空列表

这是代码：

```
 <!-- ko foreach: _Categories_List --> 
    <input type="checkbox" data-bind="attr: {value: $data}, checked: $root.My_categories" />
    <span data-bind="text: CODE"></span><br />
 <!-- /ko --> 
```

这是代码的 JS 部分（我不能真正改变代码在文档中的方式，因为我正在构建其他人的工作并且应该使用相同的代码 - 参考 mapping.fromJS）：

```
var Poi = new Object();  
Poi.My_categories = [];
var _Poi = ko.mapping.fromJS(Poi);

var Categories_List = [];
var _Categories_List = ko.mapping.fromJS(Categories_List);

$(document).ready
(
    function () {        
       ko.applyBindings(_Poi);
       // here there's an ajax function to load the categories returned in i_Input.My_Result, then:
       ko.mapping.fromJS(i_Input.My_Result, _Categories_List);
    }
); 
```

这是从 ajax 加载的对象的样子：

```
{"My_Result":[
  {"CODE":"chalet","DEF_POIS_CATEGORY_ID":2,"DESCRIPTION":"chalet","ENTRY_DATE":"2012-10-10","ENTRY_USER_ID":2,"OWNER_ID":1},
  {"CODE":"vila","DEF_POIS_CATEGORY_ID":3,"DESCRIPTION":"villa","ENTRY_DATE":"2012-10-10","ENTRY_USER_ID":2,"OWNER_ID":1}
]} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:59:33.027

`checked`绑定`value`在输入元素的基础上起作用。在您的代码中，您将值设置为等于一个对象，该对象变为`[object Object]`，因此您的两个输入具有相同的值，这就是为什么选中一个会切换两者。

因此，您可能希望将您的值设置为等于您的`CODE`属性等对象上的键。如有必要，您可以使用计算出的 observable 来表示实际对象。

这是一个示例：http: [//jsfiddle.net/rniemeyer/7n9gR/](http://jsfiddle.net/rniemeyer/7n9gR/)

# c - 数组衰减为指针的情况有哪些？

> ID：13569070
> 
> 赞同：4
> 
> 时间：2012-11-26T16:33:21.653
> 
> 标签：c, pointers, multidimensional-array

当数组传递给函数时，我只知道一种情况，它们会衰减为指针。任何人都可以详细说明数组衰减为指针的所有情况。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T16:38:06.920

C 2011 6.3.2.1 3：

> 除非它是**sizeof**运算符的操作数，...或一元**&**运算符，或者是用于初始化数组的字符串文字，否则类型为“类型数组*”*的表达式将转换为类型为“类型指针”的 *表达式*” 指向数组对象的初始元素，不是左值。

换句话说，数组*通常*衰减为指针。该标准列出了*没有*的情况。

有人可能会认为，当您将数组与下标一起使用时，它们就像数组一样，例如`a[3]`. 然而，这里发生的实际上是：

*   `a`转换为指针。
*   下标运算符作用于指针和下标以产生指定对象的左值。（特别是，`a[3]`被评估为`*((a)+(3))`。即`a`转换为指针，将 3 添加到指针，并应用 ***** 运算符。）

注意：C 2011 文本包括“ **_Alignof**运算符”。这在标准的 C 2018 版本中得到了纠正，我已经从上面的引用中删除了它。的操作数`_Alignof`始终是类型；您实际上无法将其应用于对象。因此，C 2011 标准将其包含在 6.3.2.1 3 中是一个错误。

# matlab - 在文本框下方添加文本

> ID：13569072
> 
> 赞同：0
> 
> 时间：2012-11-26T16:33:23.867
> 
> 标签：matlab, plot, octave

我的`text`一个地块上有一个项目，放置在某个位置，具有某个方向：

```
th=text(x,y,'some text','HorizontalAlignment','right','rotation',rot); 
```

根据它的位置 ( `get(th, 'Position')`) 或任何其他属性，有没有办法计算其边界框的下限？我想在它下面放置另一个文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:12:08.830

您可以使用该`Extent`物业。您可能需要根据您所追求的调整对齐方式，但如下所示：

```
th = text(x,y,'some text','HorizontalAlignment','right','rotation',rot);
ex = get(th,'Extent');
text(ex(1),ex(2),'Text Below') 
```

# c# - 获取数据网格的行索引

> ID：13569074
> 
> 赞同：1
> 
> 时间：2012-11-26T16:33:27.590
> 
> 标签：c#, .net, silverlight, datagrid

我是 Silverlight 的新手。我有一个带有几个文本框模板列的数据网格。我已将网格绑定到一个列表，以便文本框中的更改反映在数据源实体中。

用户将在文本框和文本框模板列的“onleave”事件中键入数据，我将保存键入的数据。

我发现数据正在实体中得到反映。但我不能使用数据网格的 dataGrid.SelecedItem 或 dataGrid.SelecedIndex 属性，因为用户在一行中输入数据后会选择另一行。

我的疑问是，我们如何在文本框模板列的onleave事件中找到他编辑的当前行的索引？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:13:23.397

在`dataGrid_RowBound`(...) 事件使用`e.RowIndex`where`e`是参数（类型`EventArgs`类）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:58:57.020

在 OnLeave 事件中，您可以使用行编辑结束事件来获取 e.Row 已编辑的行对象。可用于保存实体。

# php - 检查客户端提供的 Php SID 是否有效？

> ID：13569075
> 
> 赞同：0
> 
> 时间：2012-11-26T16:33:30.057
> 
> 标签：php, session, sessionid

对于会话处理，我使用 mysql 而不是基于默认 php 文件的处理。

所以在从 db 读取会话信息之前，我想验证客户端提供的会话 id 是否有效，我编写了一个函数，它现在看起来可以工作，但仍然想与各位大师核实一下

```
private function validSID($id) {
        return !empty($id) && preg_match('/^[a-zA-Z0-9,-]{26,40}$/', $id);
    } 
```

多谢你们

***编辑：*** ***我按照你们的建议做了修改，如下所示***

```
private function validSID($id) {
        //make sure the length is 22
    //things are based on   session.hash_bits_per_character = 6
    return preg_match('/^[a-zA-Z0-9,-]{22}$/', $id);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:36:45.270

您正在检查有效数字，但完全忽略了 PHP 的会话 ID 是基于各种 .ini 参数的固定长度这一事实。您应该定制您的检查，以便拒绝任何与 php 的当前设置不匹配的 ID 字符串，例如[hash_bits_per_character](http://ca1.php.net/manual/en/session.configuration.php#ini.session.hash-bits-per-character)等等。

# tortoisehg - Tortoisehg 错误中止：意外响应：空字符串（bitbucket）

> ID：13569078
> 
> 赞同：4
> 
> 时间：2012-11-26T16:33:41.280
> 
> 标签：tortoisehg

我无法将更改推送到 repo (bitbucket)。我发现很难找到此消息问题的原因：

```
E:\Umbraco\Railway Children\source>hg --repository "E:\Umbraco\Railway Children\
source" push --force --debug --verbose --time --traceback
pushing to https://bitbucket.org/BluefinDigital/railway-children
using https://bitbucket.org/BluefinDigital/railway-children
sending capabilities command
using auth.bitbucket.org.* for authentication
bitbucket.org certificate successfully verified
using auth.bitbucket.org.* for authentication
http auth: user fabiomilheiro, password ***********
using auth.bitbucket.org.* for authentication
bitbucket.org certificate successfully verified
query 1; heads
sending batch command
using auth.bitbucket.org.* for authentication
http auth: user fabiomilheiro, password ***********
using auth.bitbucket.org.* for authentication
bitbucket.org certificate successfully verified
searching for changes
all remote heads known locally
1 changesets found
list of changesets:
1786dddde618bbd5a5b508ada9671e49437d8072
bundling: 1/1 changesets (100.00%)
bundling: 1/1 manifests (100.00%)
bundling: Source/RailwayChildren.Web/Extensions/UCommerceUtils.cs 1/41 files (2.
44%)

...

bundling: www/xslt/ShopHome[XSLT].xslt 39/41 files (95.12%)
bundling: www/xslt/UpdatePayment[XSLT].xslt 40/41 files (97.56%)
bundling: www/xslt/XSLTsearch.xslt 41/41 files (100.00%)
sending unbundle command
sending 203588 bytes
using auth.bitbucket.org.* for authentication
sending: 64/396 kb (16.16%)
sending: 128/396 kb (32.32%)
sending: 192/396 kb (48.48%)
sending: 198/396 kb (50.00%)
sending: 198/396 kb (50.00%)
http auth: user fabiomilheiro, password ***********
using auth.bitbucket.org.* for authentication
bitbucket.org certificate successfully verified
sending: 262/396 kb (66.16%)
sending: 326/396 kb (82.32%)
sending: 390/396 kb (98.48%)
sending: 397/396 kb (100.25%)
sending: 397/396 kb (100.25%)
Traceback (most recent call last):
  File "mercurial\dispatch.pyo", line 88, in _runcatch
  File "mercurial\dispatch.pyo", line 740, in _dispatch
  File "mercurial\dispatch.pyo", line 514, in runcommand
  File "mercurial\dispatch.pyo", line 830, in _runcommand
  File "mercurial\dispatch.pyo", line 801, in checkargs
  File "mercurial\dispatch.pyo", line 737, in <lambda>
  File "mercurial\util.pyo", line 471, in check
  File "mercurial\commands.pyo", line 4709, in push
  File "mercurial\localrepo.pyo", line 1902, in push
  File "mercurial\wireproto.pyo", line 307, in unbundle
  File "mercurial\httppeer.pyo", line 203, in _callpush
ResponseError: ('unexpected response:', '')
abort: unexpected response: empty string
time: real 5.79 
```

7 秒（用户 0.421+0.000 系统 0.078+0.000）

该响应错误是什么意思？为什么我会得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-03T21:39:53.143

评论中提到的线程[现在在这里](https://web.archive.org/web/20131027080427/http://comments.gmane.org/gmane.comp.version-control.mercurial.bitbucket.general/2326)，并且还涉及“ `abort: unexpected response: empty string`”

> 显然，这是 Bitbuckets 让我知道我超过了用户限制的方式（在一年有 10 个用户免费之后）。
> 当我使用 org 帐户登录时，我首先注意到了这一点（我几乎从来没有这样做过）。

# java - java注解可以像HashMap这样复杂的返回类型吗

> ID：13569079
> 
> 赞同：30
> 
> 时间：2012-11-26T16:33:41.057
> 
> 标签：java, collections, annotations

注解可以有复杂的返回类型，比如HashMap。

我正在寻找类似的东西：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface column {
    public HashMap<String, String> table();
} 
```

所以我可以有一个常量注释（**伪代码**）：

```
@column({table=(dbName, tableName), table=(dbName, tableName2)})
public static final String USER_ID = "userid"; 
```

如果 Annotation 不允许您具有复杂的返回类型，那么对于这种情况有什么好的做法吗？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-26T16:35:45.387

不可以，注解元素只能是原始类型、字符串、`enum`类型`Class`、其他注解或其中任何一种的数组。表示这些结构的典型方法是声明另一种注释类型

```
public @interface TableMapping {
  public String dbName();
  public String tableName();
} 
```

然后说

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.FIELD)
public @interface column {
    public TableMapping[] table();
} 
```

并将注释用作

```
@column(table={
  @TableMapping(dbName="dbName", tableName="tableName"),
  @TableMapping(dbName="db2", tableName="table2")
})
public String userId = "userid"; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2017-07-30T23:11:01.843

几年后，Java 8 为我们带来了。它提供了一种重复同一类注释的方法。

在 Java 8 中，您可以将注解声明为隐式包装在容器注解中。您声明为`@Repeated(value=a_class)`要可重复的注释。当您添加可重复注释的多个实例时，编译器将自动将这些实例包装在`a_class`指定为`@Repeated`.

如果您声明：

```
@Retention(RetentionPolicy.RUNTIME)
public @interface Columns {
    Column[] value() default {};
}

@Retention(RetentionPolicy.RUNTIME)
@Repeatable( value = Columns.class )
public @interface Column {
    String dbName();
    String tableName();
} 
```

那么您可以多次使用注释，无论是否将它们包装在另一个注释中，两者都是等效的：

```
@Column(dbName="db1", tableName="table1")
@Column(dbName="db2", tableName="table2")
public static final String USER_ID = "userid";

@Columns({
        @Column(dbName="db3", tableName="table3"),
        @Column(dbName="db4", tableName="table4")
})
public static final String LAST_NAME = "last name"; 
```

在这两种情况下都使用检索注释`getAnnotationsByType(class)`。

```
public static void main(String[] args) {
    for( Field field : AnnotationsTest.class.getDeclaredFields() ){
        System.out.println("Field: " + field.getName());
        Column[] columns = field.getAnnotationsByType(Column.class);
        for( Column column : columns ){
            System.out.println("    db: " + column.dbName() + " table: " + column.tableName());
        }
        System.out.println();
    }
} 
```

它应该输出：

```
Field: USER_ID
    db: db1 table: table1
    db: db2 table: table2

Field: LAST_NAME
    db: db3 table: table3
    db: db4 table: table4 
```

# asp.net - 在 Active Directory 中查找用户的不同方法

> ID：13569084
> 
> 赞同：0
> 
> 时间：2012-11-26T16:33:57.907
> 
> 标签：asp.net, vb.net, active-directory, ldap

我是 AD 编程的新手，但经过几周的研究，我发现了以下三种使用帐户名作为搜索参数在 Active Directory 中搜索用户的方法：

**选项 1 - FindByIdentity**

```
Dim ctx As New PrincipalContext(ContextType.Domain, Environment.MachineName)
Dim u As UserPrincipal = UserPrincipal.FindByIdentity(ctx, IdentityType.SamAccountName, "MYDOMAIN\Administrator")
If u Is Nothing Then
    Trace.Warn("No user found.")
Else
    Trace.Warn("Name=" & u.Name)
    Trace.Warn("DisplayName=" & u.DisplayName)
    Trace.Warn("DistinguishedName=" & u.DistinguishedName)
    Trace.Warn("EmployeeId=" & u.EmployeeId)
    Trace.Warn("EmailAddress=" & u.EmailAddress)
End If 
```

**选项 2 - DirectorySearcher**

```
Dim connPath As String = "LDAP://" & Environment.MachineName
Dim de As New DirectoryEntry(connPath)
Dim ds As New DirectorySearcher(de)
ds.Filter = String.Format("(&(objectClass=user)(anr={0}))", Split(User.Identity.Name, "\")(1))
ds.PropertiesToLoad.Add("name")
ds.PropertiesToLoad.Add("displayName")
ds.PropertiesToLoad.Add("distinguishedName")
ds.PropertiesToLoad.Add("employeeId")
ds.PropertiesToLoad.Add("mail")
Dim src As SearchResult = ds.FindOne()
If src Is Nothing Then
    Trace.Warn("No user found.")
Else
    For Each propertyKey As String In src.Properties.PropertyNames
        Dim valueCollection As ResultPropertyValueCollection = src.Properties(propertyKey)
        For Each propertyValue As Object In valueCollection
            Trace.Warn(propertyKey & "=" & propertyValue.ToString)
        Next
    Next
End If 
```

**选项 3 - PrincipalSearcher**

```
Dim ctx2 As New PrincipalContext(ContextType.Domain, Environment.MachineName)
Dim sp As New UserPrincipal(ctx2)
sp.SamAccountName = "MYDOMAIN\Administrator"
Dim s As New PrincipalSearcher
s.QueryFilter = sp
Dim p2 As UserPrincipal = s.FindOne()
If p2 Is Nothing Then
    Trace.Warn("No user found.")
Else
    Trace.Warn(p2.Name)
    Trace.Warn(p2.DisplayName)
    Trace.Warn(p2.DistinguishedName)
    Trace.Warn(p2.EmployeeId)
    Trace.Warn(p2.EmailAddress)
End If 
```

所有这三种方法都返回相同的结果，但我想知道是否有任何特定方法比其他方法更好或更差？

选项 1 或 3 似乎是最好的，因为它们提供了强类型的属性名称，但我可能错了吗？我的总体目标是在网站上使用 Windows 身份验证时根据通过 Web 浏览器传递的用户主体值在 AD 中找到单个用户（例如“MYDOMAIN\MyUserAccountName”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:01:59.570

对我来说1和3是完全一样的。在[Querying an LDAP in C# answer 中，我介绍了使用托管代码的第三种方法，该托管代码是带有](https://stackoverflow.com/a/6457140/608772)[System.DirectoryServices.Protocols (S.DS.P)](http://msdn.microsoft.com/en-us/library/bb332056.aspx)的低级（本机 LDAP）协议。

我不知道您的目的是否只是对用户进行身份验证或对用户进行身份验证并从 Active-Directory 检索一些数据（配置文件），但请记住，LDAP 查询首先是查询，而旧式（您的解决方案2）让我们指定您检索的属性。在选择之前，请从性能角度进行一些测试。

如果您只想进行身份验证，您可以比较另一篇文章的[本机 LDAP](https://stackoverflow.com/a/11033489/608772)和[用户主体](https://stackoverflow.com/a/499716/608772)响应

# r - 删除对象名称列表

> ID：13569087
> 
> 赞同：0
> 
> 时间：2012-11-26T16:34:03.570
> 
> 标签：r

我有一个对象名称数组`v <- c("v1", "v2")`，它与对象相关`v1`联`v2`。我应该如何使用删除这些对象`rm()`？我试过`rm(mget(v))`了，但我得到了错误：

```
Error in rm(mget(v)) : ... must contain names or character strings 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T16:55:35.093

--根据对Dason指出的问题的更好理解来编辑答案-

由于意图是删除 v 的内容而不是 v 本身所引用的对象，`rm(v)`（正如我之前所建议的）是不合适的（因为它会删除 v 虽然不是 v 的内容指向的对象（即 v1 ＆v2）。

```
> v1 <- "A"
> v2 <- "B"
> #v is a vector containing the references to v1 & v2 as character strings
> v <- c("v1","v2") 
> v
[1] "v1" "v2"
> rm(v)
> v
Error: object 'v' not found
> v1
[1] "A"
> v2
[1] "B"
> 
```

OP 希望删除对象 v1 & v2 而不是 v。正如 Adam 所确定的，解决方案是`rm(list=v)`

```
> rm(list=v)
> v
[1] "v1" "v2"
> v1
Error: object 'v1' not found
> v2
Error: object 'v2' not found
> 
```

# c# - 链接任务的正确方法

> ID：13569091
> 
> 赞同：6
> 
> 时间：2012-11-26T16:34:16.187
> 
> 标签：c#, multithreading, task-parallel-library

我想链`Task`s，然后并行启动链。这个片段只是为了说明我的问题：

```
 var taskOrig = new Task(() => { });
        var task = taskOrig;
        foreach (var msg in messages)
        {
            task=task.ContinueWith(t => Console.WriteLine(msg));
        }
        taskOrig.Start(); 
```

一切都很好，除了我内心的一个小完美主义者不喜欢先执行空方法`() => { }`。

有什么办法可以避免吗？

我确实理解它几乎不会影响性能（除非你真的经常这样做），但仍然如此。就我而言，性能很重要，因此检查每次迭代中是否存在任务并不是解决问题的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:11:31.693

你可以这样做：

```
Task task = Task.FromResult<object>(null);
foreach (var msg in messages)
{
    task = task.ContinueWith(t => Console.WriteLine(msg));
} 
```

以前的解决方案在 4.0 中不起作用。在 4.0 中，您需要执行以下操作：

```
var tcs = new TaskCompletionSource<object>();
Task task = tcs.Task;
foreach (var msg in messages)
{
    task = task.ContinueWith(t => Console.WriteLine(msg));
}

tcs.SetResult(null); 
```

`SetResult`（如果您愿意，可以移至foreach 循环之前。）

从技术上讲，这与在您仍在添加更多内容时将开始执行的延续不同。不过，这不太可能成为问题。

另一种选择是使用这样的东西：

```
public static Task ForEachAsync<T>(IEnumerable<T> items, Action<T> action)
{
    return Task.Factory.StartNew(() =>
    {
        foreach (T item in items)
        {
            action(item);
        }
    });
} 
```

一个示例用法是：

```
ForEachAsync(messages, msg => Console.WriteLine(msg)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:36:37.140

一种方法是，如果任务为空，则在循环中创建任务，但您提供的代码对我来说看起来更好：

```
Task task = null;
foreach (var msg in messages)
{   
    if (task == null)
      task = new Task(() => Console.WriteLine(msg))
    else
      task = task.ContinueWith(t => Console.WriteLine(msg));
}
task.Start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:47:54.810

也许是这样：

```
if(messages.Length > 0)
{
    Task task = new Task(t => Console.WriteLine(messages[0]));

    for(int i = 1; i < messages.Length; i++)
    {
        task = task.ContinueWith(t => Console.WriteLine(messages[i]));
    }
    task.Start();
} 
```

# javascript - 如何在 html 5 直播中停止视频

> ID：13569101
> 
> 赞同：2
> 
> 时间：2012-11-26T16:34:51.967
> 
> 标签：javascript, html5-video, dom-events

我是 Javascript 的初学者。我有两个按钮（开始和停止）使用 WebRTC 控制媒体流的流动。我如何为停止按钮创建一个事件处理程序，这将停止媒体流。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:42:54.777

我发现这样做的唯一可靠方法是将`src`属性更改为空（或其他 URL）。

更改 URL 后，媒体将在后台停止下载。

# jquery - .load 后 jQuery 函数不起作用

> ID：13569103
> 
> 赞同：1
> 
> 时间：2012-11-26T16:35:00.157
> 
> 标签：jquery, fadeout

> **可能重复：**
> [AJAX 加载后没有发生 jQuery 事件？](https://stackoverflow.com/questions/5878239/jquery-events-not-happening-after-ajax-load)

我有点击按钮后重新加载页面的功能，这里是：

```
$(".updated").load("index.php .updated"); 
```

它完美地加载了所有内容。但是在加载其他应该淡出表格行的功能后 - 不起作用。这是功能：

```
$('.deletetable').click(function () {
 var x = this.id;
 $.post("Changes.php", { ID: x, CLEAR: '1'});
 $('#slideup'+x).fadeOut("slow"); 
```

它也可以正常工作，但在 .load 发生之前。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:36:47.717

如果您希望在加载后执行代码，则将代码作为回调传递给加载：

```
$(".updated").load("index.php .updated", function(){

    $('.deletetable').click(function () {
     var x = this.id;
     $.post("Changes.php", { ID: x, CLEAR: '1'});
     $('#slideup'+x).fadeOut("slow");
    })

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:37:18.207

用这个：

```
$(document).on('click', '.deletetable', function () {
    var x = this.id;
    $.post("Changes.php", {
        ID: x,
        CLEAR: '1'
    });
    $('#slideup' + x).fadeOut("slow");
}); 
```

# python - 如何正确消除字典中的元素，直到剩下一个字符串

> ID：13569105
> 
> 赞同：0
> 
> 时间：2012-11-26T16:35:12.497
> 
> 标签：python, dictionary

我真的需要帮助

```
def get_winner (dict_winner):
    new_dict = {} 
    for winner in dict_winner:
        first_letter = winner[0]
        value = dict_winner[winner]
        if first_letter in new_dict:
            new_dict[first_letter] += value
        else:
            new_dict[first_letter] = value
    return (new_dict)

get_winner({
    ('C', 'A', 'B', 'D') :3,
    ('D', 'B', 'C', 'A') :2,
    ('C', 'D', 'A', 'B') :1,
    ('A', 'D', 'B', 'C') :2,
    ('A', 'D', 'C', 'B') :4, 
    ('A', 'C', 'D', 'B') :2
})

#Outputs {'A': 8, 'D': 2, 'C': 4} 
```

现在我希望结果是 str 的元组，NoneType..

此外，它只消除一次仅排在第一位的最小值的字母。我希望它重复这个过程，直到我最终得到一个赢家。所以在这种情况下，所有 B 都将在 dict 本身中被消除，而不是在输出中。例如：

```
first time = [8, 0, 4, 2] 
second time = {
    ('C', 'A', 'D') :3, 
    ('D', 'C', 'A') :2,
    ('C', 'D', 'A') :1,
    ('A', 'D', 'C') :2,
    ('A', 'D', 'C') :4,
    ('A', 'C', 'D') :2
}) 
#Outputs C = 4 D = 2 A = 8 

third time= {
    ('C', 'A') :3, 
    ('C', 'A') :2, 
    ('C', 'A') :1, 
    ('A', 'C') :2, 
    ('A', 'C') :4,
    ('A', 'C') :2
}) 
#Outputs C = 6 A = 8 
```

8/ 14 > 50%，我知道从一开始就应该是这样，因为`A`已经有了多数值。但我假设`A`它的值为 40%，这是消除应该开始的时候。那么，你能指出我在编码时出错的地方吗？在例子`A`中应该是赢家！所以输出应该是 ('A', None)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:54:12.000

您当前的代码计算每个候选人在列表中排名第一的次数。它不会“消除”任何人，它只是看起来这样做，因为您的一位候选人没有获得第一名的选票。

我建议递归地做。您的基本情况是“候选人获得超过 50% 的选票”。像这样的东西：

```
def get_winner(vote_dict)
    total_votes = sum(vote_dict.values())
    votes_by_candidate = defaultdict(int)    # This makes your if/else block redundant

    for vote_pattern in vote_dict:
        votes_by_candidate[vote_pattern[0]] += vote_dict[vote_pattern]

    for candidate in votes_by_candidate:
         if votes_by_candidate[candidate] * 2 > total_votes:
             return candidate

    new_dict = defaultdict(int)
    eliminated = min(votes_by_candidate, key=votes_by_candidate.get)

    for vote_pattern in vote_dict:
        new_pattern = [candidate for candidate in vote_pattern if candidate != eliminated]
        new_dict[new_pattern] += vote_dict[vote_pattern]

    return get_winner(new_dict) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T16:10:22.443

我的解决方案 - 一步到位：

```
def get_winner(candidates):
    winners = dict.fromkeys(map(lambda f: f[0] for f in candidates.keys()))
    for cand, votes in candidates.iteritems(): 
        winners[cand[0]]+=votes
    return [winner for winner, vote in winners.iteritems() if vote ==max(winners.values())] 
```

这不是花哨，但很简单:-)

# oracle - 捕获触发 DUP_VAL_ON_INDEX 的值

> ID：13569107
> 
> 赞同：3
> 
> 时间：2012-11-26T16:35:14.990
> 
> 标签：oracle, oracle10g, constraints

鉴于此示例（[DUP_VAL_ON_INDEX 异常](http://www.java2s.com/Tutorial/Oracle/0480__PL-SQL-Programming/DUPVALONINDEXException.htm)），是否可以捕获违反约束的值以便记录它们？

如果批量插入产生多个违规，该方法是否相同？

```
BEGIN
  -- want to capture '01' and '02'
  INSERT INTO Employee(ID)
  SELECT ID
  FROM (
    SELECT '01' ID FROM DUAL
    UNION
    SELECT '02' ID FROM DUAL
  );

EXCEPTION
  WHEN DUP_VAL_ON_INDEX THEN
    -- log values here
    DBMS_OUTPUT.PUT_LINE('Duplicate value on an index');
END; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:41:35.497

理想情况下，我建议使用 DML 错误记录。例如

*创建错误日志表*

```
begin
  dbms_errlog.create_error_log( dml_table_name => 'EMPLOYEE',
                                err_log_table_name => 'EMPLOYEE_ERR' );
end; 
```

*使用 DML 错误记录*

```
BEGIN
  insert into employee( id )
    select id 
      from (select '01' id from dual
            union all
            select '02' from dual) 
    log errors into employee_err
        reject limit unlimited;
END; 
```

对于失败的每一行，这都会将该行的数据`EMPLOYEE_ERR`与异常一起记录到表中。然后，您可以查询错误日志表以查看所有错误，而不仅仅是获取失败的第一行。

如果无法创建错误日志表，您可以使用批量操作从 SQL 迁移到 PL/SQL。这会更慢，但您可以使用该语句的`SAVE EXCEPTIONS`子句`FORALL`创建一个嵌套的异常表，然后您可以对其进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-23T13:16:29.180

对于有兴趣了解更多有关此内容的人，请通过此[链接](http://www.dba-oracle.com/plsql/t_plsql_exceptions.htm)。

# symfony - 文件“Twig.xml”不存在

> ID：13569113
> 
> 赞同：1
> 
> 时间：2012-11-26T16:35:38.047
> 
> 标签：symfony, filter, twig, xml-twig

我正在关注 symfony2 教程，并试图在第 5 章[http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html](http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html)中创建 Twig 过滤器扩展，但是，我我不确定我做了什么，但是当我现在加载页面时，我收到以下错误：

> InvalidArgumentException：文件“Twig.xml”不存在（在：/var/www/tester/symfony/vendor/symfony/symfony/src/Symfony/Bundle/TwigBundle/DependencyInjection/../Resources/config）。

知道为什么 twig.xml 不存在以及如何重新创建它吗？

我首先添加`{{ comment.created|created_ago }}`到我的 sidebar.html.twig 文件。然后我在 /src/tester/TestBundle/ 中创建了一个“Twig”文件夹，然后在其中创建了一个“Extensions”文件夹。然后我使用以下代码在“扩展”中创建了 /testerTestBundleExtension.php：

```
namespace tester\TestBundle\Twig\Extensions;

class testerTestExtension extends \Twig_Extension
{
    public function getFilters()
    {
        return array(
            'created_ago' => new \Twig_Filter_Method($this, 'createdAgo'),
        );
    }

    public function createdAgo(\DateTime $dateTime)
    {
        $delta = time() - $dateTime->getTimestamp();
        if ($delta < 0)
            throw new \InvalidArgumentException("createdAgo is unable to handle dates in the future");

        $duration = "";
        if ($delta < 60)
        {
            // Seconds
            $time = $delta;
            $duration = $time . " second" . (($time > 1) ? "s" : "") . " ago";
        }
        else if ($delta <= 3600)
        {
            // Mins
            $time = floor($delta / 60);
            $duration = $time . " minute" . (($time > 1) ? "s" : "") . " ago";
        }
        else if ($delta <= 86400)
        {
            // Hours
            $time = floor($delta / 3600);
            $duration = $time . " hour" . (($time > 1) ? "s" : "") . " ago";
        }
        else
        {
            // Days
            $time = floor($delta / 86400);
            $duration = $time . " day" . (($time > 1) ? "s" : "") . " ago";
        }

        return $duration;
    }

    public function getName()
    {
        return 'tester_test_extension';
    }
} 
```

**更新：**

我现在已经删除了供应商目录并重新运行了“php composer.phar install”，现在我收到以下错误：

> ServiceNotFoundException：服务“twig”依赖于不存在的服务“assetic.twig_extension”。

另外，我的 app/autoload.php 是否正确？

```
<?php

use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = require __DIR__.'/../vendor/autoload.php';

// intl
if (!function_exists('intl_get_error_code')) {
    require_once      __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs/functions.php';

    $loader->add('', __DIR__.'/../vendor/symfony/symfony/src/Symfony/Component/Locale/Resources/stubs');
}

AnnotationRegistry::registerLoader(array($loader, 'loadClass'));

return $loader; 
```

**更新：**

我的 composer.json 如下：

```
{
    "name": "symfony/framework-standard-edition",
    "description": "The \"Symfony Standard Edition\" distribution",
    "autoload": {
        "psr-0": { "": "src/" }
    },
    "require": {
        "php": ">=5.3.3",
        "symfony/symfony": "2.1.*",
        "doctrine/orm": ">=2.2.3,<2.4-dev",
        "doctrine/doctrine-bundle": "1.0.*",
        "twig/twig": "1.*",
        "symfony/assetic-bundle": "2.1.*",
        "symfony/swiftmailer-bundle": "2.1.*",
        "symfony/monolog-bundle": "2.1.*",
        "sensio/distribution-bundle": "2.1.*",
        "sensio/framework-extra-bundle": "2.1.*",
        "sensio/generator-bundle": "2.1.*",
        "jms/security-extra-bundle": "1.2.*",
        "jms/di-extra-bundle": "1.1.*",
        "doctrine/data-fixtures": "dev-master",
        "doctrine/doctrine-fixtures-bundle": "dev-master",
        "doctrine/doctrine-migrations-bundle": "dev-master"
    },
    "scripts": {
        "post-install-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ],
        "post-update-cmd": [
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
            "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
        ]
    },
    "minimum-stability": "dev",
    "extra": {
        "symfony-app-dir": "app",
        "symfony-web-dir": "web",
        "symfony-assets-install": "symlink"
    } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T02:31:00.580

您的 composer.json 似乎不正确。而不是

```
"twig/twig": "1.*", 
```

该行应该是：

```
"twig/extensions": "1.0.*", 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T09:17:47.733

如果您在 symfony 中创建 Twig Extension，则您已将其标记为服务

例如在 tester/TestBundle/Resources/config/services.yml

```
services:
  test_bundle.twig.tester_test_extension:
    class: tester\TestBundle\Twig\Extensions\testerTestExtension
    tags:
      - { name: twig.extension } 
```

有关更多信息，请查看文档[http://symfony.com/doc/current/cookbook/templating/twig_extension.html](http://symfony.com/doc/current/cookbook/templating/twig_extension.html)

# c++ - 编译一个 MSVC++2010 项目，使其可以在 Ubuntu 上运行

> ID：13569116
> 
> 赞同：0
> 
> 时间：2012-11-26T16:35:40.797
> 
> 标签：c++, ubuntu, cross-platform

我有一个 MSVC++ 2010 项目。它使用的所有库都是跨平台的（SDL、OpenGL 和 FLTK）。

显然，我现在要做的就是按下调试按钮，它会为我编译一个不错的旧 .exe，现在可以在 Windows 上运行，只要 DLL 文件与它一起。

之前我曾想过，如果你使用跨平台库，那么生成的 .exe 也可以在 Ubuntu 上运行良好。我最近发现这是不可能的，并且程序必须以特殊的方式编译才能在某个平台上运行。

是否可以使用 MSVC++ 2010 以这种神奇的方式编译我的项目，以便它可以在 Ubuntu 计算机上运行？如果是这样，那么您能否通过一些明确的步骤来回答我的问题，以说明我应该如何以这种方式编译它，请记住，我对所有这些跨平台的东西如何工作都不熟悉？

编辑：

如果我无法为 Ubuntu 编译 MSVC++ 2010 项目，是否有我可以使用的 IDE 可以为 Windows 和 Ubuntu 编译该项目？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:43:18.070

不，不可能。虽然与程序对应的二进制代码可以移植，但这还不够。各种文件系统上的可执行格式不同且不兼容。可执行格式本质上是二进制数据的打包，并用目标文件系统可以理解的标头包装它。为了为 Ubuntu 生成可执行文件，链接器必须支持它。MSVC++ 不支持 Linux 格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:49:08.990

我建议你使用QT。[http://qt.digia.com/](http://qt.digia.com/) 它可能是最好的跨平台IDE，可以让你为Windows、Mac和Linux（ubuntu）系统编译。

# php - 删除整个表或移动所有行？

> ID：13569118
> 
> 赞同：0
> 
> 时间：2012-11-26T16:35:54.410
> 
> 标签：php, mysql

找不到更好的方式来表达这个问题。这是交易：

我有一个固定数量的行 (x) 的表，现在我想在顶部添加 1 行并删除底部的行。什么更有效，在选择后删除所有表数据并以正确的顺序重写或相应地移动所有条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:04:00.183

这样做很奇怪，但是你可以用其他方式来做。您可以在底部插入一行并从顶部删除行。通过 ID DESC 订购，您将得到您想要的。

```
DELETE FROM TABLE Where id = (SELECT min(id) FROM Table) 
```

# php - 如何将mysql数组加载到没有循环的数组中？

> ID：13569120
> 
> 赞同：1
> 
> 时间：2012-11-26T16:36:06.360
> 
> 标签：php, mysql, arrays, function

简单的问题。假设我运行以下命令：

```
$results = mysql_query("SELECT * FROM table"); 
```

如何在不执行 while 循环的情况下将 mysql 结果数组加载到 PHP 数组中？例子：

```
$mysql_results = array();
$results = mysql_query("SELECT * FROM table");
$mysql_results = mysql_load_all_results_into_array($results); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:40:38.307

PHP 的`mysql_`库不提供“获取所有”行的方法，而无需使用`mysql_fetch_row()`（或类似方法）循环遍历结果对象。

但是，您可以更新您的代码以使用[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)包含一个名为[`mysqli_result::fetch_all`](http://php.net/manual/en/mysqli-result.fetch-all.php)执行您想要的任务的方法的库。或者，您可以更新以使用[`PDO`](http://www.php.net/manual/en/book.pdo.php)包含名为[`PDOStatement::fetchAll`](http://php.net/manual/en/pdostatement.fetchall.php).

由于这些`mysql_`方法已被弃用，更新到`mysqli`(or `PDO`) 是推荐的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:39:12.950

你不能用mysql做到这一点。你必须循环。你可以用[PDO做到这一点](http://www.php.net/manual/en/pdostatement.fetchall.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:39:16.463

请使用 MySQLi 扩展：

[http://php.net/manual/en/mysqli-result.fetch-all.php](http://php.net/manual/en/mysqli-result.fetch-all.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:45:57.690

使用：
`$values = mysql_fetch_array($results);`
但请检查您的操作是否成功......因此：
`while ($values = mysql_fetch_array($result)) {
    $msg = "Array gotten successfully.";
 }`

# php - 获取IP以外用户的唯一值

> ID：13569122
> 
> 赞同：1
> 
> 时间：2012-11-26T16:36:12.820
> 
> 标签：php, javascript, jquery

我正在开发一个 PHP 应用程序，仅由我们的员工在 3 个不同的位置使用。我想要一个何时、何人、何地的日志。我只获得了 3 个唯一 IP，因为它们都主要通过代理和 chrome 浏览器使用互联网。除了 IP 或浏览器信息之外，还有其他独特的价值吗？应该由 javascript 或 PHP 记录。我知道获取计算机名或本地 IP 存在安全问题，但请提出建议和任何其他解决方案。

等待您的宝贵建议

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:37:21.163

你可以使用会话/cookies？但是对于这样的事情，你真的应该有一个登录系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:51:32.223

You may consider using Google Maps Geolocation to find and store the zipcode:

[https://developers.google.com/maps/documentation/business/geolocation/](https://developers.google.com/maps/documentation/business/geolocation/)

# python - Python 性能分析（文件关闭）

> ID：13569127
> 
> 赞同：1
> 
> 时间：2012-11-26T16:36:31.900
> 
> 标签：python, performance, file, profiling

首先感谢您的关注。我的问题是如何减少我的代码的执行时间。

这是相关的代码。下面的代码在 main 的迭代中调用。

```
def call_prism(prism_input_file,random_length):
   prism_output_file = "path.txt"
   cmd = "prism %s -simpath %d %s" % (prism_input_file,random_length,prism_output_file)
   p = os.popen(cmd)
   p.close()
   return prism_output_file

def main(prism_input_file, number_of_strings):
...
  for n in range(number_of_strings):
        prism_output_file = call_prism(prism_input_file,z[n])
        ...

  return 
```

当我分析我的代码时，我使用了来自“配置文件统计浏览器”的统计信息。“文件关闭”系统命令花费的时间最长（14.546 秒）。call_prism 例程被调用 10 次。但是 number_of_strings 通常以千为单位，因此，我的程序需要大量时间才能完成。

如果您需要更多信息，请与我们联系。顺便说一句，我也尝试过使用子流程。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:03:45.260

感谢您对我的问题的反馈。根据其他人提供的评论，我做了一个并行版本的代码，并且代码的性能确实有所提高。这是并行版本的片段。欢迎您的反馈，如果有的话。

```
def call_prism(prism_input_file,random_length):
    ...   
    cmd = "prism %s -simpath %d stdout" % (prism_input_file,random_length)
    args = shlex.split(cmd)
    p = subprocess.Popen(args,stdout=subprocess.PIPE)
    p.poll()
    prism_output_lines = p.stdout.readlines()
    ...
    return ...

def call_prism_star(prism_input_file_random_length):
   return call_prism(*prism_input_file_random_length)

def main(prism_input_file, number_of_strings,number_of_threads):
   pool = Pool(processes=number_of_threads)
   for n in range(0,number_of_strings,number_of_threads):
   ...
      for i in range(number_of_threads):
          a_args.append(...)
      output = pool.map(call_prism_star,itertools.izip(itertools.repeat(prism_input_file),a_args))
   ...
    return 
```

# c# - 如何解决 C# 中的“类似指针”

> ID：13569136
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:36:51.153
> 
> 标签：c#, .net

我有以下代码：

```
class A { }

class B
{
    public List<A> LstClassA;
    public static A CurrentA;

    public void AddA(A a)
    {
        LstClassA.Add(a);
        CurrentA = a;
    }
} 
```

而当我想做一些事情时`CurrentA`（比如改变一些属性），它不会对instance in 生效`LstClassA`，我怎样才能使改变对其他instance`CurrentA`生效？`A`

**更新** B 类是：

```
class B
{
    public List<A> LstClassA;
    public static A CurrentA;

    public void AddA(A a)
    {
        LstClassA.Add(a);
    }
} 
```

我只想将当前正在处理的项目存储在静态成员中以便于操作：D

**更新 2**

例如，我有`class Project`这样的：

```
class Project
{
} 
```

和`class Solution`（其中包含更多项目）

```
class Solution
{
public List<Project> LstProject;
public static Project CurrentProject;
} 
```

以及代码中的一些地方：

```
Project prj = new Project()
sol.LstProject.Add(prj); 
```

和

```
Solution.CurrentProject = prj; 
```

问题是我所做的`CurrentProject`并没有使列表中的实例更改为

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:56:28.057

我认为以下将大致是您想要的（不是静态的，但是您确实已经有实例可以调用 Add，不是吗）：

```
public A CurrentA {
  get { return LstClassA.LastOrDefault(); }
} 
```

我完全同意您的笑脸，即为“轻松操作”制作静态字段没有多大意义（除非我读错了您的笑脸）。“随机”更改的静态字段是长时间调试会话的良好来源。

# c - 对于不同类型的 var，如何重用变量而不会出现错误 C2371（重新定义）？

> ID：13569139
> 
> 赞同：2
> 
> 时间：2012-11-26T16:36:54.857
> 
> 标签：c, unions

在 VBA 中，我只是为此使用了一个变体类型，但我怎样才能减少这种有些重复的代码以获得更好的`switch case`块呢？

```
switch(command){
case CMD1:
    RESPONSE1 rsp1;
    memcpy(&rsp1,pPkt,sizeof(rsp1));
    break;
case CMD2:
    RESPONSE2 rsp2;
    memcpy(&rsp2,pPkt,sizeof(rsp2));
    break;
case CMD3:
    RESPONSE3 rsp3;
    memcpy(&rsp3,pPkt,sizeof(rsp3));
    break;
case CMD4:
    RESPONSE4 rsp4;
    memcpy(&rsp4,pPkt,sizeof(rsp4));
case CMD5:
    RESPONSE5 rsp5;
    memcpy(&rsp5,pPkt,sizeof(rsp5));
default:
    break;
} 
```

我的目标是消除这 5 个响应变量并只使用一个 - 但是，我需要 5 种不同的类型，因为`memcpy`.

我知道，有类似的东西`cast`，但我认为这更有问题，因为这些 RESPONSE# 是不同大小的结构 - 我不需要为此重新分配内存吗？

*编辑：*

多亏了 mux，我发现我的代码中已经有一个联合（改编别人的东西）！

```
typedef union
{
  RESPONSE1 rsp1;
  RESPONSE2 rsp2;
  RESPONSE3 rsp3;
  RESPONSE4 rsp4;
  RESPONSE5 rsp5;
}
RESPONSE_UNION; 
```

这就是我现在使用的：

```
RESPONSE_UNION ru;

switch(command){
    case CMD1:
        memcpy(&ru.rsp1,pPkt,sizeof(ru.rsp1));
        break;
    case CMD2:
        memcpy(&ru.rsp2,pPkt,sizeof(ru.rsp2));
        break;
... 
```

真的是一个很大的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:39:36.103

您可以使用 a`union`并且您可能还想`enum`为响应类型定义一个：

```
typedef enum { 
    RESPONSE_1,
    RESPONSE_2,
    RESPONSE_3,
    RESPONSE_4
} ResponseType;

typedef struct {    
    ResponseType type;
    union {
        RESPONSE1 rsp1;
        RESPONSE2 rsp2;
        RESPONSE3 rsp3;
        RESPONSE4 rsp4;
    };
} Response; 
```

在您的代码中，您可以像这样使用它：

```
Response r;
switch (command) {
    case CMD1:
        r.type = RESPONSE_1;
        memcpy(&r.rsp1, pPkt, sizeof(r.resp1));
        break;
    case CMD2:
    ...
} 
```

# java - 在 Maven 中安装插件时出错

> ID：13569148
> 
> 赞同：0
> 
> 时间：2012-11-26T16:37:48.980
> 
> 标签：java, maven

我是 Maven 新手，我想在 Maven 中使用 qt-jambi。我按照本**[教程](http://old.qt-jambi.org/users/maven-repository/)**进行操作，Maven 给了我以下错误：

```
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building iycTest
[INFO]    task-segment: [test]
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD ERROR
[INFO] ------------------------------------------------------------------------
[INFO] The plugin 'net.sf.qtjambi:qtjambi-maven-plugin' does not exist or no val
id version could be found
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1 second
[INFO] Finished at: Mon Nov 26 02:25:57 PST 2012
[INFO] Final Memory: 3M/15M
[INFO] ------------------------------------------------------------------------ 
```

我的 pom.xml：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>mypacakage</groupId>
  <artifactId>iycTest</artifactId>
  <version>2.0</version>
  <packaging>jar</packaging>

  <name>iycTest</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <dependencies>
    <dependency>
        <groupId>net.sf.qtjambi</groupId>
        <artifactId>qtjambi</artifactId>
        <version>4.5.2_01</version>
    </dependency>
</dependencies>

<build>
    <plugins>
        <plugin>
            <groupId>net.sf.qtjambi</groupId>
            <artifactId>qtjambi-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>qtjambi</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <sourcesDir>src/main/java</sourcesDir>
                <noObsoleteTranslations>true</noObsoleteTranslations>
            </configuration>
        </plugin>
    </plugins>
</build>

<repositories>
        <repository>
            <id>qtjambi</id>
            <name>qtjambi</name>
            <url>http://qtjambi.sourceforge.net/maven2/</url>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>qtjambi</id>
            <name>qtjambi</name>
            <url>http://qtjambi.sourceforge.net/maven2/</url>
        </pluginRepository>
    </pluginRepositories>

</project> 
```

我该如何解决？我正在使用 MS Windows xp 和 Maven 2.0.11

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:49:14.607

[基于@Raymond 提示在旧存储库位置查看 README.txt 的更新]

存储库已移动，因此您必须更改存储库 URL。更改所有存储库网址

```
http://qtjambi.sourceforge.net/maven2/ 
```

到

```
http://repository.qt-jambi.org/nexus/content/repositories/releases-before-2011/ 
```

[另请查看http://qt-jambi.org](http://qt-jambi.org)上的新主页以获取更多信息。在这个新的存储库 4.6.3_04 可用于 maven 插件。qtjambi 本身提供 4.5.2_01、4.6.2 和 4.6.3。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:12:49.137

如果您浏览[自述文件](http://qt-jambi.org/maven2/README.txt%20%20If%20you%20check%20the%20README%20above%20you%27ll%20see%20that%20the%20repository%20is%20actually%20located%20at%3a%20%20%20http://repository.qt-jambi.org/nexus/content/repositories/releases-before-2011/%20README)​​，您会在底部找到一个指向[存储库](http://repository.qt-jambi.org/nexus/content/repositories/releases-before-2011 "存储库")的链接。更新你的 pom.xml 然后重新运行 maven：

```
$ mvn --update-plugins clean install

$ mvn --version
 Apache Maven 3.0.4 (r1232337; 2012-01-17 00:44:56-0800)
 Maven home: /home/user/apache-maven-3.0.4
 Java version: 1.7.0_09, vendor: Oracle Corporation
 Java home: /home/user/jdk1.7.0_09/jre
 Default locale: en_CA, platform encoding: UTF-8
 OS name: "linux", version: "3.5.0-18-generic", arch: "amd64", family: "unix" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T17:36:14.517

尝试将版本添加到插件中，它可能无法自动解析：

```
<version>4.6.3_04</version> 
```

您可以用于插件的可用版本位于存储库 url：

[http://old.qt-jambi.org/maven2/net/sf/qtjambi/qtjambi-maven-plugin/](http://old.qt-jambi.org/maven2/net/sf/qtjambi/qtjambi-maven-plugin/)

猜测您可能需要与 qtjambi 版本相同的插件版本，因此在这种情况下，您需要找到合适的存储库。

# java - 了解 java.util.Locale 的奇怪输出

> ID：13569149
> 
> 赞同：1
> 
> 时间：2012-11-26T16:37:58.817
> 
> 标签：java, format, locale

我有一种看法，`Locale`就是至少在数字的情况下在适当的位置添加逗号。但我看到我尝试过的不同输出。

我尝试了以下，

```
public static void main(String[] args) {
    DecimalFormat df = null;

    df = (DecimalFormat) DecimalFormat.getInstance(Locale.CHINESE);
    System.out.println("Locale.CHINESE "+df.format(12345.45));

    df = (DecimalFormat) DecimalFormat.getInstance(Locale.GERMAN);
    System.out.println("Locale.GERMAN  "+df.format(12345.45));
} 
```

### 输出：

```
Locale.CHINESE 12,345.45
Locale.GERMAN  12.345,45 
```

如果你仔细看逗号，你会发现一个很大的不同。

现在，[java.util.Locale 的 javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Locale.html)说

> ... 需要区域设置来执行其任务的操作称为区域设置敏感，并使用区域设置为用户定制信息。例如，显示数字是一种区域设置敏感操作——数字应根据用户所在国家、地区或文化的习俗/惯例进行格式化......

我看到一个逗号被解释为 another 中的小数点`Locale`，这真的很奇怪，因为值正在改变。

所以，帮助我理解这一点。究竟是`Locale`什么？输出的剧烈变化不会导致代码/数据出现重大问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:41:14.997

> 我认为 Locale 只是在适当的位置添加逗号，至少在数字的情况下。

不，正如您所见，它也会影响使用的符号。

> 所以，帮助我理解这一点。究竟什么是语言环境？输出的剧烈变化不会导致代码/数据出现重大问题吗？

仅当您没有正确使用它们时:) 机器对机器的通信通常*不*应该本地化；通常，如果您确实需要使用文本，最好将 US 用作合理不变的语言环境。

有关[`DecimalFormatSymbols`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormatSymbols.html)特定于区域设置的更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:41:25.080

我看上面没有错。德国的表示方式`12345.45`是 12.345,45
，中国的表示方式是 12,345.45 。

> 所以，帮助我理解这一点。究竟什么是语言环境？输出的剧烈变化不会导致代码/数据出现重大问题吗？

不，您只需要跟踪输入的语言环境以及您希望它的格式。

# java - .NET ListBox 的 Swing 等效项

> ID：13569150
> 
> 赞同：2
> 
> 时间：2012-11-26T16:38:02.147
> 
> 标签：java, .net, swing, listbox, jlist

具有添加新项目能力的 .NET [ListBox](https://msdn.microsoft.com/en-us/library/system.windows.controls.listbox%28v=vs.110%29.aspx)的 Swing 等效项是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T16:39:34.637

[JScrollPane](https://docs.oracle.com/javase/8/docs/api/javax/swing/JScrollPane.html)内的[JList](https://docs.oracle.com/javase/8/docs/api/javax/swing/JList.html)。

要动态添加和删除项目，您需要使用[DefaultListModel](https://docs.oracle.com/javase/8/docs/api/javax/swing/DefaultListModel.html)，如下所示：

```
DefaultListModel<String> listModel = new DefaultListModel<String>();
JList<String> list = new JList<String>(listModel);
JScrollPane scroll = new JScrollPane(list);
someComponent.add(scroll);

listModel.addElement("new");
listModel.remove(0); 
```

# c# - 将 x:array 绑定到属性

> ID：13569153
> 
> 赞同：1
> 
> 时间：2012-11-26T16:38:13.800
> 
> 标签：c#, wpf, binding, datatemplateselector

由于我经常使用`TemplateSelectors`基于类型来区分模板，因此我尝试编写一个`TemplateSelector`具有属性来保存类型/模板关系的模板。

我尝试使用`x:Array`在 XAML 中设置此属性。这不起作用，因为 VS 抱怨这`x:Array`不是一个实现的类，`IEnumerable`根据文档它应该

MSDN：

> 但是 x:Array 也可用于使用 XAML 填充某些属性，这些属性将通用集合支持接口或类作为其结构化属性内容，例如 IEnumerable。

这里对应的代码行

### 模板选择器

```
public class TypeMatchDataTemplateSelector : DataTemplateSelector
{
    public TypeTemplate[] Templates { get; set; }

    ...
}

public class TypeTemplate
{
    public Type Type { get; set; }
    public DataTemplate Template { get; set; }
} 
```

### 在 XAML 中使用

```
<x:Array Type="ct:TypeTemplate" x:Key="fooTemplates">
    <ct:TypeTemplate
        Type="{x:Type logic:NamedRegisterInformation}"
        Template="{StaticResource RegisterListTemplate}" />
    <ct:TypeTemplate
        Type="{x:Type logic:AddressedRegisterInformation}"
        Template="{StaticResource RegisterListTemplate}" />
</x:Array>

<ct:TypeMatchDataTemplateSelector
    x:Key="foo"
    Templates="{StaticResource fooTemplates}"/>
...
...
<ListBox ItemTemplate="{StaticResource blub}"> 
```

使用的类型和模板应该是正确的。如果我执行代码，我会在运行时收到此异常：

> 无法将属性“模板”中的值转换为“EP3_gui.UI.ContentTemplates.TypeTemplate[]”类型的对象。“System.Windows.Markup.ArrayExtension”类型的对象无法转换为“EP3_gui.UI.ContentTemplates.TypeTemplate[]”类型。标记文件 'EP3_gui;component/ui/readmsfrcontrol.xaml' 第 36 行位置 11 中的对象 'blub' 出错。

任何提示我的错误可能在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:03:44.840

你为什么要让你的生活如此艰难？我的意思是还有很多其他方法可以成为一名优秀的程序员！我刚才是开玩笑的。

您可以简单地编写两个`"DataTemplate"`s 并根据它们过滤它们，`"DataType"`如下所示：

```
<Window.Resources>

    <DataTemplate DataType="x:Type logic:AddressedRegisterInformation" ></DataTemplate>

    <DataTemplate DataType="x:Type logic:NamedRegisterInformation" ></DataTemplate>

</Window.Resources>
<ListBox ItemsSource="{Binding}" /> 
```

你为什么不这样做？而不是尝试使用`"TemplateSelector"`可能会导致您遇到许多问题的复杂自定义，例如您提到的问题。这样，WPF 将完成所有选择的事情，你坐下来，将一个数组绑定`"Object"`到`"ItemsSource"`.

希望能帮助到你

# php - 在 php 中，如何检查数组项是否与其他项不同

> ID：13569155
> 
> 赞同：0
> 
> 时间：2012-11-26T16:38:17.833
> 
> 标签：php, arrays

在 PHP 中，如何检查数组中的至少一项是否与其他项不同？例如。

```
$array(3, 3, 3, 3); // returns false

$array(3, 3, 5, 3, 2); // returns true

$array(3, 3, 5, 3, 3); // returns true 
```

该数组具有不定数量的项目。有这个算法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:41:54.577

```
<?php
  $a = array('a', 'b', 'c', 'a');
  if (count(array_unique($a)) > 1) {
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:42:54.440

如果您想采用更手动的方式：

```
<?php
$array = array(3, 3, 3, 3);
$different = false;
for($i=1;i<count($array);i++)
{
    if($array[$i] != $array[$i-1])
    {
        $different = true;
    }
}
?> 
```

# android - 单击 HOME 按钮时的 Android 活动生命周期

> ID：13569157
> 
> 赞同：0
> 
> 时间：2012-11-26T16:38:28.707
> 
> 标签：android

我有一个只有一个活动在 Android 模拟器中运行的应用程序：

*   当此活动具有焦点并且当我单击 HOME 按钮时，将调用 onPause() 和 onStop() 回调。
*   从那里，如果我从 ADB shell 运行“ps”命令，我可以看到一个与我的应用程序对应的进程。
*   现在，如果我再次启动应用程序，则会调用 onCreate()、onStart() 和 onResume() 回调。

由于调用了 onCreate()，这似乎意味着该活动被杀死或关闭。但在那种情况下......为什么我可以通过运行“ps”命令看到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:48:20.800

可以有多个相同类型的活动在运行。

看看那个：

[http://developer.android.com/guide/topics/manifest/activity-element.html#lmode](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)

# iterator - 反向迭代迭代器的最快方法是什么

> ID：13569160
> 
> 赞同：7
> 
> 时间：2012-11-26T16:38:45.267
> 
> 标签：iterator, haxe

假设我想反向迭代一个通用迭代器，而不知道迭代器的内部结构，并且基本上不通过无类型魔法作弊，并假设这可以是任何类型的迭代器，它服务于迭代器；我们可以在运行时甚至通过宏优化迭代器的逆向吗？

**前锋**

```
var a = [1, 2, 3, 4].iterator();
// Actual iteration bellow
for(i in a) {
   trace(i);
} 
```

**向后**

```
var a = [1, 2, 3, 4].iterator();
// Actual reverse iteration bellow
var s = [];
for(i in a) {
    s.push(i);    
}
s.reverse();
for(i in s) {
    trace(i);    
} 
```

我认为必须有一种更简单的方法，或者至少是快速的方法。我们无法知道大小，因为 Iterator 类不携带大小，因此我们无法反转对 temp 数组的推送。但是我们可以删除相反的内容，因为我们确实知道临时数组的大小。

```
var a = [1,2,3,4].iterator();
// Actual reverse iteration bellow
var s = [];
for(i in a) {
    s.push(i);    
}
var total = s.length;
var totalMinusOne = total - 1;
for(i in 0...total) {
    trace(s[totalMinusOne - i]);    
} 
```

是否有更多优化可用于消除阵列的可能性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-06T01:17:33.093

让我感到困扰的是，您必须复制该列表，但是……这很讨厌。我的意思是，数据结构已经是一个数组，如果那是它的正确数据格式的话。比 Array（“[]”）复制它更好的东西（更少的内存碎片和重新分配）可能是链表或哈希。

但是如果我们使用数组，那么我们应该使用数组理解（[http://haxe.org/manual/comprehension](http://haxe.org/manual/comprehension)），至少在 Haxe 3 或更好的版本中：

```
var s = array(for (i in a) i); 
```

理想情况下，至少对于多次访问的大型迭代器，应该缓存 s。

要读回数据，您可以做一些不那么冗长但非常讨厌的事情，例如：

```
for (i in 1-s.length ... 1) {
    trace(s[-i]);
} 
```

但这不是很可读，如果你追求速度，那么创建一个全新的迭代器只是为了循环数组无论如何都是笨重的。相反，我更喜欢稍微长一点，但更干净，可能更快，可能更少内存：

```
var i = s.length;
while (--i >= 0) {
    trace(s[i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-06T17:48:47.817

首先，我同意 Dewi Morgan 复制迭代器生成的输出来反转它，这在某种程度上**违背了它的目的**（或至少它的一些好处）。不过有时候还好。

现在，关于一个技术答案：

根据定义，Haxe 中的基本迭代器只能计算*下*一次迭代。

关于**为什么**迭代器默认是单面的，以下是我们可以注意到的：

1.  如果迭代器可以前后运行，那么 Iterator 类将花费更多时间来编写。
2.  并非所有迭代器都在集合或数字序列上运行。

> 例如 1：在标准输入上运行的迭代器。
> 
> 例如 2：在抛物线或更复杂的球轨迹上运行的迭代器。
> 
> 例如 3：略有不同，但考虑在非常大的单链表（例如 class `List`）上运行迭代器的性能问题。一些迭代器可以在迭代过程中被中断（例如 Lambda.has() 和 Lambda.indexOf() 一旦有匹配就返回，所以你通常不想把迭代的东西想成一个集合但是更像是一个可中断的系列或逐步迭代的过程）。

虽然这并不意味着您不应该在需要时定义双向迭代器（我从未在 Haxe 中做过，但似乎并非不可能），但绝对拥有双向迭代器并不是那么自然，并强制迭代器像那样会使编码变得复杂。

一个中间且更灵活的解决方案是简单地拥有`ReverseXxIter`您需要的地方，例如`ReverseIntIter`，或`Array.reverseIter()`（使用自定义 ArrayExt 类）。所以留给每个程序员写自己的答案，我认为这是一个很好的平衡；虽然一开始需要更多的时间和挫败感（每个人可能都有同样的问题），但您最终会更好地了解该语言，最终只会为您带来好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-31T14:51:35.340

补充[Dewi Morgan](https://stackoverflow.com/users/1316659/dewi-morgan)`for(let i = a.length; --i >= 0;) i;`的帖子，如果您想简化`while()` 方法，可以使用。如果您真的需要索引值，我认为`for(let i=a.length, k=keys(a); --i in k;) a[k[i]];` 是保持性能的最佳选择。还有一个`for(let i of keys(a).reverse()) a[i];`写得更干净，但它的迭代率增加了 1n 使用`.reduce()`

# php - PHP 模十进制

> ID：13569164
> 
> 赞同：13
> 
> 时间：2012-11-26T16:38:55.873
> 
> 标签：php, decimal, modulo

我怎么能用十进制值做模运算，因为 PHP 只能用整数做模数？

示例案例：

```
 echo 1.92 % 1000; // (int) 1, expected result should be 1.92 
```

有没有图书馆可以正确地做到这一点？

有关此模算术问题的更多信息：[https ://bugs.php.net/bug.php?id=34399](https://bugs.php.net/bug.php?id=34399)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-11-26T16:42:02.457

还有一个浮点[fmod()](http://www.php.net/manual/en/function.fmod.php)函数

```
echo fmod(1.92, 1000) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T16:43:01.790

[http://php.net/manual/en/function.fmod.php](http://php.net/manual/en/function.fmod.php)

我想你想要这个，这会返回浮动结果？

# php - PHP/AJAX 应用结构

> ID：13569168
> 
> 赞同：4
> 
> 时间：2012-11-26T16:38:59.493
> 
> 标签：php, jquery, ajax

我正在开发一个 PHP / AJAX 应用程序，它很快变得难以管理！

该应用程序的设计与桌面应用程序非常相似，因此几乎每个用户操作都会导致 AJAX 调用。

对于这些操作中的每一个，我都有一些 jQuery 将数据发布到我的 PHP 脚本并运行相应的 PHP 函数来处理服务器端操作。

这意味着在我的 jQuery 文件中我会有这样的东西：

```
$('.delete-project').on('click', function(){
     // Ajax request to http://myapp.co.uk/ajax/delete_project
});

$('.delete-user').on('click', function(){
     // Ajax request to http://myapp.co.uk/ajax/delete_user
});

$('.delete-keyword').on('click', function(){
     // Ajax request to http://myapp.co.uk/ajax/delete_keyword
}); 
```

我确信有更好的做事方式，但是通常如何避免大量类似的代码呢？上述操作可能会合并到一个“删除”ajax 请求中，该请求发布项目类型和数据库 ID，但我的许多函数发布不同的数据并需要不同的参数，因此在一个 jQuery 处理程序下不太适合。

我已经尝试找到一些关于如何将 AJAX 应用程序组合在一起的资源，但我能找到的只是关于发出 AJAX 请求等的初学者教程，而不是如何编写可扩展的 AJAX 应用程序。

为了清楚起见，我知道 AJAX 是如何工作的，我只是想找到实现它的最佳方法，以尽可能减少所需的 jQuery 和 PHP。

有什么好的资源可以处理这种事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:44:52.330

您可以通过使用 HTML 中的属性将所有这些合并到一个删除函数中，例如：

```
$('.delete').on('click', function(){
     var delete = $(this).attr('data-delete');
     // Ajax request to http://myapp.co.uk/ajax/delete_{delete}
}); 
```

那么您的 HTML 将类似于：

```
<a href="#" class="delete" data-delete="project">Delete</a> 
```

[有关数据属性的更多信息](http://html5doctor.com/html5-custom-data-attributes/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:01:38.393

不确定这是否会有所帮助，但您可以创建一些函数来随着代码的增长而减少代码。对于初学者，您可以通过将 jQuery .ajax 函数放在您自己的自定义包装函数中来防止重复 ajax 调用。例如：

```
function ajaxGet(myUrl, queryString, successCallback, errorCallback) {
    if(queryString) myUrl+= "?" + queryString;
    $.ajax({
         url: myUrl,
         type: "GET",
         data: null,
         success: function (res) {
             if(!successCallback) return;
             else successCallback(res);
         },
         failure: function (res) {
             if(!errorCallback) return;
             else errorCallback(res);
         }
}, 
```

通过创建包装函数，您可以传入所需的数据，而无需在每个单击函数中一遍又一遍地重复 $.ajax 调用代码。您还可以使用 post 为 ajax 调用创建类似的函数。然后，您可以动态构建 click 函数以进一步减少您的代码：

```
function buildClicks() {
    setupClick([url], [data], [success], [error], [$(elem)]);
    setupClick([url], [data], [success], [error], [$(elem)]);
    setupClick([url], [data], [success], [error], [$(elem)]);
}

//Setup clicks for each button or link

function setupClick(url, data, success, error, elem) {
    elem.click(function () {
        ajaxGet(url, data, success, error);
    });
} 
```

在此示例中，我假设您使用“GET”并添加查询字符串。您可以使用自定义“POST”函数轻松地将其调整为传递，例如 JSON 格式的对象。在这种情况下， [data] 将是一个对象而不是查询字符串。

抱歉，这段代码不是最清楚的。让我再解释一下。buildClicks 函数将允许您通过传入所需的数据在不同元素上设置多个点击事件。我不确定您是否正在传递任何数据，但上述函数将允许它。通过动态创建点击，您可以避免一遍又一遍地重复 .click 代码。只需在准备好的文档上调用 buildClicks 函数即可。

```
$(document).ready(function () { buildClicks(); }); 
```

注意：成功和错误回调是在您的调用成功完成或出错时执行的函数。如果您不想使用它们，可以省略它们或者可以传入 null。确保如果您确实传入函数，则在函数名称的末尾去掉“()”。否则，函数将在 ajax 调用成功或失败之前执行。例如：

```
ajaxGet("http://testurl.com", null, ajaxSuccess, ajaxFailure);

ajaxSuccess() {

}

ajaxFailure() {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T16:51:54.037

In my application I do quite a lot of ajax calls too. I found that the easiest way to do things was to create myself a wrapper for all ajax calls such as:

```
var MySite = function()
{

    AjaxWrapper : function(type,url,data,callback,noloading)
    {

        $.ajax({
            type: type,
            url: url,
            data: data,
            success:function(json)
            {

                if(json.status === true)
                {

                    if(typeof callback === 'function')
                    {

                        callback(json);

                    } else {

                        // A generic success handler

                    }

                } else {

                    // An error handler

                }

            }
        });

    };

}();

```

then you'd call it like:

```
MySite.AjaxWrapper("GET", "somehref", {}, function(json)
{

    // json has the result of your json callback
    // you could also make this a separate function
    // or not have it

});

```

this let's you call your ajax on just about anything you want. You could then use something like data attributes, or just the standard href for anything that requires ajax and add an event to all links that pass through this function. Or, if you wanted some to do certain things just make the callback function different for those.

I'm finding this hard to explain, but this is what I've used for a couple of ajax-rich projects and it makes things so much easier!

For an example for your case you could then use something like:

```
$('a[class|="delete"]').on("click", function()
{

    MySite.AjaxWrapper("POST", $(this).attr("href"), {param:number1}, DeleteHandler);

});

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T16:55:15.010

我这样做的方法是为所有操作提供一个功能：

```
$('.actions').on('click', function (e) {
    e.preventDefault();
    var action = $(this).data('action'),
        id = $(this).data('id');

    $.get('/local/handler.php', {
        'action': action,
        'id': id
    }, function () {
        // Callback stuff here
    });

}); 
```

和 HTML：

```
<a href="#" class="actions" data-action="delete-project" data-id="<?=$project_id?>">Delete Project</a>

<a href="#" class="actions" data-action="delete-user" data-id="<?=$user_id?>">Delete User</a>

<a href="#" class="actions" data-action="delete-keyword" data-id="<?=$keyword_id?>">Delete Keywork</a> 
```

PHP 文件应该有基于`action`执行请求操作的参数的 if 语句。

**编辑：**

*   这样您就不仅限于删除操作，因此您可以在将来扩展您的应用程序。

*   此外，如果不同的操作变成一个大列表（例如，多种删除、更新、添加），我将为每个操作创建一个单独的 PHP 文件，并将`include`它们放在一个主文件中。这将允许轻松缩放。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T16:45:01.583

您可以为该按钮设置一个 ID 属性和一个类似`submit-button`.

然后在其上挂起一个处理程序，`$('.submit-button')`同时使用 ID 属性值来定义要调用的 URL，如下所示：

```
$('.submit-button').on('click', function(){
    $action = $(this).attr('id'); //lets say the ID's value is 'delete_project'
    $url = 'http://myapp.co.uk/ajax/' + $action;
    // Ajax request to http://myapp.co.uk/ajax/delete_project is done
}); 
```

无论如何，任何倾向于像桌面应用程序的 Web 应用程序都只是一堆 JS 和少量 HTML，后面还有一些 PHP ......这总是很糟糕的可维护性......

我为此使用了 [extJs][1] 一次，这导致只使用 jQuery 及其模块，而无需（或只需要最少的）HTML 即可编写...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T16:48:58.070

不是复制粘贴解决方案，但在寻找如何构建 REST API 时，也许您会发现更多关于如何构建可扩展的客户端-服务器应用程序的想法。我发现 REST 是一个非常好的结构，可以在构建此类应用程序时保持清晰的服务器端 API，而且我确信也有关于如何干净地完成相应客户端部分的教程。

# .net - VB.net：提取和替换 HTML 的所有实例

> ID：13569182
> 
> 赞同：2
> 
> 时间：2012-11-26T16:39:43.207
> 
> 标签：.net, regex, vb.net, replace

我正在我们的一个遗留系统中从格式良好的 HTML 中操作/提取数据。我需要使用正则表达式来解析 HTML，找到某些模式，提取数据，并返回一些修改后的 HTML。我知道正则表达式和 HTML 永远不是答案，但鉴于我确切知道数据来自哪里并且数据结构正确，我相信这将适用于特定情况。

我正在使用的 HTML 具有以下模式：

```
<i>Name1</i>: Some text goes here<br/>
<i>Name2</i>: Some different text goes here<br/>
<i>Name3</i>: Some other different text goes here<br/> 
```

我需要将 HTML 更改为以下内容：

```
<i>Name1</i><p>Some text goes here</p>
<i>Name2</i><p>Some different text goes here</p>
<i>Name3</i><p>Some other different text goes here</p> 
```

基本上，我想获取内部文本，将其包装在 ap 标签中，然后删除尾随 br。

我想做如下的事情：

```
Dim HTML as String = [The HTML goes here]
html = Regex.Replace(html, "</i>:(.+?)<br\s*\/?>", "</i><p>(.+?)</p>", RegexOptions.Multiline) 
```

但它显然不起作用。

在 VB.net 中，如何用新的 HTML 替换所有需要的 HTML 实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:44:24.490

我建议使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)来解析和操作 HTML（特别是如果 HTML 的格式不规则）。源代码下载附带了一堆示例项目，因此您可以了解如何使用它。

一般来说[，正则表达式不是解析 HTML 的好解决方案](https://stackoverflow.com/a/1732454/1583)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:44:19.040

试一试：

```
Dim HTML as String = [The HTML goes here]
Dim evaluator As MatchEvaluator = Function(m As Match)
                                  Return "</i><p>" & m.Groups(1).Value & "</p>"
                                  End Function
html = Regex.Replace(html, "</i>:(.+?)<br\s*\/?>", evaluator, RegexOptions.Multiline) 
```

# php - htaccess 重定向网站

> ID：13569183
> 
> 赞同：3
> 
> 时间：2012-11-26T16:39:43.890
> 
> 标签：php, apache, .htaccess, redirect

我正在尝试将所有访问者从我使用的旧域重定向到新域。

这是我使用的 .htaccess 文件的内容

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !foobar.com$ [NC]
RewriteRule ^(.*)$ http://foobar.com/$1 [L,R=301] 
```

其中[http://foobar.com](http://foobar.com)是新域。

上面的代码有效，但前提是访问者键入[http://olddomain.com](http://olddomain.com)。

我的意思是当访客输入

[http://olddomain.com/terms.php](http://olddomain.com/terms.php)他应该被重定向到[http://foobar.com/terms.php](http://foobar.com/terms.php)

我希望无论访问者在旧域名之后键入什么（例如[http://olddomain.com/privacy.php](http://olddomain.com/privacy.php)、[http://olddomain.com/users.php](http://olddomain.com/users.php)等），他们都会访问 [http://foobar.com /](http://foobar.com/)不是[http://foobar.com/privacy.php](http://foobar.com/privacy.php)等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:11:27.177

```
RewriteEngine On
RewriteCond %{HTTP_HOST} !^foobar\.com$ [NC]
RewriteRule .* http://foobar.com%{REQUEST_URI} [L,R=301] 
```

# objective-c - iOS - 蓝牙设备断开连接时获取通知

> ID：13569188
> 
> 赞同：2
> 
> 时间：2012-11-26T16:39:54.047
> 
> 标签：objective-c, ios, bluetooth

有没有办法在蓝牙设备与 iPhone 断开连接时收到通知？

我们尝试了车载免提“Parrot v5.11C”和 iMac 无线键盘。这两个设备都被 iPhone 的原生蓝牙识别，但是使用 CoreBluetooth 框架和 CBCentralManager，我们没有得到任何外围设备列表。我们只想在特定设备（由用户选择）断开连接时收到通知。

我们认为我们尝试过的设备不兼容 BLE（低功耗蓝牙），因此 CoreBluetooth 框架找不到它们。

**有没有其他方法可以列出附近的设备，选择一个并在断开连接时收到通知？**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-27T22:12:52.317

您必须知道是要使用低功耗蓝牙（CoreBluetooth.framework）还是“经典”蓝牙（ExternalAccessory.framework）。我相信您的配件不具备 BLE 功能，只有蓝牙功能。如果您查看 Apple EADemo 的示例，请查看以下行：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(_accessoryDidDisconnect:) name:EAAccessoryDidDisconnectNotification object:nil]; 
```

使用这个示例来获取更多信息和这个*NSNotificationCenter*。

# c++ - 如何在 Visual Studio 的 C++ 中使用扩展的 unix 字符？

> ID：13569191
> 
> 赞同：0
> 
> 时间：2012-11-26T16:40:02.050
> 
> 标签：c++, encoding

我们正在使用韩国字体和 freetype 库并尝试显示韩国字符。但它显示了一些其他字符而不是象形文字代码：

```
std::wstring text3 = L"놈"; 
```

打韩文有什么技巧吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:53:48.603

For maximum portability, I'd suggest avoiding encoding Unicode characters directly in your source code and using `\u` escape sequences instead. The character 놈 is Unicode code point U+B188, so you could write this as:

```
std::wstring text3 = L"\uB188"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T16:48:22.750

问题是源代码的编码是什么。很可能是UTF-8，这也是不使用wstring的原因之一。使用常规字符串。有关我处理字符的方式的更多信息，请参阅[http://utf8everywhere.org](http://utf8everywhere.org)。

# google-chrome - TypeScript 源地图文件不适用于 Chrome

> ID：13569192
> 
> 赞同：7
> 
> 时间：2012-11-26T16:40:04.357
> 
> 标签：google-chrome, typescript, web-essentials, source-maps

我正在尝试让 TypeScript 源代码调试在 Chrome 中工作，但我遇到了两个特定且可能相关的问题。

首先是由 TypeScript/WebEssentials 编译器生成的注释应该识别源映射文件的位置，如下所示：

`//sourceMappingUrl=MySourceFile.js.map`

但 Chrome 不会读取该文件。似乎期望评论将如下所示：

`//@ sourceMappingUrl=MySourceFile.js.map`

如果我手动将评论更改为该评论并刷新我的页面，那么对所有 .ts 文件的引用就会神奇地显示为 Chrome 开发人员工具中的源代码。

但是，这导致了我的第二个问题，因为文件实际上并没有被加载。*Chrome应该*尝试下载的 .ts 源文件是 .ts `http://localhost/MySourceFile.ts`，但它*实际*尝试下载的是.ts 源文件`http://localhost/C:/source/web/MySourceFile.ts`。这是有道理的，因为 MySourceFile.js.map 的打开属性如下所示：

`{"version":3,"file":"tmp1523.tmp","sources":["C:/source/web/MySourceFile.ts"`

但这显然不适用于 Chrome，因为它将源地图位置解释为完全相对的，并且 IIS（非常正确）不会提供任何看起来像`http://localhost/C:/source/web/MySourceFile.ts`.

那么，对于这两个问题，是 Chrome 还是 TypeScript source-map 功能做错了呢？这样做的推荐方法是什么？

我正在使用 Chrome 25.0.1323.1 dev-m，TypeScript 0.8.1 和 WebEssentials 1.8.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:53:03.213

这是[Web Essentials](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6) 1.8.5版（当前可从 Visual Studio 库中获得的版本）的问题。最新的夜间版本（在撰写本文时[http://madskristensen.net/custom/webessentials2012.vsix](http://madskristensen.net/custom/webessentials2012.vsix)）修复了问题并正确生成地图链接。

# jquery - jQuery - 检查是否在数组中？怎么了？

> ID：13569194
> 
> 赞同：0
> 
> 时间：2012-11-26T16:40:11.067
> 
> 标签：jquery, variables, if-statement

**你好 Stackoverflow，我有点卡住了:(**

我正在编写一个代码，其中有一些具有特定 id 的 div，例如 1、2 和 3。

现在我希望它检查我的数字是否是变量或数组的一部分，它应该`console.log`是那个 div 被锁定。但我真的不知道如何解决这个问题？谁能帮我？

我试过这个：

```
var f = getXY(e.pageX, e.pageY);
var obj = [1,2,3,4];
var arr = obj;

if ($.inArray(f, obj)) {
    console.log("Dette er låst");
} else {
    if (f) {
        $fields.removeClass('hover');
        $('#f' + f).addClass('hover');   
    }
} 
```

我想在数组或变量中有一个以上的数字。

多谢你们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T16:43:28.963

jQuery[`inArray()`](http://api.jquery.com/jQuery.inArray/)返回找到元素的索引。所以你的条件应该是：

```
if ($.inArray(f, obj) > -1) 
```

# c++ - 如何使用位运算来代替模数和除法运算符？

> ID：13569195
> 
> 赞同：6
> 
> 时间：2012-11-26T16:40:13.517
> 
> 标签：c++, c, module, bit-manipulation, division

我有这行代码：

```
 base_num = (arr[j]/base)%256; 
```

此行循环运行，操作“/”和“%”需要大量资源和时间来执行。我想更改此行并应用位操作以最大化程序性能。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T16:46:48.400

如果 base 是 2 的 n 次方，您可以将除法替换为向右移动 n 位。然后，由于取整数的 mod 256 等价于取其最后 8 位，因此您可以将其与 0xFF 进行与运算。或者，如果您将其与 256*base 和然后将 n 向右移位，则可以反转操作。

```
base_num = arr[j] >> n;
base_num &= 0xFF; 
```

当然，任何半体面的编译器都应该能够为您做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T16:49:12.100

为您的编译器选项添加`-O1`或更高版本，编译器将为您完成。

在 gcc中，根据文档，`-O1`打开哪个，`-ftree-slsr`

> 对树木进行直线强度降低。这可以识别涉及乘法的相关表达式，并在可能的情况下用成本较低的计算替换它们。

这将替换模数和基数（如果它是常数）。但是，如果您知道基数将是 2 的某个非常数幂，则可以重构周围的代码以提供`log2`该数字的 the 数，然后`>>`减去该数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:53:38.330

You could also just declare `base_num` as an 8 bit integer:

```
#include <stdint.h>

uint8_t base_num;
uint16_t crap;
crap = 0xFF00;
base_num = crap; 
```

If your compiler is standards compliment, it will put the value of `byte(0xFF00)` (`0x00`) into `base_num`.

I have yet to meet a compiler that does saturated arithmetic in plain C (neither C++ or C#), but if it does, it will put the value of `sat_byte(0xFF00)` which being greater than `0xFF`, it will put `0xFF` into `base_num`.

Keep in mind your compiler will warn you of a loss of precision in this instance. Your compiler may error out in this case (Visual Studio does with `Treat Warnings as Errors` On). If that happens, you can just do:

```
base_num = (uint8_t)crap; 
```

but this seems like what you are trying to avoid.

What you are trying to do it seems is to remove the modulus operator as that requires a division and division is the most costly basic arithmetic operation. I generally would not think of this as a bottleneck in any way as any "intelligent" compiler (even in debug mode) would "optimize" it to:

```
base_num = crap & 0xFF; 
```

on a supported platform (every mainstream processor I've heard of - x86, AMD64, ARM, MIPS), which should be any. I would be dumbfounded to hear of a processor that has no basic AND and OR arithmetic instructions.

# php - 对 PHP 中的 Java HashMap 替代方案的建议？

> ID：13569196
> 
> 赞同：1
> 
> 时间：2012-11-26T16:40:18.743
> 
> 标签：php, mysql, hashmap

我有一个带有这种表的数据库，有超过 1000 万行。

```
ID  colA    colB    Length
1   seq1    seq11   1   
2   seq1    seq11   11  
3   seq3    seq33   21  
4   seq3    seq33   14 
```

我想先循环 colA，获取相关的 colB 值，然后检查是否还有其他相同值的出现。例如在 colB (seq11) 中有 2 次出现 colA(seq1)，这次我必须将它们组合起来并输出长度的总和。与此类似：

```
ID  colA  colB   Length
1   seq1  seq11  12
2   seq3  seq33  35 
```

我有点 Java，但因为我的同事用 PHP 编写了所有东西，这只是一个补充，我需要一个 PHP 解决方案。使用Java，我会使用hashmap，这样我就有colA数据一次，只需增加“长度列”的值。

* * *

我尝试了此查询以按出现次数分组：

```
SELECT COUNT(*) SeqName FROM SeqTable GROUP BY SeqName HAVING COUNT(*)>0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:02:29.157

这在 SQL 中而不是在编程逻辑中很容易实现：

```
SELECT colA, colB, SUM(Length) as `length_sum`
FROM SeqTable
GROUP BY colA, colB 
```

当然，您仍然需要 PHP 来遍历结果集并对数据做任何您想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:03:26.040

In PHP you can use an array like an hash map

```
$array = Array();
$array['seq1'] = Array();
$array['seq1']['seq11'] = 0;
$array['seq1']['seq11']++; 
```

Or you can use an SQL query like this one:

```
select id,colA,colB,sum(Length) as Length from {tableName} group by colA,colB order by colA, colB; 
```

# java - Java中日期和字符串的格式化和解析

> ID：13569197
> 
> 赞同：0
> 
> 时间：2012-11-26T16:40:23.127
> 
> 标签：java, android

我刚开始使用 Java (Android) 并陷入了日期格式问题。我有一个小表格，您可以在其中输入项目名称并在日历上选择开始日期。Startdate 和 Projectname 会自动输入到数据库中，然后预定义的 Tasks 会自动输入到数据库中。

*   任务 1 截止日期为开始日期，
*   任务 2 是 Startdate 加上 x 天 = DueDate2，
*   任务 3 是 DueDate2 加上 x 天 = DueDate3

我现在想出了下面的源代码，除了我的日期格式错误之外，一切正常。出于某种原因，我的格式在 newDateStr 中是正确的，但是当我再次将其解析为日期对象时，格式会发生变化并且不正确。我看不到我的错误，有人可以帮忙吗？

我的理解是：

1.  设置输入日期的日期格式（curFormat）
2.  设置目标日期格式（postFormater）
3.  此时解析您的日期，它是一个字符串，将其转换为日期对象（使用 curFormat）
4.  格式化此日期以获得目标日期格式（使用 postFormater），现在它又是一个字符串
5.  再次解析它以使其恢复为日历所需的日期
6.  使用日历实例，setTime（此处为格式化日期）并添加 x 天
7.  格式化日期以获取目标日期格式（使用 postFormater），现在它又是一个字符串
8.  因为我再次需要一个日期对象，所以我必须再次解析它。

    ```
    // The format of your input date string
    SimpleDateFormat curFormater = new SimpleDateFormat("MM/dd/yyyy"); 

    // The format of your target date string
    SimpleDateFormat postFormater = new SimpleDateFormat("dd-MM-yyyy"); 

    // The calendar instance which adds a locale to the date
    Calendar cal = Calendar.getInstance();

    // Parse the string (pro.getStart()) to return a Date object 
    Date dateObj = curFormater.parse(pro.getStart()); 

    // Format the Date dd-MM-yyyy
    String newDateStr = postFormater.format(dateObj);

    // Parse the string to return a Date object
    Date Startdate = postFormater.parse(newDateStr);

    while (cur.isAfterLast() == false) 
    {
        Integer delayTime = cur.getInt(cur.getColumnIndex("DelayTime"));    
    if (flag == false)
    {
        dateInString = Startdate;
        flag = true;
    }else{
        cal.setTime(dateInString);
        // add the extra days
        cal.add(Calendar.DAY_OF_MONTH, delayTime);
        // Format the Date dd-MM-yyyy
        newDateStr =  postFormater.format(cal.getTime()); 
        // Parse the string to return a Date object
        dateInString =  postFormater.parse(newDateStr);

    Log.i("newDateStr Format",newDateStr.toString()); // 29-11-2012
    Log.i("dateInString parse",dateInString.toString()); // Thu Nov 29 00:00:00 GMT 2012 
    ```

我希望有人看到我的错误。非常感谢您提前！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:55:28.027

`Calendar`每次循环时不要一直将返回转换为字符串。保留一个，然后将延迟累积到位...

```
SimpleDateFormat fmt = new SimpleDateFormat("dd-MM-yyyy");
Calendar cal = Calendar.getInstance();

// Set the date once
cal.setTime(fmt.parse(pro.getStart()));

while(!cur.isAfterLast()) {
    // Accumulate additional days
    Integer delayTime = cur.getInt(cur.getColumnIndex("DelayTime"));
    cal.add(Calendar.DAY_OF_MONTH, delayTime);
}

String endDate = fmt.format(cal.getTime()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:00:29.153

一个`java.util.Date`对象中没有任何格式，也没有你用来解析它的格式的内存。其`toString`方法的输出，以及您从中获得的输出`dateInString.toString()`将始终采用您所看到的默认 JDK 格式：`Thu Nov 29 00:00:00 GMT 2012`

无论何时要显示它，都必须使用格式化程序将其转换为格式化的字符串。你不能这么说“格式化日期对象”。（UI 框架往往内置了自动执行此操作的工具。）

# mysql - 如何从 Drupal 数据库中获取 post slug

> ID：13569212
> 
> 赞同：1
> 
> 时间：2012-11-26T16:41:14.793
> 
> 标签：mysql, wordpress, drupal

我正在尝试将 Drupal 帖子导出到 Wordpress（这本身就是一件麻烦事）。我不知道如何维护博客文章的 URL。其中一些是定制的：

名为“土壤故事”的博客`blog/2012/03/03/soil-story`位于 Drupal 中。一个名为 Welcome John Doe 的文章很简单`/john`

是否有创建这些 URL 的 Drupal 函数？它在哪里存储定制的博客文章？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:48:11.370

您可以使用该`url`方法获取 URL 别名。

```
$url = url('node/' . $nid); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:01:24.150

您应该能够使用以下命令获取节点的别名`drupal_lookup_path`：

```
// alias: return an alias for a given Drupal system path (if one exists).
$alias = drupal_lookup_path('alias', $node->nid); 
```

Drupal 手册：[drupal_lookup_path](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_lookup_path/7)或相反，从别名查找节点/内部路径：[drupal_get_normal_path](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_get_normal_path/7)。

[Rawkode 发布的url 函数](http://api.drupal.org/api/drupal/includes!common.inc/function/url/7)功能似乎差不多，所以我想这取决于您的个人喜好。

另见：[http ://daipratt.co.uk/how-to-get-the-path-of-a-node-from-the-node-id-in-drupal/](http://daipratt.co.uk/how-to-get-the-path-of-a-node-from-the-node-id-in-drupal/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-05T16:09:09.740

我发现上面的内容非常有用，因为我希望在查找时从数据库中获得所需的信息，而不是通过使用函数。它给了我一个很好的起点，但是在它所在的位置运行它只会出错，因为这些不是正确的列名。请记住，如果您不处理数据库副本，这会更新内容并且会破坏所有内容。此代码将修复它：

```
 UPDATE `url_alias` 
   SET source=SUBSTRING_INDEX(`source`, '/', -1), 
       alias=SUBSTRING_INDEX(`alias`, '/', -1) 
   WHERE 1 
```

因为我不擅长做事我只是添加了两列 nid 和 slug 然后运行这个查询

```
 UPDATE `url_alias` 
   SET nid=SUBSTRING_INDEX(`source`, '/', -1), 
       slug=SUBSTRING_INDEX(`alias`, '/', -1) 
   WHERE 1 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-26T17:13:04.863

我在 Drupal 数据库中找到了 url_alias 表，并运行了以下 SQL 语句：

```
 UPDATE `url_alias` 
   SET src=SUBSTRING_INDEX(`src`, '/', -1), 
       dst=SUBSTRING_INDEX(`dst`, '/', -1) 
   WHERE 1 
```

src 现在是 nid 而 dst 现在是 slug。我可以重命名它们，然后`INSERT INTO wp_posts`作为`post_name`

# ruby - 带有多个参数的 Ruby gsub / 正则表达式

> ID：13569214
> 
> 赞同：0
> 
> 时间：2012-11-26T16:41:18.553
> 
> 标签：ruby, regex

我是 ruby​​ 新手，我正在尝试解决一个问题。

我正在解析几个要删除具有不同值的标题的文本字段。当标题始终相同时，它可以正常工作：

```
variable = variable.gsub(/(^Header_1:$)/, '') 
```

但是当我提出几个论点时它不起作用：

```
variable = variable.gsub(/(^Header_1$)/ || /(^Header_2$)/ || /(^Header_3$)/ || /(^Header_4$)/ || /^:$/, '') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:48:47.430

您可以使用`Regexp.union`：

```
regex = Regexp.union(
  /^Header_1/,
  /^Header_2/,
  /^Header_3/,
  /^Header_4/,
  /^:$/
)
variable.gsub(regex, '') 
```

请注意，这`^something$`不适用于包含超过`something`:)内容的字符串

原因`^`是匹配字符串的开头和字符串`$`的结尾。

所以我故意删除`$`。

当您只需要删除匹配的字符串时，您也不需要括号。

你也可以像这样使用它：

```
headers = %w[Header_1 Header_2 Header_3]
regex = Regexp.union(*headers.map{|s| /^#{s}/}, /^\:$/, /etc/)
variable.gsub(regex, '') 
```

当然，您可以在不明确定义的情况下删除标题。

标题后很可能有空格？

如果是这样，您可以简单地执行以下操作：

```
variable = "Header_1 something else"
puts variable.gsub(/(^Header[^\s]*)?(.*)/, '\2')
#=>  something else

variable = "Header_BLAH something else"
puts variable.gsub(/(^Header[^\s]*)?(.*)/, '\2')
#=>  something else 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:48:42.470

只需使用适当的正则表达式：

```
variable.gsub(/^(Header_1|Header_2|Header_3|Header_4|:)$/, '') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:54:08.093

如果标题始终是相同的格式`Header_n`，其中`n`是一些整数值，那么您可以大大简化您的正则表达式：

```
/Header_\d+/ 
```

将找到以下每一项：

```
%w[Header_1 Header_2 Header_3].grep(/Header_\d+/)

[
    [0] "Header_1",
    [1] "Header_2",
    [2] "Header_3"
] 
```

调整它以处理查找单词，而不是子字符串：

```
/^Header_\d+$/ 
```

或者：

```
/\bHeader_\d+\b/ 
```

如前所述，使用`Regexp.union`是一个好的开始，但盲目使用会导致模式非常缓慢或效率低下，因此请提前考虑并通过提供有用的子模式来帮助引擎：

```
values = %w[foo bar]
/Header_(?:\d+|#{ values.join('|') })/
=> /Header_(?:\d+|foo|bar)/ 
```

不幸的是，Ruby 没有与 Perl 的 Regexp::Assemble 模块等效的模块，后者可以从大的单词列表中构建高度优化的模式。在 Stack Overflow 上搜索它可以做什么的例子。例如：

```
use Regexp::Assemble;

my @values = ('Header_1', 'Header_2', 'foo', 'bar', 'Header_3');
my $ra = Regexp::Assemble->new;
foreach (@values) {
    $ra->add($_);
}
print $ra->re, "\n";
=> (?-xism:(?:Header_[123]|bar|foo)) 
```

# css - 带有 sass 的原始 CSS 样式表

> ID：13569222
> 
> 赞同：2
> 
> 时间：2012-11-26T16:41:38.647
> 
> 标签：css, sass, compass-sass

我正在使用 Compass 构建一组 Sass 样式表。

我还有一个 bootstrap.css 的缩小副本，我想将它包含在我部署的站点中。但是，我不确定将它保存在哪里或如何处理它。

如果我将它重命名为 bootstrap.scss，那么 Compass 会选择它并编译它。这需要几秒钟，我真的不需要增加构建时间。

如果我将其命名为 bootstrap.css，那么它会被忽略。

理想情况下，会有一个标志，或某种方式告诉指南针简单地复制该文件而不是尝试编译它。那存在吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:11:10.043

如果你的 CSS 文件不应该被编译成你完成的 CSS 文件，那么它应该放在你编译的 CSS 文件所在的任何地方。然而，这通常不是我们想要的行为：一个普通的 CSS 会`@import`生成额外的 HTTP 请求。

由 Sass 编译 CSS 文件并没有真正的缺点，因为该文件的编译应该被缓存（除非你正在删除你的`.sass-cache`文件？）。Sass 应该仅在文件或依赖于更改的文件时重新编译文件。

# c++ - MFC C++ 将枚举值插入到 CArray

> ID：13569225
> 
> 赞同：1
> 
> 时间：2012-11-26T16:41:45.140
> 
> 标签：c++, mfc, enums

我如何遍历枚举中的值并将它们插入到 CArray（作为它们的 int）。
或者
我如何确定枚举中的值的数量。

我的目标：来自：
枚举 MyEnum{DISCONNECTED=0,CONNECTED=1);
To：
具有 2 个条目的 CArray，其中包含枚举整数。

谢谢 ！
第二个问题是不可能的，我需要它，因为我有用于许多项目的通用类，并且由于我无法以通用的正确方式将枚举发送到该类，我将发送一个与枚举值具有相同规则的 CArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:58:13.387

你不能这样做，但我不明白你为什么需要这样做。枚举值是常量，因此您可以简单地查看枚举的定义并自己查看值:)

# java - 如何将 String 变量解析为 Java 中的任何数据类型？

> ID：13569232
> 
> 赞同：6
> 
> 时间：2012-11-26T16:42:00.633
> 
> 标签：java, string, parsing, object, reflection

我想构建一个可以`Field`通过 Java 反射将字符串值转换为给定对象数据类型的方法。

这是我的代码：

```
String value = ...;

Class<? extends MyObject> clazz = getClazz();

Field f = clazz.getDeclaredField("fieldName");
boolean fieldIsAccessible = f.isAccessible();
if (!fieldIsAccessible) {
   f.setAccessible(true);
}

f.getType().cast(value);

if (!fieldIsAccessible) {
    f.setAccessible(false);
} 
```

当我第一次尝试运行此代码时，我收到此异常`java.lang.ClassCastException`。

我想转换`value`为 class `java.math.BigDecimal`。

我的代码缺少什么？

**编辑：** [查看](https://stackoverflow.com/a/13643143/363573)我想出的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T16:52:19.367

您可以为具有这样的字符串构造函数的类进行此操作： `f.getType().getConstructor( String.class ).newInstance( value );`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T16:44:13.580

在 Java 中，没有将 String 转换为任意类的实例的通用方法。许多类根本不支持这种转换。对于那些支持它的人来说，没有标准的接口。

您最好的选择是寻找一个接受 String 作为其唯一参数的构造函数。当然，并非每个类都提供这样的构造函数，并且无法保证语义会如您所愿。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-15T13:47:11.273

有一个名为 type-parser 的 Github 项目（MIT 许可），它将字符串值转换为所需的数据类型

[这是来自GitHub](https://github.com/drapostolos/type-parser)的项目描述

> 这是一个轻量级库，除了将字符串解析为给定类型之外什么都不做。支持所有适用的 java 类，如 Integer、File、Enum、Float 等，包括通用 Collection 类型/接口，如 List、Set、Map、数组甚至自定义类型。也可以注册自己的解析器。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:45:34.310

正如 maerics 所说，您不能只将 String 转换为数据类型。您的意思是“我如何从字符串中解析 BigDecimal”，答案是……

```
fieldName = new BigDecimal(value); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T16:58:32.423

如果对象不为 null 并且不能分配给类型 T，则 Class cast 方法将引发 ClassCastException。只有少数几种类型的变量可以分配 String 引用，即 String、Object、Serializable、Comparable 和 CharSequence。

许多（但不是全部）类都有基于字符串生成对象实例的方法。在某些情况下，包括 BigDecimal，有一个构造函数采用字符串表示新对象的值。您可以使用指定单个 String 参数的 Class getDeclaredConstructor 方法来获取此类构造函数的 Constructor 对象（如果有的话）。但是，如果不调用某些 setXXX 方法，您将无法获得有用的对象，并且这种方法仅限于那些具有正确构造函数形式的类。

您可能正在尝试解决一些更高级别的问题，可能与序列化和反序列化有关。这个问题可能比您当前的问题更容易解决。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-14T11:27:22.247

也许没有回答如何将 String 转换为 java 类型的问题，因为没有通用的方法。但是有一个图书馆可以帮助你解决这个问题。请参阅[类型解析器](https://github.com/drapostolos/type-parser/wiki/User-Guide)库。上面的代码截图如下所示：

```
 String value = ...;

    Class<? extends MyObject> clazz = getClazz();

    Field f = clazz.getDeclaredField("fieldName");
    boolean fieldIsAccessible = f.isAccessible();
    if (!fieldIsAccessible) {
       f.setAccessible(true);
    }

    TypeParser parser = TypeParser.newBuilder().build();

    // parse value to whatever type f.getGenericType() returns
    Object o = parser.parseType(value, f.getGenericType());

    if (!fieldIsAccessible) {
        f.setAccessible(false);
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-12-26T08:10:06.630

我也经历过同样的场景。粘贴我在做了一些研究后编写的代码。小伙伴们觉得有什么不对的地方请指教。

```
 private <T extends Object> T convertStringToType(String value,Class type){

    if( type.equals(Double.class)){
        return (T) Double.valueOf(value);
    }
    else if(type.equals(Integer.class)){
        if(value.contains(".")){
            BigDecimal bigDecimal= new BigDecimal(value);
            return (T) (Integer)bigDecimal.intValue();
        }
        return (T) Integer.valueOf(value);
    }
    else{ // add other type which you need
        throw new Exception("Invalid type");
    }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-22T06:24:00.820

您可以使用创建一个小方法`Supplier`并使用以下方法读取字符串`Scanner`：

```
 private static <T> T getTokenValue(Supplier<T> supplier) {

       return supplier.get();
    }

    String line = "12.0";

    Scanner scanner = new Scanner(line);
    double value = getTokenValue(scanner::nextDouble); 
```

如果我们需要获取 int，调用会像，

```
getTokenValue(scanner::nextInt) 
```

该代码是一个示例，可以使用`vavr`依赖项和 Try 子句进行改进，这些子句可以使用更通用的代码引发自定义异常。

```
Try.ofSupplier(supplier).getOrElseThrow(new RuntimeException("Custiome message")); 
```

varv 有很多控制逻辑，可以用来编写更通用的代码。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-30T10:15:42.907

这是我想出的解决方案：

```
public static Object parse(String value, Class<?> clazz) throws NotSupportedException {
    String canonClassName = clazz.getCanonicalName();

    if (canonClassName.equalsIgnoreCase("java.math.BigDecimal")) {
        return new BigDecimal(value);
    }

    // Add other supported classes here ...

    throw new NotSupportedException("The class [" + canonClassName  + "] is not supported.");
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-02T14:21:41.233

我在这个线程中找到了答案：[如何将字符串对象转换为布尔对象？](https://stackoverflow.com/questions/1538755/how-to-convert-string-object-to-boolean-object)- 您可以使用以下方法将字符串解析为布尔值：

```
Boolean boolean1 = Boolean.valueOf("true");
boolean boolean2 = Boolean.parseBoolean("true"); 
```

# javascript - jQuery Mobile - 如何强制重新创建页面 - pagebeforecreate 事件

> ID：13569235
> 
> 赞同：1
> 
> 时间：2012-11-26T16:42:11.393
> 
> 标签：javascript, jquery, json, jquery-mobile

我有一个小型 jQuery 移动网站。

*   这都是单个`.html`文件
*   它有一些编辑功能（查看、编辑、保存）
*   一切都适用`ajax/json/web service`

我的大部分页面都使用来自 的数据`web service, via AJAX & JSON`，所以我经常使用以下内容：

```
$(document).on( 'pagebeforecreate', '#monday', function() {

// do some stuff on before create, load data with AJAX

}); 
```

现在，我如何**强制该页面重新创建（pagebeforecreate 事件）**，以便再次运行内部的 AJAX（从服务器获取最新数据）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:57:22.243

使用`pageBeforeShow`而不是`pageBeforeCreate`.

来自 jqm[文档](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)，关于创建事件。

> 请注意，这些事件只会在每个“页面”触发一次，而不是显示/隐藏事件，它会在每次显示和隐藏页面时触发。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:35:05.777

我建议创建一个函数，您可以在`pagebeforecreate`事件触发时以及您想要更新站点时调用该函数：

```
function myUpdateFunc() {
    // load data w/ AJAX
}

$(document).on('pagebeforecreate', '#monday', function () {
    //do some stuff on `pagebeforecreate`

    myUpdateFunc();
}); 
```

现在，您可以`myUpdateFunc()`从声明的范围内的任何位置调用该函数。

此外，您可以使用`.trigger()`触发事件，在事件的事件处理程序中运行代码：

```
$('#monday').trigger('pagebeforecreate'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:37:13.383

使用以下代码强制页面重新创建/刷新：

```
function refreshPage() {
  $.mobile.changePage(
    window.location.href,
    {
      allowSamePageTransition : true,
      transition              : 'none',
      showLoadMsg             : false,
      reloadPage              : true
    }
  );
} 
```

从[这里](http://scottwb.com/blog/2012/06/29/reload-the-same-page-without-blinking-on-jquery-mobile/)获取和测试。

# c# - 比较不同来源的新旧内容的通用方法

> ID：13569250
> 
> 赞同：0
> 
> 时间：2012-11-26T16:43:01.190
> 
> 标签：c#, refactoring

我每 10 秒向 Web 服务发送三个 http 请求。响应被传递给缓存类中的三个方法（每个 http 查询/请求一个），用于检查响应内容自上次以来是否发生了变化。

我将原始响应内容转换为字符串并将其与旧响应进行比较，旧响应存储为缓存类中的私有字符串。它工作正常，但该方法有很多重复的代码，如您所见：

```
 class Cache
{
    private HubClient _hubClient;
    private string oldIncidentAppointment;
    private string oldIncidentGeneral;
    private string oldIncidentUntreated;

    public Cache(HubClient hubClient)
    {
        _hubClient = hubClient;
    }

    public bool IsIncidentAppointmentNew(string currentIncidentAppointment)
    {
        if (XElement.Equals(oldIncidentAppointment, currentIncidentAppointment))
        {
            return false;
        }
        else
        {
            oldIncidentAppointment = currentIncidentAppointment;
            _hubClient.SendToHub();
            return true;
        }
    }

    public bool IsIncidentUntreatedNew(string currentIncidentUntreated)
    {
        if (XElement.Equals(oldIncidentUntreated, currentIncidentUntreated))
        {
            return false;
        }
        else
        {
            oldIncidentUntreated = currentIncidentUntreated;
            _hubClient.SendToHub();
            return true;
        }
    }

    public bool IsIncidentGeneralNew(string currentIncidentGeneral)
    {
        if (XElement.Equals(oldIncidentGeneral, currentIncidentGeneral))
        {
            return false;
        }
        else
        {
            oldIncidentGeneral = currentIncidentGeneral;
            _hubClient.SendToHub();
            return true;
        }
    }
} 
```

如何将其重构为一种通用方法，用于比较我当前和未来所有 http 查询方法的新旧内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:57:09.207

这又快又脏，所以如果不是 100%，你就必须修复它；我没有你的测试来验证它的正确性。我也不确定你是否可以在不检查它是否存在的情况下向字典询问一个不存在的键，所以你可能必须处理它。

```
class Cache
{
    private HubClient _hubClient;
    private IDictionary<string, string> _oldIncidents;

    public Cache(HubClient hubClient)
    {
        _hubClient = hubClient;
        _oldIncidents = new Dictionary<string, string>();
    }

    public bool IsIncidentAppointmentNew(string currentIncidentAppointment)
    {
        return DoMagicWork(
            incidentKey: "appointment",
            currentIncident = currentIncidentAppointment
        );
    }

    public bool IsIncidentUntreatedNew(string currentIncidentUntreated)
    {
        return DoMagicWork(
            incidentKey: "untreated",
            currentIncident = currentIncidentUntreated
        );
    }

    public bool IsIncidentGeneralNew(string currentIncidentGeneral)
    {
        return DoMagicWork(
            incidentKey: "general",
            currentIncident = currentIncidentGeneral
        );
    }

    private bool DoMagicWork(string incidentKey, string currentIncident)
    {
        var oldIncident = _oldIncidents[incidentKey];
        if (XElement.Equals(oldIncident, currentIncident))
        {
            return false;
        }

        _oldIncidents[incidentKey] = currentIncident;
        _hubClient.SendToHub();
        return true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:05:14.780

您可以将它们存储在字典中：

```
class Cache {

    private HubClient _hubClient;
    private Dictionary<string, string> _pages;

    public Cache(HubClient hubClient)
    {
        _hubClient = hubClient;
        _pages = new Dictionary<string, string>();
    }

    public bool isPageNew( string key, string content ) {
        string current;
        if (_pages.TryGetValue(key, out current) && XElement.Equals(current, content)) {
            return false;
        }

        _pages[key] = content;
        _hubClient.SendToHub(); //Why have side effect here? :P
        return true;
    }
} 
```

然后：

```
Cache cache = new Cache( client );

if( cache.isPageNew( "untreated", pageContent ) ) {

} 
```

# swing - 安装在服务器上的 java swing 应用程序

> ID：13569252
> 
> 赞同：1
> 
> 时间：2012-11-26T16:43:03.893
> 
> 标签：swing, network-programming

我必须开发一个应用程序，它将运行服务器并通过远程连接访问多个用户，正常的应用程序可以同时被多个用户访问，或者我们必须付出一些努力。我们正在考虑使用的技术是1：持久层的java swing和hibernate，作为它的单一桌面应用程序，所以我们需要添加服务器来同时给多个用户访问。提前致谢。

# vb.net - 数据库设计：行项目和附加项目

> ID：13569254
> 
> 赞同：1
> 
> 时间：2012-11-26T16:43:14.813
> 
> 标签：vb.net, database-design, visual-studio-lightswitch

我正在寻找解决方案或被告知根本不可能/良好做法。

我目前有一个数据库，我可以在其中创建新订单并从我提供的产品的查找表中进行选择。这在大多数情况下都很好用，但我也希望能够在订单中添加随机杂项。例如，一张发票可能显示“租赁清洁结束”和列出的产品，但随后也有“2x 灯泡”或类似内容的条目。

我已经尝试为这些项目创建另一个查找表，但问题是我不想在下订单之前预先定义每个可能的项目。我更希望能够在需要时简单地输入商品和价格。

是否有任何数据库设计或解决方法可以实现这一目标？任何帮助是极大的赞赏。仅供参考，如果有帮助，我正在使用 Lightswitch 2012。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:46:37.133

我过去看到的一个选项是在您的正常项目表中标记为“附加服务”之类的记录，应用程序代码将识别此项目，并且还要求您输入或编辑描述以与发票一起打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:52:17.110

在我们工作的ERP系统中，零件表中有一个标志，允许更改订单中零件的描述；换句话说，一个人在订单中列出零件编号，然后更改描述。这个一次性描述存储在一个特殊的表（称为非标准）中，该表基本上有两个字段 - 一个 id 字段和描述。'orderlines' 表中有一个字段，用于存储特殊表中记录的 id。通常该字段的值为 0，表示显示零件的正常描述，但如果大于 0，则从非标准表的相应行中获取描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T03:54:57.933

你的意思是这样的？

![在此处输入图像描述](../Images/53d3d9e41c6b0f8ee40e9227c49b1add.png)

*（为简洁起见，仅包括关键属性）*

# api - 使用搜索引擎获取词频

> ID：13569258
> 
> 赞同：2
> 
> 时间：2012-11-26T16:43:23.470
> 
> 标签：api, word, search-engine, frequency, word-frequency

有没有什么好的服务可以告诉我一个单词出现的网页数量？

我需要这个来计算[归一化谷歌距离](http://en.wikipedia.org/wiki/Normalized_Google_distance)。几年前有谷歌网络搜索 API，人们可以调用它并获取事件和搜索结果（我实际上并不需要）。

这个网络搜索 API 现在已经被谷歌自定义搜索 API 取代，但是这个服务的成本对于我的目的来说太高了。

必应搜索 API 和 Yahoo! BOSS Search API 也不是一个选项，因为它们最多只返回 50 个搜索结果，而不是对单词出现的估计。

已经在互联网上进行了相当多的搜索，但我无法找到任何能提供我想要的信息的东西。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T23:08:53.193

首先你应该阅读：

[http://searchengineland.com/why-google-cant-count-results-properly-53559](http://searchengineland.com/why-google-cant-count-results-properly-53559)

我会为您提供 blekko API 结果来执行此操作，但我认为整个技术无效，因为任何主要搜索引擎提供的计数都不准确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T09:53:04.280

我在 R 中使用 Rcurl

`search_result_adress <- sprintf("http://www.google.com/search?q=%s",searched_expression) result_page_source_as_string <- getURL(search_result_adress,.opts = list(ssl.verifypeer = FALSE))[[1]]`

然后你的结果位于“About”和“results”之间的字符串中，我对我的正则表达式技能感到羞耻，无法展示我自己的解决方案，但我相信你会弄清楚的:)。

页数确实不准确，但是您可以通过从搜索中删除一个无论如何都不存在的单词来获得更稳定的结果，因此谷歌会更加努力地搜索。我更倾向于相信那些。

搜索“字符”的示例

> 字符返回 290,000,000 个结果。
> 
> 字符 -potato 返回 931,000,000
> 
> 字符 -hincbhjvmzsslzlkjed 返回 1,780,000,000
> 
> character -zzzanjbedlkjzd 也返回 1,780,000,000，显示稳定

对于不太一般的查询，估计更好。

> “谷歌让我感到沮丧”返回 3,920 个结果。
> 
> “谷歌让我感到沮丧”-土豆返回 2,870。
> 
> “谷歌让我感到沮丧”-hincbhjvmzsslzlkjed 返回 2,860。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-24T07:22:33.933

（我知道晚了，但我只是在尝试解决同样的问题时才发现这个）

也许一个不错的替代品是[谷歌的 Web1T 语料库](http://www.ldc.upenn.edu/Catalog/catalogEntry.jsp?catalogId=LDC2006T13)。它绝对不适合您的用例，但**总比**没有好。特别是，由于语料库仅包含 5 克，因此`f(x, y)`计数只能从由最多三个其他单词分隔的单词中推导出来，这很可能意味着在许多情况下，当您期望更高从实际的谷歌结果中计算（假设存在这样的数字，正如格雷格的链接告诉我们的那样，它可能不存在）。另一个潜在的问题是它只包含截至 2006 年的数据（尽管您可能不关心），并且它只包含英语（尽管[有 10 种欧洲语言的版本）](http://www.ldc.upenn.edu/Catalog/catalogEntry.jsp?catalogId=LDC2009T25)也可用）。哦，它是 150 美元，这并不可耻，尽管这可能意味着您必须与会计部门打交道。

# maven - 在我的 jar 中包含一个 log4j.properties 文件，但在执行时包含不同的属性文件（可选）

> ID：13569266
> 
> 赞同：0
> 
> 时间：2012-11-26T16:43:58.053
> 
> 标签：maven, cron, log4j

我想在我的 Maven 构建中包含一个 log4j.properties 文件，但能够在执行时使用不同的属性文件（在 unix 上使用 cron）

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:56:04.847

您希望能够更改每个环境的属性。有数字方法来解决这个问题。

1.  在每个环境中创建包含不同文件的目录（在您的示例中为 log4j.properties）。将这些目录添加到每个环境中的类路径中。

2.  使用过滤器能力 + Maven 的配置文件能力，以便在构建时使用正确的值填充 log4j.properties。

3.  使用构建服务器（例如 Jenkins），它基本上会生成 p.2。

这些方法中的每一种都有其自身的缺点。由于 Jenkins 的限制，我目前正在使用 2 和 3 的有点奇怪的组合。

# xslt-2.0 - 是否可以在此 XML 中按句号分组？

> ID：13569267
> 
> 赞同：1
> 
> 时间：2012-11-26T16:43:58.847
> 
> 标签：xslt-2.0, xslt-grouping

我想对以下 XML 强加一些结构：

```
<phr>ΦP
    <i>το αθάνατο</i> ~.
    <i>ήπιε το αμίλητο</i> ~.
    <i>πίνω</i> ~ <i>στο όνομα κάποιου</i>, τον σέβομαι, τον εκτιμώ, αναγνωρίζοντας τα όσα του οφείλω.
    <i>λέω το</i> ~ <i>νεράκι</i>, για μεγάλη έλλειψη νερού.
</phr> 
```

通过将 的内容与句号作为分隔符进行分组，如下所示：

```
<phr>
    <group>ΦP <i>το αθάνατο</i> ~.</group>
    <group>  <i>ήπιε το αμίλητο</i> ~.</group>
    <group>  <i>πίνω</i> ~ <i>στο όνομα κάποιου</i>, τον σέβομαι, τον εκτιμώ, αναγνωρίζοντας τα όσα <group>του οφείλω.</group>
    <group><i>λέω το</i> ~ <i>νεράκι</i>, για μεγάλη έλλειψη νερού.</group>
</phr> 
```

谁能推荐一些 XSLT (2.0) 来实现这一目标？我已经尝试过 for-each-group group-by 'text()[matches(.,'.')]'，但这并没有产生预期的结果。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T21:48:53.753

这个样式表应该做你需要的：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  exclude-result-prefixes="xs"
  version="2.0">

  <!-- Identity template -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="phr">
    <xsl:copy>
      <xsl:for-each-group select="node()" group-ending-with="text()[contains(.,'.')]">
        <group>
          <xsl:apply-templates select="current-group()"/>
        </group>
      </xsl:for-each-group>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

# cluster-computing - WSO2 单任务在集群中执行

> ID：13569268
> 
> 赞同：0
> 
> 时间：2012-11-26T16:44:00.923
> 
> 标签：cluster-computing, task, wso2

我一直在研究 WSO2 任务执行，似乎可以为任务执行设置简单的时间表（例如，使用类似 cron 的时间表）。但是，我如何确保在集群中任务仅在每个集群上安排一次，而不是在每个节点上安排一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T11:50:17.260

您可以使用 WSO2 ESB 计划任务的“pinnedServers”属性来实现这一点。

在您的计划任务中，您将在创建计划任务时看到 pinnedServers 属性。

此 pinnedServers 属性的目的是限制集群环境中计划任务的部署。

您可以在要部署计划任务的集群环境中提供 WSO2 ESB 实例的主机名列表（由“，”分隔），并且计划任务将仅部署在那些 WSO2 ESB 实例上。

因此，在您的情况下，您可以指定集群环境中 WSO2 ESB 实例之一的主机名，并且计划任务将仅部署在该 WSO2 ESB 实例中，因此每个 WSO2 ESB 集群仅部署一次。

确保使用各自的主机名修改 WSO2 ESB 实例的 axis2.xml 中的“SynapseConfig.ServerName”参数。

例如：

```
<parameter locked="false" name="SynapseConfig.ServerName">host1.wso2.org</parameter> 
```

谢谢并恭祝安康，

哈沙娜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T05:03:50.617

这在 wso2 ESB 4.9.0（即将发布）中得到支持。但是对于早期版本，您可以使用基于 Hazelcast 领导节点的解决方法。

```
<script language="js">
    importPackage(Packages.com.hazelcast.core);
    importPackage(Packages.java.util);

    iter = Hazelcast.getAllHazelcastInstances().iterator();
    if( iter.hasNext() ) {
        instance = iter.next();
        isLeader = instance.getCluster().getMembers().iterator().next().localMember();
        mc.setProperty("isLeader", isLeader);
    } else {
        mc.setProperty("isLeader", "true");
    }
</script> 
```

更多细节可以在[这里找到](http://asitha.github.io/cs/programming/gotchas/wso2/esb/2015/09/07/get-leader-node-of-an-esb-cluster/)

在代理服务或序列中，您只能在领导节点中执行任务。将消息放到其他节点上。计划任务会在所有节点上执行，但写在序列或代理服务中的实际任务只会在一个节点上执行。此方法可以处理节点崩溃，新节点添加和删除到集群。

# google-app-engine - 在谷歌应用引擎上重定向时的临时页面

> ID：13569274
> 
> 赞同：1
> 
> 时间：2012-11-26T16:44:14.653
> 
> 标签：google-app-engine, python-2.7, webapp2

我想创建一个临时页面，浏览器会在其中停留几秒钟，然后重定向到另一个页面。在 Google App Engine 上使用 python。我认为下面的应该可以工作（我在这方面完全是新手），但显然它没有。

```
class TempPage(PageHandler):
        def get(self):
                self.response.write("You will be redirected to the Front page.")
                time.sleep(3)
                self.redirect('/') 
```

PageHandler 继承自 webapp2.RequestHandler。

有人可以告诉我应该做什么。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T16:48:59.520

我认为您想使用[元刷新](http://en.wikipedia.org/wiki/Meta_refresh)标签。该页面上有一些示例，但您基本上添加了一个如下所示的标签：

```
<meta http-equiv="refresh" content="TIME_TO_WAIT;URL='PAGE_TO_REDIRECT_TO'"> 
```

并将其放入您的`<head>`标签中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:51:01.090

浏览器仅在您的所有代码执行完毕后才会收到该页面。在您的代码中`self.redirect('/')`执行之后，因为这是处理程序中的最后一行代码。你可能连文字都看不到`"You will be redirected to the Front page."`

所以这里发生的所有事情都是您的网页需要 3 秒才能加载，然后立即重定向。

您可能想尝试在您发送给他们的页面中通过 javascript 重定向用户。

这里提出并回答了一个类似的问题：[时间延迟重定向？](https://stackoverflow.com/questions/9877263/time-delayed-redirect)

# iphone - 我想将 UIActivityIndi cator 放在 UIScrollView

> ID：13569278
> 
> 赞同：0
> 
> 时间：2012-11-26T16:44:26.463
> 
> 标签：iphone, ios

我在视图上有一个滚动视图，我想在将`UIActivityIndicator`数据发布到服务器时放置在视图上。

我正在使用以下行添加我的指标：

```
[scrollview addSubview:activityindicator]; 
```

但不知道它没有显示在滚动视图上。

请任何人帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:53:24.797

```
UIActivityIndicatorView *activityindicator=[[UIActivityIndicatorView alloc] init];

activityIndicator.center = scrollview.center;

[activityindicator startAnimating];

[scrollview  addSubview:activityindicator];
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:36:22.570

您正在使用异步或同步请求将数据发布到服务器。如果您使用同步请求，您将看不到您的活动指示器工作。

是的，不要忘记 [activityindicator startAnimating];

玩得开心。

# eclipse - 将现有文件夹添加到 Eclipse 项目 (STS)

> ID：13569281
> 
> 赞同：5
> 
> 时间：2012-11-26T16:44:35.697
> 
> 标签：eclipse

我在 Eclipse 的“问题”窗口中有一个错误，上面写着....

`The project was not built due to "Error deleting resource 'ProjectName/target/classes/log4j.xml' from the workspace tree." .Fix the problem, then try refreshing this project and building it since it may be inconsistent.`

![在此处输入图像描述](../Images/660a194b6f21629b80e273a488fcca2d.png)

我遇到的问题是`classes/log4j.xml`文件系统上存在，但我无法导入它。当我转到**文件 > 导入 > 常规 > 文件系统**并选择**classes/log4j.xml**作为源时，我收到一条消息说**“源位于目标的层次结构中”**并且它不允许我完成向导.

![无法导入截图](../Images/323cdf742076c2de7664c0ca268d8e4b.png)

我需要做什么才能让项目得到认可

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:49:13.810

提供目标文件夹，请参阅`Into folder`下面的文本字段`From directory`

由于它是空的，Eclipse认为你想将log4j.xml添加到同一个地方

# asp.net - ASP.NET 如何在下拉列表中显示 2 列？

> ID：13569282
> 
> 赞同：0
> 
> 时间：2012-11-26T16:44:36.607
> 
> 标签：asp.net

我使用带有 SQLDataSource 的下拉列表来添加下拉列表。由于只有 1 个 DataTextField 可以显示，我该如何添加第二个呢？我想在列表中显示描述和工作流程，这里是 HTML 代码，

```
<asp:DropDownList ID="DropDownWorkProcess" runat="server" DataSourceID="SqlDataSource1" DataTextField="Description" DataValueField="WorkProcess">
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:Database_Shared_NotebookConnectionString %>" SelectCommand="SELECT [Description], [WorkProcess] as workprocess FROM [tblWorkProcess]"></asp:SqlDataSource> 
```

如果那行不通，是否还有其他来自第三方的更简单的方法，例如 AJAX Toolkit？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:51:58.663

You can't use a dropdown list to achieve this sort of thing since DropDown lists are rendered on the browser as `select` elements.

You need to use a custom control. People typically use unordered lists (`ul`) and list items (`li`) to achieve the behaviour you want.

Telerik controls use that approach - ul and li. See here: [http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/multicolumncombo/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/multicolumncombo/defaultcs.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:48:38.013

尝试连接字段：

```
SELECT [Description] + ' ' + [WorkProcess] as workprocess FROM [tblWorkProcess] 
```

# magento - 选项名称后强制换行

> ID：13569283
> 
> 赞同：1
> 
> 时间：2012-11-26T16:44:39.617
> 
> 标签：magento

默认产品选项视图将选项名称放在一行上，强制换行，然后在下方显示选项。

任何人都知道需要在哪里/进行哪些更改以删除换行符，以便选项选项显示在选项名称旁边？

我正在使用 Magento 1.6.2 社区。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:59:18.823

您只需使用 css 即可实现此目的，只需在标签和输入框上放一个浮点数即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T00:46:17.513

找出模板文件在magento中的位置的最简单方法是打开模板路径提示

请参阅[如何打开模板路径提示](https://support.sweettoothrewards.com/entries/21255937-how-do-i-turn-on-template-path-hints)

此外，您可能想使用“chrome 检查元素”或“firebug for firefox”来查看是否可以使用 css 重新设置它的样式。

# xcode - 界面生成器中“二次点击”选择模式的目的是什么？

> ID：13569284
> 
> 赞同：8
> 
> 时间：2012-11-26T16:44:43.097
> 
> 标签：xcode, interface-builder

当我在设计 XIB 时单击 UI 元素时，会像这样选择 UI 元素： ![选择按钮](../Images/687ff65f9a03ce74c8ae70a744c44bab.png)

如果我再次单击相同的元素，则会像这样选择它：

![](../Images/37637ac3ce23a84fa8585484ebf0ec57.png)

这种特殊选择模式的目的是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T19:56:03.583

好吧，这只是一种遍历视图层次结构（并将焦点锁定在嵌套子视图上）的机制。虽然您的示例中的两种模式之间似乎没有区别（当然除了“聚焦”模式中缺少调整大小句柄）考虑一个更复杂的对象，例如 OSX 上的 tableview（还要注意浅蓝色如何表示正在编辑的视图，而焦点环指示其父视图的框架 - 另请注意，此向下钻取是基于鼠标指针的位置。在此示例中，为了一直向下移动到单元格，我们必须在我们瞄准的最里面元素的边界）：

**第一次单击**- 选择外部元素/容器 (ScrollView) ![在此处输入图像描述](../Images/23c367900a8ee02ec5c24c4a164eee6c.png)

**第二次单击**- 选择 TableView ![在此处输入图像描述](../Images/f11e663e59ed0eb8032533088b99c0ef.png)

**第三次单击**- 选择 TableColumn ![在此处输入图像描述](../Images/bc9c2a5211f0d40279b52ef555343594.png)

**第 4 次单击**- 选择 TableCell ![在此处输入图像描述](../Images/b51ee9f53896640bc8e4f522ac421c98.png)

# r - 向数据框中添加多列

> ID：13569285
> 
> 赞同：0
> 
> 时间：2012-11-26T15:11:46.800
> 
> 标签：r, dataframe

> **可能重复：**
> [如何在 R 中加入数据框（内、外、左、右）？](https://stackoverflow.com/questions/1299871/how-to-join-data-frames-in-r-inner-outer-left-right)
> [合并两个数据框并删除重复列](https://stackoverflow.com/questions/7440917/combine-two-data-frames-and-remove-duplicate-columns)

如何将多个列添加到数据框中？

我有一个现有的数据框 ( `dataframe.X`)，它由 189 行和 35 列组成。为此，在第 35 列之后，我想在单独的数据框 ( `dataframe.Y`) 中添加 19 列，也包含 189 行。

如果它只是一列（并且`dataframe.Y`只有一列），我会这样做：

```
dataframe.X$NEW.COLUMN<-dataframe.Y 
```

但这不适用于超过一列。有没有一种简单的方法可以做到这一点，而无需手动完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:01:24.807

您想要以下数据框方法`cbind()`：

```
A <- B <- data.frame(matrix(runif(100), ncol = 10))
names(A) <- LETTERS[1:10]
names(B) <- LETTERS[11:20]

AB <- cbind(A, B)

> head(AB)
          A         B          C          D           E         F          G
1 0.7712438 0.8812705 0.84882438 0.75724291 0.921585941 0.5164942 0.18571224
2 0.0126251 0.1615442 0.60085004 0.05875528 0.253768847 0.2113731 0.87980683
3 0.3084463 0.2632898 0.78474323 0.79381024 0.090883591 0.2370151 0.73951553
4 0.3569714 0.9129827 0.31129223 0.75632920 0.866286356 0.2824447 0.96211833
5 0.8217136 0.9586726 0.87056708 0.93756202 0.001114461 0.5061194 0.06171122
6 0.5402234 0.4114434 0.05434122 0.40361466 0.536001187 0.4158735 0.99494631
           H         I         J         K         L          M          N
1 0.40434088 0.7099546 0.9936925 0.7712438 0.8812705 0.84882438 0.75724291
2 0.20439643 0.2077438 0.5143336 0.0126251 0.1615442 0.60085004 0.05875528
3 0.83729465 0.1859405 0.7801276 0.3084463 0.2632898 0.78474323 0.79381024
4 0.06617131 0.7731577 0.1581497 0.3569714 0.9129827 0.31129223 0.75632920
5 0.58580980 0.4463787 0.1484671 0.8217136 0.9586726 0.87056708 0.93756202
6 0.30236632 0.3962285 0.8330804 0.5402234 0.4114434 0.05434122 0.40361466
            O         P          Q          R         S         T
1 0.921585941 0.5164942 0.18571224 0.40434088 0.7099546 0.9936925
2 0.253768847 0.2113731 0.87980683 0.20439643 0.2077438 0.5143336
3 0.090883591 0.2370151 0.73951553 0.83729465 0.1859405 0.7801276
4 0.866286356 0.2824447 0.96211833 0.06617131 0.7731577 0.1581497
5 0.001114461 0.5061194 0.06171122 0.58580980 0.4463787 0.1484671
6 0.536001187 0.4158735 0.99494631 0.30236632 0.3962285 0.8330804 
```

# apache-flex - 使用 flex-mojo 编译时 Java/Flash 应用程序不工作

> ID：13569286
> 
> 赞同：0
> 
> 时间：2012-11-26T16:44:45.857
> 
> 标签：apache-flex, web-applications, flex-mojos

我正在开发一个包含一些 Flash 模块的 Java Web 应用程序。
至此我已经使用Adobe Flash builder编译Flash源代码并手动将swf文件集成到war中，web应用就可以部署运行成功了。
最近，同样是源代码专有的客户要求使用 flex-mojo maven 插件管理 Flash 源模块。
问题是应用程序编译和部署没有错误，但不再工作。当您在登录阶段后从浏览器访问应用程序时，会出现一个空白屏幕，并且无法与应用程序交互。`pom.xml`用于构建 Flash 模块的内容如下（我省略了不相关的部分）：

```
<plugins>
  <plugin>
    <groupId>org.sonatype.flexmojos</groupId>
    <artifactId>flexmojos-maven-plugin</artifactId>
    <version>4.0-RC2</version>
    <extensions>true</extensions>

    <configuration>

        <contextRoot>myapp</contextRoot>
        <services>../myapp-war/src/main/webapp/WEB-INF/flexCompile/services-config.xml</services>
        <localesSourcePath>${basedir}/locale/{locale}</localesSourcePath>

        <debug>true</debug>
        <output>target/myapp.swf</output>
        <definesDeclaration>
          <property>
            <name>BUILD::buildNumber</name>
            <value>"Versione: ${project.version}"</value>
          </property>
        </definesDeclaration>
          <localesRuntime>
            <locale>en_US</locale>
          </localesRuntime>
         <localesCompiled>
            <locale>en_US</locale>
          </localesCompiled>
    </configuration>
  </plugin>
</plugins> 
```

需要注意的是，两个编译好的 swf 文件大小不同，所以这似乎是编译器版本问题。是否有人使用 Flash 和 Java 进行开发，可以给我一些解决此问题的提示，甚至只是将我指向资源、论坛等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T15:31:43.743

您是否尝试将`swfVersion`属性设置为您的配置？它会是这样的：

```
<swfVersion>13</swfVersion> 
```

该版本特定于您的目标播放器。[你可以在这里](http://sleepydesign.blogspot.fr/2012/04/flash-swf-version-meaning.html)找到你需要的版本

作为一般的良好做法，不要忘记检查`myapp-config.xml`哪些包含 Flexmojo 传递给 mxmlc 的每个选项。该文件位于您的`target`目录中。

# c++ - 指针如何引用硬盘中的段

> ID：13569295
> 
> 赞同：0
> 
> 时间：2012-11-26T16:45:11.177
> 
> 标签：c++, c, linux, pointers, operating-system

请让我知道指针（在 C/C++ 编程语言中）如何引用硬盘中的段，例如高达 1 GB 的存储空间。

更详细地说，我将编写一个函数的签名，该函数将指针作为参数，并且应该指向硬盘中的一个段，该段最多可以容纳 1 GB 空间，而不是传递指向地址的指针，这拥有相同数量的存储空间，在堆上我希望它指向硬盘段。系统是Linux，编程语言C和C++。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:47:19.620

你可以调查一下[`mmap`](http://linux.die.net/man/2/mmap)。这允许将文件映射到您的主内存中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:09:33.857

您必须将数据映射到您的虚拟地址空间。

打开您的文件或块设备（例如`/dev/sda`）`open(2)`并在此处传递文件描述符：

```
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <sys/mman.h>

void * map_file_descriptr(int fd) {
    struct stat file_stat;
    if (fstat(fd, &file_stat)) {
        perror("fstat");
        // do something on error
        return NULL;
    }

    void * data = mmap(
          NULL // place the the VM segment anywhere in the process virtual address space
        , file_stat.st_size // file size
        // For read-only:
        , PROT_READ
        , MAP_PRIVATE
        // for read-write
        /*
        , PROT_READ | PROT_WRITE
        , MAP_SHARED
        */
        , fd // file which belongs to this file descriptor
        , 0 // from the beginning
        );

    if (data == MAP_FAILED) {
        perror("mmap");
        // you most likely are out of memory to allocate the VM table
        // this very rarely happens
        return NULL;
    }

    return data;
} 
```

如果您将文件映射`MAP_SHARED`为进行读写访问，那么您需要`msync(2)`将更新刷新到磁盘。

小心：`MAP_PRIVATE`如果文件在映射后被另一个进程修改，则映射文件具有未定义的行为。此外，如果在映射后更改文件大小，则任何映射都将导致未定义的行为。

注意：可以写入`MAP_PRIVATE`映射，但删除映射时不会将更改写回文件，这些映射也无法同步。`PROT_WRITE`

# c# - 如何通过绑定设置静态资源的属性

> ID：13569296
> 
> 赞同：1
> 
> 时间：2012-11-26T16:45:18.893
> 
> 标签：c#, .net, wpf

在下面的 XAML 片段中，“testGrid”的 ItemsSource 设置正确，但“testGridResource”为 null。如何通过绑定设置定义为资源的网格的 ItemsSource？更一般地说，如何通过绑定设置定义为静态资源的对象的属性（我仅在我的应用程序中使用 datagrid 作为示例，我正在使用其他对象）？

```
<Window x:Class="StackedBarTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ig="http://schemas.infragistics.com/xaml"
    Title="MainWindow" Height="350" Width="525" x:Name="root">
<Window.Resources>
    <DataGrid x:Key="testGridResource" ItemsSource="{Binding LoadStatistics, ElementName=root}"></DataGrid>
</Window.Resources>

<Grid x:Name="LayoutRoot">
    <DataGrid x:Name="testGrid" ItemsSource="{Binding LoadStatistics, ElementName=root}"></DataGrid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:10:52.647

看看这是否有助于回答您的问题：[绑定到静态属性](http://www.jonathanantoine.com/2011/09/28/wpf-4-5-%E2%80%93-part-9-binding-to-static-properties/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T20:54:05.947

所以你只想将你的 DataGrid 绑定到 testGridResource，如果是这样的话，这应该可以

```
<DataGrid x:Name="testGrid" ItemsSource="{Binding Source={StaticResource testGridResource}}"> 
```

不确定这是否是您想要的

也许是这样：

```
<DataGrid x:Name="testGridResource" ItemsSource="{Binding Path=LoadStatistics, RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Window}}} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T01:00:51.180

基本上，答案是这样的：如果 xaml 中未使用资源，则不会对其进行解析，因此作为绑定目标的属性将显示为空。因此，上面发布的绑定都是正确的，但是由于该资源从未在 xaml 中使用过，因此从未解析过，因此 ItemSource 显示为空。

请参阅此链接：

[http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7aed2cbf-1980-4f3d-8354-83227662f428](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7aed2cbf-1980-4f3d-8354-83227662f428)

# ruby-on-rails - 按类型从循环中排序条目

> ID：13569298
> 
> 赞同：0
> 
> 时间：2012-11-26T16:45:22.097
> 
> 标签：ruby-on-rails, loops

我在 Rails 中写这个，但我怀疑逻辑不是 Rails 特定的——我有一个条目列表，这些条目都是照片和视频两种类型中的一种。

目前我有一个循环以相反的日期顺序在列表中运行，输出两种类型的混合。下面是我的循环示例，它不是实际代码，但逻辑是相同的：

```
post_count = 1
 if post_count < 2
    if post.type == 'photo'
       <div>post.title</div>
       post_count = post_count + 1
    end
 else
    if post.type == 'photo'
       <div>post.title</div>
       post_count = post_count + 1
    elsif post.type == 'video'
       <div>post.embed_code</div>
       post_count = post_count + 1
    end
 end 
```

这接近我想要的，因为我希望这两种类型在一定程度上混合，但我想知道是否有可能让循环拉出前两个照片条目并首先渲染它们，然后输出其余的列表中的正常内容，包括之前可能出现在列表中的任何视频条目。

这对我来说听起来有点令人费解，所以这是一个图表，右侧是所需的结果：

![列表](../Images/99627dd618c02770ba4ad7cd20b83272.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:15:50.273

Hmm not sure if it is what you are looking for, but take a look:

```
@posts.select{ |post| post.type == 'photo' }.first(2).each do |photo_post|
  @posts.delete_if{ |post| post == photo_post }

  # display photo_post
  # <div>post.title</div>

@posts.each do |post|
  post.try(:title) || post.try(:embed_code) 
```

This code assume that `@posts` is a list of Photos/Videos ordered as your wishes (by date in general). It should not support the `nil` cases.

# performance - 为什么不等式比等式更快地返回结果？

> ID：13569302
> 
> 赞同：1
> 
> 时间：2012-11-26T16:45:34.947
> 
> 标签：performance, tsql, sql-server-2005, querying

关于这个特定的查询：

不要期望理解被查询的数据：它是无关紧要的。

看看**WHERE 子句**：

```
SELECT 
    de.DocumentEntryId,
    de.Number,
    currentdev.ToIgnore,
    previousdev.ToIgnore,
    currentdev.DocumentEntryValueId AS CurrentDocumentEntryValueId, 
    SUM(currentper.Value) AS CurrentPaymentRate,
    SUM(currentdevr.ConversionRate) AS CurrentConversionRate,
    MAX(previousdev.DocumentEntryValueId) AS PreviousDocumentEntryValueId,
    SUM(previousper.Value) AS PreviousPaymentRate,
    SUM(previousdevr.ConversionRate) AS PreviousConversionRate
FROM 
    DocumentEntry de
    INNER JOIN PaymentEntry currentpe ON currentpe.PaymentEntryId = de.CurrentPaymentEntryId
    INNER JOIN DocumentEntryValue currentdev ON currentpe.DocumentEntryValueId = currentdev.DocumentEntryValueId
    INNER JOIN DocumentEntryValue previousdev ON previousdev.DocumentEntryId = de.DocumentEntryId
    INNER JOIN PaymentEntryRate currentper ON currentpe.PaymentEntryId = currentper.PaymentEntryId
    INNER JOIN DocumentEntryValueRate currentdevr ON currentdev.DocumentEntryValueId = currentdevr.DocumentEntryValueId
    INNER JOIN PaymentEntry previouspe ON previousdev.DocumentEntryValueId = previouspe.DocumentEntryValueId
    INNER JOIN PaymentEntryRate previousper ON previouspe.PaymentEntryId = previousper.PaymentEntryId
    INNER JOIN DocumentEntryValueRate previousdevr ON previousdevr.DocumentEntryValueId = previousdev.DocumentEntryValueId
WHERE 
    previousdev.DocumentEntryValueId <> currentdev.DocumentEntryValueId
    AND currentdev.ToIgnore <> 1
    AND previousdev.ToIgnore <> 1
    AND currentpe.PaymentId = previouspe.PaymentId
GROUP BY 
    de.DocumentEntryId, 
    de.Number,
    currentdev.ToIgnore,
    previousdev.ToIgnore,
    currentdev.DocumentEntryValueId
ORDER BY DocumentEntryId 
```

尤其是这两个**不等式**：

```
AND currentdev.ToIgnore <> 1
AND previousdev.ToIgnore <> 1 
```

**注意**：ToIgnore 是一个位列。

此查询大约需要 10 秒才能返回大约 1300 行。

但是，如果我将这两行更改为使用**相等**运算符：

```
AND currentdev.ToIgnore = 0
AND previousdev.ToIgnore = 0 
```

归还任何东西都需要永远。

它有帮助，这里是每个表的索引：

表**DocumentEntry**索引：

```
ALTER TABLE [dbo].[DocumentEntry] ADD  CONSTRAINT [DocumentEntry$0] PRIMARY KEY CLUSTERED 
(
    [DocumentEntryId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [IDX_DOCUMENTENTRY_REFNUMBER] ON [dbo].[DocumentEntry]
(
    [EntryReferenceNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_14227] ON [dbo].[DocumentEntry]
(
    [MasterDocumentEntryId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_186297_186296_DocumentEntry] ON [dbo].[DocumentEntry]
(
    [Number] ASC
)
INCLUDE (   [DocumentEntryId]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1] 
```

表**DocumentEntryValue**索引：

```
ALTER TABLE [dbo].[DocumentEntryValue] ADD  CONSTRAINT [DocumentEntryValue$0] PRIMARY KEY CLUSTERED 
(
    [DocumentEntryValueId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [IDX_DOCUMENTENTRYVALUE_DOCENTRYID] ON [dbo].[DocumentEntryValue]
(
    [DocumentEntryId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [IDX_DOCUMENTENTRYVALUE_REFNUMBER] ON [dbo].[DocumentEntryValue]
(
    [EntryValueReferenceNumber] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_4022_4021_DocumentEntryValue] ON [dbo].[DocumentEntryValue]
(
    [ReferenceDocumentId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1] 
```

表**DocumentEntryValueRate**索引：

```
ALTER TABLE [dbo].[DocumentEntryValueRate] ADD  CONSTRAINT [DocumentEntryValueRate$0] PRIMARY KEY CLUSTERED 
(
    [DocumentEntryValueRateId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_56865_56864_DocumentEntryValueRate] ON [dbo].[DocumentEntryValueRate]
(
    [DocumentEntryValueId] ASC
)
INCLUDE (   [timestamp],
    [DocumentEntryValueRateId],
    [RateId],
    [RateVersionId],
    [RateTypeId],
    [RateGroupId],
    [RatePeriodValueId],
    [ConversionRate]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1] 
```

表**PaymentEntry**索引：

```
ALTER TABLE [dbo].[PaymentEntry] ADD  CONSTRAINT [PaymentEntry$0] PRIMARY KEY CLUSTERED 
(
    [PaymentEntryId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [IDX_PAYMENTENTRY_DOCENTRYVALUEID] ON [dbo].[PaymentEntry]
(
    [DocumentEntryValueId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_2517_2516_PaymentEntry] ON [dbo].[PaymentEntry]
(
    [PaymentId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1] 
```

表**PaymentEntryRate**索引：

```
ALTER TABLE [dbo].[PaymentEntryRate] ADD  CONSTRAINT [PaymentEntryRate$0] PRIMARY KEY CLUSTERED 
(
    [PaymentEntryRateId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [IDX_PAYMENTENTRYRATE_PAYMENTENTRYID] ON [dbo].[PaymentEntryRate]
(
    [PaymentEntryId] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_2618_2617_PaymentEntryRate] ON [dbo].[PaymentEntryRate]
(
    [RateId] ASC
)
INCLUDE (   [timestamp],
    [PaymentEntryRateId],
    [PaymentEntryId],
    [RateTypeId],
    [RateGroupId],
    [RateVersionId],
    [RatePeriodValueId],
    [Value]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1]

CREATE NONCLUSTERED INDEX [missing_index_2686_2685_PaymentEntryRate] ON [dbo].[PaymentEntryRate]
(
    [RateTypeId] ASC,
    [RateId] ASC,
    [RatePeriodValueId] ASC
)
INCLUDE (   [PaymentEntryId]) WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [Data Filegroup 1] 
```

这是我使用相等运算符 (= 0) 时估计的执行计划的一部分： ![预计执行计划](../Images/f6840df82846846c0df1f532495f84f3.png)

有人可以解释为什么在这种情况下（或可能在许多情况下），不等式运算符似乎比等式运算符快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:44:12.450

我不知道为什么，但我无法发表评论，只有答案，所以如果这对你不起作用，请忽略。

使用“WHERE ToIgnore = 0”创建非聚集索引应该可以解决此问题。

ToIgnore=1 vs ToIgnore=0 的记录数是多少？我的猜测是 ToIngore=1 的记录数量远大于设置为 0 的记录。

我记得不久前一个 Oracle/SQL DBA 告诉我，位列不需要索引，因为 Microsoft 已经为您处理好了，这可以解释您的问题。但是，我找不到任何支持它的东西，这可能是 Oracle 的问题，他们认为 MS 也必须这样做。

# java - 在 Spring Security 中处理自定义异常

> ID：13569303
> 
> 赞同：21
> 
> 时间：2012-11-26T16:45:42.877
> 
> 标签：java, spring, exception, exception-handling, spring-security

我们正在使用 spring MVC + spring security + hibernate 创建一个 RESTful API。API 可以生成 JSON 和 HTML。为 Spring Security 做好错误处理让我很头疼：

身份验证可以通过多种方式进行：BasicAuth、通过 POST 请求中的不同参数以及通过 Web 登录。对于每个身份验证机制，`<http>`在 spring security xml 配置的命名空间元素中声明了一个过滤器。

我们在 custom 中处理所有的 spring 异常`HandlerExceptionResolver`。这适用于我们控制器中抛出的所有异常，但我不知道如何处理自定义弹簧安全过滤器中抛出的自定义异常。由于 spring 安全过滤器出现在我们的任何控制器被调用之前，我们看不到我们在自定义 spring 安全过滤器中抛出的异常。

我在 stackoverflow 上发现了这个问题： [Use custom exceptions in Spring Security](https://stackoverflow.com/questions/12035133/use-custom-exceptions-in-spring-security)。但是我不明白他们在哪里处理那里抛出的异常。我们尝试了这种方法，但`HandlerExceptionResolver`没有调用我们的自定义。相反，用户会看到由 tomcat 呈现的丑陋的堆栈跟踪。

**我们为什么需要这个？** 可以激活和停用用户。如果它们被停用并尝试执行某些操作，我们希望返回带有自定义错误消息的 JSON。这应该与 spring security 抛出`AccessDeniedException`. `AccessDeniedException`不知何故，它是我们的，`HandlerExceptionResolver`但我无法准确地理解。

**可能的解决方案** 我们考虑过使用`ExceptionTranslationFilter`，但是当我们抛出自定义异常时不会调用它（在 doFilter() 方法的 catch 语句中设置断点）。在我的理解中，应该调用这个 catch 块并且应该使用一个身份验证入口点。

另一种可能性：我们可以做一些类似于`ExceptionTranslationFilter`spring 安全过滤器链中的事情，并做一些类似于它`AccessDeniedHandler`所做的事情：

```
RequestDispatcher dispatcher = request.getRequestDispatcher(errorPage);
dispatcher.forward(request, response); 
```

我们可以在请求中添加一些参数（错误代码、原因等），并让它指向一个控制器，该控制器将负责 JSON 或 HTML 的呈现。

**这是我们配置的简短摘录：**

弹簧安全：

```
<http create-session="stateless" use-expressions="true" >
    <!-- Try getting the authorization object from the request parameters. -->
    <security:custom-filter ref="filter1" after="SECURITY_CONTEXT_FILTER"/>
    <security:custom-filter ref="filter2" before="LOGOUT_FILTER"/>
    <!-- Intercept certain URLS differently -->

    <intercept-url pattern="/admin/**" access="hasRole('ROLE_ADMIN')" />
    <!-- Some more stuff here -->
    <intercept-url pattern="/**" access="denyAll" />  
    <http-basic />
</http> 
```

HandlerExceptionResolver 的 AppConfig

```
@Bean
public HandlerExceptionResolver handlerExceptionResolver(){
    logger.info("creating handler exception resolver");
    return new AllExceptionHandler();
} 
```

我们自定义的 HandlerExceptionResolver

```
public class AllExceptionHandler implements HandlerExceptionResolver {

    private static final Logger logger = LoggerFactory
        .getLogger(AppConfig.class);

    @Override
    public ModelAndView resolveException(HttpServletRequest request,
            HttpServletResponse response, Object handler, Exception ex) {
    // This is just a snipped of the real method code
    return new ModelAndView("errorPage");
} 
```

我们过滤器之一的相关部分：

```
try {
    Authentication authResult = authenticationManger.authenticate(authRequest);
    SecurityContextHolder.getContext().setAuthentication(authResult);
}

catch(AuthenticationException failed) {
    SecurityContextHolder.clearContext();
    throw failed; 
} 
```

Web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
<context-param>
    <param-name>contextClass</param-name>
    <param-value>org.springframework.web.context.support.AnnotationConfigWebApplicationContext</param-value>
</context-param>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>xxx.xxx.xxx.config</param-value>
</context-param>
<context-param>
    <param-name>spring.profiles.default</param-name>
    <param-value>LIVE</param-value>
</context-param>
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value></param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
    <!-- Add multipart support for files up to 10 MB -->
    <multipart-config>
        <max-file-size>10000000</max-file-size>
    </multipart-config>
</servlet>
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>
<filter>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <filter-class>org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>openEntityManagerInViewFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>
<!-- Map filters -->
<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<error-page>
    <error-code>404</error-code>
    <location>/handle/404</location>
</error-page>
</web-app> 
```

有没有人对我们如何解决这个问题有任何指示？我浏览了谷歌上的许多文章，其中大多数描述了当没有过滤器能够对请求进行身份验证时如何处理 Spring Security 抛出的 AccessDeniedException。

我们正在使用 Spring Security 3.1.0 和 spring web mvc 3.1.0。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-27T13:44:54.970

重要的是要记住 Spring Security 中过滤器的顺序很重要。

来自[Spring Security 3](http://www.amazon.co.uk/Spring-Security-3-Peter-Mularien/dp/1847199747/)书：

> 将`ExceptionTranslationFilter`能够仅处理过滤器链执行堆栈中在其下方抛出的那些异常并对其做出反应。用户经常感到困惑，尤其是在以不正确的顺序添加自定义过滤器时，为什么预期的行为与其应用程序的实际异常处理不同——在许多情况下，过滤器的顺序是罪魁祸首！

如果您的过滤器是关于授权的，最好将它们放在链的末尾，因为默认授权过滤器使用这种方法。这样你就不必重新发明轮子了。

标准过滤器：[文档中的表格](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#filter-stack)

正确配置过滤器链后，您可以配置错误页面，甚至自定义处理程序。[文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#nsa-access-denied-handler)中提供了更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T04:46:56.753

我看到 ExceptionTranslationFilter 只处理两个异常 AuthenticationException 和 AccessDeniedException 与这两个异常的自定义处理程序，那么任何其他类型的异常甚至运行时异常呢？

您将如何处理/拦截 Spring 过滤器堆栈中的任何异常？是否没有任何 Spring 标准方法来捕获和获取请求（除了在所有内容之上编写自定义过滤器）、响应而不在所有内容之上编写另一个过滤器？

```
<security:http auto-config="false" use-expressions="true"
disable-url-rewriting="true" entry-point-ref="authenticationEntryPoint"
pattern="/**">

<security:custom-filter before="FIRST" ref="stackExceptionFilter" />

<security:custom-filter before="..." ref="authenticationFilter" />
<security:logout />
</security:http> 
```

好吧，我最终在顶部添加了另一个过滤器（或在 web.xml 中为 /* 配置过滤器），它只是有 try catch 块并将任何未捕获的异常委托给调用 ExceptionController 方法的自定义异常处理程序 Spring 组件（每个方法返回不同的响应类型以不同的方式）以故障安全的方式返回基于异常类型的自定义异常消息（我们的要求）。唯一的缺点是添加一些逻辑，这样你就不会继续循环了。控制器中的 Spring 自定义 ExceptionHandlerExceptionResolver 和 @ExceptionHandler 不处理过滤器异常，并且对您希望如何以（XML/JSON、重定向、转发......）返回异常消息有限制。

错误代码也是如此，在 web.xml 中定义静态页面，但通过将过滤器映射到 ERROR 调度程序并为显示错误代码的页面准备模型来捕获它们。

# php - PHP 会话不保存

> ID：13569304
> 
> 赞同：0
> 
> 时间：2012-11-26T16:45:45.483
> 
> 标签：php

如果我在 PHP 中设置了一个会话变量，那么每当我转到另一个页面时它都不会保存它。

我发现在 php.ini 中没有设置“session.save_path”，但是在更新它以使用“/tmp”之后它仍然不起作用。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:47:08.933

确保`session_start()`在需要会话变量的 PHP 脚本的开头调用。

# sql - 如何获取此查询？

> ID：13569306
> 
> 赞同：-3
> 
> 时间：2012-11-26T16:45:51.250
> 
> 标签：sql, sql-server, sql-server-2005

这是我的桌子

```
Create table gpscli
(
   cliente int,/*this is my id client*/
   inicio datetime,/*this is start time*/
   fin datetime,/this is finished time**/
   fecha datetime/*this is my date because inicio and fin could be a bad date*/
) 
```

填满的表是这样的

```
select cliente, inicio, fin, fecha from gpscli order by fecha, cliente

1 '23-04-2012 10:23:51' '23-04-2012 10:26:38' '23-04-2012 00:00:000'
2 '23-04-2012 10:28:41' '23-04-2012 10:30:12' '23-04-2012 00:00:000'
3 '23-04-2012 10:33:58' '23-04-2012 10:37:24' '23-04-2012 00:00:000'
4 '23-04-2012 10:40:42' '23-04-2012 10:43:12' '23-04-2012 00:00:000'
5 '23-04-2012 10:45:46' '23-04-2012 10:57:18' '23-04-2012 00:00:000'
1 '24-04-2012 10:23:12' '24-04-2012 10:26:28' '24-04-2012 00:00:000'
2 '24-04-2012 10:23:29' '24-04-2012 10:26:58' '24-04-2012 00:00:000'
3 '24-04-2012 10:23:23' '24-04-2012 10:26:56' '24-04-2012 00:00:000'
4 '24-04-2012 10:23:12' '24-04-2012 10:26:28' '24-04-2012 00:00:000'
5 '24-04-2012 10:23:29' '24-04-2012 10:26:58' '24-04-2012 00:00:000'
1 '24-05-2012 10:23:12' '24-05-2012 10:26:28' '24-05-2012 00:00:000'
2 '24-05-2012 10:23:29' '24-05-2012 10:26:58' '24-05-2012 00:00:000'
3 '24-05-2012 10:23:23' '24-05-2012 10:26:56' '24-05-2012 00:00:000'
4 '24-05-2012 10:23:12' '24-05-2012 10:26:28' '24-05-2012 00:00:000'
5 '24-05-2012 10:23:29' '24-05-2012 10:26:58' '24-05-2012 00:00:000' 
```

此信息由用户保存，此时将称为“主管”

主管是在商店里去商店询问客户想要什么产品的人。

所以他（主管）在车里移动。当他打开一个窗口（在 pockec pc 中）时，“inicio”被保存，当主管关闭窗口时，“fin”被保存在数据库中。

现在有了这些信息，我可以得到主管与客户相处的时间，但我真正需要的是主管在客户之间移动的时间。

不是客户 1 是一天中第一个客户所必需的，第一个客户是在`inicio`列上具有最小值的客户。与 fin 列的最后一个客户端相同。

主管在客户之间转移需要多长时间。

我需要一些东西

*   对于第一个客户端传输时间为 0。
*   对于第二个客户，传输时间是`inicio`（此`inicio`列是当前的）`- fin`（这`fin`是以前的客户）
*   对于第三个客户，传输时间是`inicio`（这个 inicio 列是当前的）`- fin`（这`fin`是以前的客户）

最后我需要`group by month,client`

我不知道如何获得它（不使用循环，我不想使用它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:15:46.957

我可以解决

```
create table #datos
(
cliente int,
fecha datetime,
inicio datetime,
fin datetime,
id int identity
)

insert into #datos (cliente,fecha,inicio,fin)
select cliente,fecha,  isnull(t_inicio,'01/01/1900') inicio,isnull(t_fin,'01/01/1900') fin
from gpscli order by  fecha, t_inicio,t_fin

alter table #datos
add idmas1 int

update #datos set idmas1=id+1

select d.cliente, d.fecha, d.inicio, d.fin,d.id,d2.fin fin_anterior from #datos d
inner join #datos d2 on
d.id=d2.idmas1 
```

现在我有一个名为“fin_anterior”的完成时间，现在我可以按客户、月份或必要的方式分组

# android-fragments - 尝试在 onCreateView 回调中移动片段内的数据

> ID：13569309
> 
> 赞同：0
> 
> 时间：2012-11-26T16:45:53.777
> 
> 标签：android-fragments

作为android的新手，我遇到了一些问题。目前我正在尝试在我尝试开发的应用程序中使用片段。我正在尝试模拟来自 EditText 视图的数据移动，该视图显示为片段内布局的一部分。

布局包含一些其他视图，一个是空的 TextView 和一个按钮，它也是布局的一部分。我已经为片段的 onCreateView 内的按钮以编程方式实现了代码。代码片段如下。

我要做的是捕获我在 EditText 视图中键入的内容并将其加载到 EditText 类型的变量中，然后在单击按钮后将其加载到空的 TextView 中。我这样做是为了模拟从数据库中检索这些数据以显示它。同样，这里是代码：

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
        Bundle savedInstanceState) {

        // Inflate the layout for this fragment and assign it to a view
        View view = inflater.inflate(R.layout.care_meeting, container, false);

        Button button = (Button) view.findViewById(R.id.MtgButton);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                resName = (EditText) v.findViewById(R.id.resNameEditText);
                trsName = resName.getText().toString();
                TextView text = (TextView) v.findViewById(R.id.trNameView);
                text.setText(trsName);
            }
        });

        return view;
    } 
```

当我检查 resName 值并发现它为 null 时出现问题，当我移动到下一行时会引发 nullpointer 异常。我试图理解为什么我输入的内容没有被变量拾取。此外，我尝试使用 getText() 方法，该方法引入了一个完全不同的问题，该问题涉及强制转换异常。所以我放弃了这一点并坚持了这一点。

我试图找到可能遇到此问题的其他人，但我正在画一个空白。我究竟做错了什么？请给我您的见解，以帮助我解决此问题。

提前致谢，

道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T02:30:33.693

我找到了解决方案：我应该使用 getView() 方法：

```
resName = (EditText) getView().findViewById(R.id.resNameEditText);
trsName = resName.getText().toString();
TextView text = (TextView) getView().findViewById(R.id.trNameView);
text.setText(trsName); 
```

更改工作得很好。

# sql - 按路线交叉口排序

> ID：13569319
> 
> 赞同：0
> 
> 时间：2012-11-26T16:46:59.427
> 
> 标签：sql, sql-server-2008, geospatial

使用地图上的航点来绘制路线的空间应用程序 (abcde)。

这条路线被提交给 SQL 以查找沿路线的相交多边形。

可以按路线**订购吗？**

因此结果显示如下：

```
WayPoint   | Polygon
a          | 0xE6100....
a          | 0xE6100....
a          | 0xE6100....
a          | 0xE6100....
b          | 0xE6100....
b          | 0xE6100....
b          | 0xE6100....
c          | 0xE6100....
d          | 0xE6100.... 
```

# excel - 根据特定单元格的值为 Excel 工作表的多个单元格着色

> ID：13569320
> 
> 赞同：1
> 
> 时间：2012-11-26T16:47:01.073
> 
> 标签：excel, vba

我有一个 excel 表......我想根据以下条件为单元格着色：

1.  如果单元格 E 不为空，则单元格 A、单元格 B、单元格 C、单元格 D、单元格 F、单元格 G、单元格 H 和单元格 I 不能为空。如果发现任何一个单元格为空，则将相应的单元格涂成红色！！

2.  如果单元格 A、单元格 B、单元格 C、单元格 D、单元格 F、单元格 G、单元格 H 和单元格 I 共同包含一个值并且单元格 E 为空，则以红色突出显示单元格 E。

注意：想要在模块部分实现这个......所以建议相应的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:44:20.043

像这样的东西会起作用吗？

```
Dim Row
Row = 3

If Not IsEmpty(Cells(Row, 5)) Then
    ' if Cell E is not empty, then highlight empty cols A-I
    For chkcol = 1 To 9
        If chkcol <> 5 Then ' ignore column E
            If IsEmpty(Cells(Row, chkcol)) Then
                Cells(Row, chkcol).Interior.ColorIndex = 3
            End If
        End If
    Next
Else
    blnvalid = True
    ' check for cell E being empty and all others not
    For chkcol = 1 To 9
        If chkcol <> 5 Then
            If IsEmpty(Cells(Row, chkcol)) Then
                blnvalid = False
                Exit For
            End If
        End If
    Next
    If blnvalid Then
        Cells(Row, 5).Interior.ColorIndex = 3
    End If
End If 
```

# android - 更新行时SQLite数据库光标错误

> ID：13569323
> 
> 赞同：1
> 
> 时间：2012-11-26T16:47:14.420
> 
> 标签：android, database, sqlite, cursor

我有一个数据库表，其中有一列名为“notes”。此列的数据仅获得“是”或“否”，具体取决于特定行是否是我最喜欢的（添加到收藏夹）。

我正在尝试使用以下代码更新此列的数据：

```
public void updateFavorite(long id) 
   {
       String txt;
       System.out.println("first");
       Cursor c = database.query("recipes", null, "_id=" + id, null, null, null, null);
       c.moveToFirst();
       System.out.println("second");
       int notesIndex = c.getColumnIndex("notes");
       System.out.println("third");
       String fav=c.getString(notesIndex);
       System.out.println("fourth");

       System.out.println(fav);

       if (fav=="yes") {txt="no";}
       else {txt="yes";}

       ContentValues editEsoda = new ContentValues();

       editEsoda.put("notes", txt);

       open(); // open the database
       database.update("recipes", editEsoda, "_id=" + id, null);
       close(); // close the database
       c.close();
   } 
```

尝试检索光标 c 时出现错误：

```
Cursor c = database.query("recipes", null, "_id=" + id, null, null, null, null); 
```

我想读取这一行和列的字符串。如果是“是”，则将其变为“否”。否则，如果它是“否”，则将其变为“是”。

为什么我会出现错误？先感谢您

这是我的 LogCat：

```
11-26 19:00:25.404: D/dalvikvm(30378): GC_FOR_MALLOC freed 4678 objects / 265896 bytes in 79ms
11-26 19:00:25.444: I/System.out(30378): first
11-26 19:00:25.444: D/AndroidRuntime(30378): Shutting down VM
11-26 19:00:25.444: W/dalvikvm(30378): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
11-26 19:00:25.454: E/AndroidRuntime(30378): FATAL EXCEPTION: main
11-26 19:00:25.454: E/AndroidRuntime(30378): java.lang.IllegalStateException: Could not execute method of the activity
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.view.View$1.onClick(View.java:2072)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.view.View.performClick(View.java:2408)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.view.View$PerformClick.run(View.java:8816)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.os.Handler.handleCallback(Handler.java:587)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.os.Looper.loop(Looper.java:123)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.app.ActivityThread.main(ActivityThread.java:4627)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at java.lang.reflect.Method.invokeNative(Native Method)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at java.lang.reflect.Method.invoke(Method.java:521)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at dalvik.system.NativeStart.main(Native Method)
11-26 19:00:25.454: E/AndroidRuntime(30378): Caused by: java.lang.reflect.InvocationTargetException
11-26 19:00:25.454: E/AndroidRuntime(30378):    at development.nk.cretanrecipes.ViewRecipes.favorite(ViewRecipes.java:235)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at java.lang.reflect.Method.invokeNative(Native Method)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at java.lang.reflect.Method.invoke(Method.java:521)
11-26 19:00:25.454: E/AndroidRuntime(30378):    at android.view.View$1.onClick(View.java:2067)
11-26 19:00:25.454: E/AndroidRuntime(30378):    ... 11 more
11-26 19:00:25.454: E/AndroidRuntime(30378): Caused by: java.lang.NullPointerException
11-26 19:00:25.454: E/AndroidRuntime(30378):    at development.nk.cretanrecipes.DatabaseConnector.updateFavorite(DatabaseConnector.java:93)
11-26 19:00:25.454: E/AndroidRuntime(30378):    ... 15 more
11-26 19:00:29.094: I/Process(30378): Sending signal. PID: 30378 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:49:51.163

*   一是`fav=="yes"`不正确。你应该使用：`"yes".equals(fav)`
*   其次，如果您只有两个可能的值，为什么不将您的值作为布尔值存储在数据库中呢？您将节省存储空间。
*   第三，你得到哪个错误？？！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:21:13.357

> 我在尝试检索时遇到错误`Cursor c`
> `Cursor c = database.query("recipes", null, "_id=" + id, null, null, null, null);`

这意味着`database`is `null`，您需要`database = helper.getWritableDatabase()`在此行之前使用并替换`helper`为您的`SQLiteOpenHelper`变量。我猜这就是这样`open()`做的。

连同其他人所说的，让这个方法更快一点：

```
public void updateFavorite(long id) 
{
    open(); // open the database here!
    ContentValues editEsoda = new ContentValues();

    // Only fetch the columns that you are going to work with
    Cursor c = database.query("recipes", new String[] {"notes"}, "_id=" + id, null, null, null, null);

    // If a row exists with the given id
    if(c.moveToFirst()) {
        // Toggle the value of "notes", but this should be a boolean
        if(c.getString(0).equals("yes")
            editEsoda.put("notes", "no");
        else
            editEsoda.put("notes", "yes");

        c.close();
        database.update("recipes", editEsoda, "_id=" + id, null);
    }
    else {
        // No data has this id
    }
    close(); // close the database
} 
```

# algorithm - 从坐标/点数组创建矩形

> ID：13569326
> 
> 赞同：5
> 
> 时间：2012-11-26T16:47:24.293
> 
> 标签：algorithm, rectangles

[http://img853.imageshack.us/img853/2475/picture1eu.jpg](http://img853.imageshack.us/img853/2475/picture1eu.jpg)

我有一个点/坐标的 ArrayList，它代表一个直线多边形。我现在想使用 ArrayList 中存储的点将这个形状分解为矩形。

我已经开始了一个算法，但我无法完成它，我觉得必须有一个更简单的方法：

ArrayList 称为“allCoordinates”。
ArrayList "xMatch" 和 "yMatch" 是 allCoordinates 的子集。

算法：

```
ArrayList yMatch = All matching Coordinates in respect to 'y' 
```

所以在上图的情况下：
(Set 1=[x1, y1]-[x8, y8],
Set2=[x7, y7]-[x2, y2],
Set3=[x4, y4][x5, x5 ],
Set4=[x3, y3][x6, x6])

```
ArrayList xMatch = All matching Coordinates in respect to 'x' 
```

所以在上图的情况下：
(Set 1=[x1, y1]-[x2, y2],
Set2=[x3, y3]-[x4, y4],
Set3=[x5, y5][x6, x6 ],
Set4=[x7, y7][x8, x8])

所以现在我有两个arrayLists，所有垂直边缘和所有水平边缘。现在我需要一些方法来检查它们是否都连接在一起？就像我说的那样，必须有一个更简单的方法......？

编辑：

我能否澄清一下，必须使用在现有坐标上开始和结束的相交线来形成矩形。例如，可以从 (x6, y6) 水平绘制一条线，并在边缘 (x1,y1)-(x8,y8) 上结束。这条线将从现有坐标开始，但不会在现有坐标上结束。因此，该行将无效。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T13:11:33.260

正如您现在可能已经注意到的那样，我不断地回到这个问题。部分原因是我喜欢解决这类问题，但也因为我找不到一个看起来如此简单的优雅算法，这让我有点恼火。

好吧，不要被愚弄了，这不是一个可以通过一些简单的点操作来解决的小问题，尽管看起来确实是这样。造成这种情况的部分原因是，尽管您认为您只是在处理点，但您隐含地也在操作线段和由它们包围的区域，它们也有自己的约束（即线段应该始终形成一个或更闭合的链，并且除了在我们定义它们的顶点之外不能相交）。

此外，您的算法必须适用于您提供的*任何*类型的输入。也就是说，不允许仅仅因为您输入的多边形以您的算法不喜欢的方式定向而产生没有答案或错误答案。
但是，您可以做的是限制算法接受的输入类型。因此，要求输入多边形仅包含轴对齐的线段是完全有效的。
（“以错误的方式定向”和“仅轴对齐的段”之间的区别在于，第一个是一个模糊的标准，如果不对算法进行测试就无法确定 - 而第二个要求可以）。

概括地说，我们正在寻找一种将任何直线多边形（即仅由轴对齐的线段组成）水平划分为矩形的方法。

![直线多边形示例](../Images/06311056d85408b47ceb75155eafc945.png) *直线多边形示例*

这是计划：

1.  选择我们的积木
2.  允许额外的顶点
3.  在网格上对齐。
4.  使用大小不等的网格单元。
5.  哪些单元格在您的多边形内？
6.  构造矩形。

### 选择我们的积木

尽管这些是实现细节，但提前弄清楚这一点可能会帮助您更好地了解算法的工作原理。

在代码中，我们将使用以下类型的对象作为基本构建块来表示我们的多边形：

*   点，由 x 和 y 坐标组成。（例如使用[Point2D.Double](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Point2D.Double.html)）
*   段，由起点和终点组成（例如使用[Line2D.Double](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Line2D.Double.html)）
*   多边形，由一个封闭的段链组成（例如，使用 Line2D.Double 的 ArrayList），其中一个段的结束点与下一个段的起点相同。

此外，我们将使用网格，它可以建模为二维数组。

### 允许额外的顶点。

您说“*必须使用在现有坐标上开始和结束的相交线来形成矩形。* ”。但是，请注意，仅使用现有顶点无法将大多数直线多边形划分为矩形 - 请参阅上面的示例（以及您之前提供的大篷车示例）。

因此，这个约束将不得不消失——即使我们实际上不会显式地创建新顶点。

### 在网格上对齐。

思想实验：如果您的多边形仅存在长度为 10、20、30 或 40...（即 10 的倍数）的（轴对齐）段，该怎么办？然后我们可以将多边形投影到网格上，并使用位于多边形内部的网格单元来组成矩形。此外，确定这些矩形的尺寸是一件轻而易举的事：只需计算位于多边形内的水平连续单元的数量并乘以 10；那是你的宽度。

![网格对齐的多边形](../Images/9c5255b606cb431157505291b9935a61.png) *网格对齐的多边形*

好主意，除了：

*   多边形不仅包含相同或多个长度的段
*   我们如何确定哪些网格单元位于多边形内？

接下来我们将解决这些问题。

### 使用大小不等的网格单元。

如果您考虑一下，没有真正的理由让所有网格单元具有相同的宽度和高度。因此，我们可以设计一个网格，以使我们的多边形完美对齐的方式间隔开。

要获取网格水平轴的宽度：

*   收集组成多边形的顶点的所有 x 坐标。
*   对它们进行重复数据删除和排序，以增加价值。
*   然后两个后续值之间的差异定义了该列的宽度。

![网格与多边形对齐](../Images/6dce47e801aa348557c7b1f87fa98b04.png) *网格与多边形对齐*

显然，单元格的高度可以用相同的方式确定。您应该确定这些宽度和高度，并将它们分别存储到两个名为`gridWidths`和`gridHeights`的数组中。

现在我们知道了单元格的数量及其尺寸，我们可以开始对网格内容进行建模。

### 哪些单元格在您的多边形内？

请记住，我们的多边形存储为线段链。要确定网格单元是否位于该多边形内，我们可以使用[奇偶规则](http://en.wikipedia.org/wiki/Point_in_polygon)：从多边形外部*到我们要测试的单元的中心构造一条线段，并计算该线段与多边形的段（即使用[Line2D.Double 的 intersectsLine()](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/geom/Line2D.html#intersectsLine%28java.awt.geom.Line2D%29)方法）。如果数字是偶数，它位于多边形之外，如果它是奇数，它在多边形内。

*-*最好只在单元格中心之间构建水平线段（如示例所示），这样您就不会冒险与线段端点相交 - 这可能算作 0 或 2 个交叉点，从而弄乱了您的总数.*

因此，我们将把这个网格建模为`grid`一个二维布尔数组。以这种方式处理网格的每个单元格，并将相应的点标记`grid`为 true（内部多边形）或 false（外部多边形）。

![基于奇偶规则的内 (T) 或外 (F)](../Images/4a6fc85e536479682a4b7ecfe245ebf4.png) *基于奇偶规则的内 (T) 或外 (F)*

### 构造矩形。

现在我们有了多边形的网格表示，以及每个单元格的实际宽度和高度，我们可以开始构建矩形了。我假设您只对每个矩形的宽度和高度感兴趣，而不是对形成矩形的实际顶点坐标感兴趣（尽管现在这也很容易）。

```
Foreach row in grid
  run_start = null
  Foreach cell C in row
    if C is marked as true and run_start = null
      //Found the start of a new run
      run_start = C
    else if C is marked as false and run_start != null
      //Found the end of a run
      The cells [run_start...C] form a horizontal rectangle.
      Use the gridWidths and gridHeights arrays to determine the 
      dimensions, and report this rectangle as a result

      //Prepare for the next run
      run_start = null 
```

![多边形，分割成矩形。](../Images/d98753daba4631e47815898351386b66.png) *多边形，分割成矩形。*

请注意，左上角的两个矩形共享相同的起始和结束 x 坐标，因此可以被视为一个矩形。如果你愿意，你可以实现一个额外的通道来合并这些类型的矩形。

### 结论

通过将直线多边形映射到网格上，我们可以轻松地将其水平划分为矩形，而无需求助于更高级的几何数据结构。
请注意，可以进行一些优化以使该算法运行得更快，但我认为这对于当前输入大小并不重要，并且会使实现更加困难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:11:41.210

这并不容易：

我认为你不会自己成功解决这个问题：

更多信息见

> Preparata，Shamos：计算几何：第 8 章：矩形的几何。

您首先应该熟悉平面扫描算法和区间树。

如果我发现更多，我会更新。发现更多：

[寻找最少矩形以覆盖一组矩形而不重叠的算法](https://stackoverflow.com/questions/5919298/algorithm-for-finding-the-fewest-rectangles-to-cover-a-set-of-rectangles)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T22:47:35.310

注意：我不是在这里寻求理论上的最佳解决方案，而只是寻求一种能够产生正确答案并且在具有 100 个顶点的输入多边形上工作得足够快的方法。此外，现在不考虑特殊情况，例如其中有孔的输入多边形。此外，不是 x-monotone* 的多边形需要预处理，我还不会讨论。
*含义：从P中的任何最左边的位置开始，您可以通过向上、向下或向右移动到达任何其他位置，但永远不会向左。

**假设**
如您[**之前的帖子**](https://stackoverflow.com/questions/13399666/java-fit-minimum-amount-of-rectangles-into-polygon)中所述，部分问题是在哪个方向铺设装饰板（或“矩形”）以尽量减少使用的装饰板数量。我将假设您的输入多边形 P 将主要由轴对齐的段组成，因此方向的选择减少到水平或垂直。对于其余部分，我将假设单个装饰板始终垂直定向（即从上到下运行）。为了计算水平铺面板的结果，只需将 P 旋转 90 度。

**问题陈述**
我们将尝试用铺面板覆盖 P，每个铺面板的长度不受限制，最大宽度为 W。更具体地说，我们正在寻找一种覆盖范围，使所使用的所有铺面板的总长度最小化。落在 P 之外的已用铺面板的部分（即浪费）不能用于覆盖 P 的其他部分。为了最大限度地减少浪费，将铺面板的左边界或右边界对齐是有意义的P 的一个顶点，或将一块铺板放置在另一个铺板旁边。

**解决方案**
第一步是将 P 划分为垂直板的集合：获取 P 中所有顶点的不同 x 坐标并对它们进行排序：每对连续的 x 坐标然后定义 P 的板 S。 ![图1](../Images/48b48c924d7cd53ebeebd1789a749095.png)

接下来要认识到，对于每个楼板 S，我们有 4 种可能的方式来对齐（一个或多个）铺面板：
* (SL) 从左开始，即将铺面板的左侧与楼板的左侧对齐.
* (CL) 继续向左，即继续铺面板的图案，由其左侧的板确定。
* (CR) 继续向右，即继续铺面板的图案，由其右侧的板确定。
* (SR) 从右开始，即将铺面板的右侧与楼板的右侧对齐。

因此，如果我们考虑每个楼板 S 的 4 种对齐方式的所有可能组合，我们就有所有可能的铺面板配置。请注意，并非所有对齐组合都是允许的；SL和SR可以用于任何slab，但CL只能在它左边的slab是SL或CL的情况下使用，而CR只能在它右边的slab是SR或CR的情况下使用。

-Snip-*这个问题似乎与这里试图解决的问题有很大不同，所以我不会完成这篇文章。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:23:30.470

我找到了一个解决方案，但它可能不是最优化的。 所以这里我们有我们的坐标和我前面提到的两个 ArrayList——xMatch 和 yMatch。 xMatch = 具有匹配 x 坐标 的坐标对的 ArrayList yMatch = 具有匹配 y 坐标的坐标对的 ArrayList

[![关联](../Images/ad1957a2ac914bb8dcc7c571a04fd7df.png)](https://i.stack.imgur.com/WJAuR.png)

我创建了一个名为“Point2Point”的类，它以特定顺序保存了两个坐标。xMatch 和 yMatch 都属于“Point2Point”类型。像任何向量一样，顺序很重要。我使用的顺序是：

Point1 = 起点
Point2 = 终点。

因此，现在使用“for”循环，我将 xMatch 中的一个元素与 yMatch 中的一个元素相对于 Point1（起点）进行匹配。将它们配对将为您提供以下形状：

[![链接2](../Images/69df9ed9cbf72368cb98eee76f0526b3.png)](https://i.stack.imgur.com/N6Idy.png)

现在这个图你可以看到，为了让这两个向量成为矩形的一部分，坐标 (?, ?) 必须存在。使用矩形的属性我知道 (?, ?) 等于 (yMatch.Point2.x, xMatch.Point2.y) 或相对于该图 (x3, y2)。

所以现在我知道要查找哪些坐标，我可以搜索我的 ArrayList“allCoordinates”来查看该坐标是否存在。如果是 - 我有一个矩形，如果不是 - 它是一个哑巴！

# iphone - 缩放 MKMapView 以适合折线点

> ID：13569327
> 
> 赞同：33
> 
> 时间：2012-11-26T16:47:26.523
> 
> 标签：iphone, objective-c, ios, mkmapview, cllocation

我有一个数组 allCollections，它包含用户通过我的 iOS 应用程序记录的以编程方式创建的 CLLocations 数组。allCollections 中的每个子数组都保存了行程中的所有位置点。

我从 allCollections 的数组中的 CLLocations 中绘制 MKPolylines，以表示 MKMapView 上的这些行程。我的问题是：将折线添加到地图后，我将如何以编程方式缩放和居中地图以显示所有折线？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-09-27T03:18:38.953

```
-(void)zoomToPolyLine: (MKMapView*)map polyline: (MKPolyline*)polyline animated: (BOOL)animated
{
    [map setVisibleMapRect:[polyline boundingMapRect] edgePadding:UIEdgeInsetsMake(10.0, 10.0, 10.0, 10.0) animated:animated];
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-04T21:51:39.190

```
-(void)zoomToPolyLine: (MKMapView*)map polyLine: (MKPolyline*)polyLine 
animated (BOOL)animated
{
MKPolygon* polygon = 
    [MKPolygon polygonWithPoints:polyLine.points count:polyLine.pointCount];

[map setRegion:MKCoordinateRegionForMapRect([polygon boundingMapRect]) 
     animated:animated];
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-12-07T18:17:46.877

迅速：

```
if let first = mapView.overlays.first {
    let rect = mapView.overlays.reduce(first.boundingMapRect, combine: {MKMapRectUnion($0, $1.boundingMapRect)})
    mapView.setVisibleMapRect(rect, edgePadding: UIEdgeInsets(top: 50.0, left: 50.0, bottom: 50.0, right: 50.0), animated: true)
} 
```

这将缩放/平移以适应所有带有一点缓冲区的叠加层

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-26T20:45:44.667

您可以遍历所有`CLLocations`记录`max/min`坐标并使用它来设置视图矩形，就像他们在这个问题[iOS MKMapView zoom to show all markers](https://stackoverflow.com/questions/3434020/mkmapview-zoom-to-bounds-with-multiple-markers)上所做的那样。

或者您可以浏览每个叠加层并获取它们`boundingMapRect`然后使用`MKMapRectUnion`（[http://developer.apple.com/library/ios/documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html#//apple_ref/c/func /MKMapRectUnion](http://developer.apple.com/library/ios/documentation/MapKit/Reference/MapKitFunctionsReference/Reference/reference.html#//apple_ref/c/func/MKMapRectUnion) ) 将它们全部组合起来，直到你有一个`MKMapRect`覆盖它们并使用它来设置视图。

```
[mapView setVisibleMapRect:zoomRect animated:YES] 
```

这个问题显示了一个简单的循环，按照我的建议结合了联合中的 maprects：[MKMapRect zooms too much](https://stackoverflow.com/questions/8465149/mkmaprect-zooms-too-much)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2017-03-17T10:45:50.633

**Swift 3**版 garafajon 优秀代码

```
 if let first = self.mapView.overlays.first {
        let rect = self.mapView.overlays.reduce(first.boundingMapRect, {MKMapRectUnion($0, $1.boundingMapRect)})
        self.mapView.setVisibleMapRect(rect, edgePadding: UIEdgeInsets(top: 50.0, left: 50.0, bottom: 50.0, right: 50.0), animated: true)
    } 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-11-15T07:55:24.193

Swift 4 / Fundtimer 答案的略微修改版本。

```
 func setVisibleMapArea(polyline: MKPolyline, edgeInsets: UIEdgeInsets, animated: Bool = false) {
    mapView.setVisibleMapRect(polyline.boundingMapRect, edgePadding: edgeInsets, animated: animated)
} 
```

使用路线的折线调用上述方法并保留默认的不动画，并在周围添加 10 的小边缘插图：

```
setVisibleMapArea(polyline: route.polyline, edgeInsets: UIEdgeInsetsMake(10.0, 10.0, 10.0, 10.0)) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-01T04:56:55.667

我有另一个解决这个问题的方法

```
private func mapRegion() -> MKCoordinateRegion? {

    let latitudes = self.coordinates.map { location -> Double in

        return location.latitude
    }

    let longitudes = self.coordinates.map { location -> Double in

        return location.longitude
    }

    let maxLat = latitudes.max()!
    let minLat = latitudes.min()!
    let maxLong = longitudes.max()!
    let minLong = longitudes.min()!

    let center = CLLocationCoordinate2D(latitude: (minLat + maxLat) / 2,
                                        longitude: (minLong + maxLong) / 2)
    let span = MKCoordinateSpan(latitudeDelta: (maxLat - minLat) * 1.3,
                                longitudeDelta: (maxLong - minLong) * 1.3)
    return MKCoordinateRegion(center: center, span: span)
} 
```

其中坐标是数组`CLLocationCoordinate2D`

希望对某人有帮助

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-07-25T06:54:43.333

@Fundtimer 指出了正确的方式，唯一的问题是 Padding 需要根据视觉需求进行调整，这样它将支持所有其他叠加层，以下是所有叠加层的通用解决方案。

```
-(void)zoomIntoExistingMapObjectForAnnot:(CustomMapAnnotation *)annot
{
   id overlay = annot.shape;//I have overlay property in custom annotation class.
   [_mapView setVisibleMapRect:[overlay boundingMapRect] edgePadding:UIEdgeInsetsMake(150.0, 150.0, 150.0, 150.0) animated:YES];
} 
```

# android - 来自html的android电子书

> ID：13569328
> 
> 赞同：-3
> 
> 时间：2012-11-26T16:47:34.870
> 
> 标签：android

我想为安卓开发一本电子书。我的数据在互联网上，但不是 json 或仅 xml 的 html 页面。数据经常变化。所以数据必须经常更新，并且必须保存在手机上，这样人们就可以在没有互联网的情况下阅读。如何从 html 中解析数据？我可以转换页面json吗？你能建议我一些方法吗？我必须使用sqllite还是保存页面sd卡？

数据页= [http://www.mevzuat.adalet.gov.tr/html/388.html](http://www.mevzuat.adalet.gov.tr/html/388.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:50:15.827

将其存储为普通文件，使用基本的 HTTP 代码通过使用 AlarmManager 的定期轮询来指示更新，并将其显示在 WebView 中。

基本上，如果您的 html 页面被格式化为正确的移动显示，则您不需要解析任何内容。

# javascript - 暂停 jscrollpanel 然后取消暂停 [当窗格内部有滑块时停止平板电脑上的滚动窗格移动。]

> ID：13569329
> 
> 赞同：1
> 
> 时间：2012-11-26T16:47:35.937
> 
> 标签：javascript, jquery, jscrollpane

我已经阅读了 jsscrollpane 文档并查看了示例，但是我找不到任何关于 re:this 的内容。

基本上我的可滚动区域中有一个常规的 JQuery 滑块。当我在平板设备上从左到右/从右到左拖动时，如果我的手指向上或向下移动，滚动区域会向上或向下移动。

我只是想要一种方法来暂时锁定 JsScrollPane 在幻灯片期间无法工作，然后在完成解锁后再次工作。它有一个很棒的重绘功能，在我需要的大多数情况下都可以使用，但似乎没有暂停、停止、销毁功能，让我在滚动条开始拖动时锁定窗格 - 我想让它在视觉上保持在锁定/解锁期间相同。

任何帮助将不胜感激，即使不可能做到。

谢谢，戴夫

# jquery - jQuery keyup 检查并点击触发 ajax

> ID：13569338
> 
> 赞同：0
> 
> 时间：2012-11-26T16:48:18.930
> 
> 标签：jquery, jquery-click-event

我有一个输入，在输入每个字符后检查密码。这增加了对每个键的 POST 检查。

确认密码检查后，将启用提交按钮，当您单击此按钮时，它会通过 ajax 将详细信息发送到 php。但它实际上触发的次数与按键检查的次数相同。有没有办法限制只开火一次？如果我的密码中有 6 个字符，那么它会完成 6 次 keyup 检查和 6 次点击更新。

**Keyup密码检查**

```
$('input[name=currentpassword]').keyup(function(){
    var currentcheck = $(this).val();
    var dataString='thisConfirm='+ currentcheck +'&userid='+$('input[name=userid]').val();
    setTimeout(function(){
        PasswordChecking =  $.ajax({
                                type:"POST",
                                url:"/assets/inc/password-check.php",
                                data:dataString,
                                dataType:'html',
                                context:document.body,
                                global:false,
                                async:true,
                                success:function(data){
                                    //return data
                                    var PasswordChecking="1";
                                    console.log(PasswordChecking);
                                    console.log("here you would decide on data for valiadation success");
                                    checkconfirms(emailconfirm, passconfirm, PasswordChecking);

                                }
                            }).responseText;
    }, 1000); 
```

});

**位于 checkconfirms 函数内的 jQuery 更新按钮**

```
$('input[name=updatedetails]').click(function(){
                    var newEmailValue = $('input[name=newemailconfirm]').val();
                    var accountID   =   $('input[name=userid]').val();              
                    var dataString='email='+ newEmailValue +'&userid='+accountID;
                    $.ajax({
                            type:"POST",
                            url:"/assets/inc/user-change-email.php",
                            data:dataString,
                            dataType:'html',
                            context:document.body,
                            global:false,
                            async:false,
                            success:function(data){
                                var overlay = $("<div/>").addClass("overlay");
                                var logindialog = $("<div/>").addClass("popup-login");
                                $("body").append(overlay);
                                $("body").append(logindialog);
                                $(".popup-login").prepend('<p><label for="email">Email</label><input type="text" name="reloginemail" id="email"></p><p><label for="password">Password</label><input type="password" name="reloginpass" id="password"></p><input type="button" name="relogindude" value="sign in">');
                                $(".overlay").fadeIn();
                                $(".popup-login").fadeIn();
                                // Once the pop up is created this enable the click function which will enable the ajax form check.
                                $('input[name=relogindude]').click(function(){
                                    var email = $('input[name=reloginemail]').val();
                                    var password = $('input[name=reloginpass]').val();              
                                    var dataStringed='newemail='+ email +'&newpassword='+password;
                                    $.ajax({
                                        type:"POST",
                                        url:"/assets/inc/login.php",
                                        data:dataStringed,
                                        success:function(data){
                                            window.location.reload();
                                        }
                                    });
                                });//End relogindude click function
                            }
                    });//End updatedetails click function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:54:16.897

试试这个，清除超时以限制请求数量：

```
var timeout;
$('input[name=currentpassword]').keyup(function(){
    var currentcheck = $(this).val();
    var dataString='thisConfirm='+ currentcheck +'&userid='+$('input[name=userid]').val();
    if(typeof timeout != 'undefined') clearTimeout(timeout);
    timeout = setTimeout(function(){
        PasswordChecking =  $.ajax({
                                type:"POST",
                                url:"/assets/inc/password-check.php",
                                data:dataString,
                                dataType:'html',
                                context:document.body,
                                global:false,
                                async:true,
                                success:function(data){
                                    //return data
                                    var PasswordChecking="1";
                                    console.log(PasswordChecking);
                                    console.log("here you would decide on data for valiadation success");
                                    checkconfirms(emailconfirm, passconfirm, PasswordChecking);

                                }
                            }).responseText;
    }, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:53:54.617

除了您尝试做的事情是否是一个好主意之外，如果您想停止触发超时（当按下另一个键时），那么您需要存储由`setTimeout`. 然后你就可以打电话`clearTimeout`取消了。

所以像这个片段：

```
var timerID = 0;

$('input[name=currentpassword]').keyup(function(){
    //...
    if (timerID) {
        clearTimeout(timerID);
        timerID = 0;
    }
    //...
    timerID = setTimeout(function() {
    //... 
```

现在，如果在超时之前发生另一个键，则不会为上一个键调用超时。

# c# - 为什么要使用完全限定名称？

> ID：13569342
> 
> 赞同：3
> 
> 时间：2012-11-26T16:48:29.567
> 
> 标签：c#, .net, vb.net, namespaces

既然引入了[var](http://msdn.microsoft.com/en-us/library/bb383973.aspx)关键字，为什么要使用为什么要使用全限定名称呢？

`var`有效地减少了变量声明的类型。因此，可以保留完整的声明而不会使代码膨胀。这让我想知道，您为什么还要声明`namespace`使用情况？

```
// A lot of typing, but unambiguous.
System.Drawing.Point a = new System.Drawing.Point();

// using System.Drawing, Point possibly ambiguous.
Point b = new Point();

// using System.Drawing, Point possibly ambiguous.
var c = new Point();

// Less typing, still unambiguous.
var d = new System.Drawing.Point(); 
```

这里的最佳做法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T16:49:40.757

命名空间真正有用的原因有以下几个：

1.  帮助区分同名的类
2.  帮助将项目“结构化”成有意义的部分

正如 Oded 所提到的，仅这些原因就非常重要——尽管不常见，但歧义并非不可能，在这种情况下，使用命名空间将是必要的。

[在此处](http://msdn.microsoft.com/en-us/library/dfb3cx8s%28v=vs.100%29.aspx)了解有关名称空间的更多信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T16:59:50.853

这似乎与名称空间无关，而与在代码中使用静态类型有关。我听到的关于不使用`var`扩展的主要论点是当变量类型通过查看声明时不明显时。考虑以下代码：

```
var readyTasks = _config.GetTasks().Where(x => x.Ready); 
```

你到底怎么知道`readyTasks`是什么？ `IEnumerable`考虑到`Where()`返回的内容，这是给定的，但除此之外，摆脱这种类型的唯一方法是将鼠标悬停`var`并让 Visual Studio 为您找出它。这变得更加复杂，因为 LINQ 语句变得更长，可枚举对象被插入到`foreach`循环等逻辑结构中，列表不断增加。

（我就是其中之一）的支持者会反驳说，从长远来看`var`，这是一件小事，可以为您带来更少的麻烦。`var`静态类型声明从来都不是程序员舒适度的考虑因素。它们首先适用于编译器。因此，仅仅因为你已经习惯了就持有这个神器似乎没有任何意义。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T16:59:07.157

我认为您的问题实际上是*为什么要使用完全限定的名称？*而不是*为什么要使用命名空间？*.

`Object Oriented`命名空间在任何语言中都非常重要。如果您有 2 个具有相同名称的类（这在 .NET 框架中已经经常发生），您应该如何区分它们？这就是命名空间的意义——如果在同一个命名空间中有 2 个同名的类，则代码将无法编译。（当然，除非它们是部分类，这是完全不同的故事）。

我经常遇到的一个例子是`List`. 我们`NHibernate`在这里的几个项目中使用，它有自己的`List`. 如果我正在实例化 a `List`，我不能只做：

```
var list = new List<string>(); 
```

.. 因为编译器不知道我是想要 a`NHibernate.Mapping.List`还是`System.Collections.Generic.List`.

该`var`关键字对 非常有用，但如果您在另一端`type inference`没有正确的`using`语句或名称，那将无济于事。`Fully Qualified`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T16:56:59.390

使用命名空间
1\. 定义范围
2\. 区分不同命名空间/项目/程序集中的相同类名。

var 的使用无论如何都没有链接到命名空间。命名空间别名处理的类型更少。

[使用命名空间](http://msdn.microsoft.com/en-us/library/dfb3cx8s%28v=vs.100%29.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T17:05:11.207

对于一次性测试应用程序（例如检查堆栈溢出答案），我不使用命名空间。对于其他任何事情，我都愿意。这只是一个组织的事情 - 如果您要重用代码，将它与您也在同一上下文中重用的其他代码分开会很有帮助。我的意思是，如果您正在使用 LibraryX 和 LibraryY 创建应用程序，那么能够在应用程序中区分它们是很有用的。例如，它们可能都使用相同的类名 - 如果您不使用命名空间，这将使代码变得丑陋。

除此之外，如果您使用 Visual Studio 进行编码，实际上不包含命名空间需要做更多的工作——您必须修改项目以为其提供一个空的默认命名空间。

有关命名的信息，请参阅：[命名空间命名约定](http://msdn.microsoft.com/en-us/library/893ke618%28v=vs.71%29.aspx)

# android - 将单选按钮值“int”保存到共享首选项

> ID：13569348
> 
> 赞同：1
> 
> 时间：2012-11-26T16:48:53.983
> 
> 标签：android, android-intent, radio-button, sharedpreferences, radio-group

我仍然有这个单选按钮的问题:(。我仍在尝试创建一个设置页面，允许用户选择他们的文本颜色，一旦他们从这个设置活动和所有其他活动中选择了听共享首选项的变化以及.

我知道如何保存文本并从活动之间的共享偏好中获取文本但是 int ？因为我需要单选检查值，所以此方法将传递给其他活动以设置这些文本视图颜色。

谁能帮我检查一下代码吗？

我对 android 和一般编程非常陌生。

```
public class Text_Colour extends Activity implements OnSharedPreferenceChangeListener {

    RadioButton rb1, rb2, rb3, rb4, rb5;
    TextView tv1, tv2;
    RadioGroup rg1;
    Button bt1;
    String red, yellow, green, blue;

    public static final String PREFS_NAME = "MyPrefsFile"; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.colours);

        loadPreferences();

        tv1 = (TextView)findViewById(R.id.textview1);
        tv2 = (TextView)findViewById(R.id.textview2);
        bt1 = (Button) findViewById(R.id.button1);
        rb1 = (RadioButton) findViewById(R.id.radioButton1);
        rb2 = (RadioButton) findViewById(R.id.radioButton2);
        rb3 = (RadioButton) findViewById(R.id.radioButton3);
        rb4 = (RadioButton) findViewById(R.id.radioButton4);
        rb5 = (RadioButton) findViewById(R.id.radioButton5);
        rg1 = (RadioGroup) findViewById(R.id.radiogroup1);

        bt1.setOnClickListener(Colour_change_b);

        //tv1.setOnSharedPreferenceChangeListener(this);

    }

    View.OnClickListener Colour_change_b = new View.OnClickListener() {

    public void onClick(View v) {

        if(v == bt1) {

             if (rb1.isChecked()== true) {
                 tv2.setTextColor(Color.RED);

                } 
                if (rb2.isChecked() == true) {
                    tv2.setTextColor(Color.YELLOW);

                } 
                if (rb3.isChecked() == true) {
                    tv2.setTextColor(Color.GREEN);

                } 
                if (rb4.isChecked() == true) {
                    tv2.setTextColor(Color.BLUE);

                } 
                if (rb5.isChecked() == true) {
                    rb5.getId();
                    tv2.setTextColor(Color.BLACK);

                } 
                else { 
                }
                SharedPreferences settings1 = getSharedPreferences(PREFS_NAME, 0);
                SharedPreferences.Editor editor = settings1.edit();
                editor.putInt("colour", rb1.getId());
                editor.commit();
                finish();   
    }
    }
    };
    private void loadPreferences() {
        // TODO Auto-generated method stub
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
        tv1.setTextColor(settings.getId("colour", ""));
        settings.registerOnSharedPreferenceChangeListener(Text_Colour.this);
    }

    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key) {

        loadPreferences();
    }   
    } 
```

非常感谢你们的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:59:08.060

使用您的`RadioGroup`. 您可以使用`setOnCheckedChangeListener(RadioGroup.OnCheckedChangeListener listener)`立即接收新颜色的值，并且可以使用`getCheckedRadioButtonId()`获取选中的 radioButtonId。

但是，有一个问题。*id*是android在编译时生成的。不能保证在编译之间保持一致。如果`indexOfChild(View child)`要获取 RadioGroup 中 RadioButton 的索引，请使用此选项。

要获得值，您需要 a `getInt()`，然后是 a `getChildAt(int index)`，然后是 a`getId()`和 a `check(int id)`。

# arrays - 连接 Verilog 阵列：多个驱动程序

> ID：13569351
> 
> 赞同：1
> 
> 时间：2012-11-26T16:49:04.373
> 
> 标签：arrays, memory, verilog, drivers

我将一系列值存储在内存数组中。当需要将此序列输出到 LED 显示屏时，我遇到了多个驱动程序的错误。

以下是我正在使用的代码片段：

```
reg [3:0] p[0:63]; // pattern sequence
....
led = p[playcnt];  // display current pattern; playcnt loops from 0 to 63 
```

似乎 Verilog 正在尝试将内存阵列中的每个寄存器连接到 LED 输出，这会导致“多驱动程序”错误。有没有简单的方法可以将内存阵列的单个输出连接到 LED 输出，并使用 playcnt 变量作为内存阵列的地址？

谢谢你的帮助！非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T10:33:47.277

请提供与“led”相关的所有代码，并说明“playcnt loops from 0 to 63”是什么意思。

如果你有类似这样的代码：

```
always_comb 
  for (int playcnt=0; playcnt<64; playcnt++)
    led = p[playcnt]; 
```

那么您确实将所有寄存器连接到一个端口。

如果我正确理解了您的意图，那么您应该有与此类似的代码（未经测试）：

```
reg  [3:0] p [0:63];
reg  [5:0] playcnt;
wire [3:0] led;

always @ (posedge clk or negedge rst)
  if (!rst)
    playcnt[5:0] <= 6'h0;
  else
    playcnt[5:0] <= playcnt[5:0] + 6'h1;

assign led[3:0] = p[playcnt]; 
```

# c# - SqlCeCommand 简单插入不插入

> ID：13569352
> 
> 赞同：0
> 
> 时间：2012-11-26T16:49:05.170
> 
> 标签：c#, sql-server-ce

我正在尝试为 SQL Server CE 数据库编写一个简单的插入语句，并且我的代码运行良好！...除了该行实际上并没有插入到数据库中...

我的代码是：

```
public static int InsertTourCreater(string userName, string password)
{
    SqlCeConnection connection = GuidedTourDB.GetConnection(); //Returns connection
    string insertStatement =
            "INSERT INTO [Tb_Creater] " +
            "([User_Name], [Password]) " +
            "VALUES (@UserName, @Password)" ;
    SqlCeCommand insertCommand = new SqlCeCommand(insertStatement, connection);
    insertCommand.Parameters.Add(new SqlCeParameter("@UserName", SqlDbType.NVarChar)).Value = userName;
    insertCommand.Parameters.Add(new SqlCeParameter("@Password", SqlDbType.NVarChar)).Value = password; 

    try
    {
        connection.Open();
        int success = insertCommand.ExecuteNonQuery();
        return success; 
    } 
```

代码运行良好。在调试模式下单步执行，连接打开，所有值都被正确添加，`ExecuteNonQuery()`返回值为 1，但随后我`Tb_Creater`在服务器资源管理器中查看表数据，但记录不存在。

我已经刷新甚至重新启动了 Visual Studio。不在那里。不抛出异常。

注意：我添加这样的参数，而不是`AddWithValue()`因为我担心`varchar`默认情况下字符串会转换为（在 SQL Server CE 中不可用）并导致问题，但是代码的操作方式相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-15T14:55:51.947

我碰巧遇到了这个问题并解决了。来到您的调试输出路径并**以管理员模式**运行您的应用程序（exe） 。因为我看到了您无权访问 sdf 文件的日志消息。实际上视觉工作室中没有任何错误弹出窗口。

# performance - 估计更新 db2 中 500 万条记录的时间

> ID：13569357
> 
> 赞同：0
> 
> 时间：2012-11-26T16:49:13.623
> 
> 标签：performance, db2, sql-update

```
I have table Customer_address_tx having structure below..

cust_id_pk      BIGINT
comm_fk         BIGINT 
```

**`Now I want to update comm_fk with null where comm_fk is zero, Such records lies in range 280000000 to 320000000(cust_id_pk)`**

在上述范围内，有 500 万条这样的记录 comm_fk=0 我想用 null 更新

```
My Update query 
```

**db2 "更新 Customer_address_tx set comm_fk=null where comm_fk =0"**

为了有效地运行上面的查询，我将上面的更新语句分成多个更新语句，根据每个**5000的范围 280000000 到 320000000(cust_id_pk)**

**db2 "update Customer_address_tx set comm_fk=null where comm_fk =0 and cust_id_pk 在 280000000 和 280005000 之间"**

**db2 "update Customer_address_tx set comm_fk=null where comm_fk =0 and cust_id_pk 在 280005001 和 280010000 之间"**

**. . . .**

以上是正确的方法..？

欢迎任何其他方法...

# ios - Flurry的基本步骤是做什么的？

> ID：13569360
> 
> 赞同：0
> 
> 时间：2012-11-26T16:49:17.670
> 
> 标签：ios, flurry

Flurry 在其iOS的[基本步骤中包含以下内容。](http://support.flurry.com/index.php?title=Analytics/GettingStarted)

```
1\. Download the Flurry iOS SDK
2\. Add the Flurry lib to your project
3\. Incorporate the following two lines of Flurry code:

#import "Flurry.h"
- (void)applicationDidFinishLaunching:(UIApplication *)application 
{
     [Flurry startSession:@"YOUR_API_KEY"];
     //your code
} 
```

我已在我的应用程序中完成此步骤并在模拟器上运行该应用程序。但由于[更新显示在仪表板上需要时间](https://stackoverflow.com/questions/5472619/flurry-in-iphone-app)，我不确定此步骤是否足以跟踪用户启动应用程序然后关闭它的最简单情况。这个基本步骤是否足以监控应用程序的启动和关闭？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:58:13.817

是的，这应该足够了。

但是，请注意 Flurry 会尝试发送成批的事件。如果您启动应用程序，Flurry 不会立即提交统计信息。如果您正在开发并总是从 Xcode 重新启动您的应用程序，这可能会导致一些意外行为。这样，它可能永远不会到达实际提交报告的地步。Flurry[在他们的文档中写道](http://support.flurry.com/index.php?title=Analytics/Code/Doc)：

> 如果在模拟器上测试，请务必通过主页按钮将 App 发送到后台。Flurry 依赖于 iOS 生命周期来完成完整的报告。

# html - HTML5 输入数字之间的数字

> ID：13569365
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:49:37.547
> 
> 标签：html, input, numeric

如果输入在 1-100 之间，我如何检查 HTML5？

```
<input type="numeric" name="count" pattern="[1-9]" /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T16:51:37.613

Using `min` and `max`.

```
<input type="number" name="count" min="1" max="100"> 
```

Note the `type` is `number`.

# java - CSVSchema 和 NUMBER

> ID：13569367
> 
> 赞同：1
> 
> 时间：2012-11-26T16:49:41.257
> 
> 标签：java, csv, jackson

我创建了一个将在 CSVMapper.schemaFor 中使用的 Java POJO：

```
@JsonPropertyOrder({ "mkg_brnd_id", "prnt_brnd_id" })
public class MKG_BRND {
    public int mkg_brnd_id;
    public int prnt_brnd_id;
} 
```

但是，这些字段的 CSV 值可能是数字或空值。当它遇到空值时，我收到错误消息：

```
Can not construct instance of int from String value 'null': not a valid Integer value 
```

我尝试使用 @JsonFormat 注释来指示应该允许数字或空值的 NUMBER：

```
@JsonPropertyOrder({ "mkg_brnd_id", "prnt_brnd_id" })
public class MKG_BRND {
    @JsonFormat(shape=JsonFormat.Shape.NUMBER)
    public int mkg_brnd_id;
    @JsonFormat(shape=JsonFormat.Shape.NUMBER)
    public int prnt_brnd_id;
} 
```

但是没有喜悦，我仍然收到错误消息。

我还尝试了以下方法：

```
@JsonPropertyOrder({ "mkg_brnd_id", "prnt_brnd_id" })
public class MKG_BRND {
    @JsonFormat(shape=JsonFormat.Shape.NUMBER)
    public Integer mkg_brnd_id;
    @JsonFormat(shape=JsonFormat.Shape.NUMBER)
    public Integer prnt_brnd_id;
} 
```

关于如何创建允许数值具有“null”值的模式的想法？

**更新（11/26/2012 @ 11:56 am CST）：**

最终不得不重写 getter/setter 并自己操纵这些值：

```
@JsonPropertyOrder({ "mkg_brnd_id", "prnt_brnd_id" })
public class MKG_BRND {
    @JsonFormat(shape=JsonFormat.Shape.NUMBER)
    public Integer mkg_brnd_id;
    @JsonFormat(shape=JsonFormat.Shape.NUMBER)
    public Integer prnt_brnd_id;

public Integer getMkg_brnd_id() {
    return mkg_brnd_id;
}

public void setMkg_brnd_id(String anIntValue) {
    if ((C_NULL_UC.equals(anIntValue)) ||
         (C_NULL_LC.equals(anIntValue))) {
        this.mkg_brnd_id = null;
    }
    else {
        this.mkg_brnd_id = new Integer(aIntValue);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:17:32.633

Sounds like something to suggest as an RFE at [https://github.com/FasterXML/jackson-dataformat-csv/issues](https://github.com/FasterXML/jackson-dataformat-csv/issues) -- sounds like a good improvement for other users.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:57:04.043

int 是原始类型，无论您向类添加什么注释，都不能设置为 null。如果这些属性确实可能为 null，则应将它们从 更改`int`为`Integer`。

# windows-installer - 带有 Embeddedchainer 的 msi 在卸载时失败并出现“错误句柄”

> ID：13569370
> 
> 赞同：2
> 
> 时间：2012-11-26T16:49:49.777
> 
> 标签：windows-installer

我终于让我的嵌入式chainer msi 运行了，通过我的C#chainer.exe 中的Installer.InstallProduct 安装了四个子msi（如stackoverflow 上其他地方的唯一一个chainer 示例中所述）。我的问题：如果我之后卸载包，当调用“transaction.Join”时，这次它会失败并出现 MSI 错误：句柄错误。我必须在任务管理器中杀死 msiexec.exe 进程，然后一切运行正常。

有什么建议么？

附录：我使用的是 Windows Installer 4.5，并且 MsiEmbeddedChainer 表中只有一个条目。四个msi 由chainer 可执行文件一个接一个地处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T23:35:17.393

以下是一些检查建议：

1) Windows Installer 4.0 及更早版本不支持多包 Windows Installer 安装的事务处理。需要 Windows Installer 4.5 或更高版本才能将多个包的安装作为单个事务回滚。此处列出了在安装程序安装、修复、更新或删除应用程序时可能导致问题的 Windows 安装程序功能：[多包安装](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/c4a0f4d8-818d-4e60-908b-adaa2a54de95)。

[2) 如果MsiEmbeddedChainer](http://msdn.microsoft.com/En-US/Library/Windows/Desktop/ac1e9c7b-bb83-4e1e-9108-211374c7d878)表中有多个条目。只能启动一个嵌入式链接器。如果多个条目都已被条件运行，则未定义哪个条目将运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T09:49:36.600

最后，问题得到解决：ac#嵌入式链接器的标准示例中有一个错误：

在该行中： IntPtr ptr = new IntPtr(Convert.ToInt32(args[0], 16)); “16”必须改为“10”！

否则，如果嵌入式链接器启动了超过 10 个事务（如在我的设置中，安装了五个子 msi），“transaction.Join”使用的句柄在某些时候会出错并给出“坏处理”错误。

非常感谢微软在这个问题上的帮助！

# apache - 禁用时间戳

> ID：13569373
> 
> 赞同：0
> 
> 时间：2012-11-26T16:49:59.630
> 
> 标签：apache, rsyslog

如何禁用时间戳（我认为的默认模板）？我使用 rsyslog 发送 Apache `access.log`，但我不想要 rsyslog 时间戳...

```
Nov 26 14:13:21 remotehost apache: 1.2.3.4 - user [26/Nov/2012:14:13:21 +0100] "GET /index.php HTTP/1.1" 200 2430 "https://1.2.3.4" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1;" 
```

谁能推荐一个模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:28:10.243

## 在日志服务器上：

```
$ModLoad imudp
$UDPServerAddress 1.1.1.1
$UDPServerRun 514
$AllowedSender UDP, 1.1.1.2

$template MsgFormat,"%msg%\n"
$template ApacheRemoteCustom,"/var/log/manager/access.log"
if $syslogfacility-text == 'local6' and $programname == 'apache' then -?ApacheRemoteCustom;MsgFormat 
```

## 在网络服务器上：

*   /etc/apache2/apache2.conf CustomLog "|/usr/bin/tee -a /var/log/apache2/access.log | /usr/bin/logger -t apache -p local6.notice" 结合 env=!dontlog

*   /etc/rsyslog.d/40-apacheaccess.conf local6.notice @1.1.1.1

# jquery - 使用 JQuery 发出警报

> ID：13569376
> 
> 赞同：0
> 
> 时间：2012-11-26T16:50:06.327
> 
> 标签：jquery, jquery-ui

我是 JQuery 的新手，在网上找不到答案。

那么标准 JS***警报***功能在 JQuery 中通常使用的替代方案是什么？

**更新：**也许我的问题不太清楚。我知道 Java Script 的***警报***功能对于 JQuery 来说是可以的。我在 JQuery 询问它的替代方案。我不喜欢很差的*警觉*能力。我想使用更强大的东西，例如样式、按钮、标题等。所以我想看看简单的 JQuery 的警报模拟调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:51:39.080

jQuery 是一个 Javascript 库。你不需要替代品。

如果您想使用 javascript `alert()`，您可以在您的 jQuery 代码中使用它，就像使用任何 Javascript 代码一样。

* * *

但是，如果您正在寻找更多的设计自由度，请查看 jQuery UI `.dialog()`：

[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T16:51:27.903

`You can use alert() in jquery, you used in javascript`. 您也可以使用自定义插件在 jquery 中显示消息，例如[**jQuery Dialog**](http://jqueryui.com/dialog/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:52:57.987

本身没有替代方案，`jQuery`据我所知，jQuery 的目标并不是提供这样的替代方案。如果你的意思是你想用更高级的东西来显示一个消息框，你可以看看[jQueryUI](http://jqueryui.com/dialog/)。

# sql - 表连接没有返回准确的结果；任何想法为什么？

> ID：13569377
> 
> 赞同：3
> 
> 时间：2012-11-26T16:50:09.233
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

每年，我们部门都会征求员工的捐款，以帮助支持癌症研究、药物和酒精等方面的研究。

我们已经建立了一个系统来帮助减轻员工的捐款压力。

目前，我们有与我目前遇到的这个问题相关的表格。

它们是emp、dept 和contribution 表。

Emp 表包含我们组织中所有员工的列表。

Dept 表包含部门列表。

最后，每次员工缴费时，员工的ID和缴费日期（date_stamp）都会记录在缴费表中。

每位员工都*必须*填写此表格，无论她/他是否正在供款。员工可以选择捐款，或选中“我目前不希望捐款”的方框

我的任务是提供一份未填写表格的员工名单。

如果雇员 ID 在 emp 表上但不在本年度的供款表上（date_stamp），则该雇员尚未填写表格。

到目前为止，我的查询返回 emp 表中未填写表格的员工中不到一半。我们希望此代码返回 emp 表中尚未在本年度供款表中的那些员工的列表。

现在，由于贡献季节从 2012 年 11 月 27 日开始，我们希望此查询返回 emp 表上的所有员工。

非常感谢您的帮助。

```
SELECT  e.lastname, e.firstname,CASE active WHEN 1 then 'Yes'WHEN 0 then 'No' else 'other'END
FROM contributions c
LEFT JOIN emp e ON e.employee_id = c.employee_id
INNER JOIN dept d ON d.dept_code = e.dept_code
WHERE Year(c.date_stamp) <> '2010' OR Year(c.date_Stamp) <> '2011' OR Year(c.date_Stamp) <> '2012'
GROUP BY e.lastname,e.firstname, e.employee_id, active
ORDER By e.lastname; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T16:54:42.293

好吧，如果我理解正确，你需要这样的东西

```
select
    e.lastname, e.firstname
from emp as e
where
    e.employee_id not in
    (
         select c.employee_id
         from contributions as c
         where c.date_stamp >= convert(datetime, '20121127', 112)
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:56:24.273

尝试使用 EXISTS

选择 e.lastname, e.firstname,CASE active WHEN 1 then 'Yes'WHEN 0 then 'No' else 'other'END from emp e,dept d where d.dept_code = e.dept_code and not exists(select 'x'来自 c.employee_id = e.employee_id 的贡献）

希望有帮助。

# salesforce - 当 url 具有查询参数时，salesforce 中的 setRedirect 不起作用

> ID：13569379
> 
> 赞同：2
> 
> 时间：2012-11-26T16:50:14.110
> 
> 标签：salesforce, visualforce

我正在尝试在 Visualforce 页面中实现一个取消按钮，该按钮应该指向上一页。第一个页面（欢迎）有两个链接 link1 和 link2 基于点击的链接，呈现了登陆 visualforce 页面的不同部分。我根据单击的链接在欢迎页面中使用 apex:param 传递参数。但是，我在登录页面中收到的值始终为空。

登陆页面有一个取消按钮，该按钮应该指向欢迎页面。单击取消时，只有在 URL 中传递的查询参数会消失并保留在同一页面上。

我在这里想念什么？请帮忙，因为我是 visualforce 的新手 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:21:26.713

我强烈怀疑您在这里甚至不需要 setRedirect 。或控制器中的操作方法。

首先尝试一些简单的东西：

```
<apex:commandButton action="/apex/welcomePage?param1=foo&param2=bar" 
    immediate="true" 
    value="Cancel" /> 
```

`Immediate`跳过您可能拥有的任何类型的验证等。`Action`可以是普通链接，更神奇的[`URLFOR()`](https://help.salesforce.com/apex/HTViewHelpDoc?id=customize_functions_i_z.htm&language=en_US#URLFOR)功能或链接到控制器操作方法的合并字段（加上某些标准操作`{!save}`，如果您在页面上有标准控制器，则可以使用。

在 Salesforce 专用站点 StackExchange 站点上有几个与此类似的问题。检查[https://salesforce.stackexchange.com/a/4242/799](https://salesforce.stackexchange.com/a/4242/799)和[https://salesforce.stackexchange.com/a/4707/799](https://salesforce.stackexchange.com/a/4707/799)（如果您想查看更高级的 URLFOR 示例）。

* * *

至于为什么会出现这种情况 - 也许您可以发布欢迎页面的控制器（尤其是构造函数）。您是从 中读取值，`PageReference`还是希望参数设置器在初始请求时触发？两个页面是否共享相同的控制器或控制器扩展？一般来说，这是[一个相当大的话题](http://www.salesforce.com/us/developer/docs/pages/index_Left.htm#StartTopic=Content/pages_controller_lifecycle.htm):)

# objective-c - 只显示 uiimage 的一部分

> ID：13569382
> 
> 赞同：1
> 
> 时间：2012-11-26T16:50:32.733
> 
> 标签：objective-c, ios, uiimage

我以编程方式创建了一个 UIImageview，我正在显示来自包含图片 url 的字符串中的图像

但我希望显示原始图像的一部分（中心的矩形）。我如何实现这一目标？

```
 NSString * urlString = @"http://4.bp.blogspot.com/-  rEqVgkdnuxE/TWd6Fm6EWtI/AAAAAAAABSc/cWCehI51v_Y/s1600/red_rose_flower3.jpg"

   NSURL *url = [NSURL URLWithString:urlstring];
   NSData *data = [NSData dataWithContentsOfURL:url];
   UIImage *img = [[UIImage alloc] initWithData:data]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:01:42.210

试穿这个尺寸:)

```
UIImageView *imageView = [UIImageView alloc] initWithImage:image];
[imageView setFrame:SIZEOFRECTANGLE];
[imageView setContentModeCenter]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-16T12:23:26.437

*在UIImageView*中移动大图像的非常简单的方法如下。

让我们拥有以像素为单位的大小为 (imgX, imgY) 的图像，我们希望在大小为 (sizeX, sizeY) 的框架中显示其中心，以点为单位。解决方案是：

```
UIImageView *iView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, sizeX, sizeY)];
iView.image = [UIImage imageNamed:@"NAME"];
CGRect contentFrame = CGRectMake(1/2-sizeX/imgX, 1/2-sizeY/imgY, 2*sizeX/imgX, 2*sizeY/imgY);
iView.layer.contentsRect = contentFrame; 
```

这里的*contentFrame*是相对于真实*UIImage*大小的标准化帧。这将是没有放大的图像的原始视图。

# c# - 为什么 IF 语句会影响我的 LINQ 语句的结果？

> ID：13569385
> 
> 赞同：6
> 
> 时间：2012-11-26T16:50:56.513
> 
> 标签：c#, linq, sharepoint

我最近一直在使用 LINQ，感谢一些 StackOverflowers 的帮助，我能够让这个语句起作用：

```
var traceJob =
    from jobDefinition in service.JobDefinitions
    where jobDefinition.Id == traceGuid
    select jobDefinition;

if (traceJob != null && traceJob.Count() == 1)
{
 traceJob.First().RunNow();
 Console.WriteLine(traceJob.First().DisplayName + "  Last Run Time: " + traceJob.First().LastRunTime);
} 
```

但是，我很困惑，因为使它起作用的部分是`if(traceJob.Count() ==1)`. 如果我删除该部分，那么我会收到一条`ObjectNullRef`错误消息，指出枚举`traceJob`没有产生任何结果。

现在，据我所知，`if`检查计数的语句实际上不应该改变 Linq 语句的结果，对吧？谁能向我解释为什么我会看到这种行为？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T16:57:11.347

不，不应该。我的猜测是您遇到了枚举确实为空的情况，并且通过检查计数 > 0，`First()`不会失败。

作为旁注，`Any()`这里可能是一个更好的检查，因为（取决于存储库的底层存储）它可能比`Count()`：

```
if (traceJob != null && traceJob.Any())
{
 traceJob.First().RunNow();
 Console.WriteLine(traceJob.First().DisplayName + "  Last Run Time: " + traceJob.First().LastRunTime);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T16:58:51.663

```
var traceJob =
    (from jobDefinition in service.JobDefinitions
    where jobDefinition.Id == traceGuid
    select jobDefinition).SingleOrDefault(); 
```

您可以使用 singleOrDefault 检查单个结果。它将返回与`where`条件匹配的结果，如果没有找到匹配项，则返回 null。如果为您的查询找到多个匹配项，则会引发异常。

这涵盖了您`tracejob == null`以及`tracejob.count == 1`条件。

[MSDN 文章](http://msdn.microsoft.com/en-us/library/bb342451.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T16:56:06.810

我不知道您的“服务”的实际实现，但通常 linq 查询实际上仅在请求时才会填充它们的结果。所以 Count() 确实改变了 traceJob 的状态，很可能填充了内部集合。看起来 First() 没有填充内部集合，或者没有正确执行它，即使它通常应该这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T17:04:57.743

关于[https://stackoverflow.com/a/1745716/1289709](https://stackoverflow.com/a/1745716/1289709)
我认为`FirstOrDefault`在这里使用更合理。

> 每当您使用 SingleOrDefault 时，您都清楚地声明该查询最多只能产生一个结果。另一方面，当使用 FirstOrDefault 时，查询可以返回任意数量的结果，但您声明您只想要第一个结果。

所以把你的代码改成这样：

```
var traceJob = (from jobDefinition in service.JobDefinitions
    where jobDefinition.Id == traceGuid
    select jobDefinition).FirstOrDefault();

    if (traceJob != null)
    {
       traceJob.RunNow();
       Console.WriteLine(traceJob.DisplayName + "  Last Run Time: " + traceJob.LastRunTime);
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T17:09:39.093

我认为您的问题出在调用它们时如何执行 linq 语句，而不是从声明它们的位置。

所以你的陈述：

```
var traceJob =
    from jobDefinition in service.JobDefinitions
    where jobDefinition.Id == traceGuid
    select jobDefinition; 
```

这在功能上大致相当于：

```
IEnumerable<JobDefinition> GetJobDefinitions(YourService service, Guid traceGuid) 
{
    foreach(var jobDefinition in service.JobDefinitions) 
        if(jobDefinition.Id == traceGuid) 
            yield return jobDefinition;
} 
```

所以当你打电话时，`traceJob.Count()`你做的相当于打电话`GetJobDefinitions(service, traceGuid).Count()`，每次你打电话时，`traceJob.First()`你都会再次进入循环。

`service.JobDefinitions`如果可以一遍又一遍地调用，这可能不是问题。但是，如果结果随时间变化（例如，如果在您执行时添加了作业）或者如果后续运行有不同的结果，您就会遇到问题。

在任何情况下，最好只执行一次循环：

```
var traceJobs =
    from jobDefinition in service.JobDefinitions
    where jobDefinition.Id == traceGuid
    select jobDefinition;

// This is where the loop above actually executes - if it's empty it will return null
var firstJob = traceJobs.FirstorDefault();

if(firstJob != null)
{
    firstJob.RunNow();
    Console.WriteLine(firstJob.DisplayName + "  Last Run Time: " + firstJob.LastRunTime);
} 
```

或者，您可以通过将循环转换为列表或数组来强制执行循环：

```
var traceJobsExecuted = traceJobs.ToList(); 
```

# bash - Condition on a directory having a git remote

> ID：13569387
> 
> 赞同：1
> 
> 时间：2012-11-26T16:51:00.440
> 
> 标签：bash, shell

I'm writing a shell script to automatically update several directories of git repos, and I want to ignore repos that do not have a remote origin to pull from. So far I have

```
if git remote 2>&1 >/dev/null; then 
```

which successfully determines whether a directory is a git repo. But for any new git repo,

```
git remote 
```

returns "origin" and an error status of 0\. How do I distinguish between such repos and a repo where the command `git pull` will do something?

I could use

```
git remote show origin 
```

but this will connect to the origin server if it exists, and I'd prefer a command that's fast and local.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:54:48.050

您可以随时检查`.git/config`是否存在`[remote "origin"]`?

```
#/bin/bash
if grep -Fxq '[remote "origin"]' .git/config
then
    echo "yes"
else
    echo "no"
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:59:19.603

如果存储库具有*origin*，则该文件夹`.git/refs/remotes/origin`必须存在。

```
test -d .git/refs/remotes/origin 
```

将返回 0。

# javascript - why is my javascript throw not working in Firebug?

> ID：13569392
> 
> 赞同：1
> 
> 时间：2012-11-26T16:51:14.783
> 
> 标签：javascript, error-handling, console, firebug

I'm trying to debug an application and am struggling to display my thrown errors in Firebug.

if I have something like this:

```
if (!jQuery.fn.drag){
  console.log("found an error");
  throw new Error("file xyz has not loaded");
} 
```

**Question:**
Why is it, that the console fires, because there is an error, but my custom `throw` does not report anything in Firebug?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:56:43.610

我试过了`throw new Error("error message");`，它[在](http://jsfiddle.net/st3fan/QQUfR/)Firefox 和 Chrome 中都可以使用；

用于`console.log(Jquery, Jquery.fn, Jquery.fn.drag)`调试您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:58:34.677

问题可能是您不小心激活了 ' **Break on all error** 'firebug 选项，如果是这种情况，请[在此处查看我的答案以解决它。](https://stackoverflow.com/a/4164651/352672)

# excel - 选择列并在它们之间复制重复项

> ID：13569400
> 
> 赞同：0
> 
> 时间：2012-11-26T16:51:48.307
> 
> 标签：excel, vba, macos, duplicates

两个不相邻的列，A 列和 C 列，包含字符串，而 E 列（同样不相邻）应该包含 A 列和 C 列之间的重复字符串。

现在我的主要问题是 A 列和 C 列的长度不同，并且重复项本身不在同一行上。

当不使用 VBA 时，以下输入列 E 给出了除空白之外的解决方案。

```
=IF(ISERROR(MATCH(A1,$C:$C,0)),"",A1) 
```

例如：
**A 列**
土豆西红柿
西兰
花
辣椒
蘑菇

**C列**
蘑菇
黄瓜
西兰花
盐
茴香

**E列应该是**
蘑菇
西兰花

这是我迄今为止能够找到的，但这是非常错误的。我只是发现自己无法解决这个问题。

```
Sub Duplicates()
  Dim duplicates As Range
  Set duplicates = Columns("A", "C")
  activesheet.duplicates.Copy Destination:=activesheet.Range("E1")
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:11:42.160

... 试试这个：

```
 Sub PopulateColE()

     Dim cl As Range
     Dim CurrentRow As Integer: CurrentRow = 1

     On Error Resume Next

     For Each cl In Intersect(ActiveSheet.UsedRange, ActiveSheet.Range("C:C"))
        Application.WorksheetFunction.Match cl.Value, Range("A:A"), 0

        If Err.Number = 0 Then
           Range("E" & CurrentRow).Value = cl.Value
           CurrentRow = CurrentRow + 1
        End If

        Err.Clear
     Next cl
  End Sub 
```

# java - Parse poker game description (generated by multiple different converters)

> ID：13569404
> 
> 赞同：1
> 
> 时间：2012-11-26T16:52:06.323
> 
> 标签：java, parsing

For a hobby project I am trying to write some poker application. Part of it's functionality is the ability to parse messges from poker forums with games descriptions. Here are plain text version of message examples:

**EXAMPLE 1**

```
 $0.02/$0.05 No-Limit Hold'em (8 handed) 

Known players:
 BB: $1.70   UTG2: $13.05   MP1: $2.89   MP2: $2.64   MP3 (Hero): $5.28   CO
: $5.00   BU: $5.00   SB: $11.37  

Preflop: Hero is MP3 with 8 
[http://resources.pokerstrategy.com/smileys/heart.png], 8 
[http://resources.pokerstrategy.com/smileys/club.png].
UTG2 folds, MP1 raises to $0.15, MP2 calls $0.15, Hero calls $0.15, CO folds, 
BU calls $0.15,  2 folds, BB folds.

Flop: ($0.67) 8 [http://resources.pokerstrategy.com/smileys/diamond.png], K 
[http://resources.pokerstrategy.com/smileys/club.png], 6 
[http://resources.pokerstrategy.com/smileys/diamond.png] (4 players)
MP1 checks, MP2 checks, Hero bets $0.47, BU folds, MP1 folds, MP2 calls $0.47.

Turn: ($1.61) A [http://resources.pokerstrategy.com/smileys/club.png] (2 
players)
MP2 checks, Hero checks.

River: ($1.61) Q [http://resources.pokerstrategy.com/smileys/club.png] (2 
players)
MP2 bets $0.60, Hero raises to $2.10, MP2 calls $1.42.

Final Pot: $5.73\. 
```

**EXAMPLE 2**

```
Grabbed by Holdem Manager <http://www.holdemmanager.net>
 NL Holdem $0.05(BB) Replayer 
 SB ($5.02)
 BB ($4.78)
 UTG ($2)
 UTG+1 ($2)
 UTG+2 ($1.88)
 MP1 ($5.32)
CO ($10.36) (21/18 на 109 рук, С-бет Ф=88%(11), С-бет Т=33%(3), АФ=2,6 
(4,5/3,0/0,5), WTSD=41%, W$SD=71%)
 Hero ($10.98)

Dealt to Hero 9 [http://resources.pokerstrategy.com/smileys/spade.png] T 
[http://resources.pokerstrategy.com/smileys/spade.png] 

 UTG calls $0.05, fold, fold, fold, CO raises to $0.20, Hero calls $0.20, 
fold, fold, fold

 FLOP ($0.52) J [http://resources.pokerstrategy.com/smileys/club.png] 8 
[http://resources.pokerstrategy.com/smileys/spade.png] 4 
[http://resources.pokerstrategy.com/smileys/diamond.png] 

CO bets $0.35, Hero calls $0.35

 TURN ($1.22) J [http://resources.pokerstrategy.com/smileys/club.png] 8 
[http://resources.pokerstrategy.com/smileys/spade.png] 4 
[http://resources.pokerstrategy.com/smileys/diamond.png] 9 
[http://resources.pokerstrategy.com/smileys/heart.png] 

CO checks, Hero checks

 RIVER ($1.22) J [http://resources.pokerstrategy.com/smileys/club.png] 8 
[http://resources.pokerstrategy.com/smileys/spade.png] 4 
[http://resources.pokerstrategy.com/smileys/diamond.png] 9 
[http://resources.pokerstrategy.com/smileys/heart.png] 4 
[http://resources.pokerstrategy.com/smileys/spade.png] 

CO bets $1, Hero ??? 
```

Basically these two examples were generated by two different converters. And there are currently about 20 different converters out there.

What I need to do is to be able to parse these game descriptions for different converters and "translate" text description of a game into java object **Game**. I've already written some code with a lot of regexp. This code can parse approximately 70% of my tests correctly, but:

*   it's really hard to maintain
*   I want to teach myself something new and cool.

So, what are my other options besides regexp? I am currently looking into ANTLR, but I am not sure if it is a best choice for this task.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T00:23:12.947

ANTLR 绝对适合您的要求。使用正则表达式进行语言处理非常脆弱，与使用 ANTLR 或类似工具相比，从一个版本到另一个版本的任何更改都更有可能破坏您的解释器。您可以做的是编写一个 Lexer 和一个基本 Parser，然后可以通过更具体的解析器扩展它们，以获得转换器之间的特定差异。

*一旦你制作了一个Lexer*并知道你在用解析器做什么，在 ANTLR 中改变东西比在你自己的解决方案中快得多！我确实同意 ANTLR 文档不是最好的，但是有大量来自第三方的 ANTLR 3 好的教程（对于任何特定问题，您都会在 SO 上获得很好的帮助）。

我个人的偏好是制作相当简单的 Lexer/Parsers 来输出 AST 树，然后手动编写一个 tree-walker 来遍历 Parser 提供的节点。有些人会主张在 ANTLR 中也制作 tree-walker，但我发现这比它的价值更困难和耗时（因为它在很大程度上不能重用）。

习惯创建一个好的语法文件的思维方式可能需要一点时间，但是一旦你完成它就会非常令人满意，并且你会看到它在你第一次需要修改或扩展某些东西时有多好。;)

# c# - How should I compute files hash(md5 & SHA1) in C#

> ID：13569406
> 
> 赞同：13
> 
> 时间：2012-11-26T16:52:12.747
> 
> 标签：c#, .net, hash, checksum

This is my first C# project and I'm almost newbie. I use openfiledialoge for selecting file and get the filepath by GetFullPath method and store it in a variable called for example fpath. I need to calculate the hash of the file that its path is stored in fpath variable.I think it can be done via GetHashCode. Can anybody give me a snippet or a little guide?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-26T16:55:54.103

```
using (FileStream stream = File.OpenRead(file))
{
    SHA256Managed sha = new SHA256Managed();
    byte[] hash = sha.ComputeHash(stream);
    return BitConverter.ToString(hash).Replace("-", String.Empty);
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-26T16:56:40.817

这是我用来回答关于 SO的另一个[问题的一些代码](https://stackoverflow.com/a/11106487/320)

```
/// <summary>
/// Gets a hash of the file using SHA1.
/// </summary>
/// <param name="filePath"></param>
/// <returns></returns>
public static string GetSHA1Hash(string filePath)
{
    using (var sha1 = new SHA1CryptoServiceProvider())
        return GetHash(filePath, sha1);
}

/// <summary>
/// Gets a hash of the file using SHA1.
/// </summary>
/// <param name="filePath"></param>
/// <returns></returns>
public static string GetSHA1Hash(Stream s)
{
    using (var sha1 = new SHA1CryptoServiceProvider())
        return GetHash(s, sha1);
}

/// <summary>
/// Gets a hash of the file using MD5.
/// </summary>
/// <param name="filePath"></param>
/// <returns></returns>
public static string GetMD5Hash(string filePath)
{
    using (var md5 = new MD5CryptoServiceProvider())
        return GetHash(filePath, md5);
}

/// <summary>
/// Gets a hash of the file using MD5.
/// </summary>
/// <param name="filePath"></param>
/// <returns></returns>
public static string GetMD5Hash(Stream s)
{
    using (var md5 = new MD5CryptoServiceProvider())
        return GetHash(s, md5);
}

private static string GetHash(string filePath, HashAlgorithm hasher)
{
    using (var fs = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.ReadWrite))
        return GetHash(fs, hasher);
}

private static string GetHash(Stream s, HashAlgorithm hasher)
{
    var hash = hasher.ComputeHash(s);
    var hashStr = Convert.ToBase64String(hash);
    return hashStr.TrimEnd('=');
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-26T17:00:31.367

默认情况下，GetHashCode() 仅供内部使用，用于检查对一个对象的两个引用是否实际上是同一个对象。默认哈希实现基于堆栈/堆位置，因此在程序运行之间不是确定性的（甚至将两个不同的引用与完全相同的数据进行比较）。因此，它不应该用于计算校验和。

.NET 有一系列用于此目的的内置库；它们位于 System.Security.Cryptography 命名空间中。您想要的两个是 MD5 和 SHA1 类：

```
byte[] hashBytes;
using(var inputFileStream = File.Open(filePath))
{
    var md5 = MD5.Create();
    hashBytes = md5.ComputeHash(inputFileStream);
} 
```

类的`SHA1`工作方式相同。

一句警告；MD5 和 SHA1 都被认为是“损坏的”，不应在任何需要“安全”哈希的系统中使用。考虑在整个系统中使用 SHA-256 或 SHA-512 算法。如果您不需要安全哈希，可以使用更快的校验和哈希，如 FNV-1a 或 MurmurHash，它们将提供良好的抗碰撞性。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-03-28T22:50:02.280

这是使用 C# 托管库计算哈希的完整代码。

```
using system.IO;
using System.Security.Cryptography;

public string GetSha1Hash(string filePath)
{
    using (FileStream fs = File.OpenRead(filePath))
    {
        SHA1 sha = new SHA1Managed();
        return BitConverter.ToString(sha.ComputeHash(fs));
    }
} 
```

# .net - Is there an event raised when a message is dequeued from an MSMQ queue?

> ID：13569409
> 
> 赞同：1
> 
> 时间：2012-11-26T16:52:36.807
> 
> 标签：.net, msmq

I'm trying to get a level of management information available in a system which is being driven by MSMQ queues. I want to know if there's an event which can be listened to, to know when a message is successfully dequeued from a queue.

Ideally the event would be consumed via a .NET application.

This would allow me to keep track of the volume of messages passing through a queue without implementing logic into the receiving service endpoint and enable common mechanisms regardless of receiver (which will be BizTalk in some cases).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:57:29.677

当成功接收到消息（并因此从队列中删除）时 ，`MessageQueue.BeginReceive`异步方法会引发[ReceivedCompleted事件。](http://msdn.microsoft.com/en-us/library/system.messaging.messagequeue.receivecompleted.aspx)

# javascript - Jquery selector loop

> ID：13569411
> 
> 赞同：1
> 
> 时间：2012-11-26T16:52:49.583
> 
> 标签：javascript, jquery, css

I'm trying to change width of the divs. But $(div#i) is not true. How can i do that?

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script>
    var things = new Array();
        things[0] = 13; things[1] = 26; things[2] = 39;

    for(var i=0;i<things.length;i++)
            $(div#i).css("width",things[i]*100);
</script>

</head>

<body>
<div id="0" style=" width: 300px; height:20px; margin-left: 25px; padding-left: 15px; background-color: #900"> </div> <br>
<div id="1" style=" width: 300px; height:20px; margin-left: 25px; padding-left: 15px; background-color: #900"> </div> <br>
<div id="2" style=" width: 300px; height:20px; margin-left: 25px; padding-left: 15px; background-color: #900"> </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T16:54:18.207

选择器应该是字符串，并且您不需要“div”，因为 id 必须是唯一的。此外，正如评论中提到的，严格数字的 id 仅在 HTML5 中有效，因此如果您希望它在旧浏览器上始终如一地工作，我建议使用`data-index`我在下面发布的方法。

```
$('#' + i).css("width",things[i]*100); 
```

我也会使用数组文字语法。

```
var things = [13, 26, 39]; 
```

在 id 唯一性和兼容性方面，我真的建议您不要使用`id`它，因为它在语义上并不真正有价值。

`<div id="..."`我会`<div data-index="..."`使用 jQuery 的自动集合迭代来代替`css`.

```
$('[data-index]').css('width', function(){
    return things[$(this).data('index')] * 100);
}); 
```

但实际上，如果 div 和它们在数组中的索引之间存在一对一的关系，您也可以这样做，并且在 HTML 中不需要任何额外的属性。

```
$('body > div').css('width', function(i){
  return things[i] * 100;
}); 
```

另请记住，您需要将所有这些都包装在一个`ready`回调中，而您在示例中没有这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:56:55.757

除非我错过了什么，否则你可以这样做：

```
$('#' + i).css("width",things[i]*100); 
```

因为您正在调用一个 ID，该 ID 在页面上应该是唯一的。

# java - User Defined Exceptions with JMX

> ID：13569416
> 
> 赞同：8
> 
> 时间：2012-11-26T16:53:13.543
> 
> 标签：java, exception-handling, jmx

I have exposed methods for remote management in my application server using JMX by creating an MXBean interface, and a class to implement it. Included in this interface are operations for setting attributes on my server, and for getting the current value of attributes. For example, take the following methods:

```
public interface WordManagerMXBean {
     public void addWord(String word);
     public WordsObject getWords();
     public void removeWord(String word);
} 
```

The WordsObject is a custom, serializable class used to retrieve data about the state of the server. Then I also have a WordManager class that implements the above interface. I then create a JMX agent to manage my resource:

```
MBeanServer mbs = ManagementFactory.getPlatformMBeanServer();
ObjectName wordManagerName = new ObjectName("com.example:type=WordManager");
mbs.registerMBean(wordManager, wordManagerName); 
```

I have created a client that invokes these methods, and this works as expected. However, I would like to extend this current configuration by adding user defined exceptions that can be sent back to my client. So I would like to change my interface to something like this:

```
public interface WordManagerMXBean {
     public void addWord(String word) throws WordAlreadyExistsException;
     public WordsObject getWords();
     public void removeWord(String word);
} 
```

My WordAlreadyExistsException looks like this:

```
public class WordAlreadyExistsException extends Exception implements Serializable {

private static final long serialVersionUID = -9095552123119275304L;

public WordAlreadyExistsException() {
    super();
    }
} 
```

When I call the addWord() method in my client, I would like to get back a WordAlreadyExistsException if the word already exists. However, when I do this, I get an error like this:

```
java.rmi.UnmarshalException: Error unmarshaling return; nested exception is: 
java.lang.ClassNotFoundException: com.example.WordAlreadyExistsException 
```

The WordAlreadyExistsException, the WordsObject and the WordManagerMXBean interface are all in a single jar file that is available to both the client and the server. If I call the getWords() method, the client has no difficulty handling the WordsObject. However, if a user defined exception, like the one above, is thrown, then the client gives the error shown above. Is it possible to configure JMX to handle this exception correctly in the client?

Following some searching, I noticed that there is an MBeanException class that is used to wrap exceptions. I'm not sure if this wrapping is performed by the agent automatically, or if I'm supposed to do the wrapping myself. I tried both, but in either case I get the same error on the client.

I have also tried this with both checked and unchecked exceptions, again the same error occurs.

One solution to this is to simply pass back the error string inside a generic error, as all of the standard java exceptions work. But I'd prefer to get back the actual exception for processing by the client.

Is it possible to handle user defined exceptions in JMX? If so, any ideas how?

EDIT: Including full stack trace

```
java.lang.reflect.UndeclaredThrowableException
at $Proxy4.addWord(Unknown Source)
at com.example.TestClient.addWord(TestClient.java:76)
at com.example.TestClient.execute(TestClient.java:56)
at java.lang.Thread.run(Thread.java:722
Caused by: java.rmi.UnmarshalException: Error unmarshaling return; nested exception is: 
java.lang.ClassNotFoundException: com.example.WordAlreadyExistsException
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:245)
at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:160)
at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
at javax.management.remote.rmi.RMIConnectionImpl_Stub.invoke(Unknown Source)
at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.invoke(RMIConnector.java:1017)
at  javax.management.MBeanServerInvocationHandler.invoke(MBeanServerInvocationHandler.java:305)
... 6 more
Caused by: java.lang.ClassNotFoundException: com.example.WordAlreadyExistsException
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:264)
at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:453)
at sun.rmi.server.LoaderHandler.loadClass(LoaderHandler.java:184)
at java.rmi.server.RMIClassLoader$2.loadClass(RMIClassLoader.java:637)
at java.rmi.server.RMIClassLoader.loadClass(RMIClassLoader.java:264)
at sun.rmi.server.MarshalInputStream.resolveClass(MarshalInputStream.java:216)
at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1593)
at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1514)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1750)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1964)
at java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1888)
at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1771)
at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1347)
at java.io.ObjectInputStream.readObject(ObjectInputStream.java:369)
at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:243)
... 11 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T22:45:44.633

我试图重现这个问题，但是它对我来说很好;-(。请参阅下面的异常输出。我也敢打赌，这确实是客户端的类加载问题。你可以发布（a精简版）您的客户端 jar 的版本（也许还有源）？

```
Exception in thread "main" javax.management.MBeanException: WordAlreadyExistsException
at com.sun.jmx.mbeanserver.MBeanIntrospector.unwrapInvocationTargetException(MBeanIntrospector.java:283)
at com.sun.jmx.mbeanserver.MBeanIntrospector.invokeM(MBeanIntrospector.java:210)
.....
Caused by: WordAlreadyExistsException
at WordManager.addWord(WordManager.java:7)
..... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T22:23:47.220

尽管不推荐，但绝对可以抛出自定义异常。来自[JMX 最佳实践](http://www.oracle.com/technetwork/java/javase/tech/best-practices-jsp-136021.html#mozTocId730341)：

> 建议从 Java SE 平台的 java.* 和 javax.* 包中定义的标准集中提取 MBean 引发的异常。如果 MBean 引发非标准异常，则没有该异常类的客户端可能会看到另一个异常，例如 ClassNotFoundException。

因此，我会投入一些钱，让您的客户根本没有加载`WordAlreadyExistsException`课程。您可以检查这相当简单 -**在客户端**中编写一个引发此异常的方法，调用它并查看会发生什么。如果一切顺利（OK = 引发自定义异常，否`ClassNotFoundException`），请确保您的客户端和服务器具有相同版本的 jar，其中包含`WordAlreadyExistsException`. 即使是最轻微的不匹配（例如，在包名称中）也可能是问题的根源。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T21:33:54.330

可能发生的情况是您的自定义异常被序列化，然后在应用程序服务器中反序列化，但由于缺少更好的词“类加载器命名空间”而不同。

尝试将包含自定义异常类的 jar(c) 与 AppServer 正在使用的 JMX jar 放在一起。确保从旧位置移除旧 jar（我假设它位于 WEB-INF/lib.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T13:41:42.807

而不是扩展 RuntimeMBeanException ，只需将 RuntimeException 作为 RuntimeMBeanException 的构造函数参数传递并抛出该异常。确保 jar 文件存在于 CLASSPATH 中。

如果 jar 文件存在于类路径中，扩展 RuntimeMBeanException 也可以工作，但我没有测试

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T07:24:21.550

您的例外必须从

```
 javax.management.JMException 
```

或者

```
 javax.management.JMRuntimeException 
```

如果它是一个 RuntimeException。

# ruby - Ruby integer to string key

> ID：13569417
> 
> 赞同：1
> 
> 时间：2012-11-26T16:53:18.660
> 
> 标签：ruby, string, key

A system I'm building needs to convert non-negative Ruby integers into shortest-possible UTF-8 string (should be octet string; see **Edit** below) values. The only requirement on the strings is that their lexicographic order be identical to the natural order on integers.

What's the best Ruby way to do this?

We can assume the integers are 32 bits and the sign bit is 0\. This is successful:

```
(i >> 24).chr + ((i >> 16) & 0xff).chr + ((i >> 8) & 0xff).chr + (i & 0xff).chr 
```

But it appears to be 1) garbage-intense and 2) ugly. I've also looked at `pack` solutions, but these don't seem portable due to byte order.

FWIW, the application is Redis hash field names. Building keys may be a performance bottleneck, but probably not. This question is mostly about the "Ruby way".

**Edit**

Abpve I should have said "shortest possible string of octets" rather than UFT-8, since this is what Redis actually stores for field keys. @Mark Reed's excellent suggestion to try true UTF-8 packing ssems to work. The `redis` gem I am using seems to properly convert extended codes to octet sequences for Redis: For example,

```
REDIS.hset('hash', [0x12345678].pack('U'), 'foo') 
```

works fine. But then

```
REDIS.hkeys('hash') 
```

returns

```
"\xFC\x92\x8D\x85\x99\xB8" 
```

I need to verify the lexicographic order of these strings is correct, but it looks good so far.

**End edit**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:09:40.837

如果它必须是有效的 UTF-8，那么与仅将代码点编码为 UTF-8 字符相比，您不会获得太大的改进；UTF-8 的特点之一是编码字符按正确的数字顺序排序，并且它只使用格式规则下所需的最少字节数。

```
[i].pack('U') 
```

请注意，UTF-8 是面向字节的，因此没有字节序问题。

如果您实际上不是指 UTF-8，那么请澄清您的意思。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:02:44.577

您希望能够转换为任何基础，并使用该输出来选择您的角色。看到这个答案[https://stackoverflow.com/a/2895806/131227](https://stackoverflow.com/a/2895806/131227)

# php - 使用不同的 wordpress 函数而不是默认函数

> ID：13569422
> 
> 赞同：0
> 
> 时间：2012-11-26T16:53:43.340
> 
> 标签：php, wordpress

嗨，我知道这可能很明显，但我只是想知道如何使用我自己的函数，我将在 functions.php 中创建而不是默认函数。

为了解释我做了什么，我进入了 wp-includes/general-templates.php 并更改了很多位于`get_calendar`.

但是在在线阅读更多内容后，我意识到一旦用户更新到新的 wordpress，我不应该这样做，这些行可能会被覆盖。

我保留了原始 general-templates.php 文件的副本。所以我想知道如何实现我的新更新函数而不是 general-templates.php 中的函数？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:09:05.193

WordPress 提供了两种不同的方法来覆盖默认函数输出：*可插入函数*和*过滤器*。

## 可插拔功能

一个*可插入*的函数（所有这些都存在于 中`pluggable.php`），采用以下形式：

```
if ( ! function_exists( 'some_function' ) ) {
    function some_function() {
        // function code goes here
    }
} 
```

要覆盖可插入功能，只需在您自己的插件中定义它（或在您的主题`functions.php`文件中，如果适用）：

```
function some_function() {
    // Your custom code goes here
} 
```

## 过滤器

*过滤器*采用以下形式：

```
function some_function() {
    // function code goes here
    return apply_filters( 'some_function', $output );
} 
```

要覆盖过滤器，请定义一个回调并将其添加到过滤器：

```
function mytheme_filter_some_function( $output ) {
    // Define your custom output here
    return $output;
}
add_filter( 'some_function', 'mytheme_filter_some_function' ); 
```

## 专门针对`get_calendar()`

如果您[查看 source](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/general-template.php#L1270)，您会看到 for 的输出**[`get_calendar()`](http://codex.wordpress.org/Function_Reference/get_calendar)**通过了**`get_calendar`**过滤器：

```
return apply_filters( 'get_calendar',  $calendar_output ); 
```

因此，您只需编写自己的回调来修改`$calendar_output`，并将其挂钩到`get_calendar`.

```
function mytheme_filter_get_calendar( $calendar_output ) {
    // Define your custom calendar output here
    $calendar_output = '';
    // Now return it
    return $calendar_output;
}
add_filter( 'get_calendar', 'mytheme_filter_get_calendar' ); 
```

# c++ - 使用模板重载运算符 ()

> ID：13569430
> 
> 赞同：2
> 
> 时间：2012-11-26T16:54:04.187
> 
> 标签：c++, templates, operator-overloading

我正在做一个需要使用模板完成的作业：它是一个矩阵类。

其中之一告诉我重载 . `operator ()(int r, int c);`，这样我就可以`obj(a, b);`使用`obj(a, b)=100;`.

我的类的模板是`template<class T, int C, int R>;` 然后我在公共范围内的类中创建：

```
T& operator()(int r, int c);//LINE 16 
```

实现很简单。

我尝试了两种方式：

```
template <class T>
T& Matrix::operator()(int r, int c){
    return matrixData[r][c];
}

template <class T, int C, int R>
T& Matrix::operator()(int r, int c){ 
    return matrixData[r][c];
} 
```

在最后一个我得到错误告诉我：

```
16: Error: expected type-specifier before '(' token 
```

第 16 行在上面有一个注释错误：

```
no 'T& Matrix<T, C, R>::operator()(int, int)' member function declared in class 'Matrix<T, C, R>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T16:56:11.953

> 课程是`template<class T, int C, int R> class Matrix {...}`：

以下对我有用：

```
#include <iostream>

template<typename T, int R, int C>
class Matrix {
  T data[R][C];
public:
  T& operator()(int r, int c);
};

template <typename T, int R, int C>
T& Matrix<T, R, C>::operator()(int r, int c) {
  return data[r][c];
}

int main() {
  Matrix<int, 3, 4> m;
  m(0, 1) = 42;
  std::cout << m(0, 1) << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:56:58.140

如果我理解正确，您将缺少以下类型`Matrix`：

```
template <class T>
T& Matrix<T>::operator()(int r, int c){
    return matrixData[r][c];
}

template <class T, int C, int R>
T& Matrix<T>::operator()(int r, int c){ 
    return matrixData[r][c];
} 
```

# iphone - IOS Mapkit 保存切片供以后离线使用

> ID：13569431
> 
> 赞同：0
> 
> 时间：2012-11-26T16:54:05.353
> 
> 标签：iphone, objective-c, ios, ipad

当用户首次登录应用程序并显示地图时，有没有一种好方法可以保存某个区域所需的所有地图图块？那么预先缓存它们并将它们作为资源保存在 xcode 项目中？

或者在第一次使用互联网连接的应用程序时下载它们，并让它们在以后启动应用程序而没有互联网连接时始终可用，地图仍然可以为该区域绘制。

我问的原因是因为地图总是集中在巴黎地区。即使没有可用的互联网连接，我希望它在应用程序启动时始终可以使用这些磁贴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:01:07.393

没有任何东西可以做到这一点，当然会有办法，但它会涉及黑客。例如，您可以在浏览器中（在您的工作机器上）保存 Google 地图中所需的所有图块，将它们以 PNG 格式添加到项目中，并将它们映射到地图视图中的正确图块。

然后，您将在 Apple 使用 Google 磁贴方面遇到更多问题。

**简而言之，没有简单的、推荐的方法来做到这一点**。但是，如果您的应用程序是针对巴黎的，那么从逻辑上讲，现实世界中的大部分用户都在巴黎，地图应用程序会将其缓存共享给第三方应用程序，因此理论上无论如何体验都不会太差。

# google-app-engine - 如何使用 Objectify 保存实体并保持一些值不变

> ID：13569438
> 
> 赞同：2
> 
> 时间：2012-11-26T16:54:20.720
> 
> 标签：google-app-engine, google-cloud-datastore, objectify

Objectify 框架使与 Google Datastore 的交互变得更加容易，我想知道是否可以使用 ofy().save() 实体，但只能在数据库中更改不为空的值。

因为我创建了一个实体的新实例，但我无法访问它的所有属性值（数据来自 POST，并且缺少关系键之类的东西）我只想更改存储/编辑接收到的属性（如 SQL更新）。

我尝试使用`@IgnoreSave(IfNull.class)`，但在保存并检查保存的条目后，当时未设置的属性`save()`设置为 null，并且我与其他实体失去了关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:12:41.070

如果我理解正确，您有一个已保存的实体 A。您想将 A 的属性（比如说 Ab）更改为某些东西，但保持其他所有内容不变？你应该做的是一个ofy().get(A)，改变Ab然后save(A)。

如果您创建一个新实体 A（来自构造函数），那么该实体将覆盖当前保存的实体。

# android - 变量不从 null 改变

> ID：13569446
> 
> 赞同：-1
> 
> 时间：2012-11-26T16:55:08.713
> 
> 标签：android, android-edittext

我的程序应该将 bname 更改为位置，但由于某种原因我不会将位置发送到 Record Expeance 这个 waycase R.id.record_expeance：

```
 startActivity(new Intent(BudgetStart.this, RecordExpeance.class));
    ex.changeName(position);
    BudgetStart.this.finish();
    break; 
```

之后应该等于位置，但它仍然是空的

```
package budget.app;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class RecordExpeance extends Activity implements OnClickListener
{    
    private String bname;
    protected void onCreate(Bundle savedInstanceState) 
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recordexpeance);
        final BudgetDB entry = new BudgetDB(RecordExpeance.this);
        EditText a =(EditText)findViewById(R.id.txtExpeance);
        EditText b =(EditText)findViewById(R.id.txtEMomo);
        TextView c =(TextView)findViewById(R.id.lblBudgetAmount);
        TextView d =(TextView)findViewById(R.id.lblBudgetName);
       d.setText(bname);

        String bamount;

        entry.open();
        bamount = entry.getBamount(bname);
        entry.close();

        Button A = (Button)findViewById(R.id.btnFinish);

        A.setOnClickListener(this);
    }

    public void onClick(View argo) 
    {
        // TODO Auto-generated method stub
        startActivity(new Intent(RecordExpeance.this, BudgetStart.class));
        RecordExpeance.this.finish();
    }
    public void changeName(String position) 
    {
        // TODO Auto-generated method stub

        bname = position;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:59:39.557

`position`传递Intent会更容易：

```
Intent intent = new Intent(BudgetStart.this, RecordExpeance.class);
intent.putExtra("position", position);
startActivity(intent);
BudgetStart.this.finish();
break; 
```

然后从 Intent 中读取它`RecordExpeance`：

```
super.onCreate(savedInstanceState);
setContentView(R.layout.recordexpeance);

bname = getIntent().getIntExtra("position", 1); 
// Where 1 is the default value if you forgot use putExtra() 
```

# google-maps - 我应该使用哪个 google api？（地图）

> ID：13569450
> 
> 赞同：0
> 
> 时间：2012-11-26T16:55:19.627
> 
> 标签：google-maps, google-maps-api-3

我正在制作列出谷歌地图上的地点（由用户添加）的网站，我应该使用哪个 api 来实现它？

有什么可做的，还是我应该从我的数据库中加载位置并在每次重新加载时在地图上标记它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T11:20:28.563

是的，您将需要一个数据库来存储用户添加的位置坐标，并根据需要在地图上获取和显示它们。[Google Maps Apiv3](https://developers.google.com/maps/documentation/javascript/tutorial)适用于此。

为了减少每次重新加载时从数据库中获取坐标的负担，您可以使用[缓存](http://msdn.microsoft.com/en-us/library/xsbfdd8c%28v=vs.100%29.aspx)的概念，这将有助于提高整体性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:13:18.143

对于映射，您应该使用[Google Maps API v3](https://developers.google.com/maps/documentation/javascript/basics)，请参阅文档的“[文章](https://developers.google.com/maps/articles/)”部分，了解有关与数据库接口的想法。

# java - Struts 2 - 通过迭代动态填充 optgroup

> ID：13569453
> 
> 赞同：2
> 
> 时间：2012-11-26T16:55:31.390
> 
> 标签：java, drop-down-menu, struts2, optgroup

我正在尝试为我在 struts 中的选择框动态填充一些 optgroup。目的是将映射中驱动选择框控件的任何重复名称分组到它们自己的选项组中。

例如，我有 3 家公司：

*   家得宝
*   麦当劳
*   沃尔玛

在我的数据库中，我有多个位置：

*   家得宝
    -38393 Some Street
    -3839 Elm Street
*   麦当劳
    -38393 Street Ave
    -38333 Test Street
    -393339 This Street
*   沃尔玛
    -3939 Street Ave

我只是希望它们使用选项组在我的下拉列表中分组（仅当有多个地址时，否则我希望它们在下拉列表中正常显示） - 可能类似于我发现的这个示例。我想做一些类似于下面的事情，但是 optgroup 必须以某种方式链接到选项。：

```
<s:select id="regionstate" name="state" list="stateMap">  
             <s:iterator value="region" status="regionStatus">  
                 <optgroup label="<s:property value="name" />">  
                         <s:iterator value="states" status="stateStatus">  
                             <option value="<s:property value="id" />"><s:property value="name" /></option>  
                         </s:iterator>  
                 </optgroup>  
     </s:iterator> 
```

我实际上并没有实现上面的代码，但我认为与我的问题相关的示例的问题在于，地区和州似乎没有关联。

我有： - 我的重复项（名称）列表，它将填充 optgroup 的标签属性，以及 - 包含每个单独项目的适当值（下拉值）和每个项目的地址（显示到用户）

我不确定我想要实现的目标是否可能，但它似乎应该非常简单。我希望我只需要一个小方向，而我只是缺少一小块拼图。

提前感谢您的所有帮助！

它应该看起来像这样，我认为：

*   -选择
    *   选择组 1
        *   选项
        *   选项
            -optgroup 2
        *   选项
        *   选项
        *   选项
            -optgroup 3
        *   选项
        *   选项

很抱歉对编辑造成的所有混淆。据我了解，选择框中的 optgroup 将是重复名称的列表（麦当劳、家得宝、沃尔玛）。每个 optgroup 中的每个选项都将与该特定名称相关联。例如，麦当劳的 optgroup 可能有多个与之关联的选项。

* * *

好的，假设我有一个公司课程。该类有 3 个属性：id、name 和 address。这是我期望渲染的选择框的外观：

```
<select name="companies">
    <option value="1a">Company 1</option>
    <option value="2a">Company 2</option>
    <optgroup label="Company 3">
        <option value="3a">38373 Street Ave</option>
        <option value="3b">38393 Town St</option>
    </optgroup>
    <optgroup label="Company 4">
        <option value="4a">990300 Street Ave</option>
        <option value="4b">99093 Town St</option>
        <option value="4c">99093 Town St</option>
    </optgroup>
</select> 
```

*   我有一张地图，其中包含每个唯一公司（公司 1 和公司 2）的 ID 和公司名称。通过 s:select 标记的 list 属性填充。
*   我希望我需要一个重复的每个项目（公司 3 和公司 4）的公司名称列表，以便为每个 optgroup 填充 optgroup 标签属性。我的假设是列表中的每个项目都需要对应于其中一张地图。这将需要一个迭代器来动态创建多个 optgroup
*   我还希望我需要一个不同的地图，其中包含每个重复项目的 ID 和公司地址（公司 3 和公司 4）。这还需要一个迭代器在每个 optgroup 中动态创建多个选项。

也许我难以传达的事情是实际上我需要处理 3 位数据，所以我不确定仅使用地图就可以。就像我说的那样，我很可能错过了这个难题的一部分，或者我假设的设计有缺陷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T05:17:56.420

只需尝试以下代码，它可能会对您有所帮助。

```
 <s:select id="regionstate" name="state" list="stateMap">  
                 <s:iterator value="region" status="regionStatus">  
                     <optgroup label="%{name}">  
                             <s:iterator value="states" status="stateStatus">  
                                 <option value="%{id}"> %{name}</option>  
                             </s:iterator>  
                     </optgroup>  
               </s:iterator>
    </s:select> 
```

# ios - iOS：键盘帧更改通知错误？

> ID：13569455
> 
> 赞同：0
> 
> 时间：2012-11-26T16:55:35.887
> 
> 标签：ios, keyboard

在 iOS6（iPad 3 和模拟器）上取消键盘时，键盘 + 附件视图会为 UIKeyboardFrameEndUserInfoKey 报告这些帧（转换为横向视图）：

```
...WillChangeFrameNotification: {{0, 660}, {1024, 396}}
...DidChangeFrameNotification: {{0, 108}, {1024, 396}} 
```

意思是，键盘报告它很快就会有一个 Y 坐标，它在关闭时通常具有，即 660（这没关系，因为键盘脱离也会发送 WillHide 通知）；但随后，它改变了主意并报告说它已将其框架更改为完全不同的位置（y = 108）？！

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-10T09:19:10.807

不，这不是错误。只需转换当前视图上的坐标：

```
CGRect keyboardFrame = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
CGRect dd  = [self.view convertRect:keyboardFrame fromView:nil];
NSLog(@"keyboard frame %@", NSStringFromCGRect(dd)); 
```

我添加了简单的[要点](https://gist.github.com/bimawa/5963666)

# java - 使java代码适应使用的jdk版本

> ID：13569459
> 
> 赞同：0
> 
> 时间：2012-11-26T16:55:53.687
> 
> 标签：java, preprocessor, java-7

我最近在必须用 Java 6 编译的代码中尝试了一些新的 Java 7 特性。

显然，在使用旧 jdk 构建 Java 7 代码时，我会遇到编译错误。

在 C# 中，我将只使用预处理器来定义版本条件并将关键代码包含在 #if 子句中。

Java 的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:00:45.017

一般来说，这是不可能的。您可以为 javac (-target) 或通过 ant/maven/gradle 包装器设置目标版本。但是，这仅适用于与较低版本兼容的那些功能。您还需要一个您希望源代码读取的版本的 javac。

最简洁的答案是不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:02:39.923

从理论上讲，您可以设置`-source`并使`-target`它们不同。然而，唯一能以这种方式工作的组合是 veraions`1.1`和`1.0`. 在所有其他情况下，您需要相同版本的 java 用于源和目标。

如果您必须使用 Java 6，我建议您使用该编译器，因为库也需要适用于该版本，或者您可以随意使用仅存在于 Java 7 中的库或方法。（有一些实用程序可以将已编译的类转换为较旧的类版本，但他们无法检查）

顺便说一句：Java 6 即将结束免费支持，Java 6 更新 35 可能是最后一个免费版本。也许是时候考虑 Java 7 了。

# cplex - java - 如何使用Java接口在ilog中创建多维变量？

> ID：13569462
> 
> 赞同：3
> 
> 时间：2012-11-26T16:56:05.000
> 
> 标签：cplex, ilog

我想用变量 x[i][j][k] 对问题建模。

参考手册中没有提到如何创建大小大于 1 维的变量。

[http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r4/index.jsp?topic=%2Filog.odms.cplex.help%2Frefjavacplex%2Fhtml%2Filog%2Fcplex%2FIloCplex.html](http://pic.dhe.ibm.com/infocenter/cosinfoc/v12r4/index.jsp?topic=%2Filog.odms.cplex.help%2Frefjavacplex%2Fhtml%2Filog%2Fcplex%2FIloCplex.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T23:43:55.093

此片段显示了在 [0,1] 中创建三个索引连续变量 x、x[i][j][t] 的示例：

```
 IloNumVar[][][] x = new IloNumVar[numNodes][numNodes][numDays];
  for(int i = 0; i < numNodes; i++) 
  {
    for(int j = 0; j < numNodes; j++)
    {
      //cplex is an instance of class IloCplex
      x[i][j] = cplex.numVarArray(numDays, 0, 1); 
    }
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:45:31.090

多维建模非常常规。

[这是一个由 IBM 提供的示例。](http://www-01.ibm.com/support/docview.wss?uid=swg21399963)

此外，IBM 的[“使用 IBM ILOG CPLEX CP Optimizer 建模 – 实际调度示例”](ftp://public.dhe.ibm.com/common/ssi/ecm/en/wsw14076usen/WSW14076USEN.PDF)实际上是一个非常好的起点。它有许多多维示例，尽管大多数与 OPL 中的示例一样，但您不必使用这些示例。

[而且，这是一个使用二维的完整示例。](http://web.njit.edu/all_topics/Prog_Lang_Docs/cplex80/doc/userman/html/Java_Design_Model22.html) 具体来说，变量 nutrPerFood 具有 i 和 j 作为维度。

```
 // nutrPerFood[i][j]   nutrition amount of nutrient i in food j

 double[][] nutrPerFood; 
```

你打电话时使用它`IloMPModeler`

[本教程](http://www.me.utexas.edu/~bard/LP/LP%20Handouts/CPLEX%20Tutorial%20Handout.pdf)对熟悉各种 Ilog 调用也很有帮助。

希望有帮助。

# javascript - 使用 Rivet.js 和 Coffeescript 为选择字段迭代模型

> ID：13569470
> 
> 赞同：3
> 
> 时间：2012-11-26T16:56:42.080
> 
> 标签：javascript, coffeescript, rivets.js

我正在尝试使用引导数据填充带有选项的选择字段。将我的模型数组绑定到 jQuery 选择对象时遇到问题...

**的HTML**

```
<select data-each-project="projects" id="project-selection">
    <option data-value="project:description"></option>
</select> 
```

**绑定**

```
project_array = new Array()

_.each projects, (project) ->
    projects_array.push project

rivets.bind @el.select, projects:projects_array 
```

**结果**

我收到一个错误，表明该对象没有 .on 方法->它没有，因为它是一个模型数组而不是它自己的模型...

这应该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:39:56.973

当您订阅迭代时，绑定铆钉会做两件事：

1.  订阅整个数组，因此如果它发生变化，它将重新运行迭代
2.  订阅需要绑定的数组的所有孩子

Rivets 没有订阅您的孩子，因为您没有使用任何需要它的绑定。

project:description = 非订阅绑定

project.description = 订阅绑定

如果您不想订阅数组更改（我认为这就是您所要求的），您可以这样做`data-each-project=":projects"`

# c# - WebDriver 中的通用点击方法

> ID：13569472
> 
> 赞同：0
> 
> 时间：2012-11-26T16:56:47.880
> 
> 标签：c#, automation, webdriver, selenium-webdriver

我正在将测试脚本从 Selenium RC 迁移到 WebDriver。到目前为止最大的问题是我们的扩展类必须重写以使用 WebDriver API，我不介意，但是 By 类给我带来了问题，主要是因为你必须明确说明你是什么类型的元素在调用 FindElements 方法时使用。因此，我没有为每个元素类型（css、XPath、name、id 等）创建一个方法，而不是隐式确定元素类型的单击方法，如下所示：

```
public void ClickByXPath(string xpath) { _driver.FindElement(By.XPath(xpath)).Click(); } 
```

这可行，但我不得不为每种元素类型创建很多单独的方法（对于 GetText、IsElementPresent 等）。在编写脚本时，为每个方法键入名称会变得很旧，因为它们很长，我必须检查以查看将哪种类型的元素用作参数。我想拥有这样的东西......

```
public void Click(XPath locator) { ... }
public void Click(Name locator) { ... } 
```

但是，我不确定使用 WebDriver 解决此问题的最佳方法。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:12:38.970

您可以创建一种采用 By 参数的方法，例如

```
 public void Click(By by){ _driver.FindElement(by).Click(); } 
```

和使用

```
 Click(By.CssSelector("some string"));
    Click(By.XPath("some string")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:01:17.657

您可以使用`Enum` `SelectorType`{ `Xpath`, `Css`, etc..} 并使用具有（`String`参数，`SelectorType`类型）和使用的单击方法，`switch-case`根据类型执行不同的操作。

# python - IndexError：列表索引超出范围---素数生成器

> ID：13569478
> 
> 赞同：0
> 
> 时间：2012-11-26T16:57:05.480
> 
> 标签：python, list, indexing

我有一个程序可以找到任意数 n 的质因数。运行它时，我收到一个索引错误，因为索引超出了限制（其中限制是 sqrt(n)）。我不确定为什么它超过了限制。任何人都可以提供任何见解吗？

我的代码适用于大多数数字：

```
>>> pFactors(250000)
[2, 2, 2, 2, 5, 5, 5, 5, 5, 5]
>>> pFactors(123456789)
[3, 3, 3607, 3803]
>>> pFactors(123456)

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    pFactors(123456)
  File "D:\my_stuff\Google Drive\Modules\factors.py", line 50, in pFactors
    check = primes[index]
IndexError: list index out of range
>>> pFactors(123455)

Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    pFactors(123455)
  File "D:\my_stuff\Google Drive\Modules\factors.py", line 50, in pFactors
    check = primes[index]
IndexError: list index out of range 
```

奇怪的是，到目前为止，我只发现它无法用于数字 123400-1234

这是我的代码：

```
def pFactors(n):
   import primes as p
   from math import sqrt
   global pFact
   pFact, primes, limit, check, num, index = [], [], int(round(sqrt(n))), 2, n, 0
   if type(n) != int and type(n) != long:
      raise TypeError("Argument <n> can only be <type 'int'> or <type 'long'>")
   else:
      if p.isPrime(n):
         pFact = [1, n]
      else:
         p.prevPrimes(limit)
         for i in p.primes_dict:
            if p.primes_dict[i]:
               primes.append(i)
         while check <= limit:
            if check in primes and (num%check==0):
               pFact.append(check)
               num = num / check
               if num in primes:
                  pFact.append(num)
                  break
            else:
               check = primes[index]
               index += 1
      return pFact 
```

我确信问题不在于`primes.py`，因为它工作正常。如果有人对如何解决此问题有任何解决方案，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:00:58.160

您想使用平方根的上限作为列表长度，但您只是将其四舍五入，这意味着它有时会向下舍入。

更好的是，使用基于 int 的平方根函数而不是`math.sqrt`，这样它也适用于对于双精度数来说太大的数字。

此外，`global pFact`是糟糕的设计。根本没有理由为此使用全局列表，除非您尝试调试它或其他东西，即使那样它也是有问题的。

最后，我不确定为什么要在素数的情况下返回 1 作为一个因素。这违反惯例并且与您的复合案例不一致，但我想如果您真的愿意，您可以这样做。

无论如何，这里有一个简单的方法来做因式分解。一旦你首先让它工作，你就可以担心优化它。

```
def factor(x):
    n = int(x)
    if n < 1:
        raise ValueError("Argument must be positive")

    factors = []
    d = 2

    while d*d <= n:
        while n%d == 0:
            n = n // d
            factors.append(d)
        d += 1
    if n>1:
        factors.append(n)
    return factors 
```

# ember.js - 使用 ember-data 为 id 列命名

> ID：13569481
> 
> 赞同：1
> 
> 时间：2012-11-26T16:57:11.923
> 
> 标签：ember.js, ember-data

我在服务器上使用带有 express.js 的 ember-data 和一个 mysql 后端。问题是我现有的数据库结构对 id 列使用了前缀：

```
DS.RESTAdapter.map('App.Order', {
  primaryKey: 'ord_id',
});

App.store = DS.Store.create({
  revision: 7,
  adapter: DS.RESTAdapter.create({
    bulkCommit: false
  })
});

App.Order = DS.Model.extend(); 
```

ember-data 似乎需要一个“id”字段。有没有办法将它映射到我的“ord_id”？

编辑：我必须在使用之前定义地图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:54:30.667

看一下这个：

[https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md](https://github.com/emberjs/data/blob/master/BREAKING_CHANGES.md)

```
App.Adapter.map('App.Post', {
  primaryKey: '_id'
}); 
```

这是 ember 数据的一部分，修订版 5。我认为这是你需要做的......

# ios - 如何在 iOS 上进行配置文件？

> ID：13569484
> 
> 赞同：0
> 
> 时间：2012-11-26T16:57:23.143
> 
> 标签：ios, profiling

我正在使用工具来分析 iOS 游戏的 CPU 活动。

我遇到的问题是我不完全确定我正在查看的数据代表什么。

这是我运行游戏几分钟后看到的屏幕，

![在此处输入图像描述](../Images/6fb0ae283e5e8245c97323a613525d48.png)

我可以展开调用树来准确查看哪些方法使用的 CPU 时间最多。我不确定这些数据是否代表分析器运行的整个持续时间内的 CPU 使用率，或者只是在那个时间点。

我试过沿着时间线运行滑块，看看它对数字有什么影响，但似乎没有任何影响。所以这让我相信这些数据代表了游戏运行期间的 CPU 使用率。

如果是这种情况，那么是否可以在特定时间点访问 CPU 使用率。沿着时间线有一些尖峰，我想看看当时发生了什么，看看我是否可以做出任何改进。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:04:42.447

要选择时间范围，请使用窗口顶部（秒表左侧）的“检查范围”按钮。

首先通过单击图形标尺选择范围的开始，按最左边的按钮选择左边缘。然后在图形标尺上选择范围的末端，然后按最右边的按钮选择右边缘。

# iphone - iPhone网站和第一次滚动时的位置固定延迟

> ID：13569487
> 
> 赞同：2
> 
> 时间：2012-11-26T16:57:36.527
> 
> 标签：iphone, css, web

我在我的移动网站上使用 css 固定位置作为顶部和底部导航栏，我注意到我的 iPhone 浏览器（Safari 和 Chrome）上的一个错误：固定位置直到第一次滚动结束时才起作用......然后它适用于所有下一个卷轴。

**例子 ：**

[http://jsbin.com/ugaraf/1](http://jsbin.com/ugaraf/1)

**截图：**

刷新后第一次向下滚动时出现错误：http: [//goo.gl/yD5iz](http://goo.gl/yD5iz)

然后工作正常：http: [//goo.gl/mUKSn](http://goo.gl/mUKSn)

你有同样的经历吗？有没有办法解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-17T16:26:22.073

我有一个带有固定顶部的网站，并且可以在 safari mobile 和 chrome 上正常工作。

这个特定 DIV 的 css 是

```
#navbar{

 width:100%;
 height:80px;
 background-color:#FFFFFF;
 border-bottom:4px solid #007f3f;
 position:fixed;
 z-index:10;

} 
```

就我而言，z-index 是由于其他 div 位于`position:relative`.

至少对于排名靠前的，你真的不需要`top:0` 尝试没有它并发布一些反馈。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T12:04:49.637

这可以在 iOS 设备上启用硬件加速：

```
.youraffixelement {
   -webkit-transform: translate3d(0, 0, 0);
   transform: translate3d(0, 0, 0);
} 
```

# symfony - Symfony2 找不到动作的路径

> ID：13569489
> 
> 赞同：1
> 
> 时间：2012-11-26T16:57:42.863
> 
> 标签：symfony, routes

我正在与列出文件的 google drive api 捆绑在一起。我在 IndexAction 中有一个 if 来查看用户是否需要授予权限或已经授予权限。如果需要，我会从 google 获取 url 并重定向到该链接。

在谷歌控制台我把重定向链接：

```
www.googlebundle/firstTime 
```

在我的 GoogleDriveController 我有

```
public function firstTimeAction() {
       (...)
} 
```

在我的路由中，我得到了这个：

```
FilesGoogleDriveBundle_firstTime:
   pattern: /firstTime
   defaults: { _controller: "FilesGoogleDriveBundle:GoogleDrive:firstTime" }
   requirements: { _method: get }

FilesGoogleDriveBundle_homepage:
   pattern:  /Drive/{id}
   defaults: { _controller: FilesGoogleDriveBundle:GoogleDrive:index } 
```

但我在 prod.log 中收到此错误：

```
[2012-11-26 16:50:14] request.ERROR: Symfony\Component\HttpKernel\Exception\NotFoundHttpException: No route found for "GET /firstTime" (uncaught exception) at /var/www/Symfony/app/cache/prod/classes.php line 4564 [] [] 
```

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:14:27.717

首先确保 symfony 看到你的路由器规则。

在项目根目录放

```
php app/console router:debug | grep FilesGoogleDriveBundle_firstTime 
```

你应该得到这样的东西

```
FilesGoogleDriveBundle_firstTime   GET    /firstTime 
```

最后一个值是此操作的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:59:51.473

```
FilesGoogleDriveBundle_firstTime:
   pattern: /firstTime
   defaults: { _controller: FilesGoogleDriveBundle:GoogleDrive:firstTime }
   requirements: 
       _method: GET 
```

试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:26:14.003

似乎是缓存问题，清除 prod 环境的缓存：

```
php app/console cache:clear --env=prod 
```

# c# - 我可以做些什么来允许 Web 服务对注册表进行更改？

> ID：13569493
> 
> 赞同：1
> 
> 时间：2012-11-26T16:58:09.213
> 
> 标签：c#, web-services, registrykey

我有一个带有 web 服务 (asmx.cs) 后端的网站。

我希望网络服务能够在注册表中进行更改（'HKEY_LOCAL_MACHINE\SOFTWARE\CompanyName\SoftwareName'）。

我添加了完全控制的 IIS_IUSRS 和 IIS_WPG。

我已验证（通过 System.Security.Principal.WindowsIdentity.GetCurrent().Name）该代码作为“NT AUTHORITY\IUSR”运行

平台是windows 7，IIS 7.5。

我不断收到错误消息：“访问注册表项......被拒绝”。

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:07:37.173

设置权限

```
HKLM\Software\WoW6432Node\[your company]\[your software] 
```

但要小心：这可能是一个安全漏洞。

# jquery - 如何在ajax中将内容显示为默认值？

> ID：13569501
> 
> 赞同：0
> 
> 时间：2012-11-26T16:58:56.577
> 
> 标签：jquery, ajax, load, default, webpage

我有一个支持历史记录的 ajax 函数，但我想从链接加载页面内容。

这是我的 index.html

```
<!DOCTYPE html>
<html>
<head>
<title>demo</title>
<script src="jquery.tools.min.js"></script>
<link rel="stylesheet" type="text/css" href="tabs-no-images.css"/>
</head>
<body>
<ul class="css-tabs">
  <li><a href="ajax1.htm">Tab 1</a></li>
  <li><a href="ajax2.htm">Second tab</a></li>
  <li><a href="ajax3.htm">An ultra long third tab</a></li>
</ul>

<div class="css-panes">
  <div style="display:block"></div>
</div>

<script>
  $(function() {
      $("ul.css-tabs").tabs(
      "div.css-panes > div",
      {effect: 'ajax', history: true}
    );
    });
</script>
</body>
</html> 
```

和我的 CSS

```
/* root element for tabs  */
ul.css-tabs {
    margin:0 !important;
    padding:0;
    height:30px;
    border-bottom:1px solid #666;
}

/* single tab */
ul.css-tabs li {
    float:left;
    padding:0;
    margin:0;
    list-style-type:none;
}

/* link inside the tab. uses a background image */
ul.css-tabs a {
    float:left;
    font-size:13px;
    display:block;
    padding:5px 30px;
    text-decoration:none;
    border:1px solid #666;
    border-bottom:0px;
    height:18px;
    background-color:#efefef;
    color:#777;
    margin-right:2px;
    position:relative;
    top:1px;
    outline:0;
    -moz-border-radius:4px 4px 0 0;
}

ul.css-tabs a:hover {
    background-color:#F7F7F7;
    color:#333;
}

/* selected tab */
ul.css-tabs a.current {
    background-color:#ddd;
    border-bottom:1px solid #ddd;
    color:#000;
    cursor:default;
}

/* tab pane */
.css-panes div {
    display:none;
    border:1px solid #666;
    border-width:0 1px 1px 1px;
    min-height:150px;
    padding:15px 20px;
    background-color:#ddd;
} 
```

和 [jquery.tools.min](https://dl.dropbox.com/u/69060927/New%20folder/jquery.tools.min.js)

我有三个包含 ajax 内容的文件夹。

我希望，当用户转到页面 index.html 时，他们可以将任何页面（ajax1.htm 或 ..）的内容视为默认内容。所以我的问题是如何通过添加额外代码来处理我当前的代码？

并请描述要编辑的内容以及放置外部代码或其他内容的位置。

评论中的代码：

```
$(function() {
    var current_hash = false;
    setInterval(function() {
        if (window.location.hash != current_hash) {
            current_hash = window.location.hash;
            $('#content').load("ajax1.htm?page=" + current_hash);
        }
    }, 100);
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T08:06:41.073

顺便说一句，我找到了我的问题的解决方案。我使用 jquery 地址大师，这解决了我的问题。但是另一个问题来了，jquery 冲突。
我使用
mootools-yui-compressed.js（用于固定菜单，仅固定在一个轴上）
jquery.address-1.5.min.js（用于ajax地址主功能）
jquery-ui-1.8.13.custom.min。 js（用于ajax地址主函数）
jquery.js（用于ajax地址主函数）

和第一个（mootools-yui-compressed.js）和最后一个（jquery.js）相互冲突。我试过了

`jQuery.noConflict();`

但它没有用。
请帮忙。

# google-drive-api - GoogleDrive：以编程方式声明文件可离线使用

> ID：13569504
> 
> 赞同：3
> 
> 时间：2012-11-26T16:59:05.087
> 
> 标签：google-drive-api

有没有办法以编程方式将 google-drive-file 设置为离线可用？我在 API 中找不到方法，并且总是必须使用 google-frontend（在 web 或 android 上）来这样做。

如果有办法，请勾勒出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:27:49.477

文件更新参数不包括离线访问选项[https://developers.google.com/drive/v2/reference/files/update](https://developers.google.com/drive/v2/reference/files/update)

有一个 accesstype 选项可将授权设置为脱机，但我认为它与文件访问无关。

# nhibernate - NHibernate 缺少用于覆盖属性的 SqlParameter

> ID：13569507
> 
> 赞同：0
> 
> 时间：2012-11-26T16:59:09.527
> 
> 标签：nhibernate, fluent-nhibernate, automapping, table-per-hierarchy

我正在尝试使用 FluentNHibernate AutoMapping 实现按层次结构表的方法。
我有一个基类和三个子类。第三个子类覆盖了基类的几个属性。前两个子类的实例保存得很好，但是当我尝试保存具有覆盖属性的第三个类的实例时，我得到

```
Invalid index 7 for this SqlParameterCollection with Count=7. 
```

似乎 NHibernate 没有为被覆盖的属性添加 SqlParamaters，但它尝试设置一个值。

如何解决？也许映射/配置有一些变化？

堆栈跟踪：

```
[IndexOutOfRangeException: Invalid index 7 for this SqlParameterCollection with Count=7.]
   System.Data.SqlClient.SqlParameterCollection.RangeCheck(Int32 index) +5033831
   System.Data.SqlClient.SqlParameterCollection.GetParameter(Int32 index) +21
   System.Data.Common.DbParameterCollection.System.Collections.IList.get_Item(Int32 index) +10
   NHibernate.Type.DateTimeType.Set(IDbCommand st, Object value, Int32 index) +74
   NHibernate.Type.NullableType.NullSafeSet(IDbCommand cmd, Object value, Int32 index) +70
   NHibernate.Type.NullableType.NullSafeSet(IDbCommand st, Object value, Int32 index, Boolean[] settable, ISessionImplementor session) +37
   NHibernate.Persister.Entity.AbstractEntityPersister.Dehydrate(Object id, Object[] fields, Object rowId, Boolean[] includeProperty, Boolean[][] includeColumns, Int32 table, IDbCommand statement, ISessionImplementor session, Int32 index) +189
   NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Boolean[] notNull, Int32 j, SqlCommandInfo sql, Object obj, ISessionImplementor session) +498
   NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object id, Object[] fields, Object obj, ISessionImplementor session) +166
   NHibernate.Action.EntityInsertAction.Execute() +181
   NHibernate.Engine.ActionQueue.Execute(IExecutable executable) +42
   NHibernate.Engine.ActionQueue.ExecuteActions(IList list) +59
   NHibernate.Engine.ActionQueue.ExecuteActions() +16
   NHibernate.Event.Default.AbstractFlushingEventListener.PerformExecutions(IEventSource session) +121
   NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event) +92
   NHibernate.Impl.SessionImpl.Flush() +291
   MDT.Core.DataAccess.DbContext.Flush() in C:\dev\DHL\ISS\Common\MDT.Core\DataAccess\DbContext.cs:215
   ISS.Web.Controllers.ReportScheduleController.Index() in C:\dev\DHL\ISS\ISS.Web\Controllers\ReportScheduleController.cs:55
   lambda_method(Closure , ControllerBase , Object[] ) +62
   System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +208
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +27
   System.Web.Mvc.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12() +55
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +263
   System.Web.Mvc.<>c__DisplayClass17.<InvokeActionMethodWithFilters>b__14() +19
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +191
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +343
   System.Web.Mvc.Controller.ExecuteCore() +116
   System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +97
   System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +10
   System.Web.Mvc.<>c__DisplayClassb.<BeginProcessRequest>b__5() +37
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +12
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +62
   System.Web.Mvc.<>c__DisplayClasse.<EndProcessRequest>b__d() +50
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +60
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +9
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8862381
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:16:54.180

是的，FluentNHibernate AutoMapping 为被覆盖的属性添加了重复映射。
奇怪的是代码没有帮助

```
.Override<ThirdClass>(map => { map.IgnoreProperty(p => p.Age); }) 
```

所以我必须使用

```
.OverrideAll(map => map.IgnoreProperties(x => x.MemberInfo.HasAttribute<IgnoreMapAttribute>())) 
```

并在我的班级中设置 [IgnoreMap] 属性。

# ios - iOS6 使用 PlayAndRecord 音频会话类别时音量非常低

> ID：13569510
> 
> 赞同：2
> 
> 时间：2012-11-26T16:59:17.967
> 
> 标签：ios, audio, ios6, core-audio, audio-recording

我有一个通过 AVAudioPlayer 以及 AudioUnit 播放器实现播放音频的应用程序。从 iOS6 开始，通过扬声器的播放音量（无论播放机制如何）已显着降低——即使在最大音量下也几乎听不见音量。如果我只是将音频会话更改为其他会话之一，例如 kAudioSessionCategory_SoloAmbientSound 或 kAudioSessionCategory_MediaPlayback，音量将恢复到 iOS6 之前的水平，但我当然无法录制音频。在运行 iOS5（或 iOS4）的同一设备上，不同音频会话类别的音量级别没有差异。

有没有其他人遇到过这个问题？我一直试图弄清楚如何在我的应用程序中将音量恢复到正常水平。我已经向 Apple 提交了一个错误，因为这似乎是一个错误，因为不同类别之间的音量水平差异很大，但我不希望很快从他们那里得到答案（或解决方案）。

配置音频会话：

```
UInt32 category = kAudioSessionCategory_PlayAndRecord;
error = AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(category),  &category);
if (error) {
    // handle error
}

UInt32 speakerOverride = 1;
error = AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryDefaultToSpeaker, sizeof(speakerOverride), &speakerOverride);
if (error) {
    // handle error
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:17:43.757

您是否检查/设置了当前的硬件输出音量？

```
kAudioSessionProperty_CurrentHardwareOutputVolume 
```

如果您使用多声道混音器音频单元，您还可以通过以下方式检查/设置音量：

```
kMultiChannelMixerParam_Volume 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T07:12:50.530

实际上，您应该将您的 speakerOverride 参数指定为“spkr”，就像在 audiosession 标头中一样

```
enum
{
    kAudioSessionOverrideAudioRoute_None    = 0,
    kAudioSessionOverrideAudioRoute_Speaker = 'spkr'
}; 
```

# c++ - 用 C++ 编程基本的东西

> ID：13569512
> 
> 赞同：0
> 
> 时间：2012-11-26T16:59:25.443
> 
> 标签：c++, function, return

我有一个简单的问题，因为我没有正确理解该功能。有这样的代码：

```
int function(a, b)
{
 return a*b;
} 
```

我很清楚，如果 a 和 b 是 int ，那么它会返回结果。但是有这样的：

```
int function1(arg1, arg2)
{
 //something
 if (B)
 {
  //do something
  return;
  }
 arg1[0] = variable1;
 arg1[1] = variable2;
 arg2 = variable3;
 return;
} 
```

我想命名接口，输入和输出，并将函数体放入“黑盒”。输入是函数的参数，我正确吗？然后输出是整数数组**arg1**和整数**arg2**，对吗？如果是这样，如何输出输入，或者如果我错了如何识别它？另外，如果**B**为真，在返回点会发生什么？**函数**1什么都不返回吗？如果是这样，为什么不是 void 类型？抱歉有点混乱和这样有趣的例子，但多亏了这一点，我才能理解这个概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:07:20.047

这段代码实际上是无效的 C++：

```
int function(a, b)
{
 return a*b;
} 
```

这是无效的，因为函数参数必须有类型，并且`a`没有`b`指定类型。这将是有效的：

```
int function(int a, int b)
{
 return a*b;
} 
```

如果你想设计一个可以接受未指定类型参数的函数，你可以使用模板：

```
template<class Val>  Val function(Val a, Val b)
{
  return a*b;
} 
```

这适用于任何类型（例如`int`），只要该类型在与`operator*`as with `a*b`.. 一起使用时有意义。例如，`std::string`将不起作用。

在 C++ 中，所有声明为返回类型的函数都必须在每个返回点返回该类型。这使得这段代码也无效：

```
int function1(arg1, arg2)
{
 //something
 if (B)
 {
  //do something
  return;
  }
 arg1[0] = variable1;
 arg1[1] = variable2;
 arg2 = variable3;
 return;
} 
```

您不能`void`从声明为返回`int`. 如果您需要从声明为返回某些内容的函数中“转义”，则可以抛出异常：

```
int function1(arg1, arg2)
{
 //something
 if (B)
 {
  //do something
  throw std::runtime_error("whoops");
  }
 arg1[0] = variable1;
 arg1[1] = variable2;
 arg2 = variable3;
 throw std::runtime_error("whoops 2");
} 
```

但是，鉴于此问题的上下文，我怀疑这**不是**您要寻找的，您现在应该将异常视为一个高级主题。这些不是您要寻找的机器人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:08:58.733

如果 B 为真，则函数在输出数组被填充之前返回，但您仍然需要返回*一些*内容，因为该函数具有“int”返回类型。

至于参数是输入参数还是输出参数，就看你自己了。但是，C++ 中的约定是输入参数是 const（如果它们是指针或引用），如果它们是输出参数，则为非 const：

```
int function1(const int* arg1, int* arg2) // arg1 is an in param, arg2 is an out param 
```

# eclipse - 有没有办法告诉 eclipse 忽略来自特定代码文件夹的警告？

> ID：13569513
> 
> 赞同：0
> 
> 时间：2012-11-26T16:59:26.747
> 
> 标签：eclipse, warnings, javadoc

这是一个长期的问题，所以请耐心等待。:)

我喜欢让我的代码没有警告，这样我就可以快速确定我是否有真正需要处理的警告。我设置了如果某些 javadoc 项目不正确，它将显示警告。在我工作的团队中，他们不关心单元测试中的 javadoc 警告。这些测试总是在 src/test/java。不幸的是，如果测试中有警告，它不仅会在代码文件夹 src/test/java 上显示警告图标，还会在项目本身上显示警告图标。我很想对他们所有的单元测试进行 javadoc，但这并不能很好地利用我的时间。有没有办法告诉 eclipse 忽略来自 src/test/java 的警告，或者为我的测试触发与我的实现不同的警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:15:04.417

You can use a working set to filter out the test code. Take a look at this answer: [Filtering warnings in eclipse by filename](https://stackoverflow.com/a/232473/274350)

# azure - Windows Azure 网站 (WAWS) 上的 ReportViewer 问题

> ID：13569518
> 
> 赞同：1
> 
> 时间：2012-11-26T16:59:42.913
> 
> 标签：azure, reportviewer, azure-web-app-service

在我的一个项目中，我使用 reportviewer 控件在网页上显示报告，并且在上传到 Azure 时，我已按照[此处提到的步骤进行操作](http://msdn.microsoft.com/en-us/library/windowsazure/gg430128.aspx)

上传后，当我运行该报告网页时，它给了我以下错误

> ```
> An error occurred during local report processing.
> The definition of the report 'Reports\Report1.rdlc' is invalid.
> An unexpected error occurred in Report Processing.
> Could not load file or assembly 'Microsoft.ReportViewer.ProcessingObjectModel, >    
> Version=10.0.0.0,
> Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its
> dependencies. The system cannot find the file specified. 
> ```

这应该是什么原因？

**更新**：

我添加了以下 2 个 dll，如下所示 snap Microsoft.ReportViewer.Common.dll (10.0)
Microsoft.ReportViewer.WebForms.dll (10.0)

![在此处输入图像描述](../Images/b88a78275180960fc702d34c6dad0e38.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:15:35.953

[经过长时间的研究，我从这个链接](http://blogs.msdn.com/b/sqlazure/archive/2010/08/17/10051010.aspx)找到了我的问题的解决方案

缺少以下 dll 参考的问题

*   Microsoft.ReportViewer.ProcessingObjectModel.dll
*   Microsoft.RevportViewer.DataVisualization.dll

**但安装后我在C:\Windows\Microsoft.NET\assembly\GAC_MSIL**中找不到那些 dll

 ****但是这个路径C:\Windows\assembly**中有可用的程序集文件， 然后我直接使用 VS2010 添加了这些 dll，如下图所示。

![在此处输入图像描述](../Images/9afe76f81fdd2cb1f594337f3eba60ba.png)

它奏效了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:34:40.123

您在此项目中使用的 ReportViewer 版本是多少？请指定您的项目中包含了多少个和哪一个参考 DLL？这将有助于确保您已在项目中正确包含所有 DLL。您必须使用与 Azure DB 兼容的 Report Viewer SP1，以及相同的 SP1 语言包。

我建议 FTP 到您的网站，并验证您在项目中配置时是否正确上传了所有 DLL。如果所有配置的文件都进入文件服务器，这是检查 Windows Azure 网站的最佳方式。**

# debugging - 未找到管理员数据

> ID：13569524
> 
> 赞同：1
> 
> 时间：2012-11-26T17:00:10.493
> 
> 标签：debugging, caching, facebook-insights

[我试图声明“我的网站的洞察力”，但我收到错误“在根网页http://akcja-nikon.pl/](http://akcja-nikon.pl/)上找不到管理数据。洞察力需要此根网页上指定 URL akcja-nikon 的管理数据。请"

管理员标签数据在那里，我在 index.php 和pickup.php 上检查了三次（索引重定向到pickup - 如果你问的话）。我已经在所有其他域上做了将近一百次，从来没有遇到过问题。上周我开始在这个和另外一个域上遇到问题。

调试器在 HTML 代码的第一行之后删除 URL 的奇怪内容

[https://developers.facebook.com/tools/debug/og/object?q=akcja-nikon.pl%2Fpickup.php](https://developers.facebook.com/tools/debug/og/object?q=akcja-nikon.pl%2Fpickup.php)

并将错误标记为红色“无法下载：无法从 URL 检索数据”。

有任何想法吗？也许是一些奇怪的 Facebook 缓存？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-26T19:03:27.097

> 管理员标签数据在那里，我在 index.php 和pickup.php 上检查了三次（索引重定向到pickup - 如果你问的话）。

不，不是的。

您通过 JavaScript`index.php`重定向到`agegate.php`- Facebook 抓取工具并不关心。

直接调用`agegate.php`，没有设置任何 cookie（刮板也不关心），只提供一条错误消息，

```
<br />
<b>Warning</b>:  mysql_fetch_array(): supplied argument is not a valid MySQL
result resource in <b>/home/marketingpic/include-pl.php</b> on line <b>38</b> 
```

连同一个 HTTP 状态代码`302 Moved Temporarily`和一个**错误**的Location 标头，只是说`Location: pickup.php`. （错误，因为根据定义，Location 标头的值**需要***完全限定*的URL 。）

 **如果我`pickup.php`再次打电话给你，没有任何 cookie，它会尝试再次将我送回`index.php`（并再次使用错误的 Location 标头）。

* * *

不知道，你到底想在这里完成什么——但你现在做的*方式，似乎是一派胡言。***

# jquery - jquery mobile - 从外部页面返回时维护滚动位置的任何指针？

> ID：13569528
> 
> 赞同：0
> 
> 时间：2012-11-26T17:00:36.193
> 
> 标签：jquery, jquery-mobile

我发现了很多设置滚动位置的示例，但它们似乎都是在网站内的页面之间跳转时。

在这种情况下，关于从哪里开始的任何建议：

1) jqm 页面链接到其他网站上的页面（即新闻故事）

2) 向下滚动，单击新闻报道，然后单击返回按钮

返回时，滚动位置最好是离开页面时的位置。

任何建议表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:05:42.253

有几个解决方案：

1.  如果您正在构建 jQM 移动应用程序（不测量 android od iPhone），您可以使用 phonegap 从 jQM 构建移动应用程序。Phonegap 有一个名为[Child Browser](http://a.shinynew.me/post/19786775381/bridging-the-phonegap-childbrowser-plugin)的插件，可用于显示外部链接。这是相关的，因为 jQm 在显示外部页面时可能会遇到兑现问题。

2.  在 iFrame 中显示它，这不是一个好主意，但在某些情况下仍然可以管理。

3.  您可以使用默认状态并将您的页面链接到某个外部页面，如果 Ajax 请求成功，则将新页面内容添加到 DOM。但是现在我们有一个问题，有时，如果最后一页有一些非 jQM 插件，它们将无法正常加载。还有一个问题，与 android 不同，iPhone 上没有后退按钮。

选项 1 最适合移动设备，选项 3 最适合桌面应用程序。

# c# - 是否可以发送 WM_COPY 消息将文本复制到剪贴板以外的其他地方？

> ID：13569532
> 
> 赞同：2
> 
> 时间：2012-11-26T17:01:04.553
> 
> 标签：c#, .net, winapi, sendmessage

这是方法定义：

```
 [DllImport("user32.dll")]
    public static extern int SendMessage(IntPtr hWnd, int msg, IntPtr lparam, IntPtr wparam); 
```

这是对 SendMessage 的调用：

```
 //WM_COPY = 0x0301
 SendMessage(handle, WM_COPY, IntPtr.Zero, IntPtr.Zero); 
```

这就是我检索数据的方式：

```
string text = System.Windows.Forms.Clipboard.GetText(); 
```

除了不希望将数据复制到剪贴板之外，我想做同样的事情。是否可以将数据复制到内存中的其他部分？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:10:47.450

不可以。您无法控制其他应用程序在收到消息时会做什么。您将获得目标窗口对该消息的任何行为，而没有其他任何东西（除非您也控制目标，否则您可以自己处理它）。

`WM_COPY`只是一条消息（也是标准消息，以特定方式处理是有意义的） - 有些窗口会处理它，有些则不会。根据 MSDN [WM_COPY](http://msdn.microsoft.com/en-us/library/windows/desktop/ms649022%28v=vs.85%29.aspx)的定义，将保存文本以供编辑控制。

> 应用程序将 WM_COPY 消息发送到编辑控件或组合框，以将当前选择以 CF_TEXT 格式复制到剪贴板。

如果您正在实现自己的处理 WM_COPY 的应用程序，您可以将数据复制到任何您想要的地方，如果对编辑控件进行子类化，那么保持默认行为会很有意义......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:10:04.893

如果剪贴板不是一个选项，您可以将其写入文件。

# android - Android - 从安全服务器打开 PDF 文件（需要登录）

> ID：13569539
> 
> 赞同：2
> 
> 时间：2012-11-26T17:01:25.520
> 
> 标签：android, security, file, pdf, login

我有一个非常具体的问题。

我正在为我的学校开发一个 Android / iPhone 应用程序。这应该会显示来自安全服务器的 PDF 文件。这就是它的工作原理：

我在正常的 web 视图中打开网页 (edunite.com/login.aspx)。如果 webview 已加载我使用 Javascript 登录的页面：

```
 view.loadUrl("javascript: var field = document.getElementById('TextBoxEmail');  field.value='XYXYXY@go.de' ");
           view.loadUrl("javascript:var field = document.getElementById('TextBoxPassword');      field.value='XYXYXYX';"); 
```

这工作得很好。登录后，我从 URL 获取会话 ID，如下所示： (S(a2kolt553yeyfq454f55eo45))

然后我加载一个 URL，我可以在其中找到我的 PDF 文件...看起来像这样： [https ://secure.edunite.info/(S(mhgkyc45ber4zcm1xcyhdn45))/StudentPortal/Document/MainFolderList.aspx](https://secure.edunite.info/(S(mhgkyc45ber4zcm1xcyhdn45))/StudentPortal/Document/MainFolderList.aspx)

我必须这样做，因为 URL 的链接每天都在变化。

通过使用 HTML 文件，我可以找到我的 PDF 文件的 URL。所以没关系，完美的作品。

## 现在让我们来看看真正的问题：

我无法在 webview 中打开 pdf URL，因为 Androids webview 不支持 .pdf 文件。我无法下载文件并将其发送到本地安装的阅读器，因为如果我想下载它，它会说它没有登录。

没关系，因为我只登录了我的 webview。我无法使用 Http 客户端登录，因为那样我的 SessionID 会不同，因此 URL 也会不同。

我真的不明白。如果有人可以帮助我，那就太好了。

例如在 iPhone 上它可以完美运行，因为 UIWebView 支持 .pdf 文件。

# git - git bisect 卡住了

> ID：13569540
> 
> 赞同：1
> 
> 时间：2012-11-26T17:01:27.357
> 
> 标签：git, git-bisect

我知道topic-branch-7的提示有bug，也知道master的提示没有bug。我想找出在 topic-branch-7 中引入错误的位置。所以我运行了以下命令：

```
git checkout topic-branch-7
# some testing to verify the bug
git bisect start bad  # start a git bisect and mark this commit as bad
git-merge-base master topic-branch-7
9ac8c59bb10c13d86bcdeff90cb47e25d477caad
git checkout 9ac8c59bb10c13d86bcdeff90cb47e25d477caad
# some testing to verify the bug is not present
git bisect good 
```

让我感到震惊的是，当我运行 git bisect good 时……什么也没有发生！难道不应该将提交标记为好，找到这个提交和错误提交之间的中点，然后检查那个提交吗？为什么什么都没有发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T01:14:14.340

我认为您的 git bisect 语法错误。它应该是

```
git-merge-base master topic-branch-7
9ac8c59bb10c13d86bcdeff90cb47e25d477caad
git bisect start topic-branch-7 9ac8c59bb10c13d86bcdeff90cb47e25d477caad
#you are now at a commit somewhere in between topic-branch-7 and 9ac8c59bb10c13d86bcdeff90cb47e25d477caad
#do testing to find out if bug is there
git bisect good/bad
#repeat until git tells you where the bug is introduced
git bisect reset HEAD 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:12:50.257

我知道 git bisect 工作得很好，但我喜欢做的是使用分支手动完成。我选择一个好的提交并创建一个分支，称之为“好”。然后我首先在中间找到一个提交并对其进行测试。如果它很好，那么我在这个和 master 之间的提交上创建一个分支，否则，我在一个低于所选中间分支的提交上创建一个分支。这是迭代完成的，基本上是二进制排序。这意味着我检查的提交更少，并且我比 bisect 有更好的控制。通常我使用 gitk 来检查每个分支。另一个好处是，如果你找到了一些东西，你可以在一个单独的分支上工作，而不会影响其他分支。例如

```
Master Commit
.
. 
.
Test Commit  <---- This one is good, so keep selecting commits above until you fail
.
.
.
Middle Commit  <--- Create branch and checkout. This one is good, so go above
.
.
.
Good Commit 
```

# c - 如何使这个 Linux 程序编译？

> ID：13569541
> 
> 赞同：-6
> 
> 时间：2012-11-26T17:01:30.313
> 
> 标签：c, linux, compilation, posix

我在网上找到了这段代码，我想编译它，但我似乎无法弄清楚如何。我认为它必须在 Linux 中完成，因为`pthread`. 我假设代码是正确的，但我不能`100%`。如果有人可以帮助我，那就太好了。

标题

```
typedef enum {
LEFT=0,
RIGHT,
STRAIGHT
} turn_direction_t;

typedef enum {
NORTH=0,
SOUTH,
EAST,
WEST
} orientation_t;

static void gostraight(orientation_t, unsigned int);
static void turnleft(orientation_t, unsigned int);
static void turnright(orientation_t, unsigned int);
static void * approachintersection(void*);
int createcars(int, char**);

pthread_mutex_t NW_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t NE_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t SE_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_mutex_t SW_mutex = PTHREAD_MUTEX_INITIALIZER;

#define lock(CAR, MUTEX) do {         
if (pthread_mutex_lock(&MUTEX)) { 
  fprintf(stderr, "pthread_mutex_lock error %d\n", CAR);    
  exit(-1); 
} 
} while(0)

#define unlock(CAR, MUTEX) do {     
 if (pthread_mutex_unlock(&MUTEX)) { 
  fprintf(stderr, "pthread_mutex_unlock error %d\n", CAR);  
  exit(-1); 
} 
} while(0) 
```

身体

```
#include <stdlib.h>
#include <stdio.h>
#include <pthread.h>
#include "intersection.h"

#define NUMCARS 30

#define lock_NW(CAR) lock(CAR, NW_mutex)
#define lock_NE(CAR) lock(CAR, NE_mutex)
#define lock_SW(CAR) lock(CAR, SW_mutex)
#define lock_SE(CAR) lock(CAR, SE_mutex)

#define unlock_NW(CAR) unlock(CAR, NW_mutex)
#define unlock_NE(CAR) unlock(CAR, NE_mutex)
#define unlock_SW(CAR) unlock(CAR, SW_mutex)
#define unlock_SE(CAR) unlock(CAR, SE_mutex)

static void gostraight(orientation_t cardirection, unsigned int carnumber){

switch(cardirection){
case NORTH:
lock_NE(carnumber);
lock_SE(carnumber);
printf("Car %d, Moving South-North\n", carnumber);
unlock_SE(carnumber);
unlock_NE(carnumber);
break;
case SOUTH:
lock_NW(carnumber);
lock_SW(carnumber);
printf("Car %d, Moving North-South\n", carnumber);
unlock_SW(carnumber);
unlock_NW(carnumber);
break;
case EAST:
lock_SE(carnumber);
lock_SW(carnumber);
printf("Car %d, Moving West-East\n", carnumber);
unlock_SW(carnumber);
unlock_SE(carnumber);
break;
case WEST:
lock_NW(carnumber);
lock_NE(carnumber);
printf("Car %d, Moving East-West\n", carnumber);
unlock_NE(carnumber);
unlock_NW(carnumber);
break;
}
}

static void turnleft(orientation_t cardirection, unsigned int carnumber){

switch(cardirection){
case NORTH:
lock_NE(carnumber);
lock_SE(carnumber);
lock_SW(carnumber);
printf("Car %d, Moving South-West\n", carnumber);
unlock_SW(carnumber);
unlock_SE(carnumber);
unlock_NE(carnumber);
break;
case SOUTH:
lock_NW(carnumber);
lock_NE(carnumber);
lock_SW(carnumber);
printf("Car %d, Moving North-East\n", carnumber);
unlock_SW(carnumber);
unlock_NE(carnumber);
unlock_NW(carnumber);
break;
case EAST:
lock_NW(carnumber);
lock_SE(carnumber);
lock_SW(carnumber);
printf("Car %d, Moving West-North\n", carnumber);
unlock_SW(carnumber);
unlock_SE(carnumber);
unlock_NW(carnumber);
break;
case WEST:
lock_NW(carnumber);
lock_NE(carnumber);
lock_SE(carnumber);
printf("Car %d, Moving East-South\n", carnumber);
unlock_SE(carnumber);
unlock_NE(carnumber);
unlock_NW(carnumber);
break;
}
}

static void turnright(orientation_t cardirection, unsigned int carnumber){

switch(cardirection){
case NORTH:
lock_NE(carnumber);
printf("Car %d, Moving South-East\n", carnumber);
unlock_NE(carnumber);
break;
case SOUTH:
lock_SW(carnumber);
printf("Car %d, Moving North-West\n", carnumber);
unlock_SW(carnumber);
break;
case EAST:
lock_SE(carnumber);
printf("Car %d, Moving West-South\n", carnumber);
unlock_SE(carnumber);
break;
case WEST:
lock_NW(carnumber);
printf("Car %d, Moving East-North\n", carnumber);
unlock_NW(carnumber);
break;
}
}

static void * approachintersection(void* arg){
unsigned int * carnumberptr;
unsigned int carnumber;
orientation_t cardir = (orientation_t)random()%4;
unsigned long turn = random()%3;

carnumberptr = (unsigned int*) arg;
carnumber = (unsigned int) *carnumberptr;

if(turn==LEFT){
turnleft(cardir, carnumber);
} else if(turn==RIGHT){
turnright(cardir, carnumber);
} else {//straight
gostraight(cardir, carnumber);
}

return (void*)carnumberptr;
}

int main(int argc, char **argv){

int index, tid;
unsigned int carids[NUMCARS];
pthread_t carthreads[NUMCARS];

for(index = 0; index <NUMCARS; index++){
carids[index] = index;
tid = pthread_create(&carthreads[index], NULL, approachintersection,   

(void*)&carids[index]);
}

for(index = 0; index <NUMCARS; index++){
pthread_join(carthreads[index], NULL);
}
printf("Done\n");
return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:03:59.933

您必须`-pthread`明确使用选项才能使用`POSIX -thread`库。

这是编译程序的命令。

```
gcc -Wall program.c -o program -pthread 
```

# java - Java 支持儒略历吗？

> ID：13569542
> 
> 赞同：9
> 
> 时间：2012-11-26T17:01:32.587
> 
> 标签：java, calendar

Oracle 文档[http://docs.oracle.com/javase/6/docs/technotes/guides/intl/calendar.doc.html](http://docs.oracle.com/javase/6/docs/technotes/guides/intl/calendar.doc.html)指出 Java 支持 3 种日历系统：公历、日本帝国和泰国佛教。Java 支持儒略历吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T17:03:52.110

是的，它确实。

来自 GregorianCalendar 的文档：

> GregorianCalendar 是一种混合日历，它同时支持儒略历和公历系统，并支持单个不连续性，默认情况下对应于公历制定时的公历日期（在某些国家/地区为 1582 年 10 月 15 日，在其他国家/地区较晚）。调用者可以通过调用 setGregorianChange() 来更改切换日期。

用来`setGregorianChange`改变它。

> public void setGregorianChange(Date date) 设置 GregorianCalendar 更改日期。这是从儒略日期转换为公历日期的时间点。默认值为 1582 年 10 月 15 日（公历）。在此之前，日期将采用儒略历。要获取纯儒略历，请将更改日期设置为 Date(Long.MAX_VALUE)。要获取纯公历，请将更改日期设置为 Date(Long.MIN_VALUE)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:03:27.760

标准的[Calendar](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)类可能没有，但[Joda Time](http://joda-time.sourceforge.net/)库可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:03:55.637

是的，但它不在 java.* 中：

[朱利安日历 javadoc](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/sun/util/calendar/JulianCalendar.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:14:11.430

人们不经常使用 java.util.Calendar。[事实上，当JSR-310](http://jcp.org/en/jsr/detail?id=310)完成时，它很快就会被现在已经在一个名为 'joda time' 的库中的东西所取代。[Joda Time 也有儒略历](http://joda-time.sourceforge.net/cal_julian.html)。

只需将 joda-time 作为依赖项添加到您的项目中即可。

# c++ - C++ zilib deflate/inflate 和 ztream 参数

> ID：13569545
> 
> 赞同：0
> 
> 时间：2012-11-26T17:01:42.153
> 
> 标签：c++, compression, zlib, inflate, deflate

在了解（在一些帮助下......）zlib 库的压缩和解压缩功能如何工作之后，我现在正试图了解 deflate 和 inflate 的工作原理。据我了解，compress 在一次调用中使用，而 deflate 可以多次调用。

拥有一个带有 Particle 结构（坐标 x、y、z）的简单程序，我可以毫无错误地缩小我的数据（获得 Z_STREAM_END 响应），然后用另一个 z_stream 对象（也有 Z_STREAM_END 响应）膨胀它们。但是当我试图从膨胀响应中显示我的数据时，我可以得到我的结构的 x 和 y 坐标，而不是第三个 (z)。

我认为这是由于我为 z_stream 对象提供了错误的参数以进行膨胀，但我找不到哪个参数。据我了解阅读文档和示例，这就是我认为 z_stream 的工作方式（这只是一个示例）：

```
// Here i give a total memory size for the output buffer used by deflate func
#define CHUNK 16384

struct Particle
{
    float x;
    float y;
    float z;
};

...

// An element to get a single particule and give it to deflate func
Bytef *dataOriginal = (Bytef*)malloc( sizeof(Particle) );

// This var will be used to pass compressed data
Bytef *dataCompressed = (Bytef*)malloc( CHUNK );

z_stream strm;
strm.zalloc = Z_NULL;
strm.zfree = Z_NULL;
strm.opaque = Z_NULL;
deflateInit(&strm, Z_DEFAULT_COMPRESSION);

strm.avail_out = CHUNK;
strm.next_out = dataCompressed;

int nbrLoop = 2;
int spaceUsed = 0;
int flush;
Particle p;

for (var i = 0; i<nbrLoop; i++){
    // set all values equals to 0
    memset( &p, 0, sizeof(Particle) );

    // insert some random values
    p.x = (i+1) * 1;
    p.y = (i+1) * 3;
    p.z = (i+1) * 7;

    //copy this values in a Bytef* elements
    memcpy( dataOriginal, &p, sizeof(Particle) );

    strm.avail_in = sizeof(dataOriginal);
    strm.next_in = dataOriginal;

    // If it's the last particle :
    if(i == nbrLoop - 1){
    flush = Z_FINISH;
    }
    else{
        flush = Z_NO_FLUSH;
    }

    int response = deflate(&strm, flush);

    // I don't get any errors here
    // EDIT : Get Z_OK at first loop, the Z_STREAM_END at second (last)
    if( res == Z_STREAM_END ){
        spaceUsed = CHUNK - strm.avail_out;
    }
}

deflateEnd(&strm);

// Trying to get back my datas
Bytef *decomp = (Bytef*)malloc( sizeof(Particle) );

z_stream strmInflate;
strmInflate.zalloc = Z_NULL;
strmInflate.zfree = Z_NULL;
strmInflate.opaque = Z_NULL;
inflateInit(&strmInflate);

// datas i want to get at the next inflate
strmInflate.avail_in = sizeof(Particle);
strmInflate.next_in = dataCompressed;

// Two particles were compressed, so i need to get back two
strmInflate.avail_out = sizeof(Particle) * 2;
strmInflate.next_out = decomp;

int response = inflate( &strmInflate, Z_NO_FLUSH );
// No error here,
// EDIT : Get Z_OK

inflateEnd( &strmInflate );

Particle testP;
memset( &testP, 0, sizeof(Particle) );
memcpy( &testP, decomp, sizeof(Particle) );

std::cout << testP.x << std::endl; // display 1 OK
std::cout << testP.y << std::endl; // display 3 OK
std::cout << testP.z << std::endl; // display 0 NOT OK 
```

此外，我认为第二次调用 inflate 将允许我恢复在我的 for 循环中创建的第二个粒子的数据，但我无法检索它。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:50:21.253

`strmInflate.avail_in = sizeof(Particle);`需要`strmInflate.avail_in = spaceUsed;` 你必须提供 deflate 产生的所有数据。

你想`Z_STREAM_END`从到底得到什么`inflate()`，不是`Z_OK`。否则，您还没有解压缩整个生成的流。

请注意，根据[zlib.h](https://github.com/madler/zlib/blob/master/zlib.h)中的文档，您还需要在调用之前设置`next_in`and `avail_in`（如果您愿意`Z_NULL`的话）`0``inflateInit()`

根据您将在最终应用程序中使用的输入和输出缓冲区的大小，您可能需要更多循环来确保`deflate()`并`inflate()`完成它们的工作。请参阅[如何使用 zlib 的示例](http://zlib.net/zlib_how.html)。

# javascript - 未捕获的 TypeError javascript 与 flash 通信

> ID：13569547
> 
> 赞同：0
> 
> 时间：2012-11-26T17:01:44.380
> 
> 标签：javascript, html

我想通过javascript与flash通信，控制我的flash播放器这是我的代码，但我有一个错误，请你帮帮我，

```
 var flashvars = {
        flvpVideoSource: "myApp.swf",
        flvpWidth: "640",
        flvpHeight: "360"
    };
    var params = {
        menu: "true",
        allowfullscreen: "true"
    };
    var attributes = {
        id: "FLVplayer",
        name: "FLVplayer"
    };

    //functions used to find the id of the flash object
    function getFlashMovieObject(movieName){
        if(document.embeds[movieName])
        return document.embeds[movieName];
        if(window.document[movieName])
        return window.document[movieName];
        if(window[movieName])
        return window[movieName];
        if(document[movieName])
        return document[movieName];
        return null;
    }

    //function in flash to play the video
    function playMyVideoInFlash(){
        var flashMovie = getFlashMovieObject("FLVplayer");
        flashMovie.playMyVideo();
    }

    //function in flash to pause the video
    function pauseMyVideoInFlash(){
        var flashMovie = getFlashMovieObject("FLVplayer");
        flashMovie.pauseMyVideo();
    }
    </script> 
```

这是我的错误：

```
 Uncaught TypeError: Cannot call method 'playMyVideo' of null index.html:37
playMyVideoInFlash index.html:37
onclick 
```

我的按钮代码：

```
 <button type="button"  onclick="playMyVideoInFlash()">play</button>
    <button type="button" onclick="pauseMyVideoInFlash()">pause</button> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:07:07.247

使用花括号，它应该可以工作（或写在一行中！），javascript会在每行之后自动插入一个分号！！！

带花括号：

```
function getFlashMovieObject(movieName){
    if(document.embeds[movieName]) {
      return document.embeds[movieName];
    }
    if(window.document[movieName]) {
      return window.document[movieName];
    }
    if(window[movieName]) {
      return window[movieName];
    }
    if(document[movieName]) {
      return document[movieName];
    }
    return null;
} 
```

一行：

```
function getFlashMovieObject(movieName){
    if(document.embeds[movieName]) return document.embeds[movieName];
    if(window.document[movieName]) return window.document[movieName];
    if(window[movieName]) return window[movieName];
    if(document[movieName]) return document[movieName];
    return null;
} 
```

您还应该检查函数中的 NULL （可能是否存在 playMyVideo/stopMyVideo-function），因为您在 getFlashMovieObject-Function 中返回它：

```
 function playMyVideoInFlash(){
    var flashMovie = getFlashMovieObject("FLVplayer");
    if(typeof flashMovie === 'object' && typeof flashMovie.playMyVideo === 'function') {
      flashMovie.playMyVideo();
    }
} 
```

# mysql - 带有 JOINS 和 GROUP BY 的 MySQL 查询

> ID：13569549
> 
> 赞同：1
> 
> 时间：2012-11-26T17:01:45.703
> 
> 标签：mysql, join, group-by

我正在构建一个 MySQL 查询，但我似乎无法正确处理。

我有四个表：
- 客户
- 订单
- sales_rates
- purchase_rates

客户和订单之间存在 1:n 关系“customernr”。
订单和 sales_rates 之间存在 1:n 关系“ordernr”。订单和purchase_rates 之间存在1:n 关系“ordernr”。

我想做的是产生所有客户的总购买和销售金额的输出。

到目前为止，我有以下查询。

```
SELECT c.customernr, c.customer_name, SUM(sr.sales_price) AS sales_price, SUM(pr.purchase_price) AS purchase_price
FROM orders o, customers c, sales_rates sr, purchase_rates pr
WHERE o.customernr = c.customernr
AND o.ordernr = sr.ordernr
AND o.ordernr = pr.ordernr
GROUP BY c.customer_name 
```

sales_price 和 purchase_price 的结果太高了。我似乎得到了双重计数。我究竟做错了什么？是否可以在单个查询中执行此操作？

感谢您的回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:05:48.110

看起来您不是按客户分组的。C.customerid 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:22:46.847

似乎问题在于，当您将订单表连接到具有销售率和采购率的表时，您将获得这两个表的笛卡尔积。 *即*，这两个表中的每一行对另一个表中的每个对应行重复一次。以下查询应通过在将销售率和采购率连接到其他表之前对每个订单的费率求和来解决此问题：

```
SELECT c.customernr, c.customer_name,
       SUM(sr.sales_price) AS sales_price,
       SUM(pr.purchase_price) AS purchase_price
FROM customers c
INNER JOIN orders o
ON o.customernr = c.customernr
LEFT JOIN (SELECT ordernr, SUM sales_price) AS sales_price
           FROM sales_rates
           GROUP BY ordernr) sr
ON sr.ordernr = o.ordernr
LEFT JOIN (SELECT ordernr, SUM(purchase_price) AS purchase_price
           FROM purchase_rates
           GROUP BY ordernr) pr
ON pr.ordernr = o.ordernr
GROUP BY c.customernr, c.customer_name; 
```

# django - Django：url和内容创建导致500并且没有apache错误日志条目

> ID：13569550
> 
> 赞同：0
> 
> 时间：2012-11-26T17:01:50.920
> 
> 标签：django

如果我尝试打开创建的 url，我会收到 500 错误。

我的程序是：

第一的`python manage.py startapp black`

我在`project/settings.py`下面添加`INSTALLED_APPS` `'black',`

我添加了`project/urls.py` `url(r'^test/', include('black.urls')),`

内容`black/urls.py`为：

```
from django.conf.urls import patterns, url
from black import views

urlpatterns = patterns('',
url(r'^$', views.index, name='index')
) 
```

以及 black/views.py 的内容：

```
from django.http import HttpResponse

def index(request):
        return HttpResponse("SHOW ME: BLACK") 
```

毕竟我同步了数据库。

我在 apache-error-log 中看不到任何错误，在我发布的 django 文件中也看不到。什么可能导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:12:47.567

我建议你看一下用 django[记录错误的几种方便的方法。](https://docs.djangoproject.com/en/dev/topics/logging/)
对于生产，您将需要配置您的日志记录行为。[您可以在](https://docs.djangoproject.com/en/dev/topics/logging/#an-example)相同的文档中
找到一个示例。

我个人在生产中所做的是启用电子邮件日志记录，每次出现致命错误时它都会向我发送一封电子邮件。

让我们看看通过邮件和文件记录会是什么样子：

**设置.py**

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler'
        },
        'logfile': {
            'class': 'logging.handlers.WatchedFileHandler',
            'filename': '/var/log/django/your_application.log'
        },
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
        'django': {
            'handlers': ['logfile'],
            'level': 'ERROR',
            'propagate': False,
        },
    }
} 
```

# xaml - WinRT GridView 滚动设置在鼠标/kb 和触摸上的工作方式不同

> ID：13569551
> 
> 赞同：1
> 
> 时间：2012-11-26T17:02:05.377
> 
> 标签：xaml, gridview, windows-8, windows-runtime

我试图模仿 NetFlix 应用程序的功能，左侧有一条在滚动时折叠的条带，我必须将 GridView 上的图块向右偏移一点，以便它们可以适应这种行为。它们似乎在键盘上工作正常并完全向右滚动（尽管我注意到当我到达左边界时滚动条突然变大。当我在触摸时使用它时这完全改变了——我似乎在右边和滚动不会滚动到最后 100 像素左右。我该如何处理。

我假设它与此处的错误有关，但似乎并没有解决该解决方案的问题。

[WinRT XAML GridView 控件中的“粘滞滚动”问题](https://stackoverflow.com/questions/13332266/sticky-scrolling-issue-in-winrt-xaml-gridview-control)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:56:38.107

杰伊，我敢打赌你同时解决了它。但无论如何我都会在这里添加我的解决方案；它可能会为其他研究员节省时间。

* * *

这种效果 - 无法通过触摸水平滚动到最右端 - 当我这样做时确实消失了：

*) 更改`VirtualizingStackPanel`为`StackPanel`

或者

*) 将`GridView`（在 ItemsPanelTemplate 中使用 VirtualizingStackPanel）分组为一个简单的`ScrollViewer`

希望有帮助！

# r - 如何输出模型系数的估计值？

> ID：13569554
> 
> 赞同：2
> 
> 时间：2012-11-26T17:02:12.603
> 
> 标签：r, curve-fitting

对不起，如果这是一个新手问题，但我不明白。我正在用 sigmoid 曲线拟合我的数据`glm()`。这行得通，我可以绘制输出，我看到了一个很好的 sigmoid 曲线。

但是，如何让 R 返回它适合的最终值？据我了解，R 将数据拟合到`logit(y) = b0 + b1x`，但是当我这样做时，`> summary(glm.out)`我只会得到

```
Call:
glm(formula = e$V2 ~ e$V1, family = binomial(logit), data = e)

Deviance Residuals: 
       1         2         3         4         5         6         7  
-0.00001  -0.06612  -0.15118  -0.34237   0.20874   0.08724  -0.19557  

Coefficients:
            Estimate Std. Error z value Pr(>|z|)
(Intercept)  -24.784     20.509  -1.208    0.227
e$V1           2.073      1.725   1.202    0.229

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 4.60338  on 6  degrees of freedom
Residual deviance: 0.23388  on 5  degrees of freedom
AIC: 5.8525

Number of Fisher Scoring iterations: 8 
```

我如何获得 b0 和 b1？

样本数据集：

Z 列可以忽略。

```
X   Y   Z
0.0 0.0 6
6.5 0.0 3
8.8 0.333333333333  3
10.5    0.2 10
11.1    0.0 3
11.25   0.166666666667  6
12.0    0.2 5
12.75   0.5 6
13.4    0.333333333333  3
13.5    0.2 5
14.25   0.5 6
15.0    0.333333333333  6
15.7    0.666666666667  3
15.75   0.666666666667  6
16.5    0.833333333333  6
17.25   0.555555555556  9
18.0    1.0 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:04:30.643

您可以通过该`fitted()`方法获得拟合值，即`fitted(glm.out)`. 但是，您需要估计系数而不是拟合值，为此您需要`coef()`方法，如`coef(glm.out)`.

# dialog - Google +1 共享对话框为空且有错误

> ID：13569558
> 
> 赞同：-2
> 
> 时间：2012-11-26T17:02:27.207
> 
> 标签：dialog, share

我在我的页面中插入了 google +1 按钮，当我单击它时，+1 工作正常，但共享对话框钢打开时没有内容，直到我单击页面中的其他区域使其消失

你知道为什么这不起作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:59:27.227

解决了 ！

问题是我在我的网站中使用的 mootools 版本，它是 1.2.4 版本，它覆盖了浏览器提供的 JSON 对象。尝试调用 JSON 时共享对话框失败。

我编辑了 mootools js 文件，并在最后添加了这段代码：

```
JSON.parse = JSON.decode;
JSON.stringify = JSON.encode; 
```

现在一切正常。

# javascript - 在每个循环结束时调用一次函数

> ID：13569561
> 
> 赞同：0
> 
> 时间：2012-11-26T17:02:38.423
> 
> 标签：javascript, each

如何在每个循环结束时调用一次函数。

这会在每个循环上提醒“已完成”，我想要在循环完成时进行一次。

```
 $(function(){

      var imgArr=[];

      var lis = $('#gallery li')

      lis.each(function(){
        imgArr.push(this.outerHTML);
        $(this).remove();
        alertFun();
      })

      function alertFun(){
        alert('finished');
      }

    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:04:40.237

```
function alertFun(){
  alert('finished');
}

lis.each(function(){
  imgArr.push(this.outerHTML);
  $(this).remove();
})

alertFun(); 
```

还是我错过了什么？

编辑：根据您的评论，我想我知道您现在来自哪里。

你为每个人提供一个回调函数。但是，不要将此与异步调用混淆。尽管您以与异步调用（例如`ajax`or ）相同的方式为每个调用提供回调，但`animate`该调用是同步的并按顺序执行。

还要记住这`function alertFun(){ ... }`是一个声明，而不是一个调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:04:42.873

我可能会遗漏一些东西，但是：

```
$(function(){

  var imgArr=[];

  var lis = $('#gallery li');

  lis.each(function(){
    imgArr.push(this.outerHTML);
    $(this).remove();
  });

  alert('finished');//ta da

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:05:11.140

```
//Previous code

lis.each(function(){
  imgArr.push(this.outerHTML);
  $(this).remove();

})

alertFun();

function alertFun()... 
```

# python - 如何捕捉 YouTube 嵌入代码并转换为 URL

> ID：13569563
> 
> 赞同：1
> 
> 时间：2012-11-26T17:02:39.653
> 
> 标签：python, regex, youtube

我只需要将 YouTube 嵌入代码剥离到他们的 URL 即可。

这与 StackOverflow 上的所有问题完全相反，但只有一个问题。大多数人都希望将 URL 转换为嵌入代码。这个问题解决了我想要的使用模式，但与特定嵌入代码的正则表达式相关（将[YouTube 嵌入代码剥离到 URL 仅](https://stackoverflow.com/questions/8536787/strip-youtube-embed-code-down-to-url-only)）

我不熟悉 YouTube 多年来如何提供嵌入 - 或者尺寸有何不同。根据他们当前的站点，有 2 种可能的嵌入模板和多种选项。如果是这样，我可以自己处理一个正则表达式——但我希望有人可以分享更多的知识，这样我就可以编写一个合适的正则表达式模式来匹配它们，而不会遇到无穷无尽的边缘情况。

完整的用例场景：

*   用户在基于 Web 的所见即所得编辑器中输入内容
*   后端清除 youtube 和其他嵌入代码；将批准的嵌入重新格式化为内部格式，因为文本全部转换为降价。
*   在显示时，为 youtube 或其他 3rd 方网站生成适当的当前模板/代码显示

在之前的一家公司，我们的技术团队设计了一个计划，通过仅列出 URL 来嵌入 YouTube 视频。效果很好，但它是在每个人都接受培训的 CMS 中。我正在尝试创建一个类似的存储，但用于用户生成的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:19:13.073

您可能会考虑将[BBCode](http://en.wikipedia.org/wiki/BBCode)用于用户生成的内容（这里有一个[python 模块](http://code.google.com/p/postmarkup/)）。

vBulletin 论坛软件允许通过`[youtube]`标签嵌入 YouTube。您的用户只需输入视频的代码而不是完整的 URL，然后您在服务器端创建嵌入代码。

如果他们输入视频的完整 URL，那么您只需渲染一个指向它的链接。

[从这个例子：](https://www.vbulletin.com/forum/showthread.php/199304-How-To-Make-a-YouTube-BB-Code)

一些视频在 `http://youtube.com/watch?v={video_id}`

在您的文本编辑器中： `[youtube]{video_id}[/youtube]`

输出此 HTML： `<object width="425" height="350"><param name="movie" value="http://www.youtube.com/v/{video_id}"></param><embed src="http://www.youtube.com/v/{video_id}" type="application/x-shockwave-flash" width="425" height="350"></embed></object>`

# c++ - 为什么在 C++ 中未定义有符号字符的 256

> ID：13569566
> 
> 赞同：3
> 
> 时间：2012-11-26T17:02:44.997
> 
> 标签：c++, char, signed

阅读 C++ Primer 5th edition book，我注意到`signed char`值为 的 a`256`是未定义的。我决定尝试一下，我发现这`std::cout`对那个 char 变量不起作用。（没有打印）。

但是在 C 上，同样的 事情`signed char c = 256;` 会给`0`.`char c`

我尝试搜索但没有找到任何东西。

有人可以向我解释为什么在 C++ 中会出现这种情况吗？

编辑：我知道 256 是 2 个字节，但是为什么与 C 中的不同，发生在 C++ 中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-02-11T12:07:55.063

这本书大错特错。没有未定义的行为

```
signed char c = 256; 
```

`256`是类型的整数文字`int`。为了用它初始化 a `signed char`，它被转换为`signed char`（§8.5 [dcl.init]/17.8；所有引用都指向 N4140）。此转换受 §4.7 [conv.integral] 的约束：

> 1 整数类型的纯右值可以转换为另一种整数类型的纯右值。无作用域枚举类型的纯右值可以转换为整数类型的纯右值。
> 
> 2 如果目标类型是无符号的，则 [...]
> 
> 3 如果目标类型是有符号的，如果它可以在目标类型（和位域宽度）中表示，则值不变； **否则，该值是实现定义的。**

如果`signed char`不能表示 256，则转换产生一个实现定义的 type 值，`signed char`然后用于初始化`c`。这里没有什么未定义的。

* * *

当人们说“签名溢出是 UB”时，他们通常指的是 §5 [expr]/p4 中的规则：

> 如果在计算表达式期间，结果未在数学上定义或不在其类型的可表示值范围内，则行为未定义。

This renders UB expressions like `INT_MAX + 1` - the operands are both `int`s, so the result's type is also `int`, but the value is outside the range of representable values. This rule does not apply here, as the only expression is `256`, whose type is `int`, and 256 is obviously in the range of representable values for `int`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T17:04:54.093

编辑：请参阅下面的 TC 答案。它更好。

`signed char`有符号整数溢出在 C++ 和 C 中是未定义的。在大多数实现中，, 的最大值`SCHAR_MAX`为 127，因此将 256 放入其中会溢出。大多数情况下，您会看到数字只是环绕（到 0），但这仍然是未定义的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T17:13:20.390

您会看到 和 之间的`cout`区别`printf`。当你输出一个字符时，`cout`你没有得到数字表示，你得到一个字符。在这种情况下，角色是`NUL`不会出现在屏幕上的。

[请参阅http://ideone.com/7n6Lqc](http://ideone.com/7n6Lqc)上的示例

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T17:04:38.693

char 通常是`8 bits`或 a `byte`，因此可以保存`2^8`不同的值。如果是`unsigned`, 从`0`到`255`否则, 当`signed`从`-128`到`127`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T17:05:23.983

`unsigned char`值是（通常是迂腐的）是从 0 到 255。有 256 个值，1 个字节可以容纳。

如果你得到溢出（通常）值使用模 256，作为其他整数类型模`MAX + 1`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-22T13:52:05.877

@Pubby 我不知道 C/C++ 标准是否定义了有符号整数溢出时的行为，但 gcc 似乎并不总是将 (x < x + 1) 视为真的。"<" 运算符将带符号的 int 作为操作数，因此 x < x + 1 --> (int)x < (int)x + (int)1

以下代码产生输出：1 0 0 0 (32bit Linux + gcc)

```
signed char c1, c2; 
signed int i1, i2; 

c1 = 127;
c2 = c1 + 1;

i1 = 2147483647;
i2 = i1 + 1;

printf("%d %d\n", c1 < c1 + 1, c1 < c2);
printf("%d %d\n", i1 < i1 + 1, i1 < i2); 
```

# c# - 带有图像的工具提示

> ID：13569568
> 
> 赞同：1
> 
> 时间：2012-11-26T17:03:00.397
> 
> 标签：c#, asp.net, .net, hyperlink, tooltip

我目前有一个超链接控件，如下所示：

```
<asp:HyperLink ID="logoLink" runat="server" NavigateUrl="#"></asp:HyperLink> 
```

我在我的网格中设置它的徽标文本：

```
 HyperLink logoLink = (HyperLink)e.Item.FindControl("logoLink"); 
    logoLink.Text = lblsub + ".gif"; 
```

我喜欢做的是，当用户点击超链接时，我喜欢在工具提示中显示 gif 文件。

最简单的方法是什么？图像位于 Image 文件夹中，因此路径如下：

```
 Images/ + lblsub + ".gif"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:05:42.427

您可以使用`jQuery/JavaScript`来实现这一点。

可以在网上找到不同的自定义工具提示。我遇到了这个[工具提示，你的图片](http://ipicture-square.justmybit.com/)非常酷。

也看看[qTip](http://craigsworks.com/projects/qtip/)

# c# - 同步访问由计时器重置的状态变量

> ID：13569569
> 
> 赞同：2
> 
> 时间：2012-11-26T17:03:04.157
> 
> 标签：c#, timer, synchronization

我目前正在使用 C# 开发一个项目。我正在使用单个锁同步对状态变量的访问。此状态变量被触发以设置给定时间段，然后应重置其值。我当前的代码如下。

```
using System.Threading;

class Test
{
  object syncObj = new object();
  bool state = false;
  Timer stateTimer;

  Test()
  {
    stateTimer = new Timer(ResetState, this, Timeout.Infinite, Timeout.Infinite);
  }

  void SetState()
  {
    lock(syncObj)
    {
      state = true;
      stateTimer.Change(1000, Timeout.Infinite);    
    }
  }

  static void ResetState(object o)
  {
    Test t = o as Test;
    lock(t.syncObj)
    {
      t.state = false;
    }
  }  
} 
```

鉴于在 Timer 调用 ResetState 之前再次调用 SetState 是有效的（即允许延长状态为 true 的时间段），我可以想象单个锁可能不够用的情况。我正在考虑的具体情况是这样的

*   SetState 和 ResetState 都是同时进入的，分别在主线程和 Timer 线程上
*   SetState先获取锁，正确设置state为true，触发定时器重新启动
*   然后 ResetState 错误地将 state 设置为 false，这意味着在预期的时间段内 state 不是 true

我一直在为这个问题挠头一段时间。我最接近能够解决的方法是使用两个锁，但最后我发现这导致了其他问题（至少，我这样做的方式）。

有没有已知的方法来解决这个问题（我应该阅读一些东西来刷新我的同步知识）？

更新：我忘了提到在这种情况下无法查询计时器的当前状态。如果可以的话，我会想象检查 ResetState 中的剩余时间以确定计时器是否真的停止了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:44:09.020

首先也是最重要的：[公开公开锁定对象是个坏主意！](https://stackoverflow.com/questions/6112316/why-locking-on-a-public-object-is-a-bad-idea)

```
class Test
{
  private object syncObj = new object();
  private bool state = false;
  private Timer stateTimer;

  public Test()
  {
    stateTimer = new Timer(ResetState, this, Timeout.Infinite, Timeout.Infinite);
  }

  public void SetState()
  {
    lock(syncObj)
    {
      state = true;
      stateTimer.Change(1000, Timeout.Infinite);    
    }
  }

  public static void ResetState(object o)
  {
    Test t = o as Test;
    t.ResetState();
  } 
```

由于您不再公开锁定对象，因此您必须创建另一种方法来重置状态：

```
 public void ResetState()
  {
    lock(syncObj)
    {
      state = false;
      stateTimer.Change(Timeout.Infinite, Timeout.Infinite);
    }
  }  

} 
```

请注意，我们还处理了新`ResetState`方法中的另一个问题，即强制计时器不再触发。这只会保证`state`标志不会与计时器不同步；即，如果您设置状态，它将在预期的时间内保持设置状态或直到调用重置方法。

## 更新

如果要拒绝重置尝试，请将状态变量设为枚举：

```
enum EState
{
    Off = 0,
    On = 1,
    Waiting = 2
}

private EState state = EState.Off;

// Provide a state property to check if the state is on or of (waiting is considered to be Off)
public bool State{ get{ return state == EState.On;} } 
```

此外，您现在需要修改 SetState 方法，并且您将需要两个重置方法（私有的将与计时器一起使用）。

```
public void SetState()
{
    lock(syncObj)
    {
        state = EState.Waiting;
        stateTimer.Change(1000, Timeout.Infinite);
    }
}

public void ResetState()
{
    lock(syncObj)
    {
        if(state != EState.Waiting)
        {
            state = EState.Off;
        }
    }
}

private void TimerResetState()
{
    lock(syncObj)
    {
        state = EState.Off;
        stateTimer.Change(Timeout.Infinite, Timeout.Infinite);
    }
} 
```

所以现在你的构造函数看起来像这样：

```
public Test()
{
    stateTimer = new Timer(TimerResetState, this, Timeout.Infinite, Timeout.Infinite);
} 
```

事情应该大致按照这些思路进行。

# tinymce - tinyMCE 插入图片并上传

> ID：13569570
> 
> 赞同：2
> 
> 时间：2012-11-26T17:03:16.693
> 
> 标签：tinymce

```
tinyMCE 有一个“插入图像按钮”，它询问 URL。
我想添加浏览按钮，以便用户可以从 pc 上传图像。
我已经编写了服务器端 PHP 文件，这些文件将抓取图像并存储在服务器中。
php 文件将返回服务器上存储图像的 URL，并且微型 MCE 必须获取存储图像的 URL 并将下面的代码插入到编辑文本的源中。

```

 `````
<img src='http://mysite.com/url_that_php_file_returns.jpg'/> 
```` 

`可能吗？`

 `* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-12-03T08:35:28.720

我自己写了一个插件。这并不难。``

# keyboard - 与 Dvorak 一起便携

> ID：13569571
> 
> 赞同：0
> 
> 时间：2012-11-26T17:03:19.560
> 
> 标签：keyboard, wireless, dvorak

我已经使用 Dvorak 几个月了，并且真的很喜欢它。不幸的是，并不是每个人都分享我的爱，我需要在大学时使用 QWERTY，偶尔当我离开办公桌编程时。

我希望能够在任何地方使用 Dvorak，所以我一直在想我想要一个可以随身携带的 Dvorak 键盘。我想知道是否有人对此有任何建议 - 当您想使用非标准布局时，当您离开办公桌时会怎么做？

如果您使用“便携式”德沃夏克键盘，我也想听听。我特别在寻找无线键盘，但不需要使用任何特殊软件或配置。坚固也将是一个福音！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:13:38.047

三年来，我一直在使用自己编辑的德语和瑞典语 Dvorak 键盘布局。

在工作和家里，我都有一台 Windows PC，我可以导入我创建的 Keyboard Creator 文件，不需要切换。不幸的是，对于我的 Apple 设备，我找不到导入它的方法。

如果是为了工作，您应该询问负责人（IT？）他们是否可以安装您的键盘布局。如果你告诉他们这样你的工作效率更高，这应该会很好。

至于偶尔使用键盘，我认为你应该不时使用你的 QWERTY 来保持健康，并在你混淆一些键时克服那个阶段 - 总会有一些情况你可能需要在键盘上键入几个单词QUERTY（朋友的电脑、网吧……），灵活一点是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-21T05:17:13.620

我使用 Dvorak 的 mod 版本，并使用 AHK 脚本（用于`Ahk2Exe.exe`获取 win 二进制文件）将 qwerty 映射到我在 Windows 上的布局。在 linux 上，我使用`xmodmap`.

这是我的脚本和二进制文件：[http](http://whudoc.qiniudn.com/neo.html#install) ://whudoc.qiniudn.com/neo.html#install ，代码托管在 GitHub 上：[https](https://github.com/district10/neo_keyboard_layout/) ://github.com/district10/neo_keyboard_layout/ 。

我使用 Poker II 键盘，它可以配置为同时具有两种布局（硬件）（典型的 QWERTY 和我的 Dvorak 版本）。据我所知，HHKB Minila 键盘也支持多布局。

在浏览器中？ [https://www.branah.com/dvorak](https://www.branah.com/dvorak)

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T17:27:10.667

您也可以尝试继续访问[http://www.theworldofstuff.com/dvorak/dvorak.html](http://www.theworldofstuff.com/dvorak/dvorak.html) 这并不完美，我遇到了各种小问题，但如果您在 Dvorak 中触摸打字，那么它只会识别 QWERTY像德沃夏克一样击键，而无需更改计算机上的布局，而我的工作不会这样做。然后你就可以直接复制粘贴了，这意味着即使你的工作不会安装Dvorak，你仍然永远不需要使用QWERTY。

# java - 如何编组 JAXBElement into org.w3c.dom.Element in Java using JAXB I need to get Element object with request. I have ObjectFactory. I created an JAXBElement, and I need to marshall it to Element. Could anyone help me? <

> ID：13569572
> 
> 赞同：7
> 
> 时间：2012-11-26T17:03:20.073
> 
> 标签：java, jaxb, element

I need to get Element object with request. I have ObjectFactory. I created an JAXBElement, and I need to marshall it to Element. Could anyone help me?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T17:07:15.327

您可以编组到`DOMResult`：

```
DOMResult res = new DOMResult();
marshaller.marshal(myJaxbElement, res);
Element elt = ((Document)res.getNode()).getDocumentElement(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-21T09:52:59.013

除了伊恩的回答，我想首先创建一个文档，因为可以这样省略未经检查的演员表：

```
Document document =
    DocumentBuilderFactory.newInstance().newDocumentBuilder().newDocument();
JAXB.marshal(jaxbElement, new DOMResult(document));
Element element = document.getDocumentElement(); 
```

# c - 在C中将椭圆绘制成矩形

> ID：13569577
> 
> 赞同：2
> 
> 时间：2012-11-26T17:03:28.850
> 
> 标签：c, graphics

下面的 C 代码将绘制一个矩形。我知道如何画椭圆，但我怎样才能在这个矩形中画一个椭圆呢？

```
#include<graphics.h>
#include<conio.h>

main()
{
   int gd = DETECT, gm;

   initgraph(&gd, &gm, "C:\\TC\\BGI");

   rectangle(100,100,200,200);

   getch();
   closegraph();
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:29:51.623

假设您正在使用from`ellipse` [函数](http://www.ousob.com/ng/borcpp/ng78a42.php)`graphics.h`，您可以执行以下操作：

```
 int left = 100;
 int right = 200;
 int top = 100;
 int bottom = 200;

 rectangle(left, top, right, bottom);

 int x = (left + right) / 2;  
 int y = (top + bottom) / 2;  
 int start = 0;
 int end = 360;
 int xrad = (right - left) / 2;
 int yrad = (bottom - top) / 2;

 ellipse(x, y, start, end, xrad, yrad); 
```

# css - 我可以防止 DotNetNuke css 与其他框架发生冲突吗？

> ID：13569578
> 
> 赞同：2
> 
> 时间：2012-11-26T17:03:35.620
> 
> 标签：css, dotnetnuke, responsive-design, zurb-foundation

我最近开始研究 DotNetNuke，因为一位客户要求我这样做。

我立即注意到 DNN 与我熟悉的其他 CMS 不同，它混合了自己的控件和站点的演示文稿。（其他 cms，如 Umbraco、Wordpress、Orchard 有单独的内容管理界面）。

我正在构建一个响应式网站并使用 Zurb 基础。我遇到的问题是 DNN 的 css 开始弄乱 Zurb 的 css。我不想编辑css，问题似乎很严重。它是否在 DNN 中以某种方式解决？

考虑到流行的移动浏览已经成为响应式设计，因此像 Zurb 或 Twitter bootstrap 这样的框架将越来越受欢迎。看起来 DNN 不能很好地配合他们，这可能会成为 DNN 的一大禁忌。

将站点的演示文稿与 cms 控件混合的整个想法在我看来是错误的。是否可以防止它们相互混合和弄乱？

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T05:00:31.263

无论您使用何种 DNN 皮肤，总有一个 Portal.css 文件会被加载。然后每个 DNN 皮肤加载一个与皮肤/主题相关联的 skin.css 文件以及它需要引用的任何其他特定 CSS 文件。

您可能遇到的问题是 Portal.css 中设置的默认样式与您的主题冲突。您可能需要做的是覆盖导致皮肤文件顶部问题的 CSS。

但是，是的，这确实发生了，因为 DNN 声明了用于管理功能的模态弹出窗口、下拉列表、链接等样式，并且由于这与实际站点设计一致，因此如果您使用诸如引导程序等框架，它们可能会发生冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T16:12:41.193

我们专门创建了一个 Foundation DNN 皮肤来解决您正在寻找的问题 - [https://github.com/Ethanhackett/foundation-5-dnn-skin](https://github.com/Ethanhackett/foundation-5-dnn-skin)

它避免了 CSS 冲突，并且有一些 jQuery 无冲突解决方案需要解决，因为 DNN 在 jQuery v1 上......并且 Foundation 正在使用 jQuery 2......

我希望这会有所帮助。

# performance - 无图像网页设计带来的性能提升

> ID：13569582
> 
> 赞同：2
> 
> 时间：2012-11-26T17:03:52.033
> 
> 标签：performance, css

随着浏览器终于​​开始在 CSS3 上达成一致，许多 Web 开发人员正在为他们新的、无图像的 Web 设计兴奋地搓着手。他们很干净。它们是可扩展的。他们很强大。

有了border-radii、box-shadows、font-faces等，现在我们可以将设计师漂亮的设计转化为代码行，而不是用img标签来包装我们的页面。

**两个相关问题：**

*   当样式表变得如此之大以至于它们实际上[负面]影响性能到明显程度时，是否有一点？
*   在具有大量图标（大小在 16 像素到 48 像素之间）的 Web 应用程序中，使用图标字体对性能的提升会有多明显？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:21:54.100

**当样式表变得如此之大以至于它们实际上[负面]影响性能到明显程度时，是否有一点？**

这真的只是常识。如果您的样式表变得非常大，那么这将与拥有大量图像一样产生负面影响。一般来说，一个样式表（有很多 CSS3 和花哨的位）会比下载大量图像更快。

我建议根据下载速度、浏览器支持要求、桌面与移动设备等因素，逐案确定 CSS 或图像是否提供更好的解决方案。

**在具有大量图标（大小在 16 像素到 48 像素之间）的 Web 应用程序中，使用图标字体对性能的提升会有多明显？**

除非您在谈论成百上千的图标，否则性能上确实不会有非常明显的差异。请记住，对于图标字体，您也可能让用户下载一些自定义字体。

同样，这确实是使用最适合当前项目的情况。

我认为您的问题没有明确的答案，但希望我所说的可以为您澄清一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T19:37:04.443

在某些情况下，CSS 文件的大小确实会影响性能。如果CSS特别大，会引起一些问题。但正如其他人提到的，它是文本，所以它可能是非常小的文件。但是，如果该 CSS 被拆分为多个文件，这将成为一个更大的问题。我见过一些有 10-20 个 css 文件的站点，它们都位于一个服务器上。根据浏览器的不同，它一次只能打开 2-6 个（可能是 8 个）到每个服务器的连接。如果你有 10 个 css 文件，再加上另外 10 个 js，再加上 100 个其他资产，那么打开和关闭各种连接将需要相对较长的时间。解决此问题的一种方法是将 CSS 文件连接为开发过程的一部分。我喜欢的一些执行此操作的工具是 Yeoman 或 Codekit。

使用图标字体很好，因为它们是可扩展的并且使用单个文件。当您放大页面时，图标仍然看起来很棒，而您可能使用的 png 看起来很糟糕。图标字体也是一个文件，因此出于与上述相同的原因，它是一个文件而不是 10s-100s。如果您确实需要为某些不是图标的部分使用 PNG 文件，请考虑使用精灵，通常称为 CSS Sprite。这是一种将多个图像组合成一个 png 文件的技术，然后可以在网站上使用一些有创意的 CSS。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:29:46.907

我不认为有一个“点”，性能与尺寸无关，而是与样式规则本身有关。我看到的主要问题与 CSS 渐变（尤其是径向渐变）有关。这是大约一年前，但我记得测试了一些混合渐变的移动设备和（webkit）移动设备，网页的显示明显滞后。删除渐变并添加图像消除了滞后。现在，据我所知，现在大多数设备可能都有更新的 webkit 显示引擎，可以解决这个问题，但我认为这仍然是一个值得考虑的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:36:39.980

CSS 的全部意义在于样式相互层叠。非常大的样式表会让我相信 CSS 没有正确编写，因此不会级联。话虽如此，我想它可能有适当的大型级联样式表，在这种情况下，我建议使用缩小器来消除空白并压缩代码以加快加载时间。

至于图标，您可以创建一个精灵（多个图像的集合），然后使用 CSS 定位仅显示您需要的图标。这样，服务器将只获取一个大图像而不是许多较小的图像。诚然，一个图像比其他图像大，但没有什么比服务器对图像的大量获取请求更能缩短加载时间并降低页面性能了。

# sbt - 合并策略未按预期运行

> ID：13569586
> 
> 赞同：0
> 
> 时间：2012-11-26T17:04:07.287
> 
> 标签：sbt, sbt-assembly

在 build.scala 我有以下内容：

```
mergeStrategy <<= (mergeStrategy in assembly) {(old) => {
  case PathList("javax", "servlet",  "resources", xs @ _*) => MergeStrategy.first
  case x => old(x)
}} 
```

但是，当我跑步时，`assembly`我看到：

```
[info] Merging 'javax/servlet/resources/web-app_2_2.dtd' with strategy 'deduplicate' 
```

表明它使用的是“去重”策略，而不是“第一”策略。这给出了以下错误：

```
[error] {file:/home/dan/tesla/}tesla-appengine/*:assembly: deduplicate: different file contents found in the following:
[error] /home/dan/.ivy2/cache/com.google.appengine/appengine-tools-sdk/jars/appengine-tools-sdk-1.7.3.jar:javax/servlet/resources/web-app_2_2.dtd
[error] /home/dan/.ivy2/cache/javax.servlet/servlet-api/jars/servlet-api-2.5.jar:javax/servlet/resources/web-app_2_2.dtd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:39:53.933

我没有在适当的范围内应用此设置。我需要设置

```
mergeStrategy in assembly <<= ... 
```

# c# - 动作被击中 MVC 后更改 URL？

> ID：13569588
> 
> 赞同：2
> 
> 时间：2012-11-26T17:04:11.097
> 
> 标签：c#, asp.net-mvc, url, url-routing

我想改变：

```
www.testurl.com/sports/blog/1 
```

体育是我的领域，博客是我的行动，1 是博文的 ID，用于：

```
www.testurl.com/sports/blog/test-title-of-blog 
```

博客仍然是我的操作，但未显示 id，而是博客的标题/永久链接。

这是我针对此操作的 AreaRegistration：

```
context.MapRoute(
                "sports",
                "sports/{action}/{content}",
                new { area = "Sports", controller = "Sports", action = "", content = "" }); 
```

这是我目前的行动：

```
[HttpGet]
    public ActionResult Blog(string content)
    {
            int contentId;
            if (Int32.TryParse(content, out contentId))
            {
                model = service.GetBlogById(contentId);
            }
            else
            {
                model = service.GetBlogByTitle(content);
            }

            //Change URL to be: www.testurl.com/sports/blog/ + model.SEOFriendlyTitle
            return View(model);            
    } 
```

用户可以通过博客的 ID 进行搜索，也可以通过标题进行搜索，但我只希望标题出现在 url 栏中，而不是 id。

由于会导致持续维护，我无法通过重定向规则执行此操作。

1.  **控制器是执行此操作的正确位置吗？** -请记住，在我使用 ID 从数据库中检索到头衔之前，我可能没有头衔

2.  **我将如何更改 URL 以显示标题与 ID？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:49:14.243

我认为如果 ID 是数字并且是有效的 contentId ，您应该将 RedirectResult 返回到新的 Url ：

```
 int contentId;
            if (Int32.TryParse(content, out contentId))
            {
                model = service.GetBlogById(contentId);
                if(model != null)
                {
                    return RedirectResult(/*url using the title*/);
                }
            }
            else
            {
                model = service.GetBlogByTitle(content);
            }

            //Change URL to be: www.testurl.com/sports/blog/ + model.SEOFriendlyTitle
            return View(model); 
```

当然，这将导致服务器再次往返，但我可以看到一种无需页面重定向即可更改浏览器 URL 的方法。您还应该确保您网站上所有发布的 url 都使用标题而不是 ID。

我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:17:39.657

我建议快速阅读一下。

[http://www.domincpettifer.co.uk/Blog/34/asp-net-mvc-and-clean-seo-friendly-urls](http://www.dominicpettifer.co.uk/Blog/34/asp-net-mvc-and-clean-seo-friendly-urls)

如果您真的不能在 Url 中拥有 ID 并且不想进行重定向，那么我认为将 Url 作为 Slugs 存储在数据库中是唯一的其他选择。

****如果您要这样做，请注意几点。****

1.  在数据库级别向列添加唯一约束以避免重复。

2.  在此列上创建数据库索引以加快读取速度。

所以有了这个网址

```
www.testurl.com/sports/blog/test-title-of-blog 
```

这是您将查询数据库而不是 ID 的唯一 slug

```
test-title-of-blog 
```

# html - 我有一些 ul li 身高问题

> ID：13569589
> 
> 赞同：1
> 
> 时间：2012-11-26T17:04:13.117
> 
> 标签：html, css

在检查我的元素时，我注意到我在第一个 li 的高度非常低。

选择“城市（2）”后，我试图为整个 li 添加背景。

背景仅填满了纽约市 (2) 的一半。我试过不浮动，但后来我无法让它们排成一行。

我添加了 2 张照片。一个我有浮动，一个没有。

![带浮动](../Images/b285864fcfce51c8ce235b7ad65c949f.png)

![无浮动](../Images/1bbbb1e694e80c88687b7aa9ef5e4c1b.png)

```
<ul class="specs">
        <li>
            <div class="trigger">› City (2)</div>
            <div class="cityByLocation">
                <ul>
                    <li class="cityInfo">
                        <div class="cityName" style="float: left;">
                            › New York
                        </div>
                        <div class="cityDistance" style="float: left;">
                            430 miles
                        </div>
                        <div class="btn-take"></div>
                    </li>
                    <li class="cityInfo">
                        <div class="cityName" style="float: left;">
                            › Chicago
                        </div>
                        <div class="cityDistance" style="float: left;">
                            430 miles
                        </div>
                        <div class="btn-take"></div>
                    </li>
                </ul>
            </div>
        </li>
<ul> 
```

CSS：

```
.cityName{
    float: left;
    width: 45%;
}

.cityDistance {
    float: left;
    width: 20%;
}

.specs {

    padding: 0;
}

.specs li {
    padding: 0;
    padding-top: 10px;

    list-style: none;
}

.specs ul {
    list-style: none;
    padding: 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:29:57.853

正如埃里克所说，你需要清理你的花车。实现这一目标的最简单方法是应用于`overflow: hidden`容器，因此：

```
.cityByLocation {
    overflow: hidden;
} 
```

[http://jsfiddle.net/a3GLG/](http://jsfiddle.net/a3GLG/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:13:33.733

我认为这将解决您的问题。

当浮动元素位于容器框内时会出现问题，该元素不会自动强制容器的高度调整为浮动元素。当一个元素浮动时，其父元素不再包含它，因为浮动已从流中移除。

您可以使用 2 种方法来修复它：

{clear:both} 或 .clearfix

```
.clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

.clearfix {
    display: inline-block;
}

html[xmlns] .clearfix {
    display: block;
}

* html .clearfix {
    height: 1%;
} 
```

[资源](http://www.webtoolkit.info/css-clearfix.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-19T19:31:32.750

您也可以通过设置`overflow: hidden`为`li`元素来修复它。它将清除并自动计算高度。

- 更新 -

谢谢@mickmackusa

[https://jsfiddle.net/e94pzbbn/1/](https://jsfiddle.net/e94pzbbn/1/)

# jquery - Jquery onfocus / onchange 事件

> ID：13569600
> 
> 赞同：0
> 
> 时间：2012-11-26T17:04:33.663
> 
> 标签：jquery, html

我有一个下拉菜单，可以跟踪上一个和当前选定的元素。下拉菜单默认值从 {0} 开始。当用户更改下拉菜单时，new_value 存储为 {2}，但前一个始终为 {0}，除非用户单击下拉菜单然后重新关注新值，然后在这种情况下之前更新为该值{2}。

有没有一种方法可以强制更新焦点，即使用户从不取消下拉框的焦点，基本上是在每个更改事件上？

```
(function () {
var previous;

    $('select[name=item_a]').focus(function () {
        previous = parseInt($(this).val()); }).change(function() {

            var new_value = $(this).attr('id'); 

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:11:37.123

```
var previous, new_value;

$('select[name=item_a]').on({

   focus: function(){
      previous = parseInt($(this).val());
   },

   change: function(){
        new_value = $(this).attr('id');
        $(this).blur();
   }

 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:06:45.753

要触发焦点，您可以调用：

```
$('select[name=item_a]').trigger('focus') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:09:57.870

你可以这样使用

```
$("input").on("focus", function(e) {
your code
});

$("input").on("change", function(e) {
your code
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:18:42.890

这应该在您更改时设置您的值：

```
var previous, current;

$('#select[name=item_a]').change(
    previous = current;
    current = $('#select[name=item_a]').val();
); 
```

我还建议设置选择的 id，这样您就可以这样做，`$('#selectId')`而不是`$('select[name=item_a]')`它会具有更好的性能，并且您的 JQuery 选择器将更易于阅读。

# sql-server - TSQL 优化

> ID：13569601
> 
> 赞同：2
> 
> 时间：2012-11-26T17:04:34.777
> 
> 标签：sql-server, tsql, sql-server-2005, query-optimization

我有以下查询，它需要 2 秒才能执行，因为两个表中有大量行（每行 100 万+），我想知道是否还有什么可以做的进一步优化查询。

**表**

tblInspection.ID bigint（主键）

tblInspection.IsPassedFirstTime 位（非聚集索引）

tblInspectionFailures.ID bigint（主键）

tblInspectionFailures.InspectionID bigint（非聚集索引）

**询问**

```
SELECT TOP 1 tblInspection.ID FROM tblInspection 
                INNER JOIN tblInspectionFailures ON tblInspection.ID = tblInspectionFailures.InspectionID 
                WHERE (tblInspection.IsPassedFirstTime = 1) 
```

**执行计划** ![在此处输入图像描述](../Images/e4090cfa3f9ba63c8003192481aea407.png)

我可以看到我正在对索引进行集群搜索，但仍然需要一些时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:09:16.877

我唯一能想到的是

```
 SELECT  i.ID FROM 
    (select TOP 1 id from tblInspection 
     WHERE IsPassedFirstTime = 1) i
                    INNER JOIN tblInspectionFailures ON 
i.ID = tblInspectionFailures.InspectionID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:07:32.470

尝试

```
SET ROWCOUNT 1

SELECT tblInspection.ID FROM tblInspection 
            INNER JOIN tblInspectionFailures ON tblInspection.ID = tblInspectionFailures.InspectionID 
            WHERE (tblInspection.IsPassedFirstTime = 1) 
```

这基本上做同样的事情，但告诉 sql 在第一个之后停止返回行

# c# - WPF 数据绑定未显示

> ID：13569602
> 
> 赞同：2
> 
> 时间：2012-11-26T17:04:35.213
> 
> 标签：c#, wpf, xaml, data-binding

所以我遇到了一个简单的 XAML 数据绑定错误。我有下面的 XAML，其中有两个类（到目前为止），它们用于 DataBinding，一个 Row，其中包含一个 ObservableCollection 行。这些节点有一堆额外的相关信息，我试图以类似网格的方式显示这些节点（它将用于寻路算法。）

问题是“这里”文本块没有出现。但我知道节点正在正确绑定，因为它们的值显示在 Debugging StackPanel 中。

```
<Window.Resources>
    <local:Row x:Key="TestRow">
        <local:Node x="0" y="0" Cost="20" />
        <local:Node x="0" y="1" Cost="20" />
        <local:Node x="0" y="2" Cost="20" />
    </local:Row>
</Window.Resources>
<Grid Name="MainGrid" Margin="10,10,10,10" >
    <Grid.RowDefinitions>
        <RowDefinition Height="150" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="100" />
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <StackPanel Margin="0,25,0,0" 
                DataContext="{Binding ElementName=AStarListView, 
                                      Path=SelectedItem}" 
                x:Name="Debugging" Orientation="Vertical" >
        <TextBlock Text="{Binding x}" />
        <TextBlock Text="{Binding y}" />
        <TextBlock Text="{Binding Cost}" />
    </StackPanel>
    <ListView Grid.RowSpan="2" Margin="2,2,2,2" Grid.Column="1" 
              x:Name="AStarListView" 
              ItemsSource="{StaticResource TestRow}" >
        <ListView.ItemTemplate>
            <DataTemplate DataType="local:Row">
                <ListView ItemsSource="{Binding nodes}" Width="48" Height="48" >
                    <ListView.ItemTemplate>
                        <DataTemplate DataType="local:Node"> 
                            <TextBlock Text="Here" />
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView> 
```

这是（剥离的）节点类。

```
public class Node : INotifyPropertyChanged
{
    public Tuple<int, int> coordinates { get; set; }

    public int x
    {
        get
        {
            if (this.coordinates == null)
                return -1;
            return this.coordinates.Item1;
        }
        set
        {
            if (this.coordinates != null)
                this.coordinates = new Tuple<int, int>(value, y);
            else
                this.coordinates = new Tuple<int, int>(value, -1);

            OnPropertyChanged("x");
        }
    }
    public int y
    {
        get
        {
            if (this.coordinates == null)
                return -1;
            return this.coordinates.Item2;
        }
        set
        {
            if (this.coordinates != null)
                this.coordinates = new Tuple<int, int>(x, value);
            else
                this.coordinates = new Tuple<int, int>(-1, value);
            OnPropertyChanged("y");
        }
    }

    private Node _parent;

    private int _Cost;
    public int Cost
    {
        get
        {
            return _Cost;
        }
        set
        {
            _Cost = value;
            OnPropertyChanged("Cost");
        }
    }

    protected void OnPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChangedEventArgs args = 
                 new PropertyChangedEventArgs(propertyName);
            this.PropertyChanged(this, args);
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;
} 
```

这是 Row 类：

```
public class Row : ObservableCollection<Node>
{
    public ObservableCollection<Node> nodes { get; set; }

    public Row()
    {
        this.nodes = new ObservableCollection<Node>();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:21:15.433

这是更正后的 XAML，问题中的类定义是正确的，需要用这个 XAML 替换“AStarListView”。

```
<ListView Grid.RowSpan="2" Margin="2,2,2,2" Grid.Column="1" x:Name="AStarListView" 
           ItemsSource="{StaticResource TestRow}" >

     <ListView.ItemTemplate>
         <DataTemplate DataType="local:Node">
             <Grid Background="#dddddd" >
                 <TextBlock Grid.Row="0" Grid.Column="0" Text="{Binding x}"/>
                 <TextBlock Grid.Row="0" Grid.Column="1" Text="{Binding y}"/>
                 <TextBlock Grid.Row="1" Grid.Column="0" Text="{Binding Cost}"/>
                 <Grid.RowDefinitions>
                     <RowDefinition Height="24"/>
                     <RowDefinition Height="24"/>
                 </Grid.RowDefinitions>
                 <Grid.ColumnDefinitions>
                     <ColumnDefinition Width="24"/>
                     <ColumnDefinition Width="24"/>
                 </Grid.ColumnDefinitions>
             </Grid>
         </DataTemplate>
     </ListView.ItemTemplate>
 </ListView> 
```

我的问题是我的 ListViews 嵌套得太深。内部 ListView 绑定到不存在的节点的“节点”属性。

# css - 垂直滚动条导致水平滚动条

> ID：13569610
> 
> 赞同：45
> 
> 时间：2012-11-26T17:04:45.723
> 
> 标签：css, scrollbar, horizontal-scrolling, vertical-scrolling

我的 CSS 看起来像这样：

```
div.SOMECLASS {
  position: absolute;
  max-height: 300px
  height: auto;
  width: auto;
  overflow: auto;
  ...
} 
```

div 高度和宽度自动缩放。高度已经固定了一个最大值：一旦达到这个值，就会出现垂直滚动条。这一切都很好。

现在的问题：
如果出现垂直滚动条，它们会占用大约 10px 的*水平空间*，因为滚动条将放置*在*`div`.
但是，宽度*不会*自动缩放以允许垂直滚动条用完这些额外的 10 像素。由于添加垂直滚动条之前的水平宽度正好适合内容（正如`width:auto`设置所预期的那样），`div`现在**还**显示水平滚动条 - 以允许丢失 10 个像素。这很愚蠢。

*   我怎样才能避免这些水平滚动条，而只是自动缩放宽度`div`以使垂直滚动条适合？

如果可能的话，我正在寻找一个不依赖于完全禁用水平滚动的解决方案，因为这可能在某些时候需要（即某些输入）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2015-04-27T00:28:17.250

刚刚想出了一个相当可行的解决方案（至少对于我这个问题的版本）。

我认为问题`width: auto`在于它的行为类似于`width: 100vw`; 问题是当垂直滚动条出现时，*视口宽度*保持不变（尽管有〜10px的滚动条），但*可视区域*（正如我所说的那样）减少了10px。

**显然，按百分比**定义宽度是根据这个“可视区域”定义的，因此将代码更改为：

```
div.SOMECLASS {
  position: absolute;
  max-height: 300px
  height: auto;
  width: 100%;
  overflow: auto;
  ...
} 
```

应该允许内容正确重新缩放！

ps 您也可以改为添加`overflow-x: hidden`，这将停止出现水平滚动条，而只是在垂直滚动条出现时从 div 的右侧切掉〜10px。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-10T14:10:51.710

我找到了一个可行但远非完美的解决方案：

我在我的 div 中添加了一个`padding-right : 15px`，以自动增长整个 div。现在，如果出现垂直滚动条，它们适合填充，因此水平宽度仍然可以。

遗憾的是，当不需要垂直滚动时，当然也会显示填充，使我的 div 比它必须的宽一点...：/ 好吧，在我看来，这仍然比不需要的水平滚动条更可取。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-18T11:29:40.323

通常设置`100vw`是问题。只需将其删除，您的宽度将是 100%，无论如何这将是您想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-27T16:15:07.703

我的问题在 Google 上的搜索结果排名第一（类似于 OP，但不一样）。

这是看似不必要的水平滚动条的常见场景：

你有一个元素，比如说一个表格，它使用自动调整大小。*如果在添加所有行之前*完成自动调整大小，则它不会为垂直滚动条计算足够的空间。*添加行后*调整大小解决了我的问题——即便如此，我也需要超时

```
this.http.get('someEndPoint').subscribe(rows => {
  this.rowData = rows;
  setTimeout(()=>{sizeColumnsToFit()}, 50);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-26T11:42:40.660

即使没有设置固定宽度，也会出现此错误（特定于 Firefox）。

例如，如果您`overflow: auto;`在灵活的包装器 div ( ) 中有一个可垂直滚动的容器 div ( `display: inline-block;`)，那么当您将窗口大小调整为小于内容可以换行时，首先，您的容器 div 中会出现一个水平滚动条，并且只有之后，灵活的包装器 div 将会增长，或者最终会在您的窗口中出现辅助水平滚动条。

结果是一个无用的水平滚动条，只能滚动垂直滚动条的宽度：

[![显示问题和解决方案的示例代码的屏幕截图](../Images/ec3314b6f806dc7dbb1e53eca7fc2017.png)](https://i.stack.imgur.com/1wSwS.png)

为了摆脱这个问题，您可以使用此示例中的 javascript 代码（在 Firefox 和 Chromium 中测试）：

```
<!DOCTYPE html>
<html>
<body>
    <style type="text/css">
    .page {height: 200px;width: 400px;overflow: auto;background-color: #ccc;border: 5px solid #000;margin: 5px;}
    .wrapper {display: inline-block;min-width: 100%;margin: 20px;}
    .scroller {overflow: auto;max-height: 100px;background-color: #f00;}
    .content {min-height: 500px;min-width: 400px;background-color: #cfc;}
    </style>
    <div class="page">
        <div class="wrapper">
            <div class="scroller">
                <div class="content">
                    The wrapper-div should expand to fit the scroller content.
                    Reduce the browser window width, and a useless horizontal scrollbar appears.
                </div>
            </div>
        </div>
    </div>
    <div class="page">
        <div class="wrapper">
            <div class="scroller ensure-scrollbar-width-padding">
                <div class="content">
                    But with the javascript-function, this is now fixed.
                    There is no horizontal scrollbar in the wrapper-div.
                </div>
            </div>
        </div>
    </div>
    <script>
    var ensureScrollbarWidthPadding = function(elem)
    {
        if(!parseInt(elem.scrollWidth) || !parseInt(elem.clientWidth) || !parseInt(elem.offsetWidth))
        {
            return; // no browser-support for this trick
        }

        var update = function()
        {
            // reset to as if not having any right-padding
            elem.style.paddingRight = '0px';

            // check if horizontal scrollbar appeared only because of the vertical scrollbar
            if(elem.scrollWidth !== elem.clientWidth)
            {
                elem.style.paddingRight = (elem.offsetWidth - elem.clientWidth) + 'px';
            }
            else
            {
                elem.style.paddingRight = '0px';
            }
        };

        window.addEventListener('resize', update, false);
        window.addEventListener('load', update, false);

        update();

        return update;
    };

    (function()
    {
        var elems = document.getElementsByClassName('ensure-scrollbar-width-padding');
        for(var i=0;i<elems.length;++i)
        {
            ensureScrollbarWidthPadding(elems[i]);
        }
    })();
    </script>
</body>
</html> 
```

javascript 函数 ensureScrollbarWidthPadding 动态添加一个`padding-right`到可垂直滚动的容器，以确保永远不会出现水平滚动条。

# vbscript - 无法与我的 For VBscipt 一起使用 While 循环

> ID：13569614
> 
> 赞同：0
> 
> 时间：2012-11-26T17:04:49.593
> 
> 标签：vbscript

嗨，我在 vbscript 中使用简单的 while 循环时遇到问题。

我有一个函数，它根据“;”分割一串电子邮件地址 然后它通过另一个函数 (isValidEmail) 运行每个电子邮件地址，该函数使用布尔返回进行一些简单的验证检查。

如果任何“isValidEmail”函数返回假，我希望这个“EmailSplitFunc”返回假并退出，否则我希望整个事情返回真。

我有拆分功能，但我正在努力获得一个有效的 While 循环。有任何想法吗？

```
Function EmailSplitFunc(emailaddress)
    Dim EmailSplitArray, i,
    EmailSplitArray = split(EmailStudentCheck,";")
    While isValidEmail(EmailStudentCheck)
    For i = 0 To Ubound(EmailSplitArray)
    EmailStudentCheck = EmailSplitArray(i)
    isValidEmail(EmailStudentCheck)
    Next
    Wend
End function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:14:49.910

我认为你只需要一个循环..

```
For i = 0 to Ubound(EmailSplitArray)
    If isValidEmail(EmailSplitArray[i]) = False Then
        // Return False 
    End If 
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:33:27.430

从测试（待编写的）checkMList() 函数的顶级代码开始：

```
Option Explicit

Dim aTests : aTests = Array( _
    "a@b.com;nix" _
  , "a@b.com;c@d.com" _
)
Dim sMList
For Each sMList in aTests
    Dim bOk : bOk = checkMList(sMList)
    WScript.Echo CStr(bOk), sMList
Next 
```

并添加一个假 checkM() 函数：

```
Function checkM(sM)
  checkM = 0 <> InStr(sM, "@")
End Function 
```

然后考虑 checkMList()：它必须拆分 sMList 并检查每个部分是否为有效电子邮件；找到第一个失败，函数应该返回False，只有所有部分都通过检查，才应该返回True。这转化为：

```
Function checkMList(sMList)
  Dim sM
  For Each sM In Split(sMList, ";")
      Dim bOk : bOk = checkM(sM)
      WScript.Echo "*", CStr(bOk), sM
      If Not bOk Then
         checkMList = False ' first failure
         Exit Function
      End If
  Next
  checkMList = True ' reached if all ok
End Function 
```

输出：

```
* True a@b.com
* False nix
False a@b.com;nix
* True a@b.com
* True c@d.com
True a@b.com;c@d.com 
```

# android - TimeZone.getRawOffset() 在 Android 4.2 中似乎不起作用

> ID：13569618
> 
> 赞同：2
> 
> 时间：2012-11-26T17:04:58.663
> 
> 标签：android, timezone

```
TimeZone tz = TimeZone.getTimeZone(TimeZoneString);
timeZoneOffsetms = tz.getRawOffset(); 
```

TimeZoneString 的值采用“GMT+02:00:00”格式

之前的代码从 2.2 到 4.1 都没有问题。

现在使用 4.2，无论时区在 UTC 之前还是之后，它总是返回一个等于 0 的偏移量。

任何想法或任何其他人都看到了这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:09:10.117

检查源代码后`TimeZone`，4.2 发生了重大变化。班级开始强制执行只需要几小时和几分钟的正则表达式。提供秒数会导致正则表达式模式匹配器失败，然后返回 null。

我这边的解决方案是检查我的服务器的值几秒钟，如果指定了就删除。由于我没有任何控制从服务器返回的值是。

如果其他人遇到这个问题，我希望这会有所帮助。

# excel - 为什么 VBA 有时会重新调整下一个变量 (x1Whole) 而有时不会

> ID：13569619
> 
> 赞同：0
> 
> 时间：2012-11-26T17:04:59.457
> 
> 标签：excel, vba

我在 VBA for excel 中有下一个代码的第一个版本

```
Function findCell(celda As String, rnc As String) As String

    Dim cell As Range
    Dim pos As String

    Range("A2").Select

    Set cell = Cells.Find(What:=celda, After:=ActiveCell, LookIn:= _
        xlFormulas, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:= _
        xlNext, MatchCase:=False, SearchFormat:=False)

    If cell Is Nothing Then
        pos = 0
    Else
        pos = cell.row
    End If

    findCell = pos

End Function 
```

该函数接收一个字符串并返回列数中的位置，但是在我更改参数之后，因为我必须找到单元格的完整包含。我将值 lookAt 从**x1Part**更改为**x1Whole**

```
 Set cell = Cells.Find(What:=celda, After:=ActiveCell, LookIn:= _
        xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:= _
        xlNext, MatchCase:=False, SearchFormat:=False) 
```

当我尝试运行宏有时不起作用并向我显示该值**x1Whole**，但是当我从编辑器运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:50:01.647

如果您在公式中寻找一个字符串作为 xlPart，您总是从您的函数本身获取字符串（一个好主意，顺便说一句）。xlWhole 会有一个问题：可能存在不匹配的情况（如果公式是工作表中唯一的内容，那就是这种情况）。`Find`如果没有找到任何内容，将给出错误，并且公式结果将为#N/A。下面是带有错误处理的代码，结果为 0 表示不匹配。

```
Function findCell(celda As String, rnc As String) As String

    Dim cell As Range
    Dim pos As String

On Error GoTo Nomatch

    Set cell = Cells.Find(What:=celda, After:=Range("A2"), LookIn:= _
        xlFormulas, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:= _
        xlNext, MatchCase:=False, SearchFormat:=False)

Nomatch:

    If cell Is Nothing Then
        pos = 0
    Else
        pos = cell.Row
    End If

    findCell = pos

End Function 
```

另外，我删除了`Select("A2")`，并将其移至`After:=Range("A2")`.

# timer - 带中断的 Uboot 定时器

> ID：13569626
> 
> 赞同：3
> 
> 时间：2012-11-26T17:05:31.247
> 
> 标签：timer, u-boot

我想用闪烁的 LED 来显示 Uboot 的进度。为此，我需要延迟，它不会使用 while 循环（非阻塞），而是使用中断。

Uboot 里面有没有定时器的实现？我看了一点，但我没有发现非阻塞延迟。如果从头开始，我需要实施吗？

我将 at91SAM9 与 Uboot 2010.06 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T18:37:17.863

我将 U-Boot 用于 ARM 处理器，我还没有看到任何中断实现。轮询可以完成我熟悉的所有外围设备的工作。定时器已实现，我喜欢他们的 udelay_masked() 的简单性。

我没有使用它，但看起来你可以使用 CONFIG_SHOW_BOOT_PROGRESS。自述文件建议您添加 show_boot_progress(int) 以使 LED 闪烁。每次闪烁都会使用阻塞延迟。也许您对要显示的检查点使用不同的颜色和/或闪烁模式已通过。

# macos - 需要一个shell脚本来记录来自蓝牙的数据流（+可视化？）

> ID：13569628
> 
> 赞同：1
> 
> 时间：2012-11-26T17:05:43.137
> 
> 标签：macos, shell, logging, bluetooth

假设，我有一些设备`/dev/btooth`或类似设备，它输出一个由四个字节组成的流，这些字节由某个特定的标记分隔（假设它是一个序列 0,255,13），速度为每秒 10 个四倍。我需要将此流记录到行文件中。我不想做的是经常记录对文件的写入（我担心我的 SSD 无法生存）。所以，流是这样的：

```
25,64,0,255,13,10,3,0,15,0,255,13,53,65,254,252,0,255,13,... 
```

该文件应该看起来像

```
10,0,0,15
53,65,254,252 
```

* * *

绘制实时图会更好，尽管我不确定它是否可以在 shell 中。可能还有其他一些解决方案（Mac OS X 上的日志记录+可视化？）

# php - 自定义 Doctrine DQL 函数

> ID：13569634
> 
> 赞同：2
> 
> 时间：2012-11-26T17:06:13.170
> 
> 标签：php, symfony, doctrine, dql

我是 Symfony 的新手，所以也许我的问题很愚蠢，但它是：

我正在尝试定义一个自定义学说 DQL 函数，但我无法让它工作。

PHP

```
namespace MsfBundle\AST\Functions;

use Doctrine\ORM\Query\Lexer;

class Geo extends \Doctrine\ORM\Query\AST\Functions\FunctionNode
{
    /**
     * @var \Doctrine\ORM\Query\AST\ComparisonExpression
     */
    private $latitude;
    /**
     * @var \Doctrine\ORM\Query\AST\ComparisonExpression
     */    
    private $longitude;

    /**
     * Parse DQL Function
     * 
     * @param \Doctrine\ORM\Query\Parser $parser 
     */
    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->latitude = $parser->ComparisonExpression();
        $parser->match(Lexer::T_COMMA);
        $this->longitude = $parser->ComparisonExpression();
        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    /**
     * Get SQL 
     * 
     * @param \Doctrine\ORM\Query\SqlWalker $sqlWalker
     * @return string
     */
    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {

    return sprintf('(6366*acos(cos(radians(%s))*cos(radians(`%s`))*cos(radians(`%s`) -radians(%s))+sin(radians(%s))*sin(radians(`%s`))))',
    $this->latitude->leftExpression->dispatch($sqlWalker),
    $this->latitude->rightExpression->dispatch($sqlWalker),
    $this->longitude->rightExpression->dispatch($sqlWalker), 
    $this->longitude->leftExpression->dispatch($sqlWalker),
    $this->latitude->leftExpression->dispatch($sqlWalker),
    $this->latitude->rightExpression->dispatch($sqlWalker));
    }
} 
```

配置.yml

```
doctrine:
#...
orm:
    auto_generate_proxy_classes: "%kernel.debug%"
    entity_managers:
        default:
            auto_mapping: true
            dql:
                numeric_functions:
                    geo :MsfBundle\AST\Functions\Geo 
```

这就是我得到的：

> 致命错误：在第 3070 行的 /var/www/mcr/vendor/doctrine/orm/lib/Doctrine/ORM/Query/Parser.php 中找不到类 'MsfBundle\AST\Functions\Geo'

如果您有任何线索可以帮助我解决这个问题，我将不胜感激。

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:29:28.113

您在 geo :MsfBundle\AST\Functions\Geo 中缺少反斜杠，应该是 geo :\MsfBundle\AST\Functions\Geo。似乎该类需要绝对引用。

# mysql - MySql SELECT WHERE 日期大于过去 10 周（从上一个星期日开始）

> ID：13569637
> 
> 赞同：2
> 
> 时间：2012-11-26T17:06:30.480
> 
> 标签：mysql, date, dayofweek, weekday

我遇到的问题是在运行此查询时，它从当前日期开始一周间隔（从当前日期减去 7 天）。我想做所有前 10 周（周日至周一）。因此，如果我当前的日期是星期一、星期二或星期三，我希望它从最近的星期日开始，然后回顾过去的 10 周。我相信我必须使用`WEEKDAY`或`DAYOFWEEK`在`DATE_SUB`但尝试过但无济于事：

```
SELECT
    SUM(MT.QUANTITY) as qty,
    WEEKDAY(MT.TRANS_DATE) AS WEEKDAY,
    WEEK(MT.TRANS_DATE) AS WEEK,
    YEAR(MT.TRANS_DATE) AS YEAR
FROM
    mytable MT
WHERE
        MT.TRANS_DATE > DATE_SUB(CURDATE(), INTERVAL 10 WEEK)
GROUP BY WEEK 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:11:33.260

尝试使用`DATE_SUB(STR_TO_DATE(CONCAT(YEAR(CURDATE()),WEEK(CURDATE()),' Sunday'), '%X%V %W'),INTERVAL 10 WEEK)`，如下所示：

```
SELECT
    SUM(MT.QUANTITY) as qty,
    WEEKDAY(MT.TRANS_DATE) AS WEEKDAY,
    WEEK(MT.TRANS_DATE) AS WEEK,
    YEAR(MT.TRANS_DATE) AS YEAR
FROM
    mytable MT
WHERE
        MT.TRANS_DATE > DATE_SUB(STR_TO_DATE(CONCAT(YEAR(CURDATE()),WEEK(CURDATE()),' Sunday'), '%X%V %W'),INTERVAL 10 WEEK)
GROUP BY WEEK 
```

您也可以使用 pilcrow 建议的其他方式：

```
SUBDATE(CURDATE(), DAYOFWEEK(CURDATE()) - 1) 
```

哪个更具可读性...

# iphone - 解析json嵌套对象和数组的组合

> ID：13569639
> 
> 赞同：2
> 
> 时间：2012-11-26T17:06:43.927
> 
> 标签：iphone, objective-c, ios

```
[
    {
        "Profile": {
            "id": "13",
            "user_id": "13",
            "first_name": "samm",
            "profile_image": "13-IMG_169.png",
            "where_from": "abro",
            "where_live": "simba",
            "age": "24",
            "profile_type": null,
            "company_name": "nick",
            "job_title": "developer",
            "industry": "software",
            "education": "bscs",
            "what_you_do": "developement",
            "detail_summery": "summary",
            "location": null,
            "state_id": "1",
            "city_id": "84",
            "favorite_music_bands": "",
            "favorite_teams": "",
            "favorite_books": "",
            "favorite_movies": null,
            "small_intro": "developer"
        }
    }
],
{
    "LookingData": [
        {
            "user_looking_id": "675",
            "looking_id": "1",
            "looking_text": "Expand Professional network"
        },
        {
            "user_looking_id": "456",
            "looking_id": "2",
            "looking_text": "Prospect new business / sales"
        },
        {
            "user_looking_id": "453",
            "looking_id": "3",
            "looking_text": "Share trade expertise / stories"
        },
        {
            "user_looking_id": "123",
            "looking_id": "5",
            "looking_text": "Recruitment"
        },
        {
            "user_looking_id": "654",
            "looking_id": "6",
            "looking_text": "Seeking business partner"
        },
        {
            "user_looking_id": "123",
            "looking_id": "7",
            "looking_text": "Advise"
        }
    ]
},
{
    "MusicData": [
        {
            "user_music_id": "54",
            "music_id": "2",
            "music_name": "Country"
        }
    ]
},
{
    "SportData": [
        {
            "user_sport_id": "234",
            "sport_id": "4",
            "sport_name": "Hockey"
        }
    ]
},
{
    "HobbyData": []
},
[],
{
    "MovieData": [
        {
            "user_movie_id": "645",
            "movie_id": "6",
            "movie_name": "Drama"
        }
    ]
},
[],
{
    "CarrerData": [
        {
            "user_carrer_id": "34",
            "carrer_id": "2",
            "carrer_name": "Marketing"
        },
        {
            "user_carrer_id": "645",
            "carrer_id": "8",
            "carrer_name": "Sales"
        }
    ]
}
] 
```

使用此行获取 json 数组...

```
NSDictionary *responseDict = [NSJSONSerialization JSONObjectWithData:data //1
                                                                     options:0
                                                                       error:&error]; 
```

并使用 for 循环获取配置文件数据...

```
for (NSDictionary *obj in [responseDict valueForKey:@"Profile"])
{
model.userProfileObj.userFirstName = [NSString stringWithFormat:@"%@",[obj valueForKey:@"first_name"]];
} 
```

但在这种情况下，循环运行很多时间并将空值分配给变量。

在此之后我想解析“LookingData”数组，但我使用这段代码得到了空值：

```
NSDictionary *dictUserLooking=[responseDict valueForKey:@"LookingData"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:26:44.713

您拥有的（假设缺少 outer `[]`）是一个 JSON 数组，其中包含数组或“对象”（字典）的元素。“配置文件”数据包含在最外层数组的第一个元素中，以这种方式：

最外层数组 -> 单元素数组 -> 单元素字典 -> “配置文件”的字典元素 -> 包含“配置文件”值的字典。

您需要“剥洋葱”，一次一层，才能访问这些值。

# mysql - 如何在不重复的情况下将表中的记录插入到另一个表中

> ID：13569642
> 
> 赞同：2
> 
> 时间：2012-11-26T17:06:45.770
> 
> 标签：mysql

我有两个表 t1 和 t2。t1 具有重复值。我需要将所有记录从 t1 插入到 t2，但我不希望在 t2 中出现重复。我尝试了以下命令，在我看来它是正确的，并且在我运行它时没有语法错误，但问题是它的效果为 0。t2 中没有插入来自 t1 的记录。

```
insert into test.t2 (name2) 
select name1 from test.t1 where NOT EXISTS (select name2 from test.t2); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:14:18.867

```
insert into test.t2(name2) 
select distinct name1 from test.t1 where name1 NOT IN(select name2 from test.t2); 
```

或者

```
insert into test.t2(name2) 
select distinct name1 from test.t1 t1 where NOT EXISTS(select name2 from test.t2 t2 where t1.name1=t2.name2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:40:47.277

您可以创建一个唯一索引（一列或多列），然后使用 MySQL 替换命令。

```
CREATE UNIQUE INDEX unique_name2 ON t2 (name2);

REPLACE INTO t2 (name2) values ($name1);
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:15:58.240

您在这里有两种选择，一种是不复制插入上的数据，第二种是在插入时忽略重复项。

要从`SELECT`通话中删除重复数据，您可以使用 `DISTINCT:

```
INSERT INTO test.t2 (name2) SELECT name1 FROM test.t1 WHERE name1 NOT IN (SELECT name2 FROM test.t2) 
```

您还可以`UNIQUE`首先添加索引来避免此问题：

```
ALTER TABLE t2 ADD UNIQUE INDEX index_name2 (name2) 
```

请注意，如果 中已经存在重复数据，您将收到错误消息`t2`，因此您可能需要事先对其进行清理。

然后您可以使用以下`IGNORE`选项添加数据：

```
INSERT IGNORE INTO test.t2 (name2) SELECT name1 FROM TEST.t1 
```

唯一索引方法将保证唯一性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T07:27:58.233

我需要将数据从用户插入到另一个用户，并且在编写此语句时......

```
insert into trep12.jobhead
select
*
from
wsfin04.jobhead
where
wsfin04.jobhead.job_no not in (select job_no from trep12.jobhead)
and wsfin04.jobhead.CHASS_NO not in (select CHASS_NO from trep12.jobhead)
and rdate between '01-jul-15'
and '01-oct-15'
and job_type = 1; 
```

..... 结果是创建了 0 行。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T17:18:07.200

这应该这样做：
`INSERT IGNORE INTO test.t2 SELECT name2 FROM test.t1`
从一个表中选择并插入到另一个表中。

# java - 如何检查通用列表是否与 jUnit 相等？

> ID：13569643
> 
> 赞同：1
> 
> 时间：2012-11-26T17:06:48.983
> 
> 标签：java, list, junit4

我想在测试中比较两个列表。我有这个代码

```
@Test
public void testGetVerticalCells() 
{
    int[][] m = new int[][] 
            {
                { 1, 0, 1 }, 
                { 1, 1, 0 }, 
                { 0, 1, 1 } 
            };
    int i = 1;
    int j = 2;
    Point sPoint = new Point(i, j);
    potentialAlgorithm.startPoint = sPoint;
    List<Point> actuals = potentialAlgorithm.getVerticalCells(m, i, j);
    List<Point> expecteds = new ArrayList<Point>() {
        {
            add(new Point(0, 2));
            add(new Point(2, 2));
        }
    };
    assertTrue(actuals.containsAll(expecteds));
} 
```

我使用 jUnit 4.11。

我检索此错误

```
java.lang.AssertionError
    at org.junit.Assert.fail(Assert.java:86)
    at org.junit.Assert.assertTrue(Assert.java:41)
    at org.junit.Assert.assertTrue(Assert.java:52)
    at org.vdzundza.transportation_problem.PotentialAlgorithmTest.testGetVerticalCells(PotentialAlgorithmTest.java:209)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

**更新**

```
public boolean equals(Point b) {
    if(this.i == b.i && this.j == b.j) return true;
    else return false;
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:01:49.763

灵魂比想象的要简单：

```
assertTrue(actuals.equals(expected)); 
```

# java - 用于 Java 的 Creole 1.0 到 HTML5 渲染器

> ID：13569645
> 
> 赞同：2
> 
> 时间：2012-11-26T17:06:51.450
> 
> 标签：java, html, xwiki, creole

我想建立一个 CMS/Wiki，我想用 HTML5 来做。

不幸的是，我一直在寻找可以将[Creole 1.0](http://www.wikicreole.org/wiki/Home)语法作为输入并将其呈现为 HTML5 的 Wiki 渲染引擎，有人可以为此目的指向我的库吗？

我的第二个选择是为[XWiki](http://rendering.xwiki.org/)编写一个渲染器来支持 HTML5。关于如何开发这样的东西的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T09:16:35.220

XWiki[渲染引擎](http://rendering.xwiki.org/)已经支持 Creole 1.0 作为输入语法，并且输出符合他们[推荐的 HTML 输出](http://www.wikicreole.org/wiki/Creole1.0)，包括用于逐字文本的`<pre>`和`<tt>`标记（一个用于块，一个用于内联）。`tt`除了已删除的标记外，大部分 HTML 也将是有效的 HTML5 。

`tt`被认为是一个纯粹的风格标签，以及语义上更有意义的标签，如`kbd`, `samp`,`code`并且`var`已经存在很长时间了。问题是可用的替代方案*太多*，因此很难仅选择一个标签来正确（从语义 POV）表示所有`tt`正在使用的东西。我们应该在克里奥尔语中添加 4 种不同的逐字语法吗？还是我们应该在`code`任何地方都使用并忽略它的语义，让它成为新的`tt`？或者可能`pre`同时用于内联和块内容，并更改 CSS 使其不总是块元素？

无论如何，为了实现一个新的`html/5.0`语法渲染器，您可能必须复制[xhtml](https://github.com/xwiki/xwiki-rendering/tree/xwiki-rendering-4.3/xwiki-rendering-syntaxes/xwiki-rendering-syntax-xhtml)模块，更改大多数类以仅继承它们的`xhtml/1.0`等价物，除了`XHTMLChainingRenderer`您应该更改方式[`beginFormat`和`endFormat`行为](https://github.com/xwiki/xwiki-rendering/blob/xwiki-rendering-4.3/xwiki-rendering-syntaxes/xwiki-rendering-syntax-xhtml/src/main/java/org/xwiki/rendering/internal/renderer/xhtml/XHTMLChainingRenderer.java#L134)的地方。您还应该创建一个 HTML5 解析器，因此还应该扩展[`XHTMLParser`该类](https://github.com/xwiki/xwiki-rendering/blob/xwiki-rendering-4.3/xwiki-rendering-syntaxes/xwiki-rendering-syntax-xhtml/src/main/java/org/xwiki/rendering/internal/parser/xhtml/XHTMLParser.java)并为标签[添加另一个处理程序](https://github.com/xwiki/xwiki-rendering/blob/xwiki-rendering-4.3/xwiki-rendering-syntaxes/xwiki-rendering-syntax-xhtml/src/main/java/org/xwiki/rendering/internal/parser/xhtml/XHTMLParser.java#L130)`code`（我们可能应该默认这样做，因为它是我们当前忽略的有效 XHTML 标签）。

# javascript - 正则表达式匹配问题

> ID：13569646
> 
> 赞同：2
> 
> 时间：2012-11-26T17:06:55.990
> 
> 标签：javascript, regex

我想验证格式为“AB1234”的输入，其中前两个字符必须是 Alpha (AZ)，其余字符必须是数字。
我当前的正则表达式正在验证不正确的输入“AB123A”。我当前的正则表达式缺少什么？

```
^[a-zA-Z]{2}\d{1,6} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:08:07.110

您缺少`$`指定字符串结尾的

```
^[a-zA-Z]{2}\d{1,6}$ 
```

* * *

`^[a-zA-Z]{2}\d{1,6}`没有`$`匹配项`AB123A`，因为您没有`end`为该字符串指定任何内容..

它匹配`AB123`内`AB123A`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:08:21.243

你最后缺少一个 $ ：

```
^[a-zA-Z]{2}\d{1,6}$ 
```

$ 指定正在测试的字符串的结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:09:56.030

在正则表达式的末尾添加 $ 美元：

```
^[a-zA-Z]{2}\d{1,6}$ 
```

否则匹配“AB123A”的“AB123”部分。

# php - 基于另一个字段值的 PDO php 回显字段

> ID：13569647
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:06:55.003
> 
> 标签：php, select, pdo

如何根据另一个字段的值回显一个字段？我希望我的脚本能以某种方式告诉你我想要什么。

```
$sth = $conn->prepare("SELECT * FROM table WHERE item = '$item'");
$sth->execute();
$row = $sth->fetch(PDO::FETCH_ASSOC);

echo ($row['amount'] WHERE $row['currency'] = 'USD'); 
```

![您可以在此处查看货币如何显示为数据字段](../Images/00c197163cc6e9ed235dd502564334cf.png)

这是我根据您的想法创建的脚本。但是对我来说，它必须如此愚蠢仍然没有意义。带有 $pdf 的底部脚本可以忽略。

```
foreach($conn->query("SELECT amount FROM stockpricetable WHERE itemrelation = '$row[itemnumber]'") as $row2) {
    if ($row2['exchange'] == '') { $DKK = $row2['amount'];}
    if ($row2['exchange'] == 'CHF') { $CHF = $row2['amount'];}
    if ($row2['exchange'] == 'EUR') { $EUR = $row2['amount'];}
    if ($row2['exchange'] == 'GBP') { $GBP = $row2['amount'];}
    if ($row2['exchange'] == 'SEK') { $SEK = $row2['amount'];}
    if ($row2['exchange'] == 'USD') { $USD = $row2['amount'];}
}
    $pdf->Text(26, 4, 'DKK'.$DKK);
    $pdf->Text(26, 8, 'EUR'.$EUR);
    $pdf->Text(26, 12, 'GBP'.$GBP);
    $pdf->Text(46, 4, 'SEK'.$SEK);
    $pdf->Text(46, 8, 'CHF'.$CHF);
    $pdf->Text(46, 12, 'USD'.$USD); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:08:46.080

那是遍历整个结果的问题吗？

```
while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
   if ($row["currency"] == "USD") echo $row["amount"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:13:30.787

尝试：

```
while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {
 if (strstr($row["amount"], 'USD) !== FALSE) 
   echo $row["amount"];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:09:35.870

它应该只是以下情况：

```
$sth = $conn->prepare("SELECT * FROM table WHERE item = '$item'");
$sth->execute();
while ($row = $sth->fetch(PDO::FETCH_ASSOC)) {

if ($row['currency'] == 'USD') {
    echo $row['amount'];
} 
```

虽然，这是假设 if 语句上面的代码正确地获取数据库结果，但我不能说很惭愧，我仍然使用不推荐使用的`mysql_*`函数。

# javascript - 如何创建 Javascript 连接；几个文本字段来分隔文本区域？

> ID：13569650
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:07:07.690
> 
> 标签：javascript, concatenation

我正在尝试将 5 个文本字段连接成 2 种不同的格式，并将每种特定格式输出到同一表单/页面中的 2 个单独的文本区域。

附加的代码可以很好地输出到 TextArea1，但不会输出到我的第二个 TextArea2。

所以 C+A、B+D、E 来填充 TextArea1。和 C+D、A、B+E 填充 TextArea2。

任何帮助/建议将不胜感激。谢谢你。

```
 <html>
    <script type="text/javascript">
    function setName()
    {document.forms[0].TextArea1.value = document.forms[0].TextC.value + ' ' + document.forms[0].TextA.value + ', ' + document.forms[0].TextB.value + ' ' + document.forms[0].TextD.value + ', ' + document.forms[0].TextE.value}
    </script>

    <script type="text/javascript">
    function setName()
    {document.forms[0].TextArea2.value = document.forms[0].TextC.value + ' ' + document.forms[0].TextD.value + ', ' + document.forms[0].TextA.value + ', ' + document.forms[0].TextB.value + ' ' + document.forms[0].TextE.value}
    </script>

    <head>
    </head>
    <body>
    <form method="post">
    <table >

<tr>
  <td style="width: 421px">
  <input name="TextA" onkeyup="setName()" type="text" />&nbsp; </td>
</tr>

<tr>
  <td style="width: 421px">
  <input name="TextB" onkeyup="setName()" type="text" /> </td>
</tr>

<tr>
  <td style="width: 421px">
  <input name="TextC" onkeyup="setName()" type="text" /> </td>
</tr>

<tr>
  <td style="width: 421px">
  <input name="TextD" onkeyup="setName()" type="text" /> </td>
</tr>

<tr>
  <td style="width: 421px">
  <input name="TextE" onkeyup="setName()" type="text" /> </td>
</tr>

<tr>
  <td style="width: 421px"><strong>C+A, B+D, E</strong><br />
  Created this outcome:<br />
  <input name="TextArea1" onfocus="setName()" style="width: 286px; height: 90px" type="text" wrap="hard" />
  <br />
  </td>
</tr>

<tr>
  <td style="width: 421px"><strong>C+D, A, B+E</strong><br />
  Created this outcome:<br />
  <input name="TextArea2" onfocus="setName()" style="width: 286px; height: 90px" type="text" wrap="hard" /></td>
</tr>

<tr>
  <td style="width: 421px"><strong>Clear Form</strong><br />
  <input name="Reset2" type="reset" value="reset" />&nbsp; </td>
</tr>
      </table>
    </form>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:09:45.003

你有两个同名的函数；第二个覆盖第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:12:23.610

您对这两个函数使用相同的函数名称。第二个覆盖第一个。将其更改为`setNameTwo()`或类似的东西，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:11:28.120

您有`setName()`两次定义的功能。第一个被调用，但不是第二个。将第二个`setName`代码和已经存在的代码一起放入第一个代码，它就会工作。

```
<script type="text/javascript">
function setName()
{
    document.forms[0].TextArea1.value = document.forms[0].TextC.value + ' ' + document.forms[0].TextA.value + ', ' + document.forms[0].TextB.value + ' ' + document.forms[0].TextD.value + ', ' + document.forms[0].TextE.value;
    document.forms[0].TextArea2.value = document.forms[0].TextC.value + ' ' + document.forms[0].TextD.value + ', ' + document.forms[0].TextA.value + ', ' + document.forms[0].TextB.value + ' ' + document.forms[0].TextE.value
}
</script> 
```

# alloy - 合金：字段的含义

> ID：13569656
> 
> 赞同：0
> 
> 时间：2012-11-26T17:07:44.617
> 
> 标签：alloy

我看到了以下合金定义：

一个信号数 { i:Int[3]}

//Int[3] 是什么意思。我的意思是上述字段'i'的含义是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:52:52.727

这意味着`i`是单`Number`例集和`Int`与 atom的单例子集之间的关系`3`。在对象表示法中，它就像`Number.i = 3`

# mysql - EXISTS IN 查询如何？

> ID：13569658
> 
> 赞同：1
> 
> 时间：2012-11-26T17:07:54.730
> 
> 标签：mysql

有人可以帮我吗，我有 2 张桌子

财务账户货币映射和自有账户。

我想选择字段 legalEntity_id 的金融账户货币映射。

这是我到目前为止所拥有的。

```
SELECT 
FROM financeaccountcurrencymapping 
WHERE ownedAccount_id EXISTS IN (
                SELECT id 
                FROM ownedaccount 
                WHERE legalEntity_id = ??); 
```

表中的字段是：

'财务账户货币映射'

*   ID
*   货币货币
*   accountForCash_id
*   拥有的Account_id

'自有帐户'

*   ID
*   姓名
*   legalEntity_id
*   资产或负债
*   资产类型
*   存款类型
*   责任类型
*   多种货币
*   货币
*   描述

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:11:54.033

在这种情况下，您不会使用 EXISTS。单独的 IN 就可以了。

```
SELECT 
FROM financeaccountcurrencymapping 
WHERE ownedAccount_id IN (SELECT id FROM ownedaccount WHERE legalEntity_id = ??); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:14:04.463

You're original query is really close. You just need to remove the `EXISTS`, like so:

```
SELECT *
FROM financeaccountcurrencymapping 
WHERE ownedAccount_id IN (
                SELECT id 
                FROM ownedaccount 
                WHERE legalEntity_id = ??); 
```

Alternatively, you could write this query with a `JOIN` for the same effective result.

```
SELECT f.*
FROM financeaccountcurrencymapping AS f 
INNER JOIN ownedaccount AS o ON (f.id = o.ownedAccount_id) 
WHERE o.legalEntity_id = ??; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:24:36.613

如果您真的想使用 EXISTS 或想查看如何使用它的示例，我认为以下内容会起作用。就个人而言，我可能会使用 IN 代替。

```
SELECT 
FROM financeaccountcurrencymapping as f
WHERE EXISTS (SELECT id 
              FROM ownedaccount 
              WHERE f.ownedAccount_id = id AND legalEntity_id = ??); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:13:11.657

```
SELECT legalEntity_id
FROM financeaccountcurrencymapping 
WHERE ownedAccount_id IN (
                SELECT id 
                FROM ownedaccount 
                WHERE legalEntity_id = ??); 
```

# c# - WPF 浏览器应用程序的持久数据集？

> ID：13569659
> 
> 赞同：0
> 
> 时间：2012-11-26T17:07:56.533
> 
> 标签：c#, wpf, dataset, webbrowser-control

我正在寻找在我的 WPF c# .NET 4.0 Web 应用程序中实现此数据结构的最佳方法。

**应用程序详细信息：**此应用程序一次将有许多用户。我正在使用一个有 2 个表链接在一起的数据库，它们的行数都小于 10k，但它们会随着时间的推移而增长。需要定期检查一张表是否有更新。

**问题：** 我创建了一个数据集来保存所有信息。我的单元测试显示从数据库中填充数据集大约需要 0.2 秒。如果数据集将在整个应用程序中持续存在，现在还不是时候。它可以在许多用户的应用程序中持续存在吗？

我能想到的另一种方法是使用可观察的数据集合并将它们存储在单例中。有什么我在这里遗漏的方法或对我更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T17:28:54.290

我认为您在这里误解了一些非常重要的概念。首先，WPF 不是 ASP.Net，WPF 应用程序不会“在服务器上运行”。WPF 应用程序在执行它们的计算机（即客户端）上运行，无论是在 Internet Explorer 中运行的 XBAP。

因此，您不能在 WPF 应用程序的许多实例之间共享诸如“单例”之类的东西，因为每个实例都将在单独的计算机上以自己的进程运行。没有实用的方法可以在这些实例之间共享内存。

然后，如果您需要“Web 应用程序”，WPF 可能不适合您的项目。WPF 不是一种 Web 技术，它是一种丰富的桌面应用程序技术，它不依赖于 HTML 或类似的糟糕实现。

现在，如果您需要（或希望）WPF 提供的丰富性、令人敬畏和易于开发，您将必须实现一个客户端/服务器应用程序，可能使用 WCF 或任何其他通信技术来使您的富客户端能够与服务器通信。

“服务器”将是一个应用程序，负责从数据库中查询数据，然后可能将其缓存在内存中，然后将其发送给客户端。通常一个 WCF 服务应用程序就足够了，尽管根据您的要求，您可能需要在它之上实现更多层。

除此之外，我认为没有充分的理由向 WPF 客户端发送 10k 行信息，因此您必须想出一些分页机制才能以“块”的形式发送数据。

请提供有关您需要的更多详细信息，我可以为您提供更多见解。

# regex - CMake：在正则表达式中转义变量内的符号

> ID：13569660
> 
> 赞同：1
> 
> 时间：2012-11-26T17:07:57.723
> 
> 标签：regex, cmake

我尝试在 CMake 中使用正则表达式识别 flexc++ 程序的版本。

flexc++ 版本的输出类似于：

```
prompt$ flexc++ --version
flexc++ V1.01.00 
```

我尝试使用正则表达式提取版本。可执行文件的名称在一个变量中（这个变量是其他命令的输出）。问题是 flexc++ 名称中的字符串“++”。此字符串与符号“+”（一个或多个匹配项）产生冲突。一个小测试：

```
set(sample "flexc++ V1.01.00")
set(flexname "flexc++")

string(REGEX REPLACE "^${flexname} V([0-9.]+)$" "\\1"
       output "${sample}")

message("${output}") 
```

抛出下一个错误：

```
RegularExpression::compile(): Nested *?+.
RegularExpression::compile(): Error in compile.
CMake Error at prueba.cmake:4 (string):
  string sub-command REGEX, mode REPLACE failed to compile regex "^flexc++
  V([0-9.]+)$". 
```

如果我删除示例和文件名变量中的“++”字符串，它会识别出完美的版本：

```
set(sample "flexc V1.01.00")
set(flexname "flexc")

string(REGEX REPLACE "^${flexname} V([0-9.]+)$" "\\1"
       output "${sample}")

message("${output}") 
```

输出：

```
1.01.00 
```

这意味着问题是“++”字符串。

我怎样才能避免这个问题？例如，在 CMake 中是否有任何命令，例如：

```
scape(flexname_scaped ${flexname}) 
```

表演

```
flexname_scaped <-- flexc\\+\\+ 
```

?

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T19:38:33.887

您可以使用以下命令转义“++” [`string(REPLACE...)`](https://cmake.org/cmake/help/latest/command/string.html#replace)：

```
string(REPLACE "++" "\\+\\+" flexname_escaped ${flexname})
string(REGEX REPLACE "^${flexname_escaped} V([0-9.]+)$" "\\1"
       output "${sample}") 
```

# c++ - C++ - 从向量中获取派生类变量

> ID：13569661
> 
> 赞同：2
> 
> 时间：2012-11-26T17:08:00.077
> 
> 标签：c++, inheritance, vector

我真的很困惑，所以我不得不问这个。我尝试编写一个应用程序，但我不知道如何访问派生类的变量，这些变量位于基类的向量中。代码是：

```
class A {
public:
    A() { };

    std::vector<A> aVector;

    void Foo();
}

class B : public A {
public:
    B() { };

    int j;
}

void A::Foo() {
    aVector.push_back( B() );

    // Here I would like to reach B::j, but only the members and variables of A comes in
    aVector[0].j; // wrong
    B b = aVector[0];   // no suitable user-defined conversion from "A" to "B" exists
                        // should I use cast? which one?
} 
```

我目前正在通过应用程序编程学习继承和这类东西，现在我真的卡住了。

我寻找其他问题，但找不到任何可以解决我的问题的问题。如果有，我错过了，那么对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:14:50.177

You need to store `pointers` to `A` so that your new `B` object won't get "sliced" (see explanation [here](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)) when pushed into the vector.

Also, when you want to use specifically a child method / variable on a pointer from the base class, you need to `cast` it into the proper type

```
std::vector<A*> aVector;
aVector.push_back(new B());
B* b = (B*)aVector[0];
cout << b->j;
// remember to delete the content of aVector 
```

Casting an object like this can be dangerous if you are not 100% sure that it is of the type you're casting it in.

See [this thread](https://stackoverflow.com/questions/28002/regular-cast-vs-static-cast-vs-dynamic-cast) for more information on casting (`C style`, `dynamic_cast` and `static_cast`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:19:22.230

由于`vector`被声明为保存类型的对象`A`，因此当您将 a 推入`B`向量时，所有`B`-ness 都会从存储在`vector`. 这被称为[切片问题](https://stackoverflow.com/questions/274626/what-is-the-slicing-problem-in-c)。

当您稍后尝试访问`B`存储在 中的对象的元素时，`vector`您无法访问，因为它们根本不存在。你没有一个`vector`of B 个对象——你有一个`vector`of 个`A`对象。

为了解决这个问题，你需要`A`不按值存储对象，而是按引用或指针存储对象。您不能将引用存储在 a 中`vector`，因此这会给您留下指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:14:19.870

This has nothing to with vectors. If `B` derives from `A` then the following code:

```
A a;
B b = a; 
```

is an error (unless there is some method to convert).

This is correct - your vector items you should be able to handle uniformly. If this means the code that uses the vector expects all items to be `B` then just make a `vector<B>`. If not, then you have no business converting an `A` to a `B` anyway.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:24:15.687

您永远不应该尝试从基类访问派生类成员。基类应该不知道派生类的实现细节。你正在做的不是多态的。换句话说，您的 B 实例不能像 A 实例那样运行，因为您没有提供任何虚拟方法并且没有覆盖任何虚拟方法。

整个设计和方法是不正确的。A::Foo() 应该是一个虚拟方法（甚至可能是抽象的）。你应该在 B::Foo() 中工作。

还有一件事，你不应该只持有一个普通的旧 A 的向量。它应该是指向 A 的指针。所以 std::Vector。并且该成员应该以字母 m 为前缀，以表明它是该类的成员变量。所以 std::vector mSomething;

# c++ - 输出所有可变参数模板参数

> ID：13569665
> 
> 赞同：1
> 
> 时间：2012-11-26T17:08:07.593
> 
> 标签：c++, c++11, variadic-templates

我只是想输出所有传递给可变参数函数模板的参数。我尝试了这种递归方法：

```
#include <iostream>

template<typename TFirst, typename... Arguments>
void Output(TFirst first, Arguments... parameters)
{
  std::cout << first << std::endl;
  Output(parameters);
}

template<typename TFirst>
void Output(TFirst first)
{
  std::cout << first << std::endl;
}

void Output()
{
  // do nothing
}

int main()
{
  Output(1.0f, 2);
} 
```

但我明白了`parameter packs not expanded with '...'`。谁能解释这里有什么问题？

- - - - - 编辑 - - - - - -

这是解决方案：

```
#include <iostream>

template<typename T>
inline void showArguments(T&& arg) { std::cout << arg << std::endl; }

template<typename First, typename... Rest>
inline void showArguments(First&& first, Rest&& ...rest)
{
  showArguments(first);
  showArguments(rest...);
}

int main()
{
    showArguments("Hello", "World", 1, 2.3, false, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:12:56.480

应该

```
template<typename TFirst, typename... Arguments>
void Output(TFirst first, Arguments... parameters)
{
  std::cout << first << std::endl;
  Output(parameters...);
} 
```

（注意参数后面的...）

# macos - 使用 Bonjour 打印服务允许 OS X Mac 看到 Windows 7 VM IIS

> ID：13569666
> 
> 赞同：0
> 
> 时间：2012-11-26T17:08:13.580
> 
> 标签：macos, iis, virtual-machine, bonjour

我一直在关注这篇博文，它声称可以让 OS X 在我的 Windows VM 上看到 IIS（我使用的是 VMware Fusion）：

[http://blog.prabir.me/post/Expose-IISExpress-to-Mac-from-a-Windows-Virtual-Machine.aspx](http://blog.prabir.me/post/Expose-IISExpress-to-Mac-from-a-Windows-Virtual-Machine.aspx)

我按照博客点了信，可以在浏览器中看到 VM 内的 IIS，但在 OS X 上看不到

有人知道我可能缺少什么配置吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:32:12.440

对于任何感兴趣的人，我遇到的问题是我在 VMware fusion 中的**网络适配器**`NAT`设置为.

它应该设置为`Bridged`，以便 VM 显示为 mac 的单独地址。然后问题中提到的教程完美运行。

希望这对某人有帮助！

# php - 检查日期是否落在特定日期并排序

> ID：13569669
> 
> 赞同：0
> 
> 时间：2012-11-26T17:08:28.513
> 
> 标签：php, string

我在 PHP 数组列表中有一个日期列表。所有日期都在星期二或星期四登陆，格式如下：2012 年 3 月 8 日。我正在尝试列出日期并检查最多接下来的 8 个（所有这些都必须在未来，没有通过）并验证每个日期在一周中的哪一天。一旦发现，我想将它们放入 2 个单独的列表中，一个用于周二登陆的 4 个，另一个用于周四登陆的 4 个（稍后将放入单独的 DIV 中）。有人知道如何完成这项工作吗？

为了分离 200 多行代码，这是我的示例：

今天是 2012 年 11 月 26 日，星期一。

这是我的日期数组：

2012年11月27日 2012年
11月29日 2012年
12月4日 2012年
12月6日 2012年
12月11日 2012年
12月13日 2012年
12月18日 2012年
12月20日 2012年
12月25日 2012年
12月27日2013年1
月1日 2013年
1月3日
1月8日, 2013 年
1 月 10 日 2013

我想把它变成2个列表：

**星期二列表** 2012 年 11 月 27 日 2012 年
12 月 4 日 2012 年
12 月 11 日 2012 年
12 月 18 日

**星期四列表** 2012 年 11 月 29 日 2012 年
12 月 6 日 2012 年
12 月 13 日 2012 年
12 月 20 日

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:06:13.330

这是几个步骤（创建函数、获取密钥、循环使用密钥位置对日期进行排序的数据）

数组（使用您发布的示例数组）-

```
$date_array = array('November 27, 2012','November 29, 2012','December 4, 2012','December 6, 2012','December 11, 2012','December 13, 2012','December 18, 2012','December 20, 2012','December 25, 2012','December 27, 2012','January 1, 2013','January 3, 2013','January 8, 2013','January 10, 2013'); 
```

首先创建一个函数来查找最接近的`$array`值

```
function closest($array, $number) {

  ksort($array);
  foreach ($array as $a) {
    if (strtotime($a) >= strtotime($number)) return $a;
  }
  return end($array);
  }; 
```

使用我们的新功能查找今天的日期，或者下一个最接近的日期，然后得到它`value`的关键 -

```
$today = date("F j, Y");
$value = closest($date_array, $today);
$key = array_search($value, $date_array); 
```

创建`Tuesday`&`Thursday`数组来保存数据-

```
$tues_array = array();
$thurs_array = array(); 
```

循环遍历每个`date`，从当前（或最接近的）日期开始 8 次`$key+8`，并将它们添加到`Tuesday`(2) 和`Thursday`(4)

```
for($i=$key;$i<($key+8);$i++){
  $dayofweek = date('w', strtotime($date_array[$i]));
    if ($dayofweek == 2){
        $tues_array[] = $date_array[$i];}
    if ($dayofweek == 4){
        $thurs_array[] = $date_array[$i];}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T18:50:01.487

怎么样：

```
date('w', strtotime($my_date)); 
```

这应该为您提供所需的所有信息。

# c# - 在静态方法中使用异步函数

> ID：13569670
> 
> 赞同：7
> 
> 时间：2012-11-26T17:08:30.247
> 
> 标签：c#, asynchronous, async-await

我有一个静态方法，我在其中调用`async`方法 (xmlHelper.LoadDocument())。我在 Setter 部分的属性中调用此方法

```
internal static IEnumerable<Word> LoadTenWords(int boxId)
{
     XmlHelper xmlHelper = new XmlHelper();
     XDocument xDoc = xmlHelper.LoadDocument().Result;
     return xDoc.Root.Descendants("Word").Single(...)
} 
```

如您所知，LoadTenWord 是静态的，不能是异步方法，因此我使用 Result 属性调用 LoadDocument。当我运行我的应用程序时，应用程序不起作用，但是当我调试它并等待下一行时

```
XDocument xDoc = xmlHelper.LoadDocument().Result; 
```

一切都好！！！我**认为**，没有`await`关键字，C# 不会等待过程完全完成。

你对解决我的问题有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T17:22:19.153

该方法的事实`static`并不意味着它**不能**被标记为`async`.

```
internal static async Task<IEnumerable<Word>> LoadTenWords(int boxId)
{
    XmlHelper xmlHelper = new XmlHelper();
    XDocument xDoc = await xmlHelper.LoadDocument();
    return xDoc.Root.Descendants("Word").Select(element => new Word());
} 
```

使用`Result`导致方法阻塞，直到任务完成。在您的环境中，这是一个问题；您不需要*阻止*而只是`await`任务（或使用延续来处理结果，但`await`要容易*得多*）。

# vba - 使用 SAS IOM 和 VBA 创建工作区会话

> ID：13569672
> 
> 赞同：5
> 
> 时间：2012-11-26T17:08:45.177
> 
> 标签：vba, sas

我正在尝试使用 Excel VBA 连接到工作区服务器。使用[此页面](http://support.sas.com/rnd/itech/doc9/dev_guide/dist-obj/winclnt/workman/samples.html)上的信息，我制作了以下内容：

```
Dim obSAS As SAS.Workspace
Dim obWorkspaceManager As New SASWorkspaceManager.WorkspaceManager
Private Sub Form_Load()
   Dim obConnection As New ADODB.Connection
   Dim obRecordSet As New ADODB.Recordset
   Dim obServerDef As New SASWorkspaceManager.ServerDef
   Dim xmlString As String
   obServerDef.Port = 28561
   obServerDef.Protocol = ProtocolBridge 
   obServerDef.MachineDNSName = "blah.server.com"
   Set obSAS = obWorkspaceManager.Workspaces.CreateWorkspaceByServer( "Ref", _
      VisibilityProcess, obServerDef, "me@saspw","MyPass", xmlStr)
end sub 
```

我的第一反应是这样的：

```
<xml id="combridgeOutput"><connectionAttempts><connectionAttempt>
  <sasserver></sasserver>
  <sasmachinednsname>blah.server.com</sasmachinednsname>
  <sasport>28561</sasport>
  <saslogin>me@saspw</saslogin>
  <status>0x80041001</status>
  <description><Exceptions><Exception>
  <SASMessage severity="Error">
    The client has connected to a SAS (9.2) Metadata Server (v1.0) when 
    it intended to connect to a SAS Workspace Server.
  </SASMessage>
  </Exception></Exceptions></description>
</connectionAttempt></connectionAttempts></xml> 
```

所以我更新了端口号以指向工作区服务器，现在我得到了这个：

```
 <same XML tags as above >
  <SASMessage severity="Error">
    Client me@saspw does not have permission to use server 
    SASMeta - Workspace Server (A5DPDN69.AV000069).
  </SASMessage> 
```

宁愿不为此练习设置特殊权限。还有什么办法可以将 VBA 连接到 SAS 工作区服务器会话？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T19:07:47.850

嗬！我使用了错误的机器名称。作为参考，这里是获取正确机器名称的过程！

1.  登录 SMC
2.  展开服务器管理器
3.  展开 SASApp
4.  展开 SASApp - 逻辑工作区服务器

在那里您将看到正确的机器，并且还会显示端口详细信息..

# javascript - 使用 KendoGrid 进行批量编辑时如何弹出“成功保存”消息？

> ID：13569676
> 
> 赞同：0
> 
> 时间：2012-11-26T17:08:50.607
> 
> 标签：javascript, telerik, grid, kendo-ui

我正在使用 KendoUI Grid 进行在线批量编辑。我想在成功保存更改后向用户显示一条消息。我该怎么做呢？

我的标记：

```
<div id="employeeGoalsGrid"></div> 
```

我的Javascript：

```
var goalsDataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: '/MVC/ResearcherPoints/GetEmployeeResearchers',
            type: 'POST',
            contentType: 'application/json'
        },
        update: {
            url: '/MVC/ResearcherPoints/UpdateEmployeeGoal',
            type: 'POST',
            contentType: 'application/json'
            //dataType: "jsonp"
        },
        parameterMap: function (options, type) {
            debugger;
            $.extend(options, { ID: options.id });
            return JSON.stringify(options);
        }
    },
    batch: false,
    schema: {
        model: {
            id: 'ID',
            fields: {
                id: { editable: false, nullable: false },
                FirstName: { editable: false, nullable: true  },
                LastName: { editable: false, nullable: true },
                Title: { editable: false, nullable: true },
                TeamName: { editable: false, nullable: true },
                PointsGoal: { type: "number", nullable: true, validation: { required: false, min: 1 } }
            }
        }
    },
    sortable: true,
    filterable: true,
    columnMenu: true
});

$('#employeeGoalsGrid').kendoGrid({
    dataSource: goalsDataSource,
    navigatable: true,
    sortable: true,
    resizable: true,
    toolbar: ["save", "cancel"],
    columns: [
        { field: "FirstName", title: "First Name", width: 200},
        { field: "LastName", title: "Last Name", width: 200 },
        { field: "Title", title: "Title", width: 200 },
        { field: "TeamName", title: "Team", width: 200 },
        { field: "PointsGoal", title: "Goal", width: 200 }],
    editable: true,
    filterable: true,
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:04:08.887

罗德尼，利用整个活动怎么样。我同意这有点脏，但我从来没有设法让剑道成功事件发挥作用（不确定是否有人设法 - 剑道？）。

```
 update: {
            url: '/MVC/ResearcherPoints/UpdateEmployeeGoal',
            type: 'POST',
            contentType: 'application/json',
            complete: function (jqXhr, textStatus) {
                            if (textStatus == 'success') {
                                var result = jQuery.parseJSON(jqXhr.responseText);
                                // read your result   
                                // open your dialog
                            }
                    }
        }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T19:19:15.893

您应该使用数据源的[同步](http://docs.kendoui.com/api/framework/datasource#sync)事件。

```
var goalsDataSource = new kendo.data.DataSource({
    sync: function(e){
        alert('Synchronization has completed! Your changes are saved!')
    }
//... 
```

# javascript - 地理定位功能不起作用！Javascript

> ID：13569678
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:08:59.653
> 
> 标签：javascript, html, geolocation

> **可能重复：**
> [toRad() javascript 函数抛出错误](https://stackoverflow.com/questions/5260423/torad-javascript-function-throwing-error)

所以首先我得到了这两个 p 标签

```
<p id="pos"></p>
<p id="dist"></p> 
```

我将我的位置放在“pos”中，将我与纽约之间的距离放在“dist”中。我得到了这两个按钮来触发 JS 功能：

```
<button onclick="getLocation()">Get position</button>
<button onclick="calcDistance()">Calculate distance to NY</button> 
```

这是所有脚本：

```
var x=document.getElementById("pos");
var d=document.getElementById("dist");
var startPos;
function getLocation(){
      navigator.geolocation.getCurrentPosition(function(position) {
        startPos = position;
        x.innerHTML= "<h3>Your position</h3>" +
        "Latitude: " + startPos.coords.latitude + 
        "<br>Longitude: " + startPos.coords.longitude;
      });
};
function calcDistance(){
    var distt = calculateDistance(startPos.coords.latitude, startPos.coords.longitude, 40.28371627, -73.994901);
    d.innerHTML = distt.toFixed(1);
};

function calculateDistance(lat1,lon1,lat2,lon2) {
    var R = 6371;
    var dLat = (lat2-lat1).toRad();
    var dLon = (lon2-lon1).toRad(); 
    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
            Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
            Math.sin(dLon/2) * Math.sin(dLon/2); 
    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
    return R * c;   
} 
```

我的 calcDistance 按钮不起作用，我不知道问题出在哪里。我试图只在 calculateDistance() 中输入数字，但它仍然不起作用。怎么来的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:16:07.650

把它放在你的 JS 上面：

```
Number.prototype.toRad = function() {
  return this * Math.PI / 180;
} 
```

正如@apsillers 所说，`.toRad()`这不是本机功能。为了将来参考，您应该使用 Web 控制台，它可以让您知道错误是什么。在这种情况下，您会得到：

`Uncaught TypeError: Object -0.123871823 has no method 'toRad'`

# cloudbees - 使用特定 JDK 版本运行@cloud

> ID：13569684
> 
> 赞同：1
> 
> 时间：2012-11-26T17:09:19.250
> 
> 标签：cloudbees

有没有办法可以指定我们正在运行的 JDK 版本？具体来说，我有一个与 1.6.0_35 不兼容的 java 应用程序（非 webapp），并且在 CloudBees 上为我出错。包推荐1.6.0_27，可以在部署时指定吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:47:35.560

您可以在命令行上使用 -Rjava_version 指定版本 - 但是，细粒度版本不可用（因为我们倾向于更新这些版本） - 它只是 1.6、1.7 或 1.8 沿袭。在这种情况下，我会推荐 -Rjava_version=1.7。

# java - 带有 SOCKS 代理的 wsimport

> ID：13569685
> 
> 赞同：0
> 
> 时间：2012-11-26T17:09:21.900
> 
> 标签：java, proxy, jax-ws, socks, wsimport

我们正在为第 3 方 WCF Web 服务开发 JAXWS 客户端。JAXWS 客户端将成为部署在 tomcat 上的大型基于 Web 的应用程序的一部分。并非我们环境中的所有服务器都允许通过 Internet 进行通信，因此网络团队已经配置了具有身份验证的 SOCKS 代理。

我知道我可以将 -DsocksProxyHost 作为命令行参数传递，但我不能这样做，因为这适用于整个 Web 应用程序。我已经浏览了这个[javadoc-link](http://docs.oracle.com/javase/6/docs/technotes/guides/net/proxies.html)

关于如何设置基于连接的代理设置。但问题是，由于我使用的是抽象 URL 连接功能的 wsimport 生成的服务，所以我无法使用该`URConnection conn = url.openConnection(proxy);`方法。

有什么想法/想法吗？

# linux - bash打印和递增数组值

> ID：13569686
> 
> 赞同：3
> 
> 时间：2012-11-26T17:09:21.853
> 
> 标签：linux, arrays, bash, printing, sh

我正在制作一个 bash 脚本，我需要在其中打印一个数字，同时它像这样递增：

```
0000
0001
0002
0003
0004 
```

我做了这个但没有工作：

```
#!/bin/bash
i=0
pass[0]=0
pass[1]=0
pass[2]=0
pass[3]=0
for i in $(seq 1 9)
    pass[3]="$i"
    echo ${pass[*]}
done 
```

我将脚本粘贴到 cli 上，我得到了这个。

```
$ ~ #!/bin/bash
$ ~ i=0
$ ~ pass[0]=0
$ ~ pass[1]=0
$ ~ pass[2]=0
$ ~ pass[3]=0
$ ~ for i in $(seq 1 9)
>     pass[3]="$i"
bash: error sintáctico cerca del elemento inesperado `pass[3]="$i"'
$ ~     echo ${pass[*]}
0 0 0 0
$ ~ done
bash: error sintáctico cerca del elemento inesperado `done'
$ ~ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:13:18.340

使用这个纯 bash 脚本：

```
for ((i=0; i<10; i++)); do
   printf "%04d\n" $i
one 
```

**输出：**

```
0000
0001
0002
0003
0004
0005
0006
0007
0008
0009 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:55:41.097

对于那些喜欢扩展的人，您还可以这样做：

```
printf "%s\n" {0001..0009} 
```

或者

```
printf "%.4d\n" {1..9} 
```

没有循环！

您可以这样存储在数组中：

```
$ myarray=( {0001..0009} )
$ printf "%s\n" "${myarray[@]}"
0001
0002
0003
0004
0005
0006
0007
0008
0009
$ echo "${myarray[3]}"
0004 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T17:13:35.833

```
#!/bin/bash
i=0
pass[0]=0
pass[1]=0
pass[2]=0
pass[3]=0
for i in $(seq 1 9)
do
    pass[3]="$i"
    echo ${pass[*]}
done 
```

你忘了“做”吗

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T06:12:03.703

您可以使用以下方式进行格式化`seq`：

```
seq -w 0000 0010 
```

（如果您不喜欢`{0000..0010}`这种更有效但不允许参数替换的表示法。）

# php - symfony 1.4 前端图片上传

> ID：13569689
> 
> 赞同：1
> 
> 时间：2012-11-26T17:09:30.963
> 
> 标签：php, image, doctrine, symfony-1.4

我开始了新的 symfony 1.4 项目，一切都很好，直到我决定在前端上传一张图片。似乎不可能。经过一些搜索后，图像上传在嵌入式表单或类似谷歌的东西中不起作用。

让我描述一下问题：

在 lib/form/doctrine/base 我有我的基类：

```
abstract class BaseAlbumimagesForm extends BaseFormDoctrine {

public function setup() {
    $this->setWidgets(array(
        'id' => new sfWidgetFormInputHidden(),
        'title' => new sfWidgetFormInputText(),
        'path' => new sfWidgetFormInputFile(),
        'description' => new sfWidgetFormInputText(),
        'alt' => new sfWidgetFormInputText(),
        'album_id' => new sfWidgetFormDoctrineChoice(array('model' => $this->getRelatedModelName('Albums'), 'add_empty' => false)),
        'ordering' => new sfWidgetFormInputText(),
        'rating' => new sfWidgetFormInputText(),
        'cdate' => new sfWidgetFormDate(),
        'slmjeseca' => new sfWidgetFormInputCheckbox(),
        'published' => new sfWidgetFormInputCheckbox(),
    ));

    $this->setValidators(array(
        'id' => new sfValidatorChoice(array('choices' => array($this->getObject()->get('id')), 'empty_value' => $this->getObject()->get('id'), 'required' => false)),
        'title' => new sfValidatorString(array('max_length' => 255)),
        'path' => new sfValidatorFile(array(
            'required' => false,
            'path' => sfConfig::get('sf_upload_dir') . '/profiles',
            'mime_types' => 'web_images',)),
        'description' => new sfValidatorString(array('max_length' => 255, 'required' => false)),
        'alt' => new sfValidatorString(array('max_length' => 255, 'required' => false)),
        'album_id' => new sfValidatorDoctrineChoice(array('model' => $this->getRelatedModelName('Albums'))),
        'ordering' => new sfValidatorInteger(),
        'rating' => new sfValidatorString(array('max_length' => 255)),
        'cdate' => new sfValidatorDate(),
        'slmjeseca' => new sfValidatorBoolean(),
        'published' => new sfValidatorBoolean(),
    ));

    $this->widgetSchema->setNameFormat('albumimages[%s]');

    $this->errorSchema = new sfValidatorErrorSchema($this->validatorSchema);

    $this->setupInheritance();

    parent::setup();
}

public function getModelName() {
    return 'Albumimages';
}

  } 
```

和类 Albumimages 扩展了这个基类......所有这些都被 symfony 通用化了，我所做的只是编辑 InputFile 和它的验证器，这在后端工作得很好。

在前端我想要相同的表单，所以在我的模块/操作中我有 action.class.php 代码

```
public function executeAddimage(sfWebRequest $request) {
   $user_id = $this->getContext()->getUser()->getAttribute('user_id', '',   'sfGuardSecurityUser');

    $this->form1 = new AlbumimagesForm();

    if ($request->isMethod('post')) {
        $this->form1->bind($request->getParameter($this->form1->getName()),   $request->getFiles($this->form1->getName()));

             if ($this->form1->isValid()) {

    $this->form1->save();

}}} 
```

这将保存数据库中的 PATH 字段和上传目录中的实际 IMAGE 以外的所有内容

谷歌搜索找到了这段代码

```
foreach ($request->getFiles() as $fileName) {
  $theFileName = $fileName['name'];
  $uploadDir = sfConfig::get("sf_upload_dir");
  $Contacts_uploads = $uploadDir.'/profile';

  if(!is_dir($Contacts_uploads))
  mkdir($Contacts_uploads, 0777);            

  move_uploaded_file($fileName['tmp_name'],
           "$Contacts_uploads/$theFileName");` 
```

对我不起作用或者我没有很好地实现它

甚至尝试手动完成

```
$file = $form1->getValue('path');
 $filename = 'path_'.sha1($file->getOriginalName());
 $extension = $file->getExtension($file->getOriginalExtension());
 $file->save(sfConfig::get('sf_upload_dir').'/'.$filename.$extension);` 
```

但是我试图在非对象上访问 getOriginalName 时出现错误，`$file`因为表单值路径没有发送文件....

# xml - 汽车故障中的亚马逊 MWS SKU 添加

> ID：13569695
> 
> 赞同：4
> 
> 时间：2012-11-26T17:09:52.963
> 
> 标签：xml, amazon-web-services, amazon-mws

当尝试在汽车类别中添加偏差时，MWS 以库存中不存在的 SKU 进行响应，并要求我提供标准产品 ID。我的印象是，对于汽车相关产品，这个要求是没有必要的。以下是发布和返回的数据：

```
<?xml version="1.0" encoding="UTF-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
    <Header>
        <DocumentVersion>1.01</DocumentVersion>
        <MerchantIdentifier>XXX</MerchantIdentifier>
    </Header>
    <MessageType>Product</MessageType>
    <PurgeAndReplace>false</PurgeAndReplace>
    <Message>
        <MessageID>1</MessageID>
        <OperationType>Update</OperationType>
        <Product>
            <SKU>0101-3451</SKU>
            <LaunchDate>2012-11-20T00:00:00+01:00</LaunchDate>
            <Condition>
                <ConditionType>New</ConditionType>
            </Condition>
            <NumberOfItems>1</NumberOfItems>
            <DescriptionData>
                <Title>HELMET GP-TECH 5-CONT XS</Title>
                <Description>2-piece dual-density carbon Kevlar construction Ventilated by the IVS (Integrated Ventilation System) which features channels hollowed directly into the shell of the helmet Features a fully removable and washable CoolMax liner Comes with an anti-fog and anti-scratch polycarbonate clear Racer-X visor with tear-off system Replace the shield within seconds without the use of tools Double D-ring chin strap DOT and ECE-2205 certified </Description>
                <MSRP currency="USD">624.95</MSRP>
                <Manufacturer>AVG</Manufacturer>
                <MfrPartNumber>XF0101-3451</MfrPartNumber>
                <ItemType>powersports-helmets</ItemType>
            </DescriptionData>
            <ProductData>
                <AutoAccessory>
                    <ProductType>
                        <Helmet>
                            <Department>unisex-adult</Department>
                            <StyleKeywords>all-weather</StyleKeywords>
                            <SafetyRating>DOT Certified</SafetyRating>
                            <ModelName>HELMET GP-TECH 5-CONT XS</ModelName>
                        </Helmet>
                    </ProductType>
                </AutoAccessory>
            </ProductData>
        </Product>
    </Message>
</AmazonEnvelope> 
```

* * *

回复：

```
<?xml version="1.0" encoding="UTF-8"?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="amzn-envelope.xsd">
    <Header>
        <DocumentVersion>1.02</DocumentVersion>
        <MerchantIdentifier>XXX</MerchantIdentifier>
    </Header>
    <MessageType>ProcessingReport</MessageType>
    <Message>
        <MessageID>1</MessageID>
        <ProcessingReport>
            <DocumentTransactionID>6079239000</DocumentTransactionID>
            <StatusCode>Complete</StatusCode>
            <ProcessingSummary>
                <MessagesProcessed>1</MessagesProcessed>
                <MessagesSuccessful>0</MessagesSuccessful>
                <MessagesWithError>1</MessagesWithError>
                <MessagesWithWarning>0</MessagesWithWarning>
            </ProcessingSummary>
            <Result>
                <MessageID>0</MessageID>
                <ResultCode>Warning</ResultCode>
                <ResultMessageCode>90000</ResultMessageCode>
                <ResultDescription>http://sellercentral.amazon.com/myi/search/ErrorListingsSummary?batchId=6079239000</ResultDescription>
            </Result>
            <Result>
                <MessageID>1</MessageID>
                <ResultCode>Error</ResultCode>
                <ResultMessageCode>8560</ResultMessageCode>
                <ResultDescription>SKU 0101-3451, Missing Attributes standard_product_id. SKU 0101-3451 does not match any ASIN. Creation of a new ASIN requires the following missing attributes: standard_product_id. Feed ID: 0\. For details, see http://sellercentral.amazon.com/gp/errorcode/200692370</ResultDescription>
                <AdditionalInfo>
                    <SKU>0101-3451</SKU>
                </AdditionalInfo>
            </Result>
            <Result>
                <MessageID>1</MessageID>
                <ResultCode>Error</ResultCode>
                <ResultMessageCode>13013</ResultMessageCode>
                <ResultDescription>This SKU does not exist in your Amazon inventory so we could not process this record. To correct this error for future feeds, add the SKU to your Amazon account. For more information, see http://sellercentral.amazon.com/gp/errorcode/13013.</ResultDescription>
                <AdditionalInfo>
                    <SKU>0101-3451</SKU>
                </AdditionalInfo>
            </Result>
            <Result>
                <MessageID>1</MessageID>
                <ResultCode>Error</ResultCode>
                <ResultMessageCode>13013</ResultMessageCode>
                <ResultDescription>This SKU does not exist in your Amazon inventory so we could not process this record. To correct this error for future feeds, add the SKU to your Amazon account. For more information, see http://sellercentral.amazon.com/gp/errorcode/13013.</ResultDescription>
                <AdditionalInfo>
                    <SKU>0101-3451</SKU>
                </AdditionalInfo>
            </Result>
        </ProcessingReport>
    </Message>
</AmazonEnvelope> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T16:04:12.013

根据我的经验，在某些情况下您可以绕过不指定`standard-product-id`. 如果该产品已经存在于亚马逊产品目录中，并且您可以提供足够的信息：（`Title`、`Brand`、`Manufacturer`、`MfrPartNumber`、`Department`等），那么亚马逊将能够将您的产品与其目录中的现有产品相匹配，并为您提供`ASIN`. 但是，如果他们无法匹配您的产品，亚马逊会尝试在他们的目录中使用您提供的信息创建一个新条目。在这种情况下，亚马逊需要 a`standard-product-id`才能完全定义产品并为您提供新的`ASIN`.

另外，我相信`Powersports`, 的子类别对所有新条目都`Automotive`需要`standard-product-id`（它们不具有与 相同的 upc 豁免规则`Automotive`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T16:53:50.090

似乎即使汽车类别显示为不需要标准产品 ID，您的帐户仍需要请求 UPC 豁免才能绕过此请求。

# database - DB2 日志文件限制，SQLCODE：-964

> ID：13569696
> 
> 赞同：3
> 
> 时间：2012-11-26T17:09:53.660
> 
> 标签：database, db2, logfile, sqlcode

我在 DB2 中尝试了一个巨大的插入查询。INSERT INTO MY_TABLE_COPY (SELECT * FROM MY_TABLE);

在此之前，我设置了以下内容：

```
UPDATE DATABASE CONFIGURATION FOR MY_DB USING LOGFILSIZ 70000;
UPDATE DATABASE CONFIGURATION FOR MY_DB USING LOGPRIMARY 50;
UPDATE DATABASE CONFIGURATION FOR MY_DB USING LOGSECOND 2;
db2stop force;
db2start; 
```

我得到了这个错误：

```
DB21034E  The command was processed as an SQL statement because it was not a 
valid Command Line Processor command.  During SQL processing it returned:
SQL0964C  The transaction log for the database is full.  SQLSTATE=57011

SQL0964C  The transaction log for the database is full.

Explanation: 

All space in the transaction log is being used.  

 If a circular log with secondary log files is being used, an 
attempt has been made to allocate and use them.  When the file 
system has no more space, secondary logs cannot be used.  

 If an archive log is used, then the file system has not provided 
space to contain a new log file.  

 The statement cannot be processed.  

User Response: 

Execute a COMMIT or ROLLBACK on receipt of this message (SQLCODE) 
or retry the operation.  

 If the database is being updated by concurrent applications, 
retry the operation.  Log space may be freed up when another 
application finishes a transaction.  

 Issue more frequent commit operations.  If your transactions are 
not committed, log space may be freed up when the transactions 
are committed.  When designing an application, consider when to 
commit the update transactions to prevent a log full condition.  

 If deadlocks are occurring, check for them more frequently.  
This can be done by decreasing the database configuration 
parameter DLCHKTIME.  This will cause deadlocks to be detected 
and resolved sooner (by ROLLBACK) which will then free log 
space.  

 If the condition occurs often, increase the database 
configuration parameter to allow a larger log file.  A larger log 
file requires more space but reduces the need for applications to 
retry the operation.  

 If installing the sample database, drop it and install the 
sample database again.  

 sqlcode :  -964 

 sqlstate :  57011 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T18:21:21.833

I used the maximum values for LOGFILSIZ, LOGPRIMARY, and LOGSECOND; The max value for LOGFILSIZ may be different for windows, linux, etc. But, you can try a very big number and the DB let you know what is the max. In my case it was 262144.

Also, LOGPRIMARY + LOGSECOND <= 256\. I tried 128 for each and it works for my huge query.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-31T01:02:41.977

您可以将这些 INSERT 语句放在带有提交间隔的存储过程中，而不是使用 DB CFG 参数执行试验和错误。

有关详细信息，请参阅以下帖子：这可能会有所帮助。

[https://prasadspande.wordpress.com/2014/06/06/plsql-ways-updatingdeleting-the-bulk-data-from-the-table/](https://prasadspande.wordpress.com/2014/06/06/plsql-ways-updatingdeleting-the-bulk-data-from-the-table/)

谢谢

# android - 使用裁剪意图时 Galaxy Nexus 获取循环

> ID：13569697
> 
> 赞同：1
> 
> 时间：2012-11-26T17:09:53.663
> 
> 标签：android, android-intent, crop

我现在面临一个问题，当进入裁剪功能时，我的 Galaxy nexus 不断循环“加载图像”。下面是我的编码：

```
Intent openCamera = new Intent(MediaStore.ACTION_IMAGE_CAPTURE); 
startActivityForResult(openCamera, click_camera);

protected void onActivityResult(int requestCode, int resultCode, Intent imageReturnedIntent){
            if (imageReturnedIntent != null)
                {if(requestCode == click_camera && resultCode == RESULT_OK) { 
                    picUri = imageReturnedIntent.getData();
                    Crop();             
                }

            else {
                **my coding part**
}

/* crop method */
private void Crop(){    
    try {

        //call the crop action from intent (default from device)
        Intent cropIntent = new Intent("com.android.camera.action.CROP"); 
        //indicate image type and Uri
        cropIntent.setDataAndType(picUri, "image/*");
        //set crop properties
        cropIntent.putExtra("crop", "true");
        //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
        //indicate output X and Y
        cropIntent.putExtra("outputX", 300);
        cropIntent.putExtra("outputY", 300);
        cropIntent.putExtra("scale", true);
        cropIntent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
        cropIntent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
        //retrieve data on return
        cropIntent.putExtra("return-data", true);
        //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, PIC_CROP);  
    }
    //respond to users whose devices do not support the crop action
    catch(ActivityNotFoundException anfe){
        //display an error message
        String errorMessage = "Whoops - your device doesn't support the crop action!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

是我的裁剪功能错误吗？任何人都可以帮助解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T15:30:38.343

这就是我为自己的情况解决问题的方法。

拿着这个：

```
cropIntent.putExtra("outputX", 300);
cropIntent.putExtra("outputY", 300); 
```

并更改：

```
cropIntent.putExtra("outputX", 256);
cropIntent.putExtra("outputY", 256); 
```

原因：[点这里](https://stackoverflow.com/questions/7237479/android-cropper-cannot-go-beyond-256)

**编辑**

我找到了解决方案

放

```
cropIntent.putExtra("outputX", ANY VALUE);
cropIntent.putExtra("outputY", ANY VALUE);
cropIntent.putExtra("return-data", false);
cropIntent.putExtra(MediaStore.EXTRA_OUTPUT, mImageCaptureUri); 
```

查看裁剪后的图像

```
BitmapFactory.decodeFile(mImageCaptureUri.getPath()); 
```

享受 ：）

# android - 更正 Android 中的印地语 (Unicode) 呈现

> ID：13569698
> 
> 赞同：1
> 
> 时间：2012-11-26T17:09:55.143
> 
> 标签：android, unicode, hindi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T16:53:35.003

对于您的问题，我有一个替代解决方案，但不准确......使用字体......

```
Typeface tf = Typeface.createFromAsset(getAssets(),"Hindi-SARAL1.TTF"); 
```

为 नक्षत्र 使用.......

```
 TextView tv = (TextView) findViewById(R.id.textView1);

tv.setText("n95"); 

tv.setTypeface(tf); 
```

而对于दिन........ unicode 值继续没有差距.. 我在 和 2367 之间给出了一个空格；

```
tv.setText(Html.fromHtml("&# 2367;&# 2342;&# 2344;"));

 tv.setTypeface(tf); 
```

* * *

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-22T11:09:56.053

我找不到一个简单的解决方法来修复无处不在的渲染。所以最后我不得不将印地语语言功能限制在具有 android 4.0 或更高版本的设备上。

# android - 在 Android 上以正确的格式输入 MAC 地址

> ID：13569715
> 
> 赞同：2
> 
> 时间：2012-11-26T17:11:31.023
> 
> 标签：android, regex, validation

我有一个 EditText，我希望用户能够输入 MAC 地址。

如何限制用户仅输入 A、B、C..F 和数字并以正确的格式 (00:11:22:33:44:55) 写入？

如何验证？

编辑：我发现这段代码可以满足我的需要，但有一个 IP 地址。我尝试使用您建议的正则表达式，但它们不起作用。

```
 public void showIP(){
    // Set an EditText view to get user input 
    final EditText input = new EditText(this);
    input.setInputType(InputType.TYPE_CLASS_PHONE);
    input.setSingleLine();
    InputFilter[] filters = new InputFilter[1];
    //filter used to allow only IPv4 style address
    filters[0] = new InputFilter() {
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            if (end > start) {
                String destTxt = dest.toString();
                String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);
                if (!resultingTxt.matches("^[\\dA-F]{2}(?::[\\dA-F]{2}){5}$")) { 
                    return "";
                } /*else {
                    String[] splits = resultingTxt.split("\\:");
                    for (int i=0; i<splits.length; i++) {
                        if (Integer.valueOf(splits[i]) > ) {
                            return "";
                        }
                    }
                }*/
            }
        return null;
        }
    };
    input.setFilters(filters);

    input.setText(serverIP);
    new AlertDialog.Builder(this)
        .setTitle(R.string.ServerIP)
        .setMessage("Change SERVER IP")
        .setView(input)
        .setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                serverIP=input.getText().toString();
                SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
                SharedPreferences.Editor editor = settings.edit();
                editor.putString("IP", input.getText().toString());
                // Commit the edits!
                editor.commit();
                view.updateServerIP();
            }
        }).setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                //do nothing
            }
        }).show();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-11T11:57:36.680

在此代码中，MAC 地址字段将自动生成 ':' 。您也可以删除该条件。

```
final EditText input = new EditText(context);
        input.setInputType(InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS);
        input.setSingleLine();
        InputFilter[] filters = new InputFilter[1];

        filters[0] = new InputFilter() {

            @Override
            public CharSequence filter(CharSequence source, int start, int end,
                    Spanned dest, int dstart, int dend) {
                // TODO Auto-generated method stub
                if (end > start) {
                    String destTxt = dest.toString();
                    String resultingTxt = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);
                    if (resultingTxt.matches("([0-9a-fA-F][0-9a-fA-F]:){0,5}[0-9a-fA-F]"))
                    {

                    }
                    else if(resultingTxt.matches("([0-9a-fA-F][0-9a-fA-F]:){0,4}[0-9a-fA-F][0-9a-fA-F]")){
                        return source.subSequence(start, end)+":" ;
                    }
                    else if(resultingTxt.matches("([0-9a-fA-F][0-9a-fA-F]:){0,5}[0-9a-fA-F][0-9a-fA-F]")){

                    }
                    else
                    { 
                        return "";
                    } 
                }
                return null;
            }
        };
        input.setFilters(filters); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:15:47.787

The general regex to match a char from 0-F would be `[\dA-F]`

So having that in mind, you could do: `^[\dA-F]{2}(?:[\-][\dA-F]{2}){5}$`

Nothe: The `(?:` Is for a non capturing group.

[DEMO](http://regex101.com/r/sH1qR7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:55:37.937

`([\da-fA-F]{2}(?:\:|$)){6}`

这很好用，你可以在这里看到：

[http://regexr.com?32ugi](http://regexr.com?32ugi)

如果您希望将“-”也包含在分隔符中（根据标准有效），您可以使用以下命令：

`([\da-fA-F]{2}(?:\:|-|$)){6}`

[http://regexr.com?32ugl](http://regexr.com?32ugl)

# database-design - 动态生成表的数据类型

> ID：13569720
> 
> 赞同：0
> 
> 时间：2012-11-26T17:11:48.657
> 
> 标签：database-design, architecture, etl

首先，我是软件工程专业的最后一年学生。我们正在创建一个 KPI 软件。在那里，输入可以是 CSV、txt、xml 或 excel。当用户将文件输入软件时，我们必须为该特定文件动态创建一个表来存储数据。

我创建了一个“文件导入向导”来导入文件。现在的问题是创建表。可以说以下是我收到的 .txt 数据文件

```
Name,Age,Address
Shaun,22,NY
Milan,21,Dexel RD 
```

现在在向导中，我已经确定了表（列）的字段是`Name`、`Age`和`Address`。但是当我动态创建表时，我是否必须让用户设置每个字段的数据类型？

```
eg: Name - Text
    Age - Numbers
    Address - Text 
```

但是由于我们不知道一个表可能有多少个字段，这将是一项非常艰巨的任务。

我计划将所有数据存储为“VarChar”。因为您知道，字符串可以轻松转换回其他数据类型（数字、日期）。

所以当用户想要在 Charts 中显示数据时，我们可以获取 table 中的数据并将其转换为所需的数据类型并进行必要的计算。

您对此有何建议？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:16:21.220

您的数据库应该包含数据 - 如果您的数据将被视为字符串（像字符串一样输入，显示为字符串，作为字符串操作）将其存储为字符串就可以了。

另一方面，如果您将在某些时候以不同的方式处理数据（例如，您想从日历中选择日期），那么在将数据放入数据库之前转换数据是有意义的。在这种情况下，如果您现在不转换它，您将在路上踢罐子，以后会引起更多的头痛。

如果您处于第二种情况，请考虑读取文件头（可能还有第一行），并为每行提供适用的选择（您甚至可以务实地进行最佳猜测）。这样，用户就应该上传什么样的数据拥有最终决定权。也许是这样的：

```
Name:   • String
        ◦ Number
        ◦ Date

Age:    ◦ String
        • Number
        ◦ Date

Address:• String
        ◦ Number
        ◦ Date 
```

# cross-domain-policy - 随着 CORS 安全模型的实施，跨域扩展“权限”特权会被淘汰还是废止？

> ID：13569725
> 
> 赞同：1
> 
> 时间：2012-11-26T17:12:13.410
> 
> 标签：cross-domain-policy

我参考了下面的链接，但提供的答案不是决定性的。如果实际上从网站提供商的角度来看，CORS 的目的是限制对其网页数据的编程访问，那么他们将不愿意授予服务器端权限。在这种情况下，我看不到本地扩展如何覆盖来自服务器的权限。

[CORS 是执行跨域 AJAX 请求的安全方式吗？](https://stackoverflow.com/questions/4850702/is-cors-a-secure-way-to-do-cross-domain-ajax-requests)

# java - 从文本文件中读取大行字符串

> ID：13569728
> 
> 赞同：2
> 
> 时间：2012-11-26T17:12:23.113
> 
> 标签：java, string, memory-leaks, io

我有一个大文本文件，但没有任何换行符。它只包含一个长字符串（包含所有 ASCII 字符的一大行字符串），但到目前为止一切正常，因为我可以用 Java 将整行读入内存，但我想知道是否有内存泄漏问题，因为文件变得如此之大，如 5GB+ 并且程序无法一次将整个文件读入内存，那么在这种情况下，读取此类文件的最佳方法是什么？我们可以把这条巨大的线分成两部分甚至多块吗？

这是我阅读文件的方式

```
 BufferedReader buf = new BufferedReader(new FileReader("input.txt"));
   String line;
   while((line = buf.readLine()) != null){

   } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T17:26:09.457

单个字符串只能有 20 亿个字符长，每个字符将使用 2 个字节，因此如果您可以读取 5 GB 的行，它将使用 10 GB 的内存。

我建议你分块阅读文本。

```
Reader reader = new FileReader("input.txt");
try {
    char[] chars = new char[8192];
    for(int len; (len = reader.read(chars)) > 0;) {
        // process chars.
    }
} finally {
    reader.close();
} 
```

无论文件大小如何，这将使用大约 16 KB。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T17:16:20.823

不会有任何类型的*内存泄漏*，因为 JVM 有自己的垃圾收集器。但是，您可能会用完堆空间。

在这种情况下，最好将流导入和处理成可管理的部分。读取 64MB 左右并重复。

`-Xmx`您还可能会发现将参数添加到调用中很有用`java`，以便增加 JVM 中可用的最大堆空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:19:34.727

最好以块的形式读取文件，然后将这些块连接起来或做任何你想做的事情，因为如果你正在阅读它是一个大文件，你会遇到堆空间问题

一种简单的方法，如下所示

```
 InputStream is;
  OutputStream os;

  byte buffer[] = new byte[1024];
  int read;
  while((read = is.read(buffer)) != -1)
  {
      // do whatever you need with the buffer
  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:41:27.797

除了分块读取之外，您还可以使用 java.nio.MappedByteBuffer 查看文件的内存映射区域。您仍将被限制为 Integer.MAX_VALUE 的最大缓冲区大小。如果您将在一个块中进行分散访问，这可能比显式读取块更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-19T03:39:05.307

要从文件中读取块或将相同的内容写入某个文件，可以使用：

```
{
in = new FileReader("input.txt");
out = new FileWriter("output.txt");
char[] buffer = new char[1024];
int l = 0;
while ( (l = in.read(buffer)) > 0 ) {
    out.write(buffer, 0, l);
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-26T17:24:36.903

您不会遇到任何内存泄漏问题，但可能会遇到堆空间问题。为避免堆问题，请使用缓冲区。

这完全取决于您当前阅读该行的方式。使用缓冲区可以避免所有堆问题。

```
public void readLongString(String superlongString, int size, BufferedReader in){
  char[] buffer = new char[size];
  for(int i=0;i<superlongString.length;i+=size;){
       in.read(buffer, i, size)
       //do stuff 
     }
} 
```

# ios - iOS 显示标题和段落

> ID：13569729
> 
> 赞同：0
> 
> 时间：2012-11-26T17:12:24.710
> 
> 标签：ios

我想在一个包含标题和段落的 ios 应用程序中编写一个视图。它看起来很像带有 h1 标签和 p 标签的 HTML 页面，我如何让它们在 iOS 中看起来像这样？我应该使用哪些控件？我更喜欢使用 UI Builder 而不是代码中的动态对象的答案。

我尝试的是使用标签，但效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:15:18.230

Why didn't labels work? I would recommend subclassing UIView to hold two labels (heading and paragraph) and style them appropriately. You'll need to specify what your issues with the labels were and what exactly you're trying to accomplish if you need further advice.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:27:02.900

这样做的长期方法是使用多个标签（UILabel），每个标签都有不同的样式/字体/颜色。这并不难，但是对于多行标签，iOS 会尝试为您垂直居中文本，因此您必须在代码中布置标签的高度，使用`sizeWithFont:forWidth:lineBreakMode:`，然后您必须在代码中正确定位标签。

我必须强调，这并不难做到。这很乏味，但它有效。

但是，在 iOS 6 中，问题完全解决了：您可以只使用 NSAttributedString。这使您可以创建*一个*由不同样式/字体/颜色的多个段落组成的字符串，这是一种真正的方式，我们之前尝试使用多个 UILabel 对象进行模拟。您可以指定边距、段落之间的间距等 - 整个作品。这是梦幻般的。

我建议您观看有关 iOS 6 中属性字符串的 WWDC 2012 视频。但是，不要相信他们反复强调 UILabel 是您显示属性字符串的权力所在。例如，我发现在重写我的应用程序时，多段属性字符串并不总是能很好地与 UILabel 配合使用。因此，我发现最简单的方法`drawRect:`是使用新的 NSAttributedString`drawWithRect:options:context:`方法直接在自定义视图中绘制属性字符串。

# node.js - 猫鼬虚拟二传手 - 如何知道它的完成？

> ID：13569730
> 
> 赞同：0
> 
> 时间：2012-11-26T17:12:34.423
> 
> 标签：node.js, mongoose

有没有办法知道猫鼬虚拟二传手何时完成“设置”？

例如：

```
schema.virtual('file").set(function(fileObj) {
    var that = this;
    var dst = '/somewhere/else.txt';
    fs.rename(fileObj.path, dst, function(err) {
       that.set("file.path", dst);
       that.markModified('file');
       //here i would like to know that the setter finished doing stuff so can potentially save my object
    } 
}); 
```

我面临的问题是，当我设置`file`我的猫鼬模型的属性时，我无法知道重命名何时完成，所以当我保存我的对象时，设置器代码可能还没有完成运行。

**我知道我可以在设置文件的模型上创建一个方法，但是有没有办法在设置器中做到这一点？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:32:28.263

您的选择是：

1.  使用[`fs.renameSync`](http://nodejs.org/api/fs.html#fs_fs_renamesync_oldpath_newpath)而不是`fs.rename`作为虚拟设置方法必须是同步的。
2.  `fs.rename`切换到一个实例方法（正如你提到的），它可以接受你的方法在完成时调用的回调参数。

# php - PHP if else - 尝试从 3 个潜在值中进行选择

> ID：13569733
> 
> 赞同：-4
> 
> 时间：2012-11-26T17:12:44.040
> 
> 标签：php, if-statement

```
echo $link['Theme'];
 if(empty($link['Theme']))
 global $Theme;
 { echo $Theme; };
 if(empty($Theme))
 { echo 'default'; }; 
```

`$link`从数据库中提取数据。`$Theme`是较高页面上的一个可选变量，我真的希望将其作为存储在数据库中的主题的覆盖。

目前，我将其设置为打印`$Theme`数据库中的主题是否为 NULL。

我尝试添加另一个 if 语句，如果 中没有值`$Theme`，它会简单地打印 'default' 来加载默认设计。

当前，最后一个 if 语句使其打印`$link['Theme'}`+ 默认（如 spacedefault 而不仅仅是空格或默认）

有人可以帮我弄这个吗？我还不是很擅长 php。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:19:08.097

我相信您正在寻找以下条件

```
global $Theme;
if (empty($link['Theme'])) {
  if (empty($Theme)) {
    echo 'default';
  } else {
    echo $Theme;
  }
} else {
  echo $link['Theme'];
} 
```

如果您要使用内联条件，这里有两行代码

```
global $Theme;
echo empty($link['Theme']) ? (empty($Theme) ? 'default' : $Theme) : $link['Theme']; 
```

# java - 如何为 r.js 提供伪文件系统？

> ID：13569734
> 
> 赞同：1
> 
> 时间：2012-11-26T17:12:45.653
> 
> 标签：java, javascript, requirejs, sandbox, rhino

好的，所以[r.js](https://github.com/jrburke/r.js/)可以在[Rhino](https://developer.mozilla.org/en-US/docs/Rhino)上运行。这是伟大的。

去做它需要做的事情。

在 rhino 上，它基本上使用`java.io.File`,`java.io.FileOutputStream`并`java.io.FileInputStream`实现它需要做的文件系统修改。

（背景：我正在努力为基于 Maven 的 Java/Javascript 开发人员提供更好的开发体验。作为 Maven，既有约定的力量，也有固执己见的力量。你可以在[jszip.org](http://jszip.org)上看到进展。）

所以我想要做的是让磁盘结构神奇地作为虚拟文件系统出现。

所以在磁盘上我们会有这样的结构：

```
/
/module1/src/main/js/controllers/controller.js
/module2/src/main/js/models/model.js
/module3/src/main/js/views/view.js
/webapp/src/build/js/profile.js
/webapp/src/main/js/main.js
/webapp/src/main/webapp/index.html 
```

`/webapp/src/build/js/profile.js`应该看起来像这样：

```
({
    appDir: "src",
    baseUrl:".",
    dir: "target",
    optimize: "closure",
    modules:[
        {
            name:"main"
        }
    ]
}) 
```

这样

*   当 r.js 要求时，`new File("src/main.js")`我实际上会给它`new File("/webapp/src/main/js/main.js")`

*   当它要求时，`new File("profile.js")`我会给它`new File("/webapp/src/build/js/profile.js")`

*   当它要求时，`new File("controllers/controller.js")`我会给它`new File("/module1/src/main/js/controllers/controller.js")`

*   当它要求时，`new File("target")`我会给它`new File("/webapp/target/webapp-1.0-SNAPSHOT")`。

我编写所需的三个模拟类没有问题，即用于代替`java.io.File`,`java.io.FileInputStream`和`java.io.FileOutputStream`,的类

诸如此类的一些问题[的](https://stackoverflow.com/questions/93911/how-can-you-run-javascript-using-rhino-for-java-in-a-sandbox)答案指向诸如 ClassShutter 之类的东西，我可以看到我可以像这样使用它：

```
 context.setClassShutter(new ClassShutter() {
            public boolean visibleToScripts(String fullClassName) {
                if (File.class.getName().equals(fullClassName)) return false;
                if (FileOutputStream.class.getName().equals(fullClassName)) return false;
                if (FileInputStream.class.getName().equals(fullClassName)) return false;
                return true;
            }
        }); 
```

隐藏原始实现。

然后问题是让 Rhino 解决沙盒等价物......我不断得到

```
TypeError: [JavaPackage java.io.File] is not a function, it is object. 
```

即使我在调用之前先执行`java.io.File = org.jszip.rhino.SandboxFile`map 我的沙盒实现而不是现在丢失的`java.io.File`

`r.js`我什至可以考虑在编译之前对加载的文件使用搜索和替换......但我觉得必须有更好的方法。

有没有人有任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:07:05.333

好的，经过大量实验，这似乎是这样做的方法：

```
Scriptable scope = context.newObject(global);
scope.setPrototype(global);
scope.setParentScope(null);

NativeJavaTopPackage $packages = (NativeJavaTopPackage) global.get("Packages");
NativeJavaPackage $java = (NativeJavaPackage) $packages.get("java");
NativeJavaPackage $java_io = (NativeJavaPackage) $java.get("io");

ProxyNativeJavaPackage proxy$java = new ProxyNativeJavaPackage($java);
ProxyNativeJavaPackage proxy$java_io = new ProxyNativeJavaPackage($java_io);
proxy$java_io.put("File", scope, get(scope, "Packages." + PseudoFile.class.getName()));
proxy$java_io.put("FileInputStream", scope,
        get(scope, "Packages." + PseudoFileInputStream.class.getName()));
proxy$java_io.put("FileOutputStream", scope,
        get(scope, "Packages." + PseudoFileOutputStream.class.getName()));
proxy$java.put("io", scope, proxy$java_io);
scope.put("java", scope, proxy$java); 
```

有一个辅助方法：

```
private static Object get(Scriptable scope, String name) {
    Scriptable cur = scope;
    for (String part : StringUtils.split(name, ".")) {
        Object next = cur.get(part, scope);
        if (next instanceof Scriptable) {
            cur = (Scriptable) next;
        } else {
            return null;
        }
    }
    return cur;
} 
```

`ProxyNativeJavaPackage`像这样的东西在哪里

```
public class ProxyNativeJavaPackage extends ScriptableObject implements Serializable {
    static final long serialVersionUID = 1L;

    protected final NativeJavaPackage delegate;
    private final Map<String, Object> mutations = new HashMap<String, Object>();

    public ProxyNativeJavaPackage(NativeJavaPackage delegate) {
        delegate.getClass();
        this.delegate = delegate;
    }

    @Override
    public String getClassName() {
        return delegate.getClassName();
    }

    @Override
    public boolean has(String id, Scriptable start) {
        return mutations.containsKey(id) ? mutations.get(id) != null : delegate.has(id, start);
    }

    @Override
    public boolean has(int index, Scriptable start) {
        return delegate.has(index, start);
    }

    @Override
    public void put(String id, Scriptable start, Object value) {
        mutations.put(id, value);
    }

    @Override
    public void put(int index, Scriptable start, Object value) {
        delegate.put(index, start, value);
    }

    @Override
    public Object get(String id, Scriptable start) {
        if (mutations.containsKey(id)) {
            return mutations.get(id);
        }
        return delegate.get(id, start);
    }

    @Override
    public Object get(int index, Scriptable start) {
        return delegate.get(index, start);
    }

    @Override
    public Object getDefaultValue(Class<?> ignored) {
        return toString();
    }

    @Override
    public String toString() {
        return delegate.toString();
    }

    @Override
    public boolean equals(Object obj) {
        if (obj instanceof ProxyNativeJavaPackage) {
            ProxyNativeJavaPackage that = (ProxyNativeJavaPackage) obj;
            return delegate.equals(that.delegate) && mutations.equals(that.mutations);
        }
        return false;
    }

    @Override
    public int hashCode() {
        return delegate.hashCode();
    }
} 
```

这仍然将原始类留在`Packages.java.io.File`etc，但对于`r.js`要求这已经足够了，其他人应该可以将此技巧扩展到一般情况。

# javascript - onchange 事件侦听器未在文本框上触发

> ID：13569736
> 
> 赞同：3
> 
> 时间：2012-11-26T17:12:48.447
> 
> 标签：javascript, jquery, ajax, onchange

我的表单有一个包含国家/地区的下拉列表，该列表执行 AJAX 回发并呈现另一个带有城市的下拉列表。

我有一个文本框字段电话号码，它已经分配了一个事件侦听器，出于调试目的，它只是向屏幕抛出一个警报消息框。

方案 1

加载表单时，使用登录的用户国家/地区预先选择国家下拉列表，并且还预先呈现文本框字段电话号码。然后我对这个电话号码文本框进行了更改，每次都会弹出警报框。即事件似乎一直在触发。

场景 2 - 问题

在场景 1 之后，如果用户更改国家/地区选择，则会出现 ajaxpostback 并且当表单完成呈现时，并且当我在文本框电话号码中进行另一次更改时，该事件不再触发，任何想法为什么？

代码：事件监听器注册

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>

<script>
    $(document).ready(function () {
        document.getElementById("ctl00_ContentPlaceHolder1_officePhone_txtInput").addEventListener("change", phoneNumberParser, true);
        document.getElementById("ctl00_ContentPlaceHolder1_country_cbInput_Input").addEventListener("change", triggerCountryChange);
        //alert(document.getElementById("ctl00_ContentPlaceHolder1_officePhone_txtInput").value);
        //$("ctl00_ContentPlaceHolder1_officePhone_txtInput").bind("onchange", phoneNumberParser);
    });
          </script> 
```

onChange 代码

```
<script>
var selectedcountrycodeval;

    function triggerCountryChange() {

        //var phoneNumber = document.getElementById("ctl00_ContentPlaceHolder1_officePhone_txtInput").value;
        //alert(phoneNumber);
        //ctl00$ContentPlaceHolder1$country$cbInput_Input  country name input tag
        var regionCode = document.getElementById("ctl00_ContentPlaceHolder1_country_cbInput_Input").value;
        alert(regionCode);
        regionCode = getCountry(regionCode);
        selectedcountrycodeval = regionCode;
        alert(regionCode);
        //document.getElementById("ctl00_ContentPlaceHolder1_officePhone_txtInput").addEventListener("change", phoneNumberParser);
        //alert(document.getElementById("ctl00_ContentPlaceHolder1_officePhone_txtInput").addEventListener);
        //document.getElementById("ctl00_ContentPlaceHolder1_country_cbInput_Input").addEventListener("change", triggerCountryChange);
    }
    function phoneNumberParser() {

        alert(selectedcountrycodeval);
        var phoneNumber = document.getElementById("ctl00_ContentPlaceHolder1_officePhone_txtInput").value;
        alert(phoneNumber);
}
</script> 
```

表单值

国家

```
<INPUT style="WIDTH: 220px" 
      id=ctl00_ContentPlaceHolder1_country_cbInput_Input 
      class=ComboBoxInput_WindowsXP tabIndex=1 value="United Kingdom" 
      name=ctl00$ContentPlaceHolder1$country$cbInput_Input></INPUT> 
```

电话

```
<INPUT style="WIDTH: 221px" 
      id=ctl00_ContentPlaceHolder1_officePhone_txtInput class=inputTextBox 
      tabIndex=1 value="+44 (20) 8222-2662" maxLength=64 
      name=ctl00$ContentPlaceHolder1$officePhone$txtInput > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:26:30.213

看起来您似乎在刷新表单后添加了电话号码输入。对于这种情况，最好**委托**事件。

```
$(document).on('change' , '[id*="officePhone_txtInput"]', phoneNumberParser ); 
```

# javascript - 如何在 jQuery 中构建滑动菜单

> ID：13569738
> 
> 赞同：0
> 
> 时间：2012-11-26T17:12:54.827
> 
> 标签：javascript, jquery, css, html

这是我当前的代码，但我试图实现类似 [http://www.fullyillustrated.com上的悬停效果](http://www.fullyillustrated.com)

它有蓝色发光的东西，它悬停在你鼠标所在的任何页面上，当你把鼠标移到你所在的任何页面上时

```
<nav>
  <ul>
    <li> Hover </li>
    <li>Me </li>
  </ul>
</nav>​ 
```

CSS 代码

```
body {
   padding: 50px;
}

li {
   float: left;
   padding: 20px;
   background: #ddd;
   cursor: pointer;
}

li:hover {
   background: #999;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:17:29.800

这可以用 JQuery 来完成，我认为这是最好的方法。我找到了这篇文章，希望它能帮助你：[http ://css-tricks.com/jquery-magicline-navigation/](http://css-tricks.com/jquery-magicline-navigation/)

# jquery - 以编程方式更改融合表多边形颜色

> ID：13569744
> 
> 赞同：0
> 
> 时间：2012-11-26T17:13:11.330
> 
> 标签：jquery, kml, polygon, google-fusion-tables

我有一个融合表，其中包含代表 130 个城市的 130 个多边形的 kml 定义。我想将多边形填充颜色设置为存储在数组中的十六进制值，其中自治市名称匹配。

这是我的代码存根，但填充颜色不起作用。有人对我如何管理这个有任何见解吗？

```
...
getFTData(table_id, 'Name', example_dataHandler);
...

function getFTData(table_id, col_list, successFunction) {

    var query = "SELECT " + col_list + " FROM " + table_id;

    var queryurl = encodeURI(queryUrlHead + query + queryUrlTail);

    $.ajax({
        type: "GET",
        url:  queryurl,
        dataType: "jsonp",  // return CSV FustionTable response as JSON
        success: successFunction,
        error: function () {alert("AJAX ERROR for " + queryurl ); }
    });
}
function example_dataHandler(d) {
    // get the actual data out of the JSON object
    var rows = d.table.rows;
    var row_count = 0;
    layer = new google.maps.FusionTablesLayer({
        query: 
        {
            select: 'geometry',
            from: '11KMJrKcQ4f729YGbcUoe4lvp66JKZhB0pJ-3w9k'
        },
        options:
        {
        suppressInfoWindows: true
        }
    });

    for (var i = 0; i < rows.length; i++) {

        // Per the expected columns
        for(j=0; j < rows[i].length; j++)
        {
            styles: [{
              where: "'Name' = '" + rows[i][j] + "'",
              polygonOptions: {
                fillColor: countyColors[row_count],
                strokeColor: "#FFFFFF",
                strokeWeight: 3
              }
            }]

        }
        row_count++;
    }

    layer.setMap(map);   

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T20:44:14.863

我用你的桌子创建了一个简单的例子，并且可以工作。

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>Fusion Tables</title>
    <style type="text/css">
      html, body,#map_canvas {
        margin: 0;
        padding: 0;
        width : 100%;
        height: 100%;
      }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
      var map, layer;
      function initialize() {
        map = new google.maps.Map(document.getElementById('map_canvas'), {
          center : new google.maps.LatLng(40.42127, -80.098181),
          zoom : 10,
          mapTypeId : google.maps.MapTypeId.ROADMAP,
          noClear : true
        });

        var selectEle = document.getElementById("colorSelector");
        map.controls[google.maps.ControlPosition.TOP_LEFT].push(selectEle);
        google.maps.event.addDomListener(selectEle, "change", onColorSelect_changed);

        layer = new google.maps.FusionTablesLayer({
          map : map,
          query : {
            select : "geometry",
            from : "11KMJrKcQ4f729YGbcUoe4lvp66JKZhB0pJ-3w9k"
          }
        });
      }

      function onColorSelect_changed() {
        var options = {
          styles : []
        };
        var styles = [];
        var selectEle = this;

        if (selectEle.selectedIndex == 0) {
          return;
        }

        options.styles.push({
            where: "'Name' = 'Pittsburgh'",
            polygonOptions: {
              fillColor: selectEle.value,
              strokeColor: "#FFFFFF",
              strokeWeight: 3
            }
          });
        layer.setOptions(options);
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>

    <div id="map_canvas">
      <select id="colorSelector">
        <option >--Select color--</option>
        <option value="#ffff00">#FFFF00</option>
        <option value="#ff00ff">#FF00FF</option>
        <option value="#f0f0f0">#F0F0F0</option>
      </select>

    </div>
  </body>
</html> 
```

![在此处输入图像描述](../Images/36c7fc19926bd35508f88bab188f9ec3.png)

# opencv - Setting up OpenCV 2.4.3 & Microsoft Visual Studio 2012 ( Win8 x64 )

> ID：13569757
> 
> 赞同：2
> 
> 时间：2012-11-26T17:13:42.413
> 
> 标签：opencv, windows-8, visual-studio-2012

I want to configure **opencv** with **Visual Studio 2012** on **Windows 8 x64**.
I configured **opencv** and there is no compilation errors, but when I execute my program I get this error :

> The program can’t start because **MSVCR100D.dll** is missing from your computer

I tried to install **Visual C++ Redistributable for Visual Studio 2012** and **Microsoft Visual C++ 2010 Redistributable Package (x64)** but always the same error.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:34:57.307

如果它仍然相关，请尝试本教程来创建项目并配置 OpenCV 目录：

[http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-7-64-bit/](http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-7-64-bit/)

它在带有 Visual Studio 2012 和 OpenCV 2.4.3 的 Windows 8 (x64) 上为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T13:48:11.070

[按照http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-](http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-7-64-bit/)中所述在 Visual Studio 中配置路径和库后[7-64 位/](http://karanjthakkar.wordpress.com/2012/11/21/usin-opencv-2-4-2-with-visual-studio-2012-on-windows-7-64-bit/)您需要从[http://www.microsoft.com/en-us/download/details.aspx?id=30679安装 Visual C++ Redistributable for Visual Studio 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30679)

重启电脑后，opencv 代码可以在 Release 模式下执行。如果您需要在 Debug 模式下执行代码，则必须使用“D”安装 Redistributable 版本。

这适用于 Opencv 2.4.6、Windows 8.1 和 VS 2012 Desktop。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:20:50.733

我自己没有任何 Windows 8 经验，我认为[这篇](http://villavu.com/forum/showthread.php?t=82512)文章可以解决您的问题。

基本上它说 Win 8 的默认系统文件夹是 c:\windows\system，与早期系统上的 c:\windows\system32 不同。可再发行组件可能安装到旧系统目录，因此您必须手动将 dll 移动到正确的文件夹。

您也可以在 PC 上搜索文件并将其放入程序的工作文件夹中。在大多数情况下，这是输出文件夹，如果您在 VS 中以调试模式运行它，它也可以是项目文件夹。

# javascript - Loading html from a different domain using easyXDM

> ID：13569758
> 
> 赞同：1
> 
> 时间：2012-11-26T17:13:50.177
> 
> 标签：javascript, jquery, easyxdm

I am trying to load html from a different site using easyXDM, but it does not work for me when I try to do it through HTTP GET.

Does anyone know what is the cause for the problem?

```
<script type="text/javascript">
    jQuery.support.cors = true;
    var rpc = new easyXDM.Rpc({
        remote: "http://anything.com"
    },
    {
        remote: {
            request: {}
        }
    });

    rpc.request({
        url: "/default.aspx",
        method: "GET"
    }, function (response) {
        alert(response);
    });

</script> 
```

​</p>

Thanks.

# c# - Html：PHP、C# 和 JS 格式化程序

> ID：13569766
> 
> 赞同：-4
> 
> 时间：2012-11-26T17:14:24.120
> 
> 标签：c#, php, javascript, jquery, html

我正在寻找这样的东西

[http://ycouriel.blogspot.nl/2010/02/add-c-code-formatter-widget-to-your.html](http://ycouriel.blogspot.nl/2010/02/add-c-code-formatter-widget-to-your.html)

但随后是一个可以格式化 PHP、C# 和 Javascript 的库

如果没有这样的解决方案，有谁知道我在哪里可以找到上述脚本的 JS 和 PHP 版本？

现在已经挖了几个小时......所以任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:17:00.143

这是一个支持 54 种编程语言的 js 库。[亮点.JS](http://softwaremaniacs.org/soft/highlight/en/)

# xml - XSLT assistance - repeating data

> ID：13569768
> 
> 赞同：1
> 
> 时间：2012-11-26T17:14:33.340
> 
> 标签：xml, xslt, repeat

I have an issue where there is no useful tags associated with some data, the data is included at the head of the document, but I can not get this to look how I want.

I've had the Column1 text replacing the tags, but as they are all labelled , it doesn't help much. I'm slowly learning how XSLTs work, but this is beyond my knowledge.

Any assistance would be appreciated.

**Input data**

```
<results>
<header>
    <a>Column 1 Customer Name</a>
    <a>Column 2 Customer Add</a>
    <a>Column3</a>
    <a>Column4</a>
</header>
<body>
    <line>
        <a>Data1</a>
        <a>Data2</a>
        <a>Data3</a>
        <a>Data4</a>
    </line>
    <line>
        <a>Data1</a>
        <a>Data2</a>
        <a>Data3</a>
        <a>Data4</a>
    </line>
</body>
</results> 
```

>

**Required XML**

```
 <?xml version="1.0"?>
<results>
<header>
    <a>Column 1 Customer Name</a>
    <a>Column 2 Customer Add</a>
    <a>Column3</a>
    <a>Column4</a>
</header>
<body>
    <line>
        <Column1CustomerName>Data1</Column1CustomerName>
        <Column2CustomerAdd>Data2</Column2CustomerAdd>
        <Column3>Data3</Column3>
        <Column4>Data4</Column4>
    </line>
    <line>
        <Column1CustomerName>Data1</Column1CustomerName>
        <Column2CustomerAdd>Data2</Column2CustomerAdd>
        <Column3>Data3</Column3>
        <Column4>Data4</Column4>
    </line>
</body>
</results> 
```

Following on from a users response, I have implemented the following XSLT:

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="utf-8" indent="yes"/>

<xsl:template match="/results">
<results>
<xsl:copy-of select="header"/>
<body>
  <xsl:for-each select="body/line">
    <line>
      <xsl:for-each select="a">
        <xsl:variable name="index" select="position()" />
        <xsl:element name="{//header/a[$index]}">
          <xsl:value-of select="." />
        </xsl:element>
      </xsl:for-each>
    </line>
  </xsl:for-each>
 </body>
 </results>
</xsl:template>
</xsl:stylesheet> 
```

My problem now is if a header contains a space, as this causes the style sheet to try and create an XML tag with a space in.

I've tried using the replace function, which has been suggested.

```
<xsl:element name="{replace(//cols/c[$index],' ','')}"> 
```

And I seem to be getting this wrong, or calling this in the wrong place.

Thanks for everyone's input.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T18:25:41.973

你需要`<xsl:element>`做的伎俩。

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" encoding="utf-8" indent="yes"/>

<xsl:template match="/results">
  <results>
    <xsl:copy-of select="header"/>
    <body>
      <xsl:for-each select="body/line">
        <line>
          <xsl:for-each select="a">
            <xsl:variable name="index" select="position()" />
            <xsl:element name="{replace(//header/a[$index], ' ', '')}">
              <xsl:value-of select="." />
            </xsl:element>
          </xsl:for-each>
        </line>
      </xsl:for-each>
    </body>
  </results>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:41:56.777

这是一个完全“面向推送”的解决方案（专注于 and 的使用`<xsl:template>`，`<xsl:apply-templates>`不明确使用诸如`<xsl:value-of>`等元素提取数据）解决方案，它不使用`<xsl:for-each>`.

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="@*|node()">
     <xsl:copy>
       <xsl:apply-templates select="@*|node()" />
     </xsl:copy>
  </xsl:template>

  <xsl:template match="line/a">
    <xsl:variable name="vPos" select="position()" />
    <xsl:element name="{/*/header/a[$vPos]}">
      <xsl:apply-templates />
    </xsl:element>
  </xsl:template>

</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<results>
  <header>
    <a>Column1</a>
    <a>Column2</a>
    <a>Column3</a>
    <a>Column4</a>
  </header>
  <body>
    <line>
      <a>Data1</a>
      <a>Data2</a>
      <a>Data3</a>
      <a>Data4</a>
    </line>
    <line>
      <a>Data1</a>
      <a>Data2</a>
      <a>Data3</a>
      <a>Data4</a>
    </line>
  </body>
</results> 
```

**...产生了想要的答案：**

```
<?xml version="1.0"?>
<results>
  <header>
    <a>Column1</a>
    <a>Column2</a>
    <a>Column3</a>
    <a>Column4</a>
  </header>
  <body>
    <line>
      <Column1>Data1</Column1>
      <Column2>Data2</Column2>
      <Column3>Data3</Column3>
      <Column4>Data4</Column4>
    </line>
    <line>
      <Column1>Data1</Column1>
      <Column2>Data2</Column2>
      <Column3>Data3</Column3>
      <Column4>Data4</Column4>
    </line>
  </body>
</results> 
```

# mysql - 如何使 JOIN 查询中的 ORDER BY 更快？我试过的都没有奏效

> ID：13569769
> 
> 赞同：20
> 
> 时间：2012-11-26T17:14:38.117
> 
> 标签：mysql, join, sql-order-by, query-optimization

我有以下 JOIN 查询：

```
SELECT
    table1.*, 
    table2.*
FROM 
    Table1 AS table1 
LEFT JOIN 
    Table2 AS table2 
USING 
    (col1)
LEFT JOIN 
    Table3 as table3 
USING 
    (col1) 
WHERE 
    3963.191 * 
    ACOS(
    (SIN(PI() * $usersLatitude / 180) * SIN(PI() * table3.latitude / 180)) 
    +
    (COS(PI() * $usersLatitude / 180) * COS(PI() * table3.latitude / 180) * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180))
    ) <= 10 
AND 
    table1.col1 != '1' 
AND 
    table1.col2 LIKE 'A' 
AND 
    (table1.col3 LIKE 'X' OR table1.col3 LIKE 'X-Y') 
AND 
    (table2.col4 = 'Y' OR table2.col5 = 'Y') 

// Data Types of all columns in the query:
// col1: int(11)
// col2: char(1)
// col3: varchar(3)
// col4: char(1)
// col5: char(1)
// col6: int(11)
// latitude: varchar(25)
// longitude: varchar(25)

// All 3 tables (table1, table2, and table3) are `MyISAM`. 
```

它在**0.15 秒内**执行。

但是，如果我简单地添加：

```
ORDER BY 
    table1.col6 DESC 
```

它执行超过**3 秒**。

**查询中的所有**列都被**索引**，包括`table1.col6`在`ORDER BY`.

以下是`EXPLAIN EXTENDED` **WITHOUT** `ORDER BY`的结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  table1  ALL PRIMARY,col2,col3   NULL    NULL    NULL    140101  72.61   Using where
1   SIMPLE  table2  eq_ref  PRIMARY,col4,col5   PRIMARY 4   table1.col1 1   100 Using where
1   SIMPLE  table3  eq_ref  PRIMARY PRIMARY 4   table1.col1 1   100 Using where 
```

这是`EXPLAIN EXTENDED` **WITH** `ORDER BY`的结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  table1  ALL PRIMARY,col2,col3   NULL    NULL    NULL    140101  72.61   Using where; Using filesort
1   SIMPLE  table2  eq_ref  PRIMARY,col4,col5   PRIMARY 4   table1.col1 1   100 Using where
1   SIMPLE  table3  eq_ref  PRIMARY PRIMARY 4   table1.col1 1   100 Using where 
```

奇怪的是，我`ORDER BY DESC`在此站点上的其他几个查询中使用它，它并没有像使用这个特定查询那样减慢它的速度。这个查询有一些特定的东西导致它随着`ORDER BY`.

我也在`ANALYZE TABLE`所有 3 张桌子上做了一个，他们都报告了`OK`。`LIKE`然后我将查询中的every 替换为`=`它实际上使查询没有`ORDER BY`从**0.2 seconds**变为**3 seconds**。换句话说，替换`LIKE`为`=`使原始查询花费与添加*一样长*`ORDER BY`的时间！这怎么可能，考虑到`LIKE`做更多的工作比`=`？也许这就是为什么`ORDER BY`需要这么长时间的线索？

**这是我迄今为止尝试过的（不成功）：**

1) 而不是`SELECT table1.*, table2.*`，我只是尝试了`SELECT table1.col1`，但*仍然*需要**3 多秒**才能完成。

2) 我尝试在、、和in上添加**复合索引**，但并没有提高执行速度。`col1``col2``col3``col6``Table1`

3）我尝试了将查询作为子查询然后在最后包装外部的[**解决方案**](https://stackoverflow.com/questions/884661/slow-query-when-using-order-by)`ORDER BY`，但它并没有提高执行速度。

4）我尝试了以下版本的查询，但它没有改进任何东西，并且实际上使查询花费了**3 秒**以上，甚至没有`ORDER BY`添加到它（也许这提供了另一个线索）：

```
SELECT STRAIGHT_JOIN
      T1.*, 
      T2.*
   FROM 
      Table1 AS T1
         JOIN Table2 AS T2
            ON T1.Col1 = T2.Col1
            AND ( T2.Col4 = 'Y' OR T2.Col5 = 'Y' )
         JOIN Table3 as T3
            ON T1.Col1 = T3.Col1
            AND 3963.191 
               * ACOS(  (SIN(PI() * $usersLatitude / 180) * SIN(PI() * T3.latitude / 180)) 
                                + (  COS(PI() * $usersLatitude / 180) * COS(PI() * T3.latitude / 180) 
                                   * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180)
                        )   
                     ) <= 10 
   WHERE
          T1.Col2 LIKE 'A'
      AND ( T1.col3 LIKE 'X' OR T1.col3 LIKE 'X-Y') 
      AND T1.Col1 != '1'
   ORDER BY
      T1.Col6

// With the following composite indexes:
// On Table 1, index on ( Col2, Col3, Col1, Col6 )
// On Table 2, index on ( Col1, Col4, Col5 )

// Remember, all individual columns are already indexed. 
```

...

**我怎样才能让这个顽固的查询快速运行`ORDER BY`？** 或者那是不可能的？

* * *

**编辑：**

`SHOW CREATE TABLE`所有 3 个表的结果：

```
CREATE TABLE `Table1` (
 `col1` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `col100` varchar(25) CHARACTER SET utf8 DEFAULT NULL,
 `col101` varchar(60) COLLATE utf8_bin DEFAULT NULL,
 `col102` varchar(50) CHARACTER SET utf8 DEFAULT NULL,
 `col103` varchar(10) COLLATE utf8_bin DEFAULT '00000000',
 `col104` date NOT NULL,
 `col105` int(3) DEFAULT NULL,
 `col106` varchar(25) COLLATE utf8_bin DEFAULT NULL,
 `col107` varchar(20) COLLATE utf8_bin DEFAULT 'Blah',
 `col108` varchar(2) COLLATE utf8_bin DEFAULT 'No',
 `col109` varchar(15) COLLATE utf8_bin DEFAULT 'Blah',
 `col2` enum('A','B') COLLATE utf8_bin DEFAULT NULL,
 `col3` enum('A','B','A-B') COLLATE utf8_bin DEFAULT NULL,
 `col110` decimal(10,7) NOT NULL DEFAULT '0.0000000',
 `col111` decimal(10,7) NOT NULL DEFAULT '0.0000000',
 `col112` char(1) COLLATE utf8_bin DEFAULT 'N',
 `col113` char(1) COLLATE utf8_bin DEFAULT 'N',
 `col114` int(11) DEFAULT NULL,
 `col115` varchar(15) COLLATE utf8_bin DEFAULT 'Blah',
 `col6` int(11) DEFAULT NULL,
 `col117` varchar(45) COLLATE utf8_bin DEFAULT NULL,
 `col118` varchar(2) COLLATE utf8_bin NOT NULL,
 `col119` tinyint(2) NOT NULL,
 `col120` int(6) NOT NULL,
 `col121` varchar(7) COLLATE utf8_bin NOT NULL,
 `col122` varchar(6) COLLATE utf8_bin NOT NULL,
 `col123` char(1) COLLATE utf8_bin NOT NULL DEFAULT 'A',
 `col124` varchar(200) COLLATE utf8_bin NOT NULL,
 `col125` tinyint(4) NOT NULL,
 `col126` tinyint(1) NOT NULL,
 `col127` varchar(1) COLLATE utf8_bin NOT NULL DEFAULT 'A',
 `col128` tinyint(1) NOT NULL DEFAULT '0',
 `col129` smallint(5) unsigned NOT NULL,
 `col130` varchar(1) COLLATE utf8_bin NOT NULL DEFAULT 'A',
 `col131` int(11) NOT NULL,
 `col132` tinyint(1) NOT NULL,
 `col133` tinyint(1) NOT NULL,
 `col134` varchar(1) COLLATE utf8_bin NOT NULL,
 `col135` varchar(200) COLLATE utf8_bin NOT NULL,
 `col136` int(11) NOT NULL,
 `col137` int(10) unsigned NOT NULL,
 `col138` int(11) NOT NULL,
 `col139` tinyint(1) NOT NULL,
 `col140` tinyint(1) NOT NULL,
 `col141` tinyint(4) NOT NULL,
 `col142` varchar(25) COLLATE utf8_bin NOT NULL,
 `col143` varchar(25) COLLATE utf8_bin NOT NULL,
 `col144` tinyint(1) unsigned NOT NULL,
 `col145` tinyint(4) NOT NULL,
 PRIMARY KEY (`col1`),
 KEY `col2` (`col2`),
 KEY `col3` (`col3`),
 KEY `CompositeIndex0` (`col1`,`col2`,`col3`,`col6`),
 KEY `CompositeIndex1` (`col2`,`col3`,`col1`,`col6`),
 KEY `idx01` (`col1`,`col2`,`col3`)
 [19 other indexes that do not involve col1, col2, col3, or col6...]
) ENGINE=MyISAM AUTO_INCREMENT=160640 DEFAULT CHARSET=utf8 COLLATE=utf8_bin

//*******************************************************//

CREATE TABLE `Table2` (
 `col1` int(11) unsigned NOT NULL DEFAULT '0',
 `col201` varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT 'Blah',
 `col202` varchar(45) CHARACTER SET utf8 COLLATE utf8_unicode_ci DEFAULT 'Blah',
 `col203` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col204` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col205` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col206` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col207` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col208` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col209` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col210` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col211` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col212` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col213` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col214` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col215` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col216` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col217` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col218` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col219` varchar(45) COLLATE utf8_bin DEFAULT 'Blah',
 `col220` varchar(255) COLLATE utf8_bin DEFAULT 'Blah',
 `col221` varchar(255) COLLATE utf8_bin DEFAULT 'Blah',
 `col222` varchar(255) COLLATE utf8_bin DEFAULT 'Blah',
 `col223` varchar(255) COLLATE utf8_bin DEFAULT 'Blah',
 `col224` varchar(45) COLLATE utf8_bin DEFAULT ‘Blah’,
 `col225` varchar(255) COLLATE utf8_bin DEFAULT NULL,
 `col4` char(1) COLLATE utf8_bin DEFAULT 'A',
 `col226` char(1) COLLATE utf8_bin DEFAULT 'A',
 `col227` varchar(5) COLLATE utf8_bin DEFAULT 'Blah',
 `col228` char(1) COLLATE utf8_bin NOT NULL,
 `col229` text COLLATE utf8_bin,
 `col5` char(1) COLLATE utf8_bin DEFAULT 'A',
 `col230` varchar(255) COLLATE utf8_bin DEFAULT 'Blah',
 `col231` varchar(255) COLLATE utf8_bin DEFAULT NULL,
 `col232` varchar(255) COLLATE utf8_bin DEFAULT NULL,
 `col233` varchar(255) COLLATE utf8_bin DEFAULT NULL,
 PRIMARY KEY (`col1`),
 KEY `col4` (`col4`),
 KEY `col5` (`col5`),
 KEY `CompositeIndex1` (`col1`,`col4`,`col5`),
 [4 other indexes not involving col1, col4, col5...]
 FULLTEXT KEY `col220` (`col220`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin

//*******************************************************//

CREATE TABLE `Table3` (
 `col1` int(11) unsigned NOT NULL DEFAULT '0',
 `col300` varchar(255) COLLATE utf8_bin DEFAULT NULL,
 `latitude` varchar(25) COLLATE utf8_bin NOT NULL DEFAULT '0',
 `longitude` varchar(25) COLLATE utf8_bin NOT NULL DEFAULT '0',
 `col301` int(11) DEFAULT NULL,
 `static2` float(18,16) DEFAULT '0.0000000000000000',
 `static3` float(18,16) DEFAULT '0.0000000000000000',
 PRIMARY KEY (`col1`),
 KEY `latitude` (`latitude`),
 KEY `longitude` (`longitude`),
 KEY `static2` (`static2`),
 KEY `static3` (`static3`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 COLLATE=utf8_bin 
```

* * *

**编辑2：**

下面是我的**MySQL 配置文件**。除其他事项外，请注意如何`sort-buffer-size`设置为`1M`. 据此，[它](http://ronaldbradford.com/blog/more-on-understanding-sort_buffer_size-2010-05-10/)不应该设置在上面，`256K`否则它实际上可以减慢“37x”的速度。 **这可能是问题的一部分吗？**

```
# The MySQL database server configuration file.

[mysqld]

open-files-limit                = 20000

thread-cache-size               = 16
table-open-cache                = 2048
table-definition-cache          = 512

query-cache-type                = 1
query-cache-size                = 32M
query-cache-limit               = 1M

sort-buffer-size                = 1M
read-buffer-size                = 1M
read-rnd-buffer-size            = 8M
join-buffer-size                = 1M

tmp-table-size                  = 64M 
max-heap-table-size             = 64M

back-log                        = 100
max-connections                 = 200
max-connect-errors              = 10000
max-allowed-packet              = 16M
interactive-timeout             = 600
wait-timeout                    = 180
net_read_timeout        = 30
net_write_timeout       = 30

back_log            = 128

myisam-sort-buffer-size         = 128M

innodb-buffer-pool-size         = 320M
innodb-log-buffer-size          = 4M

innodb-log-file-size           = 128M
innodb-log-files-in-group      = 2

innodb-file-per-table           = 1

[mysqldump]
max-allowed-packet      = 16M 
```

在另一件事上，以下是`EXPLAIN EXTENDED`来自 IVAN 的最新查询的结果：

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   SIMPLE  T1  ref PRIMARY,col2,col3,col1,CompositeIndex1,idx01    CompositeIndex1 2   const   92333   Using where; Using filesort
1   SIMPLE  T3  eq_ref  PRIMARY PRIMARY 4   T1.col1 1   Using where
1   SIMPLE  T2  eq_ref  PRIMARY,CompositeIndex1,idx_static1 PRIMARY 4   T1.col1 1   Using where 
```

在另一件事上，这里有一些非常奇怪的东西。以下版本的 WITH 查询`ORDER BY`只需**0.2 秒**即可完成：

```
SELECT STRAIGHT_JOIN T1 . * , T2 . * 
FROM Table3 AS T3
JOIN Table2 AS T2 ON T3.col1 = T2.col1
AND (
T2.col4 = 'Y'
OR T2.col5 = 'Y'
)
JOIN Table1 AS T1 ON T3.col1 = T1.col1
AND 3963.191 * ACOS( (
SIN( PI( ) * - 87.8819594 /180 ) * SIN( PI( ) * T3.latitude /180 ) ) + ( COS( PI( ) * - 87.8819594 /180 ) * COS( PI( ) * T3.latitude /180 ) * COS( PI( ) * T3.longitude /180 - PI( )* 37.1092162 /180 ) )
) <=10
WHERE T1.col2 LIKE 'A'
AND (
T1.col3 LIKE 'X'
OR T1.col3 LIKE 'X-Y'
)
AND T1.col1 != '1'
ORDER BY T1.col6 DESC 
```

基本上，这个版本的查询执行 a`FROM Table3 AS T3`和`JOIN`表 1 和 2，而原始查询执行的是表 2`FROM Table1 AS T1`和`JOIN`3。

这是`EXPLAIN EXTENDED`上面的查询：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   SIMPLE  T3  ALL PRIMARY NULL    NULL    NULL    141923  100 Using where; Using temporary; Using filesort
1   SIMPLE  T2  eq_ref  PRIMARY,col4,col5,CompositeIndex1   PRIMARY 4   T3.col1 1   100 Using where
1   SIMPLE  T1  eq_ref  PRIMARY,col2,col3,col1,CompositeIndex1,idx01    PRIMARY 4   T2.col1 1   100 Using where 
```

注意这个查询实际上是如何对来自 Ivan 的原始查询和新查询 同时执行 a`filesort`和 a `temporary`vs. 的。**怎么能快 10 倍？**`filesort`

 **更奇怪的是，切换顺序`JOIN`似乎并没有改善原始查询和来自 Ivan 的新查询。 **这是为什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:54:56.910

好吧，我建议你对查询进行一些重新设计：

1.  放入与连接无关的条件，请参阅第二个查询：

    和（T1.col3 喜欢 'X' 或 T1.col3 喜欢 'XY'）

2.  避免**或**使用 IN

3.  避免**喜欢**使用**=**

    AND T1.col3 IN ('X' , 'XY')

4.  避免计算 where

创建一些新列来存储：

```
SIN(PI() * T3.latitude / 180)
COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180)
COS(PI() * T3.latitude / 180) 
```

5.  预评估

    SIN(PI() * $usersLatitude / 180) COS(PI() * $usersLatitude / 180)

6.  如果所有这些“技巧”都无法避免*文件排序*强制索引

[mysql查询索引提示](http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)

进一步添加

为了删除：

```
( T2.Col4 = 'Y' OR T2.Col5 = 'Y' ) 
```

在这种情况下，您不能使用**IN**，因此创建一个作为此表达式结果的新列。

```
alter table table2 add static1 bit default 0;
alter table add index idx_static1(static1);
update table2 t2 set static1=1 where ( T2.Col4 = 'Y' OR T2.Col5 = 'Y' );

alter table table3 add static2 float(18,16) default 0;
update table3 set static2=SIN(PI() * T3.latitude / 180) where 1

alter table table3 add static3 float(18,16) default 0;
update table3 set static3 = COS(PI() * T3.latitude / 180) * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180)   where 1 
```

如果**table1.col2**的值很少

```
alter table table1 change col2 col2 enum('A','B','C'); 
```

如果**table1.col3**的值很少

```
alter table table1 change col3 col3 enum('X','Y','X-Y'); 
```

*为涉及的所有*列创建唯一索引，其中 alter table add index idx01 (col1,col2,col3)

```
SELECT STRAIGHT_JOIN
      T1.*, 
      T2.*
   FROM 
      Table1 AS T1
         JOIN Table2 AS T2 ON T1.Col1 = T2.Col1
         JOIN Table3 as T3 ON T1.Col1 = T3.Col1

   WHERE static1=1 AND
          T1.Col2 = 'A'
      AND T1.col3 IN ( 'X', 'X-Y') 
      AND T1.Col1 != 1
      AND ACOS(  
                 ( 
                   $usersLatitude_sin_pi_fract180  * t3.static2 
                   + $usersLatitude_cos_pi_fract180  * t3.static3 
                 )   
               ) <= 0,00252321929476 -- this's 10/3963.191
      ORDER BY T1.Col6 
```

您的评论表明您在查询中有不同的排序规则（col1 是 latin1_swedish 而 col2 是 utf8）或者您的连接使用不同的排序规则（您的连接是 utf-8 并且您查询 latin1_german 列）所以当您查询时：

```
t1.col2 = 'A' 
```

Mysql 必须将每个值从 utf-8 转换为 latin1。

另请参阅 mysql 文档的[整理部分](http://dev.mysql.com/doc/refman/5.1/en/charset-collate.html)。

如果不需要 utf-8，一个快速的方法是将所有（列、表、服务器、连接、客户端）转换为相同的排序规则单字节会更好。

小心我可以做的类型错误或语法错误。

**进一步添加 2**

我在测试数据库上重新创建了表并修复了这些列： t1.col2, t2.col3 **must not nullable**， t1.col1 是主要的，不能为空。

索引“t1.CompositeIndex1”应该只索引：col2，col3，col1；索引“排序依据”列是无用的或最差的。

我创建了 static1 并在 t2.col1 和 t2.static1 上创建了一个索引，但是没有使用我在 DB 中的 6 行（请参阅稍后解释）。t2.static1 也不能为空。

我还将查询调整为列的排序规则：

```
SELECT  T1.*, T2.* 
FROM Table1 AS T1
         JOIN Table2 AS T2   ON ( T1.Col1 = T2.Col1   )
         JOIN Table3 as T3 ON T1.Col1 = T3.Col1
   WHERE  
         (  T1.Col2 =    'A'   collate utf8_bin  AND T1.col3 IN  ( 'X' collate utf8_bin , 'X-Y'  collate utf8_bin )   AND T1.Col1 != 1 )
and T2.static1=1
      AND ACOS(  (   2.3  * T3.static2  + 1.2 * T3.static3  ) ) <= 0.00252321929476 
      ORDER BY T1.Col6 
```

下面是扩展的解释

```
+----+-------------+-------+--------+-----------------------------------+-----------------+---------+----------------+------+----------+-----------------------------+
| id | select_type | table | type   | possible_keys                     | key             | key_len | ref            | rows | filtered | Extra                       |
+----+-------------+-------+--------+-----------------------------------+-----------------+---------+----------------+------+----------+-----------------------------+
|  1 | SIMPLE      | T1    | ref    | PRIMARY,col2,col3,CompositeIndex1 | CompositeIndex1 | 1       | const          |    1 |   100.00 | Using where; Using filesort |
|  1 | SIMPLE      | T2    | eq_ref | PRIMARY,CompositeIndex1           | PRIMARY         | 4       | testdb.T1.col1 |    1 |   100.00 | Using where                 |
|  1 | SIMPLE      | T3    | eq_ref | PRIMARY                           | PRIMARY         | 4       | testdb.T1.col1 |    1 |   100.00 | Using where                 |
+----+-------------+-------+--------+-----------------------------------+-----------------+---------+----------------+------+----------+-----------------------------+ 
```

列是否**相同**：select_type、table、type、key、ref、filtered、Extra？

我的优化目标是： - 适合少数索引中的 where 条件 - 避免计算 - 避免整理转换 - 避免 OR - 在 where 条件下避免 NULL

现在坏消息似乎在表中你有〜140K记录，如果查询涉及很多行，使用顺序查询可能意味着使用文件排序方法，所以最终答案可以按照建议增加memsort缓冲区通过@mavroprovato。

**进一步添加 3**

要评估 key_buffer_size 的充分性，**请**参见[http://dba.stackexchange.com](https://dba.stackexchange.com/questions/20083/whats-the-formula-for-calculating-key-efficiency-key-buffer-used-and-query-ca)

**进一步添加 4**

我认为只有甲骨文中的某个人才能确切地说出发生了什么，但我有我的想法。

我认为这个查询很奇怪：

1.  所有表 (t1,t2,t3) 都由主键连接
2.  其他条件仅取决于 calcs (t3.colX )
3.  某些条件仅取决于索引 (t1.colX )

因为 1 from_table_rows >= join1_table_rows >= join2_table_rows，所以较少的行返回 from 表最快将是其他 2 个 JOIN

评估工作量的优化器将计算一个类似的方程：

```
effort = num_rows*key_size/index_cardinality 
```

（index_cardinality 由 phpmyadmin 在每个索引下显示）

因为 2 的努力是 >= num_rows

**我的查询** 因为 3 table1（来自 table）返回 92333 行，table3（join1_table）减少到 1（！）行，table2 保留 1 行（努力〜 3）。

**您的查询** 因为 2 您应该付出努力 = 140000，但幸运的是 calc 只返回 1 个结果，因此您的查询非常快

**演示**

在您的查询从“<=10”（在连接条件下）更改为“<=1000”或更多时，您将看到性能呈指数下降。

在我的查询从“<=10”（在连接条件下）更改为“<=1000”或更多时，您会看到性能呈线性/对数下降。

**进一步添加 5**

问题的答案：sort-buffer-size 是否太大？

站在文章上，是的，试一试，也许能解决问题

回答问题：是不是不能做一个快速查询？

恕我直言，不，这是可能的（即使排序缓冲区大小无法解决）。

我的想法很简单，它可以在这个主题中继续：“圆形很好，但方形更好”。

目前最大的基数在 table3 中的坐标上，但由于公式没有索引适用。因此，您可以搜索“正方形”内的所有点，而不是搜索半径内的所有点

```
FROM table3
...
WHERE (t3.latitude-0.15) < $usersLatitude AND  $usersLatitude < t3.latitude+0.15  
AND t3.longitue - 0.15 < $usersLongitude AND   $usersLongitude < t3.longitue + 0.15 
```

因此您可以在 (t3.latitude,t3.longitue) 中创建索引。

*0.15*度应该是 10 英里。当然，您应该在日变子午线附近和两极附近修复计算

如果您需要严格的半径，您可以使用半径公式重新加入 table3（参见下面的示例），或者**如果可能**执行（/详细说明）公式，直到您可以直接将值与列进行比较。

```
FROM table3 t3
JOIN table3 t3bis ON t3.id=t3bis.id
...
WHERE (t3.latitude-0.15) < $usersLatitude AND  $usersLatitude < t3.latitude+0.15  
AND t3.longitue - 0.15 < $usersLongitude AND   $usersLongitude < t3.longitue + 0.15
AND 
3963.191 
* ACOS(  (SIN(PI() * $usersLatitude / 180) * SIN(PI() * t3bis.latitude / 180)) 
+ (  COS(PI() * $usersLatitude / 180) * COS(PI() * t3bis.latitude / 180) 
* COS(PI() * t3bis.longitude / 180 - PI() * 37.1092162 / 180)
)   
) <= 10 
```

**进一步添加 6**

主题：编译函数做得更好

**RADIANS() 函数的使用**

```
degree * PI / 180 == radians(degree) 
```

**mysql的GIS扩展的使用**

请参阅[这篇关于 MySql GIS 扩展的文章](http://www.lenzg.net/archives/220-New-UDF-for-MySQL-5.1-provides-GIS-functions-distance_sphere-and-distance_spheroid.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T20:13:24.240

尝试第一个查询：

```
...
FROM 
    Table1 AS table1 USE INDEX (col6)
LEFT JOIN 
    Table2 AS table2   
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T12:12:13.690

table1.col6 的类型是什么？它的字段直径（最大值长度）是多少？

顺便说一句，像 Ivan Buttinoni 建议的那样，预先计算不依赖于字段值的值。它对订购没有帮助，但会使查询更快

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T15:38:25.977

经过多次反复试验，我终于找到了解决问题的方法。

如果我们将整个 WHERE 子句——**除了**计算半径的部分——放在原始查询之外，那么我们会得到一个非常快的查询，它**不像**`temporary`改变 do 的顺序那样使用`JOIN`：

```
SELECT * FROM
{
    SELECT
        col1, col2, col3, col4, col5, col6
    FROM 
        Table1 AS table1 
    LEFT JOIN 
        Table2 AS table2 
    USING 
        (col1)
    LEFT JOIN 
        Table3 as table3 
    USING 
        (col1) 
    WHERE 
        3963.191 * 
        ACOS(
        (SIN(PI() * $usersLatitude / 180) * SIN(PI() * table3.latitude / 180)) 
        +
        (COS(PI() * $usersLatitude / 180) * COS(PI() * table3.latitude / 180) * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180))
        ) <= 10 
) AS sub
WHERE
    col1 != '1' 
AND 
    col2 LIKE 'A' 
AND 
    (col3 LIKE 'X' OR col3 LIKE 'X-Y') 
AND 
    (col4 = 'Y' OR col5 = 'Y') 
ORDER BY 
    col6 DESC 
```

本质上，这个查询首先`JOIN`根据半径获取所有 3 个表的结果，然后才应用其余的过滤器来获得我们需要的结果。此版本的查询返回与原始查询**完全相同的**结果，但执行时间仅为**0.2 秒**，而原始查询的执行时间超过**3 秒**。

这里是`EXPLAIN EXTENDED`它：

```
id  select_type table   type    possible_keys   key key_len ref rows    filtered    Extra
1   PRIMARY <derived2>  ALL NULL    NULL    NULL    NULL    43  100 Using where; Using filesort
2   DERIVED T3  ALL PRIMARY NULL    NULL    NULL    143153  100 Using where
2   DERIVED users   eq_ref  PRIMARY,col1,idx01  PRIMARY 4   T3.col1 1   100 
2   DERIVED userProfile eq_ref  PRIMARY,CompositeIndex1 PRIMARY 4   users.col1  1   100 
```

我要感谢[Ivan Buttinoni](https://stackoverflow.com/users/564405/ivan-buttinoni)在这方面所做的出色工作。他找到了几种使查询更快的巧妙方法。

**故事** 的寓意：不仅可以通过将`ORDER BY`子句[放在主查询之外](https://stackoverflow.com/questions/884661/slow-query-when-using-order-by)来加快查询速度，您还可以通过将 WHERE 子句的一部分放在它之外来获得更快的查询，在这种情况下也是如此。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T09:29:34.720

我认为您可以做三 (3) 件事：

1）重构查询

2) 在查询前面的 Table1 上应用 ORDER BY

3) Index Table1 支持重构

或许这...

```
ALTER TABLE Table1 ADD INDEX col2_col6_ndx (col2,col6);
SELECT
    table1.*, 
    table2.*
FROM 
    (
        SELECT * FROM Table1
        WHERE col2='A' AND 
        ORDER BY col6 DESC
    ) AS table1
LEFT JOIN 
    (
        SELECT * FROM Table2
        WHERE (col4='Y' OR col5='Y')
    ) AS table2 
USING 
    (col1)
LEFT JOIN 
    Table3 as table3 
USING 
    (col1) 
WHERE 
    table1.col1 != '1' AND
    table1.col3 IN ('X','X-Y') AND
    3963.191 * 
    ACOS(
    (SIN(PI() * $usersLatitude / 180) * SIN(PI() * table3.latitude / 180)) 
    +
    (COS(PI() * $usersLatitude / 180) * COS(PI() * table3.latitude / 180) * COS(PI() * table3.longitude / 180 - PI() * 37.1092162 / 180))
    ) <= 10 
; 
```

这是另一个尝试重构查询的变体，以便首先只收集键（创建更小的临时表），然后应用 JOINS：

```
ALTER TABLE Table1 ADD INDEX col2613_ndx (col2,col6,col1,col3);
ALTER TABLE Table2 ADD INDEX col4_col1_ndx (col4,col1);
ALTER TABLE Table2 ADD INDEX col5_col1_ndx (col5,col1);
SELECT 
    table1.*, 
    table2.*
FROM
(
    SELECT table1.col1,table3.latitude,table3.longitude 
    FROM 
        (
            SELECT col1 FROM Table1 WHERE col2='A' AND
            AND col3 IN ('X','X-Y') ORDER BY col6 DESC
        ) AS table1
    LEFT JOIN 
        (
            SELECT col1 FROM Table2 WHERE col4='Y' UNION
            SELECT col1 FROM Table2 WHERE col5='Y'
        ) AS table2 
    USING (col1)
    LEFT JOIN Table3 as table3 USING (col1)
) col1_keys
LEFT JOIN Table1 table1 USING (col1)
LEFT JOIN Table2 table2 USING (col1)
WHERE 
    3963.191 * 
    ACOS(
    (SIN(PI() * $usersLatitude / 180) * SIN(PI() * col1_keys.latitude / 180)) 
    +
    (COS(PI() * $usersLatitude / 180) * COS(PI() * col1_keys.latitude / 180)
    * COS(PI() * col1_keys.longitude / 180 - PI() * 37.1092162 / 180))
    ) <= 10 
; 
```

试试看 ！！！**

# tomcat - 如何在不使用 Tomcat 或 Glassfish 的情况下在 Netbeans 中编译 Web 应用程序

> ID：13569774
> 
> 赞同：0
> 
> 时间：2012-11-26T17:14:52.243
> 
> 标签：tomcat, netbeans, glassfish, jenkins

我需要在 Jenkins 中编译使用 Netbeans (7.2) 创建的 webapp，并且出现错误，表明我需要将此参数传递给 Ant：

```
-Dj2ee.server.home=<app_server_installation_directory> 
```

我想在**Windows**和**Linux**中编译不依赖 Tomcat 或 Glassfish 的项目。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:14:04.050

解决方案是在 build.xml Ant 脚本中创建*-pre-build*任务以下载 Tomcat（或 Glassfish）并将*j2ee.server.home*依赖项设置为正确的库路径。

```
<target name="-post-clean">
    <deltree dir="download" />
    <deltree dir="temp" />
</target>

<!--<target name="-pre-init" depends="check-dependencies" if="tomcat.present">-->
<target name="-pre-init">        
    <property name="custom-tomcat-version" value="apache-tomcat-7.0.33" />

    <mkdir dir="temp"/>
    <get src="http://apache.rediris.es/tomcat/tomcat-7/v7.0.33/bin/apache-tomcat-7.0.33.zip" dest="temp/${custom-tomcat-version}.zip"/>

    <unzip dest="download/image" src="temp/${custom-tomcat-version}.zip">
        <patternset>
            <include name="apache-tomcat-7.*/lib/*"/>
        </patternset>
        <mapper>
            <globmapper from="apache-tomcat-7.*/lib/*" to="*"/>
        </mapper>
    </unzip>

    <!-- NB Ant script requieres this propertie to be assigned -->
    <property name="j2ee.server.home" value="download/image/${custom-tomcat-version}"/>
</target> 
```

¡¡ 它就像一个魅力！

# javascript - obtain reference to _blank target window on form submit

> ID：13569776
> 
> 赞同：7
> 
> 时间：2012-11-26T17:15:02.550
> 
> 标签：javascript, forms, dom, target

I have a form that is opening a new window on submit:

```
<form id="form-id" target="_blank"> 
```

I want to access the newly created window via javascript, **without manually generating a unique name for target, and without resorting to an alternative method for opening the window**.

It seems like there has to be an easy way of doing this but I wasn't able to find one that will work in my specific situation.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:17:16.553

而不是`_blank`这样，您可以使用命名您的新窗口。

```
 <form id="form-id" target="newName"> 
```

然后你可以在 JS 中使用它：

```
var newWindow = window.open(null, 'newName'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T18:38:30.610

我不是 100% 确定这适用于所有浏览器，但 Firefox 似乎设置`window.opener`了一个`target`属性`<a>`或`<form>`导致一个新窗口打开。因此，您可以从另一个方向找到原始窗口（假设您控制那里的代码；如果不是，那么我无法想象您可以对窗口引用做很多事情）。

当然，新窗口中的代码可以做的一件事是在旧窗口中调用一个函数，并传入它自己的`window`引用。

因此，具体来说，如果您有：

```
<form action=whatever target=_blank> 
```

在原始页面上，然后在新打开的窗口中结束的页面可以这样做：

```
<head>
  <script>
    if (window.opener) {
      window.opener.announceWindow( window );
    }
  </script> 
```

假设`announceWindow()`是原始页面上的一个函数，可能类似于：

```
function announceWindow( win ) {
  // do stuff with "win", a newly-opened window
} 
```

# c# - 如何在 XAML 中“创建”的代码中访问控制

> ID：13569782
> 
> 赞同：23
> 
> 时间：2012-11-26T17:15:24.400
> 
> 标签：c#, .net, wpf, xaml

我有一个我在 XAML 中“创建”的控件，我想通过背后的代码访问它。

```
<wincontrols:LiveTileFrameElement Name="PendingAuthsFrame1" Text="Pending" />

this.PendingAuthsFrame1.Text = "334"; 
```

但是，我在上面的第二条语句中得到了一个构建错误，说明`MyApp.MainWindow does not contain a definition for 'PendingAuthsFrame1' and no extension method....` 它一直在运行，但你明白我在猜测的想法。

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-26T17:21:37.500

使用`x:Name`而不是`Name`. 这应该够了吧。

# c - sscanf 意外结果

> ID：13569783
> 
> 赞同：3
> 
> 时间：2012-11-26T17:15:25.807
> 
> 标签：c, scanf

```
#include<stdio.h>
#include<string.h>

int main()
{
   char buffer[32];
   char c;
   int i;
   printf("input: ");
   fgets(buffer, 32, stdin);
   printf("items filled: %d\n", sscanf("%c%d\n", &c, &i));
   printf("%c%d\n", c, i);
   return 0;
} 
```

当键入一个字符后跟一个数字“f7”时，我希望“f”进入 variable `c`，而“7”进入 variable `i`。出于某种原因，`sscanf()`两者都无法填充，我得到了它们的初始垃圾值。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T17:17:53.653

实际`sscanf()`签名是这样的：

```
int sscanf(const char *str, const char *format, ...); 
```

检查您的签名`sscanf()`您使用了错误的签名

它应该是

```
sscanf(buffer,"%c%d\n", &c, &i); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T17:18:57.383

您没有在`sscanf()`通话中使用缓冲区，因此它们没有被填满。

```
int i;
char c;
char buffer[32];
fgets(buffer, 32, stdin);
sscanf(buffer, "%c%d", &c, &i)
         ^
      you're missing this part 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T17:20:20.747

不要使用`sscanf`. 进行解析的正确方法是

```
#include <stdlib.h>
#include <stdio.h>

// ...

char *endptr, buffer[32];
char c;
int i;

// ...

fgets(buffer, 32, stdin);
c = buffer[0];
i = strtol(buffer+1, &endptr, 10);

if (endptr == buffer+1 || (*endptr != '\0' && *endptr != '\n')) {
    puts("invalid input");
    return 1;
} else {
   printf("%c%d\n", c, i);
   return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:19:32.790

`sscanf("%c%d\n", &c, &i)`从未被告知要在缓冲区中查找 c 和 i，看起来您正在错误地进行此调用。

# android - 如何调整coverflow/gallery以适应不同的屏幕尺寸

> ID：13569785
> 
> 赞同：3
> 
> 时间：2012-11-26T17:15:32.857
> 
> 标签：android, gallery, coverflow, screen-size

我正在使用这个 CoverFlow： http: [//www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

我想让coverflow适应不同的屏幕尺寸，

我稍微修改了封面流，以便我使用 XML 布局。

这是我的手机 (320x480) 上的布局应该和外观

![好的](../Images/a907ae3c2175ad0846250c2284d0534a.png)

这是 Nexus One 上的布局（在模拟器中为 480x720） ![坏的](../Images/634dff9297457e25be9ed7a2789c7bff.png)

盖流类：

```
public class CoverFlow extends Gallery {

    /**
     * Graphics Camera used for transforming the matrix of ImageViews
     */
    private final Camera mCamera = new Camera();

    /**
     * The maximum angle the Child ImageView will be rotated by
     */    
    private int mMaxRotationAngle = 80;

    /**
     * The maximum zoom on the centre Child
     */
    // TODO RENDRE LA VALEUR DYNAMIQUE SUR LA TAILLE DE L'ECRAN

//    private int mMaxZoom = -430;
    private int mMaxZoom = -370;

    /**
     * The Centre of the Coverflow 
     */   
    private int mCoveflowCenter;

 public CoverFlow(Context context) {
  super(context);
  this.setStaticTransformationsEnabled(true);
 }

 public CoverFlow(Context context, AttributeSet attrs) {
  super(context, attrs);
        this.setStaticTransformationsEnabled(true);
 }

  public CoverFlow(Context context, AttributeSet attrs, int defStyle) {
   super(context, attrs, defStyle);
   this.setStaticTransformationsEnabled(true);   
  }

    /**
     * Get the max rotational angle of the image
  * @return the mMaxRotationAngle
  */
 public int getMaxRotationAngle() {
  return mMaxRotationAngle;
 }

 /**
  * Set the max rotational angle of each image
  * @param maxRotationAngle the mMaxRotationAngle to set
  */
 public void setMaxRotationAngle(int maxRotationAngle) {
  mMaxRotationAngle = maxRotationAngle;
 }

 /**
  * Get the Max zoom of the centre image
  * @return the mMaxZoom
  */
 public int getMaxZoom() {
  return mMaxZoom;
 }

 /**
  * Set the max zoom of the centre image
  * @param maxZoom the mMaxZoom to set
  */
 public void setMaxZoom(int maxZoom) {
  mMaxZoom = maxZoom;
 }

 /**
     * Get the Centre of the Coverflow
     * @return The centre of this Coverflow.
     */
    private int getCenterOfCoverflow() {
        return (getWidth() - getPaddingLeft() - getPaddingRight()) / 2 + getPaddingLeft();
    }

    /**
     * Get the Centre of the View
     * @return The centre of the given view.
     */
    private static int getCenterOfView(View view) {
        return view.getLeft() + view.getWidth() / 2;
    }  
    /**
  * {@inheritDoc}
  *
  * @see #setStaticTransformationsEnabled(boolean) 
  */ 
    @Override
    protected boolean getChildStaticTransformation(View child, Transformation t) {

  final int childCenter = getCenterOfView(child);
  final int childWidth = child.getWidth() ;
  int rotationAngle = 0;

  t.clear();
  t.setTransformationType(Transformation.TYPE_MATRIX);

        if (childCenter == mCoveflowCenter) {
            transformImageBitmap((ImageView) child, t, 0);
        } else {      
            rotationAngle = (int) (((float) (mCoveflowCenter - childCenter)/ childWidth) *  mMaxRotationAngle);
            if (Math.abs(rotationAngle) > mMaxRotationAngle) {
             rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle : mMaxRotationAngle;   
            }
            transformImageBitmap((ImageView) child, t, rotationAngle);         
        }    

  return true;
 }

 /**
  * This is called during layout when the size of this view has changed. If
  * you were just added to the view hierarchy, you're called with the old
  * values of 0.
  *
  * @param w Current width of this view.
  * @param h Current height of this view.
  * @param oldw Old width of this view.
  * @param oldh Old height of this view.
     */
     @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
      mCoveflowCenter = getCenterOfCoverflow();
      super.onSizeChanged(w, h, oldw, oldh);
     }

     /**
      * Transform the Image Bitmap by the Angle passed 
      * 
      * @param imageView ImageView the ImageView whose bitmap we want to rotate
      * @param t transformation 
      * @param rotationAngle the Angle by which to rotate the Bitmap
      */
     private void transformImageBitmap(ImageView child, Transformation t, int rotationAngle) {            
      mCamera.save();
      final Matrix imageMatrix = t.getMatrix();;
      final int imageHeight = child.getLayoutParams().height;;
      final int imageWidth = child.getLayoutParams().width;
      final int rotation = Math.abs(rotationAngle);

      mCamera.translate(0.0f, 0.0f, 100.0f);

      //As the angle of the view gets less, zoom in     
      if ( rotation < mMaxRotationAngle ) {
       float zoomAmount = (mMaxZoom + rotation);
       mCamera.translate(0.0f, 0.0f, zoomAmount);          
      } 

      mCamera.rotateY(rotationAngle);
      mCamera.getMatrix(imageMatrix);               
      imageMatrix.preTranslate(-(imageWidth/2), -(imageHeight/2)); 
      imageMatrix.postTranslate((imageWidth/2), (imageHeight/2));
      mCamera.restore();
 }
} 
```

家庭活动：

```
public class HomeActivity extends Activity {

    private  final static String TAG = "HomeActivity";
    private TextView pageNameTextView;
    private CoverFlow coverFlow;
    private ImageAdapter coverImageAdapter;
    private int itemSelected = 0;
    private Context context;
    private SparseArray<String> listeNomIcons;
    private int currentImagePosition = 0;

    //Info button
    private ImageView infoAccueilImageView; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.home_layout);
        //animate Transition
        overridePendingTransition(android.R.anim.fade_in, android.R.anim.fade_out);

        context = this;

        listeNomIcons = new SparseArray<String>();
        listeNomIcons.put(0, "DELAIS D'ATTENTE, RETARD");
        listeNomIcons.put(1, "COURRIER SUBSTITUTION");
        listeNomIcons.put(2, "IR LC");
        listeNomIcons.put(3, "CONTACTS UTILES");
        listeNomIcons.put(4, "TEMPS DE PAUSE");
        listeNomIcons.put(5, "DISPERTION");
        listeNomIcons.put(6, "PRORATA REPOS");
        listeNomIcons.put(7, "ALERTE DOMICILE");
        listeNomIcons.put(8, "RESERVE DOMICILE");
        listeNomIcons.put(9, "RADD");
        listeNomIcons.put(10, "JOKER");

        coverFlow = (CoverFlow)findViewById(R.id.coverflow);  
        coverImageAdapter =  new ImageAdapter(this);  
        coverFlow.setAdapter(coverImageAdapter);
        coverFlow.setSelection(0, true);
        coverFlow.setAnimationDuration(1000);

        //cover

        pageNameTextView = (TextView)findViewById(R.id.page_nameTextView);

        //Info Accueil Image View
        infoAccueilImageView = (ImageView)findViewById(R.id.infoImageView);
        infoAccueilImageView.setOnClickListener( new OnClickListener() {
            @Override
            public void onClick(View v) {
                startActivity(new Intent(context, InfoAccueilActivity.class));
            }
        } ) ;

        coverFlow.setOnItemSelectedListener(new OnItemSelectedListener(){
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
                currentImagePosition = position; //this will update your current marker
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });

        Button goLeft = (Button) findViewById(R.id.select_leftButton);
        goLeft.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // go to previous image

                coverFlow.onKeyDown(KeyEvent.KEYCODE_DPAD_LEFT, new KeyEvent(0, 0));
            }
        });

        Button goRight = (Button) findViewById(R.id.select_rightButton);
        goRight.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // go to next item
                coverFlow.onKeyDown(KeyEvent.KEYCODE_DPAD_RIGHT, new KeyEvent(0, 0));
            }
        });

        coverFlow.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                if(itemSelected == arg2)
                {
                    Log.d(TAG, "arg2 : "+arg2);
                    switch (arg2) {
                    case 0:
                        startActivity(new Intent(context, DelaisAttenteActivity.class));
                        break;
                    case 1:
                        startActivity(new Intent(context, CourrierSubstitutionActivity.class));
                        break;
                    case 2:
                        startActivity(new Intent(context, IRLCActivity.class));
                        break;
                    case 3:
                        startActivity(new Intent(context, ContactsActivity.class));
                        break;
                    case 4:
                        startActivity(new Intent(context, TempsPauseActivity.class));
                        break;
                    case 5:
                        startActivity(new Intent(context, DispertionActivity.class));
                        break;
                    case 6:
                        startActivity(new Intent(context, ProrataReposActivity.class));
                        break;
                    case 7:
                        startActivity(new Intent(context, AlerteDomicileActivity.class));
                        break;
                    case 8:
                        startActivity(new Intent(context, ReserveDomicileActivity.class));
                        break;                      
                    case 9:
                        startActivity(new Intent(context, ReposAdditionnelActivity.class));
                        break;
                    case 10:
                        startActivity(new Intent(context, JokerActivity.class));
                        break;

                    default:
                        break;
                    }
                }
            }
        });
        coverFlow.setOnItemSelectedListener(new OnItemSelectedListener() {

            @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                pageNameTextView.setText(listeNomIcons.get(arg2));
                itemSelected = arg2;
            }

            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        });
    }

    public class ImageAdapter extends BaseAdapter {
        int mGalleryItemBackground;
        private final Context mContext;

        private final Integer[] mImageIds = {
                R.drawable.retard_controller,
                R.drawable.courrier_substitution_controller,
                R.drawable.irmf_controller,
                R.drawable.contacts_controller,
                R.drawable.pause_controller,
                R.drawable.dispersion_controller,
                R.drawable.repos_controller,
                R.drawable.alerte_controller,
                R.drawable.reserve_domicile_controller,
                R.drawable.repos_additionnel_controller,
                R.drawable.joker_controller
        };

        private final ImageView[] mImages;

        public ImageAdapter(Context c) {
            mContext = c;
            mImages = new ImageView[mImageIds.length];
        }

        @Override
        public int getCount() {
            return mImageIds.length;
        }

        @Override
        public Object getItem(int position) {
            return position;
        }

        @Override
        public long getItemId(int position) {
            return position;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {

            //Use this code if you want to load from resources
            ImageView i = new ImageView(mContext);
            i.setImageResource(mImageIds[position]);
            i.setLayoutParams(new CoverFlow.LayoutParams(130, 130));
            i.setScaleType(ImageView.ScaleType.CENTER_INSIDE); 
            //Make sure we set anti-aliasing otherwise we get jaggies
            BitmapDrawable drawable = (BitmapDrawable) i.getDrawable();
            drawable.setAntiAlias(true);
            return i;

            //return mImages[position];
        }
        /** Returns the size (0.0f to 1.0f) of the views 
         * depending on the 'offset' to the center. */ 
        public float getScale(boolean focused, int offset) { 
            /* Formula: 1 / (2 ^ offset) */ 
            return Math.max(0, 1.0f / (float)Math.pow(2, Math.abs(offset))); 
        } 

    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T11:58:36.973

我找到了一种解决方法，不是一个很好的解决方案，但它在我测试过的设备上运行良好......

在方法中（在 HomeActivity 中的 ImageAdapter 中）

```
@Override
public View getView(int position, View convertView, ViewGroup parent) 
```

在那里我改变了这一行图像的大小

```
i.setLayoutParams(new CoverFlow.LayoutParams(130, 130)); 
```

到

```
int imageSize = calculateSize();
i.setLayoutParams(new CoverFlow.LayoutParams(imageSize, imageSize)); 
```

`imageSize`我用这个方法在我的 onCreate 中设置

```
public int calculateSize()
{
    // GET SCREEN SIZE
    Display display = getWindowManager().getDefaultDisplay();

    // HEIGHT
    int height = display.getHeight();
    long roundedHeightSize = Math.round((0.2132*height)+27.177);

    //WIDTH
    int width = display.getWidth();
    long roundedWidthSize = Math.round((0.4264*width)-6.9355);

    return (int)((roundedHeightSize+roundedWidthSize)/2);
} 
```

获得功能：

(0.2132*高)+27.177 & (0.4264*宽)-6.9355

我在可用的不同设备上手动测试了所需图像的高度

银河 SIII：300 (1280x720)

Xperia Mini Pro：135 (480x320)

Xperia X10 Mini Pro：95 (320x240)

```
f(1280)=300
f(480)=135
f(320)=95

f(x) = 0.2132X + 27.177 
```

然后我做了同样的宽度..

然后我得到这两个函数给出的高度和宽度的平均值，以获得图像高度和宽度的最佳值（看到图像是正方形 => 宽度 = 高度）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:53:53.000

有`alphaSpacing`一种 int 变量，只要增加它的值。但是，当我使用此代码时，我不记得确切的类和变量名称已经快 2 年了。但是，是的，我记得的一件事是我遇到了同样的问题，我完全不知道 stackoverflow。所以尝试不同的价值观并最终成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T16:23:45.303

我建议使用来自`dimens.xml`. 作为`getView`适配器中方法的示例：

```
if (convertView == null) {
            convertView = lInflater.inflate(R.layout.item_gallery, null);
            ((RelativeLayout) convertView.findViewById(R.id.image_issue_layout)).setLayoutParams(new CoverFlowView.LayoutParams(
                    app.getResources().getDimensionPixelSize(R.dimen.width_coverflow), 
                    app.getResources().getDimensionPixelSize(R.dimen.height_coverflow))); 
```

并在文件夹中为不同的屏幕`res`指定不同的值：等等...`width_coverflow``values-sw600dp-land``values-sw720dp`

# php - php if else convert value

> ID：13569790
> 
> 赞同：-2
> 
> 时间：2012-11-26T17:15:40.520
> 
> 标签：php, mysql, if-statement

i have value from database, when the data show 1, it will be a, when the data show 2, it will be b, ....

```
CREATE TABLE `jurnal`(
`id` INT(11)NOT NULL AUTO_INCREMENT,
`month` INT(2)NOT NULL,
`year` INT(4)NOT NULL,
PRIMARY KEY(`id`))ENGINE = INNODB AUTO_INCREMENT = 2 DEFAULT CHARSET = utf8; 
```

the value from database like:

```
id=1 month=3 year=2012 
```

i want make the value from `month` using 'if else' if work, to make

```
if 1, it will be a, if 2, it will be b, ... and so on to 12 
```

the output data that I wish would like

```
c, 2012 not 3, 2012 
```

thank's before

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:18:17.207

您始终可以使用该`CHAR`函数渲染出您喜欢的任何字符：

```
SELECT CHAR(96 + month) 
```

ASCII 97 是`a`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:27:35.117

如果你想在你的条件中添加一些逻辑，你可以使用 CASE

`SELECT CASE month WHEN 1 THEN 'a' WHEN 2 THEN 'b' ELSE '?' END; FROM jurnal`

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)

谢谢

# c# - How do I bind a Polygon to an existing PointCollection in WPF?

> ID：13569794
> 
> 赞同：3
> 
> 时间：2012-11-26T17:15:54.687
> 
> 标签：c#, wpf, data-binding, polygon, points

My current implementation doesn't show anything on the form even though the collections I thought bounded have data (I checked in debug).

Here's some code:

```
 public event PropertyChangedEventHandler PropertyChanged;
    PointCollection imagePoints;
    public PointCollection ImagePoints
    {
        get
        {
            return this.imagePoints;
        }
        set
        {
            if (this.imagePoints != value)
            {
                this.imagePoints = value;
                if (this.PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs("ImagePoints"));
                }
            }
        }
    } 
```

and the corresponding xaml:

```
<Polygon x:Name="imagePolygon" Points="{Binding ImagePoints}" Stretch="Fill" Fill="Black" Opacity="0.8" /> 
```

Now, I did all the binding by writing the code. In this [example](http://trompelecode.com/2012/04/how-to-create-an-image-histogram-using-csharp-and-wpf/), it works just fine, yet in mine, the points don't show up on the polygon.

Any pearls of wisdom?

Edit:here's the complete xaml code

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d" x:Class="WpfApplication2.HistogramWindow"
    Title="HistogramWindow" Height="436" Width="604">
<Grid>
    <TabControl HorizontalAlignment="Left" Height="406" VerticalAlignment="Top" Width="596" >
        <TabItem x:Name="imageTab" Header="Full Image" Height="23" VerticalAlignment="Top">
            <Border BorderBrush="Black" BorderThickness="1" Margin="10">
                <Polygon x:Name="imagePolygon" Points="{Binding ImagePoints}" Stretch="Fill" Fill="Black" Opacity="0.8" />
            </Border>
        </TabItem>
        <TabItem x:Name="boneTab" Header="Bone">
            <Border BorderBrush="Black" BorderThickness="1" Margin="10">
                <Border.BindingGroup>
                    <BindingGroup/>
                </Border.BindingGroup>
                <Polygon x:Name="bonePolygon" Points="{Binding BonePoints}" Stretch="Fill" Fill="Black" Opacity="0.8" >

                </Polygon>
            </Border>
        </TabItem>
        <TabItem x:Name="fatTab" Header="Fat" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="57">
            <Border BorderBrush="Black" BorderThickness="1" Margin="10">
                <Polygon x:Name="fatPolygon" Points="{Binding FatPoints}" Stretch="Fill" Fill="Black" Opacity="0.8" />
            </Border>
        </TabItem>
    </TabControl>

</Grid> 
```

Edit: After a modification of the config file, I find this in the output window:

```
System.Windows.Data Information: 41 : BindingExpression path error: 'ImagePoints'   property not found for 'object' because data item is null.  This could happen because the data provider has not produced any data yet. BindingExpression:Path=ImagePoints; DataItem=null; target element is 'Polygon' (Name='imagePolygon'); target property is 'Points' (type 'PointCollection')
System.Windows.Data Information: 20 : BindingExpression cannot retrieve value due to missing information. BindingExpression:Path=ImagePoints; DataItem=null; target element is 'Polygon' (Name='imagePolygon'); target property is 'Points' (type 'PointCollection')
System.Windows.Data Information: 21 : BindingExpression cannot retrieve value from null data item. This could happen when binding is detached or when binding to a Nullable type that has no value. BindingExpression:Path=ImagePoints; DataItem=null; target element is 'Polygon' (Name='imagePolygon'); target property is 'Points' (type 'PointCollection')
System.Windows.Data Information: 10 : Cannot retrieve value using the binding and no valid fallback value exists; using default instead. BindingExpression:Path=ImagePoints; DataItem=null; target element is 'Polygon' (Name='imagePolygon'); target property is 'Points' (type 'PointCollection') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T19:05:22.510

我不确定您为什么会遇到绑定错误，但乍一看，您拥有的代码看起来不错。

我写了一小段代码，所以你可以检查一下，看看你是否遗漏了什么。我想应该和你的有点像。。

XAML 的相关部分：

```
<TabItem x:Name="imageTab" Header="Full Image" Height="23" VerticalAlignment="Top">
    <Border BorderBrush="Black" BorderThickness="1" Margin="10">
        <StackPanel>
            <Polygon x:Name="imagePolygon" Points="{Binding ImagePoints}" Stretch="Fill" Fill="Black" Opacity="0.8" />
            <Button Content="Set new points" Click="btnSetNew" />
        </StackPanel>
    </Border>
</TabItem> 
```

窗口的代码隐藏：

```
public partial class Window1 : Window, INotifyPropertyChanged
{
    public Window1()
    {
        InitializeComponent();

        this.ImagePoints = new PointCollection
            (new [] { new Point(1, 2), new Point(34, 12), new Point(12, 99) });

        //Important - maybe you missed this?
        this.DataContext = this;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    PointCollection imagePoints;
    public PointCollection ImagePoints
    {
        get
        {
            return this.imagePoints;
        }
        set
        {
            if (this.imagePoints != value)
            {
                this.imagePoints = value;
                if (this.PropertyChanged != null)
                {
                    PropertyChanged(this, new PropertyChangedEventArgs("ImagePoints"));
                }
            }
        }
    }

    private void btnSetNew(object sender, RoutedEventArgs e)
    {
        this.ImagePoints = new PointCollection(
            new[] { new Point(23, 2), new Point(12, 556), new Point(4, 89) });
    }
} 
```

# c++ - 如何确定容器的迭代器类型？

> ID：13569795
> 
> 赞同：2
> 
> 时间：2012-11-26T17:15:55.533
> 
> 标签：c++, typetraits

为了设置`iterator_type`与关联的迭代器类型，我必须为 YYY、ZZZ 写什么`T`？如果可能，它应该在 Visual Studio C++ 2010 中工作（但通用标准解决方案也可以）。

```
template<class T>
struct iterator_for {
    typedef YYY<T>::ZZZ type;
} 
```

因此我想要：

```
iterator_for<double[3]>::type is double *
iterator_for<std::string>::type is std::string::iterator
iterator_for<char[12]>::type is char * 
```

等等

我有一个模板化的包装类`Wrapper<T>`存储一些可迭代的东西（即一个容器或字符串或一个数组），我想定义一个返回指向被包装对象的迭代器的函数。为此，我需要能够谈论对应的迭代器类型`T`。对于数组，对应的迭代器将是一个指针，而对于一个字符串，它是任何定义为其迭代器类型的字符串。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:51:13.080

如果您只想将容器与指针分开，您可以试试这个

```
template<class T>
struct iterator_for 
{
    typedef typename T::iterator  type;
};

template<class T>
struct iterator_for<T*>
{
    typedef T*  type;
};

template<class T, std::size_t N>
struct iterator_for<T (&)[N]>
{
    typedef T*  type;
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-20T19:58:43.327

我的解决方案是：

```
typedef decltype(std::begin(std::declval<T&>())) type; 
```

迭代器类型是`std::begin`在 的实例上调用时返回的类型`T`。`std::declval<T&>`被声明为返回 a `T&`，我们可以在其上调用`std::begin`.

这与 JohnB 的回答不同，因为我们将对容器类型的引用传递给`std::begin`. 这是必需的，因为：

*   `std::declval<T>()`返回一个右值引用 ( `T&&`)。
*   `std::begin`通过非常量引用获取其参数。
*   非常量引用不能绑定到临时对象。

`std::declval<T&>`但是由于引用折叠而返回左值引用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T17:35:55.553

好的，一种可能性可能是（在 C++11 中，但在 VS 2010 中不起作用）：

```
typedef typename std::remove_reference<
                    decltype ( 
                        begin ( std::declval<T> () )
                    )
                 >::type
        type; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T20:22:16.617

Boost 库已经有了这个：

```
#include <boost/range.hpp>
#include <iostream>
#include <string>
#include <vector>

template <typename T> void print_list(const T& container) {
    typedef typename boost::range_iterator<const T>::type iter;
    for (iter i = boost::begin(container); i != boost::end(container); ++i)
        std::cout << *i << ";";
    std::cout << "\n";
}

int main() {
    double array[] = {1.0,2.0,3.0};
    std::string str = "Hello";
    std::vector<int> vec(3, 10);
    print_list(array);  // prints 1;2;3;
    print_list(str);    // prints H;e;l;l;o;
    print_list(vec);    // prints 10;10;10;
} 
```

# tooltip - 如何在 Foundation 的工具提示中使用 html？

> ID：13569797
> 
> 赞同：8
> 
> 时间：2012-11-26T17:15:59.473
> 
> 标签：tooltip, zurb-foundation

是否可以在 Foundation 的工具提示中使用 html？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-24T15:53:21.467

是的。它在title属性中支持html。

来自*foundation.tooltip.js*：

```
create : function ($target) {
  var $tip = $(this.settings.tip_template(this.selector($target), $('<div></div>').html($target.attr('title')).html())),
  ... 
```

打破它会创建一个包含在 a 中的新元素，`div`并且 title 属性的内容被插入到`div`using`html()`方法中，该方法会将字符串中的任何标记转换为 html 元素。

以下代码：

```
<img src="example.png" 
     class="general-infotip has-tip tip-top"  
     data-tooltip 
     title="<b>This is bold</b> This is not" /> 
```

将产生一个看起来像的工具提示

> **这是粗体**这不是

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-09T13:05:15.693

在 Foundation v6.3+ 中，您可以将属性 data-allow-html="true" 附加到元素以允许在工具提示中使用 html。

例如：

```
<span data-tooltip data-allow-html="true" aria-haspopup="true" 
      class="has-tip" data-disable-hover="false" tabindex="1" 
      title="Fancy word for a <strong>beetle</strong>. <br><br><img src=https://pbs.twimg.com/profile_images/730481747679432704/uc08_dqy.jpg />">

    Scarabaeus

</span> 
```

在这里它在[jsfiddle](https://jsfiddle.net/3jreLnh6/)中工作。

有关更多信息，请查看[拉取请求](https://github.com/zurb/foundation-sites/pull/8527)。

# entity-framework - 仅在生产中出错-“指定的值不是'Edm.Int32'类型的实例参数名称：值”

> ID：13569800
> 
> 赞同：11
> 
> 时间：2012-11-26T17:16:13.530
> 
> 标签：entity-framework, enums, projection, production

我收到以下错误：

```
The specified value is not an instance of type 'Edm.Int32'
Parameter name: value 
```

同时使用实体框架。我认为这是枚举的投影问题，如以下问题中所述：

[实体框架映射枚举：指定的值不是“Edm.Int32”类型的实例参数名称：值](https://stackoverflow.com/questions/9990196/entity-framework-mapping-enum-the-specified-value-is-not-an-instance-of-type)

我感到困惑的是，我的代码在我的本地 PC 上运行良好，但是一旦代码发布到生产服务器上，服务器就会抛出这些错误。我确保我对实体框架的引用被复制到服务器（EF 4.4），并且没有其他内容被缓存等。

我需要在生产服务器上检查什么才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T09:23:04.550

我想差异可能在 32/64 位机器之间。尝试指定您的枚举类型

```
public enum MyEnum : int  {... } 
```

无论如何，这类似于

[实体框架映射枚举：指定的值不是“Edm.Int32”类型的实例参数名称：值](https://stackoverflow.com/questions/9990196/entity-framework-mapping-enum-the-specified-value-is-not-an-instance-of-type)

# git - git 仅向某些用户显示 gitweb 中的存储库

> ID：13569805
> 
> 赞同：4
> 
> 时间：2012-11-26T17:16:34.167
> 
> 标签：git, gitweb

我一开始正在尝试实现一个只有一个开发人员的 git 服务器，所以只有一个具有完全访问权限的开发人员。我已经没有问题了。该用户正在使用 ssh 访问进行工作​​。

而且我想与在 apache 上运行的某种 GUI（gitweb、gitlist、gitalist ......）共享对项目的只读访问权限，这些 GUI 可以向特定用户显示我选择的存储库，也许还有一些完全公开的。就像是：

*   回购 x - user1 和 user3 的读取权限
*   Repo y - user1 和 user2 的读取权限
*   Repo z - 所有用户的读取权限。

我无法找出执行此类操作的正确解决方案。

我可以找到有关如何进行身份验证以仅向经过身份验证的用户显示存储库的文档，但不是对存储库的细粒度控制，以仅向每个经过身份验证的用户显示一些存储库，其中一个 GUI 在 apache 上运行。

我已经使用 webmin git 模块尝试了带有 dav 的 gitweb，但是所有存储库都显示在 gitweb 中，无论我进行身份验证的用户只能访问某些存储库而不是全部。

网络服务器正在使用用户 git 运行 suexec，并且对存储库具有完全的读取权限。

应该如何实施这样的事情？也许是一些钩子？

此外，我只对允许用户下载项目的打包 tar.gz 的选项真正感兴趣。不打算允许用户与项目协作。也许解决方案不是这个。如果 trac 系统是更好的解决方案，它也可能很有趣，因为它能够接收有关项目的反馈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T11:54:13.170

正确的解决方案是添加一个[授权层](http://sitaramc.github.com/gitolite/auth.html)，如[gitolite](https://github.com/sitaramc/gitolite)。

例如，我的[httpd.conf文件声明了：](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl)

*   [gitweb](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L49)它将调用 gitolite，以便仅显示正确的存储库
    （因为我已经包含[`gitweb.conf.pl`](https://github.com/VonC/compileEverything/blob/master/gitweb/gitweb.conf.pl.tpl)来自本机[gitweb 文件的文件`gitweb_config.perl`](https://github.com/VonC/compileEverything/blob/master/gitweb/gitweb_config.perl)）
*   一个[https 访问](https://github.com/VonC/compileEverything/blob/master/apache/env.conf.tpl#L95)，它将调用第一个 gitolite 以允许或不允许推/拉/克隆命令。

例如：

```
ScriptAlias /hgit/ @H@/gitolite/bin/gitolite-shell/
SetEnv GIT_HTTP_BACKEND "@H@/usr/local/apps/git/libexec/git-core/git-http-backend" 
```

# perl - 如何让我的 Perl 测试以给定的顺序执行？

> ID：13569806
> 
> 赞同：5
> 
> 时间：2012-11-26T17:16:33.827
> 
> 标签：perl, testing

当我使用`Test::Class`and`Test::More`进行系统测试时，测试用例似乎是并行执行的。然而，我的测试在它们之间存在依赖关系，因此我希望让测试连续执行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:28:29.537

从底部注释部分的模块 Test::Unit::TestCase 的文档中：

如果需要指定测试顺序，可以执行以下操作之一：

*   设置@TESTS

    我们的@TESTS = qw(my_test my_test_2);

    这是最简单且推荐的方法。

*   覆盖 list_tests() 方法

    返回方法名的有序列表

*   提供一个套件（）方法

    它返回一个 Test::Unit::TestSuite。

我个人的 2 美分：使用`Test::Class`而不是`Test::Unit::TestCase`可能是更好的选择。模块文档甚至有一个很好的[介绍，以及关于](http://search.cpan.org/~adie/Test-Class-0.38/lib/Test/Class.pm#INTRODUCTION)[“困惑的 Junit 用户”](http://search.cpan.org/~adie/Test-Class-0.38/lib/Test/Class.pm#HELP_FOR_CONFUSED_JUNIT_USERS)的有用部分，即使您继续使用 Test::Unit::TestCase 也应该阅读。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T19:33:50.530

[Test::Class](http://search.cpan.org/~adie/Test-Class-0.38/lib/Test/Class.pm#RUNNING_ORDER_OF_METHODS)按字母顺序执行其测试。这很烦人，但是您可以命名您的测试子例程，以便它们以正确的顺序执行。你确定它们是并行运行的吗？您是否可能在多个带有标志的文件上使用[证明？](http://perldoc.perl.org/prove.html)`--jobs`

# c# - 编辑 PDF 文件的区域

> ID：13569807
> 
> 赞同：0
> 
> 时间：2012-11-26T17:16:37.897
> 
> 标签：c#, pdf-generation

> **可能重复：**
> [有没有办法用 C# 编辑 pdf？](https://stackoverflow.com/questions/2923546/is-there-a-way-to-edit-a-pdf-with-c)

我们需要在 C# 中编辑 PDF 的某些部分。有没有可用的库来做到这一点？

我会假设创建的 PDF 必须将区域定义为可编辑 - 但我什至不知道它们将如何定义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:19:33.073

您正在寻找 Itextsharp：

> iText# (iTextSharp) 是用于生成 PDF 的 iText 开源 Java 库的一个端口，该库完全用 C# 编写，用于 .NET 平台。

检查本教程：

[使用 C# 创建 PDF 文件的教程](http://www.codeproject.com/Articles/18040/Tutorials-on-creating-PDF-files-using-C-2-0)

[ItextSharp 教程](http://blog.rubypdf.com/itextsharp/tutorial01/)

**编辑：**如何使用 Itextsharp 填写表格：

[http://www.codeproject.com/Articles/23112/Fill-in-PDF-Form-Fields-using-the-Open-Source-iTex](http://www.codeproject.com/Articles/23112/Fill-in-PDF-Form-Fields-using-the-Open-Source-iTex)

# google-bigquery - 以 ProtocolBuffer 格式导入数据

> ID：13569808
> 
> 赞同：6
> 
> 时间：2012-11-26T17:16:40.970
> 
> 标签：google-bigquery

是否可以在 BigQuery 中以 ProtocolBuffer 格式导入数据？我已经有一组（非常）大量采用这种格式的数据，现在我想将它们推送到 BigQuery 中。但如果我能避免翻译成 json 左右，我会很高兴。另外，这肯定会为我节省一些带宽......

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T02:42:33.333

抱歉，目前不可以。我们支持 CSV 和 JSON 进行导入。

请评论我对用例的回答，或通过 google+ 或 twitter 联系我们，以便我们将其视为功能请求。

# c# - 最小公倍数

> ID：13569810
> 
> 赞同：22
> 
> 时间：2012-11-26T17:16:57.913
> 
> 标签：c#, lcm

我有当前的编码，它曾经是一个 goto，但我被告知不要再使用 goto，因为它不受欢迎。我在将其更改为 for 循环时遇到了麻烦。我对 C# 和一般编程相当陌生，所以其中一些对我来说是全新的东西。任何帮助，将不胜感激。实际问题是输入两个数字并找到最小的公倍数。

这是 goto 的原文：

```
BOB:
    if (b < d)
    {                
        a++;
        myInt = myInt * a;
        b = myInt;
        myInt = myInt / a;

        if (b % myInt2 == 0)
        {
            Console.Write("{0} ", h);
            Console.ReadLine();
        }

    }
    if (d < b)
    {
        c++;
        myInt2 = myInt2 * c;
        d = myInt2;
        myInt2 = myInt2 / c;

        if (d % myInt == 0)
        {
            Console.Write("{0} ", t);
            Console.ReadLine();
        }
        else
        {
            goto BOB;
        }

    }
    else
    {
        goto BOB;
    }

   } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2013-12-29T11:57:41.727

这是最小公倍数计算的更有效和简洁的实现，它利用了它与最大公因数（又名最大公约数）的关系。此最大公因数函数使用欧几里得算法，该算法比 user1211929 或 Tilak 提供的解决方案更有效。

```
static int gcf(int a, int b)
{
    while (b != 0)
    {
        int temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}

static int lcm(int a, int b)
{
    return (a / gcf(a, b)) * b;
} 
```

有关更多信息，请参阅有关计算[LCM](http://en.wikipedia.org/wiki/Least_common_multiple#Computing_the_least_common_multiple)和[GCF](http://en.wikipedia.org/wiki/Euclidean_algorithm#Implementations)的 Wikipedia 文章。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T17:20:23.347

试试这个：

```
using System;

public class FindLCM
{
    public static int determineLCM(int a, int b)
    {
        int num1, num2;
        if (a > b)
        {
            num1 = a; num2 = b;
        }
        else
        {
            num1 = b; num2 = a;
        }

        for (int i = 1; i < num2; i++)
        {
            int mult = num1 * i;
            if (mult % num2 == 0)
            {
                return mult;
            }
        }
        return num1 * num2;
    }

    public static void Main(String[] args)
    {
        int n1, n2;

        Console.WriteLine("Enter 2 numbers to find LCM");

        n1 = int.Parse(Console.ReadLine());
        n2 = int.Parse(Console.ReadLine());

        int result = determineLCM(n1, n2);

        Console.WriteLine("LCM of {0} and {1} is {2}",n1,n2,result);
        Console.Read();
    }
} 
```

输出：

```
Enter 2 numbers to find LCM
8
12
LCM of 8 and 12 is 24 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:27:38.363

试试这个

```
 int number1 = 20;
 int number2 = 30;
 for (tempNum = 1; ; tempNum++)
 {
   if (tempNum % number1 == 0 && tempNum % number2 == 0)
   {
       Console.WriteLine("L.C.M is - ");
       Console.WriteLine(tempNum.ToString());
       Console.Read();
       break;
    }
 }

// output -> L.C.M is - 60 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-26T12:29:26.353

```
 int num1, num2, mull = 1;

        num1 = int.Parse(Console.ReadLine());  
        num2 = int.Parse(Console.ReadLine());

        for (int i = 1; i <= num1; i++)
        {
            for (int j = 1; j <= num2; j++)
            {
                if (num1 * j == num2 * i)
                {
                    mull = num2 * i;
                    Console.Write(mull); 
                    return;
                }
            }
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-26T11:26:15.433

这是查找 LCM 的优化解决方案。

```
 private static int lcmOfNumbers(int num1, int num2)
    {
        int temp = num1 > num2 ? num1 : num2;
        int counter = 1;
        while (!((temp* counter++) % num1 == 0 && (temp* counter++) % num2 == 0)) {
        }
        return temp* (counter-2);
    } 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-04T07:52:28.697

这是一种递归解决方案。这可能是关于一些面试问题。我希望它有帮助

```
 public static int GetLowestDenominator(int a, int b, int c = 2)
    { 
        if (a == 1 | b == 1) {
            return 1;
        }
        else if (a % c == 0 & b % c == 0)
        {
            return c;
        }
        else if (c < a & c < b)
        {
            c += 1;
            return GetLowestDenominator(a, b, c);
        }
        else
        {
            return 0;
        }
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-03-21T18:40:14.630

```
int n1 = 13;
int n2 = 26;

for (int i = 2; i <= n1; i++)
 {
    if (n1 % i == 0 && n2 % i == 0)
    {
    Console.WriteLine("{0} is the LCM of {1} and 
    {2}",i,n1,n2);
    break;
 }

  } 
```

# c# - 在 MSBuild .targets 中创建集合变量

> ID：13569813
> 
> 赞同：2
> 
> 时间：2012-11-26T17:16:59.920
> 
> 标签：c#, visual-studio, msbuild, vsto, build-process

## 语境

存在一个烦人的 Excel 加载项编译错误，我目前能够解决它的唯一方法是编辑 VSTO MSBuild .targets 文件

*   *C:\Program Files\MSBuild\Microsoft\VisualStudio\v11.0\OfficeTools\Microsoft.VisualStudio.Tools.Office.targets*

通过下面的修改，我可以编译 Excel 加载项，**但副作用是不再显示我的自定义功能区**。

此处详细描述了 VSTO 错误和解决方法：[“FindRibbons”任务意外失败](http://connect.microsoft.com/VisualStudio/feedback/details/651634/the-findribbons-task-failed-unexpectedly%20%22FindRibbons%22%20task%20failed%20unexpectedly)

## .targets 修改具有空 RibbonTypes 的不良副作用

```
<!--  This part is causing the compilation to fail and has to be commented out -->
<!--  <FindRibbons-->
<!--           AssemblyName="$(AbsolutePathToCustomization)"-->
<!--           TargetFramework="$(TargetFrameworkVersion)"-->
<!--        >-->
<!--  <Output TaskParameter="RibbonTypes" ItemName="RibbonTypesCollection"/>-->
<!--  </FindRibbons>-->

<!-- Now RibbonTypes is empty, causing the side-effect-->       
<!-- Used to be RibbonTypes="@(RibbonTypesCollection)"-->       
<!-- Can I manually recreate @(RibbonTypesCollection)?-->       
<GenerateOfficeDocumentManifest Condition="'$(VSTO_ProjectType)' == 'Document'"
    SolutionID="$(SolutionID)"
    RibbonTypes=""
    TargetFramework="$(TargetFrameworkVersion)"
> 
```

## 手动填写参数？

现在我需要提供如下内容

**“ProjectNamespace.RibbonName、AssemblyName、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null”**

*   但我不确切知道数据必须采用什么形式，而且我也不知道 MSBuild 语法？
*   怎么可能手动填充 RibbonTypes 属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-08T06:07:18.787

我有这个问题。这显然是因为我将参考“Microsoft.Office.Tools.Common.v4.0.Utilities”上的“复制本地”设置从 True 更改为 False。

我已经将一个项目从 VS2012 升级到 VS2013，并注意到该引用是唯一设置为“Copy Local = True”的引用。所以我把它设置为假。因为它是不同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T18:07:20.523

我有同样的问题。就我而言，它依赖于我的解决方案中的一个项目。由于该组件正在使用第三方库，它必须编译为 x86，而不是插件推荐的“任何 CPU”。

幸运的是，在我的情况下，修复很简单——将组件拆分为“API”和“Impl”部分，将 API 部分编译为“Any CPU”，然后引用它而不是完整的组件。

# regex - 为 LEX 完成评论正则表达式

> ID：13569827
> 
> 赞同：1
> 
> 时间：2012-11-26T17:17:51.060
> 
> 标签：regex, compiler-construction, bison, lex

我正在使用 Lex 和 Yacc 构建一个计算器编译器。这个想法基于以下资源：[http](http://epaperpress.com/lexandyacc/index.html) ://epaperpress.com/lexandyacc/index.html 。

对于给定的输入文件，我需要识别所有注释：

```
//.TEST -- JWJ
//.Step final  -- testing all requirements
//.source: test-1m.cal
//.expected output: test-1m_expected.out

/**
 *  This program will use Newton's method to estimate the roots of

 This should be a comment as well, but does not get picked up

 *  f(x) = x^3 - 3*x 
 */
 float xn;
 float xo;
// int num_iterations;
 xo = 3.0;
 xn = 3.0;
 num_iterations = 1;

 /* A do-while loop */
 do {
  print xo;
  xo = xn;
  xn = xo - ( xo * xo * xo - 3.0 * xo  ) / ( 3.0 * xo * xo - 3.0);
  num_iterations = num_iterations + 1;
} while ( num_iterations <= 6 )

print xn; // The root found using Newton's method.
print (xo * xo * xo - 3.0 * xo ); // Print f(xn), which should be 0. 
```

我在我的 lex 文件中使用以下正则表达式：

```
"//"[^\n]*|"\/\*".*"\*\/"
"\/\*"([^\n])*  
(.)*"\*\/" 
```

我不明白为什么不匹配多行注释？有人可以提供一些见解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T18:24:41.230

flex 中的`.`字符匹配任何字符，除了换行符（因此它与 相同`[^\n]`）。因此，您的正则表达式都不匹配任何包含换行符的注释。

C 风格注释的常用正则表达式是：

```
"/*"([^*]|\*+[^*/])*\*+"/" 
```

这匹配注释标记内的 0 个或多个“除 * 之外的任何内容”或“1 个或多个 *s 后不跟 * 或 /”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-06T05:15:46.503

The regular expression for comments in C or C++ program is like:

`"//".*|"/*"(.*[\n].*)*"*/"`

# jquery - 在页面上使用任意数量的输入字段自动完成

> ID：13569831
> 
> 赞同：0
> 
> 时间：2012-11-26T17:18:12.047
> 
> 标签：jquery, ajax, autocomplete, jquery-autocomplete

我有这个 ajax 自动完成功能，它适用于每个带有 .train 类的输入字段。但是，传递到 .suggest_q 类的建议会显示在每个 .suggest_q 中，靠近每个 .train 输入字段，而不仅仅是正在使用的 .train 字段。我相信我使用了正确的选择器，因为我在 .click 函数附近使用 'this' 而不是 .train，但我仍然遇到问题。我希望此功能仅适用于用户正在使用的 .suggest_q 和 .train 类，并且让其他类不显示任何建议。让自动完成功能与正在输入的 .train 和 .suggest_a 一起工作的最佳方式是什么？

这是我添加新的 .train 输入字段的 ajax 代码：

```
 <script type="text/javascript">
 $(function() {
        var scntDiv = $('#p_scents');
        var i = $('#p_scents p').size() + 0;

        $('#addScnt').live('click', function() {
                $('<p><input type="text" name="train[]" autocomplete="off" class="train"  /><span class="suggest_q" id="suggest_q"></span><a href="#" id="remScnt">Remove train</a></p>').appendTo(scntDiv);
                i++;
                return false;
        });

        $('#remScnt').live('click', function() {
                if( i > 2 ) {
                        $(this).parents('p').remove();
                        i--;
                }
                return false;
        });
});
</script> 
```

这是ajax自动完成代码

```
<script type="text/javascript">
$(document).ready(function() {
    $(".train").each(function(index, element) {
       $(".train").live("keyup", function() { 
        $(".suggest_q").html("");
            var train = $(this).val();   
            train = $.trim(train);
            if(train)
            {
                $.ajax({

                    url: "train_ajax_query.php",
                    data: "train="+train,
                    success: function(msg) {
                        $(".suggest_q").html(msg);
                        $(".suggest_q ul li").mouseover(function() {
                            $(".suggest_q ul li").removeClass("hover");
                            $(this).addClass("hover");
                        })
                        $(".suggest_q ul li").click(function() {
                            var value   =   $(this).html();
                            $(element).val(value);
                            $(".suggest_q ul li").remove();
                        });

                    }
                });
            }
        });
    });

});

</script> 
```

这是HTML

```
<div id="p_scents">
    <input type="text" class="train" size="20" autocomplete="off" name="train[]" />
                <div id="suggest_q" class="suggest_q">

                </div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:26:38.860

在您的自动完成代码中，您使用全局选择器。您需要保存选定的元素，然后使用这些变量。

```
//Changed the live call for an on call since live is deprecated.
$(document).ready(function() {
  $("#p_scents").on("keyup", '.train', function() { 
    //we save vars with the objects we want to work with.
    var selectedTrain = $(this);
    var selectedSuggest = $(this).siblings('.suggest_q');
    selectedSuggest.html("");
    var train = selectedTrain.val();   
    train = $.trim(train);
    if(train) {
      $.ajax({
        url: "train_ajax_query.php",
        data: "train="+train,
        success: function(msg) {
          //the variables here should still be valid, unless you start more than one ajax
          //call simultaneously.
          selectedSuggest.html(msg);
          selectedSuggest.find("ul li").mouseover(function() {
            // This can happen when the variable selectedSuggest is no longer valid
            //for example, when another try has been done on another .train
            $(this).siblings("li").removeClass("hover");
            $(this).addClass("hover");
          });
          selectedSuggest.find("ul li").click(function() {
            var value   =   $(this).html();
            //again, the vars can have changed here, since the click can be a long time 
            //after the event registration
            $(this).parents('.suggest_q').siblings('input').val(value);
            $(this).parents('.suggest_q').find("li").remove();
          });
        }
      });
    }
  });
}); 
```

该代码尚未经过测试，但应该可以工作。如果您发现任何错误，请发表评论，我会编辑。

# wordpress - 如何在不链接到附件页面的情况下将图像插入帖子

> ID：13569834
> 
> 赞同：0
> 
> 时间：2012-11-26T17:18:17.503
> 
> 标签：wordpress, attachment

我在 wordpress 中显示内容，我`the_content`在循环中使用，一切都很好，我得到了一张图片和帖子的文本。

我唯一不想要的是图像链接会将您带到附件页面，我希望将用户定向到发布永久链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:21:40.840

编辑帖子并更改图像指向的 URL。您可以通过单击图像时单击小编辑图标来执行此操作。

或者，完全删除图像链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:22:40.097

您可以通过可视化编辑器控制插入到帖子中的图像的性质。单击图像，然后选择“编辑图像”。然后，找到“图像链接到”选项（文件、页面或无）。从“页面”更改为“文件”或“无”。

# java - 用新值替换值

> ID：13569840
> 
> 赞同：0
> 
> 时间：2012-11-26T17:19:02.157
> 
> 标签：java

如果我有 ：

```
 if(ipp instanceof TCPPacket){
        TCPPacket tcp = (TCPPacket)ipp;
        int destPort = tcp.dst_port;
        int srcPort = tcp.src_port;
    } 
```

如何用定义的数字（如 10）替换 destPort 和 srcPort ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:21:09.550

这应该这样做。

```
if(ipp instanceof TCPPacket){
    TCPPacket tcp = (TCPPacket)ipp;
    int destPort = 10;
    int srcPort = 10;
} 
```

重新考虑编辑-

如果您实际上是在尝试设置 的值`TCPPacket`，并且[这](http://netresearch.ics.uci.edu/kfujii/Jpcap/doc/javadoc/jpcap/packet/TCPPacket.html)是`TCPPacket`您正在使用的类，则可以这样做：

```
if(ipp instanceof TCPPacket){
    TCPPacket tcp = (TCPPacket)ipp;
    tcp.dst_port = 10;
    tcp.src_port = 10;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:21:15.503

你的意思是像……？

```
if(ipp instanceof TCPPacket){
    TCPPacket tcp = (TCPPacket)ipp;
    int destPort = 10;
    int srcPort = 10;
} 
```

但我可能误解了你的问题，你的意思是如何设置`tcp.dst_port`和`tcp.src_port`？

# c# - 通用存储库中的 LINQ 查询，LINQ to Entities 无法识别该方法

> ID：13569841
> 
> 赞同：0
> 
> 时间：2012-11-26T17:19:02.073
> 
> 标签：c#, linq, entity-framework-4, repository-pattern

我在我的应用程序中设置了一个通用存储库，但我遇到了一些 LINQ 查询的问题。

对于非通用的，这就是我要做的：

```
 private IObjectSet<T> _objectSet;

    public List<int?> GetGroups()
    {
        List<object> objectGroups = new List<object>();
        List<int?> intGroups = new List<int?>();

        var r = (from n in _objectSet
                 select n.Group_ID).Distinct();

        objectGroups = r.OrderBy(n => n.Value).ToList();

        foreach (object value in objectGroups)
        {
            intGroups.Add((int?)value);
        }

        return intGroups;

    } 
```

由于这是**T**类型的通用类型，因此在键入**“n”时。**, IntelliSense 没有列出任何选项，因为**n**的类型没有明确定义（对吗？）。

所以这是我到目前为止所拥有的：

```
public interface IRepository<T> : IDisposable where T : class
{

    IQueryable<T> Fetch();
    IEnumerable<T> GetAll();
    IEnumerable<T> GetAll(bool activeOnly);
    IEnumerable<T> GetAll(string groupID, bool activeOnly);
    IEnumerable<T> Find(Func<T, bool> predicate);
    T Single(Func<T, bool> predicate);
    T First(Func<T, bool> predicate);
    List<int?> GetGroups();
    int Add(T entity);
    void Delete(T entity);
    void Attach(T entity);
    void SaveChanges();
    void SaveChanges(SaveOptions options);
}

public class DataRepository<T> : IRepository<T> where T : class
{

    /// <summary>
    /// The context object for the database
    /// </summary>
    private ObjectContext _context;

    private IEnumerable<T> _previousEntries;
    private string _PKName;

    /// <summary>
    /// The IObjectSet that represents the current entity.
    /// </summary>

    private IObjectSet<T> _objectSet;

    public DataRepository()
    {

        switch (typeof(T).Name)
        {
            case "CRM_Patient":
                _context = new TheseEntities();
                _PKName = "key_patient";
                break;
            case "CRM_Account":
                _context = new ThoseEntities();
                _PKName = "accountnumber";
                break;
            case "CRM_Supplier":
                _context = new OtherEntities();
                _PKName = "supplierid";
                break;
            default:
                _context = new OtherEntities();
                break;
        }

        _objectSet = _context.CreateObjectSet<T>();
        _previousEntries = this.GetAll();
    }

    /// <summary>
    /// Gets all records as an IQueryable
    /// </summary>
    /// <returns>An IQueryable object containing the results of the query</returns>

    public IQueryable<T> Fetch()
    {
        return _objectSet;
    }

    /// <summary>
    /// Gets all records as an IEnumberable
    /// </summary>
    /// <returns>An IEnumberable object containing the results of the query</returns>

    public IEnumerable<T> GetAll()
    {
        return Fetch().AsEnumerable();
    }

    /// <summary>
    /// Finds a record with the specified criteria
    /// </summary>
    /// <param name="predicate">Criteria to match on</param>
    /// <returns>A collection containing the results of the query</returns>
    public IEnumerable<T> Find(Func<T, bool> predicate)
    {
        return _objectSet.Where<T>(predicate);
    }

    public List<int?> GetGroups()
    {
        List<object> objectGroups = new List<object>();
        List<int?> intGroups = new List<int?>();

        //var r = (from n in _objectSet
        //         select n.GetType().GetProperty("Group_ID").GetValue(n, null)).Distinct();

        var r = Fetch().Select(n => n.GetType().GetProperty("Group_ID").GetValue(n, null)).Distinct();

        objectGroups = r.OrderBy(n => n.GetType().GetProperty("Value").GetValue(n, null)).ToList();

        foreach (object value in r)
        {
            intGroups.Add((int?)value);
        }

        return intGroups;

    }
    /// <summary>
    /// Gets a single record by the specified criteria (usually the unique identifier)
    /// </summary>
    /// <param name="predicate">Criteria to match on</param>
    /// <returns>A single record that matches the specified criteria</returns>
    public T Single(Func<T, bool> predicate)
    {
        return _objectSet.Single<T>(predicate);
    }

    /// <summary>
    /// The first record matching the specified criteria
    /// </summary>
    /// <param name="predicate">Criteria to match on</param>

    /// <returns>A single record containing the first record matching the specified criteria</returns>
    public T First(Func<T, bool> predicate)
    {
        return _objectSet.First<T>(predicate);
    }

    /// <summary>
    /// Deletes the specified entitiy
    /// </summary>
    /// <param name="entity">Entity to delete</param>
    /// <exception cref="ArgumentNullException"> if <paramref name="entity"/> is null</exception>
    public void Delete(T entity)
    {
        if (entity == null)
        {
            throw new ArgumentNullException("entity");
        }

        _objectSet.DeleteObject(entity);
    }

    /// <summary>
    /// Deletes records matching the specified criteria
    /// </summary>
    /// <param name="predicate">Criteria to match on</param>
    public void Delete(Func<T, bool> predicate)
    {
        IEnumerable<T> records = from x in _objectSet.Where<T>(predicate) select x;
        foreach (T record in records)
        {
            _objectSet.DeleteObject(record);
        }
    }

    /// <summary>
    /// Dispose
    /// </summary>
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    /// <summary>
    /// Dispose
    /// </summary>
    /// <param name="disposing">A boolean value indicating whether or not to dispose managed resources</param>
    protected virtual void Dispose(bool disposing)
    {
        if (disposing)
        {
            if (_context != null)
            {
                _context.Dispose();
                _context = null;
            }
        }
    }

} 
```

不知何故，我的反射技巧似乎是在 LINQ 语句中执行的，当我为 objectGroups 分配值时，这显然会引发异常。

*LINQ to Entities 无法识别方法 'System.Object GetValue(System.Object, System.Object[])' 方法，并且此方法无法转换为存储表达式。*

有任何想法吗 ？我真的需要保留存储库的通用性。我使用反射的所有方法都抛出异常......

非常感谢。

编辑：添加了大部分存储库的方法和接口。课程中可能缺少一些方法，但这样做是为了减轻阅读：)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:32:36.610

如何在接口中定义`Value`和`GroupID`属性，然后让您的实体实现此接口并将其添加为通用约束？

然后您的`GetGroups`方法将能够在不反射的情况下调用这些属性。

# node.js - nodejs网络错误：502

> ID：13569844
> 
> 赞同：2
> 
> 时间：2012-11-26T17:19:10.980
> 
> 标签：node.js

我在 appfog.com 上托管了一个应用程序。它是一个聊天程序（我是一个节点初学者）。

我的应用程序在本地运行完美，但是当我托管时，出现以下错误：

> “网络错误：502 错误网关 - [http://groupchat.aws.af.cm/socket.io/1/websocket/L3xe0Syb-sSf4ugVtHx-](http://groupchat.aws.af.cm/socket.io/1/websocket/L3xe0Syb-sSf4ugVtHx-) ”
> 
> Firefox 无法与位于 ws://groupchat.aws.af.cm/socket.io/1/websocket/L3xe0Syb-sSf4ugVtHx- 的服务器建立连接。
> 
> this.websocket = new Socket(this.prepareUrl() + query);

我在我的 index.html 文件中使用此代码：

```
<script src="http://groupchat.aws.af.cm/socket.io/socket.io.js"></script>
<script type="text/javascript" charset="utf-8">
    var socket = io.connect('http://groupchat.aws.af.cm');
</script> 
```

我的代码错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T07:54:32.540

我在 AppFog 上托管的 node.js 应用程序也遇到了类似的问题。确保你这样做

```
io.set('transports', ['xhr-polling']); 
```

它为我修好了。

# ajax - Ajax 和 Facebook 评论

> ID：13569848
> 
> 赞同：1
> 
> 时间：2012-11-26T17:19:25.237
> 
> 标签：ajax, facebook, plugins, comments, reload

我正在为我的项目开发自己的网站。项目选项卡与 Ajax 一起使用，用户可以对每个项目进行评论。问题是当我使用ajax调用项目页面时，那些项目注释没有加载。

我到处都读过我需要解析这个新代码，但我不知道如何。有人可以逐步解释我该怎么做吗？

PS：当我重新加载页面时，评论会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T06:01:41.647

在你的 ajax 调用之后，使用这个函数：FB.XFBML.parse();

# android - Android GPS 正在返回过时的信息

> ID：13569849
> 
> 赞同：0
> 
> 时间：2012-11-26T17:19:28.517
> 
> 标签：android, google-maps, gps, locationmanager, locationlistener

在我当前的应用程序中，返回的位置数据已过时。我使用一种基于更新之间的最小时间/距离获取更新的方法。但是，假设我关闭手机，开车到另一个城市，然后重新打开手机。在这种情况下，我的 GPS 读数将关闭。我如何强制应用程序获取当前位置而不是 getLastKnownLocation()。

我听说过 locationListener，但我读过的所有内容都对如何使用它非常模糊。

这是我的代码，以防万一这澄清了发生了什么：

```
public class GPSHandling extends Service implements LocationListener{

    private final Context myContext;

    //flag for gps status
    public boolean isGPSEnabled = false;

    //flag for network status
    public boolean isNetworkEnabled = false;

    // used to determine if i can get a location either by network or GPS
    public boolean canGetLocation = false;

    Location myloc;

    public double latitude;
    public double longitude;

    public int MIN_TIME_BTWN_UPDATE = 500*10;  // in miliseconds, so 10sec 
    public int MIN_DISTANCE_BTWN_UPDATE = 10;  // in meters 
    protected LocationManager locManager;

    public GPSHandling(Context context){
        this.myContext= context;
        getLocation();
    }
    public Location getLocation(){
        try{
            locManager =(LocationManager) myContext.getSystemService(LOCATION_SERVICE);

            // now get gps status
            isGPSEnabled = locManager.isProviderEnabled(LocationManager.GPS_PROVIDER);

            //now the same for network
            isNetworkEnabled = locManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

            if (!isGPSEnabled && !isNetworkEnabled){
                // do nothing since neither provider are enabled (this.cangetlocation = false but its already set to that by default)
            }
            else{
                this.canGetLocation=true;
                //first get values for locManager from the network provider. send parameters telling when to update
                if(isNetworkEnabled){
                    locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, MIN_TIME_BTWN_UPDATE, MIN_DISTANCE_BTWN_UPDATE, this);
                    Log.d("provider", "network");
                    //if we are successful, then check to see if the location manager isnt null. attempt to get the current location from the manager
                    if (locManager != null){
                        myloc =locManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                            // after getting the current location, attempt to get the latitude and longitude values
                            if (myloc != null){
                                latitude = myloc.getLatitude();
                                longitude = myloc.getLongitude();
                                              }
                                           }
                                    }
                //now get values for locManager from the GPS provider. send parameters telling when to update
                if(isGPSEnabled){
                    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, MIN_TIME_BTWN_UPDATE, MIN_DISTANCE_BTWN_UPDATE, this);
                    Log.d("provider", "GPS");
                }
                //if we are successful, then check to see if the location manager isnt null. attempt to get the current location from the manager
                    if(locManager!= null){
                        myloc = locManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    }
                    // after getting the current location, attempt to get the latitude and longitude values
                        if(myloc != null){
                            latitude = myloc.getLatitude();
                            longitude = myloc.getLongitude();
                        }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
        return myloc;
    }
    // get an update of the current latitude by using this class method
    public double getMyLatitude(){
        if (myloc!= null){
            latitude = myloc.getLatitude();
        }
        return latitude;
    }
    //get an update of the current longitude by using this class method
    public double getMyLongitude(){
        if (myloc != null ){
            longitude = myloc.getLongitude();
        }
        return longitude;
    }

    // use this method to find if app can get the current location
    public boolean canGetMyLocation(){
        return this.canGetLocation;
    }

    public void showGPSDialog(){
        AlertDialog.Builder alert = new AlertDialog.Builder(myContext);
        // Setting Dialog Title 
        alert.setTitle("Location Setting");
        // Setting Dialog Message
        alert.setMessage("GPS is not enabled, do you want to enable this now in the settins menue?");

        // setting icon to dialog
        //alert.setIcon(R.drawable.)

        // on pressing settings button
        alert.setPositiveButton("Settins", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                myContext.startActivity(intent);
            }
        });
        //on pressing cancel button
        alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
                dialog.cancel();
            }
        });

        // showing the alert dialog
        alert.show();
    }

    public void stopUsingGPS(){
        if(locManager !=null){
            locManager.removeUpdates(GPSHandling.this);
        }
    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T21:12:59.263

您已经`LocationListener`在代码中使用了一半。您只是没有完全实现代码。

下面的这个方法在您的代码中是空的：

```
@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

} 
```

这是每次 GPS 产生位置更新时调用的方法。

您应该执行以下操作来完成它：

```
@Override
public void onLocationChanged(Location location) {
    latitude = location.getLatitude();
    longitude = location.getLongitude();
} 
```

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:28:22.937

您是否阅读了相应的文档？首先查看[Location API](http://developer.android.com/guide/topics/location/strategies.html "位置 API")和[LocationListener](http://developer.android.com/reference/android/location/LocationListener.html "位置监听器")。

`LocationListener`实际上使用起来非常简单，并且是可靠地检索设备位置的唯一（干净）方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:30:40.703

位置数据通常需要**30 秒才能完全预热**。正如您所要求的那样，`getLastKnownLocation()`您确实可以返回一个过时的位置。

在Google 本身的[位置策略](http://developer.android.com/guide/topics/location/strategies.html)中阅读更多相关信息。

# php - 同时运行多个cron实例

> ID：13569854
> 
> 赞同：2
> 
> 时间：2012-11-26T17:19:43.103
> 
> 标签：php, cron

我在我的数据库中设置了一些条目来在 php 中运行一些脚本。所以我会每隔几分钟运行一个 cron 文件，看看接下来的几分钟我是否有一些脚本要运行，我会触发它们，我想知道如果我有一个脚本要在 12:10 执行会发生什么在 5 分钟内，如果我有另一个请求在 12:12 运行相同的脚本，而第一个脚本的执行尚未完成，会发生什么情况。文件是否被锁定直到执行完成？要不然是啥？

它是在不同时间执行的同一个文件。

我想我可以用 cron 选项卡做到这一点，但我不喜欢那样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:21:58.450

它们同时运行不会有问题，但请记住，如果它们将写入同一个文件/数据库表，您可能会遇到问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T17:23:20.177

它将运行脚本两次、三次或任意多次。如果您只想一次运行这个脚本，您可以创建一个锁定文件，然后检查它是否存在。例子：

```
if(file_exists('/tmp/script.lock')){
  exit();
}
file_put_contents('/tmp/script.lock','');

// execute code

unlink('/tmp/script.lock'); 
```

# asp.net - 当内容页面有 ScriptManager 时，如何在母版页中使用 AJAX？

> ID：13569855
> 
> 赞同：0
> 
> 时间：2012-11-26T17:19:55.003
> 
> 标签：asp.net, asp.net-ajax, asp.net-3.5

在我的 ASP.NET 3.5 项目中，大多数内容页面都有 ScriptManager 控件，但母版页没有。我现在想在母版页中使用 UpdatePanel，但不允许放置另一个 ScriptManager。

我无法在内容页面中更改为 ScriptManagerProxy，因为更改需要复制到大约 50 页。

有没有办法通过共享内容页面的 ScriptManager 或其他方式在母版页中使用 UpdatePanel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:31:47.680

我能想到的三种方式。

第一种方法是使用放置`ScriptManager`在 ContentPlaceHolder 内部，在其他页面上也有 `ScriptManager`这个将被覆盖，在你想要存在的页面上，如果可能的话，不要使用这个 ContentPlaceHolder。

```
<asp:ContentPlaceHolder ID="PlaceHolderID" runat="server" >
    <asp:ScriptManager ID="ScrMang" runat="server" >
    </asp:ScriptManager>
</asp:ContentPlaceHolder> 
```

第二种方法是制作第二个母版页，来自第一个母版页，如果可能的话，将这第二个母版页与 ScriptManager 和所有其余部分一起使用。

最后，更改所有 50 页，将其`ScriptManager`移至母版页，将其从其余页面中删除。有时我们会这样做:)

# android - 短信广播接收器不工作

> ID：13569856
> 
> 赞同：2
> 
> 时间：2012-11-26T17:19:59.970
> 
> 标签：android, sms, broadcastreceiver

我发现当 GO SMS 或其他使用 SMS 的类似应用程序安装在 Android 手机上时，不会调用 SMS Broadcastreceiver。

我应该删除所有这些应用程序以接收消息吗？

Broadcastreceiver 意图的最高优先级是什么？

据我所知，这是 GO SMS Pro app android:priority="2147483747" 的优先级

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T13:37:44.693

请按照以下步骤操作： 1 - 在您的 Android 手机上启动 GoSMS 应用程序 2 - 在“菜单 -> 设置 -> 接收设置”下 - 取消选中“禁用其他消息通知”框

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T08:00:05.323

尝试先安装 GOSMS 应用程序，然后安装您自己的应用程序，这样就可以了。GOSMS 应用程序具有最高优先级，可以为任何应用程序设置。

# excel - Excel VLOOKUP 给出错误值

> ID：13569859
> 
> 赞同：9
> 
> 时间：2012-11-26T17:20:08.540
> 
> 标签：excel, vlookup

我有一个 VLookup 单元格，它给了我错误的值：这是表格：

```
 PID Product Price   User    User name   Deal On Amount After
in  1001    table   1001    1   Milly   No  1000
in  1001    table   100 13  Vernetta    Yes 900
out 1001    table   50  14  Mireya  No  900
out 1001    table   100 15  Rosanne Yes 1000
out 1001    table   101 16  Belinda No  1000
in  1001    table   200 1   Milly   Yes 800
in  1234    chair   300 2   Charlena    Yes 500
in  1234    chair   100 3   Mina    Yes 400
in  1234    chair   50  4   Sabina  Yes 350
in  8231    couch   20  5   Joni    Yes 330
in  1001    table   150 6   Armando Yes 180
in  1001    table   100 7   Noemi   Yes 80
in  8231    couch   40  8   Ashlie  Yes 40
in  8231    couch   30  9   Ann Yes 10
out 1001    table   201 10  Angelina    Yes 211
out 1234    chair   300 11  Melvina Yes 511
out 8231    couch   21  12  Mattie  Yes 532 
```

产品列是具有以下公式的 VLOOKUP

```
VLOOKUP(B6,$L$2:$M$10, 2) 
```

B 是 PID 列。L2:M10 中的表格如下：

```
PID Prodcut
1001    table
1234    chair
8231    desk
2311    closet
9182    book_shelf
1822    bed
1938    coffee_book_table
2229    couch 
```

现在如您所见。PID 8231 是一张桌子，但它看起来像一张沙发。你能看出问题所在吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-26T17:26:35.057

问题的症结在于您编写公式的方式，您忘记了最后一个参数“FALSE”或 0，这意味着您想要一个 EXACT MATCH。所以你的公式应该是这样的：

```
VLOOKUP(B6, $L$2:$M$10, 2, FALSE) 
```

或者

```
VLOOKUP(B6, $L$2:$M$10, 2, 0) 
```

两者都做同样的事情。

它的默认设置为 TRUE，它会查找最接近的匹配项，只有在您查找的索引已排序时才需要该匹配项。

# php - 打破页面上的所有 jquery 滑块

> ID：13569862
> 
> 赞同：0
> 
> 时间：2012-11-26T17:20:19.500
> 
> 标签：php, html, wordpress

这是我正在使用的测试服务器：

[http://www.astwood.co.uk/testsite/wordpress/](http://www.astwood.co.uk/testsite/wordpress/)

我在三个红色框中的两个中设置了两个使用liquidSlider（尾滑块的响应式分支）的滑块。当我把那个休息

```
<?php wp_head(); ?> 
```

钩在

```
<head> 
```

标签。

任何人都可以看一下，看看他们是否可以阐明为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:39:40.233

页面上有两个 jQuery 脚本实例！这会造成很多冲突和混乱。您或您的插件之一在没有使用正确[`wp_enqueue_script`](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)功能的情况下链接到 jQuery。

我将继续指出 Advanced Ajax Page Loader。尝试停用该插件，看看您的滑块是否开始工作。我已经研究过了，该插件实际上在将脚本排入队列方面做得不错：

```
function enqueue_AAPL() {
    //Make sure we use latest jquery?
    wp_deregister_script('jquery');
    wp_register_script('jquery', plugins_url( 'jquery.js' , __FILE__ ));
    wp_enqueue_script('jquery');
} 
```

所以我的猜测是你已经`<script type="text/javascript" src="http://www.astwood.co.uk/testsite/wordpress/wp-content/themes/AstwoodV3/js/jquery-1.8.2.min.js"></script>`在你的头文件中包含了某个地方。找到它，拿出来。然后确保将所有脚本（如 jQueryUI、fancybox、liquid-slider、jquery.tweet 等）加入队列，记住`dependencies`参数

# node.js - 为什么我的客户端只在客户端页面刷新后从 node.js 接收数据？

> ID：13569864
> 
> 赞同：0
> 
> 时间：2012-11-26T17:20:22.730
> 
> 标签：node.js, socket.io, node-mysql

这很奇怪。这是我的日志的删节输出：

```
info  - socket.io started
debug - served static content /socket.io.js
debug - client authorized
info  - handshake authorized D7J-52pdfYAtijFhFxh7
debug - setting request GET /socket.io/1/websocket/D7J-52pdfYAtijFhFxh7
debug - set heartbeat interval for client D7J-52pdfYAtijFhFxh7
debug - client authorized for
debug - websocket writing 1::
establishing db connection.
Attaching new socket D7J-52pdfYAtijFhFxh7 to namespace /59a0747b-50b3-46c9-be7e-3d74fd513fcf for actID: 1. 
```

```
 debug - served static content /socket.io.js
debug - client authorized
info  - handshake authorized 6eUwG7fH-CG3vx3CFxh8
debug - setting request GET /socket.io/1/websocket/6eUwG7fH-CG3vx3CFxh8
debug - set heartbeat interval for client 6eUwG7fH-CG3vx3CFxh8
debug - client authorized for
debug - websocket writing 1::
establishing db connection.
debug - client authorized for /59a0747b-50b3-46c9-be7e-3d74fd513fcf
debug - websocket writing 1::/59a0747b-50b3-46c9-be7e-3d74fd513fcf
Attaching new socket 6eUwG7fH-CG3vx3CFxh8 to namespace /59a0747b-50b3-46c9-be7e-3d74fd513fcf for actID: 1. 
```

第一个块是在初始客户端连接上，它将命名空间传递给 socket.io，如下所示：`http://server/59a0747b-50b3-46c9-be7e-3d74fd513fcf`

请注意这两行是空白的：

```
debug - client authorized for
debug - websocket writing 1::
```

第二个块（都在同一个日志中）发生在我点击客户端网页上的刷新之后。相同的连接 URL，但您会注意到

```
debug - client authorized for /59a0747b-50b3-46c9-be7e-3d74fd513fcf
debug - websocket writing 1::/59a0747b-50b3-46c9-be7e-3d74fd513fcf
```

正在显示必要的信息，以便节点将数据发送到命名空间的客户端。

**编辑：** ~~我不明白为什么我必须刷新客户端页面才能成功建立连接，特别是当我调查`io.namespaces['/59a0747b-50b3-46c9-be7e-3d74fd513fcf'].sockets`对象时，列出了客户端的套接字。~~ **在初始客户端连接之后，在 io 对象的任何位置都找不到命名空间。为什么？**

可能值得一提，也可能不值得一提，数据库查找是客户端连接上发生的第一件事，我使用的是 node-mysql，但它连接到不同的远程服务器以获取该信息。

# c - C: printf 非打印\n

> ID：13569865
> 
> 赞同：1
> 
> 时间：2012-11-26T17:20:27.293
> 
> 标签：c, sockets, newline, printf

在 C 中，我要求服务器打印它收到的任何消息的内容。所有消息都遵循以下格式：“消息：/counter/”。

```
while (1){
            length = sizeof(struct sockaddr);
    /*      receive from client */
            lenstr = recv(newfd, buff, 20000, 0);
            if (lenstr == -1){
                perror("recv(): ");
                exit(1);
            }
            buff[lenstr] = '\0';
            printf("Received: %s \n", buff);
    /*        send back to client*/
            if (send(newfd, buff, lenstr, 0) < 0){
                perror("send(): ");
                exit(-1);
            } 
```

当我运行服务器时，消息一个接一个地出现，而不是换行。我在这里想念什么？（这里是 TCP 连接）谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T18:47:37.497

它从套接字接收的数据可能包含零或控制字符。这些不应打印。

尝试使用以下函数将接收到的数据转储到`stdout`. 它用一个点替换所有不可打印的字符：

```
void dump_buf(char const* buf, size_t buf_len) {
    char const* buf_end = buf + buf_len;
    while(buf != buf_end) {
        char c = *buf++;
        putchar(isprint(c) ? c : '.');
    }
    putchar('\n');
}

// ...

lenstr = recv(newfd, buff, 20000, 0);
if (lenstr == -1) {
    perror("recv(): ");
    exit(1);
}
dump_buf(buff, lenstr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T18:34:25.587

TCP 没有“消息”，它在两个方向上处理连续的字节流。您只是在读取截至该瞬间接收到的数据与您的 2000 之间的任何内容。也许您真的想要[流控制传输协议](http://en.wikipedia.org/wiki/Stream_Control_Transmission_Protocol)？或者以某种方式标记消息结束（可能通过'\n'），并逐个字符地读取？或者只是读取单个消息的长度（如果它们是固定长度的，那就是）？

# formula - 使用 INDIRECT() 函数引用偏移单元格

> ID：13569866
> 
> 赞同：1
> 
> 时间：2012-11-26T17:20:27.620
> 
> 标签：formula, openoffice-calc

假设我有一个单元格，比如说`Sheet2.A1`，其值为：`Sheet1.A10`。它包含从何处获取数据的信息。

现在我想获取这些数据，我用`INDIRECT(Sheet2.A1)`. 但是，我还想从同一列下面的某些单元格中提取数据。所以假设我想从`Sheet1.A11`和中提取数据`Sheet1.A12`。

如何计算此偏移量以提取数据？

该功能是否有任何扩展`INDIRECT`，我可以在下面添加一列或两列的偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:14:17.553

我使用`=OFFSET(INDIRECT(Sheet2.A1),1,0)`和解决了它`=OFFSET(INDIRECT(Sheet2.A1),2,0)`

# c# - 应用程序未使用 application.run(FRM) 显示在任务栏中。尝试了多种方法

> ID：13569867
> 
> 赞同：0
> 
> 时间：2012-11-26T17:20:32.567
> 
> 标签：c#, .net, vb.net, winforms, taskbar

运行框架 4.0 (VB.net)

ShowInTaskbar 属性设置为 True。

这里是运行主窗口的代码。

```
 Dim frm As New frmMain
 frm.ShowInTaskbar = True
 Application.Run(frm) 
```

这里是来自 frmMain 的所有代码

```
 Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try
        Application.DoEvents()
        Me.Focus()
        Me.Activate()

        PeutExecuterSynchronisationAutomatique = True
        'placer le bouton d'aide en ligne 
        btnAideToolTip.Location = New Point((btnPreference.Location.X - btnAideToolTip.Width) - 5, btnAideToolTip.Location.Y)
        btnAideToolTip.Visible = True

        Label5.Text = "version(x)"

    Catch ex As Exception
        HandleException(ex)
    End Try
End Sub 
```

这里所有来自继承表单的代码

```
Public Overridable Sub FormBase_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Try

        If Not designmode AndAlso Not Application.ExecutablePath.ToLower().IndexOf("devenv.exe") > -1 Then
            If EasyDealINI.FichierINIEasyDealTailleDefaut = False Then

                Me.Height = CInt(Me.Height * Ratio)
                Me.Width = CInt(Me.Width * Ratio)
                Me.Font = New Font(Me.Font.FontFamily, (Me.Font.Size * Ratio) - (DIMINUEUR_RATIO_POLICE * Ratio), Me.Font.Style)

                Me.CenterToScreen()

                UC_MenuBottom.AjusterControles()
                UC_MenuBottom.AppliquerTypeBouton()
            End If
        End If

        If Not DesignMode Then
            'Sert à ce qu'EasyDeal en plein écran n'ait pas l'air d'un Transformer qui se déplie.
            'Me.Visible = False --> Suspend le layout dans FormBaseDetailCalcul (voir AjusterControls) - Philippe 2008/06/04

            If Not FormBase.DossierImagesPath Is Nothing Then
                Dim strNomFichier As String = FormBase.DossierImagesPath & "Icone.ico"  'Le signe chinois
                'Dim strNomFichier As String = FormBase.DossierImagesPath & "Logo.ico"   'La terre
                Dim Fichier As New FileInfo(strNomFichier)
                If Fichier.Exists Then
                    Me.Icon = New Icon(strNomFichier)
                End If
            End If
        End If

        Me.MaximizeBox = False
        Me.MinimizeBox = True
        DesactiverCloseBouton()

        'Pour permettre que sur le ENTER la navigation se fasse comme en Access
        '(Agir comme un (TAB)... Voir évenement FormBase_KeyUp
        Me.KeyPreview = True
        Me.ShowInTaskbar = True
        Me.StartPosition = FormStartPosition.CenterScreen

        Me.AppliquerCouleurs(Me)

        'on met Easydeal comme texte de fenêtre 
        Me.Text = DEFAULT_WINDOW_TEXT
        Me.Focus()
        Me.Activate()

    Catch ex As Exception
        HandleException(ex)
    End Try
End Sub 
```

但这无济于事，即使我单击表单，应用程序也不会出现在任务栏上。

然而，真正奇怪的是，如果我设置了一个断点，或者我首先单击任务栏，然后再次单击程序将出现在任务栏上的窗体。

alt-tab 使程序也出现在任务栏中。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:15:52.240

什么是窗口的 F​​ormBorderStyle？如果是 FixedToolWindow，它不会显示在任务栏中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:22:32.803

使用这两行在我的表单加载事件中切换 ShowInTaskbar：

它仅在窗口不是模态窗口时才有效。现在这有点好。

```
This.ShowInTaskbar = False;
This.ShowInTaskbar = True; 
```

但是，如果我在模式窗口 showmeintaskbar 上设置为 false 表单会自行关闭

这是调用堆栈：

```
>   EasyDeal.exe!EasyDeal.Windows.UI.FrmMenuSuivi.FrmMenuSuivi_FormClosing(Object sender, System.Windows.Forms.FormClosingEventArgs e) Line 382 Basic
System.Windows.Forms.dll!System.Windows.Forms.Form.OnFormClosing(System.Windows.Forms.FormClosingEventArgs e) + 0x85 bytes  
System.Windows.Forms.dll!System.Windows.Forms.Form.CheckCloseDialog(bool closingOnly) + 0x8d bytes  
System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.System.Windows.Forms.UnsafeNativeMethods.IMsoComponent.FContinueMessageLoop(int reason, int pvLoopData, System.Windows.Forms.NativeMethods.MSG[] msgPeeked) + 0x148 bytes   
System.Windows.Forms.dll!System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(System.IntPtr dwComponentID, int reason, int pvLoopData) + 0x1e9 bytes    
System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(int reason, System.Windows.Forms.ApplicationContext context) + 0x16c bytes  
System.Windows.Forms.dll!System.Windows.Forms.Application.ThreadContext.RunMessageLoop(int reason, System.Windows.Forms.ApplicationContext context) + 0x61 bytes    
System.Windows.Forms.dll!System.Windows.Forms.Application.RunDialog(System.Windows.Forms.Form form) + 0x33 bytes    
System.Windows.Forms.dll!System.Windows.Forms.Form.ShowDialog(System.Windows.Forms.IWin32Window owner) + 0x38f bytes    
System.Windows.Forms.dll!System.Windows.Forms.Form.ShowDialog() + 0x7 bytes 
EasyDeal.exe!EasyDeal.Windows.UI.EasyDealCommon.ShowEasyDealForm(EasyDeal.Windows.UI.FormBase formToShow, EasyDeal.Windows.UI.FormBase formSender, Boolean closeFormSender, Boolean forceDialog) Line 2787 + 0xc bytes  Basic 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-27T06:34:11.017

抱歉，我只有 C# 示例，但同样的逻辑适用！

在 Form_Load 方法中完成表单大小调整或定位的某些情况下，我已经看到了这个问题。像这样的任何动作：

```
// Set Size and location of items...
this.MaximumSize = new System.Drawing.Size(1012, 665);
this.MinimumSize = new System.Drawing.Size(1012, 665);
this.MaximizeBox = false; 
```

或类似的东西：

```
// Centre the main form to centre screen...
this.Location = new Point((Screen.PrimaryScreen.Bounds.Size.Width / 2) - (this.Size.Width / 2), (Screen.PrimaryScreen.Bounds.Size.Height / 2) - (this.Size.Height / 2)); 
```

如果您需要执行上述任何操作，请确保在正确的位置完成。我更喜欢我的：

```
Form1() 
```

方法就在：

```
// Initialize Components...
InitializeComponent(); 
```

方法。这将确保您的表单图标出现并解决您的问题。

# scala - Scala 标准等效

> ID：13569876
> 
> 赞同：8
> 
> 时间：2012-11-26T17:21:06.403
> 
> 标签：scala, haskell, benchmarking, criterion

是否有等效于[标准](http://hackage.haskell.org/package/criterion)的Scala（或Java，我猜） ？我不只是在谈论基准测试库：查看 HTML 结果的标准。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T17:40:13.467

没有。据我所知，截至 2012 年 11 月 26 日，Criterion 尚未移植到任何其他语言生态系统。这没有根本原因。

# html - 如何在没有 PHP 的情况下在 CSS 中制作可视标题？

> ID：13569878
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:21:06.690
> 
> 标签：html, css

我知道您可以通过包含使用 PHP 制作页眉/页脚（如页面顶部和底部）。我听说你可以用 CSS 做同样的事情。这个想法是能够通过在一个地方更改 t 来更改每一页上的标题。如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:23:04.830

您可以使用 导入样式表`@import`，但这仅适用于样式表。您不能使用它将 HTML 导入到文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:30:57.673

您是否尝试过使用 iframe？

```
<iframe src="....../path/filename.html" width="" height=""> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T21:03:48.670

这是做不到的；CSS 不能用于将元素插入 HTML 页面。

# single-sign-on - 手动将 Crowd SSO 令牌存储在 cookie 中？

> ID：13569882
> 
> 赞同：3
> 
> 时间：2012-11-26T17:21:17.190
> 
> 标签：single-sign-on, atlassian-crowd

我正在尝试使用 Atlassian Crowd 实现 SSO，但令人惊讶的是，缺乏好的文档甚至是示例。

到目前为止，我使用**CrowdClient.authenticateSSOUser**对用户进行身份验证，如果成功则取回 SSO 令牌（字符串）。然后，我自己（通过 HttpServletResponse）获取这个令牌并将其填充到 cookie 中。在随后的页面访问中，我获取所有 cookie，搜索这个，然后调用**CrowdClient.validateSSOAuthentication**方法。

我的问题是：我应该为 SSO 使用更多的 Crowd 代码吗？我的手动操作似乎比我预期的要多。

...我确实看到了其他可能性的暗示...例如：

1.  在**crowd.properties**中，您可以指定**crowd.token_key**，这显然是应用程序应该使用什么名称将令牌存储在 cookie 中（尽管设置此值不会神奇地实现）。

2.  诸如[CrowdHttpTokenHelper](http://docs.atlassian.com/atlassian-crowd/latest/com/atlassian/crowd/integration/http/util/CrowdHttpTokenHelper.html)之类的东西存在于最新版本中——但似乎没有容易找到的相关示例（或 JavaDoc 以外的文档）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T13:32:00.627

是的，有一些可能性可以帮助或至少作为参考。

对于现成的实现，您可能需要研究[Integrating Crowd with Spring Security](https://confluence.atlassian.com/display/CROWD/Integrating+Crowd+with+Spring+Security)。

如果您需要更好的控制，请使用[`CrowdHttpAuthenticator`](https://docs.atlassian.com/crowd/current/com/atlassian/crowd/integration/http/CrowdHttpAuthenticator.html). 它将允许您使用用户名和密码对请求进行身份验证，并检查会话是否具有现有的会话 cookie。（它的[具体实现](https://docs.atlassian.com/crowd/current/com/atlassian/crowd/integration/http/CrowdHttpAuthenticatorImpl.html)将接受属性和用途`crowd.token_key`。）

[`CrowdClient`](https://docs.atlassian.com/crowd/current/com/atlassian/crowd/service/client/CrowdClient.html)如果这些不符合您的需求，则可以使用，但这不是唯一的选择。

# algorithm - R中存在哪些并行算法，处理大数据

> ID：13569884
> 
> 赞同：5
> 
> 时间：2012-11-26T17:21:25.417
> 
> 标签：algorithm, r, memory, machine-learning, bigdata

我试图找出 CRAN/github/R-Forge 上的 R 或 R 包中的哪些统计/数据挖掘算法可以在一台服务器上并行或按顺序处理大型数据集，而不会遇到内存不足问题或它可以同时在多台机器上工作。这是为了评估我是否可以轻松地将它们移植到 ff/ffbase 中，例如 ffbase::bigglm.ffdf。

我想把这些分成3部分：

1.  并行更新或处理参数估计的算法

    *   Buckshot ( [https://github.com/lianos/buckshot](https://github.com/lianos/buckshot) )

    *   lm.fit @ 大数据编程 ( [https://github.com/RBigData](https://github.com/RBigData) )

2.  顺序工作的算法（在 R 中获取数据，但只使用 1 个进程，只有 1 个进程更新参数）

    *   bigglm ( [http://cran.r-project.org/web/packages/biglm/index.html](http://cran.r-project.org/web/packages/biglm/index.html) )

    *   复合泊松线性模型（[http://cran.r-project.org/web/packages/cplm/index.html](http://cran.r-project.org/web/packages/cplm/index.html)）

    *   Kmeans @ biganalytics ( [http://cran.r-project.org/web/packages/biganalytics/index.html](http://cran.r-project.org/web/packages/biganalytics/index.html) )

3.  处理部分数据

    *   分布式文本处理 ( [http://www.jstatsoft.org/v51/i05/paper](http://www.jstatsoft.org/v51/i05/paper) )

而且我想排除简单的并行化，例如通过交叉验证来优化超参数。任何其他指向这些模型/优化器或算法的指针？也许是贝叶斯？也许是一个名为 RGraphlab (http://graphlab.org/) 的包？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:01:23.153

您是否阅读过 CRAN 上的[高性能计算](http://cran.r-project.org/web/views/HighPerformanceComputing.html)任务视图？

它涵盖了您提到的许多要点，并概述了这些领域的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T15:17:03.910

随机森林并行运行很简单。这是[foreach 小插图](http://cran.r-project.org/web/packages/foreach/vignettes/foreach.pdf)中的示例之一：

```
x <- matrix(runif(500), 100)
y <- gl(2, 50)
library(randomForest); library(foreach)
rf <- foreach(ntree=rep(250, 4), .combine=combine,
.packages='randomForest') %dopar% randomForest(x, y, ntree=ntree) 
```

您可以使用此构造在集群中的每个核心上拆分您的森林。

# nsstring - IOS编程中如何加“NSString”？

> ID：13569885
> 
> 赞同：0
> 
> 时间：2012-11-26T17:21:33.367
> 
> 标签：nsstring

怎么加`NSString`？例子：

```
NSString *a=@"hello";
NSString *b=@"world";
NSString *s=@""; 
```

我想：

```
s = "helloworld"; 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:20:31.490

请使用以下代码。

```
NSString *s= [NSString stringWithFormat:@"%@%@", a, b]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-25T12:25:13.517

你所说的是串联。你需要使用：

```
NSString *a = @"This ";
NSString *b = @"is a string";
NSString *c= [NSString stringWithFormat:@"%@%@", a, b]; 
```

查看：[objective-c 为初学者](http://ios-blog.co.uk/tutorials/objective-c-strings-a-guide-for-beginners/)提供完整列表的指南。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-27T05:38:21.547

```
NSString *a=@"hello";    
NSString *b=@"world";    
NSString *s=[NSString stringWithFormat:@"%@%@", a, b]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-08T15:18:24.080

你也可以`stringByAppendingString:`像这样使用 -

```
NSString *completeString = [a stringByAppendingString:b]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-25T03:15:28.197

```
NSString *completeString = [a stringByAppendingString:b]; 
```

这个功能又好又简单...

# c++ - Libpng，Palette png是否带有alpha？

> ID：13569887
> 
> 赞同：7
> 
> 时间：2012-11-26T17:21:38.520
> 
> 标签：c++, png, libpng

如何知道调色板 png 是否带有 alpha？我得到有关图像的信息`png_get_IHDR`

之后我看`color_type - PNG_COLOR_TYPE_PALETTE`

但我找不到如何知道这个 png 图像是否有 alpha 通道。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T18:32:38.397

PNG以两种（或三种）完全不同的方式支持透明度：

1.  具有分离**Alpha 通道**（RGBA 或 GA）的真彩色或灰度图像

2.  [**（可选） tRNS 块**](http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html#C.tRNS)中的透明度额外信息。其中有两种不同的口味：

    2a. **对于索引图像：tRNS 块为一个、几个或所有调色板索引**指定透明度值（“alpha”）。

    2b。对于真彩色或灰度图像：tRNS 块指定应被视为完全透明**的单一颜色值（RGB 或灰色）。**

如果您对案例*2a*感兴趣，并且您正在使用 libpng，您应该查看函数[png_get_tRNS()](http://refspecs.linuxbase.org/LSB_3.1.0/LSB-Desktop-generic/LSB-Desktop-generic/libpng12.png.get.trns.1.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-06T08:48:13.077

这可能会有所帮助：

```
if (color_type == PNG_COLOR_TYPE_RGBA || color_type == PNG_COLOR_TYPE_GA)
    *alphaFlag = true;
else
{
    png_bytep trans_alpha = NULL;
    int num_trans = 0;
    png_color_16p trans_color = NULL;

    png_get_tRNS(png_ptr, info_ptr, &trans_alpha, &num_trans, &trans_color);
    if (trans_alpha != NULL)
        *alphaFlag = true;
    else
        *alphaFlag = false;
} 
```

# ruby-on-rails - Rails 的返回：[BUG] 分段错误

> ID：13569890
> 
> 赞同：11
> 
> 时间：2012-11-26T17:21:42.167
> 
> 标签：ruby-on-rails, ruby

如果我运行`rails s`，我会得到：

```
/Users/adam/.rvm/gems/ruby-1.9.3-p327/gems/pg-0.13.2/lib/pg_ext.bundle: [BUG] Segmentation fault
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0]

Abort trap: 6 
```

版本：

```
rails -v
Rails 3.2.1
ruby -v
ruby 1.9.3p327 (2012-11-10 revision 37606) [x86_64-darwin12.2.0] 
```

如果我使用**1.9.3**，为什么错误消息中提到了 ruby​​ 版本**1.8.7**？

 *** * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-23T11:53:28.127

当您最初安装 pg gem 时，它看起来像是针对 Ruby 1.8.7 编译的。简单地运行`gem uninstall pg; gem install pg`应该针对 Ruby 1.9.3 重新编译它。

如果您还没有，我建议您使用[RVM](http://rvm.io "虚拟机")来避免此类问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T11:00:18.333

我遇到了类似的问题，运行任何东西都会`bundle exec`出现分段错误：

```
~/mayapp >bundle exec rake -T
/Users/rogermarlow/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/lib/mysql2/mysql2.bundle: [BUG] Segmentation fault
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin11.0]

Abort trap: 6 
```

我有两个问题（1）使用 1.9.3p327 而不是 1.9.3p125 和（2） GEM_HOME 环境变量指向一个现在不存在的目录。所以对我来说解决方法是：

```
~/myapp >rvm list

rvm rubies

=* ruby-1.9.3-p327 [ x86_64 ]

# => - current
# =* - current && default
#  * - default

~/myapp >rvm install 1.9.3-p125
**snip**
~/myapp >rvm use 1.9.3-p125
Using /Users/rogermarlow/.rvm/gems/ruby-1.9.3-p125
Running /Users/rogermarlow/.rvm/hooks/after_use_maglev
~/myapp >echo $GEM_HOME
/Users/rogermarlow/.rvm/gems/ruby-1.9.3-p125
~/myapp ># you should check that the directory in $GEM_HOME exists, I had ...-p125@global which had been removed at some point
~/myapp >bundle install
**snip** 
```

现在尝试`bundle exec`分段错误...

```
~/myapp >bundle exec rake -T
rake about                  # List versions of all Rails frameworks and the environment
rake assets:clean           # Remove compiled assets
rake assets:precompile      # Compile all the assets named in config.assets.precompile
**snip** 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T13:33:08.613

我不知道你的情况如何，我之前安装了 ruby​​ 1.8.7 来测试一个旧项目，然后我切换到我当前的 rails 项目文件夹，我有一个 .rvmrc 文件将我的 gemset 设置为 1.9.3@blabla . 我的 ruby​​ 和 rails 版本是正确的（1.9.3、3.2.12），但显然 Postgres 仍在尝试使用 1.8.7。并有你提到的同样的错误。

我的解决方案：

```
1/ cd out of the current folder project with the .rvmrc file
2/ rvm use 1.9.3 --default 
```

然后我回到我当前的 rails 项目运行 bundle update pg，以防万一，我不知道这是否真的有任何效果，**瞧，一切正常！****

# jquery - IE：jquery 无法正常工作（有时）

> ID：13569891
> 
> 赞同：2
> 
> 时间：2012-11-26T17:21:43.530
> 
> 标签：jquery, internet-explorer

在部分末尾附近`<head>`（但不是紧接在之前`</head>`）我有：

```
 <script type="text/javascript">

            $(document).ready(function () {

                $.ajax({
                    type: "get", url: "http://somesite.com/getstuff",
                    success: function (data, text) {
                       ...
                        }
                    },
                    error: function (request, status, error) {                        
                    }
                });

            });

    </script> 
```

这适用于 firefox 和 chrome，但有时仅适用于 IE 9 (10)。任何人都可以阐明这一点吗？

是的，确实我忘了说不工作是指 IE 根本没有发出 http 请求（控制台中也没有错误）。

**编辑**

好吧，我关闭了 IE 缓存，现在一切正常。嗯，废话。我想知道如何避免这种情况，我会尝试将脚本放在正文中并报告是否可行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T17:49:06.757

IE 通常有缓存问题。尝试将ajax缓存设置为false

```
$.ajaxSetup({cache:false}); 
```

# eclipse - 在tomcat上运行html表单时黑色文本框上的黑色

> ID：13569892
> 
> 赞同：2
> 
> 时间：2012-11-26T17:21:52.227
> 
> 标签：eclipse, macos, tomcat

我有一个烦人的问题，当我在tomcat 7.0 上从eclipse 运行一个jsp 页面时，每个表单的文本输入框都显示为黑底黑字，因此当您在框中书写时无法阅读。我尝试再次安装eclipse，但问题仍未解决。如何更改更改文本框的背景颜色？这似乎是一个tomcat问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T20:37:34.723

Tomcat 没有设置文本和背景的颜色。可以在以下位置之一以（各种方式）设置这些参数：

1.  在您的 Java 代码中（在您的 JSP 页面控制器之一中，在服务器上）。当然，我们谈论的是为客户端生成 HTML/CSS 代码的服务器端 Java 代码。
2.  在用于显示页面的网络浏览器中。浏览器可以覆盖 HTML 页面使用的字体、颜色和其他参数。
3.  在 Eclipse 用来显示页面的 Web 浏览器中。
4.  也许，甚至在影响 Eclipse 的 Linux Gnome 主题中（或 Windows 和 MacOS 上的等效桌面主题）。

因此，您必须在这些地方查找将输入框背景设置为黑色的参数（黑色文本通常是默认设置）。

# python - 如何创建自己的 haar 级联并应用它？

> ID：13569894
> 
> 赞同：14
> 
> 时间：2012-11-26T17:21:52.873
> 
> 标签：python, opencv, face-detection

我有兴趣创建自己的 haar 级联 xml 文件，用于 python 来检测某个徽标（假设它是苹果徽标）。

我尝试按照 [http://docs.opencv.org/trunk/doc/user_guide/ug_traincascade.html](http://docs.opencv.org/trunk/doc/user_guide/ug_traincascade.html) 和 [http://note.sonots.com/SciSoftware/haartraining.html的说明进行操作](http://note.sonots.com/SciSoftware/haartraining.html)

问题是，虽然我得到了一个有效的级联文件，但它没有检测到任何东西。具体来说，当我尝试检测用于创建它的原始图像中的对象时，即使那时也没有检测到它。

我已经尝试过调整图像的大小，或者只是通过将其插入图片来将其置于更大的上下文中。

我究竟做错了什么？

在 shell 中，我运行：

```
opencv_createsamples -img original.jpg -bg negatives.dat -vec samples_set.vec  -w 48 -h 48

opencv_traincascade -bg negatives.dat -data mycascade -vec samples_set.vec -w 48 -h 48 
```

这似乎工作正常，创建一个级联文件。然后，在python中：

```
import cv2
cascade2 = cv2.CascadeClassifier('mycascade.xml')
cv2Image = cv2.imread('original.jpg')
cascade2.detectMultiScale(cv2Image) 
```

检测结果为空。我确实尝试使用 python 附带的“标准”xml 进行测试并且它可以工作，所以我的有问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-23T17:16:47.120

我希望您现在已经找到了答案，因为您提出问题已经 2 年了！无论如何，我会为可能有同样问题的其他人分享我所知道的。关于这个问题的最好的和完全解释的教程之一来自[Coding-Robin](http://coding-robin.de/2013/07/22/train-your-own-opencv-haar-classifier.html)，我个人从那里学到了很多东西。要记住的一件事是，您不应该使用创建 haar 级联所涉及的相同图像，原因是它已经被归类为正（或负）样本，因此尝试处理它是毫无用处的。

# c++ - ReadDebuggeeMemoryEx 无法读取被调试对象

> ID：13569896
> 
> 赞同：0
> 
> 时间：2012-11-26T17:21:56.677
> 
> 标签：c++, visual-studio-2010

我已经为我的 VisualStuido2010 编写了一个调试器扩展来显示我的类类型。我基于 Microsoft 提供的 EEAddin 示例编写代码库。但我在调用 ReadDebuggeeMemoryEx 时失败了。

我找不到任何失败的理由。GetLastError() 返回 0。

```
ObjectId objid;
DWORD nGot;
int state = E_FAIL;
if ( pHelper->ReadDebuggeeMemoryEx(pHelper, pHelper->GetRealAddress(pHelper), sizeof(ObjectId), &objid, &nGot) )
{
｝else { log("Fail ReadDebuggeeMemoryEx %d\n", GetLastError());} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:56:12.363

该函数`ReadDebuggeeMemoryEx(...)`返回 a`HRESULT`不是 a `BOOL`。
尝试类似：

```
if (pHelper->ReadDebuggeeMemoryEx(...) == S_OK) {
  // good
｝ else {
  // bad
} 
```

# mysql - mySql 数据库安全

> ID：13569905
> 
> 赞同：0
> 
> 时间：2012-11-26T17:22:39.673
> 
> 标签：mysql, database-security

我有一个数据库安全问题。这是我的场景：

1.  我有一个 CodeIgniter 应用程序，在私有内部服务器上具有关联的 mySql 数据库（主）
2.  有几个卫星应用程序需要主数据库中的数据子集

当务之急是主数据库中的数据不被泄露。我的想法是，我需要将数据库的这些子集镜像到卫星应用程序可以访问的公共位置。这样通信是单向的。

实现这一目标的最佳方法是什么？您建议采取哪些其他安全措施来保护我的数据库？

# c++ - 如何使用 boost.format 自己输出百分号？

> ID：13569907
> 
> 赞同：16
> 
> 时间：2012-11-26T17:22:43.417
> 
> 标签：c++, boost

如何使用 Boost.Format 输出百分号本身？

IE：

```
boost::format msg("5% complete"); // <- how to actually output the percent sign 
```

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-26T17:25:19.973

简单地用另一个百分号逃避它

```
boost::format msg("5%% complete"); 
```

# vba - VBA StringBetween

> ID：13569910
> 
> 赞同：0
> 
> 时间：2012-11-26T17:22:51.093
> 
> 标签：vba, excel

我有一个小问题。

我想从我的站点获取版本号，它的存储方式如下：

```
<version>1</version> 
```

如何将这 2 个字符串之间的数字转换为变量？

我对 vba 完全陌生，只需要它进行简单的检查。

谢谢

//编辑：

现在尝试：

```
 Data = .responseText
        version = Replace(Replace(Data, "<version>", vbNullString), "</version>", vbNullString)
        If version > Cells(2, 3) Then
           strTitle = "new version"
           strPrompt = "new version available"
           iRet = MsgBox(strPrompt, vbOKOnly + vbExclamation, strTitle)
        End If 
```

在单元格中，站点 a 上也有一个“1”：

```
<version>1</version> 
```

但是每次我运行它时，都会弹出消息框..

我只是测试了一下。版本以及单元格输出 = 1。不知道为什么它不会工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:32:00.903

在 VBA 中：

```
Dim Data As String, cleanData As String

Data = "<version>1</version>"

cleanData = Replace(Replace(Data, "<version>", vbNullString), "</version>", vbNullString) 
```

在 Excel 中，其中 B57 是文本“1”：

```
LEFT(RIGHT(B57, LEN(B57) - FIND(">",B57)), 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:27:59.487

...鉴于你知道它会被这两个词特别包围，你可以使用类似的东西：

```
MyVersion = Replace(Replace(x, "<version>", ""), "</version>", "") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:29:07.483

如果这已经存储在字符串中，那么一个简单的答案可能是：

```
replace(
    replace(myString,"<version>","")
,"</version>","") 
```

基本上，只需用空替换字符串的前半部分，然后用空替换后半部分，只留下数字。

# linux - 条件 Awk hashmap 匹配查找

> ID：13569913
> 
> 赞同：3
> 
> 时间：2012-11-26T17:22:52.693
> 
> 标签：linux, perl, bash, unix, awk

我有 2 个表格文件。一个文件包含 50 个键值的映射，仅称为**lookup_file.txt。** 另一个文件包含 30 列和数百万行的实际表格数据。**data.txt** 我想用**lookup_file.txt 中的值替换第二个文件的id 列。**.

我怎样才能做到这一点？我更喜欢在 bash 脚本中使用 awk。另外，我可以在 bash 中使用哈希图数据结构来存储 50 个键/值而不是另一个文件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T21:15:40.900

假设您的文件有逗号分隔的字段，并且“id 列”是字段 3：

```
awk '
BEGIN{ FS=OFS="," }
NR==FNR { map[$1] = $2; next }
{ $3 = map[$3]; print }
' lookup_file.txt data.txt 
```

如果这些假设中的任何一个是错误的，如果修复不明显，请提示我们......

编辑：如果你想避免（恕我直言）NR==FNR 测试性能影响，这将是适合使用 getline 的极少数情况之一：

```
awk '
BEGIN{
   FS=OFS=","
   while ( (getline line < "lookup_file.txt") > 0 ) {
      split(line,f)
      map[f[1]] = f[2]
   }
}
{ $3 = map[$3]; print }
' data.txt 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T08:35:37.883

您可以通过 bash 混合使用“排序”和“加入”，而不必在 awk/sed 中编写它，而且它可能会更快：

key.cvs (id, name)

```
1,homer
2,marge
3,bart
4,lisa
5,maggie 
```

data.cvs（名称、动物、所有者、年龄）

```
snowball,dog,3,1
frosty,yeti,1,245
cujo,dog,5,4 
```

现在，您需要先在用户 id 列上对两个文件进行排序：

```
cat key.cvs | sort -t, -k1,1 > sorted_keys.cvs
cat data.cvs | sort -t, -k3,3 > sorted_data.cvs 
```

现在加入2个文件：

```
join -1 1 -2 3 -o "2.1 2.2 1.2 2.4" -t , sorted_keys.cvs sorted_data.cvs > replaced_data.cvs 
```

这应该产生：

```
snowball,dog,bart,1
frosty,yeti,homer,245
cujo,dog,maggie,4 
```

这个：

```
-o "2.1 2.2 1.2 2.4" 
```

是说你想要在最终输出中的 2 个文件中的哪些列。

与其他脚本语言相比，查找和替换多个数据的速度非常快。我没有与 SED/AWK 进行直接比较，但是编写一个包装它的 bash 脚本比用 SED/AWK 编写要容易得多（至少对我而言）。

此外，您可以使用升级版的 gnu coreutils 来加速排序，以便您可以并行进行排序

```
cat data.cvs | sort --parallel=4 -t, -k3,3 > sorted_data.cvs 
```

4 是您要运行它的线程数。我建议每个机器核心 2 个线程通常会使机器最大化，但如果它专门用于此，那很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T18:11:17.340

有几种方法可以做到这一点。但是，如果您想要一个简单的单线，而无需太多验证方式，我会使用 awk/sed 解决方案。

假设如下：

1.  文件是制表符分隔的

2.  你正在使用 bash shell

3.  数据文件中的id在第一列

4.  您的文件如下所示：

## 抬头

```
1   one
2   two
3   three
4   four
5   five 
```

## 数据

```
1   col2    col3    col4    col5
2   col2    col3    col4    col5
3   col2    col3    col4    col5
4   col2    col3    col4    col5
5   col2    col3    col4    col5 
```

我会像这样使用`awk`并`sed`完成这项任务：

```
awk '{print "sed -i s/^"$1"/"$2"/ data"}' lookup | bash 
```

这样做是通过每一行查找并将以下内容写入标准输出

`sed -i s/^1/one/ data`

`sed -i s/^2/two/ data`

等等。

接下来，它将每一行通过管道传送到 shell ( `| bash`)，shell ( ) 将执行`sed`表达式。-i 对于就地，您可能需要`-i.bak`创建一个备份文件。请注意，您可以将扩展名更改为您想要的任何内容。sed 正在寻找行首的 id，如`^`. 您不想替换可能不包含 id 的列中的“id”。

您的输出将如下所示：

```
one     col2    col3    col4    col5
two     col2    col3    col4    col5
three   col2    col3    col4    col5
four    col2    col3    col4    col5
five    col2    col3    col4    col5 
```

当然，您的 id 可能不仅仅是 1 比 1、2 比 2 等，但这可能会让您朝着正确的方向开始。我非常松散地使用了正确的术语。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T18:07:29.700

我这样做的方法是使用`awk`编写`awk`程序来处理较大的文件：

```
awk -f <(awk '
   BEGIN{print " BEGIN{"}
        {printf "      a[\"%s\"]=\"%s\";",$1,$2}
   END  {print "      }";
         print "      {$1=a[$1];print $0}"}
   ' lookup_file.txt
) data.txt 
```

假设该`id`列是第 1 列；如果没有，您需要更改`$1`in 的两个实例`$1=a[$1]`

# linux - jboss 采用并执行旧耳朵而不是新部署的耳朵

> ID：13569914
> 
> 赞同：0
> 
> 时间：2012-11-26T17:22:55.040
> 
> 标签：linux, jakarta-ee, ejb-3.0, jboss5.x, ear

我在 linux 机器上使用 JBoss 5.1.0.GA，我正在为 EJB 项目部署一个耳朵，在查看服务器日志时，我取消部署旧耳朵，它成功取消部署，然后我把我的新耳朵放在deploy 目录和日志显示它已成功部署，但是在运行项目时，新的更改不会生效，而是执行旧的 ear 内容。请指教！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:55:11.047

我在 Windows 机器上遇到过 5.1 EJB3 项目的这个问题几次。发生了一些非常可疑的事情。

你试过一切吗？

即取消部署，停止服务，可能的话重启机器，启动服务，重新部署

我记得在我的情况下它卡住了，直到机器重新启动。虽然从未真正发现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T00:42:41.723

关闭服务器后，只需删除 JBoss 启动时生成的所有临时文件夹。这些文件夹是（如果您使用默认文件夹）：

*   /服务器/默认/数据
*   /服务器/默认/日志
*   /服务器/默认/tmp
*   /服务器/默认/工作

删除它们后，只需重新启动 JBoss，所有新更改都应该在那里。

# javascript - 如何在这个正则表达式中重复最后一个块

> ID：13569916
> 
> 赞同：0
> 
> 时间：2012-11-26T17:23:04.900
> 
> 标签：javascript, regex

以下代码

```
var input = "http://local.app.com/frontend/v12/#/M1WPD/!/abcde/!/fghij/";

var regex = new RegExp("(?:.+?#/([a-zA-Z0-9]{5})/(?:!/([a-zA-Z0-9]{5})/)*)");

var result = input.match(regex);

console.log(result);

// ["http://local.app.com/frontend/v12/#/M1WPD/!/abcde/!/fghij/", "M1WPD", "fghij"] 
```

应该打印这个...

```
["http://local.app.com/frontend/v12/#/M1WPD/!/abcde/!/fghij/", "M1WPD", "abcde", "fghij"] 
```

旁...

```
["http://local.app.com/frontend/v12/#/M1WPD/!/abcde/!/fghij/", "M1WPD", "fghij"] 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:28:42.820

您无法`n`通过量词捕获组数。结果是它将捕获该特定组中最后出现的匹配！

您必须手动选择组...

它应该是：

```
(?:.+?#/([a-zA-Z0-9]{5})/!/([a-zA-Z0-9]{5})/!/([a-zA-Z0-9]{5}) 
```

* * *

如果有任意数量的匹配项，您可以`split`使用以下正则表达式

```
/[#!]/|/$ 
```

上面的正则表达式表示拆分出现`/`后跟`#`或`!`后跟的字符串`/`

**或者**

`/`后跟字符串的结尾`$`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T17:35:05.770

```
 Regex pattern = new Regex("[^0-9a-zA-Z]*\\w{5,}"); 
```

按照上面的代码进行更改并尝试

# cakephp - CakeDC 搜索插件 - 检查是否设置了标志

> ID：13569917
> 
> 赞同：0
> 
> 时间：2012-11-26T17:23:05.997
> 
> 标签：cakephp, cakedc

我在我的蛋糕应用程序（2.2）中使用 cakeDC 搜索插件。作为基本搜索表单的一部分，我想确保只返回实时记录（live 是数据库中的一个标志 - tinyint，0 表示已删除，1 表示实时）。

我试过在我的控制器中这样做：

```
$isLive = array('live' => '1');
$this->passedArgs = set::merge($this->passedArgs, $isLive); 
```

但它没有工作...

我发现了这个[问题](https://stackoverflow.com/questions/12691961/cakedc-search-plugin-use-pb)，但答案并没有真正帮助。谁能告诉我哪里出错了？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:28:58.237

解决了，我错过了模型中的filterArgs：

```
public $filterArgs = array(
    'username' => array('type' => 'like'),
    'company' => array('type' => 'like'),
    'live' => array('type' => 'value')
); 
```

希望这会帮助某人

# google-chrome-frame - 谷歌浏览器框架不工作

> ID：13569922
> 
> 赞同：0
> 
> 时间：2012-11-26T17:23:25.303
> 
> 标签：google-chrome-frame

我的网站设置为提示安装适用于 IE8 及以下版本的 Google Chrome Frame。

在一台运行 Windows Server 2003 R2、64 位和 IE8 的机器上，我在 Google Chrome Frame 安装覆盖图中收到一条消息“很抱歉。Google Chrome Frame 仅适用于 Windows 上的 Internet Explorer 6、7、8 和 9 7 / Vista / XP SP2 或更高版本”。

这是否意味着 Chrome Frame 无法识别 Win 2003 Server 机器上的 IE8？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-08T19:55:10.207

在 Windows Server 2003 64bit 上运行的 IE 中，Google Chrome Frame 似乎无法正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T18:26:53.563

根据[Chrome Frame Plugin 的常见问题解答](https://support.google.com/chrome/bin/answer.py?hl=en&answer=161796)：

您需要满足以下系统要求才能使用 Google Chrome Frame：

*   Internet Explorer 6、7 或 8
*   32 位和 64 位 Windows XP、Window Vista、
*   Windows 7、Windows 8 至少 512 MB RAM（推荐）
*   管理权限

# javascript - javascript switch 语句的最佳实践

> ID：13569924
> 
> 赞同：13
> 
> 时间：2012-11-26T17:23:42.393
> 
> 标签：javascript, switch-statement

我目前正在使用 switch 语句编写一个 jquery 脚本，我想知道当几个“案例”共享一些属性时最好的解决方案是什么，假设我有这种模式：

```
switch (settings.xxx) {
case 'case1':
    Execute some code
    break;
case 'case2':
    Execute some code
    break;
case 'case3':
    Execute some code
    break;
} 
```

对于每种情况，我都有相当多的代码部分重复，因为某些属性对于这 3 种情况是通用的。所以我的问题是，我可以这样做吗：

```
switch (settings.xxx) {

case 'case1':
case 'case2':
case 'case3':
    Execute some code
    break;

}

switch (settings.xxx) {

case 'case1':
case 'case2':
    Execute some code
    break;
case 'case2':
case 'case3':
    Execute some code
    break;

} 
```

或者这是一个不好的做法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T17:25:08.220

不，这不是坏习惯。实际上，这是一种很好的做法。这样，您就[不会重复自己](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。

另外，请查看文档：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-07T14:35:55.437

最佳实践是避免重复代码。这样，如果您以后需要修改代码，您就不需要记住在多个地方进行。

在某些代码只适用于某些情况的情况下，可以省略一个break，执行完第一节后会跳到下一节。这仅适用于特殊情况代码可以在一般情况代码之前执行的情况。执行此操作时要小心，并添加明确说明您是故意这样做的注释。否则，如果稍后编辑代码，其他人可能不会意识到这是故意的，并在缺少的地方添加中断。见下文：

```
switch (settings.xxx) {
case 'case1':
case 'case2':
    Execute some code that applies to cases 1 & 2
    // break left out to allow execution to fall through
case 'case3':
    Execute some code that applies to cases 1 - 3
    break;
case 'case4':
    Execute different code
    break;
} 
```

# php - 检查 LEFT JOINED 查询的行数

> ID：13569925
> 
> 赞同：0
> 
> 时间：2012-11-26T17:23:41.823
> 
> 标签：php, mysql

我想检查查询的每个连接部分是否返回了一些结果。

```
first table result set LEFT JOIN second table result set LEFT JOIN third table result set. 
```

我正在考虑检查每组的第一列 - 是否为空，但不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:27:57.797

您可以检查每个左连接是否存在匹配的字段。如果没有匹配项，该字段将为 NULL。

例子

```
SELECT  CASE WHEN `second table`.joinfield IS NULL THEN 'No Match' ELSE 'Match' END as is_match 
```

等等

# php - 如何检查PHP脚本是否由shell运行

> ID：13569926
> 
> 赞同：5
> 
> 时间：2012-11-26T17:23:47.563
> 
> 标签：php

> **可能重复：**
> [在 php 中，如何检测执行是从 CLI 模式还是通过浏览器？](https://stackoverflow.com/questions/1991346/in-php-how-to-detect-the-execution-is-from-cli-mode-or-through-browser)

如何检查 PHP 脚本是由 Shell（命令行）还是由服务器运行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T17:25:54.293

使用[`php_sapi_name`](http://php.net/manual/en/function.php-sapi-name.php)功能：

```
if(php_sapi_name() == 'cli')
{
    // running from CLI
} 
```

从[手册](http://php.net/manual/en/function.php-sapi-name.php)：

> 返回描述 PHP 正在使用的接口类型（服务器 API、SAPI）的小写字符串。例如，在 CLI PHP 中，此字符串将是“cli”，而在 Apache 中，它可能具有几个不同的值，具体取决于所使用的确切 SAPI。下面列出了可能的值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T17:27:33.420

如果您真的对此感兴趣，这是一个 shell 解决方案：

```
ps -ef | grep $scriptname | grep -v grep;
if [[ $? -eq 0 ]]; then
    echo "PROCESS IS RUNNING";
fi 
```

说明：

```
ps -ef            ## lists all running processes
grep $scriptname  ## keep only the process with the name we suppply
grep -v grep      ## the previous grep will show up in the ps -ef so this prevents false positives.  

if [[ $? -eq 0 ]]; then
    echo "PROCESS IS RUNNING";
fi                    ## if the last line returns something then process is running. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T17:25:49.567

您可以检查`$argv`变量是否存在。

或者

你可以检查这些：

```
if(isset($_SERVER['HTTP_USER_AGENT']) && strpos($_SERVER['HTTP_USER_AGENT'],"CLI") !== FALSE) {
 ///
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:37:24.657

这适用于我的产品环境：

```
if( substr(php_sapi_name(), 0, 3) == 'cli' ) {
    die("You Should Use CGI To Run This Program.\n");
} 
```

# mvvm - 如何将 AutoCompleteBox.PopulateComplete 方法与 MVVM 范例结合起来？

> ID：13569927
> 
> 赞同：3
> 
> 时间：2012-11-26T17:23:53.370
> 
> 标签：mvvm, silverlight-4.0, silverlight-toolkit

这是设置：我有一个自动完成框，它由从 WCF 服务获取数据的视图模型填充。所以到目前为止它非常简单明了。

现在，我正在尝试遵循 MVVM 的原则，即视图模型对视图本身一无所知。这很好，因为我[通过 triggers 和 commands](https://stackoverflow.com/questions/13565484/how-can-i-pass-the-event-argument-to-a-command-using-triggers)将自动完成框的填充事件绑定到我的视图模型的方法。

所以视图模型正在获取数据，而视图正在等待。还没有问题。

现在，视图模型获得了数据，我将结果集合传递给绑定到控件的 ItemSource 属性的属性。屏幕上什么也没有发生。

我去 MSDN 并找到官方批准的方式来处理这种情况（[http://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox.populating(v=vs .95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.autocompletebox.populating(v=vs.95).aspx) ):

> *   将 MinimumPrefixLength 和 MinimumPopulateDelay 属性设置为大于默认值的值，以最大限度地减少对 Web 服务的调用。
>     
>     
> *   处理 Populating 事件并将 PopulatingEventArgs.Cancel 属性设置为 true。
>     
>     
> *   进行必要的处理并将 ItemsSource 属性设置为所需的项目集合。
>     
>     
> *   调用 PopulateComplete 方法向 AutoCompleteBox 发出信号以显示下拉菜单。

现在我看到最后一步的一个大问题，因为我不知道如何从视图模型中调用视图上的方法，前提是他们不知道（也不应该知道！）关于彼此的任何事情。

那么我到底应该如何在不违反 MVVM 原则的情况下从视图模型中调用 PopulateComplete 视图方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:54:56.773

如果您使用 Blend 的交互库，一个选项是附加[`Behavior<T>`](http://msdn.microsoft.com/en-us/library/ff726531.aspx)的`AutoCompleteBox`：

```
public class AsyncAutoCompleteBehavior : Behavior<AutoCompleteBox>
{
    public static readonly DependencyProperty SearchCommandProperty
        = DependencyProperty.Register("SearchCommand", typeof(ICommand), 
              typeof(AsyncAutoCompleteBehavior), new PropertyMetadata(null));

    public ICommand SearchCommand
    {
        get { return (ICommand)this.GetValue(SearchCommandProperty); }
        set { this.SetValue(SearchCommandProperty, value); }
    }

    protected override void OnAttached()
    {
        this.AssociatedObject.Populating += this.PopulatingHook;
    }

    protected override void OnDetaching()
    {
        this.AssociatedObject.Populating -= this.PopulatingHook;
    }

    private void PopulatingHook(object sender, PopulatingEventArgs e)
    {
        var command = this.SearchCommand;
        var parameter = new SearchCommandParameter(
                () => this.AssociatedObject
                          .Dispatcher
                          .BeginInvoke(this.AssociatedObject.PopulateComplete),
                e.Parameter);
        if (command != null && command.CanExecute(parameter))
        {
            // Cancel the pop-up, execute our command which calls
            // parameter.Complete when it finishes
            e.Cancel = true;
            this.SearchCommand.Execute(parameter);
        }
    }
} 
```

使用以下参数类：

```
public class SearchCommandParameter
{
    public Action Complete
    {
       get;
       private set;
    }

    public string SearchText
    {
       get;
       private set;
    }

    public SearchCommandParameter(Action complete, string text)
    {
        this.Complete = complete;
        this.SearchText = text;
    }
} 
```

此时你需要做两件事：

1.  连接行为

    ```
    <sdk:AutoCompleteBox MinimumPopulateDelay="250" MinimumPrefixLength="2" FilterMode="None">
        <i:Interaction.Behaviors>
            <b:AsyncAutoCompleteBehavior SearchCommand="{Binding Search}" />
        </i:Interaction.Behaviors>
    </sdk:AutoCompleteBox> 
    ```

2.  创建一个处理您的 aysnc 搜索的 DelegateCommand。

    ```
    public class MyViewModel : ViewModelBase
    {
        public ICommand Search
        {
            get;
            private set;
        }

        private void InitializeCommands()
        {
            this.Search = new DelegateCommand<SearchCommandParamater>(DoSearch);
        }

        private void DoSearch(SearchCommandParameter parameter)
        {
            var client = new WebClient();
            var uri = new Uri(
                @"http://www.example.com/?q="
                + HttpUtility.UrlEncode(parameter.SearchText));
            client.DownloadStringCompleted += Downloaded;
            client.DownloadStringAsync(uri, parameter);
        }

        private void Downloaded(object sender, DownloadStringCompletedEventArgs e)
        {
            // Do Something with 'e.Result'
            ((SearchCommandParameter)e.UserState).Complete();
        }
    } 
    ```

# java - AudioFormat 的 MP3 帧大小？

> ID：13569932
> 
> 赞同：1
> 
> 时间：2012-11-26T17:24:17.933
> 
> 标签：java, audio, mp3

MP3格式的`frameSize`in是什么意思？`AudioFormat`

是1152个样本的压缩长度还是未压缩长度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-02T13:56:37.620

FrameSize = 144 * 比特率 / 采样率

来源：http: [//id3.org/mp3Frame](http://id3.org/mp3Frame)

这是显示 MP3 标准的网站。如果您想了解有关 mp3 的所有信息，请访问该网站。

[http://id3.org/](http://id3.org/)

# odbc - 通过 ODBC 从 64 位应用程序访问 32 位 Firebird 数据库

> ID：13569933
> 
> 赞同：2
> 
> 时间：2012-11-26T17:24:21.753
> 
> 标签：odbc, 64-bit, firebird

我正在运行 Win7 64 位和 Firebird 2.5.2。

是否可以通过 ODBC 从 64 位 C++ 应用程序访问 32 位 Firebird 数据库？我最初的想法是我可以只安装 64 位 Firebird ODBC 驱动程序就可以了。果然，安装后 64 位 ODBC 控制面板应用程序显示 Firebird 驱动程序，但尝试将其指向使用 32 位 Firebird 创建的 .fdb 文件时连接失败。我也从 64 位 firebird 安装中选择客户端库（C:\Program Files\Firebird\Firebird_2_5\bin\fbclient.dll）。

关于从 64 位 C++ 应用程序通过 ODBC 访问 32 位 Firebird 数据库的任何建议？

* * *

编辑：

我的不好，看起来它工作正常。我一定是在设置时不小心混合了一些 32 位和 64 位的配置。一旦我确定我是 1) 运行 64 位服务器，2) 使用 64 位 ODBC 数据源，3) 引用了 64 位客户端 DLL（来自 64 位 Firebird 安装）我的 64 位 C++应用程序连接没有问题。

我以为我检查了这些，但在 32 位和 64 位之间我一定错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T12:52:15.737

请参阅原始帖子中的编辑。问题是在配置中混合了一些 32 位和 64 位部分。它现在工作。正确设置后，您绝对可以从 64 位应用程序访问 32 位数据库。此外，根据 Mark Rotteveel 的说法，只要您在应用程序端使用 64 位部件，您就可以运行 32 位服务器并从 64 位应用程序中使用它。

# c++ - SWIG %ignore 与 typedef 的模板不匹配

> ID：13569939
> 
> 赞同：1
> 
> 时间：2012-11-26T17:24:42.690
> 
> 标签：c++, templates, swig

我有一个模板化的 Vector（如数学向量，而不是 std::vector）类，它可以用 2 到 4 之间的大小实例化。定义类似于：

```
template <uint32_t Size, typename StorageType>
class Vector
{
public:
  Vector(StorageType x, StorageType y);
  Vector(StorageType x, StorageType y, StorageType z);
  Vector(StorageType x, StorageType y, StorageType z, StorageType w);
  ...
}; 
```

在我的 SWIG 文件中，我想包装一个具有 a `Size`of`3`和 a `StorageType`of的版本`int8_t`，所以我这样做了

```
%module Vector
%{
#include "Vector.h"
%}

%include "stdint.i"
%include "Vector.h"

%ignore Vector(int8_t, int8_t);
%ignore Vector(int8_t, int8_t, int8_t, int8_t);
%template(Vector3DInt8) PolyVox::Vector<3,int8_t>; 
```

但它失败`%ignore`了请求的构造函数。

似乎 SWIG 在`%template`宏内部自动从模板参数中“剥离”typedef，因此`%template(Vector3DInt8) PolyVox::Vector<3,int8_t>;`实际上被转换为`%template(Vector3DInt8) PolyVox::Vector<3,unsigned char>;`. 因此，`%ignore`不匹配，因为`unsigned char`不匹配`int8_t`。

如果我`static_assert()`在其中一个我想被忽略的函数中添加一个，我会得到：

```
source/Vector.inl: In constructor ‘Vector<Size, StorageType>::Vector(StorageType, StorageType) [with unsigned int Size = 3u, StorageType = signed char]’:
build/PolyVoxCorePYTHON_wrap.cxx:6446:100:   instantiated from here
source/Vector.inl:56:3: error: static assertion failed: "This constructor should only be used for vectors with two elements." 
```

我也尝试过使用`-notemplatereduce`，但似乎没有效果。

有没有办法让 SWIG 正确忽略不需要的构造函数？

编辑：我使用 GCC 4.5 和 SWIG 2.0.8

编辑 2：添加`stdint.i`到`.i`文件中，因为 Python 类型映射需要它。如果没有`stdint.i`，则`%ignore`可以正常工作，但需要在 Python 中实际使用绑定。

# jquery - 获取前一个元素，中间有一个元素

> ID：13569940
> 
> 赞同：0
> 
> 时间：2012-11-26T17:24:44.943
> 
> 标签：jquery, events, javascript-events, event-handling

我正在编程具有两个具有相同功能的按钮的东西。

我没有将第一个按钮中的所有信息放入第二个按钮，而是在第二个按钮中添加了一个偶数处理程序以触发对第一个按钮的单击，以便运行相同的代码。

我正在使用 jQuery 框架，所以如果可能的话，我可以得到 jQuery 格式的建议。

这是我用于事件处理程序的代码：

```
$(document).on('click', '.enlargeComments', function(){

    $(this).prev('.commentsLink').trigger('click');

}); 
```

具有所有功能的按钮是由 PHP 类创建的，因此将信息放在第二个上是行不通的，也给它一个标识类也意味着对类进行额外的更改，说实话并不理想.

但是现在我在这两者之间有另一个按钮，我的事件处理程序不再工作......我需要一个解决方案来让我原来的一个工作，所以请不要建议改变它当前的工作方式。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:26:16.023

您可以使用它`.prevUntil(sel).prev()`来执行此操作：

```
$(document).on('click', '.enlargeComments', function(){

    $(this).prevUntil('.commentsLink').prev().trigger('click');

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:27:06.927

为什么要这么做？

只需将相同的处理程序附加到两个元素，因为它们无论如何都会做同样的事情：

```
$(document).on('click', '.commentsLink, .enlargeComments', function(){

    //click stuff

}); 
```

# c# - string.IsNullOrEmpty(myString.Trim()) 与 string.IsNullOrWhiteSpace(myString)

> ID：13569941
> 
> 赞同：4
> 
> 时间：2012-11-26T17:24:46.693
> 
> 标签：c#, .net, visual-studio-2010, visual-studio

`string.IsNullOrEmpty(myString.Trim())`对比`string.IsNullOrWhiteSpace(myString)`

哪个更快或更可靠，为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T17:26:30.717

`string.IsNullOrEmpty(myString.Trim())``myString`if is会抛出异常`null`，而`string.IsNullOrWhiteSpace(myString)`会正常工作，因此更可靠。

至于性能，`string.IsNullOrWhiteSpace`应该会更快。

`string.IsNullOrWhiteSpace(myString)`是检查变量是否为空或空格的首选方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T18:39:50.783

> [**IsNullOrWhiteSpace**](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)是一种与以下代码类似的便捷方法，不同之处在于它提供了卓越的性能：

```
return String.IsNullOrEmpty(value) || value.Trim().Length == 0; 
```

可靠性的唯一区别是`myString.Trim()`可能会抛出[NullReferenceException](http://msdn.microsoft.com/en-us/library/system.nullreferenceexception.aspx)。

从性能的角度来看，[Trim](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)是决定因素。请注意，在[Trim](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)的情况下，字符串是如何从每一端迭代的。正如@Lukazoid 指出的那样，在某些情况下，这可能会特别昂贵。[IsNullOrWhiteSpace](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)将从头开始，仅遍历字符串，直到找到非空白字符。下面是 .NET 源代码。

```
 public static bool IsNullOrEmpty(String value) { 
        return (value == null || value.Length == 0); 
    }

    [Pure]
    public static bool IsNullOrWhiteSpace(String value) {
        if (value == null) return true;

        for(int i = 0; i < value.Length; i++) {
            if(!Char.IsWhiteSpace(value[i])) return false; 
        } 

        return true; 
    }

    // Trims the whitespace from both ends of the string.  Whitespace is defined by
    // Char.IsWhiteSpace. 
    // 
    [Pure]
    public String Trim() { 
        Contract.Ensures(Contract.Result<String>() != null);
        Contract.EndContractBlock();

        return TrimHelper(TrimBoth); 
    }

    [System.Security.SecuritySafeCritical]  // auto-generated
    private String TrimHelper(int trimType) { 
        //end will point to the first non-trimmed character on the right
        //start will point to the first non-trimmed character on the Left
        int end = this.Length-1;
        int start=0; 

        //Trim specified characters. 
        if (trimType !=TrimTail)  { 
            for (start=0; start < this.Length; start++) {
                if (!Char.IsWhiteSpace(this[start])) break; 
            }
        }

        if (trimType !=TrimHead) { 
            for (end= Length -1; end >= start;  end--) {
                if (!Char.IsWhiteSpace(this[end])) break; 
            } 
        }

        return CreateTrimmedString(start, end);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:27:11.047

string.IsNullOrWhiteSpace(myString) 更可靠，因为当 myString 为空时它不会引发 NullReferenceException。我相信 IsNullOrWhiteSpace(myString) 比 myString.Trim() 快，想想一个字符串，两端包含 1 个空格，中间包含 300 万个其他字符。在检查之前，这三百万个字符必须被复制到一个新字符串中。IsNullOrWhiteSpace 必须比较两个字符。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T17:28:52.233

`String.IsNullOrWhiteSpace()`将更可靠，更快。

更可靠，因为它正确处理 null。而且速度更快，因为它不需要创建新字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T17:30:28.883

如果你真的想在优化方面走这么远，`string.IsNullOrWhiteSpace(myString)`会有更好的性能，因为它能够立即返回结果。

取以下字符串：

```
" B C    " (4 trailing spaces) 
```

与`string.IsNullOrEmpty(myString.Trim())`：

1.  修剪字符串，迭代 5 个字符（前 1 个空格和 4 个尾随空格），得到“B C”
2.  IsNullOrEmpty 迭代 1 个字符并返回 false。

总共检查了 6 个字符。

与`string.IsNullOrWhitespace(myString)`：

1.  遍历 2 个字符，在第二个字符上返回 false

总共检查了 2 个字符。

尾随空格的数量越大，`string.IsNullOrWhitespace(myString)`相对于替代方案的好处就越大。

正如其他答案和评论中所述，附加字符串的实例化`Trim()`会增加更多开销。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-07T21:13:12.977

这取决于您的应用程序，但您必须小心转义字符。在这里我们考虑`String.IsNullOrEmpty`：

```
String.IsNullOrEmpty(""); //True
String.IsNullOrEmpty(null); //True
String.IsNullOrEmpty("   "); //False
String.IsNullOrEmpty("\n"); //False
String.IsNullOrEmpty("\t"); //False
String.IsNullOrEmpty("hello"); //False 
```

现在`String.IsNullOrWhiteSpace`：

```
String.IsNullOrWhiteSpace("");//True
String.IsNullOrWhiteSpace(null);//True
String.IsNullOrWhiteSpace("   ");//True
String.IsNullOrWhiteSpace("\n");//True
String.IsNullOrWhiteSpace("\t");//True
String.IsNullOrWhiteSpace("hello");//False 
```

# objective-c - 第一次显示视图控制器时未设置 UINavigationBar 外观

> ID：13569942
> 
> 赞同：0
> 
> 时间：2012-11-26T17:24:45.827
> 
> 标签：objective-c, ios, cocoa-touch

使用以下代码设置 UINavigationBar 的外观，但在我的情况下，它在视图控制器第一次显示时未设置。我只需要推动另一个视图控制器，然后设置它。

```
UIImage *gradientImage44 = [[UIImage imageNamed:@"navigationBar44"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

UIImage *gradientImage32 = [[UIImage imageNamed:@"navigationBar32"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

[[UINavigationBar appearance] setBackgroundImage:gradientImage44 forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundImage:gradientImage32 forBarMetrics:UIBarMetricsLandscapePhone]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:42:35.263

有不同的方法可以为 ios 5 及更高版本和低于 ios 5 的 ios 设置 Uinavigationbar 背景图像

对于 ios 5，您可以在应用委托中使用以下代码

```
//Customize the look of the UINavBar for iOS5 devices
 UIImage *gradientImage44 = [[UIImage imageNamed:@"navigationBar44"]   
 resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

UIImage *gradientImage32 = [[UIImage imageNamed:@"navigationBar32"]    
resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];

 [[UINavigationBar appearance] setBackgroundImage:gradientImage44 
 forBarMetrics:UIBarMetricsDefault];

 [[UINavigationBar appearance] setBackgroundImage:gradientImage32 
  forBarMetrics:UIBarMetricsLandscapePhone]; 
```

但是如果您使用的任何 ios 版本低于 ios 5，您将不得不子类化 UINavigationControl 并重载 drawRect 像

```
@interface CustomNavigationBar : UINavigationBar
 @end

 @implementation CustomNavigationBar
 -(void) drawRect:(CGRect)rect 
 {
    UIImage *image = [UIImage imageNamed: @"myNavBarImage"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
 }
@end

// this can go anywhere
+(UINavigationController*) myCustomNavigationController
  {
   YOurViewController *vc = [[[YOurViewController alloc] init] autorelease];
   UINavigationController *nav = [[[NSBundle mainBundle] 
   loadNibNamed:@"CustomNavigationController" owner:self options:nil] objectAtIndex:0];
   nav.viewControllers = [NSArray arrayWithObject:vc];
   return nav;
 } 
```

像这样，您可以自定义导航栏，并且对所有 ios 版本都有效。

您可以通过使用检查 ios 5

```
if ([[UINavigationBar class]respondsToSelector:@selector(appearance)]) {
   ///ios 5 and above.
 } 
```

# asp-classic - VBScript数学表达式不起作用

> ID：13569944
> 
> 赞同：0
> 
> 时间：2012-11-26T17:24:49.883
> 
> 标签：asp-classic, vbscript

在我的 asp 代码中，我有 4 个具有不同值的变量。

```
chAmount = 19.99
totalRefundAmount =0
voidQueueRefundAmount =15.99
amount=4 
```

当我执行以下语句时

```
if (CDbl(chAmount) + CDbl(totalRefundAmount) - CDbl(voidQueueRefundAmount) - CDbl(amount) < 0.00) then
end if 
```

if 条件为真，而它不应该是因为上面表达式的答案应该是 0 并且它不应该进入 if 循环，但它会进入循环内。

我在 Visual Studio 调试器中得到 -1.77635683940025E-15 的表达式`CDbl(chAmount) + CDbl(totalRefundAmount) - CDbl(voidQueueRefundAmount) - CDbl(amount)`

请参阅以下 Visual Studio 调试器的屏幕截图。 [http://screencast.com/t/73PyutXB07R1](http://screencast.com/t/73PyutXB07R1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:26:50.543

那是因为`Double`您要转换为浮点数。

`Double`为什么在处理货币时转换为？使用[`CCur()`](http://www.devguru.com/technologies/vbscript/13903.asp)而不是`CDbl()`.

# java - JPanel 放在 JScrollPanel 后面

> ID：13569945
> 
> 赞同：0
> 
> 时间：2012-11-26T17:24:59.020
> 
> 标签：java, swing, jpanel, mixing, java-canvas

我有这段代码，`Canvas`我创建的扩展`JPanel`它的类在哪里保存图像。但是当我使用它时，它不会将画布放在 顶部`JScrollPane`，而是放在它后面。为什么这样做？

以下是 ScrollPanel 的创建方式：

```
imagePane.setBackground(new java.awt.Color(153, 153, 153));
imagePane.setBorder(null);
jSplitPane2.setRightComponent(imagePane); 
```

这是我的面板在 ScrollPanel 中的位置

```
Canvas canvas = new Canvas();
canvas.setVisible(true);
canvas.setImage(file);
imagePane.setLayout(new GridBagLayout());
canvas.setSizeFromLoaded();
imagePane.add(canvas);
imagePane.repaint(); 
```

画布类对面板的放置没有任何作用，它所做的只是构建和修改它。我确实有一个`JPanel`那里并且它有效，但是一旦我用它切换它，`JScrollPanel`它就开始将画布放在它后面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:56:04.520

*   [你正在](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)混合[`AWT Canvas``Swing JPanel`](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)

*   [`AWT Components`重量级和`Swing JComponents`重量级](https://blogs.oracle.com/thejavatutorials/entry/mixing_heavyweight_and_lightweight_components)

*   导致`AWT Componets`的总是在顶部`Swing JComponents`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T18:19:12.177

确保使用所有轻量级组件（JPanel、JScrollPane 等）。我意识到您命名了您自己的 JPanel Canvas 子类，但由于 Canvas 和 ScrollPane 是 AWT 类，因此在您的代码和描述中有些混乱。

在您的评论中，您说 imagePane 是一个 ScrollPane（我假设您的意思是 JScrollPane）。如果是这样，那么 imagePane.setLayout 是不合适的，应该被删除。您的代码应如下所示：

```
Canvas canvas = new Canvas();
canvas.setImage( someImageFile );
canvas.setSizeFromLoaded();

JScrollPane imagePane new JScrollPane( canvas );
imagePane.setBackground(new java.awt.Color(153, 153, 153));
imagePane.setBorder( null );

jSplitPane2.setRightComponent( imagePane ); 
```

如果 setSetFromLoaded() 能够根据图像的大小设置画布的 PreferredSize，这将起作用。如果由于图像尚未加载而尚未准备好计算其大小（请记住，这通常发生在另一个线程上），那么您可能需要将计算移至 validate() 并在稍后进行。例如，为什么重写 doLayout() 你可以在组件被 revalidated() 时计算你的首选大小。您还应该考虑继承 JComponent 而不是 JPanel，因为您不需要添加任何子级。JComponent 与 JPanel 相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:08:38.403

我想解决这个问题的问题是使用这个：
`imagePane.getViewport().add(canvas);`

而不是这个：
`imagePane.add(canvas);`

# maven - 在自定义 maven 插件中执行之前未初始化 mojo 配置

> ID：13569946
> 
> 赞同：2
> 
> 时间：2012-11-26T17:25:06.937
> 
> 标签：maven, initialization, nullpointerexception, execute, mojo

鉴于我有以下自定义魔力...

```
/**
 * @goal portal-test
 */
public class PortalTestMojo extends AbstractMojo {

    /*
     * @parameter
     * @required
     */
    private String baseUrl;

    public void execute() throws MojoExecutionException {
        getLog().info("" + baseUrl.isEmpty());
    }

} 
```

...当我在以下 pom 上使用 mvn test 运行时...

```
 25   <build>
 26     <plugins>
 27       <plugin>
 28         <groupId>com.lgi.plugins</groupId>
 29         <artifactId>maven-plugin-facade</artifactId>
 30         <version>1.0-SNAPSHOT</version>
 31         <executions>
 32           <execution>
 33             <id>testing-mojo</id>
 34             <phase>test</phase>
 35             <goals>
 36               <goal>portal-test</goal>
 37             </goals>
 38           </execution>
 39         </executions>
 40         <configuration>
 41             <baseUrl>TEST</baseUrl>
 42           
 45         </configuration>
 46       </plugin>
 47     </plugins>
 48   </build> 
```

...我在 baseUrl 上得到一个空指针异常

```
[ERROR] Failed to execute goal com.lgi.day:maven-plugin-facade:1.0-SNAPSHOT:portal-test (testing-mojo) on project testPom: Execution testing-mojo of goal com.lgi.day:maven-plugin-facade:1.0-SNAPSHOT:portal-test failed. NullPointerException -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.lgi.day:maven-plugin-facade:1.0-SNAPSHOT:portal-test (testing-mojo) on project testPom: Execution testing-mojo of goal com.lgi.day:maven-plugin-facade:1.0-SNAPSHOT:portal-test failed.
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution testing-mojo of goal com.lgi.day:maven-plugin-facade:1.0-SNAPSHOT:portal-test failed.
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    ... 19 more
Caused by: java.lang.NullPointerException
    at com.lgi.day.PortalTestMojo.execute(PortalTestMojo.java:52)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101) 
```

谁能告诉我为什么我的 Maven 配置参数在执行之前没有初始化（当它们在 pom 中明确定义时）??????

上面的 pom 文件用于通过插件的集成测试。这是代码：

```
import java.io.File;
import org.apache.maven.plugin.testing.AbstractMojoTestCase;
import com.lgi.day.PortalTestMojo;

public class MojoVaribaleAssignmentTest extends AbstractMojoTestCase {

    private final String TEST = "TEST";

    public void testMojoGoal() throws Exception {
        File testPom = new File(getBasedir(), "src/test/resources/testPom.xml");

        PortalTestMojo mojo = (PortalTestMojo) lookupMojo("portal-test",
                testPom);

        assertEquals(TEST, mojo.getBaseUrl());
        assertEquals(TEST, mojo.getPortalPath());
        assertEquals(TEST, mojo.getUserName());
        assertEquals(TEST, mojo.getPassword());
    }

} 
```

这是插件本身的 pom 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.lgi.day</groupId>
  <artifactId>maven-plugin-facade</artifactId>
  <packaging>maven-plugin</packaging>
  <version>1.0-SNAPSHOT</version>
  <name>maven-plugin-facade Maven Mojo</name>
  <url>http://maven.apache.org</url>
  <dependencies>
    <dependency>
      <groupId>org.apache.maven</groupId>
      <artifactId>maven-plugin-api</artifactId>
      <version>2.0</version>
    </dependency>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.lgi.day</groupId>
        <artifactId>groovy-portal-tests-core</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.shared</groupId>
        <artifactId>maven-plugin-testing-harness</artifactId>
        <version>1.0-beta-1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.maven.plugin-tools</groupId>
        <artifactId>maven-plugin-tools</artifactId>
        <version>RELEASE</version>
    </dependency>
  </dependencies>
</project> 
```

我正在使用 Maven 版本 3.0.3

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T12:05:12.830

问题解决了！！！

我输入 mvn help:effective pom 并注意到 maven-plugin-plugin 版本是 2.7

然后我查看了生成的插件描述符@target/classes/META-INF/maven/plugin.xml 并注意到参数元素为空（）

换句话说，2.7 版的 maven-plugin-plugin 描述符目标不会解释出现在注释中的旧的遗留注释。

我升级了我的 pom 以使用更新版本的 maven-plugin-plugin 并将 maven-plugin-annotations 添加为依赖项。此处概述了必要的更改：

[http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html](http://maven.apache.org/plugin-tools/maven-plugin-plugin/examples/using-annotations.html)

然后我注释了魔力...

```
@Mojo(name = "portal-test")
public class PortalTestMojo extends AbstractMojo {

    @Parameter(required = true)
    private String baseUrl; 
```

...ETC

然后将参数元素填充到插件描述符中

# c# - 复合键不尝试保留键值

> ID：13569953
> 
> 赞同：2
> 
> 时间：2012-11-26T17:25:38.100
> 
> 标签：c#, postgresql, nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

好吧，我又在挠头了。我有这样的课：

```
public class ReconciliationReportLineItem
{
    public virtual int ID { get; set; }
    public virtual int Category { get; set; }
    public virtual string FileName { get; set; }
    public virtual decimal Amount { get; set; }
    public virtual string BatchType { get; set; }
    public virtual DateTime CreatedTimeStamp { get; set; }
    public virtual string Currency { get; set; }
    public virtual decimal LocalAmount { get; set; }
    public virtual int NumberOfInvoices { get; set; }

    public override bool Equals(object obj)
    {
        var t = obj as ReconciliationReportLineItem;
        if (t == null) return false;
        return
            t.ID == this.ID
            && t.Category == this.Category;
    }

    public override int GetHashCode()
    {
        return string.Format("{0}{1}{2:yyyyMMddHHmmss}{3}{4}{5}{6}",
            this.FileName, this.BatchType, this.CreatedTimeStamp,
            this.NumberOfInvoices, this.LocalAmount, this.Amount,
            this.Currency).GetHashCode();
    }
} 
```

和我的流利映射文件如下：

```
public class ReconciliationReportLineItemMapping : ClassMap<ReconciliationReportLineItem>
{
    public ReconciliationReportLineItemMapping()
    {
        Table("ReconciliationReportLineItem");

        CompositeId()
            .KeyProperty(x => x.ID, "id")
            .KeyProperty(x => x.Category, "category");

        Map(x => x.FileName)
            .Length(500)
            .Nullable()
            .Index("ixDatroseReconciliationReportLineItemFileName");

        Map(x => x.Amount)
            .Not.Nullable();

        Map(x => x.BatchType)
            .Not.Nullable();

        Map(x => x.CreatedTimeStamp)
            .Index("ixDatroseReconciliationReportLineItemCreatedTimeStamp")
            .Not.Nullable();

        Map(x => x.Currency)
            .Not.Nullable();

        Map(x => x.LocalAmount)
            .Not.Nullable();

        Map(x => x.NumberOfInvoices)
            .Not.Nullable();
    }
} 
```

我填充对象，尝试提交它，我收到如下错误：

```
ERROR: 23505: duplicate key value violates unique constraint "reconciliationreportlineitem_pkey" 
```

错误 sql 显示复合键的成员（已预设）设置为零：

```
INSERT INTO ReconciliationReportLineItem (FileName, Amount, BatchType, CreatedTimeStamp, Currency, LocalAmount, NumberOfInvoices, id, category) 
VALUES (((NULL)::text), ((E'1065.47')::numeric), ((E'X200 batch created 20121027')::text), ((E'2012-10-27 08:39:00.000000')::timestamp), ((E'USD')::text), ((E'1065.47')::numeric), ((7)::int4), ((0)::int4), ((0)::int4)) 
```

...但是在尝试将记录合并到表中之前，我已经指定了值。使用断点，我能够在提交会话事务之前验证对象确实具有值。

我究竟做错了什么？我需要指定键的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:08:35.697

我不记得 NHibernate 默认密钥生成器是什么，但尝试添加它以告诉 NH 您将使用组件作为标识符来分配密钥。这种方法的例子并不多，但[这个论坛帖子是部分的](https://groups.google.com/forum/?fromgroups=#!topic/fluent-nhibernate/rEnETPpeGNE)。这是更新的代码：

```
// snipped >%

CompositeId()
    .ComponentCompositeIdentifier<ReconciliationReportLineItemKey>
       (rrli => rrli.Key)
    .KeyProperty(k => k.Key.Id)
    .KeyProperty(k => k.Key.Category);

// snipped >% 
```

您需要为键添加一个新类以分配：

```
public class ReconciliationReportLineItemKey
{
    public virtual int Id { get; set; }
    public virtual int Category { get; set; }
} 
```

并将组件的属性添加到您的实体类：

```
public class ReconciliationReportLineItem
{
    // snipped >%

    public virtual ReconciliationReportLineItemKey Key { get; set; }

    // snipped >%
} 
```

# php - jQuery ajax 脚本创建随机表

> ID：13569955
> 
> 赞同：0
> 
> 时间：2012-11-26T17:25:42.357
> 
> 标签：php, jquery, instagram

有没有人对这个问题有任何想法？肯定有人有使用 instagram API 的经验吗？

我正在尝试使用此网站上的脚本：http://stuffthatspins.com/stuff/instagram-user-stream-display/

它允许您在网站上显示 Instagram 照片流，但是当脚本运行时，它无法显示流。

我已经在 Instagram API 开发人员部分注册了该应用程序，并获得了我的用户 ID 和有效的访问令牌，所以我认为这是代码或我如何实现它的问题。

当我使用谷歌浏览器的开发工具偷看时，我在 url 上得到一个错误：

```
 url: 'https://api.instagram.com/v1/users/<?=$user_id?>/media/recent/?access_token=accesstokenhere/', 
```

在元素选项卡下，有很多 html 表格元素没有出现在脚本作者的示例页面中。

这是代码：

```
 <?
    $user_id = "validUserID"; 
    $num_to_display = "20";
    ?>

    <style>
    .instagram-placeholder {
    float: left;
    }
    </style>

    <h1>jQuery Instagram User Stream Display Really Easy with a json call</h1>
    uses jQuery and json to get an instagram user feed and display it on your site.
    <br/>
    Source and idea from <a href="https://forrst.com/posts/Using_the_Instagram_API-ti5">forrst</a>
    <br/>

    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js">      </script>
    <div class="instagram"></div>

    <script>

    // small = + data.data[i].images.thumbnail.url +
    // resolution: low_resolution, thumbnail, standard_resolution

    $(function() {
        $.ajax({
            type: 'GET',
            dataType: "jsonp",
            cache: false,
            url: "https://api.instagram.com/v1/users/<?=$user_id?>/media/recent/?access_token=validToken",
            success: function(data) {
                for (var i = 0; i < <?=$num_to_display?>; i++) {
            $(".instagram").append("<div class='instagram-placeholder'><a target='_blank' href='" + data.data[i].link +"'><img class='instagram-image' src='" + data.data[i].images.low_resolution.url +"' /></a></div>");   
                }     

            }
        });
    });

    </script> 
```

# cxf - 如何使用 Fuse ESB 和 cxf 调用外部 Web 服务

> ID：13569960
> 
> 赞同：0
> 
> 时间：2012-11-26T17:26:00.317
> 
> 标签：cxf, fuseesb, jbossfuse

我想在 Fuse ESB 的路由中调用外部 Web 服务。从外观上看，您应该使用 cxf 来执行此操作。我有代码要添加到我的 POM 文件中，如下所示。Maven 不喜欢这样。它抱怨“生命周期配置未涵盖插件执行：org.apache.cxf:cxf-codegen-plugin:2.6.0:wsdl2java (execution: generate-sources, phase: generate-sources)”。我使用什么版本并不重要——我都试过了。另外，当 Maven 构建时，我得到的错误是“'UTF-8' 每个字符使用 1 个字节；但物理编码似乎使用 2”。出了点问题，但是什么？此代码来自 Fusesource 作为示例。有没有人有这个工作？我的 WSDL 看起来不错。我想要做的就是调用一个网络服务，它不可能这么难，当然！！！

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.6.0</version>
    <executions>
      <execution>
        <id>generate-sources</id>
        <phase>generate-sources</phase>
        <configuration>
          <!-- Maven auto-compiles any source files under target/generated-sources/ -->
          <sourceRoot>${basedir}/target/generated-sources/jaxws</sourceRoot>
          <wsdlOptions>
            <wsdlOption>
              <wsdl>C:/bolt-poc/src/main/resources/WSDL/esbWebService.wsdl</wsdl>
            </wsdlOption>
          </wsdlOptions>
        </configuration>
        <goals>
          <goal>wsdl2java</goal>
        </goals>
      </execution>
    </executions>
  </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T08:13:46.983

Try this Maven plugin to generate classes from WSDL:

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.6.0</version>
    <executions>
        <execution>
            <id>generate-jaxb</id>
            <phase>generate-sources</phase>
            <configuration>
                <additionalJvmArgs>-Dfile.encoding=UTF8</additionalJvmArgs>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>src/main/resources/WSDL/esbWebService.wsdl</wsdl>
                        <extraargs>
                            <extraarg>-exsh</extraarg>
                            <extraarg>true</extraarg>
                            <extraarg>-p</extraarg>
                            <extraarg>your.pkg</extraarg>
                            <extraarg>-wsdlLocation</extraarg>
                            <extraarg></extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

Then use Spring to create a client. Something like this:

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:jaxws="http://cxf.apache.org/jaxws"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://cxf.apache.org/jaxws                      http://cxf.apache.org/schemas/jaxws.xsd">

    <jaxws:client id="yourService"
                  address="http://your/web/service/url"
                  serviceClass="your.generated.service.class.YourClass"
                  username="inCaseYouNeedUsername"
                  password="inCaseYouNeedPassword"/>                      

</beans> 
```

Then create a class and inject your service client:

```
@Component
public class YourBean {

   @Autowired
   @Qualifier(value = "yourService")
   private YourService service;

   public void someMethod() {
       service.doSmth();
   }

} 
```

# php - 构造函数和 this 指针

> ID：13569968
> 
> 赞同：0
> 
> 时间：2012-11-26T17:26:17.373
> 
> 标签：php, constructor, this-pointer

问题是：在声明“private $json”之后，我应该在构造函数 $json 还是 $this->json 中使用？

```
class Controller{
private $json;
 private $data;
  function __construct(){
  $json=json_decode(base64_decode($_POST['json']));
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:35:15.520

您**必须**在此处使用`$this->`，否则您不会将其分配给实例，而只是在构造函数中创建一个局部变量，该变量将在构造函数运行后消失。php中没有可选项`$this`，您必须始终指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:29:56.783

您可以使用任何一种方式，但是在将其分配给 之后`$this->json`，我建议您继续使用该值。

这个想法是，如果您的构造函数有其他操作或方法调用，则这些方法可能会被编写为依赖于`$this->json`.

我的习惯是尽早设置实例变量并在设置后专门使用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:31:49.910

除非 $json 是一个不应该影响 $this->json 的局部变量，否则我建议您从分配时开始使用 $this->json。澄清：

```
class Controller{
private $json;
 private $data;
  function __construct(){
      $this->json = json_decode(base64_decode($_POST['json']));
      echo $this->json;
  }
} 
```

比类似的东西更有意义：

```
class Controller{
private $json;
 private $data;
  function __construct(){
       $json = json_decode(base64_decode($_POST['json']));
       $this->json = $json;
       echo $json;
  }
} 
```

# c# - 重载方法，重用代码

> ID：13569971
> 
> 赞同：1
> 
> 时间：2012-11-26T17:26:29.533
> 
> 标签：c#, .net, wpf, inheritance, refactoring

我怎样才能重构它，这样我就不会在每种方法中重复相同的代码？

```
 private void setupTooltip(Grid obj)
    {
        var controls = obj.Children.OfType<System.Windows.Controls.TextBox>();
        foreach (var control in controls)
        {
            control.ToolTip = "Code is <" + control.Name + ">";
        }
    }

    private void setupTooltip(StackPanel obj)
    {
        var controls = obj.Children.OfType<System.Windows.Controls.TextBox>();
        foreach (var control in controls)
        {
            control.ToolTip = "Code is <" + control.Name + ">";
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:29:34.633

制作一种接受`Panel`对象的方法。StackPanel 和 Grid 都从那里继承，并且您不希望使用任何特定于控件的方法。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.grid.aspx)

[http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T17:32:23.947

[子](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.children.aspx)项在[Panel](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)类中定义。

```
private void setupTooltip(Panel obj)
{
    var controls = obj.Children.OfType<System.Windows.Controls.TextBox>();
    foreach (var control in controls)
    {
        control.ToolTip = "Code is <" + control.Name + ">";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T17:33:02.250

通过使用公共基类作为方法的参数，您可以对和[**`Panel`**](http://msdn.microsoft.com/en-us/library/system.windows.controls.panel.aspx)使用以下方法：`Grid``StackPanel`

```
private void setupTooltip(Panel panel)
{
    var controls = panel.Children.OfType<System.Windows.Controls.TextBox>();
    foreach (var control in controls)
    {
        control.ToolTip = "Code is <" + control.Name + ">";
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T17:29:28.627

如果`StackPanel`并`Grid`共享一个公共基类或接口，您可以将方法的参数更改为该类型并删除第二种方法。

# c - 使用 GNU SGL 库生成随机数

> ID：13569977
> 
> 赞同：0
> 
> 时间：2012-11-26T17:26:37.303
> 
> 标签：c

如何在 GNU SGL 中为随机数生成生成相同的效果，如下所示：

```
int ind = rand() % 2 
```

即准确地生成 0 或 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:28:51.670

你可以试试这个例子：-

```
 #include <stdio.h>
 #include <gsl/gsl_rng.h>

 int
 main (void)
 {
   const gsl_rng_type * T;
   gsl_rng * r;

   int i, n = 10;

   gsl_rng_env_setup();

   T = gsl_rng_default;
   r = gsl_rng_alloc (T);

   for (i = 0; i < n; i++) 
     {
       double u = gsl_rng_uniform (r);
       printf ("%.5f\n", u);
     }

   gsl_rng_free (r);

   return 0;
 } 
```

# php - php制作数组的最简单方法

> ID：13569978
> 
> 赞同：-1
> 
> 时间：2012-11-26T17:26:37.210
> 
> 标签：php, arrays

我有这种格式的mysql字符串

> 1.name.2.name,3.name.8.name

我有这个

> $arr=split(",",$str);$count=count($arr);

这将创建 2 个数组，但我想逐项编写

```
for ($i=0;$i<$count;$i++){
echo $arr[$i];
// when $i=0 here must be 1 name 2 name and when $i=1 3 name 8 name
} 
```

这仍然是正确的，但现在我想在循环内部写入值`$arr[$i]`，我需要将它们按点分割。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T17:33:01.007

你不需要任何循环

```
$string = "1.name.2.name,3.name.8.name";
$array = explode(",", $string);
var_dump($array); 
```

输出

```
array (size=2)
  0 => string '1.name.2.name' (length=13)
  1 => string '3.name.8.name' (length=13) 
```

如果你想进一步打破它

```
$array = array_map(function($v){return explode(".", $v); },$array);
var_dump($array); 
```

输出

```
array (size=2)
  0 => 
    array (size=4)
      0 => string '1' (length=1)
      1 => string 'name' (length=4)
      2 => string '2' (length=1)
      3 => string 'name' (length=4)
  1 => 
    array (size=4)
      0 => string '3' (length=1)
      1 => string 'name' (length=4)
      2 => string '8' (length=1)
      3 => string 'name' (length=4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:39:45.057

使用[`explode()`](http://us2.php.net/manual/en/function.explode.php)拆分`,`和[`str_replace()`](http://us2.php.net/manual/en/function.str-replace.php)删除`.`

```
$string = "1.name.2.name,3.name.8.name";
$arr = explode(",", $string);

for ($i=0;$i<count($arr);$i++){
echo str_replace("."," ",$arr[$i]);} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:53:58.210

使用正则表达式的替代方法：

```
$string = "1.name.2.name,3.name.8.name";

preg_match_all('|(\d+)\.([^.,]+)[,.]?|', $string, $matches);
$matches = array_combine($matches[1], $matches[2]);

print_r($matches); 
```

输出：

```
Array
(
    [1] => name
    [2] => name
    [3] => name
    [8] => name
) 
```

# antlr3 - 如何在命令行中运行 ANTLR 3.4？

> ID：13569980
> 
> 赞同：2
> 
> 时间：2012-11-26T17:26:48.880
> 
> 标签：antlr3

我尝试通过以下方式运行 ANTLR 3.4：

```
java -classpath "d:\extracted\antlrworks1.4.3" org.antlr.Tool %p%\parser.g -o %p%\output
or
java -classpath "%p%lib\antlrworks-1.4.3.jar" org.antlr.Tool %p%\parser.g -o %p%\output
or
java -classpath "%p%lib\antlr-3.4.jar;%p%lib\antlr-runtime-3.4.jar;%p%lib\ST4-4.0.4.jar" org.antlr.Tool %p%\parser.g -o %p%\output

Each of them resulted in the same error message;

Message ILLEGAL_OPTION_VALUE in locale en_US not found
Message ALL_OPS_NEED_SAME_ASSOC in locale en_US not found
ANTLR installation corrupted; English messages file en.stg incomplete
Exception in thread "main" java.lang.Error: ANTLR ErrorManager panic
    at org.antlr.tool.ErrorManager.panic(ErrorManager.java:918)
    at org.antlr.tool.ErrorManager.setLocale(ErrorManager.java:427)
    at org.antlr.tool.ErrorManager.<clinit>(ErrorManager.java:390)
    at org.antlr.tool.CompositeGrammar.createNFAs(CompositeGrammar.java:379)
    at org.antlr.Tool.process(Tool.java:466)
    at org.antlr.Tool.main(Tool.java:93) 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T16:29:23.993

我不再使用 v3，除了回答一些问题。我用

```
$ export CLASSPATH=.:/usr/local/lib/antlr-3.4-complete-no-antlrv2.jar 
```

一劳永逸，并用“编译”语法

```
$ java org.antlr.Tool Question.g 
```

然后编译

```
$ javac Question*.java Test.java 
```

然后执行

```
$ java Test 
```

精度：文件 Test.java 包含：

```
import org.antlr.runtime.*;

public class Test {
    public static void main(String[] args) throws Exception {
        ANTLRInputStream input = new ANTLRInputStream(System.in);
        QuestionLexer lexer = new QuestionLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
        QuestionParser parser = new QuestionParser(tokens);
        parser.question();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:23:24.903

我想通了。当前目录必须与 jar 的位置相同。

# c# - 如何获取通过通用方法传递的对象类型以与 foreach 一起使用？

> ID：13569984
> 
> 赞同：0
> 
> 时间：2012-11-26T17:27:01.063
> 
> 标签：c#, generics, foreach, generic-method

使用以下代码，我尝试传入具有 items 列表的 'CachedModel model' `List<CachedModel.CachedModelItem>`。但是 foreach 不喜欢“项目”。它也不像 Item.GetType() 或 Type myType = Item.GetType(); foreach(myType 项目 ...

错误是：“找不到类型或命名空间名称‘Item’（您是否缺少 using 指令或程序集引用？）”

有任何想法吗？

称呼：

```
FillCache<CachedModel.CachedModelItem>(model, CachedEntitiesID); 
```

方法：

```
public void FillCache<cachedModelItem>(ICachedModel model, int CachedEntitiesID)
        where cachedModelItem: ICachedModelItem, new()
    {
        ICachedModelItem Item = new cachedModelItem();

        foreach (Item item in model.Items)
        {
            string foo = item.foo.ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:31:01.203

我不是 100% 确定，但如果你说那`Item`是类型，`ICachedModelItem`那么尝试将方法更改为：

```
public void FillCache<cachedModelItem>(ICachedModel model, int CachedEntitiesID)
        where cachedModelItem: ICachedModelItem, new()
{
    foreach (ICachedModelItem item in model.Items)
    {
        string foo = item.foo.ToString();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T17:33:42.803

更重要的是，你不必知道。让编译器用 var 关键字来计算：

```
foreach (var item in model.Items)
{
    // Do something
} 
```

编辑：我不完全确定您在问什么，但可能是您正在寻找 .Cast 或 .OfType 来自 LINQ 的扩展方法。如果您确定列表中的所有项目实际上都是您提供的类型，请使用 Cast。如果某些项目可能不匹配，请使用 OfType。例如：

```
foreach (var item in model.Items.OfType<MyType>())
{
    // Do something
} 
```

# ios - 保护 iPhone 上的应用程序数据

> ID：13569997
> 
> 赞同：6
> 
> 时间：2012-11-26T17:27:53.200
> 
> 标签：ios, iphone, xcode, security

**已编辑**

*好的，抛开投票反对意见并不能真正帮助解决问题。如果您没有任何有用的内容要说并且您对问题不感兴趣，只需更改页面即可。如果您有想法或者您只是对了解不同的方法感兴趣，那么欢迎您的评论，即使它不完美或者只是一个尝试的想法*

**问题：**

我需要将应用程序数据存储在 iPhone 应用程序中。

我们最初使用经典的 NSDocumentDirectory 路径存储数据......但是这种方法有多“安全”？

在不考虑越狱设备的情况下（我目前对此不感兴趣），似乎任何用户（在任何正版设备上）都可以使用简单的 iPhone 浏览软件导航到该文件夹​​并弄乱内容，有效地破解它.

如果是这种情况，为了存储安全的通用数据（在这种情况下不一定是密码），最好使用什么“位置”或“方法”。

即使在这些情况下，KeyChain 是正确的方式还是有更好/替代的方式？

**注意和核心问题：**

我知道使用密钥等加密和保护数据。我不是在谈论“混淆或保护其内容”

这里的问题是不同的。所以让我们这样说：

“您如何避免用户可以访问存储文件（数据、加密文件、sql 文件、您喜欢的任何内容）的文件夹，并以任何方式将它们弄乱（这可能是删除它们、复制它们、访问它们使用十六进制编辑器和修改值，无论如何）。

这不是*他们用它做什么*的重点，而是一个更严格的**如何确保用户根本无法接触到他们**”

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T17:54:03.167

您可以使用加密算法来保护数据并保存在 sqlite db 或文档字典中的文件中。

请看一下这个[应用程序](https://github.com/mayurbirari/AES256AndBase64)，这个应用程序解释了使用安全密钥加密或解密数据的 AES 算法。

在您的应用程序中， 在您所需的文件中使用来自存储库[AES256AndBase64](https://github.com/mayurbirari/AES256AndBase64)的Helper 类。`#import "NSString+AESCrypt.h"`

加密/解密数据的用途`AES256EcryptWithKey:`和`AES256DecryptWithKey:`方法：

```
NSString* dummyString=@"Steve Job";

NSLog(@"Normal String- %@",dummyString);

NSString* encrypt_decrypt_Key=@"apple";

NSString *encryptString = [dummyString
                              AES256EncryptWithKey:encrypt_decrypt_Key];

NSLog(@"Encrypt String- %@",encryptString);

NSString *decryptString = [encryptString
                           AES256DecryptWithKey:encrypt_decrypt_Key];

NSLog(@"Decrypt String- %@",decryptString); 
```

或者，如果您使用的是 iOS 5 及更高版本，请查看此[博客](http://maniacdev.com/2011/12/tutorial-securing-ios-app-data-using-the-data-protection-api-keychain-and-cryptography/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T19:26:31.017

我不确定，但是，在您的 iPhone 中删除应用程序后，密钥链值不会被删除。

加密是一种方法。或者您可以尝试一些哈希算法，例如 SHA 或 MD5 来对您的数据进行哈希处理。散列后，您将数据和散列数据保存到 NSDocumentDirectory。当你需要你的数据时，通过查看散列数据检查它是否发生了变化。

# node.js - 在 Upstart 作业中使用 NVM 启动 Node

> ID：13569998
> 
> 赞同：2
> 
> 时间：2012-11-26T17:27:54.007
> 
> 标签：node.js, upstart, nvm

我正在尝试在 ubuntu upstart 进程中启动我的节点服务器。我真的很想使用我的 NVM 环境。但我似乎无法让它继续下去。

有没有人有一个新贵作业的代码片段，可以在节点虚拟环境中启动他们的节点应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-22T20:42:49.433

将脚本命令更改为`exec bash -c 'source /home/dev/nvm/nvm.sh && exec node app'`/home/dev/nvm/nvm.sh 是 nvm.sh 文件的文件路径，另请参见[http://doctrina.org/NodeJS-Under-NVM-With-Upstart.html](http://doctrina.org/NodeJS-Under-NVM-With-Upstart.html)