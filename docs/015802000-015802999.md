# StackOverflow 问答 15802000-15802999

# ios6 - 如何生成对 webServiceURL/version/devices/deviceLibraryIdentifier/registrations/passTypeIdentifier?passesUpdatedSince=tag 的 GET 请求

> ID：15802000
> 
> 赞同：0
> 
> 时间：2013-04-04T03:25:44.580
> 
> 标签：ios6, passbook, get-request

创建通行证后，我可以将其添加到设备，通过将数据保存到数据库来注册设备。接下来，如何生成对 webServiceURL/version/devices/deviceLibraryIdentifier/registrations/passTypeIdentifier?passesUpdatedSince=tag 的 GET 请求？我在控制台中看到了这个：
`Apr 4 10:08:26 CamMobs-iPod4 passd[12098] <Warning>: Generating GET request with URL <http:/192.168.1.202:8888/passesWebserver/v1/devices/02d6566cc59dc34e3abd116eed498898/registrations/pass.cam-mob.passbookpasstest>`
`Apr 4 10:08:26 CamMobs-iPod4 passd[12098] <Warning>: Get serial #s task (for device 02d6566cc59dc34e3abd116eed498898, pass type pass.cam-mob.passbookpasstest, last updated (null); with web service url http://192.168.1.202:8888/passesWebserver/) got response with code 200`
`Apr 4 10:08:26 CamMobs-iPod4 passd[12098] <Warning>: Get serial #s task (for device 02d6566cc59dc34e3abd116eed498898, pass type pass.cam-mob.passbookpasstest, last updated (null); with web service url http://192.168.1.202:8888/passesWebserver/) encountered error: Server response was malformed (Missing response data)`

# c++ - input a string into a 2d array while also adding different chars inbetween

> ID：15802002
> 
> 赞同：0
> 
> 时间：2013-04-04T03:26:13.980
> 
> 标签：c++, arrays, 2d, output

I am trying to make a board game. I have to input a .txt file and make it almost as a grid

```
 F.F  
  ...  
.......
SSSSSSS
SSSSSSS
  SSS  
  SSS 
```

And have it come out as

```
7     F-.-F
      |\|/|
6     .-.-.
      |/|\|
5 .-.-.-.-.-.-.
  |/|\|/|\|/|\|
4 S-S-S-S-S-S-S
  |/|\|/|\|/|\|
3 S-S-S-S-S-S-S
      |\|/|
2     S-S-S
      |/|\|
1     S-S-S
  a b c d e f g 
```

This is somewhat what I have so far but I am just lost as in how to add the characters inbetween the inputed information

part of board.h

```
class BoardSet {
public:

    void startingBoard(std::string line, int row);
    void print();

private: 
char board[6][6];

}; 
```

part of board.cpp

```
void BoardSet::startingBoard(std::string line, int row)
{
for(int i = 0; i < 7; i++)
{
    board[row][i] = line[i];

}

}

void BoardSet::print()
{
int row = 7;

for(int i = 0; i < 7; i++)
{
    for(int j = 0; j < 7;j++)
    {
        cout << board[i][j];
    }
    cout << endl;
}

} 
```

Part of main.cpp

```
void initalizeBoard(istream& in, BoardSet& board)
{
string line;
int row = 0;
getline(in, line);
while(in)
{
    board.startingBoard(line, row);
    row++;
    getline(in, line);

}
board.print();

} 
```

all I need is a little guidance or just a simple example and I can take it from there, I am just completely stumped and don't know what to do.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:50:09.713

```
char board[6][7];

for(int i = 0; i < 7; i++)
{
    for(int j = 0; j < 7;j++)
    {
        cout << board[i][j];
    }
    cout << endl;
} 
```

您的数组有 6 个项目，每个项目 7 个项目深！但你循环 7 x 7？

还是我错过了重点？

我看不到您在 txt 文件中读取的位置。

我不相信...

```
void BoardSet::startingBoard(std::string line, int row)
{
for(int i = 0; i < 7; i++)
{
    board[row][i] = line[i];

}

} 
```

我认为这必须刹车......因为你循环了 7 次...... 0,1,2,3,4,5,6......而且你只是填充数组的第一个维度

尝试这个 ...

```
 void BoardSet::setupBoard() // edit
        {
        for(int i = 0; i < 6; i++)
        {
            for(int j = 0; j < 7;j++)
            {
                board[i][j] = line[i]; ////////   board[i][j] = line[i];
            }
        }
        }

        void BoardSet::startingBoard(std::string line, int row)
        {
           for(int i = 0; i < 6; i++) // 6 not 7
           {
              board[row][i] = line[i];

           }
}    

    void BoardSet::print()
    {
    int row = 7;

    for(int i = 0; i < 6; i++)
    {
        for(int j = 0; j < 7;j++)
        {
            cout << board[i][j];
        }
        cout << endl;
    } 
```

# r - 将 1 行 1 列数据框列表转换为列表列表

> ID：15802003
> 
> 赞同：0
> 
> 时间：2013-04-04T03:26:27.613
> 
> 标签：r, xlconnect

## 语境

我正在使用 XLConnect 从电子表格中获取一堆 Excel 命名范围。执行此操作时，XLConnect 会返回一个 data.frames 列表，即使命名范围是单个单元格也是如此。

所以我有一个像这样的数据框列表，每个包含单行和单列，其值如下`Mike.Snow - 25/02/2013 2:44:00 PM`：

![在此处输入图像描述](https://i.stack.imgur.com/2EiPl.png)

```
 data <- structure(list(BW_SPUserNameTime = structure(list(Col1 = "Mike.Snow - 25/02/2013 2:44:00 PM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateAMCars = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:40:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateMJCars = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:39:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateOtherCD2CTrains = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:36:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateSAP = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:34:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateTrainsMineToPort = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:38:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateWACLATrains = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:36:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame"), UserNameDateYACLATrains = structure(list(
    Col1 = "John.Doe  -  25/02/2013 10:36:00 AM"), .Names = "Col1", row.names = c(NA, 
-1L), class = "data.frame")), .Names = c("BW_SPUserNameTime", 
"UserNameDateAMCars", "UserNameDateMJCars", "UserNameDateOtherCD2CTrains", 
"UserNameDateSAP", "UserNameDateTrainsMineToPort", "UserNameDateWACLATrains", 
"UserNameDateYACLATrains")) 
```

## 问题

我如何把它变成一个`list of lists`？（具有以下属性）

1.  内部列表是一个命名列表，其中 `Mike.Snow - 25/02/2013 2:44:00 PM`in`strsplit`和`Mike.Snow`，`2013-02-25 14:44:00`名称类似于`User`and `Time`。
2.  日期部分属于 POSIXlt 类

换句话说，结果应该是这样的......

```
> data.list <- list(BW_SPUserNameTime  = list(
+                                           User = c("Mike.Snow"), 
+                                           Time = as.POSIXlt("2013-02-25 14:44:00")),
+                    UserNameDateAMCars = list(
+                                           User = c("John.Doe") , 
+                                           Time = as.POSIXlt("2013-02-25 10:40:00"))
+                   )
> data.list
$BW_SPUserNameTime
$BW_SPUserNameTime$User
[1] "Mike.Snow"

$BW_SPUserNameTime$Time
[1] "2013-02-25 14:44:00"

$UserNameDateAMCars
$UserNameDateAMCars$User
[1] "John.Doe"

$UserNameDateAMCars$Time
[1] "2013-02-25 10:40:00"

> sapply(data.list[[1]], class)
$User
[1] "character"

$Time
[1] "POSIXlt" "POSIXt" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:59:16.043

这是一种使用`lapply`和自写函数来进行处理的方法

```
process <- function(x, format = '%d/%m/%Y %I:%M:%S %p'){
  foo <- as.list(unlist(strsplit(unlist(x), split = '\\s+-\\s+')))
  foo[[2]] <- as.POSIXlt(foo[[2]], format = format)
  names(foo) <- c('user', 'time')
  foo
}

zz <- lapply(data,process)
str(zz)
# List of 8
# $ BW_SPUserNameTime           :List of 2
# ..$ user: chr "Mike.Snow"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 14:44:00"
# $ UserNameDateAMCars          :List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:40:00"
# $ UserNameDateMJCars          :List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:39:00"
# $ UserNameDateOtherCD2CTrains :List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:36:00"
# $ UserNameDateSAP             :List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:34:00"
# $ UserNameDateTrainsMineToPort:List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:38:00"
# $ UserNameDateWACLATrains     :List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:36:00"
# $ UserNameDateYACLATrains     :List of 2
# ..$ user: chr "John.Doe"
# ..$ time: POSIXlt[1:1], format: "2013-02-25 10:36:00" 
```

# css - How to Prevent a Background Image Covering Border Image

> ID：15802005
> 
> 赞同：0
> 
> 时间：2013-04-04T03:26:40.217
> 
> 标签：css

I'm trying to add a ragged boarder to a parchment background. This is my CSS

```
#wrap
{
    width:52em;
    margin:30px auto; /* centers the container */
    background-image: url(../images/parchment.gif);
}
.borderimage #wrap
{
    border-width: 10px;
    -chrome-border-image: url(../images/parchment_border.png) 10 10 10 10 repeat;
    -moz-border-image: url(../images/parchment_border.png) 10 10 10 10 repeat;
    -o-border-image: url(../images/parchment_border.png) 10 10 10 10 repeat;
    -webkit-border-image: url(../images/parchment_border.png) 10 10 10 10 repeat;
    border-image: url(../images/parchment_border.png) 10 10 10 10 repeat;
} 
```

The .borderimage class is part of modernizr.

When it's rendered, the background image covers the boarder image. If I set the background image to none, I see the boarder image at the borders. I had this working a couple of years ago, but it failed some time ago. I don't if it was because of a change I made or browser upgrades. A web search didn't turn up anything useful.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:54:29.420

尝试`background-size: contain;`放入`#wrap`

# c++ - 如何在将对象添加到向量中时创建对象？

> ID：15802006
> 
> 赞同：56
> 
> 时间：2013-04-04T03:26:46.190
> 
> 标签：c++

我有一个 C++ 向量。我希望向量包含可变数量的对象。

Visual Studio 2012 给我一个错误：

```
Error: type name is not allowed 
```

从这个 C++ 代码：

```
#include <iostream>
#include <vector>
using namespace std;

class testObject{
private:
   int someInt;
public:
   testObject(int a){ someInt=a; }
   void show() { cout<<someInt<<endl; }
};

int main()
{
    vector<testObject> testVector;
    cout << "Initial size: " << testVector.size() <<endl;

    for ( int i = 0; i < 3; i++ )
        testVector.push_back(testObject(3));
    cout << "New size: " << testVector.size() << endl;

    for ( int j = 0; j < 3; j++ )
        testVector[ j ].show();

    system("pause");
} 
```

但这是另一个看起来相同但不起作用的代码示例。

```
void Dealer::setNumberOfPlayers( const int tNumber )
{
    for ( int i = 0; i < tNumber; i++ )
        vectorOfGamers.push_back(Player); // Player is a class that I created
} 
```

我可以创建向量来同时保存 Dealer、Bot 和 Player 的对象吗？我怎么做？据我所知，向量中的所有对象都应该是一种类型。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-04T03:33:40.623

要回答问题的第一部分，您必须先创建一个 Player 类型的对象，然后才能使用它。当您说`push_back(Player)`时，它的意思是“将 Player*类*添加到向量中”，而不是“将 Player 类型的对象添加到向量中”（这就是您的意思）。

您可以像这样在堆栈上创建对象：

```
Player player;
vectorOfGamers.push_back(player);    // <-- name of variable, not type 
```

或者你甚至可以创建一个临时对象内联并推送它（它在放入向量时被复制）：

```
vectorOfGamers.push_back(Player());    // <-- parentheses create a "temporary" 
```

要回答第二部分，您可以创建一个基本类型的向量，这将允许您推回任何子类型的对象；但是，这不会按预期工作：

```
vector<Gamer> gamers;
gamers.push_back(Dealer());    // Doesn't work properly! 
```

因为当经销商对象被放入向量中时，它被复制*为一个玩家对象*——这意味着只有玩家部分被有效地“切片”对象复制。但是，您可以使用指针，因为那时只会复制指针，并且永远不会对对象进行切片：

```
vector<Gamer*> gamers;
gamers.push_back(new Dealer());    // <-- Allocate on heap with `new`, since we
                                   // want the object to persist while it's
                                   // pointed to 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T03:33:21.090

问题一：

```
 vectorOfGamers.push_back(Player) 
```

这是有问题的，因为您不能直接将类名推送到向量中。您可以将类的对象推送到向量中，也可以将引用或指向类类型的指针推送到向量中。例如：

```
vectorOfGamers.push_back(Player(name, id)) 
  //^^assuming name and id are parameters to the vector, call Player constructor
  //^^In other words, push `instance`  of Player class into vector 
```

问题2：

`These 3 classes derives from Gamer. Can I create vector to hold objects of Dealer, Bot and Player at the same time? How do I do that?`

是的你可以。您可以创建一个指向基类的指针向量`Gamer`。一个不错的选择是使用 的向量`smart_pointer`，因此，您不需要自己管理指针内存。由于其他三个类是从 派生的`Gamer`，基于多态性，您可以将派生类对象分配给基类指针。您可以从这篇文章中找到更多信息：[std::vector of objects / pointers / smart pointers to pass objects (buss error: 10)?](https://stackoverflow.com/questions/15731670/stdvector-of-objects-pointers-smart-pointers-to-pass-objects-buss-error)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T03:34:38.893

您不能将*类*插入向量中，但可以插入类的*对象*（前提是它是正确的类型或可转换的）。

如果该类型`Player`有一个默认构造函数，您可以通过做创建一个临时对象`Player()`，这应该适用于您的情况：

```
vectorOfGamers.push_back(Player()); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-04T16:10:40.790

我知道线程已经全部完成，但是当我检查时，我想出了一个解决方案（下面列出的代码）。希望它可以提供帮助。

```
#include <iostream>
#include <vector>

class Box
{
    public:

    static int BoxesTotal;
    static int BoxesEver;
    int Id;

    Box()
    {
        ++BoxesTotal;
        ++BoxesEver;
        Id = BoxesEver;
        std::cout << "Box (" << Id << "/" << BoxesTotal << "/" << BoxesEver << ") initialized." << std::endl;
    }

    ~Box()
    {
        std::cout << "Box (" << Id << "/" << BoxesTotal << "/" << BoxesEver << ") ended." << std::endl;
        --BoxesTotal;
    }

};

int Box::BoxesTotal = 0;
int Box::BoxesEver = 0;

int main(int argc, char* argv[])
{
    std::cout << "Objects (Boxes) example." << std::endl;
    std::cout << "------------------------" << std::endl;

    std::vector <Box*> BoxesTab;

    Box* Indicator;
    for (int i = 1; i<4; ++i)
    {
        std::cout << "i = " << i << ":" << std::endl;
        Box* Indicator = new(Box);
        BoxesTab.push_back(Indicator);
        std::cout << "Adres Blowera: " <<  BoxesTab[i-1] << std::endl;
    }

    std::cout << "Summary" << std::endl;
    std::cout << "-------" << std::endl;
    for (int i=0; i<3; ++i)
    {
        std::cout << "Adres Blowera: " <<  BoxesTab[i] << std::endl;
    }

    std::cout << "Deleting" << std::endl;
    std::cout << "--------" << std::endl;
    for (int i=0; i<3; ++i)
    {
        std::cout << "Deleting Box: " << i+1 << " (" <<  BoxesTab[i] << ") " << std::endl;
        Indicator = (BoxesTab[i]);
        delete(Indicator);
    }

    return 0;
} 
```

它产生的结果是：

```
Objects (Boxes) example.
------------------------
i = 1:
Box (1/1/1) initialized.
Adres Blowera: 0xdf8ca0
i = 2:
Box (2/2/2) initialized.
Adres Blowera: 0xdf8ce0
i = 3:
Box (3/3/3) initialized.
Adres Blowera: 0xdf8cc0
Summary
-------
Adres Blowera: 0xdf8ca0
Adres Blowera: 0xdf8ce0
Adres Blowera: 0xdf8cc0
Deleting
--------
Deleting Box: 1 (0xdf8ca0) 
Box (1/3/3) ended.
Deleting Box: 2 (0xdf8ce0) 
Box (2/2/3) ended.
Deleting Box: 3 (0xdf8cc0) 
Box (3/1/3) ended. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T03:40:20.697

```
// create a vector of unknown players.
std::vector<player> players;

// resize said vector to only contain 6 players.
players.resize(6); 
```

值总是被初始化的，所以 6 个玩家的向量是 6 个有效玩家对象的向量。

至于第二部分，您需要使用指针。 [将 C++ 接口实例化为子类](https://stackoverflow.com/questions/15591821/instantiating-c-interface-as-a-child-class/)

# jquery - Change ul style when arriving to div(scrolling)

> ID：15802007
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:26:50.767
> 
> 标签：jquery, css, html, scroll

I would like to change a ul style on scrolling and arrive to div using jQuery, explanation down.

CSS:

```
#menu {
    background-color:#ccc;
    position:fixed;
    width:100%;
}

.menutext {
    padding:25 40 30 !important;
    display:inline-block;
}

.menutext2 {
    padding:25 40 0 !important;
    display:inline-block;
    color:red;
}

.alldivs {
    width:300px;
    height:200px;
    background-color:a9a9a9;
} 
```

HTML code:

```
<div id="menu">
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV1</div>
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV2</div>
    <div class="menutext">Change the style of me to .mebutext2 on arriving to DIV3</div>
</div>

<br><br><br>

<div class="alldivs"><div id="DIV1">DIV1</div></div>
<br><br><br><br>
<div class="alldivs"><div id="DIV2">DIV2</div></div>
<br><br><br><br>
<div class="alldivs"><div id="DIV3">DIV3</div></div>
<br><br><br><br> 
```

I want to change the div with the class "menutext" to class "menutext2" on scrolling and arriving to the top of the divs(first ul's class change from menutext1 to menutext2 on arriving to the div with the id DIV1, second ul's class change from menytext1 to menutext2 on arriving to the div with the id DIV2 AND the first ul's class return to menutext1 AS IT WAS and so on.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T02:24:18.520

这应该做你所要求的，只使用 jQuery：

```
$(document).scroll(function(e) {
    var detectrange = 50; //how close to the top of the screen does it need to get
    var scrolltop = $(window).scrollTop() + detectrange;
    $('.alldivs').each(function(i, el){
        if (scrolltop > $(el).offset().top) {
            $('.'+el.id).removeClass('menutext').addClass('menutext2');
        }
    });
}); 
```

请注意，要使其正常工作，我必须在您的 、 、 等上应用该类，`alldivs`并为菜单项提供与其 ID 对应的类。`div1``div2``div3`

这个 jsFiddle 中的演示：http: [//jsfiddle.net/ss7YF/](http://jsfiddle.net/ss7YF/)

**编辑**如果你只想突出显示最近的一个（我猜是固定菜单？）使用这个：

```
$(document).scroll(function(e) {
    var scrolltop = $(window).scrollTop();
    var mindist = 1000;
    var closest = '';
    $('.alldivs').each(function(i, el){
        var thisdist = Math.abs(scrolltop - $(el).offset().top);
        if (thisdist < mindist) {
            closest = el.id;
            mindist = thisdist;
        }
    });
    if (closest != '') {
        $('.menutext2').toggleClass('menutext menutext2');
        $('.'+closest).toggleClass('menutext menutext2');
    }
}); 
```

jsfiddle：http: [//jsfiddle.net/ss7YF/1/](http://jsfiddle.net/ss7YF/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:15:43.537

您可以使用[YAHOOs YUI](http://yuilibrary.com)框架来编写类似这样的 javascript：

```
var Event = YAHOO.util.Event;

Event.on(window, 'scroll', function() {

    if (document.getElementById("DIV1").scrollTop == 0) {
        document.getElementById("DIV1").className = "menutext2";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T02:25:40.117

是的，你需要jQuery，但我不明白：你必须在滚动条看到div1 或单击div1 时应用menutext2 类？

设置事件（单击或滚动并应用）

```
$('.menu').removeClass('menutext').addClass('menutext2'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T03:37:17.703

是的，用 jsFiddle 完成了 [试试这个](http://jsfiddle.net/UL6tT/)

将 .css 替换为 .addClass 和 .removeClass。我使用 DIV1-3 的父 div，因为您在其父级上设置了高度。

```
$(window).scroll(function(){
var top = $(window).scrollTop() + $(window).height();
var offsetDiv1 = $("#DIV1").offset().top;
var offsetDiv2 = $("#DIV2").offset().top;
var offsetDiv3 = $("#DIV3").offset().top;
if(top >= offsetDiv1 && top <= $("#DIV1").parent("div").height() + offsetDiv1){
   // alert(top);
     $("#menu").css("background", "black");   
}else if(top >= offsetDiv2 && top <= $("#DIV2").parent("div").height() + offsetDiv2){
   // alert(top);
     $("#menu").css("background", "blue");  
}else if(top >= offsetDiv3 && top <= $("#DIV3").parent("div").height() + offsetDiv3){
    //alert(top);
     $("#menu").css("background", "yellow");  
}else{
      $("#menu").css("background", "gray");    
} 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T04:38:35.287

看来你想要的和我在我的页面上实现的一样。

[查看http://s-yadav.github.com/contextMenu.html](http://s-yadav.github.com/contextMenu.html)上的菜单部分

根据你的要求试试这个。

HTML

```
<div id="menu">
    <div class="menutext" linkId="DIV1">Change the style of me to .mebutext2 on arriving to DIV1</div>
    <div class="menutext"  linkId="DIV2">Change the style of me to .mebutext2 on arriving to DIV2</div>
    <div class="menutext"  linkId="DIV3">Change the style of me to .mebutext2 on arriving to DIV3</div>
</div>

<br><br><br>

<div class="alldivs"><div class="contentDiv" id="DIV1">DIV1</div></div>
<br><br><br><br>
<div class="alldivs"><div class="contentDiv" id="DIV2">DIV2</div></div>
<br><br><br><br>
<div class="alldivs"><div class="contentDiv" id="DIV3">DIV3</div></div> 
```

JS

```
$(function(){

    var menu=$('#menu'),
        menuText=menu.find('.menuText'),
        DIV1=$('#DIV1'),
        DIV2=$('#DIV2'),
        DIV3=$('#DIV3'),
        DIV1Top=DIV1.offset().top,
        DIV2Top=DIV2.offset().top,
        DIV3Top=DIV3.offset().top;

$(window).scroll(function(e) {
    var win=$(this),
        scrollTop=$(this).scrollTop();

    //to make nav menu selected according to scroll
    var start=scrollTop;
    menuText.filter('.menutext2').removeClass('menutext2').addClass('menutext');
    if(start>DIV3Top){
        menuText.filter('[linkId="DIV3"]').removeClass('menutext').addClass('menutext2');
        }
    else if (start>DIV2Top){
        menuText.filter('[linkId="DIV2"]').removeClass('menutext').addClass('menutext2');
        }
    else if(start>DIV1Top){
        menuText.filter('[linkId="DIV1"]').removeClass('menutext').addClass('menutext2');
        }   
});
}); 
```

更新：

通用方法。

```
$(function () {

    var menu = $('#menu'),
        menuText = menu.find('.menuText'),
        contentDiv = $('.contentDiv');

    $(window).scroll(function (e) {
        var win = $(this),
            scrollTop = $(this).scrollTop();

        //to make nav menu selected according to scroll
        var start = scrollTop;
        menuText.filter('.menutext2').removeClass('menutext2').addClass('menutext');
        for (var i = 0; i < contentDiv.length; i++) {
            var elm = $(contentDiv[i]),
                id = contentDiv[i].id,
                top = elm.offset().top,
                nextTop = elm.next().offset().top || 1000000000;
            if (start > top && start < nextTop) {
                menuText.filter('[linkId="' + id + '"]').removeClass('menutext').addClass('menutext2');
                break;
            }
        }

    }); 
```

第二种方法更短更通用，但效率低于第一种，因为每次循环都会进入滚动事件。和滚动事件执行非常频繁。

如果 '.contentDiv' 的数量较少，我会更喜欢遵循第一种方法，否则遵循第二种方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-04T03:14:31.513

尝试像这样[的 jsFiddle](http://jsfiddle.net/apaul34208/KrPSm/)

```
$(document).scroll(function () {
var y = $(this).scrollTop();
if (y > 275) {
    $(".menutext").addClass(
        "menutext2");
} else {
    $(".menutext").removeClass(
        "menutext2");
} 
```

});

在您向下滚动 275 像素（接近 div2 的顶部）后，我有这个设置要添加`.menutext2`，从这里应该不难弄清楚。

# asp.net - 为什么某些报告而不是其他报告“错误：无法显示子报告”？

> ID：15802008
> 
> 赞同：1
> 
> 时间：2013-04-04T03:26:56.467
> 
> 标签：asp.net, reportviewer, rdlc, subreport, localreport

我正在使用 VS2010 和内置的可视报表设计器创建 RDLC 模板，用于使用 ReportViewer 控件和 .LocalReport 成员在 ASP.NET 应用程序中将带有子报表的报表呈现为 PDF 文件。代码遍历一组记录，为每条记录生成一个报告（及其子报告）。

我最近注意到，对于少数报告，其中一个子报告失败并给出“错误：无法显示子报告”消息。这个案例让我感到困惑的是，与我读过的许多关于这个错误的帖子（以前我自己也曾与它搏斗过）相比，它只发生在一小部分案例中；从我在其他地方看到的情况来看，问题通常是全有或全无——这个错误*总是*出现，直到找到解决方案，然后这个错误*永远不会*出现。

那么......什么可能导致仅记录的子集出现此错误？我可以直接运行有问题的子报告而不会出错；我可以打开 .xsd 文件并预览违规记录的 DataSet 而不会出错；我可以在 SQL Server Mgt Studio 中运行 DataSet 后面的查询而不会出现错误...我不确定在哪里可以找到这个问题的原因，它只在我运行带有子报表的报表时出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:59:54.907

我将其追踪到了一个过时的 .xsd 文件（DataSet）——在某处增加了表列字符串的宽度，但 DataSet 没有更新或重新生成，所以它仍然有旧的宽度限制元素，例如 .xsd XML 中的 <xs:maxLength value="50" /> 而不是 125 个字符的新宽度。如果子报表中至少有一条记录在该列中的数据值（字符串）超过旧的 50 宽度，则会引发错误。

一个重要的线索来自为 DataSet 的 .Selected 事件添加一个处理程序；我已经在使用 .Selecting 事件来设置子报告的参数（将其绑定到父记录），但是在中断该事件时我看不到任何有用的东西。但是，检查 .Selected 事件中的事件 args 变量，在应该发生选择之后，我发现一个异常（“调用的目标已引发异常”）和一个 InnerException（“无法启用约束。一个或更多行包含违反非空、唯一或外键约束的值”）。还有一个堆栈跟踪表明故障点正在执行 Adapter.Fill(dataTable)。

虽然这很容易引起误解——我在 DataSet 后面的查询中涉及的表上没有这样的限制——但它至少让我专注于子报表中的特定记录。在子报表记录数据 SQL Server Mgt Studio 中搜索异常无果后，我最终开始从一个有问题的子报表案例中逐一删除记录，每次都重新运行报表以查看是否已修复错误. 最终我删除了一个子报表记录并且报表工作了——剩下的子报表记录出现了！

现在我有一个特定的子报告记录可以更仔细地检查。一次偶然的机会（希望我可以称它为启发式直觉......），我决定在 Web 应用程序中编辑该记录，而不是像在 SQL Server 中那样查看它。其中一个字段被标记为警告，提示字符串值太长！这让我一时疑惑：如果字符串值太长，怎么可能已经保存在数据库中了？！我仔细检查了表中的列定义，发现它比 Web 应用程序前端试图强制执行的要长。然后我意识到该列在没有更新应用程序 UI 的情况下被扩展，我立即怀疑 .xsd 文件也没有更新......宾果游戏！

这个故事可能有很多道理，它让我有一种熟悉而又不受欢迎的感觉，我没有像我应该做的那样聪明地做一些事情。一个寓意：每当您更改其基于的查询或表时，始终更新（或者更好，通常更简单，只需重新构建）您的 .xsd 数据集文件......但是，说起来容易做起来难。我有一种不安的感觉是，一定有一些我没有想到的方法来避免构建脆弱的应用程序，其中在数据库中定义的列宽也单独编码到 UI 和/或代码隐藏以提供用户反馈和/或进行数据验证...欢迎提出有关如何更稳健地管理的建议！

# java - 如何在 java.sql.date 中添加天数？

> ID：15802010
> 
> 赞同：12
> 
> 时间：2013-04-04T03:27:28.240
> 
> 标签：java, date

这是我的程序，我试过了

```
java.sql.Date logicalDate;
Calendar c = Calendar.getInstance(); 
c.setTime(logicalDate); 
c.add(Calendar.DATE, 1); 
```

下面的行显示构造函数 Date(date) 未定义的错误

```
java.sql.Date startDate= new java.sql.Date(c.getTime()); 
```

如何将 1 天添加到 java.sql.Date logicalDate？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T03:30:31.547

`Calendar#getTime`返回 的`java.util.Date`表示形式`Calendar`。你真的需要[`Calendar#getTimeInMillis`](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getTimeInMillis%28%29)使用

```
java.sql.Date startDate= new java.sql.Date(c.getTimeInMillis()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-04-20T07:16:24.993

```
import java.sql.Date;
import java.time.LocalTime;
import java.util.Calendar;
import java.util.List;
import java.util.stream.Collectors;

public class Test {

    public static void main(String a[]) {

        java.sql.Date todaysDate = new java.sql.Date(new java.util.Date().getTime());

        int futureDay =1;
        int pastDay=2;

        java.sql.Date futureDate = this.addDays(todaysDate, futureDay);
        java.sql.Date pastDate = this.subtractDays(todaysDate, pastDay);

        System.out.println("futureDate =>>> " + futureDate);
        System.out.println("pastDate =>>> " + pastDate);

    }

    public static Date addDays(Date date, int days) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        c.add(Calendar.DATE, days);
        return new Date(c.getTimeInMillis());
    }

    public static Date subtractDays(Date date, int days) {
        Calendar c = Calendar.getInstance();
        c.setTime(date);
        c.add(Calendar.DATE, -days);
        return new Date(c.getTimeInMillis());
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-11T18:51:29.333

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-11T14:54:20.353

这是一个方法

```
private Date sqlDatePlusDays(Date date, int days) {
    return Date.valueOf(date.toLocalDate().plusDays(days));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T07:08:51.300

试试这个 ：

```
Calendar cNow = Calendar.getInstance();  
        Date dNow = cNow.getTime();  
        cNow.add(Calendar.DATE, 7);  

        Date dSeven = cNow.getTime();  

        SimpleDateFormat format = new SimpleDateFormat("MMM dd, yyyy hh:mm:ss a");  

        String dateNow = format.format(dNow);  
        String dayBefore = format.format(dSeven);  
        System.out.println(dateNow);  
        System.out.println(daySeven); //here is your current day + 7  

        Date date = new Date();  
        System.out.println(date); 
```

# facebook - Why can't the Facebook Debugger Tool scrape my website?

> ID：15802012
> 
> 赞同：3
> 
> 时间：2013-04-04T03:27:45.663
> 
> 标签：facebook

I have a website at [http://predictstat.com/](http://predictstat.com/). It's powered by Django. I would like to make sure that when a user posts a link from this website onto Facebook, a nice preview image, title and description show up there. This website can also be accessed by using a different domain name: [http://percephany.com/](http://percephany.com/). However, I don't really want to use that. I want it to be known to the world as predictstat.com.

To test the Facebook linking/previewing, I have been using the [Facebook Debugger Tool](https://developers.facebook.com/tools/debug). These are the meta-tags that are in my index.html page:

```
<meta charset="utf-8" /> 
<meta property="og:url" content="http://predictstat.com/" />
<meta property="og:image" content="http://predictstat.com/static/images/predictStatLogo.png" />
<meta property="og:title"       content="predictStat" />
<meta property="og:description" content="Online prediction logging and tracking" />    
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
```

When I ask the Facebook debugger tool to scrape [http://predictstat.com/](http://predictstat.com/), It gives me the following error:

```
Error Parsing URL: Error parsing input URL, no data was scraped. 
```

However, when I change the meta tags to refer to percephany.com instead of predictstat.com, and then ask the Facebook Debugger tool to scrape [http://percephany.com/](http://percephany.com/), it works perfectly fine.

Why is this the case? Why does the Facebook Debugger tool like the domain name [http://percephany.com/](http://percephany.com/), but dislike the domain name [http://predictstat.com/](http://predictstat.com/) when they both point to the same underlying website?

# c# - 异常 - 不能吞下具有非空返回类型的方法的异常

> ID：15802013
> 
> 赞同：0
> 
> 时间：2013-04-04T03:28:22.317
> 
> 标签：c#, exception-handling, unity-container, enterprise-library, policy-injection

我们开发了一个示例项目来使用 entlib 异常处理程序块和 Unity 来处理所有异常。

当我尝试使用统一容器调用方法时，我收到以下异常，“不能吞下具有非空返回类型的方法的异常。”</p>

如果我们尝试调用 void 方法，它的工作正常。

下面是代码，

```
 IUnityContainer unityContainer = new UnityContainer();
            unityContainer.LoadConfiguration("Container1");
            var service2 = unityContainer.Resolve<IABCServices>("Impl1");
            string dd= service2.DoSomething(55); 
```

它的配置文件如下，

```
 <alias alias="string" type="System.String, mscorlib"/>
    <alias alias="singleton" type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager, Microsoft.Practices.Unity" />
    <alias alias="transient" type="Microsoft.Practices.Unity.TransientLifetimeManager, Microsoft.Practices.Unity" />
    <alias alias="InterceptionConfigurationExtension" type="Microsoft.Practices.Unity.InterceptionExtension.Configuration.InterceptionConfigurationExtension, Microsoft.Practices.Unity.Interception.Configuration" />
    <alias alias="EnterpriseLibraryCoreExtension" type="Microsoft.Practices.EnterpriseLibrary.Common.Configuration.Unity.EnterpriseLibraryCoreExtension, Microsoft.Practices.EnterpriseLibrary.Common" />
    <alias alias="ExceptionCallHandler" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.PolicyInjection.ExceptionCallHandler, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling" />
    <alias alias="IABCServices" type="ABC.GGG.Integration.Contracts.SSSService.Interfaces.IABCServices, ABC.GGG.Integration.Contracts" />
    <alias alias="ABCServices" type="ABC.GGG.Integration.Implementation.SSSService.ABCServices, ABC.GGG.Integration.Implementation" />
    <sectionExtension type="Microsoft.Practices.Unity.InterceptionExtension.Configuration.InterceptionConfigurationExtension, Microsoft.Practices.Unity.Interception.Configuration" />

    <container name="Container1">
        <register type="string"></register>
        <extension type="EnterpriseLibraryCoreExtension"/>
        <extension type="Interception" />
        <register type="IABCServices">
            <interceptor isDefaultForType="true" type="TransparentProxyInterceptor"/>
        </register>
        <register name="Impl1" type="IABCServices" mapTo="ABCServices">
            <interceptionBehavior type="PolicyInjectionBehavior"/>
        </register>
        <interception>
            <policy name="MyPolicy">                    
                <matchingRule name="exceptionHandling" type="TypeMatchingRule">
                    <constructor>
                        <param name="typeName">
                            <value value="ABC.GGG.Integration.Contracts.SSSService.Interfaces.IABCServices"  />
                        </param>
                    </constructor>
                </matchingRule>
                    <callHandler name="ExceptionHandlingCallHandler" type="ExceptionCallHandler">
                    <lifetime type="singleton" />
                    <constructor>
                        <param name="exceptionPolicy" dependencyName="Policy" />                            
                    </constructor>
                </callHandler>

            </policy>
        </interception>
        </container>
</unity> 
```

谁能解释一下如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:37:35.333

非 void 方法必须返回一些东西或抛出。消息说您有尝试吞下异常的配置。它可能应该配置为记录异常并重新抛出它们。

# iphone - 显示键盘时将 UITextField 滚动到视图中

> ID：15802015
> 
> 赞同：0
> 
> 时间：2013-04-04T03:28:35.050
> 
> 标签：iphone, scroll, uitextfield, iphone-softkeyboard

我正在编写一个针对 iOS 6.1 的应用程序。如果 UITextField 被键盘遮挡，我正在尝试遵循这个[Apple 文档，了解如何将它滚动到视图中。](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)问题是 Apple 记录的用于计算滚动点的算法效果不佳。我计算滚动点的算法效果稍好一些，但相差 70 像素。计算滚动点的正确方法是什么？

下面你可以看到，从左到右，我的键盘显示之前的视图，滚动后的视图使用Apple的算法计算滚动点，滚动后的视图使用我的算法计算滚动点。（该网格中的每个正方形都是 25 像素 x 25 像素。）

![在此处输入图像描述](https://i.stack.imgur.com/iITlP.png)

这是我正在使用的代码。注意`#if APPLE_WAY`块。

```
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    self.view.contentInset = contentInsets;
    self.view.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, self.activeField.frame.origin) ) {

#if APPLE_WAY
        CGPoint scrollPoint = CGPointMake(0.0, self.activeField.frame.origin.y-kbSize.height);
#else
        CGFloat offset = self.activeField.frame.origin.y;

        //TODO: Why is this off by 70?
        offset = offset - 70;

        CGPoint scrollPoint = CGPointMake(0.0, offset);
#endif
        [self.view setContentOffset:scrollPoint animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:10:02.543

您只需将偏移量设置为键盘的高度：

```
CGFloat offset = kbSize.height;
CGPoint scrollPoint = CGPointMake(0.0, offset);
[self.view setContentOffset:scrollPoint animated:YES]; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:17:29.940

有几种方法可以做到这一点。鉴于你的情况，我会做这样的事情：

```
- (void)keyboardWasShown:(NSNotification *)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, self.activeField.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0, self.activeField.frame.origin.y-kbSize.height);
        [self.scrollView setContentOffset:scrollPoint animated:YES];
    }
}

- (void)keyboardWillBeHidden:(NSNotification *)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;

    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, self.activeField.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0, 0);
        [self.scrollView setContentOffset:scrollPoint animated:YES];
    }
} 
```

然后，在您的 viewDidLoad 方法中：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                     selector:@selector(keyboardWasShown:)
                                         name:UIKeyboardDidShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillBeHidden:)
                                             name:UIKeyboardWillHideNotification object:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:29:39.990

当您拥有的是滚动视图时，这很容易，因为您甚至不必滚动；您所要做的就是调整 contentInset 和 scrollIndicatorInsets 以避开键盘，其余的会自动发生：

```
- (void) keyboardShow: (NSNotification*) n {
    self->_oldContentInset = self.scrollView.contentInset;
    self->_oldIndicatorInset = self.scrollView.scrollIndicatorInsets;
    self->_oldOffset = self.scrollView.contentOffset;
    NSDictionary* d = [n userInfo];
    CGRect r = [[d objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];
    r = [self.scrollView convertRect:r fromView:nil];
    CGRect f = self.fr.frame;
    CGFloat y =
        CGRectGetMaxY(f) + r.size.height -
            self.scrollView.bounds.size.height + 5;
    if (r.origin.y < CGRectGetMaxY(f))
        [self.scrollView setContentOffset:CGPointMake(0, y) animated:YES];
    UIEdgeInsets insets;
    insets = self.scrollView.contentInset;
    insets.bottom = r.size.height;
    self.scrollView.contentInset = insets;
    insets = self.scrollView.scrollIndicatorInsets;
    insets.bottom = r.size.height;
    self.scrollView.scrollIndicatorInsets = insets;
} 
```

在本书的这一部分，我给出了一堆不同的策略和代码：

[http://www.aeth.com/iOSBook/ch23.html#_keyboard_covers_text_field](http://www.apeth.com/iOSBook/ch23.html#_keyboard_covers_text_field)

所有这些都得到了可下载项目的支持，您可以在我的 github 站点上获取这些项目。

# jquery - 加载时JQuery调整大小不起作用

> ID：15802018
> 
> 赞同：3
> 
> 时间：2013-04-04T03:28:42.730
> 
> 标签：jquery, resize, positioning, center

我有一个这样的div：

```
<div class="first">
<img src="image/image1.gif" style="width:30%;display:inline-block"/> 
<img src="image/image2.gif" style="width:30%;display:inline-block"/> 
<img src="image/image3.gif" style="width:30%;display:inline-block"/>
<br />testing<br /><br />がらんどう
</div> 
```

我希望它*垂直居中并调整大小*，所以我使用标准 JQuery 代码：

```
$(window).resize(function(){

$('.first').css({
    position:'absolute',
    top: ($(window).height() - $('.first').outerHeight())/2
});
});

$(window).resize(); 
```

div 的 css 是这样的：

```
.first
{
position:absolute;
top:50%;
} 
```

**问题是：** 加载时div不是垂直集中的，但是当你调整窗口大小时，它会集中..

大家能帮我弄清楚吗？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:32:56.277

你在`.resize()`里面有你的电话`$(document).ready()`，对吧？否则，没有或许多元素将无法准备好/可用。你可能想要：

```
$(document).ready(function () {
    $(window).resize(function(){
        $(".first").css({
            position:'absolute',
            top: function () {
                return ($(window).height() - $(this).outerHeight())/2;
            }
        });
    });
    $(window).resize();
}); 
```

另外，您想使用`$(this).outerHeight()`而不是`$('.first').outerHeight()`

由于某些浏览器在调整大小期间经常触发（有些只在调整大小结束时触发），因此缓存 jQuery对象`resize`可能“更好” ：`window`

```
$(document).ready(function () {
    var $window = $(window);
    $window.resize(function(){
        $('.first').css({
            position:'absolute',
            top: function () {
                return ($window.height() - $(this).outerHeight())/2;
            }
        });
    });
    $window.resize();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:01:17.677

看来你想将你的'.first' div 放在窗口的中心。如果就是这样，您实际上不需要调整大小事件。这将起作用

```
$(function () {
    var first = $('.first');
    first.css({
        'margin-top': -first.height();
    });
}); 
```

如果你想要它在窗口的中心。使用 CSS

。第一的 {

```
position: fixed,
top: 50 % 
```

}

如果您希望它位于文档中心或其他偏移父级，请给出`position:absolute`. 如果你愿意，你也可以为左做同样的事情。

即使您知道 '.first' div 的大小，您也可以直接在 css 上赋予 margin-top (=-height/2) 属性。比你不需要javascript代码。

如果您想使用顶部位置而不是将调整大小处理程序保留在 document.ready 处理程序中

```
$(function(){   
    var first = $('.first');
    $(window).resize(function(){ 
       first.css({
          top: ($(window).height() - first.outerHeight(true)) / 2
       });
    }).resize();  
}) 
```

# asp.net - asp.net 中的 URL 路由

> ID：15802021
> 
> 赞同：1
> 
> 时间：2013-04-04T03:28:58.950
> 
> 标签：asp.net

行。我希望这是一个正确的问题和标题。

我完全是 asp.net 和 c# 的新手。几天来我一直在寻找答案，但一无所获。所以我认为这是问这个问题的最佳场所。

这是我当前的网址

```
http://localhost:7474/mywebsite/ProductDetails.aspx?Category=CSR&artID=36&alias=support-for-central-jaya-and-yogyakarta-earthquake-disaster 
```

我想让搜索引擎友好的网址。我可以将以上网址设为

```
http://localhost:7474/mywebsite/ProductDetails/CSR/36-support-for-central-jaya-and-yogyakarta-earthquake-disaster 
```

仅供参考，我没有使用 MVC。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:41:12.963

是的你可以。

查看[RouteCollection.MapPageRoute](http://msdn.microsoft.com/en-us/library/system.web.routing.routecollection.mappageroute.aspx)了解详细信息，但大致需要以下代码：

```
routes.MapPageRoute(
    "ProductDetails",
    "/ProductDetails/{Category}/{artID}/{alias}",
    "~/ProductDetails.aspx"); 
```

但是 artId 和 alias 不能在同一段中。它们需要用斜杠 (/) 分隔。

另一个区别是您需要从 RouteData 而不是查询字符串中获取参数值，而不是：

```
Request.QueryString["Category"] 
```

你做：

```
Page.RouteData.Values["Category"] 
```

ps：我是从头开始做的，所以它可能无法编译

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:50:08.183

也许您可以尝试 URL 重写。这将是实现这一点的理想选择，根本不需要更改代码。并使用正则表达式从 url 中提取值以将值反弹到原始 aspx 页面。

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T10:37:14.413

是的，我们可以使用 ASP.NET 路由功能创建搜索引擎友好的 URL。这篇博文有一个 URL 路由示例 - [http://newapputil.blogspot.in/2013/12/aspnet-40-web-forms-url-routing.html](http://newapputil.blogspot.in/2013/12/aspnet-40-web-forms-url-routing.html)

# ios - 替代 iPhone UDID 的供应商和广告 ID 有多长时间？

> ID：15802022
> 
> 赞同：7
> 
> 时间：2013-04-04T03:29:00.127
> 
> 标签：ios, identifier, udid

我知道 UDID 有 40 个字符长。现在，Apple 禁止使用它们，并用 iPhone 的供应商和广告标识符取而代之。

我需要在数据库中替换它们，但我找不到它们的长度。这些新标识符的长度是多少？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T06:18:32.613

新标识符（identifierForVendor 和 adsIdentifier）的长度为 36 个字符。

前一个方法 uniqueIdentifier 返回一个 NSString，而这两个新方法都返回 NSUUID 类型。此类符合 UUID 的标准定义，长度为 32 个字符，包含 4 个破折号。

[通用唯一标识符 - 定义](http://en.wikipedia.org/wiki/Universally_unique_identifier#Definition)

有效的 UUID 可以带有或不带有破折号，但[NSUUID](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSUUID_Class/Reference/Reference.html#//apple_ref/doc/c_ref/NSUUID)类的文档清楚地指出它确实包含破折号。

# visual-studio-2010 - auto build error while shifting from vs2005 to 2010

> ID：15802023
> 
> 赞同：0
> 
> 时间：2013-04-04T03:29:30.523
> 
> 标签：visual-studio-2010, visual-studio, msbuild

Recently we migrated our project from VS205 to VS2010\. Post migration we are observing the problem with automated build. Please, see below the details.

Build machine is set up with CruiseControl and a NAnt script for automated builds with devenv.

Building with VS2010 causes a number of (most) projects to start, but not finish (the only message for each project is “Rebuild All started…”). This is the pattern we have observed:

```
-------Rebuild All started: Project: Scheduler, Configuration: BuildTWinWithPortalSvc x86 ------
------ Rebuild All started: Project: CSerial, Configuration: BuildTWinWithPortalSvc Win32 ------
------ Rebuild All started: Project: sockeeg, Configuration: BuildTWinWithPortalSvc Win32 ------ 
```

TwinPortalSetup.vd project gives the message:

> An error occurred while validating. HRESULT=’80004005’</p>

Building (on the same machine) with the command line or from the IDE results in no errors.

This script is almost identical to the one that builds the VS2005 solution, which works fine.

# ipython - QtConsole 开发

> ID：15802024
> 
> 赞同：0
> 
> 时间：2013-04-04T03:29:36.113
> 
> 标签：ipython, qtconsole

QtConsole 是 ipython 团队开发的吗？

我一直认为它是 Qt 提供的一个不错的小部件，由 iPy 实现。如果 Qt 仅仅提供了一个基本的小部件，而所有的终端魔法都是 iPy 工作的一部分，那就改变了。喜欢认真。

在可预见的几个月里，我一直停留在 Windows 中，并希望尽我所能提供帮助。如果 QtConsole 可以改进一些小问题并提供另外一两个中等功能，我认为如果您是命令行迷，并且将 Windows 作为室友，那将是一件非常令人兴奋的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:56:11.493

QtConsole 是 IPython 的一部分。它建立在 QtRichTextWidget 之上，但所有控制台/终端的东西都是[在 IPython](https://github.com/ipython/ipython/tree/master/IPython/frontend/qt/)中实现的。

# html - 何时从基本 .erb 转到 Sinatra 或 Rails

> ID：15802029
> 
> 赞同：0
> 
> 时间：2013-04-04T03:29:58.960
> 
> 标签：html, ruby-on-rails, ruby, erb

在旧的、Ruby 和 Rails 之前的 Web 时代，当需要添加 HTML 或 CSS 无法提供的服务器端功能时，通常会使用 PHP。如今，我们有很多选择来创建超级动态的网站和应用程序。我最近发现，您可以在 Web 服务器上使用**.erb**文件来获得与将 PHP 文件放入其中相同的功能，从而使事情变得更加动态。

我正在建立我的第一个从头开始的网站，这实际上是我自己的个人网站。我是一个巨大的**Ruby**书呆子，并且肯定想投资于我最了解和最熟悉的技术。*我想以简单*、*速度*和*力量*为重点进行构建。我喜欢**Rails**，并且接受过最多的培训，所以我暂时（对于我心爱的性感网站的 1.0 版），从我的选择列表中**排除了 Sinatra 或其他框架。**

现在，问题来了，诚然有点模棱两可：**从使用常规的旧 .erb 文件到使用成熟的 Rails 框架什么时候合适**？该网站不会处理任何用户或任何东西，主要是我的艺术、音乐和技术作品的组合。另外，我将使用**Jekyll 撰写**博客，以便单独处理该级别的动态内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:06:32.540

Strait ERB 文件非常适合设置简单的模板系统。Jekyll 是一种使用模板构建简单静态站点的更强大的方法。这对于没有动态内容的个人网站非常有用，当您让用户不断将新内容存储到数据库中时它不起作用，然后需要动态呈现到新页面。Rails 基于您需要一个数据库的想法，如果您不需要它，请跳过 Rails 并节省您自己的加载时间、托管成本和系统管理员的麻烦。

另请查看[https://github.com/laurilehmijoki/jekyll-s3](https://github.com/laurilehmijoki/jekyll-s3)，您可以在 S3 上以非常便宜的价格托管您的网站。

# php - PHP - set a variable which does not neet to call using global

> ID：15802031
> 
> 赞同：0
> 
> 时间：2013-04-04T03:30:33.817
> 
> 标签：php, global-variables

I have a `variable` called

```
$variable 
```

And when I call it inside a function then I need to use

```
some_function(){
global $variable;
echo $variable['array'];
} 
```

But I dont want to use a `global` every time, Is there a way so by which I can call variable without setting a global everytime???

Thanks for your time.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:32:47.563

standard practice ...

```
some_function($variable){
echo $variable['array'];
} 
```

called like any other function:

```
some_function($variable); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:33:24.207

You can `Pass` it as a parameter to your function

```
$variable=array(2,5,6,9,7);

some_function($param){
  print_r($param);  // this is your variable
} 
```

call it like

```
some_function($variable); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T03:46:46.163

如果您不想使用“全局”，您可以使用 $GLOBALS 超全局变量：

```
function some_function() {
    echo $GLOBALS['variable']['array'];
} 
```

$GLOBALS 是一个关联数组，包含对当前在脚本全局范围内定义的所有变量的引用。变量名是数组的键。

[http://www.php.net/manual/en/reserved.variables.globals.php](http://www.php.net/manual/en/reserved.variables.globals.php)

# node.js - socket.io 客户端持续重试到无法访问的主机

> ID：15802033
> 
> 赞同：1
> 
> 时间：2013-04-04T03:30:59.713
> 
> 标签：node.js, websocket, socket.io

我正在尝试从我的 socket.io-client（在 Node.js 上运行）到远程 websocket 获得持久连接。我无法控制远程套接字，有时它会完全关闭。每当发生错误或断开连接时，我想尝试重新连接（）。在下面的示例中，我试图测试远程主机拒绝连接的情况。在这种情况下，我想在 1 秒后尝试重新连接。它第二次调用，然后退出。

这是代码：

```
var events = require('events'),
    util = require('util'),
    io = require('socket.io-client'),
    url = "ws://localhost:12345", // intentionally an unreachable URL
    socketOptions = {
        "transports" : [ "websocket" ],
        "try multiple transports" : false,
        "reconnect" : false,
        "connect timeout" : 5000
    };

// The goal is to have this socket attempt to connect forever
// I would like to do it without the built in reconnects, as these
// are somewhat unreliable (reconnect* events not always firing)

function Test(){
    var self = this;
    events.EventEmitter.call(self);

    var socket;

    function reconnect(){
        setTimeout(go, 1000);
    }

    function go(){

        console.log("connecting to", url, socketOptions);

        socket = io.connect(url, socketOptions);

        socket.on('connect', function(){
            console.log("connected! wat.");
        });

        socket.on('error', function(err){
            console.log("socket.io-client 'error'", err);
            reconnect();
        });

        socket.on('connect_failed', function(){
            console.log("socket.io-client 'connect_failed'");
            reconnect();
        });

        socket.on('disconnect', function(){
            console.log("socket.io-client 'disconnect'");
            reconnect();
        });
    }

    go();
}

util.inherits(Test, events.EventEmitter);

var test = new Test();

process.on('exit', function(){
    console.log("this should never end");
}); 
```

在节点 0.11.0 下运行它时，我得到以下信息：

```
$ node socketio_websocket.js 
connecting to ws://localhost:12345 { transports: [ 'websocket' ],
  'try multiple transports': false,
  reconnect: false,
  'connect timeout': 5000 }
socket.io-client 'error' Error: connect ECONNREFUSED
    at errnoException (net.js:878:11)
    at Object.afterConnect [as oncomplete] (net.js:869:19)
connecting to ws://localhost:12345 { transports: [ 'websocket' ],
  'try multiple transports': false,
  reconnect: false,
  'connect timeout': 5000 }
this should never end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T10:19:31.433

这`ECONNREFUSED`是您无法管理的异常。试试这个：

```
process.on('uncaughtException', function(err) {
    if(err.code == 'ECONNREFUSED'){
        reconnect();
    }
} 
```

**编辑**

像这样修改选项：

```
socketOptions = {
    "transports" : [ "websocket" ],
    "try multiple transports" : false,
    "reconnect" : false,
    'force new connection': true, // <-- Add this!
    "connect timeout" : 5000
}; 
```

和重新连接功能（在评论中查看解释）

```
function reconnect(){
    socket.removeAllListeners();
    setTimeout(go, 1000);
} 
```

可能 socket.io 重用相同的连接而不创建新的连接，迫使应用程序工作

# asp.net - Google/Bing 地图上的 ASP.NET/Silverlight 位置点

> ID：15802035
> 
> 赞同：0
> 
> 时间：2013-04-04T03:31:05.600
> 
> 标签：asp.net, web-services, silverlight, google-maps, gps

我意识到这个问题非常复杂，可能需要大量研究。希望任何人都可以帮助我获得有用的资源来实现我的目标。

我想在我的 ASP.NET 4 应用程序 (C#) 上有一个 Google 或 Bing 地图，以将我所有登录的用户显示为地图上的点。

据了解，这涉及到五个大问题

1.  根据设备的唯一 IP 地址获取设备（很可能是带有 IE9 浏览器的标准笔记本电脑）的位置。
2.  将 Google 或 Bing 地图与 ASP.NET 或 Silverlight 应用程序集成。
3.  根据登录用户的位置，使用正确的缩放显示地图的右侧部分。
4.  最后，将地址标记为地图上的点。
5.  请注意，位置点应在任何位置更改时动态反映。

数据库使用 SQL SERVER 2005/2008R2 实现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:32:27.440

有[地理定位服务](http://ipinfodb.com/)可以为您提供给定 IP 地址的纬度和经度。

正如您提到的，您会将这些存储在数据库中，获取所有当前用户将是简单的数据库调用。

将谷歌地图集成到 html 页面[非常简单](http://support.google.com/maps/bin/answer.py?hl=en&answer=72644)。您只需要从您的页面发出必要的 javascript。

您应该先在地图上标记点。

谷歌地图 api 调用以适应地图以显示所有当前点（[fitBounds](https://developers.google.com/maps/documentation/javascript/3.exp/reference#Map)）。我猜bing会有类似的东西。

为了反映当前点，您必须从数据库中更新您的位置。我强烈推荐一个返回 json 并使用它来重新绘制点的 ajax 调用。

# android - 启动服务时 bindService() 和 onBind() 之间的延迟

> ID：15802040
> 
> 赞同：3
> 
> 时间：2013-04-04T03:32:28.617
> 
> 标签：android, binding, android-fragments, android-activity, android-service

我的应用程序遇到了一个奇怪的问题。我有一个在后台运行的 LocationService。我管理其生命周期的方式是：

1.  在`onResume`中，每个活动都使用`bindService(intent,serviceConnection, BIND_AUTO_CREATE)`类似的服务，在需要时自动创建服务。
2.  在`onStop`中，每个活动都使用`unbindService(serviceConnection)`
3.  这是有效的，因为在切换活动时，新方法`Activity` `onResume`在旧`Activity` `onStop`方法之前被调用

我遇到的问题是，假设我从主屏幕开始，然后启动应用程序，其中包含一个 Activity，其中有一个片段。函数调用顺序如下

1.  Activity `onCreate`-->`setContentView`在这里被调用
2.  Activity `onResume`--> 这里`bindService`被调用并且应该创建`Service`
3.  **分段`onResume`**
4.  服务`onBind`方法被调用

`bindService`我的问题是为什么我和`onBind`电话之间还有别的东西？我觉得这与线程问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T03:01:50.027

好吧，这不是一个很好的答案，但为什么在你的`bindService()`和`onBind()`电话之间没有别的东西呢？您似乎假设当您调用 bind 时系统会立即创建并启动您的服务，并且没有提供这样的保证。

您没有说明您的服务是`IntentService`还是普通服务，这可能会影响您的服务的启动速度，但我的回答是一样的。

另外，我假设您的`ServiceConnection`对象按预期在您的服务`onBind()`返回后的某个时间被调用。

我之所以这么说，不是因为我读过任何权威的东西，而是因为我有类似的经历：`ServiceConnection`尽管我很快从服务的 onBind 中返回，但在创建服务和调用我的服务之前花了多长时间，我感到惊讶和恼火。（我的片段需要来自服务的数据来创建初始 UI，因此创建服务的任何延迟都意味着向用户显示初始 UI 的延迟。）

最后，我决定使用 Intent 而不是绑定来启动我的服务，例如

```
Intent si = new Intent( this, com.company.MyService.class );
si.setAction( MyService.SVC_BIND );
startService( si ); 
```

然后我发送`MyService.SVC_UNBIND`代替调用解除绑定。当我在我的服务中收到 UNBIND 意图时，我清理然后调用`stopSelf()`. 这些是用户操作——我只是根据我如何使用它们来命名它们。

我相信这更快，但回顾我对该代码的评论，我没有任何细节。请注意，这意味着 no `ServiceConnection`，但我正在从活动直接调用服务到服务中，并且使用`LocalBroadcastManager`了相当多的。

另一个要考虑的选项（为了更快地启动您的服务，如果这是您的目标吗？？）是在 中启动它`Appliction.onCreate()`，而不是等待`Activity.onResume()`. 与您当前的正常计划相比，所有这些选项都需要做一些额外的工作来确定何时停止服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-24T11:09:34.717

就我而言，我的问题是在 Android Manifest 中使用元素的`android:process`属性`<service>`，这应该可以提高性能，但实际上，一旦服务运行，它可能会这样做，但需要很长时间才能达到`onCreate()`（因此也达到`onBind()`）。对我来说，这需要几分钟。现在，应用程序和服务运行顺畅且符合预期。

更多信息： [https ://developer.android.com/guide/topics/manifest/service-element](https://developer.android.com/guide/topics/manifest/service-element)

# ruby-on-rails - Designing an efficient continuous Questions-Answers feature for a Rails Application

> ID：15802045
> 
> 赞同：0
> 
> 时间：2013-04-04T03:33:18.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching

I have a Rails Application where I want to present user with a sequence of Questions in a particular order. A user cannot proceed to the next question unless he has answered the previous one.

Here are some design issues I need help on for an efficient implementation:

> To fetch a list of questions for a user I need to make an expensive db call. Once for a new session, the list if fetched I simply want the user to see the questions in a particular order starting from the first question. If the user had attempted some questions in a pervious session he will jump to the question he last left off. How to implement it efficiently? I believe I need caching here.

On rendering the views :

> How to render the view for this feature? I can have a controller with the initial question template. When user attempts the question, should I have question-answer options text updating with AJAX? Do I have to use jquery for the purpose or any Rails helper could be of help here?

Any design help, rails features-gems I could make use of will be welcomed.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:09:12.680

我的回答并不特定于 Ruby on Rails，但它应该仍然有效。

首先，我不会加载您可能不会提前使用的数据。如果您有 10 个问题，并且一次只显示一个，那么我只会加载第一个问题，然后在用户完成第一个问题后，继续加载第二个问题。无需加载所有十个，因为用户可能永远不会完成第 10 个问题。

假设用户过早离开，您只需进行 AJAX 调用即可从您离开的地方继续。

我同意你应该缓存这些问题。

步骤将如下所示：

1.  第一个问题 - 通过 AJAX 加载。通过 AJAX 调用保存的答案和进度。
2.  如果 (1)，则通过 AJAX 加载第二个问题。通过 AJAX 调用保存的答案和进度。
3.  重复直到问题完成。

通过这种方式，您可以使用用户/登录信息进行 AJAX 调用以从您离开的地方继续。我想这将使您的数据库调用成本更低。

# c++ - 类和空指针

> ID：15802054
> 
> 赞同：0
> 
> 时间：2013-04-04T03:33:53.303
> 
> 标签：c++, void-pointers

我有以下标题：

```
class MyClass {
private:
    static void (*OnRequest)();
    static void (*OnReceive)(int numBytes);

public:
    MyClass();

    static void SetOnReceive(void (*function)(int));
    static void SetOnRequest(void (*function)(void));    

};

void NonClassFunction(); 
```

和以下声明：

```
#include "MyClass.h"
MyClass::MyClass() {
...
}

void MyClass::SetOnReceive(void (*function)(int) ) {
    OnReceive = function;
}

void MyClass::SetOnRequest( void (*function)(void) ) {
    OnRequest = function;
}

void NonClassFunction() {
    MyClass::OnRequest();
} 
```

代码编译良好，但链接时出现以下错误：

> 未解析符号 MyClass::OnReceive，首先在 ./src/MyClass.obj 中引用
> 未解析符号 MyClass::OnRequest，首先在 ./src/MyClass.obj 中引用

我需要 OnRequest 和 OnReceive 像通过 NonClassFunction() 的回调一样工作。NonClassFunction 被中断调用，所以这里有一些面向对象的修改。MyClass 旨在被继承。理想情况下，我希望 OnRequest 和 OnReceive 是虚拟的，但您不能将静态方法设为虚拟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:37:25.227

*这些是链接器错误，这意味着*成员**未定义** 。它们只是被*声明*的。

 **指针成员是`static`成员，所以他们需要定义，这是在类之外。

在`.cpp`文件中执行此操作：

```
void (*MyClass::OnRequest)();
void (*MyClass::OnReceive)(int); 
```

这些是*定义*，你在课堂上写的只是声明。

注意`*`上述定义中的位置。像这样的一个小错误：

```
void (MyClass::*OnRequest)();    //notice the difference
void (MyClass::*OnReceive)(int); //notice the difference 
```

会完全改变意思！现在这些是*指向非静态成员函数*的指针。所以要知道区别并小心。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T03:37:52.557

标题中的这两个变量：

```
static void (*OnRequest)();
static void (*OnReceive)(int numBytes); 
```

尚未定义。

在您的 cpp 文件中定义它们。

```
void (*MyClass::OnRequest)();
void (*MyClass::OnReceive)(int); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T03:38:34.660

您提供了函数指针的声明，但没有提供定义。将此添加到单个 cpp 文件中：

```
void (*MyClass::OnRequest)();
void (*MyClass::OnReceive)(int); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T03:40:19.467

我最近问了同样的问题 [how-to-send-a-message-to-the-class-that-c​​reated-the-object](https://stackoverflow.com/questions/13787181/how-to-send-a-message-to-the-class-that-created-the-object)

```
enemies_array[0].enemy =  new Enemy(this,&Game::EnemyEvent);   

typedef void (Game::*ChangeFunc)(DWORD &)
Class Enemy
{
private:
   ChangeFunc iChange;
   Game *pGame;
}:

Enemy(Game *pCreatorGame, ChangeFunc iChangeHandler )
{
    iChange = iChangeHandler;
    pGame = pCreatorGame;
}

void Enemy::Draw(D3DGraphics& gfx)
{
    (pGame->*iChange)(this->dwThreadID); 
```**

# properties - Use property file in a JAR

> ID：15802055
> 
> 赞同：0
> 
> 时间：2013-04-04T03:33:55.670
> 
> 标签：properties, jar, filenotfoundexception

After a lot of property file articles and comments I am really lost.

All I want is to retrieve values and to overwrite them - and I want to use that with a jar-file.

If I compile in eclipse it works perfectly but the moment I compile I got the famous "property file not found"-exception.

```
FileInputStream in = new   FileInputStream(ClassLoader.getSystemResource("client.properties").getPath()); 
Properties props = new Properties();
        props.load(in);
        in.close(); 
```

The exception I got is the following:

```
C:\Users\thomas\Desktop>java -jar erp_auer_client_v0_1.jar
java.io.FileNotFoundException: file:\C:\Users\thomas\Desktop\erp_auer_client_v0_
1.jar!\client.properties (Die Syntax f³r den Dateinamen, Verzeichnisnamen oder d
ie Datentrõgerbezeichnung ist falsch)
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(Unknown Source)
        at java.io.FileInputStream.<init>(Unknown Source)
        at global_functions.helperFunctions.getPathBARTENDEREXE(helperFunctions.
java:361)
        at client.programmeinstellungen.ProgrammEinstellungenManagement.<init>(P
rogrammEinstellungenManagement.java:59)
        at client.main.MainOverview$11.mousePressed(MainOverview.java:275) 
```

The german part (Die Syntax f³r den Dateinamen, Verzeichnisnamen oder d ie Datentrõgerbezeichnung ist falsch) means "The syntax for the filename, directory name or disk name is wrong".

Do you have an idea what that could be?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T16:07:32.847

Alright, I tried it myself and realized that it is a little more trickier than I thought initially. However, I think that in your scenario you can just use something like bellow. I tested in windows and linux and worked fine for me:

```
package mypackage;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.OutputStream;
import java.net.URISyntaxException;
import java.util.Date;
import java.util.Properties;

public class MyMainClass {

    public static void main(String[] args) throws URISyntaxException {
        /*
         * 
         * MyMainClass.class.getProtectionDomain().getCodeSource().getLocation().toURI().getPath();
         * In Linux it returns null
         * 
         * ClassLoader.getSystemClassLoader().getResource(".").getPath() + "MyProperty.properties";
         * In Linux it returns {JRE_PATH}/lib/ext/pulse-java.jar
         * In Windows it returns {JAR_FILE_PATH}
         */

        String propertyFilePath = "MyProperty.properties";
        Properties props = new Properties();
        try {
            FileInputStream in = new   FileInputStream(propertyFilePath); 
            props.load(in);
            in.close();
        } catch (Exception e) {
            File f = new File(propertyFilePath);
            System.err.println("Could not read file: " + f.getAbsolutePath());
        }

        System.out.println("Fetching property value of [now]: " + props.get("now"));
        String now = new Date().toString();
        System.out.println("Storing property [now]: " + now);
        props.setProperty("now", now);

        try {
            OutputStream out = new FileOutputStream(propertyFilePath); 
            props.store(out, "Saving value of [now]");
        } catch (Exception e) {
            File f = new File(propertyFilePath);
            System.err.println("Could not write file: " + f.getAbsolutePath());
        }
    }
} 
```

# python - Apache bench Connection refused (61) apr_socket_recv

> ID：15802057
> 
> 赞同：4
> 
> 时间：2013-04-04T03:34:13.497
> 
> 标签：python, serversocket, apachebench

I have a similar issue with this [ab is erroring out with apr_socket_recv: Connection refused (61)](https://stackoverflow.com/questions/7938869/ab-is-erroring-out-with-apr-socket-recv-connection-refused-61), and I have tried upgrading the new apache bench but the problem still exists. I have no idea whether the problem lies in apache bench or the server. I am using python Gevent Server with bottle framework.

Apache bench version

```
This is ApacheBench, Version 2.3 <$Revision: 1430300 $> 
```

Trace error

```
Benchmarking ec2-xx-xx-xx-xx.eu-west-1.compute.amazonaws.com (be patient)
Completed 100 requests
Completed 200 requests
Completed 300 requests
Completed 400 requests
apr_socket_recv: Connection refused (61)
apr_socket_recv: Connection refused (61)
apr_socket_recv: Connection refused (61)
apr_socket_recv: Connection refused (61)

Test aborted after 10 failures

apr_socket_connect(): Operation already in progress (37)
Total of 468 requests completed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-05T05:37:38.973

Does the hostname for which you're testing with ab have an IPv6 record? I resolved my problems by adding IPv6 configurations to my servers. `ab http://111.222.111.222/` worked, but `ab http://subdomain.domain.com/` didn't work. `subdomain.domain.com` had both IPv4 and IPv6 records, and I changed my configuration:

**New, Enabled IPv6 Configuration**

```
server {
  listen       [80;      #IPv4
  listen       [::]:80;  #IPv6

  server_name  localhost;    
  ...
} 
```

**Original, Disabled IPv6 Configuration**

```
server {
  listen       80;

  server_name  localhost;    
  ...
} 
```

More info: [http://nginxlibrary.com/enable-ipv6-support/](http://nginxlibrary.com/enable-ipv6-support/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-04T17:46:59.393

# 在 OSX 10.10.4 更新或重启后看到这个？

在使用系统和 xcode 更新重新启动 OSX 后，我刚刚出现了这个错误。尝试了几件事后，凭直觉，我尝试先运行xcode，然后重新尝试ab。它刚刚奏效。我猜测是否必须像过去那样接受与命令行工具术语的交互，但没有这样的提示。也就是说，在我运行一次 xcode 之后，ab 就可以工作了。万一这对任何人都有帮助...

# c# - 如何在 Windows Phone 应用程序（如本机消息应用程序）中格式化日期时间

> ID：15802061
> 
> 赞同：0
> 
> 时间：2013-04-04T03:34:40.843
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8, windows-phone

Windows Phone 8 中的本机消息传递应用程序显示日期时间，如下所示：

```
4/3, 8:31p

12/25, 10:01a 
```

当我使用 String.Format("{0:d} {0:t}") 格式化日期时间时，我得到了这些：

```
4/3/2013 8:31 PM

12/25/2012 10:01 AM 
```

我怎样才能使它像原生消息传递应用程序一样简洁？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:13:21.367

此表示没有[标准的日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。

虽然您可以简单地使用它：

```
string.Format("{0:M/d, h:mmt}"); 
```

...当您的应用程序用于切换日期和月份顺序的文化时，这将无济于事。

最接近的解决方案可能是采用您当前文化的格式字符串并进行相应修改，即：

```
var culture = (CultureInfo)CultureInfo.CurrentUICulture.Clone();
// Make the AM/PM designators lowercase
culture.DateTimeFormat.AMDesignator = culture.DateTimeFormat.AMDesignator.ToLower();
culture.DateTimeFormat.PMDesignator = culture.DateTimeFormat.PMDesignator.ToLower();

var dDateFormatPattern = culture.DateTimeFormat.ShortDatePattern;
var tDateFormatPattern = culture.DateTimeFormat.ShortTimePattern;

var dateCompact = dDateFormatPattern.Replace("yyyy", "")
    .Replace("MM", "M").Replace("dd", "d").Replace(" ", "")
    .Trim(culture.DateTimeFormat.DateSeparator.ToArray());

var timeCompact = tDateFormatPattern
    .Replace("hh", "h").Replace("tt", "t").Replace(" ", "");

Console.WriteLine(DateTime.Now.ToString(dateCompact + " " + timeCompact, culture));

>>> 4/4 3:03p 
```

...或者，也许您可​​以只检查模式和模式的值并在模式和模式`CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern`之间切换。它不会对所有文化都完美，但至少当您遇到一种以您从未预料到的方式格式化日期和时间的文化时，您不会感到不愉快！`D/M``M/D`

# node.js - 来自网站的 Node.js 用户输入（不使用 Express.js）

> ID：15802064
> 
> 赞同：0
> 
> 时间：2013-04-04T03:34:49.060
> 
> 标签：node.js, user-input, fs

我仍然是 Node.js 的初学者，我正在尝试尽可能多的探索。

我知道 Express.js 是许多人用来在 Node.js 中创建网站的框架。

但是如果不使用 Express.js，我知道可以使用 'fs.readFile' 读取 .html 文件，然后在浏览器中“显示”这个 .html 文件。

有没有办法从这个网页获取用户输入（比如单击按钮，或填写一个框）到 Node.js 中？到目前为止，我还没有找到任何这样的例子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:10:05.660

是的，这是可能的。研究[connect bodyParser 的 urlencoded 函数是如何工作的](https://github.com/senchalabs/connect/blob/master/lib/middleware/urlencoded.js#L63-L75)。

当来自浏览器的请求进入时，节点会将其表示为可读数据流。对于 Web 表单，模式将是：

1.  使用请求`data`和`end`事件将流中的数据块缓冲到单个字符串中。
2.  在给定数据格式的情况下适当地解析该字符串。对于 web 表单，这通常是 urlencoded (application/x-www-form-urlencoded) MIME 类型

.

```
 var qs = require('qs'); //https://github.com/visionmedia/node-querystring
  function handle(req, res) {
    var buf = '';
    req.setEncoding('utf8');
    req.on('data', function(chunk){
      //assemble the request from distinct chunks into a single string
      buf += chunk
    });
    req.on('end', function(){
      //OK, you have a usable string request body, parse it and handle it
      try {
        var formData = qs.parse(buf);
        //Yay, it parsed. Now you have your form data
        //depending on your form's html, you might have formData.email, for example
      } catch (err){
        //oops, respond with an error          
      }
    });
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:33:55.217

[教程](http://blog.frankgrimm.net/2010/11/howto-access-http-message-body-post-data-in-node-js/ "教程")

长话短说：

```
http.createServer(function (req, res) {
    var data = '';
    req.on('data', function(chunk) {
        console.log("Received body data:");
        console.log(chunk);
        data += chunk.toString();
    });

    req.on('end', function() {
        console.log('Received Data: ', data);
        res.end();
    });
} 
```

# php - call EvalMath to parse math expression

> ID：15802065
> 
> 赞同：0
> 
> 时间：2013-04-04T03:35:08.777
> 
> 标签：php

I'm new in php. I want to evaluate math expression using [EvalMath](http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html) class. I create new EvalMath using this code

```
require_once "evalmath.class.php";

$m = new EvalMath;

$result = $m->evaluate("2+2");

echo ($result); 
```

instead of I get the result, I get the class content in my browser.

Did I miss something in my code?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:20:00.597

EvalMath 类使用

```
<? 
```

在第一行而不是

```
<?php 
```

并且没有关闭 php 标记。添加适当的 php 标签：

```
<?php
class EvalMath{
....
}
?> 
```

它将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:31:36.837

这听起来可能很愚蠢，但是您是否在文件顶部添加了 PHP 标记？

```
<?php
require_once "evalmath.class.php";
$m = new EvalMath;
$result = $m->evaluate("2+2");
echo ($result);
?> 
```

否则，我已经尝试过你的代码，它工作正常......

这个项目，仅供参考，看起来很有希望。在这一点上，EvalMath 似乎已经超过 8 岁了。

[https://github.com/Riimu/Expresso](https://github.com/Riimu/Expresso)

# javascript - Why does RequireJS optimizer omit '/' in module-names in Windows?

> ID：15802066
> 
> 赞同：1
> 
> 时间：2013-04-04T03:35:08.370
> 
> 标签：javascript, requirejs, amd, minify, optimization

After running our RequireJS build scripts on Windows for a module that lives in components/Cinema.Helper.Ticket.js, it outputs the following module name

```
define("componentsCinema.Helper.Ticket" ... 
```

However, on my Mac computer it works just fine, slash included. What could be the reason for that? What can we do to prevent it from happening?

# android - ActionBarSherlock 选项卡横向宽度

> ID：15802069
> 
> 赞同：1
> 
> 时间：2013-04-04T03:35:52.133
> 
> 标签：android, actionbarsherlock

我正在使用 actionbarsherlock 选项卡导航，它们工作正常。我遇到的唯一问题是，当进入横向模式时，选项卡不会填满屏幕的整个宽度，而且不像纵向模式那样小。

我一直在寻找标签的样式，但我找不到正确的设置来使标签更宽。我需要什么才能使标签可以横向填充屏幕上的宽度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T20:57:37.710

似乎这样做的唯一方法是使用自定义视图。看一下这个：

[使用 ActionBarSherlock 设置菜单项居中和全宽](https://stackoverflow.com/questions/13966639/set-menu-items-centered-and-full-width-with-actionbarsherlock)

# java - 将对象转换为 blob（java.lang.ClassCastException：[B 不能转换为 java.sql.Blob）

> ID：15802070
> 
> 赞同：0
> 
> 时间：2013-04-04T03:36:01.533
> 
> 标签：java

当我尝试使用 (Blob) 将 Oject 转换为 blob 时，得到 java.lang.ClassCastException: [B cannot be cast to java.sql.Blob 错误。

但是当我尝试使用以下代码进行转换并写入图像文件时，图像已损坏。

```
Blob blob = null;

        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        ObjectOutput out = null;
        try {
          out = new ObjectOutputStream(bos);   
          out.writeObject(myObj);

          byte[] yourBytes = bos.toByteArray();

          //blob.setBytes(1, yourBytes );
          blob = new SerialBlob(yourBytes);
        } finally {
          out.close();
          bos.close();
        } 
```

如何安全地将对象（保存为 Blob 的图像文件）转换为 Blob？

注意：由于要求，我只能作为从其他部分传递的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:34:02.510

您可以使用

如果你使用休眠

```
 Blob blob = Hibernate.createBlob(bytes, session); 
```

如果您使用的是 JDBC

```
 Blob blob = connection.createBlob();
       blob.setBytes(1, bytes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:43:48.340

由于您收到的类演员异常，我将在这里四处走动并说您实际上并没有从那一端得到一个 Blob。

进行调试并查看实际发送的类型。

而且我可能错了，但据我所知，Clob 和 Blob 不可序列化......所以如果另一端是网络，它将是 kaboom......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-05T10:00:52.763

不确定我的答案有多相关，但已使用上述答案作为提示来达到这一点。

使用 - 下面的依赖

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-core</artifactId>
    <version>5.1.0.Final</version>
</dependency> 
```

模型类中的属性定义为 -

```
java.sql.Blob message; 
```

在`mymodel.hbm.xml`有效模型映射内的文件中

```
<class name="packagepath.Pojo" table="pojotableindb">
<meta attribute="class-description">
     Pojo class is mapped to pojotableindb table
  </meta>
    <id name="id" column="ID" type="long">
    <!-- for auto increment -->
        <generator class="identity" />
    </id>
    <property name="message" column="MESSAGE" type="blob" />
</class> 
```

现在，在我的一个 DAO 方法中，我做了如下的事情来在`MESSAGE`列中插入一个值 -

```
Pojo pojo = new Pojo();
pojo.setMessageId(uuid);
//message is the string argument this DAO method receives         
activityTrack.setMessage(Hibernate.getLobCreator(session).createBlob(message.getBytes())); 

tx = session.beginTransaction();
session.save(pojo);
tx.commit(); 
```

希望这会对某人有所帮助。

# php - PHP regex 不匹配 utf-8 解码字符串

> ID：15802071
> 
> 赞同：1
> 
> 时间：2013-04-04T03:36:02.507
> 
> 标签：php, regex, curl, utf-8, domxpath

我有一些`regex`陈述有问题。我不确定它为什么这样做，但是我认为它可能与字符编码有关。

所以我使用 curl 从网站接收页面内容。然后我使用`domXPath`查询来获取某个元素，然后从该元素中获取其内容，然后从该内容中执行`regex`语句。但是该`regex`声明不起作用，我不知道为什么。

这是我从元素中收到的：

```
X: asdasdfgdgdrrY: dfgdfgfgZ: ukuykyukjghj
  a B 7dd. 
```

现在，当我尝试将其与此代码匹配时：

```
/X: (?P<x>.*)Y: (?P<y>.*)Z: (?P<z>.*)\s*(?P<a>[a-zA-Z]+) (?P<b>[a-zA-Z]+) (?P<c>[0-9]+)dd/ 
```

我已经在 Dreamweaver 中测试过它并且它匹配所以我不知道它不会在线

我收到的页面也有 utf-8 的内容，

我尝试使用转换内容以删除 utf-8 字符

```
iconv('utf-8', 'ISO-8859-1//IGNORE', $td->item(0)->nodeValue); 
```

如果我不删除 utf-8 字符，则`Á`在“a”、“b”和“c”变量值之后会有奇怪的符号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:01:15.573

好的，我想通了，要摆脱这些不可见的无效字符，我所要做的就是：

```
$value = preg_replace("/[^a-zA-Z0-9 %():\$.\/-]/",' ',$value); 
```

更重要的是，只需用空格或空白替换任何无效的字符。就我而言，我使用了空间，因为它似乎有些空间是无效的。

# python - python中的3维矩阵表示

> ID：15802072
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:36:28.593
> 
> 标签：python, matrix

我怎样才能写一个`MxNx3`矩阵。在哪里

```
a = matrix(((1.4,),(2.5,),(1.96,),(6.25,),(12.25,)))

resol_val2 = a.shape 
```

这里`resol_val2`是`(5, 1)`。我想写一个在`matrix b`哪里`b.shape``(M,N,3)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:08:26.147

如果你使用 numpy，你可以这样做：

```
>>> a = numpy.array(((1.4,),(2.5,),(1.96,),(6.25,),(12.25,),(10.21)))
>>> m = 2
>>> n = 3
>>> b = a.reshape((m,n,1)) 
```

# c# - 搜索对象列表

> ID：15802074
> 
> 赞同：0
> 
> 时间：2013-04-04T03:36:30.303
> 
> 标签：c#, asp.net

我得到一个用户所属的安全组列表作为对象数组。我使用 DirectoryEntry 来获取活动目录属性，其中一个属性是“memberOf”（de.properties[“memberOf”].value）。返回值是一个“对象数组”。这个对象数组的每个元素看起来像：

```
"CN=SITE_MAINTENANCE,OU=CMS,OU=SD,OU=ESM,OU=Engineering Systems,DC=usa,DC=abc,DC=domain,DC=com" 
```

我可以遍历元素，将每个元素转换为“字符串”并以这种方式搜索。我只是认为可能有一种更简单的方法不需要循环。我需要能够找到其中带有 OU=CMS 的那个。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:42:16.503

遍历数组，然后使用 indexOf 或 Regexp 搜索字符串“OU=CMS”。如果它存在于字符串中，那么您“找到了其中包含 OU=CMS 的那个”。

您可以执行任何操作，例如将项目放入新列表或任何您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:45:37.687

```
list.Where(a=>a.ToString().Contains("OU=CMS")).ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:15:10.947

您可以使用如下

```
string listString="CN=SITE_MAINTENANCE,OU=CMS,OU=SD,OU=ESM,"+
                     "OU=Engineering Systems,DC=usa,DC=abc,DC=domain,DC=com" 
```

使用 linq：

```
listString.Split(',').Contains("OU=CMS") 
```

无 linq：

```
Array.IndexOf(listString.Split(','), "OU=CMS") >= 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T04:40:08.153

您可以通过 foreach 循环搜索所需的值

# ruby-on-rails - RefineryCMS 在生产中更改站点名称

> ID：15802077
> 
> 赞同：0
> 
> 时间：2013-04-04T03:37:02.887
> 
> 标签：ruby-on-rails, refinerycms, refinery

`config.site_name`我在heroku上有一个炼油厂站点，为了更改站点名称，我一直在访问我的本地副本，更改`git push heroku master`. 虽然我预计不必多次更改站点名称（我有一个仍在决定最终站点名称的客户），但我想知道是否有更快的方法来做到这一点（我试图弄清楚如果这是一个配置选项，我可以从 heroku 的终端进行更改，但无济于事）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:06:18.653

我会建议添加新模型“site_setting”来添加一些额外的设置。因此，您可以添加一列，即 site_name。因此管理员可以通过提供简单的 UI 来插入站点名称来动态添加/更新站点名称。

剩下的任务是在 site_bar.html.erb 添加该对象

我希望这对你有用。

# google-maps - 使用谷歌地图从用户输入的街道地址中获取正确的地址

> ID：15802081
> 
> 赞同：2
> 
> 时间：2013-04-04T03:37:12.217
> 
> 标签：google-maps

我从未使用过 google-maps api，但我只想做一件事。

我有大约 1000 个用户输入的街道地址。有些缺少州和邮政编码。我注意到，如果我将这些地址输入谷歌地图，它通常会返回状态和邮政编码（很少会提供一些选项）。有没有办法以编程方式执行此操作，所以我不必手动复制/粘贴它？是否有人已经制作了一个应用程序/库来执行此操作，我可以将用户键入的数据提供给它？

**编辑：**

我注意到这可以完成工作：

[https://maps.google.com.au/maps?q=1%20George%20st%20sydney](https://maps.google.com.au/maps?q=1%20George%20st%20sydney)

它返回状态和邮政编码。但它会在包含许多其他内容的网页上返回它。我只想要地址。我想我可以对结果进行 grep，但是要添加到查询字符串中的一些额外内容，以便它只返回原始地址（或某些结构）会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T02:56:45.083

您可以使用地理编码 API - [https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

例如[http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=1%20George%20st%20sydney](http://maps.googleapis.com/maps/api/geocode/json?sensor=false&address=1%20George%20st%20sydney)；如果您愿意，可以将“json”替换为“xml”。根据您的需要，在结果中查找“formatted_address”或单个地址组件。

但是，我很沮丧它有时不起作用，即使在常规谷歌地图搜索成功的某些情况下也是如此。

# android - Android 封面流程

> ID：15802083
> 
> 赞同：1
> 
> 时间：2013-04-04T03:37:21.867
> 
> 标签：android, coverflow

我通过本教程链接[http://www.inter-fuser.com/2010/01/android-coverflow-widget.html](http://www.inter-fuser.com/2010/01/android-coverflow-widget.html)在我的 Android 应用程序中使用封面流程，并且我已经很好地使用了它。但我的问题是，当 Android 版本为 4.1 时，封面流程无法正常工作，因为选择图像后图像没有居中或对齐良好。但是，如果 Android 版本低于 4.0，它就像在链接的视频中一样运行良好。

有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:53:57.240

**更新**

解决此问题的方法是进行以下更改`getChildStaticTransformation(View child, Transformation t)`

```
protected boolean getChildStaticTransformation(View child, Transformation t) {
                child.invalidate(); // add this line
                final int childCenter = getCenterOfView(child);
                final int childWidth = child.getWidth();
                int rotationAngle = 0;

                t.clear();
                t.setTransformationType(Transformation.TYPE_MATRIX);

                if (childCenter == mCoveflowCenter) {
                        transformImageBitmap((ImageView) child, t, 0); 
                } else {
                        rotationAngle = (int) (((float) (mCoveflowCenter - childCenter) / childWidth) * mMaxRotationAngle);
                        if (Math.abs(rotationAngle) > mMaxRotationAngle) {
                                rotationAngle = (rotationAngle < 0) ? -mMaxRotationAngle
                                                : mMaxRotationAngle;
                        }   
                        transformImageBitmap((ImageView) child, t, rotationAngle);
                }   

                return true;
        } 
```

--

我最近遇到了同样的问题。这与[画廊](http://developer.android.com/reference/android/widget/Gallery.html)已被弃用有关。作为替代方案，我使用 Horizo​​ntalScrollView 并使用 .scrollTo() 实现了与此类似的功能。此解决方案的问题是 scrollTo() 与视图的左侧对齐，因此您必须计算中间的 y0urself。如果布局填满屏幕，您将不得不在视图的左侧和右侧应用填充以强制选定元素居中。

一个警告。水平滚动视图没有动画滚动，因此它将是一种快速行为。您可以通过使用计时器滚动来解决此问题，但这不是一个非常优雅的解决方案。

# c++ - Stringstream 在一行中双输出最后的字符串？

> ID：15802084
> 
> 赞同：0
> 
> 时间：2013-04-04T03:37:23.247
> 
> 标签：c++

这是一个用于解析文本文件的示例，问题是如果我在内部 while 循环之外声明“字符串 parm”，则一行中的最后一个字符串总是双输出（这仅在每个末尾出现一些空格字符时才会发生“source.txt”中的行，如果不是一切正常）。我可以通过删除“source.txt”中附加的空格字符或在内部while循环中声明“string parm”来解决这个问题，但我仍然无法弄清楚导致双重输出的原因，有什么想法吗？

```
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>

using namespace std;

void main(int argc, char* argv[])
{
   string f_string = "source.txt";

   ifstream inputFile(f_string, ifstream::in);

   char line[1024];

   while(inputFile.getline(line, 1023))
   {
      stringstream ss(stringstream::in | stringstream::out);
      ss.str(line);

      string parm;   // final string will preserved ???

      while(!ss.eof())
      {
         //string parm;   final string won't get double output if declare here ...

         ss >> parm;
         cout << parm << endl;

         if(parm.compare("value") == 0)
            cout << "Got value." << endl;
      }

      cout << endl;
   }
} 
```

使用 source.txt 像这样：

```
1st name_1 value    
2nd name_2 value    
3rd name_3 
```

如果每行末尾出现一些空格字符，我得到了这个：

```
1st
name_1
value
Got value.
value
Got value.

2nd
name_2
value
Got value.
value
Got value.

3rd
name_3
name_3 
```

如果不是，或者如果在内部while循环中声明了“string parm”，我得到了一个更合理的结果：

```
1st
name_1
value
Got value.

2nd
name_2
value
Got value.

3rd
name_3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:40:25.107

将代码更改为如下：

```
while(ss >> parm)
{
   cout << parm << endl;

   if(parm.compare("value") == 0)
        cout << "Got value." << endl;
} 
```

我怀疑的问题是`while(!ss.eof())`. 请参阅[为什么循环条件内的 iostream::eof 被认为是错误的？](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)详细说明。

```
//string parm;   final string won't get double output if declare here 
```

如果`string parm`在循环内声明，每次循环都会得到一个空字符串。失败时`ss >> parm`，不会将任何内容读入字符串并输出一个空字符串。

# c# - 在Android上按下/选择任何文本时弹出菜单

> ID：15802087
> 
> 赞同：1
> 
> 时间：2013-04-04T03:37:46.570
> 
> 标签：c#, android, xamarin.android

每当用户在 Andriod 设备上选择文本时，有没有办法弹出菜单？

例如，当用户长按任何文本时，会出现默认弹出菜单，其中包含：复制，剪切，粘贴...等。

有没有办法在按下时启动我的应用程序的“上下文菜单”上添加另一个条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:44:32.187

没有任何工具可以将您的应用程序添加到 Android 中的操作系统默认上下文菜单。您可以在 AndroidManifest.xml 中设置[意图接收器](http://developer.android.com/reference/android/content/BroadcastReceiver.html)，该接收器将“侦听”某些操作并在允许的情况下拦截它们​​。出于这个原因，有时单击图标或文件系统资产会提示您使用选择器来选择要打开的应用程序。

# paypal - 如果响应失败，PayPal如何获取回发参数

> ID：15802088
> 
> 赞同：0
> 
> 时间：2013-04-04T03:37:47.713
> 
> 标签：paypal, postback

如果在场景中给买家点击“取消并返回 xxx 商店”，我可以得到回传参数吗？下面的代码是在 palpal webscr 过程中买家点击取消后我试图让回发参数回显的方式：

```
$req = 'cmd=_notify-synch';
$pp_hostname = "www.sandbox.paypal.com";
$tx_token = $_GET['tx'];
$auth_token = "Ti-bfX-sv-zNDXZS";
$req .= "&tx=".$tx_token."&at=".$auth_token;

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://".$pp_hostname."/cgi-bin/webscr");
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $req);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 1);
//set cacert.pem verisign certificate path in curl using 'CURLOPT_CAINFO' field here,
//if your server does not bundled with default verisign certificates.
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
curl_setopt($ch, CURLOPT_HTTPHEADER, array("Host: ".$pp_hostname));
$res = curl_exec($ch);
curl_close($ch);

if(!$res){
    //HTTP ERROR
}else{
    // parse the data
    $lines = explode("\n", $res);
    $keyarray = array();
    if(strcmp($lines[0], "SUCCESS") == 0){

        for($i=1; $i<count($lines);$i++){
        list($key,$val) = explode("=", $lines[$i]);
        $keyarray[urldecode($key)] = urldecode($val);
        }

   //process payment 

}else if(strcmp($lines[0], "FAIL") == 0){

    $lines = explode("\n", $res);
    $keyarray = array();

    for($i=1; $i<count($lines);$i++){
        list($key,$val) = explode("=", $lines[$i]);
        $keyarray[urldecode($key)] = urldecode($val);
    }

    // echo post back params if FAIL
    echo "<p><h3>Transaction ".$keyarray['payment_status']."!</h3></p>";

} 
```

}

如果响应，是否有可能获得回发参数`FAIL`？如果买家取消交易，我需要一些数据在数据库中处理。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-02T13:06:38.573

贝宝提供有关交易信息的所有信息以获取更多信息，请查看以下链接信息

原因代码

[https://developer.paypal.com/webapps/developer/docs/classic/ipn/integration-guide/IPNandPDTVariables/](https://developer.paypal.com/webapps/developer/docs/classic/ipn/integration-guide/IPNandPDTVariables/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:16:39.683

PayPal 不会将任何参数传回给您的取消，但您可以传回您自己的参数。您可以动态填充可帮助您识别用户或订单的取消 URL，然后在取消 URL 上读取它。例如，您可以将取消 URL 动态填充为[https://www.mysite.com/cancel.php?orderid=483723](https://www.mysite.com/cancel.php?orderid=483723)之类的内容，然后您将根据订单 ID 在系统中进行自己的查找，或者什么每次您传递并返回您的取消 URL。

# javascript - 带有正则表达式的文本字段的电话掩码

> ID：15802100
> 
> 赞同：0
> 
> 时间：2013-04-04T03:39:27.917
> 
> 标签：javascript, regex, mask

我正在使用此功能进行电话屏蔽，并且几乎可以完美运行。

```
function mask(o, f) 
{ 
    v_obj = o; 
    v_fun = f; 
    setTimeout("execmask()", 1) 
};

function execmask() 
{ 
    v_obj.value = v_fun(v_obj.value) 
};

function mphone(v){
    v=v.replace(/\D/g,"");           
    v=v.substring(0, 11);
    v=v.replace(/^(\d{2})(\d)/g,"(OXX$1) $2"); 
    v=v.replace(/(\d)(\d{4})$/,"$1-$2"); 
    return v;
} 
```

在这里，我在文本字段中运行掩码：

```
<input type="text" id="phone" name="phone" onkeypress="mask(this, mphone);" onblur="mask(this, mphone);" /> 
```

问题是我需要将这部分代码更改`(OXX$1)`为`(0XX$1)`.

现在的情况：

| 位数 | 输入字段 |
| --- | --- |
| 9位 | (OXX99) 99999-9999 |
| 8位 | (OXX99) 9999-9999 |

我需要的正确格式：

| 位数 | 输入字段 |
| --- | --- |
| 9位 | (0XX99) 99999-9999 |
| 8位 | (0XX99) 9999-9999 |

8位或9位的数量是用户的选择。

更改`O`为`0`, 会导致掩码出错。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T05:15:23.500

```
function mask(o, f) {
    setTimeout(function () {
        var v = f(o.value);
        if (v != o.value) {
            o.value = v;
        }
    }, 1);
}

function mphone(v) {
    var r = v.replace(/\D/g,"");
    r = r.replace(/^0/,"");
    if (r.length > 10) {
        // 11+ digits. Format as 5+4.
        r = r.replace(/^(\d\d)(\d{5})(\d{4}).*/,"(0XX$1) $2-$3");
    }
    else if (r.length > 5) {
        // 6..10 digits. Format as 4+4
        r = r.replace(/^(\d\d)(\d{4})(\d{0,4}).*/,"(0XX$1) $2-$3");
    }
    else if (r.length > 2) {
        // 3..5 digits. Add (0XX..)
        r = r.replace(/^(\d\d)(\d{0,5})/,"(0XX$1) $2");
    }
    else {
        // 0..2 digits. Just add (0XX
        r = r.replace(/^(\d*)/, "(0XX$1");
    }
    return r;
} 
```

[http://jsfiddle.net/BBeWN/](http://jsfiddle.net/BBeWN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-24T16:48:39.973

我做了一些改变：

1.  我将事件更改为 keyup （除了 keypress 已被弃用的事实），因为 keypress 总是采用少一个字符的字符串，并且工作我还需要 onblur，这是 keyup 不会发生的事情。需要调整代码来解决这个问题
2.  以及“-”的问题，当试图用退格键删除它时，它总是会回来。

[小提琴](https://jsfiddle.net/windmateus/7tae9wps/1/)

```
 function mascaraFone(event) {
    var valor = document.getElementById("telefone").attributes[0].ownerElement['value'];
    var retorno = valor.replace(/\D/g, "");
    retorno = retorno.replace(/^0/, "");
    if (retorno.length > 10) {
      retorno = retorno.replace(/^(\d\d)(\d{5})(\d{4}).*/, "($1) $2-$3");
    } else if (retorno.length > 5) {
      if (retorno.length == 6 && event.code == "Backspace") { 
        // necessário pois senão o "-" fica sempre voltando ao dar backspace
        return; 
      } 
      retorno = retorno.replace(/^(\d\d)(\d{4})(\d{0,4}).*/, "($1) $2-$3");
    } else if (retorno.length > 2) {
      retorno = retorno.replace(/^(\d\d)(\d{0,5})/, "($1) $2");
    } else {
      if (retorno.length != 0) {
        retorno = retorno.replace(/^(\d*)/, "($1");
      }
    }
    document.getElementById("telefone").attributes[0].ownerElement['value'] = retorno;
  }
```

```
<input id="telefone" onkeyup="mascaraFone(event)" />
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T02:50:07.973

在这个沙盒项目中，可以看到以下方法的使用，在输入中应用它们：[https ://codesandbox.io/s/epic-darwin-obj8dp](https://codesandbox.io/s/epic-darwin-obj8dp)

正则表达式掩码：

```
 // 10.000,00
const maskMoney = (event) => {
  const { value } = event.currentTarget;
  return value
    .replace(/\D/g, '')
    .replace(/(\d)(\d{2})$/, '$1,$2')
    .replace(/(?=(\d{3})+(\D))\B/g, '.');
};

// 000.000.000-00
const maskCPF = (event) => {
  event.currentTarget.maxLength = 15;
  const { value } = event.currentTarget;

  return value
    .replace(/\D/g, '')
    .replace(/(\d{3})(\d)/, '$1.$2')
    .replace(/(\d{3})(\d)/, '$1.$2')
    .replace(/(\d{3})(\d{1,2})/, '$1-$2')
    .replace(/(-\d{2})\d+?$/, '$1');
};

// 00.000.000/0000-000
const maskCNPJ = (event) => {
  event.currentTarget.maxLength = 18;
  const { value } = event.currentTarget;
  return value
    .replace(/\D/g, '')
    .replace(/(\d{2})(\d)/, '$1.$2')
    .replace(/(\d{3})(\d)/, '$1.$2')
    .replace(/(\d{3})(\d)/, '$1/$2')
    .replace(/(\d{4})(\d{2})/, '$1-$2');
};

// 000.000.000-00 or 00.000.000/0000-000
const maskCPFOrCNPJ = (event) => {
  event.currentTarget.maxLength = 18;
  const { value } = event.currentTarget;
  if (value.length >= 15) {
    return maskCNPJ(event);
  }
  return maskCPF(event);
};

// (00) 00000-0000
const maskPhone = (event) => {
  event.currentTarget.maxLength = 15;
  const { value } = event.currentTarget;
  return value
    .replace(/\D/g, '')
    .replace(/(\d{2})(\d)/, '($1) $2')
    .replace(/(\d{5})(\d{4})/, '$1-$2');
};

// (00) 0000-0000
const maskLandlineTelephone = (
  event,
) => {
  event.currentTarget.maxLength = 14;
  const { value } = event.currentTarget;
  return value
    .replace(/\D/g, '')
    .replace(/(\d{2})(\d)/, '($1) $2')
    .replace(/(\d{4})(\d{4})/, '$1-$2');
};

// 00000-000
const maskCEP = (event) => {
  event.currentTarget.maxLength = 9;
  const { value } = event.currentTarget;
  return value.replace(/\D/g, '').replace(/^(\d{5})(\d{3})+?$/, '$1-$2');
};

// 00/00/0000
const maskDate = (event) => {
  event.currentTarget.maxLength = 10;
  const { value } = event.currentTarget;
  return value
    .replace(/\D/g, '')
    .replace(/(\d{2})(\d)/, '$1/$2')
    .replace(/(\d{2})(\d)/, '$1/$2')
    .replace(/(\d{4})(\d)/, '$1');
};

const maskOnlyLetters = (event) => {
  const { value } = event.currentTarget;
  return value.replace(/[0-9!@#¨$%^&*)(+=._-]+/g, '');
};

const maskOnlyNumbers = (event) => {
  const { value } = event.currentTarget;
  return value.replace(/\D/g, '');
}; 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2017-01-17T18:30:49.483

我喜欢这个功能，我一直在使用它。如果有人需要，我已经添加了另外 2 个面具。我知道他们不会直接回答这个问题，但它们非常有用。

```
//Social Security Number for USA
 function mssn(v) {
    var r = v.replace(/\D/g,"");
    r = r.replace(/^0/,"");
    if (r.length > 9) {
        r = r.replace(/^(\d\d\d)(\d{2})(\d{0,4}).*/,"$1-$2-$3");
        return r;
    }
    else if (r.length > 4) {
        r = r.replace(/^(\d\d\d)(\d{2})(\d{0,4}).*/,"$1-$2-$3");
    }
    else if (r.length > 2) {
        r = r.replace(/^(\d\d\d)(\d{0,3})/,"$1-$2");
    }
    else {
        r = r.replace(/^(\d*)/, "$1");
    }
    return r;
}

//USA date
function mdate(v) {
   var r = v.replace(/\D/g,"");
   if (r.length > 4) {
    r = r.replace(/^(\d\d)(\d{2})(\d{0,4}).*/,"$1/$2/$3");
   }
   else if (r.length > 2) {
    r = r.replace(/^(\d\d)(\d{0,2})/,"$1/$2");
   }
   else if (r.length > 0){
         if (r > 12) {
           r = "";
         }
   }
   return r;
} 
```

# ruby - ruby 中的命令行参数可以删除吗？

> ID：15802102
> 
> 赞同：2
> 
> 时间：2013-04-04T03:40:07.990
> 
> 标签：ruby, unix, argv

出于安全原因，我想在解析命令行参数后删除它们：

```
login.rb --user me --password wombats 
```

我试过 ARGV.clear 和 $*.clear

对 ARGV 或 $* 的更改都不会反映在 ps 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:45:43.747

`ps(1)`您可以通过更改`$PROGRAM_NAME`变量来更改Ruby 进程的名称（如 所示）。这是一个故意循环的示例程序，例如：

```
#!/usr/bin/env ruby

puts $PROGRAM_NAME
$PROGRAM_NAME = "a ruby process"

loop { } 
```

当它像这样运行时：

```
$ ./loop.rb password
./loop.rb 
```

它在以下位置显示“红宝石进程” `ps`：

```
$ ps aux | grep ruby
stuart         85292  98.9  0.1  2439468   4340 s004  R+    8:43PM   0:02.96 a ruby process  
stuart         85341   0.0  0.0  2432768    600 s011  S+    8:43PM   0:00.00 grep --color ruby 
```

因此，您可以使用该`$PROGRAM_NAME`变量来准确更改流程的显示方式`ps`。

# highcharts - Highcharts：是否可以在工具提示格式化程序中将系列与外部变量进行比较？

> ID：15802112
> 
> 赞同：0
> 
> 时间：2013-04-04T03:41:01.090
> 
> 标签：highcharts, tooltip

我想将一个系列与具有相同 x 轴但不同 y 值的外部变量进行比较。为了更容易解释问题，[此处](http://jsfiddle.net/hHjZb/3703/)提供了示例代码。

数据系列是

```
series: [{data: [5, 4, 5, 7, 8, 6, 3, 6, 7, 4, 8, 9]},
   {data: [4, 6, 7, 9, 5, 9, 12, 11, 9, 7, 6, 5]}] 
```

外部变量是

```
var extdata = [2,2,2,1,0,0,0,1,1,2,2,2]; 
```

它们共享相同的 x 轴（在此示例中为 Jan、Feb、...、Dec）。假设我想在该月的系列中的数据点加上外部变量中的相应条目至少为 10 时显示工具提示“最大值”，但否则保留总和的数值，以便三月的工具提示读取

```
March:
Series 1: 7
Series 2: 9 
```

在四月读到

```
April:
Series 1: 8
Series 2: Max 
```

是否可以仅使用工具提示格式化程序来执行此操作？如果不是，如何实现？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:21:52.510

有几种方法可以做到这一点，但我能想到的最简单的方法是像这样格式化你的 extdata：

```
var extdata = {'Jan':2,
           'Feb':2,
           'Mar':2,
           'Apr':1,
           'May':0,
           'Jun':0,
           'July':0,
           'Aug':1,
           'Sep':1,
           'Oct':2,
           'Nov':2,
           'Dec':2}; 
```

然后在您的工具提示函数中，您可以像这样引用它：

```
formatter: function () {
        var s = '<b>' + this.x + '</b>';
        var month = this.x;
            $.each(this.points, function (i, point) {
                var total = point.y + extdata[month];
                s += '<br/>' + point.series.name + ': ' + (total>=10?'max':point.y);
            });
        return s;
    }, 
```

[http://jsfiddle.net/3uhge/](http://jsfiddle.net/3uhge/)

通过对月份的 extdata 进行索引，您可以避免计算出您将鼠标悬停在哪个点上。如果需要，您可以通过遍历类别来查找月份名称来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:01:54.063

对于分类，SteveP 的回答非常好。但是，如果您不想格式化数据，请使用以下内容：

```
s+= '<br/>Ext data: ' + extdata[this.points[0].point.x]; 
```

其中`this.points[0].point.x`等于外部数据索引的索引。[jsFiddle](http://jsfiddle.net/hHjZb/3707/)

但是，如果您的 xAxis 未分类，您可以`this.x`像之前的答案[jsFiddle一样简单地获取索引](http://jsfiddle.net/hHjZb/3709/)

# iphone - 如何在 Cocos2d 中实现相机飞越

> ID：15802115
> 
> 赞同：0
> 
> 时间：2013-04-04T03:41:43.397
> 
> 标签：iphone, ios, objective-c, cocos2d-iphone

假设我的游戏中关卡的宽度是屏幕宽度的三倍，而我的玩家从最左边开始。我应该如何在这个关卡开始时从右边缘开始实现相机飞越以滚动整个世界，以便玩家知道未来会发生什么？

我在这里遇到了这篇文章[http://www.cocos2d-iphone.org/forum/topic/9568](http://www.cocos2d-iphone.org/forum/topic/9568)似乎很有用，借用了其中的代码块并将其放入我的`GameWorldLayer`，但它没有用。我基本上只看到黑屏。怎么了？什么是更好的实现方式？

```
-(void)visit {
    CGSize screenDims = [[CCDirector sharedDirector] winSizeInPixels];
    CGPoint camPos = gameCamera.position;
    float camZoom = gameCamera.zoom;
    [[CCDirector sharedDirector] setProjection:kCCDirectorProjectionCustom];

    //now set your projection
    kmGLMatrixMode(KM_GL_PROJECTION);
    //save current projection state
    kmGLPushMatrix();
    kmGLLoadIdentity();

    kmMat4 orthoMat;
    kmMat4OrthographicProjection(&orthoMat,
         camPos.x -screenDims.width/(2*camZoom),
         camPos.x +screenDims.width/(2*camZoom),
         camPos.y +screenDims.height/(2*camZoom),
         camPos.y -screenDims.height/(2*camZoom),
         -1000,
         1000);

    kmGLMatrixMode(KM_GL_MODELVIEW);
    kmGLLoadIdentity();

    [super visit];

    //put it back
    kmGLMatrixMode(KM_GL_PROJECTION);
    kmGLPopMatrix();
    kmGLMatrixMode(KM_GL_MODELVIEW);
    kmGLLoadIdentity();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:45:35.983

对于您想要的东西，所有这些都是复杂的。将图层放置在关卡的开头，然后简单地将其移动到开头，即

```
[layer runAction:[CCMoveTo actionWithDuration:10 position:ccp(starty, startx)]]; 
```

其中 20 是您希望它为“飞越”所花费的时间，并且位置是开始位置

# sql-server - 根据 SQL Server 中另一列中的值将金额转换为负数

> ID：15802116
> 
> 赞同：3
> 
> 时间：2013-04-04T03:41:43.953
> 
> 标签：sql-server

一个表有以下列 AcctNo, Dr_Cr, Amount 1111, C, 1000 1111, D, 500

Dr_Cr 列只有两个值 D,C

查找将输出以下 AcctNo, Dr_Cr, Amount, Amount1 1111, C, 1000, 1000 1111,D,500, -500 的查询

（即当 Dr_Cr = 'D' 时，金额应转换为负数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T03:49:42.970

试试这个：

```
SELECT AcctNo, 
       Dr_Cr,
       Amount, 
       CASE 
           WHEN Dr_Cr='D' THEN -1*Amount
           ELSE Amount 
       END AS Amount1 
FROM ACCOUNTS 
```

替换`ACCOUNTS`为您的表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:46:12.487

最简单的方法是`CASE`在选择“金额”列时使用声明。

就像是：

```
SELECT ...., 
CASE WHEN Dr_Cr = 'D' THEN Amount*(-1) ELSE Amount END as Amount 
FROM .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-31T08:26:04.157

您可以使用：

```
select
(CASE WHEN (amount) < 0 THEN 'Dr' ELSE 'Cr' END )Dr_Cr
from Your TableName 
```

# iphone - UILocalNotification 截止日期、周报和月报

> ID：15802117
> 
> 赞同：0
> 
> 时间：2013-04-04T03:41:55.160
> 
> 标签：iphone, ios, xcode, ios6, notifications

我正在尝试找出在后台使用本地通知的最佳方法，以运行一种方法来显示来自核心数据的通知消息，基于到期日或即将到来的每周和每月总结报告。

我已经制定了两个选项，即 NSTimer 和 UILocalNotification。

使用 NSTimer，我可以每 24 小时在后台运行 scheduleTimerWithTimeInterval 以检查核心数据，然后再显示本地通知，以查看它是否在到期日、每周或每月报告中。我不确定这是否是最佳解决方案或建议？

我读过其他帖子，他们建议改用 UILocalNotification 。但它们仅限于每个应用程序 64 条通知。如果我每周和每月使用总共 64 条通知，那没关系，但除非用户激活应用程序，否则它在 1 年后将不起作用，我还需要在当天消息上显示截止日期。

我想也许在显示本地通知之后，应用程序仍在后台设置新的下一个计划本地通知，但我无法解决这个问题，所以不确定这是否可能？

对此有何建议？先感谢您。

# java - 字符串对象创建

> ID：15802118
> 
> 赞同：-2
> 
> 时间：2013-04-04T03:42:00.720
> 
> 标签：java, string, object, immutability, stringbuffer

我是 Java 新手，有一个与创建字符串有关的问题。

情况1：

```
String a = "hello";
String b = "world";
a = a + b;
System.out.println(a); 
```

案例二：

```
String a;
String a = "hello";
a = new String("world");
System.out.println(a); 
```

我想知道在每种情况下创建了多少个对象。因为 String 是不可变的，所以一旦为它分配了值，对象就不能被重用（这是我目前所理解的，如果我错了，请纠正我）。

如果有人能用 StringBuffer 解释同样的话，我会更高兴。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:04:39.303

```
Case 1:

String a = "hello";  --  Creates  new String Object 'hello' and a reference to that obj
String b = "world";  --  Creates  new String Object 'world' and b reference to that obj
a        = a + b;     --  Creates  new String Object 'helloworld' and a reference to   that obj.Object "hello" is eligible for garbage collection at this point

So in total 3 String objects got created.

Case 2:

String a;  -- No string object is created. A String reference is created.
String a = "hello";  -- A String object "hello" is created and a reference to that
a        = new String("world");  -- A String object "world" is created and a reference to that. Object "hello" is eligible for garbage collection at this point

So in total 2 String objects got created 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:02:05.960

正如您正确提到的字符串是`immutable`，下面创建`3 string literal objects`

```
String a = "hello"; --first
String b = "world"; --second
a = a + b;          --third (the first is now no longer referenced and would be garbage collectioned by JVM) 
```

在第二种情况下，只`2 string objects`创建

```
String a;
String a = "hello";
a = new String("world"); 
```

如果您首先使用 StringBuffer 而不是 String，例如

```
StringBuffer a = new StringBuffer("hello"); --first
String b = "world";                         --second
a.append(b);                                --append to the a
a.append("something more");                 --re-append to the a (after creating a temporary string) 
```

以上只会`3 objects`在字符串内部连接到同一个对象时创建，同时使用`StringBuffer`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:03:39.027

在案例 1 中，创建了 3 个对象，“hello”、“world”和“helloworld”

在案例 2 中，在字符串池 "hello" 和 "world" 中创建了两个对象。即使字符串池中有“World”对象，也会创建新的世界对象。

# c - sscanf() 在测试整数时无法正常工作

> ID：15802128
> 
> 赞同：0
> 
> 时间：2013-04-04T03:43:09.980
> 
> 标签：c

嗨，我正在尝试使用 sscanf 来测试字符串是否为整数，但它总是给出零作为返回值（j），当它给出 1（有时没有任何更改）时，它没有在应收变量中填充正确的值（i ) ！这是我的代码：

```
#include <stdio.h>                               

int main ()                                      
{                                                

  char sentence []="123456";                     
  int i=0;                                       

   j = sscanf(sentence,"%[0-9]",&i);              
   return 0;                                      
} 
```

请让我知道我哪里出错了！我知道还有其他方法可以测试整数字符串，但我想知道我哪里出错了！帮助将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:57:28.477

如果您想仅`sscanf()`用于*验证数字*（我不建议您这样做），则您的格式已关闭。您必须仅使用 char 类型来收集提取的数据：

尝试这个：

```
char message[] = "123456";
char buffer[128];

if (sscanf(message, "%127[0-9]",buffer) == 1)
    printf("Success : %s\n", buffer); 
```

并使用范围（例如将其更改为 [2-9]）以帮助理解基于集合的提取是如何工作的。但同样，您只能将它们放入 char 类型的缓冲区中。

也就是说，如果您需要该值，或者如果您只想验证数字内容，则使用[`strtol()`](http://en.cppreference.com/w/c/string/byte/strtol)or （但仅在必须时）可能更合适。你决定。[`atoi()`](http://en.cppreference.com/w/c/string/byte/atoi)`isdigit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:48:38.313

也可以尝试`strtol()`你想要的。请参阅：[atol() v/s。strtol()](https://stackoverflow.com/questions/3792663/atol-v-s-strtol)

# c# - 在查询字符串中包含带有“&”的值

> ID：15802130
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:43:22.930
> 
> 标签：c#, asp.net, html, url

我必须在查询字符串中写入这些数据：

```
 http://localhost:1256/4.market.ph.local/WEP/Add.cshtml?data=me+&+you 
```

由于我使用了那个符号“&”，我得到了一个错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T03:50:07.600

在 c# 中你可以使用这个：-

```
HttpUtility.UrlEncode("http://localhost:1256/4.market.ph.local/WEP/Add.cshtml?data=me+&+you"); 
```

`HttpUtility`是其中的一部分，`System.Web`这将确保对不允许的查询字符串 char 进行 url 编码。

一旦你这样做，你会得到这样的东西`http%3a%2f%2flocalhost%3a1256%2f4.market.ph.local%2fWEP%2fAdd.cshtml%3fdata%3dme%2b%26%2byou`

在接收器上只需将其解码回来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T03:46:00.347

使用`urlencode($yourstring)`或者如果您对其进行硬编码，请使用`%26`来表示＆符号。

# javascript - Jquery Mobile 返回按钮滚动到顶部

> ID：15802134
> 
> 赞同：0
> 
> 时间：2013-04-04T03:43:42.883
> 
> 标签：javascript, jquery, jquery-mobile, iscroll, iscrollview

在我的 Jquery Mobile 网站中，我使用 href 作为后退按钮；

```
 <a id='{0}' class='{1}' href='/' data-role=""button"" data-icon=""arrow-l"" data-transition=""slide"" data-direction=""reverse""> 
```

但如果我在第一页滚动，后退按钮会再次跳回顶部。第一页不在同一位置。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:09:19.763

## 解决方案

我遇到了这个问题，我使用[iSroll修复了它](http://cubiq.org/iscroll-4)

从 PageA 到 PageB 时，将 PageA 的滚动位置保存在一个变量中。

为此，请修改 iscroll.js 并在 scrollTo 下添加 getScrollY 方法，如下所示

```
 scrollTo : function(x, y, time, relative) {
            var that = this, step = x, i, l;

            that.stop();

            if (!step.length)
                step = [{
                    x : x,
                    y : y,
                    time : time,
                    relative : relative
                }];

            for ( i = 0, l = step.length; i < l; i++) {
                if (step[i].relative) {
                    step[i].x = that.x - step[i].x;
                    step[i].y = that.y - step[i].y;
                }
                that.steps.push({
                    x : step[i].x,
                    y : step[i].y,
                    time : step[i].time || 0
                });
            }

            that._startAni();
        },
        getScrollY : function() {

            var that = this;

            return that.y;

        }, 
```

现在像这样在页面更改之前保存当前位置

```
curScrollPos = myScroll.getScrollY(); 
```

并在返回该 PageA 时设置滚动位置，我在 PageB 的 pagehide 事件中执行此操作

```
myScroll.scrollTo(0, curScrollPos, 1);
myScroll.refresh(); 
```

这样我解决了我的问题，希望这会有所帮助。

## 更多信息

如果您想了解有关此主题的更多信息，请查看**[本文](http://www.gajotres.net/prevent-scroll-to-the-top-before-page-transition-in-jquery-mobile/)**，您还将找到工作示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T07:08:28.067

为什么不直接在锚标签上添加 data-rel="back" 并设置 href="#" 呢？

```
<a id='{0}' class='{1}' href='#' data-rel="back" data-role="button" data-icon="arrow-l" data-transition="slide" data-direction="reverse"/> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T07:28:31.380

在我描述您需要了解的可用解决方案之前，这不是错误，也没有完美的解决方案。问题是，要动画到另一个页面的过渡，视口必须位于页面顶部，以便当前页面和过渡页面垂直对齐。

如果您在一个页面（例如 1000 像素）上的长列表中途而您要转移到的页面只有几百像素高，那么当前页面将正确地在屏幕上显示动画，但新页面将不会显示为它会在视口上方。

有2个可行的解决方案：

## iScroll 及其 jQuery Mobile 派生 iScrollview

iScroll 主页：[http ://cubiq.org/iscroll-4](http://cubiq.org/iscroll-4)

iScrollview 主页：[https ://github.com/watusi/jquery-mobile-iscrollview](https://github.com/watusi/jquery-mobile-iscrollview)

iScroll 是一种 javascript，它可以在 Web 浏览器的窗口中滚动内容，其行为与 iPhone 和 Android 等移动设备上的原生滚动非常相似。这意味着您可以使用类似本机的滚动条和物理在浏览器中滚动窗口。

这也是我们当前问题的解决方案。因为 iScroll 实现页面会占据 100% 的页面高度，不管 listview 滚动多远。这也是返回时 listview 仍将保持在同一位置的原因。

当然，如果你想实现这个解决方案，你应该选择 iScrollview 实现。您仍然可以实现 iScroll，但它会花费您更多的时间。

## 无声滚动

官方文档：http: [//jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0-rc.1/docs/api/methods.html)

这个 jQuery Mobile 功能也是我们最初遇到这个问题的原因。在触发页面转换之前，原始页面会静默滚动到顶部。

在我们的例子中，当 listview 被选中时，必须记住它的位置（这里你会找到页面转换期间存储数据/参数的解决方案，只需搜索章节：页面转换之间的数据/参数操作）在页面更改之前。在这种情况下，当我们返回上一页时，我们可以使用 pagebefpreshow 事件在页面显示之前静默滚动到底部。

```
//scroll to Y 100px
$.mobile.silentScroll(100); 
```

这是一个无声滚动的工作示例：http: [//jsfiddle.net/Gajotres/2xfrM/](http://jsfiddle.net/Gajotres/2xfrM/)

这是一个使用大型列表视图和几个页面的真实 jsFiddle 示例：http: [//jsfiddle.net/Gajotres/5zZzz/](http://jsfiddle.net/Gajotres/5zZzz/)

```
// Detect click on a li element and store its coordinate, change page to another
$(document).on('pagebeforeshow', '#index', function(){  
    $('#test-list li').on('click', function(){   
        storePosition.topCoordinate =  $(this).offset().top;
        $.mobile.changePage('#second');
    });    
});

// If there's a stored position use silentscroll function and scroll to correct location
$(document).on('pageshow', '#index', function(){      
    if(storePosition.topCoordinate !== null) {
        $.mobile.silentScroll(storePosition.topCoordinate);
    }
});

// Store position location
var storePosition = {
    topCoordinate : null
} 
```

不幸的是，就像在您的示例中一样，此解决方案仅适用于 pageshow。由于 jQM 架构，只能在 pageshow 事件期间执行此操作。

## 最后的笔记

如果您想了解有关 iScroll + iScrollView 的更多信息，以及它们如何与工作示例一起工作，请查看这篇**[文章](http://www.gajotres.net/using-iscroll-with-jquery-mobile/)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-18T16:14:30.953

我在这里找到了解决方案：[https ://forum.jquery.com/topic/jquery-mobile-scroll-to-top-of-page-on-page-load#14737000005271291](https://forum.jquery.com/topic/jquery-mobile-scroll-to-top-of-page-on-page-load#14737000005271291)

```
(function($){
      $( document ).on( "mobileinit", function() {
            var silentScroll = $.mobile.silentScroll;
              $.mobile.silentScroll = function( ypos ) {
            if ( $.type( ypos ) !== "number" ) {
               // FIX : prevent auto scroll to top after page load
               return;
            } else {
               silentScroll.apply(this, arguments);
            }
        }
      })
}(jQuery)); 
```

# php - 如何在这个 PHP 语句中添加 CSS？

> ID：15802136
> 
> 赞同：0
> 
> 时间：2013-04-04T03:43:57.663
> 
> 标签：php, css, twitter-bootstrap, joomla

如何添加这个 CSS：

```
<div class="alert alert-error">
</div> 
```

到这个 PHP 代码：

```
<?php echo this->element->error; ?> 
```

他们是“这个”堆栈旁边的“$”不会显示它

我需要它仅在其处于活动状态时才显示。我试过这样做：

```
<?php if ($element->error != '') :?>
<div class="alert alert-error"> 
<?php echo $element->error?>
</div>
<?php endif;?> 
```

但它不起作用

下面的错误图片：http: [//i.imgur.com/EFtdjE5.png](http://i.imgur.com/EFtdjE5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:46:18.657

尝试创建一个 if else 条件`isset`

```
 // if `$this->element->error` is TRUE or SET..
 <?php if(isset($this->element->error)){?>
    <div class="alert alert-error"> 
    <?php echo $this->$element->error;?>
    </div>
    <?php }?>
 // if not it will be just ignored 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:34:06.683

```
<?php if ($this->element->error != '') :?>
    <div class="alert alert-error"><?php echo $this->element->error;?></div>
<?php endif;?> 
```

这行得通。请注意我的代码与问题的区别。感谢@Kaii 的所有时间。

# java - 如何使用 Selenium WebDriver 复制表？

> ID：15802144
> 
> 赞同：4
> 
> 时间：2013-04-04T03:44:36.110
> 
> 标签：java, mysql, selenium

我正在使用 Selenium（在 Java 上）运行测试。

1.  我找到了某个网页
2.  我在该网页上找到了一个表格（6 x 4）
3.  我需要将该表复制到 mySQL 数据库。

我知道一种方法：制作一个 for 循环并一个一个地复制元素。有没有更快更简洁的方法？我可以按名称引用表格并以某种方式复制它（而不是循环遍历每个元素）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:58:33.673

不，您必须逐个循环和复制元素。如果元素与 MySQL 列具有相同的名称，则可以通过从 HTML 中读取它们来节省一些精力。

# r - 从 Linux 命令行运行具有依赖关系的 R 文件

> ID：15802148
> 
> 赞同：0
> 
> 时间：2013-04-04T03:45:01.703
> 
> 标签：r

假设我有一个文件

`file1.R`它有一个方法`getMe()`

现在，我想运行`file2.R`它并调用`getMe()`

我需要跑步吗

```
R CMD BATCH file1.R 
```

在我想跑步之前

`R CMD BATCH file2.R`?

或者 R 将如何确定 file2 具有在 file1.R 中定义的功能？

运行在其他文件中具有其他功能依赖项的文件的标准是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:01:21.450

您需要 source file1.R 以便在那里定义的函数可供其他人使用。

```
source('file1.R') 
```

您可以在 file2.R 中执行此操作。然后简单地运行

```
R CMD BATCH file2.R 
```

# c++ - C++循环问题

> ID：15802149
> 
> 赞同：1
> 
> 时间：2013-04-04T03:45:02.683
> 
> 标签：c++

我有一些正在读取文件的代码。我有一个大小为 3 的数组，所以我需要部分代码循环 3 次。我需要帮助使这个嵌套循环以我想要的方式工作。到目前为止，它适用于我需要它做的事情，而不是在中间。

目标是让“somevairable”计数达到 3

```
for(int w=0; w < weeks;w++)
{   
        for(int a =0; a < 5; a++)
       {
             /* this should loop 3 times 
        {
            total_weekly_sales[somevariable] +=  weekly_sales[0][w][a];
        {
            */
          }

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T03:47:51.567

```
int count = 0;
for(int w=0; w < weeks;w++)
{   
    for(int a =0; a < 5; a++)
   {
         /* this should loop 3 times */
    {
        total_weekly_sales[count % 3] +=  weekly_sales[0][w][a];
        ++count;
    }
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T03:48:50.400

尝试：

```
for(int w=0; w < weeks;w++)
{   

        for(int a=0; a < 5; a++)
       {
             for(int somevariable=0; somevariable < 3; somevariable++) 
             {
                total_weekly_sales[somevariable] +=  weekly_sales[0][w][a];
             }

       }

} 
```

# python - 自动区域分类

> ID：15802157
> 
> 赞同：0
> 
> 时间：2013-04-04T03:46:03.657
> 
> 标签：python, django, design-patterns

我正在从几家新闻机构抓取报道，我想创建一个过滤器来自动对报道进行分类。

现在，我的数据库中有一个包含世界所有国家/地区的表和一个包含其城市的相关表。

所以我现在很困惑如何解决这个问题。我能想到的唯一解决方案是把故事词拆分，然后将每个词与每个国家和城市进行比较，我认为这会消耗大量资源。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T21:24:39.217

我不确定在找到一个城市之前搜索故事是否会像世界新闻文章看起来那样非常低效。我刚看了[BBC世界新闻主页](http://www.bbc.co.uk/news/world/)，第一段提到了大部分城市。如果我声称对此有任何见解，我可能会让统计学家哭泣，但我有一种预感，这对于大多数世界新闻景点来说可能都是正确的。

不幸的是，我不精通 Python，但这里有一个 C# 程序可以实现这一点。

```
class Program
{
    //You could have 2 Hashsets, one for cities and one for countries and find both but you can always derive a country from a city so you won't need as much memory to reduce the load factor of the hash table. 
    //However this does mean if an article mentions only a country and not a city you can't categorize it.
    static HashSet<String> cities = new HashSet<String>();
    static Dictionary<String, String> cityToCountry = new Dictionary<String, String>();
    const int MAX_WORDS_TO_READ = 200;

    static void Main(string[] args)
    {
        addCities();
        String sentance = "Former South African President Nelson Mandela is discharged from hospital in Johannesburg after 10 days of treatment for pneumonia.";

        String city = findCity(sentance);
        String country = cityToCountry[city];

        Console.WriteLine(city + ", " + country);
        Console.ReadLine();

    }

    static String findCity(String sentance)
    {

        String word = "";
        int wordsSeen = 0;

        foreach (char c in sentance)
        {
            if (c != ' ')
            {
                word += c;
            }
            else
            {
                if (isCity(word))
                {
                    return word;
                }
                else
                {
                    word = "";
                }

                wordsSeen++;
            }

            //If you assume that if the city is not in the first n words then the article isn't about a specific city or one that you don't have in your database
            //then you can avoid having to check through massive articles that have no city
            if(wordsSeen > MAX_WORDS_TO_READ)
            {
                return null;
            }
        }

        return null;
    }

    static bool isCity(String city)
    {
        return cities.Contains(city);
    }

    static void addCities()
    {
        //Naturally you would parse in a list of cities from somewhere
        cities.Add("Berlin");
        cities.Add("London");
        cities.Add("Johannesburg");

        cityToCountry.Add("Berlin", "Germany");
        cityToCountry.Add("London", "England");
        cityToCountry.Add("Johannesburg", "South Africa");
    }

} 
```

另一方面，如果你看一下 BBC 新闻英格兰部分，那么你最终会得到[这样的故事](http://www.bbc.co.uk/news/uk-england-devon-22054634)，它甚至没有在文章本身中提到这个国家，如果你的城市列表包含奥克汉普顿，我会非常惊讶。要解决此问题，您可以使用故事所在的新闻站点部分给出的上下文，但最重要的是，此方法的效率取决于您正在抓取的新闻故事的类型。

# c# - 最大匹配数。在两个列表中

> ID：15802158
> 
> 赞同：0
> 
> 时间：2013-04-04T03:46:04.957
> 
> 标签：c#, sql-server, list, linq-to-sql

有这样的问题。有一个列表是从数据库中获取的，还有一个是在程序期间形成的。表格如下：

```
id name
One my foo1 foo2 foo3
2 my fow1 foo2 foo3
... 
```

等等。程序运行期间生成的列表从文件中获取数据。并且是：

```
id name parent
... 
```

问题是数据库中表的列父 ID 号列在哪里。此刻，做出了决定：

```
int countMatch = 0;
foreach (var productse in prod)
{
    var splitted = productse.name.Replace("  ", " ").Split(' ');
    int maxmatch = splitted.Count(s => addProd.name.Contains(s));

    if (maxmatch > countMatch) countMatch = maxmatch;
}

var fixedCount = addProd.name.Split(' ').Count()/1.5;// 1.5 Choose the most best rate
if (countMatch <= fixedCount && prod.All(x => !x.name.ToUpper().Contains(addProd.name.ToUpper())))
  prod.Add(addProd); 
```

将该“产品”列表加载到数据库中之后

这个解决方案有效，但不是很好。由于某些名称最适合较小，因此未创建某些记录。

我尝试加载的示例数据：

```
Intel Core i3-2120 3.3GHz 3Mb 2xDDR3-1333 HDGraphics2000 TDP-65w LGA1155 OEM - name created 
```

以下数据是通过 id parent (Entry above) 获得的：

```
Intel Core i3-2120 3.3GHz 3Mb 2xDDR3-1333 HDGraphics2000 TDP-65w LGA1155 OEM
Intel Core i3-2120 3.3GHz 3Mb 2xDDR3-1333 HDGraphics2000 TDP-65w LGA1155 BOX w/cooler
Intel Core i3-2130 3.4GHz 3Mb 2xDDR3-1333 HDGraphics2000 TDP-65w LGA1155 OEM
Intel Core i3-3210 3.2GHz 3Mb 2xDDR3-1333 HDGraphics2500 TDP-55w LGA1155 OEM
Intel Core i3-3225 3.3GHz 3Mb 2xDDR3-1333 HDGraphics4000 TDP-55w LGA1155 OEM
Intel Core i3-3225 3.3GHz 3Mb 2xDDR3-1333 HDGraphics4000 TDP-55w LGA1155 BOX w/cooler
Intel Core i3-3240 3.4GHz 3Mb 2xDDR3-1333 HDGraphics2500 TDP-55w LGA1155 OEM
Intel Core i3-3240 3.4GHz 3Mb 2xDDR3-1333 HDGraphics2500 TDP-55w LGA1155 BOX w/cooler
Intel Core i5-2500K 3.3GHz (TB up to 3.7GHz) 6Mb 2xDDR3-1333 HDGraphics3000 TDP-95w LGA1155 OEM
Intel Core i5-3550 3.3GHz (TB up to 3.7GHz) 6Mb 2xDDR3-1333 HDGraphics2500 TDP-77w LGA1155 OEM
Intel Core i5-3550 3.3GHz (TB up to 3.7GHz) 6Mb 2xDDR3-1333 HDGraphics2500 TDP-77w LGA1155 BOX w/cooler 
```

需要将数据放在一个表中，并且如果数据类似于您获得的父级的最大匹配数。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:57:50.457

你能把你应该做什么写得更清楚吗？据我了解，您希望通过识别最常见的符号将文本文件中的行链接到数据库中的行，其中文本的开头是相同的。如果错了，请纠正我。

首先尝试使用**正则表达式**，这是文本处理中的王者。您可以逐个迭代并删除行文本中带有空格的最后一个单词。

```
foreach (var fProduct in fileProducts)
{
    // remove blank spaces >= 2
    var fProductCleared = Regex.Replace(fProduct, @"\s{2,}", "");

    // search best match in data base
    bool isMatched = FunctionToMatchInDB(fProductClear); // search the whole text
    if(!isMatched)
    {
        // remove word by word from the end
        while(fProductClear.Contains(' '))
        {
             // remove last word with space from the end of line
             fProductClear = Regex.Replace(fProductClear,@"\s*[^\s]+\s*$", "");
             bool isMatched = FunctionToMatchInDB(fProductClear); 
             if(!isMatched)
                 break; // TODO: 
        }
    }

} 
```

# php - 不能在子查询中使用别名

> ID：15802162
> 
> 赞同：2
> 
> 时间：2013-04-04T03:46:23.943
> 
> 标签：php, mysql, subquery, alias

您好，我正在使用两个表进行一个查询。我在 home_tbl 中有自治市和 barangay 和 home_connector_id 字段，但在第二个表中 tbl_household_member 只有一个 home_connector_id 字段。用于子查询的第一个选择的别名不起作用。请帮忙。

这是查询：

```
SELECT household_connector_id as h_id,
       barangay as b,
       municipality as m,

(SELECT COUNT(*) FROM household_tbl WHERE municipality = m
AND SUBSTR(expiry_date,1,2) LIKE "04" AND SUBSTR(expiry_date,7,4) LIKE "2013" AND NOT(expiry_date = "") AND NOT(expiry_date = "n/a"))   
+

(SELECT COUNT(*) FROM tbl_household_members WHERE household_connector_id = h_id
AND SUBSTR(expiry_date,1,2) LIKE "04" AND SUBSTR(expiry_date,7,4) LIKE "2013" AND NOT(expiry_date = "") AND NOT(expiry_date = "n/a")) as total

FROM (SELECT DISTINCT * FROM household_tbl) AS TI GROUP BY b 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:50:16.343

您不能引用分配给另一列的别名，因此您需要引用列名：

```
SELECT household_connector_id as h_id,
  barangay as b,
  municipality as m,
  (SELECT COUNT(*) 
   FROM household_tbl t
   WHERE t.municipality = TI.municipality  -- changed to column name
    AND SUBSTR(t.expiry_date,1,2) LIKE "04" 
     AND SUBSTR(t.expiry_date,7,4) LIKE "2013" 
     AND NOT(t.expiry_date = "") 
     AND NOT(t.expiry_date = "n/a")) +
  (SELECT COUNT(*) 
   FROM tbl_household_members h
   WHERE h.household_connector_id = TI.household_connector_id   -- changed to column name
    AND SUBSTR(h.expiry_date,1,2) LIKE "04" 
     AND SUBSTR(h.expiry_date,7,4) LIKE "2013" 
     AND NOT(h.expiry_date = "") 
     AND NOT(h.expiry_date = "n/a")) as total
FROM 
(
  SELECT DISTINCT * 
  FROM household_tbl
) AS TI 
GROUP BY barangay 
```

# c - C 自定义数据类型

> ID：15802164
> 
> 赞同：1
> 
> 时间：2013-04-04T03:46:41.597
> 
> 标签：c

我相信这个问题已经被问过很多次了，但我不认为有一个具体的答案。如果有，我找不到它，如果可能，请指导我。

无论如何，C 是否支持将字节/字/双字抽象为特定表示的任何方式？

浮点和双精度浮点看似是核心特性，但它们实际上并不是新的数据类型，而是对现有 dword/qword 的重新表示。

所以，我想知道，是否有可能做这样的事情：让 mydatatype 是一个 unsignedbyte ，它在编译时自动否定自己。

例如。

```
mydatatype a = 0xff; 
```

将以二进制形式表示为 0x00；

我问是因为 C++ 试图通过重载 = 和类来解决这个问题，但它做了比我想要的更多的抽象，因为说，我可以这样做：

```
memcpy(&my_int, &my_float, 4); 
```

然后我将被允许按位操作来玩int，然后把它放回去

```
memcpy(&my_float, &my_int, 4); 
```

然而，我不相信如果说 float 被定义为一个类，我可以进行这种低级操作，而是完全抽象出除类方法之外的所有处理方法。

我很好奇，因为如果这不是 C 语言的一个特性，为什么不呢，它似乎完全符合包含浮点数和双精度数的基本原理，但是我们不能创建复数，即使它们添加起来很简单c 语言作为浮点数和双精度数。

这一直困扰着我很长一段时间，主要是因为一旦我想创建一个数据类型，我就开始迁移到 void 指针、结构和异构数据类型的领域，这似乎是不必要的。

例如： void *my_data_type = my_data_type_new(0xff); 这会将 0xff “否定”为 0，并将其存储在 my_data_type 指向的内存中。

这似乎没有必要，因为我想要的只是 negchar my_data_type = 0xff;

编译器可以设法识别。

然后我可以

```
memcpy(&my_char, &negchar, 1); 
```

my_char 为 0。

以上不适用于 C++ 类...

floats, doubles 是抽象的，因为它们以自己的方式运行，同时保持 ABI，但它们与复数并没有太大不同，因为复数也可以使用特定的 ABI 表示。

我的意思是，我认为我什至不能在不诉诸于创建 typedef 的情况下声明 long long long （可以吗？）...

为了使这成为一个真正的问题，我将缩小答案范围：C 中是否提供此功能？如果是这样，我该怎么做？如果没有，是否曾经考虑过这样的功能，如果没有，这仅仅是因为浮点数、双精度数是特殊的，因为历史上对实数表示的需求使得这个抽象特征成为核心特征？

我的意思是，我知道像 Fortran 这样的语言默认支持实数，但我认为 C 能够将此功能从“核心功能”中移除，并允许程序员创建抽象 ABI 类型而无需求助于指向需要释放的内存块的指针，并在处理时允许更强大的类型检查。

特别是，据我所知，唯一具有完全抽象的抽象静态数据结构是浮点数和双精度数是非常奇怪的。而所有其他实践都使用动态内存，或者允许滥用符号（使用 char，但只能用函数修改它）。

结论：C++11 似乎支持这一点，向 C 中添加新数据类型会非常混乱，由于编程中对真实表示的自然需求，需要浮点数和双精度数，虽然该功能可以通过抽象数据类型实现，但它当时使它们成为语言核心的一部分是有意义的。

谢谢！〜德米特里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T03:56:05.890

C 核心语言没有提供任何方式来重新解释文字，而不是标准提供的方式。

另一方面，C++11 引入了用户定义的文字，通过它您可以有意义地编写

```
negbyte operator "" _nb(unsigned long long);

negbyte val = 0xff_nb; 
```

# jquery - Tolito 进度条完成后如何执行 jQuery 函数？

> ID：15802173
> 
> 赞同：0
> 
> 时间：2013-04-04T03:48:27.343
> 
> 标签：jquery, progress-bar

我正在使用 Tolito Progress Bar 1.0.2 [https://github.com/tolis-e/jQuery-Mobile-Progress-Bar-with-Percentage](https://github.com/tolis-e/jQuery-Mobile-Progress-Bar-with-Percentage)在我的 jQuery Mobile 应用程序中显示带有百分比计数器的进度条。

我想在 Tolito 进度条完成时显示一个按钮，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:12:38.013

一旦进度条完成，就会触发一个事件。因此，您可以附加一个事件处理程序。

下面是一个示例，它显示了如何做到这一点。

```
<!DOCTYPE html>
<html>

    <head>
        <title>Tolito Progress Bar for jQuery Mobile</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
        <link rel="stylesheet" type="text/css" href="../src/css/tolito-1.0.3.css" />
        <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
        <script type="text/javascript" src="../src/js/tolito-1.0.3.js"></script>
        <script>

            $(document)
                .on('pageinit', "#home-page", function () {

                var tolito = TolitoProgressBar('progressbar')
                    .setOuterTheme('b')
                    .setInnerTheme('e')
                    .isMini(true)
                    .setMax(100)
                    .setStartFrom(0)
                    .setInterval(10)
                    .showCounter(true)
                    .logOptions()
                    .build()
                    .run();
            });

            $(document)
                .on('complete', '#progressbar', function () {
                $('#msg').parent().find('.ui-btn-inner .ui-btn-text').text('Completed');
            });
        </script>
    </head>

    <body>
        <!-- /page -->
        <div data-role="page" id="home-page">
            <!-- /header -->
            <div data-role="header" data-theme="c">
                 <h1>Tolito Progress Bar for jQuery Mobile</h1>

            </div>
            <!-- /content -->
            <div data-role="content">
                <div id="progressbar"></div>
                <input type="button" id="msg" value="In Progress"/>
            </div>
        </div>
    </body>

</html> 
```

我希望这会有所帮助。

# jqplot - 隐藏第一个 yaxis 标签

> ID：15802174
> 
> 赞同：2
> 
> 时间：2013-04-04T03:48:34.337
> 
> 标签：jqplot

我需要在yaxis中隐藏标签-200，有没有办法隐藏第一个yaxis标签？所以 yaxis 标签结果将是 [empty] ,0, 200, 400, 600, 800

![在此处输入图像描述](https://i.stack.imgur.com/NAM43.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T07:28:17.950

我所做的是返回一个空字符串作为负值。

```
tickOptions: {
                formatter: function (format, value) {
                    if (value < 0) {
                        return ' ';
                    }
                    else {
                        return value
                    }
                }
            } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T07:28:37.810

假设您的图表包含在以“chart1”为 id 的 div 中，您可以使用以下命令隐藏第一个 yaxis 标签：

```
$("div#chart1 div.jqplot-yaxis div.jqplot-yaxis-tick:nth-child(1)").css('display','none'); 
```

Where`div#chart1`代表您的图表，`div.jqplot-yaxis`您的 yaxis 刻度容器和`jqplot-yaxis-tick:nth-child(x)`此容器中的第 x 个刻度（它从 1 到刻度数 - 其中 1 代表图表底部的刻度）

# python - 如何捕获 Key_tab 事件

> ID：15802176
> 
> 赞同：2
> 
> 时间：2013-04-04T03:48:41.073
> 
> 标签：python, pyqt4, keypress

我正在尝试捕获 key_tab 事件，但没有运气。我意识到它只有在没有其他小部件的情况下才有效，因此光标无处可去，只有这样我才能让事件返回。这是一个简化的代码示例。

```
class MyCombo(QComboBox):

    def __init__(self, parent=None):
        super(MyCombo, self).__init__(parent)
        self.setEditable(True)

    def keyPressEvent(self, event):
        if (event.type() == QEvent.KeyPress) and (event.key() == Qt.Key_Tab):
            print "tab pressed"
        elif event.key() == Qt.Key_Return:
            print "return pressed"
        else:
            QComboBox.keyPressEvent(self, event)

class Form_1(QDialog):

    def __init__(self, parent=None):
        super(Form_1, self).__init__(parent)
        self.combo = MyCombo()
        self.line = QLineEdit()
        layout = QVBoxLayout()
        layout.addWidget(self.combo)
        layout.addWidget(self.line)
        self.setLayout(layout)

app = QApplication(sys.argv)
form = Form_1()
form.show()
app.exec_() 
```

如果我注释掉以下两行

```
self.line = QLineEdit()
layout.addWidget(self.line) 
```

然后它工作正常，因为表单上只剩下一个小部件。

我哪里错了？

干杯，乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T04:31:34.833

显然 Key_Tab 按下事件永远不会传递给任何处理程序，而是传递给 setFocus()，因此为了拦截 Key_Tab 事件，我们需要自己实现 event() 方法。所以这是新代码：

```
class MyCombo(QComboBox):

    def __init__(self, parent=None):
        super(MyCombo, self).__init__(parent)
        self.setEditable(True)

    def keyPressEvent(self, event):
        if event.key() == Qt.Key_Return:
            print "return pressed"
        else:
            QComboBox.keyPressEvent(self, event)

    def event(self, event):
        if event.type() == QEvent.KeyPress and event.key() == Qt.Key_Tab:
            print "tab pressed"
            return False
        return QWidget.event(self, event)

class Form_1(QDialog):

    def __init__(self, parent=None):
        super(Form_1, self).__init__(parent)
        self.combo = MyCombo()
        self.line = QLineEdit()
        layout = QVBoxLayout()
        layout.addWidget(self.combo)
        layout.addWidget(self.line)
        self.setLayout(layout) 
```

# linux - 可以通过 SSH 连接的所有用户的列表

> ID：15802179
> 
> 赞同：46
> 
> 时间：2013-04-04T03:48:57.810
> 
> 标签：linux, ubuntu, ssh, passwd

我最近开始查看我的 auth-logs 并且令人惊讶地发现来自中国的机器人试图在这方面暴力破解他们的方式（没有努力）。我竭尽全力改变机器人永远不会检查的许多事情，并且更难暴力破解。

我的问题是：

我正在尝试查找可以通过 SSH 登录到我的服务器的所有用户的列表。我知道 /etc/passwd 有一个所有用户的列表，但我不知道他们中的任何一个（除了 1）是否可以登录。

我的目标是只有 1 个可以登录的用户，并让该用户拥有真正的强密码。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-04T09:16:14.020

[阅读`man sshd_config`](http://unixhelp.ed.ac.uk/CGI/man-cgi?sshd_config+5)更多详细信息，但您可以使用`AllowUsers`in 指令`/etc/ssh/sshd_config`来限制可以登录的用户集。

例如

```
AllowUsers boris 
```

意味着只有`boris`用户可以通过 ssh 登录。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-04T04:55:48.407

任何具有有效外壳的用户`/etc/passwd`都可以登录。如果您想提高安全性，请使用公钥身份验证设置 SSH（网上有很多关于这样做的信息），在一个用户的`~/.ssh/authorized_keys`文件中安装公钥，并禁用基于密码的身份验证。这将阻止除一个用户之外的任何人登录，并要求用户拥有匹配的私钥。确保私钥具有合适的密码。

为防止机器人试图进入，请在 22 以外的端口（即 3456）上运行 SSH。这不会提高安全性，但可以防止脚本小子和机器人因尝试失败而弄乱您的日志。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-04T03:54:07.077

任何登录 shell 设置`/etc/passwd`为交互式 shell 的用户都可以登录。我认为没有一种完全可靠的方法来判断程序是否是交互式 shell。检查它是否在里面`/etc/shells`可能和你能得到的一样好。

其他用户也可以登录，但他们运行的程序不应允许他们获得对系统的太多访问权限。根本不允许登录的用户应该拥有`/etc/false`他们的外壳——这只会立即将他们注销。

# session - ServiceStack：在自托管应用程序中访问 HttpRequest

> ID：15802182
> 
> 赞同：7
> 
> 时间：2013-04-04T03:49:29.320
> 
> 标签：session, authentication, servicestack

我目前有一个 IIS 托管应用程序，我想切换到使用自托管方法。

但是我在访问会话时遇到了困难，因此我可以检索当前用户的用户名。

这是我在 IIS 下托管时使用的代码，效果很好：

```
/// <summary>
/// A basic wrapper for the service stack session, to allow access to it lower down in the DAL layer without tying us to servicestack.
/// </summary>
public class ServiceStackAuthTokenService : IAuthTokenService
{
    /// <summary>
    /// GetCurrentAuthToken.
    /// </summary>
    /// <returns>A string representing the users auth name.</returns>
    public string GetCurrentAuthToken()
    {
        // Grab the current request.
        var req = HttpContext.Current.Request.ToRequest();
        var res = HttpContext.Current.Response.ToResponse();

        // Fetch the authentication service.
        var authService = EndpointHost.AppHost.TryResolve<AuthService>();
        authService.RequestContext = new HttpRequestContext(req, res, null);

        // Grab the session.
        var session = authService.GetSession(false);

        // Return the username.
        return session.UserName;
    }

    public string UserPropertyName
    {
        get { return "UserName"; }
    }
} 
```

使用以下代码将其添加到应用程序主机：

```
container.RegisterAutoWiredAs<ServiceStackAuthTokenService, IAuthTokenService>() 
```

运行自托管时，HttpContext.Current 为空，如何在自托管应用程序下访问请求？

谢谢！

**更新** 我尝试过的其他事情：

根据这里的帖子：[https ://groups.google.com/forum/#!msg/servicestack/jnX8UwRWN8A/_XWzTGbnuHgJ](https://groups.google.com/forum/#!msg/servicestack/jnX8UwRWN8A/_XWzTGbnuHgJ)

建议使用：

container.Register>(c => AuthService.CurrentSessionFactory);

这只是返回一个新的 IAuthSession。

该帖子中的用户正在做的正是我想要实现的目标。

在上一篇文章中神话说：

需要明确的是，为了形成引用用户会话的会话密钥，您需要 ss-id 或 ss-pid cookie（由 ss-opts 确定）。您可以从 IHttpRequest 对象或 ASP.NET 中的 HttpContext.Current.Request 单例中获取 cookie，因此无论您注入的任何 IAuthUserSession 工厂都需要获取可以为其提供 cookie 的东西，即 IRequestContext、IHttpRequest、IService 等。

但我仍然看不到访问 IHttpRequest 的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-29T06:45:57.797

对于 ServiceStack 3，您可以通过`HostContext.Instance.Items`Dictionary 共享请求数据。对于 ServiceStack 4，您应该使用`HostContext.RequestContext.Items`Dictionary。

例如，在您的应用主机配置中添加请求过滤器以保存值：

```
// Put the session into the hostcontext.
RequestFilters.Add((req, res, requestDto) =>
{
  HostContext.Instance.Items.Add("Session", req.GetSession());
}); 
```

然后在您的身份验证令牌类中将其拉出：

```
public string GetCurrentAuthToken()
{
  var session = HostContext.Instance.Items["Session"] as AuthUserSession;

   if (session != null)
   {
     return session.UserName;
   }

   throw new Exception("No attached session found.");
} 
```

# android - 如何在 android 的 setContentView 中将自定义布局设置为主视图

> ID：15802188
> 
> 赞同：-2
> 
> 时间：2013-04-04T03:50:20.213
> 
> 标签：android, layout, view

我有一个名为 sample.xml 的自定义布局，如下所示，

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TableLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:text="@string/Constituency" />

    <View
        android:layout_width="wrap_content"
        android:layout_height="2dip"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="33dp"
        android:layout_marginTop="10dp"
        android:background="#000000" />

    <TableRow
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="0dp"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="0dp" >

        <View
            android:layout_width="3dp"
            android:layout_height="40dp"
            android:background="#000000" />

        <TextView
            android:id="@+id/TextView04"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="10dp"
            android:layout_marginTop="0dp"
            android:text="@string/Nampally" />         
    </TableRow>
  </TableLayout>
</LinearLayout> 
```

在 MainActivity 中，setContentView 设置为

```
setContentView(R.Layout.activity_main) 
```

这是默认的 xml 文件。现在我想在我的应用程序启动时将内容视图设置为 sample.xml。

我给了

```
setContentView(R.Layout.sample); 
```

当我运行我的应用程序时，它说不幸的是应用程序失败了！错误。

当我调试时，它显示一些空指针异常

这是我的日志猫，

```
04-04 03:55:40.691: D/AndroidRuntime(2174): Shutting down VM
04-04 03:55:40.691: W/dalvikvm(2174): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-04 03:55:40.711: E/AndroidRuntime(2174): FATAL EXCEPTION: main
04-04 03:55:40.711: E/AndroidRuntime(2174): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.liveapp/com.example.liveapp.MainActivity}: java.lang.NullPointerException
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.os.Looper.loop(Looper.java:137)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at dalvik.system.NativeStart.main(Native Method)
04-04 03:55:40.711: E/AndroidRuntime(2174): Caused by: java.lang.NullPointerException
04-04 03:55:40.711: E/AndroidRuntime(2174):     at com.example.liveapp.MainActivity.onCreate(MainActivity.java:49)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.Activity.performCreate(Activity.java:5104)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
04-04 03:55:40.711: E/AndroidRuntime(2174):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
04-04 03:55:40.711: E/AndroidRuntime(2174):     ... 11 more 
```

这是我的 MainActivity.java，

```
 public class MainActivity extends Activity {
   public final android.content.Context Context = MainActivity.this;
     protected void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
      final LinearLayout samplelayout=(LinearLayout)findViewById(R.layout.sample);
     setContentView(R.layout.samplelayout);
  }
 } 
```

我的代码有什么问题？

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:58:17.413

如果您在从一个布局文件切换到另一个布局文件时收到 NullPointerException，则很可能您正在使用新布局中不存在的 findViewById 访问对 View 对象的引用。findViewById 返回一个空对象，所以当您调用一个方法或访问该对象的公共属性时，您将获得 NPE。

此外，sampleLayout 变量是多余的。

```
 final LinearLayout samplelayout=(LinearLayout)findViewById(R.layout.sample);
 setContentView(R.layout.samplelayout); 
```

应该只是

```
 setContentView(R.layout.sample); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:10:59.280

我不知道这是否是 NPE 的原因，但它肯定是错误的。在你的行

> final LinearLayout samplelayout=(LinearLayout)findViewById(R.layout.sample);

您正在尝试获取对 LinearLayout 作为视图的引用，但您将文件的 id 传递给它。findViewById() 适用于视图 ID，而不是布局 ID。删除此行。

你只需要拥有。

> setContentView(R.layout.samplelayout);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T10:11:08.323

您正在尝试在`LinearLayout`创建之前获取对它的引用。您必须先设置内容视图，然后尝试按 id 查找视图。另一个问题是 id 错误。试试这个：

```
 setContentView(R.layout.samplelayout);
final LinearLayout samplelayout=(LinearLayout)findViewById(R.layout.your_layout_id); 
```

# arduino - 数字输出的亮度因电平输入类型而异

> ID：15802190
> 
> 赞同：2
> 
> 时间：2013-04-04T03:50:42.733
> 
> 标签：arduino

基本上，我正在关注LED 条形图的*[BarGraph中的教程代码。](http://arduino.cc/en/Tutorial/BarGraph)*我没有电位器，所以我想通过使用[Processing](http://en.wikipedia.org/wiki/Processing_%28programming_language%29)串行写入来模仿它，基于*[Dimmer](http://arduino.cc/en/Tutorial/Dimmer)*中的调光器示例。我已将`sensorReading`值设置为处理应用程序的输入（将其网格更新为 1023 个元素），如下所示：

```
 int sensorReading;
  if (Serial.available()) {
      // Read the most recent byte (which will be from 0 to 1023):
      sensorReading = Serial.read();
  } 
```

这会根据我在处理应用程序网格中的鼠标位置点亮 LED。然而，LED 非常暗淡。如果我将`sensorReading`值设置方式更改为：

```
 int sensorReading = random(0, 1023); 
```

然后 LED 灯亮得多。由于 LED 都在数字输出引脚上，我认为它只会根据`sensorReading`值发送/关闭，而与亮度无关。我错过了什么？

这是处理代码：

```
 // Dimmer - sends bytes over a serial port
 // by David A. Mellis
 //
 // This example code is in the public domain.

 import processing.serial.*;
 Serial port;

 void setup() {
     size(256, 150);

     println("Available serial ports:");
     println(Serial.list());

     // Uses the first port in this list (number 0). Change this to
     // select the port corresponding to your Arduino board. The last
     // parameter (for example, 9600) is the speed of the communication. It
     // has to correspond to the value passed to Serial.begin() in your
     // Arduino sketch.
     //port = new Serial(this, Serial.list()[0], 9600);

     // If you know the name of the port used by the Arduino board, you
     // can specify it directly like this.
     port = new Serial(this, "COM6", 9600);
 }

 void draw() {
     // Draw a gradient from black to white
     for (int i = 0; i < 1024; i++) {
         stroke(i);
         line(i, 0, i, 150);
     }

     // Write the current X-position of the mouse to the serial port as
     // a single byte.
     port.write(mouseX);
 } 
```

这是Arduino代码：

```
// These constants won't change:
const int analogPin = A0;   // The pin that the potentiometer is attached to.
const int ledCount = 10;    // The number of LEDs in the bar graph.

int ledPins[] = {
  2, 3, 4, 5, 6, 7,8,9,10,11 };   // An array of pin numbers to which LEDs are attached.

void setup() {
    Serial.begin(9600);
    // Loop over the pin array and set them all to output:
    for (int thisLed = 0; thisLed < ledCount; thisLed++) {
      pinMode(ledPins[thisLed], OUTPUT);
    }
}

void loop() {
    // Read the potentiometer:
    //   int sensorReading = random(0, 1023);
    //   delay(250);
    byte streamReading;
    if (Serial.available()) {
        // Read the most recent byte (which will be from 0 to 255):
        sensorReading = Serial.read();
    }
    //Serial.println(sensorReading);

    // Map the result to a range from 0 to the number of LEDs:
    int ledLevel = map(sensorReading, 0, 255, 0, ledCount);

    // Loop over the LED array:
    for (int thisLed = 0; thisLed < ledCount; thisLed++) {
        // If the array element's index is less than ledLevel,
        // turn the pin for this element on:
        if (thisLed < ledLevel) {
            digitalWrite(ledPins[thisLed], HIGH);
        }
        // Turn off all pins higher than the ledLevel:
        else {
            digitalWrite(ledPins[thisLed], LOW);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T17:05:46.590

**问题：**您的处理代码[不断发送数据，](http://processing.org/reference/draw_.html)*一直*向您的 Arduino 发送串行数据：

> 在 setup() 之后直接调用，draw() 函数连续执行包含在其块中的代码行，直到程序停止或调用 noLoop()。draw() 是自动调用的，永远不应显式调用。

这会导致您的 Arduino 草图频繁更新 LED 开/关状态，并且考虑到您读取数据的方式，这将导致 LED 非常快速地跳动。

**解决方案：**最简单的解决方法是向 Arduino 或 Processing 草图添加延迟。更好的解决方案是将处理代码修改为仅在值更改时发送数据；尽管请注意，由于鼠标值几乎不断变化，并且这些变化对于 Arduino 代码并不重要，但您仍然可能有很多不必要的闪烁。但是，如果您在 Arduino 代码中修复串行读取功能，则闪烁不会成为问题。）

**代码：**修改您的处理代码以跟踪上次读数，并且仅在不同时更新：

```
int lastMouseX; 

void draw() {
 // draw a gradient from black to white ...

 int newMouseX = mouseX;
 if (newMouseX != lastMouseX) {
    lastMouseX = newMouseX
    // write the current X-position of the mouse to the serial port as
    // a single byte
    port.write(mouseX);
 } 
```

* * *

**其他问题：**首先，如果您期望值 0-1024，则存在一个问题：Arduino 的[AnalogWrite()](http://arduino.cc/en/Reference/analogWrite)函数需要一个字节 0-255。

其次，正如[Martin Thompson](https://stackoverflow.com/users/106092/martin-thompson)指出的那样，您可能正在发送一个字符串，例如`128`来自您的处理应用程序，然后使用它的 ASCII 值来设置强度。由于`0`through`9`的 ASCII 值在 48-57 范围内，这将为您提供相对较低的强度。请注意，当（例如）中包含超过一个字节的字符串时，`128`您仅使用一个字节来表示强度。所以你有两个选择：

*   发送一个真正的二进制字节，而不是字符串。这就是您展示的调光器示例中所做的
*   发送一个字符串，然后将其转换为其二进制表示。为此，您需要读取所有字符直到某个分隔符（例如 CR 或空格），收集它们，然后转换。

这段代码可能看起来像这样：

```
#include <stdlib.h>

int idxChar = 0;
#define BUFFER_SIZE 10
char strIntensity[BUFFER_SIZE];

...

while (Serial.available()) {
    // read the string representation of a byte
    // assuming bytes are separated by non-numeric characters
    // and never overflow
    char ch = Serial.read();
    if ( (ch >= '0') && (ch <= '9') ) {
        strIntensity[idxChar++] = ch;
    } else {
        strIntensity[idxChar] = 0;
        sensorReading = atoi(strIntensity);
        idxChar = 0;
    }
    if (idxChar>=BUFFER_SIZE-1) {
        // (need space for the null char at the end too
        // Buffer overflow.  Bail 
        idxChar = 0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T11:55:45.860

> // 读取最近的字节（从 0 到 1023）

字节从 0 到 255。它们（通常）代表 ASCII 字符集中的字符。

如果您希望读取 0 到 1023 之间的数字，则它们可能一次被传输一个字符（即，一个字符`1`后跟一个字符`0`将表示数字 10） - 在这种情况下，您必须解析它们以将它们变成一个数字可以按您的预期使用。

[parseInt](http://arduino.cc/en/Reference/StreamParseInt)函数可能是您需要的 -可以[在此处找到有关读取 ASCII 整数的教程](http://arduino.cc/en/Tutorial/ReadASCIIString)

# wcf - 如何在 Window8 RT 应用程序中存储配置？

> ID：15802191
> 
> 赞同：1
> 
> 时间：2013-04-04T03:50:48.620
> 
> 标签：wcf, xaml, windows-runtime, windows-store-apps

我需要将 Win8 应用程序连接到 WCF 服务。WCF 客户端是使用[Add Service Reference](http://msdn.microsoft.com/en-us/library/hh556233.aspx)创建的。

要求是在运行时更改端点 URL。Win 8 没有[app.config](https://stackoverflow.com/questions/12869139/what-is-the-windows-rt-windows-store-app-answer-to-app-config)，而是使用[应用程序数据](http://msdn.microsoft.com/en-us/library/windows/apps/br241587.aspx)设置。

问题是 App 在启动时需要 URL。如果 URL 无效或无法访问，则应用程序将终止。

问题是，如何管理应用程序启动需要配置设置以及在运行时设置的场景？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T03:54:21.023

创建客户端实例时，在开始使用它之前，您可以通过访问`Endpoint`客户端的属性来更改服务的地址。类似于下面的代码。

```
var client = new ServiceReference1.ServiceClient();
client.Endpoint.Address = new EndpointAddress(yourNewUri); 
```

# iphone - iOS - 找出选择了哪个 MKPointAnnotation

> ID：15802192
> 
> 赞同：2
> 
> 时间：2013-04-04T03:51:00.547
> 
> 标签：iphone, ios, objective-c, xcode, mapkit

所以我有一个字典对象的 NSArray，其中包含一堆 JSON 数据。使用该数据，我用一堆 MKPointAnnotations 填充地图，每个都代表给定字典中的数据。当用户点击其中一个注释点时，我如何才能确定哪个点被点击，以便我可以将正确的数据集与该点相关联？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:27:19.480

您需要创建自己的注释类，以便在每个注释中存储附加信息。在这里查看我的答案：

[https://stackoverflow.com/a/15554322/341994](https://stackoverflow.com/a/15554322/341994)

注意那里提供的链接！我的书深入讨论了这一点：

[http://www.aeth.com/iOSBook/ch34.html#_annotations](http://www.apeth.com/iOSBook/ch34.html#_annotations)

你可以下载一个开发这个概念的工作项目：

[https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch34p848map/p707p723map](https://github.com/mattneub/Programming-iOS-Book-Examples/tree/master/ch34p848map/p707p723map)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:23:05.193

我认为这个委托方法会帮助你做到这一点。

```
- (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)view calloutAccessoryControlTapped:(UIControl *)control
{
    NSLog(@"Tapped on: %@", view.annotation.title);
} 
```

您还可以在每个注释上设置标签，并`calloutAccessoryControlTapped`使用`view.tag`.

请参阅[MKMapViewDelegate](https://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/doc/uid/TP40008204)了解更多信息

# html - 设置包含 div 的边框会显着改变其大小

> ID：15802193
> 
> 赞同：6
> 
> 时间：2013-04-04T03:51:08.143
> 
> 标签：html, css

拿这个 HTML。如果您从黄色框中取出“边框：1px 实心”，它的大小会发生很大变化（它会大大缩小）。

...为什么？

**更新**：如果我更改`p`as inline-block，大小保持不变。所以，那个`p`标签似乎是个问题……但为什么外部 div 中的边框会使内联标签的大小发生如此巨大的变化？

```
<body style="height:100%">

  <div style="background-color: red; border-style:solid;">
    <div style="background-color: yellow; border:1px solid;">
      <p>Inside</p>
    </div>
    <p>Something</p>
  </div>

  <div style="background-color: blue; border-style:solid;">
    <p>Something else </p>
  </div>

</body> 
```

演示：http: [//jsfiddle.net/C2D49/](http://jsfiddle.net/C2D49/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:23:34.820

干得好 ：-

[边距崩溃](https://developer.mozilla.org/en-US/docs/CSS/margin_collapsing)

## 相邻的兄弟姐妹

`The margins of adjacent siblings are collapsed (except when the later sibling needs to be cleared past floats). For example: <p>The bottom margin of this paragraph is collapsed...</p> <p>...with the top margin of this paragraph.<p>`

## 父母和第一个/最后一个孩子

`If there is no border, padding, inline content, or clearance to separate the margin-top of a block with the margin-top of its first child block, or no border, padding, inline content, height, min-height, or max-height to separate the margin-bottom of a block with the margin-bottom of its last child, then those margins collapse. The collapsed margin ends up outside the parent.`

## 空块

`If there is no border, padding, inline content, height, or min-height to separate a block's margin-top from its margin-bottom, then its top and bottom margins collapse.`

看看这个小提琴 - 添加几个跨度后它现在不会崩溃。 [http://jsfiddle.net/aPaBy/](http://jsfiddle.net/aPaBy/)

```
<div style="background-color: red; border-style:solid;">
   <div id="test" class="border" style="background-color: yellow;">
     <span>hi</span>
      <p>Inside <button>Test</button></p>
     <span>hi</span>
    </div>
    <p>Something</p>
  </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:06:53.290

我认为这是因为您没有在其中进行任何重置...试试这个...在您的 CSS 添加

```
*{margin:0px;padding:0px;} 
```

现在尽可能多地提供边距和填充...它将起到魅力...试一试

我已经编辑了你的小提琴 [http://jsfiddle.net/BbKED/1/](http://jsfiddle.net/BbKED/1/)

# c# - 尝试从 C# 服务查询 IIS 时出现异常

> ID：15802198
> 
> 赞同：3
> 
> 时间：2013-04-04T03:52:11.390
> 
> 标签：c#, .net, iis, service, iis-7

我从用 C# 编写的 Windows 服务调用以下代码：

```
try
{
    ServerManager m = new ServerManager();
    if(m != null)
    {
            SiteCollection sites = m.Sites;          //I get exception here
    }
}
catch (Exception ex)
{
} 
```

我得到这个例外：

> {"文件名：redirection.config\r\n错误：无法读取配置文件\r\n\r\n":null}

这意味着什么？有什么方法可以在`m`抛出之前在 ServerManager 或我的变量中预测它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-04T05:39:59.217

**更新**：现在查看您的评论后，我可以完全回答问题，问题是您的应用程序引用了错误的 Microsoft.Web.Administration.dll，看到错误告诉我您引用的是 IIS Express 版本而不是“完整” IIS 版本 (7.0.0.0)。因此，请修改您的应用程序代码以添加对 c:\windows\system32\inetsrv\Microsoft.Web.Administration.dll 中的引用的引用。

这是一个权限问题。

您需要确保以管理员组或 SYSTEM 成员身份运行 Windows 服务。我的猜测是您可能将服务作为本地服务或网络服务运行，而那些没有权限读取位于 %windows%\system32\inetsrv\config 中的配置文件。

其他信息：
Redirection.config 是 IIS 用来确定是应该从正常路径 (%windir%\system32\inetsrv\config\applicationHost.config) 读取其配置还是应该从外部 UNC 文件共享中读取配置的文件当集中配置用于许多服务器时。这就是为什么这是要解析的第一个文件之一，因此您会收到该特定文件的访问被拒绝错误。

关于预测，最好的办法是在 try/catch 中创建它并处理它。读取配置时可能会发生许多异常，例如权限（您可以通过确保您可以读取（例如 File.OpenText()）到 Redirection.config、ApplicationHost.config in %windir%\system32\inetsrv 来预测这一点\config 但这是猜测，还有其他一些问题，例如访问密码的加密密钥、无效的配置等）

# html - 为什么这不起作用？我在正确的轨道上吗？

> ID：15802199
> 
> 赞同：-4
> 
> 时间：2013-04-04T03:52:14.687
> 
> 标签：html

为什么这不起作用？这是我的程序“getTutorNames”方法。完整的问题在链接中。这只是该计划的一部分。有人可以帮忙吗？我已经被困了好几个小时了。例如，我的错误消息之一：PeerTutoringReport.java:30: error: variable nameList is already defined in method getTutorNames() Return nameList; ^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:01:41.907

就像我在评论部分所说的那样，该方法存在多个问题

```
import javax.swing.JOptionPane;
import java.util.ArrayList;

public class PeerTutoringReport {

    public static void main(String[] args) {

        ArrayList<String> tutorNames = getTutorNames();
        // sortTutorNames();
        // getTutorDegree();
        // getAmountOfStudentsForTutors();
        // calculateStipend();
        // displayResults();
    }

    private static boolean isNullorEmpty(String s) {
        return s == null || s.matches("\\s*");
    }

    public static ArrayList<String> getTutorNames() {

        ArrayList<String> nameList = new ArrayList<String>();

        while (nameList.size() < 9) {
            String firstName = JOptionPane
                    .showInputDialog("Enter Tutor First Name: ");
            String lastName = JOptionPane
                    .showInputDialog("Enter Tutor Last Name: ");

            if (isNullorEmpty(firstName) && isNullorEmpty(lastName)) {
                continue;
            }
            nameList.add(lastName + "," + firstName);
        }
        return nameList;

    }
} 
```

# sharepoint - SharePoint 是否已为普通 IT 部门做好准备？

> ID：15802201
> 
> 赞同：0
> 
> 时间：2013-04-04T03:52:34.957
> 
> 标签：sharepoint, sharepoint-2013

我认为这个可能会被关闭，但如果它关闭，我希望我能得到一些有意义的回应。

我的雇主即将使用 SharePoint 2013 Standard 升级我们的 WSS 3.0 Intranet 站点。我在 Stack Overflow 上搜索了 SharePoint 的正面和负面信息，我必须承认我看到很多人对它持负面态度，因为使用和修改它是不必要的复杂。虽然其中许多与 2007 年有关，但我仍然在 2010 年看到它们。

是否有很多人在生产环境中使用过 2013，并就前端可用性和后端可扩展性方面的产品在过去几次迭代中的增长情况有反馈？SharePoint 的当前版本是否已为没有开发人员团队对其进行修改的普通企业做好准备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:23:36.723

首先，确定您是否真的需要*除了在中央服务器上存储和检索文档的能力之外的*所有 sharepoint 所提供的功能。

如果您需要以下任何一项：

1.  创建在线申请、自助表格。
2.  将其用作您的公司内部网。
3.  与任何不适合 Office 产品或 .NET 的产品集成。

然后，您将需要专门的支持 - 或者至少需要一个人对其进行培训和发展。还要考虑长期支持它的成本影响；与您的组织核实他们是否有有助于抵消部分成本的企业协议。

如果您想使用 sharepoint，最好的选择是[让 Microsoft 为您运行它](http://office.microsoft.com/en-us/sharepoint/online-collaboration-software-sharepoint-online-FX103789366.aspx)。这样，您可以在决定承诺之前进行公平的评估。

从可用性的角度来看 - 它是迄今为止最用户友好的，这要归功于它与 Office 的内置集成。这可能是它最好的杀手级功能，也是每个 Sharepoint 竞争对手都试图效仿的功能。

Web 界面在 2013 年也有了很大改进，但请记住，大多数功能都是 Internet Explorer 8+ 特定的。这可能会违反您的公司政策。

# apache - 无法让 .htaccess 工作

> ID：15802202
> 
> 赞同：1
> 
> 时间：2013-04-04T03:52:37.790
> 
> 标签：apache, .htaccess

作为一名经验丰富的 Web 开发人员，我感觉自己像个白痴一样发布此信息。不知何故，我往往有问题`.htaccess`。我正在尝试使用以下命令将所有请求路由`/wiki`到我的 index.php...

```
RewriteEngine On
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ./ /index.php [L] 
```

虚拟主机：

```
<VirtualHost *:80>
        ServerName mysite.local
        DocumentRoot "/var/www/mysite/public_html"
        <Directory "/var/www/mysite/public_html">
                Options Indexes FollowSymLinks MultiViews
                AllowOverride All
                Order allow,deny
                allow from all
        </Directory>
</VirtualHost> 
```

我正在尝试访问`http://mysite.local/wiki/asdf`并收到 404 错误。

Apache 的错误日志什么也没显示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:59:01.447

如果是根文件`/wiki`夹中的现有文件夹，并且您的文件在该文件夹中，那么您可以尝试以下操作：`public_html``index.php``wiki`

```
RewriteEngine On
RewriteBase /wiki
RewriteRule index\.php - [F,L]
RewriteCond %{REQUEST_URI} !-f
RewriteCond %{REQUEST_URI} !-d
RewriteRule .* index.php [L] 
```

如果该`wiki`文件夹不存在，并且您正在根目录下完成所有工作：

```
RewriteEngine On
RewriteBase /
RewriteRule index\.php - [F,L]
RewriteCond %{REQUEST_URI} !-f
RewriteCond %{REQUEST_URI} !-d
RewriteRule wiki/(.*) index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:58:17.313

现在试试这个！将不存在`/wiki`和`/wiki/`和重写`/wiki/$var`为`/index.php`：

```
RewriteCond %{REQUEST_URI} ^/wiki/?
RewriteCond %{REQUEST_FILENAME} !-f [OR]
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) /index.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T21:43:47.500

我最终需要 Yii 框架使用的东西......

```
RewriteEngine On

# if a directory or a file exists, use it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# otherwise forward it to index.php
RewriteRule . index.php 
```

# jakarta-ee - 如何使用 Maven 在 Jboss 中使用 JAX-WS

> ID：15802203
> 
> 赞同：0
> 
> 时间：2013-04-04T03:53:30.900
> 
> 标签：jakarta-ee, maven-2, jboss7.x

我一直在尝试寻找有关如何开始在 Jboss 中结合 Maven 创建 Web 服务和客户端的教程。我和我的团队决定在课堂上学习 Java EE 时使用命令行。我们已经基本完成了一个项目，但现在我们需要在课堂上创建 Web 服务。[不存在使用我们当前设置的教程，因此当大多数教程](http://docs.oracle.com/javaee/6/tutorial/doc/bnayn.html)使用完成大部分工作的 IDE时，很难获得整体情况。我能够部署以下内容并取回 XML，但无法让客户端运行以某种方式解析信息：

```
import javax.jws.WebService;
import javax.jws.WebMethod;

@WebService
public class Hello {

    private String message = new String("Hello, ");

    public void Hello() {}

    @WebMethod
    public String sayHello(String name) {
        return message + name + ".";
    }

}//end of class 
```

我希望获得一些关于我当前问题的优秀教程的帮助，以获得更好的想法或实际的快速解释，以帮助我理解这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T16:05:41.883

[JDF](http://www.jboss.org/jdf/)站点上有非常好的 Java EE 材料。还有几个针对 Java EE 6 开发的[快速](https://github.com/jboss-jdf/jboss-as-quickstart)入门。

您可能对[jax-rs-client](https://github.com/jboss-jdf/jboss-as-quickstart/tree/master/jax-rs-client)快速入门特别感兴趣。

# jquery - Jquery 覆盖添加了一个额外的不需要的 img 标签

> ID：15802204
> 
> 赞同：0
> 
> 时间：2013-04-04T03:53:56.967
> 
> 标签：jquery, overlay

我已经使用 JQuery 创建了一个覆盖。它在所有浏览器中都可以正常工作，但是 IE 正在渲染一个额外的、超大的边框，我无法用 css 控制它。使用 IE 开发人员工具栏进行进一步调查后，似乎生成了一个图像标记，该标记在标记中具有内联样式：

我的问题是： 1\. 这个图像标签是由 jQuery 生成的，但所有其他浏览器都知道如何处理它吗？2、如果jQuery负责的话，这个图片在IE中的渲染如何可控？

这是覆盖 div。很简单：

```
<div class="modal" id="addCategoryPrompt">
    <p>Add Category</p>
</div> 
```

这是调用叠加层的链接：

```
<a href="#" class="modalInput" rel="#addCategoryPrompt">Add Category</a> 
```

这是Jquery：

```
$(".modalInput").overlay({
    mask: '#000',
    effect: 'apple',
    closeOnEsc : true,
    api:true,
    closeOnClick: false
}); 
```

# c - 为什么这个简单的 C 代码给出总线错误？

> ID：15802207
> 
> 赞同：-1
> 
> 时间：2013-04-04T03:54:09.340
> 
> 标签：c

```
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <string.h>
#include <math.h>

// Here i declared global variables.
int repLetters[26];
char* letters1;

static void makeRepLetters()
{
    printf("enter makeRep");
    int i =0;
    for(;i<26;i++)  
        repLetters[i] =0;
    for(i=0;i<26;i++) {
        repLetters[((letters1[i]) - 97)] +=1; 
    }
}      

int main(int argc, char *argv[])
{
    int i=0,num =10;
    if(argc != 2) {
        printf("Usage: %s <letters>\n", argv[0]);
        return 1;
    }
    //letters1 = (char*)malloc(sizeof(char)* strlen( argv[1]));
    //strcpy(letters1,argv[1]); 
    letters1 = argv[1];
    printf("\n letters1 = %s",letters1);
    scanf("%d",&num);
    printf("\ncheck test\n");

    makeRepLetters();
    for(i=0;i<26;i++)
        printf("\n %c occured %d tyms",i+97,repLetters[i]);
    return 0;
} 
```

打印“检查测试”后，出现总线错误。`makeRepLetters`没有被调用。我尝试改变很多东西，但无法让它发挥作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:07:34.597

崩溃最有可能发生在这里：

```
repLetters[((letters1[i]) - 97)] +=1; 
```

如果`letters1`不包含 26 个字符怎么办？您现在正在越界访问数组。

唯一确定的方法是在调试器中运行您的程序（当您发生崩溃时您*总是应该这样做）。*

# c++ - 如何确保在多核中创建 std::thread？

> ID：15802208
> 
> 赞同：7
> 
> 时间：2013-04-04T03:54:14.460
> 
> 标签：c++, multithreading, concurrency, c++11, visual-studio-2012

我正在使用visual studio 2012。我有一个模块，在通过xml遍历它们的相应路径后，我必须从硬盘读取大量文件。为此我正在做

```
std::vector<std::thread> m_ThreadList; 
```

在一个while循环中，我将一个新线程推回到这个向量中，比如

```
m_ThreadList.push_back(std::thread(&MyClass::Readfile, &MyClassObject, filepath,std::ref(polygon))); 
```

我的 C++11 多线程知识有限。我在这里遇到的问题是，如何在特定内核上创建线程？我知道vs2012中的parallel_for和parallel_for_each，它们可以充分利用内核。但是，有没有办法使用标准 C++11 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T09:30:11.370

正如其他评论中指出的那样，您不能在“特定核心”上创建线程，因为 C++ 不了解此类架构细节。此外，在大多数情况下，操作系统将能够很好地管理内核/处理器之间的线程分布。

也就是说，在某些情况下，强制在内核之间分配特定的线程可能对性能有益。例如，通过强制一个线程在一个特定的内核上执行，可以最大限度地减少不同处理器缓存之间的数据移动（这对于某些内存绑定场景中的性能至关重要）。

如果你想走这条路，你将不得不研究特定于平台的例程。例如，对于带有 POSIX 线程的 GNU/linux `pthread_setaffinity_np()`，在 FreeBSD`cpuset_setaffinity()`中，在 Windows`SetThreadAffinityMask()`中等等。

如果您有兴趣，我在这里有一些相关的代码片段：

[http://gitorious.org/piranhapp0x/mainline/blobs/master/src/thread_management.cpp](http://gitorious.org/piranhapp0x/mainline/blobs/master/src/thread_management.cpp)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:59:24.850

我相当确定核心亲和力不包含在 std::thread 中。假设是操作系统完全有能力充分利用可用的内核。除了最极端的情况外，您不会违背操作系统的决定，所以这个假设是公平的。

如果您确实走这条路，那么您必须在代码中添加一些决策以考虑机器架构，以确保您的决策比您运行的每台机器上的操作系统更好。这需要很大的努力！对于初学者，您可能希望限制线程数以匹配计算机上的内核数。而且您对机器中发生的其他事情一无所知；操作系统可以！

这就是存在线程池的原因。默认情况下，它们倾向于拥有与内核一样多的线程，由语言运行时自动设置。AFAIK C++11 没有其中之一。因此，为了获得最佳性能，您可以做的一件好事是找出有多少内核并将您拥有的线程数限制为该数量。否则，最好相信操作系统。

Joachim Pileborg 的评论非常值得关注，除非每个线程完成的工作超过了 I/O 开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-16T22:19:53.970

作为将线程分派到核心的上下文中的线程的快速概述：

大多数现代操作系统都使用内核级线程或混合线程。使用内核级线程，操作系统“看到”每个进程中的所有线程；与 Java 中使用的用户级线程相反，在 Java 中，操作系统只看到一个进程，并且不了解线程。现在，由于使用内核级线程，操作系统可以识别进程的单独线程，并管理它们到给定内核的分派，因此有可能实现真正的并行性——同一进程的多个线程在不同的内核上运行。但是，作为程序员，您将无法控制这一点，当您使用`std::thread`; 操作系统决定。对于用户级线程，所有线程的管理都在用户级完成，对于 Java，一个库管理“调度”。在混合线程的情况下，使用内核线程，其中每个内核线程实际上是一组用户级线程。

# c - strtoull 基于输入字符串

> ID：15802209
> 
> 赞同：3
> 
> 时间：2013-04-04T03:54:18.093
> 
> 标签：c, string

我有一个名为 romflasher 的工具，它接受两个字符串命令行参数`--s-addr0` 和`--e-addr0`

```
romflasher --s-addr0 0x1c40000 --e-addr0 0x1e40000 
```

在我的程序 romflasher.c 中

```
 char s_addr_0[256];
 char e_addr_0[256];

 uint32_t start_addr = strtoull(s_addr_0,(char**)NULL,16);
 uint32_t end_addr   = strtoull(e_addr_0,(char**)NULL,16); 
```

只要用户将地址指定为十六进制就可以正常工作。我想让用户可以选择以十进制和十六进制指定它。是否有一个函数可以根据`'0x'`前缀的存在进行适当的字符串转换到正确的基地？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T03:57:00.277

如果您将 0 作为`base`参数传递，则`strtoull`识别`0x`和`0`前缀分别表示十六进制和八进制，否则默认为十进制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:00:00.933

为什么不为 strtoull (mystrtoull) 编写一个包装函数并检测字符串中的 0x 并相应地将基本参数传递给 strtoull？

# operating-system - 如何知道设备的操作系统

> ID：15802213
> 
> 赞同：0
> 
> 时间：2013-04-04T03:54:39.370
> 
> 标签：operating-system, embedded, embedded-linux, cisco-ios, web-operating-system

如果我知道设备的型号或供应商。有什么直接的方法可以让我知道这个设备的操作系统（例如通过设备驱动程序或类似的东西？）。例如，我将引用我之前提出的问题的答案：[固件和操作系统之间有什么区别？](https://stackoverflow.com/questions/15702355/what-is-the-difference-between-the-firmware-and-the-operating-system)

有人说过：

> 硬件供应商通常使用 linux 的衍生产品（例如 Cisco IOS）

我怎么会知道这个。我知道一个 cisco 设备的名称，但我没有该设备，我需要检查它的操作系统是什么（即使众所周知它是 Linux，我也需要自己检查）。我怎样才能得到这条信息？我查了公司网站和谷歌，我找不到任何答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:12:31.097

如果遵守 GNU 公共许可证的条款，那么设备是否使用任何 GPL 代码（包括 Linux）应该是相当清楚的，而且源代码也应该可用。

如果设备使用的操作系统不是开源的，那么即使您可以获得这些信息，它也不太可能特别有用，除非可能在应用制造商的固件更新方面。

Linux 在一般嵌入式系统中绝不是常见的。它通常用于某些类型的设备，例如路由器、STB 和 NAS。这些设备通常有一个网络服务器接口，通常可以通过该接口获得版本信息，但没有通用的方法来访问这些信息，您必须访问设备的特定 URL 并解析 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-15T07:37:16.383

您需要一根串行电缆才能侵入设备或从闪存读取二进制文件并检查 hexdump。我家有一台机顶盒。提供商没有透露操作系统。有些竞争对手需要这些信息才能让你失望。

# actionscript-3 - as3 图像在另一个使用位图

> ID：15802220
> 
> 赞同：0
> 
> 时间：2013-04-04T03:55:41.420
> 
> 标签：actionscript-3, flash

好的，所以我尝试使用以下方法将位图图像加载为背景：

```
screenBitmapData.copyPixels(tilesBitmapData,new Rectangle(sourceX,sourceY,tileSize,tileSize),new Point(destX,destY));
screenBitmap = new Bitmap(screenBitmapData);
addChild(screenBitmap); 
```

这会正确加载我的平铺地图并将其显示在屏幕上。

现在我想添加另一个将用作我的角色的图像，显​​示它的框架包含我的角色移动，然后显示如下图像：

```
screenBitmapData.copyPixels(playerSheetBitmapData, new Rectangle(currentSpriteColumn * CHAR_SPRITE_WIDTH, currentSpriteRow * CHAR_SPRITE_HEIGHT, CHAR_SPRITE_WIDTH, CHAR_SPRITE_HEIGHT), new Point(xPos, yPos), null, null,true); 
```

我在我的角色图像上设置了 alpha 通道，这是我在地图上移动时的结果：

[http://snag.gy/L2uuR.jpg](http://snag.gy/L2uuR.jpg)

如您所见，背景图像不会刷新。我根本不知道该怎么做。我对 flash 和 as3 很陌生，我已经尝试了好几天才能让它工作。我知道在我再次绘制精灵之前它与复制像素或重绘背景有关......有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:24:28.153

您需要重新绘制整个场景。你现在所做的就是在你之前的抽签结果之上绘制玩家。

在您的情况下，您需要做的就是在绘制角色之前每帧绘制整个背景。它可能看起来像这样：

```
function renderScene():void
{
    // Draw the background, which will replace all the current graphics
    // on the Bitmap.
    screenBitmapData.copyPixels(tilesBitmapData,new Rectangle(sourceX,sourceY,tileSize,tileSize),new Point(destX,destY));

    // Then draw the player.
    screenBitmapData.copyPixels(playerSheetBitmapData, new Rectangle(currentSpriteColumn * CHAR_SPRITE_WIDTH, currentSpriteRow * CHAR_SPRITE_HEIGHT, CHAR_SPRITE_WIDTH, CHAR_SPRITE_HEIGHT), new Point(xPos, yPos), null, null,true);
} 
```

但是，要真正清除位图，您可以使用[`fillRect()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#fillRect%28%29)一种颜色（例如黑色）填充它：

```
// Fill the Bitmap with black.
screenBitmapData.fillRect( screenBitmapData.rect, 0x000000 ); 
```

# c++ - 在这种情况下我可以依赖连续内存吗？

> ID：15802221
> 
> 赞同：3
> 
> 时间：2013-04-04T03:55:42.670
> 
> 标签：c++

考虑一个类：

```
template <typename T>
struct A{
  //...many public member functions...
  T x;
  T y;
  T z;
} 
```

还有一个类似的：

```
template <typename T>
struct B{
  //many public member functions
  T x;
  T y;
} 
```

虽然此处未指定，但`T`始终为`float`or`int`或`bool`。

现在考虑另一个结构：

```
struct Pair{
  A<float> a;
  B<float> b;
 } 
```

现在一个`vector`：

```
 std::vector<Pair> bigBunch; 
```

假设所有`x`, `y`, `z`in`bigBunch`将是连续的有多安全？我知道这`vector`保证了它`Pair`的 s 之间的连续内存，但我也知道这`struct`并不一定保证连续内存，因为可能会发生填充。`struct`但是，我认为只有当您的元素是不同类型时，填充才是一种风险。

我希望能够获得一个指针`bigBunch[0].a.x`，然后知道我可以期望`float`s 的整个内容中有一个连续的流`bigBunch`。实际上，指向的指针与`bigBunch[0].a.x`刚才说的指向同一个地方``bigBunch[0].a`。

`Pair.a`和是相同类型还是不同类型是否重要`Pair.b`，例如混合`int`s`float`而不是两者都是相同类型（`float`在本例中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:03:51.003

> 但是，我认为只有当你的结构元素是不同类型时，填充才是一种风险。

这不是很准确，它主要与所有内容在内存中占用多少空间有关。

您的示例使用`float`4 个字节，因此不会导致填充。填充的全部目的是加快内存访问，4 字节边界上的 4 字节对象很好。

所以你应该能够假设你有一个流`float`，但你可能不会如果`Pair`where on `bool`。我这么说的原因是因为它可能决定`b`在 4 字节边界上效果最好，这会引入一个字节的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:04:45.687

AFAIK，如果编译器认为这是一个好主意，标准中的任何内容都不会阻止编译器添加填充。编译器在这件事上确实有很大的余地。这意味着最好的做法是防御并明确指示编译器打包数据，即使例如 4 字节边界上的 4 字节浮点数*不应*导致填充。

我的另一个建议是用来`static_assert`验证一切都是你想要的大小。例如，

```
template <typename T>
struct A{
  //...many public member functions...
  T x;
  T y;
  T z;
} __attribute__ ((__packed__));
static_assert(sizeof(A) == 3*sizeof(T), "struct A shouldn't be padded"); 
```

如果您没有 C++ 11，则可以[`BOOST_STATIC_ASSERT`](http://www.boost.org/doc/libs/1_53_0/doc/html/boost_staticassert.html)改用。编辑：`__attribute__ ((__packed__))`结构的右大括号后的位是 GCC 特定的确保结构紧凑的方式。

您应该考虑的另一件事是，您是否真的从能够将您的数组视为一个没有间隙`vector<Pair>`的大数组中受益。`float`我知道如果您必须遍历所有内容，或者如果您必须将数据传递给其他需要连续数据的库，这可能会使一些算法更方便编写。但我猜你正在用这些结构做很多数学运算，你的编译器可能能够自动矢量化其中的一些，例如，如果`struct A`是 128 位对齐，则使用 SSE。在我的答案的这一部分中，我有很多猜测，所以如果它不适用于您，请忽略它。

PS：不要忘记结构的右大括号后的分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T05:28:57.607

> 假设 bigBunch 中的所有 x、y、z 都是连续的，这有多安全？

不安全。编译器可以自由填充。取决于`T`

> 指向 bigBunch[0].ax 的指针将指向与刚才说 `bigBunch[0].a 相同的位置。

这是安全的假设。

> 如果 Pair.a 和 Pair.b 是相同的类型还是不同的类型，例如混合 int 和 float 而不是两者都是相同的类型（本例中为 float），这有关系吗？

假设是不安全的。对于`int`and ，我们可能很幸运，但对于and`float`可能不是这样`short``int`

填充故事在 32 位机器和 64 位机器之间变化。如果您希望您的代码适用于所有架构，则不能对填充和对齐做出假设。

有关一般性讨论，请参阅[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

总之，永远不要在你的程序中假设任何关于填充的事情:-)

# c - TurboC 的最新版本是什么？

> ID：15802225
> 
> 赞同：1
> 
> 时间：2013-04-04T03:56:15.353
> 
> 标签：c, compiler-construction, ide, turbo-c

在我的大学里，他们为我的学者开出了 Turbo C。我知道它很旧，但我想下载它的最新版本。我有一台 1980 的 turbo c，一个 DOS 版本。

有可用的最新版本吗？

Borland C++ 与 Turbo C++ 不同吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:28:05.997

这些产品没有“最新版本”——Turbo C 于 1990 年停产，Turbo C++ 于 1993 年停产。两者都超过 20 年（他们很可能比你更老！），并且只会构建 16-位 DOS 可执行文件，甚至无法在大多数现代计算机上***运行。***它们不能用于与任何类型的现代编程 API 交互——特别是它们不能与网络交互，也不能创建标准的 Windows 用户界面。基本上，你被困在过去。

我不会说你应该找一所更好的学校。但是您应该记住，您所学的内容与您的工作几乎完全无关——在过去的 20 年中发生了很多变化，尤其是对于 C++。（C++ STL 在 1993 年甚至还没有完全标准化，所以即使在那里也会有一些显着的差异。）

# xml - 以下代码的模板：

> ID：15802227
> 
> 赞同：-2
> 
> 时间：2013-04-04T03:56:27.563
> 
> 标签：xml, xslt

作为 XML 和 XSLT 的新手，我已经为我的需求生成了一个代码。但是，我想使用 XSL:template 来简化我的 XSLT。请就如何使用模板执行以下代码提供建议。

```
<xsl:variable name="d1">
<xsl:value-of select="ss:Cell[15]/ss:index"/>
<xsl:choose>
<xsl:when test="$d1=16"><XDT_WW2><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW2></xsl:when>
<xsl:when test="$d1=17"><XDT_WW3><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW3></xsl:when>
<xsl:when test="$d1=18"><XDT_WW4><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW4></xsl:when>
<xsl:when test="$d1=19"><XDT_WW5><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW5></xsl:when>
<xsl:when test="$d1=20"><XDT_WW6><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW6></xsl:when>
<xsl:when test="$d1=21"><XDT_WW7><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW7></xsl:when>
<xsl:when test="$d1=22"><XDT_WW8><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW8></xsl:when>
<xsl:when test="$d1=23"><XDT_WW9><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW9></xsl:when>
<xsl:when test="$d1=24"><XDT_WW10><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW10></xsl:when>
<xsl:when test="$d1=25"><XDT_WW11><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW11></xsl:when>
<xsl:when test="$d1=26"><XDT_WW12><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW12></xsl:when>
<xsl:when test="$d1=27"><XDT_WW13><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW13></xsl:when>
<xsl:when test="$d1=28"><XDT_WW14><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW14></xsl:when>
<xsl:when test="$d1=29"><XDT_WW15><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW15></xsl:when>
<xsl:when test="$d1=30"><XDT_WW16><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW16></xsl:when>
<xsl:when test="$d1=31"><XDT_WW17><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW17></xsl:when>
<xsl:when test="$d1=32"><XDT_WW18><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW18></xsl:when>
<xsl:when test="$d1=33"><XDT_WW19><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW19></xsl:when>
<xsl:when test="$d1=34"><XDT_WW20><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW20></xsl:when>
<xsl:when test="$d1=35"><XDT_WW21><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW21></xsl:when>
<xsl:when test="$d1=36"><XDT_WW22><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW22></xsl:when>
<xsl:when test="$d1=37"><XDT_WW23><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW23></xsl:when>
<xsl:when test="$d1=38"><XDT_WW24><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW24></xsl:when>
<xsl:when test="$d1=39"><XDT_WW25><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW25></xsl:when>
<xsl:when test="$d1=40"><XDT_WW26><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW26></xsl:when>
<xsl:when test="$d1=41"><XDT_WW27><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW27></xsl:when>
<xsl:when test="$d1=42"><XDT_WW28><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW28></xsl:when>
<xsl:when test="$d1=43"><XDT_WW29><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW29></xsl:when>
<xsl:when test="$d1=44"><XDT_WW30><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW30></xsl:when>
<xsl:when test="$d1=45"><XDT_WW31><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW31></xsl:when>
<xsl:when test="$d1=46"><XDT_WW32><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW32></xsl:when>
<xsl:when test="$d1=47"><XDT_WW33><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW33></xsl:when>
<xsl:otherwise><XDT_WW1><xsl:value-of select="ss:Cell[15]/ss:Data"/></XDT_WW1></xsl:otherwise>
</xsl:choose>
</xsl:variable>

<xsl:variable name="d2">
<xsl:value-of select="ss:Cell[16]/ss:index"/>
<xsl:choose>
<xsl:when test="$d2=17"><XDT_WW3><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW3></xsl:when>
<xsl:when test="$d2=18"><XDT_WW4><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW4></xsl:when>
<xsl:when test="$d2=19"><XDT_WW5><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW5></xsl:when>
<xsl:when test="$d2=20"><XDT_WW6><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW6></xsl:when>
<xsl:when test="$d2=21"><XDT_WW7><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW7></xsl:when>
<xsl:when test="$d2=22"><XDT_WW8><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW8></xsl:when>
<xsl:when test="$d2=23"><XDT_WW9><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW9></xsl:when>
<xsl:when test="$d2=24"><XDT_WW10><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW10></xsl:when>
<xsl:when test="$d2=25"><XDT_WW11><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW11></xsl:when>
<xsl:when test="$d2=26"><XDT_WW12><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW12></xsl:when>
<xsl:when test="$d2=27"><XDT_WW13><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW13></xsl:when>
<xsl:when test="$d2=28"><XDT_WW14><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW14></xsl:when>
<xsl:when test="$d2=29"><XDT_WW15><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW15></xsl:when>
<xsl:when test="$d2=30"><XDT_WW16><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW16></xsl:when>
<xsl:when test="$d2=31"><XDT_WW17><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW17></xsl:when>
<xsl:when test="$d2=32"><XDT_WW18><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW18></xsl:when>
<xsl:when test="$d2=33"><XDT_WW19><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW19></xsl:when>
<xsl:when test="$d2=34"><XDT_WW20><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW20></xsl:when>
<xsl:when test="$d2=35"><XDT_WW21><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW21></xsl:when>
<xsl:when test="$d2=36"><XDT_WW22><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW22></xsl:when>
<xsl:when test="$d2=37"><XDT_WW23><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW23></xsl:when>
<xsl:when test="$d2=38"><XDT_WW24><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW24></xsl:when>
<xsl:when test="$d2=39"><XDT_WW25><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW25></xsl:when>
<xsl:when test="$d2=40"><XDT_WW26><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW26></xsl:when>
<xsl:when test="$d2=41"><XDT_WW27><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW27></xsl:when>
<xsl:when test="$d2=42"><XDT_WW28><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW28></xsl:when>
<xsl:when test="$d2=43"><XDT_WW29><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW29></xsl:when>
<xsl:when test="$d2=44"><XDT_WW30><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW30></xsl:when>
<xsl:when test="$d2=45"><XDT_WW31><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW31></xsl:when>
<xsl:when test="$d2=46"><XDT_WW32><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW32></xsl:when>
<xsl:when test="$d2=47"><XDT_WW33><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW33></xsl:when>
<xsl:otherwise><XDT_WW2><xsl:value-of select="ss:Cell[16]/ss:Data"/></XDT_WW2></xsl:otherwise>
</xsl:choose>
</xsl:variable>

...

<xsl:variable name="e">
<xsl:value-of select="ss:Cell[28]/ss:index"/>
<xsl:choose>
<xsl:when test="$e=29"><XDT_WW15><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW15></xsl:when>
<xsl:when test="$e=30"><XDT_WW16><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW16></xsl:when>
<xsl:when test="$e=31"><XDT_WW17><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW17></xsl:when>
<xsl:when test="$e=32"><XDT_WW18><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW18></xsl:when>
<xsl:when test="$e=33"><XDT_WW19><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW19></xsl:when>
<xsl:when test="$e=34"><XDT_WW20><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW20></xsl:when>
<xsl:when test="$e=35"><XDT_WW21><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW21></xsl:when>
<xsl:when test="$e=36"><XDT_WW22><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW22></xsl:when>
<xsl:when test="$e=37"><XDT_WW23><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW23></xsl:when>
<xsl:when test="$e=38"><XDT_WW24><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW24></xsl:when>
<xsl:when test="$e=39"><XDT_WW25><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW25></xsl:when>
<xsl:when test="$e=40"><XDT_WW26><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW26></xsl:when>
<xsl:when test="$e=41"><XDT_WW27><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW27></xsl:when>
<xsl:when test="$e=42"><XDT_WW28><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW28></xsl:when>
<xsl:when test="$e=43"><XDT_WW29><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW29></xsl:when>
<xsl:when test="$e=44"><XDT_WW30><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW30></xsl:when>
<xsl:when test="$e=45"><XDT_WW31><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW31></xsl:when>
<xsl:when test="$e=46"><XDT_WW32><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW32></xsl:when>
<xsl:when test="$e=47"><XDT_WW33><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW33></xsl:when>
<xsl:otherwise><XDT_WW14><xsl:value-of select="ss:Cell[28]/ss:Data"/></XDT_WW14></xsl:otherwise>
</xsl:choose>
</xsl:variable> 
```

并且代码逻辑重复了很多次，总共有 20 多个变量。任何帮助将不胜感激。

这是 XML 文件的摘录：

```
<?xml version="1.0"?> <?mso-application progid="Excel.Sheet"?><Workbook     xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"> <DocumentProperties xmlns="urn:schemas-microsoft-com:office:office">  <LastAuthor>APS_OWNER</LastAuthor>  <Created>2013-03-05T07:03:29</Created>  <Version>11.6408</Version> </DocumentProperties> <ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel">  <WindowHeight>8445</WindowHeight>  <WindowWidth>11115</WindowWidth>  <WindowTopX>720</WindowTopX>  <WindowTopY>375</WindowTopY>  <RefModeR1C1/>  <ProtectStructure>False</ProtectStructure>  <ProtectWindows>False</ProtectWindows> </ExcelWorkbook>
<Styles>
<Style ss:ID="Default" ss:Name="Normal"> <Alignment ss:Vertical="Bottom"/> <Borders/>    <Font/> <Interior/> <NumberFormat/> <Protection/> </Style> 
<Style ss:ID="ColumnHeader">  <Alignment ss:Vertical="Bottom" ss:Horizontal="Center"/>  <Font ss:FontName="Times New Roman" x:Family="Roman" ss:Size="10" ss:Bold="1" ss:Underline="Single"/>  <Interior/>  <NumberFormat/>   </Style>
<Style ss:ID="ColumnHeaderDate">  <Alignment ss:Vertical="Bottom" ss:Horizontal="Center"/>  <Font ss:Size="10" ss:Bold="1" ss:Underline="Single"/>  <Interior/>  <NumberFormat ss:Format="[ENG][$-409]dd\-mmm\-yy;@"/>   </Style>
<Style ss:ID="NumberStyleBlueCell">  <Alignment ss:Horizontal="Right"/>  <Font/>  <Interior ss:Color="Cyan" ss:Pattern="Solid"/>  <NumberFormat ss:Format="###,###,###.00"/>   </Style>
<Style ss:ID="TextStyleBlueCell">  <Alignment/>  <Font/>  <Interior ss:Color="Cyan" ss:Pattern="Solid"/>  <NumberFormat/>   </Style>
<Style ss:ID="NumberStyle">  <Alignment ss:Horizontal="Right"/>  <Font/>  <Interior/>  <NumberFormat ss:Format="#,##0"/>   </Style>
<Style ss:ID="NumberStyle2">  <Alignment ss:Horizontal="Right"/>  <Font/>  <Interior/>  <NumberFormat ss:Format="####"/>   </Style>
<Style ss:ID="DateStyle">  <Alignment/>  <Font/>  <Interior/>  <NumberFormat ss:Format="[ENG][$-409]dd\-mmm\-yy;@"/>   </Style>
<Style ss:ID="ColumnSum">  <Alignment ss:Horizontal="Right"/>  <Font ss:Color="Blue"/>  <Interior/>  
<NumberFormat ss:Format="###,###,###.00"/>   </Style>
<Style ss:ID="RowSum">  <Alignment ss:Horizontal="Right"/>  <Font ss:Color="Red"/>  <Interior/>  
<NumberFormat ss:Format="###,###,###.00"/>   </Style>

</Styles>    
<Worksheet ss:Name="NO_Details_Across">    
<Table ss:ExpandedColumnCount="47" ss:ExpandedRowCount="9978" x:FullColumns="1" x:FullRows="1">
<Row>
<Cell><Data ss:Type="String">NO</Data></Cell>
<Cell ss:StyleID="DateStyle"><Data ss:Type="DateTime">2013-03-05T07:03:28</Data></Cell>
<Cell><Data ss:Type="String">NO</Data></Cell>
<Cell><Data ss:Type="String">CNG</Data></Cell>
<Cell><Data ss:Type="String">CNG</Data></Cell>
<Cell><Data ss:Type="String">SAD</Data></Cell>
<Cell><Data ss:Type="String">S039</Data></Cell>
<Cell><Data ss:Type="String">CP4-XS</Data></Cell>
<Cell><Data ss:Type="String">3SK263-5-TG-E</Data></Cell>
<Cell><Data ss:Type="String">3SK263-E-5-ASY</Data></Cell>
<Cell><Data ss:Type="String">3SK263-E-5-WDQ</Data></Cell>
<Cell><Data ss:Type="String">NO PNX</Data></Cell>
<Cell ss:StyleID="NumberStyle"><Data ss:Type="Number">0</Data></Cell>
<Cell ss:StyleID="NumberStyle"><Data ss:Type="Number">468149</Data></Cell>
<Cell ss:Index="16" ss:StyleID="NumberStyle"><Data ss:Type="Number">23280</Data></Cell>
<Cell ss:Index="17" ss:StyleID="NumberStyle"><Data ss:Type="Number">23280</Data></Cell>
<Cell ss:Index="18" ss:StyleID="NumberStyle"><Data ss:Type="Number">23280</Data></Cell>
<Cell ss:Index="19" ss:StyleID="NumberStyle"><Data ss:Type="Number">46560</Data></Cell>
<Cell ss:Index="20" ss:StyleID="NumberStyle"><Data ss:Type="Number">46560</Data></Cell>
<Cell ss:Index="25" ss:StyleID="NumberStyle"><Data ss:Type="Number">69840</Data></Cell>
<Cell ss:Index="26" ss:StyleID="NumberStyle"><Data ss:Type="Number">93120</Data></Cell>
<Cell ss:Index="27" ss:StyleID="NumberStyle"><Data ss:Type="Number">69840</Data></Cell>
<Cell ss:Index="28" ss:StyleID="NumberStyle"><Data ss:Type="Number">93120</Data></Cell>
<Cell ss:Index="29" ss:StyleID="NumberStyle"><Data ss:Type="Number">116400</Data>    </Cell>
<Cell ss:Index="30" ss:StyleID="NumberStyle"><Data ss:Type="Number">116400</Data></Cell>
<Cell ss:Index="31" ss:StyleID="NumberStyle"><Data ss:Type="Number">116400</Data>    </Cell>
<Cell ss:Index="32" ss:StyleID="NumberStyle"><Data ss:Type="Number">116399</Data></Cell>
<Cell ss:Index="33" ss:StyleID="NumberStyle"><Data ss:Type="Number">139679</Data></Cell>
<Cell ss:Index="34" ss:StyleID="NumberStyle"><Data ss:Type="Number">116399</Data></Cell>
<Cell ss:Index="35" ss:StyleID="NumberStyle"><Data ss:Type="Number">139680</Data></Cell>
<Cell ss:Index="37" ss:StyleID="NumberStyle"><Data ss:Type="Number">93120</Data></Cell>
<Cell ss:Index="38" ss:StyleID="NumberStyle"><Data ss:Type="Number">116400</Data></Cell>
<Cell ss:Index="39" ss:StyleID="NumberStyle"><Data ss:Type="Number">93120</Data></Cell>
<Cell ss:Index="40" ss:StyleID="NumberStyle"><Data ss:Type="Number">93120</Data></Cell>
<Cell ss:Index="41" ss:StyleID="NumberStyle"><Data ss:Type="Number">116400</Data></Cell>
<Cell ss:Index="44" ss:StyleID="NumberStyle"><Data ss:Type="Number">69840</Data></Cell>
<Cell ss:Index="45" ss:StyleID="NumberStyle"><Data ss:Type="Number">419040</Data></Cell>
</Row>
</Table>
</Worksheet>
</Workbook> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:49:05.277

看起来您正在尝试匹配ss **:Index**属性在特定范围内的**ss:Cell**元素。所以你会从有一个模板来匹配这些

 **```
<xsl:template match="ss:Cell[@ss:Index > position()][not(@ss:Index > 47)]"> 
```

（注意**ss:Index**是一个属性，所以你使用@符号来访问它）

然后，您可以在其中创建元素，其名称基于索引，如下所示（注意此处使用属性值模板来创建元素名称。花括号表示它是要评估的表达式，而不是字面输出）

```
<xsl:element name="{concat('XDT_WW', @ss:Index - 14)}">
   <xsl:value-of select="ss:Data" />
</xsl:element> 
```

如果单元格的索引不在范围内，您将有另一个模板来匹配这些

```
<xsl:template match="ss:Cell">
   <XDT_WW1>
      <xsl:value-of select="ss:Data" />
   </XDT_WW1>
</xsl:template> 
```

然后你会像这样调用模板

```
<xsl:apply-templates select="//ss:Cell[15]" />
<xsl:apply-templates select="//ss:Cell[16]" />
<xsl:apply-templates select="//ss:Cell[17]" /> 
```

XSLT 总是首先匹配更具体的模板（即索引在范围内的模板）。

事实上，为了避免代码重复，您也可以将一个模板设为命名模板，并使用带有新元素编号的参数调用它。试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet">

  <xsl:output omit-xml-declaration="yes" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
    <xsl:apply-templates select="//ss:Cell[15]" />
    <xsl:apply-templates select="//ss:Cell[16]" />
    <xsl:apply-templates select="//ss:Cell[17]" />
  </xsl:template>

  <xsl:template match="ss:Cell[@ss:Index > position()][not(@ss:Index > 47)]">
    <xsl:call-template name="cell">
      <xsl:with-param name="elementNumber" select="number(@ss:Index) - 14" />
     </xsl:call-template>
  </xsl:template>

  <xsl:template match="ss:Cell" name="cell">
     <xsl:param name="elementNumber" select="1" />
     <xsl:element name="{concat('XDT_WW', $elementNumber)}">
       <xsl:value-of select="ss:Data" />
     </xsl:element>
  </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<XDT_WW2>23280</XDT_WW2>
<XDT_WW3>23280</XDT_WW3>
<XDT_WW4>23280</XDT_WW4> 
```**

# android - Android-图像渲染

> ID：15802228
> 
> 赞同：0
> 
> 时间：2013-04-04T03:56:30.147
> 
> 标签：android, android-layout, android-image

有没有办法解决这个问题？我试过`invalidate()`了，但它仍然显示同样的问题。发生的情况是，在打开页面/活动后，图像的行为类似于图 A 中的图像。它仅在来回滚动后呈现到我想要的布局（图 B）。![在此处输入图像描述](https://i.stack.imgur.com/djUA7.png)

我要做的是在运行时设置图像的宽度和高度。所以这也与我之前的问题有关：[我的 Horizo​​ntalListView 中的图像会随机改变它的大小](https://stackoverflow.com/questions/15787206/android-images-in-my-horizontallistview-changes-it-size-randomly)，而[ImageView 动态宽度和高度](https://stackoverflow.com/questions/15781680/android-imageview-dynamic-width-and-height)几乎没有得到帮助。

请问关于这个问题有什么建议吗？

编辑：顺便说一句，我的类是： **MyCustomAdapter**（扩展 baseadapter，这从 ImageLoader 调用 displayimage()）、 **MyActivity**和 **ImageLoader**（这是我的图像 url 被加载、解码、异步显示的地方）

我也很困惑我将在哪里设置 imageView 的高度和宽度。现在，我将它设置为 ImageLoader。没关系。但我不知道我是否做对了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:11:25.167

如果要在运行时手动设置宽度和高度，请在布局系统测量视图后获取对 ImageView 的 LayoutParams 的引用。如果您在渲染阶段过早执行此操作，您的视图的宽度和高度以及它的父视图等都将为 0。

我在一个开源库中有一些代码可以帮助你。该过程分为两部分：

1.  为您的控件设置一个附加到 ViewTreeObserver 的 OnPreDrawListener。我的示例在自定义控件中执行此操作，但您也可以在您的活动中执行此操作。
2.  在 onPreDraw 方法中，您的图像及其父图像现在将分配给它们的宽度和高度值。您可以进行计算，然后手动将宽度和/或高度设置为视图的 LayoutParams 对象（不要忘记将其设置回来）。

查看这个示例，其中我在自定义 ImageView 渲染到屏幕之前将其应用宽高比。我不知道这是否完全适合您的用例，但这将演示如何将 OnPreDrawListener 添加到 ViewTreeObserver，完成后将其删除，并在运行时将动态调整大小应用于 View

[https://github.com/aguynamedrich/beacon-utils/blob/master/Library/src/us/beacondigital/utils/RemoteImageView.java#L78](https://github.com/aguynamedrich/beacon-utils/blob/master/Library/src/us/beacondigital/utils/RemoteImageView.java#L78)

这是一个修改后的版本，它删除了我特定的调整大小逻辑。它还从 imageView 中获取 ViewTreeObserver，如果您没有实现自定义控件并且只想在 Activity 中执行此操作，则更有可能发生这种情况

```
private void initResizeLogic() {
    final ViewTreeObserver obs = imageView.getViewTreeObserver();
    obs.addOnPreDrawListener(new OnPreDrawListener() {

        public boolean onPreDraw() {
            dynamicResize();
            obs.removeOnPreDrawListener(this);
            return true;
        }
    });
}

protected void dynamicResize() {
        ViewGroup.LayoutParams lp = imageView.getLayoutParams();
        // resize logic goes here...
        // imageView.getWidth() and imageView.getHeight() now return 
        // their initial layout values
        lp.height = someCalculatedHeight;
        lp.width = someCalculatedWidth;
        imageView.setLayoutParams(lp);
    }
} 
```

# c# - 将 RichTextBox 更改为标签

> ID：15802229
> 
> 赞同：1
> 
> 时间：2013-04-04T03:56:32.660
> 
> 标签：c#, .net, winforms, richtextbox

我正在使用富文本框作为我的应用程序的标签。文本框是只读的，但可以选择其内容。如何让用户在只读的富文本框中无法选择文本？

当我禁用控件时无法选择文本但我失去了颜色，因为它们变成灰色（禁用）。如何在不禁用富文本框控件的情况下禁用文本选择？

仅供参考：我使用富文本框作为标签，因为我需要将字符串中需要显示给用户的一个单词的前景色更改为红色。我使用[了这篇](https://stackoverflow.com/questions/9926912/changing-string-colour/9927218#9927218)SO 文章和以下方法来做到这一点。

```
string word = "red";
int start = richTextBox1.Find(word);
if (start >= 0) {
    richTextBox1.Select(start, word.Length);
    richTextBox1.SelectionColor = Color.Red;
} 
```

**编辑：**顺便说一句，这是 C# WinForm

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:00:41.457

只需处理选择，并将其恢复为“无”：

```
// so you have colour (set via the Designer)
richTextBox.Enabled = true;

// so users cannot change the contents (set via the Designer)
richTextBox.ReadOnly = true;

// allow users to select the text, but override what they do, IF they select the text (set via the Designer)
richTextBox.SelectionChanged += new System.EventHandler(this.richTextBox_SelectionChanged);

// If the user selects text, then de-select it
private void richTextBox_SelectionChanged(object sender, EventArgs e)
{
    // Move the cursor to the end
    if (this.richTextBox.SelectionStart != this.richTextBox.TextLength)
    {
        this.richTextBox.SelectionStart = this.richTextBox.TextLength;
    }
} 
```

取自：[http ://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/d1132ee5-acad-49f3-ae93-19d386fe2d12/](http://social.msdn.microsoft.com/Forums/en-US/winformsdesigner/thread/d1132ee5-acad-49f3-ae93-19d386fe2d12/)

（顺便说一句，一点点[搜索](http://www.google.com/search?q=richtextbox%20disable%20selection)会有很长的路要走。）

# synchronization - ubuntu 中的双向文件同步

> ID：15802231
> 
> 赞同：1
> 
> 时间：2013-04-04T03:56:55.677
> 
> 标签：synchronization, sync

我需要在两个 ubuntu 服务器中同步多个文件、文件夹。
A 服务器同步到 B。B
服务器同步到 A。

**rsync** : 同步一种方式
**unison** : 只同步一个文件夹。

还有其他两种方式（双向）文件同步工具吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T16:03:20.207

Unison 可以做多个文件夹。也许您认为他们的“根文件夹”是控制备份内容的唯一方法，但您也有路径。

如果有的话，唯一的问题（如果可以考虑的话）是似乎不再更新一致。

此外，两个根之间的第一次同步同步可能是一个非常漫长的过程。

# java - 加载图像的非法参数异常

> ID：15802234
> 
> 赞同：0
> 
> 时间：2013-04-04T03:57:14.707
> 
> 标签：java, illegalargumentexception, image-loading

我目前正在编写游戏并尝试从`ImageLoader`类中加载和图像，但我一直收到此错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: input == null!
at javax.imageio.ImageIO.read(ImageIO.java:1338)
at game.ImageLoader.getImage(ImageLoader.java:24)
at game.TestPanel.<init>(TestPanel.java:38)
at game.TestApplication.main(TestApplication.java:26) 
```

这是调用该类的类的代码`ImageLoader`，但我的 catch 块上也收到错误：

```
 public TestPanel ()
        {
        try
        {
            ClassLoader myLoader = this.getClass().getClassLoader();
            ImageLoader loader = new ImageLoader();
            backdrop = loader.getImage("resources/Asteroid.jpg");
            ImageLoader test = new ImageLoader();
            ship = test.getImage("resources/Alien-Ship.png");
            InputStream pointStream = myLoader.getResourceAsStream("resources/path_1.txt");
            Scanner s = new Scanner (pointStream);
            objectPath = new PathPoints(s);
            squid = objectPath.getStart();

        }
        catch (IOException e)
        {
            System.out.println ("Could not load: " + e);
        }
        addMouseListener(this);
    } 
```

这是我的`ImageLoader`课程的代码：

```
 import java.awt.Image;
    import java.io.IOException;
    import java.io.InputStream;
    import java.util.Scanner;

    import javax.imageio.ImageIO;

    public class ImageLoader {

    public Image loadedImage;

        public ImageLoader(){

        }

        public Image getImage(String s){
        try
                {
                    ClassLoader myLoader = this.getClass().getClassLoader();
                    InputStream imageStream = myLoader.getResourceAsStream(s);
                    loadedImage = ImageIO.read(imageStream);
                }
                catch (IOException e)
                {
                    System.out.println ("Could not load: " + e);
                }

                return loadedImage;
         }

        } 
```

为什么它会抛出 null！，我试图改变 to 的路径，`resources/Asteroid.jpg`但`/resources/Asteroid.jpg`它什么也没改变。

编辑：`resources`与我的类路径有关，因为它是我存储图像和点资源的包。

# web-services - 找不到我在 OpenShift 上部署的 Axis2 Web 服务

> ID：15802235
> 
> 赞同：0
> 
> 时间：2013-04-04T03:57:16.903
> 
> 标签：web-services, jakarta-ee, tomcat7, axis2, openshift

`Apache Axis2`我部署了一个使用on开发的 Web 服务`Openshift`。当我尝试访问 axis2`index.jsp`时，我可以看到仅包含默认版本的索引页面。

**问：** 如何显示我创建的其他 Web 服务的 Web 服务，因为我可以通过 Eclipse 中的浏览器在我的本地主机上查看它们？

我在网上做了一些搜索，并看到了一些关于对`axis2.xml`. 在这方面，我尝试更改 contextRoot 参数和 servicePath 但没有成功，尽管我不太确定是否进行了正确的更改。

我在 Eclipse 中的项目结构如下图所示：

```
SieveService
+...
+Java Resources
++src
+++Model
++++some model classes
+++Services
++++SieveServiceService.java
++Libraries
+...
+WebContent
++axis2-web
+++... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-04T17:30:45.420

我遇到了同样的问题，这是因为 openshift 的 tomcat 服务器仅以 aar 格式部署服务，同时在 localhost 中也部署了 aar 和爆炸文件。

您需要使用您的服务创建一个 aar 文件并将其放入您的 WebContent/WEB-INF/services/ 目录中。您还需要使用服务名称更新 services.list 文件。

之后，您必须在您的 openshift 服务器中看到您的服务。

# python - Python 中的 HTML 电子邮件

> ID：15802238
> 
> 赞同：1
> 
> 时间：2013-04-04T03:57:28.583
> 
> 标签：python, smtplib

我正在尝试使用 smtplib 发送 HTML 电子邮件。但我需要 HTML 内容有一个使用字典中的值填充的表。我确实看过[Python](http://docs.python.org/2/library/email-examples.html)网站上的示例。但它没有解释如何在 HTML 中嵌入 Python 代码。任何解决方案/建议？

我也看了[这个](https://stackoverflow.com/questions/13208212/python-variable-in-an-html-email-in-python?rq=1)问题。我可以这样格式化吗？

.format(dict_name)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:08:33.600

从您的[链接](http://docs.python.org/2/library/email-examples.html)：

> 以下是如何使用替代纯文本版本创建 HTML 消息的示例：[2](https://docs.python.org/3/library/email.examples.html)

```
import smtplib

from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

# me == my email address
# you == recipient's email address
me = "my@email.com"
you = "your@email.com"

# Create message container - the correct MIME type is multipart/alternative.
msg = MIMEMultipart('alternative')
msg['Subject'] = "Link"
msg['From'] = me
msg['To'] = you

# Create the body of the message (a plain-text and an HTML version).
text = "Hi!\nHow are you?\nHere is the link you wanted:\nhttp://www.python.org"
html = """\
<html>
  <head></head>
  <body>
    <p>Hi!<br>
       How are you?<br>
       Here is the <a href="http://www.python.org">link</a> you wanted.
    </p>
  </body>
</html>
""" 
```

以及它的发送部分：

```
# Record the MIME types of both parts - text/plain and text/html.
part1 = MIMEText(text, 'plain')
part2 = MIMEText(html, 'html')

# Attach parts into message container.
# According to RFC 2046, the last part of a multipart message, in this case
# the HTML message, is best and preferred.
msg.attach(part1)
msg.attach(part2)

# Send the message via local SMTP server.
s = smtplib.SMTP('localhost')
# sendmail function takes 3 arguments: sender's address, recipient's address
# and message to send - here it is sent as one string.
s.sendmail(me, you, msg.as_string())
s.quit() 
```

2022 年编辑：对于新人，请参考 python 最新的稳定版本[文档](https://docs.python.org/3/library/email.examples.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:08:57.273

您需要的是模板引擎。也就是说，您需要一个python 库来读取用HTML 和代码编写的文件，解释编写在HTML 文件中的代码（例如，从字典中检索值的代码），然后为您生成一个HTML 文件。

[python wiki似乎有一些建议](http://wiki.python.org/moin/Templating)

# actionscript-3 - As3 - 脚本在根时间轴上工作，但不在 MovieClip 内

> ID：15802243
> 
> 赞同：0
> 
> 时间：2013-04-04T03:58:11.657
> 
> 标签：actionscript-3

请帮我检查这段代码：

```
function btntxt(target:String, txt:String):void
{
    var button:MovieClip = MovieClip(this.getChildByName(target));
**  var btnText:TLFTextField = TLFTextField(button.getChildByName("btnText"));
    btnText.text = txt;
    button.gotoAndStop(1);
    button.buttonMode = true;
    button.useHandCursor = true;
    button.addEventListener(MouseEvent.MOUSE_OVER,overListener);
    button.addEventListener(MouseEvent.MOUSE_OUT,outListener);
    button.addEventListener(MouseEvent.MOUSE_DOWN,clickListener);
    button.addEventListener(MouseEvent.MOUSE_UP,upListener);
} 
```

当我调试时，它在**处给了我错误：

1046：类型未找到或不是编译时常量：TLFTextField。

1180：调用可能未定义的方法 TLFTextField。

还输出错误 1065。此代码在顶层有效，但是当我将其复制到 Movieclip 的时间轴内时，它不起作用！为什么？

如果此信息很短，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:31:13.277

在代码顶部添加 import 语句：

```
import fl.text.TLFTextField; 
```

# android - FLAG_ACTIVITY_CLEAR_TOP 中的错误

> ID：15802248
> 
> 赞同：0
> 
> 时间：2013-04-04T03:58:31.447
> 
> 标签：android

我有一个 5 活动

1 >> 2 >> 3 >> 4 >> 5

排名第一的活动是第一堂课。

数字 2 是我的列表数据类

数字 3 和 4 是我的输入数据类

5号是完成课

在活动编号 5 中，我将代码放入按钮以在完成后返回上一个

我有两个按钮返回上一个活动。

1.  回到活动编号 2
2.  回到活动编号 1

这是第 5 项活动的按钮

1）。

```
Intent intent = new Intent(getApplicationContext(), 2.class);
                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
                startActivity(intent); 
```

2）。

```
Intent dashboard = new Intent(getApplicationContext(), 1.class);
                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(dashboard); 
```

**编辑**

**一个**。当我选择按钮编号**2)。**在第一个构建应用程序中，我单击并返回到第 1 个活动。当我点击后退按钮时，该活动不再显示 5 号活动并且它可以工作。

场景**a** : 1 >> 2>> 3 >> 4 >> 5 >> 1 >> 退出应用程序

**乙**。当我选择按钮编号**2)。**在第一个构建应用程序中，我尝试再次输入数据，最后在 5 号活动中，我选择了**1 号按钮）。**我单击并返回到第 2 项活动。当我点击后退按钮时，该活动不再显示 5 号活动并且它可以工作。

场景**b**： 1 >> 2 >> 3 >> 4 >> 5 >> 1 >> 2 >> 3 >> 4 >> 5 >> 2 >> 点击返回按钮 >> 1 >> 点击返回按钮 >> 退出应用程序

**丙**。但是当我选择按钮编号**1)。**在第一个构建应用程序中。我单击并返回到第 2 项活动。当我点击后退按钮时，它会再次显示上一个活动或活动编号 5。

场景**c** : 1 >> 2 >> 3 >> 4 >> 5 >> 2 >> 点击后退按钮 >> 5

**d** . 我想要我的按钮编号**1)。**当我在我的第一个构建应用程序中点击后退按钮时不显示上一个或活动号 5，或者如果没有我选择按钮号**2，则不显示最后一个活动）。**第一的。

方案**d**：1 >> 2 >> 3 >> 4 >> 5 >> 2 >> 点击返回按钮 >> 1 >> 退出应用

如何解决？

从昨天到现在的问题

对不起，我的英语不好。

**编辑**

在我的清单中我声明

1 号活动是 MainMenu.class 。

```
<activity
            android:name="hariff.ltis.mainmenu.MainMenu"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

2 号是 MainPetakTetap.class

```
<activity
            android:name="hariff.ltis.petaktetap.MainPetakTetap"
            android:label="@string/title_activity_main_petak_tetap" >
        </activity> 
```

活动编号 3、4、5

```
<activity
            android:name="hariff.ltis.petaktetap.MainUpdate"
            android:label="@string/title_activity_main_petak_tetap" >
        </activity>

<activity
            android:name="hariff.ltis.petaktetap.UpdateLog"
            android:label="@string/title_activity_main_petak_tetap" >
        </activity>

<activity
            android:name="hariff.ltis.petaktetap.CPetakTempView"
            android:label="@string/title_activity_main_petak_tetap" >
        </activity> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T07:28:55.970

在我看来，系统杀死活动 2，因此 2 不再在堆栈中，因此它现在被重新创建并在 5 之上。因此，当你按下你将得到 5。一个解决方法（我不确定它会工作）如下

1.  当从活动 3 开始活动 4 和从 4 开始活动 5 时，使用 startActivityForResult。

2.  在活动 4

    ```
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
        super.onActivityResult(requestCode, resultCode, intent);

        if (resultCode == RESULT_OK)
        {
             setResult(RESULT_OK);
             finish();
        }
    } 
    ```

3.  在活动 3

    ```
    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent intent)
    {
        super.onActivityResult(requestCode, resultCode, intent);

        if (resultCode == RESULT_OK)
        {
             new Intent(getApplicationContext(), 2.class);
            intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
            startActivity(intent);
             finish();
        }
    } 
    ```

4.  在活动 5

    ```
    setResult(RESULT_OK);
    finish(); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:09:41.547

如果您要从任何活动返回到上次活动。

请使用`finish()`而不是创建新的`Intent`

在您的代码中，您正在为已经存在的活动创建新的 Intent。`1.class`这是错误的

```
Intent dashboard = new Intent(getApplicationContext(), 1.class);
                dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(dashboard); 
```

单击按钮执行此操作

`finish();`//这将完成您当前在堆栈中的活动。

并尝试使用`this`或`current activity name instead of`getApplicationContext()`。

**更新：** 如果您想参加任何活动，只需使用`StartActivityForResult()`

# javascript - CORS 根本不工作

> ID：15802249
> 
> 赞同：0
> 
> 时间：2013-04-04T03:58:41.933
> 
> 标签：javascript, soundcloud

SDK 演示工作正常（它不需要特殊的 CORS 东西，因为它在同一个域上）

当我尝试从 localhost:8080 发送请求时，会发生这种情况

![这个](https://i.imgur.com/Ff55vrz.png)

所以我试图请求 api.soundcloud.com/tracks - 首先我的浏览器向 api.soundcloud.com 发送一个 OPTIONS req 询问是否可以调用跨域。api.soundcloud.com 不会返回我的浏览器正在寻找的标头，因此我的浏览器会引发错误并且无法发出请求。

我是唯一一个尝试使用来自另一个域的 API 的人，还是这里出了问题？

编辑：在 Wireshark 中进行调试 - 在浏览器中使用 SDK 进行 API 调用时，甚至不会发送 OPTIONS 请求。跆拳道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:14:14.183

这是一个来自 jsbin.com 的请求[的工作示例：](http://jsbin.com/arayag/1/edit)

```
var request = new XMLHttpRequest();

request.onreadystatechange = function () {
  if (request.readyState === 4 && request.status === 200) {
    console.log(request.responseText);
  }
};
request.open('GET', 'http://api.soundcloud.com/tracks?client_id=YOUR_CLIENT_ID');
request.send(); 
```

# jquery - 为什么 jquery 的 on() 只工作一次？

> ID：15802250
> 
> 赞同：2
> 
> 时间：2013-04-04T03:58:50.860
> 
> 标签：jquery, jquery-on

我有一个只工作一次的简单脚本。如果我单击表格行内的任何位置，我的脚本将选中一个复选框。但是，如果我在该行内单击第二次、第三次等时间，则它不再起作用。为什么？我现在使用 jquery 1.9.1。当我使用 jquery 1.8`live()`而不是`on()`.

HTML：

```
<tr class="row">
    <td><input type="checkbox"></td>
</tr> 
```

jQuery：

```
$(document).ready(function(){
    $("body").on("click",".row",function(){
        var loc = $(this).find('input');
        var ischecked = loc.attr("checked");
        if(ischecked) {
            loc.attr("checked", false);
        } else {
            loc.attr("checked", true);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:07:23.597

您需要将 attr 替换为 prop 如下

```
$(document).ready(function(){
    $("body").on("click",".row",function(){
        var loc = $(this).find('input');
        var ischecked = loc.attr("checked");
        if(ischecked) {
            loc.prop("checked", false);
        } else {
            loc.prop("checked", true);
        }
    });
}); 
```

[jsfiddler](http://jsfiddle.net/uUmPX/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:03:23.097

当`checked`属性存在于 中时`<input />`，不要管它的值，它会被选中。所以替换以下内容：

```
loc.attr("checked", false); 
```

和：

```
loc.prop("checked", false); 
```

或者，您可以通过以下方式在一行代码中执行此操作：

```
loc.prop("checked", !loc.prop("checked")); 
```

# django - 如何在表单中使用模型中声明的choiceField。django

> ID：15802254
> 
> 赞同：7
> 
> 时间：2013-04-04T03:59:09.923
> 
> 标签：django, django-models, django-forms, choicefield

我有这个在我的`model.py`

```
class marca(models.Model):
    marcas = (
        ('chevrolet', 'Chevrolet'),
        ('mazda', 'Mazda'),
        ('nissan', 'Nissan'),
        ('toyota', 'Toyota'),
        ('mitsubishi', 'Mitsubishi'),
    )

    marca = models.CharField(max_length=2, choices= marcas)
    def __unicode__(self):
        return self.marca 
```

我需要在我的`form.py` 尝试中使用它，但它不起作用。

```
class addVehiculoForm(forms.Form):
    placa                   = forms.CharField(widget = forms.TextInput())
    tipo                    = forms.CharField(max_length=2, widget=forms.Select(choices= tipos_vehiculo))
    marca                   = forms.CharField(max_length=2, widget=forms.Select(choices= marcas)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T04:08:16.170

将您的选择移到模型上方，在您的根目录中`models.py`：

```
marcas = (
        ('chevrolet', 'Chevrolet'),
        ('mazda', 'Mazda'),
        ('nissan', 'Nissan'),
        ('toyota', 'Toyota'),
        ('mitsubishi', 'Mitsubishi'),)

class Marca(models.Model):

    marca = models.CharField(max_length=25,choices=marcas) 
```

然后在您声明表单的文件中：

```
from yourapp.models import marcas

class VehiculoForm(forms.Form):

     marca = forms.ChoiceField(choices=marcas) 
```

我还为您解决了一些其他问题：

*   类名应以大写字母开头
*   您需要增加您的字符字段，因为您在任何时候有人会在选择下拉列表中选择时`max_length`存储单词。`chevrolet``Chevrolet`

如果您只是创建一个表单来保存`Marca`模型的记录，请使用 a [`ModelForm`](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform)，如下所示：

```
from yourapp.models import Marca

class VehiculoForm(forms.ModelForm):
     class Meta:
         model = Marca 
```

现在，django 将自动呈现选择字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T04:03:13.387

您需要在`marcas`模型类之外定义选择元组`class marca`。

然后您可以在 forms.py 中执行以下操作以使用

```
from models import marcas

class addVehiculoForm(forms.Form):
    marca  = forms.CharField(max_length=2, widget=forms.Select(choices= marcas))
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-03T12:34:30.367

我更喜欢在模型中保留选择，因此它们不会与其他模型混合。那么解决方案是：

模型.py：

```
Same as in question. 
```

表格.py：

```
from yourapp.models import marca

class VehiculoForm(forms.Form):
     marca = forms.ChoiceField(choices=marca.marcas)

     class Meta:
         model = marca
         fields= ('marca') 
```

如果您想要默认模型字段，您也可以只定义元。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-19T07:34:42.797

如果选择（元组）像这样初始化为私有属性，还有另一种方法可以做到这一点

模型.py

```
class Marca(models.Model):
    __marcas = (                          #private attributes
          ('chevrolet', 'Chevrolet'),
          ('mazda', 'Mazda'),
          ('nissan', 'Nissan'),
          ('toyota', 'Toyota'),
          ('mitsubishi', 'Mitsubishi'),
    )

    marca = models.CharField(max_length=100, choices= __marcas)
    def __unicode__(self):
        return self.marca 
```

表格.py

```
from yourapp.models import Marca        #import model instead of constant

class VehiculoForm(forms.Form):
    marca = forms.ChoiceField(choices= Marca._meta.get_field('marca').choices)

    #If you want to get the default model field
    #or just straight get the base field (not prefer solution)
    marca = Marca._meta.get_field('marca')

    #or define in class Meta (prefer and better solution)
    class Meta:
        model = Marca
        fields = ('marca',) 
```

# .htaccess - 如何重定向不存在的子域？

> ID：15802257
> 
> 赞同：6
> 
> 时间：2013-04-04T03:59:28.903
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite, subdomain

我正在尝试以以下方式使用 .htaccess 进行重定向。我对.htaccess 不是很熟悉，所以我不确定它是否可以完成。另外，我不知道我打算如何遵循 SEO 的最佳实践。

```
www.domain.com                > domain.com 301

ks.domain.com                 > kansas.domain.com 301

ia.domain.com                 > iowa.domain.com 301

domain.com/sites              > domain.com 301

domain.com/sites/iowa         > iowa.domain.com 301

nonexistent.domain.com        > domain.com 302

domain.com/sites/nonexistent  > domain.com 302 
```

我最大的问题是我是否可以检测到不存在的子域并重定向。我很想看看以上所有这些是如何完成的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T05:25:18.953

首先，您需要通过创建一个`*`名称为 an 的子域来添加通配符子域，前提是您的虚拟主机允许您这样做。这必须在你的`.htaccess`，尝试测试它是否有效：

```
Options +FollowSymlinks
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www\.domain\.com
RewriteRule ^(.*)$ http://domain.com/$1 [R=301]

RewriteCond %{HTTP_HOST} ^ks\.domain\.com
RewriteRule ^(.*)$ http://kansas.domain.com/$1 [R=301]

RewriteCond %{HTTP_HOST} ^ia\.domain\.com
RewriteRule ^(.*)$ http://iowa.domain.com/$1 [R=301]

RewriteCond %{HTTP_HOST} ^domain\.com
RewriteCond %{REQUEST_URI} ^/sites/?$
RewriteRule ^(.*) / [R=301]

RewriteCond %{HTTP_HOST} ^domain\.com
RewriteCond %{REQUEST_URI} ^/sites/iowa/?$
RewriteRule ^(.*) http://iowa.domain.com/ [R=301]

RewriteCond %{HTTP_HOST} ([a-z0-9-]+)\.domain\.com$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*) http://domain.com/ [R=302]

RewriteCond %{HTTP_HOST} ^domain\.com
RewriteCond %{REQUEST_URI} ^/sites/([a-z0-9-_]+)/?
RewriteCond %{REQUEST_FILENAME} !-s
RewriteRule ^(.*) http://domain.com/ [R=302] 
```

仅用于`-f`测试请求的文件是否存在并且是常规文件，`-s`是否存在并且文件大小大于 0 并`-d`测试它是否存在并且是目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-17T00:05:35.223

如果您想要不存在的特定子域，那么您只需创建它们，然后重定向。

要捕获所有错误的子域，比如我不小心输入`metaa.stackoverlow.com`了 ，请使用通配符：`*.stackoverflow.com`。在 cpanel 中，这仅涉及勾选询问“制作通配符？”的复选框。或类似的。要直接编辑 .htaccess，只需输入`*`每个特定子域的位置。

请注意，这也适用于任何目录：

`subdomain.site.com/*`

`*.site.com/dir`

`*.site.com/*`

# debugging - Windbg _imp__xxx 符号的地址似乎使用数据段寄存器取消引用

> ID：15802259
> 
> 赞同：2
> 
> 时间：2013-04-04T03:59:43.877
> 
> 标签：debugging, assembly, linker, windbg, cpu-registers

我正在学习Windbg。为了练习，我正在调试一个创建进程的 64 位 fre 应用程序。我在 CreateProcess (bp KERNEL32!CreateProcessWStub) 上添加了一个断点，当断点被命中时，我反汇编代码 (u)，它看起来像这样：

```
Breakpoint 0 hit
KERNEL32!CreateProcessWStub:
000007f9`f8024ab4 4c8bdc          mov     r11,rsp
0:000> u @rip L20
KERNEL32!CreateProcessWStub:
000007f9`f8024ab4 4c8bdc          mov     r11,rsp
000007f9`f8024ab7 4883ec58        sub     rsp,58h
000007f9`f8024abb 488b8424a8000000 mov     rax,qword ptr [rsp+0A8h]
000007f9`f8024ac3 498943f0        mov     qword ptr [r11-10h],rax
000007f9`f8024ac7 488b8424a0000000 mov     rax,qword ptr [rsp+0A0h]
000007f9`f8024acf 498943e8        mov     qword ptr [r11-18h],rax
000007f9`f8024ad3 488b842498000000 mov     rax,qword ptr [rsp+98h]
000007f9`f8024adb 498943e0        mov     qword ptr [r11-20h],rax
000007f9`f8024adf 488b842490000000 mov     rax,qword ptr [rsp+90h]
000007f9`f8024ae7 498943d8        mov     qword ptr [r11-28h],rax
000007f9`f8024aeb 8b842488000000  mov     eax,dword ptr [rsp+88h]
000007f9`f8024af2 89442428        mov     dword ptr [rsp+28h],eax
000007f9`f8024af6 8b842480000000  mov     eax,dword ptr [rsp+80h]
000007f9`f8024afd 89442420        mov     dword ptr [rsp+20h],eax
000007f9`f8024b01 ff1591951100    call    qword ptr [KERNEL32!_imp_CreateProcessW (000007f9`f813e098)]
000007f9`f8024b07 4883c458        add     rsp,58h 
```

对 _imp_CreateProcessW 的调用具有误导性，因为当我追踪 (t) 到我在那个调用中的正确位置时，这就是我所看到的

```
KERNEL32!CreateProcessWStub+0x4d:
000007f9`f8024b01 ff1591951100    call    qword ptr [KERNEL32!_imp_CreateProcessW (000007f9`f813e098)] ds:000007f9`f813e098={KERNELBASE!CreateProcessW (000007f9`f7578960)} 
```

所以看起来 _imp_CreateProcessW 地址是一个相对地址（由链接器留下？）。并且数据段寄存器（ds）以某种方式用于解析最终地址（在这种情况下，KERNELBASE！CreateProcessW（000007f9`f7578960））但这没有意义，因为我读到现代架构中不使用段（除了保存 TCB 地址的 fs 和 gs 寄存器）

我的问题是：

*   那里发生了什么事？

*   为什么在 kernel32.dll 中不存在 CreateProcessW（只有存根存在）。MSDN 说 CreateProcess 在 kernel32.dll

*   *以imp*开头的符号背后的故事是什么。它们是链接器工件吗？

谢谢！！！

注意：我在开始时运行 .symfix 和 .reload。那时寄存器的值（就在调用之前）：

```
0:000> r
rax=0000000000000000 rbx=0000000000000048 rcx=0000000000000000
rdx=0000000000535138 rsi=0000000000000000 rdi=0000000000000000
rip=000007f9f8024b01 rsp=00000000004df550 rbp=0000000000000000
 r8=0000000000000000  r9=0000000000000000 r10=0000000000000000
r11=00000000004df5a8 r12=0000000000000000 r13=000007f7abfb1258
r14=0000000000000000 r15=0000000000000000
iopl=0         nv up ei pl nz na po nc
cs=0033  ss=002b  ds=002b  es=002b  fs=0053  gs=002b             efl=00000206 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-14T21:13:53.500

引入了 IIRC __imp_ 和存根来处理 SxS。您会注意到大多数（如果不是全部） kernel32 和 kernelbase 调用最终都会调用 __imp_。如果关于存根，一个简单的例子是

```
IsDebuggerPresent() 
```

对此执行**GetProcAddress**将返回 IsDebuggerPresentStub 的地址，该地址**将**跳转到**IsDebuggerPresent**，而 IsDebuggerPresent 又将跳转到：

```
_imp__IsDebuggerPresent 
```

本质上，你是对的。_imp__XXX 有点像 VFT。

# vb.net-2010 - VB.Net 2010 / SQL Server 2012 - 使用 hierarchyid 数据填充 Treeview (Winforms)

> ID：15802264
> 
> 赞同：1
> 
> 时间：2013-04-04T04:00:14.017
> 
> 标签：vb.net-2010, hierarchical-data

我正在寻找一种灵活的方法来使用 SQL Server 2012 数据库中的数据填充 WinForms 应用程序中的树视图。这是数据的结构：

```
CREATE TABLE [dbo].[tblCommodity](
    [CommodityNode] [hierarchyid] NOT NULL,
    [CommodityLevel]  AS ([CommodityNode].[GetLevel]()),
    [CommodityID] [int] IDENTITY(1,1) NOT NULL,
    [CommodityName] [nvarchar](50) NULL,
    [CommodityDesc] [nvarchar](300) NULL,
    [DTCreated] [datetime] NULL,
    [DTUpdated] [datetime] NULL,
    [CreatedBy] [tinyint] NULL,
    [UpdatedBy] [tinyint] NULL,
    [RecStatus] [bit] NULL) 
```

层次结构级别的数量是无限的，因此例程需要足够灵活以处理多个级别。

我看过其他一些例子（都是 C#），但我似乎无法理解正在发生的事情。有没有一种简单的方法来读取hierarchyid数据并直接从中创建树？

# google-api - 从 Google 通讯录中获取 Google+ ID

> ID：15802267
> 
> 赞同：1
> 
> 时间：2013-04-04T04:00:25.733
> 
> 标签：google-api, google-plus, google-contacts-api

我正在使用 Google Contacts API 提取用户的联系人电子邮件地址和姓名。有没有办法获取这些人的 Google+ ID？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T04:55:27.163

`profile`如果 G+ 个人资料与联系人条目相关联，则联系人 API 将返回一个链接。

这是一个例子：

```
<gContact:website href='http://www.google.com/profiles/1234567890' rel='profile'/> 
```

在该元素的`href`属性中，是与来自Google+ People API的相关[人员资源](https://developers.google.com/+/api/latest/people)`1234567890`的字段相匹配的人员标识符。`id``people.list`

请注意，`profile`不保证链接会返回联系人条目。当联系人未链接到 Google+ 个人资料时，会发生这种情况。

# c# - 如何在不使用 Reverse() 方法的情况下使用 foreach 反转数组

> ID：15802268
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:00:40.240
> 
> 标签：c#, arrays, foreach, reverse

这是我的 C# 课程的额外学分作业。使用该方法很容易反转数组，但我非常困惑如何在不使用它的情况下进行反转。任何提示或帮助将不胜感激。

```
namespace Reverse4Loop 
{
    class Program
    {
        static void Main()
        {
        int[] array = { 1, 2, 3, 4 };
        foreach (int value in array)
        {
            Console.WriteLine(value);
        }
        Console.WriteLine();

        Array.Reverse(array);
        foreach (int value in array)
        {
            Console.WriteLine(value);
        }
        Console.WriteLine();
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:18:50.307

这是一个使用`foreach`和时间的解决方案`List<int>`：

```
int[] array = { 1, 2, 3, 4 };
List<int> aux = new List<int>();
foreach (int i in array)
    aux.Insert(0, i);
int[] reversed = aux.ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:32:04.910

提供额外的学分以帮助激励您学习。请尝试从这个答案中学习，不要只是复制/粘贴它。

LINQ 的强大功能之一是它的排序能力：升序和降序。如果上升意味着向上（即向前），那么下降可以说是反向。

使用 LINQ，您可以按升序写出数组：

```
foreach (var value in array.OrderBy(a => a))
    Console.WriteLine(value); 
```

现在，在将鼠标悬停在下面的答案上以了解如何反向执行之前，请在 Visual Studio 中使用智能感知，或使用谷歌*LINQ 降序*并确定要替换`OrderBy`的方法，以降序写出数组：

**回答**

> foreach（数组中的var值。OrderByDescending（a => a））
> Console.WriteLine（值）；

*将鼠标悬停在上面的框上以显示解决方案*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-04T04:07:56.047

检查这是否适合您:) 这是典型的方法。但是，给予额外学分的期望是什么？

```
static void Main(string[] args)
{
    int[] array = { 1, 2, 3, 4 };
    int length = array.Count();
    for (int i = 0; i < length / 2; i++)
    {
        int temp = array[i];
        array[i] = array[length - 1 - i];
        array[length - 1 - i] = temp;
    }
    foreach (int value in array)
    {
        Console.WriteLine(value);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T04:10:41.767

```
namespace Reverse4Loop 
{
    class Program
    {
        static void Main()
        {
        int[] array = { 1, 2, 3, 4 };
        foreach (int value in array)
        {
            Console.WriteLine(value);
        }
        Console.WriteLine();

        int arrayLength = array.Length;

        int[] array2 = new int[arrayLength];

        for(int i = 0; i < array.Length; i++)
        {
            array2[arrayLength - (i + 1)] = array[i];
        }

        Array.Copy(array2, array, arrayLength);

    }
} 
```

希望对你有帮助

# php - 如何在php中通过curl调用mongodb rest api？

> ID：15802270
> 
> 赞同：2
> 
> 时间：2013-04-04T04:01:02.233
> 
> 标签：php, curl, mlab

执行我的糟糕英语。

我是 mongolab 的新手。我想知道如何通过 php 中的 curl 调用 mongolad rest api。

我不想使用 mongodb 驱动程序。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:22:54.507

试试这个（用你的 api 密钥形式 MongoLab 替换 myApiKey）：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "https://api.mongolab.com/api/1/databases?apiKey=myAPIKey");
curl_setopt($ch, CURLOPT_USERAGENT, "MongolabBot/1.0");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch); 
```

# django - 从 django 模板下载 doc 文件

> ID：15802271
> 
> 赞同：0
> 
> 时间：2013-04-04T04:01:07.623
> 
> 标签：django, django-templates

我是 Django 新手，我正在尝试以 doc/txt/csv 文件格式下载字符串。

我无法找到如何做到这一点的逻辑。

Django Temple有一大串数据，我想点击下载..

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:01:59.607

我得到了解决方案。

我想用 Django 输出 excel，[这](http://reliablybroken.com/b/2009/09/outputting-excel-with-django/)就是我们的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:04:09.440

以下是如何输出 CSV 文档：[https ://docs.djangoproject.com/en/dev/howto/outputting-csv/](https://docs.djangoproject.com/en/dev/howto/outputting-csv/)

# c# - NTLM over HTTP：任何 C# 客户端实现？

> ID：15802272
> 
> 赞同：2
> 
> 时间：2013-04-04T04:01:14.043
> 
> 标签：c#, sharepoint, windows-authentication, ntlm

我需要以编程方式从[SharePoint](http://en.wikipedia.org/wiki/Microsoft_SharePoint)服务器下载文件。

当我用[Firefox](http://www.mozilla.org/en-US/firefox/)下载文件时，它看起来像一个请求，但[Httpfox](https://addons.mozilla.org/en-US/firefox/addon/httpfox/)显示 HTTPS 对话实际上是 4 个请求：

```
REQ1: GET https://mycorp.raxsp.com/_windows/default.aspx?ReturnUrl=/personal/mycorp_user1/_vti_bin/cmis/rest?getRepositories
RESP1: 401 Unauthorized, WWW-Authenticate NTLM

REQ2: Authorization NTLM TlRMTVNTUAABAAAAB4IIAAAAAAAAAAAAAAAAAAAAAAA=
RESP2: 401, WWW-Authenticate    NTLM TlRMTVNTUAACAAAACgAKADgAAAAFgokC+[...]

REQ3: Authorization NTLM TlRMTVNTUAADAAAAGAAYAIAAAAAYA[...]
RESP3: 302 Found, Set-Cookie FedAuth=77u/PD94bW[...], Location /personal/mycorp_user1/_vti_bin/cmis/rest?getRepositories

REQ4: GET /personal/mycorp_user1/_vti_bin/cmis/rest?getRepositories
RESP4: 200 OK, <download begins> 
```

我尝试使用带有用户/密码的简单[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)下载文件，但正如预期的那样，我只收到错误 401。我正在考虑实现整个 4 个请求，使用[NTLM over HTTP 身份验证算法](http://www.innovation.ch/personal/ronald/ntlm.html)（[规范](http://download.microsoft.com/download/a/e/6/ae6e4142-aa58-45c6-8dcf-a657e5900cd3/%5BMS-NTHT%5D.pdf)）计算挑战，但这听起来很容易出错...

是否有客户端库或代码片段执行 NTLM over HTTP 身份验证？
它是针对[开源项目的](http://cmissync.com)，所以必须是开源的，最好使用[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)。
不涉及 Kerberos/SSO/域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-03T19:57:34.983

我们一直使用此代码从 SharePoint 下载文件`System.Net.WebClient`

```
public static byte [] downloadSharepointFile (string url){
      using (var client = new WebClient { Credentials = new NetworkCredential("username", "password", "domain") })
          {
               client.Headers.Add("Accept: application/json");
               return client.DownloadData(url);
          }
} 
```

# r - 检查向量的哪些元素位于 R 中另一个向量的元素之间

> ID：15802278
> 
> 赞同：2
> 
> 时间：2013-04-04T04:01:29.450
> 
> 标签：r

我是 R 的新用户。如何检查向量的哪些元素位于向量`A`的元素之间`B`，例如：

```
 A = c(1.1, 3.2, 5, 8.5, 4.6, 2.2)
    B = c(1, 2, 3) 
```

表示 which elements of`A`介于 1 和 2 之间，那么 which elemets of`A`介于 2 和 3 之间？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:10:25.653

你想要一些变体`findInterval`

```
findInterval(A,B)
[1] 1 3 3 3 3 2 
```

值 1 表示它介于 1 和 2 之间（B 中的最低值和次低值） 值 2 表示它介于 2 和 3 之间

所以要找到介于两者之间的

```
which(findInterval(A,B) %in% seq_len(length(unique(B))-1))
# [1] 1 6 
```

并从中提取`A`

```
A[findInterval(A,B) %in% seq_len(length(unique(B))-1)]

# [1] 1.1 2.2 
```

您也可以使用`cut`，这将创建一个因素。

结合`split`这将给

```
 split(A, cut(A,B),drop=FALSE)
$`(1,2]`
[1] 1.1

$`(2,3]`
[1] 2.2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:10:52.173

如果我理解正确，这是一种可能性：

```
A = c(1.1, 3.2, 5, 8.5, 4.6, 2.2)
B = c(1, 2, 3,4,10)

B1 <- head(B, -1)
B2 <- tail(B, -1)

outs <- list()

for(i in seq_along(B1)) {
    outs[[i]] <- A[B1[i] < A & A < B2[i]]
}

names(outs) <- paste(B1, " & ", B2)

## > outs
## $`1  &  2`
## [1] 1.1
## 
## $`2  &  3`
## [1] 2.2
## 
## $`3  &  4`
## [1] 3.2
## 
## $`4  &  10`
## [1] 5.0 8.5 4.6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:27:29.423

我假设它将是 B 中的连续数字，您将对其进行检查

```
result.pair<-matrix(rep(integer(), 3), ncol = 3)
colnames(result.pair)<-c("B1", "A", "B2")
for(i in 1:(length(B)))
{
  for(j in 1:(length(A)))
  {
    if ((B[i] <= A[j])  & (B[i+1] >= A[j]))
    {
      result.pair<-rbind(result.pair, c(B[i], A[j], B[i+1]))
    }
  }

}

result.pair 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T06:01:53.327

试试这个：

```
 data.frame(A,cut(A,B)) 
```

对于 A 中的每个观察，它会告诉您它位于哪对 B 观察之间。

像这样：

```
> data.frame(A,cut(A,B))
    A cut.A..B.
1 1.1     (1,2]
2 3.2      <NA>
3 5.0      <NA>
4 8.5      <NA>
5 4.6      <NA>
6 2.2     (2,3] 
```

NA 表示它不在两个 B 观测值之间。

也试试：

```
data.frame(A,cut(A,c(-Inf,B,Inf))) 
```

# cordova - Phonegap 应用程序启动问题

> ID：15802280
> 
> 赞同：0
> 
> 时间：2013-04-04T04:01:47.540
> 
> 标签：cordova, cordova-2.0.0

我制作了一个简单的应用程序，其中有几个链接在一起的 html 页面，并构建了 android 应用程序。

现在，当我在 android 设备上安装我的应用程序时，会在启动屏幕之后显示一个黑屏，然后应用程序启动。

我尝试了所有我能在网上找到的东西。但没有解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:11:34.510

你是否包含了cordova.js？如果没有包含cordova.js，黑屏是正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:32:41.780

我遇到过同样的问题。我从下面的链接中得到了解决方案。

[关联](http://community.phonegap.com/nitobi/topics/app_dies_on_startup_connection_to_the_server_was_unsuccessful)

例如，我通过重命名`index.html`来解决它`main.html`，并创建一个`index.html`只需要重定向到`main.html`.

希望能帮助到你。

# ruby-on-rails - 使用 PostgreSQL 函数进行 ransack 搜索自定义

> ID：15802282
> 
> 赞同：1
> 
> 时间：2013-04-04T04:01:58.110
> 
> 标签：ruby-on-rails, ruby, search, rails-postgresql, ransack

我有一个 Order 模型和一个 Payments 模型。

订单有很多付款。

我正在使用 ransack 对订单模型进行搜索。我在搜索表单中有以下付款关联字段。

Payments_created_at_lteq payment_created_at_gteq

允许用户为该订单选择付款日期范围。

在这种情况下，由于有很多关系，我会在该付款日期范围内重复订单。

我想要的是在查询中使用一些像 string_agg() 这样的 PostgreSQL 函数，这样我就可以连接该订单的所有日期，这样订单就不会重复。我如何使用 ransack 做到这一点？有什么方法可以自定义 ransack 搜索或结果方法以使用该 PostgreSQL 功能。也欢迎任何其他想法。

问候，

# c# - 我们可以将 Odata 元数据转换为 C# 代码（datacontract）吗

> ID：15802285
> 
> 赞同：1
> 
> 时间：2013-04-04T04:02:14.200
> 
> 标签：c#, web-services, odata, datacontract

有一个 odata 网络服务，我可以从中获取元数据

```
http://service-uri.com/$metadata 
```

其中包含其所有模型对象的定义，

有没有我可以使用的工具，将元数据 xml 转换为 C# 中的数据合同类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:31:34.813

WCF 数据服务客户端库可以从 $metadata 端点为您生成 C# 类。这些类没有该`[DataContract]`属性，但您可以将它们与客户端库的其余部分一起使用以与服务交互。

要使用此功能，请下载客户端库的最新“工具”安装程序，目前可在此处获取：http: [//www.microsoft.com/en-us/download/details.aspx?id=35840](http://www.microsoft.com/en-us/download/details.aspx?id=35840)

（注意：如果您想要客户端库的最新稳定位，还可以从 Visual Studio 中的包管理器控制台窗口运行以下命令`Install-Package Microsoft.Data.Services.Client`：）

然后，在 Visual Studio 中，您可以右键单击您的项目，然后选择“添加服务引用”。在这里您可以输入服务的 $metadata URL，将生成相应的类，以及`DataServiceContext`可用于与服务交互的类。有关查询服务的更多信息，请参阅此文档：http: [//msdn.microsoft.com/en-us/library/dd673933.aspx](http://msdn.microsoft.com/en-us/library/dd673933.aspx)

或者，如果您想手动生成类，您可以使用`DataSvcUtil.exe`工具安装程序附带的命令行工具。例如，在我的系统上，该文件位于 `C:\Program Files (x86)\Microsoft WCF Data Services\Current\bin\tools\DataSvcUtil.exe`

有关如何使用此工具的说明，请查看此页面：http: [//msdn.microsoft.com/en-us/library/dd756369.aspx](http://msdn.microsoft.com/en-us/library/dd756369.aspx)

# jquery - Jquery ui 和 mootools 问题

> ID：15802286
> 
> 赞同：1
> 
> 时间：2013-04-04T04:02:14.670
> 
> 标签：jquery, jquery-ui

我在我的网页中使用了以下几行

```
<script src="http://www.google.com/jsapi" type="text/javascript"></script> 

<script type="text/javascript">
    google.load("jquery", "1.4.2");
    google.load("jqueryui", "1.7.2");
</script>

<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/mootools/1.3.2/mootools-yui-compressed.js'></script> 
```

从以上几行来看，如果我放置了最后一个脚本行，我的 mootools 将无法正常工作。

如果放置上述行，我该如何实现？

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:03:20.853

看一眼`jQuery.noCoflict();`

### **[`Official Document`](http://api.jquery.com/jQuery.noConflict/)**

> 许多 JavaScript 库都使用`$`函数或变量名，就像这样`jQuery`做一样。In `jQuery's`case,`$`只是 的别名`jQuery`，因此所有功能都可以在不使用`$`. 如果您需要同时使用另一个 JavaScript 库`jQuery`，请通过调用 将控制权`$`返回给另一个库`$.noConflict()`。的旧引用在初始化`$`期间被保存；只是恢复它们。`jQuery``noConflict()`

# java - java，从超类初始化子类

> ID：15802290
> 
> 赞同：12
> 
> 时间：2013-04-04T04:02:30.907
> 
> 标签：java, initialization, subclass, superclass, extends

```
public class Base {
  //long list of attributes
  // no Constructor using fields
  // no init methode 
  // i cannot change this class
} 
```

现在我扩展了基类，如：

```
public class subClass extends Base{
   private boolean selected;

   ...
   getter und setter
   ...
} 
```

我成为基础对象的列表`List<Base>`

但我需要相同的列表，但`List<SubClass>` 有没有办法从基类初始化子类？

例子：

```
for(Base b: list){
   SubClass sub = (SubClass)b; // Thats wrong i know
   if(...){
       sub.setSelected(true);
   }
   newList.add(sub);
} 
```

我尽量避免将 Base 的每个 Attribute 手动初始化`Class`到 SubClass

我按照评论中的要求更新了我的问题：上面的设计只是一个例子。我的 QUESTIN 正是：

为什么将 BaseClass 转换为 SubClass (sence `Subclass extends BaseClass`) 是不可能的？为什么 Java 不允许我执行以下操作：

例子：

```
Class Base{
   private String name;
.....
}
Class SubClass extends Base{
   private String title;
} 
```

然后

```
Base b = DBController.getById(...);
SubClass sub = (SubClass)b; 
```

之后，该对象`sub`应具有该对象的属性名称，`b` 并且该`title`属性为空

为什么在java中不是这种情况？

对不起我的英语不好，谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T04:05:59.997

如果您有`List<Base>`，则无法将其转换为`List<SubClass>`。这主要是因为列表可能不包含`SubClass`. 你能做的最好的事情是：

```
List<SubClass> newList = new List<SubClass>();
for(Base b: list){
    if (b instanceof SubClass) {
        SubClass sub = (SubClass)b;
        . . .
        newList.add(sub);
    }
} 
```

然而，一般来说，当你发现自己在做这种事情时，你的设计就有问题了。您可能希望避免子类化`Base`并改为使用[组合](http://www.artima.com/designtechniques/compoinhP.html)。

**编辑**根据您的评论，听起来您想`SubClass`使用实例列表`Base`作为开始来构建实例列表。一种方法是定义一个`SubClass`以 a`Base`作为参数的构造函数。

```
public class SubClass extends Base{
    private boolean selected;

    public SubClass() {
        // default constructor
    }

    public SubClass(Base original) {
        // copy constructor -- initialize some fields from
        // values in original, others with default values
    }
    ...
    getter und setter
    ...
} 
```

然后您可以使用以下命令构建新列表：

```
List<SubClass> newList = new List<SubClass>();
for(Base b: list){
    SubClass sub = new SubClass(b);
    . . .
    newList.add(sub);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-23T09:48:20.050

有一种方法：基于各种 Java Bean 规范的操作。

例如：

[Commons BeanUtils](http://commons.apache.org/proper/commons-beanutils/api/index.html)

```
for( Base base: list ){
   SubClass sub = new SubClass();
   PropertyUtilsBean.copyProperties( sub, base );
   if(...){
       sub.setSelected(true);
   }
   newList.add(sub);
} 
```

这基于同名的 get/setter 工作。不复制内部字段。

如果您需要复制内部字段，实际上使用`javax.lang.reflect`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T04:55:05.940

您似乎有一个具有很多属性的类，并且没有简单的方法来设置它们。您现在遇到了一个问题，您需要一个具有附加属性的类，但您必须处理基类的混乱。

我建议，不要创建子类和强制转换，而是围绕丑陋的类创建一个包装类：

```
public class BigDumbClass {
    // A lot of attributes
    // No Constructor
    // No init method
}

public class Wrapper {
    private BigDumbClass base;
    private boolean selected;

    public Wrapper(BigDumbClass base) {
        this.base = base;
        this.selected = false;
    }

    //getters and setters
} 
```

现在，当您必须创建该新列表时，您可以将所有内容包装在旧列表中

```
List<BigDumbClass> oldList = someData();
List<Wrapper> wraps = aNewList();
for (BigDumbClass bigDumb : oldList) {
    Wrapper wrap = new Wrapper(bigDumb);
    if (someCondition()) {
        wrap.setSelected(true);
    }
    wraps.add(wrap);
} 
```

理想情况下，BigDumbClass 将实现 Wrapper 也可以实现的接口，允许包装器将所有调用推迟到它已包装的实例。

```
public class BigDumbClass implements SharedInterface {
    // All the stuff outlined above
}

public class Wrapper implements SharedInterface {
    // All the stuff outlined above

    // Methods defined in SharedInterface
    public void doSomething() {
        base.doSomething();
    }
} 
```

否则，您可以为实例提供一个 getter 并直接访问它。

```
BigDumbClass base = wrapper.getBase();
base.doSomething(); 
```

# php - php - 在while循环中使用变量变量

> ID：15802294
> 
> 赞同：1
> 
> 时间：2013-04-04T04:03:01.073
> 
> 标签：php, while-loop, variable-variables

我对变量变量有点困惑。

我喜欢做的是打印 $var1、$var2 和 $var3 的值：

```
$var1 = 'a';
$var2 = 'b';
$var3 = 'c';

$i = 1;

while ( $i <=3 ) {
    echo $var.$i;
    $i++;
} 
```

我知道**$var.$i;** 不正确，但我认为它表明了我想要实现的目标；while 循环应将其更改为 $var1、$var2 和 $var3；

我尝试了以下方法：

```
$var1 = 'a';
$var2 = 'b';
$var3 = 'c';

$i = 1;

while ( $i <=3 ) {

    $current_var = 'var'.$i;
    $current_var = $$current_var;

    echo $current_var;

    $i++;
} 
```

但这不起作用。我认为是因为 $var1、$var2 和 $var3 是在 while 循环中重新创建的，而不是使用实际值。不知道这是否正确，但这是我唯一能想到的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:06:02.333

试试这个：

```
echo ${"var".$i}; 
```

花括号可以解析为变量名，而无需使用美元-美元方法。

请参阅：[PHP 中的变量](http://www.php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:07:17.860

试试这个。

```
<?php
$var1 = 'a';
$var2 = 'b';
$var3 = 'c';

$i = 1;
while ( $i <=3 ) {

    echo ${'var'.$i};

    $i++;
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:17:59.790

您是否正在尝试做这样的事情。然后使用`array`

```
$my_data = array();
$my_data[1] = 'a';
$my_data[2] = 'b';
$my_data[3] = 'c';

// Method 1
$i = 1;
while ($i <= 3) {
  echo $my_data[$i];
  $i++;
}

// Method 2
foreach ($my_data as $data) {
  echo $data;
} 
```

// 输出

```
abc

abc 
```

# drop-down-menu - 随机选择下拉菜单图像

> ID：15802295
> 
> 赞同：1
> 
> 时间：2013-04-04T04:03:09.940
> 
> 标签：drop-down-menu, imacros

我试图弄清楚如何在 iMacros中随机化一个*下拉菜单。*

这是当前脚本。

```
TAG POS=1 TYPE=SELECT FORM=ACTION:/es/crear-tu-blog/ ATTR=NAME:domain CONTENT=$activos-blog.net 
```

*这个下拉菜单*有 30 个选项，我想让它选择一个随机选项。我怎样才能做到这一点？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:00:45.353

您可以像这样选择下拉菜单。

这是当前脚本。

```
TAG POS=1 TYPE=SELECT FORM=ACTION:/es/crear-tu-blog/ ATTR=NAME:domain CONTENT=#5 
```

在某些情况下，我看到了`%5`所以我不确定是它`%`还是`#`之前的数字。在这种情况下，数字 5 只是一个示例。

这是它在 iMacros 上所说的。

[http://wiki.imacros.net/TAG](http://wiki.imacros.net/TAG)

向下滚动到显示下拉菜单的位置。

下一步是使用 JavaScript 创建一个随机数。在下面的链接中，您可以获得用于该目的的功能。

[在特定范围内的 JavaScript 中生成随机整数？](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range)

在你掌握了这一点之后，下一步就是在 iMacros 中实现它。您必须使用 JavaScript 脚本。

```
var macro;

macro ="CODE:";
macro +="TAG POS=1 TYPE=SELECT FORM=ACTION:/es/crear-tu-blog/ ATTR=NAME:domain CONTENT=#{{number}}";

iimSet("number",some_random_number)
iimPlay(macro) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T10:31:59.857

你需要这样的东西：

```
SET !VAR1 EVAL("var randomDomain=Math.floor(Math.random()*30 + 1); randomDomain;")
TAG POS=1 TYPE=SELECT FORM=ACTION:/es/crear-tu-blog/ ATTR=NAME:domain CONTENT=%{{!VAR1}} 
```

其中 30 是下拉菜单中的元素数，% 表示我们正在按其值选择选项。

例如，我期望选项是：

```
<option value="12">activos-blog.net</option> 
```

如果值是一个字符串，那么你应该通过它的索引选择选项，使用#。

# javascript - HTML 4 不确定进度指示器

> ID：15802307
> 
> 赞同：1
> 
> 时间：2013-04-04T04:04:12.207
> 
> 标签：javascript, html, browser

我有一个带有我正在编写的 NPAPI 插件的基本 HTML 4 网页，它导致线程在后台运行并在几秒钟后通过 JavaScript 回调返回。
*不要让“插件”部分吓跑你——这是一个直截了当的 HTML/JavaScript 问题。*

如何在此过程中显示一个简单的不确定进度指示器？
***并且***
一旦我在回调中重新获得控制权，我该如何关闭所述进度对话框？

我希望这尽可能地减少这种情况。

* * *

**解决方案**：
*我使用了@Brian 和@taxilian 的建议。以下是我实现的最简单进度指示器的具体细节*。

1.  我找到了一个很好的动画“loading.gif”图像。正确的 Google 搜索提供了无数种选择，例如：![动画 Gif](https://i.stack.imgur.com/BD2fm.gif)
2.  将图像添加到您的 html `<body>`:
    `<img src="loading.gif" alt="Scanning..." id="loading_img" style="visibility:hidden;" />`。
3.  如下添加 JavaScript 函数`showLoading()`和`hideLoading()`你`<head>`的。
4.  从其他 JavaScript 函数中调用`showLoading()`和`hideLoading()`随意显示和/或隐藏动画 Gif 图像。

**`<head>`节中的 JavaScript**：

```
<script type="text/javascript">
    function showLoading()
    {
        if(document.getElementById) {
            (document.getElementById("loading_img")).style.visibility="visible";
        }
    }

    function hideLoading()
    {
        if(document.getElementById) {
            (document.getElementById("loading_img")).style.visibility="hidden";
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T14:41:16.107

正如上面的评论所建议的，最常见的方法是显示一个[动画 gif 加载指示器](https://www.google.com/search?q=loading%20indicator)，然后将其隐藏在回调中。

# javascript - 使用 javascript 验证动态数量的复选框

> ID：15802309
> 
> 赞同：0
> 
> 时间：2013-04-04T04:04:27.153
> 
> 标签：javascript

我有一些 ASP 代码，它在页面上显示从 1 到任意数量的复选框（名称相同）的任何位置。这个验证确实有效，但我认为它有点弱：

```
 if (document.getElementById('selectedDocs').checked)
   {
       //this is here to handle the situation where there is only one checkbox being displayed
   }
   else
  {
      var checked = false; 
  var field = myForm.selectedDocs; 
  for(var j = 0; j < field.length; j++)
  { 
     if(field[j].checked == true)
     { 
        checked = true; 
        break; 
     } 
  } 
  if(!checked)
  { 
     alert("You have not ticked any options.  At least one must be selected to proceed!") 
     return false; 
  }    
} 
```

我正在使用 else 块中的代码，但这仅在有多个复选框时才有效。它忽略了我在只有一个选项时勾选了一个选项的事实。所以我把代码放在了 if 部分......虽然它有点像黑客，但有人可以为我改进它吗？

感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:13:07.220

利用：

```
var field = myForm.getElementsByName('selectedDocs'); 
```

这总是返回一个可以迭代的 NodeList。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:24:42.560

如果它们在一个表单中并且都具有相同的名称，则可以将它们作为作为表单属性的集合来访问。所以给出：

```
<form id="f0" ...>
  <input type="checkbox" name="cb0" ...>
  <input type="checkbox" name="cb0" ...>
  <input type="checkbox" name="cb0" ...>
  ...
</form> 
```

以下所有内容都返回对表单的引用：

```
var form = document.getElementById('f0');

var form = document.forms['f0'];

var form = document.forms[0];  // if first form in document 
```

并且所有以下都返回名为“cb0”的复选框的集合：

```
var checkboxes = form.cb0

var checkboxes = form['cb0'];

var checkboxes = form.elements.['cb0']; 
```

# jvm - JVM 如何决定初始化类的顺序（调用 )?

> ID：15802312
> 
> 赞同：1
> 
> 时间：2013-04-04T04:04:47.720
> 
> 标签：jvm

据我所知，JVM在为A的clinit加载和生成代码时，如果遇到一个未解析的类B，编译器会首先向JVM内部发出一个方法调用来初始化B，然后正常编译B的方法调用/字段使用。所以在运行时，确保 B 在其字段或方法被使用之前被初始化。

如果我在上面犯了任何错误，请纠正我。

然后我不明白JVM如何处理像下面这样的情况。

```
public class A {
  public static A a = new A(B.b);
  public A(B b) {
    a = null;
  }

  public static void main(String[] args) {
    System.out.println(a == null);
  }
}

public class B {
  public static B b = new B(A.a);
  public B(A a) {}
} 
```

有人可以解释这两个类是如何初始化的，因为它们都需要先初始化另一部分吗？为什么A中的main方法返回false，因为静态字段a应该在A的构造函数中设置为null？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:50:33.313

第二个问题很简单；静态初始化的操作顺序`A`是：`B.b`被评估，`new A(B.b)`被评估（设置`a`为`null`），`a`被分配`new A(B.b)`。`A`如果创建了任何其他实例，`a`则为空。我认为如果没有关于类初始化的详细知识，这应该很容易看到。

第一个问题涉及更多一点。JLS 中的相关章节是[关于执行的第 12 章](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12)。基本思想是这样的：首先加载一个类，然后链接它，然后初始化它。作为链接的一部分，该类已准备好；这是创建其静态字段并将其设置为默认值的时间，即`null`用于引用（[JLS 12.3.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.3.2)）——这发生在初始化之前`static`。

所以事情按照这个顺序发生：`A`被加载和链接，所以`a`被初始化为`null`. 然后静态初始化程序运行，因此`new A(B.b)`需要评估。Now`B`被加载并链接，它的静态初始化程序运行，并被`new B(A.a)`评估，此时`a`是`null`并且没有什么特别的事情发生。然后`A`的构造函数运行并将新创建的对象分配给`a`.

# java - 布尔 if 语句

> ID：15802314
> 
> 赞同：2
> 
> 时间：2013-04-04T04:05:09.690
> 
> 标签：java, bluej

```
public class Health
{
    boolean dependency;
    String insuranceOwner = "";
    static final int basicHealthFee = 250;
    static final int healthDiscount = 20;

    public Health(boolean dependent, String insurance)  
    {  
        dependency = dependent;  
        insuranceOwner = insurance;  
    }

    public double computeCost()
    {
        double healthFee;
        if (dependency == true)
        {
            healthFee = basicHealthFee - (basicHealthFee * (healthDiscount/100.0));
        }
        else 
        {
            healthFee = basicHealthFee;
        }

        return healthFee;
    }
}

 Health h34 = new Health(true, "Jim");         
 System.out.println("discount price: " + h34.computeCost()); 
```

当我输入 true 作为构造函数的参数时，我的 computeCost 方法仍然运行该块，就好像依赖项 == false 一样。有什么理由吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:26:09.240

您正在成为整数除法的受害者。 `20/100 == 0`，乘以 0。要解决这个问题，请将您的`static final int`声明更改为双精度数。

```
static final double basicHealthFee = 250D;
static final double healthDiscount = 20D; 
```

这`D`定义了一个[双重文字](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-04T04:28:01.830

您需要将 basicHealthFee 和 healthDiscount 定义为`double`. 由于您已将它们定义为整数，因此您有等式： `healthFee = basicHealthFee - (basicHealthFee * (healthDiscount/100));`which 变为`basicHealthFee - ( basicHealthFee * (20/100))`which 变为`basicHealthFee - (basicHealthFee * 0)`-> `basicHealthFee - 0`。

从构造函数中获取其值的 if 语句是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:37:07.163

您的问题与布尔值无关。这是由于整数的除法。请按以下方式更改程序。静态最终双健康折扣 = 20d；静态最终双基本健康费 = 250d;

```
package com.stackoverflow.test;

public class Health {
    boolean dependency;
    String insuranceOwner = "";
    static final double basicHealthFee = 250d;
    static final double healthDiscount = 20d;

    public Health(boolean dependent, String insurance) {
        dependency = dependent;
        insuranceOwner = insurance;
    }

    public double computeCost() {
        double healthFee;
        if (dependency == true) {
            healthFee = basicHealthFee
                    - (basicHealthFee * (healthDiscount / 100.0d));
        } else {
            healthFee = basicHealthFee;
        }

        return healthFee;
    }

    public static void main(String args[]) {
        Health h34 = new Health(true, "Jim");
        System.out.println("discount price: " + h34.computeCost());
    }
} 
```

# unix - pstree 中进程周围的花括号是什么意思？

> ID：15802316
> 
> 赞同：8
> 
> 时间：2013-04-04T04:05:19.540
> 
> 标签：unix, pstree

手册页确实解释了括号大括号的含义（它指的是线程），但我想知道**大**括号的含义。

从这里我可以看到，`auditd`并且`node`是这样的。

```
❯ pstree
init─┬─agetty
     ├─atd
     ├─auditd───{auditd}
     ├─crond
     ├─dbus-daemon
     ├─dhclient
     ├─6*[mingetty]
     ├─ntpd
     ├─rsyslogd───3*[{rsyslogd}]
     ├─2*[sendmail]
     ├─sshd─┬─sshd───sshd───zsh───tmux
     │      └─sshd───sshd───zsh───man───sh───sh───less
     ├─tmux─┬─2*[zsh]
     │      ├─zsh───node───{node}
     │      └─zsh───pstree
     └─udevd───2*[udevd] 
```

我目前最好的猜测是这意味着它们在输入时被阻止了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-23T13:27:14.590

n*[{name}] 表示 n 个线程的组。如果只有一个线程，则 pstree 使用 {name}

```
{auditd} <=> 1*[{auditd}] 
```

**对于线程组，pstree 使用 n*[{name}]：**

```
├─rsyslogd───3*[{rsyslogd}] 
```

相当于：

```
├─rsyslogd─┬─{rsyslogd}
           ├─{rsyslogd}
           └─{rsyslogd} 
```

使用命令“pstree -a”查看不同之处。

# scala - 将 Future[Seq[(String, String)]] 转换为 Future[Seq[(String)]]

> ID：15802319
> 
> 赞同：2
> 
> 时间：2013-04-04T04:05:33.333
> 
> 标签：scala, future, sequences

我正在尝试使用以下方法将 Future[Seq[(String, String)]] 转换为 Future[Seq[(String)]]：

```
sortedSeq.map(_._2) 
```

所以 sortedSeq 的类型是 Future[Seq[(String, String)]]

但我不断收到错误：

```
 value _2 is not a member of Seq[(String, String)] 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:09:30.197

sortedSeq.map 会将映射应用到 Future，但您希望它应用到未来内 Seq 的元素。

所以像：

```
sortedSeq.map(_.map(_._2)) 
```

所以你在未来映射 Seq 的内容。

如果您有一个生成此代码示例来尝试它可能会更容易。

# python - Python with Mysql - 在运行时插入 pdf 文件

> ID：15802320
> 
> 赞同：0
> 
> 时间：2013-04-04T04:05:36.963
> 
> 标签：python, mysql

我有一个脚本，将结果以 pdf 格式存储在特定文件夹中。我想创建一个 mysql 数据库（使用下面的代码成功），并将 pdf 结果填充到它。最好的方法是什么，将文件按原样存储，或者作为对位置的引用。文件大小约为 2MB。有人可以帮助解释一些工作示例。我对python和mysql都是新手。提前致谢。澄清更多：我尝试对结果文件列使用 LOAD DATA INFILE 和 BLOB 类型，但它似乎不起作用。我正在使用 pymysql api 模块连接到数据库。下面的代码是连接到数据库并且成功.

```
import pymsql
conn = pymysql.connect(host='hostname', port=3306, user='root', passwd='abcdef', db='mydb')
cur = conn.cursor()
cur.execute("SELECT * FROM userlogin")
for r in cur.fetchall():
   print(r)
cur.close()
conn.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:49:07.757

由于您似乎接近让 mysql 为您存储字符串（用户名），因此最好的选择是坚持您在那里所做的并存储文件路径，就像您将字符串存储在`userlogin`表中一样（但在不同的具有外键的表`userlogin`）。无论如何，从长远来看，这可能是最有效的方法，特别是如果您将重要的元数据与文件路径（如关键字甚至完整的 n-gram 集）一起存储......现在您正在谈论文件索引系统，例如Google Desktop 或 Xapian...如果您想以“最佳”方式做到这一点，您就知道自己要面对什么。

# ruby-on-rails - 扩展以在短时间内支持大量流量

> ID：15802337
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:07:17.987
> 
> 标签：ruby-on-rails, amazon-s3, scaling, load-testing, stress-testing

到目前为止，我们的网站的访问量不大。我们的开发人员都不是大运维人员，但我们一直领先于它，并保持网站快速启动和运行。也就是说，我们的开发团队很紧张，我们积累了一些技术债务，还有很多优化的机会。

在没有详细说明的情况下，我们只是发现我们将在很短的时间内预计在不久的将来会有大量的流量。几小时内点击数百万次。缩放是一回事，但这比我们现在看到的要大几个数量级。

我们是使用 ELB 和 Postgresql 在 S3 上托管的 Rails 应用程序。

在这种情况下，我想针对扩展和负载测试的广泛起点提出一些建议。

*   更新：抱歉，EC2，深夜 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:17:45.547

@LastZactionHero 很有趣的问题，让我详细回答你，我希望你在谈论一些电子商务应用程序，企业或 B2B 应用程序没有看到这样的尖峰。由于您已经提到您在 s3 上托管您的 rails 应用程序。让我澄清几件事。1）您不能在 s3 上托管 rails 应用程序。S3 是简单的存储服务。只能存储文件的地方。2) 我猜您已经在 AWS ec2 上托管了您的 rails 应用程序，并在 ec2 实例上方附加了一个弹性负载均衡器，这非常好。

3）您在 ec2 实例上部署了一个自我管理的 Postgresql。

如果您在 AWS 上运行，那么您就安全了一半，并且可以轻松扩展和缩减。

我可以在您当前的模型中看到一个问题，即您的 db. AWS 已将数据库作为服务。这就是所谓的关系数据库服务。它支持 Mysql Oracle 和 MS SQL 服务器。

RDS 具有许多功能，例如自动备份数据库、高 IOPS 等。

但它不支持你的 Postgresql。您需要拥有或管理一个自我管理的 ec2 实例并运行 postgresql 数据库，但要确保它的故障安全，并且您确实有适当的备份和恢复系统。

AWS 提供了 Auto Scaling api 和命令行工具，非常简单。

您不必担心带宽问题等，但我也承认 Angelo 的回答。

您可以使用弹性内存缓存来缓存您的应用程序。如果需要加速您的应用程序，请使用 CDN。RDS 可以管理高达 30000 IOPS，它是一个怪物，它会为你做很多工作。

如果您需要任何帮助，请随时问我。

（免责声明：我是一名在电子商务公司工作的高级 devOps 工程师，在 Rails 上使用 ruby​​）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:35:59.963

恭喜，我希望你的期望成真！！

鉴于现有信息，这是一个很难全面回答的问题。例如，您的站点是否在数据库读取、写入或两者方面都很繁重（并且您的分片/复制策略是否符合您的数据库压力）？带宽是一个问题，等等？显而易见的要点将集中在确保您可以访问适当的硬件，并且您用于配置/部署硬件的任何接收方都是最新的并且可以使用。您通常可以在流量突然激增的情况下使用硬件，直到找到您发现的任何瓶颈的根源（是的，您会在不方便的时候发现它们！）

关于扩展您的应用程序，您至少应该：

1）尽可能缓存。注意缓存过期等。 2）确保您的数据库设置了适当的索引（本质上，您应该在您正在搜索的任何字段上都有一个索引。） 3）密切关注您的日志以识别潜在的长查询，N +1 查询、长视图渲染等 4) 执行 Shopify 在这篇文章中概述的内容：http: [//www.shopify.com/technology/7535298-what-does-your-webserver-do-when-a-用户点击刷新#axzz2O0gJDotV](http://www.shopify.com/technology/7535298-what-does-your-webserver-do-when-a-user-hits-refresh#axzz2O0gJDotV) 5) 为堆栈的每一层设置一个良好的监控系统（Monit、God 等）——突然的流量高峰会在意想不到的地方迅速成为应用程序的瓶颈并导致更多问题。级联可能很快发生。6) 设置 cron 以自动执行您目前手动执行的所有小任务……一旦您处理流量高峰，您可能会忘记执行这些任务。7）谷歌缩放轨道，你会看到大量的好信息。8）等等，等等，等等……

您可以使用一些分析工具（rubyperf 或 NewRelic 之类的工具等）从它们那里得到的任何响应都可能最好被视为一个粗略的基线。简单的原因是您的分析取决于您的硬件堆栈，这肯定会根据实际流量模式而改变。如果您有一个包含一页静态内容的站点，这很容易做到……如果您的 CMS 站点具有不断增长的数据库和不断增长的流量，则很难做到。

祝你好运！！！

# java - JTS WKTReader 有什么替代品吗？

> ID：15802339
> 
> 赞同：0
> 
> 时间：2013-04-04T04:07:26.590
> 
> 标签：java, geometry, jts

我正在使用[JTS 拓扑套件](http://www.vividsolutions.com/products.asp?catg=spaapp&code=jts)来处理我的应用程序中的一些几何图形。作为起点，我实例化了一个阅读器：

```
WKTReader reader = new WKTReader(); 
```

然后，使用阅读器检查多边形记录：

```
Geometry poly = reader.read(res.getString("GEOM"));
Geometry point = reader.read("Point(" + res.getString("LON")
    + " " + res.getString("LAT") + ")");
boolean inside = poly.contains(point); 
```

问题在于以这种方式找到我的多边形需要很长时间。所以我需要这个过程的另一个选择。是否有任何替代方法可以`WTKReader`用于此过程？谢谢。

*PS：我使用的是 MYSQL 数据库。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T10:26:23.423

首先，您可以尝试对多边形使用标准的 java 序列化/反序列化。

接下来，将 LON 和 LAT 存储为 STRING 不是很有效，可能您应该尝试数字类型。

如果您提供分析结果，我们可以为您提供更多帮助——这是最耗费时间的。但是我怀疑使用 DB 的操作是最慢的，因此您可以尝试一次获取所有条目，添加缓存。

另一种选择是将每个 GEOM 的边界框点存储在 DB 中，并在 SQL 查询中仅获取属于边界框的点，并在 java 端执行精确的“包含”检查。

# ios - 如何修复错误 [ setValue:forUndefinedKey:]

> ID：15802350
> 
> 赞同：1
> 
> 时间：2013-04-04T04:08:30.533
> 
> 标签：ios, objective-c, xcode4.5

我是 IOS 新手，遇到了一个错误我在我的故事板中添加了一个名为时间表的表格视图，过了一段时间我从我的故事板中删除了它，但之后在调试时显示错误

> 由于未捕获的异常“NSUnknownKeyException”而终止应用程序，原因：“[setValue:forUndefinedKey:]：此类不符合键时间轴表的键值编码。”

但我在我的项目中找不到任何名为时间表的东西，所以我该如何解决这个问题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-04T04:14:36.653

1.  转到xib
2.  单击文件所有者，然后单击显示连接检查器按钮（最后一个）。
3.  检查所有连接。问题是由于您引用了不再存在的插座。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:14:31.127

您连接一个插座，然后卸下控制器而不卸下其插座。

# android - 如何以编程方式显示“清除默认值”？

> ID：15802352
> 
> 赞同：3
> 
> 时间：2013-04-04T04:08:39.843
> 
> 标签：android, settings, default

现在我正在开发 Home Launcher 应用程序。我想清除默认 Home Launcher（例如：Samsung Home）的默认设置。即。我想以`Settings-> Applications->Manage Application->Samsung Home->clear defaults`编程方式显示。

如何通过代码显示这一点？

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T04:23:44.360

**注意：** *由于此问题仅限于访问“管理应用程序设置”选项，因此我的回答仅涵盖了这一点。您必须想办法获取实际的包名称。*

此外，如果这个想法也是通过代码自动清除默认值，那么据我所知，这是无法做到的。如果我在这方面错了，有人可以纠正我。

话虽如此，这段代码将从您的应用程序中打开特定应用程序的*管理应用程序*屏幕（必须提供包名称）。

```
Intent showSettings = new Intent();
showSettings.setAction(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);
Uri uriAppSettings = Uri.fromParts("package", "THE_APP_PACKAGE_NAME", null);
showSettings.setData(uriAppSettings);
startActivity(showSettings); 
```

例如，如果 Google Maps 应用程序的包名称是`com.google.android.apps.maps`，则替换`THE_APP_PACKAGE_NAME`为它，代码将打开 Google Maps 应用程序的*管理应用程序*屏幕。

**更新：**

PackageManager 有一个方法[clearPackagePreferredActivities](http://developer.android.com/reference/android/content/pm/PackageManager.html#clearPackagePreferredActivities)用于通过代码清除默认值。但是，这*似乎不适*用于较新的 Android 版本：[https ://stackoverflow.com/a/10246711/450534](https://stackoverflow.com/a/10246711/450534)

其他值得一读的帖子：

1.  [https://stackoverflow.com/a/7750187/450534](https://stackoverflow.com/a/7750187/450534)
2.  [https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Rzv8VU-EUAw](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/Rzv8VU-EUAw)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T15:30:14.370

只是为了完成图片，为了获得“THE_APP_PACKAGE_NAME”，你可以使用类似的东西：

```
 Intent intent = new Intent(Intent.ACTION_MAIN);
 intent.addCategory(Intent.CATEGORY_HOME);
 ResolveInfo resolveInfo = getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);
 String packageName = resolveInfo.activityInfo.packageName; 
```

# javascript - SPRING --- 如何向控制器提交对象数组

> ID：15802353
> 
> 赞同：0
> 
> 时间：2013-04-04T04:08:45.053
> 
> 标签：javascript, spring, spring-mvc, angularjs

如题，

我使用 angularjs 提交

我的弹簧控制器：

```
@RequestParam(value = "hashtag[]") hashtag[] o 
```

以上适用于数组参数，但不适用于数组对象

我的js脚本：

```
$http({
         method: 'POST',
         url: url,
         data: $.param({
                hashtag : [{label:"success",value:"ok"},{label:"success",value:"ok"},{label:"success",value:"ok"}],
               }),
  headers: { 'Content-Type': 'application/x-www-form-urlencoded' }  }); 
```

我从 chrome 观察，表单数据是

```
 hashtag[0][label]:success
    hashtag[0][value]:10

    hashtag[1][label]:success
    hashtag[2][value]:10

    hashtag[3][label]:success   
    hashtag[3][value]:10 
```

但春天告诉我

```
org.springframework.web.bind.MissingServletRequestParameterException: Required hashtag[] parameter 'id[]' is not present 
```

以前我能够接收参数数组，但不能接收对象。所以有人可以启发我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T08:49:32.917

试试@RequestParam(value = "hashtag") hashtag[] o

假设您有一个名为 hashtag 的类，具有标签和值属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T17:19:22.493

因为它是一个 POST 请求，您可以使用`@RequestBody`注释并创建一个 DTO 类来映射您正在发送的数据，甚至可以使用您的域对象。例如，为什么不创建可以保存 key->value 对的可重用 POJO 类，例如：

```
@JsonPropertyOrder({"label", "value"})
public final class Pair<K,V> implements Map.Entry<K,V>, Serializable {
   private final K key;
   private final V value;

   @JsonCreator
   public Pair(@JsonProperty("label")K key, @JsonProperty("value")V value) {
       this.key = key;
       this.value = value;
   }
   // ... rest of the implementation
} 
```

注意：我在这里假设您使用的是 Jackson 映射器，因此是 JSON 注释。下一步是获取将保存您从客户端发送的数据结构的类：

```
public class HashTags implements Serializable {
    List<Pair<String, String>> hashtag = new ArrayList<>();
   // ... rest of the implementation
} 
```

然后在您的控制器中，您将不得不执行以下操作：

```
@RequestBody HashTags entity 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:40:25.073

尝试使用`@ModelAttribute`

创建一个新的 Java 类 HashtagList，如下所示

```
public class HashTagList {

    private List<HashTag> hashTag;

    public List<HashTag> getHashTag() {
        return hashTag;
    }

    public void setHashTag(List<HashTag> hashTag) {
        this.hashTag = hashTag;
    }
} 
```

并在您的控制器方法中

```
@ModelAttribute("hashtag") HashTagList hashTagList 
```

java 类名是 hashtag 还是 HashTag ？

# java - 如何将字节数组中的 37 位更改为现有值的所有补码

> ID：15802362
> 
> 赞同：0
> 
> 时间：2013-04-04T04:09:32.557
> 
> 标签：java, byte, bytearray, bit

我有一个字节数组`myByteArray[82]`

我想将此数组中的 37 位恰好更改为补码值。IE。如果 bit0 有一个“1”，我想将其更改为“0”。我需要更改前 37 个这样的位以在此字节数组中引入错误。

请建议如何做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:08:43.267

尝试

```
 byte[] a82 = ...
    Set<Integer> set = new HashSet<Integer>();
    while (set.size() < 37) {
        set.add((int) (Math.random() * 82));
    }
    for (int i : set) {
        int ibyte = i / 8;
        int ibit = i % 8;
        int m = 1 << ibit;
        a[ibyte] ^= m;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:21:14.077

目前尚不清楚您要做什么。我最好的理解是你有一个 82 字节的数组，你想反转数组的最低 37 位。由于一个字节是 8 位，所以你可以这样做：

```
byte[] myByteArray = new byte[82];
// invert lowest 32 bits, 8 at a time
for (int i = 0; i < 4; ++i) {
    myByteArray[i] = (byte)(~myByteArray[i]);
}
// invert next five bits
myByteArray[4] = (byte) (
    (myByteArray[4] & 0xE0) // top 3 bits unchanged
    |
    ((~myByteArray[4)) & 0x1F) // bottom 5 bits inverted
    ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:25:06.463

这有效：

```
int nBits = 37;

int i = 0;

for (; i<nBits / 8; ++i)
    myByteArray[i] = (byte)((byte) myByteArray[i] ^ 0xFF);

myByteArray[i] = (byte)(myByteArray[i] ^ ((0xFF >>> 5) ^ 0xFF)); 
```

是否与最后一行的 0xFF 进行最终 XOR 取决于您认为最高有效位是第一位（然后使用它）还是最后一位（然后省略它）；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T05:04:28.087

要反转特定的 37 位，随机选择：

```
// array of 82 bytes with 37 selected bits set to 1, all the rest zero
// you could generate this programmatically as well if you need a different
// set of bits each time, but your question implies you don't
byte[] mask = { 0x00, 0x01, 0x02, 0x80, .... 0x00 };

for (int i=0; i<myByteArray.length; i++)
{
    myByteArray[i] ^= mask[i];
} 
```

使用位异或运算符`^`。异或的真值表是

```
 M a s k
    | 0 | 1
D  -+---+---
a  0| 0 | 1
t  -+---+---
a  1| 1 | 0 
```

只要掩码中有 1，数据中的相应位就会被翻转。

# java - DBSCAN 聚类算法无法正常工作。我究竟做错了什么？

> ID：15802365
> 
> 赞同：0
> 
> 时间：2013-04-04T04:09:48.133
> 
> 标签：java, data-mining, cluster-analysis, dbscan

我正在尝试编写 DBSCAN 算法来聚类一组点，但我得到的结果非常糟糕。这可能是因为数据，但不仅如此。我得到不应该发生的大小 < minPoints 的集群。

我究竟做错了什么？我已经多次查看代码，但我无法弄清楚问题是什么。

我参考了[DBSCAN Wikipedia page](http://en.wikipedia.org/wiki/DBSCAN#Pseudocode)上给出的算法。

```
private static int[] dbScan(String[] points, int epsilon, int minPts) {
    int cluster = 0;
    // visited stores if point has been visited
    boolean[] visited = new boolean[points.length];
    // pointsCluster stores which cluster a point has been assigned to
    int[] pointsCluster = new int[points.length];
    for(int iii = 0; iii < points.length; iii++) {
        // if point iii is already visited, do nothing  
        if(visited[iii]) continue;                      
        visited[iii] = true;    // mark point iii as visited
        // get points in neighborhood of point iii
        HashSet<Integer> neighbors = epsilonNeighbors(points, iii, epsilon);    
        if(neighbors.size() < minPts) {
            // if number of neighbors < minPts, mark point iii as noise
            pointsCluster[iii] = -1;
        } else {
            ++cluster;                      // else, start new cluster
            expandCluster(points, iii, neighbors, pointsCluster, visited, cluster, epsilon, minPts);
        }
    }
    return pointsCluster;
}

/*
 * Expands a cluster if a point is not a noise point
 * and has > minPts in its epsilon neighborhood
 */
private static void expandCluster(String[] points, int seedPoint, HashSet<Integer> neighbors,
        int[] pointsCluster, boolean[] visited, int cluster, int epsilon, int minPts) {

    pointsCluster[seedPoint] = cluster;     //assign cluster to seed point
    // create queue to process neighbors
    Queue<Integer> seeds = new LinkedList<Integer>();
    seeds.addAll(neighbors);
    while(!seeds.isEmpty()) {
        int currentPoint = (Integer) seeds.poll();
        if(!visited[currentPoint]) {
            visited[currentPoint] = true;       // mark neighbor as visited
            // get neighbors of this currentPoint
            HashSet<Integer> currentNeighbors = epsilonNeighbors(points, currentPoint, epsilon);
            // if currentPoint has >= minPts in neighborhood, add those points to the queue
            if(currentNeighbors.size() >= minPts) {
                seeds.addAll(currentNeighbors);
            }
        }
        // if currentPoint has not been assigned a cluster, assign it to the current cluster
        if(pointsCluster[currentPoint] == 0) pointsCluster[currentPoint] = cluster;
    }
}

/*
 * Returns a HashSet containing the indexes of points which are
 * in the epsilon neighborhood of the point at index == currentPoint
 */
private static HashSet<Integer> epsilonNeighbors(String[] points, int currentPoint, int epsilon) {
    HashSet<Integer> neighbors = new HashSet<Integer>();
    String protein = points[currentPoint];
    for(int iii = 0; iii < points.length; iii++) {
        int score = similarity(points[iii], points[jjj]);
        if(score >= epsilon) neighbors.add(iii);
    }
    return neighbors;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T13:34:59.910

当您的结果不好时，可能是因为您的数据不好（对于基于密度的聚类），或者因为您的参数不好。

事实上，如果 DBSCAN相互接触，它们*可以*生成小于 minPts 的簇。然后他们可以互相“窃取”边界点。

使用例如[ELKI](http://elki.dbs.ifi.lmu.de/)来验证您的算法输出怎么样？

# python - 命名空间和访问 Tkinter

> ID：15802366
> 
> 赞同：0
> 
> 时间：2013-04-04T04:09:52.233
> 
> 标签：python, tkinter

我有一个问题，虽然我不确定使用什么语言。我对如何在不使用全局变量的情况下从其他模块访问主驱动程序模块中定义的画布有点困惑。例如，我在 driver.py 中实例化了画布，但我试图从 Level.py 中绘制。就上下文而言，它最终将读取文本文件并根据从中提取的数据绘制地图，用于 RPG 游戏。这是我的代码：

驱动程序.py：

```
import tkinter
import Level

HEIGHT = 1024
WIDTH = 800
TILE_SIZE = 32
VERTICAL_TILES = HEIGHT//TILE_SIZE
HORIZONTAL_TILES = WIDTH//TILE_SIZE

root = tkinter.Tk()
root.title("RPG Land")
window = tkinter.Canvas(root,width= WIDTH, height=HEIGHT )

lev = Level.LevelMgr()
lev.loadLevel()
lev.drawLevel()

window.pack()

root.mainloop() 
```

Annnd Level.py：

```
import tkinter
from driver import window

class LevelMgr:
    def __init__(self):
        self.levelData = []
        self.visibleLevel = []
        self.tileColors = {
                            0 : 'empty',
                            1 : 'wall',
                            2 : 'bush' }

    def loadLevel(self):
        fyle = open('levels/level1','r')
        count = 0
        for lyne in fyle:
            self.levelData.append(lyne)
            count += 1

    def drawLevel(self):
        currentY = 0
        currentX = 0
        for col in self.levelData:
            currentY += 32
            for t in col:
                window.create_rectangle(currentX, currentY, 32, 32, fill="blue")
                currentX += 32 
```

任何有关如何更好地构建程序的建议也将不胜感激。访问其他命名空间时，这样做的正确方法是什么？我是否需要在 driver.py 上具有“导入级别”以及在 Level.py 中具有“导入驱动程序”？我对这样一个程序的基本结构有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:13:38.087

`LevelMgr`取决于窗口，因此将其明确命名为`__init__`：

```
class LevelMgr:
    def __init__(self, window):
        self.window = window
    def drawLevel(self):
        ...
            for t in col:
                self.window.create_rectangle(currentX, currentY, 32, 32, fill="blue") 
```

删除导入语句：

```
from driver import window 
```

然后，在 Driver.py 中：

```
lev = Level.LevelMgr(window) 
```

* * *

另一种可能性是简单地`window`在 Level.py 中定义而不是`Driver.py`.

# iphone - iphone 目标 c 核心位置 mapview 第一计时器

> ID：15802367
> 
> 赞同：0
> 
> 时间：2013-04-04T04:09:53.290
> 
> 标签：iphone, objective-c, c

我是 iphone 开发的新手，我正在尝试简单地制作一个应用程序，通过单击一个按钮来找到您的位置并在地图中显示它。我认为我的代码是正确的，我只是在我的 main.m 文件中收到一个错误，这很奇怪。

我明白了

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
    return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); <--ERROR
    }
} 
```

我项目的其余部分只是使用故事板将一半屏幕制作为地图视图，并将其作为 ViewController.h 的出口，并在其下方制作一个按钮作为操作链接到 ViewController.h。我还导入了这两个库。然后在我的按钮操作代码中，它的 this {

```
_locationManager = [[CLLocation alloc] init];
_locationManager.distanceFilter = kCLDistanceFilterNone;
_locationManager.desiredAccuracy = kCLLocationAccuracyHundredMeters;
[_locationManager startUpdatingLocation];

[_mapview setMapType:MKMapTypeStandard];
[_mapview setZoomEnabled:YES];
[_mapview setScrollEnabled:YES];
MKCoordinateRegion region = { {0.0, 0.0}, {0.0, 0.0}};
region.center.latitude = _locationManager.location.coordinate.latitude;
region.center.longitude = _locationManager.location.coordinate.longitude;
region.span.latitudeDelta = .007f;
region.span.longitudeDelta = .007f;
[_mapview setRegion:region animated:YES];
[_mapview setDelegate:sender]; 
```

}

感谢所有可以提供帮助的人！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:17:12.280

如果您查看调试器，它可能会告诉您导致错误的原因。查看目标调试器以了解导致错误的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:22:46.380

发生崩溃时 Xcode 落入 main.m 的事实无关紧要，您应该忽略它。错误在您的代码中的其他地方。您应该设置一个异常断点以在问题发生时捕获问题：

[http://www.aeth.com/iOSBook/ch09.html#_the_xcode_debugger](http://www.apeth.com/iOSBook/ch09.html#_the_xcode_debugger)

如果您只想映射用户所在的位置，这很简单：

[http://www.aeth.com/iOSBook/ch34.html#_map_kit_and_current_location](http://www.apeth.com/iOSBook/ch34.html#_map_kit_and_current_location)

如果您对使用位置管理器并了解如何获取用户所在位置的实际数字更感兴趣：

[http://www.aeth.com/iOSBook/ch35.html#_location](http://www.apeth.com/iOSBook/ch35.html#_location)

# matlab - 将分组应用于大于平均值的值

> ID：15802370
> 
> 赞同：0
> 
> 时间：2013-04-04T04:10:14.530
> 
> 标签：matlab

我有一个向量，我想根据向量中值的滚动平均值对其进行分组。如果值大于平均值，我将它们放在第 1 组中，如果它们小于平均值，则将它们放在第 2 组中。

根据其值是否大于当前平均值，可以使用什么函数为我的向量中的每个值赋予一个组编号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:20:26.113

没有简单的函数可以做到这一点。你需要这样的东西：

```
N = length(vec);
[lo_group hi_group] = deal( NaN(ceil(N/2),1) );
[sum lo_ct hi_ct] = deal(0);
for i=1:N
   v = vec(i);
   sum = sum + v;
   avg = sum/i;
   if v>avg
      hi_ct = hi_ct + 1;
      hi_group(hi_ct) = v;
   else
      lo_ct = lo_ct + 1;
      lo_group(lo_ct) = v;
   end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:25:41.370

我认为没有将“标签”分配给数组条目的功能。

假设 v 是您的输入向量，一种简单的方法是简单地执行以下操作：

```
v(v>mean(v)) %Group 1
v(v<mean(v)) %Group 2 
```

当然，如果您打算用它做更多事情，您可以执行以下操作：

```
avg = mean(v);
flag = zeros(size(v));
for i=1:numel(v)
   if(v(i)>avg)
      flag(i) = 1;
   else
      flag(i) = 2;
   end
end 
```

`flag`将包含您必要的分组。现在如果你想要`v`in group的元素`1`，你可以简单地使用：

```
v(flag==1) 
```

如果你想要一个滚动平均值，这取决于你如何计算它，但相同的基本方法就足够了。

# python-2.7 - 即使用户尝试退出，也要保持 Python 脚本运行

> ID：15802375
> 
> 赞同：0
> 
> 时间：2013-04-04T04:10:57.713
> 
> 标签：python-2.7

即使用户尝试通过单击 x（退出）按钮退出 Python 脚本，是否可以保持运行？因此意味着退出的唯一方法是，假设脚本中有 quit() 命令。

这个问题听起来很愚蠢，但我很好奇！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:51:15.510

经过一番研究，我确实找到了 Tkinter 的答案。我让我的脚本运行一个 while 循环，其中包含一个要求用户输入的 Tkinter 对话框。该脚本与 一起保存，`.pyw`因此用户无法退出脚本并退出 Tkinter 对话框只会使其再次出现。我不会在这里发布代码，因为我不希望我的代码导致坏事。

# r - 编译的 R 包是否向后兼容？

> ID：15802383
> 
> 赞同：9
> 
> 时间：2013-04-04T04:12:11.350
> 
> 标签：r, ubuntu, debian, cran, rapache

新的 R 3.0.0 要求重新安装所有贡献的包。两个问题：

*   这是否也意味着调用 R 的软件，例如 rapache，需要在 R 升级后重新编译？
*   新版本是否向后兼容？例如，如果一个`r-cran-xxx`包是使用 3.0.0 编译的`r-base-dev`，这个包可以在 R 2.15 中加载吗？或者我们是否需要为 R 2.15 和 R 3.0.0 分发单独的二进制包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T15:16:58.910

这确实是 r-devel 的问题，或者当您使用我们的 Debian / Ubuntu 软件包术语 r-sig-debian 时。

简而言之：

*   问题1是AFAICT a no。R **C API**没有改变。Rapache 的设计极大地影响了我们更小的 littler `r`，并且`r`在安装了基于我的包的 Michael 构建的 R 3.0.0 后，在我的 Ubuntu 机器上运行得很好。即使 littler（参见`r --version`参考资料）是针对 R 2.15.2 构建的。

*   问题 2 是否定的，这没有改变。R 总是“及时向前”移动，而不是向后移动。当添加 NAMESPACES 以及更改帮助格式时，我们需要如何重建包。因此，如果您有 N 个不同的 R 版本和 M 个不同的 ABI 包，您可能需要 M 个树并管理您的 libPaths。这里没有什么新鲜事。

# javascript - 你如何匹配 Jison 中的零个或多个令牌？

> ID：15802384
> 
> 赞同：4
> 
> 时间：2013-04-04T04:12:30.157
> 
> 标签：javascript, parsing, parser-generator, bnf, jison

我正在 Jison 中编写一个简单的表达式解析器，允许任意数量的换行符跟随表达式中的二元运算符。到目前为止，这是我的语法：

```
{
    "operators": [
        ["left", "+", "-"],
        ["left", "*", "/", "%"]
    ],
    "bnf": {
        "program": [
            ["statement EOF", "return $1;"]
        ],
        "statement": [
            ["expression newlines", "$$ = $1 + ';';"]
        ],
        "expression": [
            ["NUMBER",                           "$$ = yytext;"],
            ["expression + expression",          "$$ = $1 + ' + ' + $3;"],
            ["expression - expression",          "$$ = $1 + ' - ' + $3;"],
            ["expression * expression",          "$$ = $1 + ' * ' + $3;"],
            ["expression / expression",          "$$ = $1 + ' / ' + $3;"],
            ["expression % expression",          "$$ = $1 + ' % ' + $3;"],
            ["expression + newlines expression", "$$ = $1 + ' + ' + $4;"],
            ["expression - newlines expression", "$$ = $1 + ' - ' + $4;"],
            ["expression * newlines expression", "$$ = $1 + ' * ' + $4;"],
            ["expression / newlines expression", "$$ = $1 + ' / ' + $4;"],
            ["expression % newlines expression", "$$ = $1 + ' % ' + $4;"]
        ],
        "newlines": [
            ["NEWLINE",          ""],
            ["newlines NEWLINE", ""]
        ]
    }
} 
```

如您所见，我正在为每个二元运算符编写两条规则。这在我看来是非常多余的。我宁愿有一个匹配零个或多个`NEWLINE`令牌（[Kleene star](https://en.wikipedia.org/wiki/Kleene_star "Kleene star - 维基百科，免费的百科全书")）而不是一个或多个令牌（[Kleene plus](https://en.wikipedia.org/wiki/Kleene_star#Kleene_plus "Kleene star - 维基百科，免费的百科全书")）的产品。你会如何在 Jison 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-01T15:32:53.510

我使用 Jison，我忽略了空格（包括换行符）。

我的 %lex 中的第一行是：

```
\s+   /* ignore */ 
```

但是，如果您不想这样做，则不必这样做。尝试以下方式：

```
"expression": [
            ["NUMBER",                           "$$ = yytext;"],
            ["expression + expression",          "$$ = $1 + ' + ' + $3;"],
            ["expression - expression",          "$$ = $1 + ' - ' + $3;"],
            ["expression * expression",          "$$ = $1 + ' * ' + $3;"],
            ["expression / expression",          "$$ = $1 + ' / ' + $3;"],
            ["expression % expression",          "$$ = $1 + ' % ' + $3;"],
            ["expression newlines",              "$$ = $1"],
            ["newlines expression",              "$$ = $2"]
        ], 
```

这应该允许在任何表达式之前/之后有任意数量的新行。

# php - 如何将搜索结果回显到另一个页面

> ID：15802386
> 
> 赞同：0
> 
> 时间：2013-04-04T04:12:44.663
> 
> 标签：php, search

@Evan 试图在 newpage.php 上回显 0 结果，我如何从 newpage.php 定义 $searchQuery ...似乎我必须将所有代码重写到 newpage.php ...那里一种方法来形成对另一个页面的操作？

```
 <?php

session_start();
error_reporting(E_ALL);
ini_set('display_errors', '1');

include_once("db_connects.php");

$queryArray = array();
$goodQuery = true;
$search_output = "";

if(isset($_POST['searchquery']) && $_POST['searchquery'] != ""){
    $searchquery = preg_replace('#[^a-z 0-9?!]#i', '', $_POST['searchquery']);
{
    $sqlCommand = "(SELECT id, links, page_body, page_title AS title FROM pages WHERE MATCH (page_title,page_body) AGAINST ('$searchquery'))";
} 

$query = mysql_query($sqlCommand) or die(mysql_error());
$count = mysql_num_rows($query);

if($count > 1){

    $search_output .= "<hr />$count results for <strong>$searchquery</strong><hr />";

    while($row = mysql_fetch_assoc($query)){
        $queryArray[] = $row;
    } 
}
else {
     $goodQuery = false;
     $_SESSION['error'] = true;
     header("Location: newpage.php");

}

if($goodQuery){

    $_SESSION['search_output'] = $queryArray;
    header("Location: newpage.php");

    exit;
}
else{
    echo $search_output;
}
}
  ?> 
```

这是 newpage.php 上的代码，一旦它离开标题..

```
 <?php

session_start(); 

if(isset($_SESSION['error'])){

     $search_output = "<hr />0 results for <strong>$searchquery</strong><hr />";

    } else {

    foreach($_SESSION['search_output'] as $value){
        $value['links'];
        $value['title'];
        $value['page_body'];

        $title = $value['title'];
        $link = $value['links'];
        $body = $value['page_body'];

        $search_output .= "<a href='".$link."'>".$title."</a> - $body<br>";
}
}
?>

<div>
<?php echo $search_output; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:36:30.793

您将希望将查询结果存储在`array`. 完成后，您可以使用`header`in`php`将用户带到新页面。用户进入新页面后，您可以`echo`返回查询结果（现在存储在 中`$_SESSION`）：

**首先，创建一个数组：**

```
$queryArray = array(); 
```

**二、查询数据库并将每一行存储在我们刚刚创建的数组中**

```
while($row = mysql_fetch_array($query)){

       $queryArray[] = $row;

        } // close while 
```

**第三，将数组移动到 SESSION 变量中：**

```
$_SESSION['search_output'] = $queryArray; 
```

**四、将用户移动到新页面：**

```
header("Location: newpage.php"); 
```

**最后，回显您的数据：**

```
foreach($_SESSION['search_output'] as $value){
    echo $value;
} 
```

**编辑：使用完整代码更新：**

```
 <?php
session_start();
error_reporting(E_ALL);
ini_set('display_errors', '1');

include_once("db_connects.php");

$queryArray = array();
$goodQuery = true;
$search_output = "";

if(isset($_POST['searchquery']) && $_POST['searchquery'] != ""){
    $searchquery = preg_replace('#[^a-z 0-9?!]#i', '', $_POST['searchquery']);
    $sqlCommand = "(SELECT id, links, page_body, page_title AS title FROM pages WHERE MATCH      enter code here(page_title,page_body) AGAINST ('$searchquery'))";
} 

$query = mysql_query($sqlCommand) or die(mysql_error());
$count = mysql_num_rows($query);
if($count > 1){
    $search_output .= "<hr />$count results for <strong>$searchquery</strong><hr />";
    while($row = mysql_fetch_array($query)){
        $queryArray[] = $row;
    } 
}
else {
    $goodQuery = false;
    $search_output = "<hr />0 results for <strong>$searchquery</strong><hr />";
}

if($goodQuery){
    $_SESSION['search_output'] = $queryArray;
    header("Location: newpage.php");
    exit;
}
else{
    echo $search_output;
}

  ?> 
```

**现在，在 newpage.php 上：**

您现在需要从查询中获取结果（存储在 SESSION 中）。您可以通过循环 SESSION 来做到这一点：

```
session_start(); // Make sure you add this at the top of the page 

foreach($_SESSION['search_output'] as $value){
    echo $value;
} 
```

# javascript - 当对象需要首先加载 DOM 时使用的最佳 Javascript 设计模式？

> ID：15802387
> 
> 赞同：1
> 
> 时间：2013-04-04T04:12:47.210
> 
> 标签：javascript, design-patterns, dom, asynchronous

我正在使用 Google API 做一些事情，我想构建我的代码以使其可重用，但我遇到了困难。要使用 oauth2 进行身份验证，我正在加载此脚本

```
<script src="https://apis.google.com/js/auth.js?onload=initAuth"></script> 
```

加载时调用 initAuth() 。然后我可以使用 gapi.auth 进行身份验证。但是，因为我正在调用不同的 API，所以我想为身份验证创建一个更通用的包装类。我浏览了网络并尝试了自我执行的匿名函数，因为它们看起来很干净：

```
(function(GAuth, $, undefined) {

    GAuth.token = gapi.auth.getToken();

    GAuth.authenticate = function(clientId, scopes, apiUrl, isInitialAuth, callback) {
        if(isInitialAuth)
        {
            gapi.auth.init(function() {
                authorize(clientId, scopes, apiUrl, false, callback);
            });
        }

        else
        {
            // authorize is private
            authorize(clientId, scopes, apiUrl, true, callback);
        }
    }

    ...etc...

}(window.GAuth = window.GAuth || {}, jQuery)); 
```

这样做的问题是它立即执行，在这种情况下我得到一个“gapi is undefined”错误。我正在寻找一种方法，允许我在加载其他脚本后加载我的 GAuth 对象，并且最好允许我定义公共和私有函数/变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:16:36.327

`gapi`包括在您需要此文件之前设置的文件。这将确保`gapi`在此脚本执行时具有值。由于您使用的是 jQuery，因此您还可以使用准备好的文档（非常推荐用于首先准备好页面的代码）。

```
// Define functions here
$(function() {
    // Do your code dependent on a completely loaded DOM here
}); 
```

# codeigniter - 在codeigniter中添加friendRequest

> ID：15802391
> 
> 赞同：1
> 
> 时间：2013-04-04T04:13:09.543
> 
> 标签：codeigniter

当我向用户列表中的其他用户发送好友请求时，我只是使用此代码来比较登录用户和其他非登录用户。但这段代码不起作用。

```
<?php $userid=$this->session->userdata('userID'); ?>
<?php 
    if($this->session->userdata('userID')==$userid)
    {

}
else
{
    echo '<a href="<?php echo base_url();?>index.php/myinfocontroller/friendrequest" > <input type="submit"                  name="Friendbutton" value"Friendrequest" /> </a>';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:50:58.930

您的链接在 else 子句中是错误的，请使用：

```
<?php echo '<a href="'.base_url().'index.php/myinfocontroller/friendrequest"><input type="submit" name="Friendbutton" value"Friendrequest" /></a>'; ?> 
```

现在链接可以工作了！

# c# - 在哪里安全地存储来自 Windows 服务的数据？

> ID：15802392
> 
> 赞同：4
> 
> 时间：2013-04-04T04:13:12.447
> 
> 标签：c#, .net, windows, security, service

我正在使用 C# 编写一个服务，该服务应该在 Windows 平台上作为“本地系统”运行。我可以在注册表中存储少量数据，但是如果我想在一个文件中存储更多数据，我应该将这些文件放在哪里？以及如何保护这些数据不被访问权限较低的用户修改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T05:55:29.873

一般的做法是使用[ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)类对数据进行加密，然后将它们存储在磁盘上应用程序可以存储的任何位置（例如，在 LocalApplicationData 特殊文件夹的子文件夹中，您可以通过`Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData`调用获取其位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-05-24T17:43:28.557

更新到以前的答案可能会为使用此解决方案的人节省一些故障排除时间（因为我没有足够的声誉来发表评论）：

对于本地系统 Windows 服务帐户，`Environment.SpecialFolder.LocalApplicationData` 也可以解析为 `C:\Windows\SysWOW64\config\systemprofile\AppData\Local`而不是`C:\Windows\System32\Config\SystemProfile\AppData\Local`.

使用已经提到的 CommonApplicationData 而不是 LocalApplicationData 不会带来这个问题。

信息来源：[https ://www.jamescrowley.net/2014/02/24/appdata-location-when-running-under-system-user-account/](https://www.jamescrowley.net/2014/02/24/appdata-location-when-running-under-system-user-account/)

# android - 选择项目后，Android Listview 对话框不会消失

> ID：15802399
> 
> 赞同：0
> 
> 时间：2013-04-04T04:13:52.190
> 
> 标签：android, listview, dialog

我试图创建一个列表视图对话框来显示选择列表。我的代码如下所示：

```
 LayoutInflater factory=LayoutInflater.from(this);
    final View stuckLevelDialogView=factory.inflate(R.layout.report_stuck_dialog, null);

    final ListView stuckLevelListViewForDialog=(ListView)stuckLevelDialogView.findViewById(R.id.report_stuck_dialog_listview);
    final String[] stuckLevelList=new String[]{"1 - You can move freely","2 - You have to be aware of your movement","3 - You can move slowly","4 - There is a traffic jam","5 - There is a serious traffic jam"};
    ArrayAdapter<String> adapterForDialog=new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, stuckLevelList);
    stuckLevelListViewForDialog.setAdapter(adapterForDialog);

    final AlertDialog.Builder stuckLevelDialog=new AlertDialog.Builder(this);
    stuckLevelDialog.setTitle("What stuck level is this point?");
    stuckLevelDialog.setView(stuckLevelDialogView);
    stuckLevelDialog.show(); 
```

但是，当我选择一个选项时，会执行 onItemClick，但列表视图对话框不会消失，我必须手动按下后退按钮。我尝试调试代码一整天，但还没有解决。请帮我。提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:20:51.563

我认为您需要在侦听器中进行如下`dismiss()`对话：`onItemClick`

> ```
>  stuckLevelListViewForDialog.setOnItemClickListener(new OnItemClickListener() {
>         @Override
>         public void onItemClick(AdapterView<?> p_arg0, View p_arg1,
>                 int p_arg2, long p_arg3) {
>         stuckLevelDialog.dismiss();
>         }
>     }); 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:21:58.360

使用stuckLevelDialog.dismiss; 在 onItemClick 的末尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:24:39.140

您可以`setSingleChoiceItems`在警报对话框中设置您的项目列表，这将显示一个带有单选按钮的列表。如果您想添加按钮，您可以在用户选择任何项目后`dismiss`添加`dialog`.

```
new AlertDialog.Builder(this)
    .setSingleChoiceItems(array, -1, new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // here you can do your functionality and can dismiss dialog as well
                    dialog.dismiss();

                }
            })        
    .show(); 
```

# porting - 构建 tshark

> ID：15802400
> 
> 赞同：0
> 
> 时间：2013-04-04T04:14:30.040
> 
> 标签：porting, wireshark, tshark

我正在将 tshark 移植到不同的操作系统。有人可以告诉我可以从源代码中删除哪些文件/文件夹吗？我知道 GTK 不是必需的；但如果我能在一开始就删除所有不必要的文件/文件夹，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:41:03.187

> 有人可以告诉我可以从源代码中删除哪些文件/文件夹吗？

`ui/gtk`并且，如果你有它，`ui/qt`. 不要删除下的任何其他内容`ui`；至少其中一些代码在 TShark 和 Wireshark 的 {GTK+,Qt} 版本之间共享，其中的代码是 TShark`ui/cli`的点击代码。

`help`是特定于 Wireshark 的，因此您可以删除它。

`image`如果您正在为 Windows 构建，则它是必需的（可以说它不应该同时包含 GUI 的图像和 Windows 资源编译器的 .rc.in 文件，但这可能会使引用图标`image`更加复杂）。

如果您不打算构建任何文档，`doc`您也许也可以删除。`docbook`

`test`如果您不打算运行测试，`packaging`并且`debian`如果此操作系统不是 Windows 或 Wireshark 为其提供打包机制的某种 UN*X 风格，您可能可以删除。

但是，我不知道如果您删除它们是否会破坏任何 autoconf 或 CMake 内容。除非您的磁盘空间不足，否则我会将源代码树中的所有目录和文件留在那里，而不必费心移植您不需要的文件。

# google-app-engine - 如何通过 GWT 发送跨站点 PUT 请求？

> ID：15802402
> 
> 赞同：0
> 
> 时间：2013-04-04T04:14:35.163
> 
> 标签：google-app-engine, rest, gwt, jsonp

我正在使用 GAE/GWT 创建一个 Web 应用程序。前端 GUI 是一个 Web 客户端，服务器是一个 RESTFUL 服务器，两者都在**不同**域的 GAE 中运行。

我正在使用带填充的 json 与服务器通信，但发现我将无法发送 PUT/POST/DELETE 请求。

我的应用程序将主要用于查询数据（查询：85% 的情况，修改数据：15%）。所有请求都将被验证。

我正在考虑以下选项。

1）查询使用JsonpRequestBuilder，修改在Web客户端服务器端创建一个代理，并通过该代理访问REST服务。使用 GWT RPC 与此代理通信。

2) 在我的 REST 服务（包括那些修改数据的服务）中将每个请求作为 GET 请求，并直接从 Web 客户端使用 jsonp。

我更喜欢选项 1) 但选项 2) 似乎要做的工作更少。

1) 应该是我的首选吗？

鉴于我的所有请求都将通过身份验证，2) 是否有任何问题。?

有没有其他简单的方法来解决这个问题？

问候，

沙迪亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:20:33.387

最简单的解决方案是使用[CORS](http://enable-cors.org/)，它允许您向两个不同的来源发送请求。但它并没有那么广泛传播（检查[caniuse](http://caniuse.com/cors)），所以如果你必须支持 IE8-9，它对你来说是不够的。

在您的情况下，我会尝试实施双重解决方案（例如 CORS + 服务器代理）。如果浏览器支持 CORS - 将请求直接发送到目标服务器，如果不支持 - 通过代理发送请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T17:30:36.007

很抱歉问，让您的客户端在不同的域上运行有什么好处？据我了解，您的客户的服务器将什么都不做......

如果您不是 REST 后端的“所有者”，也许这个后端应该为第三方应用程序开发一个授权系统，例如[oauth2](http://oauth.net/2/)。

然后，您的应用程序可以通过安全连接与后​​端对话。您可以在后端使用[scribe](https://github.com/fernandezpablo85/scribe-java)来执行此操作。

# php - Netsuite - 使用 php 工具包获取自定义记录

> ID：15802405
> 
> 赞同：1
> 
> 时间：2013-04-04T04:14:48.423
> 
> 标签：php, record, toolkit, netsuite

我接到了一个要完成的项目，客户要求从附加到每个客户的自定义记录中提供一个字段以显示在他们的网站上。我们在登录时与 Netsuite 集成，并将他们的数据保存在我们的数据库中，这样我们就不必继续访问 Netsuite（非常慢）。

登录时，我们访问 Netsuite 执行 SearchMultiSelectCustomField 并找到客户的公司，然后执行 CustomRecordSearchBasic 并使用他们的公司 ID 获取他们有权访问的项目列表。

我们遍历每个项目，然后遍历它们的自定义字段。其中一个字段的 typeId 为 -10，这意味着我们执行 ItemSearchBasic 来获取此项目的记录和项目的自定义字段，保存此项目的 internalId。

在这个循环结束时，我们有一个公司链接到的项目 ID 数组。我们还有公司 ID (custrecord_nn_item_customer) 和项目 ID (custrecord_nn_item_customer_list)。

我需要对自定义记录执行获取请求，以检查该客户是否已获得该项目的批准。

自定义记录的 ID 为“customrecord_custiem”，内部 ID 为“1”。该记录有 3 个字段（尽管客户的 Netsuite 记录页面仅显示 2 个）：

custrecord_lookup_item - 这是项目记录代码（上面的 custrecord_nn_item_customer_list） custrecord_custitem_code 是我需要的代码

我的问题（毕竟）是有没有人有任何例子或者可以指出我如何访问附加到客户的自定义记录的正确方向？我认为提供了所有必要的信息，但我以前从未使用过 Netsuite 或 PHP 工具包。

```
$this->depends('netsuite');
$this->netsuite->start();

// get the "customer" (aka company) that the user's contact record belongs to
$companySearch = $this->netsuite->complexObject('SearchMultiSelectCustomField')
    ->setFields(array(
        'searchValue' => new nsListOrRecordRef(array('internalId' => $companyId)),
        'internalId' => 'custrecord_nn_item_customer',
        'operator' => 'anyOf'
    ));

// Fetch items that the user's company has access to
$search = $this->netsuite->complexObject('CustomRecordSearchBasic')
    ->setFields(array(
        'recType' => new nsCustomRecordRef(array(
            'internalId' => 260,
            'type' => 'customRecord')
        ),
        'customFieldList' => array($companySearch)
    ));
    $response = $this->netsuite->client->search($search);

    // loop over the items
    foreach($this->netsuite->complexToSimple($response->recordList) as $record){
        //var_dump($record);
        $processor = null;
        $this_item = '';
        $this_person = '';
        // foreach custom field (all the fields we're interested in, common name etc. are custom)
        foreach($record['customFieldList']['customField'] as $customField){
            $processor = $customField['value'];
            $id = $processor['internalId'];
            $typeId = $processor['typeId'];

            if($customField['internalId']=='custrecord_nn_item_customer'){
                $this_person = $id;
            }elseif($customField['internalId']=='custrecord_nn_item_customer_list'){
                $this_item = $id;
            }

            // a typeId of -10 = an Inventory Item
            if($typeId == -10){

                // do an ItemSearchBasic to fetch the item with it's custom fields
                $itemSearch = $this->netsuite->complexObject('ItemSearchBasic')
                    ->setFields(array(
                        'internalId' => array(
                            'operator' => 'anyOf',
                            'searchValue' => array('type' => 'inventoryItem', 'internalId' => $id)
                        )
                    ));

                $itemSearch = $this->netsuite->client->search($itemSearch);

                // foreach custom item field
                if($v=@$this->netsuite->complexToSimple($itemSearch->recordList)){
                    foreach($v as $itemRecord){
                        //var_dump($itemRecord);
                        $item = array('id' => $itemRecord['internalId']);

                        $items[] = $item;
                    }
                }
            }
        }
    } 
```

在 foreach 循环中，我需要获取公司 ID 的 customrecord 字段和项目 ID 的当前迭代。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T22:56:39.803

使用您需要的结果列设置保存的搜索。不用担心被客户过滤。

从您的代码中调用搜索，并动态过滤当前客户。

你的代码应该是大约 5-10 行才能完成，而且应该非常快。

# django - 在 Heroku 上没有收到电子邮件回溯 Django

> ID：15802411
> 
> 赞同：1
> 
> 时间：2013-04-04T04:15:15.520
> 
> 标签：django, heroku

我有一个应用程序，某些页面出现内部服务器错误。我在 Heroku ( `heroku config:add <variable=value>`) 中配置了环境变量，但无法通过电子邮件获取回溯。`DEBUG = False`我的 settings.py 与, 和 settings_local.py正在生产中`DEBUG = True`

```
DEFAULT_FROM_EMAIL = 'Name <email@gmail.com>'
EMAIL_USE_TLS = True
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = os.environ.get ('EMAIL_HOST_USER')
EMAIL_HOST_PASSWORD = os.environ.get ('EMAIL_HOST_PASSWORD')
EMAIL_PORT = 587 
```

`EMAIL_HOST_USER`然而，`EMAIL_HOST_PASSWORD`变量被编程到 Heroku 环境中，即使访问我知道会出错的页面，也不会得到任何东西。

我究竟做错了什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T11:19:50.993

将您的姓名和邮件放入`ADMINS`in `settings.py`。

```
ADMINS = (
    # ('Your Name', 'your_email@example.com'),
) 
```

# uiwebview - 在加载之前找到 UIWebview 的内容高度

> ID：15802412
> 
> 赞同：3
> 
> 时间：2013-04-04T04:15:20.813
> 
> 标签：uiwebview, height

我在每个单元格中都有几个自定义单元格和 Web 视图。现在，我的要求是找到要在 webview 上加载的 HTML 字符串的高度，然后基于此更改自定义单元格高度和 webview 高度。

我知道文档的高度可以在 -webViewDidFinishLoading 委托中找到，但是在我的应用程序中，每个单元格内都有很多单元格和 webview，所以我觉得应用程序在滚动和进行不必要的回调时会变慢

目前我正在这样做，这给了我字符串高度。

```
 -(float)getDynemicHeight:(NSString *)pstrText
    {
        CGSize constraint = CGSizeMake(683,600);

        CGSize size = [pstrText sizeWithFont:[UIFont systemFontOfSize:18] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

        CGFloat height = MAX(size.height, 44.0f);

        if (height>400) {
            return 400;
        }

        return height;
    } 
```

然而，这会导致问题，因为偶数`<div>`元素被视为字符串，因此返回更大的高度值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:52:44.503

在 iOS 6 中，如果您只想显示样式文本（不是混入图像的文本或类似的东西），您可能希望使用 NSAttributedString 而不是 web 视图。它允许您在不同的文本延伸、段落边距等中创建具有不同样式的文本。它的指标定义明确，并带有测量方法。简单的 UIView 子类（例如 UILabel）现在可以显示属性字符串。或者你可以自己画出来，直接进入界面。

[http://www.aeth.com/iOSBook/ch23.html#_attributed_strings](http://www.apeth.com/iOSBook/ch23.html#_attributed_strings)

如果你不能做到这一点，那么你想要做的基本上是不可能的。在 Web 视图绘制复杂的 HTML 之前，您不知道 Web 视图将如何绘制复杂的 HTML。您只需更改应用程序的架构。例如，您可以提前绘制所有 Web 视图，以便在 table-dataSource 期间获得所需的信息。

# dataset - Highstock - 如何处理大型数据集

> ID：15802415
> 
> 赞同：1
> 
> 时间：2013-04-04T04:16:09.757
> 
> 标签：dataset, highstock

我有一个 highstock 去查询我的数据库中的数据。我的数据集还不大，但我预计它会增长到拥有数十万个数据点。这是很多数据！我无法通过回电将其传回。

我想一定有办法解决这个问题。也许您可以将参数传递给查询函数/.php？我查看了#plotOptions.series.dataGrouping，但这仍然需要原始的完整数据集。

大型猫科动物是如何做到的？雅虎和谷歌如何存储 XX 年的离散股票代码数据？N 次后，他们是否取历史数据，进行近似，并降低分辨率？如果有人能指出我正确的方向，我敢肯定它之前已经被覆盖过，但是一些搜索并没有发现任何问题。

谢谢，

-光盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:39:48.670

通常以分钟分辨率知道一年前的值是没有意义的。这取决于您的应用程序，但如果目的是提供财务信息，我认为可以假设精细分辨率仅在最近的日期才有意义。同样的考虑也适用于记录性能计数器（例如 MRTG），以及许多其他事情。

例如，您可以保持：

*   “上周”系列，分辨率为 1 分钟。
*   具有小时分辨率的“最后三个月”系列。
*   一个历史性的系列，每天都有分辨率。

除了最好的系列之外，所有系列不仅应存储平均值，还应存储每个时期观察到的最小值和最大值，以及可能感兴趣的其他统计指标。

# wcf - 如何覆盖 wcf 服务合同中的方法以允许使用不同的 Web 方法？

> ID：15802416
> 
> 赞同：2
> 
> 时间：2013-04-04T04:16:12.213
> 
> 标签：wcf, backbone.js

我正在使用 wcf Web 服务作为backbone.js 应用程序的持久层。

```
 [OperationContract]
    [WebGet]
    public IEnumerable<AnalysisParameterSet> AnalysisParameters()
    {
     // implementation
    }

    [OperationContract]
    [WebInvoke(Method = "POST")]
    public void AnalysisParameters(IEnumerable<AnalysisParameterSet> parameterSets)
    {
     // implementation
    } 
```

我想在服务上创建两种名称相同但签名不同的方法，一种用于 GET，一种用于 POST。

但是 wcf 抱怨有 2 个方法具有相同的名称。我知道我可以使用 OperationContract 的 name 属性来区分它们。这并不理想，因为主干更喜欢方法共享相同的名称。

我可以对 GET 和 POST 使用相同的方法名称吗？

如果我不能在 WCF 中做到这一点。我将如何修改backbone.js 以使用不同的方法进行发布和获取。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T20:39:34.117

我相信你想要的是这样的：

```
[OperationContract]
[WebGet(UriTemplate = "/AnalysisParameters")]
public IEnumerable<AnalysisParameterSet> GetAnalysisParameters()
{
 // implementation
}

[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "/AnalysisParameters")]
public void PostAnalysisParameters(IEnumerable<AnalysisParameterSet> parameterSets)
{
 // implementation
} 
```

根据 http 方法（post/get），将调用一个或另一个函数。

# c# - 从 C# 应用程序创建 excel 文件

> ID：15802417
> 
> 赞同：0
> 
> 时间：2013-04-04T04:16:19.230
> 
> 标签：c#, .net, excel

我正在尝试创建一个 excel 文件表单 c# 应用程序。

我的代码如下，

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Excel = Microsoft.Office.Interop.Excel;

public class ExcelFileCreation
{
    Excel.Application xlApp;
    Excel.Workbook xlWorkBook;
    Excel.Worksheet xlWorkSheet;
    object misValue = System.Reflection.Missing.Value;
    ***xlApp = new Excel.ApplicationClass();***
    xlWorkBook = xlApp.Workbooks.Add(misValue);

    //and further lines of code.....
} 
```

我在上面突出显示的行中收到以下错误，

无法嵌入互操作类型“Microsoft.Office.Interop.Excel.ApplicationClass”。请改用适用的接口。

请帮我解决这个问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:22:18.983

使用`Excel.Application`代替`Excel.ApplicationClass`

```
xlApp = new Excel.Application(); 
```

更新：您正在引用“嵌入互操作类型”设置为的互操作程序集`true`。根据这篇[文章](http://blogs.msdn.com/b/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx) `Class`，类型包含元数据**和**代码，而接口只包含元数据。嵌入元数据是安全的，但不是任何可能包含可执行代码的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:22:35.303

代替

```
xlApp = new Excel.ApplicationClass(); 
```

和

```
xlApp = new Excel.Application(); 
```

# joomla - JFolder::create: 无法创建目录 - Joomla

> ID：15802419
> 
> 赞同：7
> 
> 时间：2013-04-04T04:16:36.553
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla3.0, joomla3.1

当我尝试安装组件、模块或插件时，出现以下错误。

```
JFolder::create: Could not create directory 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-04T04:16:36.553

`configuration.php`如图所示，在您的配置文件 () 中更改以下变量。

```
public $log_path = '/logs';
public $tmp_path = '/tmp'; 
```

还要确保这些文件夹具有文件夹权限 755。

[阅读更多](http://forum.joomla.org/viewtopic.php?t=252418)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-27T03:22:31.357

现在我找到了两个解决这个问题的解决方案，并且它们都运行得很好：

解决方案一：

`tmp`首先使用这个技巧找到你的文件夹的确切绝对路径：

例如，在您的网站根目录中创建一个 PHP 文件`path.php`

将此代码段放入文件中并点击保存按钮

```
<?php
$path = getcwd();
echo "Your Absolute Path is: ";
echo $path;
?> 
```

`yourdomain.com/path.php`在浏览器中导航到

今后：

1.  登录到您的 Joomla 管理员面板。
2.  转到全局配置
3.  单击“服务器”选项卡
4.  将路径更改为`"Absolute Path(you've just found)"/tmp`
5.  在您的 .htaccess 文件中插入这行代码：`php_value open_basedir NULL`

    这个解决方案对我来说效果很好，它不处理任何 Joomla 的核心文件黑客攻击。

解决方案二：

1.  登录到您的 Joomla 管理员面板。
2.  转到全局配置
3.  单击“服务器”选项卡
4.  将路径从更改`/public_html/tmp`为刚刚`tmp`
5.  登录控制面板（CPanel），（或者您可以为此使用FTP帐户）
6.  打开文件管理器（如果您使用的是 FTP，此步骤必须跳过）
7.  打开文件夹“库”
8.  打开文件夹“joomla”
9.  打开文件夹“文件系统”
10.  右键单击“folder.php”，然后单击“编辑”。
11.  寻找这一行，(search = obd): `$obd = ini_get('open_basedir');`用 // 开头的那一行注释掉，这样它就变成了：`//$obd = ini_get('open_basedir');`
12.  保存并关闭。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-10T12:06:43.980

您可以将 Joomla 文件夹的所有者更改为您的 apache 服务器用户。

您可以使用以下命令找到 apache 服务器用户：

```
ps aux | grep -v root | grep apache | cut -d\  -f1 | sort | uniq 
```

来源：[https ://serverfault.com/questions/125865/finding-out-what-user-apache-is-running-as](https://serverfault.com/questions/125865/finding-out-what-user-apache-is-running-as)

对于 Ubuntu，它是`www-data`.

知道 apache 用户名后，您可以更改 Joomla 安装的所有文件夹和文件的所有者。您可以使用以下命令执行此操作：

（我想你的 apache 用户是`www-data`）

```
sudo chown -R www-data:www-data /path/to/your/joomla 
```

如果您已经在 J​​oomla 目录中，则可以运行以下命令：

```
sudo chown -R www-data:www-data . 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-05T06:29:02.040

经过这个错误的很多麻烦后，我得到了突破。在 configuration.php 文件中，编辑 var logpath n tmppath 值如下`var $log_path = '/home/public_html/sitename/logs'; var $tmp_path = '/home/public_html/sitename/tmp';`

这肯定会奏效。并为我工作。

# python - 从matlab到repmat的python的转换

> ID：15802430
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:18:01.580
> 
> 标签：python, matlab, matrix

我想将给定的matlab代码转换为python

```
img_o = repmat(fill_value, osize); 
```

这里 fill_value 是一个`1x1x3`矩阵， `osize=[320 320]` 输出矩阵是`320x320x3`

我试过了

```
img_o = tile(fill_value, osize) 
```

在哪里

```
fill_value = numpy.array([[[0, 0, 0]]])
osize=[320,320] 
```

在这里我得到一个矩阵`1x320x960`而不是`320x320x3 matrix` 请帮助解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:01:59.143

Numpy 做了一些不直观的事情，它不直观地称之为“广播”。这就是你需要的（只是你的尺寸向量上的一个更明确的维度）：

```
>>> osize = (320, 320, 1)
>>> img_o = numpy.tile(fill_value, osize)
>>> img_o.shape
(320, 320, 3) 
```

# iphone - UITextField 输入字符串更新

> ID：15802432
> 
> 赞同：0
> 
> 时间：2013-04-04T04:18:05.703
> 
> 标签：iphone, ios, xcode, ipad

我有一个文本字段，我想用数字键盘在其中输入。我希望文本字段一开始就像 00.00，当用户输入它时，它会从左到右或从右到左更新。例如，如果他键入 2 后跟 3，则文本字段应该是 23.00，并且用户只允许输入小数点后最多 2 位的数字。我怎样才能获得这个功能？

提前致谢。

干杯， Siavash

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:31:05.057

在`.h`

```
@property (assign, nonatomic) int maximumFractionDigits;
@property (strong, nonatomic) NSString* decimalSeparator; 
```

`loadView`放入或`viewDidLoad`放入此，

```
NSNumberFormatter* numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
[numberFormatter setCurrencyCode:@"GBP"];
self.maximumFractionDigits = numberFormatter.maximumFractionDigits;
self.decimalSeparator = numberFormatter.decimalSeparator;
[numberFormatter release]; 
```

在`UITextFieldDelegate`方法

```
- (BOOL)textField:(UITextField*)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString*)string {
// get current cursor position
UITextRange* selectedRange = [textField selectedTextRange];
UITextPosition* start = textField.beginningOfDocument;
NSInteger cursorOffset = [textField offsetFromPosition:start toPosition:selectedRange.start];
// Update the string in the text input
NSMutableString* currentString = [NSMutableString stringWithString:textField.text];
NSUInteger currentLength = currentString.length;
[currentString replaceCharactersInRange:range withString:string];
// Strip out the decimal separator
[currentString replaceOccurrencesOfString:self.decimalSeparator withString:@"" options:NSLiteralSearch range:NSMakeRange(0, [currentString length])];
// Generate a new string for the text input
int currentValue = [currentString intValue];
NSString* format = [NSString stringWithFormat:@"%%.%df", self.maximumFractionDigits];
double minorUnitsPerMajor = pow(10, self.maximumFractionDigits);
NSString* newString = [NSString stringWithFormat:format, currentValue / minorUnitsPerMajor];
textField.text = newString;
// if the cursor was not at the end of the string being entered, restore cursor position
if (cursorOffset != currentLength) {
    int lengthDelta = newString.length - currentLength;
    int newCursorOffset = MAX(0, MIN(newString.length, cursorOffset + lengthDelta));
    UITextPosition* newPosition = [textField positionFromPosition:textField.beginningOfDocument offset:newCursorOffset];
    UITextRange* newRange = [textField textRangeFromPosition:newPosition toPosition:newPosition];
    [textField setSelectedTextRange:newRange];
}

return NO; 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:22:43.200

您可以使用以下委托方法。根据您的要求进行更改。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string{
NSString *replacedSting = [textField.text stringByReplacingCharactersInRange:range withString:string];

NSArray *noOfDigits = [replacedSting componentsSeparatedByString:@"."];
if([noOfDigits count]>=2)
{
    NSString *sepStr=[NSString stringWithFormat:@"%@",[noOfDigits objectAtIndex:1]];
    return !([sepStr length]>1);
}
return YES;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:25:21.497

如果您想在个位数之前设置十位数，这有点小技巧，但我认为它可以工作。您可以使用类似 UITextField 的委托方法

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

确保设置文本字段的委托，然后使用此方法。您可以自己保留一个计数器，以确定每次击键时要更改的索引。您会忽略该范围，并自己将其更改为您正在跟踪的范围。例如，从索引 0 开始并在每次调用该方法时递增，但在 X 秒内没有按下按钮后，重置为第一个索引。

否则，Ramu 的答案应该对你有用！

# arrays - 如何创建像数组这样的可变集合类型？

> ID：15802434
> 
> 赞同：1
> 
> 时间：2013-04-04T04:18:07.770
> 
> 标签：arrays, collections, f#, mutable

我正在尝试编写一种类型来表示 GPU 设备中的指针，它应该像一个数组一样，具有用于获取和设置的索引属性。如果元素类型是原始类型，我没有问题，但是当我使用结构时，我无法更改其成员的值。

请参阅此代码：

```
#nowarn "9"

open System
open System.Runtime.InteropServices

[<Struct;StructLayout(LayoutKind.Sequential)>]
type MyStruct =
    val mutable x : int
    val mutable y : int
    val mutable z : int

    override this.ToString() = sprintf "(%d,%d,%d)" this.x this.y this.z

let deviceOnly() = failwith "this function should be used in quotation only"

type DevicePtr<'T>(h:nativeint) =
    member this.Handle = h
    member this.Item with get (idx:int) : 'T = deviceOnly() and set (idx:int) (value:'T) : unit = deviceOnly()
    member this.Reinterpret<'T2>() = DevicePtr<'T2>(h)
    member this.Volatile() = DevicePtr<'T>(h)
    static member (+) (ptr:DevicePtr<'T>, offset:int) = DevicePtr<'T>(ptr.Handle + nativeint(offset * sizeof<'T>))

let test() =
    let mutable test1 = MyStruct()
    test1.x <- 1

let foo (collection:MyStruct[]) =
    collection.[0].x <- 1

let bar (collection:DevicePtr<MyStruct>) =
    collection.[0].x <- 1
    //error FS0257:
    // Invalid mutation of a constant expression.
    // Consider copying the expression to a mutable local, e.g. 'let mutable x = ...'. 
```

因此，类型是 DevicePtr<'T>，并且它具有使用 get 和 set 方法索引的属性 Item。但是get方法只返回一个值'T，所以我不能改变它。但是系统阵列有效。

有人有这样的经验吗？创建一个像数组一样的类型？我希望索引属性的 get 函数返回一个可变的 ref 而不是一个值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:32:24.700

您无法创建与数组等结构一起使用的类型，因为语言和运行时对其他类无法获得的数组进行了特殊处理。

对于数组，访问一个结构元素的表达式（如在您的`foo`函数中）会导致该元素被直接修改到位。这`collection.[0]`有效地设置了一个“指针”或“引用”到一个元素，`.x`然后将表达式应用于该元素，允许您在适当的位置操作对象。

对于其他类，索引器只是另一个函数，这意味着正在返回值的副本。因此，在`bar`函数中，`collection.[0]`创建了返回值的副本，而不是从数组中获得的引用。因为`.x`会修改临时副本，所以编译器会发出您看到的错误。（对于类似的代码，C# 或 VB 中会出现非常类似的警告。）正如消息所示，您需要创建一个变量来保存副本、修改副本并将其分配回`collection.[0]`.

# dynamics-crm-2011 - 如何在 CRM 中使用 Ribbon Workbench 以特定形式添加按钮

> ID：15802437
> 
> 赞同：0
> 
> 时间：2013-04-04T04:18:30.803
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm, dynamics-crm-4, dynamics-crm-online

我需要在 CRM 中使用 Ribbon 工作台以特定形式添加 Button，那么如何执行此操作？

屏幕截图如下所示，当我在导航窗格中单击广告系列时，我需要功能区中的“添加到广告系列”按钮。

![在此处输入图像描述](https://i.stack.imgur.com/nIERb.png)

但我没有收到“添加到广告系列”按钮。

如何得到这个？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T11:03:39.630

要在 Ribbon Workbench 中执行此操作，您需要：
1\. 创建一个包含“Campaign”实体
的解决方案 2\. 将解决方案加载到 Ribbon Workbench。
3\. 在“实体”面板中选择“活动”实体。
4\. 使用设计图面右上角的下拉菜单选择“子网格”功​​能区。
5\. 您可以在此处将您的按钮添加到功能区，它将出现在广告系列子网格中。

hth，
斯科特

# ruby-on-rails - 多租户应用程序时区 rails

> ID：15802441
> 
> 赞同：0
> 
> 时间：2013-04-04T04:19:02.773
> 
> 标签：ruby-on-rails, date, timezone

我有一个多租户 Rails 应用程序，一些模型有一个日期字段。是否可以为每条记录设置不同的时区。我会做一些事情，比如添加一个名为 time zone 的字段然后做`Date.somemethodthatsetstimezone(timezone).now()`吗？对不起，如果这是一个不好的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T07:05:00.653

您的问题的简短回答是肯定的 - 但请确保您知道自己在做什么。

你会想看看[ActiveSupport::TimeZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeZone.html)和[ActiveSupport::TimeWithZone](http://api.rubyonrails.org/classes/ActiveSupport/TimeWithZone.html)。ActiveSupport::TimeZone 提供时区作为值对象作为字符串访问。例如，您可以将字符串存储`'Eastern Time (US & Canada)'`在模型中的 time_zone 列中（比如说`@project`），然后使用 检索时区实例`ActiveSupport::TimeZone[@project.time_zone]`。

您可以使用类似的设置当前进程的时区`Time.zone = 'Eastern Time (US & Canada)'`。Rails 还允许您在应用程序配置中为您的应用程序配置时区。

您可以调用`Time.zone.now`以返回当前 ruby​​ 进程设置的时区中的当前时间（作为 的实例`ActiveSupport::TimeWithZone`）。

您可以调用`Time.now.in_time_zone('Eastern Time (US & Canada)')`以获取给定时区的当前时间。

您甚至可以为代码块设置时区：

```
Time.use_zone('Eastern Time (US & Canada)') do
  # do stuff in eastern time

  Time.now 
  # => current eastern time 
end 
```

此方法允许您使用模型中的时区和周围过滤器为整个 rails 请求设置时区：

```
around_filter :project_time_zone

# actions use project's configured time zone

private

def project_time_zone(&block)
  Time.use_zone(@project.time_zone, &block)
end 
```

其中一种方法应该可以满足您的需求。

# php - jQuery POST 多维表单数组

> ID：15802442
> 
> 赞同：1
> 
> 时间：2013-04-04T04:19:19.483
> 
> 标签：php, jquery, html, ajax

我有一个表单，它从它的所有输入中收集数据作为多维数组，并使用标准表单提交函数，这会加载目标页面，PHP 脚本会完美地读取多维数组并产生所需的输出。

```
<form action="target.php" method="post">

<?php foreach ($days as $day) { ?>

    <select name="roster[<?php echo $day->date() ?>][1]"> ... </select>
    <select name="roster[<?php echo $day->date() ?>][2]"> ... </select>
    <select name="roster[<?php echo $day->date() ?>][3]"> ... </select>

<?php } ?>

<input type="submit">
</form> 
```

在目标 PHP 文件中，我只是将它放在 上`$_REQUEST['roster']`，然后我可以将它作为一个普通的 PHP 数组使用。尽可能简单。

但是，我想使用 jQuery 将其转换为 AJAX 请求。我已经阅读了一些建议，说使用`$('form').serialize()`or获取表单数据`$('form').serializeArray()`，但这不能正确读取数组，并产生一些奇怪的输出。

我目前正在尝试其他建议，这些建议基本上涉及遍历 DOM 并从元素数据构造一个新的 javascript 数组或对象，然后通过 发送它`$.ajax()`，但这一切似乎都不必要地复杂。

我的问题是：有没有一种通过 jQuery 和发送表单数组数据的简单方法`$.ajax()`？

十有八九有，而且会明显流血，但目前我看不到！

编辑：

以下是标准表单提交函数的`print_r`输出：（为便于阅读而进行了格式化）：`$_REQUEST['roster']``<pre>`

```
Array
(
[2013-04-06] => Array
    (
        [1] => 8
        [2] => 3
        [3] => 7
    )

[2013-04-13] => Array
    (
        [1] => 4
        [2] => 3
        [3] => 7
    )

[2013-04-20] => Array
    (
        [1] => 8
        [2] => 17
        [3] => 7
    )

[2013-04-27] => Array
    (
        [1] => 4
        [2] => 3
        [3] => 7
    )

) 
```

这是输出`$('form').serialize()`：

`roster%5B2013-04-06%5D%5B1%5D=8&roster%5B2013-04-06%5D%5B2%5D=3&roster%5B2013-04-06%5D%5B3%5D=7&roster%5B2013-04-13%5D%5B1%5D=0&roster%5B2013-04-13%5D%5B2%5D=0&roster%5B2013-04-13%5D%5B3%5D=0&roster%5B2013-04-20%5D%5B1%5D=0&roster%5B2013-04-20%5D%5B2%5D=0&roster%5B2013-04-20%5D%5B3%5D=0&roster%5B2013-04-27%5D%5B1%5D=0&roster%5B2013-04-27%5D%5B2%5D=0&roster%5B2013-04-27%5D%5B3%5D=0`

和输出`$('form').serializeArray()`：

`[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]`

如果我然后从每个`[object Object]`使用中提取数据

```
$.each(data, function(index1, value1) {
    $.each(value1, function(index2, value2) {
        $('body').append('index1: '+index1+' value1: '+value1+' { index2: '+index2+' value2: '+value2+' }');
    });
}); 
```

我得到：

```
index1: 0 value1: [object Object] { index2: name  value2: roster[2013-04-06][1] }
index1: 0 value1: [object Object] { index2: value value2: 8 }
index1: 1 value1: [object Object] { index2: name  value2: roster[2013-04-06][2] }
index1: 1 value1: [object Object] { index2: value value2: 3 } 
```

...等...对于每个输入。

显然，从`$.each`输出中，我应该能够以 object.name 和 object.value 的形式访问数据，然后将所有内容格式化为一个新数组以使其与我的 PHP 脚本一起使用，但这是这样做的方法吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T07:50:07.043

```
The .serialize() method creates a text string in standard URL-encoded notation. 
```

这意味着它将用`[`and`]`替换`%5B`and `%5D`。由于它是一个文本字符串，因此一种方法是将它们替换回来。

例子

```
var ser = $('#id').serialize();

ser = ser.replace(/%5B/g,"[");
ser = ser.replace(/%5D/g,"]"); 
```

[JS小提琴](http://jsfiddle.net/4zfAe/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T21:24:44.733

更简单的是使用 jQuerys $.param() 函数。[http://api.jquery.com/jquery.param/](http://api.jquery.com/jquery.param/)

# php - 将复选框值发布到 php 文件

> ID：15802443
> 
> 赞同：2
> 
> 时间：2013-04-04T04:19:27.120
> 
> 标签：php, jquery, ajax, post, checkbox

我正在尝试编写一个脚本来发布带有已检查的 jQuery 复选框 ID（用于 php 删除脚本）。

我有这样的东西

```
 <form>
    <input type="checkbox" name="id" id="id" value='1'>
    <input type="checkbox" name="id" id="id" value='2'>
    <input type="checkbox" name="id" id="id" value='3'>
    <input type="button" name="DELETE" id="DELETE">
     </form> 
```

所以我想将这些值（ids）发布到一个 php 文件 delete.php，我该如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:16:57.293

**HTML**

```
<form>
    <input type="checkbox" name="id" value='1'>
    <input type="checkbox" name="id" value='2'>
    <input type="checkbox" name="id" value='3'>
    <input type="button" name="DELETE" id="DELETE">
</form> 
```

**查询**

```
<script>
$(document).ready(function(){

    $("#delete").click(function(){

        var data = $('input:checkbox:checked').map(function(){
             return this.value;
        }).get();

        var dataString = "imgList="+ data;

       $.post('delete.php',dataString,function(theResponse){
       //// Check theResponse
       });               

   });      
});
</script> 
```

**PHP**

```
$imgList = $_REQUEST['imgList'];

$i = 0;

$token = strtok($imgList, ","); 

$imgArray = array();

while ($token != false){

    $imgArray[$i] = (string)$token;

    $token = strtok(",");

    $i++;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:23:09.297

有很多方法可以做。将表单集合发送到 php 页面。确保您的输入和其他元素具有唯一 ID。

```
<form action="yourUrl/Method" Method="POST"> 
 <input type="checkbox" name="id" id="id1" value='1'>
    <input type="checkbox" name="id" id="id2" value='2'>
    <input type="checkbox" name="id" id="id3" value='3'>
    <input type="button" name="DELETE" id="DELETE">
</form> 
```

然后在 PHP 中访问 Request 对象并使用这些值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:24:31.827

单个复选框

```
<form action="checkbox-form.php" method="post">
    Do you need wheelchair access?
    <input type="checkbox" name="formWheelchair" value="Yes" />
    <input type="submit" name="formSubmit" value="Submit" />
</form> 
```

在 PHP 脚本中，我们可以从 $_POST 数组中获取提交的选项。如果 $_POST['formWheelchair'] 为“是”，则选中该框。如果未选中该复选框，则不会设置 $_POST['formWheelchair']。

下面是一个 PHP 处理表单的例子：

```
<?php

      if(isset($_POST['formWheelchair']) && 
      $_POST['formWheelchair'] == 'Yes') 
      {
          echo "Need wheelchair access.";
      }
     else
      {
          echo "Do not Need wheelchair access.";
      }  

  ?> 
```

$_POST['formSubmit'] 的值设置为“是”，因为输入标签中的值属性是“是”。

您可以将值设置为“1”或“on”而不是“Yes”。确保 PHP 代码中的检查也相应更新。

更多信息请参阅以下文章。

[http://www.html-form-guide.com/php-form/php-form-checkbox.html](http://www.html-form-guide.com/php-form/php-form-checkbox.html)

[确定是否选中复选框 php $_GET](https://stackoverflow.com/questions/3488270/determine-whether-checkbox-is-checked-php-get)

希望能帮助到你

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T04:28:10.487

我假设您想通过使用 jQuery ajax 调用发布到 php 来实现这一点

**html**

```
<form>
    <input type="checkbox" name="id[]" id="id" value='1'>
    <input type="checkbox" name="id[]" id="id" value='2'>
    <input type="checkbox" name="id[]" id="id" value='3'>
    <input type="button" name="DELETE" id="DELETE">
</form> 
```

**带有 jQ​​uery 的 Javascript**

```
var selected_values = $("input[name='id[]']:checked"); 
```

**直接post到delete.php**

```
<?php
    // $_POST['id'] will return an array.
    $selected_values = $_POST['id'];
?> 
```

# canvas - 在three.js中拉伸纹理形状

> ID：15802448
> 
> 赞同：3
> 
> 时间：2013-04-04T04:20:25.853
> 
> 标签：canvas, 3d, three.js, webgl, uv-mapping

我正在尝试在 Three.js 中对挤压形状进行纹理处理。在下面的代码中，我创建了一个弯曲的形状，拉伸该形状，然后使用我从 Jpg 文件加载的几何图形和材质创建一个网格。线框显示，但纹理不显示。纹理大小为 512*512px。

我使用正确的方法吗？我需要手动 UV 贴图纹理吗？我希望纹理包裹到整个挤压面，而不是每个单独的四边形。

```
var x = -50, y = 20, z = 150;
var rx = 0, ry = Math.PI/4, rz = 0;
var scale = 1;
var color = 0x00ff00;

var shape = new THREE.Shape();

shape.moveTo( x, y );
shape.quadraticCurveTo(x+50, y, x+100, y+50);
shape.quadraticCurveTo(x+50, y, x, y);      

var texture = new THREE.ImageUtils.loadTexture('images/checkerboard.jpg');        
var material = new THREE.MeshBasicMaterial({ map:texture, doubleSided:true });

/* 3D */
var extrudeSettings = { amount: 100 };
extrudeSettings.bevelEnabled = false;
extrudeSettings.steps = 1;

var geometry = new THREE.ExtrudeGeometry( shape, extrudeSettings );       

//var mesh = new THREE.Mesh( geometry, material );
var mesh = THREE.SceneUtils.createMultiMaterialObject( geometry, [ material, new THREE.MeshBasicMaterial( { color: 0x000000, wireframe: true, transparent: true } ) ] );
mesh.position.set( x, y, z);
mesh.rotation.set( rx, ry, rz );

scene.add( mesh ); 
```

![截屏](https://i.imgur.com/lOowYIM.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:09:49.313

`ExtrudeGeometry`最初是为挤出字体而编写的，它为您创建的 UV 可能无法正常工作。您必须手动提供 UV。

检查源代码，您将看到您可以选择替换`THREE.ExtrudeGeometry.WorldUVGenerator`为您自己的。

# app-store-connect - “您的应用程序正在上传”永远到 iTunes Connect

> ID：15802454
> 
> 赞同：18
> 
> 时间：2013-04-04T04:21:08.237
> 
> 标签：app-store-connect

我尝试为我的应用程序上传更新版本，一切似乎都很好，但我停留在您的应用程序正在上传屏幕一个多小时。我已经在 iTunes Connect 上创建了一个新版本并在其中显示“等待上传”。而且我的应用程序不是那么大的文件，只有更新版本。

谁能告诉我那里发生了什么以及如何解决它？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-04T05:35:32.310

这有 2 个步骤：
1.**制作 .ipa 文件**（通过单击 Distribue... 按钮选择“Save for Enterprise or Ad-Hoc Deployment”）
2.**在 Application Loader 中上传**（从 Xcode 的菜单栏中查找 -> Open Developer工具 -> 应用程序加载器）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-04T04:24:23.137

不要尝试通过 Xcode 上传，而是尝试使用 Application Loader。使用 App Store 分发配置文件将存档导出为 .ipa 文件。通过选择 Xcode → Open Developer Tool → Application Loader 启动 Application Loader，并将 .ipa 文件交给它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-26T20:27:14.813

我遇到了同样的问题，我发现这是我办公室的网络问题。当我尝试在家上传时，它可以毫不拖延地工作。因此，我假设苹果上传程序使用的任何特定端口在办公室被阻止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-29T12:05:51.947

我等了大约一个小时，我在管理器上重新归档了我的应用程序，然后我的提交很好

# c++ - 我如何知道要链接哪些库？

> ID：15802458
> 
> 赞同：7
> 
> 时间：2013-04-04T04:21:28.580
> 
> 标签：c++, c

有没有办法（在 Linux 中）确定我必须将 C/C++ 程序链接到哪些库？我不想错过一个库，即使在程序启动时未检测到未定义符号的情况下也是如此。另外，我当然想避免不必要的依赖。

我一般地提出了这个问题，但这里有一个具体的、非平凡的例子：直到最近，我认为我需要链接到*libpython*用于使用 Boost.Python 开发的 Python 模块。然而，事实并非如此：用 Boost.Python 编写一个模块；它甚至可能使用来自 Python C API 的函数，而不仅仅是 Boost.Python。链接*libboost_python*就足够了！这一点都不明显——至少我没有发现它被记录在案，并且有一些 Boost.Python 模块不必要地链接到*libpython*。此外，这很难检测到，因为*libboost_python.so*没有将*libpython*列为报告的依赖项`ldd`. （我相信 Python 库在这种情况下是动态加载的。）

[**稍后添加：**这与 Boost.Python 无关。此外，如果使用低级 Python C API，则可以编译 Python 模块并且不与*libpython*链接，并且可以正常工作。但是，请参阅下面的评论和答案，说明仍然应该链接到*libpython*。]

那么，我怎么能系统地发现不必要的链接而不是使用试错法呢？什么是好的一般程序，不仅适用于这个例子？

[**稍后添加：**这是我从对我的问题的评论中学到的。当我发布这个问题时，以下事实对我来说并不清楚，所以我现在把它们拼出来，为了将来访问这个讨论的人的利益，即使这些事情对有帮助的评论者来说是显而易见的。（谢谢！）

解析符号在 Linux 中以传递的方式工作（正如用户 MvG 和 millimoose 所指出的那样）。假设程序*A*需要从*libB*和*libC*解析符号。进一步假设*A*与*libB*相关联，而*libB*与*libC*相关联。然后*A*可以加载并执行，即使它不直接引用*libC*。

然而，正如评论者指出的那样，依赖这种传递性是不好的做法。对于用 C/C++ 编写的 Python 模块，这意味着应该链接到*libpython*。对于一般情况，目标*不*应该是确定链接和执行所需的最小库列表（正如我最初的问题以某种方式暗示的那样），而是真正为链接器提供必要的库，以便可以*直接*解析*所有*符号。

 *总结 Salgar 的回答，这些信息通常只能从所使用的库的文档中获得。此外，GCC 链接器标志`-Wl,--as-needed`对于识别真正不需要的库很有用。]

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T11:07:37.757

没有办法神奇地知道要包含哪些库，就像没有办法神奇地知道要包含哪些头文件一样。

可能有 10 个不同的库，它们都有同名的函数，都做着完全不同的事情。由您决定要使用哪一个。

通常情况并非如此，但它提供了一个示范点。

通常，如果您使用的是 boost 库或其他类似的库，它们的文档会让您知道需要链接哪个库。

如上所述，您可以过度包含并使用标志 --as-needed，但很多人会遇到问题，因为通常当您链接库时，它会在启动时被拉入，并且该库中的所有全局变量被初始化。是否需要这些全局变量对于链接器来说可能是一件令人困惑的事情。

简而言之，答案通常是阅读文档。或者编译代码并查看您得到哪些链接器错误，然后从那里开始找出您需要哪些库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-01T06:33:23.743

没有任何 /trivial/ 方法，但您可以使用 CMake 或 AutoConf 等构建管理工具让自己更轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-01T07:16:13.457

构建 Boost 时，您可以选择构建已编译库的静态或动态版本。自从我构建 boost 以来已经有一段时间了，但如果我记得如果你只是简单地构建它，它就可以构建两种口味。

这包括在：

*   [http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#library-naming](http://www.boost.org/doc/libs/1_53_0/more/getting_started/unix-variants.html#library-naming)

关于 boost.python，这里记录了静态或动态库链接之间的选项：

> *   [http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html#naming](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/building.html#naming)
> 
> 动态库是最安全和最通用的选择：
> 
> *   使用给定工具集构建的所有扩展模块都使用库代码的单个副本。3 该库包含一个类型转换注册表。因为一个注册表在所有扩展模块之间共享，所以在一个动态加载的扩展模块中向 Python 公开的类的实例可以传递给在另一个此类模块中公开的函数。
> 
> 在以下任何情况下使用静态 Boost.Python 库可能是合适的：
> 
> *   您正在[扩展](http://www.python.org/doc/current/ext/intro.html)python，并且动态加载的扩展模块中公开的类型不需要被任何其他 Boost.Python 扩展模块使用，并且您不在乎核心库代码是否在它们之间重复。
>     
>     
> *   您正在将 python 嵌入到您的应用程序中，并且：
>     
>     
>     *   您的目标是 MacOS 或 AIX 以外的 Unix 变体操作系统，其中动态加载的扩展模块可以“看到”作为可执行文件一部分的 Boost.Python 库符号。
>         
>         
>     *   或者，您已经将一些 Boost.Python 扩展模块静态链接到您的应用程序中，并且您不在乎是否有任何动态加载的 Boost.Python 扩展模块能够使用您的静态链接扩展模块公开的类型（反之亦然） ）。

所以，当然，这并不能解释你如何知道一般意义上的链接。只是一种特定的情况。

我认为，对于 boost.python 的工作原理以及人们在链接方面评论的不同体验的困惑，至少当你从这个角度来看时，可能会更有意义。*

# php - array_push 只返回已被推入新数组的最后一个元素？

> ID：15802459
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:21:35.527
> 
> 标签：php

所以我试图在循环中创建一个数组，以便我可以在代码的其他地方使用它的元素......

因此，当我尝试对数组进行 var_dump 以查看是否所有预期的元素都已添加到数组中时，我只看到新数组中数组的最后一个元素..谁能解释我为什么...下面是相关的部分代码

```
$select  = "SELECT * FROM DEVICES";
$result = mysql_query($select);
$result_count = mysql_num_rows($result)

if($result_count > 0) {
    while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {

        echo "<td> <a class='inline' href='/profiles.php?id=".$row['ID']."'><img src='".$row['Picture']."'width='50' height='50' class ='image' /></a> <br /> <br /> <div style='color: blue; font-weight:bold; font-size:15px;'> By ".$row['Name']." </td>";
        $user_array = array();
        if(array_key_exists("Device",$row)){
            array_push ($user_array,$row["Device"]);
        }    
    }
}
var_dump($user_array);  // only returns the last element inserted into $user_array. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:24:22.517

问题是每次执行 while 循环的主体时都在重置数组。

您必须在循环外初始化数组：

```
$user_array = array();

while ($row = mysql_fetch_array($result, MYSQL_ASSOC)) {

    echo "<td> <a class='inline' href='/profiles.php?id=".$row['ID']."'><img src='".$row['Picture']."'width='50' height='50' class ='image' /></a> <br /> <br /> <div style='color: blue; font-weight:bold; font-size:15px;'> By ".$row['Name']." </td>";

    if(array_key_exists("Device",$row)) {
        array_push ($user_array,$row["Device"]);
    }    
}

var_dump($user_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:25:07.090

试试这个，更简单。

```
$user_array = array();
if (isset($row["Device"]) && !empty($row["Device"])) {
  $user_array[] = $row["Device"];
} 
```

你有干净的数据数组。

```
print_r($user_array); 
```

# mysql - 列表顺序的数据 - 任何方式只使用一次列表？

> ID：15802461
> 
> 赞同：0
> 
> 时间：2013-04-04T04:21:49.390
> 
> 标签：mysql

在显示用户条件结果的页面上，我只想显示一些数据列（为了速度），然后允许用户稍后根据需要添加其他列，我的代码将使用 AJAX 来获取同时，符合条件的底层数据可能已经改变，可见表可能已经被 jQuery 使用，所以与其再次使用原始的 WHERE 子句，我认为收集数据会更安全来自可见表的 ID 并将它们传递给查询。考虑这样一个查询的例子：

```
SELECT t2.OtherField FROM t1 LEFT JOIN t2 ON t1.JoinID=t2.JoinID
WHERE t1.MyID in (1417,2120,217,590,6566,11764)
ORDER BY FIND_IN_SET(t1.MyID,'1417,2120,217,590,6566,11764') 
```

现在想象一下，列表中的 ID 数量可能远不止这些（如果用户没有考虑的话，可能会有数百甚至数千个）。重复相同的长列表`WHERE`，`FIND_IN_SET`似乎过度。有没有办法在只使用一次 ID 列表时获得相同的结果？我试过这个，但没有用（前六个结果是较旧的记录，而不是列表中的六个）：

```
SELECT t2.OtherField FROM t1 LEFT JOIN t2 ON t1.JoinID=t2.JoinID
ORDER BY FIND_IN_SET(t1.MyID,'1417,2120,217,590,6566,11764')
LIMIT 6 
```

或者即使由于重复列表而导致查询很大也没有关系？或者，如果我对这一切都错了，而你有不同的想法，我很想听听。

# jquery-plugins - Datatables TableTools - 无法找到 sSwfPath 的路径

> ID：15802470
> 
> 赞同：1
> 
> 时间：2013-04-04T04:22:52.247
> 
> 标签：jquery-plugins, datatables, codeigniter-2, tabletools

我正在使用 codeigniter 框架来构建我的 Web 应用程序。我需要将我的表从数据表导出到 csv 和 excel。但是在数据表 TableTools 中加载 sSwfPath 时出现错误：

我已包含以下库：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
<script src="http://localhost/codegen/assets/js/jquery.dataTables.js" type="text/javascript"></script>
<script src="http://localhost/codegen/js/jquery.dataTables.columnFilter.js" type="text/javascript"></script>
<script src="http://localhost/codegen/media/js/ZeroClipboard.js" type="text/javascript"></script>
<script src="http://localhost/codegen/media/js/TableTools.js" type="text/javascript"></script> 
```

我的 jquery 数据表如下：

```
$(document).ready(function(){
    var oTable = $('#datatables').dataTable({
        "sPaginationType":"full_numbers",
        "sDom": 'Tlfrtip',
        "oTableTools": {
            "sSwfPath": "<?php base_url();?>/application/libraries/jQuery/media/swf/copy_cvs_xls_pdf.swf"  // 404 error - File not found
        },
        "sScrollX": "100%",
        "bScrollCollapse": true,
        "bAutoWidth": true,
        "aaSorting":[[0, "asc"]],
        "bJQueryUI":true
    }).columnFilter({
        aoColumns: [ null,
                     null,
                     { type: "select", values: [ 'male', 'female']  },
                     null,
                     null,
                     null,
                     null,
                     { type: "select", values: [ '1', '2', '3', '4', '5', '6', '7','8','9','10']  },
                     { type: "select", values: [ 'A', 'B', 'C']  },
                     null,
                     { type: "select", values: ['P', 'A'] },
                     null,
                     null,
                     null
            ]
    });
}); 
```

当我使用 codeigniter 时，我已将媒体文件放置在放置所有 jquery css 文件的相同位置

```
//codegen
   // media
   // css
   // jquery 
```

它显示复制、Excel、打印按钮但不起作用。但是当我单击 Excel 按钮时，仍然没有发生任何事情。我的错是什么？

还，

我无法猜测为什么在加载 sSwfPath 时出现 404 错误？

请让我知道是否有任何遗漏或我是否在任何地方错了..

这会有很大帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T05:24:51.760

它不在媒体文件夹中。当您从 datatables.net 下载整个 src 代码时，它位于名为“extra”的文件夹中，与 media 文件夹处于同一级别。

# python - Python 使用正则表达式搜索所有 XML 元素

> ID：15802472
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:22:57.183
> 
> 标签：python, xml

我有一棵包含许多嵌套元素的大树，我正在尝试使用正则表达式递归搜索所有元素并返回匹配计数。有相当多的 XML python 模块 - 任何人都可以建议一个好的起点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:32:22.347

您可能想尝试[xml.dom.minidom](http://docs.python.org/2/library/xml.dom.minidom.html)。我以前用过，对我来说效果很好。

您可以遍历 XML 树，并使用您的正则表达式模式来过滤节点。

# winforms - 如何在 Visual Studio 设计器中取消固定和移动表单？

> ID：15802473
> 
> 赞同：1
> 
> 时间：2013-04-04T04:22:57.593
> 
> 标签：winforms, visual-studio, visual-studio-designer

在 Visual Studio 中，表单被固定在 IDE 工作区的左上角，就像固定在那里一样。你如何解开它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:40:54.140

它们不是“固定”的，它们实际上是被设计师画在那个位置的。

这只是一张模拟图。表单在设计器中的实际功能与它在运行时的功能不同。您不能以任何方式移动表单或与它们的非客户区交互（例如，您也不能单击最小化或关闭框）。

这根本不支持。我想不出一个很好的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-29T15:42:54.497

Cody Gray - 你的跟进是正确的答案。这是程序：

1.  在顶部取消停靠设计器视图选项卡（使其成为自己的窗口）。
2.  将设计器视图窗口调整​​为您喜欢的比例。
3.  将表单移动到设计器中您喜欢的位置。
4.  重新停靠。

另外，回答 Mason 的问题：因为 Visual Studio 倾向于将原始 Window 放在查看区域的一半。然后，开发人员被迫向上/向下/全部滚动，痛苦的......！

不知道为什么它一开始就没有居中，但 Cody 的解决方案是一个很好的解决方法。

干杯! 杰瑞在夏洛特

# iphone - 再次重复 - LLALCK+MyriadPro-SemiboldIt：FT_Select_Charmap 失败：错误 6

> ID：15802477
> 
> 赞同：0
> 
> 时间：2013-04-04T04:23:20.470
> 
> 标签：iphone, ios, objective-c, pdf, uiwebview

几天前我曾问过这个问题，但不幸的是没有得到任何解决方案和回复。

希望这次能拿到一份。

我有一个从服务器下载并在 Web 视图中显示的 pdf 文件。

每当显示 pdf 文件时，控制台上都会显示以下错误：

LLALCK+MyriadPro-SemiboldIt：FT_Select_Charmap 失败：错误 6 我在某处读到缺少字体类型。但我仍然不确定错误到底是什么。模拟器和 iPhone 都出现错误。

```
I tried installing font as well on Mac, but it still has same error. 
```

我以以下方式在 webview 中显示 pdf：

```
 NSString *path = [prefs objectForKey:@"filePath"];

 NSURL *targetURL = [NSURL fileURLWithPath:path];

 NSURLRequest *request = [NSURLRequest requestWithURL:targetURL];

 [webView loadRequest:request]; 
```

请帮助如何避免此错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:40:52.873

您可以通过在 PDF 中嵌入字体来防止错误

# php - 将标签替换为其具有另一个属性的 src 属性

> ID：15802480
> 
> 赞同：1
> 
> 时间：2013-04-04T04:23:27.980
> 
> 标签：php, html, regex, html-parsing, preg-replace

 这：

```
$text = '<img class="fruit" src="http://exmple.com/apple.png" id="apple"><BR>
<img class="fruit" src="http://exmple.com/Lemon.png" ><BR>
<img src="http://exmple.com/banana.png" class="fruit"><BR>';

$pattern = '/<img(.*) src="([^"].*)"(.*)\>/i'; //<--the problem
$replace = preg_replace($pattern, '$2', $text);
echo $replace; 
```

给我吗：

```
http://exmple.com/apple.png" id="apple
http://exmple.com/lemon.png
http://exmple.com/banana.png" class="fruit 
```

我只需要用它们的`src`价值替换它们；像这样：

```
http://exmple.com/apple.png
http://exmple.com/lemon.png
http://exmple.com/banana.png 
``` 

[在键盘上花](http://codepad.org/xijqIEVa)了几个小时，但仍然没有想要的`$pattern`；我以前遇到过[类似的问题](https://stackoverflow.com/questions/13783760/php-replace-img-tags-and-return-src)，但没有用；我一点都不擅长 ragex 逻辑，所以我需要帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:34:46.820

`.`你的字符串中有一个额外的。

```
// This:
$pattern = '/<img(.*) src="([^"]*)"(.*)\>/i';

// Not this:
$pattern = '/<img(.*) src="([^"].*)"(.*)\>/i'; 
```

然而，与其做一个奇怪的替换来移除你不想要的部分，我会考虑拉出你想要的部分并打印它们。

```
$matches = array();
preg_match_all('/<img.*?src="([^"]*)"/i', $text, $matches);
echo implode("\n", $matches[1]); 
```

# vb.net - 在 vb.net webforms 中创建“动态对象”的最佳方法是什么

> ID：15802482
> 
> 赞同：3
> 
> 时间：2013-04-04T04:23:35.260
> 
> 标签：vb.net, object, asp.net-4.5

我不确定我是否正确地问了这个问题，因为我对此还是有点陌生​​...

但是我正在尝试学习如何做（如果可能的话）是使用用户数据（姓名、地址、电话等）创建一个可序列化的类对象。对于我的项目，我将此用户数据称为用户参数。由于此列表将继续增长。例如，喜欢的歌曲、喜欢的颜色等。

所以我想根据用户可用的“参数”动态创建对象。有些用户只有一个，有些用户会更多。用户数据/参数将存储在一个单独的表中，用户 GUID 和一个 FK 标识参数是什么。所以理想情况下，我只需要在这个表中添加一条新记录，后面的代码就可以工作了。

否则...我必须在更新或更改参数时更新序列化类、更新、插入？

想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T13:38:11.220

字典怎么样？

```
<Serializable()>
Public Class UserData

  Public Property UserGUID As GUID
  Public Property Parameters As Dictionary(Of String, String)

End Class 
```

然后你可以让字典充满如下内容：

```
{{"Name", "Sir Launcelot of Camelot"},
 {"Quest","To seek the Holy Grail"},
 {"Favorite Color","Blue"},
 {"Favorite Place","Castle Anthrax"},
     ...
} 
```

你可以有一个看起来像这样的表：

```
UserGUID    | Parameter      | Value
-----------------------------------------------------------
AZ-12-43-EF | Name           | Sir Launcelot of Camelot
AZ-12-43-EF | Quest          | To seek the Holy Grail
AZ-12-43-EF | Favorite Color | Blue
34-DF-E4-22 | Name           | Sir Galahad of Camelot
34-DF-E4-22 | Quest          | I seek the Holy Grail
34-DF-E4-22 | Favorite Color | Blue.  No yel--  Auuuuuuuugh! 
```

如果您需要更复杂的参数值，也许您可​​以存储一个与每个参数一起使用的 JSON 字符串？...或者如果您已经走了那么远，您可能会将所有用户数据设为 JSON 字符串；）

**编辑：**

要显示数据，您有几个选项，如果您知道想要什么条目，您可以简单地从字典中获取它：

```
If userData.Parameters.ContainsKey("Name") Then
    textBoxName = userData.Parameters("Name")
Else
    'Name value not found
    textBoxName = "Enter name here"
End If 
```

但是，如果您想在表格中显示所有参数，则必须先将字典转换为其他内容。例如，要绑定到 a `DataGridView`，您可以执行以下操作：

```
Dim parameterList = From entry In userData.Parameters
                    Select New With { .Parameter = entry.Key, entry.Value }
dataGridView1.DataSource = parameterList.ToArray() 
```

在上面的示例中，`parameterList`实际上是具有两个属性`IEnumerable`的[匿名类型](http://msdn.microsoft.com/en-us/library/bb384767.aspx)，`Parameter As String`并且`Value As String`.

* * *

了解更多信息的资源`Dictionary`：

*   [字典教程](http://www.dotnetperls.com/dictionary-vbnet)
*   [MSDN 文档](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)

...以及一些 StackOverflow 问题：

*   [.NET 数据结构的比较](https://stackoverflow.com/q/128636/945456)
*   [字典与哈希表](https://stackoverflow.com/q/301371/945456)

# eclipse - 带有代码更改的 Eclipse IDE 调试

> ID：15802484
> 
> 赞同：3
> 
> 时间：2013-04-04T04:23:39.507
> 
> 标签：eclipse, debugging

我正在为 Java 开发人员使用 Eclipse IDE

版本：Helios Service Release 1 Build id：20100917-0705

在使用tomcat 7.0.37远程调试Web应用程序时，当我进行一些更改时，即使是一行，更改也无法进入运行时，因此我需要重新编译并重新部署war应用程序。浪费了很多时间。消息：

```
Hot code replace failed - Delete method not implemented 
```

我不明白这个消息。

有人知道如何在调试模式下自动反映代码更改的秘密吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T15:20:18.950

我发现要使热代码替换工作，被修改/替换的代码必须在执行堆栈中。因此，您可以热替换对已停止的方法所做的更改，但是一旦您退出该方法，就无法热替换对该方法的更改......除非您在连续调用时首先停止返回该方法方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-19T02:02:04.457

使用标准 JVM（Oracle 的），您只能修改现有方法。不支持添加和删除方法，以及更改类的结构（移动方法、字段）。为此，请前往 JRebel！

需要注意的一件事是，在某些方法中对看似“正常代码”的更改实际上需要 Java 编译器添加或删除方法 - 因此它会失败。例如，如果您在内部类中访问外部类中的私有字段，则会发生这种情况——java 编译器将需要向外部类添加合成访问器方法以让内部类访问这些字段——因此将无法进行热代码替换。此外，如果您删除了一些访问此类字段的代码，java 编译器希望删除相应的合成访问器方法，这也会失败。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-04T04:34:38.783

**我认为没有办法反映调试模式下的代码更改**

*   调试模式是跟踪程序流程并查找特定代码段是否有任何问题或错误......
*   它只是指向在你的tomcat中运行的eclipse中的代码行，**即。eclipse 中的代码不用于运行应用程序您已安装或放入 tomcat 的代码运行**

因此您在 Eclipse 中所做的更改无法反映在 tomcat 代码中

# java - 如何将 ArrayList 发送到 BaseAdapter Android

> ID：15802487
> 
> 赞同：2
> 
> 时间：2013-04-04T04:24:18.320
> 
> 标签：java, android, json, arraylist, baseadapter

我想在它之前将我的 JSON 显示到 gridview 中。我将我的 JSON 显示到 ListView 中，它可以工作。但是在 BaseAdapter 中，我不知道如何将我放入 ArrayList 的 JSON 发送到 Base Adapter

所以这是我的源代码：

活动 ：

```
 public class MainActivity extends ListActivity {
    List AgenList = new ArrayList();
        boolean boolStatusKoneksi=true;
        private ProgressDialog Dialog;
        protected Context applicationContext;
        @Override
        public void onCreate(Bundle savedInstanceState){
            super.onCreate(savedInstanceState);     
            setContentView(R.layout.activity_main);
            new AgenAsyncTask().execute();
            GridView gridview = (GridView) findViewById(R.id.gridview);
            gridview.setAdapter(new AgenAdapter(this));
        }

    public class AgenAsyncTask extends AsyncTask<String, String, String>
    {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            Dialog = new ProgressDialog(MainActivity.this);
            Dialog.setMessage("Mohon Tunggu sebentar...");
            Dialog.setIndeterminate(false);
            Dialog.setCancelable(true);
            Dialog.show();
        }

        protected String doInBackground(String... args) {

                 String url = ("http:10.10.2/selectAgent.htm");

                  try{
                      JSONParser j=new JSONParser();
                        JSONArray jsonArray = j.takeJson(url);;

                      for(int i =0; i<jsonArray.length(); i++){
                          JSONObject c  = jsonArray.getJSONObject(i);

                            HashMap<String, String> map = new HashMap<String, String>();
                            if (c.has("atasan")) 
                                map.put("atasan", c.get("atasan").toString());
                            if (c.has("nama_agen")) 
                                map.put("nama_agen", c.get("nama_agen").toString());
                            if (c.has("kode_agen")) 
                                map.put("kode_agen", c.get("kode_agen").toString());
                            if (c.has("no_aaji")) 
                                map.put("no_aaji", c.get("no_aaji").toString());
                            if (c.has("jenis")) 
                                map.put("jenis", c.get("jenis").toString());
                              AgenList.add(map);
                         }
                    } catch (JSONException e) {
                        e.printStackTrace();
                        }
                  return null;
                    }

        @Override
        protected void onPostExecute(String file_url) {

       }
   } 
```

这是我的 BaseAdapter ：

```
 public class AgenAdapter extends BaseAdapter {

        public AgenAdapter(MainActivity mainActivity) {

        }

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public Object getItem(int position) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            LayoutInflater layout = getLayoutInflater();
            View view= layout.inflate(R.layout.list_item,parent,false);

            TextView ATASAN = (TextView) findViewById(R.id.atasan);
            TextView NAMA_AGEN= (TextView) findViewById(R.id.nama_agen);
            TextView KODE_AGEN= (TextView) findViewById(R.id.kode_agen);
            TextView NO_AAJI= (TextView) findViewById(R.id.no_aaji);
            TextView JENIS= (TextView) findViewById(R.id.jenis);
            return view;
        }
    }
} 
```

如您所见，我将 ArrayList 命名为 = AgenList，但我没有将它放入我的 BaseAdapter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:31:25.200

制作一个参数化的构造函数并将您的数组列表传递给它的参数。所以你的课会像

```
public class AgenAdapter extends BaseAdapter {
List<yourObj> list;
Activity a;
    public AgenAdapter(Activity activity,List<yourObj> list) {
       this.a=activity;
       this.list=list;

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return list.size();///////return size of list
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return position;///// dont return null here
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return position;/////////return position as itemID
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater layout = getLayoutInflater();
        View view= layout.inflate(R.layout.list_item,parent,false);

        TextView ATASAN = (TextView) findViewById(R.id.atasan);
        TextView NAMA_AGEN= (TextView) findViewById(R.id.nama_agen);
        TextView KODE_AGEN= (TextView) findViewById(R.id.kode_agen);
        TextView NO_AAJI= (TextView) findViewById(R.id.no_aaji);
        TextView JENIS= (TextView) findViewById(R.id.jenis);
        return view;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:56:39.520

试试这个。

```
gridview.setAdapter(new AgenAdapter(this), AgenList); 
```

并在你的 onPostExecute() 中使用这一行而不是 onCreate()

像这样：

```
 @Override
    protected void onPostExecute(String file_url) {
     gridview.setAdapter(new AgenAdapter(this), AgenList);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T09:22:36.387

看看[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)。它包含基于[`ArrayList`](http://developer.android.com/reference/java/util/ArrayList.html).

1.  使您的适配器成为 的子类[`ArrayAdapter`](http://developer.android.com/reference/android/widget/ArrayAdapter.html)，并提供参数化类型。在这种情况下，您的`Map<String, String>`

    ```
    public class ResultAdapter extends ArrayAdapter<Map<String,String>> {

        private int mResource;

        /**
        * @param context
        * @param resource
        */
        public ResultAdapter(Context context, int resource, ArrayList<Map<String,String>> dataList) {
            super(context, resource, dataList);
            this.mResource = resource;
        }

        ...

    } 
    ```

2.  覆盖 ArrayAdapter 的[getView](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)方法以用于设置提供给视图的数据。

    ```
    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;
        // If the view is already inflated, reuse it.
        // Else inflate the view
        if (convertView != null) {
            view = convertView;
        } else {
            //inflate view
            final LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = inflater.inflate(mResource, parent, false);
        }

        TextView ATASAN = (TextView) findViewById(R.id.atasan);
        ...

        //Get data here
        Map<String, String> item = getItem(position);

        //Set data to the View's e.g.
        ATASAN.setText(item.get("ATASAN"));
        ...

        return view;
    } 
    ```

# unix - 是否可以同时运行两个不同版本的 tmux？

> ID：15802491
> 
> 赞同：8
> 
> 时间：2013-04-04T04:24:27.417
> 
> 标签：unix, tmux

Tmux 1.8 使 iOS Prompt 应用程序崩溃。

但我需要 1.8 才能获得 iTerm2 集成。

所以我希望我能以某种方式让我的服务器能够运行两个 tmux 服务器。但是，当我运行 1.8 服务器时，Tmux 1.6 似乎只是以状态码 1 退出。

我怀疑有人尝试过这样的事情，但我很好奇......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-04T07:03:20.577

您可以运行多个*tmux*实例（甚至是不同的版本），但它可能不会像您期望的那样工作：它们将完全独立（不同的会话、窗口、窗格、选项值等）。`-L`or`-S`选项用于指定服务器套接字名称或路径名。

```
tmux new              # new session in the server at the "default" socket
tmux -L other attach  # new session in the server at the "other" socket 
```

默认套接字和`-L`套接字存在于 中`$TMPDIR/tmux-$UID/`，但`-S`如果您想自己指定完整路径名，可以使用。

当您在*tmux*会话“内部”时，TMUX 环境变量指定服务器套接字的路径，因此如果您只是与“周围”服务器对话，通常不需要指定套接字（路径）名称：您可以只需用于`tmux neww`在当前会话中创建一个新窗口（无论它使用什么套接字路径名）。

但是，尝试运行两个截然不同的*tmux*版本还有另一个问题。*tmux*二进制文件和正在运行的服务器必须使用相同的“协议版本”。由于一些内部变化，1.6 和 1.8 版本使用不同的协议版本。这意味着您不能使用 1.6 二进制文件与 1.8 服务器（即使用 1.8 二进制文件启动的服务器）通信，反之亦然。因此，即使您可能不需要指定套接字名称（当在会话“内部”运行命令时），您可能需要在尝试与不同服务器通信时指定二进制文件。

```
tmux attach               # 1.8 talking to existing 1.8 "default" server
tmux-1.6 -L other attach  # 1.6 talking to existing 1.6 "other" server 
```

您可以通过设置环境变量和使用 shell 函数（或脚本，但注意不要创建无限循环）来稍微简化一些事情。

```
tmux() { command "${TMUXBIN:-tmux}" "$@"; } 
```

# ios - 警告 在 4.2 之前的 Xcode 版本中使用字体 Tahoma 可能会产生意外的结果。ios

> ID：15802496
> 
> 赞同：0
> 
> 时间：2013-04-04T04:24:37.293
> 
> 标签：ios, objective-c, xcode, ios6

我在`Xcode`...中收到此警告，请给我解决此警告问题的想法

> 在 4.2 之前的 Xcode 版本中使用字体 Tahoma 可能会产生意想不到的结果。iOS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:29:12.360

可能是错误应该是如何在应用程序中添加字体。

这是如何在应用程序中添加自定义字体的步骤。

1 - 在您的应用程序中添加`.TTF`字体
2 - 修改`application-info.plist file`.
3 - 将**“应用程序提供的字体”**键添加到新行
4 - 并将每个`.TTF`文件（字体）添加到每一行。

欲了解更多信息，请阅读[本](http://www.developers-life.com/how-to-include-ttf-fonts-to-ios-app.html)网站和[本](http://www.waterworld.com.hk/en/node/157)网站。

> 供你参考 ：

**对于粗体**

```
// Equivalent to [UIFont fontWithName:@"FontName-BoldMT" size:17]
UIFont* font = [UIFont fontWithFamilyName:@"FontName" traits:GSBoldFontMask size:17]; 
```

**和粗体/斜体**

```
UIFont* font = [UIFont fontWithMarkupDescription:@"font-family: FontName; font-size: 17px; font-weight: bold/italic;"]; // set here, either bold/italic. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:33:09.163

1.  去xib
2.  单击“显示文件检查器图标”（第一个图标）。
3.  在文件版本控制下更改你的开发大于4.2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:34:16.457

在 IB 中，转到**文件检查器，其中在文档版本控制中的****界面构建器文档**下使**开发**值大于当前值（xcode 版本）。

# c# - Visual Studio 2012 自动将 > 添加到程序XXX.vshot.exe.config

> ID：15802497
> 
> 赞同：0
> 
> 时间：2013-04-04T04:24:38.457
> 
> 标签：c#, winforms, visual-studio-2010

```
<add name="Licensing_ProdEntities" connectionString="metadata=res://*/LicenceDB.csdl|res://*/LicenceDB.ssdl|res://*/LicenceDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=PCSDEV-02\SQLEXPRESS;initial catalog=Licensing_Prod;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /></connectionStrings>**&gt;** 
```

如您所见，`"&gt;"`由 Visual Studio 2010 本身在第 4 行末尾添加。

我曾多次尝试删除它，但每次运行程序后，它都会回来。

# c++ - c++模板相互依赖类型

> ID：15802501
> 
> 赞同：0
> 
> 时间：2013-04-04T04:24:52.763
> 
> 标签：c++, templates

我正在尝试用 C++ 编写简单的哈希表。我的哈希表实现模板如下所示：

```
template<class k, class v, class h<k>, class e<k> >
class my_hash {

}; 
```

其中
k = 键的类类型
v = 值的类类型
h = 散列 fn 的
类类型 e = 相等 fn 的类类型

我已经像这样定义了 h 类

```
template<class k>
class h {

}; 
```

我会专门针对不同的 k 类型的模板，例如 int、string 等。我想要做的是每当我用 k 调用 my_hash 模板时，它应该自动获取

```
h<k> 
```

作为哈希函数类型。为此，我该如何定义模板？

如果我像上面显示的那样定义它，g++ 会给出编译器错误，说 h 不是模板？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:42:09.317

我认为您需要的称为*模板模板参数*，它是这样的：

```
template<class k, class v, template<typename> class h, template<typename> class e>
class my_hash 
{
  //then here you can intantiate the template template parameter as
  h<k> hobj;
  e<k> eobj;
  //...
}; 
```

现在您可以将类模板（接受一个类型参数）作为第三个和第四个模板参数传递给上述类模板。在您的书中或网上查找*模板模板参数*，了解更多。你可以从这里开始：

*   [C++中模板模板参数有哪些用途？](https://stackoverflow.com/questions/213761/what-are-some-uses-of-template-template-parameters-in-c)
*   [C++常识：模板模板参数](http://www.informit.com/articles/article.aspx?p=376878)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:31:30.157

您当然可以使用模板模板参数，但您的预期用例 - 模板类型密切相关 - 是一个常见的用例，可以通过特征惯用地解决。

对于散列键，通常键类型与散列函数和相等函数密切相关。使用特征，您可以执行以下愚蠢的示例：

```
template <class T> struct key_hash_traits;

template <>
struct key_hash_traits<int>
{
    typedef int key_type;
    static size_t hash(int k) { return k*k / 42; }
};

template <class T, class V>
struct my_non_functioning_hash_table
{
    void insert(T::key_type t, V v)
    {
        if (T::hash(t) == 13)
        {
            std::cout << "hello world\n";
        }
    }
};

int main()
{
    int k = 256;
    my_non_functioning_hash_table<key_hash_traits<int>, float> h;
    h.insert(k, 3.14);
} 
```

看看 with `key_hash_traits`，所有相互关联的类型（key，hash func）是如何放在一起的，这很好，并且定义`my_non_functioning_hash_table`也更简单，因为它只需要引用 trait。这个例子确实假设每个键类型只有一个哈希函数，但你可以轻松地修改它。我希望你能得到大致的想法。

有关特征的更多阅读，请参阅以下链接：

*   [Traits：一种新的有用的模板技术](http://www.cantrip.org/traits.html)
*   [特征：类型的 else-if-then](http://erdani.com/publications/traits.html)

# c# - ASP.NET MVC 角色和安全性

> ID：15802503
> 
> 赞同：0
> 
> 时间：2013-04-04T04:25:05.880
> 
> 标签：c#, .net, asp.net-mvc, asp.net-roles

假设这是我的 SampleController 操作方法

```
public ActionResult AdminView()
{
    return View()
} 
```

如果希望在登录用户属于管理员角色的情况下调用此控制器方法，否则应阻止此方法调用，并且用户应获得一些自定义的未经授权的访问错误页面。

在我的 asp .net mvc Web 应用程序中，当用户登录时，我将用户角色作为字符串存储在会话中。每当需要验证用户角色时，我都会将会话中存储的值与常量“ADMIN_ROLE”进行比较。但是我正在编写那段代码来检查几乎每个控制器操作方法中的用户角色，然后如果用户角色受限于控制器操作方法，则为用户返回适当的视图或未经授权的访问页面视图。

我用谷歌搜索并读到我们可以使用这样的东西。

```
[Authorize(Roles="admin")]
public ActionResult AdminView()
{
  return View()
} 
```

但我不确定 Authorize 和 Roles 关键字是如何工作的。放置 Roles = "Admin" 时如何帮助检查我存储在会话中的用户角色字符串，或者我如何将用户重定向到未经授权的页面，以防角色与为操作方法标记的角色不匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:39:31.087

根据评论，如果您使用自定义身份验证/授权机制，那么您需要实现自定义授权属性，您可以在其中放置自定义逻辑来检查用户是否具有管理员角色。如下所示：

```
public class CustomizedAuthorizeAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        //check for role in session variable "ADMIN_ROLE"

    //if not valid user then set
    filterContext.Result = new RedirectResult(URL)
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:40:58.530

根据我的想法，您需要为授权编码。

```
public class AuthorizeAttribute : FilterAttribute, IAuthorizationFilter
{
    private readonly RoleEnum[] _acceptedRoles;

    public AuthorizeAttribute(params RoleEnum[] acceptedroles)
    {
        _acceptedRoles = acceptedroles;
    }

    public AuthorizeAttribute(params bool[] allowAll)
    {
        if (allowAll[0])
            _acceptedRoles = new RoleEnum[] { RoleEnum.Admin, RoleEnum.user};
    }

    public void OnAuthorization(AuthorizationContext filterContext)
    {
        if (SessionHelper.UserInSession == null)//user not logged in
        {
            FormsAuthentication.SignOut();
            filterContext.Result =
                 new RedirectToRouteResult(new System.Web.Routing.RouteValueDictionary {{ "controller", "Home" },
                                             { "action", "Index" },
                                             { "returnUrl",    filterContext.HttpContext.Request.RawUrl } });//send the user to login page with return url
            return;
        }
        if (!_acceptedRoles.Any(acceptedRole => SessionHelper.UserInSession.UserRoles.Any(currentRole => acceptedRole == currentRole.Role)))
            //allow if any of the user roles is among accepted roles. Else redirect to login page
            throw new UnauthorizedAccessException();

    }
} 
```

这也适用于返回 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:34:25.810

此链接中有一个很好的小解释：

[http://weblogs.asp.net/jgalloway/archive/2011/04/28/looking-at-how-asp-net-mvc-authorize-interacts-with-asp-net-forms-authorization.aspx](http://weblogs.asp.net/jgalloway/archive/2011/04/28/looking-at-how-asp-net-mvc-authorize-interacts-with-asp-net-forms-authorization.aspx)

按照这个：

ASP.NET MVC 包含一个 [Authorize] 属性，当放置在任何控制器操作上时将禁止未经授权的访问。AuthorizeAttribute 允许您指定角色或用户的列表。您还可以将 AuthorizeAttribute 放在控制器上，在这种情况下，它将应用于控制器中的所有操作。在您未登录时尝试访问由 AuthorizeAttribute 保护的操作将带您进入标准登录屏幕，如果您还没有帐户，则带有注册链接。

**[Authorize] 属性如何将我重定向到登录？**

AuthorizeAttribute 是一个 ActionFilter，这意味着它可以在关联的控制器操作之前执行。AuthorizeAttribute 在 OnAuthorization 方法中执行其主要工作，该方法是在 IAuthorizationFilter 接口中定义的标准方法。查看 MVC 源代码，我们可以看到底层安全检查实际上只是查看 ASP.NET 上下文持有的底层身份验证信息：

```
IPrincipal user = httpContext.User;

if (!user.Identity.IsAuthenticated)
{
    return false;
} 
```

如果用户认证失败，则返回一个 HttpUnauthorizedResult ActionResult，它会产生一个 HTTP 401(Unauthorized) 状态码。如果不是 ASP.NET Forms Authentication，则会将 HTTP 401 状态代码发送到浏览器，这将显示浏览器的默认登录提示。

# javascript - Firefox 中的 Video.js 不支持“video/mp4”的指定“类型”属性

> ID：15802506
> 
> 赞同：1
> 
> 时间：2013-04-04T04:25:10.483
> 
> 标签：javascript, firefox, html5-video, video.js

我在尝试加载视频时在 Firefox 中收到以下错误（通过 Firebug 查看）`video.js`

`Specified "type" attribute of "video/mp4" is not supported`

`All candidate resources failed to load. Media load paused.`

由于三个原因，这个问题很奇怪：

*   它最近才弹出​​（我们没有更改任何服务器文件）
*   它看起来不一致（大约四分之一的页面加载）
*   如果我在 Firebug 中单击“继续”以跳过断点，播放器将按预期加载

什么可能导致此问题？后备确实发生（在单击“继续”后），并且 mp4 加载了 Flash 播放器后备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T13:54:24.817

我也看到了。它只出现在 Firefox 中，而不出现在 Chrome/IE 中。当调用加载/播放时，video.js 将 .mp4 渲染到 Flash 中，并且它继续没有问题。我的假设是这些失败是信息性的——尽管我很乐意摆脱它们。

video.js 在 FF 与 Chrome/IE 中的操作存在许多差异（根据不同的许可历史，它们支持 .mp4）。您可以使用

```
if (vidPlayer.techName !== 'html5') 
```

可靠地检测 FF 用户与其他用户。

您可以使用以下方法预先定义 FF 的内容：

```
myPlayer.src({ type: "video/mp4", src: pathToMySource }) 
```

我还没有深入探讨过这种用法，但希望它会有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-27T12:36:15.277

我 99% 确定这是一个 Firebug 问题。我围绕它所做的所有测试都表明它仅在 Firebug 运行时发生 - 例如，在运行 Firefox 的内置检查器时我没有收到错误。

# javascript - 如何删除奇怪的 Ember.js 视图边距

> ID：15802507
> 
> 赞同：0
> 
> 时间：2013-04-04T04:25:11.093
> 
> 标签：javascript, html, css, ember.js

另一个 Ember 问题：当我开始编写 Ember 应用程序时，我注意到 Ember 在应用程序周围创建了奇怪的、看似不可移动的边距，这使我的 Twitter Bootstrap 网格无法运行。我不太明白如何摆脱这些边距，以及如何使列再次工作。这是一张图片，向您展示我的意思：

![在此处输入图像描述](https://i.stack.imgur.com/EUpiq.png)

**相关HTML：**

```
<script type="text/x-handlebars" id="tasks">
  <div class="well row-fluid span8 offset2 task-list">
    <div class="space-top"><div>
    <div class="accordion" id="accordion">
      {{partial 'tasks/newTask'}}
      {{#each task in controller}}
        <div class="accordion-group">
          {{render 'task' task}}
        </div>
      {{/each}}
    </div>
  </div>
</script> 
```

**更新：**

这是一个不起作用的 JSFiddle，但所有代码都在那里：http: [//jsfiddle.net/SL7s8/](http://jsfiddle.net/SL7s8/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:13:17.583

Ember 本身不会将任何样式应用于您的应用程序，但正如您从屏幕截图中看到的那样，ember 视图（默认情况下）呈现在`<div class="ember-view">`. 可能是那个 div 正在影响你的利润。如果是这种情况，您可以按如下方式对其进行自定义：

```
App.TasksView = Ember.View.extend({
  templateName: "tasks",
  classNames: ["well", "row-fluid", "span8", "offset2", "task-list"]
}); 
```

然后更改您的模板以删除外部 div：

```
<script type="text/x-handlebars" id="tasks">
<div class="space-top"></div>
<div class="accordion" id="accordion">
  {{partial 'tasks/newTask'}}
  {{#each task in controller}}
    <div class="accordion-group">
      {{render 'task' task}}
    </div>
  {{/each}}
</div>
</script> 
```

更新：修复损坏`<div class="space-top"><div>`以正确关闭`</div>`标签

# sql - 在 SQL server 的另一个存储过程中执行一个存储过程

> ID：15802511
> 
> 赞同：38
> 
> 时间：2013-04-04T04:25:35.563
> 
> 标签：sql, sql-server, stored-procedures

如何在 SQL Server 的另一个存储过程中执行存储过程？我将如何传递第二个过程的参数。？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-04T04:42:47.640

如果您只想通过第二个 SP 执行某些特定操作并且不需要从 SP 返回值，那么只需执行以下操作：

```
Exec secondSPName  @anyparams 
```

否则，如果您需要在第一个 SP 中返回第二个 SP 的值，则创建一个临时表变量，其列数相同，并且第二个 SP 的列返回定义相同。然后你可以在第一个 SP 中得到这些值：

```
Insert into @tep_table
Exec secondSPName @anyparams 
```

**更新：**

要将参数传递给第二个 sp，请执行以下操作：

```
Declare @id ID_Column_datatype 
Set @id=(Select id from table_1 Where yourconditions)

Exec secondSPName @id 
```

**更新 2：**

假设您的第二个 sp 返回`Id`并且`Name`type of `id`is`int`和`name`is of `varchar(64)`type 的位置。

现在，如果您想在第一个 sp 中选择这些值，则创建一个临时`table`变量并将值插入其中：

```
Declare @tep_table table
(
  Id int,
  Name varchar(64)
)
Insert into @tep_table
Exec secondSP

Select * From @tep_table 
```

这将为您返回第二个 SP 返回的值。

希望，这消除了你所有的疑虑。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-04T04:50:56.107

假设你有一个这样的存储过程

第一个存储过程：

```
Create  PROCEDURE LoginId
     @UserName nvarchar(200),
     @Password nvarchar(200)
AS
BEGIN
    DECLARE  @loginID  int

    SELECT @loginID = LoginId 
    FROM UserLogin 
    WHERE UserName = @UserName AND Password = @Password

    return @loginID
END 
```

现在你想从另一个存储过程中调用这个过程，如下所示

第二个存储过程

```
Create  PROCEDURE Emprecord
         @UserName nvarchar(200),
         @Password nvarchar(200),
         @Email nvarchar(200),
         @IsAdmin bit,
         @EmpName nvarchar(200),
         @EmpLastName nvarchar(200),
         @EmpAddress nvarchar(200),
         @EmpContactNo nvarchar(150),
         @EmpCompanyName nvarchar(200)

    AS
    BEGIN
        INSERT INTO UserLogin VALUES(@UserName,@Password,@Email,@IsAdmin)

        DECLARE @EmpLoginid int

        **exec @EmpLoginid= LoginId @UserName,@Password**

        INSERT INTO tblEmployee VALUES(@EmpName,@EmpLastName,@EmpAddress,@EmpContactNo,@EmpCompanyName,@EmpLoginid)
    END 
```

正如您在上面看到的，我们可以从另一个存储过程中调用一个存储过程

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T04:37:39.930

是的，你可以这样做：

```
BEGIN
   DECLARE @Results TABLE (Tid INT PRIMARY KEY);

   INSERT @Results

   EXEC Procedure2 [parameters];
   SET @total 1;

END
SELECT @total 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T04:33:59.967

您可以在存储过程中交替调用用户定义函数

这可能会解决您调用存储过程的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-08T19:07:38.240

你的**sp_test**：返回全名

```
USE [MY_DB]
GO

IF (OBJECT_ID('[dbo].[sp_test]', 'P') IS NOT NULL)
DROP PROCEDURE [dbo].sp_test;
GO

CREATE PROCEDURE [dbo].sp_test 
@name VARCHAR(20),
@last_name VARCHAR(30),
@full_name VARCHAR(50) OUTPUT
AS

SET @full_name = @name + @last_name;

GO 
```

在你的**sp_main**

```
...
DECLARE @my_name VARCHAR(20);
DECLARE @my_last_name VARCHAR(30);
DECLARE @my_full_name VARCHAR(50);
...

EXEC sp_test @my_name, @my_last_name, @my_full_name OUTPUT;
... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-04T05:54:43.610

是的，我们在存储过程中调用函数很容易。

例如，创建用户定义年龄函数并在选择查询中使用。

```
select dbo.GetRegAge(R.DateOfBirth, r.RegistrationDate) as Age,R.DateOfBirth,r.RegistrationDate from T_Registration R 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-12-28T12:14:20.323

**程序示例：**

```
Create  PROCEDURE SP_Name
     @UserName nvarchar(200),
     @Password nvarchar(200)
AS
BEGIN
    DECLARE  @loginID  int

    --Statements for this Store Proc
  --
  -- 
  --

  --execute second store procedure
  --below line calling sencond Store Procedure Exec is used for execute Store Procedure.
    **Exec SP_Name_2 @params** (if any) 

END 
```

# php - CakePhp 中 Cron 的最佳方法

> ID：15802512
> 
> 赞同：0
> 
> 时间：2013-04-04T04:25:37.187
> 
> 标签：php, cakephp, cron, cakephp-2.1, cron-task

我目前正在从事 CakePhp 中的一个项目，其中发送电子邮件和其他活动需要 Cron 作业，如果我在自定义控制器中使用核心 php 方法创建 CRON，那么它工作正常并且如果我创建了Cron 使用 CakePhp SHELL 类，然后它也可以在核心 PHP 方法中工作。

现在我很困惑哪种方法最适合这项工作在 Shell 中使用的核心 PHP 方法或在自定义控制器中使用的核心 PHP 方法，任何人都可以帮助我了解哪种方法最适合使用以及为什么？

先感谢您

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T08:08:10.143

我总是将 Shells 用于 cronjobs，而不是控制器操作。仅仅因为 shell 用于不需要任何图形表示的“裸”操作。此外，我的大多数应用程序都使用身份验证，因此如果您希望 cron 守护程序在调用操作之前对其进行身份验证，则需要为您的 cronjobs 构建一个自定义启动器。使用 shell，您无需任何身份验证即可访问所有模型和数据。

即使您的应用程序不使用身份验证，您肯定也不希望任何使用您的应用程序的人或机器人通过简单地调用启动 cronjob 的控制器操作的 URL 来触发您的 cronjobs，从安全角度来看也是如此看来，贝壳是要走的路。

另请查看[http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)以获取有关如何让您的 shell 作为 cronjobs 运行的更多信息，这非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:02:42.143

这取决于您要通过电子邮件发送给站点用户的数据

-> 如果您不使用太多表并加入以通过电子邮件向其发送数据，则最好使用核心 php，并且在核心 php 中执行和获取数据比在 cakephp 框架中更快。

-> 但是如果有必要使用不同的模型和关系，那么你可以去 cakephp mathod 来利用 ORM 概念

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T08:15:05.427

应使用 cli 管理 Cron 作业，例如：

```
# send pending emails once an hour
0 * * * * cd /abs/path/to/my/app && Console/cake EmailQueue.Sender --quiet 
```

[这是一个示例电子邮件发件人](https://github.com/nodesagency/cakephp-email-queue)。对于 cli 发起的请求 (cron)，使用 cli 可以避免与访问控制、会话等相关的问题。

# mysql - 如何获取 Mysql 的数据库脚本？

> ID：15802514
> 
> 赞同：0
> 
> 时间：2013-04-04T04:25:45.057
> 
> 标签：mysql

我有 Mysql 数据库。我只想使用我的数据库的骨架，即我只想要创建数据库和表的脚本。不是数据库结构和数据附带的整个数据库备份。

请帮我。我使用 Mysql 5.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:29:09.800

```
mysqldump --all-databases --no-data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:28:55.360

从[没有数据的 MySql 导出模式](https://stackoverflow.com/questions/6175473/mysql-export-schema-without-data)：

> 您可以使用命令`--no-data`选项`mysqldump`
> 
> ```
> mysqldump -u root -p --no-data dbname > schema.sql 
> ```

[Jim](https://stackoverflow.com/users/196869/jim)提供了有益的贡献：

> `--single-transaction`如果您不想或不能执行表锁，请考虑使用该选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:49:37.203

下面是我对mysql转储命令的总结，希望对你有所帮助

备份整个数据库

> mysqldump -uroot -p db_name > /home/bob/my.sql

备份单表

> mysqldump -uroot -p db_name table_name > /home/bob/table.sql

仅备份数据库结构，

> mysqldump -uroot -p db_name -d > /home/bob/structure.sql

只备份数据库数据

> mysqldump -uroot -p db_name -t > /home/bob/data.sql

**如何执行导出的sql文件？**请参阅以下内容

> mysql -uroot -p db_name < /home/bob/my.sql

另一种方式，登录到mysql，然后

> mysql> 使用 db_name；
> 
> mysql> 源 /home/bob/my.sql;

# java - Java Droptarget 错误

> ID：15802519
> 
> 赞同：0
> 
> 时间：2013-04-04T04:27:01.780
> 
> 标签：java, user-interface, drag-and-drop

我有一个两个面板，其中面板 1 中的对象可以拖放到面板 2 中。它运行良好，直到我从保存的 xml 文件加载对象并且该函数直接将对象加载到 panel2 中。当我继续将另一个对象从 panel1 拖到 panel2 时，就会发生错误。

我已经测试过添加一行只是为了尝试。我再次实例化 droptarget 并工作，但第一次加载的对象不再相关。就像我加载对象时删除了 droptarget 一样。dropTarget = new DropTarget(面板,这个);

你认为droptarget被删除的原因是什么？

# ruby-on-rails - 用于自定义操作的 Rails 表单

> ID：15802523
> 
> 赞同：2
> 
> 时间：2013-04-04T04:27:28.580
> 
> 标签：ruby-on-rails, forms

我正在尝试将表单的输入链接到我的 rails 应用程序中的特定操作。

目前，如果我去`www.myapp.com/check/:idNumber`，我将能够很好地触发动作（这意味着路由设置正确？）。这个动作基本上是对 ruby​​/rails 脚本的函数调用，参数“idNumber”被传递给它。如果函数成功，它将返回一个新创建的“Person”对象，否则返回 nil。这与标准`new`操作不同，因为它根据从其他地方的数据库中获得的一些信息来确定属性。

耙路线确实给了我以下信息：

```
 check        /check/:idNumber(.:format)    person#check {:id=>/\d+/} 
```

我无法实现的是表单本身。

```
<%= form_tag("/check", :method => "get") do %>
  <%= text_field_tag(:idNumber) %>
<% end %> 
```

控制器动作：

```
 def check
    regCheck = RegCheck.new  

    @person = regCheck.check_id(params[:idNumber])

    if @person.name == nil
      redirect_to root_path
    end
end 
```

提交上面的表格会带我去`myapp.com/check?utf8=✓&amp;idNumber=1234`。有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-13T06:37:05.307

我相信使用`check_path`从路由文件生成的助手是你最好的选择。

表格应该看起来像这样。

```
<%= form_tag(check_path) do %>
  <%= text_field_tag(:idNumber) %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T16:38:07.607

Rails 表单可能很挑剔，尤其是在尝试构建真正定制的表单时。

这条线
`= form_for [@object]`

确定表单的去向，以及正在实现的对象。如果要将表单路由到其他位置，可以使用该`:url`选项。此选项确定表单的路径，但是您必须记住该方法由`@object`. 如果是新对象，则方法为 POST，现有对象将使用 PUT 方法。

假设您要更新现有对象，但要为属于现有对象的新对象发送数据。那看起来像

```
= form_for [@object], :as => @child_object, :url => my_optional_custom_path do |f|
    # etc... 
```

这会生成一个向自定义 url 发送 PUT 请求的表单（`@object`如果没有提供自定义 url，则为更新路径。PUT 请求与参数一起发送`params[:child_object]`。

希望这会有所帮助！

最好的，

-布赖恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T12:09:24.803

我认为这不可能是您尝试的方式。表单的 URL 是在`before`用户输入任何数据时创建的。所以您需要`:idNumber`从路由中删除 ..

如果你这样做，你会得到以下路线：

```
check        /check(.:format)    person#check 
```

因为现在删除了正则表达式，所以您需要在您的控制器中执行此操作：

```
def check

  # Make sure ID is digits only
  idNumber = params[:idNumber].gsub(/[^\d]/, '')

  regCheck = RegCheck.new

  @person = regCheck.check_id(idNumber)

  if @person.name == nil
    redirect_to root_path
  end
end 
```

你的形式没问题，但你可能想像`check_path`TheBinaryhood 建议的那样使用..

如果你真的想要它，`check/:idNumber`你也可以将表单提交给另一个动作，并从那里重定向到正确的路径..

# google-maps - Mongodb geo在谷歌地图范围内

> ID：15802525
> 
> 赞同：2
> 
> 时间：2013-04-04T04:27:47.720
> 
> 标签：google-maps, mongodb

我对 mongodb 有点陌生。

我想使用 mongodb 的地理空间功能来查询从谷歌地图获得的边界中的位置。这就像 insideBox(swLng, swLat, neLng, neLat)。但是当地图缩小时它无法给我正确的结果，因为 neLng/neLat 小于 swLng/swLat。似乎这是使用 x > swLng 和 x < neLng 和 y > swLat 和 y < neLat 计算的，没有考虑地图投影。

那么我可以通过insideBox实现查询，还是我必须调整坐标，或者我应该使用near？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:28:44.030

正如我上面评论的，当东北点和西南点穿过国际日期变更线时，查询将失败，因为右上角的 y 小于左下角的 y。

如果您将 mongodb 与 php 和教义一起使用，则需要在客户端进行两次查询并合并结果，如下所示：

```
if ($x1 > $x2) {
    $qb->field('coordinates')->withinBox(-180, $y1, $x2, $y2);
    $result1 = $qb->getQuery()->execute();
    $qb->field('coordinates')->withinBox($x1, $y1, 180, $y2);
    $result2 = $qb->getQuery()->execute();
    $result = $result1->toArray() + $result2->toArray();
} else {
    $qb->field('coordinates')->withinBox($x1, $y1, $x2, $y2);
    $result = $qb->getQuery()->execute();
    $result = $result->toArray();
} 
```

# php - jQuery 或 css 处理选择元素中的长描述

> ID：15802531
> 
> 赞同：0
> 
> 时间：2013-04-04T04:28:25.047
> 
> 标签：php, jquery, css

我在最新项目中处理选择元素时遇到问题。问题是 select 元素内的描述太长导致布局中断。我有一个解决方案来为css中的选择和选项设置固定宽度，如下所示：

```
select, option {
   width:500px;
} 
```

用户单击选择元素时的问题，选项恢复正常宽度，而不是我在 css 文件中设置的宽度。

打印我的系统的屏幕图像：

[![在此处输入图像描述](https://i.stack.imgur.com/aSkLP.png)](https://i.stack.imgur.com/aSkLP.png)

[在 jsFiddle 上演示](http://jsfiddle.net/errorare/VBjCn/1/)！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:35:24.250

你可以试试

```
select{
    width:500px;
}
select, option {
    max-width: 500px;
}

select, option:hover {
   max-width:600px;
}

select, option:active {
   max-width:600px;
} 
```

如果我正确理解你的问题可能会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:17:11.500

选择选项很疯狂......几乎不可能控制选项宽度。你甚至不能申请`text-overflow:ellipsis`。您拥有的某些选项值非常长。尝试将您的文本修剪为一些字符并填充到您的下拉列表中，使用一些工具提示插件提供带有全文的标题，例如`bootstrap`将标题强调为弹出窗口的插件。或者尝试使用一些 jquery 下拉插件，如下所示。

[http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/) [http://effinroot.eiremedia.netdna-cdn.com/repo/plugins/forms-controls/searchabledropdown/index.html](http://effinroot.eiremedia.netdna-cdn.com/repo/plugins/forms-controls/searchabledropdown/index.html)

# sql - 查询以更新运行余额而不选择查询

> ID：15802534
> 
> 赞同：0
> 
> 时间：2013-04-04T04:28:39.577
> 
> 标签：sql, database, performance, oracle

**我的查询在这里**

```
UPDATE TBLBANKTRANSACTION  SET    
SU_CASHBALANCE          = (SELECT SU_CASHBALANCE FROM TBLBANKTRANSACTION WHERE 
TBLBANKTRANSACTION.ID=1)-2000.0 
```

我们可以在没有选择查询的情况下更新余额吗？或者更新运行平衡的最简单/更好/最快的方法是什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:34:12.263

我不擅长查询，但如果你这样做怎么办

```
UPDATE TBLBANKTRANSACTION  SET    
SU_CASHBALANCE          =  SU_CASHBALANCE-2000.0  WHERE 
TBLBANKTRANSACTION.ID=1 
```

# android - Android - 创建一个类似于 Grocery IQ List 的列表

> ID：15802535
> 
> 赞同：1
> 
> 时间：2013-04-04T04:28:51.740
> 
> 标签：android, list, expandablelistview

（使用安卓 4.0.4 版）

我正在尝试构建与 GroceryIQ 应用程序中的列表非常相似的功能：

![GroceryIQ 清单](https://i.stack.imgur.com/a3ZSU.png)

我可以使用下面 xml 中显示的 ExpandableListView 和扩展 BaseExpandableListAdapter 的自定义类创建一个漂亮的列表，但是我在第二个列表中遇到了问题。它是两个列表，两者之间有一个视图吗？这可能只是一个带有特殊列表分隔符的列表，看起来像条吗？

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent" />

<ExpandableListView
    android:id="@+id/ExpList"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:divider="@null"
    android:dividerHeight="5dp"
    android:groupIndicator="@null"
    android:paddingBottom="60dp" />

<include
    android:layout_width="wrap_content"
    android:layout_alignParentBottom="true"
    layout="@layout/bottom_bar_list" />

</RelativeLayout> 
```

我尝试添加另一个列表，但一个视图上的两个列表似乎不太配合——第一个列表被截断或第二个列表不显示。

谢谢你的想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T07:10:02.543

所以，我不知道有可能确切地知道 Grocery IQ 是如何制作他们的列表的，但我发现我可以通过超级自定义 ExpandableListView 来复制一个非常相似的列表。

ExpandableListView 是使用自定义组项和子项实现的。

我为 Group Item 添加了一个相对布局，看起来像“很棒的栏”。然后，当我以编程方式填充我的列表时，我有一个“流氓”组项目，当我找到它时，我会显示“真棒栏”而不是常规组——在所有其他情况下，相对布局设置为不可见。

花了一段时间才“恰到好处”，我的解决方案似乎有点像 hack，但这就是对我有用的要点。

# labview - 如何配置 DAQ 助手以生成由波形定义的电压脉冲？

> ID：15802541
> 
> 赞同：0
> 
> 时间：2013-04-04T04:29:09.917
> 
> 标签：labview, oscilloscope, daq-mx

如何将波形脉冲输入[DAQ 助手](http://www.ni.com/white-paper/2744/en#toc1)以使[DAQ 6259 板](http://www.ni.com/pdf/manuals/371022k.pdf)产生所需的电压脉冲？

使用[Simulate Signal](http://zone.ni.com/reference/en-XX/help/371361J-01/lvexpress/simulate_signal/) express VI，我创建了一个[方脉冲波形](https://stackoverflow.com/questions/15776538/why-does-my-waveform-not-have-the-right-frequency-intervals-in-labview)。

我的目标是允许 LabView 用户根据需要使用[GUI](https://stackoverflow.com/questions/15776538/why-does-my-waveform-not-have-the-right-frequency-intervals-in-labview)中的旋钮配置频率和脉冲宽度，以生成所需的脉冲序列。该脉冲序列应发送到 DAQ 6259 以生成电压脉冲序列。电压脉冲序列将被示波器捕获以验证其正确性（即捕获的脉冲序列看起来与labview GUI 中显示的波形完全一样）。

实现这一目标的最简单方法是什么？是否有任何教程可以解释如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:51:49.180

您是否检查过示例查找器（帮助>查找示例...）

硬件输入和输出 > DAQmx> 模拟输出/数字输出

里面有很多例子可以帮助你完成 90%

# ruby-on-rails - 事件机错误输出

> ID：15802544
> 
> 赞同：0
> 
> 时间：2013-04-04T04:29:23.963
> 
> 标签：ruby-on-rails, ruby, rspec, goliath

我正在使用正在发生的 gem，这是一个事件机器库，用于在 S3 上保存文件。当我运行 rspec 测试以从 aws 存储桶中“获取”一个文件时，它会出错。

错误 O/P：

```
 RuntimeError: eventmachine not initialized: evma_connect_to_server
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/eventmachine-1.0.3/lib/eventmachine.rb:665:in `connect_server'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/eventmachine-1.0.3/lib/eventmachine.rb:665:in `bind_connect'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/em-http-request-1.0.3/lib/em-http/http_connection.rb:54:in `activate_connection'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/em-http-request-1.0.3/lib/em-http/http_connection.rb:89:in `setup_request'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/em-http-request-1.0.3/lib/em-http/http_connection.rb:4:in `get'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/happening-0.2.5/lib/happening/s3/request.rb:35:in `execute'
/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/happening-0.2.5/lib/happening/s3/item.rb:44:in `get'\ 
```

有没有机构遇到过类似的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T23:11:24.973

这可以通过添加`with_api`块来解决

```
 it "should return pong response" do
    with_api API do
      get_request(path: "/api/ping") do |async|
        async.response.should == { ping: "pong" }.to_json
      end
    end
  end 
```

`API`继承自的 api 类在哪里`Goliath::API`

并`spec_helper.rb`添加：

```
require 'goliath/test_helper'
RSpec.configure do |c|
  c.include Goliath::TestHelper, :example_group => {
    :file_path => /spec\/api/
  }
end 
```

# angularjs - AngularJS：“收集器”服务返回承诺；如何在函数内解决仍然传递值？

> ID：15802553
> 
> 赞同：1
> 
> 时间：2013-04-04T04:30:27.450
> 
> 标签：angularjs, local-storage, promise, q

我编写了一个服务`Collector`来存储我的模型，它与 localStorage 和我的服务器交互。我有一个`Collector.retrieveModel(uuid)`从收集器检索模型的函数，首先检查 localStorage 以查看它是否已经存在，否则从我的服务器请求它。

这是它的样子：

```
var retrieveModel = function(uuid) {
    var deferred = $q.defer();
    var promise = deferred.promise;

    if (typeof uuid === 'undefined') {
        console.log("retrieveModel called without param");
        deferred.resolve( collector );
    }

    if ( collector[uuid] = localStorage.getItem(uuid) ) {
        //object was in local storage, return the data

        **Problem is somewhere around here**

        deferred.resolve( collector[uuid] );

    } else {
        //doesn't exist in collector, request it
        //remoteModel is a wrapper function, which itself returns a promise, which is resolved upon a successful call using $resource
        remoteModel(uuid).then(function (val) {
            deferred.resolve(val);
        });
    }

    return promise;
}; 
```

由于它当前存在，如果模型不存在于 localStorage 中（并且调用了 remoteModel），则返回承诺，并在从服务器检索模型后履行。随后，相关的 $scopes 被更新。这按预期工作。

但是，当模型存在于 localStorage 中时，deferred 被解析，但在函数返回 promise 之前。因此，解析的值永远不会传播。

我该怎么做才能始终如一地回报承诺，但又不会过早兑现？我不想使用 $timeout。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T05:06:48.557

我认为您非常接近；在移动设备上，所以我无法立即测试，但我认为如果你在 .then() 回调中解决了你的承诺，你会得到想要的结果。大意是：

```
deferred.promise.then(function () { 
  deferred.resolve( collector[uuid] ); 
}) 
```

这个想法是你想等到函数返回承诺，调用 then() 来解决你的本地存储响应。

# python - 如何在 Python 中制作计时器程序

> ID：15802554
> 
> 赞同：11
> 
> 时间：2013-04-04T04:30:52.120
> 
> 标签：python, timer

这是我的目标：制作一个以问候语开头的小程序（基于文本），打印一个计时器，记录自上次事件以来的时间，然后是事件的计时器。我已经使用此代码开始尝试找出一个计时器，但我的第一个问题是计时器在每一秒都在新行上重复。我怎样才能让它停止？此外，这个计时器似乎落后于时钟上的实际秒数。

```
import os
import time

s=0
m=0

while s<=60:
    os.system('cls')
    print (m, 'Minutes', s, 'Seconds')
    time.sleep(1)
    s+=1
    if s==60:
        m+=1
        s=0 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T05:08:19.887

我会用这样的东西：

```
import time
import sys

time_start = time.time()
seconds = 0
minutes = 0

while True:
    try:
        sys.stdout.write("\r{minutes} Minutes {seconds} Seconds".format(minutes=minutes, seconds=seconds))
        sys.stdout.flush()
        time.sleep(1)
        seconds = int(time.time() - time_start) - minutes * 60
        if seconds >= 60:
            minutes += 1
            seconds = 0
    except KeyboardInterrupt, e:
        break 
```

在这里，我依赖于实际时间模块，而不仅仅是睡眠增量器，因为睡眠不会正好是 1 秒。

此外，您可能可以使用`print`代替`sys.stdout.write`，但您几乎可以肯定`sys.stdout.flush`仍然需要。

喜欢：

```
print ("\r{minutes} Minutes {seconds} Seconds".format(minutes=minutes, seconds=seconds)), 
```

请注意尾随逗号，因此不会打印新行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-12T21:06:00.133

**这是我的版本。这对初学者来说很棒。**

```
 # Timer
import time
print("This is the timer")
# Ask to Begin
start = input("Would you like to begin Timing? (y/n): ")
if start == "y":
    timeLoop = True

# Variables to keep track and display
Sec = 0
Min = 0
# Begin Process
timeLoop = start
while timeLoop:
    Sec += 1
    print(str(Min) + " Mins " + str(Sec) + " Sec ")
    time.sleep(1)
    if Sec == 60:
        Sec = 0
        Min += 1
        print(str(Min) + " Minute")
# Program will cancel when user presses X button 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:11:55.723

在我的电脑（Windows 7）上，当在`cmd`窗口中运行时，这个程序几乎完全按照你说的那样工作。如果计时器每秒在新行上重复，这对我来说表明这`os.system ('cls')`对你不起作用——也许是因为你在 Windows 以外的操作系统上运行？

该语句`while s<=60:`似乎是不正确的，因为`s`在该测试中永远不会等于 60——只要它达到 60，它就会重置为 0 并`m`递增。也许测试应该是`while m<60:`？

最后，在我的电脑上，计时器似乎并没有落后于时钟上的实际秒数。不可避免地，这段代码将在时钟上滞后几秒——即运行`while`循环中除 之外的所有代码行所需的时间`time.sleep(1)`，加上从睡眠状态返回进程的任何延迟。就我而言，这根本不是很长，但是，如果运行该代码（由于某种原因）花费 0.1 秒（例如），那么与挂钟时间相比，计时器最终会慢 10%。@sberry 的回答提供了一种解决此问题的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T05:14:46.590

好的，我将从您的计时器滞后的原因开始。

在您的程序中发生的情况是`time.sleep()`调用“休眠”程序的操作 1 秒，一旦该秒过去，您的程序将再次开始执行。但是您的程序仍然需要时间来执行您告诉它执行的所有其他命令，因此需要`1s + Xs`实际执行所有操作。尽管这是一个非常基本的解释，但从根本上说，这就是为什么您的计时器不同步的原因。

至于为什么您不断地在新行上打印，该`print()`函数有一个预定义的行尾字符，它附加到给定的任何字符串。

```
print(value, ..., sep=' ', end='\n', file=sys.stdout, flush=False) 
```

`end="YourThing"`您可以通过像这样放入您的打印语句来用任何内容覆盖它

```
for x in range(3):
    print("Test", end="") 
```

上面的示例在行尾附加了一个空字符串，因此循环的输出为

```
"TestTestTest" 
```

至于解决你的计时器问题，你应该使用类似于

```
timePoint = time.time()

while True:

    #Convert time in seconds to a gmtime struct
    currentTime = time.gmtime(time.time() - timePoint))

    #Convert the gmtime struct to a string
    timeStr = time.strftime("%M minutes, %S seconds", currentTime)

    #Print the time string
    print(timeStr, end="") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-18T14:04:28.570

使用 timeit 模块为您的代码计时。然后相应地调整 time.sleep(x)。例如，您可以使用以下方法之一：

```
import timeit
#Do all your code and time stuff and while loop
#Store that time in a variable named timedLoop
timer = 1- timedLoop

#Inside while loop:
   time.sleep(timer) 
```

这将为除 time.sleep 之外的代码计时，并从 1 秒中减去该代码，并在这段时间内休眠。这将给出 1 秒的准确表示。另一种方法是更少的工作，但可能不那么准确：

```
#set up timeit module in another program and time your code, then do this:
#In new program:
timer = 1 - timerLoop
print timerLoop 
```

运行您的程序，然后复制打印的时间并将其粘贴到程序二，即您现在拥有的程序中。在你的 time.sleep() 中使用 timerLoop：

```
time.sleep(timerLoop) 
```

那应该可以解决您的问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-01T09:44:15.713

```
# Timer
import time
import winsound
print "               TIMER"
#Ask for Duration
Dur1 = input("How many hours?  : ")
Dur2 = input("How many minutes?: ")
Dur3 = input("How many seconds?: ")
TDur = Dur1 * 60 * 60 + Dur2 * 60 + Dur3
# Ask to Begin
start = raw_input("Would you like to begin Timing? (y/n): ")
if start == "y":
    timeLoop = True

# Variables to keep track and display
CSec = 0
Sec = 0
Min = 0
Hour = 0
# Begin Process
timeLoop = start
while timeLoop:
    CSec += 1
    Sec += 1
    print(str(Hour) + " Hours " + str(Min) + " Mins " + str(Sec) + " Sec ")
    time.sleep(1)
    if Sec == 60:
        Sec = 0
        Min += 1
        Hour = 0
        print(str(Min) + " Minute(s)")
    if Min == 60:
        Sec = 0
        Min = 0
        Hour += 1
        print(str(Hour) + " Hour(s)")
    elif CSec == TDur:
        timeLoop = False
        print("time\'s up")
        input("")
    while 1 == 1:
        frequency = 1900  # Set Frequency To 2500 Hertz
        duration = 1000  # Set Duration To 1000 ms == 1 second
        winsound.Beep(frequency, duration) 
```

我的计时器基于 user5556486 的版本。您可以设置持续时间，并且在持续时间结束后会发出哔哔声，类似于Force Fighter的版本

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-07T22:46:19.407

这是我的答案。

```
import time
import sys

time_start = time.time()

hours = 0
seconds = 0
minutes = 0

while True:

    sys.stdout.write("\r{hours} Hours {minutes} Minutes {seconds} Seconds".format(hours=hours, minutes=minutes, seconds=seconds))
    sys.stdout.flush()

    if (seconds <= 59):
        time.sleep(1)
        seconds += 1

        if (minutes <= 59 and seconds == 59 + 1):
            minutes += 1

            if (minutes == 60 and seconds == 59 + 1 ):
                hours += 1
                minutes = 0
                seconds = 0

    else:
        seconds = 0 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-08T13:42:33.930

```
# This Is the Perfect Timer!(PS: This One Really Works!)
import sys
import time
import os

counter=0
s = 0
m = 0
n = int(input("Till How Many Seconds do you want the timer to be?: "))
print("")

while counter <= n:
    sys.stdout.write("\x1b[1A\x1b[2k")
    print(m, 'Minutes', s, 'Seconds')
    time.sleep(1)
    s += 1
    counter+=1
    if s == 60:
        m += 1
        s = 0

print("\nTime Is Over Sir! Timer Complete!\n") 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-02-01T05:02:43.593

这些想法在其他帖子上非常酷——但是，代码不能用于我想做的事情。

我喜欢人们想要减少时间的方式，这样你就不必有 time.sleep()

```
from datetime import datetime

timePoint = time.time()
count = 0
while (count < 10):
    timePoint2 = time.time()
    timePointSubtract = timePoint2 - timePoint
    timeStamp1 = datetime.utcfromtimestamp(timePointSubtract).strftime('%H:%M:%S')
    print(f'{count} and {timeStamp1}')
    val = input("")
    count = count + 1 
```

所以，我非常想有一个计时器，但同时记录我按了多少次回车。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-01-21T16:14:01.363

这似乎会容易得多：

```
#!/usr/bin/env python
from datetime import datetime as dt
starttime = dt.now()
input("Mark end time")
endtime = dt.now()
print("Total time passed is {}.".format(endtime-starttime)) 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-01-22T14:16:08.350

一个有声音提醒您的简单计时器程序是：

```
from time import sleep
import winsound
m = 0
print("""**************************
Welcome To FASTIMER®
**************************""")
while True:
    try:
        countdown = int(input("How many seconds:  "))
        break
    except ValueError:
        print("ERROR, TRY AGAIN")
original = countdown
while countdown >= 60:
    countdown -= 60
    m += 1
for i in range (original,0,-1):
    if m < 0:
        break
    for i in range(countdown,-2,-1):
        if i % 60 == 0:
            m-=1
        if i == 0:
            break
        print(m," minutes and ",i," seconds")
        sleep(1)
    if m < 0:
        break
    for j in range(59,-1,-1):
        if j % 60 == 0:
            m-=1          
        print(m," minutes and ",j," seconds")
        sleep(1)
print("TIMER FINISHED")
winsound.PlaySound('sound.wav', winsound.SND_FILENAME) 
```

该程序使用 time.sleep() 等待一秒钟。它每 60 秒转换为一分钟。该声音仅适用于 Windows，或者您可以安装 pygame 来添加声音。

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-01-20T05:09:05.993

我有一个更好的方法：

```
import time
s=0
m=0
while True:
  print(m,  'minutes,', s, 'seconds')
  time.sleep(0.999999999999999999999) # the more 9s the better
  s += 1
  if s == 60:
    s=0
    m += 1 
```

# collections - 为什么 (keys "") 在 Clojure 中返回 nil，而 (keys "abc") 是一个错误？

> ID：15802559
> 
> 赞同：5
> 
> 时间：2013-04-04T04:31:27.143
> 
> 标签：collections, clojure

我是 Clojure 的新手。[键](http://clojure.github.com/clojure/clojure.core-api.html#clojure.core/keys)的行为让我觉得不一致：

```
user=> (keys "")
nil
user=> (keys "abc")
ClassCastException 
```

空集合似乎被特殊对待，[测试用例](https://github.com/clojure/clojure/blob/c77e5bd/test/clojure/test_clojure/data_structures.clj#L477-481)表明这是故意的。这种行为背后的想法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:20:03.523

这样做的原因是，当使用`seq`函数将集合转换为序列时，如果集合为空，`seq`将返回 nil 而不是空序列。还有另一个[线程](https://stackoverflow.com/questions/6045404/why-clojure-idiom-prefer-to-return-nil-instead-of-empty-list-like-scheme)讨论了其中的原因。

# account - MSDE 在哪个帐户下执行？

> ID：15802562
> 
> 赞同：0
> 
> 时间：2013-04-04T04:32:04.283
> 
> 标签：account, msde

有一个与本地托管的 MSDE 实例对话的 .net 应用程序 - 有人知道运行 MSDE 的用户帐户吗？

业务系统管理员已经发布了一系列对 PC 的“升级”（显然是针对活动目录和其他一些东西），现在应用程序无法连接到数据库 - 所以我们认为用户帐户可能已被删除。嗡嗡声

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:39:50.953

MSDE - 我有一段时间没有遇到过，这可以追溯到 SQL Server 2000！（MSDE 在 2005 年被 SQL Server Express 取代，所以你有点过时了）。

无论如何，MSDE 作为 NT 服务运行，并且每个服务（至少到 Windows Vista）都在用户帐户下运行：通常是 SYSTEM、NetworkService 或 LocalService 之一（Windows 7 及更高版本引入了服务标识的概念，这很复杂）。您还可以在自己的用户身份下运行服务，该用户身份可以是 SYSTEM 等内置主体、本地用户帐户或域帐户。

我忘记了 MSDE 使用的默认值，但考虑到它是在 NetworkService 发明之前的 1999/2000 年制作的，它可能在 SYSTEM 或 LocalService 下运行。可以肯定的是，请检查您的`Services.msc`列表。

至于连接失败，可能是由任何原因引起的：防火墙、配置错误等，而不仅仅是错误的服务标识。

因此，无论如何，请检查您`services.msc`和您的应用程序事件日志，然后报告您的发现。

# java - 使用 Java 将 Base64 转换为二进制

> ID：15802565
> 
> 赞同：3
> 
> 时间：2013-04-04T04:32:19.507
> 
> 标签：java, binary, base64

我已经查看了针对我发布的问题找到的回复，但我无法弄清楚一些事情。如果有人能详细说明这一点，我将不胜感激：

我试图将 base64 字符串转换为二进制。我遇到了以下代码，我将 base64 字符串存储在一个字节数组中。如何将字节数组转换为二进制。我找到的代码：

```
import org.apache.commons.codec.binary.Base64;

import java.util.Arrays;

public class Base64Decode {
    public static void main(String[] args) {
           String hello = "AAADccwwCBwOAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAB==";

           byte[] decoded = Base64.decodeBase64(hello.getBytes());

           System.out.println(Arrays.toString(decoded));

          }
} 
```

**输出：**

> [0, 0, 3, 113, -52, 48, 8, 28, 14, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0]

输出是否正确？当我查看一些关于 base64 转换的文档时，我注意到“A”的等价物是 0。数组如何在最后一个槽中为零？它不会有相当于“B”的东西吗？那么我的数组不应该以三个 0 开头吗？如何将其转换为二进制（以 0 和 1 表示）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:51:46.993

在 base 64 中，每个字符代表 6 位信息。一个四字符序列代表 24 位信息（即 3 个字节）。

那么，序列`AAAD`表示`{0,0,3}`。

```
 AAAD -> 000000 000000 000000 000011 -> 00000000 00000000 00000011 
```

最后一个序列`AAB=`，其中final`=`是一个填充字符，表示一个**16位的**值（实际上有18位，但最后两位被忽略了），相当于`{0, 0}`。

```
 AAB= -> 000000 000000 000001 -> 00000000 00000000 (ignored: 01) 
```

如果最后一个序列是`AB==`，它将表示一个**8 位**值，相当于`{0}`。

```
 AB== -> 000000 000001 -> 00000000 (ignored: 0001) 
```

# sql - 在 Informix 中仅选择一列的插入语句

> ID：15802568
> 
> 赞同：3
> 
> 时间：2013-04-04T04:32:27.000
> 
> 标签：sql, informix

只需要知道这个查询在 Informix 中是否可行。

```
insert into emp(emp_id, sal, desg)
values (111, (select salary from emp_sal where emp_id=222), 'xxx'); 
```

表结构是：

**emp** : emp_id、名称、sal、desg

**emp_sal** : emp_id,萨尔

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-04T04:44:24.170

我没有尝试使用 Informix，但大多数数据库都支持`insert into ... select`：

```
insert into emp(emp_id, sal, desg) 
select 111, salary, 'xxx' 
from emp_sal where emp_id = 222; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T17:07:54.097

只要子查询返回单行，所写的语句就应该起作用。

概念证明：

```
SQL[1871]: create temp table x(i integer, j integer, s char(10));
SQL[1872]: insert into x(i,j,s) values(1, (select atomic_number from elements where name = 'Carbon'), "Elephant");
SQL[1873]: select * from x;
1|6|Elephant
SQL[1874]: 
```

我的测试数据库中有一个元素表，因此子选择对我有用。警告：我测试的是 11.70.FC6，而不是 7.31。考虑到您似乎使用的是更旧版本的 Informix（7.31 在 Y2K、IIRC 之前首次发布，尽管 7.31.UDn 是 2000 年代中期的修复包，可能大约在 2005 年左右），您的里程可能会有所不同。

# linux - Linux 中的回收站脚本

> ID：15802571
> 
> 赞同：3
> 
> 时间：2013-04-04T04:32:40.490
> 
> 标签：linux, bash, recycle-bin

在我的生产服务器中，有人执行`rm -rf`并且我的重要文件被永久删除。所以，我想有一个回收站，所以如果用户这样做`rm`，文件将移动到 RecycleBin 而不是从服务器中删除。我已经为它制作了下面的脚本。但是我在执行时遇到了一些错误。

`alias rm='/root/remove.sh'`

`#rm test_file``rm`现在，当您键入命令 时，将触发以下脚本

`#!/bin/bash`
`dir=$(pwd)`
`mv $dir/$1 /root/Recyclebin`

当触发上述脚本时，我收到以下错误。

`mv:cannot move '/root/test_file' to '/root/Recyclebin': Not a directory`

现在，请建议除此之外还有其他方法可以制作回收站概念，或者请帮助解决错误。提前致谢。

我正在使用 CentOS 5.6

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-04T08:38:11.013

试试这个 首先在 /root 下创建一个名为 MyTrash 的文件夹，即：/root/MyTrash

然后打开 .bashrc 文件并在文件底部写入以下行。

`alias rm='mv -t /root/MyTrash/'`

这里的`-t`意思

```
-t，--目标目录=目录
       将所有 SOURCE 参数移动到 DIRECTORY

```

`.bashrc`通过运行此命令更新文件`source .bashrc`

现在，如果您使用`rm`命令删除任何文件，该文件将被移动到`/root/MyTrash`目录

# twitter-bootstrap - 禁用日期选择器上的过去日期“不使用 JQuery UI”

> ID：15802572
> 
> 赞同：-4
> 
> 时间：2013-04-04T04:32:58.730
> 
> 标签：twitter-bootstrap

如何在不使用 JQuery UI 的情况下禁用日期选择器上当前日期的过去日期？我尝试了几篇类似问题的帖子，但无法实现，以下是我尝试过的

```
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" media="screen"
 href="http://tarruda.github.com/bootstrap-datetimepicker/assets/css/bootstrap-datetimepicker.min.css">
<script type="text/javascript"
 src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.8.3/jquery.min.js">
</script> 
<script type="text/javascript"
 src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js">
</script>
<script type="text/javascript"
 src="http://tarruda.github.com/bootstrap-datetimepicker/assets/js/bootstrap-datetimepicker.min.js">
</script>
<script type="text/javascript"
 src="http://tarruda.github.com/bootstrap-datetimepicker/assets/js/bootstrap-datetimepicker.pt-BR.js">
</script>
<script type="text/javascript">
$(function() {
  $('#datetimepicker2').datetimepicker({
    language: 'en',
    pick12HourFormat: true
  });
});
</script>

<div id="datetimepicker2" class="input-append">
<input data-format="MM/dd/yyyy" type="text"/>
<span class="add-on">
  <i  data-date-icon="icon-calendar">
  </i>
</span> 
```

我也试过

```
$("datetimepicker2").datepicker({ changeYear: true, dateFormat: 'dd/mm/yy', showOn: 'none', showButtonPanel: true,  minDate:'0d' }); 
```

和

```
 $("#datetimepicker2").datepicker({ minDate: 0 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T08:32:46.103

问题已解决:)

下面是工作代码

```
$(function(){
    $('#datepicker').datepicker({
        startDate: '-0m'
        //endDate: '+2d'
    }).on('changeDate', function(ev){
        $('#sDate1').text($('#datepicker').data('date'));
        $('#datepicker').datepicker('hide');
    });

}) 
```

# gcc - gcc 在同一个库中链接两次

> ID：15802575
> 
> 赞同：0
> 
> 时间：2013-04-04T04:33:11.233
> 
> 标签：gcc, static

这似乎是一个奇怪的想法，但我需要将同一个库链接到我的代码中两次。

一点背景知识：我正在编写一些带有引导加载程序和应用程序的固件。这两段代码都需要使用 comms 库 (spi) 和其他一些系统库才能运行。如果引导加载程序使用这些库运行，我无法替换这些库。因此，我想包含 lib 两次，一次用于引导加载程序，一次用于应用程序。

以前，我通过制作两个程序并将 HEX 文件拼接为构建过程的一部分来完成此操作。这次我想制作一个包含应用程序和引导加载程序的精灵（两者都有调试符号）。然后我可以通过在构建后步骤中将其剥离来生成引导加载映像。这使我可以构建完整的映像并使用链接器来避免冲突等，而无需制作自己的工具，这意味着我可以轻松调试引导加载程序和应用程序中的错误，但唯一的绊脚石是多次使用 lib

我认为一个解决方案可能是制作两个单独的静态库，即 bootloader.a 和 application.a 两者都已经包含另一个库，但这似乎很混乱。有谁知道更好的解决方案？

# android - Android - 如何在 3 窗格横向视图中从另一个片段中替换片段

> ID：15802576
> 
> 赞同：1
> 
> 时间：2013-04-04T04:33:12.323
> 
> 标签：android, android-fragments

我正在开发一个使用 3 窗格视图布局（经典的“主-细节”流程）的应用程序，遵循由[mobile tuts](http://mobile.tutsplus.com/tutorials/android/android-sdk-using-fragments/)创建的 2 窗格示例。

3 窗格布局如下所示：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="0dp"
android:layout_marginRight="0dp"
android:background="?android:attr/detailsElementBackground"
android:divider="?android:attr/dividerHorizontal"
android:orientation="horizontal"
android:showDividers="middle"
tools:context=".SListA" >

<!--
This layout is a three-pane layout for the 
master/detail flow. 
-->

<fragment
    android:id="@+id/s_list"
    android:name="com.xxxxx.xxxxxx.SListF"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" />

<FrameLayout
    android:id="@+id/s_events"
    android:paddingLeft="4dp"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="1" />

<FrameLayout
    android:id="@+id/s_details"
    android:paddingLeft="4dp"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:layout_weight="0.5" /> 
```

我在尝试替换上述 3 窗格视图中的第三个片段面板时遇到了问题（在宽/横向平板电脑模式下）。错误在下面的最后一行代码中，要从中间面板片段代码中执行：

```
 @Override  
    public void setEventKey(String event_key) {
        if (SListA.m3Pane) {                                
            // In three-pane mode, show the details view in this activity by
            // adding or replacing the details fragment using a
            // fragment transaction.
            Bundle arguments = new Bundle();
            arguments.putString(SDetailsF.ARG_EVENTKEY, event_key);
            SDetailsF fragment = new SDetailsF();
            fragment.setArguments(arguments);

            getFragmentManager().beginTransaction()
            .replace(R.id.s_details, fragment).commit();
    } 
```

上面的最后一行代码显示了一个编译错误：

> 无法从类型 Fragment 对非静态方法 getFragmentManager() 进行静态引用

（注意，我设置了 minSdkVersion=11）。
使用相同的代码替换第二个（中间）面板的片段，我不明白为什么它不适用于第三个面板。唯一的区别是，第二个（中间）面板的替换片段代码是从（第一个面板）活动代码中运行的，而不是从（第二个面板）片段代码中运行的。

我能够用以下代码替换上述问题代码，而不会出现编译错误：

```
 fragment.getFragmentManager().beginTransaction()
                    .replace(R.id.s_details, fragment).commit(); 
```

但是，此代码在运行期间执行时会崩溃，并带有 InvocationTargetException 消息：

“找不到来源”

任何如何纠正此问题的想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:56:41.430

您必须使用接口。每当您需要在片段之间进行通信时，您必须在每个片段中声明一个接口，并且该接口必须由持有它的活动实现。然后在片段中的某个事件上，您调用该活动实现的方法。然后在该方法中您进行必要的操作（在您的情况下更改/替换片段），这必须反映在其他片段中。

检查我的这个答案。它与您必须遵循的相似。

> [https://stackoverflow.com/a/15296370/1567588](https://stackoverflow.com/a/15296370/1567588)

# web-services - 使用 Tonic 创建的 RESTful 网络服务仅适用于网络浏览器

> ID：15802577
> 
> 赞同：1
> 
> 时间：2013-04-04T04:33:52.337
> 
> 标签：web-services, apache

我为这个使用网络服务的网络软件编写了这个 API。现在，我已经用这个软件测试了一些其他的 API，它确实成功地使用了它们，但它没有使用我的 - 错误 405 方法不允许。

我的在网络浏览器中工作正常。我猜浏览器正在使用 GET，它确实允许。我测试的其他 API 确实允许 POST，但不允许 PUT。也许网络软件正在使用 POST？我没有办法知道。

所以，只是为了测试我打开了我的 Tonic 文件，然后复制粘贴了我的函数，将其重命名并将其标记为 POST，如下所示并重新启动 apache：

```
 /**
         * @method POST
         * @accepts str
         * @return str
         */
        public function helloFunctionTest()
        {
           ...
        } 
```

简单 REST 客户端仍将 POST 显示为不可用。我错过了什么？

# c# - 反序列化操作“poInfoInquiry”的回复消息正文时出错。- C# 网络服务

> ID：15802582
> 
> 赞同：0
> 
> 时间：2013-04-04T04:34:02.327
> 
> 标签：c#, asp.net, web-services, wsdl

当我尝试在 webservices (C# - WSDL) 中调用 poInfoInquiry 方法时，我在反序列化操作“poInfoInquiry”的回复消息正文时遇到错误。我将日期作为 DateTime 类型传递。

我发现的例外情况如下：

```
System.ServiceModel.CommunicationException: Error in deserializing body of reply message for operation 'poInfoInquiry'. --->
System.InvalidOperationException: There is an error in XML document (12, 13). --->
System.FormatException: The string '' is not a valid AllXsd value. at System.Xml.Schema.XsdDateTime..ctor(String text, XsdDateTimeFlags kinds) at 
System.Xml.XmlConvert.ToDateTime(String s, XmlDateTimeSerializationMode dateTimeOption) at
System.Xml.Serialization.XmlCustomFormatter.ToDateTime(String value) at
System.Xml.Serialization.XmlSerializationReader.ToDateTime(String value) at 
Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderIFH2HRemittanceIn.Read9_PaymentDetail(Boolean isNullable, Boolean checkType) at 
Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderIFH2HRemittanceIn.Read10_PaymentInfo(Boolean isNullable, Boolean checkType) at 
Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderIFH2HRemittanceIn.Read11_poInfoInquiryResponse(Boolean isNullable, Boolean checkType) at 
Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationReaderIFH2HRemittanceIn.Read18_Item() at 
Microsoft.Xml.Serialization.GeneratedAssembly.ArrayOfObjectSerializer2.Deserialize(XmlSerializationReader reader) at 
System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader xmlReader, String encodingStyle, XmlDeserializationEvents events) --- End of inner exception 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:40:15.973

尝试到这里 你的日期有问题 = DateTime

[http://www.infopathdev.com/blogs/hilary/archive/2010/08/27/looks-can-be-deceiving-dates-date-times-and-quot-t-quot.aspx](http://www.infopathdev.com/blogs/hilary/archive/2010/08/27/looks-can-be-deceiving-dates-date-times-and-quot-t-quot.aspx)

# haskell - 哈斯克尔命令行

> ID：15802586
> 
> 赞同：1
> 
> 时间：2013-04-04T04:34:08.057
> 
> 标签：haskell

你好，我得到了在 Haskell 中运行的代码，我对这种语言有点陌生。我得到它来编译，但我不知道如何完全使用它。通过查看它，我相信它应该解析一个 java 类文件，我已经尝试解析 file.class，但它给了我一个“无法加载接口文件名”。如果有人能指出我做错了什么（我敢肯定这是小事），我将不胜感激。

```
module Parse where

import Data.Binary
import Data.Binary.Get
import Data.Word
import Control.Monad
import qualified Data.ByteString          as B
import qualified Data.ByteString.Internal as B
import qualified Data.ByteString.Lazy     as L

{-
    ClassFile {
        u4 magic;
        u2 minor_version;
        u2 major_version;
        u2 constant_pool_count;
        cp_info constant_pool[constant_pool_count-1];
        u2 access_flags;
        u2 this_class;
        u2 super_class;
        u2 interfaces_count;
        u2 interfaces[interfaces_count];
        u2 fields_count;
        field_info fields[fields_count];
        u2 methods_count;
        method_info methods[methods_count];
        u2 attributes_count;
        attribute_info attributes[attributes_count];
     }
-}

getWord16 :: Get Word16
getWord16 = getWord16be

getWord32 :: Get Word32
getWord32 = getWord32be

data JavaClass = JavaClass {
    classMinorVersion :: Word16
  , classMajorVersion :: MajorVersion
  , classConstantPoolCount :: Word16
  } deriving Show

getJavaClass :: Get JavaClass
getJavaClass = do
  checkClassMagic
  minorVersion   <- getMinorVersion
  majorVersion   <- getMajorVersion
  constPoolCount <- getConstantsPoolCount
  return $ JavaClass minorVersion majorVersion constPoolCount

checkClassMagic :: Get ()
checkClassMagic = do
  magic <- getWord32
  if magic /= 0xCAFEBABE then
    fail "Invalid magic number for Java class"
    else
    return ()

getMinorVersion :: Get Word16
getMinorVersion = getWord16 >>= return

{-
J2SE 7.0 = 51 (0x33 hex),
J2SE 6.0 = 50 (0x32 hex),
J2SE 5.0 = 49 (0x31 hex),
JDK 1.4 = 48 (0x30 hex),
JDK 1.3 = 47 (0x2F hex),
JDK 1.2 = 46 (0x2E hex),
JDK 1.1 = 45 (0x2D hex).
-}

data MajorVersion
  = J2SE_7_0
  | J2SE_6_0
  | J2SE_5_0
  | JDK_1_4
  | JDK_1_3
  | JDK_1_2
  | JDK_1_1
  deriving (Eq, Show)

getMajorVersion :: Get MajorVersion
getMajorVersion = do
    version <- getWord16be
    return $ convert version
    where convert 51 = J2SE_7_0
          convert 50 = J2SE_6_0
          convert 49 = J2SE_5_0
          convert 48 = JDK_1_4
          convert 47 = JDK_1_3
          convert 46 = JDK_1_2
          convert 45 = JDK_1_1

getConstantsPoolCount :: Get Word16
getConstantsPoolCount = getWord16 >>= return

getConstantsPool = undefined

data Tag
 = TAG_STRING
 | TAG_INTEGER
 | TAG_FLOAT
 | TAG_LONG
 | TAG_DOUBLE
 | TAG_CLASS_REF
 | TAG_STRING_REF
 | TAG_FIELD_REF
 | TAG_METHOD_REF
 | TAG_INTERFACE_REF
 | TAG_NAME_AND_TYPE

getTag :: Get Tag
getTag = do
  tag <- getWord8
  return $ convert tag
  where convert 1 = TAG_STRING
        convert 3 = TAG_INTEGER
        convert 4 = TAG_FLOAT
        convert 5 = TAG_LONG
        convert 6 = TAG_DOUBLE
        convert 7 = TAG_CLASS_REF
        convert 8 = TAG_STRING_REF
        convert 9 = TAG_FIELD_REF
        convert 10 = TAG_METHOD_REF
        convert 11 = TAG_INTERFACE_REF
        convert 12 = TAG_NAME_AND_TYPE

parse :: B.ByteString -> JavaClass
parse b = runGet getJavaClass $ L.fromChunks [b] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T15:52:21.380

正如hairyhum 所说，您可以从GHCi 调用它。

但是，如果您真正想做的是从程序中调用它（也许您与提出此问题的人在同一个班级：[Dissecting java Class file in haskell](https://stackoverflow.com/questions/15791213/dissecting-java-class-file-in-haskell)），然后将其放在与您的相同目录中主程序，并在程序的顶部，输入：

```
import Parse 
```

然后在您的程序中，读取 Java 类文件。你可能见过这样的事情：

```
s <- readFile "MyJava.class" 
```

*如果*我们想将文件的内容读入`String`. 但是该`parse`命令需要一个`ByteString`，所以我们需要使用一个不同的实现`readFile`。因此，在程序的顶部，输入：

```
import qualified Data.ByteString as BS 
```

现在您可以像这样读取文件：

```
s <- BS.readFile "MyJava.class" 
```

现在你有了类数据，可以调用`parse`命令了。这应该足以帮助您完成该部分的作业。

* * *

**更新**

让我们看看`parse`给定代码中函数的类型签名。

```
parse :: B.ByteString -> JavaClass 
```

所以`parse`需要 a`ByteString`并返回 a `JavaClass`。现在让我们看一下 的定义`JavaClass`。

```
data JavaClass = JavaClass {
    classMinorVersion :: Word16
  , classMajorVersion :: MajorVersion
  , classConstantPoolCount :: Word16
  } deriving Show 
```

如所写，所有`parse`将给您的是次要版本、主要版本和常量池计数。但是如果你分析代码，你应该能够看到如何修改它以获得你想要的附加信息。我建议您详细分析该代码以了解其工作原理。

* * *

**更新 2**

如果你只是想在 GHCI 中尝试一下，你可以这样做：

```
:load Parse
:m + Data.ByteString
classData <- Data.ByteString.readFile "file.class"
Parse.parse classData 
```

这是一个 GHCi 会话，我正是这样做的。

```
ghci> :load Parse
[1 of 1] Compiling Parse            ( Parse.hs, interpreted )
Ok, modules loaded: Parse.
ghci> :m + Data.ByteString
ghci> classData <- Data.ByteString.readFile "file.class"
Loading package array-0.4.0.1 ... linking ... done.
Loading package deepseq-1.3.0.1 ... linking ... done.
Loading package bytestring-0.10.0.2 ... linking ... done.
ghci> Parse.parse classData
Loading package containers-0.5.0.0 ... linking ... done.
Loading package binary-0.7.0.1 ... linking ... done.
JavaClass {classMinorVersion = 3, classMajorVersion = JDK_1_1, classConstantPoolCount = 85} 
```

但是要进行下一步，您将编写一个程序来调用`parse`，如我上面所描述的。假设您的程序位于名为“MyProgram.hs”的文件中。然后，您可以通过键入*从命令行*`runghc MyProgram.hs`运行它。

我推荐阅读[Real World Haskell](http://book.realworldhaskell.org/read/getting-started.html "真实世界的 Haskell")的第 1 章。

**编辑：**将“class”更改为“classData”，因为“class”是 Haskell 关键字。

# debugging - Windbg !heap -stat -h 命令如何获取20多个条目

> ID：15802587
> 
> 赞同：3
> 
> 时间：2013-04-04T04:34:09.963
> 
> 标签：debugging, windbg

我正在研究一个堆，它有很多分配和条目数远远超过 20，这是 !heap -stat -h 命令的默认值。例如，如果您在下面看到，数字加起来不等于 100。有什么方法可以获取该堆中的所有条目？

!heap -stat -h 0000000006eb0000

堆@ 0000000006eb0000

分组依据：TOTSIZE**最大显示：20**

```
size     #blocks     total     ( %) (percent of total busy bytes)
3a00 92e - 2146c00  (1.11)
27da8 c0 - 1de3e00  (1.00)
4fb48 5c - 1ca4de0  (0.95)
3bc78 6e - 19afb90  (0.86)
14c18 127 - 17eafa8  (0.80)
778e8 2b - 1414ef8  (0.67)
6f30 29d - 1229070  (0.61)
13ed8 a5 - cd8138  (0.43)
4c00 2a0 - c78000  (0.42)
10a18 a4 - aa7760  (0.36)
63a18 1a - a1e670  (0.34)
18e18 61 - 96d718  (0.31)
9f688 c - 778e60  (0.25)
20 3551e - 6aa3c0  (0.22)
a0 a776 - 68a9c0  (0.22)
8b7b8 b - 5fe4e8  (0.20)
1e08 2b0 - 50b580  (0.17)
30 168fc - 43af40  (0.14)
a898 60 - 3f3900  (0.13)
18 287ae - 3cb850  (0.13) 
```

-谢谢，

布拉杰什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T06:35:08.400

您可以通过指定 group by 参数后跟一个数字来增加此总数，例如：

```
!heap -stat -h 07300000 -grp A 0n100 
```

给出输出：

```
0:275> !heap -stat -h 07300000 -grp A 0n100  
heap @ 07300000 group-by: ALLOCATIONSIZE max-display: 100
    size     #blocks    total     ( %) (percent of total busy bytes)
    7ecc10 1 - 7ecc10  (41.60)
    1fc210 1 - 1fc210  (10.42)
    1fb310 1 - 1fb310  (10.40)
    17d110 1 - 17d110  (7.81)
    2c4e0 2 - 589c0  (1.82)
    2b330 1 - 2b330  (0.89)
    20420 3 - 60c60  (1.98)
    20020 4 - 80080  (2.63)
    14320 1 - 14320  (0.41)
    10020 1 - 10020  (0.33)
    fab8 1 - fab8  (0.32)
    eb4c 2 - 1d698  (0.60)
    c020 1 - c020  (0.25)
    9c60 4c - 2e6c80  (15.23)
    82c0 3 - 18840  (0.50)
    8020 3 - 18060  (0.49)
    6420 1 - 6420  (0.13)
    5ea0 1 - 5ea0  (0.12)
    517c 1 - 517c  (0.10)
    4f40 1 - 4f40  (0.10)
    4ba4 1 - 4ba4  (0.10)
    4750 1 - 4750  (0.09)
    4020 2 - 8040  (0.16)
    3f78 1 - 3f78  (0.08)
    2c38 1 - 2c38  (0.06)
    25d8 1 - 25d8  (0.05)
    21dc 1 - 21dc  (0.04)
    2040 1 - 2040  (0.04)
    2020 3 - 6060  (0.12)
    1de0 1 - 1de0  (0.04)
    1da8 10 - 1da80  (0.61)
    1b6c 3 - 5244  (0.11)
    19f0 1 - 19f0  (0.03)
    18e4 2 - 31c8  (0.06)
    1890 1 - 1890  (0.03)
    183c 2 - 3078  (0.06)
    1820 1 - 1820  (0.03)
    15e8 1 - 15e8  (0.03)
    1560 1 - 1560  (0.03)
    151c 2 - 2a38  (0.05)
    14b0 1 - 14b0  (0.03)
    1384 1 - 1384  (0.03)
    1098 1 - 1098  (0.02)
    102c 3 - 3084  (0.06)
    1020 2 - 2040  (0.04)
    101f 1 - 101f  (0.02)
    101c 1 - 101c  (0.02) 
```

将转储该堆的句柄，按分配大小分组，最多为 100 行（0n 表示我们是基于十进制的，没有该前缀它会变成十六进制值）

有关详细信息，请参阅此[链接](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563189%28v=vs.85%29.aspx)`!heap`

# android - 用于在 android 中创建自定义列表视图作为库

> ID：15802594
> 
> 赞同：0
> 
> 时间：2013-04-04T04:34:44.873
> 
> 标签：android, android-listview, custom-controls, android-custom-view, android-2.3-gingerbread

我们想使用适配器创建一个**列表视图**，并且我们想在适配器之外设置列表项的属性。

例如，列表视图包含**200 行和 14 列，**那么我们需要使用适配器创建列表项。这里适配器中的对象是根据屏幕上显示的项目创建的。

创建适配器后，在外部适配器之后，我们要放置 getter，设置项目 198 表示。如果最初在设备中显示最多 10 个项目，则表示然后在适配器中创建 10 个项目对象，但剩余的项目在用户向下滚动时创建

因此，第 198 项出现空指针执行。

我想创建一个 ListView 作为自定义组件。用户可以添加任意数量的行、任意数量的列等
任何项目作为列表视图等。

我的目标是为列表视图创建**库**。在该列表视图中，用户可以添加任意数量的行、任意数量的列、任何项目文本视图、微调器等。我需要如何实现它的建议

欢迎大家提出自己的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:15:24.513

你需要的是实现**[LazyListView](https://github.com/thest1/LazyList)**。

我认为你有一个很好的[教程在这里](http://www.coderzheaven.com/2012/09/23/simplest-lazy-loading-listview-android-data-populated-mysql-database-php/)开始。

不要忘记将此标记为答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:20:14.593

尝试使用：您的 xml 列表文件 item.xml：

```
<LinearLayout>
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="horizontal">
<CheckBox
android:id="@+id/cbBox"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
</CheckBox>
<LinearLayout
android:id="@+id/linearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_marginLeft="5dp"
android:layout_weight="1"
android:orientation="vertical">
<TextView
android:id="@+id/tvDescr"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_marginTop="5dp"
android:text=""
android:textSize="20sp">
</TextView>
<TextView
android:id="@+id/tvPrice"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="right"
android:layout_marginRight="10dp"
android:text="">
</TextView>
</LinearLayout>
<ImageView
android:id="@+id/ivImage"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:src="@drawable/ic_launcher">
</ImageView>
<LinearLayout/> 
```

还有你的班级适配器

```
public class BoxAdapter extends BaseAdapter {
Context ctx;
LayoutInflater lInflater;
ArrayList<Product> objects;

BoxAdapter(Context context, ArrayList<Product> products) {
ctx = context;
objects = products;
lInflater = (LayoutInflater) ctx
    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
return objects.size();
}

@Override
public Object getItem(int position) {
return objects.get(position);
}

@Override
public long getItemId(int position) {
return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
View view = convertView;
if (view == null) {
view = lInflater.inflate(R.layout.item, parent, false);
}

Product p = getProduct(position);
((TextView) view.findViewById(R.id.tvDescr)).setText(p.name);
((TextView) view.findViewById(R.id.tvPrice)).setText(p.price + "");
((ImageView) view.findViewById(R.id.ivImage)).setImageResource(p.image);

CheckBox cbBuy = (CheckBox) view.findViewById(R.id.cbBox);
cbBuy.setOnCheckedChangeListener(myCheckChangList);
cbBuy.setTag(position);
cbBuy.setChecked(p.box);
return view;
}

Product getProduct(int position) {
return ((Product) getItem(position));
}

ArrayList<Product> getBox() {
ArrayList<Product> box = new ArrayList<Product>();
for (Product p : objects) {
if (p.box)
box.add(p);
}
return box;
}

OnCheckedChangeListener myCheckChangList = new OnCheckedChangeListener() {
public void onCheckedChanged(CompoundButton buttonView,
    boolean isChecked) {
 getProduct((Integer) buttonView.getTag()).box = isChecked;
}
}; 
} 
```

还有你的产品课

```
public class Product {
String name;
int price;
int image;
boolean box;

Product(String _describe, int _price, int _image, boolean _box) {
name = _describe;
price = _price;
image = _image;
box = _box;
}
} 
```

您的主要活动使用创建适配器

```
boxAdapter = new BoxAdapter(this, products);
ArrayList<Product> products = new ArrayList<Product>();
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState) 
...
//create adapter
fillData()
boxAdapter = new BoxAdapter(this, products);

// use lists
ListView lvMain = (ListView) findViewById(R.id.lvMain);
lvMain.setAdapter(boxAdapter);
}

// data for adapter
void fillData() {
for (int i = 1; i <= 20; i++) {
products.add(new Product("Product " + i, i * 1000, R.drawable.ic_launcher, false));
} 
```

# angularjs - Angularjs：查找指令的所有实例

> ID：15802604
> 
> 赞同：15
> 
> 时间：2013-04-04T04:36:18.753
> 
> 标签：angularjs, angularjs-directive

我正在尝试创建一个指令，以允许用户按部分使用箭头键导航页面。但我也希望能够将这些部分分散在 dom 周围，并且在添加和删除内容时不会中断。我可以想到几种方法来做到这一点，但没有一个是令人满意的：

*   使用控制器创建一个指令，让其他指令自己注册（并在 $destroy 上取消注册）。但是如果我稍后在中间添加一些东西，这将是不正常的。另外，我试过用这种方式编写它，它的代码似乎比必要的要多。

*   每当用户点击箭头键时，创建一个空数组，并 $broadcast 一个事件，并带有回调指令以在该列表中注册自己。然后，一旦该列表已满，就前进或后退。他们（应该？）按照他们在 DOM 上的顺序返回，但我不确定，因为这种方式看起来很疯狂和 hackish。

*   用 css 标记“可选项”的东西，并在 jquery 中以简单的方式编写，如下所示：在新的点击事件上，`var all = $('.tabbable')`然后用它做显而易见的事情。但我真的不想那样做，因为它不是“角度”的方式。不是出于某种纯粹的感觉，而是因为我将其构建为更大的小部件库的一部分，并且我希望他们可以访问此功能。

那么，有没有什么方法可以让我获得某种类型的所有指令的范围，而无需求助于奇怪的黑客，或将逻辑散布到各处？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:59:45.787

这是一个很好的问题。+1

首先，按类型查找所有指令或节点违背了 Angular 的方式。View 是 AngularJS 中的官方记录，所以指令应该说他们做什么，做他们说什么。在某处编写一些流程来扫描 DOM 节点并采取相应措施是有问题的，原因有很多，其中最重要的是关注点分离和可测试性。

我很高兴看到您正在考虑其他选项，但我同意您提供的其他选项由于您提到的原因而不是最佳选择。但我还有一个。这是我在另一个应用程序中使用过的，但需要了解分散的 DOM 节点。

首先，我们创建一个服务来管理这个组件的状态。这很简单。让我们称之为`SectionsService`。接下来，我们创建一个指令来注册部分。为简单起见，我们称之为`section`。该指令在其链接阶段`section`向 DOM 节点的 ID（可能以编程方式创建以确保唯一性）注册。`SectionsService`由于 DOM （大部分）是按顺序处理的，因此添加到 DOM 的节点`SectionsService`也将按顺序处理。所以 DOM 看起来像这样（省略了无关的东西）：

```
<div section>...</div>

<!-- other stuff -->

<div section>...</div>

<!-- other stuff -->

<!-- etc. --> 
```

（虽然超出了这里的范围，但以一种顺序无关紧要的方式对其进行编程并不是很困难，但它会基于我不知道的你的应用程序的细节。）

接下来，您将创建触发器，例如箭头键处理程序。在这些事件中，您只需告诉`SectionService`转到列表中的上一个/下一个节点。AngularJS 带有一个名为的服务[`$anchorScroll`](http://docs.angularjs.org/api/ng.$anchorScroll)，可以用来模拟我们熟悉的浏览器基于哈希的定位。如果您愿意，您显然也可以使用 jQuery 插件来为滚动设置动画。

就是这样！一个非常简单的指令，一个相当简单的服务，以及您需要的任何触发器。总而言之，我猜不到 100 行代码，包括测试。所有组件都是解耦的并且易于测试，但仍然非常简单。观点仍然是真理。Angular 方式被保留。

有很多的欣喜。

* * *

我希望这能为您指明正确的方向，但当然可以随时提出后续问题。如果您愿意，我们也可以讨论代码细节；正如我所说，它们不会很复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:57:15.967

[AngularJS 服务](http://docs.angularjs.org/guide/dev_guide.services.creating_services)是单例的，可以通过依赖注入来获取。您可以让您的指令需要状态管理器服务并调用增量器/减量器。

或者，更简单但更脆弱的是，您可以在 $rootScope 中保留一个数组。它比 jquery 选择器全局更惯用的“角度”（但不是很多），但如果您正在构建一个小部件库，它可能不是最佳路线。

# ruby - 遍历数组数据

> ID：15802606
> 
> 赞同：-4
> 
> 时间：2013-04-04T04:36:21.770
> 
> 标签：ruby, json, recursion, foreach

我有一个 JSON 数据，格式如下：

```
 [{
        "id": 1,
        "children": [{
                "id": 7,
                "children": [{
                        "id": 8,
                        "children": [{
                                "id": 4
                            }, {
                                "id": 5
                            }, {
                                "id": 11
                            }
                        ]
                    }, {
                        "id": 9
                    }
                ]
            }, {
                "id": 6
            }, {
                "id": 10
            }
        ]
    }, {
        "id": 2,
        "children": [{
                "id": 3
            }, {
                "id": 12
            }
        ]
    }, {
        "id": 13
    }
] 
```

此 JSON 数据的树是：

![在此处输入图像描述](https://i.stack.imgur.com/szBrs.jpg)

我想遍历所有节点并提取维护其父子层次结构的所有数据的“id”。我如何使用递归函数来做到这一点。

这个想法是在ruby中解析json结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T06:25:40.573

我刚刚编写了一个 node js 代码，您仍然可以在 js 中使其在浏览器上运行，但您需要在[此处](http://underscorejs.org/underscore-min.js)下载下划线库。

```
_und = require('underscore');

data = [{
        "id": 1,
        "children": [{
                "id": 7,
                "children": [{
                        "id": 8,
                        "children": [{
                                "id": 4
                            }, {
                                "id": 5
                            }, {
                                "id": 11
                            }
                        ]
                    }, {
                        "id": 9
                    }
                ]
            }, {
                "id": 6
            }, {
                "id": 10
            }
        ]
    }, {
        "id": 2,
        "children": [{
                "id": 3
            }, {
                "id": 12
            }
        ]
    }, {
        "id": 13
    }
]

function parse_tree_2(n) {
    return(_und.map(n, parse_tree));
}

function parse_tree(n) {
    if (n['children']) {
        return({id: n['id'], children: parse_tree_2(n['children'])});
    } else {
        return({id: n['id']});
    }
}

result = _und.map(data, parse_tree);

console.log("Result: %j", result); 
```

您可以将其放入文件中，并使用 node 执行它（通过使用**nmp install node**下载下划线）。

在普通的 js 上，它会是这样的：

```
<script type="text/javascript" src="http://underscorejs.org/underscore-min.js"></script>
<script type="text/javascript">

data = [{
        "id": 1,
        "children": [{
                "id": 7,
                "children": [{
                        "id": 8,
                        "children": [{
                                "id": 4
                            }, {
                                "id": 5
                            }, {
                                "id": 11
                            }
                        ]
                    }, {
                        "id": 9
                    }
                ]
            }, {
                "id": 6
            }, {
                "id": 10
            }
        ]
    }, {
        "id": 2,
        "children": [{
                "id": 3
            }, {
                "id": 12
            }
        ]
    }, {
        "id": 13
    }
]

function parse_tree_2(n) {
    return(_.map(n, parse_tree));
}

function parse_tree(n) {
    if (n['children']) {
        return({id: n['id'], children: parse_tree_2(n['children'])});
    } else {
        return({id: n['id']});
    }
}

result = _.map(data, parse_tree);

console.log("Result: %j", result);

</script> 
```

* * *

红宝石代码：

```
require 'json'

data = <<EOF
[{
        "id": 1,
        "children": [{
                "id": 7,
                "children": [{
                        "id": 8,
                        "children": [{
                                "id": 4
                            }, {
                                "id": 5
                            }, {
                                "id": 11
                            }
                        ]
                    }, {
                        "id": 9
                    }
                ]
            }, {
                "id": 6
            }, {
                "id": 10
            }
        ]
    }, {
        "id": 2,
        "children": [{
                "id": 3
            }, {
                "id": 12
            }
        ]
    }, {
        "id": 13
    }
]
EOF

json = JSON.parse(data)

def parse_tree(n)
  if n["children"]
    {id: n["id"], children: n['children'].map {|c| parse_tree(c)} }
  else
    {id: n["id"]}
  end
end

result = json.map {|n| parse_tree(n) }

puts result 
```

# javascript - 如何更改链接的文本和功能？

> ID：15802608
> 
> 赞同：2
> 
> 时间：2013-04-04T04:36:46.763
> 
> 标签：javascript, jquery

下面的 jQuery js 隐藏了我放置的链接之前的内容。点击后会显示。我想将文本从“显示危机”更改为“隐藏危机”，并将函数从 .show() 更改为 .hide()。我不确定我该如何继续这样做，所以一些帮助会很棒！

JS：

```
$(".crisisButtons").hide().before("<a href='#' class='showHide'>Show Crisis</a>");
      $(".showHide").click(function(){
            var link = $(this);
            link.next().show("slow");
        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:40:49.093

您可以使用[`.text()`](http://api.jquery.com/text)方法的回调函数。

```
$(".showHide").click(function(){
    $(this).text(function(_, text){
         return text === 'Show Crisis' ? 'Hide Crisis' : 'Show Crisis';
    }).next().toggle("slow");
}); 
```

[http://jsfiddle.net/kNBwD/](http://jsfiddle.net/kNBwD/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:38:33.160

```
$("#youratag_id").text("Show crisis"); 
```

应该就这么简单

或使用切换：

```
$(function() {
        $(".showHide").toggle(function (){
            $(this).text("Show crisis");
            .stop();
        }, function(){
            $(this).text("Hide crisis");
            .stop();
        });
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:45:14.613

我会做这样的事情：

```
button.click(function () {
    link.toggle('fast', function () {
        button.text(link.css('display') === 'none' ? 'Show Crisis' : 'Hide Crisis'));
    });
}); 
```

# sql-server-2008 - ALTER TABLE 添加具有字符串变量的多个列

> ID：15802610
> 
> 赞同：0
> 
> 时间：2013-04-04T04:37:09.790
> 
> 标签：sql-server-2008, sql-server-2012

根据我的要求，我正在创建一个临时表，如下所示：

```
CREATE TABLE #ResourceMonthlyTimeReport
(
    RowId INT IDENTITY(1,1),
    ResourceID UNIQUEIDENTIFIER,
    TaskId UNIQUEIDENTIFIER,
    ProjectId UNIQUEIDENTIFIER,
    -- Some column names containing date should come here.
) 
```

在上表中，日期列应显示如下：

```
[01 Mar, 2013] NVARCHAR(10),
[02 Mar, 2013] NVARCHAR(10),
[03 Mar, 2013] NVARCHAR(10), 
```

...并且列数取决于参数值`@FromDate`和`@ToDate`

我编写了一个函数`dbo.F_ST_DaysColumns(@FromDate, @ToDate)`，该函数将以下输出生成为字符串：

```
[01 Mar, 2013] NVARCHAR(10),
[02 Mar, 2013] NVARCHAR(10),
[03 Mar, 2013] NVARCHAR(10) 
```

现在，我不明白如何将此结果附加到上述临时表中`#ResourceMonthlyTimeReport`。

我做了这样的事情：

```
DECLARE @DateColumns AS VARCHAR(MAX)
SET @DateColumns = dbo.F_ST_DaysColumns(@FromDate, @ToDate)

ALTER TABLE #ResourceMonthlyTimeReport ADD @DateColumns 
```

但是，显示如下错误：

> 消息 102，级别 15，状态 1，过程 ST_Proc_Rpt_MonthlyTimeReportSummary，第 94 行
> “@DateColumns”附近的语法不正确

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:09:11.913

哦...这太简单了，但是在我将这个问题发布到论坛之前，我无法这样想。无论如何，其他人可以使用它：

```
EXEC('ALTER TABLE #ResourceMonthlyTimeReport ADD ' + @DateColumns) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T10:07:15.877

表变量就像在内存中创建的临时表，可以在创建它的范围内使用。一旦创建，就不能使用 ALTER TABLE 语句来更改表变量的结构。最好在声明中添加另一列并在需要时使用它。请注意，表变量也可以具有接受 NULL 值的列。

# c# - C# 绑定对属性不起作用

> ID：15802611
> 
> 赞同：0
> 
> 时间：2013-04-04T04:37:13.730
> 
> 标签：c#, xaml, mvvm

我目前正在尝试在 C# 4 中遵循 MVVM，但在绑定工作时遇到了麻烦。

从底部开始，这是我的 Property 类，它*应该*处理为 XAML 绑定更改的属性：

```
namespace Visualizer.MVVM
{
    public class Property<T> : DependencyObject, INotifyPropertyChanged
    {
        //private T _Value;
        public T Value
        {
            get { return (T) GetValue(ValueProperty); }
            set
            {
                SetValue(ValueProperty, value);
                OnPropertyChanged();
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged()
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs("Value"));
            }
        }

        public Property(T val)
        {
            Value = val;
        }

        public static readonly DependencyProperty ValueProperty =
            DependencyProperty.Register("Value", typeof(T), typeof(Property<T>));
    }
} 
```

我的控件视图模型如下所示，并在 MainWindow.xaml.cs 中实例化：

```
public class CheckboxControlVM
{
    public Property<bool> IsChecked { get; set; }
    public Property<string> Name { get; set; }

    public CheckboxControlVM(bool isChecked, string name)
    {
        IsChecked = new Property<bool>(isChecked);
        Name = new Property<string>(name);
    }
} 
```

该控件没有代码隐藏，因此这里是它的 XAML：

```
<UserControl x:Class="Visualizer.MVVM.Checkbox"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:Visualizer.MVVM"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <StackPanel Orientation="Horizontal" x:Name="LayoutRoot">
        <CheckBox IsChecked="{Binding Path=IsChecked.Value, Mode=TwoWay}"/>
        <TextBlock Text="{Binding Path=Name.Value, Mode=OneWay}"/>
    </StackPanel>
</UserControl> 
```

最后，这是 MainWindow.xaml 中的绑定：

```
<mvvm:Checkbox DataContext="{Binding Realtime}"/> 
```

我被困在这个问题上的时间比我应该做的要长得多，并且相当肯定这只是一个简单的问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:14:49.230

我不太明白您想通过该物业设计实现什么目标。通常我不会在 WPF 中这样做，所以我不太确定这是否有帮助。

通常，我确实在 ViewModel 级别实现 INotifyPropertyChanged，而不是在 VM 拥有的属性中。例子：

```
public class ViewModel : INotifyPropertyChanged{
    public event PropertyChangedEventHandler PropertyChanged;
    protected void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

其次，除非我制作 WPF 用户控件，否则我不会使用 DependencyProperty。所以我使用私有属性并使用属性名称触发 OnPropertyChanged。

```
private string _name;
public string Name{
  set{
    _name = value;
    OnPropertyChanged("Name");
  }
} 
```

最后，在 XAML 中，我使用 UpdateSourceTrigger=PropertyChanged 的​​绑定。

```
<TextBlock Text="{Binding Path=Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

也许您可以尝试添加`UpdateSourceTrigger=PropertyChanged`绑定，但我不确定它是否会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:52:12.377

尝试这个

```
public class CheckboxControlVM
  {
    bool _isChecked = false;
    string _name ;
  public Property<bool> IsChecked { get { return _isChecked} set { _isChecked=value;} }

  public Property<string> Name { get { return _name } set { _name =value;} }

  public CheckboxControlVM(bool isChecked, string name)
  {
    _isChecked = isChecked;
     _name = name;
    IsChecked = new Property<bool>(_isChecked);
    Name = new Property<string>(_name);
  }
} 
```

# android - 是否可以将 zip 文件存储在 Google 应用引擎 blob 商店中并将其下载到 android 应用程序中

> ID：15802614
> 
> 赞同：1
> 
> 时间：2013-04-04T04:37:45.620
> 
> 标签：android, google-app-engine, zip, blobstore

嗨，我是使用**Google App Engine**的新手。我的要求是将**大型 Zip 文件**存储在 Blob 商店中，并在用户单击下载选项时检索到我的 android 应用程序。这可能吗？有人可以提供如何有效使用 android 应用程序的教程链接android 应用程序中的引擎 blob 存储。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:34:43.500

简短的回答是：是的，你可以。

首先，您必须完成有关如何[使用 Google App Engine 上传内容](https://developers.google.com/appengine/docs/python/blobstore/overview)的示例，然后尝试使用[Google Cloud Storage](https://developers.google.com/appengine/docs/python/blobstore/overview#using-blobstore-with-gcs)，因为从长远来看它会便宜得多。

完成后，您将意识到要上传，您所要做的就是从 Android 或使用您想要的任何其他方法发布[多部分数据。](https://stackoverflow.com/a/7632849/8418)在该教程中也非常明显地说明了如何将任何文件下载回您的 Android 应用程序。

您还可以尝试我的示例之一，用于在 Blobstore 或 Cloud Storage 上[上传文件。](http://upload.gae-init.appspot.com/resource/upload/)在该特定示例中，您只能上传图像和 PDF 文档，但很容易修改和仅接受 ZIP 文件或您可能想要的任何其他文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:28:34.177

也许谷歌云存储会更合适。 [https://developers.google.com/appengine/docs/python/googlestorage/](https://developers.google.com/appengine/docs/python/googlestorage/)

# asp.net - 另一个虚拟目录的访问代码

> ID：15802617
> 
> 赞同：0
> 
> 时间：2013-04-04T04:37:55.147
> 
> 标签：asp.net, .net, iis

假设我在一个应用程序下有两个虚拟目录，我想访问一个目录中另一个虚拟目录的函数和方法。这可能吗？如果是，那么如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:39:19.793

使用 Web 服务或 Http 处理程序或 WCF。

虚拟目录是什么意思。
这是否意味着托管应用程序。
如果是，那么上面是解决方案。

否则如果你知道应用程序的物理路径
你也可以使用`reflection`来执行任何里面的方法`dll`

# java - 电子邮件链接似乎只是来自 Nexus 7 的文本（操作系统版本：4.2.2）

> ID：15802618
> 
> 赞同：0
> 
> 时间：2013-04-04T04:38:00.617
> 
> 标签：java, android, email, html-email

在我的应用程序中，我可以选择通过电子邮件发送文件的 url，它在除 nexus 7 之外的所有设备（仅限操作系统版本 4.2.2）中都能正常工作。当来自nexus 7的邮件时，收件人只收到一个文本。我搜索了很多解决方案，但找不到任何解决方案。下面是我的代码

```
public static boolean sendEmailLink(Context context, String[] emailTo, String[] emailCC, String[] emailBCC, String subject, String emailBody, String notification) throws ActivityNotFoundException {

    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

    emailIntent.setType("message/rfc822");

    emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailTo);

    emailIntent.putExtra(android.content.Intent.EXTRA_CC, emailCC);

    emailIntent.putExtra(android.content.Intent.EXTRA_BCC, emailBCC);

    emailIntent.putExtra(Intent.EXTRA_SUBJECT, subject);

    emailIntent.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(emailBody));

    context.startActivity(Intent.createChooser(emailIntent, notification));

    return true;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T12:45:28.387

差别不大，但也许有帮助。你可以试试这个其他 Intent 构造函数

```
Intent i = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:" + destination)); 
```

它对我有用，这是我使用的完整方法：

```
public static void sendMail(Activity activity, String subject, String body, String destination) {
    Intent i = new Intent(Intent.ACTION_SENDTO, Uri.parse("mailto:" + destination));
    i.putExtra(Intent.EXTRA_SUBJECT, subject);
    i.putExtra(Intent.EXTRA_TEXT, Html.fromHtml(body));
    activity.startActivity(Intent.createChooser(i, "Send mail..."));
} 
```

希望它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:05:59.610

试试这个它对我有用。

```
Intent emailIntent = new Intent(Intent.ACTION_SENDTO);
emailIntent.setData(Uri.parse("mailto:"));
emailIntent.putExtra(Intent.EXTRA_SUBJECT,BusinessName);
emailIntent.putExtra(Intent.EXTRA_TEXT,Html.fromHtml(new StringBuilder().append(BusinessName+ "<br /><br />"+ LongDesc+ "<br /><br />"+ "<a href=\""+ ShareURL+ "\">"+ ShareURL+ "</a>").toString()));
startActivity(Intent.createChooser(emailIntent, "Send email...")); 
```

# image - 在 JavaFX HTMLeditor 中设置本地图像

> ID：15802619
> 
> 赞同：4
> 
> 时间：2013-04-04T04:38:04.440
> 
> 标签：image, javafx, html-editor

我正在寻找一种使用 JavaFX HTMLEditor 的 setHtmlText 添加*本地*图像的方法。我可以添加一个远程图像没问题：

```
HTMLEditor editor = new HTMLEditor();  
    editor.setHtmlText("<img src=\"http://someaddress.com\" width=\"32\" height=\"32\" >"); 
```

但不能对本地图像执行此操作

```
HTMLEditor editor = new HTMLEditor();  
    editor.setHtmlText("<img src=\"categoryButton.fw.png\" width=\"32\" height=\"32\" >"); 
```

此按钮与 java 源代码处于同一级别。那么为什么这行不通呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T18:22:11.077

使用[getResource](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)获取本地图片资源的位置。

```
editor.setHtmlText(
  "<img src=\"" + 
     getClass().getResource("categoryButton.fw.png") + 
  "\" width=\"32\" height=\"32\" >"
); 
```

它的工作方式与将内容加载到[WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)中的方式相同，如下所示：

[如何从 javafx.scene.web.WebEngine#loadContent 加载的 html 页面访问 css 和图像文件？](https://stackoverflow.com/questions/8923801/how-to-reach-css-and-image-files-from-the-html-page-loaded-by-javafx-scene-web-w)

* * *

这是一个屏幕截图：

![有图像的编辑器](https://i.stack.imgur.com/yjjfc.png)

还有一个可执行示例：

```
import javafx.application.*;
import javafx.scene.Scene;
import javafx.scene.web.HTMLEditor;
import javafx.stage.Stage;

public class HTMLEditorWithImage extends Application {
  @Override public void start(Stage stage) {
    HTMLEditor editor = new HTMLEditor();
    editor.setHtmlText(
      "<img src=\"" + 
         getClass().getResource("Blue-Fish-icon.png") + 
      "\" width=\"32\" height=\"32\" >"
    );
    stage.setScene(new Scene(editor));
    stage.show();
  }

  public static void main(String[] args) { launch(args); }
} 
```

* * *

> 我只是好奇这是否是将图像放入某种文本区域的唯一方法？

1.  使用 JavaFX 2，您可以将与文本混合的图像嵌入到[FlowPane](http://docs.oracle.com/javafx/2/api/javafx/scene/layout/FlowPane.html)中，如[Javafx Text multi-word](https://stackoverflow.com/questions/15081892/javafx-text-multi-word-colorization) colorization 中所述。
2.  Java 8 添加了一个[TextFlow](https://wikis.oracle.com/display/OpenJDK/Rich+Text+API+Samples)组件，它允许您将图像嵌入到文本区域中。

以上两种技术仅用于数据显示。两者都不允许编辑插入图像和其他节点的多样式文本。目前，JavaFX 平台为此功能提供的唯一控件是[HTMLEditor](http://docs.oracle.com/javafx/2/api/javafx/scene/web/HTMLEditor.html)或具有[contenteditable true的](https://stackoverflow.com/questions/10685395/webview-with-contenteditable-cannot-be-focused-programmatically)[WebView](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebView.html)或用 JavaScript 编写的嵌入式[3rd 方编辑器](https://gist.github.com/jewelsea/1463485)。

已经有一些第 3 方努力使用不依赖于 WebView 或 HTMLEditor 的[本机 JavaFX 构造创建样式化文本编辑器，但截至今天，我认为还没有准备好广泛使用。](http://tomsondev.bestsolution.at/2013/02/20/from-styledtextviewer-to-a-styledtexteditor-with-javafx8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-01T16:12:26.623

示例代码：在图像标签中附加 file:\\ 以引用本地文件。

```
ScreenCapture x = new ScreenCapture();
String imagePath = x.captureScreen(scCaptureCount+++"", "C:\\work\\temp");
String text = editor.getHtmlText();
editor.setHtmlText(text+"&lt;img src='file:\\\\"+imagePath+"' >" ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T11:10:17.967

此代码在最后一个结束段落标记或结束正文标记之前插入图像。

```
String imgUrl = "http://..../image.png";
StringBuilder sb = new StringBuilder(htmlEditor.getHtmlText());
int pos = sb.lastIndexOf("</p>") > -1 ? sb.lastIndexOf("</p>") : sb.lastIndexOf("</body>");
sb.insert(pos, "<span><img src='" + imgUrl + "'></span>");
htmlEditor.setHtmlText(sb.toString()); 
```

# php - 为什么我的代码容易受到 xss 攻击？

> ID：15802624
> 
> 赞同：3
> 
> 时间：2013-04-04T04:39:04.490
> 
> 标签：php, html, xss

我有这样的php代码

```
<?php
    $input_from_user = "w' onclick = 'alert(document.cookie);'";
    $i_am_barcelona_fan = htmlentities($input_from_user);
?>
<input type = 'text' name = 'messi_fan' value ='<?php echo $i_am_barcelona_fan;?>' /> 
```

我`htmlentities`用来防止 XSS 攻击，但我仍然容易受到上述字符串的攻击。为什么我的代码容易受到 XSS 攻击？我怎样才能保护我的代码免受它的影响？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:52:34.267

永远（永远）不要相信引入到您的 PHP 代码中的外部输入。在代码中使用外部输入之前，请始终对其进行清理和验证。filter_var 和 filter_input 函数可以净化文本并验证文本格式（例如电子邮件地址）。

外部输入可以是任何东西：$_GET 和 $_POST 表单输入数据，$_SERVER 超全局中的一些值，以及通过 fopen('php://input', 'r') 的 HTTP 请求正文。请记住，外部输入不仅限于用户提交的表单数据。上传和下载的文件、会话值、cookie 数据以及来自第三方 Web 服务的数据也是外部输入。

虽然外部数据可以在以后存储、组合和访问，但它仍然是外部输入。每次在代码中处理、输出、连接或包含数据时，都要问问自己数据是否被正确过滤以及是否可以信任。

数据可能会根据其目的进行不同的过滤。例如，当未经过滤的外部输入传递到 HTML 页面输出时，它可以在您的站点上执行 HTML 和 JavaScript！这称为跨站点脚本 (XSS)，可能是一种非常危险的攻击。避免 XSS 的一种方法是在将所有用户生成的数据输出到页面之前对其进行清理，方法是使用 strip_tags 函数删除 HTML 标记，或者使用 htmlentities 或 htmlspecialchars 函数将具有特殊含义的字符转义到它们各自的 HTML 实体中。

另一个示例是传递要在命令行上执行的选项。这可能非常危险（通常是个坏主意），但您可以使用内置的 escapeshellarg 函数来清理已执行命令的参数。

最后一个示例是接受外部输入以确定要从文件系统加载的文件。这可以通过将文件名更改为文件路径来利用。您需要从文件路径中删除“/”、“../”、空字节或其他字符，以便它无法加载隐藏、非公共或敏感文件。

了解数据过滤 ( [http://www.php.net/manual/en/book.filter.php](http://www.php.net/manual/en/book.filter.php) )

了解 filter_var ( [http://php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T04:56:53.223

您也没有告诉 PHP 转义引号，`htmlspecialchars()`而是应该使用：

```
<input type = 'text' name = 'messi_fan' value ='<?php echo htmlspecialchars($input_from_user, ENT_QUOTES, 'UTF-8'); ?>' /> 
```

[**演示**](http://codepad.viper-7.com/bphh5p)

# java - 当输入事件仅影响视图时，关于控制器及其角色（如果有）的 MVC 设计帮助

> ID：15802625
> 
> 赞同：2
> 
> 时间：2013-04-04T04:39:09.920
> 
> 标签：java, model-view-controller, design-patterns, javafx

诚然，我对使用设计模式很陌生，我似乎不确定如何在这里进行。我正在 JavaFX 中构建自定义图形符号。我只是扩展 Parent 并将矩形和圆形添加到我的符号类中，然后在场景中显示该符号对象。

此符号类还注册事件处理程序，如 setOnMouseEntered 和许多其他事件处理程序，以更改符号以响应鼠标事件。我想问的是在哪里存储所有这些事件处理程序最有意义？我不确定他们是否应该改为进入 Controller 类，或者是否因为它们只影响该符号的视图，也许我应该将它们保留在符号的类中，并将 Controller 保留用于必须从 View 进行通信的事物模型，反之亦然。感谢任何可以对此有所了解的人（或者可以为我指出好的资源）！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T13:12:34.807

由于您的意图是更改对象..

我会这样理解：

模型：代表您显示的数据的所有内容。在您的情况下，包含所有圆圈的符号类

控制器：如果你以任何方式修改你的模型（你的符号对象），那么只有在你的控制器类中使用方法才允许这样做。Controller是你的层，只有通过这个层你才能访问Model进行修改

视图：显示模型所需的任何东西都可以/应该放置在此部分中。

所以这取决于你，你的程序是否会“记住”当前的选择，或者你的模型是否也有一个变量。我认为这两种方法都应该有效。

1.（在模型中）：如果模型中有变量，那么选择一个符号将是一个通过控制器类调用的动作（因为它改变了模型），并且由于模型会改变，它会触发用于更新模型视图的视图类。（视图使用观察者模式来获取新的模型数据并在模型更改时重绘）

2.（在您使用视图和控制器的显示程序中）：如果此处“记住”选择，我认为可能会产生一些混乱，因为视图不同（取决于选择）。因此，我建议走 1 路。

请阅读有关 OSR（单一职责）的信息，我不确定如何将 OSR 与 MVC 结合使用，以及扩展您的“真实模型”以添加选择是否会更好，因为这使您的模型不受编辑对象的影响在可能使用相同模型的其他类中可能不需要。如果您始终打算允许编辑符号类，则不必担心将选择变量添加到模型中。

所以关于你的鼠标输入和点击事件，尽量严格：你总是由你的程序本身处理用户输入，但如果它是一个可以理解为对模型的操作的动作，那么你将调用控制器中的一个方法. 您不必遵循这些 MVC 规则，但它应该可以帮助您更好地阅读项目，您可以添加多个自动更新的视图，并且扩展应该更容易。

如果您不确定结构，典型的方法是尝试定义所有可能的解决方案，然后进行比较。尝试找到一种简单的方法（易于理解和易于扩展）。松耦合，OSR 和 DRY 是很好的提示。一般足以尝试尽可能多地应用它们。但也要记住，如果一个解决方案只是遵循设计模式，但它“感觉”太复杂，那么还要考虑构建一个简单的类或其他方法。有时我们构建的复杂性超出了需要。例如，工厂模式和建造者模式是很好的设计模式，但是如果一个类需要非常复杂的配置，但不是多个不同的结构并且与其他对象不相关，那么......在构造函数中包含代码的类可能会采用更好的方法。

作为一个很好的资源，我推荐 OReally 的书籍“Head First Design Patterns”和“Head First Object-Oriented Analysis and Design”。出版商韦斯利的书也很好。通常你可以在你的大学图书馆找到它们免费借阅。尝试找到设计模式的真正用途，这有助于理解它们（为什么有用），并且你会获得一些关于它们使用的经验。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:21:23.820

*一般建议*

我建议不要尝试直接从抽象概念开始工作，而是在现有代码中查看在 JavaFX 中实现的这些模式的示例，并了解它们是如何在那里编码的。当你找到一些你喜欢的模式时，你可以在你的代码中模拟它们。

在大型编程中，您在整个应用程序或场景中应用 MVC 模式，而在小型编程中，您在特定控件类型中应用模式是不同的。您的问题似乎与后一种情况更相关，因此我将在此答案中主要考虑这一点。

* * *

*JavaFX 控件 - 皮肤、行为和公共 API*

查看 JavaFX 的现有[控件代码](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-controls/)。对于 a `Button`，您将拥有：

1.  [javafx.scene.control.Button](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-controls/src/javafx/scene/control/Button.java) - 用于操作控件的公共 API。
2.  [javafx.scene.control.skin.ButtonSkin](http://hg.openjdk.java.net/openjfx/8/master/rt/file/tip/javafx-ui-controls/src/com/sun/javafx/scene/control/skin/ButtonSkin.java) - 控件的可视化视图。
3.  [javafx.scene.control.behavior.ButtonBehavior](http://hg.openjdk.java.net/openjfx/8/master/rt/file/17956a42070a/javafx-ui-controls/src/com/sun/javafx/scene/control/behavior/ButtonBehavior.java) - 事件绑定（键/鼠标事件等）。

提供`ButtonBehavior`了一个抽象 api，以便一个按钮可以绑定到不同的平台和用户特定的事件映射，用于键、鼠标和触摸组合。

`ButtonSkin`允许在不修改公共 API 或行为的情况下完全换入和换出控件的可视化实现。

`Button`公共 API 提供了一个稳定的 API，按钮的用户可以对其进行编程，以独立于控件实现的任何视觉或行为变化。

* * *

*删除抽象*

虽然皮肤和行为 API 非常适合抽象出行为和外观的实现细节，但它们确实增加了控件实现者的复杂性和开销。您应该考虑您正在创建的控件是否真的需要这种复杂性并评估替代的、更简单的方法。

最简单的方法是扩展现有的窗格并将所有逻辑放在单个扩展类中（或者甚至只是提供构造控制节点的工厂方法）。您失去了抽象以及简单实现可互换性和关注点分离的好处，但是您有一个非常简单的实现。[Oracle Mastering FXML 教程中](https://stackoverflow.com/questions/12383533/javafx-2-0-style-template-existing-control)的自定义控件示例就是这种直接扩展机制的一个示例。

我使用的一种稍微复杂的方法是使用一个封装公共 API 和控制状态信息的类以及一个单独的皮肤类来处理事件或 UI 呈现。我喜欢这种方法，因为它清楚地将 JavaFX 特定逻辑和代码与底层控件状态和公共 API 分开，而不会像标准 JavaFX 控件的行为/皮肤/公共 API 方法那样增加太多的概念开销。使用这种方法的一些示例代码在这个[井字游戏中](https://gist.github.com/jewelsea/5115901)。

* * *

*皮肤/行为和公共 API 之间的通信*

利用包含控件公共 API 的类中的[JavaFX 属性机制。](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)这些属性可以定义控件的公共 API，也可以通过[ReadOnlyWrappers](http://docs.oracle.com/javafx/2/api/javafx/beans/property/ReadOnlyObjectWrapper.html)等类型封装内部控件状态。

皮肤可以将绑定和侦听器应用于属性，以便在触发侦听器时，皮肤可以触发自身的自动更新以反映新的控件状态。控件的用户可以侦听或绑定到控件的内部状态，以便在该状态更改时采取行动。这种方法的一个示例是[ToggleButton 的 selected 属性，](http://docs.oracle.com/javafx/2/api/javafx/scene/control/ToggleButton.html#selectedProperty)其中皮肤会根据按钮是否被选中来改变切换按钮的外观。

当您创建皮肤时，使用对包含控件的公共 api 的反向引用来初始化皮肤和行为（例如`SymbolSkin`，并`SymbolBehaviour`具有对 的引用`Symbol`）。[SymbolSkin 或 SymbolBehavior 中](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html#addEventHandler%28javafx.event.EventType,%20javafx.event.EventHandler%29)的 mouseclickhandler 可以拦截鼠标单击，并将公共 api 上的选定属性切换到 Symbol，然后侦听符​​号上选定属性的更改的用户代码可以在该用户代码不紧密的情况下生效耦合到符号的皮肤或行为。

公共 API`Symbol`只需要公开一个方法，该方法`getSkin()`将皮肤作为一个简单的节点返回，可以在场景图中使用。`Symbol`通过这样做，皮肤和行为的实现对使用公共 API的调用类隐藏。

* * *

*扩展 Region 并使用 CSS*

通过让控件皮肤 extend `Region`，控件变得可以通过 css 设置样式。我强烈推荐这种方法，因为这意味着控件的许多视觉方面（例如颜色填充、背景、边框、形状等）都可以在[JavaFX 丰富的 css 样式语言](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)中进行操作。

执行此操作时，请尝试使用单独的 css 样式类来检测控件外观中的所有节点。这为控件的可视组件提供了挂钩，您可以使用这些挂钩来设置这些组件的样式。[使用 CSS 设置图表样式](http://docs.oracle.com/javafx/2/charts/css-styles.htm)的 Oracle 教程是这种对复杂组件进行样式设置的示例。

要在您的问题中定义不同的符号，您可以创建一个`Symbol`控件。定义一个`SymbolBehaviour`用于处理它的用户事件和一个`SymbolSkin`扩展`Region`。每个符号实例都可以分配有自己的样式类，公共符号 API 可以提供构造函数或工厂方法，在符号皮肤的区域上设置此样式类。使用`-fx-shape`css 说明符根据 svg 路径字符串设置符号形状的样式。

css 样式类名称本身可以硬编码到您的`SymbolSkin`实现中，并作为公共 API 的一部分进行记录（如[标准控件的 CSS 参考指南中](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html)所做的那样）。

使用定义控件默认样式的默认 css 模板运送您的控件。

* * *

*FXML 注意事项*

当您有一个由许多需要协调的子控件组成的大型应用程序或场景时，您可以使用[FXML](http://docs.oracle.com/javafx/2/api/javafx/fxml/doc-files/introduction_to_fxml.html)之类的东西以声明性方式定义场景。这允许您将 UI 设计与您的命令式编程代码库分开，并确保您不会开始在视图中编写命令式代码。

对于具有 FXML 的真正 MVC 架构，您可能需要的不仅仅是 FXML 文件和用于场景实现的支持控制器，您还需要更高级别的控制机制来换入和换出场景，可能还需要更复杂的事件处理方法，例如作为事件总线，但这超出了这个问题的范围。

* * *

*有关的*

有一个略有不同但相关的问题，应该可以帮助您更好地理解问题域（[JavaFX 2.0 - 样式/模板现有控件](https://stackoverflow.com/questions/12383533/javafx-2-0-style-template-existing-control)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T15:53:25.247

看法 ：

*   如果可能，我尝试在 FXML 中应用绑定（双向绑定还不能完成）
*   如果可以，我会尝试省略控制器（只读阶段是很好的候选者）

控制器 ：

*   我将模型作为构造函数依赖项传递
*   我在 FXMLLoader 上使用控制器工厂创建控制器
*   我在初始化方法中设置了绑定

模型 ：

*   如果需要，我会为每个属性定义属性和 getter/setter
*   我在这部分代码中尽可能多地定义了应用程序的行为

我还在学习 JavaFX，整个技术似乎还不成熟。

随意浏览我用 JavaFX 2.2（IDE：IntelliJ IDEA）编写的一个小型 PoC，网址为[http://twittersearch.codeplex.com](http://twittersearch.codeplex.com)

# android - ListView 项目中的 YouTubePlayerSupportFragment 为空

> ID：15802626
> 
> 赞同：5
> 
> 时间：2013-04-04T04:39:11.513
> 
> 标签：android, android-fragments, youtube-api

我正在尝试`YouTubePlayerSupportFragment`在`ListView`项目中使用 a 。在`ListView`里面是在`Fragment`里面`Activity`。由于存在嵌套片段，因此我使用该`getChildFragmentManager()`方法尝试从 XML 布局中查找片段。这是代码。

**爪哇**

```
convertView = inflater.inflate(R.layout.youtube_post_layout, null);
YouTubePlayerSupportFragment youTubePlayerFragment = (YouTubePlayerSupportFragment) getChildFragmentManager().findFragmentById(R.id.youtube_video);
if (youTubePlayerFragment == null) {
    Log.i("YouTube", "player is null");
} else {
    Log.i("YouTube", youTubePlayerFragment.toString());
} 
```

**XML**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <include layout="@layout/post_base_layout" />

    <fragment
        android:name="com.google.android.youtube.player.YouTubePlayerSupportFragment"
        android:id="@+id/youtube_video"
        android:layout_width="match_parent"
        android:layout_height="240dp"
        android:layout_marginLeft="62dp"
        android:layout_marginRight="32dp"
        android:background="@color/light_grey"
        android:cropToPadding="true"
        android:padding="1dp"
        android:scaleType="centerCrop" />

    <include layout="@layout/post_bottom_layout" />

</LinearLayout> 
```

问题是，当我尝试通过`findFragmentById()`从 XML 获取片段来创建片段时，它返回 null，这就是发布到堆栈跟踪的内容。

我正在尝试遵循 YouTube API 示例并进行嵌套片段所需的更改，但我无法找出导致问题的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-29T08:29:24.897

您采取的整个方法存在问题。

[首先，不支持](http://developer.android.com/about/versions/android-4.2.html#NestedFragments)直接从 XML 扩充子片段。嵌套片段时，您必须`getChildFragmentManager`在父片段中动态添加它们。

其次，即使它有效（并且在某些情况下可能），您已经膨胀了视图但没有将其添加到实际片段的布局中。这就是方法中的[第二个和第三个参数](http://developer.android.com/reference/android/view/LayoutInflater.html#inflate(org.xmlpull.v1.XmlPullParser,%20android.view.ViewGroup,%20boolean))的`inflate`用途。将`FragmentManager`在其当前布局中查找片段，或在后台堆栈中查找事件，但找不到在随机 XML 中膨胀且从未投入使用的片段。

最后，也是最重要的一点，你永远不应该将片段作为项目添加到`ListView`. Fragment 期望有一个与它们所在的 Activity 相关联的生命周期，而 a`ListView`或任何`AdapterView`一般的，将根据需要创建、销毁和回收其子级。

可能的解决方案：

*   您的列表中需要多少视频？如果它们的数量不多，则 ScrollView+LinearLayout 实际上可能是最简单的解决方案。

*   如果你真的需要 View 回收，也许你可以不用每一行的直播视频？考虑在您的行中使用[YouTubeThumbnailView](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeThumbnailView?hl=es)`YoutubeFragment` ，然后将您的用户重定向到另一个活动/将视频加载到位于布局列表之外的单个活动中。

*   如果您确实希望直接在列表中的每一行上播放视频，则需要在行布局上使用[YoutubePlayerView](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView)而不是片段。在这种情况下，请仔细阅读文档，因为您需要自己处理视频初始化和查看回收。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-20T20:52:42.053

当您尝试使用相同的`Fragment`每个`ListView`项目来扩展视图时，您的应用程序将崩溃（作为片段 id 中的重复，如本[测验](https://stackoverflow.com/questions/25468936/duplicated-id-in-fragment-youtubeplayersupportfragment)）

有两个解决方案（其中一个来自[@ivagarz](https://stackoverflow.com/users/107940/ivagarz)答案）：

1-您只能显示一个 youtube 视频`YouTubePlayerView`在`ListView`您的`Activity`布局中使用但您`Activity`必须`YouTubeBaseActivity`像[YouTube Android Player API Doc](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubePlayerView)一样扩展（我认为此解决方案不会帮助您解决问题）

2-您可以使用youtube 播放器按钮在用于显示视频的 youtube 缩略图上显示`YouTubeThumbnailView`每个项目的视频的youtube 缩略图图像。`ListView`

**喜欢**下一张图片：

![在此处输入图像描述](https://i.stack.imgur.com/irVHf.png)

**当**用户单击 youtube 播放器按钮时，您有两种方法：

**第一个**选项使用`YouTubePlayerSupportFragment`：您可以替换`YouTubeThumbnailView`为`YouTubePlayerSupportFragment` 如果您选择此选项，您必须：

A-`YouTubePlayerSupportFragment`以编程方式即时添加（以避免在`Fragment`Id 中重复）。

`ListView`B- 仅在[此问题的答案中](https://stackoverflow.com/questions/17117164/android-multiple-youtube-videos-in-activity/17156234#17156234)显示一个视频。

**例如**：

`list_item.xml`项目布局`ListView`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/parent_relativeLayout"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >

    <com.google.android.youtube.player.YouTubeThumbnailView
            android:id="@+id/youtube_thumbnail"
            android:layout_width="fill_parent"
            android:layout_height="250dp"
            android:scaleType="centerCrop"
            android:visibility="gone"/>

    <RelativeLayout android:id="@+id/relativeLayout_over_youtube_thumbnail"
        android:layout_width="fill_parent"
        android:layout_height="250dp"
        android:background="@color/color_background_transparent"
        android:visibility="gone">

        <ImageView android:id="@+id/btnYoutube_player"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:scaleType="center"
            android:src="@drawable/youtube_player"/>

    </RelativeLayout>

</RelativeLayout> 
```

在`getView`适配器方法中`ListView`：

```
 public View getView(int position, View convertView, ViewGroup parent) {

    convertView = inflator.inflate(R.layout.list_item.xml, parent, false);
    final RelativeLayout relativeLayoutOverYouTubeThumbnailView = (RelativeLayout) convertView.findViewById(R.id.relativeLayout_over_youtube_thumbnail);
    final YouTubeThumbnailView youTubeThumbnailView = (YouTubeThumbnailView) convertView.findViewById(R.id.youtube_thumbnail);

    // get parent relative layout
    RelativeLayout parentRelativeLayout = (RelativeLayout) convertView.findViewById(R.id.parent_relativeLayout);
    // then create dynamic FrameLayout
    FrameLayout.LayoutParams dynamicFrameLayoutParams = new FrameLayout.LayoutParams(FrameLayout.LayoutParams.MATCH_PARENT, FrameLayout.LayoutParams.MATCH_PARENT);
    final FrameLayout dynamicFrameLayout = new FrameLayout(ctx);
        dynamicFrameLayout.setId(Different_ID);
        dynamicFrameLayout.setLayoutParams(dynamicFrameLayoutParams);
    // then add dynamic FrameLayout as children in parent relative layout
    parentRelativeLayout.addView(dynamicFrameLayout);

    ImageView youtubePlayerButton = (ImageView) convertView.findViewById(R.id.btnYoutube_player);
    youtubePlayerButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {

            View parentView = (View) v.getParent().getParent();
            YouTubeThumbnailView youTubeThumbnailView = (YouTubeThumbnailView) parentView.findViewById(R.id.youtube_thumbnail);
            RelativeLayout relativeLayoutOverYouTubeThumbnailView = (RelativeLayout) parentView.findViewById(R.id.relativeLayout_over_youtube_thumbnail);
            youTubeThumbnailView.setVisibility(View.GONE);
            relativeLayoutOverYouTubeThumbnailView.setVisibility(View.GONE);
            YouTubeFragment youTubeFragment = new YouTubeFragment();
                youTubeFragment.youTubeFragmentInitialize(VideoID, youTubeFragment, parentView);

            getSupportFragmentManager()
               .beginTransaction()
                    .replace(dynamicFrameLayout.getId(), youTubeFragment)
                    .commit();

        }
    });

    final YouTubeThumbnailLoader.OnThumbnailLoadedListener  onThumbnailLoadedListener = new YouTubeThumbnailLoader.OnThumbnailLoadedListener(){
        @Override
        public void onThumbnailError(YouTubeThumbnailView youTubeThumbnailView, YouTubeThumbnailLoader.ErrorReason errorReason) {

        }

        @Override
        public void onThumbnailLoaded(YouTubeThumbnailView youTubeThumbnailView, String s) {
            loadingImage.setVisibility(View.GONE);
            youTubeThumbnailView.setVisibility(View.VISIBLE);
            relativeLayoutOverYouTubeThumbnailView.setVisibility(View.VISIBLE);
        }
    };

    youTubeThumbnailView.initialize(API_KEY, new YouTubeThumbnailView.OnInitializedListener() {
            @Override
            public void onInitializationSuccess(YouTubeThumbnailView youTubeThumbnailView, YouTubeThumbnailLoader youTubeThumbnailLoader) {

                youTubeThumbnailLoader.setVideo(VideoID);
                youTubeThumbnailLoader.setOnThumbnailLoadedListener(onThumbnailLoadedListener);
            }

            @Override
            public void onInitializationFailure(YouTubeThumbnailView youTubeThumbnailView, YouTubeInitializationResult youTubeInitializationResult) {

            }
        });
} 
```

我是从以下位置创建自己的`Fragment`扩展`YouTubePlayerSupportFragment`：

```
public class YouTubeFragment  extends YouTubePlayerSupportFragment {

    public void youTubeFragmentInitialize(final String videoId, final YouTubeFragment fragment, final View parent) {

        fragment.initialize(apiKey, new YouTubePlayer.OnInitializedListener() {
            @Override
            public void onInitializationSuccess(YouTubePlayer.Provider provider, final YouTubePlayer youTubePlayer, boolean wasRestored) {

           youTubePlayer.setShowFullscreenButton(false);
                if (!wasRestored) {
                    youTubePlayer.loadVideo(videoId);
                }
            }

            @Override
            public void onInitializationFailure(YouTubePlayer.Provider provider, YouTubeInitializationResult youTubeInitializationResult) {

                Log.e("app", youTubeInitializationResult.toString());
            }
        });
    }
} 
```

**`YouTubeStandalonePlayer`使用或创建自己的`Activity`扩展的**第二个**选项`YouTubeBaseActivity`：就在用户单击 youtube 播放器按钮时，您可以创建一个 Intent 来打开新活动以显示视频**

 **```
Intent intent = YouTubeStandalonePlayer.createVideoIntent(context, YOUR_DEVELOPER_KEY, VIDEO_ID);
 startActivity(intent); 
```**

# jquery - 使用 jQuery，如何更改每个 src 的多个图像？

> ID：15802630
> 
> 赞同：0
> 
> 时间：2013-04-04T04:39:27.910
> 
> 标签：jquery

我想用 jQuery 更改我的图像的 src，但图像不是一个。多个图像。

请看我的代码。

**第一张图片：**

```
<a href="http://lh6.ggpht.com/-tW5eZaAemP8/UBZ_aT66SiI/AAAAAAAAZPM/CkVqrBISveU/s1600-h/IMGP3368%25255B2%25255D.jpg" target="_blank"><img style="display: inline" title="IMGP3368
No EXIF" alt="IMGP3368" src="http://lh5.ggpht.com/-WvsxW1qf94s/UBZ_bS1pT0I/AAAAAAAAZPU/FnSwggTLHQk/IMGP3368_thumb.jpg?imgmax=800" width="640" height="426"></a> 
```

**第二张图片：**

```
<a href="http://lh5.ggpht.com/-RwcbVTWo_a0/UBZ_X08TWcI/AAAAAAAAZO8/-XHPCEmam68/s1600-h/IMGP3367%25255B2%25255D.jpg" target="_blank"><img style="display: inline" title="IMGP3367
No EXIF" alt="IMGP3367" src="http://lh3.ggpht.com/-FSuZrqMVwhY/UBZ_ZMMEjUI/AAAAAAAAZPE/HAb-ACKoO8A/IMGP3367_thumb.jpg?imgmax=800" width="640" height="426"></a> 
```

**和我的 jQuery 代码：**

```
<script type="text/javascript">
$(document).ready(function() {
    $('.go_big').click(function(){
        var new_img = $('a[href*="ggpht.com"]').attr('href').replace('s1600-h','s1600')
        $('a[href*="ggpht.com"] > img').attr({src: new_img, width:'', height:''})
        });
});
</script> 
```

如果单击“.go_big”，则从“A”标签加载 href 地址。并更改 'a > img's address is 'A' tag's address。如何更改图像的地址？

谢谢你的阅读。

（对不起，我的英语不是很流利。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:41:37.687

尝试用我的代码替换您的代码。

```
<script type="text/javascript">
$(document).ready(function() {
    $('.go_big').click(function(){
        $('a[href*="ggpht.com"]').each(function(){
            var new_img = $(this).attr('href').replace('s1600-h','s1600');
            $(this).find('img').attr({src: new_img, width:'', height:''});
        });
    });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:42:43.180

用于`.each()`更新每个选定的图像：

```
$('a[href*="ggpht.com"]').each(function() {
    var new_img = $(this).attr('href').replace('s1600-h','s1600')
    $(this).find("img").attr({src: new_img, width:'', height:''});
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:47:15.497

你可以这样做。您`.each()`在链接上使用。在`.each()`回调中，您获取 href 并计算新的，然后找到该特定链接的子图像并将其设置为`.src`.

```
<script type="text/javascript">
$(document).ready(function() {
    $('.go_big').click(function(){
        $('a[href*="ggpht.com"]').each(function() {
            var new_img = $(this).attr('href').replace('s1600-h','s1600');
            $(this).find("img").attr({src: new_img, width:'', height:''});
        });
    });
});
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T04:47:22.163

使用 each 循环所有锚标记并从那里获取新的图像链接。现在在其中找到图片链接并更改其来源。尝试这个

```
$(document).ready(function () {
    $('.go_big').click(function () {
        $('a[href*="ggpht.com"]').each(function (index, element) {
            var elm = $(this),
                new_img = elm.attr('href').replace('s1600-h', 's1600');
            elm.find('img').attr({
                src: new_img,
                width: '',
                height: ''
            })
        });
    });
}); 
```

# ios - 使用导航呈现自定义大小的视图控制器

> ID：15802633
> 
> 赞同：0
> 
> 时间：2013-04-04T04:39:33.827
> 
> 标签：ios, ipad, uinavigationcontroller, presentmodalviewcontroller

我想展示一个自定义大小的视图控制器，比如（500,500）。我尝试使用下面的代码来做到这一点，如果我单独呈现视图控制器，它可以在半透明的浅灰色背景下正常工作，但是当我将视图控制器放在导航控制器中时（我想做）有黑色背景出现了，我不想要这个，我想要灰色的。

我在这个问题的帮助下做了以下代码：

[iOS——如何控制模态视图控制器的大小？](https://stackoverflow.com/questions/4231022/ios-how-do-you-control-the-size-of-a-modal-view-controller)

```
MyViewController *vc=[[MyViewController alloc]initWithNibName:@"MyViewController" bundle:nil];

UINavigationController *nav=[[UINavigationController alloc]initWithRootViewController:vc];

nav.modalPresentationStyle=UIModalPresentationPageSheet;

[self.window.rootViewController presentModalViewController:nav animated:YES];

CGRect r = CGRectMake(self.window.rootViewController.view.bounds.size.width/2 - 250,
                              self.window.rootViewController.view.bounds.size.height/2 - 250,
                              500, 500);
r = [self.window.rootViewController.view convertRect:r toView:vc.view.superview.superview];
  vc.view.superview.superview.frame = r; 
```

任何猜测，我在这里错过了什么？或者有没有一种简单的方法来展示一个带有导航的自定义大小的 VC？

带导航：

![在此处输入图像描述](https://i.stack.imgur.com/riufV.png)

没有导航：（我使用的是深色背景，所以它可能看起来像黑色但实际上不是） ![在此处输入图像描述](https://i.stack.imgur.com/oX6dT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:35:54.363

只需将透明覆盖层放在视图控制器上并呈现它，让它看起来像你真正想要的......

另请参阅以下链接，

[在 iPad 中显示带有自定义框架的模态视图控制器](https://stackoverflow.com/questions/4065918/show-modal-view-controller-with-custom-frame-in-ipad)

[如何在中心呈现具有自定义大小的模态视图控制器？](https://stackoverflow.com/questions/14048301/how-to-present-a-modal-view-controller-with-custom-size-in-center)

[模态视图控制器的 iPad 自定义大小](https://stackoverflow.com/questions/3298378/ipad-custom-size-of-modal-view-controller/10134726#10134726)

[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

# python - Python函数将唯一值从多个列表合并到一个列表

> ID：15802637
> 
> 赞同：15
> 
> 时间：2013-04-04T04:39:51.150
> 
> 标签：python, list, function, merge

我对 Python 很陌生。我正在尝试编写一个函数，它将单独列表中的唯一值合并到一个列表中。我不断得到列表元组的结果。最终，我想从我的三个列表-a，b，c 中获得一个唯一值列表。任何人都可以帮我解决这个问题吗？

```
def merge(*lists):
    newlist = lists[:]
    for x in lists:
        if x not in newlist:
            newlist.extend(x)
    return newlist

a = [1,2,3,4]
b = [3,4,5,6]
c = [5,6,7,8]

print(merge(a,b,c)) 
```

我得到一个列表元组

```
([1, 2, 3, 4], [3, 4, 5, 6], [5, 6, 7, 8]) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-04T04:42:43.240

您可能只需要设置：

```
>>> a = [1,2,3,4]
>>> b = [3,4,5,6]
>>> c = [5,6,7,8]
>>>
>>> uniques = set( a + b + c )
>>> uniques
set([1, 2, 3, 4, 5, 6, 7, 8])
>>> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T04:54:34.237

如果您不关心它们是否按原始顺序排列，那么最简单且可能最快的方法是使用 set 函数：

```
>>> set().union(a, b, c)
{1, 2, 3, 4, 5, 6, 7, 8} 
```

如果您*确实*关心原始顺序（在这种情况下集合恰好保留它，但不能保证），那么您可以通过意识到参数`lists`包含您传入的所有原始列表的元组来修复您的原始尝试. 这意味着对它进行迭代会一次获得每个列表，而不是其中的元素-您可以使用 itertools 模块解决此问题：

```
for x in itertools.chain.from_iterable(lists):
   if x not in newlist:
      newlist.append(x) 
```

此外，您可能希望`newlist`从一个空列表开始，而不是输入列表的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T05:22:09.083

```
def merge(*lists):
    newlist = []
    for i in lists:
            newlist.extend(i)
    return newlist

merge_list = merge(a,b,c,d)

merge_list = set(merge_list)

merge_list = list(merge_list)

print(merge_list) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-09T23:38:09.990

**处理动态生成的列表列表**

一个常见的用例是动态生成列表列表，每个子列表有时具有任意长度：

```
import random
abc, values = [], ["a", "b", "c", "d"]
for i in range(3):
    l = []
    for j in range(3):
        l.append(values[random.randint(0, len(values) - 1)])
    abc.append(l) 
```

如果您正在使用列表列表，那么简单地按照 gddc 的建议将它们相加是行不通的。那是：

```
uniques = set( a + b + c ) 
```

打嗝来自您必须专门引用列表`a`、`b`和`c`. Ivc 的回答非常好，让我们更接近：

```
set().union(a, b, c) 
```

但同样，您必须明确引用您的列表。

**解决方案**

要从任意长度的列表列表中获取唯一值，可以使用[位置扩展](https://docs.python.org/3/tutorial/controlflow.html#unpacking-argument-lists)：

```
import random
abc, values = [], ["a", "b", "c", "d"]
for i in range(3):
    l = []
    for j in range(3):
        l.append(values[random.randint(0, len(values) - 1)])
    abc.append(l)
# The Important Line Below
unique = set().union(*abc)
print(unique) 
```

这将返回适当的无序值（例如`["d", "b", "a", "d"]`）

# facebook-php-sdk - 使用 OAuth 2.0 PHP 的 Facebook 授权在 ie 和 safari 中不起作用

> ID：15802640
> 
> 赞同：1
> 
> 时间：2013-04-04T04:39:56.993
> 
> 标签：facebook-php-sdk, facebook-oauth

我为摄影比赛开发了一个应用程序。

脚步：

1.  用户授权我获得照片和电子邮件权限的应用程序。
2.  介绍页面并从 facebook 链接中选择
3.  照片的页面，显示所有用户的 Facebook 照片以供选择。用户选择一张照片并单击下一步
4.  表格填写并提交。
5.  选择照片的谢谢页面。

在这个应用程序中，我的画布 url 是“ [http://mysite.com/index.php](http://mysite.com/index.php)？” 我在哪里授权该应用程序。

因此，当用户单击“从 facebook 选择”链接时，它会重定向到我显示照片的另一个页面。

在此页面（photos.php）中，我使用与 index.php 中相同的以下代码，

```
require 'src/config_app.php';
require 'src/facebook.php';

$facebook = new Facebook(array(
  'appId'  => $appid,
  'secret' => $appsecret,
  'cookie' => true
));

$user = $facebook->getUser();

if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
  }
}

// Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl();
} 
```

但我得到如下致命错误：

```
Fatal error: Uncaught OAuthException: An active access token must be used to query information about the current user. thrown in  var/www/vhosts/mysite.com/httpdocs/src/base_facebook.php on line 1107 
```

这只发生在 ie 和 safari 中，我检查了我的 chrome 和 firefox，这很好。

我几乎使用 chrome 完成了我的应用程序，现在在其他浏览器中遇到了这个主要问题。

我做错什么了吗！？

请帮忙。

非常感谢。

# android - Android相机参数图片大小

> ID：15802646
> 
> 赞同：0
> 
> 时间：2013-04-04T04:40:25.310
> 
> 标签：android

嗨下面是我如何启动我的相机。我总是得到 320 x 240 作为图像尺寸。关于如何设置相机以设备支持的最大尺寸拍摄图像的任何想法？

```
 File photo = null;
         String FILE_NAME ="20143";
Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
if (android.os.Environment.getExternalStorageState().equals(
        android.os.Environment.MEDIA_MOUNTED)) {
    photo = new File(android.os.Environment.getExternalStorageDirectory(), FILE_NAME);
} else {
    photo = new File(getCacheDir(), FILE_NAME);
}    
if (photo != null) {
    intent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
    selectedImageUri = Uri.fromFile(photo);
    startActivityForResult(intent, CAMERA_PIC_REQUEST);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:49:28.943

获得设备支持的所有尺寸

```
Camera.Parameters parameters = mCamera.getParameters();
List<Camera.Size> sizes = parameters.getSupportedPictureSizes(); 
```

我正在使用以下方法来获得最佳尺寸

```
private Camera.Size getBestPreviewSize(int width, int height,
        Camera.Parameters parameters) {
    Camera.Size result = null;

    for (Camera.Size size : parameters.getSupportedPictureSizes()) {
        Log.d("size: ", size.width + ":" + size.height);
        if (size.width <= width && size.height <= height) {
            if (result == null) {
                result = size;
            } else {
                int resultArea = result.width * result.height;
                int newArea = size.width * size.height;

                if (newArea > resultArea) {
                    result = size;
                }
            }
        }
    }

    return (result);
} 
```

with`int width, int height`是surfaceHolder 的宽度、高度。

# edit - Ipython QtConsole %edit

> ID：15802651
> 
> 赞同：0
> 
> 时间：2013-04-04T04:40:52.313
> 
> 标签：edit, ipython, qtconsole

在 IPython 中使用来自 QtConsole 的魔术函数 %edit 时，调用不会阻塞，也不会执行保存的代码。但是它确实保存了一个临时文件...

我认为这是由于 GUI 编辑器和不确定性而导致的预期行为，无论是什么原因都无法与子进程（pyZMQ？）进行通信。

您认为混合 %edit/%run 魔法的最佳方式是什么？

我不介意调用两个不同的命令（一个用于编辑，一个在我保存并且执行是安全的之后）。但是这些命令需要一种方法来同步这个目标文件位置，或者需要有人来持久化存储，并且可能需要某种粗略的可预测生成文件名的形式，以便您一次可以编辑多个文件并任意执行。会话持久性不是必须的。

自己写魔法有用吗？希望我们能尽快 %edit 宏，这样可以很好地使它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:52:54.090

你应该能够做到`%edit filename.py`和`%run filename.py`。由于技术原因，预计会有非阻塞行为，而 IIRC。不是不可逾越，但困难重重。

如果您愿意，您可以定义自己的魔法，欢迎改进。

> 希望我们能尽快 %edit 宏，这样可以很好地使它工作。

为此，也欢迎 PR。我想作为一种解决方法/选项，您可以`%load macro`将宏放在输入 n+1 上，对其进行编辑并重新定义，这可能是细胞魔术的一个很好的扩展`%%macro macroname`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T08:29:36.453

如果您的输入中有一些可执行代码（来自 QtConsole），您可以键入

```
%edit 1-5 
```

这会触发编辑器，创建一个临时文件（自动管理），并加载您的输入行。这几乎足够了，现在如何务实地检索该临时文件的名称？

我在 Stdout 上看到了 print 语句，但它对 QtConsole AFAIK 不可见。也许可以重定向标准输出以捕捉该行，但如果您使用标准输出做其他事情，这可能不是一个选择。

如果我可以检索刚刚创建的完整路径名，这将是小菜一碟。将它存放在一些魔法会知道如何找到它的地方。然后在准备好后发出后续命令，将名称从堆栈中弹出，将其加载到宏中，然后运行。所有这一切都有 2 个输入命令并且没有要记住的名称（除非您想再次查找并使用该宏，但对于 1 个镜头的东西......）

如何捕获或检索该临时文件的路径？

# php - 使用 htaccess 的目录安全性

> ID：15802657
> 
> 赞同：0
> 
> 时间：2013-04-04T04:41:17.423
> 
> 标签：php, .htaccess

我有以下网站结构。

网站

- 管理面板

- - - 图片

------ .htaccess

-- 网站一

-- 网站二

我在管理面板中放置了 .htaccess 以对目录进行授权访问：

```
AuthName "protected"
    AuthType Basic
    AuthUserFile /home/user/.htpasswd
    Require valid-user 
```

在 websiteone 和 websitetow 中，我有使用文件夹管理面板的图像和其他内容的页面。

**问题：** 我已经浏览到管理面板，它要求登录这是我想要的，但是当我浏览到我想避免登录的 websiteone 或 websitetwo 时它也会提示登录。这可能是由于访问了管理面板目录的图像。

有没有其他方法可以让我只将登录凭据应用到管理面板而不是 websiteone 或 websitetwo 目录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:25:36.237

我同意在 PHP 中执行此操作会更好，因为 Apache mod_auth 设置存在一些重大的安全问题，但如果您必须这样做，请尝试以下操作：

在 adminpanel 文件夹的每个文件夹中，您需要在没有密码的情况下访问（例如图像），创建一个 .htaccess 文件并添加以下内容：

```
Satisfy Any
Allow from all 
```

这将告诉 Apache 已满足所有身份验证并允许从任何地方访问。

如果您需要/想要指定特定文件，可以使用 Files 指令：

```
<Files image.jpg>
    Satisfy Any
    Allow from all
</Files> 
```

或者，您可以使用 FilesMatch（在本例中为图像）执行一组与模式匹配的文件：

```
<FilesMatch "\.(gif|jpe?g|png)$">
    Satisfy Any
    Allow from all
</FilesMatch> 
```

这些应该是您在 mod_auth 设置中戳一些漏洞并允许匿名访问所需的全部内容。

# java - 您如何确定 Android 上的音频延迟 (AudioTrack)？

> ID：15802659
> 
> 赞同：10
> 
> 时间：2013-04-04T04:41:26.987
> 
> 标签：java, android, audio, audiotrack

我有一个应用程序，我在其中使用`AudioTrack`流模式播放动态生成的音频。该应用程序不必立即响应输入，因此延迟问题不会为程序的那一侧困扰我。

问题是我有一个动画需要尽可能精确地与音频“同步”，而且似乎不同的设备在`AudioTrack`停止阻塞`write()`呼叫并要求更多数据之间的时间不同，而当该音频是从扬声器播放的。

`AudioTrack`我目前的解决方案让我大部分时间都在那里 - 我计算了到目前为止我传入的帧数，并将其与`getPlaybackHeadPosition()`. 它看起来基本上像：

```
long currentTimeInFrames = 0;
while(playingAudio) {
  currentTimeInFrames += numberOfFramesToWrite;
  long delayInFrames = (currentTimeInFrames - audioTrack.getPlaybackHeadPosition());
  audioTrack.write(frameBuffer,0,sampleSize);
  doAnimationAfterDelay(delayInFrames);
} 
```

但是，仍有一些延迟`getPlaybackHeadPosition()`似乎无法解释因设备而异。

有没有办法轮询系统的 AudioTrack 的延迟？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-06-04T02:37:02.777

API 级别 19 在`AudioTrack`称为 [getTimeStamp()](https://developer.android.com/reference/android/media/AudioTrack.html#getTimestamp(android.media.AudioTimestamp))中添加了一个方法。从文档中：

> 按需轮询时间戳。
> 
> 如果您需要在初始预热期间或路由或模式更改之后跟踪时间戳，您应该定期请求新的时间戳，直到报告的时间戳显示帧位置正在推进，或者直到明确时间戳对于此路由不可用。

您将[AudioTimestamp](https://developer.android.com/reference/android/media/AudioTimestamp.html)对象指定为函数的参数，它将填充最近“呈现”的帧位置及其“估计”时间戳（以纳秒为单位）。[纳秒值对应于SystemClock.uptimeMillis()](https://developer.android.com/reference/android/os/SystemClock.html#uptimeMillis())返回的毫秒值。

然后，您可以通过确定您将特定帧写入的时间`AudioTrack`与`getTimestamp()`认为它实际呈现的时间来确定延迟。我发现这种方法比上面提到的其他方法更准确。

不过你必须小心。文档说`getTimeStamp()`并非所有平台或所有路由都支持。`boolean`您可以通过检查返回值来确定调用是否成功。我发现在我测试过的设备中，该函数在音频开始呈现之前返回 false，然后后续调用返回 true。我只测试过`AudioTrack`in`STREAM_MUSIC`模式。你的旅费可能会改变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T15:43:23.310

考虑驱动程序的延迟。有隐藏函数 AudioManager.getOutputLatency(int) 来得到这个。

像这样称呼它：

```
AudioManager am = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
try{
   Method m = am.getClass().getMethod("getOutputLatency", int.class);
   latency = (Integer)m.invoke(am, AudioManager.STREAM_MUSIC);
}catch(Exception e){
} 
```

我在不同的设备上得到大约 45 - 50 毫秒。在计算中使用结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-10T13:25:01.957

您应该考虑传递给 AudioTrack 创建的缓冲区大小。

```
final int minBufSize = AudioTrack.getMinBufferSize(Application.PLAYRATE,
AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT);

out=new AudioTrack(AudioManager.STREAM_MUSIC, Application.PLAYRATE, 
AudioFormat.CHANNEL_OUT_STEREO, AudioFormat.ENCODING_PCM_16BIT, minBufSize, 
AudioTrack.MODE_STREAM);

extraLatencyFrames = minBufSize/4; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-10T19:21:34.830

好的，这是关键。首先，您需要扩展 Audiotrack 类，然后使用 getNativeFrameCount 对事物的本机方面所涉及的延迟进行近似计算。

```
class MyAudioTrack extends AudioTrack
{
    public MyAudioTrack(int streamType, int sampleRateInHz, int channelConfig,
            int audioFormat, int bufferSizeInBytes, int mode)
            throws IllegalArgumentException {
        super(streamType, sampleRateInHz, channelConfig, audioFormat,
                bufferSizeInBytes, mode);
        System.out.println("Native framecount "+getNativeFrameCount());
    }   
    public int getFrameCount()
    {
        return getNativeFrameCount();
    }
} 
```

# magento - Magento 从邮政编码获取区域？

> ID：15802662
> 
> 赞同：0
> 
> 时间：2013-04-04T04:42:09.727
> 
> 标签：magento

是否可以仅从国家代码和邮政编码或国家代码和城市加载区域对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T07:27:30.323

这里讨论了通过传递邮政编码给出相应城市名称、地区名称、地区 ID 的网络服务：

[通过提供邮政编码获取城市名称的 Web 服务](https://stackoverflow.com/questions/6227527/webservice-to-get-city-names-by-giving-zip-codes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T12:39:04.387

你可以在这篇文章中这样做：

[http://inhoo.net/ecommerce/magento/geocoding-customer-addresses-in-magento-via-google-maps/](http://inchoo.net/ecommerce/magento/geocoding-customer-addresses-in-magento-via-google-maps/)

# google-apps-script - 从 Google Apps Profile API 检索照片

> ID：15802663
> 
> 赞同：0
> 
> 时间：2013-04-04T04:42:27.320
> 
> 标签：google-apps-script, google-profiles-api

我正在尝试使用 Google Apps Profile API 检索 Google Apps Profile API 照片，但即使在授权请求后，它也会继续提示授权请求。这是我到目前为止尝试过的代码。

```
function getPhoto(userName){
  userName = 'user@myDomain.com'; //will be replaced by actual username
  var scope = 'https://www.google.com/m8/feeds/profiles';
  var fetchArgs = googleOAuth_('Profile', scope);
  fetchArgs.method = 'GET';
  var domain = UserManager.getDomain();
  var url = 'https://www.google.com/m8/feeds/photos/profile/'+domain+'/'+userName+'?v=3';
  var rawData = UrlFetchApp.fetch(url, fetchArgs).getContentText();
  Logger.log(rawData);
}

//google oAuth
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

参考：

*   [https://developers.google.com/google-apps/profiles/#photo_management](https://developers.google.com/google-apps/profiles/#photo_management)
*   [https://developers.google.com/google-apps/profiles/auth](https://developers.google.com/google-apps/profiles/auth)

注意：我对我正在尝试的域具有超级管理员访问权限

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T15:22:02.213

你可以看看这个图书馆。它使您可以毫无问题地将个人资料图片作为 blob 获取： [https ://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/profiles-services](https://sites.google.com/site/scriptsexamples/new-connectors-to-google-services/profiles-services)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T23:45:18.607

你可以试试

```
var scope = 'https://www.google.com/m8/feeds/'; 
```

授权。

# c# - 日期时间到秒

> ID：15802666
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:42:38.613
> 
> 标签：c#, asp.net

**将日期和时间**格式转换为**秒**的 C# 代码。例如：2013-04-03 01:00:00 到 1364950800

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:52:13.047

您似乎正在寻找 Unix 文件时间（即自 1970 年 1 月 1 日起）：

```
var unixFileTimeOrigin = DateTime.Parse("1970-01-01");
var date = DateTime.Parse("2013-04-03 01:00:00");

Console.WriteLine((date - unixFileTimeOrigin).TotalSeconds);
>>> 1364950800 
```

# orchardcms - Orchard CMS 中的密码屏蔽自定义字段

> ID：15802667
> 
> 赞同：0
> 
> 时间：2013-04-04T04:42:41.840
> 
> 标签：orchardcms, orchardcms-1.6

我在 Orchard CMS 中创建了自定义表单，并在其中为密码创建了一个字段。但是当我输入密码时，它没有得到掩码。我想屏蔽用户输入的密码。我在 Orchard 模块中启用了自定义字段模块。但我仍然没有得到确切的解决方案。请帮我摆脱这个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:14:58.447

Orchard 中没有内置的密码内容字段。

但是，您可以在您选择的内容类型上使用文本字段来存储密码。然后，启用[形状跟踪](http://docs.orchardproject.net/Documentation/Customizing-Orchard-using-Designer-Helper-Tools)功能，将鼠标悬停在生成的文本字段编辑器上并为其创建一个[替代](http://docs.orchardproject.net/Documentation/Alternates)项（尽可能具体，因此它将仅用于该字段）。在您的主题中使用此替代项，您可以覆盖字段的 html 并将文本字段的编辑器更改为密码输入框的编辑器。

# android - 在android中使用机制DIGEST-MD5 asmack登录异常SASL身份验证失败

> ID：15802672
> 
> 赞同：4
> 
> 时间：2013-04-04T04:42:59.297
> 
> 标签：android, xmpp, android-4.0-ice-cream-sandwich, xmppframework, asmack

我尝试连接 Xmpp 服务器，但出现异常

使用机制 DIGEST-MD5 登录异常 SASL 身份验证失败

我使用此代码，任何人都可以帮助我，或代码

```
 try {
        if (xmppConnection == null) {
            ConnectionConfiguration config = new ConnectionConfiguration(
                    SERVER_HOST, SERVER_PORT, SERVICE_NAME);
            xmppConnection = new XMPPConnection(config);
            System.out.println("xmppConnection"+xmppConnection);
        }

        if (!xmppConnection.isConnected()) {
            xmppConnection.connect();
            System.out.println("Connecting");
        }

        System.out.println("facebook id get xmpp "+username);

        if (!xmppConnection.isAuthenticated()) {
            xmppConnection.login(username, "123");
            System.out.println("User is authenticated ");

        }
        Presence presence = new Presence(Presence.Type.available);
        xmppConnection.sendPacket(presence);
                 } catch (Exception e) {
        System.out.println("Login exception "+e);
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-23T05:55:47.213

在 Openfire 配置中，它是 machinename.domain.com

这种 SASL 机制还使用 Xmpp 域名进行身份验证，而不仅仅是用户名和密码。这就是身份验证失败的原因。

表示您的用户名和密码必须如下：

用户名：`abc111@domain.com (whatever your domain name)`

密码：`abcabc111`

有关更多详细信息，请查看此[对话](http://forum.ag-software.net/thread/1274-Cannot-connect-using-Openfire-using-default-setti)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:59:42.790

我在我的使用下面的代码，它在这里工作正常..

```
try {   
    ConnectionConfiguration connConfig = new ConnectionConfiguration("HOST_IP", Integer.parseInt("PORT_NO"));
    XMPPConnection connection = new XMPPConnection(connConfig);
    connection.connect();

    try {
        // Login

        connection.login("USER_NAME", "PASSWORD");

        // Set the status to available

        Presence presence = new Presence(Presence.Type.available);
        connection.sendPacket(presence);
        xmppClient.setConnection(connection);
    } catch (XMPPException ex) {
        Log.w("XMPPClient", "[SettingsDialog] Failed to log in as " + username);
        Log.w("XMPPClient", ex.toString());
        xmppClient.setConnection(null);
    }
} catch (XMPPException ex) {
    Log.w("XMPPClient", "[SettingsDialog] Failed to connect to " + connection.getHost());
    Log.w("XMPPClient", ex.toString());
    xmppClient.setConnection(null);
} 
```

而且我还添加了*smack.jar*文件。

请检查下面的帖子，我想它可能会帮助你..

[https://stackoverflow.com/a/6659403/1849482](https://stackoverflow.com/a/6659403/1849482)

许多用户在登录时遇到此错误。检查以下链接以获取更多信息..

[http://community.igniterealtime.org/thread/44219](http://community.igniterealtime.org/thread/44219)

[http://code.google.com/p/asmack/issues/detail?id=33](http://code.google.com/p/asmack/issues/detail?id=33)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-31T05:53:33.120

asmack 使用 Novell 的 Open LDAP DigestMD5SaslClient.java，它不支持 SASL 的反斜杠 ('\') 和双引号 ('"') 的转义。根据 XEP-0106，用户名“user@company.com”应该是编码为“user\040company.com”。完全符合SAS​​L规范，它应该编码为“user\\040company.com”，但asmack没有。如果你的XMPP服务器（例如Openfire）使用Java的SASL实现，它会有不匹配。Smack 3.x 使用 Java 的 SASL 实现，所以它工作正常。Smack 4.x 应该替换 asmack，但我不知道 Smack 4.x 是使用 Novell 还是 Java SASL 实现。

顺便说一句，这个问题也存在于 iOS xmppframework 中。

如果你对我的修复感兴趣，我会把它贴在某个地方。

这是带有转义引号字符串的修改后的[DigestMD5SaslClient.java的链接。](https://github.com/magnetsystems/message-asmack/blob/master/static-src/novell-openldap-jldap/com/novell/sasl/client/DigestMD5SaslClient.java)

# android - Phonegap - 重新加载（重新同步）SD 卡？

> ID：15802677
> 
> 赞同：0
> 
> 时间：2013-04-04T04:44:04.887
> 
> 标签：android, api, cordova

我正在使用 Android 的 Phonegap (Cordova)，当我将照片下载到手机时，我必须重新加载 SD 卡才能让照片显示在手机图库中。

有没有办法在不使用原生依赖插件的情况下在 Phonegap 中重新同步 SD 卡？

谢谢。

我一直在使用这个 Java 代码来完成这项工作，但我希望能够在 Phonegap 中执行此操作，以便更容易移植。

```
sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
        + Environment.getExternalStorageDirectory()))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:24:58.143

我用了这个插件

[https://github.com/grnadav/SaveToPhotoAlbumPhonegapPlugin](https://github.com/grnadav/SaveToPhotoAlbumPhonegapPlugin)

但你是说

**有没有办法在不使用原生依赖插件的情况下在 Phonegap 中重新同步 SD 卡？**

phonegap 使用 javascript 调用本机代码，因此 phonegap 本身依赖于本机。

如果我错了，请纠正我。

谢谢

# jquery - 在 Jqgrid 中，RESET 按钮也在刷新过滤器栏。？

> ID：15802685
> 
> 赞同：0
> 
> 时间：2013-04-04T04:44:51.763
> 
> 标签：jquery, jquery-ui, jqgrid

我重置有问题，如您所见，我已将状态默认设置为ACTIVE，并且只能选择一条记录，选择记录后用户可以单击ADD WO

[http://i48.tinypic.com/11udoo6.jpg](http://i48.tinypic.com/11udoo6.jpg)

但是当点击重置按钮时，整个状态栏会发生变化

[http://i45.tinypic.com/25a6vcp.jpg](http://i45.tinypic.com/25a6vcp.jpg)

我也将 dafaultvalue 设置为 ACTIVE ..!! 我必须保持状态处于活动状态，当它重置时..!!请帮助我

```
function initJqGridSearchSubProject(table,pager,msg,loadSelID,caption,chkMrk ){

 $(table).empty();
 $(table).GridUnload();
 var mygrid =jQuery(table).jqGrid({
    datatype: "local",      
    data:msg,   
    width: 1240,
    scrollOffset:0,     
    height: 250,
    colNames:['ID','PID','Project Folder Name','Sub Project Name','Responsible','Status','Last Updated On'],
    colModel:[
    {name:'id',index:'id',hidden:true, width:5, sorttype:"int", editable: false,resizable:false},
    {name:'pid',hidden:true, width:5, sorttype:"int", editable: false,resizable:false},
    {name:'projectFolderName', width:250, editable: true,formatter:'tsLinks'},
    {name:'subProjectName', width:250, editable: true,formatter:'subProjectLinks'},
    //{name:'eCNNumber', width:150, editable: true},                
    {name:'responsible', width:200, editable:false,resizable:false},
    {name:'status', width:100,editable: true,stype:'select',edittype:"select",resizable:false,searchoptions:{defaultValue:"ACTIVE"},editoptions:{value:"ACTIVE:ACTIVE;INACTIVE:INACTIVE;DELETED:DELETED",readonly:false},editrules:{edithidden:false}}, 
    {name:'lastUpdatedOn', width:200,editable: false,resizable:false,sorttype:'date',formatter:'date',formatoptions:{ srcformat: 'M d y H:i:s', newformat: 'd M y h:i A' }}

        ],
    pager: pager,
    rowNum:200,     
    rowList:[200,400,600,1000],
    //rowTotal:2000,                    
    //loadOnce:true,    
    //rownumbers:true,
    gridview : true,
    sortname: 'lastUpdatedOn',                  
    viewrecords: true,
    sortorder: "desc",                  
    toppager:true,
    multiselect:true,
    singleselect: false, 
    //multiboxonly:true,
    //toolbar: [true,'both'],                   
    caption:caption,
    hidegrid: false,
    gridComplete:function(id){
    //$(chkMrk).hide();
    //alert('grid complete');
    },
    beforeSelectRow: function(rowid, e)
    {
        // reset check box selection only when user clicks on another checkbox
        if($(e.target).is("input:checkbox"))
        {
            // reset/clear other checkboxes selection before making a latest clicked row's checkbox as selected
            jQuery(table).jqGrid('resetSelection');
        }

        // Code To Disable Check Box Selection When User Selects by Clicking on A Row
        return $(e.target).is("input:checkbox");
        //return(true);
    }

}); 
jQuery(table).jqGrid('navGrid',pager,{del:false,add:false,edit:false,search:false,refresh:true,cloneToTop:true,afterRefresh:function(){}},{},{},{},{}); 
jQuery(table).jqGrid('navButtonAdd', table+ '_toppager_left',{caption:"Add WO", buttonicon:"ui-icon ui-icon-plus",id:"SUBPROJID", onClickButton: function(){},position:"first",title:"Add WO"}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:09:32.857

您所做的是您将`defaultValue`选项设置为 in`searchoptions`而不是`editoptions`. 你只需要在那里添加相同的内容。只需尝试更改`status`列的定义，如下所示：

```
{name:'status', width:100,editable: true,stype:'select',edittype:"select",
resizable:false,searchoptions:{defaultValue:"ACTIVE"},
editoptions:{value:"ACTIVE:ACTIVE;INACTIVE:INACTIVE;DELETED:DELETED",
readonly:false, defaultValue:"ACTIVE"},editrules:{edithidden:false}}, 
```

**更新 ：**

要调用[beforeRefresh](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3anavigator#parameters)事件处理程序内部的行，您可以执行以下操作：

```
jQuery(table).jqGrid('navGrid',pager,
  { edit:false,view:false,add:false,del:false,search:false,
    beforeRefresh: function(){
        alert('Here');
        jQuery(table).jqGrid('setGridParam',{datatype:'json'}).trigger('reloadGrid');
    }
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:07:29.677

终于得到了结果，我只是在重置按钮函数中添加了 triggerToolbar() 。

```
jQuery(table).jqGrid('navGrid',pager,{del:false,add:false,edit:false,search:false,refresh:true,cloneToTop:true,afterRefresh:function(){$(table)[0].triggerToolbar();}},{},{},{},{}); 
```

现在它工作正常..！

# java - Java：关于对象的概念

> ID：15802689
> 
> 赞同：0
> 
> 时间：2013-04-04T04:45:12.473
> 
> 标签：java, object

```
 public class ex11_2 {
    public static void main(String[] args){
        Object a=new Person("abc1","def1","ghi1");
        System.out.println(a.toString());
        Object b=new Person("abc2","def2","ghi2");

        System.out.println(a.toString());
    }
}

class Person{
    private static String name;
    private static String address;
    private static String phoneNo;

    public Person(){
    }

    public Person(String name,String address,String phoneNo){
        setName(name);
        setAddress(address);
        setPhoneNo(phoneNo);
    }

    public String toString(){
        return super.toString()+(" "+getName()+","+getAddress()+","+getPhoneNo()+".");
    }

    public static String getName() {
        return Person.name;
    }

    public static void setName(String name) {
        Person.name = name;
    }

    public static String getAddress() {
        return address;
    }

    public static void setAddress(String address) {
        Person.address = address;
    }

    public static String getPhoneNo() {
        return phoneNo;
    }

    public static void setPhoneNo(String phoneNo) {
        Person.phoneNo = phoneNo;
    }
} 
```

大家好。我是Java编程的初学者，想问一个关于OOP的问题。在这个小程序中，我创建了一个 Person 类并测试它的 toString() 方法。

测试结果是：

```
Person@635b9e68 abc1,def1,ghi1.
Person@635b9e68 abc2,def2,ghi2. 
```

我想知道为什么 b 的数据字段会在创建 b 之后替换 a 的数据字段。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:47:13.713

您的成员变量是静态的，不附加到类的任何实例。

```
private static String name;
private static String address;
private static String phoneNo; 
```

静态成员将在类的实例中可用。要更正它，请将它们更改为非静态成员变量。

```
private String name;
private String address;
private String phoneNo; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:48:36.730

由于`name`,`address`和`phoneNo`字段被声明为静态的，因此类的所有对象只有一个副本`Person`，或者这些变量在该类的所有对象之间共享。

`static`您应该在这里了解和`instance`变量之间的区别。检查这些链接以获取更多信息：[link1](http://www.coderanch.com/t/528608/java/java/Difference-Static-Instance-variable)，[link2](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:47:55.433

因为您已将类变量声明为`static`

```
private static String name;
private static String address;
private static String phoneNo; 
```

这意味着 的每个实例都`Person`将具有完全相同的值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T04:59:42.007

基本上，您正在使用`static`类的变量，它就像该类的所有实例（对象）的全局变量。因此，如果您正在修改实例（非静态）方法中的静态变量，则它们的修改将反映为 global 。

[在此链接](http://anotherjavaduke.wordpress.com/2012/02/25/different-types-of-variables-in-java/)中了解有关 Java 中变量的更多信息

# c# - 如何发送字符串报告 (*.rdlc)

> ID：15802692
> 
> 赞同：0
> 
> 时间：2013-04-04T04:45:19.253
> 
> 标签：c#, .net, wpf, reporting-services

我的项目中有一个报告，我想向它发送一个字符串值。我在 WPF 应用程序中托管一个报表并将其作为 LocalReport 运行。

这些是我所做的：

1.  发送报告参数。结果是运行时 IOException。
2.  创建一个属性名称为 Value 的类，并在报表上使用它。结果在运行时失败，类必须实现 IEnumerable、ReportSource 或 Type。
3.  创建一个继承自 IEnumerable 的类并添加一个属性名称 Value。结果是没有运行时错误，但报告上没有显示值。但是，该值正确发送到报告。
4.  与步骤 3 相同。但继承自 ReportSource（我不确定类名），但结果与 3 中的相同。

请让我知道我是否可以做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:51:02.420

我建议将您的原始类与 Value 属性一起使用，并将其作为列表的单个成员传递。

```
var val = new ClassWithValueProperty { Value = "StringForReport" };
return new List<ClassWithValueProperty> { val }; 
```

当我想在报表上显示单个对象的值时，这对我有用。

# ios - 警告：不支持的配置：设置了图像和标题（这些属性是互斥的；标题将被忽略）

> ID：15802694
> 
> 赞同：10
> 
> 时间：2013-04-04T04:45:25.490
> 
> 标签：ios, xcode, ios6, xcode4

设置了不支持的配置图片和标题这些属性是互斥的；标题将被忽略.....在 xcode 中运行我的项目时，我收到此警告，因为此警告我的应用程序编译速度太慢......所以请告诉我如何解决此问题

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T05:04:50.340

这应该很明显。您将（很可能是条形按钮项）设置为系统项（取消、完成...），但还提供了自定义标题。你不能两者都做，所以它忽略了你的自定义标题......由[http://iphonedevsdk.com/forum/iphone-sdk-development/92531-ib-warnings.html 引用](http://iphonedevsdk.com/forum/iphone-sdk-development/92531-ib-warnings.html)

# go - strconv.Itoa 中的“itoa”代表什么？

> ID：15802695
> 
> 赞同：21
> 
> 时间：2013-04-04T04:45:26.710
> 
> 标签：go, itoa

这听起来像是一个愚蠢的问题......但我在任何地方都找不到 strconv.Itoa 中的“a”实际上代表什么。如果它采用整数并将其转换为字符串，为什么该函数不称为 Itos？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-04T04:47:06.450

**整数到 ASCII**。它来自 C 语言/UNIX。有关更多信息，请参阅此线程：[“atoi”这个名字是从哪里来的？](https://stackoverflow.com/questions/2909768/where-did-the-name-atoi-come-from)

在 C 语言中，没有字符串这样的概念，您有以空字符结尾的字符数组。

感谢@mvp！

# sql-server - SQL 使用另一个表中的值更新一个表

> ID：15802697
> 
> 赞同：1
> 
> 时间：2013-04-04T04:45:48.880
> 
> 标签：sql-server, tsql

我有以下 SQL 语句 -

```
SELECT e.*, i.CaseNo, c.Claimant, c.Defendant, c.ClientID
FROM tblExpenses AS e
INNER JOIN tblInvoices AS i ON e.InvNo = i.InvNo
INNER JOIN tblCases AS c ON i.CaseNo = c.CaseNo 
```

这演示了三个表之间的链接。

`tblInvoices`有一个主键`[InvNo]`，这也是一个外键，`tblExpenses`因此将每笔费用与相关发票联系起来。

`tblCases`有一个主键`[CaseNo]`，它也是 中的一个外键`tblInvoices`，从而将每张发票链接到一个特定的案例。

最后，每个案例`tblCases`都有一个名为的列`[ClientID]`，用于标识发票发送给的客户。

现在，`tblExpenses`也有一个外键`[ClientID]`，但目前该列未填充。我想做的是使用上面的链接通过上述链接使用from填充`[ClientID]`。`tblExpenses``[ClientID]``tblCases`

但是我不清楚如何重写我的`SELECT`查询以便`[ClientID]`在`tblExpenses`.

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:49:21.320

您已经有足够的选择查询来获取所需的信息。您只需要将其转换为更新查询。

```
UPDATE e SET e.ClientID=c.ClientID
FROM tblExpenses AS e
INNER JOIN tblInvoices AS i ON e.InvNo = i.InvNo
INNER JOIN tblCases AS c ON i.CaseNo = c.CaseNo 
```

# c++ - 在 C++ 中使用特殊符号时的“非法大小写”

> ID：15802699
> 
> 赞同：0
> 
> 时间：2013-04-04T04:46:21.683
> 
> 标签：c++, c, switch-statement

当我在 c++ 中使用特殊字符大小写时，我遇到了一些问题。我尝试使用'{'，但错误结束了。Visual Studio 2010。这是我的代码。

```
for (int i = 0; i < inputString.length(); i++)
{
    switch(inputString[i])
        case '{':
            nowChar = inputString[i];
            nowCaret = i;
            break;
        case '[':
            nowChar = inputString[i];
            nowCaret = i;
            break;
        case '(':
            nowChar = inputString[i];
            nowCaret = i;
            break;
} 
```

我怎样才能消除这些错误？我真的对此一无所知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T04:48:28.173

你需要用大括号打开和结束你的开关。

```
switch() {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T04:48:34.380

您可能刚刚忘记了 switch 语句的大括号。顺便说一句，最好有`default`一个 switch 语句。

```
for (int i = 0; i < inputString.length(); i++)
{
    switch(inputString[i]) {
    case '{':
        nowChar = inputString[i];
        nowCaret = i;
        break;
    case '[':
        nowChar = inputString[i];
        nowCaret = i;
        break;
    case '(':
        nowChar = inputString[i];
        nowCaret = i;
        break;
    default:
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T04:48:42.373

你忘了使用`{`和`}`周围的情况：

```
switch(inputString[i])
{ //<------------------------------  this
    case '{':
        nowChar = inputString[i];
        nowCaret = i;
        break;
    case '[':
        nowChar = inputString[i];
        nowCaret = i;
        break;
    case '(':
        nowChar = inputString[i];
        nowCaret = i;
        break;
} //<------------------------------- and this 
```

一个`switch`块`{`在它有**多个**案例时开始。如果它只有一个`case`，那么`{`并且`}`不是强制性的。

```
switch(i)
     case 0 : 
           // code 
          break; 
```

在这里并不是强制性的`{`。`}`

# sharepoint - 将 Infopath 表单手动发布到 Sharepoint

> ID：15802700
> 
> 赞同：2
> 
> 时间：2013-04-04T04:46:33.820
> 
> 标签：sharepoint, infopath

有没有办法手动发布 Infopath 表单？我有一个为计算机上的共享点创建的信息路径表单。现在，我想将该 xsn 文件移动到另一台安装了 sharepoint 但没有 infopath 的开发计算机。所以，我不能使用 infopath 发布选项。有没有办法手动发布？

到目前为止，我尝试的是打开 xsn 文件并读取 xsf 文件。那没有用。

有人可以帮我吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T09:15:54.227

移动我的评论来回答。
首先，我不明白“手动”是什么意思……但忘了问。

我个人的信念（从从来没有足够的经验）是不可能手动替换发布（这是由 Infopath Designer 完成的）。

后者是专有的，未记录依赖于共享点内部的完整细节程序（后者也是专有和封闭信息）。

可能是别人有不同的看法。
好吧，你可以试试……然后在这里报告。

**更新：**
有一些开发套件（IDE、框架、扩展），您可以在其中从头开始开发或使用开源库、扩展（如 .NET、MS SQL Server 商业智能）以及您应该遵循预编译和因 Sharepoint 和 Infopath 等干预而关闭。

两者都有赞成和反对。
在任何情况下，都应该分析和平衡业务需求。

无论如何，当您没有在客户端计算机上安装 Infopath 时，我有点困惑。
在这种情况下，您只能通过 Sharepoint Server 的 Infopath Forms Services 使用 Infopath 表单，这是企业且相当昂贵的功能。

如果您（或您的客户拥有它），那么 Infopath（它是 Microsoft Office 套件的一部分）通常已经捆绑到所有具有企业 Sharepoint 服务器的 Microsoft 计划或软件包中。

还捆绑了[Office 365 (Sharepoint Online) 30 天免费试用版。](http://office.microsoft.com/en-us/try/)
这是[计划和价格的比较](http://office.microsoft.com/en-us/business/compare-office-365-for-business-plans-FX102918419.aspx)。
当我的过期时，我收到了警告和购买建议，但在我的访问权限被真正切断之前，我确实继续访问了 4 个月以上。

Infopath 很容易，这是一种营销虚张声势。通过单击几个按钮并生成准备好的东西很容易开始，但是如果您需要做一些更灵活、可定制和/或不经常提供的 OOTB（Sharepoint 和 Infopath 中非常常用的术语，Out -Of-The_Box) 在 Sharepoint 和 IP 中，当它碰巧比使用从头开始的开发方法更困难、更耗时和更多参与时

# cassandra - 在 cassandra 中的行中添加一组列

> ID：15802701
> 
> 赞同：2
> 
> 时间：2013-04-04T04:46:34.853
> 
> 标签：cassandra

我是卡桑德拉的新手。我不确定是否要多次在一行中添加一组列，例如，我想在同一手机号码时连续添加呼叫相关信息列（timestamp_calling_no、timestamp_tower_id、timestamp_start_time、timestamp_end_time、timestamp_duration、timestamp_call_type 等列）使用 hector/astyanax/java/CQL 拨打电话。

请提出您的建议。提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T12:30:10.610

很高兴您认识到有许多 API 可用。我建议使用`CQL3`，主要是因为现在保留 thrift api 只是为了向后兼容，并且因为`CQL`可以与大多数语言一起使用，`Astyanax`并且`hector`是特定于 java 的。

我会使用[复合键](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)（在“集群、复合键等”下）。

```
//An example keyspace using CQL2
cqlsh>
 CREATE KEYSPACE calls WITH strategy_class = 'SimpleStrategy'
 AND strategy_options:replication_factor = 1;

//And next create a CQL3 table with a compound key
//Compound key is formed from the number and call's start time
cqlsh>
 CREATE TABLE calls.calldata (
      number text,
      timestamp_start_time timestamp,
      timestamp_end_time timestamp,
      PRIMARY KEY (number, timestamp_start_time)
    ) WITH COMPACT STORAGE 
```

上述模式将允许您多次插入包含与键相同的数字的行，但由于调用的开始是键的一部分，它将确保组合每次都创建一个唯一的键。

接下来使用 CQL3 插入一些测试数据（当然是为了示例的目的）

```
cqlsh>  //This example data below uses 2 diffrent numbers
 insert into calls.calldata (number, timestamp_start_time, timestamp_end_time)
 values ('+441234567890', 1335361733545850, 1335361773545850);
 insert into calls.calldata (number, timestamp_start_time, timestamp_end_time)
 values ('+440987654321', 1335361734678700, 1335361737678700);
 insert into calls.calldata (number, timestamp_start_time, timestamp_end_time)
 values ('+441234567890', 1335361738208700, 1335361738900032);
 insert into calls.calldata (number, timestamp_start_time, timestamp_end_time)
 values ('+441234567890', 1335361740100277, 1335361740131251);
 insert into calls.calldata (number, timestamp_start_time, timestamp_end_time)
 values ('+440987654321', 1335361740176666, 1335361740213000); 
```

现在我们可以检索所有数据（再次使用 CQL3）：

```
cqlsh> SELECT * FROM calls.calldata;

 number        | timestamp_start_time      | timestamp_end_time
---------------+---------------------------+---------------------------
 +440987654321 | 44285-12-05 15:11:18+0000 | 44285-12-05 16:01:18+0000
 +440987654321 | 44285-12-05 16:42:56+0000 | 44285-12-05 16:43:33+0000
 +441234567890 | 44285-12-05 14:52:25+0000 | 44285-12-06 01:59:05+0000
 +441234567890 | 44285-12-05 16:10:08+0000 | 44285-12-05 16:21:40+0000
 +441234567890 | 44285-12-05 16:41:40+0000 | 44285-12-05 16:42:11+0000 
```

或部分数据。因为使用了复合键，您可以使用 CQL3 检索特定数字的所有行：

```
cqlsh> SELECT * FROM calls.calldata WHERE number='+441234567890';     

 number        | timestamp_start_time      | timestamp_end_time
---------------+---------------------------+---------------------------
 +441234567890 | 44285-12-05 14:52:25+0000 | 44285-12-06 01:59:05+0000
 +441234567890 | 44285-12-05 16:10:08+0000 | 44285-12-05 16:21:40+0000
 +441234567890 | 44285-12-05 16:41:40+0000 | 44285-12-05 16:42:11+0000 
```

如果你想更具体，你可以检索在特定时间开始呼叫的特定号码（再次感谢复合键）

```
 cqlsh> SELECT * FROM calls.calldata WHERE number='+441234567890' 
           and timestamp_start_time=1335361733545850;

 number        | timestamp_start_time      | timestamp_end_time
---------------+---------------------------+---------------------------
 +441234567890 | 44285-12-05 14:52:25+0000 | 44285-12-06 01:59:05+0000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T16:31:42.657

在像 Playorm 这样的框架中，有多种方法可以做到这一点。例如，您可以使用@OneToMany 或@NoSqlEmbedded 模式。有关更多详细信息，请访问[http://buffalosw.com/wiki/Patterns-Page/](http://buffalosw.com/wiki/Patterns-Page/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T08:59:47.817

将列添加到一行是一种廉价的操作，而且 cassandra 将列名存储为已排序的另一件事，因此通过使用时间戳作为列名将解决切片问题。cassandra 在 CDR CF 中的一行可以有 20 亿列，所以我们可以轻松地继续添加列。您试图运行一个需要 cassandra 扫描所有行的查询，然后是的，它的性能会很差。

# java - 如何显示 void 方法的内容？

> ID：15802702
> 
> 赞同：1
> 
> 时间：2013-04-04T04:46:45.900
> 
> 标签：java

我也是编程和 Java 的新手。我需要编写一个对输入的数组进行排序的 void 方法，我编写了代码但不知道如何从 void 方法显示排序列表。任何愿意提供帮助的人。将不胜感激。

```
package util.assign4;

import java.util.StringTokenizer;
import javax.swing.JOptionPane;
import util.IO;

public class UtilAssign4 {
    public static int[] getData (String input){

        StringTokenizer st = new StringTokenizer(input);
        int []x = new int[st.countTokens()];
        for(int i = 0;st.hasMoreTokens(); i++){
            try{
            x[i] = Integer.parseInt(st.nextToken());
            }
            catch(Exception e){ 
                JOptionPane.showMessageDialog(null," Invalid input");
                System.exit(1);
            }   
         }
        return x;    
    }
    public static int getHighest(int g[]){
        int  hi = g[0];
        for( int k = 1; k <g.length;k++)
            if(g[k]> hi) hi = g[k];

        return hi;
    }
    public static int getSmallest(int p[]){
        int sm = p[0];
        for(int l = 1;l<p.length;l++)
            if(p[l]  < sm) sm = p[l];
        return sm;
    }
    public static float getAverage(int n[]){
        float sum = 0.0f;
        for(int y = 0;y <n.length; y++) sum += n[y];
        return sum/n.length;

    }
    public static void getSorted(int grades []){
        for(int i = 0; i<grades.length-1;i++){
            int largest =i;
            for(int j = 0;j<grades.length;j++)
                if(grades[j]>grades[largest]) largest = j;
            int temp = grades[largest];
            grades[largest] = grades[i];
            grades[i]=temp;  

        }

    }

    public static void main(String[] args) {
       String input = JOptionPane.showInputDialog("Enetr one or more grades:");
       int [] x = getData(input);
       int j = getHighest(x);
       int m = getSmallest(x);
       float a = getAverage(x);

               IO.showMsg("Array you entered:" + input + String.format("\nThe"
                       + " higheset grade is:%2d \n"
                       + "The Lowest Grade is:%2d \n"+"The average is:%2.2f\n"
                       + "The sorted list: ",
                       j,m,a));

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:53:06.633

您不应该在`sort`方法中打印数组的内容。您的要求（我打赌）是对提供给“就地”方法的数组进行排序（看起来就像您正在做的那样）。这意味着给定一个数组：

```
int[] grades = new int[] {34, 76, 12, 0, -1}; 
```

当你打电话时：

```
UtilAssign4.getSorted(grades); 
```

传递给方法的数组实际上是在方法***内部***排序的，因此不需要返回（这就是您的返回类型为 void 的原因）。总而言之，在调用 sort 方法之前，您的数组是未排序的。调用完成后，现在已经对完全相同的数组进行了排序。

所以现在您可以在调用方法中打印出排序后的数组（在这种情况下`main(String[])`：

```
getSorted(x); // <-- call the sort function, on your array

String msg = String.format("\nThe higheset grade is:%2d \n"
        + "The Lowest Grade is:%2d \nThe average is:%2.2f\n"
        + "The sorted list: %s", j, m, a, Arrays.toString(x));
IO.showMsg(msg); 
```

注意`Arrays.toString(x)`? 这将获取您的排序数组，并将其转换为字符串表示形式（看起来像这样：[76, 34, 12, 0, -1]）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:59:15.003

在 void 方法中，在任何字段数组中缩短您的数组

```
 public class UtilAssign4 {
 private Integer[] shorted = new Integer[100];
 public static int[] getData (String input){
 .
 .

} 
```

并在你的 void 方法中使用上面的数组做你的东西，并在你想要的地方使用它

# windows-services - 使用 ms 安装程序删除以前安装的服务并安装新版本

> ID：15802705
> 
> 赞同：0
> 
> 时间：2013-04-04T04:46:52.670
> 
> 标签：windows-services, windows-installer

我正在学习 Windows 服务，现在当我对 onstart() 方法进行更改并构建项目时，我使用 msi 安装程序成功安装了它，当我安装服务一次时，我还在安装项目的属性窗口中更改了版本号它再次表示该服务已安装。

如果是使用 installutil 卸载服务，然后当我双击设置时，它会正确安装。如何使安装项目卸载以前版本的服务并安装新版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:46:10.477

您可能想查看 MSI 安装程序： [如何在 Visual C# 中为 Windows 服务应用程序创建安装项目](http://support.microsoft.com/kb/816169)

问候，

# prolog - swi-prolog 中的字符串比较程序总是失败

> ID：15802706
> 
> 赞同：0
> 
> 时间：2013-04-04T04:46:54.900
> 
> 标签：prolog, swi-prolog

我正在尝试使用 swi-prolog 编写一个程序，该程序随机询问人们的名字或姓氏，并根据他们输入的内容打印“正确”或“不正确”。当前的正确答案是“Hello”和“World”，但无论用户键入什么，输出都是错误的，并且不会打印正确/错误。

```
start:-(Q=['What is your first name?','What is your last name?'],
    random_member(N,[0,1]),
    nth0(N,Q,X),
    writeln(X)),
    readln(S),
    check_answer(N,S).

check_answer(N,S):-A=['Hello','World'],
   nth0(N,A,X),
   writeln(X),
   (S=@=X)->writeln('correct'),
   not(S=@=X)->writeln('incorrect'). 
```

我后来将其编辑为：

```
start:-(Q=['What is your first name?','What is your last name?'],
random_member(N,[0,1]),
nth0(N,Q,X),
writeln(X)),
read(S),
check_answer(N,S).

check_answer(N,S):-A=['Hello','World'],
       nth0(N,A,X),
       writeln(X),
       writeln(S),
       ((S=@=X))->writeln('correct') ; writeln('incorrect'). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:15:47.733

我可以在您的代码中发现两个问题。

a) readln/1（未记录）返回项目列表（然后查看第一项或使用 read/1）：

```
?- readln(X).
|: Hello.
X = ['Hello', '.'].

?- readln(X).
|: Hello
X = ['Hello'].

?- readln(X).
|: Hello .
X = ['Hello', '.']. 
```

b) if then else 运算符 (->) 对总是失败，因为你忽略了两者的 else 分支，并且条件是互斥的。尝试

```
...
((S=@=X)->writeln('correct') ; writeln('incorrect')). 
```

*编辑*有2个问题。我错误地建议阅读/1。读取一个*Prolog 术语*，然后读取一个*变量*，如果我们写入一个*变量*，即一个 UppercaseStartingSymbol。我的错。那么 readln 似乎还可以，但是更改模式以选择第一项。

另一个不相关的问题：您在 -> 'statement' 中放错了右括号。

这里的代码：

```
start:-(Q=['What is your first name?','What is your last name?'],
random_member(N,[0,1]),
nth0(N,Q,X),
writeln(X)),
readln(S),
check_answer(N,S).

check_answer(N,[S|_]):-A=['Hello','World'],
       nth0(N,A,X),
       writeln(X),
       writeln(S),
       ((S=@=X)->writeln('correct') ; writeln('incorrect')). 
```

# jquery - 使用 Google Maps v3 的页面上未出现 jquery ui 对话框

> ID：15802711
> 
> 赞同：3
> 
> 时间：2013-04-04T04:47:20.813
> 
> 标签：jquery, ios, ipad, jquery-ui, google-maps-api-3

在某些版本的 iPad/iOS Safari 上使用与 Google 地图相同的页面上的 jQuery UI 对话框似乎存在问题。

下面的代码显示了一个地图，下面有一个链接。单击该链接应该会弹出一个基本的 jQuery UI 对话框。

```
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" type="text/css" href="//code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="//maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.2/jquery-ui.min.js"></script>
<style type="text/css">
#mapcontainer {
    width:50%;
    height:300px;
}
</style>
</head>
<body>

<!-- ## Map Container ## -->
<div id="mapcontainer"></div>

<!-- ## Show Dialog ## -->
<a id="showdialog" href="#">Show Dialog</a>

<!-- ## Dialog ## -->
<div id="mydialog"></div>

<script type="text/javascript">
jQuery(function($){
    initMap();
    $('#showdialog').click(function(event){
        event.stopPropagation();
        $('#mydialog').dialog();
    });
});

function initMap() {
    if (google.maps != null && typeof google.maps === 'object') {
        var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(-34.397, 150.644),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        map = new google.maps.Map(document.getElementById('mapcontainer'), mapOptions);
    }
}
</script>

</body>
</html> 
```

它似乎在较新的桌面浏览器和 Android 设备（本机浏览器和 Chrome）上运行良好。然而，在 iPad (iOS 5.1.1 Safari) 上单击链接时没有任何反应。在 iOS 模拟器上，它似乎在 iOS 6.1 中的 Safari 上正常运行，但在 5.1 或更低版本中无法正常运行。

一种可能的解决方案似乎是在 css 中使用类似这样的东西来强制 3D 加速：

```
*:not(html) {
    -webkit-transform: translate3d(0, 0, 0);
} 
```

但这似乎可能会导致图形元素繁重的页面出现其他问题。

还有其他更安全的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-13T14:23:49.770

```
.ui-dialog * {
    -webkit-transform: translate3d(0, 0, 0);
} 
```

别客气。你拯救了我的一天。=)

# jsf - Primefaces (xhtml) 中用户定义的 XMLNS

> ID：15802714
> 
> 赞同：0
> 
> 时间：2013-04-04T04:47:31.470
> 
> 标签：jsf, xhtml, xml-namespaces

我们可以在 xmlns 标签中包含我们自己的 xml 文件吗

示例：考虑一个文件“myxhtmlfile.xhtml”.. 在这个文件中我们可以添加 xml 命名空间，例如，

```
xmlns:h="http://java.sun.com/jsf/html"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:jsp="http://java.sun.com/JSP/Page"
xmlns:p="http://primefaces.org/ui" 
```

等等。 [注：在 primefaces.org/ui 中（由许多 .xml 文件组成）]

我的系统驱动器（比如 D:/ Drive）中有一个 xml 文件“myxmlfile.xml”，所以，我们需要遵循什么方法在 xhtml 文件中添加我自己的 xml 文件（“myxmlfile.xml”）。myxmlfile.xml 文件中有一些标签，我需要像“p”标签（primefaces 标签）一样使用它们

例如：`<p:messages id="messages" showDetail="true" autoUpdate="true"/>`

我的要求是这样的：（我应该能够使用 myxmlfile.xml 中定义的所有标签）比如，

`<m:mymessages id="mymessages" showDetail="true" autoUpdate="true"/>`

我尝试了很多方法，比如将两个文件放在同一个文件夹中，并`(xmlns:m="D:/resources/xml")`在 xhtml 文件中添加这种类型的行，但没有找到运气。

我正在使用 primefaces 3.2

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T09:56:05.913

您正在寻找的是复合组件。看看这个博客：[http ://www.mkyong.com/jsf2/composite-components-in-jsf-2-0/](http://www.mkyong.com/jsf2/composite-components-in-jsf-2-0/)

# android - Android Instrumentation 测试

> ID：15802716
> 
> 赞同：0
> 
> 时间：2013-04-04T04:47:43.453
> 
> 标签：android, mocking, instrumentation

我正在为我的 android 活动编写一个测试用例。该活动有两个文本框和一个按钮。当按下按钮时，我会调用 Web 服务，应用程序会做出相应的响应。现在对于我的测试，我只想测试我的 GUI 是如何产生积极响应的。我不关心网络架构，因为它将单独测试。我是否有可能改变我的应用程序的行为，就像我将我的 asynctask 的类更改为一个模拟类，所以它总是返回 true。这可能吗。如果不是我怎么能做我想做的事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:17:54.590

将调试布尔参数等传递给异步任务，如果为真，则提供虚拟数据，如果为假，则转到服务器获取数据。

```
private class LongOperation extends AsyncTask<Boolean, Void, String> {

  @Override
  protected String doInBackground(Boolean... debug) {

        if(debug[0]){
            //do your dummy here
            return "blah blah blah";
        } 

        return GetWebData();

  }      

  @Override
  protected void onPostExecute(String result) {               
  }

  @Override
  protected void onPreExecute() {
  }

  @Override
  protected void onProgressUpdate(Void... values) {
  }

} 
```

# variance - 如何制作方差公式？

> ID：15802720
> 
> 赞同：0
> 
> 时间：2013-04-04T04:47:58.957
> 
> 标签：variance

这是我的公式

```
Else : cmb1.Text = "Rata - Rata"
        ' hitung rata-rata
        rerata = jumlah / lstData.Items.Count

        ' menampilkan hasil rerata ke text box
        txtRerata.Text = rerata.ToString

        cmb1.Text = "Variansi" Then
        'inisialisasi variabel variansi
        Xi = lstData.Items.Item(index:=counter)

        ' hitung variansi
        For counter = 0 To lstData.Items.Count - 1
            variansi = (Xi - rerata) * (Xi - rerata)
        Next

        'menampilkan hasil variansi ke text box
        txtVariansi.Text = variansi.ToString
    End If 
```

这有什么问题？我无法得到结果。谢谢

如果是这样呢？

ElseIf cmb1.Text = "Variansi" Then 'inisialisasi variabel variansi Xi = 0

```
 ' iterasi sejumlah item dari listbox
        For counter = 0 To lstData.Items.Count - 1
            Xi = Xi + ((lstData.Items.Item(counter) - rerata) ^ 2)
        Next

        'kalkulasi variansi dan simpangan baku
        variansi = Xi / (txtN.Text - 1)
        SD = Math.Sqrt(variansi)
        txtSD.Text = SD.ToString

        'menampilkan hasil variansi ke text box
        txtVariansi.Text = variansi.ToString 
```

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T04:54:21.057

> 方差定义为分布中每个项与均值的距离平方和除以分布中项的数量。

你需要`variansi`除以`lstData.Items.Count`

# php - 想通过代码停止在特定页面中加载 IE 脚本

> ID：15802733
> 
> 赞同：0
> 
> 时间：2013-04-04T04:49:03.100
> 
> 标签：php, javascript

我创建了一个网站，每个页面在每个浏览器中都可以正常工作，但 IE 中只有一个页面（表单页面）需要太多时间来加载，我得到的错误是 IE 正在运行一个长脚本并且没有响应。

我找到了一个解决方案，在 IE 的工具部分下，我必须禁用脚本选项，它也可以工作，但不可能告诉每个用户都遵循这个解决方案，所以我想知道是否有任何脚本或代码帮助我可以禁用脚本 ONLY For this FORM PAGE in IE only for each user dynamic (我为这个表单创建了一个单独的模板)

提前致谢.......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:52:58.957

怎么跟..

```
<script>
    if( /* Browser checks */ )
        document.write( '<script src="scripts.js"></script>' );
</script> 
```

如果你所有的脚本都在一个地方，或者至少没有嵌入整个页面，也许你应该在检查浏览器后将它们包含在 JavaScript 中：

这是一个场景，它说明了为什么将代码[http://en.wikipedia.org/wiki/Don%27t_repeat_yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)和所有内容放在一个地方很重要。

要检测浏览器，请查看[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)，但如果这对您的用例更有用，请注意指向其对象检测页面的链接。[http://yepnopejs.com/](http://yepnopejs.com/)对后者很有用，后者是 Modernizr 的一部分。

致谢：[从网站内为特定浏览器禁用 JS](https://stackoverflow.com/questions/6669292/disabling-js-from-within-website-for-specific-browsers)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:53:22.813

使用 IE 条件注释：

```
<![if !IE]>
<script>
    // your non IE script here.
</script>
<![endif]> 
```

有关详细信息，请参阅：http: [//msdn.microsoft.com/en-us/library/ms537512 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)

* * *

## 补充说明：

关于条件注释如何工作的注释。

条件注释是 IE 特有的功能，用于根据 IE 版本或浏览器是否为非 IE 来显示或隐藏部分内容（不一定是脚本）。例如：

```
<![if !IE]>
    Hello non IE
<![endif]> 
```

将在非 IE 浏览器上打印`Hello non IE`，在 IE 上什么也没有。它只是一个 IF 语句。这不是擦除内容的神奇方法。例如：

```
Hello non IE
<![if !IE]>
    Hello non IE
<![endif]> 
```

将打印：

```
Hello non IE 
```

在 IE 上和：

```
Hello non IE
Hello non IE 
```

在非 IE 浏览器上。它不会删除以前的文本。它只是对 IE 隐藏其中的文本。

因此，要排除 IE 脚本形式，您需要执行以下操作：

```
<![if !IE]>
<script src="non_ie_compatible_script.js">
<![endif]> 
```

**不是**这个：

```
<script src="non_ie_compatible_script.js">

<![if !IE]>
<script src="non_ie_compatible_script.js">
<![endif]> 
```

如果您无权访问包含脚本的原始行，那么您无能为力。

如果您有权访问该脚本，则可以使用此页面上发布的其他解决方案。但是正如您在 OP 中提到的，您也无权访问脚本，因此这里的任何解决方案都不起作用。事实上，除非您可以访问服务器本身或位于服务器前面的某个代理（在这种情况下，您可以拦截整个页面并在将脚本包含标记传送到浏览器之前将其删除），否则无法解决您的问题问题。

实际上，您最好的选择可能不是编码解决方案，而是人工解决方案：与脚本的所有者/维护者或您网站的所有者/维护者交谈，并要求他们为您提供一种方法来关闭特定页面上的脚本.

或者按照@karthick 的建议来调试您的代码，而不是尝试禁用第三方脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:17:53.013

尝试

[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

或者

警报（navigator.appName）；

# jquery - 自定义滑块问题

> ID：15802740
> 
> 赞同：1
> 
> 时间：2013-04-04T04:49:34.127
> 
> 标签：jquery, html, css

我已经创建了自定义滑块，但它不起作用，请各位大神指导一下。

我的代码：

```
var mwth = 0;
var count = 0;
var wth = 0;
var twth = 0;

$(document).ready(function () {
    $('.box-wrap .box:odd').css("background", "#0C0");
    mwth = $('.box-wrap').width();
    count = $('.box-wrap .box').size();
    wth = $('.box-wrap .box').width();
    twth = (count) * (wth + 2)

    $('.box-wrap .box').wrapAll("<div class='slider-wp'>");
    $(".slider-wp").css("width", twth);

    for (i = 0; i < (twth / mwth); i++) {
        $(".box-wrap").append("<a href='#'>test</a>")
    }

    $(".box-wrap a").each(function (index, element) {
        $(this).click(function () {
            banner_slide((index) * 990);
            return;

        });
    });

    setInterval(banner_slider, 1000);

});

function banner_slide(i) {
    $(".slider-wp").animate({
        left: "-" + i + ""
    }, 1000).delay(1000);

}

function banner_slider(cnt) {
    twth = (count) * (wth + 2)
    var j = 1000;
    for (i = 0; i <= (twth - 990); i = i + 990) {
        j = j + 1000;
        $(".slider-wp").animate({
            left: "-" + i + ""
        }, 1000).delay(j);
    }
} 
```

[Js小提琴](http://jsfiddle.net/anuragaadi/DBWTd/embedded/result)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:26:17.457

我假设您的问题是，在单击单个框架的链接时，正确的框架不会被动画化。

发生这种情况的原因是因为您似乎一次预先计算了几帧滑块的动画。

```
for (i = 0; i <= (twth - 990); i = i + 990) {
    j = j + 1000;
    $(".slider-wp").animate({
        left: "-" + i + ""
    }, 1000).delay(j);
} 
```

如果您修改动画代码以逐帧工作，如下所示：

```
var frame = 0;
function banner_slider(cnt){
    frame ++;
    if (frame > 4) frame = 0;    
    banner_slide(frame * 990);    
} 
```

你不会遇到麻烦。另外，这使用了您之前为类似任务创建的功能（[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）

为您创建了一个[jsfiddle](http://jsfiddle.net/DBWTd/1/)，以便您可以看到它的实际效果。滑块本身还远未完成（如果遇到困难，请随时提出任何问题），但这应该可以解决您的直接问题并让您上路。祝你好运！

# java - 在java中，有没有办法搜索存储在链表中的类的特定字段？

> ID：15802743
> 
> 赞同：0
> 
> 时间：2013-04-04T04:49:38.690
> 
> 标签：java, string, search, linked-list, field

我写了一个要存储在链表中的类，该类中有 3 个字段。其中一个字段是一个字符串，我想在链接列表中搜索它。

例子

```
LinkedList
      Obj1
          String name = "first";
          int age = 2;
          int size = 4;
      Obj2
          String name = "second";
          int age = 3;
          int size = 6;
      Obj3
          String name = "third";
          int age = 5;
          int size = 8; 
```

如果这是使用给定字段存储这三个对象的链表，有没有办法在链表中搜索名称为“second”的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T04:55:02.543

您可以通过迭代搜索列表中的项目

```
// Iterate over each object within the list
for(YourClass obj : yourLinkedList) {

    // Check if the object's name matches the criteria, in this case, the name
    // of the object has to match "second"
    if (obj.name.equals("second")) {

        // If we are within this block, it means that we found the object that has
        // its name set as "second".
        return obj;
    }
} 
```

您还可以制作一种使事情更优雅的方法

```
public YourClass findByName(String name) {
    for(YourClass obj : yourLinkedList) {
        if (obj.name.equals(name)) {
            return obj;
        }
    }
    return null;
} 
```

并通过以下方式使用它

```
YourClass object = findByName("second"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:27:49.703

这是实现比较器的另一种方法（以防万一）。

我发现如果你明确地实现 Comparator 会更容易理解：

```
class PersonAgeComparator implements Comparator<Person> {
    @Override
    public int compare(Person p1, Person person2) {
        return p1.getAge().compareTo(p2.getAge());
    }
} 
```

您可以像这样使用上面的内容：

```
Comparator ageComparator = new PersonAgeComparator();
List<Person> personList = // populate list somehow
Person fourYearOld = new Person();
fourYearOld.setAge(4);
for (Person p : personList) {
    if (ageComparator.compare(fourYearOld, p) == 0) {
        System.out.println(p.getName() + " is 4 years old");
    }
} 
```

对于这个简单的示例，这没有多大意义。

如果您有几种复杂的方法来比较人们（按身高、按调整后的收入、按他们住过多少个州等），那将是理想的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T05:28:25.263

最简单的方法当然是遍历集合中的每个元素，检查它是否匹配您的过滤条件，然后选择找到的匹配项。但是，您需要执行的次数越多，过滤条件就越复杂，这会变得乏味。我建议使用预先存在的库来有效地完成任务。这是使用[Google-Collections](https://code.google.com/p/google-collections/)的示例：

```
final List<SomeObj> listObjs = Arrays.asList(
        new SomeObj("first", 2, 4), new SomeObj("second", 3, 6),
        new SomeObj("third", 5, 8));

final Iterable<SomeObj> filtered = Iterables.filter(listObjs,
        new Predicate<SomeObj>() {

            @Override
            public boolean apply(final SomeObj obj) {
                return "second".equals(obj.getName());
            }
        });

for (final SomeObj obj : filtered) {
    System.out.println(obj);
} 
```

显示的代码将选择列表中名称属性为“second”的所有对象。显然，谓词不必是匿名内部类 - 如果您需要重用它，您只需将其分解为独立类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-04T04:56:31.853

看一下[java.util.Comprator](http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html)接口。您可以编写一种方法来遍历 List 并使用比较器来查找您所追求的。

类似的东西（未编译）：

```
for(final T value : list)
{
    if(comparator.compare(value, desired) == 0)
    {
        // match
    }
} 
```

在您的比较器中，您可以让它执行您想要的任何比较。

这是一个工作示例：

```
public class JavaApplication4 
{
    public static void main(String[] args) 
    {
        final List<Data> list;
        final List<Data> a;
        final List<Data> b;

        list = new ArrayList<Data>();
        list.add(new Data("Foo", 1));
        list.add(new Data("Bar", 10));
        list.add(new Data("Car", 10));

        a = find(list, 
                 new Data("Bar", 0),
                 new Comparator<Data>()
                 {
                    @Override
                    public int compare(final Data o1, 
                                       final Data o2) 
                    { 
                        return (o1.name.compareTo(o2.name));
                    }                  
                 });

        b = find(list, 
                 new Data(null, 10),
                 new Comparator<Data>()
                 {
                    @Override
                    public int compare(final Data o1, 
                                       final Data o2) 
                    { 
                        return (o1.count - o2.count);
                    }                  
                 });

        System.out.println(a.size());
        System.out.println(b.size());
    }

    private static List<Data> find(final List<Data>       list,
                                   final Data             desired,
                                   final Comparator<Data> comprator)
    {
        final List<Data> results;

        results = new ArrayList(list.size());

        for(final Data data : list)
        {
            if(comprator.compare(desired, data) == 0)
            {
                results.add(data);
            }
        }

        return (results);
    }

    private static class Data
    {
        private final String name;
        private final int count;

        Data(final String nm,
             final int    c)
        {
            name  = nm;
            count = c;
        }
    }
} 
```

这是该`find`方法的通用版本。使用这种方法，您永远不必再次编写 find 方法，使用在迭代代码中嵌入匹配逻辑的方法意味着您必须为每组新的匹配逻辑重新编写迭代逻辑。

```
private static <T> List<T> find(final List<T>       list,
                                final T             desired,
                                final Comparator<T> comprator)
{
    final List<T> results;

    results = new ArrayList(list.size());

    for(final T value : list)
    {
        if(comprator.compare(desired, value) == 0)
        {
            results.add(value);
        }
    }

    return (results);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-04T04:59:13.283

您可以通过它并完成它，或者还有其他方法。

您需要覆盖类中的 equals 方法（以及 hashcode 方法）。

在您根据需要覆盖等于之后，在这种情况下比较名称，创建一个具有相同名称的新对象并调用 LinkedList 的 remove(Object o) 方法并获取该对象。

您应该注意，使用这种方法，您的对象相等性将由名称定义，并且该条目将从 LinkedList 中删除

# c# - 消息框自定义

> ID：15802745
> 
> 赞同：1
> 
> 时间：2013-04-04T04:49:51.847
> 
> 标签：c#, .net, wpf, messagebox

如何自定义`MessageBox`WPF 中的默认值？也就是说，我想将按钮文本从“确定”或“是”更改为“接受”。

# qt - Qt：如何删除在 QlineEdit 上实现的本地创建的多个 QIntValidator 指针对象？

> ID：15802746
> 
> 赞同：1
> 
> 时间：2013-04-04T04:50:01.080
> 
> 标签：qt, pointers, memory-leaks, qt4, dynamic-memory-allocation

根据标题，如何删除本地创建的多个 QIntValidator 指针对象。我遇到了内存泄漏问题。

我有一个功能如下：

```
void ABC::setTableDataItems(QStringList headerData)
{
    int row = headerData.size();

    int column = 0;

    if (_txtLineEdit != NULL) {
            delete _txtLineEdit;
            _txtLineEdit = 0;
    }

for (int i = 0; i < row ; i++)
{
    _txtLineEdit = new QLineEdit();
    _txtLineEdit->setMaxLength(_pktStruct[i].ItemDataLength);
    _txtLineEdit->setText(headerData.at(i));
    _pktStruct[i].currentLine = _txtLineEdit;

    QString regExp = "[01]{1,";
    regExp.append(QString("%1").arg(_pktStruct[i].ItemDataLength)).append("}");
    long maxDigit = getMaxValueForDigit( _pktStruct[i].ItemDataLength );

    QIntValidator* decValidator = new QIntValidator( 0, maxDigit, _txtLineEdit      );
    QRegExpValidator* binValidator = new QRegExpValidator(QRegExp(regExp),_txtLineEdit);

    switch (_pktStruct[i].ItemDataType)
    {
    case DATA_TYPE_ASCII:
        break;

    case DATA_TYPE_HEX:
        break;

    case DATA_TYPE_NUM:
        _txtLineEdit->setValidator(decValidator);
        break;

    case DATA_TYPE_BINARY:
        _txtLineEdit->setValidator(binValidator);
        break;

    case DATA_TYPE_MAX:
        break;
    }

    ui->pcusim_cmd_task_tableWidget->setCellWidget(i, column, _txtLineEdit);
    connect(_txtLineEdit, SIGNAL(textChanged(QString)), this, SLOT(on_pcusim_cmd_task_tableWidget_linedit_cellChanged(QString)));
}

 } 
```

在上述函数中，每次调用上述函数时，我都需要在循环之前删除所有动态创建的多个 QIntValidator（在 For Loop 内）。

不知道路。请提供一些建议/想法以进一步进行？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:27:19.887

你为什么不做

```
 QValidator* pValidator = NULL;
  switch (_pktStruct[i].ItemDataType)
  {
  case DATA_TYPE_NUM:
    // create the proper int validator here        
    // ...
    pValidator = new QIntValidator(0, maxDigit, _txtLineEdit);
    break;

  case DATA_TYPE_BINARY:
    // create the proper regexp validator here
    // ...
    pValidator = new QRegExpValidator(QRegExp(regExp),_txtLineEdit);        
    break;
  }

  _txtLineEdit->setValidator(pValidator); 
```

这样您就不会创建未使用的验证器。
由于您在构造验证器时将 _txtLineEdit 作为父级传递，因此当它们的父级 QLineEdit 对象被销毁时，它们将被删除。
顺便说一句，[setCellWidget()](http://qt-project.org/doc/qt-4.8/qtablewidget.html#setCellWidget)拥有小部件的所有权，所以你不需要`delete _txtLineEdit;`（假设这是你传递给它的那个，在这种情况下你应该创建一个它们的列表）

# arm - 使用 Qemu 进行 ARM 汇编

> ID：15802748
> 
> 赞同：5
> 
> 时间：2013-04-04T04:50:15.903
> 
> 标签：arm, qemu, low-level-io, low-level-code

好吧，我已经在整个互联网上搜索了将使用 arm-linux-gnueabi-as 和 qemu 运行的代码。打印一个整数值。从字符串。例行公事会有所帮助。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-04T05:22:32.817

显然你没有搜索整个互联网......因为，如果没有别的，qemu源代码包含你问题的所有答案......

QEMU 模拟系统。您是否尝试在模拟的手臂系统上做一些裸机？或者您是否正在尝试运行 arm linux 操作系统并在操作系统中创建一个在 qemu 上运行的操作系统上运行的程序集？如果是后者，则与qemu无关，这是操作系统问题而不是qemu问题。这不是语言问题（asm），而是操作系统问题。asm 和低级是两个不同的东西。asm 并不意味着低级访问，对于低级的东西绝对不需要（并且很少使用）。

如果您对操作系统不感兴趣，而只是对裸机感兴趣，这里是在 qemu 控制台上获取串行输出的众多方法之一。字符串和整数等是无语言问题（相同的解决方案可以应用于任何编程语言，asm、c、python 等解决问题*然后*将语言应用于问题）。

开始.s

```
.globl _start
_start:
    ldr r0,=0x101f1000
    mov r1,#0
loop:
    add r1,r1,#1
    and r1,r1,#7
    add r1,r1,#0x30
    str r1,[r0]
    mov r2,#0x0D
    str r2,[r0]
    mov r2,#0x0A
    str r2,[r0]
    b loop 
```

内存映射

```
MEMORY
{
    rom  : ORIGIN = 0x00010000, LENGTH = 32K
}

SECTIONS
{
   .text : { *(.text*) } > rom
} 
```

生成文件

```
CROSS_COMPILE ?= arm-none-linux-gnueabi

AOPS = --warn --fatal-warnings 
COPS = -Wall -Werror -O2 -nostdlib -nostartfiles -ffreestanding 

hello_world.bin : startup.s memmap
    $(CROSS_COMPILE)-as $(AOPS) startup.s -o startup.o
    $(CROSS_COMPILE)-ld startup.o -T memmap -o hello_world.elf
    $(CROSS_COMPILE)-objdump -D hello_world.elf > hello_world.list
    $(CROSS_COMPILE)-objcopy hello_world.elf -O binary hello_world.bin 
```

运行

```
qemu-system-arm -M versatilepb -m 128M -nographic -kernel hello_world.bin 
```

但我不知道如何离开控制台

相反，如果你这样做：

```
qemu-system-arm -M versatilepb -m 128M -kernel hello_world.bin 
```

然后 ctrl-alt-3 (不是 F3 而是 3) 将切换到串行控制台，您可以看到输出，并且可以通过关闭控制台窗口来关闭 qemu。

通用 pb qemu 目标中的 uart tx 寄存器位于地址 0x101f1000。因为这是一个模拟，您可以“尝试”并发现写入该地址而不进行任何真实世界的 uart 设置“正常工作”，并且作为一个模拟系统，它可能会立即传输字符，因此您不必等待让它完成或轮询一个空的 tx 缓冲区插槽或类似的东西。炸开就行了。这将使您开始，然后如果您感兴趣，您可以稍后尝试做真实的事情。（其他目标中的其他 uart 可能更接近现实世界，需要一些初始化，并等待一个空的 tx buf）。

asm 使上述内容更加痛苦，只需将 C 用于低级/裸机程序即可。

此外，如果您使用 arm 裸机，您*可以*使用 arm-none-linux-gnueabi，如果您知道自己在做什么，但最终会发现 arm-none-eabi 更合适，因为您没有使用操作系统，更不用说 linux。

# ios - 使用字典解析 JSON 数组

> ID：15802750
> 
> 赞同：2
> 
> 时间：2013-04-04T04:50:17.570
> 
> 标签：ios, objective-c, json

我在获取 JSON 文件中想要的数据时遇到了一些麻烦。这是我的控制台输出的缩短版本：

```
{
    AUD =     {
        15m = "125.15547";
        24h = "124.74";
        buy = "121.0177";
        last = "125.15547";
        sell = "123.44883";
        symbol = "$";
    };
    BRL =     {
        15m = "120.34";
        24h = "120.34";
        buy = "120.34";
        last = "120.34";
        sell = "120.34";
        symbol = "R$";
    };
    CAD =     {
        15m = "129.08612";
        24h = "131.07";
        buy = "128.66227";
        last = "129.08612";
        sell = "129.08612";
        symbol = "$";
    };
} 
```

我正在尝试使用内置的 JSON 解析库来解析文件。这是我 `viewDidLoad`方法中的解析器：

```
 _tickerArray = [NSMutableArray array];

    NSURL *tickerDataURL = [NSURL URLWithString:@"https://blockchain.info/ticker"];
    NSData *jsonData = [NSData dataWithContentsOfURL:tickerDataURL];
    NSError *error = nil;
NSDictionary *dataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
    NSLog(@"%@", dataDictionary);
    NSArray *ar = [NSArray arrayWithObject:dataDictionary];
    for (NSString *key in [dataDictionary allKeys]) {
        for (NSDictionary *dict in ar) {
            TickerData *t;
            t.currency = [dict objectForKey:key];
            t.symbol = [dict objectForKey:@"symbol"];
            t.last = [dict objectForKey:@"last"];
            [_tickerArray addObject:t];
        }

    } 
```

我想将货币代码（如`AUD or BRL`）`t.currency`与货币字典中包含的其他一些数据一起存储，但现在我的应用程序崩溃了。错误代码：

```
NSInvalidArgumentException', reason: '*** -[__NSArrayM insertObject:atIndex:]: object cannot be nil 
```

似乎没有任何对象被添加到`_tickerArray`

帮助？

编辑：获取键以显示填充其他字段的正确数据：

```
 NSDictionary *dataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
    NSLog(@"%@", dataDictionary);

    for (NSString *key in [dataDictionary allKeys]) {
        NSDictionary *dic=[dataDictionary objectForKey:key];
            TickerData *t=[[TickerData alloc] init];
            t.currency = key;//EDITED
            t.symbol = [dic objectForKey:@"symbol"];
            t.last = [dic objectForKey:@"last"];
            [_tickerArray addObject:t];

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T04:56:45.057

`t`为零，你必须分配/初始化它：

```
TickerData *t = [[TickerData alloc] init]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T04:56:43.480

```
NSDictionary *dataDictionary = [NSJSONSerialization JSONObjectWithData:jsonData options:0 error:&error];
NSLog(@"%@", dataDictionary);
//NSArray *ar = [NSArray arrayWithObject:dataDictionary];//REMOVED
for (NSString *key in [dataDictionary allKeys]) {
    NSDictionary *dic=[dataDictionary objectForKey:key];//ADDED
    for (NSString *dickey in [dic allKeys]) { //MODIFIED
        NSDictionary *dict=[dic objectForKey:dicKey];//ADDED
        TickerData *t=[[TickerData alloc] init];//ALLOC INIT ?
        t.currency = key;//EDITED
        t.symbol = [dict objectForKey:@"symbol"];
        t.last = [dict objectForKey:@"last"];
        [_tickerArray addObject:t];
    }

} 
```

您的数据不包含任何数组，它的所有字典，尝试上面的代码也看到评论..

希望它有效..

**编辑：**

是的，您也已经初始化了对象，正如上面其他答案中所建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:56:26.737

尝试一下....

```
NSURL *url = [NSURL URLWithString:@"https://blockchain.info/ticker"];

NSLog(@"API : %@",url);

NSMutableData *jsonData = [NSMutableData dataWithContentsOfURL:url];

NSString *data = [[NSString alloc] initWithBytes: [jsonData mutableBytes] length:[jsonData length] encoding:NSUTF8StringEncoding];

dictionary = [data JSONValue];
NSDictionary *dict = [dictionary objectForKey:@"AUD"];
NSLog(@"%@",dict);
NSString *last = [dict valueForKey:@"last"];
NSLog(@"%@",last); 
```

# php - 无法在服务器中设置会话，在 localhost 中工作

> ID：15802752
> 
> 赞同：3
> 
> 时间：2013-04-04T04:50:23.293
> 
> 标签：php, session

我在我的网站登录时将用户 ID 设置为会话。在设置后不久回显会话变量时，它会显示出来。但在那之后，我将其重定向到另一个页面，在该页面中设置会话，然后检查会话。但是它显示未定义索引 user_id 的错误消息。此代码在 localhost 中工作，也在服务器中工作。但现在它显示错误。由于设置会话的问题，无法登录网站。

```
$_SESSION['user_id'] = $user_id;
header('location:home.php'); 
```

在 home.php 中

```
include('session.php'); 
```

在 session.php 中

```
session_save_path('include/session_store');
session_start();
if(!(isset($_SESSION['user_id'])))
{
header('location:signin.php');
} 
```

根据其他 stackoverflow 用户的建议，我尝试了这个。创建了一个 test.php 文件。

```
session_save_path('include/session_store');
session_start();
$_SESSION['yahoo'] = 'yahoo';
header('location:test2.php'); 
```

在 test2.php

```
session_save_path('include/session_store');
session_start();
echo $_SESSION['yahoo']; 
```

现在在 localhost 中打印 yahoo。但在服务器中，显示空白屏幕。 session_store 文件夹也包含一些 0kb 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:45:58.443

您对**include/session_store**有正确的权限吗？它必须是 777。您可以打印**echo session_save_path()**以确保已设置该选项。最后，在不更改 save_path 的情况下，会话可以正常工作吗？您的服务器可能有一些可能对您的会话产生影响的重定向规则 (mod_proxy)。

如果你有 php 5.4 你可以尝试打印**session_status()** [http://www.php.net/manual/it/function.session-status.php](http://www.php.net/manual/it/function.session-status.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T04:55:35.050

确保你`session_save_path('include/session_store'); session_start();`在 signin.php 上做，并确保它`include/session_store`是可写的

你说它在本地主机上工作，那么问题肯定是 include/session_store 不可写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-23T13:44:47.307

问题可能来自存储会话的路径在您的 Web 托管文件管理器上将会话路径设置为 /tmp/

如果没有名为 tmp 的文件夹，则创建它

# .net - 如何使用 Quartz.net 为多台服务器实现任务调度程序服务？

> ID：15802755
> 
> 赞同：2
> 
> 时间：2013-04-04T04:50:38.920
> 
> 标签：.net, wcf, web-services, quartz.net

我想在具有以下要求的 WCF 服务上使用 Quartz.Net 实现任务计划程序，

*   应该是 WCF 服务。
*   **托管在多个位置的多个服务器上。**
*   **尽管该调度程序服务在多个服务器上运行特定时间，但只执行一次。**
*   历史可以通过任何类型的数据库进行维护。
*   可以执行任何类型的工作，如 .exe 文件、图像文件、特定任务、任何类型的命令、sql 查询等。
*   **我只是想弄清楚是否可以跨多个服务器使用石英调度程序，所有服务器都指向同一个数据库。**
*   **此外，我这样做的主要动机是为了建立故障转移机制，同时也是为了分散负载。**

我对 Quartz.Net 有一点了解，并且我已经在测试样本上创建了，并且我搜索了更多关于 Quartz.net 如何在系统上实际执行、Quartz.net 如何用户内存等的详细信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-06T18:46:15.237

除了 wcf 部分，您上面的所有问题都可以通过 Quartz.Net 解决。只需在您需要的所有服务器上安装该服务。将它们全部配置为集群并将它们指向同一个数据库。这涵盖了您的大部分物品。

如果你想直接与 Quartz.Net 通信，你可以制作一个 WCF 包装器，因为它只支持开箱即用的远程处理。

您可以编写一个作业侦听器来记录作业历史记录。

开箱即用支持运行可执行文件。对于其他类型的工作，您必须创建自己的自定义工作。

# ios - 向CALayer添加半透明蒙版？

> ID：15802756
> 
> 赞同：6
> 
> 时间：2013-04-04T04:50:42.147
> 
> 标签：ios, objective-c, calayer, mask, cashapelayer

我试图使我的 UIImageView 的周围区域变暗，并单独留下一部分（我用我的面具定义）。

现在我正在定义我的蒙版并设置我的 imageView.layer.mask，但是它并没有使图像的其余部分变暗，而是完全删除它。

我想要的效果类型示例：![http://i.imgur.com/vVUiuyk.png](https://i.stack.imgur.com/n68zq.png)

我得到的例子：![http://i.imgur.com/5DTXo0S.png](https://i.stack.imgur.com/sAfd3.png)

参考文档提到蒙版使用它的图层 alpha，所以我尝试操纵蒙版的不透明度。但是，这似乎只会影响我想单独留下的部分的不透明度，而图像的其余部分仍然被完全剪掉。

谁能指出我做错了什么？谢谢。

这是我的代码：

```
CAShapeLayer *mask = [CAShapeLayer layer];
GMutablePathRef path = CGPathCreateMutable();

CGPathMoveToPoint(path, nil, 1052, 448);
CGPathAddLineToPoint(path, nil, 2, 484);
CGPathAddLineToPoint(path, nil, 54, 1263);
CGPathAddLineToPoint(path, nil, 56, 1305);
CGPathAddLineToPoint(path, nil, 380, 1304);
CGPathAddLineToPoint(path, nil, 1050, 1311);
CGPathCloseSubpath(path);
mask.path = path;
CGPathRelease(path);

//mask.opacity = 0.5; //doesn't affect the surrounding portion, only the cut out area.
self.imageView.layer.mask = mask; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-04T04:59:05.373

你做错的是首先使用图层蒙版。您正在尝试使图像的某个区域变暗或变暗。这根本不是图层蒙版的作用！基本上，图层蒙版会穿透现有图层，导致其*后面*的任何内容都显示出来。这正是你发现的：

> 它正在完全删除它

是的，因为这就是图层蒙版的作用！如果你不想要那个，你为什么要使用图层蒙版？

您想要的只是在第一个图像视图上放置第二个图像视图（或只是一个子图层*）*。它包含您绘制的图像。它是透明的，除非它具有半透明的深色填充。这将使背后的东西变暗。您使用*剪切路径*来定义没有得到深色填充的区域。

*或者，通过在图像顶部进行合成*或可能使用 CIFilter 来更改图像视图中的图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-04-02T09:54:32.693

如果其他人有同样的问题：如果目标是使图层变暗，则蒙版不适合。但是如果你需要让图像的一部分透明或半透明，那绝对是一个很好的方法。

例如，此代码可以存在于 NSView 子类中：

```
 let imageLayer = CALayer()
    let maskLayer = CAShapeLayer()

    let ovalPath = NSBezierPath(ovalIn: bounds)
    maskLayer.path = ovalPath
    maskLayer.autoresizingMask = [.layerWidthSizable, .layerHeightSizable]
    maskLayer.frame = bounds
    maskLayer.backgroundColor = NSColor.black.withAlphaComponent(0.2).cgColor

    imageLayer.contents = NSImage(named: "sampleImage")
    imageLayer.autoresizingMask = [.layerWidthSizable, .layerHeightSizable]
    imageLayer.frame = bounds

    imageLayer.mask = maskLayer 
```

这为`imageLayer`.

# c# - 从 XML 文档中提取元素

> ID：15802761
> 
> 赞同：-2
> 
> 时间：2013-04-04T04:51:08.907
> 
> 标签：c#, xml, xpath

有人可以告诉我如何在 .NET 3.5 框架下使用 XPath 和 C# 从下面的 XML 中提取错误元素吗？

```
<?xml version='1.0' encoding='UTF-8'?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<SOAP-ENV:Body>
<ns1:do_OTA_VehAvailRateRQResponse xmlns:ns1="urn:vanguard-web-webservices-ota-IOTA" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<return xsi:type="xsd:string"><OTA_VehAvailRateRS TimeStamp="2013-04-03T18:16:00" TransactionIdentifier="215997103" SequenceNmbr="1" Target="Production" Version="2.0" xmlns="http://www.opentravel.org/OTA/2003/05">
  <Errors>
    <Error Type="1" Code="999">COMPANY NAME FIELD IS INVALID</Error>
  </Errors>
</OTA_VehAvailRateRS>
</return>
</ns1:do_OTA_VehAvailRateRQResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:04:57.343

**使用**：

```
//*[name()='Errors'] 
```

这将选择 XML 文档中名称为“Errors”的任何元素——无论元素的名称空间如何。

**或者，如果您想要更精确**并考虑到元素所在的确切名称空间，您需要使用一个对象并使用它的**[方法](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.addnamespace%28v=vs.90%29.aspx)**`XmlNamespaceManager`注册前缀和名称空间之间任何需要的关联。**[`AddNamespace()`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnamespacemanager.addnamespace%28v=vs.90%29.aspx)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:14:41.573

试试这个代码：

```
XmlDocument xmlDoc = new XmlDocument();

xmlDoc .LoadXml(xmlSting); //If u have a xml string, you can create xmlDocument like this, otherwise u can use file name to create xmlDocument.

String error = .SelectSingleNode("SOAP-ENV:Envelope/SOAP-ENV:Body/return/Errors/Error").Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:59:33.793

```
XmlNodeList errorNodes=new XmlDocument().Load("xmlFilePath").GetElementsByTagName("Errors"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T07:24:55.887

如果您不向我们展示您的代码，我们将无法判断您哪里出错了。

但我们可以猜测。您的 Errors 元素位于命名空间中，未能认识到这一事实在没有经验的人中是一个常见的错误，我很乐意打赌这是您的错误。

要在命名空间中查找元素，您需要一个路径，例如 //e:Errors，其中前缀 e 绑定（在 C# API 级别）到命名空间[http://www.opentravel.org/OTA/2003/05](http://www.opentravel.org/OTA/2003/05)。

（抱歉，您并没有说您没有经验。我是从以下事实推断出这一点：如果您有经验，您会发布您的 XPath 代码）。

# asp.net-mvc - 如何将图像/形状保存在 PDF 文件中

> ID：15802765
> 
> 赞同：1
> 
> 时间：2013-04-04T04:51:41.957
> 
> 标签：asp.net-mvc, itextsharp

在我的应用程序中允许用户创建 PDF 文件。用户还可以在 PDF 文件中添加形状（如矩形、线条）、表单字段（文本区域、复选框..）。当用户单击保存按钮时，PDF 被成功创建，但用户在其文档中包含的形状和表单字段没有出现。

```
function create_PDF(box) {
        var filename = $("#filename").val();
        if (filename == "") {
            alert("Enter filename");
            return false;
        }
        var content = CKEDITOR.instances["message"].getData();
        if (content == "") {
            alert("Enter Content in The Editor");
            return false;
        }
        content = content.trim();
        dhtmlx.modalbox.hide(box);
        dhtmlx.message("Saving file...");
        $.post("/FileUpload/CreateNewPDFile",
    {
        filename: '' + filename + '', content: '' + content + ''
    }, function (data) {

        alert("PDF File created succesfully");
        CKEDITOR.instances["message"].setData("");
        CKEDITOR.instances["editor1"].setData("");
    });
    }

        [AcceptVerbs(HttpVerbs.Post)]
    [ValidateInput(false)]
    public ActionResult CreateNewPDFile(FormCollection data)
    {
        var filename = data["filename"];
        var htmlContent = data["content"];
        string sFilePath = Server.MapPath(_createdPDF + filename + ".pdf");
        htmlContent = htmlContent.Trim();
        htmlContent = htmlContent.Replace("<p>", "\n").Replace("</p>", "\n");
        Regex reg = new Regex("<[^>]+>", RegexOptions.IgnoreCase);
        if (!System.IO.File.Exists(sFilePath))
        {
            Document doc = new Document(PageSize.A4, 10, 10, 10, 10);
            doc.SetMargins(50, 50, 50, 50);
            doc.SetPageSize(new iTextSharp.text.Rectangle(iTextSharp.text.PageSize.LETTER.Width, iTextSharp.text.PageSize.LETTER.Height));
            PdfWriter.GetInstance(doc, new System.IO.FileStream(sFilePath, System.IO.FileMode.Create));
            iTextSharp.text.Font fnt = FontFactory.GetFont("Times New Roman", 14);
            doc.Open();
            PdfPTable pdfTab = new PdfPTable(1);
            PdfPCell pdfCell = null;
            pdfCell = new PdfPCell(new Phrase(new Chunk(htmlContent)));
            pdfTab.AddCell(pdfCell);
            doc.Add(pdfTab);
            doc.Close();
            Response.ContentType = "application/pdf";

            System.Web.HttpContext.Current.Response.Write(doc);
            Response.Flush();
            Response.End();
        }

        return View();
    } 
```

如果在新创建的 PDF 中使用包括 textarea、rectangle 和 checkmark 而不是 textarea、rectangle 和 checkmark，则会出现以下内容如何避免此代码并可以显示在文档中的相应图像上

# jquery - datatables（jquery table 插件）如何执行导出到pdf、excel？

> ID：15802766
> 
> 赞同：1
> 
> 时间：2013-04-04T04:51:44.420
> 
> 标签：jquery, actionscript-3, export, flash, datatables

如果我没有实施服务器端解决方案来导出数据，数据表（jquery 表插件）如何执行导出到 pdf、excel？actionscript /swf 机制如何在内部工作？文档中的[解释](http://www.datatables.net/release-datatables/extras/TableTools/swf_path.html)非常简短

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T04:56:36.733

它使用 Flash 应用程序（SWF 文件），并且 Flash 能够导出到客户端计算机上的文件。

`File`ActionScript 中的类文档在[这里](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html)

# arrays - 如何在 AS3 中有效地进行垃圾收集

> ID：15802769
> 
> 赞同：1
> 
> 时间：2013-04-04T04:51:58.517
> 
> 标签：arrays, actionscript-3

我有一个我正在构建的 Flash 游戏，其中我有一个数组来跟踪屏幕上的一堆电源。当玩家去抓一个时，它需要从屏幕上消失（这很容易），但它也需要从阵列中移除，这样碰撞检测循环就不会变得非常麻烦。我尝试使用拼接，但我不断收到空引用错误，这是相关代码。

```
public function collect():void {
            try {
                Main.powerUps.splice(index, 1);
                stage.removeChild(this);
            }catch (e:Error) {
                trace("Error in splice");
            }
        }
} 
```

然后，当我创建我的 PowerUp 对象时，我将一个参数传递给它，该参数被分配给 index，该参数是当时 Power Ups 数组的长度。谁能看到这段代码有什么问题或（最好）提供更优雅的解决方案？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:04:19.757

优雅的解决方案：`indexOf()`一起使用`splice()`！

```
var index:int = Main.powerUps.indexOf( powerup );
Main.powerUps.splice(index, 1); 
```

where`powerup`是对存储在数组中的对象的引用`Main.powerUps`。

不久前，我还创建了一个可能对您有用的小类：

*   [https://github.com/MartyWallace/Lotus/blob/master/Lotus/lotus/utils/Set.as](https://github.com/MartyWallace/Lotus/blob/master/Lotus/lotus/utils/Set.as)

它有一个`.remove()`方法，所以你可以这样做：

```
powerUps.remove(powerup); 
```

# jsf - c:set 中的 EL 表达式被多次调用，而不是使用它的返回值

> ID：15802771
> 
> 赞同：4
> 
> 时间：2013-04-04T04:52:08.650
> 
> 标签：jsf, jsf-2, jstl, el

我在请求范围内有一个动作。其方法之一的返回值被传递给自定义 facelet 标记。这个标签然后提取返回对象的几个属性并显示它们。问题是对于返回对象的属性的每次评估都会调用对 Action 进行方法调用的 EL 表达式。我将把相关的代码放在这里。

一些.xhtml

```
<ui:include src="someOther.xhtml">
    <ui:param name="profileUri" value="#{param['relateToProfile']}"/>
    <ui:param name="qualifier" value="#{param['qualifier']}"/>
    <ui:param name="cellStyleClass" value="#{param['cellStyle']}"/>
</ui:include> 
```

someOther.xhtml（方法 1）注意 ProfileAction 在 @RequestScoped

```
<tenui:entityCard profileEntity="#{profileAction.getProfileMetadata(profileUri)}"
  qualifier="#{qualifier}"   
  cellStyleClass="#{cellStyleClass}"/> 
```

enityCard.xhtml(facelet 自定义标签)

```
<ui:fragment rendered="#{profileEntity.featured}">...
<tenui:gridCell id="#{profileEntity.profileId}#{qualifier}" ...      
 <tenui:metaunit ..content="#{profileEntity.getMeta('memberName')}" 
  href="/#{profileEntity.profileDisplayUri}" 
  hrefStyleClass="a-styled grid-cell-name"/>
  .....
  ...several other EL expressions including #{profileEntity.xxx} 
```

问题是 #{profileAction.getProfileMetadata(profileUri)} 正在为 entityCard.xhtml 中的每个属性评估调用然后，我想我会将方法调用的返回值保存在 ac:set var(approach 2 如下所述) 但它没有帮助。

someOther.xhtml（方法 2）

```
<c:set var="profileMetadata" 
       value="#{profileAction.getProfileMetadata(profileUri)}"/>
<tenui:entityCard profileEntity="#{profielMetadata}"
  qualifier="#{qualifier}"   
  cellStyleClass="#{cellStyleClass}"/> 
```

action 方法调用一个非常昂贵的存储过程，并且返回的对象有超过 20 个属性，这些属性在 entityCard.xhtml 中的 EL 中进行评估。

我还尝试了另一种方法，通过直接调用 action 方法来解决 ui:param 本身的值，但根本无济于事。问题依然存在。

有人可以指出我做错了什么吗？或者，我如何避免多次调用 profileAction.getProfileMetadata 调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T12:02:39.847

您需要将 的`scope`属性设置`<c:set>`为所需范围之一，`request`，`view`，`session`或`application`。否则默认为`none`.

假设您希望它是`request`，这应该是：

```
<c:set var="profileMetadata" scope="request"
       value="#{profileAction.getProfileMetadata(profileUri)}" /> 
```

# ruby-on-rails - 运行 rspec 时“在任何源中都找不到 pg-0.12.2”

> ID：15802774
> 
> 赞同：6
> 
> 时间：2013-04-04T04:52:13.963
> 
> 标签：ruby-on-rails, postgresql, gem, pg

我正在 Hartl 的 Rails 教程中构建 twitter 克隆应用程序。我克隆了我的 git repo ( [https://github.com/stewartmccoy/rails_tutorial](https://github.com/stewartmccoy/rails_tutorial) ) 并将代码放到我的个人计算机上，该计算机以前在我的工作计算机上。因此，我的开发人员环境可能与我在 Gemfile 中指定的环境略有不同。

我的环境：Mac OS 10.6.8 Rails 3.2.13 ruby​​ 1.9.3p392（2013-02-22 修订版 39386）[x86_64-darwin10.8.0]

***当地宝石***

*   actionmailer (3.2.13, 3.2.11, 3.2.1)
*   动作包（3.2.13、3.2.11、3.2.1）
*   活动模型（3.2.13、3.2.11、3.2.1）
*   活动记录（3.2.13、3.2.11、3.2.1）
*   活动资​​源（3.2.13、3.2.11、3.2.1）
*   主动支持（3.2.13、3.2.11、3.2.1）
*   可寻址 (2.3.2)
*   注释 (2.5.0)
*   雷尔 (3.0.2)
*   bcrypt-ruby (3.0.1)
*   大十进制 (1.1.0)
*   引导 sass (2.1.0.0)
*   引导-will_paginate (0.0.6)
*   建设者（3.0.4）
*   捆绑器 (1.3.4)
*   水豚 (2.0.2, 1.1.2)
*   子进程（0.3.9，0.3.6）
*   咖啡轨 (3.2.2)
*   咖啡脚本（2.2.0）
*   咖啡脚本源（1.6.2、1.6.1、1.4.0）
*   黄瓜 (1.2.1)
*   黄瓜导轨 (1.2.1)
*   database_cleaner (0.7.0)
*   diff-lcs (1.2.1, 1.1.3)
*   厄鲁比斯 (2.7.0)
*   执行js (1.4.0)
*   factory_girl (4.1.0)
*   factory_girl_rails (4.1.0)
*   伪造者（1.0.1）
*   菲 (1.4.0, 1.3.1)
*   小黄瓜 (2.11.5)
*   远足 (1.2.1)
*   i18n (0.6.1)
*   io 控制台 (0.3)
*   旅程 (1.0.4)
*   jquery-rails (2.2.1, 2.1.4, 2.0.2)
*   json (1.7.7, 1.7.6, 1.7.5, 1.5.5)
*   libwebsocket (0.1.7.1)
*   邮件（2.5.3、2.4.4）
*   哑剧类型 (1.21, 1.19)
*   迷你测试（2.5.1）
*   multi_json (1.7.1, 1.5.0)
*   nokogiri (1.5.8, 1.5.7, 1.5.6)
*   pg (0.14.1)
*   多语言（0.3.3）
*   机架（1.4.5、1.4.4、1.4.1）
*   机架缓存 (1.2)
*   机架 SSL (1.3.3, 1.3.2)
*   机架测试（0.6.2）
*   导轨（3.2.13、3.2.1）
*   铁轨（3.2.13、3.2.11、3.2.1）
*   耙子 (10.0.3, 0.9.2.2)
*   rdoc (3.12.2, 3.12, 3.9.5)
*   rspec 核心 (2.13.1)
*   rspec-expectations (2.13.0)
*   rspec 模拟 (2.13.0)
*   rspec-rails (2.13.0)
*   rubygems 捆绑器 (1.1.1)
*   rubyzip (0.9.9)
*   rvm (1.11.3.6)
*   萨斯（3.2.7，3.2.4）
*   sass-rails (3.2.6, 3.2.5)
*   硒网络驱动程序（2.31.0、2.27.2）
*   链轮 (2.2.2, 2.1.3)
*   sqlite3 (1.3.7)
*   雷神 (0.17.0, 0.16.0, 0.14.6)
*   倾斜 (1.3.6, 1.3.3)
*   树顶 (1.4.12)
*   tzinfo (0.3.37, 0.3.35)
*   丑化者 (1.3.0)
*   网络套接字（1.0.7、1.0.6）
*   will_paginate (3.0.3)
*   xpath (1.0.0, 0.1.4)

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'
gem 'bootstrap-sass', '2.1'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.6'
gem 'jquery-rails', '2.0.2'

group :development, :test do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
  # gem 'guard-rspec', '1.2.1'
  # gem 'guard-spork', '1.2.0'  
  # gem 'spork', '0.9.2'
end

group :development do
  gem 'annotate', '2.5.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '4.1.0'
  gem 'cucumber-rails', '1.2.1', :require => false
  gem 'database_cleaner', '0.7.0'
  # gem 'launchy', '2.1.0'
  # gem 'rb-fsevent', '0.9.1', :require => false
  # gem 'growl', '1.0.3'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

无论如何，我正在尝试在清单 8.18 ( [http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-reviewing_form_submission](http://ruby.railstutorial.org/chapters/sign-in-sign-out#sec-reviewing_form_submission) ) 之后运行测试：

```
$ bundle exec rspec spec/models/user_spec.rb 
```

我得到这个错误：

```
Could not find pg-0.12.2 in any of the sources
Run `bundle install` to install missing gems. 
```

所以，我运行`bundle install`并得到这个错误：

```
Fetching gem metadata from https://rubygems.org/.........
Fetching gem metadata from https://rubygems.org/..
Using rake (10.0.3) 
Using i18n (0.6.1) 
Using multi_json (1.5.0) 
Using activesupport (3.2.11) 
Using builder (3.0.4) 
Using activemodel (3.2.11) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.4) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.2.2) 
Using actionpack (3.2.11) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.11) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.11) 
Using activeresource (3.2.11) 
Using addressable (2.3.2) 
Using annotate (2.5.0) 
Using bcrypt-ruby (3.0.1) 
Using bootstrap-sass (2.1.0.0) 
Using will_paginate (3.0.3) 
Using bootstrap-will_paginate (0.0.6) 
Using nokogiri (1.5.6) 
Using ffi (1.3.1) 
Using childprocess (0.3.6) 
Using websocket (1.0.6) 
Using libwebsocket (0.1.7.1) 
Using rubyzip (0.9.9) 
Using selenium-webdriver (2.27.2) 
Using xpath (0.1.4) 
Using capybara (1.1.2) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.6) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.11) 
Using coffee-rails (3.2.2) 
Using diff-lcs (1.1.3) 
Using gherkin (2.11.5) 
Using cucumber (1.2.1) 
Using cucumber-rails (1.2.1) 
Using database_cleaner (0.7.0) 
Using factory_girl (4.1.0) 
Using factory_girl_rails (4.1.0) 
Using faker (1.0.1) 
Using jquery-rails (2.0.2) 
Installing pg (0.12.2) 
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /Users/stewartmccoy/.rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb 
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/stewartmccoy/.rvm/rubies/ruby-1.9.3-p392/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config

Gem files will remain installed in /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.12.2 for inspection.
Results logged to /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.12.2/ext/gem_make.out

An error occurred while installing pg (0.12.2), and Bundler cannot continue.
Make sure that `gem install pg -v '0.12.2'` succeeds before bundling. 
```

最后，我尝试`PATH=$PATH:/Library/PostgreSQL/9.2/bin sudo gem install pg`并得到了：

```
Password:
Building native extensions.  This could take a while...
ERROR:  Error installing pg:
    ERROR: Failed to build gem native extension.

        /Users/stewartmccoy/.rvm/rubies/ruby-1.9.3-p392/bin/ruby extconf.rb
checking for pg_config... no
No pg_config... trying anyway. If building fails, please try again with
 --with-pg-config=/path/to/pg_config
checking for libpq-fe.h... no
Can't find the 'libpq-fe.h header
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/stewartmccoy/.rvm/rubies/ruby-1.9.3-p392/bin/ruby
    --with-pg
    --without-pg
    --with-pg-dir
    --without-pg-dir
    --with-pg-include
    --without-pg-include=${pg-dir}/include
    --with-pg-lib
    --without-pg-lib=${pg-dir}/lib
    --with-pg-config
    --without-pg-config
    --with-pg_config
    --without-pg_config

Gem files will remain installed in /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.15.0 for inspection.
Results logged to /Users/stewartmccoy/.rvm/gems/ruby-1.9.3-p392/gems/pg-0.15.0/ext/gem_make.out 
```

建议？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:11:41.353

您应该检查 config/database.yml 上有哪些适配器。可能您已经使用**测试**环境设置了 postgres 或 pg 适配器。

但是，在您的 Gemfile 上，您设置了 postgres 仅用于生产：

```
group :production do
  gem 'pg', '0.12.2'
end 
```

如果您添加测试环境并再次运行**bundle**，它应该可以工作：

```
group :test, :production do
  gem 'pg', '0.12.2'
end 
```

另请参阅[此答案](https://stackoverflow.com/a/9669523)的解决方案：

尝试使用以下命令安装 gem：

```
gem install pg -- --with-pg-config= 'PATH_TO_YOUR_PG_CONFIG' 
```

如果您不知道 pg_config 在哪里，请运行以下命令：

```
which pg_config 
```

顺便说一句，您是否已经在桌面上安装了 postgres？您所需要的只是安装 gem 的 postgres 开发包。

# java - 创建一个线程，该线程将写入使用键盘键入的每个字符

> ID：15802782
> 
> 赞同：0
> 
> 时间：2013-04-04T04:52:48.200
> 
> 标签：java, multithreading, swing, keyboard, keylistener

我正在尝试创建一个**`thread`**将创建一个`text file`并将使用键侦听器编写在计算机上键入的每个字符但我不知道如何将创建的文件附加到用户将输入的下一个字符.....可能是我让每个人都感到困惑，但我只想存储用户将输入的每个字符（通过键盘）

就像每当我执行我的应用程序时，它都会创建一个文件并开始将其**`keychar`**写入该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:22:01.997

这个问题有点不清楚。首先，如果您想存储在系统上键入的每个字符，那么这是一项艰巨的任务（稍后解释）。如果您想在顶部的 Java 窗口中注册击键，那么您可以通过不关闭文件并附加到相同的`writer`.

因此它将继续附加到它。但请确保，所有关键处理都发生在`SwingUtilities.invokeLater()`.

现在，如果要完成所有任务，它适用于任何窗口。然后它很乏味，首先因为您需要操作系统支持它。您将不得不使用`JNI`或最好使用`JNA`. 对于 Windows，[这](http://twall.github.com/jna/3.4.0/javadoc/com/sun/jna/platform/win32/package-summary.html)将有所帮助。我不清楚要使用哪个合适的功能，但您会在这里找到所有需要的功能（尽管您需要先查看 win32 api）

```
private final User32 lib = = User32.INSTANCE;
//lib.appropriateMethod 
```

对于 Mac，使用[Carbon](http://developer.apple.com/legacy/mac/library/documentation/Carbon/reference/Carbon_Event_Manager_Ref/Carbon_Event_Manager_Ref.pdf) Framework（已弃用）或`Cocoa`.

这就是痛苦，如果你用 Java 做的话

# php - PHP多文件上传问题

> ID：15802789
> 
> 赞同：1
> 
> 时间：2013-04-04T04:54:09.217
> 
> 标签：php, file-upload

我有一个将文件上传到服务器的表单，如下所示：

```
<form action="/upload/" method="post" enctype="multipart/form-data">
<? foreach($this->devices as $d): ?>
    <input type="checkbox" name="check_list[]" value="<?=$d['id']?>"/> 
    <?=$d['site']?>
<? endforeach ?>

Select Directory:
<select name="optone" size="1" onchange="setOptions(document.myform.optone.options[document.myform.optone.selectedIndex].value);">
    <option value="0">Select the directory</option>
    <option value="usr">/usr</option>
</select>
Select subdirectory:
<select name="opttwo" size="1">
<option value=""></option>
</select>

Choose files to upload: <input type="file" id="files" name="files[]" onchange="filesProcess(this.files);" /><br />
<output id="list"></output>
<input type="submit" value="Update" style="align:center"/>
</form> 
```

上传功能如下：

```
$count=count($_FILES['files']['name']);
    $i=0;
    if(!empty($_POST['check_list']))
    {
        foreach($_POST['check_list'] as $check)
        {
            $dir=$_POST['optone'];
            $subdir=$_POST['opttwo'];
            $dir_folder=$dir."_".$subdir;
            exec(mkdir("firmware_update/".$check."/",0777));
            exec(mkdir("firmware_update/".$check."/".$dir_folder."/",0777));
            while($i<$count)
            {
                $f=$_FILES['files']['tmp_name'][$i];
                $name=$_FILES['files']['name'][$i];
                $path="firmware_update/".$check."/".$dir_folder."/".$name;
                move_uploaded_file($f,$path);
                $i++;
            }
        }
    } 
```

根据表格，我需要从复选框中选择站点（例如：56,68 等），从下拉菜单中选择目录（例如：usr，bin），从第二个下拉菜单中选择子目录（例如：usr 等）以及要上传的文件。除了一个小问题，上传功能运行良好。

我们选择的所有文件都应该上传到不同的文件夹。但是上面的代码只是将文件上传到第一个文件夹而已。例如：如果我们选中复选框 56 和 68，目录 usr 和子目录 bin，文件名为 test.php。文件 test.php 应该上传到 56/usr_bin/ 和 68/usr_bin。但现在代码只适用于第一个（56/usr_bin/）。我在哪里犯错了？任何帮助都应该不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:27:24.383

我希望您将单个文件上传到不同`$_POST['check_list']`的文件夹并确定文件夹。

如果是这种情况，你可以移动`$i=0`到`foreach`循环吗？我希望这是问题发生的原因。

请尝试此代码。

```
$count=count($_FILES['files']['name']);

    if(!empty($_POST['check_list']))
    {
        foreach($_POST['check_list'] as $check)
        {
            $i=0;
            $dir=$_POST['optone'];
            $subdir=$_POST['opttwo'];
            $dir_folder=$dir."_".$subdir;
            exec(mkdir("firmware_update/".$check."/",0777));
            exec(mkdir("firmware_update/".$check."/".$dir_folder."/",0777));
            while($i<$count)
            {
                $f=$_FILES['files']['tmp_name'][$i];
                $name=$_FILES['files']['name'][$i];
                $path="firmware_update/".$check."/".$dir_folder."/".$name;
                move_uploaded_file($f,$path);
                $i++;
            }
        }
    } 
```

# variables - Kohana 控制器操作共享变量

> ID：15802790
> 
> 赞同：-1
> 
> 时间：2013-04-04T04:54:19.660
> 
> 标签：variables, controller, kohana, global, shared

我想写一个变量来访问同一个控制器的任何动作。我写了一个共享或全局变量。

我使用的是Kohana 3.1。

这是可能的 ！？我没有找到任何例子或有同样问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T22:33:49.727

使用类属性怎么样？

```
<?php defined('SYSPATH') or die('No direct script access.'); 

class Controller_Application extends Controller_Base {
      public $variable = FALSE;

      /* This will echo true */
      public function action_index()
      {
            $this->variable = TRUE;
            echo Debug::vars($this->variable);
      }

      /* This will echo false */
      public function action_variable()
      {
            echo Debug::vars($this->variable);
      }
} 
```

# jquery - 弹出窗口中的jquery周历

> ID：15802793
> 
> 赞同：3
> 
> 时间：2013-04-04T04:54:25.093
> 
> 标签：jquery, popup, jquery-week-calendar

## 我正在尝试什么

我正在尝试实现一个事件管理站点，在该站点中，单击链接时会出现一个弹出窗口，其中包含显示事件的日历。我在这里使用**jquery 周历**。

## 要求

我在这里面临的问题是，第一次单击链接时日历工作正常。但是，当我再次单击它而不刷新页面时，日历不会显示。当我检查它显示错误

`TypeError: options.shortDays is undefined`

`...options.useShortDayNames ? options.shortDays[date.getDay()] : options.longDays[d...` 在`jquery.weekcalendar.js (line 3098)`.

我该如何解决这个问题？

日历仅在页面加载后第一次工作。

## 脚本

```
 <a href="#" data-reveal-id="reveal_popup" onclick="calendarpop('MT','1');" data-closeonbackgroundclick="false" data-dismissmodalclass="close-reveal-modal">due_today</a>

 <div id="reveal_popup" class="reveal-modal">
   <div id="calendar_popup"></div>
   <a class="close-reveal-modal">&#215;</a>
 </div>

 function calendarpop(cat,typ) {

    if(typ == 1){
        var days = 1;
    }
    else if(typ==2){
        var days = 2;
    }
    else if(typ==3){
        var days = 7;
    }

    var $calendar = $('#calendar_popup').weekCalendar({
        timeslotsPerHour: 4,
        scrollToHourMillis : 0,
        height: function($calendar){
            return $(window).height() - $('h1').outerHeight(true);
        },
        eventRender : function(calEvent, $event) {
            if (calEvent.end.getTime() < new Date().getTime()) {
                $event.css('backgroundColor', '#aaa');
                $event.find('.wc-time').css({
                    backgroundColor: '#999',
                    border:'1px solid #888'
                });
            }
        },

        data : function(start, end, callback) {
            $.getJSON(
            site_url()+'/event/eventpop/'+cat+'/'+typ,
            '',
            function(result) {
                callback(result);
            }
        );
        },
        allowCalEventOverlap : true,
        overlapEventsSeparate: true,
        showAsSeparateUser: false,
        displayOddEven: true,
        displayFreeBusys: true,
        daysToShow: days,
        buttons: false,
        headerSeparator: ' ',
        useShortDayNames: true,
        firstDayOfWeek: $.datepicker.firstDay,
        shortDays: $.datepicker.dayNamesShort,
        longDays: $.datepicker.dayNames,
        shortMonths: $.datepicker.monthNamesShort,
        longMonths: $.datepicker.monthNames,
        businessHours :{
            start: 6, 
            end: 22, 
            limitDisplay: true
        },
        dateFormat: 'd F Y'
    });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-19T17:48:07.137

你能去这里吗：http: [//jsfiddle.net/83mmH/14/](http://jsfiddle.net/83mMH/14/)

请将 URL 添加到 JSON 数据中，然后我们可以从那里进行调试。

我还发现将所有 JS 外部化（包括从 html 中删除 onclick="" 并改为使用 jQuery 事件侦听器）更易于维护。

```
jQuery(document).ready(function($)
                       {
$('#reveal_popup').click(function()
{
  calendarpop('MT','1');
});
var calendarpop = function calendarpop(cat,typ) 
{
var days;
    if(typ == 1){
        days = 1;
    }
    else if(typ==2){
        days = 2;
    }
    else if(typ==3){
        days = 7;
    }

    var $calendar = $('#calendar_popup').weekCalendar({
        timeslotsPerHour: 4,
        scrollToHourMillis : 0,
        height: function($calendar){
            return $(window).height() - $('h1').outerHeight(true);
        },
        eventRender : function(calEvent, $event) {
            if (calEvent.end.getTime() < new Date().getTime()) {
                $event.css('backgroundColor', '#aaa');
                $event.find('.wc-time').css({
                    backgroundColor: '#999',
                    border:'1px solid #888'
                });
            }
        },

        data : function(start, end, callback) {
            $.getJSON(
            site_url()+'/event/eventpop/'+cat+'/'+typ,
            '',
            function(result) {
                callback(result);
            }
        );
        },
        allowCalEventOverlap : true,
        overlapEventsSeparate: true,
        showAsSeparateUser: false,
        displayOddEven: true,
        displayFreeBusys: true,
        daysToShow: days,
        buttons: false,
        headerSeparator: ' ',
        useShortDayNames: true,
        firstDayOfWeek: $.datepicker.firstDay,
        shortDays: $.datepicker.dayNamesShort,
        longDays: $.datepicker.dayNames,
        shortMonths: $.datepicker.monthNamesShort,
        longMonths: $.datepicker.monthNames,
        businessHours :{
            start: 6, 
            end: 22, 
            limitDisplay: true
        },
        dateFormat: 'd F Y'
    });
}
}); 
```

# android - 如何在启动时启动应用程序而不显示设备公司名称？

> ID：15802795
> 
> 赞同：1
> 
> 时间：2013-04-04T04:54:29.380
> 
> 标签：android, splash-screen

我的 android 应用程序应该在电视上显示的 akai android 设备上运行

我希望我的应用程序在设备打开时立即运行，而不显示电视公司或 akai smartbox 公司或其他任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:02:30.673

您正在谈论的图形很可能由*引导加载程序*和*android 内核*显示，因此它们发生在您的应用程序甚至有机会运行之前。

您应该为设备创建自己的固件以更改它们。

# html - 带有左右边距的浮动 DIV 中的 IE7 间距问题

> ID：15802797
> 
> 赞同：1
> 
> 时间：2013-04-04T04:54:47.630
> 
> 标签：html, css

我想在 DIV 中创建一些宽度和边距百分比的列，可以在任何具有动态宽度的容器内。

[例子](http://jsfiddle.net/uAzg2/)

```
<div class="gridFluid">
    <div class="col-1-4"></div>
    <div class="col-1-4"></div>
    <div class="col-1-4"></div>
    <div class="col-1-4"></div>
</div> 
```

* * *

```
 * {
     margin: 0;
     padding: 0;
 }
 body {
     font-size: 1%
 }
 .gridFluid {
     width: 960px;
     display: table;
     background: #eee;
     font-size: 0px;
     overflow: auto;
     zoom: 1;
 }
 .col-1-4 {
     background: #ddd;
     height: 200px;
     width: 23%;
     display: table-cell;
     *display: inline;
     zoom:1;
     margin-left: 1%;
     margin-right: 1%;
     float: left;
 } 
```

它在任何地方都按预期工作，但在 IE7 中，最后一列无法正确放入单行。可能是因为它在除边距之外的 DIV 之间添加了额外的空间。

我不想为 IE7 使用不同的宽度或边距（宽度：24.5% 而不是 25）。因为这不是一个合适的解决方案。我正在寻找一个好的解决方案。

可能是 IE7 的已知问题，我在寻找解决方案时发现了很多与它相关的问题，但没有找到任何合适的方法来解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:13:04.393

让我们根据您的 CSS 进行一些快速计算。

您希望每列占容器宽度的 23%。所以每一列应该是：

> .23 * 960 = 220.8

所以每列应该是 220.8 像素。

您希望每个边距为 1% 宽。

> .01 * 960 = 9.6

所以每个边距应该是 9.6 像素宽。

等一下。我们那里有一些部分像素。您如何处理 0.8 或 0.6 像素？那么你必须做一些四舍五入。但是你会选择哪种方式......向上或向下？好吧，如果你四舍五入，你最终会得到 4 列大小为 221 像素的列。

> 221 * 4 = 884

因此，列的总宽度估计为 884 像素。

边距呢？

> 8 * 10 = 80

因此，边距的总宽度估计为 80 像素。

现在让我们把这些数字加在一起。

> 80 + 884 = 964

嗯...看起来我们这里有 4 个额外的像素...最好将内容下移一行以适合 960 像素宽的框。

这就是为什么你的专栏被推倒的原因。另外，请查看：[http ://ejohn.org/blog/sub-pixel-problems-in-css/](http://ejohn.org/blog/sub-pixel-problems-in-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:10:25.623

只需对您的 css 进行一些小改动...

**改变：-**

```
.col-1-4 {
     width: 23%;     
 } 
```

**对此：-**

```
.col-1-4 {
     *width: 22.9%; 
     width: 23%;    
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:39:09.043

双div怎么样。这显然会解决问题。

```
 .col-1-4 {
     position:relative;
     background: #eee;
     height: 200px;
     width: 25%;
    /*******************************/
    /* Don't use this properties, not necessary here */
     display: table-cell;
     *display: inline;
    /*******************************/
     zoom:1;
     float: left;
 }
 .col-1-4>div {
     background: #ddd;
     position:absolute;
     left:4%;
     right:4%;  /* 100/25 = 4 */
     top:0;
     bottom:0;
 } 
```

[**工作小提琴**](http://jsfiddle.net/uAzg2/1/)

# c++ - 类ctor中未定义的模板静态变量

> ID：15802802
> 
> 赞同：1
> 
> 时间：2013-04-04T04:55:14.397
> 
> 标签：c++, templates

我在类的层次结构下面定义了，我的目的是设计一个通用类，允许我迭代枚举对象（不幸的是，不允许使用 C++11）。类定义和测试程序是：

```
// base.h

#include <set>

template <typename T>
class Base
{
protected:
   explicit Base(int value);
   typedef typename std::set< Base<T>* > instances;
   static instances s_instances;
   int value_;

public:
   int get_value() const { return value_ ; }
};

template <typename T>
Base<T>::Base(int value): value_(value)
{
   s_instances.insert(this);
} 
```

//派生的.h

```
#include "base.h"

class Derived : public Base<Derived>
{
protected:
    explicit Derived(int value): Base<Derived>(value) { }

public:
    static const Derived value1;
}; 
```

// 测试.cc

```
#include "derived.h"

template<>
Base<Derived>::instances Base<Derived>::s_instances;

const Derived Derived::value1(1);

int main(int argc, char *argv[])
{

   using std::cout;
   using std::endl;

   cout << Derived::value1.get_value() << endl;

} 
```

在使用 g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 编译时，它给了我以下链接错误：“

```
g++ test.cc -o test
/tmp/ccOdkcya.o: In function `Base<Derived>::Base(int)':
test.cc:(.text._ZN4BaseI7DerivedEC2Ei[_ZN4BaseI7DerivedEC5Ei]+0x28): undefined reference to `Base<Derived>::s_instances'
collect2: ld returned 1 exit status 
```

"

谁能建议我在上面的代码中缺少什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:45:25.497

静态数据成员在类定义中**声明**并在类定义**之外**定义。像这样：

```
// header:
class C {
    static int i;
};

// source:
int C::i = 17; 
```

使用模板，您通常不会将任何代码放入源文件中，因此定义位于标题中：

```
// header:
template <class T>
class C {
    static int i;
};

template <class T>
int C<T>::i = 17; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:05:54.620

你只能写

```
// template<> -> you should not write this in this case.
Base<Derived>::instances Base<Derived>::s_instances; 
```

如果您提供了 的明确专业化`Base<Derived>`，例如：

```
class Derived;
template <>
class Base<Derived>
{
protected:
  explicit Base(int value);
  typedef typename std::set< Base<Derived>* > instances;
  static instances s_instances;
  int value_;

public:
  int get_value() const { return value_ ; }
}; 
```

否则，你必须坚持写作：

```
template<typename T>
typename Base<T>::instances Base<T>::s_instances; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:22:32.393

请注意，s_instances 在使用之前可能尚未初始化。

# mysql - 如果更新语句mysql上存在

> ID：15802807
> 
> 赞同：2
> 
> 时间：2013-04-04T04:55:49.593
> 
> 标签：mysql

我有下一个查询：

```
UPDATE a, b, c SET a.deleted=1, b.deleted=1, c.deleted=1 
WHERE a.id='$aID' AND a.com='$comID' AND b.areID=a.id AND c.areID=a.id 
```

问题是有时 c.areID 不会存在，b.areID 也一样，所以，如果存在的话，MySQL 中是否有任何句子生命或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:02:22.293

我假设“不存在”是指它可以为 NULL。

```
UPDATE a, b, c SET a.deleted=1, b.deleted=1, c.deleted=1 
WHERE a.com='$comID' AND a.id='$aID' AND (b.areID=a.id OR b.areID IS NULL) 
AND (c.areID=a.id or c.areID IS NULL) 
```

如果您不想使用 NULL 值进行更新，那么您的查询应该没问题，因为当 areID 为 NULL 时，它与条件不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:23:26.993

看起来您想要设置 的`deleted`列`a`以及 和`deleted`中任何相应（子）行的`b`列`c`。

为此，您可以执行以下操作：

```
UPDATE a
  LEFT JOIN b ON b.areID=a.id
  LEFT JOIN c ON c.areID=a.id
   SET a.deleted=1
     , b.deleted=1
     , c.deleted=1
 WHERE a.id='$aID'
   AND a.com='$comID' 
```

原始语句中的逗号连接运算符等价于“INNER JOIN”。`b`当或中不存在子行时`c`，原始语句不会更新任何行。

通过使用外连接，即使在和/或`a`中不存在子行时，该语句也可以更新行，以及更新和/或中的相应子行。`b``c``b``c`

# zend-framework - 在zend框架中选择命令

> ID：15802808
> 
> 赞同：1
> 
> 时间：2013-04-04T04:56:06.820
> 
> 标签：zend-framework, zend-db

我是 Zend 框架的新手。

我有这种代码结构。

**数据库表**

```
 class Application_Model_DbTable_Employee extends Zend_Db_Table_Abstract
{

 protected $_name = 'tab_employee';
 } 
```

**模型**

```
 public function selectAllEmployees(){
   $tblEmployee = new Application_Model_DbTable_Employee();
   $tblEmployee->select('*');
 } 
```

但我无法获得所有员工的所有数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:22:12.960

```
public function selectAllEmployees(){
  $tblEmployee = new Application_Model_DbTable_Employee();
  return $tblEmployee->fetchAll($tblEmployee->select());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T06:27:01.420

在模型中尝试此代码：

```
public function selectAllEmployees(){
    $tblEmployee = new Application_Model_DbTable_Employee();
    $rowset = $tblEmployee->fetchAll();
    return $rowset;
} 
```

有关更多信息，请阅读此[http://framework.zend.com/manual/1.12/en/zend.db.table.rowset.html#zend.db.table.rowset.to-array](http://framework.zend.com/manual/1.12/en/zend.db.table.rowset.html#zend.db.table.rowset.to-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T07:28:31.843

模型功能

```
 public function selectAllEmployees()
    {   
       $selectSql = $this->select();
       $selectSql->from($this->_name, array('*')) 
                  ->order(id DESC');       

        return $this->fetchAll($selectSql);
    } 
```

在控制器中

```
$employeeModel = new Application_Model_Employee();
$employees = $employeeModel->selectAllEmployees(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T10:05:30.593

Maks3w 既正确又简洁。

这里有更多细节。

有多种方法可以使用您`Application_Model_DbTable_Employee`访问和查询您`tab_employee`的数据库表。

最简单的方法是直接从`dbTable`模型本身查询：

```
 class Application_Model_DbTable_Employee extends Zend_Db_Table_Abstract
{

    protected $_name = 'tab_employee';

    public function selectAllEmployees()
    {   
       //$this refers to the current dbTable object
       $select = $this->select();
       //when querying from the dbTable the from() parameter is assumed to be $this->_name, array('*')
       //there several other sql commands available to the select(), where(), orWhere(), join() 
       $select->order('id DESC');

       $result = $this->fetchAll($select);   

       return $result;
    }
} 
```

控制器代码：

```
public function indexAction(){
        model = new Application_Model_DbTable_Employee();
        $employees = $model->selectAllEmployees();
        $this->view->employees = $employees
    } 
```

通常使用映射器模型来访问数据库并将数据提供给实体模型。这也是很常见的一个相对简单的实现。设计映射器时要记住的关键项是包含访问 dbTable 模型作为数据库适配器的代码，通常称为`gateway`，这里是一些示例代码：

```
<?php
//This is one way to build a mapper
abstract class My_Model_Mapper_Abstract
{
    /**
     * Instance of Zend_Db_Table_Abstract
     */
    protected $tableGateway = null;

    /**
     * Will accept a DbTable model passed or will instantiate
     * a Zend_Db_Table_Abstract object from table name.
     */
    public function __construct(Zend_Db_Table_Abstract $tableGateway = null)
    {
        if (is_null($tableGateway)) {
            $this->tableGateway = new Zend_Db_Table($this->_tableName);
        } else {
            $this->tableGateway = $tableGateway;
        }
    }

    /**
     * Get default database table adapter
     */
    protected function getGateway()
    {
        return $this->tableGateway;
    }

    /**
     * findAll() is a proxy for the fetchAll() method and returns
     * an array of entity objects.
     *
     * @param $where, primary key id
     * @param string $order in the format of 'column ASC'
     * @return array of entity objects
     */
    public function findAll($where = null, $order = null)
    {
        $select = $this->getGateway()->select();

        if (!is_null($where)) {
            $select->where('id = ?', $where);
        }
        if (!is_null($order)) {
            $select->order($order);
        }
        $rowset = $this->getGateway()->fetchAll($select);

        $entities = array();
        foreach ($rowset as $row) {
            $entity = $this->createEntity($row);
            $this->setMap($row->id, $entity);
            $entities[] = $entity;
        }

        return $entities;
    }

    /**
     * Abstract method to be implemented by concrete mappers.
     */
    abstract protected function createEntity($row);
} 
```

具体模型可能如下所示：

```
<?php

class Application_Model_Mapper_Employee extends My_Model_Mapper_Abstract
{
    protected $tableName = 'tab_employee';
    //I hard code the $tableGateway though this is probably not the best way.
    //$tableGateway should probably be injected, but I'm lazy.
    public function __construct(Zend_Db_Table_Abstract $tableGateway = null)
    {
        if (is_null($tableGateway)) {
            $tableGateway = new Application_Model_DbTable_User();
        } else {
            $tableGateway = $tableGateway;
        }
        parent::__construct($tableGateway);
    }
    //create the Entity model
    protected function createEntity($row)
    {
        $data = array(
            'id'       => $row->id,
            'name'     => $row->name,
            'password' => $row->password,
        );
        $employee = new Application_Model_Employee($data);

        return $employee;
    }
} 
```

在控制器中使用它可能如下所示：

```
public function indexAction(){
    model = new Application_Model_Mapper_Employee();
    $employees = $model->findAll();
} 
```

查询数据库的最直接方法是最不推荐的方法，直接从控制器：

```
public function indexAction(){
    model = new Application_Model_DbTable_Employee();
    $employees = $model->fetchAll();
    $this->view->employees = $employees
} 
```

我希望这可以为您提供一些帮助，并且不会造成太大的混乱。

# c# - 将多个表从 SQL Server 导出到 XML 以进行还原

> ID：15802812
> 
> 赞同：5
> 
> 时间：2013-04-04T04:56:35.337
> 
> 标签：c#, asp.net, sql-server, xml, linq

我在 C#/ASP.NET 中有一个 Web 应用程序。我想使用相同的唯一键 ( `Company ID`) 导出所有数据库表的数据。所有表都有这个键（每个公司都不同）。我想这样做以备将来备份。Linq 或经典 C# 是否可行？怎样才能实现这种备份和恢复呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:06:12.160

解决方案的一个例子是

```
using System.Data.SqlClient;
using System.Data;
using System.IO;

namespace ConsoleApplication4
{
class Program
{
    static void Main(string[] args)
    {
        var connStr = "Data Source=MOHSINWIN8PRO\\SQLEXPRESS;Initial Catalog=AB2EDEMO;Integrated Security=True";
        var xmlFileData = "";
        DataSet ds = new DataSet();
        var tables = new[] {"Hospital", "Patient"};
        foreach (var table in tables)
        {

            var query = "SELECT * FROM "+ table +" WHERE (Hospital_Code = 'Hosp1')";
            SqlConnection conn = new SqlConnection(connStr);
            SqlCommand cmd = new SqlCommand(query, conn);
            conn.Open();
            SqlDataAdapter da = new SqlDataAdapter(cmd);
            da.Fill(ds);
            conn.Close();
            conn.Dispose();
            xmlFileData+=ds.GetXml();
        }
        File.WriteAllText("D://SelectiveDatabaseBackup.xml",xmlFileData);
    }
} 
```

}

这将创建`SelectiveDatabaseBackup.xml`以后可用于恢复备份

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-14T15:20:35.773

```
 SaveFileDialog SD = new SaveFileDialog();
                if (SD.ShowDialog() != System.Windows.Forms.DialogResult.Cancel)
                {
                    System.IO.StreamWriter SW = new System.IO.StreamWriter(SD.FileName);
                    foreach (string str in checkedListBox1.CheckedItems)
                    {
                        string XMLSTR = //Heads.funtions.ConvertDatatableToXML(
                                        Heads.funtions.fire_qry_for_string(string.Format("Select * from {0} FOR XML AUTO,TYPE, ELEMENTS ,ROOT('{0}')", str)); // , str);
                        SW.Write(XMLSTR);
                        SW.WriteLine("###TABLEEND###");
                    }
                    SW.Close();
                    //_CommonClasses._Cls_Alerts.ShowAlert("Clean Up Completed...!!!", "CleanUP", MessageBoxIcon.Information);
                } 
```

# java - OnTouchEvent 不确定 drawRect 在哪里

> ID：15802822
> 
> 赞同：2
> 
> 时间：2013-04-04T04:57:03.643
> 
> 标签：java, android

我有一个使用 drawRect(Rect, Paint) 绘制的 Rect 对象。我有一个 OnTouchEvent 来检查触摸位置是否在 Rect 内。如果触摸在 Rect 内部，那么我屏幕上的某些内容会发生变化。我遇到的问题是：我必须触摸才能执行触摸语句的位置比 Rect 对象高约 50 像素。

这是我的代码的相关部分：

```
public class MainActivity extends Activity {
    DrawView drawView;
    RelativeLayout fLY;
    static Rect newGame = new Rect(LEFT, 165 + 35, 320, 200 + 35);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
        fLY = new RelativeLayout(this);
        drawView = new DrawView(this);
        fLY.addView(drawView);
        setContentView(fLY);
    }

    @Override
   public boolean onTouchEvent(MotionEvent event) {
        int touchX = (int)event.getX();
        int touchY = (int)event.getY();
        switch(event.getAction()){
            case MotionEvent.ACTION_DOWN:
            if(newGame.contains(touchX, touchY))reset();
        }
    } 
```

还有我的 DrawView 类：

```
public class DrawView extends View{
    Paint paint = new Paint();
    int COLORS[] = Constants.COLORS;
    int left = 250;
    int size = 35;

    public DrawView(Context context) {
        super(context);   
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawRect(MainActivity.newGame, paint);
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:04:11.327

它可能正好偏离状态栏的高度。您可以通过这个答案获得状态栏的高度：状态栏的[高度？](https://stackoverflow.com/questions/3355367/height-of-statusbar/3356263#3356263)

然后将其添加到您的`getY`，它应该工作。

# iphone - 如何在 xcode 中使用 ogg.framwork 从 url 或 data 播放音频

> ID：15802823
> 
> 赞同：3
> 
> 时间：2013-04-04T04:57:10.653
> 
> 标签：iphone, ios, xcode, avplayer, ogg

从几天开始，我一直在寻找如何在 iPhone 上玩 ogg。但并不成功。我发现[这篇文章](https://stackoverflow.com/questions/10804046/playing-an-ogg-stream-in-ios)指向[precompiled-ogg-vorbis-libraries-for-ios](http://iosdeveloperzone.com/2012/08/07/precompiled-ogg-vorbis-libraries-for-ios/)，但我不知道如何使用这个框架或库。我是编码新手。我也找到[了这篇文章](https://stackoverflow.com/questions/4745618/ogg-vorbis-in-iphone-sdk?lq=1) ，但它播放捆绑包中的 ogg 音频。我想从给定的网址播放，比如维基百科的音频。任何帮助都会很棒。谢谢

更新：

我找到了另一个可以在 iOS 中使用的库或文件，但是我仍然不知道如何在 Xcode 中使用。[Sean Barrett 的 Ogg Vorbis I 音频解码器](http://www.nothings.org/stb_vorbis/)。任何想法如何使用它。

更新 2：

只是尝试使用它这样的东西，但输出文件没有声音。知道我哪里出错了。

```
NSString *file = @"http://upload.wikimedia.org/wikipedia/commons/b/b2/En-us-Pakistan.ogg";
    NSURL *fileURL = [NSURL URLWithString:file];

    NSData * data = [NSData dataWithContentsOfURL:fileURL];
    unsigned char* array = (unsigned char*) [data bytes];
    int len = [data length];

    if (data != nil) {
        NSLog(@"\nis not nil");
        //NSString *readdata = [[NSString alloc] initWithContentsOfURL:(NSData *)data ];
        stb_vorbis* Stream = stb_vorbis_open_memory(array, len, NULL, NULL);

        if (Stream)
        {
            stb_vorbis_close(Stream);
            //return true;
        }
        else
        {
            //return false;
        }
    }

    Byte *byteData = (Byte*)malloc(len);

    memcpy(byteData, [data bytes], len);
    NSData *ddata = [NSData dataWithBytes:byteData length:len];

    if (ddata == nil) {
        NSLog(@"data nil");
    }
    else{

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"wikiaudio"];
    NSError *error;

    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; //Create folder if it doesn't already exist

    NSString * filename = [@"hello" stringByAppendingString:@".mp3"];
    NSString  *filePath = [NSString stringWithFormat:@"%@/%@", dataPath,filename];
    [ddata writeToFile:filePath atomically:YES];
        NSLog(@"filepath %@", filePath);
    } 
```

# php - 仅针对单个虚拟主机将 ServerAPI 从“FastCGI”切换到“Apache 2.0 处理程序”

> ID：15802824
> 
> 赞同：1
> 
> 时间：2013-04-04T04:57:13.523
> 
> 标签：php, apache

是否可以在“Apache 2.0 Handler”模式下单独处理单个虚拟主机（使用 mod_php5）？我有一个配置为在 FastCGI 模式下运行 PHP 的专用服务器，并且我有一个在其他服务器上完美运行的软件，其中 phpinfo() 中的 ServerAPI 设置为“Apache 2.0 处理程序”，但在此服务器中它设置为“CGI/FastCGI "

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-04T05:28:30.073

我认为您需要从 Apache 的全局配置中删除 x-application 处理程序，并仅在 ... 块中添加您的处理程序选择（AddHandler）。

# .htaccess - 使用 htaccess 从 url 中删除 ?m=1 查询字符串

> ID：15802826
> 
> 赞同：1
> 
> 时间：2013-04-04T04:57:17.347
> 
> 标签：.htaccess, redirect, query-string, blogger

不久前，我从博主切换到 wordpress，我试图找出正确的方法来简单地从我的 url 中删除 ?m=1 查询字符串，博主曾经在移动重定向中投放广告

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T05:02:41.917

试试这个：

```
RewriteCond %{QUERY_STRING} m=1
RewriteRule (.*) /$1? [R=301, L] 
```

这应该插入到所有其他规则之上，或者就在`RewriteEngine On`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T03:57:46.800

在您的 htaccess 文件中的 mod_rewrite 规则之前添加以下代码并保存。

笔记！在此规则中将您的域替换为 yourdomain。

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteCond %{QUERY_STRING} .
RewriteCond %{QUERY_STRING} !^(s|p)=.*
RewriteCond %{REQUEST_URI} !.*wp-admin.*
RewriteRule .* http://www.yourdomain.com%{REQUEST_URI}? [R=301,L]
</IfModule> 
```

# steganography - DWT如何用于LSB替换隐写术

> ID：15802827
> 
> 赞同：6
> 
> 时间：2013-04-04T04:57:27.960
> 
> 标签：steganography, haar-wavelet, dwt, wavelet-transform

在隐写术中，[最低有效位 (LSB) 替换](https://en.wikipedia.org/wiki/Steganography#Example_from_modern_practice)方法将秘密位嵌入覆盖介质中的位，例如图像像素。在一些方法中，对图像进行[离散小波变换](https://en.wikipedia.org/wiki/Discrete_wavelet_transform)（DWT）并将秘密比特嵌入到DWT系数中，然后使用逆变换来重建隐写图像。

但是，DWT 产生浮点系数，对于 LSB 替换方法，需要整数值。我读过的大多数论文都使用 2D Haar Wavelet，但是，他们并不清楚他们的方法。我已经看到变换是根据低通和高通滤波器（浮点变换）定义的，或者取对值的和和差，或者平均差和平均差等。

更明确地说，无论是在正向变换还是在逆变换中（但不一定都取决于所使用的公式），最终会出现浮点数。我不能将它们用于系数，因为替换不起作用，并且我不能将它们用于重建像素，因为图像需要整数值进行存储。

例如，让我们考虑一对像素，`A`并`B`作为一维数组。低频系数由和定义，即 ，`s = A + B`而高频系数由差定义，即`d = A - B`。然后我们可以用`B = (s - d) / 2`和重建原始像素`A = s - B`。然而，在对系数进行任何位旋转之后，`s - d`可能不再是甚至重建像素的浮点值。

对于 2D 情况，1D 变换分别应用于行和列，因此最终会在某处发生除以 4。这可能导致浮点余数为 0.00、0.25、0.50 和 0.75 的值。我只遇到过[一篇](https://www.cyut.edu.tw/~ijase/2006/4-3(Microsoft%20Word%20-%20010-009-6).pdf)解决这个问题的论文。其余的在他们的方法上非常模糊，我很难复制它们。然而，DWT 已被广泛用于图像隐写术。

我的问题是，由于我读过的一些文献没有启发性，这怎么可能呢？如何使用引入浮点值的转换，而整个隐写术方法需要整数？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-07T23:02:02.480

对我有用的一种解决方案是使用整数小波变换，有些人也将其称为[提升方案](https://en.wikipedia.org/wiki/Lifting_scheme)。对于 Haar 小波，我已经看到它定义为：

```
s = floor((A + B) / 2)
d = A - B 
```

而对于逆：

```
A = s + floor((d + 1) / 2)
B = s - floor(d / 2) 
```

整个过程中的所有值都是整数。它起作用的原因是因为公式包含有关像素/系数的偶数和奇数部分的信息，因此四舍五入不会丢失信息。即使修改系数然后进行逆变换，重建的像素仍然是整数。

Python中的示例实现：

```
import numpy as np

def _iwt(array):
    output = np.zeros_like(array)
    nx, ny = array.shape
    x = nx // 2
    for j in xrange(ny):
        output[0:x,j] = (array[0::2,j] + array[1::2,j])//2
        output[x:nx,j] = array[0::2,j] - array[1::2,j]
    return output

def _iiwt(array):
    output = np.zeros_like(array)
    nx, ny = array.shape
    x = nx // 2
    for j in xrange(ny):
        output[0::2,j] = array[0:x,j] + (array[x:nx,j] + 1)//2
        output[1::2,j] = output[0::2,j] - array[x:nx,j]
    return output

def iwt2(array):
    return _iwt(_iwt(array.astype(int)).T).T

def iiwt2(array):
    return _iiwt(_iiwt(array.astype(int).T).T) 
```

一些语言已经为此目的内置了函数。例如，Matlab 使用[`lwt2()`](http://uk.mathworks.com/help/wavelet/ref/lwt2.html)和[`ilwt2()`](http://uk.mathworks.com/help/wavelet/ref/ilwt2.html)用于 2D 提升方案小波变换。

```
els = {'p',[-0.125 0.125],0};
lshaarInt = liftwave('haar','int2int');
lsnewInt = addlift(lshaarInt,els);
[cAint,cHint,cVint,cDint] = lwt2(x,lsnewInt)    % x is your image
xRecInt = ilwt2(cAint,cHint,cVint,cDint,lsnewInt); 
```

使用 IWT 进行图像隐写术的文章示例是[Raja、KB 等。al (2008) 使用整数小波的鲁棒图像自适应隐写术。](https://www.researchgate.net/profile/Sarvajith_M/publication/4346356_Robust_image_adaptive_steganography_using_integer_wavelets/links/0deec51b701be41d58000000.pdf)

# appfabric - 如何在 AppFabric 中使用基于通知的失效

> ID：15802828
> 
> 赞同：1
> 
> 时间：2013-04-04T04:57:33.723
> 
> 标签：appfabric, appfabric-cache

我将为我们要构建的应用程序使用 AppFabric 缓存。我们将使用该技术维护两个不同的缓存。因此，如果在一个或另一个缓存中发生某些事情，则应该进行适当的通信。

我已经阅读了基于通知的缓存，它会在添加、删除或替换项目或区域时发出通知。我也尝试过同样的方法，它工作正常。

我正在寻找的是如何通知缓存失效。? 从 MSDN 中了解到，失效缓存有两种方式 - 1\. 基于 TimeOut 和 2\. 基于通知。我正在寻找一些相同的代码。

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T12:52:39.940

我认为没有任何通知方式可以帮助主缓存失效。但是，同样可用于本地缓存失效。

# javascript - 使用 jquery 无法正确删除 Cookie

> ID：15802829
> 
> 赞同：4
> 
> 时间：2013-04-04T04:57:34.733
> 
> 标签：javascript, jquery, html, cookies

我的任务是为菜单设置 cookie。我有一个水平菜单。当我点击菜单时，菜单的 id 被设置到 cookie。但是当我选择下一个菜单时，cookie 显示第一个输入值.为此我使用`$.removeCookie("activeDivId");`了。但它不能正常工作。我该如何解决这个问题？html代码是

```
 <div class="menuBar">
            <div id="divHome" class="menuHeader ui-corner-top">
                <span><a href="#" onclick="Home()" id="home">Home</a></span>
            </div>
            <div id="divNewTransaction" class="menuHeader ui-corner-top">
                <span><a href="#" onclick="NewTransaction()" >New Transaction</a></span>
            </div>
</div> 
```

javascript文件是

```
 $(document).ready(function () {
                $(".menuHeader").click(function () { 
                $.removeCookie("activeDivId");
                $.cookie("activeDivId", this.id); });
                alert(document.cookie);
                var activeDivId = $.cookie("activeDivId") ? $.cookie("activeDivId") : "divHome";
                $("#" + activeDivId).addClass("menuHeaderActive");
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T04:56:37.757

```
$(document).ready(function () {

    //for debugging purpose, so that you can see what is in the menu cookie
    $('#debug').html('Cookie Content : ' + readCookie('menu'));

    //if cookie menu exists
    if (readCookie('menu')) {

        //loop through the menu item
        $('#menu a').each(function () {
            //match the correct link and add selected class to it
            if ($(this).html() == readCookie('menu')) $(this).addClass('selected');
        }); 
    }

    $('#menu a').click(function () {

        //Set the cookie according to the text in the link
        createCookie('menu', $(this).html(),1);
    });

});

/* Cookie Function */
function createCookie(name, value, days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T08:37:51.297

您可以使用此方法代替 jquery 方法

```
 function createCookie(name, value, days) {
          if (days) {

              var date = new Date();
              date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
              var expires = "; expires=" + date.toGMTString();
          }
          else var expires = "";

          //var fixedName = '';
       /// name =name;

          document.cookie = name + "=" + value + expires + "; path=/";
          this[name] = value;
      }

      function readCookie(name) {

          var nameEQ = name + "=";
          var ca = document.cookie.split(';');
          for (var i = 0; i < ca.length; i++) {
              var c = ca[i];
              while (c.charAt(0) == ' ') c = c.substring(1, c.length);
              if (c.indexOf(nameEQ) == 0) 
              return c.substring(nameEQ.length, c.length);

          }
          return c;
      }

      function eraseCookie(cookiename) {
          this.createCookie(cookiename, '', -1);
          this[cookiename] = undefined;
         // Ecookie(cookiename);

           } 
```

# python - pygame：检测操纵杆断开连接，并等待它重新连接

> ID：15802831
> 
> 赞同：5
> 
> 时间：2013-04-04T04:57:37.567
> 
> 标签：python, pygame, joystick, gamepad

我正在使用一个`pygame.joystick.Joystick`对象，并且希望能够打印一条消息，要求用户在拔下 USB 操纵杆后重新连接它。

现在我有（大致）：

```
js = pygame.joystick.Joystick(0)
#... some game code and stuff
pygame.joystick.quit()
pygame.joystick.init()
while pygame.joystick.get_count() == 0:
    print 'please reconnect joystick'
    pygame.joystick.quit()
    pygame.joystick.init()

js = pygame.joystick.Joystick(0)
js.init() 
```

但它没有正确重新连接，不知道它到底在做什么，但这绝对是错误的。这方面的任何方向都会有所帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-12T17:12:37.490

不得不启动旧的 xbox 垫，但我做了一个检查断开连接的功能，似乎工作正常：

```
discon = False
def check_pad():
    global discon
    pygame.joystick.quit()
    pygame.joystick.init()
    joystick_count = pygame.joystick.get_count()
    for i in range(joystick_count):
        joystick = pygame.joystick.Joystick(i)
        joystick.init()
    if not joystick_count: 
        if not discon:
           print "reconnect you meat bag"
           discon = True
        clock.tick(20)
        check_pad()
    else:
        discon = False 
```

所以如果你在你的主循环中运行这个函数，它会继续运行，直到它得到一个操纵杆连接。它适用于我发现的小测试代码：

[http://programarcadegames.com/python_examples/show_file.php?file=joystick_calls.py](http://programarcadegames.com/python_examples/show_file.php?file=joystick_calls.py)

还发现：

[http://demolishun.net/?p=21](http://demolishun.net/?p=21)

我从哪里偷来的想法，他没有任何蹩脚的代码示例

最后，因为您应该始终检查文档：

[http://www.pygame.org/docs/ref/joystick.html](http://www.pygame.org/docs/ref/joystick.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-02T20:20:39.693

我设法让我的工作与 Noelkd 的建议一起工作，但我遇到了 Ryan Haining 描述的类似问题

> 起初我有类似的东西，但它不起作用，因为它在所有退出和初始化时都失去了对游戏手柄动作的跟踪。这最初用于检查控制器是否已插入，但不能在运行时有效检查

我也有这个问题。我认为你是对的，调用`quit`太频繁并没有给键盘足够的时间来重新初始化——至少在我的电脑上是这样。我发现如果您将呼叫限制为每秒，它会起作用。

它可能会导致玩家输入暂时断开连接，因此任何对 a 的调用`joystick`都不起作用。

如果您检测到有一段时间没有输入（比如 5 秒或其他时间），最好只运行此代码。这样你就不会`quit`在用户实际使用设备时

```
import pygame
import time

INACTIVITY_RECONNECT_TIME = 5
RECONNECT_TIMEOUT = 1

class ControllerInput():
  def __init__(self):
    pygame.joystick.init()
    self.lastTime = 0
    self.lastActive = 0

  def getButtons(self, joystickId):
    joystick = pygame.joystick.Joystick(joystickId)
    joystick.init()

    buttons = {}

    for i in range(joystick.get_numbuttons()):
      buttons[i] = joystick.get_button(i)
      if buttons[i]:
        self.lastActive = time.time()

    return buttons

  def hasController(self):
    now = time.time()
    if now - self.lastActive > INACTIVITY_RECONNECT_TIME and now - self.lastTime > RECONNECT_TIMEOUT:
      self.lastTime = now
      pygame.joystick.quit()
      pygame.joystick.init()

    return pygame.joystick.get_count() > 0 
```

用法

```
# ... some constructor
controller = ControllerInput()

# ... game loop
if not controller.hasController():
  # handle disconnect
  print('reconnect')
  return

buttons = controller.getButtons(0)

if buttons[0]:
  # buttons[0] was pressed! 
```

# iphone - iphone中Core数据的XML生成和解析

> ID：15802835
> 
> 赞同：3
> 
> 时间：2013-04-04T04:58:06.760
> 
> 标签：iphone, ios, objective-c, xml, xml-parsing

我正在创建一个由几个 UITableViewControllers 组成的简单 iOS 应用程序。视图控制器中显示的信息将来自一个 xml 文件（我将包含在项目的资源中或直接来自 Dropbox 或 iCloud）。xml 文件的内容将基于用户输入。

几点注意事项：

数据是基于用户输入的，不是静态的。理想情况下，应用程序会将数据从 xml 文件加载到“核心数据”中。该应用程序的每次额外运行只会从一些核心数据源（我还不完全熟悉）中提取数据，而不是从文本文件中重新加载它。

现在我正在使用 XMLwriter 生成简单的 xml 文件

请指导我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T07:05:28.267

这里最好的模式似乎是使用 XML 文件来“播种”您的 Core Data 数据库。这只是第一次发生。之后，您将不再使用您的 XML 文件，而只需更新和同步您的核心数据存储。

这比生成 XML 要好得多。XML 文件（如属性列表）的问题在于，您必须为每个小的增量更改编写整个文件。如果您同步到某个在线商店，这可能需要太多时间才能实用。

假设您可以从 XML 文件中获取基础对象，只需遍历对象并一一插入 Core Data。

```
for (NSDictionary *dict in xmlArray) {
   Entity *newObject = [NSEntityDescription 
        insertNewObjectForEntityForName:@"Entity"
                 inManagedObjectContext:self.managedObjectContext]; 
   newObject.attribute1 = [dict objectForKey:@"attribute1"];
   newObject.attribute2 = [dict objectForKey:@"attribute2"];
   //  etc...
}
[self.managedObjectContext save:nil]; 
```

# zend-framework - Zend 视图过滤器是什么？

> ID：15802838
> 
> 赞同：7
> 
> 时间：2013-04-04T04:58:26.470
> 
> 标签：zend-framework, zend-view

Zend 视图过滤器是什么？我在 ZF1 文档[http://framework.zend.com/manual/1.12/en/zend.view.introduction.html](http://framework.zend.com/manual/1.12/en/zend.view.introduction.html)和`Zend_View`代码中看到了它们，但我找不到它们的解释。

也许是为了支持其他具有过滤器的模板系统？在那种情况下，过滤器在这些模板系统中做了什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T05:33:00.180

这是 Zend 视图过滤器的示例：

[http://dev.bigace.org/api/3.0/Bigace_Zend/View_Filter/Bigace_Zend_View_Filter_ObfuscateMailto.html](http://dev.bigace.org/api/3.0/Bigace_Zend/View_Filter/Bigace_Zend_View_Filter_ObfuscateMailto.html)

它过滤找到的 mailto 链接并对其进行混淆处理。

Zend 视图过滤器在将已渲染的 phtml 文件（= html 代码）发送到客户端之前对其进行处理。

它是一个可用于 Zend View 输出的 Zend_Filter。

这是另一个示例，其中的代码来自：

[http://www.phpgangsta.de/zend_view-output-filter-whitespaces-aus-html-entfernen](http://www.phpgangsta.de/zend_view-output-filter-whitespaces-aus-html-entfernen)

过滤器类（过滤来自 html 的空格 = 更少的代码发送）：

```
<?php
class App_View_Filter_Minify implements Zend_Filter_Interface
{
    public function filter($string)
    {
        return preg_replace(
            array('/>\s+/', '/\s+</', '/[\r\n]+/'),
            array('>', '<', ' '),
            $string
        );
    }
} 
```

然后将过滤器添加到视图中：

```
/**
 * Add Output filters to View
 *
 * @return void
 */
protected function _initViewFilter()
{
    $view = $this->getResource('view');
    $view->addFilterPath('App/View/Filter', 'App_View_Filter_')
        ->addFilter('Minify');
} 
```

# java - 使用 Http Client 请求返回内容类型为“application/vnd.ms-excel”的 jsp 页面

> ID：15802839
> 
> 赞同：0
> 
> 时间：2013-04-04T04:58:31.207
> 
> 标签：java, spring, spring-mvc

我有一个请求处理程序，它返回内容类型为“application/vnd.ms-excel”id 的 jsp 页面。

我有另一个控制器，我使用 HttpClient 调用了上面的控制器，但我无法下载文件

代码如下：

返回具有 excel 作为内容类型的 jsp 文件的控制器

```
@RequestMapping(value = {"InvoiceGeneration/generatePDF"}, method=RequestMethod.GET)
                public String generatePDF(Model model)
                {

                } 
```

使用 Http Client 调用上述控制器的控制器

```
 @RequestMapping(value = {"InvoiceGeneration/generateMonthPDF"}, method=RequestMethod.GET)
                    @ResponseBody
                public  HttpEntity generateMonthPDF(Model model){

                        DefaultHttpClient httpClient = new DefaultHttpClient();
                        HttpGet getRequest = new HttpGet("http://localhost:8080/BillingInvoice/InvoiceGeneration/generatePDF?invoiceNumber=10");
                        getRequest.addHeader("Content-Type", "application/vnd.ms-excel");
                        getRequest.addHeader("Content-Disposition","attachment; filename=\""+"kedar.xls"+"\"");

                            HttpResponse response = httpClient.execute(getRequest);

                        return response.getEntity();

                    } 
```

如何获得excel文件下载的响应？？？？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:28:41.643

必须设置以下响应

```
 response.setContentType("application/octet-stream");
         or 
         response.setContentType("application/vnd.ms-excel");

         response.setHeader("Content-disposition", "inline;filename=" + fileName); 
```

# jquery - 如果 Enter 命中，则 jQuery 调用函数

> ID：15802858
> 
> 赞同：15
> 
> 时间：2013-04-04T05:00:50.087
> 
> 标签：jquery

我在按钮点击代码上调用一个函数被击中：

```
<input type="button" value="Search" id="go" />

$("#go").click(function ()
{
...
}); 
```

现在我捕捉到用户是否`enter`通过此功能从键盘敲击键：

```
$("#s").keypress(function(e) {
    if(e.which == 13) {
        alert('You pressed enter!');
    }
}); 
```

但我怎么能打电话

```
$("#go").click(function ()
    {
    ...
    }); 
```

如果用户点击`enter`键和点击**GO**按钮？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-04T05:02:50.170

显式触发点击处理程序：

```
$("#s").keypress(function(e) {
    if(e.which == 13) {
        alert('You pressed enter!');
    $("#go").click();
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T05:03:25.407

你可以使用`keyup`事件：

```
$("#s").keyup(function(e) {
    if (e.which == 13) {
        $("#go").click();
    }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T05:20:44.547

试试这个：

```
 $("#s").keypress(function(e) {

         if(e.which == 13) {
             e.preventDefault();
             $("#go").click();
          }
    }); 
```

[小提琴演示](http://jsfiddle.net/jRzkD/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T05:14:43.257

同时使用点击事件和鼠标事件：我害怕，你没有在那里提到文本框，所以我想你都在按钮上做。

```
$("#go").keypress(function(e) {

  //Event.which == 1 mouse click left and event. which == 13 is enter key.
   if(e.which == 13 || e.which == 1 ) {
      alert('You pressed enter or clicked left mouse');
   } 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-11T10:03:59.107

```
 $(document).on("keyup", "#s", function (e) {

      if (e.which == 13) // the enter key ascii code
        {
         alert('You pressed enter!');

         $(document).on("click", "#go", function (e) {
             alert('button clicked!');
          }
        }

  }); 
```

# iphone - 无法显示从照片库中挑选的图像

> ID：15802861
> 
> 赞同：1
> 
> 时间：2013-04-04T05:00:58.930
> 
> 标签：iphone, objective-c, uiview, uiimage, uiimagepickercontroller

我使用图像选择器从照片库中选择照片。当我单击按钮时，它会显示照片库。但是当我单击特定图像时，它会关闭 modalView 并且图像不会加载到查看。

代码：

```
-(void)showcamera:(id)sender{

    UIImagePickerController *imagePickerController = [[UIImagePickerController alloc]init];
    imagePickerController = [[UIImagePickerController alloc] init];
    imagePickerController.delegate = self;
    imagePickerController.sourceType =  UIImagePickerControllerSourceTypePhotoLibrary;

    [self presentModalViewController:imagePickerController animated:YES];

}

- (void)imagePickerController:(UIImagePickerController *)picker
        didFinishPickingImage:(UIImage *)image
                  editingInfo:(NSDictionary *)editingInfo
{

    // Dismiss the image selection, hide the picker and

    //show the image view with the picked image

    [picker dismissModalViewControllerAnimated:YES];
    UIImage *newImage = image;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:03:30.940

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    imgPicked = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
    {
        [imagePickerController dismissModalViewControllerAnimated:YES];
    }
} 
```

**在 .h 中声明**

```
UIImage *imgPicked; 
```

在`ViewDidLoad`

```
imgPicked = [[UIImage alloc]init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:09:51.673

使用此代码：

在 .h 文件中

```
{
UIImageView *newImage;
    UIImagePickerController *imagePicker;
} 
```

在 .m 文件中

```
- (void)imageTaped:(UITapGestureRecognizer *)tapGesture {
    imagePicker=[[UIImagePickerController alloc]init];

    imagePicker.delegate = self;

    imagePicker.allowsEditing =NO;

    imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

    [self presentModalViewController:imagePicker animated:YES];

}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker{
    //release picker
    [picker dismissModalViewControllerAnimated:YES];
}
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info{
    //set image

    newImage = [[UIImageView alloc] initWithImage:[info objectForKey:UIImagePickerControllerOriginalImage]];
    [self.view addSubview:mewImage];
    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:18:48.877

最好的方法是将您添加`Image`到`UIImageView`,

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
     UIImageView *ImgView = [[UIImageView alloc] initWithFrame:CGRectMake(@"As U Want")];
     ImgView.image = image;
    [self.View addSubview: ImgView];

    [picker dismissModalViewControllerAnimated:YES];
} 
```

# actionscript-3 - 在移动设备上运行 AIR Mobile AS3 App？

> ID：15802864
> 
> 赞同：0
> 
> 时间：2013-04-04T05:01:18.917
> 
> 标签：actionscript-3, flashdevelop

我使用 Flash 开发人员并创建 AIR Mobile AS3 应用程序，我想知道如何将应用程序运行时间从桌面更改为我的移动设备？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:06:01.443

在 flash builder 中，您必须设置运行/调试配置，如下所示： ![在此处输入图像描述](https://i.stack.imgur.com/SB3lC.png)

您必须选择平台（Android、BBRY 等）和“在设备上”。例如，如果您有 Android 设备，请确保其已连接并处于开发模式。它应该工作，但你会找到很多帮助。

# css - CSS 翻转链接无法正常工作

> ID：15802865
> 
> 赞同：0
> 
> 时间：2013-04-04T05:01:21.083
> 
> 标签：css

我在此页面上看到了一个翻转链接：[http](http://www.webdesignerdepot.com/2012/11/40-essential-wordpress-plugins/) ://www.webdesignerdepot.com/2012/11/40-essential-wordpress-plugins/ （参见翻转链接：Jetpack、Jetpack lite、socialable 等）但我无法让它工作：

HTML：

```
<a class="roll-link"><span>This is a link</span></a>

.roll-link span {
   display: block;
   color: #DD4D42;
   position: relative;
   padding: 0 2px;
   -webkit-transition: all 400ms ease;
   -moz-transition: all 400ms ease;
   -ms-transition: all 400ms ease;
   transition: all 400ms ease;
   -webkit-transform-origin: 50% 0%;
   -moz-transform-origin: 50% 0%;
   -ms-transform-origin: 50% 0%;
   transform-origin: 50% 0%;
   -webkit-transform-style: preserve-3d;
   -moz-transform-style: preserve-3d;
   -ms-transform-style: preserve-3d;
   transform-style: preserve-3d;
} 
```

看我的[小提琴](http://jsfiddle.net/CNSWn/6/)

```
.roll-link:hover span {
   background: #DD4D42;
   -webkit-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
   -moz-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
   -ms-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
   transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:25:25.567

您缺少一些样式，包括那些用于基本`.roll-link`元素和用于`.roll-link:after`显示链接内容的样式。这是一个具有工作效果的jsFiddle：http: [//jsfiddle.net/CNSWn/7/](http://jsfiddle.net/CNSWn/7/)

这是一个非常聪明的效果，值得花一些时间研究他们使用该`data-title`属性在悬停时显示链接的第二个“侧面”的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:37:17.477

干得好：

**HTML：**

```
<a class="roll-link external"><span data-title="Jetpack">Jetpack</span></a> 
```

**CSS：**

```
a {
    cursor: pointer;
    color: #dd4d42;
    font-weight: bold;
    text-decoration:none;
}

.roll-link {
    display: inline-block;
    overflow: hidden;
    vertical-align: top;
    -webkit-perspective: 600px;
    -moz-perspective: 600px;
    -ms-perspective: 600px;
    perspective: 600px;
    -webkit-perspective-origin: 50% 50%;
    -moz-perspective-origin: 50% 50%;
    -ms-perspective-origin: 50% 50%;
    perspective-origin: 50% 50%;     
}

.roll-link span {
    display: block;
    position: relative;
    padding: 0 2px;
    -webkit-transition: all 400ms ease;
    -moz-transition: all 400ms ease;
    -ms-transition: all 400ms ease;
    transition: all 400ms ease;
    -webkit-transform-origin: 50% 0%;
    -moz-transform-origin: 50% 0%;
    -ms-transform-origin: 50% 0%;
    transform-origin: 50% 0%;
    -webkit-transform-style: preserve-3d;
    -moz-transform-style: preserve-3d;
    -ms-transform-style: preserve-3d;
    transform-style: preserve-3d;
}

.roll-link:hover span {
    background: #DD4D42;    
    -webkit-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
    -moz-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
    -ms-transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
    transform: translate3d( 0px, 0px, -30px ) rotateX( 90deg );
}

.roll-link span:after {
    content: attr(data-title);
    display: block;
    position: absolute;
    left: 0;
    top: 0;
    padding: 0 2px;
    color: #fff;
    background: #DD4D42;
    -webkit-transform-origin: 50% 0%;
    -moz-transform-origin: 50% 0%;
    -ms-transform-origin: 50% 0%;
    transform-origin: 50% 0%;
    -webkit-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
    -moz-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
    -ms-transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
    transform: translate3d( 0px, 105%, 0px ) rotateX( -90deg );
} 
```

**演示：http:** [//jsfiddle.net/pR4sg/](http://jsfiddle.net/pR4sg/)

# javascript - 在 js 或 jquery 中拆分变量

> ID：15802866
> 
> 赞同：0
> 
> 时间：2013-04-04T05:01:30.300
> 
> 标签：javascript, jquery, variables, split

嗨，我有一些这样的变量：

```
var a = Base-Shirt_Stripe.jpg
var b = Closed-Flatknit-Collar_Stripe.png 
```

我如何创建两个新的变量，例如：

```
var c = Base-Shirt
var d = Stripe 
```

或者

```
var e = Closed-Flatknit-Collar
var f = Stripe 
```

基本上在`_`删除`_`和删除扩展名处拆分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:05:48.670

```
//for example, we take a
var a = 'Base-Shirt_Stripe.jpg';

//then we take the part of a before the dot
//and split between `_`
//split returns an array
var split = a.substring(0,a.indexOf('.'))
             .split('_');

//split is an array, so we use indices to indicate which
console.log(split[0]); //Base-Shirt
console.log(split[1]); //Stripe 
```

[样品在这里](http://jsfiddle.net/y9YYW/)。你可以为你的`b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:06:51.957

您需要先将它们设为字符串，然后使用[`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)将字符串拆分为不同部分的数组。

[jsFiddle](http://jsfiddle.net/KJqqj/1/)

```
var a = "Base-Shirt_Stripe.jpg"
var b = "Closed-Flatknit-Collar_Stripe.png"

var aSplit = a.substr(0, a.lastIndexOf('.')).split('_');

var c = aSplit[0];
var d = aSplit[1];

var bSplit = b.substr(0, b.lastIndexOf('.')).split('_');

e = bSplit[0];
f = bSplit[1]; 
```

[`String.lastIndexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)您还可以使用and将扩展名的删除带入它自己的函数中[`String.substr()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/substr)。

```
function removeExtension(file) {
    return file.substr(0, file.lastIndexOf('.'));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:12:14.333

也许你可以这样做

```
var a = "Base-Shirt_Stripe.jpg"
var k = a.replace(/(\.\w*)$/g, "").split("_");

alert(k[0]);
alert(k[1]); 
```

这是[小提琴](http://jsfiddle.net/VtdpV/1/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-04T05:05:39.623

```
//Javascript Split can divide it into parts. Javascript Split return type is array.'

 //e g.

var a = Base-Shirt_Stripe.jpg
var parts = a.split('_');

 console.log(parts[0]);
    //output
    " Base-Shirt "

 //parts[0] contain base-shirt and    parts[1]   contain Stripe.jpg. 
```

# wso2 - 调用 Java 程序

> ID：15802867
> 
> 赞同：0
> 
> 时间：2013-04-04T05:01:35.693
> 
> 标签：wso2

我们可以使用调用活动从 BPEL 流程调用 java 程序吗？我正在寻找类似于调用外部 Web 服务的东西。但是我需要调用一个 java 程序而不是 web 服务。

问候-阿尔宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T18:52:07.963

是的，这可以通过 WSO2 业务流程服务器来完成。样品位置：

[1] [https://svn.wso2.org/repos/wso2/people/denis/org.wso2.carbon.bpel.extension.activity.sample/](https://svn.wso2.org/repos/wso2/people/denis/org.wso2.carbon.bpel.extension.activity.sample/)

您也可以参考以下文章，它提供了有关如何编写扩展活动来实现此目的的更多信息。

[2] [http://docs.wso2.org/wiki/display/BPS300/BPEL+可扩展性](http://docs.wso2.org/wiki/display/BPS300/BPEL+Extensibility)

[3] [http://warunapw.blogspot.com/2009/11/how-to-write-bpel-extension-for-wso2.html](http://warunapw.blogspot.com/2009/11/how-to-write-bpel-extension-for-wso2.html)

[4] [http://ddweerasiri.blogspot.com/2012/04/ws-bpel-20-extension-activity.html](http://ddweerasiri.blogspot.com/2012/04/ws-bpel-20-extension-activity.html)

谢谢

蒂利尼

# c - 为什么这个指针被转换为 char 而不是任何其他的？

> ID：15802872
> 
> 赞同：-1
> 
> 时间：2013-04-04T05:02:03.420
> 
> 标签：c

在实现我自己的 sizeof 运算符时，我遇到了一个如下所述的示例。

```
#define my_sizeof(type) (char *)(&type+1)-(char*)(&type)
int main()
{
    double x;
    printf("%d", my_sizeof(x));
    getchar();
    return 0;
} 
```

我不确定他们为什么在#define 中使用 (char *) 而不是任何其他类型转换。我需要知道所述语法的确切意义。有人可以帮助我理解这个..吗？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-04T05:18:41.183

要理解它，你需要知道，当你写

```
double d[2];
double *p = d;
p = p + 1;      p is now pointing to the next double i.e. &d[1] 
```

在内存`p`中已将`sizeof(double)`字节向前移动

如果将 p 视为字符指针，则可以获得偏移量已更改的字节数：

```
double d[2];
double *p = d;
char* start = (char*)p; 
p = p + 1;
char* end = (char*)p; 
```

现在`end-start`以字节（字符） IOW 给出偏移量`sizeof(double)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T18:19:23.777

在 C 中，`sizeof char`是（根据定义）1。它们转换`char *`为能够减去指针以获得指向的对象的大小。

这将主要工作，但如果 AFAIU 不在数组中，则不顾一切地“指向下一个对象”并不总能保证正常工作。此外，数组中具有所需填充的对象的大小不一定是对象的大小。

无理取闹。只需使用`sizeof`. `

# actionscript-3 - fl.control.Button 未正确调整其容器的大小

> ID：15802873
> 
> 赞同：1
> 
> 时间：2013-04-04T05:02:04.470
> 
> 标签：actionscript-3, flash

我有一个`fl.controls.Button`我设置的大小（w：300，h：200）。然后我将此按钮添加到一个空的“容器”精灵。据我了解，在查看显示对象的宽度/高度参数时，会考虑显示对象的子级。但这对于按钮对象似乎并不完全正确？

例如：

```
 var container:Sprite = new Sprite();
        trace(container.width, container.height); // 0 0
        var btn:Button = new Button();
        btn.setSize(300, 200);
        this.addChild(container);
        container.addChild(btn);

        trace(btn.width, btn.height);  // 300 200
        trace(container.width, container.height); // 100 100  - Why??

        var rectangle:Sprite = new Sprite();
        rectangle.graphics.drawRect(0, 0, 500, 400);
        container.addChild(rectangle);
        trace(container.width, container.height); // 500 400 
```

为什么容器没有被赋予与按钮相同的宽度/高度值，因为它是精灵内部唯一的东西。同样，如果我改为写`setSize(40,40)`，则容器的大小仍为 100x100。我很难确定里面有很多按钮的容器的垂直大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:24:32.987

我在使用包含一组形状的 Sprite 时遇到过类似的问题，我通过将该 Sprite 添加到舞台，然后才查询它的大小来解决它。您可以将精灵添加到舞台，查询它的大小并立即将其从舞台上移除，这样它就不会显示，但它的大小将是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:42:03.223

问题出在您的 Button 组件中。fl.control 组件的大小和比例有一些“魔力”。尽可能避免使用它们。尝试使用 flash.display.SimpleButton 而不是 fl.controls.Button。

在这种确切的情况下，您正在尝试缩放零大小的元素（因为 fl.controls.Button 的宽度和高度仅取决于它的背面大小。因此，创建 fl.controls.Button 的新对象会为您提供一个 0 的元素宽度和高度）。然后你将它的 w/h 设置为 300/200，但实际上你什么都不做，你只设置按钮的背面大小（没有背面，所以你将 0 缩放到无穷大仍然得到 0）。如您所知，容器的大小取决于它的孩子。而且您只有 1 个大小为 0/0 的孩子（您只是覆盖了按钮的 w/h 可见属性，但并没有真正将 w/h 设置为您的值）。这样，您的容器必须是 0/0，但它是 100/100，对吗？之所以如此，是因为 fl.controls 的 REAL 最小尺寸。事实上，每个 fl.controls 元素都不少于 100/100，即使您在跟踪时得到 0/0 w/h。

所以，我可以建议你尽可能避免使用 fl.controls，它会为你节省大量时间 =)

这是一些代码：

```
var btn:Button = new Button();
trace(btn.width, btn.height, btn.scaleX, btn.scaleY); //0 0 NaN NaN
btn.width = 300;
btn.height = 200;

trace(btn.width, btn.height, btn.scaleX, btn.scaleY);  //300 200 Infinity Infinity 
```

# citrix - 如何从来宾操作系统获取 Citrix XenServer VM 的唯一 ID？

> ID：15802876
> 
> 赞同：2
> 
> 时间：2013-04-04T05:02:31.123
> 
> 标签：citrix, xen

假设我有多个同名的 Citrix XenServer VM。或者，名字是垃圾，没关系。

从其中一台 VM 上的来宾操作系统中，我如何以编程方式确定 VM 的 ID？我希望 VM 的 UUID 应该作为来宾操作系统的 BIOS 序列号，但事实并非如此。到处找，注册表，WMI，你的名字。

现在，我不只使用主机名的原因是我可能有多台具有相同主机名的机器（例如，一个带有虚拟机副本的完整实验室）。

使用 XenServer 5.x 和 6.x。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-10T07:45:21.407

啊，您可以在 Xen Server v6.x 中以这种方式（如我所愿）从来宾那里获取 UUID：BIOS 的序列号。对于 Windows 来宾，您可以使用 WMI 在本地或远程查询。我怀疑这个 ID-as-BIOS-serial 仅在 Xen Server v5.6 中引入。

对于早期版本，您可以通过运行旧客户端工具从来宾获取 UUID。对于 Windows 来宾，可执行文件是 xenstore_client.exe，使用“read vm”参数运行它。它的输出是一个字符串，正斜杠之后的部分是 UUID。请注意，您可以使用 PSEXEC 远程执行 xenstore_client.exe。

# linq - 如何使用列表框中的数据设置页面导航？

> ID：15802877
> 
> 赞同：0
> 
> 时间：2013-04-04T05:02:31.657
> 
> 标签：linq, windows-phone-7, c#-4.0, linq-to-xml

嗨，我正在使用下面给出的 xaml 文件。我有来自列表框中的列表和项目源。我想要将所选数据的页面导航到其他页面。

```
<ListBox x:Name="NotchsList11"  Grid.ColumnSpan="2"
       Margin="0,0,0,0" Grid.Row="3" HorizontalAlignment="left" Width="720"  Grid.RowSpan="2">
    <ListBox.ItemTemplate>
        <DataTemplate>
              <StackPanel Margin="0,0,0,0"  Grid.ColumnSpan="3" x:Name="ControlsPanel"
                    Grid.Column="0"
                    Height="215"
                    VerticalAlignment="Top">
                    <StackPanel Background="#eb2427" Orientation="Horizontal">
                        <TextBlock Grid.Row="1"  FontFamily="Calibri" FontSize="34" FontWeight="Bold"  FontStyle="Normal" Margin="10,0,0,0"
                            Text="{Binding name}"
                               />               
                    </StackPanel>
                    <StackPanel VerticalAlignment="Top" Width="Auto">
                          <ListBox ItemsSource="{Binding Images}" SelectionChanged="NotchsList11_SelectionChanged"></ListBox>
               </StackPanel>
             </StackPanel>
        </ScrollViewer>         
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
</ListBox> 
```

我的 xaml.cs 代码

```
private void NotchsList11_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
   Notch selectedItemData  = NotchsList11.SelectedItem as Notch;
    if (selectedItemData != null)
    {
        NavigationService.Navigate(new Uri(string.Format("/Test.xaml?parameter={0}",selectedItemData.articleid), UriKind.Relative));
    }
} 
```

我尝试了这段代码，但选择的项目数据为空。我在这个问题上苦苦挣扎了很长时间，所以请任何人给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T09:35:12.917

在您的代码中，SelectionChanged="NotchsList11_SelectionChanged" 出现在图像列表中，而不是 NotchsList11 列表中。请看修改后的代码：

```
<ListBox x:Name="NotchsList11"  Grid.ColumnSpan="2"  SelectionChanged="NotchsList11_SelectionChanged"
   Margin="0,0,0,0" Grid.Row="3" HorizontalAlignment="left" Width="720"  Grid.RowSpan="2">
<ListBox.ItemTemplate>
    <DataTemplate>
          <StackPanel Margin="0,0,0,0"  Grid.ColumnSpan="3" x:Name="ControlsPanel"
                Grid.Column="0"
                Height="215"
                VerticalAlignment="Top">
                <StackPanel Background="#eb2427" Orientation="Horizontal">
                    <TextBlock Grid.Row="1"  FontFamily="Calibri" FontSize="34" FontWeight="Bold"  FontStyle="Normal" Margin="10,0,0,0"
                        Text="{Binding name}"
                           />               
                </StackPanel>
                <StackPanel VerticalAlignment="Top" Width="Auto">
                      <ListBox ItemsSource="{Binding Images}" IsHitTestVisible="False"/>
           </StackPanel>
         </StackPanel>
    </ScrollViewer>         
  </StackPanel>
</DataTemplate> 
```

# go - Go 中惯用的快速排序

> ID：15802890
> 
> 赞同：11
> 
> 时间：2013-04-04T05:04:02.867
> 
> 标签：go, quicksort

我正在查看`Go`，并试图找到经典算法的惯用实现来感受该语言。

我选择快速排序是因为我对数组与切片、就地与复制交易特别感兴趣。在我解决了一些概念之后，我想编写一个并行 impl。

有人可以告诉我快速排序的惯用实现`Go`吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-04T05:46:02.153

好吧，我结束了这个。我不知道`Go`说它是*惯用*的，但我使用了切片、单行交换和`range`子句。对我来说写的信息量很大，所以我想我应该分享一下。

```
func qsort(a []int) []int {
  if len(a) < 2 { return a }

  left, right := 0, len(a) - 1

  // Pick a pivot
  pivotIndex := rand.Int() % len(a)

  // Move the pivot to the right
  a[pivotIndex], a[right] = a[right], a[pivotIndex]

  // Pile elements smaller than the pivot on the left
  for i := range a {
    if a[i] < a[right] {
      a[i], a[left] = a[left], a[i]
      left++
    }
  }

  // Place the pivot after the last smaller element
  a[left], a[right] = a[right], a[left]

  // Go down the rabbit hole
  qsort(a[:left])
  qsort(a[left + 1:])

  return a
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T14:46:10.060

查看标准库中[sort 包](http://golang.org/pkg/sort/)的源代码，特别是[sort.Sort](http://golang.org/src/pkg/sort/sort.go?s=4375:4400#L179)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-04T16:24:28.043

简单地从一种语言（例如 C）中获取代码，然后简单地将其转换为另一种语言（例如 Go），很少会产生惯用的代码。

> Go[排序包](http://golang.org/pkg/sort/)[——sort.c](https://code.google.com/p/go/source/browse/src/pkg/sort/sort.go)源文件
> 
> ```
> func quickSort(data Interface, a, b, maxDepth int) {
>     // . . .
>     // Avoiding recursion on the larger subproblem guarantees
>     // a stack depth of at most lg(b-a). 
>     // . . . 
> } 
> ```

此评论暗示实施递归解决方案可能不是最佳策略。Go 使用短堆栈。

这是一个迭代快速排序解决方案。

```
package main

import (
    "fmt"
    "math/rand"
    "time"
)

type Item int
type Items []Item

// Algorithms and Data Structures, N. Wirth
// http://www.ethoberon.ethz.ch/WirthPubl/AD.pdf
// 2.3.3 Partition Sort, Quicksort, NonRecursiveQuickSort.
func qSort(a Items) {
    const M = 12
    var i, j, l, r int
    var x Item
    var low, high = make([]int, 0, M), make([]int, 0, M)

    low, high = append(low, 0), append(high, len(a)-1)
    for { // (*take top request from stack*)
        l, low = low[len(low)-1], low[:len(low)-1]
        r, high = high[len(high)-1], high[:len(high)-1]
        for { // (*partition a[l] ... a[r]*)
            i, j = l, r
            x = a[l+(r-l)/2]
            for {
                for ; a[i] < x; i++ {
                }
                for ; x < a[j]; j-- {
                }
                if i <= j {
                    a[i], a[j] = a[j], a[i]
                    i++
                    j--
                }
                if i > j {
                    break
                }
            }
            if i < r { // (*stack request to sort right partition*)
                low, high = append(low, i), append(high, r)
            }
            r = j // (*now l and r delimit the left partition*)
            if l >= r {
                break
            }
        }
        if len(low)+len(high) == 0 {
            break
        }
    }
}

func main() {
    nItems := 4096
    a := make(Items, nItems)
    rand.Seed(time.Now().UnixNano())
    for i := range a {
        a[i] = Item(rand.Int31())
    }
    qSort(a)
    for i := range a[1:] {
        if a[i] > a[i+1] {
            fmt.Println("(* sort error *)")
        }
    }
} 
```

显然，还有更多工作要做。例如，改进分区算法和更改`qsort`函数签名以使用 Go`interface`类型。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-14T13:38:59.810

我现在正在学习 go 并决定将 qsort 实现为一项简单的任务，使用通道和并行性，因为在 qsort 中，您可以在旋转数组后同时对两半进行排序。我最终得到了这样的结果：

```
package main

import (
    "fmt"
    "math/rand"
    "time"
)

func qsort_pass(arr []int, done chan int) []int{
    if len(arr) < 2 {
        done <- len(arr)
        return arr
    }
    pivot := arr[0]
    i, j := 1, len(arr)-1
    for i != j {
        for arr[i] < pivot && i!=j{
            i++
        }
        for arr[j] >= pivot && i!=j{
            j--
        }
        if arr[i] > arr[j] {
            arr[i], arr[j] = arr[j], arr[i]
        }
    }
    if arr[j] >= pivot {
        j--
    }
    arr[0], arr[j] = arr[j], arr[0]
    done <- 1;

    go qsort_pass(arr[:j], done)
    go qsort_pass(arr[j+1:], done)
    return arr
}

func qsort(arr []int) []int {
    done := make(chan int)
    defer func() {
        close(done)
    }()

    go qsort_pass(arr[:], done)

    rslt := len(arr)
    for rslt > 0 {
        rslt -= <-done;
    }
    return arr
}

func main() {
    fmt.Println("About to sort.")
    rand.Seed(time.Now().UTC().UnixNano())
    arr_rand := make([]int, 20)
    for i := range arr_rand {
        arr_rand[i] = rand.Intn(10)
    }
    fmt.Println(arr_rand)
    qsort(arr_rand)
    fmt.Println(arr_rand)
} 
```

这里有很大的改进空间，比如使用 go-routines 池而不是为每个分区生成一个新的 go-routine，如果 len(arr) 足够小或使用 []int 以外的其他东西，则使用插入排序进行排序。但总的来说，它看起来是一个不错的起点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-08T11:15:43.133

可以使用一些想法。

```
func quickSort(arr []int) []int {
    sort(arr, 0, len(arr) - 1)

    return arr
}

func sort(arr []int, low, high int) {
    if low < high {
        pi := partition(arr, low, high)
        sort(arr, low, pi-1)
        sort(arr, pi+1, high)
    }
}

func partition(arr []int, low, high int) int {
    pivot := arr[high]
    i := low-1

    for j := low; j < high; j++ {
        if arr[j] <= pivot {
            i++
            arr[i], arr[j] = arr[j], arr[i]
        }
    }

    arr[i+1], arr[high] = arr[high], arr[i+1]

    return i+1
} 
```

# jenkins-plugins - 为什么 Git 无法使用 Jenkins 连接到本地存储库？

> ID：15802898
> 
> 赞同：1
> 
> 时间：2013-04-04T05:04:38.997
> 
> 标签：jenkins-plugins

在 Jenkins 的配置链接的源代码管理部分出现以下错误：

无法连接到存储库：命令“'git.cmd ls-remote -h'http://machine1.abc/Repository1.git [HEAD](http://machine1.abc/Repository1.git) '”返回状态码 128：stdout：stderr：fatal：身份验证失败

# c# - folderbrowserdialog 访问路径无效

> ID：15802903
> 
> 赞同：0
> 
> 时间：2013-04-04T05:04:58.553
> 
> 标签：c#, wpf, windows-forms-designer, access-denied, folderbrowserdialog

每次我运行程序时，它都会出现一个错误，提示访问路径被拒绝。我已经检查了允许所有用户的文件夹，未选中只读，但它仍然无法工作

```
private void button2_Click(object sender, EventArgs e)
{
    try
    {
        FolderBrowserDialog fbd = new FolderBrowserDialog();
        DialogResult result = fbd.ShowDialog();
        string[] files = Directory.GetFiles(fbd.SelectedPath);
        textBox2.Text = fbd.SelectedPath;
    }
    catch (Exception ex)
    {
          MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:14:05.917

添加对结果的检查。

```
DialogResult result = fbd.ShowDialog();
if (result == DialogResult.OK)
{
    string[] files = Directory.GetFiles(fbd.SelectedPath);
    textBox2.Text = fbd.SelectedPath;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:04:53.413

检查这个人..

```
private void button2_Click(object sender, EventArgs e)
{
    try
    {
        FolderBrowserDialog fbd = new FolderBrowserDialog();
        DialogResult result = fbd.ShowDialog();
        textBox2.Text = (result == DialogResult.OK) ? fbd.SelectedPath : string.Empty;
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

# java - Java JAAS 身份验证需要数据库端口号

> ID：15802905
> 
> 赞同：1
> 
> 时间：2013-04-04T05:05:00.010
> 
> 标签：java, url, tomcat, postgresql-9.1, jaas

嗨，我正在使用此[链接](http://www.javacodegeeks.com/2012/06/java-jaas-form-based-authentication.html)进行基于 Java JAAS 表单的身份验证，

JAAS登录模块的实现使用数据库（postgresql）验证用户输入的用户名和密码

在 JAAS 我们应该创建 'jass.config' 文件，并且应该将该文件放在 '<code>$CATALINA_HOME/conf'(Tomcat) 下

我的问题是 jass.config 需要数据库（postgresql）端口号吗？没有端口号我们可以访问数据库（postgresql）？

任何帮助将不胜感激..提前谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:14:28.600

如果不是默认端口号，则必须指定端口号。

任何 URL 都是如此。它与 Tomcat 或 servlet 或 JAAS 或 PostgresSQL 或 JSP 无关。

# php - jquery在单击按钮时设置图像大小

> ID：15802907
> 
> 赞同：0
> 
> 时间：2013-04-04T05:05:18.850
> 
> 标签：php, jquery

我正在处理图像上传，我可以选择以英寸和厘米为单位的图像大小。当用户选择英寸时，其 div 显示大小为 15*12、30*20 的按钮，当用户选择厘米时，div 显示为 38cm*28cm、78cm * 56cm。单击英寸和厘米按钮会显示 div。但是我如何根据所选按钮设置大小。我希望当用户选择 15*12 时，图像在 div 中带有这个尺寸。这是显示和隐藏英寸和厘米 div 的代码。

```
$(function () {
    var tabContainers = $('div.tabs > div');

    $('div.tabs ul.tabNavigation a').click(function () {
        tabContainers.hide().filter(this.hash).show();

        $('div.tabs ul.tabNavigation a').removeClass('selected');
        $(this).addClass('selected');

        return false;
    }).filter(':first').click();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T05:11:04.150

从 botton 解析内容并设置图像大小-

```
$("#imageID").attr("width",width);
$("#imageID").attr("height",height); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:02:49.747

用英寸和厘米等不同单位设置宽度和高度是完全合法的。您所做的只是说`"3in"`3 英寸或`"10cm"`10 厘米。（您可以在 CSS 和 jQuery 中执行此操作。）

```
/* valid CSS */
img {
    width: 3in;
} 
```

```
// valid jQuery
$("img").width("3in"); 
```

这里有一些简单的 HTML 和 jQuery，看看如何设置某些东西的大小以响应点击事件。

```
<img id="myImg" src="path/to/image.jpg" alt="...">
<button data-width="15in" data-height="20in">15 x 20</button>
<button data-width="20in" data-height="30in">20 x 30</button> 
```

```
// Every time a <button> is clicked, resize the image to the dimensions
// given in the data-width and data-height attributes.
$("button").on("click", function () {
    var $button = $(this);
    $("#myImg").width( $button.data("width") ).height( $button.data("height") );
}); 
```

# qt - 更改标准 QGraphicsItem 颜色（画笔）

> ID：15802912
> 
> 赞同：1
> 
> 时间：2013-04-04T05:05:39.443
> 
> 标签：qt, user-interface, pyside

我实现了一个自定义`QGraphicsItem`（代表汽车），其中包含多个`QGraphicsItem`：文本、线条、图像、...

如何在仍然使用默认绘图过程的同时更改其他项目的画笔（因此：颜色、边框厚度……）（即没有`paint()`为每个项目实现自定义）？

PS：我设法用`QGraphicsLineItem`（用`setPen`方法）做到了这一点，但它似乎不适用于文本，例如。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T06:10:39.080

我使用的是该`setBrush`方法而不是`setPen`for`QGraphicsLineItem`和`QGraphicsPathItem`。

对于`QGraphicsTextItem`，我需要使用`setDefaultColor`（并在对象的字体上使用一些方法：`myTextItem.font().setBold(True)`例如）

# qt - 我可以让 QT Designer 在不活动时不隐藏未停靠的面板吗？

> ID：15802914
> 
> 赞同：1
> 
> 时间：2013-04-04T05:05:44.443
> 
> 标签：qt, qt4

我在多台显示器上使用 Qt Designer (4.8.1)。我喜欢取消停靠一些 Designer 的小部件/面板（即对象检查器、小部件框）并将它们放在一个屏幕上，而我将主要设计区域放在另一个屏幕上。如果我切换到占用一个屏幕的另一个程序（例如我的代码编辑器或 QtAssistant），Designer 会隐藏其未停靠的面板。有什么办法可以改变吗？例如，我可以在主设计器窗口上拉起助手，但仍然可以看到（设计器的）对象检查器。

我可能会习惯它，但我宁愿修复它。更重要的是，如果这是标准的 Qt 行为，我需要知道如何在我自己的程序中更正/更改它（我还没有使用过 dockWidgets，但我打算这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T03:17:13.973

这是一个 KDE 设置。

在 KDE4 中，可以在 Settings 菜单下找到`Window Behavior-> Window Behavior-> Advanced`- 设置被称为`Hide utility windows for inactive applications`. 另请参阅[当应用程序变为非活动状态时 Qt::Tool 窗口消失](https://stackoverflow.com/questions/2319105/qttool-window-diasappears-when-application-become-inactive)

# r - R通过比较两个数据框列插入一行

> ID：15802922
> 
> 赞同：1
> 
> 时间：2013-04-04T05:06:27.913
> 
> 标签：r, dataframe

我有一个数据框，其中两列（语言，文章）作为列标题，然后我有另一个数据框，列标题是语言和计数。

我想迭代第一个数据帧，如果第一个数据帧的语言列中的值与第二个数据帧中语言列的值匹配。我想将文章列的值插入到第二个数据框中。

```
 language articles
1       en  4200596
2       de  1571581
3       fr  1369891
4       nl  1405514
5       it  1020971
6       es   981124

  language count numArticles
1       gv    86          NA
2      sco     3          NA
3      zea    19          NA
4      szl     0          NA
5      pnb     2          NA
6      cdo    28          NA 
```

我通过编写一个循环来完成它，但我确信这不是最好的方法，或者可能有 R 方法以更清洁和更快的方式做到这一点：

```
for(i in 1:numberOfElements) {
  for(k in 1:numberOfElements) {
    if (as.character(wiki.template.count$language[i]) == as.character(wiki.lang.codes.size$language[k])) {
      wiki.template.count$numArticles[i] <- wiki.lang.codes.size$articles[k]
    }    
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:15:42.947

您正在尝试合并两个 data.frames。使用`merge`.

```
merge(wiki.template.count, wiki.lang.codes.size, by = 'language') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:19:23.370

`merge`如果列名相同，则可以使用。

假设您有 2 个数据框`df1`，并且`df2`都有列，`language`这应该可以工作

```
df_merge <- merge(df1, df2, by = 'language') 
```

如果您想保留 df2 而不是 df1 的顺序，请在合并中切换它们

```
df_merge <- merge(df2, df1, by = 'language') 
```

# javascript - .val() 的替代方法将其用于选择选项

> ID：15802924
> 
> 赞同：0
> 
> 时间：2013-04-04T05:06:39.473
> 
> 标签：javascript, jquery

```
<select id="width">
 <option value="23" selected="selected">10cm</option>
 <option value="26">100cm</option>
 <option value="43">1000cm</option>
</select> 
```

我有两个类似的选择选项，我无法使用 .val() 函数获取值，因为它将获取 id 值 (23,26,43) 我不会获取 10cm 或 100cm 或 1000cm .. 然后删除所选值的**厘米**，并使用该值与另一个称为高度的选择选项的值相乘。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:09:04.407

您可以使用[:selected](http://api.jquery.com/selected-selector/)选择器来获取所选`option`元素，一旦获得选项元素，您就可以使用[.text](http://api.jquery.com/text/)从中提取文本。

```
$('#width option:selected').text() 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Ygsrv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:09:19.470

```
var width = $("#width option:selected").text().replace(/cm$/, '').toInt(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:16:14.523

这是您需要的javascript：

```
$(function(){
    $("#width").change(function(){
        var value=$("option:selected").val();
        var text=$("option:selected").text().slice(0,-2);
        alert(value*text);
    });
}); 
```

获取选定的值使用`.val()`并获取选定的文本使用`text()`jQuery

获取选定文本后，删除 jQuery 中的`cm`using`.slice()`方法

检查这个[小提琴](http://jsfiddle.net/s2vFM/)

# javascript - 如何将集合添加到 Backbone 中的另一个集合

> ID：15802930
> 
> 赞同：6
> 
> 时间：2013-04-04T05:06:53.800
> 
> 标签：javascript, object, backbone.js

我有一个对象集合。问题是将对象集合添加到 Backbone.Push 中的另一个集合并添加 Bacbone.Collection 的方法不起作用。这是我的集合，需要添加到另一个集合

![它是对象集合](https://i.stack.imgur.com/LNCHG.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T06:44:15.523

假设它们是主干集合（它们在您的控制台窗口中看起来不像）

尝试：`collectionA.add(collectionB.models)`

如果您尝试将对象数组添加到集合中，请尝试以下操作：

```
_.each(kids.result, function(kid){ collectionA.add(new Backbone.Model(kid)); }); 
```

# log4cplus - 试图让 FileAppender 附加到文件，而不是截断和覆盖

> ID：15802931
> 
> 赞同：1
> 
> 时间：2013-04-04T05:07:02.960
> 
> 标签：log4cplus

好的，让 log4cplus 将内容记录到文件中。现在我希望它在程序重新启动而不是覆盖时简单地附加。

我试过这个： `log4cplus::SharedAppenderPtr myAppender(new log4cplus::FileAppender "myLogFile.log",std::ios_base::ate));`

但它仍然被截断和覆盖。

我不想使用 Rolling 或 Daily FileAppenders（至少）。

谢谢，-g

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T10:10:04.487

尝试传递下去`std::ios::app`。这就是代码检查的内容。

# scala - 如何在编译期间编译带有未捕获异常的 play scala 项目时增加堆栈大小：java.lang.StackOverflowError

> ID：15802933
> 
> 赞同：3
> 
> 时间：2013-04-04T05:07:11.530
> 
> 标签：scala, playframework

使用 编译 play2.1 scala 项目时`eclipse`，出现错误

> [错误] 编译期间未捕获的异常：java.lang.StackOverflowError
> 
> [错误]（编译：编译）java.lang.StackOverflowError

我尝试`application.conf`通过添加以下行来配置编译器：

> jvm.memory=-Xmx5g -Xms5g -Xss8192M

（我的程序也需要很多堆空间，所以我也加了xmx和xms）

但它不起作用..

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T08:30:53.090

奇怪的是你得到了一个 StackOverflow。它看起来确实像一个错误。但是，如果确实是您没有足够的堆栈空间，那么修改 application.conf 将无济于事。这些设置控制应用程序的运行时参数，而您的问题在于编译。

这个 SO 答案显示了如何调整 SBT 的 JVM 参数： [Out of Memory Error Using SBT When Executing Lift Project](https://stackoverflow.com/questions/8751936/out-of-memory-error-using-sbt-when-executing-lift-project)

在您的情况下，您将修改播放分发文件夹中的播放文件并在其中添加特定于堆栈的选项（播放实用程序只是自定义的 sbt 版本）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-04T07:27:46.933

您的异常可能是由于编译器中的错误，而不是堆栈大小不足。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T09:44:18.920

```
[error] uncaught exception during compilation:java.lang.StackOverflowError

[error] (compile:compile)java.lang.StackOverflowError 
```

它们看起来像是来自代码中的错误。仔细检查那里的问题。通常的 SBT 问题是 or `java.lang.OutOfMemoryError: PermGen space`，在这种情况下使用@Marius Danila 的答案来解决问题。

最好的办法是对您的方法进行单元测试。玩用`JUnit`还是`Selenium`为了那个。看看[这里](http://www.playframework.com/documentation/1.2/test)，用单元测试仔细检查你的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T17:13:39.943

现在一切正常，当我将所有内容移回旧版本时：scala 2.9.1 或 2.9.2 一切正常，编译时没有堆栈溢出；播放版本为 2.0.4。

# android - 如何在不使用选择器的情况下将 ListView 选定项目的颜色从默认更改为红色

> ID：15802938
> 
> 赞同：0
> 
> 时间：2013-04-04T05:08:20.230
> 
> 标签：android, android-listview

我正在开发板球应用程序。我的目标是在 ListView 中为特定球队选择球员。在这里，我可以从列表中选择多个玩家。我正在使用带有多项选择 Listview 的简单适配器。

```
 adapter=new ArrayAdapter<String>(this,R.layout.custom_list_view,R.id.textView_color,playersName);
    lvview.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE); 
```

我正在使用 checkedTextView 进行多项选择。下面是我的带有 CheckedTextView 的 custom_list_view

```
 <CheckedTextView
   android:id="@+id/textView_color"
   android:layout_width="fill_parent"
   android:layout_height="?android:attr/listPreferredItemHeight"
   android:textAppearance="?android:attr/textAppearanceLarge"
   android:gravity="center_vertical"
   android:checkMark="?android:attr/listChoiceIndicatorMultiple"
   android:paddingLeft="6dip"
   android:paddingRight="6dip"
   android:textColor="#FFffFF"
   /> 
```

现在我的问题是当用户从列表中选择特定播放器时，我想更改列表视图的颜色。它喜欢向用户显示选择了哪些玩家。为了与未选择的玩家区分开来，我将选定玩家的颜色更改为红色。

```
 lvview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View v, int position,long id) {
            // TODO Auto-generated method stub
            SparseBooleanArray checked = lvview.getCheckedItemPositions();      

            if(checked.get(position))
            {
                //chkTextView.setTextColor(Color.GREEN);

                counter_selected++;
                selectedCounterText.setText("" + counter_selected);                 
            }
            else
            {
                counter_selected--;
                selectedCounterText.setText("" + counter_selected);
            }
        }
    }); 
```

如何将选定玩家的颜色从默认颜色更改为红色。我正在努力做到这一点..请帮我找出来..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:02:34.917

使用以下代码得到答案

在 mainActivity 适配器类中

```
 adapter=new ArrayAdapter<String>(getApplicationContext(), R.layout.text_view,R.id.textView1,players);

    lvview.setAdapter(adapter); 
```

main.xml 如下所示

```
<ListView
    android:id="@+id/list"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="8.5"
    android:cacheColorHint="#00000000" 
     /> 
```

我的自定义布局字段如下所示

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="23dp"
    android:text="TextView"
    android:textColor="#ffffff" />

<CheckBox
    android:id="@+id/checkBox1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBaseline="@+id/textView1"
    android:layout_alignBottom="@+id/textView1"
    android:layout_alignParentRight="true"
    android:focusable="false"
  android:focusableInTouchMode="false"
    /> 
```

在 ListView 的 MainActivity onitem 单击侦听器中，我调用了自定义布局视图，代码如下

```
 lvview.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> l, View v, int position,
                long id) {
            // TODO Auto-generated method stub
            SparseBooleanArray checked = lvview.getCheckedItemPositions();  
            checkedText=(CheckBox) v.findViewById(R.id.checkBox1);
            checkedList=(TextView) v.findViewById(R.id.textView1);
            if(checkedText.isChecked()==false)
            {
                counter_selected++;
                checkedText.setChecked(true);
                checkedList.setTextColor(Color.RED);
                selectedCounterText.setText("" + counter_selected);                 

            }
            else
            {
                counter_selected--;
                checkedText.setChecked(false);
                 checkedList.setTextColor(Color.WHITE);
                 selectedCounterText.setText("" + counter_selected);        
            }
        }
    }); 
```

它解决了我的问题..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:15:20.917

您必须使用 statelist drawable 来定义事件的背景，并且为了方便起见，这是一个非常相似的问题，可能会对您有所帮助。 [列表显示](https://stackoverflow.com/questions/6939838/change-the-background-image-of-listview-on-focus)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:38:52.907

首先，您可以定义一个选择器xml如下

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@color/red" />
    <item android:drawable="@drawable/listitem_normal" />
</selector> 
```

然后您可以使用**android:listSelector="@drawable/listitem_selector"**为 ListItem 设置 Selector，如下所示：

```
<ListView 
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"
   android:listSelector="@drawable/listitem_selector"
   /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T05:42:28.407

问题是**不可能通过简单的适配器**（您已经使用过）来做到这一点。

您需要定义自定义行项目。您需要为绑定到列表视图的每个列表项定义自定义 XML 布局。因此，您需要制作一个`customAdapter`具有方法的`getView()`方法。在其中，您可以轻松获取`TextView`行的子项并更改其属性。

[**按照本教程**](http://www.androidpeople.com/android-custom-listview-tutorial-part-1)。

# magento - 在 Magento 中将所有核心文件覆盖到本地

> ID：15802941
> 
> 赞同：2
> 
> 时间：2013-04-04T05:08:31.817
> 
> 标签：magento

我想将我的 magento 版本从升级`1.5`到`1.7.0.2`. 但是我以前的团队成员已经在许多核心文件中编写过代码。所以很难升级。为此，我们决定使用相同的文件夹结构将所有文件从核心复制到本地以覆盖

喜欢

```
/app/code/core/Mage/Sales         to /app/code/local/Mage

/app/code/core/Mage/Backup        to /app/code/local/Mage

/app/code/core/Mage/Catalog       to /app/code/local/Mage

/app/code/core/Mage/CatalogSearch to /app/code/local/Mage

/app/code/core/Mage/Checkout      to /app/code/local/Mage

/app/code/core/Mage/Contacts      to /app/code/local/Mage

/app/code/core/Mage/Reports       to /app/code/local/Mage 
```

这是正确的方法吗？这会影响 Magento 网站的性能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T14:40:48.770

使用观察者和类重写而不是核心修改（无论是直接还是通过包含路径）更好的原因是因为很少需要覆盖*整个*类定义。虽然后一种方法更痛苦/工作更多，但**无论之前的定制是如何实现的*，您都必须将过去的更改与新功能合并***。任何软件升级都是如此。

做一个专业人士：针对一个普通的 1.5.xx 代码库运行一个差异，并尽可能地合并核心之外的更改。至少只移动到*app/code/local/Mage/*那些发生显着变化或超类的类，然后将它们与 1.7.0.2 版本进行比较以完成合并。

*请注意，在核心（通常在Mysql4*文件夹下）中已更改的任何资源模型*必须*通过重写或移植到其*Resource* -path 对应项进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T20:13:20.353

正确的方法是对 1.5.xx 版本与未修改的股票核心代码进行比较，编写模块以反映更改，然后升级到 1.7.xx。

`diff -qrbB app/unmodified-core app/modified-core`

会让你找到所有的邪恶。然后模块将只需要已更改的功能，这可能远比您意识到的要少。由于它是少数功能，因此您实际上对升级的头痛要少得多，因为那里有更少的代码发生冲突（在您建议的方法中，您复制到本地/法师的所有内容都可能与核心/法师发生冲突) 在模块写入后进行故障排除问题，例如在一杯糖中找到一根针，而不是在一个装满干草的谷仓中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T06:19:24.133

你已经说过了，你的前任用他的核心技巧让升级变得困难。您不必担心性能， app/code/local 中的代码不会对其产生负面影响。但是您应该担心功能，因为来自不同版本的大量代码很可能无法很好地协同工作。

你的建议是清理的第一步，但下一步不应该是更新。

1.  将核心黑客移动到应用程序/代码/本地
2.  将它们转换为模块，必要时使用类重写，但总是更喜欢观察者。重写不应更改原始副本，而应扩展它们并尽可能少地覆盖。
3.  更新 Magento
4.  为新版本调整重写的类

在每一步之后，系统都应该进行彻底的测试，尽可能地自动化。

第 4 步应该不多，因为 1.7 在大多数情况下都向后兼容 1.5。

这是很多工作，但这是您继承的技术部门，并且随着更新而来的是发薪日。这个过程中最复杂的事情是找出核心黑客的作用，它们属于一起，以及它们是否真的有必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T05:20:12.543

您可以执行以下操作：

/app/code/core/Mage/Sales 到 /app/code/local/ProjectName/Rewrites/

你的结构可能看起来像：
app/
  code/
   local/
    ProjectName/
      Rewrites/
       Block/
       etc/
       Helper/
       Model/

另一个解决方案是使用 PHPStorm 并通过程序来完成。设置项目后，打开文件并按 ALT + M 将其重写到您想要的任何文件夹中。该程序还可以创建您需要的任何其他 xml 文件。

简单易行。

我希望我在某种程度上有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-06T10:04:04.260

感谢您的回答

我想分享我所做的。

首先我下载新的 1.5 magento 版本。然后我借助 Linux 中的 Meld Diff Viewer 等工具将 /app/code/core/Mage 中的代码与新的 1.5 magento /app/code/core/Mage 进行比较。然后我覆盖了我发现差异的本地文件夹中的文件。

第二步：使用 Magento 1.7 升级数据库。要升级数据库，请在 1.7 magento 的 app/etc/local.xml 中输入 1.5 数据库的凭据（用户名、密码、dbname）。运行 1.7 magento 安装。检查数据库表，数据库升级后，表数增加。

第三步：上传magento 1.7到1.5的文件（/app/code/core/，js文件夹，包括文件夹和lib文件夹）

第四步：禁用本地模块。

5：删除缓存文件夹。

1.  检查站点，并逐个启用本地模块。

如果没有错误，您的站点将在 1.7 中升级

# jquery - 简化此函数以获取和设置值

> ID：15802945
> 
> 赞同：2
> 
> 时间：2013-04-04T05:09:18.290
> 
> 标签：jquery, get, set

有没有办法巩固这个功能？我有大约 50 个类似的函数，这似乎是获取和设置这些值的一种非常麻烦的方法。

所有函数的格式都是相同的：它会在它“获取”的任何值发生更改时触发，并且基于主元素的值*（在本例中为`Fabric_Type`）*加上一些其他元素的值，它设置目标元素的值*（即`Fabric_Thickness`）*。大多数函数获取相同的 5 到 10 个元素*（即`Item`或`Lining`）*的值，并在这些元素（即 Blazers、Jackets、Outerwear）中查找相同的值。而且我已经设置了包含每个元素的所有值的数组*（即`$Fabric_Type = array("Cashmere","Silk","Satin");`, `$Item = array("Blazers","Dresses","Jackets","Outerwear");`等）* :-)

我正在尝试（在伪代码中）是：

```
If ('Item' != Blazer, Jacket OR Outerwear AND 'Lining'!=0) OR If ('Item'=Blazer, Jacket OR Outerwear AND 'Lining'=0){'Fabric_Thickness'=2}
If ('Item' = Blazer, Jacket OR Outerwear AND 'Lining'=!0) {'Fabric_Thickness'=3} 
```

jQuery：

```
$("[name=Item],[name=Fabric_Type],[name=Lining],[name=Fabric_Construction]").change(function(){  
    if( $("[name=Fabric_Type]").val() === "Satin" || $("[name=Item]").val() === "Silk"){  
            if( $("[name=Item]").val() != "Blazer" && $("[name=Item]").val() != "Jacket" && $("[name=Item]").val() != "Outerwear" && "[name=Lining]").val() != "0") || 
            ( $("[name=Item]").val() === "Blazer" || $("[name=Item]").val() === "Jacket" || $("[name=Item]").val() === "Outerwear" && "[name=Lining]").val() === "0"){
                    $('[name=Fabric_Thickness]').val('2');  
            } if( $("[name=Item]").val() === "Blazer" || $("[name=Item]").val() === "Jacket" || $("[name=Item]").val() === "Outerwear" && "[name=Lining]").val() != "0" {
                    $('[name=Fabric_Thickness]').val('3');  
            } else {
                    $('[name=Fabric_Thickness]').val('1');  
            }
    }    
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:53:47.100

在块外部设置一个`change`名为 isThickerFabric 的函数（或任何对该域最正确的名称）：

```
var isThickerFabric = function() {
  var item = $("[name=Item]").val();
  return item == "Blazer" || item == "Jacket" || item == "Outerwear";
}

var hasLining = function() {
  var lining = $("[name=Lining]").val();
  return lining != "0";
} 
```

然后，您可以通过以下两种方式之一简化该方法：

```
$("[name=Item],[name=Fabric_Type],[name=Lining],[name=Fabric_Construction]").change(function(){  
  if ( $("[name=Fabric_Type]").val() === "Satin" ) {
    var fabricThicknessElement = $('[name=Fabric_Thickness]');

    if ( isThickerFabric() && !hasLining || !isThickerFabric() && hasLining ) {
      fabricThicknessElement.val('2');
    } else if ( isThickerFabric() && hasLining() ) {
      fabricThicknessElement.val('3');
    } else {
      fabricThicknessElement.val('1');
    }
  }    
}); 
```

或者，有时，当我有几个二进制属性时，我发现“保持分数”很有价值：

```
$("[name=Item],[name=Fabric_Type],[name=Lining],[name=Fabric_Construction]").change(function(){  
  if ( $("[name=Fabric_Type]").val() === "Satin" ) {
    var fabricThicknessElement = $('[name=Fabric_Thickness]');

    var thicknessScore = 1;
    if ( hasLining() ) {
      thicknessScore++;
    }

    if ( isThickerFabric() ) {
      thicknessScore++;
    }

    $('[name=Fabric_Thickness]').val(thicknessScore);
  }
}); 
```

# python - 将列表索引数组转换为 0 的 2d 数组，其中 1 在正确的索引处

> ID：15802950
> 
> 赞同：0
> 
> 时间：2013-04-04T05:09:37.563
> 
> 标签：python, arrays

```
def cluster_guess_for_each_obs(self):
    flat_cluster_guess = [self.argmax_list(cp) for cp in self.cluster_possibilities_for_observations()]
    zero_cluster = [0.0 for i in self.clusters]
    all_zero_clusters = [zero_cluster for p in range(len(flat_cluster_guess))]
    for enum in enumerate(flat_cluster_guess):
        all_zero_clusters[enum[0]][enum[1]] = 1.0
    print all_zero_clusters
    self.cluster_assignments = all_zero_cluster 
    return 
```

现在第一行返回一个 0 和 1 的列表，表示每个数据属于哪个集群。我想将它（例如 [0, 1, 0, 0, 1, 1, 1]）转换为长度为 2 的数组的数组，如下所示： [[1, 0], [0 , 1], [1, 0], [1, 0], [0, 1], [0, 1], [0, 1]]。相反，我得到的是在前几次枚举之后它全是 1。

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:16:48.083

好的，如果我理解正确，您只需要实现一个执行此操作的方法并调用它一次：

```
guess = [0, 1, 0, 0, 1, 1, 1]

def build_array(guess):
    result = []

    for i in range(len(guess)):
        new_result.append([0,0])

    for i in range(len(result)):
        result[i][guess[i]] = 1

    return result 
```

在这里，我选择了一个比“Pythonic”更具可读性的解决方案。但希望这使您需要实现的基本逻辑清晰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:17:00.073

```
flat = [0, 1, 0, 0, 1, 1, 1]
cluster = []
for pos in flat:
    n = [0, 0]
    n[pos] = 1
    cluster.append(n)
print cluster
# [[1, 0], [0, 1], [1, 0], [1, 0], [0, 1], [0, 1], [0, 1]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-04T05:17:31.163

这条线没有做你认为它做的事情：

```
all_zero_clusters = [zero_cluster for p in range(len(flat_cluster_guess))] 
```

它重复*相同的列表*（不是列表的副本-指向相同列表的指针）`len(flat_cluster_guess)`次。这意味着当您更改列表中的一项时，您会更改所有项目。

相反，将表达式移动`[0.0 for i in self.clusters]`到列表推导中，如下所示：

```
all_zero_clusters = [[0.0 for i in self.clusters] for p in range(len(flat_cluster_guess))] 
```

或者

```
all_zero_clusters = [[0] * len(self.clusters) for p in range(len(flat_cluster_guess))] 
```

# http - 如何从 Android http post 请求发送原始数据

> ID：15802977
> 
> 赞同：2
> 
> 时间：2013-04-04T05:12:16.247
> 
> 标签：http, http-post

我正在尝试发送带有原始数据的 http post 请求。

原始数据格式如下所述

{“值”：“01712211022”，“密码”：“测试”}。如何使用请求 URL 添加原始数据？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:40:50.973

见这里：[http ://www.androidsnippets.com/executing-a-http-post-request-with-httpclient](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)

或使用以下示例：

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost(url);

try {

    httppost.setEntity(new ByteArrayEntity(data));

    HttpResponse result = httpclient.execute(httppost);

    HttpEntity resultEntity = result.getEntity();
} catch (ClientProtocolException e) {
     /**/
} catch (IOException e) {
     /**/
} 
```

并且不要忘记将这些行添加到清单中：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.DOWNLOAD_WITHOUT_NOTIFICATION" /> 
```

# html - CSS 转换在 Internet Explorer 7 及更低版本中不起作用

> ID：15802978
> 
> 赞同：0
> 
> 时间：2013-04-04T05:12:16.677
> 
> 标签：html, css

我正在使用 CSS3 样式表来缩放图像，但它在 Internet Explorer 7 及更低版本中不起作用。

```
.resultitem{
  opacity: 0.75;
  transition: 0.75s ease-in-out;

}
.resultitem:hover {
  opacity: 1;
  -webkit-transform: scale(1.3);
          transform: scale(1.3);
          display:block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:28:58.860

IE9 支持 CSS3 转换，`-ms-trasform`但对于旧版本没有任何方法，只能使用过滤器：

```
filter: progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand',
    M11=1.3, M12=0,
    M21=0, M22=1.3); 
```

其中 1.3 是您的比例因子。

M11、M12、M21 和 M22 是将应用于元素的变换矩阵的值。

请注意，此矩阵不会缩放中心的矩形。解决这个问题的最好方法是使用一些负边距，减去一半宽度乘以左边距的因子，减去一半高度乘以顶部的因子。

链接：
- [MSDN](http://msdn.microsoft.com/en-us/library/ms533014%28VS.85%29.aspx)
-[转换矩阵](http://en.m.wikipedia.org/wiki/Transformation_matrix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T05:16:09.290

任何浏览器都不支持 transform 属性。

Internet Explorer(IE9+) 支持另一种选择，即 -ms-transform 属性（仅限 2D 转换）。

Firefox 支持另一种选择，即 -moz-transform 属性（仅限 2D 转换）。

Opera 支持另一种选择，即 -o-transform 属性（仅限 2D 变换）。

Safari 和 Chrome 支持另一种选择，即 -webkit-transform 属性（3D 和 2D 转换）。

# windows - Windows 7 Batch For Loop 与 If 争论

> ID：15802979
> 
> 赞同：0
> 
> 时间：2013-04-04T05:12:58.347
> 
> 标签：windows, windows-7, batch-file

我正在尝试编写一个批处理来在一夜之间执行一个脚本，以获取一个直到深夜才会创建的路径。如果路径存在，我希望循环总共检查 12 次。如果它确实存在，那么我希望它启动脚本测试。如果它不存在，那么我希望它休眠一个小时并再次检查。我还希望循环告诉我它每次循环了多少次。这是我所拥有的...

```
@Echo off
cls
set build = %1
set counter = 1
for /l %%a in (1,1,12) do (
if exist {%build%} (
goto StartTest
        )
set Timer = %counter% + %Timer%
echo build does not exist. %Timer% out of 12 hours left for the build path to exist or this script will exit.
Sleep 3600000
)

goto end

:StartTest
Echo Starting Tests...

:end
Echo Times up, build path wasn't made

So far this has been the output in cmd:
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
build does not exist.  out of 12 hours left for the build path to exist or this
script will exit stop trying.
'Sleep' is not recognized as an internal or external command,
operable program or batch file.
Times up, build path wasn't made

C:\Users\james\Desktop> 
```

注意它是如何说`sleep`是一个无法识别的命令并且`%Timer%`是空白的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:27:59.323

```
set build = %1
set counter = 1 
```

和类似的可能是您的问题的根源。

空格很重要。例如，该行`set build = %1`设置变量“ `build`” - 带有空格，而不是“ `build`”，设置的值将是“ `%1`”，而不是“ `%1`” - 第一个参数，但带有前导空格。

SLEEP 不是标准的可执行文件。试试`TIMEOUT`（执行

```
timeout /? 
```

从文档提示中。

并且`TIMER`没有在任何地方设置 - 它将被 [nothing] 替换

* * *

附录：几个演示程序

```
@ECHO OFF&SETLOCAL&cls
ECHO --- a little demonstration of SET syntax
@ECHO on
SET problem=this is fine
SET problem =this is a problem
@ECHO OFF
ECHO.
ECHO Result:
ECHO.
SET proble|FIND /i "problem"
ECHO.
ECHO See how the space is included in the variable NAME
ECHO so that there are two distinct variables?

@ECHO off&setlocal&CLS
ECHO Demonstrating the use of %%var%% IN a block
ECHO.
SET var=Original value
ECHO Before the block, %%var%%=%var%
FOR %%i IN (1 2 3) DO (
  SET var=New value %%i
  ECHO loop %%i : %%var%%=%var%
  )
ECHO After the block, %%var%%=%var%
ECHO.
ECHO BECAUSE the block is first PARSED, then executed.
ECHO in the parsing process, %%var%% is replaced by its
ECHO value as it stood when the block was parsed - BEFORE execution
ECHO.
ECHO now try using a SETLOCAL ENABLEDELAYEDEXPANSION command first:
ECHO.
SETLOCAL ENABLEDELAYEDEXPANSION
SET var=Original value
ECHO Before the block, %%var%%=%var% and ^!var^!=!var!
FOR %%i IN (1 2 3) DO (
  SET var=New value %%i
  ECHO loop %%i : %%var%%=%var% BUT ^^^!var^^^!=!var!
  )
ECHO After the block, %%var%%=%var% and ^^^!var^^^!=!var!
ECHO. 
```

* * *

修改以证明使用`CALL`以实现与 ENABLEDELAYEDEXPANSION 相同的最终结果

```
@ECHO OFF
SETLOCAL
SET count=0
FOR /l %%i IN (1,1,10) DO (
  SET /a count+=1
  CALL ECHO Loop %%i: count=%%count%%
) 
```

这里发生的是解析器用于检索`COUNT`. 它所做的实际上是替换`%%count%%`为`%count%`因为`%`转义`%`，因此它将第二个`%`字符视为普通字符，没有特殊含义。因此，行（例如）`ECHO Loop 3: count=%count%`在 the 中执行，`CALL`并且 %count% 被 THEN-current 环境中的解析器适当地替换。

另请注意该`SET/A`声明。`SET/A`是稍后添加`SET`的并将表达式的算术结果分配给变量 - 转换回字符串，因为所有环境变量都是字符串。我使用的语法是 C 风格的表达式，用于将 1 添加到目标。它同样可以表达为`SET /A count=%count% + 1`，甚至`set /a count = count + 1`因为第一个表达式将被解析为 (eg)`SET /a count=3 + 1`并且语义`SET/A`是这样的，即在整个语句的评估过程中忽略空格（不是数字）。

因此，

```
set count=0
set /a count = 0 
```

两者都达到相同的目标，但仅在`/a`使用选项时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T15:15:10.623

我最终选择了迄今为止有效的东西。我只是还没弄清楚如何在那个 for 循环中添加一个计数器。你是说这是因为我之间有一个空格`counter` `=` `1`对吗？

这是我用过的：

```
@Echo off
if "%1"=="" goto Error1
for /l %%a in (1,1,12) do (
set build=%1
if exist "%build%" goto StartTest
echo %build% does not exist...
echo Will try again in 1 hour
echo.
echo.
echo.
timeout /t 3600 /nobreak > NUL
)

goto endfail

:StartTest
Echo Starting Tests...
"D:\Program Files (x86)\Mozilla Firefox\firefox.exe" -file "C:\Selenium\Nightly.html"

goto end

:Error1
Echo Error: Invalid Parameter
Echo NightlyTest.bat "Build_Path"
goto end

:endfail
Echo Times up, build path wasn't made

:end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:21:37.883

对于重试（我不知道为什么我没有早点想到这一点），我可以`echo %%a out of 12 tries`在循环中添加该行。

# java - 在 SQL 上插入数据

> ID：15802980
> 
> 赞同：1
> 
> 时间：2013-04-04T05:13:00.627
> 
> 标签：java, sql, sql-server-2005, insert

我正在尝试在 sql 上将数据插入到我的数据库中，并且在运行程序后发生错误并说：

```
[Microsoft][ODBC SQL Server Driver][SQL Server]Insert Error: Column name or number of supplied values does not match table definition. 
```

我该如何解决？谁能告诉我我的代码有什么问题？

这是代码：

```
private void btnInsertActionPerformed(java.awt.event.ActionEvent evt) {
        try {
        Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");

        String url = "jdbc:odbc:****";
        String user = "****";
        String pass = "****";
        Connection connection = DriverManager.getConnection(url, user, pass);
        Statement statement = connection.createStatement();
        String pIDNo = txtPatientID.getText();
        String pFName = txtpFName.getText();
        String pLName = txtpLName.getText();
        String pMI = txtpMI.getText();

        String sql = "INSERT INTO dbo.Patients VALUES (" + 
                (pIDNo)+",'"+(pFName)+"','"+(pLName)+"','"+(pMI)+"')";
        statement.executeUpdate(sql);
        JOptionPane.showMessageDialog(rootPane, "Patient Added!");
        }catch (Exception ex) {
            JOptionPane.showMessageDialog(this, ex.getMessage());
            System.exit(1);
        }
    } 
```

这是表格信息：

![病人表](https://i.stack.imgur.com/S4dGn.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-04T05:16:03.390

使用隐式`INSERT`语句时，提供的值的数量必须等于表中列的总数量，例如

```
INSERT INTO tableName VALUES (val1, val2) 
```

在上面的查询中，预期的列数是两个，因为您提供了两个值。

当存在递增字段时，您必须`null`在其上传递值。但如果没有，您需要指定将为其插入值的列名，例如

```
INSERT INTO tableName (col1, col2) VALUES (val1, val2) 
```

作为旁注，必须对值进行参数化以避免 from `sql injection`。请参阅下面的文章：

*   [Java PreparedStatement](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html)

**更新 1**

由于您没有在所有列上插入值，因此需要指定列名。

```
INSERT INTO Patients (pIDNo, pFName, pLName, pMI)
VALUES (...) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T05:16:09.997

pIDNo、pFName、pLName、pMI 的类型是什么？

将类型更改为 varchar 以接收文本输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T05:16:32.557

您可能将 ID 字段设置为自动，所以不应该在插入中传递它？您应该在插入语句中列出字段，例如 INSERT INTO dbo.Patients(column1, column2...)。见[这里](http://www.w3schools.com/sql/sql_insert.asp)。

# javascript - HTML 和 JavaScript 中的平均分数审查系统

> ID：15802985
> 
> 赞同：0
> 
> 时间：2013-04-04T05:13:20.563
> 
> 标签：javascript, html, input, range, average

我正在尝试使用输入范围滑块创建一个审查中心。它们的范围从 1 到 10，每个 sldier 的侧面显示一个数字，然后是 /10。JavaScript 函数用于将滑块侧面的数字更改为正确的数字。这完美地工作。

问题来自平均分数函数 findaverage()。当您调整一个滑块时，显示的值（第一个 [tr] 中的 [span id="averageScore"]）范围从正确值到 233.5 之类的随机值，这是不可能的，因为它超出了 10。调整第二和第三个滑块。

这是实际操作中的页面：http: [//magnemation.com/games/review_center_test.html](http://magnemation.com/games/review_center_test.html)

我很想看到一些关于为什么会这样的想法，并对缩进感到抱歉。干杯。

```
<table>
<tr>
    <td>Design</td>
    <td>
        <input type="range" name="Design" min="0" max="10" step="0.5" onchange="showValue1(this.value)" />
        <br>
        <br>
    </td>
    <td align="right" width="22px"> <span id="Design">0</span>

    </td>
    <td align="left">/10</td>
    <td rowspan="3" align="center" width="300px">Total Score:
        <br><span id="averageScore" style="font-size: 60px;">0</span>
    </td>
</tr>
<script type="text/javascript">
    function showValue1(newValue) {
        document.getElementById("Design").innerHTML = newValue;
        findaverage();
    }
</script>
<tr>
    <td>Functionality</td>
    <td>
        <input type="range" name="Functionality" min="0" max="10" step="0.5" onchange="showValue2(this.value)" />
        <br>
        <br>
    </td>
    <td align="right" width="22px"> <span id="Functionality">0</span>

    </td>
    <td align="left">/10</td>
</tr>
<script type="text/javascript">
    function showValue2(newValue) {
        document.getElementById("Functionality").innerHTML = newValue;
        findaverage();
    }
</script>
<tr>
    <td>Ease of Use</td>
    <td>
        <input type="range" name="Ease of Use" min="0" max="10" step="0.5" onchange="showValue3(this.value)" />
        <br>
        <br>
    </td>
    <td align="right" width="22px"> <span id="Ease of Use">0</span>

    </td>
    <td align="left">/10</td>
</tr>
<script type="text/javascript">
    function showValue3(newValue) {
        document.getElementById("Ease of Use").innerHTML = newValue;
        findaverage();
    }
</script>
<script type="text/javascript">
    function findaverage() {
        var total = 0;
        var average = 0;
        total += document.getElementById("Design").innerHTML;
        total += document.getElementById("Functionality").innerHTML;
        total += document.getElementById("Ease of Use").innerHTML;
        average = total / 3;
        var rounded = Math.round(average * 2) / 2;
        document.getElementById("averageScore").innerHTML = rounded;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:24:37.597

您正在连接字符串而不是添加数字。使用 parseFloat() 将 innerHTML 字符串转换为可用数字。

```
function findaverage() {
  var total = 0;
  var average = 0;
  total += parseFloat(document.getElementById("Design").innerHTML);
  total += parseFloat(document.getElementById("Functionality").innerHTML);
  total += parseFloat(document.getElementById("Ease of Use").innerHTML);
  average = total/3;
  var rounded = Math.round(average*2)/2;
  document.getElementById("averageScore").innerHTML=rounded;
} 
```

# java - XStream 和 Google App Engine

> ID：15802986
> 
> 赞同：0
> 
> 时间：2013-04-04T05:13:56.553
> 
> 标签：java, google-app-engine, xstream

嗨，我看到了`XStream`Google App Engine 的实现，但是我仍然得到一个

> “无法构造 [class]，因为它没有无参数构造函数”

```
@Test
public void testNoNoArgs() {
    Car car = new Car(1, "Blue");
    XStream xstream = new XStreamGae();
    String s = xstream.toXML(car);
    Car c = (Car) xstream.fromXML(s);
} 
```

完整的堆栈跟踪在这里： http: [//pastebin.com/TGF6N17W](http://pastebin.com/TGF6N17W)

我的应用程序中与 XStream 相关的依赖项是：

```
 <dependency>
        <groupId>com.thoughtworks.xstream</groupId>
        <artifactId>xstream</artifactId>
        <version>1.4.2</version>
    </dependency>
    <dependency>
        <groupId>xpp3</groupId>
        <artifactId>xpp3_min</artifactId>
        <version>1.1.4c</version>
    </dependency>
    <!-- XStreamGae Dependencies -->
    <dependency>
        <groupId>net.sf.kxml</groupId>
        <artifactId>kxml2-min</artifactId>
        <version>2.3.0</version>
    </dependency>       
    <dependency>
        <groupId>xmlpull</groupId>
        <artifactId>xmlpull</artifactId>
        <version>1.1.3.1</version>
    </dependency> 
```

该`XStreamGae`课程可以在这里找到：

[http://www.wappworks.com/2011/11/11/using-xstream-with-google-app-engine/](http://www.wappworks.com/2011/11/11/using-xstream-with-google-app-engine/)

是否有解决方法可以使这种解决方法起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T14:06:19.250

显然你的类`Car`应该有一个无参数的构造函数：

```
public Car(){} 
```

# java - 替换jpa中的月，年，日期函数

> ID：15802989
> 
> 赞同：3
> 
> 时间：2013-04-04T05:14:07.603
> 
> 标签：java, jpa, orm, jpql

我想在 JPA 中执行这个查询。但是在执行这个查询时出现错误。如何在 JPA 中使用 Month(),Year() 我们可以在本机 SQL Query 中使用这些。但是如何使用它呢？请帮助我。在此先感谢！

```
 select model from IptExchangeratelines model where model.iptExchangerate.id=:id and " +
                " month(model.currencyExchangeDate)=:month and year(model.currencyExchangeDate)=:year 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-04T08:24:51.570

很少有 JPA 实现具有对日期/时间函数的内置支持。

*   **EclipseLink**

    > EclipseLink 支持 EXTRACT，允许从日期/时间中提取任何数据库支持的日期/时间部分值。EXTRACT 函数独立于数据库，但需要数据库支持。

    `EXTRACT(YEAR, model.currencyExchangeDate)`，但它需要 EclipseLink 2.4.x

    > **FUNC**允许从 JPQL 调用数据库函数。它允许调用 JPQL 中不直接支持的任何数据库函数。

    要调用 DB 函数，请`MyFunc(a, b, c)`使用`FUNC('MyFunc', a, b, c)`.

    您可以尝试`FUNC('YEAR', currencyExchangeDate)`调用“YEAR”函数。

*   **休眠**

    在 HQL 中，您可以使用日期函数`YEAR(date)`,`MONTH(date)`来`DAY(date)`提取所需的详细信息。支持的其他时间函数是`HOUR(date)`、`MINUTE(date)`、`SECOND(date)`。

*   **标准 API**

    > **CriteriaBuilder#function() ：**创建用于执行数据库函数的表达式。

    `CriteriaQuery<IptExchangeratelines> cq = cb.createQuery(IptExchangeratelines.class); Root<IptExchangeratelines> exRateLine = cq.from(IptExchangeratelines.class); cq.where(cb.equal(cb.function("year", Integer.class,
    exRateLine.get(exRateLine_.currencyExchangeDate)), year) .and(cb.equal(cb.function("month", Integer.class, exRateLine.get(exRateLine_.currencyExchangeDate)), month)));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-05T10:20:44.220

DataNucleus JPA 内置了对 YEAR、MONTH、DAY、HOUR、MINUTE、SECOND 的支持，以及用于在 RDBMS 中调用本机函数的 JPA 2.1 标准“FUNCTION”。

以我的经验，所有 JPA 实现都支持这样的事情，这与其他答案给出的印象不同

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-15T08:15:19.990

亲爱的，

有时我们必须以不同的方式思考，也许这会有所帮助：

```
TypedQuery<Number> query = entityManager.createQuery(
                "SELECT SUM(COALESCE(p.amount, 0)) FROM Payment p WHERE p.paymentDate BETWEEN ?1 AND ?2", Number.class);
        Calendar calendar = Calendar.getInstance();
        calendar.set(Calendar.MILLISECOND, 0);
        calendar.set(Calendar.SECOND, 0);
        calendar.set(Calendar.MINUTE, 0);
        calendar.set(Calendar.HOUR, 0);
        calendar.set(Calendar.DAY_OF_MONTH, 1);
        calendar.set(Calendar.MONTH, month -1);
        calendar.set(Calendar.YEAR, year);

        query.setParameter(1, calendar.getTime());
        //the location is very important
        calendar.add(Calendar.MONTH, 1);
        calendar.add(Calendar.MILLISECOND, -1);

        query.setParameter(2, calendar.getTime());
        return query.getSingleResult().doubleValue(); 
```

# android - android中的最短路径算法

> ID：15802993
> 
> 赞同：0
> 
> 时间：2013-04-04T05:14:39.903
> 
> 标签：android, offline, shortest-path

我正在android中实现一个离线地图导航项目，所以我使用mbtiles作为我的地图源。现在我想在该地图中的点之间覆盖路径（路线），有人可以就如何在android中实现最短路径算法来路由点之间的最短路径提供一个想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T05:30:19.550

查看[JUNG](http://jung.sourceforge.net "荣格")（Java 通用网络/图形框架）。该软件包包含使用多种图形算法的 GUI 示例，包括最短路径算法。我发现这个框架非常有趣。

在其中，检查类：TestShortestPath、DijkstraShortestPath、UnweightedShortestPath 和包 edu.uci.ics.jung.algorithms.shortestpath 中的其他类。