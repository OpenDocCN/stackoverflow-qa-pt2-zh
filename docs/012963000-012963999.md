# StackOverflow 问答 12963000-12963999

# html - 证书未使用 keygen 绑定到私钥

> ID：12963001
> 
> 赞同：3
> 
> 时间：2012-10-18T20:15:16.410
> 
> 标签：html, google-chrome, private-key, pki, key-pair

我们正在使用 html5 标签在谷歌浏览器中生成密钥对。我们得到传递给 CA 的 P10 并取回签名证书。然后我们将证书导入 CAPI 存储。导入证书后，我们注意到证书没有绑定到使用标签生成的私钥，这使得它无法使用。

我们对 firefox 和 safari 使用了完全相同的程序，它们都可以工作。不同之处在于，firefox 和 safari 都使用自己的密钥库，而 Chrome 使用 Windows CAPI 存储。

是否有人对将证书绑定到私钥可能需要的任何其他步骤有任何想法？

我们已经对这个问题进行了相当多的调查，但是关于这个问题的信息并不多。

任何帮助，将不胜感激。

# iphone - 用 CGPoint 追踪长按手势的准确位置

> ID：12963004
> 
> 赞同：1
> 
> 时间：2012-10-18T20:15:20.857
> 
> 标签：iphone, ios6, cgpoint

通过使用 CGPoint 位置，它总是将最后一张图像保存在 uiscrollview 中。当我点击其他图像进行保存时。我该怎么做才能保存我点击的确切图像。

```
UIScrollView *imageScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
imageScrollView.pagingEnabled = YES;

NSInteger numberOfViews = 61;

for (int i = 0; i < numberOfViews; i++) {

    CGFloat xOrigin = i * self.view.frame.size.width;

 NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];

    _image = [UIImage imageNamed:imageName];

    _imageView = [[UIImageView alloc] initWithImage:_image];

    _imageView.frame = CGRectMake(xOrigin, 0, self.view.frame.size.width, self.view.frame.size.height);

 UILongPressGestureRecognizer *gestureRecognizer = [[UILongPressGestureRecognizer alloc]
                                                       initWithTarget:self
                                                       action:@selector(handleLongPress:)];

    imageScrollView.userInteractionEnabled = YES;
    [imageScrollView addGestureRecognizer:gestureRecognizer];
    gestureRecognizer.delegate = self;
    [gestureRecognizer release];

    [imageScrollView addSubview:_imageView];
imageScrollView.contentSize = CGSizeMake(self.view.frame.size.width * numberOfViews, self.view.frame.size.height);

    - (void)handleLongPress:(UILongPressGestureRecognizer*)gestureRecognizer{
if (gestureRecognizer.state == UIGestureRecognizerStateBegan){
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:nil delegate:self cancelButtonTitle:@"Cancel" destructiveButtonTitle:nil otherButtonTitles:@"Save Photo", nil];
    actionSheet.actionSheetStyle = UIActionSheetStyleBlackTranslucent;
    [actionSheet showInView:self.view];
    [actionSheet release];

     }}

 -(void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

switch (buttonIndex) {
    case 0:
        [self savePhoto];

       break;

    default:
        break;

}

   -(void)savePhoto{

CGPoint location = [gesture locationInView:_imageView];

if  (CGRectContainsPoint(_imageView.bounds, location)){

UIImageWriteToSavedPhotosAlbum(_image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);
   }}} 
```

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:19:57.660

该点将始终出现在触发 的范围`UIScrollView`内`LongPressGestureRecognizer`。您应该检查滚动视图`contentOffset` （`contentOffset.x`用于水平布局和`contentOffset.y`垂直布局）以检测应该保存的图像。

此外，您可以将触摸点转换为`UIImageView`实例的本地坐标系，并查看该点是否位于图像视图的`bounds`矩形内。

**更新**

例如，您可以使用类似的方法来检测该点是否在图像视图的范围内（注意：我没有*对此*进行测试，这是假设滚动视图中添加了多个图像视图）：

```
if (CGRectContainsPoint(_imageView.bounds, [self.view convertPoint:location toView:_imageView]))
{
    // do something
} 
```

您还应该考虑检测之前应该保存哪个图像并在`UIActionSheet`向用户显示之前存储对该图像的引用，因为它可能会减少您可能遇到的潜在问题的数量并且以后更容易阅读，但这是我的主观意见.

# asp.net-mvc - 下载对话框需要很长时间才能加载到 ASP mvc 应用程序中

> ID：12963006
> 
> 赞同：0
> 
> 时间：2012-10-18T20:15:27.550
> 
> 标签：asp.net-mvc, download

我有一个 ASP.NET Web 应用程序，部分允许用户上传（和下载）文档。上传也不是很好，但是我的下载对话框有一个严重的问题，我不知道为什么。

这些文件存储在与代码不在同一台机器上的共享上。我正在尝试使用文件重载文件（位置、mimetype、显示名称）通过 FilePathResult 发送下载。

当用户单击下载链接时，它将打开一个新的空白页面并开始加载动画，但对于较大的文件（最大 25 mb）会坚持几分钟，然后显示保存/下载对话框，然后实际下载文件大约需要 5 秒钟。

我一直在寻找和寻找，到目前为止，我发现的唯一一件事是 FilePathResult 不应该在内存中缓冲文件，而是简单地将文件交给用户下载。

有没有人知道为什么需要一个好的（定时）5m 45s 才能在只有 24 mb 的文件上显示下载对话框？我觉得 IIS 或 asp 在不应该的地方预加载了文档，即使是这样一个小文件的时间太多了......

以供参考：

```
 public FilePathResult DownloadFile(int id)
        {
            var file = _fileService.GetByIdForUser(id, base.LoggedInUserId);

            return File(file.Location, UploadedFileManager.DetermineContentTypeFrom(file.Extension), file.Name);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T20:12:56.423

它不是一个“修复”，但我想我应该添加这个以防其他人有类似的问题。

事实证明，管理我们其中一个网络交换机的人员有一些设置搞砸了，我们必须提交支持票来修复它。完成此操作后，一切正常。

无论如何，问题在于他们让我们的硬件以“半双工”（单向通信）运行。我不是网络人，这正是我被告知的问题。我希望如果其他人有这个问题，这可能会提醒他们检查他们的硬件设置。

# java - JFrame 和 JPanel

> ID：12963007
> 
> 赞同：1
> 
> 时间：2012-10-18T20:15:36.190
> 
> 标签：java, swing, layout, jframe, jpanel

嗯，我似乎在这里遇到了一个奇怪的问题，我相信我曾经解决过这个问题，但我一生都记不起来了。我有一个 JFrame，其中有一个 JPanel，我尝试将另一个 JPanel 添加到现有的 JPanel。然而，什么也没有出现。我已经调用 setVisible() 和 repaint()，但仍然不行。

有人愿意对此进行破解吗？

这是我的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package bakarangerx;
import javax.swing.*;
import java.awt.*;
/**
 *
 * @author Ryan
 */
public class MainForm extends javax.swing.JFrame {

    /**
     * Creates new form MainForm
     */
    public MainForm() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        FileChooser_Open = new javax.swing.JFileChooser();
        FileChooser_Save = new javax.swing.JFileChooser();
        Panel_Main = new javax.swing.JPanel();
        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        MenuItem_New = new javax.swing.JMenuItem();
        MenuItem_Open = new javax.swing.JMenuItem();
        MenuItem_Save = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();

        FileChooser_Open.setDialogTitle("Open BakaRangerX File...");
        FileChooser_Open.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                FileChooser_OpenMouseClicked(evt);
            }
        });

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        Panel_Main.setLayout(new java.awt.GridLayout());

        jMenu1.setText("File");

        MenuItem_New.setText("New");
        MenuItem_New.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                MenuItem_NewMouseClicked(evt);
            }
        });
        jMenu1.add(MenuItem_New);

        MenuItem_Open.setText("Open");
        MenuItem_Open.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                MenuItem_OpenMouseClicked(evt);
            }
        });
        MenuItem_Open.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                MenuItem_OpenActionPerformed(evt);
            }
        });
        jMenu1.add(MenuItem_Open);

        MenuItem_Save.setText("Save");
        MenuItem_Save.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                MenuItem_SaveMouseClicked(evt);
            }
        });
        jMenu1.add(MenuItem_Save);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Edit");
        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Panel_Main, javax.swing.GroupLayout.DEFAULT_SIZE, 788, Short.MAX_VALUE)
                .addContainerGap())
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(Panel_Main, javax.swing.GroupLayout.DEFAULT_SIZE, 459, Short.MAX_VALUE)
                .addContainerGap())
        );

        pack();
    }// </editor-fold>

    private void MenuItem_OpenActionPerformed(java.awt.event.ActionEvent evt) {                                              
        //FileChooser_Open.showOpenDialog(this);
        ExaminerPanel newPanel = new ExaminerPanel();
        newPanel.setMinimumSize(new Dimension(200, 200));
        newPanel.setVisible(true);
        Panel_Main.setVisible(true);
        Panel_Main.add(newPanel);
        newPanel.repaint();
        Panel_Main.repaint();
        this.repaint();

    }                                             

    private void MenuItem_NewMouseClicked(java.awt.event.MouseEvent evt) {                                          
        // TODO add your handling code here:
    }                                         

    private void MenuItem_SaveMouseClicked(java.awt.event.MouseEvent evt) {                                           
        // TODO add your handling code here:
    }                                          

    private void MenuItem_OpenMouseClicked(java.awt.event.MouseEvent evt) {                                           
        // TODO add your handling code here:
    }                                          

    private void FileChooser_OpenMouseClicked(java.awt.event.MouseEvent evt) {                                              
        if(!FileChooser_Open.getSelectedFile().equals(null)) 
        {

        }
    }                                             

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainForm.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new MainForm().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify
    private javax.swing.JFileChooser FileChooser_Open;
    private javax.swing.JFileChooser FileChooser_Save;
    private javax.swing.JMenuItem MenuItem_New;
    private javax.swing.JMenuItem MenuItem_Open;
    private javax.swing.JMenuItem MenuItem_Save;
    private javax.swing.JPanel Panel_Main;
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    // End of variables declaration
}

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package bakarangerx;

/**
 *
 * @author Ryan
 */
public class ExaminerPanel extends javax.swing.JPanel {

    /**
     * Creates new form Examiner
     */
    public ExaminerPanel() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        Button_Previous = new javax.swing.JButton();
        Button_Next = new javax.swing.JButton();
        Button_Check = new javax.swing.JButton();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        TextArea_CorrectAnswer = new javax.swing.JTextArea();
        jScrollPane2 = new javax.swing.JScrollPane();
        TextArea_Question = new javax.swing.JTextArea();
        jLabel5 = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        TextArea_Answer = new javax.swing.JTextArea();
        jLabel6 = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        jLabel10 = new javax.swing.JLabel();
        jLabel11 = new javax.swing.JLabel();
        jLabel12 = new javax.swing.JLabel();
        jLabel13 = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        jLabel15 = new javax.swing.JLabel();

        jLabel1.setText("Question");

        jLabel2.setText("Correct Answer");

        Button_Previous.setText("Previous");

        Button_Next.setText("Next");

        Button_Check.setText("Check");

        jLabel3.setText("Wrong");

        jLabel4.setText("Right");

        TextArea_CorrectAnswer.setColumns(20);
        TextArea_CorrectAnswer.setRows(5);
        jScrollPane1.setViewportView(TextArea_CorrectAnswer);

        TextArea_Question.setColumns(20);
        TextArea_Question.setRows(5);
        jScrollPane2.setViewportView(TextArea_Question);

        jLabel5.setText("Answer");

        TextArea_Answer.setColumns(20);
        TextArea_Answer.setRows(5);
        jScrollPane3.setViewportView(TextArea_Answer);

        jLabel6.setText("Total Time");

        jLabel7.setText("Time");

        jLabel8.setText("jLabel8");

        jLabel9.setText("jLabel9");

        jLabel10.setText("jLabel10");

        jLabel11.setText("jLabel11");

        jLabel12.setText("jLabel12");

        jLabel13.setText("Grade");

        jLabel14.setText("jLabel14");

        jLabel15.setText("%");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2)
                            .addComponent(jLabel1))
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane2)
                            .addComponent(jScrollPane1)))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addComponent(jLabel13)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel12)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel3)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel9)
                        .addGap(18, 18, 18)
                        .addComponent(jLabel4)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel11)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel7)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel10))
                    .addGroup(layout.createSequentialGroup()
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                                .addComponent(jLabel5)
                                .addGap(57, 57, 57)
                                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                    .addGroup(layout.createSequentialGroup()
                                        .addComponent(Button_Previous)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                                        .addComponent(Button_Next))
                                    .addComponent(jScrollPane3)))
                            .addGroup(layout.createSequentialGroup()
                                .addGap(0, 0, Short.MAX_VALUE)
                                .addComponent(Button_Check)))
                        .addGap(19, 19, 19))
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, layout.createSequentialGroup()
                        .addComponent(jLabel6)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(jLabel8)
                        .addGap(76, 76, 76)))
                .addContainerGap())
            .addGroup(layout.createSequentialGroup()
                .addGap(318, 318, 318)
                .addComponent(jLabel15)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jLabel14)
                .addContainerGap(430, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel6)
                    .addComponent(jLabel8))
                .addGap(16, 16, 16)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel14)
                    .addComponent(jLabel15))
                .addGap(17, 17, 17)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(jLabel3)
                    .addComponent(jLabel4)
                    .addComponent(jLabel7)
                    .addComponent(jLabel9)
                    .addComponent(jLabel10)
                    .addComponent(jLabel11)
                    .addComponent(jLabel12)
                    .addComponent(jLabel13))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel2)
                            .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addGap(22, 22, 22)
                        .addComponent(Button_Check)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jLabel5)
                            .addComponent(jScrollPane3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(Button_Next)
                            .addComponent(Button_Previous)))
                    .addComponent(jLabel1))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
    }// </editor-fold>                        
    // Variables declaration - do not modify                     
    private javax.swing.JButton Button_Check;
    private javax.swing.JButton Button_Next;
    private javax.swing.JButton Button_Previous;
    private javax.swing.JTextArea TextArea_Answer;
    private javax.swing.JTextArea TextArea_CorrectAnswer;
    private javax.swing.JTextArea TextArea_Question;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel11;
    private javax.swing.JLabel jLabel12;
    private javax.swing.JLabel jLabel13;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    // End of variables declaration                   
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:17:32.997

用于`CardLayout`将多个`JPanel`对象添加到您的框架。有了`CardLayout`您，您就可以随时使一个面板可见。

这是 CardLayout 的简单演示：[https ://stackoverflow.com/a/9377623/544983](https://stackoverflow.com/a/9377623/544983)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:24:24.673

尝试`Component#validate`改用

```
//FileChooser_Open.showOpenDialog(this);
ExaminerPanel newPanel = new ExaminerPanel();
Panel_Main.add(newPanel);
Panel_Main.validate();
Panel_Main.repaint(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:33:11.753

你到底想用两个面板实现什么？我在eclipse中复制了你的代码，只是因为它被打开了，正如他们所说，代码很长。我看到的是带有菜单的单框架+面板。我知道您将面板显示为“打开”菜单命令，所以如果您想将它放在第一个面板调用上，也许您需要在第二个面板调用中添加验证？或者，如果您做一些更棘手的事情，请使用布局。

# vb.net - Windows 7 中的 MonthCalendar 不同

> ID：12963018
> 
> 赞同：0
> 
> 时间：2012-10-18T20:16:33.867
> 
> 标签：vb.net, user-interface, windows-7, windows-xp

我们确保我们的应用程序可以在 Windows XP 的 Windows 7 中运行。其中一个使用 System.Windows.Forms.MonthCalendar。显示完全不同。

日历有一个 MaxDate，在 XP 版本中我们可以看到所有日期但不能选择它们。在 Win 7 中，无法选择的日期不可见。

是否可以显示所有日期？
我找不到有关此更改的官方微软声明。

XP与Win7

![在此处输入图像描述](../Images/f05bbb970dbc2678b35718cdb9ee6431.png) ![在此处输入图像描述](../Images/5c5b43b312bf9435c0f5f538db28f838.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:16:53.723

是的，MonthCalendar 是 Windows 中的常用控件之一。它与 TreeView 和 ListView 位于同一组中，您肯定注意到它们看起来也不同。和 Common Dialogs 的表亲，请看 OpenFileDialog。您跳过了 Vista，这就是 MonthCalendar 获得新外观的时候。

这是微软为 Windows 版本赋予不同外观并在标准 Windows UI 元素的可用性方面进行创新的方式。重度称重和疼痛，并经过用户测试。您也将自动获得相同的外观，您无需在代码中执行任何操作。这是一个非常好的功能，您的用户现在将立即如何使用您的程序，因为它的外观和工作方式与她使用的任何其他程序一样。

试图倒带时钟是一个坏主意。您的应用程序看起来就像在上个世纪被遗忘了，绝不是您想给付费客户留下的那种印象。并且将与使用日历的任何其他应用程序截然不同。您可以使用 SetWindowsTheme() 来覆盖视觉样式，但这会使时钟回到 1999 年。不要这样做。

# c# - 如何让 AutoFixture AutoMoq 从实例化对象中的注入服务返回结果？

> ID：12963019
> 
> 赞同：4
> 
> 时间：2012-10-18T20:16:38.630
> 
> 标签：c#, moq, autofixture

我正在尝试测试一个使用存储库服务的服务类。我已经设置了我认为应该与我的存储库服务一起使用的自定义设置，而是返回默认的匿名结果。如果您查看下面的代码示例，当我调用 svc.GetFoos 方法时，我试图取回我在自定义类中注册的“Foo”对象，但我什么也没得到：

```
void Main()
{
    var fixture = new Fixture().Customize(
        new CompositeCustomization(
            new Customization(),
            new AutoMoqCustomization())); 

    var svc = fixture.CreateAnonymous<Bar>(); 

    Console.Write(svc.GetFoos().Count()); 
}

// Define other methods and classes here
public class Bar
{

    public IQueryable<Foo> GetFoos()
    {
        return _rep.Query<Foo>(); 
    }

    public Bar(IRepository rep) { _rep = rep;  }

    private IRepository _rep; 
}

public class Foo
{
    public string Name {get;set;}   
}

public class Customization : ICustomization
{
    public void Customize(IFixture fixture)
    {
        var f = fixture
                .Build<Foo>()
                .With(x => x.Name, "FromCustomize")
                .CreateMany(2)
                .AsQueryable();
        fixture.Register<IQueryable<Foo>>(() => f); 
    }
}

public interface IRepository
{
    IQueryable<T> Query<T>(); 
} 
```

如果我在夹具实例化之后将以下代码添加到 Main 方法中，它会按我想要的方式工作，但是我手动设置了我的模拟，我不确定 AutoFixture AutoMoq 给我带来了什么：

```
var mock = fixture.Freeze<Mock<IRepository>>(); 
mock
    .Setup(x => x.Query<Foo>())
    .Returns(fixture.CreateAnonymous<IQueryable<Foo>>); 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:51:02.313

AutoFixture.AutoMoq 用作[自动模拟容器](http://blog.ploeh.dk/2013/03/11/auto-mocking-container/)。`Mock<T>`它会通过将实例注入到 said 的任何消费者中来自动组成对象图`T`。

它不能`Mock<T>`为您配置实例——毕竟，它怎么可能呢？只有您（测试编写者）知道适当的交互应该是什么。

`Setup`因此，您提供的代码（包括对and的调用`Returns`）是正确的，尽管您可能会考虑`Customization`该类是否过度杀伤。

如果您需要自动化大量重复的起订量设置，您应该考虑

*   界面设计和消费模式是否合适
*   如果[Fake](http://msdn.microsoft.com/en-us/magazine/cc163358.aspx)不是比动态模拟更好的选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-18T16:53:17.787

我最近遇到了一个类似的话题。我无法对自动创建的`IQueryable<T>`.

> “System.Object”类型的表达式不能用于“Boolean Any”方法的“System.Linq.IQueryable`1[System.String]”类型的参数...

我通过创建一个特殊的样本构建器来解决这个问题，它总是创建一个数组，然后返回它`AsQueryable`。最后我没有使用代码，但它有效。

很明显很粗糙，只是尝试一下......

```
void Main()
{
    Fixture fixture = new Fixture();

    fixture.Customize(new AutoMoqCustomization { ConfigureMembers = true, Relay = new QueryableBuilder() });

    // Possible ways to "override" the AutoMoqBehavior
//  fixture.Inject<string>("hallO");
//  fixture.Inject(new[] { "asd" });
//  fixture.Inject(new[] { "asds" }.AsQueryable());

    var queryable = fixture.Create<Foo>();
    queryable.Bar();

    fixture.Create<IQueryable<string>>().Any(x => x.Equals("asd"));
}

public class QueryableBuilder : ISpecimenBuilder
{
    MockRelay _Base = new MockRelay();

    public object Create(object request, ISpecimenContext context)
    {
        var t = request as Type;
        if (t == null ||
            !t.IsGenericType ||
            t.GetGenericTypeDefinition() != typeof(IQueryable<>))
            return _Base.Create(request, context);

        var queryableTypeName = typeof(IQueryable<>).Name;
        if (t.Name != queryableTypeName)
            return _Base.Create(request, context);

        var entityType = t.GetGenericArguments().Single();

        var tt = entityType.MakeArrayType();
        dynamic blbb = context.Resolve(tt);
        return ((IEnumerable)blbb).AsQueryable();
    }
}

public interface IHaveQueryable {
    IQueryable<string> Queryable {get;}
}

public class Foo {

    readonly IHaveQueryable _Queryable;

    public Foo(IHaveQueryable queryable){
        _Queryable = queryable;
    }

    public bool Bar(){
        return _Queryable.Queryable.Any(x => x.Equals("bar"));
    }
} 
```

# visual-studio-2012 - 在 Visual Studio 2012 测试资源管理器视图中选择失败的单元测试是否有键盘快捷键？

> ID：12963020
> 
> 赞同：4
> 
> 时间：2012-10-18T20:16:44.163
> 
> 标签：visual-studio-2012, keyboard-shortcuts

**问题**

Visual Studio 2012 中是否有键盘快捷键来选择失败的单元测试，以便我可以看到随之而来的消息？

**问题**

当我运行单元测试时，Visual Studio 只显示一个摘要（参见屏幕截图 1）。

但是，我感兴趣的是失败消息（见截图 2）。而且我想通过键盘快捷键到达那里，即无需触摸鼠标。

*截图 1*

未选择任何测试的测试资源管理器视图。所以只显示摘要。

![在此处输入图像描述](../Images/b3e35a81b1d4c5e073d959e61cdcd42c.png)

*截图 2*

选择了失败测试的测试资源管理器视图。现在，我看到了失败消息。

![在此处输入图像描述](../Images/647c4af4ecefbf7ba4b7ce58ca030d90.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T18:14:58.350

您可以使用向下/向上键遍历测试列表来选择测试（选项卡或箭头键向下到测试列表，然后使用向下/向上箭头键选择您感兴趣的测试）。

最美好的祝愿，清

# ruby-on-rails - rspec 中的 i18n 翻译

> ID：12963021
> 
> 赞同：5
> 
> 时间：2012-10-18T20:16:54.070
> 
> 标签：ruby-on-rails, internationalization, rspec

我想将我的测试与内化隔离开来。我使用 rails 3.2.8 和 rspec 2.11.1

我把这段代码`spec/support/translations.rb`

```
module I18nHelpers
  def with_translations(locale, translations)
    I18n.backend.store_translations locale, translations
    yield
  ensure
    I18n.reload!
  end 
```

结尾

```
RSpec.configure do |config|
  config.include I18nHelpers
end 
```

然后我测试应用程序助手：

```
describe ApplicationHelper do
  context "messages" do
    it "show body" do
       with_translations :en, navigation: {messages: 'foo'} do
           concat messages_navigation
           assert_test 'span', 'foo'
       end
    end
  end
end 
```

但是这个测试伴随着消息

```
Failure/Error: assert_select 'span', text: /foo/
     MiniTest::Assertion:
        </foo/> expected but was
        <"Messages">. 
```

“消息”来自我真实的`config/locales/en.yml` 我从控制台测试#store_translations，它可以工作。但是当我在帮助模块中将行放在单词`p I18n.t(translations.key.first)`之前时`ensure`，它会向我显示旧的翻译。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T10:16:40.867

要与您完全隔离，`I18n`您可能需要像这样切换后端：

```
def with_translations(locale, translations)
  original_backend = I18n.backend

  I18n.backend = I18n::Backend::KeyValue.new Hash.new, true
  I18n.backend.store_translations locale, translations

  yield
ensure
  I18n.backend = original_backend
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T01:18:03.700

我已经深入研究了这个问题，我想我有一个粗略的答案。问题似乎是由于在第一次调用之前 rails 不会在语言环境文件中加载翻译`I18n.t`。

这有点旧，但仍然相关：

[https://groups.google.com/forum/?fromgroups=#!msg/rails-i18n/QFe0GDVRIa0/G7K09NAgqJMJ](https://groups.google.com/forum/?fromgroups=#!msg/rails-i18n/QFe0GDVRIa0/G7K09NAgqJMJ)

> 我们已经考虑了很多不同的方法来解决这个问题，最终我们的解决方案是将实际的翻译加载推迟到最新的可能点。因此客户端（如 Rails）只会将翻译源注册到 I18n，而后端实际上会在需要查找第一个翻译时延迟加载它们。

所以基本上，现有的翻译只会在你调用`I18n.t`. 当我注意到非常奇怪的行为时，我在控制台中玩耍时发现了这一点：

```
irb(main):001:0> def with_translations(locale, translations)
irb(main):002:1>   I18n.backend.store_translations locale, translations
irb(main):003:1>   yield
irb(main):004:1> ensure
irb(main):005:1*   I18n.reload!
irb(main):006:1> end
=> nil
irb(main):007:0> I18n.reload!
=> false
irb(main):008:0> with_translations(:en, { :messages => "foo" }) { puts I18n.t :messages }
Messages
=> nil
irb(main):009:0> I18n.t :some_other_string
=> "Some translation"
irb(main):010:0> with_translations(:en, { :messages => "foo" }) { puts I18n.t :messages }
foo
=> nil 
```

`ensure`正在发生的事情与区块无关。我们可以删除它，同样的事情也会发生：

```
irb(main):011:0> I18n.reload!
=> false
irb(main):012:0> def with_translations(locale, translations)
irb(main):013:1>   I18n.backend.store_translations locale, translations
irb(main):014:1>   yield
irb(main):015:1> end    
=> nil
irb(main):016:0> with_translations(:en, { :messages => "foo" }) { puts I18n.t :messages }
Messages 
```

即使没有重新加载，它仍然会吐出原始字符串，因为调用中的翻译在被`I18n.backend.store_translations`调用时被原始字符串覆盖`I18n.t`。但是，如果您在上述代码`I18n.t` *之前*调用，它将起作用（并留下翻译，因为没有`ensure`重新加载翻译的块）。

所以基本上，答案是在覆盖您要更改的翻译*之前*`I18n.t`调用一个实际的翻译字符串来触发 Rails 加载现有翻译：

 *```
def with_translations(locale, translations)
  I18n.t translations.keys.first         # to make sure translations are loaded
  I18n.backend.store_translations locale, translations
  yield
ensure
  I18n.reload!
end 
```

我只在控制台中尝试过这个，但我相信它也应该适用于你的 rspec 测试。如果有人对这个问题有更深入的了解，我很想听听他们的意见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-04T16:51:22.583

在遇到类似问题后，我最终写了一个这样的助手：

## 帮手

```
module TranslationSupport
  def with_translation(replacement_translation)
    I18n.t(".").deep_merge!(replacement_translation)
    begin
      yield
    ensure
      I18n.reload!
    end
  end
end 
```

这里的快捷方式是先初始化后端`I18n.t(".")`，然后合并所需的值。

正如其他答案所暗示的那样，或者可以初始化 i18n 后端，然后用于`I18n.backend.store_translations`更新值。这种方法的缺点是需要将语言环境作为参数传递。

## 用法

然后这个助手可以像这样使用它：

```
require "rails_helper"
require "support/translation"

RSpec.describe "testing a view with overridden translations" do
  include TranslationSupport

  it "works" do
    translations = {
      homepage: {
        index: {
          label: "Overridden"
        }
      }
    }

    with_translation(translations) do
      # Your action
    end

    # Expectations
  end
end 
```

如果您不想每次都包含帮助程序：

```
RSpec.configure do |config|
  config.include TranslationSupport
end 
```*

# php - 获取当前时间 - 服务器或客户端

> ID：12963022
> 
> 赞同：2
> 
> 时间：2012-10-18T20:16:55.907
> 
> 标签：php, javascript, html

是否有任何服务器或客户端方式来确定其位置并获取本地时间。

我希望它也能实时更新，例如小时、分钟、秒。

如果我可以使用 PHP / JavaScript（包括 jQuery）或类似的东西，我会更喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:30:48.780

你可能想要这个

```
setInterval(function(){
    var dt=new Date(), h=dt.getHours(), m=dt.getMinutes(), s=dt.getSeconds(),
    curTime= pad(h)+':'+pad(m)+':'+pad(s); 
    document.getElementById('time').innerHTML=curTime;
}, 500);
function pad(n) { return ("0" + n).slice(-2); } 
```

[**演示**](http://jsbin.com/ahejet/3/edit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:20:35.570

您可以尝试使用 jquery localtime 插件。看看[这里]：[http ://code.google.com/p/jquery-localtime/wiki/Usage](http://code.google.com/p/jquery-localtime/wiki/Usage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:29:47.470

在 JavaScript 中，您可以使用 Date 对象轻松获取当前日期和时间；

`var now = new Date();`

这将获得本地客户端机器时间。

# javascript - 有条件地在 knockout.js 中添加元素属性

> ID：12963023
> 
> 赞同：61
> 
> 时间：2012-10-18T20:16:56.520
> 
> 标签：javascript, knockout.js

knockout.js 库有一个[`"attr"`数据绑定](http://knockoutjs.com/documentation/attr-binding.html)，它允许您动态更改 HTML 元素属性的值（例如“标题”）。但是，在某些情况下，可能需要也可能不需要该属性，具体取决于绑定对象上的相应可观察对象。例如，如果我的模型有一个“title” observable，如果它存在（非空），我可能想要设置“title”属性，或者如果它不存在（null）则完全跳过该属性。

淘汰赛是否提供任何有条件地设置属性的方法？（理想情况下没有条件渲染整个元素的开始标签......）

**[注意]**这个类似名称的问题实际上是通过敲除对 CSS 类的特殊处理来解决的，并且与这个问题（或它自己的标题）无关：[How to conditionally render an css class with knockoutjs](https://stackoverflow.com/questions/11014336/how-to-conditionally-render-an-html-attribute-with-knockoutjs)

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-05-30T16:22:53.943

我在选择一个`<option>`（我手动生成而不是内置淘汰赛）时需要这个。

```
<option 
 data-bind="text: text, 
    attr:{
     value:value,
     'selected': typeof(selected) !== 'undefined' ? selected : null 
     }">
 Choice X
</option> 
```

这表示始终更新“文本”属性并添加“值”属性，但只有在数据已经定义了“选定”值时才添加“选定”。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-18T21:14:36.843

您可以创建一个自定义绑定**attrIf**，它将在添加或不添加属性之前检查特定可观察布尔值的值。看这个例子：

```
ko.bindingHandlers.attrIf = {
    update: function (element, valueAccessor, allBindingsAccessor) {
        var h = ko.utils.unwrapObservable(valueAccessor());
        var show = ko.utils.unwrapObservable(h._if);
        if (show) {
            ko.bindingHandlers.attr.update(element, valueAccessor, allBindingsAccessor);
        } else {
            for (var k in h) {
                if (h.hasOwnProperty(k) && k.indexOf("_") !== 0) {
                    $(element).removeAttr(k);
                }
            }
        }
    }
};

<a href="#" data-bind="attrIf: {title: title, _if: flag}">link</a> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-25T18:57:07.123

> Knockout 的“attr”数据绑定确实支持这种情况，只是从您的 getDisabledState() 函数返回 null 或 undefined 然后它不会发出该属性。

此答案是从[具有“只读”和“禁用”等属性的 Knockout attr 绑定中检索到的](https://stackoverflow.com/questions/14165213/knockout-attr-binding-with-attributes-like-readonly-and-disabled)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T12:28:22.580

我希望我可以回复@gbs，但我不能。我的解决方案是拥有两个相同的 HTML 元素，一个具有属性，一个没有，以及根据元素添加其中一个的淘汰条件。我也知道这种自定义投标，但哪种解决方案更有效？

# c# - 如何使用双功能获得短期价值？

> ID：12963024
> 
> 赞同：3
> 
> 时间：2012-10-18T20:17:07.750
> 
> 标签：c#

> **可能重复：**
> [从 C# 创建 Excel（.XLS 和 .XLSX）文件 在 C#](https://stackoverflow.com/questions/151005/create-excel-xls-and-xlsx-file-from-c-sharp)
> [中舍入双精度值](https://stackoverflow.com/questions/2129804/rounding-double-values-in-c-sharp)

我的双重函数生成这样的值

```
 56,365989365 
```

我想要这样的价值`56,36` 如何得到这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:22:46.273

如果要截断该值：

```
value *= 100;
value = Math.Truncate(value);
value /= 100; 
```

如果要对值进行四舍五入：

```
value = Math.round(value, 2); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:18:24.447

使用`Math.Round`. 第二个参数是地方的数量。

```
var x = Math.Round(56.365989365, 2); 
```

# php - 如何将类方法转换为静态方法？PDO 查询

> ID：12963027
> 
> 赞同：1
> 
> 时间：2012-10-18T20:17:21.170
> 
> 标签：php, sql

我有一个带有构造函数的简单查询方法：

```
class mysql_a {

public $db;

public function __construct($db) {
    $this->db=$db;
    }

public function find_by_id() {
   $result =  $this->db->query('SELECT * FROM users WHERE id=2 LIMIT 1')->fetch(PDO::FETCH_ASSOC);
   return $result;
   }

}

$found = new mysql_a($db);
$res = $found->find_by_id();
echo $res['username']; 
```

如何使函数“find_by_id”静态？我的意思是这样的：

```
public static function find_by_id() {
   $result = self::$db->query('SELECT * FROM users WHERE id=2 LIMIT 1')->fetch(PDO::FETCH_ASSOC);
   return $result;
} 
```

以及如何执行它？我的意思是如何改变这部分：

```
$found = new mysql_a($db);
$res = $found->find_by_id();
echo $res['username']; 
```

我想不通，它让我发疯......有什么想法吗？谢谢，顾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:00:52.213

你的问题的答案是

```
public static function db() {
    static $conn;
    if (!isset($conn)) {
        try {
            $conn = new PDO("mysql:host=" . DB_HOST . ";dbname=" . DB_NAME, DB_USERNAME, DB_PASSWORD, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8"));
        }
        catch(PDOException $ex){
            die '<pre>'.print_r($ex->getMessage(), true).'</pre>';
        }
    }
    return $conn;
}

public static function find_by_id() {
   $result = self::$db->query('SELECT * FROM users WHERE id=2 LIMIT 1')->fetch(PDO::FETCH_ASSOC);
   return $result;
} 
```

您必须删除您的构造函数并在静态函数 db 中创建 PDO 对象。

你会打电话给`$found = mysql_a::find_by_id();`

# excel - Excel VBA从字符串中获取日期

> ID：12963033
> 
> 赞同：2
> 
> 时间：2012-10-18T20:17:52.863
> 
> 标签：excel, vba

如果我有一个包含以下内容的单元格：

```
Tuesday, April 16th 2009 
```

如何将该字符串转换为 Excel 可识别的日期格式。我想我必须使用 MID() 和 FIND() 函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:07:01.290

这是一个可以从 VBA 工作并作为用户定义函数的函数

```
Function GetDate(InString As Range) As Date
    Dim newDate As Date
    Dim tmpDate As String

    'Sample Date
    'Tuesday, April 16th 2009

    'Remove the Day of the Week.
    tmpDate = Trim(Mid(InString, InStr(InString, ",") + 1))

    'Get rid of "th"
    tmpDate = Replace(tmpDate, "th ", " ")

    'Get rid of "rd"
    tmpDate = Replace(tmpDate, "rd ", " ")

    'Get rid of "nd"
    tmpDate = Replace(tmpDate, "nd ", " ")

    'Get rid of "st"
    tmpDate = Replace(tmpDate, "st ", " ")

    'Convert string to date
    newDate = DateValue(tmpDate)

    GetDate = newDate
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:51:43.540

假设文本在 A1 中，我们可以将其拆分为单独的部分，然后使用`DATEVALUE`将其放在一起。

```
B1: =MID(A1,FIND(" ",A1)+1,FIND(" ",A1,FIND(" ",A1)+2)-FIND(" ",A1))
B2: =IFERROR(VALUE(MID(A1,FIND(" ",A1,FIND(" ",A1)+2),3)),VALUE(MID(A1,FIND(" ",A1,FIND(" ",A1)+2),2)))
B3: =RIGHT(A1,4)
B4: =DATEVALUE(B2&" "&B1&" "&B3) 
```

或者，您可以一次性完成：

```
=DATEVALUE(IFERROR(VALUE(MID(A1,FIND(" ",A1,FIND(" ",A1)+2),3)),VALUE(MID(A1,FIND(" ",A1,FIND(" ",A1)+2),2)))&" "&MID(A1,FIND(" ",A1)+1,FIND(" ",A1,FIND(" ",A1)+2)-FIND(" ",A1))&" "&RIGHT(A1,4)) 
```

# c# - WebMatrix 填充属性和 JavaScript 读取属性未产生预期结果

> ID：12963039
> 
> 赞同：1
> 
> 时间：2012-10-18T20:18:20.453
> 
> 标签：c#, javascript, jquery, razor, webmatrix

我对以下代码有疑问：

CSHTML 文件的部分：

```
 @if(errorMessage != "")
                        {
                            err="err";
                        }
                        else
                        {
                            err="";
                        }
                        @if(errorMessage == "")
                        {
                            foreach(var row in db.Query(stringCompiler, EntryID, POIName, DateLastModified, Gender, Race, Height, Weight, HairColor, EyeColor, DOB, Age, SS, DL, DOC, VehicleTag, FBI, Officer, HomePhone, CellPhone, CellPhone2, CellPhone3, POICautions, WorkPhone, WeightedAggregate, Address, AdditionalDescriptors, Aliases, SourceOfInformation, AddressInformation, KnownAssociates, VehicleDescription, Comments, SummarizedIncidents, AllCellPhones, AllPhones, betDOB1, betDOB2, betDLM1, betDLM2, betAge1, betAge2, POILastName, SearchAll))
                            {
                                <div class="searchResult">
                                    <table style="background-color: #beebeb;">
                                        <tr>
                                            <td class="entryLabel">ENTRY ID</td>
                                            <td class="entryLabel">FIRST NAME</td>
                                            <td class="entryLabel">LAST NAME</td>
                                            <td class="entryLabel">DATE LAST MODIFIED</td>
                                            <td class="entryLabel">DOB</td>
                                            <td class="entryLabel">AGE</td>
                                            <td class="entryLabel">ADDRESS</td>
                                            <td class="entryLabel">VEHICLE TAG#</td>
                                            <td class="entryLabel">OFFICER</td>
                                            <td class="entryLabel">HOME PHONE</td>
                                            <td class="entryLabel">CELL PHONE</td>
                                            <td class="entryLabel">WEIGHTED AGGREGATE</td>
                                        </tr>
                                        <tr>
                                            <td class="entry">@row.EntryID</td>
                                            <td class="entry">@row.POIName</td>
                                            <td class="entry">@row.POILastName</td>
                                            <td class="entry">@row.DateLastModified</td>
                                            <td class="entry">@row.DOB</td>
                                            <td class="entry">@row.Age</td>
                                            <td class="entry">@row.Address</td>
                                            <td class="entry">@row.VehicleTag</td>
                                            <td class="entry">@row.Officer</td>
                                            <td class="entry">@row.HomePhone</td>
                                            <td class="entry">@row.CellPhone</td>
                                            <td class="entry">@row.WeightedAggregate</td>
                                        </tr>
                                        <tr>
                                            <td colspan="13" style="text-align: center;"><form method="post" action="/ComputeLookupToVAndE.cshtml"><input type="hidden"  name="veEntryID" hidden="hidden" readonly="true" value="@row.EntryID" /><br/><input type="submit" value="View & Edit" class="btn3" style="height: 40px; width: 100px;" /><br/><br/></form></td>
                                        </tr>
                                    </table>
                                </div><br/>
                                ResultCount += 1;
                            }
                            <input type="hidden" id="ResultCount" value="@ResultCount" />
                            <input id="err" type="hidden" value='@err' />
                        } 
```

来自 JAVASCRIPT 文件的部分：

```
$(document).ready(function () {
if ($("#err").val() == "err")
{
    $("#searchForm").attr('action', "/LookUpEntry.cshtml#top");
}
else
{
    $("#searchForm").attr('action', "/LookUpEntry.cshtml#searchList");
}
}); 
```

显然，如果变量errorMessage中存储了任何错误消息，我试图在C#呈现页面之前将隐藏输入元素的值更改为“err”。

一旦完成，JavaScript 应该读取这个值，然后如果它是“err”，则更改表单的 action 属性以附加“#top”（对于命名锚，因此页面上的加载位置会根据是否存在要查看的错误消息或结果），否则应更改表单的操作属性（仍由 JavaScript）以附加#searchList）。

知道为什么 JavaScript 和 C# 不能很好地协同工作吗？我得到的错误是偶然的（就像它第一次不起作用，然后根本不起作用），无论如何基于下面的代码，它仍然永远不会去（#top），尽管在尝试一些事情时在这个确切的编码之前（我不记得它们到底是什么），如果它出错了，有时（尽管从来没有第一次）会到达顶部。

为什么 jQuery 没有做好它的工作？看来这应该对我有用...

有任何想法吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:13:42.070

好吧，我想我已经弄清楚了，我想它确实有道理：

它确实会按应有的方式更改值，但是操作（表单[或者更确切地说，我查看它的方式]处理发布的数据的方式）已经设置为无论当前的结果如何，它将去哪里搜索。简而言之：落后了一步。当我单击搜索并生成错误消息时，它将按预期重写操作，但它当然只会在下一次搜索而不是当前搜索时生效，因为这已经在上一次提交中确定。

我的代码有什么问题？从语法上讲，方法论（逻辑）是错误的。

# javascript - 在 Internet Explorer 中获取 png 上的图像错误框？

> ID：12963040
> 
> 赞同：0
> 
> 时间：2012-10-18T20:18:20.010
> 
> 标签：javascript, jquery, html, css, internet-explorer

我对 Internet Explorer 有这个非常奇怪的问题。我正在使用 javascript 预加载一些图像并显示它们。它们都显示正常，但是出现了一个图像错误框。

图片在这里[http://i.imgur.com/n4Lmo.png](http://i.imgur.com/n4Lmo.png)

我以这种方式在 Javascript 中预加载图像

```
function LoadImage(imageName,imageFile)
{
 if(!document.images) return;
 document.images[imageName].src = imageFile;
}
$(document).ready(function() {
LoadImage('image0','images/image.png');
}); 
```

然后我在 html 中使用它们

```
<img name=image0 border=0> 
```

同样，所有图像都显示良好。此错误出现在所有版本的 IE 中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:20:07.113

它只是在 IE 中执行此操作的一个特定 .png 吗？您可能想在 Photoshop 之类的照片编辑器中打开图像，以确保它是 RGB、72dpi 等。不久前，当客户向我提供 CMYK JPEG 以及唯一不显示的浏览器时，我遇到了类似的问题他们是IE。将色彩空间转换为 RGB 就可以了。

确保图像将在所有浏览器中显示的最简单方法可能是 Photoshop 的 Save For Web 功能。

# sql - 如果未明确使用 ISNULL，左连接将失败

> ID：12963041
> 
> 赞同：11
> 
> 时间：2012-10-18T20:18:22.200
> 
> 标签：sql, left-join, google-bigquery

我在 google bigquery 中有一个大表**User**和一个小表**User_purchase 。**

如果我加入两者

```
SELECT User.id, User_purchase.amount FROM User 
    LEFT JOIN User_purchase on User.id = User_purchase.user_id, 
```

查询返回错误：

> 查询失败。错误：未实现：无法读取此表

但如果我加入这两者

```
SELECT User.id, ISNULL(INTEGER(User_purchase.amount), INTEGER(0)) FROM User 
    LEFT JOIN User_purchase on User.id = User_purchase.user_id, 
```

查询有效。

不太明白为什么第一种情况不起作用。我假设在第一种情况下，我可以让所有用户获得他们的 purchase_amount，尽管有些用户的 purchase_amount 为 NULL。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T03:47:19.737

这是与查询回复中的嵌套字段名称相关的错误。我已经修复了这个错误，但它要到下周发布才会消失。感谢您提请我们注意。

# plone - Plone 4.2 - 手动编辑重氮主题以更改默认徽标

> ID：12963043
> 
> 赞同：0
> 
> 时间：2012-10-18T20:18:24.720
> 
> 标签：plone, diazo

我为我的 Plone 网站安装了重氮主题。现在我需要更改正在使用的默认徽标。在[另一个问题](https://stackoverflow.com/questions/12960349/plone-4-2-how-can-i-change-the-logo-in-a-diazo-theme)中，我被指示查看主题目录中的 rules.xml 和 index.html 文件，并通过手动编辑其中一个文件来弄清楚如何更改徽标。但是，我无法弄清楚如何做到这一点。这些似乎是我的 index.html 文件中的相关行：

```
<div id="portal-header">
    <div id="portal-slogan">
        <span class="heightImmitator"></span><span>Free Theme for Plone</span>
    </div>
    <a id="portal-logo" title="Site1" href="/"><span class="heightImmitator"></span><img src="images/logoSchools.gif" alt="" title="" height="71" width="402"></a>
    <div id="portal-personaltools-wrapper">
        <h5 class="hiddenStructure">Personal tools</h5>
        <dl class="actionMenu deactivated" id="portal-personaltools">
            <dt id="anon-personalbar"><a style="cursor: pointer;" class="link-overlay" rel="#pb_1" href="/login" id="personaltools-login">Log in</a></dt>
        </dl>
    </div>
</div> 
```

这些似乎是我的 rules.xml 文件中的相关行：

```
<copy css:theme="#portal-logo" css:content="#portal-logo" attributes="href"/>
<copy css:theme="#portal-logo" css:content="#portal-logo" attributes="title"/>
<replace css:content="#portal-logo img" css:theme="#portal-logo img" /> 
```

我猜“替换”行是在告诉主题用另一个徽标替换一个徽标。但是，对我来说，如何编辑这些文件以找到我上传的徽标并不直观。顺便说一句，我上传的图像文件被调用，它位于我的主目录`nav-home1.png`中的一个名为的目录中。`site-images`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:00:40.217

如果我是你（并考虑到我在上面关于*在哪里*执行此操作的评论），我只需删除`<replace />`试图从内容中提取 Plone 徽标的规则，然后编辑你的 index.html 以直接引用你的图像文件（在这一点上，一切都只是纯 HTML）。

顺便说一句，您可能会从[http://diazo.org/](http://diazo.org/)上阅读更多关于重氮规则及其作用的信息中受益。有关 Plone 4.3 中的 in-Plone 体验的提示（即使是文本的），请参阅[http://pypi.python.org/pypi/plone.app.theming](http://pypi.python.org/pypi/plone.app.theming)。

马丁

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T22:01:07.033

我将我的徽标图像上传到 FS。我在 {ZEOHOME}/src/ 中有一个开发蛋所以，图像显示如下：

```
/usr/local/Plone/zeocluster/src/quintagroup.theme.sunrain/quintagroup/theme/sunrain/static/images/theme_rain/PF-Sig.png 
```

（有关如何添加开发蛋，请参阅构建教程...）

在主题`..theme/sunrain/static/index.html`文件中，使用如下直接引用：

```
<img src="/++theme++quintagroup.theme.sunrain/images/theme_rain/PF-Sig.png" alt="" title="PF Sig Logo" height="150" width="300"/> 
```

尺码信息就在`<img.. />`标签中。但是，在进行任何更改后，转到 Plone 的主题控制面板并停用/重新激活主题似乎很重要，以便它重新处理规则。

在过去的六个小时里，我试图在新的 Plone 4.2 中更改徽标（好吧，我有点生疏了！）

Quintagroup 只是告诉我在 ZMI 中自定义 logo.png，但这似乎是...... 2002 ;-) 我昨天花了几个小时尝试使用 4.3 主题-TTW 功能，结果发现当我创建一个TTW 副本。

既然这似乎是用户的最高要求，为什么仍然如此荒谬地难以弄清楚？这不应该是主题控制面板中简单的“上传您的新徽标图像”吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T02:33:13.857

我建议获取主题 egg 提供的静态主题文件。然后将其编辑并打包为压缩文件（用作指南-> [http://pypi.python.org/pypi/plone.app.theming/1.0#packaging-themes](http://pypi.python.org/pypi/plone.app.theming/1.0#packaging-themes)）。然后您可以从重氮控制面板上传它。

如果您想在 Plone 中操作压缩文件，您可以转到 ZMI 中的 portal_resources 并在那里编辑文件。如果要分发编辑后的文件，请从 Diazo 面板下载。

目前这有点工作，但正如 optilude 所建议的那样，Plone 4.3 中的体验应该会发生巨大变化。

如需了解 Xpath 的帮助，请使用：[http](http://www.w3schools.com/xpath/default.asp) ://www.w3schools.com/xpath/default.asp 花一些时间学习教程。这真的很容易理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:46:17.667

我的解决方案是将我的图像文件放在`~/Plone/buildout-cache/eggs/quintagroup.theme.schools-6.0.10-py2.7.egg/quintagr‌​oup/theme/schools/static/images`目录中，然后注释掉 rules.xml 中告诉 index.html 替换图像的行，然后编辑 index.html 以便它加载我的图像而不是 logoSchools.gif，它之前已经指出。这成功了，但现在我的问题是主题是从其他地方获取尺寸信息，所以图像太大了。调整 index.html 中的 height 和 width 属性没有效果。

# html - 将响应式绝对定位元素居中

> ID：12963046
> 
> 赞同：0
> 
> 时间：2012-10-18T20:18:44.617
> 
> 标签：html, css

真的没有办法在没有javascript的情况下将绝对/相对定位的元素居中吗？我知道如果元素的宽度可靠，这很容易。没有CSS解决方案吗？我是否被迫求助于javascript？

```
<body><div class="parent"><div class="child">This stuff changes</div></div></body>

.child{margin:auto;position:absolute;left:50%} // this will center the left edge
.parent{width:800px;height:430px;margin:auto;overflow:hidden;} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:32:52.230

怎么样：

```
.child {
    margin-left: auto;
    margin-right: auto;
    display: table;
} 
```

完整的演示 html：

```
<html>
<head>
    <style type="text/css" media="screen">
    .child {
        margin-left: auto;
        margin-right: auto;
        display: table;
    }
    </style>
</head>
<body>
    <!-- middle marker to test alignment -->
    <table width="100%"><tr><td align="center" width="100%">|</td></tr></table>
    <!-- actual thing we're trying to center -->
    <div class="parent">
        <div class="child">123456789|987654321</div>
    </div>
</body> 
```

（来源：[http](http://solstice.co.il/blog/2008-02-26/horizontally-centering-content-dynamic-width-css) ://solstice.co.il/blog/2008-02-26/horizo​​ntally-centering-content-dynamic-width-css ）

对于垂直居中也：

```
<html>
<head>
    <style type="text/css" media="screen">
    .parent {
        width:800px;
        height:430px;
        margin:auto;
        overflow:hidden;
        border:2px solid cyan;
        border-radius:25px;
        -moz-border-radius:25px; /* Firefox 3.6 and earlier */
    }
    .evilStepMother { /* i.e. comes between the parent and child */
        display: table-cell;
        vertical-align: middle;
        width: 800px; /* i.e. matches parent */
        height: 430px; /* i.e. matches parent */
        border:2px solid green;
        border-radius:25px;
        -moz-border-radius:25px; /* Firefox 3.6 and earlier */
    }
    .child {
        margin: auto;
        display: table;
        border:2px solid red;
        border-radius:25px;
        -moz-border-radius:25px; /* Firefox 3.6 and earlier */
    }
    </style>
</head>
<body>
    <!-- middle marker to test alignment -->
    <table width="100%"><tr><td align="center" width="100%">|</td></tr></table>
    <!-- actual thing we're trying to center -->
    <div class="parent"><div class="evilStepMother">
        <div class="child">123456789|987654321</div>
    </div></div>
</body> 
```

注意：边界只是为了更容易看到事物的布局；弯曲的角落更好。

（来源：[http](http://blog.themeforest.net/tutorials/vertical-centering-with-css/) ://blog.themeforest.net/tutorials/vertical-centering-with-css/ ）

# ios - IOS更改相机图标用于自定义相机覆盖

> ID：12963049
> 
> 赞同：0
> 
> 时间：2012-10-18T20:18:48.167
> 
> 标签：ios, flash, camera, camera-overlay

如何以及在哪里找到 iPhone 上本机相机应用程序中使用的“更改相机”和“相机闪光灯开/关”图标。我想在我的相机叠加层中使用它，但我在任何地方都找不到这个图标。有人可以告诉我在哪里可以找到这些图标，还是我必须以编程方式创建它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:30:47.733

你可以试试[UIKit Artwork Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)。不确定这些图像是否在 iOS 模拟器中，但值得一试。

# jquery - 需要调整 jQuery 颜色动画脚本以添加从最终颜色到序列中第一个颜色的过渡

> ID：12963051
> 
> 赞同：0
> 
> 时间：2012-10-18T20:19:03.447
> 
> 标签：jquery, css, jquery-animate, background-color

我正在使用以下脚本（取决于 jQuery UI）使用下面的 CSS 为 DIV 的背景颜色变化设置动画。[您可以在此页面](http://openparadigmproject.com)上看到它的实际效果 - 它改变了徽标门口的颜色（您必须等待 10 秒才能看到明显的变化）。除了从第 5 种颜色到第 1 种颜色的突然变化（即没有淡入淡出过渡）之外，过渡效果很好。我想知道是否可以更改下面的脚本以使这种过渡也起作用？

```
function changeColor(element, curNumber){
    curNumber++;

    if(curNumber > 5){
        curNumber = 1;
    }
    console.log(curNumber);
    element.addClass('color' + curNumber, 2000);
    // So previous classes get removed.
    element.attr('class', 'color' + curNumber);
    setTimeout(function(){changeColor(element, curNumber)}, 10000);  
}

changeColor($('#colourdoor'), 0); 
```

**CSS**

```
.color1{
    background:#FDFBFB;
}

.color2{
    background: #BDF0F5;
}

.color3{
    background: #E5F5BD;
}

.color4{
    background: #D4D1F5;
}

.color5{
    background: #F5EAD0;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:57:47.673

这是对我有用的代码：

```
function changeColor(element, curNumber){
    curNumber++;

    if(curNumber > 5) {
        // we are back at 1, animate removeClass instead
        curNumber = 1;

        // we don't need animation here since color5 is defined AFTER color1, (cascading)
        element.addClass('color' + curNumber);

        // we animate removeClass instead
        element.removeClass('color' + 5, 2000);
    } else {
        element.addClass('color' + curNumber, 2000);
        // So previous classes get removed.
        element.attr('class', 'color' + curNumber);
    }
    console.log(curNumber);
    setTimeout(function(){changeColor(element, curNumber)}, 10000);  
}​ 
```

# java - 通过尝试使用资源关闭套接字

> ID：12963057
> 
> 赞同：4
> 
> 时间：2012-10-18T20:19:30.930
> 
> 标签：java, sockets, bufferedreader, try-with-resources

我正在尝试编写一些具有以下基本形式的简单套接字代码 -

```
try(BufferedReader request = new BufferedReader(new InputStreamReader(sock.getInputStream()))){
//Do some work...
}
//BufferedReader gets closed, but also makes the socket close
...
...
response.write(blah);//Causes exception because socket is closed 
```

我的问题是套接字正在关闭，但我认为不应该。try-with-resources 创建了一个 BufferedReader，然后在我离开 try 块时自动关闭它，但由于某种原因，它也关闭了整个套接字！因此，当我稍后使用相同的套接字访问我的响应代码时，我得到了一个异常。有没有什么办法解决这一问题？还是我只需要不使用 try-with-resources （这不太理想）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:22:09.220

BufferedReader.close() 关闭后备流。

解决方法是不传播 close() 的“包装”流

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:22:56.053

编码 ：

```
new BufferedReader(
   new InputStreamReader(
      sock.getInputStream())) 
```

将套接字流包装到包装在 BufferedReader 中的读取器中，但它是唯一的流。

# c# - 如何在 WinRT 中播放 D 盘上的视频文件？

> ID：12963058
> 
> 赞同：1
> 
> 时间：2012-10-18T20:19:35.163
> 
> 标签：c#, video, windows-8, windows-runtime

在 Windows“Metro”应用程序中使用 XAML C# 如何播放某个视频文件。例子：

*   D:\video1.wmv
*   \\MEDIAPC\video2.wmv

到目前为止，我设法让它工作的唯一方法是使用 FilePicker，但我不想使用它，因为我已经有一个要播放的文件列表。

我曾尝试使用 GetFileFromPathAsync 但我不断收到权限/访问问题

```
 await StorageFile.GetFileFromPathAsync(@"D:\video1.wmv"); 
```

抱歉，如果这个问题已经得到解答，我只是找不到适合我的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:34:52.947

如果您的 D:\ 驱动器是非网络资源，请尝试添加可移动存储应用程序功能。这可以通过双击 Package.appxmanifest 并导航到 Capabilities 选项卡来完成。默认情况下，您的应用程序（假设它是 Windows 应用商店应用程序）只能访问与您的应用程序一起打包的本地文件或存储在本地/漫游/临时文件夹中的文件（通常为应用程序状态保留）。

如果您的数据存储在需要身份验证的网络资源上，您将需要启用企业身份验证功能。

如果您不访问需要网络身份验证的资源，您可能还想为 \MEDIAPC\ 文件调整家庭和工作网络。

进一步阅读：

*   [访问数据和文件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh758319)
*   [如何从文件中加载数据](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965322)
*   [应用功能概览](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#removable_storage)

# python - 将参数传递给python webpy中的另一个方法

> ID：12963059
> 
> 赞同：0
> 
> 时间：2012-10-18T20:19:36.477
> 
> 标签：python, web.py

我正在尝试将参数传递给另一个方法，但我遇到了异常。

```
import web
import json

class Process:
    def request(self, query_string):
        print query_string
    def GET(self):
        params  = web.input()
        request(params)
        return json.dumps(dict(foo=55)) 
```

这给了我。

```
<type 'exceptions.NameError'> at /process
global name 'request' is not defined 
```

谁能解释为什么我不能将变量传递给另一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:12:46.297

替换 `request(params)`为 `self.request(params)`

所有关系都必须在 python 中明确说明。它不像 C++ 或 Java，类函数彼此自动可见。您必须明确引用 self 才能访问它们。

# ios - NSString 中的字符代码到 unicode 字符

> ID：12963067
> 
> 赞同：3
> 
> 时间：2012-10-18T20:19:57.677
> 
> 标签：ios, objective-c, unicode, character-encoding, emoticons

我有一个`NSString`这样的`charactercode`：`0x1F514`。我想把`NSString`它添加到另一个`NSString`，但不是用它的字面值，而是隐藏在它后面的图标。在这种情况下，一个铃铛的表情符号。

我怎样才能轻松地将其转换`NSString`为显示表情符号而不是字符代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:23:46.070

这样的事情会做：

```
NSString *c = @"0x1F514";

unsigned intVal;
NSScanner *scanner = [NSScanner scannerWithString:c];
[scanner scanHexInt:&intVal];

NSString *str = nil;
if (intVal > 0xFFFF) {
    unsigned remainder = intVal - 0x10000;
    unsigned topTenBits = (remainder >> 10) & 0x3FF;
    unsigned botTenBits = (remainder >>  0) & 0x3FF;

    unichar hi = topTenBits + 0xD800;
    unichar lo = botTenBits + 0xDC00;
    unichar unicodeChars[2] = {hi, lo};
    str = [NSString stringWithCharacters:unicodeChars length:2];
} else {
    unichar lo = (unichar)(intVal & 0xFFFF);
    str = [NSString stringWithCharacters:&lo length:1];
}

NSLog(@"str = %@", str); 
```

根本`@"\u1f514"`不起作用的原因是因为这些`\u`值不能在 BMP 之外，即 >0xFFFF，即 >16 位。

因此，我的代码所做的是检查该场景并使用相关的[代理对魔术](http://en.wikipedia.org/wiki/UTF-16#Code_points_U.2B10000_to_U.2B10FFFF)来制作正确的字符串。

希望这实际上是您想要的并且有意义！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:36:42.760

If your NSString contains this "bell" character, then it does. You just append strings the usual way, like with `stringByAppendingString`.

The drawing of a bell instead of something denoting an unknown character is a completely separate issue. Your best bet is to ensure you're not using CoreText for drawing this, as it's been reported elsewhere, and I've seen it myself at work, that various non-standard characters may not work when printed that way. They do work, however, when printed with UIKit (that should be standard UI components, UIKitAdditions, and so on).

If using CoreText, you might get a bit lucky if you disable some text properties for the string with this special character, or choose appropriate font (but I won't help you here; we decided to leave the issue as Won't fix).

Having said that, the last time I was dealing with those was in pre-iOS 6 days...

Summary: your problem is not appending strings, but how you draw them.

# c++ - 覆盖扩展现有功能的方法

> ID：12963068
> 
> 赞同：1
> 
> 时间：2012-10-18T20:20:02.043
> 
> 标签：c++, inheritance, overriding

我有一个类`Child`，继承自类`Parent`。类`Parent`有一个虚拟的受保护方法`_parentClassMethod(int a, int b)`。此方法用于类的方法中`Child`：

```
void Child::_childClassMethod(int c, int d)
{
//some code
_parentClassMethod(int a, int b);
//some more code
} 
```

我的问题是：在从类中`_parentClassMethod`调用时，我需要做不同的函数调用。`Child`我正在空白，但是除了重新定义整个课堂之外`_parentClassMethod`，还有更好的方法吗？`Child`

parentClassMethod 的定义：

```
void Parent::_parentClassMethod(int a, int b){
//lots of other code
setSomethingFunction(val1, val2, val3);/*this function cannot be made virtual since it               writes to the eeprom of a device*/
//lot more code
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:32:14.820

如果要从子方法调用父方法，可以这样做：

```
void Child::themethod(int c, int d)
{
    Parent::themethod(c,d);
    // ...
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T20:24:36.340

在父类中定义一个虚函数并在子类中覆盖（感谢@k-ballo）它。

```
class base {
public:
    virtual void f() { /* do parent thing */ }
    void _parentClassMethod(int a, int b) {
        // something
        f();
        // more stuff
    }
};

class derived : public base {
public:
    virtual void f() { /* do child thing */ }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:23:32.330

有两种方法可以解决这个问题：

1.  覆盖子类中的方法/函数。
2.  定义一个开关，使它在父类的`_parentClassMethod()`

最好的方法是覆盖该功能。

我所说的第二种方法是：

```
void Parent::_parentClassMethod(int a, int b, int switchx)
{
   switch(switchx){
     case 0:
       /*behave normally*/ break;
     case 1:
       /*behave abnormally*/break;
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:30:16.063

如果您不能覆盖 setSomethingFunction()，那么只需覆盖 _parentClassMethod()。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:31:35.303

刚刚为此任务创建了一个设计模式：[模板方法模式](http://en.wikipedia.org/wiki/Template_method_pattern)。

创建虚拟方法调用您不想使其成为虚拟的方法：

```
class Parent {
  virtual void _parentClassMethod(int a, int b);
protected:
  virtual void _parentClassMethodSetSth(val1, val2, val3, ...)
  {
      setSomethingFunction(val1, val2, val3);
  }

};

void Parent::_parentClassMethod(int a, int b){
  //lots of other code
  _parentClassMethodSetSth(val1, val2, val3);
  //lot more code
} 
```

`_parentClassMethodSetSth`并在 Child 中覆盖。

# javascript - 用户滚动后触发 jquery .animate

> ID：12963069
> 
> 赞同：3
> 
> 时间：2012-10-18T20:20:14.220
> 
> 标签：javascript, jquery, html, jquery-ui

我试图弄清楚为什么这个脚本不起作用。我所拥有的是`div`隐藏在另一个后面`div`，并且需要它在用户滚动页面后进行动画处理。

这是我的脚本：

```
$(document).scroll(function(){   
    var top = $(document).scrollTop();

    if (top > 50) {        
      $('#merch').animate({ bottom: 200 }, 
        {duration: 1000, easing: 'easeOutBounce'});         
        }        
    else {
      $('#merch').slideDown();
    }        
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:40:33.307

```
$(document).scroll(function(){   
var top = $(document).scrollTop();

if (top > 50) {        
  $('#merch').animate({ top: '500px' }, 
    {duration: 1000});        
    }        
else {
  $('#merch').slideDown();
}        }); 
```

1.  我收到一个关于您传递的缓动值的错误，可能需要调查一下。
2.  动画值需要用 px 值括在引号中

3.  确保商品具有“位置：相对；” 在 CSS 中。没有它，jQuery 无法移动元素

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T00:48:37.303

没有 onscrollcomplete 功能，但您可以一起使用猴子扳手：

```
var int;

$(window).scroll(function(){
    clearTimeout(int);
    int = setTimeout(function(){
        //animation here
    }, 300);
}); 
```

等待 300 毫秒，然后触发动画函数将 div 拉到页面顶部。

# testing - 屏幕分辨率测试

> ID：12963070
> 
> 赞同：1
> 
> 时间：2012-10-18T20:20:14.623
> 
> 标签：testing, screen, resolution

有谁知道用于测试不同屏幕分辨率的网站的桌面应用程序？我正在寻找桌面应用程序的原因是因为我希望能够测试具有内部 URL 的网站 [当然我想在我的计算机上不可用的分辨率下进行测试）。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-30T10:03:01.760

我有类似的问题。您可以为此编写`JUnit`和`Selenium`测试应用程序。没什么大不了的，只需更改驱动程序对象的屏幕分辨率并自动获取打印屏幕。图像文件存储在您的项目中，因此您可以在测试站点的所有分辨率后查看。这是代码：

```
public class TestCase1 {

    /**
     * 
     */
    private WebDriver driver;

    private String url;

    public TestCase1() {
    }

    @BeforeClass
    public static void setUpClass() {
    }

    @AfterClass
    public static void tearDownClass() {
    }

    @Before
    public void setUp() {
        // array of test urls
        this.url = "http://www.google.com/";

        // ChromeDriver
        //System.setProperty("webdriver.chrome.driver", PATH_TO_CHROMEDRIVER);
        //driver = new ChromeDriver();

        driver = new FirefoxDriver();

        driver.get(this.url);
    }

    @After
    public void tearDown() {
        driver.quit();
    }

    @Test
    public void testResolution() {
        driver.navigate().to(this.url);

        String[] resulutions = {
            "1366x768",
            "1920x1080"
            // add resolution
        };

        for (String resulution : resulutions) {
            String[] parts = resulution.split("x");

            // Screen resolution
            Dimension screenRes = new Dimension(Integer.parseInt(parts[0]),Integer.parseInt(parts[1]));

            // Set browser resolution
            driver.manage().window().setSize(screenRes);

            // little pause
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                //Logger.getLogger(TestClass.class.getName()).log(Level.SEVERE, null, ex);
            }

            driver.navigate().refresh();

            // little pause
            try {
                Thread.sleep(1000);
            } catch (InterruptedException ex) {
                //Logger.getLogger(TestClass.class.getName()).log(Level.SEVERE, null, ex);
            }

            this.takeScreenShot(resulution);
        }

    }

    /**
     * 
     * @param fileName 
     */
    private void takeScreenShot(String fileName) {
        File screenShot = ((TakesScreenshot) driver).getScreenshotAs(OutputType.FILE);
        try {
            FileUtils.copyFile(screenShot, new File(fileName + ".png"));
        } catch (IOException ioe) {
            throw new RuntimeException(ioe.getMessage(), ioe);
        }
    }

} 
```

这是设置测试项目、导入 selenium 和您需要执行此操作的其他人员的[链接。](http://nikolaloncar.com/testing-web-app-or-site-automatically-on-different-screen-resolutions/)

# sql-server-2008 - 分隔整数目录的完整“文本”类型搜索替代方案/解决方案？

> ID：12963072
> 
> 赞同：0
> 
> 时间：2012-10-18T20:20:22.127
> 
> 标签：sql-server-2008, search, delimiter

我需要替代全文目录/索引的文本/字符串，因为我正在使用整数值。有没有比使用“like”搜索某种分隔的整数目录更快的东西？（每个分隔的整数都应该在整个目录中进行索引，而不仅仅是将每个单元格的值作为一个单元？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:33:04.720

全文搜索最终成为我的解决方案。我刚刚关闭了整数 StopList 值，以便可以索引/搜索仅整数字符串。

# javascript - 我正在尝试在包含材料的 div 上添加透明覆盖，我该怎么做？

> ID：12963073
> 
> 赞同：0
> 
> 时间：2012-10-18T20:20:23.137
> 
> 标签：javascript, html, css

透明覆盖是灰色的，应该包含一个进度条，阻止使用它在浏览器中覆盖的 div，直到进度条完成。我也希望在不使用闪光灯的情况下做到这一点。我该怎么做？

```
 div.transparent_lists
{
 clear:both;
 border-top-style:solid;
 border-bottom-style:solid;
 opacity:0.6;
 filter:alpha(opacity=60);
 border-bottom-color: #A9A9A9;
 border-top-color: #A9A9A9;
 border-bottom-width: thin;
 border-top-width: thin;
 z-index: 1000;
 display: block;
 height: 20px;
 position: absolute;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:00:26.087

可以同时使用[jquery UI 进度条](http://jqueryui.com/progressbar/#animated)和[blockUI](http://www.malsup.com/jquery/block/)实现带进度条的叠加。这是一个快速而肮脏的[例子](http://jsfiddle.net/Bb2qh/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:29:13.980

您可以执行以下操作：

```
<div id="parent" style="position:relative;height:200px;width:200px;overflow:hidden;">
    Lorem ipsum dolor sit amet, consectetuer adipiscing elit, sed diam nonummy nibh euismod tincidunt ut laoreet dolore magna aliquam erat volutpat. Ut wisi enim ad minim veniam, quis nostrud exerci tation ullamcorper suscipit lobortis nisl ut aliquip ex ea commodo consequat. Duis autem vel eum iriure dolor in hendrerit in vulputate velit esse molestie consequat, vel illum dolore eu feugiat nulla facilisis at vero eros et accumsan et iusto odio dignissim qui blandit praesent luptatum zzril delenit augue duis dolore te feugait nulla facilisi. Nam
    <div id="overlay" style="position:absolute;top:0px;left:0px;width:200px;height:200px;background-color:#ccc;opacity:.8;padding-top:90px;text-align:center;">
        Content for overlay here
    </div>
</div> 
```

您可以根据需要隐藏/显示覆盖元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:29:20.573

将该父级设置为`position: relative`，将透明子级设置为`position: absolute`：

```
div {
  width: 500px;
  height: 200px;
  position: relative;
}

div div {
  width: 100px;
  height: 50px;
  background: black;
  opacity: 0.5;
  position: absolute;
  top: 50px;
  left: 200px;
} 
```

[演示](http://codepen.io/bookcasey/pen/sfruy)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:31:45.473

你将如何实现它取决于你正在加载什么以及如何加载，但是......

如果是我，我会使用 CSS 转换和进度事件（假设它是 AJAX）来确定进度条的大小。

*   [https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)

*   [https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest)

# javascript - 重置后如何使用新的主干收集数据填充视图？

> ID：12963079
> 
> 赞同：0
> 
> 时间：2012-10-18T20:20:36.577
> 
> 标签：javascript, jquery, html, json, backbone.js

我有一个名为的模型`TimesheetRow`和一个名为`TimesheetRows`.

如果我调用`TimesheetRows.reset(newCollection);`where是JSON 格式`newCollection`的四个模型的集合，我的页面上会出现四个新的模型视图。`TimesheetRow`

如何使用新集合中的值填充这些输入并选择字段？我注意到，如果我更改四个模型之一上的字段，则集合本身会正确更新，这似乎是一种单向绑定（这有意义吗？）。

这是一些代码，我为数量道歉。

```
var TimesheetRow = Backbone.Model.extend({

        defaults: function () {
            return {
                MondayHours: 0,
                TuesdayHours: 0,
                WednesdayHours: 0,
                ThursdayHours: 0,
                FridayHours: 0,
                SaturdayHours: 0,
                SundayHours: 0,
                JobNo_: null,
                PhaseCode: null,
                TaskCode: null,
                StepCode: null,
                WorkTypeCode: null,
                Description: "",
            };
        },

        clear: function () {
            this.destroy();
        }
    });

var TimesheetRowList = Backbone.Collection.extend({

    model: TimesheetRow,

});

var TimesheetRows = new TimesheetRowList;

var TimesheetRowView = Backbone.View.extend({

    template: _.template($('script.timesheetTemplate').html()),

    events: {,
        "change input"                      : "changed",
        "change select"                     : "changed"
    },

    render: function () {
        Backbone.Model.bind(this);
        this.$el.html(this.template(this.model.toJSON())).hide().slideDown();  
        return this;
    },

    initialize: function () {
        _.bindAll(this, "changed");
        //this.model.bind('change', this.render, this);
        //this.model.bind('reset', this.render, this);
        this.model.bind('destroy', this.remove, this);
    },

    changed: function (evt) {
        var changed = evt.currentTarget;
        var value = this.$("#"+changed.id).val();
        var obj = "{\""+changed.id.replace("Timesheet", "") +"\":\""+value+"\"}";
        var objInst = JSON.parse(obj);
        this.model.set(objInst);
    },

});

var TimesheetRowsFullView = Backbone.View.extend({

    el: $("#timesheet-rows-container-view"),

    events: {
        "click #add-new-timesheet-row"      : "createRow",
        "click #submit-new-timesheet"       : "submitTimesheet",
        "click #request-sample-timesheet"   : "requestTimesheet"

    },

    initialize: function () {
        TimesheetRows.bind('add', this.addOne, this);
        TimesheetRows.bind('reset', this.addAll, this);
        TimesheetRows.bind('all', this.render, this);

    },

    addOne: function (timesheetrow) {
        var view = new TimesheetRowView({ model: timesheetrow });
        this.$("#timesheet-start-placeholder").prepend(view.render().el);
    },

    addAll: function () {
        TimesheetRows.each(this.addOne);
    },

    render: function () {
        //Is this the code I'm missing?

    },

    createRow: function () {
        TimesheetRows.create();
    },

    requestTimesheet: function () {
        //newCollection is retrieved from database in code that I've excluded.
        TimesheetRows.reset(newCollection);

    }

});

var TimesheetRowsFullViewVar = new TimesheetRowsFullView(); 
```

在我的`changed`函数中，我包含`Timesheet`前缀，因为我在这些字段上的 ID 都带有前缀`Timesheet`。

我知道我的新 JSON 集合对象格式正确。

TimesheetRowView 函数中注释掉的两行在`initialize`我更新字段时给我带来了麻烦。我不确定它们是否需要。

问题：

1.  当我“重置”时，我以前的模型视图仍然存在，我将如何摆脱它们？我应该使用 JQuery 吗？

2.  我希望在某些时候我需要重新添加`Timesheet`前缀，以便模型找到正确的 ID。我应该在哪个步骤或哪个功能中执行此操作？（这与我提到的“单向绑定”有关。）

3.  我一直在关注 TODO 应用程序，但在 FullView 中，我没有发现`render`函数中的任何代码对我来说是必需的。这是我缺少代码的地方吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T13:01:35.217

`collection.reset()`如果您将模型作为参数传递，则仅从您的集合中删除模型并将其他集合放入其中。

要将您的视图从 DOM 中删除，您应该自己做。

一种方法是在所有操作完成后监听`reset`它触发的事件，并创建一个从 DOM 中删除视图的方法。

或者

只需使用您的方法删除`requestTimesheet`即可。

# c - 用顶点数组绘制一系列点：没有显示

> ID：12963080
> 
> 赞同：1
> 
> 时间：2012-10-18T20:20:50.443
> 
> 标签：c, opengl, glut, vertex-array

我正在尝试执行以下操作：有一个点数组，通过一对 GLfloats 表示。用户应该单击窗口中的一个点以显示另一个点。添加一个点时，窗口应为重新绘制后，点应显示为与线相连。因此用户应能够通过单击窗口的某些位置来绘制线。
在这段代码中，只要有点击，我就会在向量中推送一个点，但没有添加这些点，所以我只看到没有点的灰色窗口（在标题中定义的 APPLE_GRAY）。

```
#include <OpenGL/OpenGL.h>
#include <GLUT/GLUT.h>
#include <stdio.h>
#include <stdlib.h>
#include "utility.h"

const int width=500;
const int height=500;

GLfloat* points;
size_t size=100;
int count=0;

void pushPoint(GLfloat x, GLfloat y)
{
    count++;
    if(count>size)
    {
        size+=100;
        points=(GLfloat*)realloc(points,2*size*sizeof(GLfloat));
    }
    points[2*count-2]=x;
    points[2*count-1]=y;
}

void init()
{
    points=(GLfloat*)malloc(2*size*sizeof(GLfloat));
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glLoadIdentity();
    glOrtho(0, width, height, 0, 0, 1);
    glViewport(0, 0, 500, 500);
    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
}

void display()
{
    glClearColor(APPLE_GRAY);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor4f(RED);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_FLOAT, 0, points);
    glDrawElements(GL_LINE_LOOP,count,GL_FLOAT,points);
    glFlush();
    glDisableClientState(GL_VERTEX_ARRAY);
}

void mouse(int button, int state, int x, int y)
{
    if(state)
    {
        pushPoint(x, y);
        glutPostRedisplay();
    }
}

void motion(int x, int y)
{
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(width,height);
    glutCreateWindow("Test");
    glutDisplayFunc(display);
    glutMouseFunc(mouse);
    glutMotionFunc(motion);
    init();
    glutMainLoop();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:36:25.537

[Again](https://stackoverflow.com/a/12957136/44729), `glutInitDisplayMode()` needs to be called *before* `glutCreateWindow()`.

`GL_FLOAT` is not a valid value for `type` in [`glDrawElements()`](http://www.opengl.org/sdk/docs/man/xhtml/glDrawElements.xml#parameters). Also, `points` is not an index array.

Use [`glDrawArrays()`](http://www.opengl.org/sdk/docs/man/xhtml/glDrawArrays.xml):

```
#include <GL/glut.h>

const int width=500;
const int height=500;

GLfloat* points;
size_t size=100;
int count=0;

void pushPoint(GLfloat x, GLfloat y)
{
    count++;
    if(count>size)
    {
        size+=100;
        points=(GLfloat*)realloc(points,2*size*sizeof(GLfloat));
    }
    points[2*count-2]=x;
    points[2*count-1]=y;
}

void init()
{
    points=(GLfloat*)malloc(2*size*sizeof(GLfloat));
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    glOrtho(0, width, height, 0, 0, 1);
    glEnable(GL_DEPTH_TEST);
}

void display()
{
    glClearColor(0,0,0,0);
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glColor3ub(255,0,0);
    glEnableClientState(GL_VERTEX_ARRAY);
    glVertexPointer(2, GL_FLOAT, 0, points);
    glDrawArrays(GL_LINE_LOOP,0,count);
    glDisableClientState(GL_VERTEX_ARRAY);
    glutSwapBuffers();
}

void mouse(int button, int state, int x, int y)
{
    if(state)
    {
        pushPoint(x, y);
        glutPostRedisplay();
    }
}

int main(int argc, char** argv)
{
    glutInit(&argc, argv);
    glutInitWindowPosition(100, 100);
    glutInitWindowSize(width,height);
    glutInitDisplayMode(GLUT_RGB | GLUT_DOUBLE | GLUT_DEPTH);
    glutCreateWindow("Test");
    glutDisplayFunc(display);
    glutMouseFunc(mouse);
    init();
    glutMainLoop();
    return 0;
} 
```

# makefile - 想要将所有 .o 文件放到一个目录中，但在编译第一个后停止

> ID：12963081
> 
> 赞同：0
> 
> 时间：2012-10-18T20:20:51.457
> 
> 标签：makefile

我希望有一个包含显式依赖项的简洁生成文件，但将所有 .o 对象放在一个单独的目录中，以便稍后将其完全链接（在另一个文件中）。

问题是我的 make 在编译第一个源代码后停止，然后停止而没有任何错误。

```
CC=gcc
CFLAGS=-c -Wall -pedantic -std=c99

DIR=../obj

$(DIR)/CList.o : CList.c CList.h CList_aux.h Observation.h CList_View_aux.h
    $(CC) $(CFLAGS) CList.c -o $@
$(DIR)/CList_aux.o : CList_aux.c CList.h CNode.h
    $(CC) $(CFLAGS) CList_aux.c -o $@
$(DIR)/CList_View_aux.o : CList_View_aux.c CNode.h Observation.h
    $(CC) $(CFLAGS) CList_View_aux.c -o $@
$(DIR)/CNode.o : CNode.c CNode.h CNode_aux.h Observation.h CList.h
    $(CC) $(CFLAGS) CNode.c -o $@
$(DIR)/CNode_aux.o : CNode_aux.c CNode.h Observation.h
    $(CC) $(CFLAGS) CNode_aux.c -o $@
$(DIR)/Observation.o : Observation.c Observation.h Observation_aux.h CNode.h
    $(CC) $(CFLAGS) Observation.c -o $@
$(DIR)/Observation_aux.o : Observation.c Observation.h
    $(CC) $(CFLAGS) Observation_aux.c -o $@
$(DIR)/Record.o : Record.c Record.h Observation.h
    $(CC) $(CFLAGS) Record.c -o $@ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:34:47.567

默认情况下，`make`构建 makefile 中的第一个目标。在这种情况下，即`${DIR}/CList.o`。

您需要一个不同的第一个目标，通常称为`all`：

```
OBJECTS = \
    $(DIR)/CList.o \
    $(DIR)/CList_aux.o \
    $(DIR)/CList_View_aux.o \
    $(DIR)/CNode.o \
    $(DIR)/CNode_aux.o \
    $(DIR)/Observation.o \
    $(DIR)/Observation_aux.o

all: ${OBJECTS} 
```

请注意，无论是否有任何目标文件，这都有效`${DIR}`；在目录中查找目标文件的通配符可确保那些已经编译过一次的文件是最新的，但不会尝试构建那些以前编译失败或根本不存在的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:26:27.977

如果 Makefile 真的和你发布的一样多，那么你就错过了`all:`规则。在没有明确`all`规则的情况下，make 假定要制定第一个当前规则，因此它在此之后停止。为了实现您想要的，将其添加（附加）到 Makefile（分别更改最终的可执行文件名称）：

```
OBJECTS = $(wildcard $(DIR)/*.o)

all: $(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS)
        $(LD) $(LDFLAGS) -o $@ $^ 
```

# c# - WPF中的拖放

> ID：12963083
> 
> 赞同：5
> 
> 时间：2012-10-18T20:21:00.827
> 
> 标签：c#, .net, wpf, events, drag-and-drop

我的 WPF 应用程序中有一个`TreeView`and `Canvas`。我正在尝试实现用户可以拖动 TreeViewItem 的功能，并且当用户放在画布上时应该调用一个方法，将 TreeViewItem 标头作为参数传递给该方法。

这是我到目前为止所做的：

```
private void TreeViewItem_PreviewMouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
     if (e.Source.GetType().Name.Equals("TreeViewItem"))
     {
         TreeViewItem item = (TreeViewItem)e.Source;

         if (item != null)
         {
              DataObject dataObject = new DataObject();
              dataObject.SetData(DataFormats.StringFormat, item.Header.ToString());
              DragDrop.DoDragDrop(item, dataObject, DragDropEffects.Copy);
         }
     }
 } 
```

当我拖放到画布上时，什么也没有发生。因此，我不确定下一步应该做什么。我觉得这真的很小，但我不知所措。如何调用该方法并检测到标头已被删除？

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:25:28.540

您需要在目标元素上设置`AllowDrop`为 true，然后在目标元素上处理`DragOver`和`Drop`事件。

例子：

```
 private void myElement_DragOver(object sender, DragEventArgs e)
    {
        if (!e.Data.GetDataPresent(typeof(MyDataType)))
        {
            e.Effects = DragDropEffects.None;
            e.Handled = true;
        }
    }

    private void myElement_Drop(object sender, DragEventArgs e)
    {
        if (e.Data.GetDataPresent(typeof(MyDataType)))
        {
            // do whatever you want do with the dropped element
            MyDataType droppedThingie = e.Data.GetData(typeof(MyDataType)) as MyDataType;
        }
    } 
```

# javascript - 修改或替换 Facebook 点赞按钮弹出框

> ID：12963085
> 
> 赞同：2
> 
> 时间：2012-10-18T20:21:06.670
> 
> 标签：javascript, facebook, facebook-like, facebook-javascript-sdk, facebook-social-plugins

我有一个客户强烈喜欢 Facebook 的“分享”按钮而不是“喜欢”按钮的项目。我需要稍微修改“like”以说服他们使用它。我很清楚“共享”按钮已被弃用（并因此而出现问题），但他们一直非常坚持。

除了按钮的措辞之外，他们似乎更喜欢的是“共享”按钮弹出窗口，它还允许用户通过单击它来更改默认文本（由 Facebook 的开放图形标签提供，即 og:description 等） .

如果“喜欢”按钮的功能更像“分享”，也许可以让他们使用“喜欢”按钮。是否有可能以某种方式让“喜欢”按钮弹出对话框（当您单击按钮并具有 og:title、og:image、og:description 等标签时出现）出现在弹出窗口中？最好能够让用户通过单击它来更改该文本，因为“共享”弹出窗口允许？

他们也想要计数器，否则我只会在下面使用带有锚标记的 css。

我尝试了以下方法，但“喜欢”按钮没有运气。谷歌将被我的网站和它自己的 og 标签所取代：

```
 <html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">

    <head></head>

    <body>

        <div id="fb-root"></div>
         <script>

          function share() {
             FB.ui({
                 method: 'stream.share',
                 u: 'www.google.com',
              });
          };

          (function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (d.getElementById(id)) return;
              js = d.createElement(s); js.id = id;
              js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
              fjs.parentNode.insertBefore(js, fjs);
          }(document, 'script', 'facebook-jssdk'));

        </script>

        <fb:like id="fbLike" href="www.google.com" onclick="share();" send="false" layout="box_count" show_faces="false" ></fb:like>

        <a href="#/" onclick="share();">Can I get the like button to work like this?</a>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T07:06:05.480

为什么不使用提要对话框在用户墙上分享。有没有什么特别的理由不使用它，我错过了？

调用提要对话框的代码将是这样的：

```
 function share() {
        FB.ui({
        method: ‘feed’,
        link: ‘link of where the user should land when he click on post goes here’,
        picture: ‘picture url goes here’,
        name: ‘Name goes here’,
        caption: ‘Caption goes here e.g www.google.com’,
        description: ‘description goes here’}, 
        function (response) {
                      if (!response || response.error) {
                    //When posting fails
                      } else {
                    //When posting succeeds
          }
    );
} 
```

您可以在此处找到更多详细信息：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:14:32.887

Well, it seems that nobody has a workaround. I guess if somebody finds my anchor example useful to create a custom share button (even though it's deprecated - seriously, unless you're in my boat, help yourself out and just use like), at least my problem's helped somebody out. I've found that adding:

```
 style="overflow:hidden" 
```

to the fb:like tag, and then adding the following code to the beginning of the script block (just before the share function):

```
 window.fbAsyncInit = function() {
        FB.init({
            appId: ''
        });
        FB.Event.subscribe('edge.create', function(response) {
            share();
        });
    }; 
```

will hide the like dialog, and use the share popup when the user clicks the like button (the edge.create listens for the user like action). The problem, though, is that the user will then have two posts on the user's wall - one for the like action, and another for the share. With both posting, as expected, the same open graph tag title, image, and description information, only with one post saying they 'liked' and the other saying they 'shared'. But I'd need to prevent the 'like' one. And the counter will, of course, increment by 2\. Close, but not quite good enough.

Any way to just make the like dialog box appear in a popup window?

# vb.net - VB DataView.RowFilter 和 Cast Before Compare

> ID：12963092
> 
> 赞同：1
> 
> 时间：2012-10-18T20:21:30.713
> 
> 标签：vb.net, dataview

在以下 DataView.Rowfilter 过滤器中，Request_Date 是一个 smalldatetime：

```
dv.RowFilter = "Request_Date >= '01/01/2012' and Request_Date <= '12/31/2012'" 
```

这样做的问题是 smalldatetime 是`MM/dd/yyyy hh:mm:ss`，但它与具有格式的字符串进行比较`'MM/dd/yyyy'`。这意味着过滤器将自动将字符串转换为 smalldatetime，因此比较仅显示 2012 年 1 月 1 日凌晨 12 点和 2012 年 12 月 31 日凌晨 12 点之间的日期/时间。此过滤器不会拾取任何日期晚于 2012 年 12 月 31 日的行。我知道我可以在结束日期上添加一天，或者将 12:59:59 连接到日期的结束以接听一天中的其他时间，但我希望能有更优雅的东西的 sql 等价物 ... `CONVERT(smalldatetime, Request_Date, 101) <= '12/31/2012'`。有什么方法可以为 DataView 字段获取不同的日期格式，或者我是否在比较之前一直在按摩结束日期？

仅供参考，目前最好的选择是：

```
dv.RowFilter = "Request_Date >= #" & dtpStartDate.DateText & "# and Request_Date <= #" & DateAdd(DateInterval.Day, 1, dtpEndDate.DateValue) & "#" 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:35:10.157

如果您至少使用 .NET 3.5，则可以使用`Linq-To-DataSet`更具可读性的版本：

```
DataTable filtered = dv.Table
          .AsEnumerable()
          .Where(r => r.Field<DateTime>("Request_Date") >= dtpStartDate.Value
                   && r.Field<DateTime>("Request_Date") < dtpEndDate.Value.AddDays(1))
          .CopyToDataTable(); 
```

添加`using.System.Linq;`和引用`System.Data.DataSetExtensions.dll`.

编辑：我刚刚看到 VB.NET 被标记：

```
Dim filtered = From row In dv.Table
           Where row.Field(Of DateTime)("Request_Date") >= dtpStartDate.Value AndAlso _
                 row.Field(Of DateTime)("Request_Date") < dtpEndDate.Value.AddDays(1)
Dim tblFiltered = filtered.CopyToDataTable() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T12:39:20.917

不要使用“<= 12/31/2012”，而只需使用“< 1/1/2013”​​——这是最优雅的，并且可以得到你想要的。

# c# - 如何在鼠标位置上方显示弹出窗口？

> ID：12963094
> 
> 赞同：1
> 
> 时间：2012-10-18T20:21:50.687
> 
> 标签：c#, wpf, popup, contextmenu

我的应用程序中有一个`DataGrid`控件，我在其中`Popup`为某些操作添加了自定义项。基本的事情是：我有一个`double`数字矩阵显示在`DataGrid`. 右键单击选定的单元格将出现一个弹出窗口，用户可以在其中键入一个值，然后按 Enter 以移动选定的值（所有选定的值都将随着输入的值递增）

这是当前的行为：

![移位弹出](../Images/4676e448851f8277e337c9713d90fb09.png)

以及弹出窗口的 XAML 代码：

```
<Style x:Key="ShiftPopupStyle" TargetType="{x:Type Popup}">
    <Setter Property="IsOpen" Value="False" />
    <Setter Property="StaysOpen" Value="False" />
    <Setter Property="AllowsTransparency" Value="True" />
    <Setter Property="PopupAnimation" Value="Fade" />
    <Setter Property="Placement" Value="Mouse" />
    <Setter Property="Child">
        <Setter.Value>
            <Border BorderBrush="Navy" Background="AliceBlue" BorderThickness="1" CornerRadius="2">
                <StackPanel Orientation="Horizontal" Margin="5">
                    <TextBox Text="{Binding ShiftValue, UpdateSourceTrigger=PropertyChanged}" Width="30" Margin="4" >
                        <TextBox.InputBindings>
                            <KeyBinding Command="{Binding ShiftCommand}" Key="Enter" />
                        </TextBox.InputBindings>
                    </TextBox>
                    <Button Content="Shift" Margin="0,4,0,4"
                            Command="{Binding ShiftCommand}"/>
                </StackPanel>
            </Border>
        </Setter.Value>
    </Setter>
</Style> 
```

这是我打开的`Popup`方法，这个方法位于我的自定义中`DataGrid`（我使用自定义`DataGrid`能够显示二维数组中的值）：

```
protected override void OnMouseRightButtonUp(System.Windows.Input.MouseButtonEventArgs e)
{
    if (!this.IsReadOnly)
    {
        this.shiftPopup.IsOpen = true;
    }
    base.OnMouseRightButtonUp(e);
} 
```

现在，我需要在`ContextMenu`我的`DataGrid`. 当我尝试`ContextMenu`直接在 上添加 a 时`DataGrid`，我可以在网格初始化之前看到它，但之后只`Popup`显示。完全没有`ContextMenu`。我原以为他们会在同一个位置，但`ContextMenu`只是不会出现。

理想情况下，我需要的是类似 Office 的`ContextMenu`：

![办公室弹出](../Images/120c1af83d16709a2998be7f8d94bd7b.png)

其中，我的 shift Popup 将出现在鼠标指针上方，而 my`ContextMenu`在通常的位置。

如果需要，我不在乎有一个固定的布局（上面的布局/下面的上下文菜单，无论鼠标位置是什么）。

你对如何做到这一点有任何想法吗？

或者，我正在考虑将`Popup`内容包含在 contextMenu 中，希望它最终不会变得丑陋。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:31:08.170

这个想法是覆盖默认`ContextMenu`模板。

结果：

![在此处输入图像描述](../Images/285e904aaf887432ed88e5a0719fcecb.png)

添加引用`PresentationFramework.Aero.dll`并尝试以下代码：

```
<Window 
    x:Class="WpfApplication1.MainWindow" 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:System="clr-namespace:System;assembly=mscorlib"
    xmlns:theme="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero" 
    Title="MainWindow"
    Height="350" Width="525">

    <Window.Resources>
        <Style x:Key="MenuStyle" TargetType="{x:Type ContextMenu}" BasedOn="{StaticResource {x:Type ContextMenu}}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ContextMenu}">
                        <StackPanel>
                            <theme:SystemDropShadowChrome Name="Shdw2" Color="Transparent" SnapsToDevicePixels="true">
                                <Border Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}" 
                                        BorderThickness="{TemplateBinding BorderThickness}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBox Text="{Binding ShiftValue, UpdateSourceTrigger=PropertyChanged}"
                                                 Width="30" Margin="4">
                                            <TextBox.InputBindings>
                                                <KeyBinding Command="{Binding ShiftCommand}" Key="Enter" />
                                            </TextBox.InputBindings>
                                        </TextBox>
                                        <Button Content="Shift" Margin="0,4,0,4" Command="{Binding ShiftCommand}" />
                                    </StackPanel>
                                </Border>
                            </theme:SystemDropShadowChrome>

                            <theme:SystemDropShadowChrome Name="Shdw" Color="Transparent" SnapsToDevicePixels="true">
                                <Border Name="ContextMenuBorder"
                                        Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}">
                                    <Grid>
                                        <Rectangle Fill="#F1F1F1" HorizontalAlignment="Left" Width="28" Margin="2"
                                                   RadiusX="2" RadiusY="2" />
                                        <Rectangle HorizontalAlignment="Left" Width="1" Margin="30,2,0,2"
                                                   Fill="#E2E3E3" />
                                        <Rectangle HorizontalAlignment="Left" Width="1" Margin="31,2,0,2" Fill="White" />

                                        <ScrollViewer Name="ContextMenuScrollViewer" CanContentScroll="true"
                                                      Grid.ColumnSpan="2" Margin="1,0"
                                                      Style="{DynamicResource {ComponentResourceKey TypeInTargetAssembly={x:Type FrameworkElement}, ResourceId=MenuScrollViewer}}">
                                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                                <Canvas Height="0" Width="0" HorizontalAlignment="Left"
                                                        VerticalAlignment="Top">
                                                    <Rectangle
                                                        Height="{Binding ElementName=ContextMenuBorder,Path=ActualHeight}"
                                                        Width="{Binding ElementName=ContextMenuBorder,Path=ActualWidth}"
                                                        Fill="{Binding ElementName=ContextMenuBorder,Path=Background}" />
                                                </Canvas>
                                                <ItemsPresenter Name="ItemsPresenter"
                                                                Margin="{TemplateBinding Padding}" KeyboardNavigation.DirectionalNavigation="Cycle"
                                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                            </Grid>
                                        </ScrollViewer>
                                    </Grid>
                                </Border>
                            </theme:SystemDropShadowChrome>
                        </StackPanel>
                        <ControlTemplate.Triggers>
                            <Trigger Property="HasDropShadow" Value="true">
                                <Setter TargetName="Shdw" Property="Margin" Value="0,0,5,5" />
                                <Setter TargetName="Shdw" Property="Color" Value="#71000000" />
                                <Setter TargetName="Shdw2" Property="Margin" Value="0,0,5,5" />
                                <Setter TargetName="Shdw2" Property="Color" Value="#71000000" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid>
        <DataGrid IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding}" />
            </DataGrid.Columns>

            <DataGrid.ContextMenu>
                <ContextMenu Style="{StaticResource MenuStyle}">
                    <MenuItem Header="Item 1"></MenuItem>
                    <MenuItem Header="Item 2"></MenuItem>
                    <MenuItem Header="Item 3"></MenuItem>
                </ContextMenu>
            </DataGrid.ContextMenu>

            <System:String>One</System:String>
            <System:String>Two</System:String>
            <System:String>Three</System:String>
        </DataGrid>
    </Grid>
</Window> 
```

# ruby-on-rails - 水豚不和工厂女孩一起工作

> ID：12963095
> 
> 赞同：5
> 
> 时间：2012-10-18T20:21:54.587
> 
> 标签：ruby-on-rails, testing, capybara, factory-bot, minitest

我正在使用 minitest 与 factory girl 和 capybara 进行集成测试。当我不使用工厂女孩创建用户对象时，Capybara 工作正常，如下所示：

```
it "logs in a user successfully" do
    visit signup_path
    fill_in "Email", :with => "joey@ramones.com"
    fill_in "Password", :with => "rockawaybeach"
    fill_in "Password confirmation", :with => "rockawaybeach"
    click_button "Create User"
    current_path == "/"
    page.text.must_include "Signed up!"
    visit login_path
    fill_in "Email", :with => "joey@ramones.com"
    fill_in "Password", :with => "rockawaybeach"
    check "Remember me"
    click_button "Log in"
    current_path == "/dashboard"
    page.text.must_include "Logged in!"
    page.text.must_include "Your Dashboard"
  end 
```

但是一旦我尝试用 factory girl 创建一个用户，奇怪的事情就开始发生了，比如 visit 方法和 click_button 方法停止工作。例如，这个测试似乎没有任何问题：

```
require "test_helper"

describe "Password resets" do
  before(:each) do
    @user = FactoryGirl.create(:user)
  end

  it "emails user when requesting password reset" do
    visit login_path
    click_link "password"
    fill_in "Email", :with => user.email
    click_button "Reset my password"
  end

end 
```

这是我的 factory.rb：

```
FactoryGirl.define do
  factory :user do |f|
    f.sequence(:email) { |n| "foo#{n}@example.com" }
    f.password "secret"
    f.password_confirmation "secret"
  end
end 
```

这是我得到的实际错误：

```
est_0001_emails user when requesting password reset      0:00:01.624 ERROR
        undefined local variable or method `login_path' for #<#<Class:0x007fc2db48d820>:0x007fc2df337e40> 
```

但是，`visit login_path`如果我删除，效果很好`@user = FactoryGirl.create(:user)`

这是Capybara的错误吗？还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:27:59.547

我终于使用 DatabaseCleaner gem 使用`DatabaseCleaner.strategy = truncation`. 这就是我最终得到的结果：

**test_helper.rb**

```
ENV["RAILS_ENV"] = "test"
require File.expand_path("../../config/environment", __FILE__)
require "minitest/autorun"
require "capybara/rails"
require "active_support/testing/setup_and_teardown"

class IntegrationTest < MiniTest::Spec
  include Rails.application.routes.url_helpers
  include Capybara::DSL
  register_spec_type(/integration$/, self)

  def last_email
    ActionMailer::Base.deliveries.last
  end

  def reset_email
    ActionMailer::Base.deliveries = []
  end
end

class HelperTest < MiniTest::Spec
  include ActiveSupport::Testing::SetupAndTeardown
  include ActionView::TestCase::Behavior
  register_spec_type(/Helper$/, self)
end

Turn.config.format = :outline 

# Database cleaner.
DatabaseCleaner.strategy = :truncation 
```

**工厂.rb**

```
FactoryGirl.define do
  sequence :email do |n|
    "email#{n}@example.com"
  end

  factory :user do
    email
    password "secret"
    password_confirmation "secret"
  end
end 
```

**集成/login_integration_test.rb**

```
require "test_helper"

describe "Login integration" do    
  it "shouldn't allow an invalid login" do
    visit login_path
    click_button "Log In"
    page.text.must_include "invalid"
  end

  it "should login a valid user" do
    DatabaseCleaner.clean
    user = FactoryGirl.create(:user)
    visit login_path
    within ".session" do
      fill_in "session_email", :with => user.email
      fill_in "session_password", :with => "secret"
    end
    click_button "Log In"
    page.text.must_include "Logged in!"
    save_and_open_page
  end
end 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-27T08:20:07.943

删除`login_path`并尝试使用`url`

**例如**

```
visit "/users/login"   #login_path 
```

# ios - setImageWithURL AFNetworking 成功处理程序的问题

> ID：12963102
> 
> 赞同：0
> 
> 时间：2012-10-18T20:22:25.243
> 
> 标签：ios, ios4, uiimageview, nsoperation, afnetworking

`setImageWithURLRequest:`在我的`UIImage`对象上调用成功或失败处理程序时似乎都没有调用。`SetImageWithURL`也没有设置我的形象。如果我使用`setImageWithURL:` `placeholder:`占位符已设置但来自 url 的图像永远不会被设置。

请原谅我没有尽快发布代码。我尝试使用两种方法（with `AFNetworking`）来异步设置我的图像视图：

```
[_imageView setImageWithURL:[NSURL URLWithString:@"path/to/file"]];

[_imageView setImageWithURLRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.example.com/path/to/image.jpg"]] placeholderImage:[UIImage imageNamed:@"your_image_here.jpg"] success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
NSLog(@"Your image request succeeded!");
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
NSLog(@"Your image request failed...");
}]; 
```

我尝试过触发这些，`viewDidLoad`但图像视图永远不会加载。

在查看了实际的函数声明后`setImageWithURLRequest:`，我调用它时似乎没有执行成功或失败块。我已经`NSLogs`在代码中放置了让你们了解发生了什么的想法：

```
- (void)setImageWithURLRequest:(NSURLRequest *)urlRequest 
      placeholderImage:(UIImage *)placeholderImage 
               success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image))success
               failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error))failure
{
NSLog(@"Log shows");

[self cancelImageRequestOperation];

NSLog(@"Log shows");
UIImage *cachedImage = [[[self class] af_sharedImageCache] cachedImageForRequest:urlRequest];

NSLog(@"Log shows");

if (cachedImage) {
NSLog(@"Log does not show");

self.image = cachedImage;
self.af_imageRequestOperation = nil;

if (success) {
    success(nil, nil, cachedImage);
    NSLog(@"Log does not show");

}
} else {
NSLog(@"Log shows");

self.image = placeholderImage;

AFImageRequestOperation *requestOperation = [[AFImageRequestOperation alloc] initWithRequest:urlRequest];
[requestOperation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
    if ([[urlRequest URL] isEqual:[[self.af_imageRequestOperation request] URL]]) {
        self.image = responseObject;
        self.af_imageRequestOperation = nil;
        NSLog(@"Log does not show");
    }

    if (success) {
        success(operation.request, operation.response, responseObject);
        NSLog(@"Log does not show");
    }

    [[[self class] af_sharedImageCache] cacheImage:responseObject forRequest:urlRequest];

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    if ([[urlRequest URL] isEqual:[[self.af_imageRequestOperation request] URL]]) {
        self.af_imageRequestOperation = nil;
        NSLog(@"Log does not show");
    }

    if (failure) {
        failure(operation.request, operation.response, error);
        NSLog(@"Log does not show");
    }

}];

self.af_imageRequestOperation = requestOperation;

[[[self class] af_sharedImageRequestOperationQueue] addOperation:self.af_imageRequestOperation]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:56:06.157

`setImageWithURL:`是 UIImageView 类别，不能用于设置`UIImage`仅用于 UIImageView。

```
[imageView setImageWithURL:url placeholderImage:[UIImage imageNamed:@"placeHolderImage"]]; 
```

这是文档：[http ://engineering.gowalla.com/AFNetworking/Categories/UIImageView(AFNetworking).html](http://engineering.gowalla.com/AFNetworking/Categories/UIImageView(AFNetworking).html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T23:25:38.513

感谢大家的帮助，但就像这里的每个人都注意到的那样，我的代码没有问题。这个问题实际上与ARC有关。我在我的 AFNetworking 文件中关闭了它。开机后，一切正常。

# caching - 混合使用 AppFabric 本地缓存和服务器缓存

> ID：12963103
> 
> 赞同：4
> 
> 时间：2012-10-18T20:22:27.097
> 
> 标签：caching, memory, appfabric

我刚开始使用 AppFabric ......

我的应用程序是在医疗保健领域——我们有大约 15000 名系统用户，他们会大量访问患者信息（例如，考虑一组护士/医生在住院时访问患者）。

我想做的是在缓存主机服务器上缓存某些项目（例如患者人口统计信息）和其他项目（例如实验室、药物、诊断成像、报告）。底层数据来自各种第 3 方系统，其中一些系统返回数据极其缓慢。

有谁知道是否可以指示某些项目进入本地缓存而其他项目进入服务器？有太多数据无法全部放入内存。在查看 MSDN 文档时，这里是一个示例配置文件。

```
 <dataCacheClient requestTimeout="15000" channelOpenTimeout="3000" maxConnectionsToServer="1">
      <localCache isEnabled="true" sync="TimeoutBased" ttlValue="300" objectCount="10000"/>
      <clientNotification pollInterval="300" maxQueueLength="10000"/>
      <hosts>
         <host name="CacheServer1" cachePort="22233"/>
         <host name="CacheServer2" cachePort="22233"/>
      </hosts>
      <securityProperties mode="Transport" protectionLevel="EncryptAndSign" />
      <transportProperties connectionBufferSize="131072" maxBufferPoolSize="268435456" 
                           maxBufferSize="8388608" maxOutputDelay="2" channelInitializationTimeout="60000" 
                           receiveTimeout="600000"/>
   </dataCacheClient> 
```

看起来像为整个缓存客户端启用本地缓存？

为了支持我描述的场景，这是否意味着我必须创建两个缓存客户端并且我的代码必须知道/知道将数据放入哪个缓存客户端？或者在将数据存储到缓存中时是否可以使用 API/标志/参数？或者，也许，通过使用区域/标签来处理？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T19:58:46.113

假设您使用的是 AppFabric 1.1，[您可以使用不同的配置配置多个 dataCacheClient 节点](http://msdn.microsoft.com/en-us/library/hh351483.aspx)。因此，使用您现有的示例，您将执行以下操作：

```
<!-- local caching client -->
<dataCacheClient name="LocalCaching" requestTimeout="15000" channelOpenTimeout="3000" maxConnectionsToServer="1">
  <localCache isEnabled="true" sync="TimeoutBased" ttlValue="300" objectCount="10000"/>
  <clientNotification pollInterval="300" maxQueueLength="10000"/>
  <hosts>
     <host name="CacheServer1" cachePort="22233"/>
     <host name="CacheServer2" cachePort="22233"/>
  </hosts>
  <securityProperties mode="Transport" protectionLevel="EncryptAndSign" />
  <transportProperties connectionBufferSize="131072" maxBufferPoolSize="268435456" 
                       maxBufferSize="8388608" maxOutputDelay="2" channelInitializationTimeout="60000" 
                       receiveTimeout="600000"/> 
```

然后从代码中，您可以`DataCacheFactoryConfigurations`使用带有名称而不是仅使用默认值的构造函数：

```
DataCacheFactoryConfiguration localCachingFactoryConfig = new DataCacheFactoryConfiguration("LocalCaching");

DataCacheFactoryConfiguration remoteOnlyCachingFactoryConfig = new DataCacheFactoryConfiguration("RemoteOnlyCaching"); 
```

然后，您只需根据您正在使用的数据所需的缓存类型，在代码中从适当的工厂创建您的 DataCache 实例。

# ruby-on-rails - 环境/开发资产路径的副本在 gems 目录中找不到 jquery-ui-rails

> ID：12963106
> 
> 赞同：6
> 
> 时间：2012-10-18T20:22:42.657
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui, ruby-on-rails-3.1, asset-pipeline

我将 config/environments/development.rb 复制到 config/environments/ci.rb。

当我使用 RAILS_ENV=development 运行时，资产搜索路径包括我的 gem 供应商目录，尤其是 jquery-ui-rails。但是，当我使用 RAILS_ENV=ci 运行时，它不会。

从控制台，Rails.application.config.assets.paths 评估为以下开发

```
irb(main):002:0> Rails.application.config.assets.paths
=> ["/var/www/ci/conflux/app/assets/images",
  "/var/www/ci/conflux/app/assets/javascripts",
  "/var/www/ci/conflux/app/assets/stylesheets",
  "/var/www/ci/conflux/vendor/assets/stylesheets",
  "/opt/comcast/ruby1.9.3/lib/ruby/gems/1.9.1/gems/jquery-rails-1.0.19/vendor/assets/javascripts",
  "/opt/comcast/ruby1.9.3/lib/ruby/gems/1.9.1/gems/jquery-ui-rails-1.0.0/vendor/assets/images",
  "/opt/comcast/ruby1.9.3/lib/ruby/gems/1.9.1/gems/jquery-ui-rails-1.0.0/vendor/assets/javascripts",
  "/opt/comcast/ruby1.9.3/lib/ruby/gems/1.9.1/gems/jquery-ui-rails-1.0.0/vendor/assets/stylesheets"] 
```

但对于 ci 我只得到以下内容：

```
irb(main):002:0> Rails.application.config.assets.paths
=> ["/var/www/ci/conflux/app/assets/images",
  "/var/www/ci/conflux/app/assets/javascripts",
  "/var/www/ci/conflux/app/assets/stylesheets",
  "/var/www/ci/conflux/vendor/assets/stylesheets",
  "/opt/comcast/ruby1.9.3/lib/ruby/gems/1.9.1/gems/jquery-rails-1.0.19/vendor/assets/javascripts"] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T22:37:39.683

您是否已将 ci 环境添加到 中`config/application.rb`？

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test ci)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T09:47:05.750

我认为@mccannf 有正确的答案，但如果不是问题，您是否已将 jquery-ui-rails gem 添加到`ci`组中`Gemfile`？

# html - 在容器外放置一个页脚 div

> ID：12963116
> 
> 赞同：0
> 
> 时间：2012-10-18T20:23:23.340
> 
> 标签：html, css, footer, html5boilerplate

如何让页脚位于容器外的页面底部？该模板基于样板。

我需要使用什么 CSS 让它位于底部？

**HTML：**

```
</div><!-- end of container -->

    <div clear="clear"></div>
            <div id="footer" class="w960">
        <div id="footerHolder">
            <div class="foot left"></div>

            <!--
            <div class="foot right">
                FOLLOW US:
                <div id="social">
                    <a href=""><div id="fb" class="socialIcon"></div></a>
                    <a href=""><div id="tw" class="socialIcon"></div></a>
                </div>
            </div>
            -->
        </div>
    </div> 
```

**CSS：**

```
#container{width:960px;margin:0px auto 40px auto;}
#footer{width:100%;clear:both; height:66px;background:#2d2d2f;}
#footerHolder{width:960px;margin:auto;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:37:47.830

Not sure what you're looking for exactly but shouldn't your #footerHolder contain the #footer? Also, div clear="clear" is not required since you are specifying the clear:both property in #footer. This should rest nicely at the bottom of the page.

# .net-4.0 - 是否有 Microsoft.VisualBasic.FileIO.TextFieldParser 的写对应物？

> ID：12963117
> 
> 赞同：13
> 
> 时间：2012-10-18T20:23:29.953
> 
> 标签：.net-4.0

我需要创建一个新的 CSV 文件。编写我自己的例程不会是一项艰巨的任务，但是基类库中有一个例程吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-19T17:32:30.857

这是可用于从字符串列表生成一行 CSV 文件的函数（也可以使用 IEnumerable(Of String) 或字符串数​​组）：

```
Function CreateCSVRow(strArray As List(Of String)) As String
    Dim csvCols As New List(Of String)
    Dim csvValue As String
    Dim needQuotes As Boolean
    For i As Integer = 0 To strArray.Count() - 1
        csvValue = strArray(i)
        needQuotes = (csvValue.IndexOf(",", StringComparison.InvariantCulture) >= 0 _
                      OrElse csvValue.IndexOf("""", StringComparison.InvariantCulture) >= 0 _
                      OrElse csvValue.IndexOf(vbCrLf, StringComparison.InvariantCulture) >= 0 _
                      OrElse csvValue.IndexOf(" ", StringComparison.InvariantCulture) = 0 _
                      OrElse csvValue.IndexOf(" ", StringComparison.InvariantCulture) = csvValue.Length-1)
        csvValue = csvValue.Replace("""", """""")
        csvCols.Add(If(needQuotes, """" & csvValue & """", csvValue))
    Next
    Return String.Join(",", csvCols.ToArray())
End Function 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T20:46:38.293

不在框架里，代码太简单了。使用 StreamWriter.Write() 轻松完成，您只需要做一点提升即可正确引用字符串。它只需要几行：

```
Module CsvWriter
    Public Sub WriteCsvLine(ByVal out As System.IO.TextWriter, ByVal ParamArray Values() As Object)
        For ix As Integer = 0 To Values.Length - 1
            If ix > 0 Then out.Write(",")
            If TypeOf (Values(ix)) Is String Then
                out.Write("""" + CStr(Values(ix)).Replace("""", """""") + """")
            Else
                out.Write(Values(ix).ToString())
            End If
        Next
        out.WriteLine()
    End Sub
End Module 
```

# css - 使用 CSS 的标题自动编号适用于除顶级之外的所有内容

> ID：12963125
> 
> 赞同：1
> 
> 时间：2012-10-18T20:23:47.723
> 
> 标签：css, google-chrome, stylish, mindtouch

我一直在尝试使用标准 CSS 计数器机制在我的 Mindtouch wiki 中实现标题自动编号。CSS 被应用到在 Chrome 中带有 Stylish 扩展的网站。

奇怪的是，顶级标题（在我的例子中是 h2；h1 是为页面标题保留的）不能正常工作，但其他一切都是。这是我在测试页面上得到的输出：

```
1 Heading 2
1 Heading 2
0.1 Heading 3
0.2 Heading 3
0.2.1 Heading 4
0.2.2 Heading 4
0.3 Heading 3
1 Heading 2 
```

我不确定是什么可能导致这种情况发生，甚至不知道如何追踪它。如果有人有一些指示，我将不胜感激。

在 jsfiddle 上，相同的 CSS 和相同的 HTML 可以获得所需的结果。(1, 2, 2.1, 2.2, 2.2.1, 2.2.2, 2.3, 3)

这是我正在使用的 CSS（直接从 Stylish 粘贴）：

```
<style>
   div#pageText {
     counter-reset: h2counter;
   }   
   h2:before{
     counter-increment: h2counter;
     content: counter(h2counter) " ";
   }
   h2 { counter-reset: h3counter; }
   h3:before{
     counter-increment: h3counter;
     content: counter(h2counter) "." counter(h3counter) " ";
   }
   h3 { counter-reset: h4counter; }
   h4:before{
     counter-increment: h4counter;
     content: counter(h2counter) "." counter(h3counter) "." counter(h4counter) " ";
   }
   h4 { counter-reset: h5counter; }
   h5:before{
     counter-increment: h5counter;
     content: counter(h2counter) "." counter(h3counter) "." counter(h4counter) "." counter(h5counter) " ";
   }
   </style> 
```

最后，这是直接来自示例 wiki 页面的 HTML，以防万一无关紧要的垃圾产生影响（它似乎对 jsfiddle 没有任何影响）。

```
<div class="pageText" id="pageText">
    <div id="section_1">
        <span id="Heading_2"></span>
        <h2 class="editable">
            <span>Heading 2</span>
            <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
            </div>
        </h2>
    </div>

    <div id="section_2">
        <span id="Heading_2_2"></span>
        <h2 class="editable">
            <span>Heading 2</span>
            <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
            </div>
        </h2>

        <div id="section_3">
            <span id="Heading_3"></span>
            <h3 class="editable">
                <span>Heading 3</span>
                <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
                </div>
            </h3>
        </div>

        <div id="section_4"><span id="Heading_3_2"></span>
            <h3 class="editable">
                <span>Heading 3</span>
                <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
                </div>
            </h3>

            <div id="section_5">
                <span id="Heading_4"></span>
                <h4 class="editable">
                    <span>Heading 4</span>
                    <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
                    </div>
                </h4>
            </div>

            <div id="section_6" class="">
                <span id="Heading_4_2"></span>
                <h4 class="editable">
                    <span>Heading 4</span>
                    <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
                    </div>
                </h4>
            </div>
        </div>

        <div id="section_7">
            <span id="Heading_3_3"></span>
            <h3 class="editable">
                <span>Heading 3</span>
                <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
                </div>
            </h3>
        </div>
    </div>

    <div id="section_8">
        <span id="Heading_2_3"></span>
        <h2 class="editable">
            <span>Heading 2</span>
            <div class="editIcon"><a href="#" onclick="return Deki.LoadEditor(this);" onmouseover="showEditArea(this);" onmouseout="hideEditArea(this);" title="Edit section" style="visibility: hidden; "><span class="icon"><img src="/skins/common/icons/icon-trans.gif" class="sectionedit" alt="Edit section"></span></a>
            </div>
        </h2>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:49:29.780

呵呵，我尴尬了。看来问题出`<style>`在我放在 CSS 中的封闭标签上。显然，Stylish 本身就提供了这一点。

我不能说我完全理解`<style>`标签存在时所展示的行为（也可以在 jsfiddle 中重新创建）。我想这只是 HTML 解析器在第一个 CSS 规则元素上作呕，然后恢复其余部分。

无论如何，它现在正在工作。

# java - 文本区域似乎不起作用

> ID：12963128
> 
> 赞同：0
> 
> 时间：2012-10-18T20:24:06.170
> 
> 标签：java, textarea

我正在尝试创建一个显示分数列表的文本区域。但由于某种原因，文本区域仅在有人输入时才会扩展，甚至不应该允许用户输入。我以为我正确地为它编写了代码，但由于某种原因它似乎不起作用。我附加的“你好”短语甚至没有显示在文本区域中。任何人都可以提供一些建议：

```
 public HighScores() throws FileNotFoundException, IOException{
    frame.setVisible(true);
    frame.setSize(400,200);
    frame.add(main);
    GridBagConstraints g = new GridBagConstraints();
    g.insets = new Insets(10,10,10,10);
    g.gridx = 0;
    g.gridy = 0;
    main.add(highscorespanel, g);
    highscorespanel.add(highscores);
    g.gridx = 0;
    g.gridy = 1;
    main.add(textareapanel, g);
    Color c = textareapanel.getBackground();
    textareapanel.setBackground(c);
    textareapanel.add(ta);
    ta = new JTextArea ();
    ta.setVisible(true);
    ta.setEnabled(true);
    ta.setEditable(false);

    ta.append("hello");
    JScrollPane sp = new JScrollPane(ta);
    BufferedReader br = new BufferedReader(new FileReader("src/BattleShip/scores.txt"));
    String namescore = br.readLine();
    while(namescore!=null){
        ta.append("\t"+namescore);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:05:46.487

我几乎可以肯定你不再需要答案了，但你需要移动你的行“textareapanel.add(ta);” 在你初始化 ta 之后的某个时间点。

```
ta = new JTextArea();
textareapanel.add(ta);
ta.setVisible(true);
ta.setEnabled(true);
ta.setEditable(false); 
```

**编辑**：

再看看你想要一个 JScrollPane 为你的 JTextArea 所以你的代码应该是这样的：

```
JTextArea ta = new JTextArea();
ta.setVisible(true);
ta.setEnabled(true);
ta.setEditable(false);

JScrollPane sp = new JScrollPane(ta);
textareapanel.add(sp); 
```

# java - Java Logging 语句说找不到符号

> ID：12963130
> 
> 赞同：4
> 
> 时间：2012-10-18T20:24:16.153
> 
> 标签：java, slf4j

```
private static final Logger LOGGER = LoggerFactory.getLogger(Updater.class); 
```

我正在使用`SLF4J`和`Logback`

当我尝试记录语句时

```
LOGGER.info("{}:{}:{}", one, two, three) 
```

它说

```
cannot find symbol method info(java.lang.String,java.lang.String,java.lang.String,java.lang.String) 
```

有没有什么办法可以在一个`info`语句中记录两个以上的变量？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T20:29:17.927

您必须将 SLF4J 升级到包含[`Logger.info(java.lang.String, java.lang.Object...)`](http://www.slf4j.org/apidocs/org/slf4j/Logger.html#info(java.lang.String,%20java.lang.Object...))可变参数方法的 1.7。请参阅错误 31 -经过六年的讨论后修复[的 Logger 方法的 Varargs 。](http://bugzilla.slf4j.org/show_bug.cgi?id=31)

在 1.7 之前，`Object[]`如果您使用两个以上的参数，则必须将参数括起来：

```
LOGGER.info("{}:{}:{}", new Object[] {one, two, three}) 
```

# 也可以看看

*   [slf4j 是否有 Java 1.5 varargs API？](https://stackoverflow.com/questions/1952947)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:28:54.927

您可能使用的是旧版本的 slf4j。

在以前的版本中，您最多只能以这种方式记录 2 个参数，但新版本可以采用[任意数量的参数](http://www.slf4j.org/apidocs/org/slf4j/Logger.html#info%28java.lang.String,%20java.lang.Object...%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:30:16.993

根据Logger 的[JavaDoc](http://www.slf4j.org/apidocs/org/slf4j/Logger.html)，您可以使用以下任一方法，

```
 void  info(String format, Object... arguments)
  void  info(String format, Object arg)
  void  info(String format, Object arg1, Object arg2) 
```

# php - 从 Nginx 中的主文件继承值？

> ID：12963135
> 
> 赞同：1
> 
> 时间：2012-10-18T20:24:34.050
> 
> 标签：php, nginx, webserver

目前，我需要把

```
location ~ \.php$
{
    fastcgi_pass 127.0.0.1:9000;
} 
```

在我需要运行 PHP 文件的每个站点中。

有没有办法把它放在“主人”中，这样​​所有网站都不会有相同指令的重复副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:52:18.057

是的，像这样：

```
include /etc/nginx/master.conf; 
```

有关更多详细信息，请参阅[http://nginx.org/en/docs/ngx_core_module.html#include](http://nginx.org/en/docs/ngx_core_module.html#include)

换句话说，你有：

```
server {
  servername a;
  location ~ \.php$ { fastcgi_pass 127.0.0.1:9000;}

  #rest of server a config
}

server {
  servername b;
  location ~ \.php$ { fastcgi_pass 127.0.0.1:9000;}

  #rest of server b config
} 
```

你现在有：

```
server {
  servername a;
  include /etc/nginx/php-master.conf;

  #rest of server a config
}

server{
  servername b;
  include /etc/nginx/php-master.conf;

  #rest of server b config
} 
```

和一个单独的文件 /etc/ningx/php-master.conf 作为内容

```
location ~ \.php$ { 
  fastcgi_pass 127.0.0.1:9000;
} 
```

它实际上并没有大大缩短服务器块中的代码（因为包含的位只是 1 行）。但它仍然产生的优势是您现在可以在 1 个位置更改您的 php 设置（假设您将您的 fastcgi 处理程序移动到不同的端口或 ip）

# jquery - rails jquery 将鼠标悬停在 li 元素上以填充另一个 div

> ID：12963138
> 
> 赞同：0
> 
> 时间：2012-10-18T20:24:41.803
> 
> 标签：jquery, ruby-on-rails, hover, image

更新：我正在研究一些看起来像这样的 jquery：

```
$(document).ready(function(){
    $('li img').hover(
        var src = $(this).attr('src')
        function(){
            $('#big').html('<img src=' + src + '/>');
        },
        function(){
            $('#big').html("");
        }
        );
}); 
```

那没有用......但这确实：

```
$(document).ready(function(){
    $('#li img').hover(

        function(){
            $('#big').html('<img src=' + $(this).attr("src") + '/>');
        },
        function(){
            $('#big').html("");

        }

        );

}); 
```

但是 src 变量的使用是不对的。我也试图把它变成一个数组或哈希来迭代。最终，大框将遍历缩略图，如果用户将鼠标悬停在列表元素上，它将停止迭代并显示悬停的列表项的大版本。首先需要让这部分工作！

谢谢！

我有一个包含缩略图的列表。当您浏览缩略图时，我希望另一个 div 显示全屏图像。我对最干净的方法感到有些不知所措。我会最后发布我丑陋的解决方案，但首先我想展示我想去的方向。

html:

```
<ul>
  <li><%= image_tag('rails.png') %>Some text</li>
  <li><%= image_tag('rails.png') %>Some text</li>
  <li><%= image_tag('rails.png') %>Some text</li>
</ul>
<div id='big'></div> 
```

所以首先；缩略图和文本会改变。我正在尝试使用以下形式的 jquery：

```
$('li').hover(function(){

 $('#big').append("<img src="'+ this.img.src + '" />");
}); 
```

this.img.src 是我失败的地方。

在我看来，工作解决方案非常难看，它使用的 html 如下：

```
<ul>
  <li><a href='assets/rails.png"><%= image_tag('rails.png') %>Some text</a></li>
  <li><a href='assets/rails.png"><%= image_tag('rails.png') %>Some text</a></li>
  <li><a href='assets/rails.png"><%= image_tag('rails.png') %>Some text</a></li>
</ul>
<div id='big'></div> 
```

jquery 喜欢：

```
$("#big").append("<p id='preview'><img src='"+ this img.src +"' alt='Image preview' />"+ c +"</p>"); 
```

我没有发布足够的工作解决方案来工作；足以让任何人明白这一点。

那么如何清理这些垃圾呢？我想使用第一个没有链接标签的 html（我觉得没有必要）。我什至正在寻找使用 ruby​​ 遍历图像目录来生成列表。

感谢您提供的任何方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:37:34.990

You can simply change the src attr of the img tag but it will need to load the pic everytime you change picture.

```
<ul>
  <li><a onclick="$('#bigPic').attr({'src':'someothepic1.png'});">Some text</a></li>
  <li><a onclick="$('#bigPic').attr({'src':'someothepic2.png'});">Some text</a></li>
  <li><a onclick="$('#bigPic').attr({'src':'someothepic3.png'});">Some text</a></li>
</ul>
<div id='big'>*<img id="bigPic" scr="somepic.png"/>*</div> 
```

There is other way, more heavy, complex of doing this, but this oneliner sould do the trick.If you have only a few pic, you could load them all, hidden and only show the one you want.

btw .append() will ADD to the content as .html() will replace it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:43:18.033

我认为锚点是一件好事，即使关闭了javascript（或者如果某些原因导致它中断），它们也允许等效的功能，这可以作为一个很好的后备

# asp.net-mvc-3 - Html.ActionLink 魔法

> ID：12963139
> 
> 赞同：3
> 
> 时间：2012-10-18T20:24:56.043
> 
> 标签：asp.net-mvc-3

我有以下模型：

```
public class AccountDetailsViewModel
{
   public Guid ID { get; set; }
   public string FirstName { get; set; }
   public string LastName { get; set; }
} 
```

然后我有AccountController 和followign 动作

```
public ActionResult Details(Guid? id)
{
    var model = new AccountDetailsViewModel
    {
        ID = 2,
        FirstName = "FirstName",
        LastName = "LastName"
    };
    return View(model)
} 
```

并为此操作强类型视图

```
@model AccountDetailsViewModel
...
@Html.ActionLink("My Page", "Details", "Account")
...
//display info about user 
```

这个想法是，当用户访问没有 id 参数的 Account/Details url 时，会显示他自己的信息，并且当 id 出现在 url 中时，会显示有关具有该 id 的用户的信息。

问题是当用户使用 id 访问 url（某人的其他页面）时，链接 My Page（在视图顶部）指向同一页面。ActionLink 获取当前显示用户的 id，这是一个问题，因为我希望我的页面链接始终指向帐户/详细信息（指向我的页面）。ActionLink 的这个 id 不是像我首先想到的那样取自 @Model，看起来还有其他一些我不熟悉的魔法。

我对其他页面也有同样的问题。

那么发生了什么以及如何防止这种行为呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:29:57.160

如果您不指定它们是什么，ASP.NET MVC 会重新使用路由变量。因此，如果我在与路由匹配的其他人的页面上，即使您没有明确表示要使用他们的 ID，也会使用他们的 ID。

```
@Html.ActionLink("My Page", "Details", "Account", new { id = "" }) 
```

只需将其设置为空白即可清除 ID 参数。

# html - 在网页上显示卸载的字体

> ID：12963142
> 
> 赞同：4
> 
> 时间：2012-10-18T20:25:07.067
> 
> 标签：html, unicode, fonts, webpage, webfonts

> **可能重复：**
> [网络中的非标准字体？](https://stackoverflow.com/questions/2969323/non-standard-fonts-in-web)

我创建了一个 Unicode 字体，我想在我的网页上使用它。我希望人们看到并阅读字体。他们可以在不安装字体的情况下做到这一点吗？从服务器运行字体之类的东西？

如果我没记错的话，我很久以前就看过这个了。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:32:04.600

您可以使用[CSS3 的 @font-face](http://www.w3schools.com/cssref/css3_pr_font-face_rule.asp)功能来做到这一点。但是您必须提供必要的字体格式。

FontSquirrel 的[@font-face 生成器](http://www.fontsquirrel.com/fontface/generator)是一个不错的网络工具，可以为您完成所有繁琐的工作。它非常易于使用并创建所有必要的文件，包括 CSS 样式表和 HTML 示例文件。

真正有价值的是，它包含了在所有主流浏览器中显示字体所需的所有格式和技巧，而这并不是那么容易做到的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:47:39.127

你可以使用@font-face

在您的 css 中，您将使用 @font-face 规则声明字体。您可以指定字体系列，指定不同格式字体的链接。

```
@font-face {
font-family: 'MyWebFont';
src: url('webfont.eot'); /* IE9 Compat Modes */
src: url('webfont.eot?#iefix') format('embedded-opentype'), 
     url('webfont.woff') format('woff'), 
     url('webfont.ttf')  format('truetype'),
     url('webfont.svg#svgFontName') format('svg'); 
} 
```

然后在您的 html 中使用 font-family 调用它

```
body 
{
   font-family: 'MyWebFont', Fallback, sans-serif;
} 
```

# c# - 列出 C# ASP.NET 项目中的所有控件

> ID：12963143
> 
> 赞同：6
> 
> 时间：2012-10-18T20:25:13.930
> 
> 标签：c#, asp.net, controls

**目标：**

我正在尝试创建一个权限页面，该页面根据整个应用程序中的网络表单中的控件为角色分配权限。我正在尝试编写为给定页面创建一串控件的代码。页面名称将作为字符串传入。

下面的这篇文章与我正在寻找的内容非常相似，尽管它是为 VB.NET 中的 Windows 窗体应用程序编写的。我希望在 C# 中找到一个解决方案并适用于 webforms。 [http://www.dreamincode.net/forums/topic/222439-list-of-all-controls-in-project-vbnet/](http://www.dreamincode.net/forums/topic/222439-list-of-all-controls-in-project-vbnet/)

下一篇文章似乎也是我正在寻找的内容，但在文件中查找的建议不起作用，因为我希望代码更通用并在向表单添加页面或控件而不是硬编码时进行扩展： [获取程序集中每个 WebForm 上的控件列表](https://stackoverflow.com/questions/7038734/get-list-of-controls-on-each-webform-in-an-assembly)

**大概的概念：**

我的想法是让用户从下拉列表中选择一个角色。然后用户将从下拉列表中选择应用程序中的一个页面。然后 SelectedIndexChanged 将查询所选页面的 webform 类，并生成一个网格，列出该页面上的控件名称和另一个可以分配的权限的下拉列表。当用户完成对控件和权限的编辑后，他们将单击保存，信息将保存到数据库中。

当通过表单身份验证的用户加载页面时，页面将查询数据库以获取每个控件的权限，并根据用户的角色和权限将具有分配给该控件的只读、编辑或不可见状态。我的最终目标是让最终用户管理员能够管理应用程序中的权限，而不是拥有一组广泛的角色和权限，或者必须根据客户的需求进行自定义的一次性工作。请注意，这将是我尝试访问其他页面上的控件的唯一页面。

我试图列出 ASP.NET 项目或命名空间中的所有控件，因为在我的情况下，我当前的项目中只有一个命名空间。我发现很多示例列出了当前表单上的控件，但没有找到任何可以在站点范围内执行此操作的代码。我还能够列出我拥有的所有 webform 类： [如何获取命名空间内的所有类？](https://stackoverflow.com/questions/949246/how-to-get-all-classes-within-namespace)

但是您似乎无法去查询该类以查找那里定义的控件-如果有人可以解决此问题，我认为这将使我进入下一步。

我试过的：

1.  一种是实例化网络表单本身，然后以编程方式循环所有控件。至少我这样做的方式并不成功。Webform1 wf = new Webform1(); 我还尝试添加一个构造函数和一个方法，然后遍历控件。

2.  我还尝试通过 Activator.CreateInstance 实例化 webform 类我尝试按照此页面上的示例进行操作： [实例化具有运行时确定类型的对象](https://stackoverflow.com/questions/981330/c-instantiate-an-object-with-a-runtime-determined-type)

    **例子：**

    ```
    Page  o = (Page)System.Activator.CreateInstance(Type.GetType(pageName));
    foreach (Control c in o.Controls)
        lblMessages.Text = lblMessages.Text + c.ClientID.ToString() + "<BR>"; 
    ```

    这也没有成功。它确实编译了，但我会得到一个零控制计数，当然没有控制。

3.  我试图避免的最后一种方法是手动收集应用程序页面上的控件（在生产中 **应该**是静态的），然后仍然拥有权限页面，管理员将权限分配给角色那一点。

**最后：**

任何帮助我指出能够动态微调控件权限的正确方向将不胜感激，即使这包括查看处理权限的不同方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:48:49.090

这就是 CMS 的基本架构。

使用`Activator.CreateInstance`是在正确的轨道上。但是还有更多内容，例如帖子之间控制状态的持久性。

请查看动态加载控件的[DotNetNuke](http://dotnetnuke.codeplex.com/)。

# css - Twitter Bootstrap 轮播 - Firefox 中的 css 转换

> ID：12963145
> 
> 赞同：5
> 
> 时间：2012-10-18T20:25:17.737
> 
> 标签：css, firefox, google-chrome, twitter-bootstrap, css-transitions

我在 Firefox 中遇到 css 转换问题。我使用 Twitter Bootstrap 轮播。我做了一些更改，所以图片不会从右向左滑动。相反，它们淡入淡出。我还在轮播字幕上添加了一些 CSS 过渡。

这是我的代码：http: [//jsfiddle.net/Jh3rF/181/](http://jsfiddle.net/Jh3rF/181/)

在 Chrome 中一切正常，但在 Firefox（版本 16，Mac）中却不行。当我单击轮播中的下一个链接时，会有一个很好的过渡。活动幻灯片淡出，标题向右移动。但是下一张幻灯片的标题突然显示，而在 Chrome 中有一个很好的过渡（标题从上到下并且很好地淡入）。我在这里找不到任何错误。

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-13T22:58:41.100

我只是遇到了同样的问题，动画在 Google Chrome 上效果很好，但在 Firefox 中却突然出现。

所以我所做的非常简单，它会在下一张幻灯片出现时删除和添加类。

所以这里是代码：

```
$('#carousel-main').on('slide.bs.carousel', function (e) {
    $(e.relatedTarget).find('.animated').each(function() {
        var item = $(this);
        var classes = item.attr('class');
        item.attr('class', '');
        item.hide();
        setTimeout(function(){
            item.show();
            item.addClass(classes);
        }, 10);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:04:44.247

尝试为要具有过渡效果的属性声明基值，如本文中所回答：

[为什么我的 CSS3 过渡在 Firefox 中不起作用？](https://stackoverflow.com/questions/6084268/why-is-my-css3-transition-not-working-in-firefox)

# android - android 在哪里放置 ListView 完成显示时将执行的代码？

> ID：12963152
> 
> 赞同：2
> 
> 时间：2012-10-18T20:25:39.437
> 
> 标签：android, listview, edit-in-place

我正在就地编辑listView。也就是说，用户正在查看 TextView 项目的列表。然后用户触摸一个，表示他想编辑它。所选项目现在显示为 EditText，与其他 TextView 项目在同一个 ListView 中。

在此之后，显示了软键盘，但 EditText 实际上由于所有重绘而失去了焦点。我已经掌握了`SimpleCursorAdapter.getView()`. `EditText.requestFocus()`但是，除非我可以确定 EditText 在屏幕上，否则调用是徒劳的。

我可以在哪个类的哪个方法中执行类似的东西`getListView().findItemById(n).requestFocus();`？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:47:54.440

你可以执行

```
 getInstrumentation().waitForIdleSync() 
```

等待所有 UI 事件。

# java - Android Java Guice 无法将调试单步调试到 @Inject 带注释的函数中

> ID：12963153
> 
> 赞同：0
> 
> 时间：2012-10-18T20:25:45.473
> 
> 标签：java, android, guice

在 Intellij 中将主要的 Guice 和辅助 jar 文件添加到我的项目后，我无法再单步调试包含 @Inject 注释的文件。只需在我的项目中包含这两个 jar 而不更改我的源代码就会产生许多警告：

“忽略不带有关联 EnclosureMethod 属性的匿名内部类 (com.google.inject.internal.cglib.core.$AbstractClassGenerator$1) 的 InnerClasses 属性。”

用于 ClassEmitter、DebuggingClassWriter、EmitUtils、KeyFactory、ReflectUtils、Enhancer、MethodInterceptorGenerator、NoOp 和 FastClassEmitter。

我的问题 - 如何在带注释的源文件中恢复步骤调试以及如何清除这些错误？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T11:14:55.277

[这个](https://stackoverflow.com/questions/8608638/what-techniques-do-you-use-to-debug-complex-guice-bindings)SO question的答案描述了在 Guice 不玩球时使用的几个很好的调试技术：

> 我发现以下两个提示对于从[这个答案进行调试很有用：](https://stackoverflow.com/a/2718802/403455)
> 
> *   [Grapher](http://code.google.com/p/google-guice/wiki/Grapher)可视化注射器。如果您的自定义提供程序实现 [HasDependencies](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/spi/HasDependencies.html)，它可以扩充此图。
>     
>     
> *   [Binder.skipSources()](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Binder.html#skipSources%28java.lang.Class...%29)允许您编写其错误消息正确跟踪行号的扩展。
>     
>     
> 
> [Binder.skipSources()](http://google-guice.googlecode.com/svn/trunk/javadoc/com/google/inject/Binder.html#skipSources%28java.lang.Class...%29)如果您编写泛型绑定辅助方法并且 Guice 仅报告泛型辅助方法的行号，但您（很可能）实际上希望调用者的行号位于堆栈的上一层，则很有用。

# arrays - 将值分配给二维数组时的垃圾值

> ID：12963154
> 
> 赞同：1
> 
> 时间：2012-10-18T20:25:47.493
> 
> 标签：arrays, assembly, att, x86

我对组装完全陌生，在为我的二维“数组”分配值时遇到了一个问题。我的数组是一个`.space`命名的`screen`并分配有`HEIGHT * WIDTH * 4`，所以有足够的空间。

在我执行数组下面的命令之前只包含`0`值（我知道这一点，因为在发出下面的命令之前，我循环遍历数组并将所有值设置为`0`，并通过打印出所有值来验证它）。

这就是我所做的：

```
movl $0, %eax
movl $1, %ebx
movl $20, screen(%eax, %ebx, 4) 
```

这就是它的结果（列出所有行和列时）：

```
x:0 y:0 value:0
x:0 y:1 value:20
x:0 y:2 value:0
x:0 y:3 value:0
x:0 y:4 value:0
x:1 y:0 value:335544320
x:1 y:1 value:0
x:1 y:2 value:0
x:1 y:3 value:0
x:1 y:4 value:0
x:2 y:0 value:1310720
x:2 y:1 value:0
x:2 y:2 value:0
x:2 y:3 value:0
x:2 y:4 value:0
x:3 y:0 value:5120
x:3 y:1 value:0
x:3 y:2 value:0
x:3 y:3 value:0
x:3 y:4 value:0
x:4 y:0 value:20
x:4 y:1 value:0
x:4 y:2 value:0
x:4 y:3 value:0
x:4 y:4 value:0 
```

我所期待的只是看到 : 的`screen[0][1]`变化`x:0 y:1 value:20`。是什么导致了这些“垃圾”值（`335544320`,`1310720`等`5120`）？

正如我提到的，我是一个完整的初学者，所以要友善！

**编辑：** 我提供了零填充函数和列出数组中所有值的函数。

```
HEIGHT = 5
WIDTH = 5
EMPTY = 0

.section .data
counter: .int 0
counter2: .int 0

str3: .string "x:%d y:%d value:%d\n"

.section .text
#################################
# Fill screen array with zeroes
init_screen:
#################################
movl    $0, counter
init_screen_array_x:

    movl    $0, counter2
init_screen_array_y:
    movl    counter, %ebx
    movl    counter2, %ecx
    movl    $EMPTY, screen(%ebx, %ecx, 4)

    incl    counter2
    cmpl    $HEIGHT, counter2
    jl  init_screen_array_y

    incl    counter
    cmpl    $WIDTH, counter
    jl  init_screen_array_x

    ret
#################################
# end init_screen
#################################

#################################
# Debugging function, list all values in array
list_screen_array:
#################################
movl    $0, counter
list_screen_array_x:

    movl    $0, counter2
list_screen_array_y:
    movl    counter, %ebx
    movl    counter2, %ecx

    pushl   screen(%ebx, %ecx, 4)
    pushl   counter2
    pushl   counter
    pushl   $str3
    call    printf
    addl    $16, %esp

    incl    counter2
    cmpl    $HEIGHT, counter2
    jl  list_screen_array_y

    incl    counter
    cmpl    $WIDTH, counter
    jl  list_screen_array_x

    ret
#################################
# end list_screen
################################# 
```

**编辑2**：在安德烈亚斯的输入之后，我做了这个功能：

```
# x should be stored in %eax
# y should be stored in %ebx
# saves address to screen[%eax][%ebx] in %eax
screen_get_address:
    imull $4, %eax
    imull $4, %ebx
    imull $WIDTH, %ebx
    addl %ebx, %eax
    addl screen, %eax
    ret 
```

**编辑 3** 还有一些地方不对劲。现在这样做时：

```
movl $0, %eax
movl $2, %ebx
call screen_get_address
movl $20, (%eax) 
```

我得到（3x3 数组）：

```
x:0 y:0 value:0
x:0 y:1 value:0
x:0 y:2 value:20
x:1 y:0 value:0
x:1 y:1 value:20
x:1 y:2 value:0
x:2 y:0 value:20
x:2 y:1 value:0
x:2 y:2 value:0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:30:39.697

您计算地址的代码是错误的。要访问 2D dword 数组的 (%ebx=x,%ecx=y) 元素，您需要访问以下位置的数据

```
 screen + 4*(%ecx*WIDTH + %ebx) 
```

您正在访问 screen(%ebx, %ecx, 4)，即

```
screen + %ebx + 4*%ecx 
```

即错误的位置。在您的 movl 指令之前，您必须首先生成地址（例如，使用 MUL，或者，如果 WIDTH 是 2 的幂，则使用 shift 指令）。如果您只想循环遍历所有元素，您可以只使用一个连续递增的指针来省去复杂的地址计算。

# mysql - Bash脚本中的文件意外结束？

> ID：12963155
> 
> 赞同：0
> 
> 时间：2012-10-18T20:26:26.387
> 
> 标签：mysql, bash, unix

这只是一个小脚本，用于将用户添加到电子邮件 MySQL 数据库，如果定义了参数，则为他分配别名，向用户发送欢迎电子邮件，并向其他所有人发送电子邮件以通知新人。但是每次我尝试运行脚本时，我只会收到消息`UNEXPECTED END OF FILE`。这是脚本：

```
#! /bin/bash

USER=$1
SECTOR=$2

if [ -z "${SECTOR}" ];
then
   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase << EOF
   insert into users (email,name,uid,gid,homedir,maildir,crypt,force_change_pwd) values("${USER}@example.com.br","${USER}",1001,1001, "/var/mail/${USER}/","/var/mail/${USER}/.maildir/",ENCRYPT("verysecretdefaultpass"), "yes" );
   EOF
else
   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase << EOF
   insert into users(email,name,uid,gid,homedir,maildir,crypt,force_change_pwd)  values("${USER}@example.com.br","${USER}",1001,1001,"/var/mail/${USER}/","/var/mail/${USER}/.maildir/",ENCRYPT("verysecretdefaultpass"), "yes" ); EOF
   insert into alias(alias,destination) values ("${SECTOR}@example.com.br", "${USER}@example.com.br");
   EOF
fi

# send e-mail so my postfix can create the mail directories 
/usr/sbin/sendmail -f me@example.com.br "${USER}@example.com.br" << EOF
Subject: Bem Vindo!
Seja bem vindo ao Servidor de e-mails da Empresa! Com muito orgulho hospedamos nosso e-mail        em nosso próprio servidor. Em caso de dúvidas contacte <me@example.com.br>
.
EOF

# fetching everyone already in the database
users=`mysql --user=myverysecretuser --password=myverysecretpass -s -N -e "SELECT myverysecretfield FROM    myverysecretdatabase.myverysecretusertable"`

#sending an e-mail to each user
for user in $users
do
   echo "${user}"
   /usr/sbin/sendmail -f me@example.com.br "${user}" << EOF
   Subject: Funcionario novo!
   Prezados, deem as boas vindas ao funcionario novo "${USER}" que acabou de entrar no  departamento de "${SECTOR}". Para se comunicar com o funcionario novo, basta enviar e-mails   para: "${USER}@example.com.br". O funcionario novo tambem recebera e-mails que forem   enviados para "${SECTOR}@example.com.br".
   .
   EOF
done 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:33:10.117

尝试这个 ：

```
#! /bin/bash

USER=$1
SECTOR=$2

if [ -z "${SECTOR}" ];
then
   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase << EOF
   insert into users (email,name,uid,gid,homedir,maildir,crypt,force_change_pwd) values("${USER}@example.com.br","${USER}",1001,1001, "/var/mail/${USER}/","/var/mail/${USER}/.maildir/",ENCRYPT("verysecretdefaultpass"), "yes" );
EOF
else
   mysql --host=localhost --user=verysecretdatabaseuser --password=verysecretdatabasepass mydatabase << EOF
   insert into users(email,name,uid,gid,homedir,maildir,crypt,force_change_pwd)  values("${USER}@example.com.br","${USER}",1001,1001,"/var/mail/${USER}/","/var/mail/${USER}/.maildir/",ENCRYPT("verysecretdefaultpass"), "yes" ); EOF
   insert into alias(alias,destination) values ("${SECTOR}@example.com.br", "${USER}@example.com.br");
EOF
fi

# send e-mail so my postfix can create the mail directories 
/usr/sbin/sendmail -f me@example.com.br "${USER}@example.com.br" << EOF
Subject: Bem Vindo!
Seja bem vindo ao Servidor de e-mails da Empresa! Com muito orgulho hospedamos nosso e-mail        em nosso próprio servidor. Em caso de dúvidas contacte <me@example.com.br>
.
EOF

# fetching everyone already in the database
users=`mysql --user=myverysecretuser --password=myverysecretpass -s -N -e "SELECT myverysecretfield FROM    myverysecretdatabase.myverysecretusertable"`

#sending an e-mail to each user
for user in $users
do
   echo "${user}"
   /usr/sbin/sendmail -f me@example.com.br "${user}" << EOF
   Subject: Funcionario novo!
   Prezados, deem as boas vindas ao funcionario novo "${USER}" que acabou de entrar no  departamento de "${SECTOR}". Para se comunicar com o funcionario novo, basta enviar e-mails   para: "${USER}@example.com.br". O funcionario novo tambem recebera e-mails que forem   enviados para "${SECTOR}@example.com.br".
   .
EOF
done 
```

结束`EOF`必须在行的开头。

您可以`dry-run`使用以下模式测试脚本：

```
bash -n script.sh 
```

# php - 如何阻止 heroku 重新启动 3rd 方脚本？（香草论坛）

> ID：12963159
> 
> 赞同：1
> 
> 时间：2012-10-18T20:26:35.867
> 
> 标签：php, git, deployment, heroku

（对不起，这里的新手）所以我设法将我的本地 php web 应用程序推送到他们的服务器，使用我在网上找到的关于如何推送 php 项目的教程。它工作得很好。

现在，当我加载我的网站时。脚本安装出现（原版论坛），所以我进行了正确的安装并使用 CLEARDB 插件为该站点提供 MYSQL 数据库。

论坛只是我整个网站的一部分，问题是..每次我在我的网站上更改某些内容时，git commit 并推送到 heroku.. 香草论坛的应用程序安装再次出现。

我怎样才能阻止 git 或 heroku 将论坛部分更改为上次提交的状态？（请注意，我已经成功安装了论坛软件，但是由于我网站其他部分的小更新，当我提交和推送时，论坛软件又重新安装了）

为了更好地理解：我的网站网址：[http](http://codeknack.herokuapp.com) ://codeknack.herokuapp.com 论坛网址：[http ://codeknack.herokuapp.com/forum](http://codeknack.herokuapp.com/forum)

这是我整个网站的结构：index.php

挑战/

聚会/

教程/

社区/

论坛/

论坛文件夹中的原版论坛 php 脚本在哪里，当我只编辑我网站的 index.php 的一部分时，原版论坛再次显示安装屏幕。

（如果我太模糊，请告诉我你在哪一部分感到困惑）

这真的很有帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:27:59.843

这就是他们发明**[`.gitignore`](https://help.github.com/articles/ignoring-files)**文件的原因。您可以指定 git 忽略的文件、目录和通配符。

# javascript - 函数在定义之前使用 - JSLint

> ID：12963161
> 
> 赞同：12
> 
> 时间：2012-10-18T20:26:43.133
> 
> 标签：javascript, jslint

JSLint 不喜欢这段代码说“在定义之前使用了'b'”

```
var a = function () {
        b();
    },

    b = function () {
        alert("Hello, world!");
    };

a(); 
```

但对此非常满意

```
var a, b;

a = function () {
    b();
};

b = function () {
    alert("Hello, world!");
};

a(); 
```

但我没有在我的第二个代码片段中*定义任何内容。*我只是*声明*变量 b。

那么为什么 JSLint 会这样做呢？有什么理由我应该首先声明我的所有功能吗？

PS 我知道我可能只是改变了 a 和 b 的顺序，但在实际项目中，我的函数是事件处理程序，有时它们会相互调用，所以这可能是不可能的。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T20:32:12.983

如果您的代码编写良好且面向对象，则可以在使用函数之前声明它们。但是 JSLint 设置了很多与你的应用程序功能几乎没有关系的标准，我真的怀疑以一种或另一种方式声明函数会影响性能。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-07-11T20:56:45.850

> 那么为什么 JSLint 会这样做呢？有什么理由我应该首先声明我的所有功能吗？

是的，否则可能会出现一些意外错误。由于 JavaScript 的“提升”，您的代码有效。这种机制会提取所有隐式或显式声明，并可能导致一些意外结果。

考虑这段代码：

```
var s = "hello";    // global variable
function foo() {
    document.write(s);   // writes "undefined" - not "hello"
    var s = "test";      // initialize 's'
    document.write(s);   // writes "test"
};
foo(); 
```

它被解释如下：

```
var s = "hello";    // global variable
function foo() {
    var s;               // Hoisting of s, the globally defined s gets hidden
    document.write(s);   // writes "undefined" - now you see why
    s = "test";          // assignment
    document.write(s);   // writes "test"
}
foo(); 
```

（示例取自德语维基百科页面：[http](http://de.wikipedia.org/wiki/Hoisting) ://de.wikipedia.org/wiki/Hoisting ）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T20:29:11.500

在 C 中这就是我们所说的前向声明，看起来它在 JSLint 中可能是一样的。JSLint 知道 b 并且此时 b 可能是它所关心的所有函数（但如果它不是函数，它当然会抛出错误）

# .net - .NET Regex 中需要转义哪些字符？

> ID：12963165
> 
> 赞同：40
> 
> 时间：2012-10-18T20:26:54.740
> 
> 标签：.net, regex, escaping

在 .NET[`Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)模式中，哪些特殊字符需要转义才能按字面意思使用？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-18T20:29:29.580

我不知道完整的字符集 - 但无论如何我不会依赖这些知识，也不会将其放入代码中。相反，[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)每当我想要一些我不确定的文字时，我都会使用：

```
// Don't actually do this to check containment... it's just a little example.
public bool RegexContains(string haystack, string needle)
{
    Regex regex = new Regex("^.*" + Regex.Escape(needle) + ".*$");
    return regex.IsMatch(haystack);
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2013-02-09T11:26:10.537

以下是需要转义才能将它们用作普通文字的字符列表：

1.  左方括号`[`
2.  反斜杠`\`
3.  插入符号`^`
4.  美元符号`$`
5.  句号或点`.`
6.  竖条或竖管符号`|`
7.  问号`?`
8.  星号或星号`*`
9.  加号`+`
10.  左圆括号`(`和右圆括号`)`
11.  打开大括号`{`
12.  英镑/哈希符号`#`

这些特殊字符通常称为“元字符”。

但是，我同意 Jon`Regex.Escape`在代码中使用而不是硬编码这些字符。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-18T20:29:27.600

请参阅此处的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/az24scfc.aspx#character_escapes](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#character_escapes)

完整列表的问题在于它取决于上下文。例如`.`，必须转义，除非它被括在括号中，如`[.]`. `]`技术上不需要转义，除非它前面有`[`. `-`没有特殊含义，除非它在括号内，如`[A-Z]`. `=`除非前面有`?`as in ，否则没有特殊含义`(?=)`。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-18T20:36:46.457

我认为您可以将字符列表作为

```
List<char> chars = Enumerable.Range(0,65535)
                .Where(i=>((char)i).ToString()!=Regex.Escape(((char)i).ToString()))
                .Select(i=>(char)i)
                .ToList(); 
```

--

```
\t\n\f\r#$()*+.?[\^{| 
```

# javacc - 用于解析的 Javacc '

> ID：12963166
> 
> 赞同：0
> 
> 时间：2012-10-18T20:26:57.080
> 
> 标签：javacc

我正在为一组 CFG 编写解析器。（注意：RHS 只能是大写字母）

/*忽略声明和其他东西，这是代码的主要部分*/

```
void
start():
{
}
{
    (
     <UPPER_CHAR>
     <ARROW>
     <STRING>
     ( <PIPE> <STRING> )*
    )*
}

TOKEN:
{
 <ARROW: "=>" >
|
 <PIPE: "|">
|
 <UPPER_CHAR: (["A"-"Z"])>
}

TOKEN: {<STRING: (<LETTER> |  <DIGIT> | <SYMBOL>)+ > } 
```

这显然错过了一些边缘情况，其中包括：

`A => A | a | D E => e`

那么我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:37:14.240

我猜 SYMBOL 包括“=”和“>”，但不包括“|”。在这种情况下。STRING 将匹配整个“DE => e”。

你为什么要 STRING？为什么不做这样的事情。

```
void start() : {} {
   (
      <UPPER_CHAR> <ARROW>
      choices()
   )*
}
void choices() : {} {
      choice() ( <PIPE> choice())*
}
void choice() : {} {
    LOOKAHEAD(<UPPER_CHAR> <ARROW> )
    {}
 |
    (<UPPER_CHAR> | <LOWER_CHAR>) choice()
 |
    {}
} 
```

我使用递归的原因`choice`是没有办法使用语法前瞻来退出循环。即，您想要的是 `(<UPPER_CHAR> | <LOWER_CHAR>)*`，但您希望在接下来的两个令牌出现后立即退出此循环`<UPPER_CHAR> <ARROW>`。

# scala - Scala - 如何使用映射从类型（A，B）的元组列表转换为类型（B，A）

> ID：12963167
> 
> 赞同：6
> 
> 时间：2012-10-18T20:27:02.763
> 
> 标签：scala

`List[String, Int]`将A转换为 B 的最佳方法是什么`List[Int, String]`。我想使用 map 函数，它会遍历列表 A 中的所有项目，然后返回一个新列表 B 但是每当我在列表 A 上应用 map 函数时，它都会抱怨参数数量错误

```
val listA:List[(String, Int)] = List(("graduates", 20), ("teachers", 10), ("students", 300))
val listB:List[(Int, String)] = listA.map((x:String, y:Int) => y, x) 
```

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T20:28:33.543

这个怎么样：

```
val listB = listA.map(_.swap) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-18T20:28:23.257

您需要使用模式匹配来获取一对元素。我发誓前几天有人问过这样的问题......

```
listA.map{case (a,b) => (b,a)} 
```

# ios - 放弃对 iOS 4 的支持

> ID：12963169
> 
> 赞同：2
> 
> 时间：2012-10-18T20:27:17.410
> 
> 标签：ios, version, itunes

我有一个目前在 iOS4-6 上运行良好的应用程序。但是，我想使用仅支持 5 及更高版本的较新库。删除操作系统版本的后果是什么？iOS4上的人如何备份他们的应用程序？我应该告诉他们从 iTunes 备份 IPA 文件吗？我知道当我需要旧 iOS 版本的文件并且无法取回文件时，我曾遇到过几种情况。

如果你不得不放弃一个 iOS 版本，你会怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:31:10.550

如果您想放弃对 iOS 4 的支持，后果可能是多方面的，并且肯定会有一些用户陷入您所说的“需要一个无法取回的文件”中。

在任何情况下，我认为告诉您的用户备份应用程序数据和 IPA 文件是一个很好的策略（您可能会设计另一种策略，就像 @benzado 建议的那样，但您提出的那个肯定会起作用，即使在用户决定通过 iTunes 更新应用程序的情况下）以降低风险。

我唯一不知道的是你将如何告诉他们这样做。也许通过一个中间版本说：这是iOS4的最后一个？没有把握。

另一方面，我不确定您是否真的需要放弃对 iOS4 的支持。

看看[这篇文章](http://cocoawithlove.com/2010/07/tips-tricks-for-conditional-ios3-ios32.html)的一般方法。

如果您只是想添加一个新框架（存在于 iOS5/6 而不是 iOS4），那么只需弱链接这些框架，然后有条件地包含这些框架的标头即可。

说你想支持推特；然后你有条件地包含标题：

```
#if defined(__IPHONE_5_0) && __IPHONE_OS_VERSION_MAX_ALLOWED >= __IPHONE_5_0
#import <Twitter/Twitter.h>
#import <Accounts/Accounts.h>
#endif 
```

并且有条件地保护 Twitter 方法的使用：

```
Class tweeterClass = NSClassFromString(@"TWTweetComposeViewController");
if (tweeterClass != nil && [tweeterClass respondsToSelector:@selector(canSendTweet)]) {
   ...
} 
```

（此代码只会在 iOS5/6 上执行）。

至于弱链接，转到您的目标选项，显示构建阶段，您可以在“与框架的链接”下添加新框架；只需确保您选择右侧的“可选”选项（见图）。

![在此处输入图像描述](../Images/6d8291d683c3824758cf859bb1c8fff2.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:43:24.117

如果您放弃对 iOS 4 的支持，请告诉现有用户：

1.  与计算机上的 iTunes 同步以备份其应用程序和数据。（无论如何他们都应该这样做。）
2.  仅在设备上下载应用程序更新，不要在计算机上的 iTunes 中下载应用程序更新。设备永远不会下载它无法运行的更新，但 iTunes 可能会用无法在您的设备上运行的较新副本覆盖您的备份副本。

事实上，大多数仍在使用旧 iOS 设备的人不会定期将其与 iTunes 同步，因此除非单独删除或擦除整个设备，否则他们不会丢失应用程序。

# php - php批处理并返回php

> ID：12963171
> 
> 赞同：1
> 
> 时间：2012-10-18T20:27:21.643
> 
> 标签：php, windows, batch-file

以下批处理代码（文件名为`autoFTP.bat`）将重命名文件夹中的文件：

```
@echo off
setlocal EnableDelayedExpansion
::---------- Path to files that must be renamed
for /f "delims=" %%i in ('dir /b D:\folder\*.htm') do (
::---------- Path to md5sums.exe
for /f "skip=3 delims=" %%j in ('md5sums -n -b "%%i"') do (
set number=%%i
set file=%%j
set file=!file:*.htm=!
for %%k in (!file!) do (
ren "%%i" "%%k.htm"
echo "!number! %%k"
)
)
)
echo. 
```

在`update.php`，我想运行批处理文件并在 php 文件中获取结果（文件的旧名称和新名称）。`update.php`包含：

```
$fileName = exec("cmd /c D:\folder\autoFTP.bat", $out);

foreach($out as $line) {
    echo $line;
} 
```

从我在 php 手册中阅读的内容来看，`$out`应该是一个结果数组，但是`$line`是空的。

理论上，这个想法是我想在 DB 中更新被重命名的文件的名称（不是文件，而只是文件的重命名名称）。因此，为了做到这一点，我希望`$out`变量包含文件的原始名称以及重命名的文件。

如果我`autoFTP.bat`从 cmd 独立运行，它将正常工作；但是当我尝试从中调用它时`update.php`，它什么也不做。

我做错了什么，但我不知道是什么。

# math - 贝塞尔曲线中的数学错误

> ID：12963172
> 
> 赞同：0
> 
> 时间：2012-10-18T20:27:57.210
> 
> 标签：math, lua, bezier

我正在尝试绘制生成三次*Bezier Curve*的图，并且我设法能够轻松生成线性和四边形，但我的三次公式一直出错，

线性公式：`x = (1-t)*(p0x + (t * p1x))` 四边形公式：`x = (1-t)^2 * p0x + 2*(1-t) * t * p1x + t^2 * p2x` 三次公式：`x = (1–t)^3 * p0x + 3*(1–t)^2 * t * p1x + 3*(1–t)*t^2 * p2x + t^3 * p3x`

尽管四边形和三次公式非常相似，但三次误差“')' 预计在“-”附近。如何解决这个问题？

我正在用 Lua 编程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:35:52.560

# java - N分钟后会话绝对过期，即使用户正在使用系统

> ID：12963174
> 
> 赞同：4
> 
> 时间：2012-10-18T20:28:01.750
> 
> 标签：java, tomcat, grails, spring-security, session-timeout

我正在开发一个带有 spring 安全性的 grails Web 应用程序。即使会话处于活动状态，我也需要在固定的时间后强制会话到期。

我想我可以添加过滤器并检查每个请求的最后登录时间：

```
if (CURRENT_TIME - LAST_LOGIN > ABSOLUTE_SESSIO EXPIRATION) then FORCE LOGOUT 
```

但问题是会话在服务器上仍然处于活动状态，直到用户发出请求。

即使用户正在使用系统，这是否可以在 N 分钟后立即销毁会话？我正在研究tomcat会话管理以及spring security如何处理它，但没有找到任何有用的信息。

有人可以指出我的一些例子吗？有没有人实现过类似的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:58:13.553

[编辑：在登录时间决定的特定时间终止会话的想法是使用[Quartz](http://quartz-scheduler.org/)之类的任务调度程序来调度作为参数传递会话的任务。然后，您可以安排它调用`session.invalidate()`在特定时间点执行的作业。该任务将在登录时安排。]

我就是这样做的，但它不会在您想要的特定时间终止会话。它依赖于用户发出请求。这不是万无一失的，但您可以让应用程序每分钟左右通过 AJAX 调用轮询站点。

在用户会话上设置会话激活时间。然后为 Web 应用程序添加一个过滤器，用于检查（激活周期 + 允许的时间）是否超过当前时间的所有传入请求。如果没有，则调用 session.invalidate();

即登录时

```
HttpSession session = request.getSession();
session.setAttribute( "activation-time", System.currentTimeMillis() ); 
```

然后在 web.xml 中添加一个过滤器

```
<filter>
    <filter-name>SessionFilter</filter-name>
    <filter-class>com.something.SessionFilter</filter-class>
    <init-param>
        <param-name>max-period</param-name>
        <param-value>60000</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>SessionFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

过滤器将类似于...

```
package com.something;

import java.io.IOException;
import java.util.Date;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpSession;

public class SessionFilter implements Filter {
    private long maxPeriod;

    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) req;
        HttpSession session = request.getSession( false );
        if ( session != null ) {
            long activated = (long) session.getAttribute( "activation-time" );
            if ( System.currentTimeMillis() > ( activated + maxPeriod ) ) {
                 session.invalidate();
            }
        }
        chain.doFilter(req, res);
    }

    public void init(FilterConfig config) throws ServletException {
        //Get init parameter
        if ( config.getInitParameter("max-period") == null ) {
             throw new IllegalStateException( "max-period must be provided" );
        }
        maxPeriod = new Long( config.getInitParameter("max-period") );
    }

    public void destroy() {
        //add code to release any resource
    }
} 
```

如果您需要在会话无效时调用某些内容，那么您也可以`HttpSessionListener`在 web.xml 中编写和配置。

# php - 如何修复 Excel 导出 (PHP) 中的“标签”？

> ID：12963175
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:28:02.620
> 
> 标签：php, excel, encoding, delimiter, separator

我应用[此解决方案](https://stackoverflow.com/questions/4348802/how-can-i-output-a-utf-8-csv-in-php-that-excel-will-read-properly)解决了将文件导出到 .CSV 和 Excel 的编码问题，并且它成功运行，但现在出现了另一个问题：

我在 PHP 中用作 Excel 文件分隔符的制表符 ("\t") 停止工作。在我解决上一个问题之前它正在工作。当我打开excel文件时，它显示如下：

> “ColumnAColumbBColumnC”（全部放在一起）。

如果像 csv 一样导出它`('Content-type: text/csv; charset=UTF-8'`）我成功了，但不是 Excel（`Content-type: application/vnd.ms-excel; charset=UTF-8`）。

有什么解决办法吗？

注意：使用“，”作为分隔符对我来说不是一个好的解决方案，因为我在某些字段中有“，”的值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-26T12:41:34.987

我在 PHP 中用作 Excel 文件分隔符的制表符 ("\t") 停止工作。

对，那是正确的。

尽管如此，仍然有一种简单的方法可以导出到 Excel。

使用带有`<td>`and的表格`<tr>`，这确实很好。

一个例子：

```
<?php
    header("Content-Type: text/plain");
    echo "<table border='1'>";
    echo "<tr>";
    echo "<th>Name</th>";
    echo "<th>First Name</th>";
    echo "<th>Department</th>";
    echo "<th>Date</th>";
    echo "<th>Topic</th>";
    echo "<th>State</th>";
    echo "<th>E-mail</th>";
    echo "<th>Place</th>";
    echo "<th>Registration fee</th>";
    echo '</tr>';
    echo '</table>';
    header("Content-disposition: attachment; filename=example_export_to_excel.xls");
    }
?> 
```

这非常适合导出到 excel。不需要库，为什么看起来复杂的事情尽可能简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T22:48:09.737

如果您在字符串字段中有逗号并且想要使用逗号作为分隔符，那么您将字符串括在引号中......这就是 CSV 文件的工作方式。

所以我的假设是你没有使用 PHP 的内置[fputcsv()](http://www.php.net/manual/en/function.fputcsv.php)函数来创建你的 csv 文件，否则你已经知道了......为什么不考虑使用它，因为它可以处理你不知道的所有小复杂性'似乎没有意识到。

请注意，Excel csv 文件确实使用制表符，并且通常编码为带有 BOM 的 UTF-16LE，而不是 UTF-8；并且无需在内容类型标头中识别字符集。

# node.js - 如何写入 Node.js Connect/Express 记录器？

> ID：12963176
> 
> 赞同：5
> 
> 时间：2012-10-18T20:28:07.003
> 
> 标签：node.js, express, connect

我有一个 Express 项目，并将其设置为记录到文件：

```
logPath = '/mnt/log/api.log'
logfile = fs.createWriteStream logPath, {flags: 'a'} 

loggingOptions = 
  format: 'default'
  stream: logfile

app.use express.logger(loggingOptions) 
```

这适用于记录请求，但我想将自己的消息添加到日志中，但我不知道如何。`console.log`没有重定向，并且似乎没有创建我可以写入的“记录器”对象。

那么我唯一的选择是传递对文件流的引用并写入它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T01:25:04.570

我不知道如何完全按照您的要求做，但这就是我所做的，到目前为止效果很好。

我配置了快速记录器（如果您正在寻找文档，实际上是连接记录器），如下所示，所有日志输出都进入标准输出。我可以使用 console.log("blah blah") 打印到相同的输出。

```
app.use(express.logger("default")); 
```

在生产服务器上，我将节点的所有输出重定向到日志文件。

这在开发过程中也很有效，因为我在 shell 窗口中运行 node 并且可以看到所有相同的输出。（实际上我在开发过程中使用 express.logger("dev") 因为输出对于开发工作来说更干净。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-20T22:47:59.940

您可以创建自己的日志记录中间件：

```
app.use (req, res, next) ->
   logFile.write "anything you want"
   next() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T12:23:07.513

像其他中间件一样定义错误处理中间件，除了使用四个参数而不是三个，特别是使用签名（err、req、res、next））：

```
 app.use(function(err, req, res, next){
  console.error(err.stack);
  res.status(500).send('Something broke!');
}); 
```

[http://expressjs.com/guide/error-handling.html](http://expressjs.com/guide/error-handling.html)

# centos - 自定义 yum 存储库不显示 rpm

> ID：12963177
> 
> 赞同：5
> 
> 时间：2012-10-18T20:28:11.670
> 
> 标签：centos, rpm, yum, rhel, repository

我有一个存储自定义 rpm 的 yum 存储库。我可以毫无问题地查找有关在此自定义存储库中构建和存储的其他包的信息。

```
#yum  --disablerepo=rhui-us-east-rhel-server-1y,epel,epel-testing --enablerepo=customrepo install php53-pecl-xdebug

 php53-pecl-xdebug                   x86_64                   2.2.1-2  customrepo                      132 k 
```

没问题。

现在我将 somerpm.rpm 放到 centos/repo/5/noarch 中，运行 createrepo --update 。在此目录中并尝试相同的命令，但它没有显示任何结果。

我也尝试在 repo 的根目录中运行 createrepo --update ，但这也不起作用（我实际上不确定在哪里运行它以及它是否需要每个子目录中的 repodata 目录）。

```
[root@reposerver mnt]# ls -l /var/www/repo/ 
total 12
-rw-r--r-- 1 root root  203 Jun  8 00:13 REPO_README
drwxr-xr-x 3 root root 4096 Jun 10  2011 centos
drwxr-xr-x 2 root root 4096 Oct 18 20:02 repodata
[root@reposerver mnt]# ls -l /var/www/repo/centos/5/
SRPMS/    i386/     noarch/   repodata/ x86_64/   
[root@reposerver mnt]# ls -l /var/www/repo/centos/5/noarch/
total 7324
-rw-r--r-- 1 root root    1622 Jun 28  2011 compat-php-5.1.6-1.noarch.rpm
drwxr-xr-x 2 root root    4096 Oct 18 19:55 repodata
-rw-r--r-- 1 root root 1066928 Oct 18 19:54 salt-0.10.3-1.noarch.rpm
-rw-r--r-- 1 root root 6363197 Oct 18 19:54 salt-0.10.3-1.src.rpm
-rw-r--r-- 1 root root   21822 Oct 18 19:54 salt-master-0.10.3-1.noarch.rpm
-rw-r--r-- 1 root root   14294 Oct 18 19:54 salt-minion-0.10.3-1.noarch.rpm 
```

我还尝试在我的 repo 配置中添加 exactarch=0 标志以忽略 arch 限制，但这也不起作用，这是在黑暗中拍摄，因为我的 rpm 是 noarch，无论如何它都应该显示。

```
# cat /etc/yum.repos.d/mycompany.repo 
[mycompany]
name=mycompany custom repo
baseurl=http://config/repo/centos/5/$basearch
enabled=1
exactarch=0 
```

我在这一点上不知所措。通常 createrepo --update 可以解决问题，但由于某种原因，它无法找到新的 rpm。

```
 repo]# find . -type f -name "*.gz" | xargs  zcat | grep salt-minion 
```

也返回结果，所以它肯定在回购数据中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-20T00:25:42.347

`yum clean all`在我试图安装的服务器上工作。还要确保在特定子目录而不是 repo 的根目录上执行 createrepo --update。

# c++ - 为什么我的立方体只呈现为正方形？

> ID：12963182
> 
> 赞同：0
> 
> 时间：2012-10-18T20:28:31.737
> 
> 标签：c++, opengl

我有两个问题，但一次一个。我试图渲染一个 3d 立方体，但它看起来只是一个正方形。

着色器是：

```
#version 330
uniform mat4 mvp;
layout(location=0) in vec4 vPosition;
layout(location=1) in vec4 vColor;
out vec4 color;

void main() {
        color = vColor;
        gl_Position = mvp * vPosition;
} 
```

我的主要内容：

```
#include "Angel.h"
#include <gl/glew.h>
#include <glut.h>
#include <glm/glm.hpp>
#include <glm/gtc/matrix_transform.hpp>
#include <glm/gtc/type_ptr.hpp>
#include <iostream>
using namespace std;

#define bool int  /* if system does not support bool type */
#define false 0
#define true 1
#define M_PI 3.14159265358 /* if not in math.h */
int winWidth, winHeight;
float angle = 0.0, axis[3], trans[3];
bool trackingMouse = false;
float lastPos[3] = {0.0, 0.0, 0.0};
float aspect = 1.0;
int curx, cury;
int startX, startY;
int modelInit=1;
//the program object
GLuint program = 0;
 glm::mat4 model;

typedef Angel::vec4 color4;
typedef Angel::vec4 point4;
const int NumVertices = 36; //(6 faces)(2 triangles/face)(3 vertices/triangle)
point4 points[NumVertices];
color4 colors[NumVertices];

enum { Xaxis = 0, Yaxis = 1, Zaxis = 2, NumAxes = 3 };
int Axis = Xaxis;
GLuint mvpUniform;
GLuint shaderaxis;
int Index = 0;

// Vertices of a unit cube centered at origin, sides aligned with axes
point4 vertices[8]={
        point4(-0.5, -0.5, 0.5, 1.0),
        point4(-0.5, 0.5, 0.5, 1.0),
        point4(0.5, 0.5, 0.5, 1.0),
        point4(0.5, -0.5, 0.5, 1.0),
        point4(-0.5, -0.5, -0.5, 1.0),
        point4(-0.5, 0.5, -0.5, 1.0),
        point4(0.5, 0.5, -0.5, 1.0),
        point4(0.5, -0.5, -0.5, 1.0)
};

// RGBA colors
color4 vertex_colors[8] = {
        color4(0.0, 0.0, 0.0, 1.0), // black
        color4(1.0, 0.0, 0.0, 1.0), // red
        color4(1.0, 1.0, 0.0, 1.0), // yellow
        color4(0.0, 1.0, 0.0, 1.0), // green
        color4(0.0, 0.0, 1.0, 1.0), // blue
        color4(1.0, 0.0, 1.0, 1.0), // magenta
        color4(1.0, 1.0, 1.0, 1.0), // white
        color4(0.0, 1.0, 1.0, 1.0) // cyan
};

// quad generates two triangles for each face and assigns colors to the vertices
void quad(int a, int b, int c, int d) {
        colors[Index] = vertex_colors[a]; points[Index] = vertices[a]; Index++;
        colors[Index] = vertex_colors[b]; points[Index] = vertices[b]; Index++;
        colors[Index] = vertex_colors[c]; points[Index] = vertices[c]; Index++;
        colors[Index] = vertex_colors[a]; points[Index] = vertices[a]; Index++;
        colors[Index] = vertex_colors[c]; points[Index] = vertices[c]; Index++;
        colors[Index] = vertex_colors[d]; points[Index] = vertices[d]; Index++;
}

// generate 12 triangles: 36 vertices and 36 colors
void colorcube(void) {
        quad(1, 0, 3, 2);
        quad(2, 3, 7, 6);
        quad(3, 0, 4, 7);
        quad(6, 5, 1, 2);
        quad(4, 5, 6, 7);
        quad(5, 4, 0, 1);
}

// OpenGL initialization
void init(void) {
        colorcube();
        // Load shaders and use the resulting shader program
        GLuint program = InitShader("vshader36.glsl", "fshader36.glsl");
        glUseProgram(program);

        // Create a vertex array object
        GLuint vao;
        glGenVertexArrays(1, &vao);
        glBindVertexArray(vao);

        // Create and initialize a buffer object
        GLuint buffer;
        glGenBuffers(1, &buffer);
        glBindBuffer(GL_ARRAY_BUFFER, buffer);
        glBufferData(GL_ARRAY_BUFFER, sizeof(points) + sizeof(colors), NULL, GL_STATIC_DRAW);

        glBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(points), points);
        glBufferSubData(GL_ARRAY_BUFFER, sizeof(points),  sizeof(colors), colors);

        // set up vertex arrays
        glEnableVertexAttribArray(0);
        glVertexAttribPointer(0, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(0));

        model = glm::translate(glm::mat4(1.0), glm::vec3(0.0, 0.0, -5.0));

        glEnableVertexAttribArray(1);
        glVertexAttribPointer(1, 4, GL_FLOAT, GL_FALSE, 0, BUFFER_OFFSET(sizeof(points)));

        mvpUniform = glGetUniformLocation(program, "mvp");
        glEnable(GL_DEPTH_TEST);
        glClearColor(1.0, 1.0, 1.0, 1.0);
}

void trackball_ptov(int x, int y, int width, int height, float v[3]) {
        float d, a;
        /* project x, y onto a hemisphere centered within width, height , note z is up here*/
        v[0] = (2.0*x - width) / width;
        v[1] = (height - 2.0F*y) / height;
        d = sqrt(v[0]*v[0] + v[1]*v[1]);
        v[2] = cos((M_PI/2.0) * ((d < 1.0) ? d : 1.0));
        a = 1.0 / sqrt(v[0]*v[0] + v[1]*v[1] + v[2]*v[2]);
        v[0] *= a;
        v[1] *= a;
        v[2] *= a;
}

void display() {
 glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

 glm::mat4 proj = glm::perspective(90.F, 1.F, 0.1F, 100.F);

 glm::mat4 view = glm::translate(glm::mat4(1.0), glm::vec3(0.0, 0.0, 0.0)); //apply mouse translation
 //view = glm::rotate(view, 0.2*mousediff.x, glm::vec3(0.0, 1.0, 0.0)); //apply mouse rotation
 //view = glm::rotate(view, 0.2*mousediff.y, glm::vec3(1.0, 0.0, 0.0));

//model = glm::translate(glm::mat4(1.0), glm::vec3(0.0, 0.0, -5.0));

 //glUniformMatrix4fv(mvpUniform, 1, false, glm::value_ptr(proj));
 glUniformMatrix4fv(mvpUniform, 1, false, glm::value_ptr(proj*view*model));
 //glUniformMatrix4fv(mvpUniform, 1, false, glm::value_ptr(model*view*proj));

 glDrawArrays(GL_TRIANGLES, 0, NumVertices);
 glutSwapBuffers();
}

void keyboard(unsigned char key, int x, int y) {
        switch(key) {
                case 033: // Escape Key
                case 'q': case 'Q':
                        exit(EXIT_SUCCESS);
                        break;
        }
}

void mouseButton(int button, int state, int x, int y) {
        if(button==GLUT_RIGHT_BUTTON) exit(0);
        /* holding down left button allows user to rotate cube */
        if(button==GLUT_LEFT_BUTTON)
                switch(state) {
                        case GLUT_DOWN:
                                        trackingMouse = true;
                                        startX = x;
                                        startY = y;
                                        curx = x;
                                        cury = y;
                                        trackball_ptov(x, y, 512, 512, lastPos);
                                        break;
                        case GLUT_UP:
                                        trackingMouse = false;
                                        angle = 0.0;
                                        break;
                }
}

void mouseMotion(int x, int y) {
        float curPos[3], dx, dy, dz;
        /* compute position on hemisphere */

        if(trackingMouse) {
                /* compute the change in position on the hemisphere */
                trackball_ptov(x, y, 512, 512, curPos);

                dx = curPos[0] - lastPos[0];                
                dy = curPos[1] - lastPos[1];
                dz = curPos[2] - lastPos[2];
                if (dx || dy || dz) {
                        /* compute theta and cross product */
                        angle = 90.0 * sqrt(dx*dx + dy*dy + dz*dz);
                        axis[0] = lastPos[1]*curPos[2] - lastPos[2]*curPos[1];
                        axis[1] = lastPos[2]*curPos[0] - lastPos[0]*curPos[2];
                        axis[2] = lastPos[0]*curPos[1] - lastPos[1]*curPos[0];
                        /* update position */
                        lastPos[0] = curPos[0];
                        lastPos[1] = curPos[1];
                        lastPos[2] = curPos[2];
                }
                float w = angle;
                float x = axis[0];
                float y = axis[1];
                float z = axis[2];
                glm::mat4 xform = glm::mat4((1.F - (2.F * ( y*y + z*z ))),(2.F * ( x*y - z*w )),( x*z + y*w ),0.F,
                (2.F * ( x*y + z*w )),(1.F - (2.F * ( x*x + z*z ))),(2.F * ( y*z - x*w )),0.F,
                (2.F * ( x*z - y*w )),(2.F * ( y*z + x*w )),(1.F - (2.F * ( x*x + y*y ))),0.F,
                0.F,0.F,0.F,1.F);

                model = xform*model;
        }
        glutPostRedisplay();
}

int main(int argc, char **argv) {
        glutInit(&argc, argv);
        glutInitDisplayMode(GLUT_RGBA | GLUT_DOUBLE | GLUT_DEPTH);
        glutInitWindowSize(512, 512);
        glutCreateWindow("Color Cube");
        glewInit();
        init();
        glutDisplayFunc(display);
        glutKeyboardFunc(keyboard);
        glutIdleFunc(display);
        glutMouseFunc(mouseButton);
        glutMotionFunc(mouseMotion);
        glutMainLoop();
        return 0;
} 
```

这是请求的 fshader36 文件。

```
 #version 150
in vec4 color;
out vec4 fColor;
void main()
{
fColor = color;
} 
```

这是 VSHADER

```
#version 330
uniform mat4 mvp;
layout(location=0) in vec4 vPosition;
layout(location=1) in vec4 vColor;
out vec4 color;

void main() {
    color = vColor;
    gl_Position = mvp * vPosition;
} 
```

# grails - Grails 在自定义视图中关联来自两个不同域的值

> ID：12963184
> 
> 赞同：0
> 
> 时间：2012-10-18T20:28:34.570
> 
> 标签：grails

虽然我对 Java 有经验，但我是 Grails 新手，但我正在尝试进入它。我设置了一个包含以下域的基本“学校”应用程序：

*   学生
*   班级
*   出勤率

“学生”和“班级”域都是脚手架。现在，我想创建“出勤”域，并且需要一个带有自定义视图的控制器。我可以做到这一点，我只是想了解（在高层次上）设置视图的最佳方式（我们称之为“attendance.gsp”）。

该视图将包含一个用于选择类的下拉框。一旦选择了一个类，我想填充一个表。第一列将包含班级中的学生列表，第二列将包含“参加？” 复选框。

我认为我至少可以做到这一点。

我想知道如何将复选框值与学生相关联。由于这个类没有脚手架，所以数据库中没有创建出勤列。我需要在出勤域中定义任何内容吗？你会怎么做呢？任何人都可以在网上推荐一个做类似事情的特定例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:53:47.060

像这样的东西：

```
class Class {
    ...
    static hasMany = [sessionsAttendance: Attendance]
}

class Student {
    ....
}

class Attendance {
    static hasMany = [studentsAttended: Student]
} 
```

# c# - WPF 中的数据上下文

> ID：12963185
> 
> 赞同：0
> 
> 时间：2012-10-18T20:28:48.990
> 
> 标签：c#, wpf

我正在我的 WPF 应用程序中尝试以下操作：

XAML 元素的结构。

```
DataTemplate[Data Type 'A']
    Grid
       Broder
          TextBlock 
```

我想将文本块的文本属性绑定到从我的“用户”类派生的“字符串”，该类在 XAML 的资源字典中引用。

1.  因此，在上述结构中，因为 DataTemplate 从数据类型“A”获取提要。

2.  我想将 datacontext(Users) 分配给网格并将字符串绑定到文本块。

有没有办法可以实现这一点，因为我所有的试验包括将数据上下文分配给网格或边框或文本块都不起作用。

如果我的方法在这里错误，任何人都可以建议我或纠正我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:33:29.517

这个标记应该足够了：

```
<DataTemplate DataType="{x:Type local:A}">
    <Grid DataContext="{Binding Path=Users}">
        <Border>
            <TextBlock Text="{Binding Path=PropertyOnUsers}"/>
        </Border>
    </Grid>
</DataTemplate> 
```

确保在 Xaml 顶部声明了命名空间。无论出于何种原因，如果您不使用`{x:Type ...}`.

从那里应该是直截了当的。

如果 Users 是一个集合，您将不得不深入到集合中以获取 User 的特定实例。

顺便说一句，如果您使用的是 Visual Studio，则可以使用“输出”窗口来调试绑定问题。

# android - 谷歌播放警告添加权限'android.permission.READ_CALL_LOG'

> ID：12963187
> 
> 赞同：13
> 
> 时间：2012-10-18T20:28:59.457
> 
> 标签：android

我刚刚尝试提交我的应用程序的新版本，而权限没有任何更改。但是，google play 的上传 apk 告诉我，我添加了权限“android.permission.READ_CALL_LOG”，但我没有。这些是目前我的权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.READ_CONTACTS"/>
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

任何想法可能是什么原因？（我不想添加新权限，我的用户不太喜欢）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T21:47:57.260

我有这个：

```
<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="14" /> 
```

这导致了`aapt dump badging`：

```
uses-permission:'android.permission.READ_CALL_LOG'
uses-implied-permission:'android.permission.READ_CALL_LOG','targetSdkVersion < 16 and requested READ_CONTACTS' 
```

然后我把它改成这样：

```
<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="16" /> 
```

现在隐含的许可消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T00:56:24.280

这只是发生在我身上。我的应用程序有：

```
ACCESS_WIFI_STATE, INTERNET, and BROADCAST_STICKY 
```

但是当我将 apk 上传到 google play 时，我获得了 6 个权限：

```
android.permission.ACCESS_WIFI_STATE
android.permission.INTERNET
android.permission.BROADCAST_STICKY
android.permission.WRITE_EXTERNAL_STORAGE
android.permission.READ_PHONE_STATE
android.permission.READ_EXTERNAL_STORAGE 
```

我将 min 和 target sdk 版本从 3 更改为 4，并且额外的权限消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T21:12:49.367

我的“aapt dump badging”告诉 READ_CALL_LOG 是由 READ_CONTACTS 隐含的。

使用隐含权限：'android.permission.READ_CALL_LOG','targetSdkVersion < 16 并请求 READ_CONTACTS'

不过，这似乎在某个时候已经改变了。我以前版本（最近 2 周前）的同一个应用程序并不意味着该权限，尽管我几个月没有更改任何权限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-23T12:12:50.963

将 targetSdkVersion 更改为 16 将导致设备 > 4.0 上的菜单键消失。因为我在应用程序中添加了 sherlock 项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-26T09:36:23.177

该文档已经提到了这个 [http://developer.android.com/reference/android/Manifest.permission.html](http://developer.android.com/reference/android/Manifest.permission.html)

# python - 如果模式与其他字典键匹配，则 Python 字典键删除

> ID：12963188
> 
> 赞同：2
> 
> 时间：2012-10-18T20:29:04.037
> 
> 标签：python, design-patterns, dictionary, key

Python dict 键删除，如果键模式与其他 dict 键匹配。

例如

```
a={'a.b.c.test':1,  'b.x.d.pqr':2,  'c.e.f.dummy':3,  'd.x.y.temp':4}

b={'a.b.c':1,  'b.p.q':20} 
```

结果

```
a={'b.x.d.pqr':2,'c.e.f.dummy':3,'d.x.y.temp':4}` 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:49:55.863

如果“pattern match with other dict key”的意思是“从另一个 dict 中的任何键开始”，那么最直接的写法是这样的：

```
a = {k:v for (k, v) in a.items() if any(k.startswith(k2) for k2 in b)} 
```

如果乍一看很难理解，它基本上相当于：

```
def matches(key1, d2):
    for key2 in d2:
        if key1.startswith(key2):
            return True
    return False

c = {}
for key in a:
  if not matches(key, b):
    c[key] = a[key]
a = c 
```

这将比必要的慢。如果`a`有 N 个键，并且`b`有 M 个键，则花费的时间是 O(NM)。虽然您可以在恒定时间内检查“key 是否`k`存在于 dict 中”，但如果不迭代整个 dict ，则无法检查“是否存在任何以 dict`b`开头的键”。因此，如果可能很大，您可能想要搜索并编写二进制搜索，这将使时间减少到 O(N log M)。但是，如果这不是瓶颈，您最好还是坚持使用简单版本，因为它很简单。`k``b``b``sorted(b.keys())`

请注意，我正在生成一个`a`过滤掉匹配项的新文件，而不是删除匹配项。出于多种原因，这几乎总是比就地删除更好的解决方案： * 它更容易推理。将对象视为不可变对象并对它们执行纯操作意味着您无需考虑状态如何随时间变化。例如，在原地删除的天真方法会遇到在迭代字典时更改字典的问题，这将引发异常。如果没有可变操作，这样的问题永远不会出现。* 它更容易阅读，并且（一旦你掌握了它）甚至写作。* 它几乎总是更快。

一个权衡是内存使用。就地删除实现必须复制所有键；built-a-new-dict 实现必须在内存中同时包含过滤后的 dict 和原始 dict。如果您保留 99% 的值，并且值比键大得多，这可能会伤害您。（另一方面，如果您保留 10% 的值，并且这些值与键的大小大致相同，您实际上会*节省*空间。）这就是为什么它“几乎总是”是一个更好的解决方案，而不是“总是”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:41:20.923

```
for key in list(a.keys()):
    if any(key.startswith(k) for k in b):
       del a[key] 
```

替换`key.startswith(k)`为“匹配”的适当条件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:39:44.910

```
c={} #result in dict c
for key in b.keys():
    if all([z.count(key)==0 for z in a.keys()]): #string of the key in b should not be substring for any of the keys in a
       c[key]=b[key] 
```

# c++ - 数独回溯算法

> ID：12963194
> 
> 赞同：0
> 
> 时间：2012-10-18T20:29:19.550
> 
> 标签：c++

> **可能重复：**
> [数独回溯算法](https://stackoverflow.com/questions/7695926/sudoku-backtracking-algorithm)

我不知道为什么我现在不能直接思考，但到目前为止，但我希望在为我的数独难题开发算法时能得到一些帮助。在检查所有行、列和 3x3 之后，我有一个可以进入每个单元格的可能数字列表。我有将数字放入每个单元格的代码。但是，我在回溯方面遇到了很多麻烦。任何人都可以帮助我为数独难题的回溯部分提供一些伪代码吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:06:44.553

您可以尝试基于堆栈的方法。通过递归使用调用堆栈，其中回溯返回堆栈错误：

```
def solveBoard(partialBoard):
    nextUnsolvedBlock = getNextBlock(partialBoard)
    possibles = generatePossiblePositions(partialBoard)
    for possibility in possibles:
        result = solveBoard(partialBoard)
        if result.valid:
            return result; 
```

这种方法很大程度上受到堆栈大小的限制；它不是尾递归的，所以栈必须增长，它的最大尺寸是从空板到完整板的步数。

另一种方法是构建您自己的堆栈，这将允许更多这样的步骤，因为它将存储在堆上：

```
def solveBoard(partialBoard):
    stack = [(partialBoard,0,0)] // (board, nextBlock, blockOptionIndex)
    while stack.last[0].valid == false:
        nextBlockOption = getNextBlockOption(stack.last)
        if nextBlockOption == None:
            pop(stack)
            nextBlock = getNextBlock(stack.last)
            if nextBlock = None:
                exit("No solution")
            else:
                stack.last[2] = nextBlock
        else:
            stack.last[1] = nextBlockOption
    return stack.last[0] 
```

对于奖励积分，使用生成器 say 重做堆栈方法`generateBoards`，它从给定的棋盘开始，并以一致的模式不断生成新棋盘。这样你的算法就是：

```
def solveBoard(initialBoard):
    for board in generateBoards(initialBoard):
        if isValid(board):
            return board
    return "No solution found" 
```

复杂性实际上在 generateBoards 中：

```
def generateBoards(partialBoard):
    nextUnsolvedBlock = getNextBlock(partialBoard)
    for possibility in generatePossiblePositions(partialBoard):
        yield possibility 
```

如果你`generatePossiblePositions`也写一个生成器，那么这两个可以一起工作直到事情完成。因为这使用了生成器而不是递归，所以堆栈不会增长，并且新板是根据需要而不是提前生成的，因此存储要求也很低。相当优雅，真的，具有发电机的力量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:34:20.847

像这样的东西？

```
solve_suduko(Puzzle& p)
{
  for (m : all possible moves)
  { 
     p.make_move(m);
     if (p.solved())
     {
       print_solution(p);
     }
     else if (p.partial_solution())
     {
       solve_suduko(p);
     }
     p.unmake_move(m);
  }
} 
```

`partial_solution`如果您的移动生成代码总是生成导致部分解决方案的移动，我想您可能不需要。我认为 suduko 就是这种情况。

# perl - 在 Dancer 中使用 Hooks 修改异常处理

> ID：12963195
> 
> 赞同：3
> 
> 时间：2012-10-18T20:29:20.017
> 
> 标签：perl, exception-handling, dancer

我正在尝试设置一个挂钩来捕获从我的 Dancer 应用程序（API）抛出的所有异常和错误，并将它们传递给设置 HTTP 状态代码并返回哈希（序列化为 JSON）的函数。

当我使用 try/catch 时一切正常，但是当我将它移动到钩子时，它会运行代码，但响应是使用默认错误机制而不是我的函数形成的。

这是我正在使用的钩子：

```
# Handle errors
hook on_handler_exception => sub {
    my $e = shift;
    debug "ON HANDLER EXCEPTION";
    return API::Exception->handle($e); # sets status code and returns hash depending on the exception
}; 
```

我还尝试使用`halt`而不是 return 来停止对异常的任何进一步处理，但它没有改变任何东西。

我将如何使用 Dancer 完成此任务？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-11T00:52:57.730

改用“on_route_exception”钩子......

```
hook on_route_exception => sub
{
    my ( $exception ) = @_;
    error( $exception );
    status( 'error' );
    halt( { errors => [ { message => 'An unhandled exception occurred', code => 0 } ] } );
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:31:21.783

看看[Dancer::Error](http://cpansearch.perl.org/src/XSAWYERX/Dancer-1.3110/lib/Dancer/Error.pm)的代码。

我想像

```
my $content = Dancer::Engine->engine("template")->apply_renderer($template_name, $ops);
    return Dancer::Response->new(
        status => $self->code,
        headers => ['Content-Type' => 'text/html'],
        content => $content); 
```

从 `_render_html`方法可以帮助你。

# wpf - WPF MVVM 绑定到 UserControl 的 DependencyProperty 不起作用

> ID：12963200
> 
> 赞同：5
> 
> 时间：2012-10-18T20:29:35.323
> 
> 标签：wpf, xaml, mvvm, dependency-properties

我试图坚持使用 MVVM 方法来构建我的 WPF 应用程序，并且遇到了一个奇怪的绑定问题，并且觉得我错过了一些东西。

我有一个用户控件 (PluginsTreeView)，它有一个 ViewModel (PluginsViewModel) 驱动它。PluginsTreeView 公开了一个字符串类型的公共 DependencyProperty (DocumentPath)。我的 MainWindow 在 XAML 中设置了这个属性，但它似乎没有出现在我的 UserControl 中。我正在寻找一些关于为什么这不起作用的迹象。

插件TreeView.xaml.cs

```
public partial class PluginsTreeView: UserControl
{
    public PluginsTreeView()
    {
        InitializeComponent();
        ViewModel = new ViewModels.PluginsViewModel();
        this.DataContext = ViewModel;
    }

    public static readonly DependencyProperty DocumentPathProperty =
        DependencyProperty.Register("DocumentPath", typeof(string), typeof(PluginsTreeView), new FrameworkPropertyMetadata(""));

    public string DocumentPath
    {
        get { return (string)GetValue(DocumentPathProperty); }
        set 
        {
            //*** This doesn't hit when value set from xaml, works fine when set from code behind
            MessageBox.Show("DocumentPath"); 
            SetValue(DocumentPathProperty, value); 
            ViewModel.SetDocumentPath(value);
        }
    }
    ....
 } 
```

主窗口.xaml

我的 PluginsTreeView 永远不会得到值“测试路径”，我不知道为什么。我觉得我在这里缺少一些基本的东西。

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:Views="clr-namespace:Mediafour.Machine.EditorWPF.Views" x:Class="Mediafour.Machine.EditorWPF.MainWindow"
    xmlns:uc="clr-namespace:Mediafour.Machine.EditorWPF.Views"
    Title="MainWindow" Height="350" Width="600">
  <Grid>
    <uc:PluginsTreeView x:Name="atv" DocumentPath="from xaml" />
  </Grid>
</Window> 
```

但是，当我从 MainWindow 的代码隐藏设置 DependencyProperty 时，它似乎确实正确设置了值。我试图找出这里的区别以及为什么代码隐藏方法有效而在 xaml 中设置属性却无效。

主窗口.xaml.cs

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

        MainWindowViewModel ViewModel = new MainWindowViewModel();
        this.DataContext = ViewModel;

        atv.DocumentPath = "from code behind";  //THIS WORKS!
     }
     ....
 } 
```

与 Snoop 混在一起，我看到 XAML“来自 xaml”的值确实进入了属性，但我在 PluginsTreeView 中的 Set 方法仍然没有被命中。除非从 MainWindow 代码隐藏中设置值，否则我作为调试工具在其中的消息框不会弹出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:25:15.017

显然，您不应该向这些属性设置器添加任何逻辑，因为它们仅在您从代码设置属性时才会被调用。如果从 XAML 设置属性，则直接调用 SetValue() 方法。我最终注册了一个回调方法，现在一切正常：

```
public static readonly DependencyProperty DocumentPathProperty = DependencyProperty.Register("DocumentPath", typeof(string), typeof(PluginsTreeView), new FrameworkPropertyMetadata("initial value", OnValueChanged)); 
```

# c# - 为什么这个 List.Except 在某些情况下如此缓慢（以及如何加快速度）？

> ID：12963203
> 
> 赞同：1
> 
> 时间：2012-10-18T20:29:51.530
> 
> 标签：c#, performance, optimization

我有以下两个列表，它们是成对的字符串。一个是我所期望的，另一个是我发现的。我想找出缺少的东西。该代码有效，但有些情况比其他情况慢得多。

*   当 n = 1 时，调用需要 21 秒`.Except()`。
*   当 n = 10 时，调用需要 2 秒`.Except()`。

在这两种情况下，它是相同数量的元素。这只是一些哈希表冲突吗？我能做些什么来使所有案件都同样快速？

```
List<KeyValuePair<string, string>> FoundItems = new List<KeyValuePair<string, string>>();
List<KeyValuePair<string, string>> ExpectedItems = new List<KeyValuePair<string, string>>();

int n = 1;
for (int k1 = 0; k1 < n; k1 ++)
{
    for (int k2 = 0; k2 < 3500/n; k2++)
    {
        ExpectedItems.Add(new KeyValuePair<string, string>( k1.ToString(), k2.ToString()));
        if (k2 != 0)
        {
            FoundItems.Add(new KeyValuePair<string, string>(k1.ToString(), k2.ToString()));
        }
    }
}

Stopwatch sw = new Stopwatch();
sw.Start();

//!!!! This is the slow line.
List<KeyValuePair<string, string>> MissingItems = ExpectedItems.Except(FoundItems).ToList();
//!!!! 

string MatchingTime = "Matching Time: " + sw.ElapsedMilliseconds.ToString() + " (" + sw.ElapsedMilliseconds / 1000 + " sec)";
MessageBox.Show(MatchingTime + ", " + ExpectedItems.Count() + " items"); 
```

我的数据确实是字符串，我在这个测试用例中只使用整数，因为它很简单。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:34:23.120

是的，我认为问题在于`KeyValuePair`有效地仅在第一个字段上进行散列（有些奇怪 - 它并不*那么*简单）。

例如：

```
using System;
using System.Collections.Generic;

class Test
{
    static void Main()
    {
        ShowPairHash("a", "b");
        ShowPairHash("a", "c");
        ShowPairHash("Z", "0");
        ShowPairHash("Z", "1");
    }

    static void ShowPairHash(string x, string y)
    {
        var pair = new KeyValuePair<string, string>(x, y);
        Console.WriteLine(pair.GetHashCode());
    }
} 
```

输出：

```
733397256
733397256
733397325
733397325 
```

因此，当您`n = 1`的*所有项目*都具有相同的哈希码时...因此，需要检查所有内容是否完全相等，以确保`HashSet<T>`内部构建的每个附加项`Except`。

如果您将`KeyValuePair`呼叫更改为

```
new KeyValuePair<string, string>(k2.ToString(), k1.ToString()) 
```

...然后 n = 1 的情况非常快。

不过更好的是：使用具有更好哈希码计算的类型。例如，匿名类型，或`Tuple<string, string>`，或您自己的自定义结构版本`Tuple<string, string>`（但正在实现`IEquatable<T>`）。

# .htaccess - url 重写：如何用相同数量的参数重写 2 个 url？

> ID：12963206
> 
> 赞同：1
> 
> 时间：2012-10-18T20:29:57.763
> 
> 标签：.htaccess, url, url-rewriting

我创建了一些 url 重写规则。

它工作正常。

但我有 2 页的网址是这样的：

actualites.php?id=xxx& 别名=xxx

--> 结果：id-alias.php（例如：1-article_name.php）

equipe.php?id=xxx& 别名=xxx

--> 结果：id-alias.php（（例如：1-article_name.php）

这 2 个页面不同，设计不同，等等。

我想重写这两个不同的页面。我的问题是如何为这两个 url 设置两个不同的规则。

因为它们有 2 个参数，所以我只应用了一个规则（第一个）

```
#become : 1-alias.php
RewriteRule  ^([0-9]*)-(.*)\.php$ actualites.php?cat=$1&alias=$2 [L]

#become : 1-alias.php
RewriteRule  ^([0-9]*)-(.*)\.php$ equipe.php?id_equipe=$1&alias=$2 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:33:36.510

除非你想添加代码`actualites.php`，首先检查“cat”和“alias”的参数值是否有效，否则你不能。

如果要将其编码为`actualites.php`，请检查参数是否有效，如果无效，请将参数`equipe.php`作为“id_equipe”和“alias”发送到。否则，您需要在 URL 中添加一些内容以验证您实际映射到的请求。例如：

```
http://yourdomain.com/a/1-article.php  -->  /actualites.php?cat=1&alias=article
http://yourdomain.com/e/1-article.php  -->  /equipe.php?id_equipe=1&alias=article 
```

没有那个`/a/`or `/e/`，就没有办法告诉映射到什么。如果你不使用类似的东西，你需要在你的 php.ini 中进行所有验证。

# c# - 如何更改菜单条的设计？

> ID：12963208
> 
> 赞同：1
> 
> 时间：2012-10-18T20:30:11.340
> 
> 标签：c#, winforms, menustrip

当我在 Visual Studio 中创建一个新的菜单条时，它的设计很丑陋。 ![丑陋的设计](../Images/7c11e1d41fd7ccfa6e3d4032abf2f327.png)

我试图改变背景颜色和背景图像，但它变得比以前更丑了。

如何将其更改为“正常”设计？
![](../Images/4e817c1a51ae8e418b69971923f7df43.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:31:33.523

`Rendermode`将对象的属性`menuBar`从`ManagedRenderMode`to更改为`System`旧菜单栏样式。

# linux - 为什么 arm-linux-gnueabi-g++-4.4 总是构建“7-A”二进制文件？

> ID：12963209
> 
> 赞同：8
> 
> 时间：2012-10-18T20:30:14.003
> 
> 标签：linux, gcc, cross-platform, arm, embedded-linux

我正在运行 Ubuntu 12:04LTS 并安装了 arm-linux-gnueabi C 和 C++ 编译器。编译后的二进制文件不会在我的目标板上运行。看起来即使我指定了 cpu 和 arch，编译器仍然为错误的 CPU 构建二进制文件。而不是 atm9tdmi 它构建和 7-A。

我做错了什么还是我应该配置什么？谢谢。

```
~/ArmTest$ arm-linux-gnueabi-g++-4.4 -mcpu=arm9tdmi -march=armv4t -O main.cpp -o CPPTest

~/ArmTest$ readelf -A CPPTest 
Attribute Section: aeabi
File Attributes
  Tag_CPU_name: "7-A"
  Tag_CPU_arch: v7
  Tag_CPU_arch_profile: Application
  Tag_ARM_ISA_use: Yes
  Tag_THUMB_ISA_use: Thumb-2
  Tag_FP_arch: VFPv3-D16
  Tag_ABI_PCS_wchar_t: 4
  Tag_ABI_FP_denormal: Needed
  Tag_ABI_FP_exceptions: Needed
  Tag_ABI_FP_number_model: IEEE 754
  Tag_ABI_align_needed: 8-byte
  Tag_ABI_align_preserved: 8-byte, except leaf SP
  Tag_ABI_enum_size: int
  Tag_ABI_HardFP_use: SP and DP
  Tag_CPU_unaligned_access: v6
  Tag_DIV_use: Not allowed
~/ArmTest$ file CPPTest 
CPPTest: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.31, BuildID[sha1]=0xf8e81f7a1bb3ee1200cb3dd1aa5b192ecc6de831, not stripped

 uname -a
Linux Desktop 3.2.0-32-generic-pae #51-Ubuntu SMP Wed Sep 26 21:54:23 UTC 2012 i686 athlon i386 GNU/Linux

:~/ArmTest$ arm-linux-gnueabi-g++-4.4 -v
Using built-in specs.
Target: arm-linux-gnueabi
Configured with: ../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.4.7-1ubuntu2' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.4 --enable-shared --enable-linker-build-id --with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/arm-linux-gnueabi/include/c++/4.4.7 --libdir=/usr/lib --enable-nls --enable-clocale=gnu --enable-libstdcxx-debug --enable-objc-gc --disable-sjlj-exceptions --with-arch=armv7-a --with-float=softfp --with-fpu=vfpv3-d16 --with-mode=thumb --disable-werror --enable-checking=release --program-prefix=arm-linux-gnueabi- --includedir=/usr/arm-linux-gnueabi/include --build=i686-linux-gnu --host=i686-linux-gnu --target=arm-linux-gnueabi --with-headers=/usr/arm-linux-gnueabi/include --with-libs=/usr/arm-linux-gnueabi/lib
Thread model: posix
gcc version 4.4.7 (Ubuntu/Linaro 4.4.7-1ubuntu2) 

:~/ArmTest$ cat main.cpp
#include<iostream>

using namespace std;

int main(){
   cout<<"Hello World"<<endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T22:18:40.903

您的编译器支持 armv4t，问题是您的链接器必须将您的目标文件与 libc、crt.o 等其他文件链接以创建可执行文件。但是，在您的工具链中，所有这些文件都已针对 7-A 编译，因此结果可执行文件最终也是一个。这是 ubuntu 跨工具链的问题，默认情况下它们是 armv7a。

如果您**只是编译**源文件，您会看到编译器输出正确的目标文件类型。

> > $ arm-linux-gnueabi-g++-4.4 -mcpu=arm9tdmi -march=armv4t -O **-c** main.cpp -o CPPTest

```
$ readelf -A CPPTest
Attribute Section: aeabi
File Attributes
  Tag_CPU_name: "ARM9TDMI"
  Tag_CPU_arch: v4T
  Tag_ARM_ISA_use: Yes
  Tag_THUMB_ISA_use: Thumb-1
  Tag_FP_arch: VFPv3-D16
  Tag_ABI_PCS_wchar_t: 4
  Tag_ABI_FP_denormal: Needed
  Tag_ABI_FP_exceptions: Needed
  Tag_ABI_FP_number_model: IEEE 754
  Tag_ABI_align_needed: 8-byte
  Tag_ABI_align_preserved: 8-byte, except leaf SP
  Tag_ABI_enum_size: int
  Tag_ABI_HardFP_use: SP and DP
  Tag_ABI_optimization_goals: Prefer Speed
  Tag_DIV_use: Not allowed 
```

因此，工具链不仅仅是一个编译器，它的每个组件都需要配合使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:16:42.270

您的“配置为”行`arm-linux-gnueabi-g++-4.4`明确指出编译器不是为 arm9 而是为 ARMv7 构建的，即 ARM Cortex Ax（尽管它缺少混合 ARM/Thumb aka Thumb2 代码的*互通选项）：*

```
Configured with: ... --with-arch=armv7-a --with-float=softfp --with-fpu=vfpv3-d16 --with-mode=thumb ... 
```

您可能想要一个不同的编译器构建为未指定的 ARM。
考虑使用[BuildRoot](http://buildroot.uclibc.org/)为您的项目构建完整的工具链。[或者从gnuarm.com](http://www.gnuarm.com/)
下载 gcc-4.0 或 4.1 工具链

# php - DateTime 类做错误的时间戳转换？

> ID：12963213
> 
> 赞同：0
> 
> 时间：2012-10-18T20:30:41.043
> 
> 标签：php, datetime, timestamp, converter

以下代码产生了时间戳 ( `1350553368`) 的错误转换：

```
$dateTime = new DateTime();
$dateTime->setTimeStamp(1350553368);    
echo $dateTime->format('F n, Y'); 
```

PHP 将其转换为**2012 年 10 月 10 日**： [http ://codepad.viper-7.com/clum0f](http://codepad.viper-7.com/clum0f)

但是，该时间戳实际上是**2012 年 10 月 18 日**：[http ://www.onlineconversion.com/unix_time.htm](http://www.onlineconversion.com/unix_time.htm)

我确定是我，而不是 PHP，所以我做错了什么？代码很简单，所以我无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:34:33.187

您正在使用格式`'F n, Y'`。`n`是月份的数字表示形式（10 月是第 10 个月）。使用`d`（前导零）或`j`（无前导零）。请参阅[PHP`date()`参考](http://www.php.net/manual/en/function.date.php)。

```
echo $dateTime->format('F d, Y'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:35:16.463

[形成 PHP 文档](http://php.net/manual/en/function.date.php)

*   `n`= 月份的数字表示，没有前导零
*   `d`= 日期，2 位数字，前导零

你应该更换

```
 $dateTime->format('F n, Y'); 
```

和

```
 $dateTime->format('F d, Y'); 
```

# ruby - 如何为一种方法编写 rspec 测试

> ID：12963214
> 
> 赞同：1
> 
> 时间：2012-10-18T20:30:41.780
> 
> 标签：ruby, rspec

我有这个方法作为一个更大的类的一部分。我正在尝试为它编写一个测试，但我是 rspec 的新手，我有点难过......如果我注释掉 9.times 循环中的所有内容，我可以测试“drawgrid”。但如果我取消注释该代码，当前测试将失败。我需要测试 play 方法...运行游戏。它放置'drawgrid'......运行游戏序列9次，每回合后放置'drawgrid'。但我不知道该怎么做。非常感谢任何指针。

以下是播放方法及其当前规格

```
 def play
        #draw the board
        puts drawgrid

        #make a move
        turn = 0

        9.times do

          if turn.even?

            @player = @player_h.move_human("X", @board)

            @move = @player.to_sym
            @marker = @player_h.boardpiece

            does_move_exist(@move,@marker)
            is_a_human_win(@board)

          else

            @player = @player_c.move_computer("O", @board)

            @move = @player
            @marker = @player_c.boardpiece

            does_move_exist(@move,@marker)
            is_a_computer_win(@board)

          end

          puts drawgrid

          turn += 1
        end # 9.times ends
      end 
```

当前规格....

```
 describe 'play method' do
        it 'draws the game grid' do
          @player_human = Player.new('X')
          @player_computer = Player.new('O')
          @board = Board.new
          @game = Game.new(@player_human, @player_computer, @board)

          @game.should_receive(:puts).with("\na  | |  \n----------\nb  | |  \n----------\nc  | |  \n----------\n  1 2 3\n")

          @game.play
        end
      end
      describe '9.times' do
        it 'runs game sequence 9 times...once per board spot' do
          @player_human2 = Player.new('X')
          @player_computer2 = Player.new('O')
          @board2 = Board.new
          @game2 = Game.new(@player_human2, @player_computer2, @board2)

          turn = 0       
          9.times do
            if turn.even?
              @player_human2.should_receive(:puts).with("human move...")
              @player_human2.stub(:gets).and_return("b2")
            else
              @player_human2.should_receive(:puts).with("computer move...")
              @player_human2.stub(:gets).and_return("a1")
            end
            turn += 1
          end
        @game2.play
        end
      end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T19:12:21.233

我赞同戴夫所说的话。尝试简化。基本上，如果您可以简化您的播放方法，它将简化您的测试。现在游戏关注的是每一回合的实施细节。把这些细节往下推，你的测试会变得更容易编写和更细化。我不是最好的，我对此也不是很满意，但希望下面的代码能把你推向正确的方向：

```
#play.rb

class Board
end

class Player
  def initialize(symbol)
    @symbol = symbol
  end

  def take_turn
  end
end

class Game
  def initialize(player1, player2, board)
    @player1, @player2, @board = player1, player2, board
  end 

  def play
    drawgrid

    (0...9).each do |turn|
      turn.even? ? @player1.take_turn : @player2.take_turn
      drawgrid
    end
  end

  def drawgrid
  end
end 
```

和测试文件：

```
#play_spec.rb
require './play.rb'

describe '#play' do
  before do
    @player1 = Player.new('X')
    @player2 = Player.new('O')
    @game = Game.new(@player1, @player2, Board.new)
  end

  it 'draws the game grid' do
    @game.should_receive(:drawgrid).at_least(:once)
    @game.play
  end

  it 'runs game sequence 9 times...once per board spot' do
    @player1.stub(take_turn: true)
    @player2.stub(take_turn: true)
    @player1.should_receive(:take_turn).exactly(5).times
    @player2.should_receive(:take_turn).exactly(4).times
    @game.play
  end
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T21:07:43.433

总的来说，我觉得您的代码和测试都试图在一种方法中做太多事情。关于您的播放方法的有趣之处与其说是循环中发生的 9 次。我对重构的第一个建议是将循环内的内容转换为名为“take_turn”或类似的方法。

然后，您可以为单回合发生的情况编写规范。而且，您对 play 方法的规范将测试 take_turn 方法是否被调用了 9 次。

这并不是说你不能保持你的代码保持原样并为它编写一个有效的测试......你只是不能对你正在测试的东西进行超级外科手术。

希望有帮助。

# iframe - 我可以将 Google Drive (gdrive) 包装在 iframe 中吗？

> ID：12963228
> 
> 赞同：1
> 
> 时间：2012-10-18T20:31:25.753
> 
> 标签：iframe

我想在我自己的 Web UI 中呈现代表 Google Drive 文件夹的 Google Drive Web UI - 即在 iframe 中。但是 gdrive 拒绝显示。有什么办法可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T04:22:44.363

我知道您想要做什么：使用 Gdrive 的文件结构，本质上允许访问者深入查看共享文件并下载它们——但是将此视图嵌入到另一个网页上。

我试图使用任何解决方案来做同样的事情。DropBox 不允许它（它们在 iframe 中查看时会阻止访问）。Box.com 是这样做的唯一解决方案，但嵌入的内容是 FLASH :-/ 它的外观如下：http: [//go.cr8.cc/UEZ5Sb](http://go.cr8.cc/UEZ5Sb)

# e-commerce - 需要将 UPS Freight Shipping 集成到 Woocommerce UPS 插件

> ID：12963232
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:31:38.540
> 
> 标签：e-commerce, shipping, ups, woocommerce

连接到 UPS Freight 测试服务器的正确 URL 是什么？Developers Kit pdf 中提供的 url 不起作用。有谁知道哪些网址用于测试目的？

**这是插件的示例代码：**

```
/**
     * Shipping method class
     * */
    class WC_Shipping_UPS extends WC_Shipping_Method {

        var $test_url = "https://wwwcie.ups.com/webservices/FreightRate";
        /* var $url = "https://onlinetools.ups.com/webservices/FreightShip"; */
        var $codes = array(
            "01" => "UPS Next Day Air",
            "02" => "UPS Second Day Air", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T16:41:10.950

```
protected static $endpointUrls = array(
    'sandbox' => 'https://wwwcie.ups.com/webservices/FreightRate',
    'production' => 'https://onlinetools.ups.com/webservices/FreightRate'
); 
```

这些是正确的 url，从 UPS 的 Freight Shipping API 的 wsdl 文件中复制而来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T02:47:42.980

不幸的是，您正在尝试将 XML 服务用于 FreightRate，这是您无法做到的。[您只能使用他们的网络服务（根据此论坛帖子（ https://developerkitcommunity.ups.com/index.php/Special:AWCforum/st/id192/](https://developerkitcommunity.ups.com/index.php/Special:AWCforum/st/id192/) ），您只能通过网络服务提供 FreightRate ，因此您将必须走 SOAP 路线并编写自己的插件。

祝你好运。

# ruby-on-rails-3 - Rails Doorkeeper - 重定向到主页而不是授权页面

> ID：12963233
> 
> 赞同：2
> 
> 时间：2012-10-18T20:31:42.700
> 
> 标签：ruby-on-rails-3, oauth

当我尝试将 door_keeper gem 与 rails 应用程序一起使用时，我遇到了一个奇怪的问题。当我使用 Oauth2 gem 获取令牌时会出现问题。但在我有 url 的部分：

`http://0.0.0.0:3000/oauth/authorize?response_type=code&client_id=199f27a02764f1ef1d31c2860b83ef93c0cc3dc26886d2b3d76b8ef1e935f3ae&redirect_uri=http%3A%2F%2F0.0.0.0%3A3000%2Fcallback`

它不会重定向到我们授权并获取令牌的页面，而是直接重定向到`http://0.0.0.0:3000`

我这里有什么问题，它应该首先重定向到应用程序授权页面，不是吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T22:41:58.340

授权页面需要一些用户登录。您在`resource_owner_authenticator`块中设置它，它应该看起来像这样：

```
resource_owner_authenticator do |routes|
  # Put your resource owner authentication logic here.
  # If you want to use named routes from your app you need
  # to call them on routes object eg.
  # routes.new_user_session_path
  User.find(session[:user_id]) || routes.new_user_session_path
end 
```

在这种情况下，如果用户在尝试访问时不在会话中`/oauth/authorize`，则会被重定向回`new_user_session_path`.

只有从会话中找到用户时，您才能看到授权页面。

# css - 在 Codepen.io 中运行 LESS

> ID：12963235
> 
> 赞同：1
> 
> 时间：2012-10-18T20:31:45.523
> 
> 标签：css, less

我正在尝试在 Codepan.io 中运行 LESS。
这是我的代码的链接： http: [//codepen.io/anon/pen/zhLjI](http://codepen.io/anon/pen/zhLjI)
我刚刚写了这行代码

```
.user {
  .rotate(90deg);
} 
```

但我从服务器收到以下错误

```
757: unexpected token at 'Internal Server Error' 
```

知道为什么我的代码不起作用吗？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:33:38.313

你必须定义`.rotate`mixin。

```
.rotate(@deg){
  -webkit-transform: rotate(@deg);

}
.user {
  .rotate(90deg);
} 
```

[演示](http://codepen.io/bookcasey/pen/aDFdy)

# javascript - 如何测试输入的宽度是否是手动设置的？

> ID：12963236
> 
> 赞同：2
> 
> 时间：2012-10-18T20:31:44.450
> 
> 标签：javascript, html, dynamic, prototypejs, width

**HTML**

```
<select id="food">
    <option>Pick Favorite Food</option>
    <option>Banana</option>
    <option>Orange</option>
</select>

<select id="place" style="width: 100px;">
    <option>Pick Favorite Place</option>
    <option>Disneyland</option>
    <option>Hawaii</option>
</select> 
```

**JavaScript**

```
$('food').getStyle('width'); //56px
$('place').getStyle('width'); //100px 
```

如果没有指定宽度，浏览器会动态调整输入大小以适应所有文本。显然这必须发生，这样你才能看到你的元素。

**有没有办法测试元素是否手动设置样式？内联，通过样式表，甚至通过 JavaScript？**

```
$('food').getWidth(); //false
$('place').getWidth(); //100px 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:26:44.467

Ryan 的想法是正确的，但是由于您使用的是 Prototype，因此您可以使用`readAttribute('style')`并相信返回值来自样式属性，而**不是**来自样式表。

这是一个小提琴：http: [//jsfiddle.net/Q4bRP/](http://jsfiddle.net/Q4bRP/)

这是小提琴的代码：

```
#my-div {
    border: 1px solid green;
    margin-bottom: 10px;
}​ 
```

-

```
<div id="my-div">#my-div, click me</div>
<button id="my-button">add inline style to #my-div</button> 
```

-

```
$('my-div').on('click', 'div', function(event, el) {
    var styleAttrVal = el.readAttribute('style');
    if (styleAttrVal) {
        alert(styleAttrVal);
    } else {
        alert('no inline style set!');
    }
});

$('my-button').on('click', function(event) {
    $('my-div').setStyle({backgroundColor: 'yellow'});
});​ 
```

您可以使用正则表达式`styleAttrVal`来测试您正在寻找的任何内联值。

编辑：关于上面关于使用正则表达式提取你需要的东西的最后一条评论：你可能有一些运气可以通过 Prototype 的源代码找到你需要的东西。[他们必须已经为Element.getStyle](http://api.prototypejs.org/dom/Element/prototype/getStyle/)做类似的事情，你可以利用这些事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:00:26.540

您可以通过检查元素的样式属性来完成此操作。这仅在直接在元素上设置样式时才有效，就像在您的示例 html 中一样。

```
$.fn.getWidth = function(){
    var style = this.attr('style');
    return !~style.indexOf('width') ? false : style.match(/width\s*:\s*(\w+)\s*;/)[1];
} 
```

编辑：

啊哈，更好的方法。这是 jQuery 试图过于聪明的情况。在 dom 元素本身上使用 style 属性：

```
$.fn.getWidth = function(){
    var style = this.get(0).style;
    return style.width === '' ? false : style.width; 
} 
```

# c# - 如何获取有关异常的更多信息

> ID：12963238
> 
> 赞同：7
> 
> 时间：2012-10-18T20:32:00.157
> 
> 标签：c#, .net, exception, exception-handling

我在 Windows 7、64 位的 Visual Studio 2008 中创建了一个解决方案。

有用。

当我将它移到另一台机器上时，同样是 win 7、64 位，它崩溃了，几乎没有任何信息。

原来的问题是这样的：

[呼叫被被呼叫者拒绝](https://stackoverflow.com/questions/12358944/call-was-rejected-by-callee)

然后我实现了这个解决方案：

[如何正确获取 Visual Studio 2008 的 GetTypeFromProgID](https://stackoverflow.com/questions/12962467/how-to-properly-gettypefromprogid-for-visual-studio-2008)

但是，现在我的问题是，当我在另一台机器上运行可执行文件时，程序立即崩溃并显示以下信息：

```
Description:
  Stopped working

Problem signature:
  Problem Event Name:   APPCRASH
  Application Name: EmailSalesVolumeSolution.exe
  Application Version:  1.0.0.0
  Application Timestamp:    508064dd
  Fault Module Name:    KERNELBASE.dll
  Fault Module Version: 6.1.7601.17932
  Fault Module Timestamp:   503285c2
  Exception Code:   e0434f4d
  Exception Offset: 000000000000caed
  OS Version:   6.1.7601.2.1.0.256.48
  Locale ID:    1033

Read our privacy statement online:
  http://go.microsoft.com/fwlink/?linkid=104288&clcid=0x0409

If the online privacy statement is not available, please read our privacy statement offline:
  C:\Windows\system32\en-US\erofflps.txt 
```

我将代码包装在 a`try/catch`中，但仍然没有收到正确的错误消息：

```
static void Main()
{
    try
    {
        EnvDTE80.DTE2 dte;
        object obj = null;
        System.Type t = null;

        // Get the ProgID for DTE 8.0.
        t = System.Type.GetTypeFromProgID("VisualStudio.DTE.9.0",
          true);
        // Create a new instance of the IDE.
        obj = System.Activator.CreateInstance(t, true);
        // Cast the instance to DTE2 and assign to variable dte.
        dte = (EnvDTE80.DTE2)obj;

        // Register the IOleMessageFilter to handle any threading
        // errors.
        MessageFilter.Register();
        // Display the Visual Studio IDE.
        dte.MainWindow.Activate();

        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);

        Application.Run(new Form1());

        // For example, get a reference to the solution2 object
        // and do what you like with it.

        // All done, so shut down the IDE...
        dte.Quit();
        // and turn off the IOleMessageFilter.
        MessageFilter.Revoke();

    }
    catch (Exception e)
    {
        MessageBox.Show(e.ToString());
    }
} 
```

**如何确定异常发生的确切位置以及异常是什么？**

我确实有一些非托管代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using EnvDTE;
using EnvDTE80;
using EnvDTE90;
using System.Runtime.InteropServices;

namespace EmailSalesVolumeSolution
{
    public class MessageFilter : IOleMessageFilter
    {
        //
        // Class containing the IOleMessageFilter
        // thread error-handling functions.

        // Start the filter.
        public static void Register()
        {
            IOleMessageFilter newFilter = new MessageFilter();
            IOleMessageFilter oldFilter = null;
            CoRegisterMessageFilter(newFilter, out oldFilter);
        }

        // Done with the filter, close it.
        public static void Revoke()
        {
            IOleMessageFilter oldFilter = null;
            CoRegisterMessageFilter(null, out oldFilter);
        }

        //
        // IOleMessageFilter functions.
        // Handle incoming thread requests.
        int IOleMessageFilter.HandleInComingCall(int dwCallType,
          System.IntPtr hTaskCaller, int dwTickCount, System.IntPtr
          lpInterfaceInfo)
        {
            //Return the flag SERVERCALL_ISHANDLED.
            return 0;
        }

        // Thread call was rejected, so try again.
        int IOleMessageFilter.RetryRejectedCall(System.IntPtr
          hTaskCallee, int dwTickCount, int dwRejectType)
        {
            if (dwRejectType == 2)
            // flag = SERVERCALL_RETRYLATER.
            {
                // Retry the thread call immediately if return >=0 & 
                // <100.
                return 99;
            }
            // Too busy; cancel call.
            return -1;
        }

        int IOleMessageFilter.MessagePending(System.IntPtr hTaskCallee,
          int dwTickCount, int dwPendingType)
        {
            //Return the flag PENDINGMSG_WAITDEFPROCESS.
            return 2;
        }

        // Implement the IOleMessageFilter interface.
        [DllImport("Ole32.dll")]
        private static extern int
          CoRegisterMessageFilter(IOleMessageFilter newFilter, out 
          IOleMessageFilter oldFilter);
    }
    [ComImport(), Guid("00000016-0000-0000-C000-000000000046"),
    InterfaceTypeAttribute(ComInterfaceType.InterfaceIsIUnknown)]
    interface IOleMessageFilter
    {
        [PreserveSig]
        int HandleInComingCall(
            int dwCallType,
            IntPtr hTaskCaller,
            int dwTickCount,
            IntPtr lpInterfaceInfo);

        [PreserveSig]
        int RetryRejectedCall(
            IntPtr hTaskCallee,
            int dwTickCount,
            int dwRejectType);

        [PreserveSig]
        int MessagePending(
            IntPtr hTaskCallee,
            int dwTickCount,
            int dwPendingType);
    }
} 
```

在给我带来麻烦的机器上安装 VS 2008 express 后，我现在得到了这个：

![在此处输入图像描述](../Images/fe5b06e083cbc80e2196462490b9090f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:34:58.033

尝试从 Exception 打印更多内容：

```
catch(Exception e)
{
    MessageBox.Show(e.Message + ":\n" + e.StackTrace);
} 
```

您也可以使用它来捕获所有内部异常：

```
string except = "Uncaught Exception: ";
while(e != null)
{
    except += e.Message + ";\n";
    e = e.InnerException;
} 
```

* * *

如果程序毫无例外地崩溃，那么您需要尝试附加一个调试器，

您需要在计算机上安装**Visual Studio**，或者能够使用远程桌面进行远程调试。[如何：附加到正在运行的进程](http://msdn.microsoft.com/en-us/library/c6wf8e4z.aspx)

## 要附加到正在运行的进程：

1.  在“调试”菜单上，选择“附加到进程”。

2.  在“附加到进程”对话框中，从“可用进程”列表中找到要附加到的程序。

    如果要调试的程序正在另一台计算机上运行，​​请使用限定符列表框选择远程计算机。有关详细信息，请参阅如何：选择远程计算机。

    如果进程在不同的用户帐户下运行，请选中显示所有用户的进程复选框。

    如果您通过远程桌面连接进行连接，请选中在所有会话中显示进程复选框。

3.  在“附加到”框中，确保列出了要调试的代码类型。默认自动设置尝试确定您要调试的代码类型。如果自动设置不合适：

4.  单击选择。

5.  在“选择代码类型”对话框中，单击“调试这些代码类型”并选择要调试的类型。

6.  单击确定。

7.  单击附加。

## **您必须使用 DEBUG 模式编译可执行文件**

* * *

## 更新

我看到您使用`Type.GetTypeFromProgID`需要**.NET 4.5**，请确保您在引发错误的 PC 上安装了**.NET 4.5 ！**

似乎`t = System.Type.GetTypeFromProgID("VisualStudio.DTE.9.0", true);`正在抛出[COMException](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.comexception.aspx)，这意味着“ **VisualStudio.DTE.9.0** ”未在另一台 PC 中注册。

您应该添加**Microsoft Visual Studio 2008 DTE**作为程序的依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:47:02.127

您也可以尝试订阅`AppDomain.CurrentDomain.UnhandledException`事件：

```
AppDomain.CurrentDomain.UnhandledException += 
      (sender, e) => MessageBox.Show(e.ExceptionObject.ToString()); 
```

在方法的顶部执行此`Main`操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:39:48.427

您的 DLL 可能未在客户端计算机上注册。检查您正在为其调用 COM 对象的 DLL 并`Regsvr32 YouComDllName.dll`在管理命令提示符中执行操作（右键单击命令提示符图标并执行`Run as Administrator`。根据您使用的是 32 位还是 64 位应用程序，您可能需要使用Regsvr32 in`C:\Windows\System32`或 in的副本`C:\Windows\SysWOW64`（以向后的方式，64 位版本在 system32 中，32 位版本在 SysWOW64 中）

* * *

如果只是在您的机器上注册 DLL 不起作用，请在您的计算机上的程序上运行[Dependancy Walker 。](http://www.dependencywalker.com/)当您获得程序接触到的所有 DLL 时，请检查客户端计算机是否缺少任何内容。您正在调用的 DLL 可能存在，但***它所依赖***的 DLL可能不存在。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T21:51:30.930

唯一有效的解决方案是安装 Visual Studio。安装后，我得到了确切的例外。

# c++ - 模板类的友元函数需要访问成员类型

> ID：12963239
> 
> 赞同：0
> 
> 时间：2012-10-18T20:32:00.477
> 
> 标签：c++, templates, friend

我需要为模板类定义一个朋友函数。该函数的返回类型是类的成员类型。现在，我不能事先声明它，因为当时不知道返回类型。像这样的东西

```
template<class T> class A; 

//This doesn't work: error: need ‘typename’ before...  
template<class T> A<T>::member_type fcn(A<T>::member_type);

//This doesn't work: error: template declaration of ‘typename...
template<class T> typename A<T>::member_type fcn(A<T>::member_type);

template<class T>
class A{
public:
  typedef int member_type;
  friend member_type fcn<T>(member_type);
}; 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:50:45.283

我设法使用以下方法在 g++ 上编译该代码：

```
template<class T> typename A<T>::member_type fcn(typename A<T>::member_type); 
```

（因此需要第二个“类型名”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:51:22.163

您`typename`还需要在论点中说：

```
template <class T>
typename A<T>::member_type fcn(typename A<T>::member_type);
//                             ^^^^^^^^ 
```

否则你的代码没有问题，只要所有模板定义出现*在*函数模板第一次实例化之前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:52:34.490

似乎在您的特定示例中，`fcn`函数中没有任何内容实际上依赖于 class `A`。它甚至不需要访问 A 的任何方法/字段，无论是公共的还是受保护的/私有的。所以这没有意义。否则它会有一些意义，但无论如何，似乎值得重新考虑你的问题并提出一个不需要像这样的黑客攻击的更清洁的解决方案。如果经过深思熟虑，你仍然认为你需要它，你可以这样做：

```
#include <cstdio>

template<typename T> typename T::member_type fcn(const T & v) {
    return v.value_;
}

template<class T>
class A {
  public:
    typedef T member_type;

    friend member_type fcn< A<T> >(const A<T> &);

    A() : value_(1986) {}

  private:
    T value_;
};

int main()
{
    A<int> a;
    printf("The value is: %d\n", fcn(a));
} 
```

上面示例中值得注意的是，您需要解耦交叉依赖并使您的自由函数不依赖于 class 的声明`A`。如果您仍然觉得需要这种耦合，那么以下代码也可以使用：

```
#include <cstdio>

template <typename T>
class A;

template <typename T> typename A<T>::member_type fcn(const A<T> & v) {
    return v.value_;
}

template <typename T>
class A {
  public:
    typedef int member_type;

    friend member_type fcn<T>(const A<T> &);

    A() : value_(1986) {}

  private:
    member_type value_;
};

int main()
{
    A<void> a;
    printf("The value is: %d\n", fcn(a));
} 
```

希望能帮助到你。祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:59:29.870

现在这可能与其他人的答案是多余的，但这是一个*完整*的、*可测试*的解决方案。最终的函数定义是 的模板特化`fcn`，它将产生一个编译器错误，指示`A<double>::x`无法从 访问`fcn<int>`，但`A<int>::x` *可以*访问。

```
template<class T> class A; 

template <typename U>
typename A<U>::member_type fcn(typename A<U>::member_type);

template<class T>
class A {
    int x;
  public:
    typedef int member_type;
    friend typename A<T>::member_type fcn<T>(typename A<T>::member_type);
};

template<>
int fcn<int>(int x)
{
    A<int> i;
    A<double> d;
    i.x = 0;  // permitted
    d.x = 0;  // forbidden
    return 0;
} 
```

# windows - 在 Windows XP/7/8 中获取有关音频设备启用/禁用通知的方法

> ID：12963247
> 
> 赞同：1
> 
> 时间：2012-10-18T20:32:16.520
> 
> 标签：windows, winapi, audio

启用或禁用音频设备时，Windows API 中是否有通知方式？

我有 RegisterDeviceNotification() 和 WM_DEVICECHANGE 的源代码；它跟踪 USB 设备插入/移除良好。但它不会跟踪笔记本电脑的内部音频设备的启用或禁用。

当然我可以制作计时器并使用waveInGetNumDevs/waveOutGetNumDevs。但是找到强制操作系统发送通知的方法更有趣:)

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:31:59.560

`waveIn`/`waveOut`是您没有通知的旧 API。是的，当然，正如您所提到的，您可以使用计时器进行轮询。在 Vista+ 中，较新的 API 确实通过[IMMNotificationClient 接口](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371417%28v=vs.85%29.aspx)发出通知，另请参阅此相关答案：[Get automatically notify on audio device connection/disconnection?](https://stackoverflow.com/questions/12899658/get-automatically-notified-on-audio-device-connection-disconnection)

# android - Android HTC Sense - Http 请求/响应异常

> ID：12963249
> 
> 赞同：0
> 
> 时间：2012-10-18T20:32:23.043
> 
> 标签：android

在模拟器上工作，但是当我尝试使用 HTC Sense 时，此代码的最后一行出现异常

```
url = new URL(urlString);
connection = (HttpURLConnection)url.openConnection();
connection.setRequestMethod("POST");
connection.setRequestProperty("Content-Type", 
                "application/json; charset=utf-8");

//Send request
Gson requestGson = new Gson();          
OutputStream wr = connection.getOutputStream(); 
```

例外是 java.net.ProtocolException: 不支持 connection.getOutputStream() 的输出；

我正在测试 API 10，HTC Sense 上的 Gingerbread（远程调试）。

有人遇到过这个问题吗？

谢谢。大卫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T03:33:17.510

尝试调用`setDoOutput(true)`. POST 请求需要它。您的代码的第一部分将更改为如下所示：

```
connection = (HttpURLConnection)url.openConnection();
connection.setRequestMethod("POST");
connection.setRequestProperty("Content-Type", 
            "application/json; charset=utf-8");
connection.setDoOutput(true); 
```

来源：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/2aEYpsZEMvs](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/2aEYpsZEMvs)

另请参阅另一个 StackOverflow 答案：[URLConnection.setDoOutput() 到底有什么影响？](https://stackoverflow.com/questions/8587913/what-exactly-does-urlconnection-setdooutput-affect)

# python - 如何将复杂的嵌套字典排序到嵌套列表

> ID：12963250
> 
> 赞同：3
> 
> 时间：2012-10-18T20:32:37.293
> 
> 标签：python

在 Python 2.6 中按值对嵌套字典进行排序的最佳方法是什么？我想按内部字典的长度排序，然后是具有最大值的内部字典。例如：

```
d = {1: {'AA': {'a': 100, 'b': 1, 'c': 45}},
     2: {'AA': {'c': 2}},
     3: {'BB': {'d': 122, 'a': 4, 't': 22, 'r': 23, 'w': 12}},
     4: {'CC': {'y': 12, 'g': 15, 'b': 500}}} 
```

所需的解决方案是嵌套列表：

```
lst = [[3, 'BB', {'d': 122, 'a': 4, 't': 22, 'r': 23, 'w': 12}],
       [4, 'CC', {'y': 12, 'g': 15, 'b': 500}],
       [1, 'AA', {'a': 100, 'b': 1, 'c': 45}],
       [2, 'AA', {'c': 2}]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:40:54.770

使用您更正的数据结构：

```
d = {1: {'AA': {'a': 100, 'b': 1, 'c': 45}},
     2: {'AA': {'c': 2}},
     3: {'BB': {'d': 122, 'a': 4, 't': 22, 'r': 23, 'w': 12}},
     4: {'CC': {'y': 12, 'g': 15, 'b': 500}}}

def sortkey(x):
   num,d1 = x
   key,d2 = d1.items()[0] #Some may prefer `next(d.iteritems())`
   return len(d2),max(d2.values())

exactly_how_you_want_it = [([k] + v.keys() + v.values()) for k,v in 
                           sorted(d.items(),reverse=True,key=sortkey)]

for item in exactly_how_you_want_it:
   print item 
```

结果：

```
[3, 'BB', {'a': 4, 'r': 23, 'd': 122, 'w': 12, 't': 22}]
[4, 'CC', {'y': 12, 'b': 500, 'g': 15}]
[1, 'AA', {'a': 100, 'c': 45, 'b': 1}]
[2, 'AA', {'c': 2}] 
```

# c++ - 在 C++ 中存储类对象

> ID：12963251
> 
> 赞同：0
> 
> 时间：2012-10-18T20:32:40.360
> 
> 标签：c++, arrays, vector

有没有办法将类对象存储在 C++`array`或`vector`C++ 中？

我正在写一门课来做一些基本的分数数学。

```
Fraction fraction_1(a,b); 
```

有没有办法存储每个分数，以便我以后可以在程序中添加、减去、乘以所有分数？

理想情况下，我希望能够说`List[2] + List[3]`（这将使用我的重载运算符进行分数加法）？

我完全被困在试图找出一个好的方法来做到这一点，因为我对 C++ 中的向量没有太多经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:36:23.090

是的，您可以定义一个向量并将您的元素添加到其中：

```
std::vector<Fraction> fv;

fv.push_back(Fraction(a, b));
fv.push_back(Fraction(a, c));
fv.push_back(Fraction(d, c)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:36:26.647

您可以按照与任何内置类型完全相同的方式执行此操作。IE

```
std::vector<int> foo;
std::vector<MyClass> bar;
std::vector<std::string> baz;

foo.push_back(1);
bar.push_back(my_class_object);
baz.push_back("hello");

foo[0] = 2;
bar[0] = my_other_object;
baz[0] = "world"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:36:06.490

您可能必须重载运算符 +、-、乘法和除法，才能按您希望的方式工作。

您可以将任何类型的数据存储在容器中，例如向量，因为它们是模板化的。

```
vector <Fraction> array;
array.push_back(Fraction(10, 20));
array.push_back(Fraction(30, 40));

array2.push_back(array[0] + array[1]); 
```

# structure - Qooxdoo大型应用架构

> ID：12963253
> 
> 赞同：2
> 
> 时间：2012-10-18T20:32:47.550
> 
> 标签：structure, qooxdoo

我想使用 qooxdoo，但我没有看到任何大型应用程序示例，任何人都可以帮助我如何使用 qooxdoo 构建一个真正的大型应用程序（模块、路由、事件、通信）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T09:15:02.897

好的，我将尝试回答我的问题，我受到[unifyjs](http://www.unifyjs.com/)结构的启发我将在我的 Application.js 的同一级别中为数据、服务、ui、视图创建包也许需要一些 mixins也有包和一些 JS 助手作为资源，最后构建作业配置部分将用于应用程序模块。

你认为呢？还有其他建议吗？

# linux - 将 windows USB HID 代码移植到 libusb

> ID：12963254
> 
> 赞同：1
> 
> 时间：2012-10-18T20:32:48.557
> 
> 标签：linux, usb, libusb

我正在尝试使用 libusb 将一些使用 HidD_GetInputReport 的 Windows 代码移植到 linux。据我所知，我需要调用 usb_control_msg 但我在弄清楚要传递哪些参数时遇到问题。

我追求的报告 ID 是 0x01。这是我到目前为止所拥有的。

```
#define HID_GET_REPORT  0x01
#define HID_REPORT_TYPE_INPUT  0x01
#define INTERFACE_NUMBER 0x00

int reportId = 0x01;
int bytesSent = usb_control_msg(
  devHandle,
  USB_ENDPOINT_IN | USB_TYPE_CLASS | USB_RECIP_INTERFACE,
  HID_GET_REPORT,
  (HID_REPORT_TYPE_INPUT << 8) | reportId,
  INTERFACE_NUMBER,
  buf,
  sizeof(buf),
  10000); 
```

我真的不确定 HID_GET_REPORT、HID_REPORT_TYPE_INPUT 和 INTERFACE_NUMBER。我在网上的一个例子中找到了它们。更改各种值确实会导致不同的返回码，但这些似乎也没有记录在任何地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:45:52.867

看起来您需要在调用其他函数之前分离内核并声明接口。我拨打了以下电话，它解决了问题。

```
usb_detach_kernel_driver_np
usb_claim_interface 
```

# php - 用于 Web 应用程序的超快速数据库访问 - SQL 或 NoSQL，解释型 PHP 还是编译型 C？

> ID：12963258
> 
> 赞同：3
> 
> 时间：2012-10-18T20:33:03.760
> 
> 标签：php, sql, c, database, apache

我目前正在构建一个 Web 应用程序，它需要访问一个（非常）大的字符串数据库并将它们与给定的“请求字符串”进行比较 - 这必须使用不同的比较方法（相同单词的数量，单词的顺序......）并且应该是可扩展的，更重要的是，快速。

我考虑过在**C**中实现比较方法本身，因为它显然比解释的要快得多，尽管有更多像 PHP 这样的“webby”语言。这让我想到了三个问题：

1）我应该如何**将 C 应用程序“连接”到 Web 服务器**（当前为 Apache）？我考虑过通常的 CGI 方式，但由于它需要为每个请求创建一个新进程，因此它的可扩展性和速度会降低——至少我是这么读的。

2) 对于这个用例，哪种**数据库技术**最适合与 C 一起使用？

3）最后但并非最不重要的一点是，您认为**值得奋斗还是通过构建连接到 MySQL 数据库的 PHP 脚本来走通常的方式就足够了 -****速度差异**有多大？

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:12:48.110

糟糕的应用程序架构、糟糕的数据库设计和糟糕的代码*总是*会低效运行、缓慢且无法扩展。

如果你把它排除在外，大多数“非常高需求”的目的都可以用任何解释语言来服务 - 请记住它们在他们所做的事情上进行了优化（例如浪费内存，但即使对于高需求使用通常也很快） .

## 话虽如此，我们得到了真正的答案：

在数据库设计中，没有适用于所有用例的完美方法。您可能需要以一种方式构建数据库以实现最佳读取速度，以另一种方式实现最佳写入速度，再以另一种方式实现最佳灵活性（但会牺牲读取和写入速度）。一个部分可能需要高读取速度，另一个部分可能需要高写入速度，而另一个部分可能需要高灵活性。

想想你设计数据库的方式并问自己“我是否需要在一个会话中连接到数据库 300 次以收集所有数据，或者我是否可以编写一个可以一次读取所有数据的大语句”如果不是这样很容易实现 想想如果你可以编写一个 SQL 存储过程，如果你再次空出来，想想你是否可以改变结构（例如牺牲灵活性）以允许单行读取或存储过程读取。

在任何情况下，从 PHP 到 MySQL 的多对多连接发送 1 个查询意味着您要花费大量时间等待 PHP 通过网络连接到 MySQL 服务器（即使它是本地的）以及让 MySQL 处理请求和提供答案等等等等。如果您可以将要发送的所有语句批量生成到一个字符串中，那就太好了，如果不能，如果您可以将它们分组为较小的批次，那也可以。

## 如果以上所有内容都不可接受，或者如果您今天真的有编写 C 脚本的诀窍（无论如何都是值得称赞的意图）：

您应该考虑编写一个 C MySQL 模块来定义一些 UDF - 用户定义的函数。他们可以在 MySQL 读取行级数据时访问它，并且可以处理输出聚合和所有这些爵士乐。

编写 apache 模块或 PHP 模块将以与 MySQL 模块大致相同的格式提供数据，但处理不会在 MySQL 服务器内部运行，它将从 MySQL 请求数据，处理它并请求更多数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:41:59.513

Apache-2.4.x 有 mod_dbd，它可以直接从 Apache 配置文件中与各种数据库后端（使用预编译查询来提高速度）对话。例如，这可以在[mod_rewrite 的规则](http://httpd.apache.org/docs/2.4/mod/mod_rewrite.html#rewritemap)中使用，以根据查询结果更改传入请求。

换句话说，根据您的应用程序的详细信息，您可以完全避免编码。

但是，如果您确实必须编写代码，我建议您首先使用您最熟悉的语言来实现原型。很有可能，它会“足够快”——或者每个请求花费的大部分时间都在数据库端，从而使语言的选择变得无关紧要。

从 C 连接到数据库后端很容易——每个数据库供应商都有（至少一个）C 程序的客户端库实现。

如果您的应用程序不需要多个 HTTP 服务器来与同一个（单个）数据库通信，那么您最好的数据库将是本地数据库：SleepyCat（现在是 Oracle）的“db”、gdbm 或 SQLite3。

此外，如果更新（对数据库的更改）不频繁，您可以使用平面文件并在内存中构建数据库......这将限制数据库的最大大小，但将是最快的并允许您避免处理（重新）连接等

编辑：memcache 是一个外部数据库——无论它是在同一个系统上还是在远程系统上运行，你都必须*连接*到它，与之*交谈*，并将数据从它的内存*复制到你的内存中。*如果数据库更改不频繁，则最好将内容保存在自己的内存中并直接从那里使用。

# php - 关于如何在 Javascript 和 PHP 中动态分配 ID 的更好想法

> ID：12963270
> 
> 赞同：0
> 
> 时间：2012-10-18T20:34:01.623
> 
> 标签：php, javascript, jquery

我的很多 PHP 代码创建了一个动态 ID 选择器，因为在执行 PHP 代码之前我没有 ID`attr`值，所以我发现自己采取了捷径并将 jquery javascript 代码作为正在创建的 ID 的名称。

所以我想知道是否还有其他方法可以做得更好。我目前的方法有效，但我知道这是不好的做法。

为了说明我在做什么：

```
for ($x=0;$x>=10; $x++){
echo "...
    <script>
    $(function() {
    $( \"#dialog{$x}\" ).dialog({
        autoOpen: false,
        show: \"blind\",
        hide: \"explode\"
    });
    $( \"#opener{$x}\" ).click(function() {
      $( \"#dialog{$x}\" ).dialog( \"open\" );
        return false;
    });
    </script>
    ...";

  echo "<a id=\"opener{$x}\"> View Notes</a>";
  echo "<div id=\"dialog{$x}\">some data also dynamically generated depending on value of $x</div>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:43:57.373

我会说，更改 javascript 并将其放在循环之外。

您可以将其作为一个类而不是放置一个唯一的 id：

```
echo "<a id=\"opener{$x}\" class=\"myclass\"> View Notes</a>"; 
```

然后将javascript移出循环并正常打印出来。

```
<script>
    $(function() {
    $('.myclass').dialog({
        autoOpen: false,
        show: "blind",
        hide: "explode"
    });
$('.myclass').click(function() {
      $(this).dialog("open");
        return false;
    });
</script> 
```

我希望你能明白我的意思。但是，如果您使用 id 有什么特别的原因，那么您的代码就可以了。

**编辑：**如果这是您的所有代码，并且您决定改用类，则不需要循环将所有 id 输出。但是如果你以后想用那个 id 做一些事情，它可能会派上用场。就像通过 ajax 发布请求将其发送到服务器端一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:46:51.027

您应该使用类和数据属性编写 HTML 标记。

例如：

```
<a href="#" class="opener" data-id="1">View Notes</a>
<div class="notes" data-id="1">My notes here</div>

<a href="#" class="opener" data-id="2">View Notes</a>
<div class="notes" data-id="2">My other notes here</div> 
```

然后编写您的 JavaScript 以使用类选择器获取一系列选项。

```
$('.notes').dialog({
    autoOpen: false,
    show: "blind",
    hide: "explode"
});

$('.opener').click(function(e) {
    $('.notes[dataId==' + $(this).data('id')).dialog('open');
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:49:47.343

WordPress 处理 JavaScript 本地化的方式是使用内联 SCRIPT 标签来设置变量，然后在外部 JS 文件中引用这些变量。这避免了将整个脚本内联，同时允许在 PHP 和 JavaScript 之间传递数据。使用可以使用此方法将总数传递给外部文件中的 JS 脚本，因为变量是全局声明的。

对于您的示例，您可以将内联脚本更改为：

```
<script>
    var dialog_count = 10;
</script> 
```

这将设置可用对话框的数量，并将对话框功能移动到 JS 文件中。您需要更改函数以获取要注册的索引的参数，然后遍历调用此函数的每个索引，以使用 dialog_count 值作为总数来注册每个索引。

# excel - VBA - 子（模块）内的调用函数

> ID：12963271
> 
> 赞同：1
> 
> 时间：2012-10-18T20:34:11.027
> 
> 标签：excel, vba

我有以下功能`VBA`：

```
Public Function lorh(custo As Integer)
If custo > 10.99 And custo <> 0 Then
    lorh = "1.4"
Else
    If custo < 11 And custo <> 0 Then
        lorh = "1.35"
    Else
        If custo <= 0 Or custo < 0 Then
            lorh = "Valor Inválido"
        End If
    End If
End If
End Function 
```

现在我需要的是从子开始调用这个函数，或者从宏开始调用这个函数，这样我就可以将它与`excel`工具栏上的自定义按钮相关联。谁能指导我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:36:24.880

Actually, if you have that function inside of a module, you can directly reference it inside a worksheet cell, pretty much as you do with Excel's formulas.

```
=lorh(A1) 
```

In order for your code to run from a macro button, it needs to be a **Sub** instead of a **Function**

I think the code below would work the way you want it, I removed redundant pieces as well as Barranka did.

```
Public Sub lorh()
    Dim lorh As String
    custo = ActiveCell.Value

    If custo > 10.99 Then
        lorh = "1.4"
    Else
        If custo > 0 Then
            lorh = "1.35"
        Else
            lorh = "Valor Inválido"
        End If
    End If

    ActiveCell.Value = lorh
End Sub 
```

This macro would use the active cell value the same way you were using the *custo* parameter in your function.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:53:14.410

如果你需要在你的excel表格中使用你的函数，你只需要写在任何一个单元格，就像andrux说的那样。

如果你需要从 sub 调用它，同样，你只需要编写它：

```
public sub aSubprocedure()
    ' Any variables and other instructions go here
    var = lorh(input)
    ' Your code goes on
end sub 
```

然后您可以将您的子过程分配给您的按钮。

* * *

对您的代码的一些建议：

我建议为您的功能进行以下“清理”：

```
Public Function lorh(custo As Integer)
    If custo > 10.99 And custo <> 0 Then
        lorh = "1.4"
    Else If custo < 11 And custo <> 0 Then
        lorh = "1.35"
    Else If custo <= 0 Then
        lorh = "Valor Inválido"
    End If
End Function 
```

请注意，这`if custo <= 0 or custo < 0`是多余的……您只需要`custo<=0`.

希望这可以帮助你

# c# - 没有实体的属性

> ID：12963278
> 
> 赞同：0
> 
> 时间：2012-10-18T20:34:27.993
> 
> 标签：c#, properties, automatic-properties

> **可能重复：**
> [将私有成员封装为属性与定义没有私有成员的属性有什么区别？](https://stackoverflow.com/questions/4267144/whats-the-difference-between-encapsulating-a-private-member-as-a-property-and-d)

在 C# 中，通常当我定义一个属性时，我为 get 和 set 声明并实现一行或多行。例如

```
public bool IsThere
{
   get { return _isThere; }
   set { _isThere = value;}
} 
```

现在这是什么意思？

```
public bool IsThere
{
   get;
   set;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:35:07.477

这些是自动属性。它们的工作方式与您的第一个示例相同，但允许您省略不必要的源代码。

当您的 getter/setter 方法不再存在时，最好使用它们。

它们还允许您稍后向 getter/setter 方法添加逻辑，而不会破坏任何调用代码（即使您还必须自己实现私有支持属性）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:35:44.883

这是一个[自动实现的属性](http://msdn.microsoft.com/en-us/library/bb384054.aspx)（自动属性）。

C# 编译器将自动为 get/set 方法创建一个私有字段成员以读取/写入。

* * *

请注意，自动属性存在限制（目前）。例如，您不能使用修饰符，例如`readonly`，尽管您仍然可以标记它，因为`private set`它并不完全相同。

# .net - 在 RTF 中动态构建表

> ID：12963282
> 
> 赞同：1
> 
> 时间：2012-10-18T20:34:38.173
> 
> 标签：.net, rtf

我想动态构建表（未知的编译时表数、行数、合并单元格等）

除了按照 rtf 格式编写低级标签之外，还有什么好的方法（可能是一些不错的 dll？）来使用 rtf？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T13:50:43.437

使用 RTF 创建表格并不难，知道控制字是最困难的部分。我在 C# WPF 中与他们合作过。RTF 表的诀窍是每一行都独立于表的其余部分。因此，第 1 行不知道第 2 行是同一张表的一部分，并且是 vis。

以下代码将为指定的行数/列数创建一个表。如果您想以编程方式合并单元格，则必须跟踪要合并的单元格，然后少运行一个 Row Cell 循环。

```
private String GetTableRTF(int numRows, int numColumns)
    {
        StringBuilder rtfTableString = new StringBuilder();

        // For each row, construct the rtf version of a row            
        for (int i = 0; i < numRows; i++)
        {
            // Start the row, autofits it to the page and gives it a black border by default
            rtfTableString.Append(@"{\trowd\trautofit1");
            rtfTableString.Append(@"\trbrdrt\brdrs\brdrw15\brdrcf11"); // Top border
            rtfTableString.Append(@"\trbrdrl\brdrs\brdrw15\brdrcf11"); // Left border
            rtfTableString.Append(@"\trbrdrb\brdrs\brdrw15\brdrcf11"); // Bottom border
            rtfTableString.Append(@"\trbrdrr\brdrs\brdrw15\brdrcf11"); // Right border
            rtfTableString.Append(@"\trbrdrh\brdrs\brdrw15\brdrcf11"); // Cell Horizontal border
            rtfTableString.Append(@"\trbrdrv\brdrs\brdrw15\brdrcf11"); // Cell Vertical border

            for (int z = 0; z < numColumns; z++)
            {
                // Create the cells for the table
                rtfTableString.Append(@"{\intbl \cell}");
            }
            //finish the row
            rtfTableString.Append(@"\row}");
        }

        return rtfTableString.ToString();
    } 
```

这将为您提供一个基本表格，该表格将自动适应窗口并具有基本的黑色边框。任何进一步的设计调整都取决于您。

# objective-c - NSMutableDictionary setObjetct forKey id NSString

> ID：12963287
> 
> 赞同：2
> 
> 时间：2012-10-18T20:35:08.003
> 
> 标签：objective-c, ios, cocoa

坦率地说，这是一个相当详细的问题。NSMutableDictionary 的苹果文档[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableDictionary_Class/Reference/Reference.html)状态：

```
setObject:forKey:
Adds a given key-value pair to the dictionary.
- (void)setObject:(id)anObject forKey:(id)aKey 
```

根据该参数`forKey`接受任何对象。但是，当我尝试传递 NSNumber `Incompatible pointer types sending 'NSNumber *' to parameter of type 'NSString *'` Aparently 时，仅接受一些 NSString 作为键。

暂时我会将我的号码转换为字符串。最后，它只是一把钥匙。但是有人知道谁是对的吗？文档还是编译器？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T20:39:47.937

*使用时不应*收到该警告`setObject:forKey:`。但是，当使用类似名称*的*`setValue:forKey:`. 后者虽然名称相似，但它是键值编码系统的一部分，因此只接受 a`NSString`作为键。

这是一个演示差异的[示例程序。](https://gist.github.com/48e3ad94ac3a7fdc2627)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T20:41:37.787

Apple 的文档是正确的，也许您将该方法`setObject forKey`与`setValue forKey`@mipadi 所说的混淆了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:41:15.927

这工作正常：

```
 [someMutableDictionary setObject:@"a string" forKey:[NSNumber numberWithInt:1]]; 
```

你的代码是什么样的？

# web-services - 通过 YQL 将 XMl 数据发布到 Web 服务

> ID：12963288
> 
> 赞同：0
> 
> 时间：2012-10-18T20:35:07.710
> 
> 标签：web-services, post, yql

我有一个供应商，我需要将 XML 数据发布到他们的 Web 服务，这会给我一个响应，该响应将通过 Javascript 以表格格式显示。

我使用的是 xmlhttp 对象或 Ajax，但这会导致我在 IE 中获得跨站点脚本警告框。所以我想我会使用 YQL，但我找不到通过 YQL 将数据发布到 web 服务的方法。有没有例子。这可能吗？

我什至尝试过“从[http://stagingimport.brassring.com/WebRouter/WebRouter.asmx/route](http://stagingimport.brassring.com/WebRouter/WebRouter.asmx/route) where Query = ... 中选择 *”。此网络服务不接受 JSON 数据。

或者有没有像 YQL 这样的类似东西可以做到这一点。我正在使用 SharePoint 并且不想通过服务器端解决方案，因为这是我们试图实现的临时解决方案。

我将访问这个 URL [http://stagingimport.brassring.com/WebRouter/WebRouter.asmx/route](http://stagingimport.brassring.com/WebRouter/WebRouter.asmx/route)，它是一个 Web 服务，需要 xml 数据通过邮寄方式发送。

我会很感激你的意见。

谢谢

拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:57:46.840

好吧，伙计们，我想我找到了。答案是肯定的，你可以做到。我打开了一个雅虎控制台并写了类似的东西

```
 select * from xml where url='http://import.brassring.com/WebRouter/WebRouter.asmx/route?inputXml=%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22iso-8859- ......... 
```

它确实返回了记录，尽管它不是 JSON，因为它们只返回 XML 中的 XML。

今天我也尝试了来自 Ebay 的 ql.io 并且我也能够获得预期的返回值。

希望它会帮助某人，因为它已经过身份验证，所以不能提供如上所述的整个代码。

# serialization - ASP.NET MVC API 中的自定义序列化

> ID：12963290
> 
> 赞同：0
> 
> 时间：2012-10-18T20:35:10.610
> 
> 标签：serialization, asp.net-mvc-4

我有一个看起来像这样的类：

```
public class Position 
{
    public int X { get; set; }
    public int Y { get; set; }
} 
```

假设一个类似于这个的数据合约：

```
[DataContract]
public class MyModel
{
    [DataMember(name="position")]
    public Position Position { get; set; }
} 
```

我想使用这样的值向客户端发送和从客户端发送***这个***位置***值***：

JSON：`{ "position": "1,2" }`

XML:`<position>1,2</position>`

我只是补充一点，我不想这样做：

JSON：`{ "position": { "data": "1,2" } }`

XML:`<position><data>1,2</data></position>`

如果可能的话，我宁愿不要将它注入整个序列化管道。我让它在 web 控制器上工作，但 API 控制器被证明有点棘手。做这个的最好方式是什么？

谢谢

**更新**

在这种情况下决定按原样使用位置字段（例如`{ "position": { "X": 1, "Y": 2 } }`），但如果我遇到解决方案，我将保持打开状态并更新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:52:01.760

您可以使用视图模型：

```
[DataContract]
public class PositionViewModel
{
    [DataMember(name = "position")]
    public string Position { get; set; }
} 
```

如果需要，然后在控制器操作中映射您的`Position`域模型和视图模型。

# iphone - 关闭键盘时表格视图未收到触摸

> ID：12963292
> 
> 赞同：0
> 
> 时间：2012-10-18T20:35:24.757
> 
> 标签：iphone, ios, xcode

在文本字段之外触摸时，我需要关闭键盘。我有一个主视图控制器视图控制器和另一个嵌入在主视图右上角的视图控制器。它使用容器视图（IB 中的特殊对象）嵌入。

问题是当我添加手势识别器时，键盘被关闭，但我的另一个表格视图（在中心）没有收到点击（它仍在滚动但我无法选择行）。表视图也是一个嵌入式视图控制器。这段代码在我的 ViewDidLoad 中：

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] 
                                           initWithTarget:self
                                           action:@selector(dismissKeyboard)];

[self.view addGestureRecognizer:tap]; 
```

还有我的 dissmisKeyboard 方法：

```
-(void)dismissKeyboard 
{
    NSArray *childVc = [self childViewControllers];
    for(id child in childVc)
    {
        if([child isKindOfClass:[MyTableViewController class]])
        {
            [child.tableVIew endEditing:YES];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:55:47.480

怎么样？

```
-(void)dismissKeyboard 
{
    [self.textField resignFirstResponder];
} 
```

# sql - T-SQL 连接以获取配对和非配对的开始和停止记录

> ID：12963293
> 
> 赞同：5
> 
> 时间：2012-10-18T20:35:28.217
> 
> 标签：sql, sql-server-2008-r2

我有一个设计不佳的表格，我没有设计并且无法修复/更改，因为写入它的第 3 方黑莓应用程序。关键是有一个开始记录和一个停止记录，用于跟踪没有连接或验证是否存在匹配的事件。黑莓应用程序不会将这些记录联系在一起。我试图在其自身上创建一个连接，并创建一个以开头和结尾的临时表来完全外部连接它们。问题是我有重复的条目，条目应该被标记为没有伴侣。现有数据在开始记录和结束记录上都有没有配对的行。我已经搜索了答案，我找到了一些接近的答案，这些答案让我走到了这一步。我知道这是一个很长的帖子，很抱歉。

有一个***表***令人惊讶地有一个主键。没有枢轴/交点表。结构是

```
ID (int PK)
activityType varchar
beginEnd varchar ('begin' or 'end')
businessKey varchar nullable
date DATETIME
technician varchar 
```

以下列也在表中，但可以为空，并且对查询不重要。

```
dateSubmitted DATETIME
gpsLatitude float
gpsLongitude float
note varchar
odometer int 
```

* * *

我现在仍然留下的查询：显示和排序 ID 和 EndID 仅用于调试

```
DECLARE @DateFrom DATETIME
DECLARE @DateTo DATETIME
SET @DateFrom='20101101'
SET @DateTo='20101102'
DECLARE @Incomplete VARCHAR(15)
SET @Incomplete = 'Incomplete'

DECLARE @StartEvents TABLE
(
[id] [numeric](19, 0) NOT NULL,
[activityType] [varchar](255) NOT NULL,
[beginEnd] [varchar](255) NULL,
[businessKey] [varchar](255) NULL,
[date] [datetime] NOT NULL,
[dateSubmitted] [datetime] NULL,
[gpsLatitude] [float] NULL,
[gpsLongitude] [float] NULL,
[note] [varchar](255) NULL,
[odometer] [int] NULL,
[technician] [varchar](255) NOT NULL
)

INSERT     @StartEvents
       ([ID],[activityType],[beginEnd],[businessKey],[date],[dateSubmitted],[gpsLatitude]
            ,[gpsLongitude],[note],[odometer],[technician])
SELECT      *
FROM        dbo.TimeEntry
WHERE 
[date] between @DateFrom AND @DateTo
AND beginEnd = 'Begin'
--AND [technician] = 'FRED'
ORDER by technician
------------------------------------------------------------
DECLARE @EndEvents TABLE
(
[id] [numeric](19, 0) NOT NULL,
[activityType] [varchar](255) NOT NULL,
[beginEnd] [varchar](255) NULL,
[businessKey] [varchar](255) NULL,
[date] [datetime] NOT NULL,
[dateSubmitted] [datetime] NULL,
[gpsLatitude] [float] NULL,
[gpsLongitude] [float] NULL,
[note] [varchar](255) NULL,
[odometer] [int] NULL,
[technician] [varchar](255) NOT NULL
)

INSERT     @EndEvents
       ([ID],[activityType],[beginEnd],[businessKey],[date],[dateSubmitted],[gpsLatitude]
            ,[gpsLongitude],[note],[odometer],[technician])
SELECT      *
FROM        dbo.TimeEntry
WHERE 
[date] between @DateFrom AND @DateTo AND
beginEnd = 'End'
--AND [technician] = 'FRED'
ORDER by technician

-- And then a conventional SELECT
SELECT     
StartEvents.id 
,EndEvents.id AS EndID
,COALESCE(
    StartEvents.activityType ,EndEvents.activityType ,'Not Available'
    ) AS ActivityType
--,StartEvents.beginEnd as [Begin] 
--,EndEvents.beginEnd AS [End]
,COALESCE (
    convert(VARCHAR(12), StartEvents.[date], 103), 
    convert(VARCHAR(12), EndEvents.[date], 103), @Incomplete
    ) as [Event Date] 
,COALESCE (
    convert(VARCHAR(12), EndEvents.[date], 103), @Incomplete 
    ) as [End Date] 
,COALESCE(
    CONVERT(VARCHAR(5) , StartEvents.dateSubmitted , 108) , @Incomplete
        ) AS StartTime
,COALESCE(
    CONVERT(VARCHAR(5) , EndEvents.dateSubmitted , 108) , @Incomplete
        ) AS EndTime
,COALESCE(
    StartEvents.note, EndEvents.note, ''
    ) as [Note]
,COALESCE(
    StartEvents.technician,EndEvents.technician,'Not Available'
    ) AS Technician 

FROM         
@StartEvents As StartEvents 

FULL OUTER JOIN

@EndEvents AS EndEvents ON 
StartEvents.technician = EndEvents.technician AND 
StartEvents.businessKey = EndEvents.businessKey AND 
StartEvents.activityType = EndEvents.activityType 
AND convert(VARCHAR(12), StartEvents.[date], 103) = convert(VARCHAR(12), EndEvents.[date], 103) 

-- WHERE 
    --StartEvents.[date] between @DateFrom AND @DateTo OR 
    --StartEvents.[dateSubmitted] between @DateFrom AND @DateTo 
ORDER BY 
    StartEvents.Technician,
    ID,ENDID 
```

* * *

数据：

```
id,activityType,beginEnd,businessKey,date,dateSubmitted,gpsLatitude,gpsLongitude,note,odometer,technician
23569,Standby,Begin,,2010-11-01 08:00:13.000,2010-11-01 08:26:45.533,34.139,-77.895,#1140,28766,barthur@fubar.com
23570,Travel,Begin,00100228002,2010-11-01 07:00:44.000,2010-11-01 08:34:15.370,35.0634,-80.7668,,18706,creneau@fubar.com
23571,Standby,End,,2010-11-01 08:30:08.000,2010-11-01 08:35:20.463,34.0918,-77.9002,#1140,28766,barthur@fubar.com
23572,Travel,Begin,00100226488,2010-11-01 08:30:41.000,2010-11-01 08:36:56.420,34.0918,-77.9002,,28766,barthur@fubar.com
23573,Travel,End,00100226488,2010-11-01 08:45:00.000,2010-11-01 08:44:15.553,34.0918,-77.9002,,28768,barthur@fubar.com
23574,OnSite,Begin,00100226488,2010-11-01 08:45:41.000,2010-11-01 09:24:23.943,34.0918,-77.9002,,0,barthur@fubar.com
23575,OnSite,End,00100226488,2010-11-01 09:30:10.000,2010-11-01 09:33:19.953,34.0918,-77.9002,,28768,barthur@fubar.com
23576,Travel,Begin,00100228137,2010-11-01 09:30:20.000,2010-11-01 09:34:57.330,34.0918,-77.9002,,28768,barthur@fubar.com
23577,Travel,End,00100228137,2010-11-01 09:45:51.000,2010-11-01 09:42:39.230,34.0918,-77.9002,,28771,barthur@fubar.com
23578,Travel,Begin,00100228138,2010-11-01 09:00:23.000,2010-11-01 09:58:22.857,34.9827,-80.5365,,18749,creneau@fubar.com
23579,OnSite,Begin,00100228137,2010-11-01 09:45:47.000,2010-11-01 10:41:10.563,34.139,-77.895,,0,barthur@fubar.com
23580,OnSite,End,00100228137,2010-11-01 10:45:43.000,2010-11-01 11:09:14.393,34.139,-77.895,,28771,barthur@fubar.com
23581,OnSite,Begin,00100228142,2010-11-01 10:45:42.000,2010-11-01 11:29:26.447,34.139,-77.895,#1015,28771,barthur@fubar.com
23582,OnSite,End,00100228142,2010-11-01 11:15:18.000,2010-11-01 11:55:28.603,34.139,-77.895,#1015,28771,barthur@fubar.com
23583,Travel,Begin,,2010-11-01 11:15:06.000,2010-11-01 11:56:01.633,34.139,-77.895,"#1142 Fuel, #1154 Tickets",28771,barthur@fubar.com
23584,Travel,End,,2010-11-01 12:00:47.000,2010-11-01 12:07:54.867,34.139,-77.895,"#1154, #1142",28774,barthur@fubar.com
23585,Travel,End,,2010-11-01 12:00:47.000,2010-11-01 12:07:55.087,34.139,-77.895,"#1154, #1142",28774,barthur@fubar.com
23586,Break,Begin,,2010-11-01 12:00:26.000,2010-11-01 12:08:06.007,34.139,-77.895,#1153,28774,barthur@fubar.com
23587,Travel,End,,2010-11-01 12:00:47.000,2010-11-01 12:08:06.040,34.139,-77.895,"#1154, #1142",28774,barthur@fubar.com
23588,Break,Begin,,2010-11-01 12:00:26.000,2010-11-01 12:08:06.070,34.139,-77.895,#1153,28774,barthur@fubar.com
23589,Travel,End,,2010-11-01 12:00:47.000,2010-11-01 12:16:02.673,34.139,-77.895,"#1154, #1142",28774,barthur@fubar.com
23590,Travel,End,,2010-11-01 12:00:47.000,2010-11-01 12:16:14.220,34.139,-77.895,"#1154, #1142",28774,barthur@fubar.com
23591,Travel,Begin,00100228000,2010-11-01 11:45:19.000,2010-11-01 12:35:46.363,35.0634,-80.7668,,18760,creneau@fubar.com
23592,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:58:51.050,34.0918,-77.9002,,28774,barthur@fubar.com
23593,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:59:03.830,34.0918,-77.9002,,28774,barthur@fubar.com
23594,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:59:03.893,34.1594,-77.8929,,28774,barthur@fubar.com
23595,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:59:03.940,34.1594,-77.8929,,28774,barthur@fubar.com
23596,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:59:15.880,34.1594,-77.8929,,28774,barthur@fubar.com
23597,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:59:15.927,34.2743,-77.8668,,28774,barthur@fubar.com
23598,Travel,Begin,00100227980,2010-11-01 13:15:14.000,2010-11-01 13:59:15.987,34.2743,-77.8668,,28774,barthur@fubar.com
23599,Travel,Begin,00100228166,2010-11-01 14:00:13.000,2010-11-01 14:29:45.320,35.0634,-80.7668,,18779,creneau@fubar.com
23600,Travel,End,00100227980,2010-11-01 15:15:58.000,2010-11-01 15:15:40.403,35.3414,-78.0325,,28880,barthur@fubar.com
23601,Travel,Begin,00100228205,2010-11-01 15:30:46.000,2010-11-01 15:41:41.810,35.0661,-80.8376,,18781,creneau@fubar.com
23602,OnSite,Begin,00100227980,2010-11-01 15:15:23.000,2010-11-01 15:59:45.203,35.3873,-77.9395,,28880,barthur@fubar.com
23603,OnSite,End,00100227980,2010-11-01 16:15:22.000,2010-11-01 16:06:09.150,35.3873,-77.9395,,28880,barthur@fubar.com
23604,Travel,Begin,00100228007,2010-11-01 16:15:15.000,2010-11-01 16:15:25.253,35.3873,-77.9395,,28880,barthur@fubar.com
23605,Travel,Begin,,2010-11-01 16:15:12.000,2010-11-01 16:20:49.933,35.0445,-80.8227,Return trip home,18785,creneau@fubar.com
23606,Travel,End,00100228007,2010-11-01 16:30:48.000,2010-11-01 16:26:43.360,35.3873,-77.9395,,28884,barthur@fubar.com
23607,Travel,End,,2010-11-01 17:30:14.000,2010-11-01 17:23:57.897,35.2724,-81.1577,Return trip home,18822,creneau@fubar.com
23608,OnSite,Begin,00100228007,2010-11-01 16:30:48.000,2010-11-01 18:38:32.700,35.3941,-77.994,,28880,barthur@fubar.com
23609,Travel,Begin,00100228209,2010-11-01 17:45:16.000,2010-11-01 18:39:05.683,35.3941,-77.994,,28884,barthur@fubar.com
23610,OnSite,End,00100228007,2010-11-01 17:45:52.000,2010-11-01 18:41:36.980,35.3941,-77.994,,28884,barthur@fubar.com
23611,OnSite,Begin,00100228209,2010-11-01 18:00:38.000,2010-11-01 18:42:12.763,35.3941,-77.994,,28888,barthur@fubar.com
23612,OnSite,End,00100228209,2010-11-01 18:30:44.000,2010-11-01 18:43:29.123,35.3941,-77.994,,28888,barthur@fubar.com
23613,Standby,Begin,,2010-11-01 18:30:58.000,2010-11-01 18:45:28.857,35.3941,-77.994,#1157 ergo,28888,barthur@fubar.com
23614,Standby,End,,2010-11-01 18:45:26.000,2010-11-01 18:46:01.167,35.3941,-77.994,#1157 ergo redo,28888,barthur@fubar.com
23615,Travel,Begin,,2010-11-01 18:45:24.000,2010-11-01 18:47:37.803,35.3941,-77.994,RTN,28888,barthur@fubar.com
23616,Travel,End,,2010-11-01 20:45:05.000,2010-11-01 20:34:39.433,34.139,-77.895,#1142 Fueled,28990,barthur@fubar.com 
```

在此图中，您可以看到突出显示的行显示 6 个结束时间和相同的开始时间。记录 14 和 15 显示 2 开始，没有结束。
![在此处输入图像描述](../Images/1722c565a7cd5adc09df51ca77731cb0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T17:07:11.037

这是一种滥用 row_number 函数的方法。请检查评论以获得一些解释。

```
;with Seq as (
    -- Create a master sequence of events
    -- Trust the date column to be accurate (don't match a Begin to an earlier End)
    select id, activitytype, beginend
        , coalesce(businesskey, '') as businesskey -- Needed to match nulls as equal
        , [date], technician, note
        , row_number() over (partition by technician, businesskey, activitytype order by [date], beginend, id) as rownumber
    from TimeEntry
)
select b.id as BeginID
    , e.id as EndID
    , coalesce(b.technician, e.technician) as Technician
    , coalesce(b.businesskey, e.businesskey) as BusinessKey
    , coalesce(b.activitytype, e.activitytype) as ActivityType
    , coalesce(convert(char(10), b.[date], 103), 'Incomplete') as BeginDate
    , coalesce(convert(char(10), e.[date], 103), 'Incomplete') as EndDate
    , coalesce(convert(char(5), b.[date], 108), 'Incomplete') as BeginTime
    , coalesce(convert(char(5), e.[date], 108), 'Incomplete') as EndTime
    , b.note as BeginNote
    , e.note as EndNote
from (select * from Seq where beginend = 'Begin') b -- Get all Begins
    full outer join (select * from Seq where beginend = 'End') e -- Get all Ends
        on b.technician = e.technician
            and b.businesskey = e.businesskey
            and b.activitytype = e.activitytype
            and b.rownumber = e.rownumber - 1 -- Match a Begin with only the very next End of that type
order by coalesce(b.[date], e.[date])
    , coalesce(b.id, e.id)
    , coalesce(b.technician, e.technician)
    , coalesce(b.businesskey, e.businesskey)
    , coalesce(b.activitytype, e.activitytype) 
```

如果有人想要 DDL 或演示， [SQL Fiddle 。](http://sqlfiddle.com/#!3/1fc2b/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T17:06:25.437

使用 CTE 和 Row_Number() 我想我可以返回您要查找的内容。关键是仅通过根据技术人员、业务密钥、活动类型的顺序加入相邻行来执行完整的外部操作。无论如何，它是：

```
WITH EventsCTE
AS
(
    select id, technician,businessKey,activityType, 
             CAST(date as date) As date, dateSubmitted,    
             beginEnd, note,
             ROW_NUMBER() OVER 
               (Partition BY technician, 
                businesskey, activityType 
                 ORDER BY dateSubmitted) as rowN
    from TimeEntry
),
BeginEventsCTE
AS
(
    select id, technician,businessKey,activityType, 
             CAST(date as date) As date, 
             dateSubmitted, note, rowN
      from EventsCTE
      WHERE beginEnd = 'Begin'
),
EndEventsCTE
AS
(
    select id, technician,businessKey,
             activityType, CAST(date as date) As date, 
             dateSubmitted, note, rowN
    from EventsCTE
    WHERE beginEnd = 'End'
)
SELECT  B.id, 
        E.id As EndId, 
    COALESCE(B.activityType ,E.activityType ,'Not Available') AS ActivityType,
    COALESCE(convert(VARCHAR(12), B.[date], 103), 'Incomplete') As EventDate, 
    COALESCE(convert(VARCHAR(12), E.[date], 103), 'Incomplete') As EndDate,
    COALESCE(CONVERT(VARCHAR(5) , B.dateSubmitted , 108) , 'Incomplete') As StartTime, 
    COALESCE(CONVERT(VARCHAR(5) , E.dateSubmitted , 108) , 'Incomplete') As EndTime, 
    COALESCE(B.Note, E.note, '') as Note, 
    COALESCE(B.technician, E.technician, 'Not Available') As Technician --, B.rowN, E.rowN
 FROM BeginEventsCTE B
 FULL OUTER join EndEventsCTE E
    ON B.technician = E.technician AND
       B.businessKey = E.businessKey AND
       B.activityType = E.activityType AND
       B.date = E.date AND
       B.rowN = E.rowN - 1
ORDER BY 
    COALESCE(B.Technician, E.Technician),
    COALESCE(b.id,E.id) 
```

结果如下：

![查询结果](../Images/bc4cb17bc0705e8f4d00f065a63365b2.png)

# c++ - 检查对象的类型是否继承自特定类

> ID：12963294
> 
> 赞同：14
> 
> 时间：2012-10-18T20:35:40.640
> 
> 标签：c++, oop, inheritance, types

在 C++ 中，如何检查对象的类型是否继承自特定类？

```
class Form { };
class Moveable : public Form { };
class Animatable : public Form { };

class Character : public Moveable, public Animatable { };
Character John;

if(John is moveable)
// ... 
```

在我的实现中，`if`查询是在`Form`列表的所有元素上执行的。继承类型的所有对象都`Moveable`可以移动并需要处理其他对象不需要的对象。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-18T20:40:43.490

你需要的是`dynamic_cast`. 在其指针形式中，如果无法执行强制转换，它将返回一个空指针：

```
if( Moveable* moveable_john = dynamic_cast< Moveable* >( &John ) )
{
    // do something with moveable_john
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T20:42:41.340

您正在使用私有继承，因此无法用于`dynamic_cast`确定一个类是否派生自另一个类。但是，您可以使用[`std::is_base_of`](http://en.cppreference.com/w/cpp/types/is_base_of)，它会在编译时告诉您：

```
#include <type_traits>

class Foo {};

class Bar : Foo {};

class Baz {};

int main() 
{
    std::cout << std::boolalpha;
    std::cout << std::is_base_of<Foo, Bar>::value << '\n'; // true
    std::cout << std::is_base_of<Bar,Foo>::value << '\n';  // false
    std::cout << std::is_base_of<Bar,Baz>::value << '\n';  // false
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T20:45:01.317

> 运行时类型信息 (RTTI) 是一种允许在程序执行期间确定对象类型的机制。RTTI 被添加到 C++ 语言中，因为许多类库供应商都在自己实现此功能。

例子：

```
//moveable will be non-NULL only if dyanmic_cast succeeds
Moveable* moveable = dynamic_cast<Moveable*>(&John); 
if(moveable) //Type of the object is Moveable
{
} 
```

# c++ - 替换字符串中出现 3 次或更多的字符

> ID：12963304
> 
> 赞同：0
> 
> 时间：2012-10-18T20:36:17.253
> 
> 标签：c++, stl

我想在 std::string 中找到 3 次或更多次 a 来替换。

例如：

```
std::string foo = "This is a\n\n\n test";
std::string bar = "This is a\n\n\n\n test";
std::string baz = "This is a\n\n\n\n\n test";
std::string boo = "This is a\n\n\n\n\n\n test";
// ... etc. 
```

应*全部*转换为：

```
std::string expectedResult = "This is a\n\n test"; 
```

如果可能的话，香草 stl 将不胜感激（没有正则表达式库或增强）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:51:33.113

这应该找到连续的 \n 并替换它们：

```
size_type i = foo.find("\n\n\n");
if (i != string::npos) {
    size_type j = foo.find_first_not_of('\n', i);
    foo.replace(i, j - i, "\n\n");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:51:12.960

编写一个函数来处理您有兴趣修改的每个字符串：

一次读取每个字符串一个字符。跟踪 2 个字符变量：a 和 b。对于您阅读的每个字符 c，请执行以下操作：

```
if ( a != b ) {
    a = b;
    b = c;
} else if ( a == b ) {
    if ( a == c ) {
        // Put code here to remove c from your string at this index
    }
} 
```

我不是 100% 确定您是否可以直接使用 STL 中的某些东西来完成您的要求，但是正如您所看到的，这个逻辑并没有太多代码可以实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:55:52.197

您可以使用查找和替换。（这将替换 "\n\n\n..." -> "\n\n"）。您可以将位置传递给 string::find，这样您就不必再次搜索字符串的开头（优化）

```
 int pos = 0;
  while ((pos = s.find ("\n\n\n", pos)) != s.npos)
    s.replace (pos, 3, "\n\n", 2); 
```

这将替换 "\n\n\n\n.." -> "\n"

```
 int pos = 0;
  while ((pos = s.find ("\n\n", pos)) != s.npos)
    s.replace (pos, 2, "\n", 1); 
```

# javascript - Is it possible to embed a jQuery animated SPAN element into a Google Map at a specific latitude and longitude?

> ID：12963305
> 
> 赞同：2
> 
> 时间：2012-10-18T20:36:17.797
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3, maps

Is it possible to embed a jQuery animated SPAN element into a Google Map at a specific latitude and longitude? (Just like a map marker.)

Currently, I am using a jQuery plugin to animate a series of transparent PNG frames and then populate a span tag with those PNGs. (See the animation plugin here: [http://blog.shynet.nl/post/2010/08/28/Alternative-to-animated-GIFs-AnimateImages-jQuery-Plugin.aspx](http://blog.shynet.nl/post/2010/08/28/Alternative-to-animated-GIFs-AnimateImages-jQuery-Plugin.aspx))

My original idea was to use CSS to position the SPAN object on top of the map where I wanted it, but this solution will not work when the user drags the map. How can I embed this object into a map in a fashion similar to a map marker?

**My source code can be found on PasteBin here:** [http://pastebin.com/MY0SfqXE](http://pastebin.com/MY0SfqXE)

An example would be much appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:39:04.757

是的，您可以嵌入。有一些方法可以将 latlong 映射到相对于地图容器的像素值。为此，您必须创建自定义叠加层。看到[这个线程](https://stackoverflow.com/questions/2674392/how-to-access-google-maps-api-v3-markers-div-and-its-pixel-position)

# javascript - Using a jQuery fullscreen image gallery in Wordpress

> ID：12963313
> 
> 赞同：1
> 
> 时间：2012-10-18T20:36:34.600
> 
> 标签：javascript, jquery, html, css, wordpress

I have been trying to get malihu's Simple jQuery fullscreen image gallery ( [http://manos.malihu.gr/simple-jquery-fullscreen-image-gallery](http://manos.malihu.gr/simple-jquery-fullscreen-image-gallery) ) to work with my Wordpress theme, but for some reason I'm having trouble getting the script to run. I'm calling both the CSS and javascript normally as with other plugins in the functions.php file, but the javascript doesn't seem to be taking effect to make the gallery. I currently have the following code to call the CSS in the header and the javascript in the footer. Am I missing something?

```
function malihu_gallery() {
if (!is_admin()) {

    // Enqueue Malihu Gallery JavaScript
    wp_register_script('malihu-jquery-image-gallery', get_template_directory_uri(). '/js/malihu-jquery-image-gallery.js', array('jquery'), 1.0, true );
    wp_enqueue_script('malihu-jquery-image-gallery'); 

    // Enqueue Malihu Gallery Stylesheet        
    wp_register_style( 'malihu-style', get_template_directory_uri() . '/CSS/malihu_gallery.css', 'all' );
    wp_enqueue_style('malihu-style' );

    }
  }
}

add_action('init', 'malihu_gallery'); 
```

I'm thinking that I may need to ready the script with something similar to the following, but not sure if I'm on the right track.

```
function gallery_settings () { ?>
    <script type="text/javascript">
        jQuery(document).ready(function() {
            jQuery('#container').malihu_gallery();
        });
    </script><?php 
```

Any help greatly appreciated!

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:05:33.693

如果你想让任何事件在 jQuery 中工作，你会希望它在文档中准备好。这将在加载 DOM 之后和加载页面内容之前加载它。

```
 $(document).ready(function() {
   // your stuff inside of here
 }); 
```

根据上面显示的内容不确定，但尝试一些基本调试，看看在将代码粘贴到控制台时是否可以调用函数。或者，如果您想创建一个[小提琴](http://jsfiddle.net/)，我会看看。

# c++ - 在不使用字符串函数的情况下在 C++ 中复制字符数组

> ID：12963319
> 
> 赞同：1
> 
> 时间：2012-10-18T20:37:24.630
> 
> 标签：c++, g++

谁能帮我解决这个代码..我要做的就是复制显示在主函数中初始化的字符数组对cpp来说很新，我想不出办法

```
#include<iostream>
using namespace std;

class base1
{
public:
void setname(char *name);
void setpubl(char *publisher);
void setauth(char *author);
char getname();
char getpubl();
char getauth();
private:
char init_name[50], init_publ[50], init_auth[50];

};

void base1::setname(char *name)
{
int i=0;
while(init_name[i] != '\0')
{
init_name[i]=name[i];
i++;
}
}

void base1::setpubl(char *publisher)
{
int j=0;
while(init_publ[j] != '\0')
{
init_publ[j]=publisher[j];
j++;
}
}

void base1::setauth(char *author)
{
int k=0;
while(init_auth[k] != '\0')
{
init_auth[k]=author[k];
k++;
}

}

const char* base1::getname() const
{
return init_name;
}

const char* base1::getpubl() const
{
return init_publ;
}
const char* base1::getauth() const
{
return init_auth;
}
/*
base1::base1()
{
init_name[0]=0;
init_publ[0]=0;
init_auth[0]=0;
}*/

int main()
{
base1 hello;
char name[]="cpp";
char publisher[]="dreamworks";
char author[]="random";
hello.setname(name);
hello.setpubl(publisher);
hello.setauth(author);
cout<<hello.getname()<<endl;
cout<<hello.getpubl()<<endl;
cout<<hello.getauth()<<endl;
return 0;
} 
```

当我尝试编译它时，它给了我很多错误。有人可以帮我吗。我正在使用 g++

错误：

> copychar.cpp:49:13：错误：'const char* base1::getname() const' 的原型与类'base1'中的任何内容都不匹配</p>
> 
> copychar.cpp:10:6：错误：候选是：char base1::getname()
> 
> copychar.cpp:54:13：错误：'const char* base1::getpubl() const' 的原型与类'base1'中的任何内容都不匹配</p>
> 
> copychar.cpp:11:6：错误：候选是：char base1::getpubl()
> 
> copychar.cpp:58:13：错误：'const char* base1::getauth() const' 的原型与类'base1'中的任何内容都不匹配</p>
> 
> copychar.cpp:12:6：错误：候选是：char base1::getauth()

当我使用以下代码时，仅显示每个字符串的第一个字符

```
#include<iostream>
using namespace std;

class base1
{
public:
void setname(char *name);
void setpubl(char *publisher);
void setauth(char *author);
char getname();
char getpubl();
char getauth();
private:
char init_name[50], init_publ[50], init_auth[50];

};

void base1::setname(char *name)
{
int i=0;
while(name[i] != '\0')
{
init_name[i]=name[i];
i++;
}
}

void base1::setpubl(char *publisher)
{
int j=0;
while(publisher[j] != '\0')
{
init_publ[j]=publisher[j];
j++;
}
}

void base1::setauth(char *author)
{
int k=0;
while(author[k] != '\0')
{
init_auth[k]=author[k];
k++;
}

}

char base1::getname()
{
return *init_name;
}

char base1::getpubl()
{
return *init_publ;
}
char base1::getauth()
{
return *init_auth;
}
/*
base1::base1()
{
init_name[0]=0;
init_publ[0]=0;
init_auth[0]=0;
}*/

int main()
{
base1 hello;
char name[]="cpp";
char publisher[]="dreamworks";
char author[]="random";
hello.setname(name);
hello.setpubl(publisher);
hello.setauth(author);
cout<<hello.getname()<<endl;
cout<<hello.getpubl()<<endl;
cout<<hello.getauth()<<endl;
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:41:39.667

你的循环是错误的，不是

```
void base1::setpubl(char *publisher)
{
    int j=0;
    while(init_publ[j] != '\0')
    {
        init_publ[j]=publisher[j];
        j++;
    }
} 
```

但

```
void base1::setpubl(char *publisher)
{
    int j=0;
    while(publisher[j] != '\0')
    {
        init_publ[j]=publisher[j];
        j++;
    }
    init_publ[j] = '\0'; // ensure destination string is null terminated
} 
```

您的循环应该检查`publisher`您传递给函数的字符串的结尾，而不是`init_publ`字符串的结尾。这没有多大意义，因为你还没有给那个字符串一个值。

其他循环也一样。

也看看这个

```
char getname(); 
```

还有这个

```
const char* base1::getname() const 
```

看到不同？首先你说 getname is `char`，然后你说它是`const char*`and `const`。你必须保持一致。第二个是正确的，替换

```
char getname(); 
```

和

```
const char* getname() const; 
```

与 getauth 和 getpubl 相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:48:25.737

您的函数原型`getter`不匹配。您已将吸气剂声明为..

```
char getname(); 
```

你像这样实现它。

```
const char* base1::getauth() const 
```

使他们的原型相同，就像这样。

```
const char* getauth() const ; 
```

并像这样实现它。

```
const char* base1::getauth() const
{
  //code here
} 
```

同样适用于所有`getter`功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:50:14.863

*   一一纠正你的编译错误
    *   仔细阅读每一个错误
    *   如果不理解，请检查 google/compiler 文档
    *   仍然不明白-然后问这个错误-在您的情况下是什么意思
*   单元测试你的代码
*   当您的程序无法通过单元测试（也不会）时，调试您的代码并一一纠正逻辑错误

每次你必须写东西时运行这些步骤。这是提高你的编程技能的最好方法——来自他人的好建议和好的讲座是不够的。

我可以给你一些提示 - 但这对未来有帮助吗？对于不那么明显的错误？

一个提示：char 字符串必须以 结尾`'\0'`，复制后您的字符串是否包含最后一个字符？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:42:28.097

*   您的 setXXX 采用`char *`参数的函数可能应该采用`const char*`。

> ```
> void setname(const char *name); 
> ```

*   您的 getXXX 函数被声明为缺少`const`限定符，但定义为`const`.
*   您的 getXXX 函数被声明为返回 a `char`，但定义正在返回`const char*`。

> ```
> const char* getname() const; 
> ```

*   您的 setXXX 函数正在检查目标而不是源中的空终止符，导致它们根本不复制任何字符。
*   您的 setXXX 函数可能应该使用 for 循环而不是`while`循环
*   您根本不进行缓冲区溢出检查。

> ```
> void base1::setname(const char *name) 
> {
>   int i=0;
>   for( ; name[i]!='\0' && i<49; ++i)
>     init_name[i]=name[i];
>   init_name[i] = '\0';  
> } 
> ```

*   您的类没有构造函数，因此成员可能会随机初始化

> ```
> base1::base1()
> :init_name(), init_publ(), init_auth()
> {} 
> ```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-18T20:42:13.007

你必须在论点上做 while 事情：

```
void base1::setpubl(char *publisher)
{
     int j=0;
     while(publisher[j] != '\0')
     //... 
```

你所有的方法都是一样的

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-18T20:42:39.113

使用字符串函数，这就是它们的用途（除非这是你的作业，在这种情况下，这不是 SO 的用途）

但是，您的主要问题是，当您将数据复制到类数组时，当目标数组为空时您会停止 - 在大多数 C++ 环境中，声明一个数组不会用空值初始化它，大多数时候您不想要性能只是为了空白一个你将填充真实数据的数组。

所以复制直到输入是一个空字符，或者目标数组已满。

# php - What is the best way to create a JS array from a MySQL table with PHP and AJAX

> ID：12963320
> 
> 赞同：-1
> 
> 时间：2012-10-18T20:37:26.207
> 
> 标签：php, javascript, mysql

I thought this would be much simpler but I'm having some difficulty finding a simple answer online.

I simply want to get data from an MySQL table with ajax and transform it into a js array.

My table is ultra simple.. it's just:

```
Table 1
 id     value
  1     1 
  2     2 
  3     3 
```

What is the best way to do this?

So far I have the php file:

```
while($row = mysql_fetch_array($query)) {$array[] = $row;} 
```

which emits something like:

```
Array ( [0] => Array ( [0] => 7 [idGlobal] => 7 [1] => 4.9 [tc] => 4.9 ) ) Array ( [0]     => Array ( [0] => 7 [idGlobal] => 7 [1] => 4.9 [tc] => 4.9 ) [1] => Array ( [0] => 3     [idGlobal] => 3 [1] => 2.2 [tc] => 2.2 ) ) Array ( [0] => Array ( [0] => 7 [idGlobal] => 7 [1] => 4.9 [tc] => 4.9 ) [1] => Array ( [0] => 3 [idGlobal] => 3 [1] => 2.2 [tc] => 2.2 ) [2] => Array ( [0] => 5 [idGlobal] => 5 [1] => 1.9 [tc] => 1.9 ) ) Array ( [0] => Array ( [0] => 7 [idGlobal] => 7 [1] => 4.9 [tc] => 4.9 ) [1] => Array ( [0] => 3 [idGlobal] => 3 [1] => 2.2 [tc] => 2.2 ) [2] => Array ( [0] => 5 [idGlobal] => 5 [1] => 1.9 [tc] => 1.9 ) [3] => Array ( [0] => 6 [idGlobal] => 6 [1] => 1.9 [tc] => 1.9 ) ) Array ( [0] => Array ( [0] => 7 [idGlobal] => 7 [1] => 4.9 [tc] => 4.9 ) [1] => Array ( [0] => 3 [idGlobal] => 3 [1] => 2.2 [tc] => 2.2 ) [2] => Array ( [0] => 5 [idGlobal] => 5 [1] => 1.9 [tc] => 1.9 ) [3] => Array ( [0] => 6 [idGlobal] => 6 [1] => 1.9 [tc] => 1.9 ) [4] => Array ( [0] => 4 [idGlobal] => 4 [1] => 1.6 [tc] => 1.6 ) ) 
```

but I still don't know the best way to get it with ajax to a JS array

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:41:25.943

```
$query = "SELECT id, value FROM table";
$data = array();

if ($result = $mysqli->query($query)) {
    while ($row = $result->fetch_assoc()) {
        $data[] = $row;
    }
}

header('Content-Type: application/json');
echo json_encode($data); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:40:26.347

1.  从 mysql 查询
2.  获取结果 oas 关联数组
3.  json对数组进行编码
4.  将 json 字符串返回到 javascript 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:43:53.397

使用 php 函数 json_encode 创建包含 json 的字符串。后来在javascript中检索字符串时，最简单的方法是将其转换为类似这样的数组。

var myArray = eval('(' + jsonStringRetrieved + ')');

并查看这些 [如何使用 json_encode](https://stackoverflow.com/questions/10377570/how-to-use-json-encode) [安全地将 JSON 字符串转换为对象](https://stackoverflow.com/questions/45015/safely-turning-a-json-string-into-an-object)

# jquery - Jquery $.post 问题

> ID：12963326
> 
> 赞同：0
> 
> 时间：2012-10-18T20:37:52.603
> 
> 标签：jquery

我有以下代码在浏览后读取文件名并使用 POST 将其发送到另一个页面。如果我在 $.post 之后有警报，那么它工作正常。如果我删除警报消息，则 post 不会将文件名转发到另一个页面。

```
<input type="file" name="fileupload" id="fileupload" value=""> 
```

// 查询代码

```
$("#fileupload").change(function() {
    if ($("#fileupload").val().length > 0) {
        $.post("ReadExcel.jsp", {
            filename: $("#fileupload").val(),
            processId: < %= processId % >
        });
        alert($("#fileupload").val()); // **If I remove this alert, then the code doesn't works** 
    }
    location.reload();
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:51:26.907

我很难用 jQuery 发布文件数据，所以我制作了一个表单并添加了一个 i 框架并使用了良好的旧表单方法。我不确定你到底想达到什么目的，（发布文件数据，或者只是文件名），但无论如何这里有一些提示。

我敢打赌，当您发出警报时，脚本会在您单击“确定”时暂停，以便有时间实际从帖子中获得他的回复。当您取下它时，脚本会在客户端收到他的答案之前继续执行。

修改您的代码，以便您的下一个操作在回调中，（将在收到响应后运行）；$.post（文件名，值，回调）；

此代码应该可以工作：

```
<input type="file" name="fileupload" id="fileupload" value="">
// Jquery code
   $("#fileupload").change(function() {
   if($("#fileupload").val().length > 0) {    

       $.post("ReadExcel.jsp", {
            filename: $("#fileupload").val(), 
            processId: <%=processId%>
       },function(data){
             location.reload();          //THIS IS THE CALLBACK 
       });

 alert($("#fileupload").val());  // **If I remove this alert, then the code doesn't works**     
     }    
}); 
```

注意第三个参数中的 function(data){}。data 表示返回的值，因此您可以使用它来验证您的脚本是否正确运行。您只需返回一个值，可以是任何值，我使用 0 和 1 作为真或假。

所以通过改变回调

```
if(data ==1) location.reload();
else alert("something went wrong"); 
```

您将能够通知用户出现问题。

jQuery post 是一个了不起的东西，回调也是很棒的工具..enjoy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:44:28.437

也许是这样的？

```
 $("#fileupload").change(function() {
        if ($("#fileupload").val().length > 0) {
            $.post("ReadExcel.jsp", {
                data: {
                   'variable-name' : $("#fileupload").val()
                },
                processId: < %= processId % >
            });
            alert($("#fileupload").val()); // **If I remove this alert, then the code doesn't works** 
        }
        location.reload();
    });​ 
```

# c++ - QT QNetworkAccessManager and Signals

> ID：12963328
> 
> 赞同：2
> 
> 时间：2012-10-18T20:38:00.413
> 
> 标签：c++, qt

I have a class (RequestHandler) that I call from my main Application class to call various web services. Once a service has completed the class sends a Signal back to the calling class to say that it has finished(possibly with QString message). I have the Signal working in a test method but the QNetworkAccessManager is not working at all. I am quite new to QT and C++. Thanks for your help.

// RequestHandler.h

```
#ifndef REQUESTHANDLER_H_
#define REQUESTHANDLER_H_

#include <QNetworkAccessManager>
#include <QUrl>
#include <QNetworkRequest>
#include <QNetworkReply>
#include <QOBJECT>
#include "MainAppClass.hpp"

class RequestHandler : public QObject
{
    Q_OBJECT

public:
    explicit RequestHandler(QObject *parent = 0);
    void validateRegistration(QString reg);
    void onStatusUpdateCompleted();
    void sayHi();

signals:
    void sendSignal(QString txt);
private:
    QNetworkAccessManager* manager;
    QObject* thisObj;

public slots:
    void onRequestCompleted();
};

#endif /* REQUESTHANDLER_H_ */ 
```

RequestHandler.cpp

```
#include "RequestHandler.h"

RequestHandler::RequestHandler(QObject *parent) : QObject(parent)
{
    thisObj= parent;
}
void RequestHandler::validateRegistration(QString reg) {
    QNetworkRequest request;
    request.setUrl(QUrl("the_registration_url"));
    manager = new QNetworkAccessManager();
    QNetworkReply *reply = manager->get(request);
    connect(reply, SIGNAL(finished()), this, SLOT(onRequestCompleted()));
}
void RequestHandler::onRequestCompleted() {
    // not getting here at all
}
void RequestHandler::sayHi()
{
    // this is working
    QObject::connect(this, SIGNAL(sendSignal(QString)), thisCellCast,   SLOT(recieveValue(QString)));
    emit sendSignal("HERES THE SIGNAL");
} 
```

I am calling this class like this:

```
// test slots and reg
    RequestHandler rh(this);
//working
    rh.sayHi();
// not working
    rh.validateRegistration("test"); 
```

Thanks for your help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:48:11.867

您通常应该`QNetworkAccessManager`通过连接到`error()`和 `finished()` 信号来使用，以便在发生错误时通知您。

在其中构造`QNetworkAccessManager`对象确实是个坏主意，`validateRegistration()`因为它会导致内存泄漏，而您只需要一个此类对象。所以在`RequestHandler`'s 的构造函数中这样做。

```
void RequestHandler::validateRegistration(QString reg)
{
   QUrl url("the_registration_url");
   QNetworkRequest request(url);
   QNetworkReply *reply = manager->get(request);
   connect(reply, SIGNAL(finished()), SLOT(onRequestCompleted()));
   connect(reply, SIGNAL(error(QNetworkReply::NetworkError)),
           SLOT(onError(QNetworkReply::NetworkError)));
}

void RequestHandler::onRequestCompleted()
{
   qDebug() << "Request succeeded";
}

void RequestHandler::onError(QNetworkReply::NetworkError code)
{
   qError() << "Request failed with code " << code;
} 
```

还要确保你在某处调用了 QApplication::exec() ，这样你就可以运行主事件循环。

# jquery - 一个水平滚动DIV的jquery移动分页

> ID：12963330
> 
> 赞同：1
> 
> 时间：2012-10-18T20:38:14.803
> 
> 标签：jquery, mobile, pagination, swipe

我想创建一篇文章并将其分成具有列的页面 - 垂直模式为 2 个，水平模式为 3 个。用户应该能够从一个页面移动到另一个页面（就像 iOS 上的许多杂志类应用程序一样）。jquery 移动插件“分页”正是我正在寻找的，但对于单独的页面： http: [//filamentgroup.com/lab/jquery_mobile_pagination_plugin/](http://filamentgroup.com/lab/jquery_mobile_pagination_plugin/)。要创建一个根据屏幕大小和方向重新流动的列布局，我需要创建一个长的水平`DIV`滚动到右侧（然后回到左侧）。如何实现这种滑动手势？

# ruby-on-rails - 嵌套模型/表单不创建条目

> ID：12963336
> 
> 赞同：0
> 
> 时间：2012-10-18T20:38:33.703
> 
> 标签：ruby-on-rails, ruby, rails-activerecord, nested-forms

在研究 ruby​​ 的嵌套模型时，我遇到了一个问题。

考虑以下场景，

我有以下型号：

*   作者
*   书

具有以下规格：

**作者：**

```
class Author < ActiveRecord::Base
  attr_accessible :name
  has_many :books, dependent: :destroy

  accepts_nested_attributes_for :books #I read this is necessary here: http://stackoverflow.com/questions/12300619/models-and-nested-forms

  # and some validations...
end 
```

**书：**

```
class Book < ActiveRecord::Base
  attr_accessible :author_id, :name, :year
  belongs_to :author

  #and some more validations...
end 
```

**我想为作者添加一本书。这是我的作者控制器：**

```
def new_book
  @author = Author.find(params[:id])
end

def create_book
  @author = Author.find(params[:id])
  if @author.books.create(params[:book]).save
    redirect_to action: :show
  else
    render :new_book
  end
end 
```

**这是我尝试这样做的形式：**

```
<h1>Add new book to <%= @author.name %>'s collection</h1>
<%= form_for @author, html: { class: "well" } do |f| %>
    <%= fields_for :books do |b| %>
        <%= b.label :name %>
        <%= b.text_field :name %>
        <br/>
        <%= b.label :year %>
        <%= b.number_field :year %>
    <% end %>
    <br/>
    <%= f.submit "Submit", class: "btn btn-primary" %>
    <%= f.button "Reset", type: :reset, class: "btn btn-danger" %>
<% end %> 
```

**问题：** 当我输入数据并单击“提交”时，它甚至会将我重定向到正确的作者，但它不会为该作者保存新记录。经过大量研究，我似乎无法在这里找到我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:43:53.960

将 authors_controller 更改为：

```
def new_book
  @author = Author.find(params[:id])
  @book = Book.new
end 
```

您的表格：

```
<h1>Add new book to <%= @author.name %>'s collection</h1>
<%= form_for ([@author, @book]), html: { class: "well" } do |f| %> 
```

而且，routes.rb

```
resources :authors do
  resources :books
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:54:33.973

你错过了几件事。

控制器：

```
...
def new_book
  @author = Author.find(params[:id])
  @author.books.build
end
... 
```

看，它`f.fields_for`不仅仅是`fields_for`：

```
<%= f.fields_for :books do |b| %>
  <%= b.label :name %>
  <%= b.text_field :name %>
  <br/>
  <%= b.label :year %>
  <%= b.number_field :year %>
<% end %> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:35:26.247

您还需要`:nested_attributes_for_books`在 Author 模型上添加可访问的方法。Author 控制器上的 create 方法不需要添加任何代码即可开始。

**注意：**您将 Books 控制器设置为在成功时呈现“books#show”。如果应用程序将您重定向到作者，这意味着**作者控制器**正在处理书籍的创建，除非您将其设置为重定向到作者而不是书籍。

# javascript - 数组字符串未被识别为数组字符串

> ID：12963338
> 
> 赞同：0
> 
> 时间：2012-10-18T20:38:47.627
> 
> 标签：javascript, jquery, arrays, jquery-ui

我正在尝试使用 jQueryUI 的 AutoComplete 小部件来创建一个搜索输入，人们可以在其中输入名称并自动找到他们正在寻找的内容。

我的服务器后端返回以下内容：

```
$.get("http://localhost/academico/materias/listnames", function(data){
    $('.materiaPicker').autocomplete({
            // An example from jQueryUI documentation: 
            // source: [ "c++", "java", "php", "coldfusion", "javascript", "asp", "ruby" ]

            // This is the actual returned in 'data': ["Introduccion a Marketing ","Gerencia de Preparacion y Evaluacion de Proyecto","Gerencia Estrategica"]
            source: data
        });
    }); 
```

使用 Firebug，这是服务器响应：

```
["Introduccion a Marketing ","Gerencia de Preparacion y Evaluacion de Proyecto","Gerencia Estrategica"] 
```

每当我在“自动完成”框中键入内容时，都会触发一个请求，如下所示：

```
http://localhost/academico/programaofrecidos/%5B%22Introduccion%20a%20Marketing%20%22,%22Gerencia%20de%20Preparacion%20y%20Evaluacion%20de%20Proyecto%22,%22Gerencia%20Estrategica%22%5D?term=gera 
```

就好像数据数组没有被重新转换为正确的数组一样。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T03:54:22.090

似乎响应被解释为字符串，然后自动完成使用它来检索自动完成。

URL 不以 http:// 开头，因此被认为是相对 URL，然后使用基本 URL 作为前缀。

所以你有了

```
 http://localhost/academico/programaofrecidos/%5B%22Introduccion%20a%20Marketing%20%22,%22Gerencia%20de%20Preparacion%20y%20Evaluacion%20de%20Proyecto%22,%22Gerencia%20Estrategica%22%5D?term=gera. 
```

和

```
http://localhost/academico/programaofrecidos/ 
```

作为基本路径和

```
%5B%22Introduccion%20a%20Marketing%20%22,%22Gerencia%20de%20Preparacion%20y%20Evaluacion%20de%20Proyecto%22,%22Gerencia%20Estrategica%22%5D 
```

你是“数组”（实际上是一个代表数组的字符串）的 URL 编码的。

Intelligent Guess 可能还不够，在调用中将**dataType**附加到“json”，并最终在服务器端附加**JSON 标头**。

# scala - 在 List 中使用自定义 scala 类型

> ID：12963347
> 
> 赞同：5
> 
> 时间：2012-10-18T20:39:47.407
> 
> 标签：scala, custom-type, typelist

我正在寻找一个可以代表数据大小（字节，KB ...）的类型系列。为此，我们的想法是构建一个基本类型，使其具有基于以下的实际尺寸：

```
 type SizeUnit = Int
  type B = SizeUnit
  type KB = SizeUnit
  type MB = SizeUnit
  type GB = SizeUnit
  type TB = SizeUnit
  type PB = SizeUnit
  type EB = SizeUnit
  type ZB = SizeUnit
  type YB = SizeUnit 
```

有一个有序列表：

```
val sizes = List(B, KB, MB, GB, TB, PB, EX, ZB, TB) 
```

并有一个转换方法，它采用目标类型，找到它们之间的索引差异，并乘以 1024 的差异幂。所以：

```
def convertTo(targetType: SizeUnit): SizeUnit ={
  def power(itr: Int): Int = {
    if (itr == 0) 1
    else 1024*power(itr-1)
  }

  val distance = sizes.indexOf(targetType) - sizes.indexOf(this)
  distance match {
    //same type - same value
    case 0 => targetType
    //positive distance means larget unit - smaller number
    case x>0 => targetType / power(distance)
    //negative distance means smaller unit - larger number and take care of negitivity 
    case x<0 => targetType * power(distance) * (-1)
  }  
} 
```

在我检查方法的有效性之前，我遇到了一些问题（因为我是 Scala 的新手）：

*   有没有办法创建一个包含类型而不是值的列表（或任何其他 Seq）？或者更确切地说 - 类型作为值？
*   如果我理解正确，类型不会超出编译范围。这是否意味着在运行时，如果我将 GB 值传递给现有 KB，它无法破译类型？

谢谢你，埃胡德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T06:34:03.947

所有这些类型都只是类型别名，而不是独立类型。

```
scala> type SizeUnit = Int
defined type alias SizeUnit

scala> type B = SizeUnit
defined type alias B

scala> type KB = SizeUnit
defined type alias KB

scala> (3 : KB) == (3 : B)
res0: Boolean = true 
```

类型别名只是同一类型的不同名称。因此，即使您可以编写它，您的列表也将等同于编写：

```
val sizes = List(Int, Int, Int, Int, Int, Int, Int, Int, Int) 
```

同样，您永远不能使用这些类型来编写一个需要以 MB 为单位的数量的函数，因为所有这些类型都是相同的。

要将 B、KB、MB 等分离为不同“种类”的整数，您需要它们是 的子类型`Int`，而不是`Int`. But`Int`是最终类型，因此无论如何您都不能对其进行子类型化。

一个更好的方法是只让`Int`表示一个原始数字，而不是实现一个代表一个单位`Int` *的*类型。您可以采取多种方法，但我会这样做：

```
abstract class SizeUnit

case object B extends SizeUnit
case object KB extends SizeUnit
case object MB extends SizeUnit

case class Storage(num : Int, unit : SizeUnit) 
```

现在 3 兆字节`Storage(3, MB)`和 17 字节是`Storage(17, B)`. 您可以在任意整数和数量之间进行很好的静态强制分离`Storage`，并且只要您有数量，您就始终将单位作为数据对象（无需能够静态推断它）`Storage`。您可以将*对象* `B`、`KB`、`MB`等放在一个列表中，并对它们进行任何您想要的操作。

或者，您可以使单元对象本身包含有关它们的顺序或它们之间的比率的一些信息，而不是将这些信息存储在外部列表中。

您甚至可以使用此方案通过隐式转换来做一些古怪的事情。像这样的东西浮现在脑海：

```
object SizeableInt {
    // since I want to give the conversion methods the same name as the
    // units, I need different names to refer to the units in the
    // implementation of those methods. If B, KB, etc were defined in
    // a different qualified namespace, this wouldn't be necessary.
    private val _B = B
    private val _KB = KB
    private val _MB = MB

    case class SizeableInt(x : Int) {
        def B : Storage = Storage(x, _B)
        def KB : Storage = Storage(x, _KB)
        def MB : Storage = Storage(x, _MB)
    }

    implicit def makeSizeableInt(x : Int) : SizeableInt = SizeableInt(x)
} 
```

有了这个，一旦你导入了隐式，你可以简单地写一些东西，比如`4 MB`or`123456789 B`而不是`Storage(4, MB)`or `Storage(123456789, B)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:13:12.007

在 Scala 中，类型不是值。

您可能应该为您的用例查看[单例对象](https://stackoverflow.com/questions/4112088/why-are-singleton-objects-more-object-orientated/4112864#4112864)。

# c# - 我怎样才能找到整数中9的数量

> ID：12963348
> 
> 赞同：7
> 
> 时间：2012-10-18T20:39:59.950
> 
> 标签：c#

我有以下方法，它应该在整数中找到 9 的总数，该方法用于根据 9 的数量检索员工的合同类型。我尝试了以下类：-

```
public class EmployeeCreditCards
{
    public uint CardNumber(uint i)
    {
        byte[] toByte = BitConverter.GetBytes(i);

        uint number = 0;
        for (int n = 0; n < toByte.Length; n++)
        {
            if (toByte[i] == 9)
            {
                number = number + 1;
            }
        }
        return number;
    }
} 
```

我试图找出传递的整数中有多少个 9，但上述方法将始终返回零。知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T20:42:31.823

你可以用一点 linq 做到这一点：

```
public int GetAmountOfNine(int i)
{
    return i.ToString().Count(c => c.Equals('9'));
} 
```

但是一定要添加`using System.Linq;`到cs文件中。

您的答案不起作用，因为您正在转换为字节，将数字转换为字节不会为每个数字生成一个字节[（通过[@Servy](https://stackoverflow.com/users/1159478/servy)）]。因此，如果您将数组中的每个字节都写入控制台/调试，您将看不到您的号码。

**例子：**

```
int number = 1337;
byte[] bytes = BitConverter.GetBytes(number);

foreach (var b in bytes)
{
    Console.Write(b); 
} 
```

**安慰：**

> 57500

但是，您可以将 int 转换为字符串，然后检查字符串中的每个字符是否为 9；

```
public int GetAmountOfNineWithOutLinq(int i)
{
    var iStr = i.ToString();
    var numberOfNines = 0;
    foreach(var c in iStr)
    {
        if(c == '9') numberOfNines++;
    }
    return numberOfNines;
} 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-10-18T20:44:19.840

一个经典的解决方案如下：（可能这是**最快的算法**找到解决方案，它只需要**O(log n)**时间。）

```
private int count9(int n)
{
     int ret = 0;
     if (n < 0)
        n = -n;
     while (n > 0)
     {
         if (n % 10 == 9) ++ret;
         n /= 10; // divide the number by 10 (delete the most right digit)
     }
     return ret;
} 
```

**这是如何运作的？** 考虑一个例子，n = 9943

现在*ret* = 0。

n % 10 = 3，其中 != 9

n = n / 10 = 994

n % 10 = 4 != 9

n = 99

n % 10 = 9，所以 ret = 1

n = 9

n % 10 = 9，所以 ret = 2

n = 0

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T20:43:48.873

尝试

```
int numberOfNines = number.ToString().Where(c => c == '9').Count(); 
```

由于字符串实现了`IEnumerable<char>`，因此您可以将 LINQ 直接应用于字符串，而无需先将其转换为字符枚举。

* * *

**更新**

将 转换`uint`为字节数组不会按预期方式工作，因为`uint`不会直接存储您的数字的十进制数字。该数字存储为一个跨越四个字节的二进制数。A`unit`总是有四个字节，即使你的数字有 9 个十进制数字。

您可以将数字转换为字符串以获得其十进制表示。

# javascript - 提示 JavaScript If Else Unexpected Token else

> ID：12963350
> 
> 赞同：7
> 
> 时间：2012-10-18T20:40:05.893
> 
> 标签：javascript, if-statement, syntax-error, prompt

我正在使用 Code Academy 自学 JavaScript，并且正在尝试编写一些简单的代码，以便当提示提出问题时，用户回复会给出响应。

例子。

```
prompt says "what's your favourite colour?"

user says "blue"

response "that's the same colour as the sky!" 
```

但是当我尝试添加不同的选项时，我得到了语法错误：意外标记其他。

我试着这样做，这样如果我问了一个问题，回复就会得到回应，但其他任何事情都会得到回应。

这是代码。

```
prompt("what do you want?");

if ("coke");
{console.log ("no coke, pepsi.")};
else
console.log ("pepsi only.")}; 
```

如果有人有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T20:49:13.927

免责声明：我不为可口可乐工作。

`prompt`如果您想稍后使用它，您需要保存它的返回值。此外，您还有一些语法错误需要更正：

```
var answer = prompt('what do you want?');

if (answer === 'coke') {
    console.log('you said coke!');
} else {
    console.log('why didn\'t you say coke!?');
} 
```

当您获得更多案例时，您还可以使用开关：

```
var answer = prompt('what do you want?');

switch (answer) {
    case 'coke':
        console.log('you said coke!');
        break;
    default:
        console.log('why didn\'t you say coke!?');
        break;
} 
```

或者一个对象，因为大多数人更喜欢这样切换：

```
var answer = prompt('what do you want?');

var responses = {
    coke: 'you said coke!',
    defaultResponse: 'why didn\'t you say coke!?'
};

console.log(responses[answer] || responses.defaultResponse); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T20:41:37.267

if 结尾不需要分号。而是这样做：

```
if ("coke") {
    console.log ("no coke, pepsi.");
} else {
    console.log ("pepsi only.");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T20:41:31.233

删除尾随分号：

```
prompt("what do you want?");

if ("coke") {
    console.log ("no coke, pepsi.");
} else {
    console.log ("pepsi only.");
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:42:18.547

大括号后有一个分号。尝试：

```
var ans = prompt("what do you want?");

if (ans == "coke") {
    console.log ("no coke, pepsi.");
} else {
    console.log ("pepsi only.");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T20:43:45.007

```
var name = prompt("what do you want?");  
if (name == "coke") 
{
console.log ("no coke, pepsi.")
}
else 
{
console.log ("pepsi only.")
} 
```

像上面一样

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-01T20:57:41.640

实际上不要做

```
 if (ans == "whatever") {
    console.log ("whatever");
} else {
    console.log ("whatever.");
} 
```

做

```
 if (ans == "whatever") {
    confirm ("whatever");
} else {
    confirm ("whatever.");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-02-27T08:56:40.980

A`variable`需要被识别。`"if" "else"`语句之间的括号和分号也是有问题的。我不确定`console log`，但如果你想要一个**弹出**警报试试这个：

```
var brand = prompt ('what do you want?');
if (brand="coke") {
   alert ("no coke, pepsi.")
}else {
   alert ("pepsi only.")
}; 
```

免责声明：我充其量是新手，只是碰巧调试了一个类似的问题。希望能帮助到你。

# php - 在php中调用几种方法丢失数据 - OOP

> ID：12963354
> 
> 赞同：0
> 
> 时间：2012-10-18T20:40:24.617
> 
> 标签：php, oop, instantiation

也许这是一个非常简单的问题，但我在 OOP 基础知识中遗漏了一些东西。假设我必须 php 文件，比如 file1 和 file2。file1 实现了类 Class 中的一个类，并在后者的一些方法中，比如 MethodA。在 MethodA 中，我从 Object 类（来自另一个文件 3）中实例化一个类，比如说 $object，然后我调用一个方法，比如说 MethodB，它将实例化 $object 作为参数，并处理设置一个属性的值实例化 $object。因此，该方案如下：

```
class Class{

    public function MethodB($object){

        $param
        ...
        $object->setValue($param);
        ...

    }

    public function MethodA(){

        $object = new Object;
        ...
        $this->MethodB($object);
        ...
        $object->getValue();
    }

} 
```

现在的问题是我无法取回 的值`$object->getValue($param)`，问题是为什么？

# image-processing - 如何从位图字体中提取单个字形？

> ID：12963357
> 
> 赞同：0
> 
> 时间：2012-10-18T20:40:30.513
> 
> 标签：image-processing, fonts, bitmap-fonts

我有一个位图字体表，我想将每个字形作为自己单独的图像。我是否只需要手动找到每个字形的宽度并逐个提取它们，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:44:43.790

如果你只打算做一次，一个快速而简单的方法是在一个窗口中显示每个字符并进行屏幕截图，然后将该图像分成几块。如果您使用可以识别制表符的东西，您可以使它们均匀分布，这样您就不必测量多个字符。

# validation - HTML 验证错误：元素 a 上的属性 rel 的值工具提示错误：未注册关键字工具提示

> ID：12963361
> 
> 赞同：4
> 
> 时间：2012-10-18T20:40:47.850
> 
> 标签：validation, rel

我应该关注以下 HTML 验证错误吗？

```
 …rel="tooltip" data-placement="bottom" data-original-title="Permalink"></a></li>
        Syntax of link type valid for <a> and <area>:
        A whitespace-separated list of link types listed as allowed on <a> and <area> in the HTML specification or listed as an allowed on <a> and <area> on the Microformats wiki without duplicate keywords in the list. You can register link types on the Microformats wiki yourself. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-13T07:59:46.847

“rel”值工具提示不是 html 5 中的有效属性。

`rel`在您的代码中用属性替换属性`data-rel`（这是绝对有效的）。

**例子：**

`$("a[rel]").tooltip();`至`$("a[data-rel]").tooltip();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:45:56.260

HTML5 中不允许该`rel`值。`tooltip`

您可以使用[`rel`HTML5 规范中列出的值](http://www.w3.org/TR/html5/links.html#linkTypes)，或[微格式 wiki 中的](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)[注册`rel`](http://microformats.org/wiki/existing-rel-values#HTML5_link_type_extensions)值。

请注意，`tooltip`微格式 wiki（在[POSH 使用](http://microformats.org/wiki/existing-rel-values#POSH_usage)部分）中列出了这一点，但未在“HTML5 链接类型扩展”部分中列出。

# asp.net-mvc - 使用 routes.MapPath 来适应缺少的 URL 参数

> ID：12963363
> 
> 赞同：1
> 
> 时间：2012-10-18T20:40:53.633
> 
> 标签：asp.net-mvc, model-view-controller

我有一个 MVC 网站，它曾经使用以下标准格式的 URL：Controller/Action。

最近，我将其更改为： `Site/Controller/Action.`

问题是，有几个指向我网站的链接遵循旧格式，我想相应地重定向它们。

例如：`mydomain.com/Home/CustomerSearch`现在应该去`mydomain.com/Online/Home/CustomerSearch`

而：`mydomain.com/AffiliatesHome/CustomerSearch`现在应该去`mydomain.com/Affiliate/AffiliatesHome/CustomerSearch`

我怎样才能让它通过添加额外的路由来处理重定向，这取决于他们进来的链接？

我正在使用的当前路由是：

```
 routes.MapRoute(
      "Default", // Route name
      "{site}/{controller}/{action}/{id}",              
      new {site="IS", controller = "Home", action = "Index", id = UrlParameter.Optional }
   ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:36:07.357

由于我在您的旧 URL 映射中没有真正看到架构，我建议添加与旧 Controller/Action 架构匹配的路由并将它们映射到新的 Site/Controller/Action 路由架构。

所以你可以添加以下路线

```
routes.MapRoute(
   "LegacyHome", 
   "Home/{action}/{id}", 
   new { site="Online", controller = "Home", action = "Index", id = UrlParameter.Optional } 
);

routes.MapRoute(
  "LegacyAffiliates", 
  "AffiliatesHome/{action}/{id}", 
  new { site="Affiliate", controller = "AffiliatesHome", action = "Index", id = UrlParameter.Optional } 
); 
```

从 SEO 的角度来看，这并不理想，因为同一页面有不同的 URL。通过状态码 301 和在该位置传递的新 URL 的永久重定向更适合。

您可以构建一个重定向控制器并使用旧路由将旧 URL 映射到重定向控制器，就像这样

```
routes.MapRoute(
           "LegacyHome",
           "Home/{newAction}/{id}",
           new { controller = "Redirect", action = "Redirect", newSite = "Online", newController="Home", newAction = "Index", id = UrlParameter.Optional }
        ); 
```

重定向控制器的代码

```
 public class RedirectController : Controller
{
    public ActionResult Redirect(string newSite, string newController, string newAction)
    {
        var routeValues = new RouteValueDictionary(
            new
                {
                    site = newSite,
                    controller = newController,
                    action = newAction
                });

        if (RouteData.Values["id"] != null)
        {
            routeValues.Add("id", RouteData.Values["id"]);
        }

        return RedirectToRoutePermanent(routeValues);
    }
} 
```

# java - 如何在运行时从java设置类路径

> ID：12963366
> 
> 赞同：2
> 
> 时间：2012-10-18T20:40:59.340
> 
> 标签：java

> **可能重复：**
> [在运行时设置 CLASSPATH](https://stackoverflow.com/questions/2899804/setting-classpath-during-runtime)

可能重复：[在运行时设置 CLASSPATH](https://stackoverflow.com/questions/2899804/setting-classpath-during-runtime)

要获取我正在使用的类路径：

```
 ClassLoader cl = ClassLoader.getSystemClassLoader();
     URL[] urls = ((URLClassLoader)cl).getURLs();
     for(URL url: urls){
         System.out.println("classpath:"+url.getFile());
         } 
```

有人可以帮助我编写代码以在运行时将 jar 加载到类路径中。

```
ClassLoader currentThreadClassLoader
     = Thread.currentThread().getContextClassLoader();
    URLClassLoader urlClassLoader
     = new URLClassLoader(new URL[]{new File("D:\\ms.jar").toURL()},
                          currentThreadClassLoader);
    Thread.currentThread().setContextClassLoader(urlClassLoader); 
```

这似乎行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:11:18.390

一个完整的（编码的）解决方案将有点超出单个 Stack Overflow 的答案，所以如果您决定编写自己的 ClassLoader，我将概述您需要注意的要点：

1.  类加载器代表一个命名空间（部分），并且由不同类加载器加载的两个其他相同的类不是“相等的”。这意味着在类加载中潜伏着一些危险，特别是单例突然不再那么单一，以及演员阵容意外失败。
2.  在尝试自己做任何事情之前，类加载器（应该）以委托给“父”加载器的模式工作（见上文）。
3.  类加载和链接是两个不同的步骤（尽管可以在博客文章/在线 Java 文章中找到类加载器的示例实现，但为简单起见，将两者合二为一）因此，您不应假设如果父加载器已加载它还加载了所有依赖项的类...
4.  这意味着如果加载器 A 加载的类 A 引用了加载器 A 或其任何父级都无法加载的类 B，则会出现问题：类 A 可能在加载器 A 中加载得很好，但在使用时它会失败，因为加载器 A无法完全解决（链接）它。
5.  并且您应该确保您的类加载器以同步的方式加载类，否则在步骤#1 中提示的问题可能会从由于类加载器的重复到使用相同类加载器的多个线程的重复...

注意：在您的程序的一些包装脚本/批处理文件中使用该开关要容易**得多。**`-cp`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:12:10.247

从[`ClassLoader#getSystemClassLoader()`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getSystemClassLoader%28%29)文档：

> 此方法首先在运行时启动序列的早期调用，此时它创建系统类加载器并将其设置为调用线程的上下文类加载器。

当您这样做时`Thread.currentThread().setContextClassLoader(urlClassLoader)`，您正在更改当前线程中的引用，而不是其中的引用`ClassLoader` （并且您无法更改此引用），因此从那时起您应该依靠当前线程的新类加载器来加载您的类有类似的东西：

```
Thread.currentThread().getContextClassLoader().loadClass(...) 
```

# android - 基于一个代码库/项目创建演示版和完整版应用程序

> ID：12963369
> 
> 赞同：5
> 
> 时间：2012-10-18T20:41:17.737
> 
> 标签：android, build, android-library, conditional-compilation

我使用 Eclipse 在一个项目中开发了一个 Android 应用程序 - 它是结构化的（来自 iPhone），因此一个常量定义了它是演示版还是完整版。

现在我遇到的问题是，每次我想创建演示版本时，我都需要更改常量，但还需要使用不同的包名称制作项目的副本。

显然，原始完整版中的更改代码需要复制到演示中，否则每次提交应用程序时我都必须重新创建演示应用程序。

我看到了三种可能的方法：

1\. 虽然我研究了图书馆项目，但我仍然不清楚这在这种情况下如何真正提供一个好的解决方案。

例如，如果我有带有活动结构的完整版本：

```
A1
A2
A3 
```

使用实用程序类 U1、U2

当然 U1 和 U2 可以在一个库项目中并从两个项目中引用 - 但是需要复制活动、strings.xml、图形、布局（或者还有其他我看不到的方式？）这似乎没有是一个很好的前进方式，不幸的是，在提出这种方法时，在关于这个主题的类似问题中没有得到解释。

2\. 另一种方法是根据不同的构建设置（类似于 iPhone）创建不同的包名称，但是，这在 Eclipse 中似乎是不可能的，而不是通过使用一些外部脚本（老实说，我宁愿避免，因为它似乎很容易出错）同时还必须在 Eclipse 之外调用编译

3\. 可能最直接的方法（目前也是很少的努力）是手动复制项目，更改一个常量，重命名包并在每次提交时编译/导出。然而，这似乎相当“基本”，而且看起来并不专业（与 iPhone/xCode 构建设置/目标解决方案相比）

最好的方法是什么（需要最少的更改并且仍然稳定且易于使用）？

非常感谢！

编辑

对于尝试过 tim 解决方案的每个人 - 它工作正常，但是我遇到了自定义属性的问题。

检查这个：[How to solve Android Libraries custom attributes and package name remapping during build?](https://stackoverflow.com/questions/8087744/how-to-solve-android-libraries-custom-attributes-and-package-name-remapping-duri) 它将解决图书馆的问题

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:58:47.627

我目前正在eclipse中这样做，这并不难。

1.  将现有源转换为库项目。

2.  创建两个新项目，免费和付费。

3.  将图书馆项目包括在免费和付费项目中。

免费/付费项目中不需要有单一的活动或资源。您所需要的只是一个清单，每个清单都引用了您图书馆中的活动。我的免费和完整项目目前没有任何类型的单一 java、资源或布局文件，它只是一个引用库中活动的清单。

我对两个项目使用完全相同的代码，并通过以下方式区分它们：

```
if(getApplicationContext().getPackageName().equals("full version package name")) {
    //do full stuff
} else {
    //do free stuff
} 
```

我遇到了一些问题，特别是如果您已经在市场上发布了您的应用程序：

*   如果您更改任何活动的全名/路径，它将从您的主屏幕上消失。因此，如果您的库具有与现有版本不同的包名称，您将丢失任何主屏幕图标。它们可以由用户替换，但这并不理想。
*   类似的 appwidgets，如果你改变他们的接收者名字，他们会在升级时消失。
*   在任何情况下，您都不得更改已发布应用程序的包名称。

如果您已经发布了免费版和专业版，那就有点遗憾了，因为活动路径需要更改为通用库路径，并且您无法重命名已发布的包以匹配库路径。所以有人将不得不失去他们现有的图标。

就我而言，我在拆分它们之前只发布了一个免费版本，并且我能够使用与免费版本*相同的包名称*来命名库。我怀疑你是否被允许包含一个与包装器包具有相同包名的库，但显然可以这样做（对我来说很好）。

所以就我而言，我有三个项目：

*   核心库：包名：com.myname.myapp
*   免费版：包名：com.myname.myapp
*   专业版：包名：com.myname.myapp.Pro

免费和完整版清单添加了名为`com.myname.myapp.ActivityA`or的活动，这些活动`com.myname.myapp.ActivityB`仅存在于库项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T20:50:09.820

我认为最简单的方法是拥有三个项目：

1.  演示
2.  满的
3.  图书馆

演示项目和完整项目都将具有其各自的清单文件中定义的唯一包名称。它们的活动只是将信息捆绑发送到库项目中的主要活动的端口。库项目中的 Activity 将读取传入的 Bundle 以获得必要的参数，以确定它是由演示 Activity 还是由完整 Activity 启动的。然后它将相应地进行。

所以逻辑是这样的：

用户启动演示活动->演示活动创建一个包，其中包含说明它是演示活动的信息->演示活动启动库活动，然后在演示模式下执行程序的其余部分。

或者

用户启动完整的 Activity -> 完整的 Activity 创建一个 Bundle，其中包含表明它是完整的 Activity 的信息 -> 完整的 Activity 启动库 Activity，然后以完整模式执行程序的其余部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-01T08:16:58.197

在 Android Studio 中使用 build.gradle 非常简单。阅读[productFlavors](http://tools.android.com/tech-docs/new-build-system/user-guide)。这是一个非常有用的功能。只需在 build.gradle 中添加以下行：

```
productFlavors {
    lite {
        packageName = 'com.project.test.app'
        versionCode 1
        versionName '1.0.0'
    }
    pro {
        packageName = 'com.project.testpro.app'
        versionCode 1
        versionName '1.0.0'
    }
} 
```

在这个例子中，我添加了两种产品风格：第一种是精简版，第二种是完整版。每个版本都有自己的 versionCode 和 versionName（用于 Google Play 发布）。

在代码中只需检查 BuildConfig.FLAVOR：

```
if (BuildConfig.FLAVOR == "lite") {
   // add some ads or restrict functionallity

} 
```

要在设备上运行和测试，请使用 Android Studio 中的“构建变体”选项卡在版本之间切换： ![在此处输入图像描述](../Images/404e6802c333c56fb02d566c208bdd06.png)

# php - 是否有用于搜索网站源代码的 php 脚本

> ID：12963371
> 
> 赞同：-5
> 
> 时间：2012-10-18T20:41:22.730
> 
> 标签：php, string, search, keyword

基本上我想要一个快速的方法来查看是否有五十个网站有我的 javascript 链接。我需要一个引擎或 php 脚本来搜索网站的源代码以获取我的 javascript 链接。我希望它是包含我的脚本的 url(s) 的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:23:07.513

用您的站点填写数组，并将您想要搜索的内容放入`$adsensecode`变量中。

```
<?php
   $adsensecode = "derpity derp";
   $arr = array("http://site1.com", "http://site2.com", "http://etc.com");
   foreach ($arr as $site) {
      $contents = file_get_contents($site);
      if ( strpos($contents, $adsensecode) !== false ) {
         echo "$site - adsense code found.<br />";
      }
   }
   unset($site); 
?> 
```

# php - curl 认证但没有返回网页

> ID：12963373
> 
> 赞同：1
> 
> 时间：2012-10-18T20:41:29.093
> 
> 标签：php, curl

此脚本 AUTH 成功，但无法正确返回网页，服务器返回。

```
HTTP/1.1 100 Continue HTTP/1.1 303 See Other Date: Thu, 18 Oct 2012
20:36:45 GMT Server:    Apache/2.2.14 (Ubuntu) X-Powered-By:
PHP/5.2.6-3ubuntu4.6 Set-Cookie:
MoodleSessionmain=9b04143933c4ae2564e5be247fc8463d; path=/ Expires:
Thu, 19 Nov 1981 08:52:00 GMT Cache-Control: no-store, no-cache,
must-revalidate, post-check=0, pre-check=0 Pragma: no-cache
Set-Cookie: MoodleSessionTestmain=Qf2kfwifF3; path=/ Set-Cookie:
MOODLEID_main=deleted; expires=Wed, 19-Oct-2011 20:36:44 GMT; path=/
Set-Cookie: MOODLEID_main=%25E2%25C2%2519C%25BDg%25B1%2502%25E5%255D;
expires=Mon, 17-Dec-2012 20:36:45 GMT; path=/ Location:
http://main.ingeniat.com/my/index.php Vary: Accept-Encoding
Content-Length: 202 Connection: close Content-Type: text/html
Set-Cookie: SERVERID=guia5; path=/ HTTP/1.1 200 OK Date: Thu, 18 Oct
2012 20:36:45 GMT Server: Apache/2.2.14 (Ubuntu) X-Powered-By:
PHP/5.2.6-3ubuntu4.6 Expires: Cache-Control: private, pre-check=0,
post-check=0, max-age=0 Pragma: no-cache Content-Script-Type:
text/javascript Content-Style-Type: text/css Content-Language: es
Accept-Ranges: none Vary: Accept-Encoding Connection: close
Transfer-Encoding: chunked Content-Type: text/html; charset=utf-8 
```

这是代码

```
$post_fields = array();
$post_fields['username']=$usr;
$post_fields['password']=$pass;

$ch = curl_init($login_url);
curl_setopt($ch, CURLOPT_HEADER, 1);

curl_setopt($ch, CURLOPT_MAXREDIRS, 10);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields );

curl_setopt($ch, CURLOPT_COOKIESESSION, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt");

echo curl_exec($ch);
curl_close($ch); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:58:14.643

CURLOPT_HEADER 没有提到任何关于排除正文的内容。 [http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

但也许您的页面重定向超过 10 次？也许添加

```
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
```

然后发布您的新标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:09:20.950

当您使用数组设置[CURLOPT_POSTFIELDS时，CURL 将请求类型设置为 multipart/form-data 而服务器需要 application/x-www-form-urlencoded，因此您需要在](http://lt1.php.net/manual/en/function.curl-setopt.php)[urlencode的帮助下自己对字符串进行编码](http://lt1.php.net/manual/en/function.urlencode.php)

# android - Android 2.3.6 上的 jquery 移动表单项

> ID：12963374
> 
> 赞同：0
> 
> 时间：2012-10-18T20:41:29.437
> 
> 标签：android, forms, html, jquery-mobile, textfield

我有一个使用 jquery mobile 1.2.0 的带有文本字段和选择字段的申请表。我已经在冰淇淋三明治、果冻豆和 iOS 上测试了我的应用程序。工作正常。但我无法在文本字段中输入任何内容或在 Android 2.3.6 姜饼中选择一个选择字段。

请建议！

# ruby-on-rails - Spree 可以让我在我的电子商务应用程序中拥有“供应商”吗？

> ID：12963382
> 
> 赞同：2
> 
> 时间：2012-10-18T20:41:59.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, spree

我想要做的是创建一个拥有多个供应商的电子商务网站，而不是典型的单一商店应用程序，我（作为用户）去添加一个卖家（Spree 应用程序的所有者）正在销售的产品。

因此，您可以查看所有供应商的概览，然后您可以从多个供应商处购买多种产品。

Spree 是否允许我将其定制到那种程度？

如果是这样，是否有任何文档？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:13:59.607

一种方法（我使用的方法）是为每个项目添加一个“供应商”属性。注意 - 此方法假定每个项目仅由单个供应商销售。如果您实际上有一个市场，各个供应商竞相销售相同的商品，您需要通过添加为每个产品变体定义的“供应商”选项类型来做类似的事情。

每个供应商（新型号）都分配有一个代码，可在设置您的项目时使用（作为属性值或多个变体选项值）。下订单后，您可以使用新的 OrderFulfillment 模型来跟踪各个供应商将用于履行该订单的各种装运（订单中每个供应商的一个 OrderFulfillment 记录）。

这基本上就是您需要的所有模型更改。在控制器区域，您需要修改“购物车”事件机器序列以处理不同供应商的运输方式。在有多个供应商的情况下，您还需要向用户展示供应商的选择（想想亚马逊市场）。

如何处理对不同供应商的付款不是我的项目的一部分，但如果需要，不应该太复杂而无法添加。

关于链接：您应该熟悉本[指南](http://guides.spreecommerce.com/)中讨论的基本 Spree 概念，更具体地说[，这里](http://guides.spreecommerce.com/products_and_variants.html)。您还需要进行一些内部修改（新关联、修改的控制器行为），您可以在[此处](http://guides.spreecommerce.com/logic_customization.html)阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-11T19:22:41.117

我认为你有几个可用的选项。

从本质上讲，您想要一个电子商务应用程序，用户可以在其中注册并列出他们自己的产品，然后有一个用户个人资料页面，人们可以在其中查看和查看该用户的产品，对吗？有些人称之为多租户，如果你用谷歌搜索，你很快就会发现这个疯狂的扩展：[多租户](https://github.com/stefansenk/spree_multi_tenant)

我想做和你一样的事情，我对多租户有点警惕，因为我不得不回滚到 Spree 2-2 稳定（我目前在 2-3）。

此处先前的答案建议您应该创建一个名为 Vendor 的新模型。我会说为什么不更新您现有的用户模型以成为供应商？

我的建议只是在 User 模型和 Spree::Products 模型之间创建关联。通过这种方式，您可以将产品范围限定为单个用户并创建个人资料页面，而无需为每个用户添加新的外国模型和/或不同的管理员。所有的 spree 方法都已附加到您的 User 类，所以我认为一个简单的 belongs_to/has_many 关联会起作用。根本没有测试过，但这就是我的想法。

# vb.net - 通过 CodeDom 实现通用接口

> ID：12963383
> 
> 赞同：2
> 
> 时间：2012-10-18T20:42:10.423
> 
> 标签：vb.net, generics, codedom

当我尝试实现通用接口时，CodeDom 没有为我生成合法的 VB。

这是我生成 VB 代码的 VB 代码。

```
Private Sub RunTest()

    Dim compileUnit = New CodeCompileUnit

    Dim ns As New CodeNamespace()
    compileUnit.Namespaces.Add(ns)
    ns.Imports.Add(New CodeNamespaceImport("System"))
    ns.Imports.Add(New CodeNamespaceImport("System.Collections.Generic"))

    Dim fooCollection = New CodeTypeDeclaration("FooCollection")
    ns.Types.Add(fooCollection)
    fooCollection.TypeAttributes = Reflection.TypeAttributes.Public
    fooCollection.IsClass = True
    fooCollection.BaseTypes.Add(New CodeTypeReference(GetType(System.Object)))
    fooCollection.BaseTypes.Add(New CodeTypeReference( _
        "System.Collections.Generic.IEnumerable" _
        , New CodeTypeReference() {New CodeTypeReference("Foo")} _
    ))

    Dim method = New CodeMemberMethod
    fooCollection.Members.Add(method)
    method.Attributes = MemberAttributes.Private
    method.Name = "GetEnumerator"
    method.ReturnType = New CodeTypeReference( _
        "System.Collections.Generic.IEnumerable" _
        , New CodeTypeReference() {New CodeTypeReference("Foo")} _
    )
    method.PrivateImplementationType = New CodeTypeReference( _
        "System.Collections.Generic.IEnumerable" _
        , New CodeTypeReference() {New CodeTypeReference("Foo")} _
    )

    Dim provider = New Microsoft.VisualBasic.VBCodeProvider
    Dim options = New Compiler.CodeGeneratorOptions
    Dim writer = New IO.StringWriter
    provider.GenerateCodeFromCompileUnit(compileUnit, writer, options)
    Console.WriteLine(writer.ToString)

End Sub 
```

这将产生：

```
Public Class FooCollection
    Inherits Object
    Implements System.Collections.Generic.IEnumerable(Of Foo)

    Function System_Collections_Generic_IEnumerable`1_GetEnumerator() _
    As System.Collections.Generic.IEnumerable(Of Foo) _
    Implements System.Collections.Generic.IEnumerable(Of Foo).GetEnumerator

    End Function

End Class 
```

问题是函数的名称。函数名称中的刻度线不构成合法的函数名称。

似乎在使用 CodeMethodMethod 的 PrivateImplentationType 属性时，Name 属性被用作您正在实现的方法的名称，而不是函数的名称。

您如何明确设置函数名称，或者至少如何使其合法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T09:00:45.693

要获得可编译的输出，只需使用`ImplementationTypes`：我刚刚更改了您的代码的一行（但我包含了一个简单的行供参考，并更正了`ReturnType`）：

```
method.Name = "GetEnumerator"
method.ReturnType = New CodeTypeReference( _
    "System.Collections.Generic.IEnumerator" _
    , New CodeTypeReference() {New CodeTypeReference("Foo")} _
)
method.ImplementationTypes.Add(New CodeTypeReference( _
    "System.Collections.Generic.IEnumerable" _
    , New CodeTypeReference() {New CodeTypeReference("Foo")} _
)) 
```

[似乎没有使用`PrivateImplementationType`. 微软的代码`Microsoft.VisualBasic.VBCodeGenerator.GenerateMethod`（在一个`Friend`不容易被覆盖的类中）迎合`.`'s，用 代替它们，但忘记在 .NET 2.0-3.5 和4.0`_`中迎合。在 Connect 上记录一个错误可能是值得的，包括指出与正在实现的接口上的方法名称相比，方法名称应该是可单独覆盖的。````(Of <type>)`]

您似乎需要 的功能`PrivateImplementationType`来支持非通用`GetEnumerator`. [这](http://pastebin.com/9V1RyDdp)是我对原始代码的简单调整，以生成一个可编译的库，只有关于空代码的警告。此代码仍然存在“问题”，例如在使用`method.Attributes = MemberAttributes.Private`位置时被忽略`PrivateImplementationType`...

# c# - 将客户端添加到组

> ID：12963389
> 
> 赞同：1
> 
> 时间：2012-10-18T20:42:32.743
> 
> 标签：c#, signalr, signalr-hub

我在 ASP.net 应用程序中使用信号器。我希望我的客户在连接时被添加到组中。这样，我可以按组分隔消息。我对以下代码有两个问题

```
public class MyHub : Hub, IDisconnect
{

    private IMyInterface x;
    public MyHub(IMyInterface y)
    {
       x = y;
    }

    public Task Join()
    {
        string group = x.getGroup();
        return Groups.Add(Context.ConnectionId, group);
    }

    public Task Send(string message)
    {
        string group = x.getGroup();
        return Clients[group].addMessage(message);
    }

    public Task Disconnect()
    {
        string group = x.getGroup();
        return Clients[group].leave(Context.ConnectionId);
    }
} 
```

1.  当客户端连接和断开连接时，会自动调用 Join() 和 Disconnect() 方法吗？如果没有，我从哪里打电话最好？
2.  我使用 ninject 来解决我的依赖关系，但它在上面的代码中不起作用。我是否有任何额外的步骤可以让 ninject 与信号器类一起工作？

有人吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T21:05:04.820

> 当客户端连接和断开连接时，会自动调用 Join() 和 Disconnect() 方法吗？如果没有，我从哪里打电话最好？

我不知道 Join 将是一种标准的信号器方法，但是文档中有用于检测客户端与集线器的连接、重新连接和断开连接的[示例。](https://github.com/SignalR/SignalR/wiki/Hubs)

```
public class Status : Hub, IDisconnect, IConnected
{
    public Task Disconnect()
    {
        return Clients.leave(Context.ConnectionId, DateTime.Now.ToString());
    }

    public Task Connect()
    {
        return Clients.joined(Context.ConnectionId, DateTime.Now.ToString());
    }

    public Task Reconnect(IEnumerable<string> groups)
    {
        return Clients.rejoined(Context.ConnectionId, DateTime.Now.ToString());
    }
} 
```

这些会根据客户端行为和您的[配置](https://github.com/SignalR/SignalR/wiki/Configuring-SignalR)自动调用。

# python - 将静态文件加载到 Django

> ID：12963394
> 
> 赞同：0
> 
> 时间：2012-10-18T20:42:50.343
> 
> 标签：python, django

我正在尝试使用将我的 CSS、图像和 javascript 加载到我的 Django 模板中 `{{ STATIC_URL }}`

我在让它工作时遇到问题。以下是相关代码：

网址的.py：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
...
urlpatterns += staticfiles_urlpatterns() 
```

设置.py

```
import os
DEBUG = True
TEMPLATE_DEBUG = DEBUG

PROJECT_ROOT = os.path.realpath(os.path.dirname(__file__))

MEDIA_URL = '/assets/'

STATIC_ROOT = os.path.realpath(os.path.join(PROJECT_ROOT, 'static'))

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    "/Users/Chris/project/static/",
)

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

样式表 URL：

```
<link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}css/style.css"> 
```

如果您需要更多信息，请询问，感谢您的帮助！

**更新：我添加了以下内容以尝试解决此问题。但它仍然存在：**

对于我尝试导入样式表的视图：

```
'context_instance':RequestContext(request), 
```

到 setting.py 文件：

```
TEMPLATE_CONTEXT_PROCESSORS = (
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.contrib.messages.context_processors.messages", 
```

)

如果这有帮助，这是我安装的应用程序：

```
INSTALLED_APPS = (
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'django.contrib.messages',
'django.contrib.staticfiles',
'django.contrib.admin',
'djblog', 
```

)

我的管理员 URLs.py 文件，并指向我的其他 URL 文件：

```
from django.conf.urls.defaults import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Examples:
# url(r'^$', 'blog.views.home', name='home'),
# url(r'^blog/', include('blog.foo.urls')),
url(r'^admin/', include(admin.site.urls)),
(r'^', include('djblog.urls')), 
```

)

我的主要网址文件：

```
from django.conf.urls.defaults import *
from views import *
from models import *
from django.contrib.staticfiles.urls import staticfiles_urlpatterns

urlpatterns = patterns('',
(r'^$', list),
(r'^archive/(?P<archive>\d{1,2})/$', list),
(r'^\d{4}/\d{1,2}/(?P<sl>.*)/$', detail),
(r'^(?P<year>\d{4})/(?P<month>\d{1,2})/$', month),
(r'^(?P<year>\d{4})/$', year),
(r'^category/$', category),
(r'^category/(?P<category>.*)/$', one_category),
(r'^tag/$', tag),
(r'^tag/(?P<tag>.*)/$', one_tag),
)
urlpatterns += staticfiles_urlpatterns() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:18:28.400

我已经解决了我自己的问题。[在朱凯](https://stackoverflow.com/users/853611/kay-zhu)的帮助下

在我看来，我将“context_instance”关键字参数传递给render_to_response，错误。

下面是一个正确使用 context_instance 的例子：

```
def one_tag(request, tag):
    #http://site_name/tag/tag_name
    posts = Post.objects.order_by('-published').filter(tags__name=tag.lower())
    return render_to_response('blog/one_tag.html', 
                              {'posts':posts, 'tag':tag,},
                              context_instance=RequestContext(request)) 
```

这也可能解决您的类似问题。使用以下代码将文件添加到程序目录：

```
def media_url(request):
    from django.conf import settings
    return {'media_url': settings.MEDIA_URL} 
```

这篇博文有很多很好的信息：[http](http://www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/) : //www.b-list.org/weblog/2006/jun/14/django-tips-template-context-processors/ 不过要小心，它是从 2006 年开始的 :)

# php - Magento 从用户购物车中删除优惠券代码

> ID：12963395
> 
> 赞同：2
> 
> 时间：2012-10-18T20:43:07.390
> 
> 标签：php, jquery, magento

我正在尝试构建一个 JQuery .post() 调用，该调用将从 getQuote 模型中删除用户优惠券......我的问题是它不会出错，也不会删除代码。这是我正在做的事情：

```
<?php

$mageFilename =  $_SERVER['DOCUMENT_ROOT'] . '/app/Mage.php';

require_once $mageFilename;
Mage::setIsDeveloperMode(false);
umask(0);
Mage::app('admin');

$session = Mage::getSingleton('checkout/session');
$quote = $session->getQuote();
$error = "fail";

if (isset($_POST['rem_coup'])) { 

    Mage::getSingleton("checkout/session")->setData("coupon_code","");

    //Apply the coupon to quote incase there is already a product in the cart or a quote is already generated
    Mage::getSingleton('checkout/cart')->getQuote()->setCouponCode("")->collectTotals()->save();

   $error = "success";
}

echo $error;

?> 
```

当然它会返回“成功”，但不会删除代码。

这是完整的“removeFromCart.php”文件。我只需要一个简单的“从购物车中删除优惠券代码”脚本，我可以通过 jQuery .post() 调用远程使用它。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:56:50.943

我其实想通了...

```
<?php
$mageFilename =  $_SERVER['DOCUMENT_ROOT'] . '/app/Mage.php';

require_once $mageFilename;
Mage::setIsDeveloperMode(true);
umask(0);
Mage::app('*******_english');

$error = "fail";

if (isset($_GET['rem_coup'])) { 
        Mage::getSingleton('core/session', array('name'=>'frontend'));
        Mage::helper('checkout/cart')->getQuote()->setData('coupon_code','')->save();  
        $error = "success";
}
?> 
```

@ Slayer Birden——你基本上是对的。我需要获取核心/会话。但是，对于我的结帐/购物车，我`Mage::helper`也不需要`Mage::getSingleton`。这是 Ajax 调用的工作版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:46:35.263

由于您使用单独的脚本来处理 Magento，因此您需要正确启动会话才能使用 Magento 的会话。尝试在之后插入下一个代码`Mage::app()`：

```
Mage::getSingleton('core/session', array('name' => 'frontend'))->start(); 
```

# knockout.js - 使用带有计算函数的 KnockoutJS 绑定到 UI

> ID：12963398
> 
> 赞同：0
> 
> 时间：2012-10-18T20:43:18.533
> 
> 标签：knockout.js

我有这个 ViewModels 的层次结构

```
Dashboard
 - Layout
   - Columns[] 
```

我也有像这样结构的小部件的概念

```
WidgetInstance[]
  WidgetInstance
  - InstanceId [integer]
  - Layout
    - Column [integer]
    - Order [integer] 
```

本质上，这些小部件都将绑定到`Column[]`它们所属的数组值......所以想象一个 trello 风格的界面

![在此处输入图像描述](../Images/381df545e57c40f72d8242679e2f1a14.png)

我希望能够更改 UI 自动更新的 then`WidgetInstance.Layout.Order`或`WidgetInstance.Layout.Column`。到目前为止，我还没有找到有关如何执行此操作的任何信息...

这是我的问题...

1) WidgetInstance[] 是否属于`Dashboard`或是否每个都`Column`需要持有它自己的数组`WidgetInstances`才能工作？

2）在每种情况下如何`data-binding=foreach`查看列表？`WidgetInstance`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:40:20.260

看看[https://github.com/rniemeyer/knockout-sortable](https://github.com/rniemeyer/knockout-sortable)。

最后一个例子，看起来像你在找什么

# logic - 给定短语“以下都不为真”和两个语句应该如何组成布尔逻辑？

> ID：12963402
> 
> 赞同：2
> 
> 时间：2012-10-18T20:43:40.367
> 
> 标签：logic, boolean-logic

## **更新了一个更好的例子

让我们有两个陈述

1.  **（值 > 15）**
2.  **（值 > 25）**

以及具有以下值的项目列表

*   10
*   20
*   30

这就是真值表所给出的

```
Item  Value  (value > 15)  (value > 25)
----  -----  ------------  ------------
1     10     FALSE         FALSE
2     20     TRUE          FALSE
3     30     TRUE          TRUE 
```

## 示例 1

```
Where ALL of the following are TRUE
   value > 15
   value > 25 
```

这个很简单，我们得到以下

```
Where (value > 15) AND (value > 25) 
```

结果是单个值 30

## 示例 2

```
Where NONE of the following are TRUE
   value > 15
   value > 25 
```

这是我不确定要生成什么的地方。

这将是“简单的”，因为它只是整个表达式的 NOT

```
Where NOT ((value > 15) AND (value > 25)) 
```

但是，结果是两个值（10 和 20）

从有人会想到这两个陈述中没有一个是这样的：

```
Where NOT ((value > 15) OR (value > 25)) 
```

结果将是返回 10。

这里 NONE 的正确含义是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:45:36.890

在这种情况下没有意味着不在这两个实例上，并且一起使用。

```
 Where NOT(value > 15) AND NOT (value > 25) 
```

使用德摩根定律，我们可以提取 NOT 来表示：

```
 Where NOT ((value > 15) OR (value > 25)) 
```

这是示例 2 中的第二个语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:59:50.713

您可以通过以下任一方式表示“（a、b 等）都不为真”

```
(NOT a) AND (NOT b) AND (NOT etc) 
```

或者

```
NOT (a OR b OR etc) 
```

要么会工作。

在你的情况下，你可以说`NOT ((value > 15) OR (value > 25))`. 只有10场比赛。

# spring - 将 EJB 3 注入 Spring Bean

> ID：12963405
> 
> 赞同：7
> 
> 时间：2012-10-18T20:43:47.593
> 
> 标签：spring, jboss7.x, ejb-3.1

我正在尝试将 EJB 注入 Spring (3.1.2) 服务（都在**不同**的WAR 中）两者都非常简单（删除方法以简化示例）：

EJB：

```
@Remote
public interface MyBean {
}

@Singleton
public class MyBeanImpl implements MyBean{
} 
```

服务：

```
@Service
public class MyServiceImpl implements MyService{
} 
```

乍一看事情很简单，但我试过了：

```
@EJB(lookup = "java:global/ejbApp/MyBeanImpl!com.my.MyBean")
private MyBean myBean; 
```

它没有用。然后我也尝试了：

```
@EJB(mappedName = "java:global/ejbApp/MyBeanImpl!com.my.MyBean")
private MyBean myBean; 
```

和

```
@Resource(mappedName = "java:global/ejbApp/MyBeanImpl!com.my.MyBean")
private MyBean myBean; 
```

但都没有奏效。

我设法使用以下方法注入我的 EJB：

```
<jee:jndi-lookup id="myBean" jndi-name="java:global/ejbApp/MyBeanImpl!com.my.MyBean" /> 
```

在我的 spring 配置和服务中：

```
@Autowired
private MyBean myBean; 
```

但我真的不喜欢这个解决方案。我想在**一些**注释中包含我的 JNDI 路径，以便能够执行以下操作：

```
@EJB(lookup = MyBean.JNDI_NAME)
private MyBean myBean; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T07:19:26.227

我们找到了非常好的和简单的解决方案。在 spring 配置文件中必须放入：

```
<bean class="org.springframework.context.annotation.CommonAnnotationBeanPostProcessor">
    <property name="alwaysUseJndiLookup" value="true" />
</bean> 
```

这使得 spring 能够在 JNDI 中搜索带有 @Resource 注释的**bean 。**所以现在可以做：

```
@Resource(mappedName = MyBean.JNDI_NAME)
private MyBean myBean; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:55:40.537

您的目标是摆脱 XML 还是在注释中使用 JNDI 名称？如果是前者，我还没有测试过，但应该可以工作：

```
@Configuration
public class EjbCfg {

    @Bean
    public JndiObjectFactoryBean myBean() {
        JndiObjectFactoryBean factory = new JndiObjectFactoryBean();
        factory.setJndiName(MyBean.JNDI_NAME);
        return factory;
    }

} 
```

现在你可以简单地注入：

```
@Autowired
private MyBean myBean; 
```

# desire2learn - 如何在 Desire2Learn 的 Valence API 中创建没有电子邮件地址的用户？

> ID：12963410
> 
> 赞同：1
> 
> 时间：2012-10-18T20:43:57.843
> 
> 标签：desire2learn

如果我想通过 Desire2Learn 的 Valence API 创建一个新用户，但该用户没有外部电子邮件地址，我必须如何提供新用户数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:51:32.837

创建新用户时，必须使用[User.CreateUserData](http://docs.valence.desire2learn.com/res/user.html#User.CreateUserData)结构，如果希望用户没有外部电子邮件地址，则必须为属性提供空值：

```
{"UserName": "Test.User",
 "FirstName": "Test", 
 "MiddleName": "", 
 "LastName": "User", 
 "RoleId": "103", 
 "OrgDefinedId": "ext-test-user", 
 "IsActive": true, 
 "ExternalEmail": null,
 "SendCreationEmail": false} 
```

# android - 如何通过 Intent 将数据从 LoaderManager 传递到另一个活动？

> ID：12963413
> 
> 赞同：0
> 
> 时间：2012-10-18T20:44:07.563
> 
> 标签：android, android-cursorloader

我是一个 Android 新手，我正在尝试更新我的（工作！）使用游标的代码，以便它使用 CursorLoader。我的应用程序从一个带有 ListView 的 Activity 开始，它具有三个选项：Beginning、Intermediate 和 Advanced。根据选择的项目，我想用另一个 ListView 打开第二个 Activity。该 ListView 将从 SQLite 数据库中填充，其中所有项目的级别都为开始。在stackoverflow的其他地方，有人建议我在这两个活动之间插入一个活动来处理实际的数据检索。所以现在我有三个活动。一个有一个具有三个选项的 ListView。那一个通过 Intent 向第二个 Activity 发送一个字符串。第二个活动查询数据库并从与所选级别匹配到 CursorLoader 的所有记录中检索一列。和这里' 我的问题。我想将所有这些数据传递给我的第三个 Activity，以便数据可以显示在 ListView 中。但是如何从 CursorLoader 中获取数据？我想我想做类似的事情：

```
Intent data = new Intent(getApplicationContext(), com.MyKnitCards.project.StitchList.class);
Bundle dataBundle = new Bundle();
dataBundle.getStringArrayList(myData); 
```

其中 myData 是来自 CursorLoader 的数据的 ArrayList。我不知道该怎么做。我想知道是否要使用 LoaderManager 来完成此操作，但我也不知道如何执行此操作。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:49:42.660

我会摆脱进行数据检索的中间人 Activity ，而只是在显示数据的 Activity 中进行。CursorLoader 会在后台自动加载，因此不会冻结您的 UI，这样您就不必担心在活动之间传递数据。

# git - 在 git reset --hard 之后，git local branch 和 origin/master 仍然存在分歧

> ID：12963417
> 
> 赞同：2
> 
> 时间：2012-10-18T20:44:25.630
> 
> 标签：git, version-control

做完之后

```
git reset --hard 
```

我希望看到“HEAD 现在在 hexNumber”，然后“在分支 master 上……没有什么可提交的。相反，我看到

```
 wb316-mac03:MoodTrack student$ git reset --hard
    HEAD is now at ec11193 preparation for merge
    wb316-mac03:MoodTrack student$ 
    wb316-mac03:MoodTrack student$ git status
    # On branch master
    # Your branch and 'origin/master' have diverged,
    # and have 2 and 9 different commits each, respectively.
    #
    nothing to commit (working directory clean) 
```

我想被远程主机中的内容完全覆盖（不重新克隆）。我做错什么了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:48:30.900

您应该添加要重置的提交：

```
$ git reset --hard origin/master 
```

`git reset --hard`将重置为`HEAD`（可能`master`是您的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:46:44.973

如果您想要远程 master 中的内容而不关心分支前面的两个分支，请检查另一个分支，删除 master，然后拉下远程。

```
git checkout -b master_tmp
git branch -D master
git checkout -t origin/master
git branch -D master_tmp 
```

祝你好运。

# html - 为什么这个 iframe 大小不是 100%？

> ID：12963424
> 
> 赞同：2
> 
> 时间：2012-10-18T20:44:49.060
> 
> 标签：html, css, iframe

给定以下包含 iframe 的页面

```
<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" media="screen" href="/public/stylesheets/main.css">
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    </head>
    <body style="min-height: 100; margin: 0px">
        <iframe src="testpage.html" frameborder="0" style="overflow:hidden;height:100%;width:100%" height="100%" width="100%">
    </body>
</html> 
```

当它启动时，iframe 似乎只会从`testpage.html`. 如何让 iframe 显示 的全部内容`testpage.html`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:45:38.907

也将您的`html`和`body`高度设置为 100%。

```
html, body { height: 100%; } 
```

您可能（或可能不需要）还需要设置`display`为`iframe`阻止：

```
iframe { display:block; } 
```

# innerhtml - innerHTML 在从另一个元素动态获取的 HTML 中无法正常工作

> ID：12963434
> 
> 赞同：0
> 
> 时间：2012-10-18T20:45:33.323
> 
> 标签：innerhtml

有一个js动态创建的表。一个按钮触发一个函数，该函数获取表格的第一行 innerHTML。并将其替换为 While raplacing 它采用 div 的样式信息。在这些之后，我也使用 replace() 为 div 添加了一些额外的样式。但是该函数创建并填充 . 是关于百分比宽度还是其他？

示例代码过于混乱。所以我不能在这里粘贴。我正在使用 HTA（HTML 应用程序）和 vbs+javascript。提前谢谢你

# php - 用户下载文件时隐藏文件夹路径

> ID：12963435
> 
> 赞同：1
> 
> 时间：2012-10-18T20:45:34.303
> 
> 标签：php, wordpress, .htaccess

我正在为我的网站使用 wordpress，我的文件夹中有一些壁纸可供下载。但我不希望用户知道文件夹的确切文件位置。因为有下载订阅。

假设我的文件存储在

```
http://www.example.com/wp-content/example.folder/awesome.png 
```

现在如何隐藏文件夹名称`example.folder`并使用任何假名，下载时会出现那个dosent。在这方面真的需要很大的帮助。谁能给我一个好方法。我尝试了一些 wordpress 插件，但对此没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T20:48:09.877

带有 PDF 文档的示例

```
$nameOld = "/public_html/wp-content/example.folder/oldnme.pdf";
$nameNew = "newName.pdf" ;
header("Content-Transfer-Encoding: binary");
header('Content-type: application/pdf');
header("Content-disposition: attachment; filename=$nameNew"); //
readfile($nameOld); 
```

**使用`download.php?img=flower`不带扩展名的图像系统**编辑**`flower`概念证明并显示为图像名称**

 **```
$directory = "/public_html/wp-content/example.folder/";
$types = array("jpg","gif","png");
$ext = null;

if (! isset($_GET['img'])) {
    die("Invalid URL");
}

$nameOld = filter_var($_GET['img'], FILTER_SANITIZE_STRING, FILTER_FLAG_STRIP_HIGH | FILTER_FLAG_STRIP_LOW);
$nameNew = uniqid(basename($nameOld));

// File the file
foreach ( $types as $type ) {
    if (is_file($nameOld . "." . $type)) {
        $ext = $type;
        break;
    }
}

if ($ext == null) {
    die("Sorry Image Not Found");
}
$nameOld .= "." . $ext;
$type = image_type_to_mime_type(exif_imagetype($nameOld));

header("Content-Transfer-Encoding: binary");
header('Content-type: ' . $type);
header("Content-disposition: attachment; filename=$nameNew"); //
readfile($nameOld); 
```**

# ios - EXC_BAD_ACCESS (SIGSEGV) 上的 KERN_INVALID_ADDRESS

> ID：12963439
> 
> 赞同：9
> 
> 时间：2012-10-18T20:45:42.303
> 
> 标签：ios, air, adobe, crash-reports

我有一个适用于 IOS 的 Adob​​e Air 应用程序，它适用于 Windows 和 Android，但似乎在 IOS 上随机挂起和崩溃。发生这种情况时，AIR 调试器不显示任何内容。我从我的 iPhone 中提取了崩溃报告，它在下面。我已经阅读了关于这个主题的其他一些帖子，但它们并不是真正的 AIR 应用程序，所以我希望能得到一些关于我可以从哪里开始的指针。任何帮助深表感谢。

```
Incident Identifier: 75387AA5-1AF2-4E2C-A92D-67174F8C2CDD  
CrashReporter Key:   47377582f4ab79d5f7814a5f67637bf02e00167d  
Hardware Model:      iPhone3,1  
Process:         My App [2719]  
Path:            /var/mobile/Applications/B136A542-E798-4A28-877F-5BBCA7A41361/My App.app/My App  
Identifier:      My App  
Version:         ??? (???)  
Code Type:       ARM (Native)  
Parent Process:  launchd [1]  

Date/Time:       2012-10-18 11:30:31.315 -0400  
OS Version:      iOS 6.0 (10A403)  
Report Version:  104  

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)  
Exception Codes: KERN_INVALID_ADDRESS at 0xf0e33c42  
Crashed Thread:  0  

Thread 0 name:  Dispatch queue: com.apple.main-thread  
Thread 0 Crashed:  
0   libobjc.A.dylib                 0x345eb5b0 objc_msgSend + 16  
1   My App                  0x00d08c4e 0x1000 + 13663310  
2   My App                  0x00b0f0c0 0x1000 + 11591872  
3   My App                  0x00b0e3ec 0x1000 + 11588588  
4   My App                  0x00b0d0d8 0x1000 + 11583704  
5   My App                  0x00b0d014 0x1000 + 11583508  
6   My App                  0x00b0cfe4 0x1000 + 11583460  
7   My App                  0x00886158 0x1000 + 8933720  
8   My App                  0x00886360 0x1000 + 8934240  
9   My App                  0x00893624 0x1000 + 8988196  
10  My App                  0x0089394c 0x1000 + 8989004  
11  My App                  0x00894068 0x1000 + 8990824  
12  My App                  0x00895734 0x1000 + 8996660  
13  My App                  0x00887960 0x1000 + 8939872  
14  My App                  0x00895228 0x1000 + 8995368  
15  My App                  0x0076dcc8 0x1000 + 7785672  
16  My App                  0x0073c640 0x1000 + 7583296  
17  My App                  0x00423308 0x1000 + 4334344  
18  My App                  0x0045eb40 0x1000 + 4578112  
19  My App                  0x0045d518 0x1000 + 4572440  
20  My App                  0x0045d1f0 0x1000 + 4571632  
21  My App                  0x00460260 0x1000 + 4584032  
22  My App                  0x00460420 0x1000 + 4584480  
23  My App                  0x000032e8 0x1000 + 8936  
24  My App                  0x00854b78 0x1000 + 8731512  
25  My App                  0x00855048 0x1000 + 8732744  
26  My App                  0x00854904 0x1000 + 8730884  
27  My App                  0x007cf0c0 0x1000 + 8184000  
28  My App                  0x007bacb4 0x1000 + 8101044  
29  My App                  0x0083855c 0x1000 + 8615260  
30  My App                  0x009c24d8 0x1000 + 10228952  
31  My App                  0x009c2c30 0x1000 + 10230832  
32  My App                  0x000d46fc 0x1000 + 866044  
33  My App                  0x00ce1b14 0x1000 + 13503252  
34  My App                  0x00ce2774 0x1000 + 13506420  
35  My App                  0x008c4540 0x1000 + 9188672  
36  My App                  0x008c524c 0x1000 + 9192012  
37  My App                  0x009a1838 0x1000 + 10094648  
38  QuartzCore                      0x3400806c CA::Display::DisplayLink::dispatch(unsigned long long, unsigned long long) + 156  
39  QuartzCore                      0x34007fc4   CA::Display::IOMFBDisplayLink::callback(__IOMobileFramebuffer*, unsigned long long, unsigned long long, unsigned long long, void*) + 60  
40  IOMobileFramebuffer             0x3a04dfd4 IOMobileFramebufferVsyncNotifyFunc + 152  
41  IOKit                           0x39233446 IODispatchCalloutFromCFMessage + 190  
42  CoreFoundation                  0x34de85d8 __CFMachPortPerform + 116  
43  CoreFoundation                  0x34df3170__CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 32  
44  CoreFoundation                  0x34df3112 __CFRunLoopDoSource1 + 134 
45  CoreFoundation                  0x34df1f94 __CFRunLoopRun + 1380  
46  CoreFoundation                  0x34d64eb8 CFRunLoopRunSpecific + 352  
47  CoreFoundation                  0x34d64d44 CFRunLoopRunInMode + 100  
48  GraphicsServices                0x35acd2e6 GSEventRunModal + 70  
49  UIKit                           0x379aa2fc UIApplicationMain + 1116  
50  My App                  0x008e4594 0x1000 + 9319828  
51  My App                  0x00d03360 0x1000 + 13640544  

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager  
Thread 1:  
0   libsystem_kernel.dylib          0x33add648 kevent64 + 24  
1   libdispatch.dylib               0x392064ec _dispatch_mgr_invoke + 792  
2   libdispatch.dylib               0x391f8df4 _dispatch_mgr_thread$VARIANT$up + 32  

Thread 2 name:  WebThread  
Thread 2:  
0   libsystem_kernel.dylib          0x33adceb4 mach_msg_trap + 20  
1   libsystem_kernel.dylib          0x33add048 mach_msg + 36  
2   CoreFoundation                  0x34df3040 __CFRunLoopServiceMachPort + 124  
3   CoreFoundation                  0x34df1d9e __CFRunLoopRun + 878  
4   CoreFoundation                  0x34d64eb8 CFRunLoopRunSpecific + 352  
5   CoreFoundation                  0x34d64d44 CFRunLoopRunInMode + 100  
6   WebCore                         0x35b48a70 RunWebThread(void*) + 440  
7   libsystem_c.dylib               0x38eaa30e _pthread_start + 306  
8   libsystem_c.dylib               0x38eaa1d4 thread_start + 4  

Thread 3:  
0   libsystem_kernel.dylib          0x33adceb4 mach_msg_trap + 20  
1   libsystem_kernel.dylib          0x33add048 mach_msg + 36  
2   My App                  0x00876520 0x1000 + 8869152  
3   libsystem_c.dylib               0x38eaa30e _pthread_start + 306  
4   libsystem_c.dylib               0x38eaa1d4 thread_start + 4  

Thread 4:  
0   libsystem_kernel.dylib          0x33aed6a4 __semwait_signal + 24  
1   libsystem_c.dylib               0x38eaf3ce nanosleep + 138  
2   My App                  0x00a1fba4 0x1000 + 10611620  
3   My App                  0x00901ce4 0x1000 + 9440484  
4   My App                  0x00901c84 0x1000 + 9440388  
5   My App                  0x00a1fdb8 0x1000 + 10612152  
6   My App                  0x00a1fe0c 0x1000 + 10612236  
7   My App                  0x00a1fb38 0x1000 + 10611512  
8   libsystem_c.dylib               0x38eaa30e _pthread_start + 306  
9   libsystem_c.dylib               0x38eaa1d4 thread_start + 4  

Thread 5:  
0   libsystem_kernel.dylib          0x33aed08c __psynch_cvwait + 24  
1   libsystem_c.dylib               0x38ea2d2a _pthread_cond_wait + 642  
2   libsystem_c.dylib               0x38ea2aa0 pthread_cond_timedwait + 40  
3   My App                  0x00a1ffd4 0x1000 + 10612692  
4   My App                  0x000da46c 0x1000 + 889964  
5   My App                  0x00a1fdb8 0x1000 + 10612152  
6   My App                  0x00a1fe0c 0x1000 + 10612236  
7   My App                  0x00a1fb38 0x1000 + 10611512  
8   libsystem_c.dylib               0x38eaa30e _pthread_start + 306  
9   libsystem_c.dylib               0x38eaa1d4 thread_start + 4  

Thread 6:  
0   libsystem_kernel.dylib          0x33aedd98 __workq_kernreturn + 8  
1   libsystem_c.dylib               0x38e9fcf6 _pthread_workq_return + 14  
2   libsystem_c.dylib               0x38e9fa12 _pthread_wqthread + 362  
3   libsystem_c.dylib               0x38e9f8a0 start_wqthread + 4  

Thread 7:  
0   libsystem_kernel.dylib          0x33aedd98 __workq_kernreturn + 8  
1   libsystem_c.dylib               0x38e9fcf6 _pthread_workq_return + 14  
2   libsystem_c.dylib               0x38e9fa12 _pthread_wqthread + 362  
3   libsystem_c.dylib               0x38e9f8a0 start_wqthread + 4  

Thread 0 crashed with ARM Thread State (32-bit):  
    r0: 0x0a6fc000    r1: 0x37df2920      r2: 0x37df2920      r3: 0x0a6fc000  
    r4: 0xf0e33c3a    r5: 0x079df030      r6: 0x079df438      r7: 0x2fdfe048  
    r8: 0x079df001    r9: 0x0df7ca48     r10: 0x00000008     r11: 0x079df040  
    ip: 0x00e0f1ec    sp: 0x2fdfe034      lr: 0x00d08c53      pc: 0x345eb5b0  
  cpsr: 0x200f0030 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-19T14:49:35.310

在归档项目以供发布时，在 Project->Build Settings 下设置一些参数很重要。请注意，必须为发布配置设置这些设置，以便您分析从应用商店收到的崩溃日志。

*   生成调试符号：是
*   部署后处理：是
*   带链接产品：是
*   调试信息格式：带有 dSym 文件的 DWARF
*   使用单独的条带：是
*   复制期间剥离调试符号：否

您的应用必须使用上述设置存档。一旦重现崩溃，请获取崩溃日志文件。通过转到 Organizer->Devices->Device Logs->Drag the file from finder 将其导入 XCode 管理器并放在这里。当您打开日志时，它应该在您的代码和导致崩溃的行中显示您的函数名称。

请注意，为您的构建正确的 dSym 文件很重要。它必须存在于您的用户目录之一中才能指出正确的代码。如果以上内容不能解决您的问题，请阅读[本文了解相关信息。](http://developer.apple.com/library/ios/#technotes/tn2151/_index.html#//apple_ref/doc/uid/DTS40008184-CH1-SECTION2)

# mysql - 智能：如何在 mysql 中获取已更改字段的行

> ID：12963441
> 
> 赞同：0
> 
> 时间：2012-10-18T20:45:48.827
> 
> 标签：mysql

假设我有以下行：

```
'employee' , 'is_here' , 'ts'
      1    ,    1      ,   22
      2    ,    1      ,   33
      1    ,    0      ,   44
      1    ,    0      ,   55
      2    ,    0      ,   66
      1    ,    0      ,   77
      2    ,    0      ,   88
      1    ,    1      ,   99 
```

有什么方法可以显示某些员工的结果然后`is_here`发生变化？

例如，我想获取员工 #1`is_here`更改的行，因此输出将是：

1,1,22 1,0,44 1,1,99

我想那将是具有挑战性的:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:57:59.607

只要您当时只为一名员工运行查询

```
set @state = -1;

select employee,
       @state := is_here as changed_to,
       ts
  from working
 where employee = 1 
   and (@state = -1 or @state != is_here); 
```

[http://sqlfiddle.com/#!2/a71d8/11](http://sqlfiddle.com/#!2/a71d8/11)

# visual-studio-2010 - 警告 MSB3283：找不到类型库“MSComctlLib”的包装程序集。构建我的应用程序时

> ID：12963442
> 
> 赞同：5
> 
> 时间：2012-10-18T20:45:56.083
> 
> 标签：visual-studio-2010, visual-studio, windows-xp

我有一个已经存在多年的 Visual Studio 解决方案。该项目是一个 Visual Studio 2010 项目，多年来我一直能够编译和运行该项目。此应用程序是一个关键应用程序，我很少需要启动项目并对已发现的错误修复进行细微更改。

今天，我需要做一些研究。我在旧的 Windows XP 开发盒上打开了这个项目，这是我多年来开发的同一台机器。我非常确信这台机器上的任何东西都没有改变，尽管 IT 部门推送了我可能不知道的 Windows 更新的可能性很小。

我打开了我的项目，然后立即点击工具栏上的运行按钮。该应用程序将不再编译。它到达解决方案中的最后一个项目（共 7 个）并给我以下输出：

```
------ Build started: Project: QSApplication, Configuration: Debug Any CPU ------
c:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1558,9): warning MSB3283: Cannot find wrapper assembly for type library "MSComctlLib".
========== Build: 7 succeeded or up-to-date, 1 failed, 0 skipped ========== 
```

我难住了。我没有更改任何项目或构建设置，我怀疑这台机器上是否有任何重大更改。我找不到任何有用的查询这个错误，所以我不知道发生了什么。

有没有人看到这个或知道修复？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-22T18:09:05.143

> 尽管 IT 部门推送 Windows 更新的可能性很小

它不小。今年有*两个安全更新修补了 mscomctl。*也很重要，没有 IT 部门会跳过它们。 [MS12-027](http://technet.microsoft.com/en-us/security/bulletin/MS12-027)于 4 月发布，[MS12-060](http://blogs.technet.com/b/srd/archive/2012/08/14/ms12-060-addressing-a-vulnerability-in-mscomctl-ocx-s-tabstrip-control.aspx)于 8 月发布。特别是四月的更新意义重大，它改变了 COM 服务器的 guid。这意味着互操作库（又名包装程序集）不再有效。

删除并重新添加要修复的依赖项。

请注意，跳过这些更新的客户可能会遇到一些麻烦。你真的应该考虑摆脱依赖。mscomctl 中没有任何东西不能很好地包装在 .NET 框架中，所有 VB6 控件都有很好的替代品。

# jquery - 选择被点击元素的第二个祖先

> ID：12963443
> 
> 赞同：0
> 
> 时间：2012-10-18T20:46:00.777
> 
> 标签：jquery, jquery-ui

如何获得点击元素的第二个祖先？

它什么也不返回： `$(this).parent().parent().find('.TITLE')`, `$(this).closest('.TITLE').text()`

它指的是这段代码：

```
<div class="ELEMENT_LISTY" style="display:none">
<div class="TITLE" id="id_196">sadfsfsdfgds</div>
<div class="BUTTONY PRE">
<div class="POGLAD"></div>
<div class="ZMIEN_NAZWE"></div>
<div class="USUN"></div>
</div>
</div>

function przygotuj_ZmianeNazwy() {
    $(".PRE .ZMIEN_NAZWE,.NEW .ZMIEN_NAZWE").click(function() {

        $("#DIALOG3").dialog({
            resizable: false,
            width: 500,
            modal: true,
            show: 'scale', 
            hide: 'puff',
            buttons: {
                "Dodaj": function() {
                    var el = $("#input_ZmienNazwe").val();
                    if(el !== '' && el !== null) {
                        $(this).dialog("close");
                        var title = $(this).closest('.TITLE').text() // I AM CLICKING ON ELEMENT AMONG MANY, WANT TO SELECT ANCESTOR TEXT FROM THIS I CLICKED ON
                        alert(title);
                        //ajax_zmienNazwe(title);
                    }
                },
                "Anuluj": function() {
                    $(this).dialog("close");
                    $("#input_ZmienNazwe").blur();
                }
            }
        });
        document.getElementById("input_ZmienNazwe").focus();
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:04:14.513

我创建了一个在这里工作的 jsFiddle [http://jsfiddle.net/stJHG/1/](http://jsfiddle.net/stJHG/1/)。您需要使代码适应以下内容：

```
$(".PRE .ZMIEN_NAZWE,.NEW .ZMIEN_NAZWE").click(function() {
    alert($(this).closest('.ELEMENT_LISTY').find('.TITLE').text());        
});​ 
```

`.TITLE`实际上不是元素的祖先，而是`.ZMIEN_NAZWE`有`.TITLE`一个共同的祖先，即`.ELEMENT_LISTY`. 所以你必须选择这个，然后在它的孩子中搜索`.TITLE`.

（另外我不认为你`style="display:none"`在你认为的地方，可点击的元素也被隐藏了）

# java - 序列化 - readObject writeObject 覆盖

> ID：12963445
> 
> 赞同：37
> 
> 时间：2012-10-18T20:46:06.470
> 
> 标签：java, serialization, deserialization

编写了下面的代码后，我现在必须使用 StudentData 中的自定义 readObject() 和 writeObject() 覆盖方法来读取和写入对象的变量。无需使用 defaultWriteObject 或 defaultReadObject 方法来执行此操作。

问题是我不完全理解被要求做什么。我已经阅读[了序列化中 readObject/writeObject 的使用，](https://stackoverflow.com/questions/5911833/uses-of-readobject-writeobject-in-serialization)但我无法理解它。有人能指出我正确的方向吗？

我的代码：

```
import java.io.*; //importing input-output files

class Student implements java.io.Serializable {

    String name; // declaration of variables
    String DOB;
    int id;

    Student(String naam, int idno, String dob) // Initialising variables to user
                                                // data
    {
        name = naam;
        id = idno;
        DOB = dob;
    }

    public String toString() {
        return name + "\t" + id + "\t" + DOB + "\t";
    }

} 
```

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

class StudentData                     //main class
{
    public static void main(String args[]) throws IOException                  //exception handling
    {
        System.out.println("Enter the numbers of students:");
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        int n = Integer.parseInt(in.readLine());

        Student[]  students = new Student[n];

        //Student[]  S=new Student[n];                      // array of objects declared and defined
        for (int i = 0; i < students.length; i++) {
            System.out.println("Enter the Details of Student no: " + (i + 1));             //reading data form the user
            System.out.println("Name: ");
            String naam = in.readLine();
            System.out.println("ID no: ");
            int idno = Integer.parseInt(in.readLine());
            System.out.println("DOB: ");               
            String dob = (in.readLine());

            students[i] = new Student(naam, idno, dob);                          

            File studentFile = new File("StudentData.txt");
            try {
                FileOutputStream fileOutput = new FileOutputStream(studentFile);
                ObjectOutputStream objectOutput = new ObjectOutputStream(fileOutput);
                objectOutput.writeObject(students);

                students = null;

                FileInputStream fileInput = new FileInputStream(studentFile);
                ObjectInputStream objectInputStream = new ObjectInputStream(fileInput);

                students = (Student[]) objectInputStream.readObject();
            } catch (ClassNotFoundException e) {
                e.printStackTrace();
            }

            for (Student student : students) {
                System.out.println(student);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-18T20:54:05.890

你必须这样做：

```
import java.io.IOException;

class Student implements java.io.Serializable {

    String name;
    String DOB;
    int id;

    Student(String naam, int idno, String dob) {
        name = naam;
        id = idno;
        DOB = dob;
    }

    private void writeObject(java.io.ObjectOutputStream stream)
            throws IOException {
        stream.writeObject(name);
        stream.writeInt(id);
        stream.writeObject(DOB);
    }

    private void readObject(java.io.ObjectInputStream stream)
            throws IOException, ClassNotFoundException {
        name = (String) stream.readObject();
        id = stream.readInt();
        DOB = (String) stream.readObject();
    }

    public String toString() {
        return name + "\t" + id + "\t" + DOB + "\t";
    }

} 
```

readObject 在创建 Student 的实例后立即被调用（绕过正常的构造函数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-30T09:53:28.183

*我知道这个问题很老了，为后代考虑这个*

通常，您可以通过允许自动反序列化所有“正常”字段来让 JVM 完成艰苦的工作：

```
private void readObject(ObjectInputStream serialized) throws ClassNotFoundException, IOException 
{
    serialized.defaultReadObject();
    // After this, you can handle transient fields or 
    // special initialization that happens in the constructor
} 
```

的文档`defaultReadObject()`对此非常清楚：

> 从此流中读取当前类的非静态和非瞬态字段。这只能从被反序列化的类的 readObject 方法中调用。如果以其他方式调用它将抛出 NotActiveException。

# python - 如何使用python计算几个.dat文件的平均值？

> ID：12963446
> 
> 赞同：4
> 
> 时间：2012-10-18T20:46:10.840
> 
> 标签：python, file, average

所以我有 50 - 60 个 .dat 文件，它们都包含 m 行和 n 列数字。我需要取所有文件的平均值并以相同的格式创建一个新文件。我必须在 python 中执行此操作。谁能帮我这个？

我写了一些代码。我意识到我这里有一些不兼容的类型，但我想不出替代方案，所以我还没有改变任何东西。

```
#! /usr/bin/python
import os

CC = 1.96

average = []
total = []
count = 0
os.chdir("./")
for files in os.listdir("."):
    if files.endswith(".dat"):
        infile = open(files)
        cur = []
        cur = infile.readlines()
        for i in xrange(0, len(cur)):
            cur[i] = cur[i].split()
        total += cur
        count += 1
average = [x/count for x in total]

#calculate uncertainty
uncert = []

for files in os.listdir("."):
    if files.endswith(".dat"):
        infile = open(files)
        cur = []
        cur = infile.readlines
        for i in xrange(0, len(cur)):
            cur[i] = cur[i].split()
        uncert += (cur - average)**2
uncert = uncert**.5
uncert = uncert*CC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:47:50.987

这是一种相当节省时间和资源的方法，它可以并行读取所有文件的值并计算它们的平均值，但一次只能读取每个文件的一行——但它确实会暂时将整个第一个`.dat`文件读入内存为了确定每个文件中有多少行和列的数字。

你没有说你的“数字”是整数还是浮点数或什么，所以这会将它们读入浮点数（即使它们不是也可以工作）。无论如何，平均值被计算并作为浮点数输出。

**更新**

根据您的评论，我已经修改了我的原始答案，以计算`sigma`每行和每列中的值的总体标准偏差 ( )。它在计算它们的平均值之后立即执行此操作，因此不需要第二次重新读取所有数据。此外，为了响应评论中提出的建议，已添加上下文管理器以确保关闭所有输入文件。

请注意，标准偏差只打印出来，不会写入输出文件，但是对相同或单独的文件执行此操作应该很容易添加。

```
from contextlib import contextmanager
from itertools import izip
from glob import iglob
from math import sqrt
from sys import exit

@contextmanager
def multi_file_manager(files, mode='rt'):
    files = [open(file, mode) for file in files]
    yield files
    for file in files:
        file.close()

# generator function to read, convert, and yield each value from a text file
def read_values(file, datatype=float):
    for line in file:
        for value in (datatype(word) for word in line.split()):
            yield value

# enumerate multiple egual length iterables simultaneously as (i, n0, n1, ...)
def multi_enumerate(*iterables, **kwds):
    start = kwds.get('start', 0)
    return ((n,)+t for n, t in enumerate(izip(*iterables), start))

DATA_FILE_PATTERN = 'data*.dat'
MIN_DATA_FILES = 2

with multi_file_manager(iglob(DATA_FILE_PATTERN)) as datfiles:
    num_files = len(datfiles)
    if num_files < MIN_DATA_FILES:
        print('Less than {} .dat files were found to process, '
              'terminating.'.format(MIN_DATA_FILES))
        exit(1)

    # determine number of rows and cols from first file
    temp = [line.split() for line in datfiles[0]]
    num_rows = len(temp)
    num_cols = len(temp[0])
    datfiles[0].seek(0)  # rewind first file
    del temp  # no longer needed
    print '{} .dat files found, each must have {} rows x {} cols\n'.format(
           num_files, num_rows, num_cols)

    means = []
    std_devs = []
    divisor = float(num_files-1)  # Bessel's correction for sample standard dev
    generators = [read_values(file) for file in datfiles]
    for _ in xrange(num_rows):  # main processing loop
        for _ in xrange(num_cols):
            # create a sequence of next cell values from each file
            values = tuple(next(g) for g in generators)
            mean = float(sum(values)) / num_files
            means.append(mean)
            means_diff_sq = ((value-mean)**2 for value in values)
            std_dev = sqrt(sum(means_diff_sq) / divisor)
            std_devs.append(std_dev)

print 'Average and (standard deviation) of values:'
with open('means.txt', 'wt') as averages:
    for i, mean, std_dev in multi_enumerate(means, std_devs):
        print '{:.2f} ({:.2f})'.format(mean, std_dev),
        averages.write('{:.2f}'.format(mean))  # note std dev not written
        if i % num_cols != num_cols-1:  # not last column?
             averages.write(' ')  # delimiter between values on line
        else:
            print  # newline
            averages.write('\n') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:09:24.383

我不确定该过程的哪个方面给您带来了问题，但我将专门回答有关获取所有 dat 文件的平均值的问题。

假设这样的数据结构：

```
72 12 94 79 76  5 30 98 97 48 
79 95 63 74 70 18 92 20 32 50 
77 88 60 98 19 17 14 66 80 24 
... 
```

获取文件的平均值：

```
import glob
import itertools

avgs = []

for datpath in glob.iglob("*.dat"):
    with open(datpath, 'r') as f:
        str_nums = itertools.chain.from_iterable(i.strip().split() for i in f)
        nums = map(int, str_nums)
        avg = sum(nums) / len(nums)
        avgs.append(avg)

print avgs 
```

它循环遍历每个`.dat`文件，读取并连接行。将它们转换为 int（如果需要，可以是浮点数）并附加平均值。

如果这些文件很大，并且您在读入它们时担心内存量，您可以更明确地循环每一行并只保留计数器，就像您原来的示例所做的那样：

```
for datpath in glob.iglob("*.dat"):
    with open(datpath, 'r') as f:
        count = 0
        total = 0
        for line in f:
            nums = [int(i) for i in line.strip().split()]
            count += len(nums)
            total += sum(nums)
        avgs.append(total / count) 
```

*   注意：我不处理特殊情况，例如文件为空并产生除以零的情况。

# google-chrome-extension - Gmail 扩展程序设计要求

> ID：12963449
> 
> 赞同：3
> 
> 时间：2012-10-18T20:46:15.317
> 
> 标签：google-chrome-extension, gmail

创建 gmail 扩展程序（例如 Boomerang 或 Rapportive）时是否有特定的设计要求？

# php - 轻微的 php 问题

> ID：12963451
> 
> 赞同：0
> 
> 时间：2012-10-18T20:46:25.333
> 
> 标签：php

在下面的代码中，值`date("m") is 10 i.e. October`

十月`$mame1[$i] in <td></td>`印刷三遍。

```
<?php $months = array("January","February", "March","April", "May", "June", "July", "August", "September", "October", "November", "December");
$mname1 = $months[date("m")-1];

for($i=0; $i<date("m")-1; $i++){
 $mname1[$i];}
?>

<tr>
    <td colspan='4' style='border: 2px solid black;'>
    <div align="center"><b><u><?=$mname1[$i]?>
    <?=$profile_stats['year']?></u></b>    
    <?=$newstats_alert?></div></td>
</tr> 
```

我想要实现的是打印系列直到 10 月，即。10 作为一月 | 二月 | 三月 |... |九月 |

有谁能够帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:51:38.510

我不明白这部分：

```
for($i=0; $i<date("m")-1; $i++){
  $mname1[$i];
} 
```

我认为它的意思如下，构建从一月到九月的月份名称数组。

```
for($i=0; $i<date("m")-1; $i++){
  $mname1[] = $months[$i];
} 
```

然后，在输出中，您可以编写：

```
<?=implode('|', $mname1)?> 
```

或者，只要将循环移动到 HTML 输出中的正确位置，您就可以回显循环中的名称。

# jenkins - 构建完成后手动失败

> ID：12963453
> 
> 赞同：5
> 
> 时间：2012-10-18T20:46:32.120
> 
> 标签：jenkins

是否可以在构建完成后为构建设置构建结果？

我已经找不到任何可以做到这一点的插件，我正在考虑编写自己的插件，但我想在走这条路之前看看这是否可能。

（我已经查看了现有代码以及“Fail The Build”插件如何工作作为示例，但我对 Jenkins 代码库的理解还不够先进，无法理解所有可能性。）

用例：我们有一个构建管道，在管道末端附近有一个部署到 qa 步骤，用于将工件部署到 QA 环境。在此步骤之前，我们进行了自动化测试，以尝试发现工件的任何问题，但我们的测试覆盖率在某些领域不是很高，因此错误仍然可能从裂缝中溜走。我希望能够在事后将 deploy-to-qa 构建标记为 FAILED，以表示该特定管道无效并且不是生产发布的候选者。[（与此 Build Pipeline Plugin 问题](http://code.google.com/p/build-pipeline-plugin/issues/detail?id=101)基本相同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T01:27:35.230

经过对代码的更多调查，我相信这是不可能的。

来自`hudson.model.Run`：

```
public void setResult(Result r) {
    // state can change only when we are building
    assert state==State.BUILDING;

    // snip
    ...
} 
```

因此，除非处于“构建”状态，否则构建结果不会改变。

我可以尝试使用 lastSuccessful 和 lastStable 符号链接（就像使用 中的`delete()`函数所做的那样`hudson.model.AbstractBuild`），但是一旦 Jenkins 从`jobs/JOBNAME/builds/`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:16:35.987

我有一个未经测试的建议：进行参数化构建，其中参数确定构建是否会失败（例如简单的 bat / shell 脚本从它设置的环境变量测试参数，并执行退出 0 或退出 1）。这假设构建管道手动触发的步骤将询问参数，而不是使用默认值。

如果它不支持交互式构建参数，那么需要一些其他方式来告诉这个额外的构建步骤它是否应该失败。也许编辑上游构建描述或显示名称以指示失败，然后允许构建管道继续这个额外的构建步骤，这可能必须使用系统 groovy 脚本来挖掘上游构建描述或显示名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:19:15.070

我面临同样的要求。我还没有找到合适的插件，改变构建状态不仅仅是一个标志，而且对链接有其他影响（例如最新成功的构建等）。因此，我没有改变构建的状态，而是寻找一种可能对构建进行限定。升级的[构建插件](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)应用标志来构建以定义例如不同的质量阶段。构建提升可以手动执行，也可以基于下游项目成功构建。任何成功的构建都可以根据促销进行限定，可以执行附加构建和构建后操作，例如标记或归档。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:58:19.853

我之前看到过关于这个主题的几次辩论，结果总是理论上可以这样做，但是代码库并不是为了允许这样做而设计的，它必须是一个非常hacky的解决方法。

也有人说这通常是一种不好的做法，尽管我不记得反对它的论点是什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-06T07:03:07.773

实际上，我可以通过将`build.xml`手动更改为`<result>FAILURE</result>`.

然后我玩了一下`mklink`创建一些符号链接并将 lastSuccessfulBuild 重命名为 lastFailedBuild 并且它起作用了。如果允许您从 Jenkins 插件中访问文件系统，则可以编写一个。

如果您可以删除当前构建并使用版本号启动相同的构建并将下一个 BUILD_NUMBER 设置为已删除的构建，那么您可以使用此插件告诉它失败而不是成功：

[构建插件失败](https://wiki.jenkins-ci.org/display/JENKINS/Fail+The+Build+Plugin)

# jquery - bx 滑块 DestroyShow 与 jquery lavaLamp 冲突

> ID：12963454
> 
> 赞同：1
> 
> 时间：2012-10-18T20:46:36.827
> 
> 标签：jquery, conflict, bxslider, lavalamp

我遇到了 BX Slider 与 LavaLamp 冲突的问题。

这就是我所在的地方。

首先，我设置了 lavalamp 菜单，

```
//Initialise Lavalamp
$(function() {
    $(".menu ul").lavaLamp({
        speed: 200,
        fx: 'easeOutBack'
    });
}); 
```

并且当我在 Wordpress 中时，我添加了一行，将“current”类添加到任何具有“current-menu-item”类的菜单项中。

```
$('.current-menu-item').addClass('current'); 
```

这一切都很完美......

但是，我现在希望幻灯片仅在幻灯片超过 3 张时才能运行，因此我添加了代码：

```
if (slider.getSlideCount() < 4){
    slider.destroyShow()
    $('.slide').removeClass('active-slide');
    $('.carousel div.gradient-top, .carousel div.gradient-bottom, #controls').css("display","none")
} 
```

我做了一些探索，当我把`slider.destroyShow()`线拿出来时一切都恢复正常了，谁能想到为什么会发生这种情况，或者用一种方法`destroyShow`来达到同样的效果？我假设当`destroyShow`命令运行时它会破坏 Lavalamp 插件中的某些内容。

提前感谢您的帮助。

# jquery - 提交 jquery ajax 时禁用选项

> ID：12963456
> 
> 赞同：0
> 
> 时间：2012-10-18T20:46:39.607
> 
> 标签：jquery, ajax

当我提交我的 ajax 表单时，我想通过禁用提交的选项。

```
<form action="#" id="export">
  <select multiple="multiple" size="5">
    <option id="val-1" value="1">Spain</option>
    <option id="val-2" value="2" disabled="disabled">France</option>
    <option id="val-3" value="3">England</option>
  </select>
  <input type="submit" value="add" />
</form> 
```

我的阿贾克斯

```
$('#export').on('submit', function(e){
            // alert( ($this).serialize() );
            $.post('save_zone.php', $(this).serialize(), function(data) {
                $('.pays_added_export').append(data);
            });
            e.preventDefault();
        }); 
```

有任何想法吗 ？我想到了一些带有 serialize() 的东西和一个 data-something on option ...

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:44:17.947

You need a id for you select

```
<select multiple="multiple" size="5" id="select_option">
    <option id="val-1" value="1">Spain</option>
    <option id="val-2" value="2" disabled="disabled">France</option>
    <option id="val-3" value="3">England</option>
</select> 
```

and use it

```
var a_disable = [];    
$('option:disabled', '#select_option').each(function (i, option) {                     
     a_disable[i] = $(this).val();                    
});                    

$.post('save_zone.php', $(this).serialize()+'&disables='+a_disable.join(','), function(data) {
    $('.pays_added_export').append(data);
}); 
```

# ruby-on-rails - 从控制器传递一个数组以在 ruby 中查看

> ID：12963458
> 
> 赞同：2
> 
> 时间：2012-10-18T20:46:45.130
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我的 Ruby 控制器中有以下代码：

**mastertest_controller.rb**

```
def index

 ......

 @mastertest = connection.execute("select code_ver from mastertest")
 result_array = { sometihng }

 ......

 respond_to do |format|
  format.html # index.html.erb
  format.json { render :json => @mastertest}
  format.json { render :json => result_array}

 end 
```

但它只允许我`@mastertest`在 view( `index.html.erb`) 中访问。如何将数组传递给视图？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:49:04.130

控制器中的实例变量在视图中作为实例变量传递。

控制器：

```
@result_array = [something, second_something] 
```

那么在你看来：

```
<% @result_array.each do |item| %>
  <%= item %>
<% end %> 
```

# asp.net-mvc - MVC 中的部分布局

> ID：12963462
> 
> 赞同：1
> 
> 时间：2012-10-18T20:47:12.617
> 
> 标签：asp.net-mvc, razor

我有一个部分视图如下

_MyNav.cshtml

```
<ul>
    <li>
        @Html.ActionLink("Link1", "Index", "Link",new { id="" }, null)
    </li>
    <li>
        @Html.ActionLink("Link2", "Index", " Link ",new { id="1" }, null)
    </li>
    <li>
        @Html.ActionLink("Link3", "Index", " Link ",new { id="2" }, null)
    </li>
</ul> 
```

我在主布局文件的两个地方包含了部分视图。@Html.Partial("_MyNav")。其中一个部分视图需要具有所有链接，而另一个部分视图需要具有两个链接。

无论如何，我可以通过传递参数来隐藏 _MyNav 中的链接之一吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:16:48.160

将您的部分强类型化为模型（在您的情况下为布尔值）：

```
@model bool

<ul>
    <li>
        @Html.ActionLink("Link1", "Index", "Link",new { id="" }, null)
    </li>
    <li>
        @Html.ActionLink("Link2", "Index", " Link ",new { id="1" }, null)
    </li>
    @if (Model)
    {
        <li>
            @Html.ActionLink("Link3", "Index", " Link ",new { id="2" }, null)
        </li>
    }
</ul> 
```

然后如果你想有 3 个链接：

```
@Html.Partial("_MyNav", true) 
```

如果你想有 2 个链接：

```
@Html.Partial("_MyNav", false) 
```

当然，如果您需要向部分传递比布尔值更复杂的信息，您将定义一个视图模型，然后将您的部分强类型化到此视图模型。

# android-layout - x86 VM 上的 Android 布局问题

> ID：12963463
> 
> 赞同：2
> 
> 时间：2012-10-18T20:47:12.377
> 
> 标签：android-layout, android-emulator

我正在尝试在 VirtualBox 中的 Android x86 上运行我的应用程序，但遇到了一个小而烦人的问题。我以前没有遇到过这个问题，当我在我模仿的平板电脑分辨率下拥有虚拟机时。但是，我现在正在运行 VM 并为更小的（电话）分辨率编写应用程序。问题是布局在 Eclipse 和实际手机上看起来不错，但一切都在 VM 中发生了变化。在这三种情况下，分辨率和像素密度应该是相同的，所以我不确定该怎么做。该应用程序仍然可以运行，但我希望将各种视图放在它们应该放置的位置并且看起来正确放置，而不是向左和向上移动。几乎就像在屏幕的一个子集中正确绘制了所有内容一样。提前感谢您的帮助！

# objective-c - 如何将右键添加到 uinavigationcontrol

> ID：12963465
> 
> 赞同：0
> 
> 时间：2012-10-18T20:47:21.870
> 
> 标签：objective-c, ios, ipad, uinavigationcontroller, uinavigationitem

如何将按钮`UINavigationControl`添加到我添加到的 a 中`ViewController`？（该项目不是`UINavigationControler`基于。）

这是我添加到我的`viewDidLoad`方法中的代码：

```
navigation = [[UINavigationController alloc] init];
navigation.view.frame = CGRectMake(0, 0, 1024, 748);
navigation.navigationBar.tintColor = [UIColor blackColor];
navigation.navigationBar.alpha = 1.0f;
navigation.navigationBar.translucent = NO;

UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel" style:UIBarButtonItemStylePlain target:self action:@selector(cancel)];          
[navigation.navigationItem setRightBarButtonItem:cancelButton animated:YES];
[cancelButton release];

[self.view addSubview:navigation.view];

[self pushPresentationList]; 
```

有人可以帮我修复第 7-9 行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:52:54.537

```
UIBarButtonItem *rightButton = [[UIBarButtonItem alloc] initWithTitle:@"Button" 
    style:UIBarButtonSystemItemDone target:nil action:nil];
UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@"Awesome"];
item.rightBarButtonItem = rightButton;
item.hidesBackButton = YES;
[navigationBar pushNavigationItem:item animated:NO]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:55:33.820

你需要一个 UINavigationController 吗？为什么不只使用一个简单的 UINavigationBar。这是一些示例代码：

```
UINavigationBar *navBar = [[UINavigationBar alloc] initWithFrame:
                              CGRectMake(0,0,self.view.frame.size.width, 49.0f)];
[self.view addSubview:navBar];
UIBarButtonItem *cancelButton = [[UIBarButtonItem alloc] initWithTitle:@"Cancel"
      style:UIBarButtonItemStylePlain target:self action:@selector(cancel)];
UINavigationItem *rightBarButtonItem = [[UINavigationItem alloc] init];

[rightBarButtonItem setRightBarButtonItem:cancelButton];

[navBar pushNavigationItem:rightBarButtonItem animated:NO]; 
```

# php - 使用 jQuery 获取一个 divs IDS

> ID：12963466
> 
> 赞同：0
> 
> 时间：2012-10-18T20:47:27.687
> 
> 标签：php, jquery

我有一个具有多个 ID 的 div，我需要分别获取每个 ID 并将两个变量发送到 PHP 文件。如果可以实现的话，我觉得这将是更简单的选择，但另一个选择是在 jQuery 将 ID 发送给它后，用 PHP 将服务器端的两个 IDS 拆分。一个 ID 是时间戳，另一个是数据库中的 ID。

HTML div 示例：

```
<div style="margin-bottom:10px;" id="1000003 2012-09-04 21:24:32" class="newsItem"></div> 
```

1000003 是我需要进入一个单独变量的 ID，其余的是我需要在另一个单独变量中的时间戳。

我拥有的 jQuery：

```
window.setInterval(function(){
     //scripting here
 var obj = $('.newsItem:first').map(function(_, elem){
         return elem.id;
     });

     var ids = $.makeArray(obj); //variable of IDS
     $.get("AJAX/get_feed_updates.php",{ ids: ids },function(result){
         $("#newsFeed").html(result);
     }); 
     }, 5000); 
```

PHP 文件只是将 ID 放入变量中并用它查询数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:49:58.217

在[DATA](http://api.jquery.com/jQuery.data/)属性中存储一个。[这](http://ejohn.org/blog/html-5-data-attributes/)是有关其使用方式的另一个参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:58:00.013

这是正确的吗？

```
 window.setInterval(function(){
 //scripting here

 var theId = $('.newsItem:first').attr('id');
 var a = theId.split(' ');
 var theId = a[0];
 var theStamp = a[1]+''+a[2];

 $.get("AJAX/get_feed_updates.php",{ ids: theId },function(result){

 $("#newsFeed").html(result);
 }); 

 }, 5000); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T20:50:43.757

您应该使用[数据](http://ejohn.org/blog/html-5-data-attributes/)属性。然后你可以做这样的事情..

```
<div data-timestamp="1000003 2012-09-04 21:24:32" id="myId"></div> 
```

# jquery - 无法使用 jQuery/knockout 获取 JSON 对象的文本值

> ID：12963470
> 
> 赞同：2
> 
> 时间：2012-10-18T20:47:36.593
> 
> 标签：jquery, json, knockout.js

好吧，我仍然对遍历 javascript 对象有点模糊，所以希望你们能帮我解决这个问题。我正在使用 jQuery 和 Knockout 吐出作为 JSON 发送的服务器数据。一切似乎都很好，除了数组的实际值似乎没有应用，但我确实得到了表格行的构造并且没有错误，所以它必须与我的 Guest(data){} 函数一起使用。我觉得我可能将它指向键而不是值。看看我的代码和 JSON 结构，告诉我你的想法。

```
<table>
    <tbody data-bind='foreach: guests'>
        <tr>
            <td data-bind='value: name'></td>
            <td data-bind='value: email'></td>
            <td data-bind='value: guests'></td>
            <td data-bind='value: code'></td>
        </tr>
    </tbody>
</table>

<body>
</body>
<script type="text/javascript">

function Guest(data){
    this.name = ko.observable(data.name);
    this.email = ko.observable(data.email);
    this.guests = ko.observable(data.guests);
    this.code = ko.observable(data.code);   
}

function guestListViewModel(){
    //Data
    var self = this;
    self.guests = ko.observableArray([]);

    $.getJSON('/php/guests_json.php', function(json) {
        var mappedGuests = $.map(json, function(item) { return new Guest(item) });
        console.log(mappedGuests);
        self.guests(mappedGuests);
    });
}

ko.applyBindings(new guestListViewModel);

</script> 
```

这是服务器端的 JSON 的样子。

```
[{
    "id":"8",
    "name":"Greg",
    "email":"greg1@google.com",
    "guests":"1",
    "code":"GVTRKwRPXD2rETD10BMCWWAB",
    "checked_in":"0"},
{
    "id": .... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:06:38.007

啊，我想通了。它与我运行良好的 JSON 对象无关。您必须小心将哪种数据绑定应用于元素。我使用的是输入“值”活页夹而不是文本跨度“文本”活页夹。

这修复了它：

```
<table>
    <tbody data-bind='foreach: guests'>
        <tr>
            <td data-bind='text: name'></td>
            <td data-bind='text: email'></td>
            <td data-bind='text: guests'></td>
            <td data-bind='text: code'></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:50:23.680

您的 json 返回一个对象数组。也许尝试像这样传递数组的第一个值（带有对象的那个）：

```
var mappedGuests = $.map(json[0], function(item) { return new Guest(item) }); 
```

# cakephp - CAKEPHP - 将视图包含到另一个视图中

> ID：12963471
> 
> 赞同：0
> 
> 时间：2012-10-18T20:47:38.217
> 
> 标签：cakephp

我有一个帖子控制器和一个评论元素。我想以某种方式在评论元素中包含帖子视图。这可以将 PostsController 视图包含到元素中吗？

我知道如何包含元素，但从未听说或想过包含控制器视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:09:14.073

您可以使用[requestAction](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)获取PostsController 视图的*数据*。如果您想在两个不同的地方包含视图层代码，请将其拉​​入一个元素中——这就是它们的用途。

# sql-server-2008 - SQL Server 2008 中的重复项

> ID：12963480
> 
> 赞同：0
> 
> 时间：2012-10-18T20:48:02.617
> 
> 标签：sql-server-2008

> **可能重复：**
> [删除脚本 SQL Server 2008](https://stackoverflow.com/questions/12904087/delete-script-sql-server-2008)

这是我试图解决的一种情况。我有一个装有重复项的表。发生这种情况是因为类似的行是从两个或更多不同的来源加载的。这是在包装中处理的。

但我想删除那些重复的行。这里没有关键属性。来源的例子是`Cleveland City`和`Ohio State`。我有一列显示该行是从哪个源加载的（`DataSource`列）。

因此在行中它显示为`DataSource = 'Cleveland'`或`DataSource = 'Ohio'`。

我想保留那些从俄亥俄州加载时导致重复的记录。它的 10 万条记录我可能不得不使用连接。还有一件事我的主表与其他四个或五个表连接在一起`rId`，每行都是唯一的，这就是为什么你看到我加入这些表而我认为我做错了。

你能检查一下我的工作吗？我**真的很**感激。

```
 --Delete ct from--this is to delete w/c is my main intention
 SELECT * 
 FROM
  (
     (
        SELECT Rid,UID,ADDRESS,City,State,Zip,DataSource  
        FROM F_staRes where dataSource='Ohio'
     ) O inner join
     (
           SELECT Rid,UID,ADDRESS,City,State,Zip,DataSource  
           FROM F_staRes 
           where DataSource  in   ('Clev','Columbus')
     ) ct
          on O.UID=ct.UID and O.ADDRESS=ct.ADDRESS  and O.City=ct.City and   
          O.State=ct.State  and O.zip=ct.zip

            join dbo.ResOrig ro
            on ct.rId=ro.rId 

            join dbo.ResSta rs
            on ct.rId=rs.rId

            join dbo.ResDest rd 
            on ct.rId=rd.rId

           where ct.DataSource in ('Clev','Columbus') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:06:07.687

试试这个

确保您有列来比较重复项，并且按照列的顺序，您必须在您的情况下保留 asc 或 desc只需执行脚本

```
;WITH tbl_online AS (
SELECT *,ROW_NUMBER () OVER (
PARTITION BY UID,ADDRESS,City,State,Zip ORDER BY DataSource  DESC) AS Rnum
FROM F_staRes)
--SELECT *  FROM tbl_online WHERE Rnum >1
DELETE   FROM tbl_online WHERE Rnum >1 
```

# python - Django 抽象模型继承

> ID：12963483
> 
> 赞同：1
> 
> 时间：2012-10-18T20:48:07.920
> 
> 标签：python, django, model, uuid

在模型中，我通常会为友好的 URI 放置一个“uuid”字段，也是一个“slug”字段。

假设我有一个名为“SomeModel”的模型，通过覆盖它的 save() 方法，我可以在保存它时生成一个 uuid 和一个 slug：

```
class SomeModel(models.Model):
    ...
    def save(self, *args, **kwargs):
        if not self.uuid:
            uuid = shortuuid.uuid()[:10]
            while SomeModel.objects.filter(uuid=uuid).exists():
                uuid = shortuuid.uuid()[:10]
            self.uuid = uuid
        if not self.slug:
            self.slug = slugify(self.title)[:500].rstrip('-')
        super(SomeModel, self).save(*args, **kwargs) 
```

它适用于常规模型。现在我想要一个抽象模型：

```
class SomeAbstractModel(models.Model):
    class Meta:
        abstract = True
    def save(self, *args, **kwargs):
        ... 
```

进而：

```
class SomeModel(SomeAbstractModel):
    class Meta(SomeAbstractModel.Meta):
        ... 
```

问题是，在抽象模型中，看起来我不能简单地替换

```
while SomeModel.objects.filter(uuid=uuid).exists(): 
```

和

```
while SomeAbstractModel.objects.filter(uuid=uuid).exists(): 
```

因为抽象模型没有经理。

在这种情况下，我想知道如何避免在所有模型的 save() 方法中出现冗余代码。我也不确定是否

```
while SomeModel.objects.filter(uuid=uuid).exists(): 
```

是检查 uuid 是否存在的最佳实践。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:03:52.477

不确定这是否是城里最漂亮的方式，但这应该可行：

```
while self.__class__.objects.filter(...):
    pass 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T21:09:43.680

创建 SomeModel(SomeAbstractModel) 时，只需从头开始创建 Meta 类，无需继承。通过继承 vom SomeAbstractModel.Meta 你使它再次抽象，并且你不能查询抽象模型，不是因为它们没有管理器，而是因为没有创建表。

所以要么你这样做：

```
class SomeModel(SomeAbstractModel):
    ...
    class Meta(SomeAbstractModel.Meta):
        abstract=False
        ... your other model specific options 
```

或者您这样做（如果您没有任何其他特定于模型的选项：

```
class SomeModel(SomeAbstractModel):
    ... 
```

# sql-server-2008 - 为什么 SQL Server 中没有分隔的、仅整数的编目选项？

> ID：12963490
> 
> 赞同：-5
> 
> 时间：2012-10-18T20:48:31.047
> 
> 标签：sql-server-2008, search, indexing, integer, catalog

有什么我想念的吗？

我要创建的基本上是一个由空格（或您喜欢的任何类型）分隔的索引表。我意识到仅在 int 类型的数据列上不可能进行全文搜索，因为它将“空格”理解为要在整个目录中索引的分隔数据的分隔符。

我确实意识到它确实允许我索引`varbinary`类型数据，但为什么不只是`int`用空格分隔的数据，而不是包含整数和文本数据来搜索。即，一个

```
 SEARCH * FROM MyTable
 WHERE CONTAINS(indexedcolumn, '1189') 
```

为如下表定义的全文索引/目录：

```
 indexedColumn      secondDelimitedIntColumn
 1189               34 34209 1989 3 5 
```

是不可能的，但是

```
 SEARCH * FROM MyTable
 WHERE CONTAINS(uniqueColumn, 'a1189') 
```

将在具有以下列的表上使用全文索引：

```
 uniqueColumn secondDelimitedIntColumn
 a1189        b34 b34209 b1989 b3 b5 
```

所以基本上对任何带有全文索引的列执行`CONTAINS()`搜索只有在整数字符串上附加了一些文本时才会起作用。

但是我的问题是问“为什么我不能只使用由空格分隔的整数字符串，这样我就不必添加虚拟文本来欺骗 SQL Server 以允许我对索引整数字符串执行全文搜索？”

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T20:55:38.780

这真的不是一个问题。没有关于您尝试运行的查询或运行它的架构的详细信息。我不确定在这里要告诉你什么。如果有一些可用的详细信息，我可能会为您提供帮助。这更像是你有一个抱怨而不是一个问题。

我完全知道这应该在评论部分而不是回答，但我没有关于溢出的要点。我住在.dba。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T21:43:30.083

**Updated with XML example, below**

Your current design violates [1st normal form](http://en.wikipedia.org/wiki/First_normal_form#Domains_and_values).

That, in itself, is okay. Over some years, I've inherited and had to maintain several systems that did so. I don't know why they were built that way. It doesn't really matter. They had to be maintained and the schedule wasn't always such that there was time for refactoring, testing and validation, not to mention doing so for the stack of apps that were built upon them.

Looking back now, though, I can easily spot the one attribute that they all shared. It was the absolute biggest barrier to optimizing and extending these systems: **the underlying "relational" database violated 1st normal form**. Virtually every technical "gotcha" encountered, virtually every performance problem, it was *the* root cause. Splitting strings. Creating a faux datatype system to validate them. Creating further delimited attributes to describe them. Creating special rules for each delimited "location" and having to implement an EVAL function in many systems to enforce them. Using dynamic SQL or worse to search it all. It took more "clever" programming to implement what seemed like conceptually simple features than I care to recollect.

Maybe your system is different. Maybe [40+ years of relational database research](http://en.wikipedia.org/wiki/Edgar_F._Codd#Work) does not apply to your situation. For your sake, I truly hope so. The only problem is that you're using a relational database in a non-relational way. Just like you can pound screws with a hammer, and you can pull a boat with a motorcycle (don't hit the brakes if you actually get it going), you can create an index (full-text or b-tree) on text that represents integers.

But why would you do any of these things? Why wouldn't you actually store the integers as integers and enjoy type-safety? Why wouldn't you normalize this into two related tables to take advantage of smaller transactions and more indexing options? If you've inherited a system that you can't change, then please say so and people might be able to help with alternatives (TVPs and XML been rightfully mentioned). But I can't see coming into the situation saying that your hammer and motorcycle are broken because they don't drive screws and pull boats very well.

All that said (maybe *somebody, somewhere* is rethinking an ill-advised design), I've put `LIKE` to good use when searching delimited strings:

```
-- Setup demo data
declare @delimitedInts table (
    data varchar(max) not null
)
insert into @delimitedInts select '0,1,2'
insert into @delimitedInts select '1,2,3,4'
insert into @delimitedInts select '5,10'

-- Create a search term
declare @searchTerm int = 2

-- Get all rows that contain the searchTerm
select data
from @delimitedInts
where ',' + data + ',' like '%,' + cast(@searchTerm as varchar(11)) + ',%'

-- Create many search terms
declare @searchTerms table (
    searchTerm int not null primary key
)
insert into @searchTerms select 2
insert into @searchTerms select 3
insert into @searchTerms select 4

-- Get all rows that contain ANY of the searchTerms
select distinct a.data
from @delimitedInts a
    join @searchTerms b on ',' + a.data + ',' like '%,' + cast(b.searchTerm as varchar(11)) + ',%'

-- Get all rows that contain ALL of the searchTerms
select a.data
from @delimitedInts a
    join @searchTerms b on ',' + a.data + ',' like '%,' + cast(b.searchTerm as varchar(11)) + ',%'
group by a.data
having count(*) = (select count(*) from @searchTerms) 
```

Is this too slow for you? Maybe. Have you actually [measured it](http://www.codinghorror.com/blog/2004/08/why-arent-my-optimizations-optimizing.html)? At least you could get an implementation in place and [prove that it works before you optimize it](http://c2.com/cgi/wiki?MakeItWorkMakeItRightMakeItFast).

**Update: XML**

I've done a little testing on converting your space-delimited column to an XML column and querying it, including doing so with [XML indexes](http://msdn.microsoft.com/en-us/library/ms345121.aspx). Unfortunately, you can't put an XML index on a computed column, so I'm using a trigger to keep an XML column automatically updated. Here are some interesting results (note the SQL comments):

```
-- Create a demo table
create table MyTable (
      ID int not null primary key identity
    , SpaceSeparatedInts varchar(max) not null
    --, ComputedIntsXml as cast('<ints><i>' + replace(SpaceSeparatedInts, ' ', '</i><i>') + '</i></ints>' as xml) persisted -- Can't use XML index
    , IntsXml xml null
)
go
-- Create trigger to update IntsXml
create trigger MyTable_Trigger on MyTable after insert, update as begin
    update m
    set m.IntsXml = cast('<ints><i>' + replace(m.SpaceSeparatedInts, ' ', '</i><i>') + '</i></ints>' as xml)
    from MyTable m
        join inserted i on m.ID = i.ID
end
go
-- Add some demo data
insert into MyTable (SpaceSeparatedInts) select '1'
insert into MyTable (SpaceSeparatedInts) select '1 2'
insert into MyTable (SpaceSeparatedInts) select '2 3 4'
insert into MyTable (SpaceSeparatedInts) select '5 6 7 10'
insert into MyTable (SpaceSeparatedInts) select '100 10 1000'
go

-- Search for the number 10 (and use this same query in subsequent testing, below)
select *
from MyTable
where IntsXml.exist('/ints/i[. = "10"]') = 1
-- This query spends virtually all of its time running an XML Reader and an XPath filter

-- Add a primary xml index
create primary xml index IX_MyTable_IntsXml on MyTable (IntsXml)
-- The query now uses a clustered index scan and clustered index seek on PrimaryXML

-- Add secondary xml index for value
create xml index IX_MyTable_IntsXml_Value on MyTable (IntsXml) using xml index IX_MyTable_IntsXml for value
-- No change

-- Add secondary xml index for path
create xml index IX_MyTable_IntsXml_Path on MyTable (IntsXml) using xml index IX_MyTable_IntsXml for path
-- No change

-- Add secondary xml index for property
create xml index IX_MyTable_IntsXml_Property on MyTable (IntsXml) using xml index IX_MyTable_IntsXml for property
-- The query now replaces the clustered index scan on PrimaryXML with an index seek on SecondaryXML 
```

While it is clearly a different method, is this faster than LIKE? You have to test in your environment. Hopefully this will give you some ideas of how to do so. Please let me know how this works out for you, if it's doable in your shop.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T22:33:28.227

我也不确定我是否理解您要查找的内容，但是如果您想在单个列中存储多个值，最好的选择是使用 XML。

有关该概念的更多信息，请参阅此帖子。

[在 SQLServer 2005 中查询 XML 列](https://stackoverflow.com/questions/52084/querying-xml-columns-in-sqlserver-2005)

# java - 是否有 Java 实用程序类可以在桌面 UI 中进行数据管理？

> ID：12963491
> 
> 赞同：1
> 
> 时间：2012-10-18T20:48:39.013
> 
> 标签：java, user-interface, javafx-2, data-management

是否有 Java 实用程序类来帮助在桌面 UI 中进行数据管理？

我正在编写一个 UI 来配置一个网络设备，该设备将在配置时连接到计算机的串行端口。我的应用程序没有 Web 服务器。UI 有大量字段 (50+) 分布在 16 个选项卡中。我将用 Java（Java FX？）编写 UI。启动时它应该在浏览器内部运行，并通过串口向网络设备发出命令。UI 有多个跨选项卡的输入字段和一个提交按钮。如果编辑字段并单击提交按钮，它会发出命令并将新数据发送到设备，检索当前值和任何错误。所以如果输入字段有坏数据，例如，该字段有一个红色的边框。

是否有标准设计模式或 Java 实用程序类来完成此场景中经常遇到的“通用”部分？延迟加载，仅提交更改的字段，显示哪些字段有错误等（如果它已经存在，我不想重新发明轮子）。否则我可以写一个这样的课程，如果有用的话，可以在这里分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:50:14.663

您需要一个数据模型：一组具有不同类型关系的类（UML 设计可能会有所帮助）。

您可以了解有关 MVC 模式的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:57:38.483

当涉及到数据管理时，Java 鼓励使用[模型控制视图模式来分离责任级别。](http://www.javaworld.com/jw-04-1998/jw-04-howto.html)

本质上，这个想法是提供一个视图可以向用户显示的模型。模型不关心它的显示方式，视图也不关心数据的管理方式，它们只是有一个同意的死接口，它们可以通过它进行通信

# maven - Maven 构建顺序

> ID：12963492
> 
> 赞同：2
> 
> 时间：2012-10-18T20:48:47.563
> 
> 标签：maven

我有一个多模块 maven 构建，我需要一个特定的模块（我们称之为 project-A）在最后构建。它依赖于一个模块（我们称之为 project-B），该模块包含被编译为 dll 并使用一些 maven 技巧作为 zip 文件安装到 maven 存储库中的本机代码。由于本机代码不是 java jar，因此它不直接依赖它，因此我使用 Maven Dependency Plugin 解压缩 zip 文件并将本机 dll 放在我的构建目录中。除了建筑订单外，一切都运行良好。它构建了第一个项目-A，尽管在父标签中以相反的方式声明。我想告诉 maven 项目-A 依赖于项目-B。我尝试将 project-B 添加为依赖项，但是由于它不构建 jar，因此会引发错误，这对我来说也很hacky。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:21:45.283

只需在项目 A 中声明对项目 B 的依赖关系，它就可以正常工作。如果项目 B 是本机项目而不是 java 项目，则无关紧要。只需确保您正确声明依赖项，并将包装考虑为类型..（`pom`您可能会这样）

```
<dependency>
  <groupId>...</groupId>
  <artifactId>B</artifactId>
  <version>...</version>
  <type>pom</type>
</dependency> 
```

在项目 A)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T10:08:00.743

您在父 Pom 中指定模块的顺序也是相关的。Maven 实际上是按照这个顺序构建的，除非由于直接依赖关系而不得不乱序构建模块。

# javascript - 连接以提供其他值的两个滑块

> ID：12963495
> 
> 赞同：2
> 
> 时间：2012-10-18T20:48:56.220
> 
> 标签：javascript, jquery

试图创建一个基于两个滑块的贷款计算器。我觉得我快到了，但语法让我失望加上最后一个公式。

我有两个滑块，一个代表贷款金额，另一个代表贷款长度。

这是一些代码来突出显示所有计算。我认为这里也有错误。

```
function update() {

     $amount = $("#slider1").slider("values", 100);

     $interest = $amount / 100 * 15 ;

     $perday = 15 ;      

     $apr = (($interest / $amount) / ("#slider2"/365) * 10000) / 100;

     $amount2 = $amount + $interest;

     $("#amount").val($amount1);

     $("#amount2").val($amount2);

     $("#amount3").val($interest);

} 
```

利息按借款金额的 15% 收取。每天值 15 便士，所以为了得到我的最后费用。

[贷款总额的 15%] – [0.15p 每日信用]

我开发了一个小提琴，但它不正确，因此我在这里。

[在这里提琴](http://jsfiddle.net/jonnystudent/VycW2/)

我怎样才能让两个滑块一起工作，这样如果我移动顶部或底部滑块，它会影响总贷款金额和利息？

任何帮助将不胜感激。我真的在努力解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:31:40.580

[***我相信这就是你想要的 - jsfiddle***](http://jsfiddle.net/VycW2/17/) <- 跟随链接

```
function update() {            
     $interest = 0.15 ;
     $perday = 15 ; 
     $amount1 = $("#amount").val();
     $dayscount = $("#days").val();
     $amount2 = parseInt($amount1) + $interest * parseInt($amount1) + (parseInt($dayscount) * ($perday/100));
     $("#amount2").val($amount2);
     $("#amount3").val(parseFloat($amount2-$amount1).toFixed(2));
} 
```

修复了更新算法和滑块处理程序

我认为您最后两个字段（您的贷款和利息）分别是要支付的最终价值以及要支付的价值与借入的价值之间的差额。如果此解释不是您想要的，请发表评论。

**更新 1**

在这里，我更新了[jsfiddle](http://jsfiddle.net/VycW2/19/)。请注意，我不知道 APR 是什么，因此请验证我的计算是否正确。我也没有使用任何舍入，因为我不知道你是否需要这样

**更新 2**

在这里更新了新[**公式**](http://jsfiddle.net/VycW2/20/)。我仍然不知道这是否正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:20:02.800

如果我理解你的正确，你可以做这样的事情：

```
function update() {
    var interest = 0.15;
    var sliderAmount = parseFloat($("#slider1").slider("option", "value"));
    var days = parseFloat($("#slider2").slider("option", "value"));
    var perday = 15 * days ;
    var interestAmount = sliderAmount * interest * days;
    $("#amount1").val(sliderAmount);
    $("#amount2").val(sliderAmount);
    $("#amount3").val(interestAmount+ perday);
} 
```

# php - 关于如何将网页呈现到服务器上的图像的简单示例

> ID：12963496
> 
> 赞同：0
> 
> 时间：2012-10-18T20:48:58.513
> 
> 标签：php, image, node.js, nginx, phantomjs

> **可能重复：**
> [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

我似乎找不到如何通过 Web 服务器将网页呈现为图像的简单示例。

现在我有一个运行 Nginx 并为 PHP 应用程序提供服务的后端，我在同一个后端也有一个反向代理服务节点。

我需要实现的是一个 API，我可以将 URL 传递给它，并将其呈现为 PNG，然后存储在硬盘驱动器的某个位置。（如果整个过程可以是异步的，那就完美了。）

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:57:19.257

您将需要一个渲染器，我认为它在简单的 PHP 库中不可用。你可以使用谷歌浏览器的引擎，它是开源的并且有一个合理可用的 API 来将它嵌入到其他应用程序中。我不确定如何，但您应该能够将其渲染到图像或您可以自己保存的画布上。

不过，这不是一个简单的解决方案。渲染网站非常复杂。

# groovy - 在 Groovy 中将闭包传递给函数时出错

> ID：12963500
> 
> 赞同：1
> 
> 时间：2012-10-18T20:49:12.303
> 
> 标签：groovy

我在 Groovy 脚本中编写了一个闭包来复制文件，然后将该闭包传递给 eachFileMatch(regex,closure) 以复制与给定正则表达式匹配的所有文件。当我在 Groovy 控制台中对其进行原型设计时，一切正常，但现在当我在 Eclipse 中运行它时，出现以下错误：

```
groovy.lang.MissingMethodException: No signature of method: java.lang.String.eachFileMatch() is applicable for argument types: (java.util.regex.Pattern, file_copy$_run_closure3) 
```

这是闭包和对 eachFileMatch() 的调用

```
def fileCopyClosure = {

if(it.canRead()){
    def destFolder = new File("${outputDirectory}")
    if(!destFolder.exists()){
        println "Creating directory"
        destFolder.mkdir()
    }

    def desti = new File("${outputDirectory}\\${it.name}")
    output = desti.newOutputStream()
    it.eachByte(1024, write)
    output.close()

}
}
sourceDir.eachFileMatch(regex, fileCopyClosure) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:58:49.683

尝试`new File(sourceDir).eachFileMatch(regex, fileCopyClosure)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:53:45.743

从异常中，`sourceDir`是一个字符串，而不是`File`你需要的`eachFileRecurse`

# admob - Google Ads + iAd 视图框架搞砸了

> ID：12963503
> 
> 赞同：0
> 
> 时间：2012-10-18T20:49:26.440
> 
> 标签：admob, iad, ads, interstitial

我在我们的应用程序中使用 Google 广告。在他们对库 (libAdapteriAd) 的最新更新之前，它运行良好。

长话短说，当它选择 iAds 时，我们会得到一个全屏广告，它决定旋转我们的视图，而不管将 YES/NO 设置为 shouldAutoRotate 回调。它也不会将它们旋转回来，而且我们经常会得到倾斜的视图。

我们最好的办法是锁定旋转，然后解锁它，但是因为 iAds 覆盖了我们的东西，它最终卡在了横向视图中，我们找不到强制方向回调再次“旋转”它的方法，设置它恢复正常。

我创建了一个单独的视图控制器，将其窗口连接到应用程序窗口而不是视图控制器，并将 GADBannerViewDelegate 设置为它而不是我的应用程序的控制器，但它仍然一团糟。

iOS 指南说要这样做，但我不知道谷歌是否有更多的覆盖会扰乱视图或在其结构下不遵循苹果的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:38:06.077

你想支持什么方向？经常犯的一个错误是人们试图支持某个方向，但设置`shouldAutorotate`为`NO`. 这意味着在初始视图控制器启动时，您的 vc 将不会在该方向上初始化。

例如，如果您希望您的应用程序仅支持横向，您将拥有类似于以下代码行的内容：

```
- (NSUInteger)supportedInterfaceOrientations {
  return UIInterfaceOrientationMaskLandscapeRight;
}

- (BOOL)shouldAutorotate {
  return YES;
} 
```

当然，这是在您的文件中也有您的`UIInterfaceOrientation`集合的基础上。`Info.plist`

# java - 多次查询数据库的首选方式？

> ID：12963504
> 
> 赞同：13
> 
> 时间：2012-10-18T20:49:27.330
> 
> 标签：java, mysql, database, jdbc

在 Java 中使用 JDBC 时，普遍接受的查询数据库的方法是获取一个连接，从该连接创建一个语句，然后从该语句执行一个查询。

```
// load driver
Connection con = DriverManager.getConnection(..);
Statement stmt = con.createStatement();
ResultSet result = stmt.executeQuery("SELECT..");
// ... 
```

但是，我不确定如何处理对同一数据库的第二个查询。

1.  可以在同一个`Statement`对象上安全地执行另一个查询，还是必须从该`Connection`对象创建另一个语句才能执行另一个查询？

2.  如果同一个`Statement`对象可以用于多个查询，那么类的目的是什么（因为存在一个方法`Statement`会更有意义）？`Connection.executeQuery()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:54:10.600

是的，您可以重用该`Statement`对象，但关闭已打开的结果集`ResultSet`返回的对象。`executeQuery`

有关说明，请参见[javadoc](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html)

> 默认情况下，每个 Statement 对象只能同时打开一个 ResultSet 对象。因此，如果一个 ResultSet 对象的读取与另一个 ResultSet 对象的读取交错，则每个对象都必须由不同的 Statement 对象生成。Statement 接口中的所有执行方法都会隐式关闭语句的当前 ResultSet 对象（如果存在打开的对象）。

所以会出现以下情况：

```
// load driver
Connection con = DriverManager.getConnection(..);
Statement stmt = con.createStatement();
ResultSet result = stmt.executeQuery("select ..");
// do something with result ... or not
ResultSet result2 = stmt.executeQuery("select ...");
// result is now closed, you cannot read from it anymore
// do something with result2
stmt.close(); // will close the resultset bound to it 
```

例如，您可以在 jTDS 项目中找到 Statement 的开源实现。在[Statement.executeQuery() 方法](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.jtds/jtds/1.2/net/sourceforge/jtds/jdbc/JtdsPreparedStatement.java#JtdsPreparedStatement.executeQuery%28%29)中，您可以看到[`initialize()`](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.jtds/jtds/1.2/net/sourceforge/jtds/jdbc/JtdsStatement.java#JtdsStatement.initialize%28%29)关闭[所有](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.jtds/jtds/1.2/net/sourceforge/jtds/jdbc/JtdsStatement.java#JtdsStatement.closeAllResultSets%28%29)已打开的结果集的调用

```
protected void initialize() throws SQLException {
    updateCount = -1;
    resultQueue.clear();
    genKeyResultSet = null;
    tds.clearResponseQueue();
    // FIXME Should old exceptions found now be thrown instead of lost?
    messages.exceptions = null;
    messages.clearWarnings();
    closeAllResultSets();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T21:03:16.250

以编程方式，您可以对多个查询重复使用相同的连接和相同的语句，并在最后关闭语句和连接。

但是，这不是一个好的做法。应用程序性能对数据库的访问方式非常敏感。理想情况下，每个连接都应该打开尽可能少的时间。然后，必须汇集连接。这样一来，您会将每个查询包含在一个`{open connection, create a prepared statement, run query, close statement, close connection}`. 这也是大多数 SQL 模板的实现方式。如果并发允许，您可以使用线程池同时触发多个此类查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:28:56.937

如果您在线程环境中使用 Connection 和 Statement，我还有一件事要补充。我的经验表明 stmt.executeQuery(..) 可以保存在并行环境中使用，但结果是每个查询都被序列化并因此按顺序处理，不会产生任何加速。所以最好为每个线程使用一个新的连接（而不是语句）。

对于标准的顺序环境，我的经验表明重用语句完全没有问题，结果集不需要手动关闭。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T20:55:08.180

这就是为什么我们在面向对象编程中有类的概念。一个类定义了使它的实例具有状态和行为的组成成员。这里的语句处理与 sql 语句相关的所有内容。还有更多功能可以执行，例如批量查询等。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T21:19:34.347

通常，它是一个查询的一个语句。可能没有必要这样做，但是在编写真正的应用程序时，您不想一次又一次地重复这些相同的步骤。这违背了 DRY 原则，而且随着应用程序的增长，它也会变得更加复杂。

编写将处理这种低级（重复）内容的对象，并通过提供查询提供不同的方法来访问数据库是很好的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T21:24:51.350

我不会担心创建新的语句。但是，打开数据库连接可能会占用大量资源，并且打开和关闭连接确实会影响性能。

以某种自我管理的方式离开联系通常是非常糟糕的。

您应该考虑使用[连接池](http://en.wikipedia.org/wiki/Connection_pool)。您通常会发出关闭突击队，但您只是将该连接返回给池。当您请求新连接时，它将重用您之前提供的连接。

您可能希望对一个连接使用不同的语句。语句是一个实现和一个接口。根据您的需要，您有时需要使用[CallableStatment](http://docs.oracle.com/javase/7/docs/api/java/sql/CallableStatement.html)。一些逻辑可以在需要时重用。

# windows - 使用for循环输入多个数据

> ID：12963505
> 
> 赞同：1
> 
> 时间：2012-10-18T20:49:27.107
> 
> 标签：windows, batch-file

我是编程新手。这是我的困境。我必须在多台计算机上替换多个位置的多个文件。

我编写了一个 bat 脚本，我在其中定义了所有变量并调用了一个包含适当信息的 txt 文件。例如 -testing.txt 有值

```
Apple, Potato,Beef
Apple, Potato,Pork 
```

我正在应用的逻辑如下：我正在使用这个txt文件进行读取，然后去每个位置更改文件

```
set Path=%Path%;c:\Tools\UnxUtils\usr\local\wbin
SET SORC=C:\tools\logosource\NEWImages\ApiSite\Content

for /F "usebackq delims=, tokens=1-3" %%a in (C:\tools\xxxx\testing.txt) do (
SET HOSTNAME=%%a
SET CUSTNAME=%%c
SET STYPE=%%b
SET DEST=\\%HOSTNAME%\c$\Documents and Settings\blahblah\My    Documents\%CUSTNAME%\%STYPE%\goodman\

echo HOSTNAME is %HOSTNAME%
echo CUSTNAME is %CUSTNAME%
echo STYPE is %STYPE%
echo DEST is %DEST%
echo SORC is %SORC%
 )

 copy "%DEST%\ApiSite\Content\images\michael.gif" "%DEST%"
 copy /b /y "%SORC%\images\george.gif" "%DEST%\ApiSite\Content\images\michael.gif"

goto End

:Error

ECHO Error! You must pass in a servername
goto End

:End 
```

问题是我的循环只读取我的 txt 文件的最后一行。IE。它读取“Apple，Potato，Pork”并将 DEST 设置为该值。

我真正想要的是读取第 1 行（苹果、土豆、牛肉）使用这些参数设置 DEST 并更改文件，然后返回并读取第二行（苹果、土豆、猪肉）并使用这些参数设置 DEST 和更改文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:40:18.183

实际上，您的代码正在读取文件中的每一行，但您的逻辑是错误的。

您的主要问题是您想为每一行执行 COPY 语句，但您在循环之外有 COPY 语句。当然，它们只会执行一次，使用的值将是文件最后一行设置的值。解决方案是在循环内移动 COPY 语句。

您的另一个问题是您试图在带括号的块中设置一个变量，然后使用`%var%`- 这无法访问该值，因为在解析语句时会发生扩展，并且在读取任何行之前解析整个块一次。您可以通过使用延迟扩展来解决该问题（`HELP SET`从命令行提示符键入有关延迟扩展的更多信息）。但实际上没有必要将值保存在变量中。只需直接使用 FOR 变量。因为 DEST 被多次使用，所以我使用了一个额外的 FOR 循环来定义一个`%%d`包含 DEST 值的变量。`~`删除 FOR 循环添加的引号。

此外，您将通过在文件末尾使用`GOTO END`和定义标签来结束脚本。`:END`这行得通，但是`:EOF`每个脚本的末尾都有一个隐式标签。您可以简单地使用`GOTO :EOF`而无需定义标签。另一种选择是使用`EXIT /B`

您有一个`:ERROR`没有被调用的例程 - 我想您还有其他没有显示的代码。

```
set Path=%Path%;c:\Tools\UnxUtils\usr\local\wbin
SET "SORC=C:\tools\logosource\NEWImages\ApiSite\Content"

for /F "usebackq delims=, tokens=1-3" %%a in (C:\tools\xxxx\testing.txt) do (
  for %%d in (
    "\\%%a\c$\Documents and Settings\blahblah\My Documents\%%b\%%b\goodman\"
  ) do (
    echo HOSTNAME=%%a
    echo CUSTNAME=%%c
    echo STYPE=%%b
    echo DEST=%%~d
    echo SORC is %SORC%
    copy "%%~d\ApiSite\Content\images\michael.gif" "%%~d"
    copy /b /y "%SORC%\images\george.gif" "%%~d\ApiSite\Content\images\michael.gif"
  )
)
exit /b

:Error
ECHO Error! You must pass in a servername
exit /b 
```

# c# - BitmapImage 到字节 [] Windows 8 Metro (WinRT)

> ID：12963508
> 
> 赞同：1
> 
> 时间：2012-10-18T20:49:40.933
> 
> 标签：c#, windows-8, winrt-xaml

我想`BitmapImage`在 Windows 8 应用程序中转换为 byte[]。我知道如何使用 windows sdk 来做到这一点，但似乎无法让它适用于 WinRT sdk。

一两个帖子建议我应该用它`WritableBitmap`来实现这一点，但没有明确的例子。

[将 BitmapImage 转换为字节数组](https://stackoverflow.com/questions/4732807/conversion-of-bitmapimage-to-byte-array)(Windows)

以下是我发现的最好的，但对我来说仍然太模糊

[WinRT 将图像加载到字节数组中](https://stackoverflow.com/questions/10181046/winrt-loading-an-image-into-a-byte-array)

我会很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:57:28.437

您应该在这里查看 WriteableBitmapEx 项目 - [http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/) 这里讨论了 - [WinRT Loading an Image into a Byte array](https://stackoverflow.com/questions/10181046/winrt-loading-an-image-into-a-byte-array) ...从答案...

> 基本上，您需要将图像加载到 WriteableBitmap 中，然后通过调用 PixelBuffer.AsStream() 访问其像素缓冲区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T16:21:31.983

所有你需要的是：

*   [BitmapDecoder.GetPixelDataAsync()](http://msdn.microsoft.com/en-us/library/windows/apps/br226192)
*   [PixelDataProvider.DetachPixelData()](http://msdn.microsoft.com/de-de/library/windows/apps/windows.graphics.imaging.pixeldataprovider.detachpixeldata)

然后你有一个 BitmapImage 的字节数组！

看看这个如何：http: [//msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709939.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj709939.aspx)

# .htaccess - 使用 Codeigniter 暂时关闭站点（使用 routes.php 可能会出现 301？）

> ID：12963515
> 
> 赞同：0
> 
> 时间：2012-10-18T20:49:56.007
> 
> 标签：.htaccess, codeigniter, mod-rewrite, redirect, seo

我将 Codeigniter 与标准的 .htaccess 重写规则一起使用，以便在 url 中看不到 /index.php/。

现在我最近需要暂时关闭该网站，因此想将每个人重定向到“关闭”页面。以下工作：

```
$route['default_controller'] = "down";
$route['(:any)'] = "down"; 
```

但我知道在这种情况下，301 真的很合适。

我应该如何以及在哪里设置它？我看不到在 routes.php 中指定它的方法，并且由于现有规则而对如何在 .htaccess 中执行它感到困惑......

```
RewriteBase /

RewriteCond %{REQUEST_URI} ^_system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^myapp.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond $1 !^(index\.php|resources|files|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:41:11.330

您不想要 301 重定向。301 表示“永久”，这应该只是一个临时重定向。如果您将其添加到所有其他规则之上，则可以使用 htaccess 执行此操作：

```
RewriteRule ^ /down.html [L,R=302] 
```

只要它高于任何其他规则，那么任何请求都会被重定向到`/down.html`. 如果您不想从外部重定向浏览器（例如，让`/down.html`URL 显示在 URL 地址栏中），`,R=302`则从方括号中删除该位，并且 URL 地址栏将保持不变，而提供的内容来自 down.html .

# jquery - jQuery获取兄弟姐妹的ID

> ID：12963517
> 
> 赞同：0
> 
> 时间：2012-10-18T20:49:58.670
> 
> 标签：jquery, selector, siblings

我正在尝试获取兄弟姐妹的 ID。

```
<ul>
    <li id="a1">a1</li>
    <li id="a2">a2</li>
    <li id="a3">a3</li>
    <li id="a4">a4</li>
</ul> 
```

当我单击其中一个 li 时，我想选择所有用逗号分隔的兄弟 ID。前任。我单击#a2 并获得#a1、#a3、#a4。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:52:51.600

尝试使用`.siblings`

```
$('li').click(function () {
   var selEl = [];
   $(this).siblings().each(function (idx, el) {
       selEl.push('#' + el.id);
   });

    //.join would return you comma separated but 
    //if you want a space after comma then you need to pass .join(', ')
    console.log(selEl.join(', ')); //click on #a2 and get #a1, #a3, #a4
}); 
```

**演示：http:** [//jsfiddle.net/Lpw4u/1/](http://jsfiddle.net/Lpw4u/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:51:50.107

遍历兄弟姐妹并将 id 存储在数组中。

```
$("ul li").click(function(){
    var s = $(this).siblings();
    var ids= [];
    s.each(function(){
       ids.push(this.id);
    });
});
 var commaSparatedIds = ids.join(','); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:54:45.440

这应该可以解决问题：

```
$('li').on('click', function() {
    var ids = [];
    var self = this;
    $(this).siblings().each(function(){
        if(self != this)
            ids.push($(this).attr('id'));
    });

    alert(ids.join(','));
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:56:39.570

```
$('li[id^=a]').on('click', function() {
    alert($.makeArray(
      $(this).siblings()
         .map( function() {
           return $(this).attr('id'); 
         })
       ).join(', '));
}); 
```

# ruby-on-rails - 自定义 javascript 部分而不是默认值

> ID：12963518
> 
> 赞同：0
> 
> 时间：2012-10-18T20:50:05.083
> 
> 标签：ruby-on-rails

我一直在尝试让我的操作从视图/共享目录中渲染一个 java-script 部分，但到目前为止还没有成功。

```
respond_to do |format|
format.html //renders actionName.html.erb
format.js //renders actionName.js.erb
end 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:44:38.847

我终于想通了：

```
format.js {render 'shared/actioanName.js'} 
```

或者

```
format.js {render :partial=> 'shared/actionName.js'} 
```

无论哪种情况，您都必须在渲染语句中添加“.js”。

您只需在后者的文件名前加上下划线即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:33:05.920

像这样的东西：

```
format.js {render(:partial => 'shared/actionName')} 
```

# html - 在 Watir-Classic 中寻找元素总是返回 false

> ID：12963523
> 
> 赞同：1
> 
> 时间：2012-10-18T20:50:17.043
> 
> 标签：html, ruby, watir, watir-webdriver

```
<div class="wizardPanel box cf" id="wizardPanel">
    <p class="validation-msg error visually-hidden" id="error0"><span data-icon="warn"></span>Your departure and arrival cites must be different. Please correct the highlighted fields below.</p>
    <p class="validation-msg error visually-hidden" id="error1"><span data-icon="warn"></span>The return date must be later than the departure date. Please select a different date.</p>
    <p class="validation-msg error visually-hidden" id="error2"><span data-icon="warn"></span>Sorry, we're able to book only 1 to 6 passengers total per itinerary.</p>
    <p class="validation-msg error visually-hidden" id="error3"><span data-icon="warn"></span>Please select the ages of the children traveling.</p>
    <p class="validation-msg error visually-hidden" id="error4"><span data-icon="warn"></span>We are only able to book one infant in lap per traveler aged 12+.</p>
    <p class="validation-msg error visually-hidden" id="error5"><span data-icon="warn"></span>Children must not be allowed to travel without either a Senior or Adult.</p>
    <p class="validation-msg error visually-hidden" id="error6"><span data-icon="warn"></span>Please check the date highlighted below. Date format should be mm/dd/yy.</p>
    <p class="validation-msg error visually-hidden" id="error7"><span data-icon="warn"></span>Departure airport field is empty. Please enter correct airport name.</p>
    <p class="validation-msg error visually-hidden" id="error8"><span data-icon="warn"></span>Arrival airport field is empty. Please enter correct airport name.</p>
</div> 
```

在上面的 HTML 标记中，我试图找出文本是否对用户可见。为此，我使用了以下代码，该代码与 Watir-webDriver 配合良好，但不适用于 Watir-Classic（总是返回`false`）：

```
@browser.div(:id => 'wizardPanel').p(:id => 'error2')..present? 
```

有人可以帮我让它在 FireFox、IE、Chrome 浏览器上运行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:40:49.143

尝试

```
@browser.div(:id => 'wizardPanel').p(:id => 'error2').visible? 
```

# javascript - javascript条件语句

> ID：12963525
> 
> 赞同：1
> 
> 时间：2012-10-18T20:50:25.910
> 
> 标签：javascript, if-statement

我有一个侧边导航，点击链接后，它会执行某些功能：

```
$(".side-nav ul li a").click(function(event) {
  $(".side-nav").stop().animate({"margin-top": "0px"}, 450);
}); 
```

如果页面加载有标签，我也有同样的功能触发器

```
if(window.location.hash) {
  $(".side-nav").stop().animate({"margin-top": "0px"}, 450);
} 
```

我正在寻找一种将两者结合起来以减少冗余的方法。

如果 url 有标签，则触发该功能，否则仅在单击 sidenav 项目时触发该功能。

我似乎无法解决这个问题。任何帮助将非常感激。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T20:51:56.580

将代码放在一个函数中并在两个地方调用它。

```
function sideNav() {
    $(".side-nav").stop().animate({"margin-top": "0px"}, 450);
}

$(".side-nav ul li a").click(function(event) {
    sideNav();
});

if(window.location.hash) {
    sideNav();
} 
```

`click`如果没有其他代码要运行，您的处理程序实际上可以像这样重写：

```
$(".side-nav ul li a").click(sideNav); 
```

如果有任何参数需要传递给`sideNav`，那么这种重写将不合适。它们需要从调用该函数的单击处理程序中手动传递。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:52:21.230

```
var animateSideNav = function() {
  $(".side-nav").stop().animate({"margin-top": "0px"}, 450);
}

$(".side-nav ul li a").click(animateSideNav);

if(window.location.hash) {
  animateSideNav();
} 
```

# java - Apache POI 使用递归公式在单元格上抛出 -60 错误。这可以解决或解决吗

> ID：12963526
> 
> 赞同：0
> 
> 时间：2012-10-18T20:50:26.907
> 
> 标签：java, excel, apache-poi

我创建了一个简单的电子表格来测试这个问题。在电子表格顶部计算百分比。在不同数字列的总和下方包括总和乘以计算百分比的计算（递归公式）。

这在 EXCEL 中运行良好。

在 POI 中，当计算单元格时，它会抛出一个未记录的 FormulaError 代码 (-60 )。

有没有办法确定这个错误代码是什么以及如何解决/修复它？

代码：

```
 try {
        Session session = getSession();
        AgentContext agentContext = session.getAgentContext();

        /**
         * creates an {@link HSSFWorkbook} the specified OS filename.
         */
        // Read the Excel template from the local hard drive
        String filename = "c:\\temp\\RecurssionTest.xls";
        // Create the control number and format

        Workbook wb = new HSSFWorkbook(new FileInputStream(filename));
        wb.setForceFormulaRecalculation(true);
        //Get the row and cell (zero index)
        int rindex = 0;
        int cindex = 0;
        //Get the Notes Fields worksheet
        Sheet ws = wb.getSheet("Sheet1");
        //String fields[] = {"Position1","Position","PositionWC","Positionprefix","raterwc","Client_Name","State","Client_Division"};

        cellSetValNum(ws, rindex, cindex, 120);

        // Write the output to a file
        String excelOutput = "C:\\temp\\UpdatedRT.xls";
        FileOutputStream fileOut = new FileOutputStream(excelOutput);
        wb.write(fileOut);

        System.out.println("Formula Errors are: ");
        FormulaError fevals[] = FormulaError.values();
        for (FormulaError formulaError : fevals) {
            System.out.println("formula error val: " + formulaError.getCode());
        }

        FormulaEvaluator evaluator = wb.getCreationHelper().createFormulaEvaluator();
        evaluator.evaluateAll();
            Sheet sheet = wb.getSheet("Sheet1");
            System.out.println("processing sheet: " + sheet.getSheetName());
            for(Row r : sheet) {
                for(Cell c : r) {
                    if(c.getCellType() == Cell.CELL_TYPE_FORMULA) {

                        System.out.println("Recalcing: "+r.getRowNum()+c.getColumnIndex() + "in "+ sheet.getSheetName());
                        System.out.println("Cell Type before is: "+c.getCellType());
                        //System.out.println("Cell value before is:" +c.getNumericCellValue());
                        evaluator.evaluateFormulaCell(c);
                        evaluator.evaluateAll();
                        System.out.println("Cell Formula is: "+ c.getCellFormula());
                        System.out.println("Cell Type after is: "+c.getCellType());
                        //System.out.println("Cell Value After is: "+c.getNumericCellValue());

                        if(r.getRowNum()== 11){
                            System.out.println("This cell has an error");
                            System.out.println("Cell Error Value is: "+c.getErrorCellValue());
                        }
                        System.out.println("");
                    }
                }
            }

        wb.write(fileOut);
        fileOut.close();

    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

堆栈跟踪：

```
start set cell num
0 120.0
End set cell num
Formula Errors are: 
formula error val: 0
formula error val: 7
formula error val: 15
formula error val: 23
formula error val: 29
formula error val: 36
formula error val: 42
processing sheet: Sheet1
Recalcing: 20in Sheet1
Cell Type before is: 2
Cell Formula is: A1*A2
Cell Type after is: 2

Recalcing: 100in Sheet1
Cell Type before is: 2
Cell Formula is: A3*A12
Cell Type after is: 2

Recalcing: 110in Sheet1
Cell Type before is: 2
Cell Formula is: SUM(A6:A11)
Cell Type after is: 2
This cell has an error
Cell Error Value is: -60 
```

# php - 做某事，返回或继续，PHP 单行语法

> ID：12963527
> 
> 赞同：0
> 
> 时间：2012-10-18T20:50:29.137
> 
> 标签：php, syntax

我正在寻找一种允许我这样做的单行 PHP 语法：

```
function printMsg($do_print, $msg) {
    if ($do_print) {
        echo "$msg\n";
    }
    return $do_print;
}

function test() {
    printMsg(false, 'foo') and return;   <== need a one liner for this
    printMsg(true, 'bar') and return;
}

echo "before"; // before
test();        // bar
echo "after";  // after 
```

到目前为止，我最好的办法是：

```
if (printMsg(false, 'foo')) return; 
```

问题是，在重新格式化我的代码时，我的 IDE ( [NetBeans](https://en.wikipedia.org/wiki/NetBeans) ) 将它放在两行上。这并不引人注目，但我有一段代码有很多这样的调用，并且有一个保持在一行的单行代码会使其更加简洁/可读。

对于我想要实现的目标，PHP 中是否还有其他可能的单行语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:57:42.457

你可以试试

```
function printMsg($msg, $print = false) {
    $print and print("$msg\n");
    return $print;
}

function test($r = null) {
    printMsg('foo') and $r = false;
    printMsg('bar', true) and $r = true;
    return $r;
}

echo "<pre>";
echo "before\n"; // before
test(); // bar
echo "after\n"; // after 
```

输出

```
before
bar
after 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:14:02.137

如果我正确阅读了您的问题，您应该可以通过以下方式完成此操作：

```
function test() {
    printMsg(false, 'foo') || printMsg(true, 'bar');
} 
```

在这里，如果第一个`printMsg()`返回 true，`printMsg()`则不会执行第二个。如果它返回 false，`printMsg()`则将执行第二个。

例子：

```
printMsg(false, 'foo') || printMsg(true, 'bar'); // bar
printMsg(true, 'foo') || printMsg(true, 'bar'); // foo
printMsg(false, 'foo') || printMsg(false, 'bar') || printMsg(true, 'ok'); // ok 
```

但是，空格不会花费任何成本，并且此代码远非可读。六个月后，您将不得不考虑片刻才能弄清楚它的作用，而任何追随您的人乍一看都不太可能理解它。

我强烈建议您将代码分成几行，然后只使用一个`if`语句。

# java - 以编程方式编辑图像以供拼图使用

> ID：12963528
> 
> 赞同：0
> 
> 时间：2012-10-18T20:50:36.160
> 
> 标签：java, android

我正在制作一个滑动拼图（3x3/4x4/5x5，右下角被切掉）。但是，我不知道从哪里开始以编程方式切割拼图中的图像（将从 sdcard 中的自己的画廊或应用程序的数据库中加载）。我一直在寻找互联网，并没有真正帮助我。

剪切此图像并将其存储在新数据库中（并且仍然可以滑动它们）的最佳方法是什么？只是朝着正确的方向推动将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:37:28.417

检查 PhotoGaffe 应用程序。它可在[此处](http://code.google.com/p/photogaffe/)的 Google 代码中找到。
它允许用户在 3x3、4x4、5x5 和 6x6 谜题之间进行选择。

这可以帮助您完成任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:04:22.507

直接来自我目前正在做的事情！

```
 Bitmap main = BitmapFactory.decodeResource(getResources(), R.drawable.puzzle);

    if( main.getHeight() > main.getWidth() ){
        rescalefactor =((float)screenHeight)/main.getHeight();}
    else {
        rescalefactor = ( (float)screenWidth)/main.getWidth();
    }

    main = Bitmap.createScaledBitmap(main,(int)(main.getWidth()*rescalefactor),(int)(main.getHeight()*rescalefactor), false);

    Bitmap cropped;

    LinearLayout layout[] = new LinearLayout[rows];

    int x=0,y=0,i=0,j=0,width=main.getWidth()/column,height=main.getHeight()/rows;

    int count = 1;

    for(i=0;i<rows;++i)
    {
        layout[i] = new LinearLayout(this);

        for(j=0;j<column;++j)
        {
            cropped = Bitmap.createBitmap(main,x,y,width,height);
            image[i][j] = new Tile(this);
            image[i][j].setImageBitmap(cropped);
            image[i][j].row =i;image[i][j].column =j;
            image[i][j].setPadding(1, 1, 1, 1);
            image[i][j].setOnClickListener(this);
            image[i][j].setDrawingCacheEnabled(true);
            image[i][j].setId(count); count++;
            layout[i].addView(image[i][j]);
            x += width;
        }

        x = 0; y += height;
        root.addView(layout[i]);
    } 
```

这是真正完成工作的那一行：

```
cropped = Bitmap.createBitmap(main,x,y,width,height); 
```

Tile 类非常简单。只是一个带有行和列字段的扩展 ImageView：

```
public class Tile extends ImageView {

    public int row, column;
    public Tile(Context context)
    {  super(context);}
} 
```

# python - Python 中基于小部件的 Web 框架（类似于 vaadin、GWT 或 zkoss）

> ID：12963531
> 
> 赞同：5
> 
> 时间：2012-10-18T20:50:45.583
> 
> 标签：python

我基本上来自 Java，但我需要将 Python 用于一个新项目。我更喜欢基于小部件的 Web 框架，例如 zkoss、vaadin、GWT 等。

python有基于小部件的框架吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:57:19.240

您可以使用[Muntjac](http://www.muntjac.org/)，它是 vaadin 的半自动翻译，根据您对 python 的需求，您可以在 vaadin 中使用 jython，但是您将失去对 python 的第 3 方 c 扩展...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T12:36:13.177

请注意，[Vaadin 可以与 Python 一起使用](https://vaadin.com/wiki/-/wiki/Main/Using%20Python)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:11:50.187

[Pyjs](https://github.com/pyjs/pyjs)是 python 中的 GWT 端口，应该可以满足您的需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T09:27:04.667

截至 2022 年，[Justpy](https://justpy.io)似乎是唯一仍在积极维护的。

# ms-access - Server2008R2 (IIS 7) 上的经典 ASP + MS Access - 读取但无法写入

> ID：12963533
> 
> 赞同：0
> 
> 时间：2012-10-18T20:50:56.600
> 
> 标签：ms-access, iis-7, asp-classic, permissions, windows-server-2008-r2

我正在尝试让我的 Classic ASP 应用程序（在 Server 2003/IIS 6 上运行良好）在 IIS 7 上运行。

我做了无数推荐的事情，最后终于把它拉到了从数据库读取的 ASP 首页。

但是当我尝试写入数据库时​​，我得到了错误。“Microsoft JET 数据库引擎错误 '80004005' 操作必须使用可更新查询。”

注意：在这个经典 ASP 站点的应用程序池中，我创建了一个“app_pool_casemodo”标识，然后给出了 [网站文件夹]、[数据库文件夹]、windows\temp、inetpub\temp 和 windows\serviceprofiles\networkservice\AppData\Local \Temp 对该用户的所有修改权限。

我安装了 Microsoft 的 Process Monitor，它告诉我用户帐户“app_pool_casemodo”存在与此注册表项相关的足够读/写权限的问题：HKLM\SOFTWARE\Wow6432Node\Microsoft\Jet\4.0\Engines。因此，我使用 regedit 并浏览到该密钥并确保该帐户具有足够的权限。

尝试使用 DSN 并尝试仅使用指向 ODBC 字符串的文件，并且都显示读取但没有写入问题。

附上过程监视器屏幕的图像。![在此处输入图像描述](../Images/7415af4e06c05df29355753ff2de2f12.png)

请帮忙。很多天以来，我一直在为这件事头疼。感觉我超级接近解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:07:16.907

用户 IUSR_<MACHINENAME> 对访问文件有权限吗？

# amazon-s3 - 用于下载的 amazon s3 如何处理安全性

> ID：12963534
> 
> 赞同：10
> 
> 时间：2012-10-18T20:51:00.650
> 
> 标签：amazon-s3, amazon-web-services

我正在构建一个 Web 应用程序，并正在研究使用 Amazon S3 来存储用户上传。

我担心的是，我不希望用户 A 看到他上传的文档的下载链接是 urltoMyS3/doc1234.pdf 并尝试 urltoMyS3/doc1235.pdf 并获取另一个用户文档。

我能想到的唯一方法是只允许 Web 应用程序连接到 S3，然后检查用户是否有权访问 Web 应用程序上的文件，让 Web 应用程序下载文件，然后提供它给客户。这种方法的问题是应用程序必须首先下载文件，并且不可避免地会减慢用户的下载过程。

Amazon S3 通常如何处理用户文件？还是它通常不用于文件不应该公开的场景？还有其他类似的服务吗？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:58:04.920

您可以实施[Query String Authentication](https://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)，这将解决您的问题。

> 查询字符串身份验证对于让 HTTP 或浏览器访问通常需要身份验证的资源很有用。查询字符串中的签名保护请求。查询字符串身份验证请求需要到期日期。您可以在纪元或 UNIX 时间（自 1970 年 1 月 1 日以来的秒数）中指定任何未来的到期时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T21:02:15.967

您可以通过生成适当的链接来做到这一点，请参阅以下内容

[https://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth](https://docs.aws.amazon.com/AmazonS3/latest/dev/RESTAuthentication.html#RESTAuthenticationQueryStringAuth)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T22:54:09.527

如果有时限的身份验证不起作用（如其他答案中所建议）。您可以考虑实施 s3fs 之类的东西来将您的 S3 存储桶作为驱动器安装在您的 Web 应用程序服务器上。通过这种方式，您可以简单地进行身份验证，然后将文件直接提供给用户，而他们不知道文件驻留在 S3 中。同样，您可以简单地将上传的文件直接写入此 s3fs 挂载。

S3fs，还允许您在您的机器上配置 S3 目录的本地缓存，以便更快地访问。

这在集群 Web 服务器环境中也能很好地工作，因为您可以让每台服务器安装 s3fs 驱动器并在其上独立执行/读取/写入。

[包含更多信息的链接](http://xentek.net/articles/448/installing-fuse-s3fs-and-sshfs-on-ubuntu/)

# c# - 用于 Twitter 的 OAuthWebSecurity“记住我”

> ID：12963536
> 
> 赞同：9
> 
> 时间：2012-10-18T20:51:13.447
> 
> 标签：c#, asp.net-mvc, oauth, twitter-oauth, dotnetopenauth

在 MVC4 C# 上使用 DotNetOpenAuth 为我的应用程序获取来自 Facebook、Twitter、Google+ 和 yahoo 的用户的身份验证。目前，除了 twitter 之外的所有提供商都将允许现有用户在返回站点时无需请求许可即可登录。

我注意到 Twitter 在其页面上的权限请求上有一个“记住我”复选框。即使我选择了它，下次它仍然会询问我的 Twitter 用户名和密码。其他三个提供商会自动对我进行身份验证，而不会看到他们的登录页面。

如何让用户通过 Twitter 登录回到我的网站，而不是再次通过权限请求？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T12:16:23.347

我认为这是因为 Twitter 要求您登录 Twitter。

反过来说，“记住我”按钮会记住用户已授权 Twitter 与您的网站共享其用户数据，并且他们接受下次使用其帐户登录您的网站。但是您仍然必须登录 Twitter 才能获得特定会话的授权。

因此，当用户已经登录 Twitter 时，如果选中了“记住我”复选框，他们就不需要登录您的网站。

另请参阅[开发人员文档 - 登录流程](https://dev.twitter.com/docs/browser-sign-flow)说：

> Twitter 会跟踪授权，因此对于已经登录到 twitter.com 并已授权该应用程序的用户，不会显示任何 UI - 相反，他们会自动重定向回该应用程序。

和

> 如果用户已登录 twitter.com 并已授予对网站的访问权限，则此重定向会立即发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T09:08:14.733

看看这个问题和关于DNOA和Twitter之间具体交互的答案

[MVC4 的 DotNetOpenAuth TwitterClient 示例不尊重先前的登录](https://stackoverflow.com/questions/13034084/mvc4s-dotnetopenauth-twitterclient-sample-does-not-respect-prior-login)

# mysql - 如何正确使用 INSERT INTO SELECT？

> ID：12963537
> 
> 赞同：2
> 
> 时间：2012-10-18T20:51:16.127
> 
> 标签：mysql

我正在尝试将其他表中的记录插入到 store_orders_items 中。例如：

```
INSERT INTO store_orders_items( order_id, sel_item_id, sel_item_price)
  SELECT order_id, sel_item_id, sel_item_price
      FROM orders_ids 
      INNER JOIN store_orders ON store_orders.id = orders_ids.order_id
      INNER JOIN store_shoppertrack ON  store_items.id=store_shoppertrack.sel_item_id
      Where session_id = '".$_COOKIE["PHPSESSID"]."'; 
```

然后我收到以下消息：“字段列表”中的未知列“sel_item_price”。我试图将 sel_item_price 设置为 item_price 无济于事。这是我的表：

### store_orders_items：

```
id| order_id | sel_item_id |sel_item_price|  
-------------------------------------------        
  |          |             |              | 
```

### store_shoppertrack：

```
id| session_id | sel_item_id |date_added|  
-------------------------------------------        
  |            |             |          | 
```

商店订单：

```
id| item_total| order_date| 
---------------------------       
  |            |          | 
```

### 商店物品：

```
id| item_price| item_color|  
---------------------------       
  |           |           | 
```

### 订单ID：

```
id| order_id | status|  
----------------------       
  |          |       | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:14:46.047

jour join 中没有表，它有一个名为 的列`sel_item_price`，也没有一个列`item_price`。`INSERT INTO`与此无关，其`SELECT`本身也会失败。我假设您也想加入该`store_items`表，并从该表中选择列`item_price`以插入到. 你可以这样重写你的：`sel_item_price``store_order_items``SELECT`

```
SELECT order_id, store_shoppertrack.sel_item_id, store_items.item_price AS sel_item_price
  FROM orders_ids 
  INNER JOIN store_orders ON store_orders.id = orders_ids.order_id
  INNER JOIN store_items ON store_items.id = store_orders.sel_item_id
  INNER JOIN store_shoppertrack ON  store_items.id=store_shoppertrack.sel_item_id
  Where session_id = 'foo'; 
```

是可选的`AS sel_item_price`，因为您已经在部件中指定了目标列`INSERT INTO`。但这可能有助于保持一致性，因为`SELECT`现在将 hace 卷标记为与目标表相同的输出。它表明您在`AS`问题中的顺序错误，因此您可能会在这里学到一些东西。

我为您的架构和查询创建了一个[SQL Fiddle 。](http://sqlfiddle.com/#!2/1bbb4/6)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:54:16.487

该字段`sel_item_price`仅在您的`store_orders_items`表中，不属于您的选择查询。这是您列出的错误的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T20:57:08.187

根据此表，唯一的字段`sel_item_price`是表`store_orders_items`中您要插入数据的字段。这就是你得到错误的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T20:59:42.913

您的查询应该是，您正在使用`store_items`别名，但它不在您的加入中

```
INSERT INTO store_orders_items( order_id, sel_item_id, sel_item_price)
  SELECT order_id, sel_item_id, sel_item_price
      FROM orders_ids 
      INNER JOIN store_orders ON store_orders.id = orders_ids.order_id
      INNER JOIN store_order_items 
                  ON store_orders.id = store_order_items.order_id --missing
      INNER JOIN store_shoppertrack 
                  ON store_items.id=store_shoppertrack.sel_item_id
      Where session_id = '".$_COOKIE["PHPSESSID"]."'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T20:59:59.247

您还需要加入反对`store_items`，并将`item_price`此表中的列包含在您的 中`SELECT`，而不是`store_item_price`仅存在于您要插入的表中

# javascript - Web2py - 无法连接“str”和“NoneType”对象

> ID：12963544
> 
> 赞同：0
> 
> 时间：2012-10-18T20:51:37.733
> 
> 标签：javascript, python, ajax, json, web2py

我在让这个 ajax 调用工作时遇到了一些麻烦。ajax 函数将一个简单的变量传递给我的 python 控制器，控制器返回查询结果。我正在使用 Web2py 框架。我得到的错误：无法连接'str'和'NoneType'对象。这是代码：

阿贾克斯调用：

```
<script>
function TestVolumen() {
    var selectVal = $('#zonas :selected').val();    
    $.ajax({
    data: selectVal ,
    url: '/shell/default/ajax2',
    type: 'POST',
    cache: false,
    dataType: 'string',
    success: function(request) {
    //console.log(request[0]);
    //console.log(request[0].zona);
    selectVal = $('#zonas :selected').val();

        for (x=0;x<request.length;x++){
            if (request[x].zona == selectVal ) {
            //alert(request[x].promedio);
            //alert(request[x].zona);
            $('div#tabs .vol').html(request[x].promedio.toFixed(4));

            }
        }

        }
    });
}
</script> 
```

这是python控制器：

```
def ajax2():
import gluon.contrib.simplejson
zona = request.vars

queryvol = "select sells.product1 FROM site inner join zona on site.zone_number = zona.id inner join sells on sells.site = site.id WHERE zona.id =" + zona +" ;', as_dict = True"
vol=db.executesql(queryvol)

return gluon.contrib.simplejson.dumps(vol) 
```

谢谢您的帮助！！对此，我真的非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:02:23.473

您看到的 Python 错误意味着 的值`zona`只是`None`. 我想这是因为您错误地发出了 AJAX 请求。发出请求时，您应该以`{ 'variable_name' : value }`格式定义数据。对于服务器端：注意它`request.vars`是[gluon.storage.Storage 类](http://www.web2py.com/examples/static/epydoc/web2py.gluon.storage.Storage-class.html)字典对象。

因此，要解决此问题 - 通过删除`dataType: 'string',`并设置`data`为类似`{ 'zona' : selectedVal }`. 第二 - 用于`request.vars['zona']`获取服务器端的值。第三 - 在进一步编写 Python 代码之前，请背诵[PEP8](http://www.python.org/dev/peps/pep-0008/)！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:58:10.433

根据 PEP 249，请用户绑定变量。

```
queryvol = """
    INSERT INTO [TABLENAME] 
    VALUES(%s, %s, %s, %s, %s, %s, %s, %d)
    )""" % (a, b, c, d, e, f, g, h, i) 
```

# javascript - 我在哪里可以找到谷歌关闭编辑器插件的列表？

> ID：12963546
> 
> 赞同：0
> 
> 时间：2012-10-18T20:51:41.463
> 
> 标签：javascript, google-closure, google-closure-library

我发现 google 关闭文档很难导航，而且我似乎无法找到我需要参考以与我的编辑器字段一起使用的插件列表？

谁能指出我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:23:57.610

我想这就是你要找的。

[http://closure-library.googlecode.com/svn/docs/namespace_goog_editor_plugins.html](http://closure-library.googlecode.com/svn/docs/namespace_goog_editor_plugins.html)

# javascript - 使用 jQuery Mobile 按下后退按钮时如何执行两个操作？

> ID：12963557
> 
> 赞同：0
> 
> 时间：2012-10-18T20:52:19.993
> 
> 标签：javascript, jquery, mobile

我在页面顶部的导航栏上有一个后退按钮，启用了：

```
<div data-role="page" id="chat" data-add-back-btn="true"> 
```

我想在单击后退按钮时调用 javascript 方法，但不删除后退功能。我试图创建自己的后退按钮，然后调用，`javascript:history.back(1)`但我更喜欢保留原始按钮。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:54:55.097

您不能优先考虑 jQuery 事件和 jQuery 事件堆栈。所以你有两个选择，一个是菊花链你的事件顺序（回调），另一个是删除默认行为并覆盖事件。

您可能想要做的是`event.preventDefault()`您的代码，然后执行`history.back(1)`：

```
$(<backbutton selector>).click(function(event) {
  event.preventDefault();
  alert('this is a test');
  history.go(-1);
}); 
```

# php - 在页面上包含 wordpress 页眉/页脚时，不会显示编辑数据库

> ID：12963558
> 
> 赞同：0
> 
> 时间：2012-10-18T20:52:31.740
> 
> 标签：php, database, wordpress, edit

我使用的是 wordpress 网站，但对于网站的一部分，我决定手动连接到数据库，基本上绕过 wordpress 来编辑数据库和检索结果。

问题是，当我包含 WP 页眉和页脚时，我得到一个空白页，查看源代码会出现错误，尽管我无法理解它。

这是页面显示的源代码：

`<!DOCTYPE html> <!--[if IE 6]> <html id="ie6" <br /> <font size='1'><table class='xdebug-error xe-fatal-error' dir='ltr' border='1' cellspacing='0' cellpadding='1'> <tr><th align='left' bgcolor='#f57900' colspan="5"><span style='background-color: #cc0000; color: #fce94f; font-size: x-large;'>( ! )</span> Fatal error: Call to undefined function language_attributes() in C:\wamp\www\thurston\wp-content\themes\twentyeleven\header.php on line <i>15</i></th></tr> <tr><th align='left' bgcolor='#e9b96e' colspan='5'>Call Stack</th></tr> <tr><th align='center' bgcolor='#eeeeec'>#</th><th align='left' bgcolor='#eeeeec'>Time</th><th align='left' bgcolor='#eeeeec'>Memory</th><th align='left' bgcolor='#eeeeec'>Function</th><th align='left' bgcolor='#eeeeec'>Location</th></tr> <tr><td bgcolor='#eeeeec' align='center'>1</td><td bgcolor='#eeeeec' align='center'>0.0013</td><td bgcolor='#eeeeec' align='right'>388104</td><td bgcolor='#eeeeec'>{main}( )</td><td title='C:\wamp\www\thurston\wp-content\themes\twentyeleven\editdb.php' bgcolor='#eeeeec'>..\editdb.php<b>:</b>0</td></tr> <tr><td bgcolor='#eeeeec' align='center'>2</td><td bgcolor='#eeeeec' align='center'>0.0024</td><td bgcolor='#eeeeec' align='right'>438352</td><td bgcolor='#eeeeec'>require( <font color='#00bb00'>'C:\wamp\www\thurston\wp-content\themes\twentyeleven\header.php'</font> )</td><td title='C:\wamp\www\thurston\wp-content\themes\twentyeleven\editdb.php' bgcolor='#eeeeec'>..\editdb.php<b>:</b>3</td></tr> </table></font>`

很抱歉混乱，但这就是显示的全部。

实际页面的代码是这样的（链接到它，因为本网站上的代码功能不起作用）：

[https://dl.dropbox.com/u/10062971/editdb.php](https://dl.dropbox.com/u/10062971/editdb.php)

和 wordpress 标题：

[https://dl.dropbox.com/u/10062971/header.php](https://dl.dropbox.com/u/10062971/header.php)

添加到数据库，然后在主页上显示来自数据库的信息，只需单击编辑并转到问题所在的 editdb.php 页面。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:06:11.977

language_attributes() 位于 wp-includes/general-template.php 中。

您不能只包含 header.php 和 foter.php 并希望获得最好的结果。您必须包括所有依赖项。

在 [myAnchorText] 之类的页面中插入锚文本，使用输出缓冲来捕获最终的 HTML 并替换锚文本：

```
<?php
// example from php.net
function callback($buffer) {
  // replace all the apples with oranges
  //or whatever logic you have
  return (str_replace("[myAnchorText]", "oranges", $buffer));
}
ob_start("callback");
?>
<html><body>
<p>It's like comparing apples to oranges.</p>
</body></html>
<?php ob_end_flush(); ?>
/* output:
   <html><body>
   <p>It's like comparing oranges to oranges.</p>
   </body></html>
*/ 
```

# asana - 如何使用 Asana REST API 获取子任务？

> ID：12963560
> 
> 赞同：2
> 
> 时间：2012-10-18T20:52:38.790
> 
> 标签：asana

上周 Asana 宣布了新的子任务功能 (http://blog.asana.com/2012/10/introducing-asana-subtasks/)。有谁知道如何使用 REST api 访问子任务？它们没有记录在[http://developer.asana.com/documentation](http://developer.asana.com/documentation)

当我通过电子邮件发送 Asana api-support 时，他们说在这里提问！...不知道那是关于什么的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T23:49:43.327

您可以使用任务 API 来获取子任务列表，例如

[https://app.asana.com/api/1.0/tasks/2139407382883/subtasks](https://app.asana.com/api/1.0/tasks/2139407382883/subtasks)

然后使用通过任务 API 返回的子任务 ID。也就是说，子任务被 API 视为善意的任务。

# html - 具有固定右列和最小左列的两列布局

> ID：12963561
> 
> 赞同：1
> 
> 时间：2012-10-18T20:52:42.350
> 
> 标签：html, css

我需要这样的东西

```
------------------------------
| Some text | fixed-teeeeext |
------------------------------

-----------------------------------
| Some long text | fixed-teeeeext |
------------------------------------

-----------------------------------------
| Some very long te... | fixed-teeeeext |
-----------------------------------------
|<-         a        ->|<-     b      ->|
|<-                 c                 ->| 
```

这都是针对单行文本的。右列 (b) 是固定宽度，整个块 (c) 具有最大宽度。左列 (a) 应该是最小的，但是如果 cb 中没有足够的空间，应该有省略号。

我尝试使用老式表格和各种 CSS 两列布局，但我被卡住了。

**更新**

这在 FF 中有效，但在 IE9 中无效：

```
<table style="font-family: sans-serif;">
  <tr>
    <td style="max-width: 307px; 
               overflow: hidden; 
               text-overflow: ellipsis; 
               white-space: nowrap; 
               display:block; 
               font-weight: bold;">Lorem ipsum dolor sit amet, consectetur </td>
    <td style="width: 123px; color: #545556; font-size: 15px;">ST.2012.10.17.006</td>
  </tr>
</table> 
```

**更新二**

我在这里合并了所有发现：http: [//frightanic.com/web-authoring/ellipsis-in-table-columns/](http://frightanic.com/web-authoring/ellipsis-in-table-columns/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:04:38.413

试试旧的表格结构：1 行有 2 个单元格，第 2 个单元格有固定宽度。对于第一个单元格，添加以下 CSS：

```
.longTd {
border: 1px solid black;
max-width: 100px;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
display:block;
} 
```

`display:block`是这里的关键代码。

编辑 IE9 兼容性，而不是表结构，使用内联块 Div 元素：

```
.longDiv{
overflow:hidden;
text-overflow:ellipsis;
white-space:nowrap;
display:inline-block;
max-width:200px;
}
.shortDiv{
overflow:hidden;
text-overflow:ellipsis;
white-space:nowrap;
display:inline-block;
width:100px;
} 
```

然后是 HTML：

```
<div class="longDiv">
Lorem ipsum dolor sit amet, consectetur blah di blah
</div>
<div class="shortDiv">
Not much text here
</div> 
```

内联块将两个 Div 保持在同一行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:56:53.023

[这](http://css-tricks.com/snippets/css/truncate-string-with-ellipsis/)可以在不支持它的浏览器中添加省略号并优雅地降级：

```
.truncate {
    width: 250px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
} 
```

# iphone - 使用 AUGraphs 进行麦克风输入

> ID：12963565
> 
> 赞同：4
> 
> 时间：2012-10-18T20:52:51.697
> 
> 标签：iphone, ios, audio, microphone, audiounit

我正在尝试创建一个简化的音频应用程序，该应用程序从 iPhone 获取麦克风输入的音量，并使用它来设置从另一个音频单元源播放的声音的音量。

我更愿意使用图表来完成所有这些工作。除了音量级别之外，我不需要来自麦克风的任何信息，并且如前所述，我希望这是一个具有良好性能和最少代码的简化解决方案。

我正在研究一种解决方案，该解决方案将使用带有 remoteIO 作为子类型的“输出”音频类型，文档说它可用于输入或输出或两者兼而有之。

我似乎找不到任何方法来仅使用图表来完成此任务。我以前用 AVAudioRecorder 实现过它，但我对这种方法不满意。我查看了 aurioTouch 和 aurioTouch2 示例，但都没有实现图形方法。Apple 的音频文档指出这是要走的路。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T17:46:26.907

[Novocaine](http://alexbw.github.com/novocaine/)可能是您最简单的解决方案，因为它会立即为您提供来自麦克风的数据。您可能想要获取它提供给您的缓冲区并计算其[RMS](https://en.wikipedia.org/wiki/Root_mean_square)。这会给你一个粗略的“麦克风音量现在有多大”的答案。

要从 AUGraph 的角度回答您的问题，诀窍是很难将 RemoteIO 用作 AUGraph 的输入。从技术上讲，RemoteIO 是一个*输出*单元，这使 AUGraph 有点混乱。通常，您会使用环形缓冲区来缓冲来自 RemoteIO 麦克风输入的音频，然后稍后将其馈送到 AUGraph（即，当 AUGraph 的头部向您的应用程序发出渲染回调时）。当然，如果你到了这一点，你根本不需要 AUGraph，只需检查环形缓冲区阶段的音频电平。

也就是说，假设您的 AUGraph 中有样本。您如何判断它们在给定点的声音有多大？您可以使用具有计量功能的 AUMultiChannelMixer 音频单元。只需在输入范围上启用[kAudioUnitProperty_MeteringMode](http://developer.apple.com/library/ios/documentation/AudioUnit/Reference/AudioUnitPropertiesReference/Reference/reference.html#//apple_ref/doc/c_ref/kAudioUnitProperty_MeteringMode)属性，然后只需检查[kMultiChannelMixerParam_PreAveragePower](http://developer.apple.com/library/ios/documentation/AudioUnit/Reference/AudioUnitParametersReference/Reference/reference.html#//apple_ref/doc/c_ref/kMultiChannelMixerParam_PreAveragePower)参数即可查看在该点通过混音器的音频音量（值将从 -120 浮动到 0，表示 -120dB 到 0dB）。

# python - 是否有更新的 Python 模块可用于与 Minecraft 服务器通信？

> ID：12963566
> 
> 赞同：2
> 
> 时间：2012-10-18T20:52:53.847
> 
> 标签：python, sockets, client, minecraft, packets

我查找了 myne 和 mc3p，但它们甚至不适用于我的 Minecraft 1.8 旧副本。如果有一些模块允许我与 Minecraft 服务器进行通信，就好像我的程序是 Minecraft 客户端一样。如果可用，我可以选择一个允许您模拟 Minecraft 服务器并让 Minecraft 客户端连接到它的模块。我尝试使用 socket 模块和 struct 模块来实现我自己的，但我都不擅长。我有带有 Windows XP 的 Python 2.5。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:11:21.993

[该站点](http://www.wiki.vg/Client_List)有一个客户端实现列表。从那以后，我看到了以下用 Python 实现的客户端：

*   [扭曲的机器人](https://github.com/lukleh/TwistedBot)
*   [pyCraft](https://github.com/ammaraskar/pyCraft)
*   [埃博特](https://github.com/espes/esbot)
*   [客户端](http://hg.sitedethib.com/mcclient/)

请记住，Minecraft 服务器不是为连接到它的 3rd 方客户端而设计的：客户端/服务器协议不是 Mojang 自由支持其他人使用的开放规范。碰巧的是，Mojang 通常不会对 3rd 方 mods 下大力气（事实上，他们[雇佣了一些 3rd 方 modder](http://www.minecraftforum.net/news/417-bukkit-officially-joins-mojang/)）。Mojang 仍在开发他们的官方模组 API，因此现在创建的任何与 Minecraft 接口的库都只能得到支持，并且库作者可以对 Minecraft 系统进行逆向工程，并与 Minecraft 的变化保持同步。

因此，预计您发现的库容易出错或难以在不同版本的 Minecraft 上工作。

# iphone - 将 UIImage 转换为 PDF 时应用程序崩溃

> ID：12963568
> 
> 赞同：1
> 
> 时间：2012-10-18T20:53:02.160
> 
> 标签：iphone, objective-c, ios, uiimageview, uiimage

Apple 使用此报告拒绝了我的应用程序：

[http://nopaste.me/paste/173567898450806a3c774c4](http://nopaste.me/paste/173567898450806a3c774c4)

我无法使用他们提到的相同设备和 iOS 进行复制，即 iPad 3 iOS6。

它们指的是将图像转换为 PDF 并通过电子邮件发送的功能。我使用这段代码来做到这一点：

```
-(IBAction)didPressSaveToPDFButton:(id)sender{

   NSMutableData *pdfData = [NSMutableData data];
   UIGraphicsBeginPDFContextToData(pdfData, imageView.bounds, nil);
   UIGraphicsBeginPDFPage();
   CGContextRef pdfContext = UIGraphicsGetCurrentContext();
   [imageView.layer renderInContext:pdfContext];
   UIGraphicsEndPDFContext();

   NSLog(@"PDF");

   MFMailComposeViewController *vc = [[MFMailComposeViewController alloc] init];
   vc.mailComposeDelegate = self;
   [vc setSubject:@"PDF"];
   [vc addAttachmentData:pdfData mimeType:@"application/pdf" fileName:@"mypdf.pdf"];

   [self presentModalViewController:vc animated:YES];
} 
```

有人看到报告指向什么和/或错误在哪里吗？我看不出有什么问题。

符号化报告：

```
Last Exception Backtrace:
0   CoreFoundation                  0x35e9729e __exceptionPreprocess + 158
1   libobjc.A.dylib                 0x32d1f97a objc_exception_throw + 26
2   UIKit                           0x327e213c -[UIViewController     presentViewController:withTransition:completion:] + 3760
3   UIKit                           0x32904252 -[UIViewController         presentModalViewController:animated:] + 26
4   MyAppName                           0x0009c5a2 -[ViewController didPressSaveToPDFButton:] (ViewController.m:200)
5   UIKit                           0x327e10a8 -[UIApplication sendAction:to:from:forEvent:] + 68
6   UIKit                           0x327e1130 -[UIBarButtonItem(UIInternal) _sendAction:withEvent:] + 116 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:31:03.050

好吧，因为您没有象征性地表示您的崩溃日志，所以很难说出发生了什么。我的猜测是，您的 pdfContext 出现 nil 并且您正试图在具有 nil 上下文的层中呈现您的 imageView。

我会尝试

```
 if (pdfContext) {
   [imageView.layer renderInContext:pdfContext];
 }
 else {
   return;
 } 
```

# elasticsearch - 通过轮胎更新弹性搜索设置

> ID：12963571
> 
> 赞同：2
> 
> 时间：2012-10-18T20:53:15.607
> 
> 标签：elasticsearch, tire

是否可以使用轮胎来更新弹性搜索设置？我有这个 curl 命令，我想自动运行。

```
`curl -XPUT localhost:9200/tweets/_settings -d '{
      "index" : {
          "refresh_interval" : "-1"
      }
  }'` 
```

该值可通过轮胎获得，但我不确定如何应用它。

```
Tweet.tire.settings[:refresh_interval] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T12:33:35.167

可能，但丑陋:)

```
Tire::Configuration.client.put([Tire::Configuration.url, Tweet.index.name].join('/'),
                               index: { refresh_interval: '-1' }) 
```

在以后的版本中会变得更好...

# android - Android Sqlite 处理程序在单独的线程中？

> ID：12963572
> 
> 赞同：1
> 
> 时间：2012-10-18T20:53:18.653
> 
> 标签：android, multithreading, sqlite, thread-safety

我的应用程序需要高数据吞吐量。它通过蓝牙接收传入的数据流，必须对其进行解析、缩放、显示和存储数据。

在阅读了不同的存储方法后，我决定尝试使用 Sqlite 进行数据存储。我已经阅读，它似乎获得了最好的写入性能，我应该使用事务。

但在我去那里之前，我想知道数据库处理程序是否应该只在它自己的线程中。BT 数据处理已经在一个单独的线程中并且运行良好。我看到很多关于从多个线程访问 sqlite 的讨论，但我想我想要一个线程处理数据库连接，并且只使用意图来获取/存储数据..主要是为了断开显示与数据存储的连接。

这会提高我的表现，还是不值得？

我猜我将每秒写 20-50 行，最多 19 个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:46:26.137

请记住，SQLite 完全驻留在内存中。没有磁盘延迟时间来减慢处理速度。因此，我首先会尝试使架构尽可能简单，以避免产生任何不必要的开销。

# wpf - CheckBox 的默认 ControlTemplate

> ID：12963573
> 
> 赞同：4
> 
> 时间：2012-10-18T20:53:23.553
> 
> 标签：wpf, xaml, styles, wpf-controls, controltemplate

我找不到`ControlTemplate`. `CheckBox`有谁知道如何找到它？我只能找到[MSDN 上的 SilverLight 默认复选框模板](http://msdn.microsoft.com/en-us/library/cc278078%28v=vs.95%29.aspx)。

[MSDN 有一个用于 WPF 复选框示例的自定义控件模板，](http://msdn.microsoft.com/en-us/library/ms752319.aspx)它使用 X 而不是复选标记。我正在专门寻找 WPF 标配的默认**复选标记样式**——我只是找不到它的 XAML。

我也[试过保存模板`XamlWriter`无济于事](https://stackoverflow.com/a/3526435/175679)。[从 WPF 控件模板示例下载简单样式模板](http://msdn.microsoft.com/en-us/library/ms771597%28v=vs.90%29.aspx)也只使用 X 而不是经典复选标记。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:18:43.180

我还没有看到任何其他主题的默认样式，但可以在线获得*Classic*，但如果您碰巧找到它们，请在此处发回 :) 我认为 MSDN 上的模板通常是*Classic*主题。

您可以使用 Expression Blend 来获取它，您可以[在此处下载试用版](http://www.microsoft.com/expression/try-it/)。
选择`CheckBox`，转到对象 -> 编辑样式 -> 编辑副本。

假设您喜欢 windows 7 ( *aero* ) 风格，这里是

```
<SolidColorBrush x:Key="CheckBoxFillNormal" Color="#F4F4F4"/>
<SolidColorBrush x:Key="CheckBoxStroke" Color="#8E8F8F"/>
<Style x:Key="EmptyCheckBoxFocusVisual">
    <Setter Property="Control.Template">
        <Setter.Value>
            <ControlTemplate>
                <Rectangle Margin="1" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style x:Key="CheckRadioFocusVisual">
    <Setter Property="Control.Template">
        <Setter.Value>
            <ControlTemplate>
                <Rectangle Margin="14,0,0,0" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style x:Key="CheckBoxStyle1" TargetType="{x:Type CheckBox}">
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="Background" Value="{StaticResource CheckBoxFillNormal}"/>
    <Setter Property="BorderBrush" Value="{StaticResource CheckBoxStroke}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="FocusVisualStyle" Value="{StaticResource EmptyCheckBoxFocusVisual}"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type CheckBox}">
                <BulletDecorator Background="Transparent" SnapsToDevicePixels="true">
                    <BulletDecorator.Bullet>
                        <Microsoft_Windows_Themes:BulletChrome BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" IsChecked="{TemplateBinding IsChecked}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}"/>
                    </BulletDecorator.Bullet>
                    <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                </BulletDecorator>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasContent" Value="true">
                        <Setter Property="FocusVisualStyle" Value="{StaticResource CheckRadioFocusVisual}"/>
                        <Setter Property="Padding" Value="4,0,0,0"/>
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T07:30:47.107

获取所有 WPF 控件控件模板的另一种方法是使用这个奇妙的应用程序：[http ://www.sellsbrothers.com/posts/details/2091](http://www.sellsbrothers.com/posts/details/2091)

# php - 尝试从多维数组中生成包含多个变量的列表

> ID：12963574
> 
> 赞同：0
> 
> 时间：2012-10-18T20:53:35.660
> 
> 标签：php, arrays, multidimensional-array

```
<?php
function itemList(){
    $items= array(
        "skateboard" => array(
            "name" => "Skateboard"
            "type" => "drawings"
            "namestripped" => "skateboard"
        ),
        "looklocal" => array(
            "name" => "Look Local"
            "type" => "graphic-design"
            "namestripped" => "looklocal"
        ),
    );          
    reset($items);          
    while (list(, $value) = each($items)) {
        echo '<li class="item '. $value["type"] .'">';
        echo '<a class="fancybox" rel="group" href="images/portfolio/' . $value["type"] . '/'. $value["namestripped"] . '_l.jpg">';
        echo '<img src="images/portfolio/' . $value["type"] . '/'. $value["namestripped"] . '.jpg" alt="' . $value . '"/>';   
        echo '<h3>' . $value["name"] . '</h3>';                                                   echo '</a>';
        echo '</li>';
    }
}
?> 
```

我把语法搞砸了多严重？当我尝试此代码时，它不会输出任何内容，甚至不会输出 HTML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:58:07.360

您的代码仅定义函数，但不执行它。

你会像这样执行它：

```
itemList(); 
```

**编辑**您的 PHP 代码中也有一些错字。这是固定版本：

```
function itemList()
{
    $items = array(
        "skateboard" => array(
            "name"         => "Skateboard",
            "type"         => "drawings",
            "namestripped" => "skateboard"
        ),
        "looklocal" => array(
            "name"         => "Look Local",
            "type"         => "graphic-design",
            "namestripped" => "looklocal"
        ),
    );          

    foreach ($items AS $item)
    {
        echo '<li class="item '. $item["type"] .'">';
        echo '<a class="fancybox" rel="group" href="images/portfolio/' . $item["type"] . '/'. $item["namestripped"] . '_l.jpg">';
        echo '<img src="images/portfolio/' . $item["type"] . '/'. $item["namestripped"] . '.jpg" alt="' . $item . '"/>';   
        echo '<h3>' . $item["name"] . '</h3>';
        echo '</a>';
        echo '</li>';
    }
}

itemList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:05:30.440

你有一些语法错误。

```
$items= array(
                "skateboard" => array(
                                        "name" => "Skateboard"
                                        "type" => "drawings"
                                        "namestripped" => "skateboard"
                                        ),
                "looklocal" => array(
                                        "name" => "Look Local"
                                        "type" => "graphic-design"
                                        "namestripped" => "looklocal"
                                        ),
                );; 
```

应该：

```
$items= array(
                "skateboard" => array(
                                        "name" => "Skateboard",
                                        "type" => "drawings",
                                        "namestripped" => "skateboard"
                                        ),
                "looklocal" => array(
                                        "name" => "Look Local",
                                        "type" => "graphic-design",
                                        "namestripped" => "looklocal"
                                        )
                ); 
```

您需要在其他地方调用 itemList() 函数。

除此之外，我不知道应该是什么输出。

# c++ - 错误：使用 for 循环时，“=”标记之前的预期主表达式

> ID：12963575
> 
> 赞同：2
> 
> 时间：2012-10-18T20:53:39.437
> 
> 标签：c++

> **可能重复：**
> [需要左值作为赋值的](https://stackoverflow.com/questions/6162438/lvalue-required-as-left-operand-of-assignment)
> [左操作数 需要左值作为赋值的左操作数（C 程序）](https://stackoverflow.com/questions/8570020/lvalue-required-as-left-operand-of-assignment-c-program)

我的代码出现此错误，我不知道为什么。请帮忙！错误是：

错误：“=”标记之前的预期主表达式

这是我遇到问题的代码的一部分。a 和 b 之前已经声明为整数。

```
 int i = 0;
   for( i == a; i < = b; i = i + 1)  // ERROR IS IN THIS LINE
   {  int j = 1;
      int N = static_cast<int>(sqrt(i));

      for( j = 1; j < = N; j = j + 1)   // ERROR IS IN THIS LINE
      {  int P = i%j;
         if( P == 0 && j!= 1 && j!= i)
         {  j = N + 1;
         }
         if( P != 0 && j == N)
         {  cout << i << "is prime" << endl;
         }                                         
      }
   } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:55:14.223

我想你打算这样做

```
if( P != 0 && j == sqrt(i)) 
```

`=`是**赋值**运算符，`==`测试**等价**并返回布尔值。

赋值运算符的[优先级](http://en.cppreference.com/w/cpp/language/operator_precedence)低于逻辑 AND ( `&&`)，因此它被读作

```
(P != 0 && j) = sqrt(i) 
```

这就是报告左值错误的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:10:39.307

您不能在 <= 运算符中放置空格：

```
i < = b; 
```

变成

```
i <= b; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:11:00.570

我会一起玩的。两种情况下的“错误”都是相同的：

```
for( i == a; i < = b; i = i + 1)  // ERROR IS IN THIS LINE
...
for( j = 1; j < = N; j = j + 1)   // ERROR IS IN THIS LINE 
```

错误是“< =”，它不是运算符，也不是有效的 C 或 C++。旁注，第一个循环中的 'i == a' 是无操作的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T20:58:17.550

由于分配的优先级较低，您写的内容：

```
if (P != 0 && j = sqrt(i)) 
```

被解释为：

```
if ((P != 0 && j) = sqrt(i)) 
```

你可以看到这不是左值。`i`如果你想分配to的平方根`j`，你可能应该写：

```
if (P != 0 && (j = sqrt(i)) != 0.0) 
```

假设这`j`是一个浮点变量；如果是整数类型，请使用`0`. `0.0`否则，你应该写：

```
if (P != 0 && j == sqrt(i)) 
```

它进行了明确的相等比较。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T20:56:14.067

写下条件。

```
if( (P != 0) && (j == sqrt(i)) ) 
```

代替

```
if( P != 0 && j = sqrt(i)) 
```

这个`=`符号是赋值运算符，而不是比较运算符。您需要检查`if`，左侧等于右侧。

# javascript - Javascript 在部署之前检查图像是否存在

> ID：12963583
> 
> 赞同：0
> 
> 时间：2012-10-18T20:54:14.910
> 
> 标签：javascript, jquery, image

> **可能重复：**
> [如何检查 jQuery 或 Javascript 中是否存在文件？](https://stackoverflow.com/questions/3646914/how-do-i-check-if-file-exists-in-jquery-or-javascript)

我正在从 XML 文件构建这个动态滑块。滑块从 Target 的服务器加载图像。不幸的是，并非 xml 上的所有图像都存在于服务器上，我想避免空白幻灯片（一旦获得列表，我将图像作为背景图像放置在每张幻灯片上）。

有没有办法（使用javascript）在我费心填充我的滑块之前检查这些图像不是404？我不能做 ajax，因为它们在我无法访问或控制的另一台服务器上。

我只需要在将错误图像放入列表（数组）之前检测到错误图像，我就可以输入我的滑块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:59:41.993

您可以使用 java 脚本函数并使用 url 在每个 img 上调用它来执行此操作。

```
function checkImage(src) {
  var img = new Image();
  img.onload = function() {
    console.log("Image is good");
    img.src = src; //
    return true;
  };
  img.onerror = function() {
    console.log("Image is bad");
    return false;
  };
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T20:57:20.100

你可以做的是计算图像的数量，连接 onload 事件，加载 using JS 并计算成功。超时后，假设他们失败了。

# git - git eclipse 集成

> ID：12963585
> 
> 赞同：2
> 
> 时间：2012-10-18T20:54:25.983
> 
> 标签：git

我已经在我的 eclipse(3.7) 中安装了 EGit 插件。我已经使用 putty 创建了一条到我的 git 存储库所在的服务器的隧道。现在，我尝试在 Windows->Preferences->Git->Configurations 下更改 Git 配置。在系统属性下添加了以下 http 设置： http proxyHost : localhost proxyPort : 3128 (我的 ssh tunner 建立的端口) postBuffer : 524288000

在保存这些配置时，我收到以下错误：

```
java.io.IOException: Access is denied
at java.io.WinNTFileSystem.createFileExclusively(Native Method)
at java.io.File.createNewFile(Unknown Source)
at org.eclipse.jgit.storage.file.LockFile.lock(LockFile.java:159)
at org.eclipse.jgit.storage.file.FileBasedConfig.save(FileBasedConfig.java:175)
at org.eclipse.egit.ui.internal.preferences.ConfigurationEditorComponent.save(ConfigurationEditorComponent.java:151)
at org.eclipse.egit.ui.internal.preferences.GlobalConfigurationPreferencePage.performOk(GlobalConfigurationPreferencePage.java:201)
at org.eclipse.jface.preference.PreferenceDialog$13.run(PreferenceDialog.java:964)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.preference.PreferenceDialog.okPressed(PreferenceDialog.java:944)
at org.eclipse.ui.internal.dialogs.FilteredPreferenceDialog.okPressed(FilteredPreferenceDialog.java:447)
at org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.okPressed(WorkbenchPreferenceDialog.java:171)
at org.eclipse.jface.preference.PreferenceDialog.buttonPressed(PreferenceDialog.java:233)
at org.eclipse.jface.dialogs.Dialog$2.widgetSelected(Dialog.java:624)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:240)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
at org.eclipse.jface.window.Window.open(Window.java:801)
at org.eclipse.ui.internal.dialogs.WorkbenchPreferenceDialog.open(WorkbenchPreferenceDialog.java:215)
at org.eclipse.ui.internal.handlers.ShowPreferencePageHandler.execute(ShowPreferencePageHandler.java:54)
at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:293)
at org.eclipse.core.commands.Command.executeWithChecks(Command.java:476)
at org.eclipse.core.commands.ParameterizedCommand.executeWithChecks(ParameterizedCommand.java:508)
at org.eclipse.ui.internal.handlers.HandlerService.executeCommand(HandlerService.java:169)
at org.eclipse.ui.internal.handlers.SlaveHandlerService.executeCommand(SlaveHandlerService.java:241)
at org.eclipse.ui.internal.actions.CommandAction.runWithEvent(CommandAction.java:157)
at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
at org.eclipse.equinox.launcher.Main.run(Main.java:1410)
at org.eclipse.equinox.launcher.Main.main(Main.java:1386) 
```

我需要更改一些权限设置吗？有人可以解释这个错误的含义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:58:25.887

尝试以管理员身份运行 eclipse。

右键单击 eclipse **Run as administrator**。

# facebook - 无法在 App Dashboard 中创建 Facebook 应用

> ID：12963588
> 
> 赞同：0
> 
> 时间：2012-10-18T20:54:38.177
> 
> 标签：facebook, dashboard

好的，所以我正在使用我的个人 Facebook 帐户，该帐户有一个经过验证的手机号码。我可以进入 App Dashboard 页面，并可以单击“+创建新应用”按钮。我使用绿灯亮起的名称完成对话框，然后单击提交按钮。

我等待了几秒钟，然后我被转回到主应用程序仪表板页面 - 不存在新应用程序。

这是个人账户，不是公司账户。

仍然坚持这个问题 - 我有没有机会获得 FB 开发支持帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:35:22.117

也许您的帐户太新了。但通常你会收到通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:03:05.867

我有同样的问题，终于得到了这个工作。奇怪的是，使用 IE 访问 Facebook 开发者应用程序页面[https://facebook.com/developers?ref=ts&fref=ts](https://facebook.com/developers?ref=ts&fref=ts)并转到应用程序解决了问题。使用 Firefox 会导致无限重定向。我创建但看不到的所有应用程序都开始显示。

# jquery - 带有通过 JavaScript 加载的按钮的 jQuery 委托

> ID：12963593
> 
> 赞同：1
> 
> 时间：2012-10-18T20:54:46.283
> 
> 标签：jquery, delegates

我已经搜索了 stackoverflow 以及网络的其他部分，但没有找到我想要做的事情的明确答案。我有以下 HTML 代码：

```
<a id="orderPadReviewSubmitBtn" href="#" class="portlet-lightGrey-button  float-right"><span>Submit order</span></a> 
```

它是通过单击按钮通过 JavaScript 加载的。我正在尝试使用委托，因为**网站上的 jQuery 是 1.4.2**，所以没有“on()”可用。

我正在尝试的代码是这样的：

```
$("a[id=orderPadReviewSubmitBtn]").delegate("span","load", function(){
$("#orderPadReviewSubmitBtn").mousedown(function(){alert("Order Submitted");}); }); 
```

我也试过：

```
$("#orderPadReviewSubmitBtn").delegate("span","load", function(){
$("#orderPadReviewSubmitBtn").mousedown(function(){alert("Order Submitted");}); }) 
```

如果在加载上述按钮后加载这些工作，但如果我在加载按钮之前运行 jQuery，则不会。

我的最终目标是一旦加载此按钮并且有人单击它，就能够运行其他一些功能。

我有一种感觉，我缺少一些简单的东西，非常感谢您在查找问题方面的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:57:08.290

您不需要使用加载事件处理程序

```
// bind event handler to parent that exists at the time dom is ready
// it will then listen for click event from element with id=orderPadReviewSubmitBtn
$(function(){ // <-- put your code inside a document.ready function
    $('body').delegate('#orderPadReviewSubmitBtn','click',function(){
        alert("Order Submitted");
    });   
}); 
```

替换`body`为最近的静态父元素

我认为您不了解委派的工作原理-这就是您认为需要该`load`活动的原因。它的工作原理是将它绑定到一个已经存在并且是静态的父元素（意味着它不会改变） - 然后它将监听您指定的事件，因为它们从您使用的特定元素/元素中冒泡选择（在这种情况下，您的元素带有`id=orderPadReviewSubmitBtn`)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:00:19.297

你可以使用[`.live()`](http://api.jquery.com/live/)，它在 1.4 中没有贬值，你的代码最终会是这样的：

```
$("a[id=orderPadReviewSubmitBtn]").live("mousedown", function() {
    alert("Order Submitted");
});​ 
```

演示：http: [//jsfiddle.net/SO_AMK/d2SYE/](http://jsfiddle.net/SO_AMK/d2SYE/)

而且，正如你所提到的，如果你想调用另一个函数，你会使用这个：

```
$("a[id=orderPadReviewSubmitBtn]").live("mousedown", newFunc);

function newFunc() {
    alert("Order Submitted");
}​ 
```

演示：http: [//jsfiddle.net/SO_AMK/YwNyP/](http://jsfiddle.net/SO_AMK/YwNyP/)

# google-chrome - SSRS 报告浏览器兼容性问题

> ID：12963596
> 
> 赞同：2
> 
> 时间：2012-10-18T20:54:55.160
> 
> 标签：google-chrome, deployment, reporting-services, safari

我正在使用 SSRS 2008 将几个报告部署到我的服务器。一切在 IE 上运行良好。但 Chrome 和 Safari 不显示任何报告。我可以看到“报告”文件夹，但是当我单击文件夹内的报告时，它什么也不显示，而 IE 运行时没有任何错误。说到错误，Firefox 也会在更复杂的报告中显示错误……</p>

我已经浏览了这个论坛上的所有解决方案 [SSRS 2008 R2 - SSRS 2012 - ReportViewer：报告在 Safari 和 Chrome 中是空白的](https://stackoverflow.com/questions/5968082/ssrs-2008-r2-reports-are-blank-in-safari-and-chrome)所做的是将报告部署到我的 localhost/reportserver，然后我浏览到 localhost/reports 以查看报告是否已部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:03:47.793

检查以确保在浏览器中启用了 JavaScript。

我还是遇到了一些麻烦，所以我为 Chrome 安装了 IE 标签：

[https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd](https://chrome.google.com/webstore/detail/ie-tab/hehijbfgiekmjfkfjpbkbammjbdenadd)

以下是有关非 IE SSRS 浏览器支持的一些附加信息：

[http://msdn.microsoft.com/en-us/library/ms156511.aspx](http://msdn.microsoft.com/en-us/library/ms156511.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T15:25:14.613

我把解决方案放在这里：

[SSRS 2008 R2 - SSRS 2012 - ReportViewer：在 Safari/Chrome 中报告，但在 Firefox/Internet Explorer 8 中运行良好……为什么？](https://stackoverflow.com/questions/5428017/cannot-view-ssrs-2008-r2-ssrs-2012-reports-in-safari-chrome-but-works-fine-in/18502489#18502489)

见标题：CSS Based System Wide Solution

# python - 从 Python 中的多个文件返回 XML 值？

> ID：12963600
> 
> 赞同：1
> 
> 时间：2012-10-18T20:55:02.133
> 
> 标签：python, xml, cherrypy

所以我正在开发一个基于浏览器的程序，用 Python 编写，它从目录中的多个文件解析 XML 数据，然后返回页面上某些 XML 标记的值。我已经成功地能够从其中一个 XML 文件中返回值，但我希望从目录中的每个文件中收集数据并以电子表格格式返回值。如何解析每个 XML 文件中的数据？此外，XML 文件不是静态的，会有新文件来来去去。谢谢！下面是我的代码：

```
from xml.dom.minidom import parseString

import os
path = 'C:\Vestigo\XML'
listing = os.listdir(path)
for infile in listing:
    print infile

file = open(os.path.join(path,infile),'r')

data = file.read()
file.close()

dom = parseString(data)

xmlTag0 = dom.getElementsByTagName('Extrinsic')[0].toxml()
xmlData0 = xmlTag0.replace('<Extrinsic>','').replace('</Extrinsic>','')
xmlTag1 = dom.getElementsByTagName('DeliverTo')[0].toxml()
xmlData1 = xmlTag1.replace('<DeliverTo>','').replace('</DeliverTo>','')
xmlTag2 = dom.getElementsByTagName('Street1')[0].toxml()
xmlData2 = xmlTag2.replace('<Street1>','').replace('</Street1>','')
xmlTag3 = dom.getElementsByTagName('City')[0].toxml()
xmlData3 = xmlTag3.replace('<City>','').replace('</City>','')
xmlTag4 = dom.getElementsByTagName('State')[0].toxml()
xmlData4 = xmlTag4.replace('<State>','').replace('</State>','')
xmlTag5 = dom.getElementsByTagName('PostalCode')[0].toxml()
xmlData5 = xmlTag5.replace('<PostalCode>','').replace('</PostalCode>','')

import cherrypy
class Root(object):
    def index(self):
        return ('Order Number:', ' ', xmlData0, '<br>Name: ', xmlData1, '<br>Street   Address: ', xmlData2, '<br>City/State/Zip: ', xmlData3, ', ', xmlData4, ' ', xmlData5, ' ', """<br><br><a href="/exit">Quit</a>""")
    index.exposed = True

    def exit(self):
        raise SystemExit(0)
    exit.exposed = True

def start():
    import webbrowser
    cherrypy.tree.mount(Root(), '/')
    cherrypy.engine.start_with_callback(
        webbrowser.open,
        ('http://localhost:8080/',),
        )
    cherrypy.engine.block()

if __name__=='__main__':
    start() 
```

**编辑：**用我下面的解决方案更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:25:01.687

为了从目录中的每个文件中提取数据，我使用了以下代码：

```
from xml.dom.minidom import parse, parseString
import os, glob, re
import cherrypy
class Root(object):
    def index(self):
        path = 'C:\Vestigo\XML'

        TOTALXML = len(glob.glob(os.path.join(path, '*.xml')))
        print TOTALXML
        i = 0

        for XMLFile in glob.glob(os.path.join(path, '*.xml')):
            xmldoc = parse(XMLFile)
            order_number = xmldoc.getElementsByTagName('Extrinsic')[0].firstChild.data
            order_name = xmldoc.getElementsByTagName('DeliverTo')[0].firstChild.data
            street1 = xmldoc.getElementsByTagName('Street1')[0].firstChild.data
            state = xmldoc.getElementsByTagName('State')[0].firstChild.data
            zip_code = xmldoc.getElementsByTagName('PostalCode')[0].firstChild.data
            OUTPUTi = order_number+' '+order_name+' '+street1+' '+state+' '+zip_code
            i += 1
            print OUTPUTi
        return (OUTPUTi, """<br><br><a href="/exit">Quit</a>""")
    index.exposed = True

    def exit(self):
        raise SystemExit(0)
    exit.exposed = True

def start():
    import webbrowser
    cherrypy.tree.mount(Root(), '/')
    cherrypy.engine.start_with_callback(
        webbrowser.open,
        ('http://localhost:8080/',),
        )
    cherrypy.engine.block()

if __name__=='__main__':
    start() 
```

感谢大家的帮助，以及回答我自己的问题希娜的提示！

# azure - 在 Azure Web 角色上部署 PDB

> ID：12963604
> 
> 赞同：18
> 
> 时间：2012-10-18T20:55:14.220
> 
> 标签：azure, elmah, azure-web-roles, azure-packaging

我有一个通过 VS 2012 Azure 项目部署的项目（从 VS 中开始，而不是手动）。Web 角色项目设置为在发布模式下构建“仅 pdb”调试信息，但在部署 PDB 时不会打包并复制到 Azure 上的 Web 角色 VM。如何让 PDB 包含在包中并传输到服务器？

我想在生产中包含我的 PDB 的原因是因为我想在我的 ELMAH 报告中获取行号。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-28T05:12:28.193

我使用具有以下设置的基本“文件，新云项目”进行了尝试：

1.  Web 项目 -> 属性 -> 构建 -> 高级 -> 调试信息：**pdb-only**
2.  Web 项目 -> 属性 -> 打包/发布 Web -> 取消选中**排除生成的调试符号**

当我使用这 2 个设置编译和部署基本解决方案时，我在文件夹中找到了`WebRole1.dll`和。`WebRole1.pdb``F:\AppRoot\Bin\`

这是你要找的吗？

# ios - 在自定义 NSURLProtocol 上使用 AVURLAsset

> ID：12963606
> 
> 赞同：4
> 
> 时间：2012-10-18T20:55:19.900
> 
> 标签：ios, cocoa, avfoundation, nsurlprotocol

我编写了一个自定义的 NSURLProtocol（称为“memory:”），它允许我根据名称从 NSDictionary 中获取存储的 NSData 项。例如，这段代码注册了 NSURLProtocol 类并添加了一些数据：

```
[VPMemoryURLProtocol register];
[VPMemoryURLProtocol addData:data withName:@"video"]; 
```

这使我可以通过“memory://video”之类的 url 引用 NSData。

下面是我的自定义 NSURLProtocol 实现：

```
NSMutableDictionary* gMemoryMap = nil;

@implementation VPMemoryURLProtocol
{
}

+ (void)register
{
    static BOOL inited = NO;
    if (!inited)
    {
        [NSURLProtocol registerClass:[VPMemoryURLProtocol class]];
        inited = YES;
    }
}

+ (void)addData:(NSData *)data withName:(NSString *)name
{
    if (!gMemoryMap)
    {
        gMemoryMap = [NSMutableDictionary new];
    }

    gMemoryMap[name] = data;
}

+ (BOOL)canInitWithRequest:(NSURLRequest *)request
{
    NSLog(@"URL: %@, Scheme: %@",
          [[request URL] absoluteString],
          [[request URL] scheme]);

    NSString* theScheme = [[request URL] scheme];
    return [theScheme caseInsensitiveCompare:@"memory"] == NSOrderedSame;
}

+ (NSURLRequest *)canonicalRequestForRequest:(NSURLRequest *)request
{
    return request;
}

- (void)startLoading
{
    NSString* name = [[self.request URL] path];
    NSData* data = gMemoryMap[name];

    NSURLResponse* response = [[NSURLResponse alloc] initWithURL:[self.request URL]                                                                
                                                        MIMEType:@"video/mp4"
                                           expectedContentLength:-1
                                                textEncodingName:nil];

    id<NSURLProtocolClient> client = [self client];
    [client URLProtocol:self didReceiveResponse:response              
                             cacheStoragePolicy:NSURLCacheStorageNotAllowed];
    [client URLProtocol:self didLoadData:data];
    [client URLProtocolDidFinishLoading:self];
}

- (void)stopLoading
{

} 
```

我不确定这段代码是否有效，但这不是我遇到的问题。尽管注册了自定义协议，但当我尝试在此代码中使用 URL 时，永远不会调用 canInitWithRequest:：

```
NSURL* url = [NSURL URLWithString:@"memory://video"];
AVURLAsset* asset = [[AVURLAsset alloc] initWithURL:url options:nil];

AVAssetImageGenerator* imageGen = [AVAssetImageGenerator assetImageGeneratorWithAsset:asset];
CMTime time = CMTimeMakeWithSeconds(0, 600);
NSError* error;
CMTime actualTime;

CGImageRef image = [imageGen copyCGImageAtTime:time
                                    actualTime:&actualTime
                                         error:&error];

UIImage* uiImage = [UIImage imageWithCGImage:image];
CGImageRelease(image); 
```

如果我使用“memory://video”，图像始终为零，但如果我使用“file:///...”，则效果很好。我错过了什么？为什么不调用 canInitWithRequest ？AVFoundation 是否只支持特定的 URL 协议而不支持自定义的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T22:58:50.643

当然，过去只支持特定 URL 方案的基础——作为电子书开发人员，我已经看到通过 URL 加载的任何媒体类型都会发生这种情况，例如`epub://`或`zip://`. 在这些情况下，在 iOS 5.x 和更早版本上，跟踪相关代码将最终以 QuickTime 方法结束，该方法将 URL 方案与少数支持的方案进行比较：`file`、`http`、`https`以及`ftp`iTunes 使用的任何内容——我忘记它叫什么了。

然而，在 iOS 6+ 中，AVFoundation 中有一个新的 API，旨在提供帮助。虽然我没有亲自使用它，但它应该是这样工作的：

```
NSURL* url = [NSURL URLWithString:@"memory://video"];
AVURLAsset* asset = [[AVURLAsset alloc] initWithURL:url options:nil];

////////////////////////////////////////////////////////////////
// NEW CODE START

AVAssetResourceLoader* loader = [asset resourceLoader];
id<AVAssetResourceLoaderDelegate> delegate = [SomeClass newInstanceWithNSURLProtocolClass: [VPMemoryURLProtocol class]];
[loader setDelegate: delegate queue: some_dispatch_queue];

// NEW CODE END
////////////////////////////////////////////////////////////////

AVAssetImageGenerator* imageGen = [AVAssetImageGenerator assetImageGeneratorWithAsset:asset];
CMTime time = CMTimeMakeWithSeconds(0, 600); 
```

有了这个，你只需要在`AVAssetResourceLoader`某个地方实现协议，这非常简单，因为[它只包含一个方法](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAssetResourceLoader_Class/Reference/Reference.html)。由于您已经有了一个`NSURLProtocol`实现，所有实际工作都已完成，您可以简单地将实际工作直接交给 Cocoa 加载系统或您的协议类。

再一次，我要指出我还没有真正利用它，所以上面的内容完全是理论上的。

# video - android ffmpeg 设置帧率

> ID：12963607
> 
> 赞同：0
> 
> 时间：2012-10-18T20:55:25.110
> 
> 标签：video, android-ndk, ffmpeg, frame-rate

我正在从相机获取视频流，并且正在将帧写入文件中。问题是它们是以太大的帧速率编写的，我找不到以编程方式设置它的方法。所以我想我正在寻找控制台指令“-r [framerate]”调用的C函数

我尝试在 avFormatContext 中设置该选项，但没有效果。

```
AVDictionary *options=NULL; 
av_dict_set(&options,"r","1",0);
    avio_open2(&oc->pb, "path", AVIO_FLAG_WRITE,options); 
```

之后，我正在阅读框架`av_read_frame(context,&packet)`并用它们编写它们`av_write_frame(oc,&packet);`

知道我做错了什么或者我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T15:19:44.270

您可能希望自己控制相机帧速率。

```
#include <stdio.h>
#include <windows.h>  
#include <time.h>
...
double ticks; 
int fps=25; //25 FPS for example
uint64_t  frequency;        // ticks per second
double freq,et; 
double mspf=1000.0/(double)fps;

QueryPerformanceFrequency((LARGE_INTEGER *) &frequency);
freq= (frequency * 1000); 

while(???) {
    ticks=GetTickCount(); // start tick 

    //Read/write function
    av_read_frame(context,&packet);
    av_write_frame(oc,&packet);

    et=(GetTickCount()-ticks)/freq; // elapsed time for current frame, in milliseconds 
    av_usleep((et+1<mspf?mspf-et:1) * 1000);
} 
```

# visual-studio-2010 - 我安装的 True-type 字体未在 Visual Studio 2010 文本编辑器中呈现

> ID：12963610
> 
> 赞同：5
> 
> 时间：2012-10-18T20:55:42.740
> 
> 标签：visual-studio-2010, fonts, ide

我正在尝试在运行 Win XP Professional SP3（32 位）的机器上更改 VS 2010 Ultimate 中文本编辑器的字体，但它无法正确呈现任何已安装的字体 - 但可以正常使用默认字体。*（起初，我以为只有 Monaco 字体，但我最近意识到它不止于此。）*

我已经在我的 PC 上测试了一些字体，包括*Inconsolata*、*Futurist fixed-width*和*Monaco*，如果我将字体更改为我安装的任何真字体，尽管**字体和颜色中的字体名称会呈现为***Consolas*窗口显示新的字体名称。

 **我成功地在同事的机器上应用了 Monaco 字体（我们都有相同的操作系统和 VS 版本）。我还可以在我的机器上更改 VS 2008 中的字体，看起来也不错。另外，我可以在我的 MS Word 和 Excel 应用程序中将字体更改为上述任何一种字体，所以我认为这不是系统范围的问题。

我在 SO 上遇到了[这篇非常古老的帖子](https://stackoverflow.com/questions/255855/is-it-true-visual-studio-cant-handle-fonts-installed-after-it-was)，它解决了类似的问题*（甚至可能与 2010 年无关）*，但我确实尝试了列出的一些技术，但没有任何成功。

这是我到目前为止所做的（不一定以相同的顺序），但没有任何效果 -

*   根据评论中的建议[重置Visual Studio](http://msdn.microsoft.com/en-US/library/ms241273(v=vs.100).aspx)
*   安装字体后重启IDE
*   关闭VS，卸载重新安装字体，再次打开VS
*   以安全模式打开VS，禁用扩展，再次重新打开VS
*   修复/重新安装 Visual Studio

我的VS是否有可能已损坏？（如果是这样的话，修复不会解决这个问题吗？）

我还从[Microsoft Connect 错误](http://connect.microsoft.com/VisualStudio/feedback/details/544089/can-t-use-fixedsys-strange-rendering-engine)中了解到 VS 2010 文本编辑器已使用 WPF 重建 - 这可能是导致问题的原因吗？奇怪的是，我可以成功地将**环境字体**（VS 菜单、解决方案资源管理器窗口等的字体）设置为我喜欢的任何字体 - 我不能只为我们可以输入文本的窗口设置字体，比如 Text编辑器、监视窗口、立即窗口等。

有没有其他人遇到过这种问题？有没有人有办法解决吗？我现在没有想法，我最后的手段似乎是完全卸载 VS 并重新安装（但同样，我不确定这是否也能奏效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T20:21:26.893

问题似乎与我在机器上安装 Visual Studio 的方式有关 - 上周，我的电脑开始冻结并突然出现传说中的 BSOD - 技术支持人员建议重新映像机器，我不情愿地同意了因为那是我老化机器的万灵药。今天，支持工程师过来并用他们为我构建的新硬盘替换了我现有的硬盘驱动器 - 他们非常友好地将我当前的应用程序推送到新映像上。

交换顺利完成后，支持人员进行了一些健全性检查并竖起大拇指，我再次安装了 Monaco 字体（与我最初的来源相同），并应用了新字体，并打开了一个新项目 - 并且，瞧，我现在看到了 Monaco 字体的代码！在我的机器上看到 Monaco 字体感觉很好——这让我困扰了大约 8 个月。我仍然不确定是什么解决了这个问题，但我很高兴我终于可以结束我一直有的挫败感。**

# java - 有很多活动好吗

> ID：12963617
> 
> 赞同：1
> 
> 时间：2012-10-18T20:56:13.750
> 
> 标签：java, android, android-activity

我想知道有很多活动是否比在一个活动中拥有很多不同的逻辑更好。

我的困境：我正在工作中创建一个应用程序，如果我为其中的每个主要实现使用单独的活动（例如，5 个带有视频播放器的活动，但每个活动都需要一个单独的逻辑，甚至在同一活动中需要 2 个视频播放器），那么我将结束如果不是更多，则在大约 40 项活动的范围内。另一方面，我可以将我可以分离的逻辑（例如视频播放器）放入它自己的库中，以便可以从任何活动中调用它。但是如果我将类似的项目放在同一个活动中，它的代码将运行到几千行并且难以调试。

所以我想我的问题是有很多活动可以（活动堆栈最多有 8 个活动）或者这会显着减慢我的应用程序。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:59:13.317

应该没问题。加载的活动数量不会影响任何性能（只要它们在为该进程分配的内存中）。如果需要 Dalvik GC 未使用的对象。

# github - 为什么我看不到cloudbees github插件

> ID：12963619
> 
> 赞同：1
> 
> 时间：2012-10-18T20:56:15.690
> 
> 标签：github, cloudbees

尝试按照[http://developer.cloudbees.com/bin/view/DEV/GitHub+Commit+Hooks+HOWTO上的说明进行操作](http://developer.cloudbees.com/bin/view/DEV/GitHub+Commit+Hooks+HOWTO)

但我在可用或已安装的 jenkins 插件列表中没有看到 github 插件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T14:50:24.333

好的，所以我联系了 CB 支持，他们告诉我文档所说的：安装插件。我去确认我仍然没有可用的插件，它现在可用。不确定他们是否改变了某些东西或者这只是一个小故障，但我现在能够按照文档并让 github 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:00:42.020

Cloudbeeds 博客确实列出了[要求](http://blog.cloudbees.com/2012/01/better-integration-between-jenkins-and.html)：

> ### 插件使用要求
> 
> *   詹金斯 1.400 或更新版本
> *   Jenkins Git 插件版本 1.1.12 或更新版本
> *   至少要构建一个 GitHub 托管项目；-)
> 
> ### 如何使用它的分步说明：安装
> 
> *   转到您的 Jenkins 实例根页面。
> *   如果您的 Jenkins 实例启用了安全性，请以具有总体 | 管理权限。
> *   选择屏幕左侧的 Manage Jenkins 链接。
> *   选择管理插件链接。
> *   在 Available 选项卡上，选择 Github Plugin 并单击页面底部的 Download and Install 按钮（如果您没有安装 Git Plugin，请不要担心，Jenkins 足够聪明，可以安装/升级 Git 插件，其中必需的）。
> *   下载插件后重新启动 Jenkins（注意：Jenkins 1.442 或更新版本的用户应该知道插件当前需要重新启动才能正常运行）。

因此，您看不到[Jenkins GitHub 插件](https://wiki.jenkins-ci.org/display/JENKINS/Git+Plugin)的原因可能有很多（例如 Jenkins 版本） ，最常见的原因是登录非管理员帐户。

* * *

正如[OP TomL](https://stackoverflow.com/users/188306/toml)在[他的回答](https://stackoverflow.com/a/13014001/6309)中确认的那样，如果插件*仍然*无法安装，则只有 CB 支持才能使其可见。

# android - Android - 将动态 xml 添加到布局

> ID：12963624
> 
> 赞同：0
> 
> 时间：2012-10-18T20:56:42.457
> 
> 标签：android, xml, layout

我想在布局文件和 xml 文件之间合并。但是，我的问题是如何动态地做到这一点。

我的意思是我有通用工具栏文件，其中包含：我的应用程序图标、活动名称和按钮的线性布局空间。我想将此工具栏合并到每个活动中，以便所有活动都可以将自己的按钮放在工具栏中的线性布局中。

我已经尝试这样做，我编写了在文件夹中调用`toolbar.xml`的工具栏文件`layout`。每个活动都包括这样的工具栏： `<include layout="@layout/toolbar.xml" />`，但我不知道如何插入按钮。

我可以只使用活动的 xml 来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:00:50.930

要从代码中添加按钮（我猜这是你想要做的），你只需要一个容器来插入你的按钮。您可以只添加`<LinearLayout>`到您的布局 XML 文件（确保您的布局有 id，即：

```
<LinearLayout>
   ...
   android:id="@+id/button_container"`
</LinearLayout> 
```

他们在您的代码中将您的按钮创建为任何其他对象：

```
Button myButton = new Button( mContext ); 
```

然后找到你的按钮容器：

```
LinearLayout buttonContainer = findViewById(R.id.button_container); 
```

并将您的按钮添加到其中：

```
buttonContainer.addView( myButton ); 
```

要了解更多信息，请参阅[ViewGroup 文档](http://developer.android.com/reference/android/view/ViewGroup.html)

# ruby - 正则表达式：从 CSS 文件中提取 CSS 样式

> ID：12963626
> 
> 赞同：1
> 
> 时间：2012-10-18T20:56:49.777
> 
> 标签：ruby, regex, perl

我有一个很大的 CSS 文件，其中包含我们内部框架所需的所有 CSS，但我只需要一些样式。所以我想提取我想要的样式。我使用正则表达式来提取它们：

```
cssFileContent.scan(/\.#{cssName}.*?\{.+?\}/im) 
```

在 Ruby 中，`scan`意味着从字符串中提取模式，`cssName is`CSS 样式名称 i - 不区分大小写 m - 点匹配所有内容，因此 \n 也将被匹配

它给了我一些样式块，但每次都跳过一个。例如，我有`.abc-style { }`and `.def-style { }`，但结果如下：

```
.abc-style {

}

} 
```

所以 def-style 被跳过。

有人可以告诉我为什么吗？以及如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:56:48.193

我不会使用正则表达式，而是使用 CSS 解析器来执行此操作。

[CPAN](https://metacpan.org/)上有很多可供选择，例如[`CSS`](https://metacpan.org/module/CSS), & 。选择最适合您需求的一种。 [`CSS::SAC`](https://metacpan.org/module/CSS%3a%3aSAC)[`CSS::Tiny`](https://metacpan.org/module/CSS%3a%3aTiny)[`CSS::Croco`](https://metacpan.org/module/CSS%3a%3aCroco)

这是一个使用[`CSS::Tiny`](https://metacpan.org/module/CSS%3a%3aTiny)...的示例

```
use strict;
use warnings;
use CSS::Tiny;

my $css = CSS::Tiny->read('your_stylesheet.css');
my $new = CSS::Tiny->new;

# styles I want to extract
$new->{$_} = $css->{$_} for qw/.abc-style .def-style/;

$new->write('extracted_styles.css'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:02:43.247

尝试排除右括号并使集合像这样贪婪：

```
cssFileContent.scan(/\.#{cssName}.*?\{[^\}]+\}/im) 
```

# android - 如何从 Android 应用程序向 J2ME 发送文本 SMS？

> ID：12963628
> 
> 赞同：2
> 
> 时间：2012-10-18T20:56:54.063
> 
> 标签：android, java-me, sms, port

我正在尝试将 SMS 从 Android 发送到 J2ME 应用程序。

我遇到的问题是 J2ME 应用程序在特定端口上侦听传入的 SMS 消息，而我的 Android 应用程序无法将文本 SMS 发送到端口。

我试过 sendDataMessage 允许指定一个端口，但 J2ME 应用程序没有收到它。另外，我尝试将 //wma:port_number 添加到消息正文中（我在[这里](http://developer.sprint.com/show_thread.do?forumId=112&searchBy2=MSG_PARENT_ID&searchValue2=-1&searchBy3=MSGFORUM_FORUMID&searchValue3=112&ps=10&pn=1&threadid=25785&sortDirection=0&sortCol=MSG_AUDIT_CREATE_DT)阅读过），将目标号码设置为 phone_number:port 形式，但均未成功。

此外，我无法更改 J2ME 应用程序，因为我没有它的源代码。

关于如何将 SMS 从 Android 应用程序发送到特定端口上的 J2ME 应用程序的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:49:05.217

我已经有一段时间没有遇到同样的问题了，所以希望有人能提供比我更有用的回复。（那样就好了）。但是当我看到它时，我学到了：

JavaME 和 Android 之间的区别（关于 SMS 发送）在于 Android 允许您在标准端口上捕获传入的 SMS，而 JavaME 强制您使用任何其他端口。

从 Android发送的消息被标识为JavaME 平台上的`sendTextMessage()`一个实例。`TextMessage`但是由于您无法在 Android 上指定端口，因此它在标准端口上发送 - 您无法使用 JavaME 接收。

所以你当然要看`sendDataMessage()`，因为它可以让你指定一个端口号。问题是：从 Android 发送的消息，在 JavaME 平台上`sendDataMessage()`被识别为一个实例。`BinaryMessage`因此，侦听 a 的 JavaME 代码`TextMessage`永远不会触发，因为它`BinaryMessage`正在接收 a。

我能找到的唯一解决方案是`BinaryMessage`在收到 a 时添加一些代码。解码传入消息的方式略有不同，但做同样的事情。

遗憾的是，您无法执行此操作，因为您没有 JavaME 源代码，但它的外观如下：

```
String receivedSMS;

public void notifyIncomingMessage(MessageConnection conn) {
    try {
        Message msg = conn.receive();
        if (msg instanceof TextMessage) { // Message sent from J2ME device
            TextMessage tmsg = (TextMessage) msg;
            receivedSMS = tmsg.getPayloadText();
        } else if (msg instanceof BinaryMessage) { // Message sent from Android device
            BinaryMessage bmsg = (BinaryMessage)msg;
            byte[] ta = bmsg.getPayloadData();
            receivedSMS = new String(ta);
        }
    } catch (Exception e) {
    }
} 
```

那是我当时能找到的唯一解决方案。如果有人有更好的，我也想知道。:-)

# c++ - #include 在 x 宏中

> ID：12963636
> 
> 赞同：2
> 
> 时间：2012-10-18T20:57:23.907
> 
> 标签：c++, c-preprocessor, x-macros

我想编写一个生成一些代码的 x 宏。该代码依赖于几个标头，旨在在命名空间内生成。

问题是 xmacro 的包含被包含在调用者的命名空间中。有什么办法可以解决这个问题吗？

例子：

xmacro.hpp:

```
#include "foo.hpp"
struct bar {
BODY
};
#undef BODY 
```

主.hpp：

```
namespace ns {
  #define BODY int func();
  #include "xmacro.hpp" // inserting foo.hpp inside namespace ns
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:18:01.087

不幸的是，没有，因为 X-macros 虽然是独一无二的，但最终仍然只是包含文件。`#include <iostream>`这与放入您自己的命名空间没有什么不同。

X-macro 包含实际上不应该做任何事情，而是包含目标宏（其定义尚未确定）。如果使用你的 X-macro 有先决条件，我会做这样的事情：

xmacro_prelude.hpp：

```
#ifndef XMACRO_PRELUDE_INCLUDED
#define XMACRO_PRELUDE_INCLUDED

#include "foo.hpp"

#endif 
```

xmacro.hpp（顺便说一下，通常以 .def 为后缀）：

```
#ifndef XMACRO_PRELUDE_INCLUDED
    #error "You must include xmacro_prelude.hpp prior to using this X-macro."
#endif

struct bar {
BODY
};

#undef BODY 
```

主.hpp：

```
#include "xmacro_prelude.hpp"

namespace ns {
  #define BODY int func();
  #include "xmacro.hpp"
} 
```

# android - 使用 Handler 和 postDelayed 更新 ListView

> ID：12963639
> 
> 赞同：0
> 
> 时间：2012-10-18T20:57:39.600
> 
> 标签：android

**问题**

重复发布和删除`Message`对象是否`Handler`可以接受？我正在使用这种机制在多次发生回调后等待一定的延迟。

**背景**

我有一个具有相当复杂视图的 ListView。每个视图都有一些文本组件和一个相当大的 ImageView。我正在尝试解决滚动时的一些抖动问题。

我已经将它转换为使用绘图缓存来减少虚假绘图。我添加了一种机制，用于延迟 ImageView 中位图的加载，直到滚动停止。

这种机制使用ListView `OnScrollListener.onScroll(...)`（因为我发现`onScrollStateChanged(...)`不可靠）。每当`onScroll`发生火灾时，我都会在删除相同类型的现有消息后发布`Message`一个`Handler`使用。`postDelayed(message, 200)`

结果是一堆帖子并被删除`Handler`，当一个最终被处理时，所有图像都被加载。我想知道从 Handler 重复发布和删除消息是否会导致问题？我还没有打过，但如果有其他选择，我想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T01:56:16.117

在系统变得繁忙之前，添加和删除消息的成本并不高。然后它变得不可靠，因为主线程会被捆绑绘图。相反，我为需要通知的组件切换到开关机制，这似乎缓解了很多问题。

# log4net - 如何为 Log4net SmtpPickupDirAppender 指定文件名？

> ID：12963641
> 
> 赞同：0
> 
> 时间：2012-10-18T20:57:43.297
> 
> 标签：log4net

默认情况下，SmtpPickupDirAppender appender 创建一个没有扩展名的文件。我找不到配置文件扩展名的参数（或其他选项）。

从“pickupDir”参数中指定的目录中提取文件的电子邮件服务需要文件扩展名。

有没有办法指定一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:07:38.883

不是内置的。

从源代码来看，它看起来只是基于 guid 创建一个文件名，并且不提供任何配置选项，

```
 filePath = Path.Combine(m_pickupDir, SystemInfo.NewGuid().ToString("N"));
  writer = File.CreateText(filePath); 
```

但是，如果您拉取源代码，则创建自己的添加文件扩展名的附加程序应该相对简单。

# html - 加载外部 HTML 后如何触发函数执行？

> ID：12963642
> 
> 赞同：0
> 
> 时间：2012-10-18T20:57:44.457
> 
> 标签：html, load, external, jquery, jquery-on

JS：

```
$(document).ready(function(){

    $("#loader").load("external.html");

    $("#buttonClickText").live('click', function() {
        $("#buttonClickText").text("Text changed after button click.");
    });

    // MYSTERY FUNCTION
    $("#pageLoadText").text("Text changed after external HTML was loaded.");
    //

}); 
```

外部 HTML：

```
<div id="buttonClickText">
    This text changes when clicked.
</div>

<div id="pageLoadText">
    This text should have changed when external HTML was loaded, but didn't.
</div> 
```

主 HTML（仅显示相关标签）：

```
<div id="loader"></div> 
```

另外，我知道 .live() 已被 jQuery 1.7+ 弃用，我猜使用 .on() 的解决方案将是相似的

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:13:18.027

来自[http://api.jquery.com/load/](http://api.jquery.com/load/)：

> 此方法是从服务器获取数据的最简单方法。它大致相当于 $.get(url, data, success) ，只是它是一个方法而不是全局函数，并且它具有隐式回调函数。当检测到成功响应时（即当 textStatus 为“success”或“notmodified”时），.load() 将匹配元素的 HTML 内容设置为返回的数据。

只需传递一个函数作为第二个参数。

```
$('#result').load('ajax/test.html', function() {
  alert('Load was performed.');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:14:29.153

以下是该问题的解决方案：

```
$(document).ready(function(){
$("#loader").load("external.html", function()
        {
            $("#pageLoadText").text("Text changed after external HTML was loaded.");
        }
    );

$("#buttonClickText").live('click', function() {
    $("#buttonClickText").text("Text changed after button click.");
}); 
```

});

# xpages - 保持复选框组项目不换行？

> ID：12963644
> 
> 赞同：0
> 
> 时间：2012-10-18T20:57:47.980
> 
> 标签：xpages

我有一个复选框组，其中包含多个可能包含空格的项目。它是一个水平复选框。正在发生的事情是物品包装在物品中有空间的地方。

我怎样才能让它们不包装？

另外我如何控制宽度？我尝试设置控件的宽度，甚至将其放在设置了宽度的面板中，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:46:47.493

在应用程序的样式表中尝试这样的事情：

```
.xspCheckBox { width: 500px; /* change to your preferred width */ }
.xspCheckBox td { white-space: nowrap; } 
```

# android - Android 应用程序无法在 Android 4.0 上启动

> ID：12963646
> 
> 赞同：2
> 
> 时间：2012-10-18T20:57:57.657
> 
> 标签：android, android-4.0-ice-cream-sandwich

好的，我正在开发一个 Android 应用程序，它可以使用 RSS 向您显示电视时间表、新闻、天气预测和星座运势等内容。该应用程序可以在 Android 2.1 或 2.3.X 上正常运行，但是当我在 4.0 或 4.1 上启动它时，它会在我从 main 中选择任何选项后停止运行。

应用程序的结构是：

-主要的

- 具有视图的特定事物（例如新闻）的活动

- 前一个类调用的 XML Parser 类

-Signle View 的活动（就像一大堆新闻中的一个信息）及其视图

这里我提供 Manifest、Log 和几个类：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.mtel.vodic"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="14" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".Vodic"
        android:label="@string/title_activity_pocetna" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name=".Pomoc"
        android:label="@string/m_tel_vodi_za_odlu_ne"
        ></activity>
    <activity
        android:name=".Pomocna"
        android:label="@string/m_tel_vodi_za_odlu_ne"
        ></activity>
    <activity
        android:name=".SingleMenuItemActivity"
        android:label="@string/m_tel_vodi_za_odlu_ne"
        ></activity>
   .
   .
   .

</application>

<uses-permission android:name="android.permission.INTERNET" />

<!-- Needed to check when the network connection changes -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>

</manifest> 
```

错误日志：

```
10-18 20:35:05.457: E/Trace(730): error opening trace file: No such file or directory     (2)
10-18 20:35:06.197: I/Choreographer(730): Skipped 30 frames!  The application may be doing too much work on its main thread.
10-18 20:35:06.257: D/gralloc_goldfish(730): Emulator without GPU emulation detected.
10-18 20:35:11.316: D/AndroidRuntime(730): Shutting down VM
10-18 20:35:11.316: W/dalvikvm(730): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-18 20:35:11.347: E/AndroidRuntime(730): FATAL EXCEPTION: main
10-18 20:35:11.347: E/AndroidRuntime(730): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mtel.vodic/com.mtel.vodic.Vijesti}: java.lang.NullPointerException
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.os.Looper.loop(Looper.java:137)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-18 20:35:11.347: E/AndroidRuntime(730):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 20:35:11.347: E/AndroidRuntime(730):  at java.lang.reflect.Method.invoke(Method.java:511)
10-18 20:35:11.347: E/AndroidRuntime(730):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-18 20:35:11.347: E/AndroidRuntime(730):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-18 20:35:11.347: E/AndroidRuntime(730):  at dalvik.system.NativeStart.main(Native Method)
10-18 20:35:11.347: E/AndroidRuntime(730): Caused by: java.lang.NullPointerException
10-18 20:35:11.347: E/AndroidRuntime(730):  at com.mtel.vodic.Vijesti.onCreate(Vijesti.java:61)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.Activity.performCreate(Activity.java:5008)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
10-18 20:35:11.347: E/AndroidRuntime(730):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
10-18 20:35:11.347: E/AndroidRuntime(730):  ... 11 more
10-18 20:35:13.926: I/Process(730): Sending signal. PID: 730 SIG: 9 
```

主要的：

```
public class Vodic extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pocetna);
    Button tv = (Button)findViewById(R.id.tv);
    Button vijesti = (Button)findViewById(R.id.vijesti);
    Button horoskop = (Button)findViewById(R.id.horoskop);
    Button vremenska_prognoza = (Button)findViewById(R.id.vremenska_prognoza);
    Button o_aplikaciji = (Button)findViewById(R.id.o_aplikaciji);
    Button pomoc = (Button)findViewById(R.id.pomoc);

   .
   .
   .

    vijesti.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            Intent xw = new Intent(getApplicationContext(), Vijesti.class );
            //xw.putExtra("A", "http://bih-x.info/feed/");
            xw.putExtra("A", "http://klix.ba/rss/naslovnica");
            if(!isOnline()) {
                Toast.makeText(getApplicationContext(), "Niste povezani sa internetom!", Toast.LENGTH_SHORT).show();
            } else {
                startActivity(xw);
            }
        }
    });

   .
   .
   .

public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
    if(netInfo != null && netInfo.isConnected()) {
        return true;
    }
    return false;
}
} 
```

活动：

```
public class Vijesti extends ListActivity {

static String url =null;

// XML node keys
static final String KEY_ITEM = "item"; // parent node
static final String KEY_TITLE = "title";
static final String KEY_DATE = "pubDate";
static final String KEY_DESC = "encoded";
static final String UVOD = "uvod";
static final String CLANAK = "clanak";

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.vijesti_m);
    Intent in = getIntent();

    // Get XML values from previous intent
    url = in.getStringExtra("A");
    final ArrayList<HashMap<String,String>> menuItems = new ArrayList<HashMap<String,String>>();
    ArrayList<String> xqw = new ArrayList<String>();

    ParserVijesti parser=null;
    Document doc=null;
    try {
        parser = new ParserVijesti();
        String xml = parser.getXmlFromUrl(url); //get XML
        doc = parser.getDomElement(xml);
    } catch (Exception e1) {
        finish();
    }

    NodeList nl = doc.getElementsByTagName(KEY_ITEM);
    //loop
    for (int i=0; i< nl.getLength(); i++){
        HashMap<String, String> map = new HashMap<String, String>();
        HashMap<String, String> mapq = new HashMap<String, String>();

        Element e = (Element) nl.item(i);

        //add to map
        map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
        map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
        map.put(UVOD, parser.getValue(e,UVOD));
        map.put(CLANAK, parser.getValue(e,CLANAK));

        menuItems.add(map);

        xqw.add(parser.getValue(e,KEY_TITLE));
    }

    for(int gf=0; gf<xqw.size(); gf++){
        Log.w("ISPISI: ", xqw.get(gf));
    }
    ArrayAdapter adapterx = new ArrayAdapter(this, R.layout.vijesti_m,R.id.tetkica, xqw);

    setListAdapter(adapterx);

    //singleView
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id){

            int hg = position;
            HashMap<String, String> kaktus = menuItems.get(hg);
            String uvod1 = kaktus.get(UVOD);
            String clanak1 = kaktus.get(CLANAK);
            String dat1 = kaktus.get(KEY_DATE);
            String tit1 = kaktus.get(KEY_TITLE);

            //intent
            Intent inx = new Intent(getApplicationContext(), VijestiSingle.class);
            inx.putExtra(KEY_TITLE, tit1);
            inx.putExtra(KEY_DATE, dat1);
            inx.putExtra(UVOD, uvod1);
            inx.putExtra(CLANAK, clanak1);
            startActivity(inx);
        }
    });

}   

} 
```

XML解析类：

```
public class ParserVijesti {

// constructor
public ParserVijesti() {

}

/**
 * Getting XML from URL making HTTP request
 * @param url string
 * */
public String getXmlFromUrl(String url) {
    String xml = null;

    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity, "UTF-8");

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    // return XML
    return xml;
}
/**
 * Getting XML DOM element
 * @param XML string
 * */

public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setCoalescing(true);
    dbf.setNamespaceAware(true);
    try {
        DocumentBuilder db = dbf.newDocumentBuilder();

        InputSource is = new InputSource();
        is.setByteStream(new ByteArrayInputStream(xml.getBytes("UTF-8")));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

/** Getting node value
  * @param elem element
  */
 public final String getElementValue( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if(child.getNodeType() == Node.TEXT_NODE || child.getNodeType() == Node.CDATA_SECTION_NODE){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

 public final String getElementValue2( Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if(child.getNodeType() == Node.CDATA_SECTION_NODE){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "SRANJE";
 }

 /**
  * Getting node value
  * @param Element node
  * @param key string
  * */

 public String getValue(Element item, String str) {     
        NodeList n = item.getElementsByTagName(str);                
        return this.getElementValue(n.item(0));
    }

 public String getValue3(Element item, String str){
     NodeList n = item.getElementsByTagNameNS("http://purl.org/rss/1.0/modules/content/", str);
     String ses = this.getElementValue2(n.item(0));

     //String mim =ses.replaceAll("(?s)\\<.*?\\>", " \n");
     String html = ses;
     Spanned strxa = Html.fromHtml(html);
     String fffx=strxa.toString();

     //return this.getElementValue2(n.item(0));
     //return ses;
     //return Promjena(ses);
     return fffx;
 }

} 
```

总结一下：应用程序在 2.1 或 2.3.x 上正常工作，但在我从 Android 4.0 或 4.1 上的主要活动中选择任何内容后停止。我不知道这是怎么回事..有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:13:50.607

根据日志，您在`Vijesti.java:61`. 你说这条线是：

```
NodeList nl = doc.getElementsByTagName(KEY_ITEM); 
```

这意味着`doc`必须为空。由于您将其分配给`getDomElement()`，这意味着您的问题在于该方法。我看到它可能为 null 的唯一方法（因为`DocumentBuilder.parse()`不能返回 null）是如果你正在点击你的一个`catch`语句。

您在 logcat 中是否收到任何`catch`异常消息？您显示的部分仅列出了由空指针导致的实际错误。你的信息可能会在此之前。检查一下，你就可以知道你得到了哪个异常，并相应地处理它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:43:47.073

This will not solve your original problem, but:

I think this is another problem you are having: You are publishing your app with a targetSdkVersion higher than you have tested and confirmed your application to work against.

You have set the targetSdkVersion to 14\. But if you read this:

[Android Min SDK Version vs. Target SDK Version](https://stackoverflow.com/questions/4568267/android-min-sdk-version-vs-target-sdk-version)

you will understand that setting targetSdkVersion to 14 means that you are telling Android "I have tested my app on API 14 and confirm that it is working, please disable all compatibility settings for versions lower than API 14".

But this is not true, you have actually confirmed the opposite, that the app is NOT working on 4.0!

If you set targetSdkVersion to 14 it will make Android 4.0 disable compatibility settings it normally uses to ensure that apps for older APIs work (f.i. GPU rendering, JNI changes)

So for now you should just set minSdkVersion and no targetSdkVersion when you publish your app, to keep the compatibility behaviors enabled in 4.0.

Raise targetSdkVersion to 14 only after you have fixed the original bug and tested your app on against API 14, and not before.

# ios - Air for iOS 避免中间人攻击

> ID：12963649
> 
> 赞同：1
> 
> 时间：2012-10-18T20:58:00.420
> 
> 标签：ios, security, ssl, air, man-in-the-middle

在 iOS 版 Air 中，我试图找到一种方法来标记可能的中间人攻击何时发生。

默认情况下，每当您尝试连接到具有无效证书的 SSL 站点时，都会收到错误消息：

> “无法验证与此站点的安全连接。您还想继续吗？
> 
> 您正在查看的证书与您尝试查看的站点的名称不匹配。”

我不想显示这个提示，然后禁用网络功能。

我开始尝试使用网络监视器，但它会给出提示，就像运行单独的 URL 请求来测试连接一样。

我终于遇到了“SecureSocketMonitor”，它在 Flash 环境中运行时似乎可以完成我需要它做的事情，但是一旦我编译成 Air for iOS 应用程序，它似乎根本不起作用。

有谁知道我如何在不显示该提示的情况下检测到无效的 SSL 证书？

# c# - 两条线段是否在 c# 或 vb.net 中使用 xna 相交？

> ID：12963661
> 
> 赞同：4
> 
> 时间：2012-10-18T20:58:31.980
> 
> 标签：c#, .net, vb.net, xna, collision-detection

我一直在寻找一种合适的方法来确定两条线段（每组 2 组 x,y 坐标）是否相交。我见过很多（包括：[你如何检测两条线段相交的位置？](https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect)），但我见过的所有线段都有缺陷。主要是如果线平行但彼此重叠，它们不会检测到碰撞。

我也不需要返回交点，只需一个布尔值就可以了。

如果有人能指出我正确的方向，我将不胜感激，因为我显然不擅长几何。:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T00:45:38.257

当然有数学上优雅的方法可以做到这一点，但如果你正在寻找一个使用基本代数的易于理解的算法，试试这个（这不是代码）：

让我们通过端点定义两条线段：

```
l0 : { (x0, y0), (x1, y1) }
l1 : { (x2, y2), {x3, y3) } 
```

首先，获得每条线的斜截形式。您可以查找 m、b 的公式或自己推导它们：

```
l0 : m0 * x + b0
l1 : m1 * x + b1 
```

如果`(m0 != m1)`线不平行。要找到潜在的交点，请求解`l0 = l1`：

```
x = (b1 - b0) / (m0 - m1)
y = m0 * x + b0 
```

当且仅当`(x, y)`位于两个线段上时，线段才会相交。请注意，仅检查 x 坐标就足够了，因为我们已经`(x, y)`在两条线上建立了 x 坐标：

[编辑以反映来自@KenoguLabz 的出色输入]

 ~~```
(x0 <= x <= x1) AND (x2 <= x <= x3) AND (y0 <= y <= y1) AND (y2 <= y <= y3) 
```~~  ~~```
min(x0, x1) <= x <= max(x0, x1) AND min(x2, x3) <= x <= max(x2, x3) 
```

如果这些线是平行的，并且您想知道它们是否重叠，请将一条线的端点替换为上面的 x （不过，您只需要对另一条线进行测试）

希望这可以帮助。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T18:51:22.857

这是我最近写的一个小班。斜率和角度的 +/- 可能并不总是正确的（例如，当角度应该为 -90 时，它返回 90，但我使用的三角函数不受此影响）。您可能最感兴趣的函数是 GetIntersection，它对平行线返回 Nothing (null)，否则返回 Point。这是代码：

```
Public Class LineData
    Public Property Point1() As Point
    Public Property Point2() As Point
    Public ReadOnly Property Slope() As Double
        Get
            # 0=Horizontal Line, NaN=Vertical Line
            Return If(Me.Point1.X = Me.Point2.X, Double.NaN, (Me.Point1.Y - Me.Point2.Y) / (Me.Point1.X - Me.Point2.X))
        End Get
    End Property
    Public ReadOnly Property YIntercept() As Double
        Get
            Return If(Double.IsNaN(Me.Slope), Double.NaN, Me.Point1.Y - Me.Slope * Me.Point1.X)
        End Get
    End Property
    Public ReadOnly Property Angle() As Double
        Get
            Return If(Double.IsNaN(Me.Slope), Math.PI / 2, Math.Atan(Me.Slope))
        End Get
    End Property

    Public Sub New(pt1 As Point, pt2 As Point)
        Me.Point1 = pt1
        Me.Point2 = pt2
    End Sub
    Public Sub New(x1 As Double, y1 As Double, x2 As Double, y2 As Double)
        Me.Point1 = New Point(x1, y1)
        Me.Point2 = New Point(x2, y2)
    End Sub
    Public Sub New(ln As Line)
        Me.New(ln.X1, ln.Y1, ln.X2, ln.Y2)
    End Sub

    Public Function GetParallel(spacing As Double) As LineData
        Return Me.GetParallel(spacing, ParallelPosition.Below)
    End Function

    Public Function GetParallel(spacing As Double, pos As ParallelPosition) As LineData
        If Me.Slope = 0 Then # Horizontal Line
            If pos = ParallelPosition.Above OrElse pos = ParallelPosition.Left Then : Return If(Me.Point2.X > Me.Point1.X, New LineData(Me.Point1.X - spacing, Me.Point1.Y - spacing, Me.Point2.X + spacing, Me.Point2.Y - spacing), New LineData(Me.Point1.X + spacing, Me.Point1.Y - spacing, Me.Point2.X - spacing, Me.Point2.Y - spacing))
            Else : Return If(Me.Point2.X > Me.Point1.X, New LineData(Me.Point1.X - spacing, Me.Point1.Y + spacing, Me.Point2.X + spacing, Me.Point2.Y + spacing), New LineData(Me.Point1.X + spacing, Me.Point1.Y + spacing, Me.Point2.X - spacing, Me.Point2.Y + spacing))
            End If
        ElseIf Double.IsNaN(Me.Slope) Then # Vertical Line
            If pos = ParallelPosition.Above OrElse pos = ParallelPosition.Left Then : Return If(Me.Point2.Y > Me.Point1.Y, New LineData(Me.Point1.X - spacing, Me.Point1.Y - spacing, Me.Point2.X - spacing, Me.Point2.Y + spacing), New LineData(Me.Point1.X - spacing, Me.Point1.Y + spacing, Me.Point2.X - spacing, Me.Point2.Y - spacing))
            Else : Return If(Me.Point2.Y > Me.Point1.Y, New LineData(Me.Point1.X + spacing, Me.Point1.Y - spacing, Me.Point2.X + spacing, Me.Point2.Y + spacing), New LineData(Me.Point1.X + spacing, Me.Point1.Y + spacing, Me.Point2.X + spacing, Me.Point2.Y - spacing))
            End If
        Else #Sloped Line
            Dim verticalshift As Double = Math.Abs(spacing / Math.Cos(-Me.Angle))
            Dim horizontalshift As Double = Math.Abs(spacing / Math.Sin(-Me.Angle))
            If Math.Sign(Me.Slope) = -1 Then
                If Me.Point2.X > Me.Point1.X Then
                    If pos = ParallelPosition.Above OrElse pos = ParallelPosition.Left Then : Return New LineData(Me.Point1.X - horizontalshift, Me.Point1.Y, Me.Point2.X, Me.Point2.Y - verticalshift)
                    Else : Return New LineData(Me.Point1.X, Me.Point1.Y + verticalshift, Me.Point2.X + horizontalshift, Me.Point2.Y)
                    End If
                Else
                    If pos = ParallelPosition.Above OrElse pos = ParallelPosition.Left Then : Return New LineData(Me.Point1.X, Me.Point1.Y - verticalshift, Me.Point2.X - horizontalshift, Me.Point2.Y)
                    Else : Return New LineData(Me.Point1.X + horizontalshift, Me.Point1.Y, Me.Point2.X, Me.Point2.Y + verticalshift)
                    End If
                End If
            Else
                If Me.Point2.X > Me.Point1.X Then
                    If pos = ParallelPosition.Above OrElse pos = ParallelPosition.Right Then : Return New LineData(Me.Point1.X, Me.Point1.Y - verticalshift, Me.Point2.X + horizontalshift, Me.Point2.Y)
                    Else : Return New LineData(Me.Point1.X - horizontalshift, Me.Point1.Y, Me.Point2.X, Me.Point2.Y + verticalshift)
                    End If
                Else
                    If pos = ParallelPosition.Above OrElse pos = ParallelPosition.Right Then : Return New LineData(Me.Point1.X + horizontalshift, Me.Point1.Y, Me.Point2.X, Me.Point2.Y - verticalshift)
                    Else : Return New LineData(Me.Point1.X, Me.Point1.Y + verticalshift, Me.Point2.X - horizontalshift, Me.Point2.Y)
                    End If
                End If
            End If
        End If
    End Function

    Public Function CalculateX(y As Double) As Double
        If Me.Slope = 0 Then # Horizontal Line
            If y = Me.Point1.Y OrElse y = Me.Point2.Y Then Return 0 Else Return Double.NaN
        ElseIf Double.IsNaN(Me.Slope) Then # Vertical Line
            Return Me.Point1.X
        Else
            Return (y - Me.YIntercept) / Me.Slope
        End If
    End Function
    Public Function CalculateY(x As Double) As Double
        If Me.Slope = 0 Then # Horizontal Line
            Return Me.Point1.Y
        ElseIf Double.IsNaN(Me.Slope) Then # Vertical Line
            If x = Me.Point1.X OrElse x = Me.Point2.X Then Return 0 Else Return Double.NaN
        Else
            Return Me.Slope * x + Me.YIntercept
        End If
    End Function

    Public Function GetIntersection(ln As LineData) As Point
        If Me.Slope = ln.Slope OrElse (Double.IsNaN(Me.Slope) AndAlso Double.IsNaN(ln.Slope)) Then : Return Nothing
        Else
            If Double.IsNaN(Me.Slope) Then : Return New Point(Me.Point1.X, ln.CalculateY(Me.Point1.X))
            ElseIf Double.IsNaN(ln.Slope) Then : Return New Point(ln.Point1.X, Me.CalculateY(ln.Point1.X))
            ElseIf Me.Slope = 0 Then : Return New Point(ln.CalculateX(Me.Point1.Y), Me.Point1.Y)
            ElseIf ln.Slope = 0 Then : Return New Point(Me.CalculateX(ln.Point1.Y), ln.Point1.Y)
            Else
                Dim x As Double = (Me.YIntercept - ln.YIntercept) / (ln.Slope - Me.Slope)
                Return New Point(x, Me.CalculateY(x))
            End If
        End If
    End Function

    Public Function GetLine() As Line
        Dim templine As New Line
        templine.X1 = Me.Point1.X
        templine.Y1 = Me.Point1.Y
        templine.X2 = Me.Point2.X
        templine.Y2 = Me.Point2.Y
        Return templine
    End Function
End Class

Public Enum ParallelPosition As Byte
    Above
    Below
    Left
    Right
End Enum 
```

希望这会有所帮助！~~

# android - Android：将接口放入意图

> ID：12963662
> 
> 赞同：4
> 
> 时间：2012-10-18T20:58:33.373
> 
> 标签：android, android-intent, parcelable

我的应用程序中有一个自定义对话框。我的自定义对话框实现为具有透明背景和类似对话框的视图的 Activity。Mu 自定义对话框看起来像警报对话框，带有标题、消息和按钮。我正在尝试做的是创建漂亮的界面来设置我的弹出窗口的标题、消息和 onClickListener。

首先，我不想让所有员工都像这样：

```
 Intent intent = new Intent (this, CustomPopup.class);
 intent.putExta ("Title", "PopupTitle");
 intent.putExta ("Message", "PopupMessage");
 intent.putExtra ("OnCLickListener", ?????); //here is problem

 startActivity(intent); 
```

但问题是没有办法将 OnCLickListener 设置为意图。

其次，我尝试创建实现 Parcable 的类。但问题是一样的

```
@Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeString(title);
        dest.writeString(message);
        dest.writeValue(buttonClickListener); // here is problem. I cannot write Interface
    } 
```

我无法将 OnCLickListener 写入 Parcel 对象。

怎样成为 ？如何为我的自定义弹出窗口编写漂亮的界面？因为弹出窗口可以有不同的标题和消息，并且弹出窗口将在许多活动中使用....提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:05:16.393

创建一个实现 OnClickListener 和 Serializable 的类。通过 Intent 将实例发送到“对话框”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:55:01.520

如果弹出窗口的行为如此不同，请创建包含这些行为的 CustomPopup 子类。您仍然可以传入这些侦听器需要采取行动的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-06T11:44:04.177

谢谢@toadzky。只需将不可序列化的对象作为参数传递给方法，例如：

```
public interface OnActionInterface {
    void onPositiveButtonClicked(Activity activity);
    void onNegativeButtonClicked(Activity activity);
} 
```

[在https://stackoverflow.com/a/37071472/2914140](https://stackoverflow.com/a/37071472/2914140)查看我的完整答案。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-10-18T22:36:58.567

只需*将*a扩展`Serializable`到这样的接口：

```
public interface PlayerLambda extends Serializable {
    public void updateWatchedProgress(int progress);
} 
```

# html - 如何使用 LI 和 CSS 显示这些电影

> ID：12963664
> 
> 赞同：-3
> 
> 时间：2012-10-18T20:58:38.733
> 
> 标签：html, css, list, inline

我一直在设计一个模板，但是当我谈到需要使用`li`项目显示一些电影的部分时，它不起作用......你看我想显示一个缩略图，然后是电影的名称，然后是季节和 eps .

我正在考虑`UL`，`LI`但看起来我无法让它工作......如果你们中的一些人知道如何使用 HTML 和 CSS 来做到这一点，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:06:02.973

您可以将 a与元素`<ul><li>`结合使用。`<figure>`例子：

```
<li>
    <figure>
        <img src="...">
        <figcaption>Description Here</figcaption>
    </figure>
</li> 
```

等等。

至于 CSS，将它们浮动到左侧，每隔三个元素清除一次。

# cordova - Phonegap ChildBrowser Blackberry 插件：无法调用未定义的方法“showWebPage”

> ID：12963667
> 
> 赞同：0
> 
> 时间：2012-10-18T20:58:48.060
> 
> 标签：cordova, jquery-mobile, phonegap-plugins, cordova-2.0.0

尝试使用黑莓的 ChildBrowser 插件时，我在 Chrome 开发人员工具中不断收到此错误：TypeError: Cannot call method 'showWebPage' of undefined

在萤火虫中，我得到：TypeError：cordova.exec 不是函数

“showWebPage”，[url，选项]）；

这是我的代码

**索引.html**

```
<!DOCTYPE html>
<html>
<head>
  <title>Share QR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">      
  <link rel="stylesheet" href="jquery.mobile-1.2.0.min.css" />

  <script src="cordova.js"></script>
  <script type="text/javascript" charset="utf-8" src="childbrowser.js"></script>
  <script src="jquery.js"></script>
  <script src="jquery.mobile-1.2.0.min.js"></script>
  <script src="main.js"></script>
  <script src="details.js"></script>
</head>

<body id="main" >
  <div data-role="page" id="home" data-position="fixed">

      <div data-role="header"> 
    <h1>Home</h1> 
 </div>

<div data-role="content">
<ul data-role="listview" data-filter="true"  id="listItem"></ul>     

    </div>

    <div data-role="footer">
      <div data-role="navbar">
    <ul>
        <li><a href="#home" data-icon="grid">Feeds</a></li>
        <li><a href="#videos" data-icon="plus">Videos</a></li>
    </ul>
</div><!-- /navbar -->
    </div>
 </div>

  <div data-role="page" id="videos" data-position="fixed" data-add-back-btn="true">

      <div data-role="header"> 
    <h1>Home</h1> 
 </div>

<div data-role="content">
<ul data-role="listview" data-filter="true"  id="listItemvid"></ul>     

    </div>

    <div data-role="footer">
      <div data-role="navbar">
    <ul>
        <li><a href="#home" data-icon="grid">Feeds</a></li>
        <li><a href="#videos" data-icon="plus">Videos</a></li>
    </ul>
</div><!-- /navbar -->
    </div>
 </div>

 </body>
</html> 
```

main.js

```
var serviceURL = 'http://localhost/feeds/services/';

  function onDeviceReady() {
        // Now safe to use the PhoneGap API
        alert("Ready");
    }

 $(document).bind('pageinit', function(){
       $('#listItem li').remove();
      document.addEventListener("deviceready", onDeviceReady, false);
    $.getJSON(serviceURL + 'getdata.php', function(data){
    $.each(data, function(index, value){
    var output = '';
    output += '<li><a href="details.html?id=' + value.id + '"><img src="pics/' + value.id + '.jpg"/>' + value.name + '</a></li>';
    $("#listItem").append(output).listview("refresh");
       });
        });
   });

$('#videos').live('pageshow', function(event) {
     $('#listItemvid li').remove();
    $.getJSON(serviceURL + 'getdata.php', function(data){
    $.each(data, function(index, value){
    var output = '';
    output += '<li><img src="pics/' + value.id + '.jpg"/>' + value.name + '</a></li>';
    $("#listItemvid").append(output).listview("refresh");
       });
    });
});

 $('#listItemvid').live('vclick', function(event) {
    event.preventDefault();
   // alert("i'm running!");
   if(window.cordova){
       alert("loaded");
   var cb = window.plugins.childBrowser;
   cb.showWebPage('http://www.google.com',
                                        { showLocationBar: true });}

   else{ 
   alert("Not Available");
   }
});

plugin.xml
<plugins>
  <plugin name="App"            value="org.apache.cordova.app.App"/>
  <plugin name="Device"         value="org.apache.cordova.device.Device"/>
  <plugin name="Camera"         value="org.apache.cordova.camera.Camera"/>
  <plugin name="NetworkStatus"  value="org.apache.cordova.network.Network"/>
  <plugin name="Notification"   value="org.apache.cordova.notification.Notification"/>
  <plugin name="Accelerometer"  value="org.apache.cordova.accelerometer.Accelerometer"/>
  <plugin name="Geolocation"    value="org.apache.cordova.geolocation.Geolocation"/>
  <plugin name="File"           value="org.apache.cordova.file.FileManager"/>
  <plugin name="FileTransfer"   value="org.apache.cordova.http.FileTransfer"/>
  <plugin name="Contacts"       value="org.apache.cordova.pim.Contact"/>
  <plugin name="Capture"        value="org.apache.cordova.capture.MediaCapture"/>
  <plugin name="Battery"        value="org.apache.cordova.battery.Battery"/>
  <plugin name="Media"          value="org.apache.cordova.media.Media"/>
  <plugin name="ChildBrowser" value="org.apache.cordova.plugins.childbrowser.ChildBrowser"/>
</plugins>

config.xml
I included 
<gap:plugin name="ChildBrowser" src="org.apache.cordova.plugins.childbrowser.ChildBrowser" version="~3"  /> 
```

我已经搜索谷歌寻求帮助，但似乎每个人都解决了这个问题，但他们的步骤并没有解决我的问题。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:08:45.403

@Kehinde Kolexinfos Kolade：嘿，您不能将子浏览器用于桌面浏览器。它可以用于移动应用程序。子浏览器允许您在自定义浏览器字段或设备的内置浏览器中显示 Cordova 应用程序中的外部网页。

# c# - 强制 GetCustomAttributes 抛出 AmbiguousMatchException

> ID：12963671
> 
> 赞同：0
> 
> 时间：2012-10-18T20:59:09.567
> 
> 标签：c#, .net, class, attributes

在下面的示例中，我希望调用 to`GetCustomAttributes`来抛出 an，`AmbiguousMatchException`但事实并非如此。

```
[CompatibleCaste(typeof(KannadaVaishya))]
[CompatibleCaste(typeof(VaishyaVani))]
public class Vaishya : Caste { /* is not matter */ } 
```

根据[MSDN ICustomAttributeProvider.GetCustomAttributes](http://msdn.microsoft.com/en-us/library/ezk6ae46%28v=vs.80%29.aspx#Y119)，它应该抛出一个`AmbiguousMatchException`- 我如何证明这个事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:12:20.010

如果我明白你在问什么...

当您定义自定义属性类时，您需要 AllowMultiple。

`[AttributeUsage(AllowMultiple=true)]`

然后，您可以在同一方法或类上使用相同的属性倍数。

# asp.net-mvc - MVC 上传控件

> ID：12963674
> 
> 赞同：2
> 
> 时间：2012-10-18T20:59:14.270
> 
> 标签：asp.net-mvc, telerik

我正在开发一个使用 Telerik 控件的 MVC3 (razorview) 应用程序。所以我正在做的是以下内容：

我想上传一个文件，做一些验证。如果文件有效，我想为用户提供永久上传文件的选项。如果它无效，则会显示错误并且用户无法上传文件。

这是我到目前为止所拥有的：

Javascript代码：

```
<script type="text/javascript">
         function onSuccess(e) {
    if (jQuery.isEmptyObject(e.response.errors) && jQuery.isEmptyObject(e.response.warnings)) {
            $("#successmsg").show();
        } else {

            var errorMsg = "";
            if (!jQuery.isEmptyObject(e.response.errors)) {
                for (var i = 0; i < e.response.errors.length; i++) {
                    errorMsg = errorMsg + "<li>" + e.response.errors[i] + "</li>";
                }
            }
            if (errorMsg != "") {
                var strErrorContent = $("#errormsg_template").html();
                $("#errormsg").html(strErrorContent.replace("{0}", errorMsg));
                $("#errormsg").show();
            }
        }
    } 
```

Telerik 组件视图：

```
<p>
    @Html.Telerik().Upload().Name("file_upload").Multiple(false).Async(settings =>
   {
       settings.AutoUpload(false);
       settings.Save("Test", "Pricat");
   }).ClientEvents(events =>
   {
       events.OnError("onError");
       events.OnSuccess("onSuccess");
       events.OnUpload("onUpload");
   })
</p> 
```

因此，此代码适用于验证部分。用户选择文件，文件被上传，一些内部处理正在验证消息。如果消息有效，则会显示成功消息。如果它无效，则会显示错误。

我应该如何继续添加一个上传按钮（这基本上只是另一个方法调用），而无需再次浏览文件？

所以以下

```
settings.Save("Test", "Pricat"); 
```

应该成为

```
settings.Save("Upload", "Pricat"); 
```

所以在控制器中我有这两种方法：

```
public ActionResult Upload(HttpPostedFileBase file_upload) { }
public ActionResult Test(HttpPostedFileBase file_upload) { } 
```

我的想法：在 javascript 中，如果 e.reponse 不包含错误，则显示一个按钮（ASP.NET 按钮，另一个上传 Telerik 按钮，我不知道..）。单击该按钮时，它应该在我的控制器中调用“上传”方法。我只是不知道如何将文件发送到该方法

有谁知道如何做到这一点？或者任何其他建议都非常受欢迎！

我希望它有点清楚。

提前致谢。

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T05:01:53.273

首先将文件上传两次是一种非常糟糕的做法。这不仅会使用不必要的带宽，而且您实际上无法保证文件的内容在请求之间保持不变。

如果成功，您的“测试”方法应将文件保存在服务器上某处处于“已验证但未永久保存”状态，并将对已保存文件的引用返回给客户端。

然后，如果用户决定永久保存文件，您可以将该引用传递回“上传”操作。（因此它实际上根本不涉及文件上传）

您可能希望经常清除从未永久保存的经过验证的文件，但要正确执行该过程，这是一个很小的代价。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T12:18:49.400

如果您坚持您的解决方案，您可以使用此处提到的提交按钮上传带有 ASP.MVC 的文件：[文件上传 ASP.NET MVC 3.0](https://stackoverflow.com/questions/5193842/file-upload-asp-net-mvc-3-0/5193851#5193851)

如果您希望它成为 AJAX 帖子，您可以使用这样的 jQuery 代码（onclick 按钮事件）：

```
$.ajax('<%= Url.Action("Upload", "MyFileController") %>', {
            async: async,
            data: $('#myFileForm').serialize(),
            success: function() { //something on success },
            error: function() { //something on error },
            type: 'POST',
            timeout: 10000
        } 
```

但与@mootinator 所说的相似。我最好将文件保存在服务器上（比如说在某个临时表或文件夹中 - 或者只是在 db 中用布尔值临时标记它），验证它，询问您的用户是否要永久保存它 -> 将文件移动到永久文件夹或将其标记为永久...如果它不是有效文件或用户拒绝永久保存它，我只会删除该文件。

# jquery - 并发ajax调用

> ID：12963679
> 
> 赞同：0
> 
> 时间：2012-10-18T20:59:36.720
> 
> 标签：jquery, ajax, concurrency

我正在尝试在 jquery 中进行并发 ajax 调用，但我没有找到任何关于它的具体内容。当我进行 2 个 ajax 调用时，只有在第一个调用完成后才会启动另一个调用。我试过`$.ajaxSetUp{(async: true)}`了，但它没有按我想要的方式工作。谁能帮我这个？

**[已编辑]** 我有一个表单，在表单提交时我使用 form.js 的[ajaxSubtmit](http://www.malsup.com/jquery/form/)，因为我的表单也有`file input`。

```
$("form").submit(function() {
  $(this).ajaxSubmit();
  $.getScript("url");
  return false; // to stop the normal working of form submit and submit form by ajax
}) 
```

这里只有在第一个完成后才调用第二个 ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:17:30.263

所以这就是你所说的所谓竞争条件。为避免这种情况，您有两个选择，要么创建一个数组来存储每个请求，要么创建一个局部变量来存储每个请求。这是一个避免竞争条件的简单示例：

```
function customCallBack()
  {//    Ajax Status finished       http status OK
    if( (this.readyState == 4) && (this.status == 200) )
     {
       alert(this.responseText);
     }
  }

function anotherCallBack()
  {//    Ajax Status finished       http status OK
    if( (this.readyState == 4) && (this.status == 200) )
      {
        console.log(this.responseText);
      }
  }

function asyncPost(url, postArray, functionCallBack)
  {
    var request, query; //request must be a local var to avoid race condition
    query = '';
    for (i in postArray)//format post params
      {
        query += i + '=' + postArray[i] + '&';
      }
    try
      {//for modern browsers
        request = new XMLHttpRequest;
      }
    catch (err)
      {// legacy IE
        request = new ActiveXObject("Microsoft.XMLHTTP");
      }
       // your custom call back function
    request.onreadystatechange = functionCallBack;
    //            type   url  true for async call, false for sync call
    request.open("POST", url, true);

    //Header sent to indicate a post form
    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

    //making a post call
    request.send(query);
  };

//calling

asyncPost('yourUrl', {'field1' : 'value1', 'field2': 10}, customCallBack);

var post = new Array();
post['field1'] = 'value1';
post['field2'] = 10
//calling againg
asyncPost('anotherUrl', post, anotherCallBack);

// In jquery is like above, because you need the ajax call in a custom function
// and create a local var to hold your call:
function jqAjax(url)
  {
    var mycall  = $.get(url);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T11:41:45.443

两个 Ajax 调用都是独立的，如果第一个调用延迟完成，那么第二个调用独立继续，您可以进行任意数量的 ajax 调用：10、20、30 ...

要更改方法，请使用以下功能

```
function asyncCall(url, method, varArray, functionCallBack)
  {
    var request, query;
    query = '';
    for (i in postArray)//format params
      {
        query += i + '=' + postArray[i] + '&';
      }
    try
      {//for modern browsers
        request = new XMLHttpRequest;
      }
    catch (err)
      {// legacy IE
        request = new ActiveXObject("Microsoft.XMLHTTP");
      }
    request.onreadystatechange = functionCallBack;
    if(method == 'GET')
      {
        request.open("GET", url + '?' + query, true);
        request.send();
      }
    else
      {
        request.open("POST", url, true);
        request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        request.send(query);
      }
  };
console.log('start 1');
asyncCall('url1', 'GET', {foo : 'bar'}, function(){console.log('Call 1');});
console.log('start 2');
asyncCall('url2', 'POST', {foo : 'bar'}, function(){console.log('Call 2');});
console.log('start 3');
asyncCall('url3', 'POST', {foo : 'bar'}, function(){console.log('Call 3');}); 
```

# javascript - 用js编辑保存的xml格式的ppt文件

> ID：12963682
> 
> 赞同：0
> 
> 时间：2012-10-18T20:59:42.820
> 
> 标签：javascript, xml, base64, powerpoint

所以我有一个保存的 xml 模板文件。这个文件基本上是一个保存为 XML 的 ppt 文件。我正在尝试 ajax 该文件，然后对其进行 base 64 编码，以尝试提示用户下载该 xml 文件。我的理论是我可以解析 xml 文件，对其进行编辑，然后提示用户下载它。一旦用户下载了文件，他/她就可以在 ppt 中打开它。这是我到目前为止的代码

[http://jsfiddle.net/NKa5T/](http://jsfiddle.net/NKa5T/)

我已经设法得到一个 ppt 文件的提示，但它是一个空白的 ppt 文件，而不是其中包含 xml 的文件。如果您想让它与 xml 文件的下载一起使用，
这里是[gitHub存储库。](https://github.com/climboid/jsToPPT)

# c - 在嵌入式代码中处理浮点异常的最佳方法是什么？

> ID：12963683
> 
> 赞同：0
> 
> 时间：2012-10-18T20:59:43.400
> 
> 标签：c, floating-point-exceptions

我正在开发一个安全关键的嵌入式程序（在 C 中），我想在其中使用 IEEE 754 浮点算法（带有 NaN 和 Infs）进行工程计算。在这里，我有两种方法（afaik）来处理浮点异常：

*   如果发生任何异常，则进入永久故障状态。从错误检测的角度来看，这可能更健壮，但对容错/可用性不利。
*   忽略异常，并检查最终结果是有限数（成功计算）还是 NaN、inf（计算失败）。此解决方案具有更高的容错性，但风险更大，因为输出可能会意外地从检查中排除。

    1.  在安全关键系统中哪个是更好的解决方案？
    2.  还有其他选择吗？
    3.  如果计算的复杂性不允许第一个解决方案（我无法避免正常使用中的异常），最后的检查是否足够，还是我应该考虑其他方面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:42:43.257

1.  在安全关键系统中哪个更好取决于系统，如果没有更多信息就无法回答。

2.  另一种选择是设计浮点代码，以便不会出现不希望的行为（或可以根据需要进行处理）并为此编写证明。

3.  通常，检查最终值不足以检测计算期间是否发生异常或其他错误。

关于3，考虑到各种异常结果可能在后续操作中消失。当用作除数时，无穷大可以产生零。NaN 在最小值或最大值的某些实现中消失。（例如，`max(3, NaN)`可能产生 3 而不是 NaN。）分析您的代码可能（或可能不会）揭示这些事情在您的特定计算中是否可能。

但是，检查最终值的替代方法是检查异常标志。IEEE 754 的大多数实现都有累积标志——一旦发生异常，它的标志就会被提升并保持提升直到显式重置。因此，您可以在计算开始时清除标志并在结束时对其进行测试，并且与测试最终值不同，这将保证您在异常发生后观察它们。

# java - 使用红色蒙版创建的 java 缓冲图像

> ID：12963685
> 
> 赞同：3
> 
> 时间：2012-10-18T20:59:47.360
> 
> 标签：java, awt, java-2d

我在阅读图像时遇到问题。如果我执行以下操作

```
URL url = new URL("http://tctechcrunch2011.files.wordpress.com/2012/10/gmm.jpg");
ImageInputStream stream = ImageIO.createImageInputStream(url.openStream());
ImageReader reader = ImageIO.getImageReaders(stream).next();
reader.setInput(stream, true, true);
BufferedImage image = reader.read(0);

ByteArrayOutputStream bos = new ByteArrayOutputStream();
ImageWriter writer = ImageIO.getImageWritersByFormatName("JPEG").next();
ImageOutputStream ios = ImageIO.createImageOutputStream(bos);
writer.setOutput(ios);
IIOImage ioImage = new IIOImage(image, null, null);
writer.write(ioImage);
ios.close();
FileOutputStream fos = new FileOutputStream("badimage.jpeg");
fos.write(bos.toByteArray());
fos.close(); 
```

图像以红色调书写。是否需要设置一些选项才能正确读取此图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T03:45:28.457

该问题可能与`ImageIO.read`无法正确读取某些 JPG 图像有关。这是一个类似的[错误](http://bugs.sun.com/view_bug.do?bug_id=4881314)（错误 ID：4881314），可能仍部分未解决。

作为替代方案，您可以尝试使用`Toolkit.createImage`似乎可以正确处理指定图像的方法。例如：

```
import java.awt.Image;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JOptionPane;
import javax.swing.JPanel;

class TestImage {
    public static void main(String args[]) {
        try {
            URL imageUrl = new URL(
                "http://tctechcrunch2011.files.wordpress.com/2012/10/gmm.jpg");
            BufferedImage ioImage = ImageIO.read(imageUrl);
            Image toolkitImage = Toolkit.getDefaultToolkit().createImage(
                    imageUrl);

            JPanel panel = new JPanel();
            panel.add(new JLabel(new ImageIcon(ioImage)));
            panel.add(new JLabel(new ImageIcon(toolkitImage)));

            JOptionPane.showMessageDialog(null, panel, "ImageIO vs Toolkit",
                    JOptionPane.INFORMATION_MESSAGE);

        } catch (Exception e) {
            JOptionPane.showMessageDialog(null, e.getMessage(), "Failure",
                    JOptionPane.ERROR_MESSAGE);
            e.printStackTrace();
        }
    }
} 
```

结果如下：

![在此处输入图像描述](../Images/61745b8a6258d82be048e796af4a77f2.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:20:27.860

对不起。我不知道为什么会有红色调。

这就是我们在软件中读取图像的方式。在我们的例子中，我们使用标量库来调整图像大小。

```
URL url = new URL("http://tctechcrunch2011.files.wordpress.com/2012/10/gmm.jpg");
BufferedImage source = javax.imageio.ImageIO.read(url);
BufferedImage manipulated = ...
FileOutputStream fos = new FileOutputStream("badimage.jpeg");
javax.imageio.ImageIO.write(manipulated , "png", fos); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:15:02.057

```
BufferedImage bi =
   ImageIO.read(
      "http://tctechcrunch2011.files.wordpress.com/2012/10/gmm.jpg" );
ImageIO.write( bi, 'JPEG', new File( "badimage.jpeg" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-01T11:06:48.680

```
ImageIcon mySourceImage = new ImageIcon(sourceImageFile.getAbsolutePath());
BufferedImage sourceImage = new BufferedImage(mySourceImage.getIconWidth(),  mySourceImage.getIconHeight(), BufferedImage.TYPE_3BYTE_BGR);
Graphics2D g2d2 = (Graphics2D) sourceImage.getGraphics();
mySourceImage.paintIcon(null, g2d2, 0, 0);
g2d2.dispose(); 
```

上面的代码不使用 Image.read （很可能）包含错误。它不会产生红色图像。但我不确定 BufferedImage 第三个参数中的颜色空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-19T09:26:55.283

正如其他答案中提到的，这是与 ImageIO 和 Oracle JRE 捆绑在一起的标准 JPEG 插件中的一个已知错误。

[但是，通过将 JPEG 插件替换为TwelveMonkeys ImageIO JPEG 插件](http://haraldk.github.io/TwelveMonkeys/)，可以继续使用 OP 的原始代码中的ImageIO 。您只需要将 JAR 及其依赖项添加到运行时类路径。无需更改代码（我使用 OP 的测试文件进行了测试）。

该插件专门用于解决或修复标准 JPEG 插件的许多问题。它支持 CMYK JPEG、损坏的 ICC 配置文件、Exif 数据等。该插件由我开发，可在开源 BSD 许可下免费分发。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-05T13:29:53.877

这是一个使用 imageIO 的解决方法的 Java Servlet 示例：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
{
    //TestImage
    String testImage = "UNC Path or URL.jpg";//Load your image here...

    //Get the streams
    FileInputStream inStream = new FileInputStream(testImage);
    ServletOutputStream outStream = response.getOutputStream();

    //Create the buffers
    BufferedInputStream inBuf = new BufferedInputStream(inStream);
    BufferedOutputStream outBuf = new BufferedOutputStream(outStream);

    //Write input into output
    int ch =0; ;
    while((ch=inBuf.read())!=-1)
        outBuf.write(ch);

    inBuf.close();
    inStream.close();
    outBuf.close();
    outStream.close();
} 
```

# c#-4.0 - 无法使用 EasyHook 从托管代码中挂钩 ICorJitCompiler:compileMethod

> ID：12963692
> 
> 赞同：3
> 
> 时间：2012-10-18T21:00:15.197
> 
> 标签：c#-4.0, clr, pinvoke, jit, easyhook

我一直在尝试`ICorJitCompiler:compileMethod`从 v4.0 中的托管代码中使用`EasyHook LocalHook.Create`. 我通过解组这样的结构获得了函数指针：

```
public static class NativeJitInterop
{
    [DllImport("clrjit.dll", CharSet=CharSet.None, SetLastError = true)]
    private static extern IntPtr getJit();

public static ClrJitCompilerHook GetManagedJitCompiler()
{
    ClrJitCompilerHook clrJitCompiler = null;

    IntPtr _clrJitPtr = getJit();

    ICorJitCompiler _corJitCompiler = (ICorJitCompiler)  Marshal.PtrToStructure(_clrJitPtr, typeof(ICorJitCompiler));
    clrJitCompiler = new ClrJitCompilerHook(_clrJitPtr, _corJitCompiler.compileMethod);

    return clrJitCompiler;
}    

[StructLayout(LayoutKind.Sequential)]
internal struct ICorJitCompiler
{
    [MarshalAs(UnmanagedType.FunctionPtr)]
    public CompileMethodSig compileMethod;

}

[UnmanagedFunctionPointer(CallingConvention.StdCall, SetLastError = true)]
internal delegate Int32 CompileMethodSig(IntPtr thisPtr, IntPtr corJitInfo, IntPtr methodInfo, UInt32 flags, [Out] IntPtr ILCode, [Out] UInt64 ILCodeSize); 
```

一切正常，结构似乎没有问题地解组，并且包含的​​委托的 _methodPtr 和 _methodPtrAux 字段填充了一些指针值。

当我尝试像这样设置钩子时出现问题：

```
public void HookClrJitCompiler()
{
    IntPtr _compileMethodPtr = Marshal.GetFunctionPointerForDelegate(_compileMethodDelegate);

    _localJitHook = LocalHook.Create(_compileMethodPtr, new CompileMethodSig(ClrJitCompilerCalled), this);

    _localJitHook.ThreadACL.SetExclusiveACL(new Int32[] { 0 });
} 
```

我获得**了 AccessViolationException**。

我解决了这个问题并将 `_compileMethodPtr`变量设置为委托的`_methodPtr`. 创建钩子时我没有例外，但钩子也不起作用。

我做错了什么？

# audio - 选择音频 API

> ID：12963697
> 
> 赞同：1
> 
> 时间：2012-10-18T21:00:30.253
> 
> 标签：audio, windows-7

我正在努力在大量的音频编程语言和 API 之间做出选择。我对音频编程非常（完全）陌生，所以请多多包涵。

**软件**

我需要能够：

1.  在将不同声音输出到任何东西之前改变它们的音量（这些声音可以有多种不同的来源，例如 mp3 和麦克风输入）
2.  相移声音
3.  叠加我调整过的声音（根据项目 1 和 2）
4.  相互独立地控制 8 个通道中的每一个的输出
5.  让这一切在 Windows7 上发生

这些功能需要由我可能自己制作的图形前端进行抽象。我想要做的是创建“声源”，并在 3D 环境中沿着预定义的轨迹和/或与钻机内的任何人的运动相关联地移动它们。我想做俯仰弯曲的原因是我可以弄乱红移的东西。

我不想事先构建完整的曲目然后播放它们。我希望播放的声音取决于传感器的外部输入以及我在前端所做的事情。

据我所知，这意味着我不能使用任何现有的完整音频制作应用程序。

**问题**

我一直在寻找我应该使用的 API 或语言，但我没有找到空白，实际上恰恰相反。我正在努力缩小搜索范围。我的很多问题都源于我没有音频编程经验。

那么，有没有人知道符合我标准的 API 或语言？

**硬件的东西和目标**

（我把它留到最后，因为我不确定它有多相关）

我的目标是制作三个不同高度的扬声器环，并对它们进行足够的控制，以便能够模拟阵列内任意数量的“声源”。这个想法是让某人站在装备的中间，并能够让它听起来好像有很多东西在他们周围移动。为了让它工作，我计划做一个小触发并使用我电脑上的 8 个音频通道。数学很简单，剩下的就是我需要担心的

我接下来要做的是将一堆摄像头连接到物体上，并做一些简单的图像识别工作，以便能够将声源“附加”到不同的物体上。例如。如果有人站在正确的位置，它可以看起来好像所有的红色球都像鸭子一样嘎嘎叫，所有橙色的球都在发出令人难以忘怀的呻吟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:53:57.493

这并不是要减损 Richard Small 的回答，而是要评论一些其他选项：

如果您正在寻找可以更快地进行原型制作和开发的更高级别的东西，您需要[max/msp](http://cycling74.com/products/max/)或它的开源竞争对手[puredata](http://puredata.info/)。这些是为有技术头脑的音乐家设计的，但对程序员来说并不多。因此，您可以快速有效地构建这种东西。

您还有一些较低级别的选项：PortAudio 可以处理您的音频 I/O，您必须自己或与其他库一起完成声音生成和效果等。Cinder 和 OpenFramewoks 都为“创造性编程”提供音频、相机和其他东西的接口。恐怕我不知道它们是否满足你的全部要求，但它们在这类事情上很强大而且很受欢迎，所以我鼓励你看看它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:12:55.703

如今，两个主要的往往是

WWise [WWise 下载链接](http://www.audiokinetic.com/en/downloads)

FMOD [FMOD 下载链接](http://www.fmod.org/fmod-downloads.html)

实际上，这两个引擎甚至可能超出您的需求，但我几乎可以保证它们能够满足您的任何需求。

# sql-server-2008 - 如何舍入 SQL 时间变量？

> ID：12963698
> 
> 赞同：2
> 
> 时间：2012-10-18T21:00:30.870
> 
> 标签：sql-server-2008, tsql

我已经声明了一个值为 23:59:59 的时间变量。所以，我需要把它四舍五入到 24:00。你有什么想法吗？

```
declare @t1 time = '23:59:59' 
```

这仅在 select 语句中是必需的。我知道时间不能插入为 24:00。

[http://msdn.microsoft.com/en-us/library/bb677243(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb677243(v=sql.105).aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:14:49.653

怎么样：

```
--setup
    declare @t1 time = '23:59:59'
    --declare @t1 time = '00:59:59'
    --declare @t1 time = '00:59:29'
    --declare @t1 time = '00:00:00'

--solution for rounding to nearest hour
    declare @temp1 int = datepart(minute, @t1) / 30
    set @temp1 = (DATEPART(hour, @t1) % 24) + @temp1
    select @t1, cast(@temp1 as nvarchar(2)) + ':00' --not too worried about rpading hours since 1:00 makes sense

--solution for rounding to nearest minute
    declare @ss int = datepart(second, @t1)/30
    , @mm int = datepart(minute, @t1)
    , @hh int = datepart(hour, @t1)
    , @oo nchar(2) = N'00' --used for padding

    set @hh = (@hh + (@mm / 30) * @ss) % 24
    set @mm = (@mm + @ss) % 60

    select @t1
    , substring(@oo + cast(@hh as nvarchar(2)), case when @hh > 9 then 3 when @hh = 0 then 1 else 2 end, 2) --hours rpaded 
     + N':' 
     + substring(@oo + cast(@mm as nvarchar(2)), case when @mm > 9 then 3 when @mm = 0 then 1 else 2 end, 2) --minutes rpaded 
```

# mysql - 如何以不同的方式将 group_concat 添加到 hsqldb？

> ID：12963700
> 
> 赞同：0
> 
> 时间：2012-10-18T21:00:32.007
> 
> 标签：mysql, sql, unit-testing, hsqldb, group-concat

我正在尝试将 group_concat 函数添加到 hsqldb 以便我可以正确地将查询作为单元/集成测试进行测试。该查询在 mysql 中运行良好，因此我需要它在 hsqldb 中运行（希望如此）。

```
 // GROUP_CONCAT
        jdbcTemplate.update("DROP FUNCTION GROUP_CONCAT IF EXISTS;");
        jdbcTemplate.update(
            "create aggregate function group_concat(in val varchar(100), in flag boolean, inout buffer varchar(1000), inout counter int) " +
            "   returns varchar(1000) " +
            "   contains sql " +
            "begin atomic " +
            "   if flag then" +
            "      return buffer;" +
            "   else" +
            "      if val is null then return null; end if;" +
            "      if buffer is null then set buffer = ''; end if;" +
            "      if counter is null then set counter = 0; end if;" +
            "      if counter > 0 then set buffer = buffer || ','; end if;" +
            "      set buffer = buffer + val;" +
            "      set counter = counter + 1;" +
            "      return null;" +
            "   end if;" +
            "end;"
        ); 
```

添加这个聚合函数可以解决大部分问题。它将正确地表现得像 mysql 的 group_concat。但是，它不会让我像这样使用 distinct 关键字：

```
group_concat(distinct column) 
```

有没有办法考虑不同的关键字？或者我是否重写查询以完全避免 distinct 关键字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:14:24.143

HSQLDB 有内置的 GROUP_CONCAT 并接受 DISTINCT。

[http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_aggregate_funcs](http://hsqldb.org/doc/2.0/guide/dataaccess-chapt.html#dac_aggregate_funcs)

目前，您无法将 DISTINCT 添加到用户定义的聚合函数中，但这看起来是一个有趣的功能，将来会允许使用。

# android - 如何连续移动编辑文本字段焦点

> ID：12963702
> 
> 赞同：0
> 
> 时间：2012-10-18T21:00:49.303
> 
> 标签：android, android-layout

我正在尝试做一个锁屏，锁屏基本上有四个编辑文本字段，这些字段基本上都是数字输入，提供数字部分没有问题。

现在我遇到的问题是，文本字段应该只取一个数值，而编辑文本字段应该改变焦点，在为一个字段提供值之后，如何实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:26:01.367

使用以下属性仅输入数字

```
<EditText android:inputType="number" ... /> 
```

或者

```
<EditText
    android:inputType="phone"
    android:digits="1234567890"
    ...
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:28:04.203

为了只允许数字输入（并且还显示“数字”-键盘），请使用[`inputType`EditText](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)类的 - 属性。要只允许在字段中输入一位数字，您可以使用[`android:maxLength`-attibute](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3amaxLength)。

使用 a[`TextWatcher`](http://developer.android.com/reference/android/text/TextWatcher.html)检查是否已在文本字段中输入了一位数字并将焦点更改为下一个字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:29:24.547

为每个 EditText 添加一个侦听器以了解文本何时更改（确保 EditText 强制执行最大长度为 1）。此侦听器的逻辑将检查文本是否为数字且长度为 1，然后它将转移焦点。这是代码：

```
EditText et1 = ...;
EditText et2 = ...;
EditText et3 = ...;
EditText et4 = ...;

et1.addTextChangedListener(new TextWatcher() {
   @Override
   public void onTextChanged(CharSequence s, int start, int before, int count) {
      if( s.length() == 1 && Character.isDigit(s.charAt(0)) ) {
         et2.requestFocus();
      }
   }

   @Override
   public void afterTextChanged(Editable e) { }

   @Override
   public void beforeTextChanged(CharSequence s, int start, int count, int after) { }
});

et2.addTextChangedListener(new TextWatcher() {
   @Override
   public void onTextChanged(CharSequence s, int start, int before, int count) {
      if( s.length() == 1 && Character.isDigit(s.charAt(0)) ) {
         et3.requestFocus();
      }
   }

   @Override
   public void afterTextChanged(Editable e) { }

   @Override
   public void beforeTextChanged(CharSequence s, int start, int count, int after) { }
});

et3.addTextChangedListener(new TextWatcher() {
   @Override
   public void onTextChanged(CharSequence s, int start, int before, int count) {
      if( s.length() == 1 && Character.isDigit(s.charAt(0)) ) {
         et4.requestFocus();
      }
   }

   @Override
   public void afterTextChanged(Editable e) { }

   @Override
   public void beforeTextChanged(CharSequence s, int start, int count, int after) { }
}); 
```

# javascript - 无法通过设置 video_elem.src="" 或 video.mozSrcObject = null 从 Firefox 中的 HTML5 视频中释放内存

> ID：12963704
> 
> 赞同：0
> 
> 时间：2012-10-18T21:00:50.713
> 
> 标签：javascript, html, html5-video

在 chrome 中，将视频 dom 节点的 src 属性设置为空字符串 ( "" ) 会释放与视频节点关联的内存。这在 FF 版本 16.0.1 到今天当前的夜间版本 19.0a1 中不起作用。每晚构建在视频节点上具有可用的属性 mozSrcObject ，有人建议您可以将其设置为 null ，但这似乎也不起作用。我还尝试从 DOM 中删除节点，希望它们能够被垃圾收集，但这也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T01:40:41.027

从[HTML5 规范](http://dev.w3.org/html5/spec/%5D)：

> *4.8.10.2 媒体资源的位置*
> 
> 媒体元素的`src`content 属性给出了要显示的媒体资源（视频、音频）的地址。该属性（如果存在）必须包含一个可能被空格包围的有效非空 URL。
> 
> 如果`src`设置或更改了媒体元素的属性，用户代理必须调用媒体元素的媒体元素加载算法。（即使存在源元素，删除 src 属性也不会这样做。）

听起来将 设置`src`为空值或删除它不会触发媒体元素加载算法。我建议`load()`以后再打电话。如果你可以强制它通过资源选择算法，那么它会打到这一步：

> 否则，媒体元素既没有 src 属性也没有源元素子元素：将 networkState 设置为 NETWORK_EMPTY，并中止这些步骤；同步部分结束。

当然，我只是猜测。希望能帮助到你。

# ios - Core Motion 加速度计显示奇怪的数据

> ID：12963708
> 
> 赞同：1
> 
> 时间：2012-10-18T21:01:14.147
> 
> 标签：ios, accelerometer, core-motion

简短的问题：即使设备放在桌子上，CoreMotion 值的加速度也会产生相当大的漂移。没关系还是我做错了什么？

长问题：我在 -init 方法中使用这样的 CoreMotion 加速度计：

```
motionManager = [[CMMotionManager alloc] init];
motionManager.deviceMotionUpdateInterval = 1.0 / 60.0; 
```

然后开始更新它：

```
if ([motionManager isDeviceMotionAvailable])
{
    [motionManager startDeviceMotionUpdatesUsingReferenceFrame:CMAttitudeReferenceFrameXArbitraryCorrectedZVertical];
} 
```

然后在一些更新方法中读取值（由 Cocos3d 由计时器调用）。另外，我有一个静态变量 accum - 累加器，它向它添加当前的加速度值。因此 accum 包含所有加速度值的总和：

```
if (motionManager.deviceMotionActive)
{
    CMDeviceMotion *deviceMotion = motionManager.deviceMotion;
    CMAcceleration accel = deviceMotion.userAcceleration;
    static CC3Vector accum = {0,0,0};
    accum.x += accel.x;
    accum.y += accel.y;
    accum.z += accel.z;
    NSLog(@"%f, %f, %f", accum.x, accum.y, accum.z);
} 
```

我将 iPad 3 放在桌子上，乍一看，加速度值似乎没问题，但很明显，一个轴上的累积值开始迅速增加。我知道，从原始数据中去除重力并不是 100% 准确的，但我没想到即使 iPad 放在桌子上不动，情况也会如此糟糕。所以问题是我做错了什么还是应该是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:28:10.790

帮助获得更高准确性的一种方法是使用以下内容：

```
accum.x += (previous_accel.x - accel.x)/2;
previouis_accel.x = accel.x; 
```

当您获取并记录原始传感器读数时，您会自动丢失数据，就像您在下面制作的丑陋图片/图表中看到的那样。通过平均上次读数和当前读数，您可以帮助消除（或填写）缺失的信息。
![数据](../Images/70a8f51fae7411d0793ce9370050e4b4.png)

您可能从微积分 1（我认为的最小二乘法）中认识到这一点，无论如何，就像在微积分中一样，间隔越小，您越接近真实信息。我想我在问，您是否以最大频率采样？

使用加速度计时始终推荐的另一种（一种）基本数据管理技术是低通滤波器。它很容易实现，即使没有上面的平均技术，它也会在静止时消除你的漂移。如果您还没有听说过，这只是对读取的值的测试，看看它们是否大到足以成为噪音以外的任何东西。（噪音可能是由很多原因引起的，但据我所知，温度是最大的问题之一，其次是我们凡人无法检测到的微振动）。

```
if(accel.x < .05)
    accel.x = 0.0; 
```

使用的实际值将完全取决于您的传感器，并且在某种程度上，您正在尝试做什么/读数需要有多敏感，因此您需要进行一些测试以找出适合您情况的最佳值。如果可以的话，我会输出到 csv 文件，然后将它们导入到具有绘图功能的电子表格中。在过滤器测试和以后调试程序时查看图表中的数据非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:28:37.617

即使您精确地知道重力的方向和强度，加速度计也过于嘈杂，无法准确地积分速度。

您可以通过累积平均加速度矢量并减去它来抵消偏差，但显然这将在您倾斜或加速设备的那一刻停止工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T21:14:31.070

您正在使用`CMAttitudeReferenceFrameXArbitraryCorrectedZVertical`，它根据磁力计更新偏航。虽然这通常可以很好地纠正长期值，但它确实会根据环境而漂移。

# c++ - 从另一个虚函数调用时内联虚函数？

> ID：12963710
> 
> 赞同：3
> 
> 时间：2012-10-18T21:01:20.003
> 
> 标签：c++, gcc, inline, virtual-functions

我有一个具有两个虚拟成员函数的类：`foo`和`wrapper`. `foo`短而快，并且包含一个多次`wrapper`调用的循环。`foo`我希望有一些方法可以内联对`foo` *包装函数内部的*调用，即使是从指向对象的指针调用时：

```
MyClass *obj = getObject();
obj->foo(); // As I understand it, this cannot be inlined. That's okay.
obj->wrapper(); // Nor will this. However, I hope that the machine code
                // for the wrapper function will contain inlined calls to
                // foo(). 
```

**从本质上讲，我希望编译器生成包装函数的多个版本——每个可能的类一个——并内联调用适当的`foo`，这应该是可能的，因为在选择`wrapper`要执行的函数之前确定对象类型。**这可能吗？有没有编译器支持这种优化？

**编辑：**我感谢到目前为止的所有反馈和答案，我最终可能会选择其中一个。但是，大多数回复忽略了我的问题的最后一部分，我解释了为什么我认为这种优化应该是可行的。这确实是我问题的症结所在，我仍然希望有人能解决这个问题。

**编辑 2**：我选择了 Vlad 的答案，因为他都建议了流行的解决方法并部分解决了我提出的优化（在 David 的答案的评论中）。感谢所有写答案的人——我都读了，没有一个明确的“赢家”。

此外，我发现一篇学术论文提出了与我的建议非常相似的优化：[http](http://www.ebb.org/bkuhn/articles/cpp-opt.pdf) ://www.ebb.org/bkuhn/articles/cpp-opt.pdf 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:11:34.440

在某些情况下，编译器可以在编译时确定虚拟调度行为并执行非虚拟函数调用甚至内联函数。只有当它能够确定您的类是继承链中的“顶部”或者这两个函数没有以其他方式重载时，它才能做到这一点。通常，这根本不可能，特别是如果您没有为整个程序启用后期优化。

除非您想检查编译器优化的结果，否则最好的选择是根本不在内部循环中使用虚函数。例如，像这样：

```
class Foo {
  public:
    virtual void foo()
    {
        foo_impl();
    }

    virtual void bar()
    {
        for (int i = 0; i < ∞; ++i) {
            foo_impl();
        }
    }

  private:
    void foo_impl() { /* do some nasty stuff here */ }
}; 
```

但是在那种情况下，您显然放弃了有人可能会进来，从您的类继承并抛出他们自己的“foo”实现以由您的“bar”调用的想法。他们基本上将需要重新实现两者。

另一方面，它闻起来有点像过早的优化。现代 CPU 很可能会“锁定”您的循环，预测退出循环并一遍又一遍地执行相同的 µOP，即使您的方法实际上是虚拟的。所以我建议你在花时间优化它之前仔细确定这是一个瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:16:40.460

不，如果通过指针或引用（这包括指针）执行函数调用，则不会内联`this`。可以创建一个从当前类型扩展的新类型，并在不覆盖的`foo`情况下覆盖`wrapper`.

如果你想让编译器内联你的函数，你必须禁用该调用的虚拟调度：

```
void Type::wrapper() {
    Type::foo();            // no dynamic dispatch
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:19:58.980

想象以下层次结构：

```
class Base
{
    virtual void foo();
    virtual void wrapper();
};

class Derived1: public Base
{
    virtual void foo() { cout << "Derived1::foo"; }
    virtual void wrapper() { foo(); }
};

class Derived2: public Derived1
{
    virtual void foo() { cout << "Derived2::foo"; }
};

Base * p1 = new Derived1;
p1->wrapper();  // calls Derived1::wrapper which calls Derived1::foo
Base * p2 = new Derived2;
p2->wrapper();  // calls Derived1::wrapper which calls Derived2::foo 
```

你能看出问题吗？Derived1::wrapper*必须*调用 Derived2::foo。直到运行时它才能知道它是调用 Derived1::foo 还是 Derived2::foo，所以没有办法内联它。

如果要确保内联是可能的，请确保要内联的函数不是虚拟的。从您的描述看来，如果层次结构中的每个类都重新实现`foo`and ，这可能是可能的`wrapper`。一个函数不需要是虚拟的就可以被覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T21:08:52.013

这是不准确的。`virtual`函数**可以**内联，但前提是编译器确定地知道对象的静态类型 - 从而保证多态性有效。

例如：

```
struct A
{
    virtual void foo()
    {
    }
};
struct B
{
    virtual void foo()
    {
    }
};

int main()
{
    A a;
    a.foo(); //this can be inlined
    A* pa = new A;
    pa->foo(); //so can this
}

void goo(A* pa)
{
    pa->foo() //this probably can't
} 
```

也就是说，在你的情况下，这似乎不可能发生。您可以做的是拥有另一个`virtual`实际实现该功能并静态调用它的非函数，因此该调用在编译时得到解决：

```
class MyClass
{
    virtual void foo() = 0;
    virtual void wrapper() = 0;
};

class Derived : MyClass
{
    void fooImpl()
    {
       //keep the actual implementation here
    }
    virtual void foo()
    {
       fooImpl();
    }
    virtual void wrapper()
    {
       for ( int i = 0 ; i < manyTimes ; i++ )
          fooImpl(); //this can get inlined
    }
}; 
```

或者`Derived::foo()`就像@avakar 指出的那样。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T21:09:53.913

您的函数是`virtual`并且它的类型直到运行时才指示，那么您如何期望编译器将某个类的代码内联到其中？

在一些类似的情况下，我有 2 个函数：`foo`那是虚拟的，那是正常的函数，`foo_impl`将被调用`foo``wrapper`

# php - CodeIgniter - 无线电输入上的 PHP Set_Radio

> ID：12963711
> 
> 赞同：5
> 
> 时间：2012-10-18T21:01:23.837
> 
> 标签：php, javascript, html, codeigniter, validation

我在一个网站上工作，我遇到了一个问题。为了预先设置或重新输入选定的值，Codeigniter 允许您使用 set_radio 来解决您的问题，请参见此处：

```
<td>Do You Have a PayPal Account <span class="error">*</span> : </td>
<td colspan="2" align="left" valign="top"><label>   
  <!-- used for validation -->
    <input type="hidden" id="temp_mid" value="" />
    <input name="mail_account" type="radio" id="p_same" value="same" onclick="dohide_show(this.value);" <?php echo set_radio('mail_account', 'same'); ?>/> Yes(same as email address as above.)<br/>
    <input name="mail_account" type="radio" id="p_diff" value="diff" onclick="dohide_show(this.value);" <?php echo set_radio('mail_account', 'diff'); ?>/> Yes(different than above.)<br/>
    <input name="mail_account" type="radio" id="p_checkInMail" value="checkInMail" onclick="dohide_show(this.value);" <?php echo set_radio('mail_account', 'checkInMail'); ?>/> No(I would prefer to receive a check in the mail.)                  
     <?php echo form_error('mail_account'); ?>           

 </td> 
```

这在验证后工作得非常好，因为如果表单的另一部分有错误，则选择了前一个单选按钮。但是，当用户更正错误后尝试重新提交页面时，单选选择上的验证失败，要求我再次单击单选按钮，即使单选按钮在我之前选择的选项上被直观地选中。所以我必须再次选择单选按钮，然后才能重新提交表单。在这里可以看到调用的警报：

```
function validate_playpal()
        {   
            var temp=$('#temp_mid').val();
            if(temp=="")
            {
                alert('Please select the PayPal account option.');                  
                $('#p_same').focus();
                return false;
            }
            if(document.getElementById('p_diff').checked== true && document.getElementById('paypal_emailid').value=='')
            {
                alert('Please provide your PayPal email address.');
                document.getElementById('paypal_emailid').focus();
                return false;
            }

            if(document.getElementById('paypal_emailid').value!='')
            {
                if(!email_format(document.getElementById('paypal_emailid').value)){
                    alert('Please enter valid email address.');
                    document.getElementById('paypal_emailid').value="";
                    document.getElementById('paypal_emailid').focus();
                    return false;               
                }
            }
            return true;
        } 
```

有谁知道为什么这不起作用，即使它正确地重新填充了表单？谢谢。

编辑：

对于询问 Mid_temp 做什么的每个人，在我看来，如果不需要选择按钮，它只会隐藏按钮。在我拥有的代码中，这些是唯一提到的地方：

```
 $('#bx').hide();
if(document.getElementById('p_diff').checked==true){    
    $('#bx').show();
}

function dohide_show(val){
    if(val=='diff')
    {       
        $('#bx').show();
        $('#paypal_emailid').val('');
        document.getElementById('p_diff').checked=true;
        $('#temp_mid').val('clicked');
    }
    else if(val=='same')
    {       
        $('#bx').hide();
        $('#paypal_emailid').val($('#email_id').val());
        $('#temp_mid').val('clicked');  
    }
    else
    {
        $('#bx').hide();
        $('#paypal_emailid').val($('#email_id').val());
        $('#temp_mid').val('clicked');
    }

} 
```

在这里，在一个完全独立的文件中：

```
function hide_box()
            {
                $('#bx').hide();
                $('#paypal_emailid').val('');
                $('#temp_mid').val('clicked');
            }
            function show_box()
            {
                $('#bx').show();
                $('#paypal_emailid').focus();
                $('#temp_mid').val('clicked');
            } 
```

此外，Paypal 电子邮件 ID 只是检查用户输入的贝宝电子邮件地址（如果他们有贝宝帐户）。感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T16:41:28.633

我看到您没有重新填充该`id="temp_mid"`字段，而是在此处检查`if(temp=="")` 。也许您也需要重新填充它？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T21:15:42.420

您收到什么错误消息，“请选择 PayPal 帐户选项。”？

**这将永远失败**

```
<input type="hidden" id="temp_mid" value="" />

......
var temp=$('#temp_mid').val();
if(temp=="")
{
    alert('Please select the PayPal account option.');                  
    $('#p_same').focus();
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T20:51:33.087

正如@Mikhail 建议的那样，您不会重新填充`temp_mid`隐藏字段的值。为了避免重新填充它，您可以只处理该字段并检测是否已使用**jQuery**通过以下方式选择了单选按钮的选项：

```
function validate_playpal()
{   
    if($('[name="mail_account"]:checked').size() > 0)
    {
        alert('Please select the PayPal account option.');                  
        $('#p_same').focus();
        return false;
    }
    ...
    return true;
} 
```

注意`if`第三行中的语句`$('[name="mail_account"]:checked').size() > 0`。

希望能帮助到你-

# javascript - javascript onclick没有在按钮点击时触发

> ID：12963718
> 
> 赞同：-1
> 
> 时间：2012-10-18T21:02:38.033
> 
> 标签：javascript, onclick, dojo, event-handling, event-binding

当用户单击按钮时，我试图调用 JS 函数。但是 onclick 事件没有被触发。开发人员工具向我显示以下错误：

执行错误：

```
 function (/*Event*/ e){
        // summary:
        //      Handler when the user activates the button portion.
        if(this._onClick(e) === false){ // returning nothing is same as true
            e.preventDefault(); // needed for checkbox
        }else if(this.type == "submit" && !this.focusNode.form){ // see if a nonform widget needs to be signalled
            for(var node=this.domNode; node.parentNode/*#5935*/; node=node.parentNode){
                var widget=dijit.byNode(node);
                if(widget && typeof widget._onSubmit == "function"){
                    widget._onSubmit(e);
                    break;
                }
            }
        }
    } 
ReferenceError
arguments: Array[1]
get message: function () { [native code] }
get stack: function () { [native code] }
set message: function () { [native code] }
set stack: function () { [native code] }
type: "not_defined"
__proto__: Error 
```

这是我的代码：

HTML

```
<td>
<button dojoType = "xwt.widget.form.TextButton" id = "pingButton" baseClass = "defaultButton" onclick = "onPing();">Ping
  </button>
   </td> 
```

JS：

```
onPing : function() {
        alert('works');
    } 
```

关于做什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T02:09:28.287

我将向 OP 和其他人解释他为什么会遇到问题，而不是继续一个相当猛烈的反对表线程。

**问题 1：** OP 没有发布所有相关代码。OP 对于 OOP 和 SO 来说显然都是新的，他犯了一个致命的错误，即假设少即是多。我们可以看到，根据冒号语法，有一个`onPing`函数是对象的一部分。`:`如果他要发布他的所有代码，他的 javascript 将如下所示：

```
var myObject = {
    onPing: function() {
        alert("works");
    }
}; 
```

这里需要注意的是，我不确定他的对象的名称是什么。我使用这个名称`myObject`是为了暗示*“您的对象名称”*。

**问题 2：**有一个与按钮内联定义的 onclick 函数。这不是好的做法，可能会导致错误......尤其是当在闭包内编写如此多的剪切和粘贴 javascript 片段时：

```
(function() {
    /* 
    This is an example of closure.  
    Any variables/objects/functions defined in here are not accessible to the outside world 
    */
})(); 
```

**问题 3：**代码似乎依赖于`type`具有 value的属性`submit`。因此按钮应该具有该属性集：

```
<button type = "submit" dojoType = "xwt.widget.form.TextButton" id = "pingButton" baseClass = "defaultButton" onclick = "onPing();">Ping</button> 
```

虽然一个快速而肮脏的解决方案可能是声明一个名为 的全局函数`onPing`，但这可能会导致其他库出现问题，使代码更难以维护，并且只是简单的坏习惯，不应该被鼓励。因此，让我们探索一个更好的解决方案，它将执行以下操作：

*   显示完整的工作代码
*   在闭包中定义对象
*   通过代码绑定事件，而不是内联

开始...

```
<button type="submit" dojoType="xwt.widget.form.TextButton" id="pingButton" baseClass="defaultButton">Ping</button>

<script>
(function() {
    var myObject = {
        onPing: function() {
            alert("works");
        }
    };

    document.getElementById('pingButton').onclick = myObject.onPing;
}());
</script> 
```

为了超级好，我们包括一个[jsfiddle](http://jsfiddle.net/ryanwheale/uJfRs/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T21:13:26.393

这有效

```
function onPing() {
        alert("this");
    } 
```

可以按原样离开按钮....

```
<button dojoType = "xwt.widget.form.TextButton" id = "pingButton" baseClass = "defaultButton" onclick = "onPing();">Ping</button> 
```

# windows-8 - C#/XAML Store App：访问 FlipView.ItemTemplate 中的控件

> ID：12963722
> 
> 赞同：2
> 
> 时间：2012-10-18T21:02:52.343
> 
> 标签：windows-8, windows-runtime, winrt-xaml, mediaelement

我有一个 Flipview，它有一个 ItemTemplate，其中包含一个 MediaElement 和用于暂停和播放的按钮。我需要能够根据按钮上的 Clicked 事件访问 MediaElement。将按钮链接到 MediaElement 的最佳方式是什么？我在 Internet 上找到的大多数代码示例都适用于 WPF，而不适用于 Store Apps。理想情况下，我希望能够使用 CommandParameters 或某种其他类型的 XAML 绑定将 MediaElement 控件传递回事件处理程序。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:10:15.020

将您的 MediaElement 和按钮放在单独的 UserControl 中，并将该控件放在您的 ItemTemplate 中。在那之后 - 它应该很容易。

# c# - Web Api - 控制器外部的请求参数

> ID：12963729
> 
> 赞同：7
> 
> 时间：2012-10-18T21:03:20.003
> 
> 标签：c#, asp.net-mvc, ninject, asp.net-web-api, httpcontext

我正在开发一个 ASP.NET Web Api 项目，并使其接受 url 中的版本信息。

例如：

> *   api/v1/MyController
> *   api/v2/MyController

现在我想在自定义 LayoutRenderer 中获取请求版本**v1、v2**`Nlog`。通常我会像下面的例子那样做。

```
[LayoutRenderer("Version")]
public class VersionLayoutRenderer : LayoutRenderer
{
    protected override void Append(System.Text.StringBuilder builder, NLog.LogEventInfo logEvent)
    {
        var version = HttpContext.Current.Request.RequestContext.RouteData.Values["Version"];
        builder.Append(version);
    }
} 
```

**问题：** `HttpContext.Current`是NULL

我相信这是因为我使用[Async 包装器](https://github.com/NLog/NLog/blob/master/src/NLog/Targets/Target.cs)，`NLog`并且 Logger 之前的一些调用也是`Async`.

在 Ninject.Extensions.WebApi.UsageLogger 中调用 Async 的记录器示例。此时，`HttpRequestMessage`我们需要获取版本的所有信息。

```
/// <summary>
/// Initializes a new instance of the <see cref="UsageHandler" /> class.
/// </summary>
public UsageHandler()
{
    var kernel = new StandardKernel();

    var logfactory = kernel.Get<ILoggerFactory>();

    this.Log = logfactory.GetCurrentClassLogger();
}

protected override async Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        var startTime = DateTime.Now;

        // Log request
        await request.Content.ReadAsStringAsync().ContinueWith(c =>
            {
                this.Log.Info("{0}: {1} called from {2}", request.Method, HttpUtility.UrlDecode(request.RequestUri.AbsoluteUri), ((HttpContextBase)request.Properties["MS_HttpContext"]).Request.UserHostAddress);
                this.Log.Info("Content-Type: {0}, Content-Length: {1}", request.Content.Headers.ContentType != null ? request.Content.Headers.ContentType.MediaType : string.Empty, request.Content.Headers.ContentLength);
                this.Log.Info("Accept-Encoding: {0}, Accept-Charset: {1}, Accept-Language: {2}", request.Headers.AcceptEncoding, request.Headers.AcceptCharset, request.Headers.AcceptLanguage);

                if (!string.IsNullOrEmpty(c.Result))
                {
                    if (this.MaxContentLength > 0 && c.Result.Length > this.MaxContentLength)
                    {
                        this.Log.Info("Data: {0}", HttpUtility.UrlDecode(c.Result).Substring(0, this.MaxContentLength - 1));
                    }
                    else 
                    {
                        this.Log.Info("Data: {0}", HttpUtility.UrlDecode(c.Result));
                    }
                }
            });

        var response = await base.SendAsync(request, cancellationToken);

        // Log the error if it returned an error
        if (!response.IsSuccessStatusCode)
        {
            this.Log.Error(response.Content.ReadAsStringAsync().Result);
        }

        // Log performance
        this.Log.Info("Request processing time: " + DateTime.Now.Subtract(startTime).TotalSeconds + "s");

        return response;
    } 
```

**问题以****通用**`VersionLayoutRenderer`方式制作作品 的最佳方式是什么？我可以添加一个 MessageHandler 并将 HttpRequest 绑定到某个异步范围吗？如果是这样，任何指导方针将不胜感激，因为我仍然习惯。 **`Ninject`**

 **目前我将版本信息直接添加到 UsageHandler 中的日志调用中，但我真的想要一个更通用的解决方案，我总是可以依赖日志中的版本信息。

**编辑：**将问题更新为更具体并包含更多详细信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:35:54.890

尝试使用以下方式注入上下文：

```
kernel.Bind<IDependency>()
    .To<Mydependency>()
    .InRequestScope()
    .WithConstructorArgument("context",c=>HttpContext.Current); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T00:41:30.797

实际的问题是你应该用 Ninject 做什么——你只需要对你的处理进行分阶段，这样任何将要异步运行的对象都拥有他们需要的一切，而不依赖于魔法`HttpContext.Current`。首先在没有 DI 容器的情况下使用它。

然后，使用 Ninject 的主要步骤是：-

1.  您的`Bind`语句需要运行一次。请参阅 Ninject.MV3 wiki 了解最佳方法（在它被合并之前，基于 NuGet 的版本没有 OOTB）

2.  正如@rickythefox（+1'd）所说，您的注册应该将线程/上下文相关数据烘焙到对象中，并且您配置注册以便它可以在请求处理的早期发生，当您仍在线程上时`HttpContext.Current`

    ```
    kernel.Bind<ILogger>()
    // TODO replace GCCL with something like GetClassLogger(ctx.Request.Service.ReflectedType) - see the wiki for examples
      .ToMethod( ctx=> ctx.Get<ILoggerFactory>().GetCurrentClassLogger()) 
      .InRequestScope()
      .WithConstructorArgument("context",c=>HttpContext.Current); 
    ```

然后只需让处理程序的构造函数接受一个`ILogger`，它可以分配给`.Log`（我希望不是`static`：D）

注意，我们的目标是让你永远不要写一个`kernel.Get()`, ever, 句号。

但这里真正的问题是，正确使用 WebApi 不涉及使用`HttpContext.Current`或任何其他魔术`static`方法或任何类似的东西（为了可测试性，使自己独立于托管上下文（自托管、OWIN 等），以及更多原因）。

此外，如果您使用的是 NLog（或 Log4Net），您还应该查看`Ninject.Extensions.Logging`包（和源代码）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T23:22:40.560

[GlobalConfiguration](http://msdn.microsoft.com/en-us/library/system.web.http.globalconfiguration%28v=vs.108%29.aspx)类可以让您访问路由配置。

```
// The code below assumes a map routing convention of api/{version}/{controller}/....

// This will give you the configured routes
var routes      = GlobalConfiguration.Configuration.Routes;

// This will give you the route templates
var templates   = routes
    .Select(route => route.RouteTemplate);

// This will give you the distinct versions for all controllers
var versions    = routes
    .Select(route => route.RouteTemplate)
    .Select(template => template.Split("/".ToCharArray(), StringSplitOptions.RemoveEmptyEntries))
    .Select(values => values[1])
    .Distinct();

// This will give you the distinct versions for a controller with the specified name
var name                = "MyController";

var controllerVersions  = routes
    .Select(route => route.RouteTemplate)
    .Select(template => template.Split("/".ToCharArray(), StringSplitOptions.RemoveEmptyEntries))
    .Where(values => String.Equals(values[2], name, StringComparison.OrdinalIgnoreCase))
    .Select(values => values[1])
    .Distinct(); 
```

我不确定您是尝试使用已知值（控制器名称）解析版本还是尝试动态解析它。如果注入当前的 HttpContext，则可以使用上下文的请求 URI 通过路由模板过滤路由。

**编辑：**在您发表评论后，我意识到路由配置不是您想要的。

如果最终目标是在控制器中实现日志记录，您可能需要查看[ASP.NET Web API](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)中的跟踪，因为 Web API 基础结构支持内置跟踪。**

# delphi - Delphi 密钥“Known Packages”中的密钥顺序是否重要？

> ID：12963730
> 
> 赞同：2
> 
> 时间：2012-10-18T21:03:29.427
> 
> 标签：delphi, registry, delphi-xe2

我正在尝试保存一些 Delphi 设置信息以加快 Delphi 安装速度，但我对注册表键值顺序行为感到非常困惑。我导出了我的 Delphi XE2 注册表项：

```
HKEY_CURRENT_USER\Software\Embarcadero\BDS\9.0\Known Packages 
```

到 *.reg 文件。从注册表中删除它并重新加载 reg 文件后，Delphi 抱怨缺少 bpl。当我查看密钥列表时，它现在都是按字母顺序排列的——它不是 reg 文件中的那个顺序。我假设在包依赖于另一个包的地方，必须首先列出依赖的包。我对吗？

然后我使用 Inno Setup 按此顺序创建三个键值 - B、A、D。运行后，注册表显示 A、B、D 键顺序。

作为一个组件安装程序，我很少有依赖包。我可以使用什么方法按照我选择的顺序保留密钥？一定是做了什么，因为我有一个按照 Delphi 要求的顺序的 reg 文件。一个出口然后一个进口是不对称的，这似乎很疯狂。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T13:17:08.233

正如您所发现的，这确实与注册表枚举顺序与字母顺序有关。

Delphi 以枚举顺序加载包，这并不总是按字母顺序。
我还没有找到显示枚举顺序的注册表编辑工具，它们似乎总是显示字母顺序。

这在以下情况下尤其重要：

1.  BPL 文件不在 PATH 上，Delphi 无法解析依赖的 BPL 文件本身。
2.  依赖顺序与字母顺序不同

当您无法将 BPL 文件放在 PATH 上时，您应该按照您希望加载 BPL 文件的顺序添加注册表值（您可能需要多个具有相同键的部分来执行此操作）。

或者您应该使依赖顺序按字母顺序 (;

# xpages - 使用 CSJS 选择复选框组中的所有项目？

> ID：12963732
> 
> 赞同：0
> 
> 时间：2012-10-18T21:03:43.163
> 
> 标签：xpages

通过简单地设置组件的值，我可以使用 SSJS 选择复选框组中的所有项目。

但是我将如何在 CSJS 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T11:21:12.123

假设您的复选框组的名称是`checkBoxGroup`检查所有复选框的代码片段应该为您解决问题。

```
<xp:checkBox text="Check all" id="chkCheckAll">
    <xp:eventHandler event="onclick" submit="false">
        <xp:this.script><![CDATA[dojo.query("input[name=\"#{id:checkBoxGroup}\"]").forEach(
    function(node) {
        node.checked = document.getElementById("#{id:chkCheckAll}").checked;
    }
)]]></xp:this.script>
    </xp:eventHandler>
</xp:checkBox> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T02:16:43.080

您可以选择它们`dojo.query`并将 selected 属性设置为 true。您需要检查：每个盒子都有自己的 ID，但它的开头是相同的 - 或者 - 你使用一个类。或者您查找第一个，然后选择所有兄弟姐妹。

该策略取决于您的应用程序的需求。

检查[dojo.query](https://dojotoolkit.org/reference-guide/1.6/dojo/query.html)文档以获取您的选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T17:43:08.960

这就是你在 jquery 中的做法

```
$("[name$=checkBoxGroup1]").attr("checked",true) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-05T16:46:46.483

简化 Naveen 的回答，这对我很有用：

```
dojo.query("input[name=\"#{id:checkBoxGroup1}\"]").forEach( function(node) {
        node.checked = true; 
    }); 
```

# haskell - 为 n 维网格类型编写 cojoin 或 cobind

> ID：12963733
> 
> 赞同：56
> 
> 时间：2012-10-18T21:03:44.280
> 
> 标签：haskell, comonad

使用类型级自然值的典型定义，我定义了一个 n 维网格。

```
{-# LANGUAGE KindSignatures #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE TypeFamilies #-}

data Nat = Z | S Nat

data U (n :: Nat) x where
  Point :: x -> U Z x
  Dimension :: [U n x] -> U n x -> [U n x] -> U (S n) x

dmap :: (U n x -> U m r) -> U (S n) x -> U (S m) r
dmap f (Dimension ls mid rs) = Dimension (map f ls) (f mid) (map f rs)

instance Functor (U n) where
  fmap f (Point x) = Point (f x)
  fmap f d@Dimension{} = dmap (fmap f) d 
```

现在我想让它成为 Comonad 的一个实例，但我无法完全理解它。

```
class Functor w => Comonad w where
  (=>>)    :: w a -> (w a -> b) -> w b
  coreturn :: w a -> a
  cojoin   :: w a -> w (w a)

  x =>> f = fmap f (cojoin x)
  cojoin xx = xx =>> id

instance Comonad (U n) where
  coreturn (Point x) = x
  coreturn (Dimension _ mid _) = coreturn mid

  -- cojoin :: U Z x -> U Z (U Z x)
  cojoin (Point x) = Point (Point x)
  -- cojoin ::U (S n) x -> U (S n) (U (S n) x)
  cojoin d@Dimension{} = undefined

  -- =>> :: U Z x -> (U Z x -> r) -> U Z r
  p@Point{} =>> f = Point (f p)
  -- =>> :: U (S n) x -> (U (S n) x -> r) -> U (S n) r
  d@Dimension{} =>> f = undefined 
```

在 n 维网格上使用`cojoin`将产生 n 维网格的 n 维网格。我想提供一个与这个想法相同的实例，[即](http://hpaste.org/76465)（ x，y，z）处的*联合*网格的*值应该是**聚焦于（x，y，z）的**原始*网格。为了调整该代码，我们似乎需要进行具体化以执行“fmaps”和“rolls”。您不必那样做，但如果这有帮助，那么您就可以了。***`n``n``n`***

 **** * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-27T14:03:58.870

**Jagger/Richards：你不能总是得到你想要的，但如果你尝试一下，你可能会发现你得到了你需要的。**

## 列表中的光标

让我使用 snoc- 和 cons-lists 重建结构的组件，以保持空间属性清晰。我定义

```
data Bwd x = B0 | Bwd x :< x deriving (Functor, Foldable, Traversable, Show)
data Fwd x = F0 | x :> Fwd x deriving (Functor, Foldable, Traversable, Show)
infixl 5 :<
infixr 5 :>

data Cursor x = Cur (Bwd x) x (Fwd x) deriving (Functor, Foldable, Traversable, Show) 
```

让我们有comonads

```
class Functor f => Comonad f where
  counit  :: f x -> x
  cojoin  :: f x -> f (f x) 
```

让我们确保游标是comonads

```
instance Comonad Cursor where
  counit (Cur _ x _) = x
  cojoin c = Cur (lefts c) c (rights c) where
    lefts (Cur B0 _ _) = B0
    lefts (Cur (xz :< x) y ys) = lefts c :< c where c = Cur xz x (y :> ys)
    rights (Cur _ _ F0) = F0
    rights (Cur xz x (y :> ys)) = c :> rights c where c = Cur (xz :< x) y ys 
```

如果您开始使用这种东西，您会注意到这`Cursor`是一种令人愉悦的空间变体`InContext []`

```
InContext f x = (x, ∂f x) 
```

其中∂取函子的形式导数，给出单孔上下文的概念。`InContext f`总是 a `Comonad`，正如[这个答案](https://stackoverflow.com/a/12872133/828361)中提到的那样，我们在这里所拥有的只是`Comonad`由微分结构引起的，其中`counit`提取焦点处的`cojoin`元素并用自己的上下文装饰每个元素，有效地为您提供一个充满重新聚焦光标的上下文和在其焦点处有一个未移动的光标。让我们举个例子。

```
> cojoin (Cur (B0 :< 1) 2 (3 :> 4 :> F0))
Cur (B0 :< Cur B0 1 (2 :> 3 :> 4 :> F0))
    (Cur (B0 :< 1) 2 (3 :> 4 :> F0))
    (  Cur (B0 :< 1 :< 2) 3 (4 :> F0)
    :> Cur (B0 :< 1 :< 2 :< 3) 4 F0
    :> F0) 
```

看？焦点中的 2 已被修饰为 cursor-at-2；在左边，我们有 cursor-at-1 的列表；右侧是 cursor-at-3 和 cursor-at-4 的列表。

## 组合游标，转置游标？

现在，您要求成为 a 的结构`Comonad`是 的 n 倍组合`Cursor`。让我们

```
newtype (:.:) f g x = C {unC :: f (g x)} deriving Show 
```

为了说服comonads`f`和`g`组合，`counit`s组合整齐，但你需要一个“分配律”

```
transpose :: f (g x) -> g (f x) 
```

`cojoin`所以你可以像这样制作复合材料

```
f (g x)
  -(fmap cojoin)->
f (g (g x))
  -cojoin->
f (f (g (g x)))
  -(fmap transpose)->
f (g (f (g x))) 
```

`transpose`应该满足哪些法律？大概是这样的

```
counit . transpose = fmap counit
cojoin . transpose = fmap transpose . transpose . fmap cojoin 
```

或者采取任何措施来确保将 f 和 g 的某些序列从一个顺序转换到另一个顺序的任何两种方法都会给出相同的结果。

我们可以用它自己定义一个`transpose`for`Cursor`吗？一种廉价地获得某种转置的方法是注意它`Bwd`并且`Fwd`是*快速*适用的，因此也是如此`Cursor`。

```
instance Applicative Bwd where
  pure x = pure x :< x
  (fz :< f) <*> (sz :< s) = (fz <*> sz) :< f s
  _ <*> _ = B0

instance Applicative Fwd where
  pure x = x :> pure x
  (f :> fs) <*> (s :> ss) = f s :> (fs <*> ss)
  _ <*> _ = F0

instance Applicative Cursor where
  pure x = Cur (pure x) x (pure x)
  Cur fz f fs <*> Cur sz s ss = Cur (fz <*> sz) (f s) (fs <*> ss) 
```

在这里你应该开始闻到老鼠的味道。形状不匹配会导致*截断*，这将破坏自转置是自反转的明显理想属性。任何形式的衣衫褴褛都无法生存。我们确实得到了一个转置算子：`sequenceA`，对于完全正则的数据，一切都是美好的。

```
> regularMatrixCursor
Cur (B0 :< Cur (B0 :< 1) 2 (3 :> F0))
          (Cur (B0 :< 4) 5 (6 :> F0))
          (Cur (B0 :< 7) 8 (9 :> F0) :> F0)
> sequenceA regularMatrixCursor
Cur (B0 :< Cur (B0 :< 1) 4 (7 :> F0))
          (Cur (B0 :< 2) 5 (8 :> F0))
          (Cur (B0 :< 3) 6 (9 :> F0) :> F0) 
```

但是，即使我只是将其中一个内部光标移出对齐（别介意使尺寸参差不齐），事情也会出错。

```
> raggedyMatrixCursor
Cur (B0 :< Cur ((B0 :< 1) :< 2) 3 F0)
          (Cur (B0 :< 4) 5 (6 :> F0))
          (Cur (B0 :< 7) 8 (9 :> F0) :> F0)
> sequenceA raggedyMatrixCursor
Cur (B0 :< Cur (B0 :< 2) 4 (7 :> F0))
          (Cur (B0 :< 3) 5 (8 :> F0))
          F0 
```

当您有一个外部光标位置和多个内部光标位置时，没有表现良好的换位。自组合`Cursor`允许内部结构相对于彼此参差不齐，所以 no `transpose`， no `cojoin`​​。你可以，我也确实，定义

```
instance (Comonad f, Traversable f, Comonad g, Applicative g) =>
  Comonad (f :.: g) where
    counit = counit . counit . unC
    cojoin = C . fmap (fmap C . sequenceA) . cojoin . fmap cojoin . unC 
```

但我们有责任确保我们保持内部结构正常。如果你愿意接受这个负担，那么你可以迭代，因为`Applicative`并且`Traversable`很容易在组合下关闭。这里是点点滴滴

```
instance (Functor f, Functor g) => Functor (f :.: g) where
  fmap h (C fgx) = C (fmap (fmap h) fgx)

instance (Applicative f, Applicative g) => Applicative (f :.: g) where
  pure = C . pure . pure
  C f <*> C s = C (pure (<*>) <*> f <*> s)

instance (Functor f, Foldable f, Foldable g) => Foldable (f :.: g) where
  fold = fold . fmap fold . unC

instance (Traversable f, Traversable g) => Traversable (f :.: g) where
  traverse h (C fgx) = C <$> traverse (traverse h) fgx 
```

**编辑：**为了完整起见，这就是一切正常时的作用，

```
> cojoin (C regularMatrixCursor)
C {unC = Cur (B0 :< Cur (B0 :<
  C {unC = Cur B0 (Cur B0 1 (2 :> (3 :> F0))) (Cur B0 4 (5 :> (6 :> F0)) :> (Cur B0 7 (8 :> (9 :> F0)) :> F0))}) 
 (C {unC = Cur B0 (Cur (B0 :< 1) 2 (3 :> F0)) (Cur (B0 :< 4) 5 (6 :> F0) :> (Cur (B0 :< 7) 8 (9 :> F0) :> F0))})
 (C {unC = Cur B0 (Cur ((B0 :< 1) :< 2) 3 F0) (Cur ((B0 :< 4) :< 5) 6 F0 :> (Cur ((B0 :< 7) :< 8) 9 F0 :> F0))} :> F0))
(Cur (B0 :<
  C {unC = Cur (B0 :< Cur B0 1 (2 :> (3 :> F0))) (Cur B0 4 (5 :> (6 :> F0))) (Cur B0 7 (8 :> (9 :> F0)) :> F0)})
 (C {unC = Cur (B0 :< Cur (B0 :< 1) 2 (3 :> F0)) (Cur (B0 :< 4) 5 (6 :> F0)) (Cur (B0 :< 7) 8 (9 :> F0) :> F0)}) 
 (C {unC = Cur (B0 :< Cur ((B0 :< 1) :< 2) 3 F0) (Cur ((B0 :< 4) :< 5) 6 F0) (Cur ((B0 :< 7) :< 8) 9 F0 :> F0)} :> F0))
(Cur (B0 :<
  C {unC = Cur ((B0 :< Cur B0 1 (2 :> (3 :> F0))) :< Cur B0 4 (5 :> (6 :> F0))) (Cur B0 7 (8 :> (9 :> F0))) F0})
 (C {unC = Cur ((B0 :< Cur (B0 :< 1) 2 (3 :> F0)) :< Cur (B0 :< 4) 5 (6 :> F0)) (Cur (B0 :< 7) 8 (9 :> F0)) F0})
 (C {unC = Cur ((B0 :< Cur ((B0 :< 1) :< 2) 3 F0) :< Cur ((B0 :< 4) :< 5) 6 F0) (Cur ((B0 :< 7) :< 8) 9 F0) F0} :> F0)
:> F0)} 
```

## 汉考克的张量积

对于规律性，你需要比组合更强大的东西。您需要能够捕捉到“g-structures-all-the-same-shape 的 f 结构”的概念。这就是不可估量的彼得汉考克所说的“张量积”，我会写`f :><: g`：所有内部 g 结构都有一个“外部”f 形和一个“内部”g 形，因此转置很容易定义并且总是自逆。Hancock 的张量在 Haskell 中不能方便地定义，但在依赖类型的设置中，很容易制定一个具有该张量的“容器”概念。

为了给你这个想法，考虑一个退化的容器概念

```
data (:<|) s p x = s :<| (p -> x) 
```

我们说`s`的是“形状”`p`的类型和“位置”的类型。一个值由形状的选择和`x`每个位置的存储组成。在从属情况下，位置的类型可能取决于形状的选择（例如，对于列表，形状是一个数字（长度），并且您有那么多位置）。这些容器有一个张量积

```
(s :<| p) :><: (s' :<| p')  =  (s, s') :<| (p, p') 
```

这就像一个广义矩阵：一对形状给出尺寸，然后在每对位置都有一个元素。当类型`p`和`p'`依赖于`s`和中的值时，您可以完美地做到这一点`s'`，这正是汉考克对容器张量积的定义。

## 张量积的 InContext

现在，正如您在高中时可能已经了解到的那样，`∂(s :<| p) = (s, p) :<| (p-1)`哪里`p-1`有比 . 少一个元素的类型`p`。就像∂(s *x^p) = (s* p)*x^(p-1)。您选择一个位置（将其记录在形状中）并将其删除。问题是`p-1`在没有依赖类型的情况下很难掌握。但是`InContext`选择一个位置*而不删除它*。

```
InContext (s :<| p) ~= (s, p) :<| p 
```

这同样适用于从属情况，我们很高兴地获得

```
InContext (f :><: g) ~= InContext f :><: InContext g 
```

现在我们知道它`InContext f`总是 a `Comonad`，这告诉我们`InContext`s 的张量积是共元的，因为它们本身就是`InContext`s。也就是说，你在每个维度上选择一个位置（这给了你在整个事物中的一个位置），而之前我们有一个外部位置和许多内部位置。随着张量积取代组合，一切都很好。

## 纳佩尔函子

但是有一个子类，`Functor`其张量积和合成重合。这些是`Functor`s ：`f`即`f () ~ ()`，无论如何只有一个形状，因此首先排除了构图中的参差不齐的值。对于我们可以将其视为对*数*的某些位置集，这些`Functor`s 都是同构的（必须提高指数才能给出）。相应地，汉考克以约翰·纳皮尔（他的鬼魂出没于汉考克居住的爱丁堡部分）之后称这些函子。`(p ->)``p`*`x``f x``Naperian`*

 *```
class Applicative f => Naperian f where
  type Log f
  project :: f x -> Log f -> x
  positions :: f (Log f)
  --- project positions = id 
```

`Naperian`函子有一个对数，将离子`project`函数映射到那里找到的元素的位置。`Naperian`函子都是 zippily `Applicative`，具有`pure`并`<*>`对应于投影的 K 和 S 组合子。也可以构造一个值，在每个位置存储该位置的表示。您可能记得的对数定律令人愉快地弹出。

```
newtype Id x = Id {unId :: x} deriving Show

instance Naperian Id where
  type Log Id = ()
  project (Id x) () = x
  positions = Id ()

newtype (:*:) f g x = Pr (f x, g x) deriving Show

instance (Naperian f, Naperian g) => Naperian (f :*: g) where
  type Log (f :*: g) = Either (Log f) (Log g)
  project (Pr (fx, gx)) (Left p) = project fx p
  project (Pr (fx, gx)) (Right p) = project gx p
  positions = Pr (fmap Left positions, fmap Right positions) 
```

请注意，固定大小的数组（*向量*）由 给出`(Id :*: Id :*: ... :*: Id :*: One)`，其中`One`是常数单位函子，其对数为`Void`。所以一个数组是`Naperian`. 现在，我们也有

```
instance (Naperian f, Naperian g) => Naperian (f :.: g) where
  type Log (f :.: g) = (Log f, Log g)
  project (C fgx) (p, q) = project (project fgx p) q
  positions = C $ fmap (\ p -> fmap (p ,) positions) positions 
```

这意味着多维数组是`Naperian`.

要构造`InContext f`for的版本`Naperian f`，只需指向一个位置！

```
data Focused f x = f x :@ Log f

instance Functor f => Functor (Focused f) where
  fmap h (fx :@ p) = fmap h fx :@ p

instance Naperian f => Comonad (Focused f) where
  counit (fx :@ p) = project fx p
  cojoin (fx :@ p) = fmap (fx :@) positions :@ p 
```

因此，特别是，`Focused`n 维数组确实是一个共单子。向量的组合是 n 个向量的张量积，因为向量是`Naperian`。但是`Focused`n 维数组将是决定其维度的 n 个向量的 n 倍张量积，*而不是组合。*`Focused`为了用 zippers 来表达这个comonad，我们需要用一种可以构造张量积的形式来表达它们。我会把它留作将来的练习。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-27T16:44:15.040

又一次尝试，灵感来自 pigworkers 帖子和[http://hackage.haskell.org/packages/archive/representable-functors/3.0.0.1/doc/html/Data-Functor-Representable.html](http://hackage.haskell.org/packages/archive/representable-functors/3.0.0.1/doc/html/Data-Functor-Representable.html)。

如果键（或对数）是幺半群，则可表示（或 Naperian）函子本身就是共单子！然后`coreturn`获取 position 的值`mempty`。它有`cojoin` `mappend`两个可用的键。（就像 . 的comonad 实例一样`(p ->)`。）

```
{-# LANGUAGE KindSignatures #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE UndecidableInstances #-}

import Data.List (genericIndex)
import Data.Monoid
import Data.Key
import Data.Functor.Representable

data Nat = Z | S Nat

data U (n :: Nat) x where
  Point :: x -> U Z x
  Dimension :: [U n x] -> U n x -> [U n x] -> U (S n) x

dmap :: (U n x -> U m r) -> U (S n) x -> U (S m) r
dmap f (Dimension ls mid rs) = Dimension (map f ls) (f mid) (map f rs)

instance Functor (U n) where
  fmap f (Point x) = Point (f x)
  fmap f d@Dimension{} = dmap (fmap f) d

class Functor w => Comonad w where
  (=>>)    :: w a -> (w a -> b) -> w b
  coreturn :: w a -> a
  cojoin   :: w a -> w (w a)

  x =>> f = fmap f (cojoin x)
  cojoin xx = xx =>> id 
```

`U`如果列表无限长，则可以表示。然后只有一种形状。的键`U n`是一个包含 n 个整数的向量。

```
type instance Key (U n) = UKey n

data UKey (n :: Nat) where
  P :: UKey Z
  D :: Integer -> UKey n -> UKey (S n)

instance Lookup (U n) where lookup = lookupDefault
instance Indexable (U n) where
  index (Point x) P = x
  index (Dimension ls mid rs) (D i k) 
    | i < 0 = index (ls `genericIndex` (-i - 1)) k
    | i > 0 = index (rs `genericIndex` ( i - 1)) k
    | otherwise = index mid k 
```

我们需要将`Representable`实例拆分为两种情况，一种是 for `Z`，一种是 for `S`，因为我们没有`U n`用于模式匹配的类型值。

```
instance Representable (U Z) where
  tabulate f = Point (f P)
instance Representable (U n) => Representable (U (S n)) where
  tabulate f = Dimension 
    (map (\i -> tabulate (f . D (-i))) [1..]) 
    (tabulate (f . D 0))
    (map (\i -> tabulate (f . D   i)) [1..])

instance Monoid (UKey Z) where
  mempty = P
  mappend P P = P
instance Monoid (UKey n) => Monoid (UKey (S n)) where
  mempty = D 0 mempty
  mappend (D il kl) (D ir kr) = D (il + ir) (mappend kl kr) 
```

并且 key`U n`确实是一个幺半群，所以我们可以`U n`变成一个comonad，使用来自representable-functor 包的默认实现。

```
instance (Monoid (UKey n), Representable (U n)) => Comonad (U n) where
  coreturn = extractRep
  cojoin = duplicateRep
  (=>>) = flip extendRep 
```

这次我做了一些测试。

```
testVal :: U (S (S Z)) Int
testVal = Dimension 
  (repeat (Dimension (repeat (Point 1)) (Point 2) (repeat (Point 3))))
          (Dimension (repeat (Point 4)) (Point 5) (repeat (Point 6)))
  (repeat (Dimension (repeat (Point 7)) (Point 8) (repeat (Point 9))))

-- Hacky Eq instance, just for testing
instance Eq x => Eq (U n x) where
  Point a == Point b = a == b
  Dimension la a ra == Dimension lb b rb = take 3 la == take 3 lb && a == b && take 3 ra == take 3 rb

instance Show x => Show (U n x) where
  show (Point x) = "(Point " ++ show x ++ ")"
  show (Dimension l a r) = "(Dimension " ++ show (take 2 l) ++ " " ++ show a ++ " " ++ show (take 2 r) ++ ")"

test = 
  coreturn (cojoin testVal) == testVal && 
  fmap coreturn (cojoin testVal) == testVal && 
  cojoin (cojoin testVal) == fmap cojoin (cojoin testVal) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-27T12:02:28.810

所以这被证明是错误的。我会把它留在这里，以防有人想尝试修复它。

这个实现是我认为@pigworker 建议的方式。它可以编译，但我还没有测试过。（我`cojoin1`从[http://blog.sigfpe.com/2006/12/evalating-cellular-automata-is.html](http://blog.sigfpe.com/2006/12/evaluating-cellular-automata-is.html)获取了实现）

```
{-# LANGUAGE KindSignatures #-}
{-# LANGUAGE DataKinds #-}
{-# LANGUAGE GADTs #-}
{-# LANGUAGE TypeFamilies #-}

data Nat = Z | S Nat

data U (n :: Nat) x where
  Point :: x -> U Z x
  Dimension :: [U n x] -> U n x -> [U n x] -> U (S n) x

unPoint :: U Z x -> x
unPoint (Point x) = x

dmap :: (U n x -> U m r) -> U (S n) x -> U (S m) r
dmap f (Dimension ls mid rs) = Dimension (map f ls) (f mid) (map f rs)

right, left :: U (S n) x -> U (S n) x
right (Dimension a b (c:cs)) = Dimension (b:a) c cs
left  (Dimension (a:as) b c) = Dimension as a (b:c)

instance Functor (U n) where
  fmap f (Point x) = Point (f x)
  fmap f d@Dimension{} = dmap (fmap f) d

class Functor w => Comonad w where
  (=>>)    :: w a -> (w a -> b) -> w b
  coreturn :: w a -> a
  cojoin   :: w a -> w (w a)

  x =>> f = fmap f (cojoin x)
  cojoin xx = xx =>> id

instance Comonad (U n) where
  coreturn (Point x) = x
  coreturn (Dimension _ mid _) = coreturn mid
  cojoin (Point x) = Point (Point x)
  cojoin d@Dimension{} = fmap unlayer . unlayer . fmap dist . cojoin1 . fmap cojoin . layer $ d

dist :: U (S Z) (U n x) -> U n (U (S Z) x)
dist = layerUnder . unlayer

layerUnder :: U (S n) x -> U n (U (S Z) x)
layerUnder d@(Dimension _ Point{} _) = Point d
layerUnder d@(Dimension _ Dimension{} _) = dmap layerUnder d

unlayer :: U (S Z) (U n x) -> U (S n) x
unlayer = dmap unPoint

layer :: U (S n) x -> U (S Z) (U n x)
layer = dmap Point

cojoin1 :: U (S Z) x -> U (S Z) (U (S Z) x)
cojoin1 a = layer $ Dimension (tail $ iterate left a) a (tail $ iterate right a) 
```****

# asp.net-mvc - 移动站点离线工作并在建立连接后同步更改

> ID：12963738
> 
> 赞同：0
> 
> 时间：2012-10-18T21:04:05.240
> 
> 标签：asp.net-mvc, html, asp.net-mvc-4, local-storage, offline

我目前正在开发一个需要在移动浏览器上运行的 mvc4 应用程序。

我对它的要求之一是，如果设备无法连接到互联网，该站点应该仍然“工作”，并且一旦重新建立互联网连接，任何更改都会同步到服务器。

该网站是一个电子商务网站，因此我将研究诸如将商品添加到购物车等功能。

我查看了 html5 本地存储来管理应用程序离线时的更改，但不确定该存储是否会存在于单个页面的多个页面中。任何人都可以确认吗？我计划使用缓存清单文件将页面存储在客户端设备上。

我想要一些关于如何实现站点离线工作的指示，一旦建立连接，更改同步到服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:17:27.093

我会使用 javascript 事件来检测在线/离线状态（在 safari 文档中搜索） - 使用 jquery（不是 jquery mobile），我会使用“单页应用程序”模型（下面的链接），我会将网站和用户数据数据存储在本地存储，并使用计时器尝试推送/获取更改。

使用 MVC4 的单页应用程序： [http ://www.asp.net/single-page-application](http://www.asp.net/single-page-application)

# javascript - html5换字动画

> ID：12963740
> 
> 赞同：-1
> 
> 时间：2012-10-18T21:04:13.787
> 
> 标签：javascript, html, css

我想用单词数组交换“这个网站很酷”中的形容词`[awesome, fun, useful, beautiful]`。我不想只在一帧中交换它，我也想有一个很好的过渡。也许新词可以从顶部滑入，或者它可以缩小并替换旧词。我该如何实施？Javascript？CSS3？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:23:38.340

你可以使用 jQuery-Effects，比如fadeIn。

HTML：

```
<div>This site is <div id="adjDiv" style="display:none"></div>.</div> 
```

JavaScript

```
var adjPool = ["awesome", "fun", "useful", "beautiful"];
var adj = adjPool[Math.round(Math.random() * (adj.length-1))];
$("#adjDiv").text(adj);
$("#adjDiv").fadeIn(); 
```

# sorting - xquery 排序日期时间 MM/dd/yyyy HH:mm:ss

> ID：12963743
> 
> 赞同：2
> 
> 时间：2012-10-18T21:04:27.977
> 
> 标签：sorting, datetime, format, xquery

我想创建一个 xquery 函数，它以以下格式获取日期列表：MM/dd/yyyy HH:mm:ss 并返回最小值。我创建了以下内容，但仅当日期为 yyyy-MM-dd'T'HH:mm:ss 格式时才有效。

```
 let $dates := <Dates>
                    <date>2012-11-11T10:10:10</date>
                    <date>2012-11-11T10:10:10</date>
                    <date>2012-11-12T10:10:10</date>
                  </Dates>  
 let $DatesStructure := 
     for $date in $dates/date
     order by xs:dateTime($date/text()) descending          
     return <date> {$date/text()}  </date>
 return <Dates> { $DatesStructure } </Dates> 
```

我希望对以下格式的日期具有相同的功能 MM/dd/yyyy HH:mm:ss

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:56:56.947

**使用**：

```
let $dates := <Dates>
                    <date>11/11/2012 10:10:10</date>
                    <date>11/11/2012 10:10:10</date>
                    <date>11/12/2012 10:10:10</date>
                  </Dates>
 let $DatesStructure :=
     for $date in $dates/date
     order by
     xs:dateTime
        (let $parts := tokenize(substring-before($date, ' '), '/'),
             $y := $parts[3], $m := $parts[1], $d := $parts[2],
             $t := substring-after($date, ' ')
           return
             concat($y,'-',$m,'-',$d, 'T', $t)
         )
     descending
     return <date> {$date/text()}  </date>
 return <Dates> { $DatesStructure } </Dates> 
```

**此查询产生所需的正确结果**：

```
<Dates>
    <date>11/12/2012 10:10:10</date>
    <date>11/11/2012 10:10:10</date>
    <date>11/11/2012 10:10:10</date>
</Dates> 
```

# c# - Rhino Mocks 的 AssertWasCalled 在经过测试的方法中对 mock 的属性赋值

> ID：12963744
> 
> 赞同：3
> 
> 时间：2012-10-18T21:04:37.937
> 
> 标签：c#, unit-testing, rhino-mocks

使用 Rhino Mocks 3.6，给定下面的代码，我希望 AssertWasCalled 断言能够通过，但事实并非如此。相反，有失败的断言消息：

> “Rhino.Mocks.Exceptions.ExpectationViolationException：IBar.set_Model(7)；预期 #1，实际 #0。”

尝试 IgnoreArguments() 不会更改结果，但将 IBar 属性更改为方法并断言使用参数调用该方法确实有效。

我在这里想念什么？

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Rhino.Mocks;

public interface IFoo { }
public interface IBar { int Model { get; set; } }
public class Bar : IBar { public int Model { get; set; } }

public class Foo : IFoo
{
    public void MyMethod(IBar bar)
    {
        bar.Model = 7;
    }
}

[TestClass]
public class TestFoo
{
    [TestMethod]
    public void MyMethod()
    {
        var foo = new Foo();

        var mockBar = MockRepository.GenerateStub<IBar>();
        foo.MyMethod(mockBar);

        mockBar.AssertWasCalled(b => b.Model = 7);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:14:53.747

如果您正在对 bar 对象进行存根，那么您应该对属性值进行断言

```
Assert.AreEqual(7, mockBar.Name); 
```

如果你想测试期望，你应该生成模拟而不是存根

```
var mockBar = MockRepository.GenerateMock<IBar>();
foo.MyMethod(mockBar);
mockBar.AssertWasCalled(b => b.Model = 7); 
```

[存根和模拟之间的区别](http://ayende.com/wiki/Rhino%20Mocks%203.5.ashx#WhatisthedifferencebetweenGenerateStubandGenerateMock)：

> 模拟是我们可以设置期望的对象，它将验证预期的动作确实发生了。存根是您用来传递给被测代码的对象。您可以对其设置期望，因此它会以某些方式运行，**但这些期望永远不会被验证**。存根的属性会自动表现得像普通属性一样，您不能对它们设置期望。
> 
> 如果您想验证被测代码的行为，您将使用具有适当期望的模拟，并进行验证。如果您只想传递一个可能需要以某种方式执行的值，但不是此测试的重点，您将使用存根。

# android - Android中EEG信号上的FFT理解代码

> ID：12963746
> 
> 赞同：6
> 
> 时间：2012-10-18T21:04:44.620
> 
> 标签：android, fft

我一直在尝试找到一个能够对 Android 中的某些 EEG 信号执行 FFT（快速傅立叶变换）的库。

在 Geobits 的帮助下，我终于找到了可以帮助我对 EEG 信号进行 FFT的[代码。](https://stackoverflow.com/questions/9272232/fft-library-in-android-sdk)但是我很难弄清楚代码实际上是如何工作的。我想知道浮点数组 x 和 y 的用途，也许还有一个可以帮助我更多的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:05:25.417

一个 fft 应该为特定的频率范围返回一系列复数（可以是直角坐标，也可以是极坐标：相位和幅度）......

我仍在研究表达式，但我会向甜甜圈打赌，x 和 y 数组是作为转换结果的复数的实数 (x) 和虚数 (y) 分量。

这两个分量的平方和的绝对值应该是每个频率的谐波分量的幅度（转换为极性）。

如果相位对您的应用很重要，请记住 FFT（与任何相量一样）可以是正弦参考或余弦参考。但是，我相信正弦是标准。

看：

[http://www.mathworks.com/help/matlab/ref/fft.html](http://www.mathworks.com/help/matlab/ref/fft.html)

[http://mathworld.wolfram.com/FastFourierTransform.html](http://mathworld.wolfram.com/FastFourierTransform.html)

由于 FFT 对由周期性波形的谐波分解创建的无限级数提供了截断的近似值，因此任何周期性波形都可用于测试代码的功能。

例如，方波应该易于复制，并且具有众所周知的谐波系数。数据集的分辨率将决定您可以计算的谐波数量（大多数 fft 算法最适合长度等于 2 的幂的数据集，并且是您可以计算的最长频率的整数波长数想用）。

方波系数应该是基频的奇数倍，并且幅度与谐波的阶数成反比。

[http://en.wikipedia.org/wiki/Square_wave](http://en.wikipedia.org/wiki/Square_wave)

# ruby-on-rails - 代理后面的rails控制台：无法连接

> ID：12963747
> 
> 赞同：0
> 
> 时间：2012-10-18T21:04:45.783
> 
> 标签：ruby-on-rails, ruby, macos

我正在尝试针对要求我通过 HTTPS 连接的 API 进行开发。 `wget`并且`curl`对地址起作用，但是 Rails 的控制台在连接时抱怨错误（ERRNO）。随后创建的`rake`任务也会失败。

我的 .bash_profile 在我的 Mac 上正确设置。（例如，RVM 和 bundle 工作）。

还有其他人经历过吗？谢谢。

编辑以包括跟踪（根据 Raghu 的建议）我正在使用高层 gem（https://github.com/tapajos/highrise）

网址设置为 `Highrise::Base.site = 'https://your_site.highrisehq.com'`

前几行跟踪是

```
Errno::ECONNREFUSED: Connection refused - connect(2)
    from /Users/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:644:in `initialize'
    from /Users/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:644:in `open'
    from /Users/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/net/http.rb:644:in `block in connect'
    from /Users/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/timeout.rb:44:in `timeout'
    from /Users/.rvm/rubies/ruby-1.9.2-p290/lib/ruby/1.9.1/timeout.rb:89:in `timeout' 
```

# javascript - 标题列中标签的垂直文本

> ID：12963748
> 
> 赞同：7
> 
> 时间：2012-10-18T21:04:46.040
> 
> 标签：javascript, jquery, css, less, css-tables

我正在尝试在标题表上制作一个带有垂直文本的表格。

![在此处输入图像描述](../Images/a7053d8c414b67c276b3031f16353b20.png)

这是我的 CSS 代码：

```
table th.user {
  .rotate(90deg);
  position: relative;
  padding-top: 190px;
  top: -10px;
  right: 0px;
  width: 200px;
} 
```

这是演示[http://codepen.io/anon/pen/GnveJ](http://codepen.io/anon/pen/GnveJ)

如您所见，它部分工作。我想要宽度完全适合内容的列（有名称的列的单元格）（大约 50 像素）；和我附在这个问题上的图片一样。
知道为此目的制作css代码或js代码的最佳方法是什么吗？

要求：
我使用的是less和jquery

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T21:16:29.777

将用户名包装在 a 中`span`，旋转它，然后`width`在单元格上设置 a。如果您旋转单元格，表格将在旋转文本之前呈现其大小。

```
table th.user span{
  display:block;
  .rotate(90deg);
  padding: 190px 0 0 0;
  position: relative;
  left: 20px;
  width: 200px;
}
.user, tbody td {
  max-width: 50px;
} 
```

[演示](http://codepen.io/bookcasey/pen/xswoc)

# python - Python Scapy 引入一个 TCP 选项

> ID：12963750
> 
> 赞同：1
> 
> 时间：2012-10-18T21:04:53.100
> 
> 标签：python, networking, tcp, scapy, packet-injection

我正在尝试使用称为用户超时的 TCP 选项构建数据包。scapy 支持这个吗？添加诸如 MSS 之类的选项似乎非常简单。这是该选项的 RFC：[https ://www.rfc-editor.org/rfc/rfc5482#section-2](https://www.rfc-editor.org/rfc/rfc5482#section-2)

任何指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:31:02.613

该文档似乎没有解释按数字设置任意选项的任何方法。

深入研究代码，看起来`TCPOptionsField.i2m`您只需传递 a`int`而不是 a即可做到这一点`str`。因此，请尝试使用`28`您会使用的相同位置`MSS`。看起来您需要将选项字段的其余部分组成一个字符串——长度，然后是 UTO+粒度的高位字节，然后是低位字节。

或者只是修改代码来处理它：

我认为你想要的是 scapy/layers/inet.py 中的 TCPOptions 元组：

```
TCPOptions = (
          { 0 : ("EOL",None),
            ...
            28 : ("UserTimeout",!H)
            },
          { "EOL":0,
            ...
            "UserTimeout":28,
            } ) 
```

然后你可以（希望）像设置 MSS 一样设置 UTO。

无论哪种方式，您都负责在将结果作为选项值传递之前组合 1 位粒度和 15 位超时，但我认为这比将其更改为采用 bool 和 int 的元组作为选项更简单值并将其组合在 TCP 内部。

当然，除非你在两边都打了内核补丁，并确保中间网络没有任何设备可以释放或去除未知的 TCP 选项，否则无论如何它都不会很有趣。

# mysql - 无法在 jsf 中编辑数据库表

> ID：12963751
> 
> 赞同：0
> 
> 时间：2012-10-18T21:05:02.530
> 
> 标签：mysql, jsf, jsf-2, javabeans

我现在正在工作的项目中有另一个问题，我到处搜索以找到解决方案，但找不到...

我有一个具有 id、firstName、lastName 属性的 bean 类，它具有公共 getter 和 setter，以及一个 updateEmployee 方法。

我正在使用以下 jsf 页面来获取数据库表值。

当我单击更新按钮时显示成功页面，但数据库中的值没有改变。谁能告诉我为什么 vales 没有在数据库中发生变化的原因？

JSF 页面：

```
<h:dataTable value="#{tableBean.employeeList}" var="employee" border="1">  
   <h:column>  
          <f:facet name="header">First name</f:facet>  
          <h:inputText value="#{employee.firstName}" />  
   </h:column>  

   <h:column>  
          <f:facet name="header">Last name</f:facet>  
          <h:inputText value="#{employee.lastName}" />  
   </h:column>  
</h:dataTable>  
<h:commandButton value = "update" action="#{employee.updateEmployee}"/> 
```

员工.java：

```
public String updateEmployee(){  
   String query = "update employee set firstName = ?,lastName = ? where id = 1";           
   pstmt = conn.prepareStatement(query);  
   pstmt.setString(2,this.firstName);  
   pstmt.setString(3,this.lastName);   
   pstmt.executeUpdate(); // execute update statement  
   conn.commit();  
   committed = true;  
   return "success.xhtml";  
   }catch (Exception e) {  
       e.printStackTrace();  
       return null;  
   } finally {  
      try{  
         if (!committed) conn.rollback();  
              pstmt.close();  
          conn.close();  
       }catch(Exception e){  
            e.printStackTrace();  
      }  
    }  
 } 
```

谢谢，拉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:32:41.167

发布的代码很奇怪。您不是在包含所有已编辑员工的 bean 上调用 action 方法，而是在 bean 上调用 action 方法，该方法本身表示一个完全空白的员工实例，它不是显示的员工之一桌子。

开始，更换

```
<h:commandButton value="update" action="#{employee.updateEmployee}" /> 
```

经过

```
<h:commandButton value="update" action="#{tableBean.updateEmployees}" /> 
```

它会变得更加简单。

# iphone - 开发 html 应用程序时使用 ios 设备的本地资源

> ID：12963753
> 
> 赞同：0
> 
> 时间：2012-10-18T21:05:13.773
> 
> 标签：iphone, ios, xcode, ipad, web

我想开发一个适用于 xcode 的 uiwebview 的应用程序。但我想使用本地资源而不是互联网资源。例如，我想将一些照片导入我的项目并用这些照片构建它。然后我希望用户使用应用程序下载它们（这是有道理的）***（我的问题在这里！:)*** 我希望该应用程序使用在应用程序中下载的照片。

我希望我可以通过改变路径*技巧来做到这一点。但我不确定所有设备是否都一样。而且我不确定我应该写什么关于路径。

这就是我的意思：

可能吗？

如果可能，我如何确定“PATH_OF_FOLDER_IN_IPHONE”路径？

感谢所有建议和有用的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:18:29.123

将图像作为资源添加到您的项目中。

假设图像的名称是footer.png，您可以使用以下代码获取路径：

```
NSString *footerPath = [[NSBundle mainBundle]
                                    pathForResource:@"footer"
                                             ofType:@"png"];
NSURL *footerURL = [NSURL fileURLWithPath:footerPath]; 
```

然后，您将用完整路径替换 HTML 文件中图像标记的源路径。

# event-handling - 谷歌应用脚 本列表框事件处理，未定义值

> ID：12963754
> 
> 赞同：1
> 
> 时间：2012-10-18T21:05:14.697
> 
> 标签：event-handling, listbox, google-apps-script

此应用程序脚本的想法是根据列表框 LbxJobTypes 中的选定项目填充列表框 LbxJobs。

我得到了一个未定义的 e.parameter.LbxJobType 值，这似乎阻止了 LbxJobs 的条件填充。

我通过硬编码（我设置 JobType=T300_JOB_TYPE）JobTypeValueHandler 函数成功地测试了处理程序（JobTypeValueHandler），并按预期填充了 LbxJobs 列表框。

检查 e.parameter.source 时，我确实得到了“LbxJobType”。列表框是在 GUI builder 中创建的。

```
var T200_JOB_TYPE = 1;
var T300_JOB_TYPE = 2;

function doGet() {
  var app = UiApp.createApplication();

  app.add(app.loadComponent("BasicCalculator"));
  var Dischandler = app.createServerHandler('DiscClickHandler');
  app.getElementById('chbxDiscl').addValueChangeHandler(Dischandler);    
  return app;
 }

function DiscClickHandler(e) {
  var app = UiApp.getActiveApplication();   
  var Discpanel = app.getElementById('FLpnlDisc');

  BCalcSetup(app);
  Discpanel.setVisible(false);  
  return app;
}

function BasicClickHandler(e) {
  var app = UiApp.getActiveApplication();

  return app;
}

function BCalcSetup(app){
  var BCalcpanel = app.getElementById('APnlBCalc');  
  var lbxJobType = app.getElementById('LbxJobType'); 
  var JobTpyehandler = app.createServerChangeHandler('JobTypeValueHandler'); 
  var lbxJobs = app.getElementById('LbxJobs'); 

  JobTpyehandler.addCallbackElement(lbxJobType);
  lbxJobType.addChangeHandler(JobTpyehandler);
  lbxJobType.addItem('Title 200');
  lbxJobType.addItem('Title 300');
  loadClassifications(lbxJobs,T200_JOB_TYPE);
  BCalcpanel.setVisible(true);  
}

function JobTypeValueHandler(e) {
  var app = UiApp.getActiveApplication();  
  var JobType=T200_JOB_TYPE;
  var lboxJobs=app.getElementById('LbxJobs');  

  if (e.parameter.LbxJobType=='Title 300'){JobType=T300_JOB_TYPE;}
  loadClassifications(lboxJobs,JobType);
  app.close();
  return app;
}

function loadClassifications(lbox,JobType){ 
  var spreadsheet = SpreadsheetApp.openById(SPREADSHEET_ID);

  lbox.clear();
  if (JobType==T300_JOB_TYPE){
    var T3data =spreadsheet.getRangeByName('Title300Jobs').getValues();  
    for (var row1 = 1; row1 < T3data.length; row1++) {
      lbox.addItem(T3data[row1]);
    }
  }else{   
    var T2data =spreadsheet.getRangeByName('Title200Jobs').getValues();  
    for (var row2 = 1; row2 < T2data.length; row2++) {
      lbox.addItem(T2data[row2]);  
    }
  } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:44:53.580

我觉得有点傻，但我想通了。我遇到的问题是，当我在 GUI builder 中创建界面时，我没有填写这些列表框的 Name 属性。我回到 GUI builder 并为每个框填写了 name 属性，现在它就像一个冠军一样工作。活到老，学到老

# google-api-python-client - Google Drive Insert Permissions python 500 internal server error

> ID：12963758
> 
> 赞同：1
> 
> 时间：2012-10-18T21:05:33.383
> 
> 标签：google-api-python-client

这个问题类似于：http://stackoverflow.com/questions/12471180/frequently-http-500-internal-error-with-google-drive-api-drive-files-get 虽然500 internal没有答案服务器错误。

我正在使用 Google Drive (python) 遍历我的所有文件并更改每个文件的权限。我收到如下响应：发生错误：https://www.googleapis.com/drive/v2/files/12345CuV3wBsvZDM3ZmRjNWQtMWZkNC00NzQzLTg2MzMtM2IyY2Q0YWU1OTll/permissions?alt=json 返回“内部错误”>

我的代码是谷歌示例的千篇一律，如下所示：

```
#!/usr/bin/python
from apiclient import errors
import httplib2
import pprint
import logging
from oauth2client.client import flow_from_clientsecrets
from oauth2client.client import FlowExchangeError
from apiclient.discovery import build
from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import OAuth2WebServerFlow
# Path to client_secrets.json which should contain a JSON document such as:
#   {
#     "web": {
#       "client_id": "[[YOUR_CLIENT_ID]]",
#       "client_secret": "[[YOUR_CLIENT_SECRET]]",
#       "redirect_uris": [],
#       "auth_uri": "https://accounts.google.com/o/oauth2/auth",
#       "token_uri": "https://accounts.google.com/o/oauth2/token"
#     }
#   }
CLIENTSECRETS_LOCATION = '<PATH/TO/CLIENT_SECRETS.JSON>'
SCOPES = [
'https://www.googleapis.com/auth/drive.file',
'https://www.googleapis.com/auth/userinfo.email',
'https://www.googleapis.com/auth/userinfo.profile',
# Add other requested scopes.
]

class GetCredentialsException(Exception):
  """Error raised when an error occurred while retrieving credentials.

  Attributes:
    authorization_url: Authorization URL to redirect the user to in order to
                       request offline access.
  """

  def __init__(self, authorization_url):
    """Construct a GetCredentialsException."""
    self.authorization_url = authorization_url

class CodeExchangeException(GetCredentialsException):
  """Error raised when a code exchange has failed."""

class NoRefreshTokenException(GetCredentialsException):
  """Error raised when no refresh token has been found."""

class NoUserIdException(Exception):
  """Error raised when no user ID could be retrieved."""

def update_permission(service, file_id, permission_id, new_role):
  """Update a permission's role.

  Args:
    service: Drive API service instance.
    file_id: ID of the file to update permission for.
    permission_id: ID of the permission to update.
    new_role: The value 'owner', 'writer' or 'reader'.

  Returns:
    The updated permission if successful, None otherwise.
  """
  try:
    # First retrieve the permission from the API.
    permission = service.permissions().get(
        fileId=file_id, permissionId=permission_id).execute()
    permission['role'] = new_role
    return service.permissions().update(
        fileId=file_id, permissionId=permission_id, body=permission).execute()
  except errors.HttpError, error:
    print 'An error occurred: %s' % error
  return None  

def retrieve_all_files(service):
  """Retrieve a list of File resources.

  Args:
    service: Drive API service instance.
  Returns:
    List of File resources.
  """
  result = []
  page_token = None
  while True:
    try:
      param = {}
      if page_token:
        param['pageToken'] = page_token
      files = service.files().list(**param).execute()

      result.extend(files['items'])
      page_token = files.get('nextPageToken')
      if not page_token:
        break
    except errors.HttpError, error:
      print 'An error occurred: %s' % error
      break
  return result

def retrieve_permissions(service, file_id):
  """Retrieve a list of permissions.

  Args:
    service: Drive API service instance.
    file_id: ID of the file to retrieve permissions for.
  Returns:
    List of permissions.
  """
  try:
    permissions = service.permissions().list(fileId=file_id).execute()
    return permissions.get('items', [])
  except errors.HttpError, error:
    print 'An error occurred: %s' % error
  return None

def insert_permission(service, file_id, value, perm_type, role):
  """Insert a new permission.

  Args:
    service: Drive API service instance.
    file_id: ID of the file to insert permission for.
    value: User or group e-mail address, domain name or None for 'default'
           type.
    perm_type: The value 'user', 'group', 'domain' or 'default'.
    role: The value 'owner', 'writer' or 'reader'.
  Returns:
    The inserted permission if successful, None otherwise.
  """
  new_permission = {
      'value': value,
      'type': perm_type,
      'role': role
  }
  try:
    return service.permissions().insert(
        fileId=file_id, body=new_permission).execute()
  except errors.HttpError, error:
    print 'An error occurred: %s' % error
  return None

def login(clientID, clientSecret, clientCode=0):
    # Copy your credentials from the APIs Console
    CLIENT_ID     = clientID        
    CLIENT_SECRET = clientSecret

    # Check https://developers.google.com/drive/scopes for all available scopes
    OAUTH_SCOPE = 'https://www.googleapis.com/auth/drive'

    # Redirect URI for installed apps
    REDIRECT_URI = 'urn:ietf:wg:oauth:2.0:oob'
    #REDIRECT_URI = 'http://localhost'

    # Run through the OAuth flow and retrieve credentials
    flow = OAuth2WebServerFlow(CLIENT_ID, CLIENT_SECRET, OAUTH_SCOPE, REDIRECT_URI)
    authorize_url = flow.step1_get_authorize_url()
    if not clientCode:
        print 'Go to the following link in your browser: ' + authorize_url
        code = raw_input('Enter verification code: ').strip()

    else:
        print 'Client code supplied'
        code = clientCode 

    credentials = flow.step2_exchange(code)

    # Create an httplib2.Http object and authorize it with our credentials
    http = httplib2.Http()
http = credentials.authorize(http)

drive_service = build('drive', 'v2', http=http)

allFilesDictionary = retrieve_all_files(drive_service)
file = open('file3.txt', 'a')
for f in allFilesDictionary:
    fileID            = f['id']
    permissionsIDList = retrieve_permissions(drive_service, fileID)
    pidl = permissionsIDList[0]
    #for pidl in permissionsIDList:
    #It is a list of dictionaries.....
    #for p in pidl:
    #   file.write(fileID + '\t\t' + p + ' value is' + p['id'] + '\n')
    #Change permissions of ID...
    ####"owner"
    ####permissionsIDList["userPermission"]["id"]
    ####"me" gives 500 "Http 500 Internal server error" ... empty oauth_callback value while request_token ... give webaddress
    #permissionsResource = update_permission(drive_service, fileID, "me", "reader")

    insert_permission(drive_service, fileID, "me", "user", "reader")

file.close()

clientid    ='1234567872174.apps.googleusercontent.com'
clientsecret='abcdefgh3VXUu5EaJvO9BExc'

login(clientid, clientsecret) 
```

遵循 Claudio 的“添加权限”而不是“插入权限”的建议，将代码更改为以下内容：

```
import gdata.docs
import gdata.docs.service
userNameAtGmailCom = 'PersonAEmailAddress@gmail.com'
password           = 'PersonAPassword'
personToShareWith  = "PersonB@gmail.com"
def login(userNameAtGmailCom, password, personToShareWith): 
    client = gdata.docs.service.DocsService()
    client.ClientLogin(userNameAtGmailCom, password)
    documents_feed = client.GetDocumentListFeed()
    for document_entry in documents_feed.entry:
        print document_entry.title.text
        scope = gdata.docs.Scope(value=personToShareWith, type='user')
        role = gdata.docs.Role(value='reader')
        acl_entry = gdata.docs.DocumentListAclEntry(scope=scope, role=role)
        created_acl_entry = client.Post(acl_entry, document_entry.GetAclLink().href,     converter=gdata.docs.DocumentListAclEntryFromString)
login(userNameAtGmailCom, password, personToShareWith) 
```

这会向 PersonB 发送一封电子邮件，说明 PersonA 已与他们共享了一个文件。这是否意味着当我可以从 PersonB 运行一个应用程序时，可以让 personB 的应用程序读取人员 A 的文件？

# backbone.js - 使用backbone.js 和require.js 控制Web 应用程序中的缓存

> ID：12963759
> 
> 赞同：1
> 
> 时间：2012-10-18T21:05:46.033
> 
> 标签：backbone.js, glassfish-3, browser-cache

我继承了一个使用backbone.js 和require.js 的应用程序。我想在浏览器上无限缓存 CSS、图像和 JS 文件，不想缓存 HTML。因此，当我对 CSS 或 JS 或图像进行任何更改时，我可以更新 HTML 中的查询参数，并且浏览器将获取最新版本的资产。

我们的应用程序在 Glassfish 3.1.2 上，所以我不能像在 Apache 中那样使用 mod_headers 来控制行为。我最终做的是添加一个过滤器并将缓存控制响应标头添加到所有 css、js 和图像。这适用于 css 和图像，但所有那些使用backbone.js 的模型和集合都没有更新。好吧，如果我在服务器上有更新的版本，我不知道如何从缓存中删除它们。

关于这个问题的任何指示都会帮助我解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:51:08.587

你应该使用 bust ([看这里](http://requirejs.org/docs/api.html#config-urlArgs))，所以当你有一个新版本时，只需在 bust 中更新它的版本，就像在生产中这样。

> urlArgs：“胸围=”+ v2

并且所有较旧的 js 内容将被再次获取。

干杯！

# java - 让android通知打开新活动

> ID：12963760
> 
> 赞同：0
> 
> 时间：2012-10-18T21:05:47.117
> 
> 标签：java, android, android-notifications

我有两个从我的主（不是同时）开始的 Android 通知，每个通知在标题字段中都有不同的字符串。在创建它们中的每一个时，我将它们设置为打开另一个`ResultActivity`使用 textView 调用的活动。然后我想将 textView 设置为从通知中说出标题字段中的字符串。我觉得我让它工作了，但我现在正在测试它，新的活动总是有它的标题集，不管你点击哪个。希望这有点道理。

我的主要片段：

```
resultIntent.putExtra("title", pass); 
```

来自 ResultActivity.java 的片段：

```
title = getIntent().getStringExtra("title"); 
```

该代码有效，但是当我有多个通知时，似乎`.putExtra("title", pass)`get 被覆盖了。有谁知道它是否是这样工作的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:10:15.457

您必须使待处理的意图比额外的意图不同。如果它们在其他方面相等，则系统会将它们视为相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:29:38.930

如果我理解正确，较新的活动仍然包含您第一次单击的标题？尝试设置`FLAG_ACTIVITY_NEW_TASK`PendingIntent 以确保启动新任务。

```
PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            notificationIntent, Intent.FLAG_ACTIVITY_NEW_TASK); 
```

# ruby - Dart 中是否有 Ruby 中 instance_variable_set 方法的等价物？

> ID：12963761
> 
> 赞同：0
> 
> 时间：2012-10-18T21:06:01.493
> 
> 标签：ruby, dart, instance-variables, dart-mirrors

如果没有，是否会出现类似的情况？

这是我离不开的 JavaScript、Ruby 和 Perl 的一个特性。我知道你可以用哈希成员伪造它，但我希望能够从解析器创建（任意）“第一类”成员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:20:28.970

目前没有什么可以设置尚不存在的字段。[镜像 API](http://api.dartlang.org/docs/continuous/dart_mirrors/InstanceMirror.html)可用于设置已存在的字段，并最终可能扩展为支持动态定义新字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T09:55:18.017

您还可以在类上使用“noSuchMethod”方法来拦截 setter/getter，并将接收到的值存储在 map 中。

例如（我不记得确切的语法......）：

```
class Foo {
  var _dynamicProperties = new Map<String,Object>();

  noSuchMethod(String function_name, List args) {
    if (args.length == 0 && function_name.startsWith("get:")) {
      // Synthetic getter
      var property = function_name.replaceFirst("get:", "");
      if (_dynamicProperties.containsKey(property)) {
        return _dynamicProperties[property];
      }
    }
    else if (args.length == 1 && function_name.startsWith("set:")) {
      // Synthetic setter
      var property = function_name.replaceFirst("set:", "");
      // If the property doesn't exist, it will only be added
      _dynamicProperties[property] = args[0];
      return _dynamicProperties[property];
    }

    super.noSuchMethod(function_name, args)
  }
} 
```

然后你可以在你的代码中使用它，如下所示：

```
var foo = new Foo();
foo.bar = "Hello, World!";
print(foo.bar); 
```

当然，这可能会导致类型检查器无法检查的拼写错误，例如：

```
foo.bar = "Hello";
foo.baz = "Hello, World!"; // Typo, meant to update foo.bar. 
```

通过使用重定向工厂构造函数和隐含接口，您可以通过多种方式进行类型检查器验证，但随后它开始变得复杂。

旁注：这是[JsonObject](https://github.com/chrisbu/dartwatch-JsonObject/blob/master/lib/JsonObject.dart)用来将 JSON 映射转换为类类型语法的方法。

# java - 如何在安卓谷歌地图中制作圆形颜色灯

> ID：12963765
> 
> 赞同：0
> 
> 时间：2012-10-18T21:06:14.710
> 
> 标签：java, android, android-mapview

下面是我在 Android 的 Google 地图上绘制圆圈的代码。它对我来说很好。

**问题陈述：-**

目前，在谷歌地图上绘制的圆圈非常暗。我需要`little bit light with the same color`建立我目前拥有的那个圈子。是否有可能通过调整油漆或颜色中的一些参数来使那个圆圈稍微变亮？中间的颜色比较深，不知道为什么。我只需要在我目前拥有的所有四个圈子中让它亮起来。

```
 class MapOverlay extends Overlay {
    private GeoPoint pointToDraw;
    int[] imageNames=new int[6];
    private Point mScreenPoints;
    private Bitmap mBitmap;
    private Paint mCirclePaint;

    public MapOverlay(GPSLocationListener gpsLocationListener, int currentUser) {
        imageNames[0]=currentUser;
        mCirclePaint = new Paint(Paint.ANTI_ALIAS_FLAG);
        mCirclePaint.setColor(0x30000000);
        mCirclePaint.setStyle(Style.FILL_AND_STROKE);
        mBitmap = BitmapFactory.decodeResource(getResources(),imageNames[0]);
        mScreenPoints = new Point();
    }

    public void setPointToDraw(GeoPoint point) {
        pointToDraw = point;
    }

    public GeoPoint getPointToDraw() {
        return pointToDraw;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow, long when) {
        super.draw(canvas, mapView, shadow);
        if (pointToDraw == null) {
            return true;
        }
        mScreenPoints = mapView.getProjection().toPixels(pointToDraw, mScreenPoints);
        int totalCircle=5;
        int radius=40;
        int centerimagesize=35;
        for (int i = 1; i <= totalCircle; i ++) { 
            canvas.drawCircle(mScreenPoints.x,mScreenPoints.y, i*radius, mCirclePaint); 
        } 
        canvas.drawBitmap(mBitmap, (mScreenPoints.x-(centerimagesize/2)),(mScreenPoints.y-(centerimagesize/2)), null);
        super.draw(canvas,mapView,shadow);
        return true;
    }

} 
```

目前我的圈子的快照![在此处输入图像描述](../Images/7f53de9f703fe4d5ae4d8240d8439259.png)-

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:39:29.470

**问题**

它在中心变暗的原因是因为你正在画四个圆圈，一个在另一个上面。当你画第二个圆圈时，两者共有的部分被画了两次，所以它变得更暗。当你画出第三个圆圈时，它会变得更暗......

**解决方案**

如果你想要所有的圆圈颜色相同，你应该使用`Style.STROKE`所有的圆圈，除了较大的圆圈，应该使用`Style.FILL_AND_STROKE`. 这样，您只需绘制小圆圈的线条并在绘制大圆圈时填充所有区域。

**代码**

```
 mCirclePaint.setStyle(Style.STROKE); 
    for (int i = 1; i <= totalCircle-1; i ++) {  
        canvas.drawCircle(mScreenPoints.x,mScreenPoints.y, i*radius, mCirclePaint);  
    }  
    mCirclePaint.setStyle(Style.FILL_AND_STROKE); 
    canvas.drawCircle(mScreenPoints.x,mScreenPoints.y, totalCircle*radius, mCirclePaint); 
```

问候

# c# - 在 PowerShell 中使用带有重载算术运算符的自定义 .NET 类

> ID：12963766
> 
> 赞同：5
> 
> 时间：2012-10-18T21:06:22.547
> 
> 标签：c#, .net, powershell, operators

我在 C# 中定义了一个类（称为 A 类）并为它重载了一些算术运算符。让我们关注加法运算符（尽管我希望其他运算符的行为类似）。我已经设置了 A 类，这样我就可以向它添加一个标量（即单个 Double 值），我可以将它添加到一个标量，或者我可以将 A 的两个实例加在一起。

因此，在 C# 中，“+”运算符重载了三个不同的签名。明确的签名是：

*   A + 双
*   双 + A
*   一个+一个

当我在 PowerShell 中使用该类时，它只识别三个重载之一。因此在 PowerShell 中我可以执行 A + Double 但其他两个表达式会导致错误。

当我在 A 的实例上使用 Get-Member Cmdlet 时，它看起来好像“看到”了所有三个重载，但只尊重列表中的第一个重载。

我怀疑这是设计使然。我喜欢 PowerShell，但它与 C# 非常不同，我希望它只允许重载运算符的一个签名（基于我到目前为止所了解的内容），并且表达式的左侧成员确定添加的类型履行。任何人都可以确认吗？

我的工作是在 C# 中为类编写一些更详细的静态方法（如“AddScalar”和“AddA”方法）。在 PowerShell 中，我会调用这些命名方法，而不是使用“+”运算符。这应该可以正常工作，但是让 PowerShell 根据添加的内容使用适当的“+”定义会很好。

有没有人使用具有不同签名的重载类运算符取得任何成功，或者这种行为会破坏基本的 PowerShell 设计目标？

**更新：** *杜加斯*做到了。但我确实在此过程中学到了其他东西，并想把它贴在这里。

当我为类 AI 定义添加时，它定义为添加两个类 A 的实例将产生一个新的类 A 实例或产生一个 NULL。（这对我来说是糟糕的设计，因为加法确实应该关闭。换句话说，理想情况下，加法应该总是产生可以被另一个加法运算符操作的东西。）在 C# 中这不是问题，因为我从来没有添加更多一次超过两个对象，并在我检查结果时检查 NULL。

如果操作的结果为 NULL，PowerShell 不会返回 NULL，而是会为 op_Addition 运算符引发“未设置对象引用...”错误。我误解了这个错误，假设当 PowerShell 尝试使用错误的重载运算符并且在执行类型转换时遇到问题时正在创建 NULL 引用。

我为对象重新运行了 A + A 案例，这些对象在求和时会返回 A 类的另一个对象实例，并且一切正常。

总而言之，如果 a1、a2 和 a3 都是 A 类的实例并且 d 是 Double 并且如果 a1 + a2 = NULL 并且 a1 + a3 = aX（其中 aX 是 A 类的新实例），那么...

*   d + a1 # 失败，因为 PowerShell 没有看到使用 Class A 的 Double 运算符，并且 Class A 不能转换为 Double。
*   a1 + d # 按预期工作
*   a1 + a2 # 失败。引发“未设置对象引用...”错误，因为结果为 NULL。
*   a1 + a3 # 按预期工作。

感谢您引导我朝着正确的方向前进！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:46:50.537

出于好奇，我对此进行了测试。我创建了一个这样的类：

```
namespace ClassLibrary1
{
 public class Class1
 {
  public static string operator +(Class1 class1, double d)
  {
   return "a";
  }

  public static string operator +(double d, Class1 class1)
  {
   return "b";
  }

  public static string operator +(Class1 class1, Class1 class12)
  {
   return "c";
  }
 }
} 
```

我能够调用以 Class1 作为第一个参数的两个重载，但不能调用以 double 作为第一个参数的重载。我不知道您为什么不能调用 A + A 的重载，也许是因为除了调度正确的运算符重载之外的其他原因？

```
$a = New-Object ClassLibrary1.Class1
($a + 0) -eq 'a' # Was True
($a + $a) -eq 'c' # Was True 
```

调用重载：

```
([double]0 + $a) -eq 'b' 
```

报错：

> 无法将“ClassLibrary1.Class1”类型的“ClassLibrary1.Class1”值转换为“System.Double”类型。

所以我假设你可以调用不同的运算符重载，只要第一个参数是运算符重载的类型？

# javascript - 在javascript中进行减法以进行更改的简单方法

> ID：12963767
> 
> 赞同：-3
> 
> 时间：2012-10-18T21:06:23.123
> 
> 标签：javascript

我正在将此代码用于我的表单

```
Total: <input name="total" id="total" type="text" readonly="readonly" style="background-color:#eee;" value="<? echo $total; ?>" /><br /><br />
Cash: <input name="cash" id="cash" type="text" /><br /><br />
Change: <input name="change" id="change" type="text" readonly="readonly" style="background-color:#FF0;"/> 
```

总数来自 php，例如 25.00，我希望能够输入一个数字，例如 30.00 现金，然后更改为例如 5.00，我希望它在键上更改，所以如果我更改它重新计算的金额，

任何人都可以帮助使用 JavaScript 进行计算，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:13:28.667

为“cash”元素添加 onchange 和 onkeyup 事件处理程序。然后在处理程序中进行计算。

例子：

```
Cash: <input name="cash" id="cash" type="text" onkeyup="Recalculate();" onchange="Recalculate()" /><br /><br /> 
```

在 Javascript 中：

```
function Recalculate()
{
var total = parseInt(document.getElementById("total").value, 10);
var cash = parseInt(document.getElementById("cash").value, 10);

document.getElementById("change").value = (total-cash);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:12:23.440

HTML：

```
Cash: <input name="cash" id="cash" type="text" onkeyup="myFunction()" /><br /><br /> 
```

JS：

```
function myFunction(){
    var change = document.getElementById("change");
    var cash = document.getElementById("cash").value;
    var total = document.getElementById("total").value;

    change.value = parseInt(cash,10) - parseInt(total,10);      
    }​ 
```

**[（工作示例）](http://jsfiddle.net/hJDZ5/2/)**

# android - 是否可以将 Android 应用程序嵌入到预先存在的应用程序中？

> ID：12963770
> 
> 赞同：3
> 
> 时间：2012-10-18T21:06:36.687
> 
> 标签：android, android-intent, embed, apk

我想询问是否可以将 Android 应用程序嵌入到预先存在的应用程序中？

基本上，父应用程序将有一组选项卡。单击每个选项卡将在选项卡活动中打开一个第三方应用程序。我将访问第三方的 apk 文件，但不会访问他们的源代码。

请告知这在 Android 中是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:11:48.393

您不需要嵌入应用程序，但您可以使用 startActivity 或 startActivityForResult 来启动其他应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:12:27.750

不，您不能将活动嵌入到其他活动中。您可以使用片段来做同样的事情，但这听起来不是您想要的。

# jquery - 尝试将 JQuery“prepend”更改为“prependTo”时遇到困难

> ID：12963774
> 
> 赞同：1
> 
> 时间：2012-10-18T21:06:45.010
> 
> 标签：jquery, backbone.js, slidedown

我正在使用主干来渲染基于模板的模型。

我的完整应用程序视图中有此代码：

```
this.$("#timesheet-start-placeholder").prepend(view.render().el); 
```

我正在尝试获得一种新模型来压制其他模型，类似于 Twitter 或 Facebook 帖子。

我看过[这篇文章，](https://stackoverflow.com/questions/3926719/jquery-push-down-list-as-in-twitters-home-page)并且我正在尝试类似地关注它。

但是，我不能这样做：

```
(view.render().el).prependTo($("#timesheet-start-placeholder")); 
```

它不执行。

谁能想到解决方法？我的模型视图中也有这个可以使用：

```
this.$el.html(this.template(this.model.toJSON())); 
```

我尝试了 的各种组合`hide(), slideDown(), and fadeIn()`，但似乎无法得到我想要的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:19:33.287

我认为您需要在 prepend 元素上调用 jQuery。你能试试吗`$(view.render().el).prependTo("#timesheet-start-placeholder");`

# javascript - 什么是“chrome-extension://”

> ID：12963778
> 
> 赞同：8
> 
> 时间：2012-10-18T21:07:08.573
> 
> 标签：javascript, web, google-chrome-extension, skype

我在一个网站上发现了一些奇怪的`<script/>`标签：

```
<script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/document_iterator.js"></script>
<script src="chrome-extension://lifbcibllhkdhoafpjfnlhfpfgnpldfl/find_proxy.js"></script>
... 
```

我无法找到有关此的太多信息，**但我高度怀疑这实际上与 Google Chrome 有关，因为该站点特别是仍在使用`<table>`s 进行布局，并且有问题的源是使用`curl`非图形网络浏览器**检索的。

所以，

1.  这到底是什么？
2.  什么是`chrome-extension://`
3.  为什么它`lifbcibllhkdhoafpjfnlhfpfgnpldfl`用作目录名称
4.  为什么它假装是 javascript 文件的有效 URL？
5.  为什么我需要`find_proxy`或`document_iterator`

* * *

## 解决了。我所知道的...

*`chrixian`*是的，似乎只有在这个页面和其他几个选定的页面上，有人在安装了 Skype 扩展程序的情况下从 Chrome 的源视图中重新保存了它们。

感谢大家的帮助，感谢大家`+1`！请享用！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-03T05:39:44.687

这实际上是 Skype Click to Call chrome 扩展。

**使用此链接chrome://extensions/?id=lifbcibllhkdhoafpjfnlhfpfgnpldfl**管理和查看它

 **![在此处输入图像描述](../Images/871102068ff1a43094a63cfa6844fe28.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T15:49:52.550

如果您使用 cURL 来获取页面，那么您将获取服务器上存在的 HTML——所以我认为一个安全的假设是：页面的作者最初从 Chrome 中保存了页面，他安装了一个扩展插入了这些脚本标签，最后他在将页面放在服务器上之前没有出于某种原因删除脚本标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T21:10:56.007

这是由 chrome 在页面加载时添加的，用于将扩展程序的 Javascript 代码注入页面，因此它可以访问 HTML 文档。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T21:17:29.807

Chrome 与 Firefox 一样，为开发人员提供了一个简单的 API 来扩展 Web 浏览器的功能，而无需实际下载和构建浏览器。

它们还提供了强大的交付系统。就 Google 而言，它是[Google Chrome Web Store](https://chrome.google.com/webstore)。

扩展程序本地安装在您的计算机上，并使用长字符串作为目录名称，以减少与另一个扩展程序冲突的风险。换句话说，如果你和我都将我们的扩展命名为“mycoolextension”，那么如果有人试图安装你的扩展和我的扩展，就会出现问题。长字符串有助于防止这样的碰撞。

浏览器使用该`chrome-extension://`协议向这些本地资源发出请求。Chrome 扩展是使用 HTML5、JavaScript 和 CSS 开发的，以及一个公开的 API，允许本地 JavaScript 执行通常无法在 Internet 上执行的操作。

当您在 Chrome 开发人员工具中看到这些时，这只是扩展程序在做的事情，不管它是什么。

如果您看到这些，那么您可能从 Chrome 网上应用店安装了一些扩展程序。要查看它们，请转到“工具”菜单并选择“扩展”。这将显示所有已安装的 Chrome 扩展程序和应用程序的列表。

要了解有关扩展开发的更多信息，请参阅[入门教程](https://developer.chrome.com/extensions/getstarted.html)。

此外，正如其他人所提到的，您正在使用[Skype 呼叫分机](http://code.google.com/p/notscripts/issues/detail?id=107)。但是，使用该目录名称的应用程序不会出现在搜索结果的第一页中。可能值得做更多研究，以确保您从合法来源获得该扩展，无论是 Skype 还是 Chrome Web Store。

如果您在 Chrome 开发人员工具中看到您提出的每个请求，这意味着它可以访问您的所有网站，这可能是良性的，例如他们只是让电话号码可点击，或者它可能是恶意的，如果它是抓取您的银行帐户信息并将其发送到某些第三方服务器。:)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-18T21:18:16.623

Skype 扩展程序通过在您访问的网页中插入各种垃圾来导致它。您是否为 Chrome 安装了 Skype 浏览器扩展程序？只需禁用扩展程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T21:17:40.020

它是一个 Chrome 扩展程序，而 chrome-extension:// 是扩展程序通过 Javascript 处理其内容的 URL。

lifbcibllhkdhoafpjfnlhfpfgnpldfl 是扩展的唯一标识符。我无法通过搜索找到它，但显然它可能是 Skype。

它不是*假装*……它**是**一个有效的 URL。Javascript 文件位于扩展名中。如果您要查看硬盘驱动器，您可能会在扩展文件夹中找到该文件。

它调用的函数可能是扩展使用的某种检测，以查看它是否需要启用自身。

有关一些附加信息，请参阅此：

[检查用户是否安装了某个扩展](https://stackoverflow.com/questions/8042548/checking-if-user-has-a-certain-extension-installed/8042997#8042997)**

# c# - 菜单条用户控件，在设计时将项目添加到表单

> ID：12963779
> 
> 赞同：0
> 
> 时间：2012-10-18T21:07:10.263
> 
> 标签：c#, winforms

我的目标是模拟 Visual Studio 中菜单条上已有的智能标签，该标签插入常用菜单项。

我希望用户能够从下拉列表中选择他们想要的项目（我已经使用 UITypeEditor），然后像通常在设计时一样创建项目（表单组件的一部分.Designer.cs 文件中包含他们的创建代码）。

我能做的最好的事情是让 menustrip 控件创建项目并将它们添加到它的 Items 集合中。问题是在设计时无法进一步操作这些项目。包含它们的菜单实际上是“锁定的”。为了让用户添加更多按钮，他们必须在运行时动态地进行。

我的目标是否可行，如果可以，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:05:02.210

~~我不是很肯定，但我认为您需要与[IComponentChangedService](http://msdn.microsoft.com/en-us/library/system.componentmodel.design.icomponentchangeservice.oncomponentchanged.aspx)交互并通知它您的菜单已更改。自从我为控件编写设计时支持以来已经有一段时间了。~~

在您的设计师中：

```
IComponentChangeService changeService = (IComponentChangeService)GetService(typeof(IComponentChangeService)); 
```

 ~~**实际上**

我认为这是您需要的 DesignHost，请查看：

```
IDesignerHost designHost = (IDesignerHost)GetService(typeof(IDesignerHost));
designHost.Container.Add(...) 
```

我相信你必须将你的组件添加到它来管理它。~~

# wpf - XAML 子类类型声明设计器错误

> ID：12963782
> 
> 赞同：3
> 
> 时间：2012-10-18T21:07:23.897
> 
> 标签：wpf, xaml, subclass, designer

我对设计器有一个简单的问题。我正在尝试将 DataGridComboBoxColumn 的 ItemsSource 绑定到枚举值列表。它可以工作，代码编译并执行得很好。但是，设计者说“加载问题”并且无法正确加载。如果我单击“重新加载设计器”，则会在错误列表中显示错误。我正在使用VS2010。

```
<ObjectDataProvider x:Key="myEnum"
        MethodName="GetValues"
        ObjectType="{x:Type core:Enum}">
<ObjectDataProvider.MethodParameters>
    <x:Type Type="data:ParentClass+MyEnum" />
</ObjectDataProvider.MethodParameters>
</ObjectDataProvider> 
```

这在应用程序执行时工作正常。但是，在设计师中它说：

> 错误 5 找不到类型“数据：ParentClass+MyEnum”。

我不确定我在哪里遇到过 XAML 的 Class+Subclass 语法（而不是 Class.Subclass），或者为什么它是必要的，但如果代码有效，设计师似乎应该工作？！这会杀死我对整个窗口的所有设计时支持，如果我想查看设计时的变化情况，这并不好

**更新** 好吧，更多信息：首先，+ 语法来自[Type.GetType(String) 方法](http://msdn.microsoft.com/en-us/library/w3f99sx1%28v=vs.100%29.aspx)，您可以在那里看到它的格式。

但是，System.Windows.Markup.TypeExtension 使用 IXamlTypeResolver 服务来解析类型。从反射器中，我们可以看到：

```
IXamlTypeResolver service = serviceProvider.GetService(typeof(IXamlTypeResolver)) as IXamlTypeResolver;
this._type = service.Resolve(this._typeName); 
```

据我了解，设计者使用了与运行时完全不同的服务实现？！我还没有找到实现。

我相信我可以编写自己的“TypeExtension”类并返回 Type.GetType(typeName)。我仍然很好奇这是否只是一个错误或使其工作的一种方式。

**更新2**

我创建了自己的 TypeExtension 类，但没有帮助。由于某种原因 Type.GetType() 无法通过设计器解析我的枚举（但不是运行时）

```
public class CreateTypeExtension : TypeExtension
{
    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (this.Type == null)
        {
            if (this.TypeName == null)
            {
                throw new InvalidOperationException();
            }

            this.Type = Type.GetType(TypeName);

            if (this.Type == null)
            {
                throw new InvalidOperationException("Bad type name");
            }
        }

        return this.Type;
    }
} 
```

我正在通过它

```
<comm:CreateType TypeName="Company.Product.Class+Enum,Company.Assembly" /> 
```

同样，在运行时工作并且**完全合格**，但在设计时不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T18:55:19.023

好吧，我意识到当它在**Update2**之后不起作用时，错误消息比我抛出的要具体得多。因此，它没有使用我的覆盖。我将其修改为不扩展 TypeExtension 而是扩展 MarkupExtension，现在它可以工作了。

```
public class CreateTypeExtension : MarkupExtension
{
    public Type Type { get; set; }
    public String TypeName { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        if (this.Type == null)
        {
            if (this.TypeName == null)
            {
                throw new InvalidOperationException();
            }

            this.Type = Type.GetType(TypeName);

            if (this.Type == null)
            {
                throw new InvalidOperationException("Bad type name");
            }
        }

        return this.Type;
    }
} 
```

您可以使用 Type.GetType 文档中可用的任何格式，但不能再使用 XAML 前缀（除非您自己实现）

```
<comm:CreateType TypeName="Company.Product.Class+Enum,Company.Assembly" /> 
```

# bash - 从非常大的文本文件中删除重复的对

> ID：12963783
> 
> 赞同：4
> 
> 时间：2012-10-18T21:07:27.640
> 
> 标签：bash, perl, awk

我有一个非常大的文本文件（几 GB），其格式如下：

```
1 2
3 4
3 5
3 6
3 7
3 8
3 9 
```

文件已排序，双行已删除。我想删除重复的对，例如“2 1”、“4 3”相反的顺序。有没有人有任何解决方案可以在资源非常有限的环境中使用 BASH、AWK、perl 或任何类似语言？我无法加载整个文件并在值之间循环。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:11:05.663

您想删除第二个数字小于第一个数字的行吗？

```
perl -i~ -lane'print if $F[0] < $F[1]' file 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T21:20:58.403

可能的解决方案：

*   扫描文件
*   对于第二个值小于第一个值的任何对，交换两个数字
*   按第一个然后第二个数字再次对对进行排序
*   删除重复项

我仍在考虑在磁盘扫描方面更有效的解决方案，但这是一种基本的幼稚方法

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:11:44.270

对于每个值，对硬盘驱动器上的文件执行二进制搜索，而不将其加载到内存中。如果看到重复项，请删除它。然后进行最后一次传递，删除两个或更多的所有实例`\n`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T22:18:06.493

不完全确定这是否有效/是否有任何好处...

```
awk '{ if ($2 > $1) print; else print $2, $1 }' hugetext | sort -nu -O hugetext 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T21:27:05.483

你想删除重复考虑`1 2`和`2 1`是相同的吗？

```
< file.in \
| perl -lane'print "@F[ $F[0] < $F[1] ? (0,1,0,1) : (1,0,0,1) ]"' \
| sort -n \
| perl -lane'$t="@F[0,1]"; print "@F[2,3]" if $t ne $p; $p=$t;' \
> file.out 
```

这可以处理任意大的文件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T21:21:43.723

```
perl -lane '
    END{
        print for sort {$a<=>$b} keys %h;
    }

    $key = $F[0] < $F[1] ? "$F[0] $F[1]" : "$F[1] $F[0]";
    $h{$key} = "";
' file.txt 
```

**说明**：

1.  我按数字顺序对当前行进行排序
2.  `$key`我通过将第一个值和第二个值与空格连接来创建哈希键变量
3.  我定义了`$hash{$key}`无
4.  最后，我打印按数字顺序排序的所有键。

哈希键本质上是唯一的，所以没有重复。

您只需要使用`Unix`重定向来创建一个新文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-18T21:25:41.757

这是一个通用的 O(n) 算法，可以在 1 遍中执行此操作（不需要循环或排序）：

1.  从一个空的哈希集作为你的黑名单开始（一个集是一个只有键的映射）
2.  一次读取一行文件。
3.  对于每一行：
    *   检查这对已经在您的黑名单中。
    *   如果是这样，请忽略它。
    *   如果没有，请将其附加到您的结果文件中；并将交换后的值添加到黑名单中（例如，如果您刚刚将“3 4”和“4 3”读到黑名单中）

这需要 O(n) 时间来运行，并且需要 O(n) 存储黑名单。（如果您将文件作为 r/w 操作以在对照黑名单检查行时删除行，则无需额外存储结果）

# php - 使用dom解析html页面进行分页

> ID：12963792
> 
> 赞同：1
> 
> 时间：2012-10-18T21:09:26.870
> 
> 标签：php, dom, simple-html-dom

我想解析这个 html 页面，进行分页：

```
<div class="clear"></div>
<div id="ctl00_MainContent_PaperList_PageNavigator" class="page-navigator">
<a id="ctl00_MainContent_PaperList_Prev" title="Go to Previous Page" class="nextprev"  
   href="/Search?query=text%20summarization&amp;s=0&amp;start=1&amp;end=10">Previous<a>
<a href="s&#61;0&#38;start&#61;1&#38;end&#61;10">1</a> <span class="current">2</span>
<a id="ctl00_MainContent_PaperList_Next" title="Go to Next Page" class="nextprev" 
href="/ Search?query=text%20summarization&amp;s=0&amp;start=21&amp;end=30">Next</a>
<div> 
```

对于上一页，我需要解析上一页并转到下一页。这是代码：

```
$html = file_get_html($url) or die ('');
if($link = $html->find('div[class=page-navigator] ')) {  
    $previous = $link->first_child()->href; 
    $next     = $link->last_child()->href;
    $html->clear();  
    unset($html);  
    // other process
} 
```

我仍然收到错误`Fatal error: Call to a member function first_child() on a non-object in D:\AppServ\www\coba\page\page1.php on line 18`

怎么了。谢谢你 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:14:40.923

你也可以这样做：

```
if($link = $html->find('div.page-navigator')) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:12:46.733

在您的 xpath 中输入错误：

```
 if($link = $html->find("div[class='page-navigator'] ")) {  
                        ^--        ^--            ^--^-- 
```

注意引用的变化。你得到一个错误而不是一个 domnodelist，并且错误对象没有 first_child() 方法。

# qt - 在 QGraphicsView 上绘图时绘制 shift

> ID：12963794
> 
> 赞同：1
> 
> 时间：2012-10-18T21:09:27.883
> 
> 标签：qt, qgraphicsview, qgraphicsitem, qgraphicsscene

我有个问题。

我有一个继承 QGraphicsView 的类，假设它名为“g”。我重新实现了 mousePressEvent 方法，该方法的代码是：

```
void GraphWidget::mousePressEvent(QMouseEvent *event)
{
    if(event->button() == Qt::MiddleButton)
        createNode(event->pos().x(), event->pos().y());

    update();
    QGraphicsView::mousePressEvent(event);
} 
```

createNode 方法的代码是：

```
Node *GraphWidget::createNode(qreal x, qreal y, int id)
{
    Node* node = new Node(this);
    scene()->addItem(node);
    node->setPos(x, y);
    return node;
} 
```

我在我的主窗口类中使用这个类“g”作为中心小部件。所以它就像 QGraphicsView 一样工作。

问题是当我按下“绘图区域”上的中间按钮时 - 点被创建但不在我点击时的位置 - 点被移动。为什么？因此，当我尝试通过按下中间按钮来绘制这些点时 - 所有这些点都被绘制在错误的位置（不是在我的光标下方，它们被绘制在我的光标位置的左侧和上方）。

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:19:14.893

`QGraphicsView`并且`QGraphicsScene`有不同的坐标空间。当您调用时`setPos`，它应该在场景坐标中，但是由于您在视图的鼠标事件中，您的 x 和 y 将在视图坐标中。

我怀疑将您的 x 和 y 坐标映射到场景空间应该可以解决问题：

```
node->setPos( mapToScene(QPoint(x, y) ); 
```

# windows-phone-7 - 背景图像 Windows Phone 7

> ID：12963797
> 
> 赞同：0
> 
> 时间：2012-10-18T21:09:57.373
> 
> 标签：windows-phone-7

我有一个小问题，我想用 C# 更改我的应用程序的背景。我试过这段代码：

```
var app = Application.Current as App;
var imageBrush = new ImageBrush
{
ImageSource = new BitmapImage(new Uri(imageName, UriKind.Relative))
};
app.RootFrame.Background = imageBrush; 
```

但它不起作用，背景很暗..我试着做：

```
app.RootFrame.Background = new SolidColorBrush(Colors.Blue); 
```

而且效果很好。所以我不明白问题出在哪里，我的图像是 480*800 像素，我将*Build Action*设置为*Content*并将*Copy to Output Directory*设置为*Copy if newer*。

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:33:29.743

也许你可以试试

```
 var app = Application.Current as App;
        if (app == null)
            return;

        var imageBrush = new ImageBrush
        {
        };
        var uu = new BitmapImage(new Uri(imageName, UriKind.Relative));
        uu.CreateOptions = BitmapCreateOptions.None;
        imageBrush.ImageSource = uu;

        app.RootFrame.Background = imageBrush; 
```

标记：uu.CreateOptions = BitmapCreateOptions.None;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T22:57:47.770

我用图像成功地做了几乎完全相同的事情，除了我将图像设置为全景控件的背景。我知道其他人在[这篇文章](https://stackoverflow.com/questions/10483812/error-in-changing-the-background-dynamically)中遇到了同样的问题，所以我建议设置 LayoutRoot 或其他控件的背景，而不是 app.RootFrame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:55:27.793

谢谢你俩 ！！

我之前曾分别尝试过这两种解决方案，但没有奏效。但它结合在一起完美无缺！

编码 ：

```
var imageBrush = new ImageBrush
{
};
var uu = new BitmapImage(new Uri("/Images/image.png", UriKind.Relative));
uu.CreateOptions = BitmapCreateOptions.None;
imageBrush.ImageSource = uu;

LayoutRoot.Background = imageBrush; 
```

# sql - sql动态替换

> ID：12963800
> 
> 赞同：1
> 
> 时间：2012-10-18T21:10:24.070
> 
> 标签：sql, oracle, plsql

我的要求是我正在使用 regex_like 函数在表中搜索一堆列：下面是一个示例：

```
SELECT *
FROM dsopi_person_addr_rule ADDR
WHERE regexp_like (UPPER(addr.src_address_line1),   
                     'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
```

现在，如果我找到一个匹配项，我想做什么，我想从 src_address_line1 中获取值并将其放在同一张表的另一列中。我知道如何做到这一点，但任何人都可以推荐如何有效地做到这一点。我愿意使用游标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:12:42.647

你不需要这个光标

```
UPDATE dsopi_person_addr_rule ADDR
SET new_col = addr.src_address_line1
WHERE regexp_like (UPPER(addr.src_address_line1),   
                     'DEP|DPT$|ABT|DIP.|DIPART|AFDEL|AVDEL|AVD.|DIV|PGRD|PGP|PPG') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T21:14:38.323

我会看一下 CONTAINSTABLE 子句，但这需要启用/创建 FULLTEXT 索引。

[http://msdn.microsoft.com/en-us/library/ms189760.aspx](http://msdn.microsoft.com/en-us/library/ms189760.aspx)

# vb.net - 从 .hlp 文件打开 excel

> ID：12963803
> 
> 赞同：0
> 
> 时间：2012-10-18T21:10:37.803
> 
> 标签：vb.net, helpfile

我正在使用编译 .rtf 文件并生成附加到我的 vb 应用程序的 .hlp 文件的 Microsoft 帮助研讨会。问题是我想要一个帮助文件上的链接，单击该链接会打开一个 Excel。我没有使用 HTML 帮助版本。（我只能使用 Microsoft 帮助研讨会）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:22:12.913

虽然 chm 具有启动外部程序的能力（[此处](http://kb.helpwaregroup.com/ms-html-help/hh-tips-tricks#Applets)的示例），但它可能受到[组策略](http://msdn.microsoft.com/en-us/library/windows/desktop/ms524374%28v=vs.85%29.aspx)的限制。请与您的管理员联系以了解其限制的详细信息

# c# - MessageBodyMember 名称选项未在 XML 中设置正确的元素名称

> ID：12963805
> 
> 赞同：0
> 
> 时间：2012-10-18T21:10:48.050
> 
> 标签：c#, .net, wcf, web-services

我在 WCF Web 服务中有以下代码：

```
[MessageBodyMember(Order = 1, Name = "XmlInvoice")]
public new XElement XmlDocument { get; set; } 
```

此 WCF 服务成功运行，但 XML 响应包含元素`<XmlDocument>`，而不是`<XmlInvoice>`。我怎样才能让这个属性作为元素返回`<XmlInvoice>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T15:13:40.063

这段代码的问题是继承。我从基类继承了 XmlDocument 属性（原始帖子中未显示）。在基类中，我包含了`MessageBodyMember`属性，这覆盖了我的子类中的属性。我已经更新了我的代码，以便基类属性定义不包含该`MessageBodyMember`属性。然后，在子类中，我将`MessageBodyMemeber`属性与`Name`参数一起使用，生成的 XML 包含正确的元素名称。

# php - EasyAPNS 在 Production- Empty clientid 列中获取排队消息时

> ID：12963809
> 
> 赞同：0
> 
> 时间：2012-10-18T21:11:11.633
> 
> 标签：php, mysql, objective-c, ios5, apple-push-notifications

我已经用easyAPNS设置了APNS服务器，一切正常，证书，权限，设备注册正确，消息在消息表中创建。但问题是，当我尝试获取队列消息时，class_APNS.php 中的函数：

```
private function _flushMessages(){
        // only send one message per user... oldest message first
        $sql = "SELECT
                `apns_messages`.`pid`,
                `apns_messages`.`message`,
                `apns_devices`.`devicetoken`,
                `apns_devices`.`development`
            FROM `apns_messages`
            LEFT JOIN `apns_devices` ON (`apns_devices`.`pid` = `apns_messages`.`fk_device` AND `apns_devices`.`clientid` = `apns_messages`.`clientid`)
            WHERE `apns_messages`.`status`='queued'
                AND `apns_messages`.`delivery` <= NOW()
                AND `apns_devices`.`status`='active'
            ORDER BY `apns_messages`.`created` ASC
            LIMIT 100;";

        $this->_iterateMessages($sql);
    } 
```

不迭代任何消息，因为 devices 和 messages 的 clientid 列值为空，所以从句 ( `apns_devices`. `pid`= `apns_messages`. `fk_device`AND `apns_devices`. `clientid`= `apns_messages`. `clientid`) 永远不会完成。

这是我用来创建消息的 samples.php 代码段：

```
$apns->newMessage(4);
$apns->addMessageAlert('Si us plau!!!');
$apns->addMessageCustom('acme2', array('bang', 'whiz'));
$apns->queueMessage(); 
```

我真的很感谢你的帮助。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T15:57:43.043

我也有同样的问题。我以这种方式修改了查询：

`$sql = "SELECT `apns_messages`.`pid`, `apns_messages`.`message`, `apns_devices`.`devicetoken`, `apns_devices`.`development` FROM `apns_messages` LEFT JOIN `apns_devices` ON (`apns_devices`.`clientid` = `apns_messages`.`clientid`) WHERE `apns_messages`.`status`='queued' AND `apns_messages`.`delivery` <= NOW() AND `apns_devices`.`status`='active' ORDER BY `apns_messages`.`created` ASC LIMIT 1000;";`

并发送超过 100 条消息

`$tv_sec = 0;`

`$tv_usec = 200000;`

它似乎工作正常。

# php - 它在我的 php 中显示未定义的索引

> ID：12963810
> 
> 赞同：1
> 
> 时间：2012-10-18T21:11:14.427
> 
> 标签：php, mysqli

我正在使用您提到的 if $_REQUEST 语句，但我想做的是，如果满足 if 语句，则显示 $echo，否则显示下面的内容（会话下拉菜单和表单）

问题是，即使它显示一个回显，它也会显示一个未定义的通知，说明 sessionnum 在第 179 行未定义。

我的问题是，对于 else 语句，我应该将右括号放在下面的代码中：

```
if (isset($_POST['modulesubmit'])) {

     if($_REQUEST['modulesDrop']==''){

         echo "Please Select a Module from the Drop Down Menu Above";

     }
     else{  

 var_dump($_POST['modulesDrop']);

        $sessionquery = "
             SELECT SessionId, SessionDate, SessionTime, ModuleId
             FROM Session
             WHERE
             (ModuleId = ?)
             ORDER BY SessionDate, SessionTime 
            ";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

 $sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

    $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

 $dataArraySession[$dbSessionId]['SessionDate'] = $dbSessionDate; 
 $dataArraySession[$dbSessionId]['SessionTime'] = $dbSessionTime;

}

foreach ($dataArraySession as $sessionId => $sessionData) {

   $sessionHTML = ""; 
   $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
   $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
   $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        
   $sessionHTML .= '</select>';

        }
} //closing bracket for else statment
 if ($sessionnum > 0) { //error line is here

 ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Submit" name="sesionsubmit" /></p>      
    </form>       

<?php

}
else {
 echo "<p>Sorry, You have No Sessions under this Module</p>";
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:21:55.927

您想要的是声明您计划在 IF 条件中使用的任何变量，这些变量将在页面顶部更改/重置其值。

否则，您将收到未定义的索引警告。您也可以尝试使用 @ 来使警告静音。

```
$sessionnum = 0;

if (isset($_POST['modulesubmit'])) {

     if($_REQUEST['modulesDrop']==''){

         echo "Please Select a Module from the Drop Down Menu Above";

     }
     else{  

 var_dump($_POST['modulesDrop']);

        $sessionquery = "
             SELECT SessionId, SessionDate, SessionTime, ModuleId
             FROM Session
             WHERE
             (ModuleId = ?)
             ORDER BY SessionDate, SessionTime 
            ";

$sessionqrystmt=$mysqli->prepare($sessionquery);
// You only need to call bind_param once
$sessionqrystmt->bind_param("s",$_POST['modulesDrop']);
// get result and assign variables (prefix with db)

$sessionqrystmt->execute(); 

$sessionqrystmt->bind_result($dbSessionId,$dbSessionDate,$dbSessionTime, $dbModuleId);

 $sessionqrystmt->store_result();

$sessionnum = $sessionqrystmt->num_rows();   

    $dataArraySession = array();

 while ( $sessionqrystmt->fetch() ) { 

 $dataArraySession[$dbSessionId]['SessionDate'] = $dbSessionDate; 
 $dataArraySession[$dbSessionId]['SessionTime'] = $dbSessionTime;

}

foreach ($dataArraySession as $sessionId => $sessionData) {

   $sessionHTML = ""; 
   $sessionHTML .= '<select name="session" id="sessionsDrop">'.PHP_EOL;
   $sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;           
   $sessionHTML .= "<option value='$sessionId'>" . $sessionId . " - " . $sessionData['SessionDate']. " - " . $sessionData['SessionTime'] ."</option>".PHP_EOL;        
   $sessionHTML .= '</select>';

        }
} //closing bracket for else statment
 if ($sessionnum > 0) { //error line is here

 ?>

     <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
     <p>Sessions: <?php echo $sessionHTML; ?><input id="sessionSubmit" type="submit" value="Submit" name="sesionsubmit" /></p>      
    </form>       

<?php

}
else {
 echo "<p>Sorry, You have No Sessions under this Module</p>";
}

?> 
```

# codeigniter - 将 Codeigniter 连接到使用 Windows 身份验证的 ODBC

> ID：12963817
> 
> 赞同：2
> 
> 时间：2012-10-18T21:11:36.140
> 
> 标签：codeigniter, odbc, windows-authentication

我正在寻找一种解决方案，允许我通过使用 Windows 身份验证的 ODBC 连接到 MS SQL。我已经使用需要用户/通行证的标准 ODBC 连接测试并验证了所有其余代码。以下是适用于该 ODBC 的设置以及我在 Windows Authentication ODBC 上尝试过的设置。

工作 database.php 设置 - 标准用户/密码连接

```
 $active_group = 'jf2';
    $active_record = TRUE;
    $db['jf']['hostname'] = 'system DSN name';
    $db['jf']['username'] = 'db_user';
    $db['jf']['password'] = 'db_pass';
    $db['jf']['database'] = 'db_name';
    $db['jf']['dbdriver'] = 'odbc';
    $db['jf']['dbprefix'] = '';
    $db['jf']['pconnect'] = TRUE;
    $db['jf']['db_debug'] = TRUE;
    $db['jf']['cache_on'] = FALSE;
    $db['jf']['cachedir'] = '';
    $db['jf']['char_set'] = 'utf8';
    $db['jf']['dbcollat'] = 'utf8_general_ci';
    $db['jf']['swap_pre'] = '';
    $db['jf']['autoinit'] = TRUE;
    $db['jf']['stricton'] = FALSE; 
```

非工作 database.php 设置 - Windows 身份验证尝试

```
 $active_group = 'jf1';
    $active_record = TRUE;

    $db['jf1']['hostname'] = 'system DSN name';                
    $db['jf1']['username'] = '';
    $db['jf1']['password'] = '';
    $db['jf1']['database'] = 'db_name';
    $db['jf1']['dbdriver'] = 'odbc';
    $db['jf1']['dbprefix'] = '';
    $db['jf1']['pconnect'] = TRUE;
    $db['jf1']['db_debug'] = TRUE;
    $db['jf1']['cache_on'] = FALSE;
    $db['jf1']['cachedir'] = '';
    $db['jf1']['char_set'] = 'utf8';
    $db['jf1']['dbcollat'] = 'utf8_general_ci';
    $db['jf1']['swap_pre'] = '';
    $db['jf1']['autoinit'] = TRUE;
    $db['jf1']['stricton'] = FALSE; 
```

具体来说，我不确定用户/密码字段中会包含什么。错误如下：

> 发生数据库错误
> 
> 无法使用提供的设置连接到您的数据库服务器。
> 
> 文件名：C:\wamp\www\CodeIgniter_2.1.2\boss_table\system\database\DB_driver.php
> 
> 行号：124

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T07:27:59.117

```
$db['jf1']['hostname'] = 'system DSN name';                
$db['jf']['username'] = '';
$db['jf']['password'] = '';
$db['jf1']['database'] = 'db_name'; 
```

您在`jf`数据库组而不是组上设置用户名和密码密钥`jf1`。

```
$db['jf1']['hostname'] = 'system DSN name';                
$db['jf1']['username'] = 'insert_username';
$db['jf1']['password'] = 'insert_password';
$db['jf1']['database'] = 'db_name'; 
```

# android - 适用于 Android 的 Twitter Oauth 适用于浏览器，但不适用于 Twitter 应用程序

> ID：12963818
> 
> 赞同：1
> 
> 时间：2012-10-18T21:11:38.013
> 
> 标签：android, twitter, oauth, callback, twitter-oauth

嗨，我必须为我的应用程序做一个 twitter Oauth。我已经这样做了：

CALLBACK_URL="twitter://twitterTraficoCCS?"

显现

```
<activity
        android:name=".TwitterLogin"
        android:launchMode="singleInstance" >
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data android:host="twitterTraficoCCS" android:scheme="twitter" />
        </intent-filter>
    </activity> 
```

现在..在代码中

```
String authUrl = httpOauthprovider.retrieveRequestToken(httpOauthConsumer, mActivity.getResources().getString(R.string.TwitterCallBackUrl));
            startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl))); 
```

和：

```
httpOauthConsumer = new CommonsHttpOAuthConsumer(TwitterConsumerKey, TwitterConsumerSecret));
        httpOauthprovider = new DefaultOAuthProvider("http://twitter.com/oauth/request_token", "http://twitter.com/oauth/access_token", "http://twitter.com/oauth/authorize"); 
```

这就像浏览器/chrome 上的魅力，但是当我从操作菜单中选择 TwitterApp 时，它会转到 Twitter 应用程序，要求对我的应用程序进行身份验证。我选择好的，它说，重定向回来......并且永远不会回调我的应用程序。

有什么建议吗？

提前致谢。

编辑：“Twitter 应用程序不进行回调”我的意思是，它不调用我的 onNewIntent()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T11:51:58.083

在清单中将活动的启动模式更改为 singleTask。

```
android:launchMode="singleTask" 
```

这对我有用。希望能帮助到你 ：）

# asp.net - ASP.NET 无处检索数据

> ID：12963820
> 
> 赞同：0
> 
> 时间：2012-10-18T21:11:41.527
> 
> 标签：asp.net, .net, asp.net-mvc-3, entity-framework, entity

我正在阅读[ASP.NET MVC 3 教程](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/intro-to-aspnet-mvc-3)。[到了将EnityFramework 用于模型类](http://www.asp.net/mvc/tutorials/getting-started-with-aspnet-mvc3/cs/adding-a-model)的地步。我在 web.config 中没有指定连接字符串的情况下运行了应用程序，并且它工作正常。

我可以添加、编辑、删除记录。最奇怪的是，即使在我停止开发服务器并再次开始调试应用程序之后，它们仍然存在，就好像表是在内存中的某个地方创建的并且由于某种原因而保持活动状态一样。谁能解释发生了什么？

这是图片的链接：oi48.tinypic.com/fnbeba.jpg

是否应该使用名称与从 DbContext 派生的类的名称匹配的连接字符串？

EDIT1：
因为我在 web.config 中没有连接字符串，所以它是由 Enity Framework 使用命名空间和从 DBContext 派生的类的名称生成的。默认情况下，EF 使用 SQL Express，因此数据库文件是在数据库服务器的 DATA 目录 C:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA 中创建的。

如果 DBContext 派生类是，我不明白为什么它不会在 App_Data 目录中创建数据库文件的最后一件事

```
public class MoviesDBContex : DbContext
{
    public DbSet<Movie> Movies { get; set; }

    // Passing name of the connections string shouldn't be even necessary
    public MoviesDBContex()
        : base("MoviesDBContex")
    { }
} 
```

和 web.config 包含

```
 <connectionStrings>
    <add name="MoviesDBContext"
      connectionString="Data Source=|DataDirectory|Movies.sdf"
      providerName="System.Data.SqlClient"/>
  </connectionStrings> 
```

这就是关于 ER 连接和模型的 Microsoft 指南 (msdn.microsoft.com/en-us/data/jj592674.aspx) 所说的：

> 如果连接字符串的名称与上下文的名称匹配（有或没有命名空间限定），那么在使用无参数构造函数时，DbContext 将找到它。如果连接字符串名称与上下文名称不同，则可以通过将连接字符串名称传递给 DbContext 构造函数来告诉 DbContext 在 Code First 模式下使用此连接。

知道为什么不在 App_Data 中创建数据库文件吗？

EDIT2：
类名中缺少“t”，因此它与连接字符串的名称不匹配。

当提供程序是 SQL Server Compact providerName="System.Data.SqlServerCe.4.0" 时，我确实按预期工作，但是如果我将其更改为 providerName="System.Data.SqlClient"，我会在下面添加一个异常。普通的 SQL Server 不应该也可以创建数据库文件吗？

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:15:46.747

我相信它正在使用 SQL Server express，将 DB 文件写入应用程序中的 app_data 目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:18:44.457

你的机器上安装了 SQL Express 吗？您使用的是哪个版本的实体框架？只要我知道实体框架将本地 SQL Express 作为其默认连接字符串（如果没有提供字符串连接）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:20:57.563

这称为“约定优于配置”，Entity Framework 和 MVC 大量使用此原则。基本上，它说除非您另外给出具体说明，否则它们将采用各种约定。

如果您不向 EF 提供连接字符串，则它将使用默认连接字符串，该字符串由类的名称空间和名称生成。如果您的 web.config 中不存在该设置，那么它将使用位于 C:\Windows\Microsoft.NET 文件夹树中的 machine.config 中定义的 DefaultConnection

# jquery - Rails 在保存到数据库之前弹出窗口

> ID：12963826
> 
> 赞同：0
> 
> 时间：2012-10-18T21:12:01.867
> 
> 标签：jquery, css, ruby-on-rails, ruby, popup

我有点不确定如何解决这个问题。我的目标是允许用户写一篇文章，并在提交后，一个窗口将使用文章的参数验证文章是否存在，或者根据 x 参数有些是相似的。在弹出窗口中将它们显示给用户，并允许用户确定是否要将具有图片的文章与以前的现有文章结合或创建自己的文章。

我有他的问题我如何创建一个弹出窗口，而不会被大多数当前浏览器阻止，如果不可能的话，我的替代方案是

*   将其发送到新表格？
*   改为使用多种形式进行处理？怎么办！

我的下一个任务是我如何组合，或者不，我应该创建一个隐藏字段并在控制器中查看，如果组合，那么这个还有这个？？？

感谢您的帮助、教程链接和建议。我真正的主要问题是他可以用弹出窗口来完成吗？Aka Javascript 黑色环绕也可以，但不确定是否允许以及如何实现！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:22:35.017

我认为您正在寻找的是类似于[jQuery fancybox](http://fancybox.net/)的东西。您可以在表单上抛出一个 javascript 提交钩子，该钩子会弹出一个花哨的框并`$.get()`在最终提交表单之前使用类似的东西点击 XHR 端点。

或者，您可以在数据库中的表单中添加一个“已发布”字段，继续并在提交时创建表单，并将已发布设置为“false”，然后在下一页上有各种有趣的问题，您可以在其中决定是否发表或销毁该文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:23:32.847

使用模态窗口。Twitter Bootstrap 有一个不错的。[http://twitter.github.com/bootstrap/javascript.html#modals](http://twitter.github.com/bootstrap/javascript.html#modals)

Internet Explorer 内置了一个。 [http://msdn.microsoft.com/en-us/library/ie/ms536759(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536759(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:24:00.697

是的，它可以做到，CSS、Jquery (AJAX) 可能我会怎么做。您可能希望将其分解为多个阶段。

*   单击任何链接/按钮时显示模式对话框
*   AJAX 到您的 Rails 控制器并使用您的响应数据更新模式
*   然后根据用户的下一步动作重复？

检查这些链接...

[jQuery .html()](http://api.jquery.com/html/)附加响应数据。jQuery [.ajax()](http://api.jquery.com/jQuery.ajax/)发出请求。

有大量的模态/灯箱教程，但如果你自己动手的话，学习起来非常简单和更好。当您有一些代码要显示时，您总是可以发布更具体的问题。希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T04:53:59.203

是`data-confirm`你要找的属性吗？

```
f.submit('Save Article'), data: {confirm: "Do more action?"} 
```

# xtk - xtk volume.image 属性

> ID：12963840
> 
> 赞同：0
> 
> 时间：2012-10-18T21:12:53.927
> 
> 标签：xtk

短暂休息后，我将返回使用 xtk 库，并且在使用[此处记录](http://api.goxtk.com/volume.html#image_get)的 volume.image getter 方法时遇到问题。这种方法是否仍然受支持，还是在从版本 8 迁移到版本 9 时被放弃了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T17:33:44.240

我刚刚检查了代码并尝试了它 - 它仍然对我有用！

如果未加载卷，它应该返回一个空数组，一旦加载卷，它应该返回一个图像数据。

# objective-c - NSPopover 相对于 NSMenuItem

> ID：12963846
> 
> 赞同：3
> 
> 时间：2012-10-18T21:13:04.600
> 
> 标签：objective-c, macos, nsmenuitem, nsmenu, nspopover

我正在开发一个使用 NSMenu 来显示内容的 OSX 应用程序。我想在突出显示 NSMenuItem 时出现 NSPopover，但我坚持使用“showRelativeToRect:ofView:preferredEdge:”部分，因为我没有相对视图作为“ofView”参数传递。

有没有办法轻松做到这一点？Droplr 应用程序可以做到这一点（http://d.pr/i/GWrf）所以我猜有......

谢谢 ！

# wordpress - Wordpress url重写在iis7上不起作用

> ID：12963850
> 
> 赞同：1
> 
> 时间：2012-10-18T21:13:18.607
> 
> 标签：wordpress, iis-7, url-rewriting

我有一个在 IIS7 上运行的 Wordpress 网站。

我遇到了一个大问题，因为除了主页之外，我所有的 url 都包含 index.php。

我的主页：www.mywebsite.com 其他：www.mywebsite.com/index.php/post1, www.mywebsite.com/index.php/post2 等等..

我想使用IIS7的url重写模式。我的网络主机告诉我重写模块已激活。

我不知道在 web.config 文件中写什么。我试过了 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="wordpress" patternSyntax="Wildcard">
                    <match url="*" />
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php"/>
                </rule>     
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

我的网址没有改变！

和这个 ：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Supprimer index.php">
                    <match url="^index.php/([_0-9a-z-]+)/([_0-9a-z-]+)" />
                    <action type="Rewrite" url="{R:1}/{R:2}" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

我也试过：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Main Rule" stopProcessing="true">
                    <match url=".*" />
                    <conditions logicalGrouping="MatchAll">
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                    </conditions>
                    <action type="Rewrite" url="index.php/{R:0}" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

总是不起作用。

你能帮我删除 url 中的 index.php 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T21:00:53.383

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <httpErrors errorMode="Detailed"/>
    <rewrite>
      <rules>
        <rule name="Main Rule" stopProcessing="true">
        <match url=".*"/>
            <conditions logicalGrouping="MatchAll">
                <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
            </conditions>
        <action type="Rewrite" url="index.php/{R:0}"/></rule>
            <rule name="wordpress" patternSyntax="Wildcard">
                <match url="*"/>
                    <conditions>
                        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true"/>
                        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true"/>
                    </conditions>
        <action type="Rewrite" url="index.php"/>
        </rule>     
        </rules>
    </rewrite>
    <defaultDocument>
      <files>
        <clear/>

        <add value="index.php"/>
      </files>
    </defaultDocument>
  </system.webServer>
</configuration> 
```

# c# - 调试 Windows 服务超时

> ID：12963856
> 
> 赞同：0
> 
> 时间：2012-10-18T21:13:46.313
> 
> 标签：c#, windows-services, visual-studio-debugging

我有一个创建 UdpClient 类实例并监听传入请求的 Windows 服务。我有一个帮助类将其作为控制台应用程序运行。当我将它作为控制台程序运行时，它运行良好并正常接收连接。当使用“installutil MyService”部署为 Windows 服务并启动它时，我收到以下错误：“错误 1053：服务未及时响应启动或控制请求。” 该服务甚至没有启动，所以我不能在代码中放置断点。关于如何调试或在哪里查看的任何建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:23:09.353

您的 Start() 方法在服务启动时执行任何操作所需的时间太长 - 如果内存服务您有大约 15 秒的时间来启动服务应该执行的任何任务（在单独的线程上进行长时间运行或连续活动），然后您必须允许启动方法结束，以便服务控制器识别服务已完成启动。

您没有发布任何代码，但我的假设是您正在同步侦听 UDP 流量 - 所以启动方法只是坐在那里等待 UDP 消息并且永远不会结束。将 UDP 监听器放入自己的线程中，启动那个线程，然后让启动方法结束。

# android - Android 围绕其中心缩放图像视图

> ID：12963857
> 
> 赞同：2
> 
> 时间：2012-10-18T21:13:52.583
> 
> 标签：android

这应该是最简单的事情。我正在尝试使用 ViewPropertyAnimator 围绕其中心缩放 ImageView。

我有以下布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ImageView
    android:id="@+id/imageView"
    android:background="@android:color/black"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"/>

<ImageView
    android:id="@+id/target"
    android:layout_centerInParent="true"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/crosshair"
    /> 
```

然后我有以下代码：

```
// Now we show the burst view
                if(mLastBurst != null)
                {
                    ((FrameLayout)(mLastBurst.getParent())).removeView(mLastBurst);
                    mLastBurst.animate().cancel();
                    mLastBurst.setVisibility(View.GONE);
                }

                mLastBurst = getLayoutInflater().inflate(R.layout.target, null);
                mLastBurst.setX(event.getX()-mLastBurst.getWidth()/2);
                mLastBurst.setY(event.getY()-mLastBurst.getHeight()/2);
                mLastBurst.setPivotX(50);
                mLastBurst.setPivotY(50);
                mLastBurst.animate().scaleXBy(10).scaleYBy(10).setDuration(500);
                addContentView(mLastBurst,new ViewGroup.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)); 
```

当我运行代码时，所发生的只是图像不是围绕图像中心缩放，而是向左漂移。

我玩过 pivotX 和 pivotY 值无济于事。这应该很简单，我想我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:17:16.353

尽量不要设置 pivotX 和或 pivotY，它们默认居中。如果你设置它们，我相信单位是像素。

# mysql - 为使用分析定义 Web 服务（dekstop 应用程序）

> ID：12963874
> 
> 赞同：6
> 
> 时间：2012-10-18T21:15:02.833
> 
> 标签：mysql, database, analytics, desktop-application, database-normalization

**当前情况**
我有一个桌面应用程序 (C++ Win32)，我希望匿名跟踪用户的使用分析（操作、点击、使用时间等）
。跟踪是通过指定的 Web 服务完成的特定操作（安装、卸载、单击) 并且所有内容都由我的团队编写并存储在我们的数据库中。

**需求**
现在我们正在添加更多的使用类型和事件以及各种数据，因此我们需要定义服务。
我不想为每个操作提供大量不同的 Web 服务，而是希望为所有使用类型提供一个**通用**服务，它能够接收不同的数据类型。
例如：

*   “button_A_click”事件，具有 1 个字段的数据：{window_name (string)}
*   “show_notification”事件，有 3 个字段的数据：{source_id (int), user_action (int), index (int)}

**问题**
我正在寻找一种优雅便捷的方式来存储这种多样化的数据，以便稍后我可以轻松地查询它。
我能想到的替代方案：

*   将每种使用类型的不同数据存储为 JSON/XML 对象的一个​​字段，但提取数据并为这些字段编写查询将非常困难

*   每条记录都有额外的N个数据字段，但这似乎很浪费。

对这种模型有什么想法吗？也许像谷歌分析？请指教...

**技术：**数据库是在 phpMyAdmin 下运行的 MySQL。

**免责声明：** 有一篇[类似的帖子](https://stackoverflow.com/questions/4799040/software-usage-analytics-in-c-sharp)引起了我的注意，例如[DeskMetrics](http://deskmetrics.com/)和[Tracker bird](http://www.trackerbird.com/)等服务，或者尝试将谷歌分析嵌入到 C++ 原生应用程序中，但我更愿意自己使用该服务，并更好地了解如何设计它样的模型。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-21T16:30:25.453

这似乎是一个[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)问题。

我还将假设您还有一个名为`events`所有事件的存储表。

此外，我将假设您必须具有以下数据属性（为简单起见）：`window_name, source_id, user_action, index`

为了实现标准化，我们需要以下表格：

```
events
data_attributes
attribute_types 
```

这是每个表的结构方式：

```
mysql> describe events;
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | Default | Extra          |
+------------+------------------+------+-----+---------+----------------+
| id         | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| event_type | varchar(255)     | YES  |     | NULL    |                |
+------------+------------------+------+-----+---------+----------------+

mysql> describe data_attributes;
+-----------------+------------------+------+-----+---------+----------------+
| Field           | Type             | Null | Key | Default | Extra          |
+-----------------+------------------+------+-----+---------+----------------+
| id              | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| event_id        | int(11)          | YES  |     | NULL    |                |
| attribute_type  | int(11)          | YES  |     | NULL    |                |
| attribute_name  | varchar(255)     | YES  |     | NULL    |                |
| attribute_value | int(11)          | YES  |     | NULL    |                |
+-----------------+------------------+------+-----+---------+----------------+

mysql> describe attribute_types;
+-------+------------------+------+-----+---------+----------------+
| Field | Type             | Null | Key | Default | Extra          |
+-------+------------------+------+-----+---------+----------------+
| id    | int(11) unsigned | NO   | PRI | NULL    | auto_increment |
| type  | varchar(255)     | YES  |     | NULL    |                |
+-------+------------------+------+-----+---------+----------------+ 
```

这个想法是你必须`attribute_types`用你可以拥有的所有可能的类型来填充。然后，对于每个新事件，您将在表中添加一个条目并在`events`表中添加相应条目，`data_attributes`以将该事件映射到具有适当值的一个或多个属性类型。

例子：

```
"button_A_click" event, has data with 1 field: {window_name "Dummy Window Name"}
"show_notification" event, has data with 3 fields: {source_id: 99, user_action: 44, index: 78} 
```

将表示为：

```
mysql> select * from attribute_types;
+----+-------------+
| id | type        |
+----+-------------+
|  1 | window_name |
|  2 | source_id   |
|  3 | user_action |
|  4 | index       |
+----+-------------+

mysql> select * from events;
+----+-------------------+
| id | event_type        |
+----+-------------------+
|  1 | button_A_click    |
|  2 | show_notification |
+----+-------------------+

mysql> select * from data_attributes;
+----+----------+----------------+-------------------+-----------------+
| id | event_id | attribute_type | attribute_name    | attribute_value |
+----+----------+----------------+-------------------+-----------------+
|  1 |        1 |              1 | Dummy Window Name |            NULL |
|  2 |        2 |              2 | NULL              |              99 |
|  3 |        2 |              3 | NULL              |              44 |
|  4 |        2 |              4 | NULL              |              78 |
+----+----------+----------------+-------------------+-----------------+ 
```

要为此数据编写查询，您可以使用 MySQL 中的[COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)函数为您获取值，而无需检查哪些列是`NULL`.

这是我破解的一个简单示例：

```
SELECT  events.event_type as `event_type`, 
        attribute_types.type as `attribute_type`, 
        COALESCE(data_attributes.attribute_name, data_attributes.attribute_value) as `value`
FROM    data_attributes,
        events,
        attribute_types
WHERE   data_attributes.event_id = events.id
AND     data_attributes.attribute_type = attribute_types.id 
```

产生以下输出：

```
+-------------------+----------------+-------------------+
| event_type        | attribute_type | value             |
+-------------------+----------------+-------------------+
| button_A_click    | window_name    | Dummy Window Name |
| show_notification | source_id      | 99                |
| show_notification | user_action    | 44                |
| show_notification | index          | 78                |
+-------------------+----------------+-------------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T15:05:32.047

编辑：臭虫！我读过 C#，但我看到你正在使用 C++。对于那个很抱歉。我将答案保留原样，因为它的原理仍然有用。请将示例视为伪代码。

您可以定义与数组一起使用的自定义类/结构。然后序列化这些数据并发送到 WebService。例如：

```
[Serializable()]
public class ActionDefinition {
    public string ID;
    public ActionType Action; // define an Enum with possible actions
    public List[] Fields;  //Or a list of 'some class' if you need more complex fields
}

List AnalyticsCollection = new List(Of, Actiondefinition);

// ...
SendToWS(Serialize(AnalyticsCollection)); 
```

现在，您可以根据需要灵活地动态添加任意数量的事件。

在服务器端，您可以简单地解析数据：

```
List[of, ActionDefinition] AnalyticsCollection = Deserialize(GetWS());

foreach (ActionDefinition ad in AnalyticsCollection) {
    switch (ad.Action) {
        //.. check for each action type
    }
} 
```

我建议添加诸如校验和之类的安全机制。我想 de/serializer 在 C++ 中是非常自定义的，所以也许简单的 Base64 编码就可以解决问题，并且可以作为 ascii 文本传输。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T14:59:52.530

您可以为每个事件制作一个表格，在其中声明什么参数意味着什么。然后你有一个主表，你只输入事件名称和 param1 等。管理工具将非常简单，你浏览所有事件，并使用声明每个事件的表来描述它们。例如，对于您的事件 button_A_click 您插入到描述表中：

```
Name                   Param1
button_A_Click    WindowTitle 
```

因此，您可以对事件进行分组或仅选择一个事件..

这就是我将如何解决它。

# xml - xslt 格式化数字

> ID：12963876
> 
> 赞同：0
> 
> 时间：2012-10-18T21:15:45.797
> 
> 标签：xml, xslt-2.0, number-formatting

我需要在 xslt 中格式化小数值。模板应删除小数点。并显示指定的数字后跟指定的小数位的数字。圆形模板四舍五入小数点。当我尝试使用我当前的模板时，我得到了 NaN。

如果 digitCount= 9，模板应将 992.45 转换为 000000992

```
<xsl:template name="RoundedDecimalFormat">
    <xsl:param name="num"></xsl:param>
    <xsl:param name="digitCount"></xsl:param>
    <xsl:variable name="value" select="format-number(round($num), '#########')"></xsl:variable>
    <xsl:call-template name="format-batchnum">
      <xsl:with-param name="batchnum" select="$value"></xsl:with-param>
      <xsl:with-param name="numbatchdigit" select="$digitCount"></xsl:with-param>
    </xsl:call-template>
  </xsl:template> 
```

如果 manyDigits = 9，下面的模板应将 1323.91 转换为 00000132391

```
 <xsl:template name="UnRoundedDecimalFormat">
    <xsl:param name="time"></xsl:param>
    <xsl:param name="manyDigits"></xsl:param>
    <xsl:variable name="value" select="format-number($time, '#########')"></xsl:variable>
    <xsl:call-template name="format-batchnum">
      <xsl:with-param name="batchnum" select="$value"></xsl:with-param>
      <xsl:with-param name="numbatchdigit" select="$manyDigits"></xsl:with-param>
    </xsl:call-template>
  </xsl:template> 
```

这部分工作正常，我在其他地方使用

```
<xsl:template name="format-batchnum">
    <xsl:param name="batchnum"/>
    <xsl:param name="numbatchdigit"/>
    <xsl:value-of select="concat(substring(substring($vZeroes,1,$numbatchdigit), string-length($batchnum) +1), $batchnum)"/>
  </xsl:template> 
```

***更新********

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:fo="http://www.w3.org/1999/XSL/Format" 
                xmlns:msxsl="urn:schemas-microsoft-com:xslt" 
                xmlns:ns0="http://www.w3.org/2001/XMLSchema-instance" 
                xmlns:fn="http://www.w3.org/2005/02/xpath-functions " 
                xmlns:xs="http://www.w3.org/2001/XMLSchema" 
                version="2.0">

 <xsl:call-template name="UnRoundedDecimalFormat">
      <xsl:with-param name="salary" select="$annualSalary"></xsl:with-param>
    </xsl:call-template>

<xsl:template name="RoundedDecimalFormat">
    <xsl:param name="num"></xsl:param>
    <xsl:param name="digitCount" select ="9"></xsl:param>
    <xsl:variable name="value" select="format-number(round($num), '#########')"></xsl:variable>
    <xsl:call-template name="format-batchnum">
      <xsl:with-param name="batchnum" select="$value"></xsl:with-param>
      <xsl:with-param name="numbatchdigit" select="$digitCount"></xsl:with-param>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="UnRoundedDecimalFormat">
    <xsl:param name="time"></xsl:param>
    <xsl:param name="manyDigits" select ="9"></xsl:param>

    <xsl:variable name="vTime" select="translate(string($time), '.', '')"/>

    <xsl:variable name="value" select="format-number(number(xs:string($vTime)), '#########')"></xsl:variable>
    <xsl:call-template name="format-batchnum">
      <xsl:with-param name="batchnum" select="$value"></xsl:with-param>
      <xsl:with-param name="numbatchdigit" select="$manyDigits"></xsl:with-param>
    </xsl:call-template>
 </xsl:template>

function roundedDecimalFormat(number){
try{
var n = Math.round(number);
return n;}
catch(err){return '';}
}

function removeDecimal(number){
try{
var n = number.replace('.','');
return n;}
catch(err){
return '';
}
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:21:18.897

**只需轻轻一点您的代码，它就可以按需要工作：**

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

    <xsl:variable name="vZeroes" select=
    "'0000000000000000000000000000000000000000000'"/>

 <xsl:template match="/">
     <xsl:call-template name="RoundedDecimalFormat">
      <xsl:with-param name="num" select="992.45"/>
      <xsl:with-param name="digitCount" select="9"/>
     </xsl:call-template>
=========================
     <xsl:call-template name="UnRoundedDecimalFormat">
      <xsl:with-param name="time" select="1323.91"/>
      <xsl:with-param name="manyDigits" select="9"/>
     </xsl:call-template>
 </xsl:template>

 <xsl:template name="RoundedDecimalFormat">
    <xsl:param name="num"></xsl:param>
    <xsl:param name="digitCount"></xsl:param>
    <xsl:variable name="value" select="format-number(round($num), '#########')"></xsl:variable>
    <xsl:call-template name="format-batchnum">
      <xsl:with-param name="batchnum" select="$value"></xsl:with-param>
      <xsl:with-param name="numbatchdigit" select="$digitCount"></xsl:with-param>
    </xsl:call-template>
  </xsl:template>

 <xsl:template name="UnRoundedDecimalFormat">
    <xsl:param name="time"></xsl:param>
    <xsl:param name="manyDigits"></xsl:param>

    <xsl:variable name="vTime" select="translate(string($time), '.', '')"/>

    <xsl:variable name="value" select="format-number(number(xs:string($vTime)), '#########')"></xsl:variable>
    <xsl:call-template name="format-batchnum">
      <xsl:with-param name="batchnum" select="$value"></xsl:with-param>
      <xsl:with-param name="numbatchdigit" select="$manyDigits"></xsl:with-param>
    </xsl:call-template>
 </xsl:template>

 <xsl:template name="format-batchnum">
    <xsl:param name="batchnum"/>
    <xsl:param name="numbatchdigit"/>
    <xsl:value-of select="concat(substring(substring($vZeroes,1,$numbatchdigit), string-length($batchnum) +1), $batchnum)"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
000000992
=========================
000132391 
```

# ant - Ant：源文件和目标文件是一样的。如何检测变化？

> ID：12963878
> 
> 赞同：3
> 
> 时间：2012-10-18T21:15:47.510
> 
> 标签：ant

我们正在使用[JiBX](http://jibx.sourceforge.net/)。重要的是要知道 JiBX 会修改已编译的类文件。

我们进行编译：

```
<javac destdir="${main.destdir}">
    <src path="${main.srcdir}"/>
    <classpath refid="main.classpath"/>
</javac> 
```

然后，我们调用 JiBX：

```
<jibx load="true"
    binding="{$binding.file}">
    <classpath refid="main.classpath"/>
    <classpath refid="main.destdir.classpath"/>
</jibx> 
```

这使用了一个 XML 文件来更新上面编译的类文件`<javac>`。问题是我怎么知道文件已经编译，但没有被 JiBX 处理？我想在我的程序中添加一些逻辑，以便 JiBX 不会两次更新文件。此外，重复已经完成的工作是一种不好的形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:13:31.957

在 jibx 构建步骤之后，生成一个标记文件，例如

```
<touch file="${target.dir}/jibx.marker" /> 
```

仅当该标记文件比 .class 文件更旧时才执行 jibx 构建步骤（表明 javac 比上一个 jibx 运行得更近）。

对于那一点逻辑，您可以使用传统的蚂蚁方式：

```
<uptodate property="jibx.uptodate" targetfile="${target.dir}/jibx.marker">
   <srcfiles dir="${main.destdir}" includes="...../*.class" />
</uptodate> 
```

然后在调用jixb 目标时将该属性与一个unless 子句一起使用。

或者，您可以使用 Antcontrib 的过时替代方案：

```
<outofdate>
  <sourcefiles>
    <fileset dir="${main.destdir}" includes="...../*.class" />
</sourcefiles>
<targetfiles>
    <fileset dir="${target.dir}" includes="jibx.marker"/>
</targetfiles>
<sequential>
    <jibx load="true"
        binding="{$binding.file}">
        <classpath refid="main.classpath"/>
        <classpath refid="main.destdir.classpath"/>
    </jibx>
</sequential>
</outofdate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:43:48.317

我把这个交给[Patrice M.](https://stackoverflow.com/a/12967763/368630)因为他的建议让我走上了正轨。然而，并没有像他所说的那样完全奏效。（对不起，如果我把他的代词弄错了，但帕特里斯既可以是男性也可以是女性。）

我要做的是创建两个监视文件：一个用于 Java 编译，一个用于 JiBX 更改。

```
<!-- Check if Javac is out of date. If so, create javac watcher -->
<outofdate verbose="true">
    <sourcefiles>
        <fileset dir="${main.srcdir}">
            <include name="*.java"/>
        </fileset>
    </sourcefiles>
    <mapper type="regexp"
        from="${main.srcdir}/(.*)\.java"
        to="${main.destdir}/(\1).class"/>
    <sequential>
        <echo message="Java compiled"/>
        <echo message="Java compiled"
            file="${target.dir}/${javac.monitor.file}"/>
    </sequential>
</outofdate>

<javac destdir="${main.destdir}"
    debug="${javac.debug}">
    <src path="${main.srcdir}"/>
    <classpath refid="main.classpath"/>
</javac>

<!-- Compare javac and jibx monitoring file -->
<!-- If out of date, rerun jibx -->
<outofdate>
    <sourcefiles>
        <fileset dir="${target.dir}">
            <include name="${javac.monitor.file}"/>
        </fileset>
    </sourcefiles>
    <targetfiles>
        <fileset dir="${target.dir}">
            <include name="${jibx.monitor.file}"/>
        </fileset>
    </targetfiles>
    <sequential>
        <jibx load="true"
            binding="${target.dir}/binding-gg.xml">
            <classpath refid="main.classpath"/>
            <classpath refid="main.destdir.classpath"/>
        </jibx>

        <!-- Create JiBX monitoring file -->
        <echo message="Compiled and JiBX"
            file="${target.dir}/${jibx.monitor.file}"/>
    </sequential>
</outofdate> 
```

如果源与类过期，我会创建 javac 监视文件，因为那是我编译的时候。`<outofdate>`仅当我运行 JiBX 并且位于for JiBX中时，我才必须创建 JiBX 过期监视文件。

我想我也可以在 XML JiBX 文件上放一个源代码来确定。

# c# - 如何使用套接字欺骗 IP 地址？

> ID：12963881
> 
> 赞同：9
> 
> 时间：2012-10-18T21:16:03.377
> 
> 标签：c#, sockets, ip-protocol

我正在开发一个网站测试框架，我希望能够欺骗用户 ip。我读过，像 Loadrunner 这样的软件可以做到这一点，我也希望能够做到这一点。

可以在[此处](http://msdn.microsoft.com/en-us/library/kb5kfec7.aspx)找到有关如何正常使用套接字的教程，但是如果我想欺骗 ip，我将不得不以某种方式编辑 ip 标头。这是在套接字级别完成的，还是在 .Net 中有其他更深层次的，可以让我这样做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T21:19:26.220

你不能再这样做了，因为在 Windows 的桌面版本中对原始套接字的访问受到了限制：

> 在 Windows 7、Windows Vista、带有 Service Pack 2 (SP2) 的 Windows XP 和带有 Service Pack 3 (SP3) 的 Windows XP 上，通过原始套接字发送流量的能力受到以下几种方式的限制：
> 
> *   TCP 数据不能通过原始套接字发送。
> *   无法通过原始套接字发送具有无效源地址的 UDP 数据报。任何传出 UDP 数据报的 IP 源地址必须存在于网络接口上，否则数据报将被丢弃。进行此更改是为了限制恶意代码创建分布式拒绝服务攻击的能力，并限制发送欺骗数据包（具有伪造源 IP 地址的 TCP/IP 数据包）的能力。
> *   不允许使用协议`bind`的原始套接字调用函数。**注意**带有原始套接字 的函数允许用于其他协议（例如、或）。`IPPROTO_TCP`
>     **`bind``IPPROTO_IP``IPPROTO_UDP``IPPROTO_SCTP`**

 **（来自[开发中心 - 桌面 - TCP/IP 原始套接字](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740548(v=vs.85).aspx)）

您可以相当轻松地创建原始套接字：

```
Socket s = new Socket(ip.AddressFamily, SocketType.Raw, ProtocolType.Ip); 
```

此时由您来构建适当的数据报（如果您没有有关如何执行此操作的文档，这将是一个单独的问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T15:14:42.683

仅当 Load Generator 上存在实际 IP 地址时，LoadRunner 才能欺骗 IP 地址。因此，如果我有 200 个 IP 地址分配给我的主机，那么我可以在这些 IP 地址之间分配我的负载，而不是让成本最低的路由或主要与次要网络接口在操作系统中发挥作用。这不仅适用于 LoadRunner，也适用于其他欺骗性的应用程序性能测试工具，地址需要分配给生成负载的主机。

If you are looking for raw spoofing solutions where the IP address need not be assigned to the host for testing purposes then you might consider network performance testing tools, particularly the chassis-based solutions, from companies such as Spirent and Ixia. These network solutions can also generate tens of thousands of unique bogus MAC addresses to go with the bogus IP addresses if needed.**

# css - 宽度为 100% 的 div，底部响应式 div，不能作为孩子

> ID：12963882
> 
> 赞同：1
> 
> 时间：2012-10-18T21:16:09.993
> 
> 标签：css, html, height

好的，这就是我所拥有的：

```
<div id='wrap' style='width:100%; height:100%;'>
  <div id='parent'style='width:100%; height:100%;'>
  </div>
<div> 
```

现在我想要一个`<div id='downleft'>`which 将是`left: 0; bottom: 0;`.

理想的情况是，如果我只是将其包含`id='downleft'`在`id='parent'`响应式中，例如：

```
<div id='wrap' >
   <div id='parent'>
      <div id='downleft'></div>
   </div>
<div> 
```

**不幸** `parent`的是，它是由脚本处理的，其中的所有内容都不会在最终网站中生成（其中还生成了一些其他 div）。

**问题：**

有没有什么方法 `id='downleft'`可以始终根据`id='parent'`页面左下角的响应高度获得响应位置？

ps：不幸的是 jsfiddle 不支持 height:100% 例如

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:37:49.913

您可以插入在 downleft 之前生成的内容，以便 downleft 始终是父级中的最后一个元素。

例如 `$("#downleft").before(javascript 生成的内容)

`

# xcode - UINavigationController - iOS6 的旋转问题

> ID：12963887
> 
> 赞同：1
> 
> 时间：2012-10-18T21:16:34.457
> 
> 标签：xcode, uinavigationcontroller, ios6, orientation

我将 UINavigationController 子类化如下：

```
-(NSUInteger)supportedInterfaceOrientations {
    return [self.topViewController supportedInterfaceOrientations];
}

-(BOOL)shouldAutorotate {
     return self.topViewController.shouldAutorotate;
} 
```

但是，我无法以与其父级不同的初始方向推动视图控制器。在我的情况下，父视图只是纵向的：

```
-(BOOL)shouldAutorotate {
    return NO;
}
-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

但我希望推送的视图仅是横向的 - 它只会在手动更改设备的方向后才会如此。

```
-(BOOL)shouldAutorotate {
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
} 
```

我非常感谢任何人指出我正确的方向。（到目前为止，我只有一个 hacky 解决方案......）

* * *

编辑：

以下显示了我如何启动子类 UINavigationController

```
PortraitView *vc = [[PortraitView alloc] init];
    SubClassedNav *navController = [[SubClassedNav alloc] initWithRootViewController:vc];
    [navController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentViewController:navController animated:YES completion:nil]; 
```

以及我随后如何推动新观点：

```
LandscapeView *vc = [[LandscapeView alloc] init];
    [[self navigationController] pushViewController:vc animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:09:31.240

仔细检查您`[window setRootViewController:controller]`在 AppDelegate 中的设置。

# c++ - 在 C++ 中读取文件时跳过 EOF

> ID：12963901
> 
> 赞同：4
> 
> 时间：2012-10-18T21:17:29.043
> 
> 标签：c++, file-io, eof, getline

每当我在使用 getline() 读取 C++ 中的文件时遇到替代字符[http://en.wikipedia.org/wiki/Substitute_character](http://en.wikipedia.org/wiki/Substitute_character)时，它会被解释为 EOF，因此我无法继续阅读以获取整个文件内容。所以我的问题是，我怎样才能跳过替代字符并读取文件的内容，直到“真正的”EOF？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:21:54.393

以二进制模式而不是文本模式打开文件。如果您正在使用`fopen`，请以其中一种模式打开它`"b"`，例如`"rb"`. 如果您使用的是 C++对象，请使用标志`ifstream`打开它。`ios::binary`

例如：

```
// C method
FILE *f = fopen("filename", "rb");

// C++ method
std::ifstream f("filename", std::ios::in | std::ios::binary); 
```

# c# - 在asp.net中绑定到gridview之前无法修改数据集

> ID：12963903
> 
> 赞同：0
> 
> 时间：2012-10-18T21:17:30.160
> 
> 标签：c#, asp.net, datatable, dataset

在将数据集绑定到网格视图之前，我需要修改它。
当我浏览完整的代码块并将鼠标悬停在 dsEmployeeOrg 上时，该记录似乎没有被修改。我在这里想念什么？

我的代码是：

```
 DataSet dsEmployeeOrg = eCorporateStaffMgr.GetEmployeeAccessLevel(oEmp);
                DataTable dt = dsEmployeeOrg[0];

                string sManagerID = "";
                string sSupervisorID = "";
                string sEmployeeID = "";

                for (int i = 0; i < dsEmployeeOrg.Tables[0].Rows.Count; i++)
                {
                    sManagerID = dt.Rows[i].ItemArray[3].ToString().Trim();
                    sSupervisorID = dt.Rows[i].ItemArray[4].ToString().Trim();
                    sEmployeeID = dt.Rows[i].ItemArray[5].ToString().Trim();

                    if ((sManagerID.ToString().Trim() != sSupervisorID.ToString().Trim()) && (sManagerID.ToString().Trim() != sEmployeeID.ToString().Trim()))
                    {
                        if (sSupervisorID.ToString().Trim() == sEmployeeID.ToString().Trim())
                        {
                            // This is a Supervisor record
                            dt.Rows[i].ItemArray[2] = "1111";
                        }
                        else if (sSupervisorID.ToString().Trim() != sEmployeeID.ToString().Trim())
                        {
                            //This is a Employee record
                            dt.Rows[i].ItemArray[2] = "0000";
                        }
                    }
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:07:01.703

请修改您的代码如下

```
DataSet dsEmployeeOrg = eCorporateStaffMgr.GetEmployeeAccessLevel(oEmp);
DataTable dt = dsEmployeeOrg[0];
string sManagerID = "";
string sSupervisorID = "";
string sEmployeeID = "";

for (int i = 0; i < dsEmployeeOrg.Tables[0].Rows.Count; i++)
{
   sManagerID = dt.Rows[i].ItemArray[3].ToString().Trim();
   sSupervisorID = dt.Rows[i].ItemArray[4].ToString().Trim();
   sEmployeeID = dt.Rows[i].ItemArray[5].ToString().Trim();

   if ((sManagerID.ToString().Trim() != sSupervisorID.ToString().Trim()) && (sManagerID.ToString().Trim() != sEmployeeID.ToString().Trim()))
   {
       if (sSupervisorID.ToString().Trim() == sEmployeeID.ToString().Trim())
       {
          // This is a Supervisor record
          dt.Rows[i][2] = "1111";
       }
       else if (sSupervisorID.ToString().Trim() != sEmployeeID.ToString().Trim())
       {
          //This is a Employee record
          dt.Rows[i][2] = "0000";
       }
   }
} 
```

# php - 致命错误：调用未定义的方法 Zend_XmlRpc_Value::getGenerator() magento

> ID：12963908
> 
> 赞同：1
> 
> 时间：2012-10-18T21:17:52.227
> 
> 标签：php, xml, zend-framework, magento

当出现问题时，我正在升级 magento，现在当我尝试登录管理员时，我无法登录到 magento 的后端管理员，并且出现以下错误

```
Fatal error: Call to undefined method Zend_XmlRpc_Value::getGenerator() in /home/boutique/public_html/app/code/core/Zend/XmlRpc/Request.php on line 413 
```

并且各行的代码是

```
/**
     * Create XML request
     *
     * @return string
     */
    public function saveXml()
    {
        $args   = $this->_getXmlRpcParams();
        $method = $this->getMethod();

        $generator = Zend_XmlRpc_Value::getGenerator();
        $generator->openElement('methodCall')
                  ->openElement('methodName', $method)
                  ->closeElement('methodName'); 
```

我不明白为什么会发生这个问题，我尝试从新下载的 magento 中替换 request.php 和 response.php 文件。

身体可以帮助我吗？为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:40:43.887

您安装的 PHP 和 Magento 有一些问题 - 由于某种原因，被实例化的`Zend_XmlRpc_Value`对象不包含`getGenerator`方法。该对象的类通常定义在

```
lib/Zend/XmlRpc/Value.php 
```

但是，可能有一个类覆盖在

```
app/code/core/Zend/XmlRpc/Value.php
app/code/community/Zend/XmlRpc/Value.php
app/code/local/Zend/XmlRpc/Value.php 
```

您的系统也可能在 PHP 包含路径的某个位置安装了另一个版本的 zend 框架。

# javascript - 使用带有静态 JSON 的 Backbone.js 模型/集合

> ID：12963912
> 
> 赞同：1
> 
> 时间：2012-10-18T21:18:03.723
> 
> 标签：javascript, backbone.js, backbone.js-collections

我正在尝试通过深入研究并构建一个简单的“问题”应用程序来学习 Backbone，但我一直在拼命想弄清楚如何正确使用模型和/或集合。我已将代码添加到我迷路的地方。我能够让集合拉入 JSON 文件（执行“var list = new QuestionList; list.getByCid('c0') 似乎返回第一个问题），但我不知道如何更新使用该模型，将当前模型用于视图数据，然后单击“下一步”按钮时如何使用下一个问题更新模型。

我在这里尝试的是一个简单的应用程序，它在加载时提取 JSON，显示第一个问题，然后在按下按钮时显示下一个问题。

谁能帮我把这些点联系起来？

**/questions.json**

```
[
  {
    questionName: 'location',
    question: 'Where are you from?',
    inputType: 'text'
  },
  {
    questionName: 'age',
    question: 'How old are you?',
    inputType: 'text'
  },
  {
    questionName: 'search',
    question: 'Which search engine do you use?'
    inputType: 'select',
    options: {
      google: 'Google',
      bing:   'Bing',
      yahoo:  'Yahoo'
    }
  }
] 
```

**/app.js**

```
var Question = Backbone.Model.Extend({});
var QuestionList = Backbone.Collection.extend({
  model: Question,
  url: "/questions.json"
});

var QuestionView = Backbone.View.extend({
  template: _.template($('#question').html()),
  events: {
    "click .next" : "showNextQuestion"
  },
  showNextQuestion: function() {
    // Not sure what to put here? 
  },
  render: function () {
    var placeholders = {
      question: this.model.question, //Guessing this would be it once the model updates
    }
    $(this.el).html(this.template, placeholders));
    return this;
  }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:24:36.267

很明显，在当前设置中，视图需要访问比其单个模型更大的范围。我可以看到这里有两种可能的方法。

1) 将集合（使用`new QuestionView({ collection: theCollection })`）而不是模型传递给`QuestionView`. 维护一个索引，您可以在单击事件上增加并重新呈现该索引。这应该类似于：

```
var QuestionView = Backbone.View.extend({

  initialize: function() {
     // make "this" context the current view, when these methods are called
     _.bindAll(this, "showNextQuestion", "render");
     this.currentIndex = 0;
     this.render();
  }      
  showNextQuestion: function() {
     this.currentIndex ++;
     if (this.currentIndex < this.collection.length) {
         this.render();
     }
  },
  render: function () {
    $(this.el).html(this.template(this.collection.at(this.currentIndex) ));
  }
}); 
```

2）设置[路由器](http://backbonejs.org/#Router)并调用`router.navigate("questions/" + index, {trigger: true})`点击事件。像这样的东西：

```
var questionView = new QuestionView( { collection: myCollection });

var router = Backbone.Router.extend({
    routes: {
        "question/:id": "question"
    },

    question: function(id) {
        questionView.currentIndex = id;
        questionView.render();
    }
}); 
```

# c# - 解析和验证数字和日期时间输入

> ID：12963914
> 
> 赞同：1
> 
> 时间：2012-10-18T21:18:07.200
> 
> 标签：c#, validation, parsing, datetime

所以我正在制作一个带有单独班级的窗口表格，用于学生详细信息和国际学生。我需要验证我的学生/国际学生的年级分数是否大于 0 且小于 100。

我还想让出生日期显示为 dd/mm/yyyy，但目前它显示为那个加上时间。

我将在下面包含代码：

先出生日期

```
student1.DateOfBirth = DateTime.Parse(txtDateofbirth.Text).Date;

if (string.IsNullOrEmpty(txtDateofbirth.Text))
{
    MessageBox.Show("Please enter a DoB");
} 
```

现在是年标记

```
try // Trying to do the thing in the curly braces
{
    student1.YearMark = Int32.Parse(txtYearMark.Text);
}
catch (Exception) // If it doesn't work skip the crash and print this
{
    MessageBox.Show("The Year mark must be a number and can't be empty");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:25:31.413

我建议您使用 DateTimePicker 控件输入日期和 NumericUpDown 控件输入 YearMark，而不是使用 TextBox。

DateTimePicker 控件允许您定义显示格式并将条目限制在某个范围内。如果我没记错的话，Value 属性的类型是 DateTime，因此您不必解析字符串。

NumericUpDown 控件允许您定义允许值的范围。Value 属性是 Decimal 类型，但您可以安全地将其转换为 Int32。这比解析字符串要安全得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:29:25.670

你也可以做一个简单的方法来测试这里也是一个例子

```
 IsDate(txtYearMark.Text);
    public static bool IsDate(string date)
    {
        DateTime Temp;
        return(DateTime.TryParse(date, out Temp)&&date.Length>=10)
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:25:09.107

1.  您需要获取 DateTime 对象和当前日期之间的差异，因此您可以创建一个 TimeSpan 对象并获取它的“Years”属性。

    TimeSpan diff = new DateTime().subtract(dateOfBirth);

    if(diff.Years > 0 && diff.Years < 100) isValid = true;

2.  要以任何所需格式显示 DateTime 对象，请将 ToString() 方法与格式化程序一起使用。

    要解决您的确切问题，请尝试以下操作：

    dateOfBirth.ToString("dd/MM/yyyy"); //大写MM表示月份，小写MM表示分钟

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T21:20:59.687

日期函数的重载`ToString()`将允许您指定所需的确切格式。

```
Date l_date = Date.Today();
l_date.ToString( "dd/MM/yyyy" ); 
```

有关可用格式的更多信息，请访问文档：http:
[//msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

可以通过函数将a 解析`string`为 an ，如下所示：`int`[`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)

```
string x = "32";
int y = -1;
if ( !x.TryParse( x, out y ) ){
    // The parse failed
} 
```

然后您可以测试您的 int 的值以确定它是否在所需的范围内。

```
if ( y > 0 && y <= 100 ){
    // Do something
} 
```

# javascript - onTouch 事件阻止使用其他控件

> ID：12963915
> 
> 赞同：1
> 
> 时间：2012-10-18T21:18:13.490
> 
> 标签：javascript, ios, touch

在研究了我在代码中看到的问题后，我一直在使用[Padilicious触摸事件脚本。](http://padilicious.com/code/touchevents/index.html)我可以使用 Padilicious 脚本重新创建自己的问题。我只是在 Padilicious 网站上提供的这个示例中添加一个带有输入的表单。

当我在 iPad 或 Mac 上的 iPhone 模拟器上加载它时，我无法将注意力集中在文本框上。在我的代码中，这通过阻止访问站点内容中的 div 和其他控件具有相同的效果。就好像包含 ontouch 事件的 div 掩盖了其中的所有其他内容。

这是一个 jsfiddle，显示了我添加的内容。[http://jsfiddle.net/Da8yj/](http://jsfiddle.net/Da8yj/)

如何实现这种滑动功能并保持其他控件的当前功能？

# css - 包含长字符串的列的 CSS 表格对齐问题

> ID：12963918
> 
> 赞同：0
> 
> 时间：2012-10-18T21:18:30.597
> 
> 标签：css

我有一个问题：我的表格显示完美，没有“分隔符”行。此行服务器将我的表的两个部分分开。此行中的列 (colspan=2) 包含一个长字符串，描述它下面的表格部分。不幸的是，这个长字符串的存在会导致表格的其余部分错位。如何在调整表格大小时告诉表格有效地忽略此列，或者我该如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:21:57.860

使用`colgroup`和`col`标签（以这种方式设置列宽）。然后添加`table-layout: fixed;`到表的 CSS 中：

```
<table>
    <colgroup>
        <col style="width:25%" />
        <col style="width:25%" />
        <col style="width:25%" />
        <col style="width:25%" />
    </colgroup>
    <thead>
        <!-- thead stuff here -->
    </thead>
    <tbody>
        <!-- tbody stuff here -->
    </tbody>
</table>

table { table-layout: fixed; } 
```

# java - 出现错误 StringIndexOutOfBoundsException：字符串索引超出范围

> ID：12963919
> 
> 赞同：-1
> 
> 时间：2012-10-18T21:18:36.407
> 
> 标签：java

我正在尝试构建一个矩阵，其行和列具有诸如“aaa”之类的值以用于对齐目的。但是当我运行它时，我得到一个错误。下面是我的代码

```
public class compute_matrix {
  static String seq1="aaa";
  static String seq2="aaa";
  static int[][] matrix;
  static int max_row;
  static int max_col;
  private static int match_reward=1;
  private static int mismatch_penalty= -1;
  private static int gap_cost= -1;
  private static boolean case_sensitive;

  private static boolean isCaseSensitive() {
    return case_sensitive;
  }

  private static int max(int ins, int sub, int del, int i) {
    if (ins > sub) {
        if (ins > del) {
            return ins > i? ins : i;
        } else {
            return del > i ?del : i;
        }
    } else if (sub > del) {
        return sub> i ? sub : i;
    } else {
        return del > i ? del : i;
    }
}

 protected char sequence[];

   public static void main(String args[]){
    int r, c, rows, cols, ins, sub, del, max_score;

    rows = seq1.length()+1;
    cols = seq2.length()+1;

    matrix = new int [rows][cols];

    // initiate first row
    for (c = 0; c < cols; c++)
        matrix[0][c] = 0;

    // keep track of the maximum score
    max_row = max_col = max_score = 0;

    // calculates the similarity matrix (row-wise)
    for (r = 1; r < rows; r++)
    {
        // initiate first column
        matrix[r][0] = 0;

        for (c = 1; c < cols; c++)
        {
                        sub = matrix[r-1][c-1] + scoreSubstitution(seq1.charAt(r),seq2.charAt(c));
            ins = matrix[r][c-1] + scoreInsertion(seq2.charAt(c));

            del = matrix[r-1][c] + scoreDeletion(seq1.charAt(r));

            // choose the greatest
            matrix[r][c] = max (ins, sub, del, 0);

            if (matrix[r][c] > max_score)
            {
                // keep track of the maximum score
                max_score = matrix[r][c];
                max_row = r; max_col = c;
            }
        }
    }
     }

private static int scoreSubstitution(char a, char b) {
   if (isCaseSensitive())
        if (a == b)
            return match_reward;
        else
            return mismatch_penalty;
    else
        if (Character.toLowerCase(a) == Character.toLowerCase(b))
            return match_reward;
        else
            return mismatch_penalty;
}

private static int scoreInsertion(char a) {
 return gap_cost;
}

private static int scoreDeletion(char a) {
    return gap_cost;
}
public char charAt (int pos)
{
    // convert from one-based to zero-based index
    return sequence[pos-1];
}

  } 
```

我的错误是显示这个

```
 Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 3
    at java.lang.String.charAt(String.java:695)
    at compute_matrix.main(compute_matrix.java:67) 
```

Java 结果：1

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T21:21:29.700

```
 rows = seq1.length()+1;
    cols = seq2.length()+1;

    matrix = new int [rows][cols]; 
```

然后：

```
 for (c = 1; c < cols; c++)
    {
   //when c == cols-1, it is also `seq2.length()`
   //the access to seq2.charAt(c) will cause this exception then.
                    sub = matrix[r-1][c-1] + scoreSubstitution(seq1.charAt(r),seq2.charAt(c));
        ins = matrix[r][c-1] + scoreInsertion(seq2.charAt(c));

        del = matrix[r-1][c] + scoreDeletion(seq1.charAt(r)); 
```

在上面的循环中，当`c == cols-1`, 也是时`seq2.length()`，访问`seq2.charAt(c)`就会导致这个异常。

您将行数和列数初始化为`length() + 1`，而稍后您从 0 迭代到 length （包括），而字符串仅包含`length()`字符 - 从 0 到 n 不包括。

如果您过去是 C 程序员 - 我假设您期望`\0`字符串末尾有一个终止符。在java中你没有这些——因为`String`是一个对象——你可以保存一个字段来指示它的确切长度。意思是字符串中的最后一个字符，实际上是那里的最后一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:59:56.153

I refactored your code into more canonical java.

The things I've changed:

*   The class is now called `SimilarityMatrix`, a more appropriate, self documenting name
*   variable declarations now happen where they get used as opposed to at the top of main
*   The work is now done in an instance of the class rather than the main method
*   I used the built in `Math.max(int, int)` instead of rolling my own
*   I removed a lot of unnecessary nested if statements. Java's short circuit evaluation helps here
*   Since both `r` and `c` as well as `r+1` and `c+1` are used frequently in your calculation loop, I track both
*   I removed many of the dependencies on static state (made many things instance variables)
*   Static state that remains is all final now (I made them constants)
*   Used more java-y variable names (java people really like their camel case)

```
public class SimilarityMatrix
{
    public static final int matchReward = 1;
    public static final int mismatchPenalty = -1;
    public static final int gapCost = -1;

    private int[][] matrix;
    private int maxRow = 0;
    private int maxCol = 0;
    private boolean caseSensitive = false;

    SimilarityMatrix(String s1, String s2, boolean dontIgnoreCase)
    {
        this(s1, s2);
        caseSensitive = dontIgnoreCase;
    }

    SimilarityMatrix(String s1, String s2)
    {
        int rows = s1.length() + 1;
        int cols = s2.length() + 1;
        matrix = new int[rows][cols];

        int max_score = 0;

        for (int x = 0; x < cols; x++)
        {
            matrix[0][x] = 0;
            matrix[x][0] = 0;
        }

        for (int r = 0, rp1 = 1; rp1 < rows; ++r, ++rp1)
        {
            for (int c = 0, cp1 = 1; cp1 < rows; ++c, ++cp1)
            {
                int sub = matrix[r][c] + scoreSubstitution(s1.charAt(r), s2.charAt(c));
                int ins = matrix[rp1][c] + scoreInsertion(s2.charAt(c));

                int del = matrix[r][cp1] + scoreDeletion(s1.charAt(r));

                // choose the greatest
                matrix[rp1][cp1] = Math.max(Math.max(ins, sub), Math.max(del, 0));

                if (matrix[rp1][cp1] > max_score)
                {
                    // keep track of the maximum score
                    max_score = matrix[rp1][cp1];
                    maxRow = rp1;
                    maxCol = cp1;
                }
            }
        }
    }

    public static void main(String args[])
    {
        SimilarityMatrix me = new SimilarityMatrix("aaa", "aaa");
        System.out.println(me.getMaxRow() + " " + me.getMaxCol());
    }

    private int scoreSubstitution(char a, char b)
    {
        if ((a == b && caseSensitive) || Character.toLowerCase(a) != Character.toLowerCase(b))
            return matchReward;
        else
            return mismatchPenalty;
    }

    public int getMaxRow()
    {
        return maxRow;
    }

    public int getMaxCol()
    {
        return maxCol;
    }

    private int scoreInsertion(char a)
    {
        return gapCost;
    }

    private int scoreDeletion(char a)
    {
        return gapCost;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:28:25.017

在代码的第 60 行中 `sub = matrix[r-1][c-1] + scoreSubstitution(seq1.charAt(r),seq2.charAt(c));` ，r 的最大值为 4，因此当您查找 seq.charAt(3) 时，什么也没有，因此它显示索引超出范围

# excel - 防止 Excel 将“True”和“False”默认为布尔值

> ID：12963923
> 
> 赞同：4
> 
> 时间：2012-10-18T21:18:51.797
> 
> 标签：excel, vba

我的 Excel 文档将所有`True`和`False`字符串默认为`TRUE`and `FALSE`，然后将其视为布尔值，这在我的宏中失败了。

我可以`right click -> format cells -> select text`，但我不知道用户会使用哪些单元格，所以这个方法行不通。

是否有禁用此自动转换的全局方法或使用 VBA 的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T17:35:28.503

通过另一种方法解决了问题，并将所有单元格格式化为`Text`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:38:52.783

制作第二列。使用`=IF(A1,"T","F")`（其中 A1 是布尔值）并改用新列。

我不知道你的宏是如何工作的，但你也许可以在你的宏中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T21:39:49.120

如果单元格中没有实际的公式，则检查`Formula`属性（而不是`Value`属性），您应该得到一个包含“True”或“False”的字符串（视情况而定）

如果单元格中有公式，则使用`CStr`将检查`Value`属性的结果从布尔值更改为字符串值 - 请参阅[http://msdn.microsoft.com/en-us/library/gg264697.aspx](http://msdn.microsoft.com/en-us/library/gg264697.aspx)

# objective-c - iOS - 在一个设备上支持多个用户帐户的应用程序中的可更新应用程序内购买

> ID：12963930
> 
> 赞同：6
> 
> 时间：2012-10-18T21:19:41.463
> 
> 标签：objective-c, ios, in-app-purchase

## 背景

我的 iOS 应用程序支持多个用户帐户，但用户一次只能登录一个帐户。该应用程序还提供订阅服务（以可更新的应用内购买形式的“信用”）。

我无法将应用内订阅与购买它们的特定用户帐户分开。如果用户在帐户一上购买积分然后退出，而另一个用户登录帐户二（在同一设备上），则`SKPaymentQueue`仍然继续从帐户一购买的续订过程（并因此触发解锁逻辑那些学分）。

## 问题

对于支持多个帐户的应用，处理可更新应用内购买的正确方法是什么？有什么办法可以防止购买“溢出”到同一设备上的其他帐户中？还有什么需要注意的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T21:28:18.683

我很确定你想要做的事情是不可能的。应用内购买与购买它们的 Apple ID 相关联。这意味着，如果用户登录到已购买订阅的 Apple ID，您总是会被告知它可用。一个用户不能多次购买同一个订阅。唯一的方法是在他们更改您的应用程序中的用户时强制更改 Apple ID，我几乎可以肯定您不能这样做。

# html5-video - 播放前的 HTML5 视频缓冲

> ID：12963934
> 
> 赞同：0
> 
> 时间：2012-10-18T21:19:56.737
> 
> 标签：html5-video

我有一个 html 页面，以及我的代码中的视频链接。我可以在打开页面后立即开始缓冲视频，并仅在视频完全缓冲时显示“播放”按钮吗？重要的是，我应该在加载该视频时通过 innerHTML() 动态放置该视频。在此之前，视频标签根本不应该出现在页面上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:53:08.997

对于解决方案，我使用[了 video.js](http://videojs.com/) jquery 插件。

# asp.net - asp.net 数据源详细信息视图和 CRUD 权限

> ID：12963936
> 
> 赞同：1
> 
> 时间：2012-10-18T21:20:03.723
> 
> 标签：asp.net, datasource

感谢您的任何想法。此问题涉及 ASP.NET 4.0 Web 应用程序。

然后，DetailsView 使用 ObjectDataSource（尽管任何解决方案都应适用于任何 ASP.NET DataSource 控件）进行 CRUD 操作。

用户有权查看所有记录的详细信息，但只能创建或修改与自己部门相关的单个记录。

显然我可以轻松修改列表视图以显示/删除相应的按钮

```
if (!_canModifySelectedWard)
{
   dptDetailView.AutoGenerateEditButton = false;
   dptDetailView.AutoGenerateInsertButton = false;
   dptDetailView.AutoGenerateDeleteButton = false;
} 
```

但这只是删除按钮。有没有一种巧妙的方法来禁用编辑/插入/删除功能的能力？我认为一旦用户可以访问此页面，恶意请求极不可能发生，但删除功能似乎更好的做法，而不仅仅是 UI 元素。

我可以将关联的 objectdatasource 的 InsertMethod 等设置为 null，但这几乎看起来像是一个 hack。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:50:11.300

您的对象数据源绑定到一个类，该类负责提供对象数据源请求的数据。这是应执行额外检查以确保不会发生未经授权的数据访问的地方。从用户体验的角度来看，隐藏按钮是一个好主意，但您应该始终确保您的业务规则得到执行。

抱歉，我无法提供更详细的帮助。也许如果你能更详细地描述你正在做的事情，或者发布一些有帮助的代码。

干杯。

# python - Tor 在 python 中获得始终唯一的 IP

> ID：12963937
> 
> 赞同：0
> 
> 时间：2012-10-18T21:20:07.280
> 
> 标签：python, proxy, unique, tor

我正在尝试从 python 中的 tor 获取唯一 IP，但有时我会得到旧 IP，我已经尝试了 50 次，延迟时间为 5 秒，但它仍然给我同样的时间，从 50 次尝试中我得到了 19 次重复和31 独特，但我想一直保持独特，或者是有限的？

我正在使用来自 torproject.org 的 Vidalia Bundle。

我将输入我找到/修改的代码：

```
import urllib2
from TorCtl import TorCtl
import time

for i in range(0, 50):
    print "case "+str(i+1)
    conn = TorCtl.connect(passphrase="password11")
    conn.sendAndRecv('signal newnym\r\n')
    conn.close()
    proxy_support = urllib2.ProxyHandler({"http" : "127.0.0.1:8118"})
    urllib2.install_opener(opener)
    print(urllib2.urlopen("http://www.ifconfig.me/ip").read())
    time.sleep(5) 
```

让我知道是否有人可以提供帮助，我也想知道是否可以仅从某个国家/地区获取 IP，并且是唯一的 :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T00:42:24.370

尽管 Tor 项目建议不要明确选择退出节点（甚至可能在未来版本中删除该功能），但该功能确实存在。可以在 Tor 项目的[官方常见问题解答](https://www.torproject.org/docs/faq#ChooseEntryExit "如何显式控制退出节点的使用")中找到简要概述。

您要查找的行是“ExcludeExitNodes $fingerprint,$fingerprint,...”。通过将此行放入您的 torrc 文件中，并在使用它们时添加您使用的每个出口节点的指纹，您可以确保您的 IP 对于与 Tor 的每个新连接都是新鲜的。

至于选择你的国家，那就简单多了。只需使用“ExitNodes {cc}”（也在您的 torrc 中），其中 cc 是您想要 IP 的国家/地区的两个字符 ISO3166 国家/地区代码。

# css - 页脚不随盒子高度移动

> ID：12963944
> 
> 赞同：0
> 
> 时间：2012-10-18T21:20:41.180
> 
> 标签：css, html, height, footer

如您所见[http://jsfiddle.net/eZt4J/](http://jsfiddle.net/eZt4J/)我有 6 个盒子，我想知道如何让页脚位于它们的底部。我希望页脚粘在页面底部。

我使用的模板是基于样板的。请注意，`#footer`位于关闭`</div>`时间之外`#container`

**CSS：**

```
.w960 { width:960px; margin:auto; }
#holder{width:100%;height:600px;}
#container{width:960px;margin:0px auto 40px auto; background:red;}
.third{width:260px;height:350px;float:left;}
.third li {font-size:12px;}
#first-prac, #second-prac, #fourth-prac, #fifth-prac{margin-right:80px;}
.yellow h2{line-height: 36px;border-top: 3px solid #FFB400;color: #FFB400;}
.dark h2{line-height: 36px;border-top: 3px solid #444;color: #444;}
#footer{width:100%;clear:both; height:66px;background:#2d2d2f; bottom:0;}
#footerHolder{width:960px;margin:auto;}
.foot {color:#B8BBC1;font-size:11px;margin-top:30px;}
.foot a{color:#fff;}​ 
```

**HTML：**

```
 <div id="holder">
        <div id="first-prac" class="third left yellow">
            <h2>
                Text Heading
            </h2>
            <p>
                Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text
            </p>
        </div>
        <div id="second-prac" class="third left dark">
            <h2>
                Text Heading
            </h2>
            <p>
                Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text
            </p>
        </div>
        <div id="third-prac" class="third left yellow">
            <h2>
                Text Heading
            </h2>
            <p>
                Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text
            </p>
        </div>
        <div clear="clear"></div>
        <div id="fourth-prac" class="third left dark">
            <h2>
                Text Heading
            </h2>
            <p>
                Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text
            </p>
        </div>
        <div id="fifth-prac" class="third left yellow">
            <h2>
                Text Heading
            </h2>
            <p>
                Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text
            </p>
        </div>
        <div id="six-prac" class="third left dark">
            <h2>
                Text Heading
            </h2>
            <p>
                Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text Text
            </p>
        </div>
    </div>
<div clear="clear"></div>
        <div id="footer" class="w960">
            <div id="footerHolder">
                <div class="foot left"><a href="#">By</a> | &copy; {{ helper:date format="Y" }} | {{ settings:site_name }}</div>
            </div>
        </div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:35:04.013

如果通过“不随盒子高度移动”您指的是内容超出页脚容器，您应该能够添加`overflow: hidden`到您的#container CSS。这将清除#container 中的浮动项目并将页脚推过它们。

然而，这将缩短您的`.third`容器，因为您已经`height: 350px`为该类定义了一个静态。如果您希望列高灵活，只需`height`从此类中删除。

与溢出一样：http: [//jsfiddle.net/eZt4J/2/](http://jsfiddle.net/eZt4J/2/)

删除 .third 静态高度：http: [//jsfiddle.net/eZt4J/3/](http://jsfiddle.net/eZt4J/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:23:08.780

谷歌“粘性页脚”。这是一个很好的例子：

[http://css-tricks.com/snippets/css/sticky-footer/](http://css-tricks.com/snippets/css/sticky-footer/)

# c# - mvc4 应用程序和 mongo db 之间的集成

> ID：12963945
> 
> 赞同：1
> 
> 时间：2012-10-18T21:20:44.100
> 
> 标签：c#, .net, asp.net-mvc, mongodb, nosql

我目前正在研究 asp.net mvc4 Web 应用程序。应用程序的一部分，用户可以登录和浏览站点等。站点的数据存储在 sql server 数据库中，包含用户信息等。

该网站的一项新功能是让所有用户都可以对网站上显示的特定产品添加评论。由于可能有数十万客户和数千种产品，因此数据量很大。

所以我已经开始寻找这个数据的 NoSql 选项，而不是将它存储在关系 sql server 数据库中。我一直在看Mongo Db。我的第一个问题，这是我采取的正确方法吗？

下一个主题，c#/.net 与 mongo 数据库集成的难易程度。我以前没有使用过这个，所以我在这方面的知识很差。理想情况下，我会根据特定的产品标识符查询（为了正确的术语）mongo db 以获取评论。我想我可以编写一个查询样式来获取这些数据。

我的下一个问题是关于 mongo db 的冗余。使用 sql server，如果主数据库服务器出现问题，我有一个故障转移服务器。mongo 是否有类似的概念或它是如何工作的？我的考虑是让 mongo 与 sql server 数据库在同一台服务器上运行。mongo db 中的数据不会是关键任务，但 sql server 中的数据是。我的 Web 应用程序将在负载平衡环境中的多台服务器上运行。

mongo db 可以轻松移动到另一台服务器吗？IE。它的扩展程度如何。甚至可以将其中的数据复制到另一个 mongo db 吗？

我很欣赏我的问题是初学者标准，但我目前正在研究这个主题，所以帮助会很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:41:25.490

只要您配置了一些缓存，Sql server 就足以容纳评论。Sql Server 的优点是外键的数据完整性以及查询能力。

但是，在 C# 中使用 Mongo 并不是什么大问题。有一个轻微的学习曲线，但这是学习任何新技术。

**连接和使用 MongoDB**

MongoDB 有官方驱动程序和 NuGet 包供您使用。[http://www.mongodb.org/display/DOCS/CSharp+Language+Center](http://www.mongodb.org/display/DOCS/CSharp+Language+Center)以获取更多信息。

**冗余**

Mongo 支持副本集，您的第二台服务器将模仿来自第一台服务器的所有数据。可以在此处找到有关设置的信息：[http](http://docs.mongodb.org/manual/tutorial/deploy-replica-set/) ://docs.mongodb.org/manual/tutorial/deploy-replica-set/应该注意的是，MongoDB 中的查询与 Sql Server 中的查询有点不同。

现在我个人在我的一个企业应用程序中使用 mongoDB，但我会根据经验说：如果你不是绝对需要使用它，那么坚持使用一个数据库引擎可能会更好。大多数情况下，您只需要管理一个数据库引擎。不过只是我的看法。也许redis用于缓存？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T18:31:02.927

事情是在mongodb设计中你会做一种非规范化......

在我看来，成千上万的用户案例你的 sql 服务器就足够了......在你的数据库设计中做更多的非规范化并尝试实现良好的缓存设计......

你说你是 mongodb 的新手......所以会有一个学习曲线......放更多的 rams 和 cpus，直到你拥有数百万用户......

为了安全地使用 mongodb，您将需要至少 3 台服务器

另请检查此链接

[这是 mongodb 允许分片/缩放的最佳最小设置吗？](https://stackoverflow.com/questions/5684993/is-this-the-optimal-minimum-setup-for-mongodb-to-allow-for-sharding-scaling)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:46:55.837

如果您没有硬件内存问题（您可以购买大量内存，您将需要）Mongo 可以成为您的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-08T05:38:22.313

尝试这个

[使用 MongoDB 的 MVC 应用程序 - 第 1 部分](http://www.c-sharpcorner.com/UploadFile/58e23e/mvc-application-with-mongodb-part-1/)

[使用 MongoDB 的 MVC 应用程序 - 第 2 部分](http://www.c-sharpcorner.com/UploadFile/58e23e/mvc-application-with-mongodb-part-2/)

[在 ASP.Net MVC4 中开始使用 MongoDB](http://www.c-sharpcorner.com/uploadfile/370e35/getting-started-with-mongodb-and-asp-net-mvc4-day-3/)

# apache - 防止网站出现任何外部链接

> ID：12963949
> 
> 赞同：0
> 
> 时间：2012-10-18T21:20:58.327
> 
> 标签：apache, .htaccess, dokuwiki

我正在使用 DokuWiki，因为我们已尝试尽可能多地保护它，以确保它在我们服务器上的位置保密。因此，我们希望确保在任何会显示我们基础设施位置的页面上都不能点击任何链接。有什么方法可以使用 DokuWiki 配置此限制，或者是否有已知的方法可以通过第三方传递 URL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:55:10.503

您是否尝试使用 .htaccess 和 .htpasswd 保护站点？对于其他人不进入您的网站是一个很好的解决方案。

如果网站在线，您应该包含 robots.txt 以避免爬虫对其进行索引

```
User-agent: *
Disallow: / 
```

希望我能帮助你

# sql-server - 在 SQL Server 中选择 XML 元素

> ID：12963951
> 
> 赞同：9
> 
> 时间：2012-10-18T21:21:00.260
> 
> 标签：sql-server, xpath, xquery

我有一些需要使用 SQL Server 2008 解析的 XML。我想我已经接近了我想要的，但我没有正确的语法（我相信）。

我有以下内容：

```
DECLARE @doc XML
SET @doc = '<ROOT>          
    <InvoiceDetail>
        <OrderId>1000000</OrderId>
        <OrderTypeId>2</OrderTypeId>
        <Id>2000</Id>
        <InvoiceItems>
            <InvoiceItem>
                <LineId>1</LineId>
                <Cd>123456</Cd>
                <Description>Item 1</Description>
                <Quantity>1</Quantity>
                <UnitPrice>99.990000</UnitPrice>
            </InvoiceItem>
            <InvoiceItem>
                <LineId>2</LineId>
                <Cd>234567</Cd>
                <Description>Item 2</Description>
                <Quantity>1</Quantity>
                <UnitPrice>89.990000</UnitPrice>
            </InvoiceItem>
        </InvoiceItems>
    </InvoiceDetail>
    <InvoiceDetail>
        <OrderId>1200000</OrderId>
        <OrderTypeId>1</OrderTypeId>
        <Id>3000</Id>
        <InvoiceItems>
            <InvoiceItem>
                <LineId>1</LineId>
                <Cd>234567</Cd>
                <Description>Item 2</Description>
                <Quantity>1</Quantity>
                <UnitPrice>89.990000</UnitPrice>
            </InvoiceItem>
            <InvoiceItem>
                <LineId>2</LineId>
                <Cd>345678</Cd>
                <Description>Item 3</Description>
                <Quantity>1</Quantity>
                <UnitPrice>79.990000</UnitPrice>
            </InvoiceItem>
        </InvoiceItems>
    </InvoiceDetail>
</ROOT>'

SELECT 
      Invoices.Node.value('@OrderId', 'VARCHAR(10)') 'OrderID'
    , Invoices.Node.value('@Id', 'INT') 'InvoiceId'
    , Items.Cd.value('.', 'VARCHAR(14)') 'ItemId'
FROM 
    @doc.nodes('//InvoiceDetail') Invoices(Node)
    CROSS APPLY Invoices.Node.nodes('./InvoiceItems/InvoiceItem/Cd') Items(Cd) 
```

我得到以下结果：

```
NULL    NULL    123456
NULL    NULL    234567
NULL    NULL    234567
NULL    NULL    345678 
```

我正在尝试获得以下信息：

```
1000000 2000    123456
1000000 2000    234567
1200000 3000    234567
1200000 3000    345678 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T21:34:40.347

抓取元素的语法是：

```
SELECT Invoices.Node.value('(OrderId)[1]', 'VARCHAR(10)') 'OrderID'
    , Invoices.Node.value('(Id)[1]', 'INT') 'InvoiceId'
    , Items.Cd.value('.', 'VARCHAR(14)') 'ItemId'
FROM 
    @doc.nodes('//InvoiceDetail') Invoices(Node)
    CROSS APPLY Invoices.Node.nodes('./InvoiceItems/InvoiceItem/Cd') Items(Cd) 
```

如果没有明确的括号，这似乎也可以工作：

```
Invoices.Node.value('OrderId[1]', 'VARCHAR(10)') 
```

* * *

语法用于属性，而不是 XQuery 中的`@`元素。如果你有

```
<InvoiceDetail title="something"> 
```

然后你就可以使用以下方法查询：

```
SELECT Invoices.Node.value('@title', 'VARCHAR(MAX)') AS Title
FROM @doc.nodes('//InvoiceDetail') Invoices(Node) 
```

这是一篇关于使用[XQuery 值的好文章](http://www.jasonstrate.com/2010/11/xquery-for-the-non-expert-value/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-09T06:57:20.447

以下 SQL 也可以很好地处理您的数据：

```
--  Iterate through each of the "ROOT\InvoiceDetail" records in our XML
SELECT 
    x.Rec.query('./OrderId').value('.', 'nvarchar(2000)') AS 'OrderID',
    x.Rec.query('./Id').value('.', 'nvarchar(2000)') AS 'ID',
    items.cd.query('./Cd').value('.', 'nvarchar(2000)') AS 'ItemID'
FROM @doc.nodes('/ROOT/InvoiceDetail') as x(Rec)
CROSS APPLY x.Rec.nodes('./InvoiceItems/InvoiceItem') Items(Cd) 
```

这给了我们这些结果：

[![在此处输入图像描述](../Images/97182d8ef03b4849c5244f4849f1a50e.png)](https://i.stack.imgur.com/DmoKj.png)

（虽然语法令人困惑，不是吗！）

# android - ActionBarSherlock getCustomView() 在 ICS android 版本之前返回 null

> ID：12963953
> 
> 赞同：0
> 
> 时间：2012-10-18T21:21:14.177
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用 ABS 库开发应用程序。在两个 fragmentActivities 中，我需要在操作栏中使用自定义视图。我的代码在 ICS 和 JB 中完美运行。但是我在姜饼中测试并崩溃了。

我的代码是下一个：

```
public class SearchContactActivity extends SherlockFragmentActivity {

    private EditText searchField;
    private ImageButton searchButton;

    @Override
    protected void onCreate(Bundle arg0) {
        super.onCreate(arg0);
        setContentView(R.layout.search_contacts);
        ActionBar actionBar = getSupportActionBar();
        actionBar.setDisplayHomeAsUpEnabled(true);
        View view = actionBar.getCustomView();//ICS & JB return the View OK, lower versions returns null
        searchField = (EditText) view.findViewById(R.id.editText_search);//here the app crash because view is null
        searchButton = (ImageButton) view.findViewById(R.id.button_search);

    }
} 
```

我的主题 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="Theme.Styled.Search" parent="Theme.Sherlock.Light">
       <item name="actionBarStyle">@style/Widget.Styled.ActionBar.Search</item>
        <item name="android:actionBarStyle">@style/Widget.Styled.ActionBar.Search</item>
    </style>
    <style name="Widget.Styled.ActionBar.Search" parent="Widget.Sherlock.Light.ActionBar">
        <item name="background">@drawable/bg_actionbar</item>
        <item name="android:background">@drawable/bg_actionbar</item>
        <item name="backgroundSplit">@drawable/bg_actionbar</item>
        <item name="android:backgroundSplit">@drawable/bg_actionbar</item>
        <item name="android:titleTextStyle">@style/NoTitleText</item>
        <item name="android:subtitleTextStyle">@style/NoTitleText</item>
        <item name="android:displayOptions">showHome|useLogo|showCustom</item>
        <item name="android:customNavigationLayout">@layout/custom_action</item>
    </style>
</resources> 
```

和我的custom_view：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <EditText
        android:id="@+id/editText_search"
        style="@style/Widget.Styled.EditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/button_search"
        android:ems="10"
        android:hint="@string/hint_search"
        android:inputType="textNoSuggestions"
        android:layout_marginRight="5dp" />

    <ImageButton
        android:id="@+id/button_search"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/editText_search"
        android:layout_alignTop="@+id/editText_search"
        android:layout_alignParentRight="true"
        android:layout_marginRight="5dp"
        android:background="@drawable/button_go_login_xml"
        android:paddingLeft="15dp"
        android:paddingRight="15dp"
        android:src="@drawable/lupa" />

</RelativeLayout> 
```

我的日志猫

```
10-18 18:03:34.259: E/AndroidRuntime(10576): FATAL EXCEPTION: main
10-18 18:03:34.259: E/AndroidRuntime(10576): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.co2fine.client/com.co2fine.client.SearchContactActivity}: java.lang.NullPointerException
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.os.Looper.loop(Looper.java:123)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.ActivityThread.main(ActivityThread.java:3729)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at java.lang.reflect.Method.invoke(Method.java:507)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:874)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:632)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at dalvik.system.NativeStart.main(Native Method)
10-18 18:03:34.259: E/AndroidRuntime(10576): Caused by: java.lang.NullPointerException
10-18 18:03:34.259: E/AndroidRuntime(10576):    at com.co2fine.client.SearchContactActivity.onCreate(SearchContactActivity.java:53)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
10-18 18:03:34.259: E/AndroidRuntime(10576):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
10-18 18:03:34.259: E/AndroidRuntime(10576):    ... 11 more 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T22:10:40.777

尝试添加：

```
<item name="customNavigationLayout">@layout/custom_action</item> 
```

一起去：

```
<item name="android:customNavigationLayout">@layout/custom_action</item> 
```

# asp.net - ASP.NET RequiredFieldValidator 错误消息仅在 IIS 中为红色

> ID：12963954
> 
> 赞同：2
> 
> 时间：2012-10-18T21:21:21.180
> 
> 标签：asp.net, validation

我有一个`RequiredFieldValidator`：

```
<asp:RequiredFieldValidator ID="nameValidator" ControlToValidate="name"
     runat="server" Display="Dynamic" Message="You must input a name"/> 
```

我身体的默认字体颜色是白色。当我在 IIS 中运行我的代码时，错误消息正确应用了以下内联样式：

```
<span style="display: inline; color: Red;">You must input a name</span> 
```

但是，如果我在 Visual Studio 的内置 Web 服务器中运行相同的代码，它不会应用`color: Red`样式并且文本显示为白色：

```
<span style="display: inline;">You must input a name</span> 
```

有谁知道为什么在 IIS 中正确应用了该样式，但在 VS Web 服务器中却没有？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T22:13:47.707

在 Web.Config 中将渲染兼容性设置为 3.5 模式：

页面 controlRenderingCompatibilityVersion="3.5"

# ruby - 如何在 Ruby 中保存 base64 编码的文件？

> ID：12963955
> 
> 赞同：0
> 
> 时间：2012-10-18T21:21:27.140
> 
> 标签：ruby, image, base64

我正在尝试使用 open-uri 从互联网下载图像。这是代码：

```
require 'open-uri'

open('0RB2132__601_K3.jpg', 'wb') do |file|
  file << open('http://luxonline.luxottica.com/luxpics/watermarkedextranet/med?style=0RB2132__601_K3').read
end 
```

但它不能正确保存图像。当我尝试打开它时，程序报告：

```
Error interpreting JPEG image file (Improper call to JPEG library in state 200) 
```

我在 Firefox 中打开了网上的原始图像，经过检查，发现它是 base64 编码的图像。

如何从这个地址[http://luxonline.luxottica.com/luxpics/watermarkedextranet/med?style=0RB2132__601_K3](http://luxonline.luxottica.com/luxpics/watermarkedextranet/med?style=0RB2132__601_K3)下载这张图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:25:25.750

在 OS X 上使用你的脚本，它就像一个魅力。所以你的错误可能在其他地方

# ios - 通过类别添加的方法未被识别

> ID：12963958
> 
> 赞同：2
> 
> 时间：2012-10-18T21:21:51.180
> 
> 标签：ios

我已向 UIApplication 添加了一个类别，但是在运行时出现无法识别的选择器错误。

现在问题是这段代码已经存在并且在另一个项目中已经工作了 10 个月，所以我知道它从根本上没有错。我正在创建一个新项目，并且正在重新使用来自另一个项目的源文件。我已将它们*原封不动*地添加到新项目中，并且它们仍继续在旧项目中工作。所以我知道这段代码应该在新项目中工作。

我不知道为什么完全相同的代码在一个项目中有效，而在另一个项目中无效。

供参考的类别是：

```
@interface UIApplication (NetworkActivity)
- (void)resetNetworkActivity;
@end

The call which fails:
[[UIApplication sharedApplication]  resetNetworkActivity];

2012-10-18 14:19:26.134 IMS-Reference[5946:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIApplication resetNetworkActivity]: unrecognized selector sent to instance 0x1e58e240'
*** First throw call stack: 
```

有什么想法为什么它不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:24:45.533

通常，这是因为您的`*.m`文件不在目标的编译阶段。所以......只需三重检查:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T21:25:02.567

首先检查以确保您确实编译了该类别，我在 XCode 中注意到，当您将文件从一个项目拖到另一个项目时，它们不会被添加到构建阶段的编译源部分。

# iphone - iPhone 子标签 - 导航

> ID：12963960
> 
> 赞同：2
> 
> 时间：2012-10-18T21:21:55.563
> 
> 标签：iphone, design-patterns, user-interface, tabs

我正在为 iPhone 应用程序设计 UI，我们将在底部有一个标准的 4 个标签栏。我们正在考虑以上下文的方式使用相同的标签栏，这样当您点击搜索结果时，底部的选项将更改为与所按下的项目相关。

这种做事方式是否代表了一个巨大的可用性问题，或者如果我们对执行保持一致就可以吗？

底部的 screen1 选项卡导航：ABCD：

-点击搜索结果

- 新页面侧重于结果的详细视图

底部的 screen2 选项卡导航：EFGH：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:55:10.503

不可能在同一个 tabBar 上执行此操作，您可以隐藏 tabBar 并显示另一个带有所需项目的 tabBar，您可以使用以下方法隐藏/显示 tabBar：

```
- (void)hideTabBar:(UITabBarController *) tabbarcontroller
{
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];

    for(UIView *view in tabbarcontroller.view.subviews)
    {
        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 480, view.frame.size.width, view.frame.size.height)];
        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 480)];
        }
    }

    [UIView commitAnimations];   
}

- (void)showTabBar:(UITabBarController *) tabbarcontroller
{       
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.5];
    for(UIView *view in tabbarcontroller.view.subviews)
    {
        NSLog(@"%@", view);

        if([view isKindOfClass:[UITabBar class]])
        {
            [view setFrame:CGRectMake(view.frame.origin.x, 431, view.frame.size.width, view.frame.size.height)];

        } 
        else 
        {
            [view setFrame:CGRectMake(view.frame.origin.x, view.frame.origin.y, view.frame.size.width, 431)];
        }
    }

    [UIView commitAnimations]; 
} 
```

您可以像这样使用这些方法：

```
[self hideTabBar:self.tabBarController];
[self showTabBar:self.tabBarController]; 
```

隐藏 tabBar 时，启动一个新的 tabBar 并将其添加到视图中。

# testing - 我应该使用什么开源软件来编写脚本来测试网站上没有错误？

> ID：12963964
> 
> 赞同：0
> 
> 时间：2012-10-18T21:22:00.670
> 
> 标签：testing, automation

我应该使用什么开源软件来编写脚本来测试网站上没有错误？

如果概述的目标数量有限，我/我们可以自己写一些更好的东西吗？- 但足够灵活，可以接受新规则等。

我们想要的唯一一致的响应是没有错误，句号。

如果有帮助的话，我知道 Java、ASP 和脚本语言。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:24:56.000

Selenium 是一种很好的网站自动化测试工具。它允许宏以及手写脚本。还支持火狐浏览器。

了解Java就足够了。

您可以在[http://seleniumhq.org/上查看](http://seleniumhq.org/)

另一个不错的开源替代品是 HTMLUnit [http://htmlunit.sourceforge.net/](http://htmlunit.sourceforge.net/) 这同样需要 Java 知识

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:36:14.970

您可能需要考虑将[robotframework](http://www.robotframework.org)与[selenium2library](https://github.com/rtomac/robotframework-selenium2library)关键字库结合使用。它使您可以编写非常易于阅读的测试并提供非常好的报告。它与詹金斯很好地集成在一起。Robotframework 是用 python 编写的，可以用 python 扩展。它允许您创建数据驱动测试、BDD 样式测试或更传统的过程测试。

# riak - 在 RIAK mapred 中同时使用二级索引和键过滤器

> ID：12963965
> 
> 赞同：1
> 
> 时间：2012-10-18T21:22:09.840
> 
> 标签：riak

可以在 map reduce 查询中同时使用 sec 索引和键过滤器。像这样的东西

```
*{"inputs":{ "bucket"     :"ignore_bucket1",
    "index"      :"secindex_bin",
    "key"        :"secIndexVal",
    "key_filters":[["and",
                  [["tokenize", "-", 5], ["greater_than_eq", "20120101"]],
                  [["tokenize", "-", 5], ["less_than_eq", "20120112"]]
    ]]
}} 
```

使用 sec 索引获取键列表然后在返回的键上运行 keyfilter 是否有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:28:01.377

据我所知，不可能在输入语句中组合这些，因为它们代表了非常不同的检索键的方式。可以按照您的建议实现这一点，方法是使用二级索引检索初始集（避免扫描所有键），然后将键过滤逻辑实现为映射阶段功能。

另一种可能更快的解决方法可能是创建一个额外的复合二进制二级索引，例如 [secIndexVal]_[date]。如果确保正确排序，您可以对此运行单个二级索引范围查询并获取您在上面指定的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T19:28:43.250

Afaik 你不能通过 HTTP api 做到这一点，

正如 Christian 提到的，您可以使用范围查询，但您不需要替代索引，因为您已经拥有可以`$key`作为索引字段引用的主键索引：

```
olav@nyx ~ (master *%) » curl http://nyx:8098/riak/test/20120931 -d "31\. Sep 2012"
olav@nyx ~ (master *%) » curl http://nyx:8098/riak/test/20121002 -d "02\. Oct 2012"
olav@nyx ~ (master *%) » curl http://nyx:8098/riak/test/20121021 -d "21\. Oct 2012
olav@nyx ~ (master *%) » curl http://nyx:8098/riak/test/20121102 -d "The future"     
olav@nyx ~ (master *%) » curl -X POST -H "content-type: application/json" \
-d @- http://localhost:8098/mapred \
<<EOF
{ "inputs":{
      "bucket":"test"
    , "index":"\$key"
    , "start":"20121001"
    , "end":"20121101"
}
, "query":[{
      "reduce":{
           "language":"erlang"
         , "module":"riak_kv_mapreduce"
         , "function":"reduce_identity"
         , "keep":true
      }
  }]
}
EOF
# ...
[["test","20121021"],["test","20121002"]] 
```

如果你真的想要关键过滤器，你可以使用 Erlang pb 客户端并按照这些行做一些事情（你需要`riak_kv`在你的代码路径中）：

```
{ok, Pid} = riakc_pb_socket:start_link("127.0.0.1", 8087),
Index = {index, <<"test1">>, <<"field_int">>, <<"123">>},
{ok, Filter} = riak_kv_mapred_filters:build_filter([[<<"ends_with">>,"1"]]).
MapReduce = [
   { reduce
  , {qfun, fun(X, F) -> lists:filter(fun({A, B}) -> F(B) end, X) end}
  , riak_kv_mapred_filters:compose(Filter)
  , true}],
riakc_pb_socket:mapred(Pid, Index, MapReduce). 
```

# haskell - Int 到 Float 的转换：没有 Num [Int] 的实例

> ID：12963967
> 
> 赞同：2
> 
> 时间：2012-10-18T21:22:20.150
> 
> 标签：haskell, floating-point, int

我需要使用该`map`函数来获得例如便士到英镑的转换。抱歉这个愚蠢的问题..但我是初学者。

```
del :: Int -> Float
del x =  ( fromIntegral x ) / 100

pounds :: [Int] -> [Float]
pounds = map del 
```

我得到这个错误..

```
*Main> pounds 45
<interactive>:90:8:
    No instance for (Num [Int])
      arising from the literal `45'
    Possible fix: add an instance declaration for (Num [Int])
    In the first argument of `pounds', namely `45'
    In the expression: pounds 45
    In an equation for it': it = pounds 45 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T21:28:26.823

看来你输入了

```
ghci> pounds 45 
```

在提示下。但`pounds`期望一个列表 (of `Int`) 作为它的参数。您应该使用

```
ghci> del 45 
```

那里，或

```
ghci> pounds [45] 
```

由于整数文字有一个隐含的`fromInteger`，GHC 试图找到转换`fromInteger :: Integer -> [Int]`，这需要一个`instance Num [Int]`，但它找不到一个，这就是它报告的错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T21:29:24.470

`pounds`仅适用于列表，但您将其用于数字。

```
pounds [45] 
```

可以正常工作。

通常，当编译器说它缺少一个实例时，通常意味着您的参数类型错误或丢失。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T21:27:59.977

for 的参数`pounds`需要是一个*列表*，`Int`而不是一个孤立的`Int`。

尝试做`pounds [45]`。

# linux - Linux 命令行....如何从 $ 更改为 #？

> ID：12963969
> 
> 赞同：2
> 
> 时间：2012-10-18T21:22:33.837
> 
> 标签：linux, command-line, fedora

我正在使用 sed 编辑器，我意识到我的命令提示符是：

[darkchild@localhost ~]$

我该如何更改它以使其以 #.... 结尾，这是什么意思？例如：

[darkchild@localhost ~]#

一位朋友告诉我写这个命令#!/bin/bash 但它不会将提示更改为#。

有人可以教育我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T21:24:29.447

规范地 # 表示 root shell。您可能实际上并不想这样做，因为它会使您系统的其他用户感到困惑。如果您确实想要这样做，您可以编辑 PROMPT 变量。

[http://tldp.org/HOWTO/Bash-Prompt-HOWTO/](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T21:25:12.130

您可以运行以下命令：

```
set prompt=\[`id -nu`@`hostname -s`\]\#\ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T21:32:02.250

这是根用户。`su`您可以使用该命令转到该用户。更多信息：[http://en.wikipedia.org/wiki/Su_(Unix)](http://en.wikipedia.org/wiki/Su_(Unix))

# c++ - Visual C++ 内联汇编器和定义字符串？

> ID：12963977
> 
> 赞同：0
> 
> 时间：2012-10-18T21:23:35.987
> 
> 标签：c++, string, visual-c++, assembly, inline-assembly

如何让 VC 内联汇编器接受以下内容：

```
__asm
{
  call L1
  db "Hello",0
  L1:
  nop
  nop
} 
```

还是我必须一直使用`_emit 0xxNNh`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:26:21.240

您不能在内联汇编中使用数据指令。

查看[http://msdn.microsoft.com/en-us/library/h70hd396.aspx](http://msdn.microsoft.com/en-us/library/h70hd396.aspx)以获得解释。

# solr - Solr 最终用户查询翻译

> ID：12963979
> 
> 赞同：3
> 
> 时间：2012-10-18T21:23:42.553
> 
> 标签：solr, dismax

我想知道是否有任何方法可以根据某些规则将最终用户查询转换为更复杂的 solr 查询。

例如，如果用户键入 32" 电视，那么我想使用 dismax 查询解析器让 solr 处理这个用户查询字符串，如下所示：

```
http://localhost:8983/solr/select/?q=32" television&defType=dismax 
```

但是，如果用户输入“televisions on sale”，那么我想定期搜索令牌电视，并且 onsale 标志为 true，如下所示：

```
http://localhost:8983/solr/select/?q=name:televisions AND isOnSale:true 
```

这可能吗？或者这个逻辑是否需要一个高级搜索表单，用户可以在复选框中清楚地声明他们只想要特价商品。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T00:00:15.293

也许您可以设置搜索，以便当有人搜索以 isOnSale 作为辅助排序参数的任何内容时。因此，默认情况下按分数排序，然后按 isonsale 排序或仅按 isonsale 排序。这样一来，您仍然会在结果中看到所有“电视”广告，只有那些在售的广告排在首位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T03:12:14.170

转换用户查询是很有可能的。您可以通过以下两种方式进行

1.  实现一个监听用户查询的 Servlet 过滤器，在将其分派给 solr 请求处理程序之前对其进行转换。

2.  查看 SOLR 中的查询解析器插件，并基于现有的标准查询解析器实现一个，并对其进行修改以应用转换规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:03:56.050

让搜索发生在整个索引中，[让用户选择](https://stackoverflow.com/questions/12403281/advance-auto-complete-search-using-suggester-in-solr/12419178#12419178)。如果出现评论，请使用适当的视图**呈现它。**如果产品出现，请提供搜索更多产品。

> 三星 32 在**评论**中-*阅读更多*
> 
> LG 32**优惠**-*找到更多类似产品*

您的优惠页面可以提供更多选项，例如过滤特价商品。

您可以在文档上使用全局提升字段。例如，打折产品的得分为 ，`1.0`而缺货产品的得分为`0.33`。一个新产品的评论有`1.0`，旧产品的评论更少。

# ruby - Ruby 元编程 - 不尝试评估内部 #{} 的多行字符串

> ID：12963998
> 
> 赞同：2
> 
> 时间：2012-10-18T21:25:20.710
> 
> 标签：ruby, metaprogramming, multiline

有没有办法制作不尝试评估内部 #{} 的多行字符串？

我想要以下内容：

```
doc <<-DOC    
    describe "should get sysdate on test: #{test_name}" do
        it "should get SYSDATE" do
            conx_bd.sysdate.should_not == NULL
        end
    end    
DOC 
```

用这个内容创建一个字符串（doc）：（用于元编程）

```
describe "should get sysdate on test: #{test_name}" do
    it "should get SYSDATE" do
        conx_bd.sysdate.should_not == NULL
    end
end 
```

我收到此错误：

```
NameError: undefined local variable or method `test_name' for main:Object 
```

如果用单引号括住heredoc标识符，如果字符串具有例如要求，我会收到此错误

```
doc <<'-DOC'
require "spec_helper.rb" # conexión oracle

describe "should get sysdate on test: #{test_name}" do
    it "should get SYSDATE" do
        conx_bd.sysdate.should_not == NULL
    end
end 
```

文档

错误：

```
LoadError: no such file to load -- spec_helper 
```

tks

编辑：感谢您的支持，我从答案中得到了 2 个可能的解决方案。

首先，我在定义多行字符串时出错

```
doc <<-DOC should be <<-doc 
```

1.  scape # 与 \

    <<-doc
    描述“应该在测试中获取 sysdate：#{test_name}”做它“应该得到 SYSDATE”做 conx_bd.sysdate.should_not == NULL end end
    doc

2.  用单引号将heredoc 标识符括起来

    <<-'doc'
    描述“应该在测试中获取 sysdate：#{test_name}”做它“应该得到 SYSDATE”做 conx_bd.sysdate.should_not == NULL end end
    doc

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T21:31:53.917

用单引号将heredoc 标识符括起来。

```
doc <<-'DOC'    
    describe "should get sysdate on test: #{test_name}" do
        it "should get SYSDATE" do
            conx_bd.sysdate.should_not == NULL
        end
    end    
DOC 
```

**编辑**我对单引号开头和连字符的相对位置是错误的。steenslag 是对的。固定的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T21:29:43.940

尝试在 # 之前使用转义字符。转义字符是`\`.