# StackOverflow 问答 12959000-12959999

# apache-pig - 如何在 PIG 中过滤具有空值的记录？

> ID：12959001
> 
> 赞同：2
> 
> 时间：2012-10-18T16:09:21.733
> 
> 标签：apache-pig

我正在尝试删除任何字段中至少包含一个 null 的记录。例如，如果数据有 3 个字段，则：

```
filtered = FILTER data by ($0 is not null) AND ($1 is not null) AND ($2 is not null) 
```

有没有更简洁的方法可以做到这一点，而不必写出 3 个布尔表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T20:47:55.033

如果所有字段都是数字类型，您可以简单地执行类似的操作

```
filtered = FILTER data BY $0*$1*$2 is not null; 
```

在 Pig 中，如果算术表达式中的任何项为空，则结果为空。

您还可以编写一个 UDF 来获取任意数量的参数，并在任何参数为 null 时返回 null（或 0，或 false，只要您认为最方便）。

```
filtered = FILTER data BY NUMBER_OF_NULLS($0, $1, $2) == 0; 
```

其中 NUMBER_OF_NULLS 在别处定义，例如

```
public class NUMBER_OF_NULLS extends EvalFunc {
    public Integer exec(Tuple input) {
        if (input == null) { return 0; }

        int c = 0;
        for (int i = 0; i < input.size(); i++) {
            if (input.get(i) == null) c++;
        }
        return c;
    }
} 
```

注意：我没有测试过上面的 UDF，我并不声称它遵循任何编写清晰、健壮的 UDF 的最佳实践。例如，您应该添加异常处理代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-02T01:51:48.573

我在想有一种更好的方法可以在不使用 UDF 的情况下执行此操作，即在 Pig 中使用 SPLIT。

```
emp = load '/Batch1/pig/emp' using PigStorage(',') as (id:chararray, name:chararray, salary:int, dept:chararray);

SPLIT emp INTO emptyDept IF depart == '', nonemptyDept IF depart != '';

DUMP nonemptyDept; 
```

生成的关系 `nonemptyDept`将显示 emp 关系的所有非空 Department 值。

# postgresql - 使用 DOS 命令将数据从一个表导出到另一个数据库中的另一个表

> ID：12959002
> 
> 赞同：0
> 
> 时间：2012-10-18T16:09:24.420
> 
> 标签：postgresql

我必须将数据从旧数据库传输到表名和列名不同的新数据库。可以使用 DOS 命令或任何其他解决方案来完成吗？一种是 POSTGRESQL，旧的是 MYSQL。

我担心的是表名和列名不同，列号相同。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:14:37.573

I do not know the postgresql part but for sql server you can use `sqlcmd.exe` to export data as text format with or w/o column names

Please check

[http://msdn.microsoft.com/en-us/library/ms162773.aspx](http://msdn.microsoft.com/en-us/library/ms162773.aspx)

# javascript - 在 setTimeout 函数中未定义的 JavaScript 变量

> ID：12959006
> 
> 赞同：7
> 
> 时间：2012-10-18T16:09:46.943
> 
> 标签：javascript, jquery, google-maps-api-3

我有以下代码：

```
 for (var i = 0; i < markers.length; i++) {

        var lat = markers[i][0];
        var lng = markers[i][1];
        var img = markers[i][2];
        var info = markers[i][3];

        setTimeout(function(lat, lng, img, info) {
            console.log(lat + ', ' + lng);
            $('#map').gmap3({
                action: 'addMarker',
                latLng:[lat, lng],
                options:{
                    animation: google.maps.Animation.DROP,
                    icon: img
                },
                events:{
                    click: function(marker, event, data){
                        $(this).gmap3({action:'addinfowindow', anchor:marker, options:{content: '<div id="content" style="width:300px;height:250px;"><img src="' + info + '"></img></div>'}});
                        /*var infowindow = $(this).gmap3({action:'get', name:'infowindow'});
                        infowindow.close();*/
                    },
                }
            });
        }, i* 100);
    } 
```

console.log 显示 lat 和 lng 的未定义。为什么是这样？

以前我没有在超时时间内将任何变量传递给函数，它们被定义但它为 for 循环中的每个标记使用了相同的变量，这显然是错误的！

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T16:11:16.933

`lat`并且`lng`是超时函数的命名参数，但`setTimeout`不会将任何参数传递给该函数，因此它们保持未定义。

您应该将超时设置移动到一个单独的函数中，以便为您的变量建立一个闭包：

```
function configureTimeout(i, lat, lng, img, info) {
    setTimeout(function() {
        console.log(lat + ', ' + lng);
        $('#map').gmap3({
            action: 'addMarker',
            latLng:[lat, lng],
            options:{
                animation: google.maps.Animation.DROP,
                icon: img
            },
            events:{
                click: function(marker, event, data){
                    $(this).gmap3({action:'addinfowindow', anchor:marker, options:{content: '<div id="content" style="width:300px;height:250px;"><img src="' + info + '"></img></div>'}});
                    /*var infowindow = $(this).gmap3({action:'get', name:'infowindow'});
                    infowindow.close();*/
                },
            }
        });
    }, i* 100);
}

for (var i = 0; i < markers.length; i++) {

    var lat = markers[i][0];
    var lng = markers[i][1];
    var img = markers[i][2];
    var info = markers[i][3];

    configureTimeout(i, lat, lng, img, info);

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:13:38.660

试试这个：

```
setTimeout(function(){myFunc(lat, lng, img, info);},i*100)

function myFunc(lat, lng, img, info) { .... } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T16:16:33.017

您需要将这些参数传递给匿名函数，`setTimeout`不会为您执行：

```
setTimeout(function () { 
    (function(lat, lng, img, info) {
        console.log(lat + ', ' + lng);
        // ... snip ...
    })(lat, lng, img, info);
}, i* 100); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:23:11.477

您需要将您的 setTimeout 封闭在一个闭包中，使用当前参数值自动执行：

```
for (var i = 0; i < markers.length; i++) {

    var lat = markers[i][0];
    var lng = markers[i][1];
    var img = markers[i][2];
    var info = markers[i][3];
    (function(latitude, longitude, image, infos) { // Attention these must be named differently!
        setTimeout(function() {
            console.log(latitutde + ', ' + longitude); // use the inner param names here and after!
            $('#map').gmap3({ ...omitted... }});
        }, i* 100);
    })(lat, lng, img, info)
} 
```

顺便说一句，与上面的@lanzz 解决方案没有太大区别，我认为它更好，因为它重构了实际功能，更简洁！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T16:13:40.737

`setTimeout(function(lat, lng, img, info) {`

应该

`setTimeout(function() {`

# c# - 为什么这个异步 for 循环那么慢？

> ID：12959007
> 
> 赞同：1
> 
> 时间：2012-10-18T16:09:53.640
> 
> 标签：c#, loops, asynchronous, for-loop

我有以下for循环：

```
System.Diagnostics.Stopwatch stopwatch = new System.Diagnostics.Stopwatch();
stopwatch.Start();

for (int i = 0; i < packets2.Count; i++)
{                       
    dosimulationasync(packets2[i]);                        
}

stopwatch.Stop();                    
logit("Time: " + stopwatch.ElapsedMilliseconds); 
```

`dosimulationasync`是这样的：

```
private async Task dosimulationasync(SimulationPoint mypoint)
{
    await TaskEx.Run(() =>
    {
        for (int i = 0; i < allobjects.Count; i++)
        {
            if (allobjects[i].ID == mypoint.ID)
            {
                allobjects[i].setvalue(mypoint);
                break;
            }
        }
    });
} 
```

问题是第一个 for 循环，用 捕获，它`stopwatch`变得非常慢，它必须处理的值越多（就像 13 个值已经花费了大约时间：300 毫秒）。我认为通过`dosimulationasync`异步调用该方法，第一个 for 循环将立即继续。

我无法解释为什么它变得那么慢，即使`dosimulationasync`例程很慢，它也不应该影响第一个 for 循环，对吧？

我究竟做错了什么？我怎样才能“派遣” `dosimulationasync`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:23:00.120

我认为在你的情况下， async/await 不会帮助你。并行方法是dosimulationasync，但其中没有什么可以并行处理。我将完全删除 async/await 并在您的主要方法中使用 Parallel.For ：

```
Parallel.For(0, packets2.Count, (i) =>
{                       
    dosimulationasync(packets2[i]);                        
}); 
```

但请确保您可以从数据包2中并行读取

# android - Android防止同一通知的多次更新

> ID：12959014
> 
> 赞同：4
> 
> 时间：2012-10-18T16:10:28.680
> 
> 标签：android, notifications

我每 x 分钟从服务器轮询一次，以获取邀请用户参加的事件。假设用户有一个新邀请并在上午 10:00 收到通知。用户从不点击通知，我想阻止用户在 x 分钟后收到具有相同信息的另一个通知。基本上我想允许独特的通知只显示一次并提醒用户一次。

你会认为这行代码可以做我想要的，但事实并非如此。

```
notification.flags |= Notification.FLAG_ONLY_ALERT_ONCE; 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-28T20:06:32.403

我不确定您的问题是您看到多个通知还是仅发生了多个声音/振动。你需要做两件事：

1.  是的，使用`Notification.FLAG_ONLY_ALERT_ONCE`or `NotificationCompat.Builder#setOnlyAlertOnce()`，这将防止更新通知时发生声音和振动
2.  为了防止多个通知出现在通知区域中，您需要确保在调用时`NotificationManager#notify(id, builder.build());`是`id`一个一致的值，该值对于该特定事件始终相同。

# python - 如果键不存在，正则表达式匹配文件路径的一部分

> ID：12959020
> 
> 赞同：0
> 
> 时间：2012-10-18T16:10:48.610
> 
> 标签：python, regex

如果文件路径的一部分不包含在python中使用正则表达式的某个关键字，我正在尝试匹配它。例如，将正则表达式应用于“/exclude/this/test/other”不应匹配，而“/this/test/other”应返回不包括“other”的文件路径，即“/this/test”，并且其中“其他”是任何目录。到目前为止，我正在使用这个

```
In [153]: re.findall("^(((?!exclude).)*(?=test).*)?", "/exclude/this/test/other")
Out[153]: [('', '')]

re.findall("^(((?!exclude).)*(?=test).*)?", "/this/test/other")
Out[152]: [('/this/test/other', '/')] 
```

但我不能让它在“测试”之后停止匹配，也有一些空匹配。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:19:26.887

`in`如果您只需要检查关键字是否存在，只需使用：

```
In [33]: s1="/exclude/this/test"

In [34]: s2="this/test"

In [35]: 'exclude' in s1
Out[35]: True

In [36]: 'exclude' in s2
Out[36]: False 
```

编辑：或者如果您只想要测试之前的路径：

```
if 'exclude' not in s:
    re.findall(r'(.+test)',s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:59:28.987

你得到了额外的结果，因为（1）你使用`findall()`而不是`search()`，（2）你使用捕获组而不是非捕获

```
>>> import re
>>> re.search(r'^(?:(?:(?!exclude).)*(?=test)*)$', "/this/test").group(0)
'/this/test' 
```

这也适用`findall()`，但是当您匹配整个字符串时，这并没有什么意义。更重要的是，您的正则表达式的*包含*部分不起作用。检查这个：

```
>>> re.search(r'^(?:(?:(?!exclude).)*(?=test)*)$', "/this/foo").group(0)
'/this/foo' 
```

那是因为`*`in`(?=test)*`使前瞻成为可选的，这使得它毫无意义。但是摆脱 the`*`并不是真正的解决方案，因为`exclude`and`test`可能是较长单词的一部分，例如`excludexx`or `yyytest`。这是一个更好的正则表达式：

```
r'^(?=.*/test\b)(?!.*/exclude\b)(?:/\w+)+$' 
```

测试：

```
>>> re.search(r'^(?=.*/test\b)(?!.*/exclude\b)(?:/\w+)+$', '/this/test').group()
'/this/test'
>>> re.search(r'^(?=.*/test\b)(?!.*/exclude\b)(?:/\w+)+$', '/this/foo').group()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'group' 
```

**编辑：**我看到你修复了“可选的前瞻”问题，但现在整个正则表达式是可选的！

**编辑：**如果您希望它在 之后停止匹配`/test`，请尝试以下操作：

```
r'^(?:/(?!test\b|exclude\b)\w+)*/test\b' 
```

`(?:/(?!test\b|exclude\b)\w+)*`匹配零个或多个路径组件，只要它们不是`/test`or `/exclude`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:31:18.803

如果你的匹配比`in`一个简单的关键字更复杂，那么如果你做了两个正则表达式可能会更清楚：

```
import re
s1="/exclude/this/test"
s2="this/test"

for s in (s1,s2):
    if re.search(r'exclude',s): 
        print 'excluding:',s
        continue
    print s, re.findall(r'test',s) 
```

印刷：

```
excluding: /exclude/this/test
this/test ['test'] 
```

如果这是您的目标，您可以使两个正则表达式紧凑：

```
print [(s,re.findall(r'test',s)) for s in s1,s2 if not re.search(r'exclude',s)] 
```

**编辑**

如果我理解您的编辑，这有效：

```
s1="/exclude/this/test/other"
s2="/this/test/other"

print [(s,re.search(r'(.*?)/[^/]+$',s).group(1)) for s in s1,s2 if not re.search(r'exclude',s)] 
```

印刷：

```
[('/this/test/other', '/this/test')] 
```

# entity-framework - 排序 DataGridView 实体框架

> ID：12959021
> 
> 赞同：1
> 
> 时间：2012-10-18T16:10:54.507
> 
> 标签：entity-framework

```
 var type = typeof(T);
                var property = type.GetProperty(columnSelectName);
                var parameter = Expression.Parameter(type, "p");
                var propertyAccess = Expression.MakeMemberAccess(parameter, property);
                var orderByExp = Expression.Lambda(propertyAccess, parameter);

                if (dataGridView.Columns[e.ColumnIndex].HeaderCell.SortGlyphDirection != SortOrder.Ascending)
                {
                    MethodCallExpression resultExp = Expression.Call(typeof(Queryable), "OrderBy", new Type[] { type, property.PropertyType }, data.Expression, Expression.Quote(orderByExp));

                    bindingSource.DataSource = data.Provider.CreateQuery<T>(resultExp);

                    dataGridView.Columns[e.ColumnIndex].HeaderCell.SortGlyphDirection = SortOrder.Ascending;
                }

public partial class Logs
{
    public string UserName
    {
        get
        {
            if (this.id_user.HasValue)
                return this.Users.login;
            else
                return string.Empty;
        }
    }

    public string TypeName
    {
        get
        {
            TypeLogs typeLogs = (TypeLogs)this.type;

            switch (typeLogs)
            {
                case TypeLogs.LogOn:
                    return "Logowanie";
                case TypeLogs.LogOff:
                    return "Wylogowanie";
                case TypeLogs.LogOnFailed:
                    return "Nieudane logowanie";
                case TypeLogs.LogsDelete:
                    return "Usunięto logi";
                default:
                    return string.Empty;
            }
        }
    } 
```

LINQ to Entities 不支持指定的类型成员“成员”。仅支持初始化程序、实体成员和实体导航属性。

LINQ to Entities 不支持指定的类型成员“成员”。仅支持初始化程序、实体成员和实体导航属性。

# java - Apache wicket Button setMarkupId 不起作用

> ID：12959023
> 
> 赞同：1
> 
> 时间：2012-10-18T16:10:57.900
> 
> 标签：java, javascript, html, apache, wicket

我有：

*   `ListView`
*   `Button`
*   `WebMarkupContainer`（弹出内容容器）

因此，当我填充 时，我向按钮`ListView`添加了一个。`AjaxEventBehavior`我也覆盖`getAjaxCallDecorator()`，因为我需要从每个按钮调用一个 javascript 函数。因此，在`decorateScript`函数中，我使用 覆盖`WebMarkupContainer`标记 ID `setMarkupId()`，它可以工作。我对 执行相同的操作`Button`，并且至少在我调用时有效`getMarkupId()`。但是当我转到生成的 HTML 时，它不存在！为什么会这样？

代码如下（它在`populateItem`from内部`ListView`）：

```
infoBtn.add(new AjaxEventBehavior("onclick") {

    @Override
    protected void onEvent(AjaxRequestTarget target) {
    }

    @Override
    protected IAjaxCallDecorator getAjaxCallDecorator() {

        return new IAjaxCallDecorator() {

            @Override
            public CharSequence decorateScript(Component component, CharSequence script) {
                StringBuilder jsScript = new StringBuilder();                                                                                               

                infoPopoverContent.setMarkupId(infoPopoverContent.getMarkupId(true) + String.valueOf(pos));
                infoBtn.setOutputMarkupPlaceholderTag(true);
                infoBtn.setMarkupId(infoBtn.getMarkupId() + String.valueOf(pos));

                jsScript.append("$('#" + infoBtn.getMarkupId() + "').popover({");
                    jsScript.append("html:true,");
                    jsScript.append("placement:'bottom',");
                    jsScript.append("content:function() {");
                        jsScript.append("return $('#");
                        jsScript.append(infoPopoverContent.getMarkupId());
                        jsScript.append("').html();");
                    jsScript.append("}");
                jsScript.append("});");

                logger.debug(jsScript.toString());

                pos++;

                return jsScript;
            }

            @Override
            public CharSequence decorateOnSuccessScript(Component component,
                    CharSequence script) {
                // TODO Auto-generated method stub
                return null;
            }

            @Override
            public CharSequence decorateOnFailureScript(Component component,
                    CharSequence script) {
                // TODO Auto-generated method stub
                return null;
            }
        }; 
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T14:29:34.507

确保您正在调用[`infoBtn.setOutputMarkupId(true)`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/Component.html#setOutputMarkupId%28boolean%29)，以便 Wicket 知道它应该输出`id`属性。

通知[`setOutputMarkupPlaceholderTag(true)`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/Component.html#setOutputMarkupPlaceholderTag%28boolean%29)也在`setOutputMarkupId(true)`幕后呼唤。在不了解您的代码的情况下，您似乎并不真正需要它。`setOutputMarkupPlaceholderTag()`将输出一个空容器（`<span id="xxx">`如果组件不可见，只是为了引用组件所在的位置，并允许 Wicket 在 AJAX 响应中通过 DOM 进行操作（例如，使组件再次可见）。

作为旁注，如果您真的不需要`id`属性具有特定值，则可以通过不使用`setMarkupId()`并让 Wicket`id`为您生成 s 来简化代码。

此外，根据您的需要，通过或[#prependJavascript()](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxRequestTarget.html#prependJavascript%28java.lang.String%29)`IAjaxCallDecorator`删除并附加脚本可能更简单。`onEvent`[`AjaxRequestTarget#appendJavascript()`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxRequestTarget.html#appendJavascript%28java.lang.String%29)[`AjaxRequestTarget`](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxRequestTarget.html#prependJavascript%28java.lang.String%29)

# windows-7 - Visual Basic 脚本 - 获取用户密码？

> ID：12959033
> 
> 赞同：0
> 
> 时间：2012-10-18T16:11:42.410
> 
> 标签：windows-7, vbscript, passwords, credentials

我正在编写一个脚本，其中一部分需要知道登录用户的密码。问题是我无法找到获取密码的方法。我可以通过 -

```
Set oWshshell = WScript.CreateObject("WScript.Shell")
wscript.echo oWshShell.ExpandEnvironmentStrings("Username=%UserName%") 
```

我希望可以用密码做类似的事情。是否可以获取当前登录用户的密码？如果是这样，怎么做？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:13:16.573

这是完全不可能的；Windows 从不以纯文本形式存储密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:16:24.050

从技术上讲，Windows 可以配置为使用可逆加密（尽管不是明文）存储密码。不过，这仍然是一个非常非常*糟糕*的主意。

如果您只想验证密码复杂性：当用户更改密码时，您应该能够使用[自定义密码过滤器来做到这一点。](http://msdn.microsoft.com/en-us/library/ms722439%28v=vs.85%29.aspx)

# ruby - 如何将 FactoryGirl 与在初始化方法中采用哈希的模型一起使用？

> ID：12959036
> 
> 赞同：11
> 
> 时间：2012-10-18T16:11:56.650
> 
> 标签：ruby, rspec, initialization, factory-bot

看起来很简单，但还没有弄清楚如何让它工作。

在model.rb中：

```
def Model
  attr_accessor :width,
                :height

  def initialize params
    @width = params[:width]
    @height = params[:height]
    ... 
```

在工厂文件中`models.rb`：

```
FactoryGirl.define do
  factory :model do
    height 5
    width 7
  end
end 
```

在工厂方法中设置属性会抛出错误`wrong number of arguments (0 for 1)`

在没有 Rails 的 Ruby 1.9.3 中工作，使用`Factory.build`. 工厂女孩 4.1。

编辑：更多信息：

使用 RSpec：`let(:model) { FactoryGirl.build :model }`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-18T16:25:48.727

这应该适用于您的班级：

```
FactoryGirl.define do

  factory :model do
    skip_create

    width 5
    height 9

    initialize_with { new(attributes) }
  end
end 
```

-`skip_create`绕过`save!`通常对新对象调用的默认操作。

-`attributes`该方法生成一个哈希值，您可以`new`使用`initialize_with`.

# android - Android 通知不会在给定时间弹出

> ID：12959037
> 
> 赞同：1
> 
> 时间：2012-10-18T16:12:04.153
> 
> 标签：android

我刚刚开始将我的 iOS 应用程序转换为 Android。但是我遇到了以下问题。

我创建了多个类，因此弹出警报。但问题是警报每 5/10 秒弹出一次，而不是给定时间。我知道这与以下代码有关：

```
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, SystemClock.elapsedRealtime() + 5000, 10000, pendingIntent); 
```

但最奇怪的是，该代码上面的给定时间不会触发任何事情：（否则我可能刚刚删除了最后一行代码）

```
private void setRecurringAlarm(Context context) {
    Calendar updateTime = Calendar.getInstance();
    updateTime.set(Calendar.HOUR_OF_DAY, 17);
    updateTime.set(Calendar.MINUTE, 18);

    Intent open = new Intent(this, AlarmReceiver.class);
    open.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0, open, PendingIntent.FLAG_CANCEL_CURRENT);
    AlarmManager alarmManager = (AlarmManager) getSystemService(MyApp.ALARM_SERVICE);
    alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, SystemClock.elapsedRealtime() + 5000, 10000, pendingIntent); 
```

该代码有什么问题，因为警报不会在 17:18 弹出，而是每次在 5 或 10 秒后弹出。我为显示通知而创建的服务未在 17:18 开始显示消息。这与我的时区（阿姆斯特丹时间）有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:20:27.183

我认为您为 .setRepeating 传递了错误的值。看看[文档](http://developer.android.com/reference/android/app/AlarmManager.html#setRepeating%28int,%20long,%20long,%20android.app.PendingIntent%29)

在我看来你在说：从现在开始 5 秒后第一次广播，然后每 10 秒重复一次

# php - 从包含 ~280,000 个文件的目录中检索正确的文件

> ID：12959039
> 
> 赞同：1
> 
> 时间：2012-10-18T16:12:10.790
> 
> 标签：php, mysql, database

我有大约 280,000 个文件需要搜索，并返回并打开正确的文件。文件名与预期的搜索词完全匹配。

搜索词将由使用 PHP 的输入框获取。完成此操作的最佳方法是什么，以便搜索不会花费大量时间？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:14:45.623

I suspect the file system *itself* will struggle with 280,000 files in one directory.

An approach I've taken in the past is to put those files in subdirectories based upon the initial letters of the filename e.g.

```
1/100000.txt
1/100001.txt
...
9/900000.txt 
```

etc. You can subdivide further using the second letter etc.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:14:34.857

Its good you added mysql to your tags. Ideally i would have a CRON task that would index the directories into a mysql table and use that to do the actual search. Algebra is faster than File System iteration. You could run the task daily or hourly depending on how often your files change. Or use something like Guard to monitor the file system for changes and make appropriate updates.

See: [https://github.com/guard/guard](https://github.com/guard/guard)

# asp.net-mvc-routing - 当视图位于同一文件夹中时，asp.net mvc 如何将不同的视图映射到不同的控制器？

> ID：12959040
> 
> 赞同：0
> 
> 时间：2012-10-18T16:12:10.450
> 
> 标签：asp.net-mvc-routing

我对 asp.net mvc 路由有疑问。如何将同一文件夹中的两个视图映射到不同的两个控制器？

控制器 => TestFolder => Test1Controller Test2Controller

视图 => TestFolder =>Test1.cshtml Test2.cshtml

这是我现在拥有的 MapRoute：

```
 routes.MapRoute(
        "Test1",
        "Test1/{action}/{id}",
        new { controller = "Test1", action = "Test1", id = UrlParameter.Optional }
        );

    routes.MapRoute(
        "Test2",
        "Test2/{action}/{id}",
        new { controller = "Test2", action = "Test2", id = UrlParameter.Optional }
        ); 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:22:17.723

您不会将路由映射到视图，而是将路由映射到控制器和操作。

在您的 Test1Controller.Test1 方法中，返回 View("Test1")。在您的 Test2Controller.Test2 方法中，返回 View("Test2")。

# jsf-2 - 使用 Primefaces 3.4 在浏览器中渲染 PDF

> ID：12959046
> 
> 赞同：0
> 
> 时间：2012-10-18T16:12:33.223
> 
> 标签：jsf-2, primefaces

是否可以使用 Primeface 3.4 和 DefaultStreamedContent 渲染 PDF 对象？这曾经在 Primefaces 2.2 中为我们工作：

支持豆：

```
 streamedDoc = new DefaultStreamedContent(pdfStream, "application/pdf");
...
 public StreamedContent getStreamedDoc() {
    return streamedDoc;
 } 
```

看法：

```
<object id="embeddedPDF"
       data="?primefacesDynamicContent=confirmForm.streamedDoc#toolbar=0?docId=456"
       type="application/pdf"
       width="100%"
       height="1610px"/> 
```

但升级到 3.4 后，PDF 不会被渲染。我们没有例外。我们只是在浏览器中得到这个 Abode Reader 错误：

> Adobe Reader 无法打开“A9RE0BF.tmp”，因为它不是受支持的文件类型或文件已损坏。（例如，它是作为电子邮件附件发送的，并且编码不正确）。”

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T14:32:22.157

使用 primefaces**灯箱**和**媒体**组件怎么样？

[http://www.primefaces.org/showcase/ui/multimedia/media.xhtml](http://www.primefaces.org/showcase/ui/multimedia/media.xhtml)

[http://www.primefaces.org/showcase/ui/overlay/lightBox.xhtml](http://www.primefaces.org/showcase/ui/overlay/lightBox.xhtml)

你可以在lightBox里面看到PDF，我觉得它更优雅。

无论如何，我猜你可以通过媒体来解决你的问题。

问候。

# javascript - Javascript将rel属性分配给变量

> ID：12959054
> 
> 赞同：1
> 
> 时间：2012-10-18T16:13:15.263
> 
> 标签：javascript, jquery, html

我创建了一个用户图像表，单击该表将启动视频。这是表格的相关部分：

```
<table>
<tbody>
    <tr>
        <td style="width: 220px;">
        <p><a rel="MP4:webvideos/Featured/Christina" href="#" class="mediamodal videoLink"><img alt="" src="/images/featured/christina.png" /></a><br />
        Overall Vision</p>
        </td> 

        <td style="width: 220px;">
        <p><a rel="MP4:webvideos/Featured/Logan" href="#" class="mediamodal videoLink"><img alt="" src="/images/featured/logan.png" /></a><br />
        Video Control</p>
        </td>
.... 
```

现在，我必须使用 rel 属性才能使视频正常工作。这是我目前用来获取 rel 属性的 Javascript：

```
var mediaDetails = $(".videoLink").attr("rel"); 
```

这对于单个文件非常有用，但我有一个充满图像的表格，这些图像需要成为启动视频的可点击链接。

如何将 mediaDetails 变量分配给 rel 属性中的特定链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:15:22.300

```
var mediaDetails;
$("a.videoLink").click(function(e){
    e.preventDefault();
    mediaDetails = $(this).attr("rel");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:16:35.117

使用`.each()`.

例如（可能与您的代码无关，因为您没有发布它）

```
$(".videoLink").each(function() {
   mediaDetails = $(this).attr("rel");
}) 
```

# mysql - 带有 git 版本控制脚本的 MYSQL 开发工作流程

> ID：12959059
> 
> 赞同：3
> 
> 时间：2012-10-18T16:13:23.373
> 
> 标签：mysql, git, mysqldump

我确信类似的工作流程很常见，但在我的搜索中，我没有找到任何记录在案的示例。

**目标：**

1.  我想在 git 中管理所有 mysql (v5.1+) 数据库定义，以便我拥有源代码控制的所有好处。
2.  我想通过编辑脚本和运行脚本来定义对数据库的更改，以便我可以在我选择的编辑器 (vim) 中编辑数据库定义，而不是 mysql shell 或 gui 应用程序。

旁白：我目前使用 mysql shell，但想使用 vim 来维护 shell 中变得笨拙的例程和事件。

**计划：**

我将使用“--no-data”选项进行初始转储以获取我​​的初始脚本，但从那时起，我希望我的工作流程是：编辑脚本 -> 提交 -> 运行脚本，而不是：对数据库执行更改 - > 转储 ddl -> 提交。

**注意事项：**

如果我使用以下内容转储数据库：

```
mysqldump -u [user] -p [password] --no-data --routines > ddl.sql 
```

这包括：

```
DROP TABLE IF EXISTS `[table]`; CREATE TABLE `[table]` ([table definition]) 
```

显然，如果我运行脚本，这将破坏并重新创建表。如果表存在，我想做的是用定义更改更新表，否则用定义创建表。我宁愿在一个 [table]([table dfinition]) 块中定义表，即重复使用，而不是必须维护多个重复块。

我将如何更改初始转储语法或脚本，以便我可以使用相同的脚本来更新数据库，并在另一个环境中重新创建数据库定义（没有数据）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:01:48.673

正如您所指出的，只是`mysqldump`ing 对此不起作用。

通常，您需要将更改存储到数据库结构中。所以不要存储：

```
// commit 1
// foo.sql
CREATE TABLE foo ( foo_id INT );

// commit 2
// foo.sql
CREATE TABLE foo ( foo_id INT, foo_val INT ); 
```

您应该存储更多类似的内容：

```
// commit 1
// foo_1.sql
CREATE TABLE foo ( foo_id INT );

// commit 2
// foo_2.sql
ALTER TABLE foo ADD COLUMN ( foo_val INT ); 
```

然后，你应该有一个可以运行的脚本

*   foo_1.sql
*   foo_2.sql

以正确的顺序。

您最好编写具有 up() 和 down() 选项的脚本，这样您的迁移可以**向前**（构建表、添加列）和**向后**（删除列、删除表）运行。

在签出依赖于 db 更改的分支*之前*，您只需要记住运行**反向**脚本。

# jqgrid - 自定义网格按钮根据所选行加载 ajax 内容

> ID：12959063
> 
> 赞同：0
> 
> 时间：2012-10-18T16:13:29.587
> 
> 标签：jqgrid, struts2, struts2-jquery

我需要在我的网格中创建一个自定义按钮，它将打开一个模式，该模式将根据所选行呈现一个带有选项的选择字段。

所以用户将选择一行并单击按钮。行 ID 应作为 url 参数传递给我的操作，以便它可以进行查询并填充选择字段。

这就是我苦苦挣扎的地方：

```
navigatorExtraButtons="{
    honorarios:{
        title: 'Consultar honorários do processo',
        caption: 'H',
        icon: 'none',
        onclick: function(){
            var id = jQuery('#processoTable').jqGrid('getGridParam','selrow');
            if (id) {
                var ret = jQuery('#processoTable').jqGrid('getRowData',id);
                // need to pass ret.nrProcesso as param to the URL that will load content into the modal
            } else { alert('Please select a row.');}
        }
    }, 
```

使用上面的代码，我可以从选定的行中获取所需的 ID 值。但我不知道如何将其分配给

```
<s:url... param 
```

并填充模态...

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:30:48.863

我找到了解决方案。在这里发帖希望它可以帮助别人。

我最终使用普通的旧 jquery 脚本来显示模式而不是 jquery-plugin。

只需构建您的操作 url 添加所需的参数并调用 ajax 函数：

```
<sj:submit id="consulta_honorarios" value="Consultar Honorários" onClickTopics="honorarios" button="true"/>
<sj:dialog
    id="mydialog" 
    title="Consultar honorários" 
    autoOpen="false" 
    modal="true" 
    dialogClass="ui-jqdialog" 
/>

<script type="text/javascript">
jQuery(document).ready(function(){
    jQuery("#consulta_honorarios").click(function(){
        var actionURL = '<s:property value="%{advprocselecturl}" />';
        var id = jQuery('#processoTable').jqGrid('getGridParam','selrow');
        if (id) {
            var ret = jQuery('#processoTable').jqGrid('getRowData',id);
            actionURL += '?nrProcesso=' + ret.nrProcesso;
            // alert('id='+ret.nrProcesso+' / actionURL='+actionURL);
            jQuery.ajax({
                url: actionURL
            }).done(function(data){
                jQuery('#mydialog').html(data).dialog('open');
            });
        } else { 
            jQuery('<div />').html('Por favor, selecione um registro.').dialog();
        }
    });
}); 
```

在您的操作中，您必须使用相应的 getter 和 setter 声明一个与您的 url 参数（在我的情况下为 nrProcesso）同名的变量。

# amazon-product-api - 为什么亚马逊产品广告 API 中的 ItemSearch 返回无效 XML？

> ID：12959064
> 
> 赞同：0
> 
> 时间：2012-10-18T16:13:31.987
> 
> 标签：amazon-product-api

亚马逊产品广告 API 似乎有致命的错误，我想知道是不是只有我一个人，以及是否有任何解决这个明显错误的方法。

当我向产品广告 API 提供以下参数时：

```
<Arguments>
    <Argument Name="Operation" Value="ItemSearch"></Argument>
    <Argument Name="Service" Value="AWSECommerceService"></Argument>
    <Argument Name="Signature"
        Value="<omitted>"></Argument>
    <Argument Name="Manufacturer" Value="Leg Avenue"></Argument>
    <Argument Name="AssociateTag" Value="<omitted>"></Argument>
    <Argument Name="Version" Value="2009-03-31"></Argument>
    <Argument Name="AWSAccessKeyId" Value="<omitted>"></Argument>
    <Argument Name="Timestamp" Value="2012-10-18T15:49:10Z"></Argument>
    <Argument Name="ResponseGroup" Value="ItemAttributes,SalesRank"></Argument>
    <Argument Name="SearchIndex" Value="Apparel"></Argument>
</Arguments> 
```

我得到一大堆 XML，其中一部分包含一个明显而重要的错误：

```
<Publisher>Rubies/Publisher> 
```

请注意该`<Publisher>`元素缺少正确的关闭标记。正如您所料，这会导致任何 XML 解析器崩溃。

我没有看到任何简单的解决方法。我搜索了一下，没有发现其他人报告同样的问题，考虑到这个问题的严重性，我觉得有点令人惊讶。它基本上使整个 API 无用。

我确定我遗漏了一些东西——API 不可能这么有问题。有人知道我在做什么错吗？其他人可以确认这是否是一个错误？

[编辑] 这似乎是间歇性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T03:54:54.790

如果您连续向 Amazon 产品 API 发出过多请求，则会受到限制。这会使调试问题令人沮丧。如果问题是间歇性的，并且您可以从 API 中获取您期望的信息，并且您的代码给出了不同的参数，那么亚马逊的产品 API 数据库中可能存在错误数据，或者您应该等待一天，看看您是否受到限制。

如果您受到限制，您不会得到任何数据，而是某种错误代码，我已经有一段时间没有调试一些问题了，[我的代码可以工作](http://www.muschamp.ca/Muskie/webMashups.html)，也许您可​​以调整它。

# php - Joomla 登录功能

> ID：12959065
> 
> 赞同：2
> 
> 时间：2012-10-18T16:13:32.457
> 
> 标签：php, joomla

用于登录 Joomla 即时通讯使用

```
$result = JFactory::getApplication()->login(array('username'=>$username,    'password'=>$password)); 
```

有没有办法通过登录功能记住我的选项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:25:30.597

是的，`login()`需要第二个参数，您可以在其中设置记住选项：

```
$result = JFactory::getApplication()->login(array('username'=>$username,    'password'=>$password), array('remember' => true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:25:05.370

`login`接受第二个参数，`options`- 在函数的文档字符串中指出：

```
/**
 * Login authentication function
 *
 * @param   array   Array('username' => string, 'password' => string)
 * @param   array   Array('remember' => boolean)
 *
 * @see JApplication::login
 */
public function login($credentials, $options = array()) 
```

# javascript - 在 VIM 中，显示调用 javascript 函数的列表

> ID：12959066
> 
> 赞同：0
> 
> 时间：2012-10-18T16:13:37.420
> 
> 标签：javascript, vim, tags

在 VIM 中，我想获取调用 javascript 函数并跳转的列表。

在C语言的情况下，我曾经使用cscope来获取列表并跳转。

但 cscope 不支持 Javascript。

希望你给我一些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:09:47.650

Cscope 支持 JavaScript `$ cscope -R *.js`：.

# math - 如何使变形的轨迹平滑。

> ID：12959077
> 
> 赞同：1
> 
> 时间：2012-10-18T16:13:56.510
> 
> 标签：math, contour, spline

我正在使用动态时间扭曲来查找与模板轨迹不匹配的轨迹段。

模板轨迹：

```
 .  . .
      .         . 
    .            .
  .               .
.                  .   .
                     . 
```

测试轨迹：

```
 .
          .   .
        .      .
      .         . 
    .            .
  .               .
.                  .   .
                     . 
```

使用动态时间扭曲，我发现以下不匹配的点（标有星号）

```
 *
          *   *
        .      .
      .         . 
    .            .
  .               .
.                  .   .
                     . 
```

现在我想扩大错误我所做的是，我将错误（不匹配）点的 x 和 y 坐标乘以因子 x=x*1.2; y=y*1.2；

这给了我这样一个变形的轨迹：

```
 *
       *    *

    .        .
   .           . 
  .              .
 .                 .
.                    .    .
                        . 
```

但我想要一个平滑的轨迹，其中所有的点都改变了，错误扩大了。像这样的东西：

```
 *
       *    *
     .        .

   .             . 
  .                .
 .                  .
.                    .    .
                        . 
```

我怎样才能做到这一点 ？

PS：我真的想不出一个简单的方法来描述我遇到的问题。我正在使用 C++，如果无论如何在解释您的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T15:39:11.640

将 A(t) 定义为时间 = t 时的位移矢量。每个点的位移向量就是它的位置向量 (x,y) 减去前一个位置向量。

放大这些向量以获得缩放的误差向量，然后通过将向量相加来从一个点移动到另一个点。这不仅会改变错误的范围（y 轴），还会改变域（x 轴），因此看起来很平滑。

有什么用？

# dependency-injection - SimpleInjector - 为它的所有接口注册一个类型

> ID：12959078
> 
> 赞同：2
> 
> 时间：2012-10-18T16:13:58.087
> 
> 标签：dependency-injection, simple-injector

是否可以为所有它实现的接口注册一个类型？例如，我有一个：

```
public class Bow : IWeapon
{

    #region IWeapon Members

    public string Attack()
    {
        return "Shooted with a bow";
    }

    #endregion
}

public class HumanFighter 

{
    private readonly IWeapon weapon = null;
    public HumanFighter(IWeapon weapon)
    {
        this.weapon = weapon;
    }

    public string Fight()
    {

        return this.weapon.Attack();
    }

}

    [Test]
    public void Test2b()
    {
        Container container = new Container();
        container.RegisterSingle<Bow>();
        container.RegisterSingle<HumanFighter>();

        // this would match the IWeapon to the Bow, as it
        // is implemented by Bow
        var humanFighter1 = container.GetInstance<HumanFighter>(); 

        string s = humanFighter1.Fight();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:58:46.623

这完全取决于您的需要，但通常您需要使用`Container`的非通用注册方法。您可以定义自己的 LINQ 查询来查询应用程序的元数据以获取正确的类型，并使用非泛型注册方法注册它们。这是一个例子：

```
var weaponsAssembly = typeof(Bow).Assembly;

var registrations =
    from type in weaponsAssembly.GetExportedTypes()
    where type.Namespace.Contains(".Weapons")
    from service in type.GetInterfaces()
    select new { Service = service, Implementation = type };

foreach (var reg in registrations)
{
    container.Register(reg.Service, reg.Implementation);
} 
```

如果您需要批量注册一组实现，基于共享的通用接口，您可以使用[RegisterManyForOpenGeneric](http://simpleinjector.codeplex.com/wikipage?title=Advanced-scenarios#Registration-Of-Open-Generic-Types)扩展方法：

```
// include the SimpleInjector.Extensions namespace.

container.RegisterManyForOpenGeneric(typeof(IValidator<>),
    typeof(IValidator<>).Assembly); 
```

这将在提供的程序集中查找所有（非泛型）公共类型，这些公共类型`IValidator<T>`通过它们的封闭泛型实现实现并注册它们中的每一个。如果一个类型实现了 的多个封闭泛型版本`IValidator<T>`，则所有版本都将被注册。看看下面的例子：

```
interface IValidator<T> { }
class MultiVal1 : IValidator<Customer>, IValidator<Order> { }
class MultiVal2 : IValidator<User>, IValidator<Employee> { }

container.RegisterManyForOpenGeneric(typeof(IValidator<>),
    typeof(IValidator<>).Assembly); 
```

假设给定的接口和类定义，显示的`RegisterManyForOpenGeneric`注册等效于以下手动注册：

```
container.Register<IValidator<Customer>, MultiVal1>();
container.Register<IValidator<Order>, MultiVal1>();
container.Register<IValidator<User>, MultiVal2>();
container.Register<IValidator<Employee>, MultiVal2>(); 
```

添加方便的扩展方法也很容易。以下面的扩展方法为例，它允许您通过其所有实现的接口注册单个实现：

```
public static void RegisterAsImplementedInterfaces<TImpl>(
    this Container container)
{
    foreach (var service in typeof(TImpl).GetInterfaces())
    {
        container.Register(service, typeof(TImpl));
    }
} 
```

它可以按如下方式使用：

```
container.RegisterAsImplementedInterfaces<Sword>(); 
```

# c# - 如何在模板化控件上使用 ItemTemplate？

> ID：12959087
> 
> 赞同：0
> 
> 时间：2012-10-18T16:14:11.347
> 
> 标签：c#, wpf, silverlight, xaml, datatemplate

我正在尝试基于 a 创建自定义模板化控件，`ListBox`以仅显示控件集合中的单个选定项。为此，我定义了一个模板，其`ContentPresenter`数据绑定到`SelectedItem`控件的属性。如场景 1 所示，在为控件提供`UIElement`.

但是当需要使用 a`DataTemplate`来显示实体对象时，会`ItemTemplate`被忽略，因为控件有 a`Template`会阻止使用 `ItemTemplate。从我读过的内容来看，这是设计使然，而且有点道理。

但是我怎样才能使用`DataTemplates`我的控件`ItemTemplate`并保留我的控件默认模板呢？

我尝试过覆盖`PrepareContainerForItemOverride`，许多不同的模板配置都无济于事。

这是我尝试的一些方法：

```
<UserControl.Resources>

    <local:StringCollection x:Key="MyColors">
        <sys:String>Yellow</sys:String>
        <sys:String>Purple</sys:String>
    </local:StringCollection>

</UserControl.Resources>

<StackPanel Background="White">

    <TextBlock Margin="0,25,0,0">Scenario 1: Providing UIElements to the
        ControlTemplate's ContentPresenter: Works</TextBlock>
    <control:RotatingFlipView x:Name="Works" SelectedIndex="1">
        <control:RotatingFlipView.Template>
            <ControlTemplate>
                <ContentPresenter
                     Content="{Binding ElementName=Works, Path=SelectedItem}"/>
            </ControlTemplate>
        </control:RotatingFlipView.Template>
        <Rectangle Height="100" Width="100" Fill="Red"/>
        <Rectangle Height="100" Width="100" Fill="Blue"/>
        <Rectangle Height="100" Width="100" Fill="Green"/>
    </control:RotatingFlipView>

    <TextBlock Margin="0,25,0,0">Scenario 2: The ItemTemplate provided is ignored in
        favor of the RotatingFlipView's Template which displays the source as raw
        Strings</TextBlock>
    <control:RotatingFlipView x:Name="Broken"
                              ItemsSource="{StaticResource MyColors}">
        <control:RotatingFlipView.Template>
            <ControlTemplate>
                <ContentPresenter
                    Content="{Binding ElementName=Broken, Path=SelectedItem}"/>
            </ControlTemplate>
        </control:RotatingFlipView.Template>
        <control:RotatingFlipView.ItemTemplate>
            <DataTemplate>
                <Rectangle Height="100" Width="100" Fill="{Binding}"/>
            </DataTemplate>
        </control:RotatingFlipView.ItemTemplate>
    </control:RotatingFlipView>

    <TextBlock Margin="0,25,0,0">Scenario 3: Removing the RotatingFlipView's
        Template, causes the display to fall back on the ListBox's Template,
        though now my ItemTemplate is used:</TextBlock>
    <control:RotatingFlipView x:Name="Broken2"
                              ItemsSource="{StaticResource MyColors}">
        <control:RotatingFlipView.ItemTemplate>
            <DataTemplate>
                <Rectangle Height="100" Width="100" Fill="{Binding}"/>
            </DataTemplate>
        </control:RotatingFlipView.ItemTemplate>
    </control:RotatingFlipView>

</StackPanel> 
```

旋转翻转视图.cs

```
public class RotatingFlipView : ListBox
{
    public RotatingFlipView()
    {
        DefaultStyleKey = typeof(RotatingFlipView);
    }
} 
```

通用的.xaml

```
<Style TargetType="local:RotatingFlipView">
    <Setter Property="SelectionMode" Value="Single"/>
    <Setter Property="SelectedIndex" Value="0"/>
</Style> 
```

输出： ![输出](../Images/1c0db4b9ccd0507b057ba02093934700.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:34:59.883

我现在想通了。以下是我的做法：

主页.xaml

```
<UserControl.Resources>

    <local:StringCollection x:Key="MyColors">
        <sys:String>Yellow</sys:String>
        <sys:String>Purple</sys:String>
    </local:StringCollection>

</UserControl.Resources>

<StackPanel Background="White">
    <control:RotatingFlipView>
        <Rectangle Height="100" Width="100" Fill="Red"/>
        <Rectangle Height="100" Width="100" Fill="Green"/>
        <Rectangle Height="100" Width="100" Fill="Blue"/>
    </control:RotatingFlipView>

    <control:RotatingFlipView ItemsSource="{StaticResource MyColors}">
        <control:RotatingFlipView.ItemTemplate>
            <DataTemplate>
                <Rectangle Height="100" Width="100" Fill="{Binding}"/>
            </DataTemplate>
        </control:RotatingFlipView.ItemTemplate>
    </control:RotatingFlipView>
<StackPanel/> 
```

旋转翻转视图.cs

```
public class RotatingFlipView : ListBox    
{    
    public RotatingFlipView()    
    {    
        DefaultStyleKey = typeof(RotatingFlipView);    
    }    
} 
```

通用的.xaml

```
<Style TargetType="local:RotatingFlipView">
    <Setter Property="SelectionMode" Value="Single"/>
    <Setter Property="SelectedIndex" Value="0"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="local:RotatingFlipView">

                <ContentPresenter
                    Content="{TemplateBinding SelectedItem}"
                    ContentTemplate="{TemplateBinding ItemTemplate}"/>

            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

# ruby - Ruby: simplest way to convert an array to a hash with named keys?

> ID：12959099
> 
> 赞同：3
> 
> 时间：2012-10-18T16:14:48.033
> 
> 标签：ruby

I have some code in a view script that iterates through an array of arrays:

```
<% @rows.each do |data| %>
  <%= data[0] %>: <%= data[1] %><br>
<% end %> 
```

How can I easily convert each `data` array to a hash so that I can refer to each item with a key?

```
<%= data[:name] %>: <%= data[:email] %><br> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:36:33.840

您可以像这样引用具有命名值的数组：

```
<% @rows.each do |name,email| %>
  <%= name %>: <%= email %><br />
<% end %> 
```

这假定`@rows`数组的每个成员都是预期的二值数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:43:38.253

@Zach 的回答还可以，但是严格按照您的要求回答，可以这样做：

```
@rows2 = @rows.map { |row| Hash[[:name, :email].zip(row)] } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T23:44:39.477

@Zach 和 @tokland 提供了两个很好的答案。有时，最好制作一流的数据对象，而不是依赖原始哈希和数组的组合。 [`Struct`](http://www.ruby-doc.org/core-1.9.3/Struct.html)对此很方便：

```
irb> EmailTuple = Struct.new :name, :email
=> EmailTuple
irb> rows = [%w{foo foo@example.com}, %w{bar bar@example.com}]
=> [["foo", "foo@example.com"], ["bar", "bar@example.com"]]
irb> rows2 = rows.map{ |row| EmailTuple[ *row ] }
=> [#<struct EmailTuple name="foo", email="foo@example.com">, #<struct EmailTuple name="bar", email="bar@example.com">]
irb> rows2.map{ |tuple| "#{tuple.name} has email #{tuple.email}" }
=> ["foo has email foo@example.com", "bar has email bar@example.com"] 
```

# c++ - Overloading << for type inside another class

> ID：12959101
> 
> 赞同：4
> 
> 时间：2012-10-18T16:14:54.407
> 
> 标签：c++, class, operator-overloading

I have a typedef inside a class and I would like to overload the `operator<<` for it to be able to print it in `ostream`. However, the compiler cannot find the overloaded operator. How can I declare it so that it works?

```
#include <iostream>
#include <set>

using namespace std;

template <class C>
struct K {

    typedef std::set<C> Cset;

    Cset s;
    // and many more elements here

    friend ostream& operator<<(ostream& oo, const Cset& ss){
        typename Cset::const_iterator it=ss.begin();
        oo << "[";
        for(; it!=ss.end(); ++it) oo << (*it) << ",";
        oo << "]";
        return oo;
    }

    void DoSomething(){
        // do something complicated here
        cout << s << endl;
        // do something complicated here
    }

};

int main(){
    K <int> k;
    k.s.insert(5);
    k.s.insert(3);
    k.DoSomething();

} 
```

> gcc version 4.4.5 20101112 (Red Hat 4.4.5-2) (GCC)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:21:00.457

When a `friend` function is defined `inline` and there is no forward declaration outside the class, it is only found by `ADL`. However, your overload will never be found by `ADL` as it does not involve `K` arguments (note that `K<int>::CSet` is a *typedef* for `std::set<C>`).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:43:39.003

只是为了完整性：代码的最终版本`operator<<`：

```
template <class T, class U>
std::ostream& operator<<(std::ostream& oo, const std::set <T,U> & ss){
    typename std::set <T,U> ::const_iterator it=ss.begin();
    oo << "[";
    if(it!=ss.end()) oo << (*it++);
    while(it!=ss.end()) oo << "," << (*it++);
    oo << "]";
    return oo;
} 
```

# android - 具有相同 ID 的视图在恢复时获得相同的属性

> ID：12959103
> 
> 赞同：7
> 
> 时间：2012-10-18T16:15:01.160
> 
> 标签：android

我有一个带有一个 RadioGroup 的自定义组件，该组件有两个 RadioButton、ids`@+id/radioButton1`和`@+id/radioButton2`. 另一方面，有一个带有五个选项卡的 TabActivity。在每个选项卡上，此组件都使用了多次。

这是问题所在，当方向更改并重新创建活动时，所有 RadioButton 都加载了相同的 attrs，这包括`android:text`，`android:margin`甚至是我创建的样式化的 attrs。所有具有相同 id 的 CheckBox 也会发生这种情况。

我花了一些时间试图找出为什么会发生这种情况，并得出结论认为 android 是在 onRestoreInstanceState 中这样做的。如果我评论调用 super 方法的行，它可以正常工作。

```
@Override
protected void onRestoreInstanceState(Bundle savedInstanceState) {
    // super.onRestoreInstanceState(savedInstanceState);

} 
```

这是应该的吗？或者可以做些什么来导致这种情况？

我猜这不是正常行为，因为当创建自定义视图时，它会使用具有相同 ID 的相同视图膨胀相同的布局。因此，不可能每次都实例化一个新的自定义视图，为其子视图生成不同的 id。使用上面或`android:configChanges`清单上的代码对我来说似乎是一个不好的解决方法。因此，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:41:17.833

经过一段时间的寻找解释，我终于在 android google 组中找到了一个来自 Romain Guy 的很棒的解释，虽然它没有提到自定义视图。

“使用相同的 id 是可以的，除非您需要视图来保存其状态。id 是在保存状态时标识视图的标识，因此工具包只是认为您的两个视图是相同的。但这仅在活动中是正确的。 "

“在两个不同的活动中使用相同的 id 没有问题。如果你对你正在做的事情很小心，在同一个活动中使用相同的 id 也没有问题（例如，如果具有共享 id 的视图确实不需要保存任何状态。）在您的情况下，因为活动是一组选项卡的一部分，它们实际上与一个独特的上下文相关联，这意味着您将遇到共享 ID 的问题。“

[这是链接](https://groups.google.com/forum/?fromgroups=&hl=pt-BR#!searchin/android-developers/views%2420same%2420ids%2420on%2420restore/android-developers/qcclW4oekVY/7pVg8Ti1RwgJ)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T08:02:45.827

您的 savedInstanceState 方法是什么样的？

我建议分配给单选按钮文本的变量在方向更改之间不会持续存在。请记住，当方向改变时，活动将完全重建/重新启动。

# css - Properly overflow without using javascript to set a static height?

> ID：12959104
> 
> 赞同：1
> 
> 时间：2012-10-18T16:15:03.290
> 
> 标签：css

The problem is simple:

[http://jsfiddle.net/boblauer/wfLGG/](http://jsfiddle.net/boblauer/wfLGG/)

In the left example, I have the whole thing scrolling, which works fine because I can set the scrolling div's height to 100%. In the right example, it doesn't work, because I don't know what my scrolling div's height should be, because it's sharing that space with another element. If I set it to 100%, it overflows from its container, causing the 2nd scrollbar that you see in the example.

I know I can use javascript to set the .scroll-container's height to (container height - height of the header), but is there a pure css solution to this problem? I hate having to use javascript for this, especially because when the window resizes, I have to recalculate the size of the scrolling div.

Edit: Sorry, I wasn't very clear. What I want is for the header to remain static at the top, while the list itself is scrollable.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:45:54.713

设置`overflow: y-scroll;`为 on `#ex2`，它将表现为`#ex1`.

```
#ex1, #ex2 {
    float: left;
    height: 100%; 
    width: 45%;
    border: 1px solid black;   
    overflow: auto;   
}

#ex2 { overflow: y-scroll; } 
```

[演示](http://jsfiddle.net/wfLGG/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:24:06.877

我认为这可能会有所帮助

```
.scroll-container {
    overflow: auto; 
    padding-top:20px;    
}

#ex2 span{
position:absolute;
    background:white;
} 
```

[jsFiddle](http://jsfiddle.net/wfLGG/14/)

# google-apps-script - How to use ChartBuilder.setDataSourceUrl with Fusion Tables?

> ID：12959107
> 
> 赞同：0
> 
> 时间：2012-10-18T16:15:08.540
> 
> 标签：google-apps-script

I have that problem. When I set de URL of my request from my table in Fusion Tables, the chart does not work. It say 'Request timed out' when I play the App.

The code is:

```
var graficoHistoricoMensual=Charts.newAreaChart() .setDataSourceUrl('https://www.googleapis.com/fusiontables/v1/query?sql=select%20ANO,MES,%20count(INCIDENCIA)%20AS%20TotalIncidencias%20from ID_OF_THE_TABLEwhere%20ALMACEN=501%20group%20by%20ANO,MES%20&key=THE_KEY&alt=csv')
.setDataViewDefinition(Charts.newDataViewDefinition().setColumns([0,1]))
.build(); 
```

When I executed this URL on one tab of the browser it work perfectly.

Does Fusion Tables work with Google App Script and this method of the Charts Services?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T20:42:35.227

我从来没有尝试过这个，根据我的经验来回答你，但从错误消息来看，Fusion Tables 对于图表服务来说似乎太慢了。或者，反过来看，图表服务超时对于 Fusion Tables 来说太低了。

如果确实如此，您的回答是否定的，您不能使用这样的融合表（使用`setDataSourceUrl`）。

但是您绝对可以在 Apps Script 中使用 Fusion Tables 数据并传递给图表服务，您只需要自己获取数据（使用`UrlFetchApp`），解析它（使用`JSON.parse`或`Utilities.parseCsv`），然后手动创建图表数据表，`Charts.newDataTable`.

# c# - 如何设置图像链接而不将其添加到我的项目中？

> ID：12959113
> 
> 赞同：1
> 
> 时间：2012-10-18T16:15:19.477
> 
> 标签：c#, asp.net-mvc-3

我有一个网络项目，我想在其中阅读`Content/Images/Funny/`所有有趣的图像:-) 我想在我的图像 url 控制器中生成一个列表并将其推送到视图。

如何使用项目根目录的相对路径访问它？不想使用`Server.MapPath`，因为它会显示我在服务器上的整个路径。

我开始了一个新的 mvc3 项目和我想要映射的它的内容文件夹。有什么提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:22:02.253

在控制器的动作中，您可以使用

```
var path = new UrlHelper(Request.RequestContext).Content("~/Content/Images/Funny/"); 
```

# regex - 用外部文件中的行替换正则表达式匹配

> ID：12959116
> 
> 赞同：0
> 
> 时间：2012-10-18T16:15:28.337
> 
> 标签：regex, perl

使用 Perl，我正在解析一个文本文件并想找到一个关键字和文件名，然后我需要打开该文件（它与正在解析的文件位于同一目录中），从中获取文本并插入它比赛结束后。

file1 = 正在解析的文件

file2 = 要包含的文件

开头的两个文件示例：

```
file1
code code code
%include file2;
code code code

file2
(* a bunch of header information *)
function ( arg : type); 
```

我希望 file1 看起来像什么：

```
file1
code code code
(*%include file2;*)
(* a bunch of header information *)
function ( arg : type);
code code code 
```

我需要帮助开发 perl 来执行此替换。

我写了以下内容，它将文件解析并将其作为字符串读取。我想保留这种方法，因为我已经使用它实施了几次替换，但其余的是开放季节。我也喜欢理解事物，因此如果您不介意对提交的解决方案进行简要说明，我们将不胜感激。

```
#keep this part
open FILEHANDLE, "<", $file or die $!;
$string = do { local $/; <FILEHANDLE> };

#several other replace operations here already written
$string ~= s/match/replace;

#can rewrite this to be anything that works well
#match the include tag
if ($string =~ m/^%include\s+'(\w+).(PRO)'/gi)
{
  #build the replace string
  my $includefile = $1.'.'.$2;
  my $replacestring = "(* $& *) \n";
  open my INCLUDEHANDLE, "<", $includefile or die $!;
  $replacestring += do { local $/; <INLCUDEHANDLE> }

  # I am lost at this point
}

#this is dirty but it works
#close file for read
close FILEHANDLE;
#open file for write
open FILEHANDLE, ">", $file or die $!;
print FILEHANDLE $string;
#close file for write
close FILEHANDLE; 
```

Internet bro-fist 帮助清理我的文件读/写操作并在将其写入 file1 之前从 file2 的内容中剥离 (* header information *) ，如下所示：

```
file1
code code code
(*%include file2*)
function ( arg : type);
code code code 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:31:30.813

除非您有一些复杂的比赛要做，否则您可以使用单线：

```
perl -pi.bak -lwe'$x=qx(cat rep.txt); s/(%include file2;)/(*$1*)$x/g' file1.txt 
```

这会将整个文件“rep.txt”读入`$x`，然后在匹配后插入。

依赖`qx()`哪个是系统调用而不是可移植的并不是最佳选择。写一个开环会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:55:42.683

如果您的文件小到可以被吞食，那么您的任务只是一个花哨的字符串替换：

```
use strict;
use warnings;

# function to replace the match with a string (slurped from
# a file mentioned in group)
sub magic_replace {
    my ($m, $g) = @_;
    sprintf "(%s)\nPlease slurp this from '%s'", $m, $g;
}

my $s =<<'EOF'
I should have
slurped
%include file2.ext2;
this from
%include file3.ext3;
file1.ext1
EOF
;

print "---------\n", $s, "---------\n";

$s =~ s/(%include\s([^;]+);)/
   magic_replace($1, $2)
   /egx;

print "---------\n", $s, "---------\n"; 
```

输出：

```
perl 12959116.pl
---------
I should have
slurped
%include file2.ext2;
this from
%include file3.ext3;
file1.ext1
---------
---------
I should have
slurped
(%include file2.ext2;)
Please slurp this from 'file2.ext2'
this from
(%include file3.ext3;)
Please slurp this from 'file3.ext3'
file1.ext1
--------- 
```

为替换操作使用“回调”函数可以让您专注于（啜饮和）构建替换，并在引擎盖下完成所有循环。

（我们的两种正则表达式模式都可能需要一些修补——你的点，我对虚假空白的疏忽。）

**更新（评论中有问题）**

如果在模式中添加“^”，则需要应用[m 修饰符](http://perldoc.perl.org/perlre.html#Modifiers)。

# matlab - Matlab中的动画矢量

> ID：12959118
> 
> 赞同：0
> 
> 时间：2012-10-18T16:15:34.750
> 
> 标签：matlab

我有过去 10 年的 ndates*50 值数组（其中 ndates=10years 以天为单位）。

50 个值中的每一个都将每天更改。

理想情况下，我希望看到沿 x 轴的值为 1:50 和在 y 轴上的值的 2D 图。

然后，我想更改图表以循环遍历每个日期以相应地更新图表。显然这是以每秒 24 帧的速度完成的（就像电视一样），看起来就像一个动画。

理想情况下，我还希望至少显示日期以表明它是哪个月份，并能够减慢或加快动画的速度。

有人可以向我解释一下，如何做到这一点是 Matalb。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:18:22.313

有几种方法可以完成任务：

1.  使用`timer`带有更新 UI 的回调的对象。
2.  在无限循环中运行并时不时地暂停。
3.  使用 离线创建电影，`VideoWriter`然后使用`movie`命令显示。

# javascript - Merging many arrays into one array (JavaScript)

> ID：12959122
> 
> 赞同：1
> 
> 时间：2012-10-18T16:16:05.857
> 
> 标签：javascript, arrays, object

I'm trying to take an array of many arrays that contain many objects and manipulate it into an array of objects.

So, let's say I have an array that looks like this:

```
[
    [
        {Name: 'Josh', email: 'josh@gmail.com', Points: 33},
        {Name: 'Doug', email: 'doug@gmail.com', Points: 12}
    ],
    [
        {Name: 'Josh', email: 'josh@gmail.com', Points: 11},
        {Name: 'Doug', email: 'doug@gmail.com', Points: 18}
    ],
    [
        {Name: 'Josh', email: 'josh@gmail.com', Points: 2},
        {Name: 'Doug', email: 'doug@gmail.com', Points: 27}
    ]
]​ 
```

The Desired outcome would be an array of objects that has a 'Points' property to hold an array of the points. So it would look like this:

```
[
    {Name: 'Josh', email: 'josh@gmail.com', Points: [33, 11, 2]},
    {Name: 'Doug', email: 'doug@gmail.com', Points: [12, 18, 27]}
] 
```

This problem seems simple, but I can't seem to figure out the best way of doing this. If you want this data in a fiddle, I made this for you to play with: [http://jsfiddle.net/Qhxzz/1/](http://jsfiddle.net/Qhxzz/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:28:38.147

请注意，这取决于输入结构是静态的（这里没有递归）。假设您没有使用任何库：

```
var result = [];

for (var i = 0; i < initial.length; i++) {
    var innerArray = initial[i];

    for (var j = 0; j < innerArray.length; j++) {
        var item = innerArray[j];

        var found = false;
        // search result for an object with a matching email prop
        for (var k = 0; k < result.length; k++) {
            if (result[k].email === item.email) {
                found = true;

                // add this Point to the Points array
                result[k].Points.push(item.Points);
            }
        }

        if (!found) {
            // convert Points to an array of Points
            item.Points = [item.Points];

            result.push(item);
        }
    }
} 
```

[http://jsfiddle.net/Qhxzz/2/](http://jsfiddle.net/Qhxzz/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:42:22.077

`.reduce()`这是使用and的一种方法`.forEach()`。*（如果您支持旧版浏览器，则需要补丁。）*

```
var consolidated = data.reduce(function(holder, arr) {
    arr.forEach(function(obj) {
        if (obj.email in holder.emails)
            holder.emails[obj.email].Points.push(obj.Points);
        else {
            holder.emails[obj.email] = obj;
            holder.result.push(obj);
            obj.Points = [obj.Points];
        }
    });
    return holder;
}, {emails:{},result:[]}).result; 
```

* * *

实际上，我们可以使用 来展平原始 Array `concat.apply()`，并留下一个整体 Array 进行迭代。

```
flat = [].concat.apply([], data); 
```

这会将您`data`变成这样的结构：

```
[{Name:"Josh", email:"josh@gmail.com", Points:33},
 {Name:"Doug", email:"doug@gmail.com", Points:12},
 {Name:"Josh", email:"josh@gmail.com", Points:11},
 {Name:"Doug", email:"doug@gmail.com", Points:18},
 {Name:"Josh", email:"josh@gmail.com", Points:2},
 {Name:"Doug", email:"doug@gmail.com", Points:27}] 
```

并且通过消除对内部`.forEach()`.

```
var consolidated = flat.reduce(function(holder, obj) {
    if (obj.email in holder.emails)
        holder.emails[obj.email].Points.push(obj.Points);
    else {
        holder.emails[obj.email] = obj;
        holder.result.push(obj);
        obj.Points = [obj.Points];
    }
    return holder;
}, {emails:{}, result:[]}).result; 
```

# ruby-on-rails - 循环文本并在 Rails 中提取预定义的单词和单词对

> ID：12959124
> 
> 赞同：0
> 
> 时间：2012-10-18T16:16:09.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3, text, nlp

我有一大串文本`description`，最长可达 500 字。我想做以下事情：

1.  循环`description`并从 array 中查找大量预定义的单词`keywords`，其中包含单个单词、单词对和单词三元组。
2.  每次找到匹配项时，将此匹配项添加到一个新数组中`matches`（除非已经在该过程的早期添加）并从`description`.

我已经四处寻找解决方案，但他们中的大多数似乎要么深入自然语言处理的深处，这对于我当前的需求来说太复杂了，要么只是将文本字符串拆分为空格，这意味着它是然后不可能寻找单词对。

非常感谢任何关于如何有效地做到这一点的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:04:33.113

```
description = "The quick brown fox jumped over the lazy dog, and another brown dog"

keywords = ["brown", "lazy", "apple"]

matches = []

keywords.each do |keyword|
  matches << description.match(keyword).to_s if description.match(keyword)
end

puts matches
 #=> ["brown", "lazy"]

matches.each do |keyword|
  description.gsub!(Regexp.new(keyword), '')
end

description.gsub!('  ', ' ')

puts description
 #=> "The quick fox jumped over the dog, and another dog" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:27:49.547

这是我想到的粗略的黑客攻击:)

```
keywords.select do |keyword| 
  description =~ /\b#{Regexp.escape(keyword)}\b/
  # -or-
  description.gsub(/\b#{Regexp.escape(keyword)}\b/) do |match|
    # whatever
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:04:11.550

您可以为数组中的每个单词设置阈值频率

循环浏览描述中的文本

```
If word matches exactly with description text then increase the threshold frequency by 1 point 
```

最后，频率大于 0 的单词将其放入新的数组匹配并从中删除`description`

例如，

```
If any word repeated for 2 times,
It's frequency will be 0 + 2 and
Initially it should be 0. 
```

# java - Android Java HttpUrlConnection 冻结

> ID：12959125
> 
> 赞同：2
> 
> 时间：2012-10-18T16:16:13.283
> 
> 标签：java, android, http, freeze

我怀疑我在简单的 Android 应用程序中遇到了一些线程问题。

我有一个 Activity 执行以下操作：

1.  在主线程上运行一个对话框
2.  旋转一个后台线程并点击一个 PHP 脚本以使用`DefaultHttpClient`并关闭此连接来检索数据。这成功地返回了一个指向互联网上图片的 URL
3.  打开`HttpUrlConnection`调用`conn`并尝试 conn.connect
4.  应用程序此时冻结，没有错误

不知道该放什么代码，我可以全部粘贴，但这太多了，所以如果需要更多信息，请告诉我：

```
/**
 * Background Async Task to Load all Question by making HTTP Request
 */
class LoadAllImages extends AsyncTask<String, String, String> {
  /**
   * Before starting background thread Show Progress Dialog
   * */
  @Override
  protected void onPreExecute() {
    super.onPreExecute();
    // dialog init'd here
  }

  @Override
  protected String doInBackground(String... args) {
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    // getting JSON string from URL
    JSONObject json = jParser.makeHttpRequest(url_question_details, "GET", params);

    // Check your log cat for JSON response
    Log.d("All Questions: ", json.toString());

    try {

        // images found
        // Getting Array of questions
        images = json.getJSONArray(TAG_IMAGES);

        // looping through All questions
        for (int i = 0; i < images.length(); i++) {
          JSONObject c = images.getJSONObject(i);

          // Storing each json item in variable
          String id = c.getString(TAG_IMAGEID);
          String location = c.getString(TAG_IMAGELOCATION);

          URL myFileUrl = null;
          try {
            myFileUrl = new URL(location);
          } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
          }
          try {
            HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
            conn.setDoInput(true);
            conn.connect(); // freezes here
            int length = conn.getContentLength();
            int[] bitmapData = new int[length];
            byte[] bitmapData2 = new byte[length];
            InputStream is = conn.getInputStream();
          } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
          } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:34:05.887

**首先确保您添加了 Internet 权限到清单：**

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

**在您的 AndroidManifest.xml 中的应用程序标记之外**

* * *

## 故障排除：

1.  尝试使用浏览器访问相同的 URL
2.  检查您是否不在代理后面或服务器不在代理后面
3.  尝试 ping 服务器查看并检查延迟。
4.  尝试捕获所有异常：

更改`} catch (IOException e) {`为`} catch (Exception e) {`

* * *

如果一切看起来不错，请尝试以下代码：

```
System.setProperty("http.keepAlive", "false");
HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
conn.setUseCaches(false); 
conn.setConnectTimeout(30000);
conn.setDoOutput(true); 
conn.setDoInput(true); 

//conn.connect(); // You are allready connected after openConnection(). 
```

**如果仍然没有运气，请尝试使用`HttpClient`&`HttpGet`这种方式：**

```
final HttpClient client = new DefaultHttpClient();
final HttpGet conn = new HttpGet(myFileUrl.toString());

HttpResponse response = client.execute(conn);
InputStream is = response.getEntity().getContent(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-16T11:35:32.507

我至少会同时设置连接和读取超时，例如

> ```
>  conn.setConnectTimeout(5000);
>       conn.setReadTimeout(5000); 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-19T16:43:42.610

我有完全相同的问题让我疯狂地解决。我已经设置了 timout 参数，但是 httpurlconnection 挂在 connect() 调用上，或者如果我没有显式调用 connect()，则稍后挂起 getInputStream()。

使用原始线程而不是 asynctask 对我有用，而无需更改任何其他内容...

```
new Thread(() -> task.doInBackground()) 
```

解决方法多于解决方案，但总比没有好。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T16:42:41.043

删除这两行：

```
conn.setDoInput(true);
conn.connect(); // freezes here 
```

当你这样做时：

```
HttpURLConnection conn = (HttpURLConnection) myFileUrl.openConnection();
int length = conn.getContentLength(); 
```

您已经连接。调用`conn.getContentLength()`原因`HttpURLConnection`以建立连接，发送请求并获取响应。您不需要显式连接。您也不需要调用`setDoInput(true)`，因为这是默认设置。

# wordpress - Wordpress 小部件 Textarea 自动段落

> ID：12959127
> 
> 赞同：0
> 
> 时间：2012-10-18T16:16:22.067
> 
> 标签：wordpress, plugins, widget, textarea, paragraph

我正在为客户站点拼凑一个我认为相当简单的小部件，但作为我的第二个小部件，我仍然需要克服相当多的学习曲线。

## 故事

在这个特定的项目中，我尝试创建一些 textarea 输入以输出到一些简单的段落标签中。但我有点尽可能合乎逻辑地处理它，但我确信这是相当粗略的代码，因为即使按照最精简的标准，我也不是 PHP 专家。

## 问题

我的问题是我希望我的 textarea 输出带有自动分段功能。例如选中复选框时 wordpress 提供的默认文本小部件。也可以看看我是如何创建文本区域的。我相信有比我放在一起更好的做法。

### 文本区域示例

```
<p>
        <label for="<?php echo $this->get_field_id( 'admitted' ); ?>"><?php _e('Admitted to Practice', 'framework') ?></label>
        <textarea class="widefat" id="<?php echo $this->get_field_id( 'admitted' ); ?>" name="<?php echo $this->get_field_name( 'admitted' ); ?>" value="<?php echo $this->get_field_name( 'admitted' ); ?>" /><?php echo $instance['admitted']; ?></textarea>
    </p> 
```

我不知道将tinymce放在他们身上是否有助于解决这个问题（不是我知道该怎么做）但我对建议持开放态度。

看看这里的完整代码。 [小部件的 Dropbox Zip](https://www.dropbox.com/s/iies0yt5efg2sq6/attorney_information.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:17:07.900

我能够使用下面的代码完成此操作。

```
<p><strong>Admitted to Practice:</strong><br/><?php echo wpautop($this->admitted_practice); ?></p> 
```

谢谢你的回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T02:13:57.407

您知道您可以轻松查看默认小部件的构建方式，对吧？只需转到 wp-includes/default-widgets.php

如果我正确理解您的问题，您正在该文件的 WP_Widget_Text 类中寻找这段代码，

```
 if ( !empty( $title ) ) { echo $before_title . $title . $after_title; } ?>
                <div class="textwidget"><?php echo !empty( $instance['filter'] ) ? wpautop( $text ) : $text; ?></div> 
```

正如您所看到的，正是 wpautop 函数起到了作用。

我认为您创建表单的方式很好。如果您想学习最佳实践，Wordpress 源代码同样很有用。

# jquery - 在相关父级中选择类的 jQuery 语法

> ID：12959128
> 
> 赞同：0
> 
> 时间：2012-10-18T16:16:24.587
> 
> 标签：jquery, syntax, jquery-selectors

我有一个“添加”按钮，每次单击时都会插入该行。每行都有一个编辑和删除按钮。

```
//html
<tr class="insertedRow">
    <td><input type="hidden" class="name" /></td>
    <td><input type="hidden" class="age" /></td>
    <td>
        <input type="button" class="edit" class="btn" value="Edit" />
        <input type="button" class="delete" value="Delete" />
    </td>
</tr> 
```

我有这个 jQuery 来删除您要删除的相应行。但是当您单击“编辑”时，我无法弄清楚如何选择相应行的“姓名”和“年龄”我现在拥有的代码始终针对第一个插入的行。有任何想法吗？谢谢。

我想我需要以某种方式选择“编辑”按钮的 parent.parent，然后定位“名称”和“年龄”ID。

```
//jQuery
$(".delete").live('click',function() {
    $(this).parent().parent().remove();
});

$(".edit").live('click',function() {
    $('.name').clone().attr('type','text').insertAfter('.name').prev().remove();
    $('.age').clone().attr('type','text').insertAfter('.age').prev().remove();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:17:23.163

首先将 id 转换为类：

```
<td><input type="hidden" class="name" /></td>
<td><input type="hidden" class="age" /></td> 
```

然后 ：

```
$("#edit").live('click',function() { $name =
   var name =  $(this).closest(".insertedRow").find(".name");
   var age =  $(this).closest(".insertedRow").find(".age");

   name.clone().attr('type','text').insertAfter(name).prev().remove();
   age.clone().attr('type','text').insertAfter(age).prev().remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:18:20.380

`id`除非您更改其 id，否则您无法克隆具有属性的元素。

请[阅读本文](https://stackoverflow.com/a/11114634/601179)以了解为什么它每次都为您提供第一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:21:41.770

为了避免重复`id`，你可以做这样的事情

```
var lastid = $('[id^="clonedInput"]').length + 1;
$(".clonedInput").last().clone().attr('id', 'clonedInput' + lastid).appendTo("body") 
```

或使用`.class`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:25:58.600

一方面，您的单击事件处理程序的目标是一个名为“#name”的 ID……但是您对行的克隆可确保您将拥有多个具有相同 ID 的元素。

此外，jQuery 的文档清楚地表明禁止更改类型 attr：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

> 注意：jQuery 禁止更改 or 元素的 type 属性，并且会在所有浏览器中抛出错误。这是因为不能在 Internet Explorer 中更改类型属性。

此外，正如其他人指出的那样，您可能不应该使用 .live()，因为它已被弃用（意味着它在不确定的将来会消失）......您应该考虑使用 .on()，因为这是支持的方向。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T16:24:18.973

这是值：

```
$(this).parent().find(".name").text();
$(this).parent().find(".age").text(); 
```

和你的编辑功能：

```
$(".edit").live('click',function() {
    $('.name').clone().attr('type','text').insertAfter('.name').value($(this).parent().find(".name").text()).prev().remove();
    $('.age').clone().attr('type','text').insertAfter('.age').value($(this).parent().find(".age").text()).prev().remove();
}); 
```

# security - 服务器端共享密钥生成的安全协议

> ID：12959134
> 
> 赞同：0
> 
> 时间：2012-10-18T16:16:42.183
> 
> 标签：security, rsa, pgp, shared-secret

我正在尝试实现具有以下要求的安全系统：

*   所有客户端共享一个密码，服务器**不**知道该密码
*   每个客户端都有一个**唯一的**客户端 ID，**服务器**知道该ID
*   所有知道密码的客户端都必须能够在服务器上生成相同的共享密钥（这个秘密可以是任何东西，它只需要对所有客户端都相同，并且在密码中是唯一的）
*   即使服务器或传输被黑客入侵，密码也需要保持安全
*   具有不同 client-id 的另一方必须不可能在不知道密码的情况下生成相同的服务器端机密

让我试着给出一个图形表示：

```
 Client                         Server
.--------------^-----------.       .----------^----------.

          f(client-id 1)              g(client-id 1)
PASSWORD ----------------> request 1 ----------------> KEY
   || equal                                             || equal
PASSWORD ----------------> request 2 ----------------> KEY
          f(client-id 2)              g(client-id 2) 
```

这里，f() [g()] 是客户端 [server] 应用到密码 [re​​quest] 以获取请求 [key] 的函数。这些功能可能取决于客户端 ID。

我想出了两种方法可以做到这一点，但我希望有一些更简单的方法，需要更少的流量和更少的服务器负载：

1.  “不费吹灰之力”：客户端散列密码。客户端和服务器各自使用标准机制（如 SSL）来保护它们的连接并通过此连接发送散列。

2.  “更聪明一点”：服务器有一个固定的私钥编码，每个客户端都有一个公钥编码。客户端对密码进行哈希处理，将其与客户端 ID 进行异或运算，并使用公钥使用 RSA/PGP 对结果进行加密。然后，服务器使用私钥对请求进行解密，并将结果与​​ client-id 进行异或，以得到密码哈希。

在这两种情况下，服务器最终都会为客户端提供相同的秘密：密码哈希。第二个版本的优点是不需要完整的密钥交换和加密系统的开销，因为不幸的是我不能在所有情况下都依赖 SSL。事实上，它允许我在一个请求中生成服务器密码，而无需任何握手。第二个版本中的 client-id-XOR 用于防止重放攻击，在这种情况下，具有不同 client-id 的第三方可以简单地将相同的加密消息发送到服务器以生成相同的秘密。基本上，这是一种添加盐的无开销方式。

现在的问题：

由于我对服务器端秘密没有任何要求，甚至客户端可以在本地生成这个秘密，**有没有一种更简单的方法来做到这一点**，它不需要对任意精度数字进行昂贵的模幂运算，例如RSA呢？我正在考虑上面的 f() 和 g() 的某种其他陷门函数，它可以让我获得相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:13:06.630

没有接受者，我猜......这个问题可能太模糊了......

无论如何：现在我决定使用 RSA（即上面的方法 2）。它的实现很简单，并且使用正确的库，运行起来也不会太昂贵。

# windows-phone-7 - 将带有链接的文本绑定到 RichTextBox

> ID：12959137
> 
> 赞同：6
> 
> 时间：2012-10-18T16:16:56.387
> 
> 标签：windows-phone-7, richtextbox

我需要将可能包含超链接的文本绑定到 RichTextBox，以便它可以将文本显示为普通文本并将链接显示为超链接。

例如，我有以下文字：

```
Join us on social networks
http://www.facebook.com/ 
```

我希望文本中的链接是超链接，因此 RichTextBox 中的结果将如下所示：

加入我们的社交网络

[http://www.facebook.com/](http://www.facebook.com/)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T18:46:30.067

我实现了我需要的

```
using System;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Text.RegularExpressions;
using System.Windows.Media;

namespace NazarGrynko.UI.Controls
{
    public class MyRichTextBox : RichTextBox
    {
        private const string UrlPattern = @"(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?";
        public static readonly DependencyProperty TextProperty =
            DependencyProperty.Register("Text", typeof (string), typeof(MyRichTextBox ), new PropertyMetadata(default(string), TextPropertyChanged));

        public string Text
        {
            get { return (string) GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        private static void TextPropertyChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs dependencyPropertyChangedEventArgs)
        {
            var richTextBox = (MyRichTextBox)dependencyObject;
            var text = (string) dependencyPropertyChangedEventArgs.NewValue;
            int textPosition = 0;
            var paragraph = new Paragraph();

            var urlMatches = Regex.Matches(text, UrlPattern);
            foreach (Match urlMatch in urlMatches)
            {
                int urlOccurrenceIndex = text.IndexOf(urlMatch.Value, textPosition, StringComparison.Ordinal);

                if (urlOccurrenceIndex == 0)
                {
                    var hyperlink = new Hyperlink
                                        {
                                            NavigateUri = new Uri(urlMatch.Value),
                                            TargetName = "_blank",
                                            Foreground = Application.Current.Resources["PhoneAccentBrush"] as Brush
                                        };
                    hyperlink.Inlines.Add(urlMatch.Value);
                    paragraph.Inlines.Add(hyperlink);
                    textPosition += urlMatch.Value.Length;
                }
                else
                {
                    paragraph.Inlines.Add(text.Substring(textPosition, urlOccurrenceIndex - textPosition));
                    textPosition += urlOccurrenceIndex - textPosition;
                    var hyperlink = new Hyperlink
                                        {
                                            NavigateUri = new Uri(urlMatch.Value),
                                            TargetName = "_blank",
                                            Foreground = Application.Current.Resources["PhoneAccentBrush"] as Brush
                                        };
                    hyperlink.Inlines.Add(urlMatch.Value);
                    paragraph.Inlines.Add(hyperlink);
                    textPosition += urlMatch.Value.Length;
                }
            }

            if (urlMatches.Count == 0)
            {
                paragraph.Inlines.Add(text);
            }

            richTextBox.Blocks.Add(paragraph);
        }
    }
} 
```

使用示例：

```
<MyRichTextBox Text="{Binding Message}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:36:17.413

解析超链接，并创建以下结构（当然是使用 C#）：

```
<RichTextBlock>
    <Run>Hello World!</Run>
    <Hyperlink NavigateUri="http://www.stackoverflow.com">http://www.stackoverflow.com</Hyperlink> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T03:01:31.843

感谢您的解决方案！

我在最后做了一个小的修改，我用只添加全文子字符串的行替换了对计数的检查，这样它不会截断最后一个 URL 之后的所有内容，所有文本都被保留。

```
 paragraph.Inlines.Add(text.Substring(textPosition, text.Length - textPosition));

        //if (urlMatches.Count == 0)
        //{
        //    paragraph.Inlines.Add(text);
        //} 
```

# sql - SQL 在同一个表上进行多个连接，以便一个实体设置了所有字段

> ID：12959139
> 
> 赞同：0
> 
> 时间：2012-10-18T16:17:07.750
> 
> 标签：sql, join, relational-database

我有下表（它是每个横幅和可用尺寸的列表）：

```
bannerid, bannersize
--------------------
1, 16
1, 32
1, 128
2, 16
2, 32
2, 128
2, 256
2, 512
3, 16
3, 32
3, 64
3, 128
3, 256
3, 512
3, 1024 
```

我需要能够生成具有所有可能大小（16、32、64、128、256、512、1024）的所有bannerid的列表

所以在这个例子中，结果应该是：

```
bannerid
--------
3 
```

由于bannerid 3 具有上述所有可能的尺寸（1 和2 缺少一些尺寸）。

实现这一目标的好方法是什么？我认为有比在同一张表上执行 7 次连接并检查每个可能的大小组合是否存在更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:22:54.157

```
select bannerid, count(bannersize) 
from tbl_banners  
where bannersize in (16, 32, 64, 128, 256, 512, 1024) 
group by bannerid  
having count(bannersize) = 7 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:23:47.377

```
 SELECT bannerid
     FROM tbl
 GROUP BY bannerid
   HAVING COUNT(bannersize) = (SELECT COUNT(DISTINCT bannersize) FROM tbl) 
```

如果您需要`bannerid`完整的集合，**无论**表中存在什么，这都有效`bannersizes`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:20:59.397

```
select bannerid
from t
group by bannerid
where count(distinct bannersize) = 7 
```

# xcode - 更改表格视图页脚中按钮的按钮文本颜色

> ID：12959145
> 
> 赞同：2
> 
> 时间：2012-10-18T16:17:29.040
> 
> 标签：xcode, uiview, uibutton, uicolor

我有一个 UIView，我将它做成了一个按钮，添加到我的表格视图下方：

```
myUIView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 120,50)];
UIButton *myButton = [UIButton buttonWithType:UIButtonTypeCustom];
[myButton setAutoResizingMask:  [UIViewAutoResizingFlexibleWidth|UIViewAutoResizingFlexibleHeight];
[myButton setFrame:CGRectMake(20,0,80,40)];

myButton.titleLabel.textColor = [UIColor blackColor]; //Doesn't seem to work

[myButton setTitle:@"Test" forState:UIControlStateNormal];
myButton.titleLabel.font = [UIFont boldSystemFontOfSize:18];
[myButton setBackgroundImage:[[UIImage imageNamed:@"myImage.png"] stretchableImageWithLeftCapWidth:10.0 topCapHeight:0.0] forState:UIControlStateNormal];
[myButton addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside];
[myUIView addSubView:myButton]; 
```

无论我尝试什么，字体似乎总是白色的。我能做些什么来改变字体的颜色？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T17:19:38.470

你想使用 setTitleColor: forState:

```
[myButton setTitleColor:[UIColor blackColor] forState:UIControlStateNormal]; 
```

# c++ - 如何访问由udev在opencv中符号链接的网络摄像头

> ID：12959150
> 
> 赞同：3
> 
> 时间：2012-10-18T16:17:50.993
> 
> 标签：c++, python, linux, opencv, video-capture

我正在开发一个需要多个网络摄像头的应用程序。为了确保应用程序的每个部分都使用正确的网络摄像头，我创建了一些 udev 规则，将网络摄像头 SYMLINK 到特定名称，具体取决于序列号。

这很好用，我可以使用 VLC 和各种其他应用程序通过该名称访问相机。

但是，当我尝试使用 OpenCV 和 python 以该名称（或 linux 给出的非符号化名称）访问相机时，我无法从相机中读取帧并且我的程序挂起。摄像头打开成功。我在 C++ 中创建了一个示例应用程序来测试它是否可能是与 python/opencv 相关的错误，但同样的事情也发生在 C++ 中。

这是我的 C++ 测试应用程序不起作用：

```
#include <iostream>
#include <opencv2/opencv.hpp>

using namespace std;
using namespace cv;

int main (int argc, const char * argv[])
{
    VideoCapture cap("/dev/my_custom_name");
    if (!cap.isOpened())
        return -1;

    cout << "Opened..." << endl;

    Mat img;
    namedWindow("video capture", CV_WINDOW_AUTOSIZE);
    while (true)
    {
        cout << "Trying..." << endl;
        cap >> img;
        cout << "Got" << endl;
        imshow("video capture", img);
        if (waitKey(10) >= 0)
            break;
    }
    return 0;
} 
```

我收到`Opened...`and`Trying...`消息，但没有收到`Got`消息。

关于如何解决这个问题的任何想法？

（顺便说一句，这都是在linux上）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:58:38.447

我想通了。当我在 VLC 中打开捕获时，我注意到它的文件名前缀为`v4l2://`. 当我在我的应用程序中做同样的事情时，它奏效了！

所以要参考上面，`"/dev/my_custom_name"`应该变成`"v4l2:///dev/my_custom_name"`.

# jquery - jQuery UI 可排序点击事件

> ID：12959151
> 
> 赞同：5
> 
> 时间：2012-10-18T16:17:57.330
> 
> 标签：jquery, jquery-ui, click, jquery-ui-sortable

我有 2 个可排序的列表（#sortable1 和 #sortable2），并且我创建了 2 个`click()`函数来处理每个可排序的项目单击事件（`$("#sortable1 li").click(function(){})`和`$("#sortable2 li").click(function(){})`）。

我将 1 个项目从 #sortable1（例如：Sort1 Item 2）列表移动到 #sortable2 列表。问题是当项目已移动到 #sortable2 并且我尝试单击它时，触发的 mouseevent`$("#sortable1 li").click(function(){})`不是`$("#sortable2 li").click(function(){})`.

有什么建议吗，如果我将项目从 sortable1 移动到 sortable2 并单击该项目，该项目会触发`$("#sortable2 li").click(function(){})`吗？

**演示**：http: [//jsfiddle.net/yosafatade/zX3pX/12/](http://jsfiddle.net/yosafatade/zX3pX/12/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:35:54.560

我会使用`.on`已`.delegate`被取代的。这样，您将事件附加到列表而不是列表项。

用这个：

```
$("#sortable1").on("click", "li", function(){
        $("#testClickSort1").html($(this).html());
});

$("#sortable2").on("click", "li", function(){
        $("#testClickSort2").html($(this).html());
}); 
```

小提琴：http: [//jsfiddle.net/qkCcS/](http://jsfiddle.net/qkCcS/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:27:35.493

您需要使用`on()`查看更新[http://jsfiddle.net/zX3pX/13/](http://jsfiddle.net/zX3pX/13/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:31:55.603

我可能会为`li`它所在的表的每个项目添加一个类。例如

```
<li class='sort1'></li> 
```

然后当您检查`.click`并`$(".sort1")`移动项目时运行

```
$(this).removeClass("sort1");
$(this).addClass("sort2"); 
```

# sql - 排除出现在 CONNECT BY 查询的另一列中的结果

> ID：12959153
> 
> 赞同：6
> 
> 时间：2012-10-18T16:18:05.247
> 
> 标签：sql, oracle, hierarchical-data

有一个繁重的查询（需要 15 分钟才能运行），但它返回的结果比我需要的要多。这是一个 CONNECT BY 查询，我得到的是根节点结果中的后代节点。IE：

```
Ted
  Bob
    John
Bob
  John
John 
```

通常，解决此问题的方法是使用 START WITH 条件，通常要求节点的父节点为空。但是由于查询的性质，在获得完整结果集之前，我没有需要比较的 START WITH 值。我基本上是在尝试对我的结果进行双重查询，以说出 QUERY STUFF START WITH RECORDS THAT ART IN THE STUFF。

[这是查询（在Nicholas Krasnov](https://stackoverflow.com/users/997660/nicholas-krasnov) 的帮助下构建，这里： [Oracle Self-Join on multiple possible column matches - CONNECT BY?](https://stackoverflow.com/questions/12886371/oracle-self-join-on-multiple-possible-column-matches-connect-by/12888591)）：

```
select cudroot.root_user, cudroot.node_level, cudroot.user_id, cudroot.new_user_id,
       cudbase.*  -- Not really, just simplyfing
from   css.user_desc cudbase
  join (select connect_by_root(user_id) root_user,   
               user_id                  user_id,        
               new_user_id              new_user_id,
               level                    node_level
        from   (select cudordered.user_id,      
                       coalesce(cudordered.new_user_id, cudordered.nextUser) new_user_id
                from   (select cud.user_id, 
                               cud.new_user_id, 
                               decode(cud.global_hr_id, null, null, lead(cud.user_id ignore nulls) over (partition by cud.global_hr_id order by cud.user_id)) nextUser
                        from   css.user_desc cud
                          left join gsu.stg_userdata gstgu
                            on (gstgu.user_id = cud.user_id 
                                or (gstgu.sap_asoc_global_id = cud.global_hr_id))
                        where  upper(cud.user_type_code) in ('EMPLOYEE','CONTRACTOR','DIV_EMPLOYEE','DIV_CONTRACTOR','DIV_MYTEAPPROVED')) cudordered)
        connect by nocycle user_id = prior new_user_id) cudroot
    on cudbase.user_id = cudroot.user_id
order by 
       cudroot.root_user, cudroot.node_level, cudroot.user_id; 
```

这为我提供了有关相关用户的结果（基于 user_id 重命名或关联的 SAP ID），如下所示：

```
ROOT_ID     LEVEL   USER_ID         NEW_USER_ID
------------------------------------------------
A5093522    1       A5093522        FG096489
A5093522    2       FG096489        A5093665
A5093522    3       A5093665        
FG096489    1       FG096489        A5093665
FG096489    2       A5093665
A5093665    1       A5093665 
```

我需要的是一种过滤第一个`join (select connect_by_root(user_id)...`要排除`FG096489`和`A5093665`从根列表中的方法。

我能想到的最好`START WITH`的看起来像这样（尚未测试）：

```
start with user_id not in (select new_user_id 
                           from   (select coalesce(cudordered.new_user_id, cudordered.nextUser) new_user_id
                                   from   (select cud.new_user_id, 
                                                  decode(cud.global_hr_id, null, null, lead(cud.user_id ignore nulls) over (partition by cud.global_hr_id order by cud.user_id)) nextUser
                                           from   css.user_desc cud
                                           where  upper(cud.user_type_code) in ('EMPLOYEE','CONTRACTOR','DIV_EMPLOYEE','DIV_CONTRACTOR','DIV_MYTEAPPROVED')) cudordered)
                           connect by nocycle user_id = prior new_user_id) 
```

...但我有效地执行了两次我的 15 分钟查询。

我查看了在查询中使用分区，但实际上并没有分区...我想查看 new_user_ids 的完整结果集。还探索了rank()等分析函数……我的花招是空的。

有任何想法吗？

**澄清**

我不想要根列表中的额外记录的原因是因为我只想要每个用户的一组结果。IE，如果 Bob Smith 在他的职业生涯中有四个账户（人们经常来来往往，作为员工和/或承包商），我想使用一组都属于 Bob Smith 的账户。

如果 Bob 作为承包商来到这里，转换为员工，离开，作为承包商回到另一个国家，然后离开/返回到现在在我们 SAP 系统中的合法组织，他的帐户重命名/链可能如下所示：

```
Bob Smith  CONTRACTOR   ----    US0T0001  ->  US001101  (given a new ID as an employee)
Bob Smith  EMPLOYEE     ----    US001101  ->  EB0T0001  (contractor ID for  the UK)
Bob Smith  CONTRACTOR  SAP001   EB0T000T                (no rename performed)
Bob Smith  EMPLOYEE    SAP001   TE110001                (currently-active ID) 
```

在上面的示例中，四个帐户通过`new_user_id`在用户重命名时设置的字段或通过具有相同的 SAP ID 进行链接。

由于 HR 经常无法遵循业务流程，因此返回的用户最终可能会将这四个 ID 中的任何一个都还原给他们。我必须分析 Bob Smith 的所有 ID 并说“Bob Smith 只能恢复 TE110001”，如果他们尝试恢复其他内容，则返回错误。我必须为 90,000 多条记录执行此操作。

第一列“Bob Smith”只是关联帐户组的标识符。在我最初的示例中，我使用根用户 ID 作为标识符（例如 US0T0001）。如果我使用名字/姓氏来识别用户，我最终会发生冲突。

所以鲍勃史密斯看起来像这样：

```
US0T0001  1  CONTRACTOR   ----    US0T0001  ->  US001101  (given a new ID as an employee)
US0T0001  2  EMPLOYEE     ----    US001101  ->  EB0T0001  (contractor ID for  the UK)
US0T0001  3  CONTRACTOR  SAP001   EB0T0001                (no rename performed)
US0T0001  4  EMPLOYEE    SAP001   TE110001                (currently-active ID) 
```

... 其中 1、2、3、4 是层次结构中的级别。

由于 US0T0001、US001101、EB0T0001 和 TE110001 都占了，我不想再为它们分组。但是我现在将这些帐户列在多个组中的结果：

```
US001101  1  EMPLOYEE     ----    US001101  ->  EB0T0001  (
US001101  2  CONTRACTOR  SAP001   EB0T0001                
US001101  3  EMPLOYEE    SAP001   TE110001               

EB0T0001  1  CONTRACTOR  SAP001   EB0T0001               
EB0T0001  2  EMPLOYEE    SAP001   TE110001                

US001101  1  EMPLOYEE    SAP001   TE110001 
```

这会导致两个问题：

1.  当我查询用户 ID 的结果时，我得到了来自多个组的点击
2.  每个组将为 Bob Smith 报告不同的预期用户 ID。

您要求提供一组扩展的记录...以下是一些实际数据：

```
-- NumRootUsers tells me how many accounts are associated with a user.
-- The new user ID field is explicitly set in the database, but may be null.
-- The calculated new user ID analyzes records to determine what the next related record is

          NumRoot                   New User    Calculated
RootUser  Users    Level  UserId    ID Field    New User ID   SapId       LastName        FirstName
-----------------------------------------------------------------------------------------------
BG100502  3        1      BG100502  BG1T0873    BG1T0873                  GRIENS VAN      KION
BG100502  3        2      BG1T0873  BG103443    BG103443                  GRIENS VAN      KION
BG100502  3        3      BG103443                            41008318    VAN GRIENS      KION

-- This group causes bad matches for Kion van Griens... the IDs are already accounted for,
-- and this group doesn't even grab all of the accounts for Kion.  It's also using a new 
-- ID to identify the group
BG1T0873  2        1      BG1T0873  BG103443    BG103443                  GRIENS VAN      KION
BG1T0873  2        2      BG103443                            41008318    VAN GRIENS      KION

-- Same here...
BG103443  1        1      BG103443                            41008318    VAN GRIENS      KION

-- Good group of records 
BG100506  3        1      BG100506              BG100778      41008640    MALEN VAN       LARS
BG100506  3        2      BG100778              BG1T0877      41008640    MALEN VAN       LARS
BG100506  3        3      BG1T0877                            41008640    VAN MALEN       LARS

-- Bad, unwanted group of records
BG100778  2        1      BG100778              BG1T0877      41008640    MALEN VAN       LARS
BG100778  2        2      BG1T0877                            41008640    VAN MALEN       LARS

-- Third group for Lars
BG1T0877  1        1      BG1T0877                            41008640    VAN MALEN       LARS

-- Jan... fields are set differently than the above examples, but the chain is calculated correctly
BG100525  3        1      BG100525              BG1T0894      41008651    ZANWIJK VAN     JAN
BG100525  3        2      BG1T0894  TE035165    TE035165      41008651    VAN ZANWIJK     JAN
BG100525  3        3      TE035165                            41008651    VAN ZANWIJK     JAN

-- Bad
BG1T0894  2        1      BG1T0894  TE035165    TE035165      41008651    VAN ZANWIJK     JAN
BG1T0894  2        2      TE035165                            41008651    VAN ZANWIJK     JAN

-- Bad bad
TE035165  1        1      TE035165                            41008651    VAN ZANWIJK     JAN

-- Somebody goofed and gave Ziano a second SAP ID... but we still matched correctly
BG100527  3        1      BG100527              BG1T0896      41008652    STEFANI DE      ZIANO
BG100527  3        2      BG1T0896  TE033030    TE033030      41008652    STEFANI DE      ZIANO
BG100527  3        3      TE033030                            42006172    DE STEFANI      ZIANO

-- And we still got extra, unwanted groups
BG1T0896  3        2      BG1T0896  TE033030    TE033030      41008652    STEFANI DE      ZIANO
BG1T0896  3        3      TE033030                            42006172    DE STEFANI      ZIANO

TE033030  3        3      TE033030                            42006172    DE STEFANI      ZIANO

-- Mark's a perfect example of the missing/frustrating data I'm dealing with... but we still matched correctly
BG102188  3        1      BG102188              BG1T0543      41008250    BULINS          MARK
BG102188  3        2      BG1T0543              TE908583      41008250    BULINS          R.J.M.A.
BG102188  3        3      TE908583                            41008250    BULINS          RICHARD JOHANNES MARTINUS ALPHISIUS

-- Not wanted
BG1T0543  3        2      BG1T0543              TE908583      41008250    BULINS          R.J.M.A.
BG1T0543  3        3      TE908583                            41008250    BULINS          RICHARD JOHANNES MARTINUS ALPHISIUS

TE908583  3        3      TE908583                            41008250    BULINS          RICHARD JOHANNES MARTINUS ALPHISIUS

-- One more for good measure
BG1T0146  3        1      BG1T0146  BG105905    BG105905                  LUIJENT         VALERIE
BG1T0146  3        2      BG105905              TE034165      42006121    LUIJENT         VALERIE
BG1T0146  3        3      TE034165                            42006121    LUIJENT         VALERIE

BG105905  3        2      BG105905              TE034165      42006121    LUIJENT         VALERIE
BG105905  3        3      TE034165                            42006121    LUIJENT         VALERIE

TE034165  3        3      TE034165                            42006121    LUIJENT         VALERIE 
```

不确定所有这些信息是否会让它更清晰，或者会让你的眼睛转回你的脑袋：）

谢谢你看这个！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:27:22.407

我想我有。我们已经让自己变得专注于时间顺序，而实际上这并不重要。您的 START WITH 子句应该是“NEW_USER_ID IS NULL”。

要获得时间顺序，您可以'ORDER BY cudroot.node_level * -1'。

我还建议您考虑使用 WITH 子句来形成您的基础数据并对其执行分层查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T05:44:43.653

也许您在这里需要的是多个查询。每个查询都会找到您尝试查找的记录的子集。每个查询都有望比单个庞大的查询更简单、更快。就像是：

1.  其中 new_user_id 为空，SAP ID 为空
2.  其中 new_user_id 不为空且 SAP ID 为空
3.  其中 new_user_id 为空且 SAP ID 不为空
4.  其中 new_user_id 不为空且 SAP ID 不为空

（这些是袖口示例）

我认为解决这个难题的部分问题是问题空间太大。通过将这个问题细分为更小的部分，每个部分都是可行的。

# .net - Silverlight 和桌面应用程序之间如何通信？

> ID：12959158
> 
> 赞同：2
> 
> 时间：2012-10-18T16:18:22.283
> 
> 标签：.net, silverlight, inter-process-communicat

我**在浏览器中**有Silverlight 5 应用程序。需要使其与扫描仪一起使用。我可以控制 SL5 应用程序，我可以开发桌面应用程序 (.NET) 来执行扫描部分。

如何让 SL 应用程序与桌面应用程序“对话”？理想情况下，我认为它如下：

1.  当您上传/下载文档时，我的“文档管理”就像在 SL5 中一样工作。
2.  当用户想要扫描时 - SL5 启动一些进程（？）导致桌面应用程序打开。
3.  如果桌面上没有应用程序 - 它将转移到带有说明和下载的网页。
4.  当桌面应用程序打开时 - SL 应用程序将传递参数、设置等。
5.  扫描文档时 - 桌面应用程序会将信息传回 SL 应用程序

有什么方法可以让 SL/WPF 互相交流吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T19:29:24.320

我之前在 silverlight 应用程序中实现了扫描。它涉及创建一个 activex / dll 控件并将其托管在托管 .aspx 页面中的 silverlight 应用程序旁边。控件本身是完全隐藏的，我只是使用它的方法来访问扫描仪并使用本地文件系统。现在被授予，我必须使它成为一个受信任的站点，并且不允许控件访问客户端计算机。那么您可以使用 javascript 作为 silverlight 代码和您的扫描控件之间的桥梁。要将图像传回 Silverlight，我只是将扫描的图像转换为 base64 字符串并将其传回 javascript 和 silverlight 代码，然后最终将其传回服务器和图像存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T20:11:07.673

是否可以从应用服务器“看到”扫描仪？通过调用托管在与我的 Silverlight 应用程序相同的站点上的 WCF 服务并让它发送文档，我在打印方面取得了成功。您需要管理将用户链接到设备的表。这可能意味着您根本不需要桌面应用程序，但可以将该功能放入您的 Silverlight 应用程序中。显然，如果您要传递大图像或有很多用户，从性能的角度来看，这并不理想。但是，在服务器上，您可以使用完整的 .net 功能，这让事情变得非常简单。

所以基本上你的桌面应用程序的 UI 是在 Silverlight 中，而胆量又回到了服务器上。

如果您找到一种直接的方法来做到这一点，我会很高兴听到它。

# mysql - 如何从我的结果行中选择接下来的 4 个连续行？

> ID：12959160
> 
> 赞同：0
> 
> 时间：2012-10-18T16:18:23.140
> 
> 标签：mysql

我想知道，如何在 MySQL 中选择接下来的 4 个连续行以及结果行？

解释：-

我在表 abc 中有以下行

```
name | amount 

 a   -  1000

 b   -  2000

 c   -  3000

 d   -  4000

 e   -  5000

 f   -  6000 
```

现在，如果我的选择标准是 name = a ，那么返回的结果行应该是

```
 a   -  1000

 b   -  2000

 c   -  3000

 d   -  4000

 e   -  5000 
```

换句话说，我想要一个查询，它将返回查询结果 - “select * from abc where name = 'a'”加上该行的下 4 个连续行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:39:13.137

```
SELECT   abc.*
FROM     abc JOIN (SELECT amount FROM abc WHERE name = 'a') t
WHERE    abc.amount >= t.amount
ORDER BY abc.amount
LIMIT    5 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:20:49.227

尝试

对于 mssql：`select top 5 * from abc where name > 'a' order by name`

对于 mysql：`select * from abc where name > 'a' order by name limit 5`

# python - python将多个返回值分配给多个列表

> ID：12959164
> 
> 赞同：1
> 
> 时间：2012-10-18T16:18:36.697
> 
> 标签：python, list, return-value

我有两个列表`soft_info`，`bit_filp`我正在使用列表理解对其进行迭代，并且有一个`update`返回两个值的函数。代码如下：

```
def update(si,bf):

    ............
    I do some stuff here and update value of si and bf 
    ...........

    return(si,bf)

def main(args=None):
    bytes =256
    soft_info = [-75] * (8 * bytes)
    bit_flip  = [0] * (8 * bytes)
    (soft_info, bit_flip)=[update(si,bf)
                              for si,bf in zip(soft_info,bit_flip)] 
```

我想`soft_info`用`si`和`bit_flip`更新`bf`。

但我得到了`ValueError: need more than 0 values to unpack`该行的错误：

```
(soft_info, bit_flip)=[update(si,bf) for si,bf in zip(soft_info,bit_flip)] 
```

我确信 return 正在发回两个值，就像我在 for 循环中使用 print 语句检查一样。

谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:28:14.080

列表推导返回一个 (si, bf) 的元组列表。它看起来像这样：

```
a = [ (1, 2), (3, 4), (5, 6), (7, 8) ] 
```

要将对的第一个元素分配给 soft_info，将第二个元素分配给 bit_flip，您不能使用简单的元组分配，而是需要将列表“解压缩”成两个列表，如下所示：

```
soft_info, bit_flip = zip(*a) 
```

阅读`zip`and`*`运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:26:52.890

这是一个猜测：

要么`soft_info_lp`，要么`bit_flip_record_lp`为空。所以这`zip(...)`是一个空列表。这也使列表理解成为一个空列表。所以你最终会做

```
In [84]: (soft_info, bit_flip) = [] 
```

这导致

```
ValueError: need more than 0 values to unpack 
```

# java - 翻译应用程序 Android

> ID：12959165
> 
> 赞同：2
> 
> 时间：2012-10-18T16:18:45.403
> 
> 标签：java, android

> 我刚开始研究 Java 并创建应用程序，我知道我应该慢慢开始和改进，但我需要一些帮助来使用 Bing API 翻译器制作 Translator.apk，因为现在只有你付钱才能使用谷歌。
> 
> 我看到一个小例子，我下载了 Jar 文件（我把它放在 /libs 中，我的出来是这样的：

```
import com.memetix.mst.language.Language;
import com.memetix.mst.translate.Translate;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class MainActivity extends Activity implements OnClickListener {
EditText in, out;
Button trns;
String inPut;
@Override
protected void onCreate() {
// TODO Auto-generated method stub
Translate.setClientId("hidden");
Translate.setClientSecret("hidden");
super.onCreate();
setContentView(R.layout.activity_main);
trns = (Button) findViewById(R.id.button1);
in = (EditText) findViewById(R.id.editText1);
out = (EditText) findViewById(R.id.editText2);
inPut = in.getText().toString();    
trns.setOnClickListener(this);
}

@Override
public void onClick(View v) {
// TODO Auto-generated method stub
try {
String translatedText = Translate.execute(inPut, Language.GERMAN,
Language.FRENCH);
out.setText(translatedText);
} catch (Exception e) {
e.printStackTrace();
}
}
} 
```

我知道这可能都是错的，这就是为什么我需要帮助猜想我必须在清单中添加 Internet 权限（如何？之后我是否必须进行一些控制？）我在学校学习了一些基本的 C#，所以我习惯了 grouBox我没有找到日食。我可以在其中列出所有要翻译的所有可选语言的列表最近的东西是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:27:07.337

使用微调器进行类似下拉的行为。见这里[http://developer.android.com/reference/android/widget/Spinner.html](http://developer.android.com/reference/android/widget/Spinner.html)

如果你不熟悉android开发，但有一些html知识，你可以简单地创建一个网页并将它放在一个WebView中。它使 web 开发人员的 android 开发变得非常容易。见这里[http://developer.android.com/reference/android/webkit/WebView.html](http://developer.android.com/reference/android/webkit/WebView.html)

在清单中设置 Internet 权限：将其添加到 manifest.xml 文件中。

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

此外，Bing 具有 Web 服务，您可以调用这些服务将文本翻译成不同的语言，并且它们也很容易从任何语言（在您的情况下是 Java 或 Javascript）中实现。

见这里[http://www.microsofttranslator.com/tools/](http://www.microsofttranslator.com/tools/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:21:50.487

在 android 中它被称为[Spinner](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCkQFjAB&url=http%3A%2F%2Fdeveloper.android.com%2Freference%2Fandroid%2Fwidget%2FSpinner.html&ei=eyyAULfMH-zriQKHhYCIBA&usg=AFQjCNH8qaN46fA-CLWH9p_wfFPM6C8H1w&sig2=6E187VEZiRpFJS2iPlhD_Q)

# qt - QT：ssl https 使我的 dll 崩溃，抛出 IniterrorSystem.DllNotFoundException

> ID：12959167
> 
> 赞同：0
> 
> 时间：2012-10-18T16:18:48.343
> 
> 标签：qt, dll, ssl

我在 qt 中创建了一个简单的 dll，它启动了一个新线程并使用 QNetworkAccessManager 处理不同的网络请求。使用普通 HTTP 请求可以正常工作，但在尝试开始使用 HTTPS 时遇到了一些问题。

我已经安装了 openssl 并配置了 qt 以使用它： -openssl -IC:\OpenSSL\include -LC:\OpenSSL\lib

我可以编译 dll，但是当我尝试从我的应用程序访问 dll 时，我得到了一个 IniterrorSystem.DllNotFoundException。一旦我尝试使用 QSslSocket 类，就会出现此错误，例如我只是试图启动一个变量。

QSslSocket 套接字；通过此启动，dll 因上述错误而崩溃。

//QSslSocket 套接字；删除 init 将使 dll 继续，但 https 请求不起作用，并且我没有从 QNetworkAccessManager 收到任何错误消息。我尝试连接到 sslError 信号，但这也从未发生过。

我已将 dll“libeay32.dll”、“libssl32.dll”和“ssleay32.dll”放在与我的 dll 相同的文件夹中，并成功安装了 OpenSSL。

有人知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:48:04.410

是否安装了[Visual C++ 运行时库](http://www.microsoft.com/en-us/download/details.aspx?id=30679)？OpenSSL 依赖于 Windows 上的**msvcr** dll。

# apache-flex - 滚动条在 Flex 4.5.1 中未显示在 Spark DataGrid 中，但在 4.6 中显示

> ID：12959168
> 
> 赞同：0
> 
> 时间：2012-10-18T16:18:50.567
> 
> 标签：apache-flex, flex4.5, flex4.6

当 SDK 为 4.5 或更早版本时，我有一个不显示滚动条的 Spark DataGrid。如果我将 SDK 设置为 4.6，它们会正确显示。

有没有人看到这个或知道如何让滚动条正确显示？

这是我使用的 CSS：

```
s|Scroll {
    skinClass: ClassReference("view.skins.CustomScrollerSkin");
} 
```

这基本上是皮肤：

```
<!---  A horizontal scrollbar that lets you control the portion of data that is displayed 
when there is too much data to fit horizontally in a display area.
The Scroller determines whether the horizontal ScrollBar is visible. -->
<fx:Component  id="horizontalScrollBarFactory">
    <s:HScrollBar visible="false" />
</fx:Component> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T22:01:14.163

解决了。Flex 4.6 的行为与 4.5 不同。

在 Flex 4.5.1 中，上面的这个皮肤会隐藏滚动条，因为这些皮肤部分的 visible=false。在 Flex 4.6 中，这**不会**隐藏滚动条。我从该组件中删除了皮肤/选择器。

我相信这个原因与 4.6 中引入的更新的按需滚动 SDK 有关。

> 对 Scroller 进行了一些底层增强。首先，滚动条现在是按需创建的。这意味着您的应用程序在滚动内容之前不会花时间预先为内容创建滚动条，从而提高视图创建性能。[1]

[1] [http://www.adobe.com/devnet/flex/articles/introducing-flex46sdk.html](http://www.adobe.com/devnet/flex/articles/introducing-flex46sdk.html)

# hyperlink - 如何为您的灯箱添加标题 (v.2.5)

> ID：12959170
> 
> 赞同：1
> 
> 时间：2012-10-18T16:18:59.020
> 
> 标签：hyperlink, lightbox, add, title

这不是一个问题，只是我想给你的一些建议。经过数小时的谷歌搜索和测试，我没有找到适用于我的灯箱的解决方案。我不知道为什么，但我无法将链接应用到标题中，而不是`htmlentities()`等等。

所以我想出了自己的解决方案，这只是一种解决方法。我对自己不是很满意，但这是唯一对我有用的方法。所以，如果你和我有同样的烦恼，只需添加这行代码：

搜索这行代码`lightbox.js`（在我的文件中是第 277 行）：

```
$lightbox.find('.lb-caption').html(this.album[this.currentImageIndex].title).fadeIn('fast'); 
```

并将其替换为：

```
$lightbox.find('.lb-caption').html('<span onclick="window.location.href=\'http://yourdomain.com\'">'+this.album[this.currentImageIndex].title+"</span>").fadeIn('fast'); 
```

我做了什么？

由于`.lb-caption`添加显示标题属性，我只是将原始输出包装在一个元素中并将点击事件绑定到某个位置。

问题在于：因为我包裹了整个标题属性，所以整个标题属性变成了一个链接。

获取光标：指针；在 css 和标准链接布局中的效果，只需将标题设为链接即可。这样就不必`htmlentities()`解码链接。

**例子：**

```
<a href="img/image1.png" rel="lightbox[roadtrip]" title="<a class"lightboxlink">This link opens a new page</a> 
```

另一个问题是：现在链接是静态的。（因为我们没有使用链接的href）。

**解决方案：**

要将*一个* `$_GET`属性添加到链接，我们只需要修复几行。您所做的是，在您的图像调用（部分）中添加属性“rev”，意味着：

而不是`<a href="img/image1.png" rel="lightbox[roadtrip]" title="<a class"lightboxlink">This link opens a new page</a>`，

您现在使用（添加“rev”属性“）：

```
<a href="img/image1.png" rel="lightbox[roadtrip]" rev="test" title="<a class"lightboxlink">This link opens a new page</a> 
```

现在到 Javascript 部分...

搜索：

```
if ($link.attr('rel') === 'lightbox') {
    this.album.push({ 
```

这部分，并替换：

```
link: $link.attr('href'),
      title: $link.attr('title'), 
```

和

```
link: $link.attr('href'),
      title: $link.attr('title'),
      rev: $link.attr('rev') 
```

如果你往下走几行，你会看到相同的部分带有链接：$….，标题：$….，将那部分替换为：

```
link: $(a).attr('href'),
      title: $(a).attr('title'),
      rev: $(a).attr('rev') 
```

现在我们只需要修改我们的包装器：（现在回到第 279 行，在 $_GET 部分之前是第 277 行）

```
 $lightbox.find('.lb-caption').html('<span onclick="window.location.href=\'http://yourdomain.comindex.php?page=contact&t='+this.album[this.currentImageIndex].rev+'\'">'+this.album[this.currentImageIndex].title+"</span>").fadeIn('fast'); 
```

我们现在添加`'+this.album[this.currentImageIndex].rev+'`而不是静态部分。

您可以重复此方法以添加无限`$_GET`参数，只需在您的图像调用中添加一个新属性，然后像我们在我的解释中所做的那样更改 javascript。

这是解决标题问题中的链接的一种非常复杂且不寻常的方法，但它是它在我的脚本中工作的唯一方法。

我希望我帮助了某人！:)

# html - 如何将侧面的高度与身体高度相匹配

> ID：12959172
> 
> 赞同：2
> 
> 时间：2012-10-18T16:19:01.613
> 
> 标签：html, css, footer

1.  我需要将侧面的高度与身体的高度相匹配，而不考虑内容的多少。因为它给了我无花果。2 我需要图 1。

2.  我还需要让页脚适合身体高度。`position:absolute`确实适合，但会覆盖`margin:auto`居中的 body 元素。我如何对齐 div 元素
    Html 代码：

    `<html> <body>
    <header></header>
    <aside></aside>
    <footer></footer>
    </body> </html>`

我的CSS代码是这样的：

```
 body{ width:920px;
    position:absolute;
    height:auto; }
aside { float:left;
    width:170px; }

 footer { float: right;
     background: #E7DBD3;
     clear:both; } 
```

![车身高度和侧面高度](../Images/f144acb69d0e22ccc65b45f137928c42.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:28:34.780

您应该能够设置侧面的顶部和底部值。就像是：

```
aside { 
  position: relative;
  float:left;
  width:170px; 
  top: 0px;
  bottom: 0px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T05:56:00.837

要指定 side 元素的高度而不考虑其内容，请使用 position: absolute 和所需的顶部和底部值。

在定位aside 元素时，请确保它相对于文档主体定位，即aside 元素的祖先应该是文档主体而不是任何其他元素。提及顶部和底部值有助于实现aside 元素的所需高度。

例如，如果页眉高度为 60 像素，页脚高度为 30 像素，并且旁边应该在左侧，那么 css 代码将是，

```
aside { 
  width: 250px; 
  position: absolute;
  top: 60px;    # to position after the header 
  bottom: 30px; # to end before the footer
  left: 0px;    # to position in the left side..Use right: 0px to position aside in the right side
} 
```

# excel - Excel 单元格文本未显示到下一个空白单元格中

> ID：12959174
> 
> 赞同：16
> 
> 时间：2012-10-18T16:19:06.777
> 
> 标签：excel

通常，当您在单元格 A1 中键​​入足够多的字符时，它们会显示在右侧的单元格（B1、C1 等）上。我有一个工作簿就是这种情况，然后突然我注意到 A1 中的文本只显示在 A1 中，不再显示在右侧的单元格上。单元格 B1、C1 等完全为空/删除/清除。我找不到像换行文本这样的单元格格式，否则会导致这种情况。

是否存在会导致或允许这种行为的全局或其他设置？

合并单元格使文本按需要显示，但这是最好的解决方法没有意义。这些单元格以前从未合并过，并且不需要在新工作簿中合并即可看到“正常”行为。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-18T16:30:01.860

我找到了罪魁祸首设置：显示公式（公式功能区选项卡，公式审核）。此命令的快捷键是 Ctrl+`。我的反向单引号就在我的制表键上方，所以我敢打赌，当我在多个电子表格之间按 Ctrl+制表键时，我不小心启用了显示公式。我在工作簿的数据输入区域，所以我花了一段时间才注意到显示的是公式而不是结果。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T16:21:55.307

标记受影响的单元格，按 ctrl-1，第二个选项卡，您将找到一个用于文本换行的复选框。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-18T16:29:51.533

您可能在 A1（B1 C1 等）右侧的单元格中有空格或其他不可见字符，突出显示 A1 右侧的所有单元格，然后按*delete*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:26:40.660

也许您以单元格 A1 的格式激活了“换行符”选项并固定了它的高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-09T14:08:19.813

我有同样的问题，但设法解决。我正在使用 Microsoft Office Professional Plus 2010 中的 Excel。我转到“选项”并在“显示此工作簿的选项”下的“高级”选项卡中，未选中“在单元格中显示公式而不是其计算结果”。然后文本开始出现在相邻的单元格中。对于其他版本的 Excel，这也可能有效，但您只需要找出此选项在哪里。希望这可以帮助。- 尼尔森

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-24T10:24:30.743

一个老问题，但仍然存在。

在 2013 年的办公室里也有同样的事情。在 A,125 列中，我添加了一条评论，显示为左对齐。我希望它正确地与上面的文本匹配，所以我重新调整了所有列 A。我后来注意到（很多）跨越 A、B、C、D 和 D 225 的评论被截断，只有最后一个部分文字可见。我不希望文本包裹在单元格中，而是像以前一样溢出。经过一番折腾，左列的条目必须左对齐，而不是右对齐。由于 A 的左侧没有列，因此仅出现最后一位。实在是太简单了！

# maven-3 - maven 本地自定义仓库

> ID：12959178
> 
> 赞同：0
> 
> 时间：2012-10-18T16:19:51.767
> 
> 标签：maven-3, maven-plugin

我会将我的服务器用作某些 jar 的本地存储库。我可以将单个 jar 安装到 .m2 存储库中，但我不能将此存储库用于我项目的 pom。我如何将我的服务器用作 maven repo？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T13:06:20.597

你应该检查你的配置。检查 MAVEN_HOME、settings.xml 等。

# c# - Trying to download file from FileCabinet in NetSuite using C# program

> ID：12959181
> 
> 赞同：2
> 
> 时间：2012-10-18T16:20:08.587
> 
> 标签：c#, netsuite

I need to download JPG file from `FileCabinet` in `NetSuite`. For that I know the file name, so I searched file and assigned to `FileObject`. I got the object right, but got `NULL` content. I am providing here some code. Can anybody point out the error or any missing step here? Thank you.

```
var result = _service.search(flSearch);
if (result.totalRecords > 0)
{
    recordList = result.recordList;
    Record[] records = new Record[recordList.Length];
    for (int j = 0; j < recordList.Length; j++)
    {
        if (recordList[j] is File)
        {
            File itemImage = (File)(recordList[j]);            
            byte[] data;
            data = new Byte[(int)itemImage.fileSize];
            data = itemImage.content;  //Here getting NULL value
            FileStream inFile;
            using (inFile = new FileStream("newImage.jpg", FileMode.Create, FileAccess.Write))
            {
                inFile.Write(data, 0, data.Length);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T01:14:04.583

itemImage 只是一个字符串 - base64。

获取该字符串并进行 base64 解码并将其保存到本地文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T07:25:57.933

如果搜索基于您要搜索的文件的内部 id，那么以下代码可能会有所帮助

```
 var service = LoginNetSuite();
        Tuple<string, string> fileContent = null;

        FileSearch fileSearch = new FileSearch();
        FileSearchBasic fileSearchBasic = new FileSearchBasic();

        // Specify the folder in which the search is to be done.
        SearchMultiSelectField folderFilter = new SearchMultiSelectField();
        folderFilter.@operator = SearchMultiSelectFieldOperator.anyOf;
        folderFilter.operatorSpecified = true;
        RecordRef[] folder = new RecordRef[1];
        folder[0] = new RecordRef();
        folder[0].internalId = "78990"; // 78990 => Internal id of the folder.
        folderFilter.searchValue = folder;
        fileSearchBasic.folder = folderFilter;

        // Specify the file internal id.
        SearchMultiSelectField fileFilter = new SearchMultiSelectField();
        fileFilter.@operator = SearchMultiSelectFieldOperator.anyOf;
        fileFilter.operatorSpecified = true;
        RecordRef[] rec = new RecordRef[1];
        rec[0] = new RecordRef();
        rec[0].internalId = "345656"; // 345656 => Internal id of the file.
        fileFilter.searchValue = rec;

        fileSearchBasic.internalId = fileFilter;
        fileSearch.basic = fileSearchBasic;

        var result = service.search(fileSearch);
        var recordList = (Record[])result.recordList;
        if (recordList != null && recordList.Length != 0)
        {
            var file = (File)result.recordList.First();
            fileContent = new Tuple<string, string>(file.url, file.name);
        } 
```

在此代码中，文件夹内部 ID 和文件内部 ID 作为搜索参数给出。所以文件搜索将在指定文件id的指定文件柜中进行。来自 netsuite 的响应将包括内部 id、文件名、url、文件夹名等。文件可以从 url 位置下载。

# javascript - Call WCF Web Service from JavaScript

> ID：12959183
> 
> 赞同：2
> 
> 时间：2012-10-18T16:20:14.987
> 
> 标签：javascript, wcf, web-services

I've created a WCF Web Service and I want to access it straight from my html page using JavaScript. However I'm getting a cross-site scripting error.
Here's the error message:

```
XMLHttpRequest cannot load http://localhost:2875/MyWebService.svc/MyFunction. Origin http://TheCallingServer is not allowed by Access-Control-Allow-Origin. 
```

I've found examples online describing how to do this from an aspx.net page, but I can't find anything about doing this from JavaScript in a HTML page.

What do I have to change in my WCF WebService to allow it to be called from JavaScript?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:25:02.360

问题不在于您的服务，而是拒绝调用另一个域中的 url 的浏览器。一种解决方案是在同一个域/站点下同时拥有页面和服务。

另一种解决方案是使用 jsonp： http: [//www.codeproject.com/Articles/425702/Consume-WCF-Service-with-JSONP-and-SOAP-endpoints](http://www.codeproject.com/Articles/425702/Consume-WCF-Service-with-JSONP-and-SOAP-endpoints)

# datagridview - Why can't datagridview rowcount property be equal to zero?

> ID：12959190
> 
> 赞同：1
> 
> 时间：2012-10-18T16:20:51.993
> 
> 标签：datagridview, delphi-prism, rowcount, oxygene

I have datagridview on my winform and you can add and delete items from it. Although I am able to do that successfully, it acts weird.

It requires that its property RowCount be set to 1 or greater. Thus, there is always a single row of grid displayed at all time even when there is no item added to it.

How do you overcome this shortcoming? or Is there a way around it?

Thanks,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:24:33.437

This is by design if you have `AllowUserToAddRows` set to true.

From MSDN, [DataGridView.RowCount](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.rowcount.aspx) Property:

> If AllowUserToAddRows is true, you cannot set RowCount to 0\. In this case, call the DataGridViewRowCollection.Clear method to remove all rows except the row for new records. Calling Clear has the same result as setting RowCount to 1 in this case, but is much faster.

When you want to set your RowCount to 0 you can set `AllowUserToAddRows` to false and then back to true when you want to allow your users to add rows.

# xna - XNA 旋转无法正常工作

> ID：12959195
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:21:00.717
> 
> 标签：xna, rotation

所以，我试图旋转 5 个vector2s 以使 target(Vector2) 成为它们的正常值。但是当我旋转时，它没有正确旋转。当目标指向上方并且顶点的正常向右或向左时（默认值：0,-1 0,0 0,1）我必须将它们旋转 90 度但是当我这样做时结果不是 -1,0 0,0 1， 0 应该是什么。相反，它类似于：-1,vs 0,0 1,-vs vs=非常小的数字。为什么是这样？有没有办法纠正这个问题？代码：

```
Vector2 target = new Vector2(0, 1); //Create target

Vector2[] vecs = new Vector2[3] { new Vector2(0, -1), Vector2.Zero, new Vector2(0, 1) }; //Create verticies to be rotated

Matrix matrix = Matrix.CreateRotationZ(MathHelper.ToRadians(90)); //Should be: (float)Math.Atan2(target.Y, target.X) instead of 90 but wanted to simplify this

Vector2.Transform(vecs, ref matrix, vecs); // Rotate 
```

我什至尝试以 360 度旋转整圈，但这并没有给我起始向量，这对我来说很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:21:29.420

## 为什么是这样？

这是因为浮点变量的精度。

## 有没有办法纠正这个问题？

我不知道方法，但我会忽略它。因为它几乎等于零。

## 专家提示

对于给定的向量 (x,y)，(-y,x) 或 (y,-x) 是该向量的法线。

# php - PHP中的数组到字符串转换错误

> ID：12959196
> 
> 赞同：0
> 
> 时间：2012-10-18T16:21:08.353
> 
> 标签：php

我有以下代码来回溯错误....但是它

```
$traces = debug_backtrace();

foreach ($traces as $k => $v)
{
    if ($v['function'] == 'include' 
        || $v['function'] == 'include_once' 
        || $v['function'] == 'require_once' 
        || $v['function'] == 'require')
    {
        $args = ''; 
        if (isset($v['args']) && is_array($v['args']))
        {
            $size = count($v['args']);
            foreach ($v['args'] as $key => $arg)
            {
                $args .= $v['args'][$key];
                if($key < $size)
                {
                    $args .= ', ';
                }
            }
        }

        $traces .= '#' . $k . ' ' 
                 . $v['function']
                 . '('.$args.') called at ['
                 . $v['file'].':'.$v['line'].']';
    }
    else
    {
        $function = (array_key_exists('function',$v)) ? 
                        $v['function'].'() ' : 'function_name';
        $file     = (array_key_exists('file',$v)) ? 
                        $v['file'] : 'file_name';
        $line     = (array_key_exists('line',$v)) ? 
                        $v['line'] : 'line';
        $traces  .= "#{$k} $function called at {$file}:{$line}\n";//This line giving me notice...

    }

} 
```

我在这里收到**数组到字符串转换**的通知：

```
$traces .= "#$k $function called at $file:$line\n"; 
```

我实际上想将此数组转换为字符串。是否有任何方法或功能可以在不给我任何通知的情况下进行转换...

我该如何纠正？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:25:34.953

你开始：

```
foreach($traces as $k=>$v) <- $traces here is an array 
```

然后你试着做

```
$traces.= "xxx" <- $traces here is handled as a string 
```

我宁愿定义一个 $tracestr 字符串来聚合文本内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:26:45.823

您没有正确创建数组

```
 $args .= $v['args'][$key]; 
```

您正在创建一个字符串。

```
 $args = array(); 
                if(isset($v['args']) && is_array($v['args']))
                {
                    $size = count($v['args']);
                    foreach ($v['
                    args'] as $key => $arg)
                    {
                        array_push($args,$v['args'][$key]);
                       // some of your code
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:27:33.900

```
$trace = debug_backtrace();
foreach($traces as ...) 
```

这里有问题。**$trace**是一个调试回溯数组。当您**foreach($traces)** ... 似乎未定义时。并且你附加到**$traces**这应该是一个非标量来foreach它。

*只需正确命名您的变量并使名称不同！*

# sql-server-2008 - 从 SQL Server 查询返回 n 行

> ID：12959197
> 
> 赞同：0
> 
> 时间：2012-10-18T16:21:09.990
> 
> 标签：sql-server-2008

> **可能重复：**
> [SQL Server 中的行偏移](https://stackoverflow.com/questions/187998/row-offset-in-sql-server)

我有一个类似条件的查询，它返回大约 1500 行。现在我想知道如何逐部分获取行，例如返回 75 行，然后再次返回接下来的 75 行，直到它到达行的末尾。我知道我可以使用类似的东西`SELECT TOP 75`

我尝试了这样的事情，但它没有返回任何行

```
 SELECT * 
    FROM 
       (SELECT ROW_NUMBER() OVER (ORDER BY WarehouseSubType.id) as row,
               WarehouseSubType.id, 
               WarehouseType.name as WarehouseTypename,
               WarehouseType.alternateName AS WarehouseTypealternateName,
               WarehouseSubType.name AS WarehouseSubTypename,
               Warehouse.alternateName AS WarehousealternateName,
               WarehouseSubType.alternateName AS WarehouseSubTypealternateName,
               WarehouseSubType1.name AS WarehouseSubType1name,
               WarehouseSubType1.alternateName AS WarehouseSubType1alternateName,
               Warehouse.alternateName AS Warehousename,
               Branch.name AS Branchname,
               Branch.alternateName AS BranchalternateName,
               WarehouseProductQuantity.actualQuantity,
               WarehouseProductQuantity.reservedQuantity,
               Supplier.companyName, 
               Supplier.companyNameAlternate,
               Tafsil.description,
               Tafsil.alternateDescription,
                (WarehouseProductQuantity.actualQuantity - WarehouseProductQuantity.reservedQuantity) AS quantity 
        FROM WarehouseSubType 
        INNER JOIN WarehouseType ON (WarehouseSubType.warehouseTypeId = WarehouseType.id)
        INNER JOIN WarehouseSubType1 ON (WarehouseSubType.id = WarehouseSubType1.warehouseSubTypeId)
   ) a 
WHERE 
    warehouseTypename like '%Ve%' 
    AND row > 0 and row < 75 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:54:20.767

您发布的代码甚至不应该编译，更不用说返回行了。子查询未关闭，内部查询中无法识别行。

试试这个：

```
SELECT * FROM 
   ( SELECT ROW_NUMBER() OVER (ORDER BY WarehouseSubType.id) as row,
    WarehouseSubType.id, 
    WarehouseType.name as WarehouseTypename,
    WarehouseType.alternateName AS WarehouseTypealternateName,
    WarehouseSubType.name AS WarehouseSubTypename,
    Warehouse.alternateName AS WarehousealternateName,
    WarehouseSubType.alternateName AS WarehouseSubTypealternateName,
    WarehouseSubType1.name AS WarehouseSubType1name,
    WarehouseSubType1.alternateName AS WarehouseSubType1alternateName,
    Warehouse.alternateName AS Warehousename,
    Branch.name AS Branchname,
    Branch.alternateName AS BranchalternateName,
    WarehouseProductQuantity.actualQuantity,
    WarehouseProductQuantity.reservedQuantity,
    Supplier.companyName, 
    Supplier.companyNameAlternate,
    Tafsil.description,
    Tafsil.alternateDescription,
    (WarehouseProductQuantity.actualQuantity - WarehouseProductQuantity.reservedQuantity) AS quantity 
    FROM WarehouseSubType 
    INNER JOIN WarehouseType 
        ON ( WarehouseSubType.warehouseTypeId = WarehouseType.id)
    INNER JOIN WarehouseSubType1 
        ON (WarehouseSubType.id = WarehouseSubType1.warehouseSubTypeId)) a 
    WHERE warehouseTypename like '%Ve%' ) b
WHERE b.row > 0 and b.row< 75 
```

# javascript - How can I capture :after content in IE8?

> ID：12959199
> 
> 赞同：7
> 
> 时间：2012-10-18T16:21:16.517
> 
> 标签：javascript, css, internet-explorer-8

I am applying an `:after` pseudo element to the body displaying the name of my media query breakpoint like so:

```
body::after {
  content: 'medium';
  display: none;
} 
```

The reason for doing this can be found here: [http://adactio.com/journal/5429/](http://adactio.com/journal/5429/)

I want to get the content value of `:after` using javascript in IE8.

This is how i am doing it for other browsers:

```
var breakpoint = window.getComputedStyle(document.body, ':after').getPropertyValue('content'); 
```

But IE8 does not support `getComputedStyle()`, i know it supports `currentStyle` instead, but after a bit of trying i was unable to use it correctly.

This is the kind of thing i was trying with no success:

```
var breakpoint = document.body.currentStyle.getPropertyValue('content'); 
```

Anybody know how to do this?

**Edit:** After BoltClock's note i have now changed my css to this (one semi colon):

```
body:after {
  content: 'medium';
  display: none;
} 
```

Before using two the content was not even appearing in IE8, so it would have had nothing to return. Unfortunately i still can't get IE8 to return the content.

I am trying this:

```
if (style = document.body.currentStyle) {
  for (var prop in style) {
    if (prop === 'content') {
      alert(prop);
    }
  }
} 
```

I get nothing, but if i change `'content'` to some other property like `'backgroundColor'` it will alert something. So i'm thinking that even though msdn lists content as one of the available properties of `currentStyle` [http://msdn.microsoft.com/en-us/library/ie/ms535231%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/ms535231%28v=vs.85%29.aspx) it does not actually return it, unless i'm doing something else wrong.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T11:58:42.143

经过大量尝试，我得出结论，这是不可能的。但幸运的是，我找到了一个 js 脚本，它完全符合我的要求。

[https://github.com/JoshBarr/js-media-queries](https://github.com/JoshBarr/js-media-queries)

以及使用 Jeremy Keith 将断点标签放在正文中的技术：在他们将断点标签放在 html 元素的 font-family 中之后。这启用了对 ie8 的支持，并且在某些情况下 android 也无法返回 :after 内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-04T12:43:09.800

从 IE7 到 IE11，您可以“创建自己的 CSS 属性”，只需使用*currentStyle*对象即可访问它们

然后一个解决方案是创建一个“虚假内容属性”

```
body:after
{
    content: 'medium';
    -ms-content: 'medium';
} 
```

为方便起见，我将其称为“-ms-content”，现在您的 IE JavaScript 代码应该是：

```
document.body.currentStyle["-ms-content"] // RETURNS => 'medium' 
```

> 您必须使用方括号访问“您自己的属性”： currentStyle[{String}] 否则您将得到一个空字符串

# linux - 石墨：聚合规则不起作用

> ID：12959201
> 
> 赞同：1
> 
> 时间：2012-10-18T16:21:22.460
> 
> 标签：linux, logging, graphite

我添加了许多聚合规则，例如

> app.email.server1.total-sent.1d.sum (86400) = sum app.email.server1.total-sent.1h.sum

我想知道聚合规则计数是否有任何限制。相同类型的其他聚合规则正在工作。

我也使用 tcpdump 检查，包含标签`app.email.server1.total-sent.1h.sum`的数据包也来了。

我们可以通过检查日志进行调试。我试过了，但日志没有提到任何关于聚合指标类型的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-18T10:08:05.570

您想将所有 1h 总结为 1d，因此在规则中，在 RHS 上，用 * 代替 1h

```
app.email.server1.total-sent.1d.sum (86400) = sum app.email.server1.total-sent.*.sum 
```

# c# - 两个下拉列表搜索

> ID：12959208
> 
> 赞同：0
> 
> 时间：2012-10-18T16:21:39.320
> 
> 标签：c#, asp.net, html

我是 C# 的新手。

我目前正在使用 c# 使用三个 DropDownLists 和一个提交按钮在 asp.net 中使用搜索功能。假设这是一个汽车网站。

有 2 个下拉列表：

1.  制造商（例如 - 丰田、日产、本田……）
2.  型号（例如 - Prius、X-trail、Insight ......）

如果用户只选择第一个（例如 - 他/她选择“Toyota”而不选择其他）并单击提交，它将显示数据库中的所有丰田汽车。如果用户同时选择“制造”和“型号”，它将缩小搜索范围。

如果用户没有选择所有下拉列表，我应该如何写`sql query`，如果用户选择所有。

并且下拉列表的项目是直接从数据库中添加的。我也不知道如何在下拉列表顶部设置默认值文本。

```
con.Open(); 
 if (!IsPostBack) 
 { 
     cmd = new SqlCommand("SELECT DISTINCT CarMake FROM Car", con); 
     dr = cmd.ExecuteReader(); 
     while (dr.Read()) 
     { 
        DropDownList1.Items.Add(dr[0].ToString());
     } 
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:51:33.480

尤其是从这样的公共网络表单构建 SQL 时，您应该（我会说必须）使用参数**而不是字符串连接**来构建查询。否则就是等待发生的 SQL 注入攻击。

处理多种过滤器可能性的一种简单方法是`Like`在基本 SQL 命令中使用运算符。如果未选择品牌或型号，只需包含通配符而不是品牌或型号名称：

```
var baseQuery = "SELECT * FROM Car " 
                "WHERE MAKE LIKE @MakeFilter AND MODEL LIKE @ModelFilter";
var cmd = new SqlCommand(baseQuery, con);
cmd.Parameters.Add(new SqlParameter( 
    "@MakeFilter", (string)ddlMake.SelectedValue ?? "%"));
cmd.Parameters.Add(new SqlParameter( 
    "@ModelFilter", (string)ddlModel.SelectedValue ?? "%")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:34:30.240

您可以将通用 SQL 查询分配给这样的字符串：

字符串查询=“选择*从汽车”；

根据用户从下拉列表中的选择，为您的 SQL 查询添加条件：

```
if (ddlMake.SelectedIndex != 0)
{
   query = query+" WHERE make='"+ddlMake.SelectedValue+"'"+;
}
if (ddlModel.SelectedIndex != 0)
{
   if(query.Contains("WHERE"))
      query = query + " AND model='"+ddlModel.SelectedValue+"'";
   else
      query = query + " WHERE model='"+ddlModel.SelectedValue+"'";
} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:43:28.037

您本质上需要一个基本的表达式生成器。根据他们选择的选项，您将建立一个条件列表。然后，您将它们全部连接在一起，并将它们与 WHERE 子句放在一起。

注意：从用户输入（尤其是从公共网页）生成 SQL 时需要小心。这会使您面临 SQL 注入的风险。 [我建议查找参数化 SQL 并使用参数构建 SQL 命令。](http://www.techrepublic.com/article/shorten-development-time-by-using-parameterized-queries-in-adonet/6093390)

```
var parts = new List<string>();

if( criteria.Make.HasValue )
{
   parts.Add( string.Format( "make = '{0}'", criteria.Make.Value ) );
}

if( criteria.Model.HasValue )
{
   parts.Add( string.Format( "model = '{0}'", criteria.Model.Value ) );
}

query += string.Join( " AND ", parts ); 
```

# node.js - 无法使 npm install -g 为我的包工作

> ID：12959215
> 
> 赞同：7
> 
> 时间：2012-10-18T16:22:01.057
> 
> 标签：node.js, npm

我正在尝试将 CLI 功能添加到我的 npm 包拦截代理中。我找不到任何好的文档，所以我基本上从 express.js 复制和修改了一些东西。

我补充说：

```
"bin": {
    "intercept-proxy": "./bin/intercept-proxy"
} 
```

...到我的 package.json 文件并创建了一个包含 CLI 内容的 /bin/intercept-proxy.js。

当我运行时：

```
npm install -g intercept-proxy 
```

...一切正常，直到链接部分。然后它失败了，说：

```
npm ERR! Error: ENOENT, chmod 'C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules\intercept-proxy\bin\intercept-proxy 
```

...日志说：

```
381 info linkStuff intercept-proxy@0.2.4
382 verbose linkBins intercept-proxy@0.2.4
383 verbose link bins [ { 'intercept-proxy': './bin/intercept-proxy' },
383 verbose link bins   'C:\\Users\\johan.obrink.24HRCOM\\AppData\\Roaming\\npm',
383 verbose link bins   true ]
384 verbose linkMans intercept-proxy@0.2.4
385 verbose rebuildBundles intercept-proxy@0.2.4
386 verbose rebuildBundles [ 'commander', 'mkdirp', 'underscore' ]
387 info C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules\intercept-proxy unbuild
388 verbose from cache C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules\intercept-proxy\package.json
389 info preuninstall intercept-proxy@0.2.4
390 info uninstall intercept-proxy@0.2.4
391 verbose true,C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules,C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules unbuild intercept-proxy@0.2.4
392 verbose C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm,[object Object] binRoot
393 info postuninstall intercept-proxy@0.2.4
394 error Error: ENOENT, chmod 'C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules\intercept-proxy\bin\intercept-proxy'
395 error If you need help, you may report this log at:
395 error     <http://github.com/isaacs/npm/issues>
395 error or email it to:
395 error     <npm-@googlegroups.com>
396 error System Windows_NT 6.1.7601
397 error command "c:\\Program Files\\nodejs\\node.exe" "c:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "intercept-proxy"
398 error cwd c:\src
399 error node -v v0.8.9
400 error npm -v 1.1.61
401 error path C:\Users\johan.obrink.24HRCOM\AppData\Roaming\npm\node_modules\intercept-proxy\bin\intercept-proxy
402 error code ENOENT
403 error errno 34
404 verbose exit [ 34, true ] 
```

我尝试在谷歌上搜索 ENOENT、chown + Windows，但似乎没有任何进展。

完整的代码在[https://github.com/JohanObrink/intercept-proxy](https://github.com/JohanObrink/intercept-proxy)

编辑：我现在已经在 OS X 上尝试过了，问题是一样的。与 Windows 无关 - 显然与我有关。但是仍然找不到问题所在。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T21:31:25.987

ENOENT 表示没有这样的文件或目录。如果你改变这个会发生什么？

```
"bin": {
    "intercept-proxy": "./bin/intercept-proxy.js"
} 
```

# ruby-on-rails - 设计 after_sign_in_path_for 工作，但重定向不会发生

> ID：12959219
> 
> 赞同：5
> 
> 时间：2012-10-18T16:22:22.127
> 
> 标签：ruby-on-rails, devise

设计不会重定向到由`after_sign_in_path_for`. 它实际上调用了我的自定义`after_sign_in_path_for`。它计算我希望它计算的 url，但不会发生重定向。它保留在`sign_in`页面上，但不会进行实际登录。

我一直在尝试几个版本的设计：

```
gem 'devise' 
```

和

```
gem 'devise', :git => 'git://github.com/plataformatec/devise.git' 
```

结果相同。

我的习惯`after_sign_in_path_for`

```
def after_sign_in_path_for(resource)
    str = stored_location_for(resource) || stored_location || root_path
    debugger
    str
end

def stored_location
    session.delete(:return_to)
end

def store_location
    session[:return_to] = request.fullpath
end 
```

正在被调用，它给出了正确的 url，`str`完全符合我的预期。调试器此时停止...

但是在`cont`页面停留在之后`sign_in`，却发生了登录。

我相信这不是我的代码问题。可能是设计问题。任何可以使用它的人都可以**与**我分享与您一起使用的 Devise 的确切版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:12:01.513

很难说没有看到您的服务器日志。如果`after_sign_in_path_for`正在调用并生成预期的 URL，那么这留下了一种可能性：

```
# app/controllers/devise/sessions_controller.rb
# POST /resource/sign_in
def create
  resource = warden.authenticate!(auth_options)
  set_flash_message(:notice, :signed_in) if is_navigational_format?
  sign_in(resource_name, resource)
  respond_with resource, :location => after_sign_in_path_for(resource)
end 
```

[该`respond_with`方法将根据资源的状态明智地采取行动](http://archives.ryandaigle.com/articles/2009/8/10/what-s-new-in-edge-rails-default-restful-rendering)。由于它再次呈现`new`模板，它指向某种验证错误或其他登录问题。

查看服务器日志。这是使用`after_sign_in_path_for`来自我的应用程序的成功登录和后续重定向：

```
Started POST "/admins/sign_in" for 127.0.0.1 at 2012-10-18 09:59:27 -0700
[INFO] [127.0.0.1] [2012-10-18 09:59:27 -0700] Processing by Devise::SessionsController#create as HTML
[INFO] [127.0.0.1] [2012-10-18 09:59:27 -0700]   Parameters: {"utf8"=>"✓", "authenticity_token"=>"DGjs2b3k8BIi62KWCn3u5kx7YxxyR03xkERcgH/ilr0=", "admin"=>{"email"=>"me@mydomain.com", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
[DEBUG] [127.0.0.1] [2012-10-18 09:59:27 -0700]   Admin Load (2.1ms)  SELECT "admins".* FROM "admins" WHERE "admins"."email" = 'me@mydomain.com' LIMIT 1
[DEBUG] [127.0.0.1] [2012-10-18 09:59:27 -0700]    (1.0ms)  BEGIN
[DEBUG] [127.0.0.1] [2012-10-18 09:59:27 -0700]    (0.9ms)  UPDATE "admins" SET "last_sign_in_at" = '2012-10-18 16:53:19.428068', "current_sign_in_at" = '2012-10-18 16:59:28.076180', "last_sign_in_ip" = '127.0.0.1', "sign_in_count" = 3, "updated_at" = '2012-10-18 16:59:28.078677' WHERE "admins"."id" = 1
[DEBUG] [127.0.0.1] [2012-10-18 09:59:27 -0700]    (9.3ms)  COMMIT
[INFO] [127.0.0.1] [2012-10-18 09:59:27 -0700] Redirected to http://localhost:3001/admin/users
[INFO] [127.0.0.1] [2012-10-18 09:59:27 -0700] Completed 302 Found in 97ms (ActiveRecord: 0.0ms)
[INFO] [127.0.0.1] [2012-10-18 09:59:28 -0700] 

Started GET "/admin/users" for 127.0.0.1 at 2012-10-18 09:59:28 -0700
[INFO] [127.0.0.1] [2012-10-18 09:59:28 -0700] Processing by UsersController#index as HTML
[DEBUG] [127.0.0.1] [2012-10-18 09:59:28 -0700]   Admin Load (1.2ms)  SELECT "admins".* FROM "admins" WHERE "admins"."id" = 1 LIMIT 1
[DEBUG] [127.0.0.1] [2012-10-18 09:59:28 -0700]   User Load (1.0ms)  SELECT "users".* FROM "users" 
[INFO] [127.0.0.1] [2012-10-18 09:59:28 -0700]   Rendered users/index.html.erb within layouts/application (1.0ms)
[INFO] [127.0.0.1] [2012-10-18 09:59:28 -0700] Completed 200 OK in 22ms (Views: 16.5ms | ActiveRecord: 2.2ms) 
```

你看到那个重定向了吗？

# html - 如何通过 MathML 来描述这个表达式？

> ID：12959222
> 
> 赞同：1
> 
> 时间：2012-10-18T16:22:29.157
> 
> 标签：html, mathjax, mathml

我正在开发交互式教育应用程序，它应该适用于现代智能手机、平板电脑和 PC。我们的目标平台是 iOS、Android 和 Windows。程序也因为它的内容是在我们公司内部创建的。内容是一套包含大量数学表达式和公式的书籍。

这些书以 XML 格式（语义表示）创建，然后使用我们基于 XSLT 转换的转换程序翻译成 html。为了描述数学表达式，我将使用 MathML。我将直接在客户端设备上使用 MathJax 库来呈现 MathML 表达式。

但我在书中发现了奇怪的表达方式。

[他们看起来像这样](https://dl.dropbox.com/u/11396518/fraction.png)。

**我一直在思考如何通过 MathML 描述这些表达式，然后在 HTML 文档中正确呈现它。我不知道如何用双线制作分数。**

我不是 MathML 和 HTML、CSS 方面的专家。我想有一个简单的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:26:47.917

怎么样

```
<math xmlns="http://www.w3.org/1998/Math/MathML">
  <munderover>
    <mo stretchy="true">=</mo>
    <mi>a</mi>
    <mi>A</mi>
  </munderover>
</math> 
```

这应该把“A”放在一个有弹性的等号上，把“a”放在它下面。

# xcode - 使用 Xcode 项目的子项目中的所有 .h 文件

> ID：12959225
> 
> 赞同：0
> 
> 时间：2012-10-18T16:22:38.070
> 
> 标签：xcode, file-management

我有一个项目，其中包含来自另一个项目的 git 子模块，并且在将该项目添加为依赖项并成功构建后，我无法弄清楚如何将 .h 文件从中获取到我的项目中。

子项目不是一个框架，它只是另一个带有自己的 .app 文件的 xcode 项目。git 子模块位于我的项目顶级文件夹中的一个文件夹中，所以`~/Documents/MyProject/Mysubproject/`

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:36:06.907

我解决了这个问题。我不得不将子项目变成静态 Cocoa Touch 库。

# javascript - 从父级调用子 Javascript 函数

> ID：12959232
> 
> 赞同：0
> 
> 时间：2012-10-18T16:23:06.597
> 
> 标签：javascript, asp.net, function, iframe, parent-child

我有一个 iframe，在那个 iframe 里面有一个 javascript 函数。我希望能够从 iframe 的父级调用该函数，因为我需要在 iframe 打开时在 iframe 内设置一些值。到目前为止，我尝试过：

```
 ClientScript.RegisterClientScriptBlock(this.GetType(), "saveTasks", "<script type='text/javascript'> function SaveTasks() { frames['myIframe'].location.href = 'myURL'; frames['myIframe'].test(); } </script>"); 
```

但是，我无法调用 myURL 文件中的 test() 函数。

执行此操作的具体语法是什么，从其父级调用子级内部的 javascript 函数？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:29:27.633

我对此并不十分熟悉。尽管这段 javascript 似乎没有任何方式能够知道“frames['myIframe']”是什么。有很多事情可能会出错，例如 $document 是否已加载？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T13:10:19.253

找到了解决方案：当我调用该函数时，似乎没有加载找到 javascript 函数的子页面。[幸运的是，我在这里](https://stackoverflow.com/questions/9466596/can-i-call-a-function-after-the-loading-of-an-iframe-appended-by-jquery)找到了解决方案。

```
ClientScript.RegisterClientScriptBlock(this.GetType(), "saveTasks", "<script type='text/javascript'> function SaveTasks() { frames['ValidateTasksIframe'].location.href = 'myURL'; $('#ValidateTasksIframe').load(function() { frames['ValidateTasksIframe'].test();});} </script>"); 
```

使用 event.load() 就像一个魅力！:)

# javascript - 根据方向和距离（矢量）获取点坐标

> ID：12959237
> 
> 赞同：28
> 
> 时间：2012-10-18T16:23:15.473
> 
> 标签：javascript, math, canvas, vector, polar-coordinates

![根据方向和距离获取点](../Images/6d14a0b39c6aef0e49b3f95dfe12435f.png)

我需要找到第二个点的坐标。我知道弧度中点之间的角度，我也知道*向量的**长度*。

如果有人能指出我的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-18T16:30:05.057

给定***L***作为向量的长度和***Ang***的角度

```
x2 = x1 + Math.cos(Ang) * L
y2 = y1 + Math.sin(Ang) * L 
```

糟糕...我刚刚注意到 Y 轴的从上到下的方向... Konstantin Levin，您需要稍微调整一下，因为上面的公式假设一个典型的三角坐标系。在您的情况下，公式应该是：

```
x2 = x1 + Math.cos(Ang) * L    // unchanged
y2 = y1 - Math.sin(Ang) * L    // minus on the Sin 
```

另外（不言而喻，一言以蔽之……）参考角应该是这样的，当 y2 == y1 和 x2 > x1 时，Ang 应该为零，并且它应该随着第二个点的移动而增加 counter - 顺时针围绕第一个。

# json - 使用 Handlebars.js，如何使用 JSON 文件中的值循环数据

> ID：12959238
> 
> 赞同：2
> 
> 时间：2012-10-18T16:23:15.573
> 
> 标签：json, handlebars.js

这是 JSON 数组：

```
{
"profile": [
    {
        "ID": 343,
        "gender": "female",
        "from": "Olivia"
    },
    {
        "ID": 4543,
        "gender": "female",
        "from": "Meagen"
    },
    {
        "ID": 787,
        "gender": "male",
        "from": "Aaron"
    }
]
} 
```

这有效，它输出数组中的所有对象......

```
{{#profile}}

{{from}} {{gender}}

{{/profile}} 
```

输出看起来像......

```
Olivia female
Meagen female
Aaron male 
```

但我的目标是只循环那些性别等于女性的人。就像是...

```
{{#profile gender="female"}}

{{from}} {{gender}}

{{/profile}} 
```

...并让输出看起来像...

```
Olivia female
Meagen female 
```

几天来，我一直在努力寻找答案。我错过了什么还是我偏离了轨道？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:20:12.137

我看到两个选项：

1.  在处理数据之前过滤数据 Handlebars。
2.  使用自定义助手来处理模板中的逻辑。

第一个非常简单。

第二个取决于你想怎么做。您可以添加一个“如果相等”的助手：

```
Handlebars.registerHelper('if_eq', function(a, b, block) {
    return a == b
         ? block(this)
         : block.inverse(this);
}); 
```

并在您的模板中执行此操作：

```
{{#profile}}
    {{#if_eq gender "female"}}
        {{from}} {{gender}}
    {{/if_eq}}
{{/profile}} 
```

演示：http: [//jsfiddle.net/ambiguous/NnH83/](http://jsfiddle.net/ambiguous/NnH83/)

或者您可以通过各种方式编写自己的迭代器：

```
Handlebars.registerHelper('each_female', function(list, opts) {
    var i, result = '';
    for(i = 0; i < list.length; ++i)
        if(list[i].gender == 'female')
            result = result + opts.fn(list[i]);
    return result;
});

{{#each_female profile}}
    {{from}} {{gender}}
{{/each_female}} 
```

或者更笼统一些：

```
Handlebars.registerHelper('each_when', function(list, k, v, opts) {
    console.log(arguments);
    var i, result = '';
    for(i = 0; i < list.length; ++i)
        if(list[i][k] == v)
            result = result + opts.fn(list[i]);
    return result;
});

{{#each_when profile "gender" "female"}}
    {{from}} {{gender}}
{{/each_when}} 
```

演示： http: [//jsfiddle.net/ambiguous/E4jTs/，http](http://jsfiddle.net/ambiguous/E4jTs/) : [//jsfiddle.net/ambiguous/AkZxN/](http://jsfiddle.net/ambiguous/AkZxN/)

如果您想要更接近您建议的语法，请参阅有关 Hash Arguments 的[精美手册。](http://handlebarsjs.com/block_helpers.html)

# javascript - ExtJS 文件上传问题

> ID：12959240
> 
> 赞同：0
> 
> 时间：2012-10-18T16:23:21.300
> 
> 标签：javascript, extjs, file-upload, extjs4

**ExtJS 版本：4.1.0**

**已回答 - 请参阅下面的回复......真的很愚蠢**

我有一个包含几个字段的简单表单，其中一个是 xtype `fileuploadfield`。我在控制器方法`click`中的表单保存按钮上监听事件。`this.control`当`click`事件发生时，我运行一个方法`saveForm`，如下所示：

```
saveForm: function(button) {
    /** Get the Window Object and retrieve the Form*/
    var currentWin = button.up('window'),
                form = currentWin.down('form');

    /** Get the Form Object */
    form = form.getForm();

    /** ...continued... */
} 
```

此时，在我的方法中，我可以`console.log`创建表单对象，检查对象`_fields`并查看我`fileuploadfield`在字段中输入的文件的路径（即 C:\fakepath\somefile.png）。我还可以执行`form.getField('upload-field-id');`以获取上传字段元素。该方法`form.hasUpload()`返回`TRUE`。

更重要的是，当我调用服务器`form.submit()`上`var_dump()`的`$_FILES`数组时，它是空的！

在我在 ExtJS 中看到的文件上传示例中，表单提交是通过`handler`视图中 Save 按钮上的函数发生的。由于我喜欢在控制器中保留处理按钮按下的逻辑，我希望这不是我唯一的选择！

任何输入将不胜感激，感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:50:23.967

这肯定是服务器端问题。ExtJS 利用隐藏组件向服务器提交多部分表单。这确实如指南、示例和文档中描述的那样有效。

我不熟悉您上面提到的 var dump 功能，但是您需要确保您的服务器端组件正在正确处理多部分表单提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:06:33.167

我觉得有点傻，但问题在于从传递给我的`saveForm`方法的按钮中检索表单对象。

更正：

在我的 ExtJS 控制器中...

```
saveForm: function(button)
{
    var currentWindow = button.up('window');
/** var form          = button.down('form').getForm(); **INCORRECT** */
    var form          = button.up('form').getForm(); /** this is correct */

        form.submit({
            url     : '/service/form/upload/format/json',
            waitMsg : 'Uploading....',
            success : function(form,o) {
                alert(o.response.responseText);
            },
            failure: function(form, action)
            {
                console.error('form, action', form,action);
                alert('failure');
            }
        });
} 
```

在我的后端（Zend）中，我的控制器操作很简单：

```
public function uploadAction()
{
    var_dump($_FILES);
    this->view->success = false;
} 
```

正如预期的那样，我的 Chrome Inspector 在单击保存按钮时会输出以下内容：

```
Uncaught Ext.JSON.decode(): You're trying to decode an invalid JSON String:
 {"success":false}array(1) {
  ["file-upload-field"]=>
  array(5) {
    ["name"]=>
    string(29) "TestImage.jpg"
    ["type"]=>
    string(10) "image/jpeg"
    ["tmp_name"]=>
    string(14) "/tmp/php7XfeLD"
    ["error"]=>
    int(0)
    ["size"]=>
    int(89799)
  }
} 
```

服务器已成功接收到文件上传！

# mysql - 带有前导零的mysql outfile列

> ID：12959242
> 
> 赞同：4
> 
> 时间：2012-10-18T16:23:26.400
> 
> 标签：mysql, csv, into-outfile

我正在尝试将数据导出到 csv 文件中，但我的前导零被截断了......我无法在拉取数据后修改数据，因此不能选择 LPAD。此外，ID 不是固定长度......它可能是 6 个字符长，或最多 11 个字符。它也可能有字母（在这种情况下，csv 将这些值显示为字符串。无论如何，带有前导零的字段具有数据库中的前导零并存储为varchar。我需要提取这些值并将它们显示在带有零的csv中：

```
SELECT
    'ID',
    'Par 1',
    'Par 2'
UNION
(SELECT
    result.id as 'ID',      
    COALESCE(sum(if(result.parameter = '10001', result.result, NULL)),'-') as 'Par 1',
    COALESCE(sum(if(result.parameter = '10002', result.result, NULL)),'-') as 'Par 2'
    INTO OUTFILE '/tmp/file.csv' FIELDS TERMINATED BY ','  ENCLOSED BY '\"' 
FROM (
    SELECT
        event.id,
        resultset.parameter_cd,
        resultset.result
    FROM event
    Inner Join resultset ON resultset.id = event.id
    ) as result
group by result.id
order by
    result.id ASC ) 
```

在这种情况下，'id'可能有前导零......来自mysql的结果集显示了它们，但是在导出的csv中它们被完全去除？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:54:39.237

作为一种解决方法，用双引号将 id 括起来并取出`enclosed by`，因为数字字段不需要它们

```
(SELECT
    concat ('\"', result.id, '\"') as 'ID',
    COALESCE(sum(if(result.parameter = '10001', result.result, NULL)),'-') as 'Par 1',
    COALESCE(sum(if(result.parameter = '10002', result.result, NULL)),'-') as 'Par 2'
    INTO OUTFILE '/tmp/file.csv' FIELDS TERMINATED BY ',' 
```

# php - 将 Facebook 头像的显示限制为随机数或前 196 个

> ID：12959249
> 
> 赞同：0
> 
> 时间：2012-10-18T16:23:49.537
> 
> 标签：php, facebook, facebook-graph-api

这是我的代码片段

```
<?php
$me = $facebook->api('/me/friends');
foreach( $me['data'] as $frns ) {
?>
<img src="https://graph.facebook.com/"<?php echo $frns['id'] ?>"/picture" 
      title="<?php echo $frns['name'] ?>"/>
<?php
} 
```

我想使用类似的东西合并所有图像

```
$im = mergeImages( array( image1, image2, etc ) ); 
```

如何将合并限制为仅前 196 个或随机数量的图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:39:13.357

将您的代码更改为此。您不必再进行一系列 API 调用来获取图片的 url，并且您的脚本不必处理 Facebook 通常为图像抛出的 301 重定向。

```
$me = $facebook->api('/me/friends?fields=name,picture');
echo "<br />Total friends".sizeof($me['data'])."<br />";

echo "<br /> Friends collage<br /><br />";

$frns_images = array();
$i = 1;
foreach($me['data'] as $frns)
{
   if ($i >= 100) break;
   $img = $frns['picture']['data']['url']; //Double check this.
   if ('jpg' === substr($img, -3)) {
     printf ('<img  src="%s" title="%s" />', $img, $frns['name']);
     $frns_images[] = $img;
     $i++;
   }
}
$im = mergeImages($frns_images); 
```

# c++ - 为什么我收到错误“非模板'f'用作模板”

> ID：12959250
> 
> 赞同：6
> 
> 时间：2012-10-18T16:23:49.257
> 
> 标签：c++, templates, struct

我试图了解在哪里使用`template`，`typename`但遇到了一个我无法解决的问题。我有一个模板函数`f<T>`，它使用传递给它的类型（这将是一个类）来调用 template-member-function `.f<T>`。我认为我`typename`在函数体中的使用是正确的，但是，我不断收到以下错误：

> source.cpp: In function `'void f()'`:
> source.cpp:11:19: error: non-template `'f'`used as template
> source.cpp:11:19: note: use`'typename T::C::template f'`表示它是一个模板

```
struct A {
  struct C {
     template <typename T> void f() {}
  };
};

template <typename T> void f() {

  typename T::C::f<int>();

}

int main() {

  f<A>();

} 
```

请注意它建议如何使用最后一个错误`'typename T::C::template f'`。因此，我按照以下方式进行了更改：

```
// ...
typename T::C::template f<int>();
// ... 
```

我按照它说的做了，但后来我收到了下一行错误：

> 错误：没有在中命名`'f'`的类模板`'struct A::C'`

我认为这个错误是不正确的，因为实际上有一个名为 in 的公共*模板*`f`函数`struct A::C`。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T16:27:35.727

假设我们`f` `static`这样可以在没有实例的情况下调用它，那么您不需要，`typename`因为您没有使用依赖类型创建任何歧义（即`C`不能是变量，因为您`::`在之后使用它）。这是正确的语法：

```
struct A {
  struct C {
     template <typename T>
     static void f() {}
  };
};

template <typename T> void f() {
  T::C::template f<int>();
} 
```

如果你不想让它静态，你会创建一个`A::C`并使用`.template f<int>()`：

```
struct A {
  struct C {
     template <typename T>
     static void f() {}
  };
};

template <typename T> void f() {
  typename T::C c;
//^^^^^^^^ Now we DO need typename to disambiguate.

  c.template f<int>();
} 
```

# asp.net - 我的 html 表之一没有保持 100% 的高度

> ID：12959251
> 
> 赞同：1
> 
> 时间：2012-10-18T16:23:52.190
> 
> 标签：asp.net, html, css, html-table

下拉列表根据选择填充表格的行。表格大小应该固定为全高，100%，不管它有多少行；但是，它仅与表中的行数一样大。

这是我正在使用的标记：

```
<table style="width:100%;height:100%">
    <tr>
        <td class="auto-style9">
            <asp:DropDownList ID="ddlTechnicians" runat="server" AutoPostBack="True"
            OnSelectedIndexChanged="ddlTechnicians_SelectedIndexChanged">
                <asp:ListItem Selected="True">Online</asp:ListItem>
                <asp:ListItem>Offline</asp:ListItem>
                <asp:ListItem>All Users</asp:ListItem>
            </asp:DropDownList>
        </td>
    </tr>
    <tr>
         <td>
             <asp:Table ID="tblTechnicians" CssClass="tblTechnicians"
             runat="server">
             </asp:Table>
         </td>
         </tr>
</table> 
```

以及 tblTechnicians 类的 CSS：

```
.tblTechnicians 
{
    width: 100%;
    height: 100%;            
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:27:18.913

您需要在父容器上设置 100% 的高度。包括HTML和Body，如：

```
html,body,form {height:100%} 
```

如果此表所在的任何其他容器也需要设置为 100% 的高度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:30:29.727

尝试在其上设置最小高度，任何容器同上：

```
.tblTechnicians 
{
    width: 100%;
    min-height: 100%;            
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T16:36:25.693

TABLE 结构/元素不是 DIV。您不能强制表格在每种情况下都假定任意高度。也许您应该使用 DIV 来完成您的布局目标？我也尝试了以上所有方法都无济于事。除非我错过了什么。

但是，您可以使用 JQuery 将表格高度设置为与窗口高度的 100%（或任何百分比）匹配：

```
$("table").css('height', $(window).height()); 
```

祝你好运

# java - 如何在 Java 中最小化/图标化 JWindow？

> ID：12959253
> 
> 赞同：3
> 
> 时间：2012-10-18T16:24:04.113
> 
> 标签：java, swing, minimize, jwindow

我的应用程序有一个需要在单击自定义最小化器按钮时最小化的 JWindow。如果有人知道如何最小化 JWindow，请回复。我进行了很多搜索，但找不到任何合适的方法来最小化。我知道如何最小化 JFrame。所以请不要费心回答有关 JFrame 的问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:30:59.467

我知道你不想听到这个，但可怕的事实是，未装饰的 jframe（使用 setstate 方法）和 jwindows 之间没有太大区别...... :)

```
 JFrame f = new JFrame("Frame");
    f.setUndecorated(true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:13:26.053

由于 JWindow 没有用任何控件图标装饰，因此没有提供任何`setState`方法。一种解决方法是允许您的自定义最小化按钮根据需要设置窗口可见：

```
public class JWindowTest extends JFrame {

    JWindow window = new JWindow();
    JButton maxMinButton = new JButton("Minimize Window");

    public JWindowTest() {
        setSize(300, 200);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        maxMinButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                if (window.isVisible()) {
                    maxMinButton.setText("Restore Window");
                } else {
                    maxMinButton.setText("Minimize Window");
                }
                window.setVisible(!window.isVisible());
            }
        });

        add(maxMinButton);

        window.setBounds(30, 30, 300, 220);
        window.setLocationRelativeTo(this);
        window.add(new JLabel("Test JWindow", JLabel.CENTER));
        window.setVisible(true);
    }

    public static void main(String[] args) {
        new JWindowTest().setVisible(true);
    }
} 
```

# python - Django Python Timeseries - 可重用的应用程序和数据库模式

> ID：12959256
> 
> 赞同：2
> 
> 时间：2012-10-18T16:24:11.720
> 
> 标签：python, django, time-series

建议使用哪些 Django 应用程序或 Python 模块来处理和保存到数据库时间序列数据中。为时间序列数据推荐哪种数据库模式？

我的用例是我的数据库模式中有节点模型，它有一个开始和结束日期，我想在开始和结束日期之间的每一天保存一个值。这可能是很多行，因为我有数千个节点，并且开始和结束日期在 1 到 365 天之间。

我的模型看起来像这样，而我会感谢有关更好/性能改进结构的输入：

```
class Node(models.Model):
    """
    Representation of a single node
    """

    name = models.CharField(max_length=200)
    start = models.DateField() 
    end = models.DateField()

class TimeSeries(models.Model)
     """
     holds the time series values. For each day between start and end date one TimeSeries object will be created
     """
     node = models.ForeignKey(Node)
     date = models.DateField() #holds a specific date between start and end date of node
     value = models.IntegerField(max_length=2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T02:30:48.450

我会说你最好的选择是**Pandas**。他们充分利用了 NumPy、scikits 等并将其打包。

1.  [Pandas 的时间序列功能](http://pandas.pydata.org/pandas-docs/stable/timeseries.html)。即使**pyTseries**不再处于活动状态（合并到 Pandas 中），[文档也很适合浏览](http://pytseries.sourceforge.net/genindex.html)。
2.  如果对 ARMA 感兴趣，请查看这些“ [statsmodels](http://statsmodels.sourceforge.net/devel/examples/generated/ex_arma2.html) ”集。

希望这可以帮助。

# grails - 在heroku中设置grails应用程序环境？

> ID：12959261
> 
> 赞同：4
> 
> 时间：2012-10-18T16:24:34.050
> 
> 标签：grails, heroku, environment

Heroku 支持非生产环境，但他们的文档很少涉及该主题。他们提到为 Rails 应用程序设置 RACK_ENV。grails的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-03T14:34:54.970

您可以尝试先用适当的环境构建war文件，然后上传为war文件。

# configuration - 配置管理：如果升级失败则回滚

> ID：12959263
> 
> 赞同：1
> 
> 时间：2012-10-18T16:24:46.993
> 
> 标签：configuration, upgrade, rollback

我正在尝试开发完全独立的服务器，它能够在没有任何人为干预的情况下自行升级。更准确地说，以下是要求： - 服务器每晚检查指定服务器上的更新：
- 当升级可用时，它会下载新的配置文件或其他东西 - 然后服务器继续升级，但如果出现任何问题（互联网连接丢失或下载错误）服务器回滚到以前的配置。

事实上，我们并不真正关心服务器是否不是最新的，但我们希望确保它仍在运行（即使在旧版本中）。我一直在寻找配置管理系统，并找到了像 Puppet 这样的精美工具。但是，例如，如果 puppet 无法下载新的 debian 软件包，则更新将失败，并且存在服务器无法完成任务的风险。

所以我想知道，我是否必须在启动升级之前检查每个软件包是否正确下载，或者是否有任何精美的工具可以为我完成并在需要时回滚？

有一点很重要，一旦部署了服务器，我们就无法访问它。这就是为什么让它在旧版本中运行比让它不运行更好的原因。

我希望你能理解我的问题，对不起我的英语

朱利安

# ios - UIdatepicker 显示工作日

> ID：12959267
> 
> 赞同：2
> 
> 时间：2012-10-18T16:25:07.467
> 
> 标签：ios, xcode, date, uipickerview, uidatepicker

我想做一个显示工作日、日期和月份的日期选择器。

我有一个显示月份、日期和年份的工作日期选择器，但我真的希望它显示月份、日期、日期

这怎么可能？我知道我可能需要制作一个自定义 UIpicker，但是如何让这个引用日期？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:44:00.593

您需要使用 UIPickerView 创建自己的选择器。创建一个 NSDateFormatter。然后，您可以从日期格式化程序访问月份名称和工作日名称。NSCalendar 可用于获取一个月的最大天数。

真正的技巧是在用户从其中一个组件中选择一个值时更新选择器视图组件。例如，如果用户选择一个月，您想更新天组件中显示的天数（或者，像 UIDatePicker 一样），将无效天数变灰。由于您没有一年，因此无法正确处理二月，这使情况变得复杂。

当用户选择给定的工作日时，你会怎么做？这将如何影响所选日期？只是要考虑的事情。

# php - 使用 mysql_real_escape_string() 提取数据

> ID：12959274
> 
> 赞同：0
> 
> 时间：2012-10-18T16:25:32.453
> 
> 标签：php, mysql, database

我正在尝试使用 mysql 和 PHP 从数据库中检索值。问题是： +++ 我的表字段 (product_model_name) 由 (;) 例如 Crystal;Uni 组成，我想根据这个产品范围过滤结果。

我曾尝试使用 mysql_real_escape_string() 来处理它但无法成功。这是我的代码：

```
$range="Crystal;Uni"; 
$test=mysql_real_escape_string($range); 
$sql="select product_model_image from product_models where product_model_name=".$test;
$res= mysql_query($sql) or die (mysql_error());
  while($row = mysql_fetch_array($res))
 { 
 echo $row['product_model_image '];
 } 
```

有人能指出我在哪里犯错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:27:56.790

尝试

```
 $sql="select product_model_image from product_models where product_model_name= '{$test}'"; 
```

也使用`pdo`or`mysqli`代替`mysql_*`

[这是很好的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:28:23.323

在查询中将字符串括在引号中：

```
$sql="select product_model_image from product_models where product_model_name='".$test."'"; 
```

* * *

强制性旁注：`mysql_*`库正在逐步淘汰，因此您应该在另一个库中编写新代码，例如[PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。无论如何，这些库还有许多其他好处，例如参数化查询比您现在所做的转义更安全。

# sql-server - SQL Server按周对月度数据进行分区，并根据该周的月天数计算周加权平均值属于

> ID：12959281
> 
> 赞同：1
> 
> 时间：2012-10-18T16:25:52.520
> 
> 标签：sql-server, tsql

我有一张这样的桌子：

```
Month          Value
2012-08-01      0.345
2012-09-01      0.543
2012-10-01      0.321
2012-11-01      0.234
2012-12-01      0.234 
```

用户输入周范围从“2012-09-29”到“2012-10-13”输出应显示请求范围内所有周的结果和每周的平均值，逻辑如下： - 如果所有工作日都在一个月内，只需使用该月的月值 - 如果工作日分布在两个月内，则将周值计算为这两个月之间的平均值，优先考虑包含该周中天数最多的月份。

如果有人能给我一个想法，如何在 T-SQL 中做这样的事情，那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:53:04.313

最后[一个查询](http://sqlfiddle.com/#!3/d41d8/5393/0)就是示例。Calendar 表是根据请求构建的，但是每个数据库都可以使用持久的 Calendar 表，您可以在该表上过滤日期范围。

```
declare @tbl table (
  Month datetime,
  Value decimal(10,3));
insert @tbl select
'2012-08-01',      0.345 union all select
'2012-09-01',      0.543 union all select
'2012-10-01',      0.321 union all select
'2012-11-01',      0.234 union all select
'2012-12-01',      0.234;

declare @start datetime, @end datetime;
select @start = '2012-09-29', @end ='2012-10-13';

;with Calendar(TheDate,StartOfWeek,StartOfMonth) as(
  select @start, @start+1-Datepart(dw,@start), @start-Day(@start)+1
  union all
  select TheDate+1, TheDate+1+1-Datepart(dw,TheDate+1),
         TheDate+1-Day(TheDate+1)+1
  from Calendar
  where TheDate < @end
)
select case when @start > v.StartOfWeek
            then @start else v.StartOfWeek end RangeStart,
       case when @end < v.StartOfWeek+6
            then @end else v.StartOfWeek+6 end RangeEnd,
       cast(avg(m.value) as decimal(10,3)) [Average]
from Calendar v
join @tbl m on v.StartOfMonth = m.Month
group by v.StartOfWeek; 
```

输出

```
RANGESTART          RANGEEND            Average
September, 29 2012  September, 29 2012  0.543
September, 30 2012  October, 06 2012    0.353
October, 07 2012    October, 13 2012    0.321 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:56:18.147

您的查询将是这样的。思路是找到下个月的第一天**DATEADD(mm, DATEDIFF(mm, 0, Month) + 1, 0**。计算天数，然后就可以得到每月的总数，然后根据当月的第一天和下个月的第一天之间的差异。（SQL 语法可能需要一些清理）。

```
declare @startdate datetime
declare  @enddate datetime

set @startdate = '2012-09-05'
set @enddate ='2012-10-13'

 Select Monthtotal/DateDiff(d,Month,NextMonth)
    FROM
        (Select 
         Month, DATEADD(mm, DATEDIFF(mm, 0, Month) + 1, 0) NextMonth, 
         DateDiff(d,Month, DATEADD(mm, DATEDIFF(mm, 0, Month) + 1, 0) * Value as Monthtotal
        FROM  DatesTable
        WHERE 
            @startdate >= Month and 
            @enddate <= DATEADD(mm, DATEDIFF(mm, 0, Month) + 1, 0)) 
```

# objective-c - Objective-C 块是捕获属性值还是对象值？

> ID：12959283
> 
> 赞同：2
> 
> 时间：2012-10-18T16:26:02.687
> 
> 标签：objective-c, objective-c-blocks

假设我有一个`anInstance`具有属性的类的实例`aProperty`。当我`anInstance.aProperty`在块内使用时，该块是捕获 的（指针）值，`anInstance`然后将`aProperty`消息发送到该捕获的（指针）值，还是该块仅捕获 的值`anInstance.aProperty`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:28:06.713

该块将在此处捕获`anInstance`。请记住，属性访问只是消息发送。

如果您考虑一下，`[anInstance aProperty]`它可能会更明显。但要注意，`anInstance->someIvar`仍然捕获`anInstance`而不是 iVar。

# css - 用于在ie7中将选择元素的背景设置为透明的css

> ID：12959284
> 
> 赞同：2
> 
> 时间：2012-10-18T16:26:05.137
> 
> 标签：css, internet-explorer-7, background-color

我有这样的代码

```
<div>
  <select>
     <option>Option 1</option>
     <option>Option 2</option>
     <option>Option 3</option>
     <option>Option 4</option>
  <select>
</div> 
```

div 有一个背景图像，应该可以通过选择框看到。我遇到的问题是 IE7，我无法将选择元素的背景颜色设置为透明。

编辑：图像只是向下箭头。文字是真实的文字。

我已经使用了这个 CSS，但它不起作用

```
background-color:transparent 
```

这是一个屏幕截图，以帮助更好地理解

![在此处输入图像描述](../Images/61cf10d0ab9ec744715479881ecaff93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:29:46.790

你试过这个吗？

```
.transparent {
  filter: alpha(opacity=0);
  opacity: 0;
} 
```

在 Web 开发方面，IE7 并不是你最好的朋友。有很多事情是行不通的。

但是，您可以使用一些不错的 javascript 插件来覆盖默认样式。

[我个人在工作中使用这个。](http://jamielottering.github.com/DropKick/)当我需要使用自定义下拉菜单支持 IE7 时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:30:41.430

由于您使用图像来显示文本，请尝试将字体大小设置为 0px：

> 字体大小：0px

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T15:01:23.193

从死里复活，但可能对其他遇到此问题的人有所帮助。

使用这个元，它必须是头脑中的第一件事

```
 <meta http-equiv="X-UA-Compatible" content="IE=Edge" /> 
```

这应该有效。

# java - Blackberry 中的 invokeLater 中的线程

> ID：12959296
> 
> 赞同：1
> 
> 时间：2012-10-18T16:26:38.693
> 
> 标签：java, multithreading, blackberry

我在 Blackberry 的 invokeLater 方法中有一个线程，例如：

```
startButton.setChangeListener(new FieldChangeListener() {
public void fieldChanged(Field arg0, int arg1) {
    UiApplication.getUiApplication().invokeLater(new Runnable() {
        public void run() {
            Thread thread = new Thread(){
                public void run() {
                    uploadFile();
                }
            };
            thread.start();
        }
    });
} 
```

我有一个线程，因为我想在后台运行该功能，并希望能够在其工作的同时做其他事情。我想知道这是否是一个好方法。在这种情况下我真的需要 invokeLater 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:02:43.417

简短的回答：没有。

长答案：

InvokeLater 将 Runnable 放在事件队列中，以便及时，当事件循环看到 Runnable 时，它​​将在事件线程上执行它。由于您在 FieldChangeListener 的 fieldChanged 方法中调用 invokeLater，因此您是从事件线程调用它。除非您想要将线程的启动延迟到某个未知的稍后时间，否则您不需要使用invokeLater。

# python - 从多个文件读取/写入文本到主文件

> ID：12959298
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:26:43.717
> 
> 标签：python

在下面的代码中，我试图打开一系列文本文件并将它们的内容复制到一个文件中。我在“os.write（out_file，line）”上遇到错误，它要求我输入一个整数。我还没有定义什么是“线”，那是问题吗？我是否需要以某种方式指定“行”是 in_file 中的文本字符串？此外，我通过 for 循环的每次迭代打开 out_file。那不好吗？我应该在开始时打开一次吗？谢谢！

```
import os
import os.path
import shutil

# This is supposed to read through all the text files in a folder and
# copy the text inside to a master file.

#   This defines the master file and gets the source directory
#   for reading/writing the files in that directory to the master file.

src_dir = r'D:\Term Search'
out_file = r'D:\master.txt'
files = [(path, f) for path,_,file_list in os.walk(src_dir) for f in file_list]

# This for-loop should open each of the files in the source directory, write
# their content to the master file, and finally close the in_file.

for path, f_name in files:
    open(out_file, 'a+')
    in_file = open('%s/%s' % (path, f_name), 'r')
    for line in in_file:
        os.write(out_file, line)
    close(file_name)
    close(out_file)

print 'Finished' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:33:12.803

你这样做是错的：

你做了：

```
open(out_file, 'a+') 
```

但这不会将引用保存为变量，因此您无法访问刚刚创建的文件对象。你需要做什么：

```
out_file_handle = open(out_file, 'a+')
...
out_file_handle.write(line)
...
out_file_handle.close() 
```

或者，更蟒蛇：

```
out_filename = r"D:\master.txt"
...
with open(out_filename, 'a+') as outfile:
    for filepath in files:
        with open(os.path.join(*filepath)) as infile:
            outfile.write(infile.read())

print "finished" 
```

# networking - 具有 vlan 的网络、tcpdump 显示连接和 icmp 回复和请求，但未收到 ping

> ID：12959301
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:27:04.857
> 
> 标签：networking, dhcp

我有一个带有交换机的网络，每个交换机上的每个端口上的 pvid 都设置为 1。服务器位于具有权威 dhcp 的 linux debian 上。某些 IP 地址无权访问网关。我不知道什么是阻塞：交换机或网关。

最奇怪的是，在 ping 请求时，网关收到它并回答它。客户端也发送请求并接收应答，但 ping 程序不显示回复。我用 tcpdump 检查了回复：

客户端 tcpdump：

```
18:18:20.283614 ARP, Request who-has 192.168.0.102 tell 192.168.1.1, length 46
18:18:21.135348 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 46, length 64
18:18:43.766916 ARP, Request who-has 192.168.0.101 tell 192.168.1.1, length 46
18:18:44.135326 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 69, length 64
18:18:44.164008 IP 192.168.1.1 > kicok-K53SJ: ICMP echo reply, id 6937, seq 69, length 64
18:18:44.238354 ARP, Request who-has 192.168.1.1 tell 192.168.0.234, length 46
18:18:44.618056 ARP, Request who-has 192.168.0.102 tell 192.168.1.1, length 46
18:19:09.135332 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 94, length 64
18:19:09.139740 IP 192.168.1.1 > kicok-K53SJ: ICMP echo reply, id 6937, seq 94, length 64
18:19:09.332947 ARP, Request who-has 192.168.0.102 tell 192.168.1.1, length 46
18:19:10.135329 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 95, length 64
18:19:10.137030 IP 192.168.1.1 > kicok-K53SJ: ICMP echo reply, id 6937, seq 95, length 64
18:19:11.135345 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 96, length 64
18:19:33.771534 ARP, Request who-has 192.168.0.101 tell 192.168.1.1, length 46
18:19:34.121969 ARP, Request who-has 192.168.1.1 tell 192.168.0.55, length 46
18:19:34.135323 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 119, length 64
18:19:34.139833 IP 192.168.1.1 > kicok-K53SJ: ICMP echo reply, id 6937, seq 119, length 64
18:19:34.218611 ARP, Request who-has 192.168.0.102 tell 192.168.1.1, length 46
18:19:34.771301 ARP, Request who-has 192.168.0.101 tell 192.168.1.1, length 46
18:19:35.135326 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 120, length 64
18:19:58.969345 ARP, Request who-has 192.168.0.102 tell 192.168.1.1, length 46
18:19:59.135327 IP kicok-K53SJ > 192.168.1.1: ICMP echo request, id 6937, seq 144, length 64
18:19:59.143169 IP 192.168.1.1 > kicok-K53SJ: ICMP echo reply, id 6937, seq 144, length 64

18:18:36.955859 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 60, length 64
18:18:37.950910 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 61, length 64
18:18:37.955877 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 61, length 64
18:18:38.950981 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 62, length 64
18:18:38.956643 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 62, length 64
18:18:39.951068 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 63, length 64
18:18:39.956960 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 63, length 64
18:18:40.583070 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 101.0.168.192.in-addr.arpa. (44)
18:18:40.951113 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 64, length 64
18:18:40.969777 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 64, length 64
18:18:41.584863 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 101.0.168.192.in-addr.arpa. (44)
18:18:41.951164 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 65, length 64
18:18:41.965874 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 65, length 64
18:18:42.951232 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 66, length 64
18:18:42.957989 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 66, length 64
18:18:43.587702 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 101.0.168.192.in-addr.arpa. (44)
18:18:43.951288 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 67, length 64
18:18:43.978219 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 67, length 64
18:18:44.951377 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 68, length 64
18:18:44.980280 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 68, length 64
18:18:45.485589 IP 192.168.1.133.60758 > xxx.pl.domain: 57978+ PTR? 210.0.168.192.in-addr.arpa. (44)
18:18:45.490642 IP xxx.pl.domain > 192.168.1.133.60758: 57978 NXDomain 0/1/0 (115)
18:18:45.951413 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 69, length 64
18:18:45.979881 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 69, length 64
18:18:46.951478 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 70, length 64
18:18:46.972661 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 70, length 64
18:18:47.951557 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 71, length 64
18:18:47.982161 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 71, length 64
18:18:48.951626 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 72, length 64
18:18:48.977249 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 72, length 64
18:18:49.951717 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 73, length 64
18:18:49.953255 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 73, length 64
18:18:50.491068 IP 192.168.1.133.43288 > dns.xxx.pl.domain: 57978+ PTR? 210.0.168.192.in-addr.arpa. (44)
18:18:50.566751 IP dns.xxx.pl.domain > 192.168.1.133.43288: 57978 NXDomain 0/1/0 (115)
18:18:50.951760 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 74, length 64
18:18:50.953278 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 74, length 64
18:18:51.951802 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 75, length 64
18:18:51.960164 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 75, length 64
18:18:52.951854 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 76, length 64
18:18:52.953091 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 76, length 64
18:18:53.951879 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 77, length 64
18:18:53.953604 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 77, length 64
18:18:54.951972 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 78, length 64
18:18:54.954378 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 78, length 64
18:18:55.496499 IP 192.168.1.133.60758 > xxx.xxx.pl.domain: 57978+ PTR? 210.0.168.192.in-addr.arpa. (44)
18:18:55.501014 IP xxx.pl.domain > 192.168.1.133.60758: 57978 NXDomain 0/1/0 (115)
18:18:55.951978 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 79, length 64
18:18:55.956163 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 79, length 64
18:18:56.952149 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 80, length 64
18:18:56.960399 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 80, length 64
18:18:57.952172 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 81, length 64
18:18:57.952201 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 81, length 64
18:18:58.952182 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 82, length 64
18:18:58.952203 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 82, length 64
18:18:59.952278 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 83, length 64
18:18:59.958884 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 83, length 64
18:19:00.501918 IP 192.168.1.133.43288 > xxx.pl.domain: 57978+ PTR? 210.0.168.192.in-addr.arpa. (44)
18:19:00.507208 IP dns.xxx.pl.domain > 192.168.1.133.43288: 57978 NXDomain 0/1/0 (115)
18:19:00.952422 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 84, length 64
18:19:00.955510 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 84, length 64
18:19:01.952401 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 85, length 64
18:19:01.952870 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 85, length 64
18:19:02.952495 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 86, length 64
18:19:02.953525 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 86, length 64
18:19:03.952538 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 87, length 64
18:19:03.952904 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 87, length 64
18:19:04.952573 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 88, length 64
18:19:04.953364 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 88, length 64
18:19:05.608089 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 210.0.168.192.in-addr.arpa. (44)
18:19:05.952649 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 89, length 64
18:19:05.952904 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 89, length 64
18:19:06.609875 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 210.0.168.192.in-addr.arpa. (44)
18:19:06.952744 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 90, length 64
18:19:06.953540 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 90, length 64
18:19:07.952727 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 91, length 64
18:19:07.953864 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 91, length 64
18:19:08.612728 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 210.0.168.192.in-addr.arpa. (44)
18:19:08.952852 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 92, length 64
18:19:08.954535 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 92, length 64
18:19:09.952912 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 93, length 64
18:19:09.953297 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 93, length 64
18:19:10.510580 IP 192.168.1.133.35953 > xxx.pl.domain: 64751+ PTR? 155.0.168.192.in-addr.arpa. (44)
18:19:10.518416 IP xxx.pl.domain > 192.168.1.133.35953: 64751 NXDomain 0/1/0 (115)
18:19:10.952931 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 94, length 64
18:19:10.957117 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 94, length 64
18:19:11.953017 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 95, length 64
18:19:11.954464 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 95, length 64
18:19:12.953078 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 96, length 64
18:19:12.957269 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 96, length 64
18:19:13.953118 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 97, length 64
18:19:13.956323 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 97, length 64
18:19:14.953260 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 98, length 64
18:19:14.954302 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 98, length 64
18:19:15.516043 IP 192.168.1.133.55284 > dns.xxx.pl.domain: 64751+ PTR? 155.0.168.192.in-addr.arpa. (44)
18:19:15.591622 IP dns.xxx.pl.domain > 192.168.1.133.55284: 64751 NXDomain 0/1/0 (115)
18:19:15.953235 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 99, length 64
18:19:15.953812 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 99, length 64
18:19:16.953311 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 100, length 64
18:19:16.955149 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 100, length 64
18:19:17.953353 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 101, length 64
18:19:17.957049 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 101, length 64
18:19:18.953643 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 102, length 64
18:19:18.954942 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 102, length 64
18:19:18.964016 ARP, Request who-has 192.168.1.1 tell 192.168.1.133, length 46
18:19:18.964654 ARP, Reply 192.168.1.1 is-at 44:1e:a1:3d:e3:36 (oui Unknown), length 28
18:19:19.953499 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 103, length 64
18:19:19.954509 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 103, length 64
18:19:20.521712 IP 192.168.1.133.35953 > xxx.pl.domain: 64751+ PTR? 155.0.168.192.in-addr.arpa. (44)
18:19:20.524172 IP xxx.pl.domain > 192.168.1.133.35953: 64751 NXDomain 0/1/0 (115)
18:19:20.953602 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 104, length 64
18:19:20.953625 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 104, length 64
18:19:21.953619 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 105, length 64
18:19:21.955911 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 105, length 64
18:19:22.953700 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 106, length 64
18:19:22.953724 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 106, length 64
18:19:23.953721 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 107, length 64
18:19:23.954634 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 107, length 64
18:19:24.953837 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 108, length 64
18:19:24.955166 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 108, length 64
18:19:25.526973 IP 192.168.1.133.55284 > dns.xxx.pl.domain: 64751+ PTR? 155.0.168.192.in-addr.arpa. (44)
18:19:25.527718 IP dns.xxx.pl.domain > 192.168.1.133.55284: 64751 NXDomain 0/1/0 (115)
18:19:25.953872 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 109, length 64
18:19:25.954173 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 109, length 64
18:19:26.953926 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 110, length 64
18:19:26.954283 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 110, length 64
18:19:27.953975 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 111, length 64
18:19:27.954940 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 111, length 64
18:19:28.954047 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 112, length 64
18:19:28.954219 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 112, length 64
18:19:29.954161 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 113, length 64
18:19:29.956431 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 113, length 64
18:19:30.633106 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 155.0.168.192.in-addr.arpa. (44)
18:19:30.954208 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 114, length 64
18:19:30.954535 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 114, length 64
18:19:31.634965 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 155.0.168.192.in-addr.arpa. (44)
18:19:31.954242 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 115, length 64
18:19:31.956892 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 115, length 64
18:19:32.954308 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 116, length 64
18:19:32.954323 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 116, length 64
18:19:33.637792 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 155.0.168.192.in-addr.arpa. (44)
18:19:33.954386 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 117, length 64
18:19:33.955436 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 117, length 64
18:19:34.954469 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 118, length 64
18:19:34.956300 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 118, length 64
18:19:35.535640 IP 192.168.1.133.49359 > xxx.pl.domain: 25834+ PTR? 109.1.168.192.in-addr.arpa. (44)
18:19:35.540854 IP xxx.pl.domain > 192.168.1.133.49359: 25834 NXDomain 0/1/0 (115)
18:19:35.954492 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 119, length 64
18:19:35.958736 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 119, length 64
18:19:36.954570 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 120, length 64
18:19:36.957627 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 120, length 64
18:19:37.954587 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 121, length 64
18:19:37.957188 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 121, length 64
18:19:38.954707 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 122, length 64
18:19:38.954731 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 122, length 64
18:19:39.954721 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 123, length 64
18:19:39.958968 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 123, length 64
18:19:40.541158 IP 192.168.1.133.51285 > dns.xxx.pl.domain: 25834+ PTR? 109.1.168.192.in-addr.arpa. (44)
18:19:40.617464 IP dns.xxx.pl.domain > 192.168.1.133.51285: 25834 NXDomain 0/1/0 (115)
18:19:40.954839 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 124, length 64
18:19:40.955927 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 124, length 64
18:19:41.954885 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 125, length 64
18:19:41.956015 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 125, length 64
18:19:42.954885 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 126, length 64
18:19:42.954908 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 126, length 64
18:19:43.954963 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 127, length 64
18:19:43.957784 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 127, length 64
18:19:44.955045 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 128, length 64
18:19:44.958610 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 128, length 64
18:19:45.546565 IP 192.168.1.133.49359 > xxx.pl.domain: 25834+ PTR? 109.1.168.192.in-addr.arpa. (44)
18:19:45.547949 IP xxx.pl.domain > 192.168.1.133.49359: 25834 NXDomain 0/1/0 (115)
18:19:45.955110 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 129, length 64
18:19:45.956237 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 129, length 64
18:19:46.955326 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 130, length 64
18:19:46.961571 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 130, length 64
18:19:47.955220 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 131, length 64
18:19:47.955244 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 131, length 64
18:19:48.955309 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 132, length 64
18:19:48.955332 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 132, length 64
18:19:49.955391 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 133, length 64
18:19:49.963315 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 133, length 64
18:19:50.552030 IP 192.168.1.133.51285 > dns.xxx.pl.domain: 25834+ PTR? 109.1.168.192.in-addr.arpa. (44)
18:19:50.558578 IP dns.xxx.pl.domain > 192.168.1.133.51285: 25834 NXDomain 0/1/0 (115)
18:19:50.955424 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 134, length 64
18:19:50.958131 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 134, length 64
18:19:51.955457 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 135, length 64
18:19:51.956353 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 135, length 64
18:19:52.955532 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 136, length 64
18:19:52.956103 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 136, length 64
18:19:53.955572 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 137, length 64
18:19:53.962819 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 137, length 64
18:19:54.955635 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 138, length 64
18:19:54.965442 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 138, length 64
18:19:55.658235 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 109.1.168.192.in-addr.arpa. (44)
18:19:55.955686 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 139, length 64
18:19:55.956405 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 139, length 64
18:19:56.659989 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 109.1.168.192.in-addr.arpa. (44)
18:19:56.955766 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 140, length 64
18:19:56.959140 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 140, length 64
18:19:57.955818 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 141, length 64
18:19:57.955832 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 141, length 64
18:19:57.966401 ARP, Request who-has 192.168.1.1 tell 192.168.1.133, length 46
18:19:57.966407 ARP, Reply 192.168.1.1 is-at 44:1e:a1:3d:e3:36 (oui Unknown), length 28
18:19:58.662824 IP 192.168.1.133.mdns > 224.0.0.251.mdns: 0 PTR (QM)? 109.1.168.192.in-addr.arpa. (44)
18:19:58.955878 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 142, length 64
18:19:58.959587 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 142, length 64
18:19:59.955935 IP 192.168.1.133 > 192.168.1.1: ICMP echo request, id 6937, seq 143, length 64
18:19:59.958454 IP 192.168.1.1 > 192.168.1.133: ICMP echo reply, id 6937, seq 143, length 64
18:20:00.560680 IP 192.168.1.133.34705 > xxx.pl.domain: 22360+ PTR? 219.0.168.192.in-addr.arpa. (44) 
```

在此日志中，我们可以看到服务器向客户端发送回复，客户端收到其中一些回复，但 ping 程序没有显示任何回复。当我将客户端 IP 地址从工作地址更改为一个时，它会 ping 网关并且一切正常。我有一半随机地址不起作用，我不知道如何识别它们并找出它们不起作用的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:38:20.343

我已经解决了我的问题。它是旧的 /etc/ethers 文件，没有写访问权限并且条目非常旧。

# java - H2 数据库 ALIAS_COLUMN_NAME=TRUE 似乎没有工作

> ID：12959307
> 
> 赞同：2
> 
> 时间：2012-10-18T16:27:11.080
> 
> 标签：java, h2, spring-jdbc

将 ALIAS_COLUMN_NAME=TRUE 添加到 JDBC url*应该*意味着 h2 允许在列名中使用“别名”，即您可以这样做：

```
resultSet.getString("p.first_name") 
```

如果 p 是某个表的别名。如以下代码所示，这似乎对我不起作用：

```
package com.example;

import junit.framework.TestCase;
import org.apache.commons.dbcp.BasicDataSource;
import org.h2.Driver;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.RowCallbackHandler;
import org.springframework.jdbc.core.simple.SimpleJdbcInsert;

import java.sql.ResultSet;
import java.sql.SQLException;
import java.util.HashMap;

/**
 * H2 Spring Test
 */
public class H2SelectTest extends TestCase {
    public void testQuery() throws Exception {
        BasicDataSource dataSource = new BasicDataSource();
        dataSource.setDriverClassName(Driver.class.getName());
        dataSource.setUrl("jdbc:h2:mem:test;ALIAS_COLUMN_NAME=TRUE");
        dataSource.setUsername("sa");
        dataSource.setPassword("");
        JdbcTemplate template = new JdbcTemplate(dataSource);
        template.afterPropertiesSet();
        template.execute("create table people(id int auto_increment, first_name varchar);");
        SimpleJdbcInsert insert = new SimpleJdbcInsert(template).withTableName("people");
        insert.setGeneratedKeyName("id");
        insert.compile();
        HashMap<String, Object> map = new HashMap<String, Object>();
        map.put("first_name", "Bob");
        insert.execute(map);
        template.query("select p.first_name from people p", new RowCallbackHandler() {
            public void processRow(ResultSet rs) throws SQLException {
                String name = rs.getString("p.first_name");
            }
        });
    }
} 
```

导致此错误：

```
Caused by: org.h2.jdbc.JdbcSQLException: Column "p.first_name" not found [42122-168]
    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)
    at org.h2.message.DbException.get(DbException.java:169)
    at org.h2.message.DbException.get(DbException.java:146)
    at org.h2.jdbc.JdbcResultSet.getColumnIndex(JdbcResultSet.java:2918)
    at org.h2.jdbc.JdbcResultSet.get(JdbcResultSet.java:2979)
    at org.h2.jdbc.JdbcResultSet.getString(JdbcResultSet.java:291)
    at org.apache.commons.dbcp.DelegatingResultSet.getString(DelegatingResultSet.java:225)
    at com.example.H2SelectTest$1.processRow(H2SelectTest.java:35)
    at org.springframework.jdbc.core.JdbcTemplate$RowCallbackHandlerResultSetExtractor.extractData(JdbcTemplate.java:1482)
    at org.springframework.jdbc.core.JdbcTemplate$1QueryStatementCallback.doInStatement(JdbcTemplate.java:446)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:396)
    ... 19 more 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:48:06.997

这是您正在寻找的答案：

事实证明，根据这些文档，ALIAS_COLUMN_NAME 用于列名而不是表别名：

```
 /**
  * System property <code>h2.aliasColumnName</code>.<br />
  * When enabled, aliased columns (as in SELECT ID AS I FROM TEST) return the
  * alias (I in this case) in ResultSetMetaData.getColumnName() and 'null' in
  * getTableName(). If disabled, the real column name (ID in this case) and
  * table name is returned. This setting only affects the default mode.
  **/ 
```

事实证明，使用表别名查询结果集只有 MySQL 支持，JDBC 规范不支持。您可以通过使用 H2 中的完整表名来消除列的歧义，例如 resultSet.getString("people.first_name") 但恐怕，如果您使用 h2 对通常针对 MySQL 运行的代码进行内部测试，您必须找到另一种方式（例如，不要使用别名并使用完整的表名）。

如果您需要任何其他帮助，请通过我，给我留言。

# python - 使用 BeautifulSoup 删除所有内联样式

> ID：12959308
> 
> 赞同：15
> 
> 时间：2012-10-18T16:27:10.867
> 
> 标签：python, css, beautifulsoup, inline

我正在使用 BeautifulSoup 进行一些 HTML 清理。Python 和 BeautifulSoup 的新手。根据我在 Stackoverflow 其他地方找到的答案，我已经正确删除了标签，如下所示：

```
[s.extract() for s in soup('script')] 
```

但是如何删除内联样式？例如以下：

```
<p class="author" id="author_id" name="author_name" style="color:red;">Text</p>
<img class="some_image" href="somewhere.com"> 
```

应该变成：

```
<p>Text</p>
<img href="somewhere.com"> 
```

如何删除所有元素的内联类、id、名称和样式属性？

其他类似问题的答案我可以找到所有提到的使用 CSS 解析器来处理这个问题，而不是 BeautifulSoup，但由于任务只是删除而不是操纵属性，并且是所有标签的一揽子规则，我希望找到一种在 BeautifulSoup 中完成这一切的方法。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-18T16:41:09.070

如果您只想将其全部删除，则无需解析任何 CSS。BeautifulSoup 提供了一种删除整个属性的方法，如下所示：

```
for tag in soup():
    for attribute in ["class", "id", "name", "style"]:
        del tag[attribute] 
```

此外，如果您只想删除整个标签（及其内容），则不需要`extract()`返回标签。你只需要`decompose()`：

```
[tag.decompose() for tag in soup("script")] 
```

差别不大，只是我在查看文档时发现的其他内容。[您可以在BeautifulSoup 文档](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)中找到有关 API 的更多详细信息，其中包含许多示例。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-18T16:47:10.200

我不会这样做`BeautifulSoup`——你会花费大量时间尝试、测试和解决边缘情况。

`Bleach`这正是为你做的。 [http://pypi.python.org/pypi/bleach](http://pypi.python.org/pypi/bleach)

如果您要在 中执行此操作`BeautifulSoup`，我建议您像这样`Bleach`做一样采用“白名单”方法。确定哪些标签可能具有哪些属性，并删除每个不匹配的标签/属性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-01T13:19:23.997

这是我对 Python3 和 BeautifulSoup4 的解决方案：

```
def remove_attrs(soup, whitelist=tuple()):
    for tag in soup.findAll(True):
        for attr in [attr for attr in tag.attrs if attr not in whitelist]:
            del tag[attr]
    return soup 
```

它支持应保留的属性白名单。:) 如果没有提供白名单，所有属性都会被删除。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-26T21:33:24.283

基于 jmk 的功能，我使用此功能删除基于白名单的属性：

在 python2、BeautifulSoup3 中工作

```
def clean(tag,whitelist=[]):
    tag.attrs = None
    for e in tag.findAll(True):
        for attribute in e.attrs:
            if attribute[0] not in whitelist:
                del e[attribute[0]]
        #e.attrs = None     #delte all attributes
    return tag

#example to keep only title and href
clean(soup,["title","href"]) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-20T07:49:43.287

lxml 的 Cleaner 呢？

```
from lxml.html.clean import Cleaner

content_without_styles = Cleaner(style=True).clean_html(content) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-12T10:13:01.183

不完美但简短：

```
' '.join([el.text for tag in soup for el in tag.findAllNext(whitelist)]); 
```

# wordpress - 带有 2checkout 的 wp-invoice

> ID：12959309
> 
> 赞同：0
> 
> 时间：2012-10-18T16:27:15.157
> 
> 标签：wordpress, 2checkout

有人在 2checkout 中使用过这个插件吗？我无法在互联网上找到有关为 2checkout 帐户配置此插件的步骤的任何内容。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:04:54.133

根据文档，该模块似乎不支持 2Checkout，但我们会联系开发人员，看看是否可以添加。

# warnings - 包含时的“警告 C4350：行为改变” 并且没有预编译的头文件

> ID：12959320
> 
> 赞同：3
> 
> 时间：2012-10-18T16:27:41.410
> 
> 标签：warnings, visual-studio-2012, precompiled-headers

警告 C4350 说“非常量引用只能绑定到左值”。我认为由于默认情况下 C4350 处于关闭状态，因此我没有发现太多关于它的信息。我读过这篇文章，这很有意义： [非常量引用可能只绑定到一个左值](https://stackoverflow.com/questions/6967927/non-const-reference-may-only-be-bound-to-an-lvalue)

无论如何，我问它是因为我正在尝试将 VS2008 VC++ 项目更新到 VS2012。当我这样做时，我会收到数百个 C4350 警告，这些警告是由于某些遗留原因（诚然可能需要重新评估）而打开的。我已将其缩减为可以重现警告的简单代码，但前提是我已关闭预编译标头：

```
#pragma warning(default:4350)

#include "stdafx.h"
#include <string>

int _tmain(int argc, char* argv[])
{
   return 0;
} 
```

如果我打开预编译的标头，我不会收到任何警告。我也不能让它在VS2008中发生。

这是 std:string 中的 Visual Studio 2012 错误吗？为什么预编译的标头会改变行为？我该如何解决这个问题，而不是仅仅忽略警告？谢谢！

警告是（抱歉格式不好，这是我能想到的最好的）：

c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(689): 警告 C4350: 行为改变: 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc(const std::_Wrap_alloc<_Alloc> & ) throw()' 调用而不是 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc>(_Other &) throw()'

1> 与

1> [

1> _Alloc=std::分配器

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory0(838) : 参见 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc' 的声明

1> 与

1> [

1> _Alloc=std::分配器

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory0(850) : 参见 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc' 的声明

1> 与

1> [

1> _Alloc=std::分配器

1>]

1> 非常量引用只能绑定到左值

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(688) : 在编译类模板成员函数 'std::_Wrap_alloc<_Alloc> std::_String_alloc<_Al_has_storage,_Alloc_types>:: _Getal(void) 常量'

1> 与

1> [

1> _Alloc=std::分配器，

1> _Al_has_storage=假，

1> _Alloc_types=std::_String_base_types>

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(898) : 参见函数模板实例化 'std::_Wrap_alloc<_Alloc> std::_String_alloc<_Al_has_storage,_Alloc_types>:: _Getal(void) const' 正在编译

1> 与

1> [

1> _Alloc=std::分配器，

1> _Al_has_storage=假，

1> _Alloc_types=std::_String_base_types>

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(700) : 请参阅正在编译的类模板实例化 'std::_String_alloc<_Al_has_storage,_Alloc_types>' 的参考

1> 与

1> [

1> _Al_has_storage=假，

1> _Alloc_types=std::_String_base_types>

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\stdexcept(31) : 请参阅正在编译的类模板实例化 'std::basic_string<_Elem,_Traits,_Alloc>' 的参考

1> 与

1> [

1> _Elem=字符，

1> _Traits=std::char_traits,

1> _Alloc=std::分配器

1>]

1>c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(689): 警告 C4350: 行为改变: 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc(const std::_Wrap_alloc<_Alloc > &) throw()' 调用而不是 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc>(_Other &) throw()'

1> 与

1> [

1> _Alloc=std::分配器

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory0(838) : 参见 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc' 的声明

1> 与

1> [

1> _Alloc=std::分配器

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xmemory0(850) : 参见 'std::_Wrap_alloc<_Alloc>::_Wrap_alloc' 的声明

1> 与

1> [

1> _Alloc=std::分配器

1>]

1> 非常量引用只能绑定到左值

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(688) : 在编译类模板成员函数 'std::_Wrap_alloc<_Alloc> std::_String_alloc<_Al_has_storage,_Alloc_types>:: _Getal(void) 常量'

1> 与

1> [

1> _Alloc=std::分配器，

1> _Al_has_storage=假，

1> _Alloc_types=std::_String_base_types>

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(898) : 参见函数模板实例化 'std::_Wrap_alloc<_Alloc> std::_String_alloc<_Al_has_storage,_Alloc_types>:: _Getal(void) const' 正在编译

1> 与

1> [

1> _Alloc=std::分配器，

1> _Al_has_storage=假，

1> _Alloc_types=std::_String_base_types>

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\xstring(700) : 请参阅正在编译的类模板实例化 'std::_String_alloc<_Al_has_storage,_Alloc_types>' 的参考

1> 与

1> [

1> _Al_has_storage=假，

1> _Alloc_types=std::_String_base_types>

1>]

1> c:\program files (x86)\microsoft visual studio 11.0\vc\include\string(689) : 请参阅对正在编译的类模板实例化 'std::basic_string<_Elem,_Traits,_Alloc>' 的引用

1> 与

1> [

1> _Elem=wchar_t,

1> _Traits=std::char_traits,

1> _Alloc=std::分配器

1>]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T16:31:10.790

微软在这里回答了我的问题：

[http://connect.microsoft.com/VisualStudio/feedback/details/767960/warning-c4350-behavior-change-when-including-string-and-no-precompiled-header](http://connect.microsoft.com/VisualStudio/feedback/details/767960/warning-c4350-behavior-change-when-including-string-and-no-precompiled-header)

**概括：**

*这是 std:string 中的 Visual Studio 2012 错误吗？* - 如果干净地构建在警告级别 4（不包括此警告），他们不会将其视为错误

*为什么预编译的标头会改变行为？* - 编译器会忽略预编译标头之前的所有内容，在这种情况下，这是我启用警告的 pragma 语句。在属性设置中启用预编译头会导致编译指示被忽略。谁知道？

*我该如何解决这个问题，而不是仅仅忽略警告？* - 似乎没有修复，只是忽略警告

# c# - 具有相同 routeTemplate 和版本约束的 WebApi 路由

> ID：12959323
> 
> 赞同：8
> 
> 时间：2012-10-18T16:27:44.357
> 
> 标签：c#, asp.net-web-api, asp.net-mvc-routing

我正在使用 WebAPI 构建一个 api。我的目标是为每个版本的 API 创建一个外部库，WebAPI 应用程序在注册其路由时将查询该库`WebApiConfig`

**示例：** `Api.v1`和`Api.v2`

* * *

它们将共享类似的功能，但根据`version`传入的标头，它将选择正确的 API 版本：

`/{controller}/{action}`-`HTTP-HEADER: version=1`映射到`Api.v1.Controller/Action`

`/{controller}/{action}`-`HTTP-HEADER: version=2`映射到`Api.v2.Controller/Action`

* * *

目标是避免前缀`/{ver}/{controller}/{action}`. 我知道`routeTemplates`不支持具有相同的值，但我认为我可以将路由绑定到特定的命名空间，并且约束可能有助于解决匹配的问题：

```
namespace Api.v1
{
    public static class Routing
    {
        public static void MapRoutes(HttpConfiguration config)
        {
            IHttpRoute r = config.Routes.MapHttpRoute(
                name: "",
                routeTemplate: "{controller}/{action}/{id}",
                defaults: new 
                {
                    id = RouteParameter.Optional, 
                    namespaces = new string[] { "Api.v1.Controllers" } 
                },
                constraints: new VersionConstraint(2)
            );
        }
    }
} 
```

* * *

```
public class VersionConstraint : IRouteConstraint
{
    int _version;
    public VersionConstraint(int version)
    {
        _version = version;
    }

    public bool Match(
        HttpContextBase httpContext, 
        Route route, 
        string parameterName, 
        RouteValueDictionary values, 
        RouteDirection routeDirection)
    {
        int version;
        int.TryParse(httpContext.Request.Headers["version"], out version);
        return version == _version;
    }
} 
```

尝试`namespaces`为每条路线注入 也没有真正的帮助。该`DataTokens`属性为空且只读。

* * *

**知道如何做我正在做的事情吗？有什么方法可以将相同的路由映射到同名但具有不同功能和命名空间的不同控制器？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T17:12:01.860

看看[Versioning ASP.NET Web API Services Using HTTP Headers](http://seroter.wordpress.com/2012/09/25/versioning-asp-net-web-api-services-using-http-headers/)，这似乎回答了您关于如何根据 HTTP 标头的存在进行路由的问题。

您将默认控制器选择器替换为自定义[IHttpControllerSelector](http://msdn.microsoft.com/en-us/library/hh944864%28v=vs.108%29.aspx)，该选择器根据 HTTP 标头选择正确的控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T19:37:24.837

**ASP.NET Web API：使用命名空间对 Web API 进行版本化** [http://blogs.msdn.com/b/webdev/archive/2013/03/08/using-namespaces-to-version-web-apis.aspx](http://blogs.msdn.com/b/webdev/archive/2013/03/08/using-namespaces-to-version-web-apis.aspx)

# javascript - Greasemonkey 脚本在输入错误时出错

> ID：12959324
> 
> 赞同：0
> 
> 时间：2012-10-18T16:27:53.533
> 
> 标签：javascript, greasemonkey, firefox2

我有一个 Greasemonkey 脚本，其逻辑如下：

1.  除非登录用户属于特权组（JOHN、LUKE、JEFF、MAX、ANDY），否则禁用`<input>`with `name="prio"`。

2.  如果不是特权用户，请阻止从`<input name="dest">`.
    具体来说，阻止“12”或“22”并写入错误消息。

该脚本工作正常，但有一个错误：

当我在其他输入字段中插入文本或更改选择字段并按`Enter`时，提交停止并且我在控制台中收到错误消息：

> 错误：destInput[0] 没有属性源文件：file:///E:/​​FirefoxPortable2.x/Data/profile/extensions/%7Be4a8a97b-f2ed-450b-b12d-ee​​082ba24781%7D/components/greasemonkey.js 行： 379
> 
> var err = this.findError(script, line - lineFinder.lineNumber - 1);

我认为该规则`name="dest"`适用于所有输入字段和选择字段？但我只想要“dest”输入的规则。

这是[我的脚本代码](http://pastebin.com/2aqj59c1)：

```
// ==UserScript==
// @name           _SO Block submit on custom FF2 page.
// @namespace      PC
// @include        file:///D:/temp/foo%20SO/task*
// @include        file:///D:/temp/foo%20SO/fixture*
// @include        file:///D:/temp/foo%20SO/pallet*
// ==/UserScript==

GM_log ("Script start.");

unsafeWindow._oldSubmit  = unsafeWindow.document.forms[0].submit;
unsafeWindow.document.forms[0].submit = function () {
    GM_log ("Submit function fired.");

    var destInput   = document.getElementsByName ("dest");
    if ( ! destInput  ||  destInput.length == 0) {
        //unsafeWindow._oldSubmit ();
    }

    var destValue   = destInput[0].value;
    if (    /^\s*$/.test (destValue)
            ||  excludedDestinations.indexOf (destValue) > -1
    ) {
        GM_log ("Submit should be blocked! (1)");
    }
    else {
        //unsafeWindow._oldSubmit ();
    }
};

//--- Make sure this list of names is all uppercase.
var usersWhoCanSetPriority  = ['JOHN', 'LUKE', 'JEFF', 'MAX', 'ANDY'];
var excludedDestinations    = ['12', '22'];

var bDisablePrio    = true;
var tdNodes         = document.getElementsByTagName ("TD");
for (var J = tdNodes.length - 1;  J >= 0;  --J) {
    var tdNode      = tdNodes[J];
    if (tdNode.className == "user") {
        var userName        = tdNode.textContent.replace (
            /^(?:.|\n|\r)+\(User:\s+([^)]+)\)(?:.|\n|\r)+$/i, "$1"
        ).toUpperCase ();
        if (usersWhoCanSetPriority.indexOf (userName) > -1) {
            bDisablePrio = false;
        }
    }
}

if (bDisablePrio) {
    var oldInput    = document.getElementsByName ("prio");
    if (oldInput  &&  oldInput.length) {
        oldInput[0].setAttribute ("disabled", "disabled");
    }

    var destInput   = document.getElementsByName ("dest");
    if (destInput  &&  destInput.length) {
        destInput[0].addEventListener (
            "change",
            function (zEvent) {
                bCheckdestinationValue (destInput[0]);
                GM_log ("Change handler fired.");
            },
            false
        );

        destInput[0].form.addEventListener (
            "submit",
            function (zEvent) {
                GM_log ("Submit handler fired.");
                var destValue   = destInput[0].value;
                if (    /^\s*$/.test (destValue)
                        ||  excludedDestinations.indexOf (destValue) > -1
                ) {
                    //--- Stop the submit
                    zEvent.preventDefault ();
                    //zEvent.stopPropagation ();
                    GM_log ("Submit should be blocked! (2)");
                    return false;
                }
            },
            true
        );
    }
}

function bCheckdestinationValue (destInputNd) {
    //--- Returns true if value is bad.
    if (excludedDestinations.indexOf (destInputNd.value) > -1) {
        destInputNd.value = ''; // Blank input

        //--- Add or show Error message.
        var destErrNode = document.getElementById ("gmDestErrorDisp");
        if (destErrNode) {
            destErrNode.style.display = "inline";
        }
        else {
            destErrNode             = document.createElement ('b');
            destErrNode.id          = "gmDestErrorDisp";
            destErrNode.style.color = "red";
            destErrNode.textContent = "12 and 22 are forbidden";
            destInputNd.parentNode.appendChild (destErrNode);
        }
        return true;
    }
    else {
        var destErrNode = document.getElementById ("gmDestErrorDisp");
        if (destErrNode) {
            destErrNode.style.display = "none";
        }
    }
    return false;
} 
```

[这是 jsFiddle 上的旧工作版本，以便更好地理解](http://jsfiddle.net/P2VeG/9/)。

PS：pastebin 代码（unsafeWindow..）是我旧系统上唯一的工作版本。系统运行 FF 2.0.0.11 和 Greasemonkey 0.8 并且无法更新。

有没有办法消除这个错误？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T01:48:44.460

将 forms[0].submit 代码更改为：

```
if (unsafeWindow.document.forms[0]) {
    unsafeWindow._oldSubmit  = unsafeWindow.document.forms[0].submit;
    unsafeWindow.document.forms[0].submit = function () {
        GM_log ("Submit function fired.");

        var destInput   = document.getElementsByName ("dest");
        if ( ! destInput  ||  destInput.length == 0) {
            unsafeWindow._oldSubmit ();
        }
        else {
            var destValue   = destInput[0].value;
            if (    /^\s*$/.test (destValue)
                    ||  excludedDestinations.indexOf (destValue) > -1
            ) {
                GM_log ("Submit should be blocked! (1)");
            }
            else {
                unsafeWindow._oldSubmit ();
            }
        }
    };
} 
```

在使用它们之前确保它们存在是一项正确的工作。

另外，取消注释此行：

```
//zEvent.stopPropagation (); 
```

# jquery - 如果不是所有表单步骤都完成，请重置引导模式

> ID：12959331
> 
> 赞同：2
> 
> 时间：2012-10-18T16:28:21.690
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我对 Twitter Bootstrap 模式有一点问题。它是定制的很远。

我们所做的是当用户单击完成目标时打开一个模态，然后按下提交按钮，`post()`到控制器，然后`load()`是模态体内的下一个屏幕。这是一项可选的调查。然后，用户可以填写并收到一条感谢信息，该信息会在 3 秒后消失。

**问题出在：** 1\. 如果调查时关闭模态窗口并单击另一个目标完成，调查仍会显示在模态中。2.一旦用户完成调查，同样的事情发生，尝试完成另一个，感谢模式弹出。

**问题** 我如何使用 jQuery 创建某种功能，将在关闭时重置模态......或者在成功消息到达后如何重置它。

我想只知道如何创建一个将重置它的函数，然后我可以在需要时调用它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:35:47.390

找到了解决方案！

使用内置的功能

```
 $("#myModal").on("hidden", function() { 
 //do something
 }); 
```

我能够使用简单的 css 类更改来重置模态体和按钮中的 html。

# java - 按它们包含的最高值对多图的键进行排序

> ID：12959333
> 
> 赞同：3
> 
> 时间：2012-10-18T16:28:25.763
> 
> 标签：java, sorting, guava, multimap

我使用 Guava MultiMap (impl LinkedListMultimap) 允许我为一个键存储多个值，但是我想按最大值对映射进行排序并返回键。

IE

第一次运行后我有

```
key1:{13}
key2:{7}
key3:{11} 
```

第二次运行后，我现在有了

```
key1:{13,14}
key2:{7,18}
key3:{11,1} 
```

第三次运行后，我现在有了

```
key1:{13,14,16}
key2:{7,18,6}
key3:{11,1,22} 
```

我想要一个订单

```
key3
key2
key1 
```

我想输出键（我不再需要知道值）

我想不出办法，我不必使用 MultiMap 它看起来可能会有所帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:24:28.213

如果我是你，我会从不使用 a 开始`Multimap`，而是使用 a`Map`来跟踪与每个键关联的最大值。然后，你有一个`Map<String, Integer>`，*如果*你不需要保存`Map`之后，那么我会做类似的事情

```
final Map<String, Integer> map = ...
return Ordering.natural().onResultOf(Functions.forMap(map)).reverse()
          // a comparator to compare strings in descending order of their
          // associated values
       .immutableSortedCopy(map.keySet()); 
```

解压一下：

```
Ordering.natural() // the natural ordering on integers
  .onResultOf(
     Functions.forMap(map) // use the Map<String, Integer> as a Function
     // this ordering now compares Strings by the natural ordering of
     // the integers they're mapped to
  .reverse(); // reverses the ordering, so it now sorts in descending order 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T05:26:16.767

我要做的是将 entrySet 粘贴到带有自定义比较器的 TreeSet 中。然后拔出钥匙。

```
sortedEntries = Sets.newTreeSet(comparator).addAll(multimap.entries());
return Collections2.transform(sortedEntries, keyExtractor); 
```

keyExtractor、比较器和参数化的实现留给读者作为练习。

# php - WooCommerce，如果选中自定义元复选框，则将产品退回为“已售罄”

> ID：12959338
> 
> 赞同：0
> 
> 时间：2012-10-18T16:28:37.400
> 
> 标签：php, wordpress, woocommerce

WooCommerce 有点麻烦，基本上在我正在处理的商店中，需要一个选项来显示“呼叫订单”消息，而不是显示默认的“添加到购物车”表单或“售罄”消息。

我通过在产品编辑后端添加一个自定义元框复选框来实现这一点，并在单个产品添加到购物车模板中添加一个 if 语句，唯一的问题是所有这一切都是隐藏添加到购物车表单和产品仍然可以像这样添加“http://localhost/wordpress/woocommerce/shop/?add-to-cart=14”所以它不完全证明。

我正在寻找的是在选中自定义复选框时以某种方式使产品缺货，我正在查看 WooCommerce 插件管理后端文件，这被大量使用：

```
update_post_meta( $post_id, '_stock_status', 'outofstock' ); 
```

所以我认为在functons.php中会很简单：

```
global $post;
if ($meta_box = get_post_meta($post->ID, "_cmb_test_checkbox", true) ) :
update_post_meta( $post_id, '_stock_status', 'outofstock' );
endif; 
```

事实证明不是。任何帮助将不胜感激，因为这让我发疯。

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:50:16.273

要隐藏商品缺货按钮：

```
 if (!function_exists('woocommerce_template_loop_add_to_cart')) {
        function woocommerce_template_loop_add_to_cart() {
            global $product;
            if (!$product->is_in_stock()) return;
            woocommerce_get_template('loop/add-to-cart.php');
        }
    } 
```

要更改“添加到购物车”按钮：

```
// Change the "Add to Cart" button on the single product page.
    function woo_custom_cart_button_text() {
        return __('My Button Text', 'woocommerce'); 
    }

    add_filter('single_add_to_cart_text', 'woo_custom_cart_button_text'); 
```

或者，如果您特别想修改模板结构：

在您的主题目录中创建一个名为的文件夹`/woocommerce`> 在其中创建另一个文件夹`/loop`并将`add-to-cart.php`文件放入其中。然后修改第17行

从：

```
<p class="out-of-stock" ><?php echo apply_filters( 'out_of_stock_add_to_cart_text', __( 'Read More', 'woocommerce' ) ); ?></p> 
```

至：

```
<p class="out-of-stock" ><?php echo apply_filters( 'out_of_stock_add_to_cart_text', __( 'Out of Stock', 'woocommerce' ) ); ?></p> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T23:31:51.877

我在产品类别中没有看到任何用于调整库存数量或状态的过滤器……可能因为这种方式违背了库存管理的目的。

所以我们可以做两件事中的一件。（我认为我们不需要两者，但谁知道呢。）无论如何，首先我们可以添加一些自定义验证以防止该项目被添加到购物车中。

```
/*
 * Validate when adding to cart
 * @param bool $passed
 * @param int $product_id
 * @param int $quantity
 * @return bool
 */
function so_12959338_add_to_cart_validation( $passed, $product_id, $qty ){

    if( 'yes' == get_post_meta( $product_id, '_cmb_test_checkbox', true ) ){
        $product = wc_get_product( $product_id );
        wc_add_notice( sprintf( __( '%s cannot be added to the cart because of reasons.', 'my-plugin-textdomain' ), $product->get_title() ), 'error' );
        return false;
    }

    return $passed;

}
add_filter( 'woocommerce_add_to_cart_validation', 'so_12959338_add_to_cart_validation', 10, 3 ); 
```

或者我们可以通过使产品不可购买来阻止它被添加到购物车并阻止添加到购物车按钮甚至显示。

现在在我的两个代码块中，我不确定您使用复选框保存了什么值。WooCommerce 对布尔值使用“是”和“否”，这就是我的代码所代表的。根据需要进行调整。

```
/*
 * Make the item non-purchasable
 * @param bool $purchasable
 * @param obj $product
 * @return bool
 */
function so_12959338_is_purchasable( $purchasable, $product ){

    if( 'yes' == get_post_meta( $product->id, '_cmb_test_checkbox', true ) ){
        $purchasable = false;
    }

    return $purchasable;

}
add_filter( 'woocommerce_is_purchasable', 'so_12959338_is_purchasable', 10, 2 ); 
```

# python - python 3.x：将参数绑定到给定值

> ID：12959341
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:28:43.440
> 
> 标签：python, python-3.x

在 Python 中，对于一个简单的函数`foo(x, y)`，我知道至少有 3 种方法可以将参数绑定`y`到某个值

```
# defining a nested function:
def foobar(x):
  return foo(x, y=yval)

# using lambda
foobar = lambda x: foo(x, y=yval)

# using functools
from functools import partial
foobar = partial(foo, y=yval) 
```

虽然我怀疑上面的列表是否详尽，但我也想知道我应该选择哪一个？它们在性能、安全性和命名空间处理方面都相同吗？还是每种方法都有额外的开销和注意事项？为什么要`functools`定义`partial`其他方法何时已经存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:34:35.763

不，它们并不都是等价的——特别是，a`lambda`不能腌制`functools.partial`，而 IIRC 只能在最近的 Python 版本中腌制（我在文档中找不到哪个确切版本；它在 2.6 中不起作用，但在 3.1 中确实如此）。也不能在其他函数内部定义函数（在 2.6 和 3.1 中都没有）。

' 出现在库中的原因`partial`是它为您提供了一个明确的习惯用法来部分应用内联函数。定义 ( `def`) 不能出现在表达式的中间，例如

```
map(partial(foo, y=yval), xs) 
```

此外，从定义 or`lambda`来看，目前还不清楚部分应用是怎么回事，因为您可以将任意表达式放在 a 中`lambda`，并将任意语句放在定义中。

我建议你去，`partial`除非你有理由不使用它。

[事实上，这份清单并不详尽。想到的第一个选择是可调用对象：

```
class foobar:
    def __init__(self, yval):
        self.__yval = yval
    def __call__(self, x):
        return foo(x, self.__yval) 
```

但对于这样一个简单的问题，这些都是重量级的。]

# php - 在 Fancybox 中重定向 php 表单

> ID：12959342
> 
> 赞同：1
> 
> 时间：2012-10-18T16:28:45.613
> 
> 标签：php, magento, fancybox

我正在使用 Magento，并且我有一个自定义表单功能（在我的 controller.php 中），我想在完成后将用户重定向到 Fancybox。

这是我的 php 代码：

```
$this->_redirect('shop/myprofile'); 
```

我可以在 Fancybox 而不是主页中打开此链接吗？

还是另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:36:54.290

如果你想在花式框中发布表单的数据，你可以使用 ajax 模式：

```
$("#a_id").fancybox({
        ajax : {
            type    : "POST",
            data    : 'mydata=test'
        }
    }); 
```

如果要在fancybox 中显示整页内容，可以使用 iframe 模式：

```
<a id="a_id" href="shop/myprofile">profile</a>

$("#a_id").fancybox({
     'type' : 'iframe'
}); 
```

[请参阅http://fancybox.net/blog](http://fancybox.net/blog)上的 API 文档和示例

但是你的问题不是很容易理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:30:09.363

为此，您需要使用一些 ajax。

像这样的东西

```
$("#divid").load("shop/myprofile") 
```

# visual-studio-2010 - Flash在Localhost下运行时无法访问XML文件

> ID：12959345
> 
> 赞同：0
> 
> 时间：2012-10-18T16:28:51.207
> 
> 标签：visual-studio-2010, flash, apache-flex, localhost, iis-express

我们有一个 Flex/Flash 应用程序，它从 .NET 应用程序创建的 XML 文件中加载信息。它在 IIS 下运行良好，但是当我尝试使用 ASP.NET 开发服务器从 Visual Studio 2010 或 2012 运行它时，Flex/Flash 应用程序没有加载信息。我提出了 Fiddler 并且能够看到当 Flash 尝试访问 XML 时发生错误：

[Fiddler] 到 localhost 的套接字连接失败。
错误代码：10061
。无法建立连接，因为目标机器主动拒绝它 127.0.0.1:80

我已经关闭了我的防火墙，但这并没有帮助。所以，我不确定阻塞发生在哪里。有什么想法吗？

[更新：从 Asp.NET 开发服务器切换到 IIS Express，但仍然遇到完全相同的错误。] [更新 2：我已经验证 Flash 试图访问的 XML 文件在浏览器中可以正常显示：http：/ /localhost:63318/ProductDetailsXML.aspx?ProductId=71]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T20:58:54.180

它可能与从特定端口（不是 80）提供服务有关。您的应用程序如何请求 XML 文件？根据您的 Fiddler 日志，它正在尝试端口 80，但您的站点正在端口 63318 上运行。

# c# - WPF WebBrowser 控件未正确呈现 App.net

> ID：12959347
> 
> 赞同：1
> 
> 时间：2012-10-18T16:28:59.083
> 
> 标签：c#, css, wpf, browser, rendering

我刚刚完成了一个库来访问 App.net [https://github.com/appdotnet/api-spec](https://github.com/appdotnet/api-spec)的所有方法，并且已经开始将它添加到我的客户端。

但为了授权用户，我需要打开一个指向[http://www.app.net/](http://www.app.net/)子页面的 WebBrowser 。但是 app.net 域中的每个 url 在我使用的 WebBrowser 控件中都呈现错误（我认为这主要是缺少 CSS 和一些 JavaScript），所以我无法继续。

有人知道我可以改变什么（已经玩过 FullTrust）吗？在 Internet Explorer 中打开相同的页面可以正常工作。

这是我的简单测试窗口的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;
using System.Security.Permissions;

namespace NymphAppNetTester
{
    /// <summary>
    /// Interaction logic for BrowserTest.xaml
    /// </summary>
    /// 

    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]

    public partial class BrowserTest : Window
    {

        [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
        public BrowserTest()
        {
            InitializeComponent();

            buttonGo_Click_1(null, null);
        }

        private void buttonGo_Click_1(object sender, RoutedEventArgs e)
        {
            webbrowserTest.Navigate(textboxUrl.Text);
        }
    }
} 
```

和 XAML

```
<Window x:Class="NymphAppNetTester.BrowserTest"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="BrowserTest" Height="478.723" Width="565.35">
    <Grid>
        <TextBox x:Name="textboxUrl" Height="23" Margin="10,10,58.2,0" TextWrapping="Wrap" VerticalAlignment="Top" Text="http://www.app.net/"/>
        <WebBrowser x:Name="webbrowserTest" Margin="10,38,10.2,10.4"/>
        <Button x:Name="buttonGo" Content="Go" HorizontalAlignment="Right" Margin="0,11,10.2,0" VerticalAlignment="Top" Width="43" Click="buttonGo_Click_1"/>

    </Grid>
</Window> 
```

# msbuild - 使用 MSBuild 批量重命名

> ID：12959349
> 
> 赞同：3
> 
> 时间：2012-10-18T16:29:15.980
> 
> 标签：msbuild, continuous-integration, batch-rename

我刚刚加入了一个没有 CI 流程（甚至不是一夜之间构建）和一些粗略的开发实践的团队。人们渴望改变这一点，所以我现在的任务是创建一个隔夜构建。我跟随[这一系列](http://www.asp.net/web-forms/tutorials/deployment/web-deployment-in-the-enterprise/web-deployment-in-the-enterprise)文章：创建一个包含我们所有项目的主解决方案（一些 Web 应用程序、一个 Web 服务、一些 Windows 服务，以及编译成命令行可执行文件的耦合工具）；创建了一个 MSBuild 脚本来自动构建、打包和部署我们的产品；并创建了一个 .cmd 文件以一键完成所有操作。作为所有这一切的一部分，这是我现在正在尝试完成的一项任务：

该团队目前的做法是将 web.config 和 app.config 文件保留在源代码控制之外，并将其放入名为 web.template.config 和 app.template.config 的源代码控制文件中。目的是开发人员将 .template.config 文件复制到 .config 以获得所有标准配置值，然后能够将 .config 文件中的值编辑为本地开发/测试所需的任何值. 出于显而易见的原因，我想自动化将 .template.config 文件重命名为 .config 的过程。最好的方法是什么？

是否可以在构建脚本本身中执行此操作，而不必在脚本中规定需要重命名的每个单独文件（每当将新项目添加到解决方案时都需要维护脚本）？或者我可能必须编写一些我只是从脚本运行的批处理文件？

此外，是否有更好的开发解决方案，我可以建议这将使整个过程变得不必要？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T19:13:41.643

在大量阅读有关项目组、目标和复制任务的信息后，我已经弄清楚了如何做我需要的事情。

```
<ItemGroup>
    <FilesToCopy Include="..\**\app.template.config">
        <NewFilename>app.config</NewFilename>
    </FilesToCopy>
    <FilesToCopy Include="..\**\web.template.config">
        <NewFilename>web.config</NewFilename>
    </FilesToCopy>
    <FilesToCopy Include"..\Hibernate\hibernate.cfg.template.xml">
        <NewFilename>hibernate.cfg.xml</NewFilename>
    </FilesToCopy>
</ItemGroup>

<Target Name="CopyFiles"
        Inputs="@(FilesToCopy)"
        Outputs="@(FilesToCopy->'%(RootDir)%(Directory)%(NewFilename)')">
    <Message Text="Copying *.template.config files to *.config"/>
<Copy SourceFiles="@(FilesToCopy)"
      DestinationFiles="@(FilesToCopy->'%(RootDir)%(Directory)%(NewFilename)')"/> 
```

我创建了一个项目组，其中包含我要复制的文件。** 运算符告诉它递归遍历整个目录树以查找具有指定名称的每个文件。然后，我将一段元数据添加到每个名为“NewFilename”的文件中。这就是我将每个文件重命名为的内容。

此代码段在名为 app.template.config 的目录结构中添加每个文件，并指定我将命名新文件 app.config：

```
<FilesToCopy Include="..\**\app.template.config">
    <NewFilename>app.config</NewFilename>
</FilesToCopy> 
```

然后我创建一个目标来复制所有文件。这个目标最初非常简单，只调用 Copy 任务以便始终复制和覆盖文件。我将 FilesToCopy 项目组作为复制操作的源传递。我使用[转换](http://msdn.microsoft.com/en-us/library/ms171476.aspx)来指定输出文件名，以及我的 NewFilename 元数据和众所周知的项目元数据。

下面的代码片段例如将文件 c:\Project\Subdir\app.template.config 转换为 c:\Project\Subdir\app.config 并将前者复制到后者：

```
<Target Name="CopyFiles">
    <Copy SourceFiles="@(FilesToCopy)"
          DestinationFiles="@(FilesToCopy->'%(RootDir)%(Directory)%(NewFileName)')"/>
</Target> 
```

但后来我注意到开发人员可能不喜欢每次运行脚本时都覆盖他自定义的 web.config 文件。但是，如果存储库的 web.template.config 已被修改，开发人员可能*应该覆盖他的本地文件，并且现在其中包含代码所需的新值。*我尝试了多种不同的方法——使用“Exist()”函数将 Copy 属性“SkipUnchangedFiles”设置为 true——但无济于事。

解决方案是[逐步构建](http://msdn.microsoft.com/en-us/library/ms171483.aspx)。这可确保仅当 app.template.config 较新时才会覆盖文件。我将文件名作为目标输入传递，并将新文件名指定为目标输出：

```
<Target Name="CopyFiles"
        Input="@(FilesToCopy)"
        Output="@(FilesToCopy->'%(RootDir)%(Directory)%(NewFileName)')">
      ...
</Target> 
```

这具有目标检查以查看当前输出相对于输入是否是最新的。如果不是，即特定的 .template.config 文件比其对应的 .config 文件具有更多的最新更改，那么它将复制 web.template.config 覆盖现有的 web.config。否则，它将单独保留开发人员的 web.config 文件且未修改。如果不需要复制任何指定的文件，则完全跳过目标。在干净的存储库克隆之后，将立即复制每个文件。

上面结果是一个令人满意的解决方案，因为我才开始使用 MSBuild，我对它的强大功能感到惊讶。我唯一不喜欢的是我必须在两个地方重复完全相同的变换。我讨厌复制任何类型的代码，但我不知道如何避免这种情况。如果有人有小费，将不胜感激。此外，虽然我认为需要这样做的开发实践完全糟糕，但这确实有助于减轻这种糟糕的因素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:01:49.363

**简短的回答：**
是的，您可以（并且应该）将其自动化。您应该能够使用[MSBuild Move 任务](http://msdn.microsoft.com/en-us/library/ff595163.aspx)重命名文件。

**长答案：**
希望从手动过程变为自动过程，这很好。通常很少有*真正的*理由不进行自动化。您的构建脚本将充当构建和部署实际工作方式的活文档。在我看来，一个好的构建脚本比静态文档更有价值（尽管我并不是说你不应该有文档——它们毕竟*不是相互排斥的）。*让我们分别解决您的问题。

***最好的方法是什么？***

我不完全了解您在这些文件中存储的配置，但我怀疑很多配置可以在开发团队之间共享。

我建议提出以下问题：

*   哪些设置是特定于开发人员的？
*   有没有办法标准化本地开发人员机器以便可以共享设置？

***是否可以在构建脚本本身中执行此操作，而不必在脚本中规定需要重命名的每个单独文件？***

是的，看看[MSBuild Move task](http://msdn.microsoft.com/en-us/library/ff595163.aspx)。您应该能够使用它来重命名文件。

***...每当将新项目添加到解决方案中时，都需要对脚本进行维护？***

这是不可避免的——您的构建脚本*必须*与您的解决方案一起发展。接受这一事实，并在您估计的时间中包含对构建脚本进行更改的时间。

***此外，是否有更好的开发解决方案，我可以建议这将使整个过程变得不必要？***

我不知道所有的要求，所以很难推荐一些非常具体的东西。我可以说这样建议：

*   为您的解决方案创建共享构建脚本
*   尽可能自动化手动任务（在合理范围内）
*   如果您正在努力使某些东西自动化 - 它可能表明需要重新考虑/重新设计的区域
*   确保您的团队成员了解构建的工作原理并能够自己对其进行更改 - 不要“拥有”构建并成为瓶颈

请记住，从无构建脚本到完全自动化并非一朝一夕的过程。要有耐心，首先专注于自动化导致最痛苦的区域。

如果我误解了您的任何问题，请告诉我，我会更新答案。

# javascript - 单击特定网站上的 javascript 按钮时获取直接 URL

> ID：12959355
> 
> 赞同：4
> 
> 时间：2012-10-18T16:29:50.457
> 
> 标签：javascript, html, url, firefox

我正在显示一个在线内部网站。

单击按钮“A”后，它会处理一项任务，然后转到另一个 HTML 页面。但是，这个直接地址就像是“隐藏的”（很难解释）。

例如，对于我通过简单的按钮单击访问的每个页面，它始终是相同的 URL（例如我从它们显示的*每个页面的*[http://host.com](http://host.com)）。

 *我正在使用 Firefox，我需要知道如何获取用于显示这些全新页面的确切 HTML 地址（或直接 URL）。几个月前我设法做到了，但现在不行了。

它将帮助我自动化一些任务和抨击程序。如果您找到帮助我的方法，我愿意使用任何 linux 浏览器。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:48:51.313

听起来好像使用了域掩码。您可以检查来源并查看页面上是否正在使用框架。来源应指明框架的 src，显示页面的位置。

```
<frame src="page.html"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:50:10.510

如果按钮用于`window.open`导航到 url，您可以覆盖该方法并在那里拦截 url：

```
var oldOpen = window.open;

window.open = function(){
    console.log(arguments[0]);
    oldOpen.apply(window, arguments);
}; 
```*

# javascript - 使用 jquery 和 .change() 选择 html 元素 id

> ID：12959357
> 
> 赞同：0
> 
> 时间：2012-10-18T16:29:52.313
> 
> 标签：javascript, jquery, html, dom

我有几个`<select>`盒子都使用相同的前缀，我想设置一个递归函数来基本上为我完成这项工作。

```
$('[id^="by_"]').change(function(e)
            {
                var elem = e;
                console.log(e.value);
            }); 
```

基于这段代码，我的意图很清楚吗？我在正确的轨道上吗？

控制台打印出：`undefined`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:37:15.853

我认为您走在正确的轨道上-您使用的选择器与前缀“by_”匹配，并且您将更改事件绑定到所有这些选择器。确保你把这个`$(document).ready`或类似的。您对此代码有任何问题吗？我不使用`e`参数，而是`this`在函数内部使用来引用元素并`$(this)`获取它的 jQuery 对象。因此，要获得价值，您可以使用：

```
this.value
// or
$(this).val() 
```

（忽略`e`and东西，尽管存储在类似的东西中`elem`并不是一个坏主意，这样您就可以引用它而不是每次需要时都重新创建 jQuery 对象）`$(this)``elem`

当使用 jQuery 对事件使用回调时，回调的（第一个）参数是一个`event`对象，它解释了有关发生的事件的许多事情（[http://api.jquery.com/category/events/event-object/](http://api.jquery.com/category/events/event-object/)）并且确实不持有元素 - 这就是`this`目的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:37:30.203

`e`在您的代码中是没有`value`属性的事件对象，您应该使用`this`：

```
$('[id^="by_"]').change(function(e) {
     var elem = this;
     console.log(this.value);
}); 
```

或者如果你想使用`event`对象，你可以使用`target`属性：

```
e.target.value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:37:07.000

既然你已经在使用 jQuery，为什么不这样：

```
$('[id^="by_"]').change(function(e)
{
    var $elem = $( this );
    console.log( $elem.val() );
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:41:50.140

是不是更像这样：

```
$('[id^="by_"]').change(function()
            {
                console.log($('option:selected',this).val());
            });
​ 
```

[jsfiddle](http://jsfiddle.net/Yk5wF/2/)

# django - 字符串中的空格django 模板

> ID：12959360
> 
> 赞同：2
> 
> 时间：2012-10-18T16:30:04.200
> 
> 标签：django, templates, text, input, spaces

我在 Django 模板中有这段代码：

```
input  type="text" name="ppoisNomePOI"  value={{ request.session.ppoisNomePOI }} 
```

如果我的“request.session.ppoisNomePOI”是“John”，那么在页面中它会在输入中显示“John”，但如果我的“request.session.ppoisNomePOI”是“John Flanders Simpson”，它只会出现“John”

我认为这是值中的空格问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:33:54.933

从它的声音来看，浏览器可能将后续单词视为空属性并被解释为：

```
<input type="text" name="ppoisNomePOI" value="John" Flanders Simpson> 
```

尝试在值周围加上引号。

```
value="{{ request.session.ppoisNomePOI }}" 
```

这将迫使它被解释为：

```
<input type="text" name="ppoisNomePOI" value="John Flanders Simpson"> 
```

# ruby-on-rails-3 - 将 MySQL 例程移至模型

> ID：12959365
> 
> 赞同：0
> 
> 时间：2012-10-18T16:30:24.170
> 
> 标签：ruby-on-rails-3

我有一个 PHP 驱动的网站，我正在转换为 Rails。我目前在 MySQL 例程中有以下逻辑。

```
DECLARE FirstWeighinDate DATE;
DECLARE FirstWeighinWeight DECIMAL(5,1);
DECLARE MostRecentWeighinDate DATE;
DECLARE MostRecentWeighinWeight DECIMAL(5,1);
DECLARE NumberOfWeighins INT(11);
DECLARE NumberOfDeficitRecords INT(11);
DECLARE AverageDeficit INT(11);
DECLARE UserHeight INT(11);
DECLARE MostRecentBMI DECIMAL(5,1);

SELECT date INTO FirstWeighinDate FROM tblDeficitEntries WHERE weight IS NOT NULL AND user_id = inUserId ORDER BY date ASC LIMIT 1;
SELECT weight INTO FirstWeighinWeight FROM tblDeficitEntries WHERE weight IS NOT NULL AND user_id = inUserId ORDER BY date ASC LIMIT 1;
SELECT date INTO MostRecentWeighinDate FROM tblDeficitEntries WHERE weight IS NOT NULL AND user_id = inUserId ORDER BY date DESC LIMIT 1;
SELECT weight INTO MostRecentWeighinWeight FROM tblDeficitEntries WHERE weight IS NOT NULL AND user_id = inUserId ORDER BY date DESC LIMIT 1;
SELECT Height INTO UserHeight FROM tblLogins WHERE id = inUserId LIMIT 1;
SELECT COUNT(id) INTO NumberOfWeighins FROM tblDeficitEntries WHERE weight IS NOT NULL AND user_id = inUserId;
SELECT COUNT(id) INTO NumberOfDeficitRecords FROM tblDeficitEntries WHERE user_id = inUserId;
SELECT (SUM(deficit) / NumberOfDeficitRecords) INTO AverageDeficit FROM tblDeficitEntries WHERE user_id = inUserId;
SELECT ((MostRecentWeighinWeight * 703) / (UserHeight * UserHeight)) INTO MostRecentBMI;

SELECT FirstWeighinDate, FirstWeighinWeight, MostRecentWeighinDate, MostRecentWeighinWeight, NumberOfWeighins, NumberOfDeficitRecords, AverageDeficit, MostRecentBMI; 
```

我相信在 MVC 情况下，该逻辑属于模型。我不确定如何实现这一目标。我在想应该用一个散列的虚拟访问器来完成。那是对的吗？如果我应该在模型之外的某个地方拥有这个，它应该去哪里？我不希望在答案中转换整个代码，但我非常感谢要转换的几行代码，以便我能理解。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:05:48.333

因此，您有两个模型：有一个 User，并且该 User 具有许多关联的 Entry 对象。

```
class User < ActiveRecord::Base
  has_many :entries
end

class Entry < ActiveRecord::Base
  belongs_to :user
  #attributes include weight, date
end 
```

那么，这些值呢？

我认为您想要做的最基本的方法是使用关联的模型将所有这些转换为您的用户模型上的方法。

例如，

```
SELECT date INTO FirstWeighinDate FROM tblDeficitEntries WHERE weight IS NOT NULL AND user_id = inUserId ORDER BY date ASC LIMIT 1; 
```

可以在 User 类中替换为以下内容：

```
def first_weighin_date
  entries.order('date asc').first.date
end 
```

然后，在任何有 User 对象的地方，您都可以简单地调用该方法：

```
u = User.find_by_name('Bob')
u.first_weighin_date 
```

现在，如果您要同时向许多用户显示此信息，您将需要利用预加载。例如，这将是非常低效的：

```
User.all.map(&:first_weigh_in_date) 
```

它将单独调用数据库以加载每个用户对象的关联条目。100 个用户？101 个数据库命中。所以告诉 Rails 继续加载所有对象，因为您将需要它们：

```
User.includes(:entries).map(&:first_weigh_in_date) 
```

现在对数据库只有两次调用，一次加载用户，一次加载definition_entries。

# c# - 如何使用 SelectedIndexChanged 事件在列表框中移动项目并仅选择项目的一部分？

> ID：12959369
> 
> 赞同：-2
> 
> 时间：2012-10-18T16:30:42.890
> 
> 标签：c#

这是我如何在项目中移动并在标签中显示它们的代码：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            label4.Text = listBox1.SelectedItem.ToString();
        } 
```

但是，如果我有 3 个项目，例如：

```
Url: http://www.cnet.com --- Localy KeyWord: cnet
Url: http://www.google.com --- Localy KeyWord: google
Url: http://www.microsoft.com --- Localy KeyWord: microsoft 
```

然后我想在label4中只显示每个项目的url，如果我在label4的第一个项目上我只会看到[http://www.cnet.com](http://www.cnet.com)如果我在第二个项目上，所以label4只会显示[http:// www.google.com](http://www.google.com)等等...在 label4 中仅显示网站地址部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:20:01.890

我想解决了很长的路，但它的工作原理：

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {

            if (listBox1.SelectedItem != null)
            {
                label4.Text = listBox1.SelectedItem.ToString();

                string startTag = "Url: ";
                string endTag = " ---";
                int startTagWidth = startTag.Length;
                int endTagWidth = endTag.Length;
                int index = 0;
                index = label4.Text.IndexOf(startTag, index);
                int start = index + startTagWidth;
                index = label4.Text.IndexOf(endTag, start + 1);
                string g = label4.Text.Substring(start, index - start);
                label4.Text = g;
            }
        } 
```

谢谢。

# android - Android 模拟器 - GPS 位置

> ID：12959370
> 
> 赞同：1
> 
> 时间：2012-10-18T16:30:46.947
> 
> 标签：android, google-maps-api-3, android-emulator

对于一个学校项目，我们正在构建一个使用 Google Maps Api 的应用程序。我们正在让这个项目运行，但位置和地图不会显示（见图）。

图片上传到 mediafire，您可以通过以下链接查看： [http ://www.mediafire.com/view/?tioqsheq0pqr6jc](http://www.mediafire.com/view/?tioqsheq0pqr6jc)

（PS：我们也试过osmDroid，但同样的事情发生了。）

使用 iOS 编程，您可以模拟某个位置。你怎么能用安卓做到这一点？我发现的唯一信息是使用模拟器创建一个 telnet 会话以提供经度和纬度。但这也行不通。

提前致谢。马汀

**编辑** 我已经阅读了这篇文章： [StackOverflow 其他链接](https://stackoverflow.com/questions/2279647/how-to-emulatie-gps-location-in-the-android-emulator)

但它提供了与 telnet 相同的解决方案，但我想知道是否有另一种方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:08:34.997

为了能够使用/查看 Maps API，您需要获取 API 密钥：[https ://developers.google.com/android/maps-api-signup](https://developers.google.com/android/maps-api-signup)

您还需要在清单中添加以下内容：

```
<uses-library android:name="com.google.android.maps"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

对于关于模拟位置的问题的第二部分，您可以使用 DDMS。

# math - 如何缩放数字/值

> ID：12959371
> 
> 赞同：6
> 
> 时间：2012-10-18T16:30:46.900
> 
> 标签：math

我正在使用一种硬件，我正在使用一种专有的编程语言与 VIA 串行控制进行通信，这种语言看起来像一个非常愚蠢的 C 版本。

设备在查询时报告其当前音量。范围是 -60 到 + 20。如何将其缩放到 0-255 范围，以 3 为增量上升？

您能否提供另一个值和其他比例的示例，即 -15 到 15 缩放到 0-165 等

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T16:36:14.730

要将范围 x0..x1 缩放到新范围 y0..y1：

```
 y = y0 + (y1 - y0) * (x - x0) / (x1 - x0) 
```

因此，对于上面的第一个示例，x0 = -60, x1 = 20, y0 = 0, y1 = 255：

```
 y = 0 + (255 - 0) * (x - -60) / (20 - -60)

=>  y = 255 * (x + 60) / 80 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T16:40:27.523

这实际上是简单的数学

首先，让我们消除对负数的需求：

对于范围 -60 <-> + 20：x + 60

现在我们有一个 0 <-> 80 范围，只需将其缩放到 255 : ( x / 80 ) * 255

把这一切都放在一个公式中，这就是你应该得到的： y = ( (x + 60 ) / 80 ) * 255

所以基本上：

y = ( (x +negativeValue) / MaxValue) * MaxScale

我希望你现在明白了！

# linq - 使用 Lambda 查询从实体框架获取项目时出错

> ID：12959373
> 
> 赞同：0
> 
> 时间：2012-10-18T16:30:51.313
> 
> 标签：linq, entity-framework, lambda, listbox

我有一个列表框，我试图通过实体框架 linq/lambda 查询填充 SQL Server 查询的结果。我正在使用组合框中的值来提供查询。我不断收到如下错误：无法创建类型为“System.Object”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

对于如何解决这个问题，有任何的建议吗？我只想在网格中填充两个字段

```
 var pAt = ent.Patterns.Where(p => p.Case_Id == (cbCase.SelectedItem as Case).Case_Id).Select(x => new  Pattern{  PatternID = x.PatternID, Pattern1 = x.Pattern1 });

        listBox1.DataSource = pAt;
        listBox1.ValueMember = "PatternID";
        listBox1.DisplayMember = "Pattern1"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:35:34.950

试试这个：

```
var pAt = ent.Patterns.AsEnumerable()
             .Where(p => p.Case_Id == ((Case)cbCase.SelectedItem).Case_Id)
             .Select(x => new  Pattern{  PatternID = x.PatternID, Pattern1 = x.Pattern1 }); 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:36:07.827

将代码部分与 SQL 部分分开。实体框架不一定可以使用代码对象构造 SQL 查询，但您通常可以解决它。例如：

```
var caseId = (cbCase.SelectedItem as Case).Case_Id;
var pAt = ent.Patterns.Where(p => p.Case_Id == caseId)
    .ToArray()
    .Select(x => new  Pattern { PatternID = x.PatternID, Pattern1 = x.Pattern1 }); 
```

# jquery - jQuery索引函数

> ID：12959374
> 
> 赞同：2
> 
> 时间：2012-10-18T16:30:53.827
> 
> 标签：jquery, indexing

我想我需要使用 jQuery 的`index()`功能，但我做错了！我有一堆带有图像的表格单元格，其中一个将有一个名为“current”的类。我怎么知道哪个图像有这个类？我需要一个整数来处理。

我在想这样的事情，但我得到“-1”，什么也没找到..

`var prev = $('#full_width_gallery').index('img');`

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:33:28.900

1.  选择图像：`var $images = $('#full_width_gallery img');`

2.  使用“.current”类检索图像的索引：`$images.filter('.current').index();`- 这将是该图像在 $images 中的索引，而不是某种“全局”索引！

总共：

```
var index = $('#full_width_gallery img').filter('.current').index(); 
```

或者：

```
var index = $('.current').index('#full_width_gallery img'); 
```

# ios - 在 iOS 中为动画视图设置硬边界

> ID：12959376
> 
> 赞同：0
> 
> 时间：2012-10-18T16:31:08.380
> 
> 标签：ios, uiview, uipangesturerecognizer, uianimation

我一直在探索 iOS 动画，并试图找出是否有一种简单的方法可以将动画移动限制在某个区域内。例如，假设您正在使用平移手势识别器在屏幕上拖动 UIView。有没有一种简单的方法来强制 UIView 的框架不会超出指定位置？

我目前接近它的方法是获取 UIView，计算边缘的位置，然后在我的 handlePan 方法中，如果框架接触边界，只需返回（即不调整中心点）。有没有更优雅的方法来做到这一点？即使只沿着一个轴？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:12:33.757

我实际上是在一个项目中这样做的，而且基本上很好，我正在使用“非优雅”的方式。我有一组坐标“边界”，我拖动的视图不应该从中通过。尽管有比其他方法更好的方法来做到这一点。例如，为了获得更流畅的体验：

*   独立比较 X 轴和 Y 轴。我一开始做的是在同一个 if 语句中比较 X 和 Y。

额外：检查[这个](https://github.com/spoletto/SPUserResizableView)项目以获得一些想法。

# php - 如果输入“0”，如何验证 $value 以使其通过？

> ID：12959381
> 
> 赞同：3
> 
> 时间：2012-10-18T16:31:20.113
> 
> 标签：php, arrays

```
foreach($_POST as $key => $value) {
    if($value)
        $sorted[$parent_key][$newkey] = $value;
    else
        unset($_POST[$key]); 
```

`$value`可以是“0”或“任何字符串文本”。如果输入“0”，如何验证 $value 以使其通过？

我不能使用`isset($value)`，因为`$value`是从`foreach`.
我不能使用`empty($value)`，因为它将 0 视为空值。
我不能使用`strlen($value)`，因为它将 0 视为空值。
我不能使用`(!$value)`，因为它将 0 视为空值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:34:02.220

您可以使用 strlen($value) 因为它不会将 0 视为空值。 [这是证据](http://codepad.org/nA2RfbdN)

```
$a = 0;
echo strlen($a); 
```

输出：

```
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:34:11.533

只需这样做：

```
if($value || $value === "0") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:35:27.883

```
foreach($_POST as $key => $value) {
    if(!empty($value) || (string)$value === '0')
        $sorted[$parent_key][$newkey] = $value;
    else
        unset($_POST[$key]); 
```

# c# - 连接到大的excel文件很慢

> ID：12959382
> 
> 赞同：0
> 
> 时间：2012-10-18T16:31:26.243
> 
> 标签：c#, .net, excel, connection

我有一个非常大的 excel 文件，它有大约一百万行，大小约为 400MB。我需要为此文件建立一些 System.Data.IDbConnection。目前，我尝试了两种方法：1）

```
System.Data.OleDb.OleDbConnection("provider=Microsoft.ACE.OLEDB.12.0;Data Source='D:\\file.xls';Extended Properties='Excel 12.0;HDR=YES;IMEX=1';"); 
```

2)

```
System.Data.Odbc.OdbcConnection("Driver={Microsoft Excel Driver (*.xls, *.xlsx, *.xlsm, *.xlsb)};DBQ=<FILE>;ReadOnly=True;Extended Properties=\"Excel 12.0;HDR=Yes;IMEX=1\"") 
```

两种连接都适用于小文件 (25MB)。但即使是 25MB 的文件，打开连接也需要大约 4 秒。

当我使用 350MB 文件时，这个简单的命令：

```
connection.Open(); 
```

需要超过 3 分钟，我不能使用这么慢的连接。

是否有任何免费的解决方案来获得快速 IDbConnection 以读取大型 excel 文件？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:52:06.770

尝试不同的方法，也许如果您使用链接数据库的访问数据库，其中链接了 de excel 表，您可以获得时间。access 和 excel 之间的连接很奇怪，但在许多情况下比导入 Excel 文件要快。

# c# - asp.net-mvc3 Facebook 访问令牌

> ID：12959387
> 
> 赞同：1
> 
> 时间：2012-10-18T16:31:50.503
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, facebook-oauth

如何获取 facebook 访问令牌以获取见解。

以下仅用于获取客户端数据，但我想要用户信息/粉丝页面洞察力。我想知道我是否可以通过 Asp.Net MVC 中的一些示例以编程方式获取洞察数据（无需登录 facebook 并允许访问）。登录 facebook 并授予访问权限也应该以编程方式完成，我不希望最终用户参与其中。

```
var fb = new FacebookClient();
dynamic result = fb.Get("oauth/access_token", new { 
client_id     = "app_id", 
client_secret = "app_secret", 
grant_type    = "client_credentials" 
});
fb.AccessToken = result.access_token; 
```

我尝试使用上述方法，但无法获得洞察数据。谁能帮帮我吗。如果您不明白，我很乐意详细解释。

```
var fb = new FacebookClient();
dynamic result = fb.Get("oauth/access_token", new { 
client_id     = "app_id", 
client_secret = "app_secret", 
grant_type    = "client_credentials",
redirect_uri = "redirect_uri",
scope= "read_insights"
});
fb.AccessToken = result.access_token; 
```

谢谢你。

# windows - Powershell递增名称并执行cmdline

> ID：12959388
> 
> 赞同：1
> 
> 时间：2012-10-18T16:31:53.797
> 
> 标签：windows, powershell, exchange-server, increment

我正在尝试编写一个 powershell 脚本，该脚本将创建从本地客户端到交换服务器的 Outlook 日志（使用 NETMON）。问题是文件名没有正确递增。我在网上找到了这个递增脚本，我理解逻辑（有点）。我是否使用正确的方法来初始化计数器？它没有正确重命名文件。它给第二个文件一个 _ 然后第三个文件得到一个 _2 然后它停止重命名文件。

也是在等待我的 cmd 退出的调用表达式还是会进入 $count-- 的下一步？

```
#Directory to complete script in
$path = "c:\Outlook_Logs\" 
cd $path
$cmdline = "Nmcap.exe /network * /captureipv4.address==X.X.X.X /file :\outlook_logs\client_$count.chn:100MB"

#Writes out number of files in directory to console
$count = (get-childitem $path -name).count
Write-Host "Number of Files: $count"

#Sorts items by decsending order
$items = Get-ChildItem | Sort Extension -desc 

#Deletes oldest file by file extension number
del $items[0]

#Copy file from original directory to backup directory
Copy-Item c:\Outlook_Logs\* c:\Outlook_Logs_Temp\

#Sorts items by decsending order
$items = Get-ChildItem | Sort Extension -desc

#Renames files in quotes after NewName argument
$items | ForEach-Object  -begin { $count= (get-childitem $path -name).count }  -process { rename-    item $_ -NewName "client_$count.cap";Invoke-Expression "$cmdline"; $count-- } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:48:14.090

无需自己增加名称。chn 捕获文件在达到冒号后指定的大小时自动增量创建和命名。

当您将大小降低到 1MB 并执行命令时会发生什么？

# mysql - 事件日期上升不正确

> ID：12959391
> 
> 赞同：0
> 
> 时间：2012-10-18T16:31:59.677
> 
> 标签：mysql, date

如何正确地做到这一点

```
Select DATE_FORMAT(EventDate, '%b %d, %Y') 
from details 
Order by STR_TO_DATE(EventDate, '%d-%m-%y') 
```

样本记录，

```
Oct 24, 2012
Oct 27, 2012
Oct 28, 2012
Oct 20, 2012
Dec 22, 2012
Jan 11, 2013
Jan 19, 2013
Nov 24, 2012
Dec 29, 2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:35:52.860

那这个呢：

```
Select DATE_FORMAT(EventDate, '%b %d, %Y') from details Order by EventDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:59:31.703

```
Order by STR_TO_DATE(EventDate, '%d-%m-%y') 
```

因此，我们从`EventDate`您所说的 a开始，`DATE`并将其作为第一个参数提供给`STR_TO_DATE()`。此类函数需要一个字符串，因此 MySQL 可能使用默认格式 (YYYY-MM-DD) 将您的日期转换为字符串。然后它尝试使用 DD-MM-YYYY 作为格式将字符串转换为日期，但您的字符串不是该格式。你明白我想去哪里吗？

总而言之：您不需要将日期投射到日期——它已经是一个日期了！

```
Order by EventDate 
```

# android - Android - 从上一个活动获取输入（意图）到新活动，但同时显示布局？

> ID：12959392
> 
> 赞同：0
> 
> 时间：2012-10-18T16:32:04.233
> 
> 标签：android, layout, button, android-activity

在我的应用程序的主要活动中，它让用户输入他们的姓名并单击班次编号并单击提交。当他们点击提交时，它会将他们带到一个新页面（活动），该页面再次显示他们的姓名和班次编号。但在下面，我希望它显示计时器（xml 中提供的计时器），但我不知道如何让它在一个活动上同时显示布局的内容和输入（意图）。

帮助？有没有办法让两者合作？

这是我的第二个活动的 .java 文件：

```
package com.cyapps.downtimer;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class WinderDTActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Bundle extras = getIntent().getExtras();
        if (extras != null){
            TextView textView = new TextView(this);
            String opName = extras.getString(MainActivity.OP_NAME);
            String rChoice = extras.getString(MainActivity.RADIO_CHOSEN);
            textView.setTextSize(15);
            textView.setText( "\n\tOperator Name: " + opName + "\n\t" + rChoice );
            setContentView(textView);
        }
    }
} 
```

这是第二个活动的 XML：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <TimePicker
        android:id="@+id/timePicker1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/submit" />

</LinearLayout> 
```

我想要的是让第二页/活动显示 XML 布局，并显示我从前一页获得的输入。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:04:12.033

我认为您应该在第二个活动中重新创建姓名和班次号码。为了实现这一点，您需要：

在主要活动中，放置意图参数：

```
intent.putExtra("name", mName);
intent.putExtra("shiftNum", mShiftNum); 
```

在第二个活动中，您需要一个包含姓名和班次编号空间的布局（除了您已经拥有的计时器）。这可能是一个 TextView。然后，您使用意图参数填充此 TextView：

```
TextView tv = findViewById(...);
tv.setText(getIntent().getStringExtra("name") + ": " + getIntent().getStringExtra("shiftNum")); 
```

# c++ - MinGW 4.6.2 std::atomic 指针

> ID：12959393
> 
> 赞同：2
> 
> 时间：2012-10-18T16:32:07.447
> 
> 标签：c++, concurrency, c++11, mingw

我在 Windows XP 上使用 MinGW 4.6.2，我在 std::atomic 上遇到了一些奇怪的行为。情况如下：

*   线程 A 创建一个**std::atomic**变量（以**T***作为模板参数）。
*   线程 B 修改它。
*   线程 A 等待修改然后读取变量。

最终结果是线程 A 读取的值**不是**线程 B 设置的值。

如果我删除 std::atomic （即将变量保存为指针），它会按预期工作。更有趣的是，如果我将模板参数设置为*unsigned long*并将指针转换为*T**，它会按预期工作。

我使用赋值运算符来设置值和加载成员来获取值。

我是否错过了以 T* 作为参数的 std::atomic 应该如何工作，或者这是一种破坏行为？

编辑

一些代码

```
 #include <boost/thread.hpp>
    #include <atomic>

    using namespace std;

    void* vptr;
    std::atomic<unsigned int> aui;
    std::atomic<void*> aptr;

    void foo()
    {
        vptr = (void*) 0x123;
        aui = (unsigned int) 0x123;
        aptr = (void*) 0x123;
    }

    int main(int argc, char* argv[])
    {
        boost::thread threadA;

        vptr = nullptr;
        aui = 0;
        aptr = nullptr;

        threadA = boost::thread(foo);
        threadA.join();

        cout << vptr << " " << (void*)aui.load() << " " << aptr.load();

        return 0;
    } 
```

输出为：0x123 0x123 0x41d028

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:31:43.420

我用 MinGW 4.6.1 重现了您的问题（并发现它已在 4.7.0 中修复）。如果您无法移动到已解决问题的较新 MinGW，您应该能够像这样修补`lib/gcc/mingw32/4.6.2/include/c++/bits/atomic_0.h`标头的`_ATOMIC_STORE_`宏定义（假设 4.6.2 中的标头与 4.6.1 足够相似）：

```
#if 0 /* disable the original broken macro */
#define _ATOMIC_STORE_(__a, __n, __x)                      \
  ({typedef __typeof__(_ATOMIC_MEMBER_) __i_type;                          \
    __i_type* __p = &_ATOMIC_MEMBER_;                      \
    __typeof__(__n) __w = (__n);                           \
    __atomic_flag_base* __g = __atomic_flag_for_address(__p);          \
    __atomic_flag_wait_explicit(__g, __x);                 \
    *__p = __w;                                \
    atomic_flag_clear_explicit(__g, __x);                      \
    __w; })
#else
#define _ATOMIC_STORE_(__a, __n, __x)                      \
  ({typedef __typeof__(_ATOMIC_MEMBER_) __i_type;                          \
    __i_type* __pxx = &_ATOMIC_MEMBER_;                    \
    __typeof__(__n) __w = (__n);                           \
    __atomic_flag_base* __g = __atomic_flag_for_address(__pxx);        \
    __atomic_flag_wait_explicit(__g, __x);                 \
    *__pxx = __w;                                  \
    atomic_flag_clear_explicit(__g, __x);                      \
    __w; })
#endif 
```

问题似乎出在名为 的宏中的局部变量上，当使用也为宏参数`__p`命名的变量调用宏时，这显然会引起混淆。当扩展为时，扩展宏访问的是局部变量，而不是访问调用者“传入”的变量。`__p``__n``__n``__p`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:47:09.810

这可能是[http://gcc.gnu.org/bugzilla/show_bug.cgi?id=51811](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=51811) - 在 GCC 4.7 中已修复

你能显示导致问题的代码吗？

# ndepend - 依赖；获取方法的参数

> ID：12959396
> 
> 赞同：4
> 
> 时间：2012-10-18T16:32:17.640
> 
> 标签：ndepend

如何使用 CQLINQ 获取当前方法的输入参数集合？有任何集合，如“参数”或“参数”，只有“NbParamenter”，不适合我的目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:29:44.830

事实上，CQLinq 还没有这个功能。[但是，在许多情况下，由于 IMethod 的属性ICodeElement.Name](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.ICodeElement~Name.html)和[IMember.FullName](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.IMember~FullName.html)包含以[逗号](http://www.ndepend.com/API/webframe.html?NDepend.API~NDepend.CodeModel.IMethod_members.html)分隔的参数类型名称列表，因此您可以弥补这一点。例如这里是`FullName`一个方法：

```
System.Windows.Forms.Control.BeginInvoke(Delegate,Object[]) 
```

这是它的`Name`：

```
BeginInvoke(Delegate,Object[]) 
```

例如，这是一个利用参数类型名称的 CQLinq 规则，以匹配事件处理程序方法：

```
// <Name>Event handler methods should be declared private</Name>
warnif count > 0
from m in Application.Methods where 
  !m.IsPrivate &&

   // A method is considered as event handler if...
   m.NbParameters == 2 &&            // ...it has two parameters..
   m.Name.Contains("Object") &&    // ...of types Object...
   m.Name.Contains("EventArgs") && // ...and EventArgs

   // Discard special cases
  !m.ParentType.IsDelegate &&
  !m.IsGeneratedByCompiler

select new { m,m.Visibility }
// This rule implementation relies on the facts that:
// -> A method name contains the type of its parameters.
// -> All EventArgs derived types have the suffix "EventArgs". 
```

# javascript - Javascript函数成循环，Django app

> ID：12959403
> 
> 赞同：0
> 
> 时间：2012-10-18T16:33:00.337
> 
> 标签：javascript, django, facebook, loops

在我的 Django 应用程序中，我显示了一个 Facebook 好友列表。我想为每个朋友关联一个 Facebook 邀请按钮。为此，我不想使用允许我邀请朋友的 javascript 函数，然后将此函数传递给循环。

这是我的html代码：

```
<div id="fb-root"></div>
{% for friend in group %}  
<p>{{ friend.name }} <a href='#' onclick="FacebookInviteOneFriend('{{friend.uid}}');"> Invite</a></p>       
{% endfor %}
</div> 
```

还有我的javascript代码：

```
FB.init({
appId:XXXX,
cookie:true,
status:true,
xfbml:true
});

function FacebookInviteOneFriend(UserId)
{
FB.ui({
method: 'apprequests',
message: 'My message'
to: UserId
});
} 
```

它不是那样工作的。我不知道javascript，所以我找不到我的错误在哪里。

欢迎任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:51:21.977

尝试在周围放置单引号`{{friend.uid}}`

```
onclick="FacebookInviteOneFriend('{{friend.uid}}');" 
```

还可以尝试向您的函数添加调试语句，以查看正在传递的值（如果有）：

```
function FacebookInviteOneFriend(UserId) {
    alert(UserId);

    FB.ui({
        method: 'apprequests',
        message: 'My message'
        to: UserId
    });
} 
```

# php - PHP日期时间以分钟为单位？

> ID：12959404
> 
> 赞同：-2
> 
> 时间：2012-10-18T16:33:03.510
> 
> 标签：php, date, strtotime

我有两个日期时间，date1 = '2012/10/18 14:12:12' date2 = '2012/10/18 14:20:12'

date2-date1 为 8 分钟。我想在几分钟内得到不同的结果。

但是如果 date2 > date1

date1 = '2012/10/18 14:02:12' date2 = '2012/10/18 14:10:12'

然后我想得到-8的结果。我怎样才能在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-18T16:43:36.040

查看[Datetime](http://www.php.net/manual/en/datetime.createfromformat.php)类。

您将需要`Datetime::createFromFormat()`（将您的字符串转换为 Datetime 对象）和`Datetime::diff()`（这将为您提供任何两个 Datetime 之间的差异，分为年、月、日等）。

# php - 将右侧单选按钮设置为选中

> ID：12959405
> 
> 赞同：0
> 
> 时间：2012-10-18T16:33:04.767
> 
> 标签：php, variables, radio-button, set

下面是一个带有参数的函数（在本例中）可以包含“猫”、“狗”或“鸟”。该函数包含一个表单，我希望能够将右侧的单选按钮设置为选中状态，具体取决于变量 $animal 包含的选项。

如何以优雅的方式实现这一目标？

```
public function SetAsChecked($animal) {
    // $animal = 'cat', 'dog' and 'bird'

    $html = "
            <form method='post'>
                <p>Option</p>
                <input type='radio' name='animals' value='1'> Cat<br />
                <input type='radio' name='animals' value='2'> Dog<br />
                <input type='radio' name='animals' value='3'> Bird<br />
            </form>";

    return $html;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:41:53.820

创建一个选项数组而不是重复 HTML：

```
public function SetAsChecked($animal){

    $options = array(
        '1' => 'Cat',
        '2' => 'Dog',
        '3' => 'Bird'
    );

    $optionsStr = '';

    foreach($options as $value => $name)
    {
        //$checked = $animal == $name ? 'checked' : ''; // use this if you want case sensitive comparison
        $checked = strcasecmp($animal, $name) == 0 ? 'checked' : ''; // case insensitive comparison
        $optionsStr .= "<input type='radio' name='options' value='$value' $checked />$name<br />";
    }

    $html = "
            <form method='post'>
                <p>Option</p>
                $optionsStr
            </form>";

    return $html;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:37:27.070

您需要使用“已检查”属性。这应该有效。$optValue 是变量，'option' 属性被保存到。

```
for($i = 1; $i < 3; ++$i) $opchecked[$i] = "";    //Makes sure, that the variables are set.
$opchecked[$optValue] = 'checked';                //Sets the 'correct' option.

$html = "<form method='post'>
            <p>Option</p>
            <input type='radio' $opchecked[1] name='options' value='1'> Option1<br />
            <input type='radio' $opchecked[2] name='options' value='2'> Option2<br />
        </form>"; 
```

然而，我能想到的最优雅的方法是函数调用。

```
function getRadio($Value, $Text) {
    $checked = (isset($_POST['animal']) && $Value == $_POST['animal']) ? "checked=checked" : "";
    return "<input type='radio' $checked name='animal' value='$Value'>$Text</input><br />";
}

$html = "<form method='post'>
            <p>Option</p>".
            getRadio(1, "Dog").
            getRadio(2, "Cat").
            getRadio(3, "Bird").
         </form>"; 
```

这个函数调用在第一次调用时不会选择任何东西（因为'$_POST['animal']' 还没有设置），但之后它会一直保持之前的动物'选中'。如果要提供“默认选择”，请添加另一个参数，如下所示：

```
function getRadio($Value, $Text, $default) {
    if(!isset($_POST['animal']) && $default || isset($_POST['animal']) && $Value == $_POST['animal']) $checked = "checked=checked";
    else $checked = "";

    return "<input type='radio' $checked name='animal' value='$Value'>$Text</input><br />";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:39:32.033

我发现做复选标记和下拉的最好方法是在使用 javascript/jQuery 之后，而不是循环遍历数组或做其他事情。工作非常简单，只需几行代码。

```
$("input[name=options][value=<?php echo $option; ?>]").attr("checked","checked"); 
```

# c# - 这种构造可以使用三元表达式吗？

> ID：12959410
> 
> 赞同：5
> 
> 时间：2012-10-18T16:33:16.967
> 
> 标签：c#

我不确定以下语句是否可以写成一行（即[三元](https://en.wikipedia.org/wiki/%3F:)形式）。

```
if (A == B)
    FunctionA();
else
    FunctionB(); 
```

FunctionA 和 FunctionB 都是*void*类型。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T16:34:53.157

不可以。条件运算符仅对*非空*表达式有效。关键是评估两个表达式之一，并将其​​作为结果。

基本上：写`if`声明。这是执行一个或另一个*动作的惯用方式。*

你*可以*写一个这样的扩展方法：

```
// For demonstration purposes only. Please don't use in real life.
public static void Conditional(this bool result,
                               Action trueAction,
                               Action falseAction)
{
    Action action = result ? trueAction : falseAction;
    action();
} 
```

然后：

```
(A == B).Conditional(FunctionA, FunctionB); 
```

...但我*强烈*建议您不要这样做。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-18T16:40:24.620

> 如果以下语句可以写成一行

当然：

```
if (A == B) FunctionA(); else FunctionB(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2022-02-07T11:34:40.640

不，使用`if`声明。

但是，通过将这两个`void`函数强制转换为`Action`，这种 hack 是可能的：

```
(A == B ? (Action)FunctionA : FunctionB).Invoke(); 
```

这在表达式主体`=>`方法中使用时特别方便，因为`if`不能在那里使用。

当然：不要在严肃的项目中这样做！

# wpf - 如何使 WPF RibbonWindow 的标题居中？

> ID：12959412
> 
> 赞同：2
> 
> 时间：2012-10-18T16:33:22.470
> 
> 标签：wpf, ribbon

我想将我的 RibbonWindow 的标题居中，而不是让它在一边对齐。

这个线程说它有一个答案： [Center WPF RibbonWindow Title via XAML Code](https://stackoverflow.com/questions/7345422/center-wpf-ribbonwindow-title-via-xaml-code/12959073#12959073)

但它没有用。

波纹管是一个图像和相应的代码。

![标题不居中](../Images/7f2d9b6da49b8d94038721cb5beae32e.png)

```
 <RibbonWindow x:Class="Window1"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window1" Height="300" Width="300">
    <Grid>
        <Ribbon>
            <Ribbon.TitleTemplate>
            <DataTemplate>
                <TextBlock TextAlignment="Center" HorizontalAlignment="Stretch" Width="{Binding ElementName=Window, Path=ActualWidth}">ApplicationTitle
                    <TextBlock.Effect>
                        <DropShadowEffect ShadowDepth="0" Color="MintCream " BlurRadius="10"   />
                    </TextBlock.Effect>
                </TextBlock>
            </DataTemplate>
            </Ribbon.TitleTemplate>
        </Ribbon>
    </Grid>
    </RibbonWindow> 
```

我正在使用 VS 2012、.NET 4.5 和包含的 System.Windows.Controls.Ribbon 程序集。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-20T15:41:29.600

将 RibbonControlsLibrary 用于 WPF 的体验很糟糕。它不仅存在围绕标题居中的问题。它还会破坏顶部的窗口圆角，最大化时图标和标题会超出屏幕，而且我个人还没有找到任何机会来编程功能区组对话框。所有这些都使我寻找替代方案，并且我找到了[Fluent Ribbon Controls Suite](http://fluent.codeplex.com/)

下载源代码并为 .NET 4.5 构建它（我完全没有问题）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:40:54.267

`ElementName`绑定中的 ( )`Width="{Binding ElementName=Window, Path=ActualWidth}"`需要与 RibbonWindow 的名称相匹配。因此，在这种情况下，您需要“Window”作为名称：

```
<RibbonWindow x:Class="Window1" x:Name="Window"
    ... /> 
```

# c - C中循环条件下的逗号运算符

> ID：12959415
> 
> 赞同：19
> 
> 时间：2012-10-18T16:33:37.600
> 
> 标签：c, comma

```
#include <stdio.h>

main()
{
    int i;
    for(i=0; i<0, 5; i++)
        printf("%d\n", i);
} 
```

我无法理解循环`i<0, 5`条件中的部分。`for`

即使我成功了`i>0, 5`，输出也没有变化。

这是如何运作的？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-18T16:35:04.413

## 关于主题

逗号运算符将始终产生逗号分隔列表中的最后一个值。

基本上，它是一个二元运算符，它计算左侧值但丢弃它，然后计算右侧值并返回它。

如果您链接其中的多个，它们最终将产生链中的最后一个值。

根据 anatolyg 的评论，如果您想在右手值之前评估左手值（如果左手评估具有理想的副作用），这很有用。

例如`i < (x++, x/2)`，使用该运算符是一种理智的方式，因为您正在影响右手值，并影响左手值评估的影响。

[http://en.wikipedia.org/wiki/Comma_o​​perator](http://en.wikipedia.org/wiki/Comma_operator)

## 旁注：你听说过这个好奇的操作员吗？

```
int x = 100;
while(x --> 0) {
    // do stuff with x
} 
```

这只是另一种写作方式`x-- > 0`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-18T16:36:28.887

逗号运算符评估`i<0`Or`i>0`并忽略。因此，它总是`5`存在于条件中。

所以它相当于：

```
for(i=0;5;i++) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-18T16:37:38.457

昏迷运算符完成初始化和增量部分，执行类似的操作`for(i=0,j=20;i<j;i++,j--)`，如果您在比较部分执行此操作，它将评估最后一个（因为它之前已经回答过）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-18T16:35:28.843

`i<0,5`将始终计算为`5`，因为将始终返回正确的表达式`ex1,ex2`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T16:37:34.030

逗号运算符适用于第一个操作数有一些副作用的情况。这只是一个成语，旨在使您的代码更具可读性。它对条件的评估没有影响。

例如，

```
for (i = 0; i<(i++, 5); i++) {
    // something
} 
```

将递增`i`，然后检查是否`i<5`。

# ios - 异步加载大型 UIImages

> ID：12959416
> 
> 赞同：1
> 
> 时间：2012-10-18T16:33:39.463
> 
> 标签：ios, objective-c, asynchronous, uiimage, grand-central-dispatch

我有一个 NSManagedObject，其中的图片存储在某处，例如`/var/mobile/Applications/.../.../uniqueIDforNSMO/Pictures/`

通过根据 NSMO 的 uniqueID 找到这些图片，我可以毫无问题地从磁盘中取出这些图片，我有一个 DataController 可以为我提取它们，而且性能非常好。但是当我尝试将这些图片添加到视图时遇到问题，UI 被阻止。我怀疑问题在于这些图像的分辨率非常高（它们是来自 iPad 相机胶卷的图像）。

显示 5 张图像大约需要 3 秒，从而使 UI 被阻止。即使只显示 2 张图像也会阻止该死的 UI。这是我在后台线程上添加它们的方法：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    UIImage *image = [self.photos objectAtIndex:index];
    dispatch_async(dispatch_get_main_queue(), ^{
        cell.imageView.image = image;
    });
}); 
```

如果我设置 imageView.image 而不调度它需要更长的时间。

问题可能是图像太大，而单元格的 imageViews 只有 150x150？还是因为我一开始只有对图像的引用，所以图像的实现是慢的部分？

任何人都可以在这里提出任何建议吗？我曾尝试在图像返回数组之前调整图像大小，但这没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:41:34.440

问题是图像被延迟加载 -`UIImage`仅在需要绘制图像时才将图像加载到内存中。您可以做的是在后台线程上急切地加载图像：

1.  创建一个`CGBitmapContextRef`使用`UIGraphicsBeginImageContext`
2.  将图像绘制到上下文中
3.  使用从上下文中获取新图像`UIGraphicsGetImageFromCurrentImageContext`
4.  将图像传回主线程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:48:15.337

由于它们是高分辨率图像，我建议您为此制作持久缩略图缓存。每次都实时生成缩略图会不必要地浪费过多的 CPU 时间。

# javascript - 夏令时与 Javascript

> ID：12959420
> 
> 赞同：2
> 
> 时间：2012-10-18T16:33:53.207
> 
> 标签：javascript, date, dst

好的，我知道如何检查某一天是否在 DST 框架内。但是，如果提供日期对象的系统已经处于 DST 模式并且您不知道“正常”时区，是否有任何方法可以获取信息？用户可能会关闭该功能或仍然需要重新启动或类似的东西。大多数系统在 SysAPI 中提供了某种标志来检查……有没有办法从 js 中获取这些信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:38:29.147

**可能不是。**

JavaScript 语言（ECMAScript 第 5 版）不提供任何此类功能。

您可能可以从诸如 ActiveXObject 之类的扩展中访问它，但我怀疑是否有任何可靠的、跨浏览器/跨平台的方法来检测操作系统或用户是否正在使用任何夏令时设置。

这篇[Microsoft Technet 文章](http://gallery.technet.microsoft.com/scriptcenter/86090fa4-e409-4462-ac6c-4bc47f128d23/)演示了如何使用 VBScript 在几个版本的 Windows 上检测 DST（这在 JScript 中可能类似），但同样，这不太可能是您可以可靠地做到的（如果有的话，取决于具体情况你的用例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T18:18:01.750

> 如果提供日期对象的系统已经处于 DST 模式并且您不知道“正常”时区，是否有任何方法可以获取信息？

不确定我的问题是否正确。基本上我只看到两种可能性：

a) DST 功能已关闭或时区根本没有 DST 帧：我们总是知道标准时间，因为没有 DST 时间。

b) DST 功能已开启且时区存在 DST 帧：夏至和冬至的 UTC 时差不同，标准时差为冬至时区的时差，即在 12 月（北半球）或六月（南半球）。

这应该为我们提供以下信息：

```
function checkDST() {

  var
    now = new Date();
    year = now.getFullYear(), // current year
    june = new Date(year, 5, 21, 12), // solistice 1
    december = new Date(year, 11, 21, 12); // solistice 2
    decTzo = december.getTimezoneOffset(),
    junTzo = june.getTimezoneOffset(),
    nowTzo = now.getTimezoneOffset(),
    dstDiff = decTzo - junTzo,
    msgNoDst = "Your system does not observe Daylight Savings. UTC offset: " + nowTzo,
    msgDstN = "Northern hemisphere. UTC offset: " + nowTzo + ", standard offset: " + decTzo,
    msgDstS = "Southern hemisphere. UTC offset: " + nowTzo + ", standard offset: " + junTzo;

    if (dstDiff === 0) { return msgNoDst; }
    if (dstDiff > 0) { return msgDstN; }
    return msgDstS;
}

alert(checkDST()); 
```

– 如果 dec-jun 偏移量的差异为正值 - 例如柏林 -60-(-120) = +60 - 那么该位置位于北半球，标准偏移量是 12 月的偏移量。
– 如果 dec-jun 偏移量的差异为负值（例如，阿德莱德 -630-(-570) = -60），则该位置位于南半球，标准偏移量为 6 月。

# asp.net - 数据库连接问题

> ID：12959427
> 
> 赞同：0
> 
> 时间：2012-10-18T16:34:22.567
> 
> 标签：asp.net, sql-server

当我从 Visual Studio(F5) 启动站点时 - 它在浏览器中正常工作。但是当我从 IIS 管理器启动它时 - 它总是显示带有语言的标准 IIS 页面。

站点使用数据库 DB.mdf。在 web config 连接字符串是

`Data source=.\MSSQLSERVER2;Database=DB;Integrated security=true`

数据库位于 App_Data 中。

在我的站点的 ASP.NET->Connectionstring 的 IIS 管理器中，我创建了新的连接字符串 - 与 web.config 中名称为 CName 的连接字符串相同。

哪里有问题？我的站点的路径是包含 App_Data 目录的目录路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:36:48.193

在 IIS 中运行时，它使用运行它的应用程序池的安全上下文。您将需要在您的应用程序池标识上使用不同的用户，或者将您的资源的权限授予当前应用程序池用户。

请参阅[这篇文章，了解如何设置 App Pool 身份](http://www.iis.net/learn/manage/configuring-security/application-pool-identities)。

# android - Android - 是否可以检测到微笑？

> ID：12959428
> 
> 赞同：7
> 
> 时间：2012-10-18T16:34:29.413
> 
> 标签：android, camera, detect

是否可以在 Android 相机预览中检测到微笑？我知道有一个 FaceDetector 类，但我只能检查眼睛（来自 FaceDetector.Face ）。任何 SDK 或示例？我知道这是可能的，因为 S3 内置了微笑检测器，但在 Google Play 商店中找不到任何其他示例。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:13:19.080

您应该使用第 3 方人脸识别库。Facedetection.com 有一个不错的用于检测和/或识别的开源和商业软件列表。

对于人脸识别，这是我在 SourceForge 上找到的：

> [https://sites.google.com/site/elsamuko/c-cpp/opencv-facerecog](https://sites.google.com/site/elsamuko/c-cpp/opencv-facerecog)
> 
> [http://facereco.com/](http://facereco.com/)

然后是商业产品：

[http://www.betaface.com](http://www.betaface.com)

[http://www.ayonix.com/](http://www.ayonix.com/)
[http://www.cognitec-systems.de](http://www.cognitec-systems.de)

# python - Sympy 蟒蛇围

> ID：12959432
> 
> 赞同：2
> 
> 时间：2012-10-18T16:34:38.523
> 
> 标签：python, sympy

我需要显示一个圆周。为了做到这一点，我认为我可以计算 的很多`x`两个值`y`，所以我做了：

```
import sympy as sy
from sympy.abc import x,y
f = x**2 + y**2 - 1
a = x - 0.5
sy.solve([f,a],[x,y]) 
```

这就是我得到的：

```
Traceback (most recent call last):
  File "<input>", line 1, in <module>
  File "/usr/lib/python2.7/dist-packages/sympy/solvers/solvers.py", line 484, in
 solve
    solution = _solve(f, *symbols, **flags)
  File "/usr/lib/python2.7/dist-packages/sympy/solvers/solvers.py", line 749, in
 _solve
    result = solve_poly_system(polys)
  File "/usr/lib/python2.7/dist-packages/sympy/solvers/polysys.py", line 40, in
solve_poly_system
    return solve_biquadratic(f, g, opt)
  File "/usr/lib/python2.7/dist-packages/sympy/solvers/polysys.py", line 48, in
solve_biquadratic
    G = groebner([f, g])
  File "/usr/lib/python2.7/dist-packages/sympy/polys/polytools.py", line 5308, i
n groebner
    raise DomainError("can't compute a Groebner basis over %s" % domain)
DomainError: can't compute a Groebner basis over RR 
```

如何计算`y`'s 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:57:46.920

为我工作；也许解决方案就像升级一样简单？

```
>>> import sympy
>>> sympy.__version__
'0.7.2'
>>> import sympy as sy
>>> from sympy.abc import x,y
>>> f = x**2 + y**2 - 1
>>> a = x - 0.5
>>> sy.solve([f,a],[x,y])
[(0.500000000000000, -0.866025403784439), (0.500000000000000, 0.866025403784439)] 
```

[虽然如果我需要画一个圆或弧线，我会`r cos(theta), r sin(theta)`改用，以便更容易以正确的顺序获得点。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:33:25.613

您还可以使用有理数来获得准确的答案（并避免该错误）

```
In [22]: a = x - Rational(1,2)

In [23]: sy.solve([f,a],[x,y])
Out[23]:
⎡⎛        ___⎞  ⎛       ___⎞⎤
⎢⎜     -╲╱ 3 ⎟  ⎜     ╲╱ 3 ⎟⎥
⎢⎜1/2, ──────⎟, ⎜1/2, ─────⎟⎥
⎣⎝       2   ⎠  ⎝       2  ⎠⎦ 
```

# sql - 在 SQL 错误中不能被零除

> ID：12959435
> 
> 赞同：0
> 
> 时间：2012-10-18T16:34:46.167
> 
> 标签：sql, sql-server-2005

我想知道如果除数 = 0，是否有办法不使用除法。在这种情况下，我的查询工作正常，除非它必须除以 0。如果除数是，它应该给出答案为 0 0.有可能吗？这是在 SQL 2005 中。

谢谢！

```
Select sum(cast(isnull(S.AmountSold, 0) as numeric(10,2))) As DeliveryTotal,
sum(cast(isnull(S.S_AmountCollected, 0) as numeric(10,2))) as DeliveryTotalCollected
(sum(cast(isnull(S.S_AmountCollected, 0) as numeric(10,2))) / sum(cast(isnull(S.AmountSold, 0) as numeric(10,2))) )*100 as DeliveryTotalPercentageCollected

from Info RD 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:39:08.273

我会使用`case when`, 也许还有一个子查询来让事情更容易阅读......

```
select DeliveryTotal, DeliveryTotalCollected, 
 case 
   when DeliveryTotalCollected = 0 --if divisor = 0
   then 0 --return 0
   else (DeliveryTotal / DeliveryTotalCollected) * 100 --return division * 100
 end as DeliveryTotalPercentageCollected
from
(Select 
 sum(cast(isnull(S.AmountSold, 0) as numeric(10,2))) As DeliveryTotal,
 sum(cast(isnull(S.S_AmountCollected, 0) as numeric(10,2))) as DeliveryTotalCollected
 from Info RD) as subq 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T16:37:18.193

查看 CASE 表达式：

[http://msdn.microsoft.com/en-us/library/ms181765.aspx](http://msdn.microsoft.com/en-us/library/ms181765.aspx)

它将允许您在两种情况之间做出决定

# scala - Scala 中的 `type` 和 `#` 关键字的调查

> ID：12959438
> 
> 赞同：11
> 
> 时间：2012-10-18T16:35:01.470
> 
> 标签：scala, types, type-projection

有人可以解释`type`关键字和`#`运算符在 scala 中的工作原理以及如何使用它吗？请看例子。

```
//Example1
scala>  type t1 = Option.type
defined type alias t1

//Shouldn't this work since previous example simply works?
scala>  type t2 = String.type
<console>:7: error: type mismatch;
 found   : String.type
 required: AnyRef
       type t2 = String.type
         ^

//lets define custom trait T
scala>  trait T
defined trait T

//... and obtain it's type like in Example1.
//Shouldn't this work since previous Example1 simply works?
scala>  type t3 = T.type
<console>:7: error: not found: value T
       type t3 = T.type
         ^

//Lets define some value of type T
scala>  val v4 = new T{}
v4: T = $anon$1@5c3e8c76

//and obtain it's type (works)
scala>  type t4 = v4.type
defined type alias t4

//this doesn't work
scala>  type t4_1 = (new T{}).type
<console>:1: error: identifier expected but 'new' found.
       type t4_1 = (new T{}).type

//as well as this (doesn't work)
scala>  type t5 = "abc".type
<console>:1: error: identifier expected but string literal found.
       type t5 = "abc".type
         ^

//but this compiles well
scala>  val v6 = "abc"
v6: String = abc

scala>  type t6 = v6.type
defined type alias t6

//lets create some values of created types:
scala>  type t1 = Option.type
defined type alias t1

scala>  val v1_1 = Some(10)
v1_1: Some[Int] = Some(10)

scala>  type t7 = v1_1.type
defined type alias t7

scala>  val v7:t7 = null
v7: t7 = null

scala>  val v7_1:t7 = v1_1
v7_1: t7 = Some(10)

scala>  val v7_2:t7 = Some(10)
<console>:9: error: type mismatch;
 found   : Some[Int]
 required: t7
    (which expands to)  v1_1.type
       val v7_2:t7 = Some(10)
             ^

//next let's try # operator

scala>  class X[A,B](a:A,b:B)
defined class X

//doesn't work
scala>  type xa = X[A,B]#A
<console>:8: error: not found: type A
       type xa = X[A,B]#A
           ^
<console>:8: error: not found: type B
       type xa = X[A,B]#A
             ^

//but such approach works:
scala>  trait X2[C]{
  type A
  type B
  val c:C
}
defined trait X2

scala>  type xa2_1 = X2[String]#A
defined type alias xa2_1

scala>  type xa2_2[M] = X2[M]#A
defined type alias xa2_2 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T17:03:52.747

首先，您的问题`type`：

类型声明的右侧必须是具有稳定路径的类型的名称。因此，一个一个地举出你的例子：

```
type t1 = Option.type 
```

t1 是`Option` *对象*类型的别名，而不是`Option`类的别名。

```
type t2 = String.type 
```

这是一个错误，因为没有`String`对象。这个错误有点奇怪，因为 String 是一个 Java 类，因此在不同的规则下运行（因为 Java 类从来没有同伴）。

```
type t3 = T.type 
```

同上。这次错误更清楚了，因为 T 是一个 Scala 类，所以编译器可以明确地说“T 没有用类型命名对象”

```
type t4 = v4.type 
```

这是由 val 命名的对象的单例类型`v4`。它不引用任何类型 T 的实例，甚至不引用由您的`new T{}`表达式创建的匿名类的任何实例。它指的是*仅*由`v4`and表示的类型`null`，即它们是该类型唯一允许的值。

```
type t4_1 = (new T{}).type 
```

这是非法的，因为您使用的类型必须是一个稳定的标识符（粗略地说，一个其引用永远不会改变的标识符 - 如果标识符的完整路径仅包含包的名称，`object`s 和`val`s ，它是稳定的）。

```
type t5 = "abc".type 
```

同上。

```
type t6 = v6.type 
```

`v6`是一个稳定的标识符。 `t6`是仅由名称`v6`(and `null`) 引用的特定 String 实例所包含的类型。

```
type v6 = v1_1.type 
```

再次，单例类型。

```
val v7: t7 = null 
```

`null`是类型的有效值`t7`

```
val v7_1:t7 = v1_1 
```

这个特殊的对象也是如此。

```
val v7_2:t7 = Some(10) 
```

但这是一个*不同*的对象（即使它是`==`to `v7`，它不是`eq`它），因此不是这种类型的成员。

现在关于`#`：

```
class X[A,B](a:A,b:B) 
```

`A`并且`B`是类型参数。他们不能在课堂外被提及。您可以将它们视为具有`private[this]`可见性的抽象类型别名，尽管这不太准确。

```
type xa = X[A,B]#A 
```

所以是的，不可见。

```
type xa2_1 = X2[String]#A 
```

由于*this* `A`引用了公共类型别名，因此可以在类外通过名称引用它。请注意，这种特殊情况非常无用，因为您对这种类型一无所知。如果您的 trait`X2`有一个返回 type 值的方法`A`，您可以执行类似的操作

```
val aFromX2: xa2_1 = x2instance.methodThatReturnsAnA 
```

..但是你不能用它做任何其他事情，甚至将它传递回一个实例，`X2[String]`因为不能保证两个`A`s 会引用相同的类型！另一方面，如果你有一个具体的实例，你可以这样做：

```
def passAroundA(x2instance: X2[String]) {
  type x2a = x2instance.A // note dot, not #
  val a: x2a = x2instance.methodThatReturnsAnA
  x2instance.methodThatTakesAnA(a)
} 
```

在这种情况下，它可以工作，因为即使我们不知道`A`实际上是什么，我们也知道这两种方法使用*相同*的类型——无论是在`x2instance`' 构造中固定的什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-20T20:59:08.197

实际上，关于您的问题的所有内容都在这个关于模式匹配等用例的[绝对必要的演讲中得到了解释。我建议您花时间观看它并努力解决它。](https://www.youtube.com/watch?v=p1mYHDSNSQo)在我观看这个视频之前，很多与 scala Type 系统相关的东西对我来说实际上是一种魔法。如果我知道这些事情，我可能会花很多时间尝试解决类型系统和类型推断的奇怪行为。

# python - dict列表中的问题

> ID：12959442
> 
> 赞同：1
> 
> 时间：2012-10-18T16:35:20.037
> 
> 标签：python, list, dictionary

```
class MyOwnClass:

  # list who contains the queries
  queries = []

  # a template dict
  template_query = {}
  template_query['name'] = 'mat'
  template_query['age'] = '12'

obj = MyOwnClass()

query = obj.template_query
query['name'] = 'sam'
query['age'] = '23'
obj.queries.append(query)

query2 = obj.template_query
query2['name'] = 'dj'
query2['age'] = '19'
obj.queries.append(query2)

print obj.queries 
```

它给了我

```
[{'age': '19', 'name': 'dj'}, {'age': '19', 'name': 'dj'}] 
```

虽然我希望有

```
[{'age': '23'  , 'name': 'sam'}, {'age': '19', 'name': 'dj'}] 
```

我想为这个列表使用一个模板，因为我会经常使用它，并且有一些默认变量不需要更改。

为什么做它`template_query`本身会改变？我是 python 新手，我很困惑。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:38:06.540

这是因为您每次都指向同一个字典...并覆盖键...

```
# query = obj.template_query - dont need this
query = {}
query['name'] = 'sam'
query['age'] = '23'
obj.queries.append(query)

query2 = {} #obj.template_query-dont need this
query2['name'] = 'dj'
query2['age'] = '19'
obj.queries.append(query2) 
```

这应该证明你的问题

```
>>> q = {'a':1}
>>> lst = []
>>> lst.append(q)
>>> q['a']=2
>>> lst
[{'a': 2}]
>>> lst.append(q)
>>> lst
[{'a': 2}, {'a': 2}] 
```

你可以用不同的方式实现你的类

```
class MyOwnClass:
  # a template dict
  @property
  def template_query():
      return {'name':'default','age':-1} 
```

这将使`obj.template_query`每次返回一个新的字典

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:42:34.313

这是因为`query`和`query2`都指的是同一个对象。`obj.template_query`， 在这种情况下。

最好制作一个模板工厂：

```
def template_query(**kwargs):
    template =  {'name': 'some default value', 
                 'age': 'another default value', 
                 'car': 'generic car name'}
    template.update(**kwargs)
    return template 
```

每次调用时都会创建一个新字典。所以你可以这样做：

```
>>> my_query = template_query(name="sam")
>>> my_query
{'name': 'sam', 'age': 'another default value', 'car': 'generic car name'} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:40:43.840

您正在将相同的 dict 复制到 query2 中。相反，您可能希望通过创建一个函数 template_query() 并每次构造一个新的字典来创建所需的字典：

```
class MyOwnClass:

  # a template dict
  def template_query():
    d = {}
    d['name'] = 'mat'
    d['age'] = '12'
    d['car'] = 'ferrari'
    return d 
```

# java - 从java中的网站检索可下载内容的列表

> ID：12959443
> 
> 赞同：0
> 
> 时间：2012-10-18T16:35:19.567
> 
> 标签：java, android

我正在开发一个安卓应用程序来从互联网上获取一些文件。该网站包含一个列表，您可以下载不同的文件。它还包含一些带有文件的子文件夹。有没有办法获取文件名和链接列表，以便用户可以选择从我的应用程序中下载哪些文件名和链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:45:01.620

如果网站通过 HTML 显示信息，您可以使用 JSoup [1] 之类的库筛选 HTML，如果它们允许目录列表，您也可以对其进行解析以向用户显示此信息。它依赖于网站公开的 API 来显示文件。

[1] - [http://jsoup.org/](http://jsoup.org/)

# tfsbuild - 在 TFS 构建期间获取项目名称

> ID：12959459
> 
> 赞同：2
> 
> 时间：2012-10-18T16:36:16.837
> 
> 标签：tfsbuild

我正在尝试使用 TFS Build 2010 部署 Web 应用程序。我需要部署的文件位于 {DropFolder}_PublishedWebsites\HelloWorld 中。我添加了一个复制目录活动，可以将其指向 {DropFolder}_PublishedWebsites" 目录，但我没有找到一种方法来提取当前正在构建的项目的名称以将其附加到路径中。

这应该很容易。我错过了什么？我希望在对象模型的某个地方找到它，但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:05:36.597

不，这并不像人们想象的那么容易。我们通过一个定义项目目录名称的参数来实现这一点，然后使用它来定义路径，例如您想要的路径。不是很漂亮，但对我们来说是一种更简单的方法，因为我们经常在构建中构建多个解决方案，并且需要告诉构建其中哪一个是“主要”项目。

我想应该可以从正在构建的解决方案中解析，也可以使用`Path`方法。

# eclipse - eclipse中当前日期和时间的命令行参数

> ID：12959469
> 
> 赞同：3
> 
> 时间：2012-10-18T16:36:38.193
> 
> 标签：eclipse, command-line-arguments, run-configuration

我有一个写入文件的 java 应用程序。我的命令行参数之一是文件名。我想在 Eclipse 中设置一个运行配置，用日期和时间命名文件，如下所示：

> MyFile_20121018113400.txt

有没有办法在运行配置菜单中做到这一点？

编辑：日期格式不必完全一样。每次生成文件时，我只想要一个唯一的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:42:06.093

我是 Stack Overflow 的新手，如果我弄错了或误解了这个问题，我深表歉意，但你可以使用：

```
Date currentDate = new Date(); 
```

并使用简单的日期格式化程序对其进行格式化，例如：

```
dateFormatter = new SimpleDateFormat("yyyy-MM-dd"); 
```

然后将格式更改为您想要的任何格式？

再次道歉，如果这没有帮助。

# jquery - jQuery: Remove rows based on class

> ID：12959477
> 
> 赞同：7
> 
> 时间：2012-10-18T16:37:04.153
> 
> 标签：jquery, jquery-selectors

I've got a problem with jQuery and removing some elements based on their class. See [http://jsfiddle.net/JBKp4/1/](http://jsfiddle.net/JBKp4/1/)

When the delete link is clicked in the itemRow the optionRow's and commentRow of that Item should be delete asswell. But I'cant determine the class of the row.

I hope somebody can help me out. Thank you!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T16:50:01.907

your code can be much simpler:

```
$('body').on('click', '.delete', function() {
    var $tr = $(this).closest('tr');
    if ($tr.attr('class') == 'itemRow') {
        $tr.nextUntil('tr[class=itemRow]').andSelf().remove();
    }
    else {
        $tr.remove();
    }
}); 
```

see it working here: [http://jsfiddle.net/RASG/MeaRQ/](http://jsfiddle.net/RASG/MeaRQ/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T16:38:58.083

you can do this by selector

```
$(".className").remove(); 
```

and there is typo in `<tr class"itemRow">` should be `<tr class="itemRow">`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T16:49:35.683

As others have pointed out, fix your `class` attributes.

Your JavaScript could be made a bit cleaner as well:

```
$(document).ready(function() {
    $('body').on('click', '.itemRow .delete', function() {
        $(this).parents('tr').nextUntil('.itemRow').andSelf().remove();
    });

    $('body').on('click', '.optionRow .delete', function() {
        $(this).parents('tr').remove();
    });
});​ 
```

**Demo: [http://jsfiddle.net/JBKp4/35/](http://jsfiddle.net/JBKp4/35/)**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:43:52.780

Nest your rows. Rather than creating new rows in the table for each item nest them hierarchially:

```
<table class="items">
    <tr class="item">
        <table class="options">
            <tr class="option">
                <table class="comments">
                    <tr class="comment">
                    </tr>
                </table>
            </tr>
        </table>
    </tr>
</table> 
```

Honestly I would recommend not using tables for this. It looks like your content isn't going to be tabular data and so Tables doesn't make sense for layout. Use Divs instead.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T16:44:12.497

Fix the `=` problem others have noted. There is more to it than that.

You need a way to associate items with their options. I suggest that you just update the html:

```
<tr class="itemRow" id="item1">
...
<tr class="optionRow item1">
... 
```

Note that the `optionRow` should have the ID of the item it belongs to as a class. That way, when you delete the item row, you can do something like:

```
$("." + this.id).remove(); 
```

See: [http://jsfiddle.net/JBKp4/11/](http://jsfiddle.net/JBKp4/11/)

If you don't want to do this (or can't for some reason) it's more complicated. Basically you will have to keep getting the `.next()` of the itemRow TR until it either runs into another `.itemRow` or there is no next TR.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T17:07:44.480

First off, your markup was buggered. You were missing `=` in the class attributes of the `tr` elements. Clean markup makes the JS side of things a lot easier to manage. I would suggest you fix your markup, even refactor it to be more semantic (group data together into structures that make sense using elements like `<dl>` or `<ul>`).

Better html = less work.

Second, you were binding to body **and** the `.delete` element. That's a lot of overhead in terms of event monitoring that jQuery has to do. It's unnecessary for the type of functionality you want to achieve. Bind only to elements that you want to track events on, use callbacks to handle related cases.

Lastly, there's absolutely nothing linking your `<tr>` elements together that would indicate that those rows are related to the one you're attempting to delete. So, your script was deleting only the one row. You can use `data-attributes` and other element attributes to link your target elements together. I updated your fiddle to show you what I mean. [Your Updated Fiddle...](http://jsfiddle.net/JBKp4/43/)

Here's the revised jQuery script:

```
jQuery( function(){
    $('.delete').click( function(){
        var obj = $( this ); // your delete link
        var table = obj.closest('table'); // the containing table
        var trgroup = obj.attr('data-group'); // a data-attribute that links your other elements together

        if( trgroup ) // If the attribute is available continue...
        {
            console.log( table.find('tr[rel="' + trgroup + '"]') );
            // Find all related element and remove them.
            table.find('tr[rel="' + trgroup + '"]').empty().remove();
        }

        // Remove the table row of the executing link and it's children.
        obj.closest('.itemRow').empty().remove();
    });
} ); 
```

I'll probably catch a little flack for using empty().remove() instead of just .remove(), but that's my own preference.

# html - 按照 HTML 语义向表格添加工具栏

> ID：12959480
> 
> 赞同：1
> 
> 时间：2012-10-18T16:37:09.660
> 
> 标签：html, markup, semantic-web, semantic-markup

我有一个基本的 HTML 表格，如下所示：

```
<table>
  <thead>
    <tr>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

我想在它上面添加一个工具栏。将工具栏添加为一行在语义上是否可以接受`thead`？

```
<table>
  <thead>
    <tr>
      <th colspan="2">
        <!-- toolbar buttons -->
      </th>
    </tr>
    <tr>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:20:31.517

恕我直言，由于工具栏与表格数据相关，我认为让该工具栏在`thead`.

# c# - PostBack 后未保留 ASP.NET TextBox 值 - 会话值正常

> ID：12959482
> 
> 赞同：1
> 
> 时间：2012-10-18T16:37:10.463
> 
> 标签：c#, asp.net, session, postback

我有一个简单的 ASP.NET GridView，它数据绑定到我们数据库上的视图。

选择行时，请求将添加到会话变量和请求ID TextBox中。当我逐步完成该过程时，TextBox 的 TextChanged 事件和 PostBack 事件都验证了这一点，但之后这些值不会显示在网站上。

代码发布在 .NET Pad 上：http: [//dotnetpad.net/ViewPaste/TJp2pldPkk6poP3cVzRlHQ](http://dotnetpad.net/ViewPaste/TJp2pldPkk6poP3cVzRlHQ)

注意：我也尝试注释掉 Page_Load 中 PostBack 事件的所有代码，但这并没有解决我的问题。

什么可以使这项工作？

代码：

```
<%@ Page Language="C#" %>
<%@ Import Namespace="System" %>
<%@ import Namespace="System.Web.UI.WebControls" %>
<script runat="server">

  protected void Page_Load(object sender, EventArgs e) {
    if (IsPostBack) {
      //int nDDL = GetInteger(Session[ddlSelector.ID]);
      //if (nDDL == ddlSelector.SelectedIndex) {
      //  int reqID = GetInteger(Session[txtRequestID.ID]);
      //  if ((0 < reqID) && (reqID.ToString() != txtRequestID.Text)) {
      //    string strEmp = IsNumeric(Session[txtEmployee.ID]) ? GetText(Session[txtEmployee.ID]) : null;
      //    txtRequestID.Text = reqID.ToString();
      //    txtEmployee.Text = strEmp;
      //    if (nDDL != ddlChangeTo.SelectedIndex) {
      //      ddlChangeTo.SelectedIndex = nDDL;
      //    }
      //  }
      //}
    } else {
      Session[ddlSelector.ID] = null;
      Session[txtRequestID.ID] = null;
      Session[txtEmployee.ID] = null;
      txtRequestID.Text = null;
      txtEmployee.Text = null;
      txtMTF.Text = null;
      btnOK.Visible = (0 < GetInteger(txtRequestID.Text));
    }
  }

  private void ErrorMessage(string message) {
    Response.Write(string.Format("<font color=\"Red\"><b>{0}</b></font>", message));
  }

  protected void GridViewRow_Selected(object sender, EventArgs e) {
    var row = GridView1.SelectedRow;
    if (row != null) {
      var reqIdCell = row.Cells[1];
      if (reqIdCell != null) {
        int reqID = GetInteger(reqIdCell.Text);
        if (0 < reqID) {
          Session[ddlSelector.ID] = ddlSelector.SelectedIndex;
          Session[txtRequestID.ID] = reqID;
          txtRequestID.Text = reqID.ToString();
          txtEmployee.Text = null;
          btnOK.Visible = true;
        }
      }
    }
  }

  protected void Submit_Click(object sender, EventArgs e) {
    int reqID = GetInteger(Session[txtRequestID.ID]);
    if (0 < reqID) {
      ErrorMessage("Success!");
    } else {
      ErrorMessage("Unrecognised Request ID.");
      txtRequestID.Focus();
    }
  }

  protected void TextBox_TextChanged(object sender, EventArgs e) {
    if (sender is TextBox) {
      TextBox tbx = (TextBox)sender;
      if (tbx.ID == txtRequestID.ID) {
        int reqID = GetInteger(txtRequestID.Text.Trim());
        int reqI2 = GetInteger(Session[txtRequestID.ID]);
        if (0 < reqID) {
          Session[txtRequestID.ID] = reqID;
        } else {
          txtRequestID.Text = null;
        }
        if (0 < reqI2) {
          txtRequestID.Text = reqI2.ToString();
        }
      } else if (tbx.ID == txtEmployee.ID) {
        string empNum = txtEmployee.Text.Trim();
        if (IsNumeric(empNum)) {
          Session[txtEmployee.ID] = empNum;
        } else {
          txtEmployee.Text = null;
        }
      }
    } else if (sender is DropDownList) {
      DropDownList ddl = (DropDownList)sender;
      if (ddl.ID == ddlSelector.ID) {
        Session[ddlSelector.ID] = ddlSelector.SelectedIndex;
        Session[txtRequestID.ID] = null;
        Session[txtEmployee.ID] = null;
      }
    }
  }

  protected void Tick_Tock(object sender, EventArgs e) {
    GridView1.DataBind();
  }

  private static int GetInteger(object value) {
    int result = -1;
    if (HasValue(value)) {
      try {
        result = (int)value;
      } catch {
        result = -1;
      }
    }
    if (result == -1) {
      result = 0; // errors could occur if I try indexing things with negative numbers
      string text = GetText(value);
      if (!String.IsNullOrEmpty(text)) {
        int.TryParse(text.Trim(), out result);
      }
    }
    return result;
  }

  private static string GetText(object value) {
    if (HasValue(value)) {
      return value.ToString().Trim();
    }
    return null;
  }

  private static bool HasValue(object item) {
    if ((item != null) && (item != DBNull.Value)) {
      return !String.IsNullOrEmpty(item.ToString().Trim());
    }
    return false;
  }

  private static bool IsNumeric(object input) {
    if (input == null) return false;
    string text = input.ToString();
    if (!String.IsNullOrEmpty(text.Trim())) {
      foreach (char c in text.ToCharArray()) {
        if (char.IsLetter(c)) return false;
      }
    }
    return true;
  }

</script>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
  <form id="form1" runat="server">
    <div>
      <asp:SqlDataSource ID="productionDataSource2" runat="server" ConnectionString="<%$ ConnectionStrings:CPWEB_PRODUCTION %>" SelectCommand="SELECT [RequestID], [Employee], [DateStamp], [Line], [PartNo], [Workorder], [Qty], [MTF], [Status] FROM [vwRequestsEx] WHERE ([Status] = @Status)"><SelectParameters>
          <asp:ControlParameter ControlID="ddlSelector" Name="Status" PropertyName="SelectedValue" Type="String" />
        </SelectParameters></asp:SqlDataSource>
      <asp:ScriptManager ID="ScriptManager1" EnablePartialRendering="true" runat="server" />
      <table style="width: 90%">
        <tr>
          <td>Display:<br /><asp:DropDownList ID="ddlSelector" runat="server" DataSourceID="productionStatus2" DataTextField="Description" DataValueField="Description" OnSelectedIndexChanged="TextBox_TextChanged"></asp:DropDownList>
            <asp:SqlDataSource ID="productionStatus2" runat="server" ConnectionString="<%$ ConnectionStrings:CPWEB_PRODUCTION %>" SelectCommand="SELECT [ID], [Description] FROM [Status]"></asp:SqlDataSource>
          </td>
          <td>RequestID:<br /><asp:TextBox ID="txtRequestID" runat="server" OnTextChanged="TextBox_TextChanged" AutoCompleteType="Disabled" /></td>
          <td>Employee:<br /><asp:TextBox ID="txtEmployee" runat="server" OnTextChanged="TextBox_TextChanged" AutoCompleteType="Disabled" /></td>
          <td>MTF:<br /><asp:TextBox ID="txtMTF" runat="server" OnTextChanged="TextBox_TextChanged" AutoCompleteType="Disabled" /></td>
          <td style="width: 110px;">Change To:<br /><asp:DropDownList ID="ddlChangeTo" runat="server" DataSourceID="productionStatus3" DataTextField="Description" DataValueField="Description"></asp:DropDownList>
            <asp:SqlDataSource ID="productionStatus3" runat="server" ConnectionString="<%$ ConnectionStrings:CPWEB_PRODUCTION %>" SelectCommand="SELECT [Description] FROM [Status] WHERE ([Description] &lt;&gt; @Description)"><SelectParameters>
              <asp:ControlParameter ControlID="ddlSelector" Name="Description" PropertyName="SelectedValue" Type="String" />
            </SelectParameters></asp:SqlDataSource>
          </td>
          <td><br />
            <asp:Button ID="btnOK" runat="server" Text="Submit" OnClick="Submit_Click" Width="75px" /></td>
        </tr>
        <tr>
          <td class="nowrap" colspan="6">
            <asp:Timer ID="Timer1" OnTick="Tick_Tock" runat="server" Interval="30000"></asp:Timer>
            <asp:UpdatePanel ID="UpdatePanel1" UpdateMode="Conditional" runat="server">
              <Triggers><asp:AsyncPostBackTrigger ControlID="Timer1" EventName="Tick" /></Triggers>
              <ContentTemplate>
            <asp:GridView ID="GridView1" runat="server" AllowPaging="True" AllowSorting="True" AutoGenerateColumns="False" AutoGenerateSelectButton="True" CellPadding="1" DataSourceID="productionDataSource2" EmptyDataText="No Records to Display" Font-Size="Small" ForeColor="#333333" OnSelectedIndexChanged="GridViewRow_Selected" ShowHeaderWhenEmpty="True" HorizontalAlign="Left" RowHeaderColumn="RequestID" Width="95%">
            <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
            <Columns>
              <asp:BoundField DataField="RequestID" HeaderText="RequestID" SortExpression="RequestID" />
              <asp:BoundField DataField="Employee" HeaderText="Employee" SortExpression="Employee" />
              <asp:BoundField DataField="DateStamp" HeaderText="DateStamp" SortExpression="DateStamp" />
              <asp:BoundField DataField="Line" HeaderText="Line" SortExpression="Line" />
              <asp:BoundField DataField="PartNo" HeaderText="PartNo" SortExpression="PartNo" />
              <asp:BoundField DataField="Workorder" HeaderText="Workorder" SortExpression="Workorder" />
              <asp:BoundField DataField="Qty" HeaderText="Qty" SortExpression="Qty" />
              <asp:BoundField DataField="MTF" HeaderText="MTF" SortExpression="MTF" />
              <asp:BoundField DataField="Status" HeaderText="Status" SortExpression="Status" />
            </Columns>
            <EditRowStyle BackColor="#999999" />
            <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" HorizontalAlign="Left" />
            <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#F7F6F3" ForeColor="#333333" HorizontalAlign="Left" Wrap="False" />
            <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#E9E7E2"></SortedAscendingCellStyle><SortedAscendingHeaderStyle BackColor="#506C8C"></SortedAscendingHeaderStyle><SortedDescendingCellStyle BackColor="#FFFDF8"></SortedDescendingCellStyle><SortedDescendingHeaderStyle BackColor="#6F8DAE"></SortedDescendingHeaderStyle></asp:GridView></ContentTemplate></asp:UpdatePanel></td>
        </tr>
      </table>
    </div>
  </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:01:10.720

发布你有问题的实际部分会让你得到更好的答案，而不是这个。

您不需要所有其他部分，只需执行此操作

```
 protected void Page_Load(object sender, EventArgs e)
  {
    if (!Page.IsPostBack)
    {
         //code to execute here only when an action is taken by the user
         //and not affected by PostBack
    }

    //these codes should be affected by PostBack
 } 
```

希望能帮助到你！

**更新**

我相信您的 UpdatePanel 是导致问题的原因。删除 UpdatePanel，一切正常。

顶部的控件没有被更新的原因是因为它们不在 UpdatePanel 中，您从 UpdatePanel 中的控件的代码隐藏中所做的任何更改（例如，通过“选择”链接的 PostBack）将永远不会到达它们。

一种解决方案是在顶部也包含这些控件，例如 UpdatePanel 中的 RequestID 文本框。

希望这可以帮助！

# r - 根据 data.frame 中的连续值模式提取行

> ID：12959493
> 
> 赞同：1
> 
> 时间：2012-10-18T16:37:39.317
> 
> 标签：r, dataframe

我有一个data.frame，d：

```
d<-data.frame(id=c(1,1,1,1,2,2,3,3,3,3), var=c("no", "no", "no", "yes", "no", "yes", "no", "yes", "yes", "yes")) 
```

我想为每个导致“是”的 ID 返回所有“否”行，包括第一个“是”。

期望的结果：

```
id var
1  no
1  no
1  no
1 yes
2  no
2 yes
3  no
3 yes 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:52:22.847

正如@joran 所指出的，包含您尝试过的内容是有礼貌的。它还增加了您的问题获得投票的可能性。这个问题足够基本，即使是对 R 的初步理解也可以得出一些结论。

无论如何，这将做你想要的：

```
d[! duplicated(d) | d$var == 'no', ] 
```

# search - 如何在 ElasticSearch 中索引和存储多种语言

> ID：12959496
> 
> 赞同：13
> 
> 时间：2012-10-18T16:37:51.740
> 
> 标签：search, search-engine, elasticsearch, multilingual

我试图找出 gow 在 ES 中索引以下内容。

我有很多文件是从**各种语言**的网站爬虫而来的。每个文件都有一个类别，如机场、餐厅、河流、海滩等，它的语言如**阿拉伯语、英语**......

doc {语言：“eng”，内容：“这里的东西”，类别：“海滩”}

doc {语言：“vn”，内容：“新潮”，类别：“海滩”}

我想用每种语言索引和搜索文档；

我选择英文选项，并使用查询“here”=> RESUTLS 进行搜索

**我是不是该 ：**

1.  为每种语言设置每个 Elastic Core（每种机器每种语言）。只需复制 ES 即可运行 :)

    例如：创建 elasticsearch_ENGLISH、elastichsearch_VIETNAMESE

2.  使用 ElasticSearch 的每个索引创建每种语言 例如：创建索引

/英语/*输入/*

/越南名字/*类型/* 。当我搜索一些查询时，我只搜索语言索引

**或者以其他我不知道的方式做:)？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-30T15:14:47.460

不确定我是否完全理解您的担忧。

如果您需要搜索整个集群（我的意思是搜索每种语言），您不能为每种语言创建一个设置。

也就是说，您有很多选择：

*   为每种语言创建一个索引，并为每种索引/类型创建一个映射。
*   使用 _analyzer 字段指示文档的语言。请参阅[http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-analyzer-field.html](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-analyzer-field.html)
*   为每种语言使用具有不同分析器的多字段。请参阅[https://www.elastic.co/guide/en/elasticsearch/reference/0.90/mapping-multi-field-type.html](https://www.elastic.co/guide/en/elasticsearch/reference/0.90/mapping-multi-field-type.html)

这不是一个完整的答案，但一些线索可以帮助你......

# html - Zerb Foundation 3 - IE7 修复不起作用？

> ID：12959499
> 
> 赞同：2
> 
> 时间：2012-10-18T16:38:00.690
> 
> 标签：html, cross-browser, internet-explorer-7, responsive-design, modernizr

我在获取 Zerb Foundation 3 的 IE7 修复程序时遇到问题（[在此处找到](http://www.stormconsultancy.co.uk/blog/development/code-snippets/making-zurb-foundation-3-work-on-ie7/)）

我更改了以下内容：

```
 * {
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  *behavior: url(../javascripts/boxsizing.htc); 
} 
```

也：

```
.button.dropdown > ul {
  -webkit-box-sizing: content-box;
  -moz-box-sizing: content-box;
  box-sizing: content-box; *behavior: url(../javascripts/boxsizing.htc); 
  display: none;
  position: absolute;
  left: -1px;
  background: #fff;
  background: rgba(255, 255, 255, 0.95);
  list-style: none;
  margin: 0;
  padding: 0;
  border: 1px solid #cccccc;
  border-top: none;
  min-width: 100%;
  z-index: 40;
} 
```

然而，根据我的 adobe browserlab 测试，它仍然没有在 IE7 中正确显示，现在我不确定它是否只是一个 browserlab 问题，因为我无法运行 IE7。

我还尝试将[Modernizr 的 no-box-sizing](http://modernizr.com/download/#-cssclasses-addtest-css_boxsizing)包括在内，它仍在实施，但似乎也没有帮助。

您可以[在此处查看该站点](http://tst.eclipsecreative.ca/ebc3462/home/)。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T23:06:27.667

我已经解决了这个问题，我正在使用转换为 wordpress 的基础，并将上述内容包含在我的 style.css 顶部作为我的主题，它对我有用。

# asp.net-mvc - VS2012中使用WebDeploy时Web部署任务失败

> ID：12959501
> 
> 赞同：9
> 
> 时间：2012-10-18T16:38:08.927
> 
> 标签：asp.net-mvc, visual-studio-2012, msdeploy

当我在 VS2012-MVC4-Project 上点击发布时，输入我的凭据（本地域）并点击“验证连接”，我收到错误消息：

“Web 部署任务失败。（文件意外结束。以下元素未关闭：结果。第 1 行，位置 586。）”

服务器正在运行 Win Srv 2008 R2、IIS 7.5、Web Deploy 3.0。

使用目标 IIS-Management-Studio 上的导入选项导入并选择 VS 创建的 ZIP 文件将没有任何问题。

奇怪的是，WebDeploy 已经工作了。这个错误来来去去，我不知道是什么原因。

听起来 WebDeploy 服务的响应格式不正确。

我的设置是：服务 UR：http://{NAMEOFSERVER} 站点/应用程序：默认网站

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-09T23:16:07.997

即使我指向正确的网址，我也遇到了同样的问题。事实证明我让 Fiddler 运行，这干扰了请求/响应。

确保您没有运行任何数据包嗅探器或代理服务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T18:07:01.087

知道了。在 IIS 管理器中右键单击“默认网站”并单击“配置 Web 部署发布...”后，我看到我的发布 URL 不是 http://{server}:8172 而是 https:/ /{服务器}：8172。

所以对于每个有这个问题的人：它与 SSL 和证书有关。在发布助手中输入此服务 URI 后，您必须信任该证书。然后它起作用了！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-21T00:24:22.720

我遇到了同样的错误，尽管尝试使用 msdeploy.exe 从一个 Web 服务器拉到另一个（而不是尝试专门从 Visual Studio 推送）。

在我的情况下，错误可能在更改源 Web 服务器上的 SSL 证书后不久就开始了。无论如何，根据一些 MSDN 论坛上的建议，我能够通过在目标机器上重新启动两个服务来解决问题，即 Web 部署代理服务和 Web 管理服务。

# c++ - 是否有必要在朋友功能中使用访问器？

> ID：12959504
> 
> 赞同：1
> 
> 时间：2012-10-18T16:38:21.383
> 
> 标签：c++, friend-function

这是课程

```
class Instructor
{
 public:

Instructor ( int id , string name ) ;// constructor
 ~Instructor ()                       ;

// methods
string               getName           () ;
int                  getID             () ;

private:

int                  id             ;
string               name           ;

friend ostream & operator<< ( ostream & out , Instructor & instructor ) ;
 } ; 
```

这是ostream函数

```
 ostream & operator<< ( ostream & out , Instructor & instructor )
{
out <<  "ID:" << instructor.getID() << "\t  NAME:" << instructor.getName() << "\t OFFERED_COURSES:" ;

return out << endl ; 
```

}

这是 getname 和 getID 方法

```
 string Instructor::getName ()
{
  return this->name ;
}

int Instructor::getID ()
{
  return this->id ;
} 
```

我的问题是为什么我们需要使用 getID 和 getname 函数。我们不能通过写“this->name”来访问名称吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T16:40:17.740

必要不，推荐是。其实根本不需要声明`friend`，更加封装了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T16:41:33.407

与其说是“不能”，不如说是“不应该”。此时此刻，`getID()`只是返回底层变量，但不能保证它不会更改为不同的表示形式。当你遇到它时，尊重封装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:41:53.523

您可以这样做（直接在朋友功能中访问私人成员），但这不是最好的做事方式。使用检查器函数，因为它们应该被编写为公开类的私有状态，*就像编写类以使它们在外部使用一样*。实际的私有字段是为了让类*使用它自己来做它需要在内部做的事情*。

因为您没有在您的操作员功能中使用私人成员，所以您甚至不需要它成为朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:46:36.923

不，朋友实际上是您的类实现的扩展部分，因此可以直接访问它。

如果您将函数或类声明为不属于其实现细节的友元，那可能是对友元的错误使用。

在您的情况下，您实际上可以完全删除流媒体好友重载，但是如果您决定您的类也支持流式传输，并且不想也支持 setter 函数（或交换），那么您将剩下唯一的选择让您的流作为朋友直接写入成员变量。

（请注意，如果流入失败，则应使对象处于默认（新建）状态。

当（最好仅在）需要写入您通常不会直接访问的流成员时，流出应该是朋友。

# objective-c - 替换相册照片中的图像

> ID：12959506
> 
> 赞同：1
> 
> 时间：2012-10-18T16:38:24.263
> 
> 标签：objective-c, ios, image, uiimage

Ih 每个人，实际上我正在从我的相册中拍照。我正在画它，然后当我完成时，我将它保存到我的相册中。它工作得很好。问题当然是当我保存这个新图像时，设备将它保存到另一个图像中。我想知道的是，是否可以修改现有图像？喜欢替换它来创建一个新的？或者如果不可能，我可以删除库中的图像并创建一个新图像吗？

完美的方法是使用 URL。

```
// I take the image
ALAssetsLibrary *assetLibrary = [[ALAssetsLibrary alloc] init];
[assetLibrary assetForURL:asseturl
       resultBlock:^(ALAsset *asset){NSLog(@"I got my image");}
      failureBlock:^(NSError *error){NSLog(@"Error");}]; 
```

// 然后我用一个新的替换它？？？

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:50:58.243

非常感谢组合，没有你我永远找不到它。因此，代码仅在应用程序创建资产时才有效。这是方法：

```
- (void)replaceImageWithUrl:(NSString *)url withImage:(UIImage*)image
{
   ALAssetsLibrary *assetLibrary = [[ALAssetsLibrary alloc] init];
   NSURL *asseturl = [NSURL URLWithString:url];
   [assetLibrary assetForURL:asseturl
              resultBlock:^(ALAsset *asset)
{

           ALAssetRepresentation *assetRepresentation = [asset defaultRepresentation];
           NSLog(@"Image name : %@",assetRepresentation.filename);

           if([asset isEditable])
           {
               NSLog(@"Asset editable");

               [asset setImageData:UIImageJPEGRepresentation(image, 1.0) metadata:asset.defaultRepresentation.metadata completionBlock:^(NSURL *assetURL, NSError *error)
               {
                   if (error)
                       NSLog(@"error %@",error);
                   else
                       NSLog(@"assetURL %@", assetURL);
           }];
           }
           else
           {
               NSLog(@"Not editable");
           }
       }
      failureBlock:^(NSError *error){NSLog(@"FAILED");
}];
} 
```

似乎删除了以前的图像并使用新名称创建了一个新图像，它没有优化但它可以工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-21T06:11:05.263

**使用 PHPhotoLibrary，您可以从相机胶卷中替换特定 PHasset 的图像。**

```
-(void) replaceimagefromcameraroll :(PHAsset*)replaceasset {
    PHAsset *asset = replaceasset;
    NSString *localStr=asset.localIdentifier;
    NSRange range = [localStr rangeOfString:@"/"];
    NSString *newString = [localStr substringToIndex:range.location];
    NSString *appendedString=[NSString stringWithFormat:@"%@%@%@",@"assets-library://asset/asset.JPG?id=",newString,@"&ext=JPG"];
    NSLog(@"%@ phasset ",appendedString);

    NSURL *ReplaceAsseturl = [NSURL URLWithString:appendedString];

    PHFetchResult *result = [PHAsset fetchAssetsWithALAssetURLs:@[ReplaceAsseturl] options:nil];
    PHAsset *assetReplace = result.firstObject;
    if ([assetReplace canPerformEditOperation:PHAssetEditOperationContent])
    {
        [asset requestContentEditingInputWithOptions:nil completionHandler:^(PHContentEditingInput *contentEditingInput, NSDictionary *info) {

            PHContentEditingOutput *contentEditingOutput = [[PHContentEditingOutput alloc] initWithContentEditingInput:contentEditingInput];

            UIGraphicsBeginImageContextWithOptions(_imgPreviewView.bounds.size, NO, 0.0);

            [_imgPreviewView.layer renderInContext:UIGraphicsGetCurrentContext()];
            UIImage * img = UIGraphicsGetImageFromCurrentImageContext();

            UIGraphicsEndImageContext();

            NSData *outputData = UIImageJPEGRepresentation(img, img.scale);

            PHAdjustmentData *adjustmentData = [[PHAdjustmentData alloc] initWithFormatIdentifier:@"AdjustementDataIdentifier" formatVersion:@"1.0" data:outputData];
            contentEditingOutput.adjustmentData = adjustmentData;
            BOOL wrote = [outputData writeToURL:contentEditingOutput.renderedContentURL options:NSDataWritingAtomic error:nil];
            [SVProgressHUD dismiss];
            if (wrote)
            {
                [[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
                    PHAssetChangeRequest *request = [PHAssetChangeRequest changeRequestForAsset:asset];
                    request.contentEditingOutput = contentEditingOutput;

                } completionHandler:^(BOOL success, NSError *error) {
                    // console output : 1
                    if (success){
                        NSLog(@"success : %@", @(success));
                        [SVProgressHUD showSuccessWithStatus:ckSuccesReplaceImage];
                    }
                    else{
                        NSLog(@"error : %@", error);
                    }
                }];
            }
        }];
    }
} 
```

**而且你不要忘记在 Info.plist 文件中添加此代码**

```
<key>NSPhotoLibraryUsageDescription</key>
<string>$(PRODUCT_NAME) would like to access your photo library to let you select a picture.</string> 
```

# php - 通过外部 PHP 在 Moodle 中创建论坛

> ID：12959507
> 
> 赞同：0
> 
> 时间：2012-10-18T16:38:26.407
> 
> 标签：php, forum, moodle, creation

我想**使用 PHP**在 Moodle 课程（由用户指定）中创建一个论坛。

我试图在网上搜索它，但我什么也没找到，即使在 Moodle 网络服务中（我找不到创建论坛的功能）。

**这个想法是用户选择一门课程**（他/她将学习的课程），选择一个“单元”，插入**标题和内容**，**然后提交**（其余选项可以是默认选项） .

我可以从数据库中检索我想要的所有数据，但**我无法创建任何论坛**。我也尝试过**通过 SQL添加它，但我****也**没能做到。

希望这里有人可以帮助我！

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T11:33:52.603

如果您直接想创建一个论坛，那么您需要执行以下步骤 -

1.  将新记录插入 **mdl_forum**表并获取插入的 id
2.  使用以下值将新记录插入**mdl_course_module表 course=courseid,module=7（对于论坛，在 moodle 2.9 中论坛 id 为 9），instance=fourmid,visible=1,showavailability=1**
3.  如果不存在则插入记录或使用以下值将记录更新到**mdl_course_section并获取 sectionid course = courseid, visible = 1, sequence = moduleid(comma seprated),**

4.  更新**mdl_course_module**表并更新sectionid

最后重建moodle course缓存

这是创建新fourm的moodle代码。

```
$forum = new stdClass();
$forum->course = $courseid;
$forum->type = "general";    
$forum->timemodified = time();
$forum->id = $DB->insert_record("forum", $forum);

if (! $module = $DB->get_record("modules", array("name" => "forum"))) {
    echo $OUTPUT->notification("Could not find forum module!!");
    return false;
}
$mod = new stdClass();
$mod->course = $courseid;
$mod->module = $module->id;
$mod->instance = $forum->id;
$mod->section = 0;
if (! $mod->coursemodule = add_course_module($mod) ) {   // assumes course/lib.php is loaded
    echo $OUTPUT->notification("Could not add a new course module to the course '" . $courseid . "'");
    return false;
}
if (! $sectionid = add_mod_to_section($mod) ) {   // assumes course/lib.php is loaded
    echo $OUTPUT->notification("Could not add the new course module to that section");
    return false;
}
$DB->set_field("course_modules", "section", $sectionid, array("id" => $mod->coursemodule));

include_once("$CFG->dirroot/course/lib.php");
rebuild_course_cache($courseid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T14:59:52.560

不幸的是，我没有 50 分可评论，因此 Jitendra 出色答案的附录作为“答案”。在 Moodle 2.4 上， add_mod_to_section() 已弃用，因此应将其更改为：

```
$sectionid = course_add_cm_to_section ($courseid, $mod->coursemodule, $sectionid, null); 
```

# android - android自定义联系人视图

> ID：12959509
> 
> 赞同：1
> 
> 时间：2012-10-18T16:38:48.350
> 
> 标签：android, view, contacts

我正在尝试为 android 上的应用创建自定义联系人视图。以下代码是我在搜索主题时在网站上找到的。我遇到了一个例外，我不知道为什么。

这是联系人类：

```
public class Contact {
public Contact(long id, String name, String photo) {
    this.id = id;
    this.name = name;
    this.photo = photo;
}
public long id;
public String name;
public String photo;
public long getId() {
    return id;
}
public void setId(long id) {
    this.id = id;
}
public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}
public String getPhoto() {
    return photo;
}
public void setPhoto(String photo) {
    this.photo = photo;
}
} 
```

这是适配器的代码：

```
public class ContactsAdapter extends BaseAdapter {
Vector<Contact> contactList;
Activity activity;

public ContactsAdapter(Activity activity){
    this.activity = activity;
    fillContacts();
}

public void fillContacts() {
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = { ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME,
            ContactsContract.Contacts.PHOTO_ID };
    Cursor cursor = activity.managedQuery(uri, projection, null, null, null);
    contactList = new Vector<Contact>();
    if (cursor.moveToFirst()){
        do {
            contactList.add(new Contact(cursor.getLong(cursor.getColumnIndex(projection[0])), cursor.getString(cursor.getColumnIndex(projection[1])), cursor.getString(cursor.getColumnIndex(projection[2]))));
        }while (cursor.moveToNext());
    }
}

@Override
public int getCount() {
    return contactList.size();
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return contactList.get(position).id;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view==null){
        LayoutInflater li = (LayoutInflater) activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = li.inflate(R.layout.contact, parent);
    }

    TextView contactName = (TextView)view.findViewById(R.id.etName);
    ImageView contactPhoto = (ImageView) view.findViewById(R.id.ivPhoto);
    CheckBox checkBox = (CheckBox) view.findViewById(R.id.checkBox1);
    contactName.setText(contactList.get(position).name);

    if (contactList.get(position).photo == null){
        contactPhoto = (ImageView) view.findViewById(R.id.ivPhoto);
        contactPhoto.setImageResource(R.drawable.ic_launcher);
    }else{
        Uri contactUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, contactList.get(position).id);
        Uri contactPhotoUri = Uri.withAppendedPath(contactUri, Contacts.Photo.CONTENT_DIRECTORY);
        contactPhoto.setImageURI(contactPhotoUri);
    }
    return view;
}

} 
```

这是活动代码：

```
public class ContactsActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts);
    ContactsAdapter ca = new ContactsAdapter(this);
    ListView contacts = (ListView) findViewById(R.id.lvContacts);
    contacts.setAdapter(ca);
}
} 
```

谁能看到问题？

# wpf - 我如何知道 Crystal Reports 已完成渲染？

> ID：12959511
> 
> 赞同：3
> 
> 时间：2012-10-18T16:39:03.543
> 
> 标签：wpf, crystal-reports

我有一个 Crystal Reports 13 wpf 控件，我正在加载一个报表和数据集中的数据：

```
ReportDocument report = new ReportDocument();
if (report != null)
{
  report.Load(ReportFileName);
  report.SetDataSource(DataSet);
  reportViewer.ViewerCore.ReportSource = report;
} 
```

为了知道控件何时完成渲染，我可以处理什么事件？查看器导出：

```
public event PageMouseEventHandler ClickPage;
public event PageMouseEventHandler DoubleClickPage;
public event DrillEventHandler Drill;
public event DrillSubreportEventHandler DrillDownSubreport;
public event NavigateEventHandler Navigate;
public event RefreshEventHandler Refresh;
public event SearchEventHandler Search;
public event RoutedEventHandler SelectionChange;
public event RoutedEventHandler ViewChange;
public event ZoomEventHandler ViewZoom; 
```

ViewerCore 仅导出：

```
public event ExceptionEventHandler Error; 
```

这些似乎都不合理。我也曾短暂地使用过 ReportClientDocument。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T19:57:47.583

为后代：

```
DependencyPropertyDescriptor p = DependencyPropertyDescriptor.FromProperty(SAPBusinessObjects.WPF.Viewer.ViewerCore.TotalPageNumberProperty, typeof(SAPBusinessObjects.WPF.Viewer.ViewerCore));
p.AddValueChanged(reportViewer.ViewerCore, OnPageCountChanged); 
```

由于在呈现该页面后正确更新了 TotalPageNumber 属性...

```
private void OnPageCountChanged(object sender, EventArgs e)
{
   //do whats needed
} 
```

您知道控件何时完成渲染。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T11:01:53.513

在 Crystal Reports 13 中有一个 PageChanged 事件，由于某种原因没有在 UI 中公开（它有一个`Browsable(false)`属性）。我需要缩放报告，而这个事件是我能做到的唯一非 hacky 方式：就做

```
viewer.PageChanged += Viewer_PageChanged; 
```

在表单构造函数中，然后添加

```
private void Viewer_PageChanged(object sender, EventArgs e)
{
    viewer.Zoom(2);
} 
```

到您的私有方法。（`viewer`是`CrystalReportViewer`表单上的组件。）

# jquery - jQuery 自动完成 + AngularJS 的问题

> ID：12959516
> 
> 赞同：20
> 
> 时间：2012-10-18T16:39:14.880
> 
> 标签：jquery, jquery-ui, angularjs, jquery-autocomplete

我在我的页面上使用 AjgularJS 并希望添加一个字段以使用来自 jqueryui 的自动完成功能，并且自动完成功能不会触发 ajax 调用。

我已经在没有 angular（ng-app 和 ng-controller）的页面上测试了脚本，它运行良好，但是当我将脚本放在带有 angularjs 的页面上时，它停止工作。

任何的想法？

jquery脚本：

```
$(function () {

    $('#txtProduct').autocomplete({
        source: function (request, response) {

            alert(request.term);

        },
        minLength: 3,
        select: function (event, ui) {

        }
    });

}); 
```

*   有趣的注意事项：当我在 Chrome 检查器上调用脚本时，自动完成功能开始工作！！！
*   版本：AngularJS：1.0.2 - JqueryUI：1.9.0

**结论：** 来自 jQueryUI 的自动完成小部件必须从 AngularJS 的自定义指令内部初始化，例如：

**标记**

```
<div ng-app="TestApp">
    <h2>index</h2>
    <div ng-controller="TestCtrl">

        <input type="text" auto-complete>ddd</input>

    </div>
</div> 
```

**角脚本**

```
<script type="text/javascript">

    var app = angular.module('TestApp', []);

    function TestCtrl($scope) { }

    app.directive('autoComplete', function () {
        return function postLink(scope, iElement, iAttrs) {

            $(function () {
                $(iElement).autocomplete({
                    source: function (req, resp) {
                        alert(req.term);
                    }
                });
            });

        }
    });

</script> 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-22T21:29:36.263

Perhaps you just need to do it in an "angular way"... that is, to use a directive to set up your DOM elements and do event bindings, use a service to get your data, and use a controller to do your business logic... all while leveraging the dependency injection goodness that is Angular...

A service to get your autocomplete data...

```
app.factory('autoCompleteDataService', [function() {
    return {
        getSource: function() {
            //this is where you'd set up your source... could be an external source, I suppose. 'something.php'
            return ['apples', 'oranges', 'bananas'];
        }
    }
}]); 
```

a directive to do the work of setting up the autocomplete plugin.

```
app.directive('autoComplete', function(autoCompleteDataService) {
    return {
        restrict: 'A',
        link: function(scope, elem, attr, ctrl) {
                    // elem is a jquery lite object if jquery is not present,
                    // but with jquery and jquery ui, it will be a full jquery object.
            elem.autocomplete({
                source: autoCompleteDataService.getSource(), //from your service
                minLength: 2
            });
        }
    };
}); 
```

And using it in your markup... notice the ng-model to set a value on the $scope with what you select.

```
<div ng-controller="Ctrl1">
    <input type="text" ng-model="foo" auto-complete/>
    Foo = {{foo}}
</div> 
```

That's just the basics, but hopefully that helps.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-23T16:37:50.037

I had to do a bit more work to get this working using an $http service.

The service:

```
app.factory("AutoCompleteService", ["$http", function ($http) {
    return {
        search: function (term) {
            return $http.get("http://YourServiceUrl.com/" + term).then(function (response) {
                return response.data;
            });
        }
    };
}]); 
```

The directive:

```
app.directive("autocomplete", ["AutoCompleteService", function (AutoCompleteService) {
    return {
        restrict: "A",
        link: function (scope, elem, attr, ctrl) {
            elem.autocomplete({
                source: function (searchTerm, response) {
                    AutoCompleteService.search(searchTerm.term).then(function (autocompleteResults) {
                        response($.map(autocompleteResults, function (autocompleteResult) {
                            return {
                                label: autocompleteResult.YourDisplayProperty,
                                value: autocompleteResult 
                            }
                        }))
                    });
                },
                minLength: 3,
                select: function (event, selectedItem) {
                    // Do something with the selected item, e.g. 
                    scope.yourObject= selectedItem.item.value;
                    scope.$apply();
                    event.preventDefault();
                }
            });
        }
    };
}]); 
```

The html:

```
<input ng-model="YourObject" autocomplete /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-25T09:47:36.063

HTML

```
 <input type="text" class="form-control ml-2" employeesearchautocomplete ng-model="employeeName" name="employeeName"> 
```

JS

```
 var myApp = angular.module("employeeSearchModule",[]);

        myApp.controller("employeeSearchController",function($scope,$http){

            $scope.message= "Welcome to angular js..."

        });

        myApp.directive('employeesearchautocomplete', function() {
            return {
                restrict: 'A',
                require : 'ngModel',
                link : function (scope, element, attrs, ngModelCtrl) {
                      element.autocomplete({
                          source : function(request, response) {
                            $.ajax({
                                type : "POST",
                                url : "searchEmployee.html",
                                data : request,
                                success : response,
                                dataType : 'json'
                            });
                        },
                        select : function(event, ui) {
                            event.preventDefault();
                            if (ui.item.value == '-1') {
                                scope.employeeName ='';
                                scope.$apply();
                            } else {
                                scope.employeeName = ui.item.label;
                                scope.$apply();

                            }
                        },
                        focus : function(event, ui) {
                            event.preventDefault();
                            scope.employeeName = ui.item.label;
                            scope.$apply();
                        },
                        change : function(event, ui) {
                            if (!ui.item) {
                                scope.employeeName ='';
                                scope.$apply();

                            }
                        }
                      },{
                            minLength : 2
                      });

                }
            }
        }); 
```

Order of script files import

*   All your jquery
*   AngularJs library
*   your angular script for autocomplete

I hope this will help someone.

# javascript - JavaScript 日历将日期显示为 DD/MM/YYYY？

> ID：12959517
> 
> 赞同：3
> 
> 时间：2012-10-18T16:39:18.473
> 
> 标签：javascript, jquery-ui

我对 JavaScript 的了解很浅，需要提供一个日历让用户选择日期。

jQuery DatePicker 看起来不错，但[该示例](http://jqueryui.com/datepicker/#localization)没有将日期格式化为 DD/MM/YYYY 而不是 MM/DD/YYYYI。

有人知道如何让它按计划工作，它不能，还有其他可用的轻量级 JavaScript 解决方案吗？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:42:28.507

[请参阅http://jqueryui.com/datepicker/#date-formats](http://jqueryui.com/datepicker/#date-formats)上的日期格式示例

```
$(function() {
    $( "#datepicker" ).datepicker({dateFormat: "dd/mm/yy"});
}); 
```

# git - 如何删除对 git 的提交

> ID：12959520
> 
> 赞同：10
> 
> 时间：2012-10-18T16:39:27.663
> 
> 标签：git, github, git-commit

我想摆脱远程分支上的一些提交。例如，如果历史看起来像：

```
A->B->C->D 
```

我想删除 C 和 D 给我：

```
A->B 
```

B 现在 HEAD 在哪里？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T17:07:34.057

我将为您列出所有不同的删除提交的方法以及何时应该使用它们。 **在您执行任何这些操作之前，我强烈建议您将您的分支复制到另一个分支，以确保安全。**

这样做`git checkout -b copy_branch`，然后通过这样做切换回原来的分支`git checkout the_branch_i_want_to_delete_from_again`

如果你已经推送过，就像你的情况一样，你可以跳到#3，但如果你还没有推送过，你可以看看 1 和 2。

**1）我还没有推送或正在单独工作，我要删除的提交是最近的提交：**

如果我有：A---B---C---D

我想删除C和D。

然后做`git reset --hard sha_of_B`

结果是：A---B

如果你已经推送了，就像你的情况一样，你仍然可以这样做然后做 a `git push --force origin the_branch`，但不建议这样做，因为你可能会弄乱其他人在这个项目上工作。您应该改为遵循＃3。

**2）我还没有推送或正在单独工作，我想要删除的提交在我的分支中间：**

如果我有：A---B---C---D

我想删除C。

```
git rebase -i sha_of_B_the_commit_before_the_one_i_want_to_delete 
```

这打开了非常有用的交互式 rebase 屏幕：

```
pick sha_of_C C
pick sha_of_D D 
```

正如 git 提示你**“#如果你在这里删除一行，提交将丢失。”** 这就是我们要做的。

我删除了该行`pick sha_of_C C`，这给我留下了：

```
pick sha_of_D D 
```

我用 :wq 将它保存在 vi 中，结果是：

A---B---D

如果你已经推送了，就像你的情况一样，你仍然可以这样做然后做 a `git push --force origin the_branch`，但不建议这样做，因为你可能会弄乱其他人在这个项目上工作。您应该改为遵循＃3。

**3）我已经推动并且我正在与其他人一起工作：**

如果我有：A---B---C---D，我想删除 C 和 D。

然后做

```
git revert sha_of_D 
```

请注意，您可能必须在此处解决冲突然后提交。然后做

```
git revert sha_of_C 
```

请注意，您可能必须在此处解决冲突然后提交。

这导致：

A---B---C---D---Reverted_D---Reverted_C

这是安全的推送，因为您实际上只是添加了一个反转所有 C 和 D 更改的提交，实质上是删除它。

**`git push --force` 除非绝对必要，否则您通常应该不惜一切代价避免这样做。但是，如果您要进行推送，使用保护，您绝对应该在这样做之前复制您的分支。如果您已经完全推动，那么坚持＃3通常是一个很好的规则。**

希望这会有所帮助。

担

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T16:43:44.977

删除最后一次提交

```
$ git reset --hard HEAD^ 
```

删除最近的 2 个提交

```
$ git reset --hard HEAD~2 
```

您可以在本地下载分支。然后删除提交并执行 push --force

```
$ git pull origin
$ git checkout origin/<branchname>
$ git checkout -b <branchname>
$ git reset --hard HEAD~2
$ git push origin <branchname> --force 
```

# mysql - 在 mySQL 中使用数组获取字符串值

> ID：12959521
> 
> 赞同：1
> 
> 时间：2012-10-18T16:39:28.380
> 
> 标签：mysql, arrays, select

我需要在数组中获取包含参数传递的值的所有行。

如果我在列中有一个值（如“loren”或“ipsum”），我可以使用：

```
SELECT * FROM TableName WHERE FIND_IN_SET (Column, 'loren, ipsum') > 0 
```

一切都会奏效。

但是，如果我的专栏包含诸如“Loren Ipsum Dolor”之类的内容，则`FIND_IN_SET`不起作用。考虑到列中的所有单词，如何检索值？

# java - 使用弹簧数据 jpa 强制插入

> ID：12959523
> 
> 赞同：3
> 
> 时间：2012-10-18T16:39:35.820
> 
> 标签：java, spring-data-jpa

我想强制 CrudRepository#save(entity) 插入一个新实体，而不是先选择实体并在主键已经存在时更新它。

我会试着举个例子

```
public class Lock
{
    @Id
    @Column
    private UUID uuid;
    ...
}

UUID id = UUID.randomUUID();
Lock firstLock = new Lock(id);
Lock secondLock = new Lock(id);
repo.save(firstLock);
repo.save(secondLock); 
```

发生的情况是，第一个保存操作执行以下两个语句

```
Hibernate: select lock0_.uuid as uuid5_0_, lock0_.expires as expires5_0_ from locks lock0_ where lock0_.uuid=?
Hibernate: insert into locks (expires, uuid) values (?, ?) 
```

而第二次调用 save 执行更新语句

```
Hibernate: select lock0_.uuid as uuid5_0_, lock0_.expires as expires5_0_ from locks lock0_ where lock0_.uuid=?
Hibernate: update locks set expires=? where uuid=? 
```

我如何确保第二次调用 save 不会简单地更新以前存储的记录？我希望它执行插入语句并失败，因为已经存在相同的主键

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:17:19.877

Spring Data JPA 中不允许强制插入 id 不为 null 的实体。

通常，Id 生成器用于确保生成的 id 是唯一的主键。（例如@GeneratedValue（策略= GenerationType.AUTO））

我认为这种行为是正确的。在 ORM 中，使用 new 运算符表示有意创建一个新实体，并隐含要求为其分配唯一 ID。

但是，如果您想尝试一下，您可以查看自定义的@GenericGenerator。

[http://www.georgestragand.com/jpaseq.html](http://www.georgestragand.com/jpaseq.html)

# php - 未注册提交，安全问题

> ID：12959526
> 
> 赞同：0
> 
> 时间：2012-10-18T16:39:57.587
> 
> 标签：php, security

我创建了一个简单的脚本，允许用户在我的网站上发布消息、问题或讨论。我还没有网上任何东西，所以我不能给你看，但我不想要的一件事是注册。

我想要一种简单、精简和快速的方式，让任何人都可以访问我的网站并发布消息，其他人可以回复（也无需注册）。

我的问题是关于安全的。我这样做是为了让一个人只有在满足以下条件时才能编辑自己的消息：

1.  IP 地址`($_SERVER['REMOTE_ADDR'])`与用于提问的 IP 地址相匹配（我将其存储在数据库中）。
2.  时间不超过 20 分钟。

我想知道这将是多么容易打破，以及我怎样才能使它变得更强大。谈到安全性，我绝对是个新手，我现在声明我对这方面的开发没有真正的兴趣，我更像是一个客户端/服务器开发人员，但我的强项是 JavaScript。

我也不太了解网络。欺骗 IP 地址有多容易，找到两个具有相同地址的用户有多普遍？我正在考虑制作一个会话 ID，它将作为第三个子句存储在临时数据库中，该子句必须存在才能进行编辑。当然，这意味着用户将无法离开网站并返回编辑。

谁能给我一些关于最好的方法的建议？

注意：我想明确表示我绝对不想要注册，这将完全消除这个问题。我想要一个免费使用的公共站点，任何人都可以简单地使用它。

注意 2：我还通过一段简单的 JavaScript 解决了机器人问题，要求用户与网站进行交互（比 CAPTCHA 更快），所以这里不用担心。

亲切的问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:44:26.053

**恕我直言：**

使用连接到同一路由器的两台计算机的两个用户将无法通过检查，因为从 PHP 脚本的角度来看，这两个用户将具有相同的外部 IP。

```
 __________         __________
| ________ |       | ________ |
||        ||       ||        ||
||________||       ||________||
|__________|       |__________|
     /\                 /\
    ----               ----
192.168.1.101      192.168.1.102

      |                 |
       \               /
        \             /
         \           /
          \         /
           \       /
            \     /
         ____________
        |            |   137.204.xxx.xxx <- This is what you see in your script
        |   ROUTER   |  -----------------  Internet
        |____________| 
```

* * *

但是当大量**垃圾邮件发送者**来到您的网站并且...您知道会发生什么时，我会更加担心。

PS 垃圾邮件发送者**不是**必需的机器人，很多*人*实际上是为了完成这项工作而获得报酬。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:50:31.483

我认为处理此问题的更好方法是生成唯一的会话 ID 并将其存储一段时间（在您的情况下为 20 分钟）。如果您将多台计算机连接到同一路由器，您的方法将不起作用，因为`($_SERVER['REMOTE_ADDR'])`实际上会返回路由器 IP 地址。这可能失败的另一种可能情况是，如果他们的路由器跳跃 IP 地址，那么该人将无法编辑他们的帖子。我承认这是一个非常不可能的情况，但是嘿，你永远不知道。

您可以通过许多不同的方式生成唯一的会话 ID。一种方法是

```
session_start()
if (!isset($_SESSION['uniqueID'])){
   $_SESSION['uniqeID'] = uniqid(mt_rand(), true);
} 
```

您可以将所有唯一 ID 存储在服务器上 20 分钟，当用户想要做某事时，您可以对照此列表进行检查。这是一种相当复杂的方式。你可以只使用cookies。另外我建议您在一段时间内限制每人的帖子数量。否则垃圾邮件发送者会对您的帖子板造成严重破坏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:43:42.553

AFAIK 您的方法是正确的，您可以将其与 cookie 结合使用，以避免同一 ip 上的多用户问题（当然在您的网站上说明这一点）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:44:39.750

欺骗 IP 地址很容易，但我认为这不会是您的大问题*。*

问题是，如果多个用户位于同一路由器后面，他们可能会从同一外部 IP 地址发帖。当我的兄弟和我注册同一个论坛时，我遇到了这个问题。我听说有人在上同一所大学的人被禁止 IP 时对 SO 本身有问题。

您最好的选择是创建一个 cookie，`$_SESSION`以便您可以跟踪单个用户。

# perl - Perl将两个数字连接成另一个？

> ID：12959534
> 
> 赞同：2
> 
> 时间：2012-10-18T16:40:08.580
> 
> 标签：perl, integer, concatenation

我不想添加数字，而是“连接”它们并将值解释为单个数字。例如，

```
$var1 = 567;
$var2 = 1111;

#trying to explain what I wanna do with java-style syntax
$var3 = parseInt($var1 CONCAT $var2); 

print $var3; #5671111 and is of type integer 
```

我该怎么办？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:50:18.827

在 Perl 中，整数是看起来像整数的东西。因此字符串连接可以给出一个整数。

```
my $var3 = $var1 . $var2;
print $var3 * 2, "\n";   # 11342222 
```

因此，您可以强制 Perl 存储整数，因为 Java 会`int`使用以下命令存储整数：

```
my $var3 = 0+( $var1 . $var2 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:41:13.180

尝试这样做：

```
my $var1 = 567;
my $var2 = 1111;

print $var1 . $var2 . "\n"; 
```

在`Perl`中，`.`均值串联。

我们也可以这样编码：

```
print "$var1$var2\n"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:42:39.693

你应该知道 perl 没有数据类型。`"1234"`出于所有意图和目的，字符串和`1234`perl 中的数字之间确实没有区别。Perl 可以无缝切换到上下文所需的任何数据类型。

所以你需要的只是字符串连接：

```
my $var3 = "$var1$var2"; 
```

或者

```
my $var3 = $var1 . $var2; 
```

使用 perl，总有更多方法可以做到这一点：

```
my $var3 = sprintf "%d%d", $var1, $var2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T18:04:42.303

有趣的是，您可以连接以获取数字并将该值用作*同一表达式的*一部分：

```
my $a = '123';
my $b = '456';
my $c = "$a$b" * 2;
$c    = ( $a . $b ) * 2; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T16:47:05.363

Perl 足够聪明，可以将两个整数字符串的连接解释为一个整数。

所以只需使用点运算符来连接字符串。

```
$bigstring = $string1.$string2; 
```

在你的情况下

```
$var3=$var1.$var2 ; 
```

# jquery - 如何在远程 jQuery 验证中关闭响应缓存？

> ID：12959535
> 
> 赞同：3
> 
> 时间：2012-10-18T16:40:12.453
> 
> 标签：jquery, jquery-validate

我有这样的问题：

我正在使用 jQuery 验证插件来检查登录凭据。如果用户为此用户输入了错误的电子邮件但输入了正确的密码并推送提交 - 验证失败。然后用户输入正确的电子邮件 - 使用相同的先前参数发送请求。

我试过这段代码，但它不起作用：

```
$("#user_email").change(function(){
$("#user_email").removeData("previousValue");
});
...jQuery validation code ...
$(".login").validate({
    rules: {
        "user[email]":{
            email: true,
            required: true
        },
         'user[password]': {
            required: true,
            minlength: 6,
            remote: {
             url: url_name.concat("checkpass"),
    //url: "http://91.228.126.168:3000/checkpass",
            type: "get",
            data: {
              email: function() { return $("#user_email").val(); 
              }
            }

          }
        }
    }
    }) 
```

我无法理解我做错了什么。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:41:28.490

看一下[$.ajaxSetup()](http://api.jquery.com/jQuery.ajaxSetup)函数，它有一个“**缓存**”参数，允许您配置有关缓存的 jQuerys 行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:26:46.667

使用 post 而不是 get。帖子永远不会被缓存。获取总是被缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:20:34.120

尝试这个：

```
$("#user_password").change(function(){
 // alert('user_password')
$("#user_email").removeData("previousValue");
$("#user_password").removeData("previousValue");
 });

   $("#user_email").change(function(){
  //alert('user_email')
$("#user_email").removeData("previousValue");
$("#user_password").removeData("previousValue");
}); 
```

# windows-8 - WinJS IListDataAdapter 在循环中被调用

> ID：12959539
> 
> 赞同：1
> 
> 时间：2012-10-18T16:40:17.630
> 
> 标签：windows-8, winjs

我已经实现了从异步 WinRT 源填充对象的 IListDataAdapter（使用 VirtualizedDataSource）。它几乎按预期工作。我从我的数据源设置了一个具有增量加载的 ListView。看起来 itemsFromIndex() 方法被 WinJS 库在某种无限循环中重复调用。

我简化了我的数据适配器，使其包含对填充列表的引用（以确保我的异步调用没有造成问题）。当我水平滚动时，列表视图会尝试填充自己，但很多时候，它最终会在内部进入一些无限循环。

当我滚动列表视图时，它开始加载项目模板。它不束缚他们。我怎么知道它在循环中？断点和下面的console.log。它只是继续疯狂地消耗我的处理器。有谁知道这里发生了什么？

这是我的 itemsFromIndex 的代码。没什么特别的。

```
itemsFromIndex: function (requestIndex, countBefore, countAfter) {

    var length = this._isupportincrementalloadcollection.size;

    if (requestIndex >= length) {
        return WinJS.Promise.wrapError(new WinJS.ErrorFromName(WinJS.UI.FetchError.doesNotExist));
    }

    var start = Math.max(requestIndex - countBefore, 0);
    var end = Math.min(requestIndex + countAfter, length - 1);

    var items = [];
    for (var i = start; i <= end; i++) {
        var item = this._itemFromIndex(i);
        items.push(item);
    }

    console.log("returning");
    return WinJS.Promise.wrap({
        absoluteIndex: requestIndex,
        atEnd: end === length - 1,
        atStart: start === 0,
        items: items,
        offset: requestIndex - start,
        totalCount: length
    });
} 
```

我的 ListView 设置了以下选项：

```
loadingBehavior: 'incremental', 
pagesToLoad: 4, 
automaticallyLoadPages: true, 
pagesToLoadThreshold: 1, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T06:59:26.553

我的意思是将其添加为原始答案的评论，但正确格式化太多了。无论如何，我今天遇到了这个问题，想澄清一下：

`IIListDataAdapter.itemsFromIndex()`必须返回一个`Promise`本身返回一个`IFetchResult`：

```
IFetchResult = {
    items: [Array],
    offset: [int],
    totalCount: [int]
}; 
```

`IFetchResult.items`必须是对象数组`IItem`：

```
IItem = {
    key: [string],
    data: [Object]
}; 
```

该`key`属性不需要是唯一的，它只需要是项目索引的字符串化版本（即。`42.toString();`）。

MSDN 上的教程并没有很好地说明必要的成分，但我发现他们的示例源中的**场景 4可以。**

试一试：http : [//code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128](http://code.msdn.microsoft.com/windowsapps/ListView-custom-data-4dcfb128)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T21:55:03.293

原来适配器非常好，问题是钥匙。IListDataAdapter 期望返回的数据是一个包含对象键和对象本身的对象。密钥必须是唯一的字符串。如果键不是字符串，就会发生坏事。如果密钥不是唯一的，坏事就会发生。在上面的代码中，您看不到键的使用位置，但我有一个正在使用的键映射函数。

# php - 如何检查变量是否应该转到 blob 数据类型

> ID：12959540
> 
> 赞同：0
> 
> 时间：2012-10-18T16:40:19.207
> 
> 标签：php, mysql, pdo, database-connection

我有一个通用的php函数将数据插入mysql。

```
public static function query($sql) {
    self::CONNECT ();

    $numargs = func_num_args ();
    $arg_list = func_get_args ();
    //start from 1st parameter as 0th parameter is the query

    for($i = 1; $i < $numargs; $i ++) {
        //echo $arg_list[$i]." - ";
        if (is_int ( $arg_list [$i] )) {
            $query->bindParam ( $i, $arg_list [$i], PDO::PARAM_INT );
        } else {
            $query->bindParam ( $i, $arg_list [$i], PDO::PARAM_STR );
        }
    }

    $query->execute ();

    return $query;
} 
```

在这里，我想知道如何检查给定的参数是否为`BLOB`数据类型？这样我就可以`PDO::PARAM_LOB`在打电话的时候给它`bindParam`

# model-view-controller - 获取主干集合时显示加载条/微调器的最佳方式是什么？

> ID：12959541
> 
> 赞同：0
> 
> 时间：2012-10-18T16:40:20.133
> 
> 标签：model-view-controller, events, backbone.js

再会！

最近我进入了骨干网/需求，并开始学习一些非常酷的东西。我正在尝试了解在获取主干集合时显示加载条/微调器的最佳做法是什么。以下是我发现使用的一些策略，用于触发集合上的获取/同步事件：

**方法 1：**在应用程序启动之前覆盖主干的同步方法，并在该集合上触发“同步”事件

**方法 2：**在应用程序启动之前覆盖主干的 fetch 方法，并在该集合上触发 'fetching' 事件

**方法三：**当一个集合被定义时，重写 fetch() 方法并触发一个事件 'fetching'，这样任何实例都可以被监听获取

**方法四：**有人建议使用事件聚合，这样当视图调用 fetch() 获取集合时，该视图会触发事件。

这是我的情况：

*   假设我有一个集合 C
*   有 2 个视图 V1 和 V2 可以访问它
*   V1 可以在 C 上调用 fetch 但 V2 不能
*   当 C 开始 fetch 时，只有 V2 应该显示一个加载栏，并在 C 上调用 reset() 时将其关闭
*   还可以有其他视图 V3、V4 等，在获取 C 时可能也需要加载栏

显示加载栏的最佳机制是什么，保持严格的 MVC 模式完好无损？

**选项 1：**视图是否应该监听集合上的“同步”事件？问题：如果调用了其他的 fetch()、save()，加载栏可能会显示

**选项 2：**视图是否应该监听集合上的 'fetch()' 事件并采取相应的行动？

**选项 3：**一个视图是否应该在对集合调用 fetch() 时通知另一个视图？

**选项 4：**视图应该调用窗口上的获取方法还是事件聚合器？

也欢迎其他方法和选项。您的建议和意见将是最好的资源。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T07:00:32.713

在 Backbone.View 的上下文中，例如：

```
initialize: function() {
   this.state_loading();

   // assuming this.collection is your collection which is not fetched yet...       
   this.collection.bind('reset', this.state_loaded, this);
   this.collection.fetch();
},

state_loading: function() {
   this.el.addClass('st-loading');
},

state_loaded: function() {
   this.el.removeClass('st-loading');
} 
```

现在`.st-loading`View 元素上的类将在您需要的任何地方简单地显示一个微调器，例如

```
.ajax-spinner { backgrund: url('...'); display: none; }
.st-loading .ajax-spinner { display: block; } 
```

现在想想你的选择：

**方法 1：**不要覆盖库。下一个在生产中处理您的代码的人会因此而诅咒您。

**方法 2：**最好在集合上触发自定义事件，不需要覆盖任何本机 Backbone 方法。同样，只有当您无法提出好的解决方案时，才会进行这种类型的黑客攻击。

**方法 3：**我猜您的想法是每次加载某些内容时您都想显示一个微调器？我会为你的用户感到难过。

**方法 4：**如果这发生在一个视图中，则不需要使用事件中心。最后，您可以在集合上触发自定义事件，并且父小部件可以订阅它。另一个考虑因素是您很可能需要在不同类型的元素中显示微调器，并且您需要为它们传递引用或选择器以用于不同的视图。现在如果你想要一个通用的解决方案，当然你可以给你的微调器提供相同的类应用程序，但是如果有一天你想删除它们，你会很头疼。您最好将这些内容本地化到您的视图中。

我们在一个由 Backbone 驱动的大型应用程序中遇到了类似的情况。为此，我们有一个扩展，我们将其应用于需要显示微调器的视图。它看起来有点像这样：

```
var state_loading: function() {
  if (arguments.length === 0 || arguments[0] === true) {
    this.el.addClass('st-loading');
  } else {
    this.el.removeClass('st-loading');
  }
}

var SomeView = Backbone.View.extend({
  initialize: function(options) {
    this.options = _.extend({}, this.options || {}, options || {});
    this.collection = this.options.collection;
    this.collection.bind('reset', this.render, this);
    this.state_loading(true);
    this.collection.fetch();
  },

  render: function() {
    this.state_loading(false);
    // your code...
  }
});

_.extend(SomeView.prototype, state_loading); 
```

# spring - 使用依赖注入时，如何忽略缺失的属性？

> ID：12959544
> 
> 赞同：3
> 
> 时间：2012-10-18T16:40:23.597
> 
> 标签：spring, dependency-injection

我正在尝试使我的应用程序向后兼容至少一个以前的版本。我遇到的最大问题是旧属性文件中不存在的预期属性。

例如，假设旧的属性文件如下所示：

```
prop.old=some text 
```

新的属性文件如下所示：

```
prop.old=some text
prop.new=some new text 
```

新的 app-context.xml 的相关部分如下所示：

```
<beans:bean id="myClass" class="com.mycompany.MyClass">
    <beans:property name="oldThing" value="${prop.old}" />
    <beans:property name="newThing" value="${prop.new}" />
</beans:bean> 
```

显然，这将在运行时爆炸。有没有办法检查属性是否存在，如果不存在，则使用空字符串代替？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:23:06.743

从 3.0 开始，您可以在`PropertyPlaceholderConfigurer`

```
<context:property-placeholder ignore-unresolvable="true" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T23:27:31.370

这很棘手，因为如果您尝试忽略缺失的属性，您无法判断缺失的属性是强制性的还是可选的。所以我更喜欢编程的方式来做到这一点。

首先，有一个基类来访问任何属性文件：

```
public abstract class ClasspathProperties {

    private final Environment environment;

    public ClasspathProperties(final Environment environment, final String propertiesLocation) {
        try {
            final PropertySource<?> propertySource = new ResourcePropertySource(propertiesLocation);
            verifyProperties(propertySource);
            ((ConfigurableEnvironment) environment).getPropertySources().addFirst(propertySource);
            this.environment = environment;
        } catch (final IOException e) {
            throw new IllegalStateException("reading properties from location " + propertiesLocation + " failed", e);
        }
    }

    public Environment getEnvironment() {
        return environment;
    }

    protected abstract void verifyProperties(PropertySource<?> propertySource);

    protected void verifyPropertyExistence(final PropertySource<?> propertySource, final String propertyName,
            final String propertyDescription) {
        final Object propertyValue = propertySource.getProperty(propertyName);
        if (propertyValue == null || "".equals(propertyValue)) {
            throw new IllegalStateException(propertyDescription + " is not set");
        }
    }

} 
```

然后您可以在设置属性之前读取指定的属性文件并进行验证：

```
public class ClasspathDatabaseProperties extends ClasspathProperties implements DatabaseProperties {

    public ClasspathDatabaseProperties(final Environment environment) {
        this(environment, "classpath:/config/db-config.properties");
    }

    public ClasspathDatabaseProperties(final Environment environment, final String propertiesLocation) {
        super(environment, propertiesLocation);
    }

    @Override
    protected void verifyProperties(final PropertySource<?> propertySource) {
        verifyPropertyExistence(propertySource, "mysql.host", "MySQL DB host");
        verifyPropertyExistence(propertySource, "mysql.port", "MySQL DB port");
        verifyPropertyExistence(propertySource, "mysql.database", "MySQL DB DB name");
        verifyPropertyExistence(propertySource, "mysql.username", "MySQL DB username");
        verifyPropertyExistence(propertySource, "mysql.password", "MySQL DB password");
    }

    @Override
    public String getHost() {
        return getEnvironment().getProperty("mysql.host");
    }

    @Override
    public int getPortNumber() {
        return getEnvironment().getProperty("mysql.port", Integer.class);
    }

    @Override
    public String getDatabase() {
        return getEnvironment().getProperty("mysql.database");
    }

    @Override
    public String getUsername() {
        return getEnvironment().getProperty("mysql.username");
    }

    @Override
    public String getPassword() {
        return getEnvironment().getProperty("mysql.password");
    }

} 
```

如果无法解析密钥，getProperty(String key) 将返回 null。

# android - 从与 data-ajax=false 链接的页面使用后退按钮时出现“发生网络错误”

> ID：12959545
> 
> 赞同：0
> 
> 时间：2012-10-18T16:40:24.780
> 
> 标签：android, eclipse, cordova, jquery-mobile

我正在尝试使用 PhoneGap 让我的 jQuery Mobile 网站在 Android 上运行（现在使用 Galaxy S3 进行测试，Android 4.0.4）。

当我尝试使用设备的“返回”按钮返回我网站的主页时，我收到一个应用程序错误，提示“发生网络错误。...”。我要返回的页面是最初使用“data-ajax=false”链接到的页面。

我可以复制错误如下：

1.  启动应用程序，从 index.html 开始
2.  单击**不**使用 data-ajax=false 的链接，例如 help.html
3.  使用设备的后退按钮返回 index.html
4.  单击**确实**使用 data-ajax=false 的链接，名称无关
5.  尝试使用设备的后退按钮返回 index.html

它抛出的确切错误是：

> 发生网络错误。(file:///android_asset/www/index.html#/android_asset/www/help.html

奇怪的是，如果我在转到“data-ajax=false”链接页面之前没有访问另一个页面，它不会引发错误，并且该页面按预期工作。

我似乎无法在网上找到任何有关解决方案的资源。

我尝试在 index.html 中设置 $.support.cors 和 $.mobile.allowCrossDomainPages = true ，但没​​有任何效果。两个链接之间的唯一区别是一个有 data-ajax=false 而另一个没有。我用两个相同的页面重现了错误，所以我确定页面的内容无关紧要。

这是我链接页面的方式：

```
<a href="help.html">Help</a> 
```

和

```
<a href="test.html" data-ajax="false">Test</a> 
```

任何建议或对正在发生的事情的解释将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:33:23.823

您可能应该避免在 phonegap 应用程序中使用 data-ajax="false" - 因为它会导致整个页面重新加载，您将丢失状态并在每个页面上重新初始化 phonegap 脚本，而不仅仅是在应用程序启动时。

虽然我不能 100% 确定，但很可能与为什么 url 在那个时候不起作用有关 - android_asset 可能不是设备的真正根文件夹，并触发 /android_asset/www/ 的负载部分初始化页面中的 help.html 可能无法按预期工作。

如果您不先访问 ajax 页面，则 url 上没有哈希，它只是 index.html 的常规加载，与启动应用程序时相同。

# c - 了解scanf

> ID：12959548
> 
> 赞同：0
> 
> 时间：2012-10-18T16:40:32.727
> 
> 标签：c, scanf

我查看了其他 scanf 帖子，但我似乎无法找到我在这里遇到的这个短代码的问题。问题是当我输入 ab 或 c 时，它不会进入 if 或 else if 语句，我真的不知道如何解决它，任何帮助都会很可爱！谢谢你！

```
#include <stdio.h>

int main(void)

{

char bogstav, a, b, c;

printf("Indtast a b eller c\n");
scanf("%c", &bogstav);

    if(bogstav == a)
    {
    printf("Du valgte a");
    }
        else if(bogstav == b)
        {
        printf("Du valgte b");
        }
            else if(bogstav == c)
            {
            printf("Du valgte c");
            }
                else
                {
                printf("Du valgte ikke a b eller c!");
                }
return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:42:16.180

你应该初始化你的变量`a`，`b`和`c`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:43:00.877

你期待那些是文字字符吗？

```
if(bogstav == 'a') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:43:09.520

`a`，`b`并且`c`在`if`语句中不是字符，它们是变量，尚未初始化。你想比较`'a'`, 等等。或者做`char a = 'a';`... ，但这可能是矫枉过正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:46:17.133

您的代码中的问题是您想将 bogstav 与 c 字符的值进行比较，而不是 c 值，但是您正在以另一种方式进行比较：P

只需执行 if ( bogstav == 'b' ) 来检查 bogstav 是否等于 b 字符。

```
#include <stdio.h>

int main(void)

{

char bogstav;

printf("Indtast a b eller c\n");
scanf("%c", &bogstav);

    if(bogstav == 'a')
    {
    printf("Du valgte a");
    }
        else if(bogstav == 'b')
        {
        printf("Du valgte b");
        }
            else if(bogstav == 'c')
            {
            printf("Du valgte c");
            }
                else
                {
                printf("Du valgte ikke a b eller c!");
                }
return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T16:46:43.763

声明变量的两种方法

```
char a='a',b='b',c='c'; 
```

或者

没有在如下条件下直接声明变量检查

```
if(bogstav == 'a')
{ // do your stuff } 
```

# c# - 为什么我的控制器中的 FormCollection 是空的？

> ID：12959552
> 
> 赞同：2
> 
> 时间：2012-10-18T16:40:59.977
> 
> 标签：c#, asp.net-mvc, post, asp.net-mvc-4

## 背景

我正在使用 MVC 4 Web API 项目 (ASP.NET) 在 C# 中编写 API 层。

我在我的控制器中编写了一个测试操作，如下所示：

```
[System.Web.Mvc.HttpPost]
public string TestAction(FormCollection fc)
{
    return "test";
} 
```

我在 FireFox 中使用 Poster 来测试表单帖子：

*   内容类型设置为 application/x-www-form-urlencoded
*   参数中的正文设置为 foo=bar&bar=foo

这是我的路线：

```
RouteTable.Routes.MapHttpRoute("PostDefault", "{controller}/{action}"); 
```

## 问题

从 Poster 发布 url 和参数时，我可以毫无问题地点击控制器，但是如果我放置一个断点`return "test";`然后将鼠标悬停在`FormCollection`传入的 ( `fc`) 上，则表明传入的是一个空的字符串数组而不是我的价值观（例如`string[0]`）。

我已经在客户端上使用 jQuery 完成了很多次`$.post()`，接收表单集合没有问题。

在这种情况下它失败了什么？

谢谢，

马特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T16:43:04.543

似乎这是在 API 控制器 ( [`ApiController`](http://msdn.microsoft.com/en-us/library/system.web.http.apicontroller%28v=vs.108%29.aspx)) 中定义的操作。如果是这种情况，您不能使用`FormCollection`. 这用于正常的控制器操作，而不是 API 控制器（我个人即使在正常的控制器操作中也不使用它，但这是另一个主题，请参阅下一段以了解我使用的是什么）。

您应该定义一个视图模型：

```
public class MyViewModel
{
    public string Foo { get; set; }
    public string Bar { get; set; }
} 
```

然后让您的控制器操作将此视图模型作为参数：

```
public class TestController: ApiController
{
    [System.Web.Http.HttpPost]
    public string TestAction(MyViewModel model)
    {
        return "test";
    }
} 
```

请注意，API 控制器的正确属性`[System.Web.Http.HttpPost]`与`[System.Web.Mvc.HttpPost]`您的代码中的属性不同。

另外，我建议您遵守 RESTful 约定：

```
RouteTable.Routes.MapHttpRoute("PostDefault", "{controller}"); 
```

接着：

```
public class TestController: ApiController
{
    public string Post(MyViewModel model)
    {
        return "test";
    }
} 
```

现在 HTTP 动词（在这种情况下为 POST）确定要调用的控制器操作：

```
POST /test
Server: http://example.com
Content-Type: application/x-www-form-urlencoded
Content-Length: 15
Connection: close

foo=bar&bar=foo 
```

# node.js - Node 中的 Require.js

> ID：12959559
> 
> 赞同：3
> 
> 时间：2012-10-18T16:41:21.300
> 
> 标签：node.js, requirejs

如何在 node.js 中使用 require.js？

为什么下面的代码不起作用？

```
var requirejs = require('requirejs');

requirejs.config({
nodeRequire: require
});

requirejs(['foo'],
function (foo) {
    console.log(foo);
}); 
```

我尝试了各种方法，包括使用 requirejs(['./foo']。我无法让任何工作。

我在与主文件（具有上述代码的那个）相同的目录中有一个文件 foo.js。我用节点运行主文件，而 foo 未定义。从 requirejs.org 上给出的示例看来，我做得对，但我确信我误解了某些东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:48:39.043

我刚刚运行了你的确切代码，重新安装了 requirejs，还有一个非常小的“foo”模块，它运行良好。我想问题出在 foo 模块本身。

这是我用的

```
define(function(){
    return 'test';
}); 
```

你有没有弄错模块语法？

# asp.net-mvc - 为助手生成的标签添加冒号和星号

> ID：12959560
> 
> 赞同：4
> 
> 时间：2012-10-18T16:41:23.030
> 
> 标签：asp.net-mvc, razor, razor-declarative-helpers

我在 .NET 4.5 MVC 应用程序中使用 Razor 和数据注释。这是来自视图模型：

```
 [Required(ErrorMessage = "Title is required.")]
    [Display(Name = "Title: *")]
    public string Title { get; set; }

    [Display(Name = "Comments:")]
    public string Comments { get; set; } 
```

有没有办法删除这些显示属性并在生成的名称后加一个冒号（冒号、空格、星号表示必填字段）？在错误消息中不应显示冒号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:15:21.497

您可以使用自己的自定义显示助手（类似于`LabelFor`），或者

如果您希望 LabelFor 为：

```
<PropertyName> : 
```

当你有一个必需的属性时

```
<PropertyName> : * 
```

您可以尝试使用自定义 DataAnnotationsModelMetadataProvider

```
public class CustomModelMetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata CreateMetadata(IEnumerable<Attribute> attributes, Type containerType, Func<object> modelAccessor, Type modelType, string propertyName)
    {
        var metadata = base.CreateMetadata(attributes, containerType, modelAccessor, modelType, propertyName);
        if (propertyName != null) {            
           metadata.DisplayName = (metadata.DisplayName ?? propertyName) + " : ";
           if (attributes.OfType<RequiredAttribute>().Any())
              metadata.DisplayName +=" * ";
         }
        return metadata;
    }
} 
```

要使用这个，你必须把

```
ModelMetadataProviders.Current = new CustomModelMetadataProvider() 
```

在 `Application_Start()`你的`Global.asax.cs`

现在，我不确定是否`metadata.DisplayName`在错误消息中使用...我让你测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-10T17:19:37.790

Raaphaels 解决方案对我有用。在这个帮助下，我将以下 JavaScript 放入我的布局文件中，以将星号染成红色。

```
$('.control-label').each(function () {
   var textVal = $(this).html();
   if (textVal.indexOf("*") > 0) {
       var newTextVal = textVal.replace("*", "");
       $(this).html(newTextVal + "<span style='color:#ff0000'> *</a>");
   }
}); 
```

# c - dup 和 dup2 命令

> ID：12959562
> 
> 赞同：1
> 
> 时间：2012-10-18T16:41:26.897
> 
> 标签：c, operating-system, dup2, dup

我想要做的是将 ls 命令的输出放在一个文件中，然后使用 grep 命令从该文件中读取并将其存储在一个新文件中，并根据该文件上的内容，在终端。

所以有以下输出重定向：

1) 从标准输出到称为 oioioi.txt 的文件（用于 ls 命令）
2) 从 oioioi.txt 到 grep.txt（用于 grep 命令）
3) 从 grep.txt 返回到终端

这是我的代码：

```
#include<stdio.h>
#include<sys/wait.h>
#include<unistd.h>
#include<errno.h>
#include<stdlib.h>
#include<string.h>
int main(void)
{
        //if(!fork())
                //execl("/bin/grep","grep","input","oioioi.txt",0);
        FILE *fp1,*fp2;
        int fd,fd2;
        fp1=fopen("oioioi.txt","w+");
        fp2=fopen("grep.txt","w+");
        fd=fileno(fp1);
        fd2=fileno(fp2);
        char filename[40],id[40],marks[40],filename2[40];
        scanf("%s %s %s",filename,id,marks);
        char *execarg2[]={"ls",0};
        dup2(fd,1); //1st redirection
        //close(1);
        if(!fork())
        {
                execv("/bin/ls",execarg2);
        }
        sleep(1);
        wait(NULL);
        //dup(fd2);
        close(fd);
        dup(1);
        dup2(fd2,1); //2nd redirection
        if(!fork())
        {
                //sleep(1);
                execl("/bin/grep","grep",filename,"oioioi.txt",0);
        }
        sleep(1);
        wait(NULL);
        close(fd2);
        dup2(1,fd2); //3rd one which is the incorrect one
        fscanf(fp2,"%s",filename2);
                printf("%s",filename2);
        if(strcmp(filename2,filename)==0)
                printf("FILE FOUND");

        return(0);
} 
```

我认为第三个是不正确的。但是我也不确定前两个。如果你们可以看看我的代码并告诉我哪里出错了，或者给我一个使用 dup 进行以下重定向的例子，我真的很感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:11:09.823

问题始于您的第一次重复通话：`dup(fd, 1);`. 在该行中，您将标准输出丢失到终端。如果你想秘密地保留对它的引用，你会`dup(STDOUT_FILENO);`事先。

因此，后续调用`printf`实际上将被重定向到`fd2`而不是`stdout`原来的 fd (1)。

这里可能还潜伏着其他一些问题，但这是我所能理解的（请参阅我对这个问题的评论）。

NB

的手册页`dup2`指出，如有必要，它会关闭新的 fd（第二个 arg），使`close`in

```
close(fd2);
dup(1, fd2); 
```

多余的。

# applescript - 在 Mountain Lion 上打开注释工具栏时无法预览

> ID：12959565
> 
> 赞同：0
> 
> 时间：2012-10-18T16:41:33.620
> 
> 标签：applescript, osx-mountain-lion, preview

尝试为预览编写 UI 脚本以使用注释，但似乎打开注释工具栏会中断脚本。我注意到，一旦注释工具栏打开，任何自定义热键也会停止工作。

这可以通过以下在工具栏打开时运行的 AppleScript 来复制，然后在关闭时再次运行：

```
tell application "System Events"
    tell process "Preview"
        tell front window
            return every UI element
        end tell
    end tell
end tell 
```

我在这里做错了什么还是预览刚刚坏了？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T01:27:37.887

我设法使用 Michael Tsai 在此线程中发布的说明来完成这项工作 - [OSX Lion Preview 应用程序是否可编写脚本？](https://stackoverflow.com/questions/8474657/is-osx-lion-preview-application-scriptable).

已发布文章的直接链接是[http://c-command.com/blog/2009/12/28/capture-from-preview/](http://c-command.com/blog/2009/12/28/capture-from-preview/)

# credit-card - 仅存储信用卡号用于接收付款是否安全？

> ID：12959567
> 
> 赞同：0
> 
> 时间：2012-10-18T16:41:46.833
> 
> 标签：credit-card

嗨，我正在开发一个应用程序，供应商只保存他们的银行帐号和信用卡号，以便他们的客户可以去银行付款。提供此信息是因为大量购买者不持有用于电子支付目的的信用卡。

问题是，他们能在互联网上赤裸裸地展示这些信息吗？它们不显示到期日期或卡中的背面号码。

任何帮助将不胜感激。

举个例子，mercadolibre.com 中的用户将该信息存储在 ML 自动生成的电子邮件中。我担心可能存在仅使用此类信息进行任何欺诈的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:39:30.043

是的，这是对欺诈的正式邀请。交易肯定可以在没有到期日期或 CVV 代码的情况下进行（尝试在奥巴马的网站上捐赠），所需要的只是信用卡号 - 不要实施类似的东西，甚至不要接近它！

# javascript - 图表上两点之间的标记/突出显示范围

> ID：12959569
> 
> 赞同：0
> 
> 时间：2012-10-18T16:41:49.687
> 
> 标签：javascript, jquery, html, css, graph

我用[ANTS Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/features/key-features)工作了几天，我喜欢的功能之一是[交互式时间线](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/features/key-features)（链接视频中的附加图像。），它允许我们使用鼠标移动 + 拖动以交互方式选择/突出显示两点之间的数据。（本例中的时间范围。）

![突出显示的图表。请参阅上半部分的蓝色选择](../Images/894d79442c76044eccdd6328f002fb04.png)

我想知道使用 jquery/graphs/Html5 是否存在类似的东西？

[simile-widgets 时间线](http://www.simile-widgets.org/timeline/)似乎是我能找到的最接近的时间线。但仍然不存在。

有哪些实现相同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:13:38.987

[Highcharts / Highstock](http://www.highcharts.com/)内置了这种缩放/标记功能。看看[这个演示](http://www.highcharts.com/stock/demo/)或[这个](http://www.highcharts.com/demo/line-time-series)以获得一个想法。您将需要使用他们的 API 来深入了解您需要的点，但这在很大程度上取决于您的需求。

# node.js - ExpressJS 是否使用了无效的 set-cookie 标头？

> ID：12959570
> 
> 赞同：1
> 
> 时间：2012-10-18T16:41:50.160
> 
> 标签：node.js, http-headers, express, connect

我正在使用 ExpressJS res.cookie 函数将 cookie 添加到标头 `res.cookie('mycookie', x, y);`

但是深入研究 ExpressJS 和 Connect 我发现用于将 cookie 函数的参数串在一起的连接没有附加分号

快递/res.js

```
res.cookie = function(name, val, options){
  options = options || {};
  if ('maxAge' in options) options.expires = new Date(Date.now() + options.maxAge);
  if (undefined === options.path) options.path = this.app.set('basepath');
  var cookie = utils.serializeCookie(name, val, options);
  this.header('Set-Cookie', cookie);
}; 
```

连接/utils.js

```
exports.serializeCookie = function(name, val, obj){
  var pairs = [name + '=' + encodeURIComponent(val)]
    , obj = obj || {};

  if (obj.domain) pairs.push('domain=' + obj.domain);
  if (obj.path) pairs.push('path=' + obj.path);
  if (obj.expires) pairs.push('expires=' + obj.expires.toUTCString());
  if (obj.httpOnly) pairs.push('httpOnly');
  if (obj.secure) pairs.push('secure');
  //this doesnt append semi colon
  return pairs.join('; ');
}; 
```

然后我查看了 Set-Cookie 标头的规范（[http://www.ietf.org/rfc/rfc2109.txt](http://www.ietf.org/rfc/rfc2109.txt)）

Set-Cookie 响应标头的语法是

```
 set-cookie      =       "Set-Cookie:" cookies
   cookies         =       1#cookie
   cookie          =       NAME "=" VALUE *(";" cookie-av)
   NAME            =       attr
   VALUE           =       value
   cookie-av       =       "Comment" "=" value
                   |       "Domain" "=" value
                   |       "Max-Age" "=" value
                   |       "Path" "=" value
                   |       "Secure"
                   |       "Version" "=" 1*DIGIT 
```

语言结构似乎暗示应该有一个尾随分号。

我只是想弄清楚这一点，因为我针对我使用 res.cookie() 设置的 cookie 运行的一些解析器正在返回“无效的 Set-Cookie 标头”错误。

ExpressJS 是否通过 Connect.js 设置了无效的 Set-Cookie 标头？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:36:14.727

仅当存在其他属性值对时，才需要尾随半色。符号“ `*(";" cookie-av)`”表示出现零次或多次 → 仅对 的每个附加值需要分号`cookie-av`。

从规范：

> 非正式地，Set-Cookie 响应标头包含标记 Set-Cookie:，后跟一个或多个 cookie 的逗号分隔列表。每个 cookie 都以 NAME=VALUE 对开头，后跟零个或多个以分号分隔的属性值对。属性值对的语法如前所述。

严格来说，不符合规范的是在每个分号后通过 express 插入的额外空格。尽管每个理智的浏览器都知道如何处理非标准的额外空格，但我非常有信心。

# apache - 应用程序注销时 Apache 反向代理中断

> ID：12959577
> 
> 赞同：1
> 
> 时间：2012-10-18T16:42:05.713
> 
> 标签：apache, proxy, reverse

我的apache知识非常有限。我被要求在我的工作地点设置反向代理。webapp 位于 Windows 服务器/IIS 上。我们的反向代理是 Solaris 上的 apache。

这是我的问题。反向代理工作正常，直到您退出 web 应用程序。我很少接触 webapp，因为它是供应商购买的代码。行为如下。

登录 external-url.com/ 一切正常。遍历应用程序没有问题，但是一旦按下注销按钮，登录页面就会重定向到正在代理的服务器

供应商声称这不是他们的注销方法的问题。当我使用 IP 地址直接在 internalServer 上登录 webapp 时，在注销时我不会重定向到服务器别名，而是会显示 IP 地址仍在 url 中的注销页面。

因此，在注销过程中的某个时刻，会为最终用户从外部可访问的 url 重写到内部服务器的 url。

我希望我以一种可以理解的方式解释了这一点。

这是我在 apache 虚拟主机中的设置

```
ProxyRequests Off
    <Proxy *>
       Order deny,allow
         #Allow from all
         Allow from .ourdomain.com
    </Proxy>

ProxyPass / http://crdpcenter01.ourdomain.com/
ProxyPassReverse / http://crdpcenter01.ourdomain.com/ 
```

# mysql - 我如何使用 SQL 进行排名

> ID：12959579
> 
> 赞同：2
> 
> 时间：2012-10-18T16:42:15.277
> 
> 标签：mysql, sql

我有一个带有 id 和值的表。如何按其值按顺序对表中的元素进行排名？我想做的是：

```
SELECT id FROM table ORDER BY value DESC 
```

我希望它告诉我例如 id=4 的位置

非常感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:44:34.410

MySQL 没有解析函数，所以你必须使用[用户变量](http://dev.mysql.com/doc/en/user-variables.html)：

```
SELECT   @r:=@r+1 AS rank, id
FROM     table, (SELECT @r:=0) init
ORDER BY value DESC 
```

要获取特定记录的排名，请将其包装在外部查询中：

```
SELECT rank FROM (
  SELECT   @r:=@r+1 AS rank, id
  FROM     table, (SELECT @r:=0) init
  ORDER BY value DESC
) t WHERE id = 4 
```

为了避免 MySQL 不必要地计算表中*每条*记录的排名，您可以添加一个过滤器：

```
SELECT rank FROM (
  SELECT   @r:=@r+1 AS rank, table.id
  FROM     table,
           (SELECT value FROM table WHERE id=4) t,
           (SELECT @r:=0) init
  WHERE    table.value >= t.value
  ORDER BY table.value DESC
) t WHERE id = 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:45:29.310

Eggyal 的解决方案不是 a `rank`，而是 a `row_number`（这些实际上是有意义的，因为它们是 SQL 标准的一部分）。

我认为以下`dense_rank`在 MySQL 中做了一个：

```
SELECT   @r:=@r+1 AS rank, id
FROM     (select id, count(*) as cnt
          from table t
          group by id
         ),
         (SELECT @r:=0) init
ORDER BY value DESC 
```

A`rank`有点难。. . 我认为以下将起作用：

```
SELECT   @r:=@r+1-offset AS rank, id
FROM     (select id, count(*) as cnt
          from table t
          group by id
         ),
         (SELECT @r:=0, count(*)-1 as offset
          from table t
          group by id
          order by count(*) desc
          limit 1
         ) init
ORDER BY value DESC 
```

# web-services - 在 Domino 集群环境中使用 Web 服务

> ID：12959582
> 
> 赞同：2
> 
> 时间：2012-10-18T16:42:22.190
> 
> 标签：web-services, cluster-computing, lotus-domino

尝试通过本机使用非 Domino WS`Web Service Consumers`但不断获取

`Error connecting to '10.46.180.11' on port '80', The destination network is unreachable.`当我运行它时。

如果我停止服务器/s-控制台上的集群端口，Web 服务**工作正常！？**
此外，如果集群端口打开 - 它可以通过 COM/Lotusscript 使用 Web 服务。

环境由三个`8.53fp3/win64 servers`中的一个`Domino Cluster`（不是ICM）组成。

***集群配置：***

`Server cluster probe count: 5343
Server cluster default port: CLUSTER
Server cluster auxiliary ports: TCPIP
Server availability threshold: 0
Server availability index: 99 (state: AVAILABLE)
Server availability default minimum transaction time: 3000
Cluster members (3):
Server: server1, availability index: 98
Server: server2, availability index: 61
Server: server3, availability index: 41`

防火墙中没有阻挡！

# javascript - 我不知道如何点击数组

> ID：12959584
> 
> 赞同：0
> 
> 时间：2012-10-18T16:42:23.403
> 
> 标签：javascript, jquery

我在谷歌上下搜索并没有找到一个简单的解决方案。

这是我的代码的 jist：

```
 var theArray = ["one","two","three","four"];

  $('.next').click(function(){
   // go forward on the array
  })

  $('.back').click(function(){
   // do backwards on the array from the current position
  }) 
```

所以，如果用户点击`"<button class="next">`我会收到“一”的警报，他们再次点击“下一步”，“二”的警报，等等......

有没有快速的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:44:29.130

当然：

```
theArray.push(theItem = theArray.shift());
// and...
theArray.unshift(theItem = theArray.pop()); 
```

`theItem`分别是第一项和最后一项。重复调用该函数将继续循环这些项目。

但是请注意，您不能再执行“在末尾添加另一个”之类的操作了。为此，您需要手动跟踪“当前项目”，并对其进行递增/递减，而不是循环使用这些项目。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:45:14.133

您需要第二个变量来跟踪您的索引：

```
var theArray = ["one","two","three","four"]; 
var arrayIndex=0;

      $('.next').click(function(){
         arrayIndex++
         if(arrayIndex>=theArray.length)
              arrayIndex=0;
         alert(theArray[arrayIndex]);   
      })

      $('.back').click(function(){
         arrayIndex--
         if(arrayIndex<0)
              arrayIndex=theArray.length-1;
         alert(theArray[arrayIndex]);   
      }) 
```

# java - 无法使用 Maven webapp 创建包

> ID：12959586
> 
> 赞同：4
> 
> 时间：2012-10-18T16:42:30.660
> 
> 标签：java, eclipse, maven, packages

我在 Eclipse 中使用以下 maven webapp 项目创建了一个项目：

![在此处输入图像描述](../Images/5b013d8258c1058792fcf94fc1ee57d8.png)

将包添加到项目时（右键单击项目 -> 新建 -> 包），包被添加为文件夹（我添加了一个名为 core 的包）。它没有通常的包图标：

![在此处输入图像描述](../Images/814e17e752d4ef8fa37fe6b4daf7d8d7.png)

如果我尝试创建一个新类并选择一个包，则列表框中没有条目。我尝试在普通的 Eclipse 动态 Web 项目中创建包，并且这些包可以正常工作。

如何在启用 Maven 的 webapp 项目中获取包？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-18T16:57:14.653

你的代码应该在`src/main/java`. 如果它尚不存在，请创建它，然后从项目的上下文菜单中选择*Maven -> Update Project 。*

然后你会看到`src/main/java`旁边`src/main/resources`。右键单击它，选择*New -> Package*，它应该会如您所愿地出现。

Maven 不会在 下编译源`src/main/resources`代码，这就是为什么您的代码需要在`src/main/java`. 该`src/main/resources`目录用于存放您希望出现在类路径中的文件，这些文件不需要编译。例如，您可以将属性文件放在那里。

**编辑：** “资源”文件夹未在包资源管理器的通常布局中显示的原因是 m2e 以与源文件夹不同的方式设置资源文件夹。有关它为什么这样做的解释，请参阅：[Maven/Eclipse：资源的默认构建路径排除了所有内容](https://stackoverflow.com/questions/5137584/maven-eclipse-the-default-build-path-for-resources-excluded-everything)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-22T11:35:21.140

我已经通过以下步骤解决了这个问题：

1.  右键单击 Maven 项目 -> 构建路径 -> 配置构建路径
2.  在 Order and Export 选项卡中，您可以看到类似“缺少 2 个构建路径条目”的消息
3.  现在选择“JRE System Library”和“Maven Dependencies”复选框
4.  点击确定

现在您可以在所有类型的资源管理器（包或项目或导航器）中看到以下内容

```
src/main/java
src/main/resources
src/test/java
src/main/webapp 
```

# c# - 怎么可以为空 使用它的底层值类型扩展方法

> ID：12959589
> 
> 赞同：4
> 
> 时间：2012-10-18T16:42:38.100
> 
> 标签：c#, .net, enums, nullable

一个小时前我问了一个问题：[我怎么能写一个扩展方法，因为`Enum?-Nullable<Enum>`](https://stackoverflow.com/q/12956916/601179)
我得到一个答案，告诉我我可以写扩展方法`Enum`，它可以用于所有枚举和可为空的枚举。

酷，它有效，**但如何？**

如果我理解正确，所有枚举都来自于`Enum`这就是为什么我可以在我拥有的每个枚举中使用这个扩展方法。

但是...`ItemType?`例如，枚举不是枚举，它是`Nullable<ItemType>`，它不是从`ItemType`nor派生的`Enum`。
就像`List<DataReader>`不派生自`DataReader`，因此不能使用`DataReader`方法一样，尽管`DataReader`它是*通用类型*。

我知道该`Nullable<T>`类型有很多“巫毒”和语法糖，这是其中之一吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:00:39.813

扩展方法不需要类是/派生的/，它们只需要存在转换（更具体地说：隐式标识、引用或装箱转换；这是第 7.6.5.2 节“扩展方法调用”）。

从`Nullable<ItemType>`to的转换`System.Enum`是拳击转换；`Nullable<int>`与从到的转换相同`System.Object`。

如果你定义了自己的结构`struct Test : IMyInterface {}`，就会有从`Nullable<Test>`to的转换`IMyInterface`。

如果 nullable 为 null，则来自 nullable 的装箱转换将返回 null 引用；否则将 nullable 的值装箱。有关详细信息，请参阅 C# 规范中的第 6.1.7 节“装箱转换”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:05:43.097

它比编译器魔法更具有类型系统魔法。由于`Enum`是引用类型，这意味着您传入的任何值都将被装箱（例如转换为引用）。

现在`Nullable<T>`在 CLR 中进行了特殊处理，`null`如果它表示空值或内部类型 ( `T`) 的装箱值，装箱将产生枯萎，但绝不会装箱`Nullable<T>`。当然，反之亦然。拆箱到可为空的类型接受`null`引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:56:27.757

扩展方法被转换为一个静态方法，其第一个参数是调用该方法的变量。

在 Enum 示例中，由于 Enum 是一个类（不是结构），因此扩展方法可以接受枚举的具体值（通常归结为 int）或 null。因此它适用于可为空的枚举。

同样的事情对 int 不起作用？（可以为空）。如果您为 int 创建扩展方法，您将无法在 Nullable 上调用它（它会告诉您“无法将实例参数类型 Nullable 转换为 int）

# android - 从适用于 Android 的 Adob e AIR 原生扩展启动 Activity

> ID：12959593
> 
> 赞同：7
> 
> 时间：2012-10-18T16:42:44.560
> 
> 标签：android, pdf, air, native

我对使用 Android SDK 进行开发完全陌生。我正在尝试从 AIR 的本机扩展（在 Android 上）启动 Adob​​e Reader。

这是我所做的（我确实遵循了本教程： http: [//www.adobe.com/devnet/air/articles/extending-air.html](http://www.adobe.com/devnet/air/articles/extending-air.html)）。

我有一个控制器：

```
package com.tokom.adobereader
{
import com.tokom.adobereader.events.AdobeReaderEvent;

import flash.events.EventDispatcher;
import flash.events.StatusEvent;
import flash.external.ExtensionContext;

/**
 * A controller used to interact with the system volume on iOS and
 * Android devices.  Ways to change the volume programmatically
 * and to respond to the hardware volume buttons are included.
 *  
 * @author Nathan Weber
 */ 
public class AdobeReaderController extends EventDispatcher
{
    //----------------------------------------
    //
    // Variables
    //
    //----------------------------------------

    private static var _instance:AdobeReaderController;
    private var extContext:ExtensionContext;

    //----------------------------------------
    //
    // Public Methods
    //
    //----------------------------------------

    public static function get instance():AdobeReaderController {
        if ( !_instance ) {
            _instance = new AdobeReaderController( new SingletonEnforcer() );
            _instance.init();
        }

        return _instance;
    }

    public function openPdf(path:String):void
    {
        trace("[AdobeReaderController.as] openPdf "+path);
        var ret = extContext.call( "openPdf", path );
        trace("ret = "+ret);
    }

    /**
     * Cleans up the instance of the native extension. 
     */     
    public function dispose():void { 
        extContext.dispose(); 
    }

    //----------------------------------------
    //
    // Handlers
    //
    //----------------------------------------

    private function init():void {
        trace("[AdobeReaderController.as] init");
        extContext.call( "init" );
    }

    //----------------------------------------
    //
    // Handlers
    //
    //----------------------------------------

    private function onStatus( event:StatusEvent ):void {
        //systemVolume = Number(event.level);
        //dispatchEvent( new VolumeEvent( VolumeEvent.VOLUME_CHANGED, systemVolume, false, false ) );
    }

    //----------------------------------------
    //
    // Constructor
    //
    //----------------------------------------

    /**
     * Constructor. 
     */     
    public function AdobeReaderController( enforcer:SingletonEnforcer ) {
        super();

        extContext = ExtensionContext.createExtensionContext( "com.tokom.adobereader", "" );

        if ( !extContext ) {
            trace("Adobe Reader native extension is not supported on this platform.");
            throw new Error( "Adobe Reader native extension is not supported on this platform." );
        }

        //extContext.addEventListener( StatusEvent.STATUS, onStatus );
    }
}
}

class SingletonEnforcer {

} 
```

这是我的 openPdf() 函数：

```
package com.tokom.adobereader.functions;

import java.io.File;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Context;
import android.content.Intent;
import android.media.AudioManager;
import android.net.Uri;
import android.util.Log;

import com.adobe.fre.FREContext;
import com.adobe.fre.FREFunction;
import com.adobe.fre.FREObject;

public class OpenPdfFunction extends Activity implements FREFunction
{
public static final String TAG = "OpenPdfFunction";

public FREObject call(FREContext context, FREObject[] args)
{
    Log.d(TAG, "open pdf = ");

    String filePath = null;
    try
    {
        filePath = args[0].getAsString();
        Log.d(TAG, filePath);
    } catch (Exception e) {
        // TODO
    }
    Log.d(TAG, "trying now to open adobeReader");
    try
    {
        Intent intent = new Intent();

        //intent.setClassName("com.adobe.reader", "com.adobe.reader.AdobeReader");
        intent.setAction(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(new File(filePath)), "application/pdf");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        Log.d(TAG, "about to startActivity");
        startActivity(intent);
    } 
    catch (ActivityNotFoundException activityNotFoundException)
    {
        Log.d(TAG, "cannot start activity");
        activityNotFoundException.printStackTrace();
    }
    catch (Exception otherException)
    {
        otherException.printStackTrace();
        Log.d(TAG, "cannot start activity");
    }
    Log.d(TAG, "activity should have started");
    return null;
}
} 
```

问题是在运行时，我得到一个 NPE (on startActivity()) ：

```
10-18 18:31:44.160: I/InputReader(289): dispatchTouch::touch event's action is 0, pending(waiting finished signal)=0
10-18 18:31:44.160: I/InputDispatcher(289): Delivering touch to current input target: action: 0, channel '40b0d0b0 air.testMyANE.debug/air.testMyANE.debug.AppEntry (server)'
10-18 18:31:44.160: I/InputDispatcher(289): Delivering touch to current input target: action: 0, channel 'TouchIntercepter (server)'
10-18 18:31:44.280: I/InputReader(289): dispatchTouch::touch event's action is 1, pending(waiting finished signal)=0
10-18 18:31:44.280: I/InputDispatcher(289): Delivering touch to current input target: action: 1, channel '40b0d0b0 air.testMyANE.debug/air.testMyANE.debug.AppEntry (server)'
10-18 18:31:44.280: I/InputDispatcher(289): Delivering touch to current input target: action: 1, channel 'TouchIntercepter (server)'
10-18 18:31:44.310: D/AdobeReaderExtension(28990): Extension initialized.
10-18 18:31:44.310: I/air.testMyANE.debug(28990): [AdobeReaderController.as] init
10-18 18:31:44.320: I/InitFunction(28990): in init
10-18 18:31:44.320: I/air.testMyANE.debug(28990): [AdobeReaderController.as] openPdf /sdcard/Download/test.pdf
10-18 18:31:44.320: D/OpenPdfFunction(28990): open pdf = 
10-18 18:31:44.320: D/OpenPdfFunction(28990): /sdcard/Download/test.pdf
10-18 18:31:44.320: D/OpenPdfFunction(28990): trying now to open adobeReader
10-18 18:31:44.320: D/OpenPdfFunction(28990): about to startActivity
10-18 18:31:44.320: W/System.err(28990): java.lang.NullPointerException
10-18 18:31:44.320: W/System.err(28990):    at android.app.Activity.startActivityForResult(Activity.java:3095)
10-18 18:31:44.320: W/System.err(28990):    at android.app.Activity.startActivity(Activity.java:3201)
10-18 18:31:44.320: W/System.err(28990):    at com.tokom.adobereader.functions.OpenPdfFunction.call(OpenPdfFunction.java:69)
10-18 18:31:44.320: W/System.err(28990):    at com.adobe.air.customHandler.nativeOnTouchCallback(Native Method)
10-18 18:31:44.320: W/System.err(28990):    at com.adobe.air.customHandler.nativeOnTouchCallback(Native Method)
10-18 18:31:44.320: W/System.err(28990):    at com.adobe.air.customHandler.handleMessage(customHandler.java:27)
10-18 18:31:44.320: W/System.err(28990):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 18:31:44.320: W/System.err(28990):    at android.os.Looper.loop(Looper.java:132)
10-18 18:31:44.320: W/System.err(28990):    at  android.app.ActivityThread.main(ActivityThread.java:4028)
10-18 18:31:44.320: W/System.err(28990):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 18:31:44.320: W/System.err(28990):    at java.lang.reflect.Method.invoke(Method.java:491)
10-18 18:31:44.320: W/System.err(28990):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
10-18 18:31:44.320: W/System.err(28990):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
10-18 18:31:44.320: W/System.err(28990):    at dalvik.system.NativeStart.main(Native Method) 
```

我相信我尝试启动 adobe reader 的方式不是很好，但我做错了什么？

在此先感谢您的帮助 ！

扎布

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T14:19:07.300

好的，我有我的答案。

我没有在 com.tokom.adobereader.functions.OpenPdfFunction 中扩展 Activity，而是：

```
Context appContext = context.getActivity().getApplicationContext();

// (...)

appContext.startActivity(intent); 
```

现在可以了。

这是完整的代码：

```
package com.tokom.adobereader.functions;

import java.io.File;

import android.content.ActivityNotFoundException;
import android.content.Context;
import android.content.Intent;
import android.net.Uri;
import android.util.Log;

import com.adobe.fre.FREContext;
import com.adobe.fre.FREFunction;
import com.adobe.fre.FREObject;

public class OpenPdfFunction implements FREFunction
{
public static final String TAG = "OpenPdfFunction";

public FREObject call(FREContext context, FREObject[] args)
{
    Context appContext = context.getActivity().getApplicationContext();

    Log.d(TAG, "open pdf = ");

    String filePath = null;
    try
    {
        filePath = args[0].getAsString();
        Log.d(TAG, filePath);
    } catch (Exception e) {
        // TODO
    }
    Log.d(TAG, "trying now to open adobeReader");
    try
    {
        Intent intent = new Intent();

        intent.setClassName("com.adobe.reader", "com.adobe.reader.AdobeReader");
        intent.setAction(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(new File(filePath)), "application/pdf");
        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        Log.d(TAG, "about to startActivity");
        appContext.startActivity(intent);
    } 
    catch (ActivityNotFoundException activityNotFoundException)
    {
        Log.d(TAG, "cannot start activity");
        activityNotFoundException.printStackTrace();
    }
    catch (Exception otherException)
    {
        otherException.printStackTrace();
        Log.d(TAG, "cannot start activity");
    }
    Log.d(TAG, "activity should have started");
    return null;
}
} 
```

希望它能帮助任何其他 AIR 开发人员在 Android 原生扩展的第一步。

干杯！

# cocoa-touch - 从堆叠的屏幕弹出到 MoreViewController 选项卡

> ID：12959595
> 
> 赞同：0
> 
> 时间：2012-10-18T16:42:45.477
> 
> 标签：cocoa-touch, uinavigationcontroller, uitabbarcontroller

我选择更多应用程序选项卡，进入某个屏幕，在该屏幕上再做一个选择。所以堆栈上有两个屏幕，并在那里呈现一个modalView。

`More`鉴于上述情况，我需要将用户从他来的地方遍历回标签。我自己试过，后来参考了网上的一些建议，都没有解决问题。

我写了下面的代码，这与其他人的建议相似。

> [[self.tabBarController moreNavigationController]dismissModalViewController:YES] [[self.tabBarController moreNavigationController]popToRootViewController:YES]

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T14:09:48.013

我很抱歉延迟提及此内容。我刚刚测试了这个。

笔记：

1.  对于更多的选项卡相关，更多的 UINavigationController 被使用，除非我们改变更多的导航流程，屏幕堆栈可以被更多的 UINavigationController 访问。
2.  我能够从推送屏幕和建模屏幕中弹出**ToRootView**

    > [self.tabBarController.moreNavigationControllerdismissModalViewControllerAnimated:YES]; [self.tabBarController.moreNavigationController popToRootViewControllerAnimated:YES];

# servicestack - 在 AuthProvider.IsAuthorized() 中保存 IAuthSession

> ID：12959601
> 
> 赞同：1
> 
> 时间：2012-10-18T16:43:16.803
> 
> 标签：servicestack

我创建了我的自定义`AuthUserSession`和我`AuthProvider`的自定义，并`AuthFeature`在`AppHostBase`.

身份验证过程由底层 ASP.NET 应用程序管理，该应用程序将我需要的信息放入会话（ASP.NET 会话）中。

在里面`AuthProvider.IsAuthorized()`，我检查来自 ASP.NET 会话的信息，如果用户已登录，则返回 true 或 false。

现在我想`AuthUserSession`在我的服务中使用我的自定义。

我在里面设置了`AuthUserSession`'s 属性，`AuthProvider.IsAuthorized()`但是当我尝试使用`SessionAs<MyCustomUserSession>()`（即使在同一个请求期间）在我的服务中访问它们时，我得到了空属性，因为我认为我不保存`AuthUserSession`。

我不知道如何保存`AuthUserSession`from `AuthProvider.IsAuthorized()`。我试图让我的自定义`AuthProvider`工具`IRequiresRequestContext`使用，`RequestContext.Get<IHttpRequest>().SaveSession(userSession, SessionExpiry);`但是.`RequestContext``null`

有没有办法做到这一点？

感谢您的关注。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:17:19.750

好的，我终于解决了这个问题。

我向我的自定义添加了一个 ICacheClient 属性，`AuthProvider`并解决了`AppHost`.

```
container.Register<ICacheClient>(new MemoryCacheClient());

Plugins.Add(new AuthFeature(
    () => new MyCustomUserSession(),
    new IAuthProvider[] 
        { new MyCustomAuthProvider(container.Resolve<ICacheClient>()) }
)); 
```

然后在`AuthProvider.IsAuthorized()`我保存会话中使用：

```
Cache.CacheSet(SessionKey, userSession, SessionExpiry); 
```

# c# - 如何在 Asp.net 中使用复选框构建 Treeview

> ID：12959611
> 
> 赞同：1
> 
> 时间：2012-10-18T16:43:38.567
> 
> 标签：c#, asp.net, treeview

我想根据输入路径显示我的所有目录。到目前为止，我实现了树视图。如何使用复选框制作 Asp.net 树视图？

**这是我的代码**

```
protected void ddl_SelectedIndexChanged(object sender, EventArgs e)
{
   // ListDirectory(tvTreeView, Server.MapPath("~/"));
    DirectoryInfo dir = new DirectoryInfo(Server.MapPath("~/"));
    TreeNode mainNode = new TreeNode();

    mainNode.Text = dir.Name;
    mainNode.Checked = true;
    mainNode.NavigateUrl = "~/" + dir.Name;
    TreeView1.Nodes.Add(mainNode);
    foreach (DirectoryInfo subDir in dir.GetDirectories())
    {
        TreeNode parentNode = new TreeNode();

        parentNode.Text = subDir.Name;
        parentNode.NavigateUrl = "~/" + dir.Name + "/" + subDir.Name;

        foreach (FileInfo file in subDir.GetFiles())
        {
            TreeNode subNode = new TreeNode();

            subNode.Text = file.Name;
            subNode.NavigateUrl = "~/" + dir.Name + "/" + subDir.Name + "/" + file.Name;

            //Add it to the parent node
            parentNode.ChildNodes.Add(subNode);
        }

        TreeView1.Nodes[0].ChildNodes.Add(parentNode);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:42:54.210

将树视图的 CheckBoxes 属性设置为 true。

treeView1.CheckBoxes = true;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:27:44.427

在没有完全消化您的代码的情况下，我假设您遇到的问题（并且没有说明）是树只显示了这些文件夹中的一级子文件夹和文件。

这是[递归](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)的主要用例。

如果这是你的问题，那么你可以通过递归来解决这个问题，如下所示（注意 - 这是临时的 - 所以用它作为基础，用一粒盐）：

```
private void AddNodeForDirectory(DirectoryInfo directory, TreeNode directoryNode)
{
    foreach (DirectoryInfo subDirectory in directory.GetDirectories())
    {
        TreeNode subDirectoryNode = new TreeNode
        {
            Text = subDirectory.Name,
            NavigateUrl = // some path... I leave this to you 
        };

        foreach (FileInfo file in subDirectory.GetFiles())
        {
            TreeNode fileNode = new TreeNode
            {
                Text = file.Name,
                NavigateUrl = // some path... I leave this to you
            };  

            subDirectoryNode.ChildNodes.Add(fileNode);
        }

        directoryNode.ChildNodes.Add(subDirectoryNode);

        // Here is the recursion
        this.AddNodeForDirectory(subDirectory, subDirectoryNode);
    }
} 
```

这个想法是您调用该方法，传入您的根目录信息和根树节点，并通过深入到您的目录信息中递归地填充树。另请注意，递归可能导致堆栈溢出，因此您应该注意危险。

# windows - QextSerialPort::read() 在超时到期但数据可用之前不会返回

> ID：12959612
> 
> 赞同：0
> 
> 时间：2012-10-18T16:43:39.130
> 
> 标签：windows, qt, qextserialport

我在 Win32 上使用 QextSerialPort 和 Qt 4.8.1。当设置“轮询”查询模式，并使用 QextSerialPort::setTimeout() 设置超时。当我调用 QExtSerialPort::read() 时，即使数据可用，读取函数也不会返回，直到整个超时期限到期，即使它返回数据也是如此。

例如：

```
m_port->setTimeout( 3000 ) ;
char data = 0 ;
int count = m_port->read( &data, 1 ) ;
// Returns after three seconds, but count is 1, and data set as expected 
```

我希望它会在读取指定的数量或字节*或*超时到期后立即返回 - 这首先发生。

这应该工作还是我误解了这个界面？有没有办法在轮询模式下实现预期的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T16:49:18.253

我认为，问题出在qiodevice.cpp**文件**`QIODevice::read(char *data, qint64 maxSize)` **中**：

 **```
qint64 QIODevice::read(char *data, qint64 maxSize)
{
    ...
            if ((d->openMode & Unbuffered) == 0 && maxSize < QIODEVICE_BUFFERSIZE) {
                ...
                int bytesToBuffer = QIODEVICE_BUFFERSIZE;
                ...
                qint64 readFromDevice = readData(writePointer, bytesToBuffer);
                ...
            }
    ...
} 
```

哪里`QIODEVICE_BUFFERSIZE`是**16384**。

`readData()`函数在**QextSerialPort**中实现并调用`ReadFile() WinApi`函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:08:07.680

看来解决方案是以无缓冲模式打开，因此：

```
m_port->open( QIODevice::ReadWrite | QIODevice::Unbuffered ) ; 
```

我不确定为什么这应该是必要的，所以如果有人能对这种界面设计的理念有所了解，我仍然会对任何答案感兴趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T23:05:40.430

我很确定 QExtSerial 在 Windows 上使用 ReadFile()。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365467(v=vs.85).aspx)

是否返回错误字符串？qextserialport->errorString();

也许 ReadFile() 被挂断了，但直到它已经将数据推送到指针中？**

# python - 在 python 中使用 eval() 来添加数字

> ID：12959615
> 
> 赞同：3
> 
> 时间：2012-10-18T16:43:46.240
> 
> 标签：python, eval

我想让用户输入字符串，例如`2+5-3+6`并返回`10`。如果用户输入`c`，则将打印答案。当用户输入`c`.

```
print 'This is a calculator. Please follow the instruction.'

temp = 0
string = 0

def asmd(string):
    print 'Your answer is', eval(str(string))

while temp != 'c':
    print 'Please enter a number or operation. Enter c to complete. :'
    temp = raw_input()
    string = str(string)+str(temp)

    if temp == str('c'):
        asmd(string) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:49:51.237

要修复计算器，只需确保结束字符 ( `c`) 不会出现在结果字符串中：

```
if temp == str('c'):
    asmd(string[:-1]) 
```

我必须指出，整个脚本非常疯狂。您正在使用`eval`，它可以一次评估完整的表达式，但您仍然指示用户一个一个地输入它们。使用 eval，您可以在一行中重写整个脚本：

```
print eval(raw_input()) 
```

同样正如评论中广泛指出的那样，`eval`如果您不信任运行您的计算器的用户，使用它通常是个坏主意。如果您只是在练习，那很好——只是不要`eval`在“真实代码”中使用。

# asp.net - 在插入数据库之前，如何在回发之间保留临时值？

> ID：12959617
> 
> 赞同：5
> 
> 时间：2012-10-18T16:43:57.410
> 
> 标签：asp.net, vb.net, session, persistence, viewstate

## 一般问题：

我正在尝试创建类似的东西：

![在此处输入图像描述](../Images/bf748c4a928e2ab6b1ec807fe316aa66.png)

用户可以从下拉列表中选择一个产品，单击添加，结果是在“已添加产品”部分下方添加了另一个产品行。必须为通过每行中的下拉列表添加的每个产品选择“产品描述符”。只有当用户单击“提交”按钮时，每个产品行才会插入到数据库中。

## 问题：

在回发之间保持产品选择的最佳方式是什么？

我不担心坚持“产品描述符”选择，我相信我可以做到。我主要关心的是在将这些临时选择保存到数据库之前找到存储这些临时选择的最佳方法。

## 我目前的做法：

我现在这样做的方式是管理视图状态中的 ProductListItem 对象列表。此列表绑定到显示添加的产品的 ListView。

```
Private Property SelectedProductList As List(Of ProductListItem)
        Get
            Return CType(ViewState("SelectedProductList"), List(Of ProductListItem ))
        End Get
        Set(ByVal value As List(Of ProductListItem ))
            ViewState("SelectedProductList") = value
        End Set
End Property 
```

ProductListItem 类：

```
<Serializable()>
Public Class ProductListItem

    Public Property ProductID As Integer
    Public Property ProductName As String

    ' ProductDescriptor class represents Product Descriptor (details omitted)
    Public Property Descriptor As ProductDescriptor 

    ' Constructor omitted

End Class 
```

添加按钮单击处理程序：

```
 Protected Sub btnAddProduct_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnAddProduct.Click

        SelectedProductList.Add( New ProductListItem(...) )
        ProductListView.DataSource = SelectedProductList
        ProductListView.DataBind()

  End Sub 
```

我正在考虑在这里使用 Session 而不是 Viewstate，因为我在同一页面上还有另外两种类似的情况，我在 viewstate 中保留对象列表，我担心 Viewstate 被损坏或得到太大。你怎么看？

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:09:15.307

既然你要求**最好的方法**，我会使用 jQuery + knockoutJS。

现在，如果您想坚持传统的 WebForms 方法，为什么不**优雅**呢？创建一个简单的 UserControl 来为您处理所有这些（您也可以将 an`UpdatePanel`与动态控件结合使用）。您只需要动态添加这些控件（如果您知道[页面的生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)，这很容易），[我的 GitHub 站点上有一些工作示例](https://github.com/jupaol/SO-Answers/tree/master/Visual%20Studio%202012/src/SO/WebForms/WebForms_1/Topics/DynamicControls)

在您的控件中，您将公开一个类型的属性，`ProductListItem`在您的页面中，您将遍历所有选定的产品（UserControls）并简单地询问该`ProductListItem`属性

这样您就可以与 ASP.NET 和谐相处

### 编辑 1

此外，基于此：

> 我正在考虑在这里使用 Session 而不是 Viewstate，因为我在同一页面上还有另外两种类似的情况

也许控件是您的最佳选择

我不建议您使用 Session，作为个人选择，我倾向于尽可能避免使用 Session`Session`来释放服务器资源，而是尽可能多地**使用用户 PC 的功能**，使用客户端脚本，这在需要时可以轻松扩展您的 Web 应用程序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:00:17.957

视图状态是解决方案，因为如果您将它们保存在会话中，您将遇到以下主要问题：

*   在用户按下提交之前，会话可能会丢失
*   用户可以打开多个具有相同内容的窗口，但会话将相同，并且会发生很大的混乱。

现在，在视图状态上避免太大，您可以执行以下操作（全部一起）：

*   压缩它
*   拆分它。
*   优化你在上面写的内容，例如你可以在那里写 100 条 DropDownList 记录，或者只是获取那 100 条记录的 sql 选择。

您还可以创建一个将所有数据保存在一起的类，对其进行优化并将其保存在视图状态中。在每次页面加载时，使用此类重新创建页面表单。

[如何优化视图状态的类](https://stackoverflow.com/questions/2784132/how-to-optimize-class-for-viewstate/2788062#2788062)

### 更多关于视图状态优化：

[在提供页面之前确定 ASP.NET 页面视图状态的大小](https://stackoverflow.com/questions/4046805/determine-size-of-asp-net-pages-viewstate-before-serving-page/4047020#4047020)
[http://www.codeproject.com/Articles/14733/ViewState-Compression](http://www.codeproject.com/Articles/14733/ViewState-Compression)
[http://www.hanselman.com/blog/ZippingCompressingViewStateInASPNET.aspx](http://www.hanselman.com/blog/ZippingCompressingViewStateInASPNET.aspx)
[http://www.bloggingdeveloper .com/post/How-To-Compress-ViewState-in-ASPNET-20-ViewState-Compression-with-SystemIOCompression.aspx](http://www.bloggingdeveloper.com/post/How-To-Compress-ViewState-in-ASPNET-20-ViewState-Compression-with-SystemIOCompression.aspx)

# .net-2.0 - 是否可以为 .Net 2.0 编译 Lucene.net 2.9.4？

> ID：12959621
> 
> 赞同：1
> 
> 时间：2012-10-18T16:44:09.480
> 
> 标签：.net-2.0, lucene.net

我正在尝试将 Lucene.net 集成到旧的 .Net 2.0 应用程序中。浏览邮件列表，我得到的印象是 2.9.4g 不再支持 .Net 2.0 但 2.9.4 支持。但是，编译后的 dll 不允许使用 .Net 2.0 框架，并且源代码使用 System.Core（可以添加，但如果可以避免，我宁愿不添加）和 ThreadLocal。

我错过了什么吗？2.9.4 不支持 .Net 2.0 吗？如果是这种情况，支持 .Net 2.0 的最新 Lucene.net 版本是什么？

编辑：

2.9.4 和 2.9.4g 是两个独立的版本。据我了解，2.9.4g 被大量重构以使用更新的 .Net 泛型，使其与 .Net 2.0 完全不兼容。我对重构之前的 2.9.4 版本感兴趣。

这是暗示 2.9.4 将在 2.0 下运行的帖子：http: [//mail-archives.apache.org/mod_mbox/lucene-lucene-net-dev/201105.mbox/%3CBANLkTi=fLnbGa1+ns92n+L9XZoUO9ttb_w@mail。 gmail.com%3E](http://mail-archives.apache.org/mod_mbox/lucene-lucene-net-dev/201105.mbox/%3CBANLkTi=fLnbGa1+ns92n+L9XZoUO9ttb_w@mail.gmail.com%3E)。

编辑2：

如果 2.9.4 可以通过修改支持 .Net 2.0，有人可以指出我如何做到这一点的正确方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:40:38.153

如果不修改，2.9.4g 将无法在.Net 2.0 上编译。它使用了几个新类，您需要自己使用库/代码替代品。

我所知道的适用于 .Net 2.0 的最后一个版本是 2.9.2.2。

[http://nuget.org/packages/Lucene.Net/2.9.2.2](http://nuget.org/packages/Lucene.Net/2.9.2.2)

我认为有计划使下一个版本 3.0.3 .Net 2.0 兼容，但我不确定是否会完成。项目构建文件中有 .Net 2.0 的编译符号，但尚未使用。

# c# - 带有and if语句的空引用c#

> ID：12959626
> 
> 赞同：0
> 
> 时间：2012-10-18T16:44:20.937
> 
> 标签：c#, asp.net

我只想检查空文本框并更改文本框，如果它们在 RowEditing 事件中为空。我就是想不通。当然，当填充网格时，某些框将是空的。另一个问题是我把它放在正确的事件中吗？

这是行编辑事件：

```
protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
{        
    fill_grid();

    //Set the edit index.
    GridView1.EditIndex = e.NewEditIndex;
    //Bind data to the GridView control.
    check_grid_boxes();
    GridView1.DataBind();
} 
```

这是 check_grid_boxes 方法：

```
protected void check_grid_boxes()
{
    if (gtxtLane.Text == "")
    {
        gtxtLane.Text = "0";
    }
    else if (gtxtCarriers.Text == "")
    {
        gtxtCarriers.Text = "0";
    }
    else if (gtxtREV.Text == "")
    { 
        gtxtREV.Text = "0";
    }
    return;
} 
```

在您提到 Java Script 或 Jquery 之前。这是一个 Web 控件，我尝试使用 java 没有奏效。

我将代码更改为：

```
 protected void GridView1_RowEditing(object sender, GridViewEditEventArgs e)
        {
            fill_grid();
            GridView1.EditIndex = e.NewEditIndex;

            var lane = (TextBox)GridView1.Rows[e.NewEditIndex].FindControl("gtxtLane");
            var car = (TextBox)GridView1.Rows[e.NewEditIndex].FindControl("gtxtCarriers");
            var badcar = (TextBox)GridView1.Rows[e.NewEditIndex].FindControl("gtxtBadCarriers");

            if (String.IsNullOrEmpty(lane.Text))
            {
                lane.Text = "0";
            }
            else if (String.IsNullOrEmpty(badcar.Text))
            {
                badcar.Text = "0";
            }
            else if (String.IsNullOrEmpty(car.Text))
            {
                car.Text = "0";
            }
               GridView1.DataBind();
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:49:04.427

您必须获得对正在编辑的该行内的文本框的引用，如下所示：

```
GridView1.EditIndex = e.NewEditIndex;

TextBox gtxtLane = (TextBox)GridView1.Rows[e.NewEditIndex].FindControl("gtxtLane"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T20:30:07.647

啊！！！！怎么样 --> 选择 isnull(lane,'0') as Lane <---。我不敢相信我没想到！！浪费了6个小时！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:50:18.707

您可以使用 gridview 的 nulldisplaytext 属性

```
<asp:boundfield datafield="discounttype"
            nulldisplaytext="0"
            headertext="Discount Type"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T16:53:31.887

我猜你遇到了一个参考问题，因为编译器不知道从哪里得到`gtxtLane`其余的。请记住，网格中的每一行都有自己的这些控件版本，因此您需要直接引用它们。您可以`FindControl`在行对象上使用。您可以从中获取行对象的引用`GridViewEditEventArgs`。你的代码看起来像这样（`e`指`GridViewEditEventArgs`）

```
var gtxtLane = (TextBox)GridView1.Rows[e.NewEditIndex].FindControl("gtxtLane");
if (gtxtLane.Text == "")
{
    gtxtLane.Text = "0";
} 
```

`e.NewEditIndex`获取正在编辑的行的索引，我们使用它从 gridview 获取行对象，然后我们找到想要的控件，并将其转换为`TextBox`，然后使用它。冲洗并重复。

# c# - 有没有更好的方法来创建多维强类型数据结构？

> ID：12959627
> 
> 赞同：11
> 
> 时间：2012-10-18T16:44:22.547
> 
> 标签：c#, data-structures, f#

我需要一个多维数据结构，其中每个维度都是一个在设计时已知的小列表。

在我程序的不同位置，我希望能够以强类型的方式访问按不同维度“切片”的数据。

我在下面放了一些示例代码，它们适用于使用嵌套接口的 2D 示例，但我想它在 3D 或 4D 中会变得非常可怕。正如@kvb 所指出的，所需的样板代码将呈指数级增长。

有人有更好的建议吗？我的意思是，保持代码简单/简短/易于理解，同时仍然保留按照以下几行做事的能力：

```
Data a = new Data(...)
...
SomeMethodThatOnlyCaresAboutRedThings(a.Red) // takes a IBySize<T>
...
SomeMethodThatOnlyCaresAboutBigThings(a.Big) // takes a IByColour<T>
... 
```

这避免了那些方法必须了解与它们无关的数据结构部分，从而使它们更容易测试。

我在这里仅使用颜色/尺寸作为示例，对于无意中误导任何人这些选择是有意义的，我深表歉意。T 可以是一个简单的数据项，如浮点数或其他一些简单的数据结构。

标记为 F# 和 C#，因为我对任何一个解决方案都很满意。

```
public interface IByColour<T>
{
    T Green { get; }
    T Red { get; }
    T Blue { get; }
}

public interface IBySize<T>
{
    T Small { get; }
    T Big { get; }
}

internal class ByColour<T> : IByColour<T>
{
    public T Green { get; private set; }
    public T Red { get; private set; }
    public T Blue { get; private set; }

    internal ByColour(T green, T red, T blue)
    {
        Green = green;
        Red = red;
        Blue = blue;
    }
}

internal class BySize<T> : IBySize<T>
{
    public T Small { get; private set; }
    public T Big { get; private set; }

    internal BySize(T small, T big)
    {
        Small = small;
        Big = big;
    }
}

public class Data<T> : IByColour<IBySize<T>>, IBySize<IByColour<T>>
{
    public IBySize<T> Green { get; private set; }
    public IBySize<T> Red { get; private set; }
    public IBySize<T> Blue { get; private set; }

    public IByColour<T> Small { get; private set; }
    public IByColour<T> Big { get; private set; }

    public Data(IBySize<T> green, IBySize<T> red, IBySize<T> blue)
    {
        Green = green;
        Red = red;
        Blue = blue;

        Small = new ByColour<T>(Green.Small, Red.Small, Blue.Small);
        Big = new ByColour<T>(Green.Big, Red.Big, Blue.Big);
    }
} 
```

编辑：澄清我的意思是“更好”，这是我的解决方案所具有的理想属性，并解释我想如何使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:55:06.290

这听起来像一个很好的老式的使用`DataTable`。然后，您可以使用 Linq 来根据需要进行切片和切块，并且由所选列的不同组合创建的任何唯一类型都由编译器自动生成。a 中的所有列`DataTable`都是强类型的，对它们的查询结果也是如此。此外，`DataColumns`in a`DataTable`可以具有任何类型，包括复杂对象或您自己的枚举类型。

如果您想坚持使用更数学/不可变/ F# 的做事方式，您可以使用数组或`List`of `Tuple<Type1, Type2, .. TypeN>`，这与 a 基本上是一样的`DataTable`。

如果您提供更多关于您正在建模的背景，我可以提供一个示例。我不确定您发布的代码是否应该代表衣服、图像（RGB 颜色空间）或完全不同的东西。

[一小时后]好吧，OP没有更新，所以我将继续举一个例子，我使用`List<Tuple<x, y, ..n>>`并假设这些对象是服装。

```
// Some enums
public enum Size { Small, Medium, Large }
public enum Color { Red, Green, Blue, Purple, Brown }
public enum Segment { Men, Women, Boys, Girls, Infants }

// Fetches the actual list of items, where the object
// item is the actual shirt, sock, shoe or whatever object
static List<Tuple<Size, Color, Segment, object>> GetAllItems() {
    return new List<Tuple<Size, Color, Segment, object>> {
        Tuple.Create(Size.Small, Color.Red, Segment.Boys, (object)new { Name="I'm a sock! Just one sock." }),
        Tuple.Create(Size.Large, Color.Blue, Segment.Infants, (object)new { Name="Baby hat, so cute." }),
        Tuple.Create(Size.Large, Color.Green, Segment.Women, (object)new { Name="High heels. In GREEN." }),
    };
}

static void test() {
    var allItems = GetAllItems();

    // Lazy (non-materialized) definition of a "slice" of everything that's Small
    var smallQuery = allItems.Where(x => x.Item1 == Size.Small);

    // Lazy map where the key is the size and the value is 
    // an IEnumerable of all items that are of that size
    var sizeLookup = allItems.ToLookup(x => x.Item1, x => x);

    // Materialize the map as a dictionary the key is the size and the 
    // value is a list of all items that are of that size
    var sizeMap = sizeLookup.ToDictionary(x => x.Key, x => x.ToList());

    // Proof:
    foreach (var size in sizeMap.Keys) {
        var list = sizeMap[size];
        Console.WriteLine("Size {0}:", size);
        foreach (var item in list) {
            Console.WriteLine("  Item: {{ Size={0}, Color={1}, Segment={2}, value={3} }}",
                item.Item1, item.Item2, item.Item3, item.Item4);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T19:11:21.137

您是否考虑过这种方法：

```
public enum ElementSize
{
    Small,
    Big
}

public enum ElementColor
{
    Green,
    Red,
    Blue
}

public enum Temperature
{
    Hot,
    Cold
}

public class Element<T>
{
    public T Value { get; set; }
    public ElementColor Color { get; set; }
    public Temperature Temperature { get; set; }
    public ElementSize Size { get; set; }
}

public class Data<T>
{
    private readonly IList<Element<T>> list = new List<Element<T>>();

    public T Value
    {
        get
        {
            if ( list.Count == 1 )
                return list[0].Value;
            else
                throw new Exception("Throw a proper exception or consider not implementing this property at all");
        }
    }

    public Data<T> Green
    {
        get { return FilterByColor(ElementColor.Green); }
    }

    public Data<T> Red
    {
        get { return FilterByColor(ElementColor.Red); }
    }

    private Data<T> FilterByColor(ElementColor color)
    {
        return new Data<T>(from x in list where x.Color == color select x);
    }

    //etc...

    public Data<T> Small
    {
        get { return new Data<T>(from x in list where x.Size == ElementSize.Small select x); }
    }

    public Data<T> Cold
    {
        get { return new Data<T>(from x in list where x.Temperature == Temperature.Cold select x); }
    }

    public void Add(Element<T> element)
    {
        list.Add(element);
    }

    public Data(IEnumerable<Element<T>> list)
    {
        this.list = new List<Element<T>>(list);
    }
} 
```

对不起代码质量。这只是为了展示这个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T20:06:25.617

这是您可以在 F# 中执行的操作：

```
/// Use discriminated unions which are safer than enums
type Size = Smal | Big
type Color = Red | Green | Blue

/// Use 'T to demonstrate parameterized records
type Element<'T> = {Value: 'T; Size: Size; Color: Color}

/// Query on a list of elements using pattern matching on records
let getElementsByColor color elements = 
    List.filter (fun {Color = c} -> c = color) elements

let getElementsBySize size elements = 
    List.filter (fun {Size = s} -> s = size) elements 
```

本质上，每个属性都被声明为记录类型中的一个属性`Element<'T>`。由于记录上的模式匹配，向记录类型添加更多属性不会改变查询。

# php - ios POST 元素未发布

> ID：12959629
> 
> 赞同：0
> 
> 时间：2012-10-18T16:44:27.327
> 
> 标签：php, objective-c, ios

我试图将一些数据发布到 php 页面并且发布的元素没有通过。我知道这是因为 php 返回`$_REQUEST`，这只是 phpsession，而不是应该发布的用户名。什么不在这里？

```
NSString *urlString = @"http://www.example.com/api";

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:urlString]];
[request setHTTPMethod:@"POST"];

NSString *boundary = @"---------------------------14737809831466499882746641449";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"username\"\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"thisisit\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[request setHTTPBody:body];
NSString *postLength = [NSString stringWithFormat:@"%d", [body length]];

[request setValue:postLength forHTTPHeaderField:@"Content-Length"];

NSURLResponse *response = [[NSURLResponse alloc] init];
NSError *err;
NSData *responseData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&err]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:53:09.060

您需要设置最终边界。在之前添加此代码`[request setHTTPBody:body]`

```
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# cordova - 在 Phonegap 中安全登录

> ID：12959638
> 
> 赞同：5
> 
> 时间：2012-10-18T16:44:42.823
> 
> 标签：cordova, login, security, encryption-asymmetric

我正在创建一个 Phonegap 应用程序，它需要允许用户登录到我们的中央身份验证服务。

我担心的是，由于手机上的文件是在本地加载的（通过 file://），因此没有像通过 HTTPS 连接那样的安全性。如果我将用户名和密码传递到我们服务器上的 HTTPS 位置，即使响应是安全的，请求也不会受到保护。

我不想使用 ChildBrowser 插件进行登录，因为似乎没有任何类型的事件冒泡会告诉我登录过程何时完成，而且并非所有平台都支持 ChildBrowser 插件。

看起来使用非对称加密使用公钥加密用户名/密码组合并使用私钥在服务器上对其进行解密似乎是合理的。不过，我似乎无法让任何 javascript RSA 库在后端与 Java 配合得很好。

对于在 Phonegap 应用程序中保护用户密码的这种情况，非对称加密看起来不错吗？有更好的解决方案吗？

如何使用 Javascript -> Java 来实现这一点？我一直在客户端使用 ohdave.com/RSA 脚本，但 Java 不想使用 ohdave 生成​​的密钥重新创建密钥。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-30T18:29:26.340

从那以后，我了解到通过 HTTPS 请求身份验证 Web 服务将启动握手，从而允许使用 SSL 证书对凭据进行加密。

至于在手机上存储凭据，我是这样做的：

1.  通过 SSL 在基本授权标头中使用 Base64 编码将凭据发送到登录 Web 服务。
2.  成功的登录响应包括使用服务器上的密钥加密的凭据 AES。
3.  AES 加密凭据存储在手机上。
4.  未来的登录是通过在摘要授权标头中通过 SSL 将加密凭据发送到登录 Web 服务来处理的。

# java - 使用 Apache POI WordToHtmlConverter 的内存泄漏

> ID：12959641
> 
> 赞同：1
> 
> 时间：2012-10-18T16:44:45.183
> 
> 标签：java, tomcat, memory-leaks, apache-poi

我在我的 Java EE 项目（在 Apache Tomcat 7.0.32 上运行）中使用 Apache POI 库将 .doc 文件转换为 .html 文件。

**我将org.apache.poi.hwpf.converter包中的****WordToHtmlConverter.java**类作为基础。我唯一改变的是 - 我在构造函数中传递输出流的文件（而不是在*main()*方法中）。

 ***当我运行我的应用程序并上传 .doc 文件（大小 < 500KB）时，我看到 java.exe 进程增加了 10-15 MB。当我上传另一个 .doc 文件时，java.exe 再次增加了 2-3 MB。所以每次我上传 .doc 文件时，java.exe 都会增加 2-3 MB。如果我上传大的 .doc 文件（大小 > 3MB），java.exe 会再次增加 20-30 MB。所以它一直持续到**java.lang.OutOfMemoryError: Java heap space**。

为什么会这样？为什么每次上传 .doc 文件时 java.exe 进程会增加 2-3 MB？我应该怎么做才能避免出现**java.lang.OutOfMemoryError**？

这是我在我的应用程序中使用的 WordToHtmlConverter.java 的源代码：

```
package ru.emzior.view.convertors;

import java.io.Writer;
import java.io.OutputStreamWriter;
import java.io.FileOutputStream;
import org.apache.poi.hwpf.converter.WordToHtmlConverter;
import org.apache.poi.hwpf.converter.HtmlDocumentFacade;
import org.apache.poi.hwpf.converter.AbstractWordConverter;
import java.io.File;
import java.io.FileWriter;
import java.util.List;
import java.util.Stack;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.apache.poi.hpsf.SummaryInformation;
import org.apache.poi.hwpf.HWPFDocument;
import org.apache.poi.hwpf.HWPFDocumentCore;
import org.apache.poi.hwpf.converter.FontReplacer.Triplet;
import org.apache.poi.hwpf.usermodel.Bookmark;
import org.apache.poi.hwpf.usermodel.CharacterRun;
import org.apache.poi.hwpf.usermodel.OfficeDrawing;
import org.apache.poi.hwpf.usermodel.Paragraph;
import org.apache.poi.hwpf.usermodel.Picture;
import org.apache.poi.hwpf.usermodel.Range;
import org.apache.poi.hwpf.usermodel.Section;
import org.apache.poi.hwpf.usermodel.Table;
import org.apache.poi.hwpf.usermodel.TableCell;
import org.apache.poi.hwpf.usermodel.TableRow;
import org.apache.poi.util.Beta;
import org.apache.poi.util.POILogFactory;
import org.apache.poi.util.POILogger;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Text;

import static org.apache.poi.hwpf.converter.AbstractWordUtils.TWIPS_PER_INCH;

/**
 * Converts Word files (95-2007) into HTML files.
 * <p>
 * This implementation doesn't create images or links to them. This can be
 * changed by overriding {@link #processImage(Element, boolean, Picture)}
 * method.
 * 
 * @author Sergey Vladimirov (vlsergey {at} gmail {dot} com)
 */
@Beta
public class DocToHtmlConverter extends AbstractWordConverter implements HtmlConverter
{

    private String filePath;
    private String tempDirectory;

    private static class BlockProperies
    {
        final String pFontName;
        final int pFontSize;

        public BlockProperies( String pFontName, int pFontSize )
        {
            this.pFontName = pFontName;
            this.pFontSize = pFontSize;
        }
    }

    public DocToHtmlConverter(String filePath, String tempDirectory) {
        this.filePath = filePath;
        this.htmlDocumentFacade = null;
        this.tempDirectory = tempDirectory;
    }

    private static final POILogger logger = POILogFactory
            .getLogger( DocToHtmlConverter.class );

    private static String getSectionStyle( Section section )
    {
        float leftMargin = section.getMarginLeft() / TWIPS_PER_INCH;
        float rightMargin = section.getMarginRight() / TWIPS_PER_INCH;
        float topMargin = section.getMarginTop() / TWIPS_PER_INCH;
        float bottomMargin = section.getMarginBottom() / TWIPS_PER_INCH;

        String style = "margin: " + topMargin + "in " + rightMargin + "in "
                + bottomMargin + "in " + leftMargin + "in;";

        if ( section.getNumColumns() > 1 )
        {
            style += "column-count: " + ( section.getNumColumns() ) + ";";
            if ( section.isColumnsEvenlySpaced() )
            {
                float distance = section.getDistanceBetweenColumns()
                        / TWIPS_PER_INCH;
                style += "column-gap: " + distance + "in;";
            }
            else
            {
                style += "column-gap: 0.25in;";
            }
        }
        return style;
    }

    public File convertToFile(){
        String slashType = (filePath.lastIndexOf("\\") > 0) ? "\\" : "/"; // Windows or UNIX
        String wordFileName = filePath.substring(filePath.lastIndexOf(slashType) + 1, filePath.length());
        File htmlFile = new File(tempDirectory + wordFileName + ".htm");

        if(!htmlFile.exists()){
            try
            {
                Document doc = DocToHtmlConverter.process( new File(filePath) );

//                FileWriter out = new FileWriter(htmlFile);
                Writer out = new OutputStreamWriter(new FileOutputStream(htmlFile), "UTF-8");
                DOMSource domSource = new DOMSource( doc );
                StreamResult streamResult = new StreamResult( out );

                TransformerFactory tf = TransformerFactory.newInstance();
                Transformer serializer = tf.newTransformer();
                // TODO set encoding from a command argument
                serializer.setOutputProperty( OutputKeys.ENCODING, "UTF-8" );
                serializer.setOutputProperty( OutputKeys.INDENT, "yes" );
                serializer.setOutputProperty( OutputKeys.METHOD, "html" );
                serializer.transform( domSource, streamResult );

                out.flush();
                out.close();
            }
            catch ( Exception e )
            {
                e.printStackTrace();
            }
        }

        return htmlFile;
    }

    static Document process( File docFile ) throws Exception
    {
        final HWPFDocumentCore wordDocument = WordToHtmlUtils.loadDoc( docFile );
        DocToHtmlConverter wordToHtmlConverter = new DocToHtmlConverter(
                DocumentBuilderFactory.newInstance().newDocumentBuilder()
                        .newDocument() );
        wordToHtmlConverter.processDocument( wordDocument );
        return wordToHtmlConverter.getDocument();
    }

    private final Stack<BlockProperies> blocksProperies = new Stack<BlockProperies>();

    private final HtmlDocumentFacade htmlDocumentFacade;

    private Element notes = null;

    public DocToHtmlConverter( Document document )
    {
        this.htmlDocumentFacade = new HtmlDocumentFacade( document );
    }

    public DocToHtmlConverter( HtmlDocumentFacade htmlDocumentFacade )
    {
        this.htmlDocumentFacade = htmlDocumentFacade;
    }

    @Override
    protected void afterProcess()
    {
        if ( notes != null )
            htmlDocumentFacade.getBody().appendChild( notes );

        htmlDocumentFacade.updateStylesheet();
    }

    public Document getDocument()
    {
        return htmlDocumentFacade.getDocument();
    }

    @Override
    protected void outputCharacters( Element pElement,
            CharacterRun characterRun, String text )
    {
        Element span = htmlDocumentFacade.getDocument().createElement( "span" );
        pElement.appendChild( span );

        StringBuilder style = new StringBuilder();
        BlockProperies blockProperies = this.blocksProperies.peek();
        Triplet triplet = getCharacterRunTriplet( characterRun );

        if (WordToHtmlUtils.isNotEmpty( triplet.fontName )
                && !WordToHtmlUtils.equals( triplet.fontName,
                        blockProperies.pFontName ) )
        {
            style.append( "font-family:" + triplet.fontName + ";" );
        }
        if ( characterRun.getFontSize() / 2 != blockProperies.pFontSize )
        {
            style.append( "font-size:" + characterRun.getFontSize() / 2 + "pt;" );
        }
        if ( triplet.bold )
        {
            style.append( "font-weight:bold;" );
        }
        if ( triplet.italic )
        {
            style.append( "font-style:italic;" );
        }

        WordToHtmlUtils.addCharactersProperties( characterRun, style );
        if ( style.length() != 0 )
            htmlDocumentFacade.addStyleClass( span, "s", style.toString() );

        Text textNode = htmlDocumentFacade.createText( text );
        span.appendChild( textNode );
    }

    @Override
    protected void processBookmarks( HWPFDocumentCore wordDocument,
            Element currentBlock, Range range, int currentTableLevel,
            List<Bookmark> rangeBookmarks )
    {
        Element parent = currentBlock;
        for ( Bookmark bookmark : rangeBookmarks )
        {
            Element bookmarkElement = htmlDocumentFacade
                    .createBookmark( bookmark.getName() );
            parent.appendChild( bookmarkElement );
            parent = bookmarkElement;
        }

        if ( range != null )
            processCharacters( wordDocument, currentTableLevel, range, parent );
    }

    @Override
    protected void processDocumentInformation(
            SummaryInformation summaryInformation )
    {
        if (WordToHtmlUtils.isNotEmpty( summaryInformation.getTitle() ) )
            htmlDocumentFacade.setTitle( summaryInformation.getTitle() );

        if (WordToHtmlUtils.isNotEmpty( summaryInformation.getAuthor() ) )
            htmlDocumentFacade.addAuthor( summaryInformation.getAuthor() );

        if (WordToHtmlUtils.isNotEmpty( summaryInformation.getKeywords() ) )
            htmlDocumentFacade.addKeywords( summaryInformation.getKeywords() );

        if (WordToHtmlUtils.isNotEmpty( summaryInformation.getComments() ) )
            htmlDocumentFacade
                    .addDescription( summaryInformation.getComments() );
    }

    @Override
    public void processDocumentPart( HWPFDocumentCore wordDocument, Range range )
    {
        super.processDocumentPart( wordDocument, range );
        afterProcess();
    }

    @Override
    protected void processDrawnObject( HWPFDocument doc,
            CharacterRun characterRun, OfficeDrawing officeDrawing,
            String path, Element block )
    {
        Element img = htmlDocumentFacade.createImage( path );
        block.appendChild( img );
    }

    @Override
    protected void processEndnoteAutonumbered( HWPFDocument wordDocument,
            int noteIndex, Element block, Range endnoteTextRange )
    {
        processNoteAutonumbered( wordDocument, "end", noteIndex, block,
                endnoteTextRange );
    }

    @Override
    protected void processFootnoteAutonumbered( HWPFDocument wordDocument,
            int noteIndex, Element block, Range footnoteTextRange )
    {
        processNoteAutonumbered( wordDocument, "foot", noteIndex, block,
                footnoteTextRange );
    }

    @Override
    protected void processHyperlink( HWPFDocumentCore wordDocument,
            Element currentBlock, Range textRange, int currentTableLevel,
            String hyperlink )
    {
        Element basicLink = htmlDocumentFacade.createHyperlink( hyperlink );
        currentBlock.appendChild( basicLink );

        if ( textRange != null )
            processCharacters( wordDocument, currentTableLevel, textRange,
                    basicLink );
    }

    protected void processImage( Element currentBlock, boolean inlined,
            Picture picture, String imageSourcePath )
    {
        final int aspectRatioX = picture.getHorizontalScalingFactor();
        final int aspectRatioY = picture.getVerticalScalingFactor();

        StringBuilder style = new StringBuilder();

        final float imageWidth;
        final float imageHeight;

        final float cropTop;
        final float cropBottom;
        final float cropLeft;
        final float cropRight;

        if ( aspectRatioX > 0 )
        {
            imageWidth = picture.getDxaGoal() * aspectRatioX / 1000
                    / TWIPS_PER_INCH;
            cropRight = picture.getDxaCropRight() * aspectRatioX / 1000
                    / TWIPS_PER_INCH;
            cropLeft = picture.getDxaCropLeft() * aspectRatioX / 1000
                    / TWIPS_PER_INCH;
        }
        else
        {
            imageWidth = picture.getDxaGoal() / TWIPS_PER_INCH;
            cropRight = picture.getDxaCropRight() / TWIPS_PER_INCH;
            cropLeft = picture.getDxaCropLeft() / TWIPS_PER_INCH;
        }

        if ( aspectRatioY > 0 )
        {
            imageHeight = picture.getDyaGoal() * aspectRatioY / 1000
                    / TWIPS_PER_INCH;
            cropTop = picture.getDyaCropTop() * aspectRatioY / 1000
                    / TWIPS_PER_INCH;
            cropBottom = picture.getDyaCropBottom() * aspectRatioY / 1000
                    / TWIPS_PER_INCH;
        }
        else
        {
            imageHeight = picture.getDyaGoal() / TWIPS_PER_INCH;
            cropTop = picture.getDyaCropTop() / TWIPS_PER_INCH;
            cropBottom = picture.getDyaCropBottom() / TWIPS_PER_INCH;
        }

        Element root;
        if ( cropTop != 0 || cropRight != 0 || cropBottom != 0 || cropLeft != 0 )
        {
            float visibleWidth = Math
                    .max( 0, imageWidth - cropLeft - cropRight );
            float visibleHeight = Math.max( 0, imageHeight - cropTop
                    - cropBottom );

            root = htmlDocumentFacade.createBlock();
            htmlDocumentFacade.addStyleClass( root, "d",
                    "vertical-align:text-bottom;width:" + visibleWidth
                            + "in;height:" + visibleHeight + "in;" );

            // complex
            Element inner = htmlDocumentFacade.createBlock();
            htmlDocumentFacade.addStyleClass( inner, "d",
                    "position:relative;width:" + visibleWidth + "in;height:"
                            + visibleHeight + "in;overflow:hidden;" );
            root.appendChild( inner );

            Element image = htmlDocumentFacade.createImage( imageSourcePath );
            htmlDocumentFacade.addStyleClass( image, "i",
                    "position:absolute;left:-" + cropLeft + ";top:-" + cropTop
                            + ";width:" + imageWidth + "in;height:"
                            + imageHeight + "in;" );
            inner.appendChild( image );

            style.append( "overflow:hidden;" );
        }
        else
        {
            root = htmlDocumentFacade.createImage( imageSourcePath );
            root.setAttribute( "style", "width:" + imageWidth + "in;height:"
                    + imageHeight + "in;vertical-align:text-bottom;" );
        }

        currentBlock.appendChild( root );
    }

    @Override
    protected void processImageWithoutPicturesManager( Element currentBlock,
            boolean inlined, Picture picture )
    {
        // no default implementation -- skip
        currentBlock.appendChild( htmlDocumentFacade.getDocument()
                .createComment( "Image link to '"
                        + picture.suggestFullFileName() + "' can be here" ) );
    }

    @Override
    protected void processLineBreak( Element block, CharacterRun characterRun )
    {
        block.appendChild( htmlDocumentFacade.createLineBreak() );
    }

    protected void processNoteAutonumbered( HWPFDocument doc, String type,
            int noteIndex, Element block, Range noteTextRange )
    {
        final String textIndex = String.valueOf( noteIndex + 1 );
        final String textIndexClass = htmlDocumentFacade.getOrCreateCssClass(
                "a", "vertical-align:super;font-size:smaller;" );
        final String forwardNoteLink = type + "note_" + textIndex;
        final String backwardNoteLink = type + "note_back_" + textIndex;

        Element anchor = htmlDocumentFacade.createHyperlink( "#"
                + forwardNoteLink );
        anchor.setAttribute( "name", backwardNoteLink );
        anchor.setAttribute( "class", textIndexClass + " " + type
                + "noteanchor" );
        anchor.setTextContent( textIndex );
        block.appendChild( anchor );

        if ( notes == null )
        {
            notes = htmlDocumentFacade.createBlock();
            notes.setAttribute( "class", "notes" );
        }

        Element note = htmlDocumentFacade.createBlock();
        note.setAttribute( "class", type + "note" );
        notes.appendChild( note );

        Element bookmark = htmlDocumentFacade.createBookmark( forwardNoteLink );
        bookmark.setAttribute( "href", "#" + backwardNoteLink );
        bookmark.setTextContent( textIndex );
        bookmark.setAttribute( "class", textIndexClass + " " + type
                + "noteindex" );
        note.appendChild( bookmark );
        note.appendChild( htmlDocumentFacade.createText( " " ) );

        Element span = htmlDocumentFacade.getDocument().createElement( "span" );
        span.setAttribute( "class", type + "notetext" );
        note.appendChild( span );

        this.blocksProperies.add( new BlockProperies( "", -1 ) );
        try
        {
            processCharacters( doc, Integer.MIN_VALUE, noteTextRange, span );
        }
        finally
        {
            this.blocksProperies.pop();
        }
    }

    @Override
    protected void processPageBreak( HWPFDocumentCore wordDocument, Element flow )
    {
        flow.appendChild( htmlDocumentFacade.createLineBreak() );
    }

    protected void processPageref( HWPFDocumentCore hwpfDocument,
            Element currentBlock, Range textRange, int currentTableLevel,
            String pageref )
    {
        Element basicLink = htmlDocumentFacade.createHyperlink( "#" + pageref );
        currentBlock.appendChild( basicLink );

        if ( textRange != null )
            processCharacters( hwpfDocument, currentTableLevel, textRange,
                    basicLink );
    }

    protected void processParagraph( HWPFDocumentCore hwpfDocument,
            Element parentElement, int currentTableLevel, Paragraph paragraph,
            String bulletText )
    {
        final Element pElement = htmlDocumentFacade.createParagraph();
        parentElement.appendChild( pElement );

        StringBuilder style = new StringBuilder();
        WordToHtmlUtils.addParagraphProperties( paragraph, style );

        final int charRuns = paragraph.numCharacterRuns();

        if ( charRuns == 0 )
        {
            return;
        }

        {
            final String pFontName;
            final int pFontSize;
            final CharacterRun characterRun = paragraph.getCharacterRun( 0 );
            if ( characterRun != null )
            {
                Triplet triplet = getCharacterRunTriplet( characterRun );
                pFontSize = characterRun.getFontSize() / 2;
                pFontName = triplet.fontName;
                WordToHtmlUtils.addFontFamily( pFontName, style );
                WordToHtmlUtils.addFontSize( pFontSize, style );
            }
            else
            {
                pFontSize = -1;
                pFontName = "";
            }
            blocksProperies.push( new BlockProperies( pFontName, pFontSize ) );
        }
        try
        {
            if (WordToHtmlUtils.isNotEmpty( bulletText ) )
            {
                if ( bulletText.endsWith( "\t" ) )
                {
                    /*
                     * We don't know how to handle all cases in HTML, but at
                     * least simplest case shall be handled
                     */
                    final float defaultTab = TWIPS_PER_INCH / 2;
                    float firstLinePosition = paragraph.getIndentFromLeft()
                            + paragraph.getFirstLineIndent() + 20; // char have
                                                                   // some space

                    float nextStop = (float) ( Math.ceil( firstLinePosition
                            / defaultTab ) * defaultTab );

                    final float spanMinWidth = nextStop - firstLinePosition;

                    Element span = htmlDocumentFacade.getDocument()
                            .createElement( "span" );
                    htmlDocumentFacade
                            .addStyleClass( span, "s",
                                    "display: inline-block; text-indent: 0; min-width: "
                                            + ( spanMinWidth / TWIPS_PER_INCH )
                                            + "in;" );
                    pElement.appendChild( span );

                    Text textNode = htmlDocumentFacade.createText( bulletText
                            .substring( 0, bulletText.length() - 1 )
                            + UNICODECHAR_ZERO_WIDTH_SPACE
                            + UNICODECHAR_NO_BREAK_SPACE );
                    span.appendChild( textNode );
                }
                else
                {
                    Text textNode = htmlDocumentFacade.createText( bulletText
                            .substring( 0, bulletText.length() - 1 ) );
                    pElement.appendChild( textNode );
                }
            }

            processCharacters( hwpfDocument, currentTableLevel, paragraph,
                    pElement );
        }
        finally
        {
            blocksProperies.pop();
        }

        if ( style.length() > 0 )
            htmlDocumentFacade.addStyleClass( pElement, "p", style.toString() );

        WordToHtmlUtils.compactSpans( pElement );
        return;
    }

    protected void processSection( HWPFDocumentCore wordDocument,
            Section section, int sectionCounter )
    {
        Element div = htmlDocumentFacade.createBlock();
        htmlDocumentFacade.addStyleClass( div, "d", getSectionStyle( section ) );
        htmlDocumentFacade.getBody().appendChild( div );

        processParagraphes( wordDocument, div, section, Integer.MIN_VALUE );
    }

    @Override
    protected void processSingleSection( HWPFDocumentCore wordDocument,
            Section section )
    {
        htmlDocumentFacade.addStyleClass( htmlDocumentFacade.getBody(), "b",
                getSectionStyle( section ) );

        processParagraphes( wordDocument, htmlDocumentFacade.getBody(), section,
                Integer.MIN_VALUE );
    }

} 
```

这是开始转换文件的方法：

```
public File convertToFile(){
        String slashType = (filePath.lastIndexOf("\\") > 0) ? "\\" : "/"; // Windows or UNIX
        String wordFileName = filePath.substring(filePath.lastIndexOf(slashType) + 1, filePath.length());
        File htmlFile = new File(tempDirectory + wordFileName + ".htm");

        if(!htmlFile.exists()){
            try
            {
                Document doc = DocToHtmlConverter.process( new File(filePath) );

//                FileWriter out = new FileWriter(htmlFile);
                Writer out = new OutputStreamWriter(new FileOutputStream(htmlFile), "UTF-8");
                DOMSource domSource = new DOMSource( doc );
                StreamResult streamResult = new StreamResult( out );

                TransformerFactory tf = TransformerFactory.newInstance();
                Transformer serializer = tf.newTransformer();
                // TODO set encoding from a command argument
                serializer.setOutputProperty( OutputKeys.ENCODING, "UTF-8" );
                serializer.setOutputProperty( OutputKeys.INDENT, "yes" );
                serializer.setOutputProperty( OutputKeys.METHOD, "html" );
                serializer.transform( domSource, streamResult );

                out.flush();
                out.close();
            }
            catch ( Exception e )
            {
                e.printStackTrace();
            }
        }

        return htmlFile;
    } 
```***

# sml - ml 中的匿名函数

> ID：12959642
> 
> 赞同：3
> 
> 时间：2012-10-18T16:44:48.060
> 
> 标签：sml

我必须编写一个匿名函数，它采用整数列表和两个函数 f 和 g。该函数将 f 应用于列表中的偶数 int，并将 g 应用于奇数 int。最后该函数返回所有计算值的总和..`f(x)=2x,g(x)=x*x`

我的代码是

```
val f = fn x => 2 * x;
val g = fn x => x * x;

fun s [] f g = []
 | s L f g =
   let 
     val n = hd(L) mod 2;
   in
    fn n => case n of
   0 => f(hd(L)) + s tl(L) f g
 | x => g(hd(L)) + s tl(L) f g
   end; 
```

怎么了？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:22:37.427

首先，您应该将括号括起来，以便正确解析`tl(L)`调用。`s (tl(L)) f g`其次，函数的返回类型是`int`基本情况`[]`应该返回`0`，而归纳情况不应该返回`fn n =>`（因为`n`已经由 定义`val`）。

我使用模式匹配而不是重构函数`hd`，`tl`并将频繁变化的参数放在最后一个：

```
fun sum f g [] = 0
 | sum f g (x::xs) =
   let 
     val n = x mod 2
   in
     case n of
       0 => f x + sum f g xs
     | _ => g x + sum f g xs
   end; 
```

# sql - 在 oracle 表单中插入记录

> ID：12959643
> 
> 赞同：0
> 
> 时间：2012-10-18T16:44:49.230
> 
> 标签：sql, oracle, plsql, oracleforms

我正在使用 Oracle Forms Builder，并且我有一个包含多条记录的块。代码看起来有点像这样

```
first_record;
IF NAME_IN('SYSTEM.LAST_RECORD') != 'TRUE' THEN                                 
  LOOP                  
    IF name_in('QOTLNDET_LINES.SERIAL_NUMBER') IS NOT NULL THEN                         
      QOTLNDET_LINES_REMOVE.Delete_Row;
      clear_record;     
    ELSE                    
      next_record;
    END IF;
    EXIT WHEN NAME_IN('SYSTEM.LAST_RECORD') = 'TRUE';

  END LOOP;
  execute_query;
  COMMIT;
  go_block('QOTHDDET_MAIN');
END IF; 
```

就在 next_record 之前，在 ELSE 段内，我需要删除当前记录并重新插入它。问题不是删除记录，而是重新插入它。有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:17:32.313

我同意 APC，而不是重新插入记录，这意味着删除然后再次插入，更简单的方法是只更新 DB（或非 DB）块中的字段。就像是-

```
Go_Block('Block_B1');
Last_Record;
L_num_records := :system.cursor_record;
FOR i in 1..L_num_records
LOOP    
     Go_Block('Block_B1');
     Go_Record(i);
     --update the fields in the row
     :Block_B1.item1 := 'Set your value';
     :Block_B1.item2 := 'Set your value';
     ...
     ...
     Next_Record;
END LOOP;
First_Record; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:02:12.467

I agree with APC and Annjawn that the update seems to be the correct way to go. When looking in your code it seems like you have your code in a pll library. This when you are using the name_in() instead of directly referencing the item. If this is true then means that you naturally can't use the direct reference when assigning the value to the item. Instead you have to use the copy(). It's some time since I have used name_in() and copy() but something like this should work:

```
IF NAME_IN('SYSTEM.LAST_RECORD') != 'TRUE' THEN                                 
  LOOP                  
    IF name_in('QOTLNDET_LINES.SERIAL_NUMBER') IS NOT NULL THEN                         
      QOTLNDET_LINES_REMOVE.Delete_Row;
      clear_record;     
    ELSE        
      Copy('new value', 'QOTLNDET_LINES.INVENTORY_ITEM');

      next_record;
    END IF;
    EXIT WHEN NAME_IN('SYSTEM.LAST_RECORD') = 'TRUE';

  END LOOP;
  execute_query;
  COMMIT;
  go_block('QOTHDDET_MAIN');
END IF; 
```

# facebook - Facebook 应用酒精限制

> ID：12959647
> 
> 赞同：1
> 
> 时间：2012-10-18T16:45:17.833
> 
> 标签：facebook, facebook-graph-api

我在 Facebook 应用程序上坚持饮酒限制。在开发者专区，我将内容限制设置为“含有酒精”，然后在我的应用中：

```
<?php 

$appTokenUrl = 'https://graph.facebook.com/oauth/access_token?'
. 'client_id=' . $appId
. '&client_secret=' . $appSecret
. '&grant_type=client_credentials';

$appAccessToken = file_get_contents($appTokenUrl);  

$setUrl = 'https://graph.facebook.com/'
. $appId . '?restrictions={"type":"alcohol"}'
. "&method=post&" . $appAccessToken;

$setResult = file_get_contents($setUrl);

echo '<pre>';
echo 'Set result: ' . $setResult . '<br />';
echo '</pre>';

?> 
```

回声返回真。但是如果我在这个应用程序中使用推荐插件，我仍然可以向未成年的 Facebook 用户推荐这个应用程序。未成年用户也可以看到来自这个应用程序的评论。

任何想法如何使未成年用户对所有应用程序活动不可见？

我将不胜感激您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:31:28.800

当未成年用户访问酒精限制应用时，赞+发送（推荐+发送）按钮将被禁止，因此他们将无法使用“赞”、“推荐”或“发送”按钮。

如您所说，评论插件可见。作为一种解决方法，也许您可​​以仅为已验证您的应用程序的用户显示评论插件。这将阻止未成年用户看到评论插件，因为他们无法验证您的酒精限制应用程序。

# unix - 使用 unix（grep 或 awk）在我的目录中的所有文件中搜索我的输入文件中的每个字符串

> ID：12959648
> 
> 赞同：0
> 
> 时间：2012-10-18T16:45:19.377
> 
> 标签：unix, awk, grep

嗨我是这个论坛的新手。如果我没有遵循论坛标准，请原谅我。我有一个包含以下数据的文件

搜索STR.txt：

```
abc123
bac234
ret235 
```

现在我想在我的目录中的所有文件中搜索 searchSTR.txt 中的每个字符串我期待低于输出格式

```
abc123 inventory.txt   
bac234 names.txt 
```

（这里 abc123 搜索字符串在 invertory.txt 文件中找到 bac234 搜索字符串在 names.txt 文件中找到）

请使用 grep 或 awk 为我提供解决方案 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:00:38.957

为什么不`grep -o -f`试试这样：

```
grep -o -f searchSTR.txt *sh 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:00:27.540

试试这个 ：

```
while read w; do
    for f in *; do
        grep -q "$w" "$f" && echo "$w $f"
    done
done  < searchSTR.txt 
```

# html - div 类的最后一个孩子

> ID：12959655
> 
> 赞同：10
> 
> 时间：2012-10-18T16:46:05.600
> 
> 标签：html, css, wordpress, css-selectors

我正在整理一些 Wordpress 网页，我想（用`CSS`）样式化页面中的条目卷`Posts`。Wordpress 创建了这个：

```
<div class="entry"> 
```

页面中有大量这些元素，为了将它们分开，我在条目底部使用了边框。问题是我不希望在最后一个条目上有这个边框。可以在 CSS 中完成类似的操作吗？（请注意，它不是一个列表，所以我不能使用伪类）

这是我的 CSS，非常简单：

```
.entry{  border-bottom: 1px solid yellow; } 
```

HTML：

```
<div id="wrapper">
  <br />
  there are loads of code
  <br />
  <div class="entry">bunch of code there</div>
  <br />
  <div class="entry">bunch of code there</div>
  <br />
  <div class="entry">bunch of code there</div>
  <br />
  another huge code
  <br />
</div> 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T16:47:25.697

您已经命名了您要查找的内容：： [http](http://reference.sitepoint.com/css/pseudoclass-lastchild)`last-child` : //reference.sitepoint.com/css/pseudoclass-lastchild

所以使用`.entry:not(:last-child) { border-bottom: 1px solid yellow; }`

> 请注意，它不是一个列表，所以我不能使用伪类）

JSYK，伪类不依赖于包含元素是一个列表。如果您的意思是最终`.entry`元素实际上不是其容器的最后一个子元素，则仍然可以选择它。但是我不能告诉你怎么做，除非你告诉我实际的标记是什么样子的。

如果您的 final`div.entry`后面没有任何其他 div，那么选择器`.entry:not(:last-of-type)`将为您工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-18T16:51:02.123

```
.entry:last-child {
  border-bottom: none;
} 
```

假设您有一个`<li>`包含链接的列表`<a>`，并且您想要获取最后一个`<a>`' `<li>`s. 只需使用：

```
.entry:last-child a {
  border-bottom: none;
} 
```

这将选择最后一个`.entry`并定位它的链接

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-15T05:12:30.930

非常简单的解决方案：

```
#wrapper :last-child
{
    border:none;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:49:13.380

对于最全面的浏览器支持，我建议使用这个：

```
.entry { border-bottom: 1px solid yellow; }
.entry:last-child { border-bottom: 0; } 
```

# javascript - 使用 Javascript 显示一个元素一周

> ID：12959656
> 
> 赞同：0
> 
> 时间：2012-10-18T16:46:09.717
> 
> 标签：javascript, jquery

我的JS代码目前如下：

```
var today = new Date(),
d = today.getDate(),
m = today.getMonth() + 1,
y = today.getFullYear(),
date = d + '/' + m + '/' + y,
specialDate = '22/10/2012';

if (date == specialDate) {
document.getElementById("doodle").style.display = "block";
document.getElementById("defaultheader").style.display = "none";
} 
else {
document.getElementById("doodle").style.display = "none";
document.getElementById("defaultheader").style.display = "block";
} 
```

该代码运行良好，但我现在想显示`#doodle`一周（10 月 22 日至 28 日）而不是一天。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:51:23.190

`Date.now()`使用或`new Date().getTime()`这样做会更好。然后你可以比较两个“时间”：

```
var dateFrom = new Date('Oct 22 2012').getTime(),
    dateTo = new Date('Oct 28 2012').getTime();

var dateNow = new Date().getTime();

if (dateNow >= dateFrom && dateNow =< dateTo) {
    // show the element
} else {
    // hide it
} 
```

# 编辑：

您还可以在控制台中创建`dateFrom`and`dateTo`并将数值放在那里 - 如果您需要优化它。

# javascript - Firebug 无法在弹出窗口中打开

> ID：12959660
> 
> 赞同：1
> 
> 时间：2012-10-18T16:46:32.940
> 
> 标签：javascript, firefox, browser, firebug, window.open

使用 Firefox 16 和 Firebug 1.10.4 当我这样做时

```
window.open("about:blank", "ventanaNueva", "scrollbars=1"); 
```

该`"scrollbars=1"`选项禁用 Firebug，我无法检查元素，也无法打开控制台。

在 Firefox 15 中它运行良好。有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:58:02.987

同时，您始终可以通过右键单击页面来使用**Firefox Web Console**和Web 工具...`CTRL``SHIFT``K`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:57:13.490

是这个版本的firebug的问题，这个在Firebug 1.11中解决了

检查[firebug-1.11.0a4.xpi](https://getfirebug.com/releases/firebug/1.11/firebug-1.11.0a4.xpi)（2012 年 10 月 18 日的实际 alpha 版本）

# sql-server-2008 - CASE 声明或类似技术

> ID：12959661
> 
> 赞同：2
> 
> 时间：2012-10-18T16:46:35.817
> 
> 标签：sql-server-2008, case

我正在尝试使用 CASE 语句，但没有得到想要的答案。

这是代码：

```
DECLARE @Table TABLE (DocID INT, DocNumber VARCHAR(10),DocDevStat INT, MilestoneDate DATETIME,  
                      MilestoneID INT) 
INSERT INTO @Table VALUES (30, '14-1', 6, '10-01-2001', 10) 
INSERT INTO @Table VALUES (30, '14-1', 6, '10-15-2001', 11) 
INSERT INTO @Table VALUES (30, '14-1', 6, '11-06-2002', 13) 
INSERT INTO @Table VALUES (30, '14-1', 6, '11-01-2003', 27) 
INSERT INTO @Table VALUES (30, '14-1', 6, '11-01-2003', 30) 
INSERT INTO @Table VALUES (30, '14-1', 6, '03-01-2004', 28) 
INSERT INTO @Table VALUES (30, '14-1', 6, '03-01-2004', 35) 
INSERT INTO @Table VALUES (31, '14-3', 2, '06-27-2003', 10) 
INSERT INTO @Table VALUES (31, '14-3', 2, '05-05-2004', 27) 
INSERT INTO @Table VALUES (31, '14-3', 2, '05-05-2004', 30) 
INSERT INTO @Table VALUES (31, '14-3', 2, '07-20-2005', 35) 
INSERT INTO @Table VALUES (31, '14-3', 2, '08-31-2005', 32) 
INSERT INTO @Table VALUES (36, '1-2', 7, '10-01-1996', 10) 
INSERT INTO @Table VALUES (36, '1-2', 7, '10-01-1996', 11) 
INSERT INTO @Table VALUES (36, '1-2', 7, '12-01-1996', 28) 
INSERT INTO @Table VALUES (36, '1-2', 7, '12-01-1996', 35) 

Select distinct t.Docid, t.DocNumber,

case when t.DocDevStat IN (6,7,8) and t.MilestoneID = 35 then Max(t.Milestonedate)
     when t.DocDevStat IN (2,3,4) then Convert(date,GETDATE()) end AS LatestDate

FROM @Table t
Group By t.DocID, t.DocNumber, t.DocDevStat, t.MilestoneID 
```

我得到的结果是：

```
Docid      DocNumber    LatestDate
30         14-1           NULL
30         14-1           2004-03-01 
31         14-3           2012-10-17 
36          1-2           NULL
36          1-2           1996-12-01 
```

但我想得到：

```
Docid      DocNumber    LatestDate
30         14-1           2004-03-01 
31         14-3           2012-10-17 
36          1-2           1996-12-01 
```

在这种情况下使用 CASE 语句正确的技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T18:31:19.527

```
Select DISTINCT t.Docid, t.DocNumber,
case when t.DocDevStat IN (6,7,8) then Max(t.Milestonedate)
when t.DocDevStat IN (2,3,4) then Convert(date,GETDATE()) end AS LatestDate
FROM @Table t
where t.DocDevStat IN (2,3,4) OR (t.DocDevStat IN (6,7,8) and t.MilestoneID = 35)
Group By t.DocID, t.DocNumber, t.DocDevStat, t.MilestoneID 
```

此查询返回您正在查找的数据。我将您要搜索的条件添加到 where 子句中。

# linux - 1GB 页面和透明大页面 (Linux)

> ID：12959667
> 
> 赞同：6
> 
> 时间：2012-10-18T16:46:49.320
> 
> 标签：linux, linux-kernel, tlb

最近 Linux 内核中的`Transparent Huge Pages(THP)`支持允许在不同页面大小（例如，x86-64 中的 4KB 和 2MB）之间自动升级/降级。但我不确定 THP 是否也可以在`4KB`和`1GB`页面之间或在`2MB`和`1GB`页面之间提升/降低页面大小。

有人可以对此发表评论吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T17:43:08.487

根据这篇文章

[http://lwn.net/Articles/423584/](http://lwn.net/Articles/423584/)

> 当前补丁仅适用于匿名页面；将大页面与页面缓存集成的工作尚未完成。它也只处理一个巨大的页面大小（2MB）。即便如此，还是可以看到一些有用的性能改进。Mel Gorman 运行了一些基准测试，显示在某些情况下提高了 10% 左右。一般来说，结果不如使用hugetlbfs 获得的结果好，但实际使用THP 的可能性更大。

因此，似乎为 4k -> 2M/4M 合并/拆分实现了 THP 支持。

此外，在内核源代码中，我看到有一个[split_huge_page_pmd](http://lxr.linux.no/linux+v3.6.2/include/linux/huge_mm.h#L96)函数，并且在进行`PMD`拆分和`PMD`管理页面条目时，`PTE's`它具有固定的 4k 大小，我认为`PMD`大小（2M/4M）是最大透明大页面大小。

# installation - 改变 WIX 生成的 .NET 3.5 引导程序的行为

> ID：12959673
> 
> 赞同：0
> 
> 时间：2012-10-18T16:47:05.400
> 
> 标签：installation, wix, windows-installer, wix3, bootstrapper

我有以下问题：
我用 WIX 构建了一个安装程序。此安装程序包含 .NET Framework 3.5 的引导程序。第一次安装引导程序就像一个魅力。.NET 框架 3.5 已安装。但例如，在卸载并重新安装引导程序后，无法识别已安装 .NET Framework 3.5。

我发现了以下原因：
根据引导程序日志，它检查了这个注册表值：

> 读取注册表项“HKLM\Software\Microsoft\NET Framework Setup\NDP \v3.5\1033”的值“安装”无法读取注册表值

它搜索 .NET 框架的本地化版本（1033=德语）

就我而言，我只安装了英文版的框架（1031=英文）

所以我只有 1031 作为子键。

所以我的问题是是否可以从

> 'HKLM\Software\Microsoft\NET Framework Setup\NDP\v3.5\1033'
> 到
> 'HKLM\Software\Microsoft\NET Framework Setup\NDP\v3.5\'

还有一个名为“已安装”的值，对于引导程序，安装框架的哪种语言并不重要。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T17:54:57.137

如果您使用 burn 作为引导程序，您应该使用[ExePackage](http://wix.sourceforge.net/manual-wix3/wix_xsd_exepackage.htm)元素上的 DetectCondition 属性，如果它检测到已安装，它将不会运行 .net 框架安装程序。

# qooxdoo - 如何过滤虚拟树

> ID：12959678
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:47:15.520
> 
> 标签：qooxdoo

这篇文章是否有任何更新（如何过滤虚拟树......）？

[http://qooxdoo.678.n2.nabble.com/How-to-filter-a-virtual-tree-td7050674.html](http://qooxdoo.678.n2.nabble.com/How-to-filter-a-virtual-tree-td7050674.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:58:50.063

是的，这个问题已经修复，将成为即将发布的 2.1 版本的一部分： [https ://github.com/qooxdoo/qooxdoo/commit/92d6494c35cf1270f2b7ce5fcdd47fe9be21fb02](https://github.com/qooxdoo/qooxdoo/commit/92d6494c35cf1270f2b7ce5fcdd47fe9be21fb02)

# forms - Symfony2 表单自定义

> ID：12959679
> 
> 赞同：21
> 
> 时间：2012-10-18T16:47:21.420
> 
> 标签：forms, symfony, twig

我想要这样的东西：

```
<textarea rows="30" cols="70"  class="TextBox" style="height:100px;"> 
```

但在我的 symfony2 应用程序中，而不是在树枝模板中，我尝试了这个：

```
 $builder->add('history', 'textarea', array('label' => 'Nome' , 'max_length' => 1048576 , 'rows' = 30 , 'cols' = 70)); 
```

但我得到“行”和“列”不是选项......

在树枝上我想要这样的东西：

```
<label for="history">{{'form_anamnese_history'}}</label>
{{ form_widget(form.history) }} 
```

成为类似论坛帖子的文本框！

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-18T16:59:06.623

使用`attr`数组，如[文档](http://symfony.com/doc/current/reference/forms/types/form.html#attr)中所述：

```
$builder->add('history', 'textarea', array(
    'attr' => array('cols' => '5', 'rows' => '5'),
)); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-07-10T13:18:55.623

您可以在 Twig 中而不是在表单中设置 textarea 的显示属性：

```
{{ form_widget(edit_form.comment, { 'attr': { 
  'style' : 'width:525px', 
  'rows' : '4', 
  'cols' : '30' }} ) }} 
```

如上所述，如果可能的话，最好在 CSS 中设置它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-22T22:56:53.993

中问题的解决方案`Symfony 3`。

第一的：

```
use Symfony\Component\Form\Extension\Core\Type\TextareaType; 
```

第二：这是Form中的代码：

```
->add('biografia', TextareaType::class, array(
      'label' => 'Como me identifico, Identifiquese utilizando un máximo de 500 caracteres',
      'attr' => array('class' => 'myclass')
      )) 
```

# javascript - 文本区域字段中发生的情况

> ID：12959680
> 
> 赞同：1
> 
> 时间：2012-10-18T16:47:22.393
> 
> 标签：javascript, html, textarea

我很好奇，当用户按下回车键时，文本区域字段内会发生什么？我记得在某个地方读到“/n”是在“幕后”生成的。真的吗？如果不是真的会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:59:48.393

它不在幕后；`\n`(not `/n`) 是换行符的转义序列。您在 textarea 中看不到它的原因是该控件实际上呈现了一个换行符。[自己看](http://jsfiddle.net/Yaq46/)。

# jquery - 客户端电子邮件

> ID：12959682
> 
> 赞同：0
> 
> 时间：2012-10-18T16:47:28.067
> 
> 标签：jquery, json, email, smtp

我正在构建一个用 jquery 编写的插件，旨在在没有服务器端代码帮助的情况下独立运行。我知道如何编写服务器端代码，我只是不想支持它。

话虽如此，我需要通过电子邮件发送图像。似乎无法使用 javascript 发送电子邮件（通过 smtp），并且使用 mailto 将不允许我附加或包含图像。但是，我希望有一种方法可以将 json 帖子发送到某些公司为了处理电子邮件而公开的公共 URL。

有没有人尝试过这样的事情？

# java - Java 组织结构图数据结构

> ID：12959684
> 
> 赞同：0
> 
> 时间：2012-10-18T16:47:32.487
> 
> 标签：java, charts, tree

我正在编写一个从 Active Directory 创建组织结构图的项目，如果您为程序提供一个姓名（员工）列表，那么根节点是这些员工的最低公用经理。这可能是组织的真正高级经理，也可能是部门经理，具体取决于名称。

我可以使用活动目录管理器属性来检索管理器名称，目前我遍历每个员工获取他们的管理器，直到达到创建 ArrayList 的顶部......然后我需要一种方法来比较列表以识别通用管理器。我只为两个人使用 List.contains() 做到了这一点，但这不能扩展到超过 2 人。这里有什么建议吗？

我希望创建一个以公共管理器为根节点的树形数据结构，其中包含公共管理器下方列表中的所有人员，以及他们的父子关系。

哪种数据结构适合这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:50:11.080

不确定这是否是矫枉过正，但我​​个人建议您使用嵌入式 Neo4j 数据库，它非常适合这种类型的结构和查询。非常可扩展且快速。

# jquery - 我的代码有什么问题？（jQuery + HTML）

> ID：12959685
> 
> 赞同：0
> 
> 时间：2012-10-18T16:47:41.953
> 
> 标签：jquery, html, href

我试图在您使用 jQuery 打开页面（通过强制单击）后立即打开一个链接，但它不起作用。

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script>
$(document).ready(function(){
    $('a.bla').click(function(){
    window.open(this.href);
    return false;
    });
});
</script>   
</head>
<body>
<a href="url-to-open.php" target="_blank" class='bla'><img src="pic.png" alt="" style="border:none;" /></a>
</body>
</html> 
```

我不知道出了什么问题。我希望你们中的某个人知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:54:18.977

加载页面后，您的代码不会立即打开链接；它会创建一个*事件处理程序*，该处理程序会在您加载页面后立即触发一个函数。仅当您单击链接时才会触发该事件处理程序。

现在，您通常会做的是：

```
$(document).ready(function(){
    $('a.bla').trigger('click');
}); 
```

除了不会打开链接，因为出于安全原因，您不能以编程方式触发鼠标点击——您只能以编程方式触发分配给该鼠标点击的*事件处理程序。*

尝试这个：

```
$(document).ready(function(){
    window.open($('a.bla').attr('href'),'name-of-new-window');
}); 
```

这将起作用，除非用户当然有一个弹出窗口阻止程序阻止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:48:37.287

```
$('a.bla').click(function(){

should be 

    <script>
$(document).ready(function(){
    $('a.bla').click(function(){
    window.open($(this).attr("href"));
    return false;
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T16:48:44.543

用于`.`不上课`#`

```
$(document).ready(function(){
    $('a.bla').click(function(){
    window.open(this.href);
    return false;
    });
}); 
```

如前所述，使用`#`是错误的。

```
$(document).ready(function(){

    window.open($('a .bla').href);
    return false;

}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T16:49:01.627

尝试

```
window.open($(this).attr('href')); 
```

代替

```
window.open(this.href); 
```

如果您想在页面加载时打开.. 只需将此行移到 click 事件之外就可以了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T16:52:45.373

此示例应通过链接单击事件使新窗口自动打开。（尚未对此进行测试，可能需要将`href`值作为`data`参数传递给处理程序。

```
$(document).ready( function() {

    var $link = $( 'a.bla' ),
        href= $link.attr( 'href' );

    $link.unbind( 'click' ).bind( 'click', function ( e ) {
        window.open( href );
        e.preventDefault();
        e.stopPropagation();
    } );

    $link.click();
}); 
```

# matlab - 从不同的文件夹编译 Matlab 文件

> ID：12959687
> 
> 赞同：1
> 
> 时间：2012-10-18T16:47:52.640
> 
> 标签：matlab, path

我正在尝试在 matlab 中编译 myfunction.m。此函数调用另一个文件夹中定义的另一个函数 (otherfunction.m)。此折叠已添加到 matlab 路径中，因此如果我运行：

```
myfunction 
```

从 Matlab 命令行窗口一切正常。

如果我尝试编译为：

```
mcc -m myfunction.m -I /CompletePathToOtherFunction otherfunction.m 
```

exe文件不起作用。我该如何管理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T23:33:15.097

从文档中：

“在命令行上传递 -I：

您可以使用 -I 选项将文件夹添加到用于当前编译的路径列表的开头。当您编译当前不在 MATLAB 路径上的文件夹中的文件时，此功能非常有用。”

因此，在`-I`我认为您应该将路径传递到包含 otherfunction.m 的目录之后，而不是 otherfunction.m 本身的路径。

其他一些需要检查的事情：

*   用于`which otherfunction`确保您使用的是正确的版本`otherfunction`（如果存在多个版本）。如果路径上的两个函数具有相同的名称，Matlab 会默认使用路径上较高的名称。

*   如果您正在编译的代码使用 调用函数`eval`，那么您将需要提供包含该函数的目录（或显式提供该函数），即使该目录位于 matlab 路径上。

*   如果一切都失败了，请尝试使用编译器的 GUI 而不是`mcc`命令。要调出 GUI，只需`deploytool`在命令窗口中键入。在 GUI 中选择项目位置并指定“控制台应用程序”（或您想要的任何其他内容）后，单击“添加主文件”链接并添加 myfunction.m。然后查找链接“添加其他引用/文件夹”（或类似内容），单击它，然后手动添加包含 otherfuncion.m 和 secondfunction.m 的目录。

# regex - 如何根据表达式的优先级匹配正则表达式？

> ID：12959688
> 
> 赞同：0
> 
> 时间：2012-10-18T16:47:52.900
> 
> 标签：regex

如果我有以下数据：

```
abc1dogs
a1cat2dogs
turtles 
```

我想提取“1”和“2”之后的所有文本，或者如果该行不包含“1”或“2”？需要使用的附加规则是，如果记录中存在“1”和“2”，那么我只希望提取“2”之后的值。我尝试使用：

```
(?<=[12])(.*) 
```

这很接近但它回来了：

```
dogs
cat2dogs 
```

我希望它返回的是：

```
dogs
dogs
turtles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T16:53:53.173

这个略显臃肿的引擎适用于 PCRE 正则表达式引擎：

```
(?<=2).*|(?<=1)[^2]*$|^[^12]*$ 
```

它确保（如果找到 a `1`）字符串的其余部分不包含`2`s。同样，如果要匹配整个字符串，则字符串中不允许有`1`s 和`2`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:10:23.533

简单的

`[^12\n]*$`

像这样测试：

![在此处输入图像描述](../Images/a20fdc4eac3dfb317688cbd34646ede3.png)

# wpf - WPF 绑定和 DataContext

> ID：12959691
> 
> 赞同：0
> 
> 时间：2012-10-18T16:48:01.283
> 
> 标签：wpf, xaml, mvvm, binding

我有一种情况，我的视图有一个绑定到 ViewModel 的 DataContext，但是我在视图中的一个控件的 DataContext 设置为 ViewModel 的一个属性。第一次更改 ViewModel 时，它会显示更改，但之后，如果我更改 ViewModel 内的属性，则不会将更改反映回视图。

```
//Somewhere inside my View
            <TaicoControl:FlashMessage DataContext="{Binding FlashMessage}"
                                   DockPanel.Dock="Top"
                                   FadesOutAutomatically="True"
                                   FontFamily="BPG Arial"
                                   Message="{Binding Message}"
                                   MessageType="{Binding FlashType}" />
//End of the View

public sealed class ShellViewModel : ViewModelBase
{

    public FlashMessageModel FlashMessage { get; private set; }

    protected override void SetupEvents()
    {
        RegisterForEvent<SystemBaloonRequiered>(OnBaloonRequest);
        RegisterForEvent<FlashRequest>(OnFlashRequested);
        base.SetupEvents();
    }

    #region Message Handlers

    private void OnFlashRequested(FlashRequest obj)
    {
        FlashMessage = null;
        FlashMessage = new FlashMessageModel { Message = obj.Message, FlashType = obj.FlashType };
        RaisePropertyChanged(() => FlashMessage);
    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:38:39.937

## 解释：

这是没有实现*INotifyPropertyChanged*接口的经典案例。

当您更改*FlashMessage*的值时，UI 无法知道这一点。因此，为了让 UI 知道，您使用属性名称（在您的情况下为“FlashMessage”）引发*PropertyChanged*事件。

一旦你实现了*INotifyPropertyChanged*接口并通知*FlashMessage*的属性更改，它应该可以正常工作。

## 例子：

```
public sealed class ShellViewModel : ViewModelBase, INotifyPropertyChanged
{ 
    public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged(string propertyName)
    {
        var temp = PropertyChanged;

        if(temp != null)
        {
            temp(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    public FlashMessageModel _flashMessage;

    public FlashMessageModel FlashMessage 
    { 
        get { return _flashMessage; } 
        private set 
        { 
            _flashMessage = value;
            RaisePropertyChanged("FlashMessage");
        }
    } 
} 
```

-编辑-

尝试从以下更改您的代码：

```
FlashMessage = null;   
FlashMessage = new FlashMessageModel { Message = obj.Message, FlashType = obj.FlashType };   
RaisePropertyChanged(() => FlashMessage); 
```

遵循：

```
FlashMessage.Message = obj.Message;
FlashMessage.FlashType = obj.FlashType; 
```

# java - 发送 TCP/IP 消息 AKKA 演员

> ID：12959709
> 
> 赞同：4
> 
> 时间：2012-10-18T16:48:57.087
> 
> 标签：java, scala, tcp, akka, actor

是否可以通过 TCP / IP 向 AKKA 演员发送消息？

例如，编写如下客户端：

```
mySocket = new Socket("theactor", 75);
os = new DataOutputStream(smtpSocket.getOutputStream());
os.writeBytes("HELLO"); 
```

那可以向 AKKA 演员发送消息吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:51:50.477

详细说明维克多的回应，最小的例子是

```
import akka.actor._
import ActorDSL._
import java.net.InetSocketAddress

object Server extends App {
  implicit val sys = ActorSystem("telnet")

  actor(new Act with ActorLogging {
    IOManager(context.system) listen new InetSocketAddress(1234)
    become {
      case IO.NewClient(server) ⇒
        server.accept()
      case IO.Read(handle, bytes) ⇒
        log.info("got {} from {}", bytes.decodeString("utf-8"), handle)
    }
  })
} 
```

然后在不同的 shell 中启动`telnet localhost 1234`并开始输入，您将看到每行一个参与者日志消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:19:25.723

是的，没有。您必须使用 Akka IO 模块或 Akka Camel 模块（带有 netty 或 mina 组件）：

[http://doc.akka.io/docs/akka/snapshot/scala/io.html](http://doc.akka.io/docs/akka/snapshot/scala/io.html)

[http://doc.akka.io/docs/akka/snapshot/java/camel.html](http://doc.akka.io/docs/akka/snapshot/java/camel.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T09:51:47.740

如果您尝试使用 IP 通过远程 Actor 发送消息，为什么不尝试 Akka Remote Actor 系统？[“在这里阅读”](http://doc.akka.io/docs/akka/snapshot/scala/remoting.html)

# java - 将线程中断添加到 run() 的实现

> ID：12959714
> 
> 赞同：1
> 
> 时间：2012-10-18T16:49:12.077
> 
> 标签：java, multithreading, executorservice

这个问题是导致它的几个问题的高潮。我只是想确保在我提交我所做的任何更改之前一切都正确。

所以这就是我正在使用的数据结构：

在抽象类中：

```
public abstract void doRun();

public void run(){
    try{
    while(!Thread.currentThread().isInterrupted() || hasRunBefore){
        doRun();
    }
    }catch (InterruptedException e){Thread.sleep(1); System.out.println("Thread Interrupted: "); e.printStackTrace(); }

} 
```

然后在实现我的抽象类的子类中：

```
public void doRun(){
    doChildClassStuff();
} 
```

然后在我的主课中调用这些时，我只是做

```
 ClassName myClass = new ClassName(constructor.list);
 ExecutorService threadPool = Executors.newFixedThreadPool(12);
    List<Future<?>> taskList = new ArrayList<Future<?>>();
    taskList.add(myClass);
    for(Future future : taskList){
        try{
            future.get(1, TimeUnit.SECONDS);
        }catch(CancellationException cx){ System.err.println("Cancellation Exception: "); cx.printStackTrace();
        }catch(ExecutionException ex){ System.err.println("Execution Exception: ");ex.printStackTrace();
        }catch(InterruptedException ix){ System.err.println("Interrupted Exception: ");ix.printStackTrace();
        }catch(TimeoutException ex) {future.cancel(true);}
    }
    threadPool.shutdown();
    threadPool.awaitTermination(60, TimeUnit.SECONDS);
    threadPool.shutdownNow(); 
```

如果 thread.sleep() 失败，这意味着线程已被中断，应该退出。如果所有线程都花费超过 60 秒，那么它们都将被从 awaitTermination 发送 thread.interrupt() 命令，对吗？

我在这里完全脱离基地吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T16:52:44.277

看起来您正在尝试处理基类中的线程中断。不幸的是，基类没有办法“监听”线程中断。您`doChildClassStuff()`需要自己处理`Thread.currentThread().isInterrupted()`支票。它需要能够检测线程是否已被中断，以便它可以返回或抛出`InterruptedException`.

你不需要`Thread.sleep(1);`. 如果线程已被中断，它将抛出一个`InterruptedException`，但您可以`Thread.currentThread().isInterrupted()`轻松地测试它。由于您已经处于一个捕获块中`InterruptedException`，因此我不确定它的重点是什么。此外，您`doRun()`不会抛出`InterruptedException`代码示例（就目前而言）不会编译。

# wordpress - 在 Wordpress 中显示 StackExchange 问题

> ID：12959715
> 
> 赞同：0
> 
> 时间：2012-10-18T16:49:12.507
> 
> 标签：wordpress, stackexchange

如何将我在 StackExchange 网络中提出的问题显示在 Wordpress 博客上？最终结果类似于将 Twitter 推文显示在博客上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:39:32.450

获取像[RSSImport](http://wordpress.org/extend/plugins/rss-import/)这样的插件并将[您的用户提要](https://stackoverflow.com/feeds/user/1417894)插入其中。

**更新**
经过反复试验，我在 Yahoo! 上获得了您所有帐户提要的合并提要！管道：[切尔诺夫的 StackExchange](http://pipes.yahoo.com/pipes/pipe.run?_id=9accb3fd07e080d601ffd3196c21a021&_render=rss)

# javascript - 移动 javascript 事件多次触发

> ID：12959719
> 
> 赞同：1
> 
> 时间：2012-10-18T16:49:27.513
> 
> 标签：javascript, iphone, mobile, zepto, hybrid

我正在使用 Zepto、骨干网和 phonegap 创建一个混合移动应用程序，并且在绑定事件时遇到了问题。当第一次点击发生时，事件被触发一次并且页面滑出视图，当页面返回视图并且再次发生点击时，事件被触发两次，如果第三次触发事件，则触发三次次...在绑定事件之前取消绑定并不能修复它，stopImmediatePropagation 也不起作用。

```
 $('#page-2-view-btn').unbind('click').bind('click', function(e){
    e.stopImmediatePropagation();
    alert('clicked');
    var view = new PageView2;
    navigator.navigateTo(view);
    return false;
 }); 
```

还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:08:35.360

感谢您的回复，但最终问题是鬼点击。可以在[https://developers.google.com/mobile/articles/fast_buttons](https://developers.google.com/mobile/articles/fast_buttons)或[http://labs.ft.com/2011/08/fastclick-native-like-tapping-for-touch-apps/找到解决方案](http://labs.ft.com/2011/08/fastclick-native-like-tapping-for-touch-apps/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:14:45.023

试试这个：

```
 $('#page-2-view-btn').unbind('click', function(){
    $(this).bind('click', function(e){
        e.stopImmediatePropagation();
        alert('clicked');
        var view = new PageView2;
        navigator.navigateTo(view);
        return false;
    });
 }); 
```

希望这会有所帮助！

# php - 使用 PHP 格式化 URL - http://www.google.com 到 www.google.com/；str_replace() 也有问题

> ID：12959730
> 
> 赞同：3
> 
> 时间：2012-10-18T16:50:01.337
> 
> 标签：php, url, str-replace, substr

我在执行以下操作时遇到了一些麻烦..

> [http://www.google.com](http://www.google.com) --> www.google.com/
> [https://google.com](https://google.com) --> www.google.com/
> google.com --> www.google.com/

我正在尝试删除`https:// or http://`，确保将`www.`其添加到 URL 的开头，然后在 URL 不存在时添加尾部斜杠。

感觉好像我已经弄清楚了大部分，但我无法按照自己的意愿`str_replace()`工作。

据我了解，这是如何使用`str_replace`：

```
$string = 'Hello friends';
str_replace('friends', 'enemies', $string);
echo $string;
// outputs 'Hello enemies' on the page 
```

这是我到目前为止所拥有的：

```
$url = 'http://www.google.com';

echo reformat_url($url);

function reformat_url($url) {
    if ( substr( $url, 0, 7 ) == 'http://' || substr( $url, 0, 8 ) == 'https://' ) { // if http:// or https:// is at the beginning of the url
        $remove = array('http://', 'https://');
        foreach ( $remove as $r ) {
            if ( strpos( $url, $r ) == 0 ) {
                str_replace($r, '', $url); // remove the http:// or https:// -- can't get this to work
            }
        }
    }
    if ( substr( $url, 0, 4 ) != 'www.') { // if www. is not at the beginning of the url
        $url = 'www.' . $url; // prepend www. to the beginning
    }
    if ( substr( $url, -1 ) !== '/' ) { // if trailing slash does not exist
        $url = $url . '/';  // add trailing slash
    }
    return $url; // return the formatted url
} 
```

任何有关格式化 URL 的帮助将不胜感激；我也很好奇我在使用 str_replace 删除 http:// 或 https:// 时做错了什么。如果有人可以就我做错了什么提供一些见解，我们将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:52:24.110

试试[`parse_url()`](http://php.net/parse_url)。

> ### 返回值
> 
> 在严重格式错误的 URL 上，`parse_url()`可能返回 FALSE。
> 
> 如果省略 component 参数，则返回关联数组。至少一个元素将出现在数组中。此数组中的潜在键是：
> 
> *   `scheme`- 例如`http`
> *   `host`
> *   `port`
> *   `user`
> *   `pass`
> *   `path`
> *   `query`- 在问号之后`?`
> *   `fragment`- 在井号之后`#`

因此，您可以使用以下代码访问域：

```
$url = "https://www.google.com/search...";
$details = parse_url($url);
echo($details['host']); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T16:55:48.053

做

```
$url = str_replace($r, '', $url); 
```

代替

```
str_replace($r, '', $url); 
```

因为[`str_replace`](http://php.net/str_replace)返回一个新字符串；它没有改变`$url`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T18:01:35.177

```
$url = str_replace('http://', '', $url);
$url = str_replace('https://', '', $url);
if(substr( $url, 0, 4 ) != 'www.')
{
    $url = 'www.'.$url;
}
$length = strlen($url);
if($url[$length-1] != '/')
$url = $url.'/'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-06-18T19:17:51.807

```
public static function formatURLs($t) {
    $t = ' '.$t;
    $t = preg_replace("#([\s]+)([a-z]+?)://([a-z0-9\-\.,\?!%\*_\#:;~\\&$@\/=\+]+)#i", "\\1<a href=\"\\2://\\3\" rel=\"nofollow\" target=\"_blank\">\\3</a>", $t);
    $t = preg_replace("#([\s]+)www\.([a-z0-9\-]+)\.([a-z0-9\-.\~]+)((?:/[a-z0-9\-\.,\?!%\*_\#:;~\\&$@\/=\+]*)?)#i", "\\1<a href=\"http://www.\\2.\\3\\4\" rel=\"nofollow\" target=\"_blank\">\\2.\\3\\4</a>", $t);
    $t = preg_replace("#([\s]+)([a-z0-9\-_.]+)@([\w\-]+\.([\w\-\.]+\.)?[\w]+)#i", "\\1<a href=\"mailto:\\2@\\3\">\\2@\\3</a>", $t);
    $t = substr($t, 1);
    return $t;
} 
```

我的功能，希望会有所帮助

# javascript - 如何为根据图像映射的选择而变化的会话变量分配值

> ID：12959731
> 
> 赞同：1
> 
> 时间：2012-10-18T16:50:03.190
> 
> 标签：javascript, html

我想根据用户的选择将一个值添加到会话变量中。用户通过单击图像映射内的某些区域形状来进行选择。

这是我的代码。

```
<a class="selection_5M_platform"><img src="../../images/Selection/Windmillselection-platform5M-fullview.gif" usemap="#Windmillselection_Map5M_platform" alt="windmill_platform6M" name="windmill_platform6M">
    <map class="map" name="Windmillselection_Map5M_platform">          
      <area shape="poly" coords="12,131,56,131,61,133,68,136,74,140,74,345,12,345" href="../submitreport.php" onClick="<?php $_POST['selectedreportlocation']="5M_PLATFORM_LADDERS" ?>" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-ladders.gif',1)" alt="ladders_platform5M">                   
      <area shape="poly" coords="73,344,73,141,69,136,59,132,48,131,48,124,267,123,267,132,229,135,202,142,194,151,195,344" href="../submitreport.php" onClick="<?php $_SESSION['selectedreportlocation']="5M_PLATFORM_FOUNDATION" ?>" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-foundation.gif',1)" alt="foundation_platform5M">
      <area shape="poly" coords="148,121,177,121,177,46,125,6,47,6,47,74,58,74,58,46,105,52,109,67,121,67,126,54,148,58" href="../submitreport.php" onClick="<?php $_SESSION['selectedreportlocation']="5M_PLATFORM_PALFINGER" ?>" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-palfinger.gif',1)" alt="palfinger_platform5M">
      <area shape="poly" coords="49,123,49,92,149,92,149,121,177,121,177,91,187,62,271,60,268,90,268,123" href="../submitreport.php"  onMouseOut="MM_swapImgRestore()" onClick="<?php $_SESSION['selectedreportlocation']="5M_PLATFORM_GUARDRAIL" ?>" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-guardrail.gif',1)" alt="guardrail_platform5M">          
    </map>        
</a> 
```

这段代码的问题：它与你选择哪个无关，它总是将相同的值存储在会话变量中（最后一个“5M_PLATFORM_GUARDRAIL”）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:01:11.470

您正在将 php 代码（服务器代码）与 javascript（客户端代码）混合。服务器代码在页面呈现之前执行。所以你的最后一行 php 是被执行的。检查 html 源代码，您不会在其中看到 php 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:19:07.440

只是为了让我的回答有帮助，我建议这个解决方案：

用这个替换你的 HTML 标记`<map>`：

```
<map class="map" name="Windmillselection_Map5M_platform">          
    <area shape="poly" coords="12,131,56,131,61,133,68,136,74,140,74,345,12,345" href="../submitreport.php?location=5M_PLATFORM_LADDERS" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-ladders.gif',1)" alt="ladders_platform5M">
    <area shape="poly" coords="73,344,73,141,69,136,59,132,48,131,48,124,267,123,267,132,229,135,202,142,194,151,195,344" href="../submitreport.php?location=5M_PLATFORM_FOUNDATION" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-foundation.gif',1)" alt="foundation_platform5M">
    <area shape="poly" coords="148,121,177,121,177,46,125,6,47,6,47,74,58,74,58,46,105,52,109,67,121,67,126,54,148,58" href="../submitreport.php?location=5M_PLATFORM_PALFINGER" ?>" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-palfinger.gif',1)" alt="palfinger_platform5M">
  <area shape="poly" coords="49,123,49,92,149,92,149,121,177,121,177,91,187,62,271,60,268,90,268,123" href="../submitreport.php?location=5M_PLATFORM_GUARDRAIL"  onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('windmill_platform6M','','../../images/Selection/Windmillselection-platform5M-guardrail.gif',1)" alt="guardrail_platform5M">          
</map> 
```

在你的`../submitreport.php`你应该插入这个块：

```
session_start();
$_SESSION['selectedreportlocation'] = $_GET['location'];

// session variable will be available from now 
```

PS你完全误解了服务器端编程的原则。首先，您必须阅读一些有关 PHP 的教程。

# android - Android Internet 权限和 Google Play 过滤

> ID：12959741
> 
> 赞同：0
> 
> 时间：2012-10-18T16:50:31.570
> 
> 标签：android, google-play, android-permissions, uses-feature

**我想知道`android.permission.INTERNET`Google Play 上添加了哪些过滤，如果它增加了一些东西。**

我添加了

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

到我的清单以便访问互联网，但这不是我的应用程序的主要功能。因此，我不想因此而在 Google Play 中被过滤。没有匹配`<uses-feature>`的，所以我的问题是我需要添加什么`required="false"`以避免过滤。

我想我可以添加

```
<uses-feature android:name="android.hardware.wifi" android:required="false" /> 
```

但是移动互联网（3G/4G）呢，我也需要这个吗？

```
<uses-feature android:name="android.hardware.telephony" android:required="false"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:58:20.580

电话功能是指拨打电话的能力。我认为互联网许可就足够了。您可以拥有带 3G 的设备，但不能拥有电话。另外，我认为商店不会过滤权限。某些权限具有隐含的功能要求，但互联网不是其中之一。你可以[在这里查看](http://developer.android.com/guide/topics/manifest/uses-feature-element.html)

# c#-4.0 - 方法执行如何在 C# 中工作

> ID：12959742
> 
> 赞同：0
> 
> 时间：2012-10-18T16:50:34.673
> 
> 标签：c#-4.0

在 C# 中，当应用程序 A 使用应用程序句柄调用应用程序 B 时，应用程序 A`(IAppB)Activator.CreateInstance(Type.GetTypeFromProgID('AppB')).CallMe()`如何将调用发送到应用程序 B？我不是要解释硬件层，而是想弄清楚是否有可能以某种方式捕获对应用程序的方法调用以弄乱它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:19:34.927

给定用法和名称，您很可能正在对进程外 COM 服务器进行方法调用。它的机制可以写一本书（很多已经写过），所以只是一个简短的概述。

通过使用存储在注册表中的配置信息启动 COM 服务器，球开始滚动。底层原生 api 调用是 CoCreateInstance()。然后，COM 基础结构再次使用注册表来发现充当代理和存根的 DLL。代理的工作是模拟您正在使用的确切 COM 接口。在这种情况下，是 coclass 的默认接口，即声明 CallMe() 方法的接口。

代理序列化传递的参数（如果有），然后调用 RPC 向服务器发出调用请求。在服务器端，存根充当客户端代码。它反序列化参数并进行实际调用。调用结果，至少是 HRESULT，以及可能通过引用传递并需要复制回来的任何参数，然后返回到代理以完成调用。

在低级 RPC 边界上使用这种方案是不切实际的。但是，您可以在技术上创建自己的代理和存根。存在很大的障碍，它们通常是由 MIDL 工具根据 IDL 语言编写的接口描述自动生成的。至少，您将需要该 IDL，以便您确切了解界面的外观。这往往很困难，因为您很少拥有服务器的源代码，因此也没有 IDL。如果服务器有类型库，您可以反编译类型库。这不太可能，因为您正在打一个迟到的电话。最后但同样重要的是，您需要非常了解 RPC。也很难，很晦涩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:02:58.243

你在这里混合了很多东西

*   应用程序 A 调用应用程序 B - 这通常意味着“进程 A”调用“进程 B”
*   C# 方法 A 调用方法 B，- C# 中的任何正常调用
*   C# 调用 COM（这是你的代码片段正在做的事情）
*   通过反射技术调用。这也在您的样本中

您的问题的答案取决于您所谈论的是哪一个。

如果您正在寻找简单地将自己置于同一应用程序域中的函数 A 和函数 b 之间，请查看 AOP - [C# 中的面向方面编程](https://stackoverflow.com/questions/1416880/aspect-oriented-programming-in-c-sharp)

或拦截[http://www.codeproject.com/Articles/8436/Intercepting-method-calls-in-C-an-approach-to-AOSD](http://www.codeproject.com/Articles/8436/Intercepting-method-calls-in-C-an-approach-to-AOSD)

或者看看城堡动态代理[http://docs.castleproject.org/Default.aspx?Page=DynamicProxy](http://docs.castleproject.org/Default.aspx?Page=DynamicProxy)

# javascript - 三、雪碧+雾|| 三.ParticleSystem + 纹理贴图数组

> ID：12959746
> 
> 赞同：1
> 
> 时间：2012-10-18T16:50:45.657
> 
> 标签：javascript, three.js

我正在尝试使用 Sprite 制作粒子系统，但问题是 Sprite 似乎没有响应“雾”参数（即它不会随着距离而消失）。我可以使用 ParticleSystem 而不是使用许多 Sprite（因为 ParticleSystem 确实尊重雾参数），但我需要每个粒子具有不同的纹理贴图。所以这两种方法都不能实现:(

有谁知道如何：a/ 让 Sprite 与雾一起工作 b/ 让 ParticleSystem 与一组纹理贴图一起工作

? 非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:05:00.340

它不起作用，因为没有为 Sprite 对象实现雾。

我刚刚添加了它，你可以试试我的 dev 分支：

[https://github.com/alteredq/three.js/commit/9c3194b9e1e5ce7ff9f3e36842a7e51f7ae21232](https://github.com/alteredq/three.js/commit/9c3194b9e1e5ce7ff9f3e36842a7e51f7ae21232)

有了这个，如果你设置了 Sprites 现在应该会被雾化`sprite.fog = true`

# database - Vertica 中的 JOIN 因“内部分区不适合内存”而失败

> ID：12959747
> 
> 赞同：6
> 
> 时间：2012-10-18T16:50:46.057
> 
> 标签：database, join, vertica

我对来自十个连接表的大查询有疑问。我正在将数据从宽事实表 (f1) 迁移到星型模式。我首先从 f1 填充维度表，然后通过连接到维度表来填充新的事实表 (f2) 以获得相应的 ID。

不幸的是，我收到一个错误，“内部分区不适合内存”。从日志中我看到：

```
2012-10-18 16:20:31.607 Init Session:0x2aac6c02b250 [EE] <INFO>   ENABLE_JOIN_SPILL may allow this query to run, with reduced performance 
2012-10-18 16:20:31.607 Init Session:0x2aac6c02b250 [EE] <INFO> Query Retry action: Setting add_vertica_options('EE','ENABLE_JOIN_SPILL'); 
```

但这也不起作用，因为后来我得到：

```
2012-10-18 16:23:31.138 Init Session:0x2aac6c02b250 [EE] <INFO>   Join ((public.owa_search_term_dim x public.page_impressions_with_session) using owa_search_term_dim_projection_node0001 and previous join (PATH ID: 7)) inner partition did not fit in memory; value 
2012-10-18 16:23:31.138 Init Session:0x2aac6c02b250 [EE] <INFO> Query Retry action: Swapping join order with override: 1|7|0 
```

这种情况持续了一段时间，而 Vertica 显然试图找到一种方法来执行连接，但最终因错误说连接不适合内存而退出。

是否有关于如何最小化执行连接所需的内存或为什么溢出到磁盘不起作用的任何提示？我可以处理性能问题，我只需要能够执行查询。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T19:38:39.927

我为解决这个错误所做的事情......

*   **重写查询**
    有时初始查询并没有尽可能优化。我解决这个问题的方法之一是使用子查询。
*   **使用临时表**
    我必须生成的一些报告通过使用临时表可以很好地工作。这是使用子查询的更“极端”版本。
*   **附加过滤器**
    有时，像添加附加过滤器并确保它们被推送到连接表这样的小事情会在 5 分钟 OOM 查询和 30 秒工作查询之间产生差异。
*   **限制** *数据 在多个步骤中执行多个数据子集。*与其他过滤器非常相似，处理数据子集会减少 Vertica 将使用的资源量，从而可以成功执行。我经常为基于日期的聚合执行此操作；我按天->月->年做。这个子集从来没有失败过，当简单地汇总年份永远不会起作用时，我最终得到了准确的年度汇总。
*   **投影**
    使用为此定制的查询特定投影可以让 Vertica 使用更少的资源。
*   **解释计划**
    这是我从解释计划中获得的两个主要好处。
    **A)** *确保 Vertica 使用预期的投影*。例如，查询特定的预测以优化性能。如果我发现它们不是，我可以查看我对查询的期望和假设。
    **B)** *检查所有表是否都应用了最大过滤器。*在我的一些更复杂的子查询中，我发现 Date 列没有正确地下推到所有表中。一旦我纠正了这一点，性能就会快一个数量级（见上面的 5 分钟到 30 秒）。

使用这些步骤，我没有遇到任何无法获得结果的情况。有时需要一段时间。我有一组查询泵入一系列 14 个临时表，这些表以非常小的结果集结束；但是由于必须进行大量的运算，因此需要超过 15 分钟才能运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T19:56:52.357

Nija 的答案是更好的答案，但这里有一个建议要考虑：获取更多内存。有时你的系统已经超出了你的要求。

他对使用临时表的建议是我过去使用过的，但我已经有一段时间没有遇到这个问题了。但那是因为我们的系统没有做很多连接。

# linux - bash 将控制权从期望返回给用户

> ID：12959748
> 
> 赞同：3
> 
> 时间：2012-10-18T16:50:59.013
> 
> 标签：linux, bash, expect

我正在编写一个带有期望的bash脚本。

```
#!/bin/bash
IP1="a.b.c.d"
IP2="e.f.g.h"
HOST="xyz.com"
KEY="/path/to/key/file"
PORT="sshport"
/usr/bin/expect << EOD
    spawn ssh -p $PORT -i $KEY $HOST
    expect "*#"
    send "sh somescript\r"
    expect "Prompt from script:"
    send "$IP1\r"
    expect "Second Prompt from script"
    send "$IP2\r"
    interact

EOD 
```

我期望重新获得控制权，以便用户可以在发送 IP2 后与脚本交互，但脚本终止，从远程主机注销会话。请问有什么指点吗？

谢谢阿米特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T20:42:38.890

您没有设置“期望”命令，而只是发送到“期望”的标准输入。

您可以使用“-c”指定期望命令，如下所示，或“-f”指定命令文件。

```
/usr/bin/expect -c "
  spawn ssh -p $PORT -i $KEY $HOST
  expect \"*#\"
  send \"sh somescript\r\"
  expect \"Prompt from script:\"
  send \"$IP1\r\"
  expect \"Second Prompt from script\"
  send \"$IP2\r\"
  interact
" 
```

# c# - C# 内存/分配清理

> ID：12959756
> 
> 赞同：1
> 
> 时间：2012-10-18T16:51:29.050
> 
> 标签：c#, memory-management, garbage-collection

一些接近代码试图说明这个问题，什么时候标记为可用于垃圾收集的对象 -

```
class ToyBox  
{  
    public List<Toy> Toys = new List<Toy>();  
}  
class Factory  
{  
    public ToyBox GetToys()  
    {  
        ToyBox tb = new ToyBox();  
        tb.Toys.Add(new Toy());  
        tb.Toys.Add(new Toy());

        return tb;  
    }  
}  
main()  
{  
    ToyBox tb = Factory.GetToys();  
    // After tb is used, does all the memory get cleaned up when tb goes out of scope?  
} 
```

Factory.GetToys() 分配内存。什么时候清理内存？我假设当 Factoy.GetToys() 返回 ToyBox 对象时，对 ToyBox 对象的唯一引用是 main() 中的引用，因此当该引用超出范围时，会将 Toy 对象和 ToyBox 对象标记为垃圾回收.
那正确吗？感谢您的任何见解...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:52:55.773

> 那正确吗？

是的，当`main`方法完成执行时，`tb`变量超出范围（当然，除非您将一些指向它的指针添加到另一个具有更大范围的变量）并且`tb`有资格进行垃圾收集。当然，当实际的垃圾收集发生时，您无法控制。`main`它可能会在方法完成执行后很久才发生。决定最佳时机的是 CLR。`main`因此，如果您没有在方法完成后立即回收所有分配的内存，请不要感到惊讶。

# objective-c - 改变一个实例 NSArray

> ID：12959759
> 
> 赞同：0
> 
> 时间：2012-10-18T16:51:40.527
> 
> 标签：objective-c, ios

我有一个实例数组，我最终会根据用户设置进行更改。我将其设置为不可变的 NSArray：

```
@property (strong, nonatomic) NSArray *pointArray; 
```

当我需要更改数组时，我一直在这样做：

```
-(void)changePointArray
{
    NSMutableArray *tempArray = [NSMutableArray arrayWithArray:self.pointArray];

    // Make changes

    self.pointArray = [NSArray arrayWithArray:tempArray];
} 
```

这是可以接受的做法还是我在制造泄漏？我是否应该只对它进行类型转换：

```
self.pointArray = (NSArray *)tempArray; 
```

或者甚至需要担心将 NSMutableArray 设置为 NSArray？

```
self.pointArray = tempArray; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:34:36.193

你有什么顾虑？对于这种情况，人们可能会关注原子性、针对其他人修改数组的安全性、两者都没有，或两者兼而有之。如果您都不关心，只需将您的属性设为 NSMutableArray 并就地修改它。

如果您担心原子性，您应该制作一个副本，修改副本，然后将其换入（但是，当然，对象的所有用户都必须知道为一系列“原子”创建自己的*指针*的私有副本" 引用，而不是为每个引用重新引用属性）。

为了安全起见，您应该将数组设置为不可变的 NSArray 并将属性设置为只读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:04:57.087

您不必担心这一点`self.pointArray = tempArray;`，因为`NSMutableArray`它是`NSArray`. 也许分配了更多的内存，`NSMutableArray`但这根本不是问题——不用担心。

当然你仍然可以做`self.pointArray = [NSArray arrayWithArray:tempArray];`

在相反的情况下你会遇到问题，但如果你有

`@property (strong, nonatomic) NSMutableArray *pointArray;`

而你试图做`self.pointArray = tempArray;`的是 tempArray 是`NSArray*`

如果你尝试`self.pointArray = (NSMutableArray*)tempArray;`在那种情况下做你会遇到问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:13:22.527

不，没有泄漏（关于内存管理）。

如果您的目标是不在公共接口中公开相互数组，那么您的代码绝对没问题。

但是，如果您不关心这里的抽象（或者如果该属性不是公共的），那么首先声明 type 的属性会更容易`NSMutualArray *`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:09:29.720

如果内容可以更改或修改，那么最好的解决方案是使用 an`NSMutableArray`而不是`NSArray`.

如果您有任何特定的使用原因，`NSArray`那么以下代码是最佳解决方案。

```
self.pointArray = [NSArray arrayWithArray:tempArray]; 
```

# algorithm - 随时间旋转的坐标系

> ID：12959763
> 
> 赞同：0
> 
> 时间：2012-10-18T16:51:57.390
> 
> 标签：algorithm, game-physics, coordinate-transformation

我不确定这是否是我的问题的正确位置，但我会试一试。我猜它介于 CS 和物理之间，但由于我是用 C++ 编程的，所以我会在这里发布。

我正在查看 3D 中的粒子，由于施加在其上的力，它正在 (x, y) 平面中弯曲，如图所示。力是从 NE 进入的粗体箭头。y 轴与力之间的角度为“a”。

[设置](http://postimage.org/image/3m8ppk0u3/)

粒子以速度矢量 (v_x, v_y, v_z) 从左侧进入并在拐角处弯曲。牛顿第二定律很好地描述了这一点，没有问题。这很容易在数值上求解，例如通过欧拉方法。这我已经成功实施，到目前为止一切顺利。

然而，如图所示，粒子在恒定直径 h 的圆柱形管中移动，我希望在某个时间 t 找到 x 和 z 方向（指向屏幕外）到壁的法线距离。“正常距离”是指如果坐标系随粒子旋转，那么我想知道粒子沿 y 和 z 到管边缘的距离（如指向管边缘的 3 个小箭头所示） ）。最终目标是以某种方式确定粒子是否撞到了墙上。

对于 z 方向，它是微不足道的，因为它的轴在轨迹期间不会改变。然而，y 方向给我带来了巨大的问题。这是我的问题：有没有办法让我找到在轨迹期间沿 y 到管边缘的距离？请注意，我是以数字方式执行此操作的，因此我不一定需要解析表达式。

最好的，奈尔斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T00:18:54.003

你没有说管子的形状是什么，但总的来说：

1.  如果管中的弯曲是圆形的，则计算从粒子到管的内缘和外缘的曲率中心（圆心）的距离。将此称为 Dpi 和 Dpo（从粒子到曲率中心的距离，内部和外部）。从圆心到管本身的距离是恒定的：圆的半径，Ri 和 Ro。然后，您可以通过 Dpi - Ri 和 Dpo - Ro 计算粒子与管的内部和外部的距离。

2.  如果管中的弯曲不是圆形的，那么您必须演化一个函数来计算两个半径 Ri 和 Ro，作为半径的 ANGLE 的函数，因为这些值将不再是恒定的。一旦你有了这个函数，你就可以计算 Dpi(theta) 和 Ri(theta) 和 Dpo(theta) 和 Ro(theta)，你的距离就是上面的差异。

# .htaccess - 如何排除不再在我的站点地图中的页面在 Google 中的索引？

> ID：12959768
> 
> 赞同：1
> 
> 时间：2012-10-18T16:52:14.040
> 
> 标签：.htaccess, search, seo, sitemap

我已经接管了一个站点的管理，该站点有数百个页面，这些页面在站点地图中不再处于活动状态，但已被 Google 索引。其中许多导致我们不再提供的产品和服务。这对我来说通常不会太麻烦，但是这些页面上存在很多影响我们的 SEO 的问题，我宁愿只关注应该是实时的页面，而不是在没有的页面上执行 SEO一个是为了看。虽然我可以浏览并删除这些，但这让我很紧张。我更愿意记录所有以前的页面，最好是在它们所在的目录中。有没有办法让谷歌只索引属于当前活动站点地图结构的页面，而不必一个接一个地从整个站点的各个目录中删除它们？

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T07:58:33.390

显然，将 Google 中的内容排除在索引之外的最佳方法是在您的 webroot 目录中包含一个 robots.txt 文件，例如

```
User-agent: *
Disallow: /section-noindex
Disallow: /url-no-index.html 
```

避免内容被索引的另一种方法是在 html 结构上添加下一个元标记，在 head 标记中

```
<META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW"> 
```

# objective-c - 如何从Objective C中的标准键盘后面动画地隐藏/显示可选键盘

> ID：12959770
> 
> 赞同：0
> 
> 时间：2012-10-18T16:52:22.223
> 
> 标签：objective-c, keyboard, show-hide, optional

我已将 inputAccessoryView 设置为 XIB 文件视图的引用出口，其中包含用于可选键盘的按钮。这使得视图在标准键盘显示时显示，在标准键盘隐藏时隐藏。

当它在中间区域被点击时，也有必要隐藏可选键盘。这使它在标准键盘仍然显示时被隐藏。为此，我还将另一个属性设置为同一个 XIB 文件视图的引用插座。

我隐藏了可选键盘，将其框架的 origin.y 设置为一个高数字：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.30f];
viewOptionalKeyboard.frame = CGRectMake(viewOptionalKeyboard.frame.origin.x, 1200, viewOptionalKeyboard.frame.size.width, viewOptionalKeyboard.frame.size.height);
[UIView commitAnimations];
[UIView setAnimationDuration:0]; 
```

这使得可选键盘被隐藏，但动画在标准键盘的顶部而不是后面。您可以看到辅助键盘从上到下遍布整个窗口，直到它被隐藏。

有没有办法将它隐藏在标准键盘“后面”，使其隐藏过程看起来更好？

我编辑了这个问题，因为现在隐藏效果很好，克里斯的回答建议改变视图的大小。

现在的问题是再次显示它：当我点击一个按钮时，视图应该以相同的大小再次显示。在按钮点击事件中，我添加了以下代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.30f];
viewOptionalKeyboard.frame = CGRectMake(viewOptionalKeyboard.frame.origin.x, 500, viewOptionalKeyboard.frame.size.width, 74);
[UIView commitAnimations];
[UIView setAnimationDuration:0]; 
```

这是为了设置可选键盘的原始大小和原始 y 位置。它得到了原来的位置，但有两件事使它出错：

1）它显示在标准键盘上方/顶部，所以我们回到隐藏问题，但现在显示时。再次，您可以看到可选键盘从下方遍布整个窗口，直到它到达其原始位置。

2) 属于包含可选键盘的主视图的按钮尺寸变短，就好像它们被压碎了一样。

再次展示键盘以避免此问题的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:19:24.850

为什么不在移动 y 点的同时降低视图的高度？

```
//For ease of reading    
CGRect frame = viewOptionalKeyboard.frame;

float x = frame.origin.x;
float y = frame.origin.y + frame.size.height;

viewOptionalKeyboard.frame = CGRectMake(x, y, frame.size.width, 0); 
```

您只需要确保子视图具有灵活的高度自动调整大小掩码。

**编辑：现在问题已更改为需要视图隐藏/显示，答案也已更改**

您需要一个 ivar 或属性来跟踪原始帧高度：

```
@property (nonatomic, assign) float originalHeight; 
```

然后在您的显示/隐藏方法中，您可以检查 viewOptionalKeyboard 框架是否可见，并采取相应措施：

```
CGRect frame = viewOptionalKeyboard.frame;

BOOL isVisible = frame.size.height!=0;

//Only need to set once
if (!originalHeight && isVisible){
    self.originalHeight = frame.size.height;
}

frame.origin.y += (isVisible) ? originalHeight : -originalHeight;
frame.size.height = (isVisible) ? 0 : originalHeight;

viewOptionalKeyboardFrame.frame = frame; 
```

# ruby-on-rails - 为什么只有在我运行完整的测试套件后黄瓜场景才会失败？

> ID：12959772
> 
> 赞同：3
> 
> 时间：2012-10-18T16:52:24.643
> 
> 标签：ruby-on-rails, database, testing, cucumber

如果我运行特定场景，它全是绿色的。如果我只运行黄瓜套件（又名耙黄瓜），它就是绿色的。但是，如果我运行完整的测试套件（又名 rake），则单个场景会失败。

我认为这与数据库的状态和我的配置有关。我编写了黄瓜场景以假设最初是一个空数据库，并且我正在为各个场景构建小型数据集。

我正在使用具有截断策略的 DatabaseCleaner，我的理解是这将清除数据库。我弄错了吗？当单元和功能测试运行时，是否有可能已经创建的数据挥之不去？有没有一种快速的方法来确保黄瓜开始干净？

很高兴开始发布代码并涉足配置细节......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:03:14.217

双手抱头。深深的耻辱。

我从来没有真正清理过数据库。

我正在制定策略，但从未扣动扳机。

功能/支持/env.rb

前：

```
begin
  DatabaseCleaner.strategy = :truncation
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end 
```

后：

```
begin
  DatabaseCleaner.strategy = :transaction
  DatabaseCleaner.clean
rescue NameError
  raise "You need to add database_cleaner to your Gemfile (in the :test group) if you wish to use it."
end 
```

不要让它发生在你身上。

叹。

# php - PHP str_replace 在我的情况下不起作用

> ID：12959773
> 
> 赞同：0
> 
> 时间：2012-10-18T16:52:25.063
> 
> 标签：php

我正在尝试对数组进行字符串替换。

我有..

```
str_replace('texts', 'testssssss', $test->html); 
```

`$test->html`回报_

我想将所有文本替换为testssssss ..

```
key 1

<div>
   <a href='texts.company.name.html'>test</a>
</div>

Key 2

<div>
    other html...
</div>

Key 3

<div>
    other html...
</div>

Key 4

<div>
   <a href='texts.department.name.html'>department</a>
</div>

more... 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T16:54:34.833

您需要在某处分配新值， str_replace 不会自动覆盖主题：

```
$test->html = str_replace('texts', 'testssssss', $test->html); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:56:15.027

该函数返回字符串，因此您需要启动它 $variable =str_replace

# c++ - 如何将多行字符写入一个数据位置

> ID：12959775
> 
> 赞同：0
> 
> 时间：2012-10-18T16:52:35.417
> 
> 标签：c++

我想要做的是输入一行字符然后对其执行操作将其保存到一个输出文件位置然后读取下一行并做同样的事情。

```
//seperate function called within int main.
//expression is passed by reference to this function.

ifstream infile;
int i = 0;

infile.open("test.data");

if(infile.fail()){
  cout << "ERROR: File failed to open." << endl;
  exit(1);
}

while(!infile.eof()){
  infile >> expression[i];
  while(expression[i +1] != '\o'){
    infile >> expression[i + 1];
    i++;
  }
  //perform other operations within a class

  //print out results
  //read next line from file. 
```

谢谢你。我只需要帮助阅读文件中的下一行。可能在逻辑上并不完全正确，只是正在发生的事情的一个粗略例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:56:20.290

如果你想就地做这将是非常昂贵的。打开一个文件，逐行读取，无论是否更改，都将每一行输出到在原始文件所在的同一位置创建的临时文件。最后关闭两个文件，如果没有错误，删除原始文件并将临时文件重命名为原始文件。

# scala - 为什么我要重新实现惰性？

> ID：12959777
> 
> 赞同：14
> 
> 时间：2012-10-18T16:52:44.307
> 
> 标签：scala, lazy-initialization

我在 Twitter 的 Effective Scala 页面上阅读了关于[Lazyness [原文如此] 的部分，其中包括这个建议（重点是我的）：](http://twitter.github.com/effectivescala/#Functional%20programming-Lazyness)

> 为此目的使用惰性字段[按需计算和缓存值]，**但在语义需要惰性时避免使用**惰性。在这些情况下**，最好是明确的**，因为它使成本模型明确，并且可以更精确地控制副作用。

我不明白他们为什么要提出这个要求。为什么在语义需要惰性的情况下避免使用关键字会更好`lazy`（这意味着它对于程序的正确性是必要的，而不仅仅是将其用作优化）。我看不出编写自己的惰性初始化代码如何比使用语言内置的关键字更清楚地表明*需要惰性这一事实！*`lazy`我知道使字段线程安全涉及一些额外的开销`lazy`，但我不认为这就是他们在这里得到的......

关于使用我完全错过的这个指南是否有一些隐藏的优点`lazy`，还是我最好忽略这个建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:51:07.813

*编辑：我现在不再确定建议*是什么*，所以在批评 Twitter 的建议时，请在下面保留我的观点。（但我在下面给出我自己的建议。）*

我也不同意这个建议，但我（曾经）认为他们的观点是懒惰*太容易了*。您为访问惰性值付出了性能损失，但在使用点您没有注意到除了访问正常值之外您正在做任何事情。当然，这是使惰性 val 如此有用的一件事：您可以在惰性行为和非惰性行为之间切换，并且根本*不改变您的界面*。但是，如果人们在他们的代码中随机添加`lazy`，那么关键区域的性能可能会受到影响（假设它不会被惰性评估所弥补），初始化的顺序将更难预测（如果你执行很多操作，尤其重要）副作用）等。

即便如此，我认为**明确表达会更糟糕，**但你必须遵守纪律。如果您不能指望文档或纪律，也许最好完全避免它。

# python - 取给定文件中 Python 分数的平均值

> ID：12959780
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:53:01.810
> 
> 标签：python, string, dictionary, average

我正在制作一个函数，它作为输入（字符串，字典）并返回一个浮点数。该函数接受来自要评估的文件中的文本和单个单词的字典作为输入。该函数必须返回整个文本的分数。也就是说，分数是出现的单词分数的平均值。

我有一个 .csv 文件，其中包含一个单词列表，每个单词都给出了分数和标准偏差。在文件中，每一行都采用以下形式

```
word{TAB}score{TAB}standard_deviation 
```

我将字母全部小写并尝试取所有分数的平均值。

到目前为止我有这个，但无法用正确的方法来计算平均值：

```
def happiness_score(string , dict):
   sum = 0
   for word in string:
      dict = dict()
      if word in dict:
         sum += word
         word = string.lower()
         word,score,std = line.split()
         d[word]=float(score),float(std)
   return sum/len(dict) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:06:33.463

我不确定您要执行的确切数学运算。我不确定您是否能够读取该文件。

但希望这将提供一些指导。

```
# to hold your variables
holder_dict = {}

# read the file:
with open("/path/to/file.csv", 'r') as csv_read:
    for line in csv_read.readlines():
        word, score, std = line.split('\t')
        if word in holder_dict.keys():
            holder_dict[word][0] += [float(score)]
            holder_dict[word][1] += [std]
        else:
            holder_dict[word] = [[float(score)],[std]]

# get average score
for word in holder_dict.keys():
    average_score = sum(holder_dict[word][0])/len(holder_dict[word][0])
    print "average score for word: %s is %.3f" % (word, average_score) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:12:45.727

根据我从阅读您的解释中了解到的情况，这可能是您所需要的。

```
def happiness_score(string, score_dict):
    total = 0
    count = 0
    for word in string.lower().split():
        if word in score_dict:
            total += score_dict[word]
            count += 1
    return total/count

def compile_score_dict(filename):
    score_dict = {}
    with open(filename) as csvfile:
        reader = csv.reader(csvfile, delimiter='\t')
        for row in reader:
            score_dict[row[0].lower()] = int(row[1])
    return score_dict

score_dict = compile_score_dict('filename.csv')
happiness_score('String to find score', score_dict) 
```

# email - jboss As 7.0.2如何使用seam mail？

> ID：12959781
> 
> 赞同：1
> 
> 时间：2012-10-18T16:53:01.390
> 
> 标签：email, seam, jboss7.x

我尝试使用 seam 2.3.0.Final 和 jbossAs 7.0.2
发送邮件我使用 seam 工具发送邮件，我的 bean 代码：

```
String path = /** some Path to email template**/
        try
        {
            renderer.render(path);
        }
        catch (Exception e)
        {
            log.error(e.getMessage());
            throw new Exception(e);
        } 
```

在我的 component.xml 中：

```
<mail:mail-session host="smtp.gmail.com"
        username="user@domain.com"
        password="xxxx"
        ssl="true"
        tls="false"
        port="465"/> 
```

我知道 JBossAs 7.1.x 支持邮件（允许 jndi 的邮件会话配置），但这不是我们的选择。
当我发送电子邮件时，我收到此错误：

```
javax.mail.NoSuchProviderException: No provider for smtps 
```

我错过了什么，还是不可能那样做？如果没有，您认为可能有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:13:33.570

检查您的应用程序的类路径（*.ear.list/* .war.list 文件，如果我没记错的话）。这里[这个链接](https://stackoverflow.com/questions/2980408/problem-with-java-mail-no-provider-for-smtp)。
在我们的项目中我们也使用了它，但它不灵活，可能很快就不能满足您的需求（还有性能低下的问题等），您越早切换到 apache 邮件（或其他东西）越好。

# php - APC 对静态内容有什么作用

> ID：12959784
> 
> 赞同：6
> 
> 时间：2012-10-18T16:53:16.873
> 
> 标签：php, apc

假设我强制 mod_php 接收`.html`文件。假设这些文件之一中有 0 个 PHP 代码。

如果我在启用 APC 的情况下浏览到该文件，会发生什么？它会被缓存还是仍然需要从磁盘中读取？

另一种情况，我有一个`.php`文件。PHP 标签之外的内容会发生什么变化？它会存储在内存中吗？还是每次都必须从磁盘读取？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T17:16:31.420

> 如果我在启用 APC 的情况下浏览到该文件，会发生什么？它会被缓存还是仍然需要从磁盘中读取？

如果您将`.html`文件设置为解析为 PHP，那么是的 - 它将被缓存。有点。

具体来说，PHP 将为文档生成一个 optree，它最终成为一个非常短且无聊的程序，其中包含一个非常大的字符串常量。这将最终存储在内存中。但是，如果这就是您所追求的，那么最好使用类似[`mod_mem_cache`](http://httpd.apache.org/docs/2.2/mod/mod_mem_cache.html)（与 memcached 无关！）之类的东西，因为它实际上是为缓存静态内容而设计的。

> 另一种情况，我有一个 .php 文件。PHP 标签之外的内容会发生什么变化？它会存储在内存中吗？还是每次都必须从磁盘读取？

正如我之前提到的，PHP 标记之外的内容仍然被视为 PHP“程序”的一部分——尽管它在内部的处理方式略有不同，但被`?> ... <?php`（或文件开头或结尾）包围的一大块静态文本是有效地对待它，就好像它在一个`echo "..."`. （除了没有涉及在该字符串中转义的所有陷阱。）例如，以下两个代码块在功能上或多或少相同，除了空格的一些差异：

```
<?php
  if ($condition) {
      echo "Hello";
  }
?> 
```

对比

```
<?php if ($condition) { ?>
    Hello
<?php } ?> 
```

# php - jqGrid 不能内联编辑

> ID：12959787
> 
> 赞同：0
> 
> 时间：2012-10-18T16:53:26.113
> 
> 标签：php, jquery, jquery-ui, zend-framework, jqgrid

我一直在互联网上搜索我的简单问题的解决方案（我希望），但不幸的是没有任何帮助！..

我是 jqGrid 的初学者，我已经成功地在表格中显示了我的所有示例数组数据。我想要的是能够内联编辑“角色”列并将其保存回数组数据...我正在使用 Zend 框架并遇到此问题：

我的问题

我根本无法编辑数据。我可以像往常一样选择和突出显示，没有提供文本区域..

这是我的 HTML（请确认我使用的是正确的库）：

```
<html>
<head>
    <title>JqGrid Test</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>  
    <link rel="stylesheet" type="text/css" media="screen" href="/js/jquery-ui-1.8.18.custom/css/ui-lightness/jquery-ui-1.8.18.custom.css" />  
    <link rel="stylesheet" type="text/css" media="screen" href="/js/jquery.jqGrid-4.4.0/css/ui.jqgrid.css" />  
    <script src="/js/jquery.jqGrid-4.4.0/js/jquery-1.7.2.min.js" type="text/javascript"></script>
    <script src="/js/jquery.jqGrid-4.4.0/js/i18n/grid.locale-en.js" type="text/javascript"></script>
    <script src="/js/jquery.jqGrid-4.4.0/js/jquery.jqGrid.min.js" type="text/javascript"></script>
    <script src="/js/test/index.js" type="text/javascript"> </script>
    <script src="/js/jquery-ui-1.8.18.custom/js/jquery-ui-1.8.18.custom.min.js" type="text/javascript"></script>    
    <script src="/js/jquery.jqGrid-4.4.0/src/grid.loader.js" type="text/javascript"> </script>      
</head>
<body>
    <table id="list"  class="scroll"></table>
    <br />
</body>
</html> 
```

接下来我的`index.js`：

```
$(document).ready(function(){
    var lastsel2;
    jQuery("#list").jqGrid({
        datatype: "local",
        height: 250,
        colNames:['Role Id','name'],
        colModel:[
            {name:'id',index:'id', width:60, sorttype:"int", editable: true},           
            {name:'name',index:'name', width:100, sortable:false,editable: true,
                edittype:"textarea", editoptions:{rows:"2",cols:"10" },     
        ],
        onSelectRow: function(id){
            if(id && id!==lastsel2){
                jQuery('#list').restoreRow(lastsel2);
                jQuery('#list').editRow(id,true);
                lastsel2=id;
            }
        },
        caption: "Manipulating Array Data",
    });
    var mydata = [  
            {id:"1",name:"test"},
            {id:"2",name:"test2"},
            {id:"3",name:"test3"},
            {id:"4",name:"test"},
            {id:"5",name:"test2"},
            {id:"6",name:"test3"},
            {id:"7",name:"test"},
            {id:"8",name:"test2"},
            {id:"9",name:"test3"}
        ];
    for(var i=0;i<=mydata.length;i++)
        jQuery("#list").jqGrid('addRowData',i+1,mydata[i]);
}); 
```

我错过了什么？我希望我的问题很清楚，我感谢并感谢所有发表回复的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:02:09.123

您发布的代码中有很多错误。

*   你不应该使用`<html>`没有`<!DOCTYPE html ...`. 这意味着HTML的[怪癖模式](http://en.wikipedia.org/wiki/Quirks_mode)。后面的 HTML 代码看起来像 XHTML。所以你应该使用

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

*   您应该只包含任何 JavaScript 库的**一个**版本。在您的代码中，您首先包含了 jQuery 1.8.2（`src`属性中也有错误。应该是`src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"`），然后包含`jquery-1.7.2.min.js`. 以同样的方式，您首先包含`grid.locale-en.js`然后`jquery.jqGrid.min.js`包含`grid.loader.js`，这将包含相同的 jqGrid 代码，但未最小化。
*   下一点不是真正的错误，但您可以删除`class="scroll"`jqGrid 未使用的错误，因为有很多版本。
*   列定义`'name'`包含语法错误：您必须在列`}`定义的末尾包含`'name'`。
*   您使用`for(var i=0;i<=mydata.length;i++)`而不是`for(var i=0;i<mydata.length;i++)`. 用于填充网格的用法`addRowData`很糟糕而且很慢。您应该只移动在`mydata`创建 jqGrid 的代码之前定义的代码并添加`data: mydata`为附加参数。
*   如果要实现数据的*本地*`editurl: "clientArray"`编辑，则必须向网格添加其他参数。

下一个问题是我写答案的主要原因。问题是您`'id'`在网格中定义了可编辑列。问题是 jqGrid 在内部也使用称为 rowid的行（元素）`"id"`的属性。因此，您应该*将*列重命名为另一个名称。此外，您应该在输入数据中提供将用作 rowid 的属性。`id``<tr>` *`id``id`*

 *如果您确实希望保留`"id"`包含自定义数据的列的原始名称，并希望 jqGrid 使用任何其他属性名称`"id1"`，例如您必须包含的 rowid

```
localReader: {id: "id1"}, // needed for reading of the rowids
prmNames: {id: "id1"}     // needed for editing 
```

在这种情况下`mydata`可能看起来像

```
var mydata = [
        {id: "1", id1: "10", name: "test"},
        {id: "2", id1: "20", name: "test2"},
        {id: "3", id1: "30", name: "test3"},
        {id: "4", id1: "40", name: "test"},
        {id: "5", id1: "50", name: "test2"},
        {id: "6", id1: "60", name: "test3"},
        {id: "7", id1: "70", name: "test"},
        {id: "8", id1: "80", name: "test2"},
        {id: "9", id1: "90", name: "test3"}
    ]; 
```

[在这里](http://www.ok-soft-gmbh.com/jqGrid/1291.htm)，您将看到修复原始代码的演示。它使用值“10”、“20”、...、“90”( `id1`) 作为 rowids（元素`id`属性的值），并与您可以编辑的自定义数据一起使用。`<tr>``id`*

# url - @font 在网址之间遇到奇怪的问题

> ID：12959789
> 
> 赞同：0
> 
> 时间：2012-10-18T16:53:35.443
> 
> 标签：url, font-face, opencart, webfonts

我在客户的网站上遇到了一个奇怪的问题。根据您是否键入“www”，即使您刷新页面，字体也会以不同的方式出现。我想知道其他人是否有这个问题以及如何解决它？

显示正确的字体： [http ://artisseriebakery.com/](http://artisseriebakery.com/)

显示不正确的字体： [http ://www.artisseriebakery.com/](http://www.artisseriebakery.com/)

我在opencart中做了这个网站，字体是自定义的webfont，所以我不知道是不是链接问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:07:19.347

我目前正在使用 IE8，我认为您的字体没有问题……但这听起来像是缓存问题。

我找到了一个免费的 opencart 扩展，可以清除所有缓存，你也可以试试。

[http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5187&filter_search=cache](http://www.opencart.com/index.php?route=extension/extension/info&extension_id=5187&filter_search=cache)

## ***在下面编辑

尝试将 .htaccess 文件添加到字体所在的文件夹中，其中包含以下内容：

```
<FilesMatch "\.(ttf|otf|eot|woff)$">   
    <IfModule mod_headers.c>     
        Header set Access-Control-Allow-Origin "*"   
    </IfModule> 
</FilesMatch> 
```

我认为这应该可以解决您与字体的跨域资源共享 (CORS) 问题。让我知道这是否有帮助！

# ruby - 如何使正则表达式通过这些条件

> ID：12959791
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:53:50.930
> 
> 标签：ruby, regex

我想用正则表达式来验证电话号码的长度，只有两个条件。首先它的长度应该是 10。

该字符串的长度应为 10 位，可以是任何数字，例如

```
 4345623467 
```

如果字符串长度为 11，则应以 1 开头。

```
 14345623467 
```

长度可以是 10 或 11。其他长度不应该是有效的

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:03:54.237

一个更简单的：可选`1`后跟 10 位数字

```
/^1?\d{10}$/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:58:42.700

以下正则表达式匹配以“1”开头的 10 位或 11 位数字序列或恰好十位数字的任何序列：

```
/^(?:1\d{9,10}|\d{10})$/ 
```

以下是它的分解方式，以便您可以使用正则表达式变得更强大：

```
/^(?:1\d{9,10}|\d{10})$/
 │├─┘ ├──────┘ ├────┘ └ The end of the string.
 ││   │        └ Any digit repeated exactly ten times.
 ││   └ Any digit (0-9) repeated nine or ten times.
 │└ A non-matching group of two possible matches separated by a pipe (?:...|...)
 └ The start of the string. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:02:03.013

那应该这样做：

```
/^(\d{10}|1\d{10})$/ 
```

# google-apps-script - Google Script - 陷入搜索和编写循环，没有搜索整个文档

> ID：12959792
> 
> 赞同：2
> 
> 时间：2012-10-18T16:53:52.370
> 
> 标签：google-apps-script

我正在尝试创建一个脚本以在 Google 电子表格中运行，该脚本将扫描一个电子表格中的表格，找到与我的 IF 匹配的每一行，然后只将那些匹配的行写入另一个电子表格。我对脚本完全陌生，但已经拼凑了一些东西。究竟是什么，我不确定。这是一个笨拙的混乱，但我觉得它接近工作。

我遇到的问题：（除了不知道一点javascript）：

我不觉得它会搜索源表的整个范围。它找到第一个真实条件，然后继续将其写入目标工作表。超过。和结束。和结束。

使用以下方法得到了类似的结果：

```
for(n=0;n<data.length;++n){ 
if (data[n][13]=="yes"&&data[n][16]!="yes"){ ;
target.push(data[n]); 
```

我最终想写一些重复的检查和函数，但想消除它的实质。

这肉：

```
function test() {
  var source = SpreadsheetApp.openById("0A....nc");
  var sh = source.getSheetByName("NA");
  var data=sh.getDataRange().getValues()

  var target=new Array();
  for(i=0;i<data.length;++i){ 
  for (j=0;j<data[i].length;++j){
    if (data[i][13]=="yes"&&data[i][16]==""){ ;
      target.push(data[i]);
}
}
if(target.length>0){
  var ss = SpreadsheetApp.openById("0A....Gc");   
  var sh2=SpreadsheetApp.setActiveSheet(ss.getSheetByName("Sheet5")); 
  var xx = sh2.getLastRow();
  sh2.getRange(xx+1,1,target.length,target[0].length).setValues(target);
  }
}
} 
```

感谢任何人都可以提供的任何帮助！

编辑：设法让某些东西完全像我想要的那样工作。

```
function testtest() {
  var source = SpreadsheetApp.openById("0A....Wc");
  var sh = source.getSheetByName("Sheet1");
  var data = sh.getDataRange().getValues()
  var ss = SpreadsheetApp.openById("0A....mc");   
  var sh2 = ss.getSheetByName("Sheet1"); 
  var xx = sh2.getLastRow();

  var target=new Array();
  for(i=0;i<data.length;++i){ 
    if (((data[i][13]=='yes')||(data[i][13]=='YES')||(data[i][13]=='Yes')) && !((data[i][16]=='yes')||(data[i][16]=='YES')||(data[i][16]=='Yes'))){
      target.push(data[i]);}

}

   var newData=new Array();
   for(i in target){
    var sh2D = sh2.getDataRange().getValues();
    var row = target[i];
    var duplicate = false;
    for(j in sh2D){
      if(row.join() == sh2D[j].join()){
        duplicate = true;
      }
     }
     if(!duplicate){
       newData.push(row);
    }
  }

   if(newData.length>0){ 

   var dest = sh2.getRange(xx+1,1,newData.length,newData[0].length);
      dest.setValues(newData);
   }
} 
```

是的，它很草率。现在正在努力更新我的新目标表中的单元格并将该更改转换为主列表。实际上，它只是在工作完成后在列中添加“是”，然后更新主文件（在一张不断由 25 多人排序的工作表上）。

哦，如果有人知道一种独立于大小写或额外空格来搜索“是”的方法，那肯定有助于清理我的 IF 行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T17:01:11.657

> 哦，如果有人知道一种独立于大小写或额外空格来搜索“是”的方法，那肯定有助于清理我的 IF 行。

照你说的做...比较大写值，并修剪空白。

```
if ((data[i][13].trim().toUpperCase() === 'YES') && (data[i][16].trim().toUpperCase() != 'YES')) {
  ... 
```

如果您经常需要这样做，请创建一个辅助函数：

```
/**
 * Perform case-insensitive, trimmed comparison of two strings.
 * Returns true if strings are nominally equal.
 */
function strEqual(str1, str2) {
  var one = str1.trim().toUpperCase();
  var two = str2.trim().toUpperCase();
  return one === two;
} 
```

然后你可以这样做：

```
if (strEqual(data[i][13],'yes') && !strEqual(data[i][16],'YeS')) {
  ... 
```

# algorithm - 使用强连通分量算法作为循环检测

> ID：12959799
> 
> 赞同：8
> 
> 时间：2012-10-18T16:54:29.580
> 
> 标签：algorithm, graph

我知道，如果一组顶点是强连接组件的一部分，那么组件内的所有这些顶点都可以相互连接；一个循环。

现在，我想利用这个事实并声称如果图 G = (V,E) 有一个循环，那么该循环必须在 scc 内。

换句话说，所有周期都必须是 scc 的一部分（我的主张）。

我想不出任何反例来反驳我的主张，所以我想知道图中是否有任何不属于 scc 的循环。
或者我的主张是正确的吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T17:08:08.240

这是正确的。如果一组顶点在一个循环中，那么它们都是可以相互访问的（通过绕过循环），因此根据定义它们是一个 SCC。

话虽如此，这不完全是编程问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T09:41:40.503

让 e = (u, v) 成为有问题的边。我们注意到这是 G 中包含 e 的环当且仅当 u 连接到 G{e} 中的 v。我们的算法只是在 G{e} 上从 u 运行 DFS，如果 v 可以从 u 到达，则输出 yes，否则输出 no。该算法在线性时间中运行，因为 DFS 在线性时间中运行（我们只运行 DFS 算法的一部分来查找包含 u 的组件）。这个算法显然是正确的。如果 u 通过某个路径 p 连接到 G{e} 中的 v，我们可以将边 e 添加到 p 以形成一个循环。否则，从 G 中删除 e 会断开 u 和 v。

# algorithm - 图算法中的距离beetwen顶点

> ID：12959800
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:54:31.517
> 
> 标签：algorithm, graph-theory

我自己的问题：

设 G 是一个有 n 个顶点和 m 个边的无向图。
我们有一个从 v_1 到 v_2 的列表，但现在它并不重要。
每条边的权重等于 X。
我们的任务是找到从 v_i 到 v_j 的最快路径为 w = 2X 的所有对 (v_i, v_j)。

（看例子）

有可能比 brute v * dikstra 或 v*v?? 这个问题能在 O(n^2) 时间内解决吗？哪种算法最好？感谢您的每一个帮助。

例子：

```
 n = m = 5
    v_1 -> v_2 -> v_3 -> v_4 -> v_5 and v_1 -> v_3 
```

解决方案：

(1,4), (2,4), (3,5)

图片：http: [//i.stack.imgur.com/rVhee.gif](http://i.stack.imgur.com/rVhee.gif)

从 v_1 到 v_4 的最短路径是 2X（与其他解决方案相同）。

编辑：我们有邻接列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:41:24.370

> 有可能比 brute v * dikstra 或 v*v?? 这个问题可以在 $O(n)$ 或 $O(n log n)$ 时间内解决吗？

你不能变得更好`O(n^2)`（ = `O(v*v)`），因为输出可能包含`O(n^2)`不同的条目，例如：

```
 a
          |
     b----c----d
          |
          e 
```

从每个顶点到每个顶点都有一条长度为 2 的路径，除非源/目标 = c。概括此图将使您`O(n^2)`与所需的距离配对

# python - 有没有办法用 python 脚本运行 ELinks，比如 FireFox 和 Selenium webdriver 和 python

> ID：12959805
> 
> 赞同：2
> 
> 时间：2012-10-18T16:54:39.817
> 
> 标签：python, linux, selenium, browser

我刚开始探索 selenium，它很棒，但是我想写一个脚本，使用 ELinks 浏览网页。

使用 Se webdriver，我可以执行以下操作：

```
from selenium import webdriver
from selenium.webdriver.common.keys import Keys

#Open firefox
br=webdriver.Firefox()
#open website
br.get('http://python.org')
#check if website title contains word
assert 'Python' in br.title
elem=br.find_element_by_name('q')
elem.send_keys('selenium')
elem.send_keys(Keys.RETURN)
assert 'Google' in br.title
br.close() 
```

但是如何用 Elinks 在 python 中做类似的任务呢？（或者有可能吗？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T07:49:56.530

elinks 真的很快。您可以使用 Lua 脚本语言[自动化 elink 。](http://elinks.or.cz/documentation/html/manual.html-chunked/ch14.html)他们的文档中有[示例脚本](http://elinks.or.cz/documentation/html/manual.html-chunked/ch14s04.html)。您还可以尝试[使用 pexpect](http://www.noah.org/wiki/pexpect)，这是一种在 python 中自动化终端应用程序的非常好的方法。以下脚本使用 pexpect 执行与问题中的示例相同的任务。它将访问 python.org，搜索 selenium，将搜索结果保存到文件中，然后退出 elinks。

```
from pexpect import spawn
import time
import datetime

KEY_UP = '\x1b[A'
KEY_DOWN = '\x1b[B'
KEY_RIGHT = '\x1b[C'
KEY_LEFT = '\x1b[D'
KEY_ESCAPE = '\x1b'
KEY_BACKSPACE = '\x7f'

child = spawn('elinks http://python.org')
print 'waiting for python.org to load'
child.expect('Python')
time.sleep(0.1)
print 'doing selenium search'
child.sendline('/advanced search')
child.sendline(KEY_UP * 2)
child.sendline('selenium')
child.sendline('')
print 'waiting for search results'
child.expect('Google Search')
time.sleep(0.1)
print 'saving html'
child.send(KEY_ESCAPE)  # bring up menu
child.send(KEY_DOWN + 's')  # select save as in menu
child.send(KEY_BACKSPACE * 100) # remove any file name already in input box
file = './saved_' + datetime.datetime.now().strftime('%H%M%S') + '.html'
child.sendline(file)
#child.interact() #uncomment to interact with elinks, good for debugging
print 'quiting'
child.sendline('q')
child.wait() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:15:55.540

Selenium 有一个无头浏览器选项[htmlunit](http://htmlunit.sourceforge.net/)。htmlunit 仍然没有完整的 javascript 实现，但它有很多——你可以使用它直到它崩溃。

或者，无论如何，Chrome 都非常快。我将 chrome 用于我的 webdriver 自动化，并且 Chrome 速度足够快，如果我没有正确编码计时，我最终会遇到端口耗尽。

# image - 如何使用 actionscript 在图层中动态加载图像

> ID：12959806
> 
> 赞同：1
> 
> 时间：2012-10-18T16:54:51.977
> 
> 标签：image, flash, loading

我使用下面的代码来加载我的库中存在的图像：

```
Create_Image_With_Description();

function Create_Image_With_Description():Void {
this.createEmptyMovieClip("imageHolder", 600); 
// Put Here Images URoL 
imageHolder.loadMovie("Symbol 1"); 
// Position 
imageHolder._x = 0;
imageHolder._y = 0; 
// Size 
imageHolder._xscale = 210;
imageHolder._yscale = 215;
// Example: my_mc.createTextField(instanceName:String, depth:Number, x:Number,
y:Number,width:Number, height:Number) : Void 
this.createTextField("description1Field",1,10,203,120,20); 
// Put Here Images description 
description1Field.text = "Resident Evil: Afterlife";
} 
```

这里符号 1 是我已转换为符号的图像。当我尝试运行它时，我收到一条错误消息“打开 URL 'file:///E|/Symbol 1' 时出错”。我也试过给 imageHolder.loadMovie("img1.jpg"); 但它仍然没有奏效。谁能帮我这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T18:16:54.420

尝试替换这些行：

```
this.createEmptyMovieClip("imageHolder", 1000); 
// Put Here Images URL 
this.attachMovie("img1", "img1", {_x:100, _y:100}); 
```

# actionscript-3 - 找不到匹配项

> ID：12959811
> 
> 赞同：2
> 
> 时间：2012-10-18T16:55:08.903
> 
> 标签：actionscript-3

我有一个带有成对数字的嵌套数组：

```
_open = [[8,15], [9,16]]; 
```

我想使用 ArrayUtilities.findMatchIndex 从中找到匹配项，但在查找元素数组时它总是返回 -1。例如：

```
ArrayUtilities.findMatchIndex(_open, [8, 15]) 
```

我想知道 AS3 是否可以比较数组，因为比较其他类型（字符串、数字等）就可以了

这是 findMatchIndex()：

```
public static function findMatchIndex(aArray:Array, oElement:Object, ...rest):Number {
  var nStartingIndex:Number = 0;
  var bPartialMatch:Boolean = false;
  if(typeof rest[0] == "number") {
    nStartingIndex = rest[0];
  }    
  else if(typeof rest[1] == "number") {
    nStartingIndex = rest[1];
  }
  if(typeof rest[0] == "boolean") {
    bPartialMatch = rest[0];
  }
  var bMatch:Boolean = false;
  for(var i:Number = nStartingIndex; i < aArray.length; i++) {
    if(bPartialMatch) {
      bMatch = (aArray[i].indexOf(oElement) != -1);
    }
    else {
      bMatch = (aArray[i] == oElement);
    }
    if(bMatch) {
      return i;
    }
  }
  return -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:03:00.213

比较其他类型（字符串、数字等）效果很好，因为它们是所谓的基元，并且通过值进行比较。但是，数组是对象，因此它们是通过引用进行比较的。基本上这意味着`[8,15]`!= `[8,15]`。

解决它的一种方法是替换这条线......

```
else {
  bMatch = (aArray[i] == oElement);
} 
```

......像这样的东西......

```
else {
  bMatch = compareElements(aArray[i], oElement);
} 
```

... where`compareElements`将首先尝试检查其参数的类型，如果它们是对象，将比较它们的值。

# ios - iOS 上滑菜单

> ID：12959813
> 
> 赞同：4
> 
> 时间：2012-10-18T16:55:35.527
> 
> 标签：ios, menu

我正在尝试创建一个类似于 iPhone 目标应用程序的菜单系统。这是菜单的样子：

[![http://www.iclarified.com/images/news/24601/92487/92487.jpg](../Images/c7d9baa40b3b5fd000712da28d876be4.png)](https://i.stack.imgur.com/ZXLcm.jpg)
[（来源：[iclarified.com](http://www.iclarified.com/images/news/24601/92487/92487.jpg)）]

我一直在互联网上搜索，并没有找到很多信息。据我所知，我必须创建一个 UIView 作为菜单，偏移视图并检测何时触摸它以向上滑动。菜单视图中的这些按钮必须像标签栏控制器一样加载其他视图，同时保持菜单标签在底部向上滑动。向上滑动菜单，点击您想去的地方的按钮，在向下滑动按钮的同时加载该视图。

动画看起来很简单，它使它像标签栏控制器一样工作并始终保持在视图中，以及如何检测菜单的滑动（可能与 UIScrollView 相关）？

任何帮助都会很棒，不知道从哪里开始。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-09T08:37:47.783

最多 5 步包含子视图本身的创建，但如果您只对从第 5 步读取的拖动事件感兴趣，这与 panGestureRecognizer 有关。

1.  创建一个自定义 UIView，我还创建了一个委托协议，用于在子视图上发生操作时通知 viewController。根据您的子视图的复杂程度，您可能需要为此创建一个同名的 xib 文件。从现在开始，我们称它为 filterView。

2.  在 filterView 上创建两个方法，如“隐藏”和“显示”。如果你不想有一个按钮（即带箭头的小按钮，我称之为dropdownButton）来关闭和打开filterView，你可以跳过这一步，但我强烈建议实现它们。您要做的就是将 filterView.frame.origin.y 动画化为

    *   [[UIScreen mainScreen] bounds].size.height - dropDownButton.frame.height 隐藏filterView

    *   [[UIScreen mainScreen] bounds].size.height - filterView.frame.size.height 显示它。

如果需要，我还可以发送该动画的代码。

3\. 打开 UIViewController 的 xib 文件并添加一个 UIView，这样只有它的下拉按钮可见。单击视图并使用界面构建器中最右侧的窗格将其类更改为 filterView。在此步骤中，如果您正确执行了所有操作，您应该能够在页面底部看到您的 filtersView 的提示。如果不是，filterView.xib 文件可能没有正确连接到 filterView 源代码文件。

4\. 在 ViewController 中导入 FilterView 并作为 IBOutlet 连接并合成它。如果您编写了委托协议，请实施委托协议。如果您在 filterView 上有按钮，稍后您将需要它。委托协议应包括可选消息，例如

```
-(void) featuresButtonTappedOnFilterView: (FilterView *) filterView; 
```

并且在实现中你应该在 viewController 中做你必须做的事情，比如打开另一个 viewController。

5\. 在 viewControllers xib 文件上创建一个**panGestureRecognizer**并将其添加到您的 filterView。PanGestureRecognizer 是一个手势识别器，它将处理拖动事件。起初，整个 filterView 将能够通过单击其上的任何点来拖动，我们稍后会谈到。将 gestureRecognizer 连接为 IBOutlet 并创建一个 IBAction（最好使用更好的名称），例如：

```
-(IBAction)_panRecogPanned:(id)sender; 
```

在 ViewController 的 viewDidLoad 方法中不要忘记将委托设置为：

```
[_panRecog setDelegate:self]; 
```

6\. 实施其他状态以获得更多权力。但 stateChanged 一开始就足够了。

```
- (IBAction)_panRecogPanned:(id)sender {

    switch ([(UIPanGestureRecognizer*)sender state]) {

    case UIGestureRecognizerStateBegan: { } break;
    case UIGestureRecognizerStateChanged: {

       if ( [((UIPanGestureRecognizer *)sender) locationInView:_filterView].y > dropDownButton.frame.height ) 
            return; // Only drag if the user's finger is on the button

        CGPoint translation = [_panRecog translationInView:filterView];

      //Note that we are omitting translation.x, otherwise the filterView will be able to move horizontally as well. Also note that that MIN and MAX were written for a subview which slides down from the top, they wont work on your subview.
        CGRect newFrame = _panRecog.view.frame;
        //newFrame.origin.y = MIN (_panRecog.view.frame.origin.y + translation.y, FILTER_OPEN_ORIGIN_Y);
        //newFrame.origin.y = MAX (newFrame.origin.y, FILTER_INITIAL_ORIGIN_Y);
        newFrame.origin.y = _panRecog.view.frame.origin.y + translation.y;
        _panRecog.view.frame = newFrame;

        [_panRecog setTranslation:CGPointMake(0, 0) inView:self.view];

    } break;

    //Remember the optional step number 2? We will use hide/ show methods now:
    case UIGestureRecognizerStateEnded:
    case UIGestureRecognizerStateCancelled: {

    //CGPoint velocity = [_panRecog velocityInView:_panRecog.view];
    //Bonus points for using velocity when deciding what to do when if the user lifts his finger

        BOOL open;

        /*
        if (velocity.y < -600.0) {
            open = NO;
        }

        else if (velocity.y >= 600.0) {
            open = YES;
        } else
        */

        if ( _panRecog.view.frame.origin.y > (FILTER_OPEN_ORIGIN_Y + FILTER_INITIAL_ORIGIN_Y) / 2 ) {
            open = YES;
        }

        else {
            open = NO;
        }

        if (open == YES) { 

            [_filterView show];
        }

        else {      
            [_filterView hide];

        }

    } break;

    default:
        break;
} 
```

}

注意：我的过滤器视图位于页面顶部而不是底部，因为子视图将移出页面边框。注释掉 MAX 和 MIN 语句来解决这个问题，我懒得自己写了。代码在复制和粘贴后被修改，它可能（并且可能会）包含拼写错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T18:01:01.963

我认为你试图让它变得太复杂 - 只是以这样的方式制作视图和位置，使其大部分不在屏幕上，只显示一个提示。当您触摸提示时，将视图移动到完全可见，并将该移动放在动画块中。

菜单项可能只是在该视图上具有自定义图形的 UIButton。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T18:06:21.227

不要想复杂，逻辑很简单。设置它的高度和宽度，使其不在屏幕上。尝试这种方法，然后提供您的反馈。检查[http://blogsbits.com](http://blogsbits.com) 这个方法会有所帮助。hit 和 try 方法可以用来检查这些变量。

# jquery-ui - Jquery 选项卡 - 在激活前显示确认

> ID：12959814
> 
> 赞同：2
> 
> 时间：2012-10-18T16:55:41.150
> 
> 标签：jquery-ui, tabs, fancybox, jquery-ui-tabs

我正在使用 jquery UI 的选项卡。当用户切换选项卡时，我会检查未保存的更改，并相应地提示用户。但是，在用户甚至单击“是”或“否”之前，该选项卡仍然会加载。有谁知道我怎样才能让我的函数在我的fancybox对话框返回结果之前不返回任何东西？

你可以看到我已经尝试了几种不同的方法来在 CheckSomething() 中返回我的布尔值。

```
$("#myTabs").tabs({ 
    select:
        function (event, ui) {
            return CheckSomething();
        },

    show: 
        function (event, ui) { 
            //do some stuff
        }
});

function CheckSomething() {
    var loadMyTab = true;  //If I set this to false, then it always returns false.
    if (myCondition) {
        //Show a FancyBox prompt.

        if (fancyYes) {
            //return true;
            loadMyTab= true;
        }
        else {
            //return false;
            loadMyTab = false;
        }
    }
    else {
        //return true;
        loadMyTab = true;
    }
    return loadMyTab;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:53:40.497

通过标准确认而不是花哨的工作，它可以成为一个快速的解决方案吗？[http://jsfiddle.net/nuywj/](http://jsfiddle.net/nuywj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:51:45.663

我最终选择了一个标准的 javascript 确认框而不是 FancyBox。这解决了我的问题，因为 Confirm 将阻止代码被执行：

```
function CheckSomething() {
    if (myCondition) {
        return confirm("Are you sure you want to change tabs without saving?");
    }
    else {
        return true;
    } 
} 
```

# ios - cocos2d 闪烁

> ID：12959817
> 
> 赞同：1
> 
> 时间：2012-10-18T16:55:57.107
> 
> 标签：ios, xcode, cocos2d-iphone

我在两个数组 displayGrid1 和 displayGrid2 中都有一个编号为 1200 的 CCSprite 池。在显示墙壁或地板时，我将它们变为可见或不可见。地板有许多不同的纹理，并且不依赖于 z 顺序。墙壁也有几个纹理并且依赖于 z 顺序。

移动时我得到大约 6-7 帧，这没关系，因为它是基于回合的等距流氓。但是，我也得到了少量的闪烁，我认为这与性能有关，因为模拟器上没有闪烁。

我想提高性能。我正在考虑为地板使用数组 CCSpriteBatchNodes，它不依赖于 z 顺序，但我担心在该数组的元素之间频繁添加和删除精灵的成本，我认为这是必要的。

谁能告诉我如何提高性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:44:38.350

正如评论中提到的，您正在使用单独加载的多个小精灵文件，这可能会导致性能问题，因为浪费了内存来存储每个单独的精灵周围的多余像素数据。出于性能原因，OpenGL 纹理中的每一行像素数据必须具有总计为 2 的幂的字节数。尽管我相信 iOS 下的 OpenGL ES 会自动执行此操作，但它会带来很大的性能影响。将精灵组合成一个大小正确的纹理可以极大地提高渲染性能。

您可以使用 Zwoptex 之类的应用程序将所有这些较小的精灵文件分组到一个更大、更易于管理的精灵表/纹理图集中，并为每个精灵表/纹理图集使用一个 CCSpriteBatchNode。

Cocos2D 对使用带有纹理图集的精灵表有很好的支持，并且可以毫不费力地将代码转换为使用这些而不是单个文件。从纹理图集中创建单个精灵很容易，您只需按名称而不是从文件中调用精灵。

CCSpriteBatchNodes 将 OpenGL 调用组合在一起以调用它们的 sprite，这个过程称为批处理，这导致操作系统和 OpenGL 必须减少与 GPU 的往返次数，从而*大大*提高了性能。不幸的是，CCSpriteBatchNodes 仅限于为支持它们的纹理绘制精灵（输入精灵表/纹理图集）。

# php - eZ 组件在开发中使用是否安全？

> ID：12959818
> 
> 赞同：1
> 
> 时间：2012-10-18T16:56:02.217
> 
> 标签：php, zend-framework, workflow, zeta-components

我正在使用 Zend Framework 1.xx 开发一个系统，我想将工作流添加到我的系统中。因为 ZF 没有任何工作流组件，所以我想使用 eZ Components 工作流组件来设计我系统的工作流引擎，但似乎 ezc 稳定版本自 2009 年以来没有变化。现在我的问题是，基于 eZc 的工作流引擎的开发是安全的？我看到了 Zeta Components，Zeta Components 是 eZ Components 的延续吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T11:51:01.060

eZ Components 最初由 eZ Systems 开发，应该由 Apache Foundation 以“Zeta Components”的名义维护。但由于时间限制，核心开发者不得不将其从 Apache 下架，放到[Github上](https://github.com/zetacomponents)

eZ Components 由[Sebastian Bergmann](http://sebastian-bergmann.de/)、[Kore Nordmann](http://kore-nordmann.de/)、[Derick Rethans](http://derickrethans.nl/)和[Tobias Schlitt](http://schlitt.info/)开发，他们都是四位对 PHP 非常有经验的人。

[只需在http://www.ohloh.net](http://www.ohloh.net)上查看他们的排名...

因此，这里有 5 个理由让您仍然可以使用它：

*   我想即使它们自 2009 年以来没有改变，使用起来也比任何匿名人编写的新库更安全......
*   如果您查看作者的博客，您会发现仍有一些活动
*   似乎 eZ Publish 甚至著名的 PHPUnit（来自 Bergmann）仍在使用它
*   代码很清晰，如果您尝试一些问题，则更容易调试。
*   使用的人越多，纠正的人就越多

以下是不使用它的两个原因：

*   没有支持
*   很少的社区

根据您自己的项目限制，您可以选择使用或不使用工作流组件。但在我自己看来，做出选择的最好方法就是测试它。

# c - 多种获取地址的方法

> ID：12959819
> 
> 赞同：1
> 
> 时间：2012-10-18T16:56:11.423
> 
> 标签：c, msp430, iar

在 IAR C/C++ Compiler 手册中，它指出编写优化友好的源代码：

> 避免使用 & 运算符获取局部变量的地址。由于两个主要原因，这是低效的。首先，变量必须放在内存中，因此不能放在处理器寄存器中。这会导致代码更大更慢。其次，优化器不能再假设局部变量不受函数调用的影响。

还有哪些其他方法可以获取局部变量的地址？显然，我知道如果我有一个指向该变量的指针，我可以使用它，如果我有一个数组，我可以使用数组名称，但是我不知道除＆ 操作员。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T16:59:26.693

没有其他方法可以获取地址[*]。该建议中的“使用`&`运算符”文本是多余的。我想它只是为了提醒您哪个运算符是地址运算符，以防您不清楚应该避免使用什么。

它正在谈论的优化是：

1）如果你不取地址，那么变量不需要*有*地址。

2）如果地址永远不会“转义”编译器可以看到的代码，那么编译器可以假设该值不会通过它看不到的代码改变。不获取地址可以确保这一点，但在某些情况下，即使获取了地址，编译器也可以进行转义分析。

对于这两个目的，如何获取地址实际上并不重要，所以如果有*另*一种方法可以在 C 中获取地址，那么建议必须在操作员旁边提及它`&`。

[*] [编辑：啊哈！我有点错。如果变量是一个数组，那么您可以在不使用`&`运算符的情况下获取它的地址，只需让它衰减到指向第一个元素的指针。我不知道 IAR 编译器是否实际上将足够小的数组优化到寄存器中，如果没有，则无需提及。但它肯定是允许的。]

# model-view-controller - 在哪里格式化数据？模型 ？控制器？

> ID：12959823
> 
> 赞同：0
> 
> 时间：2012-10-18T16:56:14.813
> 
> 标签：model-view-controller, model, controller, formatting

我需要格式化数据以在 MySQL 请求后使用它们。

格式化日期（使用日期库），排序和排列数据（使用循环）等。

PHP 示例（CodeIgniter 框架）：

```
$result = $query->result_array();
$data = array();
foreach($result as $key => $value) {
    $result[$key]['date'] = px_date_time_format($result[$key]['date'], 'fr');       
    if ($value['id_parent'] == 0) {
        $data[$value['id']] = $result[$key];
    }
}

foreach($result as $key => $value) {
    if ($value['id_parent'] != 0) {
        $data[$value['id_parent']]['children'][$value['id']] = $value;  
    }
}

return $data; 
```

我应该在哪里格式化这些数据？在我的模型或控制器中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T19:04:17.860

在视图中。

MVC 设计模式中的视图是负责表示逻辑的部分。它创建响应，该浏览器（假设您正在谈论 MVC for web 的适应）接收。

View 从模型层请求数据，并根据它接收到的数据和控制器先前设置的状态，决定它应该产生什么响应。我可以是 HTML *（由多个模板组成）* JSON、XML 甚至只是一个 HTTP 标头。

控制器处理用户的输入，模型层包含业务逻辑。

# php - 如何查看在线用户状态

> ID：12959827
> 
> 赞同：1
> 
> 时间：2012-10-18T16:56:26.180
> 
> 标签：php, mysql

例如，我如何在登录后使用更新语句或单独的页面更新到数据库状态 = 1，其中 id =$id，请任何人了解字符串的外观？

这是一个会员状态脚本，我正在尝试制作它，以便在线会员可以拥有自己的页面

这只是查看部分和接下来的更新部分

```
 mysql_select_db("messages") or die(mysql_error()); 
 $data = mysql_query("SELECT on_status FROM users WHERE id='$user_id'") 
 or die(mysql_error()); 
 echo "<table border cellpadding=3 bgcolor=\"00FF00\">"; 
 while($info = mysql_fetch_array( $data )) 
 { 
 echo "<tr>"; 
 echo "<th>User:</th> <td>".$info['user_name'] . "</td> "; 
 echo "<th>Status:</th> <td>".$info['on_status'] . " </td></tr>"; 
 } 
 echo "</table>"; 

?>
<p><br>

<a href="/home.php">Go Back</a><p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:59:28.783

添加一个 `status` 在用户表中调用的字段。其中 users 表包含用户的所有数据。

更新`status`到 `online` 用户登录时..此代码将在验证用户名和密码后放置..

// 例如：当您为用户启动会话时，写入此更新

当用户尝试注销 UPDATE `status` 到 `offline`.. 时，此代码将放在`session_destroy()`语句旁边

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:00:08.253

试试这个更新语句：

```
"UPDATE `users` SET `on_status` = 1 WHERE `id` = '$user_id'"; 
```

不过，如果我可以建议：保留最后一个活动的时间戳。这样，如果页面没有刷新超过 5 分钟（或更长时间），您可以将用户显示为“离线”，即使用户没有点击注销按钮。

# android - 如何使用 Android Intent？

> ID：12959833
> 
> 赞同：0
> 
> 时间：2012-10-18T16:56:48.200
> 
> 标签：android, android-intent, intentfilter

我试图启动浏览器在 twitter 中进行授权，并希望它返回到我的应用程序。我在 AndroidManifest.xml 中将意图过滤器声明为：

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="appfortwitter" 
          android:host="com.pfs.safecrackerplus-callback" />                
</intent-filter> 
```

在应用程序活动中，我定义了方法

```
@Override
protected void onNewIntent(Intent intent) 
{
 ...
} 
```

授权后，我的应用程序再次启动，但调用了 onCreate 方法而不是 onNewIntent。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:03:00.517

为什么您使用 Web 浏览器而不是 twitter 3rd party api for Android 进行身份验证。身份验证完成后，您永远不会返回您的活动。因为它永远不会通知您身份验证是否完成。

最后，您应该使用 twitter api for android 来代替它。

# html - 我如何在 Ipad 上将图像居中

> ID：12959835
> 
> 赞同：1
> 
> 时间：2012-10-18T16:56:55.220
> 
> 标签：html, css

我是新来的，在此先感谢。

我现在如何将 ipad 中的顶部滑块图像居中对齐，图像是左对齐的。

请看下面的链接，

[http://psd2htmlexpert.com/examples/Baytreefloristhtml/](http://psd2htmlexpert.com/examples/Baytreefloristhtml/)

亲切的问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:00:42.933

要使图像居中，您可以使用以下代码段：

```
img {
  display: block;
  margin: 0 auto;
  width: 80%;
} 
```

图像默认是内联元素，因此您需要在调整边距之前将其设为块元素。简单地在元素的`auto`每一侧划分边距，因此最终在中间。

*（我添加了宽度：80%；因为它不能和它的父级一样宽，因为这样就没有边距可以分割了。）*

[演示](http://jsfiddle.net/wfLGG/5/)

# jquery - jquery：not 选择器在 next() 方法中不起作用

> ID：12959836
> 
> 赞同：3
> 
> 时间：2012-10-18T16:56:56.553
> 
> 标签：jquery, next, tree-traversal

当您想选择下一个 li 项目而不是具有 someClassName 的项目时，下一个最好的方法是什么。not 选择器返回一个空数组！

或者这是使用过滤器的情况吗？

```
 <ul class="items">
    <li class="first">pickle</li>
    <li class="someClassName">tomato</li>
    <li>chicken</li>
    <li>cocosnut</li>
  </ul>

var current = $('ul.items li.first');
var next =  current.next(':not(li.someClassName)'); 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T16:58:41.907

`next`只选择被选元素的下一个兄弟。您可以使用`nextAll`方法：

```
var next = current.nextAll(':not(.someClassName)').first(); 
```

[http://jsfiddle.net/P3EpK/](http://jsfiddle.net/P3EpK/)

请注意，您的标记无效。

# c - 一个进程可以有两个PID吗？

> ID：12959843
> 
> 赞同：3
> 
> 时间：2012-10-18T16:57:36.180
> 
> 标签：c, fork, pid

我正在研究计算机系统，我制作了这个非常简单的函数，用于`fork()`创建子进程。如果它是子进程，则`fork()`返回0。`pid_t`但是在这个子进程中调用该`getpid()`函数会返回一个不同的非零 pid。在我下面的代码中，`newPid`仅在程序上下文中有意义，对操作系统没有意义？它可能只是一个相对值，根据父母的 pid 衡量吗？

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <string.h>
#include <errno.h>
#include <stdlib.h>

void unixError(char* msg)
{
    printf("%s: %s\n", msg, strerror(errno));
    exit(0);
}

pid_t Fork()
{
    pid_t pid;
    if ((pid = fork()) < 0)
        unixError("Fork error");
    return pid;
}

int main(int argc, const char * argv[])
{
    pid_t thisPid, parentPid, newPid;
    int count = 0;
    thisPid = getpid();
    parentPid = getppid();

    printf("thisPid = %d, parent pid = %d\n", thisPid, parentPid);

    if ((newPid = Fork()) == 0) {
        count++;
        printf("I am the child. My pid is %d, my other pid is %d\n", getpid(), newPid);
        exit(0);
    }
    printf("I am the parent. My pid is %d\n", thisPid);
    return 0;
} 
```

输出：

```
thisPid = 30050, parent pid = 30049
I am the parent. My pid is 30050
I am the child. My pid is 30052, my other pid is 0 
```

最后，为什么孩子的 pid 2 比父母的高，而不是 1？主函数的 pid 和它的父函数之间的差异是 1，但是当我们创建一个子函数时，它会将 pid 递增 2。这是为什么呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T17:00:07.697

从叉子[手册](http://linux.die.net/man/2/fork)页：

> 返回值
> 
> 成功时，父进程返回子进程的PID，子进程返回0。失败时，在父进程中返回 -1，不创建子进程，并适当设置 errno。

fork 不返回子进程的pid，只在父进程中返回。因此，子进程没有两个 pid。

试试这个

```
int main(int argc, const char * argv[])
{
    pid_t thisPid, parentPid, newPid;
    int count = 0;
    thisPid = getpid();
    parentPid = getppid();

    printf("thisPid = %d, parent pid = %d\n", thisPid, parentPid);

    if ((newPid = Fork()) == 0) {
        count++;
        printf("I am teh child. My pid is %d\n", getpid());
        exit(0);
    }
    else
       printf("I am the parent. My pid is %d, my child pid is %d\n", thisPid, newPid);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:00:21.827

Pids 是一个进程。一个进程永远不会有超过 1 个 pid - 在操作系统中处理进程的内部数据结构中只有一个 PID 字段。

除此之外，当您调用 fork() 时，您正在克隆调用 fork 的进程，生成它的完全副本——所有文件句柄、所有内存等。**除了**它的 PID。这就是为什么 fork 根据您是子进程还是父进程返回不同值的原因。这种不同的返回值让程序知道它是孩子还是父母。孩子得到 0，因此可以知道它是孩子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T16:58:53.157

不，一个 pid 一次只分配给一个进程。

进程 ID 在分配给进程时不需要遵循任何规则。因此，如果看起来子 pid 是父 pid 的增量，这只是运气。

通过某些进程的 pid，不可能得出关于进程关系的任何结论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:01:24.293

PID 在分配时不是连续的（实际上不遵循任何规则），并且一个进程一次只有一个 PID。此外，永远不可能有两个进程共享相同的 PID。

# c# - 打印机通信捕获

> ID：12959844
> 
> 赞同：2
> 
> 时间：2012-10-18T16:57:37.957
> 
> 标签：c#, printing, driver, capture

如果我需要在其他地方发布这个，请告诉我。

我们有一些正在重写的旧软件，它使用打印机驱动程序连接到专有打印机。

我需要绕过打印驱动程序重写软件并直接进入打印机。我确实有打印机通信的规格，这很好，但我想做的是监视与打印机的通信以查看其内容（来自我重写的现有软件）并将其与规格进行比较，以及什么我将发送它进行验证。

我必须确保我没有遗漏任何东西。

关于我如何能够做到这一点的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T23:48:17.843

要捕获流量，您必须使用基本选项。

**1.使用软件**

如果您使用的是以太网，您可以使用[WireShark](http://wireshark.org)或[USBTrace](http://download.cnet.com/USBTrace/3000-2086_4-10401250.html)之类的程序来捕获发送出去的数据包。USB 也有类似的程序。

**2.使用硬件**

另一种选择是使用外部逻辑分析仪。它基本上是一个位于计算机和打印机之间的盒子，它捕获所有数据，然后使用软件对其进行解码。有一些便宜的选项可用（USBEE、[Bus Pirate](http://dangerousprototypes.com/docs/Bus_Pirate)和[Total Phase Beagle](http://www.totalphase.com/products/beagle_usb12/)。

我拥有一个 USBEE，我用它来调试一个简单的 USB 设备。它为此工作得很好。该软件虽然有点笨拙。

# crystal-reports - 在 IIS 中部署应用程序时水晶报表无法加载

> ID：12959845
> 
> 赞同：2
> 
> 时间：2012-10-18T16:57:40.923
> 
> 标签：crystal-reports

我将 packageTmp 复制到 inetpub/wwwroot，然后添加了一个网站并将其作为我的路径。

安装了水晶报告运行时，CRRuntime_32bit_13_0_4 - 但仍然没有工作。

我在 wwwroot/aspnet _client/systemweb/4_0_30319 中也有 Crystalreportviewers13 文件夹

这是我用水晶报表进入页面时遇到的错误。我可以知道路径在哪里定义吗？当我在 IIS 中部署我的应用程序时会出现此问题。

异常详细信息：System.Runtime.InteropServices.COMException：文件名无效。

**源错误：**

`An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.`

**堆栈跟踪：**

`[COMException (0x800001fb): Invalid file name.] CrystalDecisions.ReportAppServer.ClientDoc.ReportClientDocumentClass.Open(Object& DocumentPath, Int32 Options) +0 CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.Open(Object& DocumentPath, Int32 Options) +95 CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +270 [CrystalReportsException: Load report failed.] CrystalDecisions.ReportAppServer.ReportClientDocumentWrapper.EnsureDocumentIsOpened() +333 CrystalDecisions.CrystalReports.Engine.ReportDocument.Load(String filename, OpenReportMethod openMethod, Int16 parentJob) +877 CrystalDecisions.CrystalReports.Engine.ReportClass.Load(String reportName, OpenReportMethod openMethod, Int16 parentJob) +1183 CrystalDecisions.CrystalReports.Engine.ReportDocument.EnsureLoadReport() +113 CrystalDecisions.CrystalReports.Engine.ReportDocument.SetDataSourceInternal(Object val, Type type) +53 CrystalDecisions.CrystalReports.Engine.ReportDocument.SetDataSource(DataTable dataTable)` ……

这是 .aspx 代码后面的 .cs 代码，用于 reportxx.rpt

```
m_reportxx = new reportxx();
CrystalReportViewer1.ToolPanelView = CrystalDecisions.Web.ToolPanelViewType.None;

DataTable dt = data.GetReport();

reportxx.SetDataSource(dt);

CrystalReportViewer1.ReportSource = m_reportxx; 
```

我试过这个，它在 Visual Studio 环境中调试时工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:19:56.083

I know this is an old post. but For anyone still looking for the answer:

You need to register crystal reports in page markup

```
<% @ Register Assembly="CrystalDecisions.Web, Version=13.0.2000.0, Culture=neutral, PublicKeyToken=692fbea5521e1304"
    Namespace="CrystalDecisions.Web" TagPrefix="CR" %> 
```

Set the property **'Copy to Output Directory'** of the report to **'Copy always'**

the path of the file in the crystalreportsource will be ~/bin/YOURFOLDER/YOURFILE

```
<CR: CrystalReportSource ID ="CrystalReportSource1" runat ="server">
            <Report FileName="~/bin/oilmovement/rptOMDayEnd.rpt">
            </Report>
        </CR: CrystalReportSource> 
```

Now the report should work

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-30T18:14:39.387

就我而言，我在 2 天前发现了错误并且没有发现任何问题......最后我使用**了 Procmon.exe**（[https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx?f=255&MSPPError= -2147217396](https://technet.microsoft.com/en-us/sysinternals/processmonitor.aspx?f=255&MSPPError=-2147217396) ) 来跟踪错误。**我按Result** + **is not** + **SUCCESS**过滤，我尝试再次运行 Web 应用程序并出现 Error: **ACCESS DENIED** to Folder **X**。我授予 X 文件夹正确的权限并且工作正常。

# c++ - MSVC 2003 看不到嵌套包含文件中的任何定义

> ID：12959846
> 
> 赞同：0
> 
> 时间：2012-10-18T16:57:42.660
> 
> 标签：c++, visual-c++

我有一段带有 COM 类声明的代码，如下所示：

```
#include "PathTypes.h"

MIDL_INTERFACE("552C7555-0555-4444-BA86-56CF39AAFFFF")
IPathCalc : public IUnknown
{
    virtual HRESULT STDMETHODCALLTYPE GetLocation(
        /* [retval][out] */ GeoLocation* pLoc) = 0;
    virtual HRESULT STDMETHODCALLTYPE SetLocation(
        /* [in] */ GeoLocation* pLoc) = 0;
    ...
    }; 
```

以下是`PathTypes.h`文件内容：

```
#if !defined(PATHCALC_TYPES_INCLUDED)
#define PATHCALC_TYPES_INCLUDED

#include "libastro/AstronomyStructs.h"

#endif 
```

并且`libastro/AstronomyStructs.h`来自外部跨平台库：

```
#ifndef _ASTRONOMY_STRUCTS_INCLUDED
#define _ASTRONOMY_STRUCTS_INCLUDED

typedef struct {
    double lattitude;
    double longitude;
} GeoLocation;

...

    #endif  /* _ASTRONOMY_STRUCTS_INCLUDED */ 
```

当我尝试用 g++ 构建这段代码时，一切都很顺利。这不是 MSVC 2003 返回**错误 C2061: syntax error : identifier 'GeoLocation' 的**情况。

似乎 MSVC 没有“看到”`libastro/AstronomyStructs.h`文件中的定义。当我`#include "PathTypes.h"`用`#include "libastro/AstronomyStructs.h"`代码替换时编译没有错误。

如何让 MSVC 2003 真正“看到”嵌套包含文件中的定义？

### 更新1：

该文件`PathTypes.h`与包含它的代码位于同一目录中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:59:57.003

> 如何让 MSVC 2003 真正“看到”嵌套包含文件中的定义？

应该这样做 - 我的猜测是`"PathTypes.h"` 从不同的地方读取的（你的系统上有多个版本吗？）。或者可能是循环包含的情况，但您无法从发布的代码中分辨出来。照原样，它应该可以工作。

注意：宏`_ASTRONOMY_STRUCTS_INCLUDED`是非法的，去掉前导下划线。

另外，请注意，在这种情况下，您不需要完整的定义，前向声明就足够了：

```
class GeoLocation; //forward-declaration

IPathCalc : public IUnknown
{
virtual HRESULT STDMETHODCALLTYPE GetLocation(
    /* [retval][out] */ GeoLocation* pLoc) = 0;
virtual HRESULT STDMETHODCALLTYPE SetLocation(
    /* [in] */ GeoLocation* pLoc) = 0;
...
}; 
```

# mysql - 选择有用户的产品

> ID：12959849
> 
> 赞同：1
> 
> 时间：2012-10-18T16:57:54.947
> 
> 标签：mysql, sql

我已经很长时间没有使用 SQL 了，我需要一些基本查询的帮助。我有以下三个表：

*   `users (id, name)`
*   `products (id, name)`
*   `owners (userid, productid, date)`

用户 A 可以将一种产品卖给用户 B，然后再卖给 A。

现在，我想要每个用户当前拥有的所有产品的列表以及交易日期。

目前，我的查询是这个，但我被旧数据困住了（一个产品与一个用户的第一次关联，而不是最新的）：

```
SELECT users.name, products.name, date
FROM products
     JOIN owners ON products.id = owners.id
     JOIN users ON owners.id = user.id
GROUP BY product.id 
```

你有一些提示吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:00:56.340

您需要添加一个子查询，该子查询`date`为每个`productid`

```
SELECT  users.name, 
        products.name, 
        date
FROM    products
        JOIN owners 
            ON products.id = owners.id
        JOIN users 
            ON owners.id = user.id
        JOIN
        (
            SELECT productID, MAX(Date) maxDATE
            FROM owners
            GROUP BY productID
        ) nw ON owners.productID = nw.productID AND
                owners.date = nw.maxDAte
GROUP BY product.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:09:13.717

如果您以降序获得查询，则最后添加的数据将首先看到

`ORDER BY date DESC`

# iphone - 为什么调试器不在断点处停止

> ID：12959861
> 
> 赞同：-1
> 
> 时间：2012-10-18T16:58:58.363
> 
> 标签：iphone, ios6

我正在尝试在我的应用程序中调试一个点，它将基于 longpressgesture 将图像从 imagescrollview 保存到相册。

我在保存照片方法中设置了一个断点。

当我启动应用程序并点击保存照片按钮时，它应该会停在那里，但它永远不会在断点处停止，也不会将照片保存到相册

我该怎么做才能使调试器在我添加的断点处停止？

```
-(void)savePhoto{

CGPoint location = [gesture locationInView:_imageView];

if  (CGRectContainsPoint(_imageView.frame, location)){

UIImageWriteToSavedPhotosAlbum(_image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil);
}
} 
```

在 UIImageWriteToSavedPhotosAlbum 语句中有一个断点。在 cgpoint 位置尝试断点，if 语句和断点在这些点处停止，但不在 UIImageWriteToSavedPhotosAlbum

感谢所有建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:04:14.883

听起来 if 条件评估为 false

在 if 语句之前添加一个日志以检查它的计算结果是 0 还是 1

```
NSLog(@"contains point?? - %d", CGRectContainsPoint(_imageView.frame, location)); 
```

# java - 将 POJO 值传递到 Mule ESB 中的数据库

> ID：12959863
> 
> 赞同：2
> 
> 时间：2012-10-18T16:58:58.707
> 
> 标签：java, esb, mule

我正在尝试使用 Mule ESB 将列表传递给 Postgresql。

我的 pojo 的简化版本如下所示：

```
 public class NewEntry {
    private String positionReference;
    private String productID;

@XmlElement(required=true, name="PositionReference")
public String getPositionReference() {
    return positionReference;
}
public void setPositionReference(String positionReference) {
    this.positionReference = positionReference;
}
@XmlElement(required=true, name="ProductID")
public String getProductID() {
    return productID;
}
public void setProductID(String productID) {
    this.productID = productID;
    }

    } 
```

这是通过一个肥皂网络服务作为列表传入的

直到现在我已经将它简单地转换为 JSON 并将其泵出到一个文件中，现在我想将它插入到数据库中，所以在我的数据库步骤中，我已经按照以下行放入了插入查询：

```
<jdbc:query key="insertrecord" value="INSERT INTO f_intraday_rt(version) VALUES (#[message:productDescription]);"/> 
```

无论如何，无论我在 VALUES 部分使用什么消息评估，我都无法让它插入一个值，只是错误或空白行。

如何解开循环并为每个列表项插入一行？

谢谢

汤姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:15:03.010

在出站 JDBC 端点之前，使用集合拆分器将对象列表拆分为不同的消息。这将执行多次插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:00:51.810

它是 List 中的每个条目一个 INSERT，因此您应该遍历集合并为每个条目执行 SQL INSERT。

最好考虑批处理和事务。它们是一个工作单元吗？

# jquery - 页面加载时菜单未隐藏

> ID：12959865
> 
> 赞同：1
> 
> 时间：2012-10-18T16:59:10.833
> 
> 标签：jquery, html, css

在以下链接中：

[关联](http://www.interfaithmedical.com/CheckSite/ms_radiology.html)

每当用户访问时，在 IE 或 FF 中，菜单首先显示为展开几秒钟然后折叠。谁能告诉我我必须在哪里编辑以确保它不会在页面加载时扩展。只发生在某些页面上。

**编辑**：我做了以下，现在很好。

```
#topMainNav .dropdown {
    position: absolute;
    padding: 5px; /* padding: 5px 10px 5px 10px; */
    border-bottom-right-radius: 10px;
    border-bottom-left-radius: 10px;
    -moz-border-radius-bottomright: 10px;
    -moz-border-radius-bottomleft: 10px;
    z-index: 1;
    display: none; /* <<-- **ADDED THIS AND IT SOLVED THE PROBLEM** */
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:14:36.727

无法重现行为，但你可以试试这个：

```
 <head>
           {....}
           <style id="substyle">.dropdown{display:none !important}</style>
        </head> 
```

然后最好使用 onload 而不是 jquery 就绪事件回调函数：（因为之后触发）

```
window.onload = function() {$('#substyle').remove();} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:06:05.663

尝试

```
<div class="expand" style="display: none"> 
```

# c - main() 返回什么？

> ID：12959866
> 
> 赞同：-9
> 
> 时间：2012-10-18T16:59:22.557
> 
> 标签：c

> **可能重复：**
> [main() 在 C/C++ 中应该返回什么？](https://stackoverflow.com/questions/204476/what-should-main-return-in-c-c)

这个函数返回什么值。只是简单的主要。

```
main()
{
...
} 
```

如果一个函数有两个 main ，会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T17:01:34.200

> 这个函数返回什么值。

`main`需要声明为返回一个`int`. 返回值被传递给调用者，调用者通常是操作系统。

> 5.1.2.2.1[程序启动](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)
> 
> 程序启动时调用的函数名为 main。实现没有声明这个函数的原型。它应定义为返回类型为 int 且不带参数：

```
int main(void) { /* ... */ } 
```

> 或者带有两个参数（这里称为 argc 和 argv，尽管可以使用任何名称，因为它们是声明它们的函数的局部变量）：

```
int main(int argc, char *argv[]) { /* ... */ } 
```

* * *

> 如果一个函数有两个 main ，会发生什么？

链接器报告错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:03:05.930

在 C99/C11 中，如果在托管环境中达到，则`main`返回。否则，返回值未定义。`0``}`

> **C11, § 5.1.2.2.2 程序执行**
> 
> [...] 到达`}`终止`main`函数的返回值 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T19:39:40.110

假设您使用的是 C89 或更早版本的编译器，那么

```
main()
{
  ...
} 
```

返回`int`。如果您使用的是 C99 或更高版本的编译器，则会出现错误。

从 C99 开始，如果在没有显式返回的情况下到达结尾`}`，`main`则返回值为 0。不确定 C89 或更早版本。

不确定“一个功能有两个电源”应该是什么意思。如果一个*程序*定义了两个`main`函数，那么您很可能会在链接时遇到重复定义错误。

# sql-server - 如何使用 Web 服务设置 Microsoft Word 以使用 SQL Server 数据库中的数据填充某些字段？

> ID：12959867
> 
> 赞同：2
> 
> 时间：2012-10-18T16:59:24.717
> 
> 标签：sql-server, web-services, templates, ms-word, openoffice-writer

我想使用 SQL Server 数据库填写 Microsoft Word 文档，最好不要在服务器端进行文档处理。

根据我的阅读，微软不推荐服务器端文字处理，因为它的设计不是可扩展的，UI 会出现并且没有人可以点击它，以及许可问题。

因此，我会对客户端可以键入 Word 文档，然后输入类似内容`Name: <!name>`，然后通过 Web 服务以某种方式连接以接收记录集或将使用数据库中的信息填充所有标签的方式感兴趣。 .

我该怎么做呢？如果这不可能，客户有什么办法可以设计他们想要使用的表格，并让我们的程序填写模板字段？

**Word 做不到，Open Office 可以吗？**

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-24T12:12:44.370

对于 OpenOffice，这至少与 Microsoft Office 一样难。除非您在 OpenOffice 开发方面比在 Microsoft Office 方面更有经验。我发现收集有关 OpenOffice 定制开发的技术文档非常困难，而微软尽最大努力吸引开发人员。

如果您想使用来自 SQL Server 的数据或例如使用 Microsoft Office 在 PC 上的 Teradata 预先填充 Word 文档，我可以向您推荐[Invantive Composition 用于从数据库中填充 Word 文档](http://www.invantive.com/products/invantive-composition "从数据库工具填充模板 Word")（请注意，我已经参与其中产品）。您可以使用 C# 进一步扩展它，但开箱即用的它已经能够通过 Web 服务连接到各种数据库平台。我认为它也可以直接连接到 SQL 数据库，但这需要维护本地数据库驱动程序。

请注意，Invantive Composition 最初是针对非开发者的；高中或大学的财务或法律员工必须能够为其他大学创建模板。当然，IT 和安全部门仍然需要确保只提供在需要知道的基础上应该可用的数据。这可以在中央 Web 服务上完成，也可以使用单独的数据库或单独的数据库视图来完成。

# ruby-on-rails - RoR，从模块中调用列名

> ID：12959873
> 
> 赞同：1
> 
> 时间：2012-10-18T16:59:33.663
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用 Ruby on Rails。我有一个名为 PatientFactory 的模块，它将包含在 Patient 模型中。

我需要从此模块访问患者的 ID。

```
module PatientFactory

  def self.included(base)

    # need to access instance variable here
    ...

  end
end 
```

但更重要的是，我需要在 self.included(base) 中使用它，我可以在此方法之外轻松访问它，但如何在内部访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:04:42.497

鉴于您想这样做：

```
class Patient < ActiveRecord::Base
  include PatientFactory
end 
```

然后你会像这样访问 id：

```
module PatientFactory
  def get_patient_id
    self.id 
  end
end

a = Patient.new
a.id #=> nil
a.save
a.id #=> Integer 
```

当您的模块被包含在一个类中时，它的所有方法都将成为该类的实例方法。如果您更愿意扩展它们，它们会被插入到您的类的单例类中，因此它们可以像类方法一样被访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:02:22.250

```
class Patient < ActiveRecord::Base
  include PatientFactory
end 
```

然后您可以访问该实例，就好像它们是 Patient 方法的一部分一样。

如果您仍然需要保留您提到的工作流程，Yehuda 可能会提供一些帮助；

[http://yehudakatz.com/2009/11/12/better-ruby-idioms/](http://yehudakatz.com/2009/11/12/better-ruby-idioms/)

# unix - 如何获取连接到一台基于 Unix 系统的计算机的多个键盘的 ID？

> ID：12959878
> 
> 赞同：0
> 
> 时间：2012-10-18T16:59:58.650
> 
> 标签：unix, keyboard

我想在 Unix 机器上编写多键盘/鼠标应用程序，可能在 Mac 上。如何区分键盘按键输入流与不同键盘？

# delphi - 如何检测应用程序外部的拖放？

> ID：12959880
> 
> 赞同：7
> 
> 时间：2012-10-18T17:00:05.463
> 
> 标签：delphi, drag-and-drop, delphi-xe2

我正在尝试模拟 Chrome 的标签拖动功能。我希望用户能够将选项卡拖动到选项卡条中的新位置或将其拖放到应用程序外部以创建新窗口。在应用程序中拖动很容易，但我如何检测用户何时在我的应用程序之外的某个地方掉线？

本质上，我希望实现“撕下”标签。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T22:49:51.873

由于鼠标在拖动操作期间被捕获，因此在处理程序中检测拖动操作何时完成没有问题`OnEndDrag`，即使它在应用程序的任何形式之外。您可以通过测试“目标”对象来判断放置是否被接受，如果放置不被接受，您可以通过测试鼠标位置来判断它是否在应用程序之外。

但是，这种方法仍然存在问题。您无法通过按“Esc”键来判断拖动是否被取消。还有一个问题是无法在表单外将拖动光标设置为“接受”，因为`OnDragOver`那里不会调用任何控件。

您可以通过使用您创建的拖动对象更改拖动操作的行为来克服这些问题。下面是一个例子：

```
unit Unit1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ComCtrls;

type
  TForm1 = class(TForm)
    PageControl1: TPageControl;
    TabSheet1: TTabSheet;
    TabSheet2: TTabSheet;
    TabSheet3: TTabSheet;
    procedure FormCreate(Sender: TObject);
    procedure PageControl1MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure PageControl1StartDrag(Sender: TObject;
      var DragObject: TDragObject);
    procedure PageControl1EndDrag(Sender, Target: TObject; X, Y: Integer);
    procedure PageControl1DragOver(Sender, Source: TObject; X, Y: Integer;
      State: TDragState; var Accept: Boolean);
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.FormCreate(Sender: TObject);
begin
  PageControl1.DragMode := dmManual;
end;

type
  TDragFloatSheet = class(TDragControlObjectEx)
  private
    class var
      FDragSheet: TTabSheet;
      FDragPos: TPoint;
      FCancelled: Boolean;
  protected
    procedure WndProc(var Msg: TMessage); override;
  end;

procedure TDragFloatSheet.WndProc(var Msg: TMessage);
begin
  if (Msg.Msg = CN_KEYDOWN) and (Msg.WParam = VK_ESCAPE) then
    FCancelled := True;
  FDragPos := DragPos;
  inherited;
  if (Msg.Msg = WM_MOUSEMOVE) and
      (not Assigned(FindVCLWindow(SmallPointToPoint(TWMMouse(Msg).Pos)))) then
    Winapi.Windows.SetCursor(Screen.Cursors[GetDragCursor(True, 0, 0)]);
end;

//-------------------

procedure TForm1.PageControl1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
  TDragFloatSheet.FDragSheet :=
      (Sender as TPageControl).Pages[TPageControl(Sender).IndexOfTabAt(X, Y)];
  PageControl1.BeginDrag(False);
end;

procedure TForm1.PageControl1StartDrag(Sender: TObject;
  var DragObject: TDragObject);
begin
  DragObject := TDragFloatSheet.Create(Sender as TPageControl);
end;

procedure TForm1.PageControl1DragOver(Sender, Source: TObject; X, Y: Integer;
  State: TDragState; var Accept: Boolean);
var
  TargetSheet: TTabSheet;
begin
  TargetSheet :=
      (Sender as TPageControl).Pages[TPageControl(Sender).IndexOfTabAt(X, Y)];
  Accept := Assigned(TargetSheet) and (TargetSheet <> TDragFloatSheet.FDragSheet);
end;

procedure TForm1.PageControl1EndDrag(Sender, Target: TObject; X, Y: Integer);
begin
  if Assigned(Target) then begin

    // normal processing, f.i. find the target tab as in OnDragOver
    // and switch positions with TDragFloatSheet.FDragSheet

  end else begin
    if not TDragFloatSheet.FCancelled then begin
      if not Assigned(FindVCLWindow(TDragFloatSheet.FDragPos)) then begin

        // drop TDragFloatSheet.FDragSheet at TDragFloatSheet.FDragPos

      end;
    end;
  end;
end;

end. 
```

# yii - Yii 框架：如何获取 num_rows？

> ID：12959881
> 
> 赞同：5
> 
> 时间：2012-10-18T17:00:05.407
> 
> 标签：yii

由于[官方文档](http://www.yiiframework.com/doc/guide/1.1/en/database.dao)没有说明如何使用他们的系统简单地执行“num_rows”，因此我需要一些帮助：如何获取结果集中的行数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-18T17:22:57.503

假设：

```
$connection=Yii::app()->db;
$command=$connection->createCommand($sql); 
```

这将适用于插入、更新和删除：

```
$rowCount=$command->execute(); 
```

execute()：执行非查询 SQL 语句，如 INSERT、UPDATE 和 DELETE。如果成功，则返回受执行影响的行数。

对于选择，您可以执行以下操作：

```
$dataReader=$command->query(); 
```

这会生成 CDbDataReader 实例，并且 CDbDataReader 提供 rowCount 属性

[http://www.yiiframework.com/doc/api/1.1/CDbDataReader#rowCount-detail](http://www.yiiframework.com/doc/api/1.1/CDbDataReader#rowCount-detail)

```
$rowCount = $dataReader->rowCount; 
```

关于rowCount => 返回结果集中的行数。请注意，大多数 DBMS 可能不会给出有意义的计数。在这种情况下，使用“SELECT COUNT(*) FROM tableName”来获取行数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-04T07:06:30.003

ActiveRecord 有可以使用的[计数方法。](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#count-detail)

```
$cntCriteria = new CDbCriteria();
$cntCriteria->condition = "categoryId = :categoryId";
$cntCriteria->params[':categoryId'] = $categoryRow->categoryId;
$articleCount = Article::model()->count($cntCriteria); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-30T05:27:57.087

还有另一种方法可以做到这一点。当我们执行 sql 查询时，它只会将结果作为数组返回。所以我们可以使用`count()`下面的函数来获取行数。

```
$output=User::model()->findAllBySql("select * from user");//User is a model belongs to the user table
$count_val=count($output);//$count_val has the value of number of rows in the output. 
```

# c# - 递归检查字符串中的所有字母是否都是大写的

> ID：12959883
> 
> 赞同：2
> 
> 时间：2012-10-18T17:00:07.197
> 
> 标签：c#, string, recursion

我必须检查所有字母是否都是递归的大写字母，我不知道为什么这不起作用：

```
public static bool IsCapital(string str)
    {
        if (str.Length == 1)
            return int.Parse(str[0].ToString()) > 65 && int.Parse(str[0].ToString()) < 90;
        return IsCapital(str.Substring(1)) && int.Parse(str[0].ToString()) > 65 && int.Parse(str[0].ToString()) < 90;
    } 
```

它崩溃并说：“未处理的异常：System.FormatException：输入字符串的格式不正确。”

```
Console.WriteLine(IsCapital("abc")); 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:21:09.143

要单独解决异常，请不要解析字符串。您可以直接将 a`char`与任何`ushort`值进行比较。

换句话说，这是一个有效的检查（没有字符串解析）

```
str[0] > 65 
```

[AsciiTable.com](http://www.asciitable.com/)应该向您展示为什么您的检查会在边缘失败。

还要考虑...

*   不是字母的字符。
*   `IsCapital(null)`

最后，可能使这更容易的事情（假设非字母被绕过）是创建一个沿`bool IsNotLowerCase(char c)`.

注意——这些都是假设 ASCII，我的链接很明显。

如果您必须支持完整的 Unicode，希望您可以[使用`char`](http://msdn.microsoft.com/en-US/library/system.char_methods%28v=vs.110%29.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:05:48.037

> **我必须检查所有字母是否都是递归的大写字母**

```
public static bool IsCapital(string str)
{
    if (String.IsNullOrEmpty(str)) return false;
    if (str.Length == 1 &&  char.IsUpper(str[0])) return true;
    return char.IsUpper(str[0]) ? IsCapital(str.Substring(1)) :false;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:04:23.703

我假设你想要做的`int.Parse(str[0].ToString())`是获取 ASCII 值。

你需要使用的是这个`(int)str[0]`

解析将尝试将字符串转换为数字，因此值为 '412' 的字符串将被解析为值为 412 的 int。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T17:02:05.643

您正在尝试将 a 解析`char`为`int`，而不是将其转换为`int`.

您正在做的是获取一个字母，例如`A`，并将其解析为一个 int。A 无论如何都不是数字，因此解析失败。

您要做的是将 char 显式转换为 int 以获得您正在寻找的 ASCII 值：

```
if (str.Length == 1)
{
    return ((int)str[0]) > 65 
        && ((int)str[0]) < 90;
}
return IsCapital(str.Substring(1)) 
    && ((int)str[0]) > 65 
    && ((int)str[0]) < 90; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T17:12:59.020

我认为，这个数字比较是行不通的。

首先，即使所有字母都是大写字母，它也会为像“ABC123”这样的字符串返回 false。其次，有许多国家字符不在 65..90 范围内，即使它们是大写字母。您应该（如果可以）使用一些 Char 方法 [http://msdn.microsoft.com/en-us/library/d1x97616.aspx](http://msdn.microsoft.com/en-us/library/d1x97616.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-22T14:46:32.840

虽然有很多方法可以给这只猫换皮，但我更喜欢将这些代码包装到可重用的扩展方法中，这样以后做起来就很简单了。使用扩展方法时，您还可以避免使用 RegEx，因为它比直接字符检查要慢。我喜欢使用 Extensions.cs NuGet 包中的扩展。它使这项检查变得如此简单：

1.  将 [https://www.nuget.org/packages/Extensions.cs][1] 包添加到您的项目中。
2.  将“ `using Extensions;`”添加到代码的顶部。
3.  `"smith".IsUpper()`将返回 False 而`"SMITH".IsUpper()`将返回 True。4\. 其余代码中的所有其他检查都是简单的`MyString.IsUpper()`。

您的示例代码将变得如此简单：

```
using Extensions;

//Console.WriteLine(IsCapital("abc"));
Console.WriteLine("abc".IsUpper()); 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-10-18T17:04:24.400

```
public static bool IsCapital(string str)
{
 return !Regex.IsMatch(str, "[a..z]");
} 
```

# java - Java 中的 Mustache 类型的字符串替换

> ID：12959886
> 
> 赞同：2
> 
> 时间：2012-10-18T17:00:17.270
> 
> 标签：java, string, velocity, handlebars.js, mustache

我的应用程序允许用户为文本等定义一些模板。例如：快捷方式之一可能是`hi {{name}}, nice to meet you`.

我有一个复杂的 json，它有名字和很多内部 json。我在java中寻找一种很好的胡子类型的实现，它可以将json的值替换为字符串。目前我正在遍历每个键并替换字符串，但我正在寻找更优雅的解决方案，它为用户提供更多的模板，如循环、条件等，类似于胡须/车把。

虽然用于 java 的 mustache 看起来不错，但我还没有看到任何可以用 JSON 替换的实现。所有示例都适用于对象，但不适用于 json 对象。在我看来，在内部，它使用对象映射器将对象转换为对象，并以某种方式应用它。

也许我可以将 JSON 转换为地图并提供它。

可能我错过了一些东西。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:18:35.833

您必须将 JSON 字符串转换为 Java 对象。您可以使用嵌套的 Map、Multimap 或创建自己的对象来表示结构。

您可能想使用 JSON 序列化器从 JSON 字符串创建 java 对象。好的解决方案是[Jackson](http://jackson.codehaus.org/)、[Gson](http://code.google.com/p/google-gson/)或[Json-simple](http://code.google.com/p/json-simple/)。

一旦您有了正确的 JSON 的 Java 表示，您就可以使用模板引擎来进行字符串替换。已知的库是[Freemarker](http://freemarker.sourceforge.net/)、[Velocity](http://velocity.apache.org/)和[StringTemplate](http://www.stringtemplate.org/)

我个人推荐 Jackson+Freemarker，但都是很好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:33:55.557

[Chunk](http://www.x5software.com/chunk/)是一个对 JSON 非常友好的模板引擎。循环和条件，标签语法类似于 Mustache，您可以直接从模板中相当优雅地引用嵌套的关联数据数组。

[请参阅此答案](https://stackoverflow.com/questions/10524352/better-template-language-needed/12755864#12755864)中 JSON + Chunk 的示例代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:23:43.223

试试[Apache Velocity](http://velocity.apache.org/engine/releases/velocity-1.5/user-guide.html#hello_velocity_world)，它对文本中的属性替换做了非常相似的事情。

# jquery - Virtuemart 和 Joomla：未捕获的类型错误：对象 [object Object] 没有方法“iZoom”

> ID：12959889
> 
> 赞同：0
> 
> 时间：2012-10-18T17:00:23.970
> 
> 标签：jquery, joomla, virtuemart

我正在使用 Joomla 2.5 和 Virtuemart 2.0.12。

现在，我在我的普通 Joomla 模板之上安装了一个 meadowmart 模板。

现在，出现以下错误：

在 Virtuemart 中打开产品详细信息页面时，产品的缩略图和缩放都不起作用。此外，将产品添加到购物车的按钮不起作用。

这是错误：

> 未捕获的类型错误：对象 [object Object] 没有方法“iZoom”

这是 .js 文件中的代码：

```
// Lets Load The Lens Effect ;-)
bigImage.iZoom({
    borderColor: '#e1e0e0', // set the loupe border color
    borderWidth: '3px', // set the loupe border width
         diameter: '170'
}); 
```

我将如何解决这个问题？我在 Joomla 中完全没有安装其他组件或模块。

先感谢您。

约里特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T16:19:55.140

您的解决方案可能是 javascript 冲突。

几天前，我遇到了与 Joomla 类似的问题！2.5模板（jat3模板 - JA Portfolio更具体）和我自己编写的滑块模块。首先，我认为问题是由我的模块引起的，但事实并非如此。

我的错误与您的类似：

```
Uncaught TypeError: Object [object Object] has no method 'getElements' 
```

如您所见，错误几乎相同，只是方法不同，但我认为在这种情况下无关紧要。当 javascrips 冲突出现时会发生此错误，因为程序不知道它应该使用哪个库或者它被 joomla 覆盖（$ 符号的引用） - 但它取决于。

我必须承认我从未使用过 Virtuemart，也不知道模板使用中包含了哪种 javascript，但我确信您的解决方案是专注于：

```
jQuery.noConflict(); 
```

..只要包含 jQuery 库。

我用这几行解决了我的问题到`.php`我模块的主文件中：

```
if($loadJquery) $document->addScript(ModSlideshowHelper::getJqueryFile($jqueryFile));
if($jqueryNoConflict) $document->addScript(ModSlideshowHelper::getJqueryNoConflictFile()); 
```

正如您注意到的第一行添加 jQuery 脚本，第二行包括静态函数。加载第二个函数的文件只包含一行`jQuery.noConflict();`

```
public static function getJqueryNoConflictFile()
{
    return 'modules'.DS.'mod_slideshow'.DS.'js'.DS.'jquery-no-conflict.js';
} 
```

希望这个例子有帮助

# html - 导航菜单：css垂直居中

> ID：12959891
> 
> 赞同：0
> 
> 时间：2012-10-18T17:00:38.197
> 
> 标签：html, css

我正在尝试创建一个均匀分布的导航菜单，无论菜单项是 1 行还是 2 行文本。我使用 1 行文本进行此操作，但如果某个项目超过一行，则文本的垂直间距会关闭。

到目前为止，我的代码如下。任何帮助都是极好的。提前致谢。

jsfiddle：http: [//jsfiddle.net/wnfUC/](http://jsfiddle.net/wnfUC/)

***风格：***

```
 #pageNavigation {
        background-image: url('../Images/TIBC_Base/nav-bg.png');
        background-repeat: repeat-y;
        margin:5px 0;
        padding:5px 15px 5px;
        min-height:125px;
}
    #pageNavigation_bottom
    {
        clear:both;
        background-image: url('../Images/TIBC_Base/nav-bg_bottom.png');
        background-repeat: no-repeat;
        margin:-5px 0 0 -1px;
        min-height:8px;
    }
    #pageNavigation .navContent{ width:240px; margin:0 -10px; }
    #pageNavigation ul { list-style-type: none; margin:0; padding:0; }
    #pageNavigation ul li { display: block; height:57px; border-top:0px #E1E1E1 solid; border-bottom:1px #E1E1E1 solid; text-align:center; overflow:hidden; }
    #pageNavigation a  {
        color:#485963;
        font-size:16px;
        text-decoration:none;
        text-shadow: 0px -1px #EEEEEE;
        display:block;
        height:57px;    
    }
    #pageNavigation a:hover
    {
        background: #FAE2AD;
        color: #485963;
    }
    #pageNavigation a.NavigationSelected
    {
        color:#F9F9F9;
        background: #A5B5BE;
        text-shadow: 1px 1px #485963;
        font-weight: normal;
    } 
```

***HTML***

```
 <div id="pageNavigation">
<ul class="navContent">
<li><a href="/Services">Services</a></li>
<li><a href="/Services/Analysis">Analysis</a></li>
<li><a href="/Services/Strategic-Planning">Strategic Planning</a></li>
<li><a href="/Services/International-Market-and-Competitor-Research">International Market and Competitor Research</a></li>
<li><a href="/Services/Budgeting-and-Forecasting">Budgeting and Forecasting</a></li>
<li><a href="/Services/International-Cultural-Liaison" class="NavigationSelected">International Cultural Liaison</a></li>
</ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:15:45.220

您可以使用 CSS 表格布局（不是 HTML 表格元素，嗯！）来实现这一点：http: [//jsfiddle.net/PhilippeVay/ZszJm/](http://jsfiddle.net/PhilippeVay/ZszJm/)

`ul`使用与表格相同的算法显示，链接使用与单元格相同的算法，此处`li`显示为行，因为它是垂直的。`vertical-align`然后你可以随心所欲地玩:)（在你的情况下`middle`）
你可以添加`table-layout: fixed`，`ul`然后浏览器将使用*另*一种算法来显示表格，这种算法不会尝试调整单元格的宽度和高度以适应他们的内容，但会坚持 CSS 规则所说的内容。

兼容性：IE8及以上。它不会以 IE7 和 6 为中心，没什么大不了的。

编辑：使用这种方法，您无需提前知道哪些项目比其他项目长。浏览器会想到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:08:19.980

文本的垂直对齐通常使用以下方式完成：http `line-height`: [//jsfiddle.net/Shmiddty/wnfUC/1/](http://jsfiddle.net/Shmiddty/wnfUC/1/)

```
#pageNavigation a  {
    ...
    height:57px;  
    line-height:57px;        
}
#pageNavigation a.two-line{
    line-height:20px;
    padding-top:10px;    
} 
```

请注意，我将类添加`two-line`到跨越两行的锚元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:16:51.310

您可以使用此方法： [http ://css-tricks.com/vertically-center-multi-lined-text/](http://css-tricks.com/vertically-center-multi-lined-text/)

您还可以使用其他一些方法，但它们需要额外的 HTML 标记，而这个不需要。

# java - NoClassDefFoundError：Urban Airship for Android Push

> ID：12959899
> 
> 赞同：1
> 
> 时间：2012-10-18T17:00:51.753
> 
> 标签：java, android, urbanairship.com

几天来，我一直在尝试建立 Urban Airship，这真的让我很紧张。由于他们的指示不清楚，我不得不按照[这个](http://blog.jamesbaca.net/?p=235)来完成。但是，我目前正在收到此错误日志并尝试查看是否可以找到一些帮助。请任何建议将不胜感激！谢谢！

```
10-18 12:41:10.585: E/AndroidRuntime(11870): FATAL EXCEPTION: main
10-18 12:41:10.585: E/AndroidRuntime(11870): java.lang.NoClassDefFoundError: com.urbanairship.UAirship
10-18 12:41:10.585: E/AndroidRuntime(11870):    at com.app.android.NotifyMeApplication.onCreate(NotifyMeApplication.java:15)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.app.Instrumentation.callApplicationOnCreate(Instrumentation.java:973)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.app.ActivityThread.handleBindApplication(ActivityThread.java:3971)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.app.ActivityThread.access$1300(ActivityThread.java:128)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1199)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.os.Looper.loop(Looper.java:137)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at android.app.ActivityThread.main(ActivityThread.java:4517)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at java.lang.reflect.Method.invoke(Method.java:511)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
10-18 12:41:10.585: E/AndroidRuntime(11870):    at dalvik.system.NativeStart.main(Native Method) 
```

我找到了类似的[问题](https://stackoverflow.com/questions/10672263/java-lang-noclassdeffounderror-com-urbanairship-uairship)和答案，

- 从构建路径中删除所有 Android 库项目和外部 jar。

- 在您的项目中创建一个名为“libs”的文件夹。

- 将所有外部 .jar 文件放在该文件夹中，ADT 现在应该将它们放在“Android 依赖项”下。

- 以正常方式重新导入所有以前的 Android 库项目。

但这对我不起作用。

这是清单文件，如果我删除应用程序名称，应用程序运行良好。但我需要它才能启用推送通知..

AndroidManifest.xml

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" 
        android:name="com.app.android.NotifyMeApplication"
        android:debuggable="true"
        android:allowClearUserData="true"
        android:enabled="true" > 
```

NotifyMeApplication.java

```
package com.app.android;

import com.urbanairship.Logger;
import com.urbanairship.UAirship;
import com.urbanairship.push.PushManager;
import com.urbanairship.push.PushPreferences;

import android.app.Application;

public class NotifyMeApplication extends Application{

    @Override
    public void onCreate() {
        super.onCreate();
                UAirship.takeOff(this); // always needs to be called when starting an application

                // even though we call takeoff push notifications are disabled by default
                // you have to explicitly turn them on like so
                PushManager.enablePush();

                // let the push manager know about our intent receiver
                PushManager.shared().setIntentReceiver(IntentReceiver.class); 
                // name must match broadcast receiver from step 7

                // set some preferences for sounds and vibration
                PushPreferences prefs = PushManager.shared().getPreferences();
                prefs.setSoundEnabled(true);
                prefs.setVibrateEnabled(true);

                // apid is a unique identifier for a particular device
                String lPushId = prefs.getPushId();
                Logger.info("My Application onCreate - App APID: " + lPushId);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:38:38.100

如果您`NoClassDefFoundError`在运行时获得，那么我怀疑您没有将它们包括在运行时工作。您必须像这样检查每个 .jar 的复选框：

![在此处输入图像描述](../Images/0768261d28c9ae4c94edaeac086c1f76.png)

# java - 检测变量是否在 XX 秒内未被修改

> ID：12959901
> 
> 赞同：0
> 
> 时间：2012-10-18T17:01:01.767
> 
> 标签：java, variables, timer

嗨，我一直在研究 Java 是否可以检测变量是否已被修改的任何方法，这可能吗？我想使用一个计时器，以便在修改变量时它将重置为零并重新启动。如果变量在 20 秒内未修改（即计时器达到 20 秒），它将执行诸如打印变量之类的操作。

修改是指任何新的赋值，例如`array[2] = 3`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:05:03.250

显然没有内置任何东西，您不想在 Java 中的每个变量旁边隐式存储一些时间戳。您可以做的是将变量包装在某个对象中，封装修改并在每次发生突变时启动计时器。

```
public class ListeningRef<T> {

    private final ScheduledExecutorService timersPool;

    private T value;
    private ScheduledFuture<?> timer;

    public ListeningRef(ScheduledExecutorService timersPool, T value) {
        this.timersPool = timersPool;
        this.value = value;
    }

    public T get() {
        return value;
    }

    public void set(final T value) {
        this.value = value;
        scheduleTimer();
    }

    private void scheduleTimer() {
        if (timer != null) {
            timer.cancel(true);
        }
        timer = timersPool.schedule(new Runnable() {
            @Override
            public void run() {
                System.out.println("Not modified in 20 seconds: " + ListeningRef.this.value);
            }
        }, 20, TimeUnit.SECONDS);
    }
} 
```

这是你如何使用它：

```
final ScheduledExecutorService pool = Executors.newScheduledThreadPool(10);
final ListeningRef<String> listeningRef = new ListeningRef<String>(pool, "Hi!");
TimeUnit.SECONDS.sleep(19);
System.out.println(listeningRef.get());
listeningRef.set("Bye!");
TimeUnit.SECONDS.sleep(21); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:07:09.210

首先，您需要将字段包装在 get 和 set 方法中，并使其`private`. 然后，您需要制作一个随每次`set`调用更新的时间戳：

```
public void setArray(int index, int value) {
    array[index] = value;
    lastModifiedTime = System.currentTimeMillis();
} 
```

然后，您需要`lastModifiedTime`在单独的线程中进行监视并触发事件 if `System.currentTimeMillis() - lastModifiedTime > 20000`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:09:40.737

您需要包装属性以创建定时重置。您可以基于[PropertyChangeSupport](http://docs.oracle.com/javase/7/docs/api/java/beans/PropertyChangeSupport.html)实现。

# php - phpmyadmin数据库表中的月份自动增加

> ID：12959902
> 
> 赞同：0
> 
> 时间：2012-10-18T17:01:08.030
> 
> 标签：php, html

有没有办法每个月增加一个名为month的表字段..或者我应该说最近一个月...只需要更新月份值..即在，它应该是1

3 月 3 日

7 月 7 日

等等

帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:06:27.550

最接近您无需手动插入每条新记录的[**idate**（'m'）](http://www.php.net/manual/en/function.idate.php)，也无需使用花哨的mysql......是使用mysql默认的TIMESTAMP字段。看一下这个：

[http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html](http://dev.mysql.com/doc/refman/5.0/en/timestamp-initialization.html)

但这是一个日期，因此您需要使用**MONTH( `Field`)**来获取月份。

# java - NotSerializableException 保存自定义类

> ID：12959904
> 
> 赞同：3
> 
> 时间：2012-10-18T17:01:10.350
> 
> 标签：java, serialization, notserializableexception

我的两个类被设计成创建一个 StudentData 对象数组（姓名、出生日期和 ID），其中包括一个 toString 覆盖以打印出所有变量。然后它序列化该数组并将其保存到一个名为 studentdata.txt 的文件中。然后它应该从文件中读取数组并从该数据中重建一个新的数组对象，并将数组中的每个项目打印到控制台。

尝试遵守时出现此错误...

```
Exception in thread "main" java.io.NotSerializableException: Student
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeArray(Unknown Source)
    at java.io.ObjectOutputStream.writeObject0(Unknown Source)
    at java.io.ObjectOutputStream.writeObject(Unknown Source)
    at StudentData.main(StudentData.java:38) 
```

也不确定如何正确循环遍历我的数组并调用我的 toString 方法以打印到控制台，我是否应该假设我应该为每个循环使用一个？像这样？

```
 //for (Student s : ???) {
                  //System.out.println(How do I call toString from here?); 
```

我的课程

```
import java.io.*;         //importing input-output files
    class Student
    {

   String name;                     //declaration of variables
 String DOB;
   int id;

   Student(String naam,int idno, String dob)          //Initialising variables to user data
   { 
          name=naam;
          id=idno;
          DOB=dob;

    }

   public String toString() {
       return name+"\t"+id+"\t"+DOB+"\t";
}

} 
```

2号

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

class StudentData                     //main class
{
  public static void main(String args[]) throws IOException                  //exception handling
  {
         System.out.println("Enter the numbers of students:");
         BufferedReader in=new BufferedReader(new InputStreamReader(System.in));
         int n=Integer.parseInt(in.readLine());

         Student[]  S=new Student[n];                      // array of objects declared and defined
         for (int i = 0; i < S.length; i++)       {

               System.out.println("Enter the Details of Student no: "+(i+1));             //reading data form the user
               System.out.println("Name: ");
               String naam=in.readLine();
               System.out.println("ID no: ");
               int idno=Integer.parseInt(in.readLine());
               System.out.println("DOB: ");               
               String dob=(in.readLine());

              S[i]=new Student(naam,idno,dob);                          

              File studentFile = new File("StudentData.txt");
              try {
              FileOutputStream fileOutput = new FileOutputStream(studentFile);
              ObjectOutputStream objectOutput = new ObjectOutputStream(fileOutput);
              objectOutput.writeObject(S);

              S = null;

              FileInputStream fileInput = new FileInputStream(studentFile);
              ObjectInputStream objectInputStream = new ObjectInputStream(fileInput);

                S = (Student[]) objectInputStream.readObject();
            } catch (ClassNotFoundException e) {

                e.printStackTrace();
            }

              //for (Student s : ???) {
                  //System.out.println();
              }

         }

     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:06:52.313

要摆脱`NotSerializableException: Student`异常，只需让您的`Student`类实现[`Serializable`](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)接口即可。（请注意，这是一个标记接口，因此您不必实现任何方法。）

```
class Student implements Serializable {
} 
```

* * *

要遍历对象数组`S`，请`Student`尝试以下操作：

```
for (Student st : S) {
    System.out.println(st);
} 
```

不过，我会为数组选择一个更具描述性的名称（`students`会更好）。如果将数组声明为

```
Student[]  students = new Student[n]; 
```

那么你的 for 循环可以更具可读性。

```
for (Student student : students) {
    System.out.println(student);
} 
```

请注意，您不必显式调用`toString`type 对象的方法`Student`。当你使用一个对象作为一个需要`String`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T17:02:17.427

你的类`Student`应该实现[`Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)接口来创建它的实例`serializable`。

编辑你的`Student`类声明： -

```
class Student implements java.io.Serializable {
} 
```

请参阅此链接：- [http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serial-arch.html](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serial-arch.html) 它详细讨论了`Serialization`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:04:32.083

实现您的 Student 类 java.io.Serializable 接口。

# c++ - 如何计算 C++ 中字符串中出现的空格

> ID：12959907
> 
> 赞同：0
> 
> 时间：2012-10-18T17:01:14.333
> 
> 标签：c++, string, file-io

我有一个用于我的高级 c++ 类的项目，它应该做很多事情，但我试图首先关注这个功能，因为在它工作之后我可以调整它以满足其他需求。此函数搜索文件并通过计算 ' ' 在文档中出现的次数来执行字数统计。也许不准确，但这将是一个很好的起点。这是我现在拥有的代码：

```
void WordCount()
    {
        int count_W = 0; //Varaible to store word count, will be written to label
        int i, c = 0; //i for iterator
        ifstream fPath("F:\Project_1_Text.txt");
        FileStream input( "F:\Project_1_Text.txt", FileMode::Open, FileAccess::Read );

        StreamReader fileReader( %input );
        String ^ line;
        //char ws = ' ';
        array<Char>^ temp;

        input.Seek( 0, SeekOrigin::Begin );

        while ( ( line = fileReader.ReadLine() ) != nullptr )
            {
                Console::WriteLine( line );
                c = line->Length;
                //temp = line->ToCharArray();

                for ( i = 0; i <= c; i++)
                {
                    if ( line[i] == ' '  )
                            count_W++;
                }

                //line->ToString();
            }

        //Code to write to label
        lblWordCount->Text = count_W.ToString();
    } 
```

除了一个问题外，所有这些都有效。当我尝试运行程序并打开文件时，我收到一个错误，告诉我索引超出范围。现在，我知道这意味着什么，但我不明白问题是如何发生的。而且，如果我不知道是什么导致了问题，我就无法解决它。我已经读过可以使用 for 循环搜索字符串，当然这也适用于 char 数组，并且其中有代码可以执行该转换，但在这两种情况下我都会遇到相同的错误. 我知道它正在正确读取文件，因为最终程序还必须执行字符计数（这是有效的），并且它从头到尾完美地读回了目标文档中每一行的大小。反正我没办法，所以我想我会请教更高的权力。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:14:58.077

计算空格很简单：

```
int spaces = std::count_if(s.begin(), s.end(),
                           [](unsigned char c){ return std::isspace(c); }); 
```

不过有两个注意事项：

1.  `std::isspace()`不能立即使用，`char`因为`char`可能会被签名并`std::isspace()`接受`int`需要为正的。
2.  这计算空格的数量，而不是单词的数量（或单词 - 1）：单词可以由包含多个连续空格的空格序列分隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:04:45.950

这可能是你的循环。你要从 i=0 到 i=c，但 i=c 太远了。你应该去 i=c-1:

```
for ( i=0; i<c; i++) 
```

# date - 如何在 jqGrid 中对“几天前”格式的日期进行排序？

> ID：12959908
> 
> 赞同：3
> 
> 时间：2012-10-18T17:01:14.543
> 
> 标签：date, sorting, jqgrid, format, days

如何在 jqGrid 中对“几天前”格式的日期进行排序？当我当前对网格进行排序时，它无法区分“11 小时前”和“1 天前”。因此，“1 天前”排在顶部，而不是“11 小时前”。

**请参考这张网格图。

![在此处输入图像描述](../Images/bef31337b8e4437956e2580fc84dca5f.png)

我的 jqGrid 有以下代码。**推荐**数据是 JSON。**发布**栏是日期。

```
$("#tblRecommendationList").jqGrid({
    data: recommendationData,
    datatype: 'local',
    colModel: [
        { name: 'Title', label: 'Title', width: 210, resizable: true },
        { name: 'Channel', label: 'Content Type', width: 120, resizable: true },
        { name: 'StatusNumber', label: 'Status', width: 120, resizable: true,
            formatter: GetStatusCode },
        { name: 'Posted', label: 'Posted', width: 120, resizable: true },
        { name: 'RecordId', label: 'RecordId', hidden: true }
    ],
    loadtext: 'Loading...',
    loadui: 'block',
    emptyDataText: "No Recommendations to display",
    shrinkToFit: true, 
```

日期以下列方式传递。

```
 ...
        returnList =
            (
                from i in responseList
                select new InQuiraRecommendation
                {
                    StatusNumber = i.statusnumber,
                    Title = i.title,
                    Text = i.text,
                    Posted = GetDaysAgo(i.dateadded),
                    CaseNumber = i.casenumber,
                    Priority = i.priority,
                    Channel = i.channel,
                    RecordId = i.recordid,

                }
            ).ToList();
    }
    return returnList;
} 
```

**GetDaysAgo( ) 将“2012-09-13 07:00:00 Etc/GMT”日期格式更改为“几天前”格式。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:20:58.643

我会将“添加日期”添加到您的 InQuiraRecommendation 类中，并将其作为隐藏字段包含在您的网格中，然后将其用作您的排序列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T18:33:38.320

问题从使用`datatype: 'local'`服务器上准备的数据开始。如果您使用`datatype: 'json'`服务器*将*负责数据的排序，您只需将正确排序的数据返回给 jqGrid。

另一种方法是实现`GetDaysAgo`方法，它将以[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式发布的日期转换为诸如“11 小时前”或“1 天前”之类的文本，*在客户端*作为 JavaScript 代码。因此，您可以使用[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter)（和[unformatter](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:custom_formatter#unformatting)）来显示数据。

另一种选择是为定义*为 function*的列定义自定义`sorttype`属性。例如，该函数可以返回将使用的小时数，*而不是*文本“11 小时前”或“1 天前”，用于按列排序。`'Posted'`

 **[这](https://stackoverflow.com/a/3329852/315935)是自定义排序的第一个参考，[在这里](https://stackoverflow.com/a/5296935/315935)您会找到一些可以帮助您的代码示例。如果要使用可排序字符串创建隐藏列（例如 ISO 8601），则可以简化自定义排序的实现（`sorttype`as 函数的实现）。在`sorttype`函数内部，您可以根据第二个参数访问该行的任何其他数据`sorttype`（有关更多信息，请参见[此处](https://stackoverflow.com/a/8001822/315935)）。通过这种方式，您可以将`'Posted'`（来自隐藏列）的 ISO 8601 表示形式作为`sorttype` 函数的结果返回。**

# c# - 为什么将位图转换为 8bpp 会导致 224 个条目而不是 256 个？

> ID：12959912
> 
> 赞同：1
> 
> 时间：2012-10-18T17:01:34.980
> 
> 标签：c#, bitmap, color-palette, pixelformat

我正在尝试将现有位图转换为具有 256 种颜色的调色板。

在网上研究后，人们建议：

```
Bitmap b1 = new Bitmap(picture);
Bitmap b2 = new Bitmap(b1.Size.Width,
                       b1.Size.Height,
                       System.Drawing.Imaging.PixelFormat.Format8bppIndexed); 
```

当我调试并检查条目数时，它已将 PixelFormat 设置为 256，但调色板仅包含 224 个条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:58:21.877

你用的是什么版本？这段代码使用 Visual Studio 2010 (.NET 4.0) 在调试模式下编译，为我提供了一个包含 256 个条目的调色板。

```
private void button1_Click(object sender, EventArgs e)
{
    var b1 = new Bitmap(BITMAP_NAME);
    var b2 = new Bitmap(b1.Width, b1.Height, PixelFormat.Format8bppIndexed);
    int numColors = b2.Palette.Entries.Length;
    MessageBox.Show(String.Format("Palette contains {0} entries", numColors));
    b2.Dispose();
    b1.Dispose();
} 
```

# php - PHP/Curl/Wordpress 在不刷新页面的情况下发布数据，curl 不起作用

> ID：12959923
> 
> 赞同：3
> 
> 时间：2012-10-18T17:02:27.803
> 
> 标签：php, ajax, wordpress, jquery, curl

我正在为捐赠页面编写代码，并希望在不刷新页面的情况下提交 CC 信息，并使用叠加层显示结果。我使用 jQuery 让叠加层正常工作，并使用 php if 语句，我可以回发到我所在的页面并正确获取 CC 事务的 curl 块的变量。但是我从来没有得到任何结果。如果我允许页面 POST/refresh 它工作正常，但似乎 Wordpress 不允许我从不直接在环境中运行的页面运行 curl。

有什么建议么？

```
jQuery.post('sameurl', jQuery("#donateform").serialize(), function(data) {
  jQuery('#overlay_msg').html(data); 
```

和

```
 $ch = curl_init ();

        curl_setopt ($ch, CURLOPT_URL,$hoststring);
        curl_setopt ($ch, CURLOPT_POST, 1); 
        curl_setopt ($ch, CURLOPT_POSTFIELDS, $xml); # the string we built above
        curl_setopt ($ch, CURLOPT_SSLCERT, $cert);
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYHOST, 0);
        curl_setopt ($ch, CURLOPT_SSL_VERIFYPEER, 0);
        curl_setopt ($ch, CURLOPT_VERBOSE, 1);

        $result = curl_exec ($ch); 
```

我对 $xml 字符串进行了硬编码，并试图让它工作。我是 php/curl/ajax 的新手，但总体上对编码有所了解。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:43:13.303

从我可以看到你的代码没有调用任何 wordpress 函数，所以那里没有依赖关系。听起来 cURL 调用没有成功完成，您需要对此进行调试。确保 php 错误报告已打开并在 php.ini 中设置为 E_All，还将 curl 选项 FAILONERROR 设置为 true，并确保使用 curl 错误函数捕获任何错误。

否则，您可能需要分析 HTTP 标头以查看从服务器接收到的内容。您可能只是获得重定向尝试将 CURLOPT_FOLLOWLOCATION 设置为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T17:55:29.340

好吧，事实证明这是一个目录问题。Wordpress 将您设置为网站根目录，而常规 html 将您的目录设置为相对于文件位置。所以我无法获得我的证书。

# python - pyramid_mailer 主题标题问题

> ID：12959926
> 
> 赞同：4
> 
> 时间：2012-10-18T17:02:49.697
> 
> 标签：python, email, pyramid

当我在 gmail Web 客户端中使用 pyramid_mailer 发送电子邮件时，一切看起来都很好，但在任何桌面客户端中都`subject`包含问号，例如： ![在此处输入图像描述](../Images/05a00eede457789c10082fd9333795d7.png)

如果电子邮件标头的开源代码`subject`如下所示：

```
Subject: =?utf-8?b?W9CS0LXQsS3Qk9CY0KEt0LrQvtC70YzRhtC10LLQsNC90LjQtV0g0JDQvdC+0L3Q?=
 =?utf-8?b?uNC8IDIwMTItMTAtMTggMTc6NTg6MzIg0YHQvtC30LTQsNC7INC30LDQv9C40YHR?=
 =?utf-8?b?jCAjMTM1OSAo0LrQvtC70YzRhtC10LLQsNC90LjQtSk=?= 
```

如您所见，它分为三个部分。尝试执行python代码：

```
import email.header
print email.header.decode_header('=?utf-8?b?W9CS0LXQsS3Qk9CY0KEt0LrQvtC70YzRhtC10LLQsNC90LjQtV0g0JDQvdC+0L3Q?=')[0][0]
print email.header.decode_header('=?utf-8?b?uNC8IDIwMTItMTAtMTggMTc6NTg6MzIg0YHQvtC30LTQsNC7INC30LDQv9C40YHR?=')[0][0]
print email.header.decode_header('=?utf-8?b?jCAjMTM1OSAo0LrQvtC70YzRhtC10LLQsNC90LjQtSk=?=')[0][0] 
```

我们得到以下结果：

```
[Веб-ГИС-кольцевание] Анон
�м 2012-10-18 17:58:32 создал запис
� #1359 (кольцевание) 
```

我怎样才能摆脱这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T23:42:52.473

我刚刚对此[进行了修复](https://github.com/repoze/repoze.sendmail/pull/18)，因此您应该能够在 repoze.sendmail 4.0 或 4.0b2 中获得它，以下一个版本为准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T23:58:30.737

是的..听起来对我来说也是一个错误... python base64.encodestring() 默认将长字符串拆分为多行，我猜这是导致问题的原因。

解决方案是替换已使用主题中的换行符或使用 binascii.b2a_base64 进行编码..

# visual-studio-2010 - Visual Studio 的 Phonegap 安装

> ID：12959927
> 
> 赞同：1
> 
> 时间：2012-10-18T17:02:52.143
> 
> 标签：visual-studio-2010, windows-phone-7, cordova, windows-phone-7.1

> **可能重复：**
> [无法为 Windows Phone7 安装 Apache Cordova](https://stackoverflow.com/questions/12759284/not-able-to-install-apache-cordova-for-windows-phone7)

我正在尝试为 Visual Studio 2010 安装 Phonegap。

我下载了skd并安装了它。从此链接 [Windows Phone SDK](http://docs.phonegap.com/en/2.1.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone)

我在这里下载了phonegap zip [http://phonegap.com/download](http://phonegap.com/download)

下一步是“•将文件 CordovaStarter-xxxzip 复制到文件夹：\My Documents\Visual Studio 2010\Templates\ProjectTemplates\”

我下载并提取的文件是phonegap-phonegap-2.1.0-0-g26d211b.zip。我在该文件夹的所有目录中都找不到任何其他 zip 文件。

我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T19:13:38.210

它说你也应该下载 Cordova。

[http://docs.phonegap.com/en/2.1.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone](http://docs.phonegap.com/en/2.1.0/guide_getting-started_windows-phone_index.md.html#Getting%20Started%20with%20Windows%20Phone)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T11:24:19.157

CordovaStarter-xxxzip 是一个模板，从 phonegap-windows 开始。如果您下载的内容中缺少它，您可以创建它。以下链接将向您展示如何做到这一点。

[在此处查看完整的 stackoverflow 答案](https://stackoverflow.com/a/13043711/1441326)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:46:20.687

我继续阅读并看到我需要执行此步骤来安装该模板。

2.1。构建模板：（注意，此步骤可能不需要。如果 lib\windows-phone 目录已经包含文件 CordovaStarter-xxxzip，则可以跳过此步骤） - 打开文件 lib\windows-phone\templates\standalone\ Windows Phone 的 Visual Studio Express 中的 CordovaSolution.sln - 从文件菜单中，选择“导出模板...” - 选择模板类型“项目模板” - 为导出的模板命名，例如。CordovaStarter-2.1.0 将生成 CordovaStarter-2.1.0.zip - 您可以选择添加描述、图标图像和预览图像。这些是 Visual Studio 中“新建项目”对话框中显示的内容。- - 注意：如果您选择（“自动导入模板...”），则无需按照步骤中的说明复制 .zip 文件2\. - 按“完成”

# haskell - 限制并行计算

> ID：12959930
> 
> 赞同：4
> 
> 时间：2012-10-18T17:02:59.377
> 
> 标签：haskell, parallel-processing

## 问题

我有一个有限的值列表：

```
values :: [A] 
```

...以及对这些值的昂贵但纯粹的功能：

```
expensiveFunction :: A -> Maybe B 
```

如何在每个值上并行运行该函数，并且只返回`n`完成的第一个结果`Just`并停止计算未完成的结果？

```
takeJustsPar :: (NFData b) => Int -> (a -> Maybe b) -> [a] -> [b]
takeJustsPar maxJusts f as = ??? 
```

## 动机

我知道如何使用`Control.Concurrent`.，但我想尝试使用 Haskell 的并行功能。此外，我能找到的（很少的）文献似乎表明，Haskell 的并行特性使得产生并行计算和在众多功能之间调整工作负载变得更便宜。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T18:04:54.847

我尝试了两种解决方案。第一个使用`Par`单子（即`Control.Monad.Par`）：

```
import Control.Monad.Par (Par, NFData)
import Control.Monad.Par.Combinator (parMap)
import Data.Maybe (catMaybes)
import Data.List.Split (chunksOf)

takeJustsPar :: (NFData b) => Int -> Int -> (a -> Maybe b) -> [a] -> Par [b]
takeJustsPar n chunkSize f as = go n (chunksOf chunkSize as) where
    go _ [] = return []
    go 0 _  = return []
    go numNeeded (chunk:chunks) = do
        evaluatedChunk <- parMap f chunk
        let results      = catMaybes evaluatedChunk
            numFound     = length results
            numRemaining = numNeeded - numFound
        fmap (results ++) $ go numRemaining chunks 
```

使用的第二次尝试`Control.Parallel.Strategies`：

```
import Control.Parallel.Strategies
import Data.List.Split (chunksOf)

chunkPar :: (NFData a) => Int -> Int -> [a] -> [a]
chunkPar innerSize outerSize as
  = concat ((chunksOf innerSize as) `using` (parBuffer outerSize rdeepseq)) 
```

后者最终变得更加可组合，因为我可以写：

```
take n $ catMaybes $ chunkPar 1000 10 $ map expensiveFunction xs 
```

...而不是将`take`and`catMaybes`行为融入并行策略。

后一种解决方案也提供了近乎完美的利用。在我测试的令人尴尬的并行问题上，它为 8 个内核提供了 99% 的利用率。我没有测试`Par`monad 的利用率，因为我是借用同事的电脑，不想在我满意的性能时浪费他们的时间`Control.Parallel.Strategies`。

所以答案是使用`Control.Parallel.Strategies`，它提供了更多的可组合行为和出色的多核利用率。

# charts - 微软图表。图例出现在 X 轴上方

> ID：12959931
> 
> 赞同：1
> 
> 时间：2012-10-18T17:02:59.067
> 
> 标签：charts, mschart

我在 C# 中创建了一个 Microsoft Chart 并添加了以下图例：

```
Legend legend = new Legend { 
  Alignment = StringAlignment.Center,
  Docking = Docking.Bottom,
  Enabled = true,
  IsDockedInsideChartArea = false,
  TableStyle = LegendTableStyle.Wide,  
}; 
```

图例的一部分出现在 X 轴的顶部……知道为什么吗？

我该如何解决这个问题？我可以在图例中添加上边距吗？

谢谢你，米格尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T22:14:45.943

在我的代码中，我让 Chart 自己创建图例对象，这是 VB 代码，但也许它对您有用：

```
aChart.Legends.Clear()
aChart.Legends.Add("Default")
aChart.Legends(0).BorderColor = Color.Black
aChart.Legends(0).Docking = Docking.Bottom
aChart.Legends(0).IsDockedInsideChartArea = False
aChart.Legends(0).TableStyle = LegendTableStyle.Wide
aChart.Legends(0).Alignment = StringAlignment.Center 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T18:43:59.853

您需要创建一个图表区域：

```
p_Chart.ChartAreas.Add(new ChartArea(MAIN_CHART_AREA));

then set both your series and you legend to this area:

legend.DockedToChartArea = MAIN_CHART_AREA;

series.ChartArea = MAIN_CHART_AREA; 
```

# javascript - 带有显示完整路径的文本框的文件选择器

> ID：12959932
> 
> 赞同：0
> 
> 时间：2012-10-18T17:02:59.690
> 
> 标签：javascript, html, internet-explorer, firefox, google-chrome

如何显示文本框，以及选择文件图标，然后选择文件时，它将在文本框中显示文件的完整路径（无伪伪路）？

`<input type="file">`似乎只显示没有完整路径的文件名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T13:09:53.533

隐藏完整路径的决定是由于隐私和安全问题。

根据[HTML5 规范的](http://www.w3.org/TR/html5/common-input-element-apis.html#dom-input-value)[*工作草案*](http://www.w3.org/TR/html5/common-input-element-apis.html#dom-input-value)，`value`属性：

> 必须返回字符串`"C:\fakepath\"`，后跟所选文件列表中第一个文件的文件名（如果有），或者如果列表为空，则返回空字符串。

因此，除了使用 Java 或 Flash 小程序之外，可能无法通过 JavaScript 或任何其他方式获取完整路径。（Java 和 Flash 都不是标准的，所以我认为您不会喜欢它）。我会说你最好坚持`<input type="file" />`大多数桌面和移动浏览器支持的标准。

* * *

进一步说明：根据[WHATWG ，返回](http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2009-March/018981.html)*虚假路径*而不只是文件名的原因：

> 最初的计划是只有文件名。不幸的是，事实证明，如果您这样做，某些站点会中断，因为它们期望路径（并且它们期望 Windows 路径，不少于）。这就是 Opera 和 IE8 返回虚假路径的原因——而不是因为 HTML5 要求这样做。事实上，我让 HTML5 这么说是因为他们正在这样做。

# math - 获得两组数字的最小公等和和组合

> ID：12959936
> 
> 赞同：2
> 
> 时间：2012-10-18T17:03:10.007
> 
> 标签：math, combinatorics

我目前正在用 C# 创建一个程序，该程序将寻找两组数字的最小可能相等总和，您可以在其中重复这些数字任意多次。

例如，我有这两组`{ 10, 13, 18 }`和`{ 12, 16, 22 }`. 我能得到的最低金额是**28** :`(10 + 18)`和`(12 + 16)`.

另一个例子是`{5, 7, 9}`和`{1, 2, 3}`。最小可能的总和是**5** : `(5)`and `(1+1+1+1+1)`or `(1+2+2)`or or`(2+3)`等​​等。

关于我可以从哪里开始的任何建议？我实际上每组将使用 6 个数字，这些数字在数百/数千个标记中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:44:36.040

维护两个集合，从您的输入集合初始化，并按递增的数字排序（例如，使用基于树的集合结构）。现在比较两组中的第一个（即最小）元素。您从其集合中删除较小的元素，将相应输入集中的所有元素添加到该值，然后插入结果。当两个集合具有相同的最小元素时，您就完成了，并且该元素是您的最不常见的相等总和。

# django - 用于 urldecode 的 django 自定义过滤器，超出了最大递归深度

> ID：12959941
> 
> 赞同：0
> 
> 时间：2012-10-18T17:03:27.723
> 
> 标签：django, urldecode

我想编写一个 urldecode 模板过滤器，并且我的应用程序下有一个模板标签文件夹，其中包含以下代码：

```
from django import template
from urllib import unquote

register = template.Library()

@register.filter
def unquote(value):
    return unquote(value)

class SetVarNode(template.Node):

    def __init__(self, var_name, var_value):
        self.var_name = var_name
        self.var_value = var_value

    def render(self, context):
        try:
            value = template.Variable(self.var_value).resolve(context)
        except template.VariableDoesNotExist:
            value = ""
        context[self.var_name] = value
        return u""

@register.tag(name='set')
def set_var(parser, token):
    """
        {% set <var_name>  = <var_value> %}
    """
    parts = token.split_contents()
    if len(parts) < 4:
        raise template.TemplateSyntaxError("'set' tag must be of the form:  {% set <var_name>  = <var_value> %}")
    return SetVarNode(parts[1], parts[3]) 
```

然后我在我的模板中调用我的注册过滤器，如下所示：

> kmz.file|取消引用

任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:08:55.080

这是因为您导入 unquote 然后重新定义它。

改用这个：

```
from urllib import unquote as unquote_old

@register.filter
def unquote(value):
    return unquote_old(value) 
```

或者

```
from urllib import unquote

@register.filter
def unquote_new(value):
    return unquote(value) 
```

# ios - 从 grails 控制器流式传输 mp4 在 iPhone 上不起作用

> ID：12959942
> 
> 赞同：2
> 
> 时间：2012-10-18T17:03:28.680
> 
> 标签：ios, grails, video-streaming

我正在尝试将 mp4 文件从 Grails 控制器流式传输到 iOS 设备（iPhone 和 iPad）：

```
def streamContent() {
    def contentPath = "/path/to/file"
    File f = new File(contentPath)
    if(f.exists()) {
        response.setContentType("video/mp4")
        response.outputStream << f.newInputStream()
        response.outputStream.flush()
        response.outputStream.close()
    } else {
        render status: 404
    }
} 
```

此代码在 safari 等桌面浏览器上运行良好（我看到了视频），但是当我使用 iPhone 或 iPad 访问同一页面时，视频将无法播放。请注意，如果我将相同的视频放在 Apache httpd 上并从 iOS 设备请求它，则没有问题。所以它一定是一个流媒体问题。

在 html 页面上，视频使用 HTML5 video 标签嵌入：

```
<video width="360" height="200" controls>
    <source src="http://localhost:8080/myapp/controller/streamContent" type='video/mp4'>
</video> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T10:26:55.270

我通过处理部分内容和范围请求（HTTP 206 状态）解决了这个问题。似乎移动浏览器/媒体播放器正在使用部分请求来避免同时传输大量数据。所以不要做一个简单的

```
response.outputStream << f.newInputStream() 
```

当请求是针对一系列字节时，我只读取请求的字节：

```
if (isRange) {
    //start and end are requested bytes offsets
    def bytes = new byte[end-start]
    f.newInputStream().read(bytes, start, bytes.length)
    response.outputStream << bytes
    response.status = 206
} else {
    response.outputStream << f.newInputStream()
    response.status = 200
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-17T15:58:00.883

我还没有足够的声誉来发表评论，但我只想指出上面的答案并不完整，特别是您需要包含额外的标题，并且`f.newInputStream().read()`没有正确使用 of ，因为它不会t 只是从输入流的任意起点读取一个chunk，但是它会从当前位置读取一个chunk，所以你必须使用save the inputStream 然后使用`inputStream.skip()`跳转到正确的位置。

我在这里有一个更完整的答案（我在这里回答了我自己的类似问题） [https://stackoverflow.com/a/23137725/2601060](https://stackoverflow.com/a/23137725/2601060)

# html - iPad 版本的网站不是内联的

> ID：12959944
> 
> 赞同：0
> 
> 时间：2012-10-18T17:03:36.617
> 
> 标签：html, css

我的网站的 iPad 版本没有内联。图像似乎位于文本下方，当您缩小计算机上的网站窗口时也是如此。

[http://www.lauradawaf.co.uk/daisy-whitney-make-up-artist#](http://www.lauradawaf.co.uk/daisy-whitney-make-up-artist#)

有没有办法阻止这种情况？

**HTML**

```
<div id="content" class="clearfix">

<div class="leftCol noborder">Daisy Whitney</div>
<div class="clearfix"></div>
<div class="leftCol">Testing where this shows up. Testing where this shows up. Testing where this shows up. Testing where this shows up.</div>

<ul id="projectBreakdown" class="rightCol gallery clearfix">
<li class="large"><img src="http://www.lauradawaf.co.uk/wp-content/uploads/2012/10/test.jpg" style="display: inline-block" ></li>
<li class="large"><img src="http://www.lauradawaf.co.uk/wp-content/uploads/2012/10/test.jpg" style="display: inline-block" ></li>
</ul>

</div> 
```

**CSS**

```
/* Individual Projects
------------------------------------------------------------ */  
#content {
    position: relative;
    min-width: 960px;
}

.clearfix:after {
    clear: both;
    content: " ";
    display: block;
    height: 0;
    visibility: hidden;
    font-size: 0;
}

.leftCol {
    position: relative;
    float: left;
    width: 220px;
    margin-right: 20px;
    padding-top: 15px;
}

.leftCol.noborder {
    border-top: none;
    padding-top: 3px;
}

#projectBreakdown {
float: left;
list-style: none;
width: 100%;
max-width: 960px;
min-width: 720px;
padding: 5px 0 30px 0;
}

.rightCol {
position: relative;
}

#projectBreakdown li.large, #projectBreakdown li.large img {
width: 100%;
max-width: 940px;
min-width: 700px;
}

#projectBreakdown li {
float: left;
margin: 0 20px 20px 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:13:13.230

你在 ipad 上做什么？ipad 没有特定的 CSS。视口元标记也丢失了：

添加此元标记：

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; minimum-scale=1.0; maximum-scale=1.0;" /> 
```

然后使用媒体查询为设备编写特定的 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T18:04:17.577

听起来您试图动态调整照片大小，同时保持左侧文本始终固定，同时保持最小 960 像素宽度？CSS 仍然很难准确地完成你想要的。我同意 refhat 的观点，即您应该研究 CSS 媒体查询以在 iPad 和较小的显示器上正确显示网页。

不管怎样，这里有一些代码供您考虑。我对 html 和 css 代码都采取了一些重大的自由。而且...我使用了css表。

[HTML 和 CSS 代码沙箱](http://cssdesk.com/nSsAD)

# com - 将 COM 接口添加到现有应用程序 (EXE)

> ID：12959945
> 
> 赞同：1
> 
> 时间：2012-10-18T17:03:37.630
> 
> 标签：com, out-of-process

我打算将 COM 接口添加到现有应用程序（顺便说一下，它是使用 Win32 用 C++ 编写的）。我有一些*使用*COM 对象的经验，所以我知道接口等基本 COM 概念，但这是我第一次真正实现组件。

最终，我希望能够使用 COM 接口通过 VB 等脚本自动化我的应用程序。我知道有两个步骤：

1.  我的应用程序必须充当进程外服务器（即我必须使用 MIDL 并为代理 DLL 和存根 DLL 生成代码）。
2.  拥有服务器后，我可以通过实现 IDispatch 接口来添加自动化功能。

由于带有 MIDL 的服务器在一个 EXE 中以及其他的东西已经有点陡峭，我想在继续 IDispatch 之前先掌握所有这些。

我正在阅读 Dale Rogerson 的《Inside COM》一书，并完成了关于 EXE 中服务器的章节（下一章将介绍自动化）。

“EXE 中的服务器”一章提供了实现服务器和客户端的示例代码。但是需要手动启动服务器。这让我很困惑。显然，当客户端进程使用我的应用程序（= 服务器）时，不需要这个额外的手动步骤。是否没有自动启动服务器的机制？**或者是否需要自动化来实现这一目标？**目前，不得不手动启动我的服务器（一旦我有一个）的前景让我怀疑我是否朝着正确的方向前进。

希望对此有更多了解的人可以看到我缺少哪些信息并为我指明正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:38:08.187

不，COM 服务器通常不是手动启动的。不确定这本书为什么提出它，可能是因为它想避免谈论允许 COM 自动启动 EXE 所需的注册表项。否则它不是很复杂，您使用 LocalServer32 键值注册应用程序的应用程序 coclass，该键值提供 EXE 的路径。

然而，这并非完全不常见，尤其是对于现有程序。要做出的一个设计决定是您是否让客户端代码完全控制您的程序。或者，如果您的程序已经有一个现有的用户界面，但您还想向其他代码公开服务。在后一种情况下，让用户手动启动应用程序是有意义的，就像她通常做的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:39:12.913

当您的应用程序注册为`LocalServer32`时，如果尚未运行的进程为您的 CLSID 注册工厂对象，它将使用此处指定的命令行调用。

这样，您可以两全其美——如果应用程序已经在运行，则此实例可以提供服务器端，如果没有，它将启动。

自动化与此完全正交——通过实施，您的组件变得与自动化兼容`IDispatch`。

# javascript - 如何通过在 html 页面中按下图像来获取文本输出？

> ID：12959950
> 
> 赞同：-1
> 
> 时间：2012-10-18T17:04:09.503
> 
> 标签：javascript, html, image, cordova, text

我正在使用 Phonegap 编写一个 Android 应用程序。我希望能够按下图像，例如从 0-9 的数字，并作为输出在文本框中接收结果。

例如，如果我按下显示第一的图像，我会在我的文本框中得到“1”。

如何使用 html 和 JavaScript 来完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:17:12.333

使用 jQuery 你可以这样做：

HTML

```
<input type="text" id="output" />

<ul class="buttons">
    <li><a data-value="1">1</a></li>
    <li><a data-value="2">2</a></li>
    <li><a data-value="3">3</a></li>
    <li><a data-value="4">4</a></li>
    <li><a data-value="5">5</a></li>
    <li><a data-value="6">6</a></li>
    <li><a data-value="7">7</a></li>
    <li><a data-value="8">8</a></li>
    <li><a data-value="9">9</a></li>
</ul> 
```

CSS

```
#output { font-size:1.6em; }

ul.buttons {
    max-width: 300px;
}
ul.buttons li {
    background: #eee;
    float: left;
    margin: 1% 1% 0 0;
    width: 30%;
}
ul.buttons li a {
    cursor: pointer;
    display: block;
    height: 2em;
    line-height: 2em;
    text-align: center;
} 
```

JavaScript

```
$( document ).ready( function () {

    var $output = $( '#output' )

    $( 'ul.buttons a' ).unbind( 'click' ).bind( 'click', function () {

        var value = $( this ).attr( 'data-value' );
        $output.val( $output.val() + value );

    } );

} ); 
```

小提琴：http: [//jsfiddle.net/kboucher/wJ9R8/](http://jsfiddle.net/kboucher/wJ9R8/)

# c# - C#：专门的模板方法 - 错误：类型“...”已经定义了一个名为“...”的成员，具有相同的参数类型

> ID：12959957
> 
> 赞同：2
> 
> 时间：2012-10-18T17:04:17.350
> 
> 标签：c#, templates, entity-framework-4

我对 C# 很陌生，目前正在使用 EntityFramework 开发应用程序。我想扩展数据库上下文类的功能，这样我就可以调用方法 getPool() 以便它分发类的相应 DbSet 成员。

我需要将它实现为一个模板，因为它稍后会从其他模板中调用，这些模板只知道（全局）数据库上下文对象和一个类型 T（具有给定的超类），它们将查询数据库。

这是我尝试过的（有点简化 - 原始示例太复杂了）：

```
public class TestContext : DbContext
{
    public DbSet<TestA> ATests { get; set; }
    public DbSet<TestB> BTests { get; set; }

    public IQueryable<T> getPool<T>() where T : TestA {
       return (IQueryable<T>)ATests;
    }
    public IQueryable<T> getPool<T>() where T : TestB {
       return (IQueryable<T>)BTests;
    }
} 
```

错误信息是

**错误：类型“...”已经定义了一个名为“...”的成员，具有相同的参数类型**。

它出现在我的模板 ( `public IQueryable<T> getPool<T>() where T : TestB`) 的第二个专门定义的行。

问题是：如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:08:23.817

不幸的是，在 C# 中，您不能通过使用像这样的泛型类型约束来重载方法。你将不得不给他们不同的名字，像这样

```
public class TestContext : DbContext
{
    public DbSet<TestA> ATests { get; set; }
    public DbSet<TestB> BTests { get; set; }

    public IQueryable<T> getPoolA<T>() where T : TestA {
       return (IQueryable<T>)ATests;
    }
    public IQueryable<T> getPoolB<T>() where T : TestB {
       return (IQueryable<T>)BTests;
    }
} 
```

另一种解决方案是执行以下操作：

```
public class TestContext : DbContext
{
    public DbSet<TestA> ATests { get; set; }
    public DbSet<TestB> BTests { get; set; }

    public IQueryable<T> getPool<T>() {
       return (typeof(T) == typeof(TestA))
                  ? (IQueryable<T>)ATests
                  : (IQueryable<T>)BTests;
    }
} 
```

现在，你可以让它更干净，因为[`IQueryable<T>`](http://msdn.microsoft.com/en-us/library/bb351562.aspx)它是协变的`T`，你可以避免强制转换：

```
public class TestContext : DbContext
{
    public DbSet<TestA> ATests { get; set; }
    public DbSet<TestB> BTests { get; set; }

    public IQueryable<T> getPool<T>() {
       return (typeof(T) == typeof(TestA)) ? ATests : BTests;
    }
} 
```

* * *

如果您想避免测试类型，您可以执行以下操作：

```
public class TestContext : DbContext
{
    readonly Dictionary<Type, object> _sets;

    public DbSet<TestA> ATests { get; set; }
    public DbSet<TestB> BTests { get; set; }

    public TestContext()
    {
        _sets = new Dictionary<Type, object>
        {
            { typeof(TestA), ATests },
            { typeof(TestB), BTests }
        }
    }

    public IQueryable<T> getPool<T>() {
       return (IQueryable<T>)_sets[typeof(T)];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T17:40:26.210

我建议（除了阅读泛型和一般的 C# 之外）在运行时使用所需的类型配置池，将它们存储在字典中并使用`Type`as 键，即类似于以下几行的内容......：

```
//...

// configuration, maybe factor out to a dedicated class...
private readonly IDictionary<System.Type, IQueryable> m_SupportedPools =
    new Dictionary<System.Type, IQueryable>();

// add this queryable, note that type inference works here
public void AddToPool<T>(IQueryable<T> p_Queryable)
{
    m_SupportedPools.Add(typeof(T), p_Queryable);
}

public IQueryable<T> GetPool<T>()
{
    IQueryable t_Set = null;  
    if (m_SupportedQueries.TryGetValue(typeof(T), out t_Set)) {
        return t_Set as IQueryable<T>;
    } else {
        return null;
    }
} 
```

# cocoa - 如何沙箱化命令行工具？

> ID：12959958
> 
> 赞同：11
> 
> 时间：2012-10-18T17:04:20.443
> 
> 标签：cocoa, command-line, sandbox

我有一个由我制作的简单 unix 工具，可以从 shell 启动主要的可可应用程序。

我需要对其进行沙箱处理，但是当我运行它时，它会因错误“非法指令：4”而崩溃，在 console.app 上我可以看到以下错误消息

> 沙盒创建失败：容器对象初始化失败：NIL 容器信息对象没有 visdiff 的错误描述

该文件已使用 codesign 正确签名。

我读过这篇文章[Mac OS app, sandbox with command line tool？](https://stackoverflow.com/questions/11821632/mac-os-app-sandbox-with-command-line-tool)但这无济于事

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-03T16:12:21.657

我遇到了这个确切的问题，当我添加一个嵌入式 Info.plist 时它就消失了。

试试这些 clang 标志（假设你`info.plist`在构建目录中有）：

`-Xlinker -sectcreate -Xlinker __TEXT -Xlinker __info_plist -Xlinker info.plist`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T17:00:05.660

控制台应用程序是直接从控制台启动还是从主沙盒应用程序调用？在尝试对某些二进制文件进行沙箱处理时，我收到了类似的错误，我只能通过仅使用以下权利使其工作：

```
<dict>                                                                                                                                                                       
  <key>com.apple.security.app-sandbox</key>                                                                                                                                  
  <true/>                                                                                                                                                                    
  <key>com.apple.security.inherit</key>                                                                                                                                      
  <true/>                                                                                                                                                                    
</dict> 
```

当然，在那之后你只能从已经被沙盒化的父进程调用二进制文件（这就是为什么我问你的二进制文件是如何被调用的:)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-09T15:38:11.440

虽然@Nick Moore 的回答非常好，但在今天的 Xcode 中的 Packaging - Create Info.plist Section in Binary (CREATE_INFOPLIST_SECTION_IN_BINARY) 下有一个选项。所需要的只是将 thue 设置为 Yes。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-31T05:27:27.647

似乎如果您使用 com.apple.security.inherit 签署可执行文件，则它只能由已被沙盒化的另一个应用程序调用。因此，在运行 codesign 后，您将无法再从 cmdline 调用它。

# php - 未设置通过引用传递 PHP

> ID：12959965
> 
> 赞同：1
> 
> 时间：2012-10-18T17:04:33.530
> 
> 标签：php, pointers

**编辑**：如果我在一个对象上应用一些业务逻辑，然后我需要一个它的克隆在其他一些过程中横向移动。在对象的新实例上重新应用很有可能产生不同结果的业务逻辑或克隆现有实例是否更有效？但是，如果我这样做 $a = $b，通过引用传递的对象是不够的。

让我们看这个例子：

```
$a = new test();
$b = $a;
$b->setSomeProp('test');
$a->setSomeProp('failed');
echo $b->getSomeProp(); //returns 'failed' 
```

和

```
$a = new test();
$b = unserialize(serialize($a));
$b->setSomeProp('test');
$a->setSomeProp('failed');
echo $b->getSomeProp(); //returns 'test' 
```

有没有更好的方法来替换参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:13:29.407

是的。您需要[取消设置参考](http://www.php.net/manual/en/language.references.unset.php)

只需使用`unset($b)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:50:32.517

我可以看到您的代码已更改。您正在寻找的是`clone`. 试试这个：

```
$b = clone $a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T18:06:56.823

请参阅：[PHP 全局或 $GLOBALS](https://stackoverflow.com/questions/3573847/php-global-or-globals)

来自@Artefacto：“在函数内部，如果要取消设置全局变量，则必须使用 unset($GLOBALS['varname'])，而不是全局 $varname; unset($varname);。”

# python - Python中的“_csv”是什么？

> ID：12959968
> 
> 赞同：20
> 
> 时间：2012-10-18T17:04:50.050
> 
> 标签：python, csv, symbols, built-in

在尝试阅读该`csv.py`文件的源代码（作为在另一个上下文中实现我自己的`writer`类的指南）时，我发现该文件中的许多功能又是从名为的东西中导入的`_csv`：

```
 from _csv import Error, __version__, writer, reader, register_dialect, \
                  unregister_dialect, get_dialect, list_dialects, \
                  field_size_limit, \
                  QUOTE_MINIMAL, QUOTE_ALL, QUOTE_NONNUMERIC, QUOTE_NONE, \
                  __doc__ 
```

我在我的系统上找不到任何具有此名称的文件（包括搜索具有隐藏属性集的文件），尽管我可以`import _csv`从 Python shell 中完成。

这个模块是什么，可以阅读吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-18T17:06:46.863

`_csv`是`csv`模块的 C“主干”。它的来源在[`Modules/_csv.c`](http://hg.python.org/cpython/file/tip/Modules/_csv.c). 您可以通过 Python 命令提示符找到该模块的编译版本：

```
>>> import _csv
>>> _csv
<module '_csv' from '/usr/lib/python2.6/lib-dynload/_csv.so'> 
```

Python 源代码中没有隐藏文件 :)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-18T17:10:49.957

不同意拉尔斯曼的回答。

[PEP8](http://www.python.org/dev/peps/pep-0008/)中有官方对模块命名约定的解释：

> 当用 C 或 C++ 编写的扩展模块附带提供更高级别（例如更面向对象）接口的 Python 模块时，C/C++ 模块具有前导下划线（例如 _socket）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-18T15:43:10.967

答案已被接受，但我想添加一些细节，因为我有与 OP 相同的问题。

.csv 文件的内容只是一个带有值的逗号分隔文档：

```
first,last
john,doe
... 
```

您可以通过在记事本中打开一个 .csv 文件来进行测试

如果你想创建一个 .csv 文件，你可以写入它，你会得到你想要的 csv 文件。

```
with open('test.csv', 'w') as file:
    file.write('first,last\n')
    file.write('John,Doe\n') 
```

如果您想在不使用“import csv”的情况下写入 .csv 文件，则简单的解决方案。

# android - achartengine 缩放和黑色边框

> ID：12959969
> 
> 赞同：3
> 
> 时间：2012-10-18T17:04:55.277
> 
> 标签：android, graph, achartengine

我正在使用 achartengine 向我的应用程序添加图形，但我有一些疑问。有什么办法可以去除图表周围的黑框并使其透明？如果我的边缘透明但不知道如何设置它，那现在是图表的底部吗？另一个问题是，如何将缩放设置为图表？因为它总是会出现特定的条形（在我的情况下为 3）。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T17:56:50.060

您可以设置图表边距的颜色：

```
mRenderer.setMarginsColor(color); 
```

您可以通过调用隐藏边距：

```
mRenderer.setMargins(new double[] {0, 0, 0, 0}); 
```

您还可以隐藏图例：

```
mRenderer.setShowLegend(false); 
```

默认情况下启用双指缩放。为了启用缩放按钮：

```
mRenderer.setZoomButtonsVisible(true); 
```

我不明白你的最后一句话。请创建另一个包含详细信息的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-22T10:03:30.300

尝试这个：

```
renderer.setMarginsColor(resources.getColor(R.color.white));
renderer.setBackgroundColor(resources.getColor(R.color.white)); 
```

# animation - 从一个 GridView 到另一个 GridView 的动画过渡

> ID：12959971
> 
> 赞同：1
> 
> 时间：2012-10-18T17:04:57.600
> 
> 标签：animation, windows-8, microsoft-metro

`GridView`使用 .可以简单地在 a 的各个单元之间实现过渡动画`RepositionThemeTransition`。

但就我而言，我需要将`Element`s 从一个移动`GridView`到另一个。

是否可以在将`Element`（例如 an `Image`）从一个移动`GridView`到另一个时为过渡设置动画？

# javascript - Javascript：检测滚动条上的点击？

> ID：12959973
> 
> 赞同：0
> 
> 时间：2012-10-18T17:05:04.840
> 
> 标签：javascript

> **可能重复：**
> [如何确定用户是否单击元素滚动条或内容](https://stackoverflow.com/questions/10045423/how-to-determine-whether-user-clicking-element-scrollbar-or-content)

有没有办法用javascript检测浏览器窗口滚动条上的点击？

谢谢 ！

# php - 如何从包含 url 的字符串中获取当前文件夹？

> ID：12959975
> 
> 赞同：0
> 
> 时间：2012-10-18T17:05:11.780
> 
> 标签：php

基本上我有一个包含 php 脚本的文件夹，然后在该文件夹中我有另一个包含脚本的文件夹。我想在每个文件夹的 index.php 脚本中加载相同的头文件。要包含的脚本是位于 inclues 文件夹中的 nav.php。

树

```
includes
   nav.php
Folder1
   header.php
   index.php
   Folder2
      index.php 
```

我想做这个：

```
if getcwd() = 'Folder2'{
    include('../../includes/nav.php');
}else{
    include('../includes/nav.php'); 
```

但问题是 getcwd() 返回字符串中的整个路径，但我只想要 cur 目录名称。如何专门剪切字符串以删除除目录名称之外的所有内容。很高兴知道所有解决方案，但我对以这种方式切片字符串的函数特别感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:10:22.817

在较旧的 PHP 中创建相对于**_ *DIR* _ 或 dirname(_ *FILE* _)**的包含路径。或**$_SERVER['DOCUMENT_ROOT']**。*永远不要访问当前目录！*

```
include(__DIR__.'/../../includes/nav.php'); // Folder 2 files
include(__DIR__.'/../includes/nav.php'); // Folder 1 files 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T17:07:03.607

见功能：

```
basename 
```

在这里阅读：http: [//php.net/manual/en/function.basename.php](http://php.net/manual/en/function.basename.php)

```
basename( getcwd()) 
```

应该从路径中返回文件夹名称。下面是 basename 和 dirname 的示例：

```
#> pwd
/home/user
#> php
<?php
echo getcwd() . "\n" ;
echo dirname( getcwd()) . "\n" ;
echo basename( getcwd()) . "\n" ;
?>
/home/user
/home
user 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T17:16:41.653

请试试：：

```
if (basename(dirname(__FILE__)) = 'Folder2'){
    include('../../includes/nav.php');
}else{
    include('../includes/nav.php');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:18:39.377

您可以使用特殊变量

```
$_SERVER['PHP_SELF'] 
```

列出 URL 中 DNS 名称之后的所有内容。此时最简单的做法可能是使用explode函数将其拆分，使用“/”作为分隔符，并删除数组的最后一个元素（您的php文件名），然后使用implode将整个字符串作为a单变量。

这将为您提供来自 Web 根目录的当前目录。

# ruby-on-rails - 为什么 Rails 指南说 has_many :through 实现了多对多关系？

> ID：12959979
> 
> 赞同：0
> 
> 时间：2012-10-18T17:05:36.383
> 
> 标签：ruby-on-rails, activerecord, has-many-through

对我来说，它似乎是嵌套的一对多关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:13:49.703

示例：通过标签发布 has_many 标签。（和标签 has_many 帖子通过标签）

因此，一个帖子可以分配给多个标签：

```
@post << tag_one
@post << tag_two 
```

每个标签可以有很多帖子：

```
@tag.posts #=> [post_one, post_two] 
```

标记表可能看起来像

```
id, post_id, tag_id 
```

给你！

所以，既然 post 和 tag 都可以有很多其他的，many-many

# c++ - 如何在 C++ 中将字符串拆分为不同的数据类型

> ID：12959985
> 
> 赞同：2
> 
> 时间：2012-10-18T17:05:59.490
> 
> 标签：c++, string, parsing

我有以下问题： 我有一个看起来像这样的输入字符串： string s ="87635+23754*ar+ar*var*0.895+(ar-var)+ar*ar+var*var";

我想拆分这个字符串并执行每个操作，即我想读入所有值，执行数学运算并在 C++ 中输出最终答案。我该怎么做？getline 命令只能拆分一种类型的分隔符。我该如何解决这个问题？

谢谢

妮塔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T17:09:20.580

“正确”的答案是为您的迷你语言编写解析器，但使用[`string::find_first_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_of)和/或[`string::find_first_not_of`](http://en.cppreference.com/w/cpp/string/basic_string/find_first_not_of)将其标记为数字、运算符和命名变量可能更简单

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:45:32.893

你必须写一个解析器。不要害怕“正确”的解决方案，这是有充分理由的；有用。其他人提供的快捷方式不会使您的任务变得更容易。

我提供了一个基本解决方案，您可以将其用作起点。您应该构建测试用例以确保它是正确的并更彻底地处理错误用例。

希望通过研究此代码，您将了解递归体面解析器的一般概念。我们通过对不同级别的运算符优先级使用单独的函数来分解解析问题。这些函数以自上而下的方式相互调用，使这种类型的解析器更容易理解。

我以简洁的方式对其进行了编码。如果您认为“goto”是邪恶的，请改用 while 循环。此外，将解析函数转换为 Parser 类以摆脱全局变量。

祝你好运和快乐的解析:)

```
 #include <string>
    #include <map>
    #include <iostream>
    #include <sstream>
    using namespace std;

    stringstream ss;
    map<string,double> variables;
    string err_string = "";

    double parse_add_exp();

    int main()
    {
        // get the expression and variables
        ss << "87635+23754*ar+ar*var*0.895+(ar-var)+ar*ar+var*var";
        variables["ar"] = -4.5;
        variables["var"] = 141.26f;
        try
        {
            // calculate the result
            double result = parse_add_exp();
            if( result == INFINITY )
                cout<<"Runtime error: Division by zero"<<endl;
            else
                cout<<"Result = "<<result<<endl; // prints 'Result = 1.95143'
        }
        catch (const char * error)
        {
            cout<<"Invalid expression: "<<error<<endl;
        }
        return 0;
    }
    double parse_number()
    {
        double f;
        if( !(ss>>f) )
            throw "Expected number";
        return f;
    }
    double parse_operand()
    {
        string var("");
        while( isalpha(ss.peek()) )
            var += ss.get();
        if( !var.size() )
            return parse_number();
        if( variables.find(var) == variables.end() )
            throw "Variable is undefined";
        return variables[var];
    }
    double parse_parenthesis()
    {
        if( ss.peek() != '(' )
            return parse_operand();
        ss.get();
        double f = parse_add_exp();
        if( ss.get() != ')' )
            throw "Expected closing parenthesis";
        return f;
    }
    double parse_mul_exp()
    {
        double product = parse_parenthesis();
    PEEKOP:
        switch( ss.peek() )
        {
            case '*': ss.get(); product *= parse_parenthesis(); goto PEEKOP;
            case '/': ss.get(); product /= parse_parenthesis(); goto PEEKOP;
            default: return product;
        }
    }
    double parse_add_exp()
    {
        double sum = parse_mul_exp();
    PEEKOP:
        switch( ss.peek() )
        {
            case '+': ss.get(); sum += parse_mul_exp(); goto PEEKOP;
            case '-': ss.get(); sum -= parse_mul_exp(); goto PEEKOP;
            default: return sum;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T17:15:16.567

看看[std::stringstream](http://www.cplusplus.com/reference/iostream/stringstream/stringstream/)。您可以将字符串放入流中并从中读取，就像从 std::cin 中读取一样！

例如：

```
#include <iostream>
#include <sstream>

int main()
{
    std::stringstream stream(std::stringstream::in | std::stringstream::out);
    stream << "22+2";

    int operand1, operand2;
    char op;

    stream >> operand1;
    stream >> op;
    stream >> operand2;

    std::cout << operand1 << " " << op << " " << operand2 << std::endl;

    return 0;
} 
```

有关更复杂的示例，请查看我不久前所做的[dc-clone ：](http://de.wikipedia.org/wiki/Dc_%28Unix%29) [gist.github.com/ae6ebe58a286d6cfd847](https://gist.github.com/ae6ebe58a286d6cfd847)。尤其是第 467-522 行（主要）。

# ios - 如何在 iOS 中使用 CoreAnimation 为 CIFilter 设置动画？

> ID：12959988
> 
> 赞同：3
> 
> 时间：2012-10-18T17:06:09.707
> 
> 标签：ios, core-animation, calayer, core-image

我想使用`CABasicAnimation`. 我想为这个过滤器的一些属性设置动画。我从文档中读到该`filters`属性是可动画的，但在同一个文档中，似乎真的很难找到一种方法来做到这一点！

那么，如何使用 animationWithKeyPath 引用 CABasicAnimation 中的单个过滤器属性？

```
[CABasicAnimation animationWithKeyPath:@"filters._FILTER_._PROPERTY_"]; 
```

这是一个完整的示例，只是为了向您展示我是如何让它工作的：

```
//Define the filter
CIFilter *filterOne = [CIFilter filterWithName:@"CISepiaTone"];
[filterOne setDefaults];

//Attach it to the Layer
self.layer.filters = [NSArray arrayWithObject:filterOne];

//HERE THE PROBLEM ---------------------------------------
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"filters.???????.inputIntensity"];
//EOF HERE THE PROBLEM -----------------------------------

//Define the Animation settings
animation.delegate = self;
animation.fromValue = [NSNumber numberWithInt:0];
animation.toValue = [NSNumber numberWithInt:1];
animation.duration = 0.3;
...etcetc... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-20T01:53:01.647

我认为 layer filters 属性在 iOS 中根本不起作用。最近在 Apple 网站的 Apple Core Animation 论坛上对此进行了讨论，一位名为“Rincewind”的 Apple 工程师发帖称，iOS 根本没有实现图层过滤器功能。

[文档](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/LayerVisProps.html#//apple_ref/doc/uid/TP40006074-SW17)说：

> **iOS 注意：**虽然 iOS 中的 CALayer 类公开了 filters 属性，但 Core Image 不可用。目前，可用于此属性的过滤器未定义。

据我所知，您只能通过直接调用 CI 过滤器并获取 CIImage 作为输出来使用它们。然后，您必须通过代码使用 CIImage。

# css - 带有播放列表的 Flowplayer 5.0 - CSS 问题

> ID：12959996
> 
> 赞同：2
> 
> 时间：2012-10-18T17:06:34.697
> 
> 标签：css, flowplayer

我正在使用最新的 Flowplayer（5.0，它首先是 HTML5 ......耶！）在私人网站上播放教程视频（所以我不能提供一个活生生的例子）。我正在尝试使用内置的播放列表功能。格式很奇怪。

这是问题的屏幕截图。请注意，红色轮廓是工具计算的“flowplayer”区域。Windows 任务栏和 Firefox 浏览器是视频捕获本身。Flowplayer 控件是视频下方的小时间线带（靠近“flowplayer”区域的底部）。

![flowplayer 坏 css](../Images/938b7fe29f174ed22e06de635041d3a8.png)

Flowplayer 网站的建议代码如下：

```
<div class="flowplayer">

   <!-- initial clip -->
   <video>
      <source type="video/webm" src="night1/640x360.webm"/>
      <source type="video/mp4" src="night1/640x360.mp4"/>
      <source type="video/ogg" src="night1/640x360.ogv"/>
   </video>

   <!-- playlist root -->
   <div class="fp-playlist">

      <!-- playlist entries so. "trigger" elements -->
      <a href="night1.mp4"></a>
      <a href="night2.mp4"></a>
      <a href="night3.mp4"></a>
      <a href="night4.mp4"></a>
   </div>

</div> 
```

我正在使用包含的皮肤......它们都不起作用，但为了争论，我使用“functional.css”。

问题：

1.  控制元素正在大量逃离“视频播放器”区域。换句话说，您可以在该区域底部看到的那个“时间线栏”实际上是为了贴近视频区域。

我终于确定了问题：视频区域的高度被设置为“100%”；但是，这是基于整个`.flowplayer`区域的。由于该区域包括播放列表，因此“100%”大于视频本身。

2.  相关，播放列表位于视频上方而不是下方。这肯定与`.flowplayer`区域内用于定位控件的绝对定位有关。

3.  根据第 2 点，即使调整了视频区域的大小，播放列表的位置也会使其被视频区域遮挡。

这是我尝试过的：

*   如果我计算出所需的高度并将其明确设置为例如 400 像素而不是 100%，则控件会正确排列。不过，这是概念证明，因为它不是最理想的。我想使用某种比率（比如 100%！），以便它可以在响应式布局中呈现。

*   一旦我浮动元素或以其他方式更改布局方法，我必须绝对更新所有内容。我可以做到这一点，但令我惊讶的是，提供的 CSS 和提供的示例代码不会呈现。

*   我一直在寻找与网站 CSS 的冲突；没有我能看到的。这种布局似乎严格是由 flowplayer 元素的嵌套方式引起的。

*   我已将播放列表移至`.flowplayer`; 但是，它必须在脚本中使用该容器（为什么不呢？这样做非常有意义！）以便识别事件并将其附加到播放列表。

* * *

任何人都遇到过这个或有任何想法？最终结果应该是一个可动态调整大小的 flowplayer 区域，其下方有一个播放列表。

感谢您提供的任何见解，或可能解决问题的第 3 方皮肤。;-)

# ruby-on-rails - 从字符串数组中删除数字

> ID：12959998
> 
> 赞同：4
> 
> 时间：2012-10-18T17:06:47.990
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3, string

我有一个看起来像这样的数组：

```
["lorem", "ipsum", "1734", "dolor", "1", "301", "et", "4102", "92"] 
```

有没有办法删除数组中的所有数字，即使它们存储为字符串，所以我会留下这个：

```
["lorem", "ipsum", "dolor", "et"] 
```

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T17:10:19.037

使用正则表达式模式

```
s = ["lorem", "ipsum", "1734", "dolor", "1", "301", "et", "4102", "92"]
s.reject { |l| l =~ /\A\d+\z/ }
# => ["lorem", "ipsum", "dolor", "et"] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T17:11:35.717

```
s = ["lorem", "ipsum", "1734", "dolor", "1", "301", "et", "4102", "92"]
s.reject{|s| s.match(/^\d+$/) } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T17:20:51.733

如果你所有的字符串都只是整数，@Simone 的答案会很好用。

如果您需要检查所有数字表示（浮点数和科学记数法），那么您可以：

```
s = %w[ foo 134 0.2 3e-3 bar ]
s.reject!{ |str| Float(str) rescue false }
p s
#=> ["foo", "bar"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T17:12:37.797

我可以说的一种方式是：正则表达式匹配

1.  循环遍历所有项目
2.  然后使用这个：

    ```
    txt='Your string'

    re1='(\\d+)'    # Integer Number 1

    re=(re1)
    m=Regexp.new(re,Regexp::IGNORECASE);
    if m.match(txt)
        int1=m.match(txt)[1];
        # REMOVE THE ITEM HERE
    end 
    ```