# StackOverflow 问答 13606000-13606999

# android - Action bar tabs - getting x, y position of a tab

> ID：13606000
> 
> 赞同：0
> 
> 时间：2012-11-28T13:18:52.477
> 
> 标签：android, android-actionbar

A simple scenario:

I have an application with an `ActionBar` - which contains three tabs: TAB1, TAB2 and TAB3, all are of type [Tab](http://developer.android.com/reference/android/app/ActionBar.Tab.html).

Each tab is being displayed after the corresponding button is being pressed. The three buttons are being displayed under the Actionbar.

Is it possible to get the X, Y positions of these buttons, individually?

# android - How to find the object length using camera in android

> ID：13606001
> 
> 赞同：0
> 
> 时间：2012-11-28T13:18:54.033
> 
> 标签：android

i want to find the object length using camera . I have search a lot and i have found relation between distance & view angle. Formula angle= arctan(d/2f) but i m frustrated and not find any relative code. so please suggest me the working code in order to find the object height using camera. if distance from the object is know then how to find the object length Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:47:42.383

```
verticalViewAngleDegrees = myCamera.getParameters().getVerticalViewAngle();
heightOfObjectFillingImage = 2 * userSpecifiedDistance * tan(toRadians(verticalViewAngleDegrees/2));
approxHeightOfObject = verticalPixelsOfObject / verticalPixelsOfWholeImage * heightOfObjectFillingImage; 
```

我不相信三角函数是我能做的最好的，但这是第一个近似值。

# asp.net - SqlConnection，密码被修整

> ID：13606005
> 
> 赞同：1
> 
> 时间：2012-11-28T13:18:58.833
> 
> 标签：asp.net, sql, passwords, sqlconnection

我正在开发一个 ASP.NET Web 应用程序，并使用以下连接字符串进行身份验证：

```
 System.Data.SqlClient.SqlConnection(UserConnectionString()) 
```

问题是，如果我有例如密码：“pass123”并且我输入“pass123”或“pass123”，用户将通过身份验证，并将登录。密码被修整，有什么建议可以阻止这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:24:19.737

[按照此处](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.connectionstring.aspx)的建议，将密码用单引号或双引号括在连接字符串中，以保留前导或尾随空格。

# android - 如何创建类似脉冲的设置视图？见照片

> ID：13606007
> 
> 赞同：0
> 
> 时间：2012-11-28T13:19:00.243
> 
> 标签：android, android-view, pulse

作为话题。有谁知道如何创建脉冲应用程序在其左侧使用的快照设置视图？

即当您从左边缘滑动手指时，设置开始从后面显示。请参见下图的左侧部分。经过一定量的移动后，设置菜单几乎一直向右对齐，但仍显示底层视图。

![脉冲应用设置视图](../Images/6c7100306aef0710ca4266430395f3cc.png)

任何帮助深表感谢

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:33:10.737

你有两个选择：

*   您可以自己处理两个片段（一个在前面，一个在后面），甚至可以用一些触摸甚至听众来翻译抽屉以打开和关闭。

*   或使用可能与我描述的相同的库。像这样的东西：[http ://www.androidviews.net/2012/11/sliding-menu/](http://www.androidviews.net/2012/11/sliding-menu/)

# ruby - 如何使用 Watir 触发 ng-dblclick

> ID：13606009
> 
> 赞同：3
> 
> 时间：2012-11-28T13:19:04.053
> 
> 标签：ruby, gem, angularjs, watir, watir-webdriver

我们的开发部门正在使用 AngularJS 来构建 Web 应用程序。我正在研究自动化测试，因为它可以为我们节省大量时间。

我发现 Watir 在测试时非常有用......问题是，它不能很好地与 AngularJS 一起工作。

示例：我们有一个带有项目的选择多个。这些项目都使用 ng-dblclick 来触发一个动作（创建一个 div）。

我试过使用：

```
browser.select_list(:class, "domain-list").select("Item 2")
browser.select_list(:class, "domain-list").fire_event("dblclick") 
```

和

```
browser.select_list(:class, "domain-list").select("Item 2")
browser.select_list(:class, "domain-list").fire_event("ng-dblclick") 
```

和

```
browser.select_list(:class, "domain-list").select("Item 2")
browser.select_list(:class, "domain-list").double_click 
```

和

```
browser.select_list(:class, "domain-list").select("Item 2")
browser.select_list(:class, "domain-list").click
browser.select_list(:class, "domain-list").click 
```

都没有成功。

我的问题是：甚至可以双击 AngularJS ng-click/ng-dblclick 启用的元素吗？湾。如果是这样……怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:17:22.370

根据问题描述，我猜测 ng-dblclick 实际上是在列表的选项上，而不是列表本身。

尝试单击选项本身：

```
browser.select_list(:class, "domain-list").option(:text, "Item 2").double_click 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:45:47.427

将 Justin 帖子中的 .double_click 替换为 .fire_event("dblclick") 使其工作！

```
browser.select_list(:class, "domain-list").option(:text, "Item 2").fire_event("dblclick") 
```

谢谢贾斯汀！

# c# - 使用 jQuery 对话框在数据库中搜索并在 GridView 中显示

> ID：13606022
> 
> 赞同：0
> 
> 时间：2012-11-28T13:19:39.120
> 
> 标签：c#, jquery, asp.net, gridview

我有一个 jQuery 对话框，当按下按钮时会弹出。我有一个 GridView，其中包含来自我的数据库的结果。我想让 GridView 显示我搜索的结果。因此，我添加了 a`asp:textbox`和 a `asp:button`，想法是当我按下按钮时，它会调用与我的数据库连接的函数，然后在 GridView 中显示结果。所以基本上，当 jQuery 弹出时，它应该显示一个空的 GridView（或无），然后当我搜索某些内容时，它应该显示结果。这是我的 main.aspx 代码：

```
 <div id="ViewPlaces">
                <asp:TextBox ID="viewPlaceTextbox"  runat="server" placeholder="Search..." />
                <asp:Button ID="viewPlaceBtn" OnClick="getSearchedPlace" runat="server" Text="Search for place" />
                        <asp:GridView ID="GridView1" AllowPaging="true" GridLines="None" CssClass="mGrid" PagerStyle-CssClass="pgr" AlternatingRowStyle="alt" runat="server" AllowSorting="True"
                            AutoGenerateColumns="False"
                            Width="750px"
                            CausesValidation="False" ShowHeaderWhenEmpty="true" ShowHeader="true">
                           <Columns>
                                <asp:BoundField DataField="place_id" HeaderText="Id" ReadOnly="True" />
                                <asp:BoundField DataField="place_name" HeaderText="Name" />
                                <asp:BoundField DataField="place_city" HeaderText="City" />
                                <asp:BoundField DataField="place_land" HeaderText="Land" />
                                <asp:BoundField DataField="place_desc" HeaderText="Description" />                        
                            </Columns>
                        </asp:GridView>
            </div> 
```

这是jQuery代码：

```
$('#ViewPlaces').dialog(dialogOpts5);
        $.fx.speeds._default = 500;
        $(function () {
            $("#ViewPlaces").dialog({
                autoOpen: false,
                show: "blind",
                hide: "explode",
            });

            $("#viewallplaces").click(function () {
                $("#ViewPlaces").dialog("open");
                return false;
            });
        }); 
```

在我的 c# 代码中，问题是如果我不调用从数据库中获取结果的函数`Page_Load`，那么当我按下打开 jQuery 对话框的按钮时，不会加载 GridView。否则，函数如下所示：

```
 protected void getPlaces()
{
    List<Place> pl = new List<Place>();
    pl = functions.getPlaces();
    GridView1.DataSource = pl;
    GridView1.DataBind();
} 
```

该`getPlaces()`函数返回一个地点列表。这不是问题，它有效，我已经测试过了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:25:51.327

在这种情况下，您将使用 webforms 控件，如 gridview 和 updatepanel 并放弃 jquery，或者您将使用基本的 HTML 元素并连接 jquery 来调用端点（url）并呈现结果客户端。但不是两者兼而有之。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T16:48:09.140

如果您只在 gridview 中显示数据，您可以有一个单独的页面来生成 gridview。

想象一下这个页面只包含gridview。您可以对页面使用 jquery ajax 调用，将 url 中的 gridview 参数作为查询字符串传递。然后在gridview页面的页面加载上，您将检查querystring参数，然后使用它们来查询数据库中的数据，然后使用数据绑定您的gridview。

ajax 调用将返回 html，您只需将 html 注入您的弹出窗口

```
$.ajax({
 url: "yourgridpage.aspx?dat1=YourValue1&dat2=YourVal2"
}).done(data,function() { 
 $.popUp.html(data);
}); 
```

# c++ - MPEG2 演示时间戳 (PTS) 计算

> ID：13606023
> 
> 赞同：7
> 
> 时间：2012-11-28T13:19:41.963
> 
> 标签：c++, video, mpeg2-ts

我有一个 MPEG2 TS 文件，现在我有兴趣从每个图片帧中提取 PTS 信息。我知道 PTS 用 33 位描述，包括 3 个标记位。但我不知道如何将这个位域转换为更易于理解的形式（秒、毫秒）。有人可以帮我吗

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-30T13:44:02.477

MPEG2 传输流时钟（PCR、PTS、DTS）均以 1/90000 秒为单位。PTS 和 DTS 具有您需要跳过的三个标记位。模式总是（从最高有效位到最低有效位）3 位，标记，15 位，标记，15 位，标记。标记必须等于 1。在 C 中，删除标记的工作方式如下：

```
uint64_t v; // this is a 64bit integer, lowest 36 bits contain a timestamp with markers
uint64_t pts = 0;
pts |= (v >> 3) & (0x0007 << 30); // top 3 bits, shifted left by 3, other bits zeroed out
pts |= (v >> 2) & (0x7fff << 15); // middle 15 bits
pts |= (v >> 1) & (0x7fff <<  0); // bottom 15 bits
// pts now has correct timestamp without markers in lowest 33 bits 
```

它们还有一个 9 位的扩展字段，形成一个 42 位整数，其中扩展是最低有效位。基本+扩展的单位是 1/27000000 秒。许多实现将扩展保留为全零。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-16T23:59:27.777

24hours/day * 60min/hr * 60secs/min *90k/sec (clock) = 7962624000，需要33位来表示；您可以使用此信息从时钟中提取时间；

# android - textview 监听事件

> ID：13606024
> 
> 赞同：0
> 
> 时间：2012-11-28T13:19:46.010
> 
> 标签：android, textview, listener, fragment

我确实有一个片段，并且在片段中有一个文本视图。我希望这个 textview 对某些事件做出反应。例如，我确实有一个变量，并且我希望我的 textview 显示该变量。到目前为止，这工作得很好，但如果我的变量改变我的 textview 不会！所以我想一定有类似事件监听器的东西，但我还没有找到。无法想象解决这个问题很难，但我找不到合适的听众。或者可能有另一个接收？实际上，如果文本视图在片段或正常活动中，我认为它不会有很大的不同！？

谢谢

# windows-7 - Windows下的QtCreator和TBB

> ID：13606029
> 
> 赞同：0
> 
> 时间：2012-11-28T13:19:53.617
> 
> 标签：windows-7, qt-creator, tbb

我按照这篇文章中的评论 #5 使用 Mingw 从源代码编译了 TBB：http: [//software.intel.com/en-us/forums/topic/291331](http://software.intel.com/en-us/forums/topic/291331)。一切顺利。

当我尝试在 QtCreator 项目中使用新的 TBB 库时，我以这个错误结束（忽略警告消息）：[http ://postimage.org/image/yrrecugix/](http://postimage.org/image/yrrecugix/)

这是我尝试过的示例代码（我省略了非 tbb 代码）：

```
#include "tbb/task_scheduler_init.h"

int main()
{
  tbb::task_scheduler_init init;
  /// more things.
} 
```

这是*.pro*文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= qt

SOURCES += main.cpp

#QMAKE_CXXFLAGS += -fopenmp
#QMAKE_LFLAGS += -fopenmp
INCLUDEPATH += "E:\TRABAJO\LIBRERIAS\tbb-4.1_src\include"
LIBS += -L"E:\TRABAJO\LIBRERIAS\tbb-4.1_src\build\windows_intel64_gcc_mingw4.5.4_debug\" \
        -ltbb_debug 
```

任何的想法？。

谢谢！。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T19:14:20.450

在 Windows 上使用 MinGW 构建时，TBB 二进制文件是`tbb.dll`和`tbb_debug.dll`. 配置文件中的选项`-ltbb_debug`可能会导致链接器查找`libtbb_debug.<something>`. 它找不到这样的二进制文件并报告未解析的符号。

# macos - 似乎是 MacOS FF 的 background-size:cover 中的一个错误。如何避免？

> ID：13606041
> 
> 赞同：0
> 
> 时间：2012-11-28T13:20:09.120
> 
> 标签：macos, firefox, css

示例：[http ://dabblet.com/gist/4161200](http://dabblet.com/gist/4161200)

盒子底部有一个空的 1px 行。当我们 FF 尝试用奇数行拟合图像时，它可能会出现。有人遇到这个问题吗？你如何避免它？

**补充：**哦，不好意思，我又查了一下，发现这个问题只和MacOS的火狐（分别是10.7和17.0）有关。在 Windows 上看起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:12:21.343

我在 MacOSX 上的 FF17 上也遇到了问题。我无法解释为什么，但是通过关闭`background-repeat: no-repeat`这个黑色多余的像素消失了。

# mongodb - MongoDb/MongoVue 导出复合键的一部分

> ID：13606044
> 
> 赞同：0
> 
> 时间：2012-11-28T13:20:29.547
> 
> 标签：mongodb, mongovue

我想使用 MongoVue 为给定集合的一部分创建所有 id 的快速导出。

我有一个文档，它有一个 _id 字段，它是一个复合键。

例如。

```
{
  "_id" : {
    "GroupID" : 3,
    "ThingyID" : 320486
  },
  "HowManyOwned" : 42,
  "IsAwesome" : true
} 
```

我想为第 3 组创建所有 ThingyID 的导出。

当然，如果我提出这样的查询。

```
db.GroupThingy.find({ "_id.GroupID" : 3 }, { "_id.ThingyID" : 1 }) 
```

我会取回所有的复合键。我想使用 MongoVue 快速创建此导出。如果我使用该查询，我会得到一个导出。

```
Document[2 Keys]
Document[2 Keys]
Document[2 Keys] 
```

我希望得到的是

任何一个

```
3,12345
3,3838
3,3777
3,1111 
```

或者更好的是

```
12345
3838
3777
1111 
```

我可以为此编写一个程序，但必须有一种我不知道的快速方法来完成它。

聚合框架不能帮助我获得 csv 导出......但这样的东西只会支持 20k 文档

```
db.GroupThingy.group( 
{
    key: { 
            "_id.ThingyID": 1, 
            "_id.GroupID":1 
        }, 
    cond: { "_id.GroupID": 3 }, 
    reduce: function(curr, result){
            result.ThingyID2 = curr._id.ThingyID
        }, 
    initial: { "ThingyID2": 0 }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T13:39:23.673

好吧，由于这个问题，我终于找到了如何使用 mongoexport 进行导出： [how to export collection to csv in mongodb](https://stackoverflow.com/questions/6814151/how-to-export-collection-to-csv-in-mongodb)

但是我一直收到错误：

错误：太多的位置选项......而这篇文章帮助我找到了答案： [在进行 mongoexport 时，“太多的位置选项”是什么意思？](https://stackoverflow.com/questions/7521163/what-does-too-many-positional-options-mean-when-doing-a-mongoexport)

所以我运行 mongoexport 的最终解决方案是：

```
mongoexport 
     --host myHostName 
     --db theDB 
     --collection GroupThingy 
     --fields "_id.ThingyID" 
     --csv 
     --query "{'_id.GroupID':3}" 
```

*（那里的选项有自己的可读性）*

# android - 在应用程序内部访问时出现内存缓存错误

> ID：13606045
> 
> 赞同：0
> 
> 时间：2012-11-28T13:20:35.200
> 
> 标签：android, out-of-memory, heap-memory

我搜索了很多，但我不明白我的错误在哪里。首先在我的应用程序中，如果没有网络，我将从网络获取图像，我从创建的数据库中获取它们。我将发布我的 ImageLoader 类，然后是内存类，然后是 utils 类，如果有问题，请我需要一些帮助提前谢谢。

```
public class ClassImageLoader {

ClassMemoryCache memoryCache=new ClassMemoryCache();
ClassFileCache fileCache;
private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
ExecutorService executorService; 

public ClassImageLoader(Context context){
    fileCache=new ClassFileCache(context);
    executorService=Executors.newFixedThreadPool(5);
}

final int stub_id=R.drawable.restlogobutton;
public void DisplayImage(String url, ImageView imageView)
{
    imageViews.put(imageView, url);
    Bitmap bitmap=memoryCache.get(url);

    if(bitmap!=null)
        imageView.setImageBitmap(bitmap);
    else
    {
        queuePhoto(url, imageView);
        imageView.setImageResource(stub_id);
    }
}

private void queuePhoto(String url, ImageView imageView)
{
    PhotoToLoad p=new PhotoToLoad(url, imageView);
    executorService.submit(new PhotosLoader(p));
}

private Bitmap getBitmap(String url) 
{
    File f=fileCache.getFile(url);

    //from SD cache
    Bitmap b = decodeFile(f);
    if(b!=null)
        return b;

    //from web
    try {
        Bitmap bitmap=null;
        URL imageUrl = new URL(url);
        HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
        conn.setConnectTimeout(30000);
        conn.setReadTimeout(30000);
        conn.setInstanceFollowRedirects(true);
        InputStream is=conn.getInputStream();
        OutputStream os = new FileOutputStream(f);
        ClassUtils.CopyStream(is, os);
        os.close();
        bitmap = decodeFile(f);
        return bitmap;
    } catch (Exception ex){
       ex.printStackTrace();
       return null;
    }
}

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
}

//Task for the queue
private class PhotoToLoad
{
    public String url;
    public ImageView imageView;
    public PhotoToLoad(String u, ImageView i){
        url=u; 
        imageView=i;
    }
}

class PhotosLoader implements Runnable {
    PhotoToLoad photoToLoad;
    PhotosLoader(PhotoToLoad photoToLoad){
        this.photoToLoad=photoToLoad;
    }

    public void run() {
        if(imageViewReused(photoToLoad))
            return;
        Bitmap bmp=getBitmap(photoToLoad.url);
        memoryCache.put(photoToLoad.url, bmp);
        if(imageViewReused(photoToLoad))
            return;
        BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
        Activity a=(Activity)photoToLoad.imageView.getContext();
        a.runOnUiThread(bd);
    }
}

boolean imageViewReused(PhotoToLoad photoToLoad){
    String tag=imageViews.get(photoToLoad.imageView);
    if(tag==null || !tag.equals(photoToLoad.url))
        return true;
    return false;
}

//Used to display bitmap in the UI thread
class BitmapDisplayer implements Runnable
{
    Bitmap bitmap;
    PhotoToLoad photoToLoad;
    public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
    public void run()
    {
        if(imageViewReused(photoToLoad))
            return;
        if(bitmap!=null)
            photoToLoad.imageView.setImageBitmap(bitmap);
        else
            photoToLoad.imageView.setImageResource(stub_id);
    }
}

public void clearCache() {
    memoryCache.clear();
    fileCache.clear();
} 
```

}

```
public class ClassMemoryCache {

private Map<String, Bitmap> cache=Collections.synchronizedMap(
        new LinkedHashMap<String, Bitmap>(10,1.5f,true));//Last argument true for LRU ordering
private long size=0;//current allocated size
private long limit=1000000;//max memory in bytes

public ClassMemoryCache(){
    //use 25% of available heap size
    setLimit(Runtime.getRuntime().maxMemory()/4);
}

public void setLimit(long new_limit){
    limit=new_limit;
}

public Bitmap get(String id){
    if(!cache.containsKey(id))
        return null;
    return cache.get(id);
}

public void put(String id, Bitmap bitmap){
    try{
        if(cache.containsKey(id))
            size-=getSizeInBytes(cache.get(id));
        cache.put(id, bitmap);
        size+=getSizeInBytes(bitmap);
        checkSize();
    }catch(Throwable th){
        th.printStackTrace();
    }
}

private void checkSize() {
    if(size>limit){
        Iterator<Entry<String, Bitmap>> iter=cache.entrySet().iterator();//least recently accessed item will be the first one iterated  
        while(iter.hasNext()){
            Entry<String, Bitmap> entry=iter.next();
            size-=getSizeInBytes(entry.getValue());
            iter.remove();
            if(size<=limit)
                break;
        }
    }
}

public void clear() {
    cache.clear();
}

long getSizeInBytes(Bitmap bitmap) {
    if(bitmap==null)
        return 0;
    return bitmap.getRowBytes() * bitmap.getHeight();
} 
```

}

```
public class ClassUtils {
public static void CopyStream(InputStream is, OutputStream os)
{
    final int buffer_size=1024;
    try
    {
        byte[] bytes=new byte[buffer_size];
        for(;;)
        {
          int count=is.read(bytes, 0, buffer_size);
          if(count==-1)
              break;
          os.write(bytes, 0, count);
        }
    }
    catch(Exception ex){}
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:30:55.910

内存管理是一个相当广泛和高级的话题，但我会用大写字母发布一个非常重要的提示：

**`DO NOT USE MAP<k,v> !!!`**

该地图永远保留对图像视图（保留活动上下文）和位图的引用，这是您有这些内存损失的主要原因之一。进一步对上下文的引用是将您的整个活动永远保存在内存中。所有非常糟糕的想法。

您将使用 LruCache（可在兼容性库中获得）来缓存位图，并仅让活动保持对图像视图的引用（来自 XML 的静态或使用适配器动态地）

这是一个 Google IO 视频[http://www.youtube.com/watch?v=gbQb1PVjfqM](http://www.youtube.com/watch?v=gbQb1PVjfqM)，来自 Google 的人自己展示了该领域的一些最佳实践，他们在 4 分钟标记上展示了 LruCache 的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:42:46.400

// 在您的代码中替换此方法并尝试我不确定它是否会解决您的错误，但一旦您可以尝试。

```
private Bitmap getBitmap(String url) 
    {
        //I identify images by hashcode. Not a perfect solution, good for the demo.
        String filename=String.valueOf(url.hashCode());
        File f=new File(cacheDir, filename);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;

        //from web
        try {
            Bitmap bitmap=null;
            InputStream is=new URL(url).openStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        }
        catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

//decodes image and scales it to reduce memory consumption
private Bitmap decodeFile(File f){
    try {
        //decode image size
        BitmapFactory.Options o = new BitmapFactory.Options();
        o.inJustDecodeBounds = true;
        BitmapFactory.decodeStream(new FileInputStream(f),null,o);

        //Find the correct scale value. It should be the power of 2.
        final int REQUIRED_SIZE=70;
        int width_tmp=o.outWidth, height_tmp=o.outHeight;
        int scale=1;
        while(true){
            if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                break;
            width_tmp/=2;
            height_tmp/=2;
            scale*=2;
        }

        //decode with inSampleSize
        BitmapFactory.Options o2 = new BitmapFactory.Options();
        o2.inTempStorage = new byte[32*1024]; 
        o2.inSampleSize=scale;
        return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
    } catch (FileNotFoundException e) {}
    return null;
} 
```

检查 ImageLoaderClass 的链接： [http ://code.google.com/p/vimeoid/source/browse/apk/src/com/fedorvlasov/lazylist/ImageLoader.java](http://code.google.com/p/vimeoid/source/browse/apk/src/com/fedorvlasov/lazylist/ImageLoader.java)

OOM 问题检查此链接： [将图像加载到位图对象时出现奇怪的内存不足问题](https://stackoverflow.com/questions/477572/android-strange-out-of-memory-issue-while-loading-an-image-to-a-bitmap-object/823966#823966)

如果您仍然遇到错误，请检查我在多次搜索后找到并解决了我的问题的这个链接： [https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/vYWKY1Y6bUo](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/vYWKY1Y6bUo)

# c# - 一个简单的 C# 连接字符串到一个平面文件，txt

> ID：13606047
> 
> 赞同：0
> 
> 时间：2012-11-28T13:20:48.217
> 
> 标签：c#

任何人都可以帮助我连接到 Microsoft 平面文件、扩展名 txt 的字符串吗？我只是想阅读一个用 | 分隔的 txt 文档 .

获取数据并尽可能通过DataAdapter将其加载到DataTable中，文件的第一行应该是DataTable上的列名，最后DataType在DataTable上并不重要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:23:03.377

试试[这个](http://www.connectionstrings.com/textfile)

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\filepath;Extended Properties="text;HDR=Yes;FMT=Delimited"; 
```

像这样的东西应该工作

```
 string strSql = "SELECT * FROM [" + fileName + "]"; 

  string strCSVConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + strFilePath + ";" + "Extended Properties='text;HDR=YES;'"; 

  // load the data from CSV to DataTable 

  OleDbDataAdapter oleda = new OleDbDataAdapter(strSql, strCSVConnString); 
  DataTable dtbCSV = new DataTable(); 
  oleda.Fill(dtbCSV); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:23:49.677

看看[http://connectionstrings.com/textfile](http://connectionstrings.com/textfile)

连接字符串示例：

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=c:\txtFilesFolder\;
Extended Properties="text;HDR=Yes;FMT=Delimited"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:28:38.140

如何利用 .Net 提供的功能：

参考 Microsoft.VisualBasic 你可以使用[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)

```
using (var parser =
    new TextFieldParser(@"c:\data.csv")
        {
            TextFieldType = FieldType.Delimited,
            Delimiters = new[] { "," }
        })
{
    while (!parser.EndOfData)
    {
        string[] fields;
        fields = parser.ReadFields();
        //go go go!
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T15:30:22.973

我找到了导致问题的原因。在 MS 网站上，他们讨论了一个 schema.ini 文件，该文件应该能够处理分隔文件 bla bla bla ，但我注意到，一旦您将所有设置放入注册表，它就会接管。因此，一旦我更改了注册表 ArsenMkrt 代码中的格式并且连接字符串正常工作，我就根据我的需要进行了调整，一切都很好。

感谢你们所有人，非常感谢 ArsenMkrt。

我爱C#

# jquery - 在jQuery中将JSON字符串转换为对象

> ID：13606048
> 
> 赞同：2
> 
> 时间：2012-11-28T13:20:51.037
> 
> 标签：jquery, json

我有一个 jQuery http 请求，它以 JSON 字符串的形式返回一个对象。这里我要做的是将JSON转换为jQuery对象并将值分配给html元素......以下是要转换的对象的结构：

```
var Userrights = {

            Id: // an id element
            ScreenRights: // this is a list with following elements
            {
                ScreenName: 
                Create:
                Read: 
                Update: 
                Delete:
                Approve: 
                Access: 
                Print: 
                Email: 
            };
        }; 
```

现在，当我收到如下 JSON 字符串时：

```
{
    "Id": "Manager",
    "ScreenRights": [{
        "ScreenName": "CustomerScreen",
        "Create": true,
        "Read": false,
        "Update": true,
        "Delete": false,
        "Approve": true,
        "Access": true,
        "Print": true,
        "Email": true
    },
    {
        "ScreenName": "TraderScreen",
        "Create": true,
        "Read": false,
        "Update": true,
        "Delete": false,
        "Approve": true,
        "Access": true,
        "Print": true,
        "Email": true
    },
    {
        "ScreenName": "DistributorScreen",
        "Create": true,
        "Read": false,
        "Update": true,
        "Delete": false,
        "Approve": true,
        "Access": true,
        "Print": true,
        "Email": true
    }]
}​ 
```

现在我将如何将此字符串转换为上述对象结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:26:25.697

查询：

```
var obj = $.parseJSON(string);
console.log(obj); 
```

话虽如此，如果您使用的是 jQuery 的 .ajax，您可以设置`dataType:'json'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-19T21:57:06.997

我认为您可以将 json 推送到某个数组中，然后您可以使循环按名称访问对象。

```
result[i].Create;
result[i].Read; 
```

# layout - 具有小部件支持的全局侧边栏

> ID：13606050
> 
> 赞同：3
> 
> 时间：2012-11-28T13:21:01.103
> 
> 标签：layout, zend-framework2

我想制作一个带有侧边栏的布局，该侧边栏可以包含来自不同模块的小部件。假设如果用户未登录，则顶部始终会有一个登录小部件，然后它将显示用户信息。[入门专辑指南](http://framework.zend.com/manual/2.0/en/user-guide/overview.html)可以使用它来显示最新专辑等，希望您了解我想如何使用侧边栏。

是否可以通过自动加载中的配置文件和读取该配置并在每个页面加载时调用小部件的小代码来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T03:31:50.887

Zend Framework 2 中有几种页面组合方式：

## 1\. 布局之间的切换

默认情况下，ZF2 为您提供单个布局模板*layout.phtml*。在现实生活中的应用程序中，您可能需要有多个布局并为某些控制器/动作切换布局。在您的每个布局中，您将能够显示不同的小部件/侧边栏。

## 2\. 局部视图

*部分*视图是一个.phtml*视图*模板文件，可以由另一个视图模板呈现。部分视图允许组成您的页面并在不同的视图模板中重用视图渲染逻辑。这是通过`Partial`视图助手完成的。

## 3.占位符视图助手

这`Placeholder`是另一个有用的视图助手，允许捕获 HTML 内容并将其存储以供以后使用。因此，类似于`Partial` 视图助手，它允许将您的页面组合成多个部分。

## 4.前向控制器插件

使用`Forward`控制器插件，您可以从控制器的另一个模块/控制器调用动作（例如，渲染某些小部件的动作）并获取该动作的输出。然后，您可以将该输出合并到您的页面中。

## 5\. 使用视图模型进行页面组合

当您为控制器类编写操作方法时，您将`ViewModel` 类用作变量容器，用于将变量从控制器传递到视图模板，并覆盖默认的视图模板名称。但是，实际上`ViewModel`该类不仅仅是一个变量容器加上视图模板名称。事实上，它与布局和页面构成密切相关。

视图模型类的第三大功能是它允许*将*多个视图模型组合成树状结构。树中的每个视图模型都有关联的视图模板名称和数据变量，可以传递给视图模板以控制渲染过程。

Zend Framework 2 在“组合”布局视图模板和与控制器的操作方法关联的视图模板时在内部使用此功能。ZF2 在内部为布局模板创建视图模型并为其分配`layout/layout`视图模板名称。当控制器的操作方法返回`ViewModel`对象时，该对象作为子对象附加到布局视图模型。

因此，您可以将自己的视图模型附加到默认视图模型以呈现您想要的页面。

# ios - iOS SDK：打电话时在后台播放音乐

> ID：13606059
> 
> 赞同：-1
> 
> 时间：2012-11-28T13:21:31.150
> 
> 标签：ios, appdelegate, phone-call

我想知道打电话时是否可以在后台播放音乐？如果是这样怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:24:51.753

不，这是不可能的。对不起。

# actionscript-3 - Flash CS5.5：错误 1046。我找不到其他方法

> ID：13606064
> 
> 赞同：1
> 
> 时间：2012-11-28T13:21:45.297
> 
> 标签：actionscript-3, flash

本质上，我有 6 个球，当我的 showBalls() 函数运行时，我希望每个球（每个都是一个影片剪辑）运行其动画并补间到正确的位置。我希望他们按顺序做。所以 1 个补间球，然后是下一个，然后是下一个，依此类推。

我使用了一堆 if 语句，因为 switch 不起作用，但现在它只是不断向我抛出错误 1046 并告诉我找不到“事件”或编译时常量。

我无论如何都看不到这个，这让我很沮丧。

这是给大家的一些代码。它可能非常混乱，并且会有一种更简单的方法来做到这一点。但我对 AS3 很陌生，所以我看不到任何其他方式。

我试图在这里找到答案，有人告诉我取消嵌套功能。所以我做了。我的一个巢没有问题，但我在这里尝试了两个，但没有奏效。所以我取消嵌套，但无济于事。如果有办法解决这个问题，我将不胜感激。

所以是的，显示的第一个球，补间，一旦补间到达最后一帧，它就会停止并显示与之相关的数字。重复以下 6 个球。

```
function showNumbers()
{
    var count:int = 0;
    var showTimer:Timer = null;
    showTimer = new Timer(3125,8);
    showTimer.start();
    showTimer.addEventListener(TimerEvent.TIMER, showBalls);
    function showBalls(Event:TimerEvent)
    {
        ball1.addEventListener(Event.ENTER_FRAME, ball1stop);
        ball2.addEventListener(Event.ENTER_FRAME, ball2stop);
        ball3.addEventListener(Event.ENTER_FRAME, ball3stop);
        ball4.addEventListener(Event.ENTER_FRAME, ball4stop);
        ball5.addEventListener(Event.ENTER_FRAME, ball5stop);
        ball5.addEventListener(Event.ENTER_FRAME, ball6stop);
        bonusBall.addEventListener(Event.ENTER_FRAME, bonusBallstop);

        function ball1stop(event:Event):void
        {
            if (currentFrame == stopFrame1)
            {
                ball1.stop();
                programNumber1.text = drawnArray[0];
                ball1.removeEventListener(Event.ENTER_FRAME, ball1stop);
            }
        }

        function ball2stop(event:Event)
        {
            if (currentFrame == stopFrame2)
            {
                ball2.stop();
                programNumber2.text = drawnArray[1];
                ball2.removeEventListener(Event.ENTER_FRAME, ball2stop);
            }
        }

        function ball3stop(event:Event)
        {
            if (currentFrame == stopFrame3)
            {
                ball3.stop();
                programNumber3.text = drawnArray[2];
                ball3.removeEventListener(Event.ENTER_FRAME, ball3stop);
            }
        }

        function ball4stop(event:Event)
        {
            if (currentFrame == stopFrame4)
            {
                ball4.stop();
                programNumber4.text = drawnArray[3];
                ball4.removeEventListener(Event.ENTER_FRAME, ball4stop);
            }
        }

        function ball5stop(event:Event)
        {
            if (currentFrame == stopFrame5)
            {
                ball5.stop();
                programNumber5.text = drawnArray[4];
                ball5.removeEventListener(Event.ENTER_FRAME, ball5stop);
            }
        }

        function bonusBallstop(event:Event)
        {
            if (currentFrame == stopFrame7)
            {
                bonusBall.stop();
                programBonusNumber.text = bonusArray[0];
                bonusBall.removeEventListener(Event.ENTER_FRAME, bonusBallstop);
                showTimer.stop();
                fadeAndSort();
            }
        }
        if (count==0)
        {
            ball1.visible = true;

            ball1.play();
            var stopFrame1:int = 75;
            ball1stop();

        }
        else if (count==1)
        {
            ball2.visible = true;
            ball2.addEventListener(Event.ENTER_FRAME, ball2stop);
            ball2.play();
            var stopFrame2:int = 75;
            ball2stop();

        }
        else if (count==2)
        {
            ball3.visible = true;
            ball3.addEventListener(Event.ENTER_FRAME, ball3stop);
            ball3.play();
            var stopFrame3:int = 75;
            ball3stop();

        }
        else if (count==3)
        {
            ball4.visible = true;
            ball4.addEventListener(Event.ENTER_FRAME, ball4stop);
            ball4.play();
            var stopFrame4:int = 75;
            ball4stop();

        }
        else if (count==4)
        {
            ball5.visible = true;
            ball5.addEventListener(Event.ENTER_FRAME, ball5stop);
            ball5.play();
            var stopFrame5:int = 75;

        }
        else if (count==5)
        {
            ball6.visible = true;
            ball6.addEventListener(Event.ENTER_FRAME, ball6stop);
            ball6.play();
            var stopFrame6:int = 75;
            ball6stop();

        }
        else if (count==6)
        {
            bonusBall.visible = true;
            bonusBall.addEventListener(Event.ENTER_FRAME, bonusBallstop);
            bonusBall.play();
            var stopFrame7:int = 75;
            bonusballstop();

        }

    }

    count++;

    mainArray[0] = userNumber1.text;
    mainArray[1] = userNumber2.text;
    mainArray[2] = userNumber3.text;
    mainArray[3] = userNumber4.text;
    mainArray[4] = userNumber5.text;
    mainArray[5] = userNumber6.text;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:20:30.417

我敢打赌这是他遇到问题的事件：

```
event.ENTER_FRAME 
```

并且应该是`Event.ENTER_FRAME`

我也在你的“代码”中找到了这个

`function showBalls(Event:TimerEvent)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:58:34.763

您需要将此行放在文件的顶部，以便 flash 知道在哪里查找事件类

您还需要一个用于 Timer，TimerEvent

```
import flash.events.Event;
import flash.utils.Timer;
import flash.events.TimerEvent; 
```

# c++ - Lua：避免重载 pcall 和 Lua 调用栈

> ID：13606066
> 
> 赞同：2
> 
> 时间：2012-11-28T13:21:53.813
> 
> 标签：c++, lua, access-violation, callstack, stack-corruption

我有一个程序可以使用`lua_pcall`. 似乎如果程序调用 lua 脚本的速度太快，事情就会出错并在最随机的地方导致访问冲突。

我尝试过互斥锁，甚至使用 try/catch 启用 SEH 异常都无济于事。错误函数已经到位，我正在检查所有适当的返回代码；问题是 pcall 深处的实际访问冲突，而不是安全处理的 Lua 错误。

很多时候中断发生在`luaV_execute`，但有时它发生在其他随机的地方。我已经检查以确保推送到堆栈的所有参数都是有效的。

有没有办法强制 Lua 在返回之前完成调用，或者有什么方法可以确保调用堆栈不会损坏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:14:37.987

尽管 Lua 系统作为一个整体是完全可重入的，但单个`lua_State`实例本身并不是线程安全的。

如果您`lua_State`从多个线程访问 a，则应使用互斥锁或其他锁定机制来确保一次只有一个线程可以操纵该状态。同时访问很容易导致您看到的那种损坏。

如果您正在使用多个`lua_State`实例，则每个状态都可以有自己的访问锁；整个 Lua 运行时不需要一个全局锁。

# svn - SVN转储大小混乱

> ID：13606069
> 
> 赞同：2
> 
> 时间：2012-11-28T13:21:59.987
> 
> 标签：svn, svnadmin, svndump

当我使用以下命令在我们的 repo 上运行完整转储时，有人可以教育我吗

*svnadmin 转储/repo > 备份.dump*

这个转储文件大约 90GB

如果我在同一个 repo 上使用以下命令执行转储文件

*svnadmin 转储 /repo -r 21782:HEAD > backup.dump*

这个转储文件输出为 152GB

即使我错过了前 20,000 次修订，这几乎是两倍大，这怎么可能。

我以为它会更小，这与压缩有关吗？

如果您使用修订版转储其未压缩？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:55:13.670

第一个修订版总是“完全扩展”转储，后续修订版作为增量转储。这意味着 rev 21782 中的数据非常大，如果您转储了 rev 21781:HEAD，您可能会看到它更小。

如果第一个修订版被转储为增量，那么您将无法从转储中重新创建它！（明显地）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T01:43:42.890

这基本上是[为什么单个修订版的 SVN 转储大于完整转储的副本？](https://stackoverflow.com/questions/8062691/)这解释了`svn dump`默认情况下，第一个修订版包含整个存储库的完整表示，以确保导出的修订版（在您的情况下为 r21782 到 HEAD）每个都可以成功提交。

那篇文章还提到了解决这个问题的方法（`--incremental`选项。）

# java - 如何使用 Twilio 在通话之间收集密钥？

> ID：13606070
> 
> 赞同：1
> 
> 时间：2012-11-28T13:22:03.173
> 
> 标签：java, twilio, twilio-twiml

我有以下`TwiML`文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
 <Response>     
   <Say> Your call is going to transfer the Receptionist </Say>
     <Dial maxLength="180">
        <Number> 442-333-7271 </Number>
        <Gather numDigits = "9" action = "_actionURL" method="GET">
        <Say> Please press 9 </Say>
    </Gather>
    </Dial> 
```

根据上面的代码，`_actionURL`如果接收者`9`在通话之间按下，我想将流程重定向到。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:57:22.453

尝试：

```
<?xml version="1.0" encoding="UTF-8" ?>
 <Response>     
  <Gather numDigits = "9" action = "_actionURL" method="GET">
   <Say> Your call is going to transfer the Receptionist, please press 9 to go somewhere else </Say>
   <Dial maxLength="180">442-333-7271</Dial>
  </Gather>
 </Response> 
```

# android - 垂直轴的旋转角度

> ID：13606074
> 
> 赞同：4
> 
> 时间：2012-11-28T13:22:19.610
> 
> 标签：android, math, pie-chart, angle, android-wheel

我目前正在尝试创建一个可以调整填充百分比的仪表。我的问题是我根本不擅长数学。我想开始在“北”（第一张图片）中绘制弧线，而不是在“东”中具有 0 度点的普通弧线（如第二张图所示）。

![图 1](../Images/6b1717c06e4691437305c2a8cf3075c2.png) ![图 2](../Images/26154d5eca7d1c30097e7ce1b75a57f8.png)

我希望能够通过沿屏幕拖动/触摸来增加图像 1 中蓝色区域的大小（角度）。现在这些是我现在能够以某种方式做的事情。我面临的真正问题是：

我使用以下代码绘制蓝色区域：

```
mStart = -90;
int degree = (int)((theta + Math.PI) * 180 / Math.PI);
mSweep = degree;

RectF mOvals = new RectF(c.x - outerRadius + circleThickness, c.y - outerRadius + circleThickness, c.x + outerRadius - circleThickness, c.y + outerRadius - circleThickness );

mArcSetLevel = new Path();

if(mArcSetLevel != null ) {
    canvas.drawArc(mOvals, mStart, mSweep, true, arcPaint);
} 
```

将起点设置为 -90 会使它提前 90 度开始。为了跟踪触摸的角度，我使用了这个公式，但这是出错的地方：

```
int py = (int)event.getY() - c.y;
int px = (int)event.getX() - c.x;

theta = (float) ((float)  Math.atan2(py, px) - (Math.PI / 2)); // - Math.PI / 2 to correct -90 start 
```

当我走得超过 270 度时，蓝色区域被重置并以更小的角度从北向西绘制（因为 -90 的“假”开始，如第三张图片所示）。我的数学技能根本不足以让我能够解决这个问题，虽然我能想到为什么会这样，但我似乎找不到解决方案。

![图 3](../Images/ab7580f780143f7809caadf5f29aa2b6.png)

我制作的整个视图的（非常混乱的）代码如下：

```
 private Canvas canvas;  

//Canvas width and height
private int h = -1;
private int w = -1;

//circle properties
private Paint paint;
private Paint arcPaint;
private Path circle;
private Point c;
private int outerRadius;
private int circleThickness = 20;

//point click in wheel
private float theta = 0;

private float mStart;
private float mSweep;
private Paint mBgPaints   = new Paint();
private Path mArcSetLevel;

int padding = 10;

OnMeterWheelChangeListener onMeterWheelChangeListener = null;

public MeterWheel(Context context){
    super(context);
    initCircleSeekBar();
}

public MeterWheel(Context context, AttributeSet attrs) {
    super(context, attrs);
    initCircleSeekBar();
}

private void initCircleSeekBar() {

    canvas = new Canvas();
    circle = new Path();
    paint = new Paint();
    arcPaint = new Paint();
    c = new Point();

    mBgPaints.setAntiAlias(true);
    mBgPaints.setStyle(Paint.Style.FILL);
    mBgPaints.setColor(0x88FF0000);
    mBgPaints.setStrokeWidth(0.5f);

    mArcSetLevel = new Path();

    this.draw(canvas);
}

@Override
protected void onSizeChanged(int width, int height, int oldw, int oldh) {
    // TODO Auto-generated method stub
    super.onSizeChanged(width, height, oldw, oldh);

    w = width;
    h = height;
    Log.i("POWERWHEEL", String.valueOf(w) + "   " + String.valueOf(h));
    c.set(w/2, h/2);
    drawCircle();
}

private void drawCircle() {
    outerRadius = Math.min(h,w)/2;
    circleThickness = (int) (outerRadius*0.15);

    circle.addArc(new RectF(c.x - outerRadius + circleThickness/2, c.y - outerRadius + circleThickness/2, c.x + outerRadius - circleThickness/2, c.y + outerRadius - circleThickness/2 ), 0, 360);
    circle.moveTo(c.x, c.y);
    //paint.setShader(new SweepGradient(w/2,h/2, colourarry, null));
    paint.setColor(Color.GRAY);
    paint.setStyle(Style.STROKE);
    paint.setStrokeWidth(circleThickness);
    paint.setAntiAlias(true);

    arcPaint.setColor(Color.BLUE);
    arcPaint.setStyle(Style.FILL);
    arcPaint.setStrokeWidth(circleThickness);
    arcPaint.setAntiAlias(true);
}

@SuppressLint("DrawAllocation")
@Override
protected void onDraw(Canvas canvas) {
    // TODO Auto-generated method stub
    super.onDraw(canvas);

    if(circle != null){
    //draw circle
        canvas.drawPath(circle, paint);

        mStart = -90;

        int degree = (int)((theta + Math.PI) * 180 / Math.PI);
        Log.d("POWERWHEEL", "" + degree);
        mSweep = degree;

        RectF mOvals = new RectF(c.x - outerRadius + circleThickness, c.y - outerRadius + circleThickness, c.x + outerRadius - circleThickness, c.y + outerRadius - circleThickness );

        mArcSetLevel = new Path();

        if(mArcSetLevel != null ) {
            canvas.drawArc(mOvals, mStart, mSweep, true, arcPaint);
        }
    }

}

@Override
public boolean onTouchEvent(MotionEvent event) {

    if (!isEnabled()) {
        return false;
    }

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            setPressed(true);
            onStartTrackingTouch(event);
            trackTouchEvent(event);
            break;

        case MotionEvent.ACTION_MOVE:
            trackTouchEvent(event);
            break;

        case MotionEvent.ACTION_UP:
            trackTouchEvent(event);
            onStopTrackingTouch();
            setPressed(false);
            invalidate();
            break;

        case MotionEvent.ACTION_CANCEL:
            onStopTrackingTouch();
            setPressed(false);
            invalidate();
            break;
    }

    return true;
}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    int width = MeasureSpec.getSize(widthMeasureSpec);
    int height = MeasureSpec.getSize(heightMeasureSpec);

    setMeasuredDimension(width,height);
}

private void onStartTrackingTouch(MotionEvent event) {

}

private void onStopTrackingTouch() {

}

private void trackTouchEvent(MotionEvent event) {

    int py = (int)event.getY() - c.y;
    int px = (int)event.getX() - c.x;

    theta = (float) ((float)  Math.atan2(py, px) - (Math.PI / 2));
    Log.d("POWERWHEEL", "theta: " + theta);

    this.invalidate();
}

public void setSize(int x, int y){
    h = y;
    w = x;
}

public void setCirleThickness(int t){
    circleThickness = t;
}

public void setOnMeterWheelChangeListener (OnMeterWheelChangeListener listener) {
    onMeterWheelChangeListener = listener;
}

public interface OnMeterWheelChangeListener{
    public void onStartTrackingTouch (MeterWheel colourWheel);
    public void onStopTrackingTouch (MeterWheel colourWheel);
} 
```

提前一百万谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:07:30.830

计算 theta 时，您使用 atan2 以 +/- pi 为单位返回角度。因此，当位于左上象限时，它将返回 -pi/2 到 -pi 范围内的值（假设 y 向下为正，x 向右为正）。您直接减去 pi/2 得到 -pi 到 -3pi/2 的范围。然后在 onDraw 中再次添加 pi（令人困惑），为该象限提供 0 到 -pi/2 的扫描范围。这意味着它将从顶部的起始位置逆时针绘制弧 0 到 pi/2（或 0 到 90 度）。您必须确保您的扫描始终保持在 0 到 pi 的范围内。最好的解决方案是将坐标移动 -pi/2，这样就可以代替 Math.atan2(py, px)，而是执行 Math.atan2(px,-py)，然后如果 theta 为负数，则添加 2*pi。类似的东西（我不写android）

```
theta = (float)  Math.atan2(px, -py);
if (theta < 0) theta += 2 * Math.PI; 
```

然后在 onDraw

```
int degree = (int)(theta * 180 / Math.PI);
Log.d("POWERWHEEL", "" + degree);
mSweep = degree; 
```

如果您仍然遇到问题，请检查 mSweep 是否始终在 0 到 360 度的范围内。

# c - 从多个源文件构建内核模块，其中一个与模块同名

> ID：13606075
> 
> 赞同：31
> 
> 时间：2012-11-28T13:22:21.840
> 
> 标签：c, linux, makefile, linux-kernel

是否可以从多个源文件构建内核模块，其中一个与模块同名？

例如：我想用以下源文件构建“mymodule.ko”：
mymodule.c
mymodule_func.c

这个makefile不起作用：

```
#Makefile
obj-m += mymodule.o
mymodule-objs := mymodule.o mymodule_func.o 
```

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-30T09:12:35.870

我找到了解决方案，我将源文件放在了一个子文件夹中：

生成文件
src/mymodule.c
src/mymodule_func.c

```
#Makefile
obj-m += mymodule.o
mymodule-objs := ./src/mymodule.o ./src/mymodule_func.o

all:
    make -C $(KERNEL_PATH) M=$(PWD) modules

clean:
    make -C $(KERNEL_PATH) M=$(PWD) clean 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-01-13T10:44:04.933

修复内核 make 文件的正确方法如下：

```
# 
obj-m+= my_module.o

#append other source files except my_module.c which would be include by default
my_module-objs+= src1.o src2.o 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-28T14:54:01.557

据我了解，模块名称和源名称不可能相同。最好提供模块名称`module.o`并使用 Makefile 来编译可加载内核模块，如下所示，

**生成文件**

```
# If KERNELRELEASE is defined, we've been invoked from the
# kernel build system and can use its language.
ifneq ($(KERNELRELEASE),)
    **obj-m := module.o
        module-objs := mymodule.o mymodule_func.o**
    # Otherwise we were called directly from the command
    # line; invoke the kernel build system.
    EXTRA_CFLAGS += -DDEBUG
else
    KERNELDIR   := /lib/modules/$(shell uname -r)/build
    PWD         := $(shell pwd)
default:
    $(MAKE) -C $(KERNELDIR) M=$(PWD) modules
endif
clean: 
    $(MAKE) -C $(KERNELDIR) SUBDIRS=$(PWD) clean 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T13:35:56.240

您可以`TARGET`像我在此示例中所做的那样命名您的 .ko 文件：

```
TARGET = can

KDIR = /lib/modules/3.1.10-1.16-desktop/build
PWD := $(shell pwd)

obj-m += $(TARGET).o

can-objs := can_core.o can_open.o can_select.o can_sysctl.o can_write.o \
       can_close.o can_ioctl.o can_read.o can_util.o \
       can_debug.o can_error.o \
       can_async.o can_sim.o

default:
    make -C $(KDIR) M=$(PWD) modules 
```

所以在构建之后，我以一堆目标文件和`can.ko`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-21T09:26:15.503

另一种解决方案是为文件创建符号链接，例如：

```
mymodule.c: ln -sf mymodule.c _mymodule.c 
```

现在，`_mymodule.o`用作对象名称：

```
mymodule-objs := _mymodule.o 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-18T08:37:14.717

如果有人在使用**Xilinx SoC**和**petalinux**时偶然发现了这个问题，请注意生成的 .bb (bitbake) 文件。除了在 Makefile 中指定目标文件：

`modulename-objs+= src1.o src2.o`

所有文件（包括头文件）都必须列在 modulename.bb 文件的`SRC_URI`变量中。

# javascript - 如何从输入 ID 创建具有名称的对象属性？

> ID：13606079
> 
> 赞同：2
> 
> 时间：2012-11-28T13:22:41.067
> 
> 标签：javascript, jquery

```
<input id="some_id" value="some_value"> 
```

我需要`{some_id: some_value}`从上部输入创建（换句话说，我需要用作 id 的属性值的名称）。

我试过了：

```
jQuery('[name="page-numbers[]"]').map(function () {
  return { jQuery(this).attr('id'): jQuery(this).val()};
}).get();
jQuery('[name="page-numbers[]"]').map(function () {
  return {this.id: this.value};
}).get(); 
```

但是每次我在附近遇到错误时`{this.id:`。如果只调用`this.id`或`this.value`或相同的 jQuery - 结果返回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:24:51.190

在您的情况下，您应该对定义的空对象使用[方括号表示法：](http://www.jibbering.com/faq/faq_notes/square_brackets.html)

```
$('[name="page-numbers[]"]').map(function() {
    var obj = {};
    obj[this.id] = this.value;
    return obj;
}).get(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:35:23.823

如果您想创建某种“input_id”：“input_value”键值关联，我会说，您使用的是错误的方法。尝试这个：

```
var assocs = {};
jQuery('[name="page-numbers[]"]').each(function () {
  assocs[this.id] = this.value;
}) 
```

使用 .map 作为结果，您将获得许多一个键/值映射的数组。

# jquery - 将 div 放在页面底部或更大的视口

> ID：13606080
> 
> 赞同：0
> 
> 时间：2012-11-28T13:22:43.320
> 
> 标签：jquery, html, css

如果页面的内容足够长以将其推到底部，我需要在页面底部放置一个带背景的 div

目前我使用此代码

```
#bottomBar {
    position: absolute;
    bottom: 0;
}​ 
```

这样做的问题是，如果页面的内容大于视图端口中可用的内容，则 img 会卡在漂浮在虚无之中

[该脚本何时无法](http://jsfiddle.net/s7tPL/) [运行的示例 该脚本何时运行良好的示例](http://jsfiddle.net/4xUdN/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:27:59.323

尝试这个：

```
#bottomBar {
    position: fixed;
    bottom: 0;
}​ 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T13:31:40.260

如果您的图像加载失败，您将看不到 div。

指定宽度和高度以及背景以查看 div

```
width: 100px;
height: 100px;
bottom: 0px;
position: absolute; 
```

[看小提琴](http://jsfiddle.net/Dineshkani/hW2bB/)

它工作正常

# android - 应用程序在设置两个 onclick 侦听器时崩溃

> ID：13606084
> 
> 赞同：0
> 
> 时间：2012-11-28T13:22:54.383
> 
> 标签：android

我在 onCreate 方法的主要活动中放置了以下代码

```
public class MyTest extends Activity implements OnClickListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
 //... some other code here to init the layout
    Button btn1 = (Button)findViewById(R.id.button1);
    Button btn2 = (Button)findViewById(R.id.button2);
    btn1.setOnClickListener(this);
    btn2.setOnClickListener(this);
} 
```

并将以下代码放在 MyTest 类之外

```
@Override
public void onClick(View v) {
    switch(v.getId()){
        case R.id.button1:
            break;
        case R.id.button2:
            break;
    }
} 
```

运行应用程序时它会崩溃。请有人可以帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:23:51.397

实际上，您在定义之前忘记`setContentView(R.layout.<main_xml>);` 了`onCreate()`Activity `Buttons`。

就像是，

```
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.<main_xml>); // This line is necessary
 .
 .
 . 
```

更新：

你也必须把

```
@Override
public void onClick(View v) {
    switch(v.getId()){
        case R.id.button1:
            break;
        case R.id.button2:
            break;
    }
} 
```

在`onCreate()`方法之外作为您的`MyTest Activity Class`. 不是外面`MyTest Activity Class`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:28:01.830

```
public class MyTest extends Activity implements OnClickListener{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
  setContentView(R.layout.main_xml);
    Button btn1 = (Button)findViewById(R.id.button1);
    Button btn2 = (Button)findViewById(R.id.button2); 

    btn1.setOnClickListener(new OnClickListener()
           {

                    public void onClick(View v) 
                    {
                           Toast.makeText(myactivity.this, "The button=1 was clicked.", Toast.LENGTH_LONG).show();
                    }
           });
    btn2.setOnClickListener(new OnClickListener()
           {

                    public void onClick(View v) 
                    {
                           Toast.makeText(myactivity.this, "The button=2 was clicked.", Toast.LENGTH_LONG).show();
                    }
           });
 }
} 
```

# c#-4.0 - DotNetOpenAuth - OpenId 登录到 Google 每次都要求确认

> ID：13606085
> 
> 赞同：2
> 
> 时间：2012-11-28T13:22:54.523
> 
> 标签：c#-4.0, openid, dotnetopenauth

我正在使用 DotNetOpenAuth 使用 Google OpenId 登录我的网站。简单的代码，之前讨论过很多次：

```
protected static readonly string ENDPOINT = "https://www.google.com/accounts/o8/id";

public void RequestAuthentication(string realm, Uri returnUrl) {
    using (OpenIdRelyingParty openid = new OpenIdRelyingParty()) {
        IAuthenticationRequest openRequest = openid.CreateRequest(ENDPOINT, realm, returnUrl);
        var fr = new FetchRequest();
        fr.Attributes.Add(new AttributeRequest(WellKnownAttributes.Contact.Email, true));
        fr.Attributes.Add(new AttributeRequest(WellKnownAttributes.Preferences.TimeZone, false));
        fr.Attributes.Add(new AttributeRequest(WellKnownAttributes.Name.FullName, true));
        fr.Attributes.Add(new AttributeRequest(WellKnownAttributes.Name.Alias, false));
        fr.Attributes.Add(new AttributeRequest(WellKnownAttributes.Name.Last, true));
        fr.Attributes.Add(new AttributeRequest(WellKnownAttributes.Name.First, true));
        openRequest.AddExtension(fr);
        openRequest.RedirectToProvider();
    }
} 
```

这可行，但每次谷歌要求确认将用户的电子邮件传递到我的网站时，忽略“记住我的决定”复选框！

我已经尝试将 FetchRequest 替换为 ClaimsRequest（使用 AXFetchAsSregTransform）——没有区别。

我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:36:38.627

似乎这是谷歌方面的问题。

在“Безопасность”>“Авторизация приложений и сайтов”（“安全”>“授权网站和应用程序”？）设置下的我的 Google 帐户中，我删除了我网站的令牌（所有重复项），下次登录时我再次检查了“记住”确认页面和中提琴 - 所有未来登录到我的网站都不需要确认。

# java - 编译成功但运行时出错

> ID：13606089
> 
> 赞同：0
> 
> 时间：2012-11-28T13:23:08.913
> 
> 标签：java, super, jcreator

我是java的初学者，当我尝试运行我的程序时感到很困惑......编译后它显示编译成功但是一旦我尝试运行它，它就会向我显示这条消息。

```
 Exception in thread "main" java.lang.NoSuchMethodError: employee.<init>(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;D)V
    at academic.<init>(academic.java:19)
    at testEmployee.main(testEmployee.java:16)

Process completed. 
```

我创建了一个超类和 2 个子类。我仍然不确定我的代码，并且无法自己找到问题。这是我的代码。

雇员.java

```
 public class employee {
    protected String id;
    protected String name;
    protected String ic;
    protected String tel;
    protected double salary;
    protected boolean showEmployee;
    protected static int count;

    public employee(){
        id ="A00000";
        name = "Michele Wong";
        ic = "920412-14-5443";
        tel = "014-6667733";
        salary = 999.00;
    }

    public employee(String id, String name, String ic, String tel, double salary, boolean showEmployee) {
        this.id = id;
        this.name = name;
        this.ic = ic;
        this.tel = tel;
        this.salary = salary;
        this.showEmployee = showEmployee;
        count++;
    }
      public void setId(String id){
        this.id = id;
      }

      public String getId(){
        return id;
      }

      public void setName(String name){
        this.name = name;
      }

      public String getName(){
        return name;
      }

      public void setIc(String ic){
        this.ic = ic;
      }

      public String getIc(){
        return ic;
      }

      public void setTel(String tel){
        this.tel = tel;
      }

      public String getTel(){
        return tel;
      }

      public void setSalary(double salary){
        this.salary = salary;
      }

      public double getSalary(){
        return salary;
      }

      public void setShowEmployee(boolean showEmployee){
        this.showEmployee = showEmployee;
      }

      public boolean getShowEmployee(){
        return this.showEmployee;
      }

      public String toString(){
        return getId()+ "\t\t\t" +getName()+ "\t\t" +getIc()+ "\t\t" +getTel()+"\t\t";
      }
} 
```

管理员.java

```
 public class admin extends employee{
    private String position;
    private String department;

    public admin() {
        super();
    }

    public admin(String id, String name, String ic, String tel, double salary, String position, String department) {
        super(id, name, ic, tel, salary);
        this.position = position;
        this.department = department;

    }

    public void setPosition(String position){
        this.position = position;
    }

    public String getPosition(){
        return position;
    }

    public void setDepartment(String department){
        this.department = department;
    }

    public String getDepartment(){
        return department;
    }

    public double calculateSalary(){
        return super.getSalary() + 100;
    }

    public void DeleteAdmin(){

    }

    public String toString(){
        return super.toString()+ "\t" +getPosition()+ "\t\t\t" +getDepartment()+ "\t\t\t" +calculateSalary();
    }

} 
```

学术.java

```
 public class academic extends employee{
    private String subject;
    private String school;

    public academic(){
        super();
    }

    public academic(String id, String name, String ic, String tel, double salary, String subject, String school){
        super(id, name, ic, tel, salary);
        this.subject = subject;
        this.school = school;

    }

    public void setSubject(String subject){
        this.subject = subject;
    }

    public String getSubject(){
        return subject;
    }

    public void setSchool(String school){
        this.school = school;
    }

    public String getSchool(){
        return school;
    }

    public double calculateSalary(){
        return super.getSalary() + 50;
    }

    public String toString(){
        return super.toString()+ "\t" +getSubject()+ "\t\t" +getSchool()+"\t\t\t" +calculateSalary() ;
    }

} 
```

testEmployee.java

```
 import java.util.*;
    public class testEmployee {
        private static int totalEmployee = 8;
        private static int employeeID = 1000;

        public static void main(String[]args){

            academic[] aca = new academic[4];
            aca[0] = new academic("A10001", "Jennifer Lee", "930307-14-5556", "012-3456712", 990.00, "Programming", "SAS");
            aca[1] = new academic("A10002", "Harry Tan", "950402-12-2233", "012-1234598", 980.00, "Accounting", "SSH");
            aca[2] = new academic("A10003", "Kelvin Woo", "981225-13-1456", "016-5803157", 990.00, "English for Science", "SBS");
            aca[3] = new academic("A10004", "Terry Yap", "911030-14-5678", "014-9126534", 990.00, "Java", "SAS");

            admin[] admin = new admin[4];
            admin[0] = new admin("A10005", "David Foo", "910922-14-9008", "014-1489763", 1000.00, "Head of Division", "SAS");
            admin[1] = new admin("A10006", "Danny Choo", "930302-15-4443", "012-0987634", 990.00, "Head of Division", "SAD");
            admin[2] = new admin("A10007", "Kelly Tan", "900828-13-3213", "016-8903245", 1100.00,"Head of Division","SOT");
            admin[3] = new admin("A10008", "Donald Heng", "900730-12-6789", "016-9823081", 990.00,"Head of Division","SSH");
            MainMenu(aca, admin);
        }

        //Main Menu
        public static void MainMenu(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);

            System.out.println("********************\n");
            System.out.println("*   MAIN MENU   *\n");
            System.out.println("********************\n");
            System.out.println("1\. Display Records \n");
            System.out.println("2\. Search Employee\n");
            System.out.println("3\. Add Employee\n");
            System.out.println("4\. Edit Employee\n");
            System.out.println("5\. Delete Employee\n");
            System.out.println("6\. Exit \n");
            System.out.print("Please enter your selection: ");
            int selection = input.nextInt();

            switch(selection){
            case 1: Display(aca, admin);
            break;

            case 2: Search(aca, admin);
            break;

            case 3: Add(aca, admin);
            break;

            case 4: Edit(aca, admin);
            break;

            case 5: Delete(aca, admin);
            break;

            case 6:
            System.out.println("Exiting Menu. \nThank you for using the system.");
            System.exit(3);
            break;

            default:
            System.out.println(" Wrong input!\n");
            System.out.println(" Please re-enter \n");
            System.out.println("Press Any Key To Continue...");
            input.nextLine();
            input.nextLine();
            MainMenu(aca, admin);
            break;
          }
        }

        //Display Menu
        public static void Display(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.println("********************\n");
            System.out.println("*   DISPLAY MENU   *\n");
            System.out.println("********************\n");
            System.out.println("1\. ACADEMIC \n");
            System.out.println("2\. ADMINISTRATIVE \n");
            System.out.println("3\. EXIT \n");
            System.out.print("Please enter your selection: ");
            int selection = input.nextInt();

            switch(selection){
            case 1: AcaDisplay(aca, admin);
            break;

            case 2: AdminDisplay(aca, admin);
            break;

            default:
            System.out.println(" Wrong input!\n");
            System.out.println(" Please re-enter \n");
            System.out.println("Press Any Key To Continue...");
            input.nextLine();
            input.nextLine();
            MainMenu(aca, admin);
            break;
            }
        }

        //Display Academic Employee Details
        public static void AcaDisplay(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.println("Employee ID \t Employee Name \t\t Employee IC \t Employee Phone Number \t Subject \t\t School \t Salary ");
            for(int i=0; i <totalEmployee; i++){
                System.out.println(aca[i].toString());
            }

            System.out.print("Continue?(Y/N) ");
            char choice = input.next().charAt(0);

            if(choice == 'y' || choice == 'Y'){
                 MainMenu(aca, admin);
              }
              else if(choice == 'n' || choice == 'N'){
                System.out.println("Exiting Menu. \nThank you for using the system.");
                System.exit(3);
              }
              else {
                System.out.print("\nWrong input. \n Please re-type.");
                AcaDisplay(aca,admin);
              }
        }

        //Display Admin Employee Details
        public static void AdminDisplay(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.println("Employee ID \t Employee Name \t Employee IC \t Employee Phone Number \tEmployee Position \t\t Department \tSalary ");
            for(int i=0; i <totalEmployee; i++){
                System.out.println(admin[i].toString());
            }
            System.out.print("Continue?(Y/N) ");
            char choice = input.next().charAt(0);

            if(choice == 'y' || choice == 'Y'){
                 MainMenu(aca, admin);
              }
              else if(choice == 'n' || choice == 'N'){
                System.out.println("Exiting Menu. \nThank you for using the system.");
                System.exit(3);
              }
              else {
                System.out.print("\nWrong input. \n Please re-type.");
                AdminDisplay(aca,admin);
              }
        }

        //Search Employee
        public static void Search(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.print("Enter Employee ID: ");
            String search = input.nextLine();
            for(int i=0; i<totalEmployee; i++){
                if(aca[i].getId() == search){
                    System.out.println("Employee ID \t Employee Name \t\t Employee IC \t Employee Phone Number \t Subject \t\t School \t Salary ");
                    System.out.println(aca[i].toString());
                    }

                else if(admin[i].getId() == search){
                    System.out.println("Employee ID \t Employee Name \t Employee IC \t Employee Phone Number \tEmployee Position \t\t Department \tSalary ");
                    System.out.println(admin[i].toString());
                    }
                else {
                    System.out.print("\nWrong input. \n Please re-type.");
                    Search(aca,admin);
                     }

                }

        }

        //Add Employee
        public static void Add(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.println("********************\n");
            System.out.println("*   DISPLAY MENU   *\n");
            System.out.println("********************\n");
            System.out.println("1\. ACADEMIC \n");
            System.out.println("2\. ADMINISTRATIVE \n");
            System.out.println("3\. EXIT \n");
            System.out.print("Please enter your selection: ");
            int selection = input.nextInt();

            if(selection == 1)
                System.out.println("Academic");
            else
                System.out.println("Administrative");

            Scanner add = new Scanner(System.in);
            char choice;

            do{
                System.out.print("\nEnter New Employee ID :");
                String newID = add.nextLine();
                System.out.print("Enter New Employee Name :");
                String newName = add.nextLine();
                System.out.print("Enter New Employee IC :");
                String newIC = add.nextLine();
                System.out.print("Enter New Employee Phone Number :");
                String newPhoneNumber = add.nextLine();
                System.out.print("Enter New Employee Salary :");
                double newSalary = add.nextDouble();

                if(selection == 1){
                    System.out.print("Enter New Employee Subject :");
                    String newSubject = add.nextLine();
                    add.nextLine();
                    System.out.print("Enter New Employee School :");
                    String newSchool = add.nextLine();
                    aca[totalEmployee] = new academic(newID,newName,newIC,newPhoneNumber,newSalary,newSubject,newSchool);
                    System.out.print(aca[totalEmployee].toString());
                    }
                else{
                    System.out.print("Enter New Employee Position :");
                    String newPosition = add.nextLine();
                    add.nextLine();
                    System.out.print("Enter New Employee Department :");
                    String newDepartment = add.nextLine();
                    admin[totalEmployee] = new academic(newID,newName,newIC,newPhoneNumber,newSalary,newPosition,newDepartment);
                    System.out.print(admin[totalEmployee].toString());
                    }

                System.out.print("\nDo you want to add more ? (Y/N)");
                choice = add.next().charAt(0);

        }while(choice == 'Y' || choice == 'y');
        MainMenu(aca, admin);
        }

        //Edit Employee
        public static void Edit(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.print("Enter the employee's ID");
            String id = input.nextLine();
            for(int i=0; i<totalEmployee; i++){
                if(aca[i].getId() == id){
                    String AcaID = aca[i].getId();
                    System.out.print("Enter employee's name: ");
                    String name = input.nextLine();
                    System.out.print("Enter employee's IC number(eg.930302-14-5434): ");
                    String IC = input.nextLine();
                    System.out.print("Enter employee's Phone Number: ");
                    String tel = input.nextLine();
                    System.out.print("Enter the Salary: ");
                    double salary = input.nextDouble();
                    System.out.print("Enter the Subject: ");
                    String subject = input.nextLine();
                    System.out.print("Enter the School: ");
                    String school = input.nextLine();
                    admin[i] = new academic(id,name,IC, tel, salary, subject, school);
                    }
                    else if(admin[i].getId() == id){
                        String AdminID = admin[i].getId();
                        System.out.print("Enter employee's name: ");
                        String name = input.nextLine();
                        System.out.print("Enter employee's IC number(eg.92030-10-55588): ");
                        String IC = input.nextLine();
                        System.out.print("Enter employee's Phone Number: ");
                        String tel = input.nextLine();
                        System.out.print("Enter the Salary: ");
                        double salary = input.nextDouble();
                        System.out.print("Enter employee's position: ");
                        String position = input.nextLine();
                        System.out.print("Enter employee's department: ");
                        String department = input.nextLine();
                        admin[i] = new academic(id,name,IC, tel, salary, position, department);
                    }
                    else {
                        System.out.print("\nThis ID does not exist. \n Please re-type.");
                        Edit(aca,admin);
                    }
            }
        }

        //Delete Employee
        public static void Delete(employee[] aca,employee[] admin){
            Scanner input = new Scanner(System.in);
            System.out.print("Enter the employee's ID");
            String delete = input.nextLine();
            //int deleteEMP = Integer.parseInt(input);
            for(int i=0; i<totalEmployee; i++){
                if(aca[i].getId() == delete){
                    aca[i].setShowEmployee(false);
                }
                else if(admin[i].getId() == delete){
                    admin[i].setShowEmployee(false);
                }
                else {
                System.out.print("\nWrong input. \n Please re-type.");
                Delete(aca,admin);
              }
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:28:34.377

`Employee`有两个构造函数：一个不带参数，另一个带 4 个字符串，一个双精度和一个布尔值。

在第 19 行中，`academic`您尝试使用 4 个字符串和一个双精度但没有布尔值调用`super`(即)。`employee`由于没有这样的构造函数，`employee`你会得到错误。

此代码不应编译。它确实表明您在编译过程中做了一些奇怪的事情。尝试从头开始编译所有内容，看看是否出现编译错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:30:24.130

我很惊讶这个编译。

在您调用的管理构造函数中

```
 super(id, name, ic, tel, salary); 
```

但是员工没有这样的构造函数。您缺少所需的最后一个参数，它是一个布尔值。

另外：您应该将员工类中的计数初始化为 0 以避免 NullPointer

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:31:03.670

> 编译后它显示编译成功但是一旦我尝试运行它，它就会向我显示以下消息：
> 
> ```
> java.lang.NoSuchMethodError: employee.<init>(... 
> ```

这意味着您需要重新编译依赖于`employee`类构造函数的类。当你这样做时，你很可能会发现你的`academic`类没有编译。

如果您是手动编译（即没有构建工具），那么每当您进行更改时重新编译*所有类是一个好主意。*否则，您将错过由于（例如）您删除或更改了方法构造函数或字段的签名而发生的问题。

与其手动编译，不如使用构建工具或 IDE。我希望他们很快就会教你...

* * *

虽然我引起了您的注意，但您的类名违反了基本的 Java 样式规则。所有类名都应以大写字母开头。更改类名，并重命名源文件以匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:34:36.930

1.  尝试删除所有类文件并尝试重新编译您的 java 源代码。
2.  下次编译时尝试在编译器中使用干净的过程

# android - 在 Web 视图中使用 Facebook SSO 登录？

> ID：13606095
> 
> 赞同：0
> 
> 时间：2012-11-28T13:23:27.120
> 
> 标签：android, facebook, webview, single-sign-on

在我的应用程序中，用户使用 SSO 登录 Facebook。稍后，他导航到在 WebView 中显示的 facebook 页面。在这个 WebView 中他不会登录，这意味着用户需要登录 facebook 两次。

有什么方法可以使用“SSO 登录”自动登录到 WebView？

（我真的到处搜索但没有找到任何答案）

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T18:37:48.530

`WebView`不会与 Facebook 应用程序或网络浏览器共享 cookie/会话，这意味着用户在使用 Facebook URL 时将不得不再次登录。

但是，用户很可能已经在他们的浏览器中登录了 Facebook，因此如果您选择通过浏览器而不是 a 将用户启动到 Facebook 页面`WebView`，用户必须再次登录的机会将会减少，这可能在您的情况下更加优化。

# sql - 遍历数据库中的所有外键并生成路径

> ID：13606097
> 
> 赞同：2
> 
> 时间：2012-11-28T13:23:30.007
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005, common-table-expression

我写了一个查询来找出数据库中所有表之间的主键-外键关系。这只有在我们物理上存在外键时才有效。

*请运行此查询以清楚地了解我的问题。*

```
WITH cte
AS
(
    SELECT 
        fk.create_date
        , fk.modify_date
        , fkc.constraint_object_id AS ConstraintId
        , OBJECT_NAME(fkc.constraint_object_id) AS ConstraintName
        --, fkc.referenced_object_id AS PrimaryKeyTableId
        , OBJECT_NAME(fkc.referenced_object_id) AS PrimaryKeyTableName
        --, fkc.referenced_column_id AS PrimaryKeyColumnId
        , rc.name AS PrimaryKeyColumnName
        --, fk.parent_object_id AS ForeignKeyTableId
        , OBJECT_NAME(fk.parent_object_id) AS ForeignKeyTableName
        --, fkc.parent_column_id AS ForeignKeyColumnId
        , lc.name AS ForeignKeyColumnName
    FROM sys.foreign_key_columns fkc
    INNER JOIN sys.columns rc 
        ON  rc.OBJECT_ID = fkc.referenced_object_id 
        AND fkc.referenced_column_id = rc.column_id
    INNER JOIN sys.foreign_keys fk 
        ON  fk.OBJECT_ID = fkc.constraint_object_id
    INNER JOIN sys.columns lc 
        ON  lc.OBJECT_ID = fk.parent_object_id
        AND fkc.parent_column_id = lc.column_id
)
, cte2(create_date, modify_date, ConstraintName
        , PrimaryKeyTableName, PrimaryKeyColumnName
        , ForeignKeyTableName, ForeignKeyColumnName
        , Hops, path ) AS 
    (
        SELECT
            create_date, modify_date, ConstraintName
            , PrimaryKeyTableName, PrimaryKeyColumnName
            , ForeignKeyTableName, ForeignKeyColumnName 
            , 1 , CAST(QUOTENAME(PrimaryKeyTableName + '.' + PrimaryKeyColumnName) AS VARCHAR(4000))
        FROM cte
    UNION ALL
        SELECT 
            cte.create_date, cte.modify_date, cte.ConstraintName
            , cte.PrimaryKeyTableName, cte.PrimaryKeyColumnName
            , cte.ForeignKeyTableName, cte.ForeignKeyColumnName
            , cte2.Hops +1, CAST(cte2.path + '-> ' +QUOTENAME(cte.PrimaryKeyTableName+ '.' + cte.PrimaryKeyColumnName) AS VARCHAR(4000))
        FROM cte2 INNER JOIN cte ON cte2.ForeignKeyTableName = cte.PrimaryKeyTableName
        AND cte2.ForeignKeyColumnName != cte.PrimaryKeyColumnName
    )
SELECT 
ConstraintName
        , PrimaryKeyTableName, PrimaryKeyColumnName
        , ForeignKeyTableName, ForeignKeyColumnName
        , Hops, path + '-> ' + QUOTENAME(ForeignKeyTableName + '.' + ForeignKeyColumnName) AS Path
FROM cte2 
```

除非我们在数据库中存在复合主键，否则上述查询工作顺利。

假设我有一张桌子

1.  方法（方法 ID，....）
2.  参数（ParameterId，...）
3.  ParameterMethodMap(ParameterId, MethodId) --复合主键
4.  Test(TestId, ParameterId, MethodId....) --复合主键被用作外键
5.  样品（样品 ID，测试 ID ....）

因此，考虑到复合主键场景，当前查询不会生成路径。

我想生成类似的路径。

[Method.MethodId] -> **[ParameterMethodMap.MethodId, ParameterMethodMap.ParameterId]** -> [Test.TestId] -> [Sample.SampleId]

这就是我想合并复合主键的方式。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:42:42.590

好吧，一般来说，因为您不能在 CTE 的递归部分中使用聚合函数，您应该将列连接部分移动到另一个 CTE。你将会有：

```
 ;

WITH CTE_FKCols
AS (
    SELECT FK.NAME
        ,'[' + STUFF((
                SELECT ','
                    ,object_name(Col.object_id) + '.' + col.NAME
                FROM sys.foreign_key_columns C
                INNER JOIN sys.columns Col ON Col.object_id = c.referenced_object_id
                    AND col.column_id = c.referenced_column_id
                WHERE C.constraint_object_id = FK.object_id
                FOR XML PATH('')
                ), 1, 1, '') + ']' Cols
    FROM sys.foreign_keys FK
    )
    ,CTE
AS (
    SELECT fk.create_date
        ,fk.modify_date
        ,fkc.constraint_object_id AS ConstraintId
        ,OBJECT_NAME(fkc.constraint_object_id) AS ConstraintName
        --, fkc.referenced_object_id AS PrimaryKeyTableId
        ,OBJECT_NAME(fkc.referenced_object_id) AS PrimaryKeyTableName
        --, fkc.referenced_column_id AS PrimaryKeyColumnId
        ,OBJECT_NAME(fk.parent_object_id) AS ForeignKeyTableName
    FROM sys.foreign_key_columns fkc
    INNER JOIN sys.foreign_keys fk ON fk.OBJECT_ID = fkc.constraint_object_id
    )
    ,cte2 (
    create_date
    ,modify_date
    ,ConstraintName
    ,PrimaryKeyTableName
    ,ForeignKeyTableName
    ,Hops
    ,path
    )
AS (
    SELECT create_date
        ,modify_date
        ,ConstraintName
        ,PrimaryKeyTableName
        ,ForeignKeyTableName
        ,1
        ,CAST((
                SELECT F.Cols
                FROM CTE_FKCols F
                WHERE F.NAME = cte.ConstraintName
                ) AS NVARCHAR(4000))
    FROM cte

    UNION ALL

    SELECT cte.create_date
        ,cte.modify_date
        ,cte.ConstraintName
        ,cte.PrimaryKeyTableName
        ,cte.ForeignKeyTableName
        ,cte2.Hops + 1
        ,CAST((
                cte2.path + CAST('-> ' AS NVARCHAR(4000)) + (
                    SELECT F.Cols
                    FROM CTE_FKCols F
                    WHERE F.NAME = cte.ConstraintName
                    )
                ) AS NVARCHAR(4000))
    FROM cte2
    INNER JOIN cte ON cte2.ForeignKeyTableName = cte.PrimaryKeyTableName
        AND cte2.PrimaryKeyTableName != cte.PrimaryKeyTableName --Remove self-reference
    )
SELECT *
FROM cte2 
```

# sql - 查询在sql中按行排序

> ID：13606098
> 
> 赞同：1
> 
> 时间：2012-11-28T13:23:31.377
> 
> 标签：sql, database, sqlite

我有一张表，上面有 2 列 varchar 类型。我想查询以在 SQLlite 中按行对它们进行排序。

例如：表

```
COLUMN1  COLUMN2
book     apple
lemon    mango
google   amazon 
```

查询应该返回给我：

```
apple    book
lemon    mango
amazon   google 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:27:59.460

在 SQLite 中，您可以使用 MIN 和 MAX 函数来执行此操作，详见[此处](https://stackoverflow.com/questions/2166690/sqlite-equivilant-of-postgresql-greatest-function)

```
SELECT MIN(column1, column2), MAX(column1, column2) FROM mytable 
```

您最初没有指定数据库类型，所以我为 MySQL 编写了这个。该逻辑也适用于其他人，尽管功能可能不同。

```
SELECT LEAST (column1, column2), GREATEST(column1, column2) FROM mytable 
```

*   [最棒的功能](http://dev.mysql.com/doc/refman/4.1/en/comparison-operators.html#function_greatest)
*   [最小功能](http://dev.mysql.com/doc/refman/4.1/en/comparison-operators.html#function_least)

# javascript - Internet Explorer (7-8-9) 似乎从 JavaScript 中删除了破坏许多功能的字符

> ID：13606099
> 
> 赞同：1
> 
> 时间：2012-11-28T13:23:36.397
> 
> 标签：javascript, wordpress, internet-explorer, internet-explorer-9

我有一个在 WordPress 上运行的[网站。](http://rowbotfitness.com)该站点使用多个 JavaScript 组件。最值得注意的是主页上的幻灯片、[日程安排](http://rowbotfitness.com/schedule)和[联系表格](http://rowbotfitness.com/contact-us)。在 Chrome、Firefox 和其他优秀的浏览器中，所有功能都按预期工作，但在 IE 中则不然。

由于 JavaScript 中出现的问题，所有这些功能都会中断。我在下面包含了几个示例：

IE 调试控制台中的错误：“SCRIPT1006：预期：')' -modernizr.foundation.js?ver=3.4.2，第 4 行字符 94”

```
m.join(a";")(b||"") 
```

服务器上的实际文件：

```
m.join(a+";")(b||"") 
```

IE 调试控制台中的错误：“SCRIPT1006：预期：')' - jquery.js?ver=1.7.2，第 2 行字符 148”

```
d=f("<"">") 
```

服务器上的实际文件：

```
d=f("<"+a+">") 
```

它们都遵循这种缺失字符的模式（最常见的是“+”号）。对于在 Internet Explorer 中会导致此问题的原因，我完全感到困惑，如果知道发生了什么以及如何解决它，我会松一口气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:41:27.210

这与您提供 .js 文件的方式有关。特别是你的modernizr，你带来如下：

```
<script type='text/javascript' src='http://rowbotfitness.com/wp-content/themes/businesspro/core/library/js/foundation/modernizr.foundation.js?ver=3.4.2'></script> 
```

（顺便说一句，你有很多 JS 和 CSS 文件，如果你能将它们结合起来会更好，你的加载顺序也有点可疑，但这不是主要问题）

如果您只是访问 URL：

[http://rowbotfitness.com/wp-content/themes/businesspro/core/library/js/foundation/modernizr.foundation.js](http://rowbotfitness.com/wp-content/themes/businesspro/core/library/js/foundation/modernizr.foundation.js)

...在 Firefox 中，然后查看在您的 Firebug 控制台中弹出的错误，您会在 IE 中看到导致您悲痛的错误：

> 未声明纯文本文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。文件的字符编码需要在传输协议中声明或文件需要使用字节顺序标记作为编码签名。

不确定是什么为您生成了该 JS 文件（使用 ?ver=3.4.2），但您最好直接链接到 JS 文件，然后在您的网络服务器软件中设置正确的 MIME 类型。有关 StackOverflow 的讨论，请参见此处：

[Javascript MIME 类型](https://stackoverflow.com/questions/4101394/javascript-mime-type)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:38:32.057

对此有两个想法：

*   编码不匹配！确定所有文件共享相同的编码并且它们与网络服务器假装提供的编码相匹配？

*   确定没有可能包含 CariageReturn 或 LineFeed 的变量？来自数据库的这些影响可能会发生。这可能会扰乱您的源代码并导致像您上面提到的效果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:40:40.813

您的 HTML[**无效**](http://validator.w3.org/check?uri=http://rowbotfitness.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0&verbose=1&user-agent=W3C_Validator/1.3)，这会导致意外行为。

第一个问题如下

```
<!-- an if list.. -->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US"> 
```

导致 2 个`<html>`元素，其中第二个元素甚至定义了与 DOCTYPE 不同的解析行为（因为意外的第二个标签意味着您现在处于怪癖中）。解决[此问题](https://stackoverflow.com/a/4320189/1615483)后，其他错误消息应该更有意义。

Additionally you are not sending any charset data with the *.js* files, whilst the page does have a charset defined ( *utf-8* ) and this may cause an encoding conflict.

# c# - 尝试连接到 Microsoft Sql 数据库但出现错误

> ID：13606112
> 
> 赞同：0
> 
> 时间：2012-11-28T13:24:05.977
> 
> 标签：c#, sql-server-2008, visual-studio-2008

我正在尝试建立与名为 PrimeMinisters 的 Microsoft Sql Server 速成版数据库的连接并收到以下错误。

```
Cannot open database "PrimeMinisters" requested by the login. The login failed. Login failed for user 'DESKTOP\Arian'. 
```

我假设我需要一个用户名和密码，但由于这仅供家庭使用，我认为连接字符串中不需要用户名和密码。

我将数据库添加为数据库资源管理器中的新连接，这是我添加到事件处理程序的连接字符串。（桌面是我的电脑的名称）

```
 try
    {
        string connect = @"Data Source=DESKTOP\SQLEXPRESS; Initial Catalog=PrimeMinisters; Trusted_Connection=Yes;"; 

        SqlConnection sqlConn = new SqlConnection(connect);
        sqlConn.Open();

        LabMessage.Text = "A connection has been established";
    }
    catch (Exception ex)
    {
        LabMessage.Text = ex.Message.ToString();
    } 
```

如何克服此错误消息并建立与数据库的连接？

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:38:27.643

您的应用程序正在正确建立与 SQL Server 的通信，但服务器未授权您当前的用户 (DESKTOP\Arian) 进行连接。您需要输入允许使用 SQL Server 的帐户的身份验证信息。

SQL Server 允许两种身份验证模式：

1.  Windows 身份验证

针对正在运行连接应用程序的 Windows 帐户执行授权的位置。在您的情况下，您的应用程序在 DESKTOP\Arian 下运行。要使用它，您应该添加`Integrated Security=SSPI`到您的连接字符串。

2.  SQL Server 身份验证

其中帐户仅为 SQL Server 实例创建。这可以在设置期间或稍后通过使用具有足够权限的用户发出适当的命令来完成。要使用这种类型的身份验证，请将集成安全设置为 false ( `Integrated Security=false`) 并设置有效的用户名和密码 ( `User Id=Arian;Password=secretsquirrel`)

如果您忘记了所有密码，您可以[查看此答案以获取有关如何重置密码的说明](https://stackoverflow.com/questions/237006/forgot-sql-server-password)。

# apache - 如何使用callgrind调试单进程模式调用Apache2

> ID：13606113
> 
> 赞同：1
> 
> 时间：2012-11-28T13:24:08.040
> 
> 标签：apache, gdb, valgrind, callgrind

我一直试图让 apache 在信号处理/调试模式下运行，以便将 callgrind 与它一起使用，并有一个简单的单一进程用于调试。

有没有人有在单进程模式下运行 apache 的经验？

我试过跑步`httpd -X`。这可以用单个进程启动 apache，（很好）但是当像这样运行时，还没有找到一种干净的方法来再次关闭它们。唯一可行的方法是`kill -9`. 这也吹走了任何调试输出，所以在使用 callgrind 时不会让我更进一步。对于那些感兴趣的人，我正在运行的完整命令是：

```
valgrind --tool=callgrind  /path/to/apache2/httpd -X 
```

任何想法表示赞赏。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-04-26T19:26:58.760

有两个问题需要克服：

1.  Apache 需要一堆环境变量
2.  Apache 从 root 用户降到 apache/www-data，这会阻止 valgrind 写入文件

在 ubuntu 上，这应该可以解决问题：

```
source /etc/apache2/envvars
valgrind --tool=callgrind /usr/sbin/apache2 -X 
```

在 RHEL/centos/fedora 上（未经测试）：

```
source /etc/sysconfig/httpd
valgrind --tool=callgrind /usr/sbin/httpd -X 
```

加载后，在访问站点之前，使 callgrind 文件成为可写的（valgrind 将在完成后删除临时文件）：

```
chmod 777 /tmp/vgdb* callgrind* 
```

完成后，请记住将 callgrind 文件的权限更改为更安全的权限。

[这是我的博客文章](https://github.com/matiu2/cdnalizer/blob/master/blog/2017-04-26-changing-from-spirit-to-ragel.mkd)，记录了我自己努力完成这项工作的过程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:44:41.410

一个简单`kill -TERM`的针对apache进程应该告诉它关闭。

# objective-c - 细胞标签去哪儿了？

> ID：13606120
> 
> 赞同：1
> 
> 时间：2012-11-28T13:24:31.347
> 
> 标签：objective-c, ios

我创建了自己的类来显示类似电子表格的布局。我想对 UITableViewCells 进行入队和出队。我使用此代码来执行此操作：

```
- (void) enqueueReusableCell: (ABTableViewCell *) cell {    

if (!enqueuedCells[cell.reuseIdentifier])
    enqueuedCells[cell.reuseIdentifier] = cell;
}

- (UITableViewCell *)dequeueReusableCellWithIdentifier:(NSString *)identifier { 
ABTableViewCell *cell;

if (enqueuedCells[identifier]) {
    cell = enqueuedCells[identifier];

    return cell.tableViewCell;
}

return nil;
} 
```

（我有一个包装类，用于在排队存储一些额外数据时保存 UITableViewCell）

问题是，当我将单元格出列并尝试访问子视图时，我什么也得不到。在我的单元格出列后，以下行返回一个 nil 对象。

```
UILabel *label = (UILabel*) [cell viewWithTag:1]; 
```

这是在 XCode 4.5.x 上使用 ARC。有任何想法吗？

完整源代码在这里[https://github.com/AaronBratcher/ABTableView/](https://github.com/AaronBratcher/ABTableView/)
（dequeue 现在只返回 nil 以避免出现问题）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:27:38.133

我建议对 UITableViewCell 进行子类化。我没有看到拥有 UITableViewCell ivar/property 的包装类的优势或意义。只需子类 UITableViewCell 并添加您的扩展属性/功能。

# java - Listview RSS 阅读器崩溃

> ID：13606123
> 
> 赞同：0
> 
> 时间：2012-11-28T13:24:45.073
> 
> 标签：java, android, listview, webview, crash

我正在尝试申请阅读 rss 提要。我制作了应用程序，但它不会加载提要。我会给你代码，这样你就可以告诉我我可以改变什么来使应用程序正常工作。我不知道问题是什么。代码中没有错误，但它不会加载提要。

**ListActivity.java：**

```
package com.listview;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import java.util.HashMap;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.Attributes;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.DefaultHandler;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.net.Uri;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;

public class ListActivity extends Activity {
ListView lv1;
ProgressDialog ShowProgress;
public ArrayList<Post> PostList = new ArrayList<Post>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list);

    lv1 = (ListView)findViewById(R.id.listView1);
    ShowProgress = ProgressDialog.show(ListActivity.this,"","Loading. Please wait...",true);
    new loadingTask().execute("av-gurus.blogspot.com/feeds/posts/default/");

    lv1.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent,View view,
                int position, long id){

            Intent intent = new Intent(Intent.ACTION_VIEW).setData(Uri
                    .parse(PostList.get(position).getUrl()));
            startActivity(intent);
        }
    });
}

class loadingTask extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... urls) {
        SAXHelper sh = null;
        try 
        {
            sh = new SAXHelper(urls[0]);
        }catch (MalformedURLException e){
            e.printStackTrace();
        }
        sh.parseContent("");
        return "";

        }
    protected void onPostExecute(String s) {
        lv1.setAdapter(new EfficientAdapter(ListActivity.this, PostList));
        ShowProgress.dismiss();
    }

}

class SAXHelper{
    public HashMap<String, String> userList = new HashMap<String, String>();
    private URL url2;

    public SAXHelper(String url1) throws MalformedURLException {
        this.url2 = new URL(url1);
    }

    public RSSHandler parseContent(String parseContent) {
        RSSHandler df = new RSSHandler();
        try {

            SAXParserFactory spf = SAXParserFactory.newInstance();
            SAXParser sp = spf.newSAXParser();
            XMLReader xr = sp.getXMLReader();
            xr.setContentHandler(df);
            xr.parse(new InputSource(url2.openStream()));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return df;
    }
}

class RSSHandler extends DefaultHandler {
    private Post currentPost = new Post();
    StringBuffer chars = new StringBuffer();

    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes atts) {

        chars = new StringBuffer();
        if (localName.equalsIgnoreCase("item")) {

        }
    }
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        if (localName.equalsIgnoreCase("title")
                && currentPost.getTitle() == null) {
            currentPost.setTitle(chars.toString());

        }
        if (localName.equalsIgnoreCase("pubDate")
                && currentPost.getPubDate() == null) {
            currentPost.setPubDate(chars.toString());

        }
        if (localName.equalsIgnoreCase("thumbnail")
                && currentPost.getThumbnail() == null) {
            currentPost.setThumbnail(chars.toString());

        }
        if (localName.equalsIgnoreCase("link")
                && currentPost.getUrl() == null) {
            currentPost.setUrl(chars.toString());
        }

        if (localName.equalsIgnoreCase("item")) {
            PostList.add(currentPost);
            currentPost = new Post();
        }

    }

    @Override
    public void characters(char ch[], int start, int length) {
        chars.append(new String(ch, start, length));

}
}
} 
```

**Post.java：**

```
package com.listview;

public class Post {

private String title;
private String thumbnail;
private String url;
private String description;
private String pubDate;

public String getTitle() {
    return title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getThumbnail() {
    return thumbnail;
}

public void setThumbnail(String thumbnail) {
    this.thumbnail = thumbnail;
}

public String getUrl() {
    return url;
}

public void setUrl(String url) {
    this.url = url;
}

public void setDescription(String description) {
    this.description = description;
}

public String getDescription() {
    return description;
}

public void setPubDate(String pubDate) {
    this.pubDate = pubDate;
}

public String getPubDate() {
    return pubDate;
}

} 
```

**高效适配器.java：**

```
package com.listview;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.ArrayList;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.drawable.Drawable;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class EfficientAdapter extends BaseAdapter {
private Activity activity;
private ArrayList<Post> data;
private static LayoutInflater inflater = null;
//public ImageLoader imageLoader;
ViewHolder holder;

EfficientAdapter(Activity a, ArrayList<Post> d) {

    activity = a;
    data = d;
    inflater = (LayoutInflater) activity
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
//  imageLoader = new ImageLoader(activity.getApplicationContext());

}

@Override
public int getCount() {
    return data.toArray().length;

}

@Override
public Object getItem(int position) {

    return position;
}

@Override
public long getItemId(int position) {

    return position;
}

public static class ViewHolder {
    public TextView label;
    public TextView addr;
    public ImageView image;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View vi = convertView;

    if (convertView == null) {
        vi = inflater.inflate(R.layout.row, null);
        holder = new ViewHolder();
        holder.label = (TextView) vi.findViewById(R.id.title);
        holder.addr = (TextView) vi.findViewById(R.id.details);
        holder.image = (ImageView) vi.findViewById(R.id.thumb);
        vi.setTag(holder);
    } else
        holder = (ViewHolder) vi.getTag();

    holder.label.setText(data.get(position).getTitle());
    holder.addr.setText(data.get(position).getPubDate());

    imageLoader.DisplayImage((data.get(position).getThumbnail()), activity,
            holder.image, 72, 72);
    URL url = null;
    try {
        url = new URL((data.get(position).getThumbnail()));
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    InputStream content = null;
    try {
        content = (InputStream)url.getContent();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    Drawable d = Drawable.createFromStream(content , "src"); 
    Bitmap mIcon1 = null;
     try {
         mIcon1 =
                BitmapFactory.decodeStream(url.openConnection().getInputStream());
    } catch (IOException e) {
        e.printStackTrace();
    }
    holder.image.setImageBitmap(Bitmap.createScaledBitmap(mIcon1, 72, 72, false));

    return vi;
}

} 
```

**活动列表.xml：**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".ListActivity" >

<ListView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollingCache="false"
    android:background="#ffffff"
    android:cacheColorHint="#00000000"
    android:id="@+id/listView1">
</ListView>

</LinearLayout> 
```

**行.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/widget30"
android:layout_width="fill_parent" android:layout_height="wrap_content"
android:padding="4dip" xmlns:android="http://schemas.android.com/apk/res/android">
<TextView android:id="@+id/details" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:text="TextView"
    android:textColor="#000000" android:layout_toRightOf="@+id/icon"
    android:layout_alignLeft="@+id/title" android:layout_alignRight="@+id/title"
    android:layout_below="@+id/title" android:layout_marginRight="5px">
</TextView>
<TextView android:id="@+id/title" android:layout_width="fill_parent"
    android:layout_height="wrap_content" android:text="TextView"
    android:textStyle="bold" android:textColor="#000000"
    android:layout_marginTop="5px" android:layout_toRightOf="@+id/icon"
    android:layout_marginRight="5px">
</TextView>
<ImageView android:id="@+id/arrow" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:padding="0px"
    android:layout_marginRight="10px" android:src="@drawable/ic_launcher"
    android:layout_alignRight="@+id/icon" android:layout_alignParentRight="true"
    android:layout_centerVertical="true">
</ImageView>
<ImageView android:id="@+id/thumb" android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_marginRight="10px"
    android:layout_centerVertical="true" android:layout_alignParentLeft="true"
    android:src="@drawable/ic_launcher" android:minWidth="72dip"
    android:minHeight="72dip" android:maxWidth="72dip" android:maxHeight="72dip">
</ImageView>

</RelativeLayout> 
```

登录 [http://pastebin.com/wnEZE92F](http://pastebin.com/wnEZE92F)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:26:26.467

```
"av-gurus.blogspot.com/feeds/posts/default/" 
```

这应该从`http`方案开始 ( `http://`)

# c# - Autofac：根据已注册的项目向容器添加新类型

> ID：13606127
> 
> 赞同：0
> 
> 时间：2012-11-28T13:24:51.843
> 
> 标签：c#, autofac

情况：我们有几个类，注册为接口。这些类也标有自定义属性。我们希望在 App 容器构建结束时遍历所有已注册的组件，并基于 ot 创建新的注册。例如，

```
[CustomAttribute]
public class Foo: IFoo
{
    [NewCustomActionAttribute("Show me your power!")]
    public void Do() {}
} 
```

所以我们正在这样做 -`builder.Register<Foo>.As<IFoo>();`
并且将很多类似的类放入另一个插件中。注册完所有插件后，我们想向构建器添加新类，例如带有标题和模块等元数据的 ICustomAction，然后根据此注册加载它。最好的方法是什么？

更新：

```
var types = // get all registered types
foreach (var typeToProceed in types.Where(_ => _.GetCustomAttributes(typeof(CustomAttribute), false).FirstOrDefault != null)
{
   var customMethodAttributes = // Get NewCustomActionAttributes from this type
   for each customAttr
       builder.Register(new CustomClass(customAttr.Caption, dynamic delegate to associated method);
   end for aech
} 
```

我不想在花瓶引导程序中这样做，因为可能还有很多其他属性。最好的方法是在首先请求此项目（工具栏）时添加（仅一次）新类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:08:17.363

我将创建一个新的扩展方法`RegisterCustomClasses`来处理注册：

```
public static class AutofacExtensions
{
    public void RegisterCustomClasses<T>(this ContainerBuilder builder)
    {
        var methods = typeof(T).GetMethods();
        var attributes = methods.Select(x => new
                                        {
                                            Method = x,
                                            Attribute = GetAttribute(x)
                                        })
                                .Where(x => x.Attribute != null);

        foreach(var data in attributeData)
            builder.RegisterInstance(new CustomClass(data.Attribute.Caption, 
                                                     data.Method));
    }

    private static NewCustomActionAttribute GetAttribute(MethodInfo method)
    {
        return method.GetCustomAttributes(typeof(NewCustomActionAttribute))
                     .OfType<NewCustomActionAttribute>()
                     .FirstOrDefault()
    }
} 
```

用法：

```
builder.Register<Foo>.As<IFoo>();
builder.RegisterCustomClasses<Foo>(); 
```

# iphone - OpenGL es 2.0 iOS 中的球体

> ID：13606130
> 
> 赞同：1
> 
> 时间：2012-11-28T13:25:05.310
> 
> 标签：iphone, objective-c, ios, opengl-es-2.0

> **可能重复：**
> [在 OpenGL ES 中绘制球体](https://stackoverflow.com/questions/10488086/drawing-a-sphere-in-opengl-es)

我已经浏览了很长一段时间，但还没有找到合适的答案。我开始学习Opengl es 2.0（因为我需要在大学做一个项目），最近完成了画一个圆圈。哇！

我看过很多类似的问题，但要么已经过时，要么我太复杂而无法理解。谁能指出我如何在 iOS 上使用 opengl ES 2.0 绘制实心球体的正确方向？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T01:13:39.073

我不确定你已经走了多远，所以我将给出一些我认为可能会有所帮助的一般性说明，并指出我一直在使用的一些资源来爬上学习曲线。

球体是一个足够复杂的对象，你可能不想在代码中生成顶点，因为你可能已经画了圆——你会想要使用像 Blender 或 Maya 或 Houdini 这样的程序，无论你喜欢什么用于构建 3d 对象，然后将其导出。

您的目标是遵循如下工作流程：3D 程序 > .obj 或者可能是 .collada 文件 > OpenGL 可以使用的顶点数组。

您的顶点数组（应该是 C 数组 []，而不是 NSArray）将为每个顶点保存一个 {x,y,z} 位置，您可能还想使用纹理坐标和法线。如果您打算使用纹理，则需要从 3D 程序中导出纹理坐标，如果您打算为对象照明，则需要导出法线。纹理坐标将采用 {s,t} 格式，它将与之关联的顶点连接到矩形纹理上的 2d 坐标。法线将是格式为 {x,y,z} 的向量。tex 坐标和法线可能在同一个数组中，您的顶点位于（交错）或单独的数组中。如果它们是交错的，那么在您的代码中，您将拥有一个 VBO，并且通常更快，但如果不是，您将拥有单独的 VBO - 一个用于位置顶点，

这是我遇到的一个很好的脚本，用于将 .obj 转换为 C 头文件以与 OpenGL 一起使用。因此，从 3D 程序导出到 .obj 后，您会将 .obj 传递给此脚本，它会输出一个 .h 文件： [http ://heikobehrens.net/2009/08/27/obj2opengl/](http://heikobehrens.net/2009/08/27/obj2opengl/)

一旦你有了 C 头文件，你只需 #import "sphere.h" - 然后当你稍后调用 glBufferData 来读取顶点时，你传递 sphere.h 中的数组的名称。

这本书是我在 iOS 上学习 OpenGL 时遇到的最好的书。它对 GLKit 类提供了很好的解释，对初学者很友好：http: [//my.safaribooksonline.com/book/animation-and-3d/9780132478939](http://my.safaribooksonline.com/book/animation-and-3d/9780132478939)

如果它有帮助，这里有一些示例代码，我在几个月前的一次演讲中整理了一些示例代码。它实际上让我们“进入”一个爆炸的球体，让我们滑动旋转： [http ://davidsweetman.com/mobilemeetup-talk-glkit-demo.html](http://davidsweetman.com/mobilemeetup-talk-glkit-demo.html)

# eclipse - Eclipse 外部文本过滤器

> ID：13606131
> 
> 赞同：0
> 
> 时间：2012-11-28T13:25:07.320
> 
> 标签：eclipse, editor

我在 Eclipse 中使用 PyDev 来编辑 Python。

我希望能够通过外部过滤程序（在标准输入上接受输入并写入标准输出的程序）运行一些 Python 行。

我可以配置一个可以修改整个文件的外部工具，或者我可以配置一个接受选定行的工具，但我似乎无法配置一个接受选定行并用它的输出替换文件中的工具. 可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:48:45.910

[https://stackoverflow.com/a/1480922/91238](https://stackoverflow.com/a/1480922/91238)

这个答案让你成功了一半。我不知道如何将外部工具的标准输出输入编辑器。您至少可以从控制台窗格复制/粘贴。

# asp.net - 在 GridView 行数据绑定中禁用动态按钮

> ID：13606133
> 
> 赞同：0
> 
> 时间：2012-11-28T13:25:19.957
> 
> 标签：asp.net

我想禁用绑定到该网格的按钮控件。我正在使用 btnTestMod.Enabled=false; 但它显示“System.NullReferenceException：对象引用未设置为对象的实例。” 请建议更正。

```
protected void gvRootModule_RowDataBound(object sender, GridViewRowEventArgs e)
    {
      if (e.Row.RowType == DataControlRowType.DataRow)
        {
            Button btnTestMod = ((Button)e.Row.FindControl("btnlessontest"));
        }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T13:28:34.227

```
protected void gvRootModule_RowDataBound(object sender, GridViewRowEventArgs e)
{
  if (e.Row.RowType == DataControlRowType.DataRow)
    {
        var button = e.Row.FindControl("btnlessontest") as Button;
        if(button == null) return;

        button.Enabled = false;
    }
} 
```

# selenium - 即使此元素存在，也会得到 NoSuchElementException

> ID：13606134
> 
> 赞同：1
> 
> 时间：2012-11-28T13:25:20.987
> 
> 标签：selenium, selenium-webdriver

亲爱的 Selenium Webdriver 专家，

在“/html/body/form/div[2]/div[4]/div[1]/div/div/div[1]/”上执行 XPath 查询时出现以下异常（在 if 语句中） a”来自[http://www.domain.com.au/Property/For-Sale/House/NSW/Auburn/?adid=2010111460](http://www.domain.com.au/Property/For-Sale/House/NSW/Auburn/?adid=2010111460)：

```
Exception in thread "main" org.openqa.selenium.NoSuchElementException: Unable to locate element: {"method":"xpath","selector":"/html/body/form/div[2]/div[4]/div[1]/div/div/div[1]/a"} 
```

以下是发生此异常的代码片段：

```
WebDriver driver = new FirefoxDriver(firefoxProfile);
driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
driver.get("http://www.domain.com.au/Property/For-Sale/House/NSW/Auburn/?adid=2010111460");

if (driver.findElement(By.xpath("/html/body/form/div[2]/div[4]/div[1]/div/div/div[1]/a")).isDisplayed() && 
    driver.findElement(By.xpath("/html/body/form/div[2]/div[4]/div[1]/div/div/div[1]/a")).getAttribute("href").length() > 0) {
    WebElement photoPageElement = driver.findElement(By.xpath("/html/body/form/div[2]/div[4]/div[1]/div/div/div[1]/a"));
    photoPageURL = photoPageElement.getAttribute("href");
    .....
} 
```

此代码片段已成功从其他属性（例如[http://www.domain.com.au/Property/For-Sale/House/NSW/Auburn/?adid=2010007127](http://www.domain.com.au/Property/For-Sale/House/NSW/Auburn/?adid=2010007127) ）中找到相同的元素。

我正在寻找一个高质量的 XML/XHTML 浏览器来遍历同一个文档，以确定这种异常的原因。

是否可以在没有异常风险的情况下检查元素的存在？我认为 driver.findElement(By.xpath(....).isDisplayed()) 是为了做到这一点。

我在 Windows XP / 7 上运行 Selenium Webdriver 2.25.0、Java 7.0、Netbeans 7.2。

您的建议将不胜感激。

提前致谢，

杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:41:22.893

我建议您开始使用 CSS 和 id 定位器而不是 XPath，以使您的脚本更具可读性和健壮性。CSS 定位器也应该更快，这在运行更大的测试套件时会派上用场。要找出元素定位器，有很多选择：无需安装任何东西，在 Chrome 和 Firefox 中右键单击 -> 检查元素，在 IE 中使用开发者工具。

您的 XPath 定位器可能存在一些问题，导致 NoSuchElementException。如果您期待这一点，您可以捕获异常，但如果关键是获取链接 URL，您可能不想这样做。

例如，查看您首先链接的页面，大图被包裹在一个 a 元素中：

```
<a id="ctl00_ctl00_Content_Content_propertyPhotos_MainImage_MainPhotoLink" class="feature" target="ImageWindow" href="/ore/Public/Gallery/Photo.aspx?adid=2010111460&pic=1&mode=Buy"> 
```

使用 Java 中的 WebDriver 找到带有 id 的元素：

```
WebElement element = driver.findElement(By.id("ctl00_ctl00_Content_Content_propertyPhotos_MainImage_MainPhotoLink")); 
```

然后阅读href：

```
String linkHref = element.getAttribute("href"); 
```

[您可以在此处](http://www.w3.org/TR/CSS2/selector.html)阅读有关 CSS 选择器的信息，使用它们您可以执行以下操作，例如单击WebDriver`<img>`中的 MainImage 内部`<div>`：

```
driver.findElement(By.cssSelector("div#ctl00_ctl00_Content_Content_propertyPhotos_MainImage_upnlHeroImage img")).click(); 
```

# forms - Choices 作为选择字段中的选择选项 输入 symfony2

> ID：13606135
> 
> 赞同：0
> 
> 时间：2012-11-28T13:25:27.947
> 
> 标签：forms, symfony, choice, choicefield, multiple-choice

也许是一个有点令人困惑的问题，但这里是代码的解释：

有没有办法做这样的事情？

```
$builder->add(
            'doYouWantToEnterData',
            'choice',
            array(
                'choices'   => array(
                    0   => 'no',
                    1   => 'choices_name',
                ),
            ),
          'extend' =>true 
        )
        ->add(
            'choices_name',
            'choice',
            array(
                'choices'   => array(
                    0   => 'text_input_name',
                    1   => 'select_box_name',
                ),
            ),
          'extend' =>true 
        )
        ->add('text_input_name' )
        ->add(
            'select_box_name',
            'choice',
            array(
                'choices'   => array(
                    0   => 'choice_1',
                    1   => 'choice_2',
                ),
            ),
        ); 
```

如您所见，**choices_name**是名为**doYouWantToEnterData**的选项中的选项， **choices_name**中的选项是**text_input_name**和**select_box_name**

* * *

有没有办法在 FormType 类中创建这种东西？

:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:43:28.320

不，标准表单组件中没有捆绑此类功能。最好的方法是创建[自定义表单类型](http://symfony.com/doc/2.0/cookbook/form/create_custom_field_type.html)+ 一些 JS 代码来显示/隐藏必要的字段。我建议您观看[此视频](http://www.youtube.com/watch?v=JAX13g5orwo)（有一个选择和可选文本类似问题的示例）。

# wordpress - 获取 Woocommerce 类别缩略图

> ID：13606138
> 
> 赞同：12
> 
> 时间：2012-11-28T13:25:33.717
> 
> 标签：wordpress, taxonomy, woocommerce

我有一个用于 woocommerce 类别页面的自定义模板，仅显示类别。我已经让系统获取子类别列表（通过使用`get_term_children($id, 'product_cat')`and `get_term_by(...)`），但它只返回包含所有必需信息的对象，缩略图数据除外。有谁知道我如何获得该术语的缩略图？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T16:01:07.950

排序它，这是我使用的代码：

```
$thumbnail_id = get_woocommerce_term_meta( $cat->term_id, 'thumbnail_id', true );
$image = wp_get_attachment_url( $thumbnail_id ); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-07-22T13:31:24.053

如果该`get_woocommerce_term_meta()`功能对您不起作用，那么您可以尝试使用该`get_term_meta()`功能。

您可以使用以下代码获取 WooCommerce 产品类别缩略图 -

```
<?php
$thumbnail_id = get_term_meta( $cat->term_id, 'thumbnail_id', true );
$image_url = wp_get_attachment_url( $thumbnail_id ); // This variable is returing the product category thumbnail image URL. 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-05-12T13:17:12.113

```
<?php
$thumbnail_id = get_term_meta( $cat->term_id, 'thumbnail_id', true );
$image_url    = wp_get_attachment_url( $thumbnail_id ); // This variable is returing the product category thumbnail image URL. 
```

**注意：不推荐使用*get_woocommerce_term_meta***

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T19:58:16.140

有一个类似的设置，但是当我使用你所做的时，我实际上并没有得到缩略图文件，我得到了完整的图像文件，所以我使用了这个：wp_get_attachment_thumb_url 这样我的输出 url 将是“../my-images”/image-150x150 .jpg" 并且实际上得到了它来提取缩略图，以防万一有人遇到类似的情况..

# css - CSS 问题：将类应用于滑块图像标签以更改背景颜色

> ID：13606140
> 
> 赞同：2
> 
> 时间：2012-11-28T13:25:51.817
> 
> 标签：css, image, background, tags

一个同事和我已经被一个 CSS 问题难住了几个小时，我们似乎并不确切地知道它为什么会发生。

如果您查看[http://www.currysauto.com/services/brakes/brake-job-rear-disc.aspx](http://www.currysauto.com/services/brakes/brake-job-rear-disc.aspx)，缩略图图像会根据名为 .ndcustomcolorclass 的 css 规则拾取，该规则会将图像变为蓝色。但是，将相同的规则应用于大图像，它似乎不起作用。但是，更具体会更改图像蓝色（假设您要使用 .nivoSlider img，这会使图像变为蓝色）。我的问题是，为什么大图像没有像缩略图那样根据规则改变背景颜色。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:53:49.040

好吧，滑块插件似乎在给你“玩”视觉技巧。元素内的图像`a`不是可见的（你可以分辨，因为它们有`visibility: hidden`）。该插件正在`img`为主图像使用另一个标签，并且稍微向下一点 ( `<img class="nivo-main-image">`)。那是您需要在其上应用`ndcustomcolorclass`课程的图像。问题是图像是动态生成的，所以你可能不能一开始就在它上面添加一个类。我可以看到至少 2 个选项：

*   通过jquery添加类：

    ```
    $(document).ready(function() {
        $("img.nivo-main-image").addClass("ndcustomcolorclass");
    }); 
    ```

*   直接破解 CSS：

    ```
    .nivo-main-image {background: none repeat scroll 0 0 #003D7D;} 
    ```

# php - 在 2 个站点之间生成 PDF

> ID：13606141
> 
> 赞同：5
> 
> 时间：2012-11-28T13:25:53.560
> 
> 标签：php, cakephp, pdf, cross-domain

我正站在一个充满解决问题的潜在方法的十字路口前。我的问题是我想将特定用户推荐给为他们呈现相关 PDF 文件的独特页面。最好，我想将它们引至一个站点，该站点没有相关的 MySQL 数据和用于 pdf 渲染的插件。希望您能阐明我应该使用哪种解决方案。

**参考**

*   **站点 A** - 我更愿意推荐他们访问的站点
*   **站点 B** - 包含 MySQL 数据和 PDF 插件的站点

**信息**

*   这两个站点都是通过 CakePHP 1.3 构建的
*   站点 A 目前没有附加数据库。它仅在对站点 B 的 API 调用上运行。
*   这些 PDF 生成起来不会那么重，尽管找到一个解决方案也能解决这个问题会很有趣
*   对这些 PDF 的引用发生在事件中，并且不会同时发送给成千上万的用户。

# 解决方案#1

将他们推荐给站点 B 并在那里生成所有内容。

**优点：**易于修复。
**缺点：**我不希望这些用户知道站点 B。站点 B 主要用于内部通信，最好让给定的用户离开这个站点。
**想法：**宁可避免这个。

# 解决方案#2

在站点 A 上有一个页面，它[卷曲](http://php.net/manual/en/book.curl.php)一个等于解决方案 #1 的页面，然后输出相同的结果。

**优点：**几乎一样容易修复。
**缺点：**想不出来。
**思考：**浏览器会理解我输出的是 PDF 吗？或者我是否（如果可能）从 cURL 请求中复制标题回复并`header()`在输出之前将它们设置为自己的？

# 解决方案#3

在站点 B 中生成一次 PDF 并将其放置在站点 A 上。然后只需参考 .pdf 链接。

**优点：**加载速度更快。在这种情况下，这并不重要，甚至可能被忽视。
**缺点：**不能轻易修改 PDF 输出。
**思考：**我将如何传输文件？这两个站点位于同一台服务器上，因此只需更改路径即可，但是站点之间的所有其他通信都不需要共享服务器。破坏这种设计真是太可惜了。也许我必须进行高级 cURL 请求并将 pdf 文件作为 POST 从站点 B 发送到站点 A 并上传？不过，这似乎也不是很好的解决方案。

# 解决方案#4

从站点 A 到站点 B 运行 API，以根据来自 url 的 ID 获取相关数据。但也有站点 A 上的 PDF 插件。

**优点：**从某种意义上说，这是一种非常合乎逻辑的方法。
**缺点：**我宁愿只在站点 B 上生成所有 PDF。使管理所有这些变得更容易。
**思考：**我有点不确定这种方法与解决方案 2 相比有多少（如果有的话）更有益。

非常感谢您的时间。请激励给定的解决方案之一，或提出您自己的解决方案。

**编辑：**虽然代码示例总是受到赞赏，但我更感兴趣的是为什么应该使用哪种解决方案或另一种解决方案的共鸣和逻辑。我已经知道如何通过编码解决大多数这些解决方案。对于访问者，请随时链接到有关您的回复的相关功能和方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:39:30.080

看起来您想从公众视线中隐藏站点 B。

最简单的方法是在站点 A 和站点 B 之间创建反向代理。您可以执行类似 sitea.com/pdf-items/ 之类的操作，将服务于 siteb.com/

编辑：

反向代理可以是跨域的，服务器不必共享任何共同的东西，除了站点 A 可以访问站点 B（听起来已经是这样了）

Apache 有一个使用 mod_proxy 的简单方法（[http://httpd.apache.org/docs/2.2/mod/mod_proxy.html](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html)）

一个快速的谷歌提取了一个在 Apache 上设置它的指南。[http://www.apachetutor.org/admin/reverseproxy](http://www.apachetutor.org/admin/reverseproxies)

Nginx 也有一个 [http://www.cyberciti.biz/tips/using-nginx-as-reverse-proxy.html](http://www.cyberciti.biz/tips/using-nginx-as-reverse-proxy.html)

IIS 有点复杂，我从来没有设置过，但根据文档，这种能力确实存在。

编辑2：接近

在这里我们不必担心 PHP 组件。发生的情况是，Apache 服务器将根据指定的代理映射转发请求，例如，如果设置了代理 Sitea.com/pdf siteb.com/，那么 sitea.com/pdf/alpha.pdf 将实际请求 siteb.com/alpha。 .pdf 在此模式中，它将忽略 sitea.com PHP 路由，但将尊重 siteb.com 路由，因为它是一个完整的请求，但由 sitea 的网络服务器完成。

关于兑现，对siteb的请求，这意味着sitea.com/pdf/getpdf.php?id=1实际上会像访问sitea.com/getpdf.php?id=1一样经历所有动作。

或者，如果您想在 siteA.com 上设置 VHOST，例如 pdf.sitea.com，您可以设置 pdf.sitea.com 映射到 siteb.com 的代理，但如果 sitea 和 siteb 都可公开访问，这将毫无用处。

如果您的受众可以使用 sitea.com 并且 siteB 位于访问受限的防火墙后面，则反向代理的效果最好，因此代理将允许 sitea.com 访问 siteb.com 的一部分，否则该部分将无法访问。

通过启用 proxy_mod 并在 VHOST 或服务器配置下设置 ProxyPass 和 ProxyReversePass，将修改的文件是主机的 siteA.com Apache 配置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:34:28.790

您始终可以在站点 B 上创建一个“隐藏”或至少未知的页面，该页面生成 PDF 并直接输出（没有下载对话框）。然后在站点 A 上，您可以直接插入到站点 B 的链接以从站点 B 下载内容，并将其显示给用户。

用户不会知道站点 B 存在，但它会变慢，因为两个服务器之间的数据流量更多。

在站点 B hiddenfile.php 上：

```
<?
$p = new PDFlib();
if ($p->begin_document("", "") == 0) {
    die("Error: " . $p->get_errmsg());
}
$p->set_info("Creator", "Hugo Delsing");
$p->set_info("Author", "Hugo Delsing");
$p->set_info("Title", 'Hi');

$p->begin_page_ext($docWidth, $docHeight, "");

$p->end_page_ext("");
$p->end_document("");

$buf = $p->get_buffer();

$len = strlen($buf);
header("Content-type: application/pdf");
header("Content-Length: $len");
header("Content-Disposition: inline; filename=hello.pdf");
print $buf;
exit;
?> 
```

并在现场 A downloadFile.php

```
<?
$content = implode('', file('siteb/hiddenfile.php?user=1'));
$len = strlen($content );
header('Content-type: application/pdf');
header("Content-Length: $len");
header('Content-Disposition: attachment; filename="downloaded.pdf"');
print $content;
exit;
?> 
```

所以我想我会以不同的方式使用解决方案 B，以保留单独的服务器选项。为什么？所有解决方案都很好，但这曾经对您没有任何不利之处。所以我猜你回答了你自己的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:46:01.080

有趣的问题。从所有不同的解决方案中，我假设您在可以做的事情上非常灵活。

就我个人而言，我会将站点 B 用作带有数据库的作业队列服务器（尽管数据库在不同的服务器上也会更好）。询问用户的电子邮件地址，一旦工作（处理 PDF）完成，他们就会通过电子邮件将其通过电子邮件发送给他们，或者您可以按照我在评论中的建议将他们发送到一个页面，上面写着“生成 pdf，将在 10 内刷新秒”，它会不断刷新，直到找到生成的 PDF。这也将允许它很好地扩展（只需添加更多工作人员）并且不会在生成 PDF 时阻止用户。

您可以使用 Gearman 与 PHP 交互来创建作业队列。

[http://php.net/manual/en/book.gearman.php](http://php.net/manual/en/book.gearman.php)

**优点**

*   扩展性很好 - 如果您需要一次生成更多 PDF，只需添加更多工作人员
*   使用不会在生成 PDF 时认为页面崩溃
*   不仅限于 PDF，您可以在其中排队任何 CPU 密集型作业
*   随着网站流量的增加，不需要被淘汰并用不同的东西替换（只需添加更多的工作人员）
*   允许控制尝试生成 PDF 的进程/线程的数量（例如，apache 将允许一次生成 10 个或更多 PDF - 当直接在 Web 请求过程中完成时，您几乎无法控制它，这将是一种方式攻击者使您的网站崩溃）

**缺点**

*   需要安装和设置 gearman
*   需要您创建 gearman PHP 脚本才能实际生成 PDF

我走这条路的主要原因是用户体验、易于扩展和对工作进程的控制。

**边注**

尽管我确定您有自己的理由，但您对站点 A 和 B 的设置似乎有点奇怪。如果您有两台服务器，最好使用站点 A 上的 nginx 将所有请求代理到内部服务器 B，并在其上安装 Apache、DB 和 gearman。然后，随着站点流量的增长，您可以将应用程序分开以分开服务器。

# c++ - C++ 切片导致泄漏/未定义行为/崩溃

> ID：13606143
> 
> 赞同：1
> 
> 时间：2012-11-28T13:26:03.370
> 
> 标签：c++, object-slicing

是否有任何 C++ 对象切片效果的示例可能导致未定义的行为、内存泄漏或在其他正确的代码集中崩溃？例如，当 class`A`和`B`（继承自`A`）是正确且合理的，但调用 a`void f(A a)`显然会导致讨厌的事情。

它是形成测试问题所必需的。目标是使用示例代码片段了解参与者是否意识到切片现象，该示例代码片段的正确性绝不能是意见问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:35:19.453

如果`A`确实“正确且合理”，那么切片（复制基本子对象）是明确定义的，不会导致您提到的任何问题。如果您希望副本的行为类似于`B`.

如果`A`不能正确复制，那么切片将导致复制该类型对象时出现的任何问题。例如，如果它有一个析构函数删除对象持有的指针，并且复制创建一个指向同一事物的新指针，那么当两个析构函数删除同一个指针时，您将获得未定义的行为。这不是切片本身的问题，而是切片对象的无效复制语义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:33:33.933

你总是可以构建这样一个例子

```
struct A {
  A() : invariant(true) {}
  virtual void do_sth() { assert(invariant); }
protected:
  bool invariant;
};

struct B : A {
  B() { invariant=false; }
  virtual void do_sth() { }
};

void f(A a)
{
  a.do_sth();
} 
```

当然`A`，当复制构造函数/赋值运算符不检查不变量是否为真时，这可以在内部防止。

如果不变量比我的布尔值更隐含，那么这些东西可能很难看。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:46:51.613

只有当您通过指针或对其基类的引用来操作派生类时，对象切片才是真正的问题。然后，派生类的附加数据保持不变，而基础部分的数据可能会被改变。这可能会破坏派生类的不变量。一个简单的例子见[http://en.wikipedia.org/wiki/Object_slicing](http://en.wikipedia.org/wiki/Object_slicing)

但是，我认为这是（派生类的）**设计缺陷。**如果通过任何合法的方法访问一个类，包括那些获取基类的指针或引用参数的方法，都可能破坏它的不变量，那么这个类的设计很糟糕。避免这种情况的一种方法是声明基`private`类，这样派生类就不能通过其基类合法访问。

一个例子是：

```
class A
{
  int X;
  A(int x) : X(x) {}
  void doubleX() { X+=X; }
  /* ... */
};

class B : public A
{
  int X_square;
  B(int x) : A(x), X_square(x*x) {}
  /* ... */      
};

B b(3);
B.doubleX();   /// B.X = 6 but B.X_square=9 
```

从这个例子中也很明显，这是 B 中的一个简单的设计缺陷。在这个例子中，提供

```
void B::doubleX() { A::doubleX(); X_squared=X*X; } 
```

不能解决问题，因为

```
A&a=b;
a.doubleX(); 
```

仍然打破不变量。这里唯一的解决方案是声明基`A`私有，或者更好的是，创建`A`一个私有成员，而不是基，`B`。

# ios - MKNetworkKit 缓存不起作用

> ID：13606153
> 
> 赞同：1
> 
> 时间：2012-11-28T13:26:31.987
> 
> 标签：ios, ios5, ios6, mknetworkkit, mknetworkengine

我正面临 MKNetworkKit 缓存非常不寻常的问题。简而言之，问题是“它不起作用”..！

我创建了一个有问题的简单测试项目。该项目什么都不做，只是向[http://where.yahooapis.com/](http://where.yahooapis.com/)发出一个简单的 GET 请求，以获取城市名称的地址或信息。响应应该在您第一次运行时被 chached，并且从第二次开始，完成处理程序将被调用两次，一次是缓存响应，另一次是获取的响应。正如您在下面看到的，取自[http://blog.mugunthkumar.com/coding/ios-tutorial-image-cache-and-loading-thumbnails-using-mknetworkkit/](http://blog.mugunthkumar.com/coding/ios-tutorial-image-cache-and-loading-thumbnails-using-mknetworkkit/)

> 如果您是第二次调用，MKNetworkKit 会使用缓存数据调用 SAME 完成处理程序。当网络连接正确时，MKNetworkKit 会调用您的完成处理程序两次。首先使用缓存的数据，然后再从服务器获取最新数据。

嗯，不寻常的是，我运行应用程序，它没有缓存，我再次运行应用程序，它再次没有缓存，在一些随机运行后突然缓存开始工作。我删除了应用程序并再次运行它，缓存将无法工作，直到一些随机运行和问题重复..！

仅供参考，我使用了从[GIT](https://github.com/MugunthKumar/MKNetworkKit)下载的最新 MKNetworkkit 。

不确定是我的代码有问题，还是 MKNetworkKit 本身的错误。所以请检查代码，让我知道是我还是 MKNetworkKit 导致了这个问题。

**这是下载示例项目的链接 [https://www.box.com/s/tsfw3z0avpti051xbyhv]** [4](https://www.box.com/s/tsfw3z0avpti051xbyhv)

预先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T10:31:13.260

最后，我能够弄清楚..！所以这就是在缓存期间发生的事情，

> MKNetworkKit 缓存是超轻量级的，它将您的响应缓存在 NSMutableDictionary 中。这不会导致高内存使用吗？是的。当然，但 MKNetworkKit 很聪明。它观察 UIApplicationDidReceiveMemoryWarningNotification 并将字典刷新到磁盘。下次您向缓存的 URL 发出请求时，缓存的数据将被带回内存。所以实际上，它有一个内存缓存和磁盘缓存，并使用最近最少使用的算法将项目刷新到磁盘。MKNetworkEngine 类具有可以被覆盖以控制缓存成本的方法。

所以，发生的事情是，当我第一次运行应用程序时，响应被缓存在“内存”中而不是“磁盘”中。当我冷启动应用程序时，之前缓存的响应从未从“内存”传输到“磁盘”。（这就是为什么应用程序的缓存目录中甚至没有缓存文件的原因......！）因此，successBlock 从未被调用两次，并带有缓存响应，因为没有......！

为了克服这个问题，它只是用一行代码覆盖一个函数......！

```
- (int) cacheMemoryCost
{
    return 0;
} 
```

# video - 为什么容器和编解码器有不同的时基？

> ID：13606155
> 
> 赞同：3
> 
> 时间：2012-11-28T13:26:50.157
> 
> 标签：video, ffmpeg, pts

我使用 ffmpeg 获取视频信息。输出是

```
 Duration: 00:05:57.00, start: 0.000000, bitrate: 611 kb/s Stream #0:0(und): Video: h264 (High) (avc1 / 0x31637661), yuv420p, 808x610, 609 kb/s, 25 fps, 25 tbr, 12800 tbn, 50 tbc 
```

时基用于以某种方式（这也是我的另一个问题）计算何时解码和显示帧，对吧？那么使用谁的时基，容器（12800）还是编解码器（50）？

另一个问题是为什么 tbn=12800 而不是 90000？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T09:40:25.293

两者都是正确的，两者都是不同的。

tbn 是编码器创建流的函数。所以对于 10 fps 的流，它可以是 90000，这意味着每秒 90000 个滴答声，每帧给你 9000 个滴答声。它也可以简单地为 10，这意味着每帧 1 个滴答声（对于相同的 10 fps 流）。

90000 通常用于流媒体级别（想到 TS 流媒体），但编码器不受此约束。这个（tbn）是解码器将使用的东西，而不是使用容器数据的应用程序系统。

如果您有容器，则应使用容器时基和时间戳，因为它在容器中的所有流中都已标准化。您将仅在编解码器解码器中使用像 tbn 这样的参数。

# jsf-2 - 如何从显示的枚举中获取本地化消息

> ID：13606157
> 
> 赞同：0
> 
> 时间：2012-11-28T13:27:02.643
> 
> 标签：jsf-2, properties, localization, enums, el

例如，我有一个

```
enum State { OK, WARN, ERROR } 
```

和 a`message.properties`具有以下键：

```
my.state.OK=Ok
my.state.WARN=Warning
my.state.ERROR=Error 
```

并给定一个具有类型属性的bean `State`，例如，`bean.state`我想显示属性状态的文本。

就像是：

```
#{text['my.state.' + bean.state]} 
```

这似乎是不可能的，因为该`+`运算符不适用于字符串。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:17:53.710

向表示标签键的枚举添加一个额外的属性。

```
public enum State {

    OK, WARN, ERROR;

    private String labelKey;

    private State() {
        this.labelKey = "my.state." + name();
    }

    public String getLabelKey() {
        return labelKey;
    }

} 
```

这样您就可以按如下方式引用它：

```
#{text[bean.state.labelKey]} 
```

这样你就不需要`<ui:param name="msgKey" value="my.state.#{bean.state}" />`在所有地方重复。

### 也可以看看：

*   [如何在 f:selectItem(s) 中使用枚举值](https://stackoverflow.com/questions/8229638/how-to-make-a-dropdown-menu-of-a-enum-in-jsf/8229982#8229982)

# windows-8 - SemanticZoom 滚动不起作用

> ID：13606158
> 
> 赞同：2
> 
> 时间：2012-11-28T13:27:15.983
> 
> 标签：windows-8, windows-runtime, winrt-xaml

我在实施 SemanticZoom 时遇到了一些麻烦。SemanticZoom.ZoomedInView ItemsSource 绑定到我的 ViewModel 中的 CollectionViewSource。ZoomedOutView 也绑定到同一个 CollectionViewSource，但绑定到 CollectionViewSource.View.CollectionGroups。

当我启动应用程序时，一切都很好，信息在两个视图中都完美显示。唯一的问题是，当我单击 ZoomedOutView 中的一个组时，滚动条不会移动并停留在第一个组上。如何使滚动条滚动到所选组？

我通过 ViewChangeStarted 事件尝试了 itemsGridView.ScrollIntoView(...) ，但这没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:07:16.187

如果您在绑定到两个 GridView 的对象上覆盖 Equals，我已经看到过这样的问题。

# xml - 从指定的起始位置读取 XML 文件

> ID：13606164
> 
> 赞同：0
> 
> 时间：2012-11-28T13:27:27.027
> 
> 标签：xml, c#-4.0, lambda, xml-parsing, linq-to-xml

我有一个不断附加的 XML 文件。我需要反复从 XML 中读取数据，但在每次通过时我都不想检索我在上一次运行中处理过的数据。

由于我知道文件在处理时有多长，我想我可以使用文件的长度（减去结尾 /Contacts 标记）来确定我上次离开的位置。知道了这一点，从文件中的特定字节位置开始检索所有联系人标签的最佳方法是什么？

```
<?xml version="1.0"?>
<Contacts>
    <Contact>
      <Name>Todd</Name>
      <Email>todd@blah.com</Email>
  </Contact>
    <Contact>
      <Name>Sarah</Name>
      <Email>sarah@blah.com</Email>
  </Contact>
</Contacts> 
```

此代码块获取所有联系人。我想限制它，所以它只在第一次接触后获取数据（在字节 116 处。）

```
var xdoc = XDocument.Load(PATH_TO_FILE);
var contact = xdoc.Descendants("Contact").Select(x => (string)x).ToArray(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:33:44.393

如果您仍想从特定偏移量中读取数据并保持高水平。这是 XmlTailReader，它将只有结束标记的文档内容放在其他根元素中：

```
class XmlTailReader : XmlReader
{
    private readonly XmlReader _reader;
    private readonly XmlReader _fakeReader;
    private int _level;
    enum Fake { Start, Align, None, End };
    private Fake _fake;

    public XmlTailReader(XmlReader reader, string rootTag = "root")
    {
        _reader = reader;
        _fake = Fake.Start;

        var doc = new XmlDocument();
        var root = doc.CreateElement(rootTag);
        doc.AppendChild(root);
        // make sure that we'll get Element/EndElement
        root.AppendChild(doc.CreateComment("dummy")); 
        _fakeReader = new XmlNodeReader(root);
    }

    private XmlReader Proxy
    {
        get
        {
            switch(_fake)
            {
            case Fake.Start:
            case Fake.Align:
            case Fake.End:
                return _fakeReader;
            default:
                return _reader;
            }
        }
    }

    public override bool Read()
    {
        switch(_fake)
        {
        case Fake.Start:
            if (!_fakeReader.Read()) return false;
            if (NodeType == XmlNodeType.Element)
            {
                ++_level;
                _fake = Fake.Align;
            }
            return true;
        case Fake.Align:
            _fake = Fake.None;
            while(true) // align to first Element
            {
                if (!_reader.Read()) return false;
                if (NodeType == XmlNodeType.Element)
                {
                    ++_level;
                    break;
                }
            }
            return true;
        case Fake.None:
            try
            {
                if (!_reader.Read()) return false;
            }
            catch (XmlException e)
            {
                // if (!e.Message.StartsWith("Unexpected end tag.")) throw;
                // reading of extra-closing tag cause "Unexpected end tag"
                // so use this as event for transition too
                _fake = Fake.End;
                if (!_fakeReader.Read()) return false;
                return true;
            }
            switch(NodeType)
            {
            case XmlNodeType.Element:
                ++_level;
                break;
            case XmlNodeType.EndElement:
                if (--_level == 0)
                {
                    _fake = Fake.End;
                    if (!_fakeReader.Read()) return false;
                }
                break;
            }
            return true;
        default:
            return Proxy.Read();
        }
    }

    public override string Value
    {
        get { return Proxy.Value; }
    }

    public override XmlNodeType NodeType
    {
        get { return Proxy.NodeType; }
    }
    // rest use Proxy property for forwarding
}

void Main()
{
    var xml = "<?xml version=\"1.0\"?>" + @"
<Contacts>
    <Contact>
      <Name>Todd</Name>
      <Email>todd@blah.com</Email>
  </Contact>
    <Contact>
      <Name>Sarah</Name>
      <Email>sarah@blah.com</Email>
  </Contact>
    <Contact>
      <Name>Peter</Name>
      <Email>peter@blah.com</Email>
  </Contact>
</Contacts>";
    const string tag = "</Contact>";
    var xml2 = xml.Substring(xml.IndexOf(tag) + tag.Length);
    using(var sr = new StringReader(xml2))
    using(var xr = XmlReader.Create(sr, new XmlReaderSettings { ConformanceLevel = ConformanceLevel.Fragment, } ))
    using(var xr2 = new XmlTailReader(xr, "xxx"))
    {
        var xdoc = XDocument.Load(xr2);
        xdoc.Descendants("Contact").Dump();
    }
} 
```

请注意，对于此类阅读，ConformanceLevel 应该是 Fragment。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:04:17.667

我找到了一种按索引位置保存/检索的方法。这也可以。

```
int position = 1;
var contacts = xdoc
    .Descendants("Contact")
    .Select((x, index) => new { Contact = x, Index = index })
    .Where(x => x.Index >= position)
    .Select(x => x.Contact); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T15:55:40.470

您可以创建棘手的 Stream，它在自定义位置模拟 Ducument 的 start 元素。它的代码非常粗糙，但它的工作原理

```
void Main()
{
 var xml =
    @"<Contacts><Contact><Name>Todd</Name><Email>todd@blah.com</Email></Contact><Contact>
      <Name>Sarah1</Name>
      <Email>sarah@blah.com</Email>
  </Contact>
  <Contact>
      <Name>Sarah2</Name>
      <Email>sarah@blah.com</Email>
  </Contact>
</Contacts>";

    var ms = new MemoryStream(Encoding.UTF8.GetBytes(xml));
    ms.Position = 74;
    var reader = XmlReader.Create(new CustomReader("<Contacts>",ms));

    var xdoc = XDocument.Load(reader);
    var contact = xdoc.Descendants("Contact").Select(x => x).ToArray();

    contact.Dump();
}

public class CustomReader : Stream
{
    private readonly string _element;
    private readonly Stream _stream;
    private int _offset;

    public CustomReader(string element, Stream stream)
    {
        _element = element;
        _stream = stream;
        _offset = -element.Length;
    }

    public override bool CanRead
    {
        get { return true; }
    }

    public override bool CanSeek
    {
        get { return false; }
    }

    public override bool CanWrite
    {
        get { return false; }
    }

    public override void Close()
    {
        _stream.Close();
        base.Close();
    }

    public override void Flush()
    {
        throw new NotImplementedException();
    }

    public override long Length
    {
        get { throw new NotImplementedException(); }
    }

    public override long Position
    {
        get { throw new NotImplementedException(); }
        set { throw new NotImplementedException(); }
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        if (count == 0) return 0;

        if (_offset < 0)
        {
            var buf = Encoding.UTF8.GetBytes(_element);
            Buffer.BlockCopy(buf, 0, buffer, offset, buf.Length);
            _offset = 0;
            return buf.Length;
        }

        return _stream.Read(buffer, offset, count);
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        throw new NotImplementedException();
    }

    public override void SetLength(long value)
    {
        throw new NotImplementedException();
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T11:51:49.950

如果您不想破坏阅读 XML 的一致性。你不能避免`XDocument`使用一些第一个元素来构建，比如：

```
class XmlSkipReader : XmlReader
{
    private readonly XmlReader _reader;
    private readonly int _skip;
    private int _level, _skipped;
    public XmlSkipReader(XmlReader reader, int skip)
    {
        _reader = reader;
        _skip = skip;
    }

    public override bool Read()
    {
        if (_skipped == _skip) return _reader.Read();
        if (_level < 1)
        {
            if(!_reader.Read()) return false;
            switch(_reader.NodeType)
            {
                case XmlNodeType.Element: ++_level; break;
            }
            return true;
        }
        if(!_reader.Read()) return false;
        switch(_reader.NodeType)
        {
            case XmlNodeType.Element:
                ++_level;
                break;
            default: return true;
        }

        for(; _skipped < _skip; ++_skipped)
        {
            while(_level > 1)
            {
                if(!_reader.Read()) return false;
                switch(_reader.NodeType)
                {
                    case XmlNodeType.Element:
                        ++_level;
                        break;
                    case XmlNodeType.EndElement:
                        --_level;
                        break;
                }
            }
        }
        return _reader.Read();
    }
    // rest is just proxy to _reader
}

void Main()
{
    var xml = "<?xml version=\"1.0\"?>" + @"
<Contacts>
    <Contact>
      <Name>Todd</Name>
      <Email>todd@blah.com</Email>
  </Contact>
    <Contact>
      <Name>Sarah</Name>
      <Email>sarah@blah.com</Email>
  </Contact>
</Contacts>";
    using(var sr = new StringReader(xml))
    using(var xr = XmlReader.Create(sr))
    using(var xr2 = new XmlSkipReader(xr, 1))
    {
        var xdoc = XDocument.Load(xr2);
        xdoc.Descendants("Contact").Dump();
    }
} 
```

# delphi - 使用 Datasnap 的经验

> ID：13606165
> 
> 赞同：1
> 
> 时间：2012-11-28T13:27:32.497
> 
> 标签：delphi, datasnap

我们正在考虑在我们公司使用 Delphi Datasnap Server。但是我们有点担心我们在互联网上找到的文章和支持较少。

**所以我的问题是：** 真的有人在使用 Datasnap 吗？

有多少用户同时使用您的 Datasnap-Application？

您的经验是什么？可靠性如何？

**提前致谢！**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:39:08.537

在过去的一两年中，我已经为少数客户实施（或帮助实施）DataSnap 服务器（一些使用了少数不同的 DataSnap 服务器、DBX 以及 REST）。我不得不问，但我不相信他们获得超过 100 个并发用户连接。DataSnap 中存在一些错误 - 大多数都已解决，尽管 XE3 引入了一个新错误（将在即将到来的更新中修复）。使用 ISAPI 进行部署是最可靠的。我们对 HTTPS 流量使用 SSL 证书。有一些开发人员提供了一些网络研讨会、白皮书和文章。我还编写了 Delphi DataSnap Development 课件手册（即将针对 XE3 进行更新 - 在第一次更新发布后，因此参数化查询错误消失了）...

# jquery - 从 .aspx 页面的服务器端访问每个输入字段的值

> ID：13606167
> 
> 赞同：1
> 
> 时间：2012-11-28T13:27:42.777
> 
> 标签：jquery, asp.net

我只是使用下面的脚本添加新行：

```
<script>
    $(document).ready(function($) {
        // trigger event when button is clicked
        $("button").click(function() {
            // add new row to table using addTableRow function
            addTableRow($("table"));
            // prevent button redirecting to new page
            return false;
        });

        // function to add a new row to a table by cloning the last row and 
        // incrementing the name and id values by 1 to make them unique
        function addTableRow(table) {
            // clone the last row in the table
            var $tr = $(table).find("tbody tr:last").clone();
            // get the name attribute for the input and select fields
            $tr.find("input,textarea").attr("name", function() {
                // break the field name and it's number into two parts
                var parts = this.id.match(/(\D+)(\d+)$/);
                // create a unique name for the new field by incrementing
                // the number for the previous field by 1
                return 'ctl00_ContentPlaceHolder1' + parts[1] + ++parts[2];
                // repeat for id attributes
            }).attr("id", function() {
                var parts = this.id.match(/(\D+)(\d+)$/);
                return 'ctl00_ContentPlaceHolder1' + parts[1] + ++parts[2];
            });
            // append the new row to the table
            $(table).find("tbody tr:last").after($tr);
        };
    });
</script> 
```

现在我想访问`.aspx`页面中每个输入字段的值。

我不知道该怎么做..？

这是它的外观：

![添加行](../Images/fae7e586b5e3b9a58abe853e046d7f64.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:24:01.817

根据您列出的内容，您的行是动态生成的。你必须很聪明才能捕捉到所有的价值观。

下面，我将列出字符串数组中的每一行：row1[]、row2[]。请使用您的 JavaScript 代码使您的输入名称如下所示：

```
<table style="width: 100%;">
    <tr>
        <td>
            <input name="row1[]" type="text" /></td>
        <td><input name="row1[]" type="text" /></td>
        <td>
            <select name="row1[]">
                <option></option>
                <option>val 11</option>
                <option>val 12</option>
            </select></td>
    </tr>
    <tr>
        <td>
            <input  name="row2[]" type="text" /></td>
        <td><input  name="row2[]" type="text" /></td>
        <td>
            <select  name="row2[]">
                <option></option>
                <option>val 21</option>
                <option>val 22</option>
            </select></td>
    </tr>
    <tr>
        <td>
            <input id="Submit1" type="submit" value="submit" /></td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

使用下面的代码在服务器端捕获它：

```
 <%
    if(IsPostBack)
    {
        //pass the form collection object to a variable for easy access
        var r = Request.Form;

        //loop through the form name array
        foreach (var i in r.AllKeys)
        {
            //check if the key starts with row
            if(i.StartsWith("row"))
            {
                //convert it into string array
                string[] sa = r[i].Split(',');

                //use it as you like
                Response.Write(sa[0] + " " + sa[1] + " " + sa[2] +"<br />");
            }
        }
    }
     %> 
```

如果您不明白，请再问我一些问题。

恩瓦福

# php - PHP Wordpress 循环的正确格式

> ID：13606168
> 
> 赞同：0
> 
> 时间：2012-11-28T13:27:42.600
> 
> 标签：php, wordpress, format

这是否是最好的方法 1\. 显示页面的内容 2\. 在页面内容下显示来自特定类别的所有帖子（或帖子的缩略图）

如果我的代码草率，请原谅我。如果有更好的方法可以做到这一点，我非常渴望学习。网站建成后可能会有 30 多个类别。

```
<?php get_header(); ?>

<div id="outerWrapper">
  <div id="pageContent">

    <?php if (have_posts()) : while (have_posts()) : the_post(); ?>
    <h2>
      <?php the_title(); ?>
    </h2>
    <?php the_content(); ?>
    <?php endwhile; endif; ?>

    <?php query_posts('category_name=cold-casting'); ?>
    <?php while (have_posts()) : the_post(); ?>
    <div class="pages"> <a href="<?php the_permalink(); ?>">
      <?php the_post_thumbnail(); ?>
      </a> </div>
    <?php endwhile;?>
    <div class="clear"></div>
  </div>
</div>

<?php query_posts('category_name=casting'); ?>
<?php while (have_posts()) : the_post(); ?>
<div class="pages"> <a href="<?php the_permalink(); ?>">
  <?php the_post_thumbnail(); ?>
  </a> </div>
<?php endwhile;?>

<div class="clear"></div>
</div>
</div>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:43:48.833

您应该改用 wp_query，它提供了更清晰的代码 IMO。但无论哪种方式，您都不必为类别设置两个不同的循环，您可以一次发送两个循环。

query_posts('category_name=cold-casting,casting');

正如尼古拉所说，添加一个 wp_reset_query(); 在您的自定义查询之后。

# actionscript-3 - 在内部组件上调用函数

> ID：13606169
> 
> 赞同：3
> 
> 时间：2012-11-28T13:27:42.990
> 
> 标签：actionscript-3, apache-flex, flex3

我正在使用 flex 3。我在 mx:Canvas 中有一个 mx:Compnonet，我可以在内部组件上调用在 canvas 中声明的函数吗？

我有这样的想法：

```
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml"
       xmlns:flexlib="http://code.google.com/p/flexlib/" xmlns:local="*" 
       horizontalScrollPolicy="off" verticalScrollPolicy="off"
       creationPolicy="all">

    <mx:Script>
        <![CDATA[

            public function someFunction():Boolean {
                //do something
                return someBoolean;
            }

        ]]>
    </mx:Script>

    <mx:Component>
        <mx:HBox width="100%" height="100%" horizontalAlign="left" verticalAlign="middle" paddingLeft="4" paddingRight="8" horizontalGap="4">
            <mx:Script>
                   <![CDATA[
                        private function anotherFunction():Boolean{
                            //do something else
                            //here I need call someFunction()
                        }
                   ]]>
            </mx:Script>

            <mx:Image source="@Embed('/assets/icons/compress_folder_down16.png')" 
                    buttonMode="true" click="this.setFocus(); this.dispatchEvent(new Event('multipleDownload',true));"
                    visible="{this.anotherFunction()}" includeInLayout="{this.anotherFunction()}"/>

        </mx:HBox>
    </mx:Component> 
```

我想在 anotherMethod 中调用 someMethod。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:13:47.533

采用`outerdocument.someFunction();`

# android - 重绘视图不流畅 [Android]

> ID：13606170
> 
> 赞同：0
> 
> 时间：2012-11-28T13:27:44.600
> 
> 标签：android, user-interface, view, visibility

我有一个小按钮，我将它设置为 View.GONE 用于某些部分并返回。当我调用 setVisibility() 时，我看到它有时会分两个阶段绘制按钮，而不是平滑。我有一个条件来检查什么是可见性以及如何更改它（GONE，VISIBLE），在条件之后，我调用 invalidate()，然后调用 requestLayout()。我怎样才能修复它，以便它会顺利改变？

谢谢你。

# regex - Django - 如何获取和解析请求的 URL

> ID：13606173
> 
> 赞同：0
> 
> 时间：2012-11-28T13:27:47.793
> 
> 标签：regex, django, django-urls

我有一个博客应用程序。我想在子域下设置所有用户的帐户。像：

如果有人输入：

```
userx.blog.com 
```

它必须重定向到 userx 的博客页面。我需要获取该 url 并从 [].blog.com 解析它

并呈现请求的用户页面。

当前个人资料网址：

```
url(r'^blog/(?P<username>[-\w]+)/$', view='user_index',
name='user_index'), 
```

在浏览器中：

```
blog.com/blog/username 
```

我希望我解释清楚。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:03:19.353

我对我的一个网站做了类似的事情。我的解决方案是在 apache 中使用 mod_rewrite 重定向`userx.blog.com`到`blog.com/blog/userx`.

[http://httpd.apache.org/docs/2.2/rewrite/](http://httpd.apache.org/docs/2.2/rewrite/)

[Apache基于子域的重写](https://stackoverflow.com/questions/49500/apache-rewrite-based-on-subdomain)

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T15:10:53.940

您还可以制作所谓的“内部重定向”。这将允许您隐藏`userx.blog.com`实际由`blog.com/blog/userx`.

我还建议使用[nginx](http://nginx.org/)服务器，因为它在各方面都优于 Apache :-)

# c# - 如何将静态父节点添加到 Telerik MVC 树视图中是可能的

> ID：13606177
> 
> 赞同：2
> 
> 时间：2012-11-28T13:28:04.310
> 
> 标签：c#

我正在将树视图绑定到模型。我想添加一个“静态”父节点。那可能吗？

这是我现在使用的代码。

```
@(Html.Telerik().TreeView()
    .Name("secteurActivite")
    .ShowCheckBox(true)
    .ExpandAll(false)
    .ShowLines(true)
    .BindTo(Model.secteurActivites, mappings =>
    {
        mappings.For<SecteurActivite>(binding => binding
            .ItemDataBound((item, secteur) =>
            {

                item.Text = secteur.Nom;
                item.Value = secteur.SecteurActiviteId.ToString();
                if (secteur.SecteurActiviteParentId != null)
                {
                    item.ImageUrl = "~/Content/Images/document.bmp";
                }
                else
                {
                    item.ImageUrl = "~/Content/Images/folder.bmp";
                }                        
            })
            .Children(secteur => secteur.SecteurActivite1));                
    })
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:44:50.933

您可以添加一个名为 Root 的新类...

```
public class Root {
  public IEnumerable<SecteurActivite> SecteurActivites { get;set; }
} 
```

然后，而不是模型上的 secteurActivites 列表，使其成为 1 个 Root 对象的列表...

```
public IEnumerable<Root> SecteurActivites = 
    new List<Root> { 
        new Root { SecteurActivites = secteurActivites } 
    }; 
```

然后，为 Root 添加另一个映射：

```
mappings.For<Root>(binding => binding
            .ItemDataBound((item, root) =>
            {
                item.ImageUrl = "~/Content/Images/folder.bmp";
            })
            .Children(root => root.SecteurActivites)); 
```

希望这可以帮助。

# python - 如何对嵌套函数进行单元测试？

> ID：13606178
> 
> 赞同：20
> 
> 时间：2012-11-28T13:28:07.560
> 
> 标签：python, unit-testing, nested-function

`f1()`在以下示例中，您将如何对嵌套函数进行单元测试？

```
def f():
    def f1():
       return 1
    return 2 
```

还是不应该嵌套需要测试的函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T13:47:25.000

[此链接](https://stackoverflow.com/questions/326910/running-unit-tests-on-nested-functions)中有一个类似的问题。但简短的回答：您不能从外部元素访问内部函数。

出于测试目的，也许另一种方法是将内部函数更改为私有外部函数？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-28T13:40:57.177

你没有，因为你做不到。

您将不得不将单元测试限制在外部函数中，或者将内部函数移到其他地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-18T17:34:34.003

我也有同样的疑问，并找到了一种方法来测试内部函数。

```
def outer():
    def inner():
        pass

    if __debug__:
        test_inner(inner)
        # return

def test_inner(f):
    f() # this calls the inner function

outer() 
```

基本上，您可以将内部函数作为参数发送到外部并根据需要对其进行测试。当调用 outer() 时，您的测试将运行，并且由于它是一个闭包，它将保留外部函数的任何额外属性（如变量）。使用列表，您可以发送任意数量的函数。要忽略**if**，一个选项是运行这样的代码：

```
python -O code.py 
```

# mysql - 关于mysql表创建的几个问题

> ID：13606183
> 
> 赞同：2
> 
> 时间：2012-11-28T13:28:22.417
> 
> 标签：mysql

```
CREATE TABLE favorite_food(
    person_id SMALLINT UNSIGNED,
    food VARCHAR(20),
    CONSTRAINT pk_favorite_food PRIMARY KEY(person_id,food),
    CONSTRAINT fk_fav_food_person_id FOREIGN KEY (person_id)
    REFERENCES person (person_id)
); 
```

我是 MySQL 新手，纯粹来自**HTML 和 JS 背景**。我在这里有几个问题。

1.  为什么我们需要给一个 CONSTRAINT 起一个像“ `pk_favorite_food`”这样的名字。其背后的目的和用途是什么？
2.  参考文献是什么意思？
3.  `CONSTRAINT pk_favorite_food PRIMARY KEY(person_id,food),`为什么我们在这里添加两列作为主键。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:36:07.580

### 第一的

> 为什么我们需要给一个 CONSTRAINT 一个名字，比如“pk_favorite_food”。其背后的目的和用途是什么？

您*不需要*为约束分配名称，如果您不这样做，MySQL 将在内部为您分配一个名称。它只是一个标识符，这使得以后修改或删除约束更容易。

如果您创建没有该约束名称的表然后 do `SHOW CREATE TABLE favodite_food;`，您将看到一个名称与您在上面定义的名称有些相似，但由 MySQL 自动分配。自动创建的标识符可能类似于`idx_favorite_food`主键和`favorite_food_ibfk_1`约束`FOREIGN KEY`。

### 第二

> 是什么`REFERENCES`意思？

`REFERENCES`是`FOREIGN KEY`约束中使用的关键字，用于指示该`FOREIGN KEY`列引用哪个表中的列。阅读有关[约束](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)[的 MySQL 参考以`FOREIGN KEY`](http://dev.mysql.com/doc/refman/5.1/en/innodb-foreign-key-constraints.html)获取完整的语法细节。在您的示例中，它看起来有点奇怪，因为它出现在自己的行上。真的，它属于`FOREIGN KEY`定义。

如果您在它所属的行上看到它可能会更清楚一点：

```
/* REFERENCES is a component of this FOREIGN KEY definition */
CONSTRAINT fk_fav_food_person_id FOREIGN KEY (person_id) REFERENCES person (person_id) 
```

### 第三

> `CONSTRAINT pk_favorite_food PRIMARY KEY(person_id,food)`, 为什么我们在这里添加两列作为主键。

2 部分`PRIMARY KEY`称为*复合键*。当您不需要单个标识列（如自动增量值）时使用它，但这两列的组合在表中必须是唯一的，因此也可以唯一地标识表中的行。`person_id`因此，在您上面的示例中，它强制执行任何不能有两行相同的事实`food`：

```
INSERT INTO favorite_food (person_id, food) VALUES (1, 'apples'); /* works */
INSERT INTO favorite_food (person_id, food) VALUES (1, 'bananas'); /* works */
INSERT INTO favorite_food (person_id, food) VALUES (1, 'apples'); /* Fails!  Person 1 already has apples and the pair must be unique */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:38:08.050

我一一回复你：

> **Q**为什么我们需要给一个 CONSTRAINT 一个像“ `pk_favorite_food`”这样的名字。其背后的目的和用途是什么？

**A**在关系模型中，您应该能够区分所有其他行。出于这个原因，您应该选择几个字段，其值对于每一行都是唯一的。对于此字段的值的组合，您可以确定只有一行将捕获此值。

> **Q**参考是什么意思？

**A**这意味着存储在此字段中的值是一种指向其他表行的指针。

> **Q** `CONSTRAINT pk_favorite_food PRIMARY KEY(person_id,food),`为什么我们在这里添加两列作为主键。

**A**因为在这种情况下，一个字段是不够的。如果你只包括一个人，这意味着一个人只能吃最喜欢的食物，如果你只吃食物，这意味着一种食物可以被多个人喜欢。

注意：这是一个基本解释，您应该了解关系模型的完整性参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:38:24.367

我们需要给 CONSTRAINT 一个名称，因为您的数据库会将它存储在某个地方，而该名称就是您获取它的方式。例如运行：

```
select *
from information_schema.table_constraints
where constraint_schema = 'YOUR_DB_NAME' 
```

将向您显示约束列表。他们每个人都有一个名字是有意义的，这样你就可以识别他们。

references 关键字用于定义在外键关系中使用哪个表和列。在这种情况下，您最喜欢的食物中的 person_id 引用了 person 表中的 person_id。

关于主键 - 您使用的数字取决于您作为开发人员。

我建议您花一些时间阅读文档，例如此处的指南：http: [//dev.mysql.com/doc/refman/5.0/en/tutorial.html](http://dev.mysql.com/doc/refman/5.0/en/tutorial.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T13:38:58.703

1.  名称显示了 CONSTRAINT 的功能，因此以后更容易找出它在做什么（例如 pk 表示它是 PRIMARY KEY，fk 是 FOREIGN KEY）
2.  REFERENCES 表示 FOREIGN KEY 的引用表。这意味着表 'favorite_food' 中的 'person_id' 引用了 person 表中的 'person_id'。这样做的效果是，如果您将数据推送到 favourite_food 表中，则您输入的“person_id”必须存在于“person”表中，否则会出现错误，因此您无法将最喜欢的食物添加到不存在的人中。
3.  此 CONSTRAINT 意味着，此表中每个条目的 PRIMARY KEY 由“person_id”和“food”列组合而成，因此您始终拥有唯一的人和食物组合，因此一个人只能拥有一种最喜欢的食物

# android - PagerTabStrip 和 PagerTitleStrip 的区别？

> ID：13606184
> 
> 赞同：23
> 
> 时间：2012-11-28T13:28:23.660
> 
> 标签：android, strip, pager

我们什么时候应该使用 pagerTabStrip，什么时候应该使用 pagerTitleStrip？？？

交互式指示器和非交互式指示器这个词实际上是什么意思？你能解释一下区别吗？你能告诉我用户界面是否有任何区别吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-28T13:48:51.987

`PagerTitleStrip`只是一个包含标题文本的条带；它只是表示我们所在部分的标题。

`PagerTabStrip`非常相似，`PagerTitleStrip`但实际上看起来像一条标签（它在 Play 商店标签中使用，在我看来看起来更好）。

`PagerTabStrip`如果您正在寻找类似选项卡的界面，则可以使用。如果您正在寻找自定义 PagerTitleStrip，您可能希望查看[ViewPagerIndicator](http://viewpagerindicator.com/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-24T11:41:44.230

`PaterTitleStrip`@Binoy Babu 回答添加了关于and的所有细节`PagerTabStrip`。例如，我想添加图像。

参考链接： http: [//blog.csdn.net/harvic880925/article/details/38521865](http://blog.csdn.net/harvic880925/article/details/38521865)

[![在此处输入图像描述](../Images/143f5dab51190200f3a90f4871b7c415.png)](https://i.stack.imgur.com/VLpiH.png) [![在此处输入图像描述](../Images/931956773c1be0df9d7563e059a0cab8.png)](https://i.stack.imgur.com/G1f1y.png)

以上是`PagerTitleStrip`示例，其中只有标题会随着页面滚动而滚动。**这并不表示您当前正在显示哪个页面**

[![在此处输入图像描述](../Images/dd0ba946756bb70d9a8daccd8c9aec91.png)](https://i.stack.imgur.com/viTfH.png) [![在此处输入图像描述](../Images/92924b1ff5097df7542e7fd5288c68c7.png)](https://i.stack.imgur.com/IAwG5.png)

上面的示例与上面的示例`PagerTabStrip`相同，`PagerTitleStrip` **只是**它指示现在正在显示哪个页面。当前可见的选项卡标题**带有下划线**

谢谢

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-10-20T18:09:58.283

`PagerTabStrip`这是一篇旧文章，但我想指出&之间的一些区别`PagerTitleStrip`。

1.  `PagerTabStrip`是交互式的，意味着您可以**单击选项卡在屏幕之间切换**，而您无法使用`PagerTitleStrip`.

2.  `PagerTabStrip`不仅指示部分名称，还具有**描述活动选项卡的选项卡指示器（底部边框）**。相反，`PagerTitleStrip`仅通过标题名称指示我们所在的部分，**但没有选项卡指示符**。

3.  浏览文档，您会注意到`PagerTabStrip`与`PagerTitleStrip`. **示例：** `setTabIndicatorColor()`以编程方式设置选项卡指示器。

4.  正如@BinoyBabu 所提到的，插件[ViewPagerIndicator](http://viewpagerindicator.com/)允许以多种方式自定义寻呼条。

# c++ - 要求 const 对象的 C++ 类

> ID：13606185
> 
> 赞同：1
> 
> 时间：2012-11-28T13:28:25.267
> 
> 标签：c++

首先让我问一个普遍的问题：

*   在我看来，C++ 是一门语言，其目的是提供大量功能，让程序员以他认为合适的任何方式做事时尽可能地灵活。换句话说，它是一种灵活的语言，它允许程序员以比我见过的任何其他语言更多的方式表达自己。这是正确的吗？

然后是一个具体的：

*   为什么 C++ 似乎不支持创建对象只能是的类`const`？换句话说，如果您尝试创建它的非`const`对象，则会出现编译时错误的类。在许多情况下，这似乎是一件很自然的事情，但 C++ 不允许这样做。这背后的原因是什么？（当然，我可以让所有的成员`const`，但这有点逃避。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:32:02.937

您的第一段详细说明了 C++ 如何灵活并允许您表达许多不同的程序。

您的第二段询问为什么 C++ 不允许程序员强制执行具有可疑好处的高度严格的限制（当您可以简单地标记所有成员`const`以实现几乎相同的结果时）。

让我们每个人都从这种二分法中得出自己的结论。:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T14:50:17.887

> 为什么 C++ 似乎不支持创建对象只能是 const 的类？换句话说，如果您尝试创建它的非常量对象，则会出现编译时错误的类。在许多情况下，这似乎是一件很自然的事情，但 C++ 不允许这样做。这背后的原因是什么？

想到的第一个问题是，当拥有一个所有对象都适用的类型`const`是一件自然的事情时。有些类型是自然*不可变*的，在某些语言中甚至建议使尽可能多的类型不可变，但这与强制所有对象都是不可变的不是一回事`const`。

在您的类设计中，控制您的任何成员函数是否修改对象的状态以实现不可变对象是微不足道的。然后封装会发挥它的魔力，如果你不公开任何变异函数，那么类型是*不可变*的，并且与`const`. 您还可以（如果您想要额外的安全性）限定您的所有成员**数据**，`const`以便让编译器告诉您您是否在自己的代码中违反了自己的约束。请注意，强制所有对象`const`隐式会将您的所有成员数据标记为`const`，并且您的非常量函数**无用**。

既然高层次的效果可以通过不同的方式以很少的成本实现，你为什么要让一门复杂的语言变得更加复杂而没有附加价值呢？

虽然上面的问题似乎是夸夸其谈，但事实并非如此。考虑扩展语言的标准之一是*投资回报*：如果没有它，我们将能够用这个功能做什么？（即这是一个启用特性吗？）如果答案是什么，那么下一个问题是与当前状态相比，使用此特性的程序员的生活会简单多少？（对于非启用功能，添加它们有什么价值？）

在*启用*类别中，示例将是*rvalue-references*；如果没有该语言功能，您将无法实现*完美转发*，也无法实现*移动语义*。在第二类中，您可以考虑 lambdas——没有它们就无法使用 lambdas 做任何事情——它的价值在于简化用户代码（必须进行复杂的代码：创建一个仿函数，声明正确的类型，提供一个构造函数来初始化——执行捕获——成员......）但是使用 lambdas 代码变得更加简单。请注意，Sutter 花了很多时间来说服 Stroustrup lambda 具有价值。

在您的情况下，您所要求的不是启用功能，并且支持没有该功能的用例的成本足够低，以至于它不能将其作为核心语言功能提供。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T13:41:16.063

C++ 语言设计的关键在于它以非常低（通常为零）的成本提供抽象。使用类并不比在 C 中提供结构和相关函数更昂贵，但是编译器可以对您的代码实施限制，从而实现类的语义优势。这对于模板、引用、lambda、复制/移动语义、字符串、I/O 等也是如此。您无需为不使用的东西付费，而当您使用某些东西时，您只需支付很少的费用。

C++ 的另一个重要设计原则是它不提供无法从其他语言特性轻松构建的语言特性，或者不提供对作者有用的抽象形式的语言特性。每个语言特性都是一个构建块，可以用来制作一个完全表达的程序。这*有助于*灵活性。如果该语言要提供您正在寻找的功能，那将降低这种灵活性。如果你希望你的对象的状态`const`不管客户想要如何使用它，你需要让你的对象的每个成员`const`- 成员是你的对象的状态。C++ 不想给你绝对的一切。它只是为您提供了必要的工具来以最低的成本编写完全表达的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:29:44.583

只需将您的类实例创建为`const`. 这将确保所有内部结构都是`const`.

例如`const MY_TYPE obj;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-06T08:45:13.720

这种情况我已经好几次了。也就是说，我设计了一个类，由于不可接受的性能要求，它基本上是不可变的。不可变的意思是它的实例可以在构造时定义并且永远不会修改。实际上，它的所有成员函数都是`const`. （好吧，还有一个附带问题，因为它是否仍然可以分配，但让我们继续吧）。

能够强制使用声明实例`const`以使意图更加明显会很好。

我不认为 C++ 在不添加间接级别的情况下支持这一点，即通过 const 指针访问对象并禁用直接构造。（或者甚至更好`unique_ptr`）。

```
struct A{ // this class is immutable, so in princple `A a` and `A const a` should behave the same
    int f() const{return 5;}
    private:
    A(){}
    public:
    template<class... Args>
    static A const* make_const(Args&&... args){return new A(std::forward<Args>(args)...);}
};

int main(){
    std::unique_ptr<A const> a(A::make_const());
    std::cout << a->f() << std::endl;
} 
```

请注意，以下内容不会按预期编译：

```
A a; // doesn't compile because the constructors are private 
```

也不

```
std::unique<A> a(A::make_const()); // make creates pointers to const, so this doesn't compile. 
```

只有以下编译，并且您实际上是在强制执行`const`：

```
std::unique_ptr<A const> a(A::make()); 
```

`std::indirect` [可以通过使用http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0201r1.pdf](http://open-std.org/JTC1/SC22/WG21/docs/papers/2016/p0201r1.pdf)使其变得更好，并且在未来重载`operator.`也会有所帮助。

当然，更便宜的替代方法是在名称中给出类`const`的名称，`struct A_const{...`或者`struct cA{...`暗示这才`const`有意义。（也许，如果你决定以后有变异的成员，你可以从这里继承，`struct A : A_const{...`）。

# javascript - 写一个库，什么结构？

> ID：13606188
> 
> 赞同：27
> 
> 时间：2012-11-28T13:28:30.967
> 
> 标签：javascript

我正在写一个图书馆。现在，我将所有内容都写在一个 .js 文件中，如下所示：

```
function doThis() {}
var thisVar = 5; 
```

我不确定这是否正确，所以我考虑了：

```
function Lib() {
  this.doThis = function() {}
  this.thisVar = 5;
}

var lib = new Lib(); 
```

然后，在主程序文件上，我必须用“lib.”来调用所有内容，例如“lib.thisVar”或“lib.doThis();”。

有什么想法会更好，或者它们都可以接受吗？先感谢您。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-28T13:35:07.213

为了避免混淆全局命名空间，我使用了这样的结构：

```
var MyLib = {
    vars: {
        var1: 'value1',
        var2: 'value2'
    },
    func1: function () {
        return this.vars.var1;
    },
    func2: function () {
        alert("This is func2");
    }
};

MyLib.func1();
MyLib.func2(); 
```

您会注意到我将所有变量都放入了它们自己的子对象中，这样做纯粹是为了便于阅读和开发。

* * *

**编辑1：**

这是我使用的另一种*方法*

```
var MyLib = (function MyLib() {
    var _privateVars = {
        "someVar": "This value made public by `someMethod`",
        "privateVar": "Can't see this value"
    };

    // Return the constructor
    return function MyLibConstructor() {
        var _this = this; // Cache the `this` keyword

        _this.someMethod = function () {
            // Access a private variable
            return _privateVars.someVar;
        };

        _this.someOtherMethod = function () {
            // Some other functionality
        };
    };
}());

var myLib = new MyLib(); // invoke

console.log( myLib.someMethod() ); 
```

该结构利用[JS 闭包](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Closures)和构造函数，因此很容易将私有变量保持私有。

**编辑2：**

此外，我还使用了不返回构造函数的不同闭包设置（例如`var x = new MyLib();`）。

```
(function(window) {
    var _private = {},
        methods = {},
        topic, init;

    methods.set = function(value) {
        // Set the property & value
        _private[topic] = value;
        return this;
    };

    // A simple get method
    methods.get = function(callback) {
        var response = null;

        // Return the value of topic (property) in a callback
        if (!!callback && typeof callback === 'function') {
            if (_private.hasOwnProperty(topic)) {
                response = _private[topic];
            }
            callback.call(this, response);
        }
        return this;
    };

    // Init method setting the topic and returning the methods.
    init = function(_topic) {
        topic = _topic;

        return methods;
    };

    // Exposure when being used in an AMD environment, e.g. RequireJS
    if (typeof define === 'function' && define.amd) {
        define(function() {
            return init;
        });
        return;
    }

    // Exposure when being used with NodeJS
    if ('undefined' !== typeof module && module.exports) {
        module.exports = init;
        return;
    }

    // Last-in-the-line exposure to the window, if it exists
    window.myLib = init;

    // This line either passes the `window` as an argument or
    // an empty Object-literal if `window` is not defined.
}(('undefined' !== typeof window) ? window : {})); 
```

并在行动中看到它：

```
myLib('something').set('made public, outside of the closure by the `get` method');

myLib('something').get(function(a){
  console.log(a);
}); 
```

还请看一下我公开的方式`myLib`，考虑到它在哪里运行，以及它是如何被包含在内的。

**编辑 3 (7/2017):**

作为一个全栈（w/Node.js）JavaScript 工程师，随着 Browserify 的出现，我完全推荐使用 Nodejs 风格的`module`模式，利用 Gulp 或 Grunt 作为构建系统来编译多文件（解耦，更小代码位）到一个库中。

该模型有助于鼓励采用更实用的方法，允许开发人员将库中更常见的功能抽象到单独的文件中，从而使开发变得更加容易。

哦，使用 ES6！

```
// file: src/divideIntByFour.js

const divideIntByFour = (int) => {
    return int / 4;
};

module.exports = divideIntByFour; 
```

...作为一个简单的例子

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-28T13:33:21.500

查看 JavaScript 模块模式。

[http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

你可以考虑让你的库与 require.js 兼容，这是一个可以做这种事情的框架。

[http://requirejs.org](http://requirejs.org)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-28T13:31:12.603

理论上两者都是可以接受的。但是两者都存在与应用程序中使用的其他部分/库发生命名冲突的风险。

在第一种情况下，您冒着为单个函数命名冲突的风险，而在后一种情况下，您冒着为库包装器 ( `Lib`) 选择的函数命名冲突的风险。

首选方法是将它们包装在单独的命名空间中，如本页所示：

[http://frugalcoder.us/post/2010/02/11/js-classes.aspx](http://frugalcoder.us/post/2010/02/11/js-classes.aspx)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-28T13:32:19.633

是的，后一种方法更好，因为它不会创建许多全局变量（“全局范围污染”），而是将它们命名在一个对象上。

但是，不需要构造函数 ( `Lib`)，您`lib`只需实例化一次（遵循单例模式）；你不需要原型。相反，使用简单的对象字面量：

```
var lib = {
    doThis: function() {
    },
    thisVar: 5
}; 
```

对于私有（虽然是静态的）变量和更好的代码组织，还可以查看[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)（或[此处](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)）：

```
var lib = (function(){
    var thisVar = 5;
    function doThis() {}
    return { // "export"
        doThat: doThis
    };
})(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-22T09:57:05.510

帖子很旧，但也许我的 2 美分可能会有所帮助。我已经看到并使用多个库做到了这一点：

```
nameOfLibrary = function() { //name of library needs to be unique enough not to conflict with anyones code
  nameOfLibrary = {};

  //you can declare variables or functions only visible to this scope anywhere here
  var randomVar = 'testVar';
  function onlyVisibleHere() { /* doSomething */ }

  //if you want functions visible to outside set them like so 
  nameOfLibrary.nameOfFunction = function() {
    //code to run
  }

  //lastly return your library
  return nameOfLibrary;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-06-02T15:22:31.803

`UMD`一般都是用的。

```
(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    (global.MyLibrary = factory());
}(this, (function () { 'use strict';

  // Private implementation here

  let secret = "message";

  // Whatever is returned is what `global.MyLibrary` will be
  return {
     getSecret: () => secret
  };

})));

console.log(MyLibrary.getSecret()); // "message"
console.log(secret); // Uncaught ReferenceError: secret is not defined 
```

这是一个立即使用 2 个参数调用的 IIFE：`this`和一个函数表达式，它们分别是参数`global`和`factory`。这使您的实现范围保持私有并防止命名冲突。

如果脚本在浏览器中运行，`this`将是`window`，所以 window.MyLibrary 将等于`factory()`第二个参数中函数表达式返回的结果。这是库的 API。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T13:31:02.260

后者更可取。特别是在编写库时，尽可能避免污染全局命名空间很重要。您的代码需要尽可能少地干扰现有代码。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-02-24T16:04:51.457

第二种方法是推荐的做法，但可以通过创建新的命名空间来改进。优点是您将能够避免可能发生的所有名称冲突，而且您将对代码有更好的控制。我创建了一个名为“MyNamespace”的命名空间，并将我的 Library 类存储在其中。这样即使有任何其他类名为“库”的文件，也不会发生名称冲突。

```
(function($){
    $.Library = function(){
        this.memory = {}; 
        this.doSomething  = function() {};
    };

$.Library.prototype = { //these will be common for all the objects 
    commonFunction : function() {

    },
    function2 : function() {

    }
};

})(MyNameSpace); 
```

使用下面的代码，您可以为 Library 类实例化新对象。

```
<script>
var lib = new MyNamespace.Library;
</script> 
```

# ruby-on-rails - Rails：基于另一个字段以编程方式保存和更新数据库中的数据

> ID：13606194
> 
> 赞同：0
> 
> 时间：2012-11-28T13:28:52.360
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid

我正在使用 Rails 3 和 mongoid。

我想根据另一条记录中的值保存或更新一条记录中的值。

例如：

```
class User
  include Mongoid::Document
  field :account_level, :type => Integer
end

class Profile
  include Mongoid::Document
  field :position, :type => Integer
end 
```

如果`account_level`in User 为 1，则`position`in Profile 也应更新为 1。如果`account_level is 2, then`位置`应该是2。

这应该以编程方式完成，无需用户输入或在客户端使用不可见的输入字段（必须有比这更好的方法）。

额外的问题......我有以下逻辑（对于`position`），我该怎么做？

`account_level`1 = `position`1
`account_level`2 = `position`1
`account_level`3 = `position`5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:40:08.630

不确定我是否理解你的问题。

尝试使用回调（[http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)）：

例如，在用户类中：

```
before_save :set_equals_account_level_and_position
def set_equals_account_level_and_position
  profile.position = account_level
  profile.save!
end 
```

# java - 在 JavaFX 中使用 Platform.runLater 禁用折叠手风琴

> ID：13606198
> 
> 赞同：4
> 
> 时间：2012-11-28T13:29:04.467
> 
> 标签：java, accordion, javafx-2

我想使用答案中建议的解决方案： [防止 JavaFX 中的手风琴崩溃](https://stackoverflow.com/questions/10403838/prevent-an-accordion-in-javafx-from-collapsing) ，以防止 JavaFX 中的手风琴完全崩溃。

我的问题是：为什么在expandedPaneProperty 上添加的监听器使用Platform.runLater 来调用setCollapsible(false)？

事实上，如果我删除 Platform.runLater，在折叠/展开窗格之后，它们的内容会由于某种原因消失。那么为什么 runLater 解决了这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T23:08:58.343

ChangeListener< T>的[文档](http://docs.oracle.com/javafx/2/api/javafx/beans/value/ChangeListener.html)指出：

**通常，在此方法中修改观察值被认为是不好的做法。**

该方法指的是：

```
void changed(ObservableValue<? extends T> observable, T oldValue, T newValue); 
```

* * *

**RunLater**确保窗格将在 JavaFX 应用程序线程的**下一次**运行时被修改，因此在安全的情况下进行修改。

# objective-c - iPhone“向上”或放在桌子上

> ID：13606202
> 
> 赞同：0
> 
> 时间：2012-11-28T13:29:34.090
> 
> 标签：objective-c, ios, accelerometer, gyroscope

我如何必须在objective-c中使用加速度计/陀螺仪才能确定是否......

A) 将 iPhone 放在用户面前，即“向上”或

B) 例如，iPhone 已放在桌子上，即显示屏朝上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:35:25.963

您需要阅读[UIAcceleration 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAcceleration_Class/Reference/UIAcceleration.html#//apple_ref/doc/uid/TP40006901)并注意重力始终存在。因此，当 iPhone 垂直（并保持稳定）时，您将沿 y 轴读取 1g。当它平放在桌子上时，您将沿 z 轴读取 1g

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T18:19:41.837

首先符合`<UIAccelerometerDelegate>`然后你可以使用这些方法：

```
 #pragma mark --- Acceleration Start and Stop ----------------------------

    -(void)startMeasuringAcceleration{

        NSLog(@"Started Measuring Acceleration");

        [[UIAccelerometer sharedAccelerometer] setUpdateInterval:1];//update interval (1s at moment)
        [[UIAccelerometer sharedAccelerometer] setDelegate:self];

    }

    -(void)stopMeasuringAcceleration{

        [[UIAccelerometer sharedAccelerometer] setDelegate:nil];

    }

    #pragma mark UIAcceleromete Delegate Methods-----------------------------------------------

    - (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration{

        NSLog(@"%f, %f, %f, %f", acceleration.x, acceleration.y, acceleration.z, acceleration.timestamp);

} 
```

测量 X、Y 和 Z。Z 是屏幕上的轴，Y 从上到下，X 从左到右。

在 viewDidLoad 调用`[self startMeasuringAcceleration]`开始

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:35:17.757

您需要读取[加速度计](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAccelerometer_Class/Reference/UIAccelerometer.html)的 z 坐标值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T09:31:23.897

您不应该使用 UIAccelerometerDelegate，因为它自 iOS 5.0 以来已被弃用。从 iOS 4 开始，它被使用传感器融合的更可靠的 Core Motion 框架所取代。

所以看看：

[为什么加速计：didAccelerate：在 IOS5 中已弃用？](https://stackoverflow.com/questions/6742531/why-is-accelerometerdidaccelerate-deprecated-in-ios5/6763403#6763403)

[简单的 iPhone 运动检测](https://stackoverflow.com/questions/5214197/simple-iphone-motion-detect/5220796#5220796)

按照 Apple 文档内部的链接

# php - 在 extjs 表单中存储在数据库中的数据与错误数据

> ID：13606203
> 
> 赞同：-3
> 
> 时间：2012-11-28T13:29:39.887
> 
> 标签：php, html, mysql, ajax, extjs

*这是 extjs javascript 代码*

```
 Ext.require([
            //'Ext.form.*',
            //'Ext.layout.container.Column',
            //'Ext.tab.Panel'
            '*'
        ]);

        Ext.onReady(function() {
            Ext.QuickTips.init();

            var bd = Ext.getBody();

            bd.createChild({tag: 'h2', html: 'Form 5 - ... and forms can contain TabPanel(s)'});

            var required = '<span style="color:red;font-weight:bold" data-qtip="Required">*</span>';

            var tab2 = Ext.widget({
                title: 'Inner Tabs',
                xtype: 'form',
                id: 'innerTabsForm',
                collapsible: true,
                bodyPadding: 5,
                width: 600,
                 url:'http://localhost/form/database.php',
                fieldDefaults: {
                    labelAlign: 'top',
                    msgTarget: 'side'
                },
                defaults: {
                    anchor: '100%'
                },

                items: [{
                    xtype: 'container',
                    layout:'hbox',
                    items:[{
                        xtype: 'container',
                        flex: 1,
                        border:false,
                        layout: 'anchor',
                        defaultType: 'textfield',
                        items: [{
                            fieldLabel: 'First Name',
                            afterLabelTextTpl: required,
                            allowBlank: false,
                            name: 'first',
                            anchor:'95%'
                        }, {
                            fieldLabel: 'Enquiry Date ',
                            name: 'Enquiry Date ',
                            xtype: 'datefield'
                }]
                    },{
                        xtype: 'container',
                        flex: 1,
                        layout: 'anchor',
                        defaultType: 'textfield',
                        items: [{
                            fieldLabel: 'Last Name',
                            afterLabelTextTpl: required,
                            allowBlank: false,
                            name: 'last',
                            anchor:'95%'
                        },{
                            fieldLabel: 'Email',
                            afterLabelTextTpl: required,
                            allowBlank: false,
                            name: 'email',
                            vtype:'email',
                            anchor:'95%'
                        }]
                    }]
                },{
                    xtype:'tabpanel',
                    plain:true,
                    activeTab: 0,
                    height:600,
                    defaults:{
                        bodyPadding: 10
                    },
                    items:[{
                        title:'Personal Details',
                        defaults: {
                            width: 230
                        },
                        defaultType: 'textfield',

                        items: [{
                        fieldLabel: 'Age',
                        name: 'age',
                        xtype: 'numberfield',
                        minValue: 0,
                        maxValue: 100
                        },{
                    xtype: 'fieldset',
                    flex: 1,
                    title: 'Gender',
                    defaultType: 'radio', // each item will be a radio button
                    layout: 'anchor',
                    defaults: {
                        anchor: '100%',
                        hideEmptyLabel: false
                    },
                    items: [ {
                        checked: true,
                        boxLabel: 'Male',
                        name: 'gender',
                        inputValue: 'male'
                    }, {
                        boxLabel: 'Female',
                        name: 'gender',
                        inputValue: 'female'
                    }]
                },{
                    xtype: 'fieldset',
                    flex: 1,
                    title: 'Marrital Status',
                    defaultType: 'radio', // each item will be a radio button
                    layout: 'anchor',
                    defaults: {
                        anchor: '100%',
                        hideEmptyLabel: false
                    },
                    items: [ {
                        checked: true,
                        boxLabel: 'Single',
                        name: 'mstatus',
                        inputValue: 'single'
                    }, {
                        boxLabel: 'Married',
                        name: 'mstatus',
                        inputValue: 'married'
                    }]
                },{
                            fieldLabel: 'Company',
                            name: 'company',
                            value: 'Ext JS'
                        }, {
                            fieldLabel: 'Email',
                            name: 'email',
                            vtype:'email'
                        }]
                    },{
                        title:'Phone Numbers',
                        defaults: {
                            width: 230
                        },
                        defaultType: 'textfield',

                        items: [{
                            fieldLabel: 'Home',
                            name: 'home',
                            value: '(888) 555-1212'
                        },{
                            fieldLabel: 'Business',
                            name: 'business'
                        },{
                            fieldLabel: 'Mobile',
                            name: 'mobile'
                        },{
                            fieldLabel: 'Fax',
                            name: 'fax'
                        }]
                    },{
                        cls: 'x-plain',
                        title: 'Rmarks',
                        layout: 'fit',
                        items: {
                            xtype: 'htmleditor',
                            name: 'bio2',
                            fieldLabel: 'Remarks'
                        }
                    }]
                }],

                buttons: [{
                    text: 'Save',          
                    handler: function () {
                        tab2.getForm().submit({
                         method: 'POST',
                        url: 'http://localhost/form/database.php',
                            waitMsg: 'Saving...',   
                            success: function () {     
                                Ext.MessageBox.alert ('Message','Data has been saved');
                                tab2.getForm().reset();
                            },
                          failure: function () {   
                                Ext.MessageBox.alert ('Message','Saving data failed');
                            }
                        });
                    }
                },{
                    text: 'Cancel',
                    handler: function () {
                        tab2.getForm().reset();
                    }
                }]
            });

            tab2.render(document.body);
            //tab2.render('form');
        }); 
```

php代码

```
 <?php
    $con = mysql_connect("localhost","root","");
        if (!$con)
        {
        die('Could not connect: ' . mysql_error());
        }
        mysql_select_db("stratageeks", $con);
        $q=mysql_query ("INSERT INTO data (name,lastname) VALUES ('".isset($_POST['first'])."','".isset($_POST['last'])."')");
         if ($q) {
         echo '{"success":"true"}';
        }
        else {
          echo '{"success":"false"}';
        }

    ?> 
```

上面的代码是我的 Extjs javascript 代码，下面的代码是我的数据库代码，用于从 extjs 表单插入数据库中的数据

但数据存储在数据库 **名称：1 姓氏：1**

表单发布数据是 **名称：ravi 姓氏：kumar**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T00:58:01.720

问题出在这段代码中：

```
. isset($_POST['first']) . "','" . isset($_POST['last']) . 
```

`isset()`返回`TRUE`or `FALSE`，将其插入数据库时​​分别转换为`1`和`0`。

您可能需要考虑用以下代码替换您的代码：

```
$iFirst = isset( $_POST['first'] ) ? $_POST['first'] : '';
$iLast  = isset( $_POST['last'] )  ? $_POST['last']  : '';

$q = mysql_query ( "INSERT INTO data ( name, lastname ) VALUES ('". $iFirst ."','". $iLast ."')" ); 
```

如果它是我的代码，它看起来像这样（注意字段/参数名称的一致性，这也使重构更容易）：

```
$iFirstName = isset( $_POST['aFirstName'] ) ? $_POST['aFirstName'] : '';
$iLastName  = isset( $_POST['aLastName'] )  ? $_POST['aLastName']  : '';

$q = mysql_query ( "INSERT INTO data ( firstName, lastName ) VALUES ('". $iFirstName ."','". $iLastName ."')" ); 
```

# java - c++读取java进程输出

> ID：13606207
> 
> 赞同：1
> 
> 时间：2012-11-28T13:29:50.887
> 
> 标签：java, c++, windows, process, stdout

我有一个运行 java 进程并读取它的输出的 C++ 程序。我使用了以下 MSDN 代码：

[http://msdn.microsoft.com/en-us/library/ms682499%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms682499%28v=vs.85%29.aspx)

但是，当读取输出的最后一行时

```
bSuccess = ReadFile(g_hInputFile, chBuf, BUFSIZE, &dwRead, NULL); 
```

`bsucces`等于1，所以程序继续下一个循环，当到达同一行时，程序只是“飞”，无一例外地停止调试，断点永远不会移动到下一行。

我想这是因为没有 EOF 指示停止阅读。但是，java**没有**EOF 字符。java程序只是做：

```
System.out.close(); 
```

最后。

为了修复它，我可以在 C++\Java 代码中做什么？

**编辑：**

这是代码。

它不适用于**任何**控制台应用程序，读到结束然后“挂起”。

```
HANDLE g_hChildStd_IN_Rd = NULL;
HANDLE g_hChildStd_IN_Wr = NULL;
HANDLE g_hChildStd_OUT_Rd = NULL;
HANDLE g_hChildStd_OUT_Wr = NULL;

HANDLE g_hInputFile = NULL;
PROCESS_INFORMATION piProcInfo;

void CreateChildProcess()
// Create a child process that uses the previously created pipes for STDIN and STDOUT.
{
    std::string d=processLoaction;
    TCHAR *cmdline=new TCHAR[d.size()+1];
    cmdline[d.size()]=0;
    std::copy(d.begin(),d.end(),cmdline);
   STARTUPINFO siStartInfo;
   BOOL bSuccess = FALSE; 

// Set up members of the PROCESS_INFORMATION structure. 

   ZeroMemory( &piProcInfo, sizeof(PROCESS_INFORMATION) );

// Set up members of the STARTUPINFO structure. 
// This structure specifies the STDIN and STDOUT handles for redirection.

   ZeroMemory( &siStartInfo, sizeof(STARTUPINFO) );
   siStartInfo.cb = sizeof(STARTUPINFO); 
   siStartInfo.hStdError = g_hChildStd_OUT_Wr;
   siStartInfo.hStdOutput = g_hChildStd_OUT_Wr;
   siStartInfo.dwFlags |= STARTF_USESTDHANDLES;

// Create the child process. 
   bSuccess = CreateProcess(NULL, cmdline, NULL, NULL, TRUE, 0, NULL, NULL, &siStartInfo, &piProcInfo);  // receives PROCESS_INFORMATION 

   // If an error occurs, exit the application. 
   if ( ! bSuccess ) 
      throw new Exception("Failed to create process");
   else 
   {
      // Close handles to the child process and its primary thread.
      // Some applications might keep these handles to monitor the status
      // of the child process, for example. 

      CloseHandle(piProcInfo.hProcess);
      CloseHandle(piProcInfo.hThread);
   }
}

void ReadFromPipe(void) 
// Read output from the child process's pipe for STDOUT
// and write to the parent process's pipe for STDOUT. 
// Stop when there is no more data. 
{ 
   DWORD dwRead, dwWritten,status; 
   CHAR chBuf[BUFSIZE]; 
   BOOL bSuccess = FALSE;
   HANDLE hParentStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
   BOOL res;
   for (;;) 
   { 
      bSuccess = ReadFile( g_hChildStd_OUT_Rd, chBuf, BUFSIZE, &dwRead, NULL);
      if( ! bSuccess || dwRead == 0 ) 
          break; 
      chBuf[dwRead] = NULL;
      bSuccess = WriteFile(hParentStdOut, chBuf, dwRead, &dwWritten, NULL);
      if (! bSuccess ) 
          break; 
   } 

}

int main(int argc, char** argv)
{ 
          //run the Jar to validate manifest & jeff
          SECURITY_ATTRIBUTES saAttr; 

          // Set the bInheritHandle flag so pipe handles are inherited. 
          saAttr.nLength = sizeof(SECURITY_ATTRIBUTES); 
          saAttr.bInheritHandle = TRUE; 
          saAttr.lpSecurityDescriptor = NULL; 

          // Create a pipe for the child process's STDOUT. 
          if ( ! CreatePipe(&g_hChildStd_OUT_Rd, &g_hChildStd_OUT_Wr, &saAttr, 0) )
              throw new Exception("faild to create a pipe for the child process's STDOUT");

          // Ensure the read handle to the pipe for STDOUT is not inherited.
          if ( ! SetHandleInformation(g_hChildStd_OUT_Rd, HANDLE_FLAG_INHERIT, 0) )
              throw new Exception("Read handle to the pipe for STDOUT is inherited");
          CreateChildProcess();
          ReadFromPipe();
            ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:40:29.753

该问题似乎在您链接的页面的一些评论中得到解决：您必须在创建子进程之后关闭管道的写入端，但在从另一端开始读取之前。如果你不这样做，即使子进程关闭了它的输出，管道的写入端仍然是打开的（由父进程），所以永远不会到达 EOF。

啊，别忘了关闭父进程的所有句柄。链接页面中的示例没有，并且泄漏了！

# zend-framework2 - 将表单视图助手添加到视图

> ID：13606208
> 
> 赞同：0
> 
> 时间：2012-11-28T13:29:50.590
> 
> 标签：zend-framework2

我在我的应用程序中使用 ZF2 的 PhpRenderer 作为独立组件，如下所示：

```
public function render(ViewModel $viewModel)
{
    $renderer = new PhpRenderer;
    $resolver = new Resolver\AggregateResolver();
    $stack = new Resolver\TemplatePathStack(array(
        'script_paths' => $this->viewFolders
    ));
    $resolver->attach($stack);
    $renderer->setResolver($resolver);

    return $renderer->render($viewModel);
} 
```

表单视图助手位于 Zend\Form\View\Helper 命名空间下，我需要使用 FormCollection 视图助手来呈现我的表单，但是如何将此命名空间添加到当前视图助手？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:59:15.730

您可以将 HelperPluginManager 设置为您的 Applications HelperPluginManager，这样它就可以为您找到依赖项等。

像这样手动使用它意味着您没有任何神奇的设置，您需要自己添加它们。

```
$renderer = new PhpRenderer;
// where $sm is your servicelocator/manager
$renderer->setHelperPluginManager($sm->get('HelperPluginManager'));
$renderer->setServiceLocator($sm); 
```

# django - 在 PythonAnywhere 上的 Django 中启用自动重新加载

> ID：13606215
> 
> 赞同：2
> 
> 时间：2012-11-28T13:30:19.550
> 
> 标签：django, pythonanywhere

我一直想知道是否可以在基于 PythonAnywhere 的 Django 网络服务器上启用自动重新加载。现在，当我对模型或视图进行任何更改时，我必须重新加载完整的网络应用程序才能看到更改。

我希望立即看到我的更改。我不知道是否可以禁用可能设置的 --noreload 标志，或者我可以在某处修改它，但这真的很方便。（有时，我忘记单击“重新加载 Web 服务器”，我想知道问题出在哪里）

非常感谢，

垫子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:12:42.773

因为[PythonAnywhere](http://www.pythonanyhwhere.com)不使用 django 测试服务器，所以这不能简单地完成。

该文件`/var/www/wsgi.py`当前设置为在任何修改时重新加载 Web 服务器。在浏览器选项卡中打开该文件并点击保存将导致服务器重新加载速度稍快。

另一种选择是使用书签，您可以将其添加到书签工具栏中：

[https://www.pythonanywhere.com/help/#id_reload_webapp_bookmarklet](https://www.pythonanywhere.com/help/#id_reload_webapp_bookmarklet)

# android - DialogFragment 默认 bakcground 颜色更改 - Android

> ID：13606217
> 
> 赞同：1
> 
> 时间：2012-11-28T13:30:20.987
> 
> 标签：android, android-widget, android-dialog, android-dialogfragment

我通过继承 DialogFragment 类实现了我自己的 Dialog。

我想更改此默认对话框的背景颜色。

我尝试了几种方法，但似乎都没有。如果您看到下面的 onCreateDialog() 方法，我使用的是自定义对话框样式：

```
public class ConfirmationDialogFragment extends SherlockDialogFragment {

String mTextMessage = "Would you like to save the message"; 
String mTextButtonOk = "Ok";
TestDialogInterface dialogInterface = null;

public void setDialogInterface(TestDialogInterface dialogInterface) {
    this.dialogInterface = dialogInterface;
}

/**
 */
public ConfirmationDialogFragment() {       
}

public void setTextMessage(String mTextMessage) {
    this.mTextMessage = mTextMessage;
}

@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(new ContextThemeWrapper(getActivity(), R.style.AlertDialogCustom));
    builder.setMessage(mTextMessage)
           .setPositiveButton(mTextButtonOk, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   dismiss();
               }
           })
           .setCancelable(false);                
    builder.setTitle("Loan Extension");
    Dialog dialog = builder.create();
    return dialog;
}   

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = super.onCreateView(inflater, container, savedInstanceState);
    return view;        
}

public class TestDialogInterface{
    public void onYes(){}
    public void onNo(){}        
} 
```

}

样式文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="AlertDialogCustom" parent="@android:style/Theme.DeviceDefault.Light.Dialog">        
        <item name="android:windowBackground">@color/red</item>
        <item name="android:colorBackground">@color/red</item>                              
    </style>
</resources> 
```

但是 windowBackground 样式项似乎没有效果。我需要更改此默认对话框的背景颜色。

有人有线索吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:50:49.170

我建议您创建一个自定义对话框。求助

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog](http://developer.android.com/guide/topics/ui/dialogs.html#CustomDialog)

或者

[http://www.androidpeople.com/android-custom-dialog-example](http://www.androidpeople.com/android-custom-dialog-example)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-16T19:51:57.940

更改根视图、线性布局或其他任何内容的背景颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-11T06:42:08.760

这个对我有用：

```
 @Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    // Setup the layout
    LayoutInflater inflater = getActivity().getLayoutInflater();
    final View root = inflater.inflate(R.layout.sample_dialog_fragment, null);
    root.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT));

    //Customizing the dialog features
    final Dialog dialog = new Dialog(getActivity());
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    dialog.setContentView(root);
    dialog.getWindow().setBackgroundDrawable(new ColorDrawable(getResources().getColor(R.color.light_gray)));
    dialog.getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);
    return dialog;
} 
```

只需将 sample_dialog_fragment 替换为您的布局，并将 R.color.light_gray 替换为您的颜色。我希望它对你有帮助。

# python - 使用 Blender Python 连接到纯数据的 TCP 连接

> ID：13606219
> 
> 赞同：4
> 
> 时间：2012-11-28T13:30:23.490
> 
> 标签：python, tcp, network-programming, blender, puredata

我需要一些帮助来确定我的代码，以便通过 TCP 连接从 Blender 发送信息到 Pure Data。我有一个球在其上滚动的表面，我需要获取球的速度及其碰撞，以便通过 TCP 将其发送到 Pd，以便将数据转换为程序音频。

我一直在寻找可能的方法，由于到目前为止（刚刚开始）我对 python 和编码的理解非常有限，我发现很难看到发生了什么。

现在这是我的问题：

我知道我可以通过在搅拌机中编写来发送一个简单的代码字符串，这对我有用：

```
import socket
host ='127.0.0.1'
port = 50007
msg = '345;'
s = socket.socket (socket.AF_INET, socket.SOCK_STREAM)
try:
     s.connect((host,port))
     s.send(msg.encode()) 
```

而且我知道我可以制作这段代码来从我的对象中获取坐标：

```
import bge

def main():

   cont = bge.logic.getCurrentController()
   owner = cont.owner
   vel = owner.getVelocity()
   x = (vel [0])
   y = (vel [1])
   z = (vel [2])
   print (x+y+z)

main() 
```

我需要弄清楚的是如何将该信息插入到 my.send 中，以便我可以在 Pure Data 中接收它。我已经查看了有关如何进行这项工作的网站，但还没有找到我需要的东西。我想知道是否有人有一些可能与此有关的好消息来源，或者是否有人知道如何将我的 owner.getVelocity() 集成到 tcp 消息中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T23:43:16.993

编辑：

我想我自己解决了，我现在在 PD 中获取我的数据流。

如果有人感兴趣，这是代码：

```
import bge
import socket

cont = bge.logic.getCurrentController()
owner = cont.owner
vel = owner.getVelocity()

x = (vel [0])
y = (vel [1])
z = (vel [2])

added = x+y+z
print (added)

tsr = str(added)     
tsr += ';'
host = '127.0.0.1'
port = 50007
msg = '123456;'

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

s.connect((host, port))

s.send(tsr.encode())

s.shutdown(0)

s.close() 
```

谢谢你的时间！

安德烈亚斯

# java - @Embedded 对象如果没有基本数据类型字段，则不会自动实例化

> ID：13606220
> 
> 赞同：14
> 
> 时间：2012-11-28T13:30:24.787
> 
> 标签：java, jpa, ebean, embeddable

基本问题：为什么不总是实例化 @Embedded 对象？

有趣的观察是，如果 @Embedded 对象不包含基本数据类型（int、boolean ...）或之前没有被触及，Ebean 不会实例化这些对象。例子：

```
@Entity
public class Embedder {
    // getNotAutoInstantiated() will return null if this field was not touched before
    @Embedded
    private NotAutoInstantiated notAutoInstantiated = new NotAutoInstantiated();
    // getAutoInstantiated() will always return an instance!
    @Embedded
    private AutoInstantiated autoInstantiated = new AutoInstantiated();
}

@Embeddable
public class AutoInstantiated {
    // theKey is why this embedded object is always instantiated
    private int theKey; 
    private String field1;      
}

@Embeddable
public class NotAutoInstantiated {
    private String field2;      
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-11-28T10:05:02.537

对于 Hibernate，您可能需要查看问题[HHH-7610](https://hibernate.atlassian.net/browse/HHH-7610)。

特别是，从 5.1 开始，有一个实验特性可以改变这种行为。请注意，此功能存在已知问题，在稳定之前不应在生产中使用。[这在org.hibernate.cfg.AvailableSettings](https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/cfg/AvailableSettings.html)的 Javadocs 中有详细说明）：

```
/**
 * [EXPERIMENTAL] Enable instantiation of composite/embedded objects when all of its attribute values are {@code null}.
 * The default (and historical) behavior is that a {@code null} reference will be used to represent the
 * composite when all of its attributes are {@code null}
 * <p/>
 * This is an experimental feature that has known issues. It should not be used in production
 * until it is stabilized. See Hibernate Jira issue HHH-11936 for details.
 *
 * @since 5.1
 */
String CREATE_EMPTY_COMPOSITES_ENABLED = "hibernate.create_empty_composites.enabled"; 
```

将`hibernate.create_empty_composites.enabled`属性设置为 true，瞧！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-22T02:34:00.367

我不认为 JPA 规范清楚地描述了当`@Embedded`对象的属性*全部为 null*时会发生什么，但至少某些实现将具有 null 属性的对象视为 null 对象，这就是您所看到的。

这似乎是一个合理的实现。当然，它在我的代码（使用 Hibernate）中很有用，如果我将一个`@Embedded`对象设置为 null，我希望它在加载持久版本时保持为 null。

在您的示例中，`AutoInstantiated`该类永远不能被视为 null，因为原始属性`theKey`永远不能为 null。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-07-04T09:43:26.387

我刚刚遇到了与 Hibernate 相同的问题。回答了关于“为什么”的原始问题。

但是要谈论一个解决方案，我只使用一个@PostLoad 方法，所以在类*Embedder*中是这样的：

```
@PostLoad
private void initData() {
  if(notAutoInstantiated == null) {
    notAutoInstantiated = new NotAutoInstantiated();
  }
} 
```

更新：

**警告！**上面的代码可以工作，但确实有意想不到的副作用！一旦您从数据库加载带有空指针的对象，它就会被标记为脏，因为这个后加载代码！就我而言，这种副作用会导致来自线程的 SQL 更新命令，它应该只加载数据和搜索这个 bug 的时间！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-15T13:17:12.167

与 Martin 类似的 hack，用于在未加载对象时避免 NPE 并避免副作用。

```
 // workaround as Embeddable objects are not loaded if all their fields are null
  public NotAutoInstantiated getNotAutoInstantiated() {
    if (notAutoInstantiated == null) {
      // WARNING! do not assign this new object to notAutoInstantiated field,
      // this would have side effects as the field is not loaded by Ebean, 
      // Ebean would try to refresh the field in some cases and another NPE would occur:
      // io.ebeaninternal.server.core.DefaultBeanLoader.refreshBeanInternal(DefaultBeanLoader.java:194)
      return new NotAutoInstantiated();
    }
    return notAutoInstantiated;
  } 
```

# android - onRestart -> onStart() 这两种状态之间发生了什么

> ID：13606225
> 
> 赞同：-6
> 
> 时间：2012-11-28T13:30:41.470
> 
> 标签：android

我有 2 个活动 A 和 B .. 当我从 B 返回到 A 时，A 开始 B 调用 onRestart()，然后调用 onStart() 方法。我的问题是 Activity A 中的所有视图在 onRestart() -> onStart() 时重绘？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:37:47.177

*   如果A 尚未销毁（保留变量，不重绘），`onResume(.)`则调用Just 。`Activity`
*   如果它被破坏`onCreate(.)`> `onStart(.)`>`onResume(.)`被调用（变量丢失，重绘）。
*   如果停止`onRestart(.)`> `onStart(.)`>`onResume(.)`被调用（变量不丢失，重绘）

`Activity`因此，如果从内存中清除，您只会丢失变量。

# python - Django老问题：获取模型中的当前用户

> ID：13606227
> 
> 赞同：2
> 
> 时间：2012-11-28T13:30:52.620
> 
> 标签：python, django, model

首先我很抱歉问这个问题，我是 django 的新用户。我只通过models.Model设置我的项目

```
 ##models.py
    class Task(models.Model):
        Name = models.CharField('Title', max_length=200)
        Notes = models.TextField('Description',max_length=2000, null=True)
        Creator = models.ForeignKey(User, related_name='TaskCreator', null=True, blank=True)
        def __unicode__(self):
            return self.Name

   ##admin.py
   class TaskAdmin(admin.ModelAdmin):
          list_display = ['Name', 'Owner','EstEndTime','LastModifiedTime','Statu']

   admin.site.register(Task,TaskAdmin) 
```

我为我的网站使用 django 的默认管理员，我不使用我自己的任何模板。现在，当用户登录并要创建任务时，我想由当前用户设置创建者默认值。但我不知道如何在models.Model 中获取当前用户。我从网络上查了一些资料，比如[http://chewpichai.blogspot.tw/2007/09/using-user-info-outside-request-in.html](http://chewpichai.blogspot.tw/2007/09/using-user-info-outside-request-in.html)，但是不能用。那么谁能告诉我在没有请求的情况下在models.py文件中获取当前用户的方法。它困扰了我很长时间，我真的希望有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T14:06:10.603

您需要覆盖`save_model`Admin Class 中的 。

```
 class TaskAdmin(admin.ModelAdmin):
          list_display = ['Name', 'Owner','EstEndTime','LastModifiedTime','Statu']

          def save_model(self, request, task, form, change):
              task.Creator = request.user
              task.save() 
```

在这里阅读[https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.ModelAdmin.save_model)

# android - 我的surfaceview中的android自定义相机错误

> ID：13606231
> 
> 赞同：0
> 
> 时间：2012-11-28T13:31:01.523
> 
> 标签：android, surfaceview

我正在使用 android 示例进行练习，在创建自己的相机应用程序的示例中，当我创建自己的表面视图以显示相机图像时，我收到错误 java.lang.NullPointerException

这是我的代码：

```
package com.example.prueba;

import java.io.IOException;

import android.content.Context;
import android.hardware.Camera;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;

    /** A basic Camera preview class */
    public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback {
        private static final String TAG = "CameraPreview";
        private SurfaceHolder mHolder;
        private Camera mCamera;

        public CameraPreview(Context context, Camera camera) {
            super(context);
            mCamera = camera;

            // Install a SurfaceHolder.Callback so we get notified when the
            // underlying surface is created and destroyed.
            mHolder = getHolder();
            mHolder.addCallback(this);
            // deprecated setting, but required on Android versions prior to 3.0
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }

        public void surfaceCreated(SurfaceHolder holder) {
            // The Surface has been created, now tell the camera where to draw the preview.
            try {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            } catch (IOException e) {
                Log.d(TAG, "Error setting camera preview: " + e.getMessage());
            }
        }

        public void surfaceDestroyed(SurfaceHolder holder) {
            // empty. Take care of releasing the Camera preview in your activity.
        }

        public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
            // If your preview can change or rotate, take care of those events here.
            // Make sure to stop the preview before resizing or reformatting it.

            if (mHolder.getSurface() == null){
              // preview surface does not exist
              return;
            }

            // stop preview before making changes
            try {
                mCamera.stopPreview();
            } catch (Exception e){
              // ignore: tried to stop a non-existent preview
            }

            // set preview size and make any resize, rotate or
            // reformatting changes here

            // start preview with new settings
            try {
                mCamera.setPreviewDisplay(mHolder);
                mCamera.startPreview();

            } catch (Exception e){
                Log.d(TAG, "Error starting camera preview: " + e.getMessage());
            }
        }
    }

//And here the error log:

//11-28 13:19:24.451: E/AndroidRuntime(870): FATAL EXCEPTION: main
//11-28 13:19:24.451: E/AndroidRuntime(870): java.lang.NullPointerException
//11-28 13:19:24.451: E/AndroidRuntime(870):    at com.example.prueba.CameraPreview.surfaceCreated(CameraPreview.java:34)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.SurfaceView.updateWindow(SurfaceView.java:543)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.SurfaceView.access$000(SurfaceView.java:81)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:671)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1820)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.Choreographer.doFrame(Choreographer.java:525)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.os.Handler.handleCallback(Handler.java:615)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.os.Handler.dispatchMessage(Handler.java:92)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.os.Looper.loop(Looper.java:137)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at android.app.ActivityThread.main(ActivityThread.java:4745)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at java.lang.reflect.Method.invokeNative(Native Method)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at java.lang.reflect.Method.invoke(Method.java:511)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
//11-28 13:19:24.451: E/AndroidRuntime(870):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T09:33:18.697

问题是 mCamera 为空，因为我没有在清单中输入：

```
<uses-permission android:name="android.permission.CAMERA" /> 
```

现在问题解决了，但是表面视图是黑色的，我看不到相机图像，我得到相机错误 100

为了解决相机错误 100，我更改了 surfaceChanged 添加线以设置新尺寸：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        // If your preview can change or rotate, take care of those events here.
        // Make sure to stop the preview before resizing or reformatting it.

        if (mHolder.getSurface() == null){
          // preview surface does not exist
          return;
        }

        // stop preview before making changes
        try {
            mCamera.stopPreview();
        } catch (Exception e){
          // ignore: tried to stop a non-existent preview
        }

        // set preview size and make any resize, rotate or
        // reformatting changes here
        Parameters parameters= mCamera.getParameters();
        parameters.setPictureSize(w, h);
        mCamera.setParameters(parameters);

        // start preview with new settings
        try {
            mCamera.setPreviewDisplay(mHolder);
            mCamera.startPreview();

        } catch (Exception e){
            Log.d(TAG, "Error starting camera preview: " + e.getMessage());
        }
    } 
```

现在可以正常工作，但我不知道为什么我必须添加这些行，因为在清单中我放置了屏幕方向景观，就像在 android sdk 的示例中一样：

```
<activity android:name=".CameraActivity"
      android:label="@string/app_name"

      android:screenOrientation="landscape">
      <!-- configure this activity to use landscape orientation -->

      <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

# asp.net-mvc-3 - 如何为每个单选按钮保留不同的名称

> ID：13606236
> 
> 赞同：0
> 
> 时间：2012-11-28T13:31:13.600
> 
> 标签：asp.net-mvc-3, razor, entity-framework-4.1, radiobuttonfor

我有一个 MVC3 Internet 应用程序。

基本上它有一个注册表单，上面有 3 个单选按钮。每当我检查一个单选按钮并点击`submit`按钮时，它应该转到控制器并将数据插入我的数据库。

我也对`Registration`表单中的字段进行了验证。

在某处**`stackoverflow`**，我已经阅读了该内容，`Property names in the Model and the Names of the fields in the view have to be matched`以便即使在验证错误之后也能保留表单中的值。

此语句非常适用于 TextBoxes 和 Dropdownlists。

**我的问题是：**如何有不同的名称 foreach `radiobutton`？

正如我所说，我的表单有 3 个单选按钮。

说，这些是文本框，后跟单选按钮

```
Phone 1 // here is the radio button1
Phone 2 // here is the radio button2
Phone 3 // here is the radio button3 
```

在我的模型中，我有

```
public string Phone1 { get; set; }
public string Phone2 { get; set; }
public string Phone3 { get; set; }
//also i have a preferred phone--which sets if any of the phone is selected
public bool PreferredPhone { get; set; } 
```

我试过这样的东西

```
Phone1:
@Html.RadioButtonFor(model => model.PreferredPhone, Model.Phone1, new { id = "Phone1", @onclick = "PrefferedPhone(this)" })
Phone2:
@Html.RadioButtonFor(model => model.PreferredPhone, Model.Phone2, new { id = "Phone2", @onclick = "PrefferedPhone(this)" })
Phone3:
@Html.RadioButtonFor(model => model.PreferredPhone, Model.Phone3, new { id = "Phone3", @onclick = "PrefferedPhone(this)" }) 
```

但是此声明将所有单选按钮的名称设置为`PreferredPhone`

如何为每个单选按钮设置不同的名称？

即使我尝试将 RadioButton 名称保留为`model=>model.Phone1`, `model=>model.Phone2`, `model=>model.Phone3`，但如果我这样设置，我可以选择所有三个单选按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T22:07:04.330

当您谈论选择所有三个单选按钮时，听起来您正在谈论它们，就好像它们是复选框一样。不能同时选择同一组中的单选按钮，每组只能选择一个（但也许您已经知道，我误解了）。

根据您在 Stackoverflow 中某处所读到的内容，模型中的属性名称和视图中字段的名称必须匹配是正确的。例如，如果您在这样的视图中有单选按钮：

```
@Html.RadioButton("stuffRadio", 1)
@Html.RadioButton("stuffRadio", 2)
@Html.RadioButton("stuffRadio", 3)
@Html.RadioButton("stuffRadio", 4) 
```

然后在表单发布后在控制器中：

```
[HttpPost]
public ActionResult TheAction(Model model, string stuffRadio)
{
    //dostuff to model and other things
    string value = stuffRadio;
    //dostuff to the selected radioStuff :)
} 
```

无论如何，如果我误解了，那么我想问你作为回报。你说你想区分每个单选按钮，我不太清楚为什么。这样您就可以在发布操作中获取所有电话号码并进入控制器吗？

使用我自己的例子，我会简单地做这样的事情：

```
@Html.RadioButton("stuffRadioGroup1", 1)
@Html.RadioButton("stuffRadioGroup2", 2)
@Html.RadioButton("stuffRadioGroup3", 3)
@Html.RadioButton("stuffRadioGroup4", 4) 
```

但话又说回来，如果我想读取所有这些组选择，我当然必须对控制器中的参数做同样的事情，如下所示：

```
[HttpPost]
public ActionResult TheAction(Model model, 
    string stuffRadioGroup1, string stuffRadioGroup2, 
    string stuffRadioGroup3, string stuffRadioGroup4)
{
    //dostuff to model and other things
    string value1 = stuffRadioGroup1;
    string value2 = stuffRadioGroup2;
    string value3 = stuffRadioGroup3;
    string value4 = stuffRadioGroup4;
    //dostuff to the selected radioStuff :)
} 
```

再说一次，我可能会误解，然后你当然会纠正我；）稍后！

**##########已编辑###################**

首先，如果您想要提交隐藏字段，它们必须在表单中，并且该特定隐藏字段的名称必须作为参数传递给具有相同名称的控制器。例如：

```
@(Html.BeginForm("SomeAction", "Controller")
{
    <input type="hidden" name="derp" value="1234" />
    @Html.RadioButtonFor(model => model.PreferredPhone, Model.Phone3, new { id = "Phone3", @onclick = "PrefferedPhone(this)" })
    <button type="submit">submit</button>
} 
```

如果该隐藏字段也应该通过，控制器应该是这样的：

```
[HttpPost]
public ActionResult SomeAction(Model mymodel, string derp, FormCollection collection)
{
    int number = Convert.toInt32(derp);
    //now number should be '1234'

    string phone3 = collection.Get("Phone3"); 
    //now you have the phone number and the hidden field telling you if that number is preffered

    TryUpdateModel(mymodel); //populate the model if it hasn´t already been populated

    if(ModelState.IsValid)
    {
        //do stuff
    else
    {
        //TODO: here you should set the model with the stuff from derp and collection before returning
        return View("SameViewAsBefore", mymodel);
    }
} 
```

如您所见，我将 FormCollection 放在那里，只是为了采用不同的方法。希望这会有所帮助，如果没有，您可以随时再问:)（众所周知，我有时会误解一些事情）

# wordpress - Wordpress 相当于 Magento 中的“菜单”

> ID：13606237
> 
> 赞同：0
> 
> 时间：2012-11-28T13:31:18.497
> 
> 标签：wordpress, magento

wordrpess 的菜单功能允许将“类别”和“页面”添加到菜单中。Magento中是否有类似的东西？

换句话说，我希望能够将不同的类别组合在一起，以便在不同的菜单中显示它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:55:29.610

不，这本身并不存在 - 它是应用程序中众所周知的缺失工具。许多人最终重写或扩展`Mage_Catalog_Block_Navigation`类和*目录/导航/top.phtml*模板以适应他们的需要的逻辑和标记。

# eclipse - 如果从 Eclipse 启动，为什么我的 tomcat 工作方式不同

> ID：13606238
> 
> 赞同：0
> 
> 时间：2012-11-28T13:31:19.480
> 
> 标签：eclipse, tomcat6

我刚刚在 Linux Mint 上安装了 tomcat6
如果我使用启动 Tomcat

```
sudo /etc/init.d/tomcat6 start 
```

我可以在 localhost:8080/ 上
看到欢迎页面

因为我是 tomcat 的新手，所以我看不出有什么区别。
从 Eclipse 启动时，tomcat 是否使用不同的运行环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:37:20.593

是的。Eclipse 仅使用 tomcat 二进制文件并在您的工作区元数据下重新创建配置、webapp 结构等，并通过发布到其中执行您的 Web 应用程序。它不会从 tomcat 安装中继承 webapps 文件夹。

检查`<workspace>\.metadata\.plugins\org.eclipse.wst.server.core\tmp0`以找到您的 eclipse 驱动的 tomcat 部署。

# jquery - HTML 5 兼容 iFrame 属性和旧版浏览器 ( 简要说明 我知道这个问题之前在这里被问过，但是，那是 2 年前，我希望从那以后有一些更新。 问问题

> ID：13606241
> 
> 赞同：1
> 
> 时间：2012-11-28T13:31:28.420
> 
> 标签：jquery, css, html, iframe

## 简要说明

我知道这个问题之前在[这里](https://stackoverflow.com/questions/3601273/html5-and-frameborder)被问过，但是，那是 2 年前，我希望从那以后有一些更新。

[正如这里](http://www.w3schools.com/tags/tag_iframe.asp)所说， `iFrames`HTML 5 不再支持for 的许多旧属性。相反，必须使用 CSS 或`seamless`标签来实现不再受支持的属性使您能够实现的功能。

当您尝试将这些影响应用到较旧的浏览器（例如（我敢说）Internet Explorer）时，就会出现问题。

考虑这个例子：

```
<iframe src="//somepage" frameborder="0" scrolling="0"></iframe> 
```

这将在 HTML 5 文档上返回验证错误，因为 HTML 5不再支持`frameborder`和属性。但是，在 中，CSS 样式和对.`scrolling``<IE8``border``overflow``iFrame`

## 我的问题

有没有办法`frameborder="0" scrolling="0"`在所有浏览器中应用效果同时避免验证错误？

*我宁愿在不使用某种浏览器条件的情况下执行此操作，例如：*

```
<!--[if lt IE 9]>
    // Apply attributes here
<![endif]--> 
```

# jquery - ASP.NET MVC3 和 jQuery.jTable / Microsoft JScript 运行时错误：无法获取属性“长度”的值：对象为空或未定义

> ID：13606254
> 
> 赞同：0
> 
> 时间：2012-11-28T13:32:23.790
> 
> 标签：jquery, jquery-jtable

我正在尝试使用 jQuery jTable 插件设置表格。

自动取款机。这是非常基本的。但我无法让它工作。每次尝试加载表时，我都会收到 JScript 运行时错误。

我的脚本如下所示：

```
$(document).ready(function () {

     var listURL= $('#EnvTableContainer').attr('data-list-url');
     var deleteURL = $('#EnvTableContainer').attr('data-delete-url');
     var updateURL = $('#EnvTableContainer').attr('data-update-url');
     var createURL = $('#EnvTableContainer').attr('data-create-url');

    $('#EnvTableContainer').jtable({
        title: 'Environments',
            actions: {
                listAction: listURL,
                deleteAction: deleteURL,
                updateAction: updateURL,
                createAction: createURL
            },
            fields: {
                    Id: {
                        key: true,
                        create: false,
                        edit: false,
                        list: false
                    },
                    Name: {
                        title: 'Name',
                        width: '50%'

                    }
            }
    });

    $('#EnvTableContainer').jtable('load');
}); 
```

当我尝试运行它时，它会在 jquery-1.8.0-min.js 文件中中断并停止：

```
var e,f=0,g=a.length,h=g===b 
```

有谁知道是什么问题？我一直在查看 jQuery.jTable 的 API。但是找不到任何地方，可以设置长度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T13:38:29.593

可能您返回的格式错误。listAction URL 必须返回一个 json 对象，如 jTable 的文档所示：http: [//jtable.org/ApiReference#act-listAction](http://jtable.org/ApiReference#act-listAction)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T19:40:36.870

我按照这个精彩的指南结束了这个页面。 [http://www.codeproject.com/Articles/277576/AJAX-based-CRUD-tables-using-ASP-NET-MVC-3-and-jTa](http://www.codeproject.com/Articles/277576/AJAX-based-CRUD-tables-using-ASP-NET-MVC-3-and-jTa)

如果您碰巧遵循了这个很棒的指南并最终遇到了类似的错误，请在创建 jTable 实例时注意 javascript 的大写敏感特性。我有一个“EmployeeId”而不是“EmployeeID”的关键字段，Visual Studio 给出了奇妙的错误。

> localhost:58594/Scripts/jtable/jquery.jtable.js 中第 446 行第 13 列的未处理异常
> 
> 0x800a138f - Microsoft JScript 运行时错误：无法获取属性“数据”的值：>对象为空或未定义

仔细检查 jTable 实例的结构。

# c - 为什么我的 var 在 while 循环中被更改？

> ID：13606255
> 
> 赞同：2
> 
> 时间：2012-11-28T13:32:34.237
> 
> 标签：c, linux

我需要制作一个程序，它需要一些系统命令，如`ls`,`date`等，并检查是否存在包含此命令（文件）的路径。我有变量`commandandparameters`在最后一个循环中开始改变，`while`我不知道为什么。

我`puts(commandandparameters);`表明如果你想运行它，输出效果不好。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
void main()
{
    char *arr[5];//for the command and his parameter
    char command[10];
    int i,j;
    char *path=NULL,*tempath,*finalpath,*commandandparameters;
    do
    {
        i=0;
        printf("enter new command:");
        gets(command);
        arr[i]=strtok(command," ");
        while(arr[i]!=NULL)//save the command and also the parametrs
        {
            i++;
            arr[i]=strtok(NULL," ");
        }
        strcpy(commandandparameters,arr[0]);//add first command
        for(j=1;j<i;j++)//add the parameters
            {
                strcat(commandandparameters," ");
                strcat(commandandparameters,arr[j]);
            }
        //now we check if the command in every path
        path = getenv("PATH");
        tempath = strtok(path,":");
        while (tempath != NULL)
        {
            strcpy(finalpath,tempath);//get the current path
            puts(commandandparameters);
            strcat(finalpath,"/");//we add '/'
            execl(finalpath,commandandparameters,NULL);
            tempath = strtok(NULL, ":");//get next path
        }
    }while(command!="leave");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:56:56.693

您尚未定义`commandandparameters`指向的空间：

```
char *path=NULL,*tempath,*finalpath,*commandandparameters;
...
    strcpy(commandandparameters,arr[0]); 
```

你有一个指向随机空间的指针；你复制那个随机空间。你会得到有趣的结果。如果幸运的话，程序会崩溃。如果你不走运，它会行为不端。

你有一个类似的问题`finalpath`：

```
 path = getenv("PATH");
    tempath = strtok(path,":");
    while (tempath != NULL)
    {
        strcpy(finalpath,tempath); 
```

更糟糕的是，你也在屠杀你的环境。除非您打算修改 PATH 的值，否则返回的字符串`getenv()`应被视为只读。`:`事实上，在循环之后你不会留下太多的 PATH （如果它的第一个元素是 PATH ，则没有 PATH ）。

确保您知道每个指针指向的位置。

您的代码有很多潜在的缓冲区溢出，这令人毛骨悚然。永远不要使用`gets()`；假设它会把你的电脑炸成碎片。

* * *

如果你解决了这些问题，`do { ... } while (command != "leave");`循环就等于无限循环。你不能像这样有用地比较字符串；你需要使用`strcmp()`.

* * *

> 我尝试做一个简单的程序，但我发现它`execl()`不起作用；有人能告诉我为什么“ls”命令不起作用吗？

这是评论中代码的略微修改版本。我在打印中添加了两个标题和换行符，但关键的变化是`execl()`在行中。您的原件在评论中；工作版本不是评论。我无法确定这是您的主要问题还是评论中的错字。修改后的代码编译并运行。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>

int main(void)
{
    int pid, stat;

    if ((pid = fork()) == 0)
    {
        execl("/bin/ls", "ls", NULL);
        //execl("/bin/", "ls", NULL);
        printf("1\n");
        exit(1);
    }
    else
    {
        wait(&stat);
        printf("2\n");
    }
} 
```

* * *

程序中的代码会破坏 PATH；如果您未能执行第一个程序，那么它只会在原始 PATH 上的第一个目录中查找。你试图用来`execl()`处理可变数量的参数；这是工作的错误工具。您必须使用`execv()`或其亲属之一（`execvp()`例如，在不弄乱 PATH 的情况下进行 PATH 搜索）。原因是这`execl()`需要一组由空指针终止的参数，但是只有在知道有多少个参数时才能编写它。你可以写：

```
execl("/bin/ls", "ls", "-l", (char *)0); 
```

但除非您强制每个命令最多有 4 个参数（给定`char *arr[5];`）并使用模板，例如：

```
execl(finalpath, arr[0], arr[1], arr[2], arr[3], arr[4]); 
```

你不能`execl()`用来执行命令。但这将用户限制为最多 N 个参数，这是不可接受的。（例如，shell 扩展`*`可以生成 30 个或更多参数的列表。

您的代码也没有将命令名称附加到路径组件；第一个参数`execl()`是程序可执行文件的路径。

所以，使用`execv()`（或`execvp()`或`execve()`什至，如果你有的话，`execvpe()`）。如果找到您执行的命令，这是对您的程序的或多或少的最小修改，它可以正常工作；如果不是这样，那将是一场小灾难。这是一个一次性的外壳；它不应该也不`fork()`喜欢`execv()`它应该 - 如果你在修改路径之前分叉，那么路径修改将不那么重要，尽管进程运行将具有最小到不存在的路径。

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>

int main(void)
{
    char *arr[5];//for the command and his parameter
    char command[100];  // Not 10
    int i;
    int j;
    char *path=NULL;
    char *tempath;
    char finalpath[200];
    char commandandparameters[200];

    do
    {
        i = 0;
        printf("enter new command: ");
        if (fgets(command, sizeof(command), stdin) == 0)
        {
            fprintf(stderr, "EOF or error\n");
            break;
        }
        arr[i]=strtok(command, " ");
        while (i < (5-1) && arr[i]!=NULL)//save the command and also the parameters
        {
            printf("arr[%d] = %s\n", i, arr[i]);
            i++;
            arr[i]=strtok(NULL, " \n");
        }
        arr[4] = 0;

        strcpy(commandandparameters, arr[0]);//add first command
        for (j=1;j<i;j++)//add the parameters
            {
                strcat(commandandparameters, " ");
                strcat(commandandparameters, arr[j]);
            }
        printf("Cmd&Params: %s\n", commandandparameters);

        //now we check if the command in every path
        path = getenv("PATH");
        tempath = strtok(path, ":");
        while (tempath != NULL)
        {
            puts(commandandparameters);
            strcpy(finalpath, tempath);//get the current path
            strcat(finalpath, "/");//we add '/'
            strcat(finalpath, arr[0]);
            puts(finalpath);
            execv(finalpath, arr);
            tempath = strtok(NULL, ":");//get next path
        }
    } while (strcmp(command, "leave") != 0);
    return(0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:56:36.177

您只存储由返回的指针`strtok()`，它们将指向`command`. 循环的每次迭代都会覆盖`command`，从而导致“旧”指针指向的数据发生变化。

您必须将标记从 中复制出来`command`，或者复制到动态分配的内存中（查找`malloc()`），或者有一个静态大小的字符串数组。在这种情况下，请注意缓冲区溢出。

# java - 加载休眠实体时始终调用方法

> ID：13606258
> 
> 赞同：2
> 
> 时间：2012-11-28T13:32:40.390
> 
> 标签：java, hibernate

我正在从事的项目使用 Hibernate 来实现持久性。

该项目分为子项目，其中四个与此处相关：

*   消息域
*   用户服务
*   消息服务
*   个案服务

Message 实体（在 user-dom 中）包含一个`String userID`字段和一个`@Transient String userName`字段。另一个实体 Case 与 Message 具有 OneToOne 关系。问题如下：

*   每次我们加载消息时（直接在消息服务中，或者通过在案例服务中加载案例间接），我们需要设置它的 userName 字段。
*   通过调用用户服务检索用户名。
*   不能从 message-dom 调用用户服务（出于依赖性原因）。

我已经看到实体有一个 @PostLoad 注释，但显然这些在这里没有帮助，因为我们无法从实体调用服务。目前我们手动进行服务调用，但这很容易出错（尤其是在案例中间接加载消息时）。

我们如何确保每次加载 Message 实体时都设置该字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T20:15:14.807

在所有部分聚集在一起的最终应用程序中实现`org.hibernate.event.PostLoadEventListener`并通过 xml 添加它

```
<hibernate-configuration>
    <session-factory>
        ...
        <event type="load">
            <listener class="com.eg.MyPostLoadListener"/>
            <listener class="org.hibernate.event.def.DefaultPostLoadEventListener"/>
        </event>
    </session-factory>
</hibernate-configuration> 
```

或通过代码

```
Configuration cfg = new Configuration();
PostLoadEventListener[] stack = { new MyPostLoadListener(), new DefaultPostLoadEventListener() };
cfg.EventListeners().setPostLoadEventListeners(stack); 
```

# c# - 使用 LINQ -Concat 重复记录

> ID：13606259
> 
> 赞同：3
> 
> 时间：2012-11-28T13:32:41.240
> 
> 标签：c#, linq-to-sql

问题：我有一个包含大量数据的列表，但我不知道如何将重复数据合并到一个单元中 + 它不应该影响其他单元。如果可能的话，希望每件事都发生在同一个列表中，而不需要创建更多列表来实现结果使用 LINQ

```
CaseID  ApproverID
1   23
1   45
1   56
2   33
2   90
3   58
3   79 
```

从更广泛的意义上说，我想要带有approverID AS的caseID 1`23 ,45,56`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:35:19.047

```
MyData
  .GroupBy(d => d.CaseID)
  .Select(g => new{
                CaseID = g.Key, 
                ApproverIds = g.Select(x => x.ApproverID).ToList()})

  //.Select(x => new{
  //               x.CaseID, 
  //               approverIdsString = string.Join(", ", x.ApproverIds)}) 
```

最后一部分被注释掉，因为逗号分隔的列表字符串很少是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:45:52.787

如果要对记录进行分组，可以这样做

```
var result = source.GroupBy(x => x.CaseID, x => x.ApproverID); 
```

第一个 lambda 表达式选择组键。第二个 lambda 表达式选择值。如果省略第二个表达式，将返回源值。您可以使用这样的结果：

```
foreach (var group in result) {
    Console.WriteLine(group.Key);
    foreach (int value in group) {
        Console.WriteLine("    " + value);
    }
} 
```

结果将是

```
1
    23
    45
    56
2
    33
    90
3
    58
    79

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:36:25.397

这称为分组：

```
var groups = myList.GroupBy(element => element.CaseId); 
```

您可以像每个元素都包含一个列表一样迭代组：

```
foreach (var g in groups) {
    Console.WriteLine("Case ID:{0}", g.Key);
    foreach (var element in g) {
        Console.WriteLine("Approver ID:{0}", element.ApproverId);
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-28T13:35:09.873

为避免重复，请使用[Enumerable.Union](http://msdn.microsoft.com/en-us/library/bb341731.aspx)

# javascript - 无法使用 PhoneGap 2.2.0 检索连接状态

> ID：13606261
> 
> 赞同：1
> 
> 时间：2012-11-28T13:32:44.757
> 
> 标签：javascript, ios, cordova

我遇到了 2.1.0 的问题，所以我升级到 2.2.0 以确保它没有归结为错误，但它仍然无法正常工作。

我有以下代码：

```
checkConnection: function() {

        alert(1);
        alert(navigator.connection.type);
        alert(2);

        var networkState = navigator.connection.type;

        if(networkState == 'Connection.UNKNOWN' || networkState == 'Connection.NONE') {
            return false;   
        } else {
            return true;    
        }
    } 
```

第一个警报触发并产生一个 1，然后它就死了。我也试过 navigator.network.connection.type 这是一个旧的参考，也不起作用。我现在不知道为什么它不起作用，其他 PhoneGap 功能工作得很好（例如 GeoLocation）。

作为参考，我使用的是运行 iOS 6.0.1 的 iPhone 5。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:40:00.673

检查是否在事件之后**执行了对 checkConnection 的调用。**`deviceready`

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
   console.log('Application online: ' + checkConnection());
}

function checkConnection() {
    var networkState = navigator.connection.type;

    if (networkState == Connection.UNKNOWN || networkState == Connection.NONE) {
        return false;   
    } else {
        return true;    
    }
} 
```

此外，您不应该与字符串进行比较，`'Connection.UNKNOWN'`而是与常量进行比较`Connection.UNKNOWN`。没有单引号。

# sql-server-2008 - 如何在数据库的列中获取非数字条目

> ID：13606263
> 
> 赞同：9
> 
> 时间：2012-11-28T13:32:47.210
> 
> 标签：sql-server-2008

我有用于自动收费的客户数据库。看起来 CC 过期字段有几条记录，其中过期日期的条目无效......例如非数字。有没有办法搜索具有非数字值的条目？下面是我假设查询看起来如何的开始......

```
select *
from customers
where ccexperiation = non numeric 
```

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-28T13:36:05.920

```
select *
from customers
where ISNUMERIC(ccexperiation) = 0 
```

有一些小警告。见[这里](http://msdn.microsoft.com/en-us/library/ms186272.aspx)。

# javascript - Jquery选择自动选择

> ID：13606264
> 
> 赞同：0
> 
> 时间：2012-11-28T13:32:51.573
> 
> 标签：javascript, jquery, jquery-chosen

我正在使用 Harvest Chosen jQuery 插件，如下所示：

```
 $(".chzn_b").chosen(); 
```

它允许我从我的选择中选择多个选项，但有时当我登陆页面时，我想预先选择一些东西。
我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:42:54.980

您必须在选择[http://www.w3schools.com/tags/att_option_selected.asp的选项标签上定义 selected 属性](http://www.w3schools.com/tags/att_option_selected.asp)

然后选择应该将其设置为选定的值。

# c++ - 将整数字符串转换为 int 的最简单方法

> ID：13606266
> 
> 赞同：0
> 
> 时间：2012-11-28T13:32:52.327
> 
> 标签：c++

我有一个很长的数字，有数百个数字，我存储在一个字符串中。现在，我想把它读成一个整数/长数字。

`long int strtol ( const char * str, char ** endptr, int base );` 需要一个**endpointer**，但我似乎无法正确设置它，因为它尝试读取所有数字，因此返回`LONG_MAX`.

```
char str[]=
"70172427121883998797908792274921901699720888093776\
65727333001053367881220235421809751254540594752243\
52584907711670556013604839586446706324415722155397\
53697817977846174064955149290862569321978468622482\
83972241375657056057490261407972968652414535100474\
82166370484403199890008895243450658541227588666881\
16427171479924442928230863465674813919123162824586";

char *pEnd; //set pEnd to str[1]'s address how???
long num = strtol(str, &pEnd,  10);
cout << num << endl; //LONG_MAX 
```

我想到了一些解决方案，比如将它复制到一个新的字符数组中，然后应用`strtol`，但这似乎不是最好的方法。

那么最简单/最好的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:36:23.987

如果你想读取一个数字，你可以简单地使用：

```
int digit = str[digitIndex] - '0'; 
```

无论实现使用的字符集如何，这都有效，因为标准保证数字 '0'-'9' 将由连续值表示。

的`endptr`参数`strtol`并不像你想的那样：它用于返回转换停止的位置，而不是告诉函数在哪里停止。

如果要转换 的多位子字符串`str`，可以只将所需的数字复制到新字符串中，如下所示：

```
std::string partialStr(str+startIndex, numDigits); 
```

然后使用[此处的一种方法](https://stackoverflow.com/questions/7663709/convert-string-to-int-c)将其转换为整数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T13:36:57.550

将单个数字转换为其 int 表示很容易，例如

```
int i = str[0] - '0'; 
```

对于第一个数字。所以你只需要创建一个整数数组，遍历字符串并转换每个数字，将结果存储在整数数组中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:44:30.707

如果基数是 10，并且`LENGTH`是字符串 Length，请执行以下操作：

```
#include <string.h>
#include <stdio.h>
#include <stdlib.h>

/*Prototype*/
long int intpow( int base, int exp);

int main(void)
{
    long int result = 0;
    int i, j = 0;
    char str[] = /* blah blah*/

    for( i = LENGHT - 1; i >= 0; i--){
        /* -48 because ASCII code. */
        result +=  ( str[ i ] - 48 ) * intpow( 10, j );
        j++;
    }
}

/* Recursive integer power function*/
long int intpow( int base, int exp)
{
    if( exp == 0)
      return 1;

    else
      return base * intpow( base, exp - 1);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T13:38:22.263

结束指针是该 strtol 的**输出**。它告诉*你*它在哪里停止阅读，而不是相反。

如果您想读取单个数字，请执行以下操作：

```
digit = str[0] - '0'; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T13:51:49.193

如果您不仅要转换其中一个数字而且要转换所有数字，请使用 std::transform ：

```
size_t N = sizeof(str) -1 ; //or strlen(str) if str is a pointer, not an array
std::vector<int> theInts(N); 
std::transform(str, str+N, begin(theInts), [](char* pc){ return *pc -'0'; }); 
```

# javascript - 用户控件中的 RegisterStartupScript 导致事件验证错误

> ID：13606272
> 
> 赞同：1
> 
> 时间：2012-11-28T13:33:10.173
> 
> 标签：javascript, asp.net, eventvalidation

对于附加到简单按钮单击事件的用户控件，我在后面的代码中有以下代码。如何避免导致无效回发？它产生一个事件验证错误。

```
protected void EditButton_Click(object sender, EventArgs e)
{
    PopulateEditControls();
    pnlEditDialog.Visible = true;

    Page.ClientScript.RegisterStartupScript(
       this.GetType(),
        "navigate",
        "window.onload = function()
              {window.location.hash='#editDialog';}",
       true);
} 
```

# php - 在两个字符之间获取

> ID：13606276
> 
> 赞同：2
> 
> 时间：2012-11-28T13:33:21.060
> 
> 标签：php, regex, notepad++

我有一个这样的 CSV：

```
43132,000.121.211.254,,NO DATA,office@mail.com,VIEW,2012-11-28 13:17:31
43126,000.123.54.1,,NO DATA,mat.plast@mail.com,VIEW,2012-11-28 13:04:45
43121,000.24.74.155,,NO DATA,sales@mail.mail,VIEW,2012-11-28 12:58:38
43118,000.115.243.218,,NO DATA,guta@mail.com,VIEW,2012-11-28 12:55:59
43116,80006.124.167.204,,NO DATA,mogosanu@mail.ro,VIEW,2012-11-28 12:54:11 
```

我想做的是用记事本++ `office`, `mat.plast`, `sales`,替换`guta`，因此我需要一个正则表达式。`mogosanu``PRIVATEMAIL`

我如何匹配之间的所有内容`,`，`@`以便我可以替换它

我的想法是

`#\,(.*)\@#`

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:40:21.233

```
Find what: (?<=,)[^,@]+(?=@)
Replace with: PRIVATEMAIL 
```

这是如何运作的？`(?<=,)`断言匹配从逗号右侧开始。`[^,@]+`匹配任何非逗号、非 at 字符（尽可能多）。`(?=@)`断言`@`匹配的右侧有一个。请注意，实际匹配中既不包含后视，也不包含前瞻，这就是它们未被删除的原因。

请注意，可以省略后视，因为正则表达式引擎尝试从左到右匹配。

你可以在没有环视的情况下做同样的事情，但是你必须写回分隔符：

```
Find what: ,[^,@]+@
Replace with: ,PRIVATEMAIL@ 
```

（同样，您可以从两个字符串中省略前导逗号。）

这就是为什么您的模式不起作用的原因。首先，Notepad++ 不使用正则表达式的分隔符，因此不需要周围`#`（相反，它们将被视为要匹配的文字字符）。其次`.*`匹配任何字符（换行符除外，除非您选择该选项）。这包括逗号和 at 符号。所以`,`将匹配字符串中的第一个逗号。然后`.*`很乐意消耗一切，直到`@`（包括介于两者之间的所有值）。这就是为什么我们需要`,`使用否定字符类从重复字符中排除 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:40:24.837

`/,([A-Za-z]+)\@/`HashGuy，似乎与您想要的相符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:44:01.293

```
Find what: ,[^\@,]+\@([^\.]+\.[^,]+),
Replace with: ,PRIVATEMAIL@\1, 
```

这不会改变包含@ 的内容，但它不像电子邮件。

# ios - UIImagePickerControllerMediaMetadata 存储的数据与内置的 iOS 相机不同

> ID：13606282
> 
> 赞同：3
> 
> 时间：2012-11-28T13:33:35.753
> 
> 标签：ios, geolocation, camera, uiimagepickercontroller, exif

我正在使用 UIImagePickerController 从相机捕获图像。我正在开发的应用程序需要读取刚刚捕获的图像的元数据，尤其是其 gps 信息。我从字典中获取图像的元数据，并传递给 didFinishPickingMediaWithInfo 方法。

```
-(void)imagePickerController:(UIImagePickerController *)picker 
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
 NSString *mediaType = [info
                           objectForKey:UIImagePickerControllerMediaType];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        NSMutableDictionary *imgInfo = [info objectForKey:UIImagePickerControllerMediaMetadata];
        NSLog(@"Image Metadata : %@",imgInfo);
        //Passing the imgInfo to other methods for further processing.
    }
} 
```

但在日志中，我注意到元数据不包含图像的 gps 信息，与普通 iOS 相机拍摄的照片相比，还缺少一些 EXIF 数据。

为什么 UIImagePickerController 返回的元数据与普通 ios 相机拍摄的图像元数据不同？以及如何获取包括 GPS 信息在内的图像的完整元数据？

# git - 如何克隆 git repo 只获取分支的一个子集，而没有历史记录，只有每个分支的头部

> ID：13606284
> 
> 赞同：1
> 
> 时间：2012-11-28T13:33:40.620
> 
> 标签：git

我正在提取一个 repo 的子集以形成另一个 repo。我只对分支的一个子集感兴趣，我不想要任何分支中的任何历史记录，只是每个分支的尖端或头部。

一旦克隆的存储库处于所需状态，我打算将其来源更改为新的 GitHub 存储库并推送，这排除了浅克隆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:49:26.990

你可以做一个[浅克隆](https://stackoverflow.com/q/1992611/6309)，但是对于所有的 repo（不是一个子集）。

否则，您可以尝试[`git archive`](http://git-scm.com/docs/git-archive)，它可以归档树中的路径。
另请参阅“[我如何 git 归档任意分支？](https://stackoverflow.com/a/2915074/6309) ”。

# javascript - Javascript：检查字符串分隔符之间是否有空格

> ID：13606285
> 
> 赞同：0
> 
> 时间：2012-11-28T13:33:40.627
> 
> 标签：javascript, regex

我需要在位于字符串中的任何斜线（/）之前或之后修剪或添加空格。

```
var str = 'some/value    /even /more   /text';

// should ideally be equal to this 'some /value /even / more text' 
```

我设法让这个工作使用`.split()`和`.join()`

```
var text = $(this).val();
var arr = text.split('/');

for(var i=0, limit = arr.length; i < limit; i++) {
   arr[i] = $.trim(arr[i]);
}

arr.join(' / '); 
```

但我认为这可以用正则表达式进一步优化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:36:40.803

```
str = str.replace(/\s*\/\s*/g, ' / '); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:37:17.660

你的意思是这样的吗？

```
var str = this.value.replace(/\s*\/\s*/g, " / "); 
```

~~它也可以通过以下方式完成：~~

 ~~```
var str = this.value.match(/[^ /]+/g).join(" / "); 
```~~

# asp.net - 具有本地 SQL Server 数据库的 .NET Web 服务

> ID：13606286
> 
> 赞同：-1
> 
> 时间：2012-11-28T13:33:42.840
> 
> 标签：asp.net, .net, sql-server, database, web-services

> **可能重复：**
> [在没有 SQL Server 的情况下连接到数据库 mdf](https://stackoverflow.com/questions/13583842/connecting-to-database-mdf-without-sql-server)

我有一个简单的 Web 服务，可以运行和查询一个简单的`.mdf`数据库。

我正在使用 IIS 并使其成为一个工作应用程序。

我可以从任何地方激活此 Web 服务上的每个功能。

我正在运行 SQL Server 2005 Express。

我授予了运行它所需的所有权限。

但是当我尝试查询数据库时，我得到了这个错误：

> *无法打开登录请求的数据库“网关”。登录失败。
> *11-28 15:22:58.464：W/System.err(762)：用户“NT AUTHORITY\NETWORK SERVICE”登录失败。*

这是我的连接字符串：

```
<add name="gatewayConnectionString" 
     connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=gateway;Integrated Security=True" 
     providerName="System.Data.SqlClient"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:57:30.157

当您在连接字符串中使用时，您应该为您的“网关”数据库授予用户`Integrated Security=True`权限。`NT AUTHORITY\NETWORK SERVICE`以下是您可以执行的操作。

连接您的 SQL Server Management Studio，在您的服务器名称下方，转到 SECURITY，然后转到 LOGINS，您必须看到一个名为 name 的登录名/用户`NT AUTHORITY\NETWORK SERVICE`。如果看不到，请右键单击 LOGINS，单​​击 NEW LOGIN。将出现一个弹出窗口。点击“登录名”字段前面的搜索按钮。从这里，从您的计算机中搜索`NT AUTHORITY\NETWORK SERVICE`用户并选择它。然后转到用户映射选项卡，选择您的数据库名称“网关”，选中复选框。然后`db_owner`从下面的复选框列表中选择角色。选择确定。现在再次测试它。

我希望这能回答您的问题，如果是，则将其标记为“已回答”。

# android - 如何在我的 Jellybean4.2(Nexus 10) 模拟器中实现自定义 Daydream？

> ID：13606288
> 
> 赞同：0
> 
> 时间：2012-11-28T13:33:45.307
> 
> 标签：android, android-4.2-jelly-bean

我使用最新的 ADT(21) 和 SDK 工具为 Nexus 10 制作了 android 模拟器。

我知道在 Android JellyBean 4.2 中有一个名为 DayDream 的新功能。我想在我拥有的 Nexus10 模拟器中实现它。但不知道如何。

我在里面得到了**Daydream**`Settings -> Display`选项。

**如何通过代码实现我的自定义 DayDream？**

**我尝试过的：**
我在[这里](https://stackoverflow.com/questions/13427566/daydream-settings)检查了链接，但没有得到如何开始实施它。

对我来说，点击 DayDream 只会解锁**BeanFlinger daydream**，而不是 daydream 菜单本身。有没有可能的方法在这里实现新的 DayDream？

任何人都可以有一些指南或方法来学习文档并在 Jellybean 4.2 中实现自定义 DayDream 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:04:32.957

您是否阅读过有关白日梦的[文档](http://developer.android.com/about/versions/android-4.2.html#Daydream)？听起来您缺少一项将白日梦暴露给系统的服务，如下所示：（取自链接文档）

```
<service android:name=".MyDream" android:exported="true"
    android:icon="@drawable/dream_icon" android:label="@string/dream_label" >
    <intent-filter>
        <action android:name="android.service.dreams.DreamService" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</service> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T09:43:36.460

我做这个......在“dream.xml”中

```
<?xml version="1.0" encoding="utf-8"?>
<dream xmlns:android="http://schemas.android.com/apk/res/android"
    android:settingsActivity="com.s0l.equationsdream/com.s0l.equationsdream.EquationsDreamSettingsActivity"
    /> 
```

在“AndroidManifest.xml”中

```
<activity
    android:name="com.s0l.equationsdream.EquationsDreamSettingsActivity"
    android:label="@string/equations_settings" 
    android:excludeFromRecents="true" 
    android:icon="@drawable/ic_action_settings"
        android:taskAffinity=""
    android:theme="@android:style/Theme.Holo" 
    android:exported="true">
        <intent-filter>
            <category android:name="android.intent.category.MAIN" />
        </intent-filter>
</activity> 
```

# javascript - html - 使用 element.lang 更改语言

> ID：13606290
> 
> 赞同：10
> 
> 时间：2012-11-28T13:33:54.693
> 
> 标签：javascript, html, lang

堆栈上的第一个问题，所以向我欢呼！我正在尝试开发一种新方法（显然，因为我在网上没有看到解决方案，也许因为它不可能）使用 JS 和 lang 属性更改 HTML 编写元素的语言。

基本上，我在每个标签中都创建了多个带有 lang 属性的标签，因此给特定的 lang 一个显示值 -none-，隐藏它，并给它一个值 -inherit- 来显示它。这样，使用以下行：

```
a:lang(en),p:lang(en) { display : none }
a:lang(it),p:lang(it) { display : inherit } 
```

我一次只能看到一种语言。那行得通！

现在，我创建了一个

```
<a href="" lang="en" id="en"> word </a> 
```

标记英文文本，与任何其他具有自己的 lang 属性的语言相同。我曾尝试使用：

```
$("#en").click(function(){
           $('a:lang(en)').css('display', 'inherit');
           $('a:lang(it)').css('display', 'none');
           }; 
```

这似乎不起作用。

有任何想法吗？

非常感谢，谢伊

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T14:24:45.673

加载页面时带有`<body class="it">`，所有`:lang(en)`标签都将被隐藏。

```
body.en :lang(it) {
  display: none;
}
body.it :lang(en) {
  display: none;
} 
```

当您需要更改语言时，只需更改`className`.`<body>`

```
$("#en").click(function(){
  document.body.className = 'en';
}; 
```

哪个更优雅，速度更快。

演示：http: [//jsfiddle.net/Gw4eQ/](http://jsfiddle.net/Gw4eQ/)

* * *

使用`:not`选择器使其适用于更多语言。[演示](http://jsfiddle.net/Gw4eQ/159/)

```
body:not(.en) :lang(en), 
body:not(.it) :lang(it), 
body:not(.fr) :lang(fr) { 
    display: none; 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:44:27.710

这是不正确的：

```
$('a:lang(en)').attr('display', 'inherit');
$('a:lang(it)').attr('display', 'none'); 
```

没有属性“显示”，而是使用：

```
$('a:lang(en)').css('display', 'inherit');
$('a:lang(it)').css('display', 'none'); 
```

或者简单地说：

```
$('a:lang(en)').show();
$('a:lang(it)').hide(); 
```

...但是您在这里也有一个错误，您没有正确包装您的函数：

```
$("#en").click(function(){
    $('a:lang(en)').css('display', 'inherit');
    $('a:lang(it)').css('display', 'none');
}; // <---- error 
```

应该：`});`

```
$("#en").click(function(){
    $('a:lang(en)').css('display', 'inherit');
    $('a:lang(it)').css('display', 'none');
}); // <---- fixed 
```

另外，我会使用`inline`而不是`inherit`. “继承”并不意味着“默认”，它意味着“从父级继承此属性”，可能是`block`. `<a>`的默认显示是`inline`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:24:29.103

您是否使用 ) 关闭了“点击”？

```
$("#en").click(function(){
       $('a:lang(en)').css('display', 'inherit');
       $('a:lang(it)').css('display', 'none');
 }); 
```

# java - 确定是否按下鼠标中键而不是 alt 键

> ID：13606295
> 
> 赞同：1
> 
> 时间：2012-11-28T13:34:07.037
> 
> 标签：java, mouseevent, modifier, alt-key

我尝试了`java.awt.event.MouseEvent`鼠标按钮和修饰键。最后我来到了一个点，我对它的行为感到困惑。

通常我使用`SwingUtilities.isLeftMouseButton(...)`etc. 来检测，按下哪个鼠标按钮`<MouseEvent>.isControlDown()`等来检测，按下哪个修饰键。

但是，如果我按下鼠标中键，`<MouseEvent>.isAltDown()`-方法似乎总是正确的，无论是否按下 Alt 键（鼠标右键和元键的方式相同）。

键盘上的某些键似乎与某些鼠标按钮共享相同的事件标志。 [如何在java中获取鼠标中键？](https://stackoverflow.com/questions/195451/how-to-fetch-the-middle-mouse-button-in-java)似乎证实了我的假设。

所以我的问题是：有没有办法检测按下了哪个鼠标按钮以及真正按下了哪些修饰符？还是只对条件鼠标事件使用 Ctrl 和 Shift 修饰键更好？

操作系统：Windows 8，Java 版本“1.7.0_09”

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T18:17:25.033

关于鼠标中键的问题... [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6495530](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6495530)，看来 Sun/Oracle 自 2006 年以来就已经知道此问题...

对于其他情况（至少是简单的情况），我执行以下操作。

```
@Override
public void mouseClicked(MouseEvent e) {
     if (e.getClickCount() == 1 && e.getButton() == MouseEvent.BUTTON2){
         //Do some stuff...
         if (e.isControlDown()) {
             //Do something if control is down
         }else{
             //Something different if it is not down.
         }
     }
} 
```

alt 有一个类似的助手（它不适用于中间按钮，它总是正确的），shift 和 meta（是 OS X 键吗？）。

如果你想处理双击和单击，我注意到奇怪的行为，因为 Java 似乎支持双击，但也处理单击。

# java - super 和 this 的可替代性

> ID：13606300
> 
> 赞同：2
> 
> 时间：2012-11-28T13:34:29.237
> 
> 标签：java, inner-classes

我已经阅读了 Java 中`super`和的可替代性，因此在超类中合法的相同位置`this`引用是合法的（除了类 Object 的代码，其中 super 不能出现）。当我对此进行测试时，它似乎失败了，如下例所示：`super``this`

```
class OuterSuper {
  public int oneNumber() { return 5; }
  class Inners {}
  int i1 = OuterSuper.this.oneNumber();
  OuterSuper.Inners si1 = OuterSuper.this.new Inners();
}
class Outer extends OuterSuper {
  class Inner {
    int i1 = Outer.this.oneNumber();
    int i2 = Outer.super.oneNumber();
    OuterSuper.Inners si1 = Outer.this.new Inners();
    OuterSuper.Inners si2 = Outer.super.new Inners();
  }
} 
```

编译器对成员 si2 的最后一个声明犹豫不决。在这个例子中，我可以为 int i1 和 i2 编写声明，就像规范所说的那样，我可以将传递给 super 的任何内容替换为超类中的 this。对于内部班级，我被困住了，不得不使用它。这是不一样的吗？我在这两种情况下都在写“Outer.this”和“Outer.super”......

我想分享一下我正在使用 javac（Oracle 1.6 的命令行 JDK）和 NetBeans。我从 javac 得到的错误是：

```
Exe.java:32: <identifier> expected
        OuterSuper.Inners si2 = Outer.super.new Inners();
                                            ^
Exe.java:32: invalid method declaration; return type required
        OuterSuper.Inners si2 = Outer.super.new Inners();
                                                ^
2 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:27:53.583

So, here are my two-cents. I was under the impression that `super` could only be used in a class to reference its own base class. I didn't think it was allowed to reference another class' `super` even given the inner class relationship. This is because no class other that the class itself should be able to bypass method overriding.

So, according to the Java Specification:

> It is a compile-time error if the current class is not an inner class of class T or T itself

Given this, your code should compile.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:02:53.063

也许您应该在这两行上使用`Outer`而不是：`OuterSuper`

```
class Outer extends OuterSuper {
  class Inner {
    int i1 = Outer.this.oneNumber();
    int i2 = Outer.super.oneNumber();
    Outer.Inners si1 = Outer.this.new Inners();
    Outer.Inners si2 = Outer.super.new Inners();
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T20:54:55.033

> 类中对 super 的引用等价于超类中对 this 的引用

这种说法是完全不正确的。super.x() 总是指基类的 x() 实现，而超类中的 this.x() 可能指派生类中 x() 的覆盖，如果有的话。

# mysql - 在 Objective-C 中处理 MySQL 中的特殊字母

> ID：13606301
> 
> 赞同：1
> 
> 时间：2012-11-28T13:34:32.420
> 
> 标签：mysql, objective-c, special-characters

我从数据库中检索名称并将他们的名字和姓氏存储在 NSMutableDictionary 中，并将它们存储在 NSMutableArray 中。在数据库中，我的名称具有特殊字符，例如“ñ”、“Ç”等，当我将名称存储在变量中时，它会存储 ，这会使我的程序崩溃。

我不想限制用户输入，所以我必须保留这些字符。但是有没有办法在不输出的情况下用这些字符检索这些名称？

`ConDAO *con = [[ConDAO alloc] init];`

`NSMutableArray *resultSet = [con executeMySqlCommand:[NSString stringWithFormat:(Long query here)]];`

`NSMutableDictionary * endList = [[NSMutableDictionary alloc] init]; [endList setObject: @"" forKey:@"surname"]; [endList setObject: @"" forKey:@"name"];`

`resultSet =(NSMutableArray *)[resultSet arrayByAddingObject:endList];`

```
for (int i =0; i< [resultSet  count]-1; ++i)
    {
        NSMutableDictionary *temp = (NSMutableDictionary *) [resultSet objectAtIndex:i];

...
}

-(NSMutableArray *) executeMySqlCommand: (NSString *) mysqlCommand{
    LoginData* loginData=[self dataObject]; 
    NSString *post =[NSString stringWithFormat:@"username=%@&password=%@&mysqlCommand=%@",
                     loginData.loginName, loginData.loginPassword, mysqlCommand ];
   NSString *hostStr = @myIP;

    hostStr = [hostStr stringByAppendingString:post];
    NSString *encodeURL =[hostStr stringByAddingPercentEscapesUsingEncoding: NSASCIIStringEncoding];

    NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: encodeURL ]];    

    NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

    if ([serverOutput length]<=0) return nil;
    NSError * error;
    NSMutableArray *data = [NSJSONSerialization JSONObjectWithData:dataURL options:0 error:&error];
    return data;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:47:52.443

您似乎正在使用一种奇怪的服务器架构，您的查询将通过 Web 服务器进入数据库。您假设返回的字符串被编码为 ASCII，如下所示：

```
NSString *serverOutput = [[NSString alloc] initWithData:dataURL
                                               encoding:NSASCIIStringEncoding]; 
```

很明显你不知道正确的编码应该是什么。您奇怪的服务器架构使事情变得更加复杂，因为 Web 服务器和数据库本身之间可能存在编码问题。

这个问题的正确解决方案是使用 MySQL 客户端库来执行您的查询，因为在不同的存储和表示文本编码之间进行转换是任何数据库的基础。

您不会说您使用的是 iOS 还是 OSX；

如果是 OSX，那么您可能可以从[macports](http://macports.org)安装一些东西：

*   [MySQL 5.5](https://trac.macports.org/browser/trunk/dports/databases/mysql55/Portfile)然后访问 libmysqlclient 中的官方 C API。
*   [mysql55-connector-cpp](https://trac.macports.org/browser/trunk/dports/databases/mysql55-connector-cpp/Portfile)看起来像一个不需要安装 MySQL 的 C++ 包装器（它确实依赖于 boost，但是构建起来可能不会更快）。

如果是 iOS，那么这个[SO 答案](https://stackoverflow.com/questions/1924271/has-anyone-compared-iphone-mysql-clients)可能涵盖了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:50:42.873

这实际上是使用 .php 的问题。使用的编码没有覆盖特殊字符，所以当它进行数据库调用时，我必须在 .php 中使用 UTF8 编码。

# python - 消除 Matplotlib/Basemap pcolor 图中的白边

> ID：13606304
> 
> 赞同：16
> 
> 时间：2012-11-28T13:34:36.490
> 
> 标签：python, numpy, matplotlib, matplotlib-basemap

我正在使用以下代码在地图上绘制数据：

```
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt
import matplotlib.cm as cm
from mpl_toolkits.basemap import Basemap
from matplotlib.patches import Polygon
from scipy.io import netcdf

ncfile = netcdf.netcdf_file(myfile.nc,'r')
lon = ncfile.variables['longitude'][:]
lat = ncfile.variables['latitude'][:]
data = ncfile.variables['mydata'][:]
ncfile.close()

m = Basemap(projection='nplaea', boundinglat=40, lon_0=270)
m.drawcoastlines(linewidth=.6, zorder=2)
m.drawparallels(np.arange(-80.,81.,20.), zorder=1)
m.drawmeridians(np.arange(-180.,181.,20.), zorder=1)
cNorm = mpl.colors.Normalize(vmin=0, vmax=np.nanmax(data))
cmap = plt.get_cmap('jet')
lons, lats = np.meshgrid(lon, lat)
x, y = m(lons, lats)
datamap = m.pcolor(x, y, data, zorder=0)
datamap.set_norm(cNorm) 
plt.colorbar(datamap, cmap=cmap, norm=cNorm, shrink=0.5)
plt.savefig('figures/map_polar.png', dpi=150, bbox_inches='tight', pad_inches=0.4) 
```

这导致了这个图像：![在此处输入图像描述](../Images/e3f4f6b62915b2411baed10265473b64.png)

如您所见，网格单元之间存在白色间隙。我怎样才能摆脱它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-19T18:16:09.470

我知道这是一个老问题，但我想我会为这个问题添加我的解决方案。当我遇到与您完全相同的问题时，我发现了您的问题，即我的绘图中有一条白线和一个从-180 到 180 的网格。我的解决方案是使用 Basemap 函数[addcyclic](http://matplotlib.org/basemap/api/basemap_api.html#mpl_toolkits.basemap.addcyclic)

```
from mpl_toolkits.basemap import Basemap, shiftgrid, addcyclic
SSTcyclic, lonCMIP5cyclic = addcyclic(SST, lonCMIP5) 
```

这解决了我的问题。干杯，特隆德

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-12T19:35:07.027

在我看来，原来的帖子实际上并没有询问`0`和`360`度之间的白色区域。

我认为 OP 正在谈论与[此错误](http://comments.gmane.org/gmane.comp.python.matplotlib.devel/11010)一致的每个颜色方块之间的线条：

> 似乎将 pcolor 绘图保存为 pdf 格式总是包含网格线，这对于其他输出格式（如 png）而言并非如此

以下是开发人员对这个问题的看法：

> 我在 gs、xpdf Preview.app 中看到生成的图像中的网格线，但在 Adob​​e Reader 中没有。当我放大预览时，线条会跳动一点，并且无论缩放级别如何，屏幕上的宽度始终相同。
> 
> 在这个例子中绘制的是很多多边形，因此相邻的多边形共享一条具有完全相同坐标的边。代码填充了每个多边形的内部，显然一些渲染算法在多边形之间留下了一条最小宽度的线。

所以这是 PDF 查看器的问题，而`pcolor`不是`matplotlib`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-02T00:02:21.570

我曾经遇到过同样的问题。问题很可能出在`longitude`. 确保`0`和`360`都存在于输入中。如果没有，请手动添加它们，并相应地进行更改，`mydata`使它们具有相同的形状。

# javascript - 使用 jQuery Mobile 进行反应式编程

> ID：13606306
> 
> 赞同：0
> 
> 时间：2012-11-28T13:34:40.707
> 
> 标签：javascript, jquery-mobile

在[Meteor](http://meteor.com/)中，我看到了很好的[响应式编程](http://en.wikipedia.org/wiki/Reactive_programming)，现在我也想在 jQuery Mobile 中使用它。例如，我有一个变量`address`将显示在我的应用程序的许多页面上。如果我更改它，所有页面都应该更新。我不想同时使用这两个框架会很复杂，但我相信 jQuery 本身也必须有可能。

有谁知道怎么做？有这个插件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:38:19.687

尝试使用[Backbone](http://backbonejs.org/)，它非常轻量级且功能强大（它实际上使用 jQuery 作为依赖项，以及下划线）。

有很多专门针对 jQuery Mobile 的教程：[tutorial1](http://bennolan.com/2010/11/24/backbone-jquery-demo.html) , [tutorial2](http://addyosmani.com/blog/building-mobile-javascript-webapps-with-backbone-js-jquery-part-i/)

# java - Java，在TableModel中编辑单元格后，字符串而不是双精度

> ID：13606307
> 
> 赞同：3
> 
> 时间：2012-11-28T13:34:44.357
> 
> 标签：java, swing, jtable, defaulttablemodel

我将一个 CSV 文件导入一个`DefaultTableModel`，一列被格式化为双精度，到目前为止一切都很好。但是，如果我在 中编辑此列（双精度）中的一个单元格`JTable`，则该单元格不再是双精度。现在它是一个字符串。如何更改中已编辑单元格的类型`TableModel`？我知道我可以将字符串解析为 double with `double value = Double.parseDouble(str);`，但是如何确保在编辑单元格后发生这种情况？

我需要一个新的`TableModel`类吗：

`class myTableModel extends DefaultTableModel { }`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:38:10.627

*   [必须为所需列覆盖 getColumnClass](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

例如

```
 @Override
    public Class<?> getColumnClass(int c) {
        if (c == 1) {
            return Short.class;
        } else {
            return Integer.class;
        }
    } 
```

或者

```
import javax.swing.*;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;
    private javax.swing.Timer timer = null;

    public RemoveAddRows() {
        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model);        
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);        
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                RemoveAddRows frame = new RemoveAddRows();
                frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# java - 枚举的 Jersey xml 注释

> ID：13606310
> 
> 赞同：0
> 
> 时间：2012-11-28T13:34:52.013
> 
> 标签：java, xml-parsing, jersey

我正在使用 Web 服务将数据返回给客户端。现在我的代码中有枚举，我想将其转换并以 json 格式返回给客户端。我用谷歌搜索了它，但找不到很好的解决方案。

更新：没有机会投票；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:45:18.417

您可以发布一些代码来展示您尝试过的简单示例吗？这可能会有所帮助。文档有几个例子。 [http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/annotation/XmlEnumValue.html](http://jaxb.java.net/nonav/2.2.4/docs/api/javax/xml/bind/annotation/XmlEnumValue.html)

# linux - 不要用 svn webdav 启动 apache 服务

> ID：13606312
> 
> 赞同：0
> 
> 时间：2012-11-28T13:34:56.603
> 
> 标签：linux, ubuntu, apache2, webdav

当我尝试使用 svn 和 webDav 启动 apache 服务时，我收到以下错误消息：

```
Syntax error on line 120 of /etc/apache2/mods-enabled/dav_svn.conf:
Invalid command 'AuthUserFile', perhaps misspelled or defined by a module not included in the server configuration
Action 'configtest' failed. 
```

第 115 - 125 行：

```
<Location /svn>
     DAV svn
     SVNParentPath /var/svn/teste
     SVNListParentPath On
     AuthType Basic
     AuthName "myproject subversion repository"
     AuthUserFile /etc/apache2/senhas
     <LimitExcept GET PROPFIND OPTIONS REPORT>
        Require valid-user
     </LimitExcept>
</Location> 
```

我搜索 mod_auth，但找不到他。如何解决这个问题？

我使用 ubuntu 和 apache2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:56:21.697

确保您启用了**authn_file** apache 模块。

要在 Debian/Ubuntu 服务器上执行此操作，您将发出`a2enmod authn_file`然后重新启动 apache。

# android - 使用 facebook SDK 登录和注销时出现错误

> ID：13606313
> 
> 赞同：1
> 
> 时间：2012-11-28T13:34:59.593
> 
> 标签：android, facebook

这是我的主要活动：

```
package com.FBupdater;

import java.io.IOException;
import java.net.MalformedURLException;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.Toast;

import com.facebook.android.DialogError;
import com.facebook.android.Facebook;
import com.facebook.android.Facebook.DialogListener;
import com.facebook.android.FacebookError;

public class MainActivity extends Activity implements OnClickListener {

    String APP_ID = getString(R.string.APP_ID);
    Facebook fb;
    ImageButton button;

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        fb = new Facebook(APP_ID);

        button = (ImageButton)findViewById(R.id.loginbtn);
        button.setOnClickListener(this);

        updateContentView();
    }

    private void updateContentView() {
        // TODO Auto-generated method stub
        if(fb.isSessionValid()){
            Toast.makeText(MainActivity.this, "done", Toast.LENGTH_LONG).show();
            button.setImageResource(R.drawable.logout);
        }else{
            button.setImageResource(R.drawable.login);
        }
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        if(fb.isSessionValid()){
            //button close our session - log out of facebook
            try {
                fb.logout(getApplicationContext());
                updateContentView();
            } catch (MalformedURLException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }else{
            //login to facebook
            fb.authorize(MainActivity.this, new DialogListener() {

                @Override
                public void onFacebookError(FacebookError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(MainActivity.this, "onFBerror", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onError(DialogError e) {
                    // TODO Auto-generated method stub
                    Toast.makeText(MainActivity.this, "onError", Toast.LENGTH_LONG).show();
                }

                @Override
                public void onComplete(Bundle values) {
                    // TODO Auto-generated method stub
                    updateContentView(); 
                }

                @Override
                public void onCancel() {
                    // TODO Auto-generated method stub
                    Toast.makeText(MainActivity.this, "onCancel", Toast.LENGTH_LONG).show();

                }
            });
        }
    }

} 
```

这是我的 AndroidManifest：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.FBupdater"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.FBupdater.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

这是我的activity_main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:gravity="center"
    android:layout_gravity="center"
    android:background="#000000" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="70dp"
        android:layout_gravity="center"
        android:gravity="center"
        android:orientation="vertical" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/notloggedinmessage"
            android:textColor="#ffffff"
            android:textSize="20sp" />

        <ImageButton
            android:id="@+id/loginbtn"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:contentDescription="@drawable/login"
            android:src="@drawable/login" />

    </LinearLayout>

</LinearLayout> 
```

这是错误日志：

////点击退出按钮后：

```
11-28 15:22:56.824: D/AndroidRuntime(2123): Shutting down VM
11-28 15:22:56.824: W/dalvikvm(2123): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
11-28 15:22:57.034: E/AndroidRuntime(2123): FATAL EXCEPTION: main
11-28 15:22:57.034: E/AndroidRuntime(2123): android.os.NetworkOnMainThreadException
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:71)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:351)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:86)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:308)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:460)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpsURLConnectionImpl$HttpsEngine.connect(HttpsURLConnectionImpl.java:432)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:282)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:232)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at libcore.net.http.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:270)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.facebook.android.Util.openUrl(Util.java:215)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.facebook.android.Facebook.request(Facebook.java:777)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.facebook.android.Facebook.request(Facebook.java:693)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.facebook.android.Facebook.logout(Facebook.java:652)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.timelystatusupdater.MainActivity.onClick(MainActivity.java:54)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.view.View.performClick(View.java:3511)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.view.View$PerformClick.run(View.java:14105)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.os.Handler.handleCallback(Handler.java:605)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.os.Looper.loop(Looper.java:137)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at java.lang.reflect.Method.invokeNative(Native Method)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at java.lang.reflect.Method.invoke(Method.java:511)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-28 15:22:57.034: E/AndroidRuntime(2123):     at dalvik.system.NativeStart.main(Native Method)
11-28 15:22:57.534: D/dalvikvm(2123): GC_CONCURRENT freed 400K, 9% free 5888K/6407K, paused 10ms+34ms
11-28 15:22:57.874: I/dalvikvm(2123): threadid=3: reacting to signal 3
11-28 15:22:57.994: I/dalvikvm(2123): Wrote stack traces to '/data/anr/traces.txt'
11-28 15:23:07.315: I/Process(2123): Sending signal. PID: 2123 SIG: 9 
```

在视频教程中，他说这很简单。他使用了 facebook.logout(Context context) 函数。他的代码运行良好，但我的却不行。

所以，有什么问题，我不明白。提前致谢。

**注意：**我是 Android 和 Facebook SDK 的新手。事实上，这是我在android中的第一个项目。

我为 min android sdk 8，目标 sdk 16 运行这个项目，当我在 android 2.3.3 (api 10) 模拟器中运行它时，我可以很容易地注销，但是当我在 android 4.0.3 (api 15) 模拟器中运行它时，我可以登录但是当我尝试注销应用程序崩溃并且我收到上面的错误。

我正在关注一个视频教程：[mybringback all 11 videos about facebook sdk in android](http://www.youtube.com/watch?v=SrJsLFAYITI&feature=plcp)

在视频教程中，他说这很简单。他使用`facebook.logout(Context context)`函数。他的代码工作正常，但我的不行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:51:53.877

在您的 facebook.java 中有一个功能...

```
public void authorize(Activity activity, String[] permissions, int activityCode, final DialogListener listener) 
    {

        boolean singleSignOnStarted = true;

        mAuthDialogListener = listener;
        Log.d("in authorise", "authorise");
        // Prefer single sign-on, where available.
        **if (activityCode >= 0) 
        {
            Log.d("single sign", "single sign");
            singleSignOnStarted = startSingleSignOn(activity, mAppId, permissions, activityCode);
        }**/////put comment for this code...
        // Otherwise fall back to traditional dialog.
       // else
            startDialogAuth(activity, permissions);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T17:46:17.463

您使用的 Facebook SDK 版本相当旧（是的，我知道它是最新发布的）。因此，它在内部所做的一些事情是为了在 Froyo (2.2) 上工作，并且不考虑 ICS (4.0) 引入的更改。

ICS 中的一项此类更改是默认情况下启用了应用程序的严格模式。严格模式在运行时对应用程序行为进行大量检查，以确保最佳实践和流畅的用户体验。其中一项检查是应用程序是否正在主线程上执行网络请求。这是一项重要的检查，因为网络请求可能会阻塞很长时间，在此期间 UI（在主线程上呈现）将对用户无响应。

您在 ICS 上看到的错误正是 - 在 Facebook`logout()`方法中对主线程上的网络请求的严格检查失败。因此例外`NetworkOnMainThread`。

为避免这种情况，`onClickListener`您可以使用`AsyncTask`with simple `Runnable`（使用静态[`AsyncTask.execute()`](http://developer.android.com/reference/android/os/AsyncTask.html#execute%28java.lang.Runnable%29)方法）在另一个线程上启动注销。像这样的东西（在浏览器中编写的代码，所以检查理智）：

```
 // ... cut ...
    if(fb.isSessionValid()){
        //button close our session - log out of facebook
        try {
            AsyncTask.execute(new Runnable() {
                @Override
                public void run() {
                    fb.logout(getApplicationContext());
                    // You can also use MainActivity.this instead of getApplicationContext()
                }
            });
            updateContentView();
        } catch (MalformedURLException e) {
    // ... cut ... 
```

这当然是简单的版本，只是为了解锁你。如果您希望您的 UI 与注销完成时完全同步，您将不得不编写更多代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T19:16:21.677

Facebook API 每天都在变化，这是一个废话，但你可以检查这个项目，我认为它对你来说是完美的

[https://github.com/facebook/facebook-android-sdk](https://github.com/facebook/facebook-android-sdk)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T01:14:12.127

啊哈，我遵循了 AsyncFacebookRunner.java 类并使用了它的注销方法，问题就消失了。

像

```
myAsyncFB.logout(Context, RequestListener); 
```

# c - C fscanf 和指针

> ID：13606321
> 
> 赞同：0
> 
> 时间：2012-11-28T13:35:20.910
> 
> 标签：c, printing, struct, scanf, printf

在尝试读/写二进制文件惨遭失败后，我尝试用 fscanf 和 fprintf 做同样的事情，它似乎工作正常，但再次..阅读根本不起作用，我再一次无法真正说出原因：

结构+指针：

```
typedef struct flug
{
    int         flugnummer;
    char        flugziel[50];
    enum TAG    flugtag;
    int         flugzeit_stunde;
    int         flugzeit_minute;
    int         gateway;
    char        status[10];
    struct flug *next;
}FLUG;

typedef FLUG *ELEM_ZGR; 
```

全局变量：

```
enum TAG {
Sonntag,
Montag,
Dienstag,
Mittwoch,
Donnerstag,
Freitag,
Samstag
};

static ELEM_ZGR first;
char const datei[] = "ddslist.txt"; 
```

写：

```
int fluege_sichern() {
ELEM_ZGR curr;
FILE *fp;

curr = first;

    if (fopen_s(&fp, datei,"a+") != 0)
    {
        printf("\nDatei %s nicht zum Anhaengen zu oeffnen",datei);
        PAUSE;
        exit(1);
    }

    while (curr != NULL) {
        fprintf(fp,"%d %s %d %d %d ",
            curr->flugnummer, curr->flugziel, curr->flugzeit_stunde, curr->flugzeit_minute, curr->gateway);
        fclose(fp);

        curr = curr->next;
    }

} 
```

读：

```
void fluege_laden() {
ELEM_ZGR curr;
FILE *fp;

int i = 0;
curr = NULL;

    if (fopen_s(&fp, datei,"r") != 0)
    {
        printf("\nDatei %s nicht zum Lesen zu oeffnen",datei);
        PAUSE;
        exit(1);
    }

    printf("\n\nArtikelliste\nArtikelnummer  Artikelbezeichnung  Artikelpreis");

    while (fscanf_s(fp,"%d %s %d %d %d ",
            &curr->flugnummer, curr->flugziel, &curr->flugzeit_stunde, &curr->flugzeit_minute, &curr->gateway) != EOF)
    {
           printf("\n%d %s %d %d %d ",
            curr->flugnummer, curr->flugziel, curr->flugzeit_stunde, curr->flugzeit_minute, curr->gateway);
           if (++i%10==0)
               PAUSE;
    }

    fclose(fp);
} 
```

请帮帮我。即使是一点提示也会有很大的帮助。[编辑1]

```
void fluege_laden() {
ELEM_ZGR curr;
FILE *fp;

int i = 0;
curr = (ELEM_ZGR)malloc(sizeof(struct flug));

    if (fopen_s(&fp, datei,"r") != 0)
    {
        printf("\nDatei %s nicht zum Lesen zu oeffnen",datei);
        PAUSE;
        exit(1);
    }

    printf("\n\nArtikelliste\nArtikelnummer  Artikelbezeichnung  Artikelpreis");

    while (fscanf_s(fp,"%d %s %d %d %d ",
            &curr->flugnummer, curr->flugziel, &curr->flugzeit_stunde, &curr->flugzeit_minute, &curr->gateway) != EOF)
    {
           printf("\n%d %s %d %d %d ",
            curr->flugnummer, curr->flugziel, curr->flugzeit_stunde, curr->flugzeit_minute, curr->gateway);
           if (++i%10==0)
               PAUSE;
    }

    fclose(fp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:37:33.040

看：

```
void fluege_laden() {
  ELEM_ZGR curr;
  FILE *fp;

  int i = 0;
  curr = NULL;  /* NULL! */ 
```

加载时，`curr`是`NULL`. 您不能写入`NULL`指针，这是未定义的行为。您需要分配内存。

另外，考虑*不*包括在 中的指针，`typedef`很难理解和记住它`ELEM_ZGR`是一个指针。指针语义在 C 中很重要，最好让所有代码读者清楚地知道发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:47:26.190

在您的读取函数`curr`中是 a 的 typedef `FLUG *`，您将其初始化为`NULL`：

```
curr = NULL; 
```

然后你尝试在你的`fscanf`：

```
while (fscanf_s(fp,"%d %s %d %d %d ", &curr->flugnummer,... 
```

那不好。如果你有一个指针并且你想给它存储一些东西，你需要给它一些内存：

```
curr = malloc(sizeof(FLUG)); 
```

那么你应该可以使用它了。完成后，您还需要调用`free(curr)`以释放该内存。

# java - catalina.home 未被 intellij 识别

> ID：13606328
> 
> 赞同：0
> 
> 时间：2012-11-28T13:35:32.247
> 
> 标签：java, spring, intellij-idea, catalina

我正在使用一个属性占位符来引用一个文件，它在部署时可以工作，但是 intellij 没有拿起 catalina home。我已经尝试在 intellij ide 设置中设置 windows 环境变量和路径，没有区别仍然显示错误（这在 ide 中破坏了我的数据源）我可以将 conf 文件放在项目目录中，但是项目将不能移植到其他tomcat安装没有进一步的诡计多端....

![Darcula oo err, catalina home is a problem](../Images/518a0de74d54cab283938928c4068fb9.png)

肯定有一种方法可以让 intellij 在我的 spring 应用程序上下文中正确识别和引用 ${catalina.home} 吗？

Sys 变量设置正常：

![在此处输入图像描述](../Images/7e194096b8ba29d570ef8d4a55fa7116.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T10:10:48.437

显然这是一个开放的[错误](http://youtrack.jetbrains.com/issue/IDEA-92348#comment=27-402599)。但是，对我来说，解决方法是简单地将属性文件复制到项目工作区（在我的情况下是资源目录），但保持 applicationContext.xml 指向`${catalina.home}`.

Intellij 然后获取属性值，然后可以轻松设置数据源。

# sql-server - SQL Server - 不记得在查询期间访问插入/删除/更新的关键字？

> ID：13606339
> 
> 赞同：0
> 
> 时间：2012-11-28T13:36:21.777
> 
> 标签：sql-server, insert, documentation

我知道在 SQL Server 中有一种方法可以获取插入的数据，但我似乎无法记住要使用的关键字。

运行查询是这样的：

```
INSERT INTO table1
OUTPUT inserted.id1, inserted.id2 INTO someOtherTable
(id1, id2) VALUES (1,2) 
```

在搜索或其他类似关键字时`output`，`inserted`我会不断寻找有关使用存储过程中的 insert 或 output 关键字的页面。我知道我没有疯，这存在。我只是想知道是否有人可以将我指向它的文档页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:40:09.267

我相信您正在寻找 SQL Server 中的`inserted`&`deleted`表。

[http://msdn.microsoft.com/en-us/library/ms191300.aspx](http://msdn.microsoft.com/en-us/library/ms191300.aspx)

# c# - 实体类到数据表

> ID：13606343
> 
> 赞同：9
> 
> 时间：2012-11-28T13:36:34.493
> 
> 标签：c#, datatable, entity

我正在尝试创建一个通用类来保存日志

这里我们使用实体框架，所以假设我们有表 mng_users(string usr_name, int usr_id) 为 itentity 创建相应的类）

有没有办法实现 toDataTable 方法将实体转换为数据表（不是列表，只有 1 行）所以我可以这样做：

将 mng_users1 和 mng_users2 作为 mng_users 实体类（都具有相同的 id 但名称不同）

调用方法“保存日志（mng_users1，mng_users2）；” 并执行以下代码：

```
 private DataTable toDataTable(Object T)
    {
        DataTable vDataTable = new DataTable();

        //AddColums here
        //AddRow with the respective values here

        return vDataTable;
    }

    public void savelog(Object newObject, Object oldObject)
    {

        DataTable newvalue, oldvalue;

        newvalue = toDataTable(newObject);
        oldvalue = toDataTable(oldObject);

       string FieldNames = string.Empty, FieldValuesFrom = string.Empty, FieldValuesTo = string.Empty;
       foreach (DataColumn item in newvalue.Columns)
                {
                    if (newvalue.Rows[0][item].ToString() != oldvalue.Rows[0][item].ToString())
                    {
                        FieldNames += (FieldNames.Length > 0 ? " | " : string.Empty) + item.ColumnName;
                        FieldValuesFrom += (FieldValuesFrom.Length > 0 ? " | " : string.Empty) + newvalue.Rows[0][item].ToString();
                        FieldValuesTo += (FieldValuesTo.Length > 0 ? " | " : string.Empty) + oldvalue.Rows[0][item].ToString();
                    }

                }
        // Save log to sql code here
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-28T13:56:47.943

类似下面的代码应该可以工作。它可能需要根据属性是否`private`/`protected`以及是否有任何公共属性被索引进行调整，但它应该可以帮助您入门。

```
private DataTable ToDataTable<T>(T entity) where T : class
{
   var properties = typeof(T).GetProperties();
   var table = new DataTable();

   foreach(var property in properties)
   {
       table.Columns.Add(property.Name, property.PropertyType);
   }

   table.Rows.Add(properties.Select(p => p.GetValue(entity, null)).ToArray());
   return table;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-22T09:45:32.787

我对上述示例的改进：

*   将语法更改为扩展方法
*   现在扩展方法将现有对象实体列表转换为 DataTable
*   添加了对 Nullable 属性类型的支持

    ```
    public static DataTable ToDataTable<T>(this IEnumerable<T> entityList) where T : class
    {
        var properties = typeof(T).GetProperties();
        var table = new DataTable();

        foreach (var property in properties)
        {
            var type = Nullable.GetUnderlyingType(property.PropertyType) ?? property.PropertyType;
            table.Columns.Add(property.Name, type);
        }
        foreach (var entity in entityList)
        {
            table.Rows.Add(properties.Select(p => p.GetValue(entity, null)).ToArray());
        }
        return table;
    } 
    ```

# c - C如何以双精度数据类型存储1001位数？

> ID：13606346
> 
> 赞同：4
> 
> 时间：2012-11-28T13:36:37.550
> 
> 标签：c, double

这是计算 2 的 1000 次方的代码。

```
#include <stdio.h>

int main() {
    double multiply = 1;
    int i;
    for(i = 1; i <= 1000; i++) {
        multiply *= 2;
    }
    printf("%lf\n", multiply);
    return 0;
} 
```

还有我系统上的输出，还有[ideone](http://ideone.com/JI2H0l)

```
10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376 
```

这正是正确的答案：

```
irb(main):001:0> 10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376 == 2 ** 1000
=> true 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T13:39:38.237

根据[IEEE 754](http://de.wikipedia.org/wiki/IEEE_754)，浮点数等以 2 次方格式存储：以 2 为底的符​​号、尾数和指数。

因此，简单地说，2^1000 存储的尾数正好为 1，指数为 1000。

如果您要添加 2，则该值不再正确。

# c++ - 使用可执行应用程序创建和“调度”pthread

> ID：13606348
> 
> 赞同：0
> 
> 时间：2012-11-28T13:36:40.990
> 
> 标签：c++, pthreads

我想创建一个创建线程（pthreads）的“调度程序”，每个 pthread 将运行一个可执行文件，并且我想通过调度程序控制调度。

我想在应用程序中做的唯一更改是添加一些“等待”代码行，我希望调度程序能够唤醒它们。

* * *

据我所知，执行应用程序的方式是在每个 pthread 中使用“execve”，但是这样，应用程序将不会保留以前的 DATA 段，因此我无法通过条件变量控制它们。

* * *

有什么好的方法呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:45:47.843

`SIGSTOP`您可以使用和`SIGCONT`信号来控制您的子进程。

线程是完全无关的。

# java - 如何使用局部变量来使用 BlueJ 中另一个类的方法？

> ID：13606349
> 
> 赞同：-2
> 
> 时间：2012-11-28T13:36:55.040
> 
> 标签：java, class, variables, methods, local

基本上我有两个班级国家和城市。在城市中，我有一个名为 getSize 的方法。我想在 Country 类中使​​用此方法，因此我尝试使用此方法：

```
City c = City.getSize(); 
```

要将方法存储为局部变量，但我收到有关不兼容类型或静态方法的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:38:34.667

你能显示错误吗？

你为什么不创造

```
City c = new City(); 
int size = c.getSize(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:38:13.463

如果您的方法`getSize`不是静态的，您应该这样做：

```
City c = new City();
int size = c.getSize(); // use the returned value (assuming it is returning an integer) 
```

如果该方法是静态的，那么您可以直接将其与类名一起使用：

```
int size = City.getSize(); 
```

但我认为你需要第一个，因为所有城市实例都有不同的大小。

对于这个问题：`To store the method as a local variable`

答：你不能在java中做这样的事情。您应该首先创建该类的一个实例，然后您可以使用该实例多次调用该方法。

# javascript - 如何将 bootstrap-button.js 与 Meteor 一起使用？

> ID：13606350
> 
> 赞同：0
> 
> 时间：2012-11-28T13:36:56.203
> 
> 标签：javascript, jquery, twitter-bootstrap, meteor

我正在尝试将 Boostrap 的 button.js 与 Meteor 一起使用，但它并没有真正达到我期望的效果。

以下方法用于处理登录事件：

```
Template.login_form.events['click #login-button'] = function (evt, tmpl){
     console.log($('#'+evt.target.id));
     console.log([evt.target]);
     console.log($('#'+evt.target.id).button('loading'));
     console.log(evt.target.button('loading'));
}; 
```

前两个方法返回完全相同的东西，一个带有#login-button DOM 元素的数组。但是，查看后两个调用，只有使用 JQuery 查找的调用才会起作用。

一般来说，当涉及到 Bootstrap、JQuery 或 JS 时，我是否遗漏了一些东西，或者这是 Meteor 的怪癖？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:06:19.427

bootstrap`button`方法仅适用于 jQuery 对象，而不是普通的 DOM 对象。所以，这与 Meteor.js 无关。您的最后一个示例可能如下所示：

```
console.log($(evt.target).button('loading')); 
```

编辑：顺便说一句，以下两行也不等价：

```
 console.log($('#'+evt.target.id));
 console.log([evt.target]); 
```

后者返回一个普通数组，而 jQuery 函数`$`返回一个特殊的 jQuery 集合，其中包括提供`button`方法。

# c++ - 使用正确的操作数

> ID：13606353
> 
> 赞同：0
> 
> 时间：2012-11-28T13:37:01.937
> 
> 标签：c++, operand

我正在尝试实现一个从帐户中获取余额并减去给定金额的系统。这是我的方法。

```
transaction withdraw(double amount, double ID){
Account Temp(NULL,NULL,NULL,NULL,NULL);

Temp = Llist.search(ID);  //Returns an Account Objet

Temp.setBalance(Temp.getBalance - amount); //Here is the error, '-' illegal, left operand   has type 'double (_thisCall Account::* )(void)'
string t = "Withdraw";

    transaction trans(t, amount, ID, name);
return trans;
} 
```

我在问我将哪个操作数放入从“Temp.getbalance”中正确减去“a”的行中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:38:41.930

不要忘记函数调用的括号 - 否则你正试图从函数指针中取出一个 double ！

`Temp.setBalance(Temp.getBalance() - amount);`

# php - 将复选框表单发送到特定 URL

> ID：13606359
> 
> 赞同：1
> 
> 时间：2012-11-28T13:37:18.750
> 
> 标签：php, html, forms, checkbox

```
 <form action="" method="get" name="combination" target="_self">
            <input type="checkbox" name="tag[]" value="pop" />pop<br /><br />
            <input type="checkbox" name="tag[]" value="rock" />rock<br /><br />
            <input type="checkbox" name="tag[]" value="indie" />indie<br /><br />
            <input type="checkbox" name="tag[]" value="electronic" />electronic<br />
    <input name="" type="submit">
    </form> 
```

如果用户单击弹出框和摇滚框，我想将表单发送到`www.mysite.com/?view=listen&tag[]=pop&tag[]=rock`我该怎么做？用户可以选择一个、两个或三个标签。所以标签数组的元素数量是可变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:40:15.807

您不能使用纯 HTML。您只能为该`action`属性指定一个 URL。

但是您可以使用 JavaScript（如果没有启用 JS，它将使您的表单无用）。只需检查复选框的`checked`状态并相应地交换`action`URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:52:57.923

实际上您不希望表单调用该操作，因此您必须取消提交。它缺少返回错误。“location.href”也是错误的，正确的是“parent.window.location.href”

现在尝试并工作。

```
 <form action=""  method="get" name="combination" target="_self">
            <input type="checkbox" name="tag[]" value="pop" />pop<br /><br />
            <input type="checkbox" name="tag[]" value="rock" />rock<br /><br />
            <input type="checkbox" name="tag[]" value="indie" />indie<br /><br />
            <input type="checkbox" name="tag[]" value="electronic" />electronic<br />
    <input name="" type="submit">
    </form>   

   <script>
    $("form").submit(function(){
       var url = "http://www.mysite.com/?view=listen&";

       var i = 0;
      $("input:checked").each(function(){
          url += "tag[" + i + "]=" + $(this).val() + "&";
          i++;
      });
      parent.window.location.href = url;
      return false;
    });
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T04:03:56.630

也许我在这里没有得到确切的问题，但为什么不对表单进行一些小的更改，如下所示：

```
<form action="http://www.mysite.com/">
    <input type="hidden" name="view" value="listen" />
    <input type="checkbox" name="tag[]" value="pop" />pop<br /><br />
    <input type="checkbox" name="tag[]" value="rock" />rock<br /><br />
    <input type="checkbox" name="tag[]" value="indie" />indie<br /><br />
    <input type="checkbox" name="tag[]" value="electronic" />electronic<br />
    <button type="submit">submit</button>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T13:53:44.487

这就是表单操作的用途 - 在这里您将指定表单的去向。

使用[jQuery](http://jquery.com)，您可以编辑特定事件的表单操作。为您的表单提供一个 id，例如`my_form`您的复选框描述性 id：

```
<form id="my_form" action="" method="get" name="combination" target="_self">
    <input id="pop_check" type="checkbox" name="tag[]" value="pop" />pop<br /><br />
    <input id="rock_check" type="checkbox" name="tag[]" value="rock" />rock<br /><br />
    <input type="checkbox" name="tag[]" value="indie" />indie<br /><br />
    <input type="checkbox" name="tag[]" value="electronic" />electronic<br />
    <input name="" type="submit">
</form> 
```

然后，在表单下方，您可以编写以下 jQuery 代码：

```
<script type="text/javascript">
    $("checkbox[name='tag']").on("click", function( //when any of the checkboxes is clicked the following code runs
        if($("#pop_check").is(":checked") || $("#rock_check").is(":checked")){ //if one of the two target check boxes is checked, the form action will be changed as desired
            $("#my_form").attr("action","www.mysite.com/?view=listen");
        }else if(!$("#pop_check").is(":checked") && !$("#rock_check").is(":checked")){ //since the user can also toggle off all checkboxes again, we need to check for that too and change the form action back to "" if required
            $("#my_form").attr("action","");
        }
    ));
</script> 
```

如果你（即将）学习 jQuery，我强烈推荐它。这里有一些非常好的教程，您可能会觉得有帮助，它们教会了我几乎所有关于 jQuery 的知识：[http ://thenewboston.org/list.php?cat=32](http://thenewboston.org/list.php?cat=32)

# 编辑

还有另一种方法可以做到这一点。在提交表单后运行的 php 代码中，您可以简单地检查是否选中了两个复选框中的任何一个，并根据该复选框使用 php 的标头函数进行重定向：

```
<?php
    //After form submission with form action="" (i.e. at the top of your php file)
    if(in_array("pop", $_GET['tag']) || in_array("rock", $_GET['tag'])){
        header('Location:www.mysite.com/?view=listen&tag=pop&tag=rock');
        exit;
    }
?> 
```

实际上，那么您应该使用 post 作为表单方法而不是 get，因为表单结果不需要可收藏。阅读更多关于 php 的内置[header()](http://php.net/manual/en/function.header.php)和[in_array()](http://php.net/manual/en/function.in-array.php)函数。

# java - 访客模式和策略模式有什么区别？

> ID：13606361
> 
> 赞同：14
> 
> 时间：2012-11-28T13:37:26.423
> 
> 标签：java, design-patterns, strategy-pattern, visitor-pattern

我已经学习了这两种模式，但不了解这两种模式之间的区别。

我不知道使用这些模式的场景、时间和地点。

任何人都可以解释差异和用例吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T13:43:48.850

主要区别在于*策略模式*封装了一组相关行为，而*访问者模式*封装了多个这样的组。

*   **当您需要封装行为时，您应该使用*策略***模式 - 如果您有一系列算法并且需要在运行时在它们之间进行选择，您应该使用策略模式。这很常见：每次[对接口编程](https://stackoverflow.com/q/383947/335858)时都会发生这种情况。
*   **您应该使用*访问者模式*来实现*双重分派***- 如果您有一组算法需要相对于多个对象是虚拟的。这要少得多，部分原因是实施起来要困难得多。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-03T10:16:54.087

***访客模式意图：***

> 表示要对对象结构的元素执行的操作。Visitor 允许您定义一个新的操作，而无需更改它所操作的元素的类。

***在以下情况下使用访客模式：***

1.  *必须对结构中分组的不同类型的对象*执行类似的操作**
**   您需要执行许多不同且不相关的操作。*它将操作与对象结构分开**   *必须在不改变对象结构的情况下*添加新操作**   *将相关操作收集到单个类*中，而不是强迫您更改或派生类*   *将函数添加到您没有源或无法更改源的*类库**

 ***尽管访问者模式提供了在不更改 Object 中现有代码的情况下添加新操作的灵活性，但这种灵活性也有一个缺点。

如果添加了新的 Visitable 对象，则需要更改 Visitor 和 ConcreteVisitor 类中的代码。有一个解决方法可以解决这个问题：使用反射，这会对性能产生影响。

有关详细信息，请参阅[oodesign 文章](http://www.oodesign.com/visitor-pattern.html)和[sourcemaking](https://sourcemaking.com/design_patterns/visitor)文章

***策略模式意图：***

> 定义一系列算法，封装每个算法，并使它们可互换。策略让算法独立于使用它的客户端而变化。

策略可以让你改变一个对象的胆量。

有关详细信息，请参阅以下 SE 问题：

[策略模式的真实示例](https://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern/35180265#35180265)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T13:43:22.533

访问者模式用于遍历对象层次结构并提供一些功能，例如打印或报告等，我使用它来提供不同的格式（文本/HTML）来通过编写多个访问者来打印对象层次结构，每种格式一个。层次结构中的对象是可访问对象。

策略模式用于根据输入选择特定的逻辑路径。一个典型的例子是身份验证过滤器，其中基于`Authorization`HTTP 标头中的值，选择并运行不同的身份验证策略，如 NTLM/Negotiate/Basic。过滤器将持有对 AuthenticationStrategy 接口的引用，根据传入的请求，选择特定的身份验证策略并将其分配给该引用，并且随后的代码不需要知道正在使用的确切策略。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-02-18T16:46:16.017

**访问者**适用于当您有一个类族并且您需要为该族中的每个类添加新功能但不涉及类本身（或希望将新功能全部定义在一个地方 - 访问者）时

**策略**适用于当您有一系列类需要能够做某事才能正常工作（例如对它们包含的一些对象进行排序）但您希望客户端或您的依赖注入告诉他们该做些什么时那。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-19T07:29:21.090

想象一下，您正在构建一个用于生成收据的收银机应用程序。假设您想要：
1\. 确保不同种类的物品（书籍、水果、肉类、洗漱用品等）的处理方式不同
2\. 将实际价格计算的逻辑与物品定义分开
3\. 确保如果商店开始销售全新的东西（比方说按长度收费的布料），您不必更改太多代码

**访问者**可以是一个类，它根据正在处理的项目类型定义不同类型的计算。这是一项将价格计算中的差异从项目层次结构中移开的服务。
[![在此处输入图像描述](../Images/c9f72d56b923e35d062bdf03148e1309.png)](https://i.stack.imgur.com/xL7yV.png)

的身体`getPrice`可能看起来像这样：

```
getPrice(Calculation c) {
    return c.calculate(this);  // <-- visitor.visit( specific implementation )
} 
```

并说`ShoppingCart`你会做：

```
calc = getPriceCalculator()
foreach item in items:
    totalPrice += item.getPrice(calc) 
```

想象一下这样的场景：在黑色星期五，你想做一些疯狂的折扣，所有书籍的 70% 折扣，所有水果的 50% 折扣。您可以轻松地做一些事情：

```
BlackFridayCalculator extends PriceCalculator {
    calculate(Book b) { return 0.3 * parent.calculate(b) }
    calculate(Fruit f) { return 0.5 * parent.calculate(f) }
}

// and in getPriceCalculator:
return (black friday time) ? new BlackFridayCalculator() : new PriceCalculator(); 
```

**相反，策略**可以具有不同类型的计算（策略）的层次结构，然后每个项目将定义应该使用哪个计算（策略）（“插入”）。

[![在此处输入图像描述](../Images/5006dee1c7e6b24660afa41bd7e96f00.png)](https://i.stack.imgur.com/XXvr2.png)

现在有很多方法可以定义哪个项目应该使用哪个计算。最直接的方法是给出`Item`方法`getCalculator`，让每个项目选择它需要的计算。

这可能不太动态 - 从某种意义上说，每个项目都需要有一个预定义的计算器才能使用。但是想想这种情况：商店的老板决定菠萝和西瓜应该按件出售——我们可以很容易地默认`Fruit`使用`WeightCalculator`并创建一个按数量出售的水果子集。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-19T12:45:37.763

除了上面提到的行为差异之外，我还经历了一个项目期间在依赖项和用例方面的差异，如下所示。

例如，Visitor 知道具体的类。因此，在向层次结构中添加新的具体类时，您会以更改访问者代码为代价变得更加灵活。战略中没有这样的东西。在这种情况下，如果您的方法只返回带有给定输入的一些输出，而不管上下文如何，则 Strategy 变得更合适。

此外，访问者模式还用于实现 SOLID 的 SRP，以分离关注点。***

# ssh - 无法将 id_rsa 作为 RSA1 公钥加载

> ID：13606363
> 
> 赞同：37
> 
> 时间：2012-11-28T13:37:26.833
> 
> 标签：ssh

我在 Windows 7 64 位上使用 cygwin，我正在尝试`ssh -vvv localhost`

```
OpenSSH_6.1p1, OpenSSL 1.0.1c 10 May 2012
debug1: Reading configuration data /etc/ssh_config
debug2: ssh_connect: needpriv 0
debug1: Connecting to localhost [::1] port 22.
debug1: Connection established.
debug3: Incorrect RSA1 identifier
debug3: Could not load "/home/habdulmalak/.ssh/id_rsa" as a RSA1 public key 
```

使用生成`ssh-keygen -t rsa`的公钥并将公钥添加到 authorized_keys 文件中。

有什么线索吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-22T06:11:45.260

简而言之，它并不表示错误。这是正常的。

您可以在此处参考我的答案：
[尝试使用 RSA 密钥通过 SSH 连接到 EC2，获取：不正确的 RSA1 标识符...权限被拒绝（公钥）](https://stackoverflow.com/questions/12449626/trying-to-use-rsa-keys-to-ssh-into-ec2-getting-incorrect-rsa1-identifier-pe/15563793#15563793)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-31T20:07:48.610

如评论中所述，此错误是可以的。

你检查 /etc/hosts.deny 了吗？我的猜测是你`sshd: x.x.x.x`在那里有一个条目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-10T01:16:36.093

实际上，我意识到我得到同样错误的原因是因为 sshd 没有在我试图连接的 VM 服务器上运行:) 运行它为我修复了问题。

# c# - 吐出带有'，'分隔符的字符串和用''编码的数据

> ID：13606366
> 
> 赞同：0
> 
> 时间：2012-11-28T13:37:40.140
> 
> 标签：c#, .net, string

> **可能重复：**
> [C#，正则表达式：如何解析逗号分隔的值，其中一些值可能是引用的字符串本身包含逗号](https://stackoverflow.com/questions/1189416/c-regular-expressions-how-to-parse-comma-separated-values-where-some-values)

我实际上正在处理一个数据是这样的文本文件

```
 //Sample Structure = 'Name','Address','TelNumber'
    Sting OriginalData= "'Mr Worgon','27,4 Streeat A,US', '60231212'"; 
```

我正在尝试

```
 String[] SampleData;
    String ABC1,ABC2,ABC3;

    SampleData = OriginalData.Split(',');
    ABC1 = SampleData[0];
    ABC2 = SampleData[1];
    ABC3 = SampleData[2]; 
```

但它似乎不合适，因为地址数据大多会有一个“，”。

对这种字符串控制有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T13:42:42.547

可以这样做：

```
string OriginalData= "'Mr Worgon','27,4 Streeat A,US', '60231212'";
var split = OriginalData.Split('\''); 
```

之后

```
ABC1 = SampleData[1];
ABC2 = SampleData[3];
ABC3 = SampleData[5]; 
```

换句话说，在这种具体情况下，每隔一个拆分数组元素。

# java - Android：从 GLSurfaceView 返回主要活动

> ID：13606369
> 
> 赞同：2
> 
> 时间：2012-11-28T13:37:50.220
> 
> 标签：java, android, opengl-es, android-activity, renderer

我不明白我的主要活动和 OpenGL 渲染器之间的流程。

当我的应用程序启动时，用户会看到一个非常漂亮的布局，它带有一个显示“开始渲染”的按钮。当用户单击按钮时，他/她将被转移到绘制精美图片的渲染器视图。然后当图片完成后，我想返回主屏幕（有按钮的那个），但我不知道如何。

我尝试从 GLRenderer 调用 setContentView(R.layout.activity_run)，但显然它不起作用。然后我尝试创建一个函数 Run.endRendering()，它是一个静态方法，并从 GLRenderer 内部调用。Run.endRendering() 应该调用 setContentView(R.layout.activity_run) 以希望它将视图传输回主屏幕，但是由于 R.endRendering() 是一个静态方法，它不能调用setContentView() 的非静态方法。

所以现在我完全迷路了。有人可以对这个主题有所了解吗？

这些是我拥有的骷髅。

主要活动：

```
public class Run extends Activity
{
    private GLSurfaceView glSurface;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_run);

        // in here I mess with the main layout view the user
        // is supposed to see. when he/she clicks on a button
        // he/she will be transferred to the opengl view

        // on button click:
        glSurface = new GLSurfaceView(this);
        glSurface.setRenderer(new GLRenderer());

        setContentView(glSurface);
    }
} 
```

和渲染器：

```
public class GLRenderer implements Renderer
{
    // onSurfaceCreated, onDrawFrame, onSurfaceChanged, etc.

    // the action happens here. From here I want to return to
    // the main activity that created this renderer.
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:17:00.447

您可以做的一件事是让您的 GLSurfaceView 成为该活动布局的一部分。Activity 的 UI 线程一直在运行。在其中创建一个处理程序，它将负责从布局中删除 GLSurfaceView 并显示您的正常非 opengl 视图。

```
Handler mainHandler = new Handler() {
    public void handleMessage(Message msg) {
         // remove surfaceview from layout and show non-opengl views
    }
}; 
```

然后，您可以将您的活动的引用（可能使用接口）传递给 GLRenderer。哪个可以调用。

```
activity.mainHandler.sendMessage(msg) 
```

# ios - 从 UIViewController 创建缩略图而不显示

> ID：13606370
> 
> 赞同：4
> 
> 时间：2012-11-28T13:37:57.440
> 
> 标签：ios, ipad

我正在制作一个 Ipad 应用程序，它包含大约 100 个代表项目的不同视图。为了能够在项目之间快速滚动，我正在尝试创建一个缩略图视图。问题是我必须在 UIViewController 本身显示在屏幕上之前制作缩略图。

目前我正在使用这段代码：

```
ProjectViewController2 * page2 = [[ProjectViewController2 alloc]initWithNibName:@"ProjectViewController2" bundle:nil displayRightArrow:FALSE media:nil];
[page2 setMyMedia:media];
[page2 configurePage];
CGSize size = [page2.view bounds].size;
UIGraphicsBeginImageContext(size);
[[page2.view layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
NSString * filePath= [NSHomeDirectory() stringByAppendingFormat:@"/Documents/project/%@", [media fileName]];
[UIImageJPEGRepresentation(newImage, 1.0) writeToFile:filePath atomically:TRUE];
UIGraphicsEndImageContext(); 
```

这行得通，我从 UIViewController 获得了一个屏幕截图，但没有主图像。这些图像不是在 NIB 文件中设置的，而是在 configurePage 函数中设置的。在 NIB 文件中设置的背景颜色和菜单栏在缩略图中可见。

我怀疑我没有看到图像，因为 UIViewController 没有显示在屏幕上，因此没有调用某种绘图函数。

任何帮助都非常感谢！

斯蒂金

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:59:22.503

什么时候调用 configurePage 方法？在 ViewDidLoad 上？在哪里使用 initWithNibName 初始化 ProjectViewController，因此可能显示 nib 元素的原因，您可以获得它们的图像表示。我的猜测是编写一个自定义初始化程序，它将项目图像作为初始化序列的一部分，或者可能测试将 configurePage 代码移动到其他 viewController 方法之一，例如 viewWillAppear。只是一个想法。

# sql-server - Entity Framework 5 数据映射

> ID：13606371
> 
> 赞同：1
> 
> 时间：2012-11-28T13:37:59.517
> 
> 标签：sql-server, entity-framework

我已将复杂类型映射到 SP 的结果，并收到以下错误：

> 数据读取器与指定的“CLMModel.GetContractPerformanceReview_Result”不兼容。类型的成员“LastYearProfit”在数据读取器中没有同名的对应列。

我知道这通常表明映射类型有问题，所以我查看并调整它们无济于事。传入类型是`decimal(18, 2)`（在 SQL Server 上），映射类型也是`decimal(18, 2)`. 我尝试将精度提高到`38,2`没有成功，因为我认为这可能是检测到可能更大的值的情况。

该值是从具有此定义的列生成的，因此我看不出它无法成功映射的原因。

我什至尝试过`Create a new Complex Type`使用生成的类型，但它仍然失败。我已经确认字段名称也匹配。

广告协助将不胜感激。我曾尝试在 SO 上搜索此内容，但没有成功，但如果您还有其他问题可以指出，请执行。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-08T10:53:43.113

好的，我找到了原因，就是生成这个响应的存储过程根据参数创建了不同的结果集。这意味着当我手动运行它时，它显示了列，但实体框架无法正确识别正确的列。

所以教训是 - 如果您的 SP 针对不同的参数返回不同的结果，请确保它们都返回相同的列。

# javascript - 扩展原语而不进行原型设计

> ID：13606375
> 
> 赞同：3
> 
> 时间：2012-11-28T13:38:11.903
> 
> 标签：javascript

我正在开发一个非常丑陋的库，它可以让你做一些奇怪的事情。拥有一个图表，您可以以链式样式映射一组集合，并且当您更改要在整个系统中更改的值时。

当最终类型是 JS 原语时，问题就来了。

就我而言，在使用值和对象制作图表后，我可以执行以下操作：

```
CHAIN.components[0].value = 20; 
```

`components`是使用 setter 和 getter 对图节点进行过滤的函数。如果组件中只有一个节点被过滤，则用户设置的默认值将可用，而无需执行此操作：CHAIN.components.value = 20; 而是这样：CHAIN.components = 20;

现在的问题是该节点除了默认值（在我的情况下设置为`value`.

我如何在 Number 对象上使用 setter 和 getter 而无需在 Number.prototype 中进行黑客攻击，因为`CHAIN.components`现在是一个 Number（如果它不是一个原始的，我已经让它以一种不显眼的方式工作），但是当我想在`CHAIN.components.func()`那里调用是一个问题，因为`func`每次我进行设置或上车时我都必须附加到 Number.prototype`components`然后删除它。

您对完成这种行为有其他想法吗？

你想要代码所以这里是：

```
/*jslint nomen: true, sloppy: true*/
GRID.modules.OHM || Object.extend(GRID.modules, ( function() {
    var Node, Nodes, Ohm, num_proto = Number.prototype.__clone(), str_proto = String.prototype.__clone();
    Node = function(uid) {
        var UID = uid;
        this.getUID = function() {
            return UID;
        };
    };
    Nodes = function() {
        var stack = [];
        this.add = function(id, val) {
            var n = new Node(stack.length);
            val.id = id;
            Object.extend(n, val);
            stack.push(n);
            return n.getUID();
        };
        this.getById = function(id) {
            return stack.filter(function(v) {
                var a = id || v.id;
                return (v.id === a);
            });
        };
        this.getByUID = function(UID) {
            return stack[UID];
        };
        this.get = function(callback) {
            !Object.isString(callback) || ( callback = [callback]);
            var f = Object.isFunction(callback) ? callback : (Object.isArray(callback) ? function(k) {
                return (callback.indexOf(k.id) >= 0);
            } : function(k) {
                return true;
            });
            return stack.filter(f);
        };
    };
    Ohm = function(n) {
        var graph = n || (new Nodes()), filters = {}, __nodes = {}, addGS = function(obj, name, conf, binder) {
            var alfa = {};
            Object.extend(alfa, conf);
            if (!alfa.get) {
                alfa.get = function() {
                    var a = this.g.getById(this.p);
                    return a.length === 1 ? a[0] : a;
                }.bind(binder);
            } else {
                alfa.get = alfa.get.bind(binder);
            }
            if (!alfa.set) {
                alfa.set = function(value) {
                    this.g.getById(this.p).forEach(function(k) {
                        Object.extend(k, value);
                        return true;
                    });
                }.bind(binder);
            } else {
                alfa.set = alfa.set.bind(binder);
            }
            Object.defineProperty(obj, name, alfa);
        }, add = function(id, node) {
            if (__nodes.hasOwnProperty(id)) {
                addGS(__nodes, id, {
                    enumerable : true
                }, {
                    t : this,
                    p : id,
                    g : graph
                });
            }
            return graph.add(id, node || {});
        };
        Object.extend(this, {
            add : function() {
                add.apply(this, arguments);
            },
            map : function(name, f, that) {
                var n = name, filterer = ['add', 'map', '__all'];
                n = Object.isFunction(n) ? name.apply(that, arguments.slice(3)) : n;
                if (filterer.indexOf(n.toLowerCase()) >= 0) {
                    console.log("You can't map over a basic property of object !!! Please read the freakin' manual.");
                    return null;
                }
                if (!filters.hasOwnProperty(n)) {
                    filters[n] = new Ohm(graph);
                    addGS(this, n, {
                        get : function() {
                            this.g.get(this.f).forEach(function(v, key, arr) {
                                var temp, binder;
                                if (arr.length !== 1) {
                                    if (!this.filt.hasOwnProperty(v.id)) {
                                        addGS(this.filt, v.id, {
                                            set : function(value) {
                                                this.t.g.getById(this.p).filter(this.t.f).forEach(function(k) {
                                                    Object.extend(k, value);
                                                });
                                            },
                                            get : function() {
                                                var a = this.t.g.getById(this.p).filter(this.t.f);
                                                return a.length === 1 ? a[0] : a;
                                            }
                                        }, {
                                            t : this,
                                            p : v.id
                                        });
                                        (key !== arr.length - 1) || Object.extend(this.filt, this.g.get(this.f));
                                    }
                                } else {
                                    if (Object.isFunction(v.__new__)) {
                                        v.__default = function() {
                                            return Object.extend((new this.__new__(arguments)), this);
                                        };
                                    }
                                    if (!Object.isUndefined(v.__default)) {
                                        temp = this.filt;
                                        this.filt = Object.isFunction(v.__default) ? v.__default.bind(v) : v.__default;
                                        if (Object.isNumber(this.filt) || Object.isString(this.filt)) {
                                            var prot = Object.isNumber(this.filt) ? Number : String;
                                            for (var i in temp) {
                                                if (temp.hasOwnProperty(i) && !prot.prototype.hasOwnProperty(i)) {
                                                    var bin = {
                                                        t : temp,
                                                        m : i,
                                                        p : prot,

                                                    };
                                                    Object.defineProperty(prot.prototype, i, {
                                                        set : function(value) {
                                                            Object.defineProperty(this.p.prototype, this.m, {
                                                                configurable : true, // defaults to false
                                                                writable : false,
                                                                value : 1
                                                            });
                                                            delete this.p.prototype[this.m];
                                                            this.t[this.m] = value;
                                                        }.bind(bin),
                                                        get : function() {
                                                            Object.defineProperty(this.p.prototype, this.m, {
                                                                configurable : true, // defaults to false
                                                                writable : false,
                                                                value : 1
                                                            });
                                                            delete this.p.prototype[this.m];
                                                            return this.t[this.m];
                                                        }.bind(bin),
                                                        enumerable : true,
                                                        configurable : true
                                                    });
                                                }
                                            }
                                        } else {
                                            Object.extend(this.filt, temp);
                                        }
                                    }
                                    if (Object.isNumber(this.filt) || Object.isString(this.filt)) {
                                        var prot = Object.isNumber(this.filt) ? Number : String;
                                        for (var i in v) {
                                            if (v.hasOwnProperty(i) && !prot.prototype.hasOwnProperty(i)) {
                                                var bin = {
                                                    t : v,
                                                    m : i,
                                                    p : prot,

                                                };
                                                Object.defineProperty(prot.prototype, i, {
                                                    set : function(value) {
                                                        Object.defineProperty(this.p.prototype, this.m, {
                                                            configurable : true, // defaults to false
                                                            writable : false,
                                                            value : 1
                                                        });
                                                        delete this.p.prototype[this.m];
                                                        this.t[this.m] = value;
                                                    }.bind(bin),
                                                    get : function() {
                                                        Object.defineProperty(this.p.prototype, this.m, {
                                                            configurable : true, // defaults to false
                                                            writable : false,
                                                            value : 1
                                                        });
                                                        delete this.p.prototype[this.m];
                                                        return this.t[this.m];
                                                    }.bind(bin),
                                                    enumerable : true,
                                                    configurable : true
                                                });
                                            }
                                        }
                                    } else {
                                        Object.extend(this.filt, v);
                                    }
                                }
                            }, this);
                            return this.filt;
                        },
                        set : function(value) {
                            this.g.get(this.f).forEach(function(k) {
                                Object.extend(k, value);
                            });
                        }
                    }, {
                        t : this,
                        f : f,
                        g : graph,
                        filt : filters[n]
                    });
                }
            }
        }, true, true);
        addGS(this, '__all', {
            get : function() {
                var a = this.g.getById();
                Object.extend(__nodes, a.length === 1 ? a[0] : a);
                return __nodes;
            },
            enumerable : true
        }, {
            t : this,
            p : null,
            g : graph
        });
    };
    window['Ω'] = Ohm;
    return {
        OHM : Ohm,
    };
}())); 
```

现在演示：

```
var c = new Ω();
c.add('ann', {
__default : 58,
blah : 98,
ceva : function()
{
    console.log('asd');
}
});
c.add('ann2',{
    __default: function(){
       console.log('hello');
    },
    abc: 78,
    dce: function(){
       console.log(' world');
    }
};
c.add('b2', {
__new__ : function() {
    this.init = function() {
        this.id = 86;
    };
    this.mer = function() {
        console.log(this);
    };
},
els : 'asadar'
});
c.map('b2', function(k) {
return k.id === 'b2';
});
c.map('ann', function(k) {
return k.id === 'ann';
});
c.map('ann2', function(k) {
return k.id === 'ann2';
});
console.log(c.ann); // returns 58 ( the __default value )
console.log(c.ann.blah); // returns 98
console.log(c.ann.blah.blah); // undefined
console.log(c.ann2);  // function()
c.ann2(); // prints out 'hello'
c.ann2.cde(); // prints out 'world'
c.ann2 = 60;
console.log(c.ann2); // 60
console.log(c.ann2.cde()); // prints out 'world' 
```

此代码有效，但我必须使用 Number 或 String 原型的部分困扰着我。你有另一种方法吗？

原因是做一些有人说可以用 PHP 但不能用 JS 做的事情，这个家伙最近一直在和我一起在 WebGL 着色器上工作，并且讨厌他必须编写 700 行代码才能使用与 FBO 结合的多重效果而不是100 这将带他使用一个类似的工具，比如这个用 PHP 编写的工具。所以是的，我知道原始原型上的访问器是一种 hack，但是如果链端对象是原始对象，我如何使其不同而不必使用 valueOf？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T23:30:53.177

好的，现在我已经阅读了随附的代码（但无法全部遵循）。缺少一些评论，但我不会抱怨，我自己的代码并不好，因为我不希望任何人阅读或理解它们:-)

你是对的，你扩展原生原型的部分是可怕的。据我了解，您在返回数字/字符串之前在 Number 或 String 原型上定义了一个访问器属性。在获取和设置时，访问器属性都会被数据属性 (???) 覆盖，然后在存储/返回值之前删除整个属性。这似乎是一个允许原始值自定义属性的巧妙技巧，但是：

*   发生碰撞的风险很高。可以通过使用该`this`值作为查找表中的键（以区别于`(5).x`）来降低`(3).x`它，但仍然无法完全避免。
*   在访问/设置时自行删除的属性非常不直观。避免这种情况。
*   任意更改原语原型上的访问器属性是昂贵的。这是 4 个性能对比的总和。没有引擎能够优化这一点。而且您似乎经常使用它们。

如果你真的需要这个（我仍然没有得到你的理由），我会使用带有查找表的变体。它应该减少冲突（不确定您的代码如何处理它们），不会更改它们定义的访问器属性，因此更持久（尽管它可能会泄漏）：

```
// Let's call this
// PRIMITIVE PROXIES
// as they proxy real objects behind primitive values
var proxy = _.map( { // some map that works on Objects
    string: String.prototype,
    number: Number.prototype
}, function closure(type, proto) {
    var table = {};
    function setupProperty(prop) {
        if (prop in proto) return; // ah, we already proxied this kind of object
        Object.defineProperty(proto, prop, {
            configurable:true, // for deleting
            get: function getter() {
                // "this" is the primitive value
                if (!this in table)
                    return undefined;
                return table[this][prop]; // get prop from obj
            },
            set: function setter(val) {
                if (this in table)
                    table[this][prop] = val; // pass val to obj
            }
        });
    }
    return {
        create: function createProxy(prim, obj) {
            if (prim in table) // we already did create a proxy on this primitive
                return; // let's abort. You might continue to overwrite
            table[prim] = obj;
            Object.getOwnPropertyNames(obj).forEach(setupProperty);
            return prim; // the new "proxy"
        },
        move: function moveName(from, to) {
            if (to in table) return false;
            table[to] = table[from];
            delete table[from];
            return true;
        }
    };
});
proxy.create = function(prim, obj) {
    return proxy[typeof prim].create(prim, obj);
};
proxy.move = function(from, to) {
    return proxy[typeof from].create(from, to);
};
// USAGE:
// proxy.create works just like Object.extend
> var c = {ann: 58},
>     o = {blah: 98};
> proxy.create(c.ann, o);
> 58..blah
98
> c.ann.blah
98
> (58).blah = 60;
> o
{blah: 60}
> var num = c.ann; // 58
> c.ann.blah = function(){return "Hello"};
> num.blah()
"Hello"
> proxy.move(c.ann, c.ann = 78);
> c.ann
78
> (58).blah
undefined
> c.ann.blah()
"Hello"
> // getters/setters for properties are global:
> c.ann.blub = "something"; // does not work, there is no getter
> c.ann.blub
undefined
> proxy.create(58, {blub: "foo"})
> c.ann.blub // still returns
undefined
> c.ann.blub = "bar"; // but can be set now
> (58).blub + (78).blub
"foobar"
> // infinite lookup loops are possible:
> proxy.create("loop", {x:"loop"});
> "loop" === "loop".x
true
> "loop".x.x.x.….x
"loop" 
```

然而，有一件事你永远无法解决：

> 与对象不同，原始值不是唯一的；他们没有身份。

您将永远无法区分`c.ann`from`58`或`"loop"`from `"loop".x`，因此两者都将具有或不具有属性。这不是构建 API 的好前提。

所以，我还是推荐使用`Number`和`String`对象。您不需要对它们进行子类化（如我之前的回答所示），因为您似乎没有（m）任何方法，因此您可以轻松构建它们：

```
c.ann = new Number(58);
c.ann.blah = 98;
return c; 
```

对于操作员来说，应该几乎没有区别`typeof`。您能否添加更多使用该`__default`值的示例？

> 但是如果链端对象是原始对象，我怎样才能使它与众不同而不必使用 valueOf 呢？

回答这个简单的问题：那家伙是对的，如果不破解原生原型，它就无法在 JavaScript 中完成。你是对的，黑客非常丑陋:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:48:08.003

不要让它成为一个原始数字，让它成为一个表现得像一个数字的对象。您可以使用一个`Number`对象并使用您的自定义属性对其进行扩展（请参阅[https://stackoverflow.com/a/9338486/1048572](https://stackoverflow.com/a/9338486/1048572)），但为什么`Number`一般不子类呢？它只需要保留一个返回数字的[`valueOf`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/valueOf)：

```
function MyNumber(n) {
    this.value = Number(n);
}
MyNumber.prototype = Object.create(Number.prototype, {constructor:{value:MyNumber}});
MyNumber.prototype.valueOf = function() {
    return this.value;
};
// OK, we have to overwrite those methods as they don't work on subclasses of Number
["toExponential", "toFixed", "toLocaleString", "toPrecision", "toString"].forEach(function(name) {
    MyNumber.prototype[name] = function() {
        return Number.prototype[name].apply(new Number(this.value), arguments);
    };
});

// now extend the prototype with other properties, e.g. chaining methods 
```

当然，您可能需要创建`components`一个将给定数字（或 Number）转换为 MyNumber 的 setter：

```
var actualNumber = new MyNumber;
Object.defineProperty(MyFabulousChainingThing, "components", {
    get: function() { return actualNumber; },
    set: function(x) { actualNumber.value = Number(x); }
}); 
```

# amazon-s3 - s3 亚马逊域名

> ID：13606381
> 
> 赞同：1
> 
> 时间：2012-11-28T13:38:25.817
> 
> 标签：amazon-s3

您好刚开始使用s3 amazon服务

当我尝试访问

s3.amazonaws.com/bucket_name/file.html

我收到这样的错误消息

```
The bucket you are attempting to access must be addressed using the specified endpoint. Please send all future requests to this endpoint. 
```

但我可以访问

bucketname.s3.amazonaws.com/file.html

我怎样才能访问我的文件

像这样

[http://s3.amazonaws.com/1000genomes/](http://s3.amazonaws.com/1000genomes/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:41:08.057

以编程方式，您必须使用像 US-East-1 这样的区域端点。它是您存储存储桶的服务器。

# sql - SQL 无效参数错误

> ID：13606383
> 
> 赞同：1
> 
> 时间：2012-11-28T13:38:27.257
> 
> 标签：sql, ms-access

当我尝试保存查询时收到错误消息。

```
SELECT tbl_2_trip_details_2012.Arrival_ID, Count(tbl_2_trip_details_2012.Arrival_ID) AS        CountOfArrival_ID
FROM tbl_2_trip_details_2012
GROUP BY tbl_2_trip_details_2012.Arrival_ID
HAVING (((tbl_2_trip_details_2012.Arrival_ID)=84252114)); 
```

查询很好，但是当我尝试以任何名称保存时，它会出错并显示“无效参数”。请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:44:00.893

尝试这样的事情： -

```
 SELECT tbl_2_trip_details_2012.Arrival_ID, Count(tbl_2_trip_details_2012.Arrival_ID) AS          CountOfArrival_ID
  FROM tbl_2_trip_details_2012
  where tbl_2_trip_details_2012.Arrival_ID=84252114
  GROUP BY tbl_2_trip_details_2012.Arrival_ID 
```

# java - 万无一失没有拿起属性文件

> ID：13606385
> 
> 赞同：0
> 
> 时间：2012-11-28T13:38:29.297
> 
> 标签：java, maven-2, surefire

嗨，我在一个项目中有一个模块，我试图从模块目录中运行它：

mvn 集成测试-PmyProps

在 pom

```
<properties>
                <user>admin</user>

</properties 
```

在 src/test/resources/test.properties

```
 user=${user} 
```

当我执行测试时，我得到`user={user} instead of user=admin`

如果我通过 intellij 或 eclipse 运行它，我对它没有任何问题，并且属性会被拾取吗？

是因为属性值被分配给目标目录吗？

这是类加载器：

InputStream testPropertiesInput = WebDriverConfiguration.class.getClassLoader().getResourceAsStream("smoke.properties");

我尝试将其设为“target/classes/smoke.properties”，但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:53:32.363

首先，如果您有似乎适合您的单元测试，请简单地使用：

mvn 测试

[此外，要过滤](http://maven.apache.org/plugins/maven-resources-plugin/examples/filter.html)资源文件，您需要主动过滤

```
<build>
  <resources>
    <resource>
      <directory>...</directory>
      <filtering>true</filtering>
    </resource>
   ...
</build> 
```

# ios - 多账号游戏的游戏中心成就行为

> ID：13606389
> 
> 赞同：1
> 
> 时间：2012-11-28T13:38:34.667
> 
> 标签：ios, game-center, achievements

假设您开发了一个 iOS 游戏，允许用户使用内部帐户系统登录和注销不同的帐户。例如，您可以使用 Facebook 或电子邮件/密码组合登录。

这款游戏处理 Game Center 成就的最佳方式是什么？登录和注销的情况应该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T00:08:18.133

无论您的内部帐户管理系统如何，相关用户都需要登录 Game Center。不幸的是，您无法通过 iOS 强制退出 Game Center；这是用户需要自己做的事情。

就跟踪成就而言，让 Game Center 处理所有这些。您真正的挑战是让用户显式启动 Game Center 独立应用程序以登录并重新登录，无论是在 GC 应用程序中还是通过应用程序的 GC [登录] 演示文稿。

为了确保跨用户帐户报告正确的成就进度，使用其内部帐户登录您的应用程序的用户也必须使用*其*Game Center 帐户登录。至少确保您不会*跨越*有关成就跟踪和报告的流的一种方法是让用户在通过内部系统登录时输入他们的 Game Center 显示名称。

一旦通过内部验证，让 Game Center 玩家验证发生，检索本地玩家`playerName`并进行比较。如果它们匹配，请标记并正常跟踪/报告成就进度。

如果它们不匹配，则由您决定是否再次提示用户再次检查此信息。至少您应该与他们沟通内部帐户与 Game Center 帐户不匹配，并且要继续前进，他们将需要启动 Game Center 应用程序以注销和登录。否则，标记不匹配，并使用此逻辑绕过成就报告（以及可能的其他 GC 功能）。

这里有一个[帖子](http://www.cocos2d-iphone.org/forum/topic/71343)有更多的想法。

祝你好运！

# openerp - 更改 Openerp GTK 客户端的身份验证逻辑

> ID：13606391
> 
> 赞同：2
> 
> 时间：2012-11-28T13:38:41.387
> 
> 标签：openerp

再次在 Openerp 上花费了几周后，我尝试通过 Windows 7 机器上的 WebClient 更改 openerp 身份验证的逻辑，并对 rpc.py 文件的登录方法进行了一些逻辑更改，并且它起作用了。现在单击登录按钮 Openerp 读取我的文件而不是数据库表进行身份验证。现在我想用 OpenERP GTK Client 实现同样的事情。我很努力但失败了。所以谁能告诉我在哪里可以做出改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T20:23:05.963

只是出于好奇，您能否详细说明为什么需要实现这一目标？不管怎样，我认为 gtk 客户端的最佳起点是来自**/bin/environment_info.py**以及**/bin/rpc.info的客户端源**

# jquery - 由于新的 IE 更新，Internet Explorer 在关闭 jQuery UI 对话框时崩溃 (KB2761451)

> ID：13606393
> 
> 赞同：10
> 
> 时间：2012-11-28T13:38:41.327
> 
> 标签：jquery, jquery-ui, internet-explorer

我们正在使用 jQuery UI 对话框将数据插入数据库。当 jQuery 对话框将在提交时关闭时，IE 挂起并显示一条消息：“IE 停止工作”。该问题是由更新“适用于基于 x64 的系统的 Windows 7 的 Internet Explorer 9 的累积安全更新 (KB2761451)”引起的。我已通过卸载此特定更新确认问题已解决。

我正在使用以下代码行关闭对话框

```
 $('#' + dialogName).dialog('close'); 
```

卸载 IE 更新不是永久的解决方案。我怎样才能永久解决这个问题？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-24T13:15:12.397

我有同样的问题，但在我的情况下，有 3 个必需条件：

1) 使用 jquery-ui 1.10.3 (使用 1.9.2 可以正常工作)

2）在页面的初始化脚本中有脚本，它向正文添加了一个表单：

```
jQuery('<form id="frmId" method="post" action="page.aspx"></form>')
    .appendTo("body"); 
```

3）显示模式对话框：

```
$("<div/>").dialog({modal}); 
```

删除任何这种情况为我解决了这个问题:)

而且，jsfiddle.net 上的示例：http: [//jsfiddle.net/Zm3Qm/1/](http://jsfiddle.net/Zm3Qm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T16:15:04.840

在 IE 中准备好 DOM 之前，您不能调用 .dialog() 。将您的呼叫转移到 test() 而不是 $(document).ready();

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-19T00:49:04.873

我将此错误追踪到在我的对话框中有表单元素。运行 .empty(); 在关闭对话框之前清除包含表单的内容会阻止 IE9 崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-28T02:17:51.233

在 IE 崩溃之前关闭对话框？如果你用 try catch 锁定会发生什么？

```
try{
    $('#' + dialogName).dialog('close'); 
}catch(e){
    alert(e);
} 
```

# iis - IIS 7.5 在 FTP 请求中获取客户端证书

> ID：13606394
> 
> 赞同：1
> 
> 时间：2012-11-28T13:38:44.213
> 
> 标签：iis, ftp, iis-7.5, ssl-certificate

我正在尝试在 IIS 7.5 中为 FTP 编写自定义身份验证提供程序。我找到了[**IFtpAuthenticationProvider.AuthenticateUser**](http://msdn.microsoft.com/en-us/library/dd692879%28v=vs.90%29.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-1)方法（本机或托管），这正是我所需要的。

在身份验证期间，该方法应获取客户端证书中特殊字段的内容，并将其与 AuthenticateUser 方法提供的 userName 参数进行比较。

我现在的问题是我还没有找到在该方法中访问客户端证书的方法。

对于 http 协议（请求对象）有几种解决方案，但对于 FTP 堆栈却没有。

我的问题是：有谁知道如何在身份验证期间访问 FTP 中的客户端证书？还是有不同的方法（我错过了）？

# matlab - 如何“静音”一个 Matlab 函数？

> ID：13606395
> 
> 赞同：4
> 
> 时间：2012-11-28T13:38:53.743
> 
> 标签：matlab

> **可能重复：**
> [抑制函数的命令窗口输出](https://stackoverflow.com/questions/3029636/suppressing-a-functions-command-window-output)
> [抑制输出](https://stackoverflow.com/questions/9518146/suppress-output)

有没有办法让 Matlab 函数的输出“静音”？换句话说，如果一个函数在命令窗口中生成了一些显示的文本，有没有办法在安静模式下运行它，其中输出被抑制？

就我而言，我正在迭代地使用显示大量文本的第三方函数，并且我想找到一种方法来抑制该文本而不修改函数本身。我在想一定有某种包装函数，像`quiet(thirdpartyFunction)`这样给出这种行为。还是这是一厢情愿？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:47:56.430

您可能可以使用`evalc`和丢弃返回值。

# php - 强制 Smarty 显示 PHP 错误

> ID：13606400
> 
> 赞同：7
> 
> 时间：2012-11-28T13:39:10.577
> 
> 标签：php, smarty, prestashop

我使用 PHP 已经有一段时间了，但对 Smarty 来说还是很陌生。

我正在与 Prestashop 合作，我注意到 Smarty 似乎吞噬了所有 PHP 错误 - 当 PHP 代码中出现错误时，.tpl 文件只会输出一个空白页。我一直在尝试，但即使有错误，我也无法让 Smarty 显示 PHP 代码输出的任何内容。

PHP 错误报告设置为显示错误。

因此，例如，假设这是 example.php 文件：

```
<?php
//included classes etc go here, irrelevant for this issue

error_reporting(E_ALL ^ E_NOTICE);

echo obvious wrong syntax"
?> 
```

该文件连接到 example.tpl，该文件适合模板块中的输出。

显然，它应该抛出一个错误。如何让 Smarty 实际显示该错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-28T22:20:38.073

要激活调试模式，请转到`config/config.inc.php`

找到以下行并将第一行`off`更改为 true 并将第二行设置为 true`on`

```
/* Debug only */
@ini_set('display_errors', 'on');
define('_PS_DEBUG_SQL_', true); 
```

这将显示 PHP 和 SQL 错误（*这可能足以让您解决“空白页”*）。

prestashop 网站上还有[一篇关于 p() 和 d() 方法以及如何跟踪异常的博客文章](http://www.prestashop.com/blog/en/debugging-tools/)

要在 Prestashop 1.5 之前的版本中激活模板调试，请转到 config/smarty.config.inc.php

找到以下行并将其设置为 true

```
$smarty->debugging = true; 
```

当你刷新你的页面时，`themes/debug.tpl`应该会被渲染。

要在 Prestashop 1.5+ 中激活模板调试，您可以通过管理面板启用 Smarty 调试

> 首选项 > 性能 > Smarty

并设置`Always open console`，但控制台将为所有人打开（*不适合现场直播:)*）

或设置`Open console with URL parameter (SMARTY_DEBUG)`并添加`?SMARTY_DEBUG`到 URL 的末尾以查看控制台

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-21T13:04:32.667

我已经看过@Sergei Guk 的回答，而且偏题，这是一个很好的回答。然而，prestashop 已经发布了 1.6 版。

所以如果你想显示 prestashop v 1.6.0.6 中的所有错误，你只需要去 config/defines.inc.php

替换`define('_PS_MODE_DEV_', false);`为`define('_PS_MODE_DEV_', true);`

它实际上做的是设置一个常量，并在下一行检查“_PS_MODE_DEV_”是否为真，然后它将在 prestashop 中显示各种错误

```
if (_PS_MODE_DEV_)
{
  @ini_set('display_errors', 'on');
  @error_reporting(E_ALL | E_STRICT);
  define('_PS_DEBUG_SQL_', true);
}
else
{
  @ini_set('display_errors', 'off');
  define('_PS_DEBUG_SQL_', false);
} 
```

我已经对其进行了测试，并且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:42:01.500

设置`$error_reporting`变量。

见[http://www.smarty.net/docsv2/en/variable.error.reporting.tpl](http://www.smarty.net/docsv2/en/variable.error.reporting.tpl)

# c++ - 静态成员初始化链接错误

> ID：13606401
> 
> 赞同：1
> 
> 时间：2012-11-28T13:39:16.257
> 
> 标签：c++, templates, static

对于即将到来的课程，我试图避免使用虚拟，看看我是否可以挤出更多的性能/内存效率。当我想实现一个 StateManager（课程原型是一个小游戏）时，问题就开始了。

为了实现这一点，我有一个模板来“统计”当前状态的成员函数调用。

一个示例状态是这样的：

```
struct TestState {
    bool update(float delta) {
        return true;
    }
}; 
```

现在状态管理器应该能够接受任何状态类并绑定更新函数。使用 boost::bind 和 boost::function 很容易实现这一点，但与 virtuals 相比性能有所下降，所以我想看看是否可以不使用 boost。

从理论上讲，如果 State 是一个只包含静态函数的类/结构，那会很容易，但这也增加了不灵活性，甚至增加了静态初始化的混乱。

StateManager 当前版本是这样的：

```
 class StateManager
 {
 public:
     template <typename S> static void set(S* state)
     {
         #define UPDATE_ID 0

         StateFunctionHandler<UPDATE_ID, S, bool, float>::bind(std::mem_fun1(&S::update), state);
         m_funcUpdate = StateFunctionHandler<UPDATE_ID, S, bool, float>::exec;
     }
     static bool update(float delta) 
     {
         return m_funcUpdate(delta);
     }
     typedef bool (*funcUpdate)(float);
 private:   
     static funcUpdate m_funcUpdate;
 }; 
```

StateFunctionHandler 是负责将成员函数包装在 StateFunctionHandler 的静态成员中的模板。模板的第一个参数是一个 ID，用于为具有相同返回类型和参数的函数强制使用多个模板。

在代码中它看起来像这样：

```
template <int ID, typename S, typename R, typename A>
struct StateFunctionHandler 
{ 
    static void bind(std::mem_fun1_t<R, S, A> f, S* s)
    {
        func = f;
        pState = s;
    } 
    static R exec(A arg) 
    { 
        return func(pState, arg); 
    } 

    static std::mem_fun1_t<R, S, A> func; 
    static S* pState; 
}; 
```

现在的问题是为用例初始化 StateFunctionHandler 的模板化静态成员，因为我们需要强制编译器初始化它们。

在与这些类​​关联的 cpp 文件中，静态成员被初始化：

```
template <int ID, typename S, typename R, typename A> std::mem_fun1_t<R, S, A> StateFunctionHandler<ID, S, R, A>::func;
template <int ID, typename S, typename R, typename A> S* StateFunctionHandler<ID, S, R, A>::pState = NULL;

StateManager::funcUpdate StateManager::m_funcUpdate = NULL; 
```

但是我收到 StateFunctionHandler::func 和 ::pState 的链接错误 (LNK2001)，因此编译器似乎没有初始化 StateFunctionHandler 的静态成员。

用例：

```
 TestState* t = new TestState();
 StateManager::set(t);
 StateManager::update(0.1f); 
```

再次说明，我不想使用boost，这是一个实验，看看我是否可以在这个用例中避免使用虚函数并具有性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:58:29.690

您应该将静态模板类成员的初始化移动到头文件中。

它应该在实例化模板的每个翻译单元中可见，与非静态模板类成员相同。

# razor - @html.TextBox() 没有在 actionlink 中传入控制器

> ID：13606405
> 
> 赞同：0
> 
> 时间：2012-11-28T13:39:35.350
> 
> 标签：razor, asp.net-mvc-4

> 我正在尝试从文本框中传递控制器中的值。我谷歌这个问题。但没有得到任何适合我的解决方案。下面是我的控制器。 **网络产品控制器**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using DatabaseService_WebAPI.Models;

namespace DatabaseService_WebAPI.Controllers
{
    public class WebProductController : Controller
    {
        private ProductContext db = new ProductContext();
        private LocalDBContext ldb = new LocalDBContext();
        private ProductTypeContext pdb = new ProductTypeContext();

        //
        // GET: /WebProduct/

        public ActionResult Index()
        {
            var temp = from tpro in db.Products
                       where tpro.User==User.Identity.Name
                       select tpro;
            return View(temp.ToList());
        }

        public ActionResult TypeT()
        {
            var temp = from ttpro in pdb.ProductTypes
                       where ttpro.Type == "Tablet"
                       select ttpro;
            return View(temp.ToList());
        }

        public ActionResult TypeC()
        {
            var temp = from ctpro in pdb.ProductTypes
                       where ctpro.Type == "Capsule"
                       select ctpro;
            return View(temp.ToList());
        }

        public ActionResult TypeS()
        {
            var temp = from stpro in pdb.ProductTypes
                       where stpro.Type == "Syrup"
                       select stpro;
            return View(temp.ToList());
        }

        //
        // GET: /WebProduct/Details/5

        public ActionResult Details(int id = 0)
        {
            Product product = db.Products.Find(id);
            if (product == null)
            {
                return HttpNotFound();
            }
            return View(product);
        }

        //
        // GET: /WebProduct/Create

        public ActionResult Create()
        {
            return View();
        }

        //
        // POST: /WebProduct/Create

        [HttpPost]
        public ActionResult Create(Product product)
        {
            if (ModelState.IsValid)
            {
                LocalDB tobj = ldb.LocalDBs.Single(s => s.User == User.Identity.Name);
                product.city = tobj.City;
                product.OrderDate = DateTime.Now.Date.ToShortDateString();
                product.ShopName = tobj.ShopName;
                product.User = tobj.User;

                db.Products.Add(product);
                db.SaveChanges();
                return RedirectToAction("Index", "WebProduct");
            }

            return View(product);
        }

        [HttpPost]
        public ActionResult Add(ProductType type, string quantity)
        {

            Product product = new Product();
            if (type.Type=="Tablet")
            {

                //string order = type.Name + " " + type.Quantity;
                LocalDB tobj = ldb.LocalDBs.Single(s => s.User == User.Identity.Name);

                product.city = tobj.City;
                product.OrderDate = DateTime.Now.Date.ToShortDateString();
                product.ShopName = tobj.ShopName;
                product.User = tobj.User;
                //product.OrderDetail = order;

                db.Products.Add(product);
                db.SaveChanges();

                return RedirectToAction("TypeT", "WebProduct");
            }
            else if (type.Type == "Syrup")
            {
                //string order = type.Name + " " + type.Quantity;
                LocalDB tobj = ldb.LocalDBs.Single(s => s.User == User.Identity.Name);
                product.city = tobj.City;
                product.OrderDate = DateTime.Now.Date.ToShortDateString();
                product.ShopName = tobj.ShopName;
                product.User = tobj.User;
             //   product.OrderDetail = order;

                db.Products.Add(product);
                db.SaveChanges();

                return RedirectToAction("TypeS", "WebProduct");
            }
            else
            {

              //  string order = type.Name + " " + type.Quantity;
                LocalDB tobj = ldb.LocalDBs.Single(s => s.User == User.Identity.Name);
                product.city = tobj.City;
                product.OrderDate = DateTime.Now.Date.ToShortDateString();
                product.ShopName = tobj.ShopName;
                product.User = tobj.User;
             //   product.OrderDetail = order;

                db.Products.Add(product);
                db.SaveChanges();

                return RedirectToAction("TypeC", "WebProduct");
            }

            return View();
        }
        //
        // GET: /WebProduct/Edit/5

        public ActionResult Edit(int id = 0)
        {
            Product product = db.Products.Find(id);
            if (product == null)
            {
                return HttpNotFound();
            }
            return View(product);
        }

        //
        // POST: /WebProduct/Edit/5

        [HttpPost]
        public ActionResult Edit(Product product)
        {
            if (ModelState.IsValid)
            {
                db.Entry(product).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index", "WebProduct");
            }
            return View(product);
        }

        //
        // GET: /WebProduct/Delete/5

        public ActionResult Delete(int id = 0)
        {
            Product product = db.Products.Find(id);
            if (product == null)
            {
                return HttpNotFound();
            }
            return View(product);
        }

        //
        // POST: /WebProduct/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Product product = db.Products.Find(id);
            db.Products.Remove(product);
            db.SaveChanges();
            return RedirectToAction("Index", "WebProduct");
        }

        protected override void Dispose(bool disposing)
        {
            db.Dispose();
            base.Dispose(disposing);
        }
    }
} 
```

**类型T.cshtml**

```
@model IEnumerable<DatabaseService_WebAPI.Models.ProductType>

@{
    ViewBag.Title = "Tablets";

    <script type="text/javascript">

        $(function () {
    $('#edit').click(function() {
        var name = $('#quantity').val();
        this.href = this.href + '/' + encodeURIComponent(name);
    });
});

</script>
}

<h2>Tablets</h2>
@*@using (Html.BeginForm("Add", "WebProductController",FormMethod.Post)) {
    @Html.ValidationSummary(true)
*@
<table>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Batch)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Expiry)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Quantity)
        </th>
       @* <th>
            @Html.DisplayNameFor(model => model.Type)
        </th>*@
        <th></th>
    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Batch)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Expiry)
        </td>
        <td>
            @Html.TextBox("quantity")
        </td>
        @Html.Hidden("idText", item.Id)
        <td>
            @Html.ActionLink("Add", "Add", new { id = item.Id, name=item.Name, type=item.Type }, null) 
            @*@Html.ActionLink("Add", "Add", null, new { id = "edit" })*@
            @*<input type="submit" value="Add" />*@
        </td>
    </tr>
}

</table>
@*}*@
<div>
    @Html.ActionLink("Back to List", "Create")
</div> 
```

> 在我的控制器中，我正在调用 Add() 方法。在行动结果中，它在控制器中传递值但不传递文本框值。当我尝试使用

```
@using (Html.BeginForm("Add", "WebProductController",FormMethod.Post)) 
```

然后表格不会`t recognize my method when i use button to sending data in my form. i`陷入这个问题。但没有解决方案:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:52:19.690

您的控制器应如下所示：

```
 public ActionResult Add(IList<ShoppingItemModel> items){
      foreach(ShopingItemModel item in items){
          if (item.Id != null){
               ShopingItem shopingItem = service.GetById(item.Id);
               ... Add Item to whatever
          }
      }
 } 
```

您的 ShoppingItemModel：

```
public class ShoppingItemModel{
     [Required]
     public Id{get;set;}

     [Required]
     public Amount{get;set;}

     ...
} 
```

您的观点（我跳过了 Java 脚本）：

```
 @model IList<ShoppingItemModel>

 <h2>Tablets</h2>
 @using (Html.BeginForm("Add", "WebProductController",FormMethod.Post)) {
 @Html.ValidationSummary(true)

 <table>
  <tr>
    <th>
        Name
    </th>
    <th>
        Price
    </th>
    ...
    <th>Amount</th>
</tr>

@for(int index; index < Model.Count; index++) {

  <tr>
    <td>
        @Html.HiddenFor(model => model[index].Id)
        @Html.DisplayFor(model => model[index].Name)
    </td>
    <td>
        @Html.DisplayFor(model => model[index].Price)
    </td>
    <td>
        @Html.DisplayFor(model => model[index].Batch)
    </td>
    ...
    <td>
        @Html.TextBoxFor(model => model[index].Quantity)
    </td>
  </tr>
}   
</table>   
<input type="submit" value="Add" />
} 
```

这不是完整的解决方案。只是一个提示。托比

# android - Android 动态壁纸加载到 ListView

> ID：13606410
> 
> 赞同：4
> 
> 时间：2012-11-28T13:40:03.427
> 
> 标签：android, listview, wallpaper

是否有可能以某种方式将 Android 设备正在使用的所有动态壁纸加载到 ListView 中？

# java - gae 1.7.3 更新-> java.io.InvalidClassException

> ID：13606414
> 
> 赞同：4
> 
> 时间：2012-11-28T13:40:15.143
> 
> 标签：java, google-app-engine, google-cloud-datastore

我刚刚将 Java GAE SDK 更新到 1.7.3，现在在尝试从本地数据存储区读取数据时出现异常：

```
INFO: Failed to load from the backing store,
C:\Users\<user>\Documents\myproject\war\WEB-INF\appengine-generated\local_db.bin
java.io.InvalidClassException:
com.google.appengine.repackaged.com.google.io.protocol.ProtocolMessage;
local class incompatible:
    stream classdesc serialVersionUID = 2691625986599730786,
    local class serialVersionUID = -3428150205257072157
at java.io.ObjectStreamClass.initNonProxy(Unknown Source)
at java.io.ObjectInputStream.readNonProxyDesc(Unknown Source)
at java.io.ObjectInputStream.readClassDesc(Unknown Source) 
```

这使我无法从现有的本地数据存储中读取实体。如果我降级到 1.7.2，它会再次运行，但我想使用最新版本运行。

有谁知道如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T09:27:56.890

如果我对您的理解正确，您已经使用开发 Web 应用程序服务器的 1.7.2 版本创建了一个本地数据存储，并尝试使用 1.7.3 版本使用相同的数据（文件）。

较新版本的开发应用服务器有责任但不能保证无法读取使用较早版本保存的数据。

我发现用1.7.2 dev app server存储的数据不能用在1.7.3上，所以这次我们都倒霉了。

在这种情况下，您必须使用 1.7.3 重新创建数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T18:28:48.623

我认为有可能取回您的数据，但需要一些工作。如果我们在本地的两台应用服务器上运行您的项目：一台使用 SDK 1.7.2，另一台使用较新的 SDK，然后使用远程 api 访问旧数据并复制到新数据存储，您可以重新创建所有条目。

同样，它可能会起作用，所以只有你必须尝试它。

# maven - 建立目标依赖关系

> ID：13606416
> 
> 赞同：0
> 
> 时间：2012-11-28T13:40:16.707
> 
> 标签：maven

有谁知道 Maven 构建目标的依赖关系和顺序？

例如，如果我告诉 Maven `clean`，它只会清理。但是如果我告诉 Maven `install`，它也会调用`generate-sources`, `compile`,`test`等。我试图找出哪些目标取决于哪些其他目标。

我[找到了这个文档](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)，但它没有显示依赖项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:50:27.887

它按照生命周期部分中提到的顺序是连续的。你有干净和默认的生命周期。在默认生命周期下部署的最后一个命令取决于层次结构中它上面列出的所有其他命令。同样，生命周期中的每个命令都依赖于上面列出的其他命令。

# javascript - 根据“预期响应”表达式从响应中获取值

> ID：13606423
> 
> 赞同：1
> 
> 时间：2012-11-28T13:40:35.537
> 
> 标签：javascript

我有一个预期的响应，**可以是任何格式**，但例如：

```
myfoo={FOO}&mybar={BAR}&mybaz={BAZ} 
```

然后我有响应字符串：

```
myfoo=hello&mybar=test&mybaz=yup 
```

所以我的问题是，在 JavaScript 中，我如何使用这两个字符串来创建一个包含值的对象，如下所示：

```
{
    FOO : 'hello',
    BAR : 'test',
    BAZ : 'yup'
} 
```

* * *

在另一个示例中，预期的字符串可能是一个句子：

```
Hello, my name is {NAME} and I am {AGE} years old. 
```

然后是实际响应：

```
Hello, my name is Fred and I am 30 years old. 
```

应该建立哪个：

```
{
    NAME : 'Fred',
    AGE : '30'
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:54:51.467

对于那些对我如何解决这个问题感兴趣的人，我使用了以下代码：

```
var TAG_REGEX = /\{[A-Z\_]+\}/g,
    expected = 'myfoo={FOO}&mybar={BAR}&mybaz={BAZ}',
    response = 'myfoo=hello&mybar=test&mybaz=yup';

var lengthDifference = 0;
expected.replace(TAG_REGEX, function (tag, index) {
    var afterAll = expected.substr(index + tag.length),
        afterToNextTag = afterAll.indexOf('{'),
        after = afterToNextTag >= 0 ? afterAll.substr(0, afterToNextTag) : afterAll.substr(0),
        startSubstr = response.substr(index + lengthDifference),
        endIndex = after.length ? startSubstr.indexOf(after) : startSubstr.length,
        value = startSubstr.substr(0, endIndex);

    lengthDifference += value.length - tag.length;

    setTagValue(tag, value, responseDiv);
}); 
```

# css - CSS：如何选择所有 rel 属性

> ID：13606425
> 
> 赞同：0
> 
> 时间：2012-11-28T13:40:37.913
> 
> 标签：css, css-selectors, rel

每次在 wordpress 中上传图像时，它都会收到不同的 rel 属性，例如 rel="attachment name123"，我想选择每个具有 rel 属性的图像，而不管它们的名称如何。这可能吗？

**编辑：** 实际上它们是链接**所以感谢答案，选择链接的正确方法是：**

 **```
a[rel] {pointer-events: none; cursor: default;} 
```

那是为了删除链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:42:45.120

您可以选择具有以下定义的 rel 属性的所有图像：

```
img[rel] {

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T13:42:52.633

这个选择器应该可以工作：`img[rel]`.

根据[CSS 规范](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)：

> 5.8 属性选择器
> 
> CSS 2.1 允许作者指定匹配具有源文档中定义的某些属性的元素的规则。
> 
> 5.8.1 匹配属性和属性值
> 
> 属性选择器可以通过四种方式匹配：
> 
> [att]**当元素设置“att”属性时匹配，无论该属性的值如何。**

请参阅此[演示](http://jsfiddle.net/uePqg/)。**

# python - 需要处理keyerror异常python

> ID：13606426
> 
> 赞同：1
> 
> 时间：2012-11-28T13:40:42.170
> 
> 标签：python, exception, search, dictionary

当我在此处输入不在记录列表中的玩家姓名时，我收到了 keyerror 异常。我可以搜索它并取回任何有效的名称，但如果我输入其他任何内容，我会收到一个 keyerror。我不太确定如何处理这个问题，因为已经在处理解析我的文件创建的 3 组数据时有点令人困惑。

我知道这段代码很糟糕，我是 python 新手，所以请原谅混乱 - 另请注意，这是一个让此功能正常工作的测试文件，然后我将其写入我真正的主文件中的函数。有点像这里的测试平台，如果这有任何意义的话。

这是我的数据文件`stats4.txt`中的内容：

```
[00000] Cho'Gath - 12/16/3 - Loss - 2012-11-22
[00001] Fizz - 12/5/16 - Win - 2012-11-22
[00002] Caitlyn - 13/4/6 - Win - 2012-11-22
[00003] Sona - 4/5/9 - Loss - 2012-11-23
[00004] Sona - 2/1/20 - Win - 2012-11-23
[00005] Sona - 6/3/17 - Loss - 2012-11-23
[00006] Caitlyn - 14/2/16 - Win - 2012-11-24
[00007] Lux - 10/2/14 - Win - 2012-11-24
[00008] Sona - 8/1/22 - Win - 2012-11-27 
```

这是我的代码：

```
import re

info = {}
records = []
search = []
with open('stats4.txt') as data:
    for line in data:
        gameid = [item.strip('[') for item in line.split(']')]
        del gameid[-1]
        gameidstr = ''.join(gameid)
        gameid = gameidstr
        line = line[7:]
        player, stats, outcome, date = [item.strip() for item in line.split('-', 3)]
        stats = dict(zip(('kills', 'deaths', 'assists'), map(int, stats.split('/'))))
        date = tuple(map(int, date.split('-')))
        info[player] = dict(zip(('gameid', 'player', 'stats', 'outcome', 'date'), (gameid, player, stats, outcome, date)))
        records.append(tuple((gameid, info[player])))

print "\n\n", info, "\n\n" #print the info dictionary just to see 
champ = raw_input() #get champion name
#print info[champ].get('stats').get('kills'), "\n\n"
#print "[%s] %s - %s/%s/%s - %s-%s-%s" % (info[champ].get('gameid'), champ, info[champ].get('stats').get('kills'), info[champ].get('stats').get('deaths'), info[champ].get('stats').get('assists'), info[champ].get('date')[0], info[champ].get('date')[1], info[champ].get('date')[2])
#print "\n\n"
#print info[champ].values()

i = 0
for item in records: #this prints out all records
    print "\n", "[%s] %s - %s/%s/%s - %s - %s-%s-%s" % (records[i][0], records[i][1]['player'], records[i][1]['stats']['kills'], records[i][1]['stats']['deaths'], records[i][1]['stats']['assists'], records[i][1]['outcome'], records[i][1]['date'][0], records[i][1]['date'][1], records[i][1]['date'][2])
    i = i + 1

print "\n" + "*" * 50
i = 0
for item in records:
    if champ in records[i][1]['player']:
        search.append(records[i][1])
    else:
        pass
    i = i + 1

s = 0

if not search:
    print "no availble records" #how can I get this to print even if nothing is inputted in raw_input above for champ?

print "****"
for item in search:
        print "\n[%s] %s - %s/%s/%s - %s - %s-%s-%s" % (search[s]['gameid'], search[s]['player'], search[s]['stats']['kills'], search[s]['stats']['deaths'], search[s]['stats']['assists'], search[s]['outcome'], search[s]['date'][0], search[s]['date'][1], search[s]['date'][2])
        s = s + 1 
```

我尝试设置一个 Try；除了某种东西，但在输入无效的玩家名称时我无法得到任何不同的结果。我想我可能可以用一个函数设置一些东西，如果名称存在或不存在，则返回不同的东西，但我想我只是让自己有点困惑。另请注意，对于不匹配的 8 条记录，确实不会打印任何匹配项，尽管这并不是我想要的工作方式。基本上我需要为任何无效的输入名称获取类似的东西，而不仅仅是一个恰好不在循环中的记录中的有效输入。

此数据的有效输入名称是：Cho'Gath、Fizz、Caitlyn、Sona 或 Lux - 其他任何内容都会产生 keyerror，这就是我需要处理的内容，因此它不会引发错误，而只会打印类似“没有记录”的内容可用于那个冠军”（并且只打印一次，而不是 8 次）

谢谢你的帮助！

**[编辑] 我终于能够在帖子中更新此代码（感谢 martineau 将其添加，由于某种原因，反引号无法阻止代码，并且当我粘贴时它显示为粗体普通文本。无论如何，看看`if not search`，即使什么也没输入，我怎么能打印出来？只需在 raw_input 上按返回，目前它会打印所有记录，`****`即使我没有给它任何搜索冠军**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:48:14.897

您的确切错误发生在哪里？

我只是假设它是什么时候`champ = raw_input() #get champion name`

接着`info[champ]`

您可以先检查密钥是否存在

```
if champ not in info:
  print 'no records avaialble' 
```

或使用`get`

```
if info.get(champ) 
```

或者您可以尝试访问密钥

```
try:
  info[champ] 
  # do stuff
except KeyError:
  print 'no records available' 
```

您的问题越具体越好，尽管您解释了您的问题，但您确实没有包含任何细节。如果可用，请始终包含回溯，并将相关代码发布在您的帖子中，而不是链接上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:36:21.110

这是我认为可以解决您的问题的一些修改。我还重新格式化了代码以使其更具可读性。在 Python 中，如果上一行有未配对的 '(' 或 '[' ，则可以通过以 a 结尾`\`或直接转到下一行来将长行继续到下一行。

此外，我在我的问题或答案中输入代码的方式是将其从我的文本编辑器中剪切出来，然后将其粘贴到编辑窗口中，之后我确保它全部被选中，然后只使用`{}`编辑顶部的工具窗口来格式化它。

```
import re
from pprint import pprint

info = {}
records = []
with open('stats4.txt') as data:
    for line in data:
        gameid = [item.strip('[') for item in line.split(']')]
        del gameid[-1]
        gameidstr = ''.join(gameid)
        gameid = gameidstr
        line = line[7:]
        player, stats, outcome, date = [item.strip() for item in line.split('-', 3)]
        stats = dict(zip(('kills', 'deaths', 'assists'), map(int, stats.split('/'))))
        date = tuple(map(int, date.split('-')))
        info[player] = dict(zip(('gameid', 'player', 'stats', 'outcome', 'date'),
                                (gameid, player, stats, outcome, date)))
        records.append(tuple((gameid, info[player])))

#print "\n\n", info, "\n\n" #print the info dictionary just to see
pprint(info)
champ = raw_input("Champ's name: ") #get champion name
#print info[champ].get('stats').get('kills'), "\n\n"
#print "[%s] %s - %s/%s/%s - %s-%s-%s" % (
#       info[champ].get('gameid'), champ, info[champ].get('stats').get('kills'),
#       info[champ].get('stats').get('deaths'), info[champ].get('stats').get('assists'),
#       info[champ].get('date')[0], info[champ].get('date')[1],
#       info[champ].get('date')[2])
#print "\n\n"
#print info[champ].values()

i = 0
for item in records: #this prints out all records
    print "\n", "[%s] %s - %s/%s/%s - %s - %s-%s-%s" % (
                 records[i][0], records[i][1]['player'], records[i][1]['stats']['kills'],
                 records[i][1]['stats']['deaths'], records[i][1]['stats']['assists'],
                 records[i][1]['outcome'], records[i][1]['date'][0],
                 records[i][1]['date'][1], records[i][1]['date'][2])
    i = i + 1

print "\n" + "*" * 50
i = 0
search = []
for item in records:
    if champ in records[i][1]['player']:
        search.append(records[i][1])
    i = i + 1
if not search:
    print "no match"
    exit()

s = 0
for item in search:
        print "\n[%s] %s - %s/%s/%s - %s - %s-%s-%s" % (search[s]['gameid'],
              search[s]['player'], search[s]['stats']['kills'],
              search[s]['stats']['deaths'], search[s]['stats']['assists'],
              search[s]['outcome'], search[s]['date'][0], search[s]['date'][1],
              search[s]['date'][2])
        s = s + 1 
```

# php - __construct 中缺少参数

> ID：13606429
> 
> 赞同：2
> 
> 时间：2012-11-28T13:40:58.453
> 
> 标签：php, phpmyadmin

我在运行时收到此错误：

```
$db = new PDO('mysql:host=localhost;dbname=MYDATABASE', 'root', '');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);

$Manager = new CompanyManager($db);
$Manager->getList(); 
```

错误 ：

```
Warning: Missing argument 2 for Company::__construct(), called in /.../CompanyManager.class.php on line 53 and defined in /.../Company.class.php on line 17 
```

这是 CompanyManager.class.php 的一部分：

```
 public function getList()
  {
    $Company = array();

    $q = $this->_db->query('SELECT id, statut, company, activity, source, secteur, comments, offer_date, entry_date, type_ope, gestionnaire, next_step FROM prospect ORDER BY id');

    while ($donnees = $q->fetch(PDO::FETCH_ASSOC))
    {
      $Company[] = new Company($donnees);
    }

    return $Company;
  } 
```

这是 Company.class.php（有趣的部分）：

```
<?php
class Company
{
    private $_id;
    private $_statut;
    private $_company;
    private $_activity;
    private $_source;
    private $_secteur;
    private $_comments;
    private $_offerDate;
    private $_entryDate;
    private $_typeOpe;
    private $_gestionnaire;
    private $_nextStep;

    public function __construct($id, $statut, $company, $activity, $source, $secteur, $comments, $offerDate, $entryDate, $typeOpe, $gestionnaire, $nextStep)
    {
        $this->setId($id);
        $this->setStatut($statut);
        $this->setCompany($company);
        $this->setActivity($activity);
        $this->setSource($source);
        $this->setSecteur($secteur);
        $this->setComments($comments);
        $this->setOfferDate($offerDate);
        $this->setEntryDate($entryDate);
        $this->setTypeOpe($typeOpe);
        $this->setGestionnaire($gestionnaire);
        $this->setNextStep($nextStep);
    } 
```

非常感谢所有愿意帮助我的人;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:45:08.230

```
public function getList()
  {
    $Company = array();

    $q = $this->_db->query('SELECT id, statut, company, activity, source, secteur, comments, offer_date, entry_date, type_ope, gestionnaire, next_step FROM prospect ORDER BY id');

    while ($donnees = $q->fetch(PDO::FETCH_ASSOC))
    {
      $Company[] = new Company($donnees['id'], $donnees['statut'], $donnees['company'], $donnees['activity'], $donnees['source'], .....);
    }

    return $Company;
  } 
```

否则你可以这样做

```
 public function __construct(array $data) {
       $this->setId($data['id']);
       .
       .
       .
       .
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:44:26.073

您必须将变量隐式传递给 Company 的构造函数：

```
public function getList()
  {
    $Company = array();

    $q = $this->_db->query('SELECT id, statut, company, activity, source, secteur, comments, offer_date, entry_date, type_ope, gestionnaire, next_step FROM prospect ORDER BY id');

    while (list($id, $status, $company, /*etc*/) = $q->fetch(PDO::FETCH_ASSOC))
    {
      $Company[] = new Company($id, $status, $company, /*etc*/);
    }

    return $Company;
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:43:08.843

好吧，您的 Company 类希望传递 __construct() 参数列表中的所有参数。它们都不是可选的。

看起来您正在将一个数组传递给您的 Company 类，您需要根据您的参数列表传递每个值。

# salesforce - Salesforce - SOQL 在 SELECT 中使用 mod() 或类似的数学函数？

> ID：13606437
> 
> 赞同：6
> 
> 时间：2012-11-28T13:41:31.933
> 
> 标签：salesforce, soql

我正在尝试查询价格不是整数（无小数）或价格不是 10 的倍数的所有商机。

我试图找到以下价格：U$S 34,801.23 - U$S 56,103.69 - U$S 50,000.12 等但不是：U$S 49,500.00 - U$S 19,110.00 等

数据库中有很多机会，我可以通过代码浏览它们，但想知道你们中是否有人能想出一种方法来通过查询至少实现其中的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:58:57.650

SOQL 不会让您进行任何计算。[在此处](http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_soql_select_conditionexpression.htm)和[此处](http://www.salesforce.com/us/developer/docs/soql_sosl/Content/sforce_api_calls_soql_select_fieldexpression.htm#fieldexpression)检查文档：

> 您必须提供本机值 - 不允许使用其他字段名称或计算

一般来说，它是`fieldName = value`或`datefieldname > YESTERDAY`（很少有用于日期处理的特殊文字）。

最简单的方法是使用您的逻辑在记录中创建一个公式字段（将它们视为普通数据库视图中的计算列）。它可能是文本类型，称之为“奇怪的价格”；）[这是完整的公式函数参考](https://help.salesforce.com/apex/HTViewHelpDoc?language=en&id=customize_functions.htm)- 你有`MOD()`，`IF(condition, true, false)`等等。

唯一需要注意的是你不能`GROUP BY`公式（也有技巧可以绕过它；））

所以是的 - 如果它是一次性的可重用性差的东西 - 用代码过滤。如果您可以接受低成本（公式不使用存储，但您可能需要它们用于其他目的） - 创建一个字段。

# database - drda 协议打开多个流

> ID：13606439
> 
> 赞同：0
> 
> 时间：2012-11-28T13:41:36.440
> 
> 标签：database

我正在尝试从我的客户端（Win7-64 位）连接到也在 win7-64 位机器上运行的 DB2 服务器。我有3个问题：

1.  DRDA 协议是否仅支持 SQL 数据库？

2.  从我的客户端连接到服务器时，是否可以使用不同的流（连接）同时连接到不同的数据库？

3.  当使用 DRDA 协议连接到服务器时，第一个客户端到服务器命令是否**必须**与 ACCSEC 链接 EXCSAT？

当我用谷歌搜索这个（我只能找到 Q3 的信息）时，我发现 EXCSAT 必须是**DDM**连接中的第一个命令，但其他类型的连接呢？以及这种类型的连接是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:15:10.997

1.  是的; DRDA 仅用于与 SQL 数据库通信。

2.  如果您使用的是 ODBC 或 JDBC，则可以使用单独的句柄与单独的数据库建立单独的连接，以识别您正在与哪个数据库通信。

3.  您应该能够在 The Open Group 网站上找到 DRDA 的规范。我有 3 个大部头的 PDF 文件（第 1 卷，概述，只有 772 页长；第 2 卷 FD:OCA 是 114 页；第 3 卷 DDM 是 1168 页）。

概述表明 (p51) 客户端将发送 EXCSAT 以启动连接；它没有提到ACCSEC。

在 p123 上，该图显示了 EXCSAT 消息，随后是来自 AR 的 EXCSATRD，然后是来自客户端的 ACCSEC，以及 ACCSECRD 响应。

由此，我得出结论，不，ACCSEC 不必链接到 EXCSAT。我什至不清楚它必须像 DDM 连接那样。

# google-maps - 更改 Google 地图标签的字体系列？

> ID：13606441
> 
> 赞同：6
> 
> 时间：2012-11-28T13:41:43.000
> 
> 标签：google-maps, google-maps-api-3, google-maps-styled

我正在使用官方[Styled Maps Wizard](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)制作自定义 Google Map 。

但是，似乎无法更改标签的字体系列（即[Arial](https://stackoverflow.com/questions/5270362/what-font-is-used-on-the-google-maps-for-the-labels)）。

有谁知道这在谷歌地图中是否可行？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2018-09-04T00:22:47.773

（**编辑**：我现在看到最初的问题是关于原生谷歌地图标签，而不是自定义标记标签。对于我的原始回复，即标记标签上的自定义字体系列，请继续阅读......）

**快进到2018年……**

如果您调用 Google Maps API，您可以使用自定义 Google 字体。这是[关于 font-family 的文档](https://developers.google.com/maps/documentation/javascript/reference/marker#MarkerLabel.fontFamily)。

创建新的 google.maps.Marker 时，您需要指定`fontFamily`选项的选项。`label`我使用了来自[Google Fonts](https://fonts.google.com/)的字体，例如：

```
var marker = new google.maps.Marker({
    position: posiiton,
    map: map,
    label: {
        text: 'Label text',
        fontFamily: "'Domine', serif",
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-30T22:47:44.427

答案是：做不到。您能做的最好的事情就是关闭所有 Google 地图标签，并使用自定义叠加层。

或者，使用 Cloudmade 或 TileMill 等服务制作自己的瓷砖。

# vb.net - 在外国操作系统上找不到文件

> ID：13606443
> 
> 赞同：0
> 
> 时间：2012-11-28T13:41:51.033
> 
> 标签：vb.net, operating-system

我现在负责管理工作中的程序，该程序在启动时会检查程序所在的目录以获取许可证文件。这段代码一直运行得很好，但是当我们在使用外国操作系统（确切地说是日语 Windows）的客户计算机上安装程序时，程序找不到文件。

这是相关的代码段：

```
Dim sr As StreamReader
Dim strLicenseFile As String

'---Here's where the path for the file is set.---
'---Both lines below have been tried, and still fail.---

strLicenseFile = Application.StartupPath & "\license.yvl"
strLicenseFile = "license.yvl"

If File.Exists(strLicenseFile) Then

   '---Here's where the majority of code is executed---

Else

   '---And here's where the program always goes, because the file isn't found---

End If 
```

为什么在外国操作系统上找不到文件？我认为它与字符集和路径有关。

# php - 如何使用 id 或电子邮件登录

> ID：13606445
> 
> 赞同：3
> 
> 时间：2012-11-28T13:41:51.710
> 
> 标签：php, yii

我在 yii 中创建了登录功能，但我需要开发它以同时使用电子邮件或用户 ID。在下面，您将通过电子邮件代码检查登录，它在完美模式下工作，对开发有帮助吗？

组件/UserIdentity.php

```
<?php

/** Ahmad Samilo
 * UserIdentity represents the data needed to identity a user.
 * It contains the authentication method that checks if the provided
 * data can identity the user.
 */
class UserIdentity extends CUserIdentity
{

     // Need to store the user's ID:
     private $_id;
     public $password;
     public $status;
     public $session;

    /**
     * Authenticates a user.
     * The example implementation makes sure if the username and password
     * are both 'demo'.
     * In practical applications, this should be changed to authenticate
     * against some persistent user identity storage (e.g. database).
     * @return boolean whether authentication succeeds.
     */

    public function authenticate()
    {
        $user = Users::model()->findByAttributes(array('email'=>$this->username));

            /// set number of faild login
             $session=new CHttpSession;
             $session->open();

           Yii::app()->session['number']= Yii::app()->session['number']+1;
           $session=Yii::app()->session['number'];
              /// end 

        if ($user===null) { // No user found!
            $this->errorCode=self::ERROR_USERNAME_INVALID;
        } else if ($user->password !== SHA1($this->password) ) { // Invalid password!
            $this->errorCode=self::ERROR_PASSWORD_INVALID;

        } else { // Okay!

             $this->errorCode=self::ERROR_NONE;
            // Store the role in a session:
             $this->setState('status', $user->active);

             $this->setState('id', $user->user_id);
            $this->_id = $user->user_id;
        }
        return !$this->errorCode;
    }

    public function getId()
    {
     return $this->_id;
    }

} 
```

查看/login.php

```
<?php
/* @var $this SiteController */
/* @var $model LoginForm */
/* @var $form CActiveForm  */

$this->pageTitle=Yii::app()->name . ' - Login';
$this->breadcrumbs=array(
    'Login',
);
?>

<h1>Login</h1>

<p>Please fill out the following form with your login credentials:</p>

<div class="form">
<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'login-form',
    'enableClientValidation'=>true,
    'clientOptions'=>array(
        'validateOnSubmit'=>false,
    ),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

<?php

foreach(Yii::app()->user->getFlashes() as $key=>$message){

    echo "<div class='info'>";
     echo '<div class="flash-' . $key . '">' . $message . "</div>\n";

     echo "</div>";
}

?>

<?php

//// Get Session 
$session=new CHttpSession();
$session->open();
$count= Yii::app()->session['number'];

/// End Get Session 

//// Send Email to user notify him about that with help guide 
           function send_mail($to,$from,$subject,$msg){
        // message
        $message = '
        <html>
        <head>
          <title>Activation </title>
        </head>
        <body dir="rtl">
        <p align="right">'
        . $msg .
        '</p>
        <br>

        </p>
        </body>
        </html>
        ';

        // To send HTML mail, the Content-type header must be set
        $headers  = 'MIME-Version: 1.0' . "\n";
        $headers .= 'Content-type: text/html; charset=windows-1256' . "\n";

        // Additional heade rs
        $headers .= "From: ".$from . "\n";
        //$headers .= 'Bcc: info@illaftrain.co.uk' . "\n";

        // Mail it
        return mail($to, '=?windows-1256?B?'.base64_encode($subject).'?=', $message, $headers);
    }

//////

$email=$model->email;

$subject="تنبيه تكرار تسجيل الدخول الخاطئ ";

$url=Yii::app()->request->serverName;
$message=" 

text here 

";

 send_mail($email,'noreply@domain.net',$subject,$message);

//// End mail Function 

//// End Send mail 

?>
    <div class="row">
        <?php echo $form->labelEx($model,'Email'); ?>
        <?php echo $form->textField($model,'email'); ?>
        <?php echo $form->error($model,'email'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'password'); ?>
        <?php echo $form->passwordField($model,'password'); ?>
        <?php echo $form->error($model,'password'); ?>

    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Login'); ?>
    </div>

    <?php if($count>3) :?>
    <?php if(CCaptcha::checkRequirements()): ?>
        <?php echo $form->labelEx($model,'verifyCode'); ?>
        <div>
        <?php $this->widget('CCaptcha'); ?>
        <?php echo $form->textField($model,'verifyCode'); ?>
        </div>
    <div class="row">
        <div class="hint">Please enter the letters as they are shown in the image above.
        <br/>Letters are not case-sensitive.</div>
        <?php echo $form->error($model,'verifyCode'); ?>
    </div>
    <?php endif; ?>
    <?php endif; ?>

<?php $this->endWidget(); ?> 
```

模型/LoginForm.php

```
<?php

/**
 * LoginForm class.
 * LoginForm is the data structure for keeping
 * user login form data. It is used by the 'login' action of 'SiteController'.
 */
class LoginForm extends CFormModel
{
    public $email;
    public $password;
    public $login;
    public $verifyCode;

    /**
     * Declares the validation rules.
     * The rules state that username and password are required,
     * and password needs to be authenticated.
     */
public function rules()
{
    return array(
        array('email, password', 'required'),
        array('email', 'email'),
        array('password', 'authenticate'),
            // verifyCode needs to be entered correctly
            array('verifyCode', 'captcha', 'allowEmpty'=>!CCaptcha::checkRequirements()),

);

}

    /**
     * Declares attribute labels.
     */
    public function attributeLabels()
    {
        return array(
            'email'=>'Email Address',
            'user_id'=>'User ID',
        );
    }

    /**
     * Authenticates the password.
     * This is the 'authenticate' validator as declared in rules().
     */
    public function authenticate($attribute,$params)
    {
        if(!$this->hasErrors())  // we only want to authenticate when no input errors
        {
            $identity=new UserIdentity($this->email,$this->password);
            $identity->authenticate();
            switch($identity->errorCode)
            {
                case UserIdentity::ERROR_NONE:
                    Yii::app()->user->login($identity);

                    break;
                case UserIdentity::ERROR_USERNAME_INVALID:
                    $this->addError('email','Email address is incorrect.');
                    break;
                default: // UserIdentity::ERROR_PASSWORD_INVALID
                    $this->addError('password','Password is incorrect.');
                    break;
            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:52:04.670

在 UserIdentity 的身份验证功能中

代替：

```
$user = Users::model()->findByAttributes(array('email'=>$this->username)); 
```

做类似的事情

```
//If we have a @ in the username, then it should be an email
if(strpos($this->username, '@') !== false){
   $user = Users::model()->findByAttributes(array('email'=>$this->username));
}else{
   //Otherwise we search using the username
   $user = Users::model()->findByAttributes(array('username'=>$this->username));
} 
```

注意：前提是您不允许在用户名中使用 @

# css - 轮播按钮定位错误chrome和firefox

> ID：13606446
> 
> 赞同：0
> 
> 时间：2012-11-28T13:41:57.053
> 
> 标签：css, ruby-on-rails-3, firefox, google-chrome, carousel

我在 Rails 应用程序中添加了轮播。在 Firefox 中运行良好。但是当我看到chrome时，我才知道“下一步”按钮的位置已经改变了。直到现在我还没有找到任何解决方法。

以下是所有轮播的css

```
.proposal-section .carousel-previous {
  background: url("/assets//previous.png") no-repeat scroll 0 0 transparent;
  position: absolute;
  margin-left: 3px;
  margin-top: 70px;
  z-index: 1000;
} 
```

Chrome 在页面的最左侧显示具有此属性值的下一个按钮，“margin-left：-35;”，但 ff 很好。ff 在 "margin-left: 950;" 上显示此按钮不在视图中（在右侧）但铬很好。我该如何解决 。

```
.proposal-section .carousel-next {
  background: url("/assets//next.png") no-repeat scroll 0 0 transparent;
  position: absolute;
  margin-left: -35px;
  margin-top: 71px;
}

.proposal-section .carousel-control {
  overflow:hidden;
  display:inline-block;
  vertical-align:middle;
  width:30px;
  height:32px;
  cursor:pointer;
  line-height:999px;
  zoom:1;
  border:0;
  text-indent:-9999px;
}

.proposal-section .carousel-control:hover {
  -moz-opacity:.7;
  opacity:0.70;
  filter:alpha(opacity=70);
}

.proposal-section .carousel-wrap {
  display: inline-block;
  vertical-align: middle;
  width: 99%;
  border: 3px solid #473161;
  border-radius: 5px;
  height: 174px !important
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T11:19:42.690

试试这个，它会在两个浏览器中制作按钮（可能是所有的）：

```
.proposal-section .carousel-control {
  overflow:hidden;
  display:inline-block;
  vertical-align:middle;
  width:30px;
  height:32px;
  cursor:pointer;
  line-height:999px;
  zoom:1;
  border:0;
  text-indent:-9999px;
}

.proposal-section .carousel-control:hover {
  -moz-opacity:.7;
  opacity:0.70;
  filter:alpha(opacity=70);
}

.proposal-section .carousel-wrap {
  display: inline-block;
  vertical-align: middle;
  width: 99%;
  border-radius: 5px;
  height: 174px !important
}

.proposal-section .carousel-next {
  background: url("/assets//next.png") no-repeat scroll 0 0 transparent;
  position: absolute;
  margin-left: 5px;
  margin-top: 65px;
  height: 45px;
  width: 23px;
  opacity:0.4;
  filter:alpha(opacity=40);
  -moz-opacity: .4;
}

.proposal-section .carousel-previous {
  background: url("/assets//prev.png") no-repeat scroll 0 0 transparent;
  position: absolute;
  margin-left: -10px;
  margin-top: 65px;
  height: 45px;
  width: 23px;
  z-index: 1000;
  opacity:0.4;
  filter:alpha(opacity=40);
  -moz-opacity: .4;
} 
```

# iphone - 何时在核心数据中使用 fetch 属性，以跨存储场景为例

> ID：13606448
> 
> 赞同：-4
> 
> 时间：2012-11-28T13:42:05.910
> 
> 标签：iphone, objective-c, ios, core-data, fetched-properties

我面临与[这里相同的问题](https://stackoverflow.com/questions/10951844/fetched-properties-predicate)

如何实现一个商店中的实体与另一个实体之间的关系？

请指导我完成这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T12:17:48.453

在某些情况下，跨存储拆分对象确实是可能的并且完全有意义

假设 obj A 在 Store #1 中， obj B 在 Store #2 中。
每个 A 有 N 个 B

最简单的解决方案可能是 A ... 上的 TRANSIENT 属性，名为“allMyBs”，
然后在代码中实现获取：

```
- (NSArray*)allMyBs {
   NSFetchRequest *r == ... //setup to fetch Entity B
   [CoreDataHelper managedObjectContextForStore2] executeFetchRequest:r];
} 
```

**这还不是获取的属性，但很容易**

查看[与 Fetched Properties 的 Cross-Store 弱关系？](https://stackoverflow.com/questions/8209932/cross-store-weak-relationship-with-fetched-properties)对于一个复杂的方式^^

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-08T22:05:18.993

简短的回答是你不能。您不能在跨持久存储的托管对象之间建立关系。

但是，您可以在模型中实现您跨商店维护的键或标识符，并使用它在不同商店中查找“相关”对象。

如果您在一个存储中具有用户记录，而在另一个存储中有应用程序数据，则应用程序记录可能具有“belongsTo”属性，其值是与用户存储中的用户记录相对应的用户 ID。

Apple 的文档对此非常具体：

[来自核心数据编程指南：](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-CJBDBHCB) “核心数据不允许您创建跨存储的关系。如果您需要创建从一个存储中的对象到另一个存储中的对象的关系，您应该考虑使用获取的属性。”

[同样，来自核心数据编程指南：](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/CoreData/Articles/cdRelationships.html#//apple_ref/doc/uid/TP40001857-SW5) “您必须注意不要创建从一个持久存储中的实例到另一个持久存储中的实例的关系，因为核心数据不支持这一点。如果您需要在实体之间创建关系不同的商店，您通常使用获取的属性（请参阅“获取的属性”）。”

这正是我上面所说的。如果您以这种方式实现获取的属性，则由您来维护图形的完整性。同一个文档将引导您创建和使用获取的属性。也许您可以更具体地了解您需要回答的内容。

# php - 动态调用方法的排序参数数组

> ID：13606451
> 
> 赞同：2
> 
> 时间：2012-11-28T13:42:16.077
> 
> 标签：php, arrays, reflection

我正在使用反射来动态调用方法。

```
$object = new $class;
$reflector = new ReflectionMethod($class, $method);
$reflector->invokeArgs($object, $arguments); 
```

`$arguments`数组看起来像：

```
Array
(
    [fooparam] => false
    [id] => 238133
) 
```

调用的方法可以是：

```
class MyClass
{
    public function myMethod ($id, $fooParam)
    {
        // Whatever
    }
} 
```

问题是一切都来自前端设计师，取决于`data-*`属性，`href`......所以`$arguments`数组有任意排序。

如何对该数组进行排序以匹配方法参数？
哦，也许，有更好的解决方案吗？命名参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:04:48.657

使用[ReflectionMethod::getParameters()](http://php.net/manual/en/reflectionfunctionabstract.getparameters.php)获取参数列表并将它们过滤映射到相应的位置，例如：

```
$sorted_args = array_map(function($param) use($arguments) {
    $name = $param->getName();
    if (!isset($arguments[$name]) && !$param->isOptional())
        throw new BadMethodCallException("Argument '{$name}' is mandatory");

    return isset($arguments[$name]) ? $arguments[$name] : $param->getDefaultValue();
}, $reflector->getParameters()); 
```

你也可以使用一个简单`foreach`的循环，这取决于你。

然后调用该方法`$sorted_args`：

```
$reflector->invokeArgs($object, $sorted_args); 
```

# r - 在R中减去两个结构相同的列表

> ID：13606452
> 
> 赞同：11
> 
> 时间：2012-11-28T13:42:25.797
> 
> 标签：r

如何在 R 中减去两个结构相同的列表。以下函数创建数据集

```
dataSet <- function(x,y){
    data <- lapply(1:4, function(x)
           do.call(cbind,do.call(cbind,
                                 lapply(lapply(1:5,function(y)
                                               cbind(rnorm(10))), data.frame)) ))
    pVariatesNames <- paste("s",seq(from=380, length.out=5),sep="")
    nCasesNames <- c("Paper","R","G","B")
    customerNames <- paste("Customer",seq(from=1, length.out=10),sep=" ")
    names(data) <- nCasesNames
    for(i in 1:4) {
        colnames(data[[i]]) <- pVariatesNames
        rownames(data[[i]]) <- customerNames
    }
    return(data)
}
dataSet1 <- dataSet(4,5); dataSet1
dataSet2 <- dataSet(4,5); dataSet2 
```

我想从 dataSet2 中减去 dataSet1

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T13:45:16.260

这取决于结构。在这种情况下`mapply`应该工作：

```
mapply('-', dataSet2, dataSet1, SIMPLIFY = FALSE) 
```

编辑：另一个解决方案`Map()`

```
Map('-', dataSet2, dataSet1) 
```

# java - Spring ThreadPoolTask Executor 导致 Tomcat 中的 MemoryLeak

> ID：13606453
> 
> 赞同：4
> 
> 时间：2012-11-28T13:42:30.580
> 
> 标签：java, spring, tomcat, concurrency

我有一个在 Tomcat 7 中运行的 Spring 3 应用程序。

我正在使用 Spring 的 ThreadPoolTask​​Executor 来处理队列中的一些消息。我有一个使用 @Scheduled 的 bean，它每 100 毫秒向执行程序提交一次任务。

但是，我注意到当我关闭 Tomcat 时，它会警告我它无法关闭某些任务。

```
SEVERE: The web application appears to have started a thread named [taskExecutor-9] but has failed to stop it. This is very likely to create a memory leak.
Nov 28, 2012 1:29:18 PM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-21T13:54:09.760

您是否在 executor bean 上注册了关闭方法？我可以通过这样做来解决这个问题：

```
@Bean(destroyMethod="shutdown")
     public Executor taskExecutor() {
         return Executors.newScheduledThreadPool(100);
     } 
```

参考：

> [http://docs.spring.io/spring/docs/3.2.0.RC1_to_3.2.0.RC2/changes/docdiffs_org.springframework.scheduling.annotation.html](http://docs.spring.io/spring/docs/3.2.0.RC1_to_3.2.0.RC2/changes/docdiffs_org.springframework.scheduling.annotation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:22:08.363

`setWaitForTasksToCompleteOnShutdown(true)`连接时尝试拨打电话`ThreadPoolTaskExecutor`。

文档在这里：[http](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setWaitForTasksToCompleteOnShutdown(boolean) ://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/concurrent/ExecutorConfigurationSupport.html#setWaitForTasksToCompleteOnShutdown(boolean )，它说的是默认值是假的。

# c++ - 视频文件中的 QVideoFrames 列表

> ID：13606454
> 
> 赞同：3
> 
> 时间：2012-11-28T13:42:30.483
> 
> 标签：c++, qt

我正在尝试从视频文件中获取 Qt 中的 QVideoFrame 列表（不管是什么格式）。我查看了[http://doc.qt.digia.com/qt/qvideoframe.html](http://doc.qt.digia.com/qt/qvideoframe.html)以找到有关 QVideoFrame 的一些信息，但我找不到有关如何从视频文件制作 QVideoFrames 的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T22:36:36.747

这个[例子](http://harmattan-dev.nokia.com/docs/library/html/qt4/multimedia-videowidget.html)很旧，但它应该是一个不错的起点。

# ios - 如何计算iOS中应用程序在后台花费的时间

> ID：13606455
> 
> 赞同：2
> 
> 时间：2012-11-28T13:42:31.470
> 
> 标签：ios, ipad, nstimer, uiapplicationdelegate, uiapplication

如何查找应用程序在挂起状态下花费的时间（当应用程序在设备上最小化时）。我想通知用户您的应用在后台运行了 30 分钟，请重新登录该应用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:44:25.630

简单的。当应用程序进入后台时存储 [NSDate date]。当应用程序从后台返回时，将 [NSDate date] 与您进入后台时存储的值进行比较。我知道我是天才谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:44:21.190

在 appdelegate 方法中：`- (void)applicationDidEnterBackground:(UIApplication *)application`保存一个`NSDate`then 在`- (void)applicationWillEnterForeground:(UIApplication *)application`检查该日期和当前日期之间的时间。

# javascript - 带有地理编码的 Google 地图返回 null

> ID：13606458
> 
> 赞同：1
> 
> 时间：2012-11-28T13:42:41.110
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在使用谷歌地图从一系列邮政编码中放置标记，但它只放置了大约 10% 的标记。其余的返回空结果。我找不到问题。这是我的代码。

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language=en"></script>
<script type="text/javascript">     
  var latlng = new google.maps.LatLng(37.09024, -95.712891);
  var map = new google.maps.Map(document.getElementById('pledge-map'), {
    zoom: 4,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });               
  var geocoder = new google.maps.Geocoder();
  var locations = <?php echo(json_encode($zips)); ?>        
  for (var i = 0; i < locations.length; i++) {                
    geocoder.geocode( { 'address': locations[i]}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        var marker = new google.maps.Marker({
            position: results[0].geometry.location,
            map: map
          });
      }
    });     
  }
</script> 
```

位置是一个邮政编码数组：

```
locations =["20190","22192","20148","06078","95136","84120","53066","53404","48323","52404","72762","89701","39667","78073","78016","76013","15613","84010","77662","77407","30127","94566","14625","45629","27406","27289","02339","01864","39116","77079","10954","37683","72801","19341","14580","64133","29579","08527","32258","33433","60093","76691","78261","77095","19426","10469","92038","85208","67220","61031","85706","72223","21222","66224","34242","30224","56232","32746","08558","72712","14209","43015","52722","32779","33518","33578","60565","11239","17007","60623","77469","20165","20002","36116","20769","20815","34209","02301","60025","48158","38804","30736","01803","45040","48069","07463","53018","73008","80951","70785","72065","91510","91506","67209","22408","36849"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:49:07.807

地理编码器受配额和速率限制。您没有检查错误情况（如果返回的状态不正确，则没有代码）。

任何一个：

1.  查找quota exceeded 错误码并智能处理（添加延迟重试，成功才添加标记）
2.  离线地理编码邮政编码并存储坐标，使用这些坐标显示您的标记。

# spring-security - 以编程方式设置 Spring 安全并发会话

> ID：13606462
> 
> 赞同：0
> 
> 时间：2012-11-28T13:42:47.900
> 
> 标签：spring-security

是否可以以编程方式设置会话并发？使用 XML 配置很容易做到这一点

```
<session-management>
    <concurrency-control max-sessions="1" error-if-maximum-exceeded="true" />
</session-management> 
```

但我需要的是基于数据库中的某些属性，我想允许/禁止并发会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:56:34.460

您可以使用 Spring 3.1 java configuration for spring security，使您可以拥有自己的并发控制实现，而不是`ConcurrentSessionControlStrategy`. 有关 java 配置示例，请参阅[此 SO 答案](https://stackoverflow.com/questions/10013996/referencing-spring-security-configuration-within-spring-3-1-java-config/10017711#10017711)。

# excel - 动态调整数组大小而不在 VBA 中重新调整它？

> ID：13606466
> 
> 赞同：-1
> 
> 时间：2012-11-28T13:42:53.063
> 
> 标签：excel, vba

我目前正在开发一个与 Microsoft Excel 交互的报告套件。我主要使用的语言是 Java、Perl 和 Python。我会认为自己是一个新手程序员。我选择使用 VBA 的唯一原因是因为它被建议为在编写 Microsoft Office 扩展程序时使用的最佳语言。

考虑到这些，我绝对讨厌数组在 VBA 中的执行方式。具体来说，必须定义数组的大小，而不是让它动态增长。

如何创建动态数组而无需重新调整它们？我试图避免这种情况，因为它显然是资源密集型的。

我找到的唯一解决方案是如果您使用单个循环，您可以将元素的数量设置为等于循环的上限（假设计数 1 次迭代）。

当我不使用单个循环并且这不是一个选项时，我该怎么办？

重新调整是不可避免的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:03:57.090

这不是一个“数组”，但 VBA 确实有一个[`Dictionary`](http://support.microsoft.com/kb/187234)对象（此[链接](http://msdn.microsoft.com/en-us/library/office/aa164502%28v=office.10%29.aspx)也很有用）可能适合您的需要。您需要添加对 的引用`Microsoft Scripting Runtime`，然后您可以创建一个无类型键控字典（实际上`Item`属性是 a `Variant`），它可以动态增长。链接有更完整的示例，但用法基本上是：

```
Set dict = New Dictionary

'Example for adding item to Dictionary
For i = 1 to 100
    dict.Add Key:=i, Item:=someData
Next

'Example for retrieving item from dictionary by Key
For i = 1 to 100
    Debug.Print dict(i)
Next 
```

还有一个`Collection`对象，它提供类似的功能和类似的用法，但不需要添加对 的引用`Microsoft Scripting Runtime`，但`Dictionary`提供了一些更有用的方法，例如`dict.Exists()`检查特定键是否存在。还有一些属性可以让您将所有项目`.Keys`或键提取为-typed 数组`.Items``Dictionary``Variant`

即使您明确声明不想重新调整数组，在创建后调整数组大小的唯一替代方法是`Preserve`在 redim 语句上使用修饰符。这将允许您在创建后灵活地更改数组大小。我说“一些灵活性”的原因是您只能更改数组的最后一个维度。

```
Dim myarray(2, 2)
Redim Preserve myarray(2, 4) 'this works
Redim Preserve myarray(3, 4) 'this is not allowed 
```

正如您所提到的，这是资源密集型的，因为您实际上并没有更改数组的大小，您实际上只是创建了一个新数组并将旧数组的内容复制到其中。

最后一个选择是从 VBA 切换到 .NET。假设您有适当[版本的 Visual Studio](http://en.wikipedia.org/wiki/Visual_Studio_Tools_for_Office#VSTO_compatibility_and_add-in_functionality)可供您使用，您将可以访问[VSTO](http://msdn.microsoft.com/en-us/office/hh133430.aspx)而不是 Office 附带的 VBA 编辑器，然后您将能够为 Excel 和其他 Office 开发符合 CLR 的加载项产品。然后，您将有权访问所有 .NET 集合。同样，这些不是“数组”，因为 .NET 数组具有相同的限制（它们无法调整大小），但您拥有可能适合您需要的动态大小的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-04T18:40:26.933

这是一个相当古老的问题，但我想为已经给出的答案添加一些上下文。

VBA 不直接为动态数组提供类型，并且需要重新调整以更改大小。这似乎效率低下，因为它可能需要将数组的内容复制到内存中的新位置。然而，这正是动态数组在幕后所做的事情：当它们满了时，它们通常会加倍大小，而当它们下降到四分之一以下时，它们会缩小到一半。这保证了添加和删除 O(1) 项的平均运行时间。

因此，如果由于索引查找速度快而想要在 VBA 中使用数组并且还需要动态大小，则可以简单地模拟这种行为。

编辑：一个小的修正。在数组末尾添加或删除时，您会获得 O(1) 的平均性能。对于数组，在随机位置添加总是 O(N)。（你必须把所有东西都移位。）如果你想在随机位置添加，你最好使用链表，它的索引查找性能很差（但是枚举有很好的性能），一个跳过列表，它更复杂但有良好的查找性能牺牲了插入性能或散列集，其键查找非常快但需要更大的空间。

# mysql - 无法更改外键约束中使用的列

> ID：13606469
> 
> 赞同：138
> 
> 时间：2012-11-28T13:42:56.823
> 
> 标签：mysql

当我试图改变我的桌子时，我得到了这个错误。

```
Error Code: 1833\. Cannot change column 'person_id': used in a foreign key constraint 'fk_fav_food_person_id' of table 'table.favorite_food' 
```

这是我成功运行的 CREATE TABLE STATEMENT。

```
CREATE TABLE favorite_food(
    person_id SMALLINT UNSIGNED,
    food VARCHAR(20),
    CONSTRAINT pk_favorite_food PRIMARY KEY(person_id,food),
    CONSTRAINT fk_fav_food_person_id FOREIGN KEY (person_id)
    REFERENCES person (person_id)
); 
```

然后我试图执行这个语句，我得到了上面的错误。

```
ALTER TABLE person MODIFY person_id SMALLINT UNSIGNED AUTO_INCREMENT; 
```

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2015-01-26T14:45:34.203

您可以关闭外键检查：

```
SET FOREIGN_KEY_CHECKS = 0;

/* DO WHAT YOU NEED HERE */

SET FOREIGN_KEY_CHECKS = 1; 
```

请确保不要在生产中使用它并进行备份。

* * *

## 回答 #2

> 赞同：146
> 
> 时间：2012-11-28T13:58:43.027

外键字段和引用的类型和定义必须相同。这意味着您的外键不允许更改字段的类型。

一种解决方案是：

```
LOCK TABLES 
    favorite_food WRITE,
    person WRITE;

ALTER TABLE favorite_food
    DROP FOREIGN KEY fk_fav_food_person_id,
    MODIFY person_id SMALLINT UNSIGNED; 
```

现在您可以更改您的 person_id

```
ALTER TABLE person MODIFY person_id SMALLINT UNSIGNED AUTO_INCREMENT; 
```

重新创建外键

```
ALTER TABLE favorite_food
    ADD CONSTRAINT fk_fav_food_person_id FOREIGN KEY (person_id)
          REFERENCES person (person_id);

UNLOCK TABLES; 
```

**编辑：** 在上面添加了锁，感谢评论

> 在执行此操作时，您必须禁止写入数据库，否则您将面临数据完整性问题的风险。

我在上面添加了一个写锁

除您自己的 ( `INSERT, UPDATE, DELETE`) 之外的任何其他会话中的所有写入查询都将等到超时或`UNLOCK TABLES`; 被执行

[http://dev.mysql.com/doc/refman/5.5/en/lock-tables.html](http://dev.mysql.com/doc/refman/5.5/en/lock-tables.html)

编辑2：OP要求对“外键字段和引用的类型和定义必须相等。这意味着您的外键不允许更改字段的类型”这一行进行更详细的解释。

来自[MySQL 5.5 参考手册：外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

> 外键和引用键中的对应列必须在 InnoDB 内部具有相似的内部数据类型，以便可以在不进行类型转换的情况下进行比较。整数类型的大小和符号必须相同。字符串类型的长度不必相同。对于非二进制（字符）字符串列，字符集和排序规则必须相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-28T01:28:32.260

转到相关表的结构选项卡。在操作下，您有索引。放下它们

完成必要的修改后，带回外键并恢复已删除的索引。然后确保你的结构是相同的并且没有改变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-16T17:33:03.813

在我的情况下，有必要添加`GLOBAL`.

```
SET FOREIGN_KEY_CHECKS = 0;
SET GLOBAL FOREIGN_KEY_CHECKS=0;

/* DO WHAT YOU NEED HERE */

SET FOREIGN_KEY_CHECKS = 1;
SET GLOBAL FOREIGN_KEY_CHECKS=1; 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-11-28T13:48:03.890

当您设置键（主键或外键）时，您正在设置如何使用它们的限制，这反过来又限制了您可以使用它们做什么。如果你真的想改变列，你可以重新创建没有约束的表，尽管我不建议这样做。一般来说，如果你有一种情况，你想做某事，但它被一个约束所阻止，最好通过改变你想做的事情而不是约束来解决。

# python - 在金字塔应用程序中使用 request.static_url()

> ID：13606470
> 
> 赞同：2
> 
> 时间：2012-11-28T13:43:02.360
> 
> 标签：python, pyramid, static-files

在金字塔应用程序中，我定义了一个静态视图用于提供 css/js 文件，另一个用于提供其他数据，例如上传的文件：

```
config.add_static_view('static', 'static', cache_max_age=3600)
config.add_static_view('uploads', path='/data/uploads') 
```

在模板方面，我使用**request.static_url()**来访问静态文件：

```
<script type="text/javascript" src="${request.static_url('myapp:static/js/jquery-1.8.3.min.js')}"></script> 
```

问题是我不知道如何将**request.static_url()**与第二个定义（上传）一起使用，我从来没有工作过并使应用程序崩溃：

```
${request.static_url('uploads/a_named_file')} 
```

你能解释一下我该怎么做吗？提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:35:10.473

看起来您忘记包含完整路径：

```
${request.static_url('/data/uploads/a_named_file')} 
```

根据您为静态资产注册的匹配路径查找静态资产。对于您的两个静态视图注册，您分别使用路径`static`和`/data/uploads`。第一个是相对于`myapp`，但第二个是绝对路径。当为静态视图使用绝对路径时，您需要在生成静态 URL 时使用*相同的绝对路径。*

# html - 如何根据子 div 的存在将背景图像设置为最外层的 div？

> ID：13606471
> 
> 赞同：0
> 
> 时间：2012-11-28T13:43:03.153
> 
> 标签：html, css

html就像： -

```
<div class="mainWrapper">
<div id="left"></div>
<div id="right"></div>
</div> 
```

CSS：-

```
.mainWrapper
{
background-color: #FFF;
overflow: auto;
min-height: 500px;
} 
#left
{
float: left;
padding: 0;
width: 182px;
}   
#right
{
float: left;
padding: 20px;
width: 500px;
}   
.twoColumns
{
background-color: #FFF;
overflow: auto;
min-height: 500px;
border: 0px solid black;
overflow: auto;
background-image: url(/image.jpg);
background-repeat: repeat-y;
background-position: top left;
} 
```

**如果id=left**的div 存在，css 类“twoColumns”将被添加到“mainWrapper”类。背景图像（颜色#363636）将被赋予最外层的div。如果在准备好的文档中添加了 css 类（twoColumns）（取决于#left 存在），则从服务器获取图像需要时间。如何根据子 div 的存在将背景图像添加到最外层 div？任何解决这个问题的想法/建议都会受到称赞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:40:14.967

我建议从一开始就将图像放入包装器中，然后在您各自的条件下将其删除。所有这一切都可以通过一点 css 更改和 javascript 轻松实现：

CSS：

```
.mainWrapper
{
background-color: #FFF;
overflow: auto;
min-height: 500px;
    background-image: url(http://www.psdgraphics.com/wp-content/uploads/2009/02/abstract-background.jpg);
} 
#left
{
float: left;
padding: 0;
width: 182px;
}   
#right
{
float: left;
padding: 20px;
width: 500px;
}   
.twoColumns
{
background-color: #FFF;
overflow: auto;
min-height: 500px;
border: 0px solid black;
overflow: auto;
background-repeat: repeat-y;
background-position: top left;
}​ 
```

JS/jQuery：

```
$(document).ready(function(){
    if($(".mainWrapper #left").length == 0){
        $(".mainWrapper").css({'background-image':'none'});
    }

});​ 
```

[这是小提琴](http://jsfiddle.net/TNCodeMonkey/fcVpJ/)

# backbone.js - 在 collection.fetch 成功回调中重新绑定事件

> ID：13606472
> 
> 赞同：2
> 
> 时间：2012-11-28T13:43:08.297
> 
> 标签：backbone.js

在我看来，我有以下绑定：

```
events: 
{
     'click #showallconsumers': 'showAllConsumers',
     'submit form': 'submit',
     'click #allconsumerstable tbody tr': 'selectConsumer',
}, 
```

在 showAllConsumers 函数中，我需要禁用点击 #showallconsumers 锚点，获取集合并在获取完成后重新绑定 #showconsumers 上的点击事件。

```
showAllConsumers: function()
{       
    $(this.el).undelegate('#showallconsumers', 'click');

    this.collection.fetch(({async: true, success : this.renderAllConsumers}));

},
renderAllConsumers: function(collection)
{
     //i'm populating table with data from collection 

     $('#showallconsumers').bind('click', this.showAllConsumers);
}, 
```

当我单击#showallconsumers 锚点时，取消委托有效，但是当提取完成时，.bind(...) 无法重新绑定事件。我也尝试使用.delegate(...)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:44:28.383

的`success`函数`fetch`不会以视图作为其上下文来调用，因此`this.showAllConsumers`不会指向您的函数。

[当在Underscore](http://underscorejs.org/#bind)中调用`fetch`wrap`success`函数时，它指向您的视图：[`bind`](http://underscorejs.org/#bind)`this`

```
this.collection.fetch(({async: true, success : _.bind(this.renderAllConsumers, this)})); 
```

# string - 在python中使用str设置模块的属性

> ID：13606474
> 
> 赞同：1
> 
> 时间：2012-11-28T13:43:09.413
> 
> 标签：string, image-processing, attributes, python-3.x, python-imaging-library

我正在尝试学习python（使用python3.2），现在我正在创建一个旨在缩放图像的程序：

```
from PIL import Image

def newSizeChoice():
    scale = input('Please enter the scale to be applied to the image: x')
    while float(scale) <= 0:
        scale = input('Invalid: scale must be positive. Please enter a new scale: x')
    return float(scale)

def bestFilter(x):
    if x < 1:
        filter = 'ANTIALIAS'
    elif x == 2:
        filter = 'BILINEAR'
    elif x == 4:
        filter = 'BICUBIC'
    else:
        filter = 'NEAREST'
    return filter

def resize(img, width, height, scale, filter):
    width = width * scale
    height = height * scale
    newimg = img.resize((width, height), Image.filter)
    newimg.save('images\\LargeCy.png')
    newimg.show()

img = Image.open('images\\cy.png')
pix = img.load()
width, height = img.size

scale = float(newSizeChoice())
filter = bestFilter(scale)
resize(img, width, height, scale, filter) 
```

现在有点乱，因为我还在努力，但我的问题是当我在函数'bestFilter'中设置过滤器时，我无法使用它在函数'中设置过滤器调整大小'。我不断收到的错误：

```
Traceback (most recent call last):
  File "C:\Users\14davidson_a\Desktop\Projects\Exercises\ImageScaling.py", line 33, in <module>
    resize(img, width, height, scale, filter)
  File "C:\Users\14davidson_a\Desktop\Projects\Exercises\ImageScaling.py", line 23, in resize
    newimg = img.resize((width, height), Image.filter)
AttributeError: 'module' object has no attribute 'filter' 
```

问题：有没有办法可以使用字符串来设置模块的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:46:25.720

您正在尝试使用`Image.filter`未在`Image`模块上定义的 。也许您打算改用该`filter`方法的参数？

```
def resize(img, width, height, scale, filter):
    width = width * scale
    height = height * scale
    newimg = img.resize((width, height), filter)
    newimg.save('images\\LargeCy.png')
    newimg.show() 
```

您不会将该`filter`参数用于该方法中的任何其他内容。

您需要更新`bestFilter()`函数以返回有效`Image`过滤器：

```
def bestFilter(x):
    if x < 1:
        filter = Image.ANTIALIAS
    elif x == 2:
        filter = Image.BILINEAR
    elif x == 4:
        filter = Image.BICUBIC
    else:
        filter = Image.NEAREST
    return filter 
```

您可以通过使用映射来简化该功能：

```
_scale_to_filter = {
    1: Image.ANTIALIAS,
    2: Image.BILINEAR,
    4: Image.BICUBIC,
}
def bestFilter(x):
    return _scale_to_filter.get(x, Image.NEAREST) 
```

# javascript - 如何创建依赖于 mvc4 中检查的字段的注册表单？

> ID：13606475
> 
> 赞同：0
> 
> 时间：2012-11-28T13:43:12.127
> 
> 标签：javascript, ajax, validation, asp.net-mvc-4

我想在 mvc 4 应用程序中创建一个注册表单。所以，当用户注册时，我想定义用户的状态（他是否是程序员）并根据用户的选择动态显示（或隐藏）一些额外的字段来填充。

在默认情况下，如果用户不是程序员（通过取消选中复选框字段），所有字段似乎都隐藏了**Language、Site 和 Probation**字段。我的注册模型是这样的：

```
public class RegisterModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "*", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "Password")]
        public string Password { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm password")]
        [Compare("Password", ErrorMessage = "*")]
        public string ConfirmPassword { get; set; }

        [Display(Name = "Profession")]
        public bool IsProgrammer { get; set; }

        [Required]
        [Display(Name = "Language")]
        public string Language { get; set; }

        [Required]
        [Display(Name = "Site")]
        public string Site { get; set; }

        [Required]
        [Display(Name = "Probation")]
        public string Probation { get; set; }            
    } 
```

如果用户是程序员，Language、Site 和 Probation 字段是必填项，用户必须填写。

我应该如何创建注册模型，如果用户不是程序员，不需要语言、站点和试用字段**并让注册**？

我的第二个问题是，当复选框被选中（未选中）时，如何动态显示（隐藏）字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:54:21.370

快速搜索“mvc asp.net 条件必填字段”给了我以下几个链接：

[条件数据注释](https://stackoverflow.com/questions/2417113/asp-net-mvc-conditional-validation)

[使用 IValidatableObject](https://stackoverflow.com/questions/6453560/conditional-data-annotation)

[灵活的条件数据注释](http://blogs.msdn.com/b/stuartleeks/archive/2011/10/06/flexible-conditional-validation-with-asp-net-mvc-3.aspx)

这些更针对服务器端验证。

所以回答你的问题：

1.  查看链接，它们会有所帮助
2.  您可以使用 jQuery 来实现，了解更多关于 jQuery [Hide](http://api.jquery.com/hide/) and [Show](http://api.jquery.com/show/)

# delphi - 为什么我的图标在带有 TTrayIcon 的托盘栏上很难看？

> ID：13606477
> 
> 赞同：8
> 
> 时间：2012-11-28T13:43:21.473
> 
> 标签：delphi, alpha, blur, tray

我最近在 Delphi 2007 中发现了 TTrayIcon 组件。使用的代码非常简单。

```
procedure TForm1.FormCreate(Sender: TObject);
begin
 AppTrayIcon := TTrayIcon.Create(nil);
 AppTrayIcon.OnDblClick := OnAppTrayIconDblClick;
 Application.OnMinimize := OnApplicationMinimize;
 Application.OnRestore := OnApplicationRestore;
end;

procedure TForm1.OnApplicationRestore(Sender: TObject);
begin
 AppTrayIcon.Visible := False;
 ShowWindow(Application.Handle, SW_SHOW);
 Application.BringToFront;
end;

procedure TForm1.OnApplicationMinimize(Sender: TObject);
begin
 AppTrayIcon.Visible := True;
 ShowWindow(Application.Handle, SW_HIDE);
end;

procedure TForm1.OnAppTrayIconDblClick(Sender: TObject);
begin
 Application.Restore;
end; 
```

由于没有分配图标，Delphi 使用 Application.Icon，也就是那个图标：[http](http://artbyloveland.com/icon.ico) ://artbyloveland.com/icon.ico这个图标包括以下尺寸：64x64、48x48、32x32、24x24 和 16x16。

现在，在我的 Windows Vista 上，一切正常。

在像 Windows Server 2003 这样的非主题 Windows 上，结果完全搞砸了：

![搞砸的图标](../Images/30e2094dab590643ea7c4b13de4ebb76.png)

**编辑：** 起初，我认为这是因为 alpha 通道。所以我尝试在不使用 alpha 通道的情况下制作 ico 文件的版本。我还按照 Ken 的建议尝试了 GreenFish 图标编辑器；我选择了每种颜色深度和每种可用尺寸。在这两种情况下，最终结果都更好。但是，ico文件中根本不存在黑色笔划。

![搞砸了图标 2](../Images/283b61a02daad6a8d987f7b2aae1c3f5.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T20:29:58.023

您声明您没有分配图标。在这种情况下，组件使用`Application.Icon`. 但这通常是通知区域大小错误的图标。

对于通知区域，您需要使用大小由`SM_CXSMICON`系统指标确定的方形图标。最好的方法是调用`LoadImage`允许您指定图标大小的方法。将图标加载到 an中后，`HICON`您只需编写以下代码：

```
AppTrayIcon.Icon.Handle := IconHandle; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T13:51:55.487

您的图标没有合适的大小或颜色深度。

您可以使用图标编辑器为单个`.ico`文件提供多种大小和颜色深度的图标，Windows 会根据用户的设置和视频驱动程序配置自动选择合适的图标。然后，在选择最接近的匹配时，Windows 将有几个选项可供使用，并且缩放和混合将具有更好的外观。

我使用[GreenFish Icon Editor](http://greenfish-icon-editor-pro.en.softonic.com/)，它是捐赠软件。它将允许您打开任何受支持的图形类型，然后从中自动创建具有多种颜色深度和分辨率的 Windows 图标（请参阅`Icon`菜单）。我已经在 Delphi 7、2007、2010、XE 和 XE3 中测试了多图像图标文件，它们适用于`Application.Icon`和`TForm.Icon`.

另请参阅[在托盘中显示的最佳图标大小](https://stackoverflow.com/q/8100334/62576)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-09T17:20:01.753

我想，我会分享我对这个问题的解决方案，因为目前这里没有完整的解决方案。

这个问题让我抓狂，因为这显然是一个 Delphi/VCL 错误。如果你为你的项目分配了一个具有所有所需尺寸（16、24、32、48、256）的图标，Delphi 应该会自动在 TTrayIcon 中使用正确的尺寸，但它只需要 32px 的图标并将其缩小。

由于所需的图像已经在 exe 文件中（用于显示在 Windows 资源管理器中），因此您可以像这样简单地修复它：

```
procedure FixTrayIcon(TrayIcon: TTrayIcon);
var
  i: Integer;
begin
  i := GetSystemMetrics(SM_CXSMICON); //Gets the correct size for the tray (e.g. 16)
  TrayIcon.Icon.Handle := LoadImage(hInstance, 'MAINICON', IMAGE_ICON, i, i, LR_DEFAULTCOLOR);
  TrayIcon.SetDefaultIcon; //Updates the icon
end; 
```

只需在 FormCreate 中调用它，您的托盘图标就会看起来像设计的那样。

# java - 应用程序在三天后不应该工作

> ID：13606479
> 
> 赞同：-3
> 
> 时间：2012-11-28T13:43:23.830
> 
> 标签：java

我正在创建一个必须在**三天**后过期的应用程序。如果应用程序过期，用户应该无法重新安装该应用程序。我在第一次运行应用程序时将文件存储在 sdcard 上，然后我想检查设备的当前时间与文件的创建时间。我无法计算两个日期之间的差异。我写了以下代码。我怎样才能完成这项任务。请急。提前致谢。

```
Date firstFile =  new Date(firstFile.lastModified());
Date currentTime= new Date(currentfile.lastModified()); 
```

我能够获得两个变量中的值，但我需要计算天或分钟的差异

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:46:43.917

以毫秒为单位获取时间，然后做一些简单的数学运算。

```
int days = (int) (milliseconds / (1000*60*60*24)); 
```

问题是这不安全。如果您删除存储日期的文件……您就完成了。

确保安全的唯一方法是在第一次启动时使用服务器映射手机。

[有关过期应用程序的更多信息。](https://stackoverflow.com/questions/995719/creating-an-android-trial-application-that-expires-after-a-fixed-time-period)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:08:18.683

获取每个日期的毫秒。减去并与 3 天内的毫秒数进行比较。

```
 Date firstFile =  new Date(firstFile.lastModified());
    Date currentTime= new Date(currentfile.lastModified());
    long millisInADay = 1000*60*60*24;
    long maxMillis = millisInADay * 3;
    if (maxMillis < (currentTime.getTime() - firstFile.getTime()) {
        // expired;
    } 
```

当然，正如其他人所提到的，用户需要做的就是删除文件或编辑它，然后他们就可以免费使用该应用程序了。但典型的用户可能不够精明，无法弄清楚这一点。仅取决于您的目标用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-26T07:31:17.570

正确的做法是，在首次安装时通过 post api 将设备的 deviceId 和安装时间存储到服务器。从该服务器检查安装时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-03T09:45:31.663

我现在正在回答我自己的问题。我们可以通过将安装时间存储在 sharedpreferences 中来做到这一点。然后在打开应用程序时在 sharedpreference 中检查它。用户不能手动修改它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-28T14:06:02.760

我的第一个建议不要使用默认的 datetime 包。去[JodaTime](http://joda-time.sourceforge.net)图书馆。

```
DateTime firstFile =  new DateTime(firstFile.lastModified());
DateTime currentTime= new DateTime(currentfile.lastModified());
long milles = currentTime.getMillis() - firstFile.getMillis();
int days = (int) (milliseconds / (1000*60*60*24)); 
```

考虑 Jodatime 而不是 java.util.Date 的一些原因 -

*   从JDK1.0
*   使用两位数年份（从 1900 年开始）
*   一月是0，十二月是11
*   应该是不可变的
*   JDK1.1 中不推荐使用的大多数方法
*   使用 1970 年表示的毫秒数

有关 Joda-time 的更多用法，请参阅[IBM 教程](http://www.ibm.com/developerworks/java/library/j-jodatime/index.html)。

加上使用文件来强制试用期是徒劳的。您应该尝试服务器试用或存储使用日期（不是 lastModified）加密的文件。即使用户找到日期，他也无法更改。希望对你有所启发。

# c++ - 如何将二维矩阵传递给函数

> ID：13606482
> 
> 赞同：0
> 
> 时间：2012-11-28T13:43:30.443
> 
> 标签：c++

我正在使用类添加矩阵。我已经声明了一个类“矩阵”。现在我需要将矩阵的对象传递给函数。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:49:58.780

实际上，最好的方法（恕我直言）是重载`operator+()`. 因此，在您的代码中，您只需要使用`+`：

```
class Matrix {
    private:
        // Your code
    public:
        // Your code
        friend Matrix operator+(const Matrix &c1, const Matrix &c2);
}

friend Matrix operator+(const Matrix &c1, const Matrix &c2) { <--- passing by reference
    // Your code to add matrices
}

int main() {
    Matrix A, B;
    Matrix C = A + B;
} 
```

在按值传递的情况下，`Matrix sum(Matrix a, Matrix b)`如果矩阵的内存是动态分配的，则需要编写一个复制构造函数。

通过指针传递`Matrix sum(Matrix *a, Matrix *b)`是一种 C 风格的编码，所以它仍然是正确的，但对于 C++ 来说并不可取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:48:13.570

```
Matrix object;
// ...
f(object); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:49:26.920

你有很多方法可以做到这一点。

按价值：

```
void func (Matrix m); 
```

引用：

```
void func (Matrix& m); 
```

或按指针：

```
void func (Matrix* m); 
```

您使用哪一个取决于您的需求和操作的语义。

# c++ - C++ 非类型模板参数采用继承类

> ID：13606483
> 
> 赞同：5
> 
> 时间：2012-11-28T13:43:32.233
> 
> 标签：c++, templates, inheritance, template-specialization

我希望能够将继承自的对象的引用`DBMetaData`作为另一个类的非类型模板参数传递`DBVar`：

```
#include    <iostream>

class   DBMetaData
{
public:
    virtual const char  *description( ) const   = 0;
};

class   DBMetaData_NT
:   public  DBMetaData
{
public:
    const char  *description( ) const
    {   return  "Useless description."; }
};

#if DO_WHAT_I_WANT
template< const DBMetaData &Metadata >
#else
template< typename MetadataType,
    const MetadataType &Metadata >
#endif  // DO_WHAT_I_WANT
class DBVar
{
public:
    /// Descrição da variavel.
    const char  *description( ) const
    {   return  Metadata.description( ); }
};

DBMetaData_NT       _md_u1;

#if DO_WHAT_I_WANT
DBVar< _md_u1 > _u1;
#else
DBVar< DBMetaData_NT, _md_u1 >  _u1;
#endif  // DO_WHAT_I_WANT

int main( )
{
    std::cout << "_md_u1.description( ) = " << _md_u1.description( ) << std::endl;
    std::cout << "_u1.description( ) = "    << _u1.description( ) << std::endl;

    return  0;
} 
```

我可以编译并运行上面的示例*，但*我需要明确指定继承的类型。

如果我尝试编译它定义`DO_WHAT_I_WANT`（我想将类型的引用或指针传递给`DBMetaData`任何继承类的对象），我会收到错误消息：

```
templ_inh_arg.cpp:36:15: error: could not convert template argument ‘_md_u1’ to ‘const DBMetaData&’
templ_inh_arg.cpp:36:20: error: invalid type in declaration before ‘;’ token 
```

为什么我不能通过`_u1`，那是`DBMetaData_NT`继承自`DBMetaData`as 参数的类型`DBVar< _md_u1 > _u1;`？

有什么办法可以得到我想要的吗？

谢谢！

* * *

编辑：

正如@ecatmur 所建议的，用函数指针替换模板参数解决了我的问题，而且我必须注意，使我的代码更具可读性。

```
#include    <iostream>

class   DBMetaData
{
public:
    /// Descrição da variavel.
    virtual const char  *description( ) const   = 0;
};

class   DBMetaData_NT
:   public  DBMetaData
{
public:
    const char  *description( ) const
    {   return  "Useless description."; }
};

typedef     const DBMetaData &( *metadata )( );

template< metadata Metadata >
class DBVar
{
public:
    /// Descrição da variavel.
    const char  *description( ) const
    {   return  Metadata( ).description( ); }
};

const DBMetaData & _md_u1_metadata( )
{
    static const DBMetaData_NT      _md_u1;

    return  _md_u1;
}

DBVar< _md_u1_metadata >    _u1;

int main( )
{
    std::cout << "_md_u1_metadata( ).description( ) = " << _md_u1_metadata( ).description( ) << std::endl;
    std::cout << "_u1.description( ) = "    << _u1.description( ) << std::endl;

    return  0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T14:12:55.840

不幸的是没有。根据 14.3.2**模板非类型参数**，第 1 段：

> 非类型、非模板模板*参数*的*模板参数*应为以下之一： [...]
> 
> *   一个常量表达式，指定具有静态存储持续时间的对象的地址 [...]，表示（忽略括号）为`&` *id-expression*，但如果相应的*模板参数*是引用`&`，则应省略 [...] .

 *根据同一部分的第 5 段，不允许*派生*到基础的转换：

> *   对于对象类型引用的非类型*模板参数*，不适用任何转换。引用所指的类型可能比*template-argument*的（否则相同）类型更具 cv 限定。*模板参数*直接绑定到*模板参数*，它应该是一个左值。

这也意味着不允许进行强制转换，因为这不是 [ `&`] *id-expression*的形式，并且不会产生左值。

根据您要完成的工作，您可以通过手动模拟多态性来获得类似的结果，例如已`_md_u1`初始化为设置适当 vtable 指针或表的函数的返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:36:29.453

您可以使用 C++11`decltype`和如下宏：

```
#define DBVAR(metadata) DBVar<decltype(metadata), metadata> 
```

现在，定义一个变量：

```
DBVAR(_md_u1) _u1; 
```

希望这可以帮助。

编辑：老实说，我不喜欢你的方法。我宁愿使用静态元数据成员函数或非基于模板的多态性。*

# menu - Boonex 额外顶部菜单

> ID：13606486
> 
> 赞同：2
> 
> 时间：2012-11-28T13:43:36.853
> 
> 标签：menu

我正在使用 boonex 7.0 创建一个站点。我需要在“顶部菜单位置”的顶部添加一个额外的菜单。我正在吃的部分。

```
 __extra_top_menu__ ...请任何人帮助我从管理员端获取主菜单（顶部菜单）顶部的额外菜单...
```

# python - Pandas：计算仅在两列中不同的所有条目的平均值

> ID：13606487
> 
> 赞同：4
> 
> 时间：2012-11-28T13:43:40.240
> 
> 标签：python, pandas

我刚刚拿起`pandas`，认为它将使我能够在 python 中很好地进行数据分析。现在我有`pandas`以下形式的数据框：

```
pandas.DataFrame({"p1": [1, 1, 2, 2, 3, 3]*2,
                  "p2": [1]*6+[2]*6,
                  "run": [1, 2]*6,
                  "result": xrange(12)})

    p1  p2  result  run
0    1   1       0    1
1    1   1       1    2
2    2   1       2    1
3    2   1       3    2
4    3   1       4    1
5    3   1       5    2
6    1   2       6    1
7    1   2       7    2
8    2   2       8    1
9    2   2       9    2
10   3   2      10    1
11   3   2      11    2 
```

我想生成一个框架，其中包含每组参数的一个条目，`p1`以及这些参数`p2`的所有值的平均值`result`，即

```
 p1  p2  result
0   1   1     0.5
1   2   1     2.5
2   3   1     4.5
3   1   2     6.5
4   2   2     8.5
5   3   2    10.5 
```

这样做的`pandas`方法是什么？我会尝试复制原始表，删除不同的列（`result`和`run`），重新索引，再次将这两个东西与新索引组合为多索引，然后运行该外部多索引级别的平均方法。这是这样做*的*方法吗，如果是，我该如何在代码中正确地做这些索引？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T14:04:03.377

您可以使用 groupby （我已将您的数据框称为 df）：

```
df.groupby(['p1', 'p2']).mean() 
```

这会产生一个 MultiIndex DataFrame。要获取问题中的布局，请仅选择所需的列并重置索引：

```
df.groupby(['p1', 'p2']).mean()['result'].reset_index() 
```

# sql-server-2008 - SQL Server 兼容性级别含义

> ID：13606488
> 
> 赞同：13
> 
> 时间：2012-11-28T13:43:40.270
> 
> 标签：sql-server-2008, sql-server-2005, compatibility

一个快速的信息问题：

在我的 SQL Server 2008 上，我有从 SQL Server 2005 迁移的数据库，并且 SQL Server 2008 上的数据库的兼容性级别设置为`90`(SQL Server 2005)。

这究竟意味着什么？

这意味着迁移的存储过程、触发器和函数将在 SQL Server 2008 上运行良好，但有什么缺点吗？

`100`将兼容性级别设置为(SQL Server 2008)的原因可能是什么？

表现？额外功能？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T16:52:11.620

兼容模式可帮助人们迁移具有不再与新版本 SQL 兼容的功能的应用程序。如果您的应用程序需要 sql 2008 不再支持的功能，您可能希望在兼容模式下运行它们；否则你想使用当前的 sql 模式。我们的业务运行一个应用程序，由于它连接到数据库的方式需要 SQL 2000 兼容模式；但它在 SQL 2012 服务器上运行。

代码中的特定功能可能会影响性能，因为所需的逻辑不同，而不是执行特别不同。作为一个非常通用的规则，针对 2012、2008 上的函数优化的 SQL 代码将比 SQL 2000 或 SQL 7 更快，因为它们添加了诸如 CTE 和 un/pivot 之类的东西，这两者都允许简化编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-27T19:46:54.337

除了无法使用任何新功能（包括作为查询优化器（在 SQL Server 2014 中）中的改进）的幕后功能之外，留在兼容模式下会使未来的升级更加困难。MSDN 有一个不同版本的列表[http://msdn.microsoft.com/en-us/library/bb510680%28v=sql.110%29.aspx](http://msdn.microsoft.com/en-us/library/bb510680%28v=sql.110%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-27T07:55:36.023

永远不要假设将数据库备份和恢复到较新的实例就是迁移数据库所需的全部内容。这是许多隐藏的和意外的应用程序错误的原因。如果您的应用程序在数据库还原后出现错误，请查看其兼容性级别。如果它已经改变，这可能是原因。更改兼容级别的行为告诉数据库更改其功能集。也就是说，会添加一些功能，但同时会删除一些旧功能。例如，在兼容级别 100 的 INSERT 和 SELECT INTO 语句中不允许使用 FOR BROWSE 子句，但在兼容级别 90 时允许但忽略它。因此，如果您的应用程序使用此功能，此更改可能会导致意外结果。

该[网站](https://www.spiria.com/en/blog/web-applications/understanding-sql-server-compatibility-levels)可以提供大量有关兼容性级别、优缺点以及大量最佳实践的信息。

# plugins - 包括来自 Symfony 1.4 插件的全局部分

> ID：13606489
> 
> 赞同：1
> 
> 时间：2012-11-28T13:43:41.230
> 
> 标签：plugins, view, symfony-1.4

是否可以在模块中包含来自 Symfony 1.4 插件的全局部分？如果是这样，怎么做？

我知道可以包含来自插件的模块的部分内容，但是如何包含全局模板？

所以假设我的 Symfony 应用程序具有以下文件结构。

```
/config
/lib
/apps
  /backend
    /config
    /modules
      /aModule
        /config
        /templates
          /aTemplateWithinAModule.php
        /actions
          /actions.class.php
    /templates
/plugins
  /examplePlugin
    /lib
    /config
    /modules
    /templates
      /_aGlobalPluginPartial.php 
```

如何在 aTemplateWithinAModule.php 中包含“aGlobalPluginPartial”？

我试过了：

*   `include_partial('global/aGlobalPluginPartial')`
*   `include_partial('examplePlugin/global/aGlobalPluginPartial')`
*   `include_partial('examplePlugin/aGlobalPluginPartial')`

到目前为止，以上都没有工作。

我的插件在项目配置中启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:14:02.933

你应该把它放在一个模块中。

```
/plugins
  /examplePlugin
    /lib
    /config
    /modules
      /example
        /templates
          /_aGlobalPluginPartial.php 
```

然后使用：

```
include_partial('example/aGlobalPluginPartial'); 
```

不要忘记`example`在您的`settings.yml`文件中启用该模块（在 中`enabled_modules`）。

# jquery - JQuery .load 然后检索数据

> ID：13606490
> 
> 赞同：1
> 
> 时间：2012-11-28T13:43:43.377
> 
> 标签：jquery, load

我认为这会起作用，但显然我做错了什么。我需要从很多 html 文件中获取数据，并想我会写一个快速的爬虫程序。所有文件都是本地的。代码如下。来自 url 的 html 加载到 div 'scrapedHTML' ok。但是当我尝试 console.log 那个 div 的 html 时，我什么也没得到，我不知道为什么。任何帮助，将不胜感激。

```
<body class="home">

    <header class="hd1">

    </header>

    <contentWrapper>
        <div id="scrapedHTML" style="position:absolute; top: 150px; left: 150px; width: 800px; height: 200px; border: 1px solid black; overflow-y:scroll;"></div>

        <div id="displayData" style="position:absolute; top: 400px; left: 150px; width: 800px; height: 500px; border: 1px solid black; ">

        </div>

    </contentWrapper>

    <footer class="f1">

    </footer>

<!-- jQuery version might not be the latest; check jquery.com -->
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
<script langauge="javascript">

    $(document).ready(function() { 

            var scrapeThisURL = "oc-bloodloss.html";
            $('#scrapedHTML').load(scrapeThisURL);
            var capturedHTML = $("#scrapedHTML").html();
            console.log(capturedHTML);

    });

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:47:20.473

`.load`方法是异步的。

你应该这样做：

```
$('#scrapedHTML').load(scrapeThisURL, function() {
    var capturedHTML = $("#scrapedHTML").html();
    console.log(capturedHTML);
}); 
```

注意代码是专门从div中获取html的。你可以这样做会更好：

```
$('#scrapedHTML').load(scrapeThisURL, function(response) {
    console.log(response);
}) 
```

# php - php 类不工作

> ID：13606491
> 
> 赞同：0
> 
> 时间：2012-11-28T13:43:43.673
> 
> 标签：php, mysql, pdo

为什么我的代码在这里不起作用我认为我做错了但我无法确定是否有人能在这里发现我做错了什么

这是我的代码：我在这里尝试使用 php 类在数据库中插入新行

```
<?php
$connection = new PDO('mysql:dbname=master;host=localhost','root','123');
/*if($connection)
{
    echo 'Database is connected successfully';
}
else
     {
    echo 'please connect to a database';
}*/
class Topics
{
    public $id;
    public $title;
    public $body;
    public static $table_name = 'topics';
    public static $fields = array ('title','body');
    private function attributes()
    {
        $string = array();  
        foreach (self::$fields as $field) 
        {
            if (!empty($field)) {
                if(is_int($this->$field))
                {
                    $string[] = $field." =".$this->$field;
                }
                else
                {
                    $string[] = $field." ="."'".$this->$field."'";
                }

            }   

        }
        return join(',', $string);
    }
    public function add()
    {
        global $connection;
        $sql = 'INSERT INTO'.self::$table_name.'SET'.$this->attributes();
        $number_of_affected_rows = $connection->exec($sql);
        if($number_of_affected_rows >0)
        {
            $this->id = $connection->lastInsertId();
        }
        return ($number_of_affected_rows>0) ? $number_of_affected_rows : FALSE;
    }
}
$mohamed = new Topics();
$mohamed->title = 'Hello';
$mohamed->body = 'Hello world again';
return $mohamed->add();
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:47:11.900

什么不正确？无论如何，您的 SQL 都是错误的，因为它需要空格。

`'INSERT INTO '.self::$table_name.' SET '.$this->attributes();`

顺便说一句，您还应该在 SQL 中转义表和字段名称。

# c++ - 过滤卷积反射边界

> ID：13606492
> 
> 赞同：1
> 
> 时间：2012-11-28T13:43:45.433
> 
> 标签：c++, reflection, convolution, boundary

当我进行卷积时，我遇到了如何设置边界的大问题。我们得到了这部分代码，我已经实现了零填充，但现在我必须将像素值反映到边界。

```
bool ConvolutionFilter::Execute()
{
// First, create a valid output image.
// This fails, if no valid input image is available.
if( !CreateOutputImage() )
{
    return false;
}
// Check if convolution kernel is set.
if( m_Kernel == NULL )
{
    std::cout << "Error: No convolution kernel set!" << std::endl;
    return false;
}

/* Execute the convolution filter. */

/*
 * Hier sind schonmal ein paar Konstanten definiert, die Sie brauchen.
 * Kommentieren Sie den Code aus, wenn Sie diese benutzen.
 */

const int kernelHalfSizeX = m_Kernel->GetHalfSizeX();
const int kernelHalfSizeY = m_Kernel->GetHalfSizeY();
//const int kernelSizeX     = m_Kernel->GetSizeX();
const int imageSizeX = static_cast<int>(m_InputImage->GetSizeX());
const int imageSizeY = static_cast<int>(m_InputImage->GetSizeY());
int conv, value;
/*
 * TODO: Aufgabe 3: Implementieren Sie die Faltung des Eingabe-Bildes m_InputImage
 * mit der Filtermaske m_Kernel und schreiben sie das Ergebnis in das Ausgabe-Bild
 * m_OutputImage.
 * Die Faltung ist gegeben als:
 * f_out(x,y)=sum from{j=-hY} to{hY} sum from{i=-hX} to{hX} f(x+i,y+j) * g(i,j)
 *
 * Aufgabe 3b: Verwenden Sie dabei 0-Randbedingungen, d.h. wenn (x+i,y+j) ausserhalb des Bildbereiches
 * liegen, ist f(x+i,y+j) * g(i,j) = 0.
 *
 * Sie koennen mit m_Kernel->GetCoefficient(i,j) auf die Werte der Filtermaske zugreifen.
 * Lesen Sie die Kommentare in der Klasse ConvolutionKernel fÃ¼r Details!
 *
 * Beachten Sie, dass i und j auch negative Werte annehmen, und deshalb nicht unsigned sein
 * koennen. Evtl. muessen Sie (abhaengig vom Compiler) das Ergebnis von m_InputImage->GetSizeX()
 * bzw. m_InputImage->GetSizeY() zunaechst von unsigned int nach signed int konvertieren, um
 * Warnings bei einem Vergleich mit vorzeichenbehafteten Werten zu vermeiden, oder verwenden Sie
 * die oben definierten Konstanten imageSizeX, imageSizeY.
 */

/*
 * TODO: Aufgabe 3c: Veraendern Sie ihren Code aus Aufg 3b so, dass reflektierende Randbedingungen
 * verwendet werden (siehe Aufgabenblatt).
 * ACHTUNG: Kommentieren sie den Code aus Aufg 3b nur aus, und loeschen Sie diesen nicht!
 *
 */
for(int x = 0; x<=imageSizeX; x++)
{
    for(int y = 0; y<=imageSizeY; y++)
    {
        conv = 0;
        for(int j = -kernelHalfSizeY; j<=kernelHalfSizeY; j++)
        {
            for(int i = -kernelHalfSizeX; i<=kernelHalfSizeX; i++)
            {
                if(x+i>0 || x+i<imageSizeX || y+j>0 || y+j<imageSizeY) {
                 value = m_InputImage->GetPixel(x+i,y+j);
                }
                 else
                 {

                    value = m_InputImage->GetPixel();
                    //value = 0; //Zero-Padding
                 }
                    conv  += value*m_Kernel->GetCoefficient(i,j);
            }
        }
        printf("conv: %d\n", conv);
        m_OutputImage->SetPixel(x,y,conv);
    }
}

return true;
} 
```

那么我如何获得不同蒙版尺寸的像素值以将它们反映到图像的边界？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-28T13:55:20.497

```
int xi = x + i;

if ( xi < 0 ) xi = - xi;
else if ( xi > imageSizeX ) xi = imageSizeX - xi;

int yj = y + j;

... same ...

value = m_InputImage->GetPixel(xi,yj); 
```

我认为这不需要解释……</p>

# android - 不同设备的动态视图尺寸

> ID：13606499
> 
> 赞同：0
> 
> 时间：2012-11-28T13:44:03.420
> 
> 标签：android, views, android-view

> **可能重复：**
> [如何为多种屏幕分辨率编写应用程序？](https://stackoverflow.com/questions/7307009/how-to-write-app-for-multiple-screen-resolutions)

我的问题是假设应用程序必须为不同的设备动态呈现视图，例如

1.Frame 显示图像（例如 90 X 90 用于 mdpi 140 X 140 用于 hdpi）
2.ListView 高度（例如 120X 120 用于 mdpi 150 X 150 用于 hdpi）

就像我要根据设备大小设置很多东西一样

在各自的活动中实现这一点而不是硬编码值的标准方法是什么？
在加载应用程序之前，我想计算所有动态视图尺寸

提前致谢。任何示例代码都对我有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:48:41.953

`drawable-mdpi`在和中使用图像`drawable-hdpi`

对于不同的高度集使用尺寸`values`

```
res/values-mdpi/dimen.xml
res/values-hdpi/dimen.xml 
```

`dp, dip`会根据密度变化。

`px`在不同维度上使用

# xml - xml 上的每个 XSL 被转换为每个 parm

> ID：13606501
> 
> 赞同：0
> 
> 时间：2012-11-28T13:44:08.960
> 
> 标签：xml, xslt, xml-parsing, xslt-1.0, xslt-2.0

我有以下xml

```
 <root>
      <element id='1'>blah</element>
      <element id='2'>blah</element>
      <element id='3'>blah</element>
  </root> 
```

传递给我的 xsl 的参数是..

```
 <Ids>
      <id>1</id>
      <id>2</id>
      <id>3</id> 
  </Ids> 
```

在我的 xsl 中，我想遍历 parm 和 xml 以匹配具有等于 parm id 值之一的 id 属性的任何元素。这是动态的，我不知道它们的值将是 uuid。

我已经尝试过了，但我找不到元素 id

```
 <xsl:for-each  select="/$Ids/id">
 <xsl:variable name="driverId" select="."/>
     <xsl:for-each select="/root/element[@id=$driverId]">
          //do something
     </xsl:for-each>
   </xsl:for-each> 
```

如果在第一个 for each 之前将元素 id 的值发送出去，我可以看到所有值，但在循环中看不到。这是否可能以我正在考虑的方式进行。

仍然无法正常工作，我已将其更改为
相同的结果。

在 xsl 中，如果我将 for-each 放在 parm 之外

```
 <test><xsl:for-each select="/root/element/@id"></test> 
```

我明白了

```
 <test>1 2 3</test> 
```

如果放

```
 <test><xsl:for-each select="/root/element/@id"></test> 
```

里面

```
 <xsl:for-each  select="$Ids/id"> 
```

我什么都没退回？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:11:46.150

定义一个键

```
<xsl:key name="id" match="element" use="@id"/> 
```

`xsl:variable`那么您还需要使用全局ie来引用主输入文档

```
<xsl:variable name="main-root" select="/"/> 
```

一旦你有了那个用途

```
<xsl:for-each select="$Ids//id">
  <xsl:for-each select="key('id', ., $main-root)">...</xsl:for-each>
</xsl:for-each> 
```

没有钥匙，你需要

```
<xsl:for-each select="$Ids//id">
  <xsl:for-each select="$main-root/root/element[@id = current()]">...</xsl:for-each>
</xsl:for-each> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:00:50.667

> ```
> <xsl:for-each  select="/$Ids/id"> 
> ```

**显然不正确**：

`/$Ids`在语法上不合法——变量/参数引用不能立即跟随`/`运算符。

**正确的表达方式是**：

```
$Ids/id 
```

**而你真正想要的是**：

```
/root/element[@id=$Ids/id] 
```

# c++ - 从 CPP 代码调用 Objective-C 方法

> ID：13606507
> 
> 赞同：1
> 
> 时间：2012-11-28T13:44:19.477
> 
> 标签：c++, objective-c

我对 Objective-C 很陌生。
我想从单独的 .cpp 文件中定义的 C++ 类调用 Objective-C 方法。

我使用了`dreamlax`（不是 PIMPL 的） 在这个问题的答案中描述的相同机制`http://stackoverflow.com/questions/1061005/calling-objective-c-method-from-c-method`

但我被困在如何`int MyCPPClass::someMethod (void *objectiveCObject, void *aParameter);`使用参数从 CPP 类调用函数`objectiveCObject`。

也有人可以通过示例解释如何从 Objective-C 代码调用 C++ 类函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:48:51.033

您必须在执行调用的文件中使用 Objective-C++。要从 Xcode 执行此操作，请将文件从 重命名`Whatever.m`为`Whatever.mm`. 然后你可以混合通话。

# php - 通过 HTTPS 而不是 HTTP 连接

> ID：13606509
> 
> 赞同：0
> 
> 时间：2012-11-28T13:44:24.373
> 
> 标签：php, http, post, https, protocols

我想使用一个简单的 API，并且我想以安全的方式来做。它目前正在使用套接字和端口 80。据我所知，端口 80 是开放的，它似乎不是一个安全的连接。

由于要发送的数据包含用户名和密码，因此我想使用 HTTPS 而不是 HTTP 来确保其安全。

我想知道它是否像改变这条线那么简单；

```
$headers = "POST /api/api.php HTTP/1.0\r\n"; 
```

对于这另一行

```
$headers = "POST /api/api.php HTTPS/1.0\r\n"; 
```

并将端口更改为`443`

这是连接功能：

```
// api connect function
function api_connect($Username, $Password, $ParameterArray)
{
   // Create the URL to send the message.
   // The variables are set using the input from an HTML form

   $err = array();
   $url = "api.text-connect.co.uk";
   $headers = "POST /api/api.php HTTP/1.0\r\n";
   $headers .= "Host: ".$url."\r\n";

   // Create post string
   // Username and Password
   $poststring = "Username=".$Username."&";
   $poststring .= "Password=".$Password;

   // Turn the parameter array into the variables

   while (list($Key, $Value)=@each($ParameterArray))
   {
      $poststring .= "&".$Key."=".urlencode($Value);
   }

   // Finish off the headers
   $headers .= "Content-Length: ".strlen($poststring)."\r\n";
   $headers .= "Content-Type: application/x-www-form-urlencoded\r\n";

   // Open a socket
   $http = fsockopen ($url, 80, $err[0], $err[1]);
   if (!$http)
   {
      echo "Connection to ".$url.":80 failed: ".$err[0]." (".$err[1].")";
      exit();
   }

   // Socket was open successfully, post the data.
   fwrite ($http, $headers."\r\n".$poststring."\r\n");

   // Read the results from the post
   $result = "";
   while (!feof($http))
   {
      $result .= fread($http, 8192);
   }

   // Close the connection
   fclose ($http);

   // Strip the headers from the result
   list($resultheaders, $resultcode)=split("\r\n\r\n", $result, 2);

   return $resultcode;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:40:00.143

无论是使用 HTTP 还是 HTTPS，您的代码都存在大量问题 - 实现 HTTP 客户端（或服务器）比简单地通过套接字抛出一些标头然后接收响应要复杂得多。

这种方法特别糟糕的是它有时会起作用——然后它会失败，你不会明白为什么。

**使用 curl 重新开始**。

这样做你只需要更改 URL（它还实现了一个 cookie jar、支持标头注入、自动跟踪重定向、通过代理路由、验证或不验证 SSL 证书等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:55:31.277

> 我想知道它是否如此简单

不，不是。真的，真的不是。

HTTPS 是通过 SSL 建立的 HTTP 隧道。因此，您根本不会更改 HTTP 请求的内容。

不过，在执行 HTTP 操作之前，您确实需要执行所有 SSL 握手。

SSL 是加密的，因此很难。不要试图重新发明这个轮子。使用诸如[cURL](http://php.net/curl)之类的库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:12:02.243

[卷曲](http://www.php.net/manual/en/curl.examples-basic.php) 并设置`CURLOPT_SSL_VERIFYPEER = false`

# python - 如何从 ToscaWidgets2 中删除空白 - twc.forms SingleSelect

> ID：13606521
> 
> 赞同：0
> 
> 时间：2012-11-28T13:45:01.877
> 
> 标签：python, turbogears2, toscawidgets

我在 TurboGears 2 项目中使用 Tosca Widgets 2，

有谁知道如何在实例化 twf.SingleSelectField 时删除“prompt_text”属性？

```
year = twf.SingleSelectField(label="choose a year",options = range(now.year-35,now.year)) 
```

我在表单中得到的是一个带有值的选择元素，第一个选项是一个空选项。我想把它删除，但我不知道如何..

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:43:27.640

将`prompt_text`属性设置为`None`。它应该删除由 prompt_text 注入的默认条目。

# c# - C# 动态执行函数的名称？

> ID：13606522
> 
> 赞同：3
> 
> 时间：2012-11-28T13:45:02.663
> 
> 标签：c#, .net, dynamic, .net-4.0

我有一个动态变量

`dynamic d = GetSomeObject();`

有时，将来，用户向我发送一个函数来执行（它的`name`），例如`"UsersGetAll"`

所以我需要做类似的事情：`d.UsersGetAll()`

我可以通过反思来做到这一点。但我想使用 DLR 。

这样做的唯一解决方案是`MyObject` 继承`DynamicObject`然后实现`TryInvokeMember`吗？

如果我无法控制班级怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:58:13.263

> 我可以通过反思来做到这一点。但我想使用 DLR。

为什么？假设这是一个“正常”对象，实际上不会动态响应，反射将是这里最简单的方法。

`dynamic`C# 4 中的特性（就语言*特性*而言）在这里对您没有任何帮助。它只允许*在 C# 源代码*中动态绑定成员名称。

现在你*可以*：

*   启动 IronPython 会话，并创建一个小型 Python 脚本以使用动态绑定调用该方法。
*   用于使用相关方法名称[`CSharpCodeProvider`](http://msdn.microsoft.com/en-us/library/microsoft.csharp.csharpcodeprovider.aspx)编译一些 C# 代码，然后执行该代码。`dynamic`
*   查看为您的`d.UsersGetAll()`调用生成的代码，并基本上模拟它。

所有这些选项都可能比反射更难，如果你想要它，所以在“普通”对象上调用“普通”方法，而你碰巧只在执行时知道名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:58:38.773

正如 Jon 所指出的，以下内容仅在您怀疑该类型在运行*时*通过 DLR 提供方法时才适用；在大多数简单的情况下，反射会更容易。

`dynamic`当您知道方法名称但不知道目标时。如果您不知道方法名称，那就更麻烦了。棘手的一点可能是确保您保留调用站点以便可以重复使用它（这就是 DLR 保持性能的方式）。一种厚颜无耻的方法是使用静态实用程序类来跟踪调用的方法。这是一个示例 - 请注意，如果您需要处理参数，它会变得**更加混乱：**

```
using Microsoft.CSharp.RuntimeBinder;
using System;
using System.Collections;
using System.Runtime.CompilerServices;
public class Foo
{
    public object Bar() { return "I was here"; }
}
static class Program
{
    static void Main()
    {
        object obj = new Foo();
        object result = DynamicCallWrapper.Invoke(obj, "Bar");
        Console.WriteLine(result);
    }
}

static class DynamicCallWrapper
{
    // Hashtable has nice threading semantics
    private static readonly Hashtable cache = new Hashtable();
    public static object Invoke(object target, string methodName)
    {
        object found = cache[methodName];
        if (found == null)
        {
            lock (cache)
            {
                found = cache[methodName];
                if(found == null)
                {
                    cache[methodName] = found = CreateCallSite(methodName);
                }
            }
        }
        var callsite = (CallSite<Func<CallSite, object,object>>)found;
        return callsite.Target(callsite, target);
    }
    static object CreateCallSite(string methodName)
    {
        return CallSite<Func<CallSite, object, object>>.Create(
            Binder.InvokeMember(
            CSharpBinderFlags.None, methodName, null, typeof(object),
            new CSharpArgumentInfo[] {
                CSharpArgumentInfo.Create(
                     CSharpArgumentInfoFlags.None, null) }));

    }
} 
```

# c# - 使用多个 http 请求集检索部分内容以通过并行任务获取数据

> ID：13606523
> 
> 赞同：2
> 
> 时间：2012-11-28T13:45:03.873
> 
> 标签：c#, .net-4.0, task-parallel-library, http-request, data-partitioning

我试图在这篇文章中尽可能彻底，因为这对我来说非常重要，

虽然这个问题很简单，只有阅读这个问题的标题，你才能明白......

**问题是：**

提供健康的带宽（30mb Vdsl）...

**`httpWebRequest`如何为单个数据/文件获取多个？**,

因此，每个请求将**仅下载一部分数据，** 然后当所有实例完成后，所有部分都将重新合并为一个部分。

**代码：**

...到目前为止我所做的工作是相同的想法，只有每个任务 =HttpWebRequest = 不同的文件，

所以加速是纯粹的任务并行性，而不是使用多个任务/线程加速一次下载

就像我的问题一样。

**见下面的代码**

下一部分只是对该主题的更详细的解释和背景……如果您不介意阅读的话。

虽然我仍然在一个与这个（有问题的）不同的类似项目中，

它（参见下面的代码..）试图为每个单独的任务（不同的下载/文件）获取尽可能多的**不同数据源。**...因此，在每个（任务）不必等待前一个完成之前，它就有机会被执行，从而获得了加速。

我在这个当前主题的问题中想要做的（在下面的代码中准备好所有东西）实际上是 **针对相同数据的相同 url**，所以这次获得的加速是针对单任务当前下载。

实现与下面的代码相同的想法，只是这次让使用多个实例来`SmartWebClient`定位**相同的 url 。**

**然后**（目前只是理论）它将请求数据的部分内容，每个实例都有多个请求。

最后一个问题是我需要“让谜题回归平静”......我需要了解的另一个问题......

正如您在这段代码中看到的那样，我还没有开始工作的只是我发现使用起来非常容易的数据解析/处理，`htmlAgilityPack`所以没问题。

# 当前代码

主要条目：

```
 var htmlDictionary = urlsForExtraction.urlsConcrDict();
        Parallel.ForEach(
                        urlList.Values,
                        new ParallelOptions { MaxDegreeOfParallelism = 20 },
                        url => Download(url, htmlDictionary)
                        );
        foreach (var pair in htmlDictionary)
        {
            ///Process(pair);
            MessageBox.Show(pair.Value);
        }

public class urlsForExtraction
{
        const string URL_Dollar= "";
        const string URL_UpdateUsersTimeOut="";

        public ConcurrentDictionary<string, string> urlsConcrDict()
        {
            //need to find the syntax to extract fileds names so it would be possible to iterate on each instead of specying
            ConcurrentDictionary<string, string> retDict = new Dictionary<string,string>();
            retDict.TryAdd("URL_Dollar", "Any.Url.com");
            retDict.TryAdd("URL_UpdateUserstbl", "http://bing.com");
            return retDict;
        }

}

/// <summary>
/// second Stage Class consumes the Dictionary of urls for extraction
/// then downloads Each via parallel for each using The Smart WeBClient! (download(); )
/// </summary>
public class InitConcurentHtmDictExtrct
{

    private void Download(string url, ConcurrentDictionary<string, string> htmlDictionary)
    {

        using (var webClient = new SmartWebClient())
        {
            webClient.Encoding = Encoding.GetEncoding("UTF-8");
            webClient.Proxy = null;
            htmlDictionary.TryAdd(url, webClient.DownloadString(url));
        }
    }

    private ConcurrentDictionary<string, string> htmlDictionary;
    public ConcurrentDictionary<string, string> LoopOnUrlsVia_SmartWC(Dictionary<string, string> urlList)
    {

        htmlDictionary = new ConcurrentDictionary<string, string>();
        Parallel.ForEach(
                        urlList.Values,
                        new ParallelOptions { MaxDegreeOfParallelism = 20 },
                        url => Download(url, htmlDictionary)
                        );
        return htmlDictionary;

    }
}
/// <summary>
/// the Extraction Process, done via "HtmlAgility pack" 
/// easy usage to collect information within a given html Documnet via referencing elements attributes
/// </summary>
public class Results
{
    public struct ExtracionParameters
    {
        public string FileNameToSave;
        public string directoryPath;
        public string htmlElementType;

    }
    public enum Extraction
    {
        ById, ByClassName, ByElementName
    }
    public void ExtractHtmlDict( ConcurrentDictionary<string, string> htmlResults, Extract By)
    {
        // helps with easy  elements extraction from the page.
        HtmlAttribute htAgPcAttrbs;
        HtmlDocument HtmlAgPCDoc = new HtmlDocument();
        /// will hold a name+content of each documnet-part that was aventually extracted 
        /// then from this container the build of the result page will be possible
        Dictionary<string, HtmlDocument> dictResults = new Dictionary<string, HtmlDocument>();

        foreach (KeyValuePair<string, string> htmlPair in htmlResults)
        {
            Process(htmlPair);
        }
    }
    private static void Process(KeyValuePair<string, string> pair)
    {
        // do the html processing
    }

}
public class SmartWebClient : WebClient
{

    private readonly int maxConcurentConnectionCount;

    public SmartWebClient(int maxConcurentConnectionCount = 20)
    {
        this.Proxy = null;
        this.Encoding = Encoding.GetEncoding("UTF-8");
        this.maxConcurentConnectionCount = maxConcurentConnectionCount;
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var httpWebRequest = (HttpWebRequest)base.GetWebRequest(address);
        if (httpWebRequest == null)
        {
            return null;
        }

        if (maxConcurentConnectionCount != 0)
        {
            httpWebRequest.ServicePoint.ConnectionLimit = maxConcurentConnectionCount;
        }

        return httpWebRequest;
    }

}
} 
```

这使我可以利用良好的带宽，只有我离解决方案还很远，我会真正了解从哪里开始的任何线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:35:08.897

# facebook - 如何通过 Graph Api 获得 Facebook Places 的人气（喜欢或签到）？

> ID：13606536
> 
> 赞同：0
> 
> 时间：2012-11-28T13:45:29.240
> 
> 标签：facebook, facebook-graph-api

是否有可能（如果可以的话）获得特定区域的 Facebook Places 的点赞数（首选）或签到数？

我想使用该信息来填充特定城市的填充景点和餐馆的数据库。

提供此类信息的任何其他来源（转储是 api's ）都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:18:03.633

据我所知，这将需要多次调用。如果您对它发疯，您可能会受到速率限制，但这是我看到的解决方案：

1）获取相关地点：

```
 https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000 
```

2）循环遍历这些地方，每次再次调用api

```
https://graph.facebook.com/PLACE_ID 
```

检索此类数据：

```
 "checkins": 1320,
   "were_here_count": 2671,
   "talking_about_count": 21,
   "likes": 1120, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T16:24:36.253

您可以通过在同一请求中向 Facebook 发送批量调用来优化您的请求，请查看此[链接](https://developers.facebook.com/docs/graph-api/making-multiple-requests)

# linux - 麦克风输入的当前电平

> ID：13606537
> 
> 赞同：6
> 
> 时间：2012-11-28T13:45:35.323
> 
> 标签：linux, shell, audio, alsa

如何在 Ubuntu 12.04 LTS 下通过 shell 命令获取麦克风的当前音频输入电平？

我检查了 amixer 以设置音量，但在 shell 调用时找不到获取音频输入电平的方法。

先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T14:35:56.230

要获得输入信号的电平，您必须从输入设备实际记录。使用`-d 1`参数 for`arecord`获取一个短文件。

要读取该文件中的数据级别，请使用类似`sox recordedfile.wav -n stat`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-08T22:13:13.117

根据上面的答案，得到最大幅度：

```
arecord -qd 1 volt && sox volt -n stat &> volt.d && sed '4q;d' volt.d 
```

# c++ - cryptoapi 和 openssl

> ID：13606543
> 
> 赞同：3
> 
> 时间：2012-11-28T13:46:09.710
> 
> 标签：c++, cryptography, openssl, cryptoapi, pkcs#7

我正在尝试使用带有一些 X.509 证书的 cryptoapi 加密和签名文件。我想用 openssl 验证和解密这个文件。

在 Windows 上，我认为我需要使用该`CryptSignAndEncryptMessage`功能来加密和签署数据。我使用[MSDN 中的这个示例](http://msdn.microsoft.com/en-us/library/aa382367%28v=vs.85%29.aspx)来创建签名和加密的消息。

如何使用 openssl 解密/验证此文件？我从消息中删除了前 4 个字节，因为它包含消息的长度（来自 windows blob）。当我打电话时，`openssl -asn1parse`我得到[一些输出](http://pastebin.com/wiF507bM)，表明它可以被 openssl 解析。

当尝试使用 openssl 验证签名时，我收到一个错误：

```
openssl rsautl -verify -inkey AlonsoCert.pem -keyform pem -certin -in sandvout-without-4byte.txt
RSA operation error
3073579208:error:0406706C:rsa routines:RSA_EAY_PUBLIC_DECRYPT:data greater than mod len:rsa_eay.c:680: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T19:16:41.097

CryptSignAndEncrypt 消息似乎使用带有空 ASN.1 参数字段的 RC4 密码，并且查看 OpenSSL 源，openssl 在尝试生成 IV 时阻塞（RC4 不需要）。

尝试在 CryptAndSignMessage 中使用其他密码（例如 AES）。无论如何，RC4 非常陈旧、不安全且已过时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T19:31:11.547

尝试使用`openssl smime`来验证和/或解密。语法相当简单，但您可以在此处找到信息：[http ://www.openssl.org/docs/apps/smime.html](http://www.openssl.org/docs/apps/smime.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:04:07.017

您的[ASN.1 转储信息](http://pastebin.com/wiF507bM)显示您已从 CryptoAPI 代码创建了 PKCS#7 CMS 输出。因此，您无法使用基本的 OpenSSL 解密和验证方法。

相反，请使用以下[**`cms`**](http://www.openssl.org/docs/apps/cms.html)模式：

```
openssl cms -decrypt -inform DER -in sandvout-without-4byte.txt 
    -out decrypted.bin -recip testkey.pfx 
```

（注意：我以前没有使用过这种模式，所以我*认为*我建议的语法是正确的。无论哪种方式，这应该是朝着解决这个问题的正确方向迈出的一步。）

# kendo-ui - 查找 TabStrip 索引

> ID：13606544
> 
> 赞同：11
> 
> 时间：2012-11-28T13:46:16.970
> 
> 标签：kendo-ui

是否可以在 KendoUI TabStrip 中找到选项卡的索引？我需要找到我选择的选项卡的索引（编号），我知道这会`select()`返回当前选项卡，但我不知道如何将其转换为数字。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-28T13:53:58.543

找到了解决方案：

```
$("#tabstrip").data("kendoTabStrip").select().index(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-03T06:14:53.270

```
 function select(e) {
        var x = e.item;
        var index= $(e.item).index();
        $(".tabindex").val(index);
    } 
```

正如 nemesv 在[https://stackoverflow.com/a/15646629/2127493中所说](https://stackoverflow.com/a/15646629/2127493)

# sql - 如何在 Group By 子句中使用聚合函数

> ID：13606546
> 
> 赞同：0
> 
> 时间：2012-11-28T13:46:17.967
> 
> 标签：sql

如何在这样的 GROUP BY 子句中使用聚合函数？

```
SELECT VCH_DCOA_CODE, SUM(VCH_DEFINATION.VCH_CREDIT) AS Debit
FROM  VCH_DEFINATION 
GROUP BY SUBSTRING(VCH_DCOA_CODE, 0, 6) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T13:52:11.770

看起来你想显示`sum()`完整`VCH_DCOA_CODE`但`group by`子字符串值，所以我猜你想要这个：

```
SELECT v1.VCH_DCOA_CODE, v2.Debit
FROM VCH_DEFINATION v1
INNER JOIN
(
    select SUM(VCH_DEFINATION.VCH_CREDIT) AS Debit, SUBSTRING(VCH_DCOA_CODE, 0, 6) Shortcode
    from VCH_DEFINATION
    group by SUBSTRING(VCH_DCOA_CODE, 0, 6)
) v2
    on v1.SUBSTRING(VCH_DCOA_CODE, 0, 6) = v2.Shortcode 
```

子查询将获得`SUM()`for each`SUBSTRING(VCH_DCOA_CODE, 0, 6)`但随后将显示每个完整的`VCH_DCOA_CODE`

但是，如果您不想显示完整的`VCH_DCOA_CODE`，那么您可以使用内部查询来获取结果：

```
 select SUM(VCH_DEFINATION.VCH_CREDIT) AS Debit, SUBSTRING(VCH_DCOA_CODE, 0, 6) Shortcode
 from VCH_DEFINATION
 group by SUBSTRING(VCH_DCOA_CODE, 0, 6) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:50:28.453

您必须添加`SUBSTRING(VCH_DCOA_CODE, 0, 6)`如下`select`条款：

```
SELECT SUBSTRING(VCH_DCOA_CODE, 0, 6), SUM(VCH_DEFINATION.VCH_CREDIT) AS Debit
FROM  VCH_DEFINATION 
GROUP BY SUBSTRING(VCH_DCOA_CODE, 0, 6) 
```

# c# - 是否有一个永远不会匹配任何字符串的正则表达式？

> ID：13606550
> 
> 赞同：2
> 
> 时间：2012-11-28T13:46:36.737
> 
> 标签：c#, .net, regex

一个两部分的问题：

1.  是否有任何理论上的正则表达式永远不会匹配任何字符串（使用通用语法而没有现代正则表达式匹配器提供的任何花哨的东西）？
2.  有没有一种简单的方法可以使用 C# 的 Regex 语法来创建一个永远不会匹配任何字符串的正则表达式（这一次，所有花哨的东西*都*包括在内）？

注意：我**不是**指匹配空字符串（这很容易，只是`""`）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T13:53:46.660

如果没有多行模式，结尾通常不会出现在开头之前：

```
$.^ 
```

或者更简单地说，再次没有多行模式：

```
$. 
```

使用环视，你可以做各种矛盾的事情：

```
(?=a)(?=b) 
```

这迫使一个角色同时成为两种不同的事物，这当然是不可能的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-28T13:50:41.580

例如，您可以使用相互矛盾的lookbehinds

```
\w(?<!\w) 
```

这里`\w`将匹配任何单词字符，并且lookbehind`(?<!\w)`将确保最后一个字符不是单词。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-28T13:52:11.227

就像你可以匹配任何字符一样`[\s\S]`，你不能匹配任何字符`[^\s\S]`（或`[^\w\W]`等）。

# linker-errors - xcode 4.4.1 x86_64 链接器 + Intel XE 12.1 错误？

> ID：13606551
> 
> 赞同：1
> 
> 时间：2012-11-28T13:46:38.140
> 
> 标签：linker-errors, x86-64, xcode4.4

我在 xcode 4.4.1 & x86_64 和 Intel 编译器 XE 12.1 中的链接器存在问题。

链接时出现此错误：

```
0  0x1010cb280  __assert_rtn + 144
1  0x1010e7ad4  mach_o::relocatable::Parser<x86_64>::parse(mach_o::relocatable::ParserOptions const&) + 3444
2  0x1010d43c2  mach_o::relocatable::Parser<x86_64>::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 290
3  0x1010d09db  mach_o::relocatable::parse(unsigned char const*, unsigned long long, char const*, long, ld::File::Ordinal, mach_o::relocatable::ParserOptions const&) + 91
4  0x10110b7b5  ld::tool::InputFiles::makeFile(Options::FileInfo const&, bool) + 565
5  0x10110d217  ld::tool::InputFiles::parseWorkerThread() + 263
6  0x7fff8719d742  _pthread_start + 327
A linker snapshot was created at:
/tmp/TemplatePlugin-2012-10-28-141503.ld-snapshot
ld: Assertion failed: (cfiStartsArray[i] != cfiStartsArray[i-1]), function parse, file /SourceCache/ld64/ld64-133.3/src/ld/parsers/macho_relocatable_file.cpp, line 1549. 
```

一切都适用于 I386 架构。

任何人都可以帮忙吗？

# fastcgi - mod_fastcgi 到 mod_fcgid

> ID：13606553
> 
> 赞同：0
> 
> 时间：2012-11-28T13:46:43.157
> 
> 标签：fastcgi, mod-fcgid, mod-fastcgi

我有一个服务器作为带有 mod_fastcgi 的 fastcgi 应用程序运行。

```
FastCgiServer /opt/rok4/bin/rok4 -init-start-delay 5 -port 1998 -processes 2 
```

mod_fastcgi 在启动时启动服务器实例并提供端口号的想法。

如何使用“新” mod_fcgid 复制此行为？

提前感谢

马努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T17:00:14.340

你不能，`fgdid`不支持 TCP 套接字。见[http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=450748](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=450748)

# mongodb - 如何在 MongoDB 中执行关键字查询

> ID：13606555
> 
> 赞同：6
> 
> 时间：2012-11-28T13:46:40.480
> 
> 标签：mongodb, nosql

在这里，我有一个书集：

```
 Book Id：001
 Book Name：C# step by step
 Book Description：Programming book on C#

 Book Id：002
 Book Name：Head First Java
 Book Description：Programming Book on Java

 Book Id：003
 Book Name：Steve Jobs
 Book Description：biography of Jobs 
```

我的问题是如何在书籍描述中搜索所有带有“编程”一词的书籍？

我是 NoSQL 的新手，目前我只能使用 find() 来执行精确搜索，而不是关键字搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T13:55:44.677

该文档有一章关于[Mongo 中的全文搜索](http://www.mongodb.org/display/DOCS/Full+Text+Search+in+Mongo)，建议将每个字符串拆分为单个单词的数组，以便您可以对其进行索引以便更快地查找。

```
{   Id：001,
    Name："C# step by step",
    Description："Programming book on C#",
    Description_tags: [
        "Programming",
        "book",
        "on",
        "C#"]
}

db.books.ensureIndex({Description_tags:1});

db.books.find(Description_tags:"Programming"); 
```

当速度不是问题并且您想避免更改数据结构时，您还可以使用[正则表达式](http://docs.mongodb.org/manual/reference/operator/regex/)。但请记住，这扩展性很差：查找时间将与集合中的条目数成线性关系。

```
db.collection.find( {description: { $regex: "Programming"} } ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:48:57.217

您可以在 a 的查询选择器中使用正则表达式`find`来执行此操作：

```
db.books.find({description: /Programming/}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-30T16:42:37.480

在 mongoDB 中有很多使用关键字查找的方法，其中我喜欢[Text-Search](https://docs.mongodb.com/manual/text-search/)。

1.  `Book Name`为和创建索引`Book Description`

    您需要为`Book Name`ex创建索引`Book Description``Text``db.books.createIndex( { BookName: "text", BookDescription: "text" } )`

2.  现在只需通过以下方式查询您的文档`db.books.find( { $text: { $search: "Programming" } } )`

它可能会帮助您找到所有相关文档，其中包含来自`Book Name`和的编程关键字`Book Description`。

# c# - 并非所有代码路径都返回一个值 - 在哪里？

> ID：13606556
> 
> 赞同：0
> 
> 时间：2012-11-28T13:46:43.850
> 
> 标签：c#

我有以下 C# 代码。由于我不会深入讨论的原因，这是本地化所需的方式。

我的问题是，我一生都无法弄清楚什么路径没有返回值。以下代码中没有其他错误：

```
ResourceManager ResMain = new ResourceManager("TorrentSched.Main", typeof(Main).Assembly);
/// <summary>Returns a localised string based on the Current UI Culture</summary>
public string Str(string Name)
{
    Boolean StringNotFound = false;
    switch(Thread.CurrentThread.CurrentUICulture.ToString())
    {
        case "en-GB":
            switch(Name)
            {
                case "MinimizeToTray": return "Closing the program minimises it to the tray. To fully quit the program, right-click the icon in your tray and choose Exit.";
                default: StringNotFound = true; break;
            }
        break;
        default:
            StringNotFound = true;
        break;
    }

    if(StringNotFound)
    {
        StringNotFound = false;
        switch(Name)
        {
            case "AppName":         return ResMain.GetString("$this.Text");
            case "MinimizeToTray":  return "Closing the program minimizes it to the tray. To fully quit the program, right-click the icon in your tray and choose Exit.";
            case "ReallyExit1":     return "Do you really want to exit?";
            case "ReallyExit2":     return "Torrents will not be checked and downloaded until you launch the program again!";
            default:                return "String not found!";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T13:54:49.353

if 块的目的是什么？据我所知，如果执行开关下面的代码，`StringNotFound`将始终`true`如此，因此不需要 if 块，但它很可能会混淆代码分析。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T13:48:05.763

如果 StringNotFound 为 false，则不返回任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T13:48:13.910

在你的方法的最后，如果`StringNotFound`是假的：

```
if(StringNotFound)
{
   [...]
}

// missing return statement here 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-30T10:57:42.263

也许您可以重构它，以便在代码底部有一个 SINGLE return 语句。你所有的决策代码只是简单地“设置”返回值。

然后在你的 switch(Name) 块中设置你想要返回的值 - 然后打破开关（而不是有一大堆返回）。IMO，这将使代码更整洁。另外，我认为它会更容易维护。

IE。

```
switch(Name)
        {
            case "AppName":         retString = ResMain.GetString("$this.Text");
            case "MinimizeToTray":  retString = "Closing the program minimizes it to the tray. To fully quit the program, right-click the icon in your tray and choose Exit.";
            case "ReallyExit1":     retString = "Do you really want to exit?";
            case "ReallyExit2":     retString = "Torrents will not be checked and downloaded until you launch the program again!";
            default:                retString = "String not found!";
        }

...

return retString; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T13:50:17.043

为了防止这样的错误或谜题，你最好不要同时做这两个（如下），因为当你：

*   维护一个`retVal`变量，连同
*   `return`该语句的多种用途。

选择一种解决方案：

*   只返回一个`retVal`变量，或者
*   在函数底部返回一个默认值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-28T14:08:37.390

考虑使用字典

```
private static Dictionary<string,string> stringDict = new Dictionary<string,string>(); 
```

添加字符串

```
// Add default strings
stringDict.Add("AppName", ResMain.GetString("$this.Text"));
stringDict.Add("MinimizeToTray", "Closing the program ...");
stringDict.Add("ReallyExit1", "Do you really ...");

// Add culture specific strings
stringDict.Add("en-GB;AppName", ResMain.GetString("$this.Text"));
stringDict.Add("en-GB;MinimizeToTray", "Closing the program ...");
stringDict.Add("en-GB;ReallyExit1", "Do you really ..."); 
```

你可以很快得到字符串

```
// Get culture specific string
string culture = Thread.CurrentThread.CurrentUICulture.ToString();
string s;
If (stringDict.TryGetValue(culture + ";" + Name, out s)) {
    return s;
}                          

// Get default
If (stringDict.TryGetValue(Name, out s)) {
    return s;
}

return String.Format("String '{0}' not found!", Name); 
```

这更容易维护。

（正如其他人已经指出的那样，在您的方法的最后缺少一个返回语句，并且布尔变量是多余的。）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-28T13:53:26.077

如果（字符串未找到）

如果这是错误的，则没有其他声明可以抓住它。

采用

> if(StringNotFound)
> {
> //你的代码
> }
> Else
> {
> return "String not found!";
> }

# android - 如何搜索android布局视图（组件）的必填字段？

> ID：13606560
> 
> 赞同：2
> 
> 时间：2012-11-28T13:46:52.657
> 
> 标签：android, android-layout

我是 android 新手，并且遇到了某些字段（布局视图中的组件）属性的重复错误丢失。我添加了该组件，这很好。我有一个问题，该组件的必填字段是哪些？就像在 HTML 标签中一样，考虑一个 Anchor 标签。“href”是强制性的。在其他一些标签中，“id”是强制性的。就像这里一样。有什么方法可以获取哪个组件 - 哪些属性是强制性的？

我正在搜索 android 文档... [http://developer.android.com/reference/android/widget/TextView.html](http://developer.android.com/reference/android/widget/TextView.html)

但无法弄清楚。希望这里的一些评论有帮助。

谢谢。

# delphi - 更改特定复选框项目的字体或颜色？

> ID：13606562
> 
> 赞同：5
> 
> 时间：2012-11-28T13:47:05.367
> 
> 标签：delphi

我正在使用德尔福 XE-3。我希望更改为复选框中单个项目的颜色或字体。这可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-28T14:50:47.170

您将需要为您的检查列表框使用所有者图纸。将[`Style`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TCustomListBox.Style)检查列表框的属性设置为`lbOwnerDrawFixed`并编写[`OnDrawItem`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.StdCtrls.TCustomListBox.OnDrawItem)事件的处理程序。在此事件处理程序中，您可以使用如下内容：

```
procedure TForm1.CheckListBox1DrawItem(Control: TWinControl; Index: Integer;
  Rect: TRect; State: TOwnerDrawState);
var
  Flags: Longint;
begin
  with (Control as TCheckListBox) do
  begin
    // modifying the Canvas.Brush.Color here will adjust the item color
    case Index of
      0: Canvas.Brush.Color := $00F9F9F9;
      1: Canvas.Brush.Color := $00EFEFEF;
      2: Canvas.Brush.Color := $00E5E5E5;
    end;
    Canvas.FillRect(Rect);
    // modifying the Canvas.Font.Color here will adjust the item font color
    case Index of
      0: Canvas.Font.Color := clRed;
      1: Canvas.Font.Color := clGreen;
      2: Canvas.Font.Color := clBlue;
    end;
    Flags := DrawTextBiDiModeFlags(DT_SINGLELINE or DT_VCENTER or DT_NOPREFIX);
    if not UseRightToLeftAlignment then
      Inc(Rect.Left, 2)
    else
      Dec(Rect.Right, 2);
    DrawText(Canvas.Handle, Items[Index], Length(Items[Index]), Rect, Flags);
  end;
end; 
```

这是上面示例的结果：

![在此处输入图像描述](../Images/fac94d51e2cac9bbdc6ae71fefc5fa5f.png)

# drupal - Drupal 商务愿望清单匿名

> ID：13606564
> 
> 赞同：4
> 
> 时间：2012-11-28T13:47:10.137
> 
> 标签：drupal, drupal-7, commerce

我正在开设一个 Commerce 网上商店。

我想添加 Commerce 愿望清单，但现在该模块仅适用于注册用户，因为未注册它不起作用。

我将显示块中的角色设置为匿名，但即使在更改此设置后，我也会收到消息，我必须登录才能将某些内容添加到愿望清单。

有人可以告诉我如何更改它以供匿名用户使用吗？我正在使用 Drupal 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-02T13:21:20.753

commerce_wishlist 模块的维护者刚刚发布了[2.x-dev](https://www.drupal.org/node/2560545)现在也支持公共愿望清单。此外，将支持列表的社交共享。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T12:52:59.487

通过使用[Flag](https://www.drupal.org/project/flag)模块而不是[Commerce Wishlist](https://ww.drupal.org/project/commerce_wishlist)模块，您可以利用它的功能来**向匿名用户显示一个标志**。为此，请参阅[Flag](https://www.drupal.org/project/flag)模块的社区文档中所写的内容，即：

> 匿名用户的标记（即使启用了页面缓存）需要[Session API](https://www.drupal.org/project/session_api)。

[README.txt](http://cgit.drupalcode.org/flag/tree/README.txt#n63)中的类似内容：

> 可选安装
> 
> 1) 匿名用户标记内容的能力由 Session API 模块提供，可在[http://drupal.org/project/session_api 获得](http://drupal.org/project/session_api)。

但是请注意，在 Flag 模块中也没有将[Session API](https://www.drupal.org/project/session_api)作为[依赖项](http://cgit.drupalcode.org/flag/tree/flag.info)提及。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T03:13:56.097

您可以使用[Flag](http://drupal.org/project/flag)而不是[Commerce Wishlist](http://drupal.org/project/commerce_wishlist)，它的作用相同且更灵活。这也适用于匿名用户，并已准备好在块/页面中显示的视图。

# php - 同时在单行中返回值

> ID：13606572
> 
> 赞同：0
> 
> 时间：2012-11-28T13:47:26.907
> 
> 标签：php, ajax

我正在使用ajax并通过以下方法返回值

```
$query = mysql_query("SELECT DISTINCT * FROM symptom WHERE symptom LIKE '%$key%'")or die('couldnt select');
while(($row = mysql_fetch_array($query))!=false){

    echo $row['disease'];

} 
```

但是在 ajax 函数中收到的结果显示了类似的结果

```
streppneumonia 
```

代替

```
strep
pneumonia 
```

我在做什么错？我只是无法解决这里的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:48:21.263

快速解决：`echo $row['disease'].'<br />';`

虽然实际上您的 Web 服务应该以更好的格式（如 JSON）返回数据，但您应该从那里使用 javascript 来分解数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:48:23.060

尝试

```
echo $row['disease'].'<br />'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T13:58:15.070

```
$query = mysql_query("SELECT DISTINCT * FROM symptom WHERE symptom LIKE '%$key%'")or die('couldnt select');
$str = '';
while(($row = mysql_fetch_array($query))!=false){

    $str .= $row['disease']. "<br>";

} 

echo $str; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T13:59:37.383

使用ajax并返回多个值时，以[json](http://www.json.org/)格式发送。尽管您可以在客户端使用 break 标记进行中断，但您无法区分多个值：

```
<?php
$query = mysql_query("SELECT DISTINCT * FROM symptom WHERE symptom LIKE '%$key%'")or die('couldnt select');
while(($row = mysql_fetch_array($query))!=false){

    $diseases[] =  $row['disease'];

} 

echo json_encode($diseases);

?> 
```

后来在客户端通过js解码

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T14:35:08.083

尝试

```
while(($row = mysql_fetch_array($query))){

    echo $row['disease'].'<br>';

} 
```

**笔记**

`mysql_*`功能已弃用，请使用`PDO`或`MySQLi`

# javascript - 使用 jQuery 提交后禁用按钮

> ID：13606573
> 
> 赞同：51
> 
> 时间：2012-11-28T13:47:36.163
> 
> 标签：javascript, jquery, django

我知道有很多关于它的问题，但我尝试了几种解决方案，但没有任何效果。

在我的 django 应用程序中，我有一个表单：

```
<form method='post'>
    <button type='submit'>Send</button>
</form> 
```

用户提交表单后，我不想禁用该按钮。使用其他问题，我尝试了几件事，例如：

```
<button type='submit' onclick="this.disabled=true">Send</button> 
```

当我单击时，该按钮被禁用......但未提交表单。对于每次尝试，我都有同样的问题：按钮被禁用或表单已提交。我找不到如何做到这两个...

我正在使用 Chrome。知道为什么我有这个问题吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2012-11-28T13:50:20.820

尝试这个：

```
$('form').submit(function() {
  $(this).find("button[type='submit']").prop('disabled',true);
}); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-04-25T16:20:47.987

我喜欢这样，不必遍历 DOM。将函数放在 setTimeout 函数上，这允许提交和禁用按钮后，即使 setTimeout 为 0

```
$(document).ready(function () {
$("#btnSubmit").click(function () {
    setTimeout(function () { disableButton(); }, 0);
});

function disableButton() {
    $("#btnSubmit").prop('disabled', true);
}
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-28T13:52:28.027

`submit`您可以在父表单的事件中禁用它：

```
$("form").on("submit", function () {
    $(this).find(":submit").prop("disabled", true);
}); 
```

确保仅在`HTMLFormElement`加载后才运行此代码，否则将不会绑定任何内容。为确保绑定发生，请从`document-ready`块内触发：

```
// When the document is ready, call setup
$(document).ready(setup);

function setup () {
    $("form").on("submit", function () {
        $(this).find(":submit").prop("disabled", true);
    });
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-11-28T13:53:38.917

这样的事情可能会奏效。

```
<button id="btnSubmit" type='submit'> Send </button>

<script>
     $("#btnSubmit").on("click", function(e){
          e.PreventDefault();
          $(this).closest("form")[0].submit();
          $(this).prop('disabled',true)
     });
</script> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-11-28T13:52:25.360

试试这样

```
 <input type="submit" value="Send" onclick="javascript=this.disabled = true; form.submit();"> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-15T18:24:12.220

我的变体，禁用按钮，没有直接禁用，但只有可见隐藏：

```
<input type="submit" name="namebutton" value="Nahrát obrázek"  onclick="this.style.visibility='hidden';" ondblclick="this.style.visibility='hidden';"/> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-05-02T06:40:39.370

你可以做这样的事情。这对我来说很好。

```
<form method='post' onSubmit='disableFunction()'>
// your code here
</form> 
```

然后在脚本中，添加这个

```
<script>
function disableFunction() {
    $('#btn_submit').prop('disabled', true);
}
</script> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-28T13:55:48.957

这个怎么样？

```
onclick="this.style.visibility='hidden';" 
```

我会说，而不是禁用，隐藏它。

如果你想和`disabled`

```
onclick="this.style.disabled='true';" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-11T16:37:09.880

在 Chrome 上遇到问题，没有提交表单。尝试了一堆不同的代码，这对我来说最有效（并且看起来最好的 imo）：

```
 $('#form_id').submit(function() {
    $("input[type='submit']", this)
      .val("Please Wait...")
      .attr('disabled', 'disabled');
    return true;
  }); 
```

将**form_id**替换为表单的 id。当然，课程也有效：`$('.form_class')`

来源：[JavaScript 编码器](http://www.javascript-coder.com/jsform/jquery-disable-button-on-click-submit.phtml)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-07-27T14:49:13.840

这最终成为我的最佳解决方案

```
$("form").submit(function disableSubmit() {
  $("input[type=submit]", this).prop("disabled", true);
}); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-17T15:33:31.547

我更喜欢这个：

```
<script>
    var submit = false;
    $('form').submit(function () {
        if (submit) { return false; }
        else { submit = true;}
    });
</script> 
```

这样它还可以防止 Enter 键多次提交

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-08-01T07:24:35.790

如果您不想双击某个元素，请使用 .one()

```
<button id="submit" type="submit">Send</button>
<script>
$(function () {
$("#submit").one("click", function () {
//enter your submit code
 });
}); 
```

[。一（）](http://api.jquery.com/one/)

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-01T16:20:30.797

您必须防止表单被多次提交，禁用按钮不是正确的解决方案，因为表单可以通过其他方式提交。

JavaScript：

```
$('form').submit(function(e) {
    // if the form is disabled don't allow submit
    if ($(this).hasClass('disabled')) {
        e.preventDefault();
        return;
    }
    $(this).addClass('disabled');
}); 
```

正确禁用表单后，您可以自定义其外观。

CSS：

```
form.disabled {
    pointer-events: none;
    opacity: 0.7;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-22T13:23:00.620

> 我正在使用 Chrome。知道为什么我有这个问题吗？

好吧，我第一次处理这个问题时，我是这样解决的：

```
function blockButtons() {
   $('button:submit').click(function(){
    $('button:submit').attr("disabled", true);
   });
} 
```

这很完美，但是……在 Mozilla Firefox 中。谷歌浏览器没有提交，所以我改成这样：

```
function blockButtons() {
   $('button:submit').click(function(){
      var form = $(this).parents('form:first');
    $('button:submit').attr("disabled", true);
    $('button:submit').css('opacity', 0.5);
    form.submit();
   });
} 
```

这在 Mozilla Firefox 中都有效，但是，之后我们的一些使用旧版本 IE 的用户遇到了两次提交的麻烦。也就是说，一个由javascript发起，一个由浏览器发起，忽略onclick的事实，无论如何都提交。我猜这可以通过 e.preventDefault 修复。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-12T03:08:48.987

你可以做这样的事情。这对我来说很好。

```
$("button#submitted").click(function () {
        $("button#submitted").prop('disabled', true);
}); 
```

双击您的按钮。此代码将运行

# regex - symfony2 中的正则表达式安全模式

> ID：13606575
> 
> 赞同：4
> 
> 时间：2012-11-28T13:47:39.403
> 
> 标签：regex, symfony

我正在为 REST API 进行 WSSE 身份验证（在 symfony2 中）

在 security.yml 中，我必须在模式参数中放置一个正则表达式来限制 url 访问。

```
pattern:   ^/api/.*[^(connect|docs/.*)] 
```

这个正则表达式不起作用，我尝试了很多其他组合..

我会限制对所有 API 调用的访问，例如：

```
/api/anything **BUT EXCEPT** for /api/connect **OR**  /api/docs/ **OR** /api/docs/anything 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-28T14:21:30.963

您可以使用[负前瞻](http://www.regular-expressions.info/lookaround.html#lookahead)：

```
^/api/(?!(connect|docs/)).*$ 
```

# c# - c#带有http接口的应用程序需要实现NTLM认证

> ID：13606581
> 
> 赞同：0
> 
> 时间：2012-11-28T13:47:47.490
> 
> 标签：c#, authentication, ntlm

我有一个在 Windows 客户端或服务器上运行的现有 c# 服务。为了处理这些，我添加了一个简单的基于 http 的管理代码，以便远程安装、删除、启动和停止子进程（作为服务）。

它可以工作，但是这种管理访问需要某种身份验证，否则任何知道系统的人都可能把它搞砸。因为它是 C#，所以我正在考虑使用 NTLM，希望它是 C#/.NET 框架中的一组内置库。

我可以找到很多关于如何连接到经过 NTLM 身份验证的页面/站点的示例，但找不到如何在服务器端自己实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:44:32.587

就我个人而言，我会使用带有 net.tcp 绑定的 WCF 将管理 API 从 Windows 服务公开给 Windows 客户端。net.tcp 使用 Windows 身份验证并开箱即用地加密消息。

# linux - 如何在 iptables CentOS 6 中打开端口 2195 以激活 APNS

> ID：13606582
> 
> 赞同：21
> 
> 时间：2012-11-28T13:47:48.603
> 
> 标签：linux, centos, apple-push-notifications, iptables, centos5

我试过这个解决方案：

```
iptables -I OUTPUT -p tcp --dport 2195 -j ACCEPT
/etc/init.d/iptables stop
/etc/init.d/iptables start 
```

但仍然无法访问端口。

如果我必须为 APNS 打开更多端口，请告诉我。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-28T15:05:47.260

怎么样：

```
iptables -A INPUT -p tcp --dport 2195 -j ACCEPT
service iptables restart 
```

[这](https://serverfault.com/questions/148781/unable-to-connect-to-apns-with-java-apns)也可能有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-01-06T23:45:10.180

它对我完全不起作用，因为我的最后一条规则是 DROP ALL 基本上否定了我之后添加到 iptables 的所有内容。

使用 -I 开关可能很有用：

`iptables -I INPUT 1 -p tcp --dport 2195 -j ACCEPT`

- 表示第`INPUT 1`一个输入规则而不是附加，将规则放在 drop all 前面

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-11-30T14:40:23.957

在此处查看我的答案：[https ://stackoverflow.com/a/25229943/1472048](https://stackoverflow.com/a/25229943/1472048)

对于 CentOS 7，您应该像这样使用“firewall-cmd”命令：

```
firewall-cmd --add-port=2195/tcp --permanent 
```

如果您使用 firewalld 服务，不推荐使用 iptables。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-17T13:31:59.953

尝试以下命令，它对我有用：

> $ sudo iptables -A INPUT -p tcp --jport 2195 -j ACCEPT
> 
> $ sudo /etc/init.d/iptables 保存

# jquery - 动画后对象的位置

> ID：13606583
> 
> 赞同：0
> 
> 时间：2012-11-28T13:47:51.370
> 
> 标签：jquery

如何在动画后获得对象的正确位置以便进一步工作？

我试过了：

```
$map.animate({top: t}, 200, alert($map.position().top+':'+t)); 
```

这给了我“旧职位：新职位”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T13:57:56.147

您可以使用这样的回调函数：

```
$('#test').animate({top: '+=200px'}, 200, function() {
    alert($(this).position().top);
});​ 
```

试试看：http: [//jsfiddle.net/FEwjq/](http://jsfiddle.net/FEwjq/)

# python - 如果在脚本启 动后连接电缆，Python 不会获得 IP

> ID：13606584
> 
> 赞同：1
> 
> 时间：2012-11-28T13:47:53.260
> 
> 标签：python, networking, httplib

我希望这不会进入超级用户领域。

所以我有一个嵌入式 linux，其中系统进程自然被剥离了。我不太确定哪个系统进程监控到物理层并在插入网线时启动 dhcp 客户端，但我自己做了一个。¨ 问题是，如果我有一个 python 脚本，使用 http 连接，在我有 IP 地址之前运行，它永远不会获得连接。即使我有一个有效的 IP，python 仍然有

“名称解析中的临时错误”

那么如何在不重新启动脚本的情况下让 python 实现新的连接可用呢？

或者，我是否缺少一些正常程序 Linux 在网络电缆连接时正常运行。

我使用的dhcp客户端是udhcpc，python版本是2.6。使用 httplib 进行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:13:45.880

听起来像是`/etc/resolv.conf`在您的 DHCP 客户端获得 IP 后更新的 httplib 缓存。

您可能会考虑编写一个包装器脚本，等待获得 IP 地址，然后调用您的 python 脚本。

或者，您可以尝试在您的 python 脚本中，在您获得 IP 地址并更新之前*不要打开任何套接字连接。*`/etc/resolv.conf`

**编辑**

httplib 使用`socket.create_connection()`它，经过一番搜索，[我发现*确实*cache](http://lists.laptop.org/pipermail/devel/2010-May/028615.html) `/etc/resolv.conf`。（好吧，似乎 libc 的嵌入式版本实际上是在做缓存）。

你可以试试[SugarLabs 的解决方案](http://bugs.sugarlabs.org/attachment/ticket/1940/network.py.patch)，虽然我不能说它的有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:56:22.083

可能是其中一个 python 模块正在缓存网络的状态，因此它没有使用最新的设置。尝试并重新加载所有与网络相关的模块。一个简单的例子是：

```
import sys, socket, urllib

for i in [sys, socket, urllib]:
    reload(i) 
```

如果这不起作用`sys.modules`，请查看其他导入的内容，并在那里尝试更多模块。更极端的重新加载版本将是下面的代码，您可以尝试作为最后的努力。

**代码**

```
import sys
print 'reloading %s modules ' % len(sys.modules)
for name, module in sys.modules.items():
    try:
        reload(module)
    except:
        print 'failed to import %s' % name 
```

**输出**

```
reloading 42 modules 
failed to import __main__
failed to import encodings.encodings
failed to import encodings.codecs
failed to import lazr
failed to import encodings.__builtin__ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T10:16:20.383

经过大量研究，jedwards 建议的 glibc 问题似乎是问题所在。我没有找到解决方案，但为我的用例做了解决方法。考虑到我只使用一个 URL，我添加了自己的 "resolv.file" 。当 PHY 报告电缆已连接时，一个小型守护程序会获取 URL 的 IP 地址。此 IP 保存到“我自己的 resolv.conf”。从这个文件中，python 脚本检索 IP 以用于发布。

不是一个很好的解决方案，而是一个解决方案。

# php - 将 PHP 数据存储在 Cookie 中

> ID：13606586
> 
> 赞同：0
> 
> 时间：2012-11-28T13:48:02.613
> 
> 标签：php, html, cookies, session-cookies, httpcookie

我想在 cookie 中存储一个数据库表（例如，为未登录的用户将项目存储在购物车中）。

我的问题是，假设该表有一个项目列表，我需要在其中存储每个项目的 ID 和数量。

我可以使用 PHP 将数据存储在 cookie 中的好的数据结构是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:49:11.973

Cookie 只能存储 4KB 的会话数据。您可以将会话数据存储在数据库中或缓存在服务器的原始文件中。如果您真的希望在客户端存储数据，请查看其中一些 javascript 存储库[pablotron](http://pablotron.org)、[DojoStorage](http://dojotoolkit.org/)、[localstrogage](https://developer.mozilla.org/en-US/docs/DOM/Storage) Firefox、Chrome、Safari、Internet Explorer 8+ 每个域 5 MB。

# asp.net - MasterPage 属性在内容页中始终为空

> ID：13606591
> 
> 赞同：1
> 
> 时间：2012-11-28T13:48:12.477
> 
> 标签：asp.net, delphi-prism, oxygene

`HiddenField`我的母版页上有一个，它的值是在`Page_Load`母版页的事件中设置的。在我的一个内容页面中，我需要这个值`Page_Load`。所以我添加`<%@ MasterType VirtualPath="~/Site.Master"%>`到我的内容页面，并在母版页中创建了一个属性来读取隐藏字段的值。但是，`Page_Load`事件似乎以相反的顺序触发，即首先是内容页面，然后是母版页，因为我的属性始终是一个空字符串。这是我的属性`read`方法和`Page_Load`事件的代码。

```
Site = public partial class(System.Web.UI.MasterPage)
  protected 
    method Page_Load(sender : object; e : EventArgs);
  private
    method GetCurrentCenter: String;
  public
    property CurrentCenter: String read GetCurrentCenter;
  end;

method Site.Page_Load(sender : object; e : EventArgs);
begin
  hfCurrentCenter.Value := '1';
end;

method Site.GetCurrentCenter: String;
begin
  Result := hfCurrentCenter.Value;
end; 
```

这是`Page_Load`我的内容页面中的事件：

```
method ContentPage.Page_Load(sender : object; e : EventArgs);
var
  Center: DropDownList;
begin
  if Master.CurrentCenter <> '-1' then  // --< Master.CurrentCenter is always an empty string
  begin
    Center := DropDownList(cuWizard.CreateUserStep.ContentTemplateContainer.FindControl("Center"));
    Center.Enabled := False;
  end;
end; 
```

为什么`CurrentCenter`总是空字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:14:45.477

我认为您的问题与页面生命周期有关。如果您查看 init 和 load 事件的触发顺序，那么您可能会得到答案。

```
INIT_EVENTS:
INIT_usercontrols
INIT_MasterPage
INIT_Page

LOAD Events:
Load :Page
Load: MasterPage
Load: UserControl 
```

# ruby - 用于在导轨上安装 ruby 的 ubuntu 类型

> ID：13606597
> 
> 赞同：-2
> 
> 时间：2012-11-28T13:48:28.007
> 
> 标签：ruby, ubuntu

我是初学者，我想用 ubuntu 在本地系统上安装 & ruby​​ 我想知道我需要在本地系统上安装 ruby​​ 应用程序开发的 ubuntu 类型和版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:51:07.730

一般来说，只需抓取最新的稳定图像。如果您正在部署生产服务器，您可能需要考虑使用*长期支持*版本之一，也可能是最新版本。

除非您有特定的理由不这样做，否则在没有旧的或不寻常的库使用的新项目上，请选择最新的稳定版本的 ubuntu，并使用`apt-get`.

# javascript - jQuery - 严格的子级层次选择

> ID：13606600
> 
> 赞同：3
> 
> 时间：2012-11-28T13:48:43.077
> 
> 标签：javascript, jquery, jquery-selectors, dom-traversal

什么相当于以下 jQuery 选择器：

```
$('table.special > thead > tr') 
```

如果我在函数中`$('table.special')`作为`$table`参数开始？

（某种形式`$table.(...)`，但等同于第一个提到的选择器）

* * *

**注意**：`$table.filter('thead > tr')`这*不是*我想要的，因为它还选择`thead`嵌套表的元素，并且`$table.filter('> thead > tr')`不起作用，也不`$table.children('thead > tr')`...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:49:41.760

这是可以做到的：

```
$table.children("thead").children("tr"); 
```

也：

```
$table.find("> thead > tr");
// or
$("> thead > tr", $table); 
```

但由于某些原因，这种类型的选择器现在已被[弃用](http://api.jquery.com/child-selector/)。

# ruby-on-rails - Rails 教程：RSpec 测试解耦

> ID：13606603
> 
> 赞同：8
> 
> 时间：2012-11-28T13:48:53.797
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

我正在尝试执行Michael Hartl 的[Ruby on Rails 教程](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial)[中第 8.5 章的练习 2](http://ruby.railstutorial.org/book/ruby-on-rails-tutorial#sec-sign_in_out_exercises)。练习如下：

按照第 8.3.3 节中的示例，浏览用户和身份验证请求规范（即当前位于 spec/requests 目录中的文件）并在 spec/support/utilities.rb 中定义实用程序函数以将测试与实现分离。额外的功劳：将支持代码组织到单独的文件和模块中，并通过将模块正确地包含在规范帮助文件中来使一切正常工作。

示例 8.3.3：实用程序.rb

```
include ApplicationHelper

def valid_signin(user)
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"
end

RSpec::Matchers.define :have_error_message do |message|
  match do |page|
    page.should have_selector('div.alert.alert-error', text: message)
  end
end 
```

定义的`valid_signin(user)`函数在以下块中使用`authentication_pages_spec.rb`并且工作正常。

```
describe "with valid information" do
    let(:user){FactoryGirl.create(:user)}
    before { valid_signin(user) }

    it { should have_selector('title', text: user.name) }
    it { should have_link('Profile', href: user_path(user)) }
    it { should have_link('Sign out', href: signout_path) }
    it { should_not have_link('Sign in', href: signin_path) }

    describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
    end
end 
```

因此，通过这个示例，我开始创建自己的命名`valid_signup(user)`：

```
def valid_signup(user)
    fill_in "Name",         with: user.name
    fill_in "Email",        with: user.email
    fill_in "Password",     with: user.password
    fill_in "Confirmation",         with: user.password_confirmation
end 
```

我正在`user_pages_spec.rb`像这样使用这个块：

```
describe "with valid information" do
  let(:user){FactoryGirl.create(:user)}
  before { valid_signup(user) }

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving the user" do
    before { click_button submit }
    let(:user) { User.find_by_email(user.email) }

    it { should have_selector('title', text: user.name) }
    it { should have_selector('div.alert.alert-success', text: 'Welcome') }
    it { should have_link('Sign out') }
  end
end 
```

它不起作用。Spork/Guard 报告以下错误：

```
Failures:

  1) UserPages signup with valid information should create a user
     Failure/Error: expect { click_button submit }.to change(User, :count).by(1)
       count should have been changed by 1, but was changed by 0
     # ./spec/requests/user_pages_spec.rb:46:in `block (4 levels) in '

  2) UserPages signup with valid information after saving the user 
     Failure/Error: before { valid_signup(user) }
     NoMethodError:
       undefined method `name' for nil:NilClass
     # ./spec/support/utilities.rb:10:in `valid_signup'
     # ./spec/requests/user_pages_spec.rb:43:in `block (4 levels) in '

  3) UserPages signup with valid information after saving the user 
     Failure/Error: before { valid_signup(user) }
     NoMethodError:
       undefined method `name' for nil:NilClass
     # ./spec/support/utilities.rb:10:in `valid_signup'
     # ./spec/requests/user_pages_spec.rb:43:in `block (4 levels) in '

  4) UserPages signup with valid information after saving the user 
     Failure/Error: before { valid_signup(user) }
     NoMethodError:
       undefined method `name' for nil:NilClass
     # ./spec/support/utilities.rb:10:in `valid_signup'
     # ./spec/requests/user_pages_spec.rb:43:in `block (4 levels) in ' 
```

这些错误似乎表明我的`valid_signup(user)`函数中的 user.name`utilities.rb`未定义，但我看不出任何原因。我已经多次重新启动 Guard，并`rake db:test:prepare`确保测试数据库（使用 postgresql）是有序的。

这是我`factories.rb`的完整性：

```
FactoryGirl.define do
    factory :user do
        name    "Example User"
        email   "user@example.com"
        password    "foobar"
        password_confirmation   "foobar"
    end
end
```

在我继续尝试解耦更多的测试套件之前，我非常想解决这个错误，更重要的是，了解它的原因。

**编辑**

我已经尝试了您的提示，并按`user_pages_spec.rb`如下方式编辑了函数：

```
describe "with valid information" do
      before { valid_signup(user) }

      it "should create a user" do
        expect { click_button submit }.to change(User, :count).by(1)
      end

      describe "after saving the user" do
        before { click_button submit }
        let(:user) { User.find_by_email('user@example.com') }

        it { should have_selector('title', text: user.name) }
        it { should have_selector('div.alert.alert-success', text: 'Welcome') }
        it { should have_link('Sign out') }
      end
    end
```

由于我`let(:user){FactoryGirl.create(:user)}`从函数中删除，我猜想函数中不再创建用户，所以我需要定义`valid_signup(user)`变量`user`for`valid_signup`不再由 FactoryGirl 填充：

```
def valid_signup(user)
    fill_in "Name",     with: "Example User"
    fill_in "Email",    with: "user@example.com"
    fill_in "Password", with: "foobar"
    fill_in "Confirmation", with: "foobar"
end
```

这不起作用，并给了我以下错误：

```
Failures:

1) UserPages signup with valid information should create a user
     Failure/Error: before { valid_signup(user) }
     NameError:
       undefined local variable or method `user' for #<RSpec::Core::ExampleGroup::Nested_5::Nested_3::Nested_2:0x007fdafc5088c0>
     # ./spec/requests/user_pages_spec.rb:42:in`block (4 levels) in '

2) UserPages signup with valid information after saving the user 
     Failure/Error: it { should have_selector('title', text: user.name) }
     NoMethodError:
       undefined method `name' for nil:NilClass
     # ./spec/requests/user_pages_spec.rb:52:in`block (5 levels) in ' 
```

我还尝试`valid_signup(user)`以以前的方式运行测试（使用`user.name, user.email, user.password, user.password_confirmation`，这也不起作用，出现错误：

```
Failures:

  1) UserPages signup with valid information should create a user
     Failure/Error: before { valid_signup(user) }
     NameError:
       undefined local variable or method `user' for #
     # ./spec/requests/user_pages_spec.rb:42:in `block (4 levels) in '

  2) UserPages signup with valid information after saving the user 
     Failure/Error: it { should have_selector('title', text: user.name) }
     NoMethodError:
       undefined method `name' for nil:NilClass
     # ./spec/requests/user_pages_spec.rb:52:in `block (5 levels) in '
```

接下来我尝试在不传递变量的情况下运行它`user_pages_spec.rb`：`before { valid_signup() }`并且在函数中没有变量`utilities.rb`：

```
def valid_signup()
    fill_in "Name",     with: "Example User"
    fill_in "Email",    with: "user@example.com"
    fill_in "Password", with: "foobar"
    fill_in "Confirmation", with: "foobar"
end
```

这返回：

```
Failures:

  1) UserPages signup with valid information should create a user
     Failure/Error: before { valid_signup(user) }
     NameError:
       undefined local variable or method `user' for #
     # ./spec/requests/user_pages_spec.rb:42:in `block (4 levels) in '

  2) UserPages signup with valid information after saving the user 
     Failure/Error: it { should have_selector('title', text: user.name) }
     NoMethodError:
       undefined method `name' for nil:NilClass
     # ./spec/requests/user_pages_spec.rb:52:in `block (5 levels) in '
```

仍然没有更接近答案。我可能忽略了一些简单的事情。不知道是什么。不过，我得到了我第一次做错的事情：我只是认为 FactoryGirl 是一种创建变量的方法，但我不知道它实际上对我的测试数据库做了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T12:26:33.370

我将尝试解释您的原始测试中发生了什么（我发现它比编辑后的版本更容易修复）：

```
describe "with valid information" do
  let(:user) {FactoryGirl.build(:user)} # FactoryGirl.create will save the instance, you should be using build instead
  before { valid_signup(user) }

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end

  describe "after saving the user" do
    before { click_button submit }
    # let(:user) { User.find_by_email(user.email) } # this is not needed any more 

    it { should have_selector('title', text: user.name) }
    it { should have_selector('div.alert.alert-success', text: 'Welcome') }
    it { should have_link('Sign out') }
  end
end 
```

有关 FactoryGirl 使用的更多信息：[https ://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#using-factories)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:49:48.297

FactoryGirl 将用户保存到数据库，然后您使用数据库中的用户访问 sign_in_path 并使用 valid_sigin(user) 填写登录表单

```
let(:user){FactoryGirl.create(:user)}
before { valid_signin(user) } 
```

当你这样做时：

```
let(:user){FactoryGirl.create(:user)}
before { valid_signup(user) } 
```

factory girl 将用户保存在数据库中，然后您使用已收到的电子邮件填写表格。

编辑：

```
 describe "with valid information" do
  before { valid_signup(user) } 
```

您没有定义变量用户，因为您已删除`let(:user){FactoryGilr.create(:user)}`，并且您应该访问正确的路径，您当前的路径是“sign_in_path”并且应该是“sign_up_path”

你应该这样做：

**实用程序.rb**

```
def valid_sign_up(user)
  fill_in "Name",         with: user.name
  fill_in "Email",        with: user.email
  fill_in "Password",     with: user.password
  fill_in "Confirmation", with: user.password_confirmation
end 
```

**user_pages_spec.rb**

```
describe "with valid information" do
  let(:user){User.new(name: "my name", email: "myemail@example"...)
  before do        
    visit sign_up
    valid_sign_up(user)
  end 

  it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end
end 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T03:11:33.937

我遇到了同样的问题并找到了解决方案：当你定义valid_signup时，它应该以'page'作为参数。毕竟，您是在测试页面元素，而不是用户。

**规范/支持/实用程序.rb**

```
def valid_signup(page)
  fill_in "Name", with: "Example User"
  fill_in "Email",          with: "user@example.com"
  fill_in "Password",       with: "foobar"
  fill_in "Confirmation",   with: "foobar"
end 
```

**规范/请求/user_pages_spec.rb**

在 { valid_signup(page) } 之前描述“具有有效信息”

```
 it "should create a user" do
    expect { click_button submit }.to change(User, :count).by(1)
  end 
```

我希望这有帮助！

**更新**我现在意识到这是因为变量“页面”的范围而起作用（因为它是主题）。要使用“用户”，我添加了该行

```
let(:user) { FactoryGirl.create(:user) } 
```

多于

之前`{ sign_up(user) }`。这打破了后来的规范，我也尝试使用“用户”作为变量，所以我将名称更改为“编辑用户”。这是完整的示例：

**user_pages_spec.rb**

```
require 'spec_helper'

describe "UserPages" do

  subject { page } 
```

...

```
 describe "signup page" do
    before { visit signup_path }

    let(:submit) { "Create my account" }

    it { should have_selector('h1', text: 'Sign up') }
    it { should have_selector('title', text: full_title('Sign up')) }

  describe "with invalid information" do
    it "should not create a user" do
    expect { click_button submit }.not_to change(User, :count)
  end

  describe "after submission" do
    before { click_button submit }

    it { should have_selector('title', text: 'Sign up') }
    it { should have_content('error') }
  end
end

  describe "with valid information" do
    let(:user) { FactoryGirl.create(:user) }
    before { sign_up(user) }

    it "should create a user" do
      expect { click_button submit }.to change(User, :count).by(1)
    end

    describe "after saving the user" do
      before { click_button submit }
      let(:editeduser) { User.find_by_email('user@example.com') }

      it { should have_selector('title', text: editeduser.name) }
      it { should have_selector('div.alert.alert-success', text: 'Welcome') }
      it { should have_link('Sign out') }
    end
  end
end 
```

希望这可以帮助某人！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-24T18:15:37.963

我也对这个很好奇，并找到了一个可能更符合 Hartl 期望的答案（尽管只是在学习，我不能 100% 确定最佳答案是否更优雅）。

由于我们没有使用 FactoryGirl 来注册用户，而是让他们登录，所以我不想在重构中使用它。这就是我的实用程序.rb 中的内容：

```
def valid_signup
  fill_in "Name",         with: "Example User"
  fill_in "Email",        with: "user@example.com"
  fill_in "Password",     with: "foobar"
  fill_in "Confirmation", with: "foobar"
end 
```

然后在 user_pages_spec.rb 我替换

```
 describe "with valid information" do
  before do
    fill_in "Name",           with: "Example User"
    fill_in "Email",          with: "user@example.com"
    fill_in "Password",       with: "foobar"
    fill_in "Confirmation",   with: "foobar"
  end 
```

和

```
 describe "with valid information" do
  before { valid_signup } 
```

我们不需要为了检查一次性注册而将用户保存到数据库中，因为他们不需要通过多个页面视图持续存在。此外，由于我们不查找用户，因此在 valid_signup 方法之后我们不需要 (user) 参数（我认为我的术语是正确的。如果我没有，请纠正我。）

# php - 不正确的整数值：错误

> ID：13606604
> 
> 赞同：0
> 
> 时间：2012-11-28T13:48:54.990
> 
> 标签：php, mysql

我确实有两个名为 Active 和 Require 的复选框，并且我也有一个网格，我必须在其中插入这两个复选框的数据。为此，我编写了 Insert 语句，如下所示：

```
$myVals=$_POST;     
$fields ="question,active,req,sort_order,dtype";
$myVals["sort_order"]="";
$myVals["dtype"]="";
$sql=makeSQL($myVals,$fields,
    "INSERT INTO s_additional_data(kunnr,$fields)values("."'".$_SESSION['kunnr']."',", 
```

但我收到一个错误，因为整数值不正确：'' 表示列错误。建议我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:04:14.377

尝试

```
 $_POST['active'] = ($_POST['active'] == 'on') ? 1 : 0; 
 $_POST['req]' = ($_POST['req'] == 'on') ? 1 : 0;

 $myVals=$_POST;
 ////
 etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T13:58:50.360

如果没有看到完整的 sql 语句和 a 就很难判断`var_dump($_POST)`，但最有可能的问题是存在未选中的复选框。

复选框仅在选中时才会发送到服务器，因此如果您不选中`Active`或`Require`，您最终会得到一个`$myVals`不完整的变量。

为避免这种情况，您可以执行例如（对于所有复选框，如果它们应该是整数......）：

```
$myVals["Active"] = isset($_POST['Active']) ? (int) $_POST['Active'] : 0;
// etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:01:11.243

您正在硬编码`sort_order`为空白字符串：

```
$myVals["sort_order"]=""; 
```

我认为这是问题所在，我认为您的 sort_order 列是`int`，所以它试图将一个空白字符串放入`int`列中，正如错误所暗示的那样。

将其设置为`0`或其他整数：

```
$myVals["sort_order"] = 0; 
```

# jboss7.x - JBoss AS7 远程调试和部署

> ID：13606605
> 
> 赞同：0
> 
> 时间：2012-11-28T13:48:55.980
> 
> 标签：jboss7.x

我在 VPS 上安装 JBoss AS。我转发端口，我可以从我的本地机器访问服务器。是否有可能将此服务器添加到 Eclipse IDE？我希望调试和部署到 jboss 的远程实例具有相同的效果。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:55:34.010

你试试eclipse jboss工具插件吗？

[http://marketplace.eclipse.org/node/121986#.ULYXteMSXk4](http://marketplace.eclipse.org/node/121986#.ULYXteMSXk4)

好的。

从第 5 点开始查看本教程。 [http://www.glxn.net/seam-maven-refimpl/doc/tutorial/02-eclipse.html](http://www.glxn.net/seam-maven-refimpl/doc/tutorial/02-eclipse.html)

# android - 循环 LayoutInflater 时每个视图都粘在一起

> ID：13606607
> 
> 赞同：0
> 
> 时间：2012-11-28T13:49:03.860
> 
> 标签：android, xml, view, layout-inflater

我有一个布局问题。我的代码有一个 LayoutInflater 将以下 xml 设置为布局，并且会循环几次以显示我的学校时间表。尽管我已将 relativelayout 的 marginBottom 和 Top 设置为 50dp，但为什么每个布局仍然粘在一起？

这是xml：

```
 <RelativeLayout
        android:id="@+id/left_part"
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

        <TextView
            android:id="@+id/table_day"
            android:layout_width="match_parent"
            android:layout_height="56dp"
            android:layout_above="@+id/table_date"
            android:layout_alignParentTop="true"
            android:layout_alignParentLeft="true"
            android:gravity="center"
            android:text="@string/table_day"
            android:textSize="@dimen/table_day_size" />
        <TextView
            android:id="@+id/table_date"
            android:layout_width="match_parent"
            android:layout_height="14dp"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:gravity="center"
            android:text="@string/table_date"
            android:textSize="@dimen/table_date_size" />
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/center_part"
        android:layout_width="180dp"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/left_part"
        android:layout_alignTop="@+id/left_part"
        android:layout_toRightOf="@+id/left_part" >

        <RelativeLayout
            android:id="@+id/center_part1"
            android:layout_width="wrap_content"
            android:layout_height="20dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true" >

            <TextView
                android:id="@+id/table_time"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:text="@string/table_time"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textSize="@dimen/table_timelocationclass_size" />
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/center_part2"
            android:layout_width="wrap_content"
            android:layout_height="40dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/center_part1" >
            <TextView
                android:id="@+id/table_subject"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:padding="1dp"
                android:gravity="center_vertical"
                android:text="@string/table_subject"
                android:textAppearance="?android:attr/textAppearanceLarge"
                android:textSize="@dimen/table_subject_size" />
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/center_part3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/center_part2" >
            <TextView
                android:id="@+id/table_lecturer"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentBottom="true"
                android:layout_alignParentLeft="true"
                android:layout_alignParentRight="true"
                android:text="@string/table_lecturer"
                android:textAppearance="?android:attr/textAppearanceSmall"
                android:textSize="@dimen/table_lecturer_size" />
        </RelativeLayout>
    </RelativeLayout>
    <RelativeLayout
        android:id="@+id/right_part"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/center_part"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/center_part"
        android:layout_toRightOf="@+id/center_part" >

        <RelativeLayout
            android:id="@+id/right_part1"
            android:layout_width="wrap_content"
            android:layout_height="50dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true" >

            <TextView
                android:id="@+id/table_location"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:text="@string/table_location" />
        </RelativeLayout>
        <RelativeLayout
            android:id="@+id/right_part2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/right_part1" >

            <TextView
                android:id="@+id/table_class"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_centerVertical="true"
                android:text="@string/table_class" />

        </RelativeLayout>
    </RelativeLayout> 
```

这是打印屏幕：

![在此处输入图像描述](../Images/2a1161876231a497f0b700beb20a9123.png)

这是循环：

```
LinearLayout ll = (LinearLayout)findViewById(R.id.main_table);
ll.removeAllViews();

        //set table layout
        for(int i=0;i<tableRow.size();i++)
        {
            LayoutInflater inflater = getLayoutInflater();
            View perClassTable = inflater.inflate(R.layout.perclass_table, null);
            TextView table_day = (TextView)perClassTable.findViewById(R.id.table_day);
            TextView table_date = (TextView)perClassTable.findViewById(R.id.table_date);
            TextView table_time = (TextView)perClassTable.findViewById(R.id.table_time);
            TextView table_location = (TextView)perClassTable.findViewById(R.id.table_location);
            TextView table_class = (TextView)perClassTable.findViewById(R.id.table_class);
            TextView table_subject = (TextView)perClassTable.findViewById(R.id.table_subject);
            TextView table_lecturer = (TextView)perClassTable.findViewById(R.id.table_lecturer);
            table_day.setText(date[i].substring(0, 3));
            table_date.setText(date[1].substring(4,13));
            table_time.setText(time[i]);
            table_location.setText(loca[i]);
            table_class.setText(clas[i]);
            table_subject.setText(subj[i]);
            table_lecturer.setText(lect[i]);

            //testing
            ll.addView(perClassTable);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:31:16.083

对我来说看起来像一个列表，请查看[ListView](http://developer.android.com/reference/android/widget/ListView.html)。如果您正确实现适配器，它甚至会回收视图！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:13:13.293

A`RelativeLayout`从上到下评估它的孩子。所以，如果你使用类似的东西`android:layout_above="@+id/table_date"`，它必须在之后`table_date`。

```
<RelativeLayout
    android:id="@+id/left_part"
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" >

    <TextView
        android:id="@+id/table_date"
        android:layout_width="match_parent"
        android:layout_height="14dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:gravity="center"
        android:text="@string/table_date"
        android:textSize="@dimen/table_date_size" />

    <TextView
        android:id="@+id/table_day"
        android:layout_width="match_parent"
        android:layout_height="56dp"
        android:layout_above="@+id/table_date"
        android:layout_alignParentTop="true"
        android:layout_alignParentLeft="true"
        android:gravity="center"
        android:text="@string/table_day"
        android:textSize="@dimen/table_day_size" />

</RelativeLayout> 
```

在这里，我已经交换了文本视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T16:37:37.863

在循环`LayoutParams`结束时为您的膨胀视图设置一些边距：`for`

```
 //...
    table_subject.setText(subj[i]);
    table_lecturer.setText(lect[i]);

    // set some proper LayoutParams for the inflated View which is going to be added
    // to the ll LinearLayout
    LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    // set some margins to distance the rows 
    lp.topMargin = 100; 
    lp.bottomMargin = 100; 
    // add the inflated view with to ll with the LayoutParams above.
    ll.addView(perClassTable, lp);
} 
```

这`LayoutParams`是一个特殊的类，旨在与子类一起使用，该`ViewGroup`子类通常包含布局属性，如宽度/高度、边距、布局定位规则等。此外，您可以通过删除所有这些包装器`RelativeLayouts`并`TextViews`直接在 parent 中设置来改进布局文件`RelativeLayout`。如果行数很大，您可能还想看看`ListView`galex 在他的回答中所说的小部件。

# objective-c - dyld：库未加载（xcode）

> ID：13606610
> 
> 赞同：2
> 
> 时间：2012-11-28T13:49:15.107
> 
> 标签：objective-c, frameworks, xcode4.5, dyld

我在 xcode 中运行代码并且构建成功。但我有一个错误，

```
dyld: Library not loaded: /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
  Referenced from: /Users/developer/Library/Developer/Xcode/DerivedData/NKDBarcode-fdnqnjfiwlxcewbfyoyarhsmvvll/Build/Products/Debug/NKDBarcode.app/Contents/MacOS/NKDBarcode
  Reason: Incompatible library version: NKDBarcode requires version 64.0.0 or later, but ApplicationServices provides version 1.0.0 
```

我不知道这个错误到底是什么，因为我对此很陌生。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-03T11:04:21.630

确保在目标的**Link Binary With Libraries** Phase 添加了框架（ApplicationServices.framework）！它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:15:04.727

库与您的 AppKit 版本不兼容

# jquery - Fancybox 模态窗口不会在页面加载时自动打开

> ID：13606616
> 
> 赞同：0
> 
> 时间：2012-11-28T13:49:29.650
> 
> 标签：jquery, fancybox, fancybox-2

我已经阅读了很多与此相关的帖子，但我无法深入了解它。我的网站主页上有一个视频。当访问者单击播放视频图形时，YouTube 视频将在 Fancybox 模式中播放。我想发送一封电子邮件时事通讯，鼓励订阅者通过单击时事通讯中的链接来观看视频，该链接将他们带到我的网站并自动启动 Fancybox 模式播放视频。但是我不能让它工作。在我的头标签中，我有：

```
<!-- Add fancyBox main JS and CSS files -->
<script type="text/javascript" src="{$base_url}/assets/js/fancybox/source/jquery.fancybox.js?v=2.1.3"></script>
<link rel="stylesheet" type="text/css" href="{$base_url}/assets/js/fancybox/source/jquery.fancybox.css?v=2.1.2" media="screen" />

<!-- Add Media helper (this is optional) -->
<script type="text/javascript" src="{$base_url}/assets/js/fancybox/source/helpers/jquery.fancybox-media.js?v=1.0.5"></script>

<script type="text/javascript">
  $(document).ready(function() {
    $('#video-intro').fancybox({
      openEffect : 'none',
      closeEffect : 'none',
      prevEffect : 'none',
      nextEffect : 'none',
      arrows : false,
      width   : '640',
      height    : '360',
      helpers : {
        media : {}
        buttons : {}
      }
    });
  });
</script>

<script type="text/javascript">
  $(document).ready(function() {
    $("#video-intro").trigger('click');​
  });
 </script> 
```

在我的身体中，我有以下链接：

```
<a id="video-intro" href="http://www.youtube.com/embed/Scd0dmAod-k?rel=0" onClick=”_gaq.push(['_trackEvent', 'Video', 'Play', 'RentPro Overview Video']);”&gt;<img src="{$base_url}assets/img/play-video.png" width="425" height="239" alt="Click to play RentPro overview video" style="border:1px solid #fff;" /></a> 
```

但是我不能让它自动显示模式并在页面加载时播放视频。实际的 href 有一个 onClick 事件来向 Google Analytics 注册一个事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T18:37:48.183

一个脚本就足够了：

```
$(document).ready(function() {
    $('#video-intro').fancybox({
        openEffect: 'none',
        closeEffect: 'none',
        prevEffect: 'none',
        nextEffect: 'none',
        arrows: false,
        width: 640,
        height: 360,
        helpers: {
            media: {},
            buttons: {}
        },
        type: "iframe"
    }).trigger("click");
}); // ready 
```

**请注意**，我从您的脚本中更正了以下内容：

*   整数值**不带**引号
*   `media : {}, //<-- comma here`将其与以下选项分开后缺少逗号`buttons: {}`
*   我将其设置`.trigger("click")`为相同的选择器，因此不需要两个不同的脚本
*   由于您使用的是 youtube 的`embed`表单，因此我添加`type: "iframe"`了 API 选项

看到它在这个**[jsfiddle中工作](http://jsfiddle.net/J6vZ3/)**

正如`onclick`您在`console.log`

# python - python脚本需要很长时间，窗口似乎冻结

> ID：13606624
> 
> 赞同：1
> 
> 时间：2012-11-28T13:49:57.187
> 
> 标签：python, pygtk

> **可能重复：**
> [请简单的 pygtk 和线程示例](https://stackoverflow.com/questions/2615124/simple-pygtk-and-threads-example-please)

我的 python 脚本有这个“问题”。我用 pygtk（带有一个文本字段）创建窗口，然后我的脚本执行数据库查询并准备数据以存储到 txt 文件中。一切都很好，但我只面临一件事 - 这个功能运行大约。2-4 分钟，在此期间我的程序窗口没有“响应”，所以看起来程序窗口冻结（但脚本正在运行并且窗口在完成后再次“活动”）。

我该如何对待这种行为？我想让我的窗口一直响应。例如：有一个文本字段“工作...”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:04:29.113

您需要在应用程序中使用线程。每当您有一个长时间运行的进程时，您都需要将该工作放入一个单独的线程中并将进度更新发送到主线程。在您在这里找到一个工作[示例](https://stackoverflow.com/a/12697645/1699750)之前，我已经回答了一个类似的问题。下面提供了一个较短的虚拟示例。

**例子**

```
import gtk, gobject, urllib, time, threading

def run():
    for i in range(50):
        gobject.idle_add(button.set_label, '%s/50 complete' % i)
        time.sleep(0.1)

def clicked(button):
    threading.Thread(target=run).start()

gtk.gdk.threads_init()
win = gtk.Window()
button = gtk.Button(label="Start")
button.connect('clicked', clicked)
win.add(button)
win.show_all()
gtk.main() 
```

# css - 背景图像显示在设计视图中但不在浏览器中？（视觉工作室 2008）

> ID：13606626
> 
> 赞同：0
> 
> 时间：2012-11-28T13:50:01.913
> 
> 标签：css

我是 CSS 新手，Visual Studio 中的这个问题让我发疯！

我在一个简单的样式表中定义了一个背景图像......

```
body {

background-image: url(Images\Greenhouse.jpg);
background-position: center;

} 
```

我的样式表在 HTML 代码中被引用...

```
<head runat="server">
<title></title>

<link rel="Stylesheet" type="text/css" href="Stylesheet.css"/>

</head> 
```

背景图像显示在设计视图中，但在浏览器中，什么也没有！

我尝试更改位置等并刷新浏览器，清除缓存等。这发生在我的所有图像上。图像位于项目文件夹 (\Images) 中，并添加到 VS 的解决方案资源管理器中。试过“”，更改图像文件名等，没有任何效果！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:02:35.233

谢谢大家。我通过将背景图像移动到根目录并重命名为更短的文件名来解决这个问题。看起来 VS 不喜欢带有下划线的长图像名称。谢谢大家。

# c# - TPL Dataflow，我可以查询数据块是否标记为完成但尚未完成？

> ID：13606628
> 
> 赞同：5
> 
> 时间：2012-11-28T13:50:08.140
> 
> 标签：c#, concurrency, task-parallel-library, message-passing, tpl-dataflow

鉴于以下情况：

```
BufferBlock<int> sourceBlock = new BufferBlock<int>();
TransformBlock<int, int> targetBlock = new TransformBlock<int, int>(element =>
{
    return element * 2;
});

sourceBlock.LinkTo(targetBlock, new DataflowLinkOptions { PropagateCompletion = true });

//feed some elements into the buffer block
for(int i = 1; i <= 1000000; i++)
{
    sourceBlock.SendAsync(i);
}

sourceBlock.Complete();

targetBlock.Completion.ContinueWith(_ =>
{
    //notify completion of the target block
}); 
```

`targetBlock`似乎永远不会完成，我认为原因是其中的所有项目都`TransformBlock` `targetBlock`在输出队列中等待，因为我没有将其链接`targetBlock`到任何其他 Dataflow 块。但是，我真正想要实现的是当 (A)`targetBlock`被通知完成并且 (B) 输入队列为空时的通知。我不想关心项目是否仍然位于`TransformBlock`. 我该怎么办？是获取我想要查询`sourceBlock`AND 的完成状态以确保 的`InputCount`为零`targetBlock`的唯一方法吗？我不确定这是否非常稳定（`sourceBlock`如果最后一项`sourceBlock`已传递给`targetBlock`？）。有没有更优雅、更有效的方式来实现相同的目标？

编辑：我刚刚注意到，即使是“肮脏”的方式来检查`sourceBlock`与为零`InputCount`的完成情况`targetBlock`也并非易事。那个街区会坐在哪里？它不能在其中，`targetBlock`因为一旦满足上述两个条件，显然就`targetBlock`不再处理任何消息。还检查完成状态`sourceBlock`引入了很多低效率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:13:25.840

我相信你不能直接这样做。您可以`private`使用反射从某些字段中获取此信息，但我不建议您这样做。

但是您可以通过创建自定义块来做到这一点。在这种情况下`Complete()`很简单：只需创建一个将每个方法转发到原始块的块。除了`Complete()`，它也会在哪里记录它。

在确定所有项目的处理何时完成的情况下，您可以将您的块链接到一个中间`BufferBlock`. 这样，输出队列将被快速清空，因此检查`Completed`内部块将为您提供相当准确的处理何时完成的测量。这会影响您的测量，但希望不会显着。

另一种选择是在块委托的末尾添加一些日志记录。这样，您可以看到最后一个项目的处理完成时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-08T11:01:27.680

`TransformBlock`如果当块完成其队列中所有消息的处理时有一个`ProcessingCompleted`事件会触发，但没有这样的事件，那就太好了。以下是纠正这一遗漏的尝试。该`CreateTransformBlockEx`方法接受一个`Action<Exception>`处理程序，该处理程序在此“事件”发生时被调用。

目的是始终在块最终完成之前调用处理程序。不幸的是，在提供[`CancellationToken`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.dataflowblockoptions.cancellationtoken)被取消的情况下，完成（取消）首先发生，并且处理程序在几毫秒后被调用。要解决这种不一致，需要一些棘手的解决方法，并且可能会有其他不需要的副作用，所以我将其保留原样。

```
public static IPropagatorBlock<TInput, TOutput>
    CreateTransformBlockEx<TInput, TOutput>(Func<TInput, Task<TOutput>> transform,
    Action<Exception> onProcessingCompleted,
    ExecutionDataflowBlockOptions dataflowBlockOptions = null)
{
    if (onProcessingCompleted == null)
        throw new ArgumentNullException(nameof(onProcessingCompleted));
    dataflowBlockOptions = dataflowBlockOptions ?? new ExecutionDataflowBlockOptions();

    var transformBlock = new TransformBlock<TInput, TOutput>(transform,
        dataflowBlockOptions);
    var bufferBlock = new BufferBlock<TOutput>(dataflowBlockOptions);

    transformBlock.LinkTo(bufferBlock);
    PropagateCompletion(transformBlock, bufferBlock, onProcessingCompleted);
    return DataflowBlock.Encapsulate(transformBlock, bufferBlock);

    async void PropagateCompletion(IDataflowBlock block1, IDataflowBlock block2,
        Action<Exception> completionHandler)
    {
        try
        {
            await block1.Completion.ConfigureAwait(false);
        }
        catch { }
        var exception = 
            block1.Completion.IsFaulted ? block1.Completion.Exception : null;
        try
        {
            // Invoke the handler before completing the second block
            completionHandler(exception);
        }
        finally
        {
            if (exception != null) block2.Fault(exception); else block2.Complete();
        }
    }
}

// Overload with synchronous lambda
public static IPropagatorBlock<TInput, TOutput>
    CreateTransformBlockEx<TInput, TOutput>(Func<TInput, TOutput> transform,
    Action<Exception> onProcessingCompleted,
    ExecutionDataflowBlockOptions dataflowBlockOptions = null)
{
    return CreateTransformBlockEx<TInput, TOutput>(
        x => Task.FromResult(transform(x)), onProcessingCompleted,
        dataflowBlockOptions);
} 
```

当使用选项调用时，本地函数的代码`PropagateCompletion`模仿内置方法的[源代码。](https://source.dot.net/System.Threading.Tasks.Dataflow/Internal/Common.cs.html#43ef227d2325fbe9)[`LinkTo`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.transformblock-2.linkto)[`PropagateCompletion = true`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.tasks.dataflow.dataflowlinkoptions.propagatecompletion)

使用示例：

```
var httpClient = new HttpClient();
var downloader = CreateTransformBlockEx<string, string>(async url =>
{
    return await httpClient.GetStringAsync(url);
}, onProcessingCompleted: ex =>
{
    Console.WriteLine($"Download completed {(ex == null ? "OK" : "Error")}");
}, new ExecutionDataflowBlockOptions()
{
    MaxDegreeOfParallelism = 10
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-01T08:23:04.183

首先，将 IPropagator 块用作叶终端是不正确的。但是您的要求仍然可以通过异步检查 TargetBlock 的输出缓冲区中的输出消息然后消费然后清空缓冲区来满足。

```
 `  BufferBlock<int> sourceBlock = new BufferBlock<int>();
       TransformBlock<int, int> targetBlock = new TransformBlock<int, int> 
       (element =>
       {

        return element * 2;
        });
        sourceBlock.LinkTo(targetBlock, new DataflowLinkOptions { 
        PropagateCompletion = true });

        //feed some elements into the buffer block
        for (int i = 1; i <= 100; i++)
        {
             sourceBlock.SendAsync(i);
        }

        sourceBlock.Complete();

        bool isOutputAvailable = await targetBlock.OutputAvailableAsync();
        while(isOutputAvailable)
        {
            int value = await targetBlock.ReceiveAsync();

            isOutputAvailable = await targetBlock.OutputAvailableAsync();
        }

        await targetBlock.Completion.ContinueWith(_ =>
        {
            Console.WriteLine("Target Block Completed");//notify completion of the target block
        }); 
```

`

# web-applications - Primefaces 4.0：如何防止行扩展导致多个组件重新渲染？

> ID：13606636
> 
> 赞同：0
> 
> 时间：2012-11-28T13:50:28.170
> 
> 标签：web-applications, jsf-2, primefaces

我正在使用其中有多个 p:tab 的 p:tabView 组件。其中一个 p:tab 包含一个数据表，该数据表又包含一个带有 rowToggler 的列：

```
<p:column style="width:4%">
    <p:rowToggler />
</p:column> 
```

还有一个单独的 p:rowExpansion：

```
<p:rowExpansion>
      <p:graphicImage id="thumbnailImage" value="/api/downloadFile/thumb/#{item.revisionId}"/>
</p:rowExpansion> 
```

当我单击渲染数据表中任何行中的行切换器时，我注意到我不仅可以根据需要检索图像，而且 tabView 中的每个选项卡也会重新渲染。这会导致对服务器的多次不必要的调用以及服务器上相关的额外负载，并且严重影响用户体验和性能 - 例如，在行实际扩展之前等待 4 秒。

如何防止切换事件波动导致所有选项卡重新呈现？

我正在使用 Primefaces 4.0-SNAPSHOT。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T22:20:28.360

看起来这种行为是由于我们选择的 JSF 实现 (mojarra) 处理 AJAX 请求的方式：

[http://forum.primefaces.org/viewtopic.php?f=3&t=19101](http://forum.primefaces.org/viewtopic.php?f=3&t=19101)

许多人在运行 mojarra 时遇到了应用程序性能不佳的问题，因此引发了 JIRA 问题：

[http://java.net/jira/browse/JAVASERVERFACES-2334](http://java.net/jira/browse/JAVASERVERFACES-2334)

可悲的是，这以“解决方案：按设计工作”结束

我们现在正在寻求使用 MyFaces JSF 实现，因为根据 JIRA 的评论，它的性能要高得多：

> “只是出于好奇，我用 bean 测试了附加页面。
> 
> Mojarra ajax 结果平均为 1000 毫秒，MyFaces ajax 结果平均为 50 毫秒，因此差异很大。差异比率也适用于非 ajax 请求。”

# css - 打印 8.5x11 纸张格式的 html

> ID：13606637
> 
> 赞同：3
> 
> 时间：2012-11-28T13:50:32.287
> 
> 标签：css, asp.net-mvc-3, html, pdf, printing

我有一个用于打印表格的 asp.net mvc 3 视图。我想要一个可打印的视图弹出窗口。生成的 HTML 打印与 8.5x11 纸张兼容/格式化。

整个页面只包含一个表，可能有很多行。因此，它基本上有很多页。

导出为 pdf 没问题。

我应该添加 CSS 还是其他技巧？

```
<body>
<table class="ui-widget">
    <thead>
        <tr>
            <td class="ui-widget-content">
                ID
            </td>
            <td class="ui-widget-content">
                PIN
            </td>
            <td class="ui-widget-content">
                First Name
            </td>
            <td class="ui-widget-content">
                Middle Name
            </td>
            <td class="ui-widget-content">
                Last Name
            </td>
        </tr>
    </thead>
    @foreach (var r in ViewBag.PINS)
    {
        <tr>
            <td class="ui-widget-content">@r.IDNumber
            </td>
            <td class="ui-widget-content">@r.PIN
            </td>
            <td class="ui-widget-content">@r.FirstName
            </td>
            <td class="ui-widget-content">@r.MiddleName
            </td>
            <td class="ui-widget-content">@r.LastName
            </td>
        </tr>
    }
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:14:10.217

您是否考虑过 print.css 文件？您可以设置页面的样式以适应 8.5x11"（这是最简单和最快的方法）。如果您需要它，那么您应该使用 ASP.net PDF 导出库。

# javascript - JSON.parse 上的 JSON 字符串数组未按预期执行

> ID：13606642
> 
> 赞同：4
> 
> 时间：2012-11-28T13:50:59.727
> 
> 标签：javascript, json

我是 javascript 的新手，所以学习其中一些东西是如何工作的。

我有一个看起来像这样的字符串：`["{\"name\":\"name\"}","{\"name\":\"Rick\"}"]`

如果我 JSON.parse() 不应该返回一个具有名称属性的对象数组？

我得到的是一个数组中的 2 个元素，但它们只是 JSON 字符串。它们不是具有属性名称的对象。我错过了什么？

[编辑] 我在对象上调用 stringify() ，然后将其传递给数组，而不是仅仅将对象按原样传递给数组。然后我 stringify() 数组。我正在对一个 stringify 进行字符串化，这导致它放置了转义字符:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T13:53:07.527

> 如果我 JSON.parse() 不应该返回一个具有名称属性的对象数组？

不，看起来 JSON 定义了一个包含两个字符串的数组。

这是包含两个字符串的数组的 JSON：

```
[
    "{\"name\":\"name\"}",
    "{\"name\":\"Rick\"}"
] 
```

在 JavaScript 字符串文字形式中，即`'["{\"name\":\"name\"}","{\"name\":\"Rick\"}"]'`.

这是包含两个对象的数组的 JSON：

```
[
    {
        "name": "name"
    },
    {
        "name": "Rick"
    }
] 
```

在 JavaScript 字符串文字形式中，这将是`'[{"name":"name"},{"name":"Rick"}]'`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:57:38.707

我想它应该是：

```
"[{\"name\":\"name\"},{\"name\":\"Rick\"}]" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T13:54:51.960

如果你丢失了根元素周围的（转义）引号，你可能会得到你想要的。

例如像

```
"[{"name":"name"},{"name":"Rick"}]" 
```

# asp.net-mvc-3 - 在 MVC 3 中添加异常过滤器时出错

> ID：13606643
> 
> 赞同：1
> 
> 时间：2012-11-28T13:51:01.120
> 
> 标签：asp.net-mvc-3, exception, razor, filter, onexception

我正在尝试为我的 mvc 3(razor) 应用程序创建自定义异常。但它不能正常工作。

以下是我为自定义异常类编写的代码。

```
using System;
using System.Web.Mvc;

namespace TestApp.Helpers
{
    public class CustomExceptionAttribute : FilterAttribute, IExceptionFilter
    {
        public void OnException(ExceptionContext filterContext)
        {
            if (!filterContext.ExceptionHandled && filterContext.Exception is Exception)
            {
                //filterContext.Result = new RedirectResult("/shared/Error.html");
                filterContext.Result = new ViewResult { ViewName = "Error" };
                filterContext.ExceptionHandled = true;
            }
        }
    }
} 
```

以下是控制器中的代码：

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Text;
using TestApp.Domain;
using TestApp.Helpers;

namespace TestApp.Controllers
{
    [CustomException]
    public class MyController : Controller
    {
        private TestAppEntities db = new TestAppEntities();

        public ActionResult Create(int id)
        {
           // Throwing exception intentionally
           int a = 1;
           int b = 0;
           int c = a / b;
           //This is another method which is working fine.
           return View(CreateData(id, null));
        }
    }
} 
```

下面是'Error.cshtml'中的代码

```
@model System.Web.Mvc.HandleErrorInfo
@{
    ViewBag.Title = "Error";
}
<h2>
    Sorry, an error occurred while processing your request.
</h2>
<div>
    <p>
        There was a <b>@Model.Exception.GetType().Name</b> while rendering <b>@Model.ControllerName</b>'s
        <b>@Model.ActionName</b> action.
    </p>
    <p>
        The exception message is: <b><@Model.Exception.Message></b>
    </p>
    <p>Stack trace:</p>
    <pre>@Model.Exception.StackTrace</pre>
</div> 
```

当我们运行应用程序时，它会在@Model.Exception.GetType().Name 处引发错误，因为模型为空。这是确切的错误：NullReferenceException：对象引用未设置为对象的实例。

任何人都可以让我知道错误的确切原因是什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:37:17.450

您必须将`HandleErrorInfo`实例传递给视图。

```
string controllerName = (string)filterContext.RouteData.Values["controller"];
string actionName = (string)filterContext.RouteData.Values["action"];

HandleErrorInfo model = new HandleErrorInfo(filterContext.Exception, controllerName, actionName);
filterContext.Result = new ViewResult
{
   ViewName = "Error",   
   ViewData = new ViewDataDictionary<HandleErrorInfo>(model)
}; 
```

# matlab - codegen 和标量结构参数

> ID：13606645
> 
> 赞同：3
> 
> 时间：2012-11-28T13:51:09.620
> 
> 标签：matlab

像这样的代码生成命令：

```
codegen -config:dll ep1 -args single(0) ep2 -args {0,0} 
```

对于这样的功能很容易：

```
function y = ep1(u) %#codegen
y = u;

function y = ep2(u, v) %#codegen
y = u + v; 
```

我只是想知道如何定义标量结构参数。让我们假设上述参数 u 应该如下所示（即由 2 个字段组成 - 一个 char 和一个 double）：

```
u.FirstName = 'Loren';
u.Height = 150 
```

PS：

刚刚发现是这样的：

```
s = struct('a',42,'b',4711);
codegen topfun.m -args { s } 
```

这会是一个解决方案吗？我相信，这是一个例子的定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T08:48:50.710

这似乎对我有用：

```
codegen -report -config:dll ep1 ...
                            ep2 
```

可以在函数中定义实际的“函数签名”（以及标量结构），如下所示：

```
function [bla] = ep1(parameters)
%#codegen

assert(isstruct(parameters));
assert(isa(parameters.x1,'char'));
assert(size(parameters.x1, 1) >= 1);
assert(size(parameters.x1, 1) <= 1024);
assert(isa(parameters.x2,'double'));
... 
```

我遇到的问题是我似乎必须在父函数中定义所有参数，即使我不使用父函数中的参数。

看着上面的东西。让我们说 ep1 是 ep2 的父函数，并且 ep1 不使用 parameters.x2，我仍然必须在 ep1 中断言它。希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-23T07:23:07.757

可以使用该`coder.typeof`函数捕获结构的定义。

首先使用脚本初始化结构，使用 coder.typeof 捕获结构定义，然后使用 -args 传递定义，如下所示：

```
u = Initialise(u);
p = InitialiseParameters();

tx = coder.typeof(u);
tp = coder.typeof(p);

codegen topfun.m -args {tx, tp} -config:dll 
```

# php - 在php中验证一个人的名字

> ID：13606647
> 
> 赞同：0
> 
> 时间：2012-11-28T13:51:13.973
> 
> 标签：php, preg-match

> **可能重复：**
> [正则表达式验证名称](https://stackoverflow.com/questions/5105244/regex-to-validate-names)

我正在开发一个站点。我想验证用户名，即他们的名字和姓氏。名称还将包含像ó这样的字母

我现在验证使用

```
if(!preg_match("/[a-zA-Z]+$/",$value))
{
echo "Invalid characters";
} 
```

如何验证特殊字符？朋友们，我的意思是像 ó 这样的特殊字符。我希望这个名称可用。但是去掉@,#,$之类的字母

# bash - 无法登录 ftp 服务器

> ID：13606649
> 
> 赞同：0
> 
> 时间：2012-11-28T13:51:16.750
> 
> 标签：bash, shell, unix

任何人都知道会出现什么问题？

```
#!/bin/bash -x

HOST='192.163.3.3'
USER='ftpuser'
PASSWD='apple'
Logfile=a.log

while :; do
ftp -n -p -v $HOST < example.script >> a.log
grep -qF "Connected" a.log &&
grep -qF "File successfully transferred" a.log && break
done

quote USER $USER
quote PASS $PASSWD 
```

example.script 包含

```
 put example.txt 
```

运行后它给出

```
 grep: a.log: No such file or directory
 grep: a.log: No such file or directory
                .
                . 
```

example.script 和创建的 a.log 位于 /home 目录

a.log 包含

```
 Connected to 192.163.3.3.
 220---------- Welcome to Pure-FTPd [privsep] [TLS] ----------
 220-You are user number 9 of 50 allowed.
 220-Local time is now 14:38\. Server port: 21.
 220-This is a private system - No anonymous login
 220-IPv6 connections are also welcome on this server.
 220 You will be disconnected after 15 minutes of inactivity.
 Remote system type is UNIX.
 Using binary mode to transfer files.
 local: example.txt remote: example.txt
 530 You aren't logged in
 Passive mode refused.
 221-Goodbye. You uploaded 0 and downloaded 0 kbytes.
 221 Logout. 
```

为什么我无法登录？

```
 HOST='192.163.3.3'
  USER='ftpuser'
  PASSWD='apple'
  FILE='example.txt'
  Logfile=a.log

  ftp -n -p -v $HOST << SCRIPT_END >> a.log
  quote USER $USER
  quote PASS $PASSWD

  put $FILE
  SCRIPT_END 
```

有了这个它可以工作，但为什么？会有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:00:06.690

您的 FTP 守护程序拒绝被动模式文件传输（PASV 命令）。您必须在 Pure-FTPd 上启用被动模式传输。这个站点有关于如何做的很好的教程： [让被动 FTP 连接正确地通过防火墙工作](http://www.theserverpages.com/articles/servers/cpanel/tweaks/Getting_passive_FTP_connections_to_work_through_a_firewall_properly.html)- 向下滚动到设置 FTP 服务器（纯 FTPD）部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:01:41.097

它抱怨处于被动模式，我会从命令中删除 -p 或允许被动 FTP。

-p 使用被动模式进行数据传输。允许在防火墙阻止从外部世界连接回客户端计算机的环境中使用 ftp。要求 ftp 服务器支持 PASV 命令。由于使用 PORT 传输模式的安全问题，现在这是所有客户端（ftp 和 pftp）的默认设置。该标志仅出于兼容性目的而保留，不再起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:20:03.403

我通常会发现创建一个[netrc](http://publib.boulder.ibm.com/infocenter/pseries/v5r3/index.jsp?topic=/com.ibm.aix.commadmn/doc/commadmndita/tcpip_netrc.htm)文件并使用它来至少启动我的 FTP 会话可以让我解决很多编写 ftp 会话脚本的问题。大多数 ftp 程序为您提供了使用备用*netrc*文件的选项，因此您无需在`$HOME/.netrc`.

我相信你只需要这样一个班轮：

```
machine 192.163.3.3 login ftpuser password apple 
```

不幸的是，我无法测试它，因为我在任何地方都没有 ftp 设置。这里的一切都是`scp`// `ssh`。`sftp`这是一个[示例](http://docs.cray.com/books/2148_3.3/html-2148_3.3/c15akljgm.html) `.netrc`文件。

# vba - 为什么用户窗体在 VBA Excel 中运行时“没有响应”？

> ID：13606651
> 
> 赞同：7
> 
> 时间：2012-11-28T13:51:24.207
> 
> 标签：vba, excel, userform

我对 VBA Excel 很陌生，我只知道这个报告格式化任务需要的东西。

我几乎完成了我的任务，但是当我运行程序并启动进度时，即使它成功运行，GUI 也没有响应一分钟。我在这里分享我的代码，有什么问题吗？你能建议我任何最佳做法吗？我不希望它冻结，因为它会让我的经理看起来很糟糕。

为了清楚起见，“无响应”是指它在屏幕上冻结并在其窗口框架上显示“无响应”，当我单击它时，它会给出如下消息：

![在此处输入图像描述](../Images/d680c807e3bf0ab39bc54789f8fcc648.png)

*ps：我获得记录的工作表有 20997 行和 7 列，我在相同文件大小和 20997 行 23 列的另一张工作表上做了一些记录。我的 GUI 非常简单，它只有一个命令按钮来启动进度。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-15T12:26:28.640

您可以通过放置防止 excel 窗口冻结

```
DoEvents 
```

在你的循环里面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-28T15:24:20.883

发生这种情况是因为您的程序工作非常繁忙。例如，您`Sub TheLoop()`正在访问 20995 x 16 次单元格以在其上写入字符串。VBA 与 Excel 的交互很慢。

你可以做几件事来加快这个过程。

1.在运行程序之前禁用事件处理程序、屏幕更新和计算。在程序结束时再次恢复设置。

```
 'Disable'
   Application.EnableEvents = False
   Application.ScreenUpdating = False
   Application.Calculation = xlCalculationManual

   '......  Code'

   'Enable'
   Application.EnableEvents = True
   Application.ScreenUpdating = True
   Application.Calculation = xlCalculationAutomatic 
```

2.可以优化`Sub TheLoop`。不要立即在单元格上写入，而是将值写入数组中。数组充满值后，将数组的值分配给您需要的范围。例如：

```
Dim ResultValues() As String
Dim j As Long

ReDim ResultValues(2 To 20997, 1 To 3)

For j = 2 To 20997
    ResultValues(j, 1) = "New Defect"
    ResultValues(j, 2) = "3"
    ResultValues(j, 3) = "2"
Next j

With ThisWorkbook.Worksheets("myWorksheet")
    .Range(.Cells(2, 3), .Cells(20997, 5)) = ResultValues
End With 
```

**编辑：**

鉴于您修改的列之间的列只是文本或空单元格，您可以：

1.  将整个范围读入一个数组。
2.  然后以与当前修改单元格相同的方式修改数组。
3.  修改完成后，再次将整个矩阵转储到范围内。

例如：

```
Sub TheLoop()
Dim arrRangeValues() as Variant
Dim j as Long

arrRangeValues= Range("A2:V20997").Value2

For j = 2 To 20997
    arrRangeValues(j, 1) = "Defect" 'Cells(row_index , column_index)'
    arrRangeValues(j, 3) = "New Defect"
    arrRangeValues(j, 4) = "3" ' this one also might be empty'
    arrRangeValues(j, 5) = "2" ' this one also might be empty'

    arrRangeValues(j, 7) = "Name Surname"
    arrRangeValues(j, 8) = arrRangeValues(j, 7)
    arrRangeValues(j, 16) = arrRangeValues(j, 7)
    ...
    arrRangeValues(j, 10) = " http://SERVER_NAME:8888/PROJECT_NAME/ "
Next j

Range("A2:V20997").Value2 = arrRangeValues
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T13:52:14.577

好吧，我相信我找到了最好的解决方案。（一个） ：）

我没有在 TheLoop 子例程中使用 for 循环，而是删除了循环并将其更改如下。即使我没有禁用事件属性，当我将它与我的第一个代码进行比较时，它也变得非常快，现在它没有冻结。

```
Sub TheLoop()

    Cells(2, 1).Resize(20996) = "Defect"
    Cells(2, 3).Resize(20996) = "New Defect"
    Cells(2, 4).Resize(20996) = "3"
    Cells(2, 5).Resize(20996) = "2"
    Cells(2, 7).Resize(20996) = "Name Surname"
    Cells(2, 8).Resize(20996) = "Name Surname"
    Cells(2, 9).Resize(20996) = "FALSE"

    Cells(2, 10).Resize(20996) = " http://SERVER_NAME:8888/PROJECT_NAME/ "

    Cells(2, 12).Resize(20996) = "Software Quality"
    Cells(2, 13).Resize(20996) = "Unsigned"
    Cells(2, 14).Resize(20996) = "Software Quality"
    Cells(2, 15).Resize(20996) = "1"
    Cells(2, 16).Resize(20996) = "Name Surname"
    Cells(2, 18).Resize(20996) = "Software Quality"
    Cells(2, 20).Resize(20996) = "Development"
    Cells(2, 22).Resize(20996) = " TYPE YOUR MODULE'S NAME TO HERE"

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-17T23:39:52.747

我尝试过使用 Application.ScreenUpdating、Application.EnableEvents、Application.Calculation、DoEvents 和 Application.Wait (Now + TimeValue("0:00:10"))，不幸的是，最后的选项无法解决这个问题，看起来在 Microsoft 网页上说我，如果程序说我**“不响应”**是

1.  出于安全原因和
2.  因为太重或太复杂
3.  因为程序不会向用户发送任何即将要做的反馈。

在我的情况下，我尝试向用户展示和 MsgBox，最终为 Win10 操作系统和客户提供反馈，但是太**无聊**了，用户点击是，是的，是的，是的，好的，好的，好的，好的和在其他论坛上查看有关 MsgBox 的 VBA（自动关闭），他们建议我使用该代码`CreateObject("WScript.Shell").PopUp "Please Wait", 1`和 tada！我将停止看到“未响应消息”，如果用户不按任何单击或按钮来禁用消息，请不要担心程序将在消息关闭后 1 秒后执行，在我的情况下，这解决了我的问题很多，希望能帮到你，祝你好运。

# sql - sqlite3 中的日期处理令人困惑。

> ID：13606654
> 
> 赞同：3
> 
> 时间：2012-11-28T13:51:31.040
> 
> 标签：sql, c, database, sqlite

我来自非数据库背景。我创建了一个具有字段数据类型 TEXT 的表。

```
dataF TEXT 
```

**插入：**

已插入三个记录的值：

```
'842-2-4'
'842-2-5'
'842-2-6' 
```

**选择：**

现在尝试根据日期获取记录。

```
... where dateF between '842-2-4' and '842-2-10' 
```

它失败。

然而，

```
... where dateF between '842-2-4' and '842-2-8' 
```

检索所有 3 条记录。

我究竟做错了什么 ？为什么第一条语句失败？

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T13:56:38.430

因为您要比较的是字符串而不是日期。计算机不知道这些是日期。您必须存储为日期并进行日期比较或实现自己的逻辑来分析字符串。

简而言之，它认为 10 中的 1 小于您的值，而不是 10 多。这是字符串比较，而不是日期。

尽管 sqlite 不支持日期类型，但它确实具有处理它们的功能。看这里：

[http://www.sqlite.org/lang_datefunc.html](http://www.sqlite.org/lang_datefunc.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:03:30.223

比较字符串时，从左到右比较值...

由于一个字符串比另一个字符串短，所以你有点比较这个......

```
'842-2-4'
'842-2-1' 
```

好吧，没有什么是`>= '842-2-4'`AND `<= '842-2-1'`。

*   *因为`'842-2-1'`来之前`'842-2-4'`。*
*   *并且，因此，也`'842-2-10'`出现在之前`'842-2-4'`。*

*   *就像`'Squiggled'`以前一样`'Squiggly'`*

*   *和`'xxx-y-az'`以前一样`'xxx-y-z'`*

要根据需要进行比较，请确保所有日期都用`0`'s 填充。

```
BETWEEN '0842-02-04' AND '0842-02-10' 
```

但这只有在您也填充了表格中的值***之后***才会起作用。

**编辑**：

另外，请注意，这*假设*您的格式是`YYYY-MM-DD`. 当一个字符串从左到右进行比较时，你*必须*在左边有最高的幅度值。

*（这意味着您**不能**使用`YYYY-DD-MM`并且仍然让本机字符串比较按您希望的方式进行。）*

# java - 使用 handler/runnable 延迟方法的重新提交

> ID：13606656
> 
> 赞同：0
> 
> 时间：2012-11-28T13:51:33.770
> 
> 标签：java, android, handler, runnable, postdelayed

我想每 10 秒运行一次 getVehicles() 方法，我有以下代码：

```
Handler vehiclehandler = new Handler();
    final Runnable vehiclerunnable = new Runnable() {   
        public void run() {
            getVehicles(null);
            vehiclehandler.postDelayed(this, 10000);
        } 
    }; 
```

然而目前它什么也没做，我已经四处寻找，无法弄清楚。

我是 android 新手，以前从未使用过处理程序，只有一个可运行的对象来告诉“runOnUiThread”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:54:49.403

你跑了吗

```
vehiclehandler.post(vehiclerunnable) 
```

至少一次？

我的意思是在 Runnable 之外

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T15:45:23.670

这是对您的代码的调整，将使其正常运行

```
Handler vehiclehandler = new Handler();
    vehiclehandler.postDelayed(new Runnable(){
            public void run(){
                    getVehicles(null);
            }
        },10000); 
```

但这只会在执行之前延迟您的代码。如果您想一遍又一遍地重复该过程，则必须使用 Timer，例如：

```
private static Timer timer = new Timer();  
timer.scheduleAtFixedRate(new mainTask(), 0, 10000);
private class mainTask extends TimerTask
    { 
        public void run() 
        {
            getVehicles(null);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:18:17.277

```
final Handler lHandler = new Handler();
Runnable lRunnable = new Runnable() {

    @Override
    public void run() {
        // do stuff
        lHandler.postDelayed(this, 10000);
    }
};
lHandler.post(lRunnable); 
```

# c# - 为 SQL Server 数据库创建用户并通过 C#.net 应用程序访问

> ID：13606661
> 
> 赞同：0
> 
> 时间：2012-11-28T13:51:46.393
> 
> 标签：c#, .net, sql-server, sql-server-2008

我已经为 SQL Server 数据库创建了用户。它被创建得很好。

我的问题是，当我通过执行以下代码通过应用程序访问时，它不会切换到我指定为的用户

```
exec as user='myuser'
ALTER USER myuser WITH DEFAULT_SCHEMA=maindb
EXEC sp_addrolemember N'db_owner', N'myuser' 
```

我已经将查询运行为

```
DbCommand command = ds.CreateCommand();
command.CommandText = "exec as user='myuser'";
command.CommandType = CommandType.Text;
command.ExecuteNonQuery(); 
```

来自 C# 代码

等待您的宝贵回复和意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:00:17.187

是的，这是意料之中的。连接字符串包含连接到服务器所需的凭据。并且通常在应用程序和数据库之间有一个连接字符串来优化资源并利用连接池等。

不同的用户在系统中可能有不同的权限，但这可以通过授权来处理，而不是连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:18:24.463

[执行作为条款](http://msdn.microsoft.com/en-us/library/ms188354.aspx)

> EXECUTE AS 子句中指定的用户名或登录名必须分别作为 sys.database_principals 或 sys.server_principals 中的主体存在，否则创建或更改模块操作将失败。此外，创建或更改模块的用户必须对主体具有 IMPERSONATE 权限。

你满足这些条件吗？

# jquery - jQuery - 单击菜单项时停止手风琴菜单关闭

> ID：13606666
> 
> 赞同：3
> 
> 时间：2012-11-28T13:52:00.133
> 
> 标签：jquery

单击子菜单链接时，如何阻止手风琴菜单 ul.sub-menu 关闭？

单击父项时手风琴会打开罚款，但是当单击其下方级别中的子菜单项时，它会再次关闭。

这是我的 HTML：

```
<ul class="menu">
  <li><a href="#">parent 1</a>
        <ul class="sub-menu">
            <li><a href="#">1st child item</a></li>
        </ul>
  </li>
    <li><a href="#">parent 2</a>
    <ul class="sub-menu current-menu-parent">
        <li><a href="#">2nd child item</a></li>
        <li class="current-menu-item"><a href="#">3rd child item</a></li>
    </ul>
  </li>
  <li><a href="#">parent 3</a>
        <ul class="sub-menu">
            <li><a href="#">4th child item</a></li>
        </ul>
  </li>    
</ul>​​​​​​​​ 
```

这是我的jQuery：

```
jQuery(function($) {
    $(".menu > li").children("a").attr('href', 'javascript:void(0)');
    $('.sub-menu').hide();  
    $('.current-menu-parent').show();    
    $('.menu > li').click(function() {
        $(this).find('ul').slideToggle('slow');
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:57:35.897

**编辑**：

代替`return`语句，用于`event.stopPropagation()`阻止事件传播到父级。

```
$('.menu li a').click(function(e) {
    if(!$(this).closest('ul').hasClass('menu')) e.stopPropagation();
}); 
```

**演示**：http: [//jsfiddle.net/qNyR6/1/](http://jsfiddle.net/qNyR6/1/)

* * *

添加以下代码将起作用：

```
$('.menu li a').click(function() {
    return $(this).closest('ul').hasClass('menu');
}); 
```

这将确保您的`<a>`标签上的点击不会传播到`<li>`导致菜单的父`slideToggle`级（即折叠，因为它已经处于展开状态）

**演示：http:** [//jsfiddle.net/qNyR6/](http://jsfiddle.net/qNyR6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:23:57.623

手风琴送给你，

**HTML：**

```
<ul class="menu">
  <li><a href="javascript:void(0)">parent 1</a>
        <ul class="sub-menu">
            <li><a href="#">1st child item</a></li>
        </ul>
  </li>
    <li><a href="javascript:void(0)">parent 2</a>
    <ul class="sub-menu current-menu-item">
        <li><a href="#">2nd child item</a></li>
        <li><a href="#">3rd child item</a></li>
    </ul>
  </li>
  <li><a href="javascript:void(0)">parent 3</a>
        <ul class="sub-menu">
            <li><a href="#">4th child item</a></li>
        </ul>
  </li>    
</ul>​​​​​​​​ 
```

**CSS：**

```
<style>
.sub-menu{
    display:none;
}
.current-menu-item{
    display:block;
}
</style> 
```

**JS：**

```
rel = 0;

$('.sub-menu').hover(function(){ // findind mouse postion
        rel = 1; // if mouse on submenu
    }, function(){ 
        rel = 0;  if mouse out submanu
});
$('.menu > li').live("click",function(){

        if(!$(this).hasClass("active")){ // if not already opened
            $('.sub-menu').slideUp();    // hide all other submenu
            $('.sub-menu',this).slideDown();  // show which your clicked
            $(".menu > li").remove('active');  //  remove all active class in li
            $(this).addClass('active'); //adding active class which your clicked li
        }
        else{
            if(rel==0){
                $('.sub-menu').slideUp(); // if clicked already opend parent that will close
                $(this).removeClass('active'); // remove all active class
            }
            else{

            }
        }
}); 
```

# java - 如何在java中生成随机整数？

> ID：13606667
> 
> 赞同：0
> 
> 时间：2012-11-28T13:52:01.410
> 
> 标签：java, random

如何生成随机整数然后打印它们？

我尝试了以下代码，但无法编译。

```
 import java.util.Random;
    class Random
    {
        Random rand = new Random(); 
        int num=rand.nextInt(40);
        System.out.println(num);
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T13:53:57.640

您应该使用唯一的类名，除非您想`Random`通过它们的完整包标题来引用不同的 s。

```
import java.util.Random;

public class MyRandom {
   public static void main(String args[]) {
      Random rand = new Random(); 
      int num = rand.nextInt(40);
      System.out.println(num);
   }
} 
```

将以上内容另存为`MyRandom.java`，然后执行；

```
javac MyRandom.java
java MyRandom 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T13:56:46.400

你可以尝试这样的事情： -

```
 Random randomGenerator = new Random();
for (int idx = 1; idx <= 10; ++idx){
  int randomInt = randomGenerator.nextInt(100);
  log("Generated : " + randomInt);
} 
```

# ruby-on-rails - Rails 将 txt 文件导入数据库

> ID：13606673
> 
> 赞同：3
> 
> 时间：2012-11-28T13:52:16.417
> 
> 标签：ruby-on-rails, database, file, import

我怎样才能将这些值翻录到数据库表中？

首先，我只是把它放在那里，而不是让你推断：我是一个 ROR 菜鸟。我正在设计一个填充数据库的应用程序——此时（SQLite）——允许用户对这些值执行 crud，并以与原始文件相同的格式导出文件。这种格式就是这样，并在文档结束时重复。椭圆代表上一个音调和下一个音调。

```
...

[Tone27]                            
Atone = 707.3                        
Btone = 746.8                        
Btonelength = 3                        
Btonedebounce = 1                    
Description = Fire Department 1                
mp3_Emails = email@address.com,email2@address.com,email3@address.com          
amr_Emails = email2@textmessaging.com,email1@textmessaging.com        
alert_command = c:\test.bat                
post_email_command = c:\test2.bat            
radio_frequency = 154.475    
exclude_from = 13:25                        
exclude_to = 13:35                        
exclude_emails = email2@textmessaging.com,email2@address.com

... 
```

现在，问题是，在 Rails 中，将这些值放入 db 表中的最简单/最合适的方法是什么？我知道我必须编写一个自定义解析器，但对 ruby​​/rails 不够精通，无法有效地完成此任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:11:46.443

**自定义解析器**

您需要逐行读取文件并读出要保存的属性。它可能看起来像这样：

```
file = File.new('example.txt', 'r')
while (line = file.gets)
  if line.match(/^\W[a-zA-Z0-9]*\W/) # practice your regex at rubular.com
    # create the object here
  end
  if line.match(/.*=.*/)
    pieces = line.split('=')
    key = pieces[0].strip
    value = pieces[1].strip
    # add this to the object here
  end
end 
```

我建议抓住每一行，修剪空白（如果有的话），然后在 = 符号上拆分，然后再次修剪。那里有你的键/值对。

每个 [Tone##] 都将是一个新对象，因此您需要将其计划到您的一个或多个循环中。

**高级概述**

首先，您应该使用迁移设计数据库表并创建模型来支持这些表。

接下来，您需要解析文本文件以创建具有刚刚解析的属性和值的对象。这一步是您将遇到的最纯粹的 ruby​​（这里的 Rails 没有太多帮助）。这将需要一个自定义解析器在文本文件中查找您想要提取的特定值。

一旦您使用从文本文件中解析出来的属性和值创建了对象，您将希望将所有这些对象保存到数据库中。

我建议在深入研究之前构建一个示例或演示应用程序。那里有教程，您可以在几个小时内以您的经验水平启动并运行一个简单的应用程序。

这是您需要完成的工作的高级概述，每个步骤很可能会导致更具体的 StackOverflow 问题。

# facebook - 使用 Graph API 获取 Facebook 页面 Photostream

> ID：13606674
> 
> 赞同：2
> 
> 时间：2012-11-28T13:52:15.890
> 
> 标签：facebook, facebook-graph-api

有没有办法使用 Graph API 获取 Facebook 页面照片流？例如可口可乐页面的照片流在：[https](https://www.facebook.com/cocacola/photos_stream) ://www.facebook.com/cocacola/photos_stream 。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-28T15:26:04.940

可能的连接：(?metadata=1)

```
 "metadata": {
      "connections": {
         "picture": "https://graph.facebook.com/cocacola/picture",
         "feed": "https://graph.facebook.com/cocacola/feed",
         "posts": "https://graph.facebook.com/cocacola/posts",
         "tagged": "https://graph.facebook.com/cocacola/tagged",
         "statuses": "https://graph.facebook.com/cocacola/statuses",
         "links": "https://graph.facebook.com/cocacola/links",
         "notes": "https://graph.facebook.com/cocacola/notes",
         "photos": "https://graph.facebook.com/cocacola/photos",
         "albums": "https://graph.facebook.com/cocacola/albums",
         "events": "https://graph.facebook.com/cocacola/events",
         "videos": "https://graph.facebook.com/cocacola/videos",
         "questions": "https://graph.facebook.com/cocacola/questions",
         "offers": "https://graph.facebook.com/cocacola/offers",
         "milestones": "https://graph.facebook.com/cocacola/milestones",
         "global_brand_children": "https://graph.facebook.com/cocacola/global_brand_children"
      }, 
```

如果您想在他们的信息流中查找照片，为什么不使用 /posts 并循环查找带有图片的帖子呢？

# c# - ASP.NET Web API 部分响应 Json 序列化

> ID：13606675
> 
> 赞同：3
> 
> 时间：2012-11-28T13:52:17.747
> 
> 标签：c#, asp.net-mvc, json, asp.net-web-api, asp.net-mvc-partialview

我正在实现一个支持部分响应的 Web API。

```
/api/users?fields=id,name,age 
```

给定类用户

```
[JsonObject(MemberSerialization.OptIn)]
public partial class User
{
  [JsonProperty]
  public int id { get; set; }

  [JsonProperty]
  public string firstname { get; set; }

  [JsonProperty]
  public string lastname { get; set; }

  [JsonProperty]
  public string name { get { return firstname + " " + lastname; } }

  [JsonProperty]
  public int age { get; set; }
} 
```

Json 格式化程序在序列化所有属性时效果很好，但我无法在运行时修改它以告诉它忽略某些属性，具体取决于查询参数“字段”。

我正在使用 JsonMediaTypeFormatter。

我已经按照[http://tostring.it/2012/07/18/customize-json-result-in-web-api/](http://tostring.it/2012/07/18/customize-json-result-in-web-api/)来自定义格式化程序，但我找不到任何关于如何强制格式化程序的示例忽略一些属性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T15:12:52.213

创建自己的[`IContractResolver`](http://james.newtonking.com/projects/json/help/html/T_Newtonsoft_Json_Serialization_IContractResolver.htm)来告诉 JSON.NET 哪些属性需要序列化。官方文档中有一个[示例，您可以从中汲取灵感](http://james.newtonking.com/projects/json/help/index.html?topic=html/ContractResolver.htm)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-09T17:26:59.273

只是添加到这里已经有的回复；我找到了一个为你做这个的 nuget 包

[WebApi.PartialResponse](https://www.nuget.org/packages/WebApi.PartialResponse/)

Git 中心源代码：
[https ://github.com/dotarj/PartialResponse](https://github.com/dotarj/PartialResponse)

它本质上包装了上面讨论的格式化程序，因此您只需像这样配置它：

```
GlobalConfiguration.Configuration.Formatters.Clear();
GlobalConfiguration.Configuration.Formatters.Add(new PartialJsonMediaTypeFormatter() { IgnoreCase = true }); 
```

然后，您可以`?fields=<whatever>`在请求中指定，它会返回仅指定了那些字段的模型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T02:38:50.247

您还可以通过添加与属性同名的布尔方法来有条件地序列化属性，然后在方法名称前加上 ShouldSerialize。方法的结果决定了属性是否被序列化。如果该方法返回 true，则该属性将被序列化，如果它返回 false，则该属性将被跳过。

```
public class Employee
{
  public string Name { get; set; }
  public Employee Manager { get; set; }

  public bool ShouldSerializeManager()
  {
      // don't serialize the Manager property if an employee is their own manager
      return (Manager != this);
  }
} 
```

# colors - 如何将 octopress 代码块颜色更改为 github 之类的颜色？

> ID：13606677
> 
> 赞同：6
> 
> 时间：2012-11-28T13:52:20.760
> 
> 标签：colors, github, sass, codeblocks, octopress

章鱼（深色）
![一只忙碌的猫](../Images/40273fab02830bb90a25642b50fe55c5.png)

八爪鱼（轻） ![一只忙碌的猫](../Images/649f27439c7b21cea5bfe398ffc6c1cc.png)

Github
![一只忙碌的猫](../Images/dfcb832bcf1c813bd27abcf92023b554.png)

Octopress 默认颜色不是很好，如何将代码块的颜色更改为类似 Github 的颜色？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-09T16:14:13.770

我有同样的问题，但我希望在我的帖子中使用 Twilight 配色方案。

您可以使用 kramdown 和 CodeRay 代替 rdiscount，这将让您选择与代码片段中的每个代码对象关联的颜色。我写了一篇关于如何做到这一点的博客文章：

[http://blog.alestanis.com/2013/02/04/octopress-and-the-twilight-color-scheme/](http://blog.alestanis.com/2013/02/04/octopress-and-the-twilight-color-scheme/)

**编辑：**

[我在这里](https://github.com/pie4dan/CodeRay-GitHub-Theme)找到了 coderay 的 GitHub 主题。

# r - 通过复制R中其他行的内容来填充NA

> ID：13606683
> 
> 赞同：0
> 
> 时间：2012-11-28T13:52:51.113
> 
> 标签：r, duplicates, na

我有一个类似于下表的数据集。我想要做的是将每个 ID 的 NA 替换为相应 ID 中的可用数据，除了我想要预测的结果变量。例如，对于 ID 1，我想要复制 1990 年到 1991、1992、1993 年的信息。对于 ID 2，我应该复制从 1992 年到 1990、1991 和 1993 年的信息。ID 代表一个集群，比如村庄。最终我想预测失踪年份的结果。我想在 R 中做到这一点。

```
 ID YeStart Author YEAR   Lat    Long Outome
     1    1990  Goroo 2012 23.45 -16.718     20
     1    1991   <NA>   NA    NA      NA     30
     1    1992   <NA>   NA    NA      NA     NA
     1    1993   <NA>   NA    NA      NA     NA
     2    1990   <NA>   NA    NA      NA      2
     2    1991   <NA>   NA    NA      NA     NA
     2    1992 Berthe 2012 20.45 -16.718     NA
     2    1993   <NA>   NA    NA      NA     NA
     3    1990   <NA>   NA    NA      NA     NA
     3    1991 Berthe 2012 40.45 -16.718     NA
     3    1992   <NA>   NA    NA      NA     NA
     3    1993   <NA>   NA    NA      NA     50 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:34:23.210

我很确定这个问题的答案已经在网站的某个地方了。但是您可以使用函数`merge`和`complete.cases`.

```
d <- read.table(text="ID YeStart Author YEAR   Lat    Long Outome
     1    1990  Goroo 2012 23.45 -16.718     20
     1    1991   <NA>   NA    NA      NA     30
     1    1992  Goroo 2012 23.45 -16.718     NA
     1    1993   <NA>   NA    NA      NA     NA
     2    1990   <NA>   NA    NA      NA      2
     2    1991   <NA>   NA    NA      NA     NA
     2    1992 Berthe 2012 20.45 -16.718     NA
     2    1993   <NA>   NA    NA      NA     NA
     3    1990   <NA>   NA    NA      NA     NA
     3    1991 Berthe 2012 40.45 -16.718     NA
     3    1992   <NA>   NA    NA      NA     NA
     3    1993   <NA>   NA    NA      NA     50", header=TRUE)

d1 <- d[c('ID', 'YeStart', 'Outome')]
d2 <- d[! names(d) %in% c('Outome', 'YeStart')]
merge(d1, unique(d2[complete.cases(d2), ]))

#    ID YeStart Outome Author YEAR   Lat    Long
# 1   1    1990     20  Goroo 2012 23.45 -16.718
# 2   1    1991     30  Goroo 2012 23.45 -16.718
# 3   1    1992     NA  Goroo 2012 23.45 -16.718
# 4   1    1993     NA  Goroo 2012 23.45 -16.718
# 5   2    1990      2 Berthe 2012 20.45 -16.718
# 6   2    1991     NA Berthe 2012 20.45 -16.718
# 7   2    1992     NA Berthe 2012 20.45 -16.718
# 8   2    1993     NA Berthe 2012 20.45 -16.718
# 9   3    1990     NA Berthe 2012 40.45 -16.718
# 10  3    1991     NA Berthe 2012 40.45 -16.718
# 11  3    1992     NA Berthe 2012 40.45 -16.718
# 12  3    1993     50 Berthe 2012 40.45 -16.718 
```

# listview - 从 Listview Control 复选框获取通知代码

> ID：13606686
> 
> 赞同：4
> 
> 时间：2012-11-28T13:52:55.397
> 
> 标签：listview, user-interface, mfc, listviewitem

我已经实现了一个带有`LVS_EX_CHECKBOXES | LVS_EX_INFOTIP`样式的 ListView 控件。我已经注册了使用列表视图控件项获取通知的功能。

```
BEGIN_MESSAGE_MAP(Class, ParentClass)
ON_NOTIFY(LVN_GETINFOTIP,IDC_LIST2,OnClickCheckBox)
END_MESSAGE_MAP() 
```

我的问题是，当您选择/取消选择 ListView 控件项目中的复选框时，将向父级发送什么通知代码。

需要编写什么代码来处理 OnClickCheckBox() 函数中的复选框选择？

请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:47:42.550

您收到 item-changed-message 并且您必须找出复选框状态是否已更改。

在消息映射中：

`ON_NOTIFY_REFLECT(LVN_ITEMCHANGED, &CMyListView::OnLvnItemchanged)`

事件处理程序：

```
void CMyListView::OnLvnItemchanged(NMHDR *pNMHDR, LRESULT *pResult)
{
    LPNMLISTVIEW pNMLV = reinterpret_cast<LPNMLISTVIEW>(pNMHDR);

    if(pNMLV->uNewState == 8192) // Item checked
    {
        ...
    }
    else if(pNMLV->uNewState == 4096) // Item unchecked
    {
        ...
    }

    *pResult = 0;
} 
```

# c++ - 工具完全支持 uml 2.0

> ID：13606693
> 
> 赞同：0
> 
> 时间：2012-11-28T13:53:21.507
> 
> 标签：c++, uml

我最近在我的 C++ 项目中使用[了 starUML](http://staruml.sourceforge.net/en/)。但是我发现支持UML 2.0 的所有特性并没有那么强大。你能推荐
任何基于 Windows 的免费工具吗？我在 Ubuntu 上编码，但在 Windows 机器上绘制 UML。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:16:32.650

请参阅此处并选择您喜欢的：[http ://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools](http://en.wikipedia.org/wiki/List_of_Unified_Modeling_Language_tools)

您还可以使用基于 Web 的工具，例如[http://yuml.me/](http://yuml.me/)

# python - 其他：从子表到主表的不同范围

> ID：13606699
> 
> 赞同：-1
> 
> 时间：2012-11-28T13:53:29.727
> 
> 标签：python, google-apps-script

有一个**主**工作表，需要由*超过 75* 个具有不同值的**子工作表填充。**

**编辑：** 情况略有变化。

```
 'AGENTS'
  Agent Name  Sheet ID
1 Tom         Link to Tom's sheet
2 John        Link to John's sheet
3 Mary        Link to Mary's sheet
etc. 
```

链接到：

```
'MASTER SHEET'
        A                    C                       D
    Agent Name  Value 1 from Agent's Sheet Value 2 from Agent's Sheet
1                           D46                     D53
2                           D46                     D53
3                           D46                     D53 
```

这也是基于 1 个单元格，它指的是第几周。因此，如果 Master 上的单元格 F11 为“39”，它将从该特定周的代理表中提取数据。

我已经*尝试*将代码更改为：

```
var agentNames = SpreadsheetApp.getActive().getSheetByName('AGENTS').getRange('A2:A35').getValues();//these are the agent names
var agentID = SpreadsheetApp.getActive().getSheetByName('AGENTS').getRange('B2:B35').getValues();//here are their sheets
var agentSheets = SpreadsheetApp.openById(agentSheets[i][0]);
var array1 = [];
var array2 = [];
var array3 = [];
var masterSheet = SpreadsheetApp.getActive().getSheetByName('MASTER');
var sheetName =   SpreadsheetApp.openById('B2') + 'F2' + (masterSheet.getRange('F11').getValue());
var temp;

for (var i = 0; i < numAgents; i++) {
temp = SpreadsheetApp.openById(agentSheets[i][1]).getSheetByName(sheetName).getRange('D46:D53').getValues();
array1.push([agents[i][0]]);
array2.push([temp[0][0]]);
array3.push([temp[7][0]]);
    }

masterSheet.getRange(2, 1, numAgents, 1).setValues(array1);//Agent names
masterSheet.getRange(2, 3, numAgents, 2).setValues(array2);
masterSheet.getRange(2, 4, numAgents, 2).setValues(array3);

 } 
```

JavaScript 会是这个问题的下一个最佳解决方案吗？当脚本运行 75 张或更多张时，加载时间似乎很长。欢迎任何关于如何进行的建议或建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T06:51:17.747

7我相当简单的建议是，尽可能尝试分批进行获取和设置，而不是在循环中。所以通常最好构造一个 Javascript 数组，并一次性设置它。以下是我对一些代码的猜测：

```
function consolidate() {
  var agents = [['John', 'sheet_id'],
                ['Mary', 'sheet_id'],
                ['Tom', 'sheet_id']];
  var numAgents = agents.length;
  var array1 = [];
  var array2 = [];
  var array3 = [];
  var array4 = [];
  var masterSheet = SpreadsheetApp.getActive().getSheetByName('MASTER');
  var sheetName = 'WEEK ' + (masterSheet.getRange('A1').getValue());
  var temp;

  for (var i = 0; i < numAgents; i++) {
    temp = SpreadsheetApp.openById(agents[i][1]).getSheetByName(sheetName).getRange('D41:D49').getValues();
    array1.push([agents[i][0]]);
    array2.push([temp[4][0], temp[0][0]]);
    array3.push([temp[7][0], temp[8][0]]);
    array4.push([temp[6][0]]);
  }

  masterSheet.getRange(2, 1, numAgents, 1).setValues(array1);
  masterSheet.getRange(2, 4, numAgents, 2).setValues(array2);
  masterSheet.getRange(2, 9, numAgents, 2).setValues(array3);
  masterSheet.getRange(2, 14, numAgents, 1).setValues(array4);
} 
```

# objective-c - Xcode：“重构为新的 Objective-C 语法”和圆括号

> ID：13606704
> 
> 赞同：2
> 
> 时间：2012-11-28T13:53:39.650
> 
> 标签：objective-c, xcode, automated-refactoring

我想知道为什么 Xcode 重构这个

```
[self.aDictionary objectForKey:@"aKey"] 
```

对此

```
(self.aDictionary)[@"aKey"] 
```

而不仅仅是

```
self.aDictionary[@"aKey"] 
```

那也应该可以正常工作，还是有什么我看不到的？

英戈。

# html - WordPress中的内容过滤器删除

> ID：13606713
> 
> 赞同：1
> 
> 时间：2012-11-28T13:54:01.280
> 
> 标签：html, wordpress

在我的自定义 WordPress 主题中显示帖子内容时，我发现`$post->post_content`没有保留任何回车或格式，所以我查看了`the_content`过滤器：

```
<?php echo apply_filter('the_content', $post->post_content); ?> 
```

我承认我仍然对 WordPress 中的钩子有所了解，而且我还没有找到一个很好的教程来理解它们，但是这种处理我的文本的方法有非常意想不到的结果。例如，它保留`<p>`在 WordPress 文本编辑器所见即所得中自动插入的标签，但它不添加任何`<h1>`标签。更奇怪的是，在实际所见即所得中，当我翻到 HTML 时，它似乎忽略了`<p>`标签。

在 Wysiwyg 中编写了文本，并从下拉菜单中为顶行提供了 Heading1 的格式，以下是 Wysiwyg 的 HTML 选项卡显示的内容：

```
<h1>Text Heading</h1>
An example paragraph. 
```

`the_content`这是使用钩子过滤器实际打印到站点的内容：

```
Text Heading
<p>An example paragraph.</p> 
```

不用说，这种行为使得文本样式变得非常困难。这是经验丰富的 WordPress 开发人员的预期行为吗？

# c# - 检查数据库的空行C#

> ID：13606718
> 
> 赞同：0
> 
> 时间：2012-11-28T13:54:27.483
> 
> 标签：c#, database, login

我已将我的代码（使用 Visual Studio C#）连接到我的 Microsoft Access 数据库。我的应用程序能够在数据库中添加和删除用户。我的数据库只允许两个用户（管理员和用户）。

假设管理员已经从数据库中删除了用户......我会让应用程序在检测到数据库中只有一个用户后将用户重定向到注册页面。如何使用我的代码进行检查？

我已经在我的代码中添加了一条 SQL 语句，我可以再添加一条吗？我如何检查空列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:11:28.577

```
private void Login_Load(object sender, EventArgs e)
{      
    // you can here add validation 
    //by using this sql: select count(*) from [User]

      LoginUsernameTextBox.Focus();
    } 
```

我不推荐使用 linq，因为它不是很灵活而且工作速度很慢，你应该学习如何用 ado 编写，以防以后遇到复杂的需求。但是您已经完成了查询部分，并且可以使用您之前编写的方法，因此它将如下所示：

```
User[] somethin = GetAllUsers();
if(somethin.Count==1){
//now you have one user record in your database
} 
```

# c# - 在自定义代码活动中处理取消请求

> ID：13606721
> 
> 赞同：1
> 
> 时间：2012-11-28T13:54:35.793
> 
> 标签：c#, tfs, tfsbuild

我在自定义代码活动中有一个长时间运行的过程。如果我在此活动运行时尝试停止构建，则会返回错误：

> TFS215104：无法停止构建 XXXXXXXXXXXXX：它没有响应工作流取消请求。

然后在构建日志中我看到：

> 无法停止构建。详细信息：操作未在 00:00:59.9843747 完成。
> 
> 无法取消工作流。代理需要重新启动。详细信息：操作未在分配的 00:01:00 超时内完成。分配给此操作的时间可能是较长超时的一部分。
> 
> 服务“XXXXXXX - 控制器”：构建“XXXXXXXXXX”已停止。详细信息：构建已取消。

此取消请求如何使其恢复到我的活动？我了解如何使用后台进程，但我不确定如何在我的代码中捕获取消请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T18:50:50.117

您是否使用[CodeActivity](http://msdn.microsoft.com/en-us/library/system.activities.codeactivity.aspx)类作为您的基础？

根据[this](http://blogs.msdn.com/b/patcarna/archive/2009/12/04/introduction-to-windows-workflow-4-0.aspx)，您可以尝试[AsyncCodeActivity](http://msdn.microsoft.com/en-us/library/system.activities.asynccodeactivity.aspx)，因为它支持取消。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T19:55:56.607

我阅读的所有博客似乎都展示了如何使用 CodeActivity 而不是 AsyncCodeActivity。这是一个例子：

```
[BuildActivity(HostEnvironmentOption.All)]
    public partial class SourceCodeAnalysisAsync : AsyncCodeActivity
    {
        private CodeActivityContext _context;
        private bool _continue = true;

        protected override IAsyncResult BeginExecute(AsyncCodeActivityContext context, AsyncCallback callback, object state)
        {
            _context = context;
            var  doSomethingDelegate = new Action(DoSomething);
            context.UserState = doSomethingDelegate;
            return doSomethingDelegate.BeginInvoke(callback, state);
        }

        protected override void Cancel(AsyncCodeActivityContext context)
        {
            base.Cancel(context);
            _continue = false;
        }

        protected override void EndExecute(AsyncCodeActivityContext context, IAsyncResult result)
        {
            var doSomethingDelegate = (Action)context.UserState;
            doSomethingDelegate.EndInvoke(result);
        }

        private void DoSomething()
        {
            if (File.Exists(@"C:\test.txt"))
            {
                File.Delete(@"C:\test.txt");
            }

            int i = 0;
            do
            {
                File.AppendAllText(@"C:\test.txt", string.Format("do something {0}\r\n", i));
                Thread.Sleep(1000);
                i++;
            } while (_continue && i < 30);
        }
    } 
```

# c++ - 在三元搜索树中搜索（不使用）通配符

> ID：13606733
> 
> 赞同：0
> 
> 时间：2012-11-28T13:55:11.207
> 
> 标签：c++, recursion, ternary-tree, ternary-search-tree

我想从“三元搜索树”库（[sourceforge](http://sourceforge.net/projects/ternary/)和[http://code.google.com/p/ternary-search-tree/](http://code.google.com/p/ternary-search-tree/)）中修改递归函数。默认行为是在三元搜索树中搜索与指定通配符字符串匹配的所有字符串。即如果我搜索“KE*”，在树中拥有“KEY”、“KE1”、“KE2”会找到所有条目。但我需要相反的行为 - 在三元搜索树（包含通配符）中搜索与指定字符串匹配的所有条目。即如果我搜索“KEY”，在树中有“KE*”、“KEY”、“K*”应该会找到所有条目。

树/节点定义如下：

```
typedef struct TstNode {
    TstNode( char c ) : splitChar(c), left(0), right(0), mid(0){
    }
    char splitChar;
    TstTree left, right;
    union {
        TstTree mid;
        int index;
    };
} tstNode; 
```

以及具有默认行为的函数：

```
template <class Object>
void TernarySearchTree<Object>::partialMatchSearch(TstTree tree, const char *key)
{
    if (!tree) return;

    // partial match left
    if (*key == '?' || *key == '*' || *key < tree->splitChar)
    {
        partialMatchSearch( tree->left, key );
    }
    // partial match middle
    if (*key == '?' || *key == '*' || *key == tree->splitChar)
    {
        if ( tree->splitChar && *key )
        {
            if ( *key == '*' )
            {
                partialMatchSearch( tree->mid, key );
            }
            else
            {
                partialMatchSearch( tree->mid, key+1 ); // search next pattern char
            }
        }
    }
    if ( ( *key == 0 ||  *key == '*' ) && tree->splitChar == 0 )
    {
        pmVectorPtr->add( tree->index );
    }

    if (*key == '?' || *key == '*' || *key > tree->splitChar)
    {
        partialMatchSearch( tree->right, key );
    }
} 
```

pmVectorPtr 是一个指向 int 向量的指针，函数 get 以根元素和 searchkey 作为参数调用。我已经尝试过适应它，但还无法理解它。我自己的代码：

```
template <class Object>
void TernarySearchTree<Object>::partialMatchSearchInverted(TstTree tree, const char *key)
{
    if (!tree) return;

    if((tree->splitChar == '*') && ( *key != 0 )){
        partialMatchSearchInverted( tree, key+1 );
    }

    if( *key != 0 ){
        if (*key < tree->splitChar){
            partialMatchSearchInverted( tree->left, key );
        }
        if (*key > tree->splitChar){
            partialMatchSearchInverted( tree->right, key );
        }
    }
    if ((*key == tree->splitChar) || (tree->splitChar == '*')){
        if ( tree->splitChar || *key ){
            partialMatchSearchInverted( tree->mid, key+1 ); // search next pattern char
        }
    }
    if ( ( *key == 0 ) && ( tree->splitChar == 0 ) ){
        pmVectorPtr->add( tree->index );
    }
} 
```

我已经广泛使用调试器对此进行了编码，据我所知，它“似乎”可以工作（即使通配符位于字符串的开头或中间）。但是，如果我在树中添加示例：“K*”和“Ke*”，它只会为“Key”找到一个解决方案（在本例中为 Ke*）。如果我从树中删除“Ke*”，它会为“Key”的搜索查询找到“K*”。我还是不明白为什么。

有什么想法吗？

* * *

附录（我的测试用例）：

```
#include <iostream>
#include "ternarySearchTree/ternarySearchTree.h"

int main(int argc, char *argv[]){
    TernarySearchTree<string> tst;
    Vector< TstItem<String> > itemVector;
    {
        TstItem<String> item( "Ke*", "Value" );
        itemVector.add( item );
    }
    {
        TstItem<String> item( "K*", "Value" );
        itemVector.add( item );
    }
    {
        TstItem<String> item( "Ka*", "Value" );
        itemVector.add( item );
    }
    tst.buildBalancedTree(itemVector);

    Vector<int> matches = tst.partialMatchSearchInverted("Key");// will only find Ke* (wrong - it should find Ke* and K*), if I remove Ke* above it would find K* (right), if I remove that also it would find nothing (also right)
    for (unsigned j=0;j<matches.count();j++)
    {
        std::cout<<"Matching: "<< tst.getKey( matches[j] ) <<" -  "<< tst.getValue( matches[j] )->c_str()<<std::endl;
    }
    std::cout<<"total matches "<< matches.count()<<std::endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:09:14.407

好的，我终于可以找到我的问题了：我仍然完全不明白三叉树是如何工作的。因此，当通配符可能位于这些分支中的某个位置时，我没有访问左右节点（遗憾的是，几乎每次都如此）。所以我的最终算法比在三叉树中的搜索要慢得多（我担心复杂性可能会像 O(n)），但至少我让它工作了。

所以看起来这个数据结构不适合我的需要（搜索通配符字符串）——我可能会用线性列表获得相同的速度。但是，如果有类似问题的人有一天会发现这个问题，这是我的代码（但我不建议在实际应用程序中使用它，因为它很慢而且我猜周围还有其他结构可以更好地处理这些事情):

```
template <class Object>
void TernarySearchTree<Object>::partialMatchSearchInverted(TstTree tree, const char *key)
{
    if (!tree) return;
    if((tree->splitChar == '*') && ( *key != 0 )){
        partialMatchSearchInverted( tree, key+1 ); // wildcard occured, search same node with next key
    }
    if( *key != 0 ){
        if (*key < tree->splitChar){
            partialMatchSearchInverted( tree->left, key );
        }else if('*' < tree->splitChar){ // a wildcard could be in this branch
            partialMatchSearchInverted( tree->left, key );
        }
        if (*key > tree->splitChar){
            partialMatchSearchInverted( tree->right, key );
        }else if('*' > tree->splitChar){ // a wildcard could be here too
            partialMatchSearchInverted( tree->right, key );
        }
    }
    if ((*key == tree->splitChar) || (tree->splitChar == '*')){
        if (*key != 0){
            partialMatchSearchInverted( tree->mid, key+1 ); // search next pattern char
        }
    }
    if ( ( *key == 0 ) && ( tree->splitChar == 0 ) ){
        pmVectorPtr->add( tree->index );
    }
} 
```

# jsf - OWASP TOP 10 - 4\. 不安全的直接对象引用 - JSF 1.2 + JAVA + SEAM 中的其他方式然后是 ESAPI

> ID：13606741
> 
> 赞同：0
> 
> 时间：2012-11-28T13:55:27.370
> 
> 标签：jsf, jsf-1.2, seam2, owasp, esapi

是否已经在 J​​SF 1.2 或 SEAM 2.2.2 中集成了任何东西来防止[A4 不安全的直接对象引用](https://www.owasp.org/index.php/Top_10_2010-A4)

我知道 ESAPI 函数可以做到这一点，但如果没有必要，我不想在我的项目中包含另一个框架，JSF 或 SEAM 中有什么内置的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T06:42:19.430

您有几种选择：

1.  在 SQL 语句中验证对受保护资源的访问权限
2.  间接对象​​哈希映射是一个非常简单的结构，实际上只有 10 行代码。只需重新实现，并注意您的随机性来源
3.  更改您的标签库以执行 ASP.net 所做的工作，即验证具有约束输入的复选框、单选组、选择等，与已发送的潜在输入之一具有相同的值（即，如果您有“1”， “2”和“3”，表示参数是这三个值之一。JSF 2 和 Rich Faces 仍然无法让您达到基本软件工程的 ASP.NET 2.0 级别。
4.  使用 Faces 集成中的 s:validateForm 执行编程检查。

老实说，我认为 (2) 是最好的选择，因为我知道为 J2EE 引入 ESAPI 需要为几行代码安静一点。为什么它需要一个自定义的 filebaseauthenticator 来进行 DOR 映射，这超出了我的理解。我的目标是在 ESAPI for PHP 中实现更松散的耦合，但我在 ESAPI for J2EE 上进行黑客攻击已经有一段时间了。

# forms - Magento - 处理块形式的最佳方法？

> ID：13606744
> 
> 赞同：7
> 
> 时间：2012-11-28T13:55:31.083
> 
> 标签：forms, model-view-controller, magento, controller, block

我来自不同的 MVC 框架（例如 Symfony）到 Magento。我阅读了很多关于 Magento 最佳实践的文章，我可以看到 Magento 没有使用典型的 MVC 风格。艾伦斯托姆写道：

> 控制器不负责为视图设置变量 [...] 控制器的工作是对模型做某些事情，然后告诉系统它的布局渲染时间。

我想我理解这种方法，因为这可以为块提供一种灵活性。

对。但是表格呢？

在典型的 MVC 框架中，您将在控制器中获取请求参数，在控制器中验证表单数据，在必要时进行模型操作（保存、加载等）或重定向，当一切都干净整洁时，您将提供新鲜出炉的输出件供观赏。

在 Magento 中，这些都应该发生在一个块内，并且（瘦）控制器只应该准备布局然后渲染它。（如果我明白的话。）

我试图找到一篇文章（手册，论坛主题，任何东西），它描述了具有自己的新模型的单独模块的创建步骤，用户可以通过前端的表单对其进行编辑。我想看看自定义表单应该如何在前端工作。我只找到关于块、表单、修改或创建 adminhtml 表单或自定义联系人或时事通讯注册表单的一般文章。

我做到了。它现在有效，但我不满意。因此，我检查了核心模块中的联系人表单的源代码，这些代码为我搞砸了整个画面。内置的 Contact 表单使用 IndexController 进行上述大多数操作，（几乎）像标准 MVC 一样。

任何人都可以向我建议一个最佳实践，如何管理一个简单的流程，如下所示？（我在下面有一个解决方案，但我不确定，这是“正确的 Magento 方式”）：

*   页面加载时，在一个块中显示一个表单，该表单包含在单独的页面中
*   通过请求参数从数据库加载模型对象
*   将对象数据填充到表单中
*   当用户提交表单时，处理表单数据，验证它们
*   如果验证错误，再次显示表单，并弹出错误消息
*   如果可以，将数据存储到数据库中，显示感谢页面

我的困惑主要是围绕：

*   我应该在哪里获取和管理请求参数？（我在块类文件中做到了）
*   并基于它从数据库中加载一个对象？（也是，然后传给phtml）
*   如果我不在那里加载它，如何将它传递给视图？（我会知道一种方法，但我不知道最好的方法。）
*   （POST）表单数据应该在哪里处理、验证和存储？（堵塞？）
*   如何在块中正确使用重定向？我是否需要重定向，因为感谢页面应该是不同的块/页面？或者只是同一块的另一种（条件）外观？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:58:41.187

您可以查看 Customer/AccountController 并查看`loginPost`、`createPost`方法如何处理传入的表单数据。

我永远不会将`CRUD`逻辑添加到块中。您需要在 Controller 中验证和处理您的 POST 数据。块应仅包含与视图相关的逻辑：例如格式 url 或 prepare `Collection`。

表格准备也落在了控制器的肩上。您需要加载对象并在 Controller 操作中对其进行验证。然后有几种方法可以将其传递给块：

*   `Mage::register`（登记处）
*   `$this->getLayout->getBlock('your_form_block')->setEntity($object)`（直接设置变量为block）

任何重定向都应仅在 Controller 中完成。

**更新** 关于为什么在控制器内加载模型的几句话。

1.  如果您未能加载您的对象，这意味着用户正在使用的 url（带有对象 id）已过时，您可能需要将客户重定向到某个方便的页面，但出现错误。
2.  正如我上面所说，所有重定向都应该只在 Controller 中完成。这是为什么？因为此时块是进程，Magento 已经完成了大量的引导工作 - 就像`loadLayout`创建所有块一样。您不想让用户等待所有时间只是为了在之后重定向他。
3.  此外，将重定向放在不在控制器中的任何地方都会使应用程序无法维护。当然也有例外，但你应该知道自己做得很好。

你也忘记了一个更有价值的部分。如果您的控制器内部验证失败，您需要使用用户发送的值填写表单。在 Zend_Form 中做得很好，但是对于 Magento 表单，您需要使用会话（就像在 AccountController 中所做的那样） - 将所有键值部分保存在会话中，然后在块中检查这些会话变量是否存在。同样，只有当您的 POST 验证失败并且您将用户重定向回您的表单时，您才应该这样做。在成功的情况下清除连接到表单的会话变量。

作为一般建议：如果您想遵循 Magento 风格，请少阅读论坛和更多核心代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:57:27.030

我也不是magento pro，但我想我可以回答您的问题：

**我应该在哪里获取和管理请求参数？（我在块类文件中做了）** 取决于你需要它们的地方。如果您打算将它们保存在模型中，请使用控制器。如果要将它们输出到页面上，请使用块。大多数情况下，您希望为此使用控制器。

**并基于它从数据库中加载一个对象？（同样，然后传递给 phtml）** 如果要将模型传递给模板，则应在获取模型的块上编写一个函数。

**如果我不在那里加载它，如何将它传递给视图？（我会知道一种方法，但我不知道最好的方法。）** 如上所述，制作一个带有获取模型的函数的块。然后从您的模板中，您可以使用*$model = $this->functionThatGetsTheModel();* 达到这个功能并获得块。

**（POST）表单数据应该在哪里处理、验证和存储？（块？）** 保存模型之类的东西是控制器的东西。

**如何在块中正确使用重定向？我是否需要重定向，因为感谢页面应该是不同的块/页面？或者只是同一块的另一种（条件）外观？** 最好在控制器中进行重定向。最好为您计划制作的每个页面制作一个新的块/模板。

关于块/模板主题：阅读此页面以获取有关使用布局 xml 以使用块和模板的更多信息[http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-4- magento 布局块和模板](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-4-magento-layouts-blocks-and-templates)

我希望这可以帮助您开始使用 magento！

# android - 共享首选项（putStringSet）或其他？

> ID：13606746
> 
> 赞同：0
> 
> 时间：2012-11-28T13:55:44.397
> 
> 标签：android

我构建了一个简单的程序（带有 10 条诫命的数组字符串），稍后我创建了另一个类（选择其他活动的索引）。

我想通过保存的首选项保存此数组，以便重新启动应用程序时的用户可以从最后一点继续。

我读到 putStringSet 只能从 api 11 获得，而我也会保持兼容 2.3 版

有没有办法保存数组字符串？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:09:23.787

我会使用 for 循环将字符串数组转换为常规字符串并使用分隔符，例如“|” 并使用 putString 保存。取回它时，我会使用相同的分隔符拆分字符串并重建数组。

```
private String GetString(String[] array, String delimiter)
{
    StringBuilder sb = new StringBuilder();
    for(String s : array)
    {
        if(sb.length() > 0) { sb.append(delimiter);}
        sb.append(s);
    }

    return sb.toString();
}

private String[] GetArray(String input, String delimiter)
{
    return input.split(delimiter);
} 
```

使用 GetArray 时要小心，因为 String.split() 假定正则表达式作为分隔符，所以如果您使用字符“|” 你必须逃避它，例如。GetArray(myArray, "\\|"); 希望这可以帮助。

# c++ - 用于文件同步的简单客户端

> ID：13606748
> 
> 赞同：1
> 
> 时间：2012-11-28T13:55:46.117
> 
> 标签：c++, visual-c++, wxpython, rsync, python-2.6

在我的大学项目中，我需要为 Windows 操作系统编写简单的客户端，它将同步 PC（使用 Windows 操作系统）和服务器（Linux）上文件夹中的文件。

我决定使用 python 2.6。我的问题是我应该使用哪个库来实现 rsync 算法？

或者也许使用 c++ 而不是 python 2.6 更好？那么我应该使用哪个库在 C++ 上实现 rsync 算法？

如果你能给我一些例子或链接会更好。因为我在网上找不到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:36:31.043

以下是一些可能对您有所帮助的链接：

*   [http://thesmithfam.org/blog/2010/05/12/smart-folder-synchronization-with-python/](http://thesmithfam.org/blog/2010/05/12/smart-folder-synchronization-with-python/)
*   [http://code.activestate.com/recipes/231501-python-robocopier-advanced-directory-synchronizati/](http://code.activestate.com/recipes/231501-python-robocopier-advanced-directory-synchronizati/)
*   [http://fileconveyor.org/](http://fileconveyor.org/)

或者你可以下载一个 Windows 的 rsync 客户端，例如[http://www.rsync.net/resources/howto/windows_rsync.html](http://www.rsync.net/resources/howto/windows_rsync.html)并使用 Python 的 subprocess 模块来调用它。

# php - 多语言网站

> ID：13606752
> 
> 赞同：2
> 
> 时间：2012-11-28T13:55:56.243
> 
> 标签：php, .htaccess

我想在我的网站上有两种语言。荷兰语和英语。我的根目录下的“en”和“nl”文件夹中已经有英文和荷兰文网站。

如何或什么是重定向它们的最佳方式？.htaccess 或 PHP。你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:05:49.130

htaccess 在我看来要容易得多。使用 php 你将不得不做一个我猜的 auto_prepend 文件。要记住的另一件事是使用完全相同的页面，因此选择一种语言并将其用于 url....即 en/about_us.html 和 nl/about_us.html 原因是因为然后谷歌可以弄清楚哪些页面相同，但语言不同。就重写而言，如果您有文件夹，那么我看不出您需要重写什么。请你给我更多的信息。每当我创建一个多语言站点时，我的控制器都是相同的（当然是在 mvc 环境中），我只有两个不同的视图。在那种情况下，它将是这样的重写

```
RewriteRule en/(.*).html /$1.php?language=en
RewriteRule nl/(.*).html /$1.php?language=nl

RewriteCond %{HTTP_ACCEPT_LANGUAGE} ^(en)
RewriteRule ^[^en/](.*) /en/$1 [R=301]
RewriteCond %{HTTP_ACCEPT_LANGUAGE} ^(nl)
RewriteRule ^[^nl/](.*) /nl/$1 [R=301] 
```

# android - 在屏幕旋转之前地图覆盖缺失

> ID：13606754
> 
> 赞同：2
> 
> 时间：2012-11-28T13:56:05.473
> 
> 标签：android, android-mapview, overlays

在这里，我可以获取并显示用户在地图上的当前位置，我可以检索 Google Places json 数据并将其解析为数组。问题是，虽然显示了当前位置叠加层，但直到我将屏幕从纵向旋转到横向之后，才会出现额外的叠加层。即使我将其旋转回纵向，它仍然可以正常工作。

```
 // call to retrieve and parse json data
    Intent i = new Intent(this,HttpExample.class);    
    startActivity(i);  

    List<Overlay> mapOverlays;
    mapOverlays = mapView.getOverlays();
    mapView.getOverlays().clear();

    // display current location overlay
    GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lon *1E6));   
    controller.animateTo(point);
    Drawable drawable = this.getResources().getDrawable(R.drawable.mark_red);
    itemizedOverlay = new MapItemizedOverlay(drawable,this);

    OverlayItem overlayItem = new OverlayItem(point, "", "");

    itemizedOverlay.addOverlay(overlayItem);
    mapOverlays.add(itemizedOverlay);

    // Go through loaded arrays to display additional overlays
    drawable = this.getResources().getDrawable(R.drawable.mark_blue);
    itemizedOverlay = new MapItemizedOverlay(drawable, this);

    for(int r=0; r<10; r++)
        {
            GeoPoint point2 = new GeoPoint((int)(lat_coordinates[r]*1E6), (int)(lng_coordinates[r]*1E6));
            overlayItem = new OverlayItem(point2, "", "");
            itemizedOverlay.addOverlay(overlayItem);
            mapView.invalidate(); 
        }

    itemizedOverlay.addOverlay(overlayItem);
    mapOverlays.add(itemizedOverlay);
    mapView.invalidate();    
  }

// When the activity starts up, request updates 
@Override
protected void onResume() {
    super.onResume();
   locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10,
            1000*60*1, this);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T15:37:58.413

我在 AsyncTask 中添加了叠加层并做了

```
 @Override
    protected void onPostExecute(Void result) {
        mapView.invalidate();
    } 
```

完成后显示叠加层。想法是：确保在添加所有叠加层后在 UI 线程中调用 MapView 上的 invalidate()。

# matlab - 从控制台传递图像时的 Matlab 错误 - 基本

> ID：13606757
> 
> 赞同：0
> 
> 时间：2012-11-28T13:56:18.983
> 
> 标签：matlab, octave

我正在尝试将 .png 图像从 matlab 中的控制台传递给一个名为 bwconversion 的函数。当我将变量名称分配给控制台屏幕中的图像文件时，我编写的函数确实有效 - 即：

```
>>a = imread('1.png');
>>bwconversion(a); 
```

但是我需要代码才能工作，而我可以直接将文件路径传递给它，例如：

```
>>bwconversion('J:\Vision\ColourIm\1.png'); 
```

但是上面的返回错误表明图像没有传递给函数？

请在下面找到我非常基本的功能：

```
function bwconversion(imIn)

%Convert Image to Black and White
gr = rgb2gray(imIn);
bw = im2bw(gr, 0.04);
clear gr;
imshow(bw); 
```

我将不胜感激任何可以提供的建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:15:29.187

为什么不简单地将文件名作为参数传递？

```
function bwconversion(imIn_name)

% Read the image
imIn = imread(imIn_name);

% Convert Image to Black and White
gr = rgb2gray(imIn);
bw = im2bw(gr, 0.04);
clear gr;
imshow(bw); 
```

# php - 在动态字符串中获取值

> ID：13606759
> 
> 赞同：1
> 
> 时间：2012-11-28T13:56:19.810
> 
> 标签：php, string, dynamic, joomla

我有一个问题。我想在动态字符串中获得价值，它是如此复杂。这是字符串

```
<['pritesh:name:nilesh:replace']> 
```

这是动态字符串，我想获取名称并替换此字符串中的变量值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T13:59:54.357

```
$exploded = explode(':', $string);
$exploded[1] = $replacement;
$string = implode(':', $exploded); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:03:32.920

我不太确定你的字符串的格式，但这里有一些东西可以帮助你。

您可以使用[`explode`](http://no1.php.net/manual/en/function.explode.php)将带有分隔符的字符串转换为数组。然后您可以更改一个值并将其转换回以“:”分隔的形式。您可以使用 来执行此操作[`join`](http://no1.php.net/manual/en/function.join.php)，它是 的别名`implode`：

```
<?php
// initialize variable and print it
$s = "pritesh:name:nilesh:replace";
print("{$s}\n");

$s = explode(":", $s); // convert to array
$s[1] = "anotherName"; // change value

// convert back to foo:bar form and print
$s = join($s, ":");
print("{$s}\n");
?> 
```

将其放入文件`example.php`并在命令行上运行：

```
$ php -q example.php
pritesh:name:nilesh:replace
pritesh:anotherName:nilesh:replace 
```

正如有人提到的，如果您需要处理更高级的格式，您应该学习如何[在 PHP 中使用正则表达式](http://no1.php.net/manual/en/book.regex.php)。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:03:10.680

假设字符串存储在名为 的变量中`$string`，则：

```
$parts = explode(':', $string);

// this will mean that
// $parts[0] contains pritesh, $parts[1] = name, $parts[2] = nilesh and $parts[3] =  replace

// therefore
$name = $parts[0];
$replace = $parts[2]; 
```

# filter - Ubuntu 终端命令

> ID：13606764
> 
> 赞同：0
> 
> 时间：2012-11-28T13:56:29.420
> 
> 标签：filter, terminal, command, ubuntu-12.04

如何创建文件 ~/nuser.txt，其中包含 /etc/group 文件中本地定义的组数？这与过滤命令有关，需要用 1 行答案完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:05:16.743

如果您*必须*使用管道（“过滤器命令”似乎是胡说八道，这是我能找到的最接近的东西），您可以这样做：

```
cat /etc/group | wc -l | tee ~/nuser2.txt 
```

当然，大家都知道对单个文件使用 cat 是没有用的，所以最正确的命令应该是：

```
wc -l < /etc/group > ~/nuser.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:02:31.880

一条线：

```
wc -l /etc/group | cut -d " " -f 1 > ~/nuser.txt 
```

但公理的版本更短:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:02:35.220

```
cat /etc/group | awk -F: '{print $1}' | wc -l > ~/nuser.txt 
```

# java - 与 Spring 一起使用时的休眠 sessionFactory.getCurrentSession()

> ID：13606767
> 
> 赞同：1
> 
> 时间：2012-11-28T13:56:43.137
> 
> 标签：java, spring, hibernate, sessionfactory, spring-orm

我试图将 Hibernate 与我的 Spring 应用程序上下文连接起来。我成功地连接了一个 SessionFactory，但是当我尝试调用 getCurrentSession 时，我看到以下错误：

```
org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
at org.springframework.orm.hibernate3.AbstractSessionFactoryBean$TransactionAwareInvocationHandler.invoke(AbstractSessionFactoryBean.java:270)
at $Proxy8.getCurrentSession(Unknown Source)
at org.company.web.ws.sample.impl.CheckSecurityImpl.verify(CheckSecurityImpl.java:31)
at org.company.web.ws.sample.impl.CheckSecurityImplTest.testCheckSecurity(CheckSecurityImplTest.java:28)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

我正在配置数据源会话工厂和事务管理器。我还指定事务处理将由注释驱动

这是我的上下文 xml：

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:jdbc="http://www.springframework.org/schema/jdbc"
  xmlns:tx="http://www.springframework.org/schema/tx"
  xsi:schemaLocation="
    http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/jdbc
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd
    http://www.springframework.org/schema/tx 
    http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    ">

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="org.hsqldb.jdbcDriver" />
    <property name="url" value="jdbc:hsqldb:mem:murex" />
    <property name="username" value="sa" />
    <property name="password" value="" />
</bean> 

<jdbc:initialize-database data-source="dataSource">
  <jdbc:script location="classpath:/db-schema.sql"/>
  <jdbc:script location="classpath:/db-testdata.sql"/>
</jdbc:initialize-database>

<!-- Hibernate Session Factory  -->
<bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="mappingResources">
       <list>
          <value>/security.hbm.xml</value>
       </list>
    </property> 
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">update</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>  

<tx:annotation-driven/>

<bean id="checkSecurityService" class="org.example.web.ws.sample.impl.CheckSecurityImpl" /> 
```

这是我看到错误的类：

```
@WebService(endpointInterface = "org.example.web.ws.sample.CheckSecurity")
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = true)
public class CheckSecurityImpl implements CheckSecurity {

    @Autowired 
    private SessionFactory sessionFactory;

    @Transactional
    public CheckSecurityResponse verify(String propertyValue, String propertyType) {
        Session session = sessionFactory.getCurrentSession();
    }
} 
```

调用时 sessionFactory 不为空，而是出现上述错误。如果我使用 openSession 一切正常，但我知道这不适用于事务。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:51:08.577

上下文中缺少组件扫描，因此不会运行 @Transactional 后处理器来装饰事务包装的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T14:40:54.060

你能发布完整的堆栈跟踪吗？

我猜这个异常是由`TransactionManager`而不是由`getCurrentSession()`in引发的`verify()`。

您正在使用`TransactionManager`和`Session`分开。

您可以通过删除事务的注释来快速测试这一点。

为了正确修复尝试使用`HibernateTemplate`而不是`SessionFactory`直接使用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-24T09:32:32.470

使用以下罐子

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.0.1.Final</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate.common</groupId>
        <artifactId>hibernate-commons-annotations</artifactId>
            <version>4.0.1.Final</version>
    </dependency>

    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>4.0.1.Final</version>
    </dependency>

    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.7</version>
    </dependency>
    <dependency>
<groupId>org.antlr</groupId>
<artifactId>antlr-runtime</artifactId>
<version>3.0</version> 
```

# c# - 共享文件夹上的 MEF 部件和“以管理员身份运行”

> ID：13606770
> 
> 赞同：2
> 
> 时间：2012-11-28T13:56:47.317
> 
> 标签：c#, mef, administrator

我构建了一个使用 MEF 部件作为插件的 C# 应用程序。这些部分是在我的主应用程序启动时加载的。我的应用程序在 App.config 中的上述行允许从网络共享文件夹加载 MEF 部件。

```
<runtime>
 <loadFromRemoteSources enabled="true"/>
</runtime> 
```

所以我的应用程序以“当前用户”身份运行，MEF 部分加载在本地或网络共享文件夹中。但是，如果我以“管理员”身份运行我的应用程序（以管理员身份运行），则不会加载 MEF。当然，当我以管理员身份运行 VS2010 时，我得到了相同的结果。

我的应用程序是为 .net 4、x86 构建的。我使用 ExportFactory（CompositionInitializer 和 ExportFactory 到桌面）：[http ://mef.codeplex.com/discussions/207539](http://mef.codeplex.com/discussions/207539)

以管理员身份运行 MEF 应用程序/部件时是否有特殊行为？

**编辑：2014**年 8 月 7 日 终于成功了。这是我在 app.config 文件中的新运行时部分：

```
<runtime>
  <loadFromRemoteSources enabled="true"/>
  <NetFx40_LegacySecurityPolicy enabled="false"/>
</runtime> 
```

# grails - @grails.project.name@' 缺少所需的源文件夹：'grails-app/controllers'

> ID：13606772
> 
> 赞同：1
> 
> 时间：2012-11-28T13:56:54.263
> 
> 标签：grails, sts-springsourcetoolsuite

Grails 已安装，项目也已加载。但是在运行时，会显示以下错误：

```
'@grails.project.name@' is missing required source folder: 'grails-app/controllers' 
```

我正在使用 STS IDE。

# javascript - 在 JQuery 中跳过动画功能

> ID：13606775
> 
> 赞同：0
> 
> 时间：2012-11-28T13:57:00.210
> 
> 标签：javascript, jquery, function, skip

我有一个动画小介绍的功能，但我想在那里放一个跳过按钮，这样如果人们不想看这个简短的介绍，它会立即加载页面而没有介绍。但是，当我尝试这样做时，它似乎不起作用？这是Javascript代码：

```
$(document).ready(function() {
$(window).bind("unload", function() {
});

imageresize();  
aboutdisplay();
pageload();
intro();
start();

jQuery.easing.def = "easeOutElastic";

$("#bg a").click(function(event){
    event.preventDefault();
});

var $backgrounds = $('#bg li img');
var $menu_items = $('#menu li a');

$menu_items.hover(function(event){
    event.preventDefault();
    var $bg = $backgrounds.eq($menu_items.index(this));
    $bg.stop(true, false).animate({opacity:"1"},500, 'linear');},
        function() {
    var $bg = $backgrounds.eq($menu_items.index(this));
    $bg.stop(true, false).delay(250).animate({opacity:"0"},750, 'linear');
});

    $("a.skip").click(function(event){
    event.preventDefault();
    skip();
}); 

$("a.close2").click(function(event){
    event.preventDefault();
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0"},500, 'linear');
    $("#menu").animate({opacity:"1", 'top':"50%"}, 1000);
    $("#menu2").animate({'left':"-1500px"},500);
    $("#border2").animate({'height':"50px"},500, 'linear');
});

$("a.transition2").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#about").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition2_1").click(function(event){
    event.preventDefault();
    $("#about").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});

$("a.transition3").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#modelling").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition3_1").click(function(event){
    event.preventDefault();
    $("#modelling").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});

$("a.transition4").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#photography").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition4_1").click(function(event){
    event.preventDefault();
    $("#photography").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});

$("a.transition5").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#video").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition5_1").click(function(event){
    event.preventDefault();
    $("#video").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});

$("a.transition6").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#graphics").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition6_1").click(function(event){
    event.preventDefault();
    $("#graphics").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});

$("a.transition7").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#webdesign").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition7_1").click(function(event){
    event.preventDefault();
    $("#webdesign").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#contact").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});

$("a.transition8").click(function(event){
    event.preventDefault();
    $("#menu2").animate({'left':"-20px"},2000);
    $("#contact").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
    $("#border2").animate({'height':"75px"},1000, 'linear');
});
$("a.transition8_1").click(function(event){
    event.preventDefault();
    $("#contact").delay(500).animate({'opacity':"1",'top':"10px"},1000);
    $("#modelling").animate({'top':"-1000px"},500, 'linear');
    $("#about").animate({'top':"-1500px"},500, 'linear');
    $("#graphics").animate({'top':"-1000px"},500, 'linear');
    $("#webdesign").animate({'top':"-1000px"},500, 'linear');
    $("#video").animate({'top':"-1000px"},500, 'linear');
    $("#photography").animate({'top':"-1000px"},500, 'linear');
    $("#fade").animate({opacity:"0.9"},500, 'linear');
    $("#menu").animate({opacity:"0", 'top':"-100%"}, 500, 'linear');
});
   });

function imageresize() {  
    var bodywidth = $('#photography').width();  
    if ((bodywidth) < '1450'){  
        $('#photophotos img').css({'width':'150px', 'height':'112px'});
        $('#videophotos img').css({'width':'150px', 'height':'112px'});
        $('#graphicsphotos img').css({'width':'150px', 'height':'112px'});
        $('#webphotos img').css({'width':'250px', 'height':'187px'});
        $('#modelphotos img').css({'width':'150px', 'height':'112px'});
        $('#menu2').css({'font-size':'0.8em'});
        $('#aboutbio').css({'width':'560px','font-size':'1em'});    
        $('#aboutphotos img').css({'width':'200px', 'height':'150px'});
    } else {  
        $('#photophotos img').css({'width':'250px', 'height':'187px'});
        $('#videophotos img').css({'width':'250px', 'height':'187px'});  
        $('#graphicsphotos img').css({'width':'250px', 'height':'187px'});  
        $('#webphotos img').css({'width':'325px', 'height':'243px'});  
        $('#modelphotos img').css({'width':'250px', 'height':'187px'});
        $('#menu2').css({'font-size':'1.3em'});
        $('#aboutbio').css({'width':'700px', 'font-size':'1.2em'});
        $('#aboutphotos img').css({'width':'250px', 'height':'187px'});                 
    }  
}  

$(window).bind("resize", function(){//Adjusts image when browser resized  
    imageresize();  
});  

function aboutdisplay() {  
    var bodywidth = $('#photography').width();  
    if ((bodywidth) < '1050'){  
        $('#aboutphotos').css({'display':'none'});
    } else { 
        $('#aboutphotos').css({'display':'block'});
    }  
}  

$(window).bind("resize", function(){//Adjusts image when browser resized  
    aboutdisplay();  
});

function pageload(){
    $('#bg').hide();
    $('#border').hide();
    $('#menu').hide();
    $('#words p').hide();
    $('#social').hide();
    $('#border2').hide();
}

function intro(){
    $('#words2 ul').animate({'margin-top':'300px'}, 500, 'linear').delay(200).animate({'margin-top':'250px'}, 500, 'linear').delay(200)
        .animate({'margin-top':'200px'}, 500, 'linear').delay(200).animate({'margin-top':'150px'}, 500, 'linear').delay(200)
        .animate({'margin-top':'100px'}, 500, 'linear').delay(200).animate({'margin-top':'50px'}, 500, 'linear').delay(200)
        .animate({'margin-top':'0px'}, 500, 'linear');
}

function start(){
    $('#words2').delay(7500).fadeOut(500, 'linear');
    $('#bg').delay(6500).fadeIn(1000, 'linear');
    $('#border').delay(7500).fadeIn(1000, 'linear');
    $('#border2').delay(7500).fadeIn(1000, 'linear');
    $('#menu').delay(8000).fadeIn(1000, 'linear');
    $('#words p').delay(8000).fadeIn(1000, 'linear');
    $('#social').delay(9000).fadeIn(1000, 'linear');
}

function skip(){
    $('#words2').fadeOut(500, 'linear');
    $('#bg').fadeIn(1000, 'linear');
    $('#border').fadeIn(1000, 'linear');
    $('#border2').fadeIn(1000, 'linear');
    $('#menu').fadeIn(1000, 'linear');
    $('#words p').fadeIn(1000, 'linear');
    $('#social').fadeIn(1000, 'linear');
} 
```

谁能看到我哪里出错了？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:10:02.293

[`.stop()`](http://api.jquery.com/stop/)如果你只是想跳过动画，你应该使用clearQueue 参数设置为 true。

```
function skip(){
    $('#words2').stop(true).fadeOut(500, 'linear');
    $('#bg').stop(true).fadeIn(1000, 'linear');
    $('#border').stop(true).fadeIn(1000, 'linear');
    $('#border2').stop(true).fadeIn(1000, 'linear');
    $('#menu').stop(true).fadeIn(1000, 'linear');
    $('#words p').stop(true).fadeIn(1000, 'linear');
    $('#social').stop(true).fadeIn(1000, 'linear');
} 
```

您不能跳过对`delay()`jQuery 的调用。如果您需要更多控制，我建议使用本机 JavaScript 超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:07:22.887

您需要先停止其他动画。

如果没有要查看的小提琴或其他演示，我最好的猜测是您正在尝试淡入页面内容而没有首先停止已经开始的动画/效果。你不能简单地调用一个冲突的动画/效果而不首先杀死前一个动画/效果。

要停止正在运行的动画/效果，您需要使用 jQuery 的`.stop()`方法。

如果您有任何问题，请告诉我。祝你好运！:)

# opengl - （如何）可以将一个标量转换为另一个标量而不在 GLSL 中进行转换？

> ID：13606776
> 
> 赞同：2
> 
> 时间：2012-11-28T13:57:01.970
> 
> 标签：opengl, casting, glsl

（如何）可以将一个标量转换为另一个标量而不在 GLSL 中进行转换？

这个问题中使用的“cast”的定义是在不改变数据本身的情况下改变对完全相同数据的解释，假设这两种类型的位数相同。即（浮点数）B00101111 == B00101111

这个问题中使用的“转换”的定义正在改变数据的解释以及将所述数据重新格式化为原始值的某种数学近似值，即 (float)1 == 1.0

GLSL 4.30.6 规范的 5.4.3 暗示标量 float-to-int 和 int-to-float 构造函数只执行转换： *“当构造函数用于将任何浮点类型转换为整数类型时，小数部分浮点值被丢弃。”* - pg。87

棺材上的另一个钉子是第 5.1 节中的这条线，第 页。85： *“没有类型转换运算符；而是使用构造函数。”*

目标是使用 Buffer-Texture/Texture-Buffer 和 texelFetch(...) 来获得 float vec4s (128bit) 并填充一个结构，例如：

```
struct MyStruct
{
int foo; //32bit
float bar; //32bit
int baz; //32bit
short blah; //16bit
short hmm; //16bit
} // 128bit total 
```

...但是很难确定如何将 vec4 分解为二进制子块并重新转换它们以设置所述结构值。

从理论上讲，以下内容会起作用吗？

```
MyStruct myUuberChunk = MyStruct(myVec4); 
```

使用 float vec4s（或 int vec4s）背后的基本原理，等待它是正确的，是为了带宽性能目的在一次 128 位获取中获取所有值（大多数卡有四个 32 位内存总线）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-28T15:40:57.600

> Would the following, in theory work?

No.

GLSL does not allow you to directly reinterpret structures. While GLSL (3.30+) does guarantee that integers and floats are 32-bits, you can't just take a vec4 and pretend that it's something else.

However, OpenGL 3.3+ does allow you to reinterpret individual scalar values. First, your code should use an *integer* buffer texture, not a floating-point one. That's just to prevent the texel fetch logic from doing something unpleasant in the case of denomralized values, NaN, or other floating-point oddities.

Thus, you should be using a `usamplerBuffer` and getting back a `uvec4`.

To get the actual values, you have to do bit reinterpretation, provided by appropriate library functions:

```
struct Data
{
  int first;
  float value;
  int second;
  int half1;
  int half2;
};

Data UnpackStruct(uvec4 packed)
{
  Data ret;
  ret.first = int(packed[0]); //Sign bit is preserved, per GLSL standard.
  ret.value = uintBitsToFloat(packed[1]);
  ret.second = int(packed[2]);
  ret.half1 = (packed[3] >> 16) & 0x0000FFFF;
  ret.half2 = packed[3] & 0x0000FFFF;
  return ret;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:14:44.913

您可以使用[按位运算](http://en.wikipedia.org/wiki/Bitwise_operation)来解码\编码值，尤其是位移。有用的链接[1](https://stackoverflow.com/questions/6893302/decode-rgb-value-to-single-float-without-bit-shift-in-glsl) , [2](https://stackoverflow.com/questions/1700871/how-do-i-pre-preform-bit-operations-in-glsl)

# c# - 如何在 Html.BeginForm 之后保持在同一页面而不刷新或重新加载

> ID：13606777
> 
> 赞同：0
> 
> 时间：2012-11-28T13:57:15.820
> 
> 标签：c#, asp.net-mvc

**目标：**

我想知道，如何在使用“ *@using Html.Beginform ...*

**编码：**

控制器

```
 [HttpPost]
    public ActionResult Save(DetailHvmModel model)
    {
        HvmService.Save(model);
        return View();
    } 
```

看法：

```
 @using (Html.BeginForm(Actions.Valoration_Save, Controllers.Valoration, FormMethod.Post))
       { 
//Html
       } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-28T14:02:53.250

改用 Ajax，您可以使用助手 Ajax.BeginForm 轻松完成此操作，请参阅此处了解更多信息

[http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform(v=vs.108).aspx)

这也将您拥有它的方式与 Ajax 方法进行了比较

[http://www.codeproject.com/Articles/429164/Html-BeginForm-vs-Ajax-BeginForm-in-MVC3](http://www.codeproject.com/Articles/429164/Html-BeginForm-vs-Ajax-BeginForm-in-MVC3)

# android - Android ActionBar 不会在设备上拆分

> ID：13606778
> 
> 赞同：6
> 
> 时间：2012-11-28T13:57:26.863
> 
> 标签：android, android-actionbar

我知道有很多 ActionBar 问题，但它们似乎没有解决我的问题。我可以在我的模拟器中吐出 ActionBar，但是当我在我的设备上运行我的程序（Nexus 7 纵向模式）时，ActionBar 不会分裂。所有图标都“堆积”在顶部，甚至我的标签也会创建一个下拉列表。我试图通过使菜单项名称非常长来强制解决这个问题，并且我确实将它们设置为：android:showAsAction="always|withText"。可以肯定的是，我已经获取了示例代码，在模拟器上运行它看到它工作，然后将它放在我的设备上无济于事。这是我的清单：

```
<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/MyTheme">
    <activity
        android:name=".MainActivity"
        android:uiOptions="splitActionBarWhenNarrow"
        android:label="@string/title_activity_main">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

我已经搜索了网络，但找不到解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-30T09:04:26.167

根据[这个 SO item](https://stackoverflow.com/questions/9094675/how-does-splitactionbarwhennarrow-exactly-work-in-android)，只有在可用宽度小于 480dp 时才会拆分 ActionBar。然而，根据Google 的 Dianne Hackborn 的[这篇文章](https://plus.google.com/105051985738280261832/posts/6eWwQvFGLV8)，Nexus 7 的纵向宽度为 600dp。所以这就是没有分裂的原因。

我同意你的观点，分割应该取决于可用空间和要显示的项目之间的关系，而不是仅仅取决于可用空间。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-20T08:52:14.647

我知道这个问题已经很老了，但我找到了一种方法来强制操作栏在 Nexus 7（以及可能的其他设备）上的按钮，我想我会分享我的解决方案：

将此代码放在您的活动中：

```
/**
 * {@inheritDoc}
 */
@Override
public Resources getResources() {
    return new ResourceFix(super.getResources());
}

private class ResourceFix extends Resources {
    private int targetId = 0;

    ResourceFix(Resources resources) {
        super(resources.getAssets(), resources.getDisplayMetrics(), resources.getConfiguration());
        targetId = Resources.getSystem().getIdentifier("split_action_bar_is_narrow", "bool", "android");
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public boolean getBoolean(int id) throws Resources.NotFoundException {
        return targetId == id || super.getBoolean(id);
    }
} 
```

这将强制内部“split_action_bar_is_narrow”值为真。这可能不是最好的方法，但它似乎是我找到的唯一方法。

# python - “except”标签中的语句在python中不起作用

> ID：13606783
> 
> 赞同：0
> 
> 时间：2012-11-28T13:57:38.240
> 
> 标签：python

我编写了以下代码来保存网站上的相册。

```
import urllib2
import webbrowser
import os
page=1564848
fileno=1
for fileno in range(1,24):
    pages=str(page)
    filenos=str(fileno)
    picture_page = "url-to-the-website"+pages+".jpg"
    page=page+1
    os.chdir("/home/comrider/Album/")
    if not os.path.exists("3"):
        os.makedirs("3")
    os.chdir("/home/user/Album/3")
    try:
        opener1 = urllib2.build_opener()
        page1 = opener1.open(picture_page)
        my_picture = page1.read()
        filename = filenos + picture_page[-4:]
        fileno=fileno+1
        fout = open(filename, "wb")
        fout.write(my_picture)
        fout.close()
    except:
        fileno=fileno-1 #This statement is not working
        pass 
```

由于缺少图像编号，我给出了 try 和 except 语句，并且在 except 语句中我给出了减少文件编号的语句。在 try 语句中递增。但该代码无法正常工作，导致专辑下载不完整。工作平台是linux。请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:00:20.427

`fileno`将在下一次循环迭代中重置，您可以将其更改为您想要的任何内容，但是当当前 for 循环迭代结束时，它将从`1..24`

[来自文档：](http://docs.python.org/2/tutorial/controlflow.html#for-statements)

> Python 的 for 语句迭代任何序列（列表或字符串）的项目，按照它们在序列中出现的顺序

[`range`](http://docs.python.org/2/library/functions.html#range)返回您正在沿该序列进行的列表序列

如果你需要弄乱你的计数器，你可以使用一个while循环

```
fileno = 1    
while fileno < 24:
  #  do stuff
  # just remember to increment at the end, you control when the loop returns
  fileno += 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:19:14.520

上一个答案中给出的信息是正确的，但可以不那么不透明地陈述，如下所示：
`for fileno in range(1,24):`
连续执行的陈述将产生序列`fileno=1`, `fileno=2`, `fileno=3`, ... `fileno=23`。`fileno`无论您在循环之前或循环内做什么，它都会这样做。因此，`fileno=1`在循环之前设置或在`fileno=fileno-1`循环结束时设置是没有意义的。我建议您删除这些行以及`fileno=fileno+1`程序中的行。（也可以使用 while 循环，但更冗长。）

在另一个问题上，改变

```
 fout = open(filename, "wb")
    fout.write(my_picture)
    fout.close() 
```

至

```
 with open(filename, "wb") as fout:
        fout.write(my_picture) 
```

这将正确打开 fout，写入并关闭它，如[with-statement的](http://docs.python.org/2/reference/compound_stmts.html#the-with-statement)[文档](http://www.python.org/dev/peps/pep-0343/)中所述。

# jquery - 谷歌地图 API - 将内联 json 移动到外部文件

> ID：13606784
> 
> 赞同：2
> 
> 时间：2012-11-28T13:57:41.360
> 
> 标签：jquery, json, google-maps, google-maps-api-3

我想将我的内联 json 移动到外部文件并将其拉入。

这是我目前内联的 json。

```
var locations = [

    [40.902, -74.407, 'Dial-a-Ride', 'Boonton Town', '973-402-9410, ext. 631' ],
    [40.933,-74.425, 'Dial-a-Ride', 'Boonton Township', '973-331-3336'],
    [40.999497, -74.346326, 'Dial-a-Ride', 'Butler Borough', '973-835-8885'],
    [40.7372, -74.4253, 'Dial-a-Ride', 'Chatham Boro and Chatham Township', '973-635-4565'],
    [40.785999, -74.692904, 'Dial-a-Ride', 'Chester Borough and Chester Township', '908-876-9496'],
    [40.892222, -74.4775, 'Dial-a-Ride', 'Denville Township', '973-625-7799'],

    [40.902857, -74.407712, 'American Legion', 'Boonton Post', '210 Main St.<br>Boonton, NJ 07005'],
    [41.00276744260799, -74.35810804367065, 'American Legion', 'John A. Dean Post', '15 Kiel Ave.<br>Butler, NJ 07403'],
    [40.73794, -74.38449, 'American Legion', 'Chatham Post', 'Box 11<br>Chatham, NJ 07928'],
    [40.78721, -74.68885, 'American Legion', 'Bernays Apgar Post', 'P.O. Box 342<br>Chester, NJ 07930'],
    [40.894537669741894, -74.48481559753418, 'American Legion', 'Denville Memorial Post', 'Legion Place<br>Denville, NJ 07834'],
    [40.88243629753742, -74.56002473831177, 'American Legion', 'William H. Baker Post', '2 Legion Place<br>Dover, NJ 07801'],

    [40.903020287948806, -74.40771818161011, 'Veterans of Foreign Wars', 'Boonton Post #242', '221 Main St.<br>Boonton, NJ 07005'],
    [40.91534490699327, -74.48998689651489, 'Veterans of Foreign Wars', 'Denville Post #2519', '71 Ford Rd.<br>Denville, NJ 07834', 'Veterans of Foreign Wars'],
    [40.82603680244624, -74.42166566848755, 'Veterans of Foreign Wars', 'Hanover Post #5351', '750 State Route 10<br>Hanover Twp., NJ 07981', 'Veterans of Foreign Wars'],
    [40.87683907004174, -74.63418245315552, 'Veterans of Foreign Wars', 'Kenvil Post #2833', '16 High St.<br>Kenvil, NJ 07847', 'Veterans of Foreign Wars'],
    [40.88654063021766, -74.36521053314209, 'Veterans of Foreign Wars', 'Montville Post #5481', '132 Change Bridge Rd.<br>Montville, NJ 07045', 'Veterans of Foreign Wars'],
    [40.83861926691208, -74.58420753479004, 'Veterans of Foreign Wars', 'Mt. Freedom Post #7333', 'Carrell Rd.<br>Mt. Freedom, NJ 07970', 'Veterans of Foreign Wars'],

    [40.83020957464309, -74.5130968093872, 'Nutrition', 'Morris Mews', 'Dean Gallo Congregate Housing, 99 Ketch Rd.<br>(973) 540-8063; open Monday through Friday'],
    [40.80247276179082, -74.48412895202637, 'Nutrition', 'Morristown', 'Wetmore Towers, 31 Early St.<br>(973) 644-0343; open Monday through Friday'],
    [40.896905775860006, -74.69329833984375, 'Nutrition', 'Mt. Olive Township', 'Mt. Olive Senior Center, 204 Flanders-Drakestown Rd.<br>(973) 448-7474; open Monday, Wednesday, Friday'],
    [40.87304242027383, -74.39115285873413, 'Nutrition', 'Parsippany', 'Parsippany Community Center, 1130 Knoll Rd.<br>(973) 884-1868; open Monday through Friday'],
    [40.901593078403536, -74.52371835708618, 'Nutrition', 'Rockaway', 'Pleasant View Village, 221 Mt. Pleasant Ave.<br>(973) 361-9376; open Tuesday, Wednesday, Friday'],
    [40.8563177, -74.637607, 'Nutrition', 'Roxbury Township', 'Roxbury Senior Center, 72 Eyland Avenue<br>(973) 361-5231; open Wednesday and Friday']
]; 
```

这是标记循环：

```
// Looping through the JSON data
for (var i = 0; i < locations.length; i++) {

    // Creating a marker and putting it on the map
    var marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][0], locations[i][1]),
        map: map,
        title: locations[i][3],
        icon: iconSrc[locations[i][2]]
    });
    markers.push(marker);

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
            infoWindow.setContent(locations[i][3] + "<br />" + locations[i][4]);
            infoWindow.open(map, marker);
        }
    })(marker, i));

}// END for loop 
```

我想知道的是，在我使用 jQuery 的 getJSON() 拉入 json 之后，我如何将 的值放入正确的参数中。如果您认为 json 更好地设置键和值，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:28:51.957

您应该能够使用该内容创建一个外部 javascript 文件并将其包含在您的页面中，这将是最简单的解决方案。

# maven - 在没有生命周期阶段或目标的情况下调用 mvn 时 Maven 构建失败

> ID：13606794
> 
> 赞同：7
> 
> 时间：2012-11-28T13:58:24.243
> 
> 标签：maven

我尝试在 Eclipse 上使用 Maven 构建我的项目。第一个构建很棒。之后我得到这个错误：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.129s
[INFO] Finished at: Wed Nov 28 17:51:35 GST 2012
[INFO] Final Memory: 2M/121M
[INFO] ------------------------------------------------------------------------
[ERROR] No goals have been specified for this build. You must specify a valid lifecycle
phase or a goal in the format <plugin-prefix>:<goal> or <plugin-group-id>
:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available lifecycle phases are: validate,
initialize, generate-sources, process-sources, generate-resources, process-resources,
compile, process-classes, generate-test-sources, process-test-sources,
generate-test-resources, process-test-resources, test-compile, process-test-classes, test,
prepare-package, package, pre-integration-test, integration-test, post-integration-test,
verify, install, deploy, pre-site, site, post-site, site-deploy, pre-clean, clean,
post-clean. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the
following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoGoalSpecifiedException 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T14:00:35.637

Maven 是一个构建工具，但不像`ant`没有“默认”目标。所以当你跑

```
 mvn 
```

您没有提供足够的参数，您需要运行类似的东西

```
 mvn test 
```

第二个参数表示您希望在[构建生命周期中停止的位置。](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)然后，Maven 将运行每一步，直到您指定的那一步。

一些常见的停车点

```
 mvn compile (just compile)
 mvn test (compile and run unit tests)
 mvn package (compile, run unit tests, and build the distributable package)
 mvn install (all of the above, and install distributable package into local repository.
     Install is very useful if you need to build other packages which depend on changes
     to this package)
 mvn deploy (all of the above, and install package into remote (aka public) repository
     for sharing with other developers) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-10-22T20:49:08.523

您可以通过命令或 eclipse 设置目标：

[![在此处输入图像描述](../Images/517bbd76a351a45d9e45250ad0df26ef.png)](https://i.stack.imgur.com/C8vRp.jpg)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T14:00:17.110

您必须指定构建目标，例如*compile*或*install*。检查您的 Eclipse 启动配置。

# vb.net - VB.NET 在 Parallel.for Synclock 内的嵌套循环中运行 sum 丢失信息

> ID：13606811
> 
> 赞同：0
> 
> 时间：2012-11-28T13:59:25.823
> 
> 标签：vb.net, nested, floating-accuracy, parallel.foreach

下面是我能够开发的最佳表示，用于计算嵌套在 VB.NET（Visual Studio 2010，.NET Framework 4）中的 Parallel.for 循环内的循环内的运行总和。请注意，当在屏幕上显示“总和”的结果时，两个总和之间存在细微差别，因此在并行化变体中会丢失信息。那么信息是如何丢失的，发生了什么？任何人都可以提供一些关于在这种情况下保持流动总和的方法的“显微外科手术”吗？（注意 Parallel.for 的新用户：我通常不使用从零开始的方法，因此在 Parallel.for 语句中，I1 循环到 101，因为代码使用 101-1 作为上限。这是因为MS 开发了假设从零开始的计数器的并行代码）：

```
 Dim sum As Double = 0
    Dim lock As New Object
    Dim clock As New Stopwatch
    Dim i, j As Integer
    clock.Start()
    sum = 0
    For i = 1 To 100
        For j = 1 To 100
            sum += Math.Log(0.9999)
        Next j
    Next i
    clock.Stop()
    MsgBox(sum & "  " & clock.ElapsedMilliseconds)
    sum = 0
    clock.Reset()
    clock.Start()
    Parallel.For(1, 101, Sub(i1)
                             Dim temp As Double = 0
                             For j1 As Integer = 1 To 100
                                 temp += Math.Log(0.9999)
                             Next
                             SyncLock lock
                                 sum += temp
                             End SyncLock
                         End Sub)
    clock.Stop()
    MsgBox(sum & "  " & clock.ElapsedMilliseconds) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:49:36.220

您正在使用双打，而双打根本不准确。在非并行循环中，所有错误都直接存储在 sum 中。在并行循环中，您有一个额外的 tmp，稍后将其添加到 sum。在非并行循环中使用相同的 tmp（在内循环运行后添加到 sum），最终结果将相等。

```
 Dim sum As Double = 0
    Dim lock As New Object
    Dim clock As New Stopwatch
    Dim i, j As Integer
    clock.Start()
    sum = 0
    For i = 1 To 100
        For j = 1 To 100
            sum += Math.Log(0.9999)
        Next j
    Next i
    clock.Stop()
    Console.WriteLine(sum & "  " & clock.ElapsedMilliseconds)
    sum = 0
    clock.Reset()

    clock.Start()
    sum = 0
    For i = 1 To 100
        Dim tmp As Double = 0
        For j = 1 To 100
            tmp += Math.Log(0.9999)
        Next
        sum += tmp
    Next i
    clock.Stop()
    Console.WriteLine(sum & "  " & clock.ElapsedMilliseconds)
    sum = 0
    clock.Reset()

    clock.Start()
    Parallel.For(1, 101, Sub(i1)
                             Dim temp As Double = 0
                             For j1 As Integer = 1 To 100
                                 temp += Math.Log(0.9999)
                             Next
                             SyncLock lock
                                 sum += temp
                             End SyncLock
                         End Sub)
    clock.Stop()
    Console.WriteLine(sum & "  " & clock.ElapsedMilliseconds)

End Sub 
```

输出：

```
-1,00005000333357  0
-1,00005000333347  0
-1,00005000333347  26 
```

结论：如果你使用 double，那么 (a + b) + c 不（总是）等于 a + (b + c)

**更新**

一个更简单的例子：

```
 Dim sum As Double
    For i = 1 To 100
        sum += 0.1
    Next
    Console.WriteLine(sum)

    sum = 0
    For i = 1 To 2
        Dim tmp As Double = 0
        For j = 1 To 50
            tmp += 0.1
        Next
        sum += tmp
    Next
    Console.WriteLine(sum) 
```

现在输出是

```
9,99999999999998
10 
```

# r - 在 coord_transform 与预先计算的统计数据后 Geom_boxplot 多次绘图错误

> ID：13606812
> 
> 赞同：0
> 
> 时间：2012-11-28T13:59:31.813
> 
> 标签：r, ggplot2, transform, boxplot

这是与上一个问题相关的问题：[geom_boxplot drawing error with precomputed values](https://stackoverflow.com/questions/13602547/geom-boxplot-drawing-error-with-precomputed-values)

*   **当我在预先计算的统计数据中仅对 y**（第二个图形底部）应用坐标变换时，`geom_boxplot()`中间线、下线和顶线消失。我第一次考虑分辨率问题，但是当我以高分辨率（600 dpi）导出时，我遇到了同样的问题:(

*   **当我在x 和 y** （第三个图形底部）上应用坐标变换以生成等级大小图时，似乎我还有另一个绘图问题，正如您在等级 1 的第一个条形图上看到的那样。我还搜索了一个解决方案来固定宽度我的箱线图，因为这里的几何在分布尾部变换后真的很难看。

这是我生成数据的代码

```
mydata<-structure(list(v_rank=1:100,min=c(1876.12908723494,525.833257030355,
479.174444926073,413.317971868729,283.212605297879,272.271743111746,
271.218577609491,261.097920232602,249.848244413854,239.6826693619,
221.953200543177,220.672797573803,217.788754899515,209.693597246165,
207.920376492108,206.305695354979,205.224940348855,198.158941191935,
196.768964078812,192.524762910127,190.659747088907,187.313079645817,
184.003802843274,181.124789727041,172.404693867801,168.185940418452,
162.525847977172,159.766160562022,159.47498997248,158.707407613974,
156.670643391483,154.782348653747,151.120608890216,148.537185644508,
147.418985792071,144.192949577012,143.081876591813,138.306500760138,
138.071720969489,135.819373238595,131.268228360837,131.211745493362,
129.475958752641,128.994697005825,126.919520316827,125.131265913884,
123.530137623397,119.30326498362,118.928750988775,116.785274187946,
112.196408614492,109.613414596662,108.0200018691,103.845334903546,
101.304467892935,100.630402666552,99.4843966733682,98.5423453987657,
95.1549453652298,93.7292405692186,92.1425963507161,88.392923177316,
86.5435376677445,84.2370997228235,81.8582235361675,80.7147556864089,
79.9095336240098,78.099293257082,77.444818889996,77.1554419990025,
76.1887950832748,75.765742105877,74.5715550271922,74.4494960879874,
73.0841135453694,72.6275007405538,71.9226468496817,71.5061513708144,
70.8352606944726,70.3525118381674,69.7966653875959,69.7848999118085,
68.7929488062417,68.5934402557501,67.6439262767344,66.0852928683046,
65.5502632169449,65.0385479217237,62.8960922184903,62.842868824982,
61.6430225651763,60.4182651467017,58.0527914522183,54.5733785363583,
51.8253107330044,51.5017948039077,49.3949677412271,44.4040392215262,
39.0000000000002,38.0000000000002),mean=c(8935.04834297135,
3438.53136055906,1370.10037064766,696.649339732745,564.855550869384,
477.749012732246,428.230275841222,396.2810212305,365.13402841522,
348.101058211078,329.525549400666,312.655267601672,298.714290600488,
286.578596825919,274.745155007507,265.597528393185,257.285214286721,
248.522991823508,239.359718910267,231.499756562578,224.770918544173,
217.887544860738,211.93512246229,205.700872047368,200.961757233366,
195.483220118819,190.703032490177,186.38611573552,183.232451708758,
179.680100025236,175.530838577876,172.143924929885,168.603751064018,
165.531924095968,162.821230088091,159.966306235412,157.276891856026,
154.718502961082,152.373606667626,149.793054166436,147.183183846565,
144.697301211638,142.092698673904,139.325636562338,136.985294657696,
134.884798028695,132.553014911682,129.708010287681,127.335105410515,
124.666660146052,122.198967268253,119.658340298511,116.91633635842,
114.585295497153,111.794558546531,109.348226917333,107.359283476062,
105.505531018795,103.599182793896,101.330969375811,99.2715636318623,
96.8198217584668,94.4018562740329,91.6021612575079,88.8560628257584,
86.2825680244354,84.6557538283325,83.1538874988065,81.8670731558834,
80.646504385465,79.5552381339603,78.6038624869326,77.8254005050736,
77.0633271181373,76.2307825731926,75.5818495078455,74.9159235572713,
74.2970580048307,73.7608647918991,73.1324988412481,72.4781145905903,
71.8682133108331,71.2002174199292,70.513258124492,69.7865642378299,
68.9249679265053,68.0937017609885,67.2946458442807,66.2734718903334,
65.5194270252636,64.616142038666,63.3815533937079,61.6228877586886,
59.3146024340077,54.6871823375137,53.4142211437341,52.2392567481353,
48.4217638762252,42.5111837553523,40.7700954890499),med=c(9814.40198510858,
3116.03711391275,1075.34902925081,673.838430955518,545.182921010037,
469.385842176791,416.33971886279,391.928714019644,363.610825228356,
348.167435758967,333.991060074654,314.269940600539,298.076343382389,
289.621613390752,278.280673551311,265.045605562845,257.531074315465,
250.654024557183,238.475372323999,231.249049068254,225.369614181594,
217.30045454174,210.62004470785,205.125786317327,200.071352506748,
193.766926196028,189.43090014115,186.005954812098,183.144335619686,
179.336627990153,175.459033786895,172.101776417078,168.082171205195,
164.87350114018,163.0866752049,159.079687930539,156.794367244073,
155.025803017927,152.225447389848,149.738781054841,146.655021999848,
143.568556751724,141.49663985492,138.771902285413,136.625694031028,
134.478260782788,132.466577693098,129.500757141275,126.915278355084,
124.877995672493,121.658540202601,119.197416394838,116.795154251343,
114.781249998192,111.860236693927,109.202517049202,106.926158862568,
105.409934963418,103.651881321872,101.259922781486,99.5075568481973,
96.8708296894636,94.2131873866587,91.6713809113473,88.8877315210602,
86.5959609936891,84.6564926236535,83.0706199616536,81.8338750812769,
80.4904194574623,79.501385404566,78.5601829584153,77.964098030266,
76.9330786117685,76.1180566937014,75.4631032445209,74.867552690578,
74.1822043037015,73.8209530924406,73.1141361264409,72.4759524530703,
71.7175520392203,71.037938525555,70.4543040600221,69.7018063042958,
68.9299758261986,68.0825783837955,67.2852741246417,66.3571510484087,
65.5355188281136,64.8188102941395,63.4951682075293,61.8032737668676,
59.2751489826056,54.6139464513163,53.3158469970988,52.2498721906628,
48.1225168815051,42.4170341449923,40.8497627061483),max=c(10147.8592830916,
8633.90688162628,4886.70192987259,1240.91225422784,1089.08051129437,
742.719356156879,683.171612433623,578.593555269702,497.93606268059,
476.736825787664,409.969180375468,389.676300445944,381.794925302163,
357.435324255315,355.440016611572,351.494592111432,348.922507989906,
342.6697349814,325.836862890568,272.490173315169,259.108318277361,
246.67353086611,241.084957301967,231.595391911806,228.493098288313,
224.413217462653,219.814039785869,206.939679326569,206.832822873075,
204.588105225262,191.159016060565,189.247627946495,185.888373894867,
179.896261122406,178.4706325079,174.739278352249,173.273333806994,
170.82302532665,168.998600410821,167.186223006948,162.188512084591,
158.981616143302,157.948216962222,153.895398821425,152.404490394739,
152.29624128978,151.757695059315,151.681549938741,148.639740700113,
136.958110443491,134.270180841863,133.893910030369,126.646788409391,
125.055039316004,121.287517319267,117.015374509952,116.36527440479,
113.699942971893,111.979991137726,108.240534045998,105.985702213076,
104.322725137889,100.974271559617,99.5096167709053,95.2936620796326,
92.062366512545,90.0342406215312,89.6481410473251,87.1324204227002,
86.8589880937485,83.8473315574837,83.4339147193383,82.0475214795012,
81.0745398315444,79.3887304257836,78.8784148261601,77.4614289529577,
77.0771790476472,76.0668242500696,75.5540036829177,75.4621857290579,
75.1311008651877,74.2673199628139,74.2641997252619,73.5571399399056,
72.894975554323,71.5629969887197,71.4068442120744,69.2509007389552,
68.5602150275453,67.5652881735352,66.5751462232598,65.5641149484878,
65.2163952942519,58.8526259048984,55.9301169855317,54.7251125558506,
53.3473055854337,46.7221311218048,43.7096043155307),sd=c(1920.61995076318,
2071.90462753791,846.925532656194,166.304459052339,122.67856721787,
81.8151099480816,73.2074776878918,61.8626056929879,45.6856024744788,
43.9017650562536,36.9989421854618,33.3517567028942,32.1410405122589,
28.4758117549672,27.2385799664792,26.2706694900935,24.8927806414279,
22.8309322770636,19.8543548064944,17.0858748338659,14.8944478364513,
13.9737233320454,13.6956203984614,12.5761524668905,11.7549301732758,
11.0988662535768,10.6547736595848,9.76351153623029,9.67890144083554,
8.92810457440155,8.25769486510607,7.54133350871369,6.94842881555269,
6.93147596748886,7.07317885442362,7.07778605646362,6.55489414156632,
6.75841318729736,6.46389598231023,6.15064520603789,6.00065720940157,
6.03502938812419,5.8465959548099,5.53045143365509,5.6569022817063,
5.56619691573112,5.30620580297752,5.4766542946062,4.75121437486975,
4.13369122071181,4.41131211773525,4.10508635820112,3.82638153445188,
3.68736674916447,3.52897983983376,3.41037506985167,3.22536343697251,
3.10065674420964,3.03330450751443,2.9904932686081,2.93861988370156,
3.16712174539256,3.07383178775358,3.13846734678265,2.90733636918161,
2.57176797270246,2.23187444725688,2.29607813738596,2.08303964064532,
1.80338138606924,1.62612534909916,1.54707708046367,1.49240001940341,
1.40939977389337,1.27823705485513,1.21922358651095,1.12806129340388,
1.13010155946996,1.11928430703033,1.04558731836885,1.14995957788824,
1.12521793647851,1.07795527050143,1.01369234716728,1.05350541107726,
1.0912874094653,1.05339501229828,1.11468264457309,1.09260544728007,
1.14912216836883,1.22303957638847,1.25937354563769,1.52953327119146,
1.85172364578356,1.26978526426211,0.861852422307316,1.04440221036651,
1.76492071874432,1.46775534258985,1.3260977569218),ymin=c(7014.42839220817,
1366.62673302115,523.174837991462,530.344880680406,442.176983651514,
395.933902784165,355.02279815333,334.418415537512,319.448425940741,
304.199293154824,292.526607215204,279.303510898778,266.573250088229,
258.102785070952,247.506575041027,239.326858903091,232.392433645293,
225.692059546444,219.505364103772,214.413881728712,209.876470707722,
203.913821528692,198.239502063828,193.124719580478,189.20682706009,
184.384353865242,180.048258830592,176.62260419929,173.553550267923,
170.751995450834,167.27314371277,164.602591421172,161.655322248466,
158.600448128479,155.748051233667,152.888520178949,150.72199771446,
147.960089773785,145.909710685316,143.642408960398,141.182526637163,
138.662271823514,136.246102719094,133.795185128683,131.32839237599,
129.318601112963,127.246809108704,124.231355993075,122.583891035645,
120.532968925341,117.787655150518,115.55325394031,113.089954823969,
110.897928747988,108.265578706697,105.937851847482,104.133920039089,
102.404874274585,100.565878286382,98.3404761072033,96.3329437481607,
93.6527000130742,91.3280244862793,88.4636939107252,85.9487264565768,
83.7108000517329,82.4238793810756,80.8578093614205,79.7840335152381,
78.8431229993958,77.9291127848611,77.0567854064689,76.3330004856702,
75.653927344244,74.9525455183375,74.3626259213346,73.7878622638674,
73.1669564453608,72.6415804848688,72.0869115228792,71.328155012702,
70.7429953743546,70.1222621494278,69.4995657773247,68.7330588267527,
67.83368051704,67.0403067486902,66.1799631997076,65.1808664430534,
64.3703048568947,63.3931024622775,62.1221798480702,60.0933544874972,
57.4628787882242,53.4173970732516,52.5523687214268,51.1948545377688,
46.6568431574809,41.0434284127625,39.4439977321281),ymax=c(10855.6682937345,
5510.43598809697,2217.02590330385,862.953798785084,687.534118087253,
559.564122680328,501.437753529113,458.143626923488,410.819630889699,
392.002823267331,366.524491586128,346.007024304567,330.855331112747,
315.054408580886,301.983734973986,291.868197883278,282.177994928149,
271.353924100571,259.214073716761,248.585631396444,239.665366380624,
231.861268192783,225.630742860751,218.277024514259,212.716687406642,
206.582086372396,201.357806149762,196.14962727175,192.911353149594,
188.608204599638,183.788533442982,179.685258438599,175.552179879571,
172.463400063457,169.894408942514,167.044092291876,163.831785997593,
161.47691614838,158.837502649936,155.943699372474,153.183841055966,
150.732330599762,147.939294628713,144.856087995993,142.642196939403,
140.450994944426,137.859220714659,135.184664582288,132.086319785385,
128.800351366764,126.610279385988,123.763426656712,120.742717892872,
118.272662246317,115.323538386364,112.758601987185,110.584646913034,
108.606187763004,106.63248730141,104.32146264442,102.210183515564,
99.9869435038593,97.4756880617865,94.7406286042905,91.76339919494,
88.8543359971379,86.8876282755894,85.4499656361925,83.9501127965287,
82.4498857715343,81.1813634830595,80.1509395673963,79.3178005244771,
78.4727268920307,77.5090196280478,76.8010730943565,76.0439848506752,
75.4271595643007,74.8801490989295,74.1780861596169,73.6280741684785,
72.9934312473116,72.2781726904307,71.5269504716593,70.8400696489072,
70.0162553359706,69.1470967732868,68.4093284888538,67.3660773376135,
66.6685491936324,65.8391816150544,64.6409269393456,63.1524210298801,
61.1663260797913,55.9569676017759,54.2760735660415,53.2836589585018,
50.1866845949695,43.9789390979422,42.0961932459717)),.Names=c("v_rank",
"min","mean","med","max","sd","ymin","ymax"),row.names=c(NA,
-100L),class="data.frame") 
```

这里的图形**没有任何**坐标变换

```
library("ggplot2")

rk<- ggplot(mydata, aes(x = v_rank, y=med, width=0.8, lower = mean - sd, upper = mean + sd, middle = mean, ymin = min, ymax = max, group = v_rank )) + geom_point(colour="blue")

rk <- rk + geom_boxplot(stat="identity",alpha=.3,fatten=2)

rk<- rk  + theme_bw() + xlab('Rank of cities') + ylab('Population of cities')

plot(rk)

ggsave("myplotA.png", dpi=800) 
```

![在此处输入图像描述](../Images/050de2da6cac48c789a93a0ad78c25c7.png)

通过 y 坐标变换：

```
library("ggplot2")

rk<- ggplot(mydata, aes(x = v_rank, y=med, width=0.5, lower = mean - sd, upper = mean + sd, middle = mean, ymin = min, ymax = max, group = v_rank )) + geom_point(colour="blue")

rk <- rk + geom_boxplot(stat="identity",alpha=.3,fatten=2)

rk<- rk + coord_trans( y = "log10") + theme_bw() + xlab('Rank of cities') + ylab('Population of cities')

plot(rk)

ggsave("myplotB.png", dpi=800) 
```

如您所见，中间栏、顶部栏和底部栏在哪里？）

![在此处输入图像描述](../Images/51c53b7421b8d3cefd6f283c5d430bcb.png)

使用 x 和 y 坐标变换（**我要生成的图形包含 x 和 y 坐标变换，这是一个等级大小图 **）：

```
library("ggplot2")

rk<- ggplot(mydata, aes(x = v_rank, y=med, width=0.5, lower = mean - sd, upper = mean + sd, middle = mean, ymin = min, ymax = max, group = v_rank )) + geom_point(colour="blue")

rk <- rk + geom_boxplot(stat="identity",alpha=.3,fatten=2)

rk<- rk + coord_trans(x="log10", y = "log10") + theme_bw() + xlab('Rank of cities') + ylab('Population of cities')

plot(rk)

ggsave("myplotC.png", dpi=800) 
```

![在此处输入图像描述](../Images/67babf86407b9f55078a67336a9eb0c3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:31:02.793

你的第一行有问题，`(max< mean+sd)`因此第一个盒子很奇怪。其余的具有很小的下限，因为对数规模的内容被压缩为较小的值。

这是一个功能而不是一个错误。

如果您希望它是对称的，那么这意味着您要记录原始数据，然后计算 sd、mean、std 错误。然后在正常空间中绘制这些记录的摘要。

# c++ - 将 int8_t 转换为 std::string

> ID：13606814
> 
> 赞同：2
> 
> 时间：2012-11-28T13:59:38.803
> 
> 标签：c++, c++98

这对所有 C++ 编译器都正确吗？或者我应该先转换为 int 吗？

```
int8_t i = -128; 
std::string = boost::lexical_cast<std::string>((int16_t)i) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-28T14:09:14.240

您可以使用该`std::to_string`功能来执行此操作：

```
 std::int8_t i = -128; 
 std::string s=std::to_string(i); 
```

[http://en.cppreference.com/w/cpp/string/basic_string/to_string](http://en.cppreference.com/w/cpp/string/basic_string/to_string)

笔记：

我假设 C++11 因为固定宽度类型仅在 C++11 中添加

[http://en.cppreference.com/w/cpp/types/integer](http://en.cppreference.com/w/cpp/types/integer)

## 编辑

如果这不是 C++11（并且您在其他地方获得 typedef 形式（C99？）），那么您可以只提供源类型作为模板参数。

```
 std::string str=boost::lexical_cast<std::string, int>(i); 
```

[http://www.boost.org/doc/libs/1_40_0/libs/conversion/lexical_cast.htm#synopsis](http://www.boost.org/doc/libs/1_40_0/libs/conversion/lexical_cast.htm#synopsis)

# java - 从属性中获取 Null 值

> ID：13606815
> 
> 赞同：0
> 
> 时间：2012-11-28T13:59:40.723
> 
> 标签：java, servlets, null

在动态网络应用程序中，我遇到了一些问题，所以我发布了我的代码：

这是我的控制器（servlet）：

```
 String select = request.getParameter("select");  // getting proper value
        String search = request.getParameter("search");  // getting proper value
        request.setAttribute("select", select);
        request.setAttribute("search", search);
        System.out.println("Select : "+select+" Search : "+search);

            int page = 1;
            int recordsPerPage = 20;
            if(request.getParameter("page") != null)
                page = Integer.parseInt(request.getParameter("page"));
            SearchDAO searchDAO=new SearchDAO();
            List<User> list=searchDAO.searchAllUsers((page-1)*recordsPerPage,recordsPerPage,select,search);
            int noOfRecords = searchDAO.getNoOfRecords();
                    System.out.println("4> NoOfRecords : "+noOfRecords);
            int noOfPages = (int) Math.ceil(noOfRecords * 1.0 / recordsPerPage);
                    System.out.println("5> NoOfPages : "+noOfPages);
            request.setAttribute("searchList", list);
            System.out.println("6> List : "+list);
            request.setAttribute("noOfPages", noOfPages); // Getting null value, 0
            request.setAttribute("currentPage", page); // Getting null value, 0
            RequestDispatcher view = request.getRequestDispatcher("/jsp/Securex_Anti_Theft_SearchUserList.jsp");
            view.forward(request, response); 
```

这是我的 DAO（简单的 java 类）：

```
public class SearchDAO {
private int noOfRecords;
Connection connection;
Statement stmt;

    public List<User> searchAllUsers(int offset ,int noOfRecords,String select,String search){
    private static Connection getConnection() throws SQLException,ClassNotFoundException{
    Connection con = ConnectionFactory.getInstance().getConnection();
    return con;  //ConnectionFactory is class for making the connection to DB.
}
     String query="select SQL_CALC_FOUND_ROWS * from info where '"+select+
"' like '%"+search+"%' order by serialNo asc limit 
" + offset + " , " + noOfRecords;

    List<User> list1 = new ArrayList<User>();
    User user1=null;

    try {
        connection = getConnection();
        stmt = connection.createStatement();
        ResultSet rs=stmt.executeQuery(query);
        System.out.println("1> :"+rs);
        while(rs.next()){
        user1=new User();
        user1.setSerial(rs.getInt(1));
        System.out.println("I'm inside a loop");
        user1.setName(rs.getString(2));
        user1.setEmail(rs.getString(3));
        list1.add(user1);
        }

        rs.close();
        rs = stmt.executeQuery("SELECT FOUND_ROWS()");
        System.out.println("2> :" +rs);
        if(rs.next())
            this.noOfRecords = rs.getInt(1); 
           System.out.println("3> :" +this.noOfRecords);

    } catch (SQLException e) {
        e.printStackTrace();
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }finally
    {
        try {
            if(stmt != null)
                stmt.close();
            if(connection != null)
                connection.close();
            } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    return list1;

}

public int getNoOfRecords() {
    return noOfRecords;
}
} 
```

输出是：

```
1> :com.mysql.jdbc.JDBC4ResultSet@1af8502
2> :com.mysql.jdbc.JDBC4ResultSet@455aa8
3> :0
4> NoOfRecords : 0
5> NoOfPages : 0
6> List : [] 
```

我有相同的 servlet 和类用于选择所有用户，并且工作正常，但从这里获取空值。即使 ResultSet 返回值，即 com.mysql.jdbc.JDBC4ResultSet@88d319，但无法从 DAO 获取值到 servlet。

从`//`属性中获取空值，对我来说一切都应该很好但仍然得到空值，请随时指出我的错误，如果我做了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:35:16.950

您的 DAO 很可能返回空列表。所有其他代码看起来都很好。所以，首先我会检查这个电话

```
searchDAO.searchAllUsers((page-1)*recordsPerPage,recordsPerPage,select,search); 
```

变量的值是`page`多少？其他参数？请在以下之后记录**查询**：

```
 String query="select SQL_CALC_FOUND_ROWS * from info where '"+select+
"' like '%"+search+"%' order by serialNo asc limit 
" + offset + " , " + noOfRecords; 
```

并针对 DB 单独运行它，它应该会给你一个答案。

# java - 如何使用 Phonegap Android Screenshot PlugIn 旋转截图图像

> ID：13606822
> 
> 赞同：1
> 
> 时间：2012-11-28T14:00:06.963
> 
> 标签：java, android, cordova, plugins, exif

我正在使用 Phonegap 2.20 Android Screenshot 插件，它工作正常。现在我想保存旋转 270° 的图像 - 但我是 Java/Android 新手，需要一些帮助：

我试图重写EXIF数据如下

```
...

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyymmddhhmmss");
String filename = "Screenshot_" + dateFormat + ".png";
File f = new File(folder, filename); // System.currentTimeMillis()

//FileOutputStream fos = openFileOutput(f.getPath(), Context.MODE_PRIVATE);
FileOutputStream fos = new FileOutputStream(f);

// change image orientation to landscape                    
ExifInterface exif = new ExifInterface(filename);
exif.setAttribute(ExifInterface.TAG_ORIENTATION, "8");  // ExifInterface.ORIENTATION_ROTATE_270
exif.saveAttributes();

bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
//fos.close();

//Log.w(TAG, "TAG_ORIENTATION: " + exif.getAttribute(ExifInterface.TAG_ORIENTATION));

that.success(new PluginResult(PluginResult.Status.OK), id); 
```

但它总是抛出错误

> E/JHEAD(26853)：无法回写 - 未全部读取

所以我想我需要等到文件写完？是否有任何侦听器或回调或 slt？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:51:46.657

那么您将遇到的第一个问题是 ExifInterface 只能读取 jpg 数据而不能读取 png 数据。其次，您可以在 exif 标头中设置方向参数，但这实际上不会旋转图像。它仅向显示图像的程序提供有关如何正确显示图像的提示。

# php - 使用 Ajax 的 PHP 类值

> ID：13606827
> 
> 赞同：-3
> 
> 时间：2012-11-28T14:00:21.050
> 
> 标签：php, ajax, oop

是否可以在加载时使用 Ajax 获取 PHP 类变量？单击提交时会调用我的类，我想知道加载完成后是否有任何方法可以获取警报框中的值？

编辑：

```
class VacationCalc {
    ......

  function VacationLeft($date) {
    $someValue = (strtotime($date) - strtotime($this->worker->vacationStartDate)) / 86400;
    $rest = $someValue - $this->vacationWithoutPay;
    echo $this->leftDays = number_format($this->worker->daysInyear + ($rest * ($this->worker->vacationDaysInYear / 365.25)) - $this->daysAllreadyDone,1,',',' ');

    }
  }
} 
```

加载完成后，我想将值发送到警报框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:16:53.417

使页面与没有 AJAX 的任何其他页面一样，但只回显所需的输出。

比您可以毫无问题地通过 AJAX 调用结果。

# php - 缓存应用在哪里——Apache 还是浏览器？

> ID：13606833
> 
> 赞同：0
> 
> 时间：2012-11-28T14:00:45.580
> 
> 标签：php, firefox, caching, apache2, virtualbox

我正在运行安装了 CentOS 5.8 的 VirtualBox 服务器，以便为希望后端使用 1366 像素 x 768 像素固定宽度布局而不是现有 1024 像素 x 768 像素的客户开发新的管理界面。

```
httpd server is 'stock' Apache/2.2.3 as supplied as part of CentOS 5.8

php is 'stock' PHP 5.3.3 as supplied as part of CentOS 5.8 
```

大部分工作是对 css 文件进行更改以利用额外的宽度，因为这完全与客户端的布局有关。

问题是某处文件正在被缓存，我没有看到我对 css 文件所做的更改。Shift F5 和 Ctrl F5 在客户端浏览器上没有任何区别。

*这让我发疯并且需要很长时间才能解决，所以我发帖寻求帮助。我已经尝试了一些关于 .htaccess 调整和向链接 css 文件添加参数的假设“解决方案”，但都无济于事*

我觉得这是一个 httpd 问题，但许多所谓的“专家”都坚持认为这是一个浏览器问题。我已经在 MS Exploder、Opera、Chrome 和 Opera Mobile Emulator 中进行了测试，但没有立即看到 css 的任何变化。

我希望有人可以提供帮助，因为这一定会让其他开发人员感到沮丧。

如何在 VirtualBox CentOS 环境和 Firefox v17 上禁用所有缓存？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-27T08:32:50.990

我遇到过同样的问题。我在这里找到了解决方案：

[http://www.danhart.co.uk/blog/vagrant-virtualbox-modified-files-not-updating-via-nginx-apache](http://www.danhart.co.uk/blog/vagrant-virtualbox-modified-files-not-updating-via-nginx-apache)

问题是 VirtualBox 的共享文件夹不完全支持`sendfile()`所以你必须在你的 apache/nginx 配置文件中关闭它：

```
apache: EnableSendfile off

nginx: sendfile off; 
```

它对我有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:55:58.393

缓存可以发生在许多级别：服务器、浏览器或介于两者之间（代理、您的 ISP、您的路由器等）。

您是否安装了任何服务器端缓存软件？Varnish、Pagespeed 或类似的东西？

您可以通过将可变 URL 查询字符串添加到文件名来中断缓存 - 例如 load`mystyle.css?r=34234235`而不是`mystyle.css`. 更改数字将导致强制它重新加载为没有缓存的新 URL，无论缓存在哪里完成。

直接回答您的问题：在 Firefox 中，您可以通过打开选项窗口、高级选项、网络选项卡来明确清除缓存。这里有一个“清除缓存”按钮。如果这是浏览器缓存问题，这应该可以为您解决问题。这里还有一个功能可以管理缓存大小。将此设置为零以防止 Firefox 缓存任何内容（但要准备好让它加载页面慢得多）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:18:46.683

谢谢。

这不是路由器或 ISP 问题，因为服务器只是托管在 VirtualBox 容器中，文档根目录指向已安装的共享文件夹。

我正在使用这种方法，因为我必须支持几个不同的网站，并且一些主机正在运行 php v5.2，而另一些则在 v5.3 上。这也意味着我可以轻松检查有关已弃用功能的问题。

我尝试对样式表名称使用插件查询字符串，但是“查看源代码”显示了新名称，但内容仍然是“旧”表。

这不是浏览器问题，因为 Chrome、IE 和 Firefox 都显示相同的问题，所以它肯定是 Apache 服务器。

没有安装服务器端软件，它是 CentOS 5.8 DVD 中的简单“yum install httpd*”。

我通过创建 work-in-progress.php 并在文件顶部添加以下内容来解决缓存 css 的问题：

```
<?php
header("Content-type: text/css; charset: UTF-8");
?> 
```

然后，我使用 .php 扩展名将样式表加载为 <head> 中的最后一项。

```
<link rel='stylesheet' type='text/css' href='work-in-progress.php'> 
```

这有点俗气，但至少它适用于 css

我仍然需要解决 Apache 配置中要更改的参数，因为图像也被缓存，除非我每次修改背景图像时都更改文件名，否则我仍然会得到“旧”图像。

我已经尝试在进行更改后只进行服务 httpd restart ，但这似乎没有任何影响。

# magento - 用于 magmi 导入的 Cron 作业

> ID：13606834
> 
> 赞同：0
> 
> 时间：2012-11-28T14:00:50.147
> 
> 标签：magento, import, cron, magmi

嗨，我正在尝试将产品导入到我的 magento 中。我已经在临时基础上完成了所有工作，但现在我需要一个 cron。

理想情况下，我想使用 wget，因为这是最直接的。

所以我使用 wget "http://www.xxxxxx.com/magmi/web/magmi_run.php?profile=default&mode=xcreate&engine=magmi_productimportengine:Magmi_ProductImportEngine" -O /dev/null

但我在发送此错误消息 HTTP 请求时遇到问题，正在等待响应...在标头中读取错误（由对等方重置连接）。Coming up - 尝试 20 次然后放弃。

谁能告诉我可能是什么问题？谢谢理查德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-28T17:52:09.030

我建议使用[Magmi CLI 接口](http://wiki.magmi.org/index.php?title=Magmi_command_line)来处理运行的 cron 作业（因为 HTTP 连接可能有超时等）。

我会在您的 cron 作业上运行以下命令：

```
php /path/to/magmi/cli/magmi.cli.php -mode=create 
```

您可以通过参考此处的文档来定义自定义配置文件和模式：http: [//sourceforge.net/apps/mediawiki/magmi/index.php ?title=Magmi_command_line](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Magmi_command_line)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-09T11:08:41.827

我刚刚为 Magento 创建了一个扩展，允许您通过 Magento 的 cron 运行 Magmi。这也许可以帮助你

在这里免费下载-> [https://github.com/cameraki/Magento-Magmi-Via-Cron-Extension/](https://github.com/cameraki/Magento-Magmi-Via-Cron-Extension/)

有道理我在这里发布代码以防链接脱机，所以在这里。ps，因为我在 github 上做了一个带有扩展的自述文件，所以我在底部添加了这些信息来帮助你开始。

应用程序/代码/本地/Oli/Magmi/Cron.php

```
<?php
/**
 * Created by PhpStorm.
 * User: Oli
 * Date: 02/11/2017
 * Time: 17:05
 */

/* Change importer to the name of your Magmi directory */
require_once(Mage::getBaseDir() . "/importer/plugins/inc/magmi_datasource.php");
require_once(Mage::getBaseDir() . "/importer/integration/inc/productimport_datapump.php");

class Oli_Magmi_Cron {

    const LOG_DIRECTORY = "oli-extensions.log";

    public function runMagmi()
    {

        try {
            $directory = Mage::getBaseDir('var') . '/import/';
            $magmiCsvFile = $directory . 'magmiUploadReady.csv';

            if(!file_exists($magmiCsvFile)) {
                throw new Exception('CSV file for Magmi to upload cant be found.');
            }
        } catch (Exception $e) {
            $message = date('F jS (l) Y h:i:s A') . " === MAGMI (" . __METHOD__ . ") === Could not load todays magmiupload file. It must not have run today. This script will now stop: ".$e->getMessage();
            Mage::log($message, null, self::LOG_DIRECTORY);
            die();
        }

        $productArray = $this->csvToArray($magmiCsvFile);

        $indexes = 'catalog_product_attribute,catalog_product_price,cataloginventory_stock';
        $mode = 'update';
        $profile = 'cronUpdatePrices';
        try {
            $this->import($productArray, $mode, $profile);
        } catch (Exception $e) {
            $message = date('F jS (l) Y h:i:s A') . " === MAGMI (" . __METHOD__ . ") === There was an issue importing the products: ".$e->getMessage();
            Mage::log($message, null, self::LOG_DIRECTORY);
        }
        try {
            $this->reindex($indexes);
        } catch (Exception $e) {
            $message = date('F jS (l) Y h:i:s A') . " === MAGMI (" . __METHOD__ . ") === There is a problem with the reindex function: ".$e->getMessage();
            Mage::log($message, null, self::LOG_DIRECTORY);
        }
        /* log that it actually ran */
        $message = date('F jS (l) Y h:i:s A') . " === MAGMI (" . __METHOD__ . ") === Has finished running";
        Mage::log($message, null, self::LOG_DIRECTORY);

    }

    public function csvToArray($filename)
    {
        $productArray = array_map('str_getcsv', file($filename));
        array_shift($productArray);
        $newProductArray = array();
        /* Customise the item array index's to match the file you are importing */
        foreach ($productArray as $key => $item) {
            $newProductArray[$key]['sku'] = $item[0];
            $newProductArray[$key]['buy_price'] = $item[1];
            $newProductArray[$key]['price'] = $item[2];
            $newProductArray[$key]['store'] = $item[3];
            $newProductArray[$key]['price_updated'] = $item[4];
            $newProductArray[$key]['amazon_euros'] = $item[5];
            $newProductArray[$key]['amazon_dollars'] = $item[6];
            $newProductArray[$key]['qty'] = $item[7];
            $newProductArray[$key]['is_in_stock'] = $item[8];

        }
        return $newProductArray;
    }

    private function import($items, $mode, $profile)
    {
        if (count($items) > 0) {
            try{

                $dp = new Magmi_ProductImport_DataPump();
                $dp->beginImportSession($profile, $mode);
                foreach ($items as $item) {
                    $dp->ingest($item);
                }
                $dp->endImportSession();

            } catch (Exception $e) {
                $message = date('F jS (l) Y h:i:s A') . " === MAGMI (" . __METHOD__ . ") === Seems to be an issue with the import function: ".$e->getMessage();
                Mage::log($message, null, self::LOG_DIRECTORY);
            }
        }
    }

    private function reindex($string)
    {
        /** @var $indexer Mage_Index_Model_Indexer */
        $indexer = Mage::getModel('index/indexer');

        $processes = array();

        if ($string == 'all') {
            $processes = $indexer->getProcessesCollection();
        } else {
            $codes = explode(',', $string);
            foreach ($codes as $code) {
                $process = $indexer->getProcessByCode(trim($code));
                if ($process) {
                    $processes[] = $process;
                }
            }
        }

        /** @var $process Mage_Index_Model_Process */
        foreach ($processes as $process) {
            $process->reindexEverything();
        }
    }
} 
```

应用程序/代码/本地/Oli/Magmi/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Oli_Magmi>
            <version>0.0.1</version>
        </Oli_Magmi>
    </modules>
    <global>
        <models>
            <oli_magmi>
                <class>Oli_Magmi</class>
            </oli_magmi>
        </models>
    </global>
    <crontab>
        <jobs>
            <update_prices_via_magmi>
                <schedule>
                    <cron_expr>30 3 * * 2</cron_expr>
                </schedule>
                <run>
                    <model>oli_magmi/cron::runMagmi</model>
                </run>
            </update_prices_via_magmi>
        </jobs>
    </crontab>
</config> 
```

应用程序/etc/modules/Oli_Magmi.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Oli_Magmi>
            <active>true</active>
            <codePool>local</codePool>
        </Oli_Magmi>
    </modules>
</config> 
```

**Magento Magmi 通过 Cron 扩展**

Magento 扩展通过 Magento 的 cron 从 CSV 文件运行 Magmi

注意：这仅适用于 Magmi（Magento Mass Importer）

**这是做什么的？**

Magmi 允许您快速批量更改产品。它的速度很快，因为它直接导入数据库。因此请谨慎使用 Magmi，并在导入之前备份您的数据库。

这个扩展允许你使用 Magento 的 cron 自动运行 Magmi。非常适合每天自动更新产品定价，或每周一次批量更改库存水平。

**我可以开箱使用吗？**

您需要确保您的服务器上有 Magmi。然后：

*   在 app/code/local/Oli/Magmi/Cron.php 的第 10 和 11 行，将“/importer/....”更改为 Magmi 安装的位置。例如，“/magmi/....”
*   在 app/code/local/Oli/Magmi/Cron.php 的第 23 行，将 $magmiCsvFil 更改为您要从中导入的 CVS 文件的地址。更改此设置后，更改第 66 行周围的行以将 CSV 文件中的列映射到数组中。$newProductArray[$key]['...'] 的键应该与您正在更改的属性相匹配。例如，如果您想更新库存水平，您将使用 $newProductArray[$key]['qty'] 因为 'qty' 是 Magento 的库存水平。

**定制**

*   在 app/code/local/Oli/Magmi/Cron.php 的第 36 行，它设置了您要重新索引的 Magento 设置。我添加的是： catalog_product_attribute catalog_product_price cataloginventory_stock 您可能想要添加更多或更改这些。
*   在 app/code/local/Oli/Magmi/Cron.php 的第 37 行，这是 Magmi 模式。“create”创建和更新项目，“update”仅更新，“xcreate”仅创建。
*   在 app/code/local/Oli/Magmi/Cron.php 的第 38 行，将其更改为与您在 Magmi 中创建的配置文件的名称相匹配。如果您想使用默认配置文件，您可以使用“默认”，但是这值得一看，因为您要确保关闭动态索引，因为这个扩展重新索引最后是您的 magento 存储。如果您使用具有动态索引的配置文件，它将在每个产品之后重新索引，无缘无故地占用大量服务器负载。

**更多信息** 您可以在此处找到有关 Magmi DataDump API 的更多信息 -> [http://wiki.magmi.org/index.php/Magmi_Datapump_API](http://wiki.magmi.org/index.php/Magmi_Datapump_API)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-24T23:02:04.467

在某些情况下，我必须从 Magento cron 作业运行 Magmi，所以我有这样的事情：

```
/**
 * Includes Magmi files
 */
protected function _includeMagmi()
{
    $magentoBaseDir = Mage::getBaseDir();
    require_once($magentoBaseDir . DS . 'magmi' . DS . 'inc' . DS . 'magmi_defs.php');
    require_once($magentoBaseDir . DS . 'magmi' . DS . 'integration' . DS . 'inc' . DS . 'magmi_datapump.php');
}

/**
 * Runs Magmi to update/create for specified data
 *
 * @param string $profile Magmi import profile (@see magmi/conf/
 * @param string $mode
 * @param array $data
 */
protected function _runMagmiImport($profile, $mode, array $data)
{
    $this->_includeMagmi();

    $logger = Mage::getModel('mario/magmi_logger');

    /** @var Magmi_ProductImport_DataPump $dataPump */
    $dataPump = Magmi_DataPumpFactory::getDataPumpInstance('productimport');
    $dataPump->beginImportSession($profile, $mode, $logger);
    foreach ($data as $update) {
        $dataPump->ingest($update);
    }
    $dataPump->endImportSession();

    return $logger;
} 
```

# javascript - Eclipse Formatting 会破坏 JavaScript 脚本中的 EL 表达式

> ID：13606835
> 
> 赞同：4
> 
> 时间：2012-11-28T14:00:49.430
> 
> 标签：javascript, eclipse, jsp, formatting, el

哇，这个标题真是满嘴了。让我解释。我有一个`.jsp`页面，在这个页面上有一个 JavaScript`<script ..>`元素，在 JavaScript 里面有一个 EL 表达式 ( `${..}`)。代码如下所示：

```
<script type="text/javascript">
  jQuery(document).ready(function() {
    var HOST_ID = ${host.id};
    ...
  });
</script> 
```

**问题：**
Eclipse JavaScript 格式化程序将默认扩展`${host.id}`为多行。我猜测 EL 表达式以某种方式被解释为 JavaScript 对象。无论如何，标签最终会变成这样：

```
var HOST_ID = $
{
  host.id
}
; 
```

**=> 这实际上破坏了代码！**

如果拆分为多行，则该标记不再被识别为有效的 EL 表达式，并且 JavaScript 代码的执行将停止抛出异常。

`// @formatter:off`我知道一种使用标签（或）关闭 Java 格式化程序中的即席格式化的方法，`on`但是 Eclipse 中的 JavaScript 格式化程序没有这样的选项。

* * *

解决此问题的唯一方法（读取解决方法）是强制 JavaScript 格式化程序*从不*扩展对象。但这在两个方面存在问题：

*   不扩展对象可能会非常混乱并导致代码极其不可读。
*   在多行上展开对象是Eclipse JavaScript 格式化程序中的*默认设置。*

这意味着，如果我的团队中的任何成员意外地自动格式化了`.jsp`包含所描述结构的文件，则代码将静默中断。它看起来仍然像有效的 JS，并通过了构建等，但在执行时它不起作用。

* * *

有没有人对此有任何解决方案？最好的解决方案是使用 Java 格式化程序中使用的标记以某种方式禁用格式化（此解决方案无需强制执行公司/团队范围的格式化程序标准或希望没有人会意外地按 Shift+Ctrl+F）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-30T15:53:42.860

在我写这篇文章时，公认的解决方案建议将 EL 表达式用单引号括起来作为问题的解决方案。如果您决定这样做并且 EL 表达式中的值是布尔值，请非常小心，因为该值现在是 Javascript 中的字符串，并且条件比较可能无法按预期工作......

假设您有一个布尔变量 host.isActive 并且值为 true。

```
var HOST_IS_ACTIVE1 = ${host.isActive}; // var type is boolean in Javascript

if (HOST_IS_ACTIVE1 == true) {
  // this code will be executed
}

if (HOST_IS_ACTIVE1 == 'true') {
  // this code will not be executed
}

var HOST_IS_ACTIVE2 = '${host.isActive}'; // var type is string in Javascript

if (HOST_IS_ACTIVE2 == true) {
  // this code will NOT be executed
}

if (HOST_IS_ACTIVE2 == 'true') {
  // this code will be executed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T09:17:45.980

显然，可以将 EL 表达式用*单引号括起来*。这将使它们看起来像 JavaScript 中的字符串，但它们仍将被评估为 EL 表达式。

如此变化

```
var HOST_ID = ${host.id}; 
```

到

```
var HOST_ID = '${host.id}'; 
```

实际上可以解决问题。Eclipse JavaScript 格式化程序现在将表达式视为一个字符串并且不会对其进行扩展。问题解决了。

# sql-server-2008 - 使用 XQuery 根据 XML 中的条件更新属性值

> ID：13606837
> 
> 赞同：0
> 
> 时间：2012-11-28T14:00:52.320
> 
> 标签：sql-server-2008, tsql, xquery

我有以下 XML

```
<Root xmlns:test="http://sample">
   <Values>
      <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="1">
      </Value>
      <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="1">
      </Value>
      <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2">
      </Value>
      <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2">
      </Value>
      <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="1">
      </Value>
   </Values>
</Root> 
```

在这里，我尝试使用 to 更新所有值`type=2`元素`type = 3`。

请问有人可以告诉我这是怎么做到的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:29:43.753

```
declare @XML xml = 
'<Root xmlns:test="http://sample">
  <Values>
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="1"></Value>
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="1"></Value>
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2"></Value>
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2"></Value>
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="1"></Value>
  </Values>
</Root>';

while @XML.exist('declare namespace d3p1="http://www.w3.org/2001/XMLSchema-instance";
                  /Root/Values/Value[@d3p1:type = "1"]') = 1
begin
  set @XML.modify('declare namespace d3p1="http://www.w3.org/2001/XMLSchema-instance";
                   replace value of (/Root/Values/Value[@d3p1:type="1"]/@d3p1:type)[1] 
                   with 2')
end

select @XML 
```

结果：

```
<Root xmlns:test="http://sample">
  <Values>
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2" />
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2" />
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2" />
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2" />
    <Value xmlns:d3p1="http://www.w3.org/2001/XMLSchema-instance" d3p1:type="2" />
  </Values>
</Root> 
```

# java - 类正在实现可运行接口但未定义运行方法

> ID：13606838
> 
> 赞同：1
> 
> 时间：2012-11-28T14:00:56.340
> 
> 标签：java, multithreading

```
class Qus3 extends Thread implements Runnable {

    public static void main(String args[]) {
        Qus3 q3 = new Qus3();
        q3.start();
    }
} 
```

这段代码编译没有任何错误，但不需要定义接口的所有方法，否则声明类抽象。在上面的代码中，类没有被声明为抽象，并且 run() 也没有被类定义，尽管它已经实现了Runnable接口，为什么代码还是正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:02:54.983

线程实现可运行。[来自 API](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)：

> 公共无效运行（）
> 
> 如果该线程是使用单独的 Runnable 运行对象构造的，则调用该 Runnable 对象的 run 方法；否则，此方法不执行任何操作并返回。
> 
> Thread 的子类应覆盖此方法。

所以你不会得到一个编译错误，但`run`不会做任何事情。新启动的线程将执行空运行方法并终止。

您的代码是正确的，但最好避免扩展 Thread，创建一个单独的 Runnable 并将其传递给新线程。这样，您不仅可以扩展 Thread 以外的东西，而且不会冒意外覆盖线程方法的风险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:02:56.603

线程覆盖运行，因为你扩展线程，你的运行方法被实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T07:25:17.480

类实现了可运行但也扩展了线程。Thread 内部也实现了 Runnable 并为其提供了实现。这就是它编译成功的原因。

如果你**删除`extends Thread`**，你会看到它会给出编译错误。

# vba - VBA 邮件合并长度 > 255

> ID：13606840
> 
> 赞同：3
> 
> 时间：2012-11-28T14:01:05.637
> 
> 标签：vba, ms-office, ms-word, office-2010, mailmerge

我正在尝试将 MailMerge 与 Word 2010 一起使用。

我有一个 TAB 分隔的文件 database.dat，如下所示：

```
ID       Name       Street
1        John       FooBar 1
2        Smith      FooBar 2 
```

此文件在 Word 中使用以下 VBA 代码：

```
ActiveDocument.MailMerge.OpenDataSource Name:="C:/database.dat", _
    ConfirmConversions:=False, ReadOnly:=False, LinkToSource:=True, _
    AddToRecentFiles:=False, Revert:=False, Format:=wdOpenFormatAuto 
```

我现在可以在文本中使用文件中的字段。所以一切正常。

**问题：**

我需要对 VBA 中的数据做一些进一步的阐述，所以我获取 MergeField 值：

```
Function getInfoField(mergefield As String)
    On Error GoTo MergeFieldNotFound:
    getInfoField = ActiveDocument.MailMerge.DataSource.DataFields(mergefield).Value
    GoTo EndFunc
MergeFieldNotFound:
    getInfoField = ""
EndFunc:
End Function 
```

但如果合并字段值的长度超过 255 个字符，它将被截断。所以如果我插入

```
MsgBox Len(ActiveDocument.MailMerge.DataSource.DataFields(mergefield).Value) 
```

它为具有例如 500 个字符的字符串输出 255。

但直接在 word 文档中，所有 500 个字符都显示为合并字段。

**问题：**

如何从 VBA 的合并字段中获取超过 255 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T18:11:37.360

我还没有尝试过，但以下方法可能有效：

1.  您创建一个文档变量来保存全文 您在 Mail Merge Main 文档中为此字段使用 DOCVARIABLE 字段而不是 MERGEFIELD 字段

2.  在 MailMergeBeforeRecordMerge 事件中，您

    一个。将 MERGEFIELD 字段临时插入到可以轻松提取其结果的位置（例如，在文档的开头）

    湾。如有必要，更新字段（例如 Doc.Fields(1).Update）

    C。检索文本（Doc.Fields(1).Result.Text

    d。删除您插入的字段

    e. 根据需要操作文本

    F。将结果放入文档变量

    G。如有必要，更新 DOCVARIABLE 字段。

请注意 - 我不记得详细信息，但某些版本的 Word 不能很好地处理 DOCVARIABLE 字段中的某些字符，尤其是当它们位于表格内时。

否则，我认为您将不得不尝试打开与该文件的另一个连接（例如，可以使用 ADO 和 Jet/ACE 提供程序+文本文件 IISAM 来执行此操作），这可能会使提取文本更容易，但是您必须拥有一种机制（例如唯一键），以使您能够通过 ADO 检索正确的记录，如当前在 MailMerge 中选择的那样。

# mono - 从崩溃的单声道应用程序中捕获堆栈跟踪，通过单声道服务在 Linux 中作为服务运行

> ID：13606844
> 
> 赞同：3
> 
> 时间：2012-11-28T14:01:06.120
> 
> 标签：mono, mono-service

我在 Ubuntu 中运行一个偶尔会崩溃的应用程序。我想在崩溃发生时捕获堆栈跟踪。这可能吗？

我正在像这样启动我的应用程序：

单服务-m:logfile.out application.exe

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T21:03:09.160

您是否在应用程序中捕获未处理的异常？看一眼：

[http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

这应该允许您至少记录任何未处理的异常，以便您可以更好地了解正在发生的事情。

# python - 修改较少文件时Django运行bash脚本

> ID：13606845
> 
> 赞同：1
> 
> 时间：2012-11-28T14:01:09.087
> 
> 标签：python, django, less

我编写了使用lessc 将*.less 文件转换为*.css 的bash 脚本。不幸的是，当 *.py 文件被修改时，来自 BaseRunserverCommand 的运行功能仅重新启动服务器。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:09:50.963

您可以编写自己的命令继承自[`django.core.management.commands.runserver.Command`](https://github.com/django/django/blob/master/django/core/management/commands/runserver.py#L21), 用您自己的覆盖`run()`方法，这将使用您自己的`autoreload`：

```
def run(self, *args, **options):
    """
    Runs the server, using the autoreloader if needed
    """
    use_reloader = options.get('use_reloader')

    if use_reloader:
        autoreload.main(self.inner_run, args, options)
    else:
        self.inner_run(*args, **options) 
```

但是，您自己的 实例`autoreload`将只需要覆盖[`code_changed()`函数](https://github.com/django/django/blob/master/django/utils/autoreload.py#L55)以考虑也`*.less`和`*.css`（或更多）文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T20:59:17.453

正确覆盖[code_changed()](https://github.com/django/django/blob/master/django/utils/autoreload.py#L55)函数似乎有点困难，所以我决定编写自己的脚本来转换 *.less 文件，这些文件已修改或没有 *.css 文件。该脚本在[reloader_thread()](https://github.com/django/django/blob/master/django/utils/autoreload.py#L92)中运行：

```
import sys, time
from subprocess import call

from django.conf import settings
from django.utils import autoreload

from django.core.management.commands.runserver import Command

def convert_less():
    status = call([settings.CONVERT_LESS, settings.LESS_DIR, settings.CSS_DIR])
    if status != 0:
        exit(1)

def reloader_thread():
    autoreload.ensure_echo_on()
    while autoreload.RUN_RELOADER:
        convert_less()
        if autoreload.code_changed():
            sys.exit(3) # force reload
        time.sleep(1)

autoreload.reloader_thread = reloader_thread 
```

塔德克，谢谢你的线索:)

我想这个问题也可以通过编辑[BaseCommand.option_list来解决](https://github.com/django/django/blob/master/django/core/management/commands/runserver.py#L22)

# mysql - MySQL：选择除列之外只有唯一值的行

> ID：13606846
> 
> 赞同：1
> 
> 时间：2012-11-28T14:01:09.443
> 
> 标签：mysql, sql

这是我的情况：我有一个重复值有效的表（ID 字段除外），我只想检索唯一值。

例如，如果我有寄存器：

```
+----+--------------+-------------+------+------+-------+-----+
| ID | SATELLITE_ID | ATT_TYPE_ID | TIME | ROLL | PITCH | YAW |
+----+--------------+-------------+------+------+-------+-----+
|  1 |            1 |           1 | 2012 |  1.0 |   2.0 | 1.3 |
+----+--------------+-------------+------+------+-------+-----+
|  2 |            1 |           1 | 2012 |  1.0 |   2.0 | 1.3 |
+----+--------------+-------------+------+------+-------+-----+
|  3 |            1 |           1 | 2011 |  1.0 |   2.0 | 1.3 |
+----+--------------+-------------+------+------+-------+-----+ 
```

我只想检索 2 和 3（ID 1 和 2 是“相等的”，而 3 的时间不同）。

这是表结构

```
mysql> describe attitude;
+--------------+--------------+------+-----+---------+----------------+
| Field        | Type         | Null | Key | Default | Extra          |
+--------------+--------------+------+-----+---------+----------------+
| ID           | int(11)      | NO   | PRI | NULL    | auto_increment |
| SATELLITE_ID | int(11)      | NO   |     | NULL    |                |
| ATT_TYPE_ID  | int(11)      | NO   |     | NULL    |                |
| TIME         | varchar(4)   | NO   |     | NULL    |                |
| ROLL         | double       | NO   |     | NULL    |                |
| PITCH        | double       | NO   |     | NULL    |                |
| YAW          | double       | NO   |     | NULL    |                |
+--------------+--------------+------+-----+---------+----------------+ 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:07:21.687

您可以将`max()`聚合应用于`ID`列，然后`GROUP BY`将其余部分应用于：

```
select max(id) id, SATELLITE_ID, ATT_TYPE_ID, TIME, Roll, Pitch, yaw
from attitude
group by SATELLITE_ID, ATT_TYPE_ID, TIME, Roll, Pitch, yaw
order by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/6d6b4/4)

结果：

```
| ID | SATELLITE_ID | ATT_TYPE_ID | TIME | ROLL | PITCH | YAW |
---------------------------------------------------------------
|  2 |            1 |           1 | 2012 |    1 |     2 |   1 |
|  3 |            1 |           1 | 2011 |    1 |     2 |   1 | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:07:09.237

尝试：

```
SELECT DISTINCT SATELLITE_ID, ATT_TYPE_ID, TIME, ROLL, PITCH, YAW
FROM ATTITUDE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:06:35.057

尝试这个：

```
select SATELLITE_ID, ATT_TYPE_ID, TIME, ROLL, PITCH, YAW 
from ATTITUDE
group by SATELLITE_ID, ATT_TYPE_ID, TIME, ROLL, PITCH, YAW 
```

或者你可以使用`distinct`

```
select distinct SATELLITE_ID, ATT_TYPE_ID, TIME, ROLL, PITCH, YAW 
from ATTITUDE 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:04:20.257

```
select max(ID) from attitude
  group by SATELLITE_ID, ATT_TYPE_ID, TIME, ROLL, PITCH, YAW; 
```

这通过 SATELLITE_ID、ATT_TYPE_ID、TIME、ROLL、PITCH 和 YAW 的不同值任意分组。如果您遗漏了其中一些字段，那仅意味着可能会有更少的群体，更少的理由彼此不同。

# assembly - 汇编代码错误

> ID：13606852
> 
> 赞同：-3
> 
> 时间：2012-11-28T14:01:31.847
> 
> 标签：assembly

我遇到了这个汇编代码，在尝试编译它时它说有一个错误。对组装不太了解，我想知道是否有人可以帮助我。提前致谢。

```
JMP 0x1F
POPL %ESI
MOVL %ESI, 0x8(%ESI)
XORL %EAX, %EAX 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:34:29.187

在 的 目的地放置一个标签`JMP`并使用它而不是常量`0x1F`。或者，知道指令的长度，使用诸如 的结构`JMP .+length+offset`，在这种情况下长度是 2 个字节，所以它变成`JMP .+0x21`。然后，这将被编码为`0xeb 0x1f`phrack 链接显然想要的。x86 中的相对跳转被编码为从下一条指令开始的偏移量，如果您不知道指令长度，您可以在指令之后放置一个标签，如下所示：

```
JMP next+0x1f
next:
POPL %ESI
MOVL %ESI, 0x8(%ESI)
XORL %EAX, %EAX 
```

（本地标签可能会有所帮助，但在这种特殊情况下`1f+0x1f`会非常混乱。）

请注意，在汇编代码时，汇编器可能会选择您不期望的编码，因此如果您不使用标签，则会弄乱您的偏移量。

# c# - Fisher-Yates 在单个字符串上随机播放与使用等长排列？

> ID：13606855
> 
> 赞同：2
> 
> 时间：2012-11-28T14:01:41.097
> 
> 标签：c#, permutation, shuffle

现在，我正在开发一套文字游戏作为自学的一种方式（并重新创建一些我最喜欢的文字游戏！）在一位“实际”学习过编程的朋友的帮助下，我们在其中一个中实现了一个很好的排列方法我的课程。它正在查找 3 个字母及以上的所有排列，并将它们与我拥有的字符串列表进行比较，其中包含基本上是拼字游戏比赛单词列表。

这就是背景，这是我当前的问题：我现在拥有所有排列并将它们与现有单词进行比较，并创建了一个新列表，其中包含给定字符串中所有可能的单词组合。但是，当我将此字符串呈现给用户时，我需要对其进行加扰。我发现了一些 Fisher-Yates shuffle 的 C# 实现，但我没有成功地调整它们以接受单个字符串（编辑：Fisher-Yates 问题用 char[] 数组解决）。然后我想到了一个小技巧——为什么不使用长度相同但 != 原始单词的排列之一。

不幸的是，每次我的条件语句都向后返回单词。最终用户并不难弄清楚:)这是我的加扰代码：

```
// permWords is a Dictionary<int, List<string>>
String strScrambled= "";

        foreach (List<string> listWords in permWords.Values)
        {
            foreach (string word in listWords)
            {
                if (word.Length == strWord.Length && word != strWord)
                {
                    strScrambled = word;
                }

            }
        } 
```

我尝试`strScrambled = word + 1`假设第一个不等于原始排列的排列是向后的单词。但是，我认为这在这种情况下并不真正“有效”。特别是考虑到它仍然返回相同的反向词。

对于如何使用 char 数组解决我与 Fisher-Yates 的问题，已经给出了一个非常有用的答案，但我仍然很想知道如何最好地使用我发布的内容，只找到一个方法来确保答案不是简单的倒写单词。我对这种方法很感兴趣，因为排列列表已经存在；我想利用它作为我的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:50:24.860

我想你已经有一个洗牌的方法：

```
void FisherYatesShuffle(char[] elements)
{
    int N = elements.Count;
    for(int i = 0; i<N-1; i++)
    {
        // exchange elements[i] with a random element in i+1 .. N
    }   
} 
```

您需要做的就是将您的字符串转换为 CharArray，然后将结果转换回字符串：

```
string shuffle(string input)
{
    var arr = input.ToCharArray();
    FisherYatesShuffle(arr);
    return new String(arr);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:33:52.563

看看这是否适合你...

```
string str = "hello";

// The random number sequence
Random num = new Random();

string rand = str;
while (rand == str)
    rand = new string(str.OrderBy(s => (num.Next())).ToArray()); 
```

如果您想确保洗牌后的值不是完全相反，您可以将 while 条件更改为 ...

```
while (rand == str || rand == str.Reverse()) 
```

# ruby-on-rails - 特殊字符替换为“？”

> ID：13606857
> 
> 赞同：1
> 
> 时间：2012-11-28T14:01:42.970
> 
> 标签：ruby-on-rails, forms, post, special-characters

我有要提交的简单 html 表单。它是登录表单。我在 ruby​​ on rails 控制器上提交它。当其中一个输入（电子邮件）的值中有一些特殊字符时，例如 č、ć、đ、š 或 ž。这些字符被替换为 ? 特点。

如果我在输入字段 user?@domain.com 中有值，它将不会通过对 "/\A[\w\d._%-]+\@[\w\d.-]+.[\w] 的评估{2,4}\z/"

但例如，值 userž@domain.com 在 ruby​​ 代码中被视为（使用 puts 方法）为 user?@domain.com 并且它通过了上面提到的正则表达式验证。

我正在使用 jruby 1.6.5.1 和 Rails 2.3.8

有谁知道这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:20:47.203

`\w`在正则表达式中似乎也捕捉到了 č、ć 等（unicode 字符）。如果你只想要你应该使用的“普通”字符`A-Za-z0-9_`，那么你的正则表达式将是

```
/\A[A-Za-z\d._%-]+\@[A-Za-z0-9_.-]+.[A-Za-z0-9_]{2,4}\z/ 
```

不需要 0-9，因为您已经`\d`在`[]`. 但是如果我应该写它，我也会使用 0-9 来让它更具可读性，我更喜欢`^`and`$`而不是`\A`and `\z`。那将是（有一些其他的小调整）：

```
/^[A-Za-z0-9_.%-]+\@[A-Za-z0-9_.-]+.[A-Za-z]{2,4}$/ 
```

我不确定您为什么允许`%`使用正则表达式？（在您的问题中包含在您的正则表达式中）。

**编辑：** 我做了一些搜索，根据平台的不同，Regexp 中的 unicode 字符的行为似乎有所不同。据我了解，例如在 Java`\w`中仅限于`[A-Za-z0-9_]`，但在其他平台中，unicode 字符可以包含在`\w`. 这是我从以下链接中发现的：

**以下是一些链接：**

[使用 Java 正则表达式匹配（例如）Unicode 字母](https://stackoverflow.com/questions/5315330/matching-e-g-a-unicode-letter-with-java-regexps)

在那个线程中我找到了这些链接：

（与此相同的问题）[Java 正则表达式中 \w 和 \b 的 Unicode 等价物？](https://stackoverflow.com/questions/4304928/unicode-equivalents-for-w-and-b-in-java-regular-expressions)

（来自正则表达式教程）[http://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

# php - php number_format 函数将 11223344556677 更改为 1122334455/66/77

> ID：13606858
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:01:45.157
> 
> 标签：php, number-formatting

我试过这个：

```
$number = 11223344556677;
echo number_format($number,2,'/',2,'/',''); 
```

但没有得到结果。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:05:16.030

好吧，`number_format`不是为了这样做。您可以通过多种方式自己完成，例如：

```
echo preg_replace('/^(\d*)(\d{2})(\d{2})$/', '$1/$2/$3', $number); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:05:30.653

像这样的东西？

```
$formatted_number = preg_replace('(\d+?)(\d\d)(\d\d)','$1/$2/$3',$number); 
```

# html - Firefox 上的负边距换行问题（内联列表）

> ID：13606860
> 
> 赞同：1
> 
> 时间：2012-11-28T14:01:46.030
> 
> 标签：html, css, separator

我正在开发带有分隔符的垂直菜单（仅限 CSS）。为了在悬停时隐藏这些分隔符，我尝试使用边框 + 负边距（取消边框）。但是在 Firefox 上它会创建一个换行符......我该如何解决它？谢谢

[http://jsbin.com/akazuf/1/edit](http://jsbin.com/akazuf/1/edit)（完整尝试输出） ![在此处输入图像描述](../Images/252fdedb7573be30439d863b978dc8ac.png)

注意：悬停将为黑色，红色用于测试。

这里没有解决方案：[导航分隔符](https://stackoverflow.com/questions/5688791/separators-for-navigation):(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:12:28.183

如果您根本不想要换行符，则可以添加`white-space: pre;`到`#header .nav a`样式中。

[https://developer.mozilla.org/en-US/docs/CSS/white-space](https://developer.mozilla.org/en-US/docs/CSS/white-space)

编辑：更优雅的解决方案可能是切换边框方向（`border-left`to `border-right`，`margin-right`to `margin-left`：

```
#header .nav a {
    border-right: 2px solid #000000;
    font-family: 'Cuprum',sans-serif;
    font-size: 14px;
    padding: 0 25px;
    text-transform: uppercase;
}

#header .nav .current-menu-item a, #header .nav a:hover {
    background: none repeat scroll 0 0 #FF0000;
    border-left: 2px solid #000000;
    color: #FFFFFF;
    margin-left: -2px;
    padding: 14px 25px;
    text-decoration: none;
} 
```

# joomla - Joomla 网站无法正常工作

> ID：13606864
> 
> 赞同：0
> 
> 时间：2012-11-28T14:02:12.237
> 
> 标签：joomla, joomla2.5

我有一个名为 Ptbnews24 [http://www.ptbnews24.com](http://www.ptbnews24.com)的站点。该站点是使用 Joomla 2.5 创建的，当我单击类别或菜单链接时出现问题，它显示错误`No input file specified.`我不知道如何解决这个问题，有人可以提供解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:07:57.550

作为基本摘要，请确保您拥有`Apache mod_rewrite = Yes`和`Search Engine Friendly URLs = Yes`。然后在**.htaccess**文件中，您必须具有以下内容：

```
Options +FollowSymLinks
Options -MultiViews
RewriteEngine On
RewriteBase / 
```

如果您已经对此有所了解，请查看有人在[Joomlart 论坛](http://www.joomlart.com/forums/showthread.php?17234-Getting-SEO-to-work-on-GoDaddy-Shared-Accounts)上提供的解决方案。

注意：要确定**Apache mod_rewrite**是否设置为**"yes"**，您需要联系您的主机。然而，它很可能是默认的。

# jquery - HTML/CSS 元素不能被强制为背景

> ID：13606866
> 
> 赞同：0
> 
> 时间：2012-11-28T14:02:26.807
> 
> 标签：jquery, html, css, z-index

我正试图解决一个我现在盯着一个小时的问题。我正在处理[这个页面](http://bobmetz.nl/v3/)，我的问题出在菜单上。

我有一个导航列表，其中包含一个特殊的绝对定位列表项（#magic-line），以在悬停其他项目（使用 jQuery）时形成背景，以提供良好的效果。问题是它一直停留在导航列表项的前面，导致错误行为。

我一直在给导航列表项和其中的锚点一个 z-index 200，同时给绝对定位的列表项一个 z-index 100。据我所知，这应该可以立即解决问题。但显然它没有。我可能忽略了一个生硬的细节。希望你们能给这个新的亮点。

HTML 如下所示：

```
<nav>
    <ul class="group">
        <li class="current"><a href="/v3/" data-section="#start">Home</a></li>
        <li><a href="/v3/over-mij/" data-section="#over-mij">Over Mij</a></li>
        <li><a href="/v3/portfolio/" data-section="#portfolio">Portfolio</a></li>
        <li><a href="/v3/inspiraties/" data-section="#inspiraties">Inspiraties</a></li>
        <li><a href="/v3/contact/" data-section="#contact">Contact</a></li>
        <li id="magic-line" style="width: 63px; height: 48px; left: 0px; overflow: hidden;"></li>
    </ul>
</nav> 
```

影响这个 HTML 的 CSS 部分是：

```
nav{
    color: #edebe6;
    font-size: 1.2em;
}
nav ul{
    padding: 0;
    list-style: none;
    display: block;
    position: relative;
}
nav ul li{
    float: left;
    z-index: 200;
}
nav ul li a{
    color: #edebe6;
    text-decoration: none;
    display: block;
    float: left;
    padding: 10px;
    border: none;
    z-index: 200;
}
nav ul li a:hover{
    background-color: transparent;
}
nav #magic-line{
    position: absolute;
    top: 0;
    left: 0;
    width: 100px;
    background-color: #d3643b;
    z-index: 100;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:13:01.380

经过测试，如果您`position: relative`在菜单项上进行设置，它会按预期工作。

```
nav ul li a {
    border: medium none;
    color: #EDEBE6;
    display: block;
    float: left;
    padding: 10px;
    position: relative;
    text-decoration: none;
    z-index: 200;
} 
```

这些项目没有考虑 z 顺序。

# python - 多进程和子进程有什么区别？

> ID：13606867
> 
> 赞同：93
> 
> 时间：2012-11-28T14:02:29.337
> 
> 标签：python, subprocess, multiprocessing

我的工作应该使用并行技术，我是 python 的新用户。所以我想知道你是否可以分享一些关于 python`multiprocessing`和`subprocess`模块的材料。这两者有什么区别？

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-11-28T14:15:17.393

该`subprocess`模块允许您运行和控制其他程序。任何可以从计算机上的命令行开始的东西，都可以通过这个模块运行和控制。使用它来将外部程序集成到您的 Python 代码中。

该`multiprocessing`模块允许您将用 python 编写的任务划分为多个进程，以帮助提高性能。`threading`它提供了一个与模块非常相似的 API ；它提供了在它创建的进程之间共享数据的方法，并使管理多个进程以运行 Python 代码的任务（更）容易。换句话说，`multiprocessing`让您可以利用多个进程通过并行执行代码来更快地完成任务。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-11-28T14:06:26.030

如果你想调用一个外部程序（尤其是不是用 Python 编写的），请使用`subprocess`.

如果要在子进程中调用 Python 函数，请使用`multiprocessing`.

（如果程序是用 Python 编写的，但也是可导入的，那么我会尝试使用 调用它的函数`multiprocessing`，而不是通过外部调用它`subprocess`。）

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-11-28T14:07:21.170

子进程产生新进程，但除了标准输入/标准输出和其他程序可能实现的任何其他 API 之外，您无法与它们通信。它的主要目的是启动与您自己的程序完全分离的进程。

多处理也会产生新的进程，但它们运行您的代码，并且旨在相互通信。您可以使用它在您自己的程序中跨多个 CPU 内核划分任务。

# php - 创建名称服务器十六进制标头

> ID：13606868
> 
> 赞同：0
> 
> 时间：2012-11-28T14:02:30.960
> 
> 标签：php, sockets, wireshark, nameservers

我必须向名称服务器发出请求。socketpart 的工作就像一个魅力，但要创建包我有一些问题。

```
$domainname = "google.nl";

$hexdomain = ascii2he($domainname);

$package = "\x01\x01\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x0b".$hexodmain."\x00\x00\xff\x00\x01"; 
```

这应该是我发送到名称服务器的包，但包不正确。创建 $package 的正确方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:09:53.487

首先，您传递给名称服务器的名称不是点分隔的，而是名称的每个部分都是单独传输的。

其次，您不发送转换为十六进制的数据，而是直接发送它们。十六进制 ( `\x01\x01`) 只是表示。

因此，您将以`google.nl`形式对您的名称进行编码`"\x06google\x02nl\x00"`，因为每个名称部分前面都有它的长度，最后一个后面是一个`\x00`空字符串的含义 - 这反过来表示名称链的结尾。

因此，为了保持可变性，您应该将您的域名拆分为其组件，并在每个组件前面加上相应的长度字节。

就像是

```
function domain2dns($domain)
{
    $split = explode(".", $domain);
    $target = ""; // cumulate here
    foreach ($split as $part) {
        // For every $part, prepend one byte denoting its length.
        // strlen($part) is its length which is supposed to be put into one character.
        $target .= chr(strlen($part)).$part;
    }
    return $target . "\x00";
} 
```

可能有用

```
$domainname = "google.nl";

$dnsdomain = domain2dns($domainname);

$package = "\x01\x01\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00" . $dnsdomain . "\x00\xff\x00\x01"; 
```

# java - JAXB 和 XSLT 性能

> ID：13606872
> 
> 赞同：1
> 
> 时间：2012-11-28T14:02:45.153
> 
> 标签：java, xslt, jaxb, marshalling, unmarshalling

我有以下代码来执行从一个 JAXB 注释对象到另一个 JAXB 注释对象的 XSLT 转换。在这种情况下，性能真的会很差吗？它将 JAXB 对象编组为 XML，将其转换为另一个 XML 并解组，还是这里有更好的技巧？

```
TransformerFactory transformerFactory = TransformerFactory.newInstance();
Transformer transformer = transformerFactory.newTransformer(new StreamSource(mapping.getInputStream()));
JAXBResult result = new JAXBResult(JaxbUtils.getJAXBContext(CalypsoUploadDocument.class));
transformer.transform(new JAXBSource(JaxbUtils.getJAXBContext(CalypsoUploadDocument.class), uploadMessage),result);

return result.getResult(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:21:38.903

如果使用 Java 6（我的生产经验基于 Oracle JDK），这也是我们采用的有效方法。性能相当不错。一个小的改进是使用模板实例。

另一方面，如果您的应用程序有一个或几个转换，并且转换本身不会随着时间而改变，我不推荐这种方法。然后直接的方法要快得多（java实例-> java映射-> java实例）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T16:10:24.707

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

**替代方法**

如果您碰巧使用 MOXy 作为您的 JAXB 提供程序，那么您可以拥有一个映射到两个 XML 模式的 Java 模型。您可以使用标准 JAXB (JSR-222) 注释映射到第一个，并使用 MOXy 的外部映射文档映射到第二个。下面是我博客的链接，我使用这种方法将一个对象模型映射到 Google 和 Yahoo 天气服务的输出。

*   [http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html](http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T14:22:26.010

这取决于 XSLT 处理器。Saxon 的商业版可以在流模式下做一些转换。`JAXBSource`扩展`SAXSource`等也适用于事件流。对于更复杂的转换或使用其他 XSLT 处理器，实现可能首先创建一个内部树状结构。这种结构通常比 DOM 树更优化，性能更好，请参阅[比较 DOM 和其他对象模型](http://dev.saxonica.com/blog/mike/2012/09/#000194)以获取一些基准。最好自己对代码进行基准测试或分析，看看性能是否可以接受。

关于您的代码的一个注释，`JAXBContext`创建成本很高，应该在应用程序的生命周期内缓存。如果您的`JaxbUtils`班级还没有这样做，那么重用上下文可以很好地提高性能。

# codeigniter - 路由代码点火器

> ID：13606877
> 
> 赞同：0
> 
> 时间：2012-11-28T14:02:57.463
> 
> 标签：codeigniter, routing, routes

我有这样的网址：

" [http://host.com/site/forum/1/General](http://host.com/site/forum/1/General) "
" [http://host.com/site/forum/2/Special](http://host.com/site/forum/2/Special) "
等等

我想缩短 URL，如下所示：

" [http://host.com/forum/General](http://host.com/forum/General) "
" [http://host.com/forum/Special](http://host.com/forum/Special) "
等等

在我的路由文件中，我使用了以下设置，但无法正常工作，请查看解决方案：

```
$route['forum/General'] = 'site/forum/1/General';
$route['forum/Special'] = 'site/forum/2/Special'; 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:45:15.010

也许是因为您的路线重叠？发布所有 config/routes.php 以查看问题出在哪里！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T20:15:29.947

也许像这样？`$route['forum/General'] = 'site/forum/$1/General';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:37:43.097

使用 .htaccess

```
RewriteEngine on
RewriteRule ^(.*)$ /site/$1 
```

但请确保 rewrite_module 已加载到您的 Web 服务器上。

# mysql - 如何将表单上的 YES 或 NO 值保存到 MySQL 数据库

> ID：13606878
> 
> 赞同：-1
> 
> 时间：2012-11-28T14:02:58.880
> 
> 标签：mysql, database, types

> **可能重复：**
> [用于存储布尔值的 MySQL 数据类型？](https://stackoverflow.com/questions/289727/which-mysql-datatype-to-use-for-storing-boolean-values)

我已经查看了很多关于这个主题的问题，但我找不到答案，我有一个包含 10 个问题的 HTML 表单，每个问题都有一个单选按钮，用于选择是或否。在数据库中创建表时（我使用 phpymadmin）我需要为每个问题选择什么类型来存储这个是否字段？我是一个新手，但所有答案都表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:12:51.293

这完全取决于用例。

一些可能性是：

*   创建一个`TINYINT(1)`列并存储`1`是和`0`否；
*   创建一个`CHAR(1)`列并存储`Y`是和`N`否；
*   创建一`VARCHAR(3) CHARSET ascii COLLATE ascii_bin`列并存储“是”或“否”；

您可以自由选择适合您的需求。甚至这些只是几个选项。真正重要的是选择一个并将其作为此类数据的标准。

`no`此外，如果您的数据没有为空的选项，您可能根本不需要表示这些值。您只能设置`yes`值并将默认值视为`no`.

# assembly - 段寄存器在运行时会改变吗？

> ID：13606883
> 
> 赞同：1
> 
> 时间：2012-11-28T14:03:10.833
> 
> 标签：assembly

段寄存器可以在程序执行期间改变吗？我确信可以在汇编中更改它们，但是如果我用 c 或 c++ 编写并编译，并且有一些内联`asm`指令，我可以指望`SS`寄存器和其他段寄存器保持不变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T15:14:53.503

如果您使用的是典型的 32 位或 64 位操作系统，那么您几乎可以忽略段寄存器（处理线程本地存储、异常处理或系统内容时除外）。`CS`, `DS`,`ES`和`SS`所有地址相同的内存并且它们不会改变。编译器也假设这一点。

# objective-c - 如何加快 UITextView 的更新速度？

> ID：13606884
> 
> 赞同：0
> 
> 时间：2012-11-28T14:03:13.720
> 
> 标签：objective-c, ios, performance, uikit, uitextview

我有一个带有“会计磁带”的计算器应用程序，由`UITextView`. 一旦磁带上有大约 50-100 行，文本视图的更新就会变得很慢——设置新内容（50-100 行文本）很容易花费 100 毫秒或更多时间。问题是我无法将此延迟移至后台，因为 UIKit 坚持在主线程上调用。

我能做些什么？想到的唯一一件事是使用`UIView`更适合该任务的自定义子类重写磁带，但我并不是很想这样做，因为它需要做很多工作，而且`UITextView`除了这个问题之外工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:19:49.090

我很惊讶你在只处理 50 行时遇到问题，所以我坦率地想知道这里是否还有其他事情发生。我会通过 Instruments 中的“时间分析器”运行代码，并确认问题确实是更新`UITextView`而不是其他问题。在放弃之前可能需要在这里进行一些研究`UITextView`，

但是让我们假设您决定需要重新开始（我认为这不太可能）并且不使用`UITextView`. 我可能会建议利用现有的控件，例如`UITableView`在单元格之间没有分隔符的 a ，或者，如果最坏的情况发生在最坏的情况下，`UIScrollView`磁带上的每一行都是 a`UILabel`并且您`UITableView`对滚动出屏幕的标签进行 - 样式的出列。一堆比从头开始更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:26:32.053

假设它真的`UITextView`很慢而不是其他东西，我建议您将 textview 的文本更改为仅可见的那部分。所有滚动到外面的文本都不需要保存在 textview 中。当然，如果需要，您必须实现自己的滚动，或者对已删除的行使用空白行，以便滚动行为保持不变。

# android - 打开画廊形式android应用程序的特定相册

> ID：13606886
> 
> 赞同：0
> 
> 时间：2012-11-28T14:03:20.083
> 
> 标签：android, android-gallery

是否可以从应用程序打开特定的画廊相册？我在互联网上搜索过，但没有找到类似的东西。我发现了如何从特定专辑中获取图像的参考并在我自己的应用程序中显示它们。需要了解上述从应用程序打开画廊的可能性（但画廊的特定专辑不仅仅是画廊）

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:34:30.577

您必须找到保存在 SD 卡上的特定专辑名称的 URI。像这样的东西可以帮助你

```
intent.setType("file:///sdcard/image/nameofyouralbum/*"); 
```

或者`intent.setType("file:///sdcard/nameofyouralbum/*");`

# html - 带 RTL 的无序列表

> ID：13606887
> 
> 赞同：1
> 
> 时间：2012-11-28T14:03:23.210
> 
> 标签：html

这里奇怪的多语言问题：

我有一个`<ul>`with`<li>`显示的项目`display:inline`。

当我使用`body{direction:rtl}`样式指令时，这些项目不会改变顺序。
是否有任何技巧可以反转`<li>`RTL（例如阿拉伯语）语言支持的项目顺序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:07:15.617

也许如果你添加？

```
​ul li {
    float:right;
}​ 
```

但如果涉及到排序列表，您应该使用`ol`而不是`ul`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T17:43:31.407

添加规则

```
ul { unicode-bidi: bidi-override; } 
```

警告：根据浏览器的不同，这也可能导致像“1234”这样的字符串从右到左显示。您可能需要设置`unicode-bidi: bidi-override; direction: rtl`此类元素。

根据[CSS 2.1](http://www.w3.org/TR/CSS21/visuren.html#propdef-direction)规范，该`direction`属性“为 Unicode 双向算法指定块的基本写入方向以及嵌入和覆盖的方向（参见 'unicode-bidi'）。此外，它还指定了表格列布局的方向，水平溢出的方向，在'text-align：justify'的情况下块中不完整的最后一行的位置。” 但内联框排序不受影响。后来，它补充说：

“要让 'direction' 属性影响内联元素的重新排序，'unicode-bidi' 属性的值必须是 'embed' 或 'override'。”</p>

这有点含糊，但上面的代码适用于现代浏览器（否则在处理方向性方面表现出许多差异）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:07:48.077

更改方向只会将项目移动到屏幕的右侧或左侧。它不会更改`ul`. 要更改顺序，您可以像这样使用[JQuery](http://jquery.com/)：

```
ul = $('#my-ul'); // your parent ul element
ul.children().each(function(i,li){ul.prepend(li)}) 
```

# php - 检查存储在 mysql 中的 md5（密码）匹配值

> ID：13606891
> 
> 赞同：1
> 
> 时间：2012-11-28T14:03:33.503
> 
> 标签：php, md5

我不明白为什么这不起作用。在注册时我有（在 php 中）

```
$data['salt'] = randomStr(3);
$data['password'] = md5($data['salt'].md5($data['password'])); 
```

然后我有一个 IOS 应用程序将 MD5 加密密码 ($xpassword) 传递给网络应用程序。所以我想如果我使用：

```
$q1_result = mysql_query("SELECT password, salt FROM `members` WHERE `username`='". $username. "'");
$row = mysql_fetch_array($q1_result);
echo "this should match? = " .md5($xpassword.($row['salt'])); 
```

回显的值应与存储在数据库中的密码相匹配

...但它没有任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-28T14:05:27.803

它不匹配，因为您的订单错误：

```
md5($row['salt'] . $xpassword) 
```

在第一个代码中有`salt`+ `password`，在第二个代码中有`password`+ `salt`。

正如@Michael 还指出的那样，您正在对密码进行双重哈希处理，这意味着它不会匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T14:05:35.250

您正在对密码部分进行双重哈希处理：

```
// Don't pre-hash the password before hashing with the salt!
$data['password'] = md5($data['salt'].md5($data['password']));
//---------------------------------^^^^^^^^^ 
```

您应该只散列盐和密码的整个串联。

```
// Hash only the entire combination of salt . password
$data['password'] = md5($data['salt'].$data['password']); 
```

如前所述，颠倒测试中串联的顺序：

```
md5($row['salt'] . $xpassword); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:09:20.387

在 SQL 中，您需要连接字符串：

```
SELECT * FROM users WHERE username = 'blah' AND password = MD5(CONCAT(salt, password)) 
```

# iphone - UIButton 作为 UITextfield 的子视图

> ID：13606893
> 
> 赞同：0
> 
> 时间：2012-11-28T14:03:54.287
> 
> 标签：iphone, objective-c, ios

我有一个子视图：`UITextfield`当发生方向变化时正在重新定位。我想`UIButton`在这个子视图中添加一个，以便按钮将重新定位`UITextField`。

这很容易做到，但要让按钮工作，我需要`UITextField`将`userInteractionEnabled`. 问题是我需要它不是 userInteractionEnabled。

任何人都知道一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:07:00.533

最好的解决方案是创建一个 UIView（一个容器视图），然后将文本字段和按钮添加到该视图。然后将此容器视图添加到您的主视图并根据需要重新定位容器视图。然后文本字段和按钮将跟随...

# wordpress - 更改 WordPress 博客的目录

> ID：13606895
> 
> 赞同：0
> 
> 时间：2012-11-28T14:04:00.507
> 
> 标签：wordpress

我的客户有一个基于 Coldfusion 构建的站点，并在其根文件夹 sitename.com/blog 下设置了一个 PHP WordPress 博客。他们想将目录 (/blog) 的名称更改为其他名称。

1.  可以在不丢失现有博客的情况下做到这一点吗？
2.  如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:32:41.110

WordPress Codex 中有一个规范的资源，[移动 WordPress。](http://codex.wordpress.org/Moving_WordPress)

# jquery - jQuery + jQueryUi：.combobox() 将忽略具有空值的选项

> ID：13606897
> 
> 赞同：0
> 
> 时间：2012-11-28T14:04:01.520
> 
> 标签：jquery, jquery-ui

```
<option value="">Tutti</option>
<option value="3">Centro di deposito</option>
<option value="2">Distributore</option>
<option value="4">Fornitore</option>
<option value="1">Produttore</option>
<option value="5">Vettore</option> 
```

如果我`.combobox()`用来创建一个漂亮的组合框，则不会显示空值（英文中的“All”）。

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:06:47.920

尝试这个：

```
var options = $("option"), // Replace with the selector of this options.
    comboContainer = $("#container"); // Replace with the selector of the combo container.
$("<select></select>").append(options).appendTo(comboContainer); 
```

# javascript - Javascript正则表达式仅匹配一次出现，不多也不少

> ID：13606905
> 
> 赞同：18
> 
> 时间：2012-11-28T14:04:33.653
> 
> 标签：javascript, regex

我有一个如下字符串：

```
single-hyphen 
```

我需要匹配连字符。但是，我只想匹配一次出现的连字符，不多也不少。

所以上面的字符串会返回true，但下面的两个会是false：

```
1\. a-double-hyphen
2\. nohyphen 
```

我如何定义一个正则表达式来做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-28T14:09:25.020

你可以这样做

```
/^[^-]+-[^-]+$/ 
```

`^`描述字符串的开头

`$`描绘了字符串的结尾

`[^-]+`匹配 1 到多个字符，除了`-`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-28T14:09:53.710

```
/^[^-]*-[^-]*$/ 
```

字符串的开头，任意数量的非连字符，一个连字符，任意数量的非连字符，字符串的结尾。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-28T14:08:32.557

奇怪（而*不是 Regex*）......但为什么不呢？

```
2 === str.split("-").length; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-28T14:18:50.867

您可以使用[`indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf)和的组合[`lastIndexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/lastIndexOf)：

```
String.prototype.hasOne = function (character) {
    var first = this.indexOf(character);
    var last = this.lastIndexOf(character);

    return first !== -1 &&
        first === last;
};

'single-hyphen'.hasOne('-'); // true
'a-double-hyphen'.hasOne('-'); // first !== last, false
'nohyphen'.hasOne('-'); // first === -1, false 
```

[http://jsfiddle.net/cSF8T/](http://jsfiddle.net/cSF8T/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-28T14:27:20.490

非常规但有效。它不操纵字符串或使用正则表达式。

```
 // only true if only one occurrence of - exists in string
 (str.indexOf("-") + 1) % ( str.lastIndexOf("-") + 1 ) === 0 
```

[**在这里**](http://jsfiddle.net/bruno/egMP3/)提琴[](http://jsfiddle.net/bruno/egMP3/)

# actionscript-3 - 1px x 1px 正方形的大小是多少？

> ID：13606909
> 
> 赞同：2
> 
> 时间：2012-11-28T14:04:42.537
> 
> 标签：actionscript-3, flash, graphics, draw

我正在编写一个对称繁重的程序，但事情并没有按预期工作。可能的原因之一是我误解了度量单位。

在 Flash 和 AS3 环境中，1px x 1px 正方形的大小是多少？它只绘制一个像素吗？1px x 1px 的正方形只不过是一个像素吗？如：

```
1px square: .

2px square: ..
            ..

3px square: ...
            ...
            ... 
```

这些例子正确吗？换句话说，一个 1px x 1px 的正方形是一个点而不是一个正方形吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:05:50.753

是的，像素是具有隐含面积的对象，因此与米、英尺等其他长度测量单位不同。因此，1px = 1x1px，而 1m ≠ 1x1m。

*编辑：这适用于从软件角度讨论像素时。尝试将像素“单位”转换为实际单位时，它会变得更加复杂，因为像素没有指定的尺寸，甚至不需要是正方形的。*

# java - ImageJ 如何复制多边形

> ID：13606912
> 
> 赞同：1
> 
> 时间：2012-11-28T14:04:57.627
> 
> 标签：java, imagej

我在默认图像上有一个多边形，以及选定的多边形。如何复制多边形或选择，或者如何在新图像上绘制相同的多边形？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T17:48:09.127

在一个图像中绘制一个选区后，您可以通过激活第二个图像窗口，然后运行该`Restore Selection`命令将该选区复制到第二个图像。它位于`Selection`菜单的子`Edit`菜单中。您也可以使用快捷键 Ctrl+Shift+E（或 OS X 上的 Cmd+Shift+E）来执行它。

如果您想将多边形实际烘焙到图像本身中，您可以使用菜单子菜单中的`Flatten`命令。以及该 Ctrl+Shift+F（或 OS X 上的 Cmd+Shift+F）的快捷方式。`Overlay``Image`

# datagridview - vb.net 中的 Datagridview 问题

> ID：13606914
> 
> 赞同：2
> 
> 时间：2012-11-28T14:05:10.887
> 
> 标签：datagridview

我正在使用 datagridview 并希望最终用户能够编辑第 5 列的“Notes”单元格。datagridview 被命名为“dgvScheduleInfo”。如果我输入以下代码，它可以正常工作，但会打开所有单元格来编辑我不想要的：

```
dgvScheduleInfo.ReadOnly = False 
```

如果出于测试目的，我使用

```
dgvScheduleInfo.Rows(3).Cells(5).ReadOnly = False 
```

（硬编码一行/单元格）这不起作用。

并且不可避免地

```
dgvScheduleInfo.Rows(dgvScheduleInfo.CurrentRow.Index).Cells(5).ReadOnly = False 
```

也不起作用。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:50:30.753

将列或行设为只读而不是单个单元格。在填充/绑定 DataGridview 后使用以下代码。您也可以通过数据源使其只读（如果它是数据表）

```
For Each col As DataGridViewColumn In dgvScheduleInfo.Columns
 If col.Index = 5 Then
   col.ReadOnly = False
   Else
   col.ReadOnly = True
 End If
Next 
```

# javascript - 有没有办法在加载 DOM 之前加载对象？

> ID：13606915
> 
> 赞同：0
> 
> 时间：2012-11-28T14:05:11.983
> 
> 标签：javascript, jquery, html

我目前尝试解决此问题的方法是将对象加载到`$(document).ready()`. 并使用`$(window).load()`. 但是，我仍然最终添加了 0.5 秒的延迟，以确保对象在从 2 个 ajax 调用中检索数据时完全加载。

有没有更好的方法在加载 DOM 之前加载对象，或者同时加载对象，但只有在加载对象并获取数据之后，然后调用其余函数？

```
document.ready =  function (){
object.initall();   
}; 
```

该`initall()`函数调用从 2 个不同服务获取数据的两种方法。

```
window.onload = function () {
setTimeout(function(){
    object.loadEventTable();
    object.loadChart();     
    $('#uid').text(object.lData.header.uid);        
},500);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:10:07.563

我想您可以将其设为函数并将函数调用放在页面的开头部分。可能在您的身体标签的开头

```
object.loadEventTable();
object.loadChart();     
window.onload = function () {
setTimeout(function(){   
    $('#uid').text(object.lData.header.uid);        
},500);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:12:18.470

最快的方法是生成“响应”服务器端并将其直接放入您的代码中，因此无需单独调用。

# php - 终极 URL 和社交网络 URL 验证

> ID：13606919
> 
> 赞同：-5
> 
> 时间：2012-11-28T14:05:19.380
> 
> 标签：php, regex

我找到了网站的验证。但后来我需要进行一些更改并添加特殊的社交网络（facebook、twitter、plus.google）验证。

这就是我所拥有的：

```
function isValidUrl($url,$media) {

$url= strtolower($url);
// Scheme
$urlregex = "^(https?)\:\/\/";
// User and Pass (optional)
if (!isset($media)) {
    $urlregex .= "([A-Za-z0-9+!*(),;?&=\$_.-]+(\:[A-Za-z0-9+!*(),;?&=\$_.-]+)?@)?";
}
// Hostname
if (isset($media)) {
    if ($media == 'fb') { $urlregex .= "([facebook]+\.)"; }
    else if ($media == 'gplus') { $urlregex .= "([plus\.google]+\.)"; }
    else if ($media == 'twitter') { $urlregex .= "([twitter]+\.)"; }
} else {
    $urlregex .= "([A-Za-z0-9+\$_-]+\.)";
}
$urlregex .= "*(?:[A-Za-z]{2}|com";
if (!isset($media)) {
    $urlregex .= "|org|net|edu|gov|mil|biz|info|mobi|name|aero|asia|jobs|museum|cat|coop|int|pro|tel|travel|xxx";
}
// Hostname End
$urlregex .= ")";
// Port/Path (optional)
$urlregex .= "(\:[0-9]{2,5})?";
$urlregex .= "(\/([A-Za-z0-9+\$_-]\.?)+)*\/?";
// Query
$urlregex .= "(\?[A-Za-z+&\$_.-][A-Za-z0-9;:@/&%=+\$_.-]*)?";
// Anchor
$urlregex .= "(#[A-Za-z_.-][A-Za-z0-9+\$_.-]*)?\$^";
return preg_match($urlregex,$url);

} 
```

简单的网站验证正常，但社交网络不是我想要的方式。例如`http://facebook.com`是有效的，但我需要有效的 URL 像`http://facebook.com/something`，并使第一个变得无效（与`http://twitter.com`和相同`http://plus.google.com`）。`http://plus.google.com`验证不起作用，它允许和`http://plusgoogle.com`其他融合。

我想**更改/添加**的内容：

1) 如上所述修复社交网络（facebook、gplus、twitter）验证；

2) 也允许没有协议的 URL`http://`或有协议的 URL 和两者，`www.`因此使链接以和`http://stackoverflow.com`的方式被允许。`http://www.stackoverflow.com``stackoverflow.com``www.stackoverflow.com`

**编辑：**为了清楚起见，我按以下方式调用此函数。

```
$error = false;

// For simple URL
$url = $_POST['url'];
if (!isValidURL($url,NULL)) { $error = true; }

// For Facebook URL
$fbpage = $_POST['fbpage'];
if (!isValidURL($fbpage,'fb')) { $error = true; }

// For Twitter URL
$twitterpage = $_POST['twitterpage'];
if (!isValidURL($twitterpage,'twitter')) { $error = true; }

// For Google Plus URL
$gpluspage = $_POST['gpluspage'];
if (!isValidURL($gpluspage,'gplus')) { $error = true; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:32:37.503

我会取消超级复杂的正则表达式并使用已经内置的函数：

```
define('VALIDATE_URL_GENERAL', 1);
define('VALIDATE_URL_FACEBOOK', 2);
...

function validateURL($url, $type = VALIDATE_URL_GENERAL) {
    if (!filter_var($url, FILTER_VALIDATE_URL)) {
        return false;
    }

    $parts = parse_url($url);

    switch ($type) {
        case VALIDATE_URL_GENERAL :
            return true;

        case VALIDATE_URL_FACEBOOK :
            return $parts['host'] == 'facebook.com';

        ...
    }
} 
```

这并不详尽，但我希望你能明白。有关[`parse_url`](http://php.net/parse_url)更多详细信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:18:43.617

您是否考虑过“ping”网址

```
file_get_contents(yourUrl). 
```

自定义 404 会刺伤你。

# .net - 为什么 App.config 存储连接字符串的位置比源代码中更安全？

> ID：13606922
> 
> 赞同：4
> 
> 时间：2012-11-28T14:05:25.243
> 
> 标签：.net, security, connection-string, app-config

简单的问题，我知道在源代码中以纯文本形式存储连接字符串是一个坏主意，因为有人可以使用 Ildasm.exe 之类的工具来反编译并随后查看您的连接字符串，但为什么使用 App.config 更安全?

当然，这个配置文件就在你的可执行文件旁边，所以如果有人可以访问你的可执行文件进行反编译，他们也可以访问你的配置文件，因此也可以访问你的连接字符串。

所以我的问题是，为什么 App.config 存储连接字符串的位置比在代码中更安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:09:15.793

您可以保护配置文件中的任何信息。此[演练链接：使用受保护的配置加密配置信息](https://msdn.microsoft.com/en-us/library/dtkwfdky.aspx?f=255&MSPPError=-2147217396)解释了如何

更新：抱歉链接断开，我更新它并添加文章标题。解决方案是使用**RsaProtectedConfigurationProvider**。我在我的 WebUtility 帮助器类中创建了一个简单的方法：

```
public static void CheckWebConfigSecured(string webPath, params string[] sections)
{
    Configuration confg = WebConfigurationManager.OpenWebConfiguration(webPath);
    bool done = false;
    foreach (string section in sections)
    {
        ConfigurationSection confSection = confg.GetSection(section);
        if ((confSection != null) && !confSection.SectionInformation.IsProtected)
        {
            confSection.SectionInformation.ProtectSection("RsaProtectedConfigurationProvider");
            done = true;
        }
    }
    if (done)
    {
        confg.Save();
    }
} 
```

我在**Application_BeginRequest上从****Global.asax.cs**调用

 **```
WebUtility.CheckWebConfigSecured(
    context.Request.ApplicationPath,
    "connectionStrings",
    "appSettings",
    "log4net"); 
```

其中*connectionStrings*、*appSettings*和*log4net*是我要保护的 web.config 部分。

结果服务器上 Web.config 文件中的这些部分类似于以下示例，在部署后首次访问该站点后：

```
<appSettings configProtectionProvider="RsaProtectedConfigurationProvider">
  <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
    xmlns="http://www.w3.org/2001/04/xmlenc#">
    <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
    <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
      <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
        <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <KeyName>Rsa Key</KeyName>
        </KeyInfo>
        <CipherData>
          <CipherValue>YbjvJF6IpTaEFb58ag1O ... HJm1uzA=</CipherValue>
        </CipherData>
      </EncryptedKey>
    </KeyInfo>
    <CipherData>
      <CipherValue>mzJ2PoteOG7ZpAs922sounmG ... 02D3ZiM1PCliSw==</CipherValue>
    </CipherData>
  </EncryptedData>
</appSettings> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:26:16.417

除非二进制文件被混淆，否则使用简单的十六进制编辑器可以很容易地从已编译的二进制文件中以文字字符串的形式存储连接字符串。

App.config 不一定更安全，但有一个选项可以加密 App.config 中的信息，这比明文更安全。

App.config 也可以在文件系统的 ACL 级别进行保护。这可以补充安全性，但并不总是像通常那样实用，主机服务器管理员将拥有该文件的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:08:24.163

如果您以明文形式保留连接字符串，则 App.config 本身并不会更安全。但是，您可以加密部分配置文件，这将提高安全性。

[http://msdn.microsoft.com/en-us/library/53tyfkaw.aspx](http://msdn.microsoft.com/en-us/library/53tyfkaw.aspx)

[http://www.codeproject.com/Articles/18209/Encrypting-the-app-config-File-for-Windows-Forms-A](http://www.codeproject.com/Articles/18209/Encrypting-the-app-config-File-for-Windows-Forms-A)

如果您不想将连接字符串存储在应用程序文件夹中的文件中，也可以将连接字符串存储在加密的注册表项中。**

# objective-c - 将 Objective-C 终端应用程序从 Mac OS X 移植到 Linux？

> ID：13606932
> 
> 赞同：3
> 
> 时间：2012-11-28T14:05:49.440
> 
> 标签：objective-c, c, linux, macos, cocoa

好的，这就是交易 - 没有什么真正重要的，只是我的另一个编译器副项目（是的，这是我的爱好之一，我承认），但我想知道：

*   我正在使用完全集成的 lex (Flex) 和 yacc (Bison)
*   编译器的核心（程序）在**Objective-C**中 100% 编码，只需使用`Foundation`

所以，这就是问题：

*   一旦程序运行起来，在将它移植到其他一些基于 *nix 的操作系统、Linux 等之前需要付出多少努力？

有什么建议吗？

* * *

**边注 ：**

我已经专门用 C/C++ 编写了近 10 个编译器。但是：我确实喜欢 Objective-C，并考虑在这个编译器创建项目（实际上是解释器）中将其用作实验。问题是，由于我计划在我的 Gentoo 网络服务器上使用生成的编译器，这可能是一个糟糕的选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:26:56.987

应该不会太麻烦。我在 Ubuntu 服务器上用 Obj-C 中的一些 ssl 东西制作了一个简单的程序。这是我的生成文件：

```
FLAGS=-D_GNU_SOURCE

all:
    gcc -lobjc -lgnustep-base -lcrypt -lssl -I/usr/include/GNUstep geochatd.m -o geochatd 
```

# image - 是否有基于 oop 的图像格式？

> ID：13606936
> 
> 赞同：1
> 
> 时间：2012-11-28T14:06:00.620
> 
> 标签：image, oop

我试图找出是否存在一种自然支持不同语言/平台的 oop 构造的图像格式。所以想法是您可以创建和命名符号保存格式并将其加载到另一种语言中。我的理解是，各种UI平台都必须绘制类似的东西，如框和圆，提供着色器等，并且应该有某种形式的标准来保存这种形式的信息？

我真的在寻找指向某个系统的指针，在该系统中我可以将对象（例如灯泡）添加到图像，将名称和可能的其他信息附加到对象，保存整个图像并将其拉到另一个系统中，并且仅根据需要查看我添加的新对象。

我知道这可能是一个主观问题，而不是客观问题，但我不知道你会怎样称呼这样的系统或在哪里看，所以我希望能得到一些我可以筛选的答案。

# wordpress - .gitignore 文件中最适合 Wordpress 项目的设置是什么？

> ID：13606938
> 
> 赞同：10
> 
> 时间：2012-11-28T14:06:02.567
> 
> 标签：wordpress, git

将 git 与 Wordpress 项目一起使用时，.gitignore 文件的推荐设置是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-28T14:09:16.377

这是来自[GitHub 的帮助文件](https://github.com/github/gitignore/blob/master/WordPress.gitignore)：

```
*.log
.htaccess
sitemap.xml
sitemap.xml.gz
wp-config.php
wp-content/advanced-cache.php
wp-content/backup-db/
wp-content/backups/
wp-content/blogs.dir/
wp-content/cache/
wp-content/upgrade/
wp-content/uploads/
wp-content/wp-cache-config.php 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-28T15:23:36.453

将此作为答案发布，因为我似乎无法对答案发表评论。

我建议以下（基于戴尔斯的回答）：

```
.htaccess
wp-config.php
wp-content/*
!wp-content/themes/
!wp-content/plugins/
sitemap.xml
*.log
sitemap.xml
sitemap.xml.gz 
```

它的作用是首先忽略 wp-content 中的所有内容，然后对 wp-content/themes/ 和 wp-content/plugins/ 文件夹进行例外处理。

# windows - 在 eclipse cdt 中调试时 fopen 失败

> ID：13606943
> 
> 赞同：0
> 
> 时间：2012-11-28T14:06:19.073
> 
> 标签：windows, eclipse, debugging, mingw, eclipse-cdt

请看下面的代码片段：

```
#include <stdio.h>
int main ()
{
FILE * pFile;

pFile = fopen ("c:\\Temp\\test.txt","rb");
if (pFile!=NULL)
{
  printf("opened\n");
  fclose (pFile);
}
else{
  printf("error\n");
}
  return 0;
} 
```

如果我编译这个代码片段并运行它，什么都不会失败。如果我在调试模式下执行代码 fopen 失败并显示以下消息：

```
Thread [1] 0 (Suspended : Signal : SIGSEGV:Segmentation fault)  
  wtoi64() at 0x77b35eab    
    wtoi64() at 0x77b35a70  
    ntdll!RtlpSetUserPreferredUILanguages() at 0x77ba5eff    
    ntdll!KiRaiseUserExceptionDispatcher() at 0x77b6a3ba    
    toi64() at 0x77b35a70   
    msvcrt!malloc() at 0x775c9d45   
    strcpy_s() at 0x775cf5d3    
    open_osfhandle() at 0x775d2b18  
    0x18    
    0xbf39e545  
    <...more frames... 
```

开发环境：

```
Windows 7
Eclipse CDT Juno Service Release 1
MINGW 4.7 
```

编译器设置：

```
-O0 -g3 -Wall -c -fmessage-length=0 
```

如果我启动调试器并逐步执行每条指令直到 fopen(..)，是否有人知道为什么 fopen 会失败？

我期待着你的回答。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T15:12:47.607

我已经解决了这个问题。

在 fopen 调用之前，我执行了以下代码：

```
char* ptr = NULL;
int size = 1024;
ptr = malloc(sizeof(size));
memset(ptr, 0, size);
fopen("binary.txt", "rt"); 
```

问题是，尽管只分配了 sizeof(size) 字节，但 memset 被应用于 1024 字节。由于先前使用的 1024 字节的 memset 调用导致堆内存损坏，随后的 fopen 调用崩溃。

到目前为止感谢！

# jquery - $.get() jquery 在 IE 中不更新

> ID：13606945
> 
> 赞同：0
> 
> 时间：2012-11-28T14:06:21.640
> 
> 标签：jquery, internet-explorer

单击它时我有一个-它发送到js func。func 是从网页获取文本的 jquery（网页从 sql 获取文本）。问题是在 IE 中它不起作用 - 来自网页的文本不会更新。但奇怪的是，有时它会更新，有时不会。

这是`<a>`对 func 的调用：

```
<a href="##" title="" class="FeaturedButton" onclick="MakeFeatured(#itemid#); return false;">
<span class="make" >
Make featured item
</span>
</a> 
```

这里的js函数：

```
function MakeFeatured(itemid)
{
$.get('../../pa_listings/make_featured.cfm?itemid=' + itemid,function(data){
if (data.indexOf('ok') > 1) {
    alert('OK');
    $('#tr'+ itemid).remove();
}
else 
    alert('No manual ad slots left!');  
}); 
} 
```

PS问题只是在IE浏览器中，我检查了所有其他问题，所以我认为问题出在js而不是我的网页文本中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T14:10:20.777

听起来你需要关闭缓存，试试这个：

```
$.ajax({
    url: '../../pa_listings/make_featured.cfm?itemid=' + itemid,
    cache: false,
    success: function(data) {
        if (data.indexOf('ok') > 1) {
            alert('OK');
            $('#tr'+ itemid).remove();
        }
        else 
            alert('No manual ad slots left!');  
        } 
    }
}); 
```

# git - Git子模块更新给出“错误：无效键（换行符）”

> ID：13606951
> 
> 赞同：11
> 
> 时间：2012-11-28T14:06:44.323
> 
> 标签：git, git-submodules

经过痛苦的合并后，当我运行时`git submodule update`，我得到了这个：

```
>git submodule update

error: invalid key (newline): submodule.external/mono-reactive
external/mono-reactive.url
error: invalid key (newline): submodule.external/mono-reactive
external/mono-reactive.update 
```

怎么了？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-28T14:06:44.323

事实证明，我有一个特定的子**模块**在`.gitmodules`.
一旦我删除了额外的条目，错误就会消失！

# assembly - 汇编语言中的除法数组

> ID：13606954
> 
> 赞同：1
> 
> 时间：2012-11-28T14:06:47.897
> 
> 标签：assembly, x86

我有一个基于用户输入的包含 4 个整数的数组。我想将数组除以 4 并显示平均值。

我已经完成了存储 4 个整数的部分，但是我得到了一些关于总和的疯狂答案（在我做除法之前试图得到总和）所以我什至没有触及数组的除法。我知道数组是正确的，它的除法位我弄错了。

有没有我可以用来划分数组的代码模板？

```
lea ebx,myarray // address of the array (its 0th element) is put in ebx
mov ecx,4 // size of the array is saved in the counter
mov eax,0 // eax will be used to hold the sum, initialise to 
push eax

lea eax, summsg
push eax
call printf
add esp,4

lea eax,sum // save location of var to read in the input
push eax
lea eax,formatstring // loads formatstring
push eax // push it onto the stack
call printf // call scanf and prints out the number which we entered
add esp,8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:44:48.277

因为`printf`您需要传递值而不是变量的地址。而不是`lea eax, sum; push eax`做`push dword [sum]`。

要除以 4，只需右移 2 位。

# facebook - 在 Like 或 Share 事件后检索共享对象的 URL

> ID：13606956
> 
> 赞同：1
> 
> 时间：2012-11-28T14:06:56.787
> 
> 标签：facebook, facebook-graph-api, facebook-like, xfbml

我在我网站的关键静态页面上有一个赞按钮（使用 XFBML，但如果需要，也可以使用 HTML5 版本）。我可以知道何时有人单击了“赞”按钮并记录了该事件，但我想知道是否有办法查看实际的“赞”帖子，包括该人添加的任何评论。我知道每个对象都应该有自己的 URL，但是可以捕获它吗？我们的想法是在我们的数据库中记录点赞和评论的永久链接。

浏览了开发人员文档，似乎找不到可以做到这一点的东西，但我很确定我已经看到它完成了。谢谢。

# c# - 当记录与使用 linq 传递的值不相等时如何删除记录

> ID：13606957
> 
> 赞同：0
> 
> 时间：2012-11-28T14:06:56.430
> 
> 标签：c#, linq, entity-framework

我想删除数据库中不存在的记录。我举个例子。我正在向控制器发送 3 个问题。Q1、Q3 和 Q4。在数据库中只有两条记录 Q1 和 Q2。然后我需要删除 Q2，我需要添加 Q3 和 Q4。我如何为此使用 linq 编写查询。希望你能理解我的问题。

问候， 斯里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:34:11.417

我对此了解不多，但如果它不是大量数据，您可以尝试这样的事情：

```
List<object> inserted = null; // Change null for all the elements in the table.
IEnumerable<object> diff = newItems.Except(inserted); // Assume newItems is the list with new items.
foreach(object elem in diff)
{
    if (newItems.Contains(elem))
        // insert
    else
        // delete
} 
```

请记住，比较对象（而不是基本类型）将不起作用。您必须创建一个 IEqualityComparer，如此[处所示](http://msdn.microsoft.com/en-us/library/bb336390.aspx)。

# windows - 删除事件日志有那么危险吗？

> ID：13606958
> 
> 赞同：0
> 
> 时间：2012-11-28T14:06:59.080
> 
> 标签：windows, event-log

我有一个应用程序，它自安装以来跟踪一些日志。

由于系统日志可能很大，如果日志太大，我的应用程序的性能就太差了，但如果我们在安装前清除日志，它会好很多。

我知道这样做不是我的权利，但现在我正在寻找它的安全问题。

那么，它是否会考虑——不顾道德规范——只清除名为“系统”的日志的危险？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:57:45.547

如果你愿意，你可以。删除任何日志都没有危险，因为它们只是为了您的记录而帮助您诊断问题。

如果您确信您或其他任何使用计算机的人不需要系统日志，请继续删除它们。

如果我在我的机器上安装它，我不希望它在没有我明确许可的情况下这样做，所以可能会有一条消息向用户解释，如果你选择不删除它们，它可能会运行缓慢。

# java - Quickbooks 与 java API 的集成

> ID：13606960
> 
> 赞同：2
> 
> 时间：2012-11-28T14:07:01.610
> 
> 标签：java, linux, quickbooks, quickbooks-online, intuit-partner-platform

好吧，我希望`Quickbooks`与 java 应用程序集成。到目前为止，我已经阅读了`QuickBooks`与 java 集成相关的文档和文章。但是，我想在 Linux 系统中开发我的 java 应用程序。我是新手`QuickBooks`，没有发现任何支持线索表明它可以在 Linux 系统中完成。我的 java 应用程序应该能够将新手导入和导出到`QuickBooks online`. 有谁知道我应该从哪里开始？是否支持linux系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T15:05:17.523

首先有两种方法可以与 QuickBooks 集成。

1.  QuickBooks SDK 通过桌面上的 QBXML 与 QuickBooks 通信。这将下载到客户端，您的应用程序使用 SDK 读取/写入数据。有成千上万的应用程序使用这种方法。[https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK](https://ipp.developer.intuit.com/0085_QuickBooks_Windows_SDK) ，包括 Java。

2.  使用 Intuit 合作伙伴平台 REST Api，您使用哪种语言无关紧要。 [https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0025_Intuit_Anywhere) 实际上有一个 Java SDK 封装了这些 API 以简化开发体验。SDK在这里：[https ://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/0200_IPP_Java_DevKit](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/0200_IPP_Java_DevKit)

每种方法都有优点和缺点。#1 的客户体验很差，因为您需要将应用程序下载到客户端，并与 QuickBooks 保持数据同步。

通过 IPP 的方法 2 会为您处理同步，但您需要使用 REST API 将其构建为 SaaS 应用程序，并且需要付费。

希望有帮助

震动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-02T20:42:11.783

这是我去年在 Intuit 上发布的 Java 解决方案的链接。

[https://idnforums.intuit.com/messageview.aspx?catid=56&threadid=16655](https://idnforums.intuit.com/messageview.aspx?catid=56&threadid=16655)

它提供了您需要采取的步骤。基本上，您需要创建一个将由 QBWC (quickbooks webconnector) 调用的 web 服务。这允许 QB 调用您的应用程序以获取下一个请求等。

它有很多，但它最终是一个很好的解决方案。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-28T14:18:11.690

我给您的第一个提示是下载 QuickBooks SDK 并尝试将其与 Java 集成。你也应该检查这个[问题](https://stackoverflow.com/questions/4797784/need-to-get-data-into-quickbooks)。另外，让 QuickBooks 在 Linux 上在线工作也存在问题。检查此[论坛主题](http://ubuntuforums.org/showthread.php?t=1098175)。

正如我之前提到的，我尝试将 Quickbooks 集成到 Java SE 应用程序中，但由于 API 文档薄弱，因此进展并不顺利。我希望您能找到一种将 Quickbooks 在线与您的 Java 应用程序集成的方法。希望能帮助到你..

# javascript - 使用 AlertDialog 调用函数

> ID：13606967
> 
> 赞同：0
> 
> 时间：2012-11-28T14:07:29.417
> 
> 标签：javascript, save, titanium, alert, android-alertdialog

我刚刚开始学习 javascript，目前正在制作一个像应用程序一样的小记事本。当我保存文本时，它会保存到单独窗口上的不可编辑文本区域。

我想在我的应用程序中添加一个确认警报窗口。当按下“提交”按钮时，它应该打开一个带有两个按钮（确认、取消）的警报。

“确认”应该像提交按钮当前那样保存 textArea 文本，“取消”应该取消任何操作。我设法找到了一个例子，但作为我的新手，我无法在没有错误的情况下实现它。得到这个代码：

```
submitButton.addEventListener("click", function (e) {
    if (textArea.value != "") {
        var newFile = Titanium.Filesystem.getFile(Titanium.Filesystem.applicationDataDirectory, "newFile.txt");

        if (!newFile.exists()) {
            newFile.write();
            newFile.write(textArea.value);
            textArea02.value = textArea.value;
        } else {
            var fileContent = newFile.read();
            var newContent = fileContent.text + " " + textArea.value;

            newFile.write(newContent);
            textArea02.value = newContent;

            alert("File Saved");
        }

        textArea.value = "";
        textArea.blur();

    } else {
        alert("Enter some text to save");
    }
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:47:03.787

```
var alertDialog = Ti.UI.createAlertDialog({
    title: 'Confirm',
    message: 'Are you sure?',
    buttonNames: [ 'No', 'Yes' ],
    cancel: 0 // index to the cancel button
});
alertDialog.addEventListener('click', function (evt) {
    if (evt.index /* if it's 1, they hit Yes */) {
        alert('OK!');
    }
});
alertDialog.show(); 
```

# java - 卡住布尔值总是返回 TRUE

> ID：13606968
> 
> 赞同：6
> 
> 时间：2012-11-28T14:07:37.600
> 
> 标签：java, boolean, chars

你好，我是 Java 世界的新手，我卡在我的代码中，这将是一个非常好的帮助 p

我在这段代码中遇到了一个布尔问题/

```
public class Variables {
  boolean bit;
  String name;
  public Variables(int b, String name){
    this.name = name;
    bit = test(b);
  }
  public boolean test(int b) {
    System.out.println(b);
    if(b==49) {
        return true;
    }
    if(b==48) {
        return false;
    }
    else {
        return false;
    }        
  }
} 
```

问题是它不断返回真实的 b 的数量实际上我试图让数字 1 或 0 女巫在一个字符中并转换为布尔 t/f

提前致谢

更多代码

```
public class truthtable2 {
  public ArrayList <Variables[]>bits  = new ArrayList<>();

  public truthtable2 (ArrayList <String> inputs){       
    String [] inputsTab = inputs.toArray(new String[inputs.size()]);
    Variables[] bittab = new Variables[inputsTab.length];
    int total = (int) (Math.pow(2,inputs.size()))-1;
    String tab[]=new String[total+1];
    for(int i =0;i<=total;i++){
      tab[i]=(String.format("%16s", Integer.toBinaryString(i)).replace(' ', '0'));      
    }
    for(int i = 0;i<tab.length;i++){
      char[] chars = tab[i].toCharArray();

      for(int x = 0;x<inputs.size();x++){
        int d = 15-x;
        bittab[x]= new Variables(chars[d], inputsTab[x]);           
      }
      bits.add(bittab);  
    }
    for(Variables[] d: bits){
      for(int f = 0;f<d.length;f++){
        System.out.format("%4s %4s \n",d[f].bit,d[f].name);
      }
    }
  }
} 
```

编辑

```
'0' -->A false
'0' -->B false
'0' -->Cin false
'1' -->A true
'0' -->B false
'0' -->Cin false
'0' -->A false
'1' -->B true
'0' -->Cin false
'1' -->A true
'1' -->B true
'0' -->Cin false
'0' -->A false
'0' -->B false
'1' -->Cin true
'1' -->A true
'0' -->B false
'1' -->Cin true
'0' -->A false
'1' -->B true
'1' -->Cin true
'1' -->A true
'1' -->B true
'1' -->Cin true 
```

编辑 2

在这次执行中

```
for(Variables[] d: bits){
          for(int f = 0;f<d.length;f++){
            System.out.format("%4s %4s \n",d[f].bit,d[f].name); 
```

我有这个结果

```
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
true    A 
true    B 
true  Cin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:13:53.837

据我所知，您的代码没有任何问题。你如何测试 的价值`bit`？我们能看到实例化`Variables`和调用`test()`方法的包装代码吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T14:59:14.843

您至少有两个主要问题和一个小问题。

1.  您的代码正在硬编码二进制字符串中的零个数。然后，当您尝试解析它时，您会无缘无故地拥有所有这些额外的零。
2.  **这是使所有正确的方法**您不断重复使用相同的`Variables[]`数组`bittab`，因此每次它都会被覆盖。您需要生成一个新的。
3.  您的`test`功能过于复杂。我在下面的代码中修复了它。

这是固定代码：

```
public class truthtable2 {
  public ArrayList<Variables[]> bits  = new ArrayList<>();

  public truthtable2(ArrayList <String> inputs){       
    String [] inputsTab = inputs.toArray(new String[inputs.size()]);
    int total = (int) (Math.pow(2,inputs.size()))-1;
    String tab[]=new String[total+1];
    for(int i =0;i<=total;i++){
      // changed the below line
      tab[i]=(String.format("%"+inputs.size()+"s", Integer.toBinaryString(i)).replace(' ', '0'));
      System.out.println(tab[i]);
    }
    for(int i = 0;i<tab.length;i++){
      char[] chars = tab[i].toCharArray();

      Variables[] bittab = new Variables[inputsTab.length]; // Moved this here
      for(int x = 0;x<inputs.size();x++){
        // Changed this to use variable size
        int d = inputs.size()-x-1;
        bittab[x]= new Variables(chars[d], inputsTab[x]);           
      }
      bits.add(bittab);  
    }
    for(Variables[] d: bits){
      for(int f = 0;f<d.length;f++){
        System.out.format("%4s %4s \n",d[f].bit,d[f].name);
      }
    }
  }

  public class Variables {
    boolean bit;
    String name;
    public Variables(int b, String name){
      this.name = name;
      bit = test(b);
    }
    // Totally rewrote function
    public boolean test(int b) {
      System.out.println(b);
      return b==49;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:14:46.850

**编辑**

改变

```
System.out.format("%4s %4s \n",d[f].bit,d[f].name); 
```

到

```
System.out.format("%5s %4s \n",d[f].bit,d[f].name); 
```

因为你试图输出一个`boolean`. `true`有 4 个字符，但`false`有 5 个 :)

**老的：**

为什么不

```
public boolean testChar(char c) {
    return c == '1';
} 
```

或者

```
public boolean testInt(int c) {
    return c == 49;
} 
```

**编辑**

`Variable`在类中添加此代码。

```
@Override
public String toString() {
    return name + " " + bit;
} 
```

然后在后面插入以下代码 `bittab[x]= new Variables(chars[d], inputsTab[x]);`

```
System.out.println("'" + chars[d] + "' --> " + bittab[x].toString()); 
```

并向我们​​展示输出。

# linux - 在 ARM linux 用户空间中获取 PHYS_OFFSET 的值

> ID：13606969
> 
> 赞同：2
> 
> 时间：2012-11-28T14:07:41.360
> 
> 标签：linux, embedded, arm

我有一个在 cortexA8 上运行的嵌入式 linux 系统。我理解内核符号 PHYS_OFFSET 代表 RAM [http://www.kernelport.org/defines.html](http://www.kernelport.org/defines.html)的物理起始地址。我需要用户空间中这个符号的值，以便在内核启动后运行的一些 shell 脚本中进行验证。/proc 文件系统没有此信息。请让我知道我是否可以通过某种方式获得此值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T10:09:47.100

`/proc/iomem`您可以通过阅读应该说明的内容来尝试利用 I/O 内存映射`System RAM`- 所有地址`iomem`都是真实/物理地址。

这是来自我的 Android 手机，它有 1GB 内存（0xbfffffff - 0x80000000）。

```
$cat /proc/iomem
...
80200000-88cfffff : System RAM
  80300000-80c708cf : Kernel text
  80d00000-80fb1dcb : Kernel data
88d00000-88d00fff : ramdumpinfo
88d01000-88d04fff : amsslog
88de0000-88dfffff : ram_console
90000000-ab4fffff : System RAM
b9a02000-bfffffff : System RAM 
```

您需要以某种方式将**系统 RAM**中指定的范围转换为您需要的范围。

# vb.net - vb 2010 - 我需要异步发布 1000 个 http 帖子。

> ID：13606974
> 
> 赞同：3
> 
> 时间：2012-11-28T14:07:50.687
> 
> 标签：vb.net

使用 VB.NET 2010 - 我对此有点陌生，并试图构建一个负载测试器。这是我到目前为止所拥有的（正在工作，但没有异步发布。我正在循环浏览我在数组中的帖子（500 左右）。这是从服务器异步返回信息。我该如何设置它可以在循环时同步推送 2 个或更多文件吗？

```
Imports System.Data
Imports System.IO
Imports System.Net
Imports System.Text
Imports System.Threading

Public Class Form1

    Private Sub btnStart_Click(sender As System.Object, e As System.EventArgs) Handles btnStart.Click
        lblError.Text = ""
        lblStatusMsg.Text = "Send Status..."
        lblConnectionStatus.Text = "Connection Status..."
        getData("test_post_data_1000.csv")

    End Sub

    Private strQuery As New StringBuilder
    Private path As String
    Private myPosts(999) As String          ' an array of the parsed csv which is ready to be posted
    Private csvDS As New DataSet
    Private loopCount As Integer            ' keeps track of the number of csv rows parsed
    Private connectionLimit As String
    Private currentConnections As String
    Private postsSent As Integer            ' keeps track of the number of posts sent in the loop

    Public Sub SendAsynchRequest()

        Dim request As HttpWebRequest
        Dim thePost As String
        Dim hashcode As Integer = 0

        Try
            Dim myURI As New Uri("http://myImportSite.aspx")

            ' For x = 0 To myPosts.Length - 1
            For x = 0 To 9
                ' Create the request
                request = CType(WebRequest.Create(myURI), HttpWebRequest)
                request.Method = "POST"
                request.ContentType = "application/x-www-form-urlencoded"

                Dim currentServicePoint As ServicePoint = request.ServicePoint

                ' Display new service point properties.
                Dim currentHashCode As Integer = currentServicePoint.GetHashCode()
                lblConnectionStatus.Text = "New service point hashcode: " + currentHashCode.ToString() & vbCr
                lblConnectionStatus.Text = lblConnectionStatus.Text & "New service point max idle time: " + currentServicePoint.MaxIdleTime.ToString() & vbCr

                ' Check that a new ServicePoint instance has been created.
                If hashcode = currentHashCode Then
                    lblConnectionStatus.Text = lblConnectionStatus.Text & "Service point reused.  Count = " & request.ServicePoint.CurrentConnections
                Else
                    lblConnectionStatus.Text = lblConnectionStatus.Text & "Service Point - Current Connections = " & request.ServicePoint.CurrentConnections
                End If
                Me.Refresh()

                request.ServicePoint.ConnectionLimit = 10 ' default is 2 and will only allow 2 posts
                request.ServicePoint.MaxIdleTime = 2000 'sets the maximum idle time to 2 seconds

                thePost = myPosts(x)
                ' Convert the string into a byte array
                Dim bytes As Byte()
                bytes = System.Text.Encoding.UTF8.GetBytes(thePost)

                ' Assign the content length
                request.ContentLength = bytes.Length ' byle length should be about 378 for first record

                ' Write the postData bytes to request stream
                request.GetRequestStream.Write(bytes, 0, bytes.Length)
                postsSent = x + 1

                Dim result As IAsyncResult
                Dim state As WebRequestState
                Dim timeout As Integer

                ' Create the state object used to access the web request
                state = New WebRequestState(request)

                ' Begin the async request
                connectionLimit = request.ServicePoint.ConnectionLimit
                currentConnections = request.ServicePoint.CurrentConnections
                result = request.BeginGetResponse(New AsyncCallback(AddressOf RequestComplete), state)

                ' Set timeout at 30 seconds
                timeout = 1000 * 60

                ' Register a timeout for the async request
                ThreadPool.RegisterWaitForSingleObject(result.AsyncWaitHandle, New WaitOrTimerCallback(AddressOf TimeoutCallback), state, timeout, True)
            Next
        Catch e As Exception
            lblError.Text = "Source : " + e.Source & vbCr & _
                "Message : " + e.Message
        Finally
            'If Not (request Is Nothing) Then
            '    request.close()
            'End If
        End Try

    End Sub

    ' Method called when a request times out
    Private Sub TimeoutCallback(ByVal state As Object, ByVal timeOut As Boolean)
        If (timeOut) Then
            lblError.Text = "Your request timed out!"
            ' Abort the request
            CType(state, WebRequestState).Request.Abort()

        End If
    End Sub

    ' Method called when the request completes
    Private Sub RequestComplete(ByVal result As IAsyncResult)
        ' Get the request

        Dim request As WebRequest
        request = DirectCast(result.AsyncState, WebRequestState).Request

        lblStatusMsg.Text = "Your request is processing..." & vbCr & "Looping through .CSV = " & loopCount & vbCr & vbCr & "Connection Limit = " & connectionLimit & _
            vbCr & vbCr & "Posts sent = " & postsSent & vbCr & "Current Connections = " & currentConnections
        If postsSent = 39 Then
            btnStart.Text = "DONE!"
            btnStart.BackColor = Color.Fuchsia
        End If
        Me.Refresh()
        Me.Focus()
    End Sub

    ' Stores web request for access during async processing
    Private Class WebRequestState
        ' Holds the request object
        Public Request As WebRequest

        Public Sub New(ByVal newRequest As WebRequest)
            Request = newRequest
        End Sub
    End Class
End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T22:35:45.447

线程池或线程通常是您需要的。

ThreadPool 方式对后台工作任务进行排队的示例。

```
Public Sub Queue1000WorkTasks()
    Threading.ThreadPool.SetMaxThreads(1000, 1000)
    For iQ As Integer = 1 To 1000
        Threading.ThreadPool.QueueUserWorkItem(New Threading.WaitCallback(AddressOf DoWork_Async), Nothing)
    Next
End Sub

Public Sub DoWork_Async(notUsed As Object)
    'process something here...
End Sub 
```

与普通线程相同...

```
Public Sub Queue1000WorkTasks()
    For iQ As Integer = 1 To 1000
        Dim th As New Threading.Thread(AddressOf DoWork_Async, Nothing)
        th.Start()
    Next
End Sub

Public Sub DoWork_Async(notUsed As Object)
    'process something here...
End Sub 
```

以前从来没有像这样同时排队 1000 个项目，所以不知道你可以从你的系统中得到什么。可能先尝试较小的数字。

# shell - Shell - 根据时间戳重命名日志文件

> ID：13606975
> 
> 赞同：0
> 
> 时间：2012-11-28T14:07:54.147
> 
> 标签：shell

我正在尝试使用以下格式重命名日志文件：logfile_access_server1.log 根据它们的创建日期，以便它们具有以下格式：20121128.log 20121127.log 等...并使用 shell 脚本将它们压缩到另一个文件夹中。

我试过这个：

```
 #! /bin/sh

for i in `ls *access*.log`
do
mv $i /home/log/$i$(date +%F-%T).gz
done 
```

（我是shell脚本的菜鸟，显然它不起作用）

在此先感谢您的帮助

J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:43:15.670

[不要解析 ls](http://mywiki.wooledge.org/ParsingLs)

```
for filename in *access*.log; do
    basename=$(basename "$filename" .log)
    timestamp=$(date -d "$(stat -c %y "$filename")" +%F-%T)
    mv "$filename" "/home/log/$basename.$timestamp.log"
done 
```

你调查过[logrotate](http://man.cx/logrotate)吗？

# internet-explorer - script5009：“Primefaces”在 IE9 中未定义 - 重新加载后错误消失

> ID：13606976
> 
> 赞同：2
> 
> 时间：2012-11-28T14:07:54.943
> 
> 标签：internet-explorer, jsf, primefaces

我非常失望。我仍在寻找一个错误的原因，这是我在更改页面的模板布局后得到的。我将 Primefaces 3.4.2 与 Tomcat 7.0.32 和 JSF 2.1.13 库一起使用。

*这个错误是什么？：*

**在 Opera、FF 和 Chrome 中：**

所有元素都已完全加载并显示。

但是，如果您选择或调用菜单项（定义的非 ajax），则页面会按预期重新加载。但什么也没有发生。如果您第二次调用该按钮，它将被调用。并且内容部分发生了变化。

如果您选择数据表或类似的行，则页面运行非常流畅。您无需再次尝试更改内容部分。

**在 IE6+ 尤其是 IE9 中：**

在大多数情况下，页面被加载并且 IE9 显示所有元素。但是没有可以调用的悬停或 ajax 事件。页面似乎被冻结了。

您是否重新加载页面，它按预期工作。快速流畅。

**我做了什么来调试**

我开始寻找它的原因。我查看了每个浏览器的控制台。非 IE 浏览器没有给出任何提示。在大多数情况下，这个方向没有错误。

如果您开始一个新的会话并且您是第一次加载页面，IE 会显示以下错误。

![IE 控制台](../Images/057dac075fee98a0a686b81ab79bf054.png)

重新加载后错误消失。

tomcat 也不例外。

**我对我的布局做了什么：**

我使用 JQuery ThemeRoller 创建了一个自定义主题并将其实现为链接。注意：如果您使用默认主题，该错误仍然存​​在

我决定删除`<p:menu>`左侧的 a 并将其移动到标题中。注意：我将所有更改为默认值，错误仍然存​​在。

我删除了所有`<p:panelgrid>`元素并将其切换为 simple `<table>`s 注意：但我认为这不是导致错误的原因。

我需要添加和修复 IE 浏览器中 z-index 的已知问题。您可以在脚本部分看到它`layout.xhtml`- 没有它，菜单栏位于内容部分元素的背景中。注意：我删除了它，没有任何反应，错误仍然存​​在。

我删除了所有缓存。但什么都没有。我希望有人可以帮助我或找出我做的错误。

**[源文件]**

*我的模板布局文件 =`layout.xhtml`*

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <f:view contentType="text/html">
        <h:head>
            <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
            <meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=#{request.contextPath}" />
            <f:event listener="#{loginController.verifyUseLogin()}" type="preRenderView" />

            <link type="text/css" rel="stylesheet" href="#{request.contextPath}/faces/resources/primefaces-fes/theme.css"/>
            <link type="text/css" rel="stylesheet" href="#{request.contextPath}/faces/resources/css/app.css"/>

            <title>Willkommen im FLOW / Fast Lean Overhead Workflow - Dies ist ein PROTOTYP</title>
            <script type="text/javascript">

                PrimeFaces.locales['de'] = {
                    closeText: 'Schließen',
                    prevText: 'Zurück',
                    nextText: 'Weiter',
                    monthNames: ['Januar', 'Februar', 'März', 'April', 'Mai', 'Juni', 'Juli', 'August', 'September', 'Oktober', 'November', 'Dezember'],
                    monthNamesShort: ['Jan', 'Feb', 'Mär', 'Apr', 'Mai', 'Jun', 'Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
                    dayNames: ['Sonntag', 'Montag', 'Dienstag', 'Mittwoch', 'Donnerstag', 'Freitag', 'Samstag'],
                    dayNamesShort: ['Son', 'Mon', 'Die', 'Mit', 'Don', 'Fre', 'Sam'],
                    dayNamesMin: ['S', 'M', 'D', 'M ', 'D', 'F ', 'S'],
                    weekHeader: 'Woche',
                    firstDay: 1,
                    isRTL: false,
                    showMonthAfterYear: false,
                    yearSuffix: '',
                    timeOnlyTitle: 'Nur Zeit',
                    timeText: 'Zeit',
                    hourText: 'Stunde',
                    minuteText: 'Minute',
                    secondText: 'Sekunde',
                    currentText: 'Aktuelles Datum',
                    ampm: false,
                    month: 'Monat',
                    week: 'Woche',
                    day: 'Tag',
                    allDayText: 'Ganzer Tag'
                };

                //needed to get the Submenu in menubar to the front (z-index bug)
                $(function() {
                        var zIndexNumber = 1000;
                        // Put your target element(s) in the selector below!
                        $("div").each(function() {
                                $(this).css('zIndex', zIndexNumber);
                                zIndexNumber -= 10;
                        });
                 });

            </script>            
        </h:head>
        <h:body>
            <div id="outerWrapper">

                <table id="contentWrapper">
                    <tr>
                        <td id ="header">
                            <ui:insert name="header"/>
                        </td>
                    </tr>
                    <tr>
                    <td id="content">
                        <ui:insert name="content"/>
                    </td>
                    </tr>
                </table>
            </div>
        </h:body>
    </f:view>
</html> 
```

*这`app.xhtml`*

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition template="./layout/layout.xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets">

    <ui:define name="header">
        <ui:include src="./misc/menuheader.xhtml"/>
    </ui:define>

    <ui:define name="content">
        <ui:include src="#{appController.content}.xhtml" />
    </ui:define>

</ui:composition> 
```

*`@ManagedBean - @SessionScoped`Bean的导航方法：*

```
public void doNav(){

    FacesContext context = FacesContext.getCurrentInstance();
    String selectedPageViewId =
    context.getExternalContext().getRequestParameterMap().get("pageViewID");

    if (selectedPageViewId.equalsIgnoreCase("page1"))
    {
    content = "/app/includes/hldyplanning";
    message = "Urlaub eintragen";
    ELContext elContext = FacesContext.getCurrentInstance().getELContext();
    hplC = (HldyPlanningController) FacesContext.getCurrentInstance().getApplication()
                    .getELResolver().getValue(elContext, null, "hldyPlanningController");
    hplC.init();
    }
    else if (selectedPageViewId.equalsIgnoreCase("page2"))
    {
    message = "persönliche Übersicht";
    content = "/app/includes/persview";
    } [...]        
    else { context.addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Seite nicht gefunden.", "Wie sind Sie hier hingekommen?")); }
}

<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <h:form id="frm_plan">
        <p:messages id="messages" autoUpdate="false" closable="true"/>
        [...]
    </h:form>
</html> 
```

*标题：*

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
    <h:form id="frm_menu">
        <table class="steamlessBody" style="width:100%;">
            <tr>
                <td class="header_boxes" style="width: 200px;">
                    #{appController.message}
                </td>
                <td class="header_boxes" style="width: 650px;">
                    <p:menubar autoDisplay="true" style="font-size: 14px; border: none; background: none;">
                        <p:submenu id="sub1" icon="ui-icon-calendar" label="Urlaubsplanung">
                            <p:menuitem id="btn_page1" ajax="false" icon="ui-icon-plusthick" value="Urlaub eintragen" action="#{appController.doNav()}">
                                <f:param id="pageHLDYPLANNING" name="pageViewID" value="page1"/>
                            </p:menuitem>
                            [...]
                        </p:submenu>
                        [...]
                        <p:menuitem id="btn_logout" ajax="false" icon="ui-icon-circle-close" value="Ausloggen" action="#{appController.logout()}"/>
                    </p:menubar>
                </td>
                <td class="head_text">
                    Eingeloggt als #{loginController.sessionData.user_name}
                </td>
            </tr>
        </table>
        <p:dialog widgetVar="help" id="dlg_help" closable="true" header="Hilfe" modal="true" showEffect="clip" hideEffect="clip">

        </p:dialog>
    </h:form>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:05:50.807

我今天有一个类似的问题。问题原来是指向有问题的页面的链接。

我有类似这样的代码：

```
<p:commandLink action="badPage.jsf" id="btnBadPage" 
    value="Bad Page" actionListener="#{myBean.someAction}" /> 
```

当我按如下更改操作 URL 时，我停止在 IE 中收到 javascript 错误：

```
<p:commandLink action="badPage.xhtml?faces-redirect=true" id="btnBadPage" 
    value="Bad Page" actionListener="#{myBean.someAction}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-19T05:38:42.440

我只是将所有不起作用的有问题的组件包装在`<div>`标签中，并且这些类型的错误通常会消失（当它们确实发生时）。

例如，我遇到了一个在 a 中分页的问题，`<p:dataTable>`直到我将它包装在`<div>`. 在那之后，它奏效了。

无论如何，这是人们可以尝试的其他东西。

# svn - 修复 git-svn “文件或目录已过期；尝试更新”

> ID：13606977
> 
> 赞同：3
> 
> 时间：2012-11-28T14:07:58.000
> 
> 标签：svn, version-control, git-svn

我使用 git svn 能够继续在本地使用 Git，但将更改远程推送到 SVN 服务器。

我`git svn fetch`在做之前做了一个`git svn dcommit`。

但是，现在后一个命令返回

`Merge conflict during commit: File or directory 'src/path/to/Images' is out of date; try updating: resource out of date; try updating at /usr/libexec/git-core/git-svn line 939`

我在终端应用程序中工作。

关于我能做什么的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T15:27:41.567

尝试使用：

```
git svn rebase 
```

代替

```
git svn fetch 
```

准备您的代码以提交给 SVN。Subversion 只能接受新的提交，因此 git-svn 必须安排您的更改，以便它们是对 SVN 的一系列新更改，您需要为此进行 rebase。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-02T15:07:37.697

有趣的是，如果一个人有两个遥控器，比如说`upstream`和`origin`，那么差异似乎是针对分支正在跟踪的遥控器发生的。

```
git push <tracking remote> <branch>
git svn dcommit 
```

为我工作。

我认为它会与我的 diff`upstream`不同，但事实并非如此。它与 diff 不同`origin`，因为这是分支默认跟踪的远程。

# css - 使固定元素服从溢出：隐藏

> ID：13606982
> 
> 赞同：3
> 
> 时间：2012-11-28T14:08:17.047
> 
> 标签：css, position

其实不敢相信我不能解决这个问题！

如何让固定元素服从`overflow`设置？

我做了一个小提琴 - [http://jsfiddle.net/REk4C/7/](http://jsfiddle.net/REk4C/7/)

![在此处输入图像描述](../Images/f310ec25a1d07bd7ea669dd420224ad8.png)

在 fiddle 和上图中，您会看到 a`div`包含三个`div`s，每个都有不同的`position`设置。`relative`元素服从溢出。现在我希望并且可以接受该`absolute`元素爆发，但我需要固定元素服从`overflow`这可能吗？

如果需要，很高兴使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:23:38.043

固定和绝对定位元素从正常的文档流中取出，这意味着原始父容器的边框不再对元素产生影响。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-28T14:15:25.820

要修复绝对定位的 div，请在容器中创建一个新的位置上下文：

```
#wrap {height:100px; width:100px; border:20px solid red; overflow:hidden;position:relative;} 
```

固定位置的 div 完全脱离了流程（并且可能在容器框之外），因此这是不可能的。为了演示，让小提琴窗口非常小，垂直滚动窗口，观察固定的 div 在容器外移动。

# android - 在 SQLiteOpenHelper 的不同实例中使用相同的 SQLiteDatabase 实例

> ID：13606992
> 
> 赞同：2
> 
> 时间：2012-11-28T14:09:00.503
> 
> 标签：android, multithreading, sqlite, singleton, sqliteopenhelper

我的应用程序中需要多个表。为此，我创建了单独的子类`SQLiteOpenHelper`来为不同的表插入/删除/更新数据。我的问题是如何确保所有这些子类`SQLiteDatabase`在整个代码中使用相同的实例。尽管我已将每个子类设为单例。`SQLiteDatabase`但是，我无法解决在整个代码中使用通用实例的问题。

*PS*：我不想使用`ContentPovider`或创建单个`SQLiteOpenHelper`子类，因为这会使我的代码复杂化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T14:13:47.160

只要您在整个（每个数据库）中使用相同的 SQLiteOpenHelper 就可以了。它会自动确保 getWriteableDatabase 和 getReadableDatabase 只访问一个缓存数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T14:33:00.077

我真的不明白您在使用 common 时在哪里苦苦挣扎`SQLiteOpenHelper`。你只需要复制你为一张桌子所做的事情！创建一个扩展`SQLiteOpenHelper`并进行复制的自定义类。

```
public class SQLiteCustomBase extends SQLiteOpenHelper {

    private static final String CREATE_BDD_1 = "CREATE TABLE ...";
    private static final String CREATE_BDD_2 = "CREATE TABLE ...";

    public SQLiteCustomBase(Context context, String name, CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_BDD_1);
        db.execSQL(CREATE_BDD_2);
    }

    @Override
    public void onOpen(SQLiteDatabase db) {}

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE " + Vars.TABLE_1 + ";");
        db.execSQL("DROP TABLE " + Vars.TABLE_2 + ";");
        onCreate(db);
    }
} 
```

然后在您执行一些数据库操作的类中：

```
public class HandlerClass {
    private SQLiteDatabase db;
    private SQLiteCustomBase customBase;

    public HandlerClass(Context context){
        customBase = new SQLiteCustomBase(context, Vars.NAME_DB, null, Vars.VERSION_DB);
    }

    public void open(){
        db = customBase.getWritableDatabase();
    }

    public void openForRead(){
        db = customBase.getReadableDatabase();
    }

    public void close(){
        db.close();
    }

    public SQLiteDatabase getDB(){
        return db;
    }
}

void myMethods()
{
    bdd.insert(Vars.TABLE_1, null, values);
    bdd.insert(Vars.TABLE_2, null, values);
}
etc. 
```

# php - 每 3 个项目的交替行颜色？

> ID：13606993
> 
> 赞同：1
> 
> 时间：2012-11-28T14:09:09.997
> 
> 标签：php, background-color, alternate

我有一个无序列表，每行有 3 个项目（而不是默认的 1 个）。现在我想交替行颜色。我该怎么做？

所以基本上我想做这样的事情：

```
if ($listCount == 1, 2, 3 OR 7, 8, 9 OR 13, 14, 15) {
    $alternateRow = "rowOdd";
}
else {
    $alternateRow = "rowEven";
} 
```

（我知道这是一个语法错误，只是想解释一下）

我认为模数是可能的，但老实说，我并不真正理解它是如何工作的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T14:15:04.980

确实，模数。你可以测试一下`($listCount - 1) % 6 < 3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T14:21:12.383

完全用 css 做这件事怎么样？ [http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T14:32:56.867

由于原始海报在模数上不清楚，我想我会帮助解释它是如何工作的，以便下次出现需要它的东西时可以使用它。模运算符 (%) 通过确定两个操作数之间除法的余数来工作。

取模的规则是：

```
if left < right: left % right = left
if left > right: left % right = remainder of left / right 
```

例如：

```
 - 1  % 6  = 1 ( 1 < 6 so the answer is 1    ) 
 - 7  % 6  = 1 ( 7/6 = 1 with remainder of 1 ) 
 - 10 % 6  = 4 ( 10/6 = 1 remainder of 4     ) 
 - 6  % 6  = 0 ( 6/6 = 1 with 0 remainder    ) 
```

因此，在您的情况下，您将获得 123（分别为 1,2,3 % 6），而 4,5,6 % 3 将获得 450。然后 7,8,9 % 6 将再次获得 123，10,11， 12 将再次变为 450，以此类推。所以你的代码会：

```
// check that list count is less than three but not = 0
// (only true when mod yields 1,2, or 3)
if($listCount % 6 < 3 && $listCount % 6 == 0){
  $alternateRow = "rowOdd";
} else {
  $alternateRow = "rowEven";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-28T14:15:17.753

```
int i = 0;
 $Value = "rowEven";
while ()
{
  while (i < 3)
  {
    $alternateRow = $value
    i++;
  }
  i = 0;
  if ($value == "rowOdd")
    $Value = "rowEven";
  else
    $Value = "rowOdd"
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-28T14:18:31.887

或者像这样使用模数：

```
<?php

$numRecords=9;

for ($i = 0; $i < $numRecords; $i++)
{
 $className = "";
 if (($i % 3) == 0)
 {
  $className = "third";
  echo "i = " . $i;
 }
 else
 {
  $className = "other";
 }

}
?> 
```