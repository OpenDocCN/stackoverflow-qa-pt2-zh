# StackOverflow 问答 13904000-13904999

# ide - 为 UAT 测试人员使用 Selenium 和 Java

> ID：13904005
> 
> 赞同：2
> 
> 时间：2012-12-16T18:00:07.510
> 
> 标签：ide, selenium-webdriver, uat

我有一些关于开始 Selenium、Webdrivers 和 Java 的问题，我正在努力确定任务的范围:)

我在一个主要从事财务工作的手动 UAT 团队工作（通常在 web/rumba 系统上输入/验证/查询数据输入屏幕），但已经开始学习测试自动化。目前尽可能在工作中学习QTP/VB。我的背景是 XHTML、CSS，但非常乐意学习编码，希望我能找到一个可以与更多或更少技术能力的同事共享的设置。

我查看了 Firefox IDE 并了解您可以使用 Selense HTML 进行编码，这对某些人来说非常有用。他们可以记录、编辑一些回归测试，然后复制和调整数据以适应其他场景等。

然而，我们基本的 QTP 脚本始终是数据驱动的，编辑字段，将结果和屏幕截图导出回 Excel 等，IDE 无法处理；但我们不是编码员，所以可能会在 Java 上挣扎。

1.) IDE（Selense TestCase？）可以生成如下代码吗？稍微调整一下然后放入从网上获取的通用Java页眉/页脚模板中？

为什么下面会看起来像这样，而不是普通的 Java？

下面的这种代码风格看起来足够可读，可以作为一个很好的中间立场，但比 IDE 更先进。

```
@Test
public void testOpenTypeClick() throws Exception {
    selenium.open("/");
    selenium.click("link=Advanced search");
    selenium.waitForPageToLoad("30000");
    selenium.type("as_q", "selftechy, selenium");
    selenium.click("//input[@value='Advanced Search']");
    selenium.waitForPageToLoad("30000");
}

public void testSelectCheck() throws Exception {
    selenium.open("http://www.sqajobs.com/");
    selenium.click("link=Advanced Search");
    selenium.waitForPageToLoad("30000");
    selenium.type("bx_jtitle", "Sr. Testing Engineer");
    selenium.select("rdjt", "label=All Of These");
    selenium.removeSelection("jids[]", "label=All Categories");
    selenium.addSelection("jids[]", "label=Functional Testing");
    selenium.type("bx_kwd", "selenium");
    selenium.click("idrdKeyw1");
    selenium.click("id_alltype");
    selenium.check("id_jtp_1");
    selenium.uncheck("id_jtp_1");
    selenium.check("id_jtp_1");
    selenium.click("//input[@name='cmdSearch' and @value='  Search  ']");
    selenium.waitForPageToLoad("30000");
} 
```

2.) 你将如何设置 Selenium 以使用如下代码？您是否可以通过在 Eclipse 中编写一个链接并自动化 Firefox / IE 来访问客户端驱动程序，因为我怀疑我们公司是否允许 SeleniumServer 在我们的 PC 上运行。

感谢任何建议，抱歉，以上内容不清楚，因为我对编码非常陌生，因此对术语缺乏深刻的理解。

加夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T05:45:10.093

使用 Webdriver 是有意义的，因为它目前正在积极开发中。如果您还没有开始，那么我建议您使用 maven 项目，这将有助于解决您需要的所有依赖项。可能这会有所帮助：使用[Webdriver](http://code.google.com/p/selenium/wiki/UsingWebDriver)

如果您的浏览器和测试将在同一台机器上运行，那么您甚至不必启动服务器。您的测试将像

```
WebDriver driver = new FirefoxDriver();
driver.get("http://www.google.com");
WebElement element = driver.findElement(By.name("q"));
element.sendKeys("Cheese!"); 
```

我建议您阅读[此](http://seleniumhq.org/docs/03_webdriver.html)内容，这将为您提供快速入门概述。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:17:03.663

Selenium 服务器只是一个 jar 文件，你可以将它放在你的系统中。使用 Eclipse 和 Java 客户端绑定配置的 Selenium 服务器将满足您的目的，如果您使用的是基于 Web 的应用程序，您可以充分利用 selenium，这对于执行 UAT 测试很有用。

# eclipse - 与服务器通信失败：500 内部服务器错误并且没有日志文件

> ID：13904010
> 
> 赞同：0
> 
> 时间：2012-12-16T18:00:40.223
> 
> 标签：eclipse, spring, tomcat, cloud-foundry

我试图了解为什么会出现以下错误：`Communication with server failed: 500 Internal server error`来自我的 cloudfoundry 应用程序。

令我印象深刻的是，我无法访问日志文件，从以下屏幕截图中可以看出： ![没有日志文件...](../Images/a3105d859b6be09f26a273949ec394cf.png)

谁能帮助并让我知道如何在从 STS/eclipse 部署的 cloudfoundry 应用程序上“启用日志”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T14:48:04.023

您是否尝试过使用 CLI 工具 VMC？您应该能够使用“vmc logs [appname]”检查日志

# jquery - jQuery 没有在我的新手应用程序中执行

> ID：13904011
> 
> 赞同：0
> 
> 时间：2012-12-16T18:00:41.370
> 
> 标签：jquery, jquery-mobile

我正在尝试学习 jQuery，我通常更喜欢“边做边学”，所以我尝试按照本教程创建一个简单的 rss 阅读器：

[http://net.tutsplus.com/tutorials/javascript-ajax/how-to-build-an-rss-reader-with-jquery-mobile-2/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-build-an-rss-reader-with-jquery-mobile-2/)

我知道我没有错过他们所说的任何步骤，因为我能够欣赏和理解教程中的每一行代码。

但是，需要 jQuery 起作用的部分永远不会起作用。

首先，我在基本结构中应用了以下属性，但没有发现任何区别

```
data-role="header"
data-role="content"
data-role="footer 
```

我决定继续前进并成功完成 HTML 部分。现在我回来应用以下属性

```
 data-role="listview" and

  data-role="list-divider", which can be applied to the <li> element. 
```

仍然没有任何改变。

现在，我做了我最后想做的事：下载源文件并运行他们的最终应用程序，但我只看到了 html 内容。

我想知道我的电脑上是否需要任何配置，或者是否缺少某些东西。至少如果我错误地输入了他们的代码，我猜他们自己的最终源代码应该可以工作。

附言。我还引用了最新的 jquery 移动样式表，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:22:48.180

尝试通过按 F12 打开浏览器调试器并在其中查找错误，然后搜索这些错误：

![浏览器调试](../Images/5771c776b3730251c92c5a25dd928933.png)

您需要帮助来查找代码中的错误/问题。[FixingThesejQuery](http://fixingthesejquery.com/#slide1)上有一个非常详细的指南，它将带您逐步完成整个过程。看看吧，一定很享受！

# javascript - document.getElementById 不适用于 textarea

> ID：13904013
> 
> 赞同：2
> 
> 时间：2012-12-16T18:01:37.900
> 
> 标签：javascript, ajax, http-post

我已经尝试了这么久，我找不到问题。

getelementbyId 从两个第一个 id 中正确获取数据：“odbiorca”和“temat”，并将其正确添加到数据库中，但在 textarea“tresc”的情况下不会发生。

有人能帮帮我吗？

```
<form method="post">
    <input class="input" type="text" name="do_kogo" id="odbiorca" size="25" value="<?php print $odbiorca; ?>" />
    <input class="input" id="temat" type="text" name="temat" size="25" value="<?php print $temat; ?>"/>
    <textarea id="tresc_area" cols="45" rows="10" ></textarea>
    <input onclick="Check()" id="send_submit" type="submit" value="Send" />
</form>​ 
```

这是它的ajax

```
<script type="text/javascript">

var odbiorca = document.getElementById("odbiorca");
var temat = document.getElementById("temat");
var tresc = document.getElementById("tresc_area");

function Check() {
    $.ajax({
        type: "POST",
        url: "send_prv_msg.php",
        data: {
            do_kogo: odbiorca.value,
            temat: temat.value,
            tresc: tresc.value
        },
        success: function(odp) {
            $("p#error_box").html(odp);
        }
    });

}​

</script> 
```

有人知道为什么`odbiorca.value`并且`temat.value`工作正确，但`tresc.value`不知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T06:33:14.617

你应该改变你的代码，如下所示。这

```
<script type="text/javascript">

function Check() {
    /*get the value in each click*/
    var odbiorca = document.getElementById("odbiorca");
    var temat = document.getElementById("temat");
    var tresc = document.getElementById("tresc_area");
    $.ajax({
        type: "POST",
        url: "send_prv_msg.php",
        data: {
            do_kogo: odbiorca.value,
            temat: temat.value,
            tresc: tresc.value
        },
        success: function(odp) {
            $("p#error_box").html(odp);
        }
    });

}​

</script> 
```

# php - 从字符串中删除所有反斜杠 - php - regex

> ID：13904014
> 
> 赞同：3
> 
> 时间：2012-12-16T18:02:02.760
> 
> 标签：php, regex, str-replace

我的字符串是

```
$str = '<img src="\"images/hai.jpg\"" alt="" /> Text <img src="\"images/hai.jpg\"" alt="" />'; 
```

我想从字符串中删除所有 \" 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T18:03:29.997

我认为您不是在寻找正则表达式，而是在寻找[`stripslashes($str)`](http://php.net/stripslashes)方法。

编辑：从评论中，我知道你只会`\"`用任何东西替换，你应该在这里使用一个简单`str_replace`的，正如@Gumbo 所说：

```
$str = ...;
$newStr = str_replace('\"', '', $str);

echo $newStr; 
```

你可以为此使用正则表达式，但 pReg 库并不快，如果你能找到一个 str_* 或数组变体，我总是建议使用它而不是 preg_*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:06:55.183

使用`stripslashes($str)`不会总是`\`从字符串中删除 ALL 。如果存在 an 的实例`\\`，它将变成一个斜线，而不是 0。要摆脱它们，最好的办法可能是使用`str_replace`.

而且正如 OP 所说，他希望删除`/"`需要使用`str_replace`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T18:08:51.800

这看起来像是一种经过多个转义序列的数据字符串。您可能想要查找反斜杠和重复引号的根本原因。在 PHP 中，魔术引号会导致这种情况。如果你能看到这篇文章，它将解释这些问题。

[http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_6630-Magic-Quotes-a-bad-idea-from-day-one.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_6630-Magic-Quotes-a-bad-idea-from-day-one.html)

HTH，~雷

# python - 如何获取tcp客户端绑定的端口的文件描述符

> ID：13904015
> 
> 赞同：0
> 
> 时间：2012-12-16T18:02:05.883
> 
> 标签：python, tcp, client, twisted, file-descriptor

如何获取绑定客户端的端口的文件描述符。我希望它在不同进程之间共享端口。

我能够获取 tcp 服务器的文件描述符，但无法获取客户端的文件描述符。例如：

```
p=reactor.listenTCP(8005,Myfactory()) 
```

端口对象在哪里`p`，在这里我可以通过使用来获取文件描述符`p.fileno()`

但在客户的情况下

```
p=reactor.connectTCP('127.0.0','8080',MyFactory()) 
```

如果这样做的话`p.fileno()`

我收到如下错误

```
AttributeError: 'int' object has no attribute 'fileno' 
```

我知道它是整数，但我的问题是：还有其他方法可以获取客户端的文件描述符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:19:59.427

嗯......你想要做的是*有点*hacky。

首先，connectTCP() 的结果对您来说毫无用处，因为此时还没有建立连接。

可以在连接建立后开始考虑提取文件描述符，所以调用了协议实例的connectionMade()方法。有关文件描述符的信息由实现 ITransport 接口的传输器保存。不幸的是，这个接口没有公开有关文件描述符的信息，因为它更通用。

如果是简单的 TCP 连接，您的传输将是 twisted.internet.protocol.FileWrapper 的实例，它具有文件属性。总结所有这些，您的代码可能看起来像：

```
class MyProtocol(protocol.Protocol):

    def connectionMade(self):
         print 'file descriptor is: ', self.transport.file.fileno() 
```

# android - 动态创建的按钮重叠

> ID：13904018
> 
> 赞同：0
> 
> 时间：2012-12-16T18:02:39.650
> 
> 标签：android, android-layout, button, dynamically-generated

我创建了一个带有`database`调用的布局，其中`button`将为`database`. 就像我需要的`buttons`那样创建，我还发现了如何设置`layout_width`，`layout_height`但是所有这些`buttons`都放置在相同的位置并相互重叠，以便只能`button`访问最后创建的。我用于创建`buttons`外观的代码如下：

```
Button bt = new Button(this);
bt.setText("Button Title");
bt.setLayoutParams(new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
linerLayout.addView(bt); 
```

生成按钮后，活动看起来像这样：

![重叠按钮](../Images/6e06b633e4a0d54a3090706525881569.png)

我查看了可用于按钮的每种方法，但没有找到任何定义位置的方法。我只是想到了以下方法：

```
bt.layout(l, t, r, b); 
```

但不确切知道如何使用它，并认为可能有一种更简单的方法来解决这个问题。谁知道解决方法？！

* * *

## 更改代码

我只是尝试设置布局参数，如“Chen doron”中解释的那样。我的 xml 文件中有一个相对布局：

```
<RelativeLayout
        android:id="@+id/llActOver"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="2" >        
</RelativeLayout> 
```

并像这样格式化生成的按钮：

```
Button bt = new Button(context);
bt.setText(c.getString(iDef));
fontClass.setFont(bt);
//RelativeLayout placeholder = new RelativeLayout(context);
RelativeLayout.LayoutParams  layoutParam = 
           new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,
                                           LayoutParams.WRAP_CONTENT);
if(rowCount < 1){
    layoutParam.addRule(RelativeLayout.ALIGN_PARENT_TOP);
    rowCount++;
}else{
    layoutParam.addRule(RelativeLayout.ALIGN_PARENT_TOP, lastButtonId);
}

lastButtonId = bt.getId();
//placeholder.addView(bt, layoutParam);

linearLayout.addView(bt, layoutParam); 
```

我在循环结束时保存按钮 id，以便在下一轮访问最后一个按钮 id。我还尝试为每个新按钮创建一个新的相对布局，就像代码的注释部分显示的那样，但即使没有新布局，也没有任何反应，我仍然只是所有按钮重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:42:01.427

我终于解决了这个问题，但只是尝试了每种可能的布局类型组合。我发现，我必须在 XML 文件中定义一个 LinearLayout 并且属性 android:orientation="vertical" 是负担得起的。之前设置的所有其他参数都不重要。

所以现在我的 xml 文件中的 ScrollView 中有一个 LinearLayout：

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="2" >

    <LinearLayout
        android:id="@+id/llActOver"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:orientation="vertical">

    </LinearLayout>
</ScrollView> 
```

在java数据库中，我有以下代码为数据库中的每一行创建一个按钮，设置其文本和字体并将其添加到加载的布局中：

```
for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

    Button bt = new Button(context);
    bt.setText(c.getString(iDef));
    fontClass.setFont(bt);
    linearLayout.addView(bt);
} 
```

这里是结果的截图：

![在此处输入图像描述](../Images/6e287ae2b6d043d43527f5b4a9538064.png)

也许有同样问题的其他人只要我有这个描述就不需要担心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:08:14.727

您可以使用相对布局，并使第一个 Button 与父级的顶部对齐。然后每个按钮与前一个按钮的底部对齐。

利用：

```
params.addRule(RelativeLayout.ALIGN_PARENT_TOP); 
```

接着：

```
params.addRule(RelativeLayout.BELOW,ID-Of-Previous-Button); 
```

另请查看：http: [//developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html)

# c++ - VC++ 的一个大错误？为什么初始化器列表不对结构进行值初始化？

> ID：13904020
> 
> 赞同：7
> 
> 时间：2012-12-16T18:02:41.060
> 
> 标签：c++, c++11, initialization, aggregate, initializer-list

C++11 标准 8.5.4.3 说：

“如果初始化列表没有元素并且 T 是具有默认构造函数的类类型，则该对象是值初始化的。”

```
struct A
{
    int get() { return i; }

private:
    int i;
};

int main()
{
    A a = {};

    int n = a.get();
    cout << n << endl;
    // n is a random number rather than 0

    return 0;
} 
```

这是VC++的错误吗？我的 VC++ 是 2012 年 11 月最新的 CTP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T11:45:05.687

8.5p8 涵盖了非聚合类类型的值初始化。在您的情况下，（非联合）类具有隐式声明的默认默认无参数构造函数（12.1p5），它不会被删除并且是微不足道的（同上）。因此 8.5p8 的第二个要点适用：

> — 如果`T`是（可能是 cv 限定的）非联合类类型，没有用户提供或删除的默认构造函数，则该对象为零初始化，如果`T`具有非平凡的默认构造函数，则默认初始化；

所以`A`应该是零初始化的，程序应该打印`0`.

在以下程序中：

```
struct A { int get() { return i; } private: int i; };
#include <iostream>
int main() {
    char c[sizeof(A)];
    new (c) int{42};
    std::cout << (new (c) A{})->get() << '\n';
} 
```

gcc-4.7.2 正确输出`0`；gcc-4.6.3 输出错误`42`；clang-3.0 绝对疯狂并输出垃圾（例如`574874232`）。

# jvm - 不同的jvm之间是否兼容？

> ID：13904029
> 
> 赞同：0
> 
> 时间：2012-12-16T18:03:21.163
> 
> 标签：jvm, weblogic, compatibility, java, jrockit

我有一个关于 weblogic 的问题：我有一个在 jdk 上运行的 weblogic 实例，并且我在此服务器上部署了应用程序（.war 文件）。如果我更改启动参数并告诉它在 jrockit 上运行，部署在其中的应用程序（.war 文件）是否兼容？还是我必须保留原始 jdk？。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:25:56.523

在运行标准 Java 代码方面，SUN JDK 和 BEA Jrockit 相互兼容。举个例子，weblogic server 本身就是 Java 代码，可以在 sun JDK 和 Jrockit 上运行。同样，您的 .war 应用程序在两个 JVM 中都可以正常工作

这些 JVM 之间的不同之处在于它们进行垃圾收集的方式，或者代码压缩选项等等。尽管两者之间的差异每天都在变得模糊，因为两者现在都归甲骨文所有。

# javascript - Fullcalendar Rails 上的 Popover Bootstrap

> ID：13904033
> 
> 赞同：1
> 
> 时间：2012-12-16T18:03:31.533
> 
> 标签：javascript, ruby-on-rails, json, twitter-bootstrap, fullcalendar

Fullcalendar 非常漂亮。我试试看。我想尝试在每个事件上添加弹出框作为描述。如果我单击一个事件，则会显示弹出框。例如[http://i.cubeupload.com/LuBXjx.png](http://i.cubeupload.com/LuBXjx.png) 我不了解 json 和 javascript，但我想了解这一切。任何人都可以帮助我吗？

[弹出框](http://twitter.github.com/bootstrap/javascript.html#popovers) calendars.js.coffee

```
$(document).ready ->
  $('#test').fullCalendar
    header: 
      left: 'prev,next today',
      center: 'title',
      right: 'month'
    defaultView: 'month',
    height: 500,

    buttonText: {
        month: 'month',
        today: 'today'
    },

    eventSources: [{
      url: '/school/calendars',
    }],

    firstHour: 6,
    slotMinutes: 30,
    defaultEventMinutes: 120,
    axisFormat: 'H', 
    timeFormat: 'H(:mm)',
    dragOpacity: {
        agenda: 0.5
    },
    minTime: 0,
    maxTime: 24 
```

在模型/event.rb 上

```
scope :between, lambda {|start_time, end_time|
    {:conditions => [
  "starts_at > ? and starts_at < ?",
  Event.format_date(start_time), Event.format_date(end_time)
] }
  }

  # need to override the json view to return what full_calendar is expecting.
  # http://arshaw.com/fullcalendar/docs/event_data/Event_Object/
  def as_json(options = {})
    {
      :id => self.id,
      :title =>  self.name ,
      :description => self.description || "",
      :start => starts_at.rfc822,
      :end => ends_at.rfc822,
      :allDay => self.all_day,
      :recurring => false,
      #:color => "red"
    }

  end

  def self.format_date(date_time)
    Time.at(date_time.to_i).to_formatted_s(:db)
  end 
```

在控制器/学校/calendars_controller.rb

```
@events = Event.scoped
@events = Event.between(params['start'], params['end']) if (params['start'] && params['end'])
    respond_to do |format|
              format.html # index.html.erb
              format.json { render json:  @events }
     end 
```

这是弹出窗口

```
<div class="popover right">
     <div class="arrow"></div>
         <h3 class="popover-title"> <%= @event.nama %> </h3>
            <div class="popover-content">
              <p>Start at : <%= @event.starts_at %>
              End at : <%= @event.ends_at %>
              Description : <%= @event.description %>
              <br/>
              </p>
            </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T23:56:23.633

您需要的是[eventRender](http://arshaw.com/fullcalendar/docs/event_rendering/eventRender/)回调，它允许您操作每个事件。

```
$('#calendar').fullCalendar({
    ...
    eventRender: function (event, element) {
        element.popover({
            title: event.nama,
            placement: 'right',
            content: + '<br />Start: ' + event.starts_at + '<br />End: ' + event.ends_at + '<br />Description: ' + event.description,
        });
    }
}); 
```

# mysql - 使用带有 rails 的特定 mysql 索引

> ID：13904035
> 
> 赞同：15
> 
> 时间：2012-12-16T18:03:46.387
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

我有这个 ActiveRecord 查询

```
issue = Issue.find(id)
issue.articles.includes(:category).merge(Category.where(permalink: perma)) 
```

并翻译成mysql查询

```
SELECT `articles`.`id` AS t0_r0, `articles`.`title` AS t0_r1, 
       `articles`.`hypertitle` AS t0_r2, `articles`.`html` AS t0_r3,
       `articles`.`author` AS t0_r4, `articles`.`published` AS t0_r5,
       `articles`.`category_id` AS t0_r6, `articles`.`issue_id` AS t0_r7,
       `articles`.`date` AS t0_r8, `articles`.`created_at` AS t0_r9, 
       `articles`.`updated_at` AS t0_r10, `articles`.`photo_file_name` AS t0_r11,
       `articles`.`photo_content_type` AS t0_r12, `articles`.`photo_file_size` AS t0_r13,
       `articles`.`photo_updated_at` AS t0_r14, `categories`.`id` AS t1_r0,
       `categories`.`name` AS t1_r1, `categories`.`permalink` AS t1_r2,
       `categories`.`created_at` AS t1_r3, `categories`.`updated_at` AS t1_r4,
       `categories`.`issued` AS t1_r5, `categories`.`order_articles` AS t1_r6 
        FROM `articles` LEFT OUTER JOIN `categories` ON 
       `categories`.`id` = `articles`.`category_id` WHERE 
       `articles`.`issue_id` = 409 AND `categories`.`permalink` = 'Διεθνή' LIMIT 1 
```

在这个查询的解释中，我看到使用了错误的索引

```
+----+-------------+------------+-------+---------------------------------------------------------------------------+-------------------------------+---------+-------+------+----------+-------------+
| id | select_type | table      | type  | possible_keys                                                             | key                           | key_len | ref   | rows | filtered | Extra       |
+----+-------------+------------+-------+---------------------------------------------------------------------------+-------------------------------+---------+-------+------+----------+-------------+
|  1 | SIMPLE      | categories | const | PRIMARY,index_categories_on_permalink                                     | index_categories_on_permalink | 768     | const |    1 |   100.00 |             |
|  1 | SIMPLE      | articles   | ref   | index_articles_on_issue_id_and_category_id, index_articles_on_category_id | index_articles_on_category_id | 2       | const |   10 |   100.05 | Using where |
+----+-------------+------------+-------+---------------------------------------------------------------------------+-------------------------------+---------+-------+------+----------+-------------+ 
```

我有两个索引，`category_id`单独和`issue_id - category_id`.

在这个查询中，我正在搜索，`issue_id`并且`category_id`使用 . 时`index_articles_on_issue_id_and_category_id`比使用`index_articles_on_category_id`.

如何使用活动记录查询选择正确的索引？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-16T18:24:48.777

您可以像这样促进 arel 使用索引：

```
 class Issue
   def self.use_index(index)
     # update: OP fixed my mistake
     from("#{self.table_name} USE INDEX(#{index})")
   end
 end

 # then
 Issue.use_index("bla").where(some_condition: true) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-09-23T17:01:18.683

## 添加`use_index`到`ActiveRecord::Relation`.

多年来关于将其添加到 Rails 核心的[一些讨论](https://github.com/rails/rails/pull/30514)，但是，看起来 PR 和分支被放弃了。

如果您知道您使用的是什么数据库以及它的局限性，您可以轻松地将其添加到您自己的代码库中，以便可以使用它。

与@krichard 的解决方案非常相似，只是对所有模型都更通用，而不是仅使用`Issue`.

### `config/initializers/active_record_relation.rb`

```
class ActiveRecord::Relation
  # Allow passing index hints to MySQL in case the query planner gets confused.
  #
  # Example:
  #   Message.first.events.use_index( :index_events_on_eventable_type_and_eventable_id )
  #   #=> Event Load (0.5ms)  SELECT `events`.* FROM `events` USE INDEX (index_events_on_eventable_type_and_eventable_id) WHERE `events`.`eventable_id` = 123 AND `events`.`eventable_type` = 'Message'
  #
  # MySQL documentation:
  #    https://dev.mysql.com/doc/refman/5.7/en/index-hints.html
  #
  # See https://github.com/rails/rails/pull/30514
  #
  def use_index( index_name )
    self.from( "#{ self.quoted_table_name } USE INDEX ( #{ index_name } )" )
  end
end 
```

这将允许您使用类似的东西：

```
issue.articles.includes( :category ).use_index( :index_articles_on_issue_id_and_category_id ) 
```

生成的 SQL 将包括：

```
FROM articles USE INDEX( index_articles_on_issue_id_and_category_id ) 
```

# delphi - 是否有类似“Form1.MousePreview:=true”的解决方法？

> ID：13904037
> 
> 赞同：2
> 
> 时间：2012-12-16T18:04:23.930
> 
> 标签：delphi, mouseevent, vcl, mousemove

我有两个 100% 重叠的面板，表单上有不同的内容。
默认情况下，第一个（信息的静态显示）应该是可见的，但是如果用户将鼠标移到两者附近，则另一个（用户交互）应该替换它 - 如果鼠标移开，它应该切换回来。
像这样的东西：

```
if (*the mouse is near*) then
begin
  Panel1.Hide;
  Panel2.Show;
end
else
begin
  Panel2.Hide;
  Panel1.Show;
end; 
```

我的问题是：在哪里捕捉鼠标移动？
每个组件都有自己的`OnMouseMove`处理程序——当然我可以将它们中的每一个转发给表单处理程序，但我宁愿有一些更优雅（并且更易于维护）的东西。
完美的解决方案类似于`Form1.MousePreview := true;`.

另一种解决方案是分配一个通用处理程序来转换坐标并调用表单处理程序；分配可以在 FormCreate 中完成。
但这并不像看起来那么容易，因为一个 TImage 已经拥有自己的鼠标事件处理程序。

我已经尝试`OnMouseEnter`了`OnMouseLeave`两个面板，但没有成功；#1 消失了，但 #2 没有出现。我猜那是因为如果鼠标离开 Panel2，它应该会消失 - 但如果它输入一个按钮，它也会离开它。
这就是为什么我想使用基于坐标的方法来使检查更可靠。

也许两个面板方法是完全错误的？

**更新**：是的，正如雷米所说。
我现在使用的是 TJVPageList，因为 TPageControl 具有可视选项卡。
PageList的`OnMouseEnter`处理程序设置一页，设置另一页`OnMouseLeave`；但是一旦鼠标移到 PageList 上，两个页面都开始闪烁。我也尝试将事件处理程序添加到每个页面，但这没有任何区别。
我应该检查*所有* `OnMouseEnter`/`Leave`事件以过滤掉页面列表、两个页面和页面上的所有组件吗？

**另一个更新：**我现在使用的是 TPageControl，但行为相似。
它不会闪烁，但是如果我将鼠标移到 TPageControl 上，则根本不会显示 TTabSheet。
只有当我按下鼠标左键时，才会显示 UI 表。如果我移开鼠标，另一张纸会正常显示。（如果我按下鼠标左键，TJVPageList 也会显示 UI 页面。）
我使用了 TPageControl 和 TTabSheets 的鼠标事件处理程序（进入/离开）。

**更新3：** 完成了。静态 Panel / TabSheet / JvStandardPage (#1) 不得触发`OnMouseLeave`处理程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:04:01.437

使用单个`TPageControl`而不是两个`TPanel`控件可能会更好地提供您所描述的内容。使用`TPageControl`自己的`OnMouseEnter/Leave`事件（或拦截`CM_MOUSEENTER/LEAVE`消息）根据需要切换`TPageControl.ActivePage`。

# python - 列出扩展奇怪行为

> ID：13904039
> 
> 赞同：6
> 
> 时间：2012-12-16T18:04:28.300
> 
> 标签：python, list

在 Python (2.7) 中发现了以前从未提及的有趣的东西。

这：

```
a = []
a += "a" 
```

确实有效，结果是：

```
>>> a
>>> ["a"] 
```

但

```
a = []
a = a + "a" 
```

给

```
>>> TypeError: can only concatenate list (not "str") to list 
```

有人可以解释为什么吗？感谢您的回答。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T18:13:19.703

Python 区分了`+`and`+=`运算符，并为它们提供了单独的钩子；[`__add__`](http://docs.python.org/2/reference/datamodel.html#object.__add__)和[`__iadd__`](http://docs.python.org/2/reference/datamodel.html#object.__iadd__)。该`list()`类型只是为后者提供了不同的实现。

列表单独实现这些更有效；`__add__`必须返回一个全新的列表，而`__iadd__`可以扩展`self`然后返回`self`。

在 C 代码中，`__iadd__`由 实现[`list_inplace_concat()`](http://hg.python.org/cpython/file/b0935ef48186/Objects/listobject.c#l914)，它简单地调用`listextend()`，或者，在 python 代码中，`[].extend()`. 后者按设计采用*任何*顺序。

`__add__`另一方面，在 C 中由 表示的方法[`list_concat`](http://hg.python.org/cpython/file/b0935ef48186/Objects/listobject.c#l506)仅将 a`list`作为输入，可能是为了提高效率；它可以直接在内部 C 数组上循环并将项目复制到新列表中。

总之，`__iadd__`接受任何序列的原因是因为在实施[PEP 203](http://www.python.org/dev/peps/pep-0203/)（增强添加提案）时，对于列表来说，重用该`.extend()`方法是最简单的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-16T18:06:03.337

**如果`a`是列表，`a + x`则仅在`x`也是列表时才有效，而`a += x`适用于任何可迭代的`x`。**

以下内容可能有助于理解它：

```
In [4]: a = []

In [5]: a += "abc"

In [6]: a
Out[6]: ['a', 'b', 'c'] 
```

关键是`"a"`和`"abc"`是可迭代的，这使得它们能够在`+=`.

这不起作用，`+`因为后者要求两个操作数的类型相同（请参阅[手册](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)）。

要使用 编写相同的内容`+`，您必须扩展可迭代对象：

```
In [7]: a = []

In [8]: a = a + list("abc")

In [9]: a
Out[9]: ['a', 'b', 'c'] 
```

换句话说，`+=`比`+`应用于列表时更通用。

# html - 使用 EaselJS 优化 HTML 中的 Spritesheets

> ID：13904042
> 
> 赞同：3
> 
> 时间：2012-12-16T18:05:11.293
> 
> 标签：html, optimization, easeljs

我是一名 iPhone 开发人员，我在那里使用 Spritesheets 已经有一段时间了。在 iOS 中，spritesheet 图像尺寸应优化为“2 的幂”（例如 1024x2048），因为它们会在这些块中分配内存，而其他图像分辨率的优化程度会较低。

我的问题——这个逻辑是否适用于所有平台？我现在在 HTML5 中使用带有 EaselJS 的精灵表，我想知道使用“二的幂”大小约束是否更好，或者只使用任何大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T17:56:53.433

使用 2 的幂确实会进入 EaselJS/CreateJS 世界。事实上，该建议已直接融入 SpriteSheetBuilder 的 EaselJS 源代码中[-](http://www.createjs.com/Docs/EaselJS/SpriteSheetBuilder.js.html)两者`maxWidth`都有`maxHeight`注释：

> 建议为此值使用 2 的幂（例如 1024、2048、4096）。

这也是[使用 CreateJS的](http://www.atari.com/arcade/developers/building-atari-createjs)[Atari Arcade](http://www.atari.com/arcade)给出的建议。[为 Atari Arcade 开发指南构建 HTML5 游戏](http://www.atari.com/arcade/developers/building-html5-games-atari-arcade)有以下建议：

> 创建尺寸为 2 次方的精灵表和纹理。

# objective-c - UICollectionViewData indexPathForItemAtGlobalIndex 中的断言失败

> ID：13904049
> 
> 赞同：28
> 
> 时间：2012-12-16T18:05:40.700
> 
> 标签：objective-c, ios, uicollectionview

我正在使用**performBatchUpdates()**来更新我的集合视图，我在其中进行完全刷新，即删除其中的所有内容并重新插入所有内容。批量更新是作为附加到( ) 的**观察者**的一部分完成的。`NSMutableArray``bingDataItems`

**cellItems**是包含已插入或将要插入到集合视图中的项目的数组。

这是代码：

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    cultARunner *_cultARunner = [cultARunner getInstance];
    if ( [[_cultARunner bingDataItems] count] ) {
        [self.collectionView reloadData];
        [[self collectionView] performBatchUpdates: ^{

            int itemSize = [cellItems count];
            NSMutableArray *arrayWithIndexPaths = [NSMutableArray array];

            // first delete the old stuff
            if (itemSize == 0) {
                [arrayWithIndexPaths addObject: [NSIndexPath indexPathForRow: 0 inSection: 0]];
            }
            else {
                for( int i = 0; i < cellItems.count; i++ ) {
                    [arrayWithIndexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
                }
            }
            [cellItems removeAllObjects];
            if(itemSize) {
                [self.collectionView deleteItemsAtIndexPaths:arrayWithIndexPaths];
            }

            // insert the new stuff
            arrayWithIndexPaths = [NSMutableArray array];
            cellItems = [_cultARunner bingDataItems];
            if ([cellItems count] == 0) {
                [arrayWithIndexPaths addObject: [NSIndexPath indexPathForRow: 0 inSection: 0]];
            }
            else {              
                for( int i = 0; i < [cellItems count]; i++ ) {
                    [arrayWithIndexPaths addObject:[NSIndexPath indexPathForRow:i inSection:0]];
                }
            }
            [self.collectionView insertItemsAtIndexPaths:arrayWithIndexPaths];
        }
        completion:nil];
    }
} 
```

我收到此错误，但并非所有时间（为什么？）

```
2012-12-16 13:17:59.789 [16807:19703] *** Assertion failure in -[UICollectionViewData indexPathForItemAtGlobalIndex:], /SourceCache/UIKit_Sim/UIKit-2372/UICollectionViewData.m:442
2012-12-16 13:17:59.790 [16807:19703] DEBUG:    request for index path for global index 1342177227 when there are only 53 items in the collection view 
```

我在这里检查了唯一提到相同问题的线程：[UICollectionView Assertion failure](https://stackoverflow.com/questions/12611292/uicollectionview-assertion-failure)，但不是很清楚，即`[collectionview reloadData]`在块中不建议这样做`performBatchUpdates()`。

关于这里可能出了什么问题的任何建议？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-16T21:26:38.057

最后！好的，这就是导致我崩溃的原因。

如前所述，我正在创建补充视图，以便为我的集合视图提供自定义样式的部分标题。

问题是这样的：补充视图的 indexPath 似乎必须对应于集合中现存单元格的 indexPath。如果补充视图的索引路径没有对应的普通单元格，应用程序将崩溃。我相信集合视图会在更新过程中出于某种原因尝试检索补充视图单元格的信息。当它找不到一个时它会崩溃。

希望这也能解决您的问题！

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-23T21:07:34.660

这是此崩溃的正确解决方法：

您的每个补充视图都与某个索引路径相关联。如果您在该索引路径上没有单元格（初始加载，您已删除该行等），请通过布局的委托为您的补充视图返回高度 0。

因此，对于流布局，实现 UICollectionViewDelegateFlowLayout 的

```
(CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section 
```

具有以下逻辑的方法（以及相应的页脚方法，如果您正在使用页脚）

```
if ( you-have-a-cell-at-the-row-for-this-section )
    return myNormalHeaderSize;
else return CGSizeMake( 0,0 ); 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-02T15:41:59.653

`reloadData` doesn't work for me, because the whole purpose of using `performBatchUpdates` is to get the changes animated. If you use `reloadData` you only refresh the data, but without animations.

So suggestions of "replace `performBatchUpdates` with `reloadData`" is pretty much saying "give up on what you're trying to do."

I'm sorry, I'm just frustrated because this error keeps coming up for me while I'm trying to do some great animated updates and my model is 100 % correct, it's some iOS magic inside getting broken and forcing me to change my solutions completely.

My opinion is that Collection Views are still buggy and can't do complicated animated refreshes, even though they should be able to. Because this used to be the same thing for Table Views but those are now pretty stable (it took time, though).

//Edit (Sep 1, 2013) The reported bug is closed now so this issues seems to have been resolved by Apple already.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-23T06:52:03.553

我一直有同样的问题。

我尝试了许多变体，但最后一个似乎有效的是，您的集合视图的名称在`[self.collectionView reloadData]`哪里。`"self.collectionView"`

我已经尝试了以下方法，直接来自“UICollectionView 类参考”：插入、移动和删除项目。

这些最初用于将项目从一个部分“移动”到另一个部分。

*   `deleteItemsAtIndexPaths:`

*   `insertItemsAtIndexPaths:`

接下来，我尝试了`moveItemAtIndexPath:toIndexPath:`.

他们都产生了以下错误：

> -[UICollectionViewData indexPathForItemAtGlobalIndex:]，/SourceCache/UIKit_Sim/UIKit-2372/UICollectionViewData.m:442 中的断言失败

所以，试试“reloadData”方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-04-25T15:41:01.910

一个可能导致此错误的奶酪球错误是在同一视图控制器上的多个 collectionView 上重用相同的 UICollectionViewFlowLayout！只需为每个 collectionview 初始化不同的 flowLayouts 就可以了！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-04T07:59:14.403

如果您从包含页眉/页脚的部分中删除最后一个单元格，则会出现错误。

当时我试图为页眉/页脚大小/元素返回 nil，这**有时可以**解决问题。

选项：

1.  重新加载整个表格视图，而不是动画删除最后一个项目。
2.  添加一个额外的不可见的基本单元，其大小小于 1。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-05-01T02:23:39.033

当我从我的收藏视图中删除一个单元格时，我遇到了这个问题。

问题是我使用了自定义布局，并且调用`layoutAttributesForElementsInRect`返回的数量超过了删除后集合视图中的单元格数量。

显然 UICollectionView 只是遍历该方法返回的数组，而不检查单元格的数量。

修改方法以返回相同数量的布局属性解决了崩溃问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-27T03:00:59.387

我仍然无法弄清楚全局索引是如何增加这么多的，但是我通过在底层数据源数组中插入一个临时项来解决我的问题，即并`cellItems`调用`[self.collectionview reloadData]`.`viewDidLoad()`

这会在集合视图中临时插入一个占位符单元格，直到我使用`performBatchUpdates()`.

# php - 为什么 odbc_exec 总是失败？

> ID：13904055
> 
> 赞同：0
> 
> 时间：2012-12-16T18:05:55.303
> 
> 标签：php, sql, oracle, odbc

我有这段代码，连接总是很好，但是在执行 odbc_exec() 时，它总是给我所有 sql 命令的“错误”。我正在使用 oracle 数据库，并且正在使用 DBA 权限进行连接。在我的 php 页面中，我总是收到警告“警告：odbc_exec()”，但没有指定原因。

```
....
$c = odbc_connect(service_name, user, password);
if (!$c)echo 'Failed to connect';
$sql= "SELECT * FROM MEDICOS";
$result = odbc_exec($c,$sql) or die("error");
... 
```

有谁知道这里发生了什么？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:36:49.040

在 PHP 中使用 ODBC 连接进行查询时，我发现最好使用：

```
$query = odbc_prepare($con, $sql);
$result = odbc_execute($query, $_POST); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T21:51:35.767

解决了。我试图从另一个用户访问“SYS”是所有者的表。如果我这样做 $sql= "SELECT * FROM SYS.MEDICOS" 它运行良好。

# java - 使用 Map Reduce 的最小最大计数

> ID：13904061
> 
> 赞同：3
> 
> 时间：2012-12-16T18:06:21.703
> 
> 标签：java, hadoop, mapreduce

我开发了一个 Map reduce 应用程序来确定用户第一次和最后一次评论的时间，以及该用户根据 Donald Miner 撰写的书发表评论的总数。

但是我的算法的问题是减速器。我根据用户 ID 对评论进行了分组。我的测试数据包含两个用户 ID，每个用户在不同日期发布 3 条评论。因此总共有 6 行。

所以我的 reducer 输出应该打印两条记录，每条记录显示用户第一次和最后一次评论以及每个用户 ID 的总评论数。

但是，我的减速器正在打印六条记录。有人可以指出以下代码有什么问题吗？

```
import java.io.IOException;
import java.text.SimpleDateFormat;
import java.util.Date;
import java.util.Map;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.Path;
import org.apache.hadoop.io.Text;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.Mapper;
import org.apache.hadoop.mapreduce.Reducer;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;
import org.apache.hadoop.util.GenericOptionsParser;
import org.arjun.mapreduce.patterns.mapreducepatterns.MRDPUtils;

import com.sun.el.parser.ParseException;

public class MinMaxCount {

    public static class MinMaxCountMapper extends 
            Mapper<Object, Text, Text, MinMaxCountTuple> {

        private Text outuserId = new Text();
        private MinMaxCountTuple outTuple = new MinMaxCountTuple();

        private final static SimpleDateFormat sdf = 
                     new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSSS");

        @Override
        protected void map(Object key, Text value,
                org.apache.hadoop.mapreduce.Mapper.Context context)
                throws IOException, InterruptedException {

            Map<String, String> parsed = 
                     MRDPUtils.transformXMLtoMap(value.toString());

            String date = parsed.get("CreationDate");
            String userId = parsed.get("UserId");

            try {
                Date creationDate = sdf.parse(date);
                outTuple.setMin(creationDate);
                outTuple.setMax(creationDate);
            } catch (java.text.ParseException e) {
                System.err.println("Unable to parse Date in XML");
                System.exit(3);
            }

            outTuple.setCount(1);
            outuserId.set(userId);

            context.write(outuserId, outTuple);

        }

    }

    public static class MinMaxCountReducer extends 
            Reducer<Text, MinMaxCountTuple, Text, MinMaxCountTuple> {

        private MinMaxCountTuple result = new MinMaxCountTuple();

        protected void reduce(Text userId, Iterable<MinMaxCountTuple> values,
                org.apache.hadoop.mapreduce.Reducer.Context context)
                throws IOException, InterruptedException {

            result.setMin(null);
            result.setMax(null);
            result.setCount(0);
            int sum = 0;
            int count = 0;
            for(MinMaxCountTuple tuple: values )
            {
                if(result.getMin() == null || 
                        tuple.getMin().compareTo(result.getMin()) < 0) 
                {
                    result.setMin(tuple.getMin());
                }

                if(result.getMax() == null ||
                        tuple.getMax().compareTo(result.getMax()) > 0)  {
                    result.setMax(tuple.getMax());
                }

                System.err.println(count++);

                sum += tuple.getCount();
            }

            result.setCount(sum);
            context.write(userId, result);
        }

    }

    /**
     * @param args
     */
    public static void main(String[] args) throws Exception {
        Configuration conf = new Configuration();
        String [] otherArgs = new GenericOptionsParser(conf, args)
                            .getRemainingArgs();
        if(otherArgs.length < 2 )
        {
            System.err.println("Usage MinMaxCout input output");
            System.exit(2);
        }

        Job job = new Job(conf, "Summarization min max count");
        job.setJarByClass(MinMaxCount.class);
        job.setMapperClass(MinMaxCountMapper.class);
        //job.setCombinerClass(MinMaxCountReducer.class);
        job.setReducerClass(MinMaxCountReducer.class);
        job.setOutputKeyClass(Text.class);
        job.setOutputValueClass(MinMaxCountTuple.class);

        FileInputFormat.setInputPaths(job, new Path(otherArgs[0]));
        FileOutputFormat.setOutputPath(job, new Path(otherArgs[1]));

        boolean result = job.waitForCompletion(true);
        if(result)
        {
            System.exit(0);
        }else {
            System.exit(1);
        }

    }

}

Input: 
<row Id="8189677" PostId="6881722" Text="Have you looked at Hadoop?" CreationDate="2011-07-30T07:29:33.343" UserId="831878" />
<row Id="8189677" PostId="6881722" Text="Have you looked at Hadoop?" CreationDate="2011-08-01T07:29:33.343" UserId="831878" />
<row Id="8189677" PostId="6881722" Text="Have you looked at Hadoop?" CreationDate="2011-08-02T07:29:33.343" UserId="831878" />
<row Id="8189678" PostId="6881722" Text="Have you looked at Hadoop?" CreationDate="2011-06-30T07:29:33.343" UserId="931878" />
<row Id="8189678" PostId="6881722" Text="Have you looked at Hadoop?" CreationDate="2011-07-01T07:29:33.343" UserId="931878" />
<row Id="8189678" PostId="6881722" Text="Have you looked at Hadoop?" CreationDate="2011-08-02T07:29:33.343" UserId="931878" />

output file contents part-r-00000:

831878  2011-07-30T07:29:33.343 2011-07-30T07:29:33.343 1
831878  2011-08-01T07:29:33.343 2011-08-01T07:29:33.343 1
831878  2011-08-02T07:29:33.343 2011-08-02T07:29:33.343 1
931878  2011-06-30T07:29:33.343 2011-06-30T07:29:33.343 1
931878  2011-07-01T07:29:33.343 2011-07-01T07:29:33.343 1
931878  2011-08-02T07:29:33.343 2011-08-02T07:29:33.343 1

job submission output:

12/12/16 11:13:52 INFO input.FileInputFormat: Total input paths to process : 1
12/12/16 11:13:52 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable
12/12/16 11:13:52 WARN snappy.LoadSnappy: Snappy native library not loaded
12/12/16 11:13:52 INFO mapred.JobClient: Running job: job_201212161107_0001
12/12/16 11:13:53 INFO mapred.JobClient:  map 0% reduce 0%
12/12/16 11:14:06 INFO mapred.JobClient:  map 100% reduce 0%
12/12/16 11:14:18 INFO mapred.JobClient:  map 100% reduce 100%
12/12/16 11:14:23 INFO mapred.JobClient: Job complete: job_201212161107_0001
12/12/16 11:14:23 INFO mapred.JobClient: Counters: 26
12/12/16 11:14:23 INFO mapred.JobClient:   Job Counters 
12/12/16 11:14:23 INFO mapred.JobClient:     Launched reduce tasks=1
12/12/16 11:14:23 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=12264
12/12/16 11:14:23 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
12/12/16 11:14:23 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
12/12/16 11:14:23 INFO mapred.JobClient:     Launched map tasks=1
12/12/16 11:14:23 INFO mapred.JobClient:     Data-local map tasks=1
12/12/16 11:14:23 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=10124
12/12/16 11:14:23 INFO mapred.JobClient:   File Output Format Counters 
12/12/16 11:14:23 INFO mapred.JobClient:     Bytes Written=342
12/12/16 11:14:23 INFO mapred.JobClient:   FileSystemCounters
12/12/16 11:14:23 INFO mapred.JobClient:     FILE_BYTES_READ=204
12/12/16 11:14:23 INFO mapred.JobClient:     HDFS_BYTES_READ=888
12/12/16 11:14:23 INFO mapred.JobClient:     FILE_BYTES_WRITTEN=43479
12/12/16 11:14:23 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=342
12/12/16 11:14:23 INFO mapred.JobClient:   File Input Format Counters 
12/12/16 11:14:23 INFO mapred.JobClient:     Bytes Read=761
12/12/16 11:14:23 INFO mapred.JobClient:   Map-Reduce Framework
12/12/16 11:14:23 INFO mapred.JobClient:     Map output materialized bytes=204
12/12/16 11:14:23 INFO mapred.JobClient:     Map input records=6
12/12/16 11:14:23 INFO mapred.JobClient:     Reduce shuffle bytes=0
12/12/16 11:14:23 INFO mapred.JobClient:     Spilled Records=12
12/12/16 11:14:23 INFO mapred.JobClient:     Map output bytes=186
12/12/16 11:14:23 INFO mapred.JobClient:     Total committed heap usage (bytes)=269619200
12/12/16 11:14:23 INFO mapred.JobClient:     Combine input records=0
12/12/16 11:14:23 INFO mapred.JobClient:     SPLIT_RAW_BYTES=127
12/12/16 11:14:23 INFO mapred.JobClient:     Reduce input records=6
12/12/16 11:14:23 INFO mapred.JobClient:     Reduce input groups=2
12/12/16 11:14:23 INFO mapred.JobClient:     Combine output records=0
12/12/16 11:14:23 INFO mapred.JobClient:     Reduce output records=6
12/12/16 11:14:23 INFO mapred.JobClient:     Map output records=6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T20:26:15.337

啊抓住了罪魁祸首，只需将您的 reduce 方法的签名更改为以下内容：

`protected void reduce(Text userId, Iterable<MinMaxCountTuple> values, Context context) throws IOException, InterruptedException {`

基本上你只需要拥有`Context`而不是`org.apache.hadoop.mapreduce.Reducer.Context`

现在输出看起来像：

```
831878  2011-07-30T07:29:33.343 2011-08-02T07:29:33.343 3
931878  2011-06-30T07:29:33.343 2011-08-02T07:29:33.343 3 
```

我为你在本地测试了它，这个改变成功了。尽管这是一种奇怪的行为，但如果有人能对此有所了解，那就太好了。不过，它与泛型有关。什么时候`org.apache.hadoop.mapreduce.Reducer.Context`使用它说：

```
"Reducer.Context is a raw type. References to generic type Reducer<KEYIN,VALUEIN,KEYOUT,VALUEOUT>.Context should be parameterized" 
```

但是当只使用“上下文”时就可以了。

# class - 什么时候需要在java中导入？

> ID：13904067
> 
> 赞同：4
> 
> 时间：2012-12-16T18:07:23.090
> 
> 标签：class, methods, import, java-7

以下意外编译并运行没有问题：

```
import info.gridworld.actor.Actor;
import java.util.ArrayList;

public class ChameleonKid extends ChameleonCritter
{
    public ArrayList<Actor> getActors()
    {
        ArrayList<Actor> actors = getGrid().getNeighbors(getLocation());
          ArrayList<Actor> frontBack = new ArrayList<Actor>();
          for(Actor i : actors)
              if(getLocation().getDirectionToward(i.getLocation())==getDirection())
                    frontBack.add(i);
        return frontBack;
    }
} 
```

Actor 类中的方法 getLocation() 返回 Location 的一个实例。然后我调用 Location 类的 getDirectionToward() 方法。`getLocation().getDirectionToward(i.getLocation())`. 这是如何运作的？我从未导入 Location 类。我如何使用它并调用它的方法？如果它是这样工作的，我什么时候*需要*导入一个类？只有当我实例化它时？

我正在使用 Java 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:13:14.860

假设您有两种方法，一种返回`foo.Location`，另一种返回`bar.Location`（两个完全不同的类碰巧具有相同的名称，但在不同的包中 - 完全有效）：

```
foo.Location getFooLocation();
bar.Location getBarLocation(); 
```

当您可以在同一个类中使用这两种方法并链接一些方法时，您不需要导入：

```
if(getFooLocation().onlyInFoo()) {
  //...
}
if(getBarLocation().onlyInBar()) {
  //...
} 
```

它之所以有效，是因为编译器完全确定您使用的是哪个版本（来自哪个包），并且`Location`它知道在哪里可用。`onlyInFoo()``onlyInBar`

但是假设您需要一个局部变量：

```
Location location;
// much later
location = getFooLocation(); 
```

现在编译器并不真正知道`Location`你的意思，所以你必须通过使用包处理类名来帮助他：

```
foo.Location location; 
```

或通过导入该类：

```
import foo.Location; 
```

你现在应该问：*如果我想同时拥有`foo.Location`和`bar.Location`*的局部变量怎么办？好吧，你不能同时导入它们，显然：

```
//WRONG
import foo.Location;
import bar.Location; 
```

您可以再次做的是：要么根本不导入并使用完全限定名称：

```
foo.Location location1;
bar.Location location; 
```

...或仅导入一个位置：

```
import foo.Location;

//...
Location location1;     //foo.Location
bar.Location location2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:12:21.643

您不需要导入该类的原因是您没有明确使用该类。`Actor`是*实际*`Location`在本地使用该类的那个。您永远不会持有对 Location 类的引用，因此您可以继续动态使用它。但是，如果您想保存一个引用（例如`Location l = getLocation();`），则必须导入`Location`，因为编译器必须`l`与 Location 链接，但不知道在哪里可以找到它。

# mysql - 在 Mysql 中创建逻辑视图的查询应该是什么？

> ID：13904074
> 
> 赞同：1
> 
> 时间：2012-12-16T18:08:03.053
> 
> 标签：mysql

我必须在 mysql 中编写一个查询。以下是我的 ad_display 表

```
ad_displaysId |  adv_id | campaign_id | adtypeId | clicked(boolean) 
```

我有另一个表名作为广告，其中有 ad_id

```
ad_id | advertisename 
```

campaignId 在此表中的名称为 camp_table

```
campaign_id | camp_name 
```

adtypeId 在此表中的名称为 adtype

```
adtypeId | adtype_name 
```

现在我想要的是创建一个视图，它可以从我的 ad_display 表中得到这样的结果

```
advertise_name | camp_name | adtype_name | count_of_clicked | count_of_row 
```

这里

```
count_of_clicked = count of row where adv_id=? campaignId=? adtypeId=? clicked=true
count_of_row= count of row where adv_id=? campaignId=? adtypeId=? 
```

我可以提供的其他信息是...在 ad_display 中有多个条目具有相同的 adv_id 相同的 camp_id 相同的 ad_typeId 与单击的列是真还是假。

我是 mysql 的新手..所以有人可以建议我用 mysql 查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:15:51.373

尝试这个：

```
create view my_ad_view as
select
    advertise_name,
    camp_name,
    adtype_name,
    sum(clicked) as count_of_clicked,
    count(*) as count_of_row
from ad_display ad
left join advertise a on a.ad_id = ad.ad_displaysId
left join camp_table ct on ct.campaign_id = ad.campaign_id
left join adtype at on at.adtypeId = ad.adtypeId 
group by advertise_name, camp_name, adtype_name 
```

请注意 的“技巧” `sum(clicked)`，它之所以有效，是因为在 mysql `true`is`1`和`false`is 中`0`，所以对布尔值求和会计算它为真的次数。

# c# - 能否使用 Windows 应用商店应用打包并安装在 Windows 服务中？

> ID：13904077
> 
> 赞同：1
> 
> 时间：2012-12-16T18:08:20.560
> 
> 标签：c#, windows-8, windows-store-apps, windows-store

[我知道您可以按照此处](http://rarcher.azurewebsites.net/Post/PostContent/23)所述从 Windows 商店应用程序调用 Windows 服务，所以我想知道是否可以安装与 Windows 商店应用程序一起打包的自定义服务。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:41:06.673

Did you mean a WCF (web) service vs. a [Windows Service](http://msdn.microsoft.com/en-us/library/d56de412%28v=VS.80%29.aspx) (the latter isn't addressed [in the link you referenced](http://rarcher.azurewebsites.net/Post/PostContent/23)). Regardless, your application will not pass certification if it requires a loopback connection to a service hosted on the same machine.

You can [set this up for testing](http://msdn.microsoft.com/en-us/library/windows/apps/Hh780593.aspx), but note:

> **Enable loopback for network access**
> 
> Network communications using an IP loopback address cannot be used for interprocess communication (between two different apps) since this is restricted by network isolation. Network communication using an IP loopback address is allowed within an app within the same process for communication purposes.
> 
> A developer may want to use loopback for testing or debugging purposes, even though that capability will not be available for customers. For example, an app may want to download data from a web service. For development purposes, the developer wants to test the app on a single computer that is configured with the web service locally on 127.0.0.1.
> 
> **Warning** Loopback is only permitted for development purposes. Usage by apps installed outside of Visual Studio is not permitted.

# android - 恢复特定活动而不是启动新实例

> ID：13904078
> 
> 赞同：3
> 
> 时间：2012-12-16T18:08:20.653
> 
> 标签：android, android-intent

我正在开发一个任务切换器，并且已经想出了在用户按下我的通知时显示应用程序列表并切换到应用程序的方法。我的问题是，我的应用程序没有像启动器那样恢复应用程序，而是启动新实例（重置）它正在切换到的活动。

这是我用来设置 Intent 的代码：

```
ComponentName componentName = taskInfo.topActivity;
String packageName = componentName.getPackageName();

/*Setting intent*/
Intent startApp = packageManager.getLaunchIntentForPackage(packageName);

PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, startApp, PendingIntent.FLAG_UPDATE_CURRENT);
childView.setOnClickPendingIntent(R.id.imageButton2, pendingIntent); 
```

明确地说，我希望用户能够回到他在该应用程序中所做的任何事情，而不是重新开始。

# wcf - 具有基于 URI/URL 的功能的 WCF Web 服务

> ID：13904079
> 
> 赞同：0
> 
> 时间：2012-12-16T18:08:22.077
> 
> 标签：wcf, uritemplate

我正在使用 WCF 服务替换旧的 CMS 托管 API。

对于旧系统/数据库中的每个客户端站点，它的工作方式如下：

**clientdomain.com从****hostingdomain.com/clientdomain/api.xml**的 URL 中提取其内容 (XML) （.xml 扩展名实际上是一个经典的 ASP 页面，它基于 clientdomain 导出为 XML）

例如：来自 hostingdomain/clientdomain/photos/api.xml 的 clientdomain.com/photos 提要

并且所有客户端域都使用相同的 api.xml 文件，如 hostingdomain/ **clientdomain2** /photos/api.xml等。

我猜在界面设置中像：

```
[OperationContract]
        [WebInvoke(Method = "GET",
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.Wrapped,
           UriTemplate = "*clientdomain*/photos")]
        //method
        List<APIContentObject> GetPhotosBySiteID(); 
```

我可以/如何将*URITemplate*中的客户端域更改为从我从数据库获得的列表/数组中提供数据？...或类似的东西，以便它知道 /client1/photos 和 /client2/photos 可用作 UriTemplates？还是我遗漏了什么？...我在 WCF 中遇到了整个 URI/URL 问题...

我可以做一些不同的事情并使用像photos.clientdomain.com这样的东西并将所有域添加为主机头和......？？......沿着这条路线？无论是 WCF 和所有爵士乐中的最佳实践和安全。

这样做的目的是最终移动应用程序和网站都将从这个 WCF 中提取。（以及随后的推/拉管理应用程序）

旧系统使用了一些非常有趣的 IIS 诡计和经典的 asp 东西，而我将留下一些东西......所以......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:13:44.453

URL 模板可以在您的操作合同方法中填充参数。类似于以下内容：

```
[OperationContract]
        [WebInvoke(Method = "GET",
           ResponseFormat = WebMessageFormat.Json,
           BodyStyle = WebMessageBodyStyle.Wrapped,
           UriTemplate = "{clientdomain}/photos")]
        //method
           List<APIContentObject> GetPhotos(string clientdomain)
{
    //Look up clientdomain in DB and return the right thing
} 
```

# php - 新的锂框架安装返回错误 403

> ID：13904084
> 
> 赞同：0
> 
> 时间：2012-12-16T18:08:57.990
> 
> 标签：php, lithium

我阅读了文档并完全按照他们的解释安装了锂，但我不断收到 403 禁止错误。我是 apache 和 php 的新手，我已经花了整整两天的时间来尝试让锂工作。我在 osx lion 上运行 apache 2.0，这就是我所做的：

1-我创建了一个名为 my_app 的新目录`localhost/~marwan/`

2-我将示例锂应用程序提取到该目录中。

3-我下载了锂框架并将其解压缩到`/libraries/lithium/`

当我访问时，`http://localhost/~marwan/my_app/`我收到以下 403 错误：

> 您无权访问此服务器上的 /~marwan/mj/。

我已经研究并将*Options +FollowSymLinks*添加到 .htaccess 文件中，错误更改为：

> 您无权访问此服务器上的 /Users/marwan/Sites/my_app/app/webroot/webroot/。

我尝试将*Options +FollowSymLinks*添加到每个 .htaccess 文件中，但没有任何改变。

我不知道这是否相关：localhost/~marwan/ 上的网站可以工作，但 localhost 也显示 403 错误。我试图摆弄以前答案中发布的不同权限，但没有运气。

谢谢您的帮助。

httpd.conf 文件在这里[http://pastebin.com/jLwHPbuq](http://pastebin.com/jLwHPbuq)

编辑：httpd-userdir.conf 在这里[http://pastebin.com/ZXi51pn7](http://pastebin.com/ZXi51pn7) httpd-vhosts.conf 在这里[http://pastebin.com/3xqRmrzL](http://pastebin.com/3xqRmrzL)

更新

当我从主文件夹中删除 .htaccess 时，锂项目工作，但它不能正常工作，因为重写不起作用。这是项目根目录中的 .htacces [http://pastebin.com/vt0fVyyL](http://pastebin.com/vt0fVyyL)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:04:47.907

您在错误消息中提供`/~marwan/mj/`的路径与您提供的尝试到达的路径`http://localhost/~marwan/my_app/`不匹配。根据错误，Web 服务器说您正在尝试访问一个名为`mj`而您的 url 不包含的目录，`mj`因此除非您正在执行一些 URL 重写，否则这看起来像是一个问题。

另外，为了清楚起见，当您说您安装了库时，`/libraries/litium`您的意思是相对于 Web 根路径，对吗？

* * *

好的，查看您的 conf 文件，您可以从中提供文件`/Library/WebServer/Documents`或从中提供文件`~/Sites`（波浪号代表您的用户目录，因此它与 的路径相同`/Users/marwan/Sites`）

做这个...

1.  `/Library/WebServer/Documents`放置一个名为的文件`index.html`并让它输出一些文本。
2.  确保 .htaccess 中没有 .htaccess 文件`/Library/WebServer/Documents`。
3.  确保您没有以任何方式修改您的 httpd.conf 文件的默认设置。
4.  您是否看到 index.html 的正确行为（您应该）？如果没有，会发生什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-30T19:24:22.970

我在重新启动 apache 后查看了错误日志，发现 DocumentRoot [/usr/docs/dummy-host.example.com] 不存在，所以我使用这个答案 stackoverflow.com/questions/6671042/... 修复了它，现在它可以工作了.

# php - Yii 将所有操作路由到控制器中的一个方法

> ID：13904085
> 
> 赞同：2
> 
> 时间：2012-12-16T18:09:09.830
> 
> 标签：php, routing, yii

我正在尝试使用 Yii 制作一个类似 cms 的应用程序。该功能将类似于：

[http://www.example.com/article/some-article-name](http://www.example.com/article/some-article-name)

我想要做的是让一切都`actionIndex()`按照`ArticleController.php`. 所以我的问题是如何将所有操作路由到 Yii 控制器中的一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:51:00.503

[在您的情况下，我认为使用filter](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter "http://www.yiiframework.com/doc/guide/1.1/en/basics.controller#filter")或[`beforeAction`method](http://www.yiiframework.com/doc/api/1.1/CController#beforeAction-detail "http://www.yiiframework.com/doc/api/1.1/CController#beforeAction-detail")会更好。

* * *

过滤方式：

> 过滤器是一段代码，配置为在控制器操作执行之前和/或之后执行。

样本：

```
class SomeController extends Controller {
    // ... other code ...

    public function filters() {
        return array(
            // .. other filters ...
            'mysimple', // our filter will be applied to all actions in this controller
            // ... other filters ...
        );
    }

    public function filterMysimple($filterChain) { // this is the filter code
        // ... do stuff ...
        $filterChain->run(); // this bit is important to let the action run
    }

    // ... other code ...
} 
```

* * *

`beforeAction`方法：

> 这个方法在一个动作被执行之前被调用（在所有可能的过滤器之后）。你可以覆盖这个方法来为动作做最后的准备。

样本：

```
class SomeController extends Controller {
    // ... other code ...

    protected function beforeAction($action) {
        if (parent::beforeAction($action)){

            // do stuff

            return true; // this line is important to let the action continue
        }
        return false;
}

    // ... other code ...
} 
```

* * *

作为旁注，您也可以通过这种方式访问​​控制器中的当前操作 : `$this->action`，以获取 : 的值`id`：`$this->action->id`

```
if($this->action->id == 'view') { // say you want to detect actionView
    $this->layout = 'path/to/layout'; // say you want to set a different layout for actionView 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:23:26.463

在配置中 urlManager 规则的开头添加：

```
'article/*' => 'article', 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-18T04:44:31.340

我猜您只是想在“视图”文件夹中放入一堆静态页面，并让它们自动选择和呈现，而无需在控制器中为每个页面添加操作。

上面建议的 filters() 和 beforeAction() 甚至 __construct() 都不适用于此目的（如果操作不存在，则过滤器和 beforeaction 根本不会启动，并且 __construct 非常混乱，因为如果您将功能放入__construct - 那时 Yii 甚至不知道它应该调用哪个控制器/动作/视图）

但是，有一个涉及 URL 管理器的简单解决方法

在您的配置中，在 URL 管理器的规则中，添加以下行之一（取决于您的路径设置）

```
'articles/<action:\w+>' => 'articles/index/action/<action>', 
```

或者

```
'articles/<action:\w+>' => 'articles/index?action=<action>', 
```

然后，在您的文章控制器中，只需放置此（或类似的）索引操作

```
public function actionIndex() {
    $name = Yii::app()->request->getParam('action');
    $this->render($name);
} 
```

然后您可以调用 /articles/myarticle 或 /articles/yourarticle 之类的页面，而无需在控制器中添加任何功能。您需要做的只是在您的views/articles 文件夹中添加一个名为myarticle.php 或yourarticle.php 的文件，然后在这些文件中输入您的html 内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T12:01:59.577

您的规则必须类似于以下内容：-

```
 'rules' => array(
            '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
            '<controller:\w+>/<action:\w+>' => 'article/index',
        ), 
```

如果 Controller 和/或 Action 不存在，这会将所有请求传递给PHP 类`actionIndex`中的函数。`ArticleController`

# android - Facebook 的 Android 应用程序是使用 ListView 还是有其他方法可以在时间轴中创建漂亮的帖子列表？

> ID：13904090
> 
> 赞同：4
> 
> 时间：2012-12-16T18:09:57.630
> 
> 标签：android, android-layout, android-listview

Facebook 的 Android 应用程序是使用 ListView 还是有其他方法可以在时间轴中创建漂亮的帖子列表？

此外，它目前非常快，当您快速上下滚动时，与使用动态图像加载器和缓存时的普通 ListView 不同，它不会显示任何重新加载图像或图形的迹象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T10:59:38.970

好吧，我不知道答案，但我可以为此提供一个作弊码。

下载 Facebook 应用 apk 文件，然后反编译

1.  将 facebookapp.apk 的扩展名更改为 facebookapp.zip，单击“是”以显示任何对话框。通过这种方式，您可以查看清单和 xml 布局文件，但仍然无法访问代码。

2.  比他们找到了一个 classes.dex 文件，它使用 dex2jar 将 classes.dex 文件转换为 classes.jar。

3.  使用 Java Decompiler (jd-gui) 或 eclipse 来查看这些类文件。

您可以对任何应用程序执行此操作，这样您可能无法获得准确的代码，但可以了解应用程序的工作原理。

对于任何问题，请参阅谷歌也可以通过谷歌轻松找到所需的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:20:54.310

它可以是 ScrollView 内的多个 LinearLayout。提要有不同的类型，可以有不同的布局，布局可以动态推送到滚动视图上。

就滚动和性能而言，我认为提要是预取的。如果您不希望用户到达列表视图的末尾以加载更多数据，这是一个很好的做法。

# multithreading - 在发出条件变量信号时，互斥锁所有权会发生什么？

> ID：13904092
> 
> 赞同：0
> 
> 时间：2012-12-16T18:10:12.713
> 
> 标签：multithreading, concurrency, concurrent-programming

1.  线程*T1*锁定互斥锁*M*并在条件*C*上等待（释放*M*）。

2.  线程*T2*锁定互斥锁*M*并发出条件*C*信号。

在文献中，一旦*C*发出信号，*T1*就会唤醒并重新获取*M*。

*我对T2*发生的事情持怀疑态度，因为它在发出信号*C之前获得了**M*。

 *在发信号之前获得的关于*M的**T2*会发生什么？

 *1.  *T1*是否已准备好但被阻止，仅在*T2*释放*M*后才执行，以便重新获取它？

2.  *T1*是否准备好并执行，而*T2*被阻塞直到*M*被释放，以便重新获取它？

3.  它们只是同时执行，*T1*与*M*获得，*T2*与*M*释放（或也获得？）

4.  ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:25:37.493

发出条件 C 的信号会唤醒线程 T1，然后它必须通过锁定它来重新获取互斥锁 M。为此，T2 必须首先释放 M。

所以答案是，T1 收到信号唤醒，等待获取 M，T2 释放 M，T1 获取 M，T1 和 T2 并发执行。**

# delphi - Delphi 7中TDateTime的内部格式？

> ID：13904093
> 
> 赞同：2
> 
> 时间：2012-12-16T18:10:22.277
> 
> 标签：delphi, tdatetime

我已经花了很多时间研究这个并且非常卡住：我的问题是 - Delphi TDateTime 的**内部**格式在 Delphi 7（2002 年左右发布）和今天之间是否发生了变化？

场景：我正在读取一个由 Delphi 7 应用程序创建的二进制日志文件，供应商告诉我它是记录中的 TDateTime，但解码这些位表明它显然不是标准的 IEEE 754 浮点，即使现代 Delphi 生成的 TDateTime 是.

但它是**某种**浮点数，大约有 15 位指数和 45 位有效数字（与 IEE754 中的 11 和 53 位相反），并且前导位是 1（在 IEE754 中表示负数）显然不是负面的，例如当前日期/时间。

旧文档中的提示表明 TDateTime “读取为”双精度，但不一定在内部表示为一，这意味着内部格式几乎不可见，除非这些 TDateTime 以二进制形式写出。

我怀疑是 Delphi 8 发生了变化，它添加了 .NET 支持，但我根本无法在任何地方找到对此的任何引用。我有 perl 代码 (!) 可以区分这些主要工作的类型，但我很想找到一个正式的规范，这样我就可以正确地做到这一点。

有没有遇到过这种情况的老手？

~~~ 史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T18:39:11.853

Nothing has changed since Delphi 7\. In Delphi 7, and in fact previous versions, TDateTime is IEEE754, measuring the number of days since the Delphi epoch.

You are going to need to get in touch with the software vendor and try to work out what this data's format really is. It would be surprising if the format was a non-IEEE754 floating point data type. Are you quite sure that it is floating point?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T11:38:56.970

至于 BCB3、BCB6 和 D4，它正是 IEEE 754[双精度浮点格式](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)，在 VCL 源文件`system.pas`（包括在 BCB6 中）中它是这样定义的：

```
TDateTime = type Double; 
```

# forms - 使用规则集进行 Codeigniter 表单验证

> ID：13904095
> 
> 赞同：4
> 
> 时间：2012-12-16T18:10:26.117
> 
> 标签：forms, codeigniter, validation

我正在尝试在我的 Codeigniter 项目中创建一组表单验证规则，以便当第一个验证集的验证失败时，第二个验证集不应运行。

我在 CI 手册中找到了这个：

```
$config = array(
             'signup' => array(
                                array(
                                        'field' => 'username',
                                        'label' => 'Username',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'password',
                                        'label' => 'Password',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'passconf',
                                        'label' => 'PasswordConfirmation',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'email',
                                        'label' => 'Email',
                                        'rules' => 'required'
                                     )
                                ),
             'email' => array(
                                array(
                                        'field' => 'emailaddress',
                                        'label' => 'EmailAddress',
                                        'rules' => 'required|valid_email'
                                     ),
                                array(
                                        'field' => 'name',
                                        'label' => 'Name',
                                        'rules' => 'required|alpha'
                                     ),
                                array(
                                        'field' => 'title',
                                        'label' => 'Title',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'message',
                                        'label' => 'MessageBody',
                                        'rules' => 'required'
                                     )
                                )                          
           );
$this->form_validation->set_rules($config); 
```

我知道我现在可以单独运行每个集合的验证（在本例中为 $this->form_validation->run('signup') 和 $this->form_validation->run('email')）。

问题是，当我使用 $config 数组时，错误不会被添加到表单验证类中（因此不会显示），而表单发布失败。当我不使用规则集时，它确实添加并显示了错误，而只是 $this->form_validation->set_rules() 方法。

在使用一组规则时输入无效的表单数据时没有添加错误消息，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:05:43.797

$config 数组需要位于 application/config 目录中名为 form_validation.php 的文件中。然后在加载 CI 时自动加载，并在创建时传递给 Form 验证对象。

第一次调用 FV 对象的 run() 方法时，如果 FV 对象中没有设置规则，它会查找在创建时给出的配置规则，并使用由作为参数传递的名称索引的组跑（）。在 CI 应用程序的同一次调用中，所有后来对 run() 的调用，即使使用不同的组名，也将绕过此检查，因为现在已经设置了规则 - 即，您只能在调用中设置一次规则组。

因此，您将无法创建两组规则，然后依次调用。您可以拨打一个或另一个。

使用 set_rule() 级联规则可能会更好 - 即，使用 set_rule() 添加一些规则，然后针对它们进行验证。如果它们通过，添加更多规则并重试验证。你有效地重复旧规则，知道它们会通过，但这意味着任何失败都将是新规则的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-18T05:54:20.370

在 form_validation 数组中尝试 array_merge。

这里如果你想要两个数组组合和gat join 验证错误。你可以用这个

```
$config["form"] = array_merge($config['signup'], $config['email']); 
```

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-18T06:37:35.543

如果有人遇到同样的问题，试试这个：

```
if ($this->form_validation->run('signup') === FALSE) { /* return your errors */ }

$this->form_validation->reset_validation();
$this->form_validation->set_data($data);
if ($this->form_validation->run('email') === FALSE) { /* return your errors */ }

// Do your stuff 
```

您需要在每次验证后重置以更改规则。您还可以使用：

```
$this->form_validation->set_rules($validation_rules); 
```

注意：先设置数据再设置规则，反之不行！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-10-08T10:10:00.310

嘿，alwin，您需要在提交表单之前运行 form_validation 规则....

```
$config = array(
             'signup' => array(
                                array(
                                        'field' => 'username',
                                        'label' => 'Username',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'password',
                                        'label' => 'Password',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'passconf',
                                        'label' => 'PasswordConfirmation',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'email',
                                        'label' => 'Email',
                                        'rules' => 'required'
                                     )
                                ),
             'email' => array(
                                array(
                                        'field' => 'emailaddress',
                                        'label' => 'EmailAddress',
                                        'rules' => 'required|valid_email'
                                     ),
                                array(
                                        'field' => 'name',
                                        'label' => 'Name',
                                        'rules' => 'required|alpha'
                                     ),
                                array(
                                        'field' => 'title',
                                        'label' => 'Title',
                                        'rules' => 'required'
                                     ),
                                array(
                                        'field' => 'message',
                                        'label' => 'MessageBody',
                                        'rules' => 'required'
                                     )
                                )                          
           );

 $this->form_validation->set_rules($config);
    ///u have to chek form validation getting validate or not
   //enter code here

 if ($this->form_validation->run() === FALSE) {
                $this->load->view('your_view');
            } else {$this->ur_controller->method_name();
                $this->load->view('whatever ur view');

            }
        } 
```

# ruby-on-rails - Rails 回形针多个附件 - 获取附件

> ID：13904098
> 
> 赞同：0
> 
> 时间：2012-12-16T18:11:02.717
> 
> 标签：ruby-on-rails, image, paperclip, attachment

我已经实现了使用回形针上传多张图片。并存储到私有路径：

```
:path => ":rails_root/data/images/:id/:basename.:extension" 
```

现在我想向他们发送一个宁静的服务，将组件ID作为参数。问题是我不知道如何获取他们的图像，因为组件不会将图像存储在数据库中，我已经写了

```
has_many :assets 
```

但是几天前创建的移民没有资产。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:45:06.417

尝试

```
rails g paperclip Asset image 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:32:45.040

您应该有一个迁移，它创建带有回形针字段的资产表：

```
create_table :assets do |t|
  t.timestamps
end
add_attachment :assets, :image 
```

# java - java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver

> ID：13904103
> 
> 赞同：23
> 
> 时间：2012-12-16T18:11:56.447
> 
> 标签：java, servlets, jdbc, tomcat7

我写了一个 Java Servlet 程序，但是当我运行它时，它显示了异常

```
java.lang.ClassNotFoundException: oracle.jdbc.driver.OracleDriver 
```

我的代码是

```
package skypark;

import java.io.*;
import javax.servlet.*;
import java.text.*;
import javax.servlet.http.*;
import java.sql.*;
import java.sql.Date;

public class Registration extends HttpServlet {

    private static final long serialVersionUID = 1L;

    public static Connection prepareConnection() throws ClassNotFoundException, SQLException {
        String dcn = "oracle.jdbc.driver.OracleDriver";
        String url = "jdbc:oracle:thin:@JamesPJ-PC:1521:skypark";
        String usname = "system";
        String pass = "tiger";
        Class.forName(dcn);
        return DriverManager.getConnection(url, usname, pass);
    }

    public void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        resp.setContentType("text/html");
        PrintWriter out = resp.getWriter();

        try {
            String phone1, dofb, date1, month, year, uname, fname, lname, address, city, state, country;
            String pin, email, password, gender, lang, qual, relegion, privacy, hobbies, fav;

            uname = req.getParameter("uname");
            fname = req.getParameter("fname");
            lname = req.getParameter("lname");
            date1 = req.getParameter("date");
            month = req.getParameter("month");
            year = req.getParameter("year");
            address = req.getParameter("address");
            city = req.getParameter("city");
            state = req.getParameter("state");
            country = req.getParameter("country");
            pin = req.getParameter("pin");
            email = req.getParameter("email");
            password = req.getParameter("password");
            gender = req.getParameter("gender");
            phone1 = req.getParameter("phone");

            lang = "";
            qual = "";
            relegion = "";
            privacy = "";
            hobbies = "";
            fav = "";

            dofb = date1 + "-" + month + "-" + year;
            int phone = Integer.parseInt(phone1);
            DateFormat formatter;
            java.util.Date dob;
            formatter = new SimpleDateFormat("dd-MM-yy");
            dob = formatter.parse(dofb);

            Connection con = prepareConnection();
            String Query = "Insert into regdetails values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
            PreparedStatement ps = con.prepareStatement(Query);

            ps.setString(1, uname);
            ps.setString(2, fname);
            ps.setString(3, lname);
            ps.setDate(4, (Date) dob);
            ps.setString(5, address);
            ps.setString(6, city);
            ps.setString(7, state);
            ps.setString(8, country);
            ps.setString(9, pin);
            ps.setString(10, lang);
            ps.setString(11, qual);
            ps.setString(12, relegion);
            ps.setString(13, privacy);
            ps.setString(14, hobbies);
            ps.setString(15, fav);
            ps.setString(16, gender);

            int c = ps.executeUpdate();

            String query = "insert into passmanager values(?,?,?,?)";
            PreparedStatement ps1 = con.prepareStatement(query);

            ps1.setString(1, uname);
            ps1.setString(2, password);
            ps1.setString(3, email);
            ps1.setInt(4, phone);

            int i = ps1.executeUpdate();

            if (c == 1 || c == Statement.SUCCESS_NO_INFO && i == 1 || i == Statement.SUCCESS_NO_INFO) {
                out.println("<html><head><title>Login</title></head><body>");
                out.println("<center><h2>Skypark.com</h2>");
                out.println("<table border=0><tr>");
                out.println("<td>UserName/E-Mail</td>");
                out.println("<form action=login method=post");
                out.println("<td><input type=text name=uname></td>");
                out.println("</tr><tr><td>Password</td>");
                out.println("<td><input type=password name=pass></td></tr></table>");
                out.println("<input type=submit value=Login>");
                out.println("</form></body></html>");
            } else {
                out.println("<html><head><title>Error!</title></head><body>");
                out.println("<center><b>Given details are incorrect</b>");
                out.println(" Please try again</center></body></html>");
                RequestDispatcher rd = req.getRequestDispatcher("registration.html");
                rd.include(req, resp);
                return;
            }
        } catch (ClassNotFoundException cnfe) {
            out.println("<html><head><title>Error!</title><body>");
            out.println("<b><i>Class not found " + cnfe + "</i></b>");
            out.println("</body></html>");
        } catch (SQLException sqle) {
            out.println("<html><head><title>Error!</title><body>");
            out.println("<b><i>Unable to process try after some time Sql error</i></b>");
            out.println("</body></html>");
        } catch (ParseException e) {
            out.println("<html><head><title>Error!</title><body>");
            out.println("<b><i>Unable to process Parseint exc " + e + "</i></b>");
            out.println("</body></html>");
        }

        out.flush();
        out.close();
    }
} 
```

我的课程路径是：

```
C: \Windows\ system32 > echo % classpath %
  E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ oui\ jlib\ classes12.jar;
E: \app\ JamesPJ\ product 11.2.0\ dbhome_1\ jlib\ orai18n.jar;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ jdbc\ lib\ ojdc6_g.jar;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ BIN;
C: \Program Files\ Java\ jdk1.7.0_09\ bin;
C: \Users\ JamesPJ\ Documents;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ jdbc\ lib;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ jlib;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ jdbc\ lib\ ojdbc6.jar;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ oc4j\ jdbc\ lib\ orai18n.jar;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ oc4j\ jdbc\ lib\ ocrs12.jar;
E: \app\ JamesPJ\ product\ 11.2.0\ dbhome_1\ owb\ wf\ lib\ ojdbc14.jar;
C: \Program Files\ Apache Software Foundation\ Tomcat 7.0\ lib\ servlet - api.jar 
```

当我给

```
 java oracle.jdbc.driver.OracleDriver 
```

命令提示符中的命令，它显示以下行

```
Error: Main method not found in class oracle.jdbc.driver.OracleDriver, please define the main method as:
       public static void main(String[] args) 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-16T18:14:43.563

您是否在 Web 应用程序的 lib 文件夹中复制了 classes12.jar 并在 eclipse 中设置了类路径。

在包资源管理器构建路径中右键单击项目 -> 添加外部档案...

选择您的 ojdbc6.jar 存档

按确定

或者

浏览此[链接](http://wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)并仔细阅读并进行操作。

现在应该在 Package explorer 下的“Referenced Librairies”中引用该库。现在尝试再次运行您的程序。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-11-20T07:58:05.250

通过`C:\apache-tomcat-7.0.47\lib` 路径（此路径可能因您安装 Tomcat 服务器的位置而异），`ojdbc14.jar`如果不包含则过去。

然后在 Eclipse 中重新启动服务器，然后在服务器上运行您的应用程序

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-03-13T10:27:59.393

团队！要从您的 Servlet 执行 SQL 查询，您应该在文件夹中添加 JDBC jar 库

```
WEB-INF/lib 
```

在此之后，您可以调用驱动程序，例如：

```
Class.forName("oracle.jdbc.OracleDriver"); 
```

现在 Y 可以使用与 DB-server 的连接

==> 73！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-16T11:17:44.283

尝试通过服务器库“C:\apache-tomcat-7.0.47\lib”添加ojdbc6.jar，

然后在eclipse中重启服务器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-28T10:18:40.517

我遇到了同样的错误，但是在将 ojdbc14.jar 复制到 lib 文件夹后，没有更多例外。（从某处复制 ojdbc14.jar 并将其粘贴到 WebContent 内的 lib 文件夹中。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-14T17:53:28.247

我有同样的问题，但能够通过执行以下操作来解决它：

右键单击项目 -> 属性，然后在部署程序集中添加 JAR（odjbc6 或 14）文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-06T03:09:15.713

我遇到了同样的错误，但是在将 ojdbc14.jar 复制到 lib 文件夹后，没有更多例外。（从某处复制 ojdbc14.jar 并将其粘贴到 WebContent 内的 lib 文件夹中。）

# android - Android 滑动侧边菜单和水平列表视图

> ID：13904106
> 
> 赞同：0
> 
> 时间：2012-12-16T18:12:07.557
> 
> 标签：android, android-fragments, swipe-gesture

在我的应用程序中，我使用了两个外部库（[滑动菜单](https://github.com/StevenRudenko/ActionsContentView)和[水平列表视图](http://www.dev-smart.com/archives/34)）。第一个实现了类似 Facebook 应用程序的滑动菜单效果，它运行良好，我可以通过滑动或单击按钮来触发移动。第二个实现了一个水平列表视图，我可以向右/向左滚动滑动。使用它们我可以看到列表视图，但滚动运动不起作用。我该如何解决？我猜菜单正在“窃取”滑动动作。

如果您需要一些代码，请询问。

编辑：实际上它有效！我只需将手指放在水平视图上并向上/向下滑动一点，然后我就可以向左/向右滑动。这可能是导致这种行为的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-22T00:03:38.130

有非常简单的解决方案！只需为您的 Horizo​​ntalListView 设置 OnTouchListener，在 ACTION_DOWN 上禁用 slinding 菜单并在 ACTION_UP 上重新启用它。

```
getActivity().findViewById(R.id.my_horizontal_list_view).setOnTouchListener(

    new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {

            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                ((SlidingFragmentActivity) getActivity()).getSlidingMenu().setSlidingEnabled(false);
            }

            if (event.getAction() == MotionEvent.ACTION_UP) {
                ((SlidingFragmentActivity) getActivity()).getSlidingMenu().setSlidingEnabled(true);
            }

            return false;
        }
    }
); 
```

# c# - 搜索 ListBox 时出现 NotImplementedException

> ID：13904110
> 
> 赞同：-2
> 
> 时间：2012-12-16T18:12:23.947
> 
> 标签：c#, listbox

我只是想在我的字符串中搜索字符串，`ListBox`我认为在我遇到这个问题之前我已经很沮丧了：

> *** *.exe中发生了“System.NotImplementedException”类型的未处理异常
> 
> 附加信息：方法或操作未实现。

这是我的一段代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace *****
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            add();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            search();
        }
        public void search()
        {
            if (textBox2.Text == string.Empty)
            {
                MessageBox.Show("Must enter value");
            }
            else
            {
                string toFind = textBox2.Text;
                if (toFind != string.Empty)
                {
                    int search = listBox1.FindString(toFind);
                    if (search != -1)
                    {
                        listBox1.SetSelected(search, true);
                    }
                    else
                    {
                        MessageBox.Show("Could not find "+toFind);
                    }
                }
            }
        }
        public void add()
        {
            if (textBox1.Text == string.Empty)
            {
                MessageBox.Show("Must enter value");
            }
            else
            {
                listBox1.Items.Add(textBox1.Text);
            }
            textBox1.Clear();
        }
        private void textBox1_KeyDown(object sender, KeyEventArgs e)
        {
            if(e.KeyCode == Keys.Enter)
            {
                add();
            }
        }
        private void textBox2_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Enter)
            {
                search();
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:19:42.640

在您的整个项目中搜索以下内容：

```
throw new NotImplementedException(); 
```

并评论它;）

# mysql - MySQL 复制从站每 10 分钟失去连接

> ID：13904111
> 
> 赞同：1
> 
> 时间：2012-12-16T18:12:40.267
> 
> 标签：mysql, ssh, replication

我为备份目的设置了多台使用 MySQL 单向复制的服务器。在其中一个奴隶上我有问题。恰好每 10 分钟它就会失去连接并重新连接而不会出现问题。错误日志中的示例：

```
121216 18:05:49 [Note] Slave I/O thread: Failed reading log event, reconnecting to retry, log 'mysql-bin.000002' at position 782733912
121216 18:05:49 [ERROR] Slave I/O: error reconnecting to master 'repl@127.0.0.1:5002' - retry-time: 60  retries: 86400, Error_code: 2013
121216 18:06:49 [Note] Slave: connected to master 'repl@127.0.0.1:5002',replication resumed in log 'mysql-bin.000002' at position 782733912
121216 18:15:49 [ERROR] Error reading packet from server: Lost connection to MySQL server during query ( server_errno=2013)
121216 18:15:49 [Note] Slave I/O thread: Failed reading log event, reconnecting to retry, log 'mysql-bin.000002' at position 822218944
121216 18:15:49 [ERROR] Slave I/O: error reconnecting to master 'repl@127.0.0.1:5002' - retry-time: 60  retries: 86400, Error_code: 2013
121216 18:16:49 [Note] Slave: connected to master 'repl@127.0.0.1:5002',replication resumed in log 'mysql-bin.000002' at position 822218944
121216 18:25:49 [ERROR] Error reading packet from server: Lost connection to MySQL server during query ( server_errno=2013)
121216 18:25:49 [Note] Slave I/O thread: Failed reading log event, reconnecting to retry, log 'mysql-bin.000002' at position 850106111
121216 18:25:49 [ERROR] Slave I/O: error reconnecting to master 'repl@127.0.0.1:5002' - retry-time: 60  retries: 86400, Error_code: 2013 
```

因此，一切正常，但错误日志中充斥着消息。

我查看了各种 MySQL 设置，但没有看到任何设置为 10 分钟或 600 秒。

FWIW，复制通过使用 AutoSSH 的 SSH 隧道工作。我查看了 sshd_config，但也没有看到任何超时设置。

我应该查看哪个设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T19:16:13.040

我最近在看一些类似的问题，结果我们的防火墙阻止了 autossh 监控端口，因此 autossh 每 10 分钟重新启动 ssh。这也可能发生在你身上。

检查您的 autossh 日志。它通常是 /var/log/syslog 除非您指定 AUTOSSH_LOGFILE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T22:59:18.033

正如@interskh 指出的那样，罪魁祸首可能是`ssh`. 我`/var/log/syslog`包含的消息如下：

```
Sep 15 16:34:57 servername autossh[2799]: timeout polling to accept read connection
Sep 15 16:34:57 servername autossh[2799]: port down, restarting ssh
Sep 15 16:34:57 servername autossh[2799]: starting ssh (count 136)
Sep 15 16:34:57 servername autossh[2799]: ssh child pid is 11664 
```

我发现了一个[Debian 错误报告线程](https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=351162)，该线程建议与许多教程相反，没有必要包含该`-M`参数。从版本 1.4a-1 开始，`autossh`默认情况下将使用随机选择的“高”端口（可以说比手动指定监视端口更好`-M`）。

**省略`-M`标志为我解决了这个问题。**

上一条命令（每 10 分钟重新启动一次 SSH 连接）

```
autossh -p2223 -M 20000 -f username@example.com -L 12345:127.0.0.1:3306 -N 
```

新（工作）命令

```
autossh -p2223 -f username@example.com -L 12345:127.0.0.1:3306 -N 
```

万一它对任何人都有帮助，我们的 SSH 客户端正在运行 Ubuntu，而 SSH 服务器正在运行 CentOS。

# gevent - 为什么在此示例中需要 gevent.sleep(0.1) 以防止应用程序阻塞？

> ID：13904114
> 
> 赞同：6
> 
> 时间：2012-12-16T18:12:49.867
> 
> 标签：gevent, pyzmq

我正在把头发拉到这个上面。我正在尝试使用 zeromq 和 gevent 获得最简单的示例。我将此脚本更改为使用 PUB/SUB 套接字，当我运行它时，“服务器”套接字永远循环。如果我取消注释 gevent.sleep(0.1) 行，那么它会按预期工作并让给另一个绿色线程，在这种情况下是客户端。

问题是，为什么我必须手动添加睡眠呼叫？我认为当我导入 zmq 的 zmq.green 版本时，发送和接收调用是非阻塞的，并且在下面进行任务切换。

换句话说，为什么我必须添加 gevent.sleep() 调用才能使这个示例正常工作？在 Jeff Lindsey 的原始示例中，他正在执行 REQ/REP 套接字，并且他不需要添加睡眠调用……但是当我将其更改为 PUB/SUB 时，我需要它来让客户端进行处理。

```
#Notes: Code taken from slide: http://www.google.com/url?sa=t&rct=j&q=zeromq%20gevent&source=web&cd=27&ved=0CFsQFjAGOBQ&url=https%3A%2F%2Fraw.github.com%2Fstrangeloop%2F2011-slides%2Fmaster%2FLindsay-DistributedGeventZmq.pdf&ei=JoDNUO6OIePQiwK8noHQBg&usg=AFQjCNFa5g9ZliRVoN_yVH7aizU_fDMtfw&bvm=bv.1355325884,d.cGE
#Jeff Lindsey talk on gevent and zeromq

import gevent
from gevent import spawn
import zmq.green as zmq

context = zmq.Context()

def serve():
    print 'server online'
    socket = context.socket(zmq.PUB)
    socket.bind("ipc:///tmp/jeff")
    while True:
        print 'send'
        socket.send("World")
        #gevent.sleep(0.1)

def client():
    print 'client online'
    socket = context.socket(zmq.SUB)
    socket.connect("ipc:///tmp/jeff")
    socket.setsockopt(zmq.SUBSCRIBE, '') 
    while True:
        print 'recv'
        message = socket.recv()

cl = spawn(client)
server = spawn(serve)

print 'joinall'
gevent.joinall([cl, server])

print 'end' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T21:38:02.847

> 我认为当我导入 zmq 的 zmq.green 版本时，发送和接收调用是非阻塞的，并且在下面进行任务切换。

zmq.green 仅在这些调用阻塞时才会产生，如果它们准备好则不会产生（没有什么可等待的）。在您的情况下，发件人始终准备就绪，因此它永远没有理由屈服。

一些指示：

*   最小显式收益率是`gevent.sleep(0)`，它不需要是有限的。
*   zmq.green 仅在阻塞调用时产生。也就是说，如果一个套接字在你要求它时总是准备好发送/接收，它永远不会屈服。
*   `socket.send`仅在套接字未准备好发送时阻塞`not (socket.events & zmq.POLLOUT)`（
*   一般来说，**不要相信 send 到 yield**，因为 zeromq 的工作方式，除非你超出了配置的容量，否则这种情况很少发生。
*   与 send 不同，**recv**在正常使用时会定期阻塞，因此它会在大多数调用中产生。但是，如果对等方正在淹没您的传入缓冲区，则重复的 recv 调用将不会屈服，直到没有任何东西可以接收，因此您可能再次需要每隔一段时间显式地屈服以防止饥饿。

zmq.green 相当于将 send/recv 变成：

```
try:
    socket.send(msg, zmq.NOBLOCK) # or recv
except zmq.ZMQError as e:
    if e.errno == zmq.EAGAIN:
        yield # and wait for socket to be ready, then try again 
```

因此，如果使用 NOBLOCK 的发送/接收始终成功，则套接字永远不会屈服。

换句话说：如果一个套接字没有什么可等待的，它就不会等待。

# vb.net - 此 BackgroundWorker 当前正忙，无法同时运行多个任务

> ID：13904116
> 
> 赞同：0
> 
> 时间：2012-12-16T18:12:59.680
> 
> 标签：vb.net, winforms, backgroundworker

我很困惑。是的，我知道我不能使用同一个后台工作人员同时执行两项任务。我不明白的是这个。这是我的代码（所有这些都是设置进度条的 marqueeanimationspeed ...

```
'THE FOLLOWING SUB TOGGLES THE PROGRESS BAR
Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork

    'CHECK THE STATE OF THE PROGRESS BAR AND TOGGLE IT
    If ToolStripProgressBar1.MarqueeAnimationSpeed = 0 Then

        ToolStripProgressBar1.MarqueeAnimationSpeed = 22

    End If

    ToolStripProgressBar1.MarqueeAnimationSpeed = 0

End Sub 
```

好的，那么这可能需要多长时间？工人不做任务并退出吗？所以我暂停了（system.threading.thread.sleep（2000）......同样的问题，做了20秒......同样的问题。

所以我假设这是我错过的一件简单的事情，但我花了一个多小时搜索但我不明白。

我在这里想要完成的只是在 UI 运行其他东西时启动选取进度条，然后停止它。我假设我可以创建另一个后台工作人员并使用它，但我想了解为什么第一个工作人员没有完成任务。

谢谢，再一次，是的，我花了一个小时搜索，找到了各种“解决方案”，但没有解释为什么这件事没有完成。

好的，这里是调用 BGW 的子

```
 'THE FOLLOWING SUB FIRES THE SETTING CONNECTION STRINGS SUB
Private Sub SetCSButton_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles SetCSButton.Click

    'START THE PROGRESS BAR & CHANGE THE LABEL
    BackgroundWorker1.RunWorkerAsync()
    Threading.Thread.Sleep(1000)
    ToolStripStatusLabel1.Text = "Preparing the connection strings..."
    Me.Refresh()

    thread3 = New System.Threading.Thread(AddressOf SetConnectionStrings)
    thread3.Start()

    'STOP THE PROGRESS BAR & CHANGE THE LABEL
    BackgroundWorker2.RunWorkerAsync()
    Threading.Thread.Sleep(1000)
    ToolStripStatusLabel1.Text = "Standing by..."
    Me.Refresh()

End Sub**strong text** 
```

我有 20 秒的延迟，但第一个 BGW 仍然没有完成。我知道这很简单，但我不明白，这就是我在这里所追求的。

我确实更改了代码，并且没有使用与我写这个问题时尝试的方法相同的方法......我不明白的是为什么一个简单的操作显然永远不会完成......话虽如此，它确实完成了，因为我能够使用 runworkercompleted 事件显示一个 msgbox。因此，正如我尝试但未能传达的那样，这不是关于编码的正确或错误方式，我知道这是错误的，只是试图快速而肮脏，不管怎样，我现在不这样做，但我不明白为什么BGW“仍在工作”。一定有一些我不知道的简单的事情。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:16:43.787

错误不在发布的代码中，而是在您启动 Bgw 的位置。

但这一切都无关紧要，因为您不应该触摸 DoWork 的 GUI：

```
Private Sub BackgroundWorker1_DoWork(...) Handles BackgroundWorker1.DoWork

    'CHECK THE STATE OF THE PROGRESS BAR AND TOGGLE IT
    If ToolStripProgressBar1.MarqueeAnimationSpeed = 0 Then   ' Boom, cross-threading violation

        ToolStripProgressBar1.MarqueeAnimationSpeed = 22

    End If 
```

我认为您在这里不需要 Bgw、线程或计时器。只需在慢动作之前/之后改变速度。

# gcc - 在 Ubuntu 12.04 中编译和链接 OpenCV

> ID：13904117
> 
> 赞同：8
> 
> 时间：2012-12-16T18:12:59.883
> 
> 标签：gcc, ubuntu, opencv

我刚刚花了很长时间让 openCV 在 Ubuntu 12.04 中正确链接，并认为我会分享我学到的知识以造福他人。

OpenCV 现在可以在 Ubuntu 存储库中作为

```
sudo apt-get install libopencv-dev 
```

这很好，但我相信（如果我错了，请纠正我）这个版本的 opencv 对库有不同的命名约定。主要区别在于，在 C++ 中，包含行应为

```
#include "opencv2/opencv.hpp" 
```

这将使您的代码编译为对象但不链接。另一个区别是静态库也已从*libcv**重命名为*libopencv**。例如，二进制文件现在可以位于

```
/usr/lib/libopencv_core.so
/usr/lib/libopencv_highgui.so
.
.
. 
```

为了解决这个问题，我需要通过将编译器命令更改为

```
g++ main.cpp -lopencv_core -lopencv_highgui ... 
```

或者在 CMake 中

```
target_link_libraries(main opencv_core opencv_highgui ...) 
```

我希望这有帮助。如果有人比我了解更多，我很想知道这里发生了什么。

-麦克风

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-20T19:58:05.063

就个人而言，我使用“pkg-config”来获取编译标志。

```
g++ `pkg-config --cflags opencv` main.c `pkg-config --libs opencv` -o main 
```

主要示例：

```
#include <stdio.h>
#include <cv.h>

int main(void)
{
    printf("%s\r\n", CV_VERSION);
    printf("%u.%u.%u\r\n", CV_MAJOR_VERSION, CV_MINOR_VERSION, CV_SUBMINOR_VERSION);
} 
```

# php - 数组中的 PHP 值，其中键在另一个数组中

> ID：13904118
> 
> 赞同：0
> 
> 时间：2012-12-16T18:13:05.547
> 
> 标签：php, arrays

出于某种原因，我正在为此苦苦挣扎。

我有 2 个数组。第一个是一个名为 colsArray 的标准数组，如下所示：

```
Array
(
    [0] => fName
    [1] => lName
    [2] => city
) 
```

第二个是一个名为 query_data 的多维数组，如下所示：

```
Array
(
    [0] => Array
    (
        [recordID] => xxx
        [fName] => xxx
        [lName] => xxx
        [address1] => xxx
        [city] => xx
        [zip] => xxx
        [vin] => xxx
    )

[1] => Array
    (
        [recordID] => xxx
        [fName] => xxx
        [lName] => xxx
        [address1] => xxx
        [city] => xxx
        [zip] => xxx
        [vin] => xxx
    )

[2] => Array
    (
        [recordID] => xxx
        [fName] => xxx
        [lName] => xxx
        [address1] => xxx
        [city] => xxx
        [zip] => xxx
        [vin] => xxx
    )

[3] => Array
    (
        [recordID] => xxx
        [fName] => xxx
        [lName] => xxx
        [address1] => xxx
        [city] => xxx
        [zip] => xxx
        [vin] => xxx
    ) 
```

)

我只需要使用这两个数组来创建一个新数组，其中包含来自 query_data 数组的所有数据，其中键位于第一个数组 colsArray 中。新数组如下所示：

```
Array
(
    [0] => Array
    (

        [fName] => xxx
        [lName] => xxx
        [city] => xx

    )

[1] => Array
    (
        [fName] => xxx
        [lName] => xxx
        [city] => xx
    )

[2] => Array
    (
        [fName] => xxx
        [lName] => xxx
        [city] => xx
    )

[3] => Array
    (
        [fName] => xxx
        [lName] => xxx
        [city] => xx
    )
) 
```

对此的任何帮助都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T18:17:11.043

PHP 提供了[多种数组函数](http://php.net/manual/en/ref.array.php)，您通常只需将其中的一些组合起来即可：

```
$keys = array_flip($colsArray);
$new_data = array();

foreach($query_data as $key => $data) {
    $new_data[$key] = array_intersect_key($data, $keys);
} 
```

或者，更实用的风格，但更多的内存密集型：

```
$new_data = array_map(
    'array_intersect_key', // or just array_intersect_key in newer PHP versions 
    $query_data, 
    array_pad(array(), count($query_data), array_flip($colsArray))
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:17:30.857

```
$finalarr = [];
foreach ($query_data as $data) {
    $arr = [];
    foreach ($colsArray as $key){
       $arr[$key] = $data[$key];
    }
    $finalarr[] = $arr;
} 
```

创建数组的`[]`符号是新的，因此您可能不得不使用它`array()`。

# iphone - 自定义导航控制器 iOS 6 的问题

> ID：13904123
> 
> 赞同：0
> 
> 时间：2012-12-16T18:13:19.353
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我在 appDelegate 创建了一个自定义导航控制器：

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

poemsView  = [[[PoemsViewController alloc]initWithNibName:@"PoemsViewController" bundle:nil] autorelease];
self.navigationController = [[[UINavigationController alloc] initWithRootViewController:poemsView] autorelease];
self.navigationController.navigationBarHidden = YES;

self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
self.window.rootViewController = self.navigationController;

[self.window makeKeyAndVisible]; 
```

所以问题是我需要来自 viewController 的应用程序午餐，但是如果我将 viewController 设置为 rootviewController，我的导航控制器不会推送导航，反之亦然，如果将我的导航控制器设置为根，则应用程序不会从菜单或主视图加载控制器 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:19:09.827

为什么要将 Poemsview 创建为 Navigation Controller 的 rootviewcontroller？

如果您想先加载 ViewController 然后使用以下代码。

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];

self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];

poemsView  = [[[PoemsViewController alloc]initWithNibName:@"PoemsViewController" bundle:nil] autorelease];

self.navigationController = [[[UINavigationController alloc] initWithRootViewController:self.viewController] autorelease];

self.navigationController.navigationBarHidden = YES;

self.window.rootViewController = self.navigationController;

[self.window makeKeyAndVisible]; 
```

您可以创建另一个导航控制器作为`Sub-class of Viewcontroller.`

在您的诗歌按钮操作中添加以下内容：

```
// Create a regular view controller.
PoemViewController *modalViewController = [[[PoemViewController alloc] initWithNibName:@"PoemViewController" bundle:nil] autorelease];

// Create a navigation controller containing the view controller.
UINavigationController *secondNavigationController = [[UINavigationController alloc] initWithRootViewController:modalViewController];

// Present the navigation controller as a modal view controller on top of an existing navigation controller
[self presentModalViewController:secondNavigationController animated:YES]; 
```

现在您可以从您的`tableview DidselectRowAtindexpath`.

# mysql - mysql查询，计算三个等级的百分比

> ID：13904127
> 
> 赞同：0
> 
> 时间：2012-12-16T18:13:28.830
> 
> 标签：mysql, sql

我想计算三个不同等级 A、B、C 的百分比

```
1 product have  A grade 
5 products have B grade 
3 products gave C grade 
```

SQL - 此查询返回 3 行

```
SELECT count(*) FROM table1 WHERE pid = '480' AND grade IN 
  ( SELECT DISTINCT grade FROM table1 ) 
  GROUP BY grade

  ------------------------
   CCA_ST2      count(*)
  ------------------------
     A            1 
     B            5
     C            3
 ------------------------ 
```

我如何计算百分比？

```
 (  SELECT count(*) FROM table1 WHERE pid = '480' AND grade IN 
      ( SELECT DISTINCT grade FROM table1 ) 
      GROUP BY grade
   ) 
   DIVIDE BY 
   ( SELECT COUNT(*) FROM table1 WHERE pid = '480' ) * 100 
```

我试过这个查询

```
SELECT grade,
( SELECT count(*) FROM table1 WHERE pid = '480' AND grade IN 
  ( SELECT DISTINCT grade FROM table1 ) 
  GROUP BY grade
) 
/ 
( SELECT count(*) FROM table1 WHERE pid = '480' ) 
* 100 
AS score 
FROM table1 GROUP BY grade 
```

我得到了这个错误。我该如何解决这个问题

```
subquery returns more than one row 
```

我真的不想为此创建程序，我知道这可以通过查询来完成。但是我今天感觉很懒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T18:26:28.990

您不能从所有组中获取计数并将它们除以总计数，您必须将每个计数除以总计数：

```
SELECT
  grade,
  100 * count(*) / (SELECT count(*) FROM table1 WHERE pid = '480') AS score 
FROM table1
WHERE pid = '480'
GROUP BY grade
ORDER BY grade 
```

# asp.net-mvc - 多租户应用程序示例（MVC + Ninject）

> ID：13904128
> 
> 赞同：4
> 
> 时间：2012-12-16T18:13:29.547
> 
> 标签：asp.net-mvc, ninject, multi-tenant

我正在按照这个示例开发一个多租户应用程序：[ASP.NET MVC 第 2 部分中多租户的简单方法](http://blogs.planetcloud.co.uk/mygreatdiscovery/post/Simple-approach-to-multi-tenancy-in-ASPNET-MVC-Part-2.aspx)

我使用的是 Ninject，而不是使用 StructureMap。在示例中使用了此接口：

**IContainerResolver** – 获取已解析租户的 IoC 容器

但我不明白如何将它与 Ninject 一起使用。是某种 NinjectModule，所以每个租户都有适当的绑定吗？

你能向我解释**为什么使用它以及我必须如何将它与 Ninject 一起使用**吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:31:21.300

首先，在给定的场景中我不会做这样的事情，因为你可以把它留给 IIS。只需为您的租户部署您的应用程序，使用不同的 App.config 即可实现真正可靠的内存分离。

但是如果你真的想这样做，有一个非常简单的解决方案，将租户模块加载到一个共享内核中：

```
public class TenantSpecificBindingsModule 
{
    TenantSpecificBindingsModule(string tenantUrl)
    {
    }

    public void Load()
    {
        this.Bind<ISomeTenantSpecifiComponent>.To<Impl>().When(GetCurrentUrl().StartsWith(tenantUrl));
    }
}

foreach tenant { kernel.Load(new TenantSpecificBindingsModule(tenant.Url)); 
```

# string - 将包含字符串的行复制到 shell 脚本中的另一个文件

> ID：13904130
> 
> 赞同：3
> 
> 时间：2012-12-16T18:13:42.700
> 
> 标签：string, file, shell, copy

我是 shell 脚本的新手，我正在尝试找出以下内容。

如何在文件中搜索包含特定字符串的行并将该行复制到新文件（如果该行存在）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T18:27:16.673

```
grep "string" file >copyFile 
```

这将创建一个新文件或清空现有文件。

```
grep "string" file >>copyFile 
```

这将创建一个新文件或将找到的字符串附加到现有文件。

注意：`"string"`是一个*正则表达式*。看一下`man grep`语法。

# c# - 用于 access_token 的 Dwolla 交换代码给出（500）内部服务器错误

> ID：13904132
> 
> 赞同：0
> 
> 时间：2012-12-16T18:13:46.383
> 
> 标签：c#, dwolla

我正在为 Dwolla 进行最后的 OAuth 步骤，交换 access_token 的代码，但是它给了我一个（500）内部服务器错误并且没有错误消息，所以我没有什么可做的。

我的网址如下所示：

[https://www.dwolla.com/oauth/v2/token?client_id=mykey&client_secret=mysecret&grant_type=authorization_code&code=6HjhJyVAa+iRdjahIWdbu8FOl30=](https://www.dwolla.com/oauth/v2/token?client_id=mykey&client_secret=mysecret&grant_type=authorization_code&code=6HjhJyVAa+iRdjahIWdbu8FOl30=)

为了做 GET，我所做的就是：

```
public static string Get(string url) {
            using (WebClient client = new WebClient()) {
                //client.Headers.Add("Content-Type", "application/json");
                return client.DownloadString(url);
            }
        } 
```

我尝试过使用和不使用 Content-Type 标头，但无论哪种方式都会出错。

我确信代码是正确的，因为如果我更改值，那么它会返回代码无效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:46:45.077

我没有传入重定向 url，他们声称这是可选的，但实际上不是，如果不传入，它会给出这个无用的错误。

# inheritance - 聚与继承

> ID：13904140
> 
> 赞同：0
> 
> 时间：2012-12-16T18:14:48.150
> 
> 标签：inheritance, polymorphism

什么时候使用多态而不是继承是明智的？

所以，假设我们有

```
public class Lion extends Animals {} ; 
```

或者

```
Animals ani = new Lion(); 
```

我更喜欢继承，因为我们有可靠的类可以使用。

是否归结为哪个跑得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:12:08.427

没有或。

```
public class Lion extends Animals {} ; 
```

定义了一个类 Lion，它是类动物的后裔

```
Animals ani = new Lion(); 
```

定义了一个 Animals 类型的变量 ani 并为其分配了一个新的 Lion 实例。

如果 Lion 不是来自 Animals，那么你会得到一个错误，这就是我们所能说的。

# svn - cvs2svn：将存储库转换并放置到现有 SVN Rrepository 的子目录中

> ID：13904141
> 
> 赞同：0
> 
> 时间：2012-12-16T18:14:51.813
> 
> 标签：svn, cvs, cvs2svn

我在 Linux 机器上有一个现有的 SVN 存储库，`/conf /db /hooks /locks format readme.txt`签出后如下所示。

```
MainRepo
 -trunk
 -branches
 -tags 
```

我想使用 cvs2svn 进行一些 CVS 到 SVN 的转换，并保留历史并将新的存储库（ProjectA、ProjectB 等）放在`MainRepo`...

```
| MainRepo
     -trunk
     -branches
     -tags
   | SubRepo
      | ProjectA
         -trunk
         -branches
         -tags
      | ProjectB 
```

我怎样才能做到这一点 ？我已经使用`svn mkdir`.

如何将转换后的回购放在它们下面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:20:09.990

您是否尝试在配置文件中设置“trunk_path”（在“run_options.add_project”下）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:36:24.427

使用trunk_path 对ProjectB（即，`trunk_path=SubRepo/ProjectB/trunk`）不起作用的原因是它导致cvs2svn 尝试创建`SubRepo`和`SubRepo/ProjectA`路径。但是`SubRepo`从您导入 ProjectA 开始，路径已经存在，这会导致`svnadmin load`失败。

导入其余项目的最简单方法是[将每个项目](http://cvs2svn.tigris.org/faq.html#partialconversion)都转换为顶级项目（带有顶级`/trunk`、、`/branches`和`/tags`目录），但将输出写入转储文件（使用 cvs2svn 的`--dumpfile`选项）。然后使用类似的命令将转储文件加载到现有存储库中

```
svnadmin load --parent-dir SubRepo/ProjectB <DUMPFILE 
```

# python - Python 的 print 语句中的 % 运算符叫什么？

> ID：13904143
> 
> 赞同：3
> 
> 时间：2012-12-16T18:14:52.277
> 
> 标签：python

考虑：

```
print "%s is %d years old." % ('Meirav', 5) 
```

`%`字符串文字和调用的元组之间的运算符是什么？除了在 print 语句中，它在 Python 中还能在哪里看到？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T18:16:38.530

[它被称为“字符串格式化”或“插值”运算符](http://docs.python.org/2/library/stdtypes.html#string-formatting-operations)，它可用于您可能希望将格式化数据插入字符串的任何地方。

# java - Junit 测试有效注解休眠

> ID：13904145
> 
> 赞同：0
> 
> 时间：2012-12-16T18:14:57.050
> 
> 标签：java, spring-mvc, junit, hibernate-annotations

当我尝试在我的控制器上进行 junit 测试时，我遇到了一些问题。我已经为我的网络应用程序编写了这个控制器

```
@RequestMapping(value={"/pubblicheaffissioniit/{var0}/{var1}/{var2}"}, method = RequestMethod.POST)
    public ModelAndView grazieParameters(@Valid @ModelAttribute("richiestaPreventivoModel") RichiestaPreventivoModel richiestaPreventivoModel, BindingResult result) throws Exception {
        logger.info("nome salvato: " + richiestaPreventivoModel.getNome());
........ 
```

我可以使用此代码启动 junit 测试

```
BindingResult result = mock(BindingResult.class);
when(result.hasErrors()).thenReturn(false);//or TRUE 
```

但是我需要测试一个完整的intraction，所以我想用一个void模型调用上面的方法来测试控制器的行为。有什么建议么？

# c - 为什么我们需要在 C 中的字符数组末尾添加一个'\0'（null）？

> ID：13904149
> 
> 赞同：12
> 
> 时间：2012-12-16T18:15:08.040
> 
> 标签：c, arrays, string, algorithm, char

为什么我们需要在 C 中的字符数组末尾添加一个'\0'（null）？我在 K&R 2 (1.9 Character Array) 中读过它。书中查找最长字符串的代码如下：

```
#include <stdio.h>
#define MAXLINE 1000
int readline(char line[], int maxline);
void copy(char to[], char from[]);

main() {
    int len;
    int max;
    char line[MAXLINE];
    char longest[MAXLINE];
    max = 0;
    while ((len = readline(line, MAXLINE)) > 0)
        if (len > max) {
            max = len;
            copy(longest, line);
        }
    if (max > 0)
        printf("%s", longest);
    return 0;
}

int readline(char s[],int lim) {
    int c, i;
    for (i=0; i < lim-1 && (c=getchar())!=EOF && c!='\n'; ++i)
        s[i] = c;
    if (c == '\n') {
        s[i] = c;
        ++i;
    }
    s[i] = '\0'; //WHY DO WE DO THIS???
    return i;
}

void copy(char to[], char from[]) {
    int i;
    i = 0;
    while ((to[i] = from[i]) != '\0')
        ++i;
} 
```

我的问题是为什么我们将字符数组的最后一个元素设置为'\0'？没有它，该程序可以正常工作...请帮助我...

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T18:17:04.547

您需要以 C 字符串结尾，`'\0'`因为这是库知道字符串在哪里结束的方式（在您的情况下，这是`copy()`函数所期望的）。

> 没有它，该程序可以正常工作...

没有它，您的程序将具有[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。如果程序碰巧做了你期望它做的事情，你只是幸运（或者，更确切地说，不幸，因为在现实世界中，未定义的行为会选择在最不方便的情况下表现出来）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:20:36.553

特别是指向不知道长度的字符数组的字符串指针是`NULL`终止符确定字符串长度的唯一方法。

[链接](https://stackoverflow.com/questions/4418708/whats-the-rationale-for-null-terminated-strings)上关于 NULL 终止的精彩讨论

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T18:24:46.360

在 c 中，“字符串”表示以空字符结尾的字符数组。将此与帕斯卡字符串进行比较，这意味着最多有 255 个字符，前面有一个指示字符串长度的字节（但不需要终止）。

每种方法都有其优点和缺点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T18:34:23.917

因为 C 将字符串定义*为由第一个空字符终止并包括在内的连续字符序列*。

基本上，C 的作者可以选择将字符串定义为字符序列 + 字符串的长度，或者使用魔术标记来分隔字符串的结尾。

有关该主题的更多信息，我建议阅读这篇文章：

Poul-Henning Kamp 的“最昂贵的单字节错误” [http://queue.acm.org/detail.cfm?id=2010365](http://queue.acm.org/detail.cfm?id=2010365)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T18:50:36.200

您实际上已经在这里自己写了答案：

```
void copy(char to[], char from[]) {
    int i;
    i = 0;
    while ((to[i] = from[i]) != '\0')
        ++i;
} 
```

此函数中的循环将继续，直到它在数组中遇到 '\0' *from*。如果没有终止零，循环将继续执行未知数量的步骤，直到遇到零或无效的内存区域。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T11:26:43.050

实际上，您**不需要**以 \0 结束字符数组。它是 char* 或需要由它结束的字符串的 C 表示形式。

至于数组，如果要将其传输到字符串（由char *表示），则必须**在其末尾添加一个\ 0。**

另一方面，如果要将其寻址为 char* 并计划在其上使用 char* 函数，则需要在数组的末尾有 \0。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-12T07:28:40.767

`'\0'`在数组中表示字符串的结尾，这意味着该字符之后的任何字符都不被视为字符串的一部分。这并不意味着它们不是字符数组的一部分。即，我们仍然可以通过索引来访问这些字符，但是当我们向这个字符数组调用与字符串相关的东西时，它们不是一部分。

为了使字符串具有正确的格式并能够与字符串函数一起正常工作，它必须是一个以空字符结尾的字符数组。如果没有 NULL，当我们在字符数组上调用字符串函数时，程序会显示未定义的行为。尽管大多数时候我们可能会对结果感到幸运，但这仍然是一种未定义的行为。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-12-16T20:07:47.833

它是字符串终止符号，遇到这种情况时，编译器会知道您的字符串已结束。

# vb.net-2010 - 如何在 vb.net 中对字符串进行多种变体？

> ID：13904151
> 
> 赞同：0
> 
> 时间：2012-12-16T18:15:08.830
> 
> 标签：vb.net-2010

我做了这个代码，我想知道如何通过很少的工作让它更有效。这是我输入的 if then else 语句之一的示例：

```
 If lblQuestion.Text = "anti-" Then
        lblCorrectAnswer.Text = "against, opposed to, preventive; used as a prefix"
        If txtPlayersAnswer.Text = "against, opposed to, preventive" Then
            lblRight.Text = "Correct"
        Else
            lblRight.Text = "Wrong!"
        End If
    End If 
```

我想知道是否可以对语句进行多种变体

```
 If txtPlayersAnswer.Text = "against, opposed to, preventive" Then 
```

例如：不必为该行代码编写每个可能的变体，有一种方法可以使该行代码具有所有可能的变体，如果是这样，如何？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:29:12.090

对我来说用户输入的假设太多，但是

伪代码

给定的答案是 ["against"],["opposed to"],["preventative"] 的数组

那么你可以做类似的事情

```
count = 0;
foreach(answer in answers)
  if txtPlayersAnswer.Contains(answer) count++ 
```

区分大小写将是一个问题，就像“不反对”之类的答案一样

我会让用户分别输入每个潜在的答案，而不必依赖他们以您知道如何拆分的格式输入它们。

# dart - 将 Javascript 对象重写为 Dart 映射/列表

> ID：13904170
> 
> 赞同：1
> 
> 时间：2012-12-16T18:17:29.047
> 
> 标签：dart

我正在尝试将以下 javascript 对象转换为 Dart 映射：

```
var users = { 
    1 : {
      first_name: 'James',
      last_name: 'Smith',
      email: 'jsmith@example.com',
    },
    2 : {
      first_name: 'Robin',
      last_name: 'Doe',
      email: 'rdoe@example.com',
    } 
```

我试过了：

```
var users = { 
    "1" : {
      first_name: 'James',
      last_name: 'Smith',
      email: 'jsmith@example.com',
    },
    "2" : {
      first_name: 'Robin',
      last_name: 'Doe',
      email: 'rdoe@example.com',
    } 
```

但我无法将其用作带有引号或不带引号的数字的地图（引发错误）。

```
var keys = users.getKeys(); //NoSuchMethodError : method not found: 'getKeys'
assert(keys.length == 2);
assert(new Set.from(keys).contains('2')); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:46:06.357

对属性名称使用（单引号或双引号）：

```
var users = {
   "1" : {
     "first_name": "James",
     "last_name": "Smith",
     "email": "jsmith@example.com",
   },
   "2" : {
     "first_name": "Robin",
     "last_name": "Doe",
     "email": "rdoe@example.com"
   }
 }; 
```

此外，`getKeys`方法不存在，请`keys`改用：

```
 var keys = users.keys;
 assert(keys.length == 2);
 assert(keys.contains("2"));
 assert(users["1"]["first_name"] == "James"); 
```

# java - Java中的双表

> ID：13904173
> 
> 赞同：0
> 
> 时间：2012-12-16T18:17:39.607
> 
> 标签：java, hashmap

我需要一个双表，从中我可以从键或索引中获取两个值。我已经看到[了这个](https://stackoverflow.com/questions/3019177/java-double-entry-table "这")问题，我想知道考虑到性能，什么是更好的方法。

1）以这种方式创建一个HashMap：

```
HashMap<Integer, HashMap<String, String>> = ...; 
```

我不知道如何将值放在这个 put 方法中，我有这个，Eclipse 给了我一个错误`prueba.put(0, new Hashtable<"Hi", "Bye">);`正如你所见，在我确定这是一个简单的问题之前，我从未使用过这样的东西。

2）以这种方式创建一个HashMap：

```
HashMap<Integer, YourFancyDatatype> 
```

因此，我创建了一个类，该类将我希望在一个对象中包含的两个或多个值包含在单个键或索引中。

哪个会表现更好？另外，如果您可以帮助我了解如何使用数字 1) 方法。HashMap 将有大约 20000 个条目。

非常感谢您的时间和帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:26:09.960

你会想要一个只有一个键和一组值的东西。我建议使用[Apache 的 MultiMap](http://commons.apache.org/collections/api-3.1/org/apache/commons/collections/MultiMap.html)，因为他们已经为你实现了这个功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:38:23.230

您的第一种方法使用与 Guava 的[HashBasedTable](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/HashBasedTable.html)提供的相同数据结构，因此您可以使用它。

但是如果你想要最好的性能，你可以尝试使用基于数组的东西（例如 Guava 的[ArrayTable](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ArrayTable.html)）

无论如何，我建议进行一些简单的性能测试，以检查哪种解决方案性能更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T18:24:00.193

如果你想做一个“在线”放置，你可以这样做：

```
prueba.put(0, new HashMap<String, String>() {{put("Hi", "Bye");}}); 
```

这使用了 HashMap 的匿名子类，该子类具有加载值的实例块。

请注意，这将为 JVM 创建一个额外的类（称为 MyClass$1 或类似名称）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T18:25:34.050

> 我不知道如何在 put 方法中放入值，我有这个，Eclipse 给了我一个错误 prueba.put(0, new Hashtable<"Hi", "Bye">); 如您所见，在我确定这是一个简单的问题之前，我从未使用过这样的东西。

首先，`Hashtable<String, String>`不是 的子类型`HashMap<String,String>`。您的 HashMap 需要 a`HashMap<String, String>`作为值。将 hashmap 插入值或将 hashmap 声明更改为：

```
HashMap<Integer, ? extends Map<String, String>> = ...; 
```

但是您的第二种方法更加面向对象。所以我建议使用第二种方法

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T18:25:44.990

在这种情况下，第二个可能会更容易

```
HashMap<Integer, HashMap<String, FancyDataType>> h= ...; 
```

这就是您必须插入数据的方式

```
 h=HashMap<Integer, FancyDataType>     new Hashtable<Integer,FancyDataType>();
numbers.put(0, new FancyDataType("o","x"));
numbers.put(1, new FancyDataType("t","y"));
numbers.put(1, new FancyDataType("q","z"));
/// ...so one for all 20000 
```

假设 FancyDataType 类似于

```
class FancyDataType{
  String k,v;
  FancyDataType(String k,String v){
      this.k=k;this.v=v;

   }

} 
```

# javascript - 如何提高 jQuery 动画性能？

> ID：13904174
> 
> 赞同：3
> 
> 时间：2012-12-16T18:17:43.157
> 
> 标签：javascript, jquery, performance, jquery-animate, rendering

我的网站现在几乎都是 AJAX，我正在将 jQuery 动画推向极限。

使用动态分页和 jQuery`animate`在除 Chrome 和 IE9+ 之外的所有浏览器上看起来都很糟糕。

我的猜测是，这是因为 Chrome（IE9+？）是唯一默认启用 JS 多线程或多线程的浏览器。

甚至可以在 JS/HTML/etc 中的其他浏览器上打开它吗？

提前谢谢了！

**剖析**

众所周知，我的词汇量很差，所以一开始我不明白这个词。

是的，我一直在寻找更好的方法来改进我的代码。为了速度，例如克隆而不是附加字符串 html、一次选择多个元素等。

它在 Chrome 和 IE9+ 中运行顺畅，在其他所有方面都很差（在默认的 Android 2.2 和 iPhone 移动浏览器中最差）。

**多线程**

我从[这里](http://www.sitepoint.com/multi-threading-javascript/)得到它并接受它，因为它是有道理的。如果有错误，请告诉我，我将编辑问题以确保适当性。

**我的动态分页**

基本上，我通过一个循环`append` `cloned` `opacity:0` `absolute` `divs`到一个`relative`容器。`for`克隆的 div 中的一些细分也可能被克隆，因为我也通过`for`循环有更多的子行。我`top`把它增加到一个累积的高度，给每个附加的 div 添加 10px。一旦准备好，我`animate`就`opacity:1`. 如果一个`absolute`需要留在那里，它的'`top`只是动画，没有其他变化。

所有动画 500 毫秒。所有用 CSS 预格式​​化的 div。没有图像。它就像我希望的那样简单，并且在 Chrome 和 IE9+ 中运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:40:02.510

Profile your code, maybe use the built in tools that Safari has, to verify animations ( or dynamic pagination) are causing the issue. Consider writing some of your jQuery animations in pure JavaScript. I re-wrote the fade function using about 10% of the code that jQuery uses, but with the trade-off that it is targeted for modern browsers only.

Performance Boosts per Joe:

[http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/](http://net.tutsplus.com/tutorials/javascript-ajax/10-ways-to-instantly-increase-your-jquery-performance/)

# python - 如何将 Django HTTP 对象中的 pdf 上传到谷歌驱动器

> ID：13904180
> 
> 赞同：1
> 
> 时间：2012-12-16T18:18:22.683
> 
> 标签：python, django, google-drive-api, pisa

我使用 pisa 创建 pdf 文档以呈现给用户：

```
response = HttpResponse()
pisa.CreatePDF(src=html, dest=response, show_error_as_pdf=True)
return response 
```

response.content 包含pdf。我使用了 dropbox-python sdk 来做到这一点：

```
dropbox_client.put_file(folder_path, response.content) 
```

似乎将 response.content 理解为 pdf 并正确上传文件

我需要对 google-drive-python-api 做同样的事情。这个参考（https://developers.google.com/drive/v2/reference/files/insert）显示了一个基本的方法，但 MediaFileUpload 似乎在寻找一个物理文件。还有 MediaIoBaseUpload，但它似乎不接受 response.content。我对文件/i/o 的东西不是很熟悉，所以我在这里列出了从 django 到 dropbox 再到 G-Drive 的所有内容，希望它能澄清我的使用；希望我没有混淆问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:33:08.950

python Google API 工具包中的`apiclient.http`文件包含`MediaIoBaseUpload`完全符合您需要的对象。

只是它需要一个文件句柄或行为类似于文件句柄（`fh`参数）的东西。你很幸运：这正是[`StringIO`](http://docs.python.org/2/library/stringio.html)模块的用途：

```
import StringIO # You could try importing cStringIO which gives better performance
fh = StringIO.StringIO(response.content)
media = MediaIoBaseUpload(fh, mimetype='some/mimetype')
# See https://developers.google.com/drive/v2/reference/files/insert for the rest 
```

* * *

`MediaInMemoryUpload`也可以解决问题，但现在已弃用。

# android - 无法使用谷歌地图获取位置

> ID：13904184
> 
> 赞同：0
> 
> 时间：2012-12-16T18:18:59.793
> 
> 标签：android, google-maps, geolocation, emulation

我正在尝试为一个 android 项目找到我当前的位置。加载应用程序时，我的当前位置始终为空。我已经在清单等中设置了权限。当我找到当前位置时，我打算使用坐标来查找到地图上其他位置的距离。我的代码片段如下。为什么我总是得到一个空值？这是我的代码：-

```
 package com.example.location;
    import android.content.Context;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.location.Location;
    import com.google.android.maps.MapActivity;
    import com.google.android.maps.MapView;
    import android.location.LocationListener;
    import com.google.android.maps.MapController;
    import android.widget.Toast;
    import com.google.android.maps.GeoPoint;

    public class MainActivity extends MapActivity implements LocationListener {

        private MapView mapView;
        private LocationManager locManager;

        @Override
        public void onCreate(Bundle savedInstanceState) {

            super.onCreate(savedInstanceState); 
            setContentView(R.layout.activity_main);

            //fetch the map view from the layout
            MapView mapView = (MapView) findViewById(R.id.mapview);

            //make available zoom controls 
            mapView.setBuiltInZoomControls(true);
            //latitude and longitude of Rome
            double lat = 33.6667;
            double lon = 73.1667;

            //create geo point
            GeoPoint point = new GeoPoint((int)(lat * 1E6), (int)(lon *1E6));

            //get the MapController object
            MapController controller = mapView.getController();

            //animate to the desired point
            controller.animateTo(point); 

            //set the map zoom to 13
            // zoom 1 is top world view
            controller.setZoom(13);

            // invalidate the map in order to show changes
            **mapView.invalidate();
            // Use the location manager through GPS
            locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            locManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0,
                    0, this);
            //get the current location (last known location) from the location manager
            Location location = locManager
                    .getLastKnownLocation(LocationManager.NETWORK_PROVIDER); 

            if (location != null) {

                Toast.makeText(
                        this,
                        "Current location:\nLatitude: " + location.getLatitude()
                                + "\n" + "Longitude: " + location.getLongitude(),
                        Toast.LENGTH_LONG).show(); }
                else {

                    Toast.makeText(this, "Cannot fetch current location!",
                            Toast.LENGTH_LONG).show();
                }**
              //when the current location is found – stop listening for updates (preserves battery)
                locManager.removeUpdates(this);
        }

        @Override
        protected boolean isRouteDisplayed() {

            return false;

        }
        @Override
        protected void onPause() {
            super.onPause();
            locManager.removeUpdates(this); //activity pauses => stop listening for updates
        }
            @Override
        public void onLocationChanged(Location location) {

        }

        @Override
        public void onProviderDisabled(String provider) {

        }

        @Override
        public void onProviderEnabled(String provider) {

        }

        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:01:17.410

看看这个例子。做你想做的事情的很好的例子。

[http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-mall-finder-app-points-of-interest/](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-mall-finder-app-points-of-interest/)

# java - 正则表达式不匹配尾随文本

> ID：13904190
> 
> 赞同：1
> 
> 时间：2012-12-16T18:19:51.987
> 
> 标签：java, regex

当我使用：

`(Act\sNo.\s\d+\sof\s\d+,[^\Q</ref>\E])`

然后这匹配：

`Act No. 5 of 20,`

但这不会：

`<ref id="" status="" href="412">Act No. 5 of 20,</ref>`

**哪个是对的。**

现在我想做类似的事情。当我使用：

`(Cap.\s\d+[^\Q</ref>\E])`

然后这匹配：

`Cap. 412`

这也是如此（**即使它不应该**）：

`<ref id="" status="" href="412">Cap. 412</ref>`

但是，我注意到，如果我在正则表达式和文本中都有一个逗号`,`，`412`那么它就像上面的例子一样工作。总而言之，它应该不包括`</ref>`最后的那些。我一直在这里测试：[RegExr](http://gskinner.com/RegExr/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:23:03.317

永远不要在 HTML 上尝试正则表达式。首先，通过 DOM 函数解析 HTML，然后对值使用 RegEx。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:25:00.507

`[^\Q</ref>\E]`应该`(?!\Q</ref>\E)`

其中的字符`[^\Q</ref>\E]`被单独处理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T11:55:01.463

我想到了。我只需将其更改如下：`(Cap.\s\d+(?!.*</ref>))`

# css - CSS对齐浮动导航栏

> ID：13904193
> 
> 赞同：0
> 
> 时间：2012-12-16T18:20:10.870
> 
> 标签：css, tumblr

所以我有一个[例子，说明我的 Tumblr Page 上的标题是什么](http://jsfiddle.net/qTPec/)。我不知道为什么我在这样做时遇到了这么多麻烦，但我无法弄清楚。

我有一个`<ul>`左浮动导航栏，其父容器的宽度为 50%。我需要将这些项目置于正文下方的中心，但由于它们向左浮动，这很难实现。

```
<nav id="mainNav">  
    <ul>            
        <li><a href="/ask">Ask</a></li>                  
        <li><a href="/archive">Archive</a></li>
        <li><a href="/random">Random</a></li>
        <li><a href="http://skwh.tumblr.com/rss">RSS</a></li>
        <li><a href="javascript:;" id="btnSearch">Search</a></li> 
        <li><a href="http://twitter.com/SomekidwithHTML">Twitter</a></li> 
    </ul>
</nav> 
```

CSS：

```
header #mainNav {
    width:auto;
    margin:auto;
}
header #mainNav ul {
    height:30px;
    width:auto;
}
header #mainNav ul li {
    list-style-type:none;
    float:left;
    margin:2;
    background-color:#1BA300;
    border:2px solid black;
}
header #mainNav ul li:hover {
    background-color:black;   
} 
header #mainNav ul li a {
    color:#00FF00;
    display:block;
    padding:5px;
} 
```

我需要这些项目在正文下居中，但我尝试过的没有任何工作。我究竟做错了什么？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:25:56.153

`block`要使您需要的元素居中，`margin:0 auto`但要实现这一点，您需要为`block`元素设置一个固定的 with 。因此，对于您的`header #mainNav`添加 {width:372px}` ，就可以了。

**演示：http:** [//jsfiddle.net/qTPec/2/](http://jsfiddle.net/qTPec/2/)

`display:inline-block`另一种解决方案是添加`header #mainNav`

**演示：http:** [//jsfiddle.net/qTPec/3/](http://jsfiddle.net/qTPec/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:23:13.800

尝试`display: inline-block`而不是`float`. 这样你就可以居中。

[http://jsfiddle.net/qTPec/1/](http://jsfiddle.net/qTPec/1/)

# c# - 如何在运行时更改列表框的 DataTemplate 方向？

> ID：13904194
> 
> 赞同：3
> 
> 时间：2012-12-16T18:20:19.997
> 
> 标签：c#, winrt-xaml

我最近正在尝试学习 WinRT 和 Xaml，我偶然发现了这个问题：

我有这段代码：

```
<ListBox Grid.Row="1" x:Name="imageListBox" Height="721">
        <ListBox.ItemTemplate>
            <DataTemplate>
                <StackPanel x:Name="imageListBoxStackPanelTemplate" HorizontalAlignment="Center">
                    <Image Source="{Binding url}"/>
                </StackPanel>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox> 
```

它绑定到 ObservableCollection，并垂直显示图像。我希望能够在运行时按下按钮将图像的方向（流向）从垂直更改为水平。

我已经尝试了几种解决方案，但没有任何运气，所以我希望你们中的某个人能帮帮我。谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T21:48:03.767

您可以使用两个具有不同方向的列表框。一个是可见的另一个倒塌。单击按钮交换可见性。

# zend-framework2 - 存储对象以供进一步使用

> ID：13904197
> 
> 赞同：0
> 
> 时间：2012-12-16T18:20:37.350
> 
> 标签：zend-framework2

我有一些不好的问题。我会直截了当地讲细节

我使用映射器使用数据库中的数据来水合对象。当我需要数据时，将创建 object1。object1 包含来自 db 的一些数据，它还包含一个 object2，它由触发事件填充，然后由事件管理器管理。object2 在数据库中也有一些数据，所以我也在那里使用 hydrator。此外，object2 包含 object1，它的填充方式与 object1 的 object2 参数相同。

SO object1 包含 object2，而 object2 包含 object1。

当涉及到创建其中一个时，它将开始无限循环，因为当我创建 object1 并且它包含 object2 时，正在创建 object2 包含 object1 所以正在创建 object1 等等......

我的问题是：如何存储对象，这样我就不会第二次创建同一个对象？所以我可以停止那个循环并一遍又一遍地创建相同的对象

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T09:48:15.540

您不应该为此使用事件。我会重构一些更明智的东西，例如：

1）您的 Mapper 仅水合它正在映射的对象，它不添加任何关系/子对象。

2）创建一个服务层，你的服务将使用映射器来生成你需要的对象，并根据需要构建你的对象图。

例子：

学校服务.php

```
public function getSchool($id)
{
     $school = $schoolMapper->fetchSchool($id);
     $students = $studentMapper->fetchStudentsFromSchool($school);
     $school->addStudents($students);

     return $school;
} 
```

不再有循环问题。

只让您的数据映射器处理单个对象以保持简单。有时您可能只想要基本对象而不加载它的关系，因为您可能不需要它们，并且每次加载它们都会产生额外的成本。只需根据需要加载它们。

您还可以考虑通过虚拟代理实现 LazyLoading。这是更有效地加载对象的好方法。

[http://phpmaster.com/intro-to-virtual-proxies-1/](http://phpmaster.com/intro-to-virtual-proxies-1/) [http://phpmaster.com/intro-to-virtual-proxies-2/](http://phpmaster.com/intro-to-virtual-proxies-2/)

# sql - 在 EAV 模型中查找相似实体

> ID：13904198
> 
> 赞同：0
> 
> 时间：2012-12-16T18:20:41.807
> 
> 标签：sql, entity-attribute-value

我需要一个在我的 EAV 表中返回“相似”产品的查询：

1) 共享至少一个相似的属性

2) 没有与产品不同的属性

例如

```
ProductID Attribute Value
1         Prop1      1
1         Prop2      2
2         Prop1      1
3         Prop1      1
3         Prop2      3 
```

假设在此示例中，搜索类似于产品 id 1（Prop1:1 和 Prop2:2）的产品。产品 2 会被退回，因为 Prop1 是 1，但是产品 3 不行，因为 Prop2 不同。等等。

每个产品都有可变数量的属性，因此不能为每个属性加入表格。目前我正在连接道具列表以构建动态 SQL “where”，但我找不到一个好的（快速？）SQL 语句来执行此操作。

也许我花了太多时间专注于这个问题，但我无法摆脱我错过了一个明显的方法来做到这一点的感觉......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T20:47:23.853

遇到此类问题时，我使用 TDQD — 测试驱动的查询设计。

*请注意，如果你给你的桌子起个名字，它会对每个人都有帮助！*

## 通过 1

### 一个或多个属性与产品 1 相同的产品列表

```
SELECT a.ProductID, COUNT(*) AS matches
  FROM EAV_Table AS a
  JOIN EAV_Table AS b
    ON a.Attribute = b.Attribute AND a.value = b.value
 WHERE a.ProductID != 1
   AND b.ProductID  = 1
 GROUP BY a.ProductID 
```

这显然不会列出计数为 0 的任何产品，这很好。

### 一个或多个属性与产品 1 不匹配的产品列表

```
SELECT c.ProductID, COUNT(*) AS matches
  FROM EAV_Table AS c
  JOIN EAV_Table AS d
    ON c.Attribute = d.Attribute AND c.value != d.value
 WHERE c.ProductID != 1
   AND d.ProductID  = 1
 GROUP BY c.ProductID 
```

这也不会列出计数为 0 的产品，这更令人讨厌。

### 结果——通过 1

我们需要第一个查询中未在第二个查询中列出的所有产品。这可以通过 NOT EXISTS 和相关子查询来表示：

```
SELECT a.ProductID, COUNT(*) AS matches
  FROM EAV_Table AS a
  JOIN EAV_Table AS b
    ON a.Attribute = b.Attribute AND a.value = b.value
 WHERE a.ProductID != 1
   AND b.ProductID  = 1
   AND NOT EXISTS
       (SELECT c.ProductID
          FROM EAV_Table AS c
          JOIN EAV_Table AS d
            ON c.Attribute = d.Attribute AND c.value != d.value
         WHERE c.ProductID != 1
           AND d.ProductID  = 1
           AND c.ProductID = a.ProductID
       )
 GROUP BY a.ProductID 
```

那是相当丑陋的。它有效，但它很丑陋。

### 测试数据

```
CREATE TABLE eav_table
(
    productid INTEGER NOT NULL,
    attribute CHAR(5) NOT NULL,
    value INTEGER NOT NULL,
    PRIMARY KEY(productid, attribute, value)
);

INSERT INTO eav_table VALUES(1, "Prop1", 1);
INSERT INTO eav_table VALUES(1, "Prop2", 2);
INSERT INTO eav_table VALUES(2, "Prop1", 1);
INSERT INTO eav_table VALUES(3, "Prop1", 1);
INSERT INTO eav_table VALUES(3, "Prop2", 3);
INSERT INTO eav_table VALUES(4, "Prop1", 1);
INSERT INTO eav_table VALUES(4, "Prop3", 1); 
```

### 第一季度结果

```
2    1
3    1
4    1 
```

### 第二季度结果

```
3    1 
```

### 第三季度结果

```
2    1
4    1 
```

这些是我生成的计数；更优美的演绎将删除它们。

* * *

## 通过 2

如果可以管理，一个更好的最终查询将连接一个表，该表列出了与产品 ID 1 具有至少一个匹配属性/值对的所有产品 ID产品编号 1。

### 一个或多个属性与产品 1 相同的产品列表

第一个查询与 Pass 1 中的第一个查询相同，只是我们将删除结果集中的计数。

```
SELECT a.ProductID
  FROM EAV_Table AS a
  JOIN EAV_Table AS b
    ON a.Attribute = b.Attribute AND a.value = b.value
 WHERE a.ProductID != 1
   AND b.ProductID  = 1
 GROUP BY a.ProductID 
```

通常，选择列表中的 GROUP BY 子句或 DISTINCT 是必需的（尽管示例数据并未正式要求它）。

### 与产品 1 不匹配的零属性产品列表

`COUNT(column)`我们将利用仅计算非空值的事实，并使用 LEFT OUTER JOIN。

```
SELECT c.ProductID
  FROM      EAV_Table AS c
  LEFT JOIN EAV_Table AS d
    ON c.Attribute = d.Attribute
   AND c.Value != d.Value
   AND c.ProductID != 1
   AND d.ProductID  = 1
 GROUP BY c.ProductID
HAVING COUNT(d.Value) == 0; 
```

请注意，WHERE 子句已合并到 ON 子句中；这实际上是相当重要的。

### 结果——通过 2

我们将上面的两个查询构建为连接以生成最终结果的子查询：

```
SELECT f.ProductID
  FROM (SELECT a.ProductID
          FROM EAV_Table AS a
          JOIN EAV_Table AS b
            ON a.Attribute = b.Attribute AND a.value = b.value
         WHERE a.ProductID != 1
           AND b.ProductID  = 1
         GROUP BY a.ProductID
       ) AS e
  JOIN (SELECT c.ProductID
          FROM      EAV_Table AS c
          LEFT JOIN EAV_Table AS d
            ON c.Attribute = d.Attribute
           AND c.Value != d.Value
           AND c.ProductID != 1
           AND d.ProductID  = 1
         GROUP BY c.ProductID
        HAVING COUNT(D.Value) = 0
       ) AS f
    ON e.ProductID = f.ProductID 
```

这会在样本数据上产生答案 2 和 4。

请注意，此练习的一部分是学习不要对您开发的第一个答案感到满意。请注意，最好在完整大小的数据集上对解决方案进行基准测试，而不是在表中只有 7 行的测试数据集上进行基准测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T18:37:45.670

如果我正确理解了您的问题，我认为这应该可以完成工作。[这是小提琴](http://sqlfiddle.com/#!3/e76f5/1)；

```
DECLARE @pId INT = 1

SELECT A.pid
FROM (
        SELECT pid, count(*) total
        FROM t
        WHERE pid <> @pId
        GROUP BY pid 
     ) A JOIN 
     (
        SELECT pid, count(*) matches
        FROM t 
        WHERE pid<>@pId and att + ':' + convert(varchar(12), val) in (
             SELECT att + ':' + convert(varchar(12), val) FROM t
             WHERE pid=@pId)
        GROUP BY pid
     ) B ON A.pid = B.pid

WHERE total = matches 
```

**注意：根据带有附加数据的评论进行编辑**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T21:55:53.083

为了完整起见，使用 CTE。（注意：这将找到所有双胞胎，而不仅仅是 productId = 1 的双胞胎）

```
DROP SCHEMA tmp CASCADE;
CREATE SCHEMA tmp ;
SET search_path=tmp;

CREATE TABLE eav
        ( zentity INTEGER NOT NULL
        , zattribute varchar NOT NULL
        , zvalue INTEGER
        , PRIMARY KEY (zentity,zattribute)
        );
INSERT INTO eav(zentity, zattribute, zvalue) VALUES
 (1, 'Prop1',1) ,(1, 'Prop2',2)
,(2, 'Prop1',1)
,(3, 'Prop1',1) ,(3, 'Prop2',3)
,(4, 'Prop1',1) ,(4, 'Prop3',3) -- added by Jonathan L.
        ;

        -- CTE: pair of entities that have an 
        -- {attribute,value} in common
WITH pair AS (
        SELECT a.zentity AS one
                , b.zentity AS two
                , a. zattribute AS att
        FROM eav a
        JOIN eav b ON a.zentity <> b.zentity  -- tie-breaker
                AND a.zattribute = b.zattribute
                AND a.zvalue = b.zvalue
        )
SELECT pp.one, pp.two, pp.att
FROM pair pp
        -- The Other entity (two) may not have extra attributes
        -- NOTE: this NOT EXISTS could be repeated for pair.one, to also
        -- suppress the one.* products that have an extra attribute
WHERE NOT EXISTS (
        SELECT * FROM eav nx
        WHERE nx.zentity = pp.two
        AND nx.zattribute <> pp.att
        )
ORDER BY pp.one, pp.two, pp.att
        ; 
```

顺便说一句：真正的潜在问题是“关系划分”。也许一个较新的 SQL 标准应该为它引入一个运算符？

# xml - XML 中的 JSON 数据类型

> ID：13904200
> 
> 赞同：0
> 
> 时间：2012-12-16T18:20:58.897
> 
> 标签：xml, json

[JSON 标准](http://www.json.org/)规定了 NULL、FALSE、TRUE的数据类型。是否有这些要在 XML 字符串中使用的标准表示？如果你有一个 RFC 的链接，那将特别有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:26:25.800

有多种将 JSON 映射到 XML 的建议。其中：

*   [JSONiq](http://jsoniq.org/)
*   [MarkLogic 的 MLJSON 库](https://github.com/marklogic/mljson)
*   [Microsoft JSON/XML 映射](http://msdn.microsoft.com/en-us/library/bb924435.aspx)
*   [piriti](https://github.com/hpehl/piriti) GWT 的映射
*   [XForms 2.0 JSON - XML 映射](http://www.w3.org/MarkUp/Forms/wiki/Json)

半个小时的搜索引擎肯定会让你多花几个小时。

该列表本身应该可以回答您的问题：是的，有一些方法可以在 XML 中表示 JSON 的 NULL、FALSE 和 TRUE，不，对于“标准”一词的任何合理含义， 没有*标准方法。*

不同的应用对尴尬有不同的要求和不同的容忍度；一种明显的紧张关系是一方面是往返性，另一方面是口语或自然输出。还没有人以一种在相关各方之间产生共识的方式来解决这个问题。

# colors - 选择性选择颜色

> ID：13904201
> 
> 赞同：0
> 
> 时间：2012-12-16T18:21:19.170
> 
> 标签：colors, selection

我想更多地了解选择性选择图像的一部分，但互联网上只有几篇与此相关的论文。奇怪的是，我在图像的选择性着色方面找不到任何好处。我正在尝试为此开发一些东西，但我被堆叠了，我无法继续。我已经尝试了一些东西，但它没有任何效果。这些天我正在尝试遵循以下步骤： [更改像素颜色](https://stackoverflow.com/questions/13325559/change-pixels-color)

但我不知道如何准确地执行这些步骤

# node.js - 使用重叠列名的连接的选项参数转义查询

> ID：13904204
> 
> 赞同：1
> 
> 时间：2012-12-16T18:21:45.620
> 
> 标签：node.js, node-mysql, mysql-escape-string

npm 上的 node-mysql 文档（https://npmjs.org/package/mysql）有一个选项用于在表连接中重叠列名，如下所示：

```
var options = {sql: '...', nestTables: true};
connection.query(options, function(err, results) {
  /* results will be an array like this now:
  [{
    table1: {
      fieldA: '...',
      fieldB: '...',
    },
    table2: {
      fieldA: '...',
      fieldB: '...',
    },
  }, ...]
  */
}); 
```

**转义查询标识符**格式将第二个参数传递给`connection.query()`清理标识符的参数：

```
connection.query('SELECT * FROM users WHERE id = ?', [userId], function(err, results) {
  // ...
}); 
```

我想知道你如何将这两个一起使用？假设您需要在连接中转义标识符，但想要声明嵌套表的选项：

```
var sqlString: 'SELECT * FROM TableOne INNER JOIN TableTwo ON TableOne.id = TableTwo.tableone_id WHERE TableOne.id = ?';
var options = {sql: sqlString, nestTables: true};
connection.query(options, function(err, results) {
    ...
}); 
```

我试图将转义值作为第二个参数传递，`connection.query()`如下所示：

```
var sqlString: 'SELECT * FROM TableOne INNER JOIN TableTwo ON TableOne.id = TableTwo.tableone_id WHERE TableOne.id = ?';
    var options = {sql: sqlString, nestTables: true};
    connection.query(options, 1, function(err, results) {
        ...
    }); 
```

但无济于事。我想知道是否有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T21:53:40.160

如果您阅读代码，第 66 行有一个 IF 块

```
if (typeof sql === 'object') {
  options = sql;
  cb      = values;
  values  = options.values;
} 
```

意思是你会做

```
var sqlString: 'SELECT * FROM TableOne INNER JOIN TableTwo ON TableOne.id = TableTwo.tableone_id WHERE TableOne.id = ?';
var options = {sql: sqlString, nestTables: true, values: [1]};
connection.query(options, function(err, results) {
  ...
}); 
```

# ios - iOS setContentOffset 在 ipad 上不起作用

> ID：13904205
> 
> 赞同：2
> 
> 时间：2012-12-16T18:21:58.863
> 
> 标签：ios, uiscrollview, scrollview

这真的很奇怪。我有一个包含三个图像的滚动视图，用户滑动查看下一个图像。但是，我希望第一个屏幕从中间图像开始。简单的; 我将使用 setContentOffset ，一切都会好起来的。

该代码适用于 iPhone 模拟器，但不适用于 iPad 模拟器（或设备！）

```
CGRect screen = [[UIScreen mainScreen] bounds];
CGFloat height = CGRectGetHeight(screen);
CGFloat width = CGRectGetWidth(screen);

CGPoint rightOffset = CGPointMake(width, 0);
[scrollView setContentOffset:rightOffset animated:YES]; 
```

所有设置都在添加滚动视图之前设置（实际上我们可以在添加滚动视图之后执行此操作并获得相同的结果）。

宽度在 ipad 上返回 768，在 iphone 上返回 320。

这是一个错误吗？Xcode 4.4.1 和 iOS 6。

编辑：

看起来这与创建顺序有关；移至 viewWillAppear 而不是 viewDidLoad 并且显然在 iphone 和 ipad 上工作。只是不一致的地方非常令人惊讶....

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T19:56:16.097

你不应该在 viewDidLoad 中初始化 UI 几何相关的东西，因为此时你的视图的几何没有设置，结果将是不可预测的。

正如您所发现的，viewWillAppear 是执行这些操作的正确位置，此时几何已设置好，因此获取和设置与几何相关的属性是有意义的。

viewDidAppear。

**更新 (ios6)**

在 ios6 中使用自动布局时，在布局子视图之前不会设置框架。在这些条件下获取帧数据的正确位置是在 viewController 方法 -viewDidLayoutSubviews 中。

这在-viewWillAppear*之后调用。*但请注意 - 他们并不总是被召集在一起。例如，旋转后调用 -viewWDidLayoutSubviews，而不调用 -viewWillAppear。每次视图变为可见视图*时都会调用 -viewWillAppear，-viewDidLayoutSubviews 不一定（仅当我们的视图需要中继时）。

（* 除非应用程序是后台程序并且正在成为前台应用程序，否则 -viewWillAppear 不会被调用）

# ruby-on-rails - Ruby on rails 疯狂贸易

> ID：13904207
> 
> 赞同：0
> 
> 时间：2012-12-16T18:22:11.290
> 
> 标签：ruby-on-rails, ruby, spree

当我在一个新的 Rails 项目中安装 spree 时，出现以下错误：

```
git://github.com/spree/spree_auth_devise.git (at 1-2-stable) is not checked  out. Please run 'bundle install'

*Would you like to install the default gateways? (yes/no) [yes] yes Would you like to install the default authentication system? (yes/no)
[yes] yes Would you like to run the migrations? (yes/no) [yes] yes
Would you like to load the seed data? (yes/no) [yes] yes Would you
like to load the sample data? (yes/no) [yes] yes
     gemfile  spree
     gemfile  spree_usa_epay
     gemfile  spree_skrill
     gemfile  spree_auth_devise
         run  bundle install from "." C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:582:in
' '': No such file or directory - git clone
"git://github.com/spree/spree_auth_dev ise.git"
"C:/Ruby193/lib/ruby/gems/1.9.1/cache/bundler/git/spree_auth_devise-683
51354588ecb7fa5d7bc278ebd86436a50d33d" --bare --no-hardlinks
(Errno::ENOENT)
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:582:in 'git'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:543:in 'checkout'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:769:in 'specs'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:491:in 'block in converge_locked_specs'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:480:in 'each'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:480:in 'converge_locked_specs'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:166:in 'resolve'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:113:in 'specs'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/definition.rb:108:in 'resolve_remotely!'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/installer.rb:81:in 'run'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/installer.rb:14:in 'install'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/cli.rb:230:in 'install'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/vendor/thor/task.rb:27:in 'run'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/vendor/thor/invocation.rb:120:in 'invoke_task'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/vendor/thor.rb:275:in 'dispatch'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/vendor/thor/base.rb:408:in 'start'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/bin/bundle:14:in 'block in <top (required)>'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/friendly_errors.rb:4:in 'with_friendly_errors'
  from C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/bin/bundle:14:in '<top (required)>'
  from C:/Ruby193/bin/bundle:23:in 'load'
  from C:/Ruby193/bin/bundle:23:in '<main>' git://github.com/spree/spree_auth_devise.git (at 1-2-stable) is not checked out. Please run 'bundle install' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T20:52:23.760

线索在这里：

```
run  bundle install from "." C:/Ruby193/lib/ruby/gems/1.9.1/gems/bundler-1.2.3/lib/bundler/source.rb:582:in
' '': No such file or directory - git clone 
```

您正在从路径中没有“git”的 Windows 控制台中运行它。从 Git Bash 控制台运行它，或者将 git 添加到您的路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T06:36:15.900

看起来您的 Gemfile 中的 spree_auth_devise 的 github url 中有一个空格。您可能在编辑文件时不小心把它弄到了那里。清除它并重新运行`bundle install`，看看是否有效。

# r - R/Shiny 图不显示在浏览器中

> ID：13904212
> 
> 赞同：4
> 
> 时间：2012-12-16T18:22:55.267
> 
> 标签：r, plot, rstudio, shiny

我最近开始玩 Shiny。我试图写一些东西来证明中心极限定理。我的代码如下：

ui.R:

```
#****************************************ui.R file code*****************************

library(shiny)
shinyUI(pageWithSidebar(headerPanel("Central Limit Theorem"),
                        sidebarPanel(selectInput("Distribution", 
                                                 "Distribution:", 
                                                 list("normal", "lognormal")),
                                                 br(),
                                                 sliderInput("sam_size", 
                                                              "Sample size:", 
                                                              min = 5, 
                                                              max = 500, 
                                                              value = 5)
                        ),
                        mainPanel(tabPanel("Plot", plotOutput("plot")))
)) 
```

服务器.R：

```
#****************************************server.R file code**************************
library(shiny)
shinyServer(function(input, output){
        data <- reactive(function(){Distribution <- switch(input$Distribution,
                                                           normal = rnorm,
                                                           lognormal = rlnorm,
                                                           rnorm
                                                           )
                                    Distribution(input$sam_size*2000)})

        output$plot <- reactive(function(){
                            Distribution <- input$Distribution
                            sam_size <- input$sam_size
                            temp <- matrix(data(), ncol=2000)
                            xbars <- colMeans(temp)
                            hist(xbars, main=paste("Sampling Distribution of the Mean Based on a", Distribution,
                         "distribution with n =", sam_size))})
}) 
```

当我尝试使用 运行代码`runApp()`时，以下是我得到的。如您所见，该图未显示。

![在此处输入图像描述](../Images/c3613d9bfe621fee403eac901e1953e1.png)

奇怪的是，当我回到我的 Rstudio 并按“Esc”退出应用程序时，我的 Rstudio 中显示的绘图如下所示：

![在此处输入图像描述](../Images/1f331be25d46ba5a7c8fd137c2f6813a.png)

我想知道是否有人知道我的代码有什么问题。谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-16T18:40:45.893

你想用 包装你的绘图功能`reactivePlot(...)`，而不仅仅是`reactive(...)`.

通常，`reactive(...)`应该用于服务器中的辅助函数，这些函数将`input`-dependent 数据传递给`output`函数。然而，实际生成`output`对象的函数应该用专门的反应函数包装，例如`reactiveText`、`reactivePrint`、`reactiveTable`和`reactivePlot`。

# mysql - 删除数据的最有效方法

> ID：13904216
> 
> 赞同：-1
> 
> 时间：2012-12-16T18:23:36.483
> 
> 标签：mysql

我正在开发一个论坛系统，我需要删除特定论坛中的所有主题和帖子。

有一张`posts`桌子可以容纳所有帖子。每个帖子都有一个`topic_id`字段，它是它所属主题的 ID。主题驻留在`topics`表中，每个主题都有`forum_id`字段，该字段是其所属论坛的 ID。

所以现在当我决定删除带有 ID 的论坛时`1`，我将如何从这个论坛中删除所有主题和帖子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:34:56.380

首先，我建议您仔细查看您的数据结构：如果您使用外键约束`ON DELETE CASCADE`，您的子删除将自动为您完成 - 这只是您获得的优势之一。

如果由于某些原因您不能或不想使用此类约束，请先查看如何选择相关主题和帖子。这应该给你一个很好的开始。

在您的特定示例中，例如

```
DELETE FROM posts
WHERE topic_id IN (
     SELECT id FROM topics WHERE forum_id=[id-to-delete]
  ) 
```

进而

```
DELETE FROM topics WHERE forum_id=[id-to-delete] 
```

应该做的伎俩。

请理解，我不建议这样做。使用数据一致性工具实现数据一致性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:30:52.680

此 sql 应删除与论坛 1 相关的所有帖子。主题仍将在数据库中，并且必须另外删除。没有测试过sql，试试吧:)

```
DELETE FROM
    posts
WHERE 
    topic_id
IN (
    SELECT 
        topic_id
    FROM
        topics
    WHERE
        forum_id = 1
) 
```

# asp.net - 密码不少于 6 个字符 验证器在 ASP 中使用 RegEx。网

> ID：13904219
> 
> 赞同：0
> 
> 时间：2012-12-16T18:24:11.240
> 
> 标签：asp.net, validation

我需要一个验证器来确保密码不少于 6 个字符，我需要它的正则表达式代码。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:54:27.500

您的正则表达式应该是 ^.{6,}$。

# php - Prestashop CMS 页面具有一列布局

> ID：13904220
> 
> 赞同：0
> 
> 时间：2012-12-16T18:24:14.123
> 
> 标签：php, smarty, prestashop

我尝试谷歌搜索和阅读不同的教程，但仍然无法弄清楚为什么我的 Prestashop 网站上的 CMS 页面只有一列。

我需要左边的模板块，我知道如何在管理员中使用它，移植和使用模块。问题是我被这件事困住了，我很确定这很容易解决。

任何人？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T03:49:32.680

你有自定义主题吗？在默认主题中，CMS 页面有一个三列模板。

因此，我假设您以前的开发人员可能编辑了您的主题，并且可以通过三种方式完成（我知道）：

1.left列在header.tpl中渲染，右列在footer.tpl中

```
{if $page_name != 'cms'}

<div id="right_column" class="column">
{$HOOK_RIGHT_COLUMN}
</div>

{/if} 
```

在 {$HOOK_LEFT_COLUMN} 的 header.tpl 中也是如此

2.在你的css文件中，他们可以设置#cms #right_column {display:none;}和#cms #left_column {display:none;}

3.in Modules->Position（在管理面板中）您可以为不应调用模块的页面定义异常字段（但这很可能不是您的情况）

# jquery - jquery选择器的元素并排？

> ID：13904221
> 
> 赞同：1
> 
> 时间：2012-12-16T18:07:28.880
> 
> 标签：jquery

这应该很简单，但我已经通过[Jquery Selector](http://api.jquery.com/category/selectors/)帮助大约一个小时了，但似乎没有任何效果。帮助！

我基本上是在用户点击旁边的链接后尝试提取 SPAN 的文本（地址）。不过请注意，我一页大约有 10 个，所以我不能设置静态地址。用户点击时必须拉动。

**html代码：**

```
<a href="3" class="clicky">Click to Show Map</a> 
<span style="display: none" class="theaddy">123 Fake Street, Somewhere Else, 12341</span> 
```

所以真的，我的问题是，我如何从`.theaddy`用户点击时获取文本`.clicky`？

正如我所说，我*不能*使用

```
 var propertyaddy = $(.theaddy).text(); 
```

因为在同一页面上有 10 个这样的 addy。我需要某种“这个”> Next To 有点东西。

我也考虑过将 SPAN 放在 A 中的想法，但我在这方面的努力也没有奏效。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:26:26.323

您可以使用它[`.next()`](http://api.jquery.com/next/)来查找任何元素的下一个兄弟。

```
$('.clicky').on('click', function() {
    var text = $(this).next().text();
    ...
}); 
```

只要您需要`.theaddy`的元素始终是“下一个”元素，就无需在`.next()`调用中提供特定的类选择器。

如果中间可能有其他元素，您可以使用`.nextAll('.theaddy').first()`. 这会生成所有后续`.theAddy`元素的列表，然后获取第一个这样的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:26:35.747

我建议使用`next()`：

```
text = $(this).next('.theaddy').text(); 
```

在上面的代码中，我使用了一个选择器，它只会抓取下一个元素（如果它是 of `class='theaddy'`），如果没有该选择器，它只会抓取标记中元素后面的*任何*元素的文本。`.clicky`

顺便说一句，当您在寻找*遍历*DOM 的方法时，您需要查看[遍历方法](http://api.jquery.com/category/traversing/)，而不是选择器。

参考：

*   [`next()`](http://api.jquery.com/next/).

# c# - 附加程序集媒体中心插件

> ID：13904223
> 
> 赞同：0
> 
> 时间：2012-12-16T18:24:21.907
> 
> 标签：c#, .net, windows, windows-media-center, mediacenter

我第一次尝试编写 Windows Media Center 插件。

该插件将使用外部程序集[zeroconfignetservices](http://code.google.com/p/zeroconfignetservices/)。我构建了项目，一切都正确编译。但是，当我在媒体中心运行应用程序时，事件查看器中会出现以下错误。

```
Exception System.IO.FileNotFoundException: Could not load file or assembly 'ZeroconfService, Version=0.6.0.0, Culture=neutral, PublicKeyToken=1df4e21661f2383d' or one of its dependencies. The system cannot find the file specified. 
```

但是程序集是在 GAC 中加载的。输出`gacutil /l zeroconfservice`：

```
Microsoft (R) .NET Global Assembly Cache Utility.  Version 4.0.30319.17929
Copyright (c) Microsoft Corporation.  All rights reserved.

The Global Assembly Cache contains the following assemblies:
zeroconfservice, Version=0.6.0.0, Culture=neutral, PublicKeyToken=1df4e21661f2
383d, processorArchitecture=x86

Number of items = 1 
```

我还尝试将 ZeroconfService.dll 的副本放在与媒体中心插件相同的目录中。

***我还需要做什么才能让媒体中心插件看到程序集？***

为了彻底，在编译代码时有一个警告。我通常不是 .Net 开发人员，也不了解警告的细微差别。也许这是相关的？

```
warning MSB3270: There was a mismatch between the processor architecture of the project being built "MSIL" and the processor architecture of the reference "ZeroconfService", "x86". This mismatch may cause runtime failures. Please consider changing the targeted processor architecture of your project through the Configuration Manager so as to align the processor architectures between your project and references, or take a dependency on references with a processor architecture that matches the targeted processor architecture of your project. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T03:14:24.187

确保您的插件项目面向 x86。您的托管项目可能是 JIT 到 64 位代码，这将导致框架寻找 64 位程序集。在 Visual Studio 2012 中，在 Project Properties->Build->Platform Target 下

- ![项目属性截图](../Images/81fc4cd09080c9d4a8cc8653b7912602.png)>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-21T23:48:13.907

我遇到了同样的错误，我正要放弃。我找到的解决方案是 Windows Media Center SDK 提供的所有说明都非常明确地说要为 x86 构建它。解决方案是将其更改为 x64。作为说明，我正在运行 Windows 7 64 位处理器。

# vb.net - 在 VB 中不使用 System.IO 类从 .txt 文件中形成字符串

> ID：13904224
> 
> 赞同：0
> 
> 时间：2012-12-16T18:24:22.460
> 
> 标签：vb.net

我想知道是否有一种方法可以在不使用 VB 2010 中的 System.IO 类的情况下将文本从 .txt 文件转换为字符串。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:42:49.157

如果您只是在快速读取文件，请尝试：

```
Dim strJunk As String = My.Computer.FileSystem.ReadAllText("C:\Junk\Junk.txt") 
```

# android - Listview显示随机图片

> ID：13904225
> 
> 赞同：0
> 
> 时间：2012-12-16T18:24:29.977
> 
> 标签：android, listview, imageview

在我的 UI 中，第一张图片总是随机的，起初我尝试清理项目并从 AVD 中擦除个人数据，但这无济于事。仅随机第一张图片，所有其他图片均正确显示。在活动开始后的几秒钟内，图片会发生多次变化。

请不要参考[Android 偶尔从 url 下载图像的](https://stackoverflow.com/questions/13899801/android-ocasionally-downloads-images-from-url)副本，因为它是不同的（并已解决）问题

![在此处输入图像描述](../Images/5ba8931f360912df99c915bd53d45093.png)

```
public class ImageLoader {

    MemoryCache memoryCache=new MemoryCache();
    FileCache fileCache;
    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public ImageLoader(Context context){
        fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(5);
    }

    int stub_id = R.drawable.ic_launcher;
    public void DisplayImage(String uurl, int loader, ImageView imageView)
    {
        String url = uurl.replaceAll(" ", "%20");
        url = url.replaceAll("\n", "%20");
        stub_id = loader;
        imageViews.put(imageView, url);
        Bitmap bitmap=memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            imageView.setImageResource(loader);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url)
    {
        File f=fileCache.getFile(url);

        //from SD cache
        Bitmap b = decodeFile(f);
        if(b!=null)
            return b;
        return downloadBitmap(url);

        //from web
        /*try {
            Bitmap bitmap=null;
            URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);
            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }*/
    }
    Bitmap downloadBitmap(String url){
        Bitmap bmp = null;
        URL url_1 = null;
        try {
            url_1 = new URL(url);
             bmp = BitmapFactory.decodeStream(url_1.openConnection().getInputStream());
        } catch (Exception e) {
            Log.v("Error while downloading bitmap from url", e.getMessage());
        }
        return bmp;
    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u;
            imageView=i;
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);
            memoryCache.put(photoToLoad.url, bmp);
            if(imageViewReused(photoToLoad))
                return;
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
            else
                photoToLoad.imageView.setImageResource(stub_id);
        }
    }

    public void clearCache() {
        memoryCache.clear();
        fileCache.clear();
    }

} 
```

文件现金

```
public class FileCache {

    private File cacheDir;

    public FileCache(Context context){
        //Find the dir to save cached images
        if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
            cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"TempImages");
        else
            cacheDir=context.getCacheDir();
        if(!cacheDir.exists())
            cacheDir.mkdirs();
    }

    public File getFile(String url){
        String filename=String.valueOf(url.hashCode());
        File f = new File(cacheDir, filename);
        return f;

    }

    public void clear(){
        File[] files=cacheDir.listFiles();
        if(files==null)
            return;
        for(File f:files)
            f.delete();
    }

} 
```

记忆现金

```
public class MemoryCache {
    private Map<String, SoftReference<Bitmap>> cache=Collections.synchronizedMap(new HashMap<String, SoftReference<Bitmap>>());

    public Bitmap get(String id){
        if(!cache.containsKey(id))
            return null;
        SoftReference<Bitmap> ref=cache.get(id);
        return ref.get();
    }

    public void put(String id, Bitmap bitmap){
        cache.put(id, new SoftReference<Bitmap>(bitmap));
    }

    public void clear() {
        cache.clear();
    }
} 
```

功利

```
public class Utils {
    public static void CopyStream(InputStream is, OutputStream os)
    {
        final int buffer_size=1024;
        try
        {
            byte[] bytes=new byte[buffer_size];
            for(;;)
            {
              int count=is.read(bytes, 0, buffer_size);
              if(count==-1)
                  break;
              os.write(bytes, 0, count);
            }
        }
        catch(Exception ex){}
    }
} 
```

适配器

```
public class CandidateAdapter extends BaseAdapter{
    Context ctx;
    LayoutInflater lInflater;
    ArrayList<Candidate> objects;
    CandidateAdapter(Context context, ArrayList<Candidate> candidates) {
            ctx = context;
            objects = candidates;
            lInflater = (LayoutInflater) ctx
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          }
    public int getCount() {
        return objects.size();
      }
    public Object getItem(int position) {
        return objects.get(position);
      }
    public long getItemId(int position) {
        return position;
      }
    Candidate getCandidate(int position) {
        return ((Candidate) getItem(position));
      }
    public View getView(int position, View convertView, ViewGroup parent) {
        // используем созданные, но не используемые view
        View view = convertView;
        if (view == null) {
          view = lInflater.inflate(R.layout.inbox_list_item, parent, false);
        }
        Candidate p = getCandidate(position);
        ((TextView) view.findViewById(R.id.from)).setText(p.get_name());
        ((TextView) view.findViewById(R.id.subject)).setText(p.get_office());
        ((RatingBar) view.findViewById(R.id.rateindicator)).setRating(p.get_ranking());
        int loader = R.drawable.loader;

        ImageView image = (ImageView) view.findViewById(R.id.photo);

        String image_url = p.get_photograph();

        ImageLoader imgLoader = new ImageLoader(ctx);

        imgLoader.DisplayImage(image_url, loader, image);
        return view;
    }

} 
```

活动

```
public class InboxActivity extends ListActivity {

    List<Candidate> candidates;
    private DatabaseHandler db;

    public void onDestroy(){
        if (db != null)
            db.close();

        super.onDestroy();
        //db.close();
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.inbox_list);
        db = new DatabaseHandler(this);
        candidates = db.getAllCandidates(1);
        db.close();
        CandidateAdapter adapter = new CandidateAdapter(this,(ArrayList) candidates);
        ListView lvMain = getListView();
        //String numofrows = "" + candidates.size();
        //Log.d("Number of candidates", numofrows);
        lvMain.setAdapter(adapter);
        lvMain.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                // getting values from selected ListItem
                String name = ((TextView) view.findViewById(R.id.from)).getText().toString();
                Log.d("Name ", name);

                // Starting new intent
                Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
                in.putExtra("name", name);
                Log.d("Starting activity ", "Yeah ");
                startActivity(in);

            }
        });
    }

} 
```

logcat 警告

12-16 08:35:33.525：W/Zygote(33)：预加载的可绘制资源 #0x1080093 (res/drawable-hdpi/sym_def_app_icon.png)，随配置而异！！

谁能帮我解决这里的问题？

getall 候选函数

```
public List<Candidate> getAllCandidates(int status) {
        List<Candidate> candidateList = new ArrayList<Candidate>();
        // Select All Query
        String selectQuery = "SELECT  * FROM " + TABLE_CANDIDATES;

        db = this.getReadableDatabase();
        cursor = db.rawQuery(selectQuery, null);

        // looping through all rows and adding to list
        if (cursor.moveToFirst()) {
            do {
                Candidate candidate = new Candidate();
                if (status == Integer.parseInt(cursor.getString(5))) {
                    candidate.set_name(cursor.getString(0));
                    candidate.set_office(cursor.getString(1));
                    candidate.set_photograph(cursor.getString(2));
                    candidate.set_promises(cursor.getString(3));
                    candidate.set_statment(cursor.getString(4));
                    candidate.set_active(Integer.parseInt(cursor.getString(5)));
                    candidate.set_ranking(Integer.parseInt(cursor.getString(6)));
                    // Adding candidate to list
                    candidateList.add(candidate);
                }
            } while (cursor.moveToNext());
        }

        // return candidate list
        db.close();
        cursor.close();
        return candidateList;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:05:44.377

您的 imageView 可能会被列表视图回收。您的问题可能是对传递给 ImageLoader 的图像的过时引用。

您可以在调用 DisplayImage 之前检查 imageView 的实例，然后在加载它之后验证这一点。

```
ImageLoader imgLoader = new ImageLoader(ctx);

        imgLoader.DisplayImage(image_url, loader, image); 
```

您可能需要考虑使用 viewholder 模式来保存您的 ImageLoader 而不是每次都创建一个新的，这也可能会有所帮助。

就像是

```
ImageLoader imgLoader = (ImageLoader) view.getTag()
if(imgLoader == null){
imgLoader = new ImageLoader(ctx);
view.setTag(imgLoader);
} 
```

这只是试探一下。不运行它很难知道，但希望它有所帮助:)祝你好运

# imagemagick - ImageMagick : 从 PSD 中提取图像

> ID：13904233
> 
> 赞同：0
> 
> 时间：2012-12-16T18:25:22.703
> 
> 标签：imagemagick, libpng, psd

我正在尝试使用以下命令从我的 PSD 中提取图像：

```
 convert my_file.psd extracted/image-%d.png 
```

问题是一些图片被完美提取，但大约 60% 没有。这是我得到的示例：http: [//dl.dropbox.com/u/78906691/image-93.png](http://dl.dropbox.com/u/78906691/image-93.png)

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:11:54.050

我通过删除第一层来修复它。似乎它与透明度相关联，因此两次启动了该命令：一次使用原始文件，一次使用另一个文件，其中我删除了我已经获得的图片。

# android - 附加缺少的源android

> ID：13904234
> 
> 赞同：1
> 
> 时间：2012-12-16T18:25:24.857
> 
> 标签：android, push-notification, push

我正在遵循[本指南](http://www.androidhive.info/2012/10/android-push-notifications-using-google-cloud-messaging-gcm-php-and-mysql/)，但我对其进行了一些修改；
删除了包含所有电子邮件和名称内容的第一个活动。基本上，我所做的是：
一个带有按钮和文本视图的应用程序，当您按下按钮时，regId 会弹出。到目前为止一切都很好，但是当谈到接收推送本身时，没有弹出窗口，没有唤醒锁或任何东西，只是“通知中心”中的一个简单行（真的不知道它在 android 上叫什么）。继承人的代码：

```
private static void generateNotification(Context context, String message) 
    {
        int icon = R.drawable.ic_launcher;
        long when = System.currentTimeMillis();
        NotificationManager notificationManager = (NotificationManager)
                context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(icon, message, when);

        String title = context.getString(R.string.app_name);

        Intent notificationIntent = new Intent(context, MainActivity.class);
        // set intent so it does not start a new activity
        notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP |
                Intent.FLAG_ACTIVITY_SINGLE_TOP);
        PendingIntent intent =
                PendingIntent.getActivity(context, 0, notificationIntent, 0);
        notification.setLatestEventInfo(context, title, message, intent);
        notification.flags |= Notification.FLAG_AUTO_CANCEL; 
```

错误：
通知通知 = new Notification(icon, message, when);

> 构造函数 Notification(int, charSequence, long) 已弃用

```
notification.setLatestEventInfo(context, title, message, intent);
The method setLatestEventInfo(Context, CharSequence, CharSequence, PendingIntent) from the type Notification is deprecated 
```

（logCat 从错误中清除）

当我打开声明时，它显示“JAR 文件没有源附件”。
我试图添加来源和谷歌搜索。但无论我做什么它都说

```
the source attachment does not contain the source for the file Notification.class 
```

我相信我在推送中获取消息的问题是因为这个。关于如何解决它的任何想法？

PS。我是这一切的新手，如果您需要更多代码，请告诉我，如果我在这里走错了路，请告诉我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:34:19.487

这与您的警告无关。警告只是说，您使用的方法自 API 级别 11 起已弃用。对于较新的 API，您可以（但您不必这样做，只是建议）使用 Notification.Builder：

```
Notification noti = new Notification.Builder(mContext)
     .setContentTitle("New mail from " + sender.toString())
     .setContentText(subject)
     .setSmallIcon(R.drawable.new_mail)
     .setLargeIcon(aBitmap)
     .build(); 
```

编辑：检查当前 API：

```
int currentVersion = android.os.Build.VERSION.SDK_INT;
int honeycombVersion = android.os.Build.VERSION_CODES.HONEYCOMB;

if (currentVersion >= honeycombVersion ){
    // Use Notification.Builder
} else{
    // Use Notification(int, charSequence, long)
} 
```

Edit2：如果您使用支持库，您可以在较低的 API 上使用 Notification.Builder。

# php - json 返回损坏的数据

> ID：13904235
> 
> 赞同：1
> 
> 时间：2012-12-16T18:25:33.440
> 
> 标签：php, mysql, json, character-encoding

我正在使用一个 api，它只是从我的数据库中读取并以 json 格式返回数据。

在 phpMyAdmin 中，句子是完美的（我使用 utf8_general 输入 csv）。例子：

```
 A line that uses 'r and special chars etc 
```

但是当我回显 json 时，我得到了这个：

```
 A line that uses ///\\/\/\/r and special chars etc 
```

首先我得到了空对象，所以我使用了：

```
 mysql_set_charset('utf8', $link); 
```

但我仍然得到损坏的数据。

**更新：**

更多信息：

```
mysql_set_charset('utf8',$link);

/* grab the posts from the db */
$query = "SELECT * FROM huren WHERE 1";

$result = mysql_query($query,$link) or die('Errant query:  '.$query);

// check row count 
$amount = mysql_num_rows($result);

/* create one master array of the records */
$houses = array();
if(mysql_num_rows($result)) {
    while($post = mysql_fetch_assoc($result)) {
        $houses[] = $post;
    }
}

/* output in necessary format */

    header('Content-type: application/json');
 $changed_json= str_replace('\\/', '/',json_encode(array('House'=>$houses)));
echo str_replace('\\\\', '\\',$changed_json); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:21:55.107

替换操作是怎么回事？`json_encode`要么返回完全有效的 JSON，表示您提供的确切输入，要么返回`NULL`因为存在诸如您的数据不在 UTF-8 中的问题。`json_encode`您不应该对!返回的字符串做任何事情。如果你没有得到`NULL`，那么你已经赢了，只需要回应它。

它只适用于此：

```
header('Content-type: application/json');
echo json_encode(array('House'=>$houses)); 
```

字符集并不重要，因为默认情况下`json_encode`会产生纯 ASCII 输出。这是因为默认情况下，Unicode 字符以 Unicode 转义序列表示，例如`\uxxxx`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:29:20.777

请给我们多一点继续。你能告诉我们编码字符串的部分吗？

这似乎可以自行工作，因此必须有一些来自其他地方的复杂交互。

```
<?php // RAY_temp_foo.php
error_reporting(E_ALL);
echo '<pre>';

$str = <<<END
A line that uses 'r and special chars etc
END;

$jso = json_encode($str);
$new = json_decode($jso);

// THESE SHOULD MATCH
var_dump($str);
var_dump($new);

echo PHP_EOL;
var_dump($jso); 
```

# spring - 如何配置 glass fish 以使用应用程序管理的实体管理器？

> ID：13904242
> 
> 赞同：6
> 
> 时间：2012-12-16T18:25:58.600
> 
> 标签：spring, transactions, glassfish

如何配置 glass fish 以使用应用程序管理的实体管理器？我在下面给出的配置中收到以下错误。

我不希望 glassfish 管理事务，我只想在持久性单元中使用带有 RESOURCE_LOCAL 设置的 spring 管理事务，而不是 JTA

```
SEVERE: Exception while preparing the app : The persistence-context-ref-name [org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean/entityManager] .... resolves to a persistence unit called [spring-jpa] which is of type RESOURCE_LOCAL. Only persistence units with transaction type JTA can be used as a container managed entity manager. Please verify your application. 
```

我的配置：

```
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
  <persistence-unit name="spring-jpa" transaction-type="RESOURCE_LOCAL">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <non-jta-data-source>mysql/mydb</non-jta-data-source>
    <properties/>
  </persistence-unit>
</persistence> 
```

我的应用程序上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
    xmlns:context="http://www.springframework.org/schema/context" 
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

    <context:component-scan base-package="com.myproject"/>
    <jpa:repositories base-package="com.myproject"/>
    <tx:annotation-driven transaction-manager="transactionManager"/>
    <bean id="dataSource"
       //....
    </bean>    
    <bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="persistenceUnitName" value="spring-jpa" />
        <property name="jpaVendorAdapter">
          <!--  <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">-->
                <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                <property name="showSql" value="true" />
                <property name="generateDdl" value="true" />
                <property name="database" value="MYSQL" />
                <property name="databasePlatform" value="org.hibernate.dialect.MySQL5Dialect"/>
            </bean>
        </property>
    </bean>

<bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
  <property name="entityManagerFactory" ref="entityManagerFactory" />
</bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:27:34.720

我找到[了这个论坛帖子](http://forum.springsource.org/showthread.php?58527-transaction-type-quot-JTA-quot-quot-RESOURCE_LOCAL-quot)，我引用：

> 在 Java EE 环境中，如果未指定此元素 [transaction-type]，则默认为 JTA。在 Java SE 环境中，如果未指定此元素，则可以假定默认值为 RESOURCE_LOCAL。

因此，在您的配置中尝试：

```
<persistence-unit name="spring-jpa" transaction-type="JTA"> 
```

# node.js - 唯一和稀疏索引导致重复错误

> ID：13904246
> 
> 赞同：2
> 
> 时间：2012-12-16T18:26:15.307
> 
> 标签：node.js, mongoose

我有这样的事情：

```
var mongoose = require('mongoose');

mongoose.connect('mongodb://...');

var UserSchema = mongoose.Schema({
  name: {
    type: String,
    unique: true
  },
  token: {
    type: String,
    unique: true,
    sparse: true
  }
});

var User = mongoose.model('User', UserSchema);

var peter = new User();

peter.name = 'peter';
peter.token = null;

peter.save(function(err) {
  if (err) console.log(err);
  console.log('done with peter');

  var john = new User();

  john.name = 'john';
  john.token = null;

  john.save(function(err) {
    if (err) console.log(err);
    console.log('done with john');
  });

}); 
```

所以`peter`是先创建后创建的`john`。但是，何时`john`保存`mongoose`返回以下错误

```
{ [MongoError: E11000 duplicate key error index: node-login.users.$token_1  dup key: { :   null }]
  name: 'MongoError',
  err: 'E11000 duplicate key error index: node-login.users.$token_1  dup key: { : null }',
  code: 11000,
  n: 0,
  lastOp: 0,
  connectionId: 4527333,
  ok: 1 } 
```

代码在[mongolab](https://mongolab.com)运行`mongo v2.0.7`和`mongoose v3.5.1`.

我认为设置索引以`sparse`允许多个`null`值。索引已正确设置为 mongolab 后端显示的“索引”选项`true`卡`unique`和`sparse`. 任何想法为什么我会收到错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T18:59:51.360

如果文档*具有该字段，则*[稀疏索引](http://docs.mongodb.org/manual/administration/indexes/#sparse-indexes)仅对该字段进行索引。该字段是否设置为或其他值无关紧要，如果存在，仍会检查其唯一性。*`null`*

 *因此，在您的情况下，完全省略设置`token`字段而不是将其设置为`null`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-03T14:27:48.203

在 JavaScript 中，将值设置为 null 不会删除该属性，而是将值设置为 null。在您的情况下，您应该删除令牌属性。

```
delete john.token;  // In place of John.token = null 
```

对彼得做同样的事情。

有关删除[的更多信息：从 JavaScript 对象中删除属性](https://stackoverflow.com/questions/208105/how-to-remove-a-property-from-a-javascript-object)*

# jquery - 拖放后显示消息（不是弹出消息，只是 html）

> ID：13904247
> 
> 赞同：1
> 
> 时间：2012-12-16T18:26:15.227
> 
> 标签：jquery, drag-and-drop

删除项目后，我试图在 html 中显示，但不是在弹出消息中。我试过 .confirm 和 .alert，但它们是弹出消息。我还找到了 .html 方法，但我的项目最终丢失了，它们的文本更改为输出消息。我知道我需要在 droppable 项目中添加一个函数（这些东西将被丢弃），但不确定什么会起作用。

我在网上找到了这些代码，因为我将它用作接口函数，但我正在尝试修改它以供我使用。

```
$('.listdragable').droppable({
    tolerance: 'pointer',
    drop: function(event, ui) {
        // get target list name
        var newList = $(this).parent().attr("id");  
        $(this).append($(ui.helper.children()).clone().draggable({
            //make dropped items in new list draggable
            helper: function() {
                var selected = $('#' + newList + ' input:checked').parents('li');
                if (selected.length === 0) {
                    selected = $(this);
                }   
                var container = $('<div/>').attr('id', 'draggingContainer');
                container.append(selected.clone());
                oldselected = selected;
                return container;
        }               
        }));        
        //remove dropped items from old list
        oldselected.remove();       
    } 
}); 
```

提前感谢您的帮助！

# ios - 改进 HTML5 Canvas 逐帧 JPG 动画以在动画前完全缓存

> ID：13904252
> 
> 赞同：1
> 
> 时间：2012-12-16T18:27:25.020
> 
> 标签：ios, caching, animation, html5-canvas, autoplay

我正在尝试在这个由 Phrogz 回答的[伟大脚本之上构建。](https://stackoverflow.com/questions/4779674/frame-by-frame-animation-in-html5-with-canvas)

问题是动画不会播放，直到所有图像都缓存在浏览器中。因此，在第一次加载时它不会播放。仅在重新加载时。

我尝试这样做的目的是尝试提供一种替代解决方案来让动画自动播放，因为该功能在 iOS 浏览器中不起作用。

这是我正在使用的代码：

```
 function draw() { 
            var imgNumber = 1;
            var lastImgNumber = 121;

            var ctx = canvas.getContext('2d');
            var img = new Image;
            img.onload = function(){
            ctx.clearRect( 0, 0, ctx.canvas.width, ctx.canvas.height );
            ctx.drawImage( img, 0, 0 );
            };
            var timer = setInterval( function(){
              if (imgNumber>lastImgNumber){
                clearInterval( timer );
              }
             else{
                img.src = "jpg_80/t5_"+( imgNumber++ )+".jpg";
              }
            }, 1000/24 ); //Draw at 24 frames per second
          } 
```

我试过在结束正文标签之前添加这个：

```
 window.onload = draw; 
```

但是，我相信必须在 draw() 函数中更改代码。在 setInterval 函数的某个地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-19T13:56:48.650

这是您的`draw`函数的修改版本，它在将所有图像放在画布上之前预加载它们。

它假设您有一个 id 为“anim”的画布（因为您提供的源代码中没有画布的引用）

```
<canvas id='anim' width='660' height='500'></canvas> 
```

JavaScript：（在 iPad 上测试）

```
function draw() {
    var ctx = document.getElementById('anim').getContext("2d");
    var start = 1, stop = 121,cur=start,imgArr=[];

    var loadLoop = function() {
        var img = document.createElement("img");
        img.onload = function() {
            imgArr.push(this);
            cur++;

            if(cur > stop) {
                // all images preloaded
                animate();
            }
            else {
                loadLoop();
            }
        }

        img.src = "jpg_80/t5_"+(cur)+".jpg";
    }

    loadLoop();

    function animate() {
        var timer = setInterval(function() {
            ctx.drawImage(imgArr.shift(), 0, 0 );
            if(imgArr.length == 0) {
                // no more frames
                clearInterval(timer);
            }
        },1000/24);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:24:54.003

您可以创建 121`<img>`个元素并为每个元素添加一个`.onload`功能。在那个处理程序中，你增加一个数字，当它达到 121 时，你开始动画。

但是您正在尝试做的事情听起来像是您想要创建一个视频剪辑。当这是您的意图时，`<video>`标签可能是更好的解决方案。使用现代编解码器编码的 121 帧视频剪辑将比 121 个单独的 JPEG 小得多，因为视频压缩算法使用帧之间的冗余来改进压缩。

# mobile - 黑莓，为什么链接会在新标签页中打开？

> ID：13904254
> 
> 赞同：1
> 
> 时间：2012-12-16T18:27:40.283
> 
> 标签：mobile, blackberry, web, html5boilerplate

我有一个非常普通的香草网站。在为客户进行演示时，她拿出了她的黑莓手机，由于某种原因，当她单击导航链接时，总是被提示在新选项卡中打开页面。我们查看的其他示例响应式网站没有发生这种情况。我可能会错过什么？

如果这有帮助，这就是我的导航标记的样子：

```
<nav>
    <a href="/" class="active agenda">Agenda</a>
    <a href="/ask/" class=" ask">Ask?</a>
    <a href="/refer/" class=" refer">Refer</a>
    <a href="/accounts/profile" class=" me">Me</a>
</nav> 
```

我正在使用 HTML5BP 和 320 及更高版本的框架。页面上什至没有运行 JS。说真的，什么鬼……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:31:43.040

我熟悉的 Bold 9650 从 OS 5 开始，但后来升级到 OS 6。所以它仍然可能是带有 RIM 糟糕浏览器的 OS 5，或者是带有 Apple webkit 的 OS 6，这取决于您的客户是否有在设备上完成了操作系统升级。

如果您没有 BlackBerry 设备进行测试，RIM 的模拟器非常适合重现此类问题。访问[http://us.blackberry.com/sites/developers/resources/simulators.html](http://us.blackberry.com/sites/developers/resources/simulators.html)并向下滚动到“BlackBerry Smartphone Simulators”部分，查看您可以尝试的所有模拟器。模拟器需要 Windows 才能运行。

# css - CSS需要将导航栏放在图像上

> ID：13904256
> 
> 赞同：1
> 
> 时间：2012-12-16T18:28:04.083
> 
> 标签：css, wordpress

我需要将导航栏放在标题图像上。我不能在 CSS 中使用背景 url 属性，因为我有多个导航栏和不同页面的标题图像。我希望导航向右浮动，使其与图像偏移，但部分在图像上方。

```
 Button 1 | Button 2 | Button 3 | Button 4
Header Image 
```

我尝试了很多方法，例如将它们放置相同的 div 并在图像上使用 CSS 绝对位置。这种情况下导航停止工作。当我在导航上使用绝对位置时，我无法将导航向右移动足够远（右：200px）不能再移动！有谁知道如何达到上述预期的结果？提前致谢！HTML PHP

```
<div id="navigation-container">

 <nav id="np-access" role="navigation">
   <?php if ( (is_page(20) || is_page(22) || is_page(24) || is_page(26) ||    is_page(28)) ) { 
        wp_nav_menu( array( 'theme_location' => 'third') );
   }else{
        wp_nav_menu( array( 'theme_location' => 'secondary') );
   }
?>
 </nav>
</div>

<?php if ( (is_page(20) || is_page(22) || is_page(24) || is_page(26) || is_page(28)) )    { 
    echo '<img src="<path ito image" width="194" height="166"/>';
}
else{
   echo '<img src="<path ito image" width="194" height="166"/>';
}
?> 
```

目前，图像没有按照我需要的位置设置样式。

导航 CSS

```
#np-wedding-nav{
  float: right;
  padding-right: 100px;
  height: 40px;
  position: relative;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:32:51.683

> 我希望导航向右浮动，使其与图像偏移，但部分在图像上方。

给导航一个负边距：

```
nav {margin-left: -100px} 
```

或者位置是相对的：

```
nav {position: relative; left: -100px} 
```

在任何情况下：更改标记中导航和图像的顺序。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2021-07-04T02:27:13.597

请更改标题的顺序和您的html文件的导航，它应该可以工作。

# css - 如何使标签相对于相邻下拉菜单垂直居中？

> ID：13904258
> 
> 赞同：1
> 
> 时间：2012-12-16T18:28:30.620
> 
> 标签：css, twitter-bootstrap

我在一行中有两个 div。第一个包含一个标签，但不在中心，与相邻的下拉列表相比，它看起来有点不合适：

```
<div id="deal_modal_body" class="modal-body">
   <div class="cb_inline_block">
      <div class="cb_inline_block"> Test: </div>
      <div class="cb_inline_block">
         <div class="input-append">
            <select id="id_">
               <option selected="selected" value="">---------</option>
            </select>
            <button id="add_button" class="btn" type="button"><icon class="icon-white">Go</icon></button>
         </div>
      </div>
   </div>
</div> 
```

我在这里有一个简单的小提琴：

[http://jsfiddle.net/houmie/6EQJw/1/](http://jsfiddle.net/houmie/6EQJw/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:47:25.583

我不喜欢硬编码值将东西推到中间/中心。更好的方法是使用**Twitter Bootstrap**自己的内置解决方案。

大概这是在表格中吧？只要给那个表格一个类`form-inline`。完毕。

演示：http: [//jsfiddle.net/6EQJw/5/](http://jsfiddle.net/6EQJw/5/)

参考：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

# java - “尝试资源”有问题

> ID：13904261
> 
> 赞同：3
> 
> 时间：2012-12-16T18:28:54.073
> 
> 标签：java, try-with-resources

**澄清：**由于来自 Eclipse 的消息，我什至无法编译。第一个代码片段：`input`并且`inputBuffer`无法识别。第二个代码片段，Eclipse 要我切换开关“Compliance and JRE to 1.7”

我是 try-with-resources 的新手，我不太理解语法或我做错了什么。这是我的代码

```
try {
   FileReader input = new FileReader(this.fileName);
   BufferedReader  inputBuffer = new BufferedReader (input);

   String line;
   while ((line = inputBuffer.readLine()) != null) {
       String[] inputData = line.split(",");

        Node<Integer> newNode = new Node<Integer>(Integer.parseInt(inputData[0]),
                                                  Integer.parseInt(inputData[1]));
        this.hashMap.add(newNode);
   }

//inputBuffer.close();
//input.close();

}catch (NumberFormatException nfe){
    System.out.println(
         "Repository could not load data due to NumberFormatException: " + nfe); 
}catch (FileNotFoundException fnfe) {
    System.out.println("File not found, error: " + fnfe);
}finally { 
    inputBuffer.close();
    input.close();
} 
```

finally 块不起作用，所以我想尝试

```
try (FileReader input = new FileReader(this.fileName)) {
      ......        
}catch (FileNotFoundException e) {
      ......
}finally {
      inputBuffer.close();
      input.close();
} 
```

**然而**

*   我还应该将 BufferedReader 添加到`try (...)`...但是如何？

*   这也需要我将“Compliance and JRE to 1.7”切换。到目前为止，我不知道这意味着什么以及这将如何影响我的程序，在有人解释这一切意味着什么或者我做错了什么之前，我不愿意这样做。

**编辑**

我在 try 块之前移动了声明并用 null 初始化，这是“ok”吗？

```
FileReader input = null;
BufferedReader  inputBuffer = null;

try {
    input = new FileReader(this.fileName);
    inputBuffer = new BufferedReader (input);
    ...
}   ... 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T18:32:32.777

您**必须使用 Java 7**才能使用 try-with-resources 语句。
try-with-resources 块也使用 AutoClosable 接口，因此在 finally-块中省略那些关闭。它们将被自动调用。
如果你想使用 BufferedReader 试试这个：

```
try (BufferedReader bufRead = new BufferedReader(new FileReader(this.fileName))) {
      ......        
}catch (FileNotFoundException e) {
      ......
} 
```

您还可以像这样使用多个资源：

```
try (FileReader input = new FileReader(this.fileName);
     BufferedReader bufRead = new BufferedReader(input) ) {
          ......        
    }catch (FileNotFoundException e) {
          ......
    } 
```

**还有一件重要的事情：** 如果你关闭一个`BufferedReader`包裹另一个的 a `Reader`，这个底层`Reader`也将被关闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-16T18:36:03.793

在 try{}catch(){} 之前首先声明 input 和 inputBuffer

像这样

```
FileReader input = null;
BufferedReader  inputBuffer = null;
try
{
 ------
 -------

} 
```

在 finally 的第一个块中：检查以下两个条件

```
if(inputBuffer != null)
{
    inputBuffer.close();
}
if(input != null)
{
      input.close();
} 
```

第二：如果您想尝试多个资源，请执行以下操作：

```
try ( OpenDoor door = new OpenDoor(); OpenWindow window = new OpenWindow() ) 
{

} 
```

在这种情况下，不需要关闭 finally 块中的上述资源。

# algorithm - 如何生成唯一的 4 到 7 个字符的密钥

> ID：13904264
> 
> 赞同：1
> 
> 时间：2012-12-16T18:29:19.870
> 
> 标签：algorithm, cryptography

我需要为抽奖生成大量代码，代码不应该太长，因为我们不希望用户很难在网站中输入代码，我怎么知道我的算法需要多少代码再次重复代码？以及如何生成代码？代码可以是数字也可以是字母。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:36:58.953

大写和小写字母和数字，删除容易混淆的字符，例如`0`, `O`, `o`, `I`, `1`, `l`, 为您提供 56 个不同的字符。对于长度为 x 的代码，您可以得到 56 次可能组合的 x 次方。

四个字符给出了 9834496 种不同的组合。
七个字符给出了 1727094849536 种不同的组合。

要选择保证唯一的随机组合，您只需保留之前创建的所有组合，并对照它们检查每个新组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:51:57.260

您可以从最大值开始，而不是从 0 开始。您首先需要确定哪些字符将构成您的列表，并使用它来创建大小为 m 的查找表。

创建一个随机素数，p。然后你使用一个从最大值开始的生成器，n = c ** m - 1，其中 c 是每个代码的字符数，那么关键是 k = n % p。然后只需将其转换为以 m 为底的数字，这将允许使用查找表来创建字符串。

然后只需生成您需要的所有代码，或者通过需要的生成器函数或一次全部生成。虽然，您希望将 n 减少 randomBetween(n / (剩余代码数)/2,n / (剩余代码数)) 或类似的东西，而不是仅仅将其减少一，这可能允许 p 和/ 或 n 只需通过蛮力确定。这也意味着您可能不应该使用最大值作为键。

只要 p 远大于所需的代码数量，只要 p 保持不变，它就不会重复。只要没有人知道 p 是什么，它也可能是密码安全的。尽管 p 可能需要保持很小以避免任何重复的机会 p 应该是实际的素数，而不是可能的素数，因此需要指数时间以上来确保 p 是素数。但是，一旦生成了密钥，生成每个密钥最坏的情况应该是多项式。尽管一次生成所需的所有密钥可能更好（如果需要，可以制作额外的密钥），存储它们，然后根据需要分发。这样您就可以确保密钥是唯一的，以防万一导致密钥生成器失败，从而强制创建 p 的第二个值，或存储 p 的原始值，

限制密钥可以使用的次数或将其归属于帐户，将有助于避免黑客只需要找到一个密钥然后分发它的问题。

# vb.net - VB.NET 中的 RichTextBox 多行布局

> ID：13904267
> 
> 赞同：0
> 
> 时间：2012-12-16T18:29:48.547
> 
> 标签：vb.net, richtextbox

如果以前有人问过这个问题，对不起。

如何使用 VB.NET 在一个 RichTextBox 中设置不同的字体？因为当我这样做时：

```
Dim String as String = "text" & vbCrLf & "more text"

Form.RichTextBox.Text = String
Form.RichTextBox.Select(String.IndexOf("Score: 5"), Len("Score: 5"))
Form.RichTextBox.SelectionFont = New Font(Presentatie.rtxtPresentatie.SelectionFont, FontStyle.Bold) 
```

它只会使“core: 5”部分变粗（也只选择了这个部分，然后它只会选择“core: 5”部分）。

有人帮我吗？我需要很快得到答案，所以请！

编辑：解决。用了这个：

```
Form.RichTextBox.Select(String.IndexOf("Score: 5") - 1, Len("Score: 5")) 
```

感谢codingbiz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:03:41.530

我没有发布我的评论作为答案，因为我担心 IndexOf 返回 0 时，然后 -1 会引发异常。所以[这是微软的解决方案](http://msdn.microsoft.com/en-us/library/xc4fh98s.aspx)

```
 Public Sub SelectMyString()

    ' Create a string to search for the word "fox".
    Dim searchString As String = "fox"

    ' Determine the starting location of the word "fox".
    Dim index As Integer = Form.RichTextBox.IndexOf(searchString)

    ' Determine if the word has been found and select it if it was. 
    If index != -1 Then
       'Select the string using the index and the length of the string.
       Form.RichTextBox.Select(index, searchString.Length)
    End If
 End Sub 
```

# c - 具有其他阻塞功能的 Arduino IR 遥控器

> ID：13904268
> 
> 赞同：2
> 
> 时间：2012-12-16T18:30:00.127
> 
> 标签：c, arduino, microcontroller, rfid, infrared

我已经为我的遥控器解码了我的 IR 代码，并让它们在草图中运行时工作，请参阅 IR CODE。

我的 RFID 猫喂食器草图也运行良好，请参阅 RFID 代码。

然而，我无法将红外遥控器与任何其他阻塞功能一起使用，特别是这个 RFID 阅读器草图......每个 skecth 似乎都需要一直等待才能为信号做好准备。我想要做的是让 RFID 阅读器正常运行，但能够通过 IR 遥控器将其置于手动模式。任何帮助或指示将不胜感激。我有尝试将两者集成的代码，但它从来没有正常工作，请让我知道这是否有帮助，谢谢！

**红外代码**

```
#include <IRremote.h>

int RECV_PIN = 4;
IRrecv irrecv(RECV_PIN);
decode_results results;

void setup(){
  irrecv.enableIRIn(); // Start the receiver
  Serial.begin(2400);
}

// Compare two tick values, returning 0 if newval is shorter,
// 1 if newval is equal, and 2 if newval is longer
// Use a tolerance of 20%
int compare(unsigned int oldval, unsigned int newval) {
  if (newval < oldval * .8) {
    return 0;
  } 
  else if (oldval < newval * .8) {
    return 2;
  } 
  else {
    return 1;
  }
}

// Use FNV hash algorithm: http://isthe.com/chongo/tech/comp/fnv/#FNV-param
#define FNV_PRIME_32 16777619
#define FNV_BASIS_32 2166136261

/* Converts the raw code values into a 32-bit hash code.
 * Hopefully this code is unique for each button.
 */
unsigned long decodeHash(decode_results *results) {
  unsigned long hash = FNV_BASIS_32;
  for (int i = 1; i+2 < results->rawlen; i++) {
    int value =  compare(results->rawbuf[i], results->rawbuf[i+2]);
    // Add value into the hash
    hash = (hash * FNV_PRIME_32) ^ value;
  }
  return hash;
}

void loop() {
  if (irrecv.decode(&results)) {
    unsigned long hash = decodeHash(&results);
    switch (hash) {
      case 0x4AB0F7B6: // any button held down
        Serial.println("Button Repeat");
        break;
      case 0x2D4AFCCE: // Power
        Serial.println("Power");
        break;
      case 0xE8187BAA: // EQ
        Serial.println("EQ");
        break;
      case 0x95D01E65: // CD/Tuner
        Serial.println("CD/Tuner");
        break;
      case 0xE20BA29: // Mute
        Serial.println("Mute");
        break;
      default:
        Serial.print("Unknown ");
        Serial.println(hash, HEX);    
    }
    irrecv.resume(); // Resume decoding (necessary!)
  }
} 
```

**射频识别码**

```
/*** Cord Slatton
* date 12-13-2012 **/

#include <IRremote.h>
#define RFID_ENABLE 2   //to RFID ENABLE
#define CODE_LEN 10      //Max length of RFID tag
#define START_BYTE 0x0A 
#define STOP_BYTE 0x0D
#define MOTOR_RUN_LENGTH 1000 //time, in ms, to run door motor

char tag[CODE_LEN];
int pwm_b = 11;  //PWM control for motor outputs 3 and 4 is on digital pin 11
int dir_b = 13;  //direction control for motor outputs 3 and 4 is on digital pin 13
int door_status = 1; // 1 == closed, 0 == open
//PIR sensor
const int sensorPIR = A0;

unsigned long rfidHitTime = 0; //when did we get last rfid hit?
unsigned long pirHitTime = 0; //when did we get last PIR hit?
unsigned int pirClose = 0;
unsigned int rfidClose = 0;

void setup() {
  Serial.begin(2400); //parallax rfid reader seems to only like serial 2400  
  Serial.println("RoboFeeder Online");
  //rfid
  pinMode(RFID_ENABLE,OUTPUT);
  //motor
  pinMode(pwm_b, OUTPUT);
  pinMode(dir_b, OUTPUT);
  //PIR
  pinMode(sensorPIR, INPUT);
  digitalWrite(sensorPIR, LOW);
  Serial.println("Warming up PIR...");
  delay(10000);
  Serial.println("PIR ready");

  Serial.println("RoboFeeder startup test: Door");
  openDoor();
  delay(2500);
  closeDoor();
  Serial.println("RoboFeeder door test complete");
}

void loop() {
  delay(1500);
  enableRFID(); 
  getRFIDTag(); //waiting function, till gets any tag

  disableRFID();
  openDoor();
  sendCode();

  Serial.flush();
  clearCode();
}

/*** Clears out the memory space for the tag to 0s. */
void clearCode() {
  for(int i=0; i<CODE_LEN; i++) {
    tag[i] = 0; 
  }
}

/*** Sends the tag to the computer. */
void sendCode() {
    Serial.print("TAG:");
    for(int i=0; i<CODE_LEN; i++) {
      Serial.print(tag[i]); 
    }
    Serial.println("\r"); 
}

/**************************************************************/
/********************   RFID Functions  ***********************/
/**************************************************************/

void enableRFID() {
   digitalWrite(RFID_ENABLE, LOW);    
}

void disableRFID() {
   digitalWrite(RFID_ENABLE, HIGH);  
}

/*** Blocking function, waits for and gets the RFID tag. */
void getRFIDTag() {
  byte next_byte; 
  while(Serial.available() <= 0) {
    if(door_status == 0){ //open
      pirDetection(); 
      rfidClose = millis() - rfidHitTime;
      pirClose =  millis() - pirHitTime;
      Serial.print("RFID Close: ");
      Serial.print(rfidClose);
      Serial.print(" - PIR Close: ");
      Serial.println(pirClose);
      //if door has been open for more than a certain amount of time with no rfid hit and PIR no hit for certain time
      if( (rfidClose > 30000) && (pirClose > 10000) ){
        closeDoor();     
      }
    }        
  }
  pirHitTime = 0;
  if((next_byte = Serial.read()) == START_BYTE) {      
    byte bytesread = 0; 
    while(bytesread < CODE_LEN) {
      if(Serial.available() > 0) { //wait for the next byte
          if((next_byte = Serial.read()) == STOP_BYTE) break;       
          tag[bytesread++] = next_byte;         
      }
    }
    rfidHitTime = millis(); //keep track of when last rfid hit was    
  }
}

/********************   Motor Functions  ***********************/

void openDoor() {
  if(door_status == 1){      
    motorRun(150);
    digitalWrite(dir_b, HIGH);  //Set motor direction, 1 low, 2 high
    Serial.println("Door opening");
    delay(MOTOR_RUN_LENGTH);
    motorStop();
    door_status = 1 - door_status;
  }
}

void closeDoor() {
  if(door_status == 0){    
    motorRun(150);
    digitalWrite(dir_b, LOW);  //Reverse motor direction, 1 high, 2 low
    Serial.println("Door closing");
    delay(MOTOR_RUN_LENGTH);
    motorStop();
    door_status = 1 - door_status; 
  }     
}

void motorRun(int speed) {
  analogWrite(pwm_b, speed);  //set motor to run at speed variable value
}
void motorStop() {
  analogWrite(pwm_b, 0);  //set motor to run at 0
}

/********************   PIR Functions  ***********************/

boolean pirDetection() {
  //returns true if PIR analog reading has been rising for more than 10 cycles, false if has been falling
  int counter = 0;
  int pirSensorReading[10];
  int avgReading = 0;
  while(counter < 10){
    pirSensorReading[counter] = analogRead(sensorPIR);
    avgReading += pirSensorReading[counter];  
    counter++;
    delay(300);
  }
  avgReading = avgReading/10;
  Serial.print("Avg. PIR: ");
  Serial.print(avgReading);
  Serial.print(" - Last PIR: ");
  Serial.println( pirSensorReading[9] );

  if( (pirSensorReading[9] > avgReading+1) || (analogRead(sensorPIR) > 700) ){
    pirHitTime = millis(); //keep track of when last PIR hit was
    return true;
  }
  else if(pirSensorReading[9] <= avgReading){
    return false;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T03:24:03.530

我能够通过使用 AttachInterrupt() 成功解决此问题。

具体来说，我找到了一个[基于中断的 IR Remotes 库，](http://arduino.cc/forum/index.php/topic,105232.0.html)而不是我之前尝试使用的基于轮询的库。

如果有人有兴趣，成品 RFID IR 遥控猫喂食器代码是：

```
/*** Cord Slatton
 * date 12-28-2012 **/

//IR includes
//info: http://www.zbotic.com/index.php/download/
//download: http://www.zbotic.com/index.php/download_file/view/12/118/
#include "PCInterrupt.h"
#include "Device.h"
#include "irController.h"

#define RFID_ENABLE 8 //to RFID ENABLE
#define CODE_LEN 10 //Max length of RFID tag
#define START_BYTE 0x0A
#define STOP_BYTE 0x0D
#define MOTOR_RUN_LENGTH 1000 //time, in ms, to run door motor

char tag[CODE_LEN];
int pwm_b = 11; //PWM control for motor outputs 3 and 4 is on digital pin 11
int dir_b = 13; //direction control for motor outputs 3 and 4 is on digital pin 13
int door_status = 1; // 1 == closed, 0 == open
int manual_mode = 1; // 1 == auto, 0 == manual
//PIR sensor
const int sensorPIR = A0;
//IR init
int manualModePin = 10; //led pin for indication of manual mode
IRController irController;

unsigned long rfidHitTime = 0; //when did we get last rfid hit?
unsigned long pirHitTime = 0; //when did we get last PIR hit?
unsigned long pirClose = 0;
unsigned long rfidClose = 0;

void setup() {
  Serial.begin(2400); //parallax rfid reader seems to only like serial 2400  
  Serial.println("RoboFeeder Online");
  //rfid
  pinMode(RFID_ENABLE,OUTPUT);
  //motor
  pinMode(pwm_b, OUTPUT);
  pinMode(dir_b, OUTPUT);
  //PIR
  pinMode(sensorPIR, INPUT);
  digitalWrite(sensorPIR, LOW);
  Serial.println("Warming up PIR...");
  delay(10000);
  Serial.println("PIR ready");
  //IR remote
  pinMode(manualModePin, OUTPUT);
  digitalWrite(manualModePin, LOW);
  int res = irController.begin(IR_PIN, OTHER_DEVICE);
  if (res != SUCCESS) {
    Serial.println("error=");
    Serial.println(res);
  }
  Serial.println("IR Remote enabled");

  Serial.println("RoboFeeder startup test: Door");
  openDoor();
  delay(2500);
  closeDoor();
  Serial.println("RoboFeeder door test complete");
}

void loop() {
  delay(1500);
  enableRFID(); 
  getRFIDTag(); //waiting function, till gets any tag

  disableRFID();
  openDoor();
  sendCode();

  Serial.flush();
  clearCode();
}

/*** Clears out the memory space for the tag to 0s. */
void clearCode() {
  for(int i=0; i<CODE_LEN; i++) {
    tag[i] = 0; 
  }
}

/*** Sends the tag to the computer. */
void sendCode() {
    Serial.print("TAG:");
    for(int i=0; i<CODE_LEN; i++) {
      Serial.print(tag[i]); 
    }
    Serial.println("\r"); 
}

/**************************************************************/
/********************   RFID Functions  ***********************/
/**************************************************************/

void enableRFID() {
   digitalWrite(RFID_ENABLE, LOW);    
}

void disableRFID() {
   digitalWrite(RFID_ENABLE, HIGH);  
}

/*** Blocking function, waits for and gets the RFID tag. */
void getRFIDTag() {
  byte next_byte; 
  while(Serial.available() <= 0) {
    if(door_status == 0){ //open
      pirDetection(); 
      rfidClose = millis() - rfidHitTime;
      pirClose =  millis() - pirHitTime;
      Serial.print("RFID Close: ");
      Serial.print(rfidClose);
      Serial.print(" - PIR Close: ");
      Serial.println(pirClose);
      //if door has been open for more than a certain amount of time with no rfid hit and PIR no hit for certain time
      if( (rfidClose > 40000) && (pirClose > 15000) ){
        closeDoor();     
      }
    }    
    IRRemote(); 
    if(manual_mode == 0)
      manualMode();   
  }
  //PIR set to current loop time to keep it from freaking out
  pirHitTime = millis();

  if((next_byte = Serial.read()) == START_BYTE) {      
    byte bytesread = 0; 
    while(bytesread < CODE_LEN) {
      if(Serial.available() > 0) { //wait for the next byte
          if((next_byte = Serial.read()) == STOP_BYTE) break;       
          tag[bytesread++] = next_byte;         
      }
    }
    rfidHitTime = millis(); //keep track of when last rfid hit was    
  }
}

/**************************************************************/
/********************   Motor Functions  ***********************/
/**************************************************************/

void openDoor() {
  if(door_status == 1){      
    motorRun(150);
    digitalWrite(dir_b, HIGH);  //Set motor direction, 1 low, 2 high
    Serial.println("Door opening");
    delay(MOTOR_RUN_LENGTH);
    motorStop();
    door_status = 1 - door_status;
  }
}

void closeDoor() {
  if(door_status == 0){    
    motorRun(150);
    digitalWrite(dir_b, LOW);  //Reverse motor direction, 1 high, 2 low
    Serial.println("Door closing");
    delay(MOTOR_RUN_LENGTH);
    motorStop();
    door_status = 1 - door_status; 
  }     
}

void motorRun(int speed) {
  analogWrite(pwm_b, speed);  //set motor to run at speed variable value
}
void motorStop() {
  analogWrite(pwm_b, 0);  //set motor to run at 0
}

/**************************************************************/
/********************   PIR Functions  ***********************/
/**************************************************************/

boolean pirDetection() {
  //returns true if PIR analog reading has been rising for more than 10 cycles, 
  //false if has been falling
  int counter = 0;
  int pirSensorReading[10];
  int avgReading = 0;
  while(counter < 10){
    pirSensorReading[counter] = analogRead(sensorPIR);
    avgReading += pirSensorReading[counter];  
    counter++;
    delay(300);
  }
  avgReading = avgReading/10;
  Serial.print("Avg. PIR: ");
  Serial.print(avgReading);
  Serial.print(" - Last PIR: ");
  Serial.println( pirSensorReading[9] );

  if( (pirSensorReading[9] > avgReading+1) || (analogRead(sensorPIR) > 700) ){
    pirHitTime = millis(); //keep track of when last PIR hit was
    return true;
  }
  else if(pirSensorReading[9] <= avgReading){
    return false;
  }
}

/**************************************************************/
/********************   IR Remote Functions  ***********************/
/**************************************************************/

void IRRemote(){ 
  int val = irController.read(); // Returns negative value if no new command rcvd  
  if (val >=0){
    Serial.print("Key: ");
    Serial.println(val);
    if(val == 100){
      manual_mode = 1 - manual_mode;
    }    
    else if( (val >= 0) && (manual_mode == 0) ){
      if(door_status == 1)
        openDoor();
      else
        closeDoor();
    }
  }
  delay(500); 
}

//blocking function that won't let you leave till you turn off manual mode
void manualMode(){
  disableRFID();
  Serial.println("Manual Mode on");
  digitalWrite(manualModePin, HIGH);
  while(manual_mode == 0){
    IRRemote();
  }
  Serial.println("Manual Mode exiting");
  digitalWrite(manualModePin, LOW);
  //set sensors to count from now, esentially zero them out
  pirHitTime = millis();
  rfidHitTime = millis();
  enableRFID();
} 
```

# ios5 - iOS5、iOS6为什么锁屏时AVAudioPlayer播放停止？

> ID：13904269
> 
> 赞同：4
> 
> 时间：2012-12-16T18:30:03.460
> 
> 标签：ios5, ios6, avaudioplayer, avaudiosession

我一直在为几个 iOS 应用程序使用 AVAudioPlayer，它们在屏幕锁定后都成功播放，直到我的 iPad2 上的 iOS6（或 iOS5），现在它们停止了。这是我设置它的方法，它曾经可以正常工作：

```
 // Registers this class as the delegate of the audio session.
    [[AVAudioSession sharedInstance] setDelegate: self];

    // Use this code instead to allow the app sound to continue to play when the screen is locked.
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: nil];

    UInt32 doSetProperty = 0;
    AudioSessionSetProperty ( kAudioSessionProperty_OverrideCategoryMixWithOthers,
                             sizeof (doSetProperty),
                             &doSetProperty
                             );

    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];

    // Registers the audio route change listener callback function
    AudioSessionAddPropertyListener (
                                     kAudioSessionProperty_AudioRouteChange,
                                     audioRouteChangeListenerCallback,
                                     (__bridge void *)self
                                     );

// Activates the audio session.

    NSError *activationError = nil;
    [[AVAudioSession sharedInstance] setActive: YES error: &activationError];

    // Instantiates the AVAudioPlayer object, initializing it with the sound

    AVAudioPlayer *newPlayer = [[AVAudioPlayer alloc] initWithContentsOfURL: medURL error: nil];
    self.appSoundPlayer = newPlayer;

    // "Preparing to play" attaches to the audio hardware and ensures that playback
    //      starts quickly when the user taps Play
    [appSoundPlayer prepareToPlay];
    [appSoundPlayer setVolume: 0.5];
    [appSoundPlayer setDelegate: self]; 
```

请注意，我将类别设置为 AVAudioSessionCategoryPlayback，这是之前推荐的修复。自从我升级到 iOS6 后，这不起作用——事实证明，这在 iOS5 上也不起作用！

更新：我找到了一个似乎基于这篇文章的答案：[AVAudioPlayer 停止在屏幕锁定时播放，即使类别是 AVAudioSessionCategoryPlayback](https://stackoverflow.com/questions/8085049/avaudioplayer-stops-playing-on-screen-lock-even-though-the-category-is-avaudiose?rq=1)

基本上我进入目标的信息页面并添加了一个新键“必需的背景模式”，为此我添加了一个字符串类型值“应用程序播放音频”。现在它在完全关闭屏幕之前一直穿过轨道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T04:35:57.280

根据这篇文章，我找到了一个似乎有效的答案：

[即使类别是 AVAudioSessionCategoryPlayback，AVAudioPlayer 也会在屏幕锁定时停止播放](https://stackoverflow.com/questions/8085049/avaudioplayer-stops-playing-on-screen-lock-even-though-the-category-is-avaudiose?rq=1)

基本上我进入目标的信息页面并添加了一个新键“必需的背景模式”，为此我添加了一个字符串类型值“应用程序播放音频”。现在它在完全关闭屏幕之前一直穿过轨道。

# apache-flex - 蒙皮滚动条 flex 4

> ID：13904273
> 
> 赞同：0
> 
> 时间：2012-12-16T18:31:06.863
> 
> 标签：apache-flex, scrollbar, skinning, spark-skinning

我需要给滚动条蒙皮。我已经想出了如何更改基色，但是也需要更改滚动条的边框颜色（我需要它更灰色）。

这是代码：

```
<s:WindowedApplication name="scrollerSkinning"
           xmlns:fx="http://ns.adobe.com/mxml/2009"
           xmlns:s="library://ns.adobe.com/flex/spark" 
           width="1024" height="780">

<fx:Style>
    @namespace s "library://ns.adobe.com/flex/spark";

    s|Scroller {
    verticalScrollPolicy: on;
    }

    s|VScrollBar {
    chromeColor: #FFFFFF;           
    }

</fx:Style>

<s:Scroller width="100%" height="100%">
    <s:Group width="100%" height="100%">
        <s:layout>
            <s:VerticalLayout horizontalAlign="center" verticalAlign="middle"/>
        </s:layout>
        <s:Image id="imageGeneralPage" source="@Embed('images/genpage.png')"/>
    </s:Group>
</s:Scroller>

</s:WindowedApplication> 
```

图像 genpage.png 的大小比应用程序窗口大，因此会显示垂直滚动条，我需要对它进行一点皮肤处理，没什么花哨的，只有颜色变化。感谢任何提示，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T18:14:12.777

谢谢你们俩的回复。首先我按照 RIAstar 的建议做了： [MXML: Spark skin a VGroups scrollbar](https://stackoverflow.com/questions/10897386/mxml-spark-skin-a-vgroups-scrollbar/10897705#10897705)

然后复制默认皮肤：

```
<s:Button id="track" top="16" bottom="15" height="54"
          focusEnabled="false" tabEnabled="false"
          skinClass="mySkins.VScrollBarTrackSkin1" /> 
```

在“mySkin”包中并编辑了矩形 SolidColorStroke 颜色属性：

```
<s:Rect top="0" bottom="0" left="0" right="0" minWidth="14" minHeight="14">
    <s:stroke>
        <s:SolidColorStroke color="0x888888" weight="1"/>
    </s:stroke>
    <s:fill>
        <s:SolidColor color="0xCACACA" />
    </s:fill>
</s:Rect> 
```

非常感谢您的帮助。

PS @RIAstar，不知道如何给你荣誉，寿 :(

# scala - Scala Continuations：挂起没有等待/睡眠（）

> ID：13904278
> 
> 赞同：0
> 
> 时间：2012-12-16T18:31:32.960
> 
> 标签：scala, continuations

好吧，我正准备放弃这个。

我想保存延续的状态（使用 shift 完成）。但是，需要注意的是，不应执行重置后的代码。考虑由工作线程执行的延续，不应再处理。延续保存在可以恢复的全局延续列表中，之后的所有其他内容都将被忽略且不应执行。

工作线程必须存活（它不能被中止，或者需要启动一个新线程来销毁）。

```
reset {
  shift {
    (cont:Unit=>Unit) =>
      println(1)
      suspend() // how would I implement something like this?
      cont()
  }

  println(3)
}

println(2) 
```

应该产生

```
1 
```

恢复继续应该会产生

```
3
2 
```

* * *

目前这似乎根本不可能，因为继续仅限于重置的范围。但我想我会给 StackOverflow 一个破解它。

* * *

编辑：基本上......（也许我应该早点说）我想调用一个方法，并暂停执行，直到它准备好给我一个结果，我想通过事件循环来实现这一点，而不是线程同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:22:16.153

我不确定这是否适用于您的情况，但这里是如何混合多个重置的示例：

```
 type Proc = Unit => Unit

  val resume = reset {
    shift { k1: Proc =>
      reset {
        shift { k2: Proc =>
          println(1)
          () => k2(); k1() 
        }        
        println(3)
      }
    }
    println(2)
  }
  // 1

  resume()
  // 3
  // 2 
```

更新：这里是如何使用它的方法：

```
 def f(): Unit @cpsParam[Unit, () => Unit] = {
    println(0)

    shift { k1: Proc =>
      reset {
        shift { k2: Proc =>
          println(1)
          () => k2(); k1()
        }        
        println(2)
      }
    }

    println(3)
  }

  val continue = reset {
    println(-1)
    f()
    println(4)
  }

  println("...")

  continue() 
```

印刷：

```
-1
0
1
...
2
3
4 
```

如果您不想在调用 f 之后暂停所有内容直到重置结束，请执行以下操作：

```
 reset {
    println(-1)
    shift { k: Proc =>
      reset{f()}()
      k()
    }
    println(4)
  }

  println("...") 
```

印刷：

```
-1
0
1
2
3
4
... 
```

# java - 数独发生器

> ID：13904280
> 
> 赞同：1
> 
> 时间：2012-12-16T18:31:40.797
> 
> 标签：java, generator, sudoku

我是一名新手程序员，我正在尝试编写数独生成器。
我知道我的代码的外观不太好。
有人可以告诉我如何改进它以及如何使我的发电机工作吗？

```
import java.util.Random;
public class Main {
    static final int n=9;        //taka pomocnicza stala 

    public static int dodawaj(int x){        //dodawanie liczby                   
        if (x==9)
            x=1;
        else x++;
            return x;   

    }
    public static int losowanieliczby(int x){ //losujemy liczbe
            Random r = new Random();
            x=r.nextInt(n)+1;
            return x;
    }
    public static int sprawdzaniepoziom(int indeks, int tab[]){        //sprawdzenie w poziomie
        int czyprawda=1;
        int licznik=(indeks%n); //ile pol ma sie cofac i sprawdzac                
        if (licznik==0) return czyprawda; //wykonywanie sprawdzenia
        else 
            for (int i=indeks-licznik; i<indeks; i++){
                if (tab[indeks]==tab[i]) {return czyprawda=0;}
            }
        return czyprawda;
    }
    public static int sprawdzaniekomorki(int indeks, int tab[]){ //sprawdzenie komorki
        int czyprawda=1;
        if ((indeks%9)%3==0 && (indeks/9)%3==0) return czyprawda;
        if ((indeks%9)%3==1 && (indeks/9)%3==0){ if (tab[indeks]==tab[indeks-1]) return czyprawda=0;} 
        if ((indeks%9)%3==2 && (indeks/9)%3==0){ if (tab[indeks]==tab[indeks-1] || tab[indeks]==tab[indeks-2]) return czyprawda=0;} 
        if ((indeks%9)%3==0 && (indeks/9)%3==1){ if (tab[indeks]==tab[indeks-9] || tab[indeks]==tab[indeks-8] || tab[indeks]==tab[indeks-7]) return czyprawda=0;} 
        if ((indeks%9)%3==1 && (indeks/9)%3==1){ if (tab[indeks]==tab[indeks-1] || tab[indeks]==tab[indeks-10] || tab[indeks]==tab[indeks-9] || tab[indeks]==tab[indeks-8]) return czyprawda=0;}
        if ((indeks%9)%3==2 && (indeks/9)%3==1){ if (tab[indeks]==tab[indeks-1] || tab[indeks]==tab[indeks-2] || tab[indeks]==tab[indeks-11] || tab[indeks]==tab[indeks-10] || tab[indeks]==tab[indeks-9]) return czyprawda=0;}
        if ((indeks%9)%3==0 && (indeks/9)%3==2){ if (tab[indeks]==tab[indeks-9] || tab[indeks]==tab[indeks-8] || tab[indeks]==tab[indeks-7] || tab[indeks]==tab[indeks-18] || tab[indeks]==tab[indeks-17] || tab[indeks]==tab[indeks-16]) return czyprawda=0;}
        if ((indeks%9)%3==1 && (indeks/9)%3==2){ if (tab[indeks]==tab[indeks-1] ||tab[indeks]==tab[indeks-10] || tab[indeks]==tab[indeks-9] || tab[indeks]==tab[indeks-8] || tab[indeks]==tab[indeks-19] || tab[indeks]==tab[indeks-18] || tab[indeks]==tab[indeks-17]) return czyprawda=0;}
        if ((indeks%9)%3==2 && (indeks/9)%3==2){ if (tab[indeks]==tab[indeks-1] ||tab[indeks]==tab[indeks-2]  ||tab[indeks]==tab[indeks-11] || tab[indeks]==tab[indeks-10] || tab[indeks]==tab[indeks-9] || tab[indeks]==tab[indeks-20] || tab[indeks]==tab[indeks-19] || tab[indeks]==tab[indeks-18]) return czyprawda=0;}
        return czyprawda;
    }
    public static int sprawdzaniepion(int indeks, int tab[]){ //sprawdzenie w poionie
            int czyprawda=1;
            int licznik=indeks/n;        
            int y=indeks;
            if (licznik==0) return czyprawda;                
                    else
                            for (int i=0; i<licznik; i++){        
                                    y=indeks-9;
                                    if (tab[indeks]==tab[y]) {return czyprawda=0;}                                        
                            }
            return czyprawda;
    }

    public static class Sprawdzarka{
        static int y=0;                
        static int czyok=0;
        public static  int[]alggeneruj(int tab[], int indeks){        
            czyok=0;
            while(y!=9){
                if (sprawdzaniepoziom(indeks, tab)==0 || sprawdzaniekomorki(indeks, tab)==0 || sprawdzaniepion(indeks, tab)==0){
                    tab[indeks]=dodawaj(tab[indeks]); 
                    y++;
                    alggeneruj(tab, indeks);
                }else{y=0; czyok=1; return tab;}
            }
            y=0; czyok=0; return tab;

        }
    }

    public static void main(String args[]){                        
        int tab[] = new int [n*n];                        
        int indeks=0;                        
        while (indeks!=81){
            tab[indeks]=losowanieliczby(tab[indeks]);                
            tab=Sprawdzarka.alggeneruj(tab, indeks);                        
            if (Sprawdzarka.czyok==0){                                
                indeks--;
                while (Sprawdzarka.czyok!=1) {tab=Sprawdzarka.alggeneruj(tab, indeks);};
            }
            indeks++;
        }
        for (int j=0; j<81; j++){if (j%9==0)System.out.println();
            System.out.print(tab[j]);}

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:41:39.880

好的，首先：尝试用英语编码。很难知道你做了什么以及错误可能在哪里。

我注意到的另一件事是，`public static int sprawdzaniekomorki`您可以对条件进行分组，因为您每次都重复它们，只是为了添加另一个条件。写起来会更有效率：

```
int returnValue = 1;
if(){
    if(){
        returnValue = x;
    }else{
        returnValue = y;
    }
}
return returnValue; 
```

这也有助于更好地理解代码。所以请在代码中添加英文注释（也许看看 jAutodoc-Plugin for eclipse），我也许能提供帮助:)

# ruby - 将 Faye 与 Sinatra 集成到一个文件中的简单方法？

> ID：13904282
> 
> 赞同：1
> 
> 时间：2012-12-16T18:32:28.203
> 
> 标签：ruby, websocket, sinatra, faye

有没有一种简单的方法可以将 Faye 与 Sinatra 集成到一个文件中，如下所示：

```
# myapp.rb
require 'sinatra'
require 'faye'

get '/' do 
  'Hello world!' 
end

get '/faye_form' do
  erb :form_and_message_list
end

post '/faye_form' do
  erb :form_and_message_list
  # will send messages to faye's channel here.
end

ruby myapp.rb 
```

这样当我运行“ruby myapp.rb”时，我会在单个进程 Faye 和 Sinatra 服务器中运行（我猜它们会在同一个端口上？）？

或者：与此最接近的事情是什么，以最“简约”的方式将 Faye 整合到 Sinatra 中？

更新：修复了示例代码，所以看起来我对将 Faye 和 Sinatra 放在同一路径下不感兴趣；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:14:34.120

改编自[http://faye.jcoglan.com/ruby.html](http://faye.jcoglan.com/ruby.html)

```
# config.ru
require 'sinatra'
require 'faye'
require File.expand_path('../app', __FILE__)

use Faye::RackAdapter, :mount => '/faye', :timeout => 25

run Sinatra::Application 
```

Sinatra 和 Faye 都是机架应用程序，您可能希望它们在不同的路径上运行，例如 Faye 在`/faye`. 你也可以在`/`其他地方安装 faye 和你的 Sinatra 应用程序，尽管我认为你需要创建一个“模块化”Sinatra 应用程序来做到这一点，然后是这样的：

```
run Rack::URLMap.new("/app" => MyApp.new) 
```

在您的示例中，您有点试图将它们都放在同一条路径下，我认为这不会奏效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T22:53:13.957

我已经创建了一个示例，说明 Sinatra 和 Faye 如何可以简单地一起工作。你可以在这里查看： [https ://github.com/eterry1388/sinatra-faye-example](https://github.com/eterry1388/sinatra-faye-example)

你`config.ru`可能看起来像这样：

```
require 'faye'
require 'sinatra'

set :port, 9292
set :faye_client, Faye::Client.new( 'http://localhost:9292/faye' )
set :saved_data, Hash.new( [] )

get '/' do
  # This loads the saved data so if the web page is refreshed
  # or a new client connects, the data persists.
  @saved_data = settings.saved_data
  erb :index
end

post '/' do
  channel = params['channel']
  message = params['message']

  # Send data out to connected clients
  settings.faye_client.publish( channel, message )

  # Save data for future clients
  settings.saved_data[channel] += [message]

  redirect to( '/' )
end

Faye::WebSocket.load_adapter 'thin'
use Faye::RackAdapter, mount: '/faye', timeout: 45, extensions: []
run Sinatra::Application 
```

你`index.erb`可能看起来像这样：

```
<script type="text/javascript" src="http://localhost:9292/faye/client.js"></script>

<script type="text/javascript">
  var faye_client = new Faye.Client( 'http://localhost:9292/faye' );

  faye_client.subscribe( '/blue', function( data ) {
    var div = $( 'ul#blue-messages' ).append( '<li>' + data + '</li>' );
  });

  faye_client.subscribe( '/green', function( data ) {
    var div = $( 'ul#green-messages' ).append( '<li>' + data + '</li>' );
  });

  $( document ).ready( function() {
    $( 'button#submit' ).click( function() {
      $.post('/',
      $( 'form#send-message' ).serialize(),
      function() {
        $( 'textarea#message' ).val( '' );
      });
    });
  });
</script>

<h2>Send message</h2>

<form id="send-message">
  <label for="channel">Channel</label>
  <select name="channel" id="channel" class="form-control">
    <option>/blue</option>
    <option>/green</option>
  </select>
  <label for="message">Message</label>
  <textarea name="message" id="message" class="form-control"></textarea>
</form>
<button id="submit" class="btn btn-success">Send</button>

<h2>Blue messages</h2>
<ul id="blue-messages">
  <%
    # The below block is only used for loading historical
    # saved data, not the Faye data!
  %>
  <% @saved_data['/blue'].each do |message| %>
    <li><%= message %></li>
  <% end %>
</ul>

<h2>Green messages</h2>
<ul id="green-messages">
  <%
    # The below block is only used for loading historical
    # saved data, not the Faye data!
  %>
  <% @saved_data['/green'].each do |message| %>
    <li><%= message %></li>
  <% end %>
</ul> 
```

# node.js - 如何在 Express.js 中使用 cookie 实现“登录记住我”？

> ID：13904291
> 
> 赞同：8
> 
> 时间：2012-12-16T18:33:11.743
> 
> 标签：node.js, cookies, express

感觉很迷茫，不明白 res.cookie 和 req.cookies 有什么区别。更奇怪的是，我发现如果我不设置 cookie：

```
//The value will be:
req.cookies.uid=="undefined"
//instead of:
req.cookies.uid==undefined 
```

为什么 express.js 会这样设计 cookie？

如果我想在用户尝试登录并将 cookie 过期时间设置为无限期或一年时实现“记住我”功能，我应该如何正确使用 cookie？

我发现 cookieParser 只支持这样的东西：

```
express.cookieParser("secret") 
```

并且不支持 expire/maxAge 设置。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T22:49:02.187

`res.cookie`实际上是一个签名为 的函数[`res.cookie(key, value, opts)`](http://expressjs.com/api.html#res.cookie)。您可以使用它来*设置*客户端的 cookie 值/选项。另一方面，[`req.cookies`](http://expressjs.com/api.html#req.cookies)是一个对象，它为您提供客户端的当前 cookie 值。下面是一个使用 cookie 跟踪页面浏览量的示例：

```
var counter = 0;
app.get('/counter', function(req, res) {
    res.cookie('counter', ++counter);

    if (!req.cookies.counter) {
        res.send('This is your first visit!');
    } else {
        res.send('This is visit number '+ req.cookies.counter +'!');
    }
}); 
```

如果您使用[`express.cookieSession()`](http://expressjs.com/api.html#cookieSession)中间件，您可以设置应用程序范围的默认 cookie 属性。比如cookie的`maxAge`属性决定了cookie在未来多少毫秒过期，所以这里我设置为一小时后过期：

```
app.use(express.cookieParser());
app.use(express.cookieSession({ secret: 'secret', cookie: { maxAge: 60 * 60 * 1000 }});
// ... your middleware and routes 
```

否则，您可以通过将选项对象传递给`res.cookie()`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-11T12:00:54.350

我建议您参考以下[问题/答案](https://stackoverflow.com/questions/14049294/change-cookie-expiration-in-express)。您正在寻找的是以下代码。它允许您设置每个 cookie 的最大年龄。

```
if(remember){
    req.session.cookie.maxAge = 2628000000;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-18T03:45:35.230

这是一个执行此操作的快速中间件：[https ://github.com/mdarveau/session-rememberme](https://github.com/mdarveau/session-rememberme)

# python - 根据另一个列表中的值搜索列表

> ID：13904294
> 
> 赞同：-1
> 
> 时间：2012-12-16T18:33:36.130
> 
> 标签：python, regex, list

我有一个名字列表，我试图从字符串列表中提取出来。我不断收到误报，例如部分匹配。另一个需要注意的是，我希望它也可以在适用的情况下获取姓氏。

```
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kimberly','Christmas is here', 'CHRIS']

desired_output = ['Chris Smith', 'Kimberly', 'CHRIS'] 
```

我试过这段代码：

```
[i for e in names for i in target if i.startswith(e)] 
```

这可以预见地返回克里斯史密斯，圣诞节到了，金伯利。

我将如何最好地解决这个问题？使用正则表达式还是可以使用列表推导来完成？性能可能是一个问题，因为实名列表的长度约为 880,000 个。

（蟒蛇2.7）

**编辑**：我已经意识到我在这个例子中的标准是不切实际的，因为在排除圣诞节的同时想要包括 Kimberly 是不可能的要求。为了缓解这个问题，我找到了一个更完整的名单，其中包括变体（包括 Kim 和 Kimberly）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:47:17.027

完全猜测（再次），因为我看不出你怎么不能`Christmas is here`给出任何合理的标准：

这将匹配任何以名称中的单词开头的单词的目标...

```
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kimberly','Christmas is here', 'CHRIS']

import re
matches = [targ for targ in target if any(re.search(r'\b{}'.format(name), targ, re.I) for name in names)]
print matches
# ['Chris Smith', 'Kimberly', 'Christmas is here', 'CHRIS'] 
```

如果你把它改成`\b{}\b' - then you'll get ['Chris Smith', 'CHRIS']`这样你就输了`Kim`......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:56:16.523

这行得通吗？

```
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kimberly','Christmas is here', 'CHRIS']

res = []
for tof in target:
    for name in names:
        if tof.lower().startswith(name.lower()):
            res.append(tof)
            break
print res 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:16:04.660

没有确定的方式来删除匹配“圣诞节在这里”，因为系统可能无法确定圣诞节是一个名字还是其他东西。相反，如果你想加快这个过程，你可以试试这个 O(n) 方法。我没有计时，但绝对比您或建议的解决方案快。

```
from difflib import SequenceMatcher
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kimberly','Christmas is here', 'CHRIS']
def foo(names, target):
    #Create a generator to search the names
    def bar(names, target):
            #which for each target
        for t in target:
                    #finds the matching blocks, a triplet, (i, j, n), and means that a[i:i+n] == b[j:j+n]
            match = SequenceMatcher(None,names, t).get_matching_blocks()[0]
                    #match.size == 0 means no match
                    #and match.b > 0 means match does not happens at the start
            if match.size > 0 and match.b == 0:
                            #and generate the matching target
                yield t
    #Join the names to create a single string
    names = ','.join(names)
    #and call the generator and return a list of the resultant generator
    return list(bar(names, target))

>>> foo(names, target)
['Chris Smith', 'Kimberly', 'Christmas is here', 'CHRIS'] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T19:18:56.870

根据你的描述，我得到的规则是：

1.  忽略此案；
2.  目标词必须以关键字开头。
3.  如果目标词不完全是关键词，那么目标词必须是句子中的唯一词。

试试这个：

```
names = ['Chris', 'Jack', 'Kim']
target = ['Chris Smith', 'I hijacked this thread', 'Kimberly','Christmas is here', 'CHRIS']
desired_output = ['Chris Smith', 'Kimberly', 'CHRIS']

actual_output = []
for key in names:
    for words in target:
        for word in words.split():
            if key.lower() == word.lower():
                actual_output.append(words)
            elif key.lower() == word.lower()[:len(key)] and len(words.split()) == 1:
                actual_output.append(words)
print(actual_output) 
```

它将完全输出**为**您想要的输出（顺便说一句，您确定您真的想要这个吗？）。不要对 3 层循环感到沮丧。如果你有 N 个名字和 M 个句子，并且每个句子中的单词数是有限的，那么这段代码的复杂度`O(mn)`是再好不过了。

# android - 如何在 SD 卡中播放从服务器下载的视频

> ID：13904296
> 
> 赞同：0
> 
> 时间：2012-12-16T18:33:51.943
> 
> 标签：android, video, android-intent, android-mediaplayer

我从服务器下载了一个文件并将其保存在 DOWNLOAD 文件夹中

我如何使用代码从 android 的默认播放器播放它？

与肌动蛋白代码？喜欢这段代码

```
Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "tarsnak.3gp")), "application/vnd.android.package-archive");
            startActivity(intent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:44:13.223

您设置的“类型”错误。使用以下代码。

```
Intent i = new Intent(Intent.ACTION_VIEW);                      
i.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "tarsnak.3gp")),"video/*");
startActivity(i); 
```

# android - 实施 Google Play 结算的智能方法

> ID：13904301
> 
> 赞同：1
> 
> 时间：2012-12-16T18:34:25.130
> 
> 标签：android, in-app-purchase, google-play, in-app-billing

我目前在 Google 市场上发布了一个免费应用程序。

如果用户对其他功能集感兴趣，我想做的是提供解锁其他视图（应用程序窗口）的方法。显然，我想要一个舒适的用户体验，几乎没有“障碍”，如果可以避免的话，不必维护两个独立的代码库和应用程序。因此，理想的方式是让用户单击一个按钮，让他完成应用内计费，然后在成功时“解锁”附加功能。

现在我正在寻找最聪明的方法来做到这一点：

*   我可以简单地添加“应用内结算”来解锁免费应用中的其他视图（如果是这样，如何在发布者控制台上进行设置，我找不到任何选项？）
*   还是我必须发布一个单独的付费产品才能做到这一点（我可以从免费应用程序链接到它）？
*   由于该应用程序的免费版本保存了大约 100 个选项，我希望让支持（付费）用户不必再次浏览所有这些选项。特别是如果我必须提供一个单独的应用程序，它可以访问“别人的配置数据不知何故？

非常欢迎任何其他建议，也许我仍然忘记考虑的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:56:03.227

选项 1 是最好的 IMO。真的没有必要发布单独的产品。您可以使用应用内计费来解锁视图而无需太多麻烦，这对客户来说是一个更顺畅的流程，而不必安装试用应用程序，然后安装“专业”应用程序（或无用的“解锁器”应用程序，如你看到这么多）。更不用说自己轻松多了。

我要做的是在启动时检查库存并为他们是什么“级别”用户设置一个标志。将此保存到首选项以供将来使用，例如，如果没有连接。然后，您可以轻松地在逻辑中使用标志来确定要显示的内容。

谷歌提供的[教程](http://developer.android.com/google/play/billing/billing_integrate.html)起初看起来有点混乱。我建议您阅读它，直到您完全理解后再开始。测试过程可能有点麻烦，至少可以说，所以您在第一次迭代中做得越多，您就越不会扯掉头发让它完美。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T04:01:31.230

就地解锁是最好的方法。如果您保存他们已升级到文件、首选项、数据库等的事实，还可以考虑混淆名称、值，否则任何拥有根手机的用户都可以设置他们喜欢的任何内容并免费获得高级功能等。V3 计费在 Play 商店客户端中为您管理，因此它应该更容易实现。你可能想看看它，虽然它很新而且可能不太稳定。

# grails - 在自定义 Grails 环境中，如何在不重新启动的情况下让代码更改自动更新

> ID：13904304
> 
> 赞同：0
> 
> 时间：2012-12-16T18:34:42.310
> 
> 标签：grails, sts-springsourcetoolsuite, grails-2.0

我有一个自定义的 Grails 环境：

![在此处输入图像描述](../Images/2f253d87365641b26c88705f004c264d.png)

在开发过程中，出于多种原因，我必须使用此自定义环境而不是开发环境。

是否可以在 Config.groovy 中为我的自定义环境设置一些内容，以允许从我的 IDE GGTS（Groovy&Grails Tool Suite）保存的代码更改自动推送到在本地运行的应用程序，就像它在开发中发生的那样。

目前，在我执行自定义运行应用程序并对源代码进行任何更改后，这些更改不会反映在我本地运行的应用程序中。我必须重新启动服务器才能看到更改。

如何让自定义 Grails 环境像开发环境一样执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:13:31.813

您可以使用`--reloading`标志，例如

```
grails -Dgrails.env=custom --reloading run-app 
```

# php - YouTube API 动态加载视频

> ID：13904306
> 
> 赞同：-1
> 
> 时间：2012-12-16T18:35:29.753
> 
> 标签：php, javascript, mysql, youtube-api

-我想在一个页面上加载许多视频，没什么
特别的 -视频 ID 存储在数据库中 -> $slide['message']
-我可以让它只加载一个视频。其他是空白的
-它在循环中，当 kind == youtube 时，它​​会尝试将视频放入。

```
if($slide['kind'] == 'youtube'){
?>
<li>
<div class="info<?php echo $count+1; ?>">
<h1><?php echo $slide['title']; ?></h1>
<div id="ytplayer<?php echo $count+1; ?>" class="youTube-viewer"></div>
<script>
var video = '<?php echo $slide['message']; ?>';
var tag = document.createElement('script');
tag.src = "https://www.youtube.com/player_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
var player;
function onYouTubePlayerAPIReady() {
player = new YT.Player('ytplayer<?php echo $count+1; ?>', {
height: '365',
width: '648',
videoId: video,
playerVars: {
'rel': 0,
'enablejsapi': 1,
}
});
}
</script>
<h2><?php echo $slide['name']; ?></h2>  
</div>
</li>
<?php
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T04:01:34.100

如果整个代码块处于循环中，则由于循环本身而失败。假设您有 4 个要插入的视频……因为您用于加载 YT API javascript 库的代码在循环内，您最终将加载 4 次。而且因为您的回调函数在循环内，您最终将定义它 4 次，每次都覆盖先前的定义以及覆盖引用视频的对象。由于您的回调函数引用了视频，因此只有列表中的最后一个视频具有持续存在的回调函数，所以我猜是插入的视频。

tl；博士——问题不在于 API，而在于编程结构。

也许你可以像这样重新组织你的代码：

```
 // DON'T START YOUR LOOP YET
    <script>
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    function onYouTubePlayerAPIReady() {
    // START YOUR LOOP HERE
<?php
if($slide['kind'] == 'youtube'){
?>
        var player<?php echo $count+1 ?>;
    var video = '<?php echo $slide['message']; ?>';
    player<?php echo $count+1 ?> = new YT.Player('ytplayer<?php echo $count+1; ?>', {
    height: '365',
    width: '648',
    videoId: video,
    playerVars: {
    'rel': 0,
    'enablejsapi': 1,
    }
    }); // CODE CONTINUES ON FROM HERE, EVENTUALLY ENDING THE LOOP, PUTTING IN THE HTML 
```

等等等等。请注意，我承认我的代码无效；相反，我只是指出您的循环应该在 onYouTubePlayerAPIReady 内，并且您需要为每个视频创建一个单独的播放器对象。（好吧，您不需要……您可以采用利用 API 其他方面的不同策略……但考虑到您所拥有的，这是最简单的。）正如上面的评论者指出的那样，如果您创建一个jsfiddle 与您的代码，人们可以更容易地帮助您微调它以将这种方法付诸实践。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T00:52:24.307

使用 jlmcdonald 给我的提示，我让它工作，请参阅下面的小提琴链接 [http://jsfiddle.net/AaGvt/](http://jsfiddle.net/AaGvt/)

```
<script>
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

var player;

function onYouTubeIframeAPIReady() {
  player = new YT.Player('player', {
    height: '250',
    width: '500',
    videoId: 'u1zgFlCw8Aw',
    events: {}
  });

  player = new YT.Player('player2', {
    height: '250',
    width: '500',
    videoId: 'u1zgFlCw8Aw',
    events: {}
  });

  player = new YT.Player('player3', {
    height: '250',
    width: '500',
    videoId: 'u1zgFlCw8Aw',
    events: {}
  });

}

</script>

<div id="player"></div>
<div id="player2"></div>
<div id="player3"></div> 
```

通过 SQL 请求和循环，您可以构建 div

```
<div id="player"></div>
etc... 
```

并创建所需的 javascript

```
 player = new YT.Player('player', {
    height: '250',
    width: '500',
    videoId: 'u1zgFlCw8Aw',
    events: {}
  });
etc... 
```

# context-free-grammar - 加法验证器...不是常规的，但它是否与上下文无关？

> ID：13904309
> 
> 赞同：0
> 
> 时间：2012-12-16T18:35:41.013
> 
> 标签：context-free-grammar, regular-language

我如何证明以下语言是（不是）上下文无关的？它不规则的论点如下。

![在此处输入图像描述](../Images/2eb35746b078158f000cbbe43a70004e.png)

我怀疑这种语言是上下文无关的......我之所以这么认为，是因为 L = {a ^n b ^m c ^({n+m}) | n,m >= 0} 是上下文无关的。可以在以下位置找到证明

[http://cg.scs.carleton.ca/~michiel/TheoryOfComputation/TheoryOfComputation.pdf（pdf](http://cg.scs.carleton.ca/~michiel/TheoryOfComputation/TheoryOfComputation.pdf)中的 p102；文本中的 p94）

证明有点长，并且可以通过使用与 PDA 的等价性来证明它的时间要短得多（即首先将某个符号 n “+” m 次推入堆栈，然后再将其取出 n+m 次。）不管怎样，这个例子让我相信我的原始语言也必须是上下文无关的。然而，我真的不明白我该如何为此争论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:38:01.023

**不**，您的假设不正确！

该语言`L = { x = y + z | where x, y, z are binary integers and x is the sum of y and z}`不是上下文无关语言（CFL） *。*

我试图解释。

首先，考虑以下示例字符串`s`语言`L`。

```
110 = 100 + 10   
1110 = 1100 + 10  
:
111000 = 110000 + 1000 
```

在我的解释中，LHS 是`X`有问题的，而 RHS 是 `Y + Z`。

[**什么是为 CFL 抽引理？**](http://en.wikipedia.org/wiki/Pumping_lemma_for_context-free_languages)
如果语言 L 是上下文无关的，则存在某个整数 p ≥ 1 使得 L 中的任何字符串 s 与 |s| ≥p。（其中 p 是“泵送长度”可以写成

```
s = uvxyz
with substrings u, v, x, y and z, such that
1\. |vxy| ≤ p,
2\. |vy| ≥ 1, and
3\. uv nxy nz is in L for every natural number n. 
```

这个定义 | ≥ 1 和 3。对于每个自然数 n，uv nxy nz 都在 L 中。

**注意：**中间部分`s`，`vxy`不大于抽水长度`p`。（条件一）

**[解决方案]**：

让我们选择一个满足条件 `s`的字符串`L``|s| ≥ p`

我们 `s`是 1 ^m 0 ^q = 1 ^(m-1) 0 ^q + 1^(0 ^q , 其中 `q > p , m-1 > p`)

现在总长度`s`大于 `2m + 2q -1`，`p`当然对于自然数的某些组合，这种不等式是可能的（我不包括长度`+`和`=`保持解释简单）

现在`s`，根据 CFG 的抽取引理，我们的语言已经足够大了。

现在打破它：

u **vxy** z = 1 ^m 0 ^q = 1 ^(m-1) 0 ^q + 1^(0 ^q)

尝试用 L 语言查找`v`并`y`抽取和生成新字符串，但请记住`v`，`y`不要太远`p`（根据条件 1）。

你没有任何选择`v` ，`y`这样你就可以用语言生成新的字符串！

**（第 1 步）：**因为如果您选择增加，`1`那么您不能同时泵送 RHS 和 LHS 的两侧，`=`因为 LHS 上的最后一个`1`位于`q`(>p) 到`1`RHS 的第一个。因此不可能用语言生成新的字符串。

**（步骤 2）：**假设您想`0`再次抽水，它不可能同时增加`0`LHS 和 RHS，因为`0`m-1 (>p) 中的 LHS 上的最后一个膨胀到`0`RHS 上的第一个。

**（第 3 步）：**您不能同时泵送`111...000...` 两侧。，试试这个，你会得到语言 L 的字符串。

在 Pumping Lemma 的规则内尝试其他选项。你不会为`v`and找到正确的选择`y`。

**[回答]**

所以他`s`在 L 中有一个足够大的字符串，使用它我们不能用语言生成新的字符串。它与 Pumping Lemma for CFL 相矛盾，因此给出`L`的不是 CFL。

# javascript - Android webview 延迟渲染

> ID：13904315
> 
> 赞同：12
> 
> 时间：2012-12-16T18:36:11.903
> 
> 标签：javascript, android, webview

我主要用 JS (Mootools) 和 HTML 编写了一个应用程序，该应用程序加载到`webview`我的应用程序中。

它只是一个 html 文件，它通过添加或删除一个`nodisplay`类来显示或隐藏页面的部分（元素）：

```
.nodisplay {display:none}
function showPage1()
{
     $$('.pages').addClass('nodisplay');
     $('page1').removeClass('nodisplay');
} 
```

在android 4（xperia arc和galaxy note 2）中，我看到一个奇怪的延迟渲染，但我不知道旧版本的行为如何。当我隐藏一个元素并显示另一个元素时，它起初看起来是正确的，但在滚动过程中，旧元素的某些部分会出现几毫秒并立即消失。这就像不可见区域的渲染被推迟到绘图时刻。

有时它只是在隐藏和显示过程中奇怪地眨眼。

在PC上的chrome中它没有任何问题。即使在 AVD 中，它也非常清晰，没有任何闪烁。

不知道是不是android的问题，有没有什么办法可以解决？！

我试过了`android:hardwareAccelerated="false"|"true"`，没有效果。而且`ws.enableSmoothTransition()`这也不能解决问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T11:52:36.167

这是我的“Fix your webview app in one stack answer（第一版）”：

**表现**

在 JS 中保留对页面元素的引用以提高性能。`$('.page1')`每次更改页面时都必须解析 DOM，这应该只发生一次。这也适用`$('.pages')`- 它必须扫描和执行多个元素的操作。相反，我建议您保留一个活跃的页面参考。也许它应该看起来像这样：

```
function showPage(page) { // receive active page; page is the jQuery ref to the next page
    activePage.addClass('nodisplay'); // activePage is the jQuery ref to the previous page
    page.removeClass('nodisplay'); // show the page
} 
```

您应该扫描整个应用程序并修复此类问题。它们可能看起来没什么大不了的，但我相信它们可以在资源有限的移动操作系统中发挥作用。

**DOM 管理**

如果您还没有，您绝对应该使用模板。除了帮助您管理应用程序之外，模板还有助于保持 DOM 尽可能轻量：您可以从 0 开始并在需要时动态创建它们，而不是拥有 100 个页面元素。为了获得最佳性能，请确保您只渲染每个模板一次 - 在渲染之前检查页面是否已存在于 DOM 中。要查看这如何影响您的应用，只需 google “浏览器重排”。

这项工作有很多工具。考虑到您当前的设置，您可以选择： http: [//mootools.net/forge/p/template](http://mootools.net/forge/p/template)。以下是一些其他选项： [http](http://mustache.github.com/) : //mustache.github.com/、http: [//underscorejs.org/#template、http](http://underscorejs.org/#template) : [//api.jquery.com/category/plugins/templates/](http://api.jquery.com/category/plugins/templates/)。

**用户界面**

也非常重要但非常广泛。需要记住的一些事项：

*   轻量级、语义化和有效的标记
*   Node.js 应该只管理数据和状态。动画和 DOM 更新会减慢你的速度。利用 css3 友好的环境
*   优化图像并尝试仅将它们用作视觉效果。如果你无法避免这种情况，精灵总是一个好主意。

**调试**

可能很痛苦。我发现 weinre 非常有用：[http](http://people.apache.org/~pmuellr/weinre/docs/latest/) ://people.apache.org/~pmuellr/weinre/docs/latest/ 。块`try ... catch`规则！有助于 logcat 输出的东西：http: [//jsharkey.org/blog/2009/04/22/modifying-the-android-logcat-stream-for-full-color-debugging/](http://jsharkey.org/blog/2009/04/22/modifying-the-android-logcat-stream-for-full-color-debugging/)。

归根结底，webview 仍然是一个恶劣的环境，尽管最近它已成为一种可行的选择，但它需要大量的思考和计划才能“正确”。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-26T05:14:16.290

我对带有 webkit 的 html 了解不多。但是我的一个项目在隐藏和显示滚动效果时遇到了相同的滚动问题。我已经为 webview 启用了硬件加速。

也许你应该[试试这个](http://developer.android.com/guide/topics/graphics/hardware-accel.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-19T11:11:05.963

`.nodisplay {height:0; display:none; }`

在这里工作...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-26T10:59:21.900

Ajay answer gave me a hint of something I used in another project so I could make `WebView` background transparent. Till now I didn't know that code turns off hardware acceleration. I tested that peace of code in this project and there is no late rendering anymore. although scrolling the page is not as smooth as before but it's better than late rendering.

This is the code to fix all of this:

```
if (Build.VERSION.SDK_INT >= 11) wv.setLayerType(WebView.LAYER_TYPE_SOFTWARE, null); 
```

By the way, it's like defining `android:hardwareAccelerated="false"` doesn't affect `webview`!

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T09:06:57.077

也试试这个代码，它对我有很大帮助.. `-webkit-transform: translateZ(0);` 你可以看看我的代码，它对我有帮助.. [jquery toggle (show/hide) based on selector](https://stackoverflow.com/questions/15850236/jquery-toggle-show-hide-based-on-selector/15876663#15876663)

也看看下面的链接; [http://www.html5rocks.com/en/mobile/optimization-and-performance/](http://www.html5rocks.com/en/mobile/optimization-and-performance/)

# python - 用于向后相关字段的 Django 查询集过滤器

> ID：13904316
> 
> 赞同：9
> 
> 时间：2012-12-16T18:36:15.830
> 
> 标签：python, django, django-queryset

如何根据与之相关的模型过滤模型？下面的示例......这可行，但我认为这会两次命中数据库并且非常不雅。有没有办法直接使用查询集来做到这一点？也许不知何故`select_related()`，但一直无法弄清楚那个。我想返回一个`QuerySet`。`Project`

```
from django.db import models

class Person(models.Model):
    pass

class Project(models.Model):
    pass

class Action(models.Model):
    person = models.ForeignKey(Person)
    project = models.ForeignKey(Project)

# Better way to do this?
def projects_by_person(person):
    actions = Action.objects.filter(person=person)
    project_ids = actions.values_list('project')
    return Project.objects.filter(id__in=project_ids) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T18:38:41.323

尝试这个。我还没有测试过，如果你有任何问题，请告诉我

```
#Untested Code
Project.objects.filter(action__person = person) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T18:54:05.887

`Person`和之间存在多对多关系是真的`Project`吗？如果是这样，您可以像这样简化设置：

```
class Person(models.Model):
    projects = models.ManyToManyField('Project')
    name = models.CharField(max_length=100)     # just an example

class Project(models.Model):
    # ... some fields here ... 
```

然后，您可以例如发出以下查询以从名为 John 的人那里获取所有项目：

```
Project.objects.filter(person_set__name="John") 
```

`select_related()`当您有很多查询遵循不同数据库表之间的关系但您不需要它来完成您想要的事情时，使用可以加快查找速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-13T00:50:42.773

你可以在下面找到我的案例：

有老师和课程。教师可以开设多门课程，但课程仅由一名教师完成。

```
class Course(models.Model):
    teacher = models.ForeignKey(Teacher, on_delete=models.CASCADE)
    -------

class Teacher(models.Model):
    name = models.CharField(max_length=50)
    ------ 
```

在个人教师页面中，我想列出该个人教师提供的所有课程。您可以在下面找到相关的视图功能。

```
def teacher(request, teacher_id):
teacher = get_object_or_404(Teacher, pk=teacher_id)
courses = Course.objects.filter(teacher = teacher)

context = {
    'teacher': teacher,
    'courses': courses
} 
```

# java - 从字符串值中读取子字符串

> ID：13904318
> 
> 赞同：1
> 
> 时间：2012-12-16T18:36:42.280
> 
> 标签：java, cmd

我为 Windows 编写了一个 Java 命令行应用程序，并将该 cmd 的结果存储在一个字符串变量中。

我的问题是：是否可以从存储 cmd 输出的变量中获取子字符串？

如果在 cmd 输出字符串变量中找到子字符串，我想放置一个创建操作的语句。

以下是应用程序类的方法：

```
public static void main(String[] args) throws IOException, InterruptedException
{
    runWndCommand("ping 192.168.11.3");
}

public static void runWndCommand(String cmd) throws IOException, InterruptedException
{
    Runtime runtime = Runtime.getRuntime();
    Process p = runtime.exec(new String[] { "cmd.exe", "/C", cmd });

    Scanner reader = new Scanner(p.getInputStream());

     while (reader.hasNext())
     {
        String r=reader.nextLine();
        System.out.println(r);
     }
     p.waitFor();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:41:36.557

A quick example of how to use `contains()` as in your example:

```
String r = reader.nextLine();

System.out.println(r);

if (r.contains("abc")) {
    System.out.println("abc found");
} else {
    System.out.println("abc not found");
} 
```

This will print `abc found` if `"abc"` is a substring within `r`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:25:13.757

考虑 java.util.regex.Pattern 它是一种更灵活的方法来测试字符串是否包含您期望的内容

# python - 分离一个csv进行处理

> ID：13904320
> 
> 赞同：1
> 
> 时间：2012-12-16T18:36:49.567
> 
> 标签：python, csv

我是 Python 新手，很喜欢它。但是，我有一个问题，希望有人可以提供帮助。

我有一串用逗号分隔的值，并希望使用循环依次单独处理每个值。

例如

字符串 = '1,2,3,4,5,6,'

我想取第一个值“1”并在继续下一个值之前对其进行处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:47:08.347

在上述情况下，您可以使用该`split`方法将字符串用逗号分隔，然后遍历结果列表：

```
In [1]: s = '1,2,3,4,5,6,'

In [2]: s.split(',')
Out[2]: ['1', '2', '3', '4', '5', '6', '']

In [3]: for i in s.split(','):
   ...:     if i:
   ...:         print i
   ...:         
   ...:         
1
2
3
4
5
6 
```

`split`返回一个列表，所以我们在这里做的是遍历结果列表，然后检查该字段是否为空；它不处理。我们进行此检查是因为您的字符串以 a 结尾`,`，如您所见，它返回一个空字符串。另请注意，这会拆分**所有**逗号 - 不仅仅是那些分隔值的逗号。

对于上述情况，这应该没问题，但如果您想要对 CSV 信息进行更高级的处理，该`csv`模块提供了许多选项。例如：

```
In [1]: import csv

In [2]: s = '1,2,3,"four, five",6'

In [3]: for item in csv.reader([s]):
   ...:     print item
   ...:     
   ...:     
['1', '2', '3', 'four, five', '6'] 
```

这里我们使用`csv`模块读取字符串，`item`返回的是逗号分隔的字符串，但特殊`"four, five"`值仍视为一个值。但是请注意，在单个字符串的情况下，这将返回由逗号分隔的字符串元素组成的单个列表。正如@JonClements 指出的那样，遍历元素本身的一种干净方法是调用`next`on `csv.reader([s])`，它将返回列表本身：

```
In [1]: import csv

In [2]: s = '1,2,3,"four, five",6'

In [3]: for item in next(csv.reader([s])):
   ...:     print item
   ...:     
   ...:     
1
2
3
four, five
6 
```

# javascript - Ajax 重置一些选择框，但不是全部

> ID：13904323
> 
> 赞同：2
> 
> 时间：2012-12-16T18:37:00.787
> 
> 标签：javascript, ajax

我已经接管了我公司网站的开发。当 card_filter div 中的选择框值发生更改时，将运行以下 javascript。

```
 $("#cards_filter select").change(function(e) {
        var form = $(this);
        var serdata = form.serialize();
        var field_name = $(this).attr("name");
        var field_value = $(this).val();
        //Reset the selectors and keep the one that triggered filter
        $('#cards_filter').find('select').val(function(index,value){
            if($(this).attr("name") == field_name){
                return field_value;
            } else {
                return "-1";                    
            }
        });
      } 
```

我想要它，所以当产品选择选项不会被重置而收藏、艺术家和类别选择框会被重置时。

```
 <form id="cards_filter" method="post" action="" name="cards_filter">
                    <?php echo get_product_selector("products_filter"); ?>
                    <?php echo get_collection_selector("products_filter"); ?>
                    <?php echo get_artist_selector("products_filter"); ?>
                    <?php echo get_category_selector("products_filter"); ?>
            </form> 
```

每个选择器的库中都有以下函数

```
function get_product_selector($form_name) {
if (isset($_SESSION['loggedin']['cur_product'])) {
    $curr = $_SESSION['loggedin']['cur_product'];
} else {
    $curr = -1;
}
$rtn = "";
$rtn .= '<select id="product" name="product">';
$rtn .= '<option value="-1"';
if ($curr == -1) {
    $rtn .= ' selected';
}
$rtn .= '>Select a Product</option>';
$DB = new mysql_db();
$DB->sql_connect();
$q = "SELECT * FROM type order by type_title asc";
$DB->query($q);
if ($DB->get_num_rows()) {
    $results = $DB->fetch_all_rows(MYSQL_ASSOC, NULL);
    foreach ($results as $key => $row) {
        $rtn .= '<option value="' . $row['Type_ID'] . '"';
        if ($curr == $row['Type_ID']) {
            $rtn .= ' selected';
        }
        $rtn .= '>' . trim($row['Type_Title']) . '</option>';
    }
}
$rtn .= '</select>';

return $rtn; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:53:28.193

```
$("#cards_filter select").on('change', function() {
    var serdata = $(this.form).serialize(),
        field_name = this.name,
        field_value = this.value;

    $("#cards_filter select").not('#product').val(function(index, value) {
        return this.name==field_name ? field_value : -1;
    });
}); 
```

不知道我明白了，但是更改事件在选择框上，但是您正在序列化`this`，这不是表单而是选择？此外，它看起来像“产品”选择具有 ID `#product`，所以只需将其从您要更改值的选择器中排除？

# objective-c - 错误的文件系统信息

> ID：13904324
> 
> 赞同：0
> 
> 时间：2012-12-16T18:37:04.640
> 
> 标签：objective-c, macos, cocoa

> **可能重复：**
> [为什么来自 NSFileSystemFreeSize 的值与 iOS 设置中报告的可用大小不同？](https://stackoverflow.com/questions/11717304/why-does-the-value-from-nsfilesystemfreesize-differ-from-the-free-size-reported)

我有这个代码：

```
NSError *error = nil;
NSString *outputDirectory = @"/Users/myuser/Desktop"

NSDictionary *fileSystemAttributes =
 [fileManager attributesOfFileSystemForPath:outputDirectory error:&error];

if (!error) {

    uint64_t freeSpace = (uint64_t)[fileSystemAttributes objectForKey:NSFileSystemFreeSize];

    NSLog(@"Free space in bytes: %lld.",freeSpace);
} 
```

当我执行代码时，它给了我大约 45 TB 的可用空间，这是完全错误的！

我试过了

```
outputDirectory = @"/"; 
```

但它也失败了。

我错过了什么吗？感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T18:49:09.443

从文档中：

> `NSFileSystemFreeSize`文件系统属性字典中的键，其值指示文件系统上的可用空间量。对应的值是一个`NSNumber`对象

您应该将您从中获得的对象分配`objectForKey:`给一个`NSNumber`变量，然后从中提取您想要使用的任何原始值 ( `freeSpace`)。

# mysql - 选择 max(id) 但需要更多行数据

> ID：13904329
> 
> 赞同：0
> 
> 时间：2012-12-16T18:37:54.117
> 
> 标签：mysql, sql

我使用以下内容选择用户添加的最后一个事件

```
SELECT MAX(user_event_id) from user_events where user_id = 63 
```

`event_title`如果我尝试，在这一行还有一列：

```
SELECT MAX(user_event_id), event_title from user_events where user_id = 63 
```

返回的 event_title 与 user_event_id 不对应

是否可以返回最后一个 user_event_id 和 event_title？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T18:45:54.483

此解决方案不需要 ORDER BY，如果表很长，它会运行缓慢。

```
SELECT user_event_id, event_title
FROM user_events
WHERE user_event_id = (SELECT MAX(user_event_id)
                       FROM user_events
                       WHERE user_id = 63)
AND user_id = 63   -- This clause not needed if user_event_id is unique 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:40:10.610

```
SELECT user_event_id, event_title 
from user_events 
where user_id = 63
order by user_event_id desc
limit 1 
```

Most DBMS does not allow to include **event_title** into field list (like author did) because it is not used for grouping and not aggregate function. But mysql does, often with unexpected result.

**UPDATE**: This query returns only one record if there are several records with the same min user_event_id for the user. So it addresses slightly different problem, than solution of Barry Brown - which return all records with equal user_event_id.

# c# - How should test complex objects with static and non modifiable, properties and methods? Your code should fit the test framework that you will use?

> ID：13904338
> 
> 赞同：1
> 
> 时间：2012-12-16T18:38:44.480
> 
> 标签：c#, silverlight, unit-testing, design-patterns, mocking

I have a trouble 'the Project Manager' give me a project (almost a final product) to test it.

It's a big project in Silverlight, that I coded the end part.

Here there a lot of problems (to Testing), the database connections(the data layer, services, session storage, etc) there in closed dll's from another project(which I don't have access to the source code), these dlls contains a Collection class like:

```
public class SomeCollection
{
    public static SomeCollection GetCollectionByName(string name);
} 
```

And there another utility class used to control threads, review errors, the finished/completion of data load, and probably more:

```
public static class BasicUtilities
{
    public static T ExecuteAndFinish(this T baseclass, Action<T> loaded);

    public static T ExecuteAndFinish(this T baseclass, Action<T> loaded, Action<bool> errors);
} 
```

Then in the ViewModel where I need to load the data and populate it in a some kind of control, etc. A common call is like:

```
public class SomeViewModel : ViewModelBase
{
    ...
    SomeCollection.GetCollectionByName("AIdentifier").ExecuteAndFinish
    (collectionLoaded) =>
    {
            //do something with the collection, populate a control, grid, listbox, etc
    });
    ...
} 
```

Then I want to Test SomeViewModel, "clarifying" that I'm newbie in Tests. There a two frameworks that I could use, moq (for mocking special Models, UtilyClass, DataProviders , etc) or Ninject (for DI, I don't know much about it).

An approach could be overload the constructor of SomeViewModel for the test to pass a mocked object to a new Virtual property of type SomeCollection that replace the common call used:

```
public class SomeViewModel : ViewModelBase
{
    ...

    SomeCollectionProperty.GetCollectionByName("AIdentifier").ExecuteAndFinish
    (collectionLoaded) =>
    {
            //do something with the collection, populate a control, grid, listbox, etc
    });

    ...
    public virtual SomeClass SomeCollectionProperty { get; set; }
    ...
} 
```

That don't will work because I can't mock the static method GetCollectionByName of the class SomeCollection, even worse I can't modify that dll's.

With DI seems that will happen something like this, and will not work, I don't know.

Seems that I need obligatorily modify the code of everywhere, but I can't modify the datalayer.dll(grouping it).

What I've to do? Many thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:15:54.963

Please don't consider the following a non-answer. You asked about "testing" not "unit testing."

Unit testing means testing each individual piece in isolation. Its main benefit is it pinpoints the problem code quickly. This is useful in crappy languages like JavaScript that don't provide many compiler checks and rely on testing to identify the most elementary bugs. A unit test is almost like a compiler telling you "error at line 42." It also great during development--you test your piece of code before using it in the application (and feel confident you won't have to debug it later). Its drawbacks are that it is fragile (code changes mean lots of test changes), requires a lot of mucking about with mocks, and that you have to design the code carefully (which is too late for you).

Integration testing tests pieces together. Its main benefit is the testing is more thorough (classes can work great in isolation, but break when actually used together because their design is wrong), and it is much less fragile. The drawback is you may need to set up a whole external environment with databases, servers, etc. for the tests to run. But, again, this lets you test that everything does work together.

I think at this point you should write integration tests. This does not mean sacrificing code coverage. If all the lines of code in your app do real work, then it's perfectly possible to set up integration tests that hit each of them.

Integration tests can exist at various levels (the highest being functional testing--testing the app at its interface to the world), so you can break up the code into chunks and test each chunk rather than the app as a whole.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:59:49.003

**Short answer:**
Use [Typemock Isolator](http://www.typemock.com/) - It can mock everything (private static methods in closed dlls, like `GetCollectionByName` included), but it's a *commercial product*.

**Less short answer:**
Building an application according to the [SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29) principles, practicing TDD and continues refactoring and code improvement, would have solved your problem (or rather you wouldn't have this problem in the first place).
Your units of logic would have been separated, and Moq would allow easy testing for all your interface dependent classes.
Throwing some tests at a near finished (well, shipped) product is hardly ideal, but you can still add some value by adding as many (good) tests as possible.
Typemock Isolator uses the .Net profiler by injecting code at runtime, replacing the real logic by whatever behavior you choose. This allows for testing of privates, statics, sealed classes, and more.

Full Disclosure: I used to work for Typemock, and now use Moq for most projects (well, because it's free).

# ios - 为 iPad 中模态呈现的表单分配代表

> ID：13904342
> 
> 赞同：1
> 
> 时间：2012-12-16T18:39:16.837
> 
> 标签：ios, xcode, uiviewcontroller, delegates

我有一个 iPad 视图，它显示了一个模式表单，它本质上是一个“设置”视图。用户可以从那里转到特定设置。当模式视图被关闭时，我需要能够刷新主 iPad 视图。

`-(void)refreshTable`因此，当模式视图被解除时，我需要一个委托协议来调用。这不会是一个问题，除非当我呈现模态视图时，我需要分配的委托是从呈现的视图“推送”的视图。（截屏）

![在此处输入图像描述](../Images/be0a0c6978e36d15d8ddfee901b30f69.png)

以下是我展示模态表单的方式：我将它封装在 UINavigationController 中，因为它需要推送其他视图。
（我只是在这里分配委托，但是带有协议的视图是从 AddView 推送的）`NewAftpViewController`是具有协议的视图控制器。

```
-(void)presentAddView:(id)sender {

    AddView *avc = [self.storyboard instantiateViewControllerWithIdentifier:@"add"];
    UINavigationController *navcont = [[UINavigationController alloc] initWithRootViewController:avc];
    navcont.modalPresentationStyle = UIModalPresentationFormSheet;
    [self presentViewController:navcont animated:YES completion:NULL];
} 
```

这是我在推送视图中的协议：

```
@protocol RefreshAfterAddingNewAftpDelegate
-(void)refreshTable;
@end

@interface NewAftpViewController : UIViewController

@property (nonatomic, retain) id <RefreshAfterAddingNewAftpDelegate> refreshAfterAddingNewAftpDelegate;

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:08:52.863

我可以看到两种方法来做到这一点。您应该能够在您的帖子中获得对最左侧控制器的引用`[self.navigationController presentingViewController]`——您需要转换`self.navigationController`为任何类。然后在您的 中 `NewAftpViewController`，您可以像这样设置委托：

```
self.delegate = [(cast here)self.navigationController presentingViewController]; 
```

但这似乎违背了使用委托的目的——委托人不应该知道委托是什么类，但在这里你必须明确设置它。您可以直接调用该控制器上的方法，而不是使用委托。

我认为在这种情况下，更好的方法是使用`NSNotification`. 这对我来说似乎更干净，更简单。只需从 发布通知`NewAftpViewController`，并让您的第一个控制器监听它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:55:38.633

在`prepareForSeague`推送下一个 View Controller 的方法中，您可以设置委托：

```
CustomController *controllerToPush = segue.destinationViewController;
controllerToPush.delegate = self.navigationController.parentViewController; 
```

希望这可以帮助！

# python - Looking for Python code to act as a MODBUS slave

> ID：13904343
> 
> 赞同：5
> 
> 时间：2012-12-16T18:39:16.763
> 
> 标签：python, simulator, modbus

Does anyone know of an easy to use Python program that acts as a MODBUS slave? I need to do some integration testing with a MODBUS master. Code can be for serial or TCP.

TY, Fred

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-18T17:24:04.980

试试这个[https://pypi.python.org/pypi/modbus_tk](https://pypi.python.org/pypi/modbus_tk) Modbus 测试套件为 Modbus TCP 和 RTU 提供从属和主控的实现。主要目标是用作测试工具。

# r - 在非常大的数据帧上计算随时间变化的百分比

> ID：13904346
> 
> 赞同：0
> 
> 时间：2012-12-16T18:39:39.197
> 
> 标签：r

我是 R 新手，我的问题是我知道我需要做什么，只是不知道如何在 R 中完成。我有一个来自 Web 服务负载测试的非常大的数据框，大约 20M 观察。我有以下变量：

```
epochtime, uri, cache (hit or miss) 
```

我想我需要做一些事情。我需要对前 50 个不同 URI 的数据帧进行子集化，然后为每个子集中的每个观察值计算该时间点的缓存命中百分比。最终目标是按 URI 随时间变化的缓存命中/未命中百分比图

我已经阅读，并且仍在阅读关于这个主题的各种帖子，但 R 是相当新的，我有一个截止日期。我会很感激我能得到的任何帮助

编辑：

我无法提供准确的数据，但它看起来像这样，我从 Mongo 数据库中检索到的至少 20M 观察结果。时间是一个时代，我们每秒记录数千个，所以时间有很多骗局，这是意料之中的。可能有超过 50 个 uri，我只关心前 50 个。最终结果将是 % TCP_HIT 与 URI 的总出现时间的线图。希望那更清楚

```
time                uri                 action
1355683900          /some/uri           TCP_HIT
1355683900          /some/other/uri     TCP_HIT 
1355683905          /some/other/uri     TCP_MISS
1355683906          /some/uri           TCP_MISS 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:48:13.410

您正在寻找该`aggregate`功能。

调用你的数据框你：

```
> u
        time             uri   action
1 1355683900       /some/uri  TCP_HIT
2 1355683900 /some/other/uri  TCP_HIT
3 1355683905 /some/other/uri TCP_MISS
4 1355683906       /some/uri TCP_MISS 
```

这是子集的命中率（使用因子级别的顺序，默认情况下使用 TCP_HIT=1，TCP_MISS=2 作为字母顺序），间隔为 10 秒：

```
ratio <- function(u) aggregate(u$action ~ u$time %/% 10,
         FUN=function(x) sum((2-as.numeric(x))/length(x))) 
```

现在使用 lapply 得到最终结果：

```
lapply(seq_along(levels(u$uri)),
    function(l) list(uri=levels(u$uri)[l],
     hits=ratio(u[as.numeric(u$uri) == l,])))

[[1]]
[[1]]$uri
[1] "/some/other/uri"

[[1]]$hits
  u$time%/%10 u$action
1   135568390      0.5

[[2]]
[[2]]$uri
[1] "/some/uri"

[[2]]$hits
  u$time%/%10 u$action
1   135568390      0.5 
```

或者在计算比率之前按 URI 过滤数据帧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T20:39:40.337

@MatthewLundberg 的代码是正确的想法。具体来说，您需要使用拆分-应用-组合策略的东西。

不过，鉴于您的数据的大小，我会看看这个`data.table`包。

[您可以在这里](https://stackoverflow.com/a/11562850/636656)直观地看到为什么--data.table 更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:04:56.587

认为分享我对他们问题的绘图部分的解决方案会很有用。

我的 R “noobness”在这里大放异彩，但这就是我想出的。它制作了一个基本的线图。它绘制了实际值，我没有进行任何转换。

```
for ( i in 1:length(h)) {
  name <- unlist(h[[i]][1])  
  dftemp <- as.data.frame(do.call(rbind,h[[i]][2]))
  names(dftemp) <-  c("time", "cache")
  plot(dftemp$time,dftemp$cache, type="o")
  title(main=name)
} 
```

# sqlite - 在 SQLite 中按范围分组

> ID：13904352
> 
> 赞同：0
> 
> 时间：2012-12-16T18:40:09.463
> 
> 标签：sqlite, group-by, range

我有一个包含数字字段的 SQLite 表`field_name`。我需要按此列的范围分组，如下所示：`SELECT CAST(field_name/100 AS INT), COUNT(*) FROM table GROUP BY CAST(field_name/100 AS INT)`，但包括没有值的范围（它们的 COUNT 应该是`0`）。而且我不知道如何执行这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T02:52:19.767

您可以通过使用连接和（虽然很笨拙）一个额外的表来做到这一点。

额外的表将包含您在查询响应中想要一行的每个值（这不仅会填充 `CAST(field_name/100 AS INT)`返回值之间的缺失值，还可以让您扩展它，如果您当前的组是 5、6 , 7 您可以包括 0 到 10。

在其他风格的 SQL 中，您可以进行右连接或完全外连接，然后就可以使用了。唉，[SQLite 不提供这些](http://www.sqlite.org/omitted.html)。

因此，我们将使用交叉连接（将所有内容连接到所有内容）然后过滤。如果您有一个相对较小的数据库或少量组，那么您的状态就很好。如果两者都有大量，这将是一种非常密集的方法（交叉连接结果将具有#ofRowsOfData * #ofGroups 行，所以要小心）。

例子：

表：groups_for_report

```
desired_group
-------------
0
1
2
3
4
5
6 
```

表：数据

```
fieldname    other_field
---------    -----------
250          somestuff
230          someotherstuff
600          stuff 
```

你会使用这样的查询

```
select groups_for_report.desired_group, count(data.fieldname)
from data
cross join groups_for_report
where CAST(fieldname/100.0 AS INT)=desired_group
group by desired_group; 
```

# android - 创建的文件夹显示在设备上，但不显示在 PC 上

> ID：13904357
> 
> 赞同：0
> 
> 时间：2012-12-16T18:40:52.383
> 
> 标签：android

我正在尝试创建一个文件夹，用户可以将内容放入并在应用程序中使用，所以我这样做了

```
File exportDir = new File(Environment.getExternalStorageDirectory()+"/BCAData");
           if (!exportDir.exists()) {
              exportDir.mkdirs();
           }
           File file = new File(exportDir, dbFile.getName());

           file.createNewFile(); 
```

如果我使用文件资源管理器程序，比如`Astro File Manager`我看到文件夹很好，但是当我将设备插入我的 PC 时，文件夹不在那里放东西。

我还需要做些什么才能在 PC 上使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:45:18.737

至少，您需要`MediaStore`更新其索引，例如通过`scanFile()`on ，正如我在[这篇博文](http://commonsware.com/blog/2011/08/31/mtp-external-storage.html)`MediaScannerConnection`中概述的那样。

根据您 PC 的操作系统（并且可能取决于设备），插入设备时您可能仍然看不到更改。看起来 PC 不一定“看到”更改，即使更新了索引，直到您拔下电源并重新插入设备。

# c# - how using checkbox in stimulsoft

> ID：13904365
> 
> 赞同：0
> 
> 时间：2012-12-16T18:41:49.850
> 
> 标签：c#, stimulsoft

how change checked for checkbox in stimulsoft ?

```
Stimulsoft.Report.Components.StiCheckBox CheckBox1 = stiReport1.GetComponents()["CheckBox1"] as Stimulsoft.Report.Components.StiCheckBox;
            if (CheckBox1.CheckedValue == null || ((bool)CheckBox1.CheckedValue) == false)
            {
                CheckBox1.CheckedValue = true;

            }

 else CheckBox1.CheckedValue = false;
 Invalidate(); 
```

the check box does not work, the cannot be checked. Need I set anything else other than "editable"; Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T07:12:14.767

这样您就可以更改报告模板中的复选框值。如果您需要更改呈现报告中的复选框值，您应该以其他方式进行。更详细地描述您的问题，以便给您更准确的答案。

# c++ - Visual Studio 2008 two projects in one solution

> ID：13904373
> 
> 赞同：1
> 
> 时间：2012-12-16T18:43:02.633
> 
> 标签：c++, c, header, projects

I am working in visual studio and i have got two projects in a solution. I want to refer to header file of second project in my main-project. I added second-prj as a reference to my main-prj,. But when i write like

```
#include "Second_Project_File.h" 
```

in my main-prj it gives compile errors :

```
fatal error C1083: Cannot open include file: 'Second_Project_File.h': No such file or directory. 
```

Then i looked at the folders and gave relative path like

```
#include "..\Second_Project_Folder\Second_Project_File.h" 
```

it compiled but gave error :

```
 main-prj.exe not found or not built by the last incremental link; performing full link
 Embedding manifest... 
```

What should i do?

i donot want to work with this kind of including header files

```
#include "..\somefolder\header.file.h" 
```

How to do this in visual studio.

Thanks.

# python - 将 f(x) 转换为 f(*x) 的标准 Python 包装器？

> ID：13904374
> 
> 赞同：3
> 
> 时间：2012-12-16T18:43:19.350
> 
> 标签：python, functools

我不断遇到以下包装器的用例：

```
def asterisk(fn):
   def retfn(x):
      return fn(*x)
   return retfn 
```

标准 Python 2 库中是否有已经做到这一点的东西？我看了看`functools`，但找不到任何东西。

对于上下文，这是一个最近的用例：

```
print map(asterisk(operator.sub), [[-20, 20], [-20, 20], [32, 32]]) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T18:45:05.267

要提供这个：

```
print map(asterisk(operator.sub), [[-20, 20], [-20, 20], [32, 32]]) 
```

你应该使用

```
from itertools import starmap
print starmap(operator.sub, [[-20, 20], [-20, 20], [32, 32]]) 
```

PS 据我所知，Python 中没有此类功能的内置函数。前段时间，我在 Python 邮件列表中谈到缺少“应用”功能，这是更“一般”的问题。我认为，类似的东西`operator.apply(f, args)`对很多情况都有好处。这种函数应用的函数表示也可以排除关于参数传递模型的参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:27:33.047

虽然`starmap`在某些情况下是一个很好的解决方案，但我觉得在这种情况下更具可读性的另一个选项是使用[列表](http://www.youtube.com/watch?v=pShL9DCSIUw)推导：

```
[x - y for x, y in [[-20, 20], [-20, 20], [32, 32]] 
```

我建议您在发现自己使用`operator`模块或`lambda`s 后立即使用列表推导（或生成器表达式），因为它会导致代码更具可读性（并且通常更快）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T20:11:36.733

这不是真的必要，因为对于任何 callable `f`，你可以写：

```
lambda *args: f(*args) 
```

哪个可以满足您的需求。语法比任何库调用都短。只有当您需要具体化转换本身时，您才需要它，但是编写它就像编写一样简单：

```
def starify(f):
    return lambda *args: f(*args) 
```

# php - PHP Sessions - Login Form - Unable to login

> ID：13904377
> 
> 赞同：1
> 
> 时间：2012-12-16T18:43:38.587
> 
> 标签：php, mysql, session, login-script

I have a simple script where a user logs in. I am trying to use sessions, so that a user remains logged in on whatever page he browses through the website.

I have these scripts:

*   index.php - [http://pastebin.com/yqLtqPRC](http://pastebin.com/yqLtqPRC)

*   login.php - [http://pastebin.com/KcQWjfw1](http://pastebin.com/KcQWjfw1)

*   dbConfig.php - [http://pastebin.com/GKyfaJJV](http://pastebin.com/GKyfaJJV)

*   upload.php - [http://pastebin.com/iMrz3WB8](http://pastebin.com/iMrz3WB8)

*   functions.php - [http://pastebin.com/x44KrmxK](http://pastebin.com/x44KrmxK)

If the user logs in or is logged in, 'You are now logged in, $user' is supposed to be shown, but the default 'You are not logged in.' displays throughout the pages.

No error messages are shown whenever I change page or try to log in.

**Latest version of the code can be found here:** [http://www.mediafire.com/?7n6qo3p4gpkaao4](http://www.mediafire.com/?7n6qo3p4gpkaao4)

Can anyone help please?

thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T09:16:05.320

将 放在`session_start()`您需要会话的每个文件的页面顶部，然后就`<?php`可以了。您需要在页面上回显任何实际 html 之前调用此函数。

[在此处](http://in3.php.net/manual/en/function.session-start.php)阅读 php 会话文档

进一步查看您的代码，如果您想限制用户仅在登录后才能查看其他页面，则创建一个名为`logincheck.php`以下内​​容的新文件，并将其包含在每个文件的顶部`require_once("logincheck.php");`。在这种情况下，不要`session_start()`像上面提到的那样再次输入代码。

```
<?php
session_start();
if(isset($_SESSION["username"])){
    $welcomeMsg = "<p align='right'>Welcome, </p>" .$_SESSION["username"];
}else{
    if(basename($_SERVER["PHP_SELF"])=="index.php")
        $welcomeMsg = "You are not logged in";
    else
        header("Location:index.php");//will redirect the user to index page if he has not logged in
}
?> 
```

现在你可以`$welcomeMsg`在页面上任何你想显示错误消息的地方使用和回显它。

希望这有助于回答您的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:11:07.080

表单 action="?op=login" 方法="POST" action="login.php"

为什么在表单中使用两次动作？

action="login.php" 只是必需的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T18:54:41.203

我没有确切地看到您的问题出在哪里，要阅读的代码太多，但是通过查看 2 个文件（前 2 个），我注意到一些可能成为问题的东西： Session_id 应该识别用户。如果您只是输入一个布尔值（真），我可以通过修改我的 HTTP 标头轻松地破坏您的用户保留的网站部分。第二件事是您在回显之前在 login.php 上放置了一个重定向....猜你不会看到任何东西....重定向发生在回显之前。第三件事是您应该明确地散列您获得和存储的密码。当人们可以访问数据库并且无需任何工作就拥有所有人的所有密码时，这真是令人难过。

最后一个建议：尝试将 Session_Start 作为每个文件中的第一条语句......可能就是这样。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T08:26:36.777

您的登录方法的代码结构似乎令人困惑，并且在重定向之前回显所有内容总是一个好主意，否则 httpresponse 会抱怨它。此外，我的建议是您首先打开错误报告，在启用错误报告的情况下进行开发总是一个好主意。您可以在 login.php 中执行此操作，只需将其放在文件的开头即可。 **错误报告（E_ALL）；或将 E_ALL 设置为 1 ini_set('display_errors','On');**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T10:37:05.863

如果用户登录，请在 index.php 文件中创建并包含您的页面。并检查您包含的每个页面。如果未设置用户，则重定向到登录页面。

例子 ：

# 索引.php

```
if(isset($_SESSION['UserId'])){ 
      //make simple function to get the username from user ID
        $dUserName = getUserName($_SESSION['UserId']);
        echo "wellcome".$dUserName;
        echo "<href='logout.php'>Logout</a>";
}
else{
      echo "<href='login.php'>Logout</a>";
}
if(isset($_GET['page'])){
   $includePage = "includes/".$_GET['page'].".php";
}
else{
     $includePage = "includes/login.php";
}
if(isset($includePage)){
  include($includePage);
} 
```

从索引加载示例页面

# 示例.php

```
if(isset($_SESSION['user']) && $_SESSION['user'] != ''){
       //show your page
}
else{
      //redirect to login page
      echo '<SCRIPT language="JavaScript">window.location="index.php?page=login";</SCRIPT>';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T18:53:59.117

我停在了这一点上：

```
redirect('../TASK2PHP/upload.php'); 
```

那是什么功能，它有什么作用？

也许您打算使用[http_redirect](http://php.net/manual/en/function.http-redirect.php)或[header](http://php.net/manual/en/function.header.php)或[HttpResponse::redirect](http://php.net/manual/en/httpresponse.redirect.php) ...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-20T11:41:14.557

我已经编辑了 index.php、login.php 并设置了会话的工作流程。按照代码结构在其他文件中相应地设置会话。下载以下登录形式的rar文件； [https://www.box.com/s/1ie9ilp9jgluvokf6say](https://www.box.com/s/1ie9ilp9jgluvokf6say)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-16T20:33:33.300

干得好。有很多错误。

[http://www.2shared.com/file/A2V_Ztw8/login.html](http://www.2shared.com/file/A2V_Ztw8/login.html)

这至少应该让你开始。一路上也有评论。我没有使用 functions.php 文件，里面没有什么重要的。此外，当您使用它时，相应地更改您的 dbConfig 文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-22T17:32:41.600

TL，博士。但是这里有一篇文章讲授了这类事情的一般设计模式。所有使用 PHP 客户端身份验证的网站都遵循此设计。

[http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/A_2391-PHP-login-logout-and-easy-access-control.html)

您可以复制并粘贴文章中的代码片段。如果您对代码的作用有任何疑问，请在此处发表评论，我会尽力帮助解释。~雷

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-12-26T04:27:45.357

希望这可能会有所帮助：您可以调试会话是否为空。

`session_id()`返回标识当前会话的字符串。如果会话尚未初始化，它将返回一个空字符串。

```
 if(session_id() == '')
 {
      // session has NOT been started
      session_start();
 }
 else
 {
      // session has been started
 } 
```

**和**

[如果为空，则检查 php 中的会话](https://stackoverflow.com/questions/1519818/how-do-check-if-a-php-session-is-empty)

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-12-24T21:21:32.127

我已经修复了文件...

主要问题在`login.php`功能`loginUser`上。

更改此行：

```
$sql = "SELECT * FROM users WHERE Username = '$username' AND Password = '$password'"; 
```

对此：

```
$sql = "SELECT * FROM users WHERE Username = '".$username."' AND Password = '".$password."'"; 
```

第一行的问题是它正在寻找文本'$username'（和'$password'而不是变量`$username`和`$password`

如您所见，解决方案是在变量引用之前和之后关闭字符串'

PS 使用诸如 CodeIgniter 之类的框架来构建您的网站，您将获得巨大的收益，除了可以节省您大量修复此类错误的时间之外，它也更加安全。

如果您需要我上传固定文件，请告诉我。

# actionscript-3 - 尝试在 Flash AS3.0 中使用 BindingUtils

> ID：13904382
> 
> 赞同：2
> 
> 时间：2012-12-16T18:44:29.530
> 
> 标签：actionscript-3, apache-flex, flex4

我无法使此代码在包含 Flex SDK 4.0 的 AS3.0 ( Flash ) 中工作。

```
 import mx.binding.utils.*;

 [Bindable]
 var myValue:int = 0;
 var cw:ChangeWatcher = BindingUtils.bindSetter(myValueChanged, this, "myValue");
 addEventListener( Event.ENTER_FRAME , ef);

 function ef(e:Event):void
 {
    trace("hello",getTimer());
    myValue = getTimer();
 }

 function myValueChanged(o:Object):void
 {
    trace("myValue: " + myValue.toString());
 } 
```

我得到的输出是：

```
myValue: 0
hello 157
hello 168
hello 171
hello 177
....
.... 
```

等等。

但我希望正确的输出应该是：

```
myValue: 0
hello 157
myValue: 157
hello 168
myValue: 168
hello 171
myValue: 171
hello 177
myValue: 177
....
.... 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-23T13:55:12.900

数据绑定仅适用于 Flex。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                       xmlns:s="library://ns.adobe.com/flex/spark"
                       xmlns:mx="library://ns.adobe.com/flex/mx" enterFrame="ef(event)">

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.binding.utils.*;

            [Bindable]
            public var myValue:int = 0;
            private var cw:ChangeWatcher = BindingUtils.bindSetter(myValueChanged, this, "myValue");

            private function ef(e:Event):void
            {
                trace("hello", getTimer());
                myValue = getTimer();
            }

            private function myValueChanged(o:Object):void
            {
                trace("myValue: " + myValue.toString());
            }
        ]]>
    </fx:Script>
</s:WindowedApplication> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-27T20:09:47.840

我不确定 Flash Pro 编译器如何处理这些东西（我总是使用 Flex SDK 中的免费 mxmlc 编译器）。

这对你有用吗？

```
package
{
  import flash.display.Sprite;
  import flash.events.Event;
  import flash.utils.getTimer;
  import mx.binding.utils.BindingUtils;

  public class BindingExample extends Sprite {

    private var model:Model;

    public function BindingExample()
    {
      model = new Model();
      BindingUtils.bindProperty(this, 'spy', model, ['value']);
      addEventListener( Event.ENTER_FRAME , onEnterFrame);
    }

    public function onEnterFrame(e:Event):void
    {
      model.value = getTimer();
    }

    public function set spy(value:int):void
    {
      trace('Bound property set to: ' + value);
    }
  }
}

class Model
{
  [Bindable]
  public var value:int;
} 
```

如果没有，试试这个模型定义：

```
import flash.events.Event;
import flash.events.EventDispatcher;

class Model extends EventDispatcher
{
  private var _value:int;

  [Bindable("valueChange")]
  public function get value():int
  {
    return _value;
  }

  public function set value(value:int):void
  {
    if (_value != value)
    {
      trace('Model property set to: ' + value);
      _value = value;
      dispatchEvent(new Event("valueChange"));
    }
  }
} 
```

如果这不起作用，请为模型尝试此操作：

```
import flash.events.EventDispatcher;
import mx.events.PropertyChangeEvent;
import mx.events.PropertyChangeEventKind;

class Model extends EventDispatcher
{
  private var _value:int;

  [Bindable("propertyChange")]
  public function get value():int
  {
    return _value;
  }

  public function set value(value:int):void
  {
    if (_value != value)
    {
      trace('Model property set to: ' + value);
      var oldValue:int = _value;
      _value = value;
      dispatchEvent(new PropertyChangeEvent(
        PropertyChangeEvent.PROPERTY_CHANGE, false, false,
        PropertyChangeEventKind.UPDATE, "value", oldValue, value, this));
    }
  }
} 
```

或者，也许使用 ObjectProxy：

```
package
{
  import flash.display.Sprite;
  import flash.events.Event;
  import flash.utils.getTimer;
  import mx.binding.utils.BindingUtils;
  import mx.utils.ObjectProxy;

  public class BindingExample extends Sprite {

    private var model:ObjectProxy;

    public function BindingExample()
    {
      model = new ObjectProxy({value: 0});
      BindingUtils.bindProperty(this, 'spy', model, ['value']);
      addEventListener( Event.ENTER_FRAME , onEnterFrame);
    }

    public function onEnterFrame(e:Event):void
    {
      model.value = getTimer();
    }

    public function set spy(value:int):void
    {
      trace('Bound property set to: ' + value);
    }
  }
} 
```

使用 mxmlc 编译时，上述所有操作都可以正常工作。我会避免使用 ObjectProxy，因为它是最不安全的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-23T14:30:34.997

你写了：

> 我无法使此代码在包含 Flex SDK 4.0 的 AS3.0 ( Flash ) 中工作。

我认为这意味着您已经在使用 mxmlc 编译器，这是 Bindable 元标记工作所必需的。

据我了解，将 Bindable 元标记添加到变量是一种侦听 a 调度的方法`PropertyChangeEvent`：

[Flex 4.6 API 文档](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cc5.html)状态：

> [在变量上使用 Bindable 时] Flex 编译器会自动为该属性生成一个名为 propertyChange、类型为 PropertyChangeEvent 的事件。

基本上是一种更简单的方法`myValue.addEventListener(...)`

所以我们想成为 Bindable 的变量必须是 extends`EventDispatcher`或 implements的类型`IEventDispatcher`。原语不是这种情况，`int`它是您尝试使其可绑定的变量的类型。`Bindable`上一个是`int`行不通的。

为了使其工作，您可以将`int`变量包装在`BindableInteger`实现`IEventDispatcher`. 另一种选择是使用[ObjectProxy](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/ObjectProxy.html)，它允许您添加 EventListener 并使对象可绑定，即使它没有扩展`EventDispatcher`或实现`IEventDispatcher`。

另外，请注意，您需要将变量设为公开、受保护或私有，才能使 Bindable 工作。

[关于使用可绑定元标记的](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7cc5.html)Flex 4.6 文档：

> 您可以在定义为变量的公共、受保护或私有属性之前使用 [Bindable] 元数据标记 (...) [b]，以使该特定属性支持绑定。

这将不起作用：

```
[Bindable] var myValue:int = 0; 
```

但这将：

```
[Bindable] public var myValue:int = o; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T12:16:32.457

绑定适用于类属性，不适用于局部变量，因此您需要创建类：

```
package
{
import flash.display.Sprite;
import flash.events.Event;
import flash.utils.getTimer;

import mx.binding.utils.BindingUtils;
import mx.binding.utils.ChangeWatcher;

public class astest extends Sprite
{

    [Bindable]
    public var myValue:int = 0;

    public function astest()
    {
        var cw:ChangeWatcher = BindingUtils.bindSetter(myValueChanged, this, "myValue");
        addEventListener( Event.ENTER_FRAME , ef);
    }

    protected function ef(e:Event):void
    {
        trace("hello",getTimer());
        myValue = getTimer();
    }

    protected function myValueChanged(o:Object):void
    {
        trace("myValue: " + myValue.toString());
    }
}
} 
```

# c# - 具体的正则表达式任务：

> ID：13904386
> 
> 赞同：-1
> 
> 时间：2012-12-16T18:45:03.770
> 
> 标签：c#, regex, string

我有来自 Dictionary 的 30000 多个字符串列表，并且必须找到匹配项。

（我必须找到与 0 到 1000 之间的数字匹配的所有单词，并且......每个数字都用字母表示）

```
vowelsAndH = {a,á,e,é,ě,i,í,o,ó,u,ú,ů,y,ý,h}; 
one = {t,d,ť,ď};
two = {n,ň};
... 
```

对于 121 号考试：

```
{vowelsAndH+}{one}{vowelsAndH+}{two}{vowelsAndH+}{one}{vowelsAndH+}

word "eděnautin" is Matched for 121
word "dnautin" is Matched for 121
word "dnaunin" is not Matched for 121, but is Matched for 122 
```

所以问题是，如何得到这个

```
{vowelsAndH+}{one}{vowelsAndH+}{two}{vowelsAndH+}{one}{vowelsAndH+} 
```

为正则表达式格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T18:59:03.453

我是这样看的：

1.  您将所有定义数字的符号转储到一个 OR 匹配中（对于 1 和 2：[tdťďnň]）
2.  收到结果后，您`switch`在匹配项上的操作并找出匹配的字母属于哪个数字

可能的正则表达式：

```
 [aáeéěiíoóuúůyýh]*(?:([tdťďnň])[aáeéěiíoóuúůyýh]*)+ 
```

# sql - T-SQL 多重性多对五或更多/多（0...* -> 5...*）

> ID：13904389
> 
> 赞同：3
> 
> 时间：2012-12-16T18:45:11.283
> 
> 标签：sql, sql-server, tsql

如果我们在 UML 中有这样的东西：

> > | 冠军 | ---------------> | 团队 |
> > 
> > 多重性：* --------> 5...*

每个冠军有5个或更多的球队，我们如何在T-SQL中控制这“五个或更多的球队”？

由于我们有一个多对多的关系，我们将有来自双方的 id 的中间表（例如：tbl_champ_team）。但是如何控制每个冠军应该有5个或更多的球队呢？

创建表时进行一些检查？一些触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T18:55:28.580

简短的回答是，不，你不能通过检查约束来做到这一点。是的，您可以将触发器应用于相交表，以确保插入的行数为 5 或更多，尽管我强烈反对这一点。

在我看来，您所追求的是业务规则的实现，而不是数据规则，如果是这样，那么应该在那里进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:55:51.410

一种方法（有点复杂）是有一个单独的表来实现这个约束。它将具有冠军 PK 列，其中 TeamA、TeamB、TeamC、TeamD 和 TeamE 作为不可为空的 FK，以及另一个表，其中包含您在问题中设想的所有团队。将 {Championship 和 TeamA} 之间的 5 个 FK 约束添加到多对多表中，并将 {Championship, TeamB} 到同一个表中，等等。

那么你不能在不填充五个球队属性的情况下创造一个冠军。这本身仍然不是 100% 准确的，因为它可以让您与两支或更多支球队作为同一支球队进入冠军赛，我想你不会想要的……我想不出一个消除这种可能性的方法。

# vb.net - 内存地址读/写 VB 过程

> ID：13904391
> 
> 赞同：0
> 
> 时间：2012-12-16T18:45:34.493
> 
> 标签：vb.net, process, memory-address

当我运行此代码块时，它会运行，但是当我尝试将正在运行的进程内存地址的字符串值更改为其他时，它会给我一个错误：

```
"System.IndexoutofRangeException Index was outside the Bounds of the Array" 
```

这些是功能：

```
 <DllImport("kernel32.dll", SetLastError:=True)> _
Public Shared Function WriteProcessMemory(ByVal hProcess As IntPtr, ByVal lpBaseAddress As  IntPtr, ByVal lpBuffer As Byte(), ByVal nSize As System.UInt32, <Out()> ByRef lpNumberOfBytesWritten As Int32) As Boolean
End Function
Public Shared Function StrToByteArray(ByVal str As String) As Byte()
    Dim encoding As New System.Text.ASCIIEncoding()
    Return encoding.GetBytes(str)
End Function
Public Shared Function Poke(ByVal proc As Process, ByVal target As Integer, ByVal data As Byte()) As Boolean
    Return WriteProcessMemory(proc.Handle, New IntPtr(target), data, data.Length, 0)
End Function 
```

这是执行更改的内存地址值字符串的按钮。

```
Private Sub saveButton_Click(sender As Object, e As EventArgs) Handles saveButton.Click
    Try
        Dim p As Process() = Process.GetProcessesByName(AppName.Text)
        Dim Written As Boolean = False

        Written = Poke(p(0), &HB8FDCC, StrToByteArray(TxtVal.Text))

        If Written = True Then

            MsgBox("WriteProcessMemory Sucess!", MsgBoxStyle.OkOnly, "Poke Memory Status")

        ElseIf Written = False Then

            MsgBox("WriteProcessMemory Failed!", MsgBoxStyle.OkOnly, "Poke Memory Status")

        End If

    Catch ex As Exception

        MsgBox(ex.ToString)

    End Try
End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T09:03:29.977

不要以进程的名称添加程序/应用程序的扩展名，在您的情况下，Chrome AppName.Text 必须是“Chrome”而不是“Chrome.exe”，祝你好运。

# javascript - 新的 Brunch-Ember 应用程序中未定义内容属性

> ID：13904399
> 
> 赞同：0
> 
> 时间：2012-12-16T18:46:52.357
> 
> 标签：javascript, ember.js, brunch

我正在使用早午餐骨架开始新的 Ember 应用程序：[Brunch with Ember](https://github.com/icholy/ember-brunch)。我创建了一个简单的 ApplicationController 并将 content 属性设置为一个空对象：

```
var App = require('app');

App.ApplicationController = Em.ObjectController.extend({
    content: { }
}); 
```

但是当我在浏览器中加载应用程序时， App.ApplicationController.content 的 content 属性是未定义的。App.ApplicationController 上也没有定义 set 和 pushObject 函数。有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:23:46.327

你刚刚在那里定义了你的 Controller 类。您需要**创建 Class 的实例**。

通常你这样做：

```
App.initialize(); 
```

在这种情况下，Ember 将为您实例化控制器。你会在路径 App.router.applicationController 中找到你的控制器。

但是您也可以手动实例化控制器，例如：

```
App.yourController = App.ApplicationController.create(); 
```

# git - 在 msysgit 中运行 MinGW/MSYS 工具

> ID：13904400
> 
> 赞同：3
> 
> 时间：2012-12-16T18:47:01.197
> 
> 标签：git, bash, mingw, msysgit, msys

我在 Windows 上为 Git 使用[msysgit](http://code.google.com/p/msysgit/)已经有一段时间了，但我现在第一次尝试设置 MinGW。我安装了 MSYS ，`mingw-get`因为它有一些未与 msysgit ( , 等) 打包的实用`make`程序`xz`。

我有一些在MSYS shell 中运行 Git 的[线程](https://stackoverflow.com/questions/5885393/using-msysgit-from-mingw-and-vice-versa)，但我更喜欢使用 msysgit shell，因为它将主目录映射到我的 Windows 并在提示符上显示 Git 信息。为了从我的 msysgit shell 访问 MinGW 和 MSYS 程序，我将以下内容添加到`.bashrc`：

```
export PATH=$PATH:/c/MinGW/bin/:/c/MinGW/msys/1.0/bin/ 
```

但是，运行任何 MSYS 实用程序都会导致提示挂起，并以 Ctrl-C 结束它们会使该实用程序崩溃，并显示“ *x*已停止工作对话框”。如果我尝试在 MSYS shell 或 中运行 utils `cmd.exe`，它们可以正常工作。

我必须用 msysigit 更改一些配置吗？可能出了什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T00:17:29.943

我建议您只需将“Program Files (x86)\Git\cmd”目录添加到您的 msys shell 的路径中，并像在 Windows cmd 提示符下一样使用它。这会将 git 包装器可执行文件添加到路径中，因此 git 可以在运行时调整其环境并避免干扰您的其他 msys 环境。仅添加 cmd 子目录意味着 Git for Windows 仅添加两个命令 - git 和 gitk。在 Git for Windows 中，有一个修改过的 msys，它可能与标准的 msys utils 不兼容。使用 cmd 包装器应该避免冲突。

# windows-runtime - 后台传输 API 是否使用 BITS？

> ID：13904401
> 
> 赞同：1
> 
> 时间：2012-12-16T18:47:03.843
> 
> 标签：windows-runtime, microsoft-bits

Windows 运行时的后台传输 API 具有与 BITS 几乎相同的功能。我假设微软在这个 API 中重用了 BITS（BITS 实现得很好，并且已经是 COM）。有人可以澄清吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-18T07:48:54.520

您可以通过停止 BITS 服务来证明它不*使用BITS。*即使 BITS 未运行，商店应用程序启动的后台传输也会继续运行。

此外，您可以查看正在执行传输的进程 - BITS 位于`svchost.exe`Windows 使用将多个服务分组为单个进程的进程之一中，但 Windows 应用商店应用程序后台传输使用不同的进程，`BackgroundTransferHost.exe`.

最后，如果您使用 BITS 管理工具，例如 PowerShell BITS 命令，当您列出活动的 BITS 作业时，Windows 应用商店应用程序后台传输不会显示。

所以看起来很有结论性：Windows 运行时后台传输 API 不依赖于 BITS。

# php - 在 joomla 2.5 中将 recaptcha 添加到 php 邮件表单

> ID：13904405
> 
> 赞同：1
> 
> 时间：2012-12-16T18:47:18.523
> 
> 标签：php, forms, joomla, captcha

我正在尝试将 ReCaptcha 添加到我创建的用于共享内容的邮件表单中，但由于某种原因，当我点击“提交”时验证码没有得到验证，这意味着即使你在验证码中输入了错误的文本，该表格仍将发送电子邮件。我正在使用 joomla 2.5.8，recaptcha 插件已启用（尽管我认为它没有被初始化，因为我自己添加了 recaptchalib.php 并且我在邮件表单代码中包含了 publickey 和 privatekey 的引用）。

任何帮助将不胜感激！谢谢！！这是代码：

```
<?php require_once('recaptchalib.php'); ?>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script language="javascript" type="text/javascript">

              function validateEmail($email)
   {
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
        if( !emailReg.test( $email ) )
        {
           return false;
        }
        else
      {
           return true;
        }
   }

   function validateForm()
   {
      var form = document.mailForm;
      if (form.recipient.value == "" || validateEmail(form.recipient.value)==false)
      {
         alert("bad email");
         return false;
      }
      if (form.subject.value == "")
      {
         alert("please enter subject");
         return false;
      }
      if (form.content.value == "")
      {
         alert("please enter massage");
         return false;
      }
      <?php 
      $privatekey = "privatekey";  
      $resp = recaptcha_check_answer($privatekey,$_SERVER["REMOTE_ADDR"],$_POST["recaptcha_challenge_field"],$_POST["recaptcha_response_field"]);   ?>                 
      if (!$resp->is_valid) 
      {    
      alert("try again");
         return false;
       }
      return true;
   }      
</script>
<?php 
   if($this->success=='1')
   {   
      echo JText::_('MAIL_SEND_SUCCESSFULLY');
   }   
   elseif($this->success=='0')
   {
      echo JText::_('MAIL_SEND_FAILED');
   }   
?>
<div id="SendMail">
   <h2>send mail</h2>   
   <form action="index.php" name="mailForm" method="post" onsubmit="return validateForm()">

   <table>
      <tr>
         <td><label><?php echo JText::_('MAIL_SEND_TO'); ?>:</label></td>
         <td><input type="text" name="recipient" size="25" value=""/></td>
      </tr>
      <tr>
         <td><label><?php echo JText::_('MAIL_SUBJECT'); ?>:</label></td>
         <td><input type="text" name="subject" size="25" value=""/></td>
      </tr>
      <tr>
         <td><label><?php echo JText::_('MAIL_MESSAGE'); ?>:</label></td>
         <td>
            <textarea name="content" rows="10" cols="40"></textarea>
            <br/><?php echo JText::_('MAIL_DESC'); ?>
         </td>
            <tr>
            <td><?php $publickey = "public key"; ?></td>
            <td><?php echo recaptcha_get_html($publickey);?></td>
            </tr>
   </table>      
   <p>
      <input type="hidden" name="controller" value="mail" />
      <input type="hidden" name="task" value="sendMail" />   
      <div class="button-mail">
         <input style="width: 50px;height: 25px;" type="submit" name="submit" value="<?php echo JText::_('SEND'); ?>"/>
         <a href="javascript: void window.close()" title="Close Window"><span style="color: #444;
   border: #D5D5D5 1px solid; padding: 4px; width: 50px;height: 25px;"><?php echo JText::_('CLOSE'); ?></span></a>
      </div>
   </p>
   </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:48:40.607

您的代码有错误。请看这条线

```
if (!$resp->is_valid) 
{    
    alert("try again");
    return false;
} 
```

PHP在哪里`$resp->is_valid`，但作为 JS 执行。

1.  正确的代码是

    ```
    if (!<php (int)$resp->is_valid;?>) 
    {    
        alert("try again");
        return false;
    } 
    ```

    但它无论如何都不会工作，因为2。

2.  您无法在 Javascript 验证中检查 recaptcha 代码。应该检查服务器端。或者，如果您想使用 javascript 检查它应该使用对服务器的 AJAX 请求进行检查。那是因为你编码

    ```
    <?php 
    $privatekey = "privatekey";  
    $resp = recaptcha_check_answer($privatekey,$_SERVER["REMOTE_ADDR"],$_POST["recaptcha_challenge_field"],$_POST["recaptcha_response_field"]);   ?> 
    ```

    甚至在用户输入验证码之前在表单加载时执行。

# c++ - 抽象类和指针

> ID：13904406
> 
> 赞同：1
> 
> 时间：2012-12-16T18:47:24.920
> 
> 标签：c++, class, pointers, polymorphism, virtual

我有一堂课

// 我想要一个抽象类。

```
class Foo
{
    public:
    virtual void bar()=0;
}; 
```

// 我希望在整个程序中都使用这个抽象类 :) 来享受多态性。

```
class EatFoo
{
public:
    vector<Foo> fooV; // not working
    vector<Foo *> fooPV;
}; 
```

我收到无法实例化抽象类的编译时错误。

是的，这是真的，但我真的很想或者我想学习：

如何让其他程序员“必须 - 必须”实现某些功能，而我不想在我的程序中使用指针。[我不知道为什么 ？但我有那种直觉..]

是否有一些模式或可以帮助我的东西。使用java，它是所有引用，是的，它是可行的。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:49:54.520

如果你想要容器项的多态行为，你别无选择，只能使用指针。为了让您的生活尽可能轻松，您应该使用智能指针，例如`shared_ptr<Foo>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:50:22.347

你的直觉是对的……部分……

你不应该使用**原始指针**：

```
class EatFoo
{
public:
    vector<shared_ptr<Foo> > fooV;
}; 
```

在 C++ 中没有办法拥有抽象对象的集合。

# c# - 使用具有多个后代的 Linq 解析 XML

> ID：13904414
> 
> 赞同：3
> 
> 时间：2012-12-16T18:47:56.230
> 
> 标签：c#, xml, linq, silverlight, windows-phone-7.1

我在解析多个 XML 字段时遇到问题

这是 XML 的风格：

```
<students>
  <student>
    <student_id>1</student_id>
    <student_name>Mike</student_name>
    <subjects>
      <subject>
        <school_subject>History</school_subject>
      </subject>
      <subject>
        <school_subject>Maths</school_subject>
      </subject>
      <subject>
        <school_subject>English</school_subject>
      </subject>
    </subjects>
  </student>
  <student>
    ...
  </student>
</students> 
```

我可以将它解析为像 student_id 和 student_name 这样的简单字段，但是当同一个字段有多个重复时，我不知道该怎么做：/ 这是我的解析源代码。

我做了两节课：

*   包含学校科目名称的科目
*   包含 id 和 name 以及班级主题列表的学生。

现在源代码：

```
List<Student> L1 = new List<Student>();

XDocument doc = XDocument.Load(s);
var q = from b in doc.Descendants("student")
select new
{
    s_id = (string)b.Element("student_id"),
    s_name = (string)b.Element("student_name"),
    s_subject = (Subject)b.Elements("school_subject")
};
foreach (var p in q)
{
    L1.Add(new Student() { id = p.s_id, name = p.s_name, subject = p.s_subject });
}
listBox1.ItemsSource = L1; 
```

感谢您的阅读，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:14:29.670

根据您的 xml 学生可以有几个科目。因此，您需要收集科目作为学生的财产：

```
public class Student
{
    public int Id { get; set; }
    public string Name { get; set; }
    public List<Subject> Subjects { get; set; }
}

public class Subject
{
    public string Name { get; set; }
} 
```

这里是解析。要填写获取学生的科目，您需要进行子查询：

```
XDocument xdoc = XDocument.Load(s);
IEnumerable<Student> students =
    from s in xdoc.Descendants("student")
    select new Student()
    {
        Id = (int)s.Element("student_id"), // you can cast to int
        Name = (string)s.Element("student_name"),
        Subjects = s.Element("subjects") // here goes sub query
                    .Elements("subject")
                    .Select(subj => new Subject() { 
                       Name = (string)subj.Element("school_subject") 
                    }).ToList()
    }; 
```

顺便说一句，我认为您可以使用简单的字符串来保存主题名称-您实际上并不需要为此上课。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:54:53.383

因为您在 xml 中有多个主题`s_subject`应该`list`是`Subject`

```
doc.Elements("Student").Select(
x=>
    s_id = (string)x.Element("student_id"),
    s_name = (string)x.Element("student_name"),
    s_subject = x.Element("subjects").Elements("subject")
                 .Select(s=>s.Element("school_subject").Value)
                 .ToList<Subject>()
); 
```

# yii - Yii CGridView 多个dataProvider

> ID：13904419
> 
> 赞同：0
> 
> 时间：2012-12-16T18:49:23.613
> 
> 标签：yii

是否可以在 CGridView 的“dataProvider”属性中添加两个或多个参数？例子：

```
$dataProvider=new CActiveDataProvider('Gallery', array(
'criteria'=>array(
    'condition'=>'type=1',
),));

$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'gallery-grid',
    'dataProvider' => array($dataProvider, $model->search()),
    'filter' => $model)); 
```

我想将 $dataProvider 和 $model->search() 放在同一个过滤器中，可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:04:42.230

我猜不是，但您可能可以使用另一种方式：

```
$dataProvider = $model->search();
$dataProvider->criteria->addCondition('type=1');
$this->widget('zii.widgets.grid.CGridView', array(
    'id' => 'gallery-grid',
    'dataProvider' => $dataProvider,
    'filter' => $model
)); 
```

# shell - 使用 Cshell 脚本检查文件的扩展名

> ID：13904421
> 
> 赞同：3
> 
> 时间：2012-12-16T18:49:31.037
> 
> 标签：shell, csh

我需要将文件作为参数发送到我的 C Shell 脚本。现在我需要检查它是扩展名为 .xml 的文件还是包含扩展名为 .xml 的文件列表的文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T04:10:21.930

我没有办法对此进行测试，但我过去使用 csh 的经验告诉我类似

```
 #!/bin/csh

 file="$1"

 switch ("$file")
     case *.xml:
         echo "file matches .xml"
      breaksw
     default:
         if ( grep '\.xml$' "$file" )  then
            echo "xml file extensions found in $file"
         endif
     breaksw
  endswitch 
```

应该管用。

IHTH

# svn - Tortoise SVN Merge daimond 结构问题

> ID：13904424
> 
> 赞同：1
> 
> 时间：2012-12-16T18:49:55.843
> 
> 标签：svn, tortoisesvn, branching-and-merging

我正在使用 Tortoise SVN 并在将两个分支的代码合并到树干时面临树冲突。

我从主干创建了两个分支，例如`devA`和`devB`。`devA`现在，在创建分支之前，必须在主干上签入一些必须使用分支完成的代码。现在完成开发后，我将`devA`代码合并到主干，但是当我尝试将分支 devB 代码合并到主干时，我在两个分支共有的文件上遇到树冲突。

我正在使用`Reintegrate a branch`选项。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:01:28.157

在您添加已添加的文件时，在您的特定情况下会出现树冲突。

您只需要检查合并的文件是否具有正确的内容，并使用选项`TortoiseSVN`>将文件标记为已解决`Mark As Resolved`。

# c# - 带有特定程序的 Windows 应用商店应用程序如何启动文件？

> ID：13904428
> 
> 赞同：0
> 
> 时间：2012-12-16T18:50:35.060
> 
> 标签：c#, windows-8, windows-store-apps

Windows 应用商店应用程序如何在`Windows.System.Launcher.LaunchFileAsync`不让用户看到应用程序选择器的情况下使用特定程序（具有给定 .exe 路径）启动文件（可能使用 ）？

提前致谢。

# css - 如何让margin均匀塌陷？

> ID：13904430
> 
> 赞同：1
> 
> 时间：2012-12-16T18:50:37.247
> 
> 标签：css, margins

我希望我的边距在身体开始变窄之前完全折叠，就像在[http://www.skysports.com/](http://www.skysports.com/)上的那样，只有当边距完全折叠时，身体才能变得更窄。多年来，我一直在我的 css 中使用 px、em 和 % 并且无法使其工作。这是我到目前为止所拥有的。

```
html { background-image:url(images/webBackground.jpg);
    background-size:100% 100%;
    background-repeat:no-repeat;
    background-attachment:fixed;
    height:100%; width:100%;
    }

body { background:black;
    height:100%; width:75%;
    margin:0 12.5% 0 12.5%;
    }

#container { width: 100%; height: 100%; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:08:36.870

这是我认为您所要求的一个[jsfiddle 示例。](http://jsfiddle.net/nAcS4/)

**HTML**

```
<div id="wrapper">

    <div id="main-content">

        <div class="push"></div>

    </div>

</div> 
```

**CSS**

```
body, html {
  margin: 0px;
  padding: 0px;  
}

#wrapper {
  min-height: 100%;
  height: auto !important;
  height: 100%;
  width: 500px; /* specific resolution width */
  margin: 0px auto 0px;    
}

#main-content {
  background-color: red;   
}

#main-content .push {
  height: 500px;   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:08:44.413

对不起，我没有完全理解你的问题。假设您需要您的图像中心对齐屏幕的任何宽度。

```
body
{background: url(images/webBackground.jpg) no-repeat fixed center 0 black;} 
```

# c# - PointerPressed：左键还是右键？

> ID：13904432
> 
> 赞同：10
> 
> 时间：2012-12-16T18:50:49.837
> 
> 标签：c#, windows-8, microsoft-metro

如何在 Metro 风格 C# 应用程序中获取按下指针的类型（鼠标左键或鼠标右键）？我没有`MouseLeftButtonDown` 在任何 Metro 风格 UI 元素中找到事件处理程序。我应该改用`PointerPressed`事件，但我不知道如何获取按下了哪个按钮。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-16T20:03:20.637

PointerPressed 足以处理鼠标按钮：

```
void MainPage_PointerPressed(object sender, PointerRoutedEventArgs e)
{
    // Check for input device
    if (e.Pointer.PointerDeviceType == Windows.Devices.Input.PointerDeviceType.Mouse)
    {
        var properties = e.GetCurrentPoint(this).Properties;
        if (properties.IsLeftButtonPressed)
        {
            // Left button pressed
        }
        else if (properties.IsRightButtonPressed)
        {
            // Right button pressed
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T19:56:03.283

您可以使用以下事件来确定使用的指针和按下的按钮。

```
private void Target_PointerMoved(object sender, PointerRoutedEventArgs e)
{
    Windows.UI.Xaml.Input.Pointer ptr = e.Pointer;
    Windows.UI.Input.PointerPoint ptrPt = e.GetCurrentPoint(Target);

    if (ptrPt.Properties.IsLeftButtonPressed)
    {
        //Do stuff
    }
    if (ptrPt.Properties.IsRightButtonPressed)
    {
        //Do stuff
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-12T22:42:48.057

处理 UWP 项目和以前的答案（如 Properties.IsLeftButtonPressed/IsRightButtonPressed）对我不起作用。这些值总是错误的。我在调试期间意识到 Properties.PointerUpdateKind 正在根据鼠标按钮进行更改。这是对我有用的结果：

```
var properties = e.GetCurrentPoint(this).Properties;
if (properties.PointerUpdateKind == Windows.UI.Input.PointerUpdateKind.LeftButtonReleased)
{

}
else if (properties.PointerUpdateKind == Windows.UI.Input.PointerUpdateKind.RightButtonReleased)
{

}
else if (properties.PointerUpdateKind == Windows.UI.Input.PointerUpdateKind.MiddleButtonReleased)
{

} 
```

PointerUpdateKind 中有更多选项，例如示例中的 ButtonPressed 品种和 XButton 品种，例如 XButton1Pressed、XButton2Released 等。

# android - Android - 服务 - 使用强制停止时未调用 onDestroy() 方法

> ID：13904434
> 
> 赞同：12
> 
> 时间：2012-12-16T18:51:00.803
> 
> 标签：android

当我使用 Running Services 选项卡下的停止按钮**停止**服务时，会调用 onDestroy() 方法。

但是当我**强制停止**应用程序时，永远不会调用 onDestroy()。

对此有何解释？

或者在强制停止时触发 onDestroy() 的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T18:57:23.683

当您强制停止应用程序时，就会发生这种情况 - 它是强制停止。没有警告，没有回调，只是停止了。整个进程被杀死，并且没有任何正在运行的组件（活动、服务等）被发出任何警告。

绝对**不能**保证`onDestroy()`会被调用。将任何应用程序关键代码移入`onPause()`，在大多数情况下都会调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T18:57:37.590

从[文档](http://developer.android.com/guide/components/activities.html)中：

> 一旦活动被创建，`onPause()`是在进程被杀死之前保证被调用的最后一个方法......`onStop()`并且`onDestroy()`可能不会被调用。因此，您应该使用`onPause()`将关键的持久性数据（例如用户编辑）写入存储。

重申这一点，强制停止并不是为了优雅地退出应用程序。如果您有每次应用程序完成时必须运行的关键代码，您需要在`onPause()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-03T06:49:38.950

当应用程序强制停止时，会调用 Process.killProcess() 但不会调用 onDestroy() 函数。通过这个链接。你会有一些想法。 [Android强制停止回调到应用程序？](https://stackoverflow.com/questions/11160897/android-force-stop-callback-to-application)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-02-20T12:35:06.130

我假设您有要在`onDestroy()`引用您的行时执行的代码：

> “或者可能是在强制停止时触发 onDestroy() 的解决方案？”

`Service`方法[public void onTaskRemoved(Intent rootIntent)](https://developer.android.com/reference/android/app/Service.html#onTaskRemoved%28android.content.Intent%29)是您正在寻找的方法，它将在应用程序被强制停止时调用。

# macos - 如何安装 Dfu-util

> ID：13904436
> 
> 赞同：2
> 
> 时间：2012-12-16T18:51:33.907
> 
> 标签：macos, config, dfu

我一直在尝试在我的 MAC OS X 10.7.5 上安装 dfu-util。我按照本网站中的说明进行操作：

> [http://forum.seeedstudio.com/viewtopic.php?f=12&t=1364](http://forum.seeedstudio.com/viewtopic.php?f=12&t=1364)

一切似乎都正常工作，但是当我运行命令时：

```
./configure --libdir=/opt/local/lib --includedir=/opt/local/include 
```

出现此错误：

> ```
> ./configure: line 3770: syntax error near unexpected token `USB,'
> ./configure: line 3770: `PKG_CHECK_MODULES(USB, libusb >= 0.1.4,,' 
> ```

有谁知道如何修理它？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-07T14:22:49.493

您应该安装 pkgconfig（然后在 ./configure 之前重新运行 autogen.sh）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-09T16:36:54.330

如果有人希望在 2015 年在 OSX 上使用 Brew 安装 DFU-UTIL，您会发现 dfu-util.gnumonks.org 站点自 2014 年 11 月以来一直处于关闭状态。这是解决方法...

由于 Brew 正在寻找 0.7 版本，并且 gnumonks.org 的同事在 sourceforge 上建立了镜像，您可以从[http://dfu-util.sourceforge.net/releases下载“dfu-util-0.7.ta​​r.gz” /](http://dfu-util.sourceforge.net/releases/)并将其放入您的 /Library/Caches/Homebrew 目录中。然后，执行命令“brew install dfu-util”将按预期工作！

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:12:42.300

你在尝试安装之前运行过这个吗？

```
sudo port install libusb libusb-compat git-core 
```

你有安装 gcc/xcode 吗？

# javascript - javascript/jquery 修改查询字符串参数

> ID：13904437
> 
> 赞同：1
> 
> 时间：2012-12-16T18:51:48.587
> 
> 标签：javascript, jquery, url

我需要添加或者，如果它已经存在，修改 URL 查询字符串的一个参数。

例如，如果我想设置`param`为 value `newvalue`，

`http://example.org/file.php`应该导致`http://example.org/file.php?param=newvalue`

`http://example.org/file.php?abc=def`应该导致`http://example.org/file.php?abc=def&param=newvalue`

`http://example.org/file.php?param=oldValue`应该导致`http://example.org/file.php?param=newvalue`

我知道[URI.js](http://medialize.github.com/URI.js/)库，但它的最小可能大小 21kb（非压缩）对我来说太大了。

我正在寻找一个小型库来修改 url-query-strings，或者为我做这件事的一小段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:57:23.347

这是所有 JS 中的一个解决方案，尽管将其作为一个组合 js/php 脚本是有意义的

```
var myParam = "foo"
var oldValue = "bar"
var newValue = "fighters"

var queryPairs = window.location.search.substr(1).split("&");
var queryParams = [];
queryPairs.forEach(function(element, index, array){
    var pair = element.split("=");
    queryParams[pair[0]] = pair[1];
})

if (queryParams[myParam] == oldValue){
    queryParams[myParam] = newValue;
    queryPairs = [];
    for (var index in queryParams){
        queryPairs.push(index + "=" + queryParams[index]);
    }
    var baseUrl = window.location.href.split("?")[0];
    var newSearch = queryPairs.join("&")
    var newUrl = baseUrl + "?" + newSearch
    window.location = newUrl;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T19:17:17.423

我的（相当长的）版本：

```
if (location.search.match(/([?&]param)=([^&#]*)/g)) {
    location.search = location.search.replace(/([?&]param)=([^&#]*)/g, '$1=' + newvalue);
} else if (location.search.match(/([&][^&#]*)=/g)) {
    location.search = location.search + "&param=" + newvalue;
} else {
    location.search = location.search + "?param=" + newvalue;
} 
```

# go - 在 Go 程序中捆绑静态资源的最佳方式是什么？

> ID：13904441
> 
> 赞同：121
> 
> 时间：2012-12-16T18:52:32.910
> 
> 标签：go, go

我正在使用 Go 开发一个小型 Web 应用程序，该应用程序旨在用作开发人员机器上的工具，以帮助调试他们的应用程序/Web 服务。该程序的界面是一个网页，其中不仅包括 HTML，还包括一些 JavaScript（用于功能）、图像和 CSS（用于样式）。我打算开源这个应用程序，所以用户应该能够简单地运行一个 Makefile，所有的资源都会去他们需要去的地方。但是，我还希望能够简单地分发具有尽可能少的文件/依赖项的可执行文件。**有没有一种将 HTML/CSS/JS 与可执行文件捆绑在一起的好方法，这样用户只需下载并担心一个文件？**

* * *

现在，在我的应用程序中，提供静态文件看起来有点像这样：

```
// called via http.ListenAndServe
func switchboard(w http.ResponseWriter, r *http.Request) {

    // snipped dynamic routing...

    // look for static resource
    uri := r.URL.RequestURI()
    if fp, err := os.Open("static" + uri); err == nil {
        defer fp.Close()
        staticHandler(w, r, fp)
        return
    }

    // snipped blackhole route
} 
```

所以这很简单：如果请求的文件存在于我的静态目录中，则调用处理程序，它只是打开文件并尝试`Content-Type`在服务之前设置好。我的想法是没有理由这需要基于真实的文件系统：如果有已编译的资源，我可以简单地通过请求 URI 索引它们并照此提供它们。

如果没有好的方法可以做到这一点，或者我试图这样做是在吠叫错误的树，请告诉我。我只是认为最终用户会希望管理尽可能少的文件。

^(如果有比[go](/questions/tagged/go "显示标记为“开始”的问题")更合适的标签，请随时添加它们或让我知道。)

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2015-01-21T15:51:02.997

从 Go 1.16 开始，go 工具支持将静态文件直接嵌入到可执行二进制文件中。

您必须导入[`embed`](https://golang.org/pkg/embed/)包，并使用该`//go:embed`指令来标记要嵌入哪些文件以及要将它们存储到哪个变量中。

`hello.txt`将文件嵌入可执行文件的3 种方法：

```
import "embed"

//go:embed hello.txt
var s string
print(s)

//go:embed hello.txt
var b []byte
print(string(b))

//go:embed hello.txt
var f embed.FS
data, _ := f.ReadFile("hello.txt")
print(string(data)) 
```

使用[`embed.FS`](https://golang.org/pkg/embed/#FS)变量的类型，您甚至可以将多个文件包含到一个变量中，该变量将提供一个简单的文件系统接口：

```
// content holds our static web server content.
//go:embed image/* template/*
//go:embed html/index.html
var content embed.FS 
```

[`net/http`](https://golang.org/pkg/net/http/)支持从以下使用值提供`embed.FS`文件[`http.FS()`](https://golang.org/pkg/net/http/#FS)：

```
http.Handle("/static/", http.StripPrefix("/static/", http.FileServer(http.FS(content)))) 
```

模板包还可以使用[`text/template.ParseFS()`](https://golang.org/pkg/text/template/#ParseFS),[`html/template.ParseFS()`](https://golang.org/pkg/text/template/#ParseFS)函数和[`text/template.Template.ParseFS()`](https://golang.org/pkg/text/template/#Template.ParseFS),[`html/template.Template.ParseFS()`](https://golang.org/pkg/html/template/#Template.ParseFS)方法解析模板：

```
template.ParseFS(content, "*.tmpl") 
```

以下答案列出了您的旧选项（在 Go 1.16 之前）。

* * *

## 嵌入文本文件

如果我们谈论的是文本文件，它们可以很容易地嵌入到源代码本身中。只需使用反引号来声明`string`文字，如下所示：

```
const html = `
<html>
<body>Example embedded HTML content.</body>
</html>
`

// Sending it:
w.Write([]byte(html))  // w is an io.Writer 
```

**优化提示：**

由于大多数时候您只需要将资源写入一个[`io.Writer`](http://golang.org/pkg/io/#Writer)，您还可以存储`[]byte`转换的结果：

```
var html = []byte(`
<html><body>Example...</body></html>
`)

// Sending it:
w.Write(html)  // w is an io.Writer 
```

唯一需要注意的是原始字符串文字不能包含反引号字符 (`)。原始字符串文字不能包含序列（与解释的字符串文字不同），因此如果要嵌入的文本确实包含反引号，则必须断开原始字符串文字并将反引号连接为解释字符串文字，如下例所示：

```
var html = `<p>This is a back quote followed by a dot: ` + "`" + `.</p>` 
```

性能不受影响，因为这些连接将由编译器执行。

## 嵌入二进制文件

### 存储为字节片

对于二进制文件（例如图像），最紧凑（关于生成的本机二进制文件）和最有效的方法是将文件的内容作为`[]byte`源代码中的 a 。这可以由[go-bindata](https://github.com/jteeuwen/go-bindata)等第三方工具/库生成。

如果您不想为此使用 3rd 方库，这里有一个简单的代码片段，它读取二进制文件，并输出声明类型变量的 Go 源代码，该变量`[]byte`将使用文件的确切内容进行初始化：

```
imgdata, err := ioutil.ReadFile("someimage.png")
if err != nil {
    panic(err)
}

fmt.Print("var imgdata = []byte{")
for i, v := range imgdata {
    if i > 0 {
        fmt.Print(", ")
    }
    fmt.Print(v)
}
fmt.Println("}") 
```

[如果文件包含从 0 到 16 的字节的示例输出（在Go Playground](https://play.golang.org/p/MGJHAinQUs)上尝试）：

```
var imgdata = []byte{0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15} 
```

### 存储为 base64`string`

如果文件不是“太大”（大多数图像/图标都符合条件），那么还有其他可行的选项。您可以将文件的内容转换为 Base64`string`并将其存储在您的源代码中。在应用程序启动时 ( `func init()`) 或需要时，您可以将其解码为原始`[]byte`内容。[`encoding/base64`](http://golang.org/pkg/encoding/base64/)Go 在包中对 Base64 编码有很好的支持。

将（二进制）文件转换为 base64`string`非常简单：

```
data, err := ioutil.ReadFile("someimage.png")
if err != nil {
    panic(err)
}
fmt.Println(base64.StdEncoding.EncodeToString(data)) 
```

将结果 base64 字符串存储在您的源代码中，例如作为`const`.

解码它只是一个函数调用：

```
const imgBase64 = "<insert base64 string here>"

data, err := base64.StdEncoding.DecodeString(imgBase64) // data is of type []byte 
```

### 按引用存储`string`

比存储为 base64 更有效，但在源代码中可能更长的是存储二进制数据的带*引号*的字符串文字。[`strconv.Quote()`](https://golang.org/pkg/strconv/#Quote)我们可以使用以下函数获取任何字符串的引号形式：

```
data, err := ioutil.ReadFile("someimage.png")
if err != nil {
    panic(err)
}
fmt.Println(strconv.Quote(string(data)) 
```

对于包含从 0 到 64 的值的二进制数据，这是输出的样子（在[Go Playground](https://play.golang.org/p/RRpyZqzwfI)上试试）：

`"\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?"`

（请注意，它会`strconv.Quote()`附加并预先添加一个引号。）

您可以在源代码中直接使用这个带引号的字符串，例如：

```
const imgdata = "\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?" 
```

即用即用，无需解码；取消引用是由 Go 编译器在编译时完成的。

如果您需要它，您也可以将其存储为字节片：

```
var imgdata = []byte("\x00\x01\x02\x03\x04\x05\x06\a\b\t\n\v\f\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?") 
```

* * *

## 回答 #2

> 赞同：80
> 
> 时间：2012-12-16T19:01:26.887

go-bindata 包看起来可能是您感兴趣的。

[https://github.com/go-bindata/go-bindata](https://github.com/go-bindata/go-bindata)

它将允许您将任何静态文件转换为可嵌入代码中的函数调用，并在调用时返回文件内容的字节切片。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2021-04-22T07:21:12.980

## 捆绑 React 应用程序

例如，您有一个来自 react 的构建输出，如下所示：

```
build/favicon.ico
build/index.html
build/asset-manifest.json
build/static/css/**
build/static/js/**
build/manifest.json 
```

当您`go:embed`这样使用时，它将提供`http://localhost:port/build/index.html`不是我们想要的内容（意外`/build`）。

```
//go:embed build/*
var static embed.FS

// ...
http.Handle("/", http.FileServer(http.FS(static))) 
```

事实上，我们需要再采取一步来使其按预期工作，方法是使用`fs.Sub`：

```
package main

import (
    "embed"
    "io/fs"
    "log"
    "net/http"
)

//go:embed build/*
var static embed.FS

func main() {
    contentStatic, _ := fs.Sub(static, "build")
    http.Handle("/", http.FileServer(http.FS(contentStatic)))
    log.Fatal(http.ListenAndServe("localhost:8080", nil))
} 
```

现在，`http://localhost:8080`应该按预期为您的 Web 应用程序提供服务。

归功于[阿米特米塔尔](https://www.akmittal.dev/posts/go-embed-files/)。

*注意：`go:embed`需要 1.16 或更高版本。*

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-14T06:23:39.670

还有一些奇特的方式——我使用[maven 插件](https://github.com/raydac/mvn-golang)来构建 GoLang 项目，它允许使用[JCP 预处理器](https://github.com/raydac/java-comment-preprocessor)将二进制块和文本文件嵌入到源代码中。在这种情况下，代码如下所示（[可以在此处找到一些示例](https://github.com/raydac/mvn-golang/tree/master/mvn-golang-examples/mvn-golang-example-preprocessing)）

```
var imageArray = []uint8{/*$binfile("./image.png","uint8[]")$*/} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-08-24T08:21:04.287

作为`go-bindata`另一个答案中提到的流行替代方案，[mjibson/esc](https://godoc.org/github.com/mjibson/esc)还嵌入了任意文件，但特别方便地处理目录树。

# d3.js - 为什么 d3.box 中的每个箱线图都放在自己的 svg 元素中？

> ID：13904442
> 
> 赞同：0
> 
> 时间：2012-12-16T18:52:35.187
> 
> 标签：d3.js

冒着问一个愚蠢问题的风险，为什么`d3.box`（[代码](https://github.com/d3/d3-plugins/blob/master/box/box.js)和[演示](http://bl.ocks.org/4061502)）中的每个箱线图都放在自己的 svg 元素中？（更一般地说，放置在它自己的容器元素中。）或者换一种说法，为什么`d3.box`只渲染图表的一个组件，而不是图表的所有组件？（假设每个箱线图可能共享一个共同的 y 轴。）

在此先感谢您的任何建议。我敢肯定这有一个合理的理由。我只是不清楚！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T23:19:17.337

从技术上讲，没有理由将所有内容都放入自己的 SVG 中。我不知道为什么在示例中这样做，但通常您会将所有内容都放在一个 SVG 中，并使用`svg:g`元素对元素进行分组。

大多数`d3`组件通常只做一件事的原因是更容易组合它们。例如，如果`d3.box`渲染`x`和`y`轴（或仅其中一个），则必须为不需要轴、不同轴布局或实施者设计方式未涵盖的任何其他人提供选项。

如果您正在寻找更高级的东西来处理所有事情，请查看[nvd3.js](http://nvd3.org/)。

# django - 为什么models.User允许用户名中的无效字符？

> ID：13904445
> 
> 赞同：6
> 
> 时间：2012-12-16T18:53:03.890
> 
> 标签：django, django-models

问这个我觉得很愚蠢，但无论如何我都会这样做。[Django 文档“Django 中的用户身份验证”](https://docs.djangoproject.com/en/1.4/topics/auth/) （v. 1.4）中的“用户”API 参考表明，用户名只能包含字母、数字和字符 @、+、.、- 和 _。但是我可以进入 Python shell 并执行以下操作：

```
>>> from django.contrib.auth.models import User
>>> u = User.objects.create_user('joe#') 
```

为什么这不会引发异常？我查看了 ../contrib/auth/models.py 中的源代码，它似乎没有标记无效字符。这里发生了什么？看来，如果您想捕获错误的用户名，则必须通过表单验证来完成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:08:48.533

我猜开发人员希望为应用程序开发人员提供灵活性，以便我们可以存储特殊符号。因此，不是在模型级别验证输入，而是在表单中完成。您可以在 django.contrib.auth.form.UserCreationForm 中找到该表单

片段在这里：

您可以在用户名字段上使用正则表达式查看验证。

```
class UserCreationForm(forms.ModelForm):
    """
    A form that creates a user, with no privileges, from the given username and
    password.
    """
    error_messages = {
        'duplicate_username': _("A user with that username already exists."),
        'password_mismatch': _("The two password fields didn't match."),
    }
    username = forms.RegexField(label=_("Username"), max_length=30,
        regex=r'^[\w.@+-]+$',
        help_text = _("Required. 30 characters or fewer. Letters, digits and "
                      "@/./+/-/_ only."),
        error_messages = {
            'invalid': _("This value may contain only letters, numbers and "
                         "@/./+/-/_ characters.")})
    password1 = forms.CharField(label=_("Password"),
        widget=forms.PasswordInput)
    password2 = forms.CharField(label=_("Password confirmation"),
        widget=forms.PasswordInput,
        help_text = _("Enter the same password as above, for verification.")) 
```

# javascript - 使用 Javascript 使用表单插入图像

> ID：13904452
> 
> 赞同：0
> 
> 时间：2012-12-16T18:53:40.623
> 
> 标签：javascript

我正在使用这个 javascript 函数来使用表单将文本插入到设置的 div 中。

我希望能够将图像 url 放入表单并使用此功能将 url 插入 img 标签而不是 div。我有什么办法可以做到这一点？

Javascript：

```
function header01(){

    var head01v = document.getElementById('head01i').value;

    document.getElementById('head01c').innerHTML = head01v;
    document.getElementById('head01c').style.display = "block";

    return false;
} 
```

我尝试使用建议的解决方案，输入适当的字段

```
 function image01(){

        var img = document.createElement('img');
        img.src = document.getElementById('imag01i').value;
        document.getElementById('imag01c').appendChild(img);

        return false;
    } 
```

但无济于事，任何额外的帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:00:56.280

将我的评论扩展到答案：

这并不难。首先，检查你是否有一个有效的 URL（更多信息在[这里](http://www.roseindia.net/answers/viewqa/JavaScriptQuestions/25837-javascript-regex-validate-url.html)- 首先点击[谷歌](https://www.google.nl/search?q=js+validate+url&ie=UTF-8&oe=UTF-8&hl=nl&client=safari)），接下来，这样做：

```
var img = document.createElement('img');
img.src = [the validated URL you obtained from the form];
document.getElementById('theElementYouWantToInsertTheImgIn').appendChild(img); 
```

# android - 从系统图库中获取图像。为什么不工作？

> ID：13904453
> 
> 赞同：0
> 
> 时间：2012-12-16T18:53:43.620
> 
> 标签：android

我制作了一个程序，用户可以在其中显示他想在这个应用程序中加载哪张图片。当用户想要加载图片时，他可以选择他想要使用什么样的文件资源管理器：

![在此处输入图像描述](../Images/2cee5102e8f2c342bbc3a142cdcaac1c.png)

一切正常，但如果我选择“图库”并标记我的图像，它就不起作用。只有当我选择“画廊”时才会发生这种情况。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    if(resultCode == RESULT_OK){
                 String path = data.getData().getPath();
                 try {
        loadedimage = BitmapFactory.decodeFile(sciezka_z_obrazem);
          }
                  catch (Exception e) {
                   }
            } [...] 
```

从图库中选择图像后，loadedimage 为空。当我使用 Dropbox 或“我的文件”时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T20:49:58.807

你应该试试这个。
文件文件路径=新文件（路径）；
然后使用
Uri.fromFile(filePath)
这将设置可以打开的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:49:34.850

我想你应该使用

```
Uri mUri = data.getData(); 
```

在 Gallery 的情况下，返回的文件格式为 content:// 而不是 file://

所以你应该使用 uri 而不是在 uri 上执行 getPath

编辑：使用 uri 解码如下

```
InputStream is = getContentResolver().openInputStream(uri);

loadedimage = BitmapFactory.decodeStream(is) 
```

# css - 蓝图 CSS 网格布局异常

> ID：13904454
> 
> 赞同：0
> 
> 时间：2012-12-16T18:53:46.237
> 
> 标签：css, html, blueprint

我正在为我的网站项目调整蓝图 CSS 框架，但我注意到蓝图没有遵循它自己的一些规则。我浏览了他们网站上的教程并尝试用谷歌搜索解决方案，但没有任何效果。

我正在尝试像这样设置页面布局：

```
-----------------------------------------------------------------------
| Image                     (header)             950px                |
-----------------------------------------------------------------------
|Navbar |             Body (560px)                            | Ad Bar|
|       |                                                     |(190px)|
| 200px |                                                     |       |
|       |                                                     |       |
   ...                       .....                                ...
|       |                                                     |       |
-----------------------------------------------------------------------
|                          (footer)            950px                  |
----------------------------------------------------------------------- 
```

我希望正文两侧有一个导航栏（带有右边框）和广告栏（带有左边框），它们的高度扩展以匹配正文的高度（缩放取决于其中的内容量） )，以及一个简单地固定在底部的页脚。到目前为止，标题和正文完美呈现。但是，导航栏不跨越身体的高度。此外，广告栏不会出现在正文的右侧，而是环绕到最左侧（导航栏左侧和正文下方）。页脚似乎也不与网站的其余部分对齐，因为我将它写成居中对齐文本，但它偏离中心（稍微向左）。

这是我的 HTML5 代码：

```
<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />

        <link rel="stylesheet" href="blueprint/screen.css" type="text/css" media="screen, projection" />
        <link rel="stylesheet" href="blueprint/print.css" type="text/css" media="print" /> 
        <!--[if lt IE 8]>
            <link rel="stylesheet" href="blueprint/ie.css" type="text/css" media="screen, projection" />
        <![endif]-->

        <!--Import fancy-type plugin. -->
        <link rel="stylesheet" href="blueprint/plugins/fancy-type/screen.css" type="text/css" media="screen, projection" />

        <link rel="stylesheet" href="style.css" type="text/css" media="screen, projection" />     

        <title>My Web Site Home</title>
    </head>

    <body>
        <div class="container">
            <!------------------------------------------------------->
            <div id="header" class="span-24" style="background: #F68712">
                <h1 id="siteheader"><img src="logo.png" alt="Logo" id="header-image" /></h1>
            </div>
            <div id="sidebar" class="span-5">
                <div class="span-6">
                    <a href="#"><img src="home.png" alt="Home" /></a></li>
                </div>
                <div class="span-6">
                    <a href="#"><img src="newmember.png" alt="Member Sign Up" /></a>
                </div>
                <div class="span-6">
                    <a href="#"><img src="memberlist.png" alt="Member List" /></a>
                </div>
            </div>
            <div id="main" class="span-12 prepend-1 append-1" style="background: #F5F5DC">
                <p>Some text.</p>

                <p>Some more text.</p>

                <p>Even more text!</p>
            </div>
            <div id="adbar" class="span-5 last">
                Ads.
            </div>
            <div id="footer" class="span-24" style="text-align: center">
                <h6 class="alt">Copyright &copy;2012 Joe Schmo.</h6>
            </div>
            <!------------------------------------------------------->
        </div>
    </body>
</html> 
```

我已经关注了网站上的所有英文教程，但似乎无法弄清楚为什么它不想合作。我正在使用 Microsoft Webmatrix 开发我的网站，并在 IE9 和 Chrome 中预览我的网站。*如果有人能伸出援助*之手，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:39:40.600

对于您的侧边栏，您有一个 span-5 类，但它包含 span-6 的 3 个 div。如果您删除三个菜单 div 的 class 属性，因为我假设您希望它们成为包含 div 的完整宽度，这是否解决了您的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:09:39.280

```
<hr style="clear:both; width:100%" /> 
```

在页脚 div 之前试试这个

# python - 函数在“return(False)”之后不会停止

> ID：13904460
> 
> 赞同：3
> 
> 时间：2012-12-16T18:54:10.383
> 
> 标签：python, python-3.x

我正在尝试编写一个应该比较列表结构的函数（值无关紧要）。问题是我有两个不相等的列表，但`True`即使它实际上进入了该`else`部分，该函数仍然返回。我不明白为什么以及我做错了什么。这是我的代码：

```
def islist(p): #is p a list
    return type(p)==type(list())

def ListeIsomorf(a,b):
    if len(a)==len(b):
        for i,j in zip(a,b):
            if islist(i) and islist(j):
                ListeIsomorf(i,j)
            elif islist(i) or islist(j):
                return(False)
        return(True)    

    else:
        print(a,"length from the list isn't equal",b)
        return(False)

#example lists
ListeE = [[],[],[[]]]
ListeD = [[],[],[[]]]
ListeF = [[[],[],[[]]]]
ListeG = [[],[[]],[[]]]
ListeH = [1,[3]]
ListeI = [1,3]

#tests
print(ListeIsomorf(ListeD,ListeE)) # True
print(ListeIsomorf(ListeD,ListeF)) # False
print(ListeIsomorf(ListeD,ListeG)) # False
print(ListeIsomorf(ListeH,ListeI)) # False 
```

所以问题只发生在第三个`print(ListeIsomorf(ListeD,ListeG)) # False`。它实际上进入了`else`零件并打印了，`"length from the list isn't equal"`但它并没有停止，也没有给出`return(False)`. 我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T19:05:02.840

问题是当你的函数递归调用自身时：

```
 ListeIsomorf(i,j) 
```

它忽略返回的值。

因此，在第二层递归进行的比较对顶层返回的内容没有影响。

将上述更改为：

```
 if not ListeIsomorf(i,j):
                return(False) 
```

解决问题。

# android - Android ImageButton解析问题

> ID：13904465
> 
> 赞同：2
> 
> 时间：2012-12-16T18:54:43.913
> 
> 标签：android, layout, size, resolution, imagebutton

我想在我的程序顶部有两个按钮，将用户带到不同的活动中。我在格式化时遇到了很多麻烦。

如何使按钮根据屏幕尺寸按比例拉伸？现在，对于一种屏幕尺寸，它们看起来还不错，然后我将切换到另一种屏幕尺寸，它会显得全部被弄脏或拉伸。我已经尝试了所有不同的 ScaleTypes，但似乎都没有什么不同。[我也去了，并使用Shubhayu 的回答](https://stackoverflow.com/questions/9697440/button-image-size-in-android)按比例将所有图像保存到正确的尺寸，如 xhdpi、hdpi 等。

到目前为止，这是我的代码：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/brushed_metal_background_dark"
tools:context=".HomeActivity" >

<ImageButton
    android:id="@+id/incidentsSelect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/incident_bar2"
    android:contentDescription="Incidents"
    android:onClick="chooseIncident"
    android:scaleType="center" />

<ImageButton
    android:id="@+id/operationalPeriodsSelect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:background="@drawable/operationalperiod_bar2"
    android:contentDescription="Operational Periods"
    android:onClick="chooseOperationalPeriod"
    android:scaleType="fitCenter" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T21:03:29.443

更改`android:background`为`android:src`将保持纵横比。用于`android:scaleType="centerInside"`将整个图像放入按钮区域内，并可选择`android:adjustViewBounds=true`用于删除空白区域。例子：

```
<ImageButton
    android:id="@+id/incidentsSelect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:contentDescription="Incidents"
    android:onClick="chooseIncident"
    android:src="@drawable/incident_bar2"
    android:scaleType="centerInside"
    android:adjustViewBounds="true"/>

<ImageButton
    android:id="@+id/operationalPeriodsSelect"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:contentDescription="Operational Periods"
    android:onClick="chooseOperationalPeriod"
    android:src="@drawable/operationalperiod_bar2"
    android:scaleType="centerInside"
    android:adjustViewBounds="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:35:08.973

我猜您正在尝试在屏幕顶部均匀调整按钮的大小。如果是这种情况，那么您应该设置`android:layout_width="0dp"`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:28:56.850

只需使用 android:layout_width = "wrap_content"

# javascript - 简单的落沙玩具滞后

> ID：13904470
> 
> 赞同：2
> 
> 时间：2012-12-16T18:55:32.947
> 
> 标签：javascript, html, canvas, html5-canvas

好吧，在查看了这个问题三遍之后，发现没有与我的问题真正相关的内容，我现在要问了。

* * *

我很好奇并决定尝试看看我是否可以在帆布上制作一个非常基本的落沙玩具。

我确实成功地做到了，因为“沙子”像它应该在地面上堆积一样，但由于空气传播粒子和地面粒子之间的撞击检测，它会很快减慢。

~~[自己看看](http://codesocialist.com/#/?s=b4)~~编辑：可能是死链接，[这里是一个 JsFiddle](http://jsfiddle.net/pTx3g/)。

通过单击并按住鼠标按钮生成粒子。在你生成了大约 200 个粒子之后，它就会跪下。

```
for(i in P){
    if(P[i].Y<canvas.height-1){
        P[i].Y++
        for(j in G){//This loop seems to cause the lag
            if(P[i].X==G[j].X&&P[i].Y==G[j].Y-1){
                G[G.length]={X:P[i].X,Y:P[i].Y}
            }
        }
    }else{
        G[G.length]={X:P[i].X,Y:P[i].Y}
    }
} 
```

我只是想知道我是否做错了什么；我很确定它不应该落后那么严重。我也想知道是否有办法在没有嵌套循环的情况下做到这一点，但似乎我能够完成这项工作的唯一方法是检查每个单独的空气传播粒子与每个单独的地面粒子，这使得它滞后。

如果链接断开，请说出这个词，我将在此处发布整个代码。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:20:32.767

更容易记住每堆沙子的高度（例如，对于每一列或画布中的 x 坐标）并检查它。您可以直接使用索引（应该与 x 坐标相同），因此您不需要遍历所有地面位置来找到正确的位置。

您只需对每个空载沙块进行一次校验，即与相应立柱的堆高进行校验。

此外，当沙子撞到堆上时，将其从“活动粒子”列表中删除，这样您就不需要每次都检查它，保持外`for`循环尽可能小/短。

使用桩的高度重新绘制每个桩（当沙粒具有不同的颜色时效果不佳......）或将不再掉落的沙子放在单独的内存结构中以正确地重新绘制桩。

# joomla1.5 - Joomla | 文章管理器不显示文章

> ID：13904471
> 
> 赞同：0
> 
> 时间：2012-12-16T18:55:48.270
> 
> 标签：joomla1.5, joomla-module

我正在为我的网站使用 Joomla 1.5.21。当我通过我的超级管理员帐户登录并转到文章管理器时，它不会显示任何文章。请帮我解决这个问题。我会非常感谢你们所有人。 ![在此处输入图像描述](../Images/0e54e93fa358e611f22b54bf493e1501.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T15:56:52.647

在数据库中，检查#_content 表是否为空。如果为空，则创建新文章。

# delphi - 更改 WMF 颜色

> ID：13904473
> 
> 赞同：3
> 
> 时间：2012-12-16T18:55:54.180
> 
> 标签：delphi, colors, wmf

我一直在尝试在 Delphi 中更改 wmf 画布上的颜色，使用通常的图像我只是运行扫描线或在每个 X 和 Y 像素上运行一个循环并给它一个新的颜色代码，但是对于 MetaCanvas，这种方法不起作用，也许因为它实际上不是图像，而是 GDI 函数列表。我在某处读到我需要反编译和重新编译元文件以更改其中的颜色属性。但我不知道我将如何做到这一点，或者是否有另一种简单的方法。

如果有人能指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:21:23.623

有一种机制可以让您修改元文件的内容。

调用[`EnumEnhMetaFile`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162613.aspx)传递回调函数，[`EnhMetaFileProc`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162606.aspx). 为图元文件中的每条记录调用回调函数。您可以复制此记录，对其进行修改，然后将其传递给[`PlayEnhMetaFileRecord`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162801.aspx).

因此，您可以查找指定颜色的记录，并进行所需的任何修改。

# facebook - Facebook SDK API：如何获取帖子分享的详细信息？

> ID：13904474
> 
> 赞同：1
> 
> 时间：2012-12-16T18:55:55.057
> 
> 标签：facebook, api, sdk, facebook-fql

我正在使用 FB PHP SDK 在我管理的页面中获取有关帖子的信息。到目前为止，我可以得到：

```
$result = $facebook->api("/123xx");
$result = $facebook->api("/123xx/likes");
$result = $facebook->api("/123xx/comments");
$result = $facebook->api("/123xx/insights"); 
```

这给了我很多信息，但我缺少有关“共享”的详细信息。我得到的只是

```
[shares] => Array
    (
        [count] => 13
    ) 
```

但没有与这些共享相关的用户 ID 或评论。有没有办法使用 SDK（或 FQL）提取该信息？

关于权限，我的脚本要求`'scope' => 'manage_pages,read_insights'`我需要另一个参数来请求此信息吗？

感谢您的帮助

# servicestack - ServiceStack 中的 REST 路由

> ID：13904477
> 
> 赞同：5
> 
> 时间：2012-12-16T18:56:17.927
> 
> 标签：servicestack

我刚开始学习 REST 和 ServiceStack，有些东西`Route`我不太明白。例如，如果我们从 GitHub 教程中获取非常基本的 HelloWorld 示例并重新编写它以返回`User`对象集合。这是示例：

```
public User
{
    public string Name;
    public string Address;
    public int Age;
}

// Hello - request object without [Route] attribute
public class Hello
{
   public string Name { get; set; }
}

public class HelloResponse
{
   public IEnumerable<User> Result {get;set;}
}

public class HelloService : Service
{
   public object Any(Hello request)
   {
       return new HelloResponse { // Collection of User object };
   }
} 
```

现在一切正常，这里没有问题。但现在我想添加另一个路由 url，如： `/Hello/{name}/Address`

实际上，对这个 url 的调用 (GET) 将返回一个`User`由`Age`参数选择的单个。我怎么能做到这一点？我应该添加另一个`Service`吗？如果网址是：

`/Hello/{name}/{age}/Address`

好像有什么没看懂。。。。。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T20:30:24.557

[有关ServiceStack 中路由](https://stackoverflow.com/a/12165439/85785)的详细信息，请参阅这个较早的答案。[ServiceStack 的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)中的智能路由部分解释了更多选项和不同的优先级。

您的示例存在一些问题。第一个 ServiceStack 文本序列化程序仅支持**公共属性**，因此您需要更改用户模型以使用公共属性而不是字段，例如：

```
public User
{
    public string Name { get; set; }
    public string Address { get; set; }
    public int Age { get; set; }
} 
```

接下来，[DTO 上的接口是一个坏主意](https://stackoverflow.com/a/10759250/85785)，因为没有充分的理由。它们仍然受支持，但最终可能会产生不良结果。使用像 a`List<T>`这样提供更多实用程序的具体集合，例如：

```
public class HelloResponse
{
    public List<User> Results { get; set; }
} 
```

此外，路由**应与**您的 DTO 上的属性名称**完全**匹配，在匹配请求路径时它们不区分大小写，但它们需要映射到确切的属性名称，例如：

```
/Hello/{Name}/{Age}/Address 
```

# php - 使用 opendir/readdir 函数后重复文本

> ID：13904478
> 
> 赞同：0
> 
> 时间：2012-12-16T18:56:21.547
> 
> 标签：php

为什么会发生这种情况对我来说是个谜。所以这里是代码：

```
$dir = 'test/';
$de = opendir($dir);
if ($de) {
    while (($file = readdir($de)) !== false) {
        $path = $dir . $file;
        $file_title = 'this text gets repeated three times, each followed by a dot' . $file;
        echo $file;
    }
} else {
    echo "invalid directory";
} 
```

所以如果 $file= video.mp4 和 $file_title='文件名'.$file; 它看起来像这样：

'file name.file name.file namevideo.mp4' 如果变量前没有字符串，即 $file_title=$title 变量前会有三个点，如下所示： ...video.mp4

如果有人知道发生了什么，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:00:21.550

你会得到重复的文本，因为你的代码包含一个循环。就是这样`while`做的：它重复运行代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:02:41.063

您正在列出`.`和`..`目录，用于[`is_file()`](http://php.net/manual/en/function.is-file.php)检查条目是否真的是文件而不是目录：

```
if (is_file($dir . $file)) {
   // entry is a file
} 
```

在这里您可以阅读有关`dot`目录[的更多信息：点中有很多内容](http://www.linux-mag.com/id/7735/)

# java - 在 Log4j2 中，如何将 XML Schema 与 log4j2.xml 关联？

> ID：13904481
> 
> 赞同：42
> 
> 时间：2012-12-16T18:56:40.180
> 
> 标签：java, log4j, log4j2

我一直在尝试新的 Log4j2。[从关于 migration](http://logging.apache.org/log4j/2.x/manual/migration.html)的文档看来，XML Schema/DTD 规范已经被取消了。

这似乎是倒退了一步。当然，应该可以将 XML Schema 或 DTD 与 my 关联`log4j2.xml`以帮助编写它并进行验证。我无法在文档中找到任何有用的东西，也没有找到 XML Schema 或 DTD 本身。

所以：在 Log4j2 中，我应该如何将 XML Schema 与`log4j2.xml`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2017-06-21T10:24:00.143

日食对我有用：

```
<Configuration strict="true"
           xmlns="http://logging.apache.org/log4j/2.0/config"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://logging.apache.org/log4j/2.0/config 
           https://raw.githubusercontent.com/apache/logging-log4j2/master/log4j-core/src/main/resources/Log4j-config.xsd"> 
```

或反对标记版本：

```
<Configuration strict="true"
           xmlns="http://logging.apache.org/log4j/2.0/config"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://logging.apache.org/log4j/2.0/config 
           https://raw.githubusercontent.com/apache/logging-log4j2/log4j-2.8.2/log4j-core/src/main/resources/Log4j-config.xsd"> 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-16T15:41:56.457

请重新阅读有关**[XML 配置](http://logging.apache.org/log4j/2.x/manual/configuration.html#XML)**的 Log4J2 文档，您会发现这两个地方：

> Log4j 可以使用两种 XML 风格进行配置；**简洁**而**严格**。**简洁的格式**使配置变得非常容易，因为元素名称与它们所代表的组件相匹配，**但是无法使用 XML 模式进行验证**。例如，ConsoleAppender 是通过在其父 appenders 元素下声明一个名为 Console 的 XML 元素来配置的。但是，元素和属性名称不区分大小写。此外，属性可以指定为 XML 属性，也可以指定为没有属性但具有文本值的 XML 元素。

再进一步：

> **严格的 XML**。除了上面简洁的 XML 格式之外，Log4j 还允许以更“正常”的 XML 方式指定配置，这种方式**可以使用 XML Schema 进行验证**。这是通过将上面的友好元素名称替换为其对象类型来完成的，如下所示。例如，不是使用名为 Console 的元素配置 ConsoleAppender，而是将其配置为具有包含“Console”的 type 属性的 appender 元素。

因此**，如果您想对 Log4j2 使用 XML 模式验证，则仅使用 Strict XML 格式**。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-29T03:32:57.733

我似乎在 Log4J2 网站上找不到对 XSD 的引用，但如果您下载 for 2.0 beta 5，您会发现它在路径 core/src 中包含一个 Log4J 2 模式 (Log4J-V2.0.xsd) /主/资源。

正如 Muel 所说，很可能有自定义的附加程序。因此，我相信只有在主配置节点中使用 strict="true" 才会起作用。

请参阅： http: [//logging.apache.org/log4j/2.x/manual/configuration.html#ConfigurationSyntax](http://logging.apache.org/log4j/2.x/manual/configuration.html#ConfigurationSyntax)

我已经使用 schema 属性将它添加到配置中，它似乎主要工作。

这是一个例子：

```
<configuration name="testConfiguration"
    status="debug"
    strict="true"
    monitorInterval="30"
    schema="Log4J-V2.0.xsd"> 
```

我说“主要是”是因为我发现一个问题是，即使是一些记录在案的有效属性（例如 monitorInterval）也从 XSD 中丢失。

希望在未来的版本中可以使用严格格式的准确 XSD。

希望这个对你有帮助。

-史蒂夫

**更新：**有关XSD 验证的问题， 请参阅[LOG4J2-170](https://issues.apache.org/jira/browse/LOG4J2-170)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-25T00:53:13.690

我认为不可能有一个带有 log4j2 的模式/DTD。最近我写了一个自定义 appender，为了支持 appender，我`log4j2.xml`看起来像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration status="ERROR" packages="package.same.as.custom.appender">
  <appenders>
    <CyclicBuffer name="CyclicBuffer" bufferSize="200">
      <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level [%t] %c{1.} - %msg%n"/>
    </CyclicBuffer>
  </appenders>
  <loggers>
    <root level="info">
      <appender-ref ref="CyclicBuffer"/>
    </root>
  </loggers>
</configuration> 
```

需要注意的重要事项是我有一个完全自定义的`CyclicBuffer`元素，并且它有一个完全自定义的`bufferSize`属性。查看周围的文档`@PluginFactory`并`@Plugin`了解更多详细信息。

由于这种定制，我不认为 XML 可以通过标准的、常见的 XSD/DTD 进行验证。相反，如果您希望验证 XML，我认为您需要创建自己的 XSD。

需要注意的一件重要事情是，在我的 XML 中，我有：`<configuration status="ERROR"`. 当它存在时，log4j2 将在运行时输出与错误配置相关的任何错误。虽然不如 XML 验证方便，但它也非常有用！

希望这对您有所帮助，穆尔。

# python - 在python中的同一程序中的服务器和客户端

> ID：13904482
> 
> 赞同：0
> 
> 时间：2012-12-16T18:56:40.990
> 
> 标签：python, multithreading, sockets, python-multithreading

在 Python 中，客户端和服务器是否可以同时在同一个程序中运行。我想将客户端连接到外部服务器和服务器以同时从该外部服务器接收消息。每当我的服务器从该外部服务器接收到消息时，我的客户端应相应地向该外部服务器发送消息。

以下是我试图实现的方式（只是连接部分）

```
import select
import socket

host = 'localhost'
portClient = 6000
portServer = 7000
backlog = 5
size = 1024

client = socket.socket()
server = socket.socket()

client.connect((host,portClient))
client.send('#JOIN')

server.bind((host,portServer))
server.listen(backlog)

running = 1

while running:
    c,address = server.accept()
    c.close()

client.close()
server.close() 
```

当我运行此代码时，外部服务器没有响应。当 while 循环被省略时。我收到一条错误消息，说我们的服务器已主动拒绝接受外部服务器。

我可以通过使用 Python 选择模块或线程模块来实现这一点吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T18:59:51.550

TCP 套接字是一个***双向字节流***。您可以而且应该通过同一个套接字与服务器进行所有通信。

# java - java随机数选择器

> ID：13904484
> 
> 赞同：0
> 
> 时间：2012-12-16T18:56:49.133
> 
> 标签：java

我有一个作业要编写一个返回 1 到 54 之间的随机数的方法，不包括参数中传递的数字。方法头指定如下：

```
public static int getRandom(int... numbers) 
```

我不能使用比一维数组更高级的东西。

我的代码是：

```
public class PE13RandomNumberChooserVer2 {

    public static void main(String[] args) {

        int[] excludeNumbers = {1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 15, 16, 17, 18};
        int randomNumber = getRandom(excludeNumbers);
        System.out.println();
        System.out.println("Random number chosen: " + randomNumber);
    }

    public static int getRandom(int... excludeNumbers) {

        int random = 1 + (int)(Math.random() * (54 - 1) + 1);
        System.out.println("Numbers to exclude: ");

        for (int i = 0; i < excludeNumbers.length; i++) {
            System.out.print(excludeNumbers[i] + " ");
            while (excludeNumbers[i] == random) {
                random = 1 + (int)(Math.random() * 54);
                System.out.println("\n(for test only) next random number: " + random);
            }
        }

        return random;
    }

} 
```

示例运行表明我的逻辑是错误的：

```
(for test only) initial random number: 8
Numbers to exclude: 
1 2 3 4 5 6 7 8 
(for test only) next random number: 12
11 12 
(for test only) next random number: 3
13 14 15 16 17 18 
Random number chosen: 3 
```

它仅检查 random 是否等于数组中的当前项目，它不考虑它可以等于列表中已检查的前一个项目的情况。

随机生成的数字的最终结果应该是与数组中的数字不同的值。非常感谢任何如何解决它的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:26:36.690

以下将做到这一点：

```
 private final Random rand = new Random();

    public int getRandom(int min, int max, int... excludeNumbers) {
        int random = rand.nextInt(max - min + 1 - excludeNumbers.length) + min;
        for (int exc : excludeNumbers) {
            if (random >= exc) {
                random++;
            }
        }
        return random;
    } 
```

观察它如何只生成一个随机数并且不需要拒绝循环。

请注意，两者`min`都`max`包括在内。还要注意`excludeNumbers`必须按升序出现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-16T19:07:39.230

这

```
int random = 1 + (int)(Math.random() * (54 - 1) + 1); 
```

还有这个

```
random = 1 + (int)(Math.random() * 54); 
```

很奇怪，应该重合。

后一种是正确的。

接下来你的循环是错误的。循环用于重新生成号码，以防它与禁止号码重合。所以你应该把所有的循环都放在`for`里面`while`，然后放在外面。应该用于检查生成的所有禁止号码，并且应该作为检索循环服务。`println``for``while`

您也可以使用[Random 类](http://docs.oracle.com/javase/7/docs/api/java/util/Random.html)。

**编码**

```
public static void main(String[] args) {

        int[] excludeNumbers = {1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 15, 16, 17, 18};
        int randomNumber;

        System.out.println("Numbers to exclude: ");
        for (int i = 0; i < excludeNumbers.length; i++) {
            System.out.print(excludeNumbers[i] + " ");
        }

        // 100 tests
        for(int i=0; i<100; ++i ) {

            randomNumber = getRandom(excludeNumbers);
            System.out.println();
            System.out.println("Random number chosen: " + randomNumber);
        }
    }

    public static int getRandom(int... excludeNumbers) {

        int random;

        // regeneration loop 
        regeneration: while(true) {

            // generating a number
            random = 1 + (int)(Math.random() * 54);

            // checking of it's correctness
            for (int i = 0; i < excludeNumbers.length; i++) {

                // checking if number conincides for prohibited
                if( excludeNumbers[i] == random ) {

                    // if number concided, then going to regeneration
                    continue regeneration;
                }

                // here number has not coincided 
                // but with just one of prohibites
                // no decision here
            }

            // here all prohibited numbers checked and 
            // no coincidences found
            // so generated number is good

            System.out.println("\n(for test only) next random number: " + random);
            break regeneration;

        } 

        return random;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T19:06:14.540

试试这个，它只是不断尝试，直到你得到一个可以接受的数字。

```
List<Integer> nums = Arrays.asList(excludedNumbers);
while (true) {
    Random random = 1 + (int)(Math.random() * 54);
    if (!nums.contains(random))
        return random;
} 
```

如果您将排除数字作为列表传递，该方法会更简洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T19:27:51.117

不断重试直到达到允许的数字的技术是粗糙的，并且随着允许的数字的数量接近 1 变成一个哭泣的痛苦。一个更优雅的方式是这样的：

1.  创建一个`boolean[54]`；
2.  将每个排除的元素设置为`true`;
3.  从与允许选择的数量一样大的范围中选择一个随机数*r*（54 - 排除数）；
4.  返回布尔数组中的*第 r 个*假元素。

`boolean`注意：当你可以缓存数组时，这个算法是最合适的；对于您的确切情况（该函数每次都会接收一个新数组）NPE 的解决方案是优越的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T20:35:37.857

查看 java.util.random，它有一个方法可以提供 0 和您指定的数字之间的随机整数。我不能给你一个例子，因为我现在正在用我的手机输入这个，但如果你要在 1 到 54 之间得到它，我会得到一个 0 到 53 之间的随机数并将结果加 1。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-01T19:18:14.980

我现在也在自学Java。我已经在这个问题上花了几天时间，而网上还没有答案。到目前为止，上述解决方案对我来说太先进了。这是我最后的解决方案，它只使用基本的数组知识

```
 public class Q6_13 {
    public static void main(String[] args)  {
        int[] excludeNumbers = {1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 13, 14, 15, 16, 17, 18};
        System.out.println (getRandom(excludeNumbers));
    }

    public static int getRandom(int...numbers)  {
        int n =  (int)(Math.random() * 54) + 1; ;
        boolean newRandom = false;
        boolean getNew = false;

         while (getNew == false)   {
        for (int i = 0; (i < numbers.length) && newRandom == false; i++)    {
            if (n == numbers[i])    {
                newRandom = true;                 
            }
        }
            if (newRandom)  {
                n = (int)(Math.random() * 54) + 1; 
                getNew = false;
                newRandom = false;
            }
            else
                getNew = true;
        }
        return n;
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-01T13:34:36.473

```
public static int getRandom(int... numbers) {
    final Random random = new Random();
    final int[] arr1 = new int[54];
    int count = 54;
    for(int i = 0; i < arr1.length; ++i) {
        arr1[i] = i + 1; // good luck doing this with foreach
    }
    for(int i = 0; i < numbers.length; ++i) {
        final int n = numbers[i];
        if(arr1[n] != 0) {
            --count;
        }
        arr1[n] = 0;
    }
    final int[] arr2 = new int[count];
    for(int i = 0, j = 0; i < arr2.length; ++i, ++j) {
        if(arr1[j] == 0) {
            ++j;
        }
        else {
            arr2[i] = arr1[j];
        }
    }
    return arr2[random.nextInt(count)];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-21T06:41:43.017

公共类计算{

```
public static void main(String[] args) {
    int[] values = {2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41};
    int x = 1+ (int) (Math.random()*54);
    System.out.println("Value: "+getRandom(x,values));  
}

public static int getRandom(int a, int... numbers){

    System.out.println("x1: "+a);
    for(int j=0;j<numbers.length;){
        //System.out.println("Numbers: "+numbers[j]);
        if(numbers[j]==a){
            a = 1 + (int) (Math.random()*54);
            System.out.println("x2: "+a);
            j=0;
            continue;
        }
        j++;
    }
    return a;

} 
```

}

# gdi - 快速（硬件加速）绘图到外部窗口（可能使用 Direct3D）

> ID：13904487
> 
> 赞同：2
> 
> 时间：2012-12-16T18:57:15.233
> 
> 标签：gdi, direct3d

我正在从事某个项目，其任务是将位图（当前为 HBITMAP/bitblt/alphablend）绘制到所有可见窗口（即不属于我的应用程序的窗口）的非客户区域。它必须非常快地完成——当窗口移动、调整大小等时，位图会更新。此外，必须在该位图上应用某种模糊算法。它应该适用于 Win7 和 Win8（因此不需要 XP）。

我已经设法与 GDI 一起正常工作。我将 GetWindowDC、GetWindowRect 和 AlphaBlend 位图获取到缓冲区 (CreateCompatibleDC/CreateCompatibleBitmap) 中，然后将其 BitBlt 到 GetWindowDC 中。这工作得很好......除了......它没有我想要的那么快。如果我在位图上应用模糊算法，那么一切都慢得要命。

所以我的问题是如何提高速度？我正在考虑硬件加速绘图。

a) 我尝试了与 GDI 兼容的 Direct2D（使用 ID2D1DCRenderTarget+BindDC），但它比纯 GDI 慢得多。

b) 我正在考虑 Direct3D。问题是我可能不知道如何使用它。如果我调用 D3D10CreateDeviceAndSwapChain 并将交换链的 OutputWindow 设置为我的应用程序的 HWND，则它返回 S_OK 但是当我将 OutputWindow 设置为任何外部窗口的 HWND 时，该方法将失败。所以我不确定如何渲染到外国窗口。

c）如何在图像的一部分上正确应用模糊？我发现了很多算法，但它们都是在 CPU 上处理的。如何在 GPU 上制作它？

提前感谢任何想法如何解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:21:08.290

您是否考虑过使用 DComp？为什么使用 DComp 可能是合适的，看看这个：http: [//msdn.microsoft.com/en-us/library/windows/desktop/hh449195%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh449195%28v=vs.85%29.aspx)

有关 DComp 是什么的简要总结（来自 MSDN）：

Microsoft DirectComposition 是一个 Windows 组件，可通过变换、效果和动画实现高性能位图合成。应用程序开发人员可以使用 DirectComposition API 创建具有视觉吸引力的用户界面，这些界面具有从一种视觉效果到另一种视觉效果的丰富流畅的动画过渡。

DirectComposition 通过实现高帧率、使用图形硬件以及独立于 UI 线程运行来实现丰富而流畅的过渡。DirectComposition 可以接受由不同渲染库绘制的位图内容，包括 Microsoft DirectX 位图和渲染到窗口的位图（HWND 位图）。此外，DirectComposition 还支持各种变换，例如 2D 仿射变换和 3D 透视变换，以及剪裁和不透明度等基本效果。

DirectComposition 旨在简化合成视觉效果和创建动画过渡的过程。如果您的应用程序已包含渲染代码或已使用推荐的 DirectX API，您只需做最少的工作即可有效地使用 DirectComposition。

# objective-c - Xcode - 完成所有 requestAccessToEntityType 块后，如何在方法中调用 Return 参数？

> ID：13904492
> 
> 赞同：0
> 
> 时间：2012-12-16T18:57:49.630
> 
> 标签：objective-c, ios, xcode, ios6, objective-c-blocks

无论用户是否允许访问日历，我都有返回 iOS6 的方法。

```
-(NSString *)CheckCalendarAllowed{

  __block NSString *AllowCalendar;

EKEventStore *eventStore = [[EKEventStore alloc] init];

[eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    if(granted){
        NSLog(@"Event store granted");
        AllowCalendar = @"1";

        NSLog(@"AllowCalendar in block = %@",AllowCalendar);

    }else{
        NSLog(@"Event store not granted");
        AllowCalendar = @"0";

        NSLog(@"AllowCalendar in block = %@",AllowCalendar);
    }
}];

NSLog(@"AllowCalendar before return = %@",AllowCalendar);
return AllowCalendar;
} 
```

在控制台中我得到了这个。

> 2012-12-16 20:48:18.418 22052012_xxxx[4346:907] 返回前允许日历 = (null)
> 
> 2012-12-16 20:48:18.460 22052012_xxxx[4346:110b] 授予事件存储
> 
> 2012-12-16 20:48:18.462 22052012_xxxx[4346:110b] 块中的 AllowCalendar = 1

完成所有 requestAccessToEntityType 块后如何调用 Return 参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T01:21:02.467

您不能以这种方式使用块。有很多方法可以实现这一点。一种方法是尝试将调用者方法拆分为两个单独的方法，并执行以下功能，

```
-(void)CheckCalendarAllowed{

  NSString *AllowCalendar;
  EKEventStore *eventStore = [[EKEventStore alloc] init];

  [eventStore requestAccessToEntityType:EKEntityTypeEvent completion:^(BOOL granted, NSError *error) {
    if(granted){
        NSLog(@"Event store granted");
        AllowCalendar = @"1";

        NSLog(@"AllowCalendar in block = %@",AllowCalendar);
        [self returnAllowCalendarValue:AllowCalendar];
    }else{
        NSLog(@"Event store not granted");
        AllowCalendar = @"0";

        NSLog(@"AllowCalendar in block = %@",AllowCalendar);
        [self returnAllowCalendarValue:AllowCalendar];
    }
  }];
} 
```

然后调用该方法，

```
[self CheckCalendarAllowed]; 
```

并在方法中收到上述值后实施这些功能，

```
-(void)returnAllowCalendarValue:(NSString *)allowCalendarString {
  //implement the rest of the operations here
  NSLog(@"AllowCalendar = %@", allowCalendarString);
} 
```

附带说明一下，根据苹果编码约定，变量名和方法名应以小写开头。请使用`allowCalendar`和`checkCalendarAllowed`作为名称。

# python - Python list += iterable 的行为是否记录在任何地方？

> ID：13904493
> 
> 赞同：28
> 
> 时间：2012-12-16T18:58:00.490
> 
> 标签：python, operators, containers

看来，在 Python 中，`list += x`适用于任何可迭代的`x`：

```
In [6]: l = []

In [7]: l += [1]

In [8]: l += (2, 3)

In [9]: l += xrange(5)

In [10]: l
Out[10]: [1, 2, 3, 0, 1, 2, 3, 4] 
```

这种行为是否记录在任何地方？

与 相比`list + x`，后者仅在`x`也是 a时才有效`list`。这在[文档](http://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)中有详细说明。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-16T19:22:45.047

从[Guido van Rossum](https://plus.google.com/118069851186709403898/posts/YoNDMKjTuJh)：

> 它的工作方式与它相同，`.extend()`只是它也返回`self`. 我找不到解释这一点的文档。:-(

以下是取自的相关源代码[`listobject.c`](http://hg.python.org/cpython/file/2d2d4807a3ed/Objects/listobject.c#l892)：

```
list_inplace_concat(PyListObject *self, PyObject *other)
{
     PyObject *result;

     result = listextend(self, other);
     if (result == NULL)
         return result;
     Py_DECREF(result);
     Py_INCREF(self);
     return (PyObject *)self;
} 
```

我提出了一个错误报告以修复文档：http: [//bugs.python.org/issue16701](http://bugs.python.org/issue16701)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-01T18:29:44.420

它[现在记录](https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types)在 Python 3.4+ 和 Python 2.7 中：

> **4.6.3\. 可变序列类型**
> 
> 下表中的操作是在可变序列类型上定义的。提供`collections.abc.MutableSequence`ABC 是为了更容易在自定义序列类型上正确实现这些操作。
> 
> *[Below]* `s`是可变序列类型的一个实例，`t`是任何可迭代的对象，并且`x`是满足任何类型和值限制的任意对象`s`（例如，`bytearray`只接受满足值限制的整数`0 <= x <= 255`）。
> 
> * * *
> 
> **`s.extend(t)`或者`s += t`**
> 
> 扩展`s`内容`t` （大部分与 相同`s[len(s):len(s)] = t`）

因此，现在有文件证明，对于任何可变序列类型`s`，`s += t`都是`s.extend(t)`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-16T19:51:04.130

不（[Guido 确认](https://plus.google.com/118069851186709403898/posts/YoNDMKjTuJh)；感谢 Ashwini Chaudhary）。for 序列的行为`+=`通常是未指定的。我得出的结论是，规范不要求`x + y`where`x`是一个列表，并且`y`其他一些可迭代是一个错误（因此其他实现可以选择允许它），并且其他实现可以限制`+=`为需要同质操作数。

但是，不这样做的原因很明显：python 通常会尝试对操作数做正确的事情，而不是要求严格的类型相等。真正的谜团是为什么列表不允许异类添加。

更新：我从来没有真正考虑过非同质加法问题，主要是因为`itertools.chain`它几乎是该问题的完整解决方案。

欢迎那些更熟悉 Python 内部的人发表评论，以解释为什么需要同质加法。（这里的问题：[为什么Python列表加法必须是同质的？](https://stackoverflow.com/questions/13905008/why-must-python-list-addition-be-homogenous)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-07-24T11:14:01.743

对于那里的性能怪胎，是`+=`的，比`extend`：

```
>>> from timeit import repeat
>>> min(repeat('a.extend((1,2,3,4,5,6,7))', 'a=[]'))
0.23489440699995612
>>> min(repeat('e((1,2,3,4,5,6,7))', 'a=[]; e = a.extend'))
0.2214308570000867
>>> min(repeat('a+=(1,2,3,4,5,6,7)', 'a=[]'))
0.21909333300027356 
```

以下是它的比较方式`append`：

```
>>> min(repeat('a.append(1)', 'a=[]'))
0.062107428999297554
>>> min(repeat('p(1)', 'a=[]; p = a.append'))
0.04968810399986978
>>> min(repeat('a+=(1,)', 'a=[]'))
0.0501599309991434 
```

（在 Python 3.7 64 位、Windows 上测试）

# css - 如何使用 index.css 在 google app 引擎中插入背景图片以进行留言簿应用程序？

> ID：13904496
> 
> 赞同：0
> 
> 时间：2012-12-16T18:58:46.307
> 
> 标签：css, image, google-app-engine, background

在 main.css 我有这个代码：

```
body {
  font-family: Comic Sans, Helvetica, sans-serif;
  background-color: #AACCFF;
} 
```

这会产生浅蓝色作为背景。如何更改此代码以输入背景图像而不是背景颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:58:01.090

当然，您需要先将文件放在某个位置：

说文件夹： assets/images/ 包含文件 my_background.jpg

然后编辑你的 app.yaml：

```
handlers:

- url: /assets
  static_dir: assets 
```

接着：

```
body {
    font-family: Comic Sans, Helvetica, sans-serif;
    background-image: url('assets/images/my_background.jpg');
} 
```

完毕

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:26:01.183

看一下[background-image](http://www.w3schools.com/cssref/pr_background-image.asp) css 属性。

您的身体规则将更改为：

```
body {
    font-family: Comic Sans, Helvetica, sans-serif;
    background-image: url('images/my_background.jpg');
} 
```

您可能还想查看[background-repeat](http://www.w3schools.com/cssref/pr_background-repeat.asp) css 属性来控制图像如何重复自身。

# c++ - 在 C++ 中解析和执行行

> ID：13904497
> 
> 赞同：0
> 
> 时间：2012-12-16T18:58:59.973
> 
> 标签：c++

我在一个文本文件中有一系列要在 C++ 中执行的 C++ 函数

```
LHAPDF::alphasPDF(pow(1* 0.25471686e+03,0))
LHAPDF::alphasPDF(1*0.18014950e+03)
LHAPDF::xfx(0.86084175E-01,0.17014950e+03,0)
LHAPDF::xfx(0.39435938E-01,0.25471686e+03,0)
LHAPDF::xfx(0.29,1*0.15,0) 
```

如何在 C++ 中解析它们并执行该行？我的 C++ 知道 LHAPDF::xfx 是什么，我只想重复执行从文本文件中解析的行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:25:50.527

C++ 不提供调用函数或使用读入的单独文件中的代码的想法。虽然另一个想法可能是使用关键字然后值来改写文本文件，并通过查找字符串的关键字来调用函数：

```
xfx  0.29  1.15  0      //call xfx func
alp  1*0.18014950e+03   //call alphasPDF 
```

* * *

```
somewhere in main.cpp
//Grab the first variable and read into string
//are the first three letters xfx?
    read in the remaining values
    call xfx using the parameters
//else are the first three letters alp?
    read the remaining values into a string(really small values)
    manipulate the string until desired value is reached
    call function 
```

# android - 如何获取 v2 android 地图的地图中心？

> ID：13904505
> 
> 赞同：83
> 
> 时间：2012-12-16T18:59:41.693
> 
> 标签：android, google-maps-api-2

在 Google Maps for Android **v1**中，MapView 有一个方便的方法： `getMapCenter()`. 现在我无法弄清楚如何使用这个 api的**v2获取地图中心。**我仔细阅读了 API 文档，但没有提到这样的功能。请指教。

谢谢，伊戈尔

* * *

## 回答 #1

> 赞同：201
> 
> 时间：2012-12-18T11:34:04.887

我有同样的问题。看来您可以通过这种方式获得中心：

```
mMap.getCameraPosition().target 
```

其中 mMap 是您活动中的 GoogleMap 实例。这将返回一个基本上代表地图中心的 LatLng 对象。

请注意，该`GeoPoint`课程不再可用。

根据[http://developer.android.com/reference/com/google/android/gms/maps/model/CameraPosition.html](http://developer.android.com/reference/com/google/android/gms/maps/model/CameraPosition.html)

目标是“相机指向的位置”。（我用示例代码对其进行了测试，它对我来说没问题）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2013-05-19T22:51:23.983

我找到了两种方法：

1）最简单的，第一种是使用Map的CameraPosition对象中的target属性

```
 LatLng center = mMap.getCameraPosition().target; 
```

2）第二个是使用 VisibleRegion 对象：

```
VisibleRegion visibleRegion = mMap.getProjection()
                    .getVisibleRegion();

Point x = mMap.getProjection().toScreenLocation(
                    visibleRegion.farRight);

Point y = mMap.getProjection().toScreenLocation(
                    visibleRegion.nearLeft);

Point centerPoint = new Point(x.x / 2, y.y / 2);

LatLng centerFromPoint = mMap.getProjection().fromScreenLocation(
                    centerPoint); 
```

我比较了两个答案：

```
Log.d("MapFragment: ", "Center From camera: Long: " + center.longitude
                        + " Lat" + center.latitude);

Log.d("Punto x", "x:" + x.x + "y:" + x.y);
Log.d("Punto y", "y:" + y.x + "y:" + y.y);

Log.d("MapFragment: ", "Center From Point: Long: "
                    + centerFromPoint.longitude + " Lat"
                    + centerFromPoint.latitude); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-02-24T19:04:24.023

您可以使用 ：

```
latlng=map.getProjection().getVisibleRegion().latLngBounds.getCenter(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-12-11T19:07:44.310

为了获得地图中心，我在活动中使用了 onMapReady() 方法，然后使用`googleMap.setOnCameraChangeListener() method to get position of Came`：

```
@Override
public void onMapReady(GoogleMap googMap) {
    googleMap.setOnCameraChangeListener(new GoogleMap.OnCameraChangeListener() {
        @Override
        public void onCameraChange(CameraPosition cameraPosition) {

       Log.i("centerLat",cameraPosition.target.latitude);

       Log.i("centerLong",cameraPosition.target.longitude);

        }
    });
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-09-17T13:06:54.643

如果您只想获取*一次*位置（例如，在用户停止平移地图之后），请使用`setOnCameraIdleListener`：

[https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraIdleListener](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraIdleListener)

```
mMap.setOnCameraIdleListener(new GoogleMap.OnCameraIdleListener() {
    @Override
    public void onCameraIdle() {
        LatLng position = mMap.getCameraPosition().target;
        Log.d("MapActivity", "Position: " + position);
    }
}); 
```

或使用 Java 8 lambda：

```
mMap.setOnCameraIdleListener(() -> {
    LatLng position = mMap.getCameraPosition().target;
    Log.d("MapActivity", "Position: " + position);
}); 
```

请注意，注册的侦听`setOnCameraChangeListener`器被多次调用，正如[文档](https://developers.google.com/android/reference/com/google/android/gms/maps/GoogleMap.OnCameraMoveListener)所述：

> 这可能每帧调用一次，并且不应执行昂贵的操作。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-09-22T13:34:25.963

使用 cameraPosition 的最佳方式

**爪哇：**

```
LatLng centerMap = googleMap.getCameraPosition().target; 
```

**科特林：**

```
googleMap?.cameraPosition?.target?.let {
    // it is LatLng center
} 
```

# collections - 在 Cypher 中获取集合的第 n 个元素

> ID：13904506
> 
> 赞同：6
> 
> 时间：2012-12-16T18:59:48.527
> 
> 标签：collections, neo4j, cypher

使用[Cypher 1.8](http://docs.neo4j.org/chunked/1.8/cypher-query-lang.html)，有一些函数处理集合并返回单个元素：

**`HEAD( expression )`：**

```
START a=node(2)
RETURN a.array, head(a.array) 
```

**`LAST( expression )`：**

```
START a=node(2)
RETURN a.array, last(a.array) 
```

但是，我找不到返回集合的**第 n 个元素**的函数。我错过了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T20:35:44.430

目前没有什么好的方法可以做到这一点。[请在https://github.com/neo4j/neo4j](https://github.com/neo4j/neo4j)提交功能请求

我见过人们做 head(tail(tail(tail(coll))))，虽然它的速度可能可以接受，但在查询中看到它仍然让我有点不舒服，特别是如果你在谈论第 17 个元素或更糟。

示例： [http ://console.neo4j.org/r/bbo6o4](http://console.neo4j.org/r/bbo6o4)

**更新：** 这是一种使用 reduce 和 range 的方法。它使您至少可以为 nth 提供一个参数，即使它仍然让我畏缩：

```
start n=node(*) 
with collect(n) as allnodes 
return head(reduce(acc=allnodes, x in range(1,3): tail(acc))); 
```

[http://console.neo4j.org/r/8erfup](http://console.neo4j.org/r/8erfup)

**更新 2 (8/31/2013)：**
新的集合语法现已合并到 2.0 中，理论上将成为 M05 的一部分！因此，您将能够：

```
start n=node(*)
with collect(n) as allnodes
return allnodes[3]; // or slices, like [1..3] 
```

更新后，我将添加指向快照文档的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-13T20:13:44.233

我刚刚遇到了这个老问题，为了最近遇到的其他人的利益……似乎列表支持有所改善。

来自[Cypher 4 列表文档](https://neo4j.com/docs/cypher-manual/current/syntax/lists/#cypher-lists-general)：

> Cypher 对列表有全面的支持。

^ 旁注：我认为这是列表推导双关语？;-)

他们继续给出一个示例，展示如何访问列表的第 n 个元素：

> 要访问列表中的单个元素，我们再次使用方括号。这将从开始索引中提取，直到但不包括结束索引。...我们将使用范围函数。它为您提供了一个列表，其中包含给定开始数字和结束数字之间的所有数字。范围包括两端。

```
RETURN range(0, 10)[3]
^ returns "3" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-08T16:31:31.767

目前，随着[APOC Procedures 3.3.0.2](https://github.com/neo4j-contrib/neo4j-apoc-procedures/releases/tag/3.3.0.2)的发布，您可以使用[聚合函数](https://neo4j-contrib.github.io/neo4j-apoc-procedures/#_aggregation_functions)。

这样，您可以进行如下思考：

```
create (:Node {node_id : 1}),
    (:Node {node_id : 2}),
    (:Node {node_id : 3});

match(n:Node)
with n order by n.node_id
// returns {"node_id":2}  
return apoc.agg.nth(n, 1); 
```

或者：

```
match(n:Node)
with n order by n.node_id
// returns {"node_id":1} 
// you can also use apoc.agg.last
return apoc.agg.first(n); 
```

首先使用列表`UNWIND`列表：

```
with ['fist', 'second', 'third'] as list
unwind list as value
// returns 'second'
return apoc.agg.nth(value, 1); 
```

# java - zk 框架内存网格

> ID：13904509
> 
> 赞同：1
> 
> 时间：2012-12-16T18:59:59.457
> 
> 标签：java, jakarta-ee, zk, java-ee-5

我使用 zk 框架`MVVM`方法，希望`grid`每页显示 1000-2000 行。（用户确实需要）但它是很多信息，如果我将我的`grid` `model`( `List<Object>`) 保存在服务器端的内存中，每个用户将消耗大约 30Mb . 我决定在服务器端呈现这种信息并清理内存会更好，但如果我使用这种方法，我应该去客户端编程。（为ajax调用等编写js）找不到解决这个问题的好方法。我应该使用什么`auRequest`，`RowRender`或者`Render script`在客户端或者在渲染网格之后只是空数据？

**UPD：**祖尔

```
<grid apply="org.zkoss.bind.BindComposer"
      viewModel="@id('vm') @init('Pojo')"
      self="@define(content)" height="100%" width="100%">
      model="@load(vm.o)" emptyMessage="${c:l('empty_table')}"
      stubonly="true" onCreate="@command('clear')">
   <columns>
      ...cols...
   </columns>
   <template name="model">
      <row>
           <label value="@load(each.data)" />
      </row>
   </template>
</grid> 
```

爪哇：

```
 public class Pojo {

     private List<Object> o;
     private Grid g;

     @Init
     public void init(){
        o = loadFromDaoOneHundredItems()
     }

     @AfterCompose
     public afterCompose(@ContextParam(ContextType.VIEW) Component view){
          g.setPageSize(1000);
     }
 } 
```

**UPD**

```
 final Rows rs = new Rows();
    for (int i = 0; i < 1000; i++) {
        final Row r = new Row();
        r.appendChild(new Label("sdf"));
        r.appendChild(new Label("sdf"));
        r.appendChild(new Label("sdf"));
        rs.appendChild(r);
    }
    grid.appendChild(rs);
    ListModelList<Object> o = null;
    grid.setModel(o); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T12:34:32.903

ZK 提供了许多方法来处理你的逻辑客户端。
首先你应该阅读[客户端zk手册的通信部分](http://books.zkoss.org/wiki/ZK%20Client-side%20Reference/Communication)。
此外，[这个遮阳篷](https://stackoverflow.com/a/13438088/1787809)应该很有帮助。

你应该知道，`model="@load(vm.o)"`调用`Grid.setModel(...)`
并保存一个引用，这样javas gc就不会删除数据。

所以我认为解决这个问题的唯一方法是，即使它
打破了我对 MVVM 的理解，仍然使用 MVVM，那就是调用

```
onCreate="@command('createRows',grid=self)" 
```

并添加一个方法

```
@Command("createRows")
public void createRows(@BindingParam("grid") Grid grid){
 //add rows manually here
} 
```

但我不得不说，对于你的任务，我更喜欢使用 ZK MVC，
因为更好的可读性/可维护性和更多的 java 控制 cos。

# android - 如何从 Android 读取和写入 NfcA 卡

> ID：13904511
> 
> 赞同：5
> 
> 时间：2012-12-16T19:00:11.833
> 
> 标签：android, nfc

我制作了一个在发送意图 android.nfc.action.TAG_DISCOVERED 时调用的应用程序，但是我想在 onNewIntent 方法中获取卡的信息，但我不知道如何处理这种nfc 卡。我尝试使用以下代码：

```
 public void onNewIntent(Intent intent) {
        Tag tagFromIntent = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
        //do something with tagFromIntent
        NfcA nfca = NfcA.get(tagFromIntent);
        try{
            nfca.connect();
            Short s = nfca.getSak();
            byte[] a = nfca.getAtqa();
            String atqa = new String(a, Charset.forName("US-ASCII"));
            tv.setText("SAK = "+s+"\nATQA = "+atqa);
            nfca.close();
        }
        catch(Exception e){
            Log.e(TAG, "Error when reading tag");
            tv.setText("Error");
        }
    } 
```

tv 是一个 TextView，但是当执行此代码时，它永远不会改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:09:50.437

如果您的活动已经在运行并且设置为 singleTask，则会调用 OnNewIntent。您需要将代码设为自己的方法并在 onCreate() 和 onNewIntent() 中调用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-18T03:45:01.770

如果您有其他应用程序可以在更高级别（NDEF_DISCOVERED 或 TECH_DISCOVERED）管理相同的标签，那么您的应用程序只管理较低级别，永远不会被调用。

要使用您的应用程序，您需要打开您的应用程序，而不是扫描标签。

如果您的应用永远无法启动，请确保已完成以下步骤：

在 OnCreate() 中获取您的 NfcAdapter：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.activity_main);

   ....
   mNfcAdapter = NfcAdapter.getDefaultAdapter(this);

   if (mNfcAdapter == null) {
      // Stop here, we definitely need NFC
      Toast.makeText(this, "This device doesn't support NFC.", Toast.LENGTH_LONG).show();
      finish();
      return;
    }

    //method to handle your intent
    handleTag(getIntent());
} 
```

在 onResume 中启用前台调度：

```
@Override
public void onResume() {
   super.onResume();

   final Intent intent = new Intent(this.getApplicationContext(), this.getClass());
   final PendingIntent pendingIntent = PendingIntent.getActivity(this.getApplicationContext(), 0, intent, 0);

    mNfcAdapter.enableForegroundDispatch(this, pendingIntent, null, null);
} 
```

在 onPause 禁用它：

```
@Override
protected void onPause() {
   mNfcAdapter.disableForegroundDispatch(this);

   super.onPause();
} 
```

在 onNewIntent 调用函数来处理你的意图

```
@Override
protected void onNewIntent(Intent intent) {
   super.onNewIntent(intent);

   handleTag(intent);
} 
```

在您的函数中处理您的标签：

```
private void handleTag(Intent intent){
   String action = intent.getAction();
   Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

   if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(action){

      // here your code
   }
} 
```

不要忘记在清单中添加权限：

```
<uses-permission android:name="android.permission.NFC" />

<uses-feature  
   android:name="android.hardware.nfc"
   android:required="true" />

<activity>
   ....
   <intent-filter>
      <action android:name="android.nfc.action.TAG_DISCOVERED"/>
   </intent-filter>
</activity> 
```

更多信息在这里[NFC 基础](http://developer.android.com/guide/topics/connectivity/nfc/nfc.html)和这里[阅读 NFC 标签](http://code.tutsplus.com/tutorials/reading-nfc-tags-with-android--mobile-17278)

# highcharts - Highcharts 错误 #13 除非我在 IE 兼容性视图下运行？

> ID：13904514
> 
> 赞同：0
> 
> 时间：2012-12-16T19:00:21.143
> 
> 标签：highcharts, ie-compatibility-mode

我正在开发一个使用 WCF 服务（.svc 不是 .asmx）将 JSON 数据发送到 highcharts 的 asp 应用程序。如果我使用 ie 兼容性视图，它似乎才有效。如果我没有收到消息：

Microsoft JScript 运行时错误：Highcharts 错误 #13：[http ://www.highcharts.com/errors/13](http://www.highcharts.com/errors/13)

错误号 13 以及在线搜索表明我没有合适的 DIV 租户，但它存在。有什么想法可以使我的应用程序在不兼容视图中工作吗？

谢谢！

根据要求，这里有一些代码。我有两张图表并排放置，一张处理“低”周转项目，另一张处理高周转项目。这是低项目图表，因此它呈现给命名的 containerLow。

```
var lowchart = new Highcharts.Chart({
        chart: {
            renderTo: 'containerLow'
        },
        xAxis: {                
        },
        plotOptions: {
            series: {
                cursor: 'pointer',
                point: {
                    events: {
                        click: function () {
                            //ChartClicked(this.x, this.y, this, this.series.name, this.series.color, this.index);
                            ChartClicked(this, 'Low');                                
                        }
                    }
                }
            }
        },
        tooltip: {

            formatter: function () {
                var txt = "$= <b>" + this.point.x + "</b><br/>"
                            + "Wait = <b>" + this.point.y + "</b><br/>"
                            + "Other DB Info for future Bow Wave, etc. <b><br/>"
                            + "Avg Fill Rate = <b>" + this.point.config.averageFillRate + "</b><br/>"
                            + "Average On Hand = <b>" + this.point.config.averageOnHand + "</b><br/>"
                            + "Average Workload = <b>" + this.point.config.averageWorkload + "</b><br/>"
                return txt;
            }
        }
    }); //end chart 
```

我的 Web 服务得到一个包含多个系列的 JSON 字符串。在页面加载时，我调用 Web 服务（高低项目两次）并循环遍历系列数组以绘制多条曲线。

```
function pageLoad() {
    JSONGraphing.GetDataDB(getParameterByName("id"), 2, OnGetDataCompleteLow, OnError);
    JSONGraphing.GetDataDB(getParameterByName("id"), 1, OnGetDataCompleteHigh, OnError);
} 
```

这是低图的回调函数之一的示例。

```
 function OnGetDataCompleteLow(result) {
    var webServiceData = eval("(" + result + ")");

    for (var i = 0; i < webServiceData.series.length; i++) {
        lowchart.addSeries({
            data: webServiceData.series[i].data
        });
    }

    lowchart.yAxis[0].setTitle({
        text: 'Wait time in Days'
    });

    lowchart.xAxis[0].setTitle({
        text: 'Investment in Dollars'
    });

    lowchart.setTitle({ text: 'Low Frequency Items' });

} 
```

我有一点时间紧缩任何和所有的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:39:23.790

为了确保容器存在，您必须在渲染后运行代码，可以通过以下方式完成。

```
document.ready(function() {
    // your code
}); 
```

或者

```
<div id="container"> </div>
<script type="type="text/javascript"">
    // your code here
</script> 
```

或者

```
(function() {
    // your code here
}) 
```

# google-chrome-extension - 无法将内容脚本插入 apps.facebook.com 页面

> ID：13904515
> 
> 赞同：0
> 
> 时间：2012-12-16T19:00:31.427
> 
> 标签：google-chrome-extension, facebook-apps, content-script

我想使用 chrome 扩展将 js 文件插入到网页中。所以我把这段代码写到清单文件中：

```
 "content_scripts": [
    {
      "matches": ["https://apps.facebook.com/frivacy/*", "http://apps.facebook.com/frivacy/"],
      "js": ["jquery.js", "catch.js"]
    }
  ] 
```

问题是它不能在这些页面中插入任何脚本。我尝试了其他页面，并且相同的代码能够在这些页面中插入脚本......但尤其是这个页面。为什么 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T19:27:01.637

好的......解决了这个问题......所以问题是facebook将我所有的代码都放在一个iframe中......所以我只是改变了一行chrome manifest并且它正在工作......

在内容脚本部分中，添加：“all_frames”：true

所以这会将 javascript 代码插入到所有帧中，现在它正在工作......不过谢谢.. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T05:54:07.837

`*`您可以尝试使用匹配模式的尾随，`"http://apps.facebook.com/frivacy/*"`并让我知道它是否仍然失败。

# java - 当我将 url-pattern 更改为“/”时无法访问静态资源

> ID：13904518
> 
> 赞同：0
> 
> 时间：2012-12-16T19:00:42.497
> 
> 标签：java, spring, jakarta-ee, web

我用 Spring 框架用 Java 编写了一个应用程序。在 web.xml 中，我定义了 servlet 映射，当我使用“/”模式时，我得到了很好的 url，例如“/login”，“/register”，这很好，但是对 .jpg 或 .css 等静态资源的访问被阻止了。如果我使用像“*.html”这样的模式资源可以正常工作，但我不想要像“/login.html”这样的url。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:04:33.823

在调度程序 servlet 配置中设置资源处理程序。这将允许具有`/resources/`url 模式的所有请求避免被调度程序 servlet 路由。使用此配置时，您需要将所有静态资源放在名为 resources 的目录中。

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
<mvc:resources location="/resources/" mapping="/resources/**" /> 
```

[文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-static-resources)

# c# - 通过套接字加载图像

> ID：13904523
> 
> 赞同：1
> 
> 时间：2012-12-16T19:00:59.890
> 
> 标签：c#, sockets

我目前正在接收文本：

```
private void ReceiveCallback(IAsyncResult AR)
{
    try
    {
        int received = _clientSocket.EndReceive(AR);

        //string text = Encoding.ASCII.GetString(_buffer);
        Array.Resize(ref _buffer, received);
        //AppendToTextBox(text);
        Array.Resize(ref _buffer, _clientSocket.ReceiveBufferSize);
        _clientSocket.BeginReceive(_buffer, 0, _buffer.Length, SocketFlags.None, new AsyncCallback(ReceiveCallback), null);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, Application.ProductName, MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

如何阅读图像而不是文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:05:24.767

您可能希望等待收到整个内容，然后：

```
using(var ms = new MemoryStream(entireBuffer)) {
    var image = Image.FromStream(ms);

    // Go ahead and put it in a PictureBox now
} 
```

# facebook-fql - 当我需要来自两个连接表的相关数据时，FQL 替代 SQL JOIN？

> ID：13904537
> 
> 赞同：0
> 
> 时间：2012-12-16T19:03:02.047
> 
> 标签：facebook-fql, status

我正在尝试获取过去喜欢任何用户状态的朋友列表。我在下面有一个多查询可以执行此操作，但结果未按帖子分组。所以，我得到了所有喜欢这些帖子的朋友的列表，但我不知道哪些朋友喜欢哪些帖子。我知道我可以为每个状态运行一个单独的呼叫，但如果可能的话，我想在一个呼叫中执行此操作。有任何想法吗？

```
$queries = '{
    "statuses":"SELECT status_id FROM status WHERE uid=me()",
    "likes":"SELECT user_id FROM like where object_id IN ( SELECT status_id FROM #statuses )",
    "liker":"SELECT name, pic_small FROM user WHERE uid IN (SELECT user_id FROM #likes)"
}';
$param = array(
    'method' => 'fql.multiquery',       
    'queries' => $queries,       
    'callback' => '');       
$queryresults = $facebook->api($param); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:49:59.810

我原以为你可以这样做：

```
$queries = '{
    "statuses":"SELECT status_id FROM status WHERE uid=me()",
    "likes":"SELECT user_id, object_id FROM like where object_id IN ( SELECT status_id FROM #statuses )",
    "liker":"SELECT name, pic_small, uid FROM user WHERE uid IN (SELECT user_id FROM #likes)"
}'; 
```

然后在您的最后，您将拥有将每个映射`status_id`到 s 数组所需的所有信息`name`。它不像执行 SQL JOIN 那样干净或微不足道，但由于这不是一个选项，如果您想在一次 FQL 调用中获取所有数据，这是您可以做的最好的事情。

# php - 在文档中设置php报错而不是php.ini

> ID：13904540
> 
> 赞同：2
> 
> 时间：2012-12-16T19:03:29.750
> 
> 标签：php, runtime, error-reporting

我想在文档中打开错误报告，而不是在我的托管公司服务器上打开 php.ini 文件。根据[手册](http://php.net/manual/en/function.error-reporting.php)，这些函数在运行时设置 error_reporting 指令，因此插入其中任何一个都应该有效，但我只是得到一个空白页。有什么建议么？

```
error_reporting(E_ALL);
error_reporting(-1);
ini_set('error_reporting', E_ALL); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T19:04:29.970

第一个想法是 display_errors 也被关闭了

```
error_reporting(E_ALL);
ini_set('display_errors', 1); 
```

第二个想法是您的主脚本中有错误并且它无法切换这些选项（例如解析错误） - 在这种情况下，您可以尝试将该脚本包含到另一个脚本中，如下所示：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
include('index.php'); 
```

# c - 将 char 转换为 int 并将 int 转换为 double 总是安全的吗？

> ID：13904541
> 
> 赞同：5
> 
> 时间：2012-12-16T19:03:32.077
> 
> 标签：c

对于小端和大端？

如果它们在一个数组中怎么办？也安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:07:08.007

这与字节顺序无关。

正如您[在此处](http://en.wikipedia.org/wiki/C_data_types)看到的，char 几乎可以肯定是 8 位的，因此将其转换为整数在任何意义上都是安全的。

然而，将 int 转换为 double 并非如此。例如，数字 2^63 - 10 不能用 64 位双精度数精确表示。阅读[每位计算机科学家应了解的浮点运算知识。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)在这里，强制转换会导致数字被截断，从而导致精度损失。

幸运的是，所有 32 位整数都可以毫无损失地转换，所以如果你的整数是 32 位长，那就很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:06:54.410

是的，只要您键入转换常规 C 变量，它是安全的。

如果您要更改或移动构成这些变量的原始字节，您只需要担心字节序。

# vb.net - VB.NET GetInstalledVoices 仅适用于 x86，不适用于 AnyCPU

> ID：13904542
> 
> 赞同：0
> 
> 时间：2012-12-16T19:03:40.430
> 
> 标签：vb.net, formatexception

我有以下代码：

```
 Imports System.Speech.Synthesis

 Public Class Form1

     Private Sub Form1_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim m_Synth As New SpeechSynthesizer
        For Each v As InstalledVoice In m_Synth.GetInstalledVoices
            Debug.WriteLine(v.VoiceInfo.Name)
        Next

    End Sub
 End Class 
```

它停在

```
 For Each v As InstalledVoice In m_Synth.GetInstalledVoices 
```

并给我错误“System.FormatException”。

这是堆栈跟踪：

bei System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal) bei System.Number.ParseInt32(String s, NumberStyles style, NumberFormatInfo info) bei System.Speech.Internal.SapiAttributeParser.GetCultureInfoFromLanguageString(String valueString) bei System.Speech.Synthesis.VoiceInfo..ctor(VoiceObjectToken token) bei System.Speech.Internal.Synthesis.VoiceSynthesis.BuildInstalledVoices(VoiceSynthesis voiceSynthesizer) bei System.Speech.Internal.Synthesis.VoiceSynthesis..ctor(WeakReference speechSynthesizer) bei System.Speech.Synthesis.SpeechSynthesizer.get_VoiceSynthesizer() bei System.Speech.Synthesis.SpeechSynthesizer.GetInstalledVoices() bei voice_test.Form1.Form1_Load(Object sender, EventArgs e) 在 C 中：\Users\MyUser\Downloads\kontakt\voice test\voice test\Form1.vb:Zeile 8.

仅当我将项目的“扩展编译选项”设置为“目标 CPU：x86”时才会出现此问题。如果我将其设置为“目标 CPU：任何 CPU”，则代码运行时不会出现任何错误并按预期返回名称。目标框架是“.NET Framework 4”。我正在运行 Win 7 64 位。

有没有人看到可能出了什么问题？

谢谢你。

# javascript - 如何在 iOS Phonegap 中设置 cookie？

> ID：13904543
> 
> 赞同：3
> 
> 时间：2012-12-16T19:03:40.873
> 
> 标签：javascript, jquery, ajax, cordova, reddit

我正在使用 reddit API，并且可以成功登录并接收 cookie 值作为回报。我使用的代码如下

```
loginPost = $.ajax({
type: 'POST',
url: 'http://www.reddit.com/api/login/' + username + '?user=' + username + '&passwd=' + password + '&api_type=json',
xhrFields: {
    withCredentials: true
},
dataType: "json",
success: function() {
    console.log("Define response variables");
    var header = loginPost.getAllResponseHeaders();
    var responseText = loginPost.responseText;
    var match = header.match(/(Set-Cookie|set-cookie): reddit_session=(.+?);/);
    if (match) {
        reddit_session = match[2];
        window.localStorage.setItem("reddit_session", reddit_session);
        window.localStorage.setItem("reddit_username", username);
        window.localStorage.setItem("reddit_password", password);
        console.log("Logged in!");
        //alert(responseText);
        $('.loginWrapper').slideUp('fast', function() {
            $('#feedWrapper').css("top", "44px");
            $('#feedWrapper').css("bottom", "0");
            // Animation complete.
        });
    }

    else {
        reddit_session = null;
        window.localStorage.setItem("reddit_session", null);
        navigator.notification.alert('Your username or password is incorrect. Please try again.');
        console.log("Login Failed");
    }

},
}); 
```

我正在使用存储cookie

```
var header = loginPost.getAllResponseHeaders();
var match = header.match(/(Set-Cookie|set-cookie): reddit_session=(.+?);/);
                                          if(match){
                                          reddit_session = match[2];
                                          window.localStorage.setItem("reddit_session", reddit_session); 
```

但是 cookie 不是通过对[http://www.reddit.com/api/me.json](http://www.reddit.com/api/me.json)的简单请求发送的。返回的只是一个空的 JSON 响应，例如 {}。如果我在浏览器中浏览到该链接（当然，我已登录 reddit），它会返回一个包含所有用户数据的 JSON 字符串。

知道如何存储 cookie 以便在 UIWebView 中使用它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T17:31:36.327

> > 知道如何存储 cookie 以便在 UIWebView 中使用它吗？

iOS cookie 似乎从 phonegap 2.5 开始就存在问题；请参阅 [在 PhoneGap/Cordova 中处理 cookie

我看不到更多最新的（phonegap 3.3）信息 [http://docs.phonegap.com/en/3.3.0/_index.html]

# ruby-on-rails - 带有两个提交按钮的 Rails 条件验证

> ID：13904549
> 
> 赞同：1
> 
> 时间：2012-12-16T19:04:32.717
> 
> 标签：ruby-on-rails, activerecord

我正在尝试制作一个允许用户创建事件的页面。我希望他们能够先保存事件，这会将其放入数据库但不允许其他用户看到它。我还希望允许用户发布事件，这将阻止他们进行更多更改并允许其他用户看到它。

我计划通过在创建事件表单上同时使用“保存”和“发布”按钮来做到这一点。因为保存它意味着它仍然不完整，所以单击此按钮时我真的不需要验证任何内容，但是单击“发布”按钮时我会这样做。

我尝试使用 event.rb 中的以下代码来完成此操作，但是单击任一按钮时正在执行验证。

```
with_options :if => :published? do
  validates_date :date, presence: true, :after => Time.now, :after_message => 'must be in the future'
  validates_time :time, presence: true
end

def published?
  :published == "true"
end 
```

我已经确认 :published 应该只在单击发布按钮时等于“true”。（当用户单击“发布”时，我通过 JS 将 event[published] 设置为 true。否则默认为 false。）

知道为什么验证总是在执行吗？

编辑：我仍然不确定为什么这不起作用，但我确实发现如果我单独检查每个 validates 子句，它会按预期工作，如下所示：

```
validates_date :date, presence: true, :after => lambda { Time.now }, :after_message => 'must be in the future', :if => :published?
validates_time :time, presence: true, :if => :published? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:11:41.313

您可能在这里打错字，请使用 published == "true" 而不是 :published == "true"

```
def published?
    self.published == "true"
end 
```

我还注意到您使用 (:after => Time.now)。我认为在生产中这条生产线只会被评估一次。所以你可能想以某种方式使用 lambda 来确保 Time.now 在验证时总是被调用

# matlab - 滑动线图（动画）

> ID：13904552
> 
> 赞同：0
> 
> 时间：2012-12-16T19:04:42.187
> 
> 标签：matlab

如何使用 MATLAB 在值随时间变化时为折线图设置动画？我的意思是，从数据开始到结束的滑动线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:20:05.687

只需使用更新的值再次执行您的绘图方法，但首先调用

```
hold all 
```

这可以保持显示以前的情节。这当然不是动画，但也许这已经足够了。

# c++ - FMOD_System_CreateSound 运行时错误

> ID：13904553
> 
> 赞同：0
> 
> 时间：2012-12-16T19:04:43.617
> 
> 标签：c++, runtime-error, fmod

我在我的 C++ 项目中使用 FMOD。构建时没有错误或警告，但是在调试时；我从 FMOD_System_CreateSound 函数中得到以下运行时错误：

```
Unhandled exception at 0x008e3f56 in Audio_Demo.exe: 0xC0000005: Access violation reading location 0xfdfdfdfd. 
```

这是函数调用：

```
FMOD_System_CreateSound(system, filename.c_str(), FMOD_DEFAULT, NULL, &sample->sample); 
```

其中，system 是指向 FMOD_SYSTEM 对象的指针，sample 是辅助类，而 sample->sample 是指向 FMOD_SOUND 对象的指针。

如果有任何帮助；在项目中，我将每个参数放在单独的一行上，错误似乎发生在最后一个参数（sample->sample）上。

提前感谢您的帮助。

\,,/[>.<]\,,/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:22:56.963

花了一整天的时间来解决这个问题，只是决定在这里发帖寻求帮助。幸运的是，多一点挖掘，我意识到我的错误。

我没有正确初始化包含 FMOD_SOUND 对象指针的辅助类，所以它为空，因此引发了错误。只需在我的初始化函数中切换几行代码就可以对此进行排序（即我的帮助类在调用 FMOD_System_CreateSound 之前被初始化）

想我会发布我找到的解决方案，因为当海报提出问题时我无法忍受；弄清楚并说：“啊，没关系。我解决了！” 没有与世界其他地方分享答案。

希望这会帮助遇到类似问题的人。如果没有，请发表评论，我会尝试进一步澄清。

\,,/[>.<]\,,/

# facebook-android-sdk - Facebook SDK for Android 示例项目的问题

> ID：13904559
> 
> 赞同：1
> 
> 时间：2012-12-16T19:05:14.197
> 
> 标签：facebook-android-sdk

我将 Facebook SDK 以及一些示例项目导入了 Eclipse。我在所有这些上都有红色 X，但我设法修复了。现在我还有一些红色的X。当我查看这些项目的 java 文件时，其中有错误（例如这样的一行：`setContentView(R.layout.main);`我看到以下错误：

```
R cannot be resolved to a variable. 
```

当我查看 main.xml 布局文件时，我看到这样的错误：

```
Multiple annotations found at this line:
- error: No resource identifier found for attribute 'confirm_logout' in package 
 'com.facebook.samples.hellofacebook'
- error: No resource identifier found for attribute 'fetch_user_info' in package 
 'com.facebook.samples.hellofacebook' 
```

我尝试转到 Android 工具 -> 修复项目属性，但这没有帮助。有什么问题，如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T19:42:21.343

尝试去项目>清理所有项目>确定，看看是否有帮助。如果不是，它可能与您的构建路径、依赖项或它们的组合有关。在这些情况下，Eclipse 非常脆弱。如果您转到“问题”选项卡并粘贴您遇到的不同错误，它可能会为我们提供更多上下文来帮助您。

# networking - 如何解决这种网络竞争状况？

> ID：13904560
> 
> 赞同：0
> 
> 时间：2012-12-16T19:05:16.553
> 
> 标签：networking, race-condition

我有一个多人扑克游戏，其中许多客户端连接到服务器。比赛目前处于最后一轮投注中。一个客户决定不玩下一手牌并向服务器发出他正在坐下的信号，但在服务器将手牌发给客户端之后，坐下信号到达。因此，选择坐下的客户在他不应该坐的时候得到了帮助。我该如何解决这个问题？这是一个图表。

```
 client        server
 | send(sitout)
 |               send(hands)
 |               recv(sitout)
 V recv(hand) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:09:50.253

客户端应该发送“Sitout”或“Ready”信号，然后服务器将决定是否将手交给客户端。

解决比赛条件不是及时倒退！在获得有关他将要做什么的所需信息之前，没有实体（在这种情况下是服务器）可以做任何事情:)

# php - 从填充选项的下拉列表中获取所选项目

> ID：13904563
> 
> 赞同：0
> 
> 时间：2012-12-16T19:05:39.330
> 
> 标签：php

我有这段代码来获取文件的名称并将它们添加到下拉列表中：

```
<?php
$dir = "uploads";
$dh = opendir($dir);
echo "<select name=case>"; 
while (($file = readdir($dh)) !== false) {
    $ext = strtolower(pathinfo($file, PATHINFO_EXTENSION));
    $name = (pathinfo($file, PATHINFO_FILENAME));
    if ($file != "." && $file != ".." && $ext == "jpg") 
    {
        echo "<option value=".$dir."/".$file .">" . $name . "</option>"; 
    }
}
echo "</select>"; 
closedir($dh);
?> 
```

现在我想添加一个提交按钮并从**同一页面**的下拉列表中打印所选项目的文件路径（*值*） 。

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:10:48.833

1.  `<select>`为您的元素添加一个 ID ：

    ```
    echo "<select id='selCase' name='case'>"; 
    ```

2.  插入将包含所选值的元素

    ```
    // After closedir($dh);
    echo "<div id='divOut'></div>"; 
    ```

3.  插入一段 JavaScript：

    ```
    document.addEventListener("ready", function () {
      document.getElementById("selCase").addEventListener("change", function () {
        var val = this.options[this.selectedIndex].value;
        document.getElementById("divOut").innerHTML = val;
      });
    }); 
    ```

**但**我建议您阅读有关 JavaScript 开发的网站/书籍/教程！**

# css - 在 FF 和 IE9 中工作的 CSS 中心列？

> ID：13904568
> 
> 赞同：1
> 
> 时间：2012-12-16T19:06:56.180
> 
> 标签：css, layout, styles, fixed-width

我完全是 CSS 布局的初学者，但我试图开始一个基本的布局，它只是一个“固定宽度”的中心列（只有一个 div），以便两侧灵活。我知道这不是响应式/反应式的，但我才刚刚开始。

所以我尝试了谷歌搜索大量示例，但我找不到适用于 FF 和 IE9 的起点？我的意思是刚刚开始，他们是不同的？

这是我尝试过的简单样式的最新示例：

```
* { padding: 0; margin: 0; }

body {
 font-family: Arial, Helvetica, sans-serif;
 font-size: 13px;
 background: #f5f5f5;
}
#wrapper { 
 margin: 0 auto;
 width: 922px;
}
#content { 
 width: 900px;
 color: #333;
 border: 0px solid #f5f5f5;
 background: white;
 margin: 0px 0px 0px 0px;
 padding: 10px;
 height: 600px;
} 
```

所以这是一开始，但 FF 已经显示它与中心对齐，而 IE 没有。因此，我尝试的所有操作（即左：50% 和边距右：-461px，作为我发现的示例）都会对这些产生不同的影响。我到处阅读这是一个非常常见的挑战，但我担心这里有一些我不知道的基础逻辑？

非常感谢您对此的任何帮助！

编辑：感谢您的评论！我确实有以下内容，它再次适用于 IE（和 chrome）但不适用于 FF？

CSS：

```
* { padding: 0; margin: 0; }

body {
 font-family: Arial, Helvetica, sans-serif;
 font-size: 13px;
 background: #f5f5f5;
}
#wrapper { 
 margin: 0 auto;
 width: 922px;
 margin-left:auto;
 margin-right:auto;

}
#content { 
 width: 900px;
 color: #333;
 border: 2px solid #f5f5f5;
 background: white;
 padding: 10px;
 height: 600px;
 position:absolute;
 left:50%;
 margin-left:-461px;
}

#welcomeBanner{
    text-align:center;
    font-family:"segoe ui light","segoe ui","segoe";
    font-size:18pt;
    padding-top:20px;
    padding-bottom:20px;
    margin-top:0px;
} 
```

html: 从字面上看只是：

```
 <div id="wrapper">
        <div id="content">
            <div id="welcomeBanner">Attempting to Learn This Stuff<div>
        </div>
    </div> 
```

所以在 IE9 和 Chrome 中我得到了中心的标题，用背景颜色固定的大框中心等。在 FF 中什么都没有。我喜欢根本没有应用于页面的样式？我在头部使用了一个链接标签，但它显然在那里并且为其他人工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:28:47.660

```
body {
    width:100%
}

div {
    width: 900px;
    margin:0 auto;
} 
```

应该管用

cf[在 IE9 中使用边距使 Div 居中：auto](http://stever.ca/other-stuff/centering-a-div-in-ie9-using-marginauto/)

# javascript - JSTree：如何放置表单项（如) 成树节点？我的 JSTree 节点属于 html 类型：“html_titles：true”。我想在这些节点中放入表单项（如 <select>、<option>...）。我可以使用“rename_node”来做到这一点，但是当可编辑项目出现时，用户无法修改任何内容：单击</option></select> 项目不会让用户修改其内容......似乎有与拖放插件有冲突：当此插件未激活时，我们可以毫无问题地使用表单项......关于解决方案的

> ID：13904569
> 
> 赞同：0
> 
> 时间：2012-12-16T19:06:54.723
> 
> 标签：javascript, jstree

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T16:02:07.013

我找到了一种方法来禁用单个节点上的拖放，具体取决于节点的动态属性类（我称之为“inEdition”）

但我不得不更改 JSTree 代码（大约第 2400 行）：

```
.delegate("a", "mousedown.jstree", $.proxy(function (e) { 
    if(e.which === 1) {
        /*this.start_drag(e.currentTarget, e);
        return false;*/
        o = this._get_node(e.currentTarget);
        if(this.data.ui && this.is_selected(o)) { o = this._get_node(null, true); }
        if (!o.hasClass("inEdition")) {
            this.start_drag(e.currentTarget, e);
            return false;
        }
    }
}, this)) 
```

我还必须禁用关于第 2200 行的 3 行：

```
/*e.currentTarget.unselectable = "on";
e.currentTarget.onselectstart = function() { return false; };
if(e.currentTarget.style) { e.currentTarget.style.MozUserSelect = "none";}*/ 
```

希望它可以帮助某人

# android - 使用 android dungeons 示例如何从应用内购买中检索订单号

> ID：13904571
> 
> 赞同：0
> 
> 时间：2012-12-16T19:07:12.653
> 
> 标签：android, in-app-purchase

我目前正在使用地牢示例来实现从谷歌购买 inApp 并且大部分似乎都在工作。我目前将购买加载到我的数据库中，以存储给定用户进行的所有购买，这是由我从设备获得的 udid 存储的，当我看到 onPurchaseStateChange 方法返回 PurchaseState.PURCHASED 时完成。我需要能够将其映射到以下数据之一，即 Google 订单号我们的公司订单号，例如显示在发送给客户的收据上。

```
Google order number: 4444555552219333 - XYZ Inc Order #66666633355555224444.3332214444224444 
```

我怎样才能做到这一点。在交易过程中，我找不到从谷歌返回此信息的位置。希望当我发现 PurchaseState.PURCHASED 被返回时，我还能够获得与同一个呼叫中的任何一个订单号匹配的附加数据，但如果我必须再做一个，我想我可以在此时拨打电话但我不知道什么时候做或实际调用什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T04:04:20.733

在继续研究答案时发现：

当用户购买应用内商品时，Google Checkout 会为该交易分配一个唯一且永久的订单号。Google Play 在购买流程结束时向您提供该订单号，作为 PURCHASE_STATE_CHANGED 意图的 orderId 字段的值。

在您的应用中，您可以将订单号用作应用内购买交易的通用标识符。购买后，您可以使用订单号作为在对账报告中跟踪交易和获得客户支持的一种方式。

订单号本身是一个仅由数字组成的字符串，其格式由 Google Checkout 分配和管理。

对于日期为 2012 年 12 月 5 日或之后的交易，Google Checkout 会分配商家订单号（而不是 Google 订单号）并将商家订单号报告为 orderID 的值。这是一个例子：

“orderId”：“12999556515565155651.5565135565155651”

对于 2012 年 12 月 5 日之前的交易，Google checkout 分配了一个 Google 订单编号，并将该编号报告为 orderID 的值。下面是一个包含 Google 订单号的 orderID 示例：

“orderId”：“556515565155651”

因此，通过解析意图，您可以确定与之关联的特定订单并将其存储或使用它来确认购买或其他详细信息

# google-fusion-tables - 将融合表与应用程序发明者一起用作数据库

> ID：13904580
> 
> 赞同：0
> 
> 时间：2012-12-16T19:09:00.443
> 
> 标签：google-fusion-tables, app-inventor

容易回答的问题（我希望）

需要将融合表与应用程序发明者一起用作数据库，但需要让每个应用程序都可以访问它，而无需使用用户 ID 登录。

应用发明者有这个功能吗？相信我需要为“已安装的应用程序”设置 API，但不知道我需要在应用程序发明者的哪个位置输入 SHA1 代码。

应用程序是“匿名”更新数据库而无需登录。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T23:11:42.987

我认为内置的[Fusiontables Controls](http://appinventor.mit.edu/explore/content/not-ready-prime-time.html#FusiontablesControl)无法做到这一点，另请参阅[Pizza Party 教程](http://appinventor.mit.edu/explore/content/pizzaparty.html)中的注释：

> 关于共享 Fusion Tables 的注意事项：要与他人共享 FusionTable，您必须单独邀请每个人，就像共享私人 google 文档一样。无法与公众共享对 FusionTable 的写入权限。公共访问仅限于只读。

然而，这可以通过使用 Web 组件的[App Inventor - Fusiontable 界面实现。](http://puravidaapps.com/taifunFT2.php)要准备登录免费访问，请使用您的登录名运行界面并将接收到的刷新令牌作为变量存储在您的应用程序中。然后您可以构建您的应用程序，发布它并使用存储的授权运行界面，而无需再登录。然后，用户将使用所有者权限访问您的融合表。

另请参阅[此类似问题](https://stackoverflow.com/questions/12949701/use-fusion-table-like-a-database-with-php-and-how-to-dismiss-the-prompt-page-whe)和[此处](https://developers.google.com/fusiontables/docs/articles/oauthfusiontables)

> **应用 1 - 像数据库一样使用 Fusion Tables***
> 
> ...
> 
> 换句话说，如果您在自己的帐户中拥有一个 Fusion Table，并希望用作应用程序中的数据库，您只需获取该帐户的访问和刷新令牌，并将访问令牌用于对 Fusion 的所有请求表。当访问令牌过期时，返回 401: Unauthorized 消息，刷新令牌可用于请求新的访问令牌。
> 
> ...
> 
> 然后，您可以将访问和刷新令牌安全地保存在应用程序可访问的位置，并在代码中使用它们向 Fusion Tables 发出请求。

**编辑**：您现在可以[在这里找到一个运行示例](http://puravidaapps.com/fusionDB.php)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:17:05.377

如果您的应用只需要一个数据库，还可以考虑使用 Google Cloud SQL，它在云上提供熟悉的 MySQL 功能。 [https://developers.google.com/cloud-sql/](https://developers.google.com/cloud-sql/)

# php - 在多列中搜索多个术语

> ID：13904581
> 
> 赞同：2
> 
> 时间：2012-12-16T19:09:07.737
> 
> 标签：php, sql, search

我有一个搜索用户名的搜索表单。问题是，在我的数据库中，我有一个单独的名字和姓氏列。这就是我的查询当前的样子（这是在 PHP 脚本中，$term 是搜索输入）：

```
SELECT * FROM profiles WHERE firstname LIKE '%$term%' OR lastname LIKE '%$term%' 
```

当用户只输入名字或姓氏时，这可以正常工作，但对于诸如“John Smith”之类的全名，这将不起作用。

如何修改我的查询和/或 php 脚本以有效地解决此问题？例如，我应该先拆分字符串，还是等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:12:17.757

你可以做类似的事情

```
WHERE firstname||' '||lastname LIKE '%$term%' 
```

这将 firstname 加上一个空格加上 last name 与`%$term%`.

但是，您不应该使用变量构建 SQL 查询。您应该通过 PDO 使用参数化查询。有关示例，请参见[http://bobby-tables.com/php.html](http://bobby-tables.com/php.html)。

# sql - 将记录分组到不连续的一小时箱中

> ID：13904588
> 
> 赞同：3
> 
> 时间：2012-12-16T19:10:08.070
> 
> 标签：sql, ms-access, ms-access-2007

我有表单的事件数据，其中 eventId 很长，时间是日期/时间（为简单起见，下面仅显示时间，因为所有时间都在同一天）：

```
eventId    time
---------------
   1       0712
   2       0715
   3       0801
   4       0817
   5       0916
   6       1214
   7       2255 
```

我需要组成包含一个小时的事件的组，其中小时是从该组的第一次开始计算的。使用上述数据我的分组将是

```
Group 1 (0712 to 0811 inclusive): events 1, 2, 3
Group 2 (0817 to 0916 inclusive): events 4, 5
Group 3 (1214 to 1313 inclusive): event 6
Group 4 (2255 to 2354 inclusive): event 7 
```

我发现了很多在预定义时间段（例如每小时、每天、5 分钟）对数据进行分组的示例，但与我正在尝试做的事情完全不同。我怀疑使用直接 SQL 是不可能的……这似乎是一个先有鸡还是先有蛋的问题，我需要根据数据本身将数据放入 bin 中。

这个问题的基石是想出每个范围的开始时间，但除了简单的情况外，我想不出任何东西：第一次开始时间。

我能想出的唯一方法是以编程方式（在 VBA 中）执行此操作，我将数据选择到临时表中，并在将行放入 bin 时删除行。换句话说，找到最早的时间，然后在 1 小时内抓取该时间和所有记录，将它们从表中删除。获取剩余记录的最早时间并重复直到临时表为空。

理想情况下，我想要一个 SQL 解决方案，但我自己无法想出任何接近的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:31:55.250

关于可能的方法的一些注释。

```
Dim rs As DAO.Recordset
Dim db As Database
Dim rsBins As DAO.Recordset
Dim qdf As QueryDef 'Demo

Set db = CurrentDb

'For demonstration, if the code is to be run frequently
'just empty the bins table
db.Execute "DROP TABLE Bins"
db.Execute "CREATE TABLE Bins (ID Counter, Bin1 Datetime, Bin2 Datetime)"

'Get min start times
db.Execute "INSERT INTO bins ( Bin1, Bin2 ) " _
   & "SELECT Min([time]) AS Bin1, DateAdd('n',59,Min([time])) AS Bin2 " _
   & "FROM events"

Set rsBins = db.OpenRecordset("Bins")

Do While True
    Set rs = db.OpenRecordset("SELECT Min([time]) AS Bin1, " _
    & "DateAdd('n',59,Min([time])) AS Bin2 FROM events " _
    & "WHERE [time] > (SELECT Max(Bin2) FROM Bins)")

    If IsNull(rs!Bin1) Then
        Exit Do
    Else
        rsBins.AddNew
        rsBins!Bin1 = rs!Bin1
        rsBins!bin2 = rs!bin2
        rsBins.Update
    End If
Loop

''Demonstration of final query.
''This will only run once and then error becaue the query exists, but that is
''all you need after that, just open the now existing binned query

sSQL = "SELECT events.Time, bins.ID, bins.Bin1, bins.Bin2 " _
     & "FROM events, bins " _
     & "GROUP BY events.Time, bins.ID, bins.Bin1, bins.Bin2 " _
     & "HAVING (((events.Time) Between [bin1] And [bin2]));"

Set qdf = db.CreateQueryDef("Binned", sSQL)
DoCmd.OpenQuery qdf.Name 
```

# google-app-engine - 阅读引发争用的实体组？

> ID：13904589
> 
> 赞同：1
> 
> 时间：2012-12-16T19:10:28.180
> 
> 标签：google-app-engine, transactions, datastore

我的应用程序中有一个函数可以在事务中进行一些处理 - 根据实体组中其他人的属性创建或未能创建实体。

我一直在做一些测试，看到这个函数被快速连续调用，在这些测试中每秒几次是可能的。

该函数触发一些从实体组读取但不写入的延迟任务。

我注意到一些有趣的事情——当这些任务被立即触发并与主函数调用交错时，我经常遇到争用错误。

如果我在延迟任务上倒计时几秒钟，主要功能就会成功处理。

这向我表明，延迟任务导致主函数写入的实体组发生争用 - 但我认为从实体组读取不能做到这一点？按键名查找会导致争用吗？带过滤器的查询？

这让我有点困惑。这应该发生吗？我在其他地方读到过，每个实体组每秒写入 1 次的限制，但我的测试经常打破这个限制……至少当我的衍生延迟任务延迟几秒钟时。

顺便说一句，这是在生产中。

感谢您的任何见解！

# android - 列表视图未填充弹出窗口

> ID：13904592
> 
> 赞同：1
> 
> 时间：2012-12-16T19:10:46.183
> 
> 标签：android, android-listview, popup

我试图用列表视图填充我的弹出窗口。但不知何故我没有得到数据。请帮帮我。

我在此使用 openPopup() 函数来启动弹出窗口，并且 fillDataPopup() 用于在弹出窗口中填充数据。如果您需要更多详细信息，请告诉我

谢谢

```
/**
     * FUNCTION TO SHOW LIST OPTIONS ON LISTS BUTTON
     */
    public void openPopup(){
        LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);  
        View popupView = layoutInflater.inflate(R.layout.task_list_popup, null);
        final PopupWindow popupWindow = new PopupWindow(popupView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT); 
        popupWindow.setFocusable(true);

        Button  btnDismiss = (Button) popupView.findViewById(R.id.dismissBUtton);
        btnDismiss.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                popupWindow.dismiss();
            }
        });
        fillDataPopup();
        popupWindow.showAsDropDown(listsButton, 50, -30);

    }

    public void fillDataPopup(){

        Cursor remindersCursor = mDBHelper.fetchAllReminders();          
        startManagingCursor(remindersCursor);                          

        // Create an array to specify the fields we want (only the TITLE)
        String[] from = new String[]{TasksDBAdapter.KEY_TITLE};     

        // and an array of the fields we want to bind in the view
        int[] to = new int[]{R.id.listNameTextId};                                

        // Now create a simple cursor adapter and set it to display -mapping layout with data
        SimpleCursorAdapter reminders = new SimpleCursorAdapter(this, R.layout.popup_lists_name,remindersCursor, from, to);   
        setListAdapter(reminders);
       // listNames.setAdaper(reminders);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:14:51.893

这是什么类型的课？列表活动，列表片段？我不相信您可以使用这些类来填充这样的 ListView。

您需要使用`popupView.findViewById()`来定位您的 ListView 并将适配器直接传递给它。像这样的东西：

```
listNames = popupView.findViewById(R.id.xxx); 
```

并恢复：

```
listNames.setAdaper(reminders); 
```

# javascript - 删除动态添加的元素

> ID：13904595
> 
> 赞同：0
> 
> 时间：2012-12-16T19:11:03.933
> 
> 标签：javascript, jquery

我正在尝试删除动态添加到`<head>`标记末尾的样式表

由于某些原因，我被迫使用 javascript 来删除该样式表标签并添加我自己的

这是我尝试过的代码-

```
jQuery(document).ready(function(){
jQuery('link[href^="somepath/editor.css"]').remove();
jQuery('head').append("<link href='somepath/custom/editor.css' type='text/css' rel='stylesheet' />");
}); 
```

问题是这个函数是在 CkEditor 函数之前执行的。所以我的样式表是在我尝试使用的 ckeditor 样式表和 ckeditor 样式表之前添加的`.load`，`.ready`但是代码似乎根本没有运行。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:18:08.407

如果您不知道何时添加 css，您可以使用 setInterval 进行轮询。

```
var interval = setInterval(function(){
    var css = jQuery('link[href^="somepath/editor.css"]')
    if (css.length){
        css.remove();
        jQuery('head').append("<link href='somepath/custom/editor.css' type='text/css' rel='stylesheet' />");
        clearIntrval(interval);
    }
}, 500); 
```

# c# - 静态修饰符如何工作？

> ID：13904602
> 
> 赞同：2
> 
> 时间：2012-12-16T19:11:41.007
> 
> 标签：c#, static

假设我有一个静态属性，如下所示：

```
public static object MyProperty
{
   get { return new object(); }
} 
```

上面的属性是一样的吗？

```
private static object my_filed = new object();

public static object MyProperty
{
   get { return my_filed; }
} 
```

即：是每次调用静态属性时创建的新对象还是仅第一次创建的新对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:13:12.320

每次读取属性时都会执行属性getter，因此每次都会创建一个新的对象实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:13:58.740

两种机制是不同的。在第一个中，它每次都会创建新对象。

虽然`Static methods/variables`与类定义相关联，但是只要调用该方法，就会执行在静态方法中编写的代码。在您的示例中，您编写了创建新对象实例的语句，因此**每当调用该方法时它将创建一个新对象实例。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-16T19:14:17.937

不，这不对。

```
public static object MyProperty
{
   get { return new object(); }
} 
```

每次都会返回一个新的对象实例，这可能不是你想要的，并且

```
private static object my_filed = new object();

public static object MyProperty
{
   get { return my_filed; }
} 
```

每次将返回类对象的相同实例，使其成为单例。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T19:15:33.357

静态属性类似于静态方法。它使用要访问的复合名称。静态属性使用与实例属性相同的 get 和 set 标记。在您的程序中，第一种情况每次都会创建新对象。二不。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-16T19:17:48.480

要知道正确的答案，您需要知道什么是属性。属性只不过是一种对您隐藏的方法。

`var myVar = MyClass.MyProperty`无非如此`var myVar = MyClass.get_MyProperty()`。所以当你打电话时：

```
public static Object MyProperty
{
    get { return new Object(); }
} 
```

您正在调用一个每次创建一个新对象的方法。所以答案是否定的，代码不一样。[static 修饰符还有其他作用](http://msdn.microsoft.com/en-us/library/98f28cdx.aspx)。

# php - 无法使用 ajax 将多维数组传递给 php

> ID：13904605
> 
> 赞同：2
> 
> 时间：2012-12-16T19:11:49.467
> 
> 标签：php, jquery, ajax

我试图传递的数组：

```
var params = [];
params['request'] = "movies";
params['param'] = [];
params['param']['sortBy'] = "title";
params['param']['sortOrder'] = "asc"; 
```

阿贾克斯调用：

```
return $.ajax({
        type: "POST",
        url: "http://192.168.0.100:83/getData.php",
        cache:false,
        data: params,
        dataType:"json",
        success: function(data){
            if(data != null){
                            console.log(data);
                        } 
```

问题是 php 脚本只接收 $_POST['request']，params 不存在。

如果我在 ajax 调用之前在控制台日志中查看 params 数组，我会看到：

```
[request: "movies", param: Array[0]]
length: 0
param: Array[0]
length: 0
sortBy: "title"
sortOrder: "asc"
__proto__: Array[0]
request: "movies"
__proto__: Array[0] 
```

似乎问题可能是“param”参数没有被传递，因为它被视为空（它不是，至少在它被传递给ajax调用之前），但为什么会发生这种情况我不知道。我在这里想念什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:36:28.643

您已声明`params`为一个数组`[]`，但使用该`["string"]`符号为其分配了对象属性。这导致空数组带有附加到`Array`对象的附加属性。

相反，它应该被声明为一个对象字面量，其中嵌套了另一个对象字面量。

```
var params = {
  request: "movies",
  param: {
    sortBy: "title",
    sortOrder: "asc"
  }
}; 
```

的结构`$_POST`应该是这样的：

```
Array
(
    [request] => movies
    [param] => Array
        (
            [sortBy] => title
            [sortOrder] => asc
        )

) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:32:00.143

您可以将数据作为 JSON 发送并使用 php 将其解码`json_decode()`：

```
$.ajax({        
        data: { paramData: JSON.stringify( params),
       /* other ajax options*/

}) 
```

然后在 php 中接收它：

```
$params= json_decode($_POST['paramData']); 
echo $params['request']; /* should return "movies" as response*/ 
```

为不支持 JSON 方法的旧浏览器包含 json2.js 库

编辑：经过一些测试后，肯定需要将 params 更改为 object 并将 params.param 更改为 object，更改`[]`为`{}`将完成此操作：

```
 var params = {};
 params['request'] = "movies";
 params['param'] = {};
 params['param']['sortBy'] = "title";
 params['param']['sortOrder'] = "asc"; 
```

演示：http: [//jsfiddle.net/germk/2/](http://jsfiddle.net/germk/2/)

# php - PHP - 尽管一切都应该正确，但 UTF8 未正确显示

> ID：13904606
> 
> 赞同：2
> 
> 时间：2012-12-16T19:11:51.423
> 
> 标签：php, utf-8

我的网站上有一个 UTF8 问题，我无法解决（也无法理解）。当我使用...

```
$mysqli->set_charset('utf8'); 
```

...在我的网站空间上，特殊字符显示不正确。当我删除这个函数时，数据库查询中的所有特殊字符都会正确显示。在我的本地系统上是相反的（没有 set_charset('utf8') 字符不会以正确的方式显示）

我还制作了一个测试脚本，看看这是否是我的虚拟主机的问题。该测试在我的网站空间和本地运行正常。

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<?php
$db = new mysqli( bla bla );
$db->set_charset('utf8');
$sql  = "SELECT pages_title
         FROM pages
         WHERE pages_title = 'Günstige Tablet PCs'";
$result = $db->prepare( $sql );
$result->execute();
$result->bind_result( $title );
$result->store_result();
$result->fetch();
$result->free_result(); 

echo "Title: ". $title; 
```

现在我已经没有问题可能出在哪里的想法了。一切都设置正确：

1.  数据库本身设置为 utf8-general-ci
2.  文件采用 UTF8 格式。
3.  `<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`已设置。

因为测试脚本运行正确，所以问题应该在我的代码中，但我不知道是什么导致了错误，因为我没有对 utf8_encode/decode 或类似的东西做任何事情。

有任何想法吗？？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:20:09.740

您可能会遇到[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)问题。尝试将整个代码复制/粘贴到另一个文本编辑器并将其保存为“没有 BOM 的 Unicode”（例如 Notepad++）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:17:22.530

试试这个，应该可以解决。

```
<?php header('Content-Type: text/html; charset=UTF-8'); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:19:25.183

您必须发送正确的标题：

```
header('Content-Type: text/html; charset=utf-8'); 
```

默认情况下发送的标头取决于服务器（例如：apache）配置——这可能会在不同的环境中引起混淆。

# mysql - UNION 不手动订购数据的替代方案或解决方案

> ID：13904616
> 
> 赞同：2
> 
> 时间：2012-12-16T19:13:14.940
> 
> 标签：mysql

这个问题是关于 UNION 的索引或替代方案，它们的工作方式相同。

在进一步的例子中，我们假设`title` `text`并且`content`有`fulltext``index`

假设我们有三个语句

```
SELECT title as text FROM news ORDER BY score DESC
SELECT name as text FROM pages ORDER BY score DESC
SELECT content as text FROM comments ORDER BY score DESC 
```

我们可以将它们组合起来（注意我们手动订购它们）

```
SELECT title as text FROM news ORDER BY score DESC
UNION
SELECT name as text FROM pages ORDER BY score DESC
UNION
SELECT content as text FROM comments ORDER BY score DESC 
```

现在我们`text`可以打印了，但订单将是 1）新闻 2）页面 3）评论

*这非常糟糕，因为我们希望那些可能按分数排序的不同*

因此，我们可以将所有这些组合`THREE SELECTS`成`ONE SELECT`并排序

```
SELECT text FROM (
   SELECT title as text FROM news ORDER BY score DESC
   UNION
   SELECT name as text FROM pages ORDER BY score DESC
   UNION
   SELECT content as text FROM comments ORDER BY score DESC
) as combination 
```

现在我们可以`ORDER`通过`score`

*同样，这非常糟糕，因为分数是基于每个表而不是每个选择的*

所以，我们继续前进，我的问题更接近了。

下一步是介绍`MATCH() and AGAINST()`，我们写

```
SELECT text, MATCH(text) AGAINST ('anything') as total_score FROM (
       SELECT title as text FROM news ORDER BY score DESC
       UNION
       SELECT name as text FROM pages ORDER BY score DESC
       UNION
       SELECT content as text FROM comments ORDER BY score DESC
    ) as combination ORDER BY total_score DESC 
```

我们完了！`text`如果不是 MATCH( ) 似乎没有被索引为全文，那么一切都应该完美。

出现错误：Can't find FULLTEXT index matching the column list

现在一个 consufion 来了，可能除了以某种方式制作`text`一个`FULLTEXT`. 不幸的是，数据库中不存在这样的列`text`，假设您无法在 phpmyadmin 中找到它以使其成为`FULLTEXT`这种方式。

我想`name as text`进一步扩展以使其接近`name as text type fulltext`或类似的东西，我在任何地方都找不到。

请帮帮我，我想听听什么，也许在这种情况下还有另一种解决方法？我不知道。我将非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:17:40.883

使用`UNION ALL`而不是`UNION`.

`UNION` *对联合结果集进行*排序**并*丢弃重复项（如果有）。*

 *`UNION ALL`保留所选顺序（并保留重复项，如果有）*

# actionscript-3 - Flash Action Script 3：如何从颜色选择器中获取十六进制值？

> ID：13904617
> 
> 赞同：1
> 
> 时间：2012-12-16T19:13:26.040
> 
> 标签：actionscript-3, flash

这是我的代码。

```
dropColor.addEventListener(ColorPickerEvent.CHANGE, updateValue);
function updateValue(e:ColorPickerEvent){
    trace(dropColor.hexValue);
} 
```

它不起作用。

```
1046: Type was not found or was not a compile-time constant: ColorPickerEvent. 
```

有人能告诉我为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T21:13:33.707

您需要为您的 ColorPickEvent 添加导入。

```
import fl.events.ColorPickerEvent; 
```

此外，根据您使用的编译器，您很可能需要 fl.swc ：

[http://evolve.reintroducing.com/2007/10/30/tips-n-tricks/fl-package-swc/](http://evolve.reintroducing.com/2007/10/30/tips-n-tricks/fl-package-swc/)

您需要将其添加到您的项目中，按照该页面上的说明进行操作。

# c++ - 使用boost C++通过正则表达式替换字符串

> ID：13904622
> 
> 赞同：2
> 
> 时间：2012-12-16T19:13:51.480
> 
> 标签：c++, regex, boost, boost-regex

我有这样的标签出现的字符串（有多个这样的标签）

```
|{{nts|-2605.2348}} 
```

我想使用 boost regex 来删除`|{{nts|`和`}}`替换我上面输入的整个字符串

```
-2605.2348 
```

在原始字符串中

为了更清楚：

假设字符串是：

```
 number is |{{nts|-2605.2348}} 
```

我想要字符串为：

```
 number is -2605.2348 
```

我对提升正则表达式和在线阅读很多东西还是很陌生，但无法得到答案，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T23:32:52.173

这真的取决于你想变得多具体。您是要始终完全删除`|{{nts|`，还是要删除管道，然后是`{{`，然后是任意数量的字母，然后是管道？或者您想删除最后一个空格和数字的第一部分之间不是空格的所有内容？

执行此操作的众多方法之一是：

```
#include <iostream>
#include <boost/regex.hpp>

int main()
{
    std::string str = "number is |{{nts|-2605.2348}}";
    boost::regex re("\\|[^-\\d.]*(-?[\\d.]*)\\}\\}");
    std::cout << regex_replace(str, re, "$1") << '\n';
} 
```

在线演示： http: [//liveworkspace.org/code/2B290X](http://liveworkspace.org/code/2B290X)

但是，由于您使用的是 boost，请考虑 boost.spirit 生成的更简单、更快的解析器。

# python - ZeroMQ 和 Python 中的多个订阅过滤器

> ID：13904626
> 
> 赞同：19
> 
> 时间：2012-12-16T19:14:14.793
> 
> 标签：python, sockets, zeromq

我想使用一个套接字在 Python 中使用 ZeroMQ 订阅多个过滤器。

```
sock.setsockopt(zmq.SUBSCRIBE, 'first.filter')
sock.setsockopt(zmq.SUBSCRIBE, 'second.filter') 
```

但这不起作用。只考虑第一个。但是，我在[zeromq 网站](http://api.zeromq.org/2-2:zmq-setsockopt)上读到了这个：

> 多个过滤器可以附加到单个`ZMQ_SUB`套接字，在这种情况下，如果消息匹配至少一个过滤器，则应接受该消息。

我正在使用 zmq 2.2.0.1。所以，我想知道如何做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-16T21:03:09.880

这有效：

```
import time
import zmq

ctx = zmq.Context()
pub = ctx.socket(zmq.PUB)
sub = ctx.socket(zmq.SUB)

url = "tcp://127.0.0.1:5555"
pub.bind(url)
sub.connect(url)

# subscribe to 'a' and 'b'
sub.setsockopt(zmq.SUBSCRIBE, b'a')
sub.setsockopt(zmq.SUBSCRIBE, b'b')

time.sleep(1)

for word in [ 'alpha', 'beta', 'gamma', 'apple', 'carrot', 'bagel']:
    pub.send(word)

time.sleep(1)

for i in range(4):
    print sub.recv(zmq.NOBLOCK) 
```

给出输出：

```
alpha
beta
apple
bagel 
```

所以这两个订阅都有效。你的确切代码是什么？因为也许这是另一个问题。

# javascript - 后端只调用一次

> ID：13904628
> 
> 赞同：0
> 
> 时间：2012-12-16T19:14:17.767
> 
> 标签：javascript, jquery, internet-explorer, spring-mvc, freemarker

我正在处理基于 Spring-MVC Web 的应用程序。我使用 Freemarker 和 JQuery。@Freemarker，我有以下 JQuery，它应该去后端两次：

```
 $(document).ready(function() {
    var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    $.getJSON('[@spring.url '/vacation/loadResourceVacation'/]', function (data) {
      $.getJSON('[@spring.url '/vacation/loadPublicVacations'/]', function (returnedPublicVacation) {.... 
```

2个java方法是：

```
 @RequestMapping(value = "/loadResourceVacation", method = RequestMethod.GET)
  public
  @ResponseBody
  String loadResourceVacation(HttpServletResponse response) throws Exception {

    // Convert to JSON string.
    String json = new Gson().toJson(myObject);

    // Write JSON string.
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");

    return json;
  }

@RequestMapping(value = "/loadPublicVacations", method = RequestMethod.GET)
  public
  @ResponseBody
  String loadPublicVacations(HttpServletResponse response) throws Exception {

    // Convert to JSON string.
    String json = new Gson().toJson(someObj);

    // Write JSON string.
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");

    return json;
  } 
```

@Google Chrom，它工作得非常好。但是@ IE，它在我第一次加载页面时工作正常。如果我再次尝试加载页面，则不会调用这 2 个方法，并且会从第一次开始缓存。

如果我关闭会话并打开一个新会话，则将再次调用这 2 个方法。任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:27:04.560

[jQuery 文档](http://api.jquery.com/jQuery.ajax/)说：

> 缓存 - 布尔值
> 
> 默认值：true，对于 dataType 'script' 和 'jsonp' 为 false
> 
> 如果设置为 false，它将强制浏览器不缓存请求的页面。将缓存设置为 false 还会将查询字符串参数“_=[TIMESTAMP]”附加到 URL。

# javascript - javascript中的Facebook api：如何添加隐私？

> ID：13904631
> 
> 赞同：3
> 
> 时间：2012-12-16T19:14:25.190
> 
> 标签：javascript, facebook, api, privacy

我想通过 Javascript 中的 Facebook Api 在我朋友的墙上发布一个帖子，但是当我在“FB.api”中插入“隐私”时，此代码无法正确运行。有人能帮我吗？谢谢你。

```
var privacy = {value: 'CUSTOM',  friends: 'SOME_FRIENDS', allow: '{UID}'};
var privacy2 = JSON.stringify(privacy);

FB.api("/{UID}/feed", 'post', {
    message: 'Message',
    privacy: privacy2,
    }, function(response) {
        if (!response || response.error) {
            alert(response.error);
        } else {
            alert('Message sent!');
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T21:44:58.610

更改隐私 JSON 以在您的密钥周围包含引号：

```
var privacy={"value":"CUSTOM", "friends": "SOME_FRIENDS", "allow":"{UID}"};

FB.api("/{UID}/feed", 'post', {
    message: 'Message',
    privacy: privacy,
    }, function(response) {
        if (!response || response.error) {
            alert(response.error);
        } else {
            alert('Message sent!');
        }
    }
); 
```

但是，您似乎无法将私人消息发布到其他用户的墙上。从[Facebook 上的隐私设置页面](http://developers.facebook.com/docs/reference/privacy-parameter/)：

> 注意：隐私参数仅适用于用户自己时间线的帖子，最终受用户为应用程序配置的隐私上限控制。它不适用于应用程序代表用户在其他用户的时间线或主页、事件或组中发布的帖子。在这些情况下，任何可以查看群组或活动中的时间线或内容的人都可以查看此类帖子。

这似乎是您收到 OAuth 错误的原因。

# html - 制作问题框将您带到另一个页面 嘿伙计们，所以我正在尝试使用这些框创建一个快速搜索。我以为我可以只放一些标签但不起作用，所以我想知道我将如何去做？这是我的代码：<select><option value="Microphones">麦克风</option> ID：13904634 赞同：0 时间：2012-12-16T19:14:37.977 标签：html, select 回答 #1 赞同：3 时间：2012-12-16T19:20:33.093 你为什么不使用 JavaScript window.location？ <div id="advancesearch"> <div class="audio-quicksearch"> <select> <option value="Microphones" onclick="window.location='http://www.google.com'">Microphones</option> <option value=""></option> <option value=""></option> <option value=""></option> </select> </div> </div> 或者创建一个函数 <div id="advancesearch"> <div class="audio-quicksearch"> <select> <option></option> <option value="Microphones" onclick="redirect_me('http://www.google.com');">Microphones</option> <option value=""></option> <option value=""></option> <option value=""></option> </select> </div> </div> <script> function redirect_me(re_link) { window.location = re_link; } </script></select>

# javascript - 在javascript中制作自定义确认框

> ID：13904635
> 
> 赞同：1
> 
> 时间：2012-12-16T19:14:41.807
> 
> 标签：javascript, sleep, wait

我想在 javascipt 中制作一个定制的确认框，就像内置的确认框一样。除非用户至少选择一件事，否则内置的确认框不允许代码继续进行。下面是我的代码： ***** ** *** *** *HTML 开始****** ** *** ***

```
<div class = "popUp confirm" style="z-index:40000;"  id="confirmBlock">         
<div id = "confirmLabel" >Confirm Message</div>
<div style ="border:0px solid red;height:44.56px;">
<input id="Confirm" type="button" value="Confirm" onclick = "confirmAction(1)" />
<input id = "CancelConfirm" type="button" value="Cancel" onclick = "confirmAction(0)" />
</div>
</div> 
```

****** *** **** *HTML 结束****** ** *** *****

 ******** *** **** *Javascript 启动****** ** *** *****

 **```
var confirmresult = "-1";

function confirmationLoop()
{
    alert("If this alert is preesnt it works, seems like the built in alert provides some sort of pause for other parts of code to continue to work");

    if(confirmresult == "-1")
        confirmationLoop();     

    return; 
} 

function confirmAction(val)
{

    confirmresult = val;    
}

function checkuuu()
{
    confirmresult = "1";
}

function confirmMessage(message)                
{   
    document.getElementById("confirmLabel").innerHTML= message;
    //var check = setTimeout(function(){confirmAction(1)},5000);
    confirmationLoop(); 
    /*
    while(1)            //using while almost does not allow any other part to run at all hence tried recursion
    {
        if(confirmresult != "-1")
            break;  
    }
    */
    document.getElementById("confirmLabel").innerHTML= "Confirm Message";   
    var returnVal = confirmresult;
    confirmresult = -1;
    return returnVal;
} 
```

****** *** **** *Javascript 结束****** ** *** *****

 ******** *** *****示例代码开始****** ** *** *** 所以这就是我所期望的：**

 **```
function example
{
    var check = confirmMessage(message);
    //the next part of code should not execute untill i press confirm or cancel, using settimeout or settimeinterval is asynchronous and the code flow continues. i want the effect something like alert and confirm built in boxes         
} 
```

****** *** *****示例代码结束****** ** *** *****

 **我使用了循环，但它使线程完全被占用，并且没有让我有机会按下任何按钮，这很明显但是递归使您可以自由地执行其他活动。即使在按下确认按钮后，confirmResult 的值将变为 1，但我会通过警报进行检查。递归循环，即确认循环似乎没有将其读取为 1。它仍然继续为 -1。如果我在该确认循环中发出警报，则该值将被读取为 1。任何人都可以帮助我实现我开始的目标？？？？？？Ps=>抱歉这么大的问题！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:17:13.770

您不能使用任何类型的循环 - 因为您发现它只会导致浏览器锁定。

您需要做的是*模拟*“模态”对话框。

这通常是通过让您的对话框出现在另一个“覆盖”元素之上来完成的，该元素*重要*地覆盖了所有其他元素，并阻止了任何用户与它们的交互。

实现一个`confirm`返回值的函数也非常困难——该`window.confirm`方法只能这样做，因为它是同步的——它会在显示对话框时阻止所有其他 JS 处理。

最简单的方法是提供一个回调函数，一旦用户选择了所需的值，该函数就会被调用。**********

# python - 在 python 中实现 Bron-Kerbosch 算法

> ID：13904636
> 
> 赞同：8
> 
> 时间：2012-12-16T19:14:46.080
> 
> 标签：python, graph-algorithm, clique, clique-problem

对于一个大学项目，我正在尝试实现[Bron–Kerbosch 算法](http://en.wikipedia.org/wiki/Bron-Kerbosch_algorithm)，即在给定图中列出所有最大派系。

我正在尝试实现第一个算法（没有旋转），但我的代码在[维基百科的示例](http://en.wikipedia.org/wiki/Clique_problem)中测试后并没有产生所有答案，到目前为止我的代码是：

```
# dealing with a graph as list of lists 
graph = [[0,1,0,0,1,0],[1,0,1,0,1,0],[0,1,0,1,0,0],[0,0,1,0,1,1],[1,1,0,1,0,0],[0,0,0,1,0,0]]

#function determines the neighbors of a given vertex
def N(vertex):
    c = 0
    l = []
    for i in graph[vertex]:
        if i is 1 :
         l.append(c)
        c+=1   
    return l 

#the Bron-Kerbosch recursive algorithm
def bronk(r,p,x):
    if len(p) == 0 and len(x) == 0:
        print r
        return
    for vertex in p:
        r_new = r[::]
        r_new.append(vertex)
        p_new = [val for val in p if val in N(vertex)] # p intersects N(vertex)
        x_new = [val for val in x if val in N(vertex)] # x intersects N(vertex)
        bronk(r_new,p_new,x_new)
        p.remove(vertex)
        x.append(vertex)

    bronk([], [0,1,2,3,4,5], []) 
```

为什么我只得到部分答案有什么帮助？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T19:39:37.667

Python 变得困惑，因为您正在修改它正在迭代的列表。

改变

```
for vertex in p: 
```

至

```
for vertex in p[:]: 
```

这将导致它迭代 p 的副本。

[您可以在http://effbot.org/zone/python-list.htm](http://effbot.org/zone/python-list.htm)阅读更多相关信息。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-16T21:35:23.480

正如@VaughnCato 正确指出的那样，错误正在迭代`P[:]`。我认为值得注意的是，您可以“产生”此结果，而不是打印，如下所示（在此重构代码中）：

```
def bronk2(R, P, X, g):
    if not any((P, X)):
        yield R
    for v in P[:]:
        R_v = R + [v]
        P_v = [v1 for v1 in P if v1 in N(v, g)]
        X_v = [v1 for v1 in X if v1 in N(v, g)]
        for r in bronk2(R_v, P_v, X_v, g):
            yield r
        P.remove(v)
        X.append(v)
def N(v, g):
    return [i for i, n_v in enumerate(g[v]) if n_v]

In [99]: list(bronk2([], range(6), [], graph))
Out[99]: [[0, 1, 4], [1, 2], [2, 3], [3, 4], [3, 5]] 
```

*如果有人在未来寻找 Bron-Kerbosch 算法实现......*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-14T22:04:03.120

[来自维基百科](https://en.wikipedia.org/wiki/Bron%E2%80%93Kerbosch_algorithm)的 Bron-Kerbosch 算法的实现：

**无需旋转**

```
算法BronKerbosch1(R, P, X)是
    如果 *P* 和 *X*都是空的，则：*将R*
        报告为*P*中每个顶点*v* 的 最大集团
    do 
        BronKerbosch1( *R* ⋃ { *v* }, *P* ⋂ *N* ( *v* ), *X* ⋂ *N* ( *v* ))
         *P*  := *P* \ { *v* }
         *X*  := *X* ⋃ { *v* }

```

 *****```
adj_matrix = [
    [0, 1, 0, 0, 1, 0],
    [1, 0, 1, 0, 1, 0],
    [0, 1, 0, 1, 0, 0],
    [0, 0, 1, 0, 1, 1],
    [1, 1, 0, 1, 0, 0],
    [0, 0, 0, 1, 0, 0]] 
```

[![图形](../Images/15dc709b2c63136ead20d7267c8ba69a.png)](https://i.stack.imgur.com/upQ1r.png)

```
N = {
    i: set(num for num, j in enumerate(row) if j)
    for i, row in enumerate(adj_matrix)
}

print(N)
# {0: {1, 4}, 1: {0, 2, 4}, 2: {1, 3}, 3: {2, 4, 5}, 4: {0, 1, 3}, 5: {3}}

def BronKerbosch1(P, R=None, X=None):
    P = set(P)
    R = set() if R is None else R
    X = set() if X is None else X
    if not P and not X:
        yield R
    while P:
        v = P.pop()
        yield from BronKerbosch1(
            P=P.intersection(N[v]), R=R.union([v]), X=X.intersection(N[v]))
        X.add(v)

P = N.keys()
print(list(BronKerbosch1(P)))
# [{0, 1, 4}, {1, 2}, {2, 3}, {3, 4}, {3, 5}] 
```

**带旋转**

```
算法BronKerbosch2(R, P, X)是
    如果 *P*和*X*都是空的，则将*R*
        报告为最大集团*为P* \ N( *u )*中的每个顶点*v选择**P* ⋃ *X*中
    的枢轴顶点*u*： *********BronKerbosch2( *R* ⋃ { *v* }, *P* ⋂ N( *v* ), X ⋂ N( *v* ))
         *P*  := *P* \ { *v* }
         *X*  := *X* ⋃ { *v* }********* 
```

 ******* * *

```
import random  

def BronKerbosch2(P, R=None, X=None):
    P = set(P)
    R = set() if R is None else R
    X = set() if X is None else X
    if not P and not X:
        yield R
    try:
        u = random.choice(list(P.union(X)))
        S = P.difference(N[u])
    # if union of P and X is empty
    except IndexError:
        S = P
    for v in S:
        yield from BronKerbosch2(
            P=P.intersection(N[v]), R=R.union([v]), X=X.intersection(N[v]))
        P.remove(v)
        X.add(v)

print(list(BronKerbosch2(P)))
# [{0, 1, 4}, {1, 2}, {2, 3}, {3, 4}, {3, 5}] 
```***********

# math - 什么是同时求解二次方程和线性方程的算法？

> ID：13904638
> 
> 赞同：0
> 
> 时间：2012-12-16T19:15:01.743
> 
> 标签：math, quadratic

需要一个算法来解决这样的方程：

```
8*p^2+8*q^2+8*p-16=0
p^2+q^2+12*p+20=0 
```

如果有人能指出我算法的名称就足够了。我本可以遵循任何与矩阵相关的算法，但这些线性内的二次方会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:58:27.530

在您写的情况下，我建议首先从第一个方程中减去第二个方程的 8 倍。

> 0 = (8*p^2+8*q^2+8*p-16) - 8*(p^2+q^2+12*p+20) = -88*p-176 = 0
> p = -2

然后在 q 中留下一个简单的二次方程，您可以使用求解单变量二次方程的常用方法来求解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T07:18:35.540

[Nelder-Mead 算法](http://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method)是一种非常易于编程的非线性求解器，可以在像这样的低维问题中快速准确地收敛。伪代码在 Wikipedia 上很容易理解，但您也可以在线找到一些编码实现。

在这种情况下，您的成本函数将是左侧平方的总和，以确保较低的成本更接近正确的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:50:33.813

这是一个非线性问题。您将需要一个迭代解决方案，例如 Newton Raphson 或 BFGS。

这是一个简单的方法。

首先线性化它：

```
16*p*dp + 16*q*dq + 8 = 0
2*p*dp + 2*q*dq + 12 = 0 
```

这变成了一个线性代数问题：

```
| 16*p 16*q |[ dp ]    [  -8 ]
|  2*p  2*q |[ dq ] =  [ -12 ] 
```

您将从最初的猜测开始`(p, q)`：

```
(p, q) = (p0, q0) 
```

您将使用常用的线性代数技术求解 dp 和 dq。

您将更新您对 p 和 q 的猜测：

```
(p1, q1) = (p0 + dp, q0 + dq) 
```

您将再次迭代，直到您的解决方案发散或收敛。

不能保证它会收敛，这取决于你最初的猜测。

# iphone - 从自定义单元格中的相同文本字段获取值

> ID：13904640
> 
> 赞同：0
> 
> 时间：2012-12-16T19:15:27.390
> 
> 标签：iphone, objective-c, uitableview, uitextfield

我在一个带有一个文本字段（cell.guestName.text）的表格中有一个自定义单元格，用户根据他们有多少客人添加更多行。我正在努力获取在每个客人字段中输入的客人姓名。

任何人都可以帮我这样做吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:43:46.427

使用`NSMutableArray`跟踪 中每一行的来宾名称`TableView`。然后只需在每次将新行添加到电视时添加到该数组即可。获取所有单元格或仅一个单元格的值很容易使用`objectAtIndex`或 for-in 循环`Array`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:36:03.413

`numberOfSections`您可以使用和获得行数和节数（但可能您已经知道该数字）`numberOfRowsInSection`。
然后，您使用`cellForRowAtIndexPath`传递所有可能的索引路径来获取所有单元格，然后检索文本。

**例子：**

```
for(NSUInteger i=0; i< [self.tableView numberOfSections]; i++)
{
    for(NSUInteger j=0; j<[self.tableView numberOfRowsInSection: i]; j++)
    {
        NSIndexPath* path= [NSIndexPath indexPathForItem: j inSection: i];
        UITableViewCell* cell= [self.tableView cellForRowAtIndexPath: path];
        // Do whatever with the cell
    }
} 
```

# ios - AudioUnit Mixer Host 应用程序中的 AudioUnitSampleType

> ID：13904650
> 
> 赞同：1
> 
> 时间：2012-12-16T19:16:27.187
> 
> 标签：ios, audiounit

我正在浏览 iOS Audio Units 示例应用程序 Mixer Host。让我感到困惑的是 AudioUnitSampleType 似乎保存了文件中的所有音频数据。但 AudioUnitSampleType 似乎是一个定点整数。这是某种具有定点整数的数组吗？否则它会以定点整数对所有样本数据进行排序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:01:53.640

是的，样本通常以带符号的 16 位整数形式提供。可以请求其他样本类型（例如浮点数），但我以前从未真正做到这一点。因此，大多数应用程序处理 sint16 并在必要时将其转换为动态浮点数以进行 DSP 计算。

# android - Android Google Maps v2：如何使用多行代码段添加标记？

> ID：13904651
> 
> 赞同：70
> 
> 时间：2012-12-16T19:16:40.963
> 
> 标签：android, google-maps

有人知道如何将多行代码段添加到 Google 地图标记吗？这是我添加标记的代码：

```
map.getMap().addMarker(new MarkerOptions()
    .position(latLng()).snippet(snippetText)
    .title(header).icon(icon)); 
```

我希望片段看起来像这样：

```
| HEADER |
|foo     |
|bar     | 
```

但是当我试图将snippetText 设置为“foo \n bar”时，我看到的只是`foo bar`并且我不知道如何使它成为多行。你能帮助我吗？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2015-07-25T17:38:32.287

我已经完成了如下最简单的方法：

```
private GoogleMap mMap; 
```

在**谷歌地图**上**添加** **标记**时：

 **```
LatLng mLatLng = new LatLng(YourLatitude, YourLongitude);

mMap.addMarker(new MarkerOptions().position(mLatLng).title("My Title").snippet("My Snippet"+"\n"+"1st Line Text"+"\n"+"2nd Line Text"+"\n"+"3rd Line Text").icon(BitmapDescriptorFactory.defaultMarker(BitmapDescriptorFactory.HUE_RED))); 
```

之后，在**Google Map上为****InfoWindow** **适配器**添加以下代码：

 **```
mMap.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {

      @Override
      public View getInfoWindow(Marker arg0) {
         return null;
      }

      @Override
      public View getInfoContents(Marker marker) {

        LinearLayout info = new LinearLayout(mContext);
        info.setOrientation(LinearLayout.VERTICAL);

        TextView title = new TextView(mContext);
        title.setTextColor(Color.BLACK);
        title.setGravity(Gravity.CENTER);
        title.setTypeface(null, Typeface.BOLD);
        title.setText(marker.getTitle());

        TextView snippet = new TextView(mContext);
        snippet.setTextColor(Color.GRAY);
        snippet.setText(marker.getSnippet());

        info.addView(title);
        info.addView(snippet);

      return info;
    }
}); 
```

希望它会帮助你。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-12-16T19:34:27.393

看起来您需要创建自己的“信息窗口”内容才能使其正常工作：

1.  创建一个`InfoWindowAdapter`覆盖的实现`getInfoContents()`以返回您想要进入`InfoWindow`框架的内容

2.  调用`setInfoWindowAdapter()`你的`GoogleMap`，传递你的实例`InfoWindowAdapter`

[此示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/MapsV2/Popups)演示了该技术。`"foo\nbar"`用正确处理换行符替换我的片段。但是，更有可能的是，您只会想出一个无需换行符的布局，并`TextView`为您想要的视觉结果中的每一行提供单独的小部件。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2015-08-06T09:33:59.443

正如 Andrew S 建议的那样，以[Hiren Patel 的回答为基础：](https://stackoverflow.com/a/31629308/2095694)

```
 mMap.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {

        @Override
        public View getInfoWindow(Marker arg0) {
            return null;
        }

        @Override
        public View getInfoContents(Marker marker) {

            Context context = getApplicationContext(); //or getActivity(), YourActivity.this, etc.

            LinearLayout info = new LinearLayout(context);
            info.setOrientation(LinearLayout.VERTICAL);

            TextView title = new TextView(context);
            title.setTextColor(Color.BLACK);
            title.setGravity(Gravity.CENTER);
            title.setTypeface(null, Typeface.BOLD);
            title.setText(marker.getTitle());

            TextView snippet = new TextView(context);
            snippet.setTextColor(Color.GRAY);
            snippet.setText(marker.getSnippet());

            info.addView(title);
            info.addView(snippet);

            return info;
        }
    }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-01-28T16:06:12.213

基于[Hiren Patel](https://stackoverflow.com/a/31629308/2914140)解决方案。此代码创建一个`TextView`从布局，而不是从零开始。一个显着的区别：如果您有**clusters** ，则在单击集群时不会看到**void 标签。**

```
override fun onMapReady(googleMap: GoogleMap) {
    this.googleMap = googleMap
    ...

    // Use this anonymous class or implement GoogleMap.InfoWindowAdapter.
    googleMap.setInfoWindowAdapter(object : GoogleMap.InfoWindowAdapter {
        override fun getInfoContents(marker: Marker): View? {
            return null
        }

        override fun getInfoWindow(marker: Marker): View? =
            if (marker.title == null)
                null
            else {
                val inflater = LayoutInflater.from(context)
                val view = inflater.inflate(R.layout.layout_marker, null, false)
                view.label.text = marker.title

                view
            }
    }) 
```

布局标记.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="5dp"
    android:paddingRight="5dp"
    android:paddingTop="4dp"
    android:paddingBottom="4dp"
    android:textColor="$f0f0f0"
    android:textSize="12sp"
    tools:text="Marker"
    android:background="#00aaee"
    /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-22T18:58:08.400

相同的代码，但在 Kotlin 中：

```
 mMap?.setInfoWindowAdapter(object : InfoWindowAdapter {
        override fun getInfoWindow(arg0: Marker): View? {
            return null
        }

        override fun getInfoContents(marker: Marker): View {
            val info = LinearLayout(applicationContext)
            info.orientation = LinearLayout.VERTICAL
            val title = TextView(applicationContext)
            title.setTextColor(Color.BLACK)
            title.gravity = Gravity.CENTER
            title.setTypeface(null, Typeface.BOLD)
            title.text = marker.title
            val snippet = TextView(applicationContext)
            snippet.setTextColor(Color.GRAY)
            snippet.text = marker.snippet
            info.addView(title)
            info.addView(snippet)
            return info
        }
    }) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-07-25T09:39:38.540

mMap.setOnMapClickListener(new GoogleMap.OnMapClickListener() {

```
 @Override
        public void onMapClick(LatLng point) {

            // Already two locations
            if (markerPoints.size() > 1) {
                markerPoints.clear();
                mMap.clear();
            }

            // Adding new item to the ArrayList
            markerPoints.add(point);

            // Creating MarkerOptions
            MarkerOptions options = new MarkerOptions();

            // Setting the position of the marker

            options.position(point);
            if (markerPoints.size() == 1) {
                options.icon(BitmapDescriptorFactory.fromResource(R.mipmap.markerss)).title("Qtrip").snippet("Balance:\nEta:\nName:");
                options.getInfoWindowAnchorV();
            } else if (markerPoints.size() == 2) {
                options.icon(BitmapDescriptorFactory.fromResource(R.mipmap.markerss)).title("Qtrip").snippet("End");
            }
            mMap.setInfoWindowAdapter(new GoogleMap.InfoWindowAdapter() {

                @Override
                public View getInfoWindow(Marker arg0) {
                    return null;
                }

                @Override
                public View getInfoContents(Marker marker) {

                    Context context = getApplicationContext(); //or getActivity(), YourActivity.this, etc.

                    LinearLayout info = new LinearLayout(context);
                    info.setOrientation(LinearLayout.VERTICAL);

                    TextView title = new TextView(context);
                    title.setTextColor(Color.BLACK);
                    title.setGravity(Gravity.CENTER);
                    title.setTypeface(null, Typeface.BOLD);
                    title.setText(marker.getTitle());

                    TextView snippet = new TextView(context);
                    snippet.setTextColor(Color.GRAY);
                    snippet.setText(marker.getSnippet());

                    info.addView(title);
                    info.addView(snippet);

                    return info;
                }
            });
            mMap.addMarker(options); 
```****

# php - Cakephp：设置 ACL 允许特定操作并拒绝控制器的其余操作

> ID：13904653
> 
> 赞同：0
> 
> 时间：2012-12-16T19:16:49.543
> 
> 标签：php, cakephp, acl, cakephp-2.1

我正在尝试设置 cakephp ACL 权限。

```
public function initDB() {
$group = $this->User->Group;
//root
$group->id = 1;
$this->Acl->allow($group, 'controllers');
//admin
$group->id = 2;
$this->Acl->allow($group, 'controllers/Users');

//cliente
$group->id = 3;
$this->Acl->deny($group, 'controllers');
$this->Acl->allow($group, 'controllers/Pages');
PROBLEM BELOW ----------------------------------------------
$this->Acl->allow($group, 'controllers/Users/trocar_senha/')
echo "all done";
exit;
} 
```

这也否认了用户的行动“trocar_senha”。但我想允许这样做并拒绝用户控制器的所有休息操作。

如何允许特定操作并拒绝控制器的所有其余操作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:50:44.533

解决了！问题是斜线`$this->Acl->allow($group, controllers/Users/trocar_senha/')`。

```
public function initDB() {
    $group = $this->User->Group;
    //root
    $group->id = 1;
    $this->Acl->allow($group, 'controllers');
    //admin
    $group->id = 2;
    $this->Acl->allow($group, 'controllers/Users');

    //cliente
    $group->id = 3;
    $this->Acl->deny($group, 'controllers');
    $this->Acl->allow($group, 'controllers/Pages');
    $this->Acl->allow($group, 'controllers/Users/trocar_senha'); // WHITHOUT SLASH
    echo "all done";
    exit;
} 
```

# c# - 在 VS 设计器中查看表单时未找到用户控件错误

> ID：13904657
> 
> 赞同：-1
> 
> 时间：2012-12-16T19:17:10.993
> 
> 标签：c#, user-controls

因为有些日子我在设计视图中打开表单时遇到 VS 设计器的错误。

> 错误：未找到用户控件。

**编辑**：我检查了所有引用。并进行了重建。他们都没事。我在互联网上读到这可能是 vs2010 中的一个错误 有人可以确认[C# x64 设计器用户控件未找到错误](http://connect.microsoft.com/VisualStudio/feedback/details/619208/c-x64-designer-user-controls-not-found-bug)吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T09:04:54.273

这是 Visual Studio 2010 中的错误

升级到2012，问题解决了

# qt - QGraphicScene 弹出窗口一秒钟然后消失

> ID：13904662
> 
> 赞同：0
> 
> 时间：2012-12-16T19:17:27.007
> 
> 标签：qt, qt4, qgraphicsscene

我的所有代码都在 mainWindow 的构造函数中。问题是显示只弹出一秒钟然后就消失了。任何帮助都感激不尽 。以下是代码。

```
MainWindow::MainWindow(QWidget *parent) :
QMainWindow(parent)
{
QPixmap kineticPix(":/images/kinetic.png");
QPixmap bgPix(":/images/Time-For-Lunch-2.jpg");

QGraphicsScene scene(-350, -350, 700, 700);
QGraphicsItem *buttonParent = new QGraphicsRectItem;

Button *ellipseButton = new Button(QPixmap(":/images/ellipse.png"), buttonParent);
Button *figure8Button = new Button(QPixmap(":/images/figure8.png"), buttonParent);
Button *randomButton = new Button(QPixmap(":/images/random.png"), buttonParent);
Button *tiledButton = new Button(QPixmap(":/images/tile.png"), buttonParent);
Button *centeredButton = new Button(QPixmap(":/images/centered.png"), buttonParent);

ellipseButton->setPos(-100, -100);
figure8Button->setPos(100, -100);
randomButton->setPos(0, 0);
tiledButton->setPos(-100, 100);
centeredButton->setPos(100, 100);

scene.addItem(buttonParent);
buttonParent->scale(0.75, 0.75);
buttonParent->setPos(200, 200);
buttonParent->setZValue(65);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:15:28.640

您已经在堆栈上创建了场景并且没有将其分配给成员变量，因此一旦控制离开构造函数，它就会被删除。

# gzip - 如何使用 GZIP？

> ID：13904664
> 
> 赞同：0
> 
> 时间：2012-12-16T19:17:36.557
> 
> 标签：gzip

我是使用 GZIP 的新手。

我正在使用 GZIP 网站的 Wordpress 插件，但我运行了 Google Speed 测试，它说该网站没有压缩 bootstrap .less 文件和我调用的 javascript 文件。

我不知道如何调用 gzip 甚至制作一个，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:26:30.090

如果您使用 apache 2.* 作为您的网络服务器，您可以启用`mod_deflate`. 然后，您可以配置要压缩的模块以及要压缩的`.less`任何其他静态内容。

这是模块文档的链接：[http ://httpd.apache.org/docs/2.2/mod/mod_deflate.html](http://httpd.apache.org/docs/2.2/mod/mod_deflate.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:40:47.747

Javascript 应该被缩小，并且在缩小之后 JS 和 CSS 都应该被压缩。看看[如何“缩小”Javascript代码](https://stackoverflow.com/questions/1737388/how-to-minify-javascript-code)

# java - 爪哇。JNI。jvm.dll

> ID：13904668
> 
> 赞同：6
> 
> 时间：2012-12-16T19:18:17.593
> 
> 标签：java, java-native-interface

我有 Visual Studio C++ 项目，它必须调用一些 java 功能。我将使用 JNI。我已经指定了额外的包含目录：

`C:\Program Files (x86)\Java\jdk1.7.0_10\include`

`C:\Program Files (x86)\Java\jdk1.7.0_10\include\win32`

和额外的库目录

`C:\Program Files (x86)\Java\jdk1.7.0_10\lib`

并能够编译所需的代码。但由于下一个错误，我仍然无法运行它：

`The program can't start bacause jvm.dll is missing...`

我认为，最简单的方法就是将 dll 复制到项目目录中。但我不知道是哪一个。例如，我发现它们几乎没有什么不同：

`C:\Program Files (x86)\Java\jdk1.7.0_10\jre\bin\client\jvm.dll`

`C:\Program Files (x86)\Java\jdk1.7.0_10\jre\bin\server\jvm.dll`

`C:\Program Files (x86)\Java\jre7\bin\client\jvm.dll`

那么，我应该复制哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T16:21:30.670

你试图在错误的一端解决问题。您不应该`jvm.dll`到处复制，而是设置一个适当的`JAVA_HOME`环境变量，指向`C:\Program Files (x86)\Java\jdk1.7.0_10\`或`C:\Program Files (x86)\Java\jre7\`。然后通过`java`参数`-client`或选择DLL的版本`-server`（无参数时默认）。

**更新**：现在重新阅读问题，我看到该场景正在运行本机程序并从中调用 JVM，而不是（更常见）从 JVM 调用本机库。在这种情况下，本机程序确实需要访问`jvm.dll`. 从 JVM 调用本机库时，`jvm.dll`已经由 JVM 预加载，本机库不需要关心它。

# arrays - 在数字数组中获取 N 个最小连续块

> ID：13904673
> 
> 赞同：2
> 
> 时间：2012-12-16T19:18:55.510
> 
> 标签：arrays, algorithm, dynamic-programming

我目前正在解决以下问题：

给定一个由 M 个正数组成的数组，我需要得到 N 个具有给定长度的连续数字块。例如，当我有数组时：

6 9 3 2 8 1 6 9 7

当我需要找到一个长度为 3 的块时，解决方案是 [3,2,8]，其最小总和为 13。当我需要找到两个块时，算法应该给出 [3,2,8] 和[1,6,9] 因为这些块中所有元素的总和是最小的 (29)。给定序列的长度总是严格大于块长度的N倍（所以总是有解）。

我认为这个问题可以通过使用 DP 来解决，但我目前不知道如何解决。我正在努力寻找子问题之间的反复关系。有人可以帮我看看吗？

提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T19:43:45.953

1.  计算给定长度的每个块的总和，并用初始索引记录它们。这可以通过复杂度来完成`O(n)`。所以你会得到一个类似的列表：

    ```
    index    sum
    0        18
    1        14
    2        13
    ...      ... 
    ```

2.  由于目标块不能相互重叠，所以它们的索引的每个差异不能小于给定的长度。所以你需要在你得到的列表上应用一个简单的动态规划算法。

    如果块长度为`l`，列表长度为`n`（例如列表`S[n]`），并且您想查找`m`块，则

    `F(n,m,l) = min { F(n-i-l,m-1,l) + S[n-i] } (for i = 0 ~ n-(m-1)*l)`

此步骤的复杂性在于`O(nm)`您`m`想要多少块。

最后复杂度是`O(nm)`。如果您需要更多详细信息，请告诉我。

# asp.net - 一个淘汰赛 JS 中的多个“foreach”循环

> ID：13904679
> 
> 赞同：2
> 
> 时间：2012-12-16T19:19:47.820
> 
> 标签：asp.net, knockout.js, dotnetnuke

首先我会说我在 DotNetNuke7 的上下文中工作，它本质上是基于 ASP.net 的框架，而且我对 KO 还很陌生。

我试图有一个 ko 视图模型并在其中有两个 foreach 循环。每个循环都会渲染一个数组，它是视图模型定义的一部分，如下所示：

```
 //We build two arrays: one for the users that are in the group 
    //and one for the users that are not in the group 
    var nonGroupMembers = $.map(initialData.NonGroupUsers, function (item) { return new   Member(item); });
    var groupMembers = $.map(initialData.GroupUsers, function (item) { return new Member(item); });

    //The members we start with before we added new members 
    self.SearchTerm = ko.observable('');
    self.CircleMembers = ko.observableArray(groupMembers);
    self.NonCircleMembers = ko.observableArray(nonGroupMembers); 
```

在 html 上下文（或 asp 用户控件）中，我放置了以下代码

```
<div id="socialDirectory" class="dnnForm dnnMemberDirectory">
    <ul id="mdMemberList" class="mdMemberList dnnClear" style="display:none" 
         data-bind="foreach: { data: NonCircleMembers, afterRender: handleAfterRender }, 
                        css: { mdMemberListVisible : Visible }, visible: HasMembers()">
        <li class="memberItem">

            <div data-bind="visible: $parent.isEven($data)">
                <%=MemberItemTemplate %>
            </div>            
            <div data-bind="visible: !$parent.isEven($data)">
                <%=MemberAlternateItemTemplate %>
            </div>            

        </li>
    </ul>  
</div>

<div class="circleDirectory"  id="circleDirectory"  >

    <ul id="cdMembersList" data-bind =" foreach: {data: CircleMembers, afterRender: handleAfterRender}">
            <li class="memberItem"> 
               <div class="mdMemberDetails">
                    <a href="" class="mdMemberImg" data-bind="attr: { title: DisplayName, href: ProfileUrl }">
                        <span><img data-bind="attr: { src: getProfilePicture(50,50), title: DisplayName }" /></span>
                    </a>
                    <ul class="MdMemberInfo">
                        <li class="mdDisplayName" >
                                <a href="" title="" class="mdMemberTitle" 
                                    data-bind="attr: { title: DisplayName, href: ProfileUrl }, 
                                    event: { mouseover: $parent.showPopUp }">
                                <span data-bind="text: DisplayName"></span>
                            </a>
                        </li>  
                        <li class="mdTitle"><p><span data-bind="text: Title"></span></p></li>
                        <li class="mdLocation"><p><span data-bind="text: Location()"></span></p></li>
                    </ul>
                </div>
            </li>
    </ul>
</div> 
```

每个包含 foreach 绑定循环的 DIV 都可以在没有另一个的情况下完美运行。例如，底部 div (id= cdMembersList) 可以正常工作，但是当我添加带有绑定标记的上部 div 时，它将停止工作。同样的事情也会发生。

有人知道为什么会发生吗？我可以在一个视图模型中没有 2 个循环吗？

期待解开这个谜团。

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:49:27.797

好吧，我不想这么说，但答案一如既往地简单。我没有将 CSS 的**Visible**属性 添加到我的视图模型中**：{ mdMemberListVisible : Visible }**

当我创建一个新的脚本文件时，我只是跳过了这个属性。几节课：

1.  您可以在一个视图模型中运行多个循环。
2.  始终检查您是否在视图模型中定义了所有属性。

此外，显然它有助于在这个板上创建一个问题，因为它可以让你清楚地思考问题并重新审视你的行为。在我发布我的问题之前我花了 2 个小时来解决这个问题，然后在我发布它之后我花了 15 分钟来解决它。

# jsf - 不处理数据的 PrimeFaces CommandButton

> ID：13904680
> 
> 赞同：1
> 
> 时间：2012-12-16T19:20:03.640
> 
> 标签：jsf, primefaces

我设置了一个 JSF/PrimeFaces 表单页面来编辑一些配置细节。底部是提交和取消按钮，实现为`CommandButton`. 取消按钮如下所示：

```
<p:commandButton
        action="priorPage.xhtml?faces-redirect=true"
        value="Cancel" /> 
```

问题是视图 bean 仍然对输入表单的数据进行了比我想要的更多的处理。它不会更新数据库中的任何内容，但是如果（比如说）我将字符串输入到要在 bean 中查找数字的字段中，它仍然会产生错误。

当然，我的部分解决方案是让 bean 优雅地处理那种糟糕的数据，我正在努力解决这个问题。但我也想调整那个按钮，让它只把用户带到前一页。我可以设置一些属性来阻止表单被处理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-16T19:28:00.747

`<p:commandButton>`提交表单。您不想提交表单。然后你不应该使用`<p:commandButton>`，而只是`<p:button>`.

```
<p:button value="Cancel" outcome="priorPage.xhtml" /> 
```

### 也可以看看：

*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton)

# java - 文件未找到没有意义的异常（对我而言）

> ID：13904683
> 
> 赞同：0
> 
> 时间：2012-12-16T19:20:09.303
> 
> 标签：java, filenotfoundexception

我有一个从文件读取和写入的程序。**我什至试图在其中创建文件，`main`**但它仍然无法正常工作。

```
public static void main(String[] args) throws NumberFormatException, 
                                              IOException, 
                                              FileNotFoundException {
    System.out.println("Work in progress");

    File f = new File("Data.txt");
    System.out.println(f.getAbsolutePath());
            // Yes, it's there.

    UI ui = new UI();
    GenericDictionary<Integer> gd = new GenericDictionary<Integer>();
    Repository repo = new Repository("Data.txt", gd);
            // Should work, right ? 
```

现在我的存储库：

```
public Repository (String fileName, GenericDictionary gd) 
                                               throws IOException, 
                                                      NumberFormatException, 
                                                      FileNotFoundException {
    this.fileName = fileName;
    this.gd = gd;

    FileReader input = null;
    BufferedReader  inputBuffer = null;

    try {
        input = new FileReader(this.fileName);
        inputBuffer = new BufferedReader (input);

        String line;
        while ((line = inputBuffer.readLine()) != null) {
            String[] inputData = line.split(",");

            Node<Integer> newNode = new Node<Integer> (
                                       Integer.parseInt(inputData[0]),
                                       Integer.parseInt(inputData[1]));
            this.gd.add(newNode);
        }

    }catch (NumberFormatException nfe){
        System.out.println(
               "Repository could not load data due to NumberFormatException: "
               + nfe); 
    }catch (FileNotFoundException fnfe) {
        System.out.println("File not found, error: " + fnfe);
    }finally {
        inputBuffer.close();
        input.close();
    }
} 
```

现在，即使我创建了我的文件，它也不想使用它。最初它在我的存储库的构造函数中，我将它移到主文件中，仍然没有成功。

**这是 Eclipse 在控制台中打印的内容：**

*   Work in progress D:\Info\Java workspace\Laborator_4\Data.txt 找不到文件，错误：java.io.FileNotFoundException：Data.txt（系统找不到指定的文件）线程“main”java.lang中的异常。在 main.app.main(app.java:23) 的 repository.Repository.(Repository.java:49) 的 NullPointerException

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:23:52.257

这不会像您认为的那样做：

```
File f = new File("Data.txt");
System.out.println(f.getAbsolutePath());
        // Yes, it's there. 
```

这不会在磁盘上*创建*文件。它只是创建一个`File`表示路径名的对象。如果您使用：

```
System.out.println(f.exists()); 
```

*这*会告诉你它是否真的存在。

所以除非`D:\Info\Java workspace\Laborator_4\Data.txt`真的，真的存在，否则你得到一个例外是完全合理的。创建文件并重试。

此外，你`NullPointerException`在你的`finally`块中得到 a 是因为你*假设*并且都是非空`inputBuffer`的`input`：不要做那个假设。关闭前检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:24:02.440

文件是一个抽象路径。执行这个：

```
File f = new File("Data.txt"); 
```

磁盘上没有绝对的东西。这也不是

```
System.out.println(f.getAbsolutePath()); 
```

对文件是否存在的任何测试。

做这个：

```
if(file.exists()) {
    // yes it's there
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-16T19:25:54.237

正如其他人所说，您不创建文件，请尝试`touch()`此处的方法：[ApacheFileUtils](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#touch%28java.io.File%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-16T19:27:51.417

我希望这有效：

替换此行

```
Repository repo = new Repository("Data.txt", gd); 
```

和 ：

```
Repository repo = new Repository(f, gd); 
```

在你的

```
public Repository (String fileName, GenericDictionary gd) 
                                           throws IOException, 
                                                  NumberFormatException, 
                                                  FileNotFoundException 
```

用这个

```
public Repository (File f, GenericDictionary gd) 
                                           throws IOException, 
                                                  NumberFormatException, 
                                                  FileNotFoundException 
```

并尝试 { } 而不是

```
input = new FileReader(this.fileName); 
```

做这个

```
input = new FileReader(f.getAbsolutePath()); 
```

# ruby-on-rails - Rails - 可在任何地方使用的全局变量，包括控制器、视图和模型

> ID：13904696
> 
> 赞同：1
> 
> 时间：2012-12-16T19:23:29.703
> 
> 标签：ruby-on-rails, global-variables

我的问题看似简单，但一直难以捉摸。我想要一个可以在应用程序的任何地方调用的值——它是我们在模型中用于验证的最小值，我们想通知用户该值等等。

到目前为止，我已经完成了以下工作：

在 config/initializers 中，我创建了一个新的 .rb 文件（根据我在另一个线程上找到的建议）：

```
minimum = 15 
```

只是在启动rails服务器后找不到它。

我发现了一个奇怪的建议，将 en.yml 中的值设为最小值：15，与上述问题相同。

显然，应用程序助手和控制器无济于事，因为我需要模型中的值。然而，我确实找到了一种解决方案，即把它放在 config/application.rb 的类 Application 中：

```
config.after_initialize do
    ::Minimum = 15
end 
```

然后这样称呼它：

```
MyApp::Application::Minimum 
```

显然，这个解决方案虽然有效，但并不理想。如果我能找到一种方法将 MyApp::Application::Minimum 别名为“最小值”，我将完全满意，但据我所知，在初始化程序中完成它是一个更好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:30:03.073

如果需要，您可以在模型中粘贴一些东西并从任何地方调用它：

```
Couriers = %w[TNT UPS RoyalMail Bike Hand Pigeon Other] 
```

但我更喜欢将它们放在 yaml 文件中。

在你的 configs 目录中创建一个 config.yml 文件并将你的 vars 放在那里：

```
defaults: &defaults

   node_1: '10.8'
   node_2: '10.9'
   node_3: '10.0'

   whatever: 1
   thereis: 2

development:
  <<: *defaults

playground:
  <<: *defaults

production:
  <<: *defaults

poststaging:
  <<: *defaults

test:
  <<: *defaults 
```

在初始化程序目录中使用类似的内容加载配置文件。在 /config/initializers 中创建一个名为 'load_vars.rb' 的文件，并将以下内容放入其中：

```
SETTINGS = YAML.load_file("#{Rails.root}/config/config.yml")[Rails.env] 
```

不过，您必须在更改这些内容后重新启动服务器。

- 编辑 -

要使用这些变量，您可以从模型、控制器、视图中加载类似的内容：

```
SETTINGS['var_1'] 
```

# php - PHP 邮件：所有邮件都在垃圾邮件文件夹中接收

> ID：13904701
> 
> 赞同：-1
> 
> 时间：2012-12-16T19:23:57.183
> 
> 标签：php, email, spam

我正在制作一个简单的 PHP 邮件发送器，以一次将图像发送到多个地址。不知道为什么，但是无论我发送什么电子邮件管理器，电子邮件都会不断到达垃圾邮件文件夹......

下面是我如何调用 PHP 邮件发件人文件：

```
$.ajax({ url: 'mail_sender.php?receiver=' + receiver + '&=lang' + lang,

    success: function (response)
    {
        console.log('Mails ' + response);
    }
}); 
```

这是我的 PHP 文件结构：

```
<?php

// Reciever
$_to           = $_GET["receiver"];
$_lang      = $_GET["lang"];

// subject
$subject        = 'My Subject';

// sender
$sender         = "sender@sender.es";

// message
$message        = '
                <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
                <head>
                <META name="generator" content="HTML Tidy for Linux/x86 (vers 25 March 2009), see www.w3.org">
                <TITLE></TITLE>
                <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
                </head>
                <body>
                  <img src='."https://www.mysite.es/demo/img/emails/imagen_".$_lang.".jpg".' />
                </body>
                </html>
';

// To send HTML mail, the Content-type header must be set
$headers  = "Reply-To: <sender@sender.es> \r\n";
$headers .= "Return-Path: <sender@sender.es>" . "\r\n";
$headers .= "From: <sender@sender.es>" . "\r\n"; 
$headers .= "Organization: My organization" . "\r\n";
$headers .= "MIME-Version: 1.0" . "\r\n";
$headers .= "Content-type: text/html; charset=utf-8" . "\r\n";
$headers .= "X-Priority: 3" . "\r\n";
$headers .= "X-Mailer: PHP/". phpversion();

// Mail it
$ret = mail($_to, $subject, $message, $headers);

if ( $ret == '' || $ret )
{
    echo $ret;
}else{
    echo $ret;
}

?> 
```

谁能提供一些线索？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:35:06.037

尝试发送纯文本电子邮件而不是 HTML（如果这适合您的需要）。根据我的经验，HTML 经常会触发垃圾邮件过滤器，但如果您确实需要使用 HTML，请尝试查看 mailchimp 使用的一些电子邮件模板。

[https://github.com/mailchimp/Email-Blueprints](https://github.com/mailchimp/Email-Blueprints)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:33:28.027

您的代码在技术上似乎没有任何问题，您的电子邮件被垃圾邮件过滤器拒绝的原因可能有很多，但我猜您的电子邮件内容只是一张图片。这是垃圾邮件过滤器的一个强有力的指标。尝试使用文本设计您的电子邮件，并且仅使用图像来支持您的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:26:30.370

问题应该是您服务器的IP。如果提供商从同一 IP 收到大量邮件，则无论收到什么邮件，都将其视为垃圾邮件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T19:30:54.933

您应该考虑通过[spamassassin](http://spamassassin.apache.org/)测试您的电子邮件，这将根据一组给定的规则为您的电子邮件提供垃圾邮件分数。

许多电子邮件提供商使用这类工具。

编辑：[http](http://wiki.apache.org/spamassassin/StartUsing) ://wiki.apache.org/spamassassin/StartUsing可能是一个不错的起点。

# iphone - NsMutableArray 对象值只有相同的值

> ID：13904702
> 
> 赞同：0
> 
> 时间：2012-12-16T19:23:58.190
> 
> 标签：iphone, ios5

我想`NSMutableArray`存储触摸时间间隔，但遇到了一个问题：
的`NSMutableArray`计数仅为`1`. 我能做些什么？

```
NSInteger count = 0;
float firstTempTime = 0;
float nTempTime = 0;
float nTouchTimegap = 0;

#pragma mark –
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { 
messageLabel.text = @"Touches Began"; 
[self updateLabelsFromTouches:touches];  
NSArray *array = [touches allObjects];   
for (UITouch *touch in array){
    count = count +1;
    NSLog(@"began touch count: %d", count);

    nTempTime = [touch timestamp];
    NSLog(@"n TempTime stamp : %lf", nTempTime); 

    if (count == 1) {
        firstTempTime = [touch timestamp];
    }

    else {
        nTouchTimegap = nTempTime - firstTempTime;
        firstTempTime = nTempTime;
    }
    NSLog(@"nTouchTimegap : %lf", nTouchTimegap);

    nTouchTimegapArray = [NSMutableArray arrayWithCapacity:count];
    [nTouchTimegapArray addObject:[NSNumber numberWithFloat: nTouchTimegap]];

    for(id obj in nTouchTimegapArray){
        NSLog(@"nTouchTimegapArray : %i", [nTouchTimegapArray count]);
        NSLog(@"nTouchTimegapArray : %@", obj);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:44:24.853

我想我必须把它拼出来：

```
nTouchTimegapArray = [NSMutableArray arrayWithCapacity:count];
[nTouchTimegapArray addObject:[NSNumber numberWithFloat: nTouchTimegap]]; 
```

该序列在每次迭代时有效地擦除了数组。数组中不可能有多个条目。

将第一行移出循环，并且，如果您想从方法的所有调用中累积触摸，请将其移至`init`例程或`viewDidLoad`类似的例程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:54:36.317

`touchesBegan:`一旦你触摸屏幕就会被调用，如果你用第二根手指触摸屏幕，它会再次被调用。

你应该看看`touchesEnded:`和`touchesCancelled:`

# shopify - 如何按时间顺序获取 /admin/products.json？

> ID：13904707
> 
> 赞同：1
> 
> 时间：2012-12-16T19:24:22.523
> 
> 标签：shopify

我需要能够从 Shopify API 轮询 250 多种产品。为此，我需要按时间顺序从 API 中检索产品，首先是最旧的产品。获得前 250 个项目后，我会检索另外 250 个按`max_created_at`.

我注意到：`GET /admin/products.json`以随机顺序`GET /admin/products.json?since_id=0`返回产品，但按时间顺序返回产品。这是预期的行为吗？或者是否有一个我可以发送的标志`GET /admin/products.json`来指定排序顺序？

**编辑：**我想我的问题归结为：我可以设置一个字段来对 Shopify API 返回的结果进行排序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-08T16:15:16.600

也许自上一篇文章以来 API 已经更新，但现在您可以这样做：

```
https://yourshop.myshopift.com/admin/products.json?limit=50&fields=id,images,title&order=created_at+desc 
```

只需添加查询字符串参数 order=created_at+asc

这是一个未记录的功能，但它似乎适用于大多数领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T19:30:07.847

这是意外行为，产品的可靠排序顺序仅限于标题和总数，然后过滤选项如[API 文档](http://api.shopify.com/product.html)中所列。

# c++ - 周围物体算法

> ID：13904708
> 
> 赞同：7
> 
> 时间：2012-12-16T19:24:33.023
> 
> 标签：c++

我正在开发一款游戏，其中一个对象可能存在于`(x, y)`where`x`和`y`are的位置`ints`。例如，一个对象可能存在`(0, 0)`也可能不存在，但不可能同时存在多个对象。

我正在尝试决定使用哪个 STL 容器来解决手头的问题以及解决此问题的最佳方法。

基本上，我从一个对象及其`(x, y)`位置开始。目标是根据该对象的周围对象确定**最高、最大的可能矩形。**必须使用当前对象上方和下方的所有对象来创建矩形。也就是说，它必须是可能基于起始对象位置的最高点。

例如，假设以下代表我的对象网格，我从 location 的绿色对象开始`(3, 4)`：

![在此处输入图像描述](../Images/672fc589be38c2581e2753f085ae2e6d.png)

然后，我正在寻找的矩形将由下面的粉红色方块表示：

![在此处输入图像描述](../Images/c9ef23b036c52485f84b0334b8ba3e71.png)

因此，假设我从`(3, 4)`示例中所示的对象开始，我将需要检查对象是否也存在于`(2, 4)`、`(4, 4)`、`(3, 3)`和`(3, 5)`。如果对象存在于这些位置中的任何一个，我需要重复该过程以使对象找到最大可能的矩形。

这些物品相当稀有，游戏世界很大。`new`整个游戏世界只使用一个 2D 数组似乎并不实际，因为大多数元素都是空的。但是，我需要索引到任何位置以随时检查对象是否存在。

相反，我考虑过使用`std::map`这样的：

```
std::map< std::pair<int, int>, ObjectData> m_objects; 
```

然后，当我检查周围的物体时，我可以`map::find()`在我的循环中使用，检查周围的物体是否存在：

```
if(m_objects.find(std::pair<3, 4>) != m_objects.end())
{
    //An object exists at (3, 4).
    //Add it to the list of surrounding objects.
} 
```

如果我决定这样做，我可能会打很多电话`map::find()`，但地图占用的内存比`new`ing 整个世界的 2D 数组要少得多。

有人对我可以用来查找所需内容的简单算法有任何建议吗？我应该继续使用 a`std::map`还是有更好的容器来解决此类问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T06:14:45.013

您需要在每个网格位置存储多少数据？如果您只是在寻找指示邻居的标志，那么您至少有两个“低技术”解决方案

a) 如果你的网格是稀疏的，每个方格保存一个邻居列表怎么样？所以每个方格都知道哪些相邻方格被占用。当广场被占用或腾出时，您将需要做一些工作来维护列表。但是邻居列表意味着您根本不需要网格图

b) 如果网格地图位置确实只是点，则每个网格位置使用 1 位。结果映射将比为每个网格点使用字节的映射小 8x8=64 倍。位操作正在快速减轻。10,000x10,000 的地图将占用 100,000,000 位或 12.5MB（大约）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T22:34:53.630

您可能需要考虑空间数据结构。如您所说，如果数据是“稀疏”的，那么进行四叉树邻域搜索可能会为您节省大量处理能力。我个人会使用 R-tree，但这很可能是因为我有一个我编写的 R-tree 库并且可以轻松导入。

例如，假设您有一个`1000x1000`包含 10,000 个元素的网格。假设目前是均匀随机分布，我们将（基于密度）期望不超过，说。. . 在任一维度上接触的三到五个对象链（在此密度下，三个垂直方向的对象链将以 0.01% 的概率发生）。假设所考虑的对象位于`(x,y)`。一个窗口搜索，从 at`(x-5,y-5)`开始到`(x+5,y+5)`将给你一个最多包含 121 个元素的列表来执行线性搜索。如果您的 rect-picking 算法注意到有可能形成一个更高的矩形（即，如果正在考虑的 rect 触及这个`11x11`边界框的边缘），只需重复窗口搜索另一个`5x5`原稿的一个方向上的区域。根据需要重复。

当然，这仅在您拥有极其稀疏的数据时才有效。可能值得调整 R-tree 以使叶子成为关联。数据结构（即`Int -> Int -> Object`），但在这一点上，最好只找到一个适用于更密集数据的解决方案。

我可能想多了；在某个地方可能有一个更简单的解决方案。

关于 R-trees 的一些参考资料：

*   [原始论文](http://postgis.refractions.net/support/rtree.pdf)，用于原始算法。
*   [维基百科页面](http://en.wikipedia.org/wiki/R-tree)，对这个主题有一些不错的概述。
*   [R-tree 门户](http://www.rtreeportal.org/)，用于与 R-trees 相关的数据集和算法。

如果我有时间清理一下，我将使用指向我自己的 R-tree 实现（公共域）的链接对其进行编辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:50:56.103

如果可能的话，一种改进是使用哈希图。这将允许您至少以 O(1) 的预期时间复杂度进行潜在的广泛搜索。

这里有一个线程（[将两个整数映射到一个，以独特且确定的方式](https://stackoverflow.com/questions/919612/mapping-two-integers-to-one-in-a-unique-and-deterministic-way)）详细介绍了如何将两个整数散列在一起。

如果你的编译器支持 C++11，你可以使用 std::unordered_map。如果没有，boost 基本相同： http: [//www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html](http://www.boost.org/doc/libs/1_38_0/doc/html/boost/unordered_map.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T23:44:15.923

这听起来像是一个家庭作业问题（因为它有一个奇怪的条件“必须通过使用当前对象上方和下方的所有对象来创建矩形”，这使得解决方案变得微不足道）。但无论如何我都会试一试。为方便起见，我将使用“像素”一词而不是“对象”。

如果您的应用程序确实需要重量级的解决方案，您可以尝试将像素存储在四叉树中（其叶子包含每个只有几千像素的普通旧二维数组）。或者您可以将连续的像素组合成“形状”（例如，您的示例将仅包含一个“形状”，即使它包含 24 个单独的像素）。给定一个初始的非结构化像素坐标列表，很容易找到这些形状；谷歌“联合查找”。存储连续形状的具体好处是，当您寻找最大的矩形时，您只需要考虑与初始像素形状相同的那些像素。

存储连续形状的一个特定缺点是，如果您的像素对象四处移动（例如，如果它们代表 roguelike 游戏中的怪物），我不确定 union-find 数据结构是否支持增量更新。您可能必须在每个“帧”上运行 union-find，这将非常糟糕。

无论如何...假设您正在使用 a `std::unordered_map<std::pair<int,int>, ObjectData*>`，因为这对我来说听起来很合理。（您几乎肯定应该在映射中存储指针，而不是实际对象，因为复制所有这些对象会比复制指针慢很多。）

```
typedef std::pair<int, int> Pt;
typedef std::pair<Pt, Pt> Rectangle;
std::unordered_map<Pt, ObjectData *> myObjects;

/* This helper function checks a whole vertical stripe of pixels. */
static bool all_pixels_exist(int x, int min_y, int max_y)
{
    assert(min_y <= max_y);
    for (int y = min_y; y <= max_y; ++y) {
        if (myObjects.find(Pt(x, y)) == myObjects.end())
            return false;
    }
    return true;
}

Rectangle find_tallest_rectangle(int x, int y)
{
    assert(myObjects.find(Pt(x,y)) != myObjects.end());
    int top = y;
    int bottom = y;
    while (myObjects.find(Pt(x, top-1) != myObjects.end()) --top;
    while (myObjects.find(Pt(x, bottom+1) != myObjects.end()) ++bottom;
    // We've now identified the first vertical stripe of pixels.
    // The next step is to "paint-roller" that stripe to the left as far as possible...
    int left = x;
    while (all_pixels_exist(left-1, top, bottom)) --left;
    // ...and to the right.
    int right = x;
    while (all_pixels_exist(right+1, top, bottom)) ++right;
    return Rectangle(Pt(top, left), Pt(bottom, right));
} 
```

# opengl - OpenGL 多灯

> ID：13904709
> 
> 赞同：4
> 
> 时间：2012-12-16T19:24:38.603
> 
> 标签：opengl, lighting

我正在尝试为我的场景添加第二盏灯。我的印象是我需要做的就是启用另一盏灯（在本例中为 LIGHT1），并设置它的参数以使其与现有灯一起工作。考虑到这一点，这是我的照明初始化：

```
void ThemePark::lightInit(GLfloat sun_position[], GLfloat light1_position[])
{
    // Enable Lighting
    glEnable(GL_LIGHTING);

    glLightModelf(GL_LIGHT_MODEL_LOCAL_VIEWER, 0);
    glLightfv(GL_LIGHT0, GL_POSITION, sun_position); // Position the lights
    glLightfv(GL_LIGHT1, GL_POSITION, light1_position);

    // Set light intensity and color for each component
    glLightf(GL_LIGHT0, GL_DIFFUSE, (0.5,0.5,0.5,1));
    glLightf(GL_LIGHT0, GL_AMBIENT, (0.5,0.5,0.5,1));
    glLightf(GL_LIGHT0, GL_SPECULAR, (1,1,1,1));

    glLightf(GL_LIGHT1, GL_DIFFUSE, (0.7,0.7,0.7,1));
    glLightf(GL_LIGHT1, GL_AMBIENT, (0.3,0.3,0.3,1));
    glLightf(GL_LIGHT1, GL_SPECULAR, (1,1,1,1));

    // Set attenuation
    glLightf(GL_LIGHT0, GL_CONSTANT_ATTENUATION, 0.5);
    glLightf(GL_LIGHT0, GL_LINEAR_ATTENUATION, -1.0);

    glLightf(GL_LIGHT1, GL_CONSTANT_ATTENUATION, 0.2);

    // Enable Lights
    glEnable(GL_LIGHT0);
    glEnable(GL_LIGHT1);
} 
```

我也在我的显示功能中再次定位我的灯，如下所示：

```
if(lighting)
{
    glLightfv(GL_LIGHT0, GL_POSITION, sun_position);
    glLightfv(GL_LIGHT1, GL_POSITION, light1_position);
} 
```

他们的职位是：

```
GLfloat sun_position[] = {10, 10, -2, 1};
GLfloat light1_position[] = {1, 1, 1, 1}; 
```

但是，这样做时，我仍然只有一个活动灯 LIGHT0。取出 LIGHT0 的启用语句会给我一个没有灯光的场景。作为测试，我将光照初始化函数修改为以下内容，这实质上使 LIGHT1 与 LIGHT0 相同，但从不启用或初始化 LIGHT0。

```
void ThemePark::lightInit(GLfloat sun_position[], GLfloat light1_position[])
{
    // Enable Lighting
    glEnable(GL_LIGHTING);

    glLightModelf(GL_LIGHT_MODEL_LOCAL_VIEWER, 0);
    glLightfv(GL_LIGHT1, GL_POSITION, sun_position);

    // Set light intensity and color for each component
    glLightf(GL_LIGHT1, GL_DIFFUSE, (0.5,0.5,0.5,1));
    glLightf(GL_LIGHT1, GL_AMBIENT, (0.5,0.5,0.5,1));
    glLightf(GL_LIGHT1, GL_SPECULAR, (1,1,1,1));

    // Set attenuation
    glLightf(GL_LIGHT1, GL_CONSTANT_ATTENUATION, 0.5);
    glLightf(GL_LIGHT1, GL_LINEAR_ATTENUATION, -1.0);

    // Enable Lights
    glEnable(GL_LIGHT1);
} 
```

我也相应地修改了我的显示功能。但是，我的场景中仍然没有灯光。我在这里缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T20:12:04.393

GL_LIGHT1-7 实际上与 GL_LIGHT0 有不同的默认值......所以你必须找到你忘记设置的那些。也许是 GL_QUADRATIC_ATTENUATION？如果不尝试设置[规范](http://www.khronos.org/opengles/sdk/1.1/docs/man/glLight.xml)中的所有参数，其中许多参数默认为 GL_LIGHT1-7 的零/关闭状态。

# android - android计算器应用程序中的错误

> ID：13904711
> 
> 赞同：0
> 
> 时间：2012-12-16T19:24:45.533
> 
> 标签：android

大家好，我有一个 android 应用程序，它是只执行一个操作（加法）的计算器，结果总是 3.0，不管这两个数字是什么解决方案？这是代码

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class claculator extends Activity {
    /** Called when the activity is first created. */

    EditText nu1,nu2;
    Button add;
    TextView txtv;
    double x,y,z;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        nu1=(EditText)findViewById(R.id.n1);
        nu2=(EditText)findViewById(R.id.n2);
        add=(Button)findViewById(R.id.btn);
        txtv=(TextView)findViewById(R.id.tv);

         x= Double.parseDouble(nu1.getText().toString());
       y= Double.parseDouble(nu2.getText().toString());

       add.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            z=x+y;
            txtv.setText(String.valueOf(z));
        }
    });

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:26:27.140

您必须在内部获取 EditText 值`onClick()`：

```
add.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View arg0) {
        x= Double.parseDouble(nu1.getText().toString());
        y= Double.parseDouble(nu2.getText().toString());

        z=x+y;
        txtv.setText(String.valueOf(z));
    }
}); 
```

当您尝试在`onCreate()`用户还没有机会更改它们时获取这些值时，您将获得它们的*默认*值。当用户单击按钮时，您必须获取这些值。

# c# - 这些方括号在 c# 中是什么意思？

> ID：13904713
> 
> 赞同：1
> 
> 时间：2012-12-16T19:24:51.133
> 
> 标签：c#, model, square-bracket

> **可能重复：**
> [.NET：什么是属性？](https://stackoverflow.com/questions/20346/net-what-are-attributes)

以下代码中的方括号是什么意思：

```
public class LoginModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
} 
```

我在其他问题中读到它们是属性，但我不知道它们是*如何*工作的......为什么它们会出现在这个类中？这些是否仅在 C# 中使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:52:08.380

基本思想是您正在标记您的代码。他们如何工作取决于“你”

假设您正在为多个类的数据输入构建多个表单，并且您想要显示针对强制性表单的提示并针对它们进行验证，并且您希望执行此操作的代码对您正在为其执行表单的所有类都是通用的，并且您绝对不想在每次向您的任何类添加新的强制属性时更改该例程。

使用反射，您可以将对象传递给例程，获取所有属性的列表，找到所有具有 [Required] 属性的对象，甚至测试实例以查看它是否为空，然后将它们的列表传回，而无需对班级一无所知。不是它是什么，不是它有多少属性，它们是什么类型。唯一的共享代码是RequiredAttribute 类。

学习它的最简单方法是定义自己的一个并使用它。

Google .Net System.Attribute，例子比比皆是。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:30:45.790

他们被称为`Attributes`。看[`MSDN`](http://msdn.microsoft.com/en-us/library/system.attribute.aspx)。

> 属性由从抽象类 System.Attribute 继承（直接或间接）的类定义。要将属性附加到代码元素，请在代码元素之前的方括号中指定属性的类型名称。

* * *

> 这些是否仅在 C# 中使用？

不，Java 也有属性类。其他oop语言也可以有。

# winjs - 如何修改注册表项？

> ID：13904715
> 
> 赞同：1
> 
> 时间：2012-12-16T19:24:59.310
> 
> 标签：winjs

我正在用 JavaScript 开发 Windows 8 应用程序，在当前的应用程序中我想修改注册表项，但是如何？我想以编程方式更改桌面的背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T02:25:03.643

根据我在 MSDN 中找到的信息，Metro Style Apps（现在称为 Windows Store Apps）无法访问注册表。

看到这个： [http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/11f30427-e7e8-4c7f-8bed-04528c249eb6](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/11f30427-e7e8-4c7f-8bed-04528c249eb6)

PS您可能可以更多地谈论您想做的事情，以便人们可以帮助您找到替代方案。

# javascript - 访问函数内的 JavaScript 变量

> ID：13904719
> 
> 赞同：0
> 
> 时间：2012-12-16T19:25:44.707
> 
> 标签：javascript, function, variables

我正在尝试使用一个变量来保存一个 HTML id，这样我就不必`getElementById`一遍又一遍地写。但我无法让它工作。这是我的代码：

```
var box1 = document.getElementById('box1');

function slide4(){
    box1.style.width='10%';
} 
```

如果我将变量放在函数中它会起作用，但这似乎是一种不好的做法，因为我想在其他函数中访问该变量并且不想一遍又一遍地声明变量。

```
function slide4(){
    var box1 = document.getElementById('box1');
    box1.style.width='10%';
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:32:01.390

我认为您在加载 DOM 之前访问它。试试这个：

```
var box1;

window.onload = function() {
    box1 = document.getElementById('box1');
}

function slide4() {
    box1.style.width = '10%';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:32:48.307

您应该确保在页面加载后运行**box1初始化。**所以一种解决方案是：

```
var box1 = null;
window.onload = function(){
    box1 = document.getElementById('box1');
} 
```

另一种解决方案是创建一个函数，而不是该变量，并在需要时使用它：

```
function BoxID(){
    return document.getElementById('box1');
} 
```

当然，如果你使用 jquery 库，你可以随时使用：

```
$("#box1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:34:57.057

我建议您将变量作为参数传递：

```
var box1 = document.getElementById('box1');

function slide4(box){
    box.style.width='10%';
} 
```

您也可以定义变量，而`var`不会使它成为`window`对象的属性

```
box1 = document.getElementById('box1');
alert(window.box1); 
```

# android - 每1秒隐藏android中的imageview并显示1秒

> ID：13904720
> 
> 赞同：0
> 
> 时间：2012-12-16T19:25:44.640
> 
> 标签：android, android-imageview

如何`ImageView`在Android中每1秒显示一次，然后将其隐藏1秒并再次显示1秒，无限重复？我尝试使用以下技术。我只是一个新手。

```
ImageView v=(ImageView)findViewbyID(R.id.mypic);
Date d=new Date();
SimpleDateFormat sdf=new SimpleDateFormat("ss");
if(sdf.format(d)%2==0)
    v.setVisibility(View.INVISIBLE); 
```

上面的代码只是使图像不可见，并不会连续运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:29:21.853

尝试使用倒数计时器

```
new CountDownTimer(300000, 1000) {

     boolean visible = true;
     public void onTick(long millisUntilFinished) {
           ImageView v=(ImageView)findViewbyID(R.id.mypic);
           if(visible)
               v.setVisibility(View.INVISIBLE); 
           else
               v.setVisibility(View.VISIBLE); 

            visible = !visible;
     }

     public void onFinish() {

     }
  }.start(); 
```

或者你甚至可以使用处理程序

```
Handler handler=new Handler()
    {
        boolean visible = true;
        @Override
        public void handleMessage(Message msg)
        {
               ImageView v=(ImageView)findViewbyID(R.id.mypic);
               if(visible)
                    v.setVisibility(View.INVISIBLE); 
               else
                    v.setVisibility(View.VISIBLE); 

            visible = !visible;
        handler.sendEmptyMessageDelayed(0, 1000);

      }
    };
    handler.sendEmptyMessage(0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:38:18.393

```
public Void Handle {
    new Handler().postDelayed(new Runnable() {
    boolean visible = true;
       public void run() {
      final ImageView v = (ImageView)findViewById(R.id.mypic);

      if(visible)
           v.setVisibility(View.INVISIBLE); 
       else
           v.setVisibility(View.VISIBLE); 

              }
  }, 100);

      Handle();
} 
```

# vba - Codehelp：寻找列和格式化单元格

> ID：13904723
> 
> 赞同：0
> 
> 时间：2012-12-16T19:25:58.087
> 
> 标签：vba, excel, excel-2010

我的宏代码有点问题，需要你的建议。这是我的基本宏代码：

```
Option Explicit

Sub NurZumUeben()

'oberste Zeile löschen, fixieren und linksbündig ausrichten
Rows("1:1").Select
Selection.Delete Shift:=xlUp
With ActiveWindow
   .SplitColumn = 0
   .SplitRow = 1
End With
ActiveWindow.FreezePanes = True

'Jede zweite Zeile schattieren
Application.ScreenUpdating = False
Dim Zeile, ZeilenNr As Integer
With ActiveSheet.UsedRange.Rows
   .Interior.ColorIndex = xlNone
   .Borders.ColorIndex = xlNone
End With
ZeilenNr = 2
For Zeile = 2 To ActiveSheet.UsedRange.Rows.Count
    With Rows(Zeile)
        If .Hidden = False Then
            If ZeilenNr Mod 2 = 0 Then
                .Interior.ColorIndex = 15
                .Borders.Weight = xlThin
                .Borders.ColorIndex = 16
                ZeilenNr = ZeilenNr + 1
            Else
                ZeilenNr = ZeilenNr + 1
            End If
        End If
    End With
Next Zeile
Application.ScreenUpdating = True

'oberste Zeile einfärben
Rows("1:1").Select
With Selection.Interior
    .Pattern = xlSolid
    .PatternColorIndex = xlAutomatic
    .Color = 65535
    .TintAndShade = 0
    .PatternTintAndShade = 0
End With

'Spalte_suchen&formatieren
Dim iLeSpa     As Integer
Dim iSpalte    As Integer
Dim bGefunden  As Boolean

iLeSpa = IIf(IsEmpty(Cells(1, Columns.Count)), Cells(1, _
  Columns.Count).End(xlToLeft).Column, Columns.Count)

For iSpalte = 1 To iLeSpa
   If Cells(1, iSpalte).Value = "click_thru_pct" Then
     bGefunden = True
     Exit For
  End If
Next iSpalte

If bGefunden Then
  With Range(Cells(2, iSpalte), Cells(5000, iSpalte))
     .Replace What:="%", Replacement:="", LookAt:=xlPart, SearchOrder:=xlByRows
     Range("K1") = 100
     Range("K1").Copy
     .PasteSpecial Paste:=xlPasteAll, Operation:=xlDivide
     .NumberFormat = "0.00%"
     Range("K1").Clear
  End With
Else
  MsgBox "Die Überschrift  ""click_thru_pct""  wurde nicht gefunden.", _
     48, "   Hinweis für " & Application.UserName
End If

End Sub 
```

曾经感谢所有可以提供帮助的人。不幸的是，我得到的最终格式不太好

以下是结果：[示例](http://www.civelek.com/space-anomaly.com/excel.PNG)

我不想为整个列着色，而只想为第一行着色。此外，丑陋的 0.00% 的下部空字段不断格式化。

此外，我注意到在第一行着色之后，可以看到字段 K1。不幸的是，这对我来说是不切实际的，因为这些 Excel 文档在行中也可能会有所不同。

这是您可以在必要时对其进行测试的文档。 [例子](http://www.civelek.com/space-anomaly.com/report.xlsb)

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:50:18.280

更改模函数以计算 for 循环变量。我认为为此使用单独的变量没有任何意义。改变这个：

```
ZeilenNr = 2
    For Zeile = 2 To ActiveSheet.UsedRange.Rows.Count
        With Rows(Zeile)
            If .Hidden = False Then
                If ZeilenNr Mod 2 = 0 Then
                    .Interior.ColorIndex = 15
                    .Borders.Weight = xlThin
                    .Borders.ColorIndex = 16
                    ZeilenNr = ZeilenNr + 1
                Else
                    ZeilenNr = ZeilenNr + 1
                End If
            End If
        End With
    Next Zeile 
```

对此：

```
 For Zeile = 2 To ActiveSheet.UsedRange.Rows.Count
        With Rows(Zeile)
            If .Hidden = False Then
                If Zeile Mod 2 = 0 Then
                    .Interior.ColorIndex = 15
                    .Borders.Weight = xlThin
                    .Borders.ColorIndex = 16
                End If
            End If
        End With
    Next Zeile 
```

如果我在这里遗漏了什么，我深表歉意。另外，我无法查看您提供的示例，因为该站点需要登录并且不是英文的。再次抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:09:29.173

在您现有的代码中，

1.  替换`5000`为`ActiveSheet.UsedRange.Rows.Count`

2.  替换`Range("K1").Clear`为`Range("K1").ClearContents`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T20:16:43.937

而不是`For Zeile = 2 To ActiveSheet.UsedRange.Rows.Count`，您可以使用

```
For Zeile = 2 To ActiveSheet.Range("A1").CurrentRegion.Rows.Count-1 
```

`.UsedRange`并不总是正确重置。你的样品似乎是一个很好的候选人`.CurrentRegion`

# c# - 关于在 silverlight 5 中连接到远程数据库的几个问题

> ID：13904725
> 
> 赞同：0
> 
> 时间：2012-12-16T19:26:21.853
> 
> 标签：c#, silverlight, database-connection, silverlight-5.0

我找到了这些教程：

[http://www.dreamincode.net/forums/topic/173124-silverlight-connecting-to-remote-database-wcf/](http://www.dreamincode.net/forums/topic/173124-silverlight-connecting-to-remote-database-wcf/)

[http://www.youtube.com/watch?v=ZSDKPjRsDI4](http://www.youtube.com/watch?v=ZSDKPjRsDI4)

但我不确定他们是否可以使用 silverlight 5 应用程序。有谁知道教程中显示的步骤是否与 silverlight 5 相同？

此外，这两个教程似乎总体上完成了相同的事情（连接到数据库并从数据库中获取信息），但做的不同。哪种方式是连接数据库、执行 sql 查询并在 silverlight 5 中显示结果的最佳方式？

谢谢！

# search - 寻找易于被搜索引擎索引的唯一 ID 模式

> ID：13904733
> 
> 赞同：2
> 
> 时间：2012-12-16T19:26:42.247
> 
> 标签：search, tags, full-text-search, search-engine, uid

例如来自 Microsoft - *“KB2756872”*或来自国家漏洞数据库 - *“CVE-2010-1428”*或来自 Red Hat - *“RHSA-2010:0376”*或来自 OID - *“1.3.6.1.4.1.311”*或来自 UUID/GUID - *“550e8400-e29b-41d4-a716-446655440000”*。

我想把几个工作放到 UID 上。看下...

我开发了博客软件，并有想法在每篇文章的正文中放置唯一的 ID，以便可以轻松识别来自本地存储的副本对应于远程发布的副本。

此外，我想在许多不同的博客服务上发帖，这样如果一个失败了，可以从另一个访问文章。所以链接可能会死，但如果我添加 UID - 任何人都可以尝试网络搜索以在其他服务上查找帖子！

这也允许收集一些文章传播统计数据。许多网站只是复制内容（复制和重写机器人和人）来破坏搜索引擎。使用 UID，我可以轻松识别此类网站...

所以我的问题是如何制作 UID（以哪种形式），以便它可以很容易地被搜索引擎（网络，如 Google/Yahoo，以及企业，如 Lucene/Solr/Sphinx/Xapian/等）索引。

我知道搜索引擎的一些限制，例如：

*   每个搜索部分仅 >= 3 个字符
*   它不是像 gfh6wytrh6wu56he5gahj763 这样的索引灰尘

所以这个任务并不容易...

任何建议表示赞赏（书籍/博客文章/等）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T09:06:12.800

您可以使用[RFC 4151](https://www.rfc-editor.org/rfc/rfc4151)定义的[标记 URI](http://en.wikipedia.org/wiki/Tag_URI)。

它们是全球唯一的，拥有域名或电子邮件地址至少一天的每个人都可以铸造它们。

请注意，这些 URI 仅*标识*，它们不定位。因此，标签 URI 并没有说明某些内容的发布位置。

假设您网站的域是“example.com”。如果您创建博客文章，则可以创建以下标签 URI：

```
tag:example.com,2012-12:cute-cat 
```

请注意，此 URI 中的日期不是发布日期！它必须是您拥有该域（或电子邮件地址）的（过去）日期。如果您在 2003 年注册了您的域，则始终可以使用以`tag:example.com,2004:`(而不是“2003”开头的标记 URI，因为“2003”表示“2003-01-01”，这可能是您尚未拥有该域的时间)，后跟一个受您控制的（唯一）字符串。但是，如果您愿意，当然可以随时使用发布日期。但不要使用未来的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:45:52.650

您可以使用基于年份和编号的文章标识符，就像 CVE 标识符一样。由于您也需要修订，因此您可以在标识符后附加点以阐明版本。例如，对于一个`AW`esome`B`日志`S`服务，AWBS-2012-1.0 指的是原始文档，AWBS-2012-1.1 指的是第一版等。

但是，您需要在使用 AWBS 之前确保它们是唯一的。CVE 是从池中手动分配的。您可能需要某种从池中分配 AWBS 的服务。这可能是一个简单的数据库查询。

# c++ - /gs 选项导致程序抛出异常

> ID：13904734
> 
> 赞同：3
> 
> 时间：2012-12-16T19:26:45.970
> 
> 标签：c++, mysql, visual-studio, security

最近，我一直在尝试用 C++ 编写一个小测试程序来与 MySQL 服务器通信。我目前正在使用 MySQL Connector/C++ 作为我的 API 来连接到我的数据库服务器。我花了很长时间才让它运行起来，因为 oracle/mysql 几乎没有关于如何在 Visual Studio 10+ 中使用 connector/c++ 的文档。

最后，在一切正常之后，当应用程序尝试退出时似乎出现了一些问题。它抛出以下未处理的异常：

`Unhandled exception at 0x00C62291 in mysql2.exe: Stack cookie instrumentation code detected a stack-based buffer overrun.`

在研究了错误之后，我发现这是由于“安全检查”选项（/gs 编译器选项）造成的。当我禁用此编译器选项时，应用程序会正常退出。

我觉得我不应该关闭它，因为它是 Visual Studio 2012（可能还有其他版本？）

我的问题是：

*   为什么这个 /gs 编译器选项会导致未处理的异常？
*   关闭 /gs 编译器选项是否安全或可以？

这是未处理的异常指向的一段代码（在一个文件中，名为：gs_report.c）：

```
#if defined (_M_IX86) || defined (_M_X64)
    if (IsProcessorFeaturePresent(PF_FASTFAIL_AVAILABLE))
#endif  /* defined (_M_IX86) || defined (_M_X64) */
    __fastfail(FAST_FAIL_STACK_COOKIE_CHECK_FAILURE); 
```

这是我的应用程序代码：

```
/* Standard C++ includes */
#include <stdlib.h>
#include <iostream>

/*
Include directly the different
headers from cppconn/ and mysql_driver.h + mysql_util.h
(and mysql_connection.h). This will reduce your build time!
*/
#include "mysql_connection.h"
#include "mysql_driver.h"

#include <cppconn/driver.h>
#include <cppconn/exception.h>
#include <cppconn/resultset.h>
#include <cppconn/statement.h>
#include <cppconn/prepared_statement.h>

using namespace std;

int main(void)
{
    cout << endl;
    cout << "Let's have MySQL count from 10 to 1..." << endl;

    try {
        sql::Driver *driver;
        sql::Connection *con;
        sql::Statement *stmt;
        sql::ResultSet *res;
        sql::PreparedStatement *pstmt;

        /* Create a connection */
        driver = sql::mysql::get_driver_instance();
        con = driver->connect("tcp://127.0.0.1:3306", "root", "MSxa5y");
        /* Connect to the MySQL test database */
        con->setSchema("test");

        stmt = con->createStatement();
        stmt->execute("DROP TABLE IF EXISTS test");
        stmt->execute("CREATE TABLE test(id INT)");
        delete stmt;

        /* '?' is the supported placeholder syntax */
        pstmt = con->prepareStatement("INSERT INTO test(id) VALUES (?)");
        for (int i = 1; i <= 10; i++) {
            pstmt->setInt(1, i);
            pstmt->executeUpdate();
        }
        delete pstmt;

        /* Select in ascending order */
        pstmt = con->prepareStatement("SELECT id FROM test ORDER BY id ASC");
        res = pstmt->executeQuery();

        /* Fetch in reverse = descending order! */
        res->afterLast();
        while (res->previous())
            cout << "\t... MySQL counts: " << res->getInt("id") << endl;
        delete res;

        delete pstmt;
        delete con;

    } catch (sql::SQLException &e) {
        cout << "# ERR: SQLException in " << __FILE__;
        cout << "() on line " << __LINE__ << endl;
        cout << "# ERR: " << e.what();
        cout << " (MySQL error code: " << e.getErrorCode();
        cout << ", SQLState: " << e.getSQLState() << " )" << endl;
    }

    cout << endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T19:43:43.910

/gs 选项允许运行时检测程序中的错误。删除该选项允许程序在没有检测到它的情况下退出，但错误仍然存​​在。在您的代码或库中的某处，堆栈上的内存正在被覆盖。我会尝试对代码进行二进制搜索，以查看导致错误的语句。您可能还希望始终检查所有数据库调用的返回值。

您绝对不应该禁用此选项。这样做会隐藏真正的错误，并可能使您的程序容易被黑客入侵。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T20:14:17.020

确保检查方法调用的结果代码。这听起来类似于这个问题：[Buffer Overrun using Mysql Connector c++](https://stackoverflow.com/questions/2545903/buffer-overrun-using-mysql-connector-c) as Visual Studio's /gs flag is warning about buffer overflows。

# sqlalchemy - SQLAlchemy：如何在 session.close() 之后使用 SQLAlchemy 中的实例？

> ID：13904735
> 
> 赞同：5
> 
> 时间：2012-12-16T19:26:54.057
> 
> 标签：sqlalchemy

session.close() 之后，我在使用 SQLAlchemy 中的实例时遇到问题。

这是代码：

```
session = sqlalchemy.orm.sessionmaker(bind=engine)
object = session.query(Entity).filter(Entity.id == id).one()
object.name = "Foo"
session.commit()
session.close()
print object.name 
```

它抛出一个 DetachedInstanceError。

我试图分离对象， expunge_all() 并且什么都没有。

谢谢

**编辑**

我发现了问题所在。为了将来参考，我将回答我自己的问题。

session.commit() 将对象实例设置为过期，当我在 close() 语句 SQLAlchemy 尝试刷新实例之后尝试访问对象属性时。在 commit() 之后调用 refresh 可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-28T07:35:03.527

您也可以尝试`expire_on_commit=False`影响`commit`通话的设置，这可能意味着您不需要这样做`refresh`（假设这很昂贵）。

# python - M2Crypto 导致核心转储

> ID：13904740
> 
> 赞同：0
> 
> 时间：2012-12-16T19:27:35.513
> 
> 标签：python, ssl, m2crypto

知道如何解决这个问题吗？

```
>>> from M2Crypto import SSL
>>> M2Crypto.version
'0.21.1'
>>> 

>>> ctx = SSL.Context()
>>> conn = SSL.Connection(ctx)
>>> conn.connect(('cancerhelp.org.uk', 443))
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:35:23.273

问题可能是服务器无法处理`sslv23`M2Crypto 默认使用的默认协议 - 至少这是问题的一部分。它不应该出现段错误，但在这种情况下会给出错误，这可能是 M2Crypto 中的错误。

尝试使用`sslv3`or`tlsv1`代替：

```
from M2Crypto import SSL
ctx = SSL.Context(protocol='tlsv1')
conn = SSL.Connection(ctx)
conn.connect(('www.cancerhelp.org.uk', 443)) 
```

这对我有用...

# ios - 表格视图未正确调整到键盘

> ID：13904741
> 
> 赞同：1
> 
> 时间：2012-12-16T19:27:39.360
> 
> 标签：ios, uitableview, user-interface, uikeyboard, uiedgeinsets

我有一个自定义继承`UIView`类，其中一个`UITableView`作为其唯一的子视图。我试图模仿`UITableViewController`显示键盘时的正常功能，以将表格视图的`contentInset`和调整`scrollIndicatorInsets`到键盘的高度。这是我在自定义`UIView`类中显示键盘时调用的方法：

```
- (void)keyboardDidShow:(NSNotification*)notification
{
    NSDictionary* info = [notification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    _tableView.contentInset = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    _tableView.scrollIndicatorInsets = _tableView.contentInset;
} 
```

这在一定程度上有效，但由于某种原因，键盘与表格视图仍有一些重叠，可能有十个左右的像素。

![键盘重叠](../Images/df2600eb52927bb729701cde372c76d0.png)

我认为这与不考虑其他一些屏幕几何形状有关，但我不明白这是怎么回事。键盘的高度应该正是我所需要的，因为 tableView 一直延伸到屏幕底部。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:46:19.647

更改 tableView.frame.size.height，以考虑键盘。

键盘显示时降低高度，不显示时增加高度。

如果您想考虑所有可能性的键盘高度，请参阅此[http://www.idev101.com/code/User_Interface/sizes.html](http://www.idev101.com/code/User_Interface/sizes.html)

不要乱用 contentInset 和 scrollIndicatorInsets。只需设置 frameSize 即可为您处理这些问题。

这就是你的方法应该是的

```
- (void)keyboardDidShow:(NSNotification*)notification
{
    NSDictionary* info = [notification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    CGRect rect = _tableView.frame;
    rect.size.height = _tableView.frame.size.height - kbSize.height;
    _tableView.frame = rect;
}

- (void)keyboardWillHide:(NSNotification*)notification
{
    NSDictionary* info = [notification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    CGRect rect = _tableView.frame;
    rect.size.height = _tableView.frame.size.height + kbSize.height;
    _tableView.frame = rect;
} 
```

我已经将这段代码用于类似的功能。因此，如果它仍然无法正常工作，那么还有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T14:29:08.250

我很好奇为什么这对你不起作用，因为我基本上有同样的东西，它对我有用。我只能看到一个区别，即我不访问“_tableView”，而是确保我始终使用 getter 和 setter。

这就是我所做的，这是有效的。

```
- (void)keyboardDidShow:(NSNotification *)keyboardNotification
{
    NSDictionary *info = [keyboardNotification userInfo];
    CGSize keyboardSize = [[info objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;

    CGFloat newBottomInset = 0.0;

    UIEdgeInsets contentInsets;
    if (UIDeviceOrientationIsPortrait([[UIApplication sharedApplication] statusBarOrientation]) ) {
        newBottomInset = keyboardSize.height;
    } else {
        newBottomInset = keyboardSize.width;
    }

    contentInsets = UIEdgeInsetsMake(0.0, 0.0, newBottomInset, 0.0);
    self.tableView.contentInset = contentInsets;
    self.tableView.scrollIndicatorInsets = contentInsets;
} 
```

请注意，我的应用程序允许设备旋转，当发生这种情况时，使用的值需要是键盘的宽度，因为这些值是相对于纵向的，这给我带来了数小时的困惑。

希望`self.tableView`访问会有所作为。

# java - 为什么线程比 Java 中的 main 方法寿命更长？

> ID：13904745
> 
> 赞同：33
> 
> 时间：2012-12-16T19:27:53.807
> 
> 标签：java, multithreading

我正在自学 Java 线程，我注意到一些让我有点困惑的东西。我做了一个名为`engine`implementation的类`Runnable`。run 方法只是打印“Hello World”，休眠一秒钟，然后重复。

在我的主要方法中，我有：

```
public static void main(String[] args) {
    Thread thread = new Thread(engine);
    thread.start();
    System.out.println("Done.");
} 
```

正如我所料，我看到了“Hello World”和“Done”。打印的很快，说明main方法已经结束了，但没想到我开始的线程在main结束后还在运行。

为什么程序在 main 退出后仍继续执行？我原以为当 main 退出时，进程会终止，所有线程都会被强制清理。这是否意味着每个线程都必须显式地加入/终止 Java 程序才能终止？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-16T19:32:22.000

因为这就是它的工作原理。程序在被调用时退出`System.exit()`，或者在最后一个非守护线程停止运行时退出。

这是有道理的。例如，如果没有这个规则，每个只包含生成 GUI 的 Java 程序都必须无限等待（）以避免程序立即退出。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-12-16T19:32:15.667

如果您希望程序在 main 方法完成后退出，请考虑将您的线程设置为守护进程。但是请注意，当 main 完成时，守护线程将被中止。
你可以像这样创建一个守护进程thead：

```
Thread t = new Thread(...);
t.setDaemon(true); 
```

所有非守护线程都是用户线程。这些线程正在阻止 jvm 关闭。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-12-16T19:28:48.150

用户线程继续独立于其父线程（即创建者线程）的生命周期运行。因此，您必须在线程终止[`Thread.join`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)之前通过调用显式加入线程。`main`

来自的[Javadoc`Thread`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)：

> 当 Java 虚拟机启动时，通常有一个非守护线程（通常调用某个指定类的名为 main 的方法）。Java 虚拟机继续执行线程，直到发生以下任一情况：
> 
> 1.  已调用 Runtime 类的退出方法，并且安全管理器已允许进行退出操作。
>     
>     
> 2.  所有不是守护线程的线程都已经死亡，要么通过调用 run 方法返回，要么抛出传播到 run 方法之外的异常。

如果您希望 JVM 即使线程`t`正在运行也终止，您应该[使线程`t`成为守护线程](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)：

```
t.setDaemon(true); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-12-16T19:35:03.790

有两种类型的线程，用户和守护进程。当没有更多用户线程时，该进程终止。主线程始终是用户线程。您启动的线程也是用户线程，因此只要进程运行，它就会一直保持活动状态。

在你开始之前调用你的线程将使你的进程在你的函数返回时[`setDaemon(true)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)立即终止（或多或少） 。`main()`

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-12-16T19:37:04.430

[Java 语言规范第 12.8 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.8)指出：

> 12.8\. 程序退出
> 
> 当发生以下两种情况之一时，程序会终止其所有活动并退出：
> 
> 所有不是守护线程的线程都会终止。
> 
> 某些线程调用了Runtime类或System类的exit方法，安全管理器没有禁止exit操作。

这意味着主线程完成是不够的。

如果您确实希望它在主线程结束时退出，您需要使用[Thread#setDaemon](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setDaemon%28boolean%29)使新线程成为守护进程，或者按照最初的建议使用[Thread#join 。](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-22T07:08:19.707

主线程也是一个正在创建的用户线程，它的生命周期类似于任何其他用户线程。
除非您将线程设置为守护线程，否则其他用户线程不依赖于主线程。一旦主线程完成其工作，它就会结束（它既不会结束其他用户线程，也不会因为其他用户线程正在运行而结束进程）。

# html - 同一站点的两个页面上具有相同字符集的欧洲字符的不同呈现

> ID：13904746
> 
> 赞同：0
> 
> 时间：2012-12-16T19:27:54.090
> 
> 标签：html, character-encoding, internationalization, meta-tags

我有一个应该显示法语、西班牙语字符的网站。有一种奇怪的情况，两个页面处理它的方式完全不同。

两个页面共享相同的头文件，我在其中使用此**元标记**：

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

我还在**IIS > MIME Types**中设置了全局级别的字符集：

```
.asp   text/html; charset=iso-8859-1   local 
```

这些页面是[http://aer2.es/fr/](http://aer2.es/fr/)和[http://aer2.es/fr/method](http://aer2.es/fr/method)

这种不一致的原因可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:38:34.670

另一个文件的物理编码是 UTF-8，而不是 Windows-1252（ANSI、ISO-8859-1 ... + 您认为合适的其他错误标签）

您可以通过打开另一个文件来修复它，例如，在记事本中，点击另存为，然后 `"ANSI"`从编码下拉菜单中选择，然后使用新保存的文件。

* * *

另一种方法是将其他页面中的元标记更改为`UTF-8`：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
```

但是，在保存更改时，您需要确保以 UTF-8 编码保存文件。

# php - 格式错误的 HTTP 查询

> ID：13904748
> 
> 赞同：1
> 
> 时间：2012-12-16T19:27:56.910
> 
> 标签：php, http, query-string

不久前我有一个面试问题，我被要求编写我自己版本的 PHP`http_build_query`函数，它接受键和值的散列以编码为 Web 请求中的参数。（原来的函数也接受对象，但为了采访的目的，我只需要接受哈希。）

我写了一个递归函数，可以处理无限数量的嵌套散列，但被告知我错过了几个边缘情况。我确实发现了一种这样的边缘情况，就是编码特殊字符，但最后我没有得到所有的边缘情况，而且我的面试官从来没有告诉我我错过了什么。

我的问题是：编码 HTTP 参数时必须注意哪些边缘情况？（我很清楚许多语言/框架都可以为您做到这一点，但这不是我所要求的。）

# php - MySQL：当表中的行数失控时会发生什么？

> ID：13904757
> 
> 赞同：1
> 
> 时间：2012-12-16T19:29:27.410
> 
> 标签：php, mysql, limit, rows, archive

我需要在 Web 应用程序上实现消息传递系统。它由 PHP 和 MySQL 提供支持，允许注册用户互相发送消息。

所以我担心的是：在我让网站运行两年后，它会获得成千上万的用户和几十个朋友，他们每个人都会在这段时间里互相发送数百万条消息，之后会发生什么？

IT 行业的“大佬”是如何处理这些问题的，例如 Facebook？当然，他们的消息不能全部放入一个表（MySQL 或其他）......但即使在（一个）存档表中传输旧消息也不会永远有效。

我绝不会建立一个可以与 Facebook 相媲美的网站，但我仍然想要一个在一两年后不会出错的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:44:18.783

“大男孩”使用分片。在最基本的层面上，这会将以字母“A”开头的用户放在数据库服务器“A”上，“B”放在“B”上，等等。但要明确的是，“大男孩”有数十亿消息，而不是数百万。MySQL 应该可以处理数亿条记录。如果设计不当，您的查询可能会变慢。

我曾经创建了一个基于 MySQL 的消息传递系统，每月处理大约 5000 万条消息。我们只保持了过去 3 个月的“活跃”，任何较旧的东西都在一个访问速度较慢的存档区域中。

老实说，如果你能设计一个 2 年后不需要保姆的系统，那你就太棒了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:36:04.840

搜索 SQL BIGINT 的最大值。几年前，当我在 32 位机器上编写这个脚本时，它曾经溢出。现在问题少了很多！

[http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html](http://dev.mysql.com/doc/refman/5.0/en/numeric-type-overview.html)

[http://www.laprbass.com/RAY_integer_overflow.php](http://www.laprbass.com/RAY_integer_overflow.php)

```
<?php // RAY_integer_overflow.php
error_reporting(E_ALL);
echo "<pre>\n";

// CONNECTION AND SELECTION VARIABLES FOR THE DATABASE
$db_host = "localhost"; // PROBABLY THIS IS OK
$db_name = "??";        // GET THESE FROM YOUR HOSTING COMPANY
$db_user = "??";
$db_word = "??";

// OPEN A CONNECTION TO THE DATA BASE SERVER
// MAN PAGE: http://us2.php.net/manual/en/function.mysql-connect.php
if (!$dbcx = mysql_connect("$db_host", "$db_user", "$db_word"))
{
   $errmsg = mysql_errno() . ' ' . mysql_error();
   echo "<br/>NO DB CONNECTION: ";
   echo "<br/> $errmsg <br/>";
}

// SELECT THE MYSQL DATA BASE
// MAN PAGE: http://us2.php.net/manual/en/function.mysql-select-db.php
if (!$db_sel = mysql_select_db($db_name, $dbcx))
{
   $errmsg = mysql_errno() . ' ' . mysql_error();
   echo "<br/>NO DB SELECTION: ";
   echo "<br/> $errmsg <br/>";
   die('NO DATA BASE');
}

// CREATE A TABLE AND ALTER IT TO A HIGH INDEX NUMBER
$sql = "CREATE TEMPORARY TABLE noise ( id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY ) ENGINE=MEMORY";
if (!$res = mysql_query($sql)) die(mysql_error());

$sql = "ALTER TABLE noise AUTO_INCREMENT = 2147483646";
if (!$res = mysql_query($sql)) die(mysql_error());

// INSERT DATA TO ADD TO THE AUTO_INCREMENT INDEX
$kount = 0;
while ($kount < 15)
{
   $sql = "INSERT INTO noise () VALUES ()";
   if (!$res = mysql_query($sql)) die(mysql_error());
   $nid = mysql_insert_id($dbcx);
   var_dump($nid);
   $kount++;
} 
```

根据我的粗略计算，如果您以每秒 1,000 条的速度聚合消息，并且您使用 UNSIGNED BIGINT 作为 AUTO_INCREMENT 键，那么您将在大约 570,000,000 年内遇到溢出。因此，或多或少地，如果您以每秒 1,000,000,000 条的速度收集消息，那么您将在更短的时间内遇到问题——也许从现在起大约 570 年。但好消息是，如果你以每秒 100,000 条的速度收集消息，VC 社区就会向你砸钱！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-16T19:37:36.537

在第一步中对表进行分区（根据您的设计，根据日期、用户 ID、区域或任何其他基础）。我相信您可以长期使用此解决方案。下一步将分片您的消息系统。即使在此更改之后，您也可以像[facebook](http://highscalability.com/blog/2010/11/16/facebooks-new-real-time-messaging-system-hbase-to-store-135.html)一样选择 HBase 。

# c - opengl 渲染纹理并在是否使用 mipmap 之间切换

> ID：13904764
> 
> 赞同：2
> 
> 时间：2012-12-16T19:31:15.417
> 
> 标签：c, opengl, textures

我使用此代码在带有 mipmap 的图像之间切换：

```
if ( tex->hasMipMaps ) {
            glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR );
            glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR );
        }
        else {
            glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
            glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
        } 
```

但是会发生这种情况： ![在此处输入图像描述](../Images/e46150f0b5bcb293265353d3ad7af224.png)

该表是在没有 mipmap 的情况下呈现的，但是当我将寄存器纹理代码更改为：

```
 // if ( tex->hasMipMaps ) {
                glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR );
                glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR_MIPMAP_LINEAR );
            //}
            //else {
            //  glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
            //  glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
            //} 
```

结果如下： ![在此处输入图像描述](../Images/1c55c7b97c709fc8aaa24556033462f4.png) mipmap 有效，但我的字体纹理有点缺失，有没有办法渲染带有 mipmaps 的纹理（如模型）和一些没有 mipmaps 的纹理（如字体、粒子）？我需要调用 glTexParameteri 来切换某些状态吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:39:35.653

如您所见，没有完整的 mipmap 集的纹理对象（通常）将呈现白色。

如果您的某些纹理没有 mipmap，则必须在每个网格级别启用/禁用 mipmap（假设每个网格一个纹理）。

# asp.net-mvc - StructureMap/Autofac：如何根据 web.config 设置创建对象

> ID：13904765
> 
> 赞同：2
> 
> 时间：2012-12-16T19:31:18.987
> 
> 标签：asp.net-mvc, inversion-of-control, structuremap, autofac

我有一个`ConfigurationReader`类，我正在尝试使用 StructureMap 或 AutoFac 进行连接（我还没有确定我正在使用哪个容器）。

```
public class ConfigurationReader {
  private string _filePath;
  public ConfigurationReader(string filePath){
     this._filePath = filePath;
  }
   public IList<Baz> ListStuff(){
    //do something with _filePath;
   }

} 
```

根据应用程序的配置方式，此类的实例将有 1..n 个（web.config 将包含一个分隔的文件列表）。我正在寻找任何一个 IoC 容器中的扩展点，它允许我利用它们来创建`ConfigurationReader`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T22:42:31.897

好吧，在 AutoFac 中，您只需在 Container 中注册每一个（`Application_Start`例如在此期间）。

每当您需要读取所有配置时，您都可以添加一个依赖项`IEnumerable<ConfigurationReader>`（或者`IConfigurationReader`如果您决定提取一个接口），它将为您提供所有配置。

像这样的东西：

```
var builder = new ContainerBuilder();
foreach(var file in ConfigurationManager.AppSettings[yourKey].Split(',')) 
{
    var fileName = file;
    builder.Register(c => new ConfigurationReader(fileName));
}
DependencyResolver.SetResolver(new AutofacDependencyResolver(builder.Build())); 
```

如果您提取接口，那么您可能还想通过在末尾添加`.AsImplementedInterfaces()`or来注册。`.As<IConfigurationReader>()`

# php - php程序在本地工作，但不在服务器上

> ID：13904771
> 
> 赞同：-2
> 
> 时间：2012-12-16T19:32:08.817
> 
> 标签：php, local

我让这段代码在本地顺利运行。该程序仅查找文件并在其上写入数据。当我尝试在服务器上运行相同的程序时，它什么也不做......

这是完整的代码：

```
<?php

 $myFile = "Current_User.txt";
 //$produto = "sapato1";
 //$produto = $produto.";";
 $i = 0;
 $produto = $_POST["produtoID"];
 $produto = $produto.";";
 //$produto = $_POST["produtoID"];

    $fh = fopen($myFile, 'r');
    $line_of_text = fgets($fh);
    $str = $line_of_text;
    $str = str_replace("\n", "", $str);
    $str = $str."_Cesto.txt";
    fclose($fh);

        $fh2 = fopen($str, "r")or die("can't open file");
                while (($line_of_text = fgets($fh2))) {
                        $i++;
                        $line_of_text = str_replace("\n", "", $line_of_text);
                        $line_of_text = str_replace("\r", "", $line_of_text);
                        if($produto == $line_of_text){
                            break;
                            }
                }
            fclose($fh2);

            $dados = file($str);
            if($i == 1){
                unset($dados[$i - 1]);
            }
            else{
                unset($dados[$i - 2]);
            }
            file_put_contents($str,$dados);         

  ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T22:34:57.503

以下代码面临同样的问题，因此权限可能是原因，否则将方法更改为 GET 它将起作用。

```
 <?php 

    $url =  "http://sea-summit.com/T_webservice/get_appointments_by_id.php";

    $data = array('user_id'=> 1);

    $options = array(
      'http' => array(
        'method'  => 'POST',
        'content' => json_encode( $data ),
        'header'=>  "Content-Type: application/json\r\n" . "Accept: application/json\r\n" ));

    $context  = stream_context_create( $options );
    $result = file_get_contents( $url, false, $context );
    $response = json_decode( $result );

    var_dump($response);

    ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:34:36.427

您忘记上传 Current_User.txt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T20:12:48.800

您是否检查了 Current_User.txt 文件的写入权限？您在服务器上使用什么文件系统？

> 如果您有权访问：检查服务器上的 PHP error_log 以获得更多有价值的答案，或更改 error_reportings。

# python - 写入文本文件 Python

> ID：13904782
> 
> 赞同：0
> 
> 时间：2012-12-16T19:33:40.377
> 
> 标签：python, arrays, printing

> **可能重复：**
> [用 Python 编写格式良好的文本](https://stackoverflow.com/questions/10821083/writing-nicely-formatted-text-in-python)

我有这段代码用于将标题写入创建的 txt 文件：

```
if not os.path.exists('list.txt'):
    f= file('list.txt', 'w')
    f.write ("\t".join("".join (str(row)) for row in header_names.keys()))+"\n")
    f.write ("\n") 
```

这是我用来将新行附加到文本文件的代码：

```
f = open("list.txt","a")

f.write ("\t".join("".join (str(row)) for row in header_names.values()))+"\n")
f.write ("\n")
f.close() 
```

写入文本文件的输出不是我想要的：

```
Name    some number some number2    % percentage    average
Test    2   2   100.0   0.4
TestTestTest    3   4   75.0    0.49
tes 2   3   66.67   0.33 
```

我想要这样的东西：

```
Name           some number  some number2    % percentage    average
Test           2            2               100.0           0.4
Test           2            2               100.0           0.4
TestTestTest   3            4               75.0            0.49
tes            2            3               66.67           0.33 
```

有什么简单的方法可以实现这一点。它不是强制性的，它是这样写入txt的，但是阅读的输出应该......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:36:09.770

将每一列格式化为特定宽度，例如：

```
>>> header = ['one', 'two', 'three']
>>> print [format(el, '<30') for el in header]
['one                           ', 'two                           ', 'three                         ']
>>> print ''.join(format(el, '<30') for el in header)
one                           two                           three 
```

# c++ - R: 指向 c 函数的指针

> ID：13904786
> 
> 赞同：4
> 
> 时间：2012-12-16T19:34:39.827
> 
> 标签：c++, r, pointers, rcpp

如何将指向函数的指针从 C 代码传递给 R（使用外部 R）并在从 R 调用该函数之后？

就像是：

C：

```
typedef void (* FunctionPtr)();
SEXP ans;
PROTECT(ans = /* ?some code? */);
R_tryEval(ans, R_GlobalEnv, NULL);
UNPROTECT(1); 
```

回复：

```
callback_function() 
```

**编辑：** @Romain Francois 的帖子很有帮助。
**我的应用程序代码：**

```
namespace
{
    void callback()
    {
        std::cout << "callback\n" << std::flush;
    }
}
class Worker
{
public:
/*...*/
    void initialize(argc, argv)
    {
       Rf_initEmbeddedR(argc, argv);

        SEXP ans, val;
        typedef void (* FunctionPtr)();

        PROTECT(ans = Rf_lang2(Rf_install("source"), Rf_mkString("script.R")));
        R_tryEval(ans, R_GlobalEnv, NULL);
        UNPROTECT(1);

        PROTECT(val = Rf_ScalarInteger((int)(&callback)));
        /* pass the address of the pointer to a function */
        PROTECT(ans = Rf_lang2(Rf_install("setCallback"), val));
        R_tryEval(ans, R_GlobalEnv, NULL);
        UNPROTECT(2);
    }
    void uninitialize()
    {
        Rf_endEmbeddedR(0);
    }
}; 
```

**R 和 Rcpp**
**脚本.R**

```
###################
sourceCpp("utils.cpp")
###################
callback <- function()
{
  callCallback()
} 
```

**实用程序.cpp**

```
#include <Rcpp.h>

using namespace Rcpp;

typedef void (* Callback)();
static Callback spCallback = 0;

// [[Rcpp::export]]
void callCallback()
{
  if (spCallback) {
    spCallback();
  } else {
    Rprintf("ERROR: callback is not set");
  }
}
// [[Rcpp::export]]
void setCallback(const int address)
{
  spPlaceOrder = (Callback)address;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T07:51:10.413

外部指针是您正在寻找的。它们让您封装指向任意数据结构的指针。**数据**一词在这里很重要，而函数指针则是另一种野兽。如果你想使用`C++`and `Rcpp`，我建议创建一个封装函数指针的小类：

```
typedef void (* FunctionPtr)();
class FunctionPointer {
  FunctionPtr ptr;
public:
    FunctionPointer( FunctionPtr ptr_) : ptr(ptr_){}
} ; 
```

然后创建一个`XPtr<FunctionPointer>`：

```
#include <Rcpp.h>
using namespace Rcpp ;

// your callback function
void callback(){
    Rprintf( "hello from callback\n" ) ;
}

// The function that creates an external pointer to your 
// callback
// [[Rcpp::export]]
XPtr<FunctionPointer> create_ptr(){
    return XPtr<FunctionPointer>( new FunctionPointer(callback) );
}

// The function that invokes the callback
// [[Rcpp::export]]
void invokeCallback( XPtr<FunctionPointer> callback){
    callback->ptr() ;
} 
```

在 R 端，您可以使用词法范围，例如将外部指针包装到 R 函数中：

```
callback <- local( {
    ptr <- create_ptr()
    function(){
        invokeCallback( ptr )
        invisible(NULL)
    } 
} )
callback() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T08:45:21.130

另一种方法是使用`InternalFunction`类`Rcpp`：

```
#include <Rcpp.h>
using namespace Rcpp ;

void callback(){
    Rprintf( "hello from calback\n" ) ;    
}

// [[Rcpp::export]]
InternalFunction get_callback(){
    return InternalFunction(callback) ;    
} 
```

该实现类似于我在另一个答案中描述的。R端的事情由以下人员处理`Rcpp`：

```
callback <- get_callback()
callback() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T19:52:08.983

首先加载库：

```
dyn.load("yourDLL.dll") 
```

然后使用：

> 调用已加载到 R 中的已编译代码的函数。

参见[R FFI](http://stuff.mit.edu/afs/sipb/project/r-project/lib/R/library/base/html/Foreign.html)

编辑：

首先编译你的 C 代码。在 Windows 上如下，但在其他操作系统上类似：

```
gcc mylib.c -shared -o mylib.dll 
```

然后在 R 中：

```
dyn.load("mylib.dll")     
tmp1  <- as.raw(rep(0,4))   # 4 bytes to be sent to the function's argument
tmp2<-.C("yourFunctionName", tmp1)   # tmp2 now has the data returned by the func 
```

请注意，在 c++（不是 c）中，函数名称必须是[修改后的名称](https://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)

# r - 如何在ggplot2中通过任意因子加权平滑？

> ID：13904788
> 
> 赞同：11
> 
> 时间：2012-12-16T19:34:42.057
> 
> 标签：r, ggplot2

下面是一个相关的例子。我正在将投篮效率视为 NBA 球员距离的函数。我想通过在每个距离拍摄的镜头量（即气泡的大小）来加权平滑。有没有办法做到这一点？生成此图的命令是：

```
ggplot(top10,aes(x=FT,y=PPS,size=FGA,color=PPS))
+scale_x_continuous(limits = c(0, 30))
+scale_y_continuous(limits = c(0, 2.2))+geom_point()
+facet_grid(NAME~.,space="free")
+stat_smooth(color="darkblue",size=2) 
```

![在此处输入图像描述](../Images/2df3fcc507bd9ab0f794114edc9aeee4.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-16T20:05:38.080

如上所述，如果您将第一行更改为

```
ggplot(top10,aes(x=FT,y=PPS,size=FGA,color=PPS,weight=FGA)) 
```

有用。

这是一个更正的版本：

![在此处输入图像描述](../Images/7d302a24e1dec7bb3dafafde4820b861.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-21T21:17:13.830

当您想要多条平滑线时，您可以分别在每个图表中进行加权：

```
ggplot(top10,aes(x=FT,y=PPS,size=FGA,color=PPS))
+scale_x_continuous(limits = c(0, 30))
+scale_y_continuous(limits = c(0, 2.2))+geom_point()
+facet_grid(NAME~.,space="free")
+stat_smooth(color="darkblue",size=2, aes(weight= FGA)) 
```

# asp.net - MVC4 项目 - 参数值中不能有点？

> ID：13904790
> 
> 赞同：5
> 
> 时间：2012-12-16T19:34:52.323
> 
> 标签：asp.net, asp.net-mvc-4

我有一个 MVC4 项目，我正试图让它在像 /QRCode/address/amount 这样的 URL 上工作。这是它的声明方式：

路线：

```
routes.MapRoute(
    name: "QRCode",
    url: "QRCode/{address}/{amount}",
    defaults: new { controller = "QRCode", action = "Index" }
); 
```

控制器：

```
public class QRCodeController : Controller
{
    public ActionResult Index(string address, double amount)
    {
         ... 
```

问题是：

当 URL 为:`QRCode/address1/33`时，一切正常，但如果第二个参数中有一个点，例如: `QRCode/address1/33.33`，我会收到“HTTP Error 404.0 - Not Found”。

将第二个参数重新声明为字符串会产生相同的结果。

使用 %2E 代替点会产生相同的结果

有人知道这里发生了什么吗？我知道它在 MVC3 中运行良好

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T19:58:02.807

如果这是在 IIS 7 上，则将其添加到您的配置文件中，它应该可以正常工作：

```
<system.web>
     <httpRuntime relaxedUrlToFileSystemMapping="true" />
</system.web> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-16T19:43:16.320

是的......请参阅评论，处理程序映射是一个问题。

我将 URL 从 QRCode/address1/33.33 更改为 QRCode/address1/33.33/ 并且映射工作正常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T17:59:29.843

这是另一种选择：不要映射金额，而是将其作为带有名称的 URL 参数传递：

```
routes.MapRoute(
    name: "QRCode",
    url: "QRCode/{address}",
    defaults: new { controller = "QRCode", action = "Index" }
); 
```

现在用这样的 url 调用 api：

```
http://<server>/QRCode/address1?amount=33.33 
```

# java - Libgdx 导出的 Jar - 找不到主类 - LD25

> ID：13904791
> 
> 赞同：0
> 
> 时间：2012-12-16T19:34:54.153
> 
> 标签：java, export, libgdx

我正在做 Ludum Dare 25，使用 Java Libgdx 试图导出我的 jar。

它之前工作得非常好，我导出并且可以正常运行。现在，当我以完全相同的方式导出它时，它一打开它就会崩溃。通过 CMD 运行我得到错误

'找不到或加载主类'

我已经在 winrar 中打开它并检查了 Main 类是否存在并且清单指向正确的位置。我不明白出了什么问题。

感谢所有帮助，非常感谢！

**解决方案发现** 奇怪的问题，尽管错误消息与类无关，但 jar 导出器将我的图像文件之一设为小写或其他东西，因此它弄乱了它的引用

# php - 代码点火器形式

> ID：13904792
> 
> 赞同：0
> 
> 时间：2012-12-16T19:34:54.450
> 
> 标签：php, forms, codeigniter

经过 3 天的搜索，我很累。有人可以告诉我或给我展示一个如何上传带图像的文本的示例吗？

```
my table:

name -> varchar
lastname -> varchar
position -> varchar
pass_id -> int
image_url -> varchar 
```

这是一个 form_view 文件

```
<h2>Create</h2>

<?php echo form_open('main/add'); ?>
<p>
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" />
</p>

<p>
    <label for="lastname">Lastname:</label>
    <input type="text" name="lastname" id="lastname" />
</p>

<p>
    <label for="position">Position:</label>
    <input type="text" name="position" id="position" />
</p>

    <p>
    <label for="name">Passport ID:</label>
    <input type="text" name="pass_id" id="pass_id" />
</p>

    <input type="file" name="userfile" size="20" />

    <input type="submit" value="Submit" />

<?php echo form_close(); ?> 
```

这是一个控制器文件：

```
public function add()
{

    $subject  = array(
        'name' => $this->input->post('name'), 
        'lastname' => $this->input->post('lastname'),
        'position' => $this->input->post('position'),
        'pass_id' => $this->input->post('pass_id')

        );

    $this->main_model->add($subject);
    $this->index();
} 
```

和模型文件：

```
public function add($object)
{
    $this->db->insert('stuf', $object);
    return;

} 
```

如何在数据库中上传图片网址。

我是 CI 的新手。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:13:28.987

使用`form_open_multipart("main/add")`而不是`form_open("main/add")`.

并稍微修改您的控制器：

```
$this->load->library('upload'); // See File Uploading in Code Igniter Documentation

$this->load->helper(array('form', 'url')); // See form, and url helper

$my_path = "your_uploads_folder"

$config['upload_path']   = './'. $my_path .'/';
$config['allowed_types'] = 'gif|jpg|png';
$config['max_size']   = '100';
$config['max_width']     = '1024';
$config['max_height']    = '768';

$this->upload->do_upload('userfile', $config);

$subject  = array(

    'url'      => $url . '/' . $my_path // Dont forget to create the table field

    'name'     => $this->input->post('name'), 
    'lastname' => $this->input->post('lastname'),
    'position' => $this->input->post('position'),
    'pass_id'  => $this->input->post('pass_id'),
);

$this->main_model->add($subject);

redirect('/main/index/', 'refresh'); // Use redirect instead 
```

**注意**：*尚未测试*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:41:15.970

```
$this->upload->data() 
```

这是一个帮助函数，它返回一个数组，其中包含与您上传的文件相关的所有数据。这是数组原型：

```
 Array
    (
        [file_name]    => mypic.jpg
        [file_type]    => image/jpeg
        [file_path]    => /path/to/your/upload/
        [full_path]    => /path/to/your/upload/jpg.jpg
        [raw_name]     => mypic
        [orig_name]    => mypic.jpg
        [client_name]  => mypic.jpg
        [file_ext]     => .jpg
        [file_size]    => 22.2
        [is_image]     => 1
        [image_width]  => 800
        [image_height] => 600
        [image_type]   => jpeg   
        [image_size_str] => width="800" height="200"
) 
```

[来源](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T07:20:20.157

好的，这是一个解决方案:)

```
public function new_record()
{

        $config['upload_path'] = './uploads/';
        $config['allowed_types'] = 'gif|jpg|png';
        $config['max_size'] = '100';
        $config['max_width']  = '1024';
        $config['max_height']  = '768';

        $this->upload->initialize($config);

        if (!$this->upload->do_upload('userfile'))
        {
                echo $this->upload->display_errors();
            }
            else
        {
                $data =  $this->upload->data();
                $full_path = 'uploads/' . $data['file_name'];

            $subject  = array(
                'name'     => $this->input->post('name'), 
                'lastname' => $this->input->post('lastname'),
                'position' => $this->input->post('position'),
                'pass_id'  => $this->input->post('pass_id'),
                'image_url'  => $full_path 
            );

            $this->main_model->add($subject);
            redirect('/main/index/', 'refresh');
        } 
```

# assert - Verilog 中的断言语句

> ID：13904794
> 
> 赞同：14
> 
> 时间：2012-12-16T19:34:58.730
> 
> 标签：assert, verilog

我对 Verilog 完全陌生，所以请耐心等待。

我想知道 Verilog 中是否有断言语句。在我的测试平台中，我希望能够断言模块的输出等于某些值。

例如，

```
mymodule m(in, out);
assert(out == 1'b1); 
```

谷歌搜索给了我[一些链接](http://www.asic-world.com/verilog/assertions4.html)，但它们要么太复杂，要么似乎不是我想要的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-23T04:21:50.690

有一个用于断言的开源库，称为[OVL](http://www.accellera.org/downloads/standards/ovl/)。然而，它相当沉重。我从那里得到的一个技巧是创建一个模块来进行断言。

```
module assert(input clk, input test);
    always @(posedge clk)
    begin
        if (test !== 1)
        begin
            $display("ASSERTION FAILED in %m");
            $finish;
        end
    end
endmodule 
```

现在，任何时候你想检查一个信号，你所要做的就是在你的模块中实例化一个断言，就像这样：

```
module my_cool_module(input clk, ...);

     ...

     assert a0(.clk(clk), .test(some_signal && some_other_signal));

     ...

endmodule 
```

当断言失败时，您将收到如下消息：

```
ASSERTION FAILED in my_cool_module.a0 
```

display 语句中的 %m 将向有问题的断言显示整个层次结构，当您在较大的项目中有很多这样的断言时，这很方便。

你可能想知道我为什么要检查时钟的边缘。这很微妙，但很重要。如果上面表达式中的 some_signal 和 some_other_signal 被分配到不同的 always 块中，则表达式可能会在短时间内为假，具体取决于 Verilog 模拟器安排块的顺序（即使逻辑完全有效）。这会给你一个假阴性。

上面要注意的另一件事是我使用 !==，如果测试值为 X 或 Z，这将导致断言失败。如果它使用正常的 !=，在某些情况下它可能会默默地给出误报。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-08T19:42:13.367

将以上内容与宏一起为我工作：

```
`define assert(signal, value) \
        if (signal !== value) begin \
            $display("ASSERTION FAILED in %m: signal != value"); \
            $finish; \
        end 
```

然后在我的测试模块中：

```
initial begin // assertions
    #32 `assert(q, 16'hF0CB)
end 
```

作为示例测试失败案例：

```
ASSERTION FAILED in test_shift_register: q != 16'hF0CB 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-16T22:51:00.187

如果您的模拟器支持 SystemVerilog 语法，则有一个`assert`关键字可以满足您的需求。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-12-16T19:43:10.437

你可以这样写

```
if(!(out==1'b1)) $finish; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-16T22:30:37.377

Verilog 不支持断言。一些工具支持 PSL，它将断言放在注释中，但这是非标准的。您应该考虑使用来自测试台的分层引用，否则您必须将每个断言放在一个会变得混乱的过程中。

模仿 C 类断言的最简单方法可能是 `define，因为这将使它们成为全局的。

```
`define assert(condition) if(condition) begin $finish(1); end 
```

为了检查非程序上下文中的信号，例如您的示例，您将需要一个不同的宏来构建条件信号，然后触发该信号的测试事件。

```
`define assert_always(condition) generate if(1) begin wire test = condition; always @(test) `assert(condition) end endgenerate 
```

上面的生成将为变量 test 创建一个新范围，因此多个实例应该可以工作。

程序中更好的方法可能是在单独的文件中创建任务，然后将其包含在任何模块声明中。

```
task assert(input condition);
if(!condition)
  $finish(2);
endtask 
```

对于非过程上下文，您需要创建一个包含流程和该模块实例的模块。这将需要每个实例的唯一名称，除非您将它放在生成块中。

# ruby-on-rails - Rake 命令中止 / Ruby Rails

> ID：13904798
> 
> 赞同：2
> 
> 时间：2012-12-16T19:35:28.903
> 
> 标签：ruby-on-rails, ruby, linux, ubuntu

我*很*确定我应该在这里发布这个，但是如果它属于像超级用户这样的东西，请随时纠正我。

尝试在我新格式化的 Linode 上设置这个 Ruby/Javascript 应用程序[https://github.com/jamesu/tubehub 。](https://github.com/jamesu/tubehub)

运行：Ubuntu v10.04 LTS、Ruby v1.8.8dev、Rails v3.2.9、SQLite v3.6.22。

经过多次故障排除后，我似乎接近成功安装和启动该应用程序，但我无法弄清楚的最后一点是运行 rake 命令时出现的“中止”错误，如 README 文档中所示。

```
root@li570-120:~/tubehub# rake db:seed
rake aborted!
/root/tubehub/util.rb:8: undefined (?...) sequence: /^(.*?)((?<!&)#|\#)(.*)$/
/root/tubehub/util.rb:9: undefined (?...) sequence: /(?:\#)(?<!&#)(?:\#)*(.*)$/
/root/tubehub/core.rb:37
/root/tubehub/core.rb:36:in `each'
/root/tubehub/core.rb:36
/root/tubehub/Rakefile:2
Tasks: TOP => db:seed => environment
(See full trace by running task with --trace)

root@li570-120:~# rake db:load                                                                                                                                                                                                               
rake aborted!                                                                                                                                                                                                                                
No Rakefile found (looking for: rakefile, Rakefile, rakefile.rb, Rakefile.rb)                                                                                                                                                                                                                                                                                                                                                                                                      
(See full trace by running task with --trace) 
```

这是我第一次专门涉足 Ruby，通过一些“rake”文档过滤，但不确定我在看什么。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T09:44:57.223

我会添加一个答案。请`rake db:schema:load`改用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T23:43:45.193

根据 Anatoliy Kukul 的建议 - “rake db:schema:load” 让一切正常工作，并将所有需要的表加载到本地数据库中。

工作愉快-感谢您的澄清！

# c++ - 从文件中读取无符号字符的几种不同方法

> ID：13904803
> 
> 赞同：0
> 
> 时间：2012-12-16T19:36:20.377
> 
> 标签：c++

我想从文件中读取 unsigned char 并搜索许多不同的执行方式。但我不知道他们工作或不工作的原因。

1. `ifstream input(ios::in | ios::binary) //seems to not work, but why?`

我已经设置了`ios::binary`应该防止转换的。

2. `unsigned char buffer[BUFFER_SIZE];`

`myfile.read((unsigned char *) buffer, BUFFER_SIZE);//error!fail`

`myfile.read((char *) buffer, BUFFER_SIZE);//work, the data type is unsigned char`

为什么我必须将其转换为`char*`？存储在数组中的数据不会转换为 char 不是`unsigned char`吗？它在转换过程中做什么？

3. `vector`//它工作，但我不知道它做了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:48:33.257

read 函数声明了一个 'char *' 的原型。这正是一些作者在时间的迷雾中所做的。这并不意味着会发生任何“转变”。在任何情况下，都没有从 char * 到 unsigned char * 的“转换”；两者都是指向字节的指针，并且 I/O 类的任何转换语义都将受其他因素控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:55:37.423

对于第一部分，构造函数还需要一个文件名。例如，

`ifstream input("myfile.dat", ios::in | ios::binary);`

我相信您可以省略`ios::in`，因为它是`ifstream`.

对于第二部分，`istream::read`需要一个`char*`指针（或某种等效类型）。读取数据后，您可以将元素转换为`unsigned char*`.

# c# - Visual Studio 2012：类中所有方法的列表

> ID：13904806
> 
> 赞同：6
> 
> 时间：2012-12-16T19:36:39.313
> 
> 标签：c#, visual-studio-2010, resharper

在 VS 2010 中，有没有办法在当前查看的类的停靠窗口中查看所有方法。单击该方法可以让我导航到它。

这个问题是针对设计模式的，同时在 IDE 中编辑一个类。

我拥有 Resharper，但没有办法将漂亮列表中的所有方法视为一项功能。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-16T19:49:55.413

如果您按照您的指示使用 Resharper，您可以使用“文件结构”窗口。它看起来像这样：

![在此处输入图像描述](../Images/f4ac332cf81f65c4bf1e5794005e945e.png)

要打开它，请单击 Resharper、Windows、“文件结构”。该窗口是可停靠的，并且会随着您当前文件的更改而更新。

![在此处输入图像描述](../Images/340546a0682e39a883ec163e420443c0.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-16T19:41:45.710

`View -> Class View`或`Ctrl`+ `Shift`+`C` 您在顶部面板上看到不同的类，在底部面板上看到方法。

此外，您的选项卡顶部有方法列表： ![在此处输入图像描述](../Images/4376c93e049dd549a0c51913e129bca5.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T08:07:30.853

你有 VS 2012。这个版本在解决方案资源管理器中有 enancements。
如果展开类文件节点，您将看到所有类。
如果您展开一个类节点，您将看到它的所有成员。

有关解释，请参阅[http://blog.wpfwonderland.com/2012/08/04/visual-studio-2012-tidbits-01-class-members-in-solution-explorer 。](http://blog.wpfwonderland.com/2012/08/04/visual-studio-2012-tidbits-01-class-members-in-solution-explorer)

# wpf - WPF 绑定多对一关系返回空结果

> ID：13904809
> 
> 赞同：0
> 
> 时间：2012-12-16T19:37:06.740
> 
> 标签：wpf, binding

我有一个包含 TourGuides 列表的 Booking，我正在尝试同时创建一个 Booking 和 TourGuides 列表，Booking 绑定正在工作，但 TourGuideOnTour 总是返回为空。

这是我的模型：

```
public class Booking : INotifyPropertyChanged {

    public IList<TourGuide> TourGuidesOnTour {
        get {
            if (_tourGuidesOnTour == null)
                return new List<TourGuide>();
            return _tourGuidesOnTour;
        }
        set {
            _tourGuidesOnTour = value;
            OnPropertyChanged("TourGuidesOnTour");
        }
    }
}

public class TourGuide : INotifyPropertyChanged {

    string _tourGuideFirstName;

    public string TourGuideFirstName {
        get { return _tourGuideFirstName; }
        set {
            _tourGuideFirstName = value;
            OnPropertyChanged("TourGuideFirstName");
        }
    }
} 
```

这是我的绑定：

```
 <Grid Name="myGrid" DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <StackPanel Margin="10">
        <StackPanel.Resources>
            <Style TargetType="{x:Type StackPanel}">
                <Setter Property="Margin" Value="0,10,0,0"/>
            </Style>
        </StackPanel.Resources>
        <GroupBox Header="Tour Information">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Tour" Width="130"/>
                    <TextBox Grid.Row="1" Grid.Column="1" Width="185">
                        <TextBox.Text>
                            <Binding Path="TourName"  UpdateSourceTrigger="PropertyChanged">
                                <Binding.ValidationRules>
                                    <ExceptionValidationRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox.Text>
                    </TextBox>
                </StackPanel>
        </GroupBox>
        <GroupBox Header="Tour Guide Information">
            <DataGrid ItemsSource="{Binding Path=TourGuidesOnTour, Mode=TwoWay}">

            </DataGrid>
        </GroupBox>
        <Button Name="Save" Content="Save" Click="Save_Click" Width="170" Height="40" />
    </StackPanel>
</Grid> 
```

我设置了我的数据上下文：

```
 public Booking ReturnValue;// = null;
    public CreateBooking() {
        InitializeComponent();
        ReturnValue = new Booking();
        myGrid.DataContext = ReturnValue;
    } 
```

并且`ReturnValue.TourGuidesOnTour`等于`null`:(

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T00:09:17.347

我在您发布的代码中看不到您正在初始化 TourGuidesOnTour 的任何地方，即；

```
ReturnValue.TourGuidesOnTour = new List<TourGuide>(); 
```

如果您不这样做，您的 getter 将始终返回一个新的 TourGuide 列表，但从不初始化内部变量。

因此，您可以初始化 TourGuidesOnTour，或者如果您将 getter 修改为以下内容；

```
get
{
  if (_tourGuidesOnTour == null)
     _tourGuidesOnTour= new List<TourGuide>();

   return _tourGuidesOnTour;
} 
```

# c++ - 如果内部函数

> ID：13904810
> 
> 赞同：0
> 
> 时间：2012-12-16T19:37:16.640
> 
> 标签：c++, function, if-statement

```
string scriviNumeroMinoreMille(int a)
{
    vector<string> v_zero_to_nineteen(20);
    vector<string> v_twenty_to_ninety(8);

    v_zero_to_nineteen = {"zero", "uno", "due", "tre", "quattro", "cinque", "sei", "sette", "otto", "nove", "dieci", "undici",
                          "dodici", "tredici", "quattordici", "quindici", "sedici", "diciassette", "diciotto", "diciannove"};

    v_twenty_to_ninety = {"venti", "trenta", "quaranta", "cinquanta", "sessanta", "settanta", "ottanta", "novanta"};

    string risultato;

    if(a == 0)
    {
        return risultato = "";
    }
    else if(a < 20 && a > 0)
    {
        return risultato = v_zero_to_nineteen[a];
    }
    else if(a == 20 || a == 30 || a == 40 || a == 50 || a == 60 || a == 70 || a == 80 || a == 90)
    {
        return risultato = v_twenty_to_ninety[(a/10)-2];
    }
    else if(a == 100)
    {
        return risultato = "cento";
    }

    int unita = 0;
    int decine = 0;
    int centinaia = 0;

    if(a > 99)
    {
        centinaia = a/100;
        risultato += (v_zero_to_nineteen[centinaia]);
        risultato += "cento";
    }
    if(a > 19)
    {
        if(a-(centinaia*100)%10 == 0)
        {
            decine = (a-(centinaia*100))/10;
            risultato += (v_twenty_to_ninety[decine-2]);
        }
        else
        {
            decine = (a-(centinaia*100)/10);
            risultato += v_twenty_to_ninety[decine-2];
            unita = (a-(centinaia*100)-(decine*10));
            risultato += v_zero_to_nineteen[unita];
        }
    }
    return risultato;
} 
```

我制作了这个函数来检查从 0 到 999 的数字以转换字符串中的数字。例如，如果输入为 100，则结果将是“一百”（它被翻译成意大利语）

我不明白为什么要调试这两个 if 子句中的参数：

```
if(a > 99)
{
    centinaia = a/100;
    risultato += (v_zero_to_nineteen[centinaia]);
    risultato += "cento";
}
if(a > 19)
{
    if(a-(centinaia*100)%10 == 0)
    {
        decine = (a-(centinaia*100))/10;
        risultato += (v_twenty_to_ninety[decine-2]);
    }
    else
    {
        decine = (a-(centinaia*100)/10);
        risultato += v_twenty_to_ninety[decine-2];
        unita = (a-(centinaia*100)-(decine*10));
        risultato += v_zero_to_nineteen[unita];
    }
} 
```

函数中不考虑。这两个 if 只是被跳过。我不明白为什么。如果我将 123 作为输入，则跳过这些 if。但是条件是 if(a > 99), 120 大于 99。我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:21:33.390

您的代码中有几个错误：

首先，字符串类型的 += 运算符采用“const string&”，所以不要这样做：

```
risultato += (v_twenty_to_ninety[decine-2]) 
```

你需要像这样传递它：

```
risultato += v_twenty_to_ninety[decine-2].c_str(); 
```

也在这里

```
decine = (a-(centinaia*100)/10); 
```

您正在使用“centinaia”，此时它为零，因为您只在`if(a > 99)`if 块内进行了计算，而且 /10 应该在这样的括号之外：

```
decine = (a-(centinaia*100))/10 
```

所以你需要把它移到`centinaia = a/100;`if 之外，所以所有 3 个 if 语句都会得到计算的变量（与其他两个相同）。

这个：

```
int unita = 0;
int decine = 0;
int centinaia = a/100; 
```

对此：

```
int centinaia = a/100;
int decine    = (a-(centinaia*100))/10;
int unita     = (a-(centinaia*100)-(decine*10)); 
```

我对您的方法进行了更改，现在看起来像这样：

```
string scriviNumeroMinoreMille(int a)
{
    vector<string> v_zero_to_nineteen(20);
    vector<string> v_twenty_to_ninety(8);

    v_zero_to_nineteen = {"zero", "uno", "due", "tre", "quattro", "cinque", "sei", "sette", "otto", "nove", "dieci", "undici",
                          "dodici", "tredici", "quattordici", "quindici", "sedici", "diciassette", "diciotto", "diciannove"};

    v_twenty_to_ninety = {"venti", "trenta", "quaranta", "cinquanta", "sessanta", "settanta", "ottanta", "novanta"};

    string risultato;

    if(a == 0)
    {
        return risultato = "";
    }
    else if(a < 20 && a > 0)
    {
        return risultato = v_zero_to_nineteen[a];
    }
    else if(a == 20 || a == 30 || a == 40 || a == 50 || a == 60 || a == 70 || a == 80 || a == 90)
    {
        return risultato = v_twenty_to_ninety[(a/10)-2];
    }
    else if(a == 100)
    {
        return risultato = "cento";
    }

    int centinaia = a/100;
    int decine    = (a-(centinaia*100))/10;
    int unita     = (a-(centinaia*100)-(decine*10));

    if(a > 99)
    {

       risultato += v_zero_to_nineteen[centinaia].c_str();
       risultato += "cento";

    }
    if(a > 19)
    {
        if(a-(centinaia*100)%10 == 0)
        {
            risultato += v_twenty_to_ninety[decine-2].c_str();
        }
        else
        {
            risultato += v_twenty_to_ninety[decine-2].c_str();

            risultato += v_zero_to_nineteen[unita].c_str();
        }
    }
    return risultato;
} 
```

对于 123 输入，它输出“unocentoventitre”，我不知道这是否正确，因为我不会说意大利语 xD

希望能帮助到你。

编辑：忘记删除/更改我插入的测试行。

# c# - 如何遍历listBox并删除某个字符之前的单词？

> ID：13904814
> 
> 赞同：-2
> 
> 时间：2012-12-16T19:37:35.387
> 
> 标签：c#, for-loop, listbox

我将如何使用 for 循环遍历 listBox 并删除某个字符之前的单词？

例如，如果我的 listBox 包含类似于以下内容的项目：

```
','ae5e87df42fa5921 
```

而且我想在`','`如何处理列表框中的每个项目之前删除所有内容？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T19:40:02.737

在 for 循环中，您可以`item = item.Substring(item.LastIndexOf("','"))` 像这样简单地调用：

```
ListBox lb = new ListBox();
lb.Items.Add("12341','2341");
lb.Items.Add("123415','112341");
lb.Items.Add("543225','11234134");
for (int i = 0; i < lb.Items.Count; i++) {
    string item = lb.Items[i] as string;
    item = item.Substring(item.LastIndexOf("','"));
    lb.Items[i] = item;
} 
```

**编辑：** 在这里你有完整的例子，它有效。只需添加 ListBox 和按钮，并将事件分配给它的`Click`处理程序：

```
public partial class Form1 : Form {
    public Form1() {
        InitializeComponent();
        lb.Items.Add("12341','2341");
        lb.Items.Add("123415','112341");
        lb.Items.Add("543225','11234134");
    }

    private void button1_Click(object sender, EventArgs e) {
        for (int i = 0; i < lb.Items.Count; i++) {
            string item = lb.Items[i] as string;
            item = item.Substring(item.LastIndexOf("','"));
            lb.Items[i] = item;
        }
    }
} 
```

它**正在**工作。

# java - 将数字从文本文件分配到哈希表

> ID：13904816
> 
> 赞同：0
> 
> 时间：2012-12-16T19:38:03.823
> 
> 标签：java, hashtable

我正在尝试将文本文件中的数字分配给哈希表第一个数字作为键，第二个数字作为值，文本文件看起来像第一行（123 321）第二行（456 565）第n行（789 875）所以我尝试将空格后的数字分配为值。

我不知道该怎么做

```
Scanner scanner = new Scanner(new File("C:/Users/msi/Documents/number.txt"));
scanner.useDelimiter(" ");

Hashtable<String, String> numbers = new Hashtable<String, String>();

while(scanner.hasNext()) 
{
    numbers.put(scanner.next(),scanner.next());
    System.out.println(numbers);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:35:25.933

据我了解，Scanner 类用于逐行解析文件。通过将分隔符设置为空格字符“”，您会得到下一个换行符不再是分隔符的错误。因此，您将获得以下值

*   123
*   321\n456
*   565\n...
*   ...\n789
*   875

解决此问题的一种方法是在逐行读取值后拆分它们：

```
Scanner scanner = new Scanner(new File("C:/Users/msi/Documents/number.txt"));

Hashtable<String, String> numbers = new Hashtable<String, String>();

while(scanner.hasNext()) 
{
    String[] values = scanner.next().split(" ");
    numbers.put(values[0], values[1]);
    System.out.println(numbers);
} 
```

# java - 反转双向链表

> ID：13904818
> 
> 赞同：1
> 
> 时间：2012-12-16T19:38:19.463
> 
> 标签：java

嘿，我目前卡在我的 DoublyLinkedList 的反向方法上。除了反向方法之外，一切都运行良好（不知何故）。我没有收到任何错误 -`System.out.println(list.reverse())`根本没有输出。

有什么建议么？非常感谢您提前。:)

好的：我现在已经编辑了我的代码。到目前为止一切正常。但是，递归方法只是以相同的顺序打印列表，而不是实际反转它。

更新代码：

```
public class DoublyLinkedStringList {

private String content;
private DoublyLinkedStringList prev;
private DoublyLinkedStringList next;

public DoublyLinkedStringList(String info) {
    content = info;
    prev = null;
    next = null;
}

private DoublyLinkedStringList(String content, DoublyLinkedStringList prev, DoublyLinkedStringList next) {
    this.content = content;
    this.prev = prev;
    this.next = next;
}

public DoublyLinkedStringList prepend(String info) {
    DoublyLinkedStringList newNode = new DoublyLinkedStringList(info);
    prev = newNode;
    newNode.next = this;

    return newNode;
}

public DoublyLinkedStringList delete(int index) {
    DoublyLinkedStringList curr = this;

    if (index == 0) {
        next.prev = null;
        return next;
    }

    for (int i = 0; i < index; i++) {
        curr = curr.next;
    }

    curr.prev.next = curr.next;
    if (curr.prev.next != null) {              
        curr.prev.next.prev = curr.prev;
    }
    return this;
}

public DoublyLinkedStringList reverse() {
    DoublyLinkedStringList currNode = this;

    while (currNode != null) {
        DoublyLinkedStringList temp = currNode.next;
        currNode.next = currNode.prev;
        currNode.prev = temp;

        if (currNode.prev != null) {
            currNode = currNode.prev;
        }
    }

    return this;
}

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();

    for (DoublyLinkedStringList currNode = this; currNode != null; currNode = currNode.next) {
        sb.append(currNode.content);
        if (currNode.next != null) {
            sb.append(", ");
        }
    }
    return sb.toString();
}

public static void main(String argv[]) {
    DoublyLinkedStringList list = new DoublyLinkedStringList("Testliste");
    list = list.prepend("6");
    list = list.prepend("5");
    list = list.prepend("4");
    list = list.prepend("3");
    list = list.prepend("2");
    list = list.prepend("1");
    list = list.prepend("0");

    list = list.delete(1);
    System.out.println(list);

    list = list.reverse();
    System.out.println(list);
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:48:12.727

您的设计将遇到的问题之一是，当您反转列表时，头部变为尾部，尾部变为头部。但是客户端指向的是头部，而不是尾部。即使您 100% 正确执行此操作，您也无法更改客户端的引用。您要做的是将作为对象的列表的概念与构成该对象的节点分开（目前您已将这两个概念组合在一起，因为节点是列表，反之亦然）。通过将它们分开，对列表的引用总是相同的，无论其中有什么、顺序等。列表包含头和尾引用，节点只包含下一个/上一个。现在，您列表中的每个节点都有头和尾，如果您不这样做，可能会弹出令人讨厌的错误 t 每当头/尾发生变化时替换每个引用（即前置、删除或反转）。如果您将这两个实例移出每个节点，那么您不必对更改列表进行太多维护。我认为，如果您这样做，那么您会发现实现反向要容易得多。

你的错误正是我要说的问题。最后你返回这个，那么客户端的引用就是头部（即这个）。但是，在迭代并反转所有内容之后，头部现在是尾部，因此您通过返回 this 返回了新尾部。而尾部的 toString() 什么都不是。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T21:37:29.127

通常我会实现接口`Iteratable`并使用 an`Iterator`来反转列表，但我的修订版与您当前的模型保持一致。`Node`我将's`getNext()`和方法的返回类型更改`getPrev()`为依赖于`forward`变量。现在列表在*“反转”*时永远不会改变链接，但它通过变量`getNext()`和`getPrev()`行为以相反的顺序遍历。

[IDEONE 代码链接](http://ideone.com/W2hMD8)

考虑这个编辑：

```
class DoublyLinkedStringList {

private Node head, tail;
boolean forward;

/**
 * Diese Klasse repraesentiert einen Knoten in der Doubly Linked List der
 * Klasse
 * <code>DoublyLinkedStringList</code>
 *
 */
private class Node {
    private String content;
    private Node next;
    private Node prev;

    public Node(String content) { this.content = content; }

    public Node(String content, Node next) {
        this.content = content;
        if(forward) { this.next = next; }                     //EDITED
        else        { this.prev = next; }                     //EDITED
    }

    public Node getNext() { return (forward) ? next : prev; } //EDITED
    public Node getPrev() { return (forward) ? prev : next; } //EDITED

    public void setNext(Node next) {
        if(forward) { this.next = next; }                     //EDITED
        else        { this.prev = next; }                     //EDITED
    }

    public void setPrev(Node prev) {
        if(forward) { this.prev = prev; }                     //EDITED
        else        { this.next = prev; }                     //EDITED
    }
}

public DoublyLinkedStringList() {
    this.head = null;
    this.tail = null;
}

public Node prepend(String info) {
    Node newNode = new Node(info);
    newNode.setPrev(null);
    newNode.setNext(getHead());
    if(newNode.getNext()!=null) { 
      newNode.getNext().setPrev(newNode);                     //EDITED
    } 
    if(forward) { head = newNode; }                           //EDITED
    else        { tail = newNode; }                           //EDITED
    if(getTail() == null) {                                   //EDITED
      if(forward) { tail = newNode; }                         //EDITED
      else        { head = newNode; }                         //EDITED
    }
    return head;
}

public Node delete(int index) {
    Node currNode = getHead();
    int count = 0;

    if (index == 0) {
        if(forward) { head = head.next; }                     //EDITED
        else        { tail = tail.prev; }                     //EDITED
        return head;
    }

    while (currNode != null) {
        if (count + 1 == index) {
            currNode.next.prev = currNode.prev; 
            currNode.prev.next = currNode.next;               //EDITED
            break;
        }
        currNode = currNode.getNext();                        //EDITED
        count++;
    }
    return currNode;
}

private Node next() {
    Node currNode = head;

    if (forward) {
        return currNode.getNext();
    } else {
        return currNode.getPrev();
    }
}

public Node getHead() { return (forward) ? head : tail; }     //EDITED
public Node getTail() { return (forward) ? tail : head; }     //EDITED
public DoublyLinkedStringList reverse() { forward = !forward; return this; }

@Override
public String toString() {
    StringBuilder sb = new StringBuilder();
    //EDITED LOOP STRUCTURE
    for (Node currNode = getHead(); currNode != null; currNode = currNode.getNext()) {
        sb.append(currNode.content);
        if (currNode.getNext() != null) {
            sb.append(", ");
        }
    }
    return sb.toString();
}

public static void main(String argv[]) {
    DoublyLinkedStringList list = new DoublyLinkedStringList();
    list.prepend("6");
    list.prepend("5");
    list.prepend("4");
    list.prepend("3");
    list.prepend("2");
    list.prepend("1");
    list.prepend("0");
    list.delete(3);
    System.out.println(list);
    System.out.println(list.reverse());
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T21:45:43.403

这只是我的解决方案。不幸的是，我没有更多时间来做解释性说明。

```
public class DoublyLinkedStringList {
    private String info;
    private DoublyLinkedStringList prev;
    private DoublyLinkedStringList next;

public DoublyLinkedStringList(String pInfo)
{
    info = pInfo;
    prev = null;
    next = null;
}

private DoublyLinkedStringList(String pInfo, DoublyLinkedStringList pPrev, DoublyLinkedStringList pNext)
{
    info = pInfo;
    prev = pPrev;
    next = pNext;
}

public DoublyLinkedStringList prepend(String info)
{
    DoublyLinkedStringList n = new DoublyLinkedStringList(info);
    prev = n;
    n.next = this;

    return n;
}

public DoublyLinkedStringList delete(int index)
{   
    if (index == 0)
    {
        next.prev = null;
        return next;
    }

    DoublyLinkedStringList d = this;

    for (int i = 0; i<index; i++)
        d = d.next;

    // d is now the node which should be deleted

    // after delete(x) "next" schould be on pos x

    d.prev.next = d.next;   // take the next of the prev and set the new next to the next of d

    if (d.prev.next != null)    // if the next of d was not set to null, it must get to know his new prev (d's prev)
        d.prev.next.prev = d.prev;

    return this;
}

public DoublyLinkedStringList reverse() // moe or less less similar to my implementation in IntList.java
{
    DoublyLinkedStringList oldLast = getLast();
    next.reverse(this);
    prev = next;
    next = null;
    return oldLast;
}

public void reverse(DoublyLinkedStringList last)
{
    if (next != null)
        next.reverse(this);
    prev = next;
    next = last;
}

public DoublyLinkedStringList getLast()
{
    if (next == null)
        return this;
    return next.getLast();
}

@Override
public String toString()
{
    String r = "";

    for (DoublyLinkedStringList i = this; i != null; i = i.next)
    {
        r += i.info;
        if (i.next != null)
            r += ", ";
    }
    return r;
}

public String reverseToString() // uses prev; just for testing issues :)
{
    String r = "";

    for (DoublyLinkedStringList i = getLast(); i != null; i = i.prev)
    {
        r += i.info;
        if (i.prev != null)
            r += ", ";
    }
    return r;
}

public static void main(String argv[])
{
    DoublyLinkedStringList list = new DoublyLinkedStringList("Test");
    list = list.prepend("6");
    list = list.prepend("5");
    list = list.prepend("4");
    list = list.prepend("3");
    list = list.prepend("2");
    list = list.prepend("1");
    list = list.prepend("0");
    list = list.delete(1);
    System.out.println(list);
    System.out.println(list.reverseToString()+"\n");

    list = list.reverse();
    System.out.println(list);
    System.out.println(list.reverseToString());

    list = list.delete(6);
    list = list.delete(0);
    System.out.println(list);
    list = list.reverse();
    list = list.prepend("1");
    System.out.println(list);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-16T19:58:19.227

由于您有一个 DoublyLinkedStringList 作为返回类型，我认为您想返回一个*新*对象。在这种情况下，我建议您循环访问您的对象并使用`prepend`您已经实现的方法构建一个新列表（无论如何都有其他错误）。您可以从一个空列表开始，并且在扫描原始对象时，将当前元素添加到前面。

否则，如果你想“就地”反转列表，你应该 return `void`，用最后一个元素更改头部，并且，由于是双链接的，你应该做任何其他事情，因为在两个方向都有指向节点的指针。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-16T19:59:07.710

试试这个反向方法：

```
public class DoublyLinkedList {
  Node first, current;
  boolean forward;
      //constructors... methods...

  private Node next() {
        if(forward) return current.next();
        else return current.previous();
  }

  public void reverse() {
    while(true) {
          if(next() == null) {
        first = current;
        forward = !forward;
        return;
      }
      current = next(); 
    }
  }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-16T19:50:07.890

你也只需要设置头部和尾部。那么它应该可以工作。但请参阅 chubbsondubs 的答案以获得进一步的改进！

# python - 在 python 中使用 Gtk.Builder() 加载 UI 后如何设置应用程序标题？

> ID：13904819
> 
> 赞同：1
> 
> 时间：2012-12-16T19:38:19.487
> 
> 标签：python, gtk, title

我正在尝试使用 set_wmclass 设置应用程序标题，但我收到了 Gtk-WARNING，最后没有设置应用程序名称。

> Gtk-WARNING **: gtk_window_set_wmclass: 窗口实现后不应该设置 wmclass！

我正在使用 Gtk.Builder() 从这样的林间空地文件中加载窗口 UI ...

```
ui_builder = Gtk.Builder()
ui_builder.add_from_file('window.ui')
window = ui_builder.get_object('window1')
self.__window.set_wmclass("Hello World", "Hello World") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:44:09.237

改为使用`GLib.set_application_name()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T17:13:31.123

我最终创建了一个类似的 GtkWindow `__window = Gtk.Window()`，然后使用 GtkBuilder 添加了其他 UI 组件（一个 GtkBox）。

# c# - MSBuild 与 Azure - PublishProfileSet 评估为“”

> ID：13904822
> 
> 赞同：5
> 
> 时间：2012-12-16T19:38:57.630
> 
> 标签：c#, azure, msbuild, asp.net-mvc-4, web-deployment

我正在尝试将我的项目部署到 Azure。我已经在 Azure 上首先与 EF 代码搏斗了几个小时，但我得到了它一次，它创建了一个用户。我去发布更新，现在我收到以下错误：

`Invoke build failed due to exception 'Expected "$(_PublishProfileSet)" to evaluate to a boolean instead of "", in condition "$(_PublishProfileSet) And '$(PublishProfileName)' =='' And '$(WebPublishProfileFile)'==''".`

我已经删除了发布配置文件并重新添加了它，我还从 Azure 中检索了一个新的配置文件。这个问题不断出现。我在我的解决方案中的任何地方都找不到 PublishProfileSet，而且我不确定它应该去哪里或应该设置什么。关于如何从中恢复的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-16T22:42:56.490

根据 Sayed 的评论，解决方案是删除我的解决方案中的整个`/Properties/PublishProfiles`目录，而不是从“编辑 Web 发布配置文件”窗口中删除配置文件。我采取的具体步骤如下：

1.  `/Properties/PublishProfiles`从我的项目中删除该文件夹。

    1.5。重新启动 Visual Studio。

2.  按 F6 重建解决方案。
3.  从 Azure 下载了配置文件的新副本。
4.  通过发布向导导入配置文件。

# c# - 在 C# 中计算斐波那契

> ID：13904823
> 
> 赞同：5
> 
> 时间：2012-12-16T19:38:59.727
> 
> 标签：c#, fibonacci, ulong

我试图以一种非常简单的方式在 C# 中计算斐波那契数列，但是当涉及到更高的数字时，它会出错并通过给出错误的答案而停止工作。

```
ulong num = 1;
ulong lnum = 0;
uint x = 1;

private void Form1_Load(object sender, EventArgs e)
{
    listBox1.Items.Add("(0) " + 1);
}

private void timer1_Tick(object sender, EventArgs e)
{
    if (x <= 1000)
    {
        ulong newnum = lnum + num;
        listBox1.Items.Add("(" + x + ") " + newnum);
        listBox1.SetSelected((int)x, true);
        lnum = num;
        num = newnum;
        x++;
     }
} 
```

我正在以一种方式制作它，我可以通过一次将它们添加到列表框 1 来观看它添加数字。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-16T19:42:22.420

`ulong`对于斐波那契来说太小了。你需要使用更大的东西。.NET 4 添加了[BigInteger](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)，它应该允许任意数字大小。

对于较低的 .NET 版本，您需要找到类似的 3rd 方实现

# plugins - 在我的插件中集成 UML 建模工具？

> ID：13904824
> 
> 赞同：0
> 
> 时间：2012-12-16T19:39:06.090
> 
> 标签：plugins, eclipse-plugin, tool-uml, papyrus

我正在开发一个从 UML 图生成代码的插件 eclipse。我想将制作这些 UML 图的工具集成到我的插件中。我解释说：我想要一个包含“创建新 UML 图”的按钮或菜单。通过单击它，工具的编辑器（例如纸莎草纸）会显示出来，这样我就可以创建我的图表了。

可能吗 ？我承认我是开发插件的新手。如果是，如何？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T02:17:43.047

是的，这应该很简单。您可以使用 Eclipse 模型到文本模板技术（如 M2T-JET）轻松生成包含新模型的文件，并轻松地从该模型生成代码。创建模型文件并填充初始内容后，使用 IDE 类打开文件的默认编辑器。

# jenkins - 检查詹金斯的差异

> ID：13904832
> 
> 赞同：2
> 
> 时间：2012-12-16T19:39:46.980
> 
> 标签：jenkins, perforce, usability

这可能与编程无关，但确实有帮助。我们使用 Jenkins 和 perforce 插件。Jenkins 构建是由变化触发的。我们还可以查看特定更改列表中哪些文件受到影响。

但我很好奇是否有任何选项可以让我们也看到文件之间的差异。说一个变更列表说：**hello.cpp 2#2**
那么有什么方法可以让我看到 hello.cpp 文件的第一版和第二版之间的差异。好像有这样的功能，它将允许我们审查代码并增加可用性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T03:46:27.693

设置一个 scm 浏览器服务器，例如 fisheye 或 p4web，并设置 perforce 插件与之对话。这将为更改日志中的每个文件提供指向差异的链接。

# c# - 尝试从 Web 应用程序打印时出现错误“RPC 服务器不可用”

> ID：13904837
> 
> 赞同：3
> 
> 时间：2012-12-16T19:40:39.283
> 
> 标签：c#, aspxcombobox

我正在构建一个 ASP.NET 应用程序，它在其中打印一些带有条形码的标签，打印机将安装到本地 PC 中，并将在托管应用程序的服务器中共享。

所以我的问题与域名有关，因为安装打印机的域名与服务器所在的域名不同。我尝试从本地应用程序打印并且打印正确，但是当我尝试从 Web 打印时，显示以下错误：

> RPC 服务器不可用

我认为这是一个安全问题，我试图取代运行应用程序的用户，但即便如此应用程序也无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T19:45:59.730

首先，如果您正在打印，您真的不应该创建 Web 应用程序（或允许用户从页面本地打印条形码）。

如果您必须这样做，那么您需要确保在执行打印代码之前，您冒充一个有权打印条形码的域的用户。这段代码应该有帮助： -

```
using ( new Impersonator( "myUsername", "myDomainname", "myPassword" ) )
{
   ... 
   Print Code
   ...
} 
```

Impersonator 类可以在这里找到：http: [//www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User](http://www.codeproject.com/Articles/10090/A-small-C-Class-for-impersonating-a-User)

# ruby-on-rails-3 - rails 3 find_by_x 会清理数据吗？

> ID：13904840
> 
> 赞同：1
> 
> 时间：2012-12-16T19:40:48.983
> 
> 标签：ruby-on-rails-3

我有一个包含几个基本领域的模型：

*   标题
*   类别
*   等等

我看过文档说你什么时候这样做：

```
Model.where("category = ?", params[:cat]) 
```

代码将被自动清理。如果我将以上内容转换为：

```
Model.find_by_category params[:cat] 
```

参数也会自动清理吗？我不想*假设*这是因为那将是一个严重的安全错误。

# mysql - MYSQL 按日、周和月分组，带有 php 时间戳

> ID：13904842
> 
> 赞同：0
> 
> 时间：2012-12-16T19:41:13.103
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL 查询 GROUP BY 日/月/年](https://stackoverflow.com/questions/508791/mysql-query-group-by-day-month-year)

我有 php 时间戳（例如 1307362819）存储在我的数据库的列中。我想将数据按天、周和月分组计数（*）。

例如，我想知道每天、每周和每月有多少条目等。

如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T20:08:16.170

您可以从时间戳中减去日、周和月值，并将减去的值分组。

按天值分组：

```
select count(*) from table group by from_unixtime(timeStampColumn, '%Y%m%d') 
```

按周值分组：

```
select count(*) from table group by from_unixtime(timeStampColumn, '%Y%m%u') 
```

按月值分组：

```
select count(*) from table group by from_unixtime(timeStampColumn, '%Y%m') 
```

有关更多信息，请查看此页面：[http ://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.0/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:48:03.243

你为什么不使用这些：<>

```
SELECT COUNT(*) FROM yourTable WHERE yourTimestampField > someTimestampAWeekPast;
SELECT COUNT(*) FROM yourTable WHERE yourTimestampField > someTimestampADayPast; 
```

使用 mysql 日期/时间函数[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)计算过去所需的日期。如果将它们存储为 int 或 string 或其他形式，请使用 UNIX_TIMESTAMP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T20:07:17.127

这是一个很好的例子

[按周分组](http://sqlize.com/)

编辑：

尝试这个

```
 select
id_user,
year(time) as AYear, week(time) as AWeek, day(time) as Aday ,
count(week(time)) as TotalPerWeek , count(day(time)) as TotalPerDay ,
count(year(time)) as TotalPerYear
from yourtable
where id_user = 16             //// the user u want to check
group by id_user, AYear, AWeek , Aday
order by AYear, AWeek , Aday 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-12-16T20:04:49.347

```
SELECT MONTH( FROM_UNIXTIME(  `timeStamp` ) ) , COUNT(  `id` ) 
FROM  `discusComments` 
GROUP BY MONTH( FROM_UNIXTIME(  `timeStamp` ) ) 
```

# android - 在通用图像加载器中为失败的下载添加图像

> ID：13904846
> 
> 赞同：1
> 
> 时间：2012-12-16T19:41:22.577
> 
> 标签：android, android-listview, xamarin.android, universal-image-loader

在我的 monodroid 应用程序中，我使用通用图像加载器在列表视图中显示图像。在显示图像之前，我会在图像上显示一个进度条。我想为下载失败添加默认图像。是否可以？这是我用它显示图像的代码：

```
 ImageLoader = Com.Nostra13.Universalimageloader.Core.ImageLoader.Instance;
ImageLoader.DisplayImage(myobject.Images [0], imageView,  Application.Options, newImageLoaderListener (progressbar)); 
```

这是一个 monodroid 代码。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T13:58:38.890

为此使用`ImageLoadingListener.onLoadingFailed()`。在 中显示您的图像`onLoadingFailed()`。

# python - 使用 Python 的 Scipy DCT-II 做 2D 或 ND DCT

> ID：13904851
> 
> 赞同：7
> 
> 时间：2012-12-16T19:42:23.060
> 
> 标签：python, scipy, dct

我想使用 scipy 的 DCT-II，因为它已经编码并且速度很快。查看[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.fftpack.dct.html)，它似乎是一维实现。是否可以以将其用作 3D 实现的方式使用它？我不确定数学。2D 和 3D 实现是否相当于在计算中使用不同维度将 1D 乘以 2 或 3 倍？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T06:32:55.110

基本上，以下方法可以解决问题：

```
import numpy as np
from scipy.fftpack import dct, idct

# Lets create a 3D array and fill it with some values
a = np.random.rand(3,3,3)

b = dct(dct(dct(a).transpose(0,2,1)).transpose(1,2,0)).transpose(1,2,0).transpose(0,2,1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-15T06:03:59.797

这是一个更通用的功能：

```
import numpy as np
from scipy.fftpack import dct, idct

def dctn(x, norm="ortho"):
    for i in range(x.ndim):
        x = dct(x, axis=i, norm=norm)
    return x

def idctn(x, norm="ortho"):
    for i in range(x.ndim):
        x = idct(x, axis=i, norm=norm)
    return x 
```

然后：

```
>>> x = np.random.rand(2, 2, 2)

>>> x
array([[[0.316, 0.927],
        [0.197, 0.936]],

       [[0.832, 0.982],
        [0.768, 0.564]]])

>>> dctn(x)
array([[[ 1.952, -0.459],
        [ 0.209, -0.08 ]],

       [[-0.272, -0.496],
        [-0.132,  0.171]]])

>>> np.all(np.isclose(x, idctn(dctn(x))))
True 
```

* * *

要使输出与@macrocosme 完全相同，`norm=None`请在末尾设置并运行它`dctn`：

```
np.moveaxis(x, range(x.ndim), (-1, range(x.ndim - 1))) 
```

* * *

[再举一个例子，我们可以通过Wikipedia 的计算](https://en.wikipedia.org/wiki/JPEG#Discrete_cosine_transform)来验证它是否与 JPEG 的 8x8 DCT-II 相同：

```
>>> x = np.array([
...     [52, 55, 61, 66,  70,  61,  64, 73],
...     [63, 59, 55, 90,  109, 85,  69, 72],
...     [62, 59, 68, 113, 144, 104, 66, 73],
...     [63, 58, 71, 122, 154, 106, 70, 69],
...     [67, 61, 68, 104, 126, 88,  68, 70],
...     [79, 65, 60, 70,  77,  68,  58, 75],
...     [85, 71, 64, 59,  55,  61,  65, 83],
...     [87, 79, 69, 68,  65,  76,  78, 94],
... ]) - 128

>>> np.set_printoptions(precision=2, floatmode="fixed", suppress=True)

>>> print(dctn(x))
[[-415.38  -30.19  -61.20   27.24   56.12  -20.10   -2.39    0.46]
 [   4.47  -21.86  -60.76   10.25   13.15   -7.09   -8.54    4.88]
 [ -46.83    7.37   77.13  -24.56  -28.91    9.93    5.42   -5.65]
 [ -48.53   12.07   34.10  -14.76  -10.24    6.30    1.83    1.95]
 [  12.12   -6.55  -13.20   -3.95   -1.88    1.75   -2.79    3.14]
 [  -7.73    2.91    2.38   -5.94   -2.38    0.94    4.30    1.85]
 [  -1.03    0.18    0.42   -2.42   -0.88   -3.02    4.12   -0.66]
 [  -0.17    0.14   -1.07   -4.19   -1.17   -0.10    0.50    1.68]] 
```

# ruby-on-rails - 如果产品名称为零，那么使用另一个名称？

> ID：13904853
> 
> 赞同：0
> 
> 时间：2012-12-16T19:42:35.960
> 
> 标签：ruby-on-rails, ruby

我目前正在开发一个购物车，它将获取 CD 或 DVD 的 id，然后获取项目的名称。

如果我单独使用它们，它可以正常工作，因为我已经在其他文件中进行了相关更改。

目前的代码是：

```
<% if line_item==@current_item %>
  <tr id='current_item'>
<% else %>  
  <tr>
<% end %>
    <td><%= line_item.quantity %>&times;</td>
    <td><%= line_item.product.name %></td>
    <td><%= line_item.dvd.name %></td>

    <td class="item_price"><%= number_to_currency(line_item.total_price, :unit=>'&pound') %></td>
  </tr> 
```

如果我有一条`<td><%= line_item.cd.name %></td>`线并且只添加 CD，它可以正常工作，反之亦然`<td><%= line_item.dvd.name %></td>`。

我想要的是做一个测试，看看是否`cd.name`是`nil`，如果它是使用`dvd.name`，但这不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:44:39.623

这应该工作

```
 line_item.cd.try(:name) || line_item.dvd.try(:name) 
```

此代码将首先尝试获取 CD 名称并回退到 DVD，如果其中之一`cd`或`cd.name`为 nil。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-16T19:46:19.917

在您的`Item`模型中，尝试添加此方法：

```
def cd_or_dvd
  line_item.dvd || line_item.cd
end 
```

比在视图中：

```
<td><%= line_item.dvd.name %></td> 
```

# android - 如何在android中关闭wifi的情况下获得wifi配置的网络？

> ID：13904854
> 
> 赞同：3
> 
> 时间：2012-12-16T19:42:37.407
> 
> 标签：android, wifi

如何在android中关闭wifi的情况下获得wifi配置的网络？如果这是不可能的，我可以打开 wifi 但禁用与已知网络的自动连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T12:54:19.150

在网上搜索了很长时间后，我发现这是不可能的:(

# android - 以编程方式点击 Android 通知

> ID：13904857
> 
> 赞同：6
> 
> 时间：2012-12-16T19:42:52.057
> 
> 标签：android, android-intent, android-activity, robotium, android-notifications

我正在使用[Robotium 框架](http://code.google.com/p/robotium/)对应用程序进行黑盒测试。每次安装新应用程序时，被测应用程序都会在状态栏中发送通知。我想单击该通知，但我仍然没有找到合适的方法来执行此操作。

当我手动单击一个通知时，我得到以下`logcat`几行：

```
I/ActivityManager(  148): START {flg=0x14000000 cmp=com.test.package/.activity.FrontActivity bnds=[0,38][240,86] (has extras) u=0} from pid -1
I/ActivityManager(  148): START {flg=0x14000000 cmp=com.test.package/.activity.ResultActivity u=0} from pid 8600
I/ActivityManager(  148): Displayed com.test.package/.activity.FrontActivity: +1s183ms
I/ActivityManager(  148): Displayed com.test.package/.activity.ResultActivity: +744ms 
```

我知道 Robotium 不能同时测试 2 个不同的应用程序，而且我知道您无法收到外部应用程序的通知。

我还尝试使用以下代码获取待处理的意图并启动它：

```
Context context = this.getInstrumentation().getTargetContext().getApplicationContext();
String intentClassString = "com.test.package.activity.FrontActivity";
Class<?> intentClass = null;

try {
    intentClass = Class.forName(intentClassString);
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}

Intent intent = new Intent(context, intentClass);
PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, PendingIntent.FLAG_NO_CREATE);

try {
    pendingIntent.send();
} catch (CanceledException e) {
    e.printStackTrace();
} 
```

该活动实际上已显示，但它与我通过手动调用它获得的不同。我认为在我传递的上下文或我调用未决意图的方式中有问题。

关于这个问题的任何提示？有没有更好的方法来模拟点击通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-12-29T06:11:47.323

您可以触发通知栏上的滑动并点击通知上的事件。

**参考命令：**

```
adb shell input swipe 100 500 400 100 1000

adb shell input tap 400 400 
```

通过更改参数，您可以使用这些命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T16:39:21.660

请在另一个 stackoverflow 问题中找到好的讨论和一些选项：
[我可以使用 Android 的测试框架测试状态栏通知吗？](https://stackoverflow.com/questions/4045400/can-i-test-status-bar-notifications-using-androids-testing-framework)

由于您已经有代码来启动一个意图，而不是尝试重新创建 notify() 调用会做什么，尝试添加一个特殊的活动，只是为了测试在通知上实际调用 notify()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-02T14:57:09.407

**Ranjith KP**给您的答案包含解决方案。请注意，您需要运行应用程序的手机 root，因为这些是与 sudo 权限一起使用的命令。

这是为我工作的代码。它首先扩展通知栏（滑动命令），等待 1 秒，最后点击列表中的第一个通知。根据需要修改轴参数。

```
Process su = null;
try {
 su = Runtime.getRuntime().exec("su");
 su.getOutputStream().write("input swipe 270 010 270 900\n".getBytes());
 Thread.sleep(1000);
 su.getOutputStream().write("input tap 200 200\n".getBytes());
 su.getOutputStream().write("exit\n".getBytes());
 su.waitFor();
} catch (Exception e) {
 e.printStackTrace();
} finally {
 if (su != null) {
  su.destroy();
 }
} 
```

# python - 如何使用 matplotlib 绘制 f(x,y,z) = t

> ID：13904860
> 
> 赞同：0
> 
> 时间：2012-12-16T19:43:13.493
> 
> 标签：python, multidimensional-array, matplotlib

我有一些需要显示的数据。

因为我使用 python，所以快速搜索告诉我 matplotlib 是最好的解决方案。

我查看了文档，但我只能找到有关如何绘制函数 f(x,y) = t 的信息。

当您添加第四维时，我的问题就来了。

我有四个数据数组。最后一个维度可以显示颜色信息。

我开始这样做： `def f(x,y,z): #compute the function return t`

```
x : np.arange(1,9,1)
y : np.arange(1,9,1)
z : np.arange(1,9,1) 
```

然后我为所有 x,y,z 创建包含 f(x,y,z) 的数据结构

但是那我应该如何显示它呢？

提前致谢，

胜利者

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T20:46:30.327

如果`t`是给定的常数，请参见[此处](https://stackoverflow.com/questions/4680525/plotting-implicit-equations-in-3d)。

如果`t`是另一个参数，那么这个问题实际上就是 4D 世界会是什么样子。如果你是这个意思，请告诉我。

# oracle - HTTP 状态 500 - java.util.Date 无法转换为 java.sql.Date

> ID：13904865
> 
> 赞同：0
> 
> 时间：2012-12-16T19:44:13.147
> 
> 标签：oracle, jakarta-ee, servlets, jdbc, tomcat7

我编写了一个 java servlet 程序，但是当我运行它时，它显示错误 HTTP Status 500 - java.util.Date cannot be cast to java.sql.Date 我搜索了如何以任何其他方式将日期类型插入数据库但是我没有办法这样做。我的代码是：

```
 package skypark;
    import java.io.*;
    import javax.servlet.*;
    import java.text.*;
    import javax.servlet.http.*;
      import java.sql.*;
      import java.sql.Date;
  public class Registration extends HttpServlet
 {
  /**
   * 
   */
     private static final long serialVersionUID = 1L;
     public static Connection prepareConnection()throws ClassNotFoundException,SQLException
{
String dcn="oracle.jdbc.driver.OracleDriver";
String url="jdbc:oracle:thin:@JamesPJ-PC:1521:skypark";
String usname="system";
String pass="tiger";
Class.forName(dcn);
return DriverManager.getConnection(url,usname,pass);
  }
  public void doPost(HttpServletRequest req,HttpServletResponse resp)throws ServletException,IOException
 {
resp.setContentType("text/html");
PrintWriter out=resp.getWriter();
try
{
String phone1,dofb,date1,month,year,uname,fname,lname,address,city,state,country,pin,email,password,gender,lang,qual,relegion,privacy,hobbies,fav;

uname=req.getParameter("uname");
fname=req.getParameter("fname");
lname=req.getParameter("lname");
date1=req.getParameter("date");
month=req.getParameter("month");
year=req.getParameter("year");
address=req.getParameter("address");
city=req.getParameter("city");
state=req.getParameter("state");
country=req.getParameter("country");
pin=req.getParameter("pin");
email=req.getParameter("email");
password=req.getParameter("password");
gender=req.getParameter("gender");
phone1=req.getParameter("phone");
lang="";
qual="";
relegion="";
privacy="";
hobbies="";
fav="";
dofb=date1 +"-"+ month +"-" + year;
int phone=Integer.parseInt(phone1);
DateFormat formatter ; 
java.util.Date dob ; 
formatter = new SimpleDateFormat("dd-MM-yy");
dob = formatter.parse(dofb); 

Connection con=prepareConnection();
String Query="Insert into regdetails values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
PreparedStatement ps=con.prepareStatement(Query);
ps.setString(1,uname);
ps.setString(2,fname);
ps.setString(3,lname);
ps.setDate(4,(Date) dob);
ps.setString(5,address);
ps.setString(6,city);
ps.setString(7,state);
ps.setString(8,country);
ps.setString(9,pin);
ps.setString(10,lang);
ps.setString(11,qual);
ps.setString(12,relegion);
ps.setString(13,privacy);
ps.setString(14,hobbies);
ps.setString(15,fav);
ps.setString(16,gender);

int c=ps.executeUpdate();

String query="insert into passmanager values(?,?,?,?)";
PreparedStatement ps1=con.prepareStatement(query);

ps1.setString(1,uname);
ps1.setString(2,password);
ps1.setString(3,email);
ps1.setInt(4,phone);

int i=ps1.executeUpdate();

if(c==1||c==Statement.SUCCESS_NO_INFO && i==1||i==Statement.SUCCESS_NO_INFO)
{
    out.println("<html><head><title>Login</title></head><body>");
    out.println("<center><h2>Skypark.com</h2>");
    out.println("<table border=0><tr>");
    out.println("<td>UserName/E-Mail</td>");
    out.println("<form action=login method=post");
    out.println("<td><input type=text name=uname></td>");
    out.println("</tr><tr><td>Password</td>");
    out.println("<td><input type=password name=pass></td></tr></table>");
    out.println("<input type=submit value=Login>");
    out.println("</form></body></html>");
}
else
{
    out.println("<html><head><title>Error!</title></head><body>");
    out.println("<center><b>Given details are incorrect</b>");
    out.println(" Please try again</center></body></html>");
    RequestDispatcher rd=req.getRequestDispatcher("registration.html");
    rd.include(req,resp);
    return;
  }
 }
  catch(ClassNotFoundException cnfe) {
  out.println("<html><head><title>Error!</title><body>");
  out.println("<b><i>Class not found "+ cnfe +"</i></b>");
  out.println("</body></html>");
} catch(SQLException sqle) {
     out.println("<html><head><title>Error!</title><body>");
      out.println("<b><i>Unable to process try after some time Sql error</i></b>");
      out.println("</body></html>");
} catch (ParseException e) {
     out.println("<html><head><title>Error!</title><body>");
      out.println("<b><i>Unable to process Parseint exc " + e +"</i></b>");
      out.println("</body></html>");
}
 /* catch(Exception e)
 {
   out.println("<html><head><title>Error!</title><body>");
  out.println("<b><i>Unable to process try after some time</i></b>");
  out.println("</body></html>");
  RequestDispatcher rd=req.getRequestDispatcher("registration.html");
  rd.include(req,resp);
  return;
}*/
out.flush();
out.close();
}
} 
```

错误是

```
 HTTP Status 500 - java.util.Date cannot be cast to java.sql.Date
type Exception report
message java.util.Date cannot be cast to java.sql.Date
description The server encountered an internal error that prevented it from fulfilling this request.
exception
 java.lang.ClassCastException: java.util.Date cannot be cast to java.sql.Date
skypark.Registration.doPost(Registration.java:67)
javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
javax.servlet.http.HttpServlet.service(HttpServlet.java:728)
 note The full stack trace of the root cause is available in the Apache Tomcat/7.0.33logs. 
```

请任何人帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:50:06.000

而不是铸造给`java.sql.Date`你应该创建一个`java.sql.Date object`

```
java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime()); 
```

然后使用`sqlDate`in`ps.setDate`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-16T19:50:28.153

该`PreparedStatement.setDate()`方法需要一个`java.sql.Date`as 参数。您有 a `java.util.Date`which 不是 a `java.sql.Date`，并且您正试图将其转换为 a `java.sql.Date`。那是行不通的。强制转换不会改变对象的类型。

要从 a 创建 a `java.sql.Date`，`java.util.Date`请使用

```
java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime()); 
```

# str-replace - 用双引号替换字符串，用 str_replace 替换模式

> ID：13904871
> 
> 赞同：0
> 
> 时间：2012-12-16T19:45:06.160
> 
> 标签：str-replace

我想替换`src="images/imagename.jpg"` 为 `src="http://xyz.com/images/imagename.jpg"` 我尝试使用 str_replace 进行的操作。但这似乎与双引号有问题。有什么简单的解决方案吗？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:55:13.493

尝试在双引号上使用 \ 转义字符 - 像这样：\"

```
return str_replace("src=\"images/imagename.jpg\"", "src=\"http://xyz.com/images/imagename.jpg\"", $string); 
```

使用通过 htmlentities 传递的字符串：

```
return str_replace("src=&quot;images/imagename.jpg&quot;", "src=&quot;http://xyz.com/images/imagename.jpg&quot;", $string); 
```

# asp.net-mvc - Asp.NET MVC 4 Entity Framework 5 - 找不到请求的 .NET Framework 数据提供程序

> ID：13904873
> 
> 赞同：3
> 
> 时间：2012-12-16T19:45:25.940
> 
> 标签：asp.net-mvc, asp.net-mvc-4, entity-framework-5, database-first

我正在开发 Asp.NET MVC 4 Web 应用程序。我正在尝试通过实体框架客户端连接到我的数据库“测试”。我已将 EntityFramework 引用添加到项目中，并且正在使用 MSSQL。由于未知原因，我收到以下错误： *无法找到请求的 .Net Framework 数据提供程序。它可能没有安装。*

有没有人有类似的问题？

web.config 中的设置是：

```
<configSections>
    <!-- For more information on Entity Framework configuration, visit  http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
</configSections>

<connectionStrings>
    <add name="TestEntities" connectionString="metadata=res://*/TestEDM.csdl|res://*/TestEDM.ssdl|res://*/TestEDM.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=MARINA-PC\MSSQL2008R2;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=True;Application Name=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings>

<entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.SqlConnectionFactory, EntityFramework" />
</entityFramework> 
```

*InitializeSimpleMembershipAttribute*类中的这一行发生错误：

```
WebSecurity.InitializeDatabaseConnection("TestEntities", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

这是一个堆栈跟踪：

```
at System.Data.Common.DbProviderFactories.GetFactory(String providerInvariantName)
   at WebMatrix.Data.DbProviderFactoryWrapper.CreateConnection(String connectionString)
   at WebMatrix.Data.Database.<>c__DisplayClass15.<OpenConnectionStringInternal>b__14()
   at WebMatrix.Data.Database.get_Connection()
   at WebMatrix.Data.Database.EnsureConnectionOpen()
   at WebMatrix.Data.Database.<QueryInternal>d__0.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at WebMatrix.Data.Database.QuerySingle(String commandText, Object[] args)
   at WebMatrix.WebData.DatabaseWrapper.QuerySingle(String commandText, Object[] parameters)
   at WebMatrix.WebData.SimpleMembershipProvider.CheckTableExists(IDatabase db, String tableName)
   at WebMatrix.WebData.SimpleMembershipProvider.CreateTablesIfNeeded()
   at WebMatrix.WebData.WebSecurity.InitializeMembershipProvider(SimpleMembershipProvider simpleMembership, DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean createTables)
   at WebMatrix.WebData.WebSecurity.InitializeProviders(DatabaseConnectionInfo connect, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables)
   at WebMatrix.WebData.WebSecurity.InitializeDatabaseConnection(String connectionStringName, String userTableName, String userIdColumn, String userNameColumn, Boolean autoCreateTables) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T20:01:44.910

尝试安装[Microsoft SQL Server Compact 4.0](http://www.microsoft.com/download/en/details.aspx?id=17876)。

# spring-batch - 在不延迟 Spring Batch 应用程序中的其他步骤的情况下重试失败的写入操作

> ID：13904874
> 
> 赞同：0
> 
> 时间：2012-12-16T19:45:37.000
> 
> 标签：spring-batch

我正在维护一个使用 Spring Batch 编写的遗留应用程序，需要对其进行调整以永远不会丢失数据。我必须从各种 web 服务中读取（每个步骤一个），然后写入远程数据库。当与 DB 的连接断开时，事情会变得很糟糕，因为从 web 服务读取的所有项目都被丢弃（不能两次读取相同的项目），并且由于无法写入而导致数据丢失。

我需要设置 Spring Batch 以将已读取的数据保留在一个步骤上，以便在下次运行该步骤时重试写入操作。在写操作成功结束之前，相同的步骤不能读取更多的数据。当无法写入时，该步骤应保留读取的数据并将执行传递到下一步，一段时间后，当失败的步骤再次运行时，它不应读取另一项，而是重试失败的写入操作.

批处理应用程序应该在无限循环中运行，并且每个步骤都应该从一个不同的来源收集数据。应该暂时跳过失败的写入操作（保留读取数据），以免延迟其他步骤，但应该在下次调用它们时从写入操作恢复。

除了官方文档，我还在研究各种网络资源，但 Spring Batch 并不是我遇到的最直观的文档。

这可以实现吗？如果是，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:58:18.627

我不知道这是否适合您，但这是我对您的配置的看法。

由于您有两个可能发生故障的远程源，让我们用两个作业（而不是两个步骤）对整个系统进行分区

**工作甲**

**第 1 步**：Tasklet 检查共享文件夹中的文件。如果文件存在，请不要继续下一步。写JOB B的时候会更容易理解

**第 2 步**：Web 服务到文件 从您的 Web 服务读取并将结果写入共享文件夹中的平面文件。由于您将使用平面文件进行输出，因此您将解决“从 Web 服务读取的所有项目都被丢弃并且数据因无法写入而丢失”的问题。

使用 Quartz 或同等工具来安排此作业。

**JOB B** 轮询共享文件夹以获取生成的文件并使用该文件创建一个作业启动器（file.getWhere 作为作业参数）。Spring 集成项目可能有助于此轮询。

**第1步**：从文件中读取，将它们写入远程数据库，如果写入数据库成功，则移动/删除文件。

由于作业启动源自文件中的轮询，因此不需要调度。

**样品执行**

时间 0：共享文件夹中没有文件

时间 1：从 Web 服务读取并写入共享文件夹

时间 2：作业 B 文件轮询发生，尝试写入 db。

如果成功，系统继续执行。

如果不是，当作业 A 尝试在其预定时间执行时，它将跳过从 Web 服务读取，因为文件仍然存在于共享文件夹中。它将跳过，直到作业 B 使用文件。

我不想详细介绍实现细节，但 Spring Batch 可以处理所有这些情况。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T16:40:28.903

如果作业失败，您可以将需要保留的数据写入批处理步骤的 ExecutionContext。您可以使用以下数据再次重新启动作业：

> 步骤执行由 StepExecution 类的对象表示。每个执行都包含对其相应步骤和 JobExecution 的引用，以及与事务相关的数据，例如提交和回滚计数以及开始和结束时间。此外，每个步骤执行都将包含一个 ExecutionContext，其中包含开发人员需要在批处理运行中持久保存的任何数据，例如重新启动所需的统计信息或状态信息

更多来自：[http ://static.springsource.org/spring-batch/reference/html/domain.html#domainStepExecution](http://static.springsource.org/spring-batch/reference/html/domain.html#domainStepExecution)

# haskell - Haskell 中的参数化类型和相等性

> ID：13904883
> 
> 赞同：2
> 
> 时间：2012-12-16T19:46:38.930
> 
> 标签：haskell, equality, typeclass

我在 Haskell 中实现了一个联合查找数据结构。

我想使用参数化类型，但是当我尝试比较用作参数的对象时遇到了一个小问题。

```
data UnionFindElement valueType =
    RootElement valueType |
    ElementWithParent valueType (UnionFindElement valueType)

holds :: UnionFindElement valueType -> valueType -> Bool
holds (RootElement v) value = v == value 
```

似乎没有定义平等。

```
No instance for (Eq valueType)
  arising from a use of `=='
In the expression: v == value 
```

如何限制 valueType 仅考虑具有已定义相等关系的类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:58:34.097

`holds :: (Eq valueType) => UnionFindElement valueType -> valueType -> Bool`

`(Eq valueType) =>`手段`valueType`来自类`Eq`（等价值），并且构造的存在正是为了能够限制泛型参数的类型。

请注意，这也适用于数据声明和其他几个地方。[您可以在http://en.wikibooks.org/wiki/Haskell/Classes_and_types#Type_constraints](http://en.wikibooks.org/wiki/Haskell/Classes_and_types#Type_constraints)了解更多信息

对于更一般的概述，[http](http://en.wikipedia.org/wiki/Type_class) ://en.wikipedia.org/wiki/Type_class和[http://en.wikipedia.org/wiki/Ad-hoc_polymorphism](http://en.wikipedia.org/wiki/Ad-hoc_polymorphism)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T12:43:36.363

为了补充 Vladislav 的出色答案，当遇到我不确定类型的问题时，我经常省略类型并通过将代码加载到 GHCi 中来利用 Haskell 的类型推断功能和（恭敬地:)）询问Haskell 告诉我它推断了什么。也就是说，将这段代码（除了没有明确的 for 类型外，与您的代码完全相同`holds`）放入 GHCi：

```
data UnionFindElement valueType =
    RootElement valueType |
    ElementWithParent valueType (UnionFindElement valueType)

holds (RootElement v) value = v == value 
```

并检查类型：

```
ghci> :t holds
holds :: Eq a => UnionFindElement a -> a -> Bool 
```

除了 alpha 替换之外，这正是 Vladislav 给出的。

# c++ - 另一个对象的变量内的对象消失

> ID：13904884
> 
> 赞同：0
> 
> 时间：2012-12-16T19:47:10.543
> 
> 标签：c++, class, crash

我得到了奇怪的程序行为和崩溃。

我创建了“List”类，其中包含指向“Student”类对象的指针数组。我观察到我在“List”构造函数中成功调用了“Student”对象。但我无法从任何其他“列表”方法调用“学生”对象。

我什至检查了同一行以在“List”构造函数和“push”方法中进行测试，导致程序崩溃。

这是测试线：`cout << (studentBox[numb] -> getRef()) << endl;`

这是代码有问题的部分：

```
#include <iostream>

using namespace std;

class Student
{
    private:
        int referenceNumb;
        int markNumb;
    public:
        Student();
        Student(int, int);
        ~Student();
        int getRef();
        int getMark();
};

class List
{
    private:
        int numb;
        Student* studentBox[1000];
    public:
        List();
        ~List();
        void push(int, int);
        int getAVG();
};

int main()
{
    List* base = NULL;
    int x, y;
    char mod;
    do
    {
        cout << "Waiting for orders." << endl;
        cout << "1 - Quit," << endl;
        cout << "2 - Add new student," << endl;
        cout << "3 - Calculate average mark," << endl;
        cout << "0 - Create new list." << endl;
        cin >> mod;

        switch(mod)
        {
            case '0': base = new List(); break;
            case '1': cout << "Bye."; break;
            case '2':
                if(base != NULL)
                {
                    cout << "Specify student's reference number: "; cin >> x;
                    cout << "Specify student's mark: "; cin >> y;
                    base->push(x, y);
                }
                else cout << "List does not exist!" << endl;
                break;
            case '3':
                if(base != NULL)
                {
                    cout << "Average mark is equal: " << base->getAVG();
                }
                else cout << "List does not exist!";
                cout << endl;
                break;
            default: cout << "Correct command required!" << endl; break;
        }
    }
    while(mod!='1');
    return 0;
}

Student::Student()
{
    referenceNumb = NULL;
    markNumb = NULL;
}

Student::Student(int r, int m)
{
    referenceNumb = r;
    markNumb = m;
}

Student::~Student()
{
    referenceNumb = NULL;
    markNumb = NULL;
    cout << "pusto." << endl;
}

int Student::getRef()
{
    return referenceNumb;
}

int Student::getMark()
{
    return markNumb;
}

List::List()
{
    int numb = 0;
    studentBox[numb] = new Student();

    cout << (studentBox[numb] -> getRef()) << endl;
}

List::~List()
{
}

void List::push(int x, int y)
{
    cout << (studentBox[numb] -> getRef()) << endl;

    if(studentBox[numb] != NULL)
    {
        studentBox[numb] = new Student();

        cout << (studentBox[numb] -> getRef()) << endl;
    }
    else cout << "Hujnia" << endl;
}

int List::getAVG()
{
    int temp = 0;
    for(int i=0; i<numb; i++)
    {
        temp += studentBox[i]->getMark();
    }

    return (temp / numb);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:50:22.647

我看到了几个主要问题。首先是`numb`List 的成员没有被初始化。

```
List::List()
{
    int numb = 0;  // this creates a new local variable called numb, it doesn't
                   // initialize the numb member.
    studentBox[numb] = new Student();

    cout << (studentBox[numb] -> getRef()) << endl;
} 
```

改为这样做：

```
List::List()
  : numb(0) // initialize the numb member to zero.
{
    studentBox[numb] = new Student();

    cout << (studentBox[numb] -> getRef()) << endl;
} 
```

另一个问题是，它`numb`似乎是为了指示列表的大小，但在添加新学生时它永远不会改变。

# java - 将 git 与 apache sshd 一起使用

> ID：13904887
> 
> 赞同：1
> 
> 时间：2012-12-16T19:47:47.610
> 
> 标签：java, git, ssh, msysgit, sshd

我正在尝试在我用 Java 编写的 SSH 服务器上使用 msysgit `sshd`，我已经取得了很大进展，因为我克服了一些 git 错误，我能够使用 putty 连接并获得一个 shell，我的 Windows 路径中有 git ，但我仍然不能真正使用 git 通过我的 ssh 守护进程连接到我的存储库。我从 msysgit 收到以下错误：

```
fatal: ''/C/gitrepo'' does not appear to be a git repository
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists. 
```

我使用以下内容将遥控器添加到我尝试连接的存储库中：

```
git remote set-url origin "ssh://test@localhost:22/C/gitrepo". 
```

我也尝试了许多其他变体，但没有运气。我在 localhost 上设置了两个 git repos，一个是我正在运行 git push 的，一个是在`c:\gitrepo`.

我错过了什么？

此外，我还必须将 mysysgit/bin 的路径添加到我的 windows 7 环境变量中，但也希望有一种方法可以在不将其添加到我的 windows 环境变量但在我的 ssh 服务器中以编程方式指定它的情况下使其工作，但更重要的是我希望能够在这个 ssh 服务器上运行 git。

我的服务器的代码如下。

```
import java.io.IOException;
import java.net.InetSocketAddress;
import java.util.ArrayList;
import java.util.EnumSet;
import java.util.List;
import org.apache.sshd.SshServer;
import org.apache.sshd.server.UserAuth;
import org.apache.sshd.common.NamedFactory;
import org.apache.sshd.common.util.OsUtils;
import org.apache.sshd.server.Command;
import org.apache.sshd.server.CommandFactory;
import org.apache.sshd.server.ForwardingFilter;
import org.apache.sshd.server.PasswordAuthenticator;
import org.apache.sshd.server.auth.UserAuthPassword;
import org.apache.sshd.server.command.ScpCommandFactory;
import org.apache.sshd.server.filesystem.NativeFileSystemFactory;
import org.apache.sshd.server.keyprovider.SimpleGeneratorHostKeyProvider;
import org.apache.sshd.server.session.ServerSession;
import org.apache.sshd.server.shell.ProcessShellFactory;

public class SSHD {

   public SSHD() {
      init();
   }

   public void start() throws IOException {
      sshServer.start();
   }

   private void init() {
      sshServer = SshServer.setUpDefaultServer();

      sshServer.setPort(22);
      sshServer.setKeyPairProvider(new SimpleGeneratorHostKeyProvider("hostkey.ser"));

      setupAuthentication();
      setupCommandHandling();
   }

   private void setupAuthentication() {
      sshServer.setPasswordAuthenticator(new SSHD.MyPasswordAuthenticator());

      List<NamedFactory<UserAuth>> userAuthFactories = new ArrayList<NamedFactory<UserAuth>>();
      userAuthFactories.add(new UserAuthPassword.Factory());
      sshServer.setUserAuthFactories(userAuthFactories);
   }

   private void setupCommandHandling() {
      CommandFactory myCommandFactory = new CommandFactory() {
         @Override
         public Command createCommand(String command) {
            System.out.println("command = \"" + command + "\"");
            return new ProcessShellFactory(command.split(" ")).create();
         }

      };

      sshServer.setCommandFactory(new ScpCommandFactory(myCommandFactory));

      sshServer.setFileSystemFactory(new NativeFileSystemFactory());

      sshServer.setForwardingFilter(new ForwardingFilter() {
         public boolean canForwardAgent(ServerSession session) {
            return true;
         }

         public boolean canForwardX11(ServerSession session) {
            return true;
         }

         public boolean canListen(InetSocketAddress address, ServerSession session) {
            return true;
         }

         public boolean canConnect(InetSocketAddress address, ServerSession session) {
            return true;
         }

      });

      ProcessShellFactory shellFactory = null;
      if (OsUtils.isUNIX()) {
         shellFactory = new ProcessShellFactory(new String[]{"/bin/sh", "-i", "-l"},
                 EnumSet.of(ProcessShellFactory.TtyOptions.ONlCr));
      } else {
         shellFactory = new ProcessShellFactory(new String[]{"cmd.exe "},
                 EnumSet.of(ProcessShellFactory.TtyOptions.Echo, ProcessShellFactory.TtyOptions.ICrNl, ProcessShellFactory.TtyOptions.ONlCr));
      }

      sshServer.setShellFactory(shellFactory);
   }

   private static class MyPasswordAuthenticator implements PasswordAuthenticator {

      @Override
      public boolean authenticate(String username, String password, ServerSession session) {
         return true;
      }

   }

   public static void main(String[] args) {
      SSHD sshd = new SSHD();

      try {
         sshd.start();
      } catch (IOException ex) {
         System.out.println("EXCEPTION: " + ex);
         ex.printStackTrace();
      }
   }

   private SshServer sshServer;
} 
```

有谁知道如何在服务器端修复此手动解析。我可以使用不同的命令处理器或类似的东西吗？

# php - Pass PHP variable to PHP form with blank values first time through

> ID：13904894
> 
> 赞同：0
> 
> 时间：2012-12-16T19:48:21.463
> 
> 标签：php

I want to make a PHP form to capture a task and then allow the user to refresh the form to add another task. To keep track of the user, I planned to pass the variable with

```
<a href="http://mydomain.com/taskform.php?varname1=
myvalue">Continue</a> 
```

and collect it on the next page taskform.php with

```
<?php

$varname = $_GET['myvalue'];

// other code 

?> 
```

My problem is that I get the user's name and some other information from another .php form that links to the .php task form. The first time I link to the task form, I get a MySQL error because there's no task info being passed. So do I have to use a different form the first time through that only catches the user's name?

Let me know if you need clarification. It's probably obvious that I'm passing the user name value so that it doesn't have to be repeatedly entered for each task form submission. I'm assuming that the task name in each table row will be unique, if you're wondering how I plan to query them. As far as security, I was panning to cross that bridge later but if you have any security tips I'd be glad to hear them.

Thanks in advance.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T19:49:34.427

You can just use `isset()` to make sure the value is present. This will stop the error.

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

So you'll want something like:

```
$varname = isset($_GET['myvalue']) ? $_GET['myvalue'] : FALSE; 
```

Which means if it's present you'll get the value, otherwise treat it as `FALSE`.

# android - android布局中的背景被拉伸

> ID：13904896
> 
> 赞同：1
> 
> 时间：2012-12-16T19:48:35.940
> 
> 标签：android, background, android-relativelayout

我使用 将背景图像放到我的相对布局中`android:background="@drawable/rajat2"`，其中 rajat2 是所有可绘制文件夹中的图像。

它将背景设置为我的布局，但背景延伸到整个屏幕。我也尝试过通过 java 代码放置墙纸，但它的行为仍然相同！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-16T19:50:11.497

如果您的可绘制尺寸不完全是屏幕尺寸，则背景将被拉伸到整个屏幕尺寸。考虑为每种类型的屏幕尺寸创建可绘制对象，使其看起来不会被拉伸。

如果您不希望图像占据整个屏幕大小，请考虑使用`ImageView`替代，并将其放置在您的布局中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T20:12:43.120

使用 draw9patch 作为背景图像。它很好地帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-16T20:45:23.623

如果您正在开发应用程序，则将布局宽度和高度设置为匹配父级，并使用 9 个补丁图像以获得更准确的值

# java - 无法从 cmd 执行 jar 文件

> ID：13904898
> 
> 赞同：0
> 
> 时间：2012-12-16T19:49:23.803
> 
> 标签：java, cmd, executable-jar

我使用该命令创建了一个可执行 jar 文件`jar cmf <text-file-points-to-main-class> <archive-name.jar>`，结果生成了一个可执行 jar 文件，但是当我尝试使用`java -jar file-name.jar`以下异常 打开该可执行 jar 时

```
Exception in thread "main" java.lang.NullPointerException
at sun.launcher.LauncherHelper.getMainClassFromJar(LauncherHelper.java:399)
at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:463) 
```

实际上包含---> Main-Class：hello.java 我也试过（没有.java的`<text-file-points-to-main-class>`hello）我无法指出究竟是什么问题？请注意，类文件可以正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:00:05.237

> 主类：hello.java

该`Main-Class`值应该是完全限定的*类名*，而不是文件名，例如

```
package com.example;

public class hello { 
```

你需要`Main-Class: com.example.hello`

# python - 在python中创建坐标网格

> ID：13904901
> 
> 赞同：0
> 
> 时间：2012-12-16T19:49:33.100
> 
> 标签：python, grid

> **可能重复：**
> [如何在范围内打印？](https://stackoverflow.com/questions/13824771/how-to-print-in-range)

我需要创建如下所示的网格坐标：

```
(  0,   0):  0     (125,   0):  1     (250,   0):  2     (375,   0):  3     (500,   0):  4     (625,   0):  5
(  0, 125):  6     (125, 125):  7     (250, 125):  8     (375, 125):  9     (500, 125): 10     (625, 125): 11
(  0, 250): 12     (125, 250): 13     (250, 250): 14     (375, 250): 15     (500, 250): 16        (625, 250): 17
(  0, 375): 18     (125, 375): 19     (250, 375): 20     (375, 375): 21     (500, 375): 22     (625, 375): 23 
```

(x, y): 我

程序的第一行必须是： for i in range 24:

我只被允许使用 i。不能再有 for 循环了。我可以使用 2 张打印件和一张 if。程序的最大长度为 4 行。

我是 python 的菜鸟。这对我来说太过分了。这是一个编程课，我潜伏在周围，试图学习一些有用的东西。这是他们上周的作业。

将不胜感激任何帮助。特别是如果您可以简单地向我展示它。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:31:55.077

```
(  0,   0):  0  (125,   0):  1  (250,   0):  2  (375,   0):  3  (500,   0):  4  (625,   0):  5  
(  0, 125):  6  (125, 125):  7  (250, 125):  8  (375, 125):  9  (500, 125): 10  (625, 125): 11 
(  0, 250): 12  (125, 250): 13  (250, 250): 14  (375, 250): 15  (500, 250): 16  (625, 250): 17
(  0, 375): 18  (125, 375): 19  (250, 375): 20  (375, 375): 21  (500, 375): 22  (625, 375): 23 
```

看起来像您要求的输出。

坚持您对 1 个 for 循环、一个 if 语句和 <= 4 行的要求，我想出了：

```
for i in range(24):
    if i%6==0 :
        print ''.join(["(%3s, %3s):%3s  "%(x*125, i/6*125 ,x+i) for x in range(6)]) 
```

既然你说你是一个 Python 菜鸟，你应该知道这使用了列表理解，我认为这些链接解释得很好：http:

[//www.blog.pythonlibrary.org/2012/07/28/python-201-list-理解/](http://www.blog.pythonlibrary.org/2012/07/28/python-201-list-comprehensions/)

[如何大声朗读 Python 列表理解？](https://stackoverflow.com/questions/9061760/how-to-read-aloud-python-list-comprehensions)

编辑：完全符合描述的代码：1个for循环，1个if语句，2个打印语句

```
for i in range(24):
    if i%6==0 and i!=0:
        print ''
    print "(%3s, %3s):%3s "%((i%6)*125, i/6*125 ,i) , 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:59:58.070

给你：

```
>>> print "\n".join(map("\t".join, [["(%s, %s): %s" % (x*125, y*125, y*6+x) for x in range(6)] for y in range(4)]))
(0, 0): 0       (125, 0): 1     (250, 0): 2     (375, 0): 3     (500, 0): 4     (625, 0): 5
(0, 125): 6     (125, 125): 7   (250, 125): 8   (375, 125): 9   (500, 125): 10  (625, 125): 11
(0, 250): 12    (125, 250): 13  (250, 250): 14  (375, 250): 15  (500, 250): 16  (625, 250): 17
(0, 375): 18    (125, 375): 19  (250, 375): 20  (375, 375): 21  (500, 375): 22  (625, 375): 23 
```

有点乱......但结果看起来像你需要的。

PS 展开

```
>>> node = lambda x,y: "(%s, %s): %s" % (x*125, y*125, y*6+x)
>>> coords = [[node(x, y) for x in range(6)] for y in range(4)]
>>> print "\n".join(map("\t".join, coords)) 
```

# ruby-on-rails - 如何测试与 RSpec 和 Devise 的集成

> ID：13904905
> 
> 赞同：1
> 
> 时间：2012-12-16T19:49:40.930
> 
> 标签：ruby-on-rails, unit-testing, devise

在使用 RSpec 测试我的 rails 应用程序的功能时，我遇到了很多问题。我有一个公司控制器，并且正在使用设计来确保您需要登录才能访问控制器。

然后我进行如下集成测试：

```
describe "with valid information" do
            before do
                fill_in "company_address", with: "My special address"
                fill_in "company_name", with: "My User"
                fill_in "company_contact_email", with: "test@test.com"
                fill_in "company_contact_name", with: "Someone Hello"
            end

            it "should create a company" do
                expect { click_button submit }.to change(Company, :count).by(1)
            end     
        end 
```

当然，它失败了，因为我没有登录的用户。我尝试创建一个如此处[所述](https://github.com/plataformatec/devise/wiki/How-To%3a-Controllers-and-Views-tests-with-Rails-3-%28and-rspec%29)的测试助手，它适用于控制器，但不适用于集成测试。

在进行这些测试之前，使用 Devise 登录用户的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T19:53:08.640

将文件添加`devise.rb`到`rspec/support` 这里是内容

```
RSpec.configure do |config|
  config.include Devise::TestHelpers, :type => :controller
end 
```

解决问题的另一种方法：[使用设计 gem 进行 Rails 集成测试](https://stackoverflow.com/questions/4292872/rails-integration-test-with-the-devise-gem)

# php - 如何解决 Zend\Session 的构造函数注入？

> ID：13904928
> 
> 赞同：10
> 
> 时间：2012-12-16T19:51:55.737
> 
> 标签：php, dependency-injection, zend-framework2, zend-session

Zend Framework 2 中 Session 组件的体系结构还没有记录，我在理解它的实际用途时遇到了一些麻烦（例如，与非常直观的 Symfony Session 相比）。

重要部分的简短摘要：

*   `Zend\Session\Storage\SessionStorage`映射和替换`$_SESSION`超全局
*   `Zend\Session\SessionManager`是管理存储、会话 cookie、会话配置、会话验证等的门面。
*   `Zend\Session\Container`是旧的替代品`Session_Namespace`，不同的 Container 共享一个 Manager 实例（通过静态字段）。

没有代表命名空间（容器）集合的组件，因此无法使用诸如“issetNamespaceX”、“unsetNamespaceX”等方法。*没有人*（包括管理器和存储）知道容器是否存在是任何，如果，多少有什么名字。

Matthew Weier O'Phinney 对这种情况的解释如下：

> Container 是一个特殊的类，用于处理当前 Storage 实例的隔离段。[...] 如果有的话，存储适配器将包含容器，而不是管理器。但是，我们还希望允许更多基本的存储使用，这使得**Container 与 Storage 正交**，并解释了 has-a 关系的差异。

关于正确的依赖注入，我看到了这个解决方案的几个实际问题。显然，Manager 可以被视为具有相当长生命周期的服务，因此有资格进行构造函数注入。不幸的是，管理器对容器一无所知，这迫使我也注入容器（不好，因为寿命很短并且占用了插槽），编写我自己的附加功能以使存储或管理器感知容器（应该是框架功能）或在我的消费类中创建容器（我显然想避免）。

所以 Zend 解决方案对我来说似乎并不实用。如果我想使用 Manager、FlashMessenger 和一个额外的容器，我需要注入 4 个（四个！）类。如果我对 Symfony 会话做同样的事情，我只需要注入 1（一个）类。

此外，容器不符合注入条件，因为它们可能是短暂的运行时对象，在脚本执行期间的给定点可能存在也可能不存在。对于 Symfony Session，这不是问题，因为 Session 知道它的包（容器），对于 ZF2，这是一个问题，因为 Manager 不知道容器。

* * *

**主要问题**：在实践中我应该如何将 Zend\Session 与容器一起使用？

附加问题：是否有充分的理由不提供类似于*ZF1*或例如类似于*Symfony* `SessionBag`的真正命名空间功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-11T14:51:13.203

我不是 100% 确定我了解您遇到的问题。

首先， a 的构造函数`Container`接受容器的命名空间以及可选的`Manager`实例：`$container = new Container('your container namespace here', $manager)`。您也可以指定要使用的默认管理器实例：`Container::setDefaultManager($manager)`.

其次，a仅表示所用实例`Container`中的命名数组。`Storage`因此，您可以通过`isset($storage['your container namespace here'])`调用来测试容器是否存在。

您遇到了哪些*具体*问题无法解决以上问题？根据您的描述，听起来（a）您不知道容器与存储具有 1:1 的关系，并且（b）您可以将管理器注入到容器实例中。如果还有其他问题，我想更好地理解它们。

# java - 用Java获取网页的DOM

> ID：13904929
> 
> 赞同：0
> 
> 时间：2012-12-16T19:52:00.760
> 
> 标签：java, dom

我正在制作一个新的浏览器，我需要获取网页的 DOM 来完成它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T05:35:49.427

您必须编写 HTML 解析器或使用现有的解析器，例如[http://jsoup.org/](http://jsoup.org/)

# wordpress - Cookie 免费域不起作用

> ID：13904930
> 
> 赞同：0
> 
> 时间：2012-12-16T19:52:04.770
> 
> 标签：wordpress, .htaccess, cookies, subdomain

我正在关注本教程：[http ://www.xpertdeveloper.com/2011/07/wordpress-cookie-free-domain/](http://www.xpertdeveloper.com/2011/07/wordpress-cookie-free-domain/)

因此，我创建（CPANEL）子域 static.artswr.com 并将其重定向到 artswr.com/wp-content/

我在 wp-config 文件的末尾编辑并添加了以下内容：

```
define("WP_CONTENT_URL", "http://static.artswr.com");
define("COOKIE_DOMAIN", "www.artswr.com"); 
```

我正在加载所有内容，`<?php bloginfo('template_directory'); ?>`但它不起作用，当我尝试在 static.artswr.com 中查找文件时出现 404 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T18:08:52.230

代替

```
define("WP_CONTENT_URL", "http://static.artswr.com"); 
```

尝试

```
define("WP_CONTENT_URL", "http://static.artswr.com/wp-content"); 
```

没有来自您的 cpanel 的任何重定向。`static.artswr.com`应该指向`artswr.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T03:46:45.027

检查以下行：因此，我创建（CPANEL）子域 static.artswr.com 并将其重定向到 artswr.com/wp-content/

你提到你已经重定向，但它不应该被重定向，它应该映射到 wp-content 文件夹。让我知道是否有任何意见。

# assembly - m80 宏汇编器 org 指令

> ID：13904933
> 
> 赞同：2
> 
> 时间：2012-12-16T19:52:13.583
> 
> 标签：assembly, z80, cpm

我正在使用微软古老的 m80 宏汇编器，并且有一段时间没有遇到任何重大问题。

但是，我现在尝试将 ORG 指令与十六进制数字一起使用，但它失败了。

这有效：

```
;; Tell the assembler that this is z80 code                                                                                                          
.Z80

;; Start program after zero page                                                                                                                     
ASEG
ORG     100h 
```

但是，这不起作用：

```
;; Set assembler to B00
ORG     B00h 
```

m80 声称这是一个致命错误：

```
I>A:M80 =TEST/M
%No END statement
U                                       ORG     B00h
%No END statement

1 Fatal error(s) 
```

如何将 ORG 指令与包含 9 以上数字的数字一起使用？

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T20:05:40.247

您需要一个前导零，例如`ORG 0B00h`，否则它看起来就像一个任意符号，而不是一个十六进制常量。

# ruby-on-rails - 有没有比使用正则表达式更快的方法来解析主题标签？

> ID：13904934
> 
> 赞同：3
> 
> 时间：2012-12-16T19:52:47.903
> 
> 标签：ruby-on-rails, ruby, regex, hashtag

我很好奇，除了使用正则表达式（主要在 Ruby 中）之外，是否有更快/更好的方法来解析字符串中的主题标签？

**编辑**
例如，我想解析字符串`This is a #hashtag, and this is #another one!`并获取单词`#hashtag`和`#another`. 我正在使用`#\S+`我的正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T02:28:38.697

你没有显示任何代码（你应该有）所以我们猜测你是如何使用你的正则表达式的。

`#\S+`与您需要的模式一样好，但`scan`可能是检索字符串中所有出现的最佳方式。

```
'This is a #hashtag, and this is #another one!'.scan(/#\S+/)
=> ["#hashtag,", "#another"] 
```

* * *

> 如果你不想解析逗号，它应该是 /\B#\w+/

是的我同意。[`/\B#\w+/`](https://www.regex101.com/r/mY0aH8/1)更有意义。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-16T21:25:21.970

### 也许

嗯，想法……

*   您可以尝试`s.split('#')`，然后也许只将正则表达式应用于实际的主题标签 `s.split('#').drop(1).map { |x| x[/\w+/] }`——它可能更快也可能不会更快，但它显然更丑
*   您可以编写一个提取主题标签的 C 扩展
*   您可以分析您的程序，看看它是否真的需要针对这种情况进行任何优化。

# javascript - 流星301重定向nodejs

> ID：13904937
> 
> 赞同：2
> 
> 时间：2012-12-16T19:53:02.070
> 
> 标签：javascript, node.js, meteor, http-status-code-301

如何在meteorjs中使用301将www.site.com重定向到site.com。

我通常使用 express 但我们在`meteor`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T01:03:41.030

如果你查看 packages/accounts-oauth-helper/oauth_server.js 你会发现一个如何让服务器监听 HTTP 的例子：

```
// Listen to incoming OAuth http requests
__meteor_bootstrap__.app
  .use(connect.query())
  .use(function(req, res, next) {
    // Need to create a Fiber since we're using synchronous http
    // calls and nothing else is wrapping this in a fiber
    // automatically
    Fiber(function () {
      Accounts.oauth._middleware(req, res, next);
    }).run();
  }); 
```

无需生成 Fiber 并调用 OAuth 中间件逻辑，您可以使用和 call检查`req.url`并设置 HTTP 标头，或者使用 继续进入通常的 Meteor 堆栈。`res.writeHead``res.end()``next()`

# c++ - 回调类成员

> ID：13904941
> 
> 赞同：2
> 
> 时间：2012-12-16T19:53:13.140
> 
> 标签：c++, callback

我正在尝试构建一个非常简单的调度程序。它允许将任务（功能）添加到列表中并按设定的时间间隔运行。如果我提供一个静态函数作为其“ScheduleTask”成员的参数，则“Scheduler”类可以正常工作。

```
class TestController
{
private:
    Scheduler _scheduler;

public:
    TestController(void)
    {
        _scheduler.ScheduleTask(Task1, 3000);
        _scheduler.ScheduleTask(Task2, 5000);
    }
    ~TestController(void);

    void Task1(void) { }
    void Task2(void) { }
};

struct Task
{
    long interval;
    long last_run;
    void (*TaskCallback) (void);

    Task()
    {
        last_run = 0;
    }
};

class Scheduler
{
private:
    std::vector<Task> _tasks;
public:
    Scheduler(void) { }
    ~Scheduler(void) { }

    void ScheduleTask(void (*TaskCallback) (void), long interval)
    {
        Task t;
        t.TaskCallback = TaskCallback;
        t.interval = interval;
        _tasks.push_back(t);
    }

    void loop()
    {
        for(unsigned int i = 0; i < _tasks.size(); i++)
        {
            long elapsed = clock();

            if(elapsed - _tasks[i].last_run >= _tasks[i].interval)
            {
                _tasks[i].last_run = elapsed;
                _tasks[i].TaskCallback();
            }
        }
    }

}; 
```

如何修改回调以接受已实例化的“TestController”对象上的成员？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T21:48:22.173

使用`boost::function`和的组合`boost::bind`。或者，如果您的编译器支持它们，请使用`std::function`和。`std::bind`

```
#include <boost/bind.hpp>
#include <boost/function.hpp>

#include <vector>

typedef boost::function<void()> Callback;

struct Task
{
    long interval;
    long last_run;
    Callback TaskCallback;

    Task()
    {
        last_run = 0;
    }
};

class Scheduler
{
private:
    std::vector<Task> _tasks;
public:
    Scheduler(void) { }
    ~Scheduler(void) { }

    void ScheduleTask(const Callback& TaskCallback, long interval)
    {
        Task t;
        t.TaskCallback = TaskCallback;
        t.interval = interval;
        _tasks.push_back(t);
    }

    void loop()
    {
        for(unsigned int i = 0; i < _tasks.size(); i++)
        {
            long elapsed = clock();

            if(elapsed - _tasks[i].last_run >= _tasks[i].interval)
            {
                _tasks[i].last_run = elapsed;
                _tasks[i].TaskCallback();
            }
        }
    }
};

class TestController
{
private:
    Scheduler _scheduler;

public:
    TestController(void)
    {
        _scheduler.ScheduleTask(boost::bind(&TestController::Task1,this), 3000);
        _scheduler.ScheduleTask(boost::bind(&TestController::Task2,this), 5000);
    }
    ~TestController(void);

    void Task1(void) { }
    void Task2(void) { }
}; 
```

# xaml - 旋转时登录弹出窗口不起作用

> ID：13904944
> 
> 赞同：0
> 
> 时间：2012-12-16T19:54:17.260
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

我有一个看起来像这样的代码

```
<Popup IsOpen="True" Margin="200" Height="260" Width="900">
   <Grid Height="250">
      <TextBlock Style="{StaticResource HeaderTextStyle}" Text="Login" Margin="0" HorizontalAlignment="Center" VerticalAlignment="Top" Height="50" />
      <TextBlock Style="{StaticResource ResourceKey=SubheaderTextStyle}" Text="" Margin="0,63,0,0" HorizontalAlignment="Left" VerticalAlignment="Top" />
      <TextBox Name="InputUsername" Margin="0,63,0,0" HorizontalAlignment="Right" Height="40" Width="650"/>
      <TextBlock Style="{StaticResource ResourceKey=SubheaderTextStyle}" Text="" Margin="0,138,0,0" HorizontalAlignment="Left" VerticalAlignment="Top"/>
      <PasswordBox Name="InputPassword" Margin="0,0,138,0" HorizontalAlignment="Right" VerticalAlignment="Top" Height="40" Width="650"  />
      <Button Name="Login" Content="" Margin="200,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom"  />
      <Button Name="Cancel" x:Uid="LoginPopupCancel" Content="" Margin="300,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Bottom" />
   </Grid>
</Popup> 
```

但它不起作用，当我旋转屏幕时，会出现什么问题？

**更新**

```
<Grid>
   <Grid.RowDefinitions>
      <RowDefinition Height="100" />
      <RowDefinition Height="100" />
   </Grid.RowDefinitions>
   <Grid.ColumnDefinitions>
      <ColumnDefinition Width="Auto"/>
      <ColumnDefinition Width="*"/>
   </Grid.ColumnDefinitions>
   <TextBlock Style="{StaticResource ResourceKey=SubheaderTextStyle}" Text="Brugernavn" />
   <TextBox Name="InputUsername" />
   <TextBlock Style="{StaticResource ResourceKey=SubheaderTextStyle}" Text="Adgangskode" />
   <PasswordBox Name="InputPassword" />
</Grid> 
```

我正在尝试找到一个修复程序，但这会将所有框和块设置在彼此下方，我该如何解决这个问题？
D'oh 我忘了设置 Grid.Column 和 Grid.Row

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:01:15.733

您需要为 Portrait 视图添加一个 Visual State，并在其中处理 Popup 元素的位置。

```
<VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Margin"> <!--Example-->
                        <DiscreteObjectKeyFrame KeyTime="0" Value="0,0,0,0"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState> 
```

您需要针对每个组件调整边距，使其适合并看起来不错。否则，您可以只支持横向视图，您的问题就结束了。

# c# - 尝试使用会话变量，询问给定的会话变量是否不为空

> ID：13904945
> 
> 赞同：0
> 
> 时间：2012-12-16T19:54:26.943
> 
> 标签：c#, asp.net, session-variables, code-design

正如底部描述的情况（使用Webworms而不是Mvc），

由于我可能需要“掌握” Session 变量的实现，几乎在每个 Web 应用程序中，我都构建了一个*专用*的类来帮助我轻松管理它。

方法如下

这第一个代码块是供使用的，你可以在下一个代码块看到它正在调用的类

我故意使用拼写错误的名称，以避免歧义（没有任何前缀），..这样我可以在智能感知上发现它更容易。

```
//'importing' the class for current project
using SeSn = Debug_Tests.Seseions.SeSn;

// creating an object (usually with name related to currentProject)
public static SeSn.CreatCurrentSesionVariablsStructNamed CurSesVarStruct = new Seseions.SeSn.CreatCurrentSesionVariablsStructNamed();

// the long name helps me in this little 'chaos' 
```

到目前为止，这是 a 的一个实例`struct`，即“分组”或“捆绑”所有我`globals`作为一个捆绑包，

因此，当我可能需要存储全局变量时，我会将值分配给`CurSesVarStruct`必须提供的适当结构变量。

然后，我只需要访问一次会话变量，只提取“变量集合” - `object`，......因为它实际上是一个会话变量，我保持它的名称不变 -`_CurrentSesionGlobals`

我尽力描述了背景，但简而言之：

它是作为会话变量之一存储在会话中的结构 - 数据类型 =`object` 或者您可以说要在会话之间保存的结构的克隆。

所以有了它`_CurrentSesionGlobals`，我可以通过它从会话中访问我需要的任何值，如下所示：

**在将结构存储在之前分配结构`Session`：**

```
CurSesVarStruct.SelectedUercustid = custID; 
```

然后下一个方法 -`ExtrctSesnVar()`下面，允许我使用例如：

**提取上次会话中保存的变量：**

```
custID = ExtractSesnVar().SelectedUercustid; 
```

`SelectedUercustid`实际上也是结构成员之一。

**问题**

`_CurrentSesionGlobals`从会话变量中提取。

```
public static SeSn.CreatCurrentSesionVariablsStructNamed ExtrctSesnVar()
{
    var CurrAppGlobals = SeSn.GetValueAS.ACloneOfTheStructObj("_CurrentSesionGlobals");
    return (SeSn.CreatCurrentSesionVariablsStructNamed)CurrAppGlobals;
  //the question is refereing this location.
} 
```

## **问题**

我怎么能把结果的**返回值**，`null`

或首先询问我试图提取的`object`/ a given是否不存在或不存在的条件？`Session Variable``null`

因为现在有一个*异常错误*，而我试图获取一个不存在的会话变量的值。

下一个代码块。

这是我添加到解决方案中的一个类，作为每个网站应用程序的助手。

它实际上是一个命名空间。所以负责处理会话变量的类是`Sesn`

```
 namespace Seseions
  {
        public class Sesn
        {

            public static bool isNotEmpty()
            {
                return HttpContext.Current.Session.Keys.Count > 0;
            }

            public struct CreatCurrentSesionVariablsStructNamed
            {

                // some of commonly used variables- still testing options..

                public int ManagerCustID;
                public int SelectedUercustid;
                public int recordID;
                public int SelectedMonth;
                public int SelectedChosenWorker;
                public int SelectedYear ;

                public string SelectedTable;
                public string SelectedColumn;
                public string SqlSelectCommandLastQuery;
                public string TableOfUsersReference;
                public List<string> Fontlist { get; set; }

            }

            // converts and extract values of session variables

            public class GetValueAS
            {
                public static CreatCurrentSesionVariablsStructNamed ACloneOfTheStructObj(string currntProjectSesVarStructName)
                {
                    if(HttpContext.Current.Session[currntProjectSesVarStructName] != null)
                    return (CreatCurrentSesionVariablsStructNamed)HttpContext.Current.Session[currntProjectSesVarStructName];

                }

                public static int _Int(string SesParameterValToReturn)
                {
                    return Convert.ToInt32(HttpContext.Current.Session[SesParameterValToReturn]);
                }

                public static string _String(string SesParameterValToReturn)
                {
                    return Convert.ToString(HttpContext.Current.Session[SesParameterValToReturn]);
                }
                public static DataSet _DataSet(string SesParameterValToReturn)
                {
                    return (DataSet)HttpContext.Current.Session[SesParameterValToReturn];
                }
                public static DataTable _DataTable(string SesParameterValToReturn)
                {
                    return (DataTable)HttpContext.Current.Session[SesParameterValToReturn];
                }
                public static bool _Bool(string SeSnVarToCheckOn)
                {
                    if (HttpContext.Current.Session[SeSnVarToCheckOn] == null)
                        return false;
                    return (bool)HttpContext.Current.Session[SeSnVarToCheckOn];
                }

            }

            // an easy way to access and mange session variables actions
      public enum Act
      {
                 Add, Remove, Replace
      }
            public static void Modify(Act action, string New_SesnVarName= null, object NewP_Value=null, string Currnt_Ses_SesnVarName=null)
            {
                switch (action)
                {
                    case Act.Remove:
                        if (isNotEmpty())
                            HttpContext.Current.Session.Remove(CurSes_ParamName);
                        break;
                    case Act.Replace:
                         HttpContext.Current.Session.Remove(CurSes_ParamName);
                         HttpContext.Current.Session.Add(New_SesnVarName, NewP_Value);
                        break;

                    case Act.Add:
                        HttpContext.Current.Session.Add(NewQs_SesnVarName, NewP_Value);
                        break;

                }

            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T20:56:31.237

只是不要这样做。

*   关键：不要将会话（用户）相关数据放在静态变量中。它不是线程安全的。
*   最佳实践：尽量避免`static`在 ASP.NET 中使用其他所有内容。
*   `struct`最佳实践：除了小的、不可变的和无标识的类型之外，不要使用s

看来您对此进行了过度设计。您（现在）所需要的只是为字符串使用一些常量：

```
public static class SessionKeys
{
   public const string ManagerCustID = "ManagerCustID";
   ...
} 
```

然后你就可以开始专注于为你的应用增加价值的代码了。

# python - Django Model中有很多功能，如何分离？

> ID：13904946
> 
> 赞同：1
> 
> 时间：2012-12-16T19:54:34.880
> 
> 标签：python, django

我得到了带有大量子应用程序的巨大 Django 应用程序。目前，我正在一个子应用程序中重新设计模型，所以我遇到了一个......问题。我有大量分离的丑陋功能可用于模型。基本上，它有点像：

```
def get_some_things(...):
 def postprocess(...):
  pass
 def preprocess(...):
  pass
 preprocess(...)
 x = MyModel.objects.....get(1)
 return postprocess(x, ...) 
```

而且我有很多这样的功能，真的很丑！在当前代码中使用它很丑陋（如`DatabaseAccessor.get_db().django_kitty().get_some_things(...)`）。所以，我的想法是让开发人员能够像这样使用这些功能：

```
MyModel.get_some_things(...) 
```

甚至像这样：

```
MyModel.objects.get_some_things(...) 
```

但！我有太多的功能，所以我不能在model.py中写它。所以，我有几个想法：

1.  创建 model_mymodel.py 并使用其中的所有函数和静态函数定义我的模型。但是......我不确定，我需要把它放在模型课上吗？
2.  创建 mymodel_manager.py 并为 mymodel 创建模型管理器，在此处定义函数。但是......我的一些“函数”应该只返回字典、列表甚至数字。我想知道，让模型管理器能够返回除 QuerySet 之外的东西在意识形态上是错误的吗？
3.  重写`__getattr__`MyModel 类并动态加载模块等`functions_common.py`，`functions_things.py`将收集的函数存储到字典中并需要调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T20:24:29.650

如果您的模型需要许多独特的方法，那么拥有庞大的模型定义就是您要付出的代价。如果出于某种原因您确实想将功能拆分到其他文件（或者，对于一些实际有用的东西，共享通用功能），您可以使用 mixin 方法：

```
#mymodel.py
class MyModelMixin:
    def django_kitty(self, ...):
        pass
    def postprocess(self, ...):
        pass
    def preprocess(self, ...):
        pass

#models.py
from mymodel import MyModelMixin

class MyModel(models.Model, MyModelMixin):
    pass 
```

关于你自己的建议：

1 - 如果您想要每个模型单独的文件，您可以使用这种方法：

```
myapp/
    models/
        __init__.py
            from mymodel import MyModel
        mymodel.py 
```

请注意，您需要为每个模型显式设置 app_label：

```
#mymodel.py
class MyModel(models.Model):
    ...
    class Meta:
        app_label = 'myapp' 
```

2 - 管理器方法的返回值类型无关紧要。管理器和模型的区别点是分别将*表*和*行*级功能分开。

3 - 听起来像是不必要的魔法，压倒一切`Model.__getattr__`是一项痛苦的任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T20:21:39.207

听起来选项2是要走的路。

[模型管理器方法不返回 QuerySet](https://docs.djangoproject.com/en/dev/ref/models/querysets/#methods-that-do-not-return-querysets)没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T17:30:40.430

我用于模型函数与模型管理器的指导原则是：只要目标是作用于单个模型对象，我就会定期在模型上使用方法函数。但是，如果我的用例需要我处理模型的多个对象并满足我的 DRY 激励，我会为此使用模型管理器。

# c - 如何使用clock_gettime 制作精确的倒数计时器？

> ID：13904955
> 
> 赞同：0
> 
> 时间：2012-12-16T19:20:09.163
> 
> 标签：c, linux, time

有人可以解释一下如何在Linux下使用clock_gettime制作倒数计时器。我知道您可以使用 clock() 函数来获取 cpu 时间，并将其乘以 CLOCKS_PER_SEC 以获得实际时间，但有人告诉我 clock() 函数不太适合这个。

到目前为止，我已经尝试过这个（十亿是暂停一秒钟）

```
#include <stdio.h>
#include <time.h>

#define BILLION 1000000000

int main()
{
 struct timespec rawtime;
 clock_gettime(CLOCK_MONOTONIC_RAW, &rawtime);
 unsigned long int current =  ( rawtime.tv_sec + rawtime.tv_nsec );
 unsigned long int end =  (( rawtime.tv_sec + rawtime.tv_nsec ) + BILLION );
 while ( current < end )
 {
  clock_gettime(CLOCK_MONOTONIC_RAW, &rawtime);
  current =  ( rawtime.tv_sec + rawtime.tv_nsec );
 }

 return 0;
} 
```

我知道这本身不会很有用，但是一旦我发现了如何正确计时，我就可以在我的项目中使用它。我知道 sleep() 可以用于此目的，但我想自己编写计时器，以便我可以更好地将它集成到我的项目中 - 例如它返回剩余时间的可能性，而不是暂停整个程序.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-16T20:53:21.323

请不要那样做。您在[忙碌的循环](http://en.wikipedia.org/wiki/Busy_waiting)中白白消耗 CPU 电源。

为什么不使用该[`nanosleep()`](http://www.kernel.org/doc/man-pages/online/pages/man2/nanosleep.2.html)功能呢？它非常适合您概述的用例。或者，如果您想要一个更简单的界面，也许像

```
#define _POSIX_C_SOURCE 200809L
#include <time.h>
#include <errno.h>

/* Sleep for the specified number of seconds,
 * and return the time left over.
*/
double dsleep(const double seconds)
{
    struct timespec  req, rem;

    /* No sleep? */
    if (seconds <= 0.0)
        return 0.0;

    /* Convert to seconds and nanoseconds. */
    req.tv_sec = (time_t)seconds;
    req.tv_nsec = (long)((seconds - (double)req.tv_sec) * 1000000000.0);

    /* Take care of any rounding errors. */
    if (req.tv_nsec < 0L)
        req.tv_nsec = 0L;
    else
    if (req.tv_nsec > 999999999L)
        req.tv_nsec = 999999999L;

    /* Do the nanosleep. */
    if (nanosleep(&req, &rem) != -1)
        return 0.0;

    /* Error? */
    if (errno != EINTR)
        return 0.0;

    /* Return remainder. */
    return (double)rem.tv_sec + (double)rem.tv_nsec / 1000000000.0;
} 
```

不同之处在于，使用这个 CPU 可以自由地做其他事情，而不是像发疯的松鼠一样在速度上旋转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:19:15.633

这不是答案，而是如何使用信号和 POSIX 计时器来实现超时计时器的示例；旨在作为对已接受答案的评论中对 OP 后续问题的回应。

```
#define _POSIX_C_SOURCE 200809L
#include <stdlib.h>
#include <signal.h>
#include <time.h>
#include <errno.h>
#include <string.h>
#include <stdio.h>

/* Timeout timer.
*/
static timer_t                  timeout_timer;
static volatile sig_atomic_t    timeout_state = 0;
static volatile sig_atomic_t    timeout_armed = 2;
static const int                timeout_signo = SIGALRM;

#define TIMEDOUT() (timeout_state != 0)

/* Timeout signal handler.
*/
static void timeout_handler(int signo, siginfo_t *info, void *context __attribute__((unused)))
{
    if (timeout_armed == 1)
        if (signo == timeout_signo && info && info->si_code == SI_TIMER)
            timeout_state = ~0;
}

/* Unset timeout.
 * Returns nonzero if timeout had expired, zero otherwise.
*/
static int timeout_unset(void)
{
    struct itimerspec   t;   
    const int           retval = timeout_state;

    /* Not armed? */
    if (timeout_armed != 1)
        return retval;

    /* Disarm. */
    t.it_value.tv_sec = 0;
    t.it_value.tv_nsec = 0;
    t.it_interval.tv_sec = 0;
    t.it_interval.tv_nsec = 0;
    timer_settime(timeout_timer, 0, &t, NULL);

    return retval;
}

/* Set timeout (in wall clock seconds).
 * Cancels any pending timeouts.
*/
static int timeout_set(const double seconds)
{
    struct itimerspec  t;

    /* Uninitialized yet? */
    if (timeout_armed == 2) {
        struct sigaction    act;
        struct sigevent     evt;

        /* Use timeout_handler() for timeout_signo signal. */
        sigemptyset(&act.sa_mask);
        act.sa_sigaction = timeout_handler;
        act.sa_flags = SA_SIGINFO;

        if (sigaction(timeout_signo, &act, NULL) == -1)
            return errno;

        /* Create a monotonic timer, delivering timeout_signo signal. */
        evt.sigev_value.sival_ptr = NULL;
        evt.sigev_signo = timeout_signo;
        evt.sigev_notify = SIGEV_SIGNAL;

        if (timer_create(CLOCK_MONOTONIC, &evt, &timeout_timer) == -1)
            return errno;

        /* Timeout is initialzied but unarmed. */
        timeout_armed = 0;
    }

    /* Disarm timer, if armed. */
    if (timeout_armed == 1) {

        /* Set zero timeout, disarming the timer. */
        t.it_value.tv_sec = 0;
        t.it_value.tv_nsec = 0;
        t.it_interval.tv_sec = 0;
        t.it_interval.tv_nsec = 0;

        if (timer_settime(timeout_timer, 0, &t, NULL) == -1)
            return errno;

        timeout_armed = 0;
    }

    /* Clear timeout state. It should be safe (no pending signals). */
    timeout_state = 0;

    /* Invalid timeout? */
    if (seconds <= 0.0)
        return errno = EINVAL;

    /* Set new timeout. Check for underflow/overflow. */
    t.it_value.tv_sec = (time_t)seconds;
    t.it_value.tv_nsec = (long)((seconds - (double)t.it_value.tv_sec) * 1000000000.0);
    if (t.it_value.tv_nsec < 0L)
        t.it_value.tv_nsec = 0L;
    else
    if (t.it_value.tv_nsec > 999999999L)
        t.it_value.tv_nsec = 999999999L;

    /* Set it repeat once every millisecond, just in case the initial
     * interrupt is missed. */
    t.it_interval.tv_sec = 0;
    t.it_interval.tv_nsec = 1000000L;

    if (timer_settime(timeout_timer, 0, &t, NULL) == -1)
        return errno;

    timeout_armed = 1;

    return 0;
}

int main(void)
{
    char    *line = NULL;
    size_t   size = 0;
    ssize_t  len;

    fprintf(stderr, "Please supply input. The program will exit automatically if\n");
    fprintf(stderr, "it takes more than five seconds for the next line to arrive.\n");
    fflush(stderr);

    while (1) {

        if (timeout_set(5.0)) {
            const char *const errmsg = strerror(errno);
            fprintf(stderr, "Cannot set timeout: %s.\n", errmsg);
            return 1;
        }

        len = getline(&line, &size, stdin);
        if (len == (ssize_t)-1)
            break;

        if (len < (ssize_t)1) {
            /* This should never occur (except for -1, of course). */
            errno = EIO;
            break;
        }

        /* We do not want *output* to be interrupted,
         * so we cancel the timeout. */
        timeout_unset();

        if (fwrite(line, (size_t)len, 1, stdout) != 1) {
            fprintf(stderr, "Error writing to standard output.\n");
            fflush(stderr);
            return 1;
        }
        fflush(stdout);

        /* Next line. */
    }

    /* Remember to cancel the timeout. Also check it. */
    if (timeout_unset())
        fprintf(stderr, "Timed out.\n");
    else
    if (ferror(stdin) || !feof(stdin))
        fprintf(stderr, "Error reading standard input.\n");
    else
        fprintf(stderr, "End of input.\n");

    fflush(stderr);

    /* Free line buffer. */
    free(line);
    line = NULL;
    size = 0;

    /* Done. */
    return 0;
} 
```

如果您将以上内容另存为`timer.c`，则可以使用例如编译它

```
gcc -W -Wall -O3 -std=c99 -pedantic timer.c -lrt -o timer 
```

并使用`./timer`.

如果你仔细阅读上面的代码，你会发现它实际上是一个周期性的定时器信号（以毫秒为间隔），在第一个信号之前有一个可变的延迟。这只是我喜欢用来确保不会错过信号的一种技术。（信号重复，直到未设置超时。）

请注意，尽管您可以在信号处理程序中进行计算，但您应该只使用*异步信号安全的*函数；见[man 7 信号](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)。此外，只有`sig_atomic_t`类型是 atomic wrt。普通的单线程代码和信号处理程序。因此，最好只使用信号作为指标，并在自己的程序中编写实际代码。

例如，如果您想在信号处理程序中更新怪物坐标，这是可能的，但有点棘手。我将使用三个包含怪物信息`__sync_bool_compare_and_swap()`的数组，并使用 GCC 来更新数组指针——与图形中的三重缓冲技术非常相似。

如果您需要多个并发超时，您可以使用多个计时器（有许多可用的），但最好的选择是定义超时槽。（您可以使用生成计数器来检测“被遗忘的”超时，等等。）每当设置或取消设置新的超时时，您都会更新超时以反映下一个到期的超时。它的代码有点多，但实际上是上述代码的直接扩展。

# ajax - 阿贾克斯 - 不！# 之后 - 爬虫会读到这个吗？

> ID：13904958
> 
> 赞同：0
> 
> 时间：2012-12-16T19:55:53.673
> 
> 标签：ajax, seo

我创建了一个站点 - 所有请求都通过 AJAX 发送到服务器，但是没有！afer # 所以它不会被 ?_escaped_fragment_ 上的爬虫更改。每次您单击我网站上的链接时，您所做的只是在# 之后更改名称。然后向服务器发送请求 - php 正在向 mysql 查询数据，然后带有该数据的 json 返回 - 它被识别并且内容（DOM和文本）发生变化。

简而言之 - 所有链接都只要求来自 mysql 的数据。没有html什么的

您可以添加此链接，它可以工作。你可以前进和后退它的工作原理。

问题：

爬虫会索引我的链接和来自它的 json 数据吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T23:03:23.427

内容 AJAX 未为 google 编制索引。如果要添加一些静态内容，则必须添加标签 < noscript > 并将被爬虫索引。

当您评论时，有更优雅的解决方案，例如 twitter 那样构建 ajax 链接。

无论如何，您将需要参数！# 如果你想让爬虫翻译 url 之后。

例如，如果您点击我的下一个链接，您将看到我的推特页面，但请查看链接中的参数： [https ://twitter.com/#!MuSTa1nE](https://twitter.com/#!MuSTa1nE)

对于爬虫，翻译为： http: [//twitter.com/?_escaped_fragment _=/MuSTa1nE](http://twitter.com/?_escaped_fragment_=/MuSTa1nE)

你不希望谷歌索引丑陋的 url，所以记得做一个 301 重定向。

查看下一个内容： [http ://www.seomoz.org/blog/how-to-allow-google-to-crawl-ajax-content](http://www.seomoz.org/blog/how-to-allow-google-to-crawl-ajax-content)

期待它会有所帮助。

# android - 如何使用具有不同颜色的命令和响应字符串的 EditText 构建显示？

> ID：13904959
> 
> 赞同：0
> 
> 时间：2012-12-16T19:56:01.987
> 
> 标签：android, android-edittext, spannablestring

我正在尝试实现一个类似超文本的应用程序，这样我就可以通过 USB 使用平板电脑与 PIC 系统对话。我的概念是有一个片段显示两个 EditText 视图，一个允许在平板电脑上编写和编辑命令，另一个用于保持两个方向的所有流量。

我已经将组合字符串排序并添加到流量视图中。但是，我希望能够以与 PIC 生成的回复不同的颜色显示平板电脑生成的字符串。我尝试了许多 setSpan 的组合和排列，但没有运气 - 有什么想法吗？我也对达到同样目的的其他方式持开放态度。

我正在使用的 Java 代码是：

```
package durdle.bruce.fragment_trial;

import android.app.Fragment;
import android.os.Bundle;
import android.text.Spannable;
import android.text.SpannableStringBuilder;
import android.text.style.ForegroundColorSpan;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.TextView;

public class PanelFragment extends Fragment implements OnKeyListener
{
    private final String TAG = "Panel Fragment:- ";
    EditText cmdLine;
    EditText traffic_panel;
    int lineCount = 0;
    CharSequence cs;
    CharSequence nextLine;
    SpannableStringBuilder cmdString;
    SpannableStringBuilder traffic;
    SpannableStringBuilder ss;
    ForegroundColorSpan cmdTextColor;
    ForegroundColorSpan trafTextColor;
    String cntString;
    char newLine = '\n';

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) 
    {
        View view = inflater.inflate(R.layout.textfragment,container, false);
        cmdLine = (EditText) view.findViewById(R.id.enterCmd);
        cmdLine.setOnKeyListener(this);
        cmdTextColor = new ForegroundColorSpan(0x0000FF);
        trafTextColor = new ForegroundColorSpan(0xFF0000);
        traffic = new SpannableStringBuilder();
        return view;
    }  

    public boolean onKey(View v, int keyCode, KeyEvent event) 
    {
        if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER))
        {
            traffic_panel = (EditText) getView().findViewById(R.id.detailsText);

            cmdString = (SpannableStringBuilder) cmdLine.getText();
            Log.d(TAG,"ENTER pressed " + cmdString);

            cs = String.valueOf(lineCount) + "-" + '\n';
            ss = new SpannableStringBuilder(cs);
            ss.setSpan(trafTextColor,0,ss.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            traffic = traffic.append(ss);

            cmdString.setSpan(cmdTextColor,0,cmdString.length(),Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
            nextLine = cmdString.append(newLine);
            traffic = traffic.append(nextLine);

            Log.d(TAG, "traffic string = " + traffic);
            ((TextView) traffic_panel).setText(traffic);
            cmdLine.setText("");
            lineCount++;
        }
        return false;
    }
} 
```

使用 Html.fromHtml 的工作代码是：

```
package durdle.bruce.fragment_trial;

import android.app.Fragment;
import android.os.Bundle;
import android.text.Html;
import android.text.SpannableStringBuilder;
import android.text.style.ForegroundColorSpan;
import android.util.Log;
import android.view.KeyEvent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnKeyListener;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.TextView;

public class PanelFragment extends Fragment implements OnKeyListener
{
private final String TAG = "Panel Fragment:- ";
EditText cmdLine;
TextView traffic_panel;
int lineCount = 0;
int oldTrafficLength;
int newTrafficLength;
CharSequence cs;
CharSequence nextLine;
SpannableStringBuilder cmdString;
SpannableStringBuilder traffic;
SpannableStringBuilder ss;
ForegroundColorSpan cmdTextColor;
ForegroundColorSpan trafTextColor;
String cntString;
char newLine = '\n';

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
  Bundle savedInstanceState) 
{
    View view = inflater.inflate(R.layout.textfragment,container, false);
    cmdLine = (EditText) view.findViewById(R.id.enterCmd);
    cmdLine.setOnKeyListener(this);
    cmdTextColor = new ForegroundColorSpan(0xFF0000);
    trafTextColor = new ForegroundColorSpan(0x0000FF);
    traffic = new SpannableStringBuilder();
    return view;
}  

public boolean onKey(View v, int keyCode, KeyEvent event) 
{
    if ((event.getAction() == KeyEvent.ACTION_DOWN) &&
            (keyCode == KeyEvent.KEYCODE_ENTER))
    {
        traffic_panel = (TextView) getView().findViewById(R.id.detailsText);

        cmdString = (SpannableStringBuilder) cmdLine.getText();
        Log.d(TAG,"ENTER pressed " + cmdString);
        cmdString = cmdString.append(newLine);

        lineCount++;
        cs = String.valueOf(lineCount) + "-" + '\n';
        traffic = traffic.append(Html.fromHtml("<font color=\"blue\">" + cs + "</font>"));
        traffic = traffic.append('\n');

        traffic = traffic.append(Html.fromHtml("<font color=\"red\">" + cmdString + "</font>"));
        traffic.append('\n');

        ((TextView) traffic_panel).setText(traffic);
        cmdLine.setText("");
    }
    return false;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:08:50.977

您可以使用 HTML`font`标记并使用[Html.fromHtml](https://developer.android.com/reference/android/text/Html.html#fromHtml)。

做就是了：

```
TextView tv;
tv.setText(Html.fromHtml("<font color=\"red\">" + string + "</font>")); 
```

这是一个带有支持的标签的[链接](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)`Html.fromHtml`

# php - codeigniter 从控制器传递数组以查看未定义的索引错误

> ID：13904960
> 
> 赞同：0
> 
> 时间：2012-12-16T19:56:02.410
> 
> 标签：php, codeigniter

在这一行之后将数组传递给视图工作正常：`foreach($rb_data as $row){<table>}?>`但在我`<body>`上面的表格中我无法使用`<h1><?php echo $rb_data['brand'];?></h1>` 我收到的错误是`Message: Undefined index: brand`. 我尝试`$data = array()`在控制器中使用初始化数组，但这没有奏效。是否有其他方法可以初始化数组，以便在`foreach`语句之前使用它？谢谢你看看。控制器：

```
 public function community_single($rb){
        $data['rb_data'] =  $this->rootbeer_model->community_single($rb);
        $this->load->view('rb_community_single_view',$data);

    } 
```

模型：

```
 public function community_single($rb){

        $this->rb_db->select('*');
        $this->rb_db->from('rb_selection');
        $this->rb_db->where('brand',$rb);
        $query = $this->rb_db->get();
        return $query->result_array();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T22:50:14.923

我记得我用`row_array()`的是单次通话。CodeIgniter 有一个比 Windows 更好的文档。`result_array()`如果你注意的话，会在循环中使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T07:17:11.473

您`$this->rootbeer_model->community_single($rb);` 将返回一个像这样的数组，即`rb_data=[[id=>1,value=>'a'],[id=>2,value=>'b'],[id=>3,value=>'c']]`

所以首先你需要使用这个函数来获取你想要的行，

```
1\. foreach($rb_data as $row){<table>}?>

2\. $row = $rb_data->first_row()
   $row = $rb_data->last_row()
   $row = $rb_data->next_row()
   $row = $rb_data->previous_row()

3.$row = $rb_data->row(5); 
```

然后你可以访问`$row['band']'

```
`$rb_data` doesn't contains an index like `band` . `$rb_data` contains only rows 
```

# eclipse - 使用变量的 Eclipse Java 项目构建路径

> ID：13904970
> 
> 赞同：14
> 
> 时间：2012-12-16T19:57:44.343
> 
> 标签：eclipse

我正在开发一个 Eclipse Java 项目，并希望使用“变量”来指向所需的库（.jar 文件）。

设置：

*   机器 1：Eclipse Juno，OS X，自己的笔记本电脑，libs 下`/mylibs`
*   机器2：Eclipse Juno，Linux，共享机，libs下`/sharedlibs/some/complex/path`

源代码控制： Mercurial

我使用的库示例：

*   “${libs_base}/junit.jar”
*   “${libs_base}/guava.jar”
*   “${libs_base}/logging/slf4j.jar”

如何将项目配置为对库的**基**`Build Path`目录使用相同的“变量” ，指向不同机器上的不同位置，但仍将项目描述签入源代码管理，以便在添加新库时，只要我指定它相对于库库的位置**，**在两台机器上都可以找到？

 ****我找到了帮助文件，但可以使用一个示例，甚至可以使用屏幕截图吗？

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcpathvars.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fcpathvars.htm)

例如，我是否复制此模型：

[http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.user%2Fconcepts%2Fconcepts-exttools.htm)

在“Java > 构建路径 > 类路径变量”或其他地方？

我已经做了相当多的“盲目试验和错误”......就像在那里拼接像“$ {env：VAR}”这样的表格......

哦，我想我应该提一下，考虑到我的系统的环境变量是由 Bash 设置的，我不知道如何根据环境变量设置这些 Eclipse 变量，`.profile`而且我怀疑 Eclipse 之前运行了一个 shell 来获取它......

```
/org.eclipse.jdt.core/org.eclipse.jdt.core.classpathVariable.my_libraries=$MY_SYS_ENV_VAR_LIBS 
```

当然，我使用“配置构建路径 > 库 > 添加变量”，然后从那里扩展，但仍然......一个例子值得 1000 字`Extend`。包含在构建路径中的 jar 引用不能基于*系统*环境变量，句号？！）

PS：请不要让我只是符号链接周围的东西，我不是共享机器上的系统管理员..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:00:01.460

据我了解，扩展路径变量非常适合您的情况，因为您可以为每台机器定义不同的基本路径，并基于该路径在子路径上引用库。但是，如果您正在寻找专门使用环境变量，您可以尝试以这种方式将它们添加到构建路径中：

1.  编辑您的启动配置。
2.  转到**类路径**选项卡。
3.  单击**用户条目**，然后单击**高级**按钮。
4.  要添加基于系统环境变量的库，请选择**Add Variable String**，然后在框中键入： `${env_var:libs_base}/logging/slf4j.jar`。在这种情况下 `libs_base`，是您的环境变量，并且`logging/slf4j.jar`是子目录中 jar 的路径。****

# streaming - 使用 gstreamer 组合音频和视频流

> ID：13904975
> 
> 赞同：7
> 
> 时间：2012-12-16T19:58:31.350
> 
> 标签：streaming, video-streaming, gstreamer, rtp, audio-video-sync

我正在使用 gstreamer over RTP 流将 mp4(mpeg-4) 文件从一个设备流式传输到另一个设备。基本上，我将 mp4 文件拆分为其音频和视频文件，然后将其全部发送到流式传输的其他设备。现在，我想将 mp4 文件保存到另一台设备的磁盘中，但我的问题是我可以单独保存音频和视频文件，并且无法单独播放。

我对如何组合音频和视频 rtp 流以形成我的 mp4 文件并将其保存到另一个设备中的文件感到困惑。

以下是命令行代码：

**发件人（服务器）**

```
gst-launch-0.10 -v filesrc location=/home/kuber/Desktop/sample.mp4 \
             ! qtdemux name=d \
             ! queue \
             ! rtpmp4vpay \
             ! udpsink port=5000 \
             d. \
             ! queue \
             ! rtpmp4gpay \
             ! udpsink port=5002 
```

**收货人（客户）**

```
gst-launch-0.10 udpsrc port=5000 caps = "application/x-rtp, media=(string)video, clock-rate=(int)90000, encoding-name=(string)MP4V-ES, profile-level-id=(string)243, config=(string)000001b0f3000001b50ee040c0cf0000010000000120008440fa282fa0f0a21f, payload=(int)96, ssrc=(uint)4291479415, clock-base=(uint)4002140493, seqnum-base=(uint)57180" \
             ! rtpmp4vdepay \
             ! ffdec_mpeg4 \
             ! xvimagesink sync=false \
             udpsrc port=5002 caps="application/x-rtp, media=(string)audio, clock-rate=(int)32000, encoding-name=(string)MPEG4-GENERIC, encoding-params=(string)2, streamtype=(string)5, profile-level-id=(string)2, mode=(string)AAC-hbr, config=(string)1290, sizelength=(string)13, indexlength=(string)3, indexdeltalength=(string)3, payload=(int)96, ssrc=(uint)501975200, clock-base=(uint)4248495069, seqnum-base=(uint)37039"\
             ! rtpmp4gdepay \
             ! faad \
             ! alsasink sync=false 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T12:44:04.763

您可以尝试以下管道将音频和视频混合到一个文件中。管道如下：

```
gst-launch-0.10 udpsrc port=5000 caps = "application/x-rtp, media=(string)video, clock-rate=(int)90000, encoding-name=(string)MP4V-ES, profile-level-id=(string)243, config=(string)000001b0f3000001b50ee040c0cf0000010000000120008440fa282fa0f0a21f, payload=(int)96, ssrc=(uint)4291479415, clock-base=(uint)4002140493, seqnum-base=(uint)57180" \
             ! rtpmp4vdepay \
             ! ffdec_mpeg4 \
             ! mux. \
         udpsrc port=5002 caps="application/x-rtp, media=(string)audio, clock-rate=(int)32000, encoding-name=(string)MPEG4-GENERIC, encoding-params=(string)2, streamtype=(string)5, profile-level-id=(string)2, mode=(string)AAC-hbr, config=(string)1290, sizelength=(string)13, indexlength=(string)3, indexdeltalength=(string)3, payload=(int)96, ssrc=(uint)501975200, clock-base=(uint)4248495069, seqnum-base=(uint)37039"\
             ! rtpmp4gdepay \
             ! faad \
             ! mux. 
         matroskamux name=mux 
             ! filesink location=video.mp4 
```

# css - 我该如何放置 在另一个里面 以便背景与两侧齐平并且包含我的文字

> ID：13904977
> 
> 赞同：0
> 
> 时间：2012-12-16T19:58:42.927
> 
> 标签：css

我想将一个 div 嵌套在另一个 div 中，以便外部 div 与内部 div 一起增长，因为内部 div 中放置了文本。将不胜感激任何帮助。[这是一个链接](http://www.hnw7.com)，所以你明白了。您需要将浏览器打开至全屏才能正确查看其底部。

您好 Slalvenko， 已经发布了您的代码（谢谢）和我的代码，我知道这些代码并不完美，但我正在学习。是的，我知道将浏览器默认值设置为 0 的 css 重置样式，并且我确实下载了一次。但我希望在几年后我能意识到这一切并将其写入我的代码中。我想重置可以节省时间和麻烦，但我很享受围绕这一切对我来说都是新的东西。这是你的代码和我的代码。我的略有不同，因为我想稍后再添加两个 div，我会在到达那里时向您展示。迈克 [http://www.hnw7.com](http://www.hnw7.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:42:18.450

```
.outer {

    background-color: #CCF;
    margin-top: 0px;
    right: 0px;
    margin-right: 0px;
    bottom: 0px;
    margin-bottom: 0px;       
}

.inner {
    width: 535px;
    background-color: #E6E6FF;
    color: black;        
    padding: 20px 50px 20px 50px;
    overflow: hidden;
    margin: 0 auto;
} 
```

我不确定这是否是你的问题，但试试这个。.inner div 中的浮动使父级的高度为 0，因为浮动从文档流中获取这些元素。如果您希望您的父母有实际高度，您需要清除这些浮动。我发现最简单的方法是添加`overflow:hidden;`到父元素。

[您可以在此处](http://css-tricks.com/the-how-and-why-of-clearing-floats/)阅读有关清除浮动的信息

# mysql - Mysql - 从多行替换为一行

> ID：13904980
> 
> 赞同：0
> 
> 时间：2012-12-16T19:59:11.550
> 
> 标签：mysql, join, replace, group-by

我有一个问题，我不知道如何解决。

为了简化我的问题，有一个带有链接的表格：

```
    fk linkid 链接
    1 1 www.stackoverflow.com
    1 2 www.google.com
    1 3 www.cnn.com
    2 4 www.other.com

```

然后我有另一个带有字符串列的表，用户可以在其中插入这些键，然后它应该替换它们。你输入一个像 L{a number} 这样的键，比如 L1。然后应将“L1”替换为 linkid 1 ..

```
    id 字符串列
    1 “嗨，我的第一个链接是 {L1]。更多文字 {L1} {L1} {L3} {L2}”
    2“到这里：{L4}”

```

所以当我加入他们的 id 1 时，我得到了这个：

```
    id linkid 链接 string_column
    1 1 www.stackoverflow.com “嗨，我的第一个链接是 {L1]。更多文字 {L1} {L1} {L3} {L2}”
    1 2 www.google.com “嗨，我的第一个链接是 {L1]。更多文字 {L1} {L1} {L3} {L2}”
    1 3 www.cnn.com “嗨，我的第一个链接是 {L1]。更多文字 {L1} {L1} {L3} {L2}”

```

我想得到的是：

```
    id 字符串列
    1 “嗨，我的第一个链接是 www.stackoverflow.com。更多文字 www.stackoverflow.com www.stackoverflow.com www.cnn.com www.google.com”

```

在mysql中可以写出这样的sql吗？正如您在上面看到的，我需要对 1 列进行替换，但从多行获取值，然后每个 id 只返回 1 个。

由于系统已经是它的方式，我无法更改设置，但只需要找到一种方法来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T20:03:45.300

我认为这样做的唯一方法是编写一个脚本，在其中取出所有句子，从 L 中删除数字，搜索相应的链接并用该链接替换所有 {L1}。然后你用新的字符串更新数据库。

# asp.net - ASP.NET MVC 4 LINQ 加入 -> 查看

> ID：13904981
> 
> 赞同：0
> 
> 时间：2012-12-16T19:59:50.100
> 
> 标签：asp.net, asp.net-mvc-4

我知道这很简单，但我想不通:(

我收到此错误：

传入字典的模型项的类型为“System.Collections.Generic.List `1[<>f__AnonymousType3`5[System.String,System.String,System.String,System.Nullable `1[System.DateTime],System.String]]', but this dictionary requires a model item of type 'System.Collections.Generic.IEnumerable`1[MvcApplication3.Order]”。

这是我的控制器的代码：

```
 var query = from o in db.Orders
                join c in db.Customers on o.CustomerID equals c.CustomerID
                where o.CustomerID == q
                select new
                {
                    o.CustomerID,
                    o.ShipAddress,
                    o.ShipCity,
                    o.ShippedDate,
                    c.ContactName
                };

    /*
    var query = from o in db.Orders
                where o.CustomerID == q
                select o;
    */
    return View(query.ToList()); 
```

这是我的看法：

```
@model IEnumerable<MvcApplication3.Order>

@{
    ViewBag.Title = "Search";
}

<h2>Search</h2>
Your search results contains @Model.Count() rows

<table>
    <tr>
        <td>Customer ID</td>
        <td>Address</td>
        <td>City</td>
        <td>Shipped to Date</td>
    </tr>
@foreach (var item in Model)
{
    <tr>
        <td>@item.CustomerID</td>
        <td>@item.ShipAddress</td>
        <td>@item.ShipCity</td>
        <td>@item.ShippedDate</td>
        <td>@item.Customer.ContactName</td>

    </tr>
}
</table> 
```

我假设它与 View 的设置方式有关。如果我删除 return View() 并仅循环来自控制器的数据，我会得到我期望的结果。任何帮助将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:03:21.977

**编辑：**

试试这个：

```
select new Order()
                    {
                        CustomerId = o.CustomerID,
                        ShipAddress = o.ShipAddress,
                        ShipCity = o.ShipCity,
                        ShippedDate = o.ShippedDate,
                        Customer = new Customer()
                              {
                                 ContactName = c.ContactName
                              }
                    }; 
```

你没有指定型号。您创建了一个`List`匿名对象，并且视图需要一个`IEnumerable<Order>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-26T09:27:38.843

你也可以像这样尝试。

```
var query = (from o in db.Orders
                join c in db.Customers on o.CustomerID equals c.CustomerID
                where o.CustomerID == q
                select c); 
```

并鉴于您可以将其更改为

> @model IEnumerable < MvcApplication3.Customers >

# solr - Solr分层方面：如何获取前N个一级值的所有二级值

> ID：13904982
> 
> 赞同：5
> 
> 时间：2012-12-16T19:59:52.987
> 
> 标签：solr, faceted-search

我有一对多值索引字段，author 和 author_norm，并且我使用[https://wiki.apache.org/solr/HierarchicalFaceting#Indexed_Terms](https://wiki.apache.org/solr/HierarchicalFaceting#Indexed_Terms)中描述的模式为它们创建了一个分层方面字段。构面值如下所示：

```
0/Blow, J
1/Blow, J/Blow, Joe
1/Blow, J/Blow, Joseph
1/Blow, J/Blow, Jennifer
0/Smith, M
1/Smith, M/Smith, Michelle
1/Smith, M/Smith, Michael
1/Smith, M/Smith, Mike 
```

作者与文章记录相关联，在大多数情况下，一篇文章会有很多作者。这意味着对于返回 100 多篇文章的 Solr 查询，可能会有 1000 多位作者代表。

我的问题是，当我向用户显示此层次结构时，由于我的 facet.limit 和 facet.mincount 设置为正常值，我没有完整的第二级值集，即第二级我的等级制度将在某一点被切断。我会有这样的事情：

*   吹，J (30)
    *   吹，乔 (17)
    *   约瑟夫·布劳 (9)
*   史密斯，米 (22)
    *   米歇尔·史密斯 (14)
    *   迈克尔·史密斯 (6)

我还想在此列表中包含“Blow, Jennifer (4)”和“Smith, Mike (2)”条目，但由于 mincount 截止值为 5，因此它们没有在响应中返回。所以我最终得到了令人困惑的显示（17 + 9 ！= 30 等）。

一种选择是在每个二级列表的底部放置一个小“（更多）”链接，并通过 ajax 获取完整集。我对这个解决方案并不感到疯狂，因为它要求用户工作/点击的次数超出了他们真正应该做的，还因为我无法控制初始 2 级列表的长度；有时它会是 3 个名字 +“（更多）”，有时是 2 个甚至 1 个。这太丑了。

我可以为我的分层构面字段设置 mincount=1 和 limit=-1，但这太疯狂了，因为对于大型查询（100k 次点击），我将获取 100k+ 的值，我不需要。我只需要前 N 个 1 级值的完整的 2 级值集。

因此，除非有人有更好的建议，否则我假设我需要进行某种后续查询。所以毕竟，这就是我真正要问的：有没有办法在单个后续查询中获取这些 2 级值。给定一个初始的 solr 响应，我如何才能获得我的层次结构的前 N ​​个 1 级值的所有 2 级排列？

谢谢！

PS，我正在使用 Solr 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T21:48:09.347

您可以修改枢轴中任何级别的 mincount：

```
facet.pivot=fieldA,filedB&f.fieldA.limit=3&f.fieldB.limit=-1 
```

当两个字段相同时，问题就开始了，`facet.pivot=fieldA,filedA`在这种情况下，我可能会创建一个 fieldA 的副本作为 fieldB

# php - POST 搜索中有多个变量？

> ID：13904992
> 
> 赞同：0
> 
> 时间：2012-12-16T20:01:55.020
> 
> 标签：php, jquery, mysql

我正在尝试使用多个条件进行 Jquery Ajax 搜索，这是我的第一次。我做了一些研究并找到了将数据发送到 php 文件的方法，但是它只有一个变量。我不确定如何将我的所有 6 个变量实现到`data: data`.

他们来了：

```
var FromDate
var ToDate
var MusicStyles
var Locations
var FromPrice
var ToPrice 
```

现在这是我卡住的地方，我应该用一些数据做一个帖子。当我有多个变量时，我可以这样做`data: dataFromDate, dataToDate, dataMusicStyles,`吗？

```
$("#SearchButton").click(function() {

var dataFromDate            = 'dataFromDate='+ FromDate;
var dataToDate              = 'dataToDate='+ ToDate;
var dataMusicStyles         = 'dataMusicStyles='+ MusicStyles;
var dataLocations           = 'dataLocations='+ Locations;
var dataFromPrice           = 'dataFromPrice='+ FromPrice;
var dataToPrice             = 'dataToPrice='+ ToPrice;

            $.ajax({
                type: "POST",
                url: "do_search.php",
                data: dataFromDate, dataToDate, dataMusicStyles, dataLocations, dataFromPrice, dataToPrice,
                beforeSend: function(html) { // this happens before actual call
                    $("#results").html('');
                    $("#searchresults").show();
                    $(".word").html(searchString);
               },
               success: function(html){ // this happens after we get results
                    $("#results").show();
                    $("#results").append(html);
              }
            });   
}); 
```

MySQL 看起来像这样：

```
<?php
//if we got something through $_POST
if (isset($_POST['dataFromDate'])) {
    include('db.php');
    $db = new db();
    // never trust what user wrote! We must ALWAYS sanitize user input
    $word = mysql_real_escape_string($_POST['search']);
    $word = htmlentities($word);
    // build your search query to the database

    $sql = "SELECT
    events.ID,
    events.EVENT_NAME,
    events.start_datetime,
    events.end_datetime,
    events.VENUE_LOCATION,
    events.ENTRANCE_PRICE, 
    venues.VENUE_NAME,
    GROUP_CONCAT(music_styles.MUSIC_STYLE_NAME) AS MUSIC_STYLE_NAME
    FROM events
    INNER JOIN venues 
    ON events.VENUE_LOCATION = venues.ID
    INNER JOIN events_music_styles
    ON events.ID = events_music_styles.event_id
    INNER JOIN music_styles
    ON events_music_styles.music_style_id = music_styles.id
    WHERE start_datetime >= '$phpFromDate'
    AND end_datetime <= '$phpToDate' 
    AND ENTRANCE_PRICE >= '$phpFromPrice'
    AND ENTRANCE_PRICE <= '$phpToPrice' 
    GROUP BY events.ID";

    // get results
    $row = $db->select_list($sql);
    if(count($row)) {
        $end_result = '';
        foreach($row as $r) {
            $result         = $r['title'];
            // we will use this to bold the search word in result
            $bold           = '<span class="found">' . $word . '</span>';   
            $end_result     .= '<li>' . str_ireplace($word, $bold, $result) . '</li>';           
        }
        echo $end_result;
    } else {
        echo '<li>No results found</li>';
    }
}
?> 
```

我 100% 确定它不会像这样工作，但我想我几乎是对的。如果有人至少可以让我知道我可以做些什么来修复代码，我会很高兴。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T20:06:06.173

您将其作为对象发送，如下所示：

```
$.ajax({
    type: "POST",
    url: "do_search.php",
    data: {dataFromDate    : FromDate,
           dataToDate      : ToDate,
           dataMusicStyles : MusicStyles,
           dataLocations   : Locations,
           dataFromPrice   : FromPrice,
           dataToPrice     : ToPrice
    },
    beforeSend: function(html) { // this happens before actual call
        $("#results").html('');
        $("#searchresults").show();
        $(".word").html(searchString);
    },
    success: function(html) { // this happens after we get results
        $("#results").show();
        $("#results").append(html);
    }
});​ 
```

第一个值是键，第二个值是值，因此`{key: value}`将在服务器上访问`$_POST['key']`，您的值将以您想要的方式访问：

```
$_POST['dataFromDate'] 
```

此外，您一开始不需要所有这些变量，只需直接在对象中使用它们即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T20:07:00.280

尝试用 a 连接你的字符串`","`并在服务器上分解它们。

# python - 循环帮助：它不等待 PyQt4 中的 loadFinished SIGNAL

> ID：13904993
> 
> 赞同：1
> 
> 时间：2012-12-16T20:02:06.063
> 
> 标签：python, qt, for-loop, pyqt, pyside

我正在尝试创建一个循环，但它不等待 loadFinished 信号：

```
if __name__ == "__main__":
    app = QApplication(sys.argv)
    for line in open('proxy_list_test.txt', 'r').readlines():
        network_data = line.split(':')
        ip = network_data[0]
        port = network_data[1]
        print "Connecting with ip: %s port: %s"%(ip,port)
        br = Browser(ip, port)
        url = QUrl('http://example web site.com/')
        br.load(url)
        br.show()
        print "Closing"
    app.exec_() 
```

如您所见，我正在尝试使用几个不同的 IP 地址加载示例网站。从 Browser() 他们传递给我做的 NetworkAccessManager ：

```
proxy = QNetworkProxy(QNetworkProxy.HttpProxy, self.ip, self.port)
self.setProxy(proxy) 
```

问题是：当我的文件只有 1 个 IP 地址时，它可以正常工作！但是如果它有几个，那么控制台中的输出就会很奇怪，它会通过 for 循环并且不会等到 Browser() 类中的加载完成。

```
Connecting with ip: some_ip port: some_port

10%
Closing
Connecting with ip: some_ip port: some_port

10%
Closing
Connecting with ip: some_ip port: some_port

10%
Closing
Done
100% 
```

和 loadFinished 和 loadProgress SIGNALS 很简单：

```
def _progress(self, progress):
        print str(progress) + "%"

    def _loadFinished(self):
        print "Done" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:40:53.300

在调用之前尝试此代码`br.load(url)`：

```
loop = QEventLoop()
br.loadFinished.connect(loop.quit)
loop.exec_() 
```

这是假设您的`Browser`发射`loadFinished`（它是 的子类`QWebView`）

# c - c中的信号量初始化

> ID：13904995
> 
> 赞同：2
> 
> 时间：2012-12-16T20:02:27.540
> 
> 标签：c, semaphore

```
arg.val = 1;

    if (sem_id = semget(IPC_PRIVATE, 1, 0600 | IPC_CREAT) == -1 ){
            perror("Creating semaphore failed");
            exit(1);
    }
    else {
            printf("Creating a semaphore with ID: %d \n",sem_id);
            if (semctl(sem_id, 0, SETVAL, arg) == -1 ) {                       
                    perror("Initialization of semaphore failed\n");
                    exit(1);
            }
    } 
```

我正在尝试创建和初始化一个信号量，当我编译我的程序时它返回我：
“信号量初始化失败：标识符已删除

你能解释一下发生这种情况的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-16T20:17:36.277

```
if (sem_id = semget(IPC_PRIVATE, 1, 0600 | IPC_CREAT) == -1 ) 
```

被解析（因为`==`绑定强于`=`）

```
if (sem_id = (semget(IPC_PRIVATE, 1, 0600 | IPC_CREAT) == -1) ) 
```

你可能想要

```
if ((sem_id = semget(IPC_PRIVATE, 1, 0600 | IPC_CREAT)) == -1 ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T20:18:11.877

操作 == 的优先级高于操作 =。我相信这意味着这意味着 sem_id 被设置为真实值。您应该在 if 语句中对操作进行分组。

```
if((sem_id = semget(IPC_PRIVATE, 1, 0600 | IPC_CREAT)) == -1){ 
```

# prolog - 在序言中插入函数

> ID：13904999
> 
> 赞同：2
> 
> 时间：2012-12-16T20:03:00.683
> 
> 标签：prolog

我正在编写一个插入函数，该函数接受两个参数，一个数字和一个排序列表，它应该生成相同的列表，其中数字包含在其正确位置。这是我到目前为止得到的：

```
insert1(X,[]) :-
   [X].

insert1(X, [H|T]) :-
   X > H,
   insert1(X,T).

insert1(X,[H|_T]) :-
   X < H,
   T is [X|T]. 
```

我收到以下错误：

```
ERROR: '.'/2: Arguments are not sufficiently instantiated ("x" must hold one character)
Exception: (6) insert1(2, [1, 4, 5]) ? creep 
```

我会很感激你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T21:24:44.163

错误消息相当神秘：'.'/2 它是列表构造函数，您正在*调用*它。有关语法的详细说明，请参阅[此](https://stackoverflow.com/questions/10022779/prolog-unusual-cons-syntax-for-lists/10023905#10023905)问题。

最后一个子句也是错误的，因为 is/2*只能*用于算术。

但通常你是从错误的“角度”来处理问题。Prolog 中的参数是*不可变*的。您需要另一个参数来保存修改后的列表。

这是第一个和第三个子句的可能解决方法

```
insert1(X, [], [X]).
...
insert1(X, [H|T], [X,H|T]) :-
  X < H. 
```

您将需要调整第二个子句并以这种方式调用 insert1

```
?- insert1(3, [1,2,3,4], L). 
```