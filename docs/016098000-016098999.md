# StackOverflow 问答 16098000-16098999

# c# - 将 xml 字符串转换为我的对象列表

> ID：16098004
> 
> 赞同：9
> 
> 时间：2013-04-19T05:46:14.737
> 
> 标签：c#

```
<root> 
<row> 
  <linksclicked>http://www.examiner.com/</linksclicked> 
  <clickedcount>34</clickedcount>
</row> 
<row> 
  <linksclicked>http://www.sample123.com</linksclicked> 
  <clickedcount>16</clickedcount>
</row> 
<row> 
  <linksclicked>http://www.testing123.com</linksclicked> 
  <clickedcount>14</clickedcount>
</row> 
</root> 
```

我在一个字符串中有上面的xml，我有下面的类

```
public class Row
{
    public string linksclicked { get; set; }
    public int clickedcount { get; set; }
} 
```

如何将 xml 字符串转换为行对象列表

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T05:52:49.930

您可以使用 LINQ to XML：

```
var doc = XDocument.Parse(xmlString);

var items = (from r in doc.Root.Elements("row")
             select new Row()
                 {
                     linksclicked = (string) r.Element("linksclicked"),
                     clickedcount = (int) r.Element("clickedcount")
                 }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:52:18.740

您可以使用 XMLSerializer 反序列化 List 类型的属性并将标记名称分配给属性作为根。

但是，您需要在文件的开头使用 XML 标记。

您可以使用 XElement 编写自己的 XML 解析器。您可以列出行节点，解析它们中的每一个并将它们加载到列表中。

```
XElement rootNode = XElement.Load(filepath);

List<XElement> nodes = rootNode.Descendants().Where(t=> t.Name.ToString().Equals("row")); 
```

对于每个标签，您可以创建一个对象 Row 并根据子标签填充其属性。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:50:41.183

你可以试试这段代码

```
string xml = "<Ids><id>1</id><id>2</id></Ids>";   
ArrayList list = new ArrayList();    
XmlDocument doc = new XmlDocument();  
doc.LoadXml(xml);    
XmlNodeList idNodes = doc.SelectNodes("Ids/id");  
foreach (XmlNode node in idNodes)
    list.Add(node.InnerText); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-31T05:08:17.983

如果 xml 结果从服务器调用中变为空，这种方法可以更安全地避免异常。

```
string xmlString = "<School><Student><Id>2</Id><Name>dummy</Name><Section>12</Section></Student><Student><Id>3</Id><Name>dummy</Name><Section>11</Section></Student></School>";

XDocument doc = new XDocument();
//Check for empty string.
if (!string.IsNullOrEmpty(xmlString))
{
   doc = XDocument.Parse(xmlString);
}
List<Student> students = new List<Student>();
//Check if xml has any elements 
if(!string.IsNullOrEmpty(xmlString) && doc.Root.Elements().Any())
{
    students = doc.Descendants("Student").Select(d =>
    new Student
     {
       id=d.Element("Id").Value,
      name=d.Element("Name").Value,
      section=d.Element("Section").Value

     }).ToList();   
}
public class Student{public string id; public string name; public string section;} 
```

检查演示小提琴[Demo](https://dotnetfiddle.net/50JBwB/ "演示")

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-19T06:02:12.177

试试这个：

```
var xml = @"    
<root> 
  <row> 
    <linksclicked>http://www.examiner.com/</linksclicked> 
    <clickedcount>34</clickedcount>
  </row> 
  <row> 
    <linksclicked>http://www.sample123.com</linksclicked> 
    <clickedcount>16</clickedcount>
  </row> 
  <row> 
    <linksclicked>http://www.testing123.com</linksclicked> 
    <clickedcount>14</clickedcount>
  </row> 
</root>";

var xElems = XDocument.Parse(xmlString);
var xRow = doc.Root.Elements("row");
List<Row> rowList = (from rowTags in xRow
                     let clickCount = 0
                     let isClickCountOk = Int32.TryParse((rowTags.Element("clickedcount").Value, clickCount);
                     where !string.IsNullOrEmpty(rowTags.Element("linksclicked").Value) &&
                           !string.IsNullOrEmpty(rowTags.Element("clickedcount").Value)
                     select new Row()
                     {
                         linksclicked = rowTags.Element("linksclicked").Value,
                         clickedcount = clickCount 
                     }).ToList(); 
```

# android - 修复加载地图失败。无法联系 Google 服务器。

> ID：16098005
> 
> 赞同：0
> 
> 时间：2013-04-19T05:46:17.480
> 
> 标签：android, google-maps

我在我的应用程序中使用地图功能。每当我在我的应用程序中运行地图时，我都会遇到错误，即

`04-19 11:03:50.274: E/Google Maps Android API(23366): Failed to load map. Could not contact Google servers.`

我检查了清单文件和代码都是正确的。谷歌播放服务也在我的安卓设备上运行。我正在运行我遇到的相同错误的地图示例代码。但我不明白确切的问题是什么。请建议我如何解决该问题。`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:55:31.930

您是否使用项目的包名和 Keytore 的 SH1在[Google Api Console中获取了 map-key？](https://code.google.com/apis/console)如果没有，请转到控制台并执行此操作；）您必须将此密钥放入清单中，并获得所需的权限。

通常在以下情况下会发生此错误：

*   没有有效的映射键。
*   密钥不适用于您的密钥库。
*   你忘记了一些许可。

===============迷你教程=====================

1.  从 SDKManager 下载并安装 Google Play 服务
2.  转到[Google Api 控制台](https://code.google.com/apis/console)
3.  在您的左侧，创建新项目（提供您想要的名称）
4.  知道在“服务”选项中是允许的，所以进入选项里面。
5.  打开谷歌地图 Android API v2
6.  在显示的页面中点击“生成新的 Android 密钥”即可知道
7.  您将需要来自 Keystore 的 SHA1 和项目包的名称 `Ex: 48:+4: ... :46;com.xxxx.xxx.xxx`
8.  要知道您的 sha1，您必须打开一个 CMD 并执行以下操作：

    ```
    C:\>cd C:\Users\YOURUSER\.android\

    C:\Users\YOURUSER\.android>"C:\Program Files\Java\jdkXXXX\bin\keytool.exe" -list -v -keystore debug.keystore -alias androiddebugkey -storepass android -keypass android 
    ```

    XXX 表示您拥有的版本

9.  现在你得到了你的 api 密钥去你的 Manifest 必须放：

    ……

10.  选择项目，右击，进入“文件/导入/Android/Existing Android Code into Workspace”。在根目录中转到`"<-sdk-android folder> /extras/google/google_play_services/libproject/google-play-services_lib"` 并选择出现的项目。单击完成。

11.  右键单击项目转到“属性/Android”；点击“Add..”按钮，选择google play services，点击OK

12.  `android-support-v4.jar`如果还没有，请添加到您的项目中。

13.  地图的布局是：

14.  并且包含地图的活动必须扩展 FragmentActivity （类似这样）

    `public class MainActivity extends android.support.v4.app.FragmentActivity {`

    ```
     @Override
       protected void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);
       }    
    ...
    } 
    ```

15.  啊，就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:51:41.750

您是否使用您的密钥库和包名称为您的应用程序生成了一个 api 密钥？

# c - 如何在 C/C++ 套接字中接收整数数组？

> ID：16098010
> 
> 赞同：3
> 
> 时间：2013-04-19T05:46:50.550
> 
> 标签：c, sockets, recv

在接收整数数组时，需要检查接收到的数据的字节数。例如，当接收一个长度为 100 的整数数组时：

```
int count = 0;
int msg[100];
while(count < 100 * sizeof(int)){
    count += read(fd, msg + count / sizeof(int), 100 * sizeof(int) - count);
} 
```

这是正确的方法吗？read() 会返回一个不是 sizeof(int) 倍数的值吗？如果这不正确，那么接收整数数组的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:55:53.097

您是正确的，`read`可能不会返回您请求的所有数据，尤其是。如果它连接到网络套接字。`read`不一定会返回 sizeof(int) 倍数的值。如果您想使用这种（手动）接收数据的方法，我可能会建议您计算字节数而不是 sizeof(int)s（根据您的系统可以是 4 或 8）。比这样做更容易的是使用[Protocol Buffers](https://code.google.com/p/protobuf/)之类的东西，它可以让您为数据包定义数据格式并快速轻松地序列化/反序列化它们。（定义一个只包含整数数组的消息，让 protobuf 处理其他所有事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:41:19.567

在 Linux 上，您可以使用`MSG_WAITALL`选项 for `recv()`，这使函数等待完整的给定长度的传入数据。

作为替代方案（在所有平台上工作），您还可以编写一个接收给定字节数的通用接收函数，例如这个（假设套接字未设置为*非阻塞*；需要包括`<stdint.h>`）：

```
/// \brief Receives a block of data of the specified size
/// \param sk Socket for incoming data
/// \param data Pointer to input buffer
/// \param len Number of bytes to read
/// \return Number of bytes received (same as len) on success, -1 on failure
int block_recv(const int sk, uint8_t* data, unsigned int len)
{
    int i, j = 0;

    while (len > 0) {
        i = recv(sk, (char*) data, len, 0);
        if (i <= 0) {
            return -1;
        }
        data += i;
        len -= i;
        j += i;
    }

    return j;
} 
```

然后你可以调用它来接收你的整数缓冲区：

```
if (block_recv(fd, (uint8_t*) msg, sizeof(msg)) != sizeof(msg)) {
    fprintf(stderr, "Error receiving integer buffer...\n");
    // whatever error handling you need...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:46:33.080

你是对的 - 不能保证 read 会返回大小是`sizeof(int)`. 您可能收到的最小尺寸是`char`. [从网络接收整数](https://stackoverflow.com/questions/673799/why-do-i-get-weird-results-when-reading-an-array-of-integers-from-a-tcp-socket)时还有其他问题，例如字节顺序（这显然也适用于通过网络[*发送*整数](https://stackoverflow.com/questions/672241/how-do-i-send-an-array-of-integers-over-tcp-in-c)），您应该注意这些问题。

由于这些原因，更简单的解决方案是使用 a`char[]`而不是`int[]`来存储消息，然后将其复制到`int[]`. 如果您担心效率，请先向自己证明这是一个瓶颈（分析您的代码），然后再担心优化代码。

此外，如果您正在`send`通过`recv`网络进行通信，请注意 TCP 等协议是基于流的，即它们只是发送字符流，您需要实现某种方法来检测消息的结尾并将其格式化为您的需要. 两种常见的方法是要么将消息的长度作为标头发送，要么使用特殊字符（如`'\n'`表示消息结束）。此外，由于您要发送一个数组，您可以使用类似 '|' 来分离元素。

因此示例消息可以是：“1|100|239|23|\n”

# java - 如何从 em.find 方法中获取相同的实体？

> ID：16098012
> 
> 赞同：1
> 
> 时间：2013-04-19T05:46:52.427
> 
> 标签：java, jpa

如何从`em.find`方法中获取相同的实体？

```
Address address=em.find(Address.class,1);
System.out.println("Name of Address: "+address.getAddressName);   // Chinnur
address.setAddressName("Russia");
Address address1=em.find(Address.class,address.getAddressId());
System.out.println("Name of Address: "+address1.getAddressName); //????????? 
```

我需要`address1.getAddressName`的是“chinnur”，

但我得到 `address1.getAddressName`的是“俄罗斯”

我需要简短的解释，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:51:26.047

修改后的实体存储在事务中`cache`，当您想再次检索时显示缓存结果

# excel - 使用 VBA 进行数据验证

> ID：16098020
> 
> 赞同：1
> 
> 时间：2013-04-19T05:47:44.460
> 
> 标签：excel, validation, vba

我收到以下代码的“应用程序定义或对象定义对象错误”

```
10        Sheets("Main").Select
20        currYearDate = DateValue("April 1, " & Year(Now))
30        nextYearDate = DateValue("March 31, " & (Year(Now) + 1))
40        Range("H9").Activate
50        With ActiveCell.Validation
60            .Add Type:=xlValidateDate, AlertStyle:=2, Operator:=1, Formula1:=currYearDate, Formula2:=nextYearDate
70            .ErrorMessage = "You should enter date between " & Format(DateValue("April 1," & Year(Now)), "dd-mmm-yyyy") & " and " & Format(DateValue("March 31," & Year(Now) + 1), "dd-mmm-yyyy")
80            .ErrorTitle = "Warning Message"
90        End With 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:54:34.870

试试下面的代码：

```
 Sheets("Main").Select
    currYearDate = DateValue("April 1, " & Year(Now))
    nextYearDate = DateValue("March 31, " & (Year(Now) + 1))
    With Range("H9").Validation
        .Delete
        .Add Type:=xlValidateDate, AlertStyle:=2, Operator:=1, Formula1:=currYearDate, Formula2:=nextYearDate
        .ErrorMessage = "You should enter date between " & Format(DateValue("April 1," & Year(Now)), "dd-mmm-yyyy") & " and " & Format(DateValue("March 31," & Year(Now) + 1), "dd-mmm-yyyy")
        .ErrorTitle = "Warning Message"
    End With 
```

# jakarta-ee - Glassfish 3.1.2 上的 docroot 不提供静态图像

> ID：16098024
> 
> 赞同：0
> 
> 时间：2013-04-19T05:48:16.600
> 
> 标签：jakarta-ee, jsf-2, glassfish-3

我正在尝试使用外部文件夹来存储我的 Java EE 6 项目的图像。我正在使用 Glassfish 3.1.2。我创建了从这篇文章中找到的 sun-web.xml：

[Glassfish 3 - 从静态服务器加载图像](https://stackoverflow.com/questions/5360677/glassfish-3-loading-images-from-a-static-server)

这也包括在这里：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-web-app PUBLIC "-//Sun Microsystems, Inc.//DTD GlassFish Application Server 3.0 Servlet 3.0//EN" "http://www.sun.com/software/appserver/dtds/sun-web-app_3_0-0.dtd">
<sun-web-app>
   <property name="alternatedocroot_1" value="from=/imgs/slideshow/* dir=c:/users/jonathon/desktop/images" />
   <property name="alternatedocroot_2" value="from=/imgs/feed/* dir=c:/users/jonathon/desktop/images" />
   <property name="alternatedocroot_3" value="from=/imgs/question/* dir=c:/users/jonathon/desktop/images" />
</sun-web-app> 
```

虽然我不打算将它保留在我的桌面上，但我只是想在我的服务器上使用它之前对其进行测试。在我的页面上，我使用此实现来显示图像：

```
<div class="item">
    <h:graphicImage value="/imgs/slideshow/${imgs}" />
</div> 
```

但是我只得到一个空白图像。我确保目录正确（如果您没有现有目录，则在加载服务器时会出现异常）

我认为一个更明确的问题是使用外部图像文件夹的正确方法是什么，以及如果可能的话，您如何写入这些文件夹？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:53:23.647

您的路径将附加该`from`值。例如，您的图像将被请求`c:/users/jonathon/dektop/images/imgs/slideshow*`。过去也给我带来了一些麻烦。希望这会让你继续前进。

您不需要 docroot 写入此文件夹。您可以使用：

```
String path = new StringBuilder("c:")
    .append(File.separator)
    .append("users")
    .append(File.separator)
    .append("jonathon")
    .append(File.separator)
    .append("desktop")
    .append(File.separator)
    .append("images")
    .append(File.separator)
    .append("imgs")
    .append(File.separator)
    .append("slideshow")
    .append(File.separator)
    .append("myfile.jpg")
    .toString();
File file = new File(path); 
```

# php - PHP UDP socket_recv() 超时

> ID：16098026
> 
> 赞同：3
> 
> 时间：2013-04-19T05:48:29.617
> 
> 标签：php, sockets, udp, udpclient

我正在研究可以通过 UDP 套接字进行通信的服务器/客户端 php 脚本。我想知道是否有一种为 socket_recv()函数**实现 timeout() 的好方法。**目前它在我的客户端中阻塞，等待确认。

感谢您的输入！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-19T06:32:54.513

我找到了我的问题的解决方案： socket_set_option() 有选项 SO_RCVTIMEO 为 socket_recv() 设置超时

例如：

```
socket_set_option($sock,SOL_SOCKET,SO_RCVTIMEO,array("sec"=>1,"usec"=>0)); 
```

这将在 socket_recv() 的套接字级别上设置我的套接字超时 1 秒和 0 微秒 [http://www.php.net/manual/en/function.socket-set-option.php](http://www.php.net/manual/en/function.socket-set-option.php)

感谢您寻找解决方案！

# python - 如何在python中使用nice命令？

> ID：16098027
> 
> 赞同：0
> 
> 时间：2013-04-19T05:48:30.870
> 
> 标签：python, nice

如何在 python 中使用 nice ？

我有一个简单的 bash 脚本：

```
nice -n 9 cp /var/tmp/1 /var/tmp/2 
```

什么是python替代品？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T05:55:43.943

在纯 Python 中，您可以使用[os.nice](http://docs.python.org/2/library/os.html#os.nice)和[shutil.copy](http://docs.python.org/2/library/shutil.html#shutil.copy)（如果您不需要保留文件元数据，则可以使用 shutil.copyfile）[：](http://docs.python.org/2/library/shutil.html#shutil.copyfile)

```
import os
import shutil

os.nice(9)
shutil.copy('/var/tmp/1', '/var/tmp/2') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:53:10.990

当然，总是有`os.system`：

```
os.system("nice -n 9 cp /var/tmp/1 /var/tmp/2") 
```

一个更好的解决方案是使用`os.nice`with `preexec_fn`：

```
import subprocess, os
subprocess.Popen("cp /var/tmp/1 /var/tmp/2", shell=True, preexec_fn=lambda: os.nice(9)) 
```

# ms-access - 操作必须使用可更新的查询 - 访问

> ID：16098031
> 
> 赞同：4
> 
> 时间：2013-04-19T05:48:46.697
> 
> 标签：ms-access, sql-update, ms-access-2007

我想通过使用访问中的加入来更新表 - 2007

```
UPDATE TABLE1 A INNER JOIN (SELECT ACCODE, SUM(AMOUNT) AS SUM_AMOUNT 
FROM TABLE2 GROUP BY ACCODE) B ON A.ACCODE = B.ACCODE
SET A.TRIAL = A.TRIAL + SUM_AMOUNT 
```

它给了我错误

> 操作必须使用可更新的查询

我尝试了以下查询，这里没有错误

```
UPDATE TABLE1 A INNER JOIN TABLE2 B ON A.ACCODE = B.ACCODE
SET A.TRIAL = A.TRIAL + SUM_AMOUNT 
```

请帮我找出第一个查询有什么问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T06:00:31.113

我认为 Access 将您的查询视为不可更新的原因是由于 subquery `GROUP BY`。您应该能够使用`DSum`.

```
UPDATE TABLE1 AS a
SET a.TRIAL = a.TRIAL
    + DSum("AMOUNT", "TABLE2", "ACCODE=" & a.ACCODE) 
```

如果`ACCODE`是文本而不是数字数据类型，请在表达式中的值周围添加引号`DSum`。

```
UPDATE TABLE1 AS a
SET a.TRIAL = a.TRIAL
    + DSum("AMOUNT", "TABLE2", "ACCODE='" & a.ACCODE & "'") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T19:35:22.930

我刚遇到这个问题，这是由于表上的权限。我制作了链接表的副本以测试我的更新查询，并不断收到此错误消息。我很确定我的查询没问题（这是一个简单的更新），所以我在实际表上运行它，但没有收到错误。只是想为将来遇到此问题的其他人添加此内容！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T12:19:56.850

this error also comes when you are accessing database which is on different PC. so give write permission from security tab of folder and also give write access on sharing permission option. In my case this is worked

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-24T09:51:41.467

是的，Mandeep，这就是 ms-access 的工作方式。

```
UPDATE Table1 As T1 INNER JOIN Table2 AS T2 ON T1.F1 = T2.F1
SET T1.F2 = T2.F2 
```

当 T2 是查询时，***即使您没有更新 T2，此查询也会引发“操作必须使用可更新查询”错误。***

# html - 换行后左对齐的最佳方法

> ID：16098037
> 
> 赞同：3
> 
> 时间：2013-04-19T05:49:04.000
> 
> 标签：html, css, line-breaks

![在此处输入图像描述](https://i.stack.imgur.com/wWNmq.jpg)

如您所见，我需要在换行后对齐文本。

首先我尝试了表。但正如您所见，每个项目都有不同的宽度（如注意，湿度......）。所以我不得不为每个项目制作每张桌子。我不认为这是对的。

我试过这个。

```
li.list {
    padding-left: 3.5em;
    text-indent: -3.5em;
} 
```

这似乎可行，但确切`em`显示不同浏览器（包括移动设备）的不同空间。这意味着我无法使其兼容。

我希望有一个简洁的方法来解决它..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T06:13:55.290

**解决方案#1：**

**小提琴：http:**
[//jsfiddle.net/38GpE/2/](http://jsfiddle.net/38GpE/2/)

**CSS：**

```
.pretext
{
    font-weight:bold;
    display:inline-block;
    vertical-align:top;
}

.text
{
    width:300px;
    display:inline-block;
} 
```

**HTML：**

```
<ul>
    <li>
        <div class="pretext">Something: </div>
        <div class="text">
            ...text...
        </div>
    </li>
</ul> 
```

明显的问题是`<li>`项目符号点......在你的例子中，看起来你可以`list-style:none;`用来隐藏项目符号，并使用`-`（减号）。

如果这还不够，隐藏要点和定位 a`background: url(mybullet.png) no-repeat left top;`可能会起作用。

* * *

**解决方案#2：**

另一种使用 的解决方案`display:table-cell`，但请记住，IE7 不支持此功能。这样做的好处是您不必定义第二列的宽度。

**小提琴：http:**
[//jsfiddle.net/38GpE/3/](http://jsfiddle.net/38GpE/3/)

**CSS：**

```
.pretext
{
    font-weight:bold;
    display:table-cell;
    vertical-align:top;
    white-space:nowrap;
}

.text
{
    display:table-cell;
} 
```

* * *

**解决方案#3：**

您在评论中说，您不需要使用`<li>`. 这很痛苦，但你能不能只为每个项目定义一个表格？

**小提琴：http:**
[//jsfiddle.net/zuPcx/](http://jsfiddle.net/zuPcx/)

**HTML：**

```
<table>
    <tr>
        <td class="pretext">Something:</td>
        <td>{your text}</td>
    </tr>
</table>

<table>
    <tr>
        <td class="pretext">Something else:</td>
        <td>{your text}</td>
    </tr>
</table> 
```

**CSS：**

```
.pretext
{
    font-weight:bold;
    display:table-cell;
    vertical-align:top;
    white-space:nowrap;
}

.text
{
    display:table-cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-13T11:37:16.897

对于最终会解决这个问题的未来人，有一种简单的方法可以获得 Jace 的第一个解决方案，而无需为右侧部分指定宽度。

```
/* This is all you need */

.pretext {
  float: left;
}
.text {
  overflow: hidden;
}

/* This is just to make it pretty */

.pretext {
  margin-right: 10px;
  font-weight: bold;
}
```

```
<div class="text-container">
  <div class="pretext">Something:</div>
  <div class="text">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quis odio a quam rutrum cursus. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis sed elit in urna vulputate mollis.
    Nam luctus tincidunt imperdiet. Morbi adipiscing, lorem quis tempus rhoncus, mauris orci rutrum tortor, ultricies porta libero velit quis nisl. Aenean molestie magna quis leo consectetur bibendum.
  </div>
</div>

<div class="text-container">
  <div class="pretext">Something else:</div>
  <div class="text">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quis odio a quam rutrum cursus. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis sed elit in urna vulputate mollis.
    Nam luctus tincidunt imperdiet. Morbi adipiscing, lorem quis tempus rhoncus, mauris orci rutrum tortor, ultricies porta libero velit quis nisl. Aenean molestie magna quis leo consectetur bibendum.
  </div>
</div>
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:25:48.087

```
//HTML   
 <div class="container">
        <span class="textHeading">Something: </span>
        <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quis odio a quam rutrum cursus. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis sed elit in urna vulputate mollis. Nam luctus tincidunt imperdiet. Morbi adipiscing, lorem quis tempus rhoncus, mauris orci rutrum tortor, ultricies porta libero velit quis nisl. Aenean molestie magna quis leo consectetur bibendum. 
        </p>
    </div>

    <div class="container">
        <span class="textHeading">Something else: </span>
        <p class="text">
            Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc quis odio a quam rutrum cursus. Aliquam erat volutpat. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis sed elit in urna vulputate mollis. Nam luctus tincidunt imperdiet. Morbi adipiscing, lorem quis tempus rhoncus, mauris orci rutrum tortor, ultricies porta libero velit quis nisl. Aenean molestie magna quis leo consectetur bibendum. 
        </p>
    </div>

//CSS

    textHeading, .text{
        display: inline-block; vertical-align: top;
    }
    .textHeading
    {
        font-weight:bold;   
        width: 120px;
        /*text-align: right;*/
    }
    .text
    {
        width:500px;
        padding:0; margin:0;
        width: 400px; 
    }

    You can check here: `http://jsfiddle.net/49EBr/2/ 
```

# jakarta-ee - 使用 Tomcat 代理配置 OpenAM

> ID：16098038
> 
> 赞同：0
> 
> 时间：2013-04-19T05:49:13.793
> 
> 标签：jakarta-ee, tomcat, openam

在我们安装和配置 Tomcat 代理之前，在为 J2EE 创建代理配置文件时，我在 OpenAM 中有一个基本问题。

在代理配置文件中，我们有“代理 URL”。代理 URL 在这里是什么意思？

代理配置文件页面中给出的语法是“protocol://host:port/deploymentUri 例如[http://agent1.sample.com:1234/agentapp](http://agent1.sample.com:1234/agentapp) ”

这里agentapp是什么意思？它是默认的一个还是我们在Tomcat中的部署应用程序？

请解开我的疑惑。

谢谢，卡西克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T14:29:50.667

“agentapp”是 J2EE 代理的一部分；您必须将它部署在 J2EE 容器上。除其他事项外，它还负责处理 CDSSO 和通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T20:36:59.597

代理 URL 是您要保护的服务器的 URL 加上“agentapp”。当您在要保护的 J2EE 服务器上安装 J2EE 代理应用程序时，它会自动在 deployments/webapps 目录中放置一个 agentapp 文件。因此，如果您的服务器位于 example.com，则代理 URL 为： [http](http://www.example.com:443/agentapp) ://www.example.com: 443/agentapp（或 https，取决于您是否使用 SSL）。

以下是在您要保护的服务器上安装代理的过程：http: [//openam.forgerock.org/openam-documentation/openam-doc-source/doc/jee-install-guide/](http://openam.forgerock.org/openam-documentation/openam-doc-source/doc/jee-install-guide/)

# android - 如何通过 httpPost() 来隐藏 httpGet()？

> ID：16098040
> 
> 赞同：1
> 
> 时间：2013-04-19T05:49:30.247
> 
> 标签：android, json, http, http-post, http-get

这里的 httpPost() java 类，

```
public String getXmlFromUrl_NewRegistration(String url,
        String username, String firstname, String lastname, String email,
        String password) {
    String json = null;

    try {
        // defaultHttpClient

        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost("http://aleedex.biz/game/users.php?action=new");
        String postParameter = "username=" + username + "&firstname="
                + firstname + "&lastname=" + lastname + "&email=" + email
                + "&password=" + password;

        try {
            httpPost.setEntity(new StringEntity(postParameter));
        } catch (Exception e) {

        }

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        json = EntityUtils.toString(httpEntity);

    } catch (UnsupportedEncodingException e) {

    } catch (ClientProtocolException e) {

    } catch (IOException e) {

        json = null;
    }

    Log.d("json", json);

    return json;
} 
```

在 httpGet() 中也使用相同的参数，如用户名、名字、姓氏、电子邮件、密码 如何通过 httpGet() 在该链接上使用相同的参数注册用户`http://aleedex.biz/game/users.php?action=new`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T06:35:19.950

我已经按照该教程解决了我的问题[如何将 Android 与 PHP、MySQL 连接起来](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:09:54.990

在这里，您可以将帖子参数附加到 url，然后进行调用，它可以正常工作

```
`HttpGet _getrequest=new HttpGet("http://aleedex.biz/game/users.php? action=new&"+postParameter); 

 HttpResponse httpResponse = httpClient.execute(_getrequest);
    HttpEntity httpEntity = httpResponse.getEntity();
    json = EntityUtils.toString(httpEntity);` 
```

试试这个我认为这应该工作。

# android - 如何使用广播接收器获取正在运行的应用程序/包名称

> ID：16098042
> 
> 赞同：1
> 
> 时间：2013-04-19T05:49:40.263
> 
> 标签：android, android-intent, broadcastreceiver

在我的应用程序中，我想编写接收正在运行的应用程序的广播的代码。就像当我们运行/打开任何应用程序时，我的广播接收器应该接收它。我怎样才能得到应用程序名称/包名称？？？

```
 public class Receiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    if("android.intent.action.PACKAGE_FIRST_LAUNCH".equals(intent.getAction()))
     System.out.println("context..."+context.getPackageName());

}
 } 
```

androidmanifest 文件-

```
 <receiver
        android:name="com.veg.app.Receiver"
        android:enabled="true"

        android:label="StartReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PACKAGE_FIRST_LAUNCH" />      
            <category android:name="android.intent.category.DEFAULT"/> 
        </intent-filter>
    </receiver> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T09:19:50.753

这是使用活动管理器执行此操作的好方法。您基本上可以从活动管理器中获取 runningTasks。它总是首先返回当前活动的任务。从那里你可以得到topActivity。

```
ActivityManager am = (ActivityManager) this.getSystemService(ACTIVITY_SERVICE);
 // get the info from the currently running task
     List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

     Log.d("topActivity", "CURRENT Activity ::"
             + taskInfo.get(0).topActivity.getClassName());

     ComponentName componentInfo = taskInfo.get(0).topActivity;
   componentInfo.getPackageName(); 
```

您的清单需要以下权限：

```
uses-permission android:name="android.permission.GET_TASKS" 
```

调用任何应用程序时都不会触发**此类事件。**应用程序启动时不会广播任何意图，因此您可能需要在后台并行运行的线程来监视顶级活动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T05:50:59.880

您可以使用[ActivityManager.getRunningAppProcesses()](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)来查找当前正在运行的应用程序。它将返回当前正在运行的应用程序的[ActivityManager.RunningAppProcessInfo](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningAppProcesses%28%29)。然后您可以使用[PckageManager获取名称](http://developer.android.com/reference/android/content/pm/PackageManager.html)

# java - 如何使用 Java 在没有科学计数法的情况下打印双精度值？

> ID：16098046
> 
> 赞同：268
> 
> 时间：2013-04-19T05:49:55.487
> 
> 标签：java, double

我想在 Java 中打印一个没有指数形式的双精度值。

```
double dexp = 12345678;
System.out.println("dexp: "+dexp); 
```

它显示了这个 E 符号：`1.2345678E7`。

我希望它像这样打印它：`12345678`

防止这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：277
> 
> 时间：2014-01-05T18:53:32.257

## Java 以双重形式防止 E 表示法：

将双精度数转换为普通数的五种不同方法：

```
import java.math.BigDecimal;
import java.text.DecimalFormat;

public class Runner {
    public static void main(String[] args) {
        double myvalue = 0.00000021d;

        //Option 1 Print bare double.
        System.out.println(myvalue);

        //Option2, use decimalFormat.
        DecimalFormat df = new DecimalFormat("#");
        df.setMaximumFractionDigits(8);
        System.out.println(df.format(myvalue));

        //Option 3, use printf.
        System.out.printf("%.9f", myvalue);
        System.out.println();

        //Option 4, convert toBigDecimal and ask for toPlainString().
        System.out.print(new BigDecimal(myvalue).toPlainString());
        System.out.println();

        //Option 5, String.format 
        System.out.println(String.format("%.12f", myvalue));
    }
} 
```

该程序打印：

```
2.1E-7
.00000021
0.000000210
0.000000210000000000000001085015324114868562332958390470594167709350585
0.000000210000 
```

它们都是相同的值。

Protip：如果您对为什么这些随机数字出现在 double 值中超过某个阈值感到困惑，该视频解释了：computerphile 为什么`0.1`+`0.2`等于`0.30000000000001`？

[http://youtube.com/watch?v=PZRI1IfStY0](http://youtube.com/watch?v=PZRI1IfStY0)

* * *

## 回答 #2

> 赞同：139
> 
> 时间：2013-04-19T05:51:56.337

您可以`printf()`使用`%f`：

```
double dexp = 12345678;
System.out.printf("dexp: %f\n", dexp); 
```

这将打印`dexp: 12345678.000000`. 如果您不想要小数部分，请使用

```
System.out.printf("dexp: %.0f\n", dexp); 
```

0 in`%.0f`表示小数部分有 0 个位置，即没有小数部分。如果您想打印具有所需小数位数的小数部分，那么只需提供这样的数字而不是 0 `%.8f`。默认情况下，小数部分最多打印 6 个小数位。

这使用[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)中解释的格式说明符语言。

原始代码中使用的默认`toString()`格式在[此处](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#toString%28double%29)说明。

* * *

## 回答 #3

> 赞同：123
> 
> 时间：2014-08-14T12:21:23.997

**简而言之：**

如果你想摆脱尾随零和区域设置问题，那么你应该使用：

```
double myValue = 0.00000021d;

DecimalFormat df = new DecimalFormat("0", DecimalFormatSymbols.getInstance(Locale.ENGLISH));
df.setMaximumFractionDigits(340); // 340 = DecimalFormat.DOUBLE_FRACTION_DIGITS

System.out.println(df.format(myValue)); // Output: 0.00000021 
```

**解释：**

为什么其他答案不适合我：

*   `Double.toString()`或`System.out.println`or`FloatingDecimal.toJavaFormatString`如果 double 小于 10^-3 或大于或等于 10^7，则使用科学记数法
*   通过使用`%f`，默认小数精度为 6，否则您可以对其进行硬编码，但如果您的小数较少，则会导致添加额外的零。例子：

    ```
    double myValue = 0.00000021d;
    String.format("%.12f", myvalue); // Output: 0.000000210000 
    ```

*   通过使用`setMaximumFractionDigits(0);`或`%.0f`删除任何小数精度，这对于整数/长整数很好，但对于双精度则不行：

    ```
    double myValue = 0.00000021d;
    System.out.println(String.format("%.0f", myvalue)); // Output: 0
    DecimalFormat df = new DecimalFormat("0");
    System.out.println(df.format(myValue)); // Output: 0 
    ```

*   通过使用 DecimalFormat，您是本地依赖的。在法语语言环境中，小数点分隔符是逗号，而不是点：

    ```
    double myValue = 0.00000021d;
    DecimalFormat df = new DecimalFormat("0");
    df.setMaximumFractionDigits(340);
    System.out.println(df.format(myvalue)); // Output: 0,00000021 
    ```

    使用 ENGLISH 语言环境可确保您得到一个小数点分隔符，无论您的程序将在何处运行。

为什么要使用 340`setMaximumFractionDigits`呢？

两个原因：

*   `setMaximumFractionDigits`接受一个整数，但其实现允许的最大位数`DecimalFormat.DOUBLE_FRACTION_DIGITS`等于 340
*   `Double.MIN_VALUE = 4.9E-324`因此，对于 340 位数字，您肯定不会舍入您的双精度数并丢失精度。

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2013-04-19T06:08:54.063

你可以用`DecimalFormat`. 通过这门课，您可以非常灵活地解析您的数字。
您可以准确设置您想要使用的模式。
以您为例：

```
double test = 12345678;
DecimalFormat df = new DecimalFormat("#");
df.setMaximumFractionDigits(0);
System.out.println(df.format(test)); //12345678 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2016-08-10T12:39:06.917

我有另一个涉及 BigDecimal 的 toPlainString() 的解决方案，但这次使用的是 javadoc 中推荐的 String-constructor：

> 此构造函数与 Float.toString 和 Double.toString 返回的值兼容。这通常是将 float 或 double 转换为 BigDecimal 的首选方法，因为它不会受到 BigDecimal(double) 构造函数的不可预测性的影响。

它的最短形式如下所示：

```
return new BigDecimal(myDouble.toString()).stripTrailingZeros().toPlainString(); 
```

必须额外检查 NaN 和无穷大值，因此完整形式如下所示：

```
public static String doubleToString(Double d) {
    if (d == null)
        return null;
    if (d.isNaN() || d.isInfinite())
        return d.toString();

    return new BigDecimal(d.toString()).stripTrailingZeros().toPlainString();
} 
```

这也可以复制/粘贴以与 Float 很好地配合使用。

对于 Java 7 及更低版本，这会导致任何零值双精度数为“0.0”，因此您需要添加：

```
if (d.doubleValue() == 0)
    return "0"; 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-08-09T14:37:39.287

只要您的号码是整数，这将起作用：

```
double dnexp = 12345678;
System.out.println("dexp: " + (long)dexp); 
```

如果 double 变量在小数点后有精度，它将截断它。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2018-02-08T05:51:02.593

Java/Kotlin 编译器将任何大于 9999999（大于或等于 1000 万）的值转换为科学记数法，即。**ε 表示法**。

例如：12345678 转换为 1.2345678E7

使用此代码可避免自动转换为科学计数法：

```
fun setTotalSalesValue(String total) {
        var valueWithoutEpsilon = total.toBigDecimal()
        /* Set the converted value to your android text view using setText() function */
        salesTextView.setText( valueWithoutEpsilon.toPlainString() )
    } 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-12-22T14:39:31.983

我需要将一些 double 转换为货币值，发现大多数解决方案都可以，但不适合我。

最终是我的`DecimalFormat`方式，所以这就是我所做的：

```
 public String foo(double value) //Got here 6.743240136E7 or something..
    {
        DecimalFormat formatter;

        if(value - (int)value > 0.0)
            formatter = new DecimalFormat("0.00"); // Here you can also deal with rounding if you wish..
        else
            formatter = new DecimalFormat("0");

        return formatter.format(value);
    } 
```

如您所见，如果数字是自然的，我会得到 - 比如说 - 20000000 而不是 2E7 （等等） - 没有任何小数点。

如果是十进制，我只能得到两位小数。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-06-07T23:48:07.943

以下代码检测提供的数字是否以科学计数法表示。如果是这样，则在正常显示中最多以“25”位数字表示。

```
 static String convertFromScientificNotation(double number) {
    // Check if in scientific notation
    if (String.valueOf(number).toLowerCase().contains("e")) {
        System.out.println("The scientific notation number'"
                + number
                + "' detected, it will be converted to normal representation with 25 maximum fraction digits.");
        NumberFormat formatter = new DecimalFormat();
        formatter.setMaximumFractionDigits(25);
        return formatter.format(number);
    } else
        return String.valueOf(number);
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-03-08T00:39:11.590

我认为每个人都有正确的想法，但所有的答案都不是直截了当的。我可以看到这是一段非常有用的代码。这是可行的代码片段：

```
System.out.println(String.format("%.8f", EnterYourDoubleVariableHere)); 
```

这`".8"`是您设置要显示的小数位数的地方。

我正在使用 Eclipse，它没有问题。

希望这会有所帮助。我将不胜感激任何反馈！

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2020-02-21T11:58:23.660

这可能是一个切线....但是如果您需要将一个数值作为整数（太大而不能成为整数）放入序列化程序（JSON 等）中，那么您可能需要“BigInterger”

例子：

值是一个字符串 - 7515904334

我们需要在 Json 消息中将其表示为数字：

```
{
    "contact_phone":"800220-3333",
    "servicer_id":7515904334,
    "servicer_name":"SOME CORPORATION"
} 
```

我们不能打印它，否则我们会得到这个：

```
{
    "contact_phone":"800220-3333",
    "servicer_id":"7515904334",
    "servicer_name":"SOME CORPORATION"
} 
```

像这样将值添加到节点会产生所需的结果：

```
BigInteger.valueOf(Long.parseLong(value, 10)) 
```

我不确定这是否真的是主题，但由于这个问题是我搜索解决方案时的热门话题，我想我会在这里分享以造福他人，撒谎我，他们搜索不佳。:D

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-07-29T08:05:02.903

当我将其用作 math.Eval() 函数的字符串输入时，我在生产代码中遇到了同样的问题，该函数采用“x + 20 / 50”之类的字符串

我看了数百篇文章......最后我还是因为速度而选择了这个。而且因为 Eval 函数最终会将其转换回自己的数字格式，并且 math.Eval() 不支持其他方法返回的尾随 E-07，而且任何超过 5 dp 的东西对我的应用程序来说都是太多的细节.

这现在用于具有 1,000 多个用户的应用程序的生产代码...

```
double value = 0.0002111d;
String s = Double.toString(((int)(value * 100000.0d))/100000.0d); // Round to 5 dp

s display as:  0.00021 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-01-17T22:44:56.730

利用`String.format ("%.0f", number)`

> %.0f 表示零小数

```
String numSring = String.format ("%.0f", firstNumber);
System.out.println(numString); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-01-18T07:33:31.117

对于由 a 表示的整数值`double`，您可以使用此代码，这比其他解决方案要快得多。

```
public static String doubleToString(final double d) {
    // check for integer, also see https://stackoverflow.com/a/9898613/868941 and
    // https://github.com/google/guava/blob/master/guava/src/com/google/common/math/DoubleMath.java
    if (isMathematicalInteger(d)) {
        return Long.toString((long)d);
    } else {
        // or use any of the solutions provided by others, this is the best
        DecimalFormat df = 
            new DecimalFormat("0", DecimalFormatSymbols.getInstance(Locale.ENGLISH));
        df.setMaximumFractionDigits(340); // 340 = DecimalFormat.DOUBLE_FRACTION_DIGITS
        return df.format(d);
    }
}

// Java 8+
public static boolean isMathematicalInteger(final double d) {
    return StrictMath.rint(d) == d && Double.isFinite(d);
} 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2019-02-14T08:46:28.793

我的解决方案： String str = String.format ("%.0f", yourDouble);

# ruby - 在 ruby 中格式化日期/时间

> ID：16098051
> 
> 赞同：2
> 
> 时间：2013-04-19T05:50:13.720
> 
> 标签：ruby, ruby-on-rails-3

我收到了这种格式的日期和时间

```
2013-04-19 11:07:37 +0530 
```

我想知道如何`XYZ hours ago`在红宝石中以这种方式显示它。

谢谢

更新：我尝试`time_ago_in_words' and it gives me the error`了未定义的方法`time_ago_in_words'`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T05:58:24.257

它是一种导轨方法。`rails c`您可以通过并通过进入 Rails 控制台`include ActionView::Helpers::DateHelper`。然后解决类似的问题

```
t = Time.parse("2013-04-19 11:07:37 +0530")
time_ago_in_words(t) 
```

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T05:53:31.207

使用此功能

```
time_ago_in_words(from_time, include_seconds = false, options = {}) 
```

参考链接：[点击这里](http://apidock.com/rails/ActionView/Helpers/DateHelper/time_ago_in_words)

```
irb> time = "2013-04-19 11:07:37 +0530"
=> "2013-04-19 11:07:37 +0530"
irb> helper.time_ago_in_words(time)
=> "about 3 hours" 
```

或另一种方式：- 包括 ActionView::Helpers::DateHelper：

```
>> time_ago_in_words("2013-04-19 11:07:37 +0530")
NoMethodError: undefined method `time_ago_in_words' for #<Object:0x3b0454>
from (irb):4
>> include ActionView::Helpers::DateHelper
=> Object
>> time_ago_in_words("2013-04-19 11:07:37 +0530")
=> "about 3 hours" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T05:58:40.340

time_ago_in_words 和 distance_of_time_in_words 是 Rails 方法。您必须定义自己的方法来执行此操作。可能你可以从 rails 复制代码。

# time-complexity - 寻找最大输入（时间复杂度）

> ID：16098054
> 
> 赞同：0
> 
> 时间：2013-04-19T05:50:17.530
> 
> 标签：time-complexity

假设一台计算机以 1GHz 的速度运行——即它每秒执行 10^9 条指令。对于以下每个时间复杂度，在 1 周内可以完全处理的最大输入 n 是多少？

```
a) n²
b) n³
c) 2^n 
```

这是家庭作业。我不需要答案我只是不知道如何开始这个问题。有人可以告诉我如何解决第一个问题。然后我可以弄清楚其余的。谢谢！

我看到它需要 10^9 并减去 10² 以获得最大输入，但这似乎太容易了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T05:55:45.753

一分钟60秒，一小时60分钟，一天24小时，一周7天。那是 604800 秒。

如果每秒可以执行 10^9 条指令，那么每周可以执行 604800*10^9 条指令——也就是 6.048*10^14。

6.048*10^14 的平方根是 24,592,681，即我们可以在一周内处理 24,592,681^2 条指令，因此如果它的时间复杂度为 n^2，我们可以处理 24,592,681 大小的输入。

其余的都差不多。

# php - 如何在我的自定义 php 文件中添加 joomla 站点标题而不使用现成的插件或模块？

> ID：16098056
> 
> 赞同：-1
> 
> 时间：2013-04-19T05:50:35.380
> 
> 标签：php, joomla

我一直在 joomla 框架中开发一个站点。现在我的麻烦是客户想要在这个网站上的一个自定义页面。那么，请指导我如何在此自定义页面中设置主题界面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:00:59.797

虽然这不是我最喜欢的解决方案，但您可以将您的脚本放在一篇文章中，该文章带有可以读取您的代码的扩展，例如[DirectPHP](http://extensions.joomla.org/extensions/core-enhancements/coding-a-scripts-integration/custom-code-in-content/4470?qh=YTozOntpOjA7czozOiJwaHAiO2k6MTtzOjU6InBocCdzIjtpOjI7czo0OiJwaHAnIjt9)和其他，而不是在您的脚本中包含 Joomla。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T11:53:53.547

您可以制作类似 error.php 的东西，它实际上是一个呈现单个页面的迷你应用程序。您可以在核心中看到 emplae 的元素是如何使用的，您甚至可以拉入模块等等。

# html - 添加填充会为元素添加不需要的宽度，修复？CSS

> ID：16098057
> 
> 赞同：0
> 
> 时间：2013-04-19T05:50:40.223
> 
> 标签：html, css, padding

我所有寻找答案的搜索都失败了，所以就这样吧。我正在尝试将底部填充添加到包裹在 div 内的按钮中，并且我想将按钮向上移动到更靠近顶部的位置。但是，当添加填充时，它只会拉伸按钮的宽度和高度。抱歉，如果这真的很简单，我对编码很陌生！

```
.div {
background-image: url('images/banner.png');
width: 920px;   
height: 280px;
border-radius: 5px; 
```

}

```
.button {
width: 226px;
height: 57px;
-moz-border-radius: 8px;
-webkit-border-radius: 8px;
border-radius: 8px; /* border radius */
-moz-background-clip: padding;
-webkit-background-clip: padding-box;
background-clip: padding-box; /* prevents bg color from leaking outside the border */
background-color: #f1efea; /* layer fill content */
-moz-box-shadow: 1px 3px 5px rgba(0,0,0,.77), inset 0 2px 0 rgba(255,255,255,.31); /* drop shadow and inner shadow */
-webkit-box-shadow: 1px 3px 5px rgba(0,0,0,.77), inset 0 2px 0 rgba(255,255,255,.31); /* drop shadow and inner shadow */
box-shadow: 1px 3px 5px rgba(0,0,0,.77), inset 0 2px 0 rgba(255,255,255,.31); /* drop shadow and inner shadow */
background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDIyNiA1NyIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+PGxpbmVhckdyYWRpZW50IGlkPSJoYXQwIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjUwJSIgeTE9Ijk5LjUlIiB4Mj0iNTAlIiB5Mj0iMC40OTk5OTk5OTk5OTk5OSUiPgo8c3RvcCBvZmZzZXQ9IjAlIiBzdG9wLWNvbG9yPSIjZWM5NTMxIiBzdG9wLW9wYWNpdHk9IjEiLz4KPHN0b3Agb2Zmc2V0PSIxMDAlIiBzdG9wLWNvbG9yPSIjZWZhNzU1IiBzdG9wLW9wYWNpdHk9IjEiLz4KICAgPC9saW5lYXJHcmFkaWVudD4KCjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIyMjYiIGhlaWdodD0iNTciIGZpbGw9InVybCgjaGF0MCkiIC8+Cjwvc3ZnPg==); /* gradient overlay */
background-image: -moz-linear-gradient(bottom, #ec9531 0.5%, #efa755 99.5%); /* gradient overlay */
background-image: -o-linear-gradient(bottom, #ec9531 0.5%, #efa755 99.5%); /* gradient overlay */
background-image: -webkit-linear-gradient(bottom, #ec9531 0.5%, #efa755 99.5%); /* gradient overlay */
background-image: linear-gradient(bottom, #ec9531 0.5%, #efa755 99.5%); /* gradient overlay */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:01:13.203

将此CSS添加到您各自的课程中，它将对您有所帮助。

```
div {
  position: relative;
}
.button {
    position: absolute;
    top: -3px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:56:28.960

您需要做的就是更改该元素的盒子模型。

```
.button {
  -moz-box-sizing: border-box; 
  -webkit-box-sizing: border-box; 
  box-sizing: border-box;
} 
```

这可确保填充量不会添加到整体宽度或高度，并且无论填充（或边框）值如何，宽度和高度仍保持您指定的大小。

想知道更多阅读这篇文章： http: [//paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T05:57:55.743

有几种方法可以做到：

```
.button {
    position: relative;
    top: -5px; /* will result in .button moving 5px 'up' from where it is */
} 
```

或者您可以调整边距：

```
.button {
    margin-top: -5px;
} 
```

但是请注意，调整边距会影响相对于 .button 放置的任何元素的位置，而指定 'top' 值不会。记得声明'位置：相对;' 首先如果使用这种方法。

# php - PHP Get方法不采用

> ID：16098061
> 
> 赞同：0
> 
> 时间：2013-04-19T05:50:52.240
> 
> 标签：php, get, space

我`Get`在表单中使用方法从页面中获取名称变量，但它只获取名字并将部分留在空格之后。我想选择完整的字段以及空格。

```
<a href=view_contsheet.php?Patientid=<?php echo $_GET["id"]; ?>&Patientname=<?php echo $_GET["Patientname"];?>>View Visits</a> 
```

在这个链接中，只有名字被传递。如何连接完整的字段？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T05:55:08.310

这可能是因为 URL 中不允许使用空格。

```
<a href="view_contsheet.php?Patientid=<?php echo $_GET["id"]; ?>&Patientname=<?php echo urlencode($_GET["Patientname"]);?>">View Visits</a> 
```

`urlencode()`将使参数 url 友好。还有一个`urldecode()`功能，它做的相反`urlencode()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:54:05.800

试试这个代码

```
<a href="view_contsheet.php?Patientid=<?php echo $_GET["id"]; ?>&Patientname=<?php echo urlencode($_GET["Patientname"]);?>">View Visits</a> 
```

并在下一页使用`urldecode`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:13:27.660

在我看来，您根本不应该在网址中发送患者的姓名。

代替

```
<a href=view_contsheet.php?Patientid=<?php echo $_GET["id"];?>&Patientname=<?php echo $_GET["Patientname"];?>>View Visits</a> 
```

做

```
<a href="view_contsheet.php?Patientid=<?php echo $_GET["id"]; ?>">View Visits</a> 
```

在 view_contsheet.php 中，您根据 Patientid 获取名称

```
$id = $_GET['Patientid'];
"select Patientname FROM patients WHERE Id=$id".... 
```

# scala - 如何在多态 unapply 中使用提取器？

> ID：16098066
> 
> 赞同：5
> 
> 时间：2013-04-19T05:51:06.247
> 
> 标签：scala, extractor, unapply

我真的不明白这个小东西。我有一个抽象类 Box，其中包含不同类型的几个子类。例如

```
abstract class Box
class StringBox(val sValue : String) extends Box 
```

Box 的伴生对象中的 apply 方法很简单：

```
object Box{
    def apply(s: String)  = new StringBox(s)
    def apply(b: Boolean) = new BooleanBox(b)
    def apply(d: Double)  = new DoubleBox(d)
} 
```

所以我可以写

```
 val sb = Box("StringBox) 
```

好吧，写 unapply 会有些麻烦。我的第一个想法是对类型使用模式匹配，如下所示：

```
def unapply(b: Box) = b match {
  case sb: StringBox => Some(sb.sValue)
  case bb: BooleanBox => Some(bb.bValue)
  case db: DoubleBox => Some(db.dValue)
  case _ => None 
```

}

由于类型擦除，这根本不起作用。

第二次尝试是具有类型 T 的通用 Box[T] 和在每个子类中重新定义的抽象类型成员。例如：

```
 abstract class Box[T] {def value : T}
 class StringBox(val sValue : String)  extends Box[String] { 
   override def value : String = sValue
 } 
```

因此，我可以将我的 unapply 重新编写为：

```
def unapply[T](b: Box[T]) = b match {
  case sb: Box[String]  => Some(sb.value)
  case bb: Box[Boolean] => Some(bb.value)
  case db: Box[Double]  => Some(db.value)
  case _ => None 
```

不幸的是，这也不起作用。所以我猜 Box[String] 中的显式类型引用也会被删除，所以我需要使用类型清单。也许是这样的：

```
def unapply[T](b: Box[_])(implicit target: Manifest[T]): Option[T] = {

   if(b.value ==  target) Some(b.value.asInstanceOf[T])
   else None 
} 
```

此代码编译（2.10），但仍然没有所需的隐式转换。为什么？

简单的问题，有没有办法在不使用反射或清单的情况下进行值提取？

真正让我感到困惑的是，是否有一种简单的（r）方法可以结合多态性和模式匹配？如果没有，Scala 中是否有其他方法可以实现类似的效果？

有什么想法或建议吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T08:06:10.170

Prolly你可以试试这个.. :)

```
 abstract class Box[T](val v: T)

  object Box {
    def apply(s: String) = new StringBox(s)
    def apply(b: Boolean) = new BooleanBox(b)
    def apply(d: Double) = new DoubleBox(d)

  }

  class StringBox(sValue: String) extends Box(sValue)
  object StringBox {
    def unapply(b: StringBox) = Some(b.v)
  }

  class BooleanBox(sValue: Boolean) extends Box(sValue)
  object BooleanBox {
    def unapply(b: BooleanBox) = Some(b.v)
  }

  class DoubleBox(sValue: Double) extends Box(sValue)
  object DoubleBox {
    def unapply(b: DoubleBox) = Some(b.v)
  } 
```

您可以将其用作——

```
 def useCase[T](box: Box[T]) = box match {
    case StringBox("StringBoxxx") => "I found the StringBox!"
    case StringBox(s) => "Some other StringBox"
    case BooleanBox(b) => {
             if (b)  "Omg! its true BooleanBox !"
             else "its false BooleanBox :("
             }
    case DoubleBox(x) => {
                if (x > 3.14)  "DoubleBox greater than pie !"
                else if (x == 3.14) "DoubleBox with a pie !"
                else "DoubleBox less than a pie !"
    }
    case _ => "What is it yaa ?"
  }                                             

  useCase(Box("StringBoxxx")) //> res0: String = I found the StringBox!
  useCase(Box("Whatever !"))  //> res1: String = Some other StringBox
  useCase(Box(true))          //> res2: String = Omg! its true BooleanBox !
  useCase(Box(false))         //> res3: String = its false BooleanBox :(
  useCase(Box(4))             //> res4: String = DoubleBox greater than pie !
  useCase(Box(3.14))          //> res5: String = DoubleBox with a pie !
  useCase(Box(2))             //> res6: String = DoubleBox less than a pie ! 
```

# android - 调用警报管理器时，带有附加功能的待处理意图不起作用

> ID：16098070
> 
> 赞同：0
> 
> 时间：2013-04-19T05:51:10.687
> 
> 标签：android, alarmmanager, android-pendingintent

我在这里查看了很多人在传递额外内容时遇到类似问题的示例，但我仍然没有看到我的问题。

这是我设置附加功能的代码：

```
 PLAY_MUSIC = "Y";
        Intent intentAlarm = new Intent(this, MainActivity.class);
        intentAlarm.putExtra("playMusic",PLAY_MUSIC);
        intentAlarm.putExtra("mPos", mPos);
        // 12345 is a request code
        PendingIntent pIntent = PendingIntent.getActivity(this, 12345, 
                intentAlarm, PendingIntent.FLAG_UPDATE_CURRENT);
        AlarmManager am = (AlarmManager)(this.getSystemService( Context.ALARM_SERVICE ));
        am.set(AlarmManager.RTC_WAKEUP, calSet.getTimeInMillis(), pIntent ); 
```

这是我在 onCreate() 中获取它们的地方

```
protected void onCreate(Bundle savedInstanceState) {
    if (VERBOSE) Log.v(TAG, "+++ ON CREATE +++");
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);        

    Intent intent = getIntent();
    playMusicFlag = intent.getStringExtra("playMusic"); 
    mPos = intent.getIntExtra("mPos", 0);
    if (playMusicFlag == "Y") {
        if (VERBOSE) Log.v(TAG, "+++ playMusicFlag NOT SET+++");
        playSongs();
        showStopAlarmButton();
    } // if 
```

playMusicFlag 未设置。不调用 playSongs 和 showStopAlarm。有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:09:52.070

记录您的`playMusicFlag`字符串并检查您是否确实获得了任何值，然后比较您的字符串；

这边走：

```
if (playMusicFlag.equalsIgnoreCase("Y")) 
```

反而：

```
if (playMusicFlag == "Y") 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T06:02:54.810

检索时像这样使用

```
intent.getExtras().getString("playMusic"); 
```

我认为它有效。

# windows - Windows 上的字节到兆字节转换差异

> ID：16098073
> 
> 赞同：0
> 
> 时间：2013-04-19T05:51:20.917
> 
> 标签：windows, byte, memory-size, megabyte

为什么当我将字节转换为兆字节时数量会有所不同？

您必须再次将金额乘以 1000 000。我认为转换会自动为您做到这一点？ ![在此处输入图像描述](https://i.stack.imgur.com/2nD3e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:01:11.460

这对我来说似乎很好用：

![谷歌搜索结果](https://i.stack.imgur.com/lZBR4.png)

您可能想尝试它而不在左侧（输入字节的位置）写任何逗号。我相信某些语言环境（即美国英语；如果我错了，请纠正我）使用逗号作为小数点分隔符（就像我们在美国使用句点一样），这可能会混淆 Google 的转换器（它可能认为您输入了 169 个字节加上几乎一半）。

# javascript - 如何锁定 node.js 功能？

> ID：16098074
> 
> 赞同：-1
> 
> 时间：2013-04-19T05:51:25.787
> 
> 标签：javascript, node.js, mongodb

我在 mongoDB 中使用嵌入式数组，文档如下所示

```
{
    "_id" : ObjectId("516f89b393307a0f73533863"),
    "desc" : "LrOBVgWHHRyAxgYdKIwwgATcGTNBlz",
    "comments" :[
                 { 
                     "comment" : "superb",
                     "likeOrUnlike" : [
                          {"name":"kk",
                           "date":"2013/04/11",
                            "like":true
                           }
                      ]
                 }
      ]
   "date" : ISODate("2013-04-18T05:50:43.112Z"),
   "title" : "OaTHxDDMoINSaZCHCSNpJLNQyrqXGZ"

} 
```

我想要`update`评论中likeOrUnlike数组中的日期和like字段，在这种情况下无法自动更新，所以我想通过代码手动进行（检索整个文档并更新），

在这种情况下会出现并发问题

`scenario :`如果两个人同时喜欢相同的评论。

所以解决方案是锁定特定的更新功能

```
 var updateComments = function(id,data){
     db.posts.findOne({"_id" :id},function(err,res){
        // stuff   
        //mongo update
     });
 }; 
```

我不能发布整个代码。

我的问题是

如何锁定node.js中的功能？

锁定 node.js 功能是好习惯吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T05:03:52.070

[http://docs.mongodb.org/manual/reference/operator/positional/](http://docs.mongodb.org/manual/reference/operator/positional/)

使用 mongodb 位置运算符更新数组内的对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:27:43.160

锁定应该是最后的手段。使用 $push ( [http://docs.mongodb.org/manual/reference/operator/push/](http://docs.mongodb.org/manual/reference/operator/push/) ) 或其他集合。

# .net - 本地时间如何表示EOT？

> ID：16098076
> 
> 赞同：1
> 
> 时间：2013-04-19T05:51:30.337
> 
> 标签：.net, timezone, nodatime

我有一些正在查看区域间隔的 NodaTime 代码：

```
var zone = DateTimeZoneProviders.Tzdb["America/Phoenix"];
var interval = zone.GetZoneInterval(SystemClock.Instance.Now);
Console.WriteLine(interval.End);
Console.WriteLine(interval.IsoLocalEnd); 
```

`interval.End`输出`EOT`，这是预期的，因为该区域不使用夏令时。但我无法输出该`interval.IsoLocalEnd`值。它抛出一个异常：

```
System.ArgumentOutOfRangeException was unhandled
  HResult=-2146233086
  Message=Value should be in range [-27255-31195]
Parameter name: year
Actual value was 31197.
  Source=NodaTime
  ParamName=year
  StackTrace:
       at NodaTime.Utility.Preconditions.CheckArgumentRange(String paramName, Int32 value, Int32 minInclusive, Int32 maxInclusive)
       at NodaTime.Calendars.BasicCalendarSystem.GetYearTicks(Int32 year)
       at NodaTime.Calendars.GregorianCalendarSystem.GetYearTicks(Int32 year)
       at NodaTime.Calendars.BasicGJCalendarSystem.GetMonthOfYear(LocalInstant localInstant, Int32 year)
       at NodaTime.Calendars.BasicCalendarSystem.GetMonthOfYear(LocalInstant localInstant)
       at NodaTime.Fields.BasicMonthOfYearDateTimeField.GetValue(LocalInstant localInstant)
       at NodaTime.LocalDateTime.get_Month()
       at NodaTime.Text.LocalDateTimePatternParser.<.cctor>b__8(LocalDateTime value)
       at NodaTime.Text.Patterns.DatePatternHelper.<>c__DisplayClassd`2.<>c__DisplayClass10.<CreateMonthOfYearHandler>b__c(TResult value, StringBuilder sb)
       at NodaTime.NodaAction`2.Invoke(TArg1 arg1, TArg2 arg2)
       at NodaTime.Text.Patterns.SteppedPatternBuilder`2.SteppedPattern.Format(TResult value)
       at NodaTime.Text.Patterns.PatternBclSupport`1.Format(T value, String patternText, NodaFormatInfo formatInfo)
       at NodaTime.LocalDateTime.ToString(String patternText, IFormatProvider formatProvider)
       at System.IO.TextWriter.WriteLine(Object value)
       at System.IO.TextWriter.SyncTextWriter.WriteLine(Object value) 
```

这是一个错误吗？或者这是预期的行为，我应该`interval.End == Instant.MaxValue`在尝试使用该`interval.IsoLocalEnd`值之前进行检查？

我正在使用 NodaTime 1.1.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:01:38.667

一般来说，Noda Time 在将时刻转换为接近（或）时间结束时的本地日期时存在一些问题。参见例如[issue 197](https://code.google.com/p/noda-time/issues/detail?id=197)和[issue 113](https://code.google.com/p/noda-time/issues/detail?id=113)。这似乎是同类问题的另一次出现。

我建议提交一个错误。不过，有一个建议：检查您是否在 Noda Time 1.0 中看到相同的结果：问题 197（在 1.1.0 中）的修复可能会导致这种回归。

# excel - Excel值计数

> ID：16098078
> 
> 赞同：0
> 
> 时间：2013-04-19T05:51:34.110
> 
> 标签：excel, excel-2007

今天早上我面临另一个excel问题。

我有一个数据集，数据样本如下。我的数据链接到呼叫中心的拨号器。所以我们有一个 Hour 列，它是拨打电话的时间，例如。7 = 早上 7 点，以此类推，有一个响铃持续时间列，它是电话响铃的持续时间，我们有一个方向，即通话的最终结束（例如，通话是否有效，我们是否进行了正确的联系人联系？通话无效）。

```
Hour    Ring Duration   Directions
10      1               4
7       1               3
10      0               5
9       1               3
13      0               3
10      0               4
16      0               5 
```

我想要做的是统计一个小时内的所有有效呼叫和无效呼叫。下面我制作了另一个小桌子，每个小时都有该呼叫的有效线索和无效线索，现在这是我的问题开始的地方。

所有方向为 5 的呼叫都是有效呼叫，其余呼叫无效，我需要每小时计算我们拥有的方向 5 的数量，我还需要计算其余的无效呼叫。我该怎么做呢？

这是我不知道该怎么做的另一张桌子：

```
Hour    Total Valid     Total Invalid
7       
8       
9       
10      
11      
12      
13      
14      
15      
16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:01:21.483

我找到了我的问题的答案：

```
=COUNTIFS($A$5:$A$156, 7,$C$5:$C$156,5) 
```

$A$5:$A$156 是我工作表上的小时列，7 是我检查的时间，$C$5:$C$156 是方向，5 是我的标准，所以它的工作原理是这样的。

# javascript - 为什么javascript在脚本标签与js文件中的性能不同

> ID：16098080
> 
> 赞同：4
> 
> 时间：2013-04-19T05:51:40.020
> 
> 标签：javascript, jquery, html

我正在使用一个为我的主页标题设置动画的 jquery 函数。当我在我的 html 中执行 javascript 时，一切正常（文本立即动画）。当我将函数移动到单独的 .js 文件中时，文本首先闪烁，然后动画。

正在运行 javascript 的 html：

```
<h1><a href="#home">This i</a></h1> 
```

html中的javascript：

```
<script>
    $(function() {
        $(".letter-container h1 a").lettering();
    });
</script> 
```

移动到 .js 文件时的 javascript：

```
$(function() {
        $(".letter-container h1 a").lettering();
}); 
```

我的问题是：

1.  为什么将 javascript 放置在 html 文件中的脚本标记与放置在单独的 .js 文件中时，javascript 的执行方式不同
2.  有什么办法可以将函数保留在 .js 文件中并修复延迟？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T05:54:33.063

当放入单独的`.js`文件时，它需要浏览器发出单独的 HTTP 请求（如果资源尚未缓存）。这意味着网络成为敌人。如果您在服务器上正确设置缓存，这应该不是什么大问题。

除此之外，Javascript 的解释/编译方式相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:11:32.440

这不仅是网络流量（下载额外的 js），也是执行 javascript 的**点**。

如果你有代码

```
<div id="div1">
......
</div>
<script type="text/javascript">
myfunction();
</script>
<div id="div2">
....
</diV> 
```

`myfunction`将在 div1 创建之后但在 div2 之前运行。

但是，如果您从包含在标头中的 .js 运行某些功能，它将在整个页面加载后运行（我假设您正在使用`$.ready()`或类似的东西）。因为浏览器会在页面加载期间显示元素（除了您将所有内容都放在 中`table`），因此您会看到文本闪烁。

# javascript - 根据本地 PC 区域的日期格式

> ID：16098084
> 
> 赞同：0
> 
> 时间：2013-04-19T05:51:55.257
> 
> 标签：javascript, date

我正在尝试创建一个需要根据 pc 区域设置显示日期格式的 JAVASCRIPT 代码。我需要将“2013 年 4 月 19 日”的以下模式表示为 04/19/2013 或“19/04/2013”​​或“2013/04/19”，以适用于该地区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:01:27.413

下面的方式，一种轻量级的方法，可能会有所帮助：[然而，有许多 jquery 插件/库可用）

1.  以 UTC 格式在 db 中保存日期（如果不是 utc 格式，则将其转换为 utc 格式）
2.  在 javascript 中，var localeDate = new Date("{Utc Date from Server}" + "utc") //只需在 "utc" 后面加上日期

如果您是 ASP.NET MVC 人，那么下面的代码段可能会有所帮助：

$("#spanTime").text(new Date('@Model.EventDateTimeStr' + "utc").stringFormat("MM/DD/YYYY"));

```
Date.prototype.stringFormat = function (format) {
    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
    var monthsFull = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

    var dt = this;
    var h = dt.getHours();
    var d = dt.getDate();
    var M = dt.getMonth() + 1;
    var yyyy = dt.getFullYear();
    var yy = padBefore((yyyy + "").substr(2, 2), 2);
    var m = dt.getMinutes();

    var dd = padBefore(d, 2);
    var MM = padBefore(M, 2);
    var mm = padBefore(m, 2);

    var MMM = months[M - 1];
    var MMMM = monthsFull[M - 1];

    var H = h;
    var HH = padBefore(h, 2);
    var hh = "";
    var tt = "PM";

    if (h >= 12) {
        if (h != 12) {
            h = h - 12;
        }
    } else {
        if (h == 0) h = 12;
        tt = " AM";
    }

    hh = padBefore(h, 2);

    return format
        .replace("hh", hh)
        .replace("h", h)

        .replace("HH", HH)
        .replace("H", H)

        .replace("mm", mm)
        .replace("m", m)

        .replace("dd", dd)
        .replace("d", d)

        .replace("MMMM", MMMM)
        .replace("MMM", MMM)
        .replace("MM", MM)
        /*.replace("M", M)*/

        .replace("yyyy", yyyy)
        .replace("yy", yy)

        .replace("tt", tt);

}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:03:13.043

您可以根据 navigator.language 格式化日期

看

[https://developer.mozilla.org/en-US/docs/DOM/window.navigator.language](https://developer.mozilla.org/en-US/docs/DOM/window.navigator.language)

```
var lang= navigator.browserLanguage || navigator.language || navigator.userLanguage; 
```

# html - 在 Rails 中两次解码 HTML

> ID：16098085
> 
> 赞同：0
> 
> 时间：2013-04-19T05:51:55.213
> 
> 标签：html, ruby-on-rails, ruby, decode

我从一个 XML 文件中提取数据，该文件以双重编码的 HTML 形式出现，我可以使用`raw`、`h`或`String.html_safe`. 将这些方法中的任何一个加倍似乎都不会进一步解码，因此当我在视图中打印字符串时，它会呈现为编码的 HTML。

例如，我可能会得到字符串：

```
@paragraph = &amp;lt;p&amp;gt;This is a Paragraph.&amp;lt;/p&amp;gt; 
```

当我打印时，`<%= @paragraph %>`我会`&lt;p&gt;This is a Paragraph.&lt;/p&gt;`显示在我的浏览器中。打印`<%= raw @paragraph %>`渲染`<p>This is a Paragraph.</p>`。

到目前为止，正如预期的那样。但是现在当我再次尝试解码时：`<%= raw (raw @paragraph) %>`我得到`<p>This is a Paragraph.</p>`. 无论我调用多少次`raw`或其他两种方法中的任何一种，我都会继续获得编码的 HTML。

我正在寻找的当然是：

这是一个段落。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:01:24.367

使用 CGI.escapeHTML/CGI.unescapeHTML

```
 irb(main):043:0> CGI.escapeHTML "<p>This is a Paragraph.</p>"
 => "&lt;p&gt;This is a Paragraph.&lt;/p&gt;"

 irb(main):090:0> CGI.unescapeHTML "&lt;p&gt;This is a Paragraph.&lt;/p&gt;"
 => "<p>This is a Paragraph.</p>" 
```

您可能还想查看[http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags](http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags)以删除 html 标签

# c# - 在 CustomEditor.cshtml 中访问模型表达式

> ID：16098087
> 
> 赞同：1
> 
> 时间：2013-04-19T05:52:05.917
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

在 MVC 4 中，如何访问 BookingPaymentMode.cshtml 中的模型表达式？

```
@Html.EditorFor(m => m.PaymentMode, "BookingPaymentMode") 
```

和

```
@model MVCApplication.ViewModel.PaymentMode
@using System.Text

@{        
    var htmlHelper = this.Html;
    var  metaData = this.ViewData.ModelMetadata;
    var expression=???
} 
```

但是我是用 HTML 助手类做的

```
 @Html.RadioButtonForEnum(m => m.Gender)

public static MvcHtmlString RadioButtonForEnum<TModel, TProperty>(
    this HtmlHelper<TModel> htmlHelper,
    Expression<Func<TModel, TProperty>> expression
)
    {

        var metaData = ModelMetadata.FromLambdaExpression(
                                                 expression, htmlHelper.ViewData)

   } 
```

这就是我的 UI 的外观。

![在此处输入图像描述](https://i.stack.imgur.com/pHZWW.png)

付款可以是一种`Partly Paid, Fully Paid, UnPaid`

它还有一个部分支付金额的文本框。

我决定使用 enum 和 CustomEditor。有没有一种简单的方法可以做到这一点？

# objective-c - 目标 C：在某个特定索引处为 UILabel 设置动画

> ID：16098103
> 
> 赞同：0
> 
> 时间：2013-04-19T05:53:19.767
> 
> 标签：objective-c, xcode, animation, uilabel

我正在开发一个应用程序，我必须在 UILabel 中显示一个句子，几秒钟后，第一个单词应该动画放大和缩小，然后是第二个单词，依此类推，直到整个句子完成。

现在问题是我得到了[大量](https://stackoverflow.com/questions/12213598/using-animations-with-uilabel)关于动画整个 UILabel 的教程，但我无法在特定索引处为单个单词制作动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:40:40.250

我以字符串形式存储了整个故事，然后使用“componentsSeparatedByString”函数创建了 nsmutable 数组（使用空格作为分隔符），我从中为每个数组创建了 uilabel，这样我在不同的标签中获得了句子/故事的所有单词，其中我突出显示所需的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:53:38.330

试试这个代码...

```
- (void)animateLableString:(NSString*)text delayInterval:(NSTimeInterval)delay
     {    
        [self.label setText:@""];

     for (int i=0; i<text.length; i++)
     {
       dispatch_async(dispatch_get_main_queue(),
        ^{
            [self.label setText:[NSString stringWithFormat:@"%@%C", self.label.text, [text 
             characterAtIndex:i]]];
             label.font = [UIFont boldSystemFontOfSize:45]; 
             label.transform = CGAffineTransformScale(messageLabel.transform, 0.25, 0.25); 

           [UIView animateWithDuration:1.0 animations:^{
            label.transform = CGAffineTransformScale(messageLabel.transform, 4, 4);
            }];
            });

            [NSThread sleepForTimeInterval:delay];
        }
    } 
```

在你想开始动画的地方调用它......

```
-(void)someMethod
{

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0),
    ^{
        [self animateLableString:@"This is animating" delayInterval:0.5];
    });
} 
```

# intellij-idea - 在 Intellij IDEA 中按名称查找包

> ID：16098104
> 
> 赞同：27
> 
> 时间：2013-04-19T05:53:21.890
> 
> 标签：intellij-idea

我知道 java 包的名称，我想在项目中找到它。如何快速完成`Intellij IDEA`？有键盘快捷键吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T11:46:37.490

Open `Project View` tool window, switch to the **Packages** view mode, click on the gear icon, enable **Flattern Packages** option, disable **Show Modules** option.

Start typing the package name to activate the **speed search**.

* * *

Another option is to use `Navigate` | **Class**, type `your.package.*`, select some class, press `Alt`+`Home` for the **navigation bar** popup, use arrows to select the package, press `F4` (may not work if navigation bar is not floating, but enabled in the View menu instead).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-24T20:15:49.510

还有一种更简单的方法，虽然具体来说，它不会只搜索包。

您可以做的是全局搜索：

> Ctrl + Shift + F

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T10:55:13.247

确保专注于项目选项卡，然后敲击键盘，看看发生了什么，也许对你有帮助:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-07T12:30:07.207

另一种更简单的方法是使用“到处搜索”选项 1\. 双击 Shift 按钮。2\. 输入包名。

虽然结果不会在列表的顶部，但它很容易找到。

# android - Android 布局创建动态运行时

> ID：16098113
> 
> 赞同：0
> 
> 时间：2013-04-19T05:54:09.150
> 
> 标签：android, android-layout

我需要像这样通过代码动态创建布局，而不是通过 XML 创建。我可以设计垂直或水平按钮。但我需要在同一个布局中同时创建垂直和水平。

请帮助我以简单的方式做到这一点。提前致谢

![在此处输入图像描述](https://i.stack.imgur.com/tFHT3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:33:00.237

**很简单，首先创建父线性布局**

```
LinearLayout parentLayout = new LinearLayout(this); 
```

**设置此父布局的参数和方向：**

```
LinearLayout.LayoutParams layoutParam = new LinearLayout.LayoutParams( LinearLayout.LayoutParams.FILL_PARENT,  LinearLayout.LayoutParams.FILL_PARENT)

parentLayout.setOrientation(VERTICAL OR HORIZONTAL);
parentLayout.setLayoutParams(layoutParam); 
```

就是这样，你的父布局已经生成。**现在创建新布局并开始将其添加到此布局中。例如：**

```
LinearLayout firstLayout = new LinearLayout(this);
LinearLayout secondLayout = new LinearLayout(this);
LinearLayout thirdLayout = new LinearLayout(this);

parentLayout.addView(firstLayout);
parentLayout.addView(secondLayout);
parentLayout.addView(thirdLayout); 
```

您还需要单独设置所有布局的参数。您可以根据需要优化代码。希望它有效！

# java - java.util.NoSuchElementException 错误

> ID：16098114
> 
> 赞同：1
> 
> 时间：2013-04-19T05:54:24.543
> 
> 标签：java, readfile

我尝试从文本文件中读取整行并以不同的方式显示它们。例如，

```
 123456J;Gabriel;12/12/1994;67;67;89; 
```

但控制台中的结果将是：

```
 123456J Gabriel 72(which is average of three numbers) 
```

这是我的代码：

```
 public class Student{

String adminNo;
String name;
GregorianCalendar birthDate;
int test1,test2,test3;

public Student(String adminNo,String name,String birthDate,int test1, int test2, int test3){
    this.adminNo = adminNo;
    this.name = name;
    this.birthDate = MyCalendar.convertDate(birthDate);
    this.test1 = test1;
    this.test2 = test2;
    this.test3 = test3;
}

public Student(String studentRecord){
    String strBirthDate;
    Scanner sc = new Scanner(studentRecord);
    sc.useDelimiter(";");
    adminNo = sc.next();
    name = sc.next();
    strBirthDate = sc.next();
    birthDate = MyCalendar.convertDate(strBirthDate.toString());
    test1 = sc.nextInt();
    test2 = sc.nextInt();
    test3 = sc.nextInt();
}

public int getAverage(){ 
    return (( test1 + test2 + test3 ) / 3 ) ;
}

public String toString(){
    return (adminNo + " " + name + " " + getAverage());
}

public static void main(String [] args){

    Student s = new Student ("121212A", "Tan Ah Bee", "12/12/92", 67, 72, 79);
    System.out.println(s);

    String fileName = "student.txt";
    try{
        FileReader fr = new FileReader(fileName);
        Scanner sc = new Scanner(fr);

        while(sc.hasNextLine()){
            Student stud = new Student(sc.nextLine());
            System.out.println(stud.toString());
        }

        fr.close();
    }catch(FileNotFoundException exception){
        System.out.println("File " + fileName + " was not found");
    }catch(IOException exception){
        System.out.println(exception);
    }
} 
```

和错误：

```
 Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at Student.<init>(Student.java:24)
at Student.main(Student.java:52) 
```

但我收到**java.util.NoSuchElementException**错误。我错过了什么吗？它现在可以工作，但突然出现错误。我不知道为什么。

任何帮助将不胜感激在此先感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:13:35.163

您可以将 Student 构造函数修改为如下所示，以检查发生异常时的行。

```
public Student(String studentRecord){
    String strBirthDate;
    Scanner sc = new Scanner(studentRecord);
    sc.useDelimiter(";");

    try {
         adminNo = sc.next();
         name = sc.next();
         strBirthDate = sc.next();
         birthDate = MyCalendar.convertDate(strBirthDate.toString());
         test1 = sc.nextInt();
         test2 = sc.nextInt();
         test3 = sc.nextInt();
    } catch (NoSuchElementException exception)
        System.out.println("NoSuchElementException, the line was: " + studentRecord);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:07:31.593

在 Scanner 上调用 next...() 之前，请确保 Scanner 实际上具有避免该异常的元素。

# vim - Vim + cscope：如何使 Ctrl-] 始终跳转到第一个结果

> ID：16098115
> 
> 赞同：2
> 
> 时间：2013-04-19T05:54:28.977
> 
> 标签：vim, cscope

当我在 vim 中使用 ctags 时，`CTRL-]`总是跳转到第一个结果。在同一个代码库中，在 vim 中启用 cscope 后，`CTRL-]`不再直接跳转，而是给了我一个选择（如`:ts`）。我怎样才能让它默认跳转到第一个结果？`:ts`以后需要的时候再用。

# jquery - 在第二次单击时停止动画容器

> ID：16098119
> 
> 赞同：1
> 
> 时间：2013-04-19T05:54:38.367
> 
> 标签：jquery, animation

这里的问题是我点击主导航链接它动画左侧的主要内容，但我点击相同的链接两次内容消失。任何人请帮助我：

这是链接[http://mannatstudio.com/animation/](http://mannatstudio.com/animation/)

这是我正在使用的代码：

```
var tab, lasttab;
var defaultTab = '#profile-tab';
var direction = "rtl"; // Right To Left

$('.tab').hide();

function showTab(id) {
    id = id.replace("-tab", "");
    //window.location.hash = id;

    if (tab) {
        direction = (tab.attr('data-index') < $(id + "-tab").attr('data-index')) ? "rtl" : "ltr";
        lasttab = tab;
        lasttab.animate({
            'margin-left': (direction == "rtl") ? -0 - $(window).width() : -0 + $(window).width(),
            opacity: 1
        }, 1000, "easeInOutExpo", function () {
            $(this).hide();
        });

        if (tab.attr('id') == "team-tab") {
            $('#members-tab').animate({
                'margin-left': $(window).width(),
                opacity: 1
            }, 1000, "easeInOutExpo", function () {
                $(this).hide();
                $(this).unbind('click');
            });
        }
    }

    $('.nav').find('.current').removeClass('current');
    $('a[href="' + id + '"]').parent().addClass('current').prev().css('');

    tab = $(id + "-tab");
    tab.css({
        'margin-left': (direction == "rtl") ? -0 + $(window).width() : -0 - $(window).width(),
        opacity: 1
    }).show().animate({
        'margin-left': 0,
        opacity: 1,
    }, 1000, "easeInOutExpo");

    if (id == "#team") {
        $('#members-tab').css({
            'margin-left': $(window).width()
        }).show().animate({
            'margin-left': 0
        }, 1000, "easeInOutExpo").find('.tab').show();

    }

    setFooterY();
}

function setFooterY() {
    var h = tab.height() + 150 + 0;

    if (tab.attr('id') == "team-tab") {
        $('#members-tab').height($('#members-tab').find('.page').height() + 0);
        h += $('#members-tab').height() - 0;
    }

    $('#content').height(h);
    $('#vignettage').height(0 + h);
}

if ($('.nav').length > 0 && $('#news-page').length == 0) {
    $('.nav').on('click', 'a', function (e) {
        e.preventDefault();
        showTab($(e.target).attr('href'));

    });

    if (window.location.hash != "") {
        showTab(window.location.hash);
    } else {
        showTab(defaultTab);
    }

    $(document).ready(function () {
        setTimeout(setFooterY, 500);
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:21:47.460

我认为您应该在为其中的任何内容设置动画之前检查函数中的`lasttab`and`tab`变量。`showTab`

下面的代码用于`showTab`检查下面标记的更改`//changed`。

```
function showTab(id) {
  id = id.replace("-tab", "");
  //window.location.hash = id;

  if (tab) {
    direction = (tab.attr('data-index') < $(id + "-tab").attr('data-index')) ? "rtl" : "ltr";
    lasttab = tab;
    lasttab.animate({
        'margin-left': (direction == "rtl") ? -0 - $(window).width() : -0 + $(window).width(),
        opacity: 1
    }, 1000, "easeInOutExpo", function () {
        $(this).hide();
    });

    if (tab.attr('id') == "team-tab") {
        $('#members-tab').animate({
            'margin-left': $(window).width(),
            opacity: 1
        }, 1000, "easeInOutExpo", function () {
            $(this).hide();
            $(this).unbind('click');
        });
    }
  }

  $('.nav').find('.current').removeClass('current');
  $('a[href="' + id + '"]').parent().addClass('current').prev().css('');

  tab = $(id + "-tab");
  if (lasttab !== tab) { //changed
    tab.css({
     'margin-left': (direction == "rtl") ? -0 + $(window).width() : -0 - $(window).width(),
     opacity: 1
     }).show().animate({
     'margin-left': 0,
     opacity: 1,
    }, 1000, "easeInOutExpo");
  }

  if (id == "#team") {
    $('#members-tab').css({
        'margin-left': $(window).width()
    }).show().animate({
        'margin-left': 0
    }, 1000, "easeInOutExpo").find('.tab').show();

  }

  setFooterY();
} 
```

顺便说一句（顺便说一句）在[这里](http://www.slidesjs.com/)检查 jquery 滑块非常好，任何您将获得已经测试过的各种浏览器的响应滑块。:D

## 更新

检查下面的完整工作示例，除了内容高度不适用于我在`setFooterY`function.xml 中定义的内容高度。

```
 var tab, lasttab;
var defaultTab = '#profile-tab';
var direction = "rtl"; // Right To Left

$('.tab').hide();

function showTab(id) {
    id = id.replace("-tab", "");
    //window.location.hash = id;

    if (tab) {
        direction = (tab.attr('data-index') < $(id + "-tab").attr('data-index')) ? "rtl" : "ltr";
        lasttab = tab;
        lasttab.animate({
            'margin-left': (direction == "rtl") ? -0 - $(window).width() : -0 + $(window).width(),
            opacity: 1
        }, 1000, "easeInOutExpo", function () {
            $(this).hide();
        });

        if (tab.attr('id') == "team-tab") {
            $('#members-tab').animate({
                'margin-left': $(window).width(),
                opacity: 1
            }, 1000, "easeInOutExpo", function () {
                $(this).hide();
                $(this).unbind('click');
            });
        }
    }

    $('.nav').find('.current').removeClass('current');
    $('a[href="' + id + '"]').parent().addClass('current').prev().css('');

    tab = $(id + "-tab");
    tab.css({
        'margin-left': (direction == "rtl") ? -0 + $(window).width() : -0 - $(window).width(),
        opacity: 1
    }).show().animate({
        'margin-left': 0,
        opacity: 1,
    }, 1000, "easeInOutExpo");

    if (id == "#team") {
        $('#members-tab').css({
            'margin-left': $(window).width()
        }).show().animate({
            'margin-left': 0
        }, 1000, "easeInOutExpo").find('.tab').show();

    }

    setFooterY();
}

function setFooterY() {
    var h = tab.height() + 150 + 0;

    if (tab.attr('id') == "team-tab") {
        $('#members-tab').height($('#members-tab').find('.page').height() + 0);
        h += $('#members-tab').height() - 0;
    }

    $('#content').height(h);
    $('#vignettage').height(0 + h);
}

if ($('.nav').length > 0 && $('#news-page').length == 0) {
    $('.nav').on('click', 'a', function (e) {
        e.preventDefault();
        var clickedAnchor = $(e.target);
        if (!clickedAnchor.parent().hasClass('current')) {
            showTab(clickedAnchor.attr('href'));
        }

    });

    if (window.location.hash != "") {
        showTab(window.location.hash);
    } else {
        showTab(defaultTab);
    }

    $(document).ready(function () {
        setTimeout(setFooterY, 500);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:14:21.577

添加验证您要显示的 div 是否已经可见并且不对其进行动画处理：

```
...

if ($('.nav').length > 0 && $('#news-page').length == 0) {
    $('.nav').on('click', 'a', function (e) {
        e.preventDefault();
       if(!$(''+$(e.target).attr('href')+'-tab').is(':visible')){
        showTab($(e.target).attr('href'));
       }

});

... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:16:18.803

我可以在您分配`class="current"`给选定选项卡的代码中看到。`onclick`您可以使用此类禁用当前锚点。

```
$('.current a').click(function(e) {
e.preventDefault();
}); 
```

# android - pagechange 方法在 android 2 上不起作用

> ID：16098128
> 
> 赞同：1
> 
> 时间：2013-04-19T05:55:05.493
> 
> 标签：android, jquery, jquery-mobile, mobile

我已经建立了一个小型移动应用程序，在测试过程中，我偶然发现了运行 Android 版本 2 的旧版本移动设备的问题。请注意，iPhone、iPad 和更新版本的 Android，即 4.xx 可以很好地显示页面。问题如下：

直接从链接调用页面时：

```
<a href="#SSMain" data-icon="home" data-theme="e">Home</a> 
```

它正确显示。

但是，当链接上有点击处理程序时，如下所示：

```
$(document).on('click', '#lstAddrList li', function ()
    {
        var anchor = $(this).find('a');
        sessionStorage.SiteAddr = anchor.attr('id');
        changePage();
    }); 
```

列表行（在这种情况下）保持选中状态，没有任何反应。只有在调用页面直接从浏览器刷新后，才会显示被调用页面。我感觉较旧的 Android 无法正确处理 changePage() 方法。

你会有一些想法吗？

# python - 来自极坐标的矢量/线

> ID：16098130
> 
> 赞同：0
> 
> 时间：2013-04-19T05:55:16.970
> 
> 标签：python, vector, matplotlib

如何使用matplotlib在python中从极坐标（大小和角度）而不是直角坐标（x，y）开始绘制矢量/线？几天前我才开始学习python。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:00:15.597

通过执行以下操作将极坐标转换为笛卡尔坐标：

```
x = magnitude*cos(angle)
y = magnitude*sin(angle) 
```

注意：仔细检查您使用的是度数还是弧度。通常 cos 和 sin 期望弧度。要将角度转换为弧度，请乘以`(2*pi)/360`。要将弧度转换为角度，请乘以`360/(2*pi)`。

# java - 如何获取数组列表 和扫描仪玩好？

> ID：16098134
> 
> 赞同：5
> 
> 时间：2013-04-19T05:55:39.973
> 
> 标签：java, casting, arraylist, java.util.scanner

```
import java.util.*;

public class CyclicShiftApp{

   public static void main(String[] args){
      Scanner scan = new Scanner(System.in);
      ArrayList<Integer> list = new ArrayList<Integer>();
      while(scan.hasNextInt()){
         list.add(scan.nextInt());
      }
      Integer[] nums = new  Integer[list.size()];
      nums = list.toArray(nums);
      for(int i = 0;i < nums.length; i++){
      System.out.println(nums[i]);
      }   
} 
```

多亏了穷人调试，我发现`while(scan.hasNextInt())`实际上并没有添加任何东西。可能出了什么问题？我的 google-fu 是软弱还是缺乏专业知识让我失望了？我对编程很陌生，所以对列表不熟悉，所以认为这将是一个不错的第一步，但有些东西并没有加起来。它也编译得很好，所以它不是语法（不再）。也许是选角问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:08:51.360

你的问题在这里：

```
 while(scan.hasNextInt()){  <-- This will loop untill you enter any non integer value
     list.add(scan.nextInt());
  } 
```

您只需输入一个字符，例如`q`，一旦您完成输入所有整数值，然后您的程序将打印预期结果。

```
Sample Input :14 17 18 33 54 1 4 6 q 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:15:52.233

这行得通吗，Samwise 大师？

```
import java.util.*;

public class CyclicShiftApp{

public static void main(String[] args){
    Scanner scan = new Scanner(System.in);
    ArrayList<Integer> list = new ArrayList<Integer>();
    System.out.print("Enter integers please ");
    System.out.println("(EOF or non-integer to terminate): ");

    while(scan.hasNextInt()){
         list.add(scan.nextInt());
    }

    Integer [] nums = list.toArray(new Integer[0]);
    for(int i = 0; i < nums.length; i++){
       System.out.println(nums[i]);
    }
  }   
} 
```

我假设您需要将列表作为数组是有原因的，否则不需要转换为数组。正如 Jon Skeet 在评论中提到的那样，只有当流没有下一个 int 时，循环才会终止，即。如果您使用的是“java CyclicShiftApp < input_file.txt”，则为非整数值或文件的 EOF。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-10T11:32:24.830

```
import java.util.*;
class SimpleArrayList{
public static void main(String args[])
{
Scanner sc = new Scanner(System.in);
ArrayList <Integer> al2 = new ArrayList<Integer>();
System.out.println("enter the item in list");
while(sc.hasNextInt())
{
al2.add(sc.nextInt());
}
Iterator it1 = al2.iterator();
/*loop will be terminated when it will not get integer value */
     while(it1.hasNext())
{
 System.out.println(it1.next());
}
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-28T08:54:23.847

这是一起使用 Scanner 和 ArrayList 的最简单和最简单的方法之一。

```
import java.util.*;
public class Main
{
public static void main(String args[])
{
    Scanner sc=new Scanner(System.in);
    int num=sc.nextInt();
    ArrayList<Integer> list=new ArrayList<Integer>(num);
    for(int i=0;i<num;i++)
    {
    list.add(sc.nextInt());

   }
    Iterator itr=list.iterator();
        {
       while(itr.hasNext())
       {
           System.out.print(itr.next()+" ");
        }
        }
    }
} 
```

# web - 如何在 Visual Studio 2012 Express for Web 中重新启用中断未处理异常？

> ID：16098137
> 
> 赞同：2
> 
> 时间：2013-04-19T05:55:44.473
> 
> 标签：web, visual-studio-2012, exception-handling

当在调试模式下发生异常时，我在 Visual Studio 2012 Express for Web 中禁用了 System.NullReferenceException 中断。现在如何启用？缺少调试/异常菜单项。我在注册表中搜索 System.NullReferenceException 键，State 的值始终为 16418 - 与其他异常相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:36:55.193

我相信（但现在无法验证）这些选项保存在解决方案的 suo（解决方案用户选项）文件中，该文件与解决方案（sln）文件位于同一目录中。

您可以尝试将文件移动到不同的目录，看看您的异常是否回来了。您将放弃您已经完成的任何其他自定义（启动项目、断点、监视等）

或者您可以尝试创建一个扩展并将此功能添加回 express :-)

# c# - ObservableCollection 以及存储库

> ID：16098144
> 
> 赞同：2
> 
> 时间：2013-04-19T05:56:29.800
> 
> 标签：c#, wpf, xaml, mvvm, windows-8

我无法掌握 MVVM 中的 ObservableCollection 的概念。首先，我想指出我是在 Windows 8/Metro 应用程序中执行此操作，而不是 WPF 或 Silverlight。

根据 microsoft 文档，此集合具有以下用途：“表示一个动态数据集合，可在添加、删除项目或刷新整个列表时提供通知。” 据我了解，这在涉及绑定时对您有很大帮助。在网上我找到了很多简单的示例，通过在运行时创建 ObservableCollection 然后对其进行处理，但我没有找到将这个集合与存储库一起使用的正确方法。

假设我有以下存储库接口，它是 ORM 数据库后端的实现，或原始 ADO.NET 实现

```
public interface IRepository<T>
{
   ObservableCollection<T> GetAll();
   void Create();
   void Update();
   void Delete();
   T GetByKey(object key);
} 
```

和一个使用存储库作为模型的简单 ViewModel

```
public class ViewModel
{
   private ObservableCollection<Dummy> _obsListDummy;
   private RelayCommand _addCommand,_deleteCommand,_updateCommand;
   private IRepository<Dummy> _repositoryDummy;

   public class ViewModel()
   {
     _repositoryDummy=Factory.GetRepository<Dummy>();

   }  

   public ObservableCollection<Dummy> ObsListDummy
   {
     get
       {
          return _repositoryDummy.GetAll();
       }
   }

   public RelayCommand AddCommand
   {
     get
        {
           if (_addCommand == null)
       {
        _addCommand = new RelayCommand(p => DoAdd(); 
        //DoAdd method shows a popup for input dummy and then closes;
         );
       }
       return _myCommand;
        }

   }
   ........
} 
```

我的观点是一个带有网格的简单 XAML，虚拟对象也实现了 INotifyPropertyChanged。

现在，在添加或更新或删除此实现之后，ObservableCollection 不会刷新，我知道我可以使用 IEnumerable 代替，但我没有看到如何使存储库与 ObservableCollection 中的同步的优雅解决方案模型，除了订阅 CollectionChanged 并在那里处理所有状态，但似乎我会重复自己以及我在存储库中执行的逻辑。更糟糕的是，假设我想从我的存储库中获得一些推送通知，发送给 ObservableCollection。

我希望我了解我的问题。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:26:28.340

您应该`INotifyPropertyChanged`在您的 ViewModel 上实现，并且您的 ObsListDummy 属性应该通知 ViewModel 有关应用于集合的更改。所以它应该是这样的：

```
public class ViewModel: INotifyPropertyChanged
{
    // Declare the event 
    public event PropertyChangedEventHandler PropertyChanged;

    // Create the OnPropertyChanged method to raise the event 
    protected void OnPropertyChanged(string name)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(name));
        }
    }

    private ObservableCollection<Dummy> _dummyCollection;

    public ObservableCollection<Dummy> DummyCollection 
    {
        get { return _dummyCollection; }
        set
        {
            // Set the value and then inform the ViewModel about change with OnPropertyChanged
            _dummyCollection = value;
            OnPropertyChanged("DummyCollection");
        }
    }
} 
```

整个`INotifyPropertyChanged`接口和实现包括一些肮脏的工作，比如声明事件和创建一个辅助方法来引发事件，所以我建议你使用一些库，比如[MVVM Light](http://mvvmlight.codeplex.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:03:18.187

您应该使用 type 的成员`ObservableCollection`来存储您的`Dummy`ViewModel。在您的`Initialize`方法中，您从存储库中读取虚拟对象，创建`Dummy ViewModels`并将它们放入`ObservableCollection`. 现在，当您使用`Binding`to `ObsListDummy`（并从该集合中添加/删除，还请注意 Binding 仅适用于公共属性）时，您的视图将得到更新。

现在，您`ObservableCollection`每次读取都只有一个新的，不涉及任何事件，因此您的视图永远不会知道更改。

此外，您的 ViewModel 应实现 INotifyPropertyChanged。

# jquery - BlockUI 在 AJAX 调用期间仅通过 jQuery DatePicker

> ID：16098148
> 
> 赞同：1
> 
> 时间：2013-04-19T05:56:49.863
> 
> 标签：jquery, jquery-ui-datepicker, jquery-blockui

我正在尝试在 onChangeMonthYear 回调期间将 jQuery UI DatePicker 与 BlockUI 一起使用。在回调期间，我发出 AJAX 调用以获取当月可用日期的列表，并且我希望 BlockUI 在该请求完成时在日历上显示一条消息。

我见过很多开发人员阻止整个页面的例子，但我还没有看到开发人员试图用一条消息来阻止日历小部件本身的情况。当我尝试调用`$("#ui-datepicker-div").block()`时，日历上没有显示任何内容，但如果我只是这样做`$.blockUI({message: 'Test'});`，它会按预期工作。

这是我的回调函数：

```
 $.ajax({
        type: "POST",
        url: "/GetDaysForMonth",
        data: { 'Month': month },
        cache: false,
        beforeSend: function () {
            $("#ui-datepicker-div").block({message: "Loading..."});
        },
        success: function (result) {
            //set days on datepicker from result
        },
        complete: function () {
            $("#ui-datepicker-div").unblock();
        }
    }); 
```

我将不胜感激有关此行为的任何见解。

谢谢！

# c# - 使用行过滤器“过滤”数据表

> ID：16098150
> 
> 赞同：0
> 
> 时间：2013-04-19T05:57:01.710
> 
> 标签：c#, sql, datatable, rowfilter

我有一个`DataTable`dt。我想使用行过滤器过滤表 dt 的数据。我的查询有一些 sql 预定义函数，如 - `REPLACE`, `CHARINDEX`, `SUBSTRING`. 但是在对`DataTable`某些问题应用行过滤器时。

谷歌搜索后我发现这篇文章`http://www.csharp-examples.net/dataview-rowfilter/`，我认为行过滤器不支持 sql 函数（REPLACE，CHARINDEX），但在 sql server 中它运行良好。我如何使用行过滤器或任何其他方法将数据过滤到`DataTable`

我的查询 -

```
SELECT *
FROM TblUsers
WHERE REPLACE(substring(COLUMN-NAME,0,charindex(';',COLUMN-NAME)),'REPLACE-KEYWORD','REPLACE WITH') like 'name ie8' 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:08:35.763

您将不得不稍微简化您的查询，因为 DataTable 行过滤不支持 SQL 中可用的许多功能。[查看这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression%28v=vs.100%29.aspx)，详细了解您可以使用的语法、函数和运算符。

# android - Android 在退出应用程序和显示 Toast 时取消 Toast

> ID：16098151
> 
> 赞同：10
> 
> 时间：2013-04-19T05:57:01.787
> 
> 标签：android, toast

我在这里读过这类问题，但答案似乎不起作用。

我`Toast`在用户单击按钮时显示。当用户连续单击按钮时，即使用户退出活动，toast 也会一次又一次地显示。

吐司的长度很短。由于文本较长，无法更改吐司的长度。

这是我现在尝试过的：

```
 Toast toast;
    toast=Toast.makeText(getApplicationContext(),"text",Toast.LENGTH_SHORT);
    if(toast.getView().isShown()==false){
         toast.show();
    } 
```

这没有用。

我试过了 ：

```
 if(toast.getView().isShown()==true){            
        toast.cancel();
    } 
```

在`onStop()`. 由于某种原因，取消方法永远不会起作用。

如果我`.cancel()`在显示应用程序之前放置...然后会有另一个空检查。但是在这样做之后也没有工作。我可以显示一个对话框而不是祝酒词，但这不是解决方案。

有没有办法检查吐司是否正在显示？

以供参考

*   [Android 中的 Toast 消息](https://stackoverflow.com/questions/5309879/toast-message-in-android)

*   [如果已经显示了一个 Toast，如何避免 Toast](https://stackoverflow.com/questions/6925156/how-to-avoid-a-toast-message-in-android-if-toast-message-is-already-running)

*   [如何防止多个 Toast 重叠](https://stackoverflow.com/questions/12922516/how-to-prevent-multiple-toast-overlaps)

*   [在 Android 中取消已打开的 toast](https://stackoverflow.com/questions/6744147/cancelling-and-already-open-toast-in-android)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T07:57:54.763

诀窍是跟踪显示的最后一个`Toast`，并取消那个。

我所做的是创建一个`Toast`包装器，其中包含对显示的最后一个 Toast 的静态引用。

当我需要显示一个新的时，我首先取消静态引用，然后再显示新的（并将其保存在静态中）。

这是我制作的包装器的完整代码`Boast`——它模仿了足够多的 Toast 方法供我使用。默认情况下，`Boast`将取消前一个，因此您不会建立等待显示的 Toast 队列。

这段代码可以在我的 Github gist 中找到：

*   [移动/吹嘘](https://gist.github.com/mobiRic/9786993)

如果您只想知道如何在退出应用程序时取消通知，您会在其中找到很多帮助。如果您有改进或建议，请随时 fork 并取得联系。这是一个非常古老的答案，但是一段时间以来，一些应用程序的代码在生产中已经稳定了。

顺便说一句 -这应该是大多数用例**的直接替代品。`Toast`**

* * *

```
package mobi.glowworm.lib.ui.widget;

import android.annotation.SuppressLint;
import android.content.Context;
import android.content.res.Resources;
import android.support.annotation.Nullable;
import android.widget.Toast;

import java.lang.ref.WeakReference;

/**
 * {@link Toast} decorator allowing for easy cancellation of notifications. Use this class if you
 * want subsequent Toast notifications to overwrite current ones. </p>
 * <p/>
 * By default, a current {@link Boast} notification will be cancelled by a subsequent notification.
 * This default behaviour can be changed by calling certain methods like {@link #show(boolean)}.
 */
public class Boast {
    /**
     * Keeps track of certain Boast notifications that may need to be cancelled. This functionality
     * is only offered by some of the methods in this class.
     * <p>
     * Uses a {@link WeakReference} to avoid leaking the activity context used to show the original {@link Toast}.
     */
    @Nullable
    private volatile static WeakReference<Boast> weakBoast = null;

    @Nullable
    private static Boast getGlobalBoast() {
        if (weakBoast == null) {
            return null;
        }

        return weakBoast.get();
    }

    private static void setGlobalBoast(@Nullable Boast globalBoast) {
        Boast.weakBoast = new WeakReference<>(globalBoast);
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Internal reference to the {@link Toast} object that will be displayed.
     */
    private Toast internalToast;

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Private constructor creates a new {@link Boast} from a given {@link Toast}.
     *
     * @throws NullPointerException if the parameter is <code>null</code>.
     */
    private Boast(Toast toast) {
        // null check
        if (toast == null) {
            throw new NullPointerException("Boast.Boast(Toast) requires a non-null parameter.");
        }

        internalToast = toast;
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Make a standard {@link Boast} that just contains a text view.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param text     The text to show. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, CharSequence text, int duration) {
        return new Boast(Toast.makeText(context, text, duration));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view with the text from a resource.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param resId    The resource id of the string resource to use. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, int resId, int duration)
            throws Resources.NotFoundException {
        return new Boast(Toast.makeText(context, resId, duration));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view. Duration defaults to
     * {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param text    The text to show. Can be formatted text.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, CharSequence text) {
        return new Boast(Toast.makeText(context, text, Toast.LENGTH_SHORT));
    }

    /**
     * Make a standard {@link Boast} that just contains a text view with the text from a resource.
     * Duration defaults to {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param resId   The resource id of the string resource to use. Can be formatted text.
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    @SuppressLint("ShowToast")
    public static Boast makeText(Context context, int resId) throws Resources.NotFoundException {
        return new Boast(Toast.makeText(context, resId, Toast.LENGTH_SHORT));
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Show a standard {@link Boast} that just contains a text view.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param text     The text to show. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     */
    public static void showText(Context context, CharSequence text, int duration) {
        Boast.makeText(context, text, duration).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view with the text from a resource.
     *
     * @param context  The context to use. Usually your {@link android.app.Application} or
     *                 {@link android.app.Activity} object.
     * @param resId    The resource id of the string resource to use. Can be formatted text.
     * @param duration How long to display the message. Either {@link Toast#LENGTH_SHORT} or
     *                 {@link Toast#LENGTH_LONG}
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    public static void showText(Context context, int resId, int duration)
            throws Resources.NotFoundException {
        Boast.makeText(context, resId, duration).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view. Duration defaults to
     * {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param text    The text to show. Can be formatted text.
     */
    public static void showText(Context context, CharSequence text) {
        Boast.makeText(context, text, Toast.LENGTH_SHORT).show();
    }

    /**
     * Show a standard {@link Boast} that just contains a text view with the text from a resource.
     * Duration defaults to {@link Toast#LENGTH_SHORT}.
     *
     * @param context The context to use. Usually your {@link android.app.Application} or
     *                {@link android.app.Activity} object.
     * @param resId   The resource id of the string resource to use. Can be formatted text.
     * @throws Resources.NotFoundException if the resource can't be found.
     */
    public static void showText(Context context, int resId) throws Resources.NotFoundException {
        Boast.makeText(context, resId, Toast.LENGTH_SHORT).show();
    }

    // ////////////////////////////////////////////////////////////////////////////////////////////////////////

    /**
     * Close the view if it's showing, or don't show it if it isn't showing yet. You do not normally
     * have to call this. Normally view will disappear on its own after the appropriate duration.
     */
    public void cancel() {
        internalToast.cancel();
    }

    /**
     * Show the view for the specified duration. By default, this method cancels any current
     * notification to immediately display the new one. For conventional {@link Toast#show()}
     * queueing behaviour, use method {@link #show(boolean)}.
     *
     * @see #show(boolean)
     */
    public void show() {
        show(true);
    }

    /**
     * Show the view for the specified duration. This method can be used to cancel the current
     * notification, or to queue up notifications.
     *
     * @param cancelCurrent <code>true</code> to cancel any current notification and replace it with this new
     *                      one
     * @see #show()
     */
    public void show(boolean cancelCurrent) {
        // cancel current
        if (cancelCurrent) {
            final Boast cachedGlobalBoast = getGlobalBoast();
            if ((cachedGlobalBoast != null)) {
                cachedGlobalBoast.cancel();
            }
        }

        // save an instance of this current notification
        setGlobalBoast(this);

        internalToast.show();
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T06:07:08.480

而不是取消吐司。更改文本。例如

```
 Toast t;

        t = Toast.makeText(this, "hi", 3000);
        t.show(); 
```

当您需要不同的吐司时，请使用

```
 t.setText("bye");
        t.show(); 
```

如果你想解除敬酒，只需打电话`t.cancel()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T06:03:08.370

您可以通过在 Toast 对象上调用 cancel() 来取消单个 Toast。AFAIK，不过，您无法取消所有未完成的 Toast。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T06:04:26.983

尝试保留最后一次 toast 的时间戳，并且在超时期限过去之前不允许任何新的 toast。

就像是：

```
private static final long TOAST_TIMEOUT_MS = 2000; // tweak this constant

private static long lastToastTime = 0;

public void onButtonClicked() {
  long now = System.currentTimeMillis();
  if (lastToastTime + TOAST_TIMEOUT_MS < now) {
    Toast.makeText(...).show();
    lastToastTime = now;
  }
} 
```

在用户退出应用程序后，我不会担心单个 toast 会停留一秒钟——这是一种非常标准的行为。

# hyperlink - 如何在 extjs4 的控制器中捕获超链接事件？

> ID：16098152
> 
> 赞同：1
> 
> 时间：2013-04-19T05:57:04.810
> 
> 标签：hyperlink, extjs4, extjs4.1, extjs-mvc, extjs2

我在 extjs4 MVC 中工作。我陷入了**必须捕获 extjs4 中超链接的事件单击的点**。我想在控制器的“控制”方法中捕获该事件。我尝试了很多但没有得到解决，请一些人就如何解决这个问题提出一些建议。

1）这是我的一些视图代码：-

```
Ext.define('AM.view.user.linkView', {
    extend:'Ext.form.Panel',
    alias:'widget.Link',
    title:'hyper link',
    items:[
    {
        xtype: 'box',
        autoEl: {tag: 'a', href: '#', html: 'Click on this button',id:'link'}
    }]
});// End of login class 
```

2）这是我的控制器代码：---

```
Ext.define('AM.controller.Users', {
    extend: 'Ext.app.Controller',

     views: ['user.linkView'],

     init: function() {
         this.control({
             'Link box[tag: a]':
                 click:this.linkClicked
         });
     },
     linkClicked:function()
     {
         console.log("clicked on link");
     }
}); 
```

我尝试了很多。但没有解决这个问题。我该如何解决这个问题请给一些建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:39:24.563

```
Ext.define('AM.view.user.linkView', {
    extend:'Ext.form.Panel',
    alias:'widget.Link',
    name:'linkPanel',
    title:'hyper link',
    items:[
    {
        xtype: 'box',
        autoEl: {tag: 'a', href: '#', html: 'Click on this button',id:'link'}
    }]
});// End of login class 
```

在控制器中使用以下代码

```
var controller = this;
controller.control({
   'linkPanel': {
      afterrender: function() {
           Ext.get('link').on('click', function() {
                controller.linkClicked();
           });
      }
   }
}); 
```

这将工作！！！！

谢谢

# ios - BarCode、QR Code 如何在不抓图的情况下识别？

> ID：16098154
> 
> 赞同：0
> 
> 时间：2013-04-19T05:57:09.023
> 
> 标签：ios, camera, qr-code, barcode-scanner, scanning

我想知道如何在不捕获条形码和 QR 码（甚至字符）的情况下识别它。我在许多应用程序中看到，当我们将设备放在其中任何一个（QR/条形码）之上时，应用程序会自动识别它并开始处理。是否有任何用于此的扫描机制？如何做到这一点？这其中涉及哪些机制？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:44:17.087

```
 1) The phone camera will be launched by the library it will autofocus and scans until it finds the decoded info from the image displayed by camera

  2) The info will be parsed by the library and it will give you the result. 
```

解码信息是“其中已解码信息的条形码”

```
Example for QRCode: The data is present as square 

        for barcode: the data is present as vertical lines 
```

该库具有用于根据格式检测代码类型和解码的所有逻辑。请阅读更多二维码/条形码库文档或实施它并学习

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-14T22:21:28.783

您可以使用`AVCaptureSession`，例如：

```
let session = AVCaptureSession()
var qrPayload: String?

func startSession() {
    guard !started else { return }

    let output = AVCaptureMetadataOutput()
    output.setMetadataObjectsDelegate(self, queue: .main)

    let device: AVCaptureDevice?

    if #available(iOS 10.0, *) {
        device = AVCaptureDevice
            .DiscoverySession(deviceTypes: [.builtInWideAngleCamera], mediaType: .metadataObject, position: .back)
            .devices
            .first
    } else {
        device = AVCaptureDevice.devices().first { $0.position == .back }
    }

    guard
        let camera = device,
        let input = try? AVCaptureDeviceInput(device: camera),
        session.canAddInput(input),
        session.canAddOutput(output)
    else {
        // handle failures here
        return
    }

    session.addInput(input)

    session.addOutput(output)
    output.metadataObjectTypes = [.qr]

    let videoLayer = AVCaptureVideoPreviewLayer(session: session)
    videoLayer.frame = view.bounds
    videoLayer.videoGravity = .resizeAspectFill

    view.layer.addSublayer(videoLayer)

    session.startRunning()
} 
```

并扩展您的视图控制器以符合`AVCaptureMetadataOutputObjectsDelegate`：

```
extension QRViewController: AVCaptureMetadataOutputObjectsDelegate {
    func metadataOutput(_ output: AVCaptureMetadataOutput, didOutput metadataObjects: [AVMetadataObject], from connection: AVCaptureConnection) {
        guard
            qrPayload == nil,
            let object = metadataObjects.first as? AVMetadataMachineReadableCodeObject,
            let string = object.stringValue
        else { return }

        qrPayload = string
        print(qrPayload)

        // perhaps dismiss this view controller now that you’ve succeeded
    }
} 
```

请注意，我正在测试以确保它`qrPayload`是`nil`因为我发现您可以看到`metadataOutput(_:didOutput:from:)`在视图控制器被解除之前被调用了几次。

# .net - 使用 .Net 客户端在 NEO4J 中动态创建节点 ID 和属性

> ID：16098155
> 
> 赞同：0
> 
> 时间：2013-04-19T05:57:36.337
> 
> 标签：.net, neo4j

如何使用 .Net 客户端动态创建节点及其属性？像这样的东西？

```
 Node node = new Node();
  node.AddProperty("Type", "Domain"); 
```

我不想在一个类中硬编码这个，即

```
 JsonProperty***("Bar")]***
  public string Foo { get; set; }

  var myNodeReference = client.Create(new MyNode { Foo = "bar" }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T22:01:26.490

在可在 Neo4j.org 下载页面下载的 Neo4j 服务器 v2.0 M06 版本中，您可以在 Cypher 查询中直接使用 JSON 到您的 Neo4j 服务器。

例子：

```
CREATE 
    (view0:event:view 
     { 
         key:'view0', 
         verb:'view', 
         past:'has viewed', 
         present:'is viewing', 
         future:'will view' 
      })-[:event]->d16 
```

您可以从我的 GitHub 存储库中获取以下 C# 类文件，该文件允许您将 Cypher 查询直接发送到 Neo4j 服务器：

[https://github.com/kbastani/predictive-autocomplete/blob/master/predictive-autocomplete/PredictiveAutocomplete/CypherQueryCreator.cs](https://github.com/kbastani/predictive-autocomplete/blob/master/predictive-autocomplete/PredictiveAutocomplete/CypherQueryCreator.cs)

您可以通过从 GitHub 转到以下 C# 类文件来查看其用法：

[https://github.com/kbastani/predictive-autocomplete/blob/master/predictive-autocomplete/PredictiveAutocomplete/Processor.cs](https://github.com/kbastani/predictive-autocomplete/blob/master/predictive-autocomplete/PredictiveAutocomplete/Processor.cs)

转到“GetRankedNodesForQuery”，我在这里复制了代码。

```
public static List<IGraphNode> GetRankedNodesForQuery(string index, string luceneQuery, string relationshipLabel, string labelPropertyName, int skip, int limit)
{
        var sb = new StringBuilder();
        sb.AppendLine("START node=node:{0}(\"{1}\")");
        sb.AppendLine("WITH node");
        sb.AppendLine("SKIP {2}");
        sb.AppendLine("LIMIT {3}");
        sb.AppendLine("WITH node");
        sb.AppendLine("MATCH n-[{4}]->node");
        sb.AppendLine("WITH node, count(distinct n) as size");
        sb.AppendLine("RETURN node.{5}? as label, size");
        sb.AppendLine("ORDER BY id(node)");
        sb.AppendLine("LIMIT {3}");

        string commandQuery = sb.ToString();

        commandQuery = string.Format(commandQuery, index, luceneQuery, skip, limit, !string.IsNullOrEmpty(relationshipLabel) ? string.Format(":{0}", relationshipLabel) : string.Empty, labelPropertyName);

        GraphClient graphClient = GetNeo4jGraphClient();

        var cypher = new CypherFluentQueryCreator(graphClient, new CypherQueryCreator(commandQuery), new Uri(Configuration.GetDatabaseUri()));

        var resulttask = cypher.ExecuteGetCypherResults<GraphNode>();
        var graphNodeResults = resulttask.Result.ToList().Select(gn => (IGraphNode)gn).ToList();
        return graphNodeResults;
} 
```

在其他版本中，您需要创建一个包装器。目前最简单的方法是升级到 2.0 版本。如果这对您不可行，请告诉我，我将编写 .NET C# 包装器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T08:43:31.657

您可以使用 Cypher.Net 创建动态节点和关系 [http://www.nuget.org/packages/CypherNet/](http://www.nuget.org/packages/CypherNet/)

（此处的文档和来源：[https](https://github.com/mtranter/CypherNet) ://github.com/mtranter/CypherNet ）

```
const string NEO_SERVER_URL = "http://localhost:7474/db/data/";
var sessionFactory = Fluently.Configure(NEO_SERVER_URL ).CreateSessionFactory();
var cypherSession = sessionFactory.Create();
var node = cypherSession.CreateNode(new { FirstName = "John", LastName = "Smith"});
dynamic dynamicNode = node;
dynamicNode.SomeProperty = "SomeValue";
dynamicNode.AnotherProperty = 123;
cypherSession.Save(node); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:58:16.227

当我为 neo4j 尝试了几个可用的 .NET 客户端时，我发现它们都不适合我的用例。由于这些客户端只是[REST API](http://docs.neo4j.org/chunked/stable/rest-api.html)的包装器，因此直接通过 REST 与服务器通信要容易得多。HTTP 和 JSON 支持在 .NET 的当前状态下非常出色。

这样你就可以动态地构建你的节点并以你喜欢的方式创建它们（[通过 REST 创建节点](http://docs.neo4j.org/chunked/snapshot/rest-api-nodes.html)）。

# java - 如何为 HBase 和 PostgreSQL 使用相同的域类

> ID：16098156
> 
> 赞同：0
> 
> 时间：2013-04-19T05:57:51.473
> 
> 标签：java, spring, hibernate, class, cross-platform

我有存储在 HBase 和 PostgreSQL 中的域对象。

在定义类时，用于 PostgreSQL 的注解不适用于 HBase，所以我最终定义了两个具有相同属性但注解不同的类。我使用 Hibernate/Spring 框架。

对于 PostgreSQL，我使用的域类如下：（片段）

```
@Entity
@Table(name="foo_bar")
public class FooBarPgsql implements Serializable {
    private static final long serialVersionUID = 5848293352035620189L;

    @Id
    @Column(name="id")
    String id;

    @Column(name="name")
    String name;
} 
```

对于 HBase，类是：

```
public class FooBarHbase {
    String id;
    String name;
} 
```

那么，如果我必须为 PostgreSQL 和 HBase 使用一个类，我应该如何定义这个类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T03:46:15.297

我认为您的组合类将比具有公共接口的两个类更复杂（可以根据需要分派）。数据库是如此不同，HBase 与 ORM 方法并不真正兼容。

我认为，与尝试完全合并类相比，仔细使用组合之类的东西会更划算。由于 Java 可以动态更改类属性，因此尝试以这种方式集中代码更有可能允许您使用一组干净的类来委派实际的数据库处理。

如果您真的想要，您可能可以这样做，但我不确定在代码质量方面肯定会花费的成本是否值得。让细节取决于接口，而不是相反。

# android - 如何实施亚马逊应用内购买

> ID：16098161
> 
> 赞同：2
> 
> 时间：2013-04-19T05:57:59.227
> 
> 标签：android, amazon, kindle-fire

在我的 Android 应用程序中，我想实现亚马逊应用内购买。但是不知道怎么实现？

是否有任何示例代码供我查看？

[https://developer.amazon.com/sdk/in-app-purchasing/sample-code/button-clicker.html](https://developer.amazon.com/sdk/in-app-purchasing/sample-code/button-clicker.html)

我在应用程序中使用该代码，我按照步骤操作，但我没有得到它。

谁能告诉我怎么用。。。。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:07:39.077

检查以下链接...整个过程描述了如何使用适用于 android 的亚马逊应用内 sdk：

[https://developer.amazon.com/sdk/in-app-purchasing/reference/google-to-iap.html](https://developer.amazon.com/sdk/in-app-purchasing/reference/google-to-iap.html)

# sql - 选择现有列的值作为新列的值，移动一格

> ID：16098162
> 
> 赞同：1
> 
> 时间：2013-04-19T05:58:01.040
> 
> 标签：sql, sql-server, select

我有一个问题，如果你能提供帮助，我将不胜感激。

在下图中，我想建立一个名为：最近分数的新列，如您所见，最近分数是用户上次获得的分数。如果我们按日期对行进行排序，则最近的得分是下一行的得分值。

![在此处输入图像描述](https://i.stack.imgur.com/Ql148.jpg)

我写了以下代码，但它是错误的:(

```
 SELECT [user-name],
         [submissions],
         [date],
         [score]

         (SELECT [score]
                 FROM [top-concept6] tc6
                 WHERE tc6.[user-name]=[top-concept6].[user-name]
                 AND tc6.[date]= (SELECT  TOP(1) [date] 
                 FROM [top-concept6] tcc6  
                 WHERE [date]<[top-concept6].[date] ORDER BY [date] DESC)) AS [recent-score]

   FROM [top-concept6] 
```

这是 sql 小提琴：[http ://sqlfiddle.com/#!3/74e3f](http://sqlfiddle.com/#!3/74e3f)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:04:25.173

请试试：

```
select 
    *,
    (select top 1 b.score from [top-concept6] b where b.[user-name]=a.[user-name] and b.date<a.date order by b.date desc) [Recent Score]
from 
    [top-concept6] a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:05:27.273

```
select *, 
(select top 1 score from [top-concept6]
 where [user-name]=t1.[user-name]
       and [date]<t1.[date]
 order by date desc    
) recent_score
from [top-concept6] t1 
```

[SQLFiddel 演示](http://sqlfiddle.com/#!3/44527/1)

# javascript - 下拉菜单上的 onclick 事件没有被调用

> ID：16098163
> 
> 赞同：0
> 
> 时间：2013-04-19T05:58:06.320
> 
> 标签：javascript, dynamic, drop-down-menu

我正在将以下组合框“选择页面”动态添加到 jsp 页面，该页面在更改时会填充另一个名为“对象”的组合框。选择页面下拉列表正在正确加载内容，但不会触发其上的事件。即填充对象。我一直在 populateObjects() 函数中保持警报，这表明它甚至没有调用此警报。请帮忙。

```
//Select Page
       var cell4 = row.insertCell(3);
       var element4 = document.createElement("select");
       element4.setAttribute('id', 'selPageRow' + rowCount);
       element4.setAttribute('name', 'selPageRow' + rowCount);
       element4.setAttribute('onClick', 'javascript:populateObjects(this.options[this.selectedIndex].innerHTML,'+rowCount+');');
       var PageArray = getPages();
       var option = document.createElement("option");
       option.text = "Select..."; 
       option.value = "select"; 
       element4.options.add(option);
       for(var i=0;i<PageArray.length;i++)
           {
               var option = document.createElement("option");
               option.text = PageArray[i].attributes[0].nodeValue; 
               option.value = PageArray[i].attributes[0].nodeValue;  
               element4.options.add(option);
           }
       cell4.appendChild(element4); 

// Code for populating Object dropdown

    function populateObjects(selectedValue,rowCount)
    {
        alert(selectedValue);
        var SelBox = document.getElementById('selObjRow' + rowCount);
        removeAllOptions(SelBox);
        var ObjArry = getObjects(selectedValue);

        var option = document.createElement("option");
        option.text = "Select..."; 
        option.value = "select"; 
        SelBox.options.add(option);
        if(ObjArry.length>0)
        {
            for(var i=0;i<ObjArry.length;i++)
               {
                   var option = document.createElement("option");
                   option.text = ObjArry[i].attributes[0].nodeValue; 
                   option.value = ObjArry[i].attributes[0].nodeValue;  
                   SelBox.options.add(option);
               }
        }
        else
        {
            var option = document.createElement("option");
            option.text = "None"; 
            option.value = "none"; 
            SelBox.options.add(option);
        }
        cell5.appendChild(SelBox);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:08:12.857

`onClick`将事件更改为`onChange`事件

```
 element4.setAttribute('onChange', 'javascript:populateObjects(this.options[this.selectedIndex].innerHTML,'+rowCount+');'); 
```

# javascript - 如何从 javascript 中删除或移除工具提示？

> ID：16098164
> 
> 赞同：3
> 
> 时间：2013-04-19T05:58:14.040
> 
> 标签：javascript, jquery, html

我正在使用工具提示在 javascript 中创建一个图标。

```
var icon = '&nbsp;&nbsp;<a class="icon-ok" data-type="reftooltip" title="Save" style="cursor: pointer"></a>'; 
```

此图标会动态显示和删除。当我使用以下代码从 javascript 中动态删除此图标时：

```
success: function(){
//other code//
saveparents.parent().parent().find('a.icon-ok').remove();
//other code//
} 
```

图标被删除，但工具提示“保存”仍显示在 UI 上。当我刷新页面时，它消失了。但我希望它在 icon-ok 被删除后立即删除。

我也在firebug中调试，发现在html页面中创建了一个用于工具提示的div类

```
<html><body>
<div ...................>... </div> 
<div class="tooltip fade top in" style="top: 156.5px; left: 256.667px; display: block;">
   <div class="tooltip-arrow"></div>
   <div class="tooltip-inner">Save</div>
</div>
</body></html> 
```

从萤火虫中，我可以通过右键单击 deletenode 来删除这个 div。它也成功地从 UI 中删除。所以我认为如果我使用 javascript 代码执行此操作，它应该被删除。

但我不知道要在成功函数中添加什么代码来删除该 div 类工具提示淡入淡出。我需要帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:37:20.357

您可能还应该删除实际的工具提示：

`$('body>.tooltip').remove();`

或者更好的是，使用工具提示的本机删除功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T05:59:47.247

该属性在**某些**浏览器`title`中成为工具提示文本。删除它（直接或使用 Javascript），它应该会消失。

 **[http://www.w3.org/TR/WCAG20-TECHS/H33.html](http://www.w3.org/TR/WCAG20-TECHS/H33.html)

> 当鼠标悬停在包含标题属性的锚元素上方时，一些图形用户代理会显示工具提示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T06:04:41.890

我想值得一试：

```
success: function(){
 //other code//
   ('a.icon-ok').removeAttr("title");
 //other code//
} 
```

**编辑：**

我再次阅读了您的问题：

> 但我不知道要在成功函数中添加什么代码来删除该 div 类工具提示淡入淡出。我需要帮助。

试试这种方式：

```
success: function(){
 //other code//
   ('div').removeClass("tooltip fade top in"); //<-- costumize your selector
 //other code//
} 
```

祝你好运 ！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-19T07:58:24.170

我已经尝试了所有这些答案，但对我有用的是这个，

```
$("#id").tooltip( "destroy" ); 
```

或者你也可以使用

```
$("#id").tooltip( "close" ); 
```

但是，我更喜欢第一个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T08:17:14.663

感谢大家的宝贵意见！！我在 success() 函数中添加了这一行并且它有效

> `$("[class='tooltip fade top in']").remove();`**

# vhdl - VHDL解复用器输出以在端口之间切换信号

> ID：16098174
> 
> 赞同：0
> 
> 时间：2013-04-19T05:59:17.843
> 
> 标签：vhdl, fpga

请放轻松，我是新手... :) 我有一个信号，我想根据计数 CNT 的值在两个可用输出端口 TX_ADDR 和 TX_DATA 之一之间切换输出。这个想法是将一些值首先传输到我串行获得的 32 位值到地址总线，然后到数据总线，然后是地址，然后是数据......等等。而且我基本上会无限期地保持这种常规。

如果我有类似的东西：

```
 process(sCNT)
   begin
   if(sCNT = false) then
       TX_ADDR <= sTXD;
       sCNT    <= true;
   else
       TX_DATA <= sTXD;
       sCNT    <= false;
   end if;
   end process; 
```

......它似乎不起作用。基本上这个想法是，一旦另一个进程串行接收 32 位数据，就需要切换 sCNT（'s' 表示信号）。接下来的 32 位基本上会再次触发，然后根据 sCNT 的状态再次将输出切换到 TX_ADDR 或 TX_DATA。

谢谢！

约翰

编辑：这是完整的更新和“工作”代码。我没有看到我可以将这么多代码粘贴到评论中，所以我想我会在这里分享：

```
process(CLK, RST)
 begin
    if (RST = '1') then
      sRXD       <= x"00000000";
      sINDEX     <= 31;
      sTXD       <= x"00000000";
      sSCLK_old  <= '0';
      sSCLK_l    <= '0';
      sCS_old    <= '0';
      sCS_l      <= '0';
      DONE       <= '0';
      sMOSI_l    <= '0';

    elsif( rising_edge(CLK) ) then

      sSCLK_l       <= SCLK;
      sSCLK_old     <= sSCLK_l;
      sCS_l         <= CS;
      sCS_old       <= sCS_l;
      DONE          <= '0';
      sMOSI_l       <= MOSI;

      if(TX_EN = '1') then
          sTXD <= TX_DATA;
      end if;

      if (sCS_old = '1' and sCS_l = '0') then
          sINDEX <= 31;
      end if;

      if( sCS_l = '0' ) then
         if(sSCLK_old = '0' and sSCLK_l = '1') then
            sRXD <= sRXD(30 downto 0) & sMOSI_l;
            if(sINDEX = 0) then
               sINDEX <= 31;
            else
               sINDEX <= sINDEX-1;
            end if;
         elsif(sSCLK_old = '1' and sSCLK_l = '0') then
            if( sINDEX = 31 ) then
               DONE <= '1';
            end if;
            sTXD <= sTXD(30 downto 0) & '1';
         end if;
      end if;

     if(sCNT = false) then
         RX_ADDR <= sRXD;
         sCNT    <= true;
     else
         RX_DATA <= sRXD;
         sCNT    <= false;
     end if;
   end if;
   end process;

   MISO    <= sTXD(31);
end arch; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:13:00.163

您应该使用时钟来驱动您的流程。

```
process(clk)
begin

    if rising_edge(clk) then

        if sCNT = false then
            TX_ADDR <= sTXD;
            sCNT <= true;
        else
            TX_DATA <= sTXD;
            sCNT <= false;
        end if;

    end if;

end process 
```

这里`clk`应该是您的串行数据的时钟。你这样做的方式，它“就像”你的过程在一个无限循环中。您更改了“sCNT”并希望它立即更新自己？但是，当您使用时钟时，它只会在新数据上更新自身（与 同步`clk`）。

# c# - 防止调用 web 方法

> ID：16098176
> 
> 赞同：1
> 
> 时间：2013-04-19T05:59:24.263
> 
> 标签：c#, asp.net, webmethod

我的站点中有一堆。`webmethod`有没有办法从我的应用程序中检查它的调用或直接调用 invoke ，从我的应用程序中出来。

我在 web.config 中尝试这个：

```
<webServices>
      <protocols>
        <remove name="HttpGet"/>
        <remove name="HttpPost"/>
        <remove name="HttpPostLocalhost"/>
      </protocols>
</webServices> 
```

它只是阻止调用方法但在浏览器中打开我的 .asmx 文件。我的计划是检查它是从我的应用程序调用还是直接浏览？如果它直接浏览，那么我必须阻止它打开吗？有没有安全的方法可以做到这一点，或者我的方式不对？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:01:10.790

您要查找的内容称为“身份验证”。您需要确定来电者是谁。

然后，您将提供“授权” - 确保只有那些被允许访问服务的调用者才能真正访问。

# c# - 替换字符串中的多个占位符

> ID：16098177
> 
> 赞同：4
> 
> 时间：2013-04-19T05:59:32.527
> 
> 标签：c#, asp.net

我有一个带有 2 个占位符的字符串，我想根据值计算在运行时替换它。做这个的最好方式是什么。我已使用下面的代码进行单个占位符替换，

```
 String posttData = @"data = google.visualization.arrayToDataTable([
                                ['Label', 'Value'],
                                ['Result', {0}]                           
                                ]);
    var options = {
        width: 1200, height: 500, redFrom: 90, redTo: 100, yellowFrom: 75, yellowTo: 90, minorTicks: 5
    }; 
```

....结果计算

```
var x = posttData.Replace("{0}", result.ToString());
ScriptManager.RegisterStartupScript(this, this.GetType(), "test", x, true); 
```

如何对多个替换执行相同操作？如果我需要添加另一个选项，

```
var options = {
                   width: 1200, height: 500, redFrom: 90, redTo: 100, yellowFrom: 75, yellowTo: 90, minorTicks: 5, max: {1} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T06:03:37.907

怎么样[`String.Format`](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)？

```
String str = String.Format(@"Some value {0} and some value {1}", 1, 2); 
```

应该产生：

> 一些值 1 和一些值 2

你可以用你可能需要的任何结果替换`1`和。`2`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T06:10:11.757

我 a;ways 创建一个扩展方法以便于使用。

```
 public static class StringExtensions
    {  
        public static string FormatWith(this string source, params object[] args)
        {
            return string.Format(source, args);
        }
} 
```

并打电话

```
"Some value {0} and some value {1}".FormatWith(1,2); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T06:03:07.003

```
var result = string.Format(postData,data1.ToString(), data2.ToString()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-14T08:02:43.267

我建议使用字符串插值：

```
$"Some value {1} and some value {2}" 
```

其中“1”和“2”可以是您需要的任何结果/表达式。

[https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)

# c# - 如何将大型数据集发送到 WCF 服务？

> ID：16098178
> 
> 赞同：0
> 
> 时间：2013-04-19T05:59:43.100
> 
> 标签：c#, wcf, web-services

我想`DataSet`从 WPF 应用程序向 WCF 服务发送一个。当我发送一个空的`DataSet`它工作正常。但是`DataSet`30`DataTable`它给了我例外

> 远程服务器返回意外响应：(400) 错误请求。

我的运营合同是：

```
 [OperationContract]
  string InsertDataToDatabase(DataSet ds); 
```

`DataSet`哪个是发送到 WCF 服务的最佳方式？

客户`App.Config`

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_ICommunication" closeTimeout="00:01:00"
                    openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                    allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                    maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                    messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                    useDefaultWebProxy="true">
                    <readerQuotas maxDepth="32" maxStringContentLength="8192"  maxArrayLength="2147483647"
                        maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                    <security mode="None">
                        <transport clientCredentialType="None" proxyCredentialType="None"
                            realm="" />
                        <message clientCredentialType="UserName" algorithmSuite="Default" />
                    </security>
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:49486/Communication.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICommunication"
                contract="CommunicationReference.ICommunication" name="BasicHttpBinding_ICommunication" />
        </client>
    </system.serviceModel>
</configuration> 
```

服务`Web.Config`

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <connectionStrings>
    <add name="ConName" connectionString="Data Source=WIN-7;Initial Catalog=ABC; User ID=sa; Password=****"/>        
  </connectionStrings>
  <system.serviceModel>
    <bindings>
      <basicHttpBinding>
        <binding maxBufferSize="2147483647"
                 maxReceivedMessageSize="2147483647">
          <readerQuotas maxStringContentLength="2147483647" />
        </binding>
      </basicHttpBinding>
    </bindings>
    <behaviors>      
      <serviceBehaviors>
        <behavior>
           <!--To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment--> 
          <serviceMetadata httpGetEnabled="true"/>
           <!--To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information--> 
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <serviceThrottling maxConcurrentCalls="100" maxConcurrentSessions="1000" maxConcurrentInstances="1600" />
        </behavior>
      </serviceBehaviors>
    </behaviors>    
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>  
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>  
</configuration> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:04:19.543

我不记得曾经看到过有关数据大小问题的 400 错误消息，但是……您可以尝试一些事情。

这里发生了几件事。首先，根据您的服务配置文件，您使用的是 .NET 4.0。这意味着您正在使用默认端点 - 您没有在配置中明确定义一个，因此框架会为您创建一个。它使用适当绑定的默认值（`BasicHttpBinding`在本例中），这意味着即使您更改定义的绑定中的值，它们也不会生效。此外，您还将收到带有默认值的默认行为。

尝试在绑定中设置更高的值`maxReceivedMessageSize`- 默认为 65536 - 和`maxStringContentLength`（默认为 8192 ~ 8K）。如果您增加大小，`maxStringContentLength`您还需要将大小`maxBufferSize`增加到相同的值（至少）。

现在，由于您没有明确定义端点，因此您需要创建一个端点并将您定义的绑定分配给它，或者将定义设为默认值。

首先，绑定的更新版本（用于处理更大的数据）可能如下所示（仅显示需要更改的相关部分 - 为了简洁起见，我省略了其余部分）。我选择了一个相当大的数字——最大值是 Int64的最大值`maxBufferSize`，最大值是 Int32 的最大值。`maxReceivedMessageSize``maxStringContentLength`

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_ICommunication" 
             maxBufferSize="2147483647" 
             maxReceivedMessageSize="2147483647">
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings> 
```

接下来，您需要将此绑定分配给您的服务端点。最简单的方法，特别是如果您只有一个端点，是使绑定定义高于默认值。您只需省略元素`name`中的属性即可完成此操作。`binding`例如：

```
<bindings>
  <basicHttpBinding>
    <binding maxBufferSize="2147483647" 
             maxReceivedMessageSize="2147483647">
      <readerQuotas maxStringContentLength="2147483647" />
    </binding>
  </basicHttpBinding>
</bindings> 
```

`name`请注意，上述（剥离的）配置中没有属性。

第二种方法是创建一个端点并将您定义的绑定配置分配给它。例如：

```
<services>
  <service name="MyServiceName">
      <endpoint address="" 
                binding="basicHttpBinding" 
                bindingConfiguration="BasicHttpBinding_ICommunication"
                contract="MyService.IMyContract" />
  </service>
</services> 
```

我也看到人们在服务行为中增加元素的`maxItemsInObjectGraph`属性`dataContractSerializer`，虽然我从来没有这样做过。根据 MSDN 文档，我认为这不适用于您的情况，因为您没有使用任何数据合同。但是，要尝试为您提供尽可能多的选项来解决此问题，您可以通过在行为组中定义端点行为来进行调整，如下所示：

```
<behaviors>
  <endpointBehaviors>
    <behavior name="LargeDataBehavior">
      <dataContractSerializer maxItemsInObjectGraph="2147483646" />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

同样，由于您使用的是 .NET 4.0，您需要将此行为定义为默认行为（通过省略该`name`属性）或将其分配给已定义的端点，如下所示（使用上面的端点示例）：

```
<endpoint address=""
          behaviorConfiguration="LargeDataBehavior" 
          binding="basicHttpBinding" 
          bindingConfiguration="BasicHttpBinding_ICommunication"
          contract="MyService.IMyContract" /> 
```

您还可以查看[WCF Streaming](http://msdn.microsoft.com/en-us/library/ms733742.aspx)。

# android - 如何在android中唤醒屏幕

> ID：16098179
> 
> 赞同：7
> 
> 时间：2013-04-19T05:59:45.563
> 
> 标签：android

嗨，我正在制作一个警报应用程序。当警报时间到来时，我正在向用户显示一个对话框。但问题是我想在对话框出现时获取唤醒锁。就像收到短信时屏幕刚刚唤醒一样。

我试过这个但不工作

```
public class Alarm extends Activity{
    PowerManager pm;
    WakeLock wl;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        pm = (PowerManager) getSystemService(POWER_SERVICE);
        wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "FlashActivity");
wl.acquire()
        showAlarmDialog();
    }
    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        wl.release();
    }
} 
```

我也添加了唤醒锁权限。帮助将被appriciated :-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:34:32.270

我能够以这种方式打开屏幕：

```
wl = pm.newWakeLock(PowerManager.SCREEN_BRIGHT_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP, "TAG");
wl.acquire(); 
```

希望这有帮助。虽然它对我有用:-) 干杯

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T06:12:34.737

您可以通过两种方法获取唤醒锁

```
wl.acquire(); or wl.acquire(timeout) 
```

在 onResume() 中尝试这样的事情：

```
PowerManager pm;
WakeLock wl;

pm = (PowerManager) getSystemService(POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "FlashActivity");
wl.acquire(); Or wl.acquire(timeout) 
```

你正在 onPause() 中实现。那很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-21T15:56:33.340

您可以在您的活动中添加一些标志，以便在您的活动开始时解锁和唤醒屏幕。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_activity);
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD | WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED | WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
} 
```

# jquery - jQuery 可扩展网格（2 列）

> ID：16098185
> 
> 赞同：3
> 
> 时间：2013-04-19T06:00:17.720
> 
> 标签：jquery

我有一个网格 =>

![在此处输入图像描述](https://i.stack.imgur.com/QL7tL.png)

这个想法是让用户点击这些框，它们会扩展一些额外的内容。

现在，当您单击左列中的框时，一切都很好，但是如果您单击右列中的框之一 - 这就是发生的情况（单击黄色框）=>

![在此处输入图像描述](https://i.stack.imgur.com/B6eyq.png)

基本上，我正在尝试修复这些孔并保持元素的初始顺序。

这是我单击黄色框（模拟图像）时所期望的结果=>

![在此处输入图像描述](https://i.stack.imgur.com/6isoi.png)

有没有我可以使用的插件？

这是 jsfiddle 链接 =>[这里](http://goo.gl/UMl3A)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:11:34.903

有几个插件可能符合您的目的：

1.  同位素：http: [//isotope.metafizzy.co/](http://isotope.metafizzy.co/)
2.  砌体： http: [//masonry.desandro.com/](http://masonry.desandro.com/)
3.  嵌套：[http ://suprb.com/apps/nested/](http://suprb.com/apps/nested/)
4.  [免费瓷砖： http](http://yconst.com/web/freetile/) ://yconst.com/web/freetile/
5.  vGrid：[https ://github.com/xlune/jQuery-vGrid-Plugin](https://github.com/xlune/jQuery-vGrid-Plugin)

我相信你至少会找到一些灵感。

此外，因为您提到了排序的重要性，Masonry Ordered 插件很有趣： http: [//masonry-ordered.tasuki.org/](http://masonry-ordered.tasuki.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:10:12.293

请看看`http://jsonenglish.com/projects/flex/` 让我知道你的想法

# delphi - 如何找到和释放 glScene 对象......？

> ID：16098188
> 
> 赞同：0
> 
> 时间：2013-04-19T06:00:31.717
> 
> 标签：delphi, delphi-7, glscene

我写这段代码来动态创建led

```
var
  fLed: Tglhudsprite;
  i,fImgSnapNum: integer;
  ............
for i := 0 to fImgSnapNum - 1 do
  begin
    fLed := TGLHUDSprite.CreateAsChild(MainForm.Dummy_Sound);
    fLed.Name := 'fLed' + IntToStr(i);
    fled.Material.MaterialLibrary := MatLib;
    fLed.Material.LibMaterialName := 'led';
    fLed.Width := fLed.Material.GetActualPrimaryTexture.Image.Width;
    fLed.Height := fLed.Material.GetActualPrimaryTexture.Image.Height;
    fled.SetSize(18,18);
    fled.Position.X := 530 + (i * 30);
    fled.Position.Y := 600;
    fled.Visible := true;
end; 
```

我怎样才能找到并释放 fLed glscene 对象...？

谢谢...我使用delphi7和GLScene组件...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:28:38.800

释放对象的明显方法就是调用它们的`Free`方法，就像释放任何其他对象一样。显示的代码创建了许多对象，因此您需要有某种方法来释放所有对象；只有最近创建的单个对象仍会在`fled`变量中。对此的简单解决方案是将这些对象的列表保存在某个容器中，例如[`TObjectList`](http://docwiki.embarcadero.com/Libraries/en/System.Contnrs.TObjectList). 然后遍历容器并释放其内容。

不过，您可能不需要单独的容器。传递给精灵构造函数的 owner 参数维护了它拥有的所有东西的列表。你可以遍历它的[`Components`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TComponent.Components)数组，就像你可以遍历`TComponent`.

最后，由于您正在分配`Name`所有对象的属性，您可以调用[`Dummy_Sound.FindComponent`](http://docwiki.embarcadero.com/Libraries/en/System.Classes.TComponent.FindComponent)以通过名称查找每个精灵组件。（如果您*不是*按名称搜索此类动态分配的组件，那么首先没有理由分配该`Name`属性。）

# php - 图片库未在 IE9 中显示 - Joomla Gantry 4

> ID：16098189
> 
> 赞同：0
> 
> 时间：2013-04-19T06:00:32.143
> 
> 标签：php, internet-explorer, joomla

这是我的网站图片库的网址： [http ://www.mythrottle.net/community/gallery/678-jeets/photo?albumid=135&photoid=846](http://www.mythrottle.net/community/gallery/678-jeets/photo?albumid=135&photoid=846)

我正在努力找出为什么照片库没有在 IE9 或 IE10 中显示。它适用于 Chrome 和 Firefox。我用谷歌搜索了一天，发现问题只出现在 Gantry 4 模板上。使用默认模板时没有问题。似乎 Gantry less.css 编译器搞砸了。我的网站使用 Rocktheme Alerion 和 Tigra 进行 Jomsocial 造型。任何人都请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:00:51.957

@Lodder 对解决方案的长评论：它不适用于打开页面缓存，

```
$doc->addStyleSheet 
```

将 css 添加到列表中，该列表稍后将插入到调用 jdoc 包含头的模板中；

如果你想使用条件注释（如果你打算使用缓存，你应该这样做）你应该直接输出标记。

但是由于 IE10 不允许这样做（ms 的好人再次尝试让我们的生活更轻松），因此需要一个客户端解决方案，如 modernizr.js 或[如何在特定情况下仅针对 Internet Explorer 10，例如特定于 Internet Explorer CSS 或 Internet Explorer 特定的 JavaScript 代码？](https://stackoverflow.com/questions/9900311/how-do-i-target-only-internet-explorer-10-for-certain-situations-like-internet-e)会成功的。这个想法是使用浏览器的名称将一个类添加到 html 或 body 标记中，因此您可以从单个样式表中定位它，并在浏览器特定规则的前面加上

```
html.ie9 div.main... 
```

因此，您可以缓存一个页面并提供给所有人，并使用 javascript 触发自定义行为。此外，这将为您的 IE9 和 10 节省一个额外的下载。这是一件好事，因为他们已经不得不处理 IE。

还可以查看样板文件[http://h5bp.com](http://h5bp.com)，因为它展示了浏览器兼容性方面的几个巧妙技巧，包括使用 chromeframe。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:55:26.467

出于某种原因，可能是由于 Gantry 中的某些原因，IE9 的宽度和高度被设置`0px`为。

在您的模板文件夹中，应该有一个专门的 CSS 文件，很可能称为**ie.css**。

如果没有，请创建一个新的 CSS 文件并将以下代码添加到其中：

```
.photoDisplay img {
     left: 175px; 
     top: 120px; 
     width: auto; 
     height: auto;
} 
```

然后在模板文件夹中的**index.php**中，添加以下代码`<head>`：

```
<!--[if IE 9]>
        <?php  
            $doc = JFactory::getDocument();
            $doc->addStyleSheet(JURI::root() . "templates/rt_alerion/css/custom.css");
        ?>
<![endif]--> 
```

显然将路径更改为保存 css 文件的位置。

希望这可以帮助

# jquery - jQuery滚动动画

> ID：16098192
> 
> 赞同：4
> 
> 时间：2013-04-19T06:00:36.757
> 
> 标签：jquery

我被分配了一些工作，我必须在包含不同内容的某些块（div）上实现一种老虎机类型的滚动。我想要做的是：每次单击按钮/链接时，我希望一列 4 个块（div）向上移动等于每个块高度的距离。我已经能够为基本功能提出以下建议（感谢 SO 上的出色答案！）：

**HTML**

```
 <div class="slot" id="slot1">
    <div class="block">1</div>
    <div class="block">2</div>
    <div class="block">3</div>
    <div class="block last">4</div>
</div>
<div class="slot" id="slot2">
    <div class="block">5</div>
    <div class="block">6</div>
    <div class="block">7</div>
    <div class="block last">8</div>
</div>
<div class="slot" id="slot3">
    <div class="block">9</div>
    <div class="block">10</div>
    <div class="block">11</div>
    <div class="block">12</div>
</div>
<div class="clear"></div>
<p><a href="#" id="nudge1">nudge1</a></p>
<p><a href="#" id="nudge2">nudge2</a></p>
<p><a href="#" id="nudge3">nudge3</a></p> 
```

**CSS**

```
.block {
    height:58px;
    width:100px;
    color: #ccc;
    border: 1px solid #666;
    position:absolute;
}
.slot {
    height: 176px;
    width:100px;
    border: solid 1px black;
    position: relative;
    overflow: hidden;
    float:left;
}
.clear {
    clear:both;
}

p {
    display:inline;}
} 
```

**JS**

```
$(document).ready(function() {

    $(".block").last().addClass("last");
    $(".slot").each(function() {
        var i = 0;
        $(this).find(".block").each(function() {
            var $this = $(this);
            $this.css("top", i);
            i += $this.height();
        });
    });

    $('#nudge1').on('click',function() {
       var countScrolls = $('.slot .block').length;
        for (var i=0; i < countScrolls; i++) {
        var top = parseInt($('#slot1 .block:nth-child(' + i + ')').css("top"));
    if (top < -58) { 
        var $lastEle = $('#slot1 .block:nth-child(' + i + ')').closest('.slot').find(".last");
        $lastEle.removeClass("last");
        $('#slot1 .block:nth-child(' + i + ')').addClass("last");
        var top = (parseInt($lastEle.css("top")) + $lastEle.height());
        $('#slot1 .block:nth-child(' + i + ')').css("top", top);
    }
    $('#slot1 .block:nth-child(' + i + ')').clearQueue().stop().animate({
        top: (parseInt(top) - 58)
    }, 100, 'linear');
        }
        });

        $('#nudge2').on('click',function() {
       var countScrolls = $('.slot .block').length;
        for (var i=0; i < countScrolls; i++) {
        var top = parseInt($('#slot2 .block:nth-child(' + i + ')').css("top"));
    if (top < -58) { 
        var $lastEle = $('#slot2 .block:nth-child(' + i + ')').closest('.slot').find(".last");
        $lastEle.removeClass("last");
        $('#slot2 .block:nth-child(' + i + ')').addClass("last");
        var top = (parseInt($lastEle.css("top")) + $lastEle.height());
        $('#slot2 .block:nth-child(' + i + ')').css("top", top);
    }
    $('#slot2 .block:nth-child(' + i + ')').clearQueue().stop().animate({
        top: (parseInt(top) - 58)
    }, 100, 'linear');
        }
        });

    $('#nudge3').on('click',function() {
       var countScrolls = $('.slot .block').length;
        for (var i=0; i < countScrolls; i++) {
        var top = parseInt($('#slot3 .block:nth-child(' + i + ')').css("top"));
    if (top < -58) { 
        var $lastEle = $('#slot2 .block:nth-child(' + i + ')').closest('.slot').find(".last");
        $lastEle.removeClass("last");
        $('#slot3 .block:nth-child(' + i + ')').addClass("last");
        var top = (parseInt($lastEle.css("top")) + $lastEle.height());
        $('#slot3 .block:nth-child(' + i + ')').css("top", top);
    }
    $('#slot3 .block:nth-child(' + i + ')').clearQueue().stop().animate({
        top: (parseInt(top) - 58)
    }, 100, 'linear');
        }
        });

}); 
```

[这](http://jsfiddle.net/kUwEX/1/)是一个小提琴供更好的参考。单击“轻推”会使块动画向上移动一个高度，该高度等于每个块的高度。我的问题是，现在这一次只适用于两个块，我不知道如何显示更多（特别是 3 个）。任何人都可以建议我在这里做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:39:34.093

这怎么样？[演示](http://cssdeck.com/labs/zcuvpkh5)。使它更简单、可读和可扩展。抱歉，我无法在当前位置访问 jsfiddle。

HTML：

```
<div class="slot" id="slot1">
    <div class="block">1</div>
    <div class="block">2</div>
    <div class="block">3</div>
    <div class="block">4</div>
</div>
<div class="slot" id="slot2">
    <div class="block">5</div>
    <div class="block">6</div>
    <div class="block">7</div>
    <div class="block">8</div>
</div>
<div class="slot" id="slot3">
    <div class="block">9</div>
    <div class="block">10</div>
    <div class="block">11</div>
    <div class="block">12</div>
</div>

<div class="clear"></div>

<div class="slotActionWrapper">
    <div class="slotActions">
        <a href="#" id="nudge1Up">&uarr;</a>&nbsp;
        <a href="#" id="nudge1Down">&darr;</a>
    </div>
    <div class="slotActions">
        <a href="#" id="nudge2Up">&uarr;</a>&nbsp;
        <a href="#" id="nudge2Down">&darr;</a>
    </div>
    <div class="slotActions">
        <a href="#" id="nudge3Up">&uarr;</a>&nbsp;
        <a href="#" id="nudge3Down">&darr;</a>
    </div>
</div> 
```

CSS：

```
.block {
    height:58px;
    width:100px;
    color: #ccc;
    border: 1px solid #666;
    float:left;
}

.slot {
    height: 176px;
    width:100px;
    border: solid 1px black;
    position: relative;
    overflow: hidden;
    float:left;
}

.slotActionWrapper {
    width: 306px;
}

.slotActions {
    width: 102px;
    text-align:center;
    float: left;
}

.slotActions a,
.slotActions a:visited {
    text-decoration: none;
    color: black;
}

.clear {
    clear:both;
} 
```

JavaScript：

```
$(document).ready(function()
{
    $('#nudge1Up').on('click',function()
    {
        $('#slot1 .block').first().animate({marginTop: "-=60"}, 300, function()
        {
            var firstElement = $(this).detach();
            firstElement.css('margin-top', '0');
            $('#slot1').append(firstElement);
        });
    });

    $('#nudge2Up').on('click',function()
    {
        $('#slot2 .block').first().animate({marginTop: "-=60"}, 300, function()
        {
            var firstElement = $(this).detach();
            firstElement.css('margin-top', '0');
            $('#slot2').append(firstElement);
        });
    });

    $('#nudge3Up').on('click',function()
    {
        $('#slot3 .block').first().animate({marginTop: "-=60"}, 300, function()
        {
            var firstElement = $(this).detach();
            firstElement.css('margin-top', '0');
            $('#slot3').append(firstElement);
        });
    });

    $('#nudge1Down').on('click',function()
    {
        var lastElement = $('#slot1 .block:last-child').detach();
        $('#slot1').prepend(lastElement);
        $('#slot1 .block:first-child').css('margin-top', '-60px');
        $('#slot1 .block:first-child').animate({marginTop: "+=60"}, 300);
    });

    $('#nudge2Down').on('click',function()
    {
        var lastElement = $('#slot2 .block:last-child').detach();
        $('#slot2').prepend(lastElement);
        $('#slot2 .block:first-child').css('margin-top', '-60px');
        $('#slot2 .block:first-child').animate({marginTop: "+=60"}, 300);
    });

    $('#nudge3Down').on('click',function()
    {   
        var lastElement = $('#slot3 .block:last-child').detach();
        $('#slot3').prepend(lastElement);
        $('#slot3 .block:first-child').css('margin-top', '-60px');
        $('#slot3 .block:first-child').animate({marginTop: "+=60"}, 300);
    });
}); 
```

# php - 为什么从 PHP 5.4 中删除了 Magic Quotes？

> ID：16098194
> 
> 赞同：4
> 
> 时间：2013-04-19T06:00:43.530
> 
> 标签：php, magic-quotes

`Magic Quotes`从 PHP 5.4 中删除的技术原因是什么？

**来自 PHP 文档**

# 表现

> 性能 因为不是每条转义数据都插入到数据库中，所以转义所有这些数据会造成性能损失。简单地在运行时调用转义函数（如**addlashes()**）更有效。虽然 php.ini-development 默认启用这些指令，但 php.ini-production 禁用它。这个建议主要是出于性能方面的原因。

是否有任何其他原因`Magic Quotes`从 PHP 中删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:04:05.703

这很好地解释了为什么在手册中不推荐使用[chao](http://www.php.net/manual/en/security.magicquotes.php#102907)

> 引用[**chao的评论**](http://www.php.net/manual/en/security.magicquotes.php#102907)
> 
> 不推荐使用魔术引号的原因是，一种千篇一律的转义/引用方法是错误的，而且非常危险。不同类型的内容具有不同的特殊字符和不同的转义方式，并且在一个内容中起作用的内容往往会在其他地方产生副作用。任何示例代码，在这里或其他任何地方，假装像魔术引号一样工作——或者对 HTML、SQL 或其他任何东西进行类似的转换——同样是错误的，同样是危险的。
> 
> 魔术引号不是为了安全。他们从来没有。这是一件很方便的事情——它们的存在使得 PHP 新手可以摸索并最终编写一些有点工作的 mysql 查询，而无需了解如何正确转义/引用数据。他们防止一些意外的语法错误，就像他们的工作一样。但它们不会阻止恶意和半知识的攻击者破坏 PHP noob 的数据库。而那个可怜的菜鸟甚至可能永远不知道他的数据库现在是如何消失或为什么消失了，因为魔术引号（或他那漂亮的“我要逃避一切”功能）给了他一种虚假的安全感。他不必学习如何真正处理不受信任的输入。

也很好阅读[**维基百科：魔术引用批评**](http://en.wikipedia.org/wiki/Magic_quotes#Criticism)

# c++ - 检索 CV_32FC3 CvMat 的元素？

> ID：16098195
> 
> 赞同：4
> 
> 时间：2013-04-19T06:00:51.647
> 
> 标签：c++, c, opencv

我正在通过调用创建一个 CvMat 结构

```
cvCreateMat(1,1,CV_32FC3); 
```

该结构由后续的 OpenCV 函数调用填充，并用三个值填充（据我了解，这是一个 1x1 数组，附加深度为 3）。

那么如何访问这三个值呢？一个正常的调用

```
CV_MAT_ELEM(myMat,float,0,0) 
```

不会做这项工作，因为它只需要数组维度索引而不是它的深度。那么我怎样才能得到这些值呢？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T07:03:14.483

访问 cv::Mat 的一般方法是

```
type value=myMat.at<cv::VecNT>(j,i)[channel] 
```

对于您的情况：

```
Mat mymat(1,1,CV_32FC3,cvScalar(0.1,0.2,0.3));
float val=mymat.at<Vec3f>(0,0)[0]; 
```

所有类型都使用类 cv::VecNT 定义，其中 T 是类型，N 是向量元素的数量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T06:40:04.283

`CV_32FC3`是一个 32 位浮点数的三通道矩阵。您可以通过声明一个具有 3 个浮点数的结构元素并使用`CV_MAT_ELEM`. 例如：

```
typedef struct element {
        float cn1;
        float cn2;
        float cn3;
} myElement;

myElement data[N] = ...;
CvMat mat = cvMat(1, 1, CV_32FC2, data);

float channel1 = CV_MAT_ELEM(mat, float, 0, 0).cn1;
float channel2 = CV_MAT_ELEM(mat, float, 0, 0).cn2;
float channel3 = CV_MAT_ELEM(mat, float, 0, 0).cn3; 
```

编辑：

访问每个通道的另一种方法是使用底层`ptr`结构：

```
mat.ptr<float>(x, y) [channel]; 
```

# python - 在读取大文件并按单词解析时，如何利用 Python 生成器？

> ID：16098198
> 
> 赞同：0
> 
> 时间：2013-04-19T06:01:05.033
> 
> 标签：python, generator

这是我拥有的相关代码。它使用生成器从文件中获取单词。但是，在输入函数之前，单词首先存储到变量中。这个对吗？

这是否利用了生成器功能？

```
def do_something(words):
    new_list = {}
    for word in words:
        // do stuff to each word
        // then add to new_list
    return new_list

def generate_words(input_file):
    for line in input_file:
        for word in line.split(' '):
            // do stuff to word
            yield word

if __name__ == '__main__':
    with open("in.txt") as input_file:
        words = generate_words(input_file)
        do_something(words) 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:07:59.143

当你 make 时`words = generate_words(input_file)`，你只是给它一个对新创建的生成器的引用。当你运行`do_something`时，那是生成器实际迭代的时候，`words`只是对它的引用。所以答案是肯定的，你正在利用生成器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:09:54.667

代码看起来不错。存储的`words`内容是准备在其中运行代码的新生成器`generate_words`；`for word in words:`代码仅在触发时才会实际运行。如果您想了解更多，[这个 SO question](https://stackoverflow.com/questions/231767/the-python-yield-keyword-explained)有一大堆信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T06:45:39.993

在给定的示例中使用生成器没有任何优势。主要目的是减少内存使用。

在代码中：

```
for line in input_file: 
```

`line`已经从文件中读取并消耗了内存。然后`split`操作创建新列表并再次消耗内存。

所以你所要做的就是遍历列表项。

虽然生成器的使用将导致创建生成器对象，该对象从现有列表中产生对象。这是完全没用的。

# ruby-on-rails - 在 Heroku 上推送的 Rails 应用程序中的数据库访问中的混淆和问题

> ID：16098202
> 
> 赞同：0
> 
> 时间：2013-04-19T06:01:18.960
> 
> 标签：ruby-on-rails, database, heroku, configuration

```
development:
  adapter: postgresql
  host: localhost
  database: myapp
  pool: 5
  timeout: 5000
  username: postgres
  password: postgres
  port: 5432

test: &test
  adapter: postgresql
  host: localhost
  database: myapp-test
  pool: 5
  timeout: 5000
  username: postgres
  password: postgres
  port: 5432

production:
  adapter: sqlite3
  database: db/production.sqlite3
  pool: 5
  timeout: 5000

selenium:
  adapter: postgresql
  host: localhost
  database: myapp-selenium
  pool: 5
  timeout: 5000
  username: postgres
  password: postgres
  port: 5432

cucumber:
  <<: *test 
```

我的数据库值已更新，但未同时获取，我需要更改生产配置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:03:04.800

当您在 Heroku 部署应用程序时，Heroku 会完全替换您的 database.yml。`heroku run bash`您可以通过执行然后导航到配置文件夹来确认这一点，`cat database.yml`您将看到他们重写它以使用`DATABASE_URL`环境变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:21:47.617

据我所知，Heroku 用适当的值替换了您的生产配置。

您甚至可以尝试在没有生产配置的情况下推送您的应用程序，它会起作用。

如果您正在尝试不同的数据库，这可能会有所帮助：[http ://railsapps.github.io/rails-heroku-tutorial.html](http://railsapps.github.io/rails-heroku-tutorial.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T06:37:21.067

您好，请参考 database.yml

```
 production:
  adapter: PostgreSQL
  encoding: utf8
  reconnect: false
  database: "Your database name"
  pool: 5
  username: "username"
  password: "password"
  host: 127.0.0.1 
```

# c# - 下拉列表多选

> ID：16098208
> 
> 赞同：0
> 
> 时间：2013-04-19T06:02:01.747
> 
> 标签：c#, mschart

我在我的项目中使用了 MultiSelect DropDownList。当用户从 DropDownList 中选择值时，我想生成一个图表。我有两个 Y 轴并为此制作了 MultiSelect DropDownList。如何为图表选择多个值？用户选择两个值，它们代表图表的 2 个 Y 轴。

# matlab - 点云生成

> ID：16098209
> 
> 赞同：4
> 
> 时间：2013-04-19T06:02:02.607
> 
> 标签：matlab, point-clouds

*   我有一个 3-D 几何形状，我必须将其转换为点云。
*   由此产生的点云可以被认为等同于从对象的激光扫描输出的点云。
*   不需要网格生成
*   生成的点可能是均匀分布的，也可能只是随机分布的——没关系
*   可以以 3-D 数学公式的形式提供 3-D 形状
*   这必须使用 MATLAB 完成

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:32:52.947

没有示例很难回答，但听起来您只想进行[蒙特卡罗模拟](http://en.wikipedia.org/wiki/Monte_Carlo_method)？

假设您的形状由函数定义，`f`并且您将 X、Y 限制存储在两个元素向量中，例如 xlim = [-10 10] 即此形状的所有可能 x 值位于 x = -10 和 x = 10 之间，然后我如果特定 xy 对没有值，建议您`f`返回某种错误代码。我会假设那将是`NaN`。`f(x,y)`您正在编写的函数也是如此，如果`z`可以或`NaN`不能返回 a

```
n= 10000;
counter  = 1;
shape = nan(n, 3)
while counter < n
   x = rand*diff(xlim) + mean(xlmin);
   y = rand*diff(ylim) + mean(ylim);
   z = f(x,y)
   if ~isnan(z)
      shape(counter, :) = [x, y, z];
      counter = counter + 1    
   end
end 
```

因此，上面的代码将在您的形状上随机采样 10000 个（非唯一的，但很容易适应）点。

现在输入这个之后，我意识到也许你的形状实际上并没有那么大，也许你可以统一采样而不是随机采样：

```
for x = xlim(1):xstep:xlim(2)
   for y = ylim(1):ystep:ylim(2)
       shape(counter, :) = [x, y, f(x,y)];
   end
end 
```

或者如果你写`f`的是矢量化（最好）

```
shape = [(xlim(1):xstep:xlim(2))', (ylim(1):ystep:ylim(2))', f(xlim(1):xstep:xlim(2), ylim(1):ystep:ylim(2)); 
```

然后无论哪种方式

```
shape(isnan(shape(:, 3), :) = []; %remove the points that fell outside the shape 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:52:36.253

这是使用 PrimeSense 相机的深度图像创建云图像的代码。

此功能的输入/输出：

```
-inputs
 depth         -depth map
 topleft       -topleft coordinates of the segmented image in the whole image

-outputs
 pclouds       -3d point clouds 
```

MatLab 代码：

```
depth = double(depth);
% Size of camera image
center = [320 240];
[imh, imw] = size(depth);
constant = 570.3;

% convert depth image to 3d point clouds
pclouds = zeros(imh,imw,3);
xgrid = ones(imh,1)*(1:imw) + (topleft(1)-1) - center(1);
ygrid = (1:imh)'*ones(1,imw) + (topleft(2)-1) - center(2);
pclouds(:,:,1) = xgrid.*depth/constant;
pclouds(:,:,2) = ygrid.*depth/constant;
pclouds(:,:,3) = depth;
distance = sqrt(sum(pclouds.^2,3)); 
```

编辑：此来源来自当前的文章[http://www.cs.washington.edu/rgbd-dataset/software.html](http://www.cs.washington.edu/rgbd-dataset/software.html)

您可以在 MatLab 和 C++ 中找到您可能感兴趣的其他一些 Cloud 函数。

# c# - 如何在visual studio lightswitch 2012中将属性值设置为自动递增

> ID：16098210
> 
> 赞同：0
> 
> 时间：2013-04-19T06:02:03.603
> 
> 标签：c#, visual-studio-2012, visual-studio-lightswitch, lightswitch-2012

我想将表中的属性值设置为默认自动增量，但据我所知，它们在 lightswitch2012 中没有这样做的选项，因为我最近开始学习 lightswitch，非常轻。

好的，这是真正的问题，这是桌子

[客户][id,customer_id,name]

我想将 customer_id 默认设置为 id ，除非手动将其更改为不同的值。

如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T15:50:48.310

在实体设计器中，不需要您的 Customer_ID。为 Customers_Inserted 编写代码。

然后，检查 Customer_ID 是否为空。如果是，请将 ID 字段复制到其中。

```
private void Customers_Inserted(Customer entity)
{
    if (entity.Customer_ID == null) {
        entity.Customer_ID = entity.ID;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:30:07.427

没错，LightSwitch 中没有可用的“自动增量”数据类型。*ID*属性自动递增，但这是一种特殊情况，由 LightSwitch 处理。

如果您要附加到*外部 SQL 数据库*，如果您添加了一个*整数标识*列，尽管它在 LightSwitch 中只是显示为*整数*属性，但它仍然会自动递增，因为这实际上是在 SQL 数据库本身中完成的.

所有自动增量属性的问题是在保存记录之前您不会获得实际值。

我能问一下为什么你需要一个自增属性吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T04:59:08.897

我可能会误解您要实现的目标，但是如果您使用的是表格或网格，并且您想为用户添加的每个新行设置各种实体的值（例如 customer_id = id 等），您可以使用 _Changed 方法和 Add 事件以编程方式设置任何新行实体。

如果这与您正在寻找的内容相符，请观看 Beth Massi 的视频[我如何：将数据从一行复制到新行？](http://msdn.microsoft.com/en-us/vstudio/hh307862) 您应该能够调整她的代码来完成我认为的您的想法。

# haskell - Haskell：99 个问题 #1：第一个解决方案不在 GHCi 中运行

> ID：16098216
> 
> 赞同：2
> 
> 时间：2013-04-19T06:02:18.413
> 
> 标签：haskell

第一个问题是编写一个函数来获取列表中的最后一个元素。

解决方案部分提供的第一个解决方案是：

```
myLast :: [a] -> a
myLast [x] = x
myLast (_:xs) = myLast xs 
```

所以在 GHCi 我做了：

```
Prelude> let myLast [a] = a
Prelude> let myLast (_:xs) = myLast xs
Prelude> myLast [1,2,3] 
```

这给了我一个例外：

```
*** Exception: <interactive>:12:5-29: Non-exhaustive patterns in function myLast 
```

为什么这不起作用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:07:53.030

它不起作用，因为您`let`在 GHCi 中的使用是错误的。

```
let myLast [a] = a 
```

这定义了一个`myLast`只对一个元素的列表进行操作的函数。

```
let myLast (_:xs) = mylast xs 
```

这定义了一个新函数 ，`myLast`覆盖了上面一行中旧的和不相关的函数。这个新函数会为任何输入抛出异常（或无法终止）。

你应该输入：

```
:{
let myLast [x] = x
    myLast (_:xs) = myLast xs
:} 
```

或者，只需在文件中输入您的代码，而不是 repl。我强烈建议您避免将 repl 用于单行或交互式实验之外的任何内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T06:09:11.350

当您`let`在解释器中使用时，这实际上是`IO`monad 中的一个 let，例如在 do-block 中

```
do
  ...
  let x = ...
  ... 
```

如果你想从*ghci*内部定义一个递归函数，你可以这样做

```
Prelude> :edit file.hs 
```

然后文件`file.hs`将在编辑器中打开（例如，在*linux*`EDITOR`中，将选择通过环境变量指定的编辑器；通常，您可以从*ghci*内部设置使用的编辑器`:set editor editor-name`；您可以通过将其添加到`~/.ghci`文件中来使此设置持久）。在此处输入您的函数定义。保存文件。然后将其加载到*ghci*中

```
Prelude> :load file.hs 
```

现在来自的定义`file.hs`将在范围内。

# asp.net - 从位于gridview外部的下拉列表中选择选项时从gridview中删除选定的行

> ID：16098220
> 
> 赞同：0
> 
> 时间：2013-04-19T06:02:37.010
> 
> 标签：asp.net, gridview

我有一个下拉列表和一个 gridview 控件。DropDownlist 在gridview 之外。下拉列表包含一个选项删除。Gridview 包含复选框，以便可以选择行。

这是gridview代码：

```
<asp:GridView ID="gvRefDetail" runat="server" CssClass="mGrid" AutoGenerateColumns="False"
                        PageSize="50" Font-Names="Segoe UI" Font-Size="10pt" Width="800" AllowPaging="true"
                        BackColor="White" BorderColor="Silver" EmptyDataText="No Record" BorderStyle="Double"
                        BorderWidth="1px" CellPadding="4">
                        <HeaderStyle BackColor="red" />
                        <RowStyle BackColor="White" ForeColor="#003399" />
                        <Columns>

                            <asp:TemplateField>
                                <HeaderTemplate>
                                    <input id="Checkbox2" type="checkbox" onclick="CheckAll(this)" runat="server" /></HeaderTemplate>
                                <ItemTemplate>
                                    <asp:CheckBox ID="CheckBox1" runat="server" />
                                </ItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="NameofReferred">
                                <ItemStyle Wrap="true" HorizontalAlign="Left" />
                                <ItemTemplate>
                                    <asp:Label ID="lbltext" runat="server" Text='<%#Bind("NameofReferred") %>'></asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>
                                    <asp:TextBox ID="txttext" runat="server" Text='<%#Bind("NameofReferred")%>'></asp:TextBox>
                                </EditItemTemplate>
                            </asp:TemplateField>
                            <asp:TemplateField HeaderText="CustomerName">
                                <ItemStyle Wrap="true" HorizontalAlign="Left" />
                                <ItemTemplate>
                                    <asp:Label ID="lbltext" runat="server" Text='<%#Bind("CustomerName") %>'></asp:Label>
                                </ItemTemplate>
                                <EditItemTemplate>
                                    <asp:TextBox ID="txttext" runat="server" Text='<%#Bind("CustomerName")%>'></asp:TextBox>
                                </EditItemTemplate>
                            </asp:TemplateField>
                        </Columns>
                        <PagerStyle BackColor="#006699" Font-Bold="True" ForeColor="White" HorizontalAlign="Center" />
                        <AlternatingRowStyle BackColor="#CCFFFF" />
                        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
                        <HeaderStyle BackColor="White" Font-Bold="True" ForeColor="Gray" BorderColor="Gray" />
                        <SelectedRowStyle BackColor="#009999" Font-Bold="True" ForeColor="#CCFF99" />
                        <HeaderStyle Font-Bold="True" ForeColor="White" />
                    </asp:GridView> 
```

c#代码：

```
protected void ddlaction_SelectedIndexChanged(object sender, EventArgs e)
{

    if (ddlaction.SelectedValue == "1")
    {

        GridViewRow gvrow = gvRefDetail.SelectedRow;
        int id = Convert.ToInt32(gvrow.Cells[1].Text);
        string delref = "delete from tbl_Refferal where ID='" + id + "'  ";
        con = new SqlConnection(conString);
        con.Open();
        SqlCommand cmd2 = new SqlCommand(delref, con);
        int temp1 = cmd2.ExecuteNonQuery();
        con.Close();

        BindRef();

    }

    } 
```

现在，我的问题是，当我从 gridview 中选择一行或多行并从下拉列表中选择删除选项时，必须删除所选行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:50:05.093

代码打开`ddlaction_SelectedIndexChanged`并且`stringVariableContainCheckboxvalues`是从格式中选择的gridview复选框中获取字符串变量`('1,3,5,6')`

```
if (ddlaction.SelectedValue == "1")
{
  string delref = "delete from tbl_Refferal where ID in (@checkboxSelectedValues)";
  con = new SqlConnection(conString);
  SqlCommand cmd2 = new SqlCommand(delref, con);
  cmd2.Parameters.AddWithValue("@checkboxSelectedValues", stringVariableContainCheckboxvalues);
  con.Open();
  int temp1 = cmd2.ExecuteNonQuery();
  con.Close();
  BindRef();
} 
```

获取多个复选框值：

```
foreach (GridViewRow row in gvRefDetail.Rows)
{
    CheckBox cb = (CheckBox)row.FindControl("CheckBox1");
    if (cb != null && cb.Checked)
    {
       // fetch values in string
    }
} 
```

# php - 正则表达式获取单引号和双引号之间的内容php

> ID：16098223
> 
> 赞同：2
> 
> 时间：2013-04-19T06:02:52.167
> 
> 标签：php, regex, preg-match-all

我有如下代码：

```
preg_match_all(UNKNOWN, "I need \"this\" and 'this'", $matches) 
```

我需要正则表达式，它只`$matches`返回两个不带引号的“this”条目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:10:22.070

我认为以下应该工作：

```
$str = 'I need "this" and \'this\'';
if (preg_match_all('~(["\'])([^"\']+)\1~', $str, $arr))
   print_r($arr[2]); 
```

**输出：**

```
Array
(
    [0] => this
    [1] => this
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:27:48.473

您可以根据需要对这个答案投反对票，但在某些情况下，您可以这样做：

```
$str = "I need \"this\" and 'this'";
$str = str_replace('\'','"',$str);
$arr = explode('"',$str);
foreach($arr as $key => $value)
    if(!($key&1)) unset($arr[$key]);
print_R($arr); 
```

所以让它也出现在答案中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:06:36.717

```
preg_match_all('/"(.*?)".*?\'(.*?)\'/', "I need \"this\" and 'this'", $matches); 
```

但请注意，引用字符串的顺序在这里很重要，因此只有当两个引用字符串（单和双）都存在并且它们按此顺序（双 - 第一，单 - 第二）时，这个才会捕获。

为了单独捕获它们中的每一个，我会使用每种类型的引号启动 preg_match 两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T06:07:17.047

```
preg_match_all("/(this).*?(this)/", "I need \"this\" and 'this'", $matches) 
```

或者如果你想要引号之间的文字

```
preg_match_all("/\"([^\"]*?)\".*?'([^']*?)'/", "I need \"this\" and 'this'", $matches) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T06:11:19.030

这是一种解决方案：

```
preg_match_all('/(["\'])([^"\']+)\1/', "I need "this" and 'this'", $matches) 
```

它要求开头和结尾的引号相同，并且中间没有引号。您想要的结果将进入第二个捕获组。

为了使正则表达式尽可能可靠，请尽可能限制它匹配的内容。如果正则表达式的*这*部分只能包含字母，请改用类似的东西`[a-z]+`（可能不区分大小写）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-24T17:07:27.697

如果您想在引号中任意数量的字符串之前、之间和之后允许可选文本，并且您希望引号以任何顺序排列，这将起作用：

```
preg_match("~^(?:[\s\S]*)?(?:(?:\"([\s\S]+)\")|(?:'([\s\S]+)'))(?:[\s\S]*)?(?:(?:\"([\s\S]+)\")|(?:'([\s\S]+)'))(?:[\s\S]+)?$~", "some \"text in double quotes\" and more 'text to grab' here", $matches);

$matches[1]; // "text in double quotes";
$matches[2]; // "text to grab" 
```

这将匹配以下所有内容：

```
Some "text in double quote" and more in "double quotes" here.
"Double quoted text" and 'single quoted text'.
"Two" "Doubles"
'Two' 'singles' 
```

您可以在 Regex101 上看到它的实际效果： [https ://regex101.com/r/XAsewv/2](https://regex101.com/r/XAsewv/2)

# java - Java - 文件路径 - 无效的转义序列

> ID：16098225
> 
> 赞同：9
> 
> 时间：2013-04-19T06:02:53.933
> 
> 标签：java, filepath

我通过提供文件路径将文件上传到目的地。当文件路径像

```
String filePath = "D:\\location"; 
```

但是在提供服务器位置的同时

```
String filePath = request.getRealPath("\\10.0.1.18\downloads\upload"); 
```

产生无效转义序列的错误。

路径有什么问题（我对该位置有充分的权限），如果错误，如何正确地暗示它。

提前感谢您的帮助////

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T06:04:12.987

这是一个编译时错误，所以它*不能*与权限等有关。

问题是你没有逃避反斜杠。你需要：

```
String filePath = request.getRealPath("\\\\10.0.1.18\\downloads\\upload"); 
```

那么字符串的内容就是

```
\\10.0.1.18\downloads\upload 
```

这与您显示的第一行完全相同，其中：

```
String filePath = "D:\\location"; 
```

...实际上将创建一个包含以下内容的字符串：

```
D:\location 
```

有关字符和字符串文字中的转义序列的更多详细信息，请参阅[Java 语言规范的第 3.10.6 节。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T06:04:02.283

使用双斜线`\\`！这是一种特殊的逃生模式。像 \n 或 \r。

# c# - 更新程序问题，没有获取更新状态的逻辑

> ID：16098227
> 
> 赞同：0
> 
> 时间：2013-04-19T06:02:57.960
> 
> 标签：c#, stored-procedures

我有一个标签（即更新状态出现在这个标签中）和两个下拉列表，一个是开发人员，另一个是测试人员。

当我分配两者时，它工作正常，如果我只分配/选择开发人员，它工作正常。但是，当我单独选择测试人员而不选择任何开发人员时，如果其他问题的时间状态不同，则其他问题标签状态也会自动更改为 status=2（即，已分配）。

我用过程序

```
 ALTER procedure [dbo].[usp_assignedto]
  (
   @employeeid int,
   @issuetrackerid int,
   @testerid int
  )
  as
  begin 
  update issuesdetails set assignedto=@employeeid,status =2 , testerassign=@testerid         where issuetrackerid=@issuetrackerid
  end 
```

此状态 =2 是因为如果选择并分配状态标签应更新为已分配。

希望你有问题。

谢谢

# python - OpenCv Python osx 和自制软件

> ID：16098238
> 
> 赞同：0
> 
> 时间：2013-04-19T06:03:42.127
> 
> 标签：python, macos, opencv, python-2.7, homebrew

`import cv2`在终端中运行 python 后尝试运行时出现以下错误-

```
Python 2.7.3
[GCC 4.2.1 (Based on Apple Inc.) (] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import cv2
[1]    3129 segmentation fault  python 
```

按照建议，我还更改了我的 zsh bash 配置文件以包含。

```
export PYTHONPATH="/usr/local/lib/python2.7/site-packages:$PYTHONPATH" 
```

我也使用 brew 安装了 opencv，也使用 brew 安装了 python。Mac 操作系统 10.7.2。是否使用了错误版本的 python/我将如何纠正这个问题？我没有安装 numpy，但我觉得我仍然不应该得到那个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:56:59.640

Mac 附带了一个 python 版本。当您安装另一个版本的 python 时，您需要确保它在您的 PATH 中正确链接。这指定了要使用的 python 版本。PYTHONPATH 指定 Python 在哪里查找包。

见[这里](https://stackoverflow.com/questions/5157678/python-homebrew-by-default)和[这里](https://github.com/mxcl/homebrew/issues/8791)。

我最近使用 mac 端口安装了 python2.7 和 opencv 2.4.5，没有任何问题。

# javascript - 从 jQuery Mobile 1.2.0 升级到 1.3.1 会破坏输入框

> ID：16098244
> 
> 赞同：0
> 
> 时间：2013-04-19T06:04:06.817
> 
> 标签：javascript, css, html, jquery-mobile

我正在尝试在 Windows Phone 8 的 PhoneGap 应用程序上使用 jQuery Mobile。

目前，该应用程序使用运行良好的 jQuery Mobile 1.2.0 (jquery.mobile-1.2.0.min)。但是，在 1.3.0 中引入了过渡支持，因此我计划升级到该版本。但是，当我更新到 jQuery Mobile 1.3.1 (jquery.mobile-1.3.1.min) 时，输入框无法以与它们相同的方式呈现。

我不是 HTML 开发人员，所以我不太了解，原始代码不是我编写的。下面是输入框的代码：

```
 <label for="lumpsum">Current lump sum savings, if any ($)</label>
    <input type="number"  pattern="[0-9]*" name="lumpsum" id="lumpsum" value="2000"  style="width:50%" required/><br> 
```

区别：- ![1.2.0](https://i.stack.imgur.com/MLgSU.png) ![1.3.1](https://i.stack.imgur.com/9uPkC.png)

如果需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:02:25.857

我访问了[http://view.jquerymobile.com/1.3.1/demos/widgets/textinputs/](http://view.jquerymobile.com/1.3.1/demos/widgets/textinputs/)，然后在 Google Chrome 浏览器的“文本输入：”字段上单击鼠标右键 + 选择“检查元素”，以便开发人员工具分屏显示。在这里，您可以看到原始 html 以及 jQuery Mobile 3 脚本添加的 html。

jQuery Mobile 3 似乎将您的`<input>`元素包装在`<div>`具有 css 样式类的元素中`ui-input-text`。该`div`元素由 jQuery Mobile 3 设置为具有 100% 的样式`width`，如开发者工具屏幕的右半部分所示。这会导致文本输入字段比您想要的更宽。

一种可能的解决方案：

在`<input>`元素中，删除`style="width:50%"`

将此 css 添加到您的 html 文件中：

```
div.ui-input-text {
    width: 50%;      /* desired text input field width */
    margin: 0 auto;  /* center element */
    clear: both;     /* no other elements beside this one */
} 
```

不过要小心，更改`div.ui-input-text`类中的宽度会更改所有输入文本字段的宽度。如果您只想更改此特定文本输入字段的宽度，则`<form>`可以添加到`<form>`唯一 id，例如`<form id="uniqueid">`。现在在你的 css 中，这个特殊的表单可以被设置为：

```
form#uniqueid div.ui-input-text {
    width: 50%;      /* desired text input field width */
    margin: 0 auto;  /* center element */
    clear: both;     /* no other elements beside this one */
} 
```

# perl - 从 Perl XS 代码中，我如何递归调用自己？

> ID：16098245
> 
> 赞同：7
> 
> 时间：2013-04-19T06:04:08.630
> 
> 标签：perl, xs

我在 Pure Perl 中有一个复杂的编码函数，我正在将其转换为 XS，以期获得性能提升。

我正在转换为 XS 的函数需要递归调用自身。我可以看到如何使用 call_sv [感谢“man perlcall”] 来调用纯 Perl 函数。

但是我怎么在 XS 中调用自己（或任何其他 XS 函数）呢？

（PS效率非常可取……）

有人可以给我一个提示吗？还是一个例子？求求你！

更新：第一个答案是绝对正确的。调用递归纯 C 函数就可以了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T06:08:51.927

不。XS 是一种为 C 函数提供 Perl 接口的机制。不要从 C 函数中调用 XS 函数（你会使用`call_sv`或类似的函数）；从 XS 函数调用 C 函数。

编写递归 C 函数并将其保留在 XS 代码之外（`MODULE =`在行之前或单独的`.c`. 从薄 XS 包装器中调用它。

# multithreading - QThread：在正确的线程中调用信号

> ID：16098247
> 
> 赞同：0
> 
> 时间：2013-04-19T06:04:16.743
> 
> 标签：multithreading, qt, qthread, qtimer

我有一些非常耗时的任务要在 GUI 应用程序中执行，我希望它们被线程化，这样它就不会冻结我的 GUI ..

为此，我创建了一个线程，并启动了一个计时器。我在我的线程的“运行”方法中将timeout（）方法从我的计时器连接到我想要并行化的耗时函数，但是当调用信号时，会在主线程中调用耗时函数我创建的那个。

这是我的代码，为示例简化：

```
void MyThread::run()
{
   m_pTimer = new QTimer()
   connect(m_pTimer, SIGNAL(timeout()), this, SLOT(timeConsumingMethod()));
   m_pTimer->start(x);
} 
```

我在“timeConsumingMethod”、MyThread::run() 和我的 main 中打印了静态方法 QThread::currentThread() 的值，它的值与我的 main 中的值相同。

如何让我的函数在分离的线程中运行？更重要的是为什么我的代码错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:02:52.790

“你这样做是错的。” :)

尝试这个：

我的工人.h

```
#include ...

class MyWorker : public QObject {
   Q_OBJECT
public:
   explicit MyWorker(QObject* parent = 0);
public slots:
   void timeConsumingMethod();
} 
```

我的工人.cpp

```
#include "myworker.h"

#include ...

MyWorker::MyWorker(QObject* parent) : 
   QObject(parent) 
{
   /*
   ...
   */
}

void MyWorker::timeConsumingMethod() {
   /*
   ...
   */
} 
```

代码

```
/*...*/
MyWorker* worker = new MyWorker();
QThread* workerThread = new QThread();
QTimer* timer = new QTimer();

worker->moveToThread(workerThread);
worker->connect(timer, SIGNAL(timeout()), SLOT(timeConsumingMethod()));

// don't forget proper obj deletion
// not the best way, but...
worker->connect(workerThread, SIGNAL(destroyed()), SLOT(deleteLater());

workerThread->start();
timer->start(x); 
```

在这种情况下，worker 将“生活”在 workerThread 中。QT SIGNAL-SLOT 机制支持不同线程中对象之间的连接。

通过重新实现 run() 方法和 QThread 继承，这种方法比“程序方式”要好得多

worker 工作，QThread 控制线程

来源：http: [//qt-project.org/wiki/Threads_Events_QObjects](http://qt-project.org/wiki/Threads_Events_QObjects)

# nsis - 在安装完成时打开一个 pdf/Wordpad 文件

> ID：16098254
> 
> 赞同：1
> 
> 时间：2013-04-19T06:04:50.543
> 
> 标签：nsis

我正在使用 HM NIS 编辑 2.03。对于我的设置安装，我需要在安装结束时打开一个帮助文件。该文件可以是 pdf、记事本或 word 页面文件。我试过`!define MUI_FINISHPAGE_RUN`了，但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:18:21.617

`MUI_FINISHPAGE_RUN`只能启动真正的应用程序，启动其他可以使用的东西`MUI_FINISHPAGE_SHOWREADME`。如果您已经在使用`MUI_FINISHPAGE_SHOWREADME`其他东西，则可以使用自定义运行功能：

```
Function MyFinishRun
ExecShell "" "$instdir\readme.doc"
FunctionEnd

!define MUI_FINISHPAGE_RUN
!define MUI_FINISHPAGE_RUN_FUNCTION MyFinishRun
!insertmacro MUI_PAGE_FINISH 
```

# android - 电话响铃时将 TTS 输出路由到蓝牙耳机

> ID：16098259
> 
> 赞同：3
> 
> 时间：2013-04-19T06:05:25.163
> 
> 标签：android, bluetooth, text-to-speech

我有一个 EDR 蓝牙耳机，需要将 TTS 语音路由到耳机。我可以在未通话时使用以下代码实现它。

```
AudioManager am = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
am.startBluetoothSco();
am.setBluetoothScoOn(status);
ttsMap.put(TextToSpeech.Engine.KEY_PARAM_STREAM, String.valueOf(AudioManager.STREAM_VOICE_CALL)); 
```

但是我需要在电话为我的应用程序[来电者姓名说话者](https://play.google.com/store/apps/details?id=com.pa.caller)振铃时将语音路由到蓝牙设置，而我只能听到蓝牙模块的来电警报。手机响铃时是否有任何黑客可以将音频路由到蓝牙设备？

任何帮助都感激不尽。

# wpf - WPF - “g”有时会被切断

> ID：16098267
> 
> 赞同：2
> 
> 时间：2013-04-19T06:05:54.260
> 
> 标签：wpf, combobox, textblock

我有一个组合框，在其中显示简单的字符串。在某些时候，这看起来如下所示：

![滚动前的文本](https://i.stack.imgur.com/0BIbW.png#)

还行吧。现在向下滚动一步：

![滚动后的文本](https://i.stack.imgur.com/5PLes.png)

现在“g”在底部被切断。到目前为止我已经尝试过：将 height 属性显式设置为 Auto。更改填充和边距。没有任何效果。你们中的一些人有同样的问题或有什么我可以尝试的建议吗？

**编辑**

这里是相关的 XAML：

```
<Style x:Key="GraphicEditorInplaceLabelEditStyle">
    <Setter Property="ComboBox.Focusable" Value="True"/>
    <Setter Property="ComboBox.IsEditable" Value="True"/>
    <Setter Property="ComboBox.IsReadOnly" Value="False"/>
    <Setter Property="ComboBox.IsTextSearchEnabled" Value="True"/>

    <!--Use Separators for empty entries-->
    <Setter Property="ComboBox.ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="{x:Type ComboBoxItem}" BasedOn="{StaticResource {x:Type ComboBoxItem}}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding}" Value="">
                        <Setter Property="IsEnabled" Value="False"/>
                        <Setter Property="Template">
                            <Setter.Value>
                                <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                                    <Separator HorizontalAlignment="Stretch"/>
                                </ControlTemplate>
                            </Setter.Value>
                        </Setter>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Setter.Value>
    </Setter>

    <Setter Property="ComboBox.Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition></ColumnDefinition>
                        <ColumnDefinition></ColumnDefinition>
                    </Grid.ColumnDefinitions>

                    <Border Validation.ValidationAdornerSiteFor="{Binding RelativeSource={RelativeSource FindAncestor,AncestorType=ComboBox}}" Background="{StaticResource ComboBoxActiveBackgroundBrush}" BorderBrush="{StaticResource ComboBoxBorderBrush}" BorderThickness="1" CornerRadius="2">
                        <Grid>
                            <ContentPresenter Margin="3,3,3,3" Content="{TemplateBinding SelectionBoxItem}" ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" HorizontalAlignment="Left" IsHitTestVisible="False" Name="ContentSite" VerticalAlignment="Center" />
                            <TextBlock Style="{x:Null}" x:Name="PART_TextBackground" Margin="3,3,3,3" Background="Transparent" Focusable="False" FontStyle="Italic" Foreground="LightGray" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                            <TextBox Style="{x:Null}" x:Name="PART_EditableTextBox" Margin="3,3,3,3" Background="Transparent" Focusable="True" HorizontalAlignment="Left" IsReadOnly="{TemplateBinding IsReadOnly}" VerticalAlignment="Center" Visibility="Hidden">
                                <TextBox.Template>
                                    <ControlTemplate TargetType="TextBox">
                                        <Border x:Name="PART_ContentHost" Background="{TemplateBinding Background}" Focusable="False" />
                                    </ControlTemplate>
                                </TextBox.Template>
                            </TextBox>
                            <Popup AllowsTransparency="True" Focusable="False" IsOpen="{TemplateBinding IsDropDownOpen}" Name="Popup" Placement="Bottom" PopupAnimation="Slide">
                                <Grid MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{TemplateBinding ActualWidth}" Name="DropDown" SnapsToDevicePixels="True">
                                    <Border x:Name="DropDownBorder" Background="{StaticResource ComboBoxActiveBackgroundBrush}" BorderBrush="{StaticResource ComboBoxBorderBrush}" BorderThickness="1" />
                                    <ScrollViewer Margin="4,6,4,6" SnapsToDevicePixels="True" CanContentScroll="False">
                                        <StackPanel KeyboardNavigation.DirectionalNavigation="Contained" IsItemsHost="True" />
                                    </ScrollViewer>
                                </Grid>
                            </Popup>
                        </Grid>
                    </Border>

                    <ToggleButton Grid.Column="1" ClickMode="Press" Focusable="false" IsChecked="{Binding Path=IsDropDownOpen,Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}" Name="ToggleButton" VerticalAlignment="Bottom">
                        <ToggleButton.Template>
                            <ControlTemplate TargetType="ToggleButton">
                                <Grid>
                                    <Border x:Name="Border"
                            CornerRadius="2"
                            Background="{StaticResource ComboBoxActiveBackgroundBrush}"
                            BorderBrush="{StaticResource ComboBoxBorderBrush}"
                            BorderThickness="1"
                            Margin="0,0,0,0" />

                                    <Rectangle x:Name="arrow"
                               Height="6"
                               Width="8"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Margin="2"
                               Fill="{StaticResource ComboBoxArrowDownBrush}" />
                                </Grid>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="ToggleButton.IsMouseOver"
                             Value="true">
                                        <Setter TargetName="Border"
                                Property="Background"
                                Value="{StaticResource ComboBoxMouseOverBackgroundBrush}" />
                                        <Setter TargetName="arrow"
                                Property="Fill"
                                Value="{StaticResource ComboBoxArrowDownMouseOverBrush}"></Setter>
                                    </Trigger>
                                    <Trigger Property="ToggleButton.IsChecked"
                             Value="true">
                                        <Setter TargetName="Border"
                                Property="Background"
                                Value="{StaticResource ComboBoxPressedBackgroundBrush}" />
                                        <Setter Property="Fill"
                                TargetName="arrow"
                                Value="{StaticResource ComboBoxArrowUpBrush}" />
                                    </Trigger>
                                    <Trigger Property="IsEnabled"
                             Value="false">
                                        <Setter TargetName="Border"
                                Property="Background"
                                Value="{StaticResource ComboBoxInactiveBackgroundBrush}" />
                                        <Setter Property="Foreground"
                                Value="{StaticResource FontInactiveBrush}" />
                                        <Setter Property="Fill"
                                TargetName="arrow"
                                Value="{StaticResource ComboBoxArrowDownInactiveBrush}" />
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </ToggleButton.Template>
                        <ToggleButton.RenderTransform>
                            <TranslateTransform X="-3" Y="0"></TranslateTransform>
                        </ToggleButton.RenderTransform>
                    </ToggleButton>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="HasItems" Value="false">
                        <Setter Property="Visibility" TargetName="ToggleButton" Value="Collapsed" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Foreground" Value="{StaticResource FontInactiveBrush}" />
                    </Trigger>
                    <Trigger Property="IsGrouping" Value="true">
                        <Setter Property="ScrollViewer.CanContentScroll" Value="false" />
                    </Trigger>
                    <Trigger Property="Popup.AllowsTransparency" SourceName="Popup" Value="true">
                        <Setter Property="CornerRadius" TargetName="DropDownBorder" Value="4" />
                        <Setter Property="Margin" TargetName="DropDownBorder" Value="0,2,0,0" />
                    </Trigger>
                    <Trigger Property="IsEditable" Value="true">
                        <Setter Property="IsTabStop" Value="false" />
                        <Setter Property="Visibility" TargetName="PART_EditableTextBox" Value="Visible" />
                        <Setter Property="Visibility" TargetName="ContentSite" Value="Hidden" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我试图更改 ComboBoxItem 的填充/边距以及项目主机堆栈面板。

# xml - RedHat Enterprise 5 上的 Tomcat servlet 问题

> ID：16098268
> 
> 赞同：0
> 
> 时间：2013-04-19T06:05:54.587
> 
> 标签：xml, apache, tomcat, servlets, redhat

我最近（几乎）完成了我正在处理的合同的应用程序，并且正在将当前实例从我的工作计算机移植到生产服务器，以便在我执行开发的最后步骤之前解决任何问题，我遇到了一些配置问题。任何帮助将不胜感激。

我正要开始工作并检查操作系统版本，但显然有人将其关闭了……我认为它正在运行 Natty 或 Oneiric。生产服务器正在运行 Redhat Enterprise 5。

我的 destkop (Ubuntu) 上的 Web 应用程序由 apache2 托管。它是一个带有代理的网页，通过 AJP 将流量路由到同一台计算机上的 tomcat6 实例。此代理仅受到从网页发起的 AJAX 请求的影响。

我正在将此应用程序移植到已经安装了 tomcat 的 Red Hat 实例。RELEASE-NOTES 表示它是 7.0.23 版本。在我加入我的 webapp 之前，我想测试一下 tomcat 的功能。我在 webapps/ 中创建了一个虚拟 webapp 文件夹，并在其中创建了一个 index.html 文件，并尝试通过网络浏览器进行连接，但没有成功。

启动 tomcat 会产生以下日志：

```
Apr 19, 2013 5:38:22 AM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-\
1.6.0-sun-1.6.0.41.x86_64/jre/lib/amd64/server:/usr/lib/jvm/java-1.6.0-sun-1.6.0.41.x86_64/jre/lib/amd64:/usr/lib/jvm/java-1.6.0-sun-1.6.0.41.x86_64/jre/../lib/amd64:/\
usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
Apr 19, 2013 5:38:22 AM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'debug' to '0' did not find a matching property.
Apr 19, 2013 5:38:23 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Apr 19, 2013 5:38:23 AM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Apr 19, 2013 5:38:23 AM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 1364 ms
Apr 19, 2013 5:38:23 AM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Apr 19, 2013 5:38:23 AM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.23
Apr 19, 2013 5:38:23 AM org.apache.catalina.core.ContainerBase startInternal
SEVERE: A child container failed during start
java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardCo\ntext[]]
    at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)
    at java.util.concurrent.FutureTask.get(FutureTask.java:83)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1100)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:782)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1525)
    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1515)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[]]
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
    ... 7 more
Caused by: java.lang.UnsupportedClassVersionError: com/dell/oma/common/OMASessionListener : Unsupported major.minor version 51.0 (unable to load class com.dell.oma.com\mon.OMASessionListener)
at org.apache.catalina.loader.WebappClassLoader.findClassInternal(WebappClassLoader.java:2827)             at org.apache.catalina.loader.WebappClassLoader.findClass(WebappClassLoader.java:1160)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1655)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1533) 
```

...以及其他一些非常相似的故障（子容器）。

这是我的 $TOMCAT/conf/server.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Server port="8005" shutdown="SHUTDOWN">
<Listener SSLEngine="on" className="org.apache.catalina.core.AprLifecycleListener"/>
<Listener className="org.apache.catalina.core.JasperListener"/>
<Listener className="org.apache.catalina.core.JreMemoryLeakPreventionListener"/>
<Listener className="org.apache.catalina.mbeans.GlobalResourcesLifecycleListener"/>
<Listener className="org.apache.catalina.core.ThreadLocalLeakPreventionListener"/>

<GlobalNamingResources>
<Resource auth="Container" description="User database that can be updated and saved" factory="org.apache.catalina.users.MemoryUserDatabaseFactory" name="UserDatabase" pathname="conf/tomcat-users.xml" type="org.apache.catalina.UserDatabase"/>
</GlobalNamingResources>

<Service name="Catalina">
<Connector port="8080" protocol="HTTP/1.1"
           connectionTimeout="20000"
           redirectPort="8443" />

<Connector port="8009" protocol="AJP/1.3" redirectPort="8443"/>

<Engine defaultHost="localhost" name="Catalina">

  <Realm className="org.apache.catalina.realm.LockOutRealm">

    <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/>
  </Realm>

  <Host appBase="webapps" autoDeploy="true" name="localhost" unpackWARs="true">

  <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs" pattern="%h %l %u %t &quot;%r&quot; %s %b" prefix="localhost_access_log." suffix=".txt"/>

      <Context debug="0" docBase="omsa" path="">
                    <Manager className="org.apache.catalina.session.PersistentManager" saveOnRestart="false"/>
            </Context>
    </Host>
</Engine>
</Service>
</Server> 
```

我对 servlet 和 xml 配置还是有点陌生​​。如果我遗漏了任何必要的信息，请告诉我，我将发布编辑。感谢大家的帮助。这让我困扰了一两天。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:51:03.657

Java 类版本 51.0 来自 java 7。这意味着这个戴尔库是为 java 7 编译的，而您的服务器正在运行 java-1.6.0.41。因此，您要么必须升级服务器上的 java 版本，要么重新编译戴尔库。第一种方法似乎更可取，因为自二月以来不再支持 java 6。

# python - 如何在 Python 代码中定义的类的 C/C++ 扩展模块中创建新实例？

> ID：16098271
> 
> 赞同：2
> 
> 时间：2013-04-19T06:06:02.383
> 
> 标签：python, c, extending

正如消息主题所说：**我如何在 C/C++ 扩展模块中创建在 Python 代码中定义的类的新实例？**我将在下面提供更多信息。

注意#1：我正在尝试使用 Python/C API 来执行此操作，如下所示。但是我也可以接受任何其他替代解决方案~）

我有一个 Python 文件，CppInterop.py：

```
import CppProxy

class RealTimeData:
    def __init__(self, id, value):
        self.id = id
        self.value = value

def writeAll():
    dataList= []
    dataList.append(RealTimeData("ID::001", 1.0))
    dataList.append(RealTimeData("ID::002", 2.0))
    dataList.append(RealTimeData("ID::003", 3.0))
    count = CppProxy.WriteRealTimeDataList(dataList)
    print count

def readAll():
    dataList = CppProxy.ReadRealTimeDataList()  # Try to read the list back
    for data in dataList:
        print "id: ", data.id
        print "value: ", data.value
    pass

if __name__ == '__main__':
    writeAll()
    readAll() 
```

在“ **readAll** ”函数中，我想将存储在 C/C++ 模块中的列表读回 Python 代码，然后打印每个元素。

预计从 CppProxy 返回的“dataList”是**一个包含 RealTimeData 类元素的列表**（如开头所定义的）。

为此，我认为在我的 C/C++ 模块扩展代码中，我需要创建一个 PyList 实例，然后创建一些 RealTimeData 实例。可能是这样的：

```
static
PyObject * ReadRealTimeDataList(PyObject * self, PyObject * args)
{
    // Create a new Python list, size of which is zero.
    PyObject * listObj = PyList_New(0);
    if (NULL == listObj)
    {
        return NULL;
    }

    // Append some elements to the list
    for (int i = 0; i < 3; ++i)
    {
        // How can I create a RealTimeData instance here and assign it to dataObj?
        PyObject * dataObj;

        PyObject * idObj = PyString_FromString("some id");
        PyObject_SetAttrString(dataObj, "id", idObj);

        PyObject * valueObj = PyFloat_FromDouble((double)i);
        PyObject_SetAttrString(dataObj, "value", valueObj);

        if (PyList_Append(listObj, dataObj) != 0)
        {
            // error!
            return NULL;
        }
    }

    // return the list object to Python part
    return Py_BuildValue("O", listObj);
} 
```

我读[了这个 SO 问题](https://stackoverflow.com/questions/3436730/accessing-the-underlying-struct-of-a-pyobject)。我是否需要做与定义新的 PyTypeObject 相同的事情来描述 Python 类 RealTimeData，然后创建它的新实例？

但我认为这实际上是**从 C++ 代码中引入了一种新的类类型，而不是重新使用已经在 Python 代码中定义的类类型。**

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:21:54.933

Python 定义的类在 Python/C 扩展中实例化，与在 Python 中完全相同：通过导入它并调用类对象：

```
// obtain the RealTimeData class
PyObject *get_RealTimeData()
{
    PyObject *module = PyImport_ImportModule("CppInterop");
    if (!module)
      return NULL;
    return PyObject_GetAttrString(module, "RealTimeData");
}

static
PyObject *ReadRealTimeDataList(PyObject *self, PyObject *args)
{
  static PyObject *RealTimeData = get_RealTimeData();
  ...

    // instantiate the class like you would in Python - by
    // calling the class object
    dataObj = PyObject_CallFunction(RealTimeData, "sd", "some id", 0.0);
    if (!dataObj)
      return NULL;
    ...
} 
```

几个不相关的注释：

*   `RealReadTimeDataList` for some reason doesn't return the data list, but a single-element tuple that holds the list. Since your Python code expects the list itself, just return `listObj` instead.
*   Error checking is missing: the code doesn't check the result of `PyString_FromString`, `PyFloat_FromDouble`, or `PyObject_SetAttrString`.
*   `Py_DECREF(listObj)` should be called when `PyList_Append` fails. As written, the code would leak `listObj` in such a situation.

# javascript - 如何使用 Google Drive Api 管理用户文档权限设置？(Javascript)

> ID：16098273
> 
> 赞同：3
> 
> 时间：2013-04-19T06:06:15.440
> 
> 标签：javascript, google-drive-api, google-api-js-client

我是 Google Drive SDK 的新手。我跟着

[https://developers.google.com/drive/v2/reference/permissions/insert?hl=en](https://developers.google.com/drive/v2/reference/permissions/insert?hl=en)

这个例子展示了如何更改文件的权限。我可以运行这段代码，但我的问题是我想更改多个文件的权限。我为用户尝试了一些循环，并在其中 fileId 循环，但是因为 javascript 不等待子函数完成（异步调用函数），所以它不会为我工作

请帮我

以下是我的代码...我对此感到非常困惑，请帮我解决这个问题

这是代码请在这里更正我

```
 var scopes = 'https://www.googleapis.com/auth/drive';

      // Use a button to handle authentication the first time.
      function handleClientLoad() {
        gapi.client.setApiKey(apiKey);
        //window.setTimeout(checkAuth,1);
        checkAuth();
      }

      function checkAuth() {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
      }

      function handleAuthResult(authResult) {
        var authorizeButton = document.getElementById('authorize-button');
        if (authResult && !authResult.error) {
          authorizeButton.style.visibility = 'hidden';
          makeApiCall();
        } else {
          authorizeButton.style.visibility = '';
          authorizeButton.onclick = handleAuthClick;
        }
      }

      function handleAuthClick(event) {
        gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
        return false;
      }

      // Load the API and make an API call.  Display the results on the screen.
      function makeApiCall() {
        var fileID = new Array();
        var email = new Array();
        fileID[0] = "1fEYDfB9owJAdxQ7lI0";
        fileID[1] = "1YYcKn1ZsiPYWA";

        email[0] = "email1@email.com";
        email[1] = "email2@email.com";
        email[2] = "email3@email.com";

          gapi.client.load('drive', 'v2', function() {
              for(var i=0;i<email.length;i++)
              {
                  var body = {
                            'value': email[i],
                            'type': "user",
                            'role': "reader"
                          };
                  for(var j=0;j<fileID.length;j++)
                    {

                        var fileid = fileID[j];

                       excuteRequest(body, fileid, function() { 
                              var request = gapi.client.drive.permissions.insert({
                                    'fileId': fileid,
                                    'resource': body
                                  });
                            request.execute(function(resp) { });
                        }); 
                    }
              }
          });
    }

      function excuteRequest(param1, param2, callback) {

            if (callback && typeof(callback) === "function") {
                callback();
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:49:46.983

使用流控制库，类似于`async`：[https ://github.com/caolan/async](https://github.com/caolan/async)

```
var files = ["id1", "id2", "id3"];
async.each(files, function(fileId, callback){

  gapi.client.drive.permissions.insert({
     'fileId': fileId,
     'resource': body
  }).execute(function(response) {
      callback(null, response);
  });

}, function(err){
  if (!err) { console.log('done.'); }
}); 
```

# php - 使用 PHP 替换数据库字符串

> ID：16098278
> 
> 赞同：-1
> 
> 时间：2013-04-19T06:06:48.873
> 
> 标签：php, database, string, replace

这是我的代码：

```
 echo "<td>" . $row4['CMUSERID'] . "</td>";
            echo "<td>" . $row4['CMCLAS'] . "</td>";
            echo "<td>" . $row4['CMRACE'] . "</td>";
            echo "<td>" . $row4['CMGEND'] . "</td>";
            echo "<td>" . $row4['CMSTRE'] . "</td>";
            echo "<td>" . $row4['CMDEXT'] . "</td>";
            echo "<td>" . $row4['CMCONS'] . "</td>";
            echo "<td>" . $row4['CMWISD'] . "</td>"; 
```

这是显示结果的页面的链接：

[http://oge.sytes.net/zetzer/includes/characters.php](http://oge.sytes.net/zetzer/includes/characters.php)

如何修改我的 php 代码以从显示中消除 PlayerClass 和 PlayerRace，所以如果他们没有选择班级或比赛，它会显示为空？我无法在数据库中更改它，因此必须在 php 显示中替换它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:10:57.243

```
 echo "<td>" . $row4['CMUSERID'] . "</td>";
        echo "<td>";
             echo $row4['CMCLAS'] == "PlayerClass" ? "&nbsp;" : $row4['CMCLAS'];
        echo "</td>";
        echo "<td>";
             echo $row4['CMRACE'] == "PlayerRace" ? "&nbsp;" : $row4['CMRACE'];
        echo "</td>";
        echo "<td>" . $row4['CMGEND'] . "</td>";
        echo "<td>" . $row4['CMSTRE'] . "</td>";
        echo "<td>" . $row4['CMDEXT'] . "</td>";
        echo "<td>" . $row4['CMCONS'] . "</td>";
        echo "<td>" . $row4['CMWISD'] . "</td>"; 
```

您可能想替换`&nbsp;`任何您喜欢的“”。

# android - 以错误方向保存的图像

> ID：16098281
> 
> 赞同：3
> 
> 时间：2013-04-19T06:06:54.437
> 
> 标签：android, camera, commonsware

我正在使用这段代码：

[https://github.com/commonsguy/cw-advandroid/blob/master/Camera/Picture/src/com/commonsware/android/picture/PictureDemo.java](https://github.com/commonsguy/cw-advandroid/blob/master/Camera/Picture/src/com/commonsware/android/picture/PictureDemo.java)

其中`Manifest`，`Activity Orientation`设置为**Landscape**。

所以，这就像只允许用户在横向模式下拍照，如果是通过手持设备在纵向模式下拍照，保存的图像是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/HCBRn.jpg)

**旋转 90 度的图像。**

在寻找解决方案后，我发现了这个：

[Android - 相机预览是横向的](https://stackoverflow.com/questions/3841122/android-camera-preview-is-sideways)

**解决方案是：**

`surfaceChanged()`检查_

```
Display display = ((WindowManager)getSystemService(WINDOW_SERVICE)).getDefaultDisplay();
display.getRotation(); 
```

并相应地更改**相机的 displayOrientation**。

```
camera.setDisplayOrientation(90); 
```

但无论我旋转设备多少次，`surfaceChanged()`都不会被调用。

我什至尝试`orientation="Landscape"`在**Manifest.xml**中删除，但预览本身显示为横向（可能是因为默认`android.view.SurfaceView`应该处于**横向模式**？）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:39:48.307

试试这个。

```
public void surfaceCreated(SurfaceHolder holder) {
    try {
        camera = Camera.open();
        camParam = camera.getParameters();
        Camera.Parameters params = camera.getParameters();
        String currentversion = android.os.Build.VERSION.SDK;
        Log.d("System out", "currentVersion " + currentversion);
        int currentInt = android.os.Build.VERSION.SDK_INT;
        Log.d("System out", "currentVersion " + currentInt);

        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {
            if (currentInt != 7) {
                camera.setDisplayOrientation(90);
            } else {
                Log.d("System out", "Portrait " + currentInt);

                params.setRotation(90);

                /*
                 * params.set("orientation", "portrait");
                 * params.set("rotation",90);
                 */
                camera.setParameters(params);
            }
        }
        if (getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {
            // camera.setDisplayOrientation(0);
            if (currentInt != 7) {
                camera.setDisplayOrientation(0);
            } else {
                Log.d("System out", "Landscape " + currentInt);
                params.set("orientation", "landscape");
                params.set("rotation", 90);
                camera.setParameters(params);
            }
        }
        camera.setPreviewDisplay(holder);
        camera.startPreview();
    } catch (IOException e) {
        Log.d("CAMERA", e.getMessage());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:37:13.727

由于您已强制应用程序为横向，因此当您旋转设备时应用程序的配置不会改变，因此您的 UI 不会被重绘。因此，您将永远不会因为它而看到 surfaceCreated/Changed 回调。

无论如何，您的问题不在于预览，而在于捕获的图片。

相机 API 不会自动知道哪条路是向下的；[它需要您通过使用 Camera.Parameters setRotation](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setRotation%28int%29)方法告诉它您希望如何旋转图像。这里有几个坐标系（相机传感器相对于您的设备的方向；您的 UI 相对于设备的方向；以及设备相对于世界的方向）必须正确完成。

所以我强烈推荐你使用 setRotation 文档中提供的代码，并继承自[OrientationEventListener](http://developer.android.com/reference/android/view/OrientationEventListener.html)，实现监听器如下：

```
 public void onOrientationChanged(int orientation) {
   if (orientation == ORIENTATION_UNKNOWN) return;
   android.hardware.Camera.CameraInfo info =
        new android.hardware.Camera.CameraInfo();
   android.hardware.Camera.getCameraInfo(cameraId, info);
   orientation = (orientation + 45) / 90 * 90;
   int rotation = 0;
   if (info.facing == CameraInfo.CAMERA_FACING_FRONT) {
       rotation = (info.orientation - orientation + 360) % 360;
   } else {  // back-facing camera
     rotation = (info.orientation + orientation) % 360;
   }
   mParameters.setRotation(rotation);
 } 
```

这将正确更新您的相机的静态图片方向，以便“向上”始终向上，无论您的应用是横向还是纵向，或者您的设备是平板电脑还是手机。

# javascript - 如何更改组形状中每个形状的相同背景颜色

> ID：16098285
> 
> 赞同：0
> 
> 时间：2013-04-19T06:07:16.667
> 
> 标签：javascript, canvas, html5-canvas, fabricjs

我正在使用canvas和fabric.js在asp.net mvc3 Web应用程序中做一个项目。我在做的时候有一个问题，我有一个组形状，超过3个矩形连接在一起形成一个形状。现在的问题是在将组形状从 div 拖放到画布之后，组形状的背景颜色应该变为灰色，但组形状中的一个对象形状的背景颜色正在改变。这是到目前为止的代码，我已经完成了改变颜色

```
 function drawActiveShape(x, y, type) {
        if (activeObject != null) {
            hideToolMenu();
            activeObject.left = x;
            activeObject.top = y;
            js_c_drawing.add(activeObject);
            if (type == 1) {
                activeObject.set('fill', 'gray');
                js_c_drawing.setActiveObject(activeObject);
            } else {
                activeObject.item(0).set('fill', 'gray');
                js_c_drawing.setActiveGroup(activeObject);
            }
            js_c_drawing.calcOffset();
            fabric.instances.push(js_c_drawing);
        }
        activeObject = null;
    } 
```

谁能告诉我如何更改组形状，提前谢谢

从其他条件中删除 item(0) 后，背景颜色正在改变，但拖放不起作用，如果我们放置 1，item(0) 中的另一件事是改变形状颜色意味着它将更改为下一个对象。我保持这样的 else 条件

```
else {
   activeObject.item(0).item(1).set('fill', 'gray');
   js_c_drawing.setActiveGroup(activeObject);
} 
```

拖放操作正在工作，但任何对象的背景颜色都没有改变

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:54:29.420

最后我通过改变一个词来解决，即改变组作为对象

```
if (type == 1) {
                activeObject.set('fill', 'gray');
              js_c_drawing.setActiveObject(activeObject);
            } else {
                activeObject.item(0).set('fill', 'gray');
                js_c_drawing.setActiveObject(activeObject);
            } 
```

# android - Play 商店在应用内购买产品最高限额

> ID：16098287
> 
> 赞同：3
> 
> 时间：2013-04-19T06:07:20.483
> 
> 标签：android, google-play

我知道 iOS 在应用程序购买产品中的最大数量为 10.000。有谁知道google play store有没有类似的限制？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2020-09-02T22:20:12.423

Raghavs 的回答不正确。至少对当前的 Google Play 控制台不正确。当前商店的应用内商品限制为 1000 个。

[![Google Play 管理中心应用内商品限制](https://i.stack.imgur.com/yX07v.png)](https://i.stack.imgur.com/yX07v.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:15:47.447

Google Play 没有限制，如果有限制，也没有公开记录。

另一方面，为什么您可能需要 10000 个应用产品？

# java - GWT - 将 Java 数组传递给 Javascript

> ID：16098288
> 
> 赞同：0
> 
> 时间：2013-04-19T06:07:23.560
> 
> 标签：java, javascript, gwt, jsni, gwt-exporter

我是 GWT 和 Javascript 的新手。

我正在尝试将 java int[] 发送到我的 javascript 函数。我正在使用 gwt-exporter 为我处理处理。这就是我设置的方式。

```
static class gwtExplorerTest implements Exportable {

    @Export("$wnd.handleAnchorClick")
    public static void handleAnchorClick(int param1, int param2 , int[] a1 , int[] a2)
    {
        //process  things here          
    }
} 
```

有人可以帮我用javascript代码传入我需要的数组吗？我目前拥有的是：

```
href="javascript:window.handleAnchorClick(" + currentRow + "," + currentColumn + "," + rowVals + "," + colVals + ",") " 
```

作为我的 JS 函数调用，其中 rowVals 和 colVals 是我需要传入的两个数组。它似乎不起作用。有人可以帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:20:23.690

如果您使用的是 json 字符串，那么我希望您需要在 handleAnchorClick 方法中将参数类型更改为字符串。然后你需要类型转换为 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:03:57.720

您在 java 中的函数是正确的，并且 gwt-exporter 支持这种语法。来自 JS 的调用应该是这样的：

```
 window.handleAnchorClick(1, 2, [3,4], [5,6]) 
```

您的问题是您试图从您的`href`属性中调用导出的方法，`html`并且您使用了错误的语法。

首先，最好使用`onClick`属性而不是`href`，因为你不需要`javascript:`标签，最好防止默认。而且，我宁愿定义一个函数来进行调用以避免语法问题。

```
<script>
  var currentRow = 1;
  var currentColumn = 2;
  var rowVals = [3,4];
  var colVals = [5,6];

  function mycall() {
    window.handleAnchorClick(currentRow, currentColumn, rowVals, colVals);
  }
</script>

<!-- I prefer this -->
<a href="#" onClick="javascript:mycall()">click</a>

<!-- But this should work as well -->
<a href="#" onClick="window.handleAnchorClick(currentRow,currentColumn,rowVals,colVals)">click</a> 
```

# powershell - 用于复制和执行的 Powershell 脚本

> ID：16098289
> 
> 赞同：2
> 
> 时间：2013-04-19T06:07:25.327
> 
> 标签：powershell, copy-item

基本上从输入提供的网络路径（例如“\SERVER\SHARE\”）我想将特定的 Excel 文件复制到我的桌面并自动运行它。问题是在我的桌面上还有其他包含字母 ZZZ 的 Excel 文件。有任何想法吗？谢谢！

```
$title = "Copy ZZZ to Desktop"
$zzzpath = read-host Paste ZZZ path here
copy-item "$zzzpath\*ZZZ*.xlsx" "C:\Users\%username%\Desktop\"
Invoke-Item C:\Users\%username%\Desktop\*ZZZ*.xlsx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:15:42.910

您可以将 Copy-Item 的输出通过管道传输到 Invoke-Item，强制前者将其输出传递给后者（通过 -PassThru）：

```
$title = "Copy ZZZ to Desktop"
$zzzpath = Read-Host Paste ZZZ path here

Copy-Item "$zzzpath\*ZZZ*.xlsx" "C:\Users\%username%\Desktop\" -PassThru |
    Invoke-Item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:54:35.310

我想我会做这样的事情：

```
$path = read-host "Enter/paste path"
$localdesktop = $env:userprofile, "\desktop" -join ("")

$xlsdoc = Get-ChildItem -path $path | where {$_.Name -match ".xlsx$" -and $_.Name -match "ZZZ"}

Copy-Item -path ($xlsdoc.FullName) -destination $localdesktop

$copiedxls = Get-ChildItem -path $localdesktop | where {$_.Name -match ".xlsx$" -and $_.Length -match $xlsdoc.Length}

Sleep -s 5

start $copiedxls.FullName

start $copiedxls 
```

编辑：我使用“.lenght”属性来比较文件大小。这就是我确定要开始的“zzz.xlsx”的方式。

厄伦德。

# ruby-on-rails - 在 Rails 3.2.11 中的 label_tag 中渲染 html（html_safe，raw 不工作）

> ID：16098290
> 
> 赞同：6
> 
> 时间：2013-04-19T06:07:25.807
> 
> 标签：ruby-on-rails, label

使用：Rails 3.2.11 & Ruby 1.8.7

我在尝试制作`label_tag`输出 html 时遇到了一些严重的问题。基本上可以归结为：

```
<%= label_tag "This will <strong>not</strong> work!" %> 
```

我努力了：

```
<%= raw label_tag "This will <strong>not</strong> work!" %>
<%= label_tag raw "This will <strong>not</strong> work!" %>
<%= label_tag "This will <strong>not</strong> work!".html_safe %>
<%= (label_tag "This will <strong>not</strong> work!").html_safe %> 
```

我已经安装了 gem 'rails_xss'。

没有任何作用！

尽管我可以找到很多与转义 html 相关的问题，其中人们遇到 raw 和 html_safe 无法正常工作的问题，但与 label_tag 没有任何关系。我不能使用 f.label 来解决这个问题。

这曾经在同一个应用程序上工作，但经过几次更新（Rails 3.0.3 -> 3.2.11 是主要的）它停止工作。我没有注意到这是什么时候发生的，所以我不确定是什么导致了问题。

你能复制吗？你有解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T06:17:54.483

问题是第一个参数`label_tag`应该是标签名称。如果您希望在标签内显示自定义内容，则必须是第二个参数。

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-label_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-label_tag)

尝试这个：

```
<%= label_tag "my label name", raw("This will <strong>not</strong> work!") %> 
```

# java - 从java发布到php并将其插入mysql数据库

> ID：16098293
> 
> 赞同：1
> 
> 时间：2013-04-19T06:07:40.827
> 
> 标签：java, php, mysql

我从java写了一个简单的帖子到我的php后端。在我运行脚本后，我得到了我在文件名、文件大小等中传递的输出。

```
int filesize=25;
String filetype=".txt";
String hash="sdfjksdfhljahe8wr897348957jsdfajlsdhfl48";
String email="sangwan.ritesh@yahoo.in";
String filename="songs.txt";
String urlParameters = "filename="+filename+"&filesize="+filesize+"&filetype="+filetype+"&filehash="+hash+"&email="+email;    
URL url = new URL("myurl");
HttpURLConnection hp=(HttpURLConnection)url.openConnection();
hp.setDoInput(true);
hp.setDoOutput(true);
hp.setInstanceFollowRedirects(false);
hp.setRequestMethod("POST");
hp.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
hp.setRequestProperty("charset", "utf-8");
hp.setRequestProperty("Content-Length", "" + Integer.toString(urlParameters.getBytes().length));
hp.setUseCaches (false);
DataOutputStream wr = new DataOutputStream(hp.getOutputStream ());
wr.writeBytes(urlParameters);
wr.flush();
String line;
BufferedReader reader = new BufferedReader(new InputStreamReader(hp.getInputStream()));
line = reader.readLine();
 System.out.println(line);
wr.close();
reader.close();
hp.disconnect(); 
```

问题是我想将这些值插入到我在服务器上运行的 mysql 数据库中，所以我编写了以下 php 代码。

```
<?php
include('dbc.php');
$filename=$_POST['filename'];
$filesize=$_POST['filesize'];
$filetype=$_POST['filetype'];
echo $POST['email'];
$filehash=$_POST['filehash'];
$email=$_POST['email'];
$query = "INSERT INTO files ( `email`, `file_name`, `file_ext`, `file_size`, 'file_hash') VALUES ( '$email', '$filename', '$filetype', '12584', 'filehash')";
$result=mysqli_query($dbc,$query);
if(mysqli_affected_rows($dbc) == 1)
{
  // DO Nothing
}
 echo $_POST['filehash'];
echo $_POST['email'];
echo $_POST['filename'];
echo $_POST['filesize'];
echo $_POST['filetype'];
?> 
```

正在发布数据，我在我的 java 应用程序中得到了同样的结果，但数据没有被输入到 mysql 数据库中。我有一个具有上述相同列的表名文件。我试图从 mysql_error 得到错误，但我没有得到任何错误。

更新：问题解决了使用 ' 而不是 file_hash 附近的 ` 的愚蠢 sql 语法错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:12:15.937

尝试在将变量输入数据库之前检查它们。你确定它们不是空的吗？

# spring-mvc - 访问页面 HDIV 时发生随机访问被拒绝错误

> ID：16098295
> 
> 赞同：0
> 
> 时间：2013-04-19T06:07:54.403
> 
> 标签：spring-mvc, spring-security, hdiv

对于任何安全请求，我都面临**随机拒绝访问的问题。**拒绝访问页面只是错误页面会出现 HDIV 异常。麻烦的部分是我们已经为 HDIV 配置了日志，但我们没有得到任何异常。当同一页面刷新时，页面加载正确。
我们有以下应用程序配置和环境JBoss 5 和 spring mvc security 2.5 和 HDIV 1.1 版。

现在在日志中我们收到错误消息**INVALID_HDIV_PARAMETER_VALUE**但没有太多细节

我无法确定出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T09:26:27.153

INVALID_HDIV_PARAMETER_VALUE 表示请求不包含 HDIV_STATE 参数。如果这种情况偶尔发生，那么您是在表单完全加载之前提交的。我遇到了同样的问题，我通过放置一个 z-index 更高的 div 解决了这个问题，使用 jQuery 淡出文档准备好的 div

# android - 如何在再次单击按钮时启动相同的异步任务

> ID：16098296
> 
> 赞同：2
> 
> 时间：2013-04-19T06:07:57.843
> 
> 标签：android

我是 Android 新手，现在正在使用`AsyncTask`.

所以问题是我有一个按钮和那个按钮`OnClickListener`。

```
button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                boolean check;
                check=check_button_status();
                if(check==true){
                rec_forward_task.execute();
                }
                else
                {
                    rec_forward_task.cancel();
                }

            }
        }); 
```

所以这里`rec_forward_task`是扩展`AsyncTask`. 课堂在`AsyncTask`这里。//

```
private class CounterForwardTask extends AsyncTask<Void, Integer, Integer>
{
    TextView record_counter_display;
    int rec_counter,count;
    int last_value;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        record_counter_display=(TextView) findViewById(R.id.rec_voice_counter);
        rec_counter=0;
        record_counter_display.setText(String.valueOf(rec_counter));

        count=0;
    }

    public void cancel() {
        // TODO Auto-generated method stub
        onCancelled();
    }

    @Override
    protected Integer doInBackground(Void... params) {
        // TODO Auto-generated method stub
        while(rec_status)
        {
            publishProgress(count);
            try {
                Thread.sleep(1000);
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            last_value=count;
            count=count+1;
        }
        return 1;
    }

    @Override
    protected void onCancelled() {
        // TODO Auto-generated method stub
        record_counter_display.setText(String.valueOf(0));
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // TODO Auto-generated method stub
        runOnUiThread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                record_counter_display.setText(String.valueOf(count));
            }
        });
    }

    @Override
    protected void onPostExecute(Integer result) {
        // TODO Auto-generated method stub
        record_counter_display.setText(String.valueOf(last_value));
    }

} 
```

我只在 oncreate 方法中为该类创建对象，所以现在问题是。

当用户第一次按下计数器开始并在文本视图中显示并再次按下相同的按钮时，计数器进度由于 oncancel 方法被调用而停止。但是如果用户再次按下相同的按钮应用程序强制关闭和你不能的异常启动已经启动的任务。那么执行这种操作的方法是什么。感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:13:57.307

```
if(check==true){
    rec_forward_task = new CounterForwardTask();
    rec_forward_task.execute();
}
else
{
    rec_forward_task.cancel();
} 
```

当您需要启动它时，而不是在 onCreate 中实例化 AsyncTask 。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:09:45.367

您将必须创建一个新的 AsyncTask 对象。AsyncTask 只运行一次。

检查[这个答案。](https://stackoverflow.com/questions/6373826/execute-asynctask-several-times)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:24:12.373

异步任务被设计为只运行一次。但是您可以通过创建 asynctask 类的新实例来运行它。查看 Passionate Androiden 的答案

**线程规则**

要使此类正常工作，必须遵循一些线程规则：

AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。

任务实例必须在 UI 线程上创建。必须在 UI 线程上调用 execute(Params...)。不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。

*该任务只能执行一次（如果尝试第二次执行将引发异常。）*

请在[开发者网站中了解更多信息](http://developer.android.com/reference/android/os/AsyncTask.html)

# java - 在不同的android项目eclipse中使用类文件

> ID：16098297
> 
> 赞同：0
> 
> 时间：2013-04-19T06:07:58.247
> 
> 标签：java, android, eclipse

我是 eclipse 和编程的新手，但有一个需要帮助的大学项目。我创建了一个 Android 应用程序项目，它使用 GPS 定位您的位置（实际上是在网上找到的代码并且运行良好）。

这是我的 MainActivity.java ：

```
 package com.example.locationfromgps;

import android.app.Activity;
import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.Menu;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity implements LocationListener{

LocationManager locationManager ;
String provider;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // Getting LocationManager object
    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

    // Creating an empty criteria object
    Criteria criteria = new Criteria();

    // Getting the name of the provider that meets the criteria
    provider = locationManager.getBestProvider(criteria, false);

    if(provider!=null && !provider.equals("")){

        // Get the location from the given provider
        Location location = locationManager.getLastKnownLocation(provider);

        locationManager.requestLocationUpdates(provider, 20000, 1, this);

        if(location!=null)
            onLocationChanged(location);
        else
            Toast.makeText(getBaseContext(), "Location can't be retrieved", Toast.LENGTH_SHORT).show();

    }else{
        Toast.makeText(getBaseContext(), "No Provider Found", Toast.LENGTH_SHORT).show();
    }
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

@Override
public void onLocationChanged(Location location) {
    // Getting reference to TextView tv_longitude
    TextView tvLongitude = (TextView)findViewById(R.id.tv_longitude);

    // Getting reference to TextView tv_latitude
    TextView tvLatitude = (TextView)findViewById(R.id.tv_latitude);

    // Setting Current Longitude
    tvLongitude.setText("Longitude:" + location.getLongitude());

    // Setting Current Latitude
    tvLatitude.setText("Latitude:" + location.getLatitude() );
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub
}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub
}
} 
```

该项目将生成类文件为 BuildConfig.class MainActivity.class 和 R.class。我创建了一个不同的新 android 项目，使用配置构建路径 -> 库 -> 添加类文件夹添加了这些类文件，该文件夹有效并且在引用的库中可见。现在我的目标和问题是我是否可以运行这个新项目并让它显示一个位置而不添加实际的 java 代码（整个 MainActivity.java），但只能通过将它引用到类文件。我可以这样做吗？如果是的话怎么办？

PS：我实际上测试了一个只显示整数的小型Java项目；然后将它的类文件添加到另一个java项目中并运行这个新项目并且它工作但是当使用复杂的android应用程序项目时这似乎更复杂。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:35:08.257

你可以做两件事

*   如果您不想要 java 代码，请从您要使用的项目中制作一个 jar 并将其放在 libs 文件夹中
*   将一个项目标记为库项目并使用它

# visual-studio-2010 - 构建后事件无法执行

> ID：16098303
> 
> 赞同：2
> 
> 时间：2013-04-19T06:08:37.410
> 
> 标签：visual-studio-2010, visual-c++-6, post-build-event

我已将旧的 Visual C++ 6.0 项目转换为新的 Visual C++ 2010 项目。它可以运行，但是我从旧项目中获取的构建后事件存在问题。它在计算机上注册了目标文件（一个 .ocx）：

```
copy $(ProjDir)\PDFXChange\dll.Debug\*.* $(TargetDir) 
regsvr32 /s /c "$(TargetPath)" 
echo regsvr32 exec. time > "$(OutDir)\regsvr32.trg" 
```

在我的新解决方案中它不起作用。我还在单个命令中对其进行了测试：在三个命令（copy、regsvr32 和 echo）中，只有最后一个可以执行。什么可能是我的错误。

错误：

```
error MSB3073: The command "copy \PDFXChange\dll.Debug\*.* C:\_tests_\ocx2010\Debug\ 
regsvr32 /s /c "C:\_tests_\ocx2010\.\Debug\LayoutBox.dll" 
echo regsvr32 exec. time > ".\Debug\\regsvr32.trg"
:VCEnd" exited with code 3\. C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets 
```

COPY 和 REGSVR32 似乎不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T07:09:09.053

问题出在宏 $(ProjDir) 的名称中。在 Visual C++ 2010 中，它是 $(ProjectDir)

$(ProjDir) -> $(项目**目录**)

一些宏改变了他们的名字（经过这么多年）！

命令**copy \PDFXChange\dll.Debug*.* C: *tests* \ocx2010\Debug**应该将一些 DLL 复制到下一个命令**regsvr32 /s /c "C: *tests* \ocx2010.\Debug\LayoutBox.dll**尝试的文件夹中注册目标文件。它在那里找不到任何DLL，所以它退出并显示错误消息。

# java - 安卓详情查看

> ID：16098308
> 
> 赞同：-2
> 
> 时间：2013-04-19T06:08:58.693
> 
> 标签：java, android, detect

我正在开发一个应用程序，提供有关城市的详细信息。当用户从第一页选择任何城市时，页面必须指向下一页..在该页面中必须显示城市的详细信息，通过向下滚动用户必须阅读所有详细信息..为此我必须做什么。我必须使用哪个组件..请帮助..我读了很多问题，但我没有得到答案。我知道这是一件简单的事情，但这是我的问题..

我读了这个问题

[在 Android 的 ListView 中显示对象详细信息](https://stackoverflow.com/questions/4462829/displaying-object-details-in-a-listview-in-android)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:27:28.887

例如，使用自定义列表视图查看此[示例](http://www.javasrilankansupport.com/2012/05/android-listview-example-with-image-and.html)和此[示例 2](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)

调用详细视图。您需要在第一个活动中处理 ListView 的 OnItemClick 侦听器。在项目单击调用意图以获取详细活动。您可以将所需的文本与`intent.putExtra`详细活动一起传递。并且不要忘记在清单中给出新的活动。

它会是这样的：

```
listView.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() {
@Override
public void onItemClick(AdapterView<?> parent, View view,int position, long id) {
  Intent in=new Intent(FirstActivity.this,DetailActivity.class);
  startActivity(in)           
            }
        }); 
```

请参阅本[示例 3](http://www.codeproject.com/Articles/507651/Customized-Android-ListView-with-Image-and-Text)。它将给出清晰的图像。

# android - Android -Type 无效的转义序列（有效的是 \b \t \n \f \r \" \' \\ ）

> ID：16098310
> 
> 赞同：0
> 
> 时间：2013-04-19T06:09:11.990
> 
> 标签：android, string, class, android-manifest

我正在尝试使用字符串来更改 XLM 中的 TextView，但我不断收到此错误。我不会让每一行都在新行上。谁能帮忙谢谢

```
String ingredients = "40ml vodka \n\ 120ml tomato juice \n\ 5ml lemon or lime juice \n\ 5ml worcestershire sauce \n\ 2 dashes tabasco \n\ salt"; 
```

抛出错误

```
Type Invalid escape sequence (valid ones are  \b  \t  \n  \f  \r  \"  \'  \\ ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:12:25.567

你为什么要逃离空间？如果您将其省略，则应该可以将每个 '\ ' 替换为纯空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T09:49:42.950

转义字符前面有双反斜杠。例如，使用 '\\n'</p> 创建换行符

# jquery - qTip2 的替代品

> ID：16098311
> 
> 赞同：1
> 
> 时间：2013-04-19T06:09:12.267
> 
> 标签：jquery, popover, qtip2

有谁知道 qTip2 的工具提示的一个很好的替代品。我真的很喜欢 qTip2 工具提示，但与 jqueryTools 相比它是 40KB。我只是在寻找非常轻量级的弹出框功能，我可以在其中添加自己的 CSS 样式。

我查看了引导程序的弹出窗口，但它没有提供 qTip2 提供的功能。我也想尽可能地保持我的 HTML 干净。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:22:01.187

是的，有很多：

**[简单提示](http://craigsworks.com/projects/simpletip)**

**[下一个消息](https://code.google.com/p/next-msg)**

这个链接：

**[50 个 jQuery 工具提示插件](http://www.smashingapps.com/2011/12/05/50-awesomely-useful-yet-free-jquery-tooltip-plugins.html)**

# spring - Spring MVC 上下文：将 bean 添加到根应用程序上下文

> ID：16098312
> 
> 赞同：1
> 
> 时间：2013-04-19T06:09:20.283
> 
> 标签：spring, spring-mvc, applicationcontext

我正在开发网络应用程序，我使用 Spring MVC。它有一个 servlet。因此，如果我是对的，它应该有一个根应用程序上下文和该 servlet 的附加应用程序上下文。servlet 应用程序上下文中的 bean 可以访问根应用程序上下文中的 bean。但是，假设应用程序已启动，并且我想将一些 bean 添加到根应用程序上下文中，我应该如何进行？基本上，我在“additional-beans.xml”中有一些 bean 配置。我想将它们添加到根应用程序上下文中，但不是在初始化点，而是在 Web 应用程序启动后的一段时间。怎么做？好像在做类似的事情

```
AbstractApplicationContext rootContext = new ClassPathXmlApplicationContext(new String[]{"additional-beans.xml"}); 
```

使用我的一个控制器不会向根应用程序上下文添加额外的 bean。但是，它们在哪里添加？甚至可能吗？谢谢）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:31:19.683

您可以使用惰性初始化 bean

```
<bean id="myBean" class="net.spring.ioc.MyBean"
        lazy-init="true" /> 
```

PS：我的建议是使用`WebApplicationContext`

```
 <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/mvc-dispatcher-servlet.xml</param-value>
    </context-param>

    <listener>
        <listener-class>
                      org.springframework.web.context.ContextLoaderListener
        </listener-class>
    </listener> 
```

[http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/](http://www.mkyong.com/spring3/spring-3-mvc-hello-world-example/)

# mysql - 如何使用 mysql cmdline 获取受影响记录的数量？

> ID：16098314
> 
> 赞同：1
> 
> 时间：2013-04-19T06:09:25.650
> 
> 标签：mysql, shell, command-line, output, verbosity

我正在运行`mysql`cmdline 二进制文件来执行查询。（具体来说，我正在执行 `LOAD DATA LOCAL INFILE`）。我想让它在每条语句之后打印受影响的记录数 - 但没有其他行。我不介意包含其他信息的行，例如

```
Query OK, 20 rows affected, 4 warnings 
```

会很好。事实上，我可以得到它——但前提是我使用这`-v -v`对开关，然后我得到更多我不需要的信息，比如解析命令的回显。

`grep`除了上述行的模式的输出之外，我还能做任何事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T20:29:40.627

这可能不是最好的解决方案，但您可以尝试 SQL [ROW_COUNT()](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_row-count)函数

例如：

```
mysql ... -e "YOUR_QUERY;SELECT ROW_COUNT()" -B | tail -n 1 
```

# titanium-mobile - 视频未显示在 Android 应用的相册中

> ID：16098325
> 
> 赞同：0
> 
> 时间：2013-04-19T06:10:11.207
> 
> 标签：titanium-mobile

为什么我无法从相册中看到 Android 应用程序中的视频。我使用的代码如下。.

```
Titanium.Media.openPhotoGallery({
            success:function(event)  //success event
            {             
                Ti.API.debug('Our type was: '+event.mediaType);
                if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO,Ti.Media.MEDIA_TYPE_VIDEO)
                {
                    UploadPhotoToServer(event.media);
                }
            },
            cancel:function()
            {   
            },
            error:function(err)
            {
                Ti.API.error(err);
            },
            mediaTypes:[Ti.Media.MEDIA_TYPE_PHOTO,Ti.Media.MEDIA_TYPE_VIDEO]
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:21:33.540

**这**不是有效的 JS。

```
if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO,Ti.Media.MEDIA_TYPE_VIDEO)
{
    UploadPhotoToServer(event.media);
} 
```

改成

```
if(event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO || event.mediaType == Ti.Media.MEDIA_TYPE_VIDEO)
{
    UploadPhotoToServer(event.media);
} 
```

（见 if 子句）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T06:27:37.220

在 Android 上，使用 Intent

```
var intent = Titanium.Android.createIntent({
        action : Ti.Android.ACTION_PICK,
        type : "video/*"
    });

    intent.addCategory(Ti.Android.CATEGORY_DEFAULT);
    var activity = Titanium.Android.currentActivity;
    activity.startActivityForResult(intent, function(e) { if (e.error) { ...} else { ...}}: 
```

# jqgrid - 包含 href 链接的网格链接到所有行而不是特定行

> ID：16098330
> 
> 赞同：0
> 
> 时间：2013-04-19T06:10:35.180
> 
> 标签：jqgrid

我制作了一个网格，其中最后一列包含重新发送的链接。此链接将邮件重新发送到该行中提到的一方。当我单击该链接时，它会将邮件重新发送给网格中的所有各方而不是该特定行。下面是我的代码

```
 $(document).ready(
function(){

   var lastselsignStatusGrid ;
    var signStatusGridurl = $('#signatureStatus_ctxPath').val() +                   '/rest/retrieveSignStatus';
    var maintainsignStatusGridurl = $('#signatureStatus_ctxPath').val() +  '/rest/maintainSignStatus';
  jQuery('#signStatusGrid').jqGrid({
url: signStatusGridurl,
datatype: "json",
mtype: 'GET',
altRows:true,
loadonce: true,
colNames:['Name','Role','Signature status','Due Date','Signed              Date','Email','EmailId','PartyId'],
colModel:[
    {name: 'name',index: 'name',sortable:true,search:true,sorttype: 'text',               searchoptions:{sopt:['eq','ne','bw','cn']}},
{name: 'role',index: 'role',sortable:true,search:true,sorttype: 'text', searchoptions: {sopt:['eq','ne','bw','cn']}},
      {name: 'signed',index: 'signed',sortable:false,search:false,sorttype: 'text'},
 {name: 'dueDate',index: 'dueDate',formatter: 'date', formatoptions:      {"srcformat":"m/d/Y","newformat":"m/d/Y"}, unformat: unformat, sortable:false,search:false,sorttype: 'date'},
   {name: 'signedDate',index: 'signedDate',sortable:false,search:false,sorttype: 'text'},
   {name: 'resend',index: 'resend',formatter: customLinksignStatusresend, unformat: unformat, sortable:false,search:false,sorttype: 'text'},
   {name: 'emailAddress',index: 'emailAddress',hidden:true },
   {name: 'partyId',index: 'partyId',hidden:true}

],
rowNum:10,
rowList:[10,20,30],
multiselect: false,
viewrecords: true,
emptyrecords: "No record present",
imagepath: "js/themes/redmond/images",
autowidth: true,
caption:''
   });

    function customLinksignStatusresend(cellValue, options, rowObject){

if (rowObject[2] == "Complete") { 
    return "";
} else{
    //return rowObject[5];
    //return '<a href="#">' + "Resend</a>";
    return '<a href="#Test">' + cellValue + '<a>';
}
}
    $(document).delegate('#signStatusGrid .jqgrow td a[href="#Test"]', 'click',   function () 
     { 
var localGridData = $("#signStatusGrid").jqGrid('getGridParam','data');
var postData = JSON.stringify(localGridData);
var rowDetails="";
var selectedRows = $('#signStatusGrid').jqGrid('getGridParam', 'data');
var rowsArray = new Array();
var rowId = '';

for(var i=0;i<localGridData.length;i++)
{
     var rowData = localGridData[i];
     var emailAddr = rowData.emailAddress;
     var partyId = rowData.partyId;
    rowDetails += partyId+":" +emailAddr+ ',';

    $.ajax({

    url: $('#signatureStatus_ctxPath').val()+'/rest/resendEmail?partyId='+ partyId,

                datatype : "json",
                contentType: "application/json; charset=utf-8",
                type:"POST",
                error : function(xhr, textStatus, errorThrown) {
                    alert(errorThrown);
                },
                success : function(response, textStatus, xhr) {
                    alert("email resent successfully");
                }

            });

     HideLayer();
    }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:15:07.887

您正在遍历网格中的所有行，这就是将邮件发送给所有收件人的原因。

* * *

完成您想要实现的目标的简单方法是使用 jqGrid 的[onCellSelect](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)函数将邮件发送到特定的 Row emailId。您可以添加其他条件，以便仅在单击链接时调用它。

```
onCellSelect: function (id, iCol, cellContent, e) {
    if (iCol == 'resend') {
        var emailAddr = $('#signStatusGrid').getCell(id, 'emailAddress');
        var partyId = $('#signStatusGrid').getCell(id, 'partyId');
        var rowDetails += partyId + ":" + emailAddr + ',';
        $.ajax({

            url: $('#signatureStatus_ctxPath').val() + '/rest/resendEmail?partyId=' + partyId,

            datatype: "json",
            contentType: "application/json; charset=utf-8",
            type: "POST",
            error: function (xhr, textStatus, errorThrown) {
                alert(errorThrown);
            },
            success: function (response, textStatus, xhr) {
                alert("email resent successfully");
            }

        });
    }
}, 
```

* * *

另一种替代解决方案似乎是创建一个发送邮件的函数并设置一个链接，该链接将`partyId`在 jqGrid 的[gridComplete](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)函数中分别调用相同的链接：

```
gridComplete: function () {
    var ids = jQuery("#signStatusGrid").jqGrid('getDataIDs');
    for (var i = 0; i < ids.length; i++) {
        var cl = ids[i];
        var partyId = $('#signStatusGrid').getCell(ids[i], 'partyId');
        var be = "<a href='#Test' onclick='sendMail(" + partyId + ");' >View Contract</a>";
        jQuery("#signStatusGrid").jqGrid('setRowData', ids[i], {
            editct: be
        });
    }
},

var sendMail(partyId) {
    $.ajax({

        url: $('#signatureStatus_ctxPath').val() + '/rest/resendEmail?partyId=' + partyId,

        datatype: "json",
        contentType: "application/json; charset=utf-8",
        type: "POST",
        error: function (xhr, textStatus, errorThrown) {
            alert(errorThrown);
        },
        success: function (response, textStatus, xhr) {
            alert("email resent successfully");
        }

    });
} 
```

# mysql - 建议我在 MySql 中查询计数——我没有得到正确的输出

> ID：16098334
> 
> 赞同：1
> 
> 时间：2013-04-19T06:10:51.137
> 
> 标签：mysql, sql, count

我在 MySQL 中有一张表，如下所示。

```
State marketId 
CA     Ind
CO     Ind
CA     Grp
CA     Grp 
```

我想选择数据作为计数和计数总数（应如下所示）。

```
State marketId Count totalCountInd
  CA     Ind    1        2               
  CO     Ind    1 
```

目前我正在使用以下查询。那没有给出正确的输出。

```
select state,marketId,count(*),sum(CASE marketID WHEN 'ind' THEN 1 ELSE 0 END) AS totalCountInd from BatchReport where marketId='ind' group by state,marketId;
+-------+----------+----------+---------------+
| state | marketId | count(*) | totalCountInd |
+-------+----------+----------+---------------+
| CA    | in       |        1 |               |
| CO    | in       |        1 |               |
|+-------+----------+----------+---------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:29:13.897

如果您希望 totalCOuntInd 保存所有带有 marketId "Ind" 的状态的计数，那么在按状态分组时，您无法以建议的格式获得它。

你可以做的是使用 ROLLUP：

```
select state,marketId,count(*) as count
from BatchReport 
where marketId='ind' 
group by marketId, state with ROLLUP; 
```

这将为您提供所有组列的汇总结果，如下所示：

```
marketId State Count
  Ind     CA    1                  
  Ind     CO    1
  Ind     NULL  2
  NULL    NULL  2 
```

这也是唯一有意义的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:19:29.637

这将使您的结果更接近您想要的结果，不同之处在于它将重复 totalCountInd

```
SELECT State, marketid, COUNT(1) as totalCount,
(
    SELECT COUNT(1) FROM BatchReport
    WHERE marketid = bp.marketid
) AS totalCountInd
FROM BatchReport bp
WHERE marketid = 'Ind'
GROUP BY State, marketid 
```

结果是这样的：

```
State   marketid    totalCount  totalCountInd
CA      Ind         1           2
CO      Ind         1           2 
```

# jvm - JVM 抛出异常

> ID：16098336
> 
> 赞同：2
> 
> 时间：2013-04-19T06:11:05.670
> 
> 标签：jvm, java, rhel

我正在使用安装了 JRE1.6.0_43 的 RHEL 6.0。它已正确安装，浏览器的 java 插件也可以正常工作。但是我在 /jre/bin 目录中运行 java_vm 时遇到了问题。第一次运行时它抛出，

> java_vm 进程：需要同时设置 JAVA_HOME 和 PLUGIN_HOME

然后我设置了 JAVA_HOME=/ 和 PLUGIN_HOME=/plugin，之后它在运行 java_vm 时抛出以下异常，

> java_vm 进程：在线程“main”中找不到类 sun/plugin/navig/motif/Plugin 异常 java.lang.NoClassDefFoundError: sun/plugin/navig/motif/Plugin 原因：java.lang.ClassNotFoundException: sun.plugin .navig.motif.Plugin at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader。 loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source)

然后我修改了 PLUGIN_HOME=/ ，当我再次尝试运行时，它显示另一个异常，

> Java 进程：在 sun.plugin.navig.motif.Plugin.start 的线程“main”java.lang.NullPointerException 中从 sun.plugin.navig.motif.Plugin.start 中捕获异常（未知来源）

在此之后，我不知道该怎么做才能摆脱这个问题......我认为问题出在 PLUGIN_HOME 变量上。请向我提供有关 PLUGIN_HOME 的明确细节并告诉我为什么我们需要这个变量？

# c# - 运行外部应用程序并跟踪它是否完成

> ID：16098341
> 
> 赞同：0
> 
> 时间：2013-04-19T06:11:27.087
> 
> 标签：c#

我有一个允许用户设置备份解决方案的表单。我希望在单击按钮时允许“立即强制备份”的选项。我的问题是，当前控制该功能的应用程序是控制台应用程序，它不显示控制台窗口。有没有办法让我启动应用程序并跟踪它的状态，比如给出一个工作屏幕，当它完成时使用消息框来传递完成状态？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:22:42.540

[你也许可以用Process.WaitForExit()](http://msdn.microsoft.com/en-us/library/fb4aw7b8%28v=vs.100%29.aspx)做点什么。

这是来自[这个关于标准错误的 msdn](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.standarderror%28v=vs.100%29.aspx)页面。

```
// Start the child process.
Process p = new Process();
// Redirect the error stream of the child process.
p.StartInfo.UseShellExecute = false;
p.StartInfo.RedirectStandardError = true;
p.StartInfo.FileName = "BackupProgram.exe";
p.Start();
//you could read the standard error from the backup program
//incase something went wrong.. 
string error = p.StandardError.ReadToEnd();
//warning the thread will BLOCK on this method. 
p.WaitForExit(); 
```

**笔记：**

如果您有 Windows 窗体应用程序，那么您需要正确处理阻塞。如果您调用`WaitForExit()`主线程，您的应用程序将挂起。

我认为您不能直接显示状态。除非您编写备份程序以与主程序通信。

因此，您可以使用后台工作程序或一些异步编程来实现运行和等待，然后您可以显示不确定的进度状态。( [progressBar1.Style](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbar.style.aspx) = [ProgressBarStyle.Marquee](http://msdn.microsoft.com/en-us/library/system.windows.forms.progressbarstyle.aspx) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:37:59.943

只需将您的消息框警告放入您的 ConsoleApplication 中，如果这对您有用。这意味着，您的控制台应用程序在后台运行，而不会向用户显示控制台。当应用程序结束时，它会调用`MessageBox.Show("I'm done.")`并向用户显示消息。

# mysql - 哪个更好：在 NVARCHAR 或 VARCHAR 中存储包含 Unicode 字符的字符串？

> ID：16098344
> 
> 赞同：3
> 
> 时间：2013-04-19T06:11:32.997
> 
> 标签：mysql, sql, database, database-design, informix

我想存储包含 Unicode 字符的字符串。

我知道有两种选择。NVARCHAR 和 VARCHAR。NVARCHAR 使用 2 个字节来存储一个字符；但是 VARCHAR 对一个字符使用 1 个字节。

就存储 2 个 2 字节的 unicode 字符而言，它们每个都使用 4 个字节。但是在存储 1 个 1 字节的 ansi 字符和 1 个 2 字节的 unicode 字符时，NVARCHAR 使用 4 个字节，而 VARCHAR 使用 3 个字节。

所以我认为使用 VARCHAR 更紧凑，并且总是更好的方法。我不知道我上面的理解是否正确，因为 NVARCHAR 应该比 VARCHAR 有一些进步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:36:17.180

更小 => 更快。但要注意索引和您提供的数据类型 *1。并注意不同类型的数据库服务器中的不同数据类型 *2

*1) 在 MSSQL 中：当您在 VARCHAR 列上创建索引并将其呈现为 Unicode 字符串时，MSSQL-Server 不会使用该索引。当您将 Bi​​gInt 呈现给包含 SmallInt 的索引列时，也会发生同样的事情。即使 BigInt 小到足以成为 SmallInt，SQL-Server 也无法使用索引。相反，您没有这个问题（当向索引的 BigInt ot NVARCHAR 列提供 SmallInt 或 Ansi-Code 时）。

*2) 知道每个数据库的数据类型略有不同，而 VARCHAR 并不意味着在所有地方都相同。虽然 MSSQL 有 VARCHAR 和 NVARCHAR，但 Apache/Derby 数据库只有 VARCHAR，而 VARCHAR 是 Unicode。

# xml - XSD 选择，又不是同一个元素

> ID：16098348
> 
> 赞同：1
> 
> 时间：2013-04-19T06:11:58.140
> 
> 标签：xml, xsd

怎么可能使用选择并在组中设置你必须选择最少 2 个元素，但不能选择相同元素的两倍？？？？

示例代码：

```
 xs:group name="Ports">
  <xs:sequence>
    <xs:choice minOccurs="2" maxOccurs="2">
    <xs:element name="Port1" minOccurs="0" maxOccurs="1">
            <xs:complexType>
            <xs:sequence>
                <xs:group ref="PortArguments"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element> 

    <xs:element name="Port2">
            <xs:complexType>
            <xs:sequence>
                <xs:group ref="PortArguments"/>
            </xs:sequence>
        </xs:complexType>
    </xs:element> 
    </xs:choice> 
```

另一个问题：是否可以限制组中元素的访问？例如：我要到其他组。组 1 应该只选择端口组的元素 1-3。第 2 组应该只选择元素 1-10 ！！我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:58:58.447

在 XSD 1.0 中，对于一般情况，没有您想要的解决方案。您将不得不应用 Schematron 约束或迁移到 XSD 1.1。

# actionscript-3 - 随机选择对象属性

> ID：16098354
> 
> 赞同：0
> 
> 时间：2013-04-19T06:12:11.177
> 
> 标签：actionscript-3, object, random, properties, selection

我想退后一步是为了。我最初的问题在这篇文章的底部供参考。

我正在写一个猜词游戏，想要一种方法： 1\. 给定 2 - 10 个字符的单词长度，随机生成一个有效的英文单词来猜测 2\. 给定 2 - 10 个字符的猜测，确保它是一个有效的英文单词。我创建了一个包含 9 个对象的向量，每个对象对应一个单词长度，并使用单词列表中的单词动态创建 172000 个属性/值对来命名属性并将它们的值设置为 true。内循环是：

```
for (i = 0; i < _WordCount[wordLength] - 2; i) 
{
    _WordsList[wordLength]["" + _WordsVector[wordLength][i++]] = true;
} 
```

要验证一个 word ，如果有效，以下查找将返回 true：

```
function Validate(key:String):Boolean
{
    return  _WordsList[key.length - 2][key]
} 
```

我将它们从向量转移到对象以利用散列查找属性。没有看过这一切需要多少内存，但这是一个有用的学习练习。我只是不确定如何最好地从其中一个对象中随机选择一个属性。我正在考虑通过生成 1000 000 个单词并分析分布的统计数据来验证我选择的任何方法。所以我想我的问题应该首先是我是否最好使用其他方法，例如将列表保存在向量中并每次都进行搜索？

* * *

原始问题

新手第一个问题：

我读了一个线程，说 for.. in 中的遍历顺序由哈希表确定并且看起来是随机的。

我正在寻找一种随机选择对象中属性的好方法。a for .. 中的第一个元素是否会遍历属性，或者迭代中的随机第 n 个元素是真正随机的。我想确保访问给定属性的概率大致相等。对象具有大约 100 到 20000 个属性。其他方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:46:53.800

查看您在编辑后的问题中描述的场景，我建议使用 a`Vector.<String>`和您的地图对象。

您可以将所有键存储在向量中并将它们映射到对象中，然后您可以在向量中选择一个随机数字键并将结果用作映射对象中的键。

为了清楚起见，看一下这个简单的例子：

```
var keys:Vector.<String> = new Vector.<String>();
var map:Object = { };

function add(key:String, value:*):void
{
    keys.push(key);
    map[key] = value;
}

function getRandom():*
{
    var randomKey = keys[int(Math.random() * keys.length)];

    return map[randomKey];
} 
```

你可以像这样使用它：

```
add("a", "x");
add("b", "y");
add("c", "z");

var radomValue:* = getRandom(); 
```

* * *

**使用`Object`代替`String`**

您可以存储其中包含字符串的对象，而不是存储字符串，例如：

```
public class Word
{
    public var value:String;
    public var length:int;

    public function Word(value:String)
    {
        this.value = value;
        this.length = value.length;
    }
} 
```

将此对象用作值而不是字符串，但您需要将地图对象更改为[Dictionary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/Dictionary.html)：

```
var map:Dictionary = new Dictionary();

function add(key:Word, value:*):void
{
    keys.push(key);
    map[key] = value;
} 
```

这样你就不会重复每个单词（但会有一点类开销）。

# ios - presentModalViewController 时设置导航栏图像的问题

> ID：16098359
> 
> 赞同：0
> 
> 时间：2013-04-19T06:12:36.467
> 
> 标签：ios, navigationbar

这就是我在 viewDidLoad 的第一堂课中设置图像的方式，即 tableView

```
 if ([self.navigationController.navigationBar respondsToSelector:@selector(setBackgroundImage:forBarMetrics:)]) {
        [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"header.png"] forBarMetrics:UIBarMetricsDefault];
    }

now this how i go to detail view

 DetailViewController *dvController = [[DetailViewController alloc]   initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
      [self.navigationController pushViewController:dvController animated:YES]; 
```

在详细视图的栏中，我为导航栏设置的图像会自动出现在那里，一切都很完美

现在我的问题是 pushViewController 工作正常 图像正在显示，但我在 presentModelViewController 中获得了默认图像，这就是我使用它的方式

```
- (void) modelappear
{

    if (self.testModalViewController == nil) 
    {
        TestModalViewController *temp = [[TestModalViewController alloc] initWithNibName:@"TestModalViewController" bundle:[NSBundle mainBundle]];
        self.testModalViewController = temp;
        [temp release];
    }

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:self.testModalViewController];
    [self presentModalViewController:nav animated:YES];
} 
```

注意我只是在内部层次结构视图中设置按钮

你能告诉我我在做什么错吗？请给出解释和答案非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:20:46.513

试试这样

```
 DetailViewController *dvController = [[DetailViewController alloc]   initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
     dvController.topViewController.navigationController.navigationBar.tintColor = [UIColor colorWithPatternImage:[UIIMage imageNamed:@"name.png"]];
[self presentModalViewController:nav animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:46:20.233

```
UIImage *image = [UIImage imageNamed:@"header.png"];
    UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

    [self.navigationController.navigationBar addSubview:imageView]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T04:52:49.547

```
 UIImage *image = [UIImage imageNamed:@"header.png"];
    UIImageView *imageViewe = [[UIImageView alloc] initWithImage:image];

    UILabel *tmpTitleLabel = [[UILabel alloc] initWithFrame:CGRectMake(100, 3, 150, 40)];
    [tmpTitleLabel setFont:[UIFont boldSystemFontOfSize:18]];

    tmpTitleLabel.text = @"Add Manually";

    tmpTitleLabel.backgroundColor = [UIColor clearColor];

    tmpTitleLabel.textColor = [UIColor whiteColor];

    CGRect applicationFrame = CGRectMake(0, 0, 300, 40);
    UIView * newView = [[[UIView alloc] initWithFrame:applicationFrame] autorelease];
    [newView addSubview:imageViewe];
    [newView addSubview:tmpTitleLabel];

    [self.navigationController.navigationBar addSubview:newView]; 
```

# c# - 如何在 C# 中确定现有的 oracle 数据库连接？

> ID：16098361
> 
> 赞同：2
> 
> 时间：2013-04-19T06:12:42.297
> 
> 标签：c#, oracle, oracle11g, database-connection

假设我使用正确的凭据调用以下方法：

```
private bool Connect(string username, string password)
    {
        string CONNSTRING = "Provider = MSDAORA; Data Source = ISDQA; User ID = {0}; Password = {1};";
        OleDbConnection conn = new OleDbConnection();
        string strCon = string.Format(CONNSTRING, username, password);
        conn.ConnectionString = strCon;
        bool isConnected = false;

        try
        {
            conn.Open();

            if (conn.State.ToString() == "Open")
                isConnected = true;
        }//try
        catch (Exception ex)
        {
            lblErr.Text = "Connection error";
        }//catch
        finally
        {
            conn.Close();
        }//finally

        return isConnected;
    } 
```

我已经在下面的方法中成功打开了连接：

```
private bool ValidateUserCode(string usercode)
{
    UserAccountDefine def = new UserAccountDefine();
    UserAccountService srvc = new UserAccountService();
    UserAccountObj obj = new UserAccountObj();

    bool returnVal = false;
    bool isValid = Connect(def.DB_DUMMY_USERCODE, def.DB_DUMMY_PASSWORD);
    if (isValid)
    {
        obj.SQLQuery = string.Format(def.SQL_LOGIN, usercode.ToLower(), DateTime.Now.ToString("MM/dd/yyy"));
        DataTable dt = srvc.Execute(obj, CRUD.READALL);
        if (dt.Rows.Count == 1)
        {
            returnVal = true;
        }
    }
    return returnVal;
} 
```

问题是如何确定`ValidateUserCode()`方法中的连接状态？之后如何关闭它？

注意：我在其中明确声明了字符串变量，`UserAccountDefine();`因此您不必担心。

我已经尝试在 to`OleDbConnection conn`内部声明一个新的`ValidateUserCode()`，但`conn.State`总是返回`"Closed"`。

**更新**

我有一个具有 2 层安全功能的系统。第一个在应用程序中，第二个在数据库中。如果用户登录到应用程序，用户名和密码也用于**登录到数据库**。现在，这种情况是当用户忘记他/她的密码时，我们无法确定用户的`fullname`,`email`和`contact`（在数据库中维护）。我只知道他的`usercode`。要确定联系方式，我必须使用`DUMMY_ACCOUNT`.

请注意，我从不在数据库中维护密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:23:06.057

我不确定这些信息对您有何帮助。

我在使用 OLEDB 连接进行 Excel 阅读时遇到了类似的问题。我不知道答案。所以，我只是为初始化为 null 的 OleDbConnection 添加了一个全局变量。

在我的方法中，我曾经检查过该空值，如果没有关闭它并再次打开它。

```
 if (con != null)
        {
            con.Close();
            con.Dispose();
        }

        try
        {
            con = new OleDbConnection(connectionString);
        }
        catch (Exception ex)
        {
            MessageBox.Show("oledbConnection = " + ex.Message);
        }

        try
        {
            con.Open();
        }
        catch (Exception ex)
        {
            MessageBox.Show("connection open = " + ex.Message + "\n");
        } 
```

在此之后我可以继续。你可以试试，如果它对你有好处！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T12:06:43.323

首先，你调用`Close()`你的`finally`块，这意味着在你的第二种方法中的任何时候，连接都会被关闭。此外，即使你不这样做`Close()`，因为它`conn`是一个局部变量`Connect()`，当你返回时`ValidateUserCode()`，连接已经准备好进行垃圾回收，当它是`Dispose()`d 时，它也会自动关闭。

我建议您将其设为成员，将其作为输出参数传递，通过`Connect()`方法返回（`null`如果您不喜欢异常，则返回失败或其他内容）..或重新设计代码。

```
private OleDbConnection Connect(string username, string password)
{
    string CONNSTRING = "Provider = MSDAORA; Data Source = ISDQA; User ID = {0}; Password = {1};";
    OleDbConnection conn = new OleDbConnection();
    string strCon = string.Format(CONNSTRING, username, password);
    conn.ConnectionString = strCon;

    try
    {
        conn.Open();

        if (conn.State.ToString() == "Open")
            return conn;
    }//try
    catch (Exception ex)
    {
        lblErr.Text = "Connection error";
    }//catch
    finally
    {
        //you don't want to close it here
        //conn.Close();
    }//finally

    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T18:27:56.787

我不确定我是否完全正确地遵循了这个问题。我的回答是基于您想要打开/检索连接、采取行动，然后关闭/释放连接的前提。

您包含的代码做得不好。典型的 DAO 代码类似于这个伪代码，在我的例子中，取自我使用的一些样板代码。

```
public DataSet FetchDataSet(string sql, IDictionary paramHash) {
    var cnn = AcquireConnection();
    var rtnDS = new DataSet();
    try
    {
        var cmd = cnn.CreateCommand();
        cmd.CommandText = sql;

        SetParameters(cmd, paramHash);
        IDbDataAdapter ida = new DataAdapter { SelectCommand = cmd };
        LogSql(sql, paramHash, "FetchDataSet");
        ida.Fill(rtnDS);
    }
    catch (Exception ex)
    {
        DebugWriteLn("Failed to get a value from the db.", ex);
        throw;
    }
    finally
    {
        ReleaseConnection(cnn);
    }
    return rtnDS;
} 
```

请注意，上面的代码严格来说是关于与数据库通信的。没有评估数据是对还是错。您可能有一个 DAO，它是包含上述代码的 DAO 的子类，它可能会这样做：

```
public MyItemType FindSomeValue(long Id)
{
    const string sql = @"SELECT something from somewhere where id=:id";
    var myParams = new Dictionary<string, long> { { "id", Id } };
    var ds = FetchDataSet(sql, myParams);

    return (from DataRow row in ds.Tables[0].Rows
            select new Item
            {
                Id = Convert.ToInt64(row["ID"], CultureInfo.InvariantCulture),
                Name = row["NAME"].ToString()
            }).FirstOrDefault();
} 
```

事实上，以上是我使用多年的 DAO 实现的伪代码。它使数据访问相对轻松。请注意，这些方法背后有一些真实的代码，例如 SetParameters（30 - 80 行左右），并且我还有许多其他受保护的方法，例如 FetchScalar、ExecuteSQL 等。

# java - 如何深度复制二叉树？

> ID：16098362
> 
> 赞同：8
> 
> 时间：2013-04-19T06:12:44.360
> 
> 标签：java, recursion, tree, treenode

我想使用自己的 Node 类在 Java 中实现树结构。但我很困惑如何做一个深拷贝来复制一棵树。

我的节点类将是这样的：

```
public class Node{
private String value;
private Node leftChild;
private Node rightChild;
.... 
```

我是递归新手，有什么可以学习的代码吗？谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T06:36:10.627

尝试

```
class Node {
    private String value;
    private Node left;
    private Node right;

    public Node(String value, Node left, Node right) {
        this.value = value;
        ...
    }

    Node copy() {
        Node left = null;
        Node right = null;
        if (this.left != null) {
            left = this.left.copy();
        }
        if (this.right != null) {
            right = this.right.copy();
        }
        return new Node(value, left, right);
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-24T03:07:45.370

使用前序遍历递归地执行此操作。

```
 public static Node CopyTheTree(Node root)
    {
        if (root == null)
        {
            return null;
        }
        Node newNode = new Node(null, null, root.Value);
        newNode.Left= CopyTheTree(root.Left);
        newNode.Right= CopyTheTree(root.Right);
        return newNode;
    } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T06:37:17.913

你可以使用这样的东西。它将首先明智地通过旧树深度并创建它的副本。

```
private Tree getCopyOfTree(oldTree) {
 Tree newTree = new Tree();
 newTree.setRootNode(new Node());
 copy(oldTree.getRootNode(), newTree.getRootNode())
 return newTree;
}

private void copy(Node oldNode, Node newNode) {

 if (oldNode.getLeftChild != null) { 
  newNode.setLeftChild(new Node(oldNode.getLeftChild()));
  copy(oldNode.getLeftChild, newNode.getLeftChild()); 
 }

 if (oldNode.getRightChild != null) {
  newNode.setRightChild(new Node(oldNode.getRightChild()));
  copy(oldNode.getRightChild, newNode.getRightChild());
 }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-23T12:03:58.710

我喜欢上面 Evgeniy Dorofeev 的回答，但有时您可能无法向该类型添加方法，`Node`因为您可能不拥有它。在这种情况下（这是在 c# 中）：

```
public static TreeNode CopyTree(TreeNode originalTreeNode)
{
    if (originalTreeNode == null)
    {
        return null;
    }

    // copy current node's data
    var copiedNode = new TreeNode(originalTreeNode.Data);

    // copy current node's children
    foreach (var childNode in originalTreeNode.Children)
    {
        copiedNode.Children.Add(CopyTree(childNode));
    }

    return copiedNode;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T06:29:04.557

不确定，但尝试对树进行后序遍历并为您遍历的每个节点创建一个新节点。您可能需要堆栈来存储您创建的节点以创建左右子链接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-27T06:07:26.170

```
public static TreeNode copy( TreeNode source )
   {
      if( source == null )
         return null;
      else
         return new TreeNode( source.getInfo( ), copy( source.getLeft( ) ), copy( source.getRight( ) ) );
   } 
```

/*当然。抱歉耽搁了。无论如何......任何递归方法都有一个基本案例和一个或多个递归案例。在这种情况下，第一行很明显......如果参数'source'的参数为null（因为它最终评估为以结束方法的操作），它将返回null；如果不是，则启动递归案例。在这种情况下，一旦递归完成，您将返回整个复制的树。使用了“new”操作符，表示在遍历期间每次访问树的各个节点时实例化一个 TreeNode，通过对“copy”的递归调用发生，其参数成为对左右 TreeNodes 的引用（如果有是任何）。一旦 source 在每个参数中变为 null，就会启动基本情况，*/

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-28T22:59:26.880

```
 Node copy(Node node)
  {
    if(node==null) return node;
    Node node1 =new Node(node.data);
    node1.left=copy(node.left);
    node1.right=copy(node.right);
    return node1;
  } 
```

# javascript - 为什么在页面中获取多个 iframe 时 document.getElementById 返回 null

> ID：16098364
> 
> 赞同：3
> 
> 时间：2013-04-19T06:12:52.380
> 
> 标签：javascript, html, iframe

我试试这个页面，只有 if1 返回，if2 和 if3 返回 null，为什么？下面是 html 代码，谢谢。（[小提琴](http://jsfiddle.net/rGq9R/)）

```
 <html>
 <head>
  <title> New Document </title>
  <script type="text/javascript">
  <!--
    function dotest() {
        alert(document.getElementById("if1"));
        alert(document.getElementById("if2"));
        alert(document.getElementById("if3"));
    }
  //-->
  </script>
 </head>
 <body>
 <input type="button" value="Test Test" onclick="dotest()">
  <iframe id="if1"/>
  <iframe id="if2"/>
  <iframe id="if3"/>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:16:31.720

您不能自行关闭 iframe 代码。将它们更改为：

```
<iframe id="if1"></iframe>
<iframe id="if2"></iframe>
<iframe id="if3"></iframe> 
```

发生的情况是浏览器认为第一个 iframe 没有关闭，因此它在文档末尾隐式关闭它，并且标签内的任何内容都被视为不支持 iframe 的浏览器的后备。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:17:36.807

尝试实际关闭 iframe 标记：

```
<iframe id="if1"></iframe>
<iframe id="if2"></iframe>
<iframe id="if3"></iframe> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:16:58.257

iframe 不是自闭标签

```
<iframe id="if1"></iframe>
<iframe id="if2"></iframe>
<iframe id="if3"></iframe> 
```

[看这里](http://www.littlewebhut.com/articles/html_iframe_example/)

# windows - 我可以在 Windows 下向活动进程的 STDIN 发送一些文本吗？

> ID：16098366
> 
> 赞同：22
> 
> 时间：2013-04-19T06:12:58.147
> 
> 标签：windows, powershell, process, batch-file, console

我在网上搜索了那个问题并登陆了服务器故障：

**[我可以向屏幕会话中运行的活动进程的 STDIN 发送一些文本吗？](https://serverfault.com/questions/178457/can-i-send-some-text-to-the-stdin-of-an-active-process-running-in-a-screen-sessi)**

似乎在 Linux 下实现这一点非常容易。但我需要它作为 Win32 命令提示符。

背景：我有一个轮询 STDIN 的应用程序，如果我按下该`x`键，应用程序将终止。现在，我想做一些自动化测试，测试应用程序然后关闭它。

**注意**：仅终止进程不是一种选择，因为我目前正在调查关闭应用程序期间出现的问题。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T08:15:22.303

.NET 框架的[Process](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)和[ProcessStartInfo](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.aspx)类可用于创建和控制进程。由于 Windows PowerShell 可用于实例化 .NET 对象，因此可以在 PowerShell 中控制进程的几乎所有方面。

以下是如何将`dir`命令发送到`cmd.exe`进程（确保将其包装在 .ps1 文件中，然后执行脚本）：

```
$psi = New-Object System.Diagnostics.ProcessStartInfo;
$psi.FileName = "cmd.exe"; #process file
$psi.UseShellExecute = $false; #start the process from it's own executable file
$psi.RedirectStandardInput = $true; #enable the process to read from standard input

$p = [System.Diagnostics.Process]::Start($psi);

Start-Sleep -s 2 #wait 2 seconds so that the process can be up and running

$p.StandardInput.WriteLine("dir"); #StandardInput property of the Process is a .NET StreamWriter object 
```

# mvvm - MVVM：模型的状态是属于模型还是视图模型？

> ID：16098370
> 
> 赞同：2
> 
> 时间：2013-04-19T06:13:10.177
> 
> 标签：mvvm

我正在构建一个基于 MVVM 的应用程序。我已经解决了大部分设计问题，但我还剩下一个概念上至关重要的问题：我的 ViewModel 或我的 Model 是否应该包含 Model 模型的状态？

最初我认为模型应该包含它自己的状态，但事实证明，在将状态传递给 ViewModel（它具有模型状态的 90%）时涉及到很多样板。

然后我想将整个状态从模型移动到视图模型，但这并不适合我，因为我在概念上认为视图模型具有视图的状态而不是模型的状态。

什么是最被接受的放置状态的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:31:55.683

您正确感知具有视图状态的 ViewModel。从概念上讲，模型的状态是模型的一部分，但它可能会因您的特定场景而异。将模型视为数据：作为可以序列化的东西，可以来自服务器和/或可以/应该保存在数据库中。

例如，如果您有一个购物车，那么运输车中的物品显然是模型的一部分。但是，结帐过程中的状态（已收到付款方式、已验证付款方式、已确认用户）可以采用任何一种方式。

至于样板 - 对我来说具有合理数量的样板的范式包含（实际上，在 c# 中引用）ViewModel 中的整个模型，并为模型中的所有属性公开 getter 和 setter，适当的甚至通知。例如

```
class PersonModel {
    public string firstName { get; set; }
    public string lastName { get; set; }
}

class PersonViewModel : INotifyPropertyChanged {
    private PersonModel model;
    // next 4 lines can be factored out to a BaseViewModel class
    private PropertyChangedEventHandler PropertyChanged;
    private raise(string propName) {
        this.PropertyChanged( new PropertyChangedEventArgs(propName) );
    }

    // ... repeat for each property in the model
    public string firstName {
        get { return model.fistName; }
        set { model.firstName = value; raise('firstName'); }
    }
    public string lastName {
        get { return model.lastName; }
        set { model.lastName = value; raise('lastName'); }
    }
} 
```

# android - 四次尝试在按钮上启动/停止/启动 MediaPlayer 单击 Android Java

> ID：16098372
> 
> 赞同：0
> 
> 时间：2013-04-19T06:13:18.007
> 
> 标签：android, android-mediaplayer

## 目标：开始，停止，然后单击按钮 3 次开始播放声音

大家好

我是安卓新手。
通过单击按钮停止声音播放后，我无法重新开始播放声音。
我研究了这个问题 [（链接）](http://developer.android.com/reference/android/media/MediaPlayer.html "Android 状态图")并找到了不同的方法来应用。
所以，我尝试了四种方法（不成功）来做到这一点。
有四个按钮使用不同的方法。
按钮 1 将用作控件。
查看评论以了解不同方法的结果。
我将在下面发布一些来自 LogCat 的条目。

谢谢你

* * *

[这是相关 Android 状态图的链接](http://developer.android.com/reference/android/media/MediaPlayer.html "Android 状态图")

* * *

## src/com.example.playsound/MainActivity.java

```
package com.example.playsound;

import java.io.IOException;

import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public  class MainActivity extends Activity {

//Create Media Player
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.activity_main);

    //Button Sound
    final MediaPlayer mPlayer1 = MediaPlayer.create(MainActivity.this, R.raw.playsound0);
    final MediaPlayer mPlayer2 = MediaPlayer.create(MainActivity.this, R.raw.playsound1);
    final MediaPlayer mPlayer3 = MediaPlayer.create(MainActivity.this, R.raw.playsound2);
    final MediaPlayer mPlayer4 = MediaPlayer.create(MainActivity.this, R.raw.playsound3);

    //Button References
    Button button1 = (Button)this.findViewById(R.id.button1);
    Button button2 = (Button)this.findViewById(R.id.button2);
    Button button3 = (Button)this.findViewById(R.id.button3);
    Button button4 = (Button)this.findViewById(R.id.button4);

    //Button 1 OnClickListener
    button1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(mPlayer1.isPlaying() ) {
                try {
                    mPlayer1.stop();                    
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                }
            }
                                                 //   BUTTON 1
            else {                                //   plays sound upon first click, stops on second click
                try {                              //    but does not play on third click
                    mPlayer1.start();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                }
            }

        }
    }); 

    //Button 2 Uses .prepareAsync() 
    button2.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(mPlayer2.isPlaying() ) {            //  BUTTON 2
                try {                                // Plays sound upon first click, stops on second click
                    mPlayer2.stop();                  // But will not play upon third click
                    mPlayer2.reset();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                }
            }
            else {
                try {
                    mPlayer2.prepareAsync();
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                }
                mPlayer2.start();

            }

        }
    }); 

    button3.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            if(mPlayer3.isPlaying() ) {
                try {                                  //  BUTTON 3
                    mPlayer3.stop();                    //  Does not play sound upon first button click
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                }
            }
            else {
                mPlayer3.setOnPreparedListener(new MediaPlayer.OnPreparedListener() { 
                    @Override
                    public void onPrepared(MediaPlayer mPlayer3) {
                        mPlayer3.start();
                    }

                });
            }

        }
    }); 

    //Button 4 OnClickListener
            button1.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    if(mPlayer4.isPlaying() ) {
                        try {
                            mPlayer4.stop();                    
                        } catch (IllegalStateException e) {
                            e.printStackTrace();
                        }
                    }
                                                         //   BUTTON 4
                    else {                                //   does not play sound on first click
                        try {
                            mPlayer4.prepare();
                        } catch (IllegalStateException e) {
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        mPlayer4.start();
                    }

                }
            }); 

    }

} 
```

* * *

LogCat 中的大多数错误类似于：

在状态 8 中调用 prepareAsync

在状态 0 中开始调用

在状态 1 中开始调用

* * *

这些错误主要是“调用状态#”错误。
我已经参考了上面链接中发布的图表。
当我尝试在正确的位置调用方法时，我仍然遇到这些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:20:29.083

您在不适当的状态下调用方法。

PrepareAsync 只能在 {Initialized, Stopped} 状态下调用。

Start 只能在 {Prepared, Started, Paused, PlaybackCompleted} 状态下调用。

因此，如果您尝试在其他州调用它们，那么它将引发异常。

要清楚了解状态，请阅读此[文档](http://developer.android.com/reference/android/media/MediaPlayer.html)

# java - 通过网络服务验证并保存应用程序密码

> ID：16098374
> 
> 赞同：0
> 
> 时间：2013-04-19T06:13:22.727
> 
> 标签：java, save, md5, sharedpreferences, persistent

我正在开发使用 Web 服务的 Java 应用程序，然后验证用户，我让用户输入他的用户名和密码。要使用此应用程序，用户需要有效的用户名和密码。

我有一个上下文菜单，当登录正确时会被激活。否则我希望它被禁用。

我只想要一次验证。因此，如果任何其他用户从同一系统使用该应用程序，他不需要再次输入密码。

这意味着我需要将密码保存在本地系统中，以便在整个应用程序中使用此密码

无论如何保存密码有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:04:56.670

好吧，您可以使用公钥和私钥来加密或解密密码。

**编辑：**

首先，您必须创建一个公钥/私钥对。为此，您需要工具 openssl（[http://www.openssl.org/source/](http://www.openssl.org/source/)或直接用于 Windows [http://www.openssl.org/related/binaries.html](http://www.openssl.org/related/binaries.html)）。安装它，打开“cmd”（如果您在 Windows 上），导航到您的 openssl 安装路径并输入以下行以生成服务器和客户端的密钥：

```
openssl genrsa -out serverPrivateKey.pem 2048
openssl rsa -in serverPrivateKey.pem -pubout -outform DER -out serverPublicKey.der

openssl genrsa -out clientPrivateKey.pem 2048
openssl pkcs8 -topk8 -nocrypt -in clientPrivateKey.pem -outform der -out clientPrivateKey.der
openssl rsa -in clientPrivateKey.pem -pubout -outform PEM -out clientPublicKey.pem 
```

现在，在您的 Web 服务 Java 应用程序中，您可以导入公钥进行**加密**：

```
File pubKeyFile = new File("keys/serverPublicKey.der");
byte[] buffer = new byte[(int) pubKeyFile.length()];

DataInputStream in = new DataInputStream(new FileInputStream(pubKeyFile));
in.readFully(buffer);
in.close();

KeyFactory keyFactory = KeyFactory.getInstance("RSA");
RSAPublicKey publicKey = (RSAPublicKey) keyFactory.generatePublic(new X509EncodedKeySpec(buffer)); 
```

并加密您的密码：

```
String text = password;

Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
cipher.init(Cipher.ENCRYPT_MODE, publicKey);
byte[] encrypted = cipher.doFinal(text.getBytes()); 
```

并将其保存到本地文件系统：

```
FileOutputStream fos = new FileOutputStream("/tmp/encrypted");
fos.write(encrypted);
fos.flush();
fos.close(); 
```

另一种**解密**方式。

导入私钥：

```
File privKeyFile = new File("keys/clientPrivateKey.der");
byte[] buffer = new byte[(int) privKeyFile.length()];

DataInputStream in = new DataInputStream(new FileInputStream(privKeyFile));
in.readFully(buffer);
in.close();

KeyFactory keyFactory = KeyFactory.getInstance("RSA");
RSAPrivateKey privateKey = (RSAPrivateKey) keyFactory.generatePrivate(new PKCS8EncodedKeySpec(buffer)); 
```

读取加密文件：

```
File cryptedData = new File("/tmp/encrypted");
buffer = new byte[(int) cryptedData.length()];

in = new DataInputStream(new FileInputStream(cryptedData));
in.readFully(buffer);
in.close(); 
```

并解密：

```
Cipher cipher = Cipher.getInstance("RSA/ECB/PKCS1PADDING");
cipher.init(Cipher.DECRYPT_MODE, privateKey);

byte[] decrypted = cipher.doFinal(buffer);

String data = new String(decrypted);

System.out.println(data); 
```

您只需在运行 Web 服务的系统上保密您的私钥。您可以提供一个 Web 服务功能，该功能将公钥提供给客户端进行加密。您的客户端只需将加密的文本字符串发送到 Web 服务，该服务对其进行解密并验证您的客户端。

# c# - 将 C# 列表传递给 C++ CLI 列表并转换为向量

> ID：16098377
> 
> 赞同：0
> 
> 时间：2013-04-19T06:13:28.787
> 
> 标签：c#, c++-cli

问题陈述：我希望将 C# 中的通用列表传递给 C++/CLI，然后能够将 C++/CLI 中的列表转换为 std::vector

在 C# 中我有课

```
public class EtchVect
{

    public double XCoordinate { get; set; }
    public double YCoordinate { get; set; }
    public string LayerName { get; set; }

} 
```

因此，模拟将如下所示：

```
List<EtchVect> etchVects = new List<EtchVect>();
etchVects.Add(new EtchVect() {LayerName = "C2", XCoordinate = 42.44, YCoordinate = 563.99}); 
```

现在我希望收到 C++/CLI 中的列表我应该在 C++ 中创建一个具有属性的类吗？
C++ CLI 如何接受来自 C# 的列表？然后我还希望在 C++ 中有一个函数来将 List 转换为 std::vector

我确信这些东西已经被其他人做过很多次了，这对我来说只是一个陌生的领域（C++），而且我似乎在谷歌搜索和书籍搜索方面做得不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:23:03.000

C++/CLI 应用程序的公共接口是一个契约。该合同必须为双方所知。您没有在两端定义类，而是使用一个程序集来定义它们并在 dll 和程序中引用该程序集。

由于您的 C# 项目中可能已经引用了您的 C++/CLi dll，因此在公共接口中定义您的类并从您的 C# 应用程序中使用它。

# php - 为什么 error_log 仅使用 phpunit 的 --process-isolation 生成 RuntimeException

> ID：16098382
> 
> 赞同：1
> 
> 时间：2013-04-19T06:13:53.460
> 
> 标签：php, unit-testing, exception, testing, phpunit

我进行了一些测试，其中正在测试的代码输出了一些`error_log`信息（因为我也在测试失败，这是预期的）

例如

```
<?php
Class X {
    function dosomething(){
            error_log('did it');
            return true;
    }
} 
```

和测试：

```
<?php
require_once 'X.php';
class xTest extends PHPUnit_Framework_TestCase {
    public function testDo(){
            $x = new X();
            $this->assertTrue( $x->dosomething(), 'dosomething returns true');
    }
} 
```

当在 php_unit 上运行时*没有* `--process-isolation`给我一个很好的`.`和我正在测试的任何东西。

但是，当我运行时*，* `--process-isolation`我得到：

```
1) test::a with data set #1 'a'
RuntimeException: did it 
```

为什么会这样？我被困在 3.4.12 版本上（对此无能为力），但在更新日志中没有发现任何有趣的内容。

这是一个示例会话：

```
xxx$ phpunit xTest.php
PHPUnit 3.4.12 by Sebastian Bergmann.

did it
.

Time: 0 seconds, Memory: 4.50Mb

OK (1 test, 1 assertion)

shell return code: 0
xxx$ phpunit --process-isolation xTest.php
PHPUnit 3.4.12 by Sebastian Bergmann.

E

Time: 0 seconds, Memory: 4.50Mb

There was 1 error:

1) xTest::testDo
RuntimeException: did it

FAILURES!
Tests: 1, Assertions: 0, Errors: 1.

shell return code: 2 
```

编辑：我正在搜索“phpunit runtimeexception error_log”，提交后 5 秒它已经是最高搜索结果 :( 那里没有任何内容。

但我来这里是为了编辑并说这个：添加`$this->setExpectedException('RuntimeException');`绝对不能抓住这个。同样的结果发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T19:52:34.837

[`error_log`](http://us2.php.net/manual/en/errorfunc.configuration.php#ini.error-log)我的猜测是外部和内部过程中的配置之间存在差异。默认情况下，当`error_log()`从 CLI 运行时，它将被写入`stderr`并导致测试失败。你需要做的是弄清楚为什么会有差异。我猜你有一些在外部进程中运行的代码改变了这个没有在内部运行的配置。

# python - 从 ascii hex 解码 Python

> ID：16098387
> 
> 赞同：1
> 
> 时间：2013-04-19T06:14:12.520
> 
> 标签：python, ascii

我正在寻找一个在python中将“\x61\x62\x63\x64\x65\x66”转换为“abcdef”的函数，而无需打印它

并且是这种编码ascii hex的正确术语吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:16:18.237

```
>>> "\x61\x62\x63\x64\x65\x66".decode('ascii')
u'abcdef' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:21:09.520

您可以使用以下方法将 "\x61\x62\x63\x64\x65\x66" 转换为 unicode 字符串`unicode`：

```
unicode("\x61\x62\x63\x64\x65\x66") 
```

输出：u'abcdef'

# c++ - 覆盖返回类型名 T 的方法不起作用

> ID：16098388
> 
> 赞同：-4
> 
> 时间：2013-04-19T06:14:14.713
> 
> 标签：c++, templates, overriding

```
#include <iostream>
#include <string>

using namespace std;

template <typename T>
class A
{
public:
    A()
    {
        OverrideMe();
    }
    virtual ~A(){};

    virtual T OverrideMe()
    {
        throw string("A.OverrideMe called");
    }

protected:

    T member;
};

class B : public A<double>
{
public:
    B(){};
    virtual ~B(){};

    virtual double OverrideMe()
    {
        throw string("B.OverrideMe called");
    }
};

int main()
{
    try
    {
        B b;
    }
    catch(string s)
    {
        cout << s << endl; //this prints: A.OverrideMe called
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:27:21.000

您可以覆盖模板基类中的方法，如下例所示：

```
#include <iostream>
template <typename T> struct Foo
{
  virtual T foo() const {
    std::cout << "Foo::foo()\n";
    return T();
  }
};

struct Bar : Foo<double>
{
  virtual double foo() const {
    std::cout << "Bar::foo()\n";
    return 3.14;
  }
};

int main(){
  Bar b;
  double x = b.foo();
} 
```

输出：

> 酒吧::foo()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:32:07.213

我怀疑（出乎意料）您的类型`T`已声明但未定义。

# ruby-on-rails - 我得到这个输出：# 而不是缩短的 URL

> ID：16098390
> 
> 赞同：0
> 
> 时间：2013-04-19T06:14:24.637
> 
> 标签：ruby-on-rails, ruby, rubygems

我正在使用 rails 3 中的 bitly gem 我正在尝试以缩短的形式将 URL 发布到 Twitter

我的宝石文件

```
gem "bitly", :git => 'https://github.com/philnash/bitly/'
gem 'omniauth-bitly', :git => 'https://github.com/michaeldelorenzo/omniauth-bitly.git' 
```

配置\初始化程序\bitly.rb

```
Bitly.configure do |config|
  config.api_version = 3
  config.login = "username"
  config.api_key = "x_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
end 
```

我正在使用它来使用 Bitly

```
 Bitly.use_api_version_3
      bitly = Bitly.client
      bitly.shorten("http://domain.com/articles/#{id}") 
```

但是当我在 Twitter 上查看时，这是输出

```
#<Bitly::V3::Url:0x202ea38> 
```

如何防止显示缩短的 URL 表单？

当我在 Bitly 上登录我的帐户时，我发现它有效并且在那里显示了转换...但是 URL 没有发布到 Twitter

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:26:25.283

这是 gems 文档中的示例

```
u = bitly.shorten('http://www.google.com') #=> Bitly::Url

u.long_url #=> "http://www.google.com"
u.short_url #=> "http://bit.ly/Ywd1"
u.bitly_url #=> "http://bit.ly/Ywd1"
u.jmp_url #=> "http://j.mp/Ywd1"
u.user_hash #=> "Ywd1"
u.hash #=> "2V6CFi"
u.info #=> a ruby hash of the JSON returned from the API
u.stats #=> a ruby hash of the JSON returned from the API 
```

基于此，您的结果是预期的。如果你想要短网址试试

```
bitly.shorten("http://domain.com/articles/#{id}").short_url 
```

# python - Python线程应用程序未终止

> ID：16098394
> 
> 赞同：1
> 
> 时间：2013-04-19T06:14:44.960
> 
> 标签：python, multithreading

我有一个简单的 python 应用程序，如果我使用 queue.join()，它不会终止。下面是代码：

```
import threading
import Queue

q = Queue.Queue()

for i in range(5):
    q.put("BLAH")

def worker():
    while True:
         print q.qsize()
         a = q.get()
         print q.qsize()
         q.task_done()
         print q.qsize()

for i in range(2):
    t = threading.Thread(target=worker())
    t.daemon = True
    t.start()

q.join() 
```

我还创建了一个看门狗线程，它打印的 threading.enumerate()，然后休眠 2 秒。唯一剩下的线程是 MainThread，队列大小实际上是 0。这个脚本永远不会终止。我必须ctrl + z，然后杀死它。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:26:31.743

```
t = threading.Thread(target=worker) 
```

你想传递一个对工作函数的引用，你不应该调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:12:57.660

worker 函数不会退出，因此它不会加入。其次，您可能想加入线程而不是队列。

我不是python线程方面的专家，但队列仅用于线程之间的数据传递。

# javascript - 在 ExpressJS 中将变量传递给 JavaScript

> ID：16098397
> 
> 赞同：47
> 
> 时间：2013-04-19T06:14:50.797
> 
> 标签：javascript, node.js, express, ejs

我对此完全迷失了；我正在使用 NodeJS 来获取 JSON，我需要将变量传递到我的页面并让 JavaScript 使用数据。

```
app.get('/test', function(req, res) {
    res.render('testPage', {
        myVar: 'My Data'
    }); 
```

那是我的 Express 代码（对于测试目的非常简单）；现在使用 EJS 我想收集我知道要在页面上呈现的数据很简单

```
<%= myVar %> 
```

但我需要能够在 JavaScript 中收集这些数据（如果可能的话，在 .js 文件中），但现在只是在我尝试过的警报框中显示变量

在 Jade 中，它类似于`alert('!{myVar}')`or `!{JSON.stringify(myVar)}`。我可以在 EJS 中做类似的事情吗？我不需要任何字段，例如`<input type=hidden>`并在 javascript 中获取字段的值。如果有人可以提供帮助，将不胜感激

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-04-19T06:39:16.340

您可以使用它（客户端）：

```
<script>
  var myVar = <%- JSON.stringify(myVar) %>;
</script> 
```

您还可以让 EJS 呈现`.js`文件：

```
app.get('/test.js', function(req, res) {
  res.set('Content-Type', 'application/javascript');
  res.render('testPage', { myVar : ... });
}); 
```

但是，模板文件 ( `testPage`) 仍然需要具有`.html`扩展名，否则 EJS 将找不到它（除非您告诉 Express 否则）。

正如@ksloan 在评论中指出的那样：您必须小心`myVar`包含的内容。如果它包含用户生成的内容，这可能会使您的网站受到脚本注入攻击。

防止这种情况发生的可能解决方案：

```
<script>
  function htmlDecode(input){
    var e = document.createElement('div');
    e.innerHTML = input;
    return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
  }
  var myVar = JSON.parse(htmlDecode("<%= JSON.stringify(myVar) %>"));
</script> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-20T10:47:35.227

`</script>`如果 myVar 包含引号，或者例如，这里的主要困难是避免 XSS 风险。为了避免这个问题，我建议在 JSON.stringify 之后使用**Base64编码。**这将避免与引号或 HTML 标记相关的所有风险，因为 Base64 仅包含“安全”字符以放入带引号的字符串中。

我提出的解决方案：

EJS 文件：

```
<script>
  var myVar = <%- passValue(myVar) %>
</script> 
```

这将呈现为类似的东西（例如这里的 myVar = null）：

```
<script>
  var myVar = JSON.parse(Base64.decode("bnVsbA=="))
</script> 
```

服务器端 NodeJS：

```
function passValue(value) {
  return 'JSON.parse(Base64.decode("' + new Buffer(JSON.stringify(value)).toString('base64') + '"))'
} 
```

客户端 JS（这是使用 Unicode 的 Base64 解码的实现，如果您愿意，可以使用另一个，但如果它支持 Unicode，请小心）：

```
var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";var n,r,i,s,o,u,a;var f=0;e=Base64._utf8_encode(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a)}return t},decode:function(e){var t="";var n,r,i;var s,o,u,a;var f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length){s=this._keyStr.indexOf(e.charAt(f++));o=this._keyStr.indexOf(e.charAt(f++));u=this._keyStr.indexOf(e.charAt(f++));a=this._keyStr.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=Base64._utf8_decode(t);return t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t},_utf8_decode:function(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-02-03T13:26:54.113

如果你有更复杂的对象，比如数组，你可以这样做：

```
<% if (myVar) { %>
   <script>
      myVar = JSON.parse('<%- JSON.stringify(myVar) %>');
   </script>
<% } %> 
```

否则，您以前看到的解决方案将不起作用

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-19T06:29:23.183

尝试这个：

```
<script type="text/javascript">
     window.addEventListener('load', function(){
         alert('<%= myVar %>');
     });
</script> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-09T08:02:43.607

这是我如何使它工作的，在节点js中像这样传递json

```
let j =[];
//sample json
j.push({data:"hi});

res.render('index',{json:j}); 
```

现在在js函数中

```
var json = JSON.parse('<%- JSON.stringify(json) %>'); 
```

这对我很有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-01T02:15:41.510

[根据此处](https://github.com/mde/ejs#client-side-support)的文档：

转到[最新版本](https://github.com/mde/ejs/releases/tag/v2.3.3)，下载 ./ejs.js 或 ./ejs.min.js。

在您的页面上包含其中之一，并且`ejs.render(str)`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-21T16:48:24.493

在接受的解决方案中，如果 myVar 的属性具有未转义的双引号，则 JSON.parse 将失败。所以最好 traverseObj 并转义每个字符串属性。

这是一个涵盖我的案例的功能：

```
function traverseObj (obj, callback)
{
    var result = {};
    if ( !isArray(obj) && !isObject(obj) ) {
         return callback(obj);
    }

    for ( var key in obj ) {
        if ( obj.hasOwnProperty(key) ) {
            var value = obj[key];
            if (isMongoId(value)){
                var newValue = callback(value.toString());
                result[key] = newValue;
            }
            else if (isArray ( value) ) {
                var newArr = [];
                for ( var i=0; i < value.length; i++ ) {
                    var arrVal = traverseObj(value[i], callback);
                    newArr.push(arrVal);
                }
                result[key] = newArr;
            }
            else if ( isObject(value) ) {
                result[key] = traverseObj(value, callback);
            }
            else {
                var newValue = callback(value);
                result[key] = newValue;
            }
        }
    }
    return result;
}; 
```

与 ejs 相比，您只需：

```
<%
    var encodeValue = function(val) {
        if ( typeof val === 'string' ) {
            return sanitizeXSS(val); //use some library (example npm install xss)
        }
        return val;
    }

    var encodedProduct = ejs_utils.traverseObj(product, encodeValue);
%> 
```

现在您可以使用未转义的语法安全地传输

```
window.product = <%-JSON.stringify(encodedProduct)%>; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-13T15:43:47.657

我有类似的问题。我得到了价值

```
var inJavascript = JSON.parse("<%= myVar %>"); 
```

# jquery - 如何使用 json 从 html 表中将数据发布到 ASP.NET MVC 中的控制器

> ID：16098398
> 
> 赞同：1
> 
> 时间：2013-04-19T06:15:01.730
> 
> 标签：jquery, asp.net-mvc

我有视图包含`salesmain`和`salesub`详细信息

```
@using (Html.BeginForm())
{
<TABLE >
<tr>
<td>
<label id="lblBuyerName" style="color: white">BuyerName</label>
</td>
<td>
<input type="text" name="txtBuyerName" id="BuyerName" style="width: 250px;"/>
</td>

</tr>
<tr>
<td>
<label id="lblDate">Date</label>
</td>
<td>
<input type="text" name="txtDate" id="tDate" style="width: 100px; height: 15px;" />
</td>

</tr>

</TABLE>

<div style="background-color: lightsteelblue; min-height: 125px; min-width: 50px; border-bottom: ActiveBorder; padding-right: 500px;">
<TABLE id="dataTable" border="3" style="padding-left: 49px; margin-left: 10px;">
<tr>
<td>
SELECT
</td>
<td>
REGION
</td>
<td>
QUANTITY
</td>
<td>
RATE
</td>
<td>
AMOUNT
</td>
<td>
TAX PERCENTAGE
</td>
<td>
TAX AMOUNT
</td>

</tr>
<TR>
<TD><INPUT type="checkbox" name="chk"/></TD>
<TD> @Html.DropDownList("country", new SelectList(ViewBag.ListOfDisciplines, "Value", "Text", Model)) </TD>
<TD> <INPUT type="text" name="Quantity" id="Quantity"/> </TD>
<td>
<input type="text" name="Rate" id="Rate" />
</td>
<td>
<input type="text" name="Amount" id="Amount" style="width: 100px; color: green" readonly="true"/>
</td>
<td>
<input type="text" name="TaxPer" id="TaxPer" style="width: 100px; color: green" readonly="true"/>
</td>
<td>
<input type="text" name="TaxAmt" id="TaxAmt" style="width: 100px; color: green" readonly="true"/>
</td>
</TR>
</TABLE>
<input type="button" value="Add Row" onclick=" addRow('dataTable') " style="border-left-width: 1px; margin-left: 10px;"/>
<input type="button" value="Delete Row" onclick=" deleteRow('dataTable') " />
<br />
<div style="font: italic small-caps bold 20px georgia, garamond, serif;">
<table >
<tr>
<td style="margin-left: 1px; padding-left: 1px;">Grand_Total:</td>
<td><input type="text" readonly="true" name="grand_total" id="grand_total" style="width: 100px; color: green"/></td>
<td>All_Tax:</td><td> <input type="text" readonly="true" name="All_totalTax" id="All_totalTax" style="width: 100px; color: green" /></td>
<td>All_Total:</td><td> <input type="text" name="All_total" readonly="true" id="All_total" style="width: 100px; color: green" /></td>
</tr>
</table>
</div>
</div>
<div>
<input type="submit" id="btnSaveALL" value="Save Record" style="border-left-width: 1px; margin-left: 10px;"/>
</div>
} 
```

我的 Ajax 函数是

```
<script language="javascript" type="text/javascript">
          $(document).ready(function () {
                    $(function () {
                        $("#tDate ").datepicker();
                    });

                    $("#btnSaveALL").click(function () {

                        $.ajax({
                            type: "POST",
                            url: "Sales/ShowTable",
                            success: function (response) {
                                alert('Document Saved.');
                            }
                        });
                    });
                });
    </script> 
```

控制器动作方法是：

```
[HttpPost]
public ActionResult ShowTable()
{
    return View();
} 
```

`txtBuyerName`, `txtDate`, `grand_total`, `All_total`,`All_totalTax`列都属于`salesmain`该类。

`country`, `Quantity`, `Rate`, `Amount`, `TaxPer`,`TaxAmt`列都属于`salessubs`该类

我想使用 jQuery json 将所有数据发布到控制器。那么jQuery ajax 函数和控制器方法代码应该是什么呢？

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:29:38.340

您可以首先编写一个视图模型来表示您要提交的数据（您可能需要根据您的具体要求调整各种属性的数据类型）：

```
public class SalesViewModel
{
    public string Country { get; set; }
    public int Quantity { get; set; }
    public decimal Rate { get; set; }
    public int Amount { get; set; }
    public decimal TaxPer { get; set; }
    public decimal TaxAmt { get; set; }
}

public class MyViewModel
{
    public string BuyerName { get; set; }
    public DateTime Date { get; set; }
    public decimal AllTotal { get; set; }
    public decimal AllTotalTax { get; set; }
    public SalesViewModel[] Sales { get; set; }
} 
```

接着：

```
<script type="text/javascript">
    $(function () {
        $('#tDate').datepicker();

        $('form').submit(function () {
            var sales = [];
            $('#dataTable tr').each(function() {
                sales.push({
                    country: $('td select', this).val(),
                    quantity: $('td input[name="Quantity"]', this).val(),
                    rate: $('td input[name="Rate"]', this).val(),
                    amount: $('td input[name="Amount"]', this).val(),
                    taxPer: $('td input[name="TaxPer"]', this).val(),
                    taxAmt: $('td input[name="TaxAmt"]', this).val(),
                });
            });
            var model = { 
                buyerName: $('#BuyerName').val(),
                date: $('#tDate').val(),
                allTotal: $('#All_total').val(),
                allTotalTax: $('#All_totalTax').val(),
                sales: sales
            };
            $.ajax({
                url: this.action,
                type: this.method,
                contentType: 'application/json',
                data: model,
                success: function (response) {
                    alert('Document Saved.');
                }
            });

            return false;
        });
    });
</script> 
```

现在您的控制器操作可以将视图模型作为参数：

```
[HttpPost]
public ActionResult ShowTable(MyViewModel model)
{
    ...
} 
```

据说你的 HTML 很糟糕。您有重复的 ID，这是不允许的。此外，进一步的改进步骤是使用此视图模型作为视图模型，并使用强类型帮助器生成输入字段，`Html.EditorFor`而不是像您那样对它们进行硬编码。这将使您大大简化 AJAX 调用，因为您不再需要在输入字段的名称和视图模型的属性名称之间进行映射。默认模型绑定器将能够按照约定绑定它们：

```
<script type="text/javascript">
    $(function () {
        $('#tDate').datepicker();

        $('form').submit(function () {
            $.ajax({
                url: this.action,
                type: this.method,
                data: $(this).serialize(),
                success: function (response) {
                    alert('Document Saved.');
                }
            });

            return false;
        });
    });
</script> 
```

# xsd - 带有元素、属性和文本的架构

> ID：16098403
> 
> 赞同：0
> 
> 时间：2013-04-19T06:15:26.817
> 
> 标签：xsd

我无法让这个 XML 文件针对我的模式进行验证，根据我的 XML 编辑器，该模式没有语法错误。我试图让课程成为一个 complexType 元素，但它一直告诉我我不能。XML 是正确的，它肯定与我的架构有关，我只是想不通。

这是 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<courses xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="course_offerings.xsd">

  <course id="WEB225">
    <name>Web Development II</name>
    <offered>Spring</offered>
    <pre_reqs>WEB125</pre_reqs>
  </course>

  <course id="WEB125">
    <name>Web Development I</name>
    <offered>Fall</offered>
  </course>

  <course id="WEB325">
    <name>Client-Side Scripting</name>
    <offered>Spring</offered>
    <offered>Fall</offered>
    <pre_reqs>WEB225</pre_reqs>
  </course>

</courses> 
```

这是我的架构：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="courses">
    <xs:complexType>
      <xs:sequence>

        <xs:element name="course" type="xs:string"/>
        <xs:sequence>
          <xs:element name="name" type="xs:string"/>
          <xs:element name="offered" type="xs:string"/>
          <xs:element name="pre_reqs" type="xs:string"/>
        </xs:sequence>

      </xs:sequence>
      <xs:attribute name="id" type="xs:string"/>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:53:40.297

由于您没有提到您遇到了什么错误，因此我提供了我可以观察到的内容..

1.  在您的 XML 中包含以下语句：`xsi:noNamespaceSchemaLocation="course_offerings.xsd"`这意味着它是您的默认 XML 模式。您需要验证模式的名称并确保它存在于默认路径中..（与 XML 文件相同）。否则你最终可能会看到一个错误`unable to locate schema course_offerings.xsd`
2.  您已声明 `<xs:element name="course" type="xs:string"/>`为字符串 .. 不应该是这种情况。在您的 XML 中，它是一个 complexType，即一个具有子元素的元素。
    1.  所有这些元素名称、提供、pre_reqs 都应该属于这个 complexType
    2.  属性应该在这个complexType的范围内。
        否则你将面临的不仅仅是一个错误，而是**多个错误，因为元素课程的定义是无效的**

请参阅下面的示例 XSD：

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="courses">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="course">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="name" type="xs:string"/>
              <xs:element name="offered" type="xs:string"/>
              <xs:element name="pre_reqs" type="xs:string"/>
            </xs:sequence>
            <xs:attribute name="id" type="xs:string" use="required" />
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

上面提到的样式是分层的，还有另一种方法来编写模式文件。如果您了解当前的后果并且想进一步了解，那么我会让您知道。

现在这么多解释应该很好..

# php - 如何从 PHP 中的 XMLSchema XML 文件中读取元素名称数组？

> ID：16098414
> 
> 赞同：2
> 
> 时间：2013-04-19T06:16:06.613
> 
> 标签：php, xml, simplexml, domdocument

我想从 xml 中获取模式元素列表。例如

```
<xs:schema id="SPPOnlineXML" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
 <xs:element name="SPPOnlineXML" msdata:IsDataSet="true" msdata:MainDataTable="lev_settings" msdata:UseCurrentLocale="true">
  <xs:complexType>
    <xs:choice minOccurs="0" maxOccurs="unbounded">
      <xs:element name="lev_settings">
        <xs:complexType>
          <xs:sequence>
            <xs:element name="LEVID" type="xs:int" minOccurs="0" />
            <xs:element name="ATTHEADID" type="xs:int" minOccurs="0" />
            <xs:element name="MINDATETYPE" type="xs:unsignedByte" minOccurs="0" />
            <xs:element name="MINMONTH" type="xs:unsignedByte" minOccurs="0" />
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:choice>
  </xs:complexType>
 </xs:element>
</xs:schema> 
```

从上面的模式中，我想创建一个元素数组 "LEVID","ATTHEAD","MINDATETYPE","MINMONTH"

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:37:29.137

*`xs:element name-attribute values`*要以数组的形式获取所有内容，我建议您选择 SimpleXML 并使用 xpath。一旦你在一个字符串（或一个文件）中获得了 XML，如果你知道 xpath 表达式，那真的很简单：

```
# Obtain all element names incl. complexTypes:

//xs:element/@name

# Obtain all element names excl. complexTypes and those
#  which contain anything incl. comments, text etc.:

//xs:element[not(node())]/@name 
```

每个 PHP 代码示例如下所示：

```
$xml = simplexml_load_string($string);

echo "Obtain all element names incl. complexTypes:\n";

$elementNames = array_map('strval', $xml->xpath('//xs:element/@name'));
print_r($elementNames);

echo "\nObtain all element names excl. complexTypes and those
  which contain anything incl. comments, text etc.:\n";

$elementNames = array_map('strval', $xml->xpath('//xs:element[not(node())]/@name'));
print_r($elementNames); 
```

[请参阅在线演示。](http://eval.in/16798)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:56:57.400

代码：

```
$xml = new DOMDocument();

$xml->load('test.xml');
$xpath = new DOMXPath($xml);
$result = $xpath->query('//xs:sequence/xs:element');
$res_array = array();
foreach($result as $element_node) {
        $res_array[] = $element_node->getAttribute('name');
}
var_dump($res_array); 
```

结果：

```
array(4) {
  [0]=>
  string(5) "LEVID"
  [1]=>
  string(9) "ATTHEADID"
  [2]=>
  string(11) "MINDATETYPE"
  [3]=>
  string(8) "MINMONTH"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-26T13:58:14.963

我需要在 html 表上获取 XSD 文件的所有 xs:element，完整代码：

```
<table>
                <?php
                    // Load from xsd file
                    $url = "myFile.xsd";
                    $xml = file_get_contents($url, FILE_USE_INCLUDE_PATH);
                    $xml = simplexml_load_string($xml);

                    $elementNames = array_map('strval', $xml->xpath('//xs:element/@name'));
                    foreach ($elementNames as $value) {
                        echo "<tr><td>$value</td></tr>";
                    }

                    $elementNames = array_map('strval', $xml->xpath('//xs:element[not(node())]/@name'));
                    foreach ($elementNames as $value) {
                        echo "<tr><td>--->$value</td></tr>";
                    }
                ?>
</table> 
```

如果您正在寻找 xs:attribute，您只需将整个代码中的“xs:element”替换为“xs:attribute”

# html - 从html而不是css预加载我的精灵图像会更快吗？

> ID：16098415
> 
> 赞同：0
> 
> 时间：2013-04-19T06:16:12.593
> 
> 标签：html, css, performance

在我看来，如果对我的精灵图像的唯一引用是在 css 中，那么这两个文件就不能并行下载。首先它必须下载 css 文件，然后它会知道它需要 sprites 文件，它可以开始下载 sprites。包含一个引用精灵图像的小内联 css 以便可以并行获取两者会更快吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:20:42.980

如果您的 sprite 是使用 javascript 使用的，那么使用 javascript 加载您的 sprite，这样您可以确保在 sprite 实际加载之前不能对它进行任何操作。

如果您使用 css3 来使用 sprite，则使用 css 或 html。

通过 html 我的意思是你可以在你的实际 html 文件中包含宽度和高度为 1px 的图像。这确保了图像也被加载。

就性能而言，它不会真正产生明显的差异。尽管使用 css3 可以确保您网站的所有用户都拥有相同的体验，而使用 javascript 只有在打开 javascript 时才能获得好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:30:42.873

我们在工作中的项目中遇到了同样的问题，一个不太漂亮的解决方案是在开始标签之后添加一个`img`带有精灵的标签作为 a 。`src``body`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T06:53:18.907

如果你的精灵足够小，你也可以使用`data URI` [(data URIs on CSS-Tricks)](http://css-tricks.com/data-uris/)，但是你必须为 the 使用一个选择器，为 使用`background-image`额外的选择器`background-image-position`，所以你不必`data URI`在每个选择器上都包含 。

# java - 在提交表单以下载这些资源时，如何更好地处理二进制 ReST 资源错误？

> ID：16098427
> 
> 赞同：0
> 
> 时间：2013-04-19T06:17:06.140
> 
> 标签：java, rest, spring-mvc

`GET`我有一项服务，它通过基于输入参数的 ReST 资源的形式生成 PDF 文档。这些条目中的一些映射到请求路径，而其他条目映射到可选请求参数，因此以下说明了 ReST 资源。

```
/api/invoices/{invoiceNumber}?format={format} 
```

在提交表单时，我重写了`action`以`form`匹配资源 URI。但是，如果发票编号不存在，则资源将返回`404`或根据任何错误条件返回所需的任何其他错误代码。

我可以通过在页面上设置错误消息来解决此问题，但是由于表单`target`是`_blank`打开一个新窗口，因此表单会在目标窗口中重新显示并显示正确的错误消息，但表单当然是空白的。

我宁愿通过异步 ajax 请求处理文档，该请求可以适当地检测和处理任何错误消息/条件，但我不确定这是否可能（使用 jQuery）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:55:57.227

我认为不可能有条件地打开窗口，因为此时您已经将内容下载到父窗口中。使用 JQuery 可以做到这一点，但通常在窗口之间发送内容既麻烦又脆弱。

我会做的是提交表单

*   打开一个带有备用操作的新窗口，例如 fileShowAction，并将您的静态 URL 作为参数传递
*   让新窗口通过 JQuery 或其他表单提交 URL
*   如果出现错误，您可以使用 OK 或计时器显示错误以关闭窗口

**选项 2**

在带有 IFrame 的 JQuery 内联对话框中显示文件

**选项 3**

让您的初始 REST 调用返回带有错误等的 HTML，或者重定向到文件位置。还有其他几种使用 REST 语义的替代方案，例如使用`Location`标头。

# textbox - 如何确保在文本字段中仅使用一种字体和字体大小？

> ID：16098429
> 
> 赞同：0
> 
> 时间：2013-04-19T06:17:09.417
> 
> 标签：textbox, clipboard, font-size, livecode, clipboard-interaction

文本字段的默认设置允许将不同字体和字体大小的内容粘贴到该字段中。如何确保将粘贴的内容转换为使用特定字体和字体大小，即我选择作为该字段的默认字体？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:11:18.030

您需要阻止粘贴发生，然后自己复制它。例如在一个领域（未经测试）：

```
on pasteKey
  put the clipBoardData["text"] into char (word 2 of the selectedchunk of me) to (word 4 of the selectedchunk of me) of me
end pasteKey 
```

您还需要关心拖放：

```
on dragDrop
  put the dragData["text"] into char (word 2 of the dropChunk) to (word 4 of the dropChunk) of me
end dragDrop 
```

如果你使用“粘贴”命令，它不会触发 pasteKey 消息，所以如果你的应用程序中有这样的代码，那么你需要确保在那里处理特殊情况。

注意：在 IDE 中进行测试可能会很棘手，因为它会中断一些消息，包括 pasteKey（使用“开发”菜单中的“暂停开发工具”）。

# javascript - $http 的 Angular IE 缓存问题

> ID：16098430
> 
> 赞同：253
> 
> 时间：2013-04-19T06:17:12.620
> 
> 标签：javascript, caching, angularjs

从 IE 发送的所有 ajax 调用都由 Angular 缓存，我得到`304 response`所有后续调用的结果。尽管请求是相同的，但在我的情况下响应不会相同。我想禁用这个缓存。我尝试将其添加`cache attribute`到 $http.get 但仍然没有帮助。如何解决这个问题？

* * *

## 回答 #1

> 赞同：438
> 
> 时间：2013-11-04T15:48:18.547

我没有为每个 GET 请求禁用缓存，而是在 $httpProvider 中全局禁用它：

```
myModule.config(['$httpProvider', function($httpProvider) {
    //initialize get if not there
    if (!$httpProvider.defaults.headers.get) {
        $httpProvider.defaults.headers.get = {};    
    }    

    // Answer edited to include suggestions from comments
    // because previous version of code introduced browser-related errors

    //disable IE ajax request caching
    $httpProvider.defaults.headers.get['If-Modified-Since'] = 'Mon, 26 Jul 1997 05:00:00 GMT';
    // extra
    $httpProvider.defaults.headers.get['Cache-Control'] = 'no-cache';
    $httpProvider.defaults.headers.get['Pragma'] = 'no-cache';
}]); 
```

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2013-04-19T06:54:18.807

您可以在请求中附加一个唯一的查询字符串（我相信这是 jQuery 对 cache: false 选项所做的）。

```
$http({
    url: '...',
    params: { 'foobar': new Date().getTime() }
}) 
```

一个可能更好的解决方案是，如果您可以访问服务器，那么您可以确保设置必要的标头以防止缓存。如果您使用`ASP.NET MVC` [此答案](https://stackoverflow.com/a/10011896/1378453)可能会有所帮助。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-01-23T21:00:46.443

你可以添加一个拦截器。

```
myModule.config(['$httpProvider', function($httpProvider) {
 $httpProvider.interceptors.push('noCacheInterceptor');
}]).factory('noCacheInterceptor', function () {
            return {
                request: function (config) {
                    console.log(config.method);
                    console.log(config.url);
                    if(config.method=='GET'){
                        var separator = config.url.indexOf('?') === -1 ? '?' : '&';
                        config.url = config.url+separator+'noCache=' + new Date().getTime();
                    }
                    console.log(config.method);
                    console.log(config.url);
                    return config;
               }
           };
    }); 
```

您应该在验证后删除 console.log 行。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2014-06-06T20:12:13.597

我只是在 Angular 项目的 index.html 中添加了三个元标记，缓存问题在 IE 上得到了解决。

```
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="Sat, 01 Dec 2001 00:00:00 GMT"> 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2017-06-15T07:20:41.713

在另一个线程中复制[我的答案](https://stackoverflow.com/a/44561162/63867)。

对于**Angular 2 和更新版本**`no-cache`，通过覆盖添加标题的最简单方法`RequestOptions`：

```
import { Injectable } from '@angular/core';
import { BaseRequestOptions, Headers } from '@angular/http';

@Injectable()
export class CustomRequestOptions extends BaseRequestOptions {
    headers = new Headers({
        'Cache-Control': 'no-cache',
        'Pragma': 'no-cache',
        'Expires': 'Sat, 01 Jan 2000 00:00:00 GMT'
    });
} 
```

并在您的模块中引用它：

```
@NgModule({
    ...
    providers: [
        ...
        { provide: RequestOptions, useClass: CustomRequestOptions }
    ]
}) 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2014-11-21T11:55:03.577

我工作的保证是这样的：

```
myModule.config(['$httpProvider', function($httpProvider) {
    if (!$httpProvider.defaults.headers.common) {
        $httpProvider.defaults.headers.common = {};
    }
    $httpProvider.defaults.headers.common["Cache-Control"] = "no-cache";
    $httpProvider.defaults.headers.common.Pragma = "no-cache";
    $httpProvider.defaults.headers.common["If-Modified-Since"] = "Mon, 26 Jul 1997 05:00:00 GMT";
}]); 
```

为了保证所有方法的正确使用，我必须合并上述解决方案中的 2 个，但您可以`common`用`get`或其他方法替换，即`put`, `post`，`delete`以使其适用于不同的情况。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-12-03T10:42:46.333

这条唯一的线帮助了我（Angular 1.4.8）：

```
$httpProvider.defaults.headers.common['Pragma'] = 'no-cache'; 
```

**UPD：**问题是 IE11 进行了激进的缓存。当我查看 Fiddler 时，我注意到在 F12 模式下，请求正在发送“Pragma=no-cache”，并且每次访问页面时都会请求端点。但是在正常模式下，我第一次访问该页面时只请求了一次端点。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2016-04-22T05:37:41.617

为了避免缓存，一种选择是为相同的资源或数据提供不同的 URL。要生成不同的 URL，您可以在 URL 的末尾添加一个随机查询字符串。此技术适用于 JQuery、Angular 或其他类型的 ajax 请求。

```
myURL = myURL +"?random="+new Date().getTime(); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2014-07-25T10:46:50.710

我解决了将日期时间附加为随机数的问题：

```
$http.get("/your_url?rnd="+new Date().getTime()).success(function(data, status, headers, config) {
    console.log('your get response is new!!!');
}); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-06-06T13:09:20.010

上面的解决方案将起作用（通过在查询字符串中添加一个新参数来使 url 唯一）但我更喜欢提出的解决方案 [here]：[Better Way to Prevent IE Cache in AngularJS?](https://stackoverflow.com/questions/16971831/better-way-to-prevent-ie-cache-in-angularjs) ，它在服务器级别处理此问题，因为它不是特定于 IE 的。我的意思是，如果不应该缓存该资源，请在服务器上执行（这与所使用的浏览器无关；它与资源有关）。

例如，在带有 JAX-RS 的 java 中，以[编程](http://www.javacodegeeks.com/2013/10/http-caching-using-jax-rs.html)方式为 JAX-RS v1 或 [以声明方式](http://www.jalg.net/2012/09/declarative-cache-control-with-jax-rs-2-0/)为 JAX-RS v2。

我相信任何人都会想出如何去做

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-17T16:08:05.383

正确的服务器端解决方案：[在 AngularJS 中防止 IE 缓存的更好方法？](https://stackoverflow.com/questions/16971831/better-way-to-prevent-ie-cache-in-angularjs)

```
[OutputCache(NoStore = true, Duration = 0, VaryByParam = "None")]
public ActionResult Get()
{
    // return your response
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-02-01T10:30:14.743

您也可以尝试在您的服务中设置标题，例如：

```
...
从“@angular/core”导入{可注射}；
从“@angular/common/http”导入 { HttpClient、HttpHeaders、HttpParams }；
...
 @Injectable()
导出类 MyService {

    私有标头：HttpHeaders；

    构造函数（私有http：HttpClient ..）
    {

        this.headers = 新的 HttpHeaders()
                    .append("内容类型", "应用程序/json")
                    .append("接受", "应用程序/json")
                    .append("LanguageCulture", this.headersLanguage)
                    .append("缓存控制", "无缓存")
                    .append("Pragma", "no-cache")                   
    }
}
……

```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-01-16T17:39:29.153

这有点老了，但是：像这样的解决方案已经过时了。让服务器处理缓存或不缓存（在响应中）。保证不缓存的唯一方法（考虑生产中的新版本）是使用版本号更改 js 或 css 文件。我用 webpack 做到这一点。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-10-27T13:51:31.903

这个问题是由于你所说的IE缓存问题，你可以在IE调试模式下按f12测试它（这在调试模式下可以正常工作）。IE不会在每次页面调用时获取服务器数据，它需要缓存中的数据。要禁用此功能，请执行以下任一操作：

1.  将以下内容附加到您的 http 服务请求 url

*//之前（下发一个）*

**this.httpService.get(this.serviceUrl + "/eAMobileService.svc/ValidateEngagmentName/" +engagementName , {})**

*//之后（工作正常）*

**this.httpService.get(this.serviceUrl + "/eAMobileService.svc/ValidateEngagmentName/" +engagementName + "?DateTime=" + new Date().getTime() + '', { cache: false })**

2.  禁用整个模块的缓存：-

**$httpProvider.defaults.headers.common['Pragma'] = 'no-cache';**

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-01-18T03:47:56.857

```
meta http-equiv="Cache-Control" content="no-cache" 
```

我刚刚将它添加到 View 并开始在 IE 上运行。确认可以在 Angular 2 上工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-09-27T08:33:39.573

一种选择是使用简单的方法，即为每个请求添加时间戳，无需清除缓存。

```
 let c=new Date().getTime();
    $http.get('url?d='+c) 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2018-05-14T11:32:32.877

试试这个，它在类似的情况下对我有用：-

```
$http.get("your api url", {
headers: {
    'If-Modified-Since': '0',
    "Pragma": "no-cache",
    "Expires": -1,
    "Cache-Control": "no-cache, no-store, must-revalidate"
 }
}) 
```

# javascript - 当我使用 window.close ajax 调用不起作用？

> ID：16098434
> 
> 赞同：1
> 
> 时间：2013-04-19T06:17:26.620
> 
> 标签：javascript, ajax, json, asp.net-mvc-3, jquery

当单击按钮窗口值发送我的控制器并关闭窗口时，我的页面中有一个小窗口。但是当我使用 window.close 时，控制器没有命中。但如果没有 window.close 它的命中正确。但我需要那条线来关闭窗口。我如何管理？

我的示例代码如下：

```
function click() {debugger;
        $.ajax({
            type: 'POST',
            url: 'my url'
            data: { status: $('#Field_Error')[0].checked },
            dataType: 'json',
            success: function (data) {
                alert(data.message);
            }
        });
        window.close();

    } 
```

控制器：

```
 public ActionResult actionName(bool status)
   {// not hit here

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:30:18.137

`window.close`从内部成功函数调用

```
 $.ajax({
        type: 'POST',
        url: 'my url'
        data: { status: $('#Field_Error')[0].checked },
        dataType: 'json',
        success: function (data) {
           alert(data.message);
           window.close();              
        }
    }); 
```

Ajax 本质上是异步的。它不会等待 ajax 完成。所以 window.close 在没有完成 ajax 的情况下提前调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:29:53.233

将 window.close 成功，jquery 不会等待 ajax 完成，它会继续。

```
function click() {debugger;
        $.ajax({
            type: 'POST',
            url: 'my url'
            data: { status: $('#Field_Error')[0].checked },
            dataType: 'json',
            success: function (data) {
                alert(data.message);
                 window.close();
            }
        });

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-10T12:35:42.163

```
function click() {
  var myurl=test.php;
    $.ajax({
        type: 'POST',
        url: 'myurl',
        data: { status: $('#Field_Error')[0].checked },
        dataType: 'json',
        success: function (data) {
           alert('successmsg');
           window.close();
        }
      });
   } 
```

# iphone - 在 Dropbox 上上传图片时出错

> ID：16098439
> 
> 赞同：2
> 
> 时间：2013-04-19T06:17:54.100
> 
> 标签：iphone, ios, dropbox

我正在开发一个 iPhone 应用程序，如果我需要将图像上传到文件夹中。我正在从保存的相册中获取图像并将其保存在文件夹中。我想上传该图像，但出现错误。

这是我的代码

```
NSMutableArray *array=[[NSMutableArray alloc]init];
NSString *folderName;
if (metadata.isDirectory) {
    NSLog(@"Folder '%@' contains:", metadata.path);
    for (DBMetadata *file in metadata.contents)
    {
        [array addObject:file.filename];
        NSLog(@"\t%@", file.filename);
    }

    folderName=[array objectAtIndex:0];
}

NSString  *pngImagePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject] stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.png",imageName.text]];
[data writeToFile:pngImagePath atomically:YES];

[[self restClient]uploadFile:[NSString stringWithFormat:@"%@.png",imageName.text] toPath:[NSString stringWithFormat:@"/%@",folderName]withParentRev:nil fromPath:pngImagePath]; 
```

我得到以下错误

```
File upload failed with error - Error Domain=NSURLErrorDomain
Code=-1021 "The operation couldn’t be completed. (NSURLErrorDomain
error -1021.)" UserInfo=0x68d0c70 {destinationPath=/sonal/abc.png,
sourcePath=/Users/bcod/Library/Application Support/iPhone
Simulator/5.0/Applications/44555D9C-422E-45FC-B392-F74275B16378/Documents/abc.png} 
```

我也收到以下警告

```
[WARNING] DropboxSDK: error making request to
/1/files_put/dropbox/apple/app.png 
```

请任何人都可以告诉我为什么会出现此错误

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:28:04.613

检查目标路径..似乎问题出在服务器无法找到目标文件夹
并
检查图像大小。大文件可能会导致请求耗尽。尝试使用较小的图像

# ios - 无法在 iOS 中使用 Facebook SDK 3.5 从 Facebook 注销

> ID：16098447
> 
> 赞同：0
> 
> 时间：2013-04-19T06:18:50.550
> 
> 标签：ios, facebook, ios6

我目前在我的原生 iOS 应用程序中使用 Facebook SDK 3.5 进行 Facebook 登录。我已经 [通过 facebook 引用了示例 iOS 代码](https://stackoverflow.com/questions/12636530/logout-facebook-sdk-3-08)并以相同的方式实现了我的登录。在注销过程之前一切正常。我可以从 FB 注销，但**不能**完全注销。当我再次点击登录按钮时，FB 再次显示带有我的凭据的网页，并要求我使用相同的凭据登录。我听说有人说这是 Safari 的问题，所以我手动删除了所有 Safari cookie 并尝试再次登录，但无济于事。有没有其他方法可以做到这一点？我还向 SOF 推荐了解决方案并实施了下面列出的答案，但它们也没有奏效。

[facebook iOS sdk的登录注销问题](https://stackoverflow.com/questions/9110740/login-logout-issue-with-facebook-ios-sdk)

[注销facebook sdk 3.08](https://stackoverflow.com/questions/12636530/logout-facebook-sdk-3-08)

编辑 - 发布 Facebook 应用页面的设置选项卡屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/E0zmI.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:11:30.857

虽然我没有使用 Facebook SDK，但我使用了第三方 SDK Socialize，并且在 Facebook 注销时遇到了同样的问题。我无法注销，即使我注销了，当我尝试重新登录时，它也会显示我的凭据。

我遵循以下步骤，与您使用的 SDK 无关（无论是 sharekit、socialize 还是原生 facebook sdk）

[关于 SO 的参考问题](https://stackoverflow.com/questions/12280436/unable-to-logout-of-facebook-using-socialize-sdk)

1.在facebook应用程序的高级设置中，我启用了本地/桌面应用程序

2.在基本设置->原生iOS应用中禁用SSO/DeepLinking。以前有不同的选项，但现在只提供 DeepLinking。

3.提前设置添加de-auth回调url。它可以是任何东西 [例如[http://google.com]](http://google.com])

4.在用户点击LogOut按钮的地方添加如下代码：

```
NSHTTPCookie *cookie;
    NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (cookie in [storage cookies])
    {
     NSString* domainName = [cookie domain];
     NSRange domainRange = [domainName rangeOfString:@"facebook"];
     if(domainRange.length > 0)
      {
        [storage deleteCookie:cookie];
      }
    } 
```

希望这可以帮助

# python - 关于 Python 描述符的困惑和

> ID：16098449
> 
> 赞同：7
> 
> 时间：2013-04-19T06:18:58.057
> 
> 标签：python, descriptor

最近我阅读了[关于 Python 描述符的官方 HOW-TO](http://docs.python.org/2/howto/descriptor.html)，它实际上来自于Raymond Hettinger 很久以前写[的一篇文章。](http://users.rcn.com/python/download/Descriptor.htm)但读了几遍后，我仍然对它的某些部分感到困惑。我将引用一些段落，然后是我的困惑和问题。

* * *

> 如果实例的字典中有一个与数据描述符同名的条目，则数据描述符优先。如果实例的字典具有与非数据描述符同名的条目，则字典条目优先。

*   上课也是这样吗？如果一个类的字典有一个与数据/非数据描述符同名的条目，那么它的优先级链是什么？

* * *

> 对于物体来说，机器在`object.__getattribute__()`其中转化`b.x`为`type(b).__dict__['x'].__get__(b, type(b))`。该实现通过优先链进行工作，该优先链赋予数据描述符优先于实例变量，实例变量优先于非数据描述符，并分配最低优先级（`__getattr__()`如果提供）。
> 
> 对于类，机器在`type.__getattribute__()`其中转换`B.x`为`B.__dict__['x'].__get__(None, B)`.

*   上面两段讲述了在属性访问时自动调用描述符的过程。`b.x`它列出了实例 ( ) 和类 ( )访问属性之间的区别`B.x`。但是，这是我的困惑：
    *   如果类或实例的属性不是描述符，那么转换（即转换`b.x`成`type(b).__dict__['x'].__get__(b, type(b))`和`B.x`成`B.__dict__['x'].__get__(None, B)`）还会继续吗？在此类或实例的**字典**中直接返回属性是否更简单？
    *   如果一个实例的字典中有一个与非数据描述符同名的条目，根据第一个引号中的优先规则，字典条目优先，这时候转换还会继续吗？还是只返回其**dict**中的值？

* * *

> 非数据描述符提供了一种简单的机制，可以将通常的绑定函数模式更改为方法。

*   是否选择了非数据描述符，因为函数/方法只能获取**，**但不能**设置**？
*   将函数绑定到方法的底层机制是什么？由于类字典将方法存储为函数，如果我们分别使用类及其实例调用相同的方法，底层函数如何判断它的第一个参数是否应该是**self**呢？

* * *

> 函数有一个`__get__()`方法，因此当作为属性访问时它们可以转换为方法。非数据描述符将`obj.f(*args)`调用转换为`f(obj, *args)`. 调用`klass.f(*args)`变为 f(*args)。

*   非数据描述符如何将`obj.f(*args)`调用转换为`f(obj, *args)`？
*   非数据描述符如何将`klass.f(*args)`调用转换为`f(*args)`？
*   上述两种转换的底层机制是什么？为什么类和实例之间存在差异？
*   `__get__()`在上述情况下角色方法的作用是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:23:31.780

> 上课也是这样吗？如果一个类的字典有一个与数据/非数据描述符同名的条目，那么它的优先级链是什么？

不，如果在超类和子类中都定义了属性，则完全忽略超类值。

> 如果类或实例的属性不是描述符，那么转换（即，将 bx 转换为`type(b).__dict__['x'].__get__(b, type(b))`和 Bx 转换为`B.__dict__['x'].__get__(None, B))`仍然进行吗？

不，它直接返回从类的`__dict__`. 或者等效地，是的，如果您假设所有对象默认都有一个`__get__()`忽略其参数并返回的方法`self`。

> 如果一个实例的字典中有一个与非数据描述符同名的条目，根据第一个引号中的优先规则，字典条目优先，这时候转换还会继续吗？或者只是返回其字典中的值？

您引用的段落（可能在其他地方写下来）中不清楚的是，当`b.x`决定 return时`b.__dict__['x']`，无论如何`__get__`都会调用 no 。当`__get__`语法`b.x`或`B.x`决定返回一个存在于*类*字典中的对象时，就会准确地调用 。

> 选择非数据描述符是因为函数/方法只能获取，不能设置吗？

是的：它们是 Python 中“旧式”类模型的概括，您可以说`B.f = 42`即使`f`是存在于 B 类中的函数对象。这使得函数对象可以被不相关的对象覆盖。另一方面，数据描述符具有不同的逻辑以支持`property`.

> 将函数绑定到方法的底层机制是什么？由于类字典将方法存储为函数，如果我们分别使用一个类和它的实例调用同一个方法，底层函数如何判断它的第一个参数是否应该是 self 呢？

要理解这一点，您需要牢记“方法对象”。语法`b.f(*args)`等价于`(b.f)(*args)`，即两步。第一步调用`f.__get__(b)`；这将返回一个存储 b 和 f 的方法对象。第二步调用方法对象，然后通过添加 b 作为额外参数来调用原始 f。这是不会发生的`B.f`，因为`B.f`ie`f.__get__(None, B)`只是 f（在 Python 3 中）。`__get__`这是在函数对象上设计特殊方法的方式。

# java - Windows 事件日志文件

> ID：16098451
> 
> 赞同：0
> 
> 时间：2013-04-19T06:19:13.130
> 
> 标签：java

我有一个程序每次都读取一个文件，现在我想读取 windows 的事件日志文件，我怎样才能得到位置并读取它的内容。

日志存储在**%SystemRoot%\System32\Config**目录中，扩展名为 .evt。在计算机管理器中，您还可以将它们导出为 .txt 或 .csv 文件。

Windows Vista/7/Server2008 位置，这里是：**%SystemRoot%\system32\winevt\logs**

**我的代码是：**

```
String fileSeperator = File.separator;
String filePath = "C:" + fileSeperator + "WINDOWS" + fileSeperator + "system32" + fileSeperator + "winevent" + fileSeperator + "logs";
System.out.println("FilePath :" + filePath);
File f = new File(filePath);
System.out.println("Is Directory :" + f.isDirectory()); 
```

**输出：**

文件路径 ：`C:\WINDOWS\system32\winevent\logs`

是目录：false

为什么它返回它不是目录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:24:26.080

因为文件不存在。你自己说的位置是`%SystemRoot%\system32\winevt\logs`。然而你使用`C:\WINDOWS\system32\winevent\logs`.

`winevt != winevent`.

# asp.net - SQL 参数不适用于命令

> ID：16098452
> 
> 赞同：0
> 
> 时间：2013-04-19T06:19:13.740
> 
> 标签：asp.net, .net, sql

我试图在我的查询中使用 sql 参数来避免 sql 注入，但是这些参数似乎不适用于命令。

```
public static IList<Call> GetCallsFilter(string startdate, string enddate,List<String>ContextName, List<String>ValueName, List<String>TypeName)
{

    using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["BAMConnectionString"].ConnectionString))
    {

        connection.Open();

        startdate += " 00:00:00";
        enddate += " 23:59:59";

        using (SqlCommand cmd = new SqlCommand("", connection))
        {

            cmd.CommandText = "SELECT dbo.Calls.CallID, dbo.Connections.Connectionname,dbo.Calls.ConnectionID, dbo.Calls.ParentID, dbo.Calls.StartTime, dbo.Calls.EndTime, REPLACE(dbo.Calls.Querytime, ',', '.') AS Querytijd, dbo.Calls.Template, dbo.Calls.Profilecall, dbo.Calls.Objectcall, dbo.Calls.Method, dbo.Calls.Error, dbo.Calls.Category, dbo.Calls.Uur, dbo.Calls.DayOfMonth, dbo.Repositorys.RepositoryName,dbo.Calls.ResultLink, REPLACE(MAX(Querytime) OVER (PARTITION BY DATEPART(yyyy, dbo.Calls.StartTime), DATEPART(M, dbo.Calls.StartTime), dbo.Calls.DayOfMonth, dbo.Calls.Uur, DATEPART(MINUTE, dbo.Calls.StartTime)), ',', '.') AS MaxQueryTime FROM dbo.Calls INNER JOIN dbo.Connections ON dbo.Calls.ConnectionID = dbo.Connections.ConnectionID INNER JOIN dbo.Repositorys ON dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID where StartTime BETWEEN '" + startdate + "' AND '" + enddate + "'";
            if (ContextName != null && ValueName != null)
            {

                for (int i = 0; i < ContextName.Count; i++)
                {
                    if (ContextName[i].ToString() != "Filter")
                    {
                        if (TypeName[i].ToString() == "LIKE")
                        {
                            cmd.CommandText += " AND exists (Select * from dbo.Context where CallID = dbo.Calls.CallID and Name=@Name and Value like @Value)";
                            cmd.Parameters.Add(new SqlParameter("Name", ContextName[i].ToString()));
                            cmd.Parameters.Add(new SqlParameter("Value", ValueName[i].ToString()));

                        }
                        else if (TypeName[i].ToString() == "=")
                        {
                            cmd.CommandText += " AND exists (Select * from dbo.Context where CallID = dbo.Calls.CallID and Name='" + Regex.Escape(ContextName[i].ToString()) + "' and Value = '" + Regex.Escape(ValueName[i].ToString()) + "')";

                        }
                        else if (TypeName[i].ToString() == "NOT LIKE")
                        {
                            cmd.CommandText += " AND exists (Select * from dbo.Context where CallID = dbo.Calls.CallID and Name='" + Regex.Escape(ContextName[i].ToString()) + "' and Value NOT like '%" + Regex.Escape(ValueName[i].ToString()) + "%')";
                        }
                    }
                }

            }

            using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
            {

                CallData = new List<Call>();

                DataTable table = new DataTable();
                adapter.Fill(table);

                foreach (DataRow rij in table.Rows)
                {
                    CallData.Add(new Call() { CallID = Int64.Parse(rij[0].ToString()), Connectionname = rij[1].ToString(), ConnectionID = rij[2].ToString(), ParentID = rij[3].ToString(), StartTime = ((DateTime)rij[4]).ToString("d/MM/yyyy hh:mm:ss.fff"), EndTime = ((DateTime)rij[5]).ToString("d/MM/yyyy hh:mm:ss.fff"), Querytime = rij[6].ToString(), Template = rij[7].ToString(), Profile = rij[8].ToString(), Object = rij[9].ToString(), Method = rij[10].ToString(), Error = rij[11].ToString(), Category = rij[12].ToString(), Uur = rij[13].ToString(), DayOfMonth = rij[14].ToString(), Repository = rij[15].ToString(), Datum = rij[4].ToString(), ResultLink = rij[16].ToString(), MaxQuerytime = rij[17].ToString() });

                }

            }

        }

}

    return CallData;

} 
```

我目前只是在 IF LIKE 函数中尝试它，但在 atm 中不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:21:23.863

```
public static IList<Call> GetCallsFilter(string startdate, string enddate,List<String>ContextName, List<String>ValueName, List<String>TypeName)
{

    using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["BAMConnectionString"].ConnectionString))
    {

        connection.Open();

        startdate += " 00:00:00";
        enddate += " 23:59:59";

        using (SqlCommand cmd = new SqlCommand("", connection))
        {

            cmd.CommandText = "SELECT ";
                cmd.CommandText += " dbo.Calls.CallID, ";
                cmd.CommandText += " dbo.Connections.Connectionname, ";
                cmd.CommandText += " dbo.Calls.ConnectionID, ";
                cmd.CommandText += " dbo.Calls.ParentID, ";
                cmd.CommandText += " dbo.Calls.StartTime, ";
                cmd.CommandText += " dbo.Calls.EndTime, ";
                cmd.CommandText += " REPLACE(dbo.Calls.Querytime, ',', '.') ";
                cmd.CommandText += " AS ";
                cmd.CommandText += " Querytijd, ";
                cmd.CommandText += " dbo.Calls.Template, ";
                cmd.CommandText += " dbo.Calls.Profilecall, ";
                cmd.CommandText += " dbo.Calls.Objectcall, ";
                cmd.CommandText += " dbo.Calls.Method, ";
                cmd.CommandText += " dbo.Calls.Error, ";
                cmd.CommandText += " dbo.Calls.Category, ";
                cmd.CommandText += " dbo.Calls.Uur, ";
                cmd.CommandText += " dbo.Calls.DayOfMonth, ";
                cmd.CommandText += " dbo.Repositorys.RepositoryName, ";
                cmd.CommandText += " dbo.Calls.ResultLink, ";
                cmd.CommandText += " REPLACE(MAX(Querytime) OVER (PARTITION BY DATEPART(yyyy, dbo.Calls.StartTime), ";
                cmd.CommandText += " DATEPART(M, dbo.Calls.StartTime), ";
                cmd.CommandText += " dbo.Calls.DayOfMonth, ";
                cmd.CommandText += " dbo.Calls.Uur, ";
                cmd.CommandText += " DATEPART(MINUTE, dbo.Calls.StartTime)), ',', '.') ";
                cmd.CommandText += " AS MaxQueryTime FROM dbo.Calls ";
                cmd.CommandText += " INNER JOIN dbo.Connections ON ";
                cmd.CommandText += " dbo.Calls.ConnectionID = dbo.Connections.ConnectionID ";
                cmd.CommandText += " INNER JOIN dbo.Repositorys ON dbo.Connections.RepositoryID = dbo.Repositorys.RepositoryID ";
                cmd.CommandText += " where StartTime BETWEEN @stardate AND @enddate ";

                if (ContextName != null && ValueName != null)
                {
                    for (int i = 0; i < ContextName.Count; i++)
                    {
                        if (ContextName[i].ToString() != "Filter")
                        {
                            cmd.CommandText += " AND exists ";
                            cmd.CommandText += "(Select * from dbo.Context ";
                            cmd.CommandText += " where CallID = dbo.Calls.CallID and Name=@Name and Value ";
                            cmd.CommandText += TypeName[i].ToString();
                            cmd.CommandText += " @Value)";

                            cmd.Parameters.AddWithValue("@Context", ContextName[i].ToString());
                            cmd.Parameters.AddWithValue("@Value", ValueName[i].ToString());
                        }
                    }

                }

                cmd.Parameters.AddWithValue("@startdate", startdate);
                cmd.Parameters.AddWithValue("@enddate", enddate);

            using (SqlDataAdapter adapter = new SqlDataAdapter(cmd))
            {

                CallData = new List<Call>();

                DataTable table = new DataTable();
                adapter.Fill(table);

                foreach (DataRow rij in table.Rows)
                {
                    CallData.Add(new Call() { CallID = Int64.Parse(rij[0].ToString()), Connectionname = rij[1].ToString(), ConnectionID = rij[2].ToString(), ParentID = rij[3].ToString(), StartTime = ((DateTime)rij[4]).ToString("d/MM/yyyy hh:mm:ss.fff"), EndTime = ((DateTime)rij[5]).ToString("d/MM/yyyy hh:mm:ss.fff"), Querytime = rij[6].ToString(), Template = rij[7].ToString(), Profile = rij[8].ToString(), Object = rij[9].ToString(), Method = rij[10].ToString(), Error = rij[11].ToString(), Category = rij[12].ToString(), Uur = rij[13].ToString(), DayOfMonth = rij[14].ToString(), Repository = rij[15].ToString(), Datum = rij[4].ToString(), ResultLink = rij[16].ToString(), MaxQuerytime = rij[17].ToString() });

                }

           }
      }
 }

     return CallData;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:55:37.047

您必须在参数名称中添加“@”。

```
new SqlParameter("@Name", ContextName[i].ToString())
new SqlParameter("@Value", ValueName[i].ToString()) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:07:48.967

尝试使用这个

```
cmd.Parameters.AddWithValue("@Name", ContextName[i].ToString());
cmd.Parameters.AddWithValue("@Value", ValueName[i].ToString()); 
```

# java - 非法状态异常：字段添加到经理，而它已经是父级

> ID：16098467
> 
> 赞同：2
> 
> 时间：2013-04-19T06:20:46.310
> 
> 标签：java, blackberry, blackberry-jde

我遇到了异常`IllegalStateException`：

> 已作为父项添加到经理的字段

当我第二次调用下面的函数时，当我改变微调器的值并且第二次调用这个函数时，我得到了非法状态异常。

这是我的代码：

```
void showSpinnerDialog(int type) {
    if (_customSpinnerPopup == null) {
        _customSpinnerPopup = new CustomSpinnerPopup();
    }

    UiApplication.getUiApplication().pushModalScreen(_customSpinnerPopup);

    if (_customSpinnerPopup.isSet()) {
        String choice = _customSpinnerPopup.getChoice();
        _editFieldSpinbox.setText(choice);
        getAlbumsForLanguage(choice);
    }
}

private void getAlbumsForLanguage(String choice) {
    language = choice;
    fieldManager.deleteAll();

    final RichList list = new RichList(fieldManager, true, 2, 1);
    songItemsList = new Vector();
    songItemsList = ServerAPI.getNewSongsForLanguage(language, null);
    for (int i = 0; i < songItemsList.size(); i++) {
        SongItem songItem = (SongItem) songItemsList.elementAt(i);
        list.add(new Object[] { bitmap1, songItem.getName(),
            "Artist:" + songItem.getArtist(),
        "Movie: " + songItem.getMovie() });
    }

    add(fieldManager);// **here i am getting exception**
    list.setFocusPolicy(TableController.ROW_FOCUS);

    list.setCommand(new Command(new CommandHandler() {

        public void execute(ReadOnlyCommandMetadata metadata, Object object) {
            SongItem song = (SongItem) songItemsList.elementAt(list.getFocusRow());
            Dialog.alert("exe !" + song.getName()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:38:01.133

正如异常消息所暗示的那样，您不能多次将 a`Field`或 a `Manager`（即 a `Field`）添加到另一个容器中，除非您先将其删除。当你`getAlbumsForLanguage()`第二次调用时，你会这样调用：

```
add(fieldManager);// **here i am getting exception** 
```

第二次，这是非法的。要解决这个问题，只需将该行包围：

```
if (fieldManager.getManager() == null) {
   add(fieldManager);
} 
```

# javascript - Javascript - 动态添加的选项卡在 Kendo 面板栏中不被视为选项卡

> ID：16098471
> 
> 赞同：0
> 
> 时间：2013-04-19T06:20:59.493
> 
> 标签：javascript, jquery, kendo-ui, accordion, panelbar

好的，首先我读入一个加密文件作为 my `DataSource`，然后将其转换为 XML 字符串。

数据在我的网格中正确显示，除了动态添加到面板栏的面板似乎不像在这个[小提琴](http://jsfiddle.net/OnaBai/rQZNr/21/)中看到的那样。

它们被添加到：

```
<ul id='panelbar'>
    <li id='patDet' class='k-state-active'>
        <span class='k-link k-state-selected'><input type='checkbox' id='cPatientDetails' /><label for='cPatientDetails'><a href='#'  id='cbSelect'></a>Patient Detail</label></span>
        <div id='patTab'></div>
    </li>
</ul> 
```

像这样：

```
$("<li id = '"+ liID +"' class='k-item k-state-default' role='menuitem' aria-expanded='false' aria-hidden='true'><span class='k-link k-header'><input type='checkbox' id='c" + x + "' class='cbSelect' /><label for='c" + x + "'><a href='#'   id='cbSelect''></a>" + liTitle + "</label></span></li>").appendTo("#panelbar");
$("<div id = 'gridGenerate" + x + "' width='400px;' aria-hidden='true'></div>").appendTo("#" + liID); 
```

跨度和链接的原因是可以在我的复选框上使用样式，可以在这个[小提琴](http://jsfiddle.net/97gqZ/37/)中找到。

起初我使用了一个硬编码的 DataSource，它工作得很好，但是当我切换到使用请求获取数据时，除了面板栏之外，所有数据都按原样显示。

这是它的样子：![在此处输入图像描述](https://i.stack.imgur.com/6W9MK.png)

当只有第一个选项卡应该打开时。我像这样创建了面板栏：

```
$("#panelbar").kendoPanelBar(
{
    expandMode: "single"
}); 
```

**编辑**

我现在已经做到了，仅在检索和转换数据后才创建面板栏和网格，但问题仍然存在。

> 知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:55:55.103

当 KendoUI 添加 时`tab`，它所做的不仅仅是添加 HTML 标签。这就是为什么您有方法可以按需添加选项卡。

而不是手动添加 HTML 尝试使用：

```
var panelbar = $("#panelbar").data("kendoPanelBar");
panelbar.append([
    {
        text: "<label for='c" + x + "'>" +
                "<a href='#'   id='cbSelect''></a>" +
                "" + liTitle + "" +
                "</label>",
        encoded: false,
        content: "<div>text</div>"

    }

]); 
```

单击[此处](http://jsfiddle.net/OnaBai/fmxvM/1)在 JSFiddle 中查看它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:51:27.747

**回答：**

似乎当我提出问题时，它可以帮助我找到答案。刚找到。

我在添加额外面板之前创建了面板栏，所以我只是移动了：

```
$("#panelbar").kendoPanelBar(
{
    expandMode: "single"
}); 
```

到我的方法结束。添加所有内容，然后我创建面板栏。

# android - 第二次自动对焦后拍照失败

> ID：16098474
> 
> 赞同：4
> 
> 时间：2013-04-19T06:21:32.307
> 
> 标签：android, android-camera, autofocus

我正在开发一个使用自动对焦的安卓相机应用程序。

这个问题，我第一次可以捕获，但是当我第二次尝试捕获时，会发生以下异常。

```
4-19 11:28:32.509: E/AndroidRuntime(4409): FATAL EXCEPTION: main
04-19 11:28:32.509: E/AndroidRuntime(4409): java.lang.RuntimeException: takePicture failed
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.hardware.Camera.native_takePicture(Native Method)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.hardware.Camera.takePicture(Camera.java:878)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.hardware.Camera.takePicture(Camera.java:842)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at com.example.camerasample.MainActivity$4.onClick(MainActivity.java:60)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.view.View.performClick(View.java:2485)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.view.View$PerformClick.run(View.java:9080)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.os.Handler.handleCallback(Handler.java:587)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.os.Looper.loop(Looper.java:130)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at android.app.ActivityThread.main(ActivityThread.java:3687)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at java.lang.reflect.Method.invoke(Method.java:507)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
04-19 11:28:32.509: E/AndroidRuntime(4409):     at dalvik.system.NativeStart.main(Native Method) 
```

但是在没有自动对焦功能的相机中拍摄时效果很好。

下面我附上了我的代码

MainActivity.java

```
package com.example.camerasample;

import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

import com.example.camerasample.R;

import android.app.Activity;
import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.AutoFocusCallback;
import android.hardware.Camera.PictureCallback;
import android.hardware.Camera.ShutterCallback;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceView;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnLongClickListener;
import android.view.ViewGroup.LayoutParams;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.FrameLayout;

public class MainActivity extends Activity {
    private static final String TAG = "CamTestActivity";
    Preview preview;
    Button buttonClick;
    Camera camera;
    String fileName;
    Activity act;
    Context ctx;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        ctx = this;
        act = this;
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);

        preview = new Preview(this, (SurfaceView)findViewById(R.id.surfaceView));
        preview.setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
        ((FrameLayout) findViewById(R.id.preview)).addView(preview);
        preview.setKeepScreenOn(true);

        buttonClick = (Button) findViewById(R.id.buttonClick);

        buttonClick.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                camera.takePicture(shutterCallback, rawCallback, jpegCallback);
            }
        });

        buttonClick.setOnLongClickListener(new OnLongClickListener(){
            @Override
            public boolean onLongClick(View arg0) {
                camera.autoFocus(new AutoFocusCallback(){
                    @Override
                    public void onAutoFocus(boolean arg0, Camera arg1) {
                    }
                });
                return true;
            }
        });
    }

    @Override
    protected void onResume() {
        super.onResume();
        camera = Camera.open();
        camera.startPreview();
        preview.setCamera(camera);
    }

    @Override
    protected void onPause() {
        if(camera != null) {
            camera.stopPreview();
            preview.setCamera(null);
            camera.release();
            camera = null;
        }
        super.onPause();
    }

    private void resetCam() {
        camera.startPreview();
        preview.setCamera(camera);
    }

    ShutterCallback shutterCallback = new ShutterCallback() {
        public void onShutter() {
            // Log.d(TAG, "onShutter'd");
        }
    };

    PictureCallback rawCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            // Log.d(TAG, "onPictureTaken - raw");
        }
    };

    PictureCallback jpegCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {
            FileOutputStream outStream = null;
            try {
                // Write to SD Card
                fileName = String.format("/sdcard/camtest/%d.jpg", System.currentTimeMillis());
                outStream = new FileOutputStream(fileName);
                outStream.write(data);
                outStream.close();
                Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);

                resetCam();

            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
            }
            Log.d(TAG, "onPictureTaken - jpeg");
        }
    };
} 
```

预览.java

```
package com.example.camerasample;

import java.io.IOException;
import java.util.List;

import android.content.Context;
import android.hardware.Camera;
import android.hardware.Camera.Size;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;
import android.view.ViewGroup;

class Preview extends ViewGroup implements SurfaceHolder.Callback {
    private final String TAG = "Preview";

    SurfaceView mSurfaceView;
    SurfaceHolder mHolder;
    Size mPreviewSize;
    List<Size> mSupportedPreviewSizes;
    Camera mCamera;

    @SuppressWarnings("deprecation")
    Preview(Context context, SurfaceView sv) {
        super(context);

        mSurfaceView = sv;

        mHolder = mSurfaceView.getHolder();
        mHolder.addCallback(this);
        mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    }

    public void setCamera(Camera camera) {
        mCamera = camera;
        if (mCamera != null) {
            mSupportedPreviewSizes = mCamera.getParameters().getSupportedPreviewSizes();
            requestLayout();

            // get Camera parameters
            Camera.Parameters params = mCamera.getParameters();

            List<String> focusModes = params.getSupportedFocusModes();
            if (focusModes.contains(Camera.Parameters.FOCUS_MODE_AUTO)) {
                // set the focus mode
                params.setFocusMode(Camera.Parameters.FOCUS_MODE_AUTO);
                // set Camera parameters
                mCamera.setParameters(params);
            }
        }
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        // We purposely disregard child measurements because act as a
        // wrapper to a SurfaceView that centers the camera preview instead
        // of stretching it.
        final int width = resolveSize(getSuggestedMinimumWidth(), widthMeasureSpec);
        final int height = resolveSize(getSuggestedMinimumHeight(), heightMeasureSpec);
        setMeasuredDimension(width, height);

        if (mSupportedPreviewSizes != null) {
            mPreviewSize = getOptimalPreviewSize(mSupportedPreviewSizes, width, height);
        }
    }

    @Override
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        if (changed && getChildCount() > 0) {
            final View child = getChildAt(0);

            final int width = r - l;
            final int height = b - t;

            int previewWidth = width;
            int previewHeight = height;
            if (mPreviewSize != null) {
                previewWidth = mPreviewSize.width;
                previewHeight = mPreviewSize.height;
            }

            // Center the child SurfaceView within the parent.
            if (width * previewHeight > height * previewWidth) {
                final int scaledChildWidth = previewWidth * height / previewHeight;
                child.layout((width - scaledChildWidth) / 2, 0,
                        (width + scaledChildWidth) / 2, height);
            } else {
                final int scaledChildHeight = previewHeight * width / previewWidth;
                child.layout(0, (height - scaledChildHeight) / 2,
                        width, (height + scaledChildHeight) / 2);
            }
        }
    }

    public void surfaceCreated(SurfaceHolder holder) {
        // The Surface has been created, acquire the camera and tell it where
        // to draw.
        try {
            if (mCamera != null) {
                mCamera.setPreviewDisplay(holder);
            }
        } catch (IOException exception) {
            Log.e(TAG, "IOException caused by setPreviewDisplay()", exception);
        }
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        // Surface will be destroyed when we return, so stop the preview.
        if (mCamera != null) {
            mCamera.stopPreview();
        }
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.1;
        double targetRatio = (double) w / h;
        if (sizes == null) return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE) continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
        if(mCamera != null) {
            Camera.Parameters parameters = mCamera.getParameters();
            parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
            requestLayout();

            mCamera.setParameters(parameters);
            mCamera.startPreview();
        }
    }

} 
```

显现：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.camerasample"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" />

    <uses-feature android:name="android.hardware.camera" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.hardware.camera.autofocus" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:label="@string/app_name"
            android:name=".MainActivity"
            android:screenOrientation="landscape" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

我在任何地方都找不到确切的解决方案，请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T09:57:21.040

我提出了两种对我有用的解决方案。1）正确停止和恢复相机。我通过在 onPause 和 onResume 上调用这些方法来做到这一点，也在相机预览的中间，我在我的应用程序中扫描 QR 码：

```
public void stopCamera(){
     mCamera.cancelAutoFocus();
     mCamera.setPreviewCallback(null);
     mCamera.stopPreview();  
     mPreviewing = false;
     }

public void rethrottleCamera(){
        updateViews(); //Updates my Layouts
        mPreviewing = true;
        mCamera.startPreview();
        mCamera.setPreviewCallback(previewCb);  
        mCamera.autoFocus(autoFocusCB); 
        } 
```

2）非常棘手，但像魔术一样工作！确保在创建预览表面后调用自动对焦。为此，请以 200 毫秒的延迟运行 Autofocus，以便为创建表面争取时间。通过在“CameraPreview”对象声明上按 ctrl+clic 进行设置，例如：

```
CameraPreview my_camera; 
```

查找“public void surfaceChanged”方法并进行以下更改：

```
//Add a delay to AUTOFOCUS after mCamera.startpreview();!!:
    mCamera.startPreview();                 
    final Handler handler = new Handler();
    handler.postDelayed(new Runnable() {
        @Override
        public void run() {                    
            mCamera.autoFocus(autoFocusCallback);
            }
    }, 200); //<-200 millisecond delay

    //If you call autofocus right after startPreview, chances are,
    //that the previewSurface will have not been created yet,
    //and autofocus will fail:
    mCamera.startPreview();               //Bad idea!
    mCamera.autoFocus(autoFocusCallback); //Bad idea! 
```

还有很多其他修复，但这两个可能会节省您的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T10:14:06.207

是的，当您在相机上自动对焦两次时，代码会崩溃。您可以通过设置一个标志来解决此问题，该标志将检查自动对焦是否已启动，然后再次跳过自动对焦的执行。

# javascript - 通过javascript提交表单与通过实际点击提交表单的结果不同？

> ID：16098477
> 
> 赞同：0
> 
> 时间：2013-04-19T06:21:44.717
> 
> 标签：javascript, google-chrome-extension

我正在尝试为 chrome 扩展编写 javascript，以便在我正在浏览的页面上提交以下表单：

```
<form name='cartcheckoutpro' method='POST'action='https://store01.prostores.com/servlet/store/Checkout?cart_id=39064012' style='margin:0px'>
    <input type='image' name='checkout' src='/images/InitialSet/proceedtocheckout.gif' border='0'/><input type='hidden' name="cart_id" value="39064012">
</form> 
```

对我来说，我认为这样做很容易：

```
document.getElementsByName("cartcheckoutpro")[0].submit(); 
```

但是，当我使用 javascript 提交表单时，以下页面的加载方式与我单击按钮继续时不同。关于我为什么遇到这个问题的任何想法？

以下是目标页面上的脚本：

```
<script type="text/javascript">
    window.onload = function () {
        var email = document.getElementById("customerregistryemail");
        if (email)
            email.setAttribute("autocomplete", "off");
    }
</script>

<script type="text/javascript">
    function toggleLogin() {
        document.getElementById('logininfo').style.display = document.getElementById('returning').checked ? "inline" : "none";
    }
    YAHOO.util.Event.addListener(window, "load", function () {
        toggleLogin();
    });    
    toggleLogin();
</script> 
```

# sed - 使用 sed 插入标题行

> ID：16098485
> 
> 赞同：5
> 
> 时间：2013-04-19T06:22:07.517
> 
> 标签：sed, converter

我需要通过 cron 运行 bash 脚本来更新文件。该文件是一个 .DAT（类似于 csv）并包含管道分隔值。我需要在顶部插入一个标题行。

这是我到目前为止所拥有的：

```
#!/bin/bash
# Grab the file, make a backup and insert the new line
sed -i.bak 1i"red|blue|green|orange|yellow" thefilename.dat

Exit 
```

但是如何将文件另存为不同的文件名，以便它始终采用 fileA，对其进行编辑，然后将其另存为 fileB

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-10T23:29:30.107

你真的把旧的重命名为 xxx.bak 还是你可以保存一个新的副本？

无论哪种方式，只需使用重定向。

`sed 1i"red|blue|green|orange|yellow" thefilename.dat > newfile.dat`

或者如果你也想要 .bak

```
sed 1i"红色|蓝色|绿色|橙色|黄色" thefilename.dat > newfile.dat \
&& mv thefilename.dat thefilename.dat.bak`

```

这将创建您的新文件，然后，仅当 sed 成功完成时，重命名 orig 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T03:28:10.227

万一有人觉得它有用，这就是我最终要做的......

抓取原始文件，将其转换为所需的文件类型，同时插入一个新的标题行并记录下来。

```
#!/bin/bash -l
####################################
#
# This script inserts a header row in the file $DAT and resaves the file in a different format
#
####################################

#CONFIG

LOGFILE="$HOME/bash-convert/log-$( date '+%b-%d-%y' ).log"
HOME="/home/rootname"

# grab original file
WKDIR="$HOME/public_html/folder1"
# new location to save
NEWDIR="$HOME/public_html/folder2"

# original file to target
DAT="$WKDIR/original.dat"

# file name and type to convert to
NEW="$NEWDIR/original-converted.csv"

####################################

# insert a new header row
HDR="header-row-1|header-row-2|header-row-2 \r"

# and update the log file
{
echo "---------------------------------------------------------" >> $LOGFILE 2>&1
echo "Timestamp: $(date "+%d-%m-%Y: %T") : Starting work" >> $LOGFILE 2>&1
touch "$LOGFILE" || { echo "Can't create logfile -- Exiting."  && exit 1  ;} >>"$LOGFILE"

# check if file is writable
sudo chmod 755 -R "$NEW"
echo "Creating file \"$NEW\", and setting permissions."
touch "$NEW"  || { 
echo "Can't create file \"$NEW\" -- Operation failed - exiting" && exit 1   ;}

} >>"$LOGFILE" 2>&1

{
echo "Prepending line \"$HDR\" to file $NEW."
{ echo "$HDR" ; cat "$DAT" ;} > "$NEW"

 {   
if [ "$?" -ne "0" ]; then
echo "Something went wrong with the file conversion."
exit 1

else echo "File conversion successful. Operation complete."
fi
}

} >>"$LOGFILE" 2>&1
exit 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-04T11:26:15.453

我发现模式“插入”的两个单引号之间的“i”语法更加清晰。

您可以简单地添加一个标题，并将其保存在不同的文件中：

```
sed '1i header' file > file2 
```

在你的情况下：

```
sed '1i red|blue|green|orange|yellow' file > file2 
```

如果您想将其保存在同一个文件中，您可以使用`-i`选项：

```
sed -i '1i red|blue|green|orange|yellow' file 
```

# mysql - 在 mysql 中使用 Max 时去除初始零

> ID：16098488
> 
> 赞同：1
> 
> 时间：2013-04-19T06:22:32.700
> 
> 标签：mysql, sql, phpmyadmin, max, sqlfiddle

去测试 -

```
CREATE TABLE shop (
    article INT(4) UNSIGNED ZEROFILL DEFAULT '0000' NOT NULL,
    dealer  CHAR(20)                 DEFAULT ''     NOT NULL,
    price   DOUBLE(16,2)             DEFAULT '0.00' NOT NULL,
    PRIMARY KEY(article, dealer));
INSERT INTO shop VALUES
    (1,'A',3.45),(1,'B',3.99),(2,'A',10.99),(3,'B',1.45),
    (3,'C',1.69),(3,'D',1.25),(4,'D',19.95); 
```

我的查询 -

```
SELECT MAX( article ) AS article
FROM shop 
```

它输出 -

```
+---------+
| article |
+---------+
|       4 |
+---------+ 
```

然而我期待 -

```
+---------+
| article |
+---------+
|    0004 |
+---------+ 
```

我试过`CAST`但没有运气。

让我知道我该如何处理。

仅供参考-我尝试为此创建 SQL Fiddle，但执行时小提琴未填充零[http://sqlfiddle.com/#!2/4abbe/24](http://sqlfiddle.com/#!2/4abbe/24)`SELECT * FROM shop`

然而，在`phpmyadmin`其与`ooo's`填充正常工作。

`MySQL`设置 - 服务器版本：5.5.16 `PHPMYADMIN`设置 - 版本信息：3.4.5

我的表格数据表示 -

![表数据](https://i.stack.imgur.com/Y6nyC.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:27:02.517

您可以使用[**`LPAD()`**](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_lpad).

```
SELECT LPAD(article, 4, 0) FROM table_name; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:27:03.787

```
SELECT  LPAD(MAX( article ), 4, '0') AS article FROM shop; 
```

;-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T06:29:52.637

当您使用 ZEROFILL 时，它实际上是以这种形式将其存储在数据库中，但在检索它时会截断零。所以你应该使用： -

```
SELECT  LPAD(MAX( article ), 4, '0') AS article FROM shop; 
```

# python - 用 Python 分解三项式

> ID：16098493
> 
> 赞同：4
> 
> 时间：2013-04-19T06:23:05.480
> 
> 标签：python, math

我正在创建一个程序来分解三项式，但我有点困惑和混淆，我不知道如何正确打印输出。

三项式示例：

> 2x**2+6x+4 = (1x+2)(2x+2)

到目前为止，我的代码只考虑了等式的每个部分

```
def factortri(x, b, c, e):
    for i in range(x): 
        if i > 0: 
            if x%i == 0: 
                if i > x/i: 
                    pass
                else: 
                   h = "%s, %s"%(i,x/i)
                   print h
    for i in range(e): 
        if i > 0: 
            if e%i == 0: 
                if i > e/i: 
                    pass
                else:
                    s = (e/i)
                    f = "%s,%s"%(i,s)
                    print f
                    if i*x + s*x == c: 
                        print i
                        print x
                        print s
                        print x
    for l in range(b): 
        if l > 0: 
            if b%l == 0: 
                if l > b/l: 
                    pass
                else:
                    r = (b/l)
                    g = "%s, %s"%(l,r) 
                    if (l+i)*(r+s)== c+e:
                        print "yes"
                    if (r+i)*(l+s)== c+e:
                        print "yes"
                    if (r+s)*(l+i)== c+e:
                        print "yes"
                    if (l+s)*(r+i)== c+e:
                        print "yes"

x = input("First Tri Co-ef: ")
b = input("First Tri Exponent: ")
c = input("Middle Tri Co-ef: ")
e = input("Last Trinomial: ")

factortri(x, b, c, e) 
```

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:34:38.687

如果我理解正确，你所有的三项式都是只有一个变量的二次多项式。我会这样解决这个问题：

首先将二次多项式`ax^2 + bx + c`转化为一元形式，`x^2 + px + q`将其除以`a`，然后将此多项式设置为 0 并使用公式`x_{1,2} = -p/2 +/- sqrt((p/2)^2-q)`（例如 Wikipedia 上更具可读性的版本（[http://en.wikipedia.org/wiki/Quadratic_equation#Quadratic_formula](http://en.wikipedia.org/wiki/Quadratic_equation#Quadratic_formula) ) 得到两个解决方案。

现在您的解很简单`a(x-x1)(x-x2)`，其中 x1 和 x2 是二次方程的解。

我添加了一个示例以使这一点更清楚：

如果你有一个方程`2x^2 + 6x + 4`，你将它除以 a=2 并得到`x^2 + 3x +2`，现在你使用上面提到的公式并得到解 x1=-2 和 x2=-1。现在你把所有东西放在一起得到`a(x-x1)(x-x2) = 2(x+2)(x+1)`，这和你的例子一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:31:21.753

如何使用二次公式找到因子，然后将值代入？

[http://en.wikipedia.org/wiki/Quadratic_equation](http://en.wikipedia.org/wiki/Quadratic_equation)

注意：只有当指数在算术级数中时，才能使用此方法。我会在评论中问你这个问题，但我没有什么可做的。

# css - 如何为一个变量应用样式

> ID：16098494
> 
> 赞同：0
> 
> 时间：2013-04-19T06:23:05.730
> 
> 标签：css, variables

我有一个变量 var 结果，在这个变量中我存储了一个文本框值，我想为该变量应用样式。如何为变量应用样式。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:38:11.553

如果你想使用 java 脚本设置文本框的 CSS 样式（HTML - 输入类型 - 文本）
试试这个

```
<script type="text/javascript">
    function changeStyle() {
       var cssString = "css style";
       document.getElementById("my_Element_id").style.cssText = cssString;
    }
</script>

<input type="text" id="my_Element_id" />
<input type="button" value="Change" onlclick="changeStyle()" /> 
```

将 css 样式替换为您的实际样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:39:56.883

您不能设置变量的样式。

要设置所有文本框的样式，您可以编写如下内容：

```
input[type="text"] {
  color: red;
} 
```

如果您想为一个特定的文本框设置样式，请给它一个类，例如：

```
<input type="text" class="my-custom-class" /> 
```

并使用以下样式对其进行样式设置：

```
input.my-custom-class {
  color: red;
} 
```

# apache - .htacces URL 重写问题：用相同的变量重写 URL

> ID：16098498
> 
> 赞同：0
> 
> 时间：2013-04-19T06:23:32.907
> 
> 标签：apache, .htaccess, url-rewriting

我想从以下内容重写我的 URL：

```
http://domain.com/edit.php?proname=abc 
```

至：

```
http://domain.com/abc 
```

这是我当前在 .htaccess 中的重写代码：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-zA-Z0-9-]+)$ edit.php?proname=$1 [L,QSA]
RewriteRule ^([a-zA-Z0-9-]+)/$ edit.php?proname=$1 [L,QSA] 
```

代码“有点”有效。问题是它用相同的变量重写了所有的“编辑”URL。例如，我有一个包含三个项目的表，每个项目都有一个“编辑”按钮。当我单击项目 2 或 3 的“编辑”按钮时，它会将我引至项目 1 的编辑页面。所有编辑链接将我引向第一个项目的编辑页面。

什么可能导致它？

已解决：原来 PHP 脚本中存在逻辑错误。谢谢你，奥拉夫！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:28:21.830

htaccess 可以简化，但到目前为止看起来是正确的。问题一定出在`edit.php`脚本上。

注意：您可以将两条规则简化为一条规则

```
RewriteRule ^([a-zA-Z0-9-]+)/?$ edit.php?proname=$1 [L,QSA] 
```

但这并不能解决您的问题。

# android - 无法运行 AndroidViewClient 示例代码

> ID：16098500
> 
> 赞同：0
> 
> 时间：2013-04-19T06:23:47.373
> 
> 标签：android, monkeyrunner

[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)是一个 github 存储库，它允许您直接调用视图，而无需使用 monkeyrunner 指定确切的坐标。我在实际使用它时遇到了麻烦。

*注意：我使用的是 Windows*

如果我在命令行中输入：

```
monkeyrunner test.py 
```

和 test.py 包括：

```
# Imports the monkeyrunner modules used by this program
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice

# Connects to the current device, returning a MonkeyDevice object
device = MonkeyRunner.waitForConnection()

# Presses the Menu button
device.press('KEYCODE_MENU', MonkeyDevice.DOWN_AND_UP) 
```

然后点击 actionBar 溢出按钮。

如果我将 test.py 编辑到任何 AndroidViewClient 示例，它不会做任何事情。

有任何想法吗？我不确定我是否正确实现了 AndroidViewClient。

**编辑：**

我设置 AndroidViewClient 所做的唯一一件事就是从 github 下载 .zip，然后将其添加到我的环境变量中，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/Flbt2.png)

当我尝试运行时`monkeyrunner dump.py`：

```
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions] Scri
pt terminated due to an exception
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]Trace
back (most recent call last):
  File "C:\Users\EgamerHDK\android-sdk\tools\dump.py", line 29, in <module>
    from com.dtmilano.android.viewclient import ViewClient
ImportError: No module named dtmilano

130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.Py.ImportError(Py.java:264)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.imp.import_logic(imp.java:692)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.imp.import_name(imp.java:746)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.imp.importName(imp.java:791)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.ImportFunction.__call__(__builtin__.java:1236)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.PyObject.__call__(PyObject.java:367)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.__builtin__.__import__(__builtin__.java:1207)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.imp.importFromAs(imp.java:869)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.imp.importFrom(imp.java:845)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.pycode._pyx0.f$0(C:\Users\EgamerHDK\android-sdk\tools\dump.py:78)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.pycode._pyx0.call_function(C:\Users\EgamerHDK\android-sdk\tools\dump.
py)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.PyTableCode.call(PyTableCode.java:165)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.PyCode.call(PyCode.java:18)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.Py.runCode(Py.java:1197)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.core.__builtin__.execfile_flags(__builtin__.java:538)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at org.python.util.PythonInterpreter.execfile(PythonInterpreter.java:156)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at com.android.monkeyrunner.ScriptRunner.run(ScriptRunner.java:116)
130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at com.android.monkeyrunner.MonkeyRunnerStarter.run(MonkeyRunnerStarter.java:77)

130419 02:46:57.869:S [main] [com.android.monkeyrunner.MonkeyRunnerOptions]
at com.android.monkeyrunner.MonkeyRunnerStarter.main(MonkeyRunnerStarter.java:18
9) 
```

**输入完整路径：**

```
C:\Users\EGamerHDK\android-sdk\tools>monkeyrunner C:\AndroidViewClient-master\Andro
idViewClient-master\AndroidViewClient\examples\dump.py
Can't open specified script file
Usage: monkeyrunner [options] SCRIPT_FILE

    -s      MonkeyServer IP Address.
    -p      MonkeyServer TCP Port.
    -v      MonkeyServer Logging level (ALL, FINEST, FINER, FINE, CONFIG, INFO,
WARNING, SEVERE, OFF) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:38:15.900

来自[AndroidViewClient 维基](https://github.com/dtmilano/AndroidViewClient/wiki)：

> 安装 AndroidViewClient 不需要安装即可使用。您只需要下载源代码分发并设置环境变量 ANDROID_VIEW_CLIENT_HOME 或 PYTHONPATH 即可让 monkeyrunner 解释器找到所需的模块。

展开下载的 ZIP 文件并相应地设置环境变量。

然后，如果您打算运行，例如`dump.py`，下一步是：

```
monkeyrunner dump.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:40:41.433

在 dump.py 中更改：

```
from com.dtmilano.android.viewclient import ViewClient 
```

至：

```
sys.path.append('C:\AndroidViewClient-master\AndroidViewClient-master\AndroidViewClient\src')
from com.android.monkeyrunner import MonkeyRunner, MonkeyDevice
from com.dtmilano.android.viewclient import ViewClient 
```

它现在起作用了。这是我的应用程序的示例输出。

```
android.widget.FrameLayout id/no_id/1
   android.widget.LinearLayout id/no_id/2
      android.widget.FrameLayout id/no_id/3
         android.view.View id/no_id/4
            android.widget.FrameLayout id/no_id/5
               android.widget.ImageView id/no_id/6
            android.widget.LinearLayout id/no_id/7
               android.widget.LinearLayout id/no_id/8
                  android.widget.TextView id/no_id/9 Tabs+SwipeCompatable
            android.widget.LinearLayout id/no_id/10
               android.widget.ImageButton id/no_id/11
         android.widget.HorizontalScrollView id/no_id/12
            android.widget.LinearLayout id/no_id/13
               android.widget.LinearLayout id/no_id/14
                  android.widget.TextView id/no_id/15 SECTION 1
               android.widget.LinearLayout id/no_id/16
                  android.widget.TextView id/no_id/17 SECTION 2
               android.widget.LinearLayout id/no_id/18
                  android.widget.TextView id/no_id/19 SECTION 3
      android.widget.FrameLayout id/no_id/20
         android.support.v4.view.ViewPager id/no_id/21
            android.widget.FrameLayout id/no_id/22
               android.widget.TextView id/no_id/23 1 
```

# javascript - Javascript 搜索不属于的确切结果

> ID：16098501
> 
> 赞同：1
> 
> 时间：2013-04-19T06:23:52.263
> 
> 标签：javascript

我正在尝试使用来自以下网站的 Javascript 搜索但是想知道是否有一种方法可以只返回搜索的确切术语，就好像我输入了一个单词的一部分，它也返回了表格行。

IE。搜索“Heath”返回与搜索 Hethesh 相同的结果，是否有简单的解决方法？

脚本： [http ://heathesh.com/post/2010/05/06/Filtering-or-searching-an-HTML-table-using-JavaScript.aspx](http://heathesh.com/post/2010/05/06/Filtering-or-searching-an-HTML-table-using-JavaScript.aspx)

示例： [http ://heathesh.com/code/javascript/tablesearch/](http://heathesh.com/code/javascript/tablesearch/)

* * *

```
<table border="1" cellpadding="0" cellspacing="0">
    <tr>
        <th>ID</th>
        <th>First Name</th>
        <th>Surname</th>
        <th>Website</th>
    </tr>
    <tbody id="data">
        <tr>
            <td>1</td>
            <td>Heathesh</td>
            <td>Bhandari</td>
            <td><a href="http://heathesh.com">http://heathesh.com</a></td>
        </tr>
        <tr>
            <td>2</td>
            <td>Candice</td>
            <td>David</td>
            <td><a href="http://candicedavid.com">http://candicedavid.com</a></td>
        </tr>
    </tbody>
</table>

//define the table search object, which can implement both functions and properties
    window.tableSearch = {};

    //initialize the search, setup the current object
    tableSearch.init = function() {
        //define the properties I want on the tableSearch object
        this.Rows = document.getElementById('data').getElementsByTagName('TR');
        this.RowsLength = tableSearch.Rows.length;
        this.RowsText = [];

        //loop through the table and add the data to the table search object
        for (var i = 0; i < tableSearch.RowsLength; i++) {
            this.RowsText[i] = (tableSearch.Rows[i].innerText) ? tableSearch.Rows[i].innerText.toUpperCase() : tableSearch.Rows[i].textContent.toUpperCase();
        }
    } 
```

接下来创建实际的 JavaScript 函数来运行搜索，如下所示：

```
 //onlys shows the relevant rows as determined by the search string
    tableSearch.runSearch = function() {
        //get the search term
        this.Term = document.getElementById('textBoxSearch').value.toUpperCase();

        //loop through the rows and hide rows that do not match the search query
        for (var i = 0, row; row = this.Rows[i], rowText = this.RowsText[i]; i++) {
            row.style.display = ((rowText.indexOf(this.Term) != -1) || this.Term === '') ? '' : 'none';
        }
    }

    //handles the enter key being pressed
    tableSearch.search = function(e) {
        //checks if the user pressed the enter key, and if they did then run the search
        var keycode;
        if (window.event) { keycode = window.event.keyCode; }
        else if (e) { keycode = e.which; }
        else { return false; }
        if (keycode == 13) {
            tableSearch.runSearch();
        }
        else { return false; }
    }

<table border="0" cellpadding="0" cellspacing="0">
    <tbody>
        <tr>
            <td>
                <input type="text" size="30" maxlength="1000" value="" id="textBoxSearch" onkeyup="tableSearch.search(event);" />
                <input type="button" value="Search" onclick="tableSearch.runSearch();" />
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:30:12.120

您`rowText.indexOf()`在下面的代码中将其与此匹配，如果在字符串中的任何位置找到该术语，它将返回该行。

```
for (var i = 0, row; row = this.Rows[i], rowText = this.RowsText[i]; i++) {
    row.style.display = ((rowText.indexOf(this.Term) != -1) || this.Term === '') ? '' : 'none';
} 
```

要获得完全匹配，请更改`rowText.indexOf(this.Term) != -1`为`rowText.toUpperCase() === this.Term.toUpperCase()`. 在比较之前将`.toUpperCase()`两个字符串都转换为大写，以使搜索不区分大小写。

```
for (var i = 0, row; row = this.Rows[i], rowText = this.RowsText[i]; i++) {
    row.style.display = ((rowText.toUpperCase() === this.Term.toUpperCase()) || this.Term === '') ? '' : 'none';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:31:21.823

如果完全匹配的单词没有给出任何结果，以下代码将进行部分搜索：

```
<html>
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>Search table</title>
</head>
 <body style="  background-color:white;">
<input type="text" size="30"
 value="" 
 id="textBoxSearch" 
 onkeyup="tableSearch.search(this.value);" />
<div id="table"></div>
<script type="text/javascript">
// create a 4 column table with random text
function getRandomText(len){
    ret=[];
    for(var i =0;i<len;i++){
        ret.push(String.fromCharCode(
          Math.floor((Math.random()*(85-65))+65)
        ));
    }
    return ret.join("");
}
function createRandomTable(){
    var ret=["<table>"],i=0,
    j=0;
    while(i<50){
        j=0
        ret.push("<tr>");
        while(j<5){
            ret.push("<td>");
            ret.push(getRandomText(5));
            ret.push("</td>");
            j++;
        }
        ret.push("</tr>");
        i++;
    }
    document.getElementById("table")
     .innerHTML=ret.join("");
} 
createRandomTable();
// Code that does the search
tableSearchF=function(){
    //private variables
    var table=document.getElementById("table")
      .getElementsByTagName("table")[0];
    var rows=table.getElementsByTagName("tr");
    var rowVals=[];
    for(var i=0;i<rows.length;i++){
        var tmp=[];
        var c=rows[i].getElementsByTagName("td");
        for(var j=0;j<c.length;j++){
            tmp.push(
              (c[j].textContent)?c[j].textContent:c[j].innerText
            )
        }
        rowVals.push(tmp);
    }
    var searchTable=function(r){
        var match=false;
        var doPartial=true;
        // for each row
        for(var i=0;i<rowVals.length;i++){
            match=false;
            //for each cell
            cellmatch:
            for(var j=0;j<rowVals[i].length;j++){
                if(r.test(rowVals[i][j])===true){
                    console.log("positive match");
                    match=true;
                    doPartial=false;
                    break cellmatch;
                }
            }
            rows[i].style.display=(match)?"":"none";
        }
        return doPartial;
    }
    // publicly available methods
    return {
        search:function(searchText){
            var txt = searchText.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g
              ,'\\$1')
              .replace(/\x08/g, '\\x08'),
            r = new RegExp("\\b"+txt+"\\b","igm");
            if(searchTable(r)){
                // no exact match, do a partial
                r=new RegExp(txt,"igm");
                searchTable(r);
            }
        }
    }
}
//initialise tableSearch
var tableSearch=tableSearchF();
</script>

 </body>
</html> 
```

# ios - UIScrollView 内的 UILabel 上的触摸检测

> ID：16098504
> 
> 赞同：1
> 
> 时间：2013-04-19T06:24:22.047
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uilabel

我有一个`UIScrollView`，在这个里面我有`UILabels`。我需要检测`UILabels`. 目前，它只检测第二个标签内的触摸。它忽略了第一个。

我有代码-

**创建 UIScrollView**

```
backGroundView = [[UIScrollView alloc] init];
backGroundView.frame= self.view.frame;
backGroundView.userInteractionEnabled = YES;
[backGroundView setScrollEnabled:YES];
backGroundView.showsVerticalScrollIndicator = YES;
backGroundView.contentSize = CGSizeMake(self.view.frame.size.width, self.view.frame.size.height);
backGroundView.delegate = self;

[self.view addSubview:backGroundView]; 
```

**创建`UILabel`**

```
UILabel *OneDay = [[UILabel alloc] initWithFrame:CGRectMake(15, stockChart.bounds.origin.y + stockChart.bounds.size.height + 35, 40, 30)];
OneDay.text = @"1d";
OneDay.tag = 1;
OneDay.userInteractionEnabled = YES;
OneDay.layer.borderColor = [UIColor grayColor].CGColor;
OneDay.layer.borderWidth = 1.0f;
OneDay.textAlignment = UITextAlignmentCenter;
[OneDay addGestureRecognizer:detectTimeFrameChange];
[backGroundView addSubview:OneDay];

UILabel *FiveDay = [[UILabel alloc] initWithFrame:CGRectMake(45, stockChart.bounds.origin.y + stockChart.bounds.size.height + 35, 40, 30)];
FiveDay.text = @"5d";
FiveDay.tag = 2;
FiveDay.userInteractionEnabled = YES;
FiveDay.layer.borderColor = [UIColor grayColor].CGColor;
FiveDay.layer.borderWidth = 1.0f;
FiveDay.textAlignment = UITextAlignmentCenter;
[FiveDay addGestureRecognizer:detectTimeFrameChange];
[backGroundView addSubview:FiveDay]; 
```

**创建手势识别器**

```
 UITapGestureRecognizer *detectTimeFrameChange = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(timeFrameLabelTapped:)];
detectTimeFrameChange.numberOfTapsRequired = 1;
[backGroundView addGestureRecognizer:detectTimeFrameChange]; 
```

**处理手势**

```
-(void)timeFrameLabelTapped:(UITapGestureRecognizer*)recognizer{
    if (recognizer.view.tag == 1) {
        NSLog(@"One pressed");
    }
    else if (recognizer.view.tag == 2){
        NSLog(@"2 pressed");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:33:17.797

你可以使用这个：

```
 UITapGestureRecognizer *labelTap=[[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(labelTapped)];
    labelTap.numberOfTapsRequired=1;
    [yourLabel addGestureRecognizer:labelTap]; 
```

处理 labelTapped 方法中的触摸点击事件：

```
-(void)labelTapped
{
  //your code to handle tap
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:33:12.133

你在哪里写了touchesBegan？

如果要检测标签中的触摸，则必须创建标签的子类并在此处编写 touchesBegan 以检测触摸事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:33:27.420

未检测到触摸事件`UIScrollview`以获取您的要求，将点击手势添加到您的标签。

```
 UITapGestureRecognizer *singleTap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured)];
        [OneDay addGestureRecognizer:singleTap]; 

  -(void)singleTapGestureCaptured{

        NSLog(@"touch detected");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-25T15:29:41.803

这里的问题是您试图对多个视图使用相同的手势识别器。手势识别器一次只能附加到单个视图。您只接收来自最后一个视图的事件，因为这是识别器当前附加到的视图。要解决此问题，只需为要检测触摸的每个视图创建一个手势识别器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T06:33:54.260

你可以找到像这样使用 Tapgesturerecognizer ......

```
UITapGestureRecognizer *singleFingerTap = 
  [[UITapGestureRecognizer alloc] initWithTarget:self 
                                          action:@selector(handleSingleTap:)];
[self.scrollview addGestureRecognizer:singleFingerTap];

//The event handling method
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer
{
    if(recognizer.view.tag == 1){}
    //Do stuff here...
} 
```

# c++ - automake 1.12 更改 bison/yacc 输出名称，向后不兼容的更改？

> ID：16098509
> 
> 赞同：5
> 
> 时间：2013-04-19T06:24:49.160
> 
> 标签：c++, yacc, autoconf, automake

我在[https://github.com/Habbie/autoyacc-problem](https://github.com/Habbie/autoyacc-problem)发布了一个存储库来演示我的问题。

在 automake 1.11 及更低版本中，`AC_PROG_YACC`在 configure.ac 和`AM_YFLAGS=-d`Makefile.am 中使用，parser.yy 会变成 parser.cc 和 parser.h。使用 automake 1.12，我得到 parser.cc 和 parser.hh。因为 mybin.cc 有`include "parser.h"`，这意味着 1.12 破坏了我的构建。

我觉得这是一个向后不兼容的变化，但我觉得应该有一种理智的方法来处理这个问题。

展示：

```
git clone https://github.com/Habbie/autoyacc-problem.git
cd autoyacc-problem/
autoreconf -i
./configure
make 
```

automake 1.11 的结果：构建了 mybin。automake 1.12 的结果：

```
mybin.cc:1:20: error: parser.h: No such file or directory 
```

帮助！

注意：此示例中没有实际的 C++ 代码，但对于我的实际问题，我确实需要 g++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:20:05.553

我不是专家；但考虑到您如何依赖旧版本的 automake 中未记录的行为（请参阅 zhenech），您可以要求更新版本的 automake（因此您可以依赖已定义的行为）；或确保预期的文件是由 automake 生成的。

鉴于默认输出扩展名为“.hh”，您可以使用简单的 make 指令从 .h 文件（对于旧版本的 automake）生成 .hh 文件：

```
.h.hh:
    cp $< $@ 
```

如果您更喜欢从 .hh 文件中生成 .h 文件，您可能需要翻转定义，并且根据我不熟悉的 autotools 的 lex/yacc 处理的具体情况，您可能需要将生成的文件添加到 BUILT_SOURCES

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-12T11:30:39.827

我在涉及使用解析的项目中使用以下方法`bison`：

我有一个文件`m4/AC_PROG_BISON.m4`，它要么附加（automake 版本 1.11 或更低版本）或不附加（版本 1.12+）以下行到*config.h*文件：

```
/* Use *.h extension for parser header file */
#define BISON_USE_PARSER_H_EXTENSION 1 
```

在需要包含解析器生成的标头的文件中，我添加了以下#ifdef 语句：

```
#include "config.h"
#if defined(BISON_USE_PARSER_H_EXTENSION)
#   include "my_parser.h"
#else
#   include "my_parser.hh"
#endif 
```

另外去把事情做好我将以下行附加到`configure.ac`

```
AC_PROG_BISON 
```

现在根据 automake 版本，将包含相关的标题。

文件内容：`m4/AC_PROG_BISON.m4`

```
dnl
dnl Check for bison 
dnl AC_PROG_BISON([MIN_VERSION=2.0])
dnl
AC_DEFUN([AC_PROG_BISON], [
if test "x$1" = "x" ; then
    bison_required_version="2.6"
else 
    bison_required_version="$1"
fi

AC_CHECK_PROG(have_prog_bison, [bison], [yes],[no])

AC_DEFINE_UNQUOTED([BISON_VERSION], [0.0],
                   [Defines bison version if bison is not present])

#Do not use *.h extension for parser header file but *.hh
bison_use_parser_h_extension=false

if test "$have_prog_bison" = "yes" ; then
    AC_MSG_CHECKING([for bison version >= $bison_required_version])
    bison_version=`bison --version | head -n 1 | cut '-d ' -f 4`
    AC_DEFINE_UNQUOTED([BISON_VERSION], [$bison_version],
                       [Defines bison version])
    if test "$bison_version" \< "$bison_required_version" ; then
        BISON=:
        AC_MSG_RESULT([no])
        AC_MSG_ERROR([Bison version 2.6 or higher must be installed on the system!])
    else
        AC_MSG_RESULT([yes])
        BISON=bison
        AC_SUBST(BISON)

#Verify automake version
#Upto version 1.11 parser headers for yy files are with h extension, from 1.12 it is hh
        automake_version=`automake --version | head -n 1 | cut '-d ' -f 4`
        AC_DEFINE_UNQUOTED([AUTOMAKE_VERSION], [$automake_version],
                           [Defines automake version])

        if test "$automake_version" \< "1.12" ; then
            #Use *.h extension for parser header file
            bison_use_parser_h_extension=true
            echo "Automake version < 1.12"
            AC_DEFINE([BISON_USE_PARSER_H_EXTENSION], [1],
                      [Use *.h extension for parser header file])
        fi
    fi
else
    BISON=:
    AC_MSG_RESULT([NO])
fi

AM_CONDITIONAL([BISON_USE_PARSER_H_EXTENSION], [test x$bison_use_parser_h_extension = xtrue])
AC_SUBST(BISON)
]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-23T12:18:49.557

您可以强制为标头使用特定文件名，包括

```
%defines "parser.h" 
```

在顶部`parser.yy`。该选项与没有文件名的`-d`选项相同。`%defines`

请参阅[GNU Bison 文档](https://www.gnu.org/software/bison/manual/html_node/Decl-Summary.html)。

# django-templates - django，标识模板中使用的上一页

> ID：16098514
> 
> 赞同：0
> 
> 时间：2013-04-19T06:25:20.337
> 
> 标签：django-templates

我希望我的页面内容根据用户来自哪个页面而有所不同。如何定义前一页以在模板中使用它？我的意思是它应该看起来像

```
{% if (previous page)=="/some/page/"%}
do something
{% endif %} 
```

我必须写什么而不是（上一页）？我想知道是否可以以某种方式使用 request.META['HTTP_REFERER'] ，因为我所有的尝试都称为错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:30:35.303

Django 的模板语言不是 Python，也不支持 Python 的下标语法。您必须`request.META.HTTP_REFERER`按照此处记录的方式使用：[https ://docs.djangoproject.com/en/dev/topics/templates/#variables](https://docs.djangoproject.com/en/dev/topics/templates/#variables)

此外，http referer 元数据不一定可靠，因此使用会话跟踪用户导航可能是最安全的。

# c - 使用 C 中的指针反转任意长度的字符串

> ID：16098515
> 
> 赞同：0
> 
> 时间：2013-04-19T06:25:21.037
> 
> 标签：c, string, reverse

我只是浏览了一些面试问题，发现这段代码使用指针反转字符串。但我看到他们在这里定义了限制字符串长度的 char string[100] 。我不太擅长 C。如何修改它以使其成为任意长度的字符串？

```
#include<stdio.h>

int string_length(char*);
void reverse(char*);

main() 
{
   char string[100];

   printf("Enter a string\n");
   gets(string);

   reverse(string);

   printf("Reverse of entered string is \"%s\".\n", string);

   return 0;
}

void reverse(char *string) 
{
   int length, c;
   char *begin, *end, temp;

   length = string_length(string);

   begin = string;
   end = string;

   for ( c = 0 ; c < ( length - 1 ) ; c++ )
      end++;

   for ( c = 0 ; c < length/2 ; c++ ) 
   {        
      temp = *end;
      *end = *begin;
      *begin = temp;

      begin++;
      end--;
   }
}

int string_length(char *pointer)
{
   int c = 0;

   while( *(pointer+c) != '\0' )
      c++;

   return c;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:28:20.517

使用动态内存分配代替静态数组：`char *tab = malloc(n * sizeof(char))`其中`n`一些变量表示所需的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:28:29.877

如果您希望用户在运行时决定/输入大小，您可以为此目的使用 malloc()。

[malloc()](http://www.cplusplus.com/reference/cstdlib/malloc/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:03:32.133

动态内存分配是解决方案..获取指向字符串的指针并动态分配内存..这在运行时分配..这将解决您的问题..

```
char *str;
str = (char*)malloc(n *sizeof(char)); 
```

注意：类型转换在 C 中是可选的，这里的“n”是所需的长度。（可以是用户输入）。

# apache-flex - 无法在 flex 中打印某些字符（例如 €）

> ID：16098517
> 
> 赞同：0
> 
> 时间：2013-04-19T06:25:26.103
> 
> 标签：apache-flex, flex4, flex3

我试图从外部 XML 动态地在屏幕上打印一些字符（例如 €）。我在屏幕上看到的只是小矩形。如果我在代码（即硬编码）中设置标签文本属性的€（欧元符号），它会在屏幕上正确打印。但是如果我尝试动态设置标签的文本，它会失败。

这个俄语字符串“ВЫБЕРИТЕ БАЗОВЫЕ ЦВЕТА”也会发生同样的事情。我正在使用 Arial 字体。请帮忙。它与写为应用程序标签第一行的编码有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:52:56.337

您可以尝试通过代码使用它。例如：

```
<node>This is euro symbol &#8364;</node> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:21:16.137

您的 XML 文件必须在开头：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

此外，文件必须使用 utf-8 编码保存：
例如在 Notepad++ 工具栏中编码 -> 以 UTF-8 编码

也适用于多语言应用程序您可以使用 flex 本地化
查看： http:
[//www.adobe.com/ devnet/flex/articles/flex_localization_pt1.html](http://www.adobe.com/devnet/flex/articles/flex_localization_pt1.html)

# windows - 通过“密钥”识别进程

> ID：16098521
> 
> 赞同：0
> 
> 时间：2013-04-19T06:25:55.320
> 
> 标签：windows, process

是否可以通过密钥识别进程？

例如，假设服务器进程 1 启动 Chrome Web App 进程 1（Chrome Web 应用程序是它们自己的进程）。现在假设我启动服务器进程 2。我已经可以检测到服务器进程 1 是否正在运行（实际上，由于需要我捕获的共享资源，这会导致异常）。所以我要终止服务器进程 2，除了首先我想检查 Chrome Web 应用程序进程 1 是否仍在运行，因为如果是，我不想打开一个新实例，而是带上旧实例实例到前面。

假设我可以将键“com.myuniqueurl”与 Chrome Web 应用程序进程 1 相关联。那么当服务器进程 2 启动时，使用键“com.myuniqueurl”搜索任何进程就很容易了。这可能吗？

部分困难在于，除了 Chrome Web App Process 1 之外，Chrome 的普通实例可能正在运行（来自同一个 .exe 文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T07:59:06.010

不幸的是，我认为如果没有讨厌的黑客攻击，比如使用 CreateRemoteThread 从 Chrome 进程中运行某些东西，这是不可能的。

但在您的情况下，您可能能够枚举进程，通过命令行识别 Chrome Web App Process 1 并将其置于最前面。

# qt - QTableView 中的“手动”多选和部分隐藏的网格

> ID：16098522
> 
> 赞同：0
> 
> 时间：2013-04-19T06:26:10.007
> 
> 标签：qt, qtableview

我知道关于多选的话题至少出现过一次，但老实说既找不到它，也不记得它有和体面的解决方案。

我建议讨论两个问题：

1) 创建类似于 MS Excel 单元格选择的行为。因此，用户单击 QTableView 中的一个单元格并突出显示单击的单元格，并且在另外几个“依赖”单元格中更改外观（被选中或以任何方式突出显示）。在 Excel 中，它被广泛用于显示单元格公式依赖性。

我知道有几种方法可以解决它。最简单的一个是在任何适当的信号处理程序（例如 QAbastractModelView clicked()）中使用依赖单元格修改视图选择。这种方式可以完成工作，但有丑陋的副作用，因为在重绘选定单元格后传递的信号发生，因此在第一个单元格产生闪烁之后绘制相关选择。

第二种方法是委托方式。这也有一些问题，因为您只为选定的单元格获取paintEvent，因此您对“依赖”单元格无能为力。实际上我能够通过这种方式解决它，通过点击点击，修改选择并使用完全自定义的委托，一旦形成完整的选择就会绘制所有内容，所以实际上它跳过了第一次重绘，但我还是不完全满意结果虽然在视觉上看起来完全正确..主要是因为整体 TableView 响应时间减少了很多。原因是 Qt 在收到鼠标点击后立即绘制原生选择，然后再向用户类发送任何信号，并且在这种方法的情况下，委托中的paintEvent 在几个主循环之后到达。所以在使用 ' 的情况下会有明显的延迟

我已经开始认为最好的选择可以完全覆盖大部分 QTableView 以添加对此类选择模式的支持，但可能有更直接的方法吗？

2）第二个问题（我把它们放在一起是因为有一些共同的问题）。假设您有一个按月表示财务信息的网格，并且在一个月内有几列信息，因此 N 列的块重复 M 次。使此类网格更具可读性的明显方法是对每个月的第一个数据列的网格中的垂直线使用不同的样式。假设让它们宽 1-2 个像素。

由于您无法指定每个单元格的网格样式，我所做的是 setGrid(false) 然后将我自己的网格线绘制为委托中的单元格内容。

但是后来我从第 1 点开始遇到了一个问题。然后你指示 Qt 在某个单元格上使用委托，然后委托将获得一个paintEvent Qt 清除单元格的背景。在隐藏网格的情况下，Qt 清除的背景矩形比所需的大一个像素。可能它可以被认为是一个 Qt 错误，因为它们不尊重网格可见性，但这会导致删除相邻单元格中的网格线，因此您不仅必须在委托中绘制单元格自己的网格，还要重新计算正确的单元格矩形，检查是否Qt 犯了一个错误（通过分析 QPainter rect），确定从相邻单元格中删除的内容是否需要恢复并重新绘制。这导致了非常复杂的委托逻辑，我不能认为它是一个不错的解决方案。

所以问题 2 可以改写为我们知道在 QTableView 中为每个单元格设置网格的一种体面的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:59:44.063

OMG，这么多字，你能挑出最重要的信息吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:07:42.563

我会做这样的事情：

创建一个委托。子类`QAbstractTableModel`和重新实现`data`方法。您的实现应该返回单元格文本，但如果是用户定义的角色之一（如字体或颜色或任何单元格文本。您可以使用上面的任何角色编号）`Qt::DisplayRole`，也可以返回您想要的任何内容。您的模型应该发出信号以通知内容已更改并应重绘。`role``Qt::UserRole``dataChanged``QTableView`

然后在委托中，您只需使用重载请求此数据`QAbstractTableModel::data`并按照您想要的方式绘制它。

# jquery - 无需重新加载即可在 ajax 成功功能上观察到淘汰赛更新

> ID：16098523
> 
> 赞同：0
> 
> 时间：2013-04-19T06:26:15.653
> 
> 标签：jquery, asp.net-mvc, knockout.js, knockout-mvc

我在我的 MVC 4Application 中使用敲除来进行视图模型绑定。我需要在 Ajax 成功函数上更新我的视图模型字段，而无需重新加载整个视图模型。我正在使用以下代码来更新视图模型字段。但问题是，在更新每个视图模型字段值时，会重新加载整个视图模型，最终导致调用 updateHiddenElements 方法的循环请求。

这是我的视图模型

```
function ViewModel(data) {

      var self = this;
      self.Fields = ko.observableArray(ko.utils.arrayMap(data, function(item) {
        return new FormField(item);
      }));
      self.HiddenElements = ko.observableArray([]);
      self.dirtyFlag = new ko.dirtyFlag(self, false);
      self.applyUpdates = ko.computed(function () {

      if (self.dirtyFlag.isDirty()) {
          //alert("YES !!!");
           updateHiddenElements(self);
           setTimeout(function() {
           self.dirtyFlag.reset();
           }, 0);
       }
     });
}; 
```

这是我的更新方法，

```
var updateHiddenElements = function (viewModel) {
 //alert("Posting Data:\n\n"+ko.toJSON(viewModel));
 //console.log("#### SENDING AJAX REQUEST TO FETCH LIST OF ELEMENTS TO BLANKOUT ####\n");
   $.ajax({
             type: "POST",
             url: '@Url.Action("GetBlankoutElements", "Offer")' +  "?OfferID=" + @Model.ID,
             contentType: 'application/json; charset=utf-8',
             dataType: 'json',
             data: ko.toJSON(viewModel),
             success: function(result) {
               result.split(',').forEach(function(name) {
               var param = ko.utils.arrayFirst(viewModel.Fields(),  function(currentParam)
               {
                    return currentParam.Name() == name;
               });
               if (param) {
                            param.Value(param.Default());
                           }
              });
              viewModel.HiddenElements(result.split(','));
             }
          });
 }; 
```

有人可以建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:06:51.597

我看不到如何完全重新加载整个视图模型。但我不明白为什么 updateHiddenElements 函数没有直接在视图模型内部实现。在我看来，这似乎更合乎逻辑，我认为它可能会解决您的问题。“成功”功能不只是直接在视图模型上工作，您不必传递整个视图模型。

```
function ViewModel(data) {
    ...
    updateHiddenElements = function () {
         $.ajax({
           type: "POST",
           url: '@Url.Action("GetBlankoutElements", "Offer")' +  "?OfferID=" + @Model.ID,
           contentType: 'application/json; charset=utf-8',
           dataType: 'json',
           data: ko.toJSON(self),
           success: function(result) {
             result.split(',').forEach(function(name) {
             var param = ko.utils.arrayFirst(self.Fields(),  function(currentParam)
                           self.HiddenElements(result.split(','));
             }
             ...
           });
       });
} 
```

# zend-framework2 - 在zend2中动态设置SELECT属性

> ID：16098524
> 
> 赞同：0
> 
> 时间：2013-04-19T06:26:16.023
> 
> 标签：zend-framework2

我实际上在做的是，从数据库中获取公司列表并将其传递给表单 SELECT 元素。所以我创建了一个模型文件，它返回一个数组

```
//=== return an array of $ID => $name of companies to use in dropdown in reports form
public function getTotalResult($table, $type, $id) {
        $this->table = $table;
        $select = new Select();
        $spec = new  Where();
        $spec->equalTo('status', 1);
        if ($type == 'name') {
            $spec->equalTo('id', $id);
        }
        $select->from($this->table);

        $select->where($spec);
        $resultSet = $this->selectWith($select);
        //$resultSet->buffer();
        return $resultSet;

}
public function resultList($table){
    $results = $this->getTotalResult($table, '', '');
    foreach ($results as $result) {
        $this->id[] = $result->id;
        $this->name[] = $result->name;
    }
    $result = array_combine($this->id, $this->name);
    return $result;

} 
```

然后我在我的控制器中对此进行了测试，它返回了我想要的结果：

```
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use SpangelLogin\Model\Register;          // <-- Add this import
use SpangelLogin\Model\companyList;          // <-- Add this import
class RegisterController extends AbstractActionController
{
protected $registerTable;
protected $companyList;

 public function getcompanyList()
{
    if (!$this->companyList) {
        $sm = $this->getServiceLocator();
        $this->companyList = $sm->get('SpangelLogin\Model\companyList');
    }
    return $this->companyList;
}

public function indexAction()
{
    //== get list of companies
    $company_table = 'rs_company';
    $sector_table = 'rs_sector';
    $companiesList = $this->getcompanyList()->getName($company_table, 2);

 }
} 
```

所以现在我想在我的表单的 Select Element 中传递这个 CompaniesList 数组。我怎样才能做到这一点。这是我使用 select 的表单。

```
use Zend\Form\Form; 
```

使用 Zend\Form\Element；

类 SectorReportForm 扩展表单 {

```
public function __construct($name = null)
{
    // we want to ignore the name passed
    parent::__construct('sectorreport');
    $companiesArray =  $this->companiesList();
    $sectorsArray =  $this->sectorsList();

    $this->setAttribute('method', 'post');
    $this->setAttribute('enctype','multipart/form-data');

    $this->add(array(     
        'type' => 'Zend\Form\Element\Select',       
        'name' => 'company',
        'attributes' =>  array(
            'id' => 'company',  
            'multiple' => true,               
            'options' => $companiesArray,
        ),
        'options' => array(
            'label' => 'Company',
        ),
    ));  

    $this->add(array(
        'name' => 'submit',
        'attributes' => array(
            'type'  => 'submit',
            'value' => 'Upload',
            'id' => 'submitbutton',
            'class' => 'button violet right'
        ),
    ));
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:29:15.980

从设计的角度来看，最好的方法是通过依赖注入来处理这个问题。那个鬼鬼祟祟的小流行语让人们如此困惑，但实际上只不过是在对象之间转发数据：P

可以在以下答案以及我的博客文章中看到表单的一般依赖注入

*   [如何从不同的模型中获取数据以供选择？](https://stackoverflow.com/questions/16022300/how-to-get-data-from-different-model-for-select#answer-16022672)
*   [**`Zend\Form\Element\Select`和数据库值**](http://samminds.com/2013/03/zendformelementselect-and-database-values/)

如果您不想采用这种方法，也可以在 Controller 级别进行处理。

```
$form   = new My\Form();
$select = $form->get('selectCountries');

$model    = new My\Countries();
$listData = $model->getCountriesAsArray();

$select->setValueOptions($listData); 
```

我仍然建议您采用不同的方法 ;) 保持控制器更干净，这总是一件好事。分离关注！

# sed - 用于不区分大小写的 awk 搜索命令

> ID：16098529
> 
> 赞同：0
> 
> 时间：2013-04-19T06:26:40.213
> 
> 标签：sed, awk, grep, cut

我有以下 awk commmand..我想让“问题固定”不区分大小写，任何人都可以提供有关如何完成此操作的输入，我查看了[http://www.unix.com/shell-programming- scripting/20196-case-insensitive-serach-awk.html](http://www.unix.com/shell-programming-scripting/20196-case-insensitive-serach-awk.html)但这似乎对我不起作用

```
awk '/link|issue-Fixed:/{print $2}' foo.txt | sed 'N; y/\n/ /' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:45:16.800

这可能对您有用：

```
awk '/link|[Ii][Ss][Ss][Uu][Ee]-[Ff][Ii][Xx][Ee][Dd]:/{print $2}' foo.txt | sed 'N; y/\n/ /' 
```

# java - 在连接到数据库之前，如何在运行时获取数据库密码

> ID：16098530
> 
> 赞同：4
> 
> 时间：2013-04-19T06:26:45.840
> 
> 标签：java

在我的 applicationcontext.xml 我有这个：

```
 <bean id="dataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver" />
    <property name="url" value="jdbc:mysql://localhost:3306/dashboardsupervisor" />
    <property name="username" value="root" />
    <property name="password" value="1234" />
</bean> 
```

在这里，我正在连接我的数据库：

```
 ApplicationContext ctx = new ClassPathXmlApplicationContext(
        "applicationContext.xml");
        MySQLRdbHelper rdbHelper = (MySQLRdbHelper)  
                    ctx.getBean("ManagerSupervisor"); 
```

想要的是不要从我的 applicationcontext.xml 中读取密码“1234”，而是从我本地驱动器中的某些属性文件中读取它。因为这将在不同的机器上运行，并且每台机器都有不同的密码。

我能做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:30:51.260

是的，你可以，关键是 Springs `PropertyPlaceholderConfigurer`。

例如，您在文件系统上创建一个名为 的文件`database.properties`，其中包含您的密码（请注意，您还可以向该文件添加更多设置，例如用户名、JDBC url 等）。

```
jdbc.password=1234 
```

接下来，您需要声明一个`PropertyPlaceholderConfigurer`bean 并将其指向`database.properties`文件：

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>path/to/database.properties</value>
    </property>
</bean> 
```

请注意，路径被解释为*类路径资源*，除非它带有前缀`file:`。

最后，*替换*`dataSource`你的bean的配置：replace

```
<property name="password" value="1234" /> 
```

和

```
<property name="password" value="${jdbc.password}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:39:24.467

您可以使用配置文件：

```
 GenericXmlApplicationContext ctx = new GenericXmlApplicationContext();
 ctx.getEnvironment().setActiveProfiles("dev1");
 ctx.load("*Context.xml");
 ctx.refresh();

 <bean id="database1" profile="dev1"/>
 <bean id="database2" profile="dev2"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:54:48.857

最好的方法是在应用服务器中创建数据源并在 application.xml 中进行如下配置

```
 <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
     <property name="jndiName"><value>YourDSName</value></property>
  </bean>

  <bean id="sessionFactory"
    class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
      .....
   </bean> 
```

# c# - 使用循环数组接收字符串输入

> ID：16098536
> 
> 赞同：1
> 
> 时间：2013-04-19T06:27:10.607
> 
> 标签：c#

我正在寻找一种方法来将用户输入的值分配给我拥有的变量，但要使用循环来获取该条目并将其定位在屏幕上。有没有办法做到这一点？

下面是我的非工作代码，但希望它可以提供我想要实现的目标。

```
public void StudentDetailInput()
    {
        const int startpoint = 2;
        string[] takeinput = new string[] {FirstName, Surname, MiddleName, StudentId, Subject, AddressLine1, AddressLine2, Town, Postcode, Telephone, Email };

        for (int x = 0; x < takeinput.Length; x++)
        {
            Console.SetCursorPosition(30, startpoint + x);
            [x] = Console.ReadLine();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:14:12.180

您可能想使用字典：

```
private Dictionary<string, string> _answers = new Dictionary<string, string>();

public void StudentDetailInput()
{
    string[] takeinput = new string[] { 
        "FirstName", 
        "Surname",
        "MiddleName",
        "StudentId",
        "Subject",
        "AddressLine1", 
        "AddressLine2",
        "Town", 
        "Postcode", 
        "Telephone",
        "Email" 
    };

    _answers.Clear();
    for (int x = 0; x < takeinput.Length; x++)
    {
        Console.Write(takeinput[x] + ": ");
        var answer = Console.ReadLine();
        _answers.Add(takeinput[x], answer);

    }
} 
```

所以你可以像这样显示答案：

```
for(var i = 0; i < _answers.Count; i++)
{
    Console.WriteLine("{0}: {1}", _answers.Keys[i], _answers.Values[i]);
} 
```

如果您担心您不想在控制台上使用这么多行，您可以跟踪答案的长度并尝试将光标放在到目前为止的答案后面。这样做的问题是您需要考虑屏幕的宽度（可以由用户调整）来计算正确的行和位置。

这种结构的另一个问题是用户会期望光标向下移动一行（这就是 enter 所做的），因此用户体验可能会受到影响。

另一种方法是在每次输入后清除屏幕，从控制台的第 2 行开始显示到目前为止的所有答案，并将下一个问题放在第 1 行：

```
for (int x = 0; x < takeinput.Length; x++)
{
    Console.Clear();
    for(y = 0; y < x; y++)
    {
        Console.SetCursorPosition(0, y + 1);
        Console.WriteLine("{0}: {1}", _answers.Keys[y], _answers.Values[y]);
    }
    Console.SetCursorPosition(0, 0);
    Console.Write(takeinput[x] + ": ");
    var answer = Console.ReadLine();
    _answers.Add(takeinput[x], answer);
} 
```

当问题的数量多于控制台上的行数时，这可能会出错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:29:30.523

您的字符串数组定义不清楚，但我认为您正在寻找这样的东西：

```
public void StudentDetailInput()
{
    const int startpoint = 2;
    string[] takeinput = new string[11];

    for (int x = 0; x < takeinput.Length; x++)
    {
        Console.SetCursorPosition(30, startpoint + x);
        takeinput[x] = Console.ReadLine();
    }
} 
```

现在

```
// FirstName = takeinput[0]
// Surname   = takeinput[1]
// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:34:20.660

这条线是错误的。

```
[x] = Console.ReadLine(); 
```

如果你想分配给你的数组元素，你用`ReadLine()`方法读取的内容，你应该使用

```
takeinput[x] = Console.ReadLine(); 
```

如果您只想分配计数器所读取的内容，则应使用；

```
x = Convert.Int32(Console.ReadLine()); 
```

***编辑***：如果我清楚地理解您的问题，您只想这样做；

```
List<string> list = new List<string>();
string input = "";

do
{
   input = Console.ReadLine();
   list.Add(input);
}
while (input != "exit");
list.Remove("exit");

foreach (var item in list)
{
   Console.WriteLine(item);
} 
```

# git - 如果我们删除服务器上的一个分支，我们可以在我们的本地副本中自动删除它吗？

> ID：16098537
> 
> 赞同：5
> 
> 时间：2013-04-19T06:27:17.453
> 
> 标签：git, github, branch

通常，当我在 github 上发送 Pull Requests 时，我会创建一个分支，进行更改，然后要求他们将该分支合并到他们的 repo 中。

完成后，在 Github 上，我删除了分支（但 github 只是隐藏了它）。然后我永久删除了 Github 站点上的分支。

现在远程分支已经消失了，我如何将本地仓库与远程同步？我试过获取和拉取，但这并没有删除我本地仓库中的分支。

我是否必须从我的仓库中手动删除它们，或者有什么方法可以同步它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:35:14.680

您可以尝试：

```
git remote prune origin 
```

（假设远程“来源”引用了您的 GitHub 存储库）

这在“[清理旧的远程 git 分支](https://stackoverflow.com/questions/3184555/cleaning-up-old-remote-git-branches/3184742#3184742)”（`git branch -d localbranch`）中进行了解释

我不知道可以同时执行这两种操作的本机 git 命令。
只有像“ [**`git_remote_branch`**](https://github.com/webmat/git_remote_branch)”这样的脚本会删除 GitHub 和本地的分支

删除（别名：销毁、杀死、删除、rm）

> 删除远程分支，然后删除本地分支。
> 如果有挂起的更改，则不会删除本地分支。

```
$ grb delete branch_name [origin_server] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:59:16.500

清除（在本地）服务器上已删除分支的另一个选项可能是

**git 获取 –p**

希望这可以帮助。

# android - 带边框的透明圆圈

> ID：16098538
> 
> 赞同：92
> 
> 时间：2013-04-19T06:27:19.517
> 
> 标签：android, xml, geometry, transparent

我正在尝试在android中使用XML创建一个只有边框的圆圈：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="oval" >

<stroke android:width="1dp"
    android:color="#000000"/>

</shape> 
```

我使用的代码发布在上面。但是，我得到一个实心磁盘而不是一个环。我想只使用 XML 而不是画布来获取输出。我究竟做错了什么？

谢谢。

**编辑：** 多亏了下面的答案，它才能工作。这是我的最终代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:innerRadius="0dp"
    android:shape="ring"
    android:thicknessRatio="1.9"
    android:useLevel="false" >

    <solid android:color="@android:color/transparent" />

    <size android:width="100dp"
     android:height="100dp"/>

    <stroke android:width="1dp"
    android:color="#FFFFFF"/>

</shape> 
```

* * *

## 回答 #1

> 赞同：195
> 
> 时间：2013-04-19T06:30:20.327

尝试这样的事情

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:innerRadius="0dp"
    android:shape="ring"
    android:thicknessRatio="2"
    android:useLevel="false" >
    <solid android:color="@android:color/transparent" />

    <stroke
        android:width="2dp"
        android:color="@android:color/darker_gray" />
</shape> 
```

更新：制作`android:thicknessRatio="2"`完整的圆圈（使用 Nexus 5 - Lollipop）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-07-07T14:59:22.990

使用它会起作用

```
<?xml version="1.0" encoding="utf-8"?>  
     <shape xmlns:android="http://schemas.android.com/apk/res/android"                                                                                                                                                     
   android:shape="oval" >

<gradient
    android:centerX=".6"
    android:centerY=".40"
    android:endColor="@android:color/transparent"
    android:gradientRadius="20"
    android:startColor="@android:color/transparent"
    android:type="radial" />

<stroke
    android:width="1dp"
    android:color="#FFFFFF" />

<size
    android:height="100dp"
    android:width="100dp" />

</shape> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-07-09T16:11:24.243

空洞的

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"
        android:shape="oval">
        <stroke
            android:width="1dp"
            android:color="@color/indicator_unselected" />
    </shape> 
```

满的

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <corners android:radius="100dp" />
    <solid android:color="@android:color/white" />
</shape> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-02-19T10:37:05.137

可以实现描边效果，用所需颜色的描边绘制一个透明的椭圆（示例中为#000）：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <solid android:color="@android:color/transparent" />
    <stroke
        android:width="1dp"
        android:color="#000" />
    <size
        android:width="40dp"
        android:height="40dp" />
</shape> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-06T11:59:38.157

如果你可以使用 Vector drawables 试试这个

```
<vector android:height="24dp" android:viewportHeight="512.0"
    android:viewportWidth="512.0" android:width="24dp" xmlns:android="http://schemas.android.com/apk/res/android">
    <path android:fillColor="#FFFFFF" android:fillType="evenOdd"
        android:pathData="M0,0L512,0L512,512L0,512L0,0ZM256,511C396.8,511 511,396.8 511,256C511,115.2 396.8,1 256,1C115.2,1 1,115.2 1,256C1,396.8 115.2,511 256,511Z"
        android:strokeColor="#00000000" android:strokeWidth="1"/>
</vector> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-19T06:43:14.870

您可以将 android 内置值用于透明 as`@android:color/transparent`或使用`#0000`或`#00000000`

上面从 4 位开始是 alpha，在 8 位值中，前两位与 alpha 相同。

当您只给出 3 位或 6 位颜色时，默认 alpha 值是 ff 您通过传入 4 位或 8 位值设置该颜色值的 alpha

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-08-07T17:48:43.787

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="oval" >

        <gradient
            android:endColor="@android:color/transparent"
            android:gradientRadius="20"
            android:startColor="@android:color/transparent" />

        <stroke
            android:width="1dp"
            android:color="#d9d9d9" />

        <size
            android:height="100dp"
            android:width="100dp" />
        </shape>
    </item>

    <item
        android:bottom="1dp"
        android:left="1dp"
        android:right="1dp"
        android:top="1dp">
        <shape android:shape="oval" >

            <gradient
                android:endColor="@android:color/transparent"
                android:gradientRadius="20"
                android:startColor="@android:color/transparent" />

            <stroke
                android:width="1dp"
                android:color="#b3b3b3" />

            <size
                android:height="100dp"
                android:width="100dp" />
        </shape>
    </item>
</layer-list> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-04-19T10:51:07.940

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="oval" >

            <stroke
                android:width="4dp"
                android:color="@color/colorPrimaryDark" />
            <corners android:radius="0dp" />
        </shape>
    </item>
    <item
        android:top="1dp"
        android:bottom="1dp"
        android:left="1dp"
        android:right="1dp">

        <shape android:shape="oval">
            <solid android:color="@color/colorRed" />
            <size android:height="@dimen/_100sdp"
                android:width="@dimen/_100sdp"></size>
        </shape>

    </item>

</layer-list> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-19T10:49:16.290

如果将颜色设置为`#00000000`，结果将是透明的。如果你想在未来的发展中改变它，你会想这样做。例如，如果您希望它是红色且部分透明，则`#ff000088`最后两个数字是不透明度。我这样做是为了使将来的更改更容易。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-06-30T10:25:45.770

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
     android:innerRadiusRatio="2"
     android:shape="ring"
     android:thicknessRatio="1"
     android:useLevel="false">

    <gradient
        android:type="radial"
        android:gradientRadius="8dp"
        android:endColor="@color/colorDarkPurple"
        android:elevation="5dp"
    />

    <stroke
        android:width="2dp"
        android:color="@color/colorLilac"/>
</shape> 
```

# .net - WPF CustomControl 将数据模板传递到列表框不起作用

> ID：16098542
> 
> 赞同：0
> 
> 时间：2013-04-19T06:27:30.503
> 
> 标签：.net, wpf, custom-controls, datatemplate, dependency-properties

我正在学习自定义控件，并以 autoCompleteTextBox 为例。我正在为 WPF 项目（v 4.5 和 vb.net 4.5）创建自定义控件，它使用文本框基类。然后，我向控件添加了一个弹出窗口、列表框和按钮。我在列表框的数据模板的自定义控件中有一个依赖属性，但我无法将数据模板 pssed 到列表框。

这是数据模板的依赖属性：

```
#Region "DEPENDENCY PROPERTIES -- ItemTemplate"
    Public Property ItemTemplate As DataTemplate
        Get
            Return GetValue(ItemTemplateProperty)
        End Get
        Set(ByVal value As DataTemplate)
            SetValue(ItemTemplateProperty, value)
        End Set
    End Property
    Public Shared ReadOnly ItemTemplateProperty As DependencyProperty = DependencyProperty.Register( _
                        "ItemTemplate", GetType(DataTemplate), GetType(AutoCompleteTextBox), _
                        New FrameworkPropertyMetadata(Nothing, FrameworkPropertyMetadataOptions.None, _
                        New PropertyChangedCallback(AddressOf OnItemTemplateChanged)))

    Shared Sub OnItemTemplateChanged(d As DependencyObject, e As DependencyPropertyChangedEventArgs)
        Dim actb As AutoCompleteTextBox = TryCast(d, AutoCompleteTextBox)
         If actb IsNot Nothing Then
            Dim TempTemplate As DataTemplate = TryCast(e.NewValue, DataTemplate)
            If TempTemplate IsNot Nothing Then
                actb.ItemTemplate = TempTemplate
            End If
        End If
     End Sub
#End Region 
```

这是我用于声明用户控件的小文本的 xaml：

```
<Window x:Class="MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:krisis="clr-namespace:Krisis.Controls;assembly=Krisis.Controls"
    Title="MainWindow" Height="350" Width="525" x:Name="MyWindow"
    DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Window.Resources>
        <DataTemplate x:Key="CollectionTemplate">
            <Border BorderBrush="Green" BorderThickness="2" CornerRadius="5" Padding="5,5,5,2">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="OBJECT:  "/>
                    <TextBlock Grid.Column="1" Text="{Binding Name}"/>
                    <TextBlock Grid.Row="1" Text="{Binding id}"/>
                    <TextBlock Grid.Column="1" Grid.Row="1" Text="{Binding Job}"/>
                </Grid>
            </Border>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <krisis:AutoCompleteTextBox ItemsSource="{Binding Collection}" 
                                    ItemTemplate="{StaticResource CollectionTemplate}" 
                                    MaxmimumMatches="15" 
                                    MinimumFilterCharacters="1" 
                                    DisplayPath="Name"
                                    Width="497" MinHeight="35" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center" Margin="10,41,10,243" />
    </Grid>
</Window> 
```

**我的问题：**当我使用它来声明我的 itemtemplate 时，它​​没有被应用。列表框只显示列表框中每个对象的对象类型名称，而不是任何对象属性值。

有人可以帮我使用依赖属性来传递自定义控件内列表框的 DataTemplate。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:00:45.477

okay, I chnaged where i assign the itemtemplate to the following and it now works:

```
#Region "APPLY TEMPLATE"
    Public Overrides Sub OnApplyTemplate()
        MyBase.OnApplyTemplate()

        '' if template is not nothing then initialize controls and wire up the event handlers
        If Me.Template IsNot Nothing Then

            InitializeListbox()
            If ResultsListBox IsNot Nothing Then
                OnItemSourceChanged(ItemsSource)
                AddHandler ResultsListBox.KeyDown, AddressOf ResultListBox_KeyDown
                AddHandler ResultsListBox.SelectionChanged, AddressOf ResultListBox_SelectionChanged
                ResultsListBox.ItemTemplate = ItemTemplate
                ResultsListBox.ItemsSource = ItemsSource
            End If
        End If
    End Sub
#End Region 
```

# c# - Web 服务返回 SOAP 但属性为空

> ID：16098544
> 
> 赞同：0
> 
> 时间：2013-04-19T06:27:33.793
> 
> 标签：c#, wcf, web-services, wsdl

我创建了一个 Web 服务客户端，编译了一个 WSDL，除了调用 Logon 方法后的空属性（ResponseCode 等为空）外，一切正常。

我有一条响应 SOAP 消息：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:sas="http://ws.test.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <sas:LogonResponse>
         <SessionID>19790</SessionID>
         <ResponseCode>0</ResponseCode>
         <ResponseMessage>Logon OK</ResponseMessage>
      </sas:LogonResponse>
   </soapenv:Body>
</soapenv:Envelope> 
```

此方法的 WSDL 部分如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:http="http://schemas.xmlsoap.org/wsdl/http/" xmlns:sas="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:mime="http://schemas.xmlsoap.org/wsdl/mime/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tns="http://ws.test.com/" xmlns:ns="http://ws.test.com/" targetNamespace="http://ws.test.com/">
    <wsdl:types>
        <sas:schema xmlns:sas="http://www.w3.org/2001/XMLSchema" targetNamespace="http://ws.test.com/" elementFormDefault="qualified">
            <sas:element name="Logon">
                <sas:complexType>
                    <sas:sequence>
                        <sas:element name="Username" type="sas:string" nillable="false"/>
                        <sas:element name="Password" type="sas:string" nillable="false"/>
                    </sas:sequence>
                </sas:complexType>
            </sas:element>
            <sas:element name="LogonResponse">
                <sas:complexType>
                    <sas:sequence>
                        <sas:element name="SessionID" type="sas:long" nillable="false"/>
                        <sas:element name="ResponseCode" type="sas:integer" nillable="false"/>
                        <sas:element name="ResponseMessage" type="sas:string" nillable="false"/>
                    </sas:sequence>
                </sas:complexType>
            </sas:element>
        </sas:schema>
    </wsdl:types>

    <wsdl:message name="LogonRequest">
        <wsdl:part name="Logon" element="tns:Logon"/>
    </wsdl:message>
    <wsdl:message name="LogonResponse">
        <wsdl:part name="LogonResponse" element="tns:LogonResponse"/>
    </wsdl:message>

    <wsdl:portType name="rrrwebservice">
        <wsdl:operation name="Logon">
            <wsdl:input message="tns:LogonRequest"/>
            <wsdl:output message="tns:LogonResponse"/>
        </wsdl:operation>
    </wsdl:portType>

    <wsdl:binding name="mvcBinding" type="tns:rrrwebservice">
        <soap:binding style="document"
            transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="Logon">
            <soap:operation
                soapAction="http://ws.test.com/Logon" />
            <wsdl:input>
                <soap:body use="literal" />
            </wsdl:input>
            <wsdl:output>
                <soap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>

    <wsdl:service name="RRRWebService">
        <wsdl:port name="RRRWebService" binding="tns:mvcBinding">
            <soap:address location="http://172.6.2.14:8008/"/>
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

无法弄清楚问题所在。我通过在 Visual Studio 2008 中选择“添加服务参考”来编译它。任何意见和答案将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-11T00:12:09.687

半途而废的 MS 实现对格式非常挑剔。它需要像这里的 ns:tag 符号

```
 <?xml version="1.0" encoding="UTF-8"?>
    <soap:Envelope soap:encodingStyle="http://www.w3.org/2003/05/soap-encoding" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soapenc="http://www.w3.org/2003/05/soap-encoding" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
        <soap:Body>
            <ns2:SessionCreateResponse xmlns:ns2="http://www.otrs.org/TicketConnector/">
                <SessionID>3efVfYNzxB2z8wUKQRPeVYc7K9JddAlf</SessionID>
            </ns2:SessionCreateResponse>
        </soap:Body>
    </soap:Envelope> 
```

我收到了一个用 Perl 编写的名为 OTRS 的应用程序的响应。它创建了这样的响应：

```
 <soap:Envelope soap:encodingStyle="http://www.w3.org/2003/05/soap-encoding" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:soapenc="http://www.w3.org/2003/05/soap-encoding" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
       <soap:Body>
          <SessionCreateResponse xmlns="http://www.otrs.org/TicketConnector/">
             <SessionID>juFUKqABresNemTCYtPHFiLFWgjJ4QNj</SessionID>
          </SessionCreateResponse>
       </soap:Body>
    </soap:Envelope> 
```

MS不会有它。乱用 XmlSchemaForm.Unqualified/None 什么也不做。我不得不修改 Reference.cs 中的覆盖来重新格式化消息。

```
 protected override XmlReader GetReaderForMessage(SoapClientMessage message, int bufferSize)
    {
        var newStream = new MemoryStream();
        var orgStream = message.Stream;
        byte[] buf = new byte[bufferSize];
        orgStream.Read(buf, 0, bufferSize);
        string response = Encoding.UTF8.GetString(buf);            
        int pos = response.IndexOf("Response xmlns=");
        if (pos == -1)
        {
            pos = response.IndexOf("Response>");
            if (pos > -1)
                response = response.Insert(pos + 8, " xmlns=\"http://tempuri.org/\"");
        }
        if (pos > -1)
        {
            int pos2 = pos + 8;
            int pos3 = pos + 14;
            while (response[--pos-1] != '<') ;
            string tagName = response.Substring(pos, pos2 - pos);
            response = response.Insert(pos3, ":ns2").Insert(pos, "ns2:");
            int pos4 = response.IndexOf("</" + tagName) + 2;
            response = response.Insert(pos4, "ns2:");
        }
        StreamWriter sw = new StreamWriter(newStream, Encoding.UTF8);
        sw.WriteLine(response);
        sw.Flush();
        newStream.Position = 0;
        return new System.Xml.XmlTextReader(newStream);
    } 
```

# android - 如何在android中修改来电和去电屏幕视图

> ID：16098545
> 
> 赞同：10
> 
> 时间：2013-04-19T06:27:36.893
> 
> 标签：android, android-layout, popup, broadcastreceiver, telephonymanager

我想根据我的选择修改下面的屏幕。

我不知道如何访问此屏幕。

![在此处输入图像描述](https://i.stack.imgur.com/eAWtm.png)

我也需要修改这个屏幕

![在此处输入图像描述](https://i.stack.imgur.com/lFSoWl.jpg)

请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:38:01.580

您无法修改默认屏幕，但您可以启动您需要使用 BroadCastReceiver 来电的屏幕

这是在广播接收器中获取电话状态的链接

[http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html](http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T06:40:25.800

您必须为来电编写广播接收器，Pratiks 回答有教程。然后只需在默认屏幕上创建一个弹出窗口。您可以从广播接收器调用弹出类。希望你明白了：）

# ios - Adbmob House 广告创建部分空白

> ID：16098548
> 
> 赞同：0
> 
> 时间：2013-04-19T06:27:56.337
> 
> 标签：ios, xcode, sdk, admob

1.  基本上，我使用 admob 为我的新项目展示内部横幅和插页式广告。我在过去几周尝试过。但是，突然间，admob 房屋广告部分似乎已损坏。当我们进入横幅/插页式广告创建部分时，会出现一个空白页面，我们无法选择类型或创建任何广告。请参阅随附的屏幕截图。谁有同样的问题？？？ [http://i.stack.imgur.com/0PfLD.png](http://i.stack.imgur.com/0PfLD.png)

2.  现在，插页式广告在每台设备的每个广告中仅显示一次，因此如果我有 2 个自家广告，插页式广告仅在前 2 次应用启动时显示。第三次，admob 回复错误：库存中没有广告。

任何人都有解决方案吗？我们希望在用户每次打开应用程序时向他们展示最新的内部广告促销，这可以在我们的网站上轻松更改为新的促销。所以最后，我们很可能只有 1 个广告在库存中......

如果您有任何解决方案，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-20T21:48:51.463

第一点：刷新浏览器缓存或使用其他浏览器

# iphone - 如何从 nsmutableArray 中删除重复数据

> ID：16098550
> 
> 赞同：0
> 
> 时间：2013-04-19T06:28:07.320
> 
> 标签：iphone, ios, objective-c, ios5, ios6

嗨，我正在使用 Iphone 照片库。我使用 AssetFramework 从照片库中获取了所有照片。我在滚动视图中显示了这些照片并且完美显示并且图像计数假设为6。然后当我单击单个图像时，它将显示大图像。它也完成了。我的问题是“单击图像以将其显示为大时，计数为 12（双倍计数）。”

我使用下面的代码来获取图像：

```
 - (void)createScrollView
 {

@try
{
    NSLog(@"in create scrollview");

    //add views to scrolview
   // UIImageView *backgroundImgView;
    int x=5;
    int y=7;
    NSLog(@"assetsArray/count/createScrollview %d",assetsArray.count);
    for (int i=0;i<[assetsArray count];i++)
    {
        UIView *userView=[[UIView alloc] initWithFrame:CGRectMake(x, y, 70, 80)];
        userView.tag=i;
        UIImageView *backgroundImgView=[[UIImageView alloc] initWithFrame:CGRectMake(1, 1, 70, 70)];

        backgroundImgView.tag=1;

        // [backgroundImgView setImageWithURL:[NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF16BigEndianStringEncoding]] placeholderImage:[UIImage imageNamed:@"NoImage.png"]];

        //-------------Getting Images from AssetsLibrary ----------
        ALAssetsLibraryAssetForURLResultBlock resultblock = ^(ALAsset *myasset)
        {
            galleryObj=[[GalleryObject alloc]init];
            ALAssetRepresentation *rep = [myasset defaultRepresentation];
            CGImageRef iref = [rep fullResolutionImage];
            UIImage *assetsLibraryImage;
            if (iref)
            {
                assetsLibraryImage = [UIImage imageWithCGImage:iref scale:[rep scale] orientation:(UIImageOrientation)[rep orientation]];
                galleryObj.galleryImage=assetsLibraryImage;

            }
            else
            {
                assetsLibraryImage = [UIImage imageNamed:@"NoImage.png"];
            }
            //[set addObject:[NSString stringWithFormat:@"1"]];
            [uniqueSet addObject:galleryObj];
            NSLog(@"uniqueSet data is .....%@",uniqueSet); // Output (3,1,4,2,5) ... all objects

            [imagesArray addObject:galleryObj];
            NSLog(@"imagesArray/resultBlock count is %d array is %@....",imagesArray.count,imagesArray);

            backgroundImgView.image=assetsLibraryImage;
        };

        ALAsset *al_asset = [assetsArray objectAtIndex:i];
        //NSLog(@"al_asset is ......%@",al_asset);
        al_assetUrl=al_asset.defaultRepresentation.url;
        //NSLog(@"al_assetUrl is %@",al_assetUrl);

        ALAssetsLibraryAccessFailureBlock failureblock  = ^(NSError *myerror)
        {
            NSLog(@"ALAssetsLibraryAccessFailureBlock");
        };

        ALAssetsLibrary* assetslibrary = [[ALAssetsLibrary alloc] init];
        [assetslibrary assetForURL:al_assetUrl resultBlock:resultblock failureBlock:failureblock];

        //-------------Getting Images from AssetsLibrary ----------
        UIButton *userButton=[[UIButton alloc]initWithFrame:CGRectMake(1, 1, 70,70)];
        [userButton addTarget:self action:@selector(userImageClicked:) forControlEvents:UIControlEventTouchUpInside];
        userButton.tag=i;

                 [userView addSubview:backgroundImgView];
        [userView addSubview:userButton];

        [self.galleryScrollview addSubview:userView];

        x+=79;

        if ((i+1)%4==0)
        {
            //if added image is 4th image
            y+=80;
            x=5;
        }
       // [activity stopAnimating]; 

    }

    if (y+100>self.galleryScrollview.frame.size.height)
    {
        self.galleryScrollview.contentSize=CGSizeMake(320, y+100);
    }

    else
    {
        self.galleryScrollview.contentSize=CGSizeMake(320, self.galleryScrollview.frame.size.height+60);
    }
}
@catch (NSException *exception)
{
    NSLog(@"exception is %@",exception);
}

} 
```

请注意，我在上述方法中创建了按钮和操作是 userImageClicked。当我单击 userImageClicked 按钮时，数组计数是双倍的。

我不知道为什么会这样。我尝试使用 containsObject 方法删除重复项。但没有用。

在上述方法中，我将该对象保存`UIImage`并`objectclass`分配给`imagesArray`.

我也拿来`NSMutableSet`储值了，但也没有用。

请任何人都可以建议解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:33:51.430

这是删除重复数据的方式：

```
NSArray *copy = [mutableArray copy];
NSInteger index = [copy count] - 1;
for (id object in [copy reverseObjectEnumerator]) {
    if ([mutableArray indexOfObject:object inRange:NSMakeRange(0, index)] != NSNotFound) {
        [mutableArray removeObjectAtIndex:index];
    }
    index--;
} 
```

请相应地使用它...

更简单的方法：

```
NSMutableArray *unique = [NSMutableArray array];

for (id obj in originalArray) {
    if (![unique containsObject:obj]) {
        [unique addObject:obj];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T10:07:12.213

嗨谢谢大家的快速回复。3小时后，我解决了我的问题。我得到了完全相同的重复项，因此我使用下面的代码删除了重复项。我知道这不是好的代码。但它解决了我的问题。

```
if([imagesArray count]>0)
{
    int dupCount=[imagesArray count]/2;
    int imagesArrayCount=[imagesArray count];
    for(int i=dupCount;dupCount<imagesArrayCount;dupCount++)
    {
        [imagesArray removeObjectAtIndex:i];
    }

} 
```

我也发现为什么重复数据是？答案是我使用了块代码，它调用了两次。因此该数组包含双数据值。

谢谢大家。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T09:26:02.447

问题在于创建`galleryObj`. 您为每个图像创建一个新对象。因此，每个实例`galleryObj`都是唯一的。

无论你使用 NSSet 的 NSMutableArray 还是 NSWhatever，他们都不会知道*里面*的`galleryObj`对象是同一个 UIImage。

Apple 的文档[声明](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/ALAssetRepresentation_Class/Reference/Reference.html)`ALAssetRepresentation`它封装*了其中一种*表示形式。因此，如果您同时保存了 JGP 和 RAW 图片，您将获得同一张图片的两种*不同*表示。

在这种情况下，您必须忽略一种或另一种类型。我不建议将 RAW 图片与 JPG 图片进行比较 (;-))。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T06:45:09.137

如果上面是您添加图像的唯一方法，请`imagesArray`尝试检查您是否没有从任何地方调用它两次，否则检查是否`imagesArray`没有从其他任何地方更新。

如果您需要`createScrollView`多次调用此方法，请`imagesArray`单独编写添加图像的代码。

# jquery - 使用 jquery 选择器自动填充剑道框

> ID：16098553
> 
> 赞同：0
> 
> 时间：2013-04-19T06:28:26.130
> 
> 标签：jquery, kendo-ui

我的 HTML 中有多个如下标签。

```
<li data-code="ABC"
<li data-code="XYZ"
<li data-code="PQR" 
```

我需要将这三个值添加到剑道自动完成框中。

```
<input id='myKendobox'/> 
```

我使用下面的代码来获取列表。

```
var items = $("li").map(function () { return $(this).attr("data-code"); }).get(); 
```

我有两个问题：如何确保第四个空项目不在“项目”列表中？如何填充剑道自动完成框中的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:16:05.027

你的`li`项目没有关闭，你意识到了吗？

要填充自动完成，您可以执行以下操作：

给定输入 HTML（自动完成）：

```
<input id='myKendobox'/> 
```

和初始化如下：

```
var data = [];
var autocomplete = $("#myKendobox").kendoAutoComplete({
    dataSource: data
}).data("kendoAutoComplete"); 
```

当你想添加你做的元素时：

```
var items = $("li").map(function () { return $(this).attr("data-code"); }).get();
autocomplete.dataSource.data(items); 
```

如果要限制`<li>`jQuery 选择器找到的元素，可以将它们定义为：

```
<ul id="AutocompleteOptions">
    <li data-code="ABC"></li>
    <li data-code="XYZ"></li>
    <li data-code="PQR"></li>
</ul> 
```

然后将选择器更改为：

```
var items = $("li", "#AutocompleteOptions").map(function () { return $(this).attr("data-code"); }).get(); 
```

这将`<li>`找到的仅限于`#AutocompleteOptions`.

[在JSFiddle](http://jsfiddle.net/OnaBai/BhLEJ/)中运行的示例

# selenium - 无法使用 selenium ide 删除 cookie

> ID：16098556
> 
> 赞同：1
> 
> 时间：2013-04-19T06:28:30.883
> 
> 标签：selenium, selenium-ide

我无法`cookies`使用`selenium ide`. 我想在 我尝试`cookies`之前删除所有我的`test case execution`

```
<tr>
    <td>deleteCookie</td>
    <td>ASP.NET_SessionId</td>
    <td>path=, domain=192.168.14.22:92, recurse=true</td>
</tr> 
```

但它不工作。

我也试过这个

`deleteallvisible cookies`没运气。

请提出一些想法来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T07:58:42.673

无法删除 ASP.NET_SessionId cookie，因为它被标记为[HttpOnly](https://www.owasp.org/index.php/HTTPOnly)。

```
Set-Cookie:ASP.NET_SessionId=zecwj145rv2wkt45ekwangyq; path=/; HttpOnly 
```

根据[这篇文章](https://stackoverflow.com/questions/1085756/how-to-delete-session-cookie/1085792#1085792)，除了 HTTP 之外，无论如何都不能删除或修改 cookie。也[没有办法为此 cookie 关闭 HttpOnly](https://stackoverflow.com/questions/2247143/how-is-httponly-get-set-for-asp-net-sessionid-cookie/2247221#2247221)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T08:25:46.287

使用此代码通过 selenium ide 删除 cookie，它适用于此处![图片](https://i.stack.imgur.com/9xLsJ.jpg)
设置基本 url 为[https://www.google.co.in](https://www.google.co.in)

```
 <tr>
    <td>open</td>
    <td>/</td>
    <td></td>
 </tr>
 <tr>
    <td>deleteAllVisibleCookies</td>
     <td>PREF</td>
     <td>domain=.google.co.in, recurse=true</td>
 </tr>
 <tr>
    <td>deleteAllVisibleCookies</td>
    <td>NID</td>
    <td>domain=.google.co.in, recurse=true</td>
 </tr> 
```

# javascript - 将 DIV 拖放到单元格内的任何位置

> ID：16098560
> 
> 赞同：0
> 
> 时间：2013-04-19T06:29:07.947
> 
> 标签：javascript, jquery, html, drag-and-drop

我正在使用[REDIPS Drag and Drop JQuery PlugIN](http://www.redips.net/javascript/drag-and-drop-table-content/ "可选标题")，它允许我创建可拖放到已定义表及其单元格的可拖动内容。但是，我需要进行一些更改，以允许我将元素放在单元格中的任何位置，而不是默认将其放置在末尾或开头。

所以我仍然需要它“将内容捕捉到网格”的功能，但我需要它在被删除的单元格中具有任何“左边距”。一旦 div 被放到一个单元格中，我希望它得到它的左边距或从父单元格偏移。

**[链接到小提琴](http://jsfiddle.net/ianfc89/JDff9/6/)**

```
var marginLeftAfterDrop = $("#" + divID).position.left; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:43:20.627

我可以看到您正在使用 REDIPS 来实现可拖动功能，但我强烈建议您使用 Jquery 通过此 [链接](http://jqueryui.com/draggable/#snap-to)制作的插件。

它是高度可定制的，可根据您的需要进行扩展。此外，它得到了社区的高度支持，许多开发人员都在使用它。

# php - PHP 简单的 HTML DOM 不完整的回显

> ID：16098568
> 
> 赞同：1
> 
> 时间：2013-04-19T06:29:38.197
> 
> 标签：php, simple-html-dom

所以，我试图在 PHP Simple HTML DOM 中为我正在处理的项目回显一个页面，它似乎跳过了大部分页面。我在这上面花了大约 6 个小时并且被卡住了，所以我正在寻求帮助。

再简单不过了

```
 <?php 
    ini_set('memory_limit', '-1');
    include('simple_html_dom.php');                                             //includes simpledomhtml
    echo file_get_html('http://steamcommunity.com/profiles/76561198049810642/games?tab=all')->plaintext; 
?> 
```

然而，输出完全缺少中间的所有文本，包括中间的游戏名称、时间、链接等。我认为这是页面的那部分在一个部分中的结果，但我认为 PHP Simple HTML DOM 能够解析这样的东西。自己试试，没意义。我尝试了无数的代码变体。请帮忙。

* * *

所以我认为你对纯文本输出是正确的，所以我没有将这篇文章移向我不需要的方向，而是用一个更集中的问题 [PHP 简单 HTML DOM 输出空白页来创建一个新主题](https://stackoverflow.com/questions/16109213/php-simple-html-dom-outputting-blank-page)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:59:25.077

使用该`->plaintext`方法，您将无法获取使用 javascript 动态生成的内容，因为它看起来在您正在加载的页面上。

只有

```
file_get_html('http://steamcommunity.com/profiles/76561198049810642/games?tab=all'); 
```

您应该看到该页面的副本？

然后开始处理您要保留的项目。

[http://simplehtmldom.sourceforge.net/manual.htm](http://simplehtmldom.sourceforge.net/manual.htm)

# python - 从这么多网页中获取抓取数据的最快方法是什么？

> ID：16098570
> 
> 赞同：0
> 
> 时间：2013-04-19T06:29:49.933
> 
> 标签：python, mysql, google-app-engine, google-cloud-datastore, web-scraping

我需要同时废弃大约 40 个随机网页。这些页面因每个请求而异。我在 python 中使用 rpcs 来获取 url 并使用 BeautifulSoup 抓取数据。报废所有数据并显示在屏幕上大约需要 25 秒。

为了提高速度，我将数据存储在 appengine 数据存储中，这样每个数据只被抓取一次，并且可以从那里快速访问。

但是问题是->随着数据存储中数据大小的增加，从数据存储中获取数据需要很长时间（比抓取更多）。

我应该使用 memcache 还是转移到 mysql？mysql 比 gae-datastore 快吗？或者有没有其他更好的方法来尽快获取数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T12:21:03.483

根据我对您的应用程序的了解，使用 memcache 是有意义的。它会更快，并且会自动处理诸如过期缓存条目之类的事情。

# c# - 如何在没有字符集的情况下使用 DataContractJsonSerializer 在 C# 中发送 JSON？

> ID：16098573
> 
> 赞同：4
> 
> 时间：2013-04-19T06:29:57.360
> 
> 标签：c#, datacontractjsonserializer

我使用`DataContractJsonSerializer`并将`StringContent`JSON 发送到 Web 服务：

```
DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(Employee));
MemoryStream ms = new MemoryStream();
serializer.WriteObject(ms, employee);
ms.Position = 0;
StreamReader sr = new StreamReader(ms);
StringContent jsonContent = new StringContent(sr.ReadToEnd(),
                               System.Text.Encoding.UTF8, "application/json");
// later I do HttpClient.PostAsync(uri, jsonContent) 
```

这将产生此 Content-Type 标头：

```
Content-Type: application/json; charset=utf-8 
```

是否可以*省略字符集*而只使用以下标题？

```
Content-Type: application/json 
```

我没有看到这样做的过载`StringContent`。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-05-24T19:14:36.437

当[StringContent 类](https://msdn.microsoft.com/en-us/library/system.net.http.stringcontent(v=vs.118).aspx)的新实例通过以下方式初始化时

```
public StringContent(
    string content,
    Encoding encoding,
    string mediaType
) 
```

生成以下 HTTP 请求标头`Content Type`：

```
Content-Type: application/json; charset=utf-8 
```

> 注意编码部分（`charset=utf-8`）的存在

为了构造*不带编码部分*`Content Type`的标头，可以考虑以下选项：

 ***1)**使用[StringContent 构造函数 (String)并使用](https://msdn.microsoft.com/en-us/library/hh158908(v=vs.118).aspx)[ContentType 属性](https://msdn.microsoft.com/en-us/library/system.net.http.headers.httpcontentheaders.contenttype%28v=vs.118%29.aspx)设置内容类型，例如：

```
var requestContent = new StringContent(jsonContent);                
requestContent.Headers.ContentType = new MediaTypeWithQualityHeaderValue("application/json"); 
```

或者

```
var requestContent = new StringContent(jsonContent);                
requestContent.Headers.ContentType = MediaTypeHeaderValue.Parse("application/json"); 
```

**2)从**[ContentType 属性](https://msdn.microsoft.com/en-us/library/system.net.http.headers.httpcontentheaders.contenttype%28v=vs.118%29.aspx)中删除编码部分，例如：

```
 var requestContent = new StringContent(jsonContent, System.Text.Encoding.UTF8, "application/json");
    requestContent.Headers.ContentType.CharSet = null; 
```

**3)**创建自定义[JsonMediaTypeFormatter 类](https://msdn.microsoft.com/en-us/library/system.net.http.formatting.jsonmediatypeformatter%28v=vs.118%29.aspx)来重置编码部分：

```
public class NoCharsetJsonMediaTypeFormatter : JsonMediaTypeFormatter
{
    public override void SetDefaultContentHeaders(Type type, System.Net.Http.Headers.HttpContentHeaders headers, System.Net.Http.Headers.MediaTypeHeaderValue mediaType)
    {
        base.SetDefaultContentHeaders(type, headers, mediaType);
        headers.ContentType.CharSet = null;
    }
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-04T01:17:34.013

我遇到了完全相同的问题，无论我将字符集设置为什么，它总是声称我正在尝试使用“不支持的媒体类型”。我发现使用这种将字符集留空的方法（正如 Slack 试图做的那样）解决了我的问题。诀窍是稍后指定内容类型 - 这是绝对需要的（我刚刚在下一行做了）：

```
StringContent content = new StringContent("Whatever=something");
content.Headers.ContentType = new MediaTypeWithQualityHeaderValue("application/json"); 
```

（请原谅内容的非真正 JSON 格式，这不是我示例的重点。）*

# c - 如何检查结构是否已初始化？

> ID：16098577
> 
> 赞同：11
> 
> 时间：2013-04-19T06:30:18.860
> 
> 标签：c, arrays, data-structures, initialization

我有一个用数据结构实现的表。我的代码的一个重要块如下所示（h 是一个数据结构，table 是一个存储其他结构的表）：

```
(h->table[hash(key, h->size)] 
```

在我的代码运行时，一些表 [i] 将被初始化，而有些则不会。每当我在尚未初始化的 table[i] 上测试我的代码时，我都会收到一个 valgrind 错误，基本上说我无法使用未初始化的数组。

我的问题是，我将如何检查某个 h->table[i] 是否已初始化？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T06:31:34.677

你不能。要解决此问题，请始终在使用之前初始化结构（即使所有初始化都将结构设置为已知的“空白”/“未填充”状态）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:31:54.000

当您声明您的结构时，使用 calloc 或 memset 将它们全部设置为零，然后与 0 或 NULL 进行比较以检查该结构是否未被使用。

# deployment - Jenkins：阻止 Deploy 使用 Selenium 测试运行

> ID：16098583
> 
> 赞同：0
> 
> 时间：2013-04-19T06:30:45.760
> 
> 标签：deployment, selenium, jenkins, hudson, selenium-webdriver

我们有大约 20 个 selenium 构建和 1 个部署构建（对于 4 个环境中的每一个），防止部署和 selenium 测试同时运行的最佳方法是什么？

要使用 ThrottleConcurrentBuilds 插件，我需要在每个类别中创建 20 个类别的 2 个构建 - Deployment+SeleniumJob1、Deployment+SeleniumJob2、Deployment+SeleniumJob3 等。

当我为每个环境都这样做时，我总共会得到 80 个类别

有没有更好的方法呢？

# xamarin.android - 在 Mono For Droid 中，当我触摸它时如何移动 ImageView？

> ID：16098584
> 
> 赞同：0
> 
> 时间：2013-04-19T06:30:46.603
> 
> 标签：xamarin.android, android-imageview, ontouchlistener

我正在使用 Mono-For-Droid。我有一个`ImageView`并且想要移动它以在我触摸它时跟随我的手指并在我松开手指时停止移动。

这是我的代码，请指教怎么做？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using Android.App;
using Android.Content;
using Android.OS;
using Android.Runtime;
using Android.Views;
using Android.Widget;
using Android.Util;
using Android.Graphics.Drawables;
using Android.Content.Res;

[assembly: UsesPermission(Name = Android.Manifest.Permission.SystemAlertWindow)]
namespace ExtremeKeyboard
{
    [Service]
    public class ChatheadService: Android.App.Service
    {
        System.Threading.Timer _timer;

        private IWindowManager windowManager;
        private ImageView ReminderHead;
        private Drawable icon;
        private Android.Views.WindowManagerLayoutParams LOParams;

        public override void OnStart(Android.Content.Intent intent, int startId)
        {
            base.OnStart(intent, startId);

            var windowService = this.GetSystemService(Android.Content.Context.WindowService);
            var windowManager = windowService.JavaCast<Android.Views.IWindowManager>();

            ReminderHead = new ImageView(this);
            ReminderHead.SetImageResource(Resource.Drawable.Icon);

            LOParams = new Android.Views.WindowManagerLayoutParams(
                Android.Views.WindowManagerLayoutParams.WrapContent,
                Android.Views.WindowManagerLayoutParams.WrapContent,
                Android.Views.WindowManagerTypes.Phone,
                Android.Views.WindowManagerFlags.NotFocusable,
                Android.Graphics.Format.Translucent);
            LOParams.Gravity = GravityFlags.Top | GravityFlags.Left;
            LOParams.X = 0;
            LOParams.Y = 100;            

            windowManager.AddView(ReminderHead, LOParams);
        }

        public override Android.OS.IBinder OnBind(Android.Content.Intent intent)
        {
            throw new NotImplementedException();
        }       
    }
} 
```

# mysql - MYSQL Query to compare the results of two queries?

> ID：16098588
> 
> 赞同：4
> 
> 时间：2013-04-19T06:31:07.730
> 
> 标签：mysql, sql, phpmyadmin, compare

I am currently working on a search feature for a website that searches through a database for a specific animal.

Say the user inputs `rabbit`, the search will go through the `db` and display the results for `rabbit`.

Now say a user inputs `bunny` the search will go through the `db` but will not find a match for `bunny`.

Most people know that `bunny` means `rabbit`, but the database doesn't know that. At this point I have implemented a `MySQL` thesaurus within the same database to search for synonyms of what the user inputs.

This means that if the user inputs `bunny` it will display a list of synonyms for bunny.

In that list there is the word `Rabbit` and I am trying to pull that word out of there to generate a match. At this point I have the following.

```
"SELECT  `engname` FROM  `searchtestdb` WHERE  `engname` IS NOT NULL  "; 
```

-- This displays the english name of every animal within that table. --

```
"SELECT synonyms.* FROM words LEFT JOIN synonyms ON synonyms.word_id = words.word_id WHERE word = \"$searchBox\"" 
```

-- This displays the synonyms for `$searchBox` which is the word the user inputs. --

Both of these queries display what I want them to display. In other words, the first query gives me all of the animals names in the table, and the second query gives me the synonyms for the word the user inputed.

At this point my problem is how to compare the synonyms to all the animals names. I've tried several queries with the `LIKE` command but I keep getting syntax errors.

Is what I am asking possible? If not what would be a better course of action? Any help would be greatly appreciated.

Thank You.

I got a semi fiddle going for y'all.

[http://sqlfiddle.com/#!2/47d42/3](http://sqlfiddle.com/#!2/47d42/3)

It only works for "bunny" since the entire synonym and word list is too big for fiddle.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:07:58.733

```
select * from searchtestdb
where engname in 
(
  SELECT synonyms.synonym 
  FROM words 
  LEFT JOIN synonyms ON synonyms.word_id = words.word_id 
  WHERE word = "bunny"
) 
```

[SQLFIddle](http://sqlfiddle.com/#!2/47d42/10)

EDIT: Since you probably also want to search for word directly inputted and not just it's synonyms, you should also add that condition:

```
OR engname = "bunny" 
```

[SQLFIddle](http://sqlfiddle.com/#!2/47d42/26)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:06:22.963

I think the idea is this: (pseudocoded)

Create a function which returns true or false (with a parameter as the search word) of whether there exists a result. This is a basic

```
SELECT COUNT > 0 FROM table WHERE text LIKE %parameter% 
```

Now create a function that returns a table of results:

*   loop through the the synonyms of the word which again comes as a parameter to this function
*   add to table of the results if a synonym in a loop fits the function above.
*   return the table

# javascript - 在人力车图中显示 X 和 Y 轴

> ID：16098594
> 
> 赞同：1
> 
> 时间：2013-04-19T06:31:27.883
> 
> 标签：javascript, charts, rickshaw

我有多个数据及其计数。我想使用人力车条形图显示它。我如何分别在 X 和 Y 轴上显示数据和计数。我得到的是：

```
var graph = new Rickshaw.Graph({
    element: document.querySelector("#chart"),
    renderer: 'bar',
    series: [{
        data: [ { x: 0, y: 40 }, { x: 1, y: 49 }, { x: 2, y: 12 }, { x: 3, y: 81 }, { x: 4, y: 40 }, { x: 5, y: 49 }, { x: 6, y: 12 },{ x:7, y: 12 }],
        color: 'steelblue'
    }]
});

graph.render(); 
```

显示没有 X 和 Y 轴的条形图。我们如何在条形图中显示 X 和 Y 轴？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T17:04:42.633

来自[ShutterStock 上的人力车页面](http://code.shutterstock.com/rickshaw/)：

```
var xAxis = new Rickshaw.Graph.Axis.Time({
    graph: graph
});

xAxis.render();

var yAxis = new Rickshaw.Graph.Axis.Y({
    graph: graph
});

yAxis.render(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-07T14:43:31.900

有关如何使用 x 和 y 轴绘制图形的深入截屏视频，包括使用 Rickshaw（在 AngularJS 中）进行缩放和平移，请访问： http: [//tagtree.io/d3-with-rickshaw-and-angular](http://tagtree.io/d3-with-rickshaw-and-angular)

# sql - 什么是正确的选择语句？

> ID：16098602
> 
> 赞同：1
> 
> 时间：2013-04-19T06:31:54.153
> 
> 标签：sql, sql-server-2000

//这是我的表1

```
 TransactionNum     Type  
    65658               0  
    65659               0  
    65660              449  
    65661               0 
```

//这是我的表2

```
 Type    Description          
    445 Discount #1  
    446 Discount #2  
    447 Discount #3  
    448 Discount #4  
    449 Discount #5  
    450 Discount #6 
```

//这是我的脚本

```
 SELECT a.TransactionNum,b.Description FROM Table1 a,Table2 b
    WHERE a.Type=b.Type ORDER BY TransactionNum 
```

//结果

```
 TransactionNum   Description
    65659            Discount #4 
```

//我希望结果是这样的，0类型的TransactionNum也应该包含在结果中，请帮帮我，我这里使用的是SQL2000。

```
 TransactionNum      Description   
    65658               0  
    65659               0  
    65660              Discount #5  
    65661               0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T06:33:02.767

改为使用`LEFT JOIN`，

```
SELECT a.TransactionNum, 
       COALESCE(b.Description, CAST (a.Type AS VARCHAR(20))) AS Description
FROM   Table1 a LEFT JOIN Table2 b
          ON a.Type=b.Type
ORDER  BY a.TransactionNum 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!3/003f8/4)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

输出

```
╔════════════════╦═════════════╗
║ TRANSACTIONNUM ║ DESCRIPTION ║
╠════════════════╬═════════════╣
║          65658 ║ 0           ║
║          65659 ║ 0           ║
║          65660 ║ Discount #5 ║
║          65661 ║ 0           ║
╚════════════════╩═════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:35:33.663

在 Oracle 中，我们可以使用左外连接

```
 SELECT a.TransactionNum,b.Description FROM Table1 a,Table2 b
     WHERE a.Type=b.Type(+) ORDER BY TransactionNum 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T06:36:32.423

```
SELECT a.TransactionNum,isnull(b.Description,0)
FROM Table1 a
LEFT JOIN Table2 b
On a.Type = b.Type
Order by a.TransactionNum 
```

# php - 使用 PHP 处理 Soap 响应

> ID：16098606
> 
> 赞同：2
> 
> 时间：2013-04-19T06:32:10.737
> 
> 标签：php, soap

到目前为止，我已经在这里尝试了几个示例，但似乎无法弄清楚如何使用 PHP 5.3 处理这个肥皂响应：

```
<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <soapenv:Body>
  <ns1:getAuthenticationTokenResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://earthquake">
   <getAuthenticationTokenReturn xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">1CFA9FF89E1F6E2AC62C4E5A689EED65F144B7E827C386A60836D97A76E0C49F47FCC94637AFADB8EAEDF3110955F2622AB334B92EBFC568E563662C2202E51157A4D9AABBFDD9941119CC8C96681B51EE453006C460B50C6104A5E07C84CE88</getAuthenticationTokenReturn>
  </ns1:getAuthenticationTokenResponse>
 </soapenv:Body>
</soapenv:Envelope> 
```

我正在尝试将 getAuthenticationTokenReturn 变成一个变量，但到目前为止还没有多少运气。

到目前为止，这是我的代码：

```
$xml = simplexml_load_string($result);    
$xml->registerXPathNamespace('ns1','http://schemas.xmlsoap.org/soap/encoding/');
foreach ($xml->xpath('//ns1:getAuthenticationTokenResponse') as $item)
{
  echo 'Name: '.$item,'<br>';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T06:34:54.943

试试这个，我试过了，我得到了令牌

```
$string = '<?xml version="1.0" encoding="utf-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <soapenv:Body>
  <ns1:getAuthenticationTokenResponse soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:ns1="http://earthquake">
   <getAuthenticationTokenReturn xsi:type="soapenc:string" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">1CFA9FF89E1F6E2AC62C4E5A689EED65F144B7E827C386A60836D97A76E0C49F47FCC94637AFADB8EAEDF3110955F2622AB334B92EBFC568E563662C2202E51157A4D9AABBFDD9941119CC8C96681B51EE453006C460B50C6104A5E07C84CE88</getAuthenticationTokenReturn>
  </ns1:getAuthenticationTokenResponse>
 </soapenv:Body>
</soapenv:Envelope>';

$xml = simplexml_load_string($string);
$xml->registerXPathNamespace('soap', 'http://schemas.xmlsoap.org/soap/envelope/');
$xml->registerXPathNamespace('ns1', 'http://earthquake');

foreach ($xml->xpath('//ns1:getAuthenticationTokenResponse') as $item)    
    { 
       echo $item->asXML();    
    } 
```

# php - PHP 中的 imap_fetchstructure 如何工作？

> ID：16098607
> 
> 赞同：0
> 
> 时间：2013-04-19T06:32:16.427
> 
> 标签：php, imap

我试图使用 PHP IMAP 函数读取标题并保存到 mysql 数据库中。

检查附件的示例代码是否存在

```
$inbox = imap_open($hostname,$username,$password) or die('Cannot connect to mail: ' . imap_last_error());
$struct = imap_fetchstructure($inbox,$uid,FT_UID);
$existAttachments = existAttachment($struct);

function existAttachment($part){
    if (isset($part->parts)){
        foreach ($part->parts as $partOfPart){
            existAttachment($partOfPart);
        }
    }
    else{
        if (isset($part->disposition)){
            if ($part->disposition == 'attachment'){
                echo '<p>' . $part->dparameters[0]->value . '</p>';

                return true;
            }
        }
    }
} 
```

一切正常，但我注意到返回内容需要很长时间。

**它是提取全部内容还是仅提取消息结构？或者有没有办法检测附件是否存在？**

谢谢。

# sitecore - Sitecore 工作箱更改排序顺序

> ID：16098608
> 
> 赞同：4
> 
> 时间：2013-04-19T06:32:17.370
> 
> 标签：sitecore

默认情况下，Sitecore 工作框显示项目名称，并按项目名称对项目列表进行排序。

在我[之前的一篇](https://stackoverflow.com/questions/14645368/sitecore-workbox-display-item-field-for-name)关于此的帖子中，我设法将项目名称更改为自定义字段。

现在我需要按此字段对工作箱进行排序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:41:23.927

假设您已经拥有自己的实现，`WorkboxForm`如您在问题中链接的帖子中所述，您需要更改该`DisplayState`方法的代码。

此方法的`DataUri[] items`流入参数为您提供处于工作流给定状态的所有项目的列表。您需要从此参数中检索所有**Sitecore项目并对它们进行排序：**

```
DataUri[] items = new DataUri[0];
List<Item> sitecoreItems = items
    .Select(uri => Context.ContentDatabase.Items[uri])
    .OrderBy(item => item["YourCustomField"])
    .ToList(); 
```

并使用新列表来选择当前页面项目。此解决方案未针对性能进行优化 - 您需要从数据库中获取处于给定状态的每个项目，以便您可以访问自定义字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T09:51:42.673

在研究了[Sitecore 工作箱修改后](http://adeneys.wordpress.com/2009/03/18/get-your-workflow-in-order/)，我遇到了以下解决方案。

第 1 步 - 如下修改 GetItems 方法，

```
 private DataUri[] GetItems(WorkflowState state, IWorkflow workflow)
    {  
        if (workflow != null)
        {
            var items = workflow.GetItems(state.StateID);                
            Array.Sort(items, new Comparison<DataUri>(CompareDataUri));
            return items;
        }
        return new DataUri[] { };
    } 
```

“CompareDataUri”方法来了，

```
 private int CompareDataUri(DataUri x, DataUri y)
    {
        //Custom method written to compare two values - Dhanuka
        Item itemX = Sitecore.Context.ContentDatabase.GetItem(x);
        Item itemY = Sitecore.Context.ContentDatabase.GetItem(y);

        string m_sortField = "__Updated";
        bool m_descSort = false;

        var res = 0;

        res = string.Compare(itemX[m_sortField], itemY[m_sortField]);

        if (m_descSort)
        {
            if (res > 0)
                return -1;
            if (res < 0)
                return 1;
        }

        return res;
    } 
```

这种方法针对性能进行了优化。

# flex4 - Datagrid itemrenderer 性能问题

> ID：16098616
> 
> 赞同：0
> 
> 时间：2013-04-19T06:33:02.707
> 
> 标签：flex4

我有一个带有自定义 itemrenderer 的数据网格，用于为单元格、行和列着色。当我更改行的颜色时，有时它会完美显示，但有时一个或多个单元格没有着色。我没有找到背后的原因。任何人都可以提供任何提示吗？

这是我下面的自定义 itemrenderer 代码..

```
 override protected function updateDisplayList(unscaledWidth:Number,   unscaledHeight:Number):void
        {   
            super.updateDisplayList(unscaledWidth, unscaledHeight);

             bd.setStyle("backgroundColor",getStyle("bgColor"));//bordercontainer   
            lbl.setStyle("fontSize",getStyle("fontSize"));//label in //that bordercontainer
            lbl.setStyle("fontFamily",getStyle("fontFamily"));
            lbl.setStyle('color', getStyle("fgColor"));
        } 
```

我正在使用 AdvancedDatagrid 并在其中使用 styleFunction ..

```
public function applyFormat(data:Object,col:AdvancedDataGridColumn):Object {
   var obj:Object = new Object();
   for each(var taskFontFormatVo:TaskFontFormatVo in data.taskFontFormats){
      if(!taskFontFormatVo.barchartView ){
      if(col.headerText == taskFontFormatVo.columnName){
      var bgColor:String = "0x"+taskFontFormatVo.bgColor;
var fgColor:String = "0x"+taskFontFormatVo.fgColor;
var fontSize:Number = taskFontFormatVo.fontSize;
var fontFamily:String = taskFontFormatVo.fontFamily;
obj.bgColor = bgColor;
obj.fgColor = fgColor;
obj.fontSize = fontSize;
obj.fontFamily = fontFamily; 
break;
}
}
}
return obj;
} 
```

# visual-studio - Visual Studio Post 构建命令行部署

> ID：16098618
> 
> 赞同：0
> 
> 时间：2013-04-19T06:33:11.943
> 
> 标签：visual-studio, msbuild, web-deployment

在 Visual Studio 中，我正在创建一个用于部署的构建后事件

```
md "$(SolutionDir)Deploy\bin" 
```

它在我的解决方案中的 Deploy 文件夹中创建了 bin 文件夹。

如何将其指向某个远程计算机（我有 Web 服务器的位置）中的文件夹？

`$(SolutionDir)`到远程机器上的其他文件夹？

你可能看起来很简单。:) 这是我第一次尝试这些东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:04:48.780

最简单的方法是替换`$(SolutionDir)`为`\\server\share`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:14:50.720

作为替代方案，我喜欢保持我的 .sln 和 .csproj 文件“干净”。

然后使用第二个（迷你）.msbuild（它只是一个 .xml 文件）来构建 .sln，然后将这些复制类型事件作为第二个操作执行。

这是一个基本示例：

```
<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="AllTargetsWrapper">

    <PropertyGroup>
        <WorkingCheckout>.</WorkingCheckout>
        <WorkingOutputs>m:\working\outputs</WorkingOutputs>
    </PropertyGroup>

    <Target Name="AllTargetsWrapper">
        <CallTarget Targets="Clean" />
        <CallTarget Targets="Build" />
        <CallTarget Targets="CopyItUp" />
    </Target>

    <Target Name="Clean">

        <RemoveDir Directories="$(WorkingOutputs)" />
        <MakeDir Directories="$(WorkingOutputs)" />

        <Message Text="Cleaning done" />

    </Target>

    <Target Name="Build">
        <MSBuild Projects="$(WorkingCheckout)\MySolution.sln" Targets="Build" Properties="Configuration=$(Configuration)">
            <Output TaskParameter="TargetOutputs" ItemName="TargetOutputsItemName"/>
        </MSBuild>
        <Message Text="Build completed" />
    </Target>

    <!--  -->
    <Target Name="CopyItUp" >

        <ItemGroup>
            <MyExcludeFiles Include="$(WorkingCheckout)\**\SuperSecretStuff.txt" />
            <MyExcludeFiles Include="$(WorkingCheckout)\**\SuperSecretStuff.doc" />
        </ItemGroup>

        <ItemGroup>
            <MyIncludeFiles Include="$(WorkingCheckout)\MyCsProject\bin\$(Configuration)\**\*.*" Exclude="@(MyExcludeFiles)"/>
        </ItemGroup>        

        <Copy
                SourceFiles="@(MyIncludeFiles)"
                DestinationFiles="@(MyIncludeFiles->'$(WorkingOutputs)\%(RecursiveDir)%(Filename)%(Extension)')"
        /> 

    </Target>

</Project> 
```

# jquery - 键盘按键代码上的jquery元素选择

> ID：16098631
> 
> 赞同：2
> 
> 时间：2013-04-19T06:34:05.377
> 
> 标签：jquery

我有一个`ul`列表，当我按下键盘上的一个键时，我想更改 li 的背景颜色。例子。我按下`a`键盘并更改文本的 li 的背景`a`。

```
<ul>
    <li>a</li>
    <li>b</li>
    <li>2</li>
</ul> 
```

获得这个的最好和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:38:23.740

你可以做这样的事情......

```
var li = $("ul li");

$(document).keypress(function(event) {
     li
      .filter(function() { 
         return $(this).text() == String.fromCharCode(event.which).toLowerCase();
      })
      .css("background-color", "#f00");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:39:00.520

您可以在内部将事件作为参数传递`keypress`，然后使用`event.which`您可以跟踪`key`在检查是否`li`包含该单词之后按下的内容`jQuery:contain();`

**例子**

```
$(document).keypress(function(e){
   var keypressed = e.which;

   //process for checking pressed key value 
   $('ul li:contains('+ returned value of above process +')').css(
   {
      'background-color':'red'
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:39:11.373

我将首先构建一个 li 的地图，以便轻松找到它们，这样就不必在每次按键时都进行大量的文本计算，然后只需在 keypress 上测试按键：

```
var map = {};
$('li').each(function(){
   var key = $(this).text().trim();
   if (key.length==1) map[key]=$(this);
});
console.log(map);
$(window).keypress(function(e){
  var key = String.fromCharCode(e.which);
  if (map[key]) map[key].css('background-color','red');
}); 
```

[示范](http://jsbin.com/ufufoj/1/edit)

# php - JQuery 设置默认值是使用 url 传递值

> ID：16098633
> 
> 赞同：0
> 
> 时间：2013-04-19T06:34:23.577
> 
> 标签：php, javascript, jquery, html

这是我上一个关于 [JQuery 下一堂课](https://stackoverflow.com/questions/16050942/jquery-next-class)的问题的延续 感谢所有帮助我解决这个问题的人。

现在我在设置默认值时遇到问题。有2个部分。

第一部分：假设有一个链接可以加载默认 item1、item2 和 item2 我所做的是链接通过 URL 传递值，如下所示

```
index.php?item1=3 
```

现在我如何检查并分别启用？如果没有通过，我已经使用 PHP 检查并设置禁用，当通过它时将它设置为禁用。但现在的问题是第 2 个未通过值的项目被禁用（项目 1 已启用并设置为默认的 id 传递和项目 2，项目 3 被禁用）并启用项目 2 我重新选择了项目 1。

因为，根据 jquery item2 只有在 item1 更改时才会解锁。如何覆盖这个？

第二部分：与第一部分类似，但对于某些页面 item1 在代码 () 中设置为默认值，并且没有任何内容通过 url 传递。问题又是一样的。

我知道两者都有类似的问题，只是想知道是否有一个简单的解决方案，而不是将所有 part2 更改为 part1 即通过 url 传递 item1 （我必须手动进入每个页面并更改:( ）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:41:48.287

嘿，您需要通过[此](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)链接按名称检查 Parameter 的值。并检查值是否为空。并且对非空值执行操作。

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
      return "";
  else
      return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

这样你就可以调用函数来获取值：

```
 var Value = getParameterByName("Item1"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:44:05.523

您可以使用函数来解析来自 jQuery 的查询字符串。

**QueryString**（取自这个[SO 答案](https://stackoverflow.com/a/3855394/1036025)）

```
(function($) {
    $.qs = (function(a) {
        if (a == "") return {};
        var b = {};
        for (var i = 0; i < a.length; ++i)
        {
            var p=a[i].split('=');
            if (p.length != 2) continue;
            b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
        }
        return b;
    })(window.location.search.substr(1).split('&'))
})(jQuery); 
```

**Javascript**

```
var item1 = $.qs('item1');

if (item1) {
    // do something...
} else {
    // set a default value...
} 
```

# arduino - 读取 9 通道发射器接收器的多个通道

> ID：16098634
> 
> 赞同：0
> 
> 时间：2013-04-19T06:34:24.563
> 
> 标签：arduino

我有 9 通道 RF RX/TX，我想将 3 个电机连接到它。我可以将通道 1 与电机 1 连接，但无法将通道 2 与电机 2 同时与 ardunio 连接。请看一下代码。无法旋转不同通道的电机

```
 int motor1Left = 7;// defines pin 5 as connected to the motor
int motor1Right= 9;// defines pin 6 as connected to the motor
int motor2Left = 22;// defines pin 7 as connected to the motor
int motor2Right = 26;// defines pin 8 as connected to the motor
int enable = 5;
int enable2 = 10;
int channel1 = 2; // defines the channels that are connected
int channel2 = 3;// to pins 9 and 10 of arduino respectively

int Channel1 ; // Used later to 
int Channel2 ; // store values

void  setup ()
{
   pinMode (motor1Left, OUTPUT);// initialises the motor pins
   pinMode (motor1Right, OUTPUT);
   pinMode (motor2Left, OUTPUT);
   pinMode (motor2Right, OUTPUT);// as outputs
   pinMode (channel1, INPUT);// initialises the channels
   pinMode (channel2, INPUT);// as inputs
  //pinMode (enable, OUTPUT);

   Serial.begin (9600); // Sets the baud rate to 9600 bps

}

void  loop ()
{
  Channel1 = (pulseIn (channel1, HIGH)); // Checks the value of channel1
   Serial.println (Channel1); //Prints the channels value on the serial monitor
  delay(1000);

  Channel2 = (pulseIn (channel2, HIGH)); // Checks the value of channel1
  Serial.println (Channel2); //Prints the channels value value on the serial monitor
  delay(1000);

  if (Channel1 > 1470 && Channel1 < 1500) /*If these conditions are true, do the following. These are the values that I got from my transmitter, which you may customize according to your transmitter values */
  {
    digitalWrite (motor1Left, LOW); // Sets both the
    digitalWrite (motor1Right, LOW);// motors to low
   analogWrite(enable, 100);  
}

  if (Channel1 < 1460) // Checks if Channel1 is lesser than 1300
  {
    digitalWrite (motor1Left, HIGH);// Turns the left
    digitalWrite (motor1Right, LOW); // motor forward
    analogWrite(enable, 100);
    //delay(500); 
    //delay(500);
    //digitalWrite(motor1Left, LOW);
    //delay(1);
}

  if (Channel1 > 1510) // Checks if Channel1 is greater than 1500
  {
    digitalWrite (motor1Left, LOW);// Turns the right

    digitalWrite (motor1Right, HIGH);// motor forward
     analogWrite(enable, 70);
     //delay(500);
    //digitalWrite (motor1Right, LOW);
   // delay(50);
    //digitalWrite (motor1Right, HIGH);

}

  if (Channel2 > 1480 && Channel1 < 1500 ) // If these conditions are true, do the following
  {
    digitalWrite (motor2Left, LOW);// Sets both the
    digitalWrite (motor2Right, LOW);// motors to low
    analogWrite (enable2, 100);
}

  if (Channel2 < 1300) // Checks if Channel2 is lesser than 1300
  {
    digitalWrite (motor2Left, LOW);// Turns the left
    digitalWrite (motor2Right, HIGH);// motor backward
    analogWrite (enable2, 100);
  }
  if (Channel2 > 1500) // Checks if Channel2 is greater than 1500
  {
    digitalWrite (motor2Left, HIGH);// Turns the right
    digitalWrite (motor2Right, LOW);// motor backward
    analogWrite (enable2, 100);
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T16:47:46.147

我看到几个问题：

*   您提到了 3 个电机，但似乎只有 2 个。
*   您打印出读取的值，但没有任何帮助来识别哪个值。考虑添加“Serial.print("Ch1 = ");" 就在第一个 println 之前进行区分。
*   关于第 72 行，您混合了 Channel2 和 Channel1。
*   在这两个通道中，您都有一些读数盲区。例如，对于 Channel 1，如果 Channel1 是 1465，会发生什么？还是 1460 或 1470？在所有这些情况下，您的“if”语句都不会触发。在 Channel2 中，下盲区要大得多，而上盲区仍然存在（如果 Channel2 正好是 1500 怎么办？）。

最后，您的电机似乎仍然应该做点什么。也许是因为通道 1 小于 1500。但如果仍然无法正常工作，请检查您的接线。

另外，风格说明：您使用 channel1 作为输入引脚来读取。您使用 Channel1 作为从中读取的值。这些看起来非常相似。如果你打错了，那几乎是不可能被发现的。您应该考虑以一种更容易发现错误且更明显的方式命名它们。例如，channel1 可以变成 pinCh1，而 Channel1 可以变成 inpCh1。其他人可能会建议更具描述性的名称，可能第一个字母表示数据类型。例如，int iChannel1_PinNumber；int iChannel1_InputValue;

# debugging - RDflib 在 windows7 上导致打印错误

> ID：16098636
> 
> 赞同：0
> 
> 时间：2013-04-19T06:34:34.610
> 
> 标签：debugging, python-2.7, runtime-error, sparql, sparqlwrapper

我使用 SPARQLWrapper 创建 SPARQL 查询，但我不知道如何调试以下错误消息：

```
Warning (from warnings module):
  File "D:\Python27\lib\site-packages\sparqlwrapper-1.5.2-py2.7.egg\SPARQLWrapper\Wrapper.py", line 550
RuntimeWarning: unknown response content type, returning raw response...

Traceback (most recent call last):
  File "D:\Python27\testwrapper.py", line 31, in <module>
    if (len(results["results"]["bindings"]) == 0):
AttributeError: addinfourl instance has no attribute '__getitem__' 
```

这是我的代码：

```
from SPARQLWrapper import SPARQLWrapper,JSON
sparql = SPARQLWrapper('http://thedatahub.org/dataset/semanticquran');

queryString = """
PREFIX  dc:   <http://purl.org/dc/elements/1.1/>
PREFIX  foaf: <http://xmlns.com/foaf/0.1/>
PREFIX  olia-ar: <http://purl.org/olia/arabic_khoja.owl#>
PREFIX  dcterms: <http://purl.org/dc/terms/>
PREFIX  rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX  owl:  <http://www.w3.org/2002/07/owl#>
PREFIX  xsd:  <http://www.w3.org/2001/XMLSchema#>
PREFIX  lexvo: <http://lexvo.org/id/iso639-3/>
PREFIX  rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX  gold: <http://purl.org/linguistics/gold/>
PREFIX  skos: <http://www.w3.org/2004/02/skos/core#>
PREFIX  qvoc: <http://www.nlp2rdf.org/quranvocab#>
SELECT DISTINCT  ?wordText ?pos
WHERE
 { ?wordPart rdf:type qvoc:LexicalItem .
    ?wordPart gold:Root "smw" .
    ?wordPart dcterms:isPartOf ?word .
    ?wordPart gold:PartOfSpeechProperty ?pos .
    ?word rdf:type qvoc:Word .
    ?word skos:prefLabel ?wordText
  }
"""

sparql.setQuery(queryString)
sparql.setReturnFormat(JSON)
results = sparql.query().convert()
if (len(results["results"]["bindings"]) == 0):
  print "No results found."
else:
  for result in results["results"]["bindings"]:
     print result["wordText"]["value"] 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T17:49:03.710

[返回格式](https://github.com/tatiana/SPARQLWrapper/blob/master/src/SPARQLWrapper/Wrapper.py#L548)不是 JSON，因此调用`setReturnFormat`未按预期工作：

> 根据返回格式对返回值进行编码：
> 
> *   在 XML 的情况下，返回一个 DOM 顶部元素；
> *   在 JSON 的情况下，simplejson 转换将返回一个字典；
> *   对于 RDF/XML，值通过 RDFLib 转换为 Graph 实例。
> 
> 在所有其他情况下，输入只是返回。

# php - 使用 AJAX 在同一页面中调用特定的 PHP 函数

> ID：16098641
> 
> 赞同：2
> 
> 时间：2013-04-19T06:34:42.930
> 
> 标签：php, ajax, jquery, file-upload, image-uploading

我正在使用 PHP、Jquery 和 Ajax 创建一个可以上传和裁剪图像的小部件。当我们选择一个图像，并提交表单时。执行以下代码，上传图片：

```
<?php

    $valid_formats = array("jpg", "png", "gif", "bmp");
    if(isset($_POST['submit']))
        {
            $name = $_FILES['photoimg']['name'];
            $size = $_FILES['photoimg']['size'];
            if(strlen($name))
                {
                    list($txt, $ext) = explode(".", $name);
                    if(in_array($ext,$valid_formats) && $size<(1024*1024))
                        {
                            $actual_image_name = time().substr($txt, 5).".".$ext;
                            $tmp = $_FILES['photoimg']['tmp_name'];
                            if(move_uploaded_file($tmp, $path.$actual_image_name))
                                {
                                    $image="<img src='uploads/".$actual_image_name."' id=\"photo\" style='max-width:500px' >";

                                }
                            else
                                echo "failed";
                        }
                    else
                        echo "Invalid file formats..!";                 
                }
            else
                echo "Please select image..!";
        }
?> 
```

提交表单时，页面正在刷新。我想在不刷新页面的情况下执行此操作。

假设如果我把上面的 PHP 代码放在一个 PHP 函数中，而不使用
`if(isset($_POST['submit']))`

那么，有什么方法可以使用 AJAX 调用 PHP 函数。

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:09:38.627

实际上，我一直在寻找可以在选择图像并上传图像后立即通过 AJAX 提交 PHP 表单的东西。我找到了这段代码，

```
$('#photoimg').live('change', function(){ 
     $("#preview").html('');
     $("#imageform").ajaxForm({
        target: '#preview'
    }).submit();    
}); 
```

这里*photoimg*是输入类型文件的ID，*imageform*是表单的ID，*preview*是div的ID，预览要显示的地方。选择文件时，会触发**更改**事件并提交表单。你可以参考[这个](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:41:54.913

嘿，因为您想上传文件并且不想在选择文件时刷新页面。您可以使用 jquery 的`$.ajax or $.post`I prefers `$.ajax`。因为你必须为 ajax 调用提供适当的参数。在 url 参数中你必须提供 php 文件的名称，即你上面的 php 脚本。你还必须在你的 php 脚本中做一些更改，因为你不会发布你`if(isset($_POST['submit']))` 如果成功则必须删除条件 ，在 ajax 调用中您会得到结果。您可以使用`json`将结果从 php 脚本返回到您的 jquery，并在 jquery 中解析它。而且正如[蒂姆](https://stackoverflow.com/users/540447/tim)所说，您必须在 jquery 中使用 change() 因为您不想通过单击任何按钮来使用 post。请参阅此 [链接](http://api.jquery.com/jQuery.ajax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:41:17.440

您可以使用

```
if($_POST) 
```

检查而不是

```
if(isset($_POST['submit'])) 
```

# java - 在给定日期的给定月数之前查找日期

> ID：16098642
> 
> 赞同：0
> 
> 时间：2013-04-19T06:34:44.717
> 
> 标签：java, date

我有一个日期，例如当前日期是 2013 年 4 月 19 日

我有几个月的时间，比如 10

我想找出从 2013 年 4 月 19 日起 10 个月之前的日期。

如何在 Java 中实现它？

例如，如果我想找出一周之前的日期，我可以实现如下：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(myDate);
calendar.add(Calendar.DAY_OF_YEAR, -7);
Date newDate = calendar.getTime(); 
```

但是如何找到相同的几个月？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:38:32.053

好吧，你可以做一些类似于你的例子的事情：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(myDate);
calendar.add(Calendar.MONTH, -10);
Date newDate = calendar.getTime(); 
```

它将设置`newDate`为 10 个月前的日期`myDate`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:44:44.283

使用 jodatime 会更简单也更详细：

```
 LocalDate date = LocalDate.parse("19/04/2013", DateTimeFormat.forPattern("dd/MM/yyyy"));
 LocalDate result = date.minus(Months.TEN);
 System.out.println(result.toString("dd/MM/yyyy")); 
```

# iphone - 在 UICollectionView 中创建被子布局

> ID：16098644
> 
> 赞同：5
> 
> 时间：2013-04-19T06:35:02.600
> 
> 标签：iphone, ios, objective-c, ios6, uicollectionview

![在此处输入图像描述](https://i.stack.imgur.com/QI2ol.png)

我需要这种类型的 UICuollectionView。每个单元格都有一个图像和一个标签。单元格的高度和宽度取决于该标签的文本。

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:          (NSIndexPath *)indexPath {

   CollectionViewCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"kCellID"  forIndexPath:indexPath];
if(cell == nil){
    cell = [[[NSBundle mainBundle] loadNibNamed:@"CollectionViewCell" owner:self options:nil] lastObject];
}
cell.backgroundColor = [UIColor redColor];
cell.image.image = [UIImage imageNamed:[self.arrPhotos objectAtIndex:indexPath.row]];
[cell.image setFrame:CGRectMake(cell.image.frame.origin.x, cell.image.frame.origin.y, cell.image.frame.size.width,100)];
float f = [self getHeightCalculateForTheText:[arrText objectAtIndex:indexPath.row]  andwidth:96];
[cell.label setFrame:CGRectMake(0,100,96, f)];
cell.label.text = [arrText objectAtIndex:indexPath.row];
[cell setFrame:CGRectMake(cell.frame.origin.x, cell.frame.origin.y, cell.frame.size.width, cell.frame.size.width+f-20+10)];
return cell;
}

- (CGSize) blockSizeForItemAtIndexPath:(NSIndexPath *)indexPath {
if(indexPath.row >= self.arrPhotos.count)
    NSLog(@"Asking for index paths of non-existant cells!! %d from %d cells", indexPath.row, self.arrPhotos.count);
float f = [self getHeightCalculateForTheText:[arrText objectAtIndex:indexPath.row]  andwidth:96];

if (f > 0 && f< 30)
    return CGSizeMake(1, 2);
else if (f > 30 && f< 60)
    return CGSizeMake(1, 3);
else if (f > 60 && f< 90)
    return CGSizeMake(1, 4);
else if (f > 90 && f< 120)
    return CGSizeMake(1, 5);
else if (f > 120 && f< 150)
    return CGSizeMake(1, 6);
else if(f > 150 && f< 180)
    return CGSizeMake(1, 7);

return CGSizeMake(1,1);
} 
```

但是我的细胞被挤压了。![在此处输入图像描述](https://i.stack.imgur.com/jXOlv.png)

你能告诉我问题是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:47:14.293

也许您在此行中输入`width`了您想要的位置：`height`

```
[cell setFrame:CGRectMake(cell.frame.origin.x, 
                          cell.frame.origin.y, 
                          cell.frame.size.width, 
                          cell.frame.size.width+f-20+10)]; 
```

# c++ - 为什么我的奇怪重复模板模式 (CRTP) 不能引用派生类的 typedef？

> ID：16098647
> 
> 赞同：5
> 
> 时间：2013-04-19T06:35:18.133
> 
> 标签：c++, templates, gcc, typedef, crtp

当使用[奇怪的重复模板模式](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)时，我无法引用属于派生类的 typedef，*只有*当我尝试从基类中引用它们时；gcc 抱怨`no type named 'myType' in class Derived<...>`。这似乎与使用 typedef、模板和奇怪的重复关系可能实现的不一致。

考虑：

```
/* crtp.cpp */

#include <iostream>
using namespace std;

// case 1\. simple.

class Base {
public:
    typedef int a_t;

    a_t foo;
};

class Derived : public Base {
    a_t bar;
};

// case 2\. template.

template<typename T>
class tBase {
public:
    typedef T b_t;
    T foo;
};

template <typename T>
class tDerived : public tBase<T> {
    typename tBase<T>::b_t bar;
};

// case 3\. curiously recurring.

template <typename T, typename D>
class tCuriousBase {
public:
    typedef T c_t;
    c_t foo;
};

template <typename T>
class tCuriousDerived : public tCuriousBase<T,tCuriousDerived<T> > {
    typename tCuriousBase<T,tCuriousDerived<T> >::c_t bar;
};

// case 4\. curiously recurring with member reference.

template <typename T, typename D>
class tCuriousMemberBase {
public:
    T foo;

    T get() {
        return static_cast<D*>(this)->bar;
    }
};

template <typename T>
class tCuriousMemberDerived : public tCuriousMemberBase<T, tCuriousMemberDerived<T> > {
public:
    T bar;

    tCuriousMemberDerived(T val) : bar(val) {}
};

// case 5\. curiously recurring with typedef reference.

template <typename T, typename D>
class tCuriousTypeBase {
public:
    typedef T d_t;
    d_t foo;
    typename D::c_t baz;
};

template <typename T>
class tCuriousTypeDerived : public tCuriousTypeBase<T, tCuriousTypeDerived<T> > {
public:
    typedef T c_t;
    typename tCuriousTypeBase<T,tCuriousTypeDerived<T> >::d_t bar;
};

// entry point

int main(int argc, char **argv) {
    Derived::a_t one = 1;
    tDerived<double>::b_t two = 2;
    tCuriousDerived<double>::c_t three = 3;
    double four = tCuriousMemberDerived<double>(4).get();
    tCuriousTypeBase<double, tCuriousDerived<double> >::d_t five = 5;
    // tCuriousTypeDerived<double>::d_t six = 6; /* FAILS */

    cout << one   << endl;
    cout << two   << endl; 
    cout << three << endl;
    cout << four  << endl;
    cout << five  << endl;
    // cout << six << endl;
} 
```

从 (1) 中，我们看到 typedef 确实是从基类继承到派生类；基类中声明的 typedef 可以通过派生类访问。

从 (2) 中，我们看到如果两个类都是模板，这仍然是正确的。

从 (3) 中，我们看到这种 typedef 继承在存在奇怪重复的模板关系的情况下仍然可以存在；我们在声明中通过派生类引用基类的 typedef `three`。

从（4）中，我们看到派生类的成员*变量*可以很容易地从基类中访问。

从 (5) 中，我们看到我们可以访问定义在模板参数上的 typedef（这在我们声明`five`使用与继承无关的类型时有效）。

然而，一旦我们在 (6) 中将模板参数设为派生类，typedef 突然变得不可访问，即使它看起来与派生类中的任何成员变量一样定义良好。

为什么是这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T07:59:32.230

这是“循环依赖”，或“不完整型”的另一个自我。

模板“元编程”是“编程类型”，但它需要一定程度的语义才能正确实例化类型。

考虑这个**类比**：

```
class A; //forwarded

class B
{
   A* pa; //good: we know how wide a pointer is, no matter if we don't know yet anything about A.
   A a; // bad: we don't know how much space it requires
};

class A
{
  float m;
}; // now we know, but it's too late 
```

这可以通过将 A 放在 B 之前来解决，但如果 A 是

```
class A
{
   B m;
}; 
```

除了指针之外没有其他解决方案，因为递归将是无限的。（A 应该包含自己，而不是引用另一个副本）

现在，**用同样的比喻**，让我们编写“类型”：

```
template<class D>
class A
{
   typedef typename D::inner_type my_type; //required D to be known when A<D> is instantiated...
   my_type m; // ... otherwise we cannot know how wide A<D> will be.
}; 
```

这个声明本身并不坏，直到我们开始将 D 定义为...

```
class D: //here we only know D exist
    public A<D> //but A size depende on D definition...
{
  ....
  typedef long double; inner_type
  ....
}; // ....we know only starting from here 
```

所以，基本上，我们不知道（还）当时 A 有多宽需要用它来创建 D。

打破这种“循环”的一种方法是在 CRT 循环之外使用一些“特征类”：

```
struct traits
{
   typedef long double inner_type;
   ....
};

template<class D, class Traits>
class A
{
  // this is easy: Traits does not depend itself on A
  typedef typename Traits::inner_type my_type;
  ....
};

template<class Traits>
class D: public A<D, Traits>
{
  typedef typename Traits::inner_type inner_type;
}; 
```

我们终于可以宣布

```
typedef D<traits> D_Inst; 
```

换句话说， 和 之间的连贯性`A::my_type`由`D::inner_type`保证`traits::inner_type`，其定义是独立的。

# javascript - 如何以时间间隔显示来自两个 AdSense 帐户的广告？

> ID：16098648
> 
> 赞同：1
> 
> 时间：2013-04-19T06:35:25.597
> 
> 标签：javascript, adsense

我想在一个网站上以时间间隔显示两个 AdSense 帐户的广告。

Wikidot 等流行的托管服务和一些论坛服务提供商采用这种做法在客户之间分享收入。假设用户“U”在托管平台上创建了一个帐户。他在子网站上添加了他的 AdSense 代码（他自己的发布商 ID）。然后，他的 adsense 帐户中的广告会以一定的时间间隔（比如 5 分钟）出现，而托管服务的广告（其发布者 ID 的广告）会再出现 5 分钟。

同样，这两个广告感知广告的执行将随着时间而改变。我没有 Java 脚本方面的专业知识，我不知道如何使它工作。

有人可以帮我实现它吗？我可以在一些帮助下做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:00:18.657

**Javascript**

```
function TimeFunction()
{

var d = new Date();

var m=d.getMinutes();
m = m%10
if (m < 6)
{
    alert("5 or les");
}
else
{
    alert('6 or moer');
}

 } 
```

测试代码

```
 <a onClick="TimeFunction();" style="cursor: pointer; cursor: hand;">*click here*</a> 
```

//**更新现在它可以工作了**

# python - 如何在python中调整csv文件单元格的宽度？

> ID：16098649
> 
> 赞同：2
> 
> 时间：2013-04-19T06:35:33.213
> 
> 标签：python, csv, python-2.7

我正在使用此代码编写 csv 文件

```
import csv

data = [[1,'more width cell',3],[4,5,6],[7,8,9]]
item_length = len(data[0])

with open('test.csv', 'wb') as test_file:
  file_writer = csv.writer(test_file)
  for i in range(item_length):
    file_writer.writerow([x[i] for x in data]) 
```

现在输出是

```
1   ,4,7
more,5,8
3   ,6,9 
```

我想要

```
 1,              ,4,7
 more width cell ,5,8
 3               ,6,9 
```

现在所有单元格都具有相同的宽度。如何增加**更宽单元**格的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:17:14.513

> 现在输出是
> 
> ```
> 1,more,7
> 2,5,8
> 3,6,9 
> ```

不，这不对。当我运行你的代码时，我得到

```
1,4,7
more width cell,5,8
3,6,9 
```

......这正是它应该的样子。一个正确的 CSV 文件就是这样——逗号分隔的值，没有填充。它没有“长度”的概念，只是每个值都有一个特定的长度，即该特定值的长度。如果您想将第一列填充到特定长度，则将值更改为填充（即替换值，例如`"1"`为`"1 "`消除歧义添加 -- 引号）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:17:14.487

行是按顺序写入的，因此您需要提前知道每列的列宽是多少。这可能需要在输出之前迭代您的数据以确定每列的宽度。

确定列宽后，您可以根据所需的宽度格式化该列的输出。使用[Python string.format()](http://docs.python.org/2/library/string.html#format-specification-mini-language)函数为您提供了很大的灵活性。

像这样的东西可能会起作用：

```
def expanded_row_data(row_data, col_widths):
    """Return list of strings, with modified column widths
    `col_width` is list of integer column widths.
    """
    return [ '{0:<{width}}'.format(d, width=width) for
      (d, width) in zip(row_data, col_widths) ]

col_widths = calc_col_width(data) # <--- Write this function to determine column widths.

with open('test.csv', 'wb') as test_file:
  file_writer = csv.writer(test_file)
  for i in range(item_length):
    file_writer.writerow(expanded_row_data([x[i] for x in data], col_widths)) 
```

# python - Python/Tkinter：从子窗口读取输入

> ID：16098651
> 
> 赞同：0
> 
> 时间：2013-04-19T06:35:33.563
> 
> 标签：python, user-interface, tkinter

我正在使用 Python 和 Tkinter 准备一个 GUI 应用程序（我是这种语言的新手）。

我有一个主窗口和一个配置子窗口，其中包含一些打开的文本参数：

```
def config_open():
  global wdw, e
  wdw = Toplevel()
  wdw.geometry('+400+400')

  w = Label(wdw, text="Parameter 1", justify=RIGHT)
  w.grid(row=1, column=0)
  e = Entry(wdw)
  e.grid(row=1, column=1)
  e.focus_set() 
```

然后我添加一个“确定”按钮，调用：

```
def config_save():
  global wdw, e
  user_input = e.get().strip()
  print user_input 
```

它有效，但我宣布一切都是全球性的。有没有更好的方法来引用子窗口中的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:49:16.927

```
from Tkinter import *

def config_open():
    wdw = Toplevel()
    wdw.geometry('+400+400')
    # Makes window modal
    wdw.grab_set()

    # Variable to store entry value
    user_input = StringVar()
    Label(wdw, text="Parameter 1", justify=RIGHT).grid(row=1, column=0)
    e = Entry(wdw, textvariable=user_input)
    e.grid(row=1, column=1)
    e.focus_set()
    Button(wdw, text='Ok', command=wdw.destroy).grid(row=2, column=1)
    # Show the window and wait for it to close
    wdw.wait_window(wdw)
    # Window has been closed
    data = {'user_input': user_input.get().strip(),
            'another-option': 'value of another-option'}
    return data

class App:
    def __init__(self):
        self.root = Tk()
        self.root.geometry('+200+200')
        self.label_var = StringVar()
        self.user_input = None
        Button(self.root, text='Configure', command=self.get_options).place(relx=0.5, rely=0.5, anchor=CENTER)
        Label(self.root, textvariable=self.label_var).place(relx=0.5, rely=0.3, anchor=CENTER)
        self.root.mainloop()

    def get_options(self):
        options = config_open()
        self.user_input = options['user_input']
        self.label_var.set(self.user_input)

App() 
```

# android - Tab Host在android中不执行应用

> ID：16098652
> 
> 赞同：0
> 
> 时间：2013-04-19T06:35:37.747
> 
> 标签：android, android-tabhost

我是 android 编程新手。我的应用程序由近 20 个屏幕和底部标签主机组成，其中包含三个标签项。这个标签主机应该被带到每个屏幕。但在我的应用程序中，它最多承载两个活动。那么怎么能我执行申请。

这是我写的代码

```
Resources ressources = getResources(); 
TabHost tabHost = getTabHost(); 
// Android tab
Intent intentAndroid = new Intent().setClass(this, AndroidActivity.class);
TabSpec tabSpecAndroid = tabHost.newTabSpec("Android").setIndicator("", ressources.getDrawable(R.drawable.icon_android_config));
        tabSpecAndroid.setContent(intentAndroid);
// Apple tab
Intent intentApple = new Intent().setClass(this, AppleActivity.class);
TabSpec tabSpecApple = tabHost
.newTabSpec("Apple")
.setIndicator("", ressources.getDrawable(R.drawable.icon_apple_config))
.setContent(intentApple);
// Windows tab
Intent intentWindows = new Intent().setClass(this, WindowsActivity.class);
TabSpec tabSpecWindows = tabHost
.newTabSpec("Windows")
.setIndicator("", ressources.getDrawable(R.drawable.icon_windows_config))
.setContent(intentWindows);
// Blackberry tab
Intent intentBerry = new Intent().setClass(this, BlackBerryActivity.class);
TabSpec tabSpecBerry = tabHost
.newTabSpec("Berry")
.setIndicator("", ressources.getDrawable(R.drawable.icon_blackberry_config))
.setContent(intentBerry);
// add all tabs 
tabHost.addTab(tabSpecAndroid);
tabHost.addTab(tabSpecApple);
tabHost.addTab(tabSpecWindows);
tabHost.addTab(tabSpecBerry); 
```

在第一个屏幕中，我们有条目列表。当我单击其中一个条目时，它会转到另一个屏幕。但是在那个屏幕中没有出现另一个屏幕选项卡主机。我的代码中有任何问题。请给我建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:38:56.603

为什么不能使用片段。

看这个教程

[http://wptrafficanalyzer.in/blog/creating-navigation-tabs-using-tabhost-and-fragments-in-android/](http://wptrafficanalyzer.in/blog/creating-navigation-tabs-using-tabhost-and-fragments-in-android/)

# python - 推荐系统web2py如何制作？

> ID：16098658
> 
> 赞同：0
> 
> 时间：2013-04-19T06:36:04.077
> 
> 标签：python, python-2.7, web2py

美好的一天，我正在制作网站，我需要让该用户可以注册，前提是他有推荐链接。此外，每个用户始终只有 2 个推荐链接，注册新用户后可以更改。有没有现成的 web2py 系统？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T10:19:15.930

我不知道任何现成的转诊系统。如果你想搜索一些东西，[http://www.web2py.com/appliances](http://www.web2py.com/appliances)和[https://github.com/mdipierro/web2py-appliances](https://github.com/mdipierro/web2py-appliances)是检查的好地方。

如果您更愿意自己动手​​，我建议您执行以下步骤：

1.  创建一个表，其中包含 UUID 的整数或字符串、未使用/已使用的布尔值以及对 auth_user 表的引用。
2.  在您的注册控制器中，读取`request.args[0]`包含 UUID 的字段。这将使推荐链接看起来像*yourdomain* /default/register/ *UUID*。
3.  检查传递的 UUID 是否包含在第一步创建的表中并且尚未使用。
4.  如果不是，请给出错误消息。如果是，注册新用户并为他创建两个新的 UUID（只需执行`import uuid`并`uuid.uuid4()`插入到第一步创建的表中）。
5.  将推荐 UUID 的状态设置为已使用。
6.  在新用户的个人资料页面上显示他的两个推荐链接。

由于猜测特定 UUID 的概率极低（即使您有数百万个），这种方法将阻止任何未提供有效推荐链接的人进行注册。

# image - 组图像页面特定

> ID：16098662
> 
> 赞同：1
> 
> 时间：2013-04-19T06:36:25.133
> 
> 标签：image, vba, ms-word

我想通过使用 word 宏对某个页面或页面范围内的所有图像进行分组，我在文档中对所有图像进行分组的代码，我无法在任何选项中指定页码，有没有办法是吗？如果是，那是什么？

在这里粘贴我的代码：

```
 ActiveDocument.Shapes.SelectAll
     Selection.ShapeRange.Group.Select 
```

For-each 循环也可能有效，但这不是特定于页面的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:49:03.927

请尝试此代码**（已测试）**

```
Sub Gropu_Shapes_By_Page()

    Dim SHP As ShapeRange
    Dim PAG As Page
    Dim REC As Rectangle
    Dim i!

    For Each PAG In ActiveWindow.Panes(1).Pages
        PAG.Rectangles(1).Range.Select
        For Each REC In PAG.Rectangles
            If REC.RectangleType = wdShapeRectangle Then
                REC.Range.ShapeRange.Select False
                i = i + 1
            End If
        Next REC
        If i > 1 Then Selection.ShapeRange.Group.Select
        i = 0
    Next PAG

End Sub 
```

如您所知，很难假设每个页面的开始和结束位置，因为它取决于最终版本文档的纸张布局。因此，这里我们假设在布局`page`中指的是一个。`printpreview`

**编辑一页**的子版本 - 请参阅子内的评论。

```
Sub Gropu_Shapes_for_SinglePage()

    Dim SHP As ShapeRange
    Dim PAG As Page
    Dim REC As Rectangle
    Dim i!

        'your number or variable _
        referring to page number _
        instead of 2 below

    With ActiveWindow.Panes(1).Pages(2)
        .Rectangles(1).Range.Select
        For Each REC In .Rectangles
            If REC.RectangleType = wdShapeRectangle Then
                REC.Range.ShapeRange.Select False
                i = i + 1
            End If
        Next REC
        If i > 1 Then Selection.ShapeRange.Group.Select

    End With

End Sub 
```

如果有人需要，它可以是带有参数的子程序。

# coldfusion - 在coldfusion中带有盐和哈希的hmac sha1

> ID：16098665
> 
> 赞同：0
> 
> 时间：2013-04-19T06:36:27.477
> 
> 标签：coldfusion, sha1, hmac, penetration-testing

现在我正在为我的客户进行渗透测试。我有管理员的哈希（SHA1），但我无法在互联网上解密它，因此我无法访问`/CFIDE/administrator/index.cfm`

但是他在这里的视频[http://www.youtube.com/watch?v=CzXLLZ8ohZU](http://www.youtube.com/watch?v=CzXLLZ8ohZU)，作者生成了一个HMAC哈希，发现哈希和隐藏在页面中的盐，并成功登录管理员页面。

我试图编写一个脚本来做同样的事情，但失败了。这是代码：

```
import hmac
import hashlib

digest_1 = hmac.new('salt here','SHA1 hash here',hashlib.sha1)

result =  digest_1.hexdigest()

print result.upper() 
```

但是我失败了！有人能告诉我如何在coldfusion中生成HMAC哈希吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:31:15.130

CF 10+:

```
HMac(message, key [,algorithm] [,encoding]) 
```

[http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WS932f2e4c7c04df8f744b691e1353e37d519-8000.html](http://help.adobe.com/en_US/ColdFusion/10.0/CFMLRef/WS932f2e4c7c04df8f744b691e1353e37d519-8000.html)

CF 9 or below:

Crypto.cfc - Crypto / Security Methods For ColdFusion

[https://github.com/bennadel/Crypto.cfc](https://github.com/bennadel/Crypto.cfc)

# jquery - 如何删除 AJAX XML 响应的外部元素 - 第 2 部分

> ID：16098677
> 
> 赞同：0
> 
> 时间：2013-04-19T06:37:59.327
> 
> 标签：jquery, xml, dom

好吧，这个人公平地击败了我。需要帮助，因为我在这个上浪费了几个小时。请看我之前回答过的同样的问题，但现在证明实际上并没有做我想做的事 -[如何删除 AJAX XML 响应的外部元素](https://stackoverflow.com/questions/16091718/how-to-remove-outer-element-of-ajax-xml-response)

场景：服务器端向客户端浏览器发送一个 text/xml 响应负载，如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?><tbody><tr data-tt-parent-id="" data-tt-id="12345678" data-tt-branch="false"><td><span class="file">Total</span></td><td>data</td><td>data</td></tr></tbody> 
```

我需要清除 XML 标记标头，剥离 tbody 外部元素，并且可以接受为 DOM 兼容的 HTML，以便插入到 id="tree" 的表的 tbody 中。

为了澄清，我要求：

```
<tr data-tt-parent-id="" data-tt-id="12345678" data-tt-branch="false"><td><span class="file">Total</span></td><td>data</td><td>data</td></tr> as compliant HTML that will work with .html() or .append() etc 
```

理想情况下，我希望利用 JQuery 解决方案，但现在纯 JavaScript 仍然可以完成这件事。

这个问题真的让我很头疼。请帮助我了解我在这方面明显出错的地方。我尝试了与同一问题相关的上一个问题给出的各种组合。谢谢大家的帮助。我承认我还不是 jquery 的老手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:45:11.733

尝试

```
$(data).find('tbody').contents(); 
```

演示：[Plunker](http://plnkr.co/edit/qwtOmXXJMzohVQuO9zmZ?p=preview)

前任：

```
$.ajax({
    url:'data.xml',
    datatype: 'xml'
}).done(function(data){
    $('table').append($(data).find('tbody').contents())
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:40:18.587

好的，这就是我为使其正常工作所做的工作。警告这一点，我真的很喜欢 Arun 提供的解决方案，但出于某种原因（尽管在调试器中一切看起来都很棒），它只是没有在我的情况下正确更新 DOM（现代 firefox）。所以这是我采取的丑陋方法：

```
$.ajax({
    async : false, 
    contentType: "text/xml; charset=utf-8",
    url : "/topnodes" 
}).done(function(xmlResponse) {
    $strData = xmlToString(xmlResponse);
    $out = $strData.replace('<?xml version="1.0" encoding="UTF-8" standalone="yes"?>', "");
    $out = $out.replace('<tbody>', "");
    $out = $out.replace('</tbody>', "");
    var rows = $($out).filter("tr");
    $('#tree tbody').html(rows);
   // do other stuff...
}); 
```

我不得不将这个东西从 XML 世界转换回标准 jquery 世界可以处理的东西，因此使用了方便的 xmlToString() 方法（参见上一篇文章）。然后只需过滤掉 tr 元素并使用 html() 放置在 tbody 中。

Arun 的方法在调用 .html() 之前看起来都很棒，然后只是无法更新 DOM。如下：

```
$.ajax({
    async : false, 
    contentType: "text/xml; charset=utf-8",
    url : "/topnodes" 
}).done(function(xmlResponse) {
   var rows = $(xmlResponse).find('tbody').contents();
   $('#tree tbody').html(rows);
   // do other stuff...
}); 
```

Arun - 如果您仍在阅读这篇文章并且知道如何使用上述内容（避免所有这些字符串替换和 xml 到字符串方法调用等，如果您能与我分享这些信息，我会非常感兴趣。谢谢您的重视贡献。

我暂时不会将此标记为正确答案，以防有更简洁的方法来获得结果。但如果有人很难找到类似的解决方案，它确实有效。

# c# - 使用 Quartz 调用 MVC ActionResult

> ID：16098681
> 
> 赞同：1
> 
> 时间：2013-04-19T06:38:10.967
> 
> 标签：c#, asp.net-mvc, quartz.net, actionresult

我正在尝试设置石英以使用 SSE（服务器发送的事件）将值流式传输到客户端。我想做的是每 5 秒在控制器中调用一次 ActionResult，这会将更新后的值发送给客户端。目前我已经设置了 Quartz 来触发 的`Execute()`方法`MtGoxTickerJob`，该类派生自 `IJob`. 我无法以这种方式调用 ActionResult，因为 MtGoxTickerJob 不在控制器的上下文中（似乎有办法做到这一点，但都是丑陋的解决方法）。有没有办法将 MVC ActionResult 设置为由 Quartz 调度程序触发的作业？

```
 //Quartz Scheduler

        // construct a scheduler factory
        ISchedulerFactory schedFact = new StdSchedulerFactory();
        // get a scheduler
        IScheduler sched = schedFact.GetScheduler();

        IJobDetail jobDetail = JobBuilder.Create<MtGoxTickerJob>()
        .WithIdentity("TestJob")
        .Build();
        ITrigger trigger = TriggerBuilder.Create()
            .ForJob(jobDetail)
            .WithCronSchedule("0/5 * * * * ?")
            .WithIdentity("TestTrigger")
            .StartNow()
            .Build();
        sched.ScheduleJob(jobDetail, trigger);
        sched.Start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:27:46.707

使用常规的 http 客户端调用该操作怎么样？最后，如果它返回一个动作结果，那么您可能应该对它进行 http 调用。

# android - Android：像在 Google Keep 中一样检查后删除检查列表项

> ID：16098682
> 
> 赞同：2
> 
> 时间：2013-04-19T06:38:11.203
> 
> 标签：android, android-layout, user-interface

我正在开发一个应用程序，允许用户在 Google Keep 中添加注释和检查列表。所以我现在面临的挑战是，一旦检查了清单，我就需要删除文本。知道怎么做吗？

![在此处输入图像描述](https://i.stack.imgur.com/nrUje.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:45:18.737

使用自定义视图并抓取选中项目的选定位置并设置`paintFlags`如下：

```
 yourTextView.setPaintFlags(yourTextView.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T06:46:44.240

您可以通过 getView 方法中的 onCheckedChangedListener 处理复选框单击。

请参阅此[博客，您可以](http://lalit3686.blogspot.in/2012/06/today-i-am-going-to-show-how-to-deal.html)[在此处](https://github.com/lalit3686/ListViewCheckBox)找到示例

并打击 textview 使用paint flag

```
TextView tv=(TextView) v.findViewById(android.R.id.text1);
tv.setPaintFlags(tv.getPaintFlags() | Paint.STRIKE_THRU_TEXT_FLAG); 
```

看到这个[答案](https://stackoverflow.com/a/7484525/792232)

# mysql - 在 MySQL 数据库中更新价格

> ID：16098690
> 
> 赞同：1
> 
> 时间：2013-04-19T06:38:37.747
> 
> 标签：mysql, phpmyadmin, opencart

1.  我有一个包含两列的 LibreOffice Calc 文件：`id | new_price`
2.  我的 OpenCart 数据库表被调用`product`并具有以下相关列：`id | price`

我需要根据Calc 文件中的值`price`在数据库中更新.`id``new_price`

我有 phpmyadmin 可用，但我不知道该怎么做。

你能指导我如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:43:18.690

使用 phpmyadmin 中的导入功能将文件加载到新表中，假设调用`new_table`然后执行：

```
UPDATE 
    product
SET 
    price = 
    (
        SELECT 
            new_price 
        FROM 
            new_table 
        WHERE 
            new_table.id = product.product_id
    )
WHERE
    product.product_id IN 
    (
        SELECT
            id
        FROM
            new_table
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:15:52.263

好的，您有多种选择如何实现这一点。

1.  用 PHP 编写一个导入/更新脚本，它将加载 CSV（XML、TXT - 使用您熟悉的那个...）文件（从您的 Calc 文件创建）并循环更新所有产品...
2.  与 1 相同。但不是 CSV 您将使用带有适当 XLS 解析器的原始 XLS 文件...
3.  使用`phpMyAdmin`将文件导入新（临时）表并运行查询以使用新临时表中的值更新产品 - 查询检查**Andrius 的答案**。

假设您坚持使用第一个选项（因为第三个选项已经回答，而第二个选项使用正确的解析器非常相似）并且最终的 CSV 文件如下所示：

```
1;25.900
3;19.990
11;5.250
... 
```

现在您只需要加载文件并使用[`fgetcsv()`](http://php.net/fgetcsv)函数 - 检查 PHP 文档以了解如何使用它。在 while 循环中调用这个 SQL 查询：

```
$query = "UPDATE `" . DB_PREFIX . "product` SET `price` = {$line[1]} WHERE `product_id` = {$line[0]}"; 
```

假设在您的 while 循环中，a`$line`是当前正在读取的 CSV 文件中的一行。

然后，您可以将该脚本用作新控制器（在其`index`操作中），或者将其添加到您现有的产品控制器中作为新操作...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T06:42:58.487

您需要学习如何在 php.ini 中读取文件。您需要提取每个 id 的价格并将其更新到数据库中。了解[file-get-contents()](http://php.net/manual/en/function.file-get-contents.php)函数。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T07:01:39.860

加载数据并插入到您的 OpenCart 表中

将数据输入文件“../LibreOffice_Calc.txt”加载到表 OpenCart

# iphone - 蓝牙数据传输 iPhone 到 iPhone

> ID：16098703
> 
> 赞同：0
> 
> 时间：2013-04-19T06:39:26.173
> 
> 标签：iphone, ios, bluetooth

我想通过蓝牙为 iOS 发送 20-30 mb 数据。我查看了 Game Kit 和其他示例，例如 Send Farts - [http://vivianaranha.com/apple-gamekit-bluetooth-integration-tutorial/](http://vivianaranha.com/apple-gamekit-bluetooth-integration-tutorial/)和 BeamIt - [http://arctouch.com/beamit/](http://arctouch.com/beamit/)。它们的速度似乎都非常低，大约每分钟 2mb。谁能给我一个更快的解决方案？

# javascript - ajax调用后重新加载画布javascript

> ID：16098704
> 
> 赞同：0
> 
> 时间：2013-04-19T06:39:32.147
> 
> 标签：javascript, ajax, canvas

场景：使用 ajax 驱动的分页列出的基于 Canvas 的投资组合项目。

问题：使用 ajax 加载下一页内容后，脚本标签不在画布标签内。

尝试：在画布标签之前添加脚本标签，这也没有加载（所以加载脚本肯定有问题）。

研究：[jquery script not working](https://stackoverflow.com/questions/2162496/inline-jquery-script-not-working-within-ajax-call)，显然由于安全原因您无法检索脚本。

可能的替代方案：从画布标签外部添加画布内容，但困难在于传递动态创建的投资组合标题标签！

代码：

```
 <ul id="products-list">
        <?php
            $i = 0;
            while($the_list->have_posts()): $the_list->the_post(); //wordpress loops through posts
        ?>

        <li  class="product-item<?php echo $i;?>">
            <script>functionForMakingACanvasOverlayUsingThePostTitle("<?php echo get_the_title() ?>");</script>
            <canvas></canvas>
        </li>

        <?php $i++; ?>  

    <?php endwhile; ?>
    </ul> 
```

每页显示 6 项，下一个按钮使用 ajax 调用接下来的 6 项

建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:01:44.907

myYou 不能在不调用最讨厌的`eval`方法的情况下使用 AJAX 添加 javascript 代码。在你的情况下，你不需要。您的答案是在对象上调用外部 javascript，而不是直接调用 javascript。您给我们的代码非常稀疏，所以我在下面的想法纯粹是出于演示目的 - 您需要根据您的实际情况对其进行翻译：

```
<canvas><div id="mytitle"></div></canvas>
<script>
    function drawTitleOverlay(title){
        var titleoverlayhtml = buildTitleOverlayHTMLFromTitle(title);
        document.getElementById('mytitle').innerHTML = titleoverlayhtml;
    }

    function nextPage(){
        var data = getAJAXData();
        var title = getTitleFromData(data);
        drawTitleOverlay(title);
    }
</script> 
```

# fitch-proofs - 给定 ((p ⇒ q) ⇒ r)，使用 Fitch 系统证明 ((p ⇒ q) ⇒ (p ⇒ r))

> ID：16098706
> 
> 赞同：3
> 
> 时间：2013-04-19T06:39:42.910
> 
> 标签：fitch-proofs

在给定 ((p ⇒ q) ⇒ r) 的情况下，我正在尝试使用 Fitch System 来证明
((p ⇒ q) ⇒ (p ⇒ r))。关于我应该如何进行的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:41:36.770

这些步骤将帮助您证明这一点：

```
1 (p => q) => r             Premise
2   p => q                  Assumption
3    p                      Assumption
4    q                      Implication Elimination: 2,3
5    r                      Implication Elimination: 1,2
6   p => r                  Implication Introduction: 5
7   (p => q) => (p => r)    Implication Introduction: 6 
```

# java - 如何使用 JDOM 将 JTree 数据导出为 XML 文件

> ID：16098718
> 
> 赞同：0
> 
> 时间：2013-04-19T06:40:27.753
> 
> 标签：java, swing, jtree, jdom-2

我有一个 jtree，需要将每个子级元素另存为 xml，我尝试使用下面的代码来实现它，但是它在转换 xml 文档的数字数据时出错，

错误信息 ：

```
Exception in thread "AWT-EventQueue-0" org.jdom2.IllegalNameException: The name "1001" is not legal for JDOM/XML elements: XML name '1001' cannot begin with the character "1".
    at org.jdom2.Element.setName(Element.java:227)
    at org.jdom2.Element.<init>(Element.java:161)
    at org.jdom2.Element.<init>(Element.java:173) 
```

错误指出，**Element el = new Element(node.toString());**

错误的原因可能是什么？

```
// Save the XML file which has been modified.
    private void saveMsg(TreeModel model) {     
            FileFilter filter = new FileNameExtensionFilter("xml files (*.xml)","xml");
            fileChooser.addChoosableFileFilter(filter);
            fileChooser.setCurrentDirectory(new File(""));
            fileChooser.setDialogTitle("Save XML file");            

            if (fileChooser.showSaveDialog(frame) == JFileChooser.APPROVE_OPTION){
                //File file = fileChooser.getSelectedFile();
                TreeModel tModel = xmlTree.getModel();              
                int childCount = tModel.getChildCount(tModel.getRoot());
                logger.info("Messages to be sent : " + childCount);

                for(int i=0; i<childCount; i++){
                    // go through each xml messages.
                    jtree2Xml(tModel.getChild(tModel.getRoot(), i)); 
                }                   
            }       
    } // End of Save XML file.  

    private void jtree2Xml(Object node) {           
            Document doc = new Document();          
            Element root = createTree(doc, xmlTree.getModel(), node);               
            doc.addContent(root);           
            XMLOutputter out = new XMLOutputter(Format.getPrettyFormat());              
            try {
                out.output(doc, System.out);
                out.output(doc, new FileWriter(file));
                System.out.println("Saved the xml file...");
            } catch (IOException e) {
                e.printStackTrace();
                logger.error("Xml file saving error : ");
            }
    } // End of the method.

    // Read through the document's elements.
    private static Element createTree(Document doc, TreeModel model, Object node) {         
        **Element el = new Element(node.toString());**          
        for (int i = 0; i < model.getChildCount(node); i++) {           
            Object child = model.getChild(node, i);
            el.addContent(createTree(doc, model, child));           
        } // End of the while loop.
        return el;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T10:06:31.820

来自 JDOM 的信息非常清楚。元素名称不能以字符“1”开头。这来自 XML 规范[http://www.w3.org/TR/2004/REC-xml11-20040204/#NT-NameStartChar](http://www.w3.org/TR/2004/REC-xml11-20040204/#NT-NameStartChar)

您应该为元素使用固定名称，并将 JTree 节点 toString 放在一个属性中。

```
 <jtreenode value="1001"/> 
```

罗弗尔

# apache - 在 url 中使用 WWW 时的 Htaccess 重定向循环

> ID：16098720
> 
> 赞同：1
> 
> 时间：2013-04-19T06:40:35.740
> 
> 标签：apache, .htaccess, mod-rewrite

我正在努力使我的网站的网址对 SEO 来说很漂亮，但我遇到了一个问题，即当转到“obliquedev.x10.mx”时，网站显示正常，但当转到“www.obliquedev.x10.mx”时，我得到了一个重定向循环错误。

错误：http: [//i.stack.imgur.com/xeMJ3.png](http://i.stack.imgur.com/xeMJ3.png)

这是我网站根目录中的 .htaccess ：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteRule ^$ Public/ [L]
    RewriteRule (.*) Public/$1 [L]
</IfModule> 
```

这是 Root/Public 中的 .htaccess ：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.+)$ index.php?url=$1 [L]
</IfModule> 
```

有谁知道可能导致此问题的原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:19:05.170

您必须使用 a[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)来排除`Public`被重写

```
RewriteCond %{REQUEST_URI} !^/Public
RewriteRule ^.*$ /Public/$0 [L] 
```

您也不需要两条规则，这条规则涵盖了两种情况。

# java - 如何在 Solr 的 CSV 响应中打印我们自己的 Coumn 名称？

> ID：16098724
> 
> 赞同：0
> 
> 时间：2013-04-19T06:41:04.647
> 
> 标签：java, solr, solrj

我想从 solr 获取 CSV 格式的响应并将响应写为 CSV 文件。我在 Solr 中使用 CSV Foramt Options 完成了这项工作。我已将 csv.headerfields 设置为 true。标头字段显示为 schema.xml 中指定的字段名称......无论如何在 Solr 中将标头字段打印为用户定义的字段名称？例如，我在 schema.xml 中将字段名称为“personId”...但在 CSV 响应中我想将标题字段打印为“身份编号”...是否可以在 Solr 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T10:39:08.613

[检查SOLR-1205](https://issues.apache.org/jira/browse/SOLR-1205)引入的字段别名功能，这将允许您定义别名。

检查[Field_alias](http://wiki.apache.org/solr/CommonQueryParameters#Field_alias)

似乎 Alias 不适用于[SOLR-4671的 CSV 响应编写器检查补丁](https://issues.apache.org/jira/browse/SOLR-4671)

# php - 通过 Amazon Simple Mail Service 向用户发送批量邮件

> ID：16098727
> 
> 赞同：1
> 
> 时间：2013-04-19T06:41:19.227
> 
> 标签：php, amazon-web-services, while-loop, amazon, amazon-ses

在我的一个网络应用程序中，我必须向我的用户发送电子邮件（所有邮件都是跨国的，用户接受隐私政策和条款和条件）。

目前亚马逊盛大我每 24 小时发送 10000 封电子邮件，我们可以轻松增加配额。我的问题是我们每秒只能通过亚马逊发送 5 封电子邮件。所以我对处理相同的 PHP 脚本（循环）有点困惑。一个普通的 PHP 循环可以处理大量电子邮件吗？

while 循环是否有任何延迟可用？这样我们就可以将其限制为每秒 2-3 封电子邮件。由于脚本在 cron 作业中工作

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:10:06.790

这将需要一点代码，但并不多，但是如果您将生成电子邮件的任务与实际发送电子邮件的任务分开，您可以使用 amazon SQS 和 cron 作业来发送邮件。

我所做的是我有一个名为“EmailQueue”的 SQS 队列，其中包含消息中电子邮件的“收件人”、“主题”和正文。生成要发送的电子邮件的作业只是将所有这些消息放入队列中，尽可能快地/想要。

然后，我有一个计划任务，该任务每分钟运行一次，该任务进入队列并下载一定数量的电子邮件以发送出去，具体取决于到位的节流阀。cron 作业根据存储在 SQS 消息中的信息构建和发送电子邮件消息，并在发送消息时删除它们 - 它不需要访问任何其他内容，因为发送电子邮件所需的一切都封装在 SQS 中信息。

您可以通过 cron 作业的时间来控制油门。就我而言，我的工作每次运行最多只能处理 5 封电子邮件，然后才会退出。

使用队列和 cron 作业还可以消除 UI 用户可能存在的任何延迟（假设存在延迟），因为将消息加载到队列中速度很快，而 SMTP 电子邮件有时很慢，这可能会导致明显的延迟最终用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-26T06:39:17.317

亚马逊提供了以低成本发送批量电子邮件的最佳选择，但它并没有为他们的服务提供最佳 gui。您可以使用[Bullmailer](https://bullmailer.com/)等外部服务从 amazon ses 发送电子邮件。

它提供列表管理、活动、电子邮件自动化等更多功能，并为您的活动提供详细报告

# javascript - Javascript移动重定向问题

> ID：16098729
> 
> 赞同：2
> 
> 时间：2013-04-19T06:41:27.253
> 
> 标签：javascript, redirect, mobile

嗨，这已经困扰我几天了，我想重定向到移动网站，以便那些从屏幕宽度小于 699 的设备检查网站的人。我正在使用这个脚本进行重定向：

```
<script type="text/javascript">
<!--
if (screen.width <= 699) {
window.location = "http://www.mywebsite.com.au/mobile/";
}
//-->
</script> 
```

当我通过 firefox 检查网站但在 Dolphin 浏览器中不工作时，脚本工作正常。

可能只有我的手机才有 Galaxy S2。

提前感谢任何可以帮助我的人，我真的很感激！

新更新：-----好吧，这变得非常有趣。当我将屏幕宽度减小到 599 时，脚本在 Dolpin 浏览器中运行。(screen.width <= 599) ---

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T07:09:10.443

我建议使用用户代理检测这样的东西

```
var isMobile = function() {
   //console.log("Navigator: " + navigator.userAgent);
   return /(iphone|ipod|ipad|android|blackberry|windows ce|palm|symbian)/i.test(navigator.userAgent);
 }; 
```

像这样重定向

```
if(isMobile()) {
       window.location.href = "http://www.mywebsite.com.au/mobile/";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:53:35.960

window.location 是一个对象，所以您可以尝试以下操作：

```
window.location.replace("http://www.mywebsite.com.au/mobile/"); 
```

见[window.location.replace](https://developer.mozilla.org/en-US/docs/DOM/window.location#Methods)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:50:41.483

我的手机（魅族 MX2）工作正常。我不知道 Dolphin 浏览器的版本。你可以测试'screen.width'和'document.body.clientWidth'

我建议你可以这样写：

```
<script>     
    var userAgent = navigator.userAgent.toLowerCase();
    checkOS = function (r) {
        return r.test(userAgent);
    };
    var PlatformOS = {
        isWindows: checkOS(/windows nt|win32/),
        isMac: checkOS(/macintosh|mac os x/),
        isAndroidPad: checkOS(/nexus 7|xoom /),
        isAndroid: checkOS(/android/),
        isIphone: checkOS(/iphone/),
        isIpad: checkOS(/ipad/),
        isWindowsPhone: checkOS(/windows phone/),
        OS: "",
    }
    if (PlatformOS.isIpad || PlatformOS.isWindows || PlatformOS.isAndroidPad) {
        location.href = "http://www.mywebsite.com.au/pc/";
    }
    else if (PlatformOS.isIphone||PlatformOS.isWindowsPhone) {
        location.href = "http://www.mywebsite.com.au/mobile/";
    }

    window.onload = function () {            
        var currWidth = document.body.clientWidth;
        if (currWidth >= 699)
            location.href = "http://www.mywebsite.com.au/pc/";
        else
            location.href = "http://www.mywebsite.com.au/mobile/";
    }
</script> 
```

# facebook-graph-api - 如何获取非当前会话用户的好友列表？

> ID：16098730
> 
> 赞同：2
> 
> 时间：2013-04-19T06:41:37.747
> 
> 标签：facebook-graph-api

我已经阅读了 facebook api

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

我尝试使用非当前会话请求好友列表，如下所示：

* * *

1.通过我的应用程序获取访问令牌

> [https://graph.facebook.com/oauth/access_token](https://graph.facebook.com/oauth/access_token)？client_id=YOUR_APP_ID&client_secret=YOUR_APP_SECRET&grant_type=client_credentials

我肯定获得了访问令牌。如下所示：

`access_token=1234567890|-abcdefghijkl`

2\. 使用访问令牌请求好友列表。

`https://graph.facebook.com/1023456789/friendlists?access_token=1234567890|-abcdefghijkl`

但是，已收到以下错误消息。

```
{
   "error": {
      "message": "A user access token is required to request this resource.",
      "type": "OAuthException",
      "code": 102
   }
} 
```

ID 不是当前用户会话。如您所知，如果使用当前用户会话。我可以毫无问题地获取朋友列表。

`https://graph.facebook.com/me/friends?access_token=1234567890|-abcdefghijkl`

我的问题可以总结如下：

**如何使用不是当前会话的用户 ID 获取好友列表？我认为当我获得 accesstoken 时必须获得好友列表许可。如果是对的。我怎么做？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:05:35.973

假设您获得的访问令牌是用户被重定向到 FB 登录页面并重定向回您的应用程序然后继续阅读的地方。

文档可能有点混乱。[该页面](https://developers.facebook.com/docs/reference/login/public-profile-and-friend-list/)指出：

> 当用户登录您的应用并且您未请求其他权限时，该应用将只能访问该用户的公开个人资料和好友列表。

如果不深入研究专门针对权限列表的文档，您可能会认为`read_friendlists`添加到`scope`用户的好友列表时将可用，但事实并非如此。[该页面](https://developers.facebook.com/docs/reference/login/extended-permissions/)清楚地表明，阅读 Facebook 用户的好友列表需要`extended permission`.

因此，您需要添加`read_friendlists`为您的范围之一。这是一个示例请求：

```
https://www.facebook.com/dialog/oauth?type=user_agent
    &client_id=YOUR_FB_APPID
    &redirect_uri=YOUR_DOMAIN
    &scope=read_friendlists 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:56:42.820

`read_friendlists`当用户对您的应用进行身份验证时，您需要征求用户的许可。而且，要阅读好友列表，您需要用户访问令牌，而不是应用访问令牌。显然，相关用户的访问令牌。

此时，您有 1-2 小时的时间，直到他们的 access_token 过期。在此期间，您可以访问用户的好友列表。令牌过期后，您需要等到他们再次登录。或者，您可以查看[Extending Access Tokens](https://developers.facebook.com/docs/howtos/login/extending-tokens/)。

# apache - 从lift scala中的props文件中读取数据库凭据

> ID：16098732
> 
> 赞同：1
> 
> 时间：2013-04-19T06:41:53.650
> 
> 标签：apache, scala, properties, jetty, lift

我刚刚开始使用 Scala 和提升框架工作。我正在尝试使用普通 JDBC 连接我的数据库。我希望从 default.props 文件中读取我的数据库凭据。到目前为止，我尝试了以下代码：在我的 default.props 文件中：

```
db.class=com.mysql.jdbc.Driver
db.url=jdbc:mysql://localhost/scalatest
db.user=root
db.password= 
```

在我的 boot.scala 文件中，我尝试像这样进行 JDBC 连接：

```
val filename = "/src/main/resources/props/default.props"
Props.whereToLook = () => ((filename, () => Full(new FileInputStream(filename))) :: Nil)

val DBDriver = Props.get("db.class").toString
val DBURL =  Props.get("db.url").toString
val DBUsrName =  Props.get("db.user").toString
val DBPass = Props.get("db.password").toString

Class.forName(DBDriver)
val conn  = DriverManager.getConnection(DBURL,DBUsrName, DBPass) 
```

但是在使用 container:start 命令运行服务器时，会显示 fileNotFoundException。谁能告诉我在这里要做的事情。提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T11:40:09.307

Delete the line where you change `Props.whereToLook`. It should already be set to the right values. ([more info on the Lift wiki](https://www.assembla.com/spaces/liftweb/wiki/Properties))

A note: The contents of the `src/main/resources` folder will normally be added directly into your classpath at runtime. So the file `src/main/resources/props/default.props` should be available via a call to `someClassInYourProject.getResourceAsStream("/props/default.props")`. Don't try to refer to a file in your source directory at runtime, as it will only ever cause headaches later on.

# c# - 水晶报告无法连接：登录参数不正确

> ID：16098733
> 
> 赞同：-1
> 
> 时间：2013-04-19T06:42:05.850
> 
> 标签：c#, asp.net, crystal-reports

嗨朋友我已经创建了一个带参数的水晶报表，它在源代码中执行时成功运行，但在 IIS 之后配置时它没有加载，它显示错误，如无法连接登录参数。请检查我的代码并纠正我。

嗨朋友，如果我评论 oStream = (MemoryStream)reportdocument.ExportToStream(ExportFormatType.PortableDocFormat); 这一行和 Response.BinaryWrite(oStream.ToArray()); 此报告是在 IIS 中生成的，但我没有得到正确的 pdf 格式请帮助我，我想以 pdf 格式生成请指导我

```
public partial class frm_MRPrint : System.Web.UI.Page
{
    SqlConnection Con = new SqlConnection(ConfigurationManager.AppSettings["conn"].ToString());
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            mr();
        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {

        MemoryStream oStream;
        Response.Clear();
        Response.Buffer = true;

        ReportDocument reportdocument = new ReportDocument();

        reportdocument.Load(Server.MapPath("MR.rpt"));
        reportdocument.SetDatabaseLogon("sa", "Admin123", "vivek", "PURCHASE");

        reportdocument.SetParameterValue("MRNO", ddlmrno.SelectedItem.Text);

        CrystalReportViewer1.ReportSource = reportdocument;

        oStream = (MemoryStream)reportdocument.ExportToStream(ExportFormatType.PortableDocFormat);
        Response.ContentType = "application/pdf";
        try
        {

            //write report to the Response stream

            Response.BinaryWrite(oStream.ToArray());

            Response.End();

        }

        catch (Exception ex)
        {
            Label2.Visible = true;
            Label2.Text = "ERROR:" + Server.HtmlEncode(ex.Message.ToString());

        }

        finally
        {

            //clear stream

            oStream.Flush();

            oStream.Close();

            oStream.Dispose();

        }

        //in case you want to export it as an attachment use the line below

        //crReport.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, "Your Exported File Name");

    }

    public void mr()
    {

        ddlmrno.Items.Clear();
        ListItem frstitem = new ListItem();
        frstitem.Text = "- Select -";
        ddlmrno.Items.Add(frstitem);
        ddlmrno.SelectedIndex = 0;
        Con.Open();
        string sql = "";
        sql = "select  distinct(MRNO) from dbo.tbl_KKSMR where status=1 order by MRNO asc";
        SqlCommand cmd = new SqlCommand(sql, Con);
        SqlDataReader rdr;
        try
        {
            rdr = cmd.ExecuteReader();
            while (rdr.Read())
            {

                ListItem newItem = new ListItem();
                newItem.Text = rdr["MRNO"].ToString().Trim();
                newItem.Value = rdr["MRNO"].ToString().Trim();
                ddlmrno.Items.Add(newItem);
            }
            rdr.Close();
        }
        catch (Exception ex)
        {
            Response.Write(ex.Message);
        }
        finally
        {
            cmd.Dispose();

        } Con.Close();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:33:18.547

这是一个访问问题。在你的 web.config

```
<identity impersonate="true|false" 
          userName="domain\username"
          password="password"/> 
```

给管理员凭据。并为您的项目文件夹提供适当的权限。它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T06:03:17.817

这是 Aspx 文件......

```
 <CR:CrystalReportViewer ID="CrystalReportViewer1" runat="server" 
                    AutoDataBind="true" oninit="CrystalReportViewer1_Init"  /> 
```

这是cs文件……

```
 using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Web;
        using System.Web.UI;
        using System.Web.UI.WebControls;
        using System.Reflection;
        using CrystalDecisions.CrystalReports.Engine;
        using CrystalDecisions.Shared;
        using CrystalDecisions.Reporting;
        using CrystalDecisions;
        using System.Data.SqlClient;
        using System.Data;
        using BusinessAccessLevel;
        using BusinessAccessLevel.Masters;

        namespace TexERP.ReportCrystal.Sales
        {
            public partial class CityReportCry : System.Web.UI.Page
            {
                ReportDocument doc;
            }

         protected void btnShowReport_Click(object sender, EventArgs e)
                {
                    OldLoadReport();            
                }

              private void OldLoadReport()
                {
                    doc = new ReportDocument();
                    doc.Load(Server.MapPath("MR.rpt"));
               doc.SetDatabaseLogon("sa", "Admin123", "vivek", "PURCHASE", false);
               reportdocument.SetParameterValue("@MRNO", ddlmrno.SelectedValue);
                CrystalReportViewer1.ReportSource = doc;
                }

                protected void CrystalReportViewer1_Init(object sender, EventArgs e)
                {
                    OldLoadReport();
                }
            }
        } 
```

直接导出为 .Pdf 的代码

```
 ExportOptions CrExportOptions ;
                DiskFileDestinationOptions CrDiskFileDestinationOptions = new DiskFileDestinationOptions();
                PdfRtfWordFormatOptions CrFormatTypeOptions = new PdfRtfWordFormatOptions();
                CrDiskFileDestinationOptions.DiskFileName = "c:\\csharp.net-informations.pdf";
                CrExportOptions = doc.ExportOptions;
                {
                    CrExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;
                    CrExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;
                    CrExportOptions.DestinationOptions = CrDiskFileDestinationOptions;
                    CrExportOptions.FormatOptions = CrFormatTypeOptions;
                }
                doc.Export(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-08T07:33:34.607

此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-06-17T16:15:40.107

对于遇到相同问题的任何人，还要检查您的报告的数据源提供程序是否为“SQL Native Client”。如果是，这在您没有安装 SQL 客户端的生产服务器中不起作用。它必须是“SQLOLEDB”，因为它可以在没有安装 SQL 客户端的机器上工作。

这就是为什么我的报告在我的测试服务器（具有 SQL 服务器客户端）上工作而在我的生产服务器上不起作用的原因。

在某些情况下，它与登录凭据无关。Crystal 报告在无法与您指定的提供者通信时会给出该错误。

# php - pyrocms 中的表前缀

> ID：16098734
> 
> 赞同：0
> 
> 时间：2013-04-19T06:42:13.857
> 
> 标签：php, mysql, pyrocms

我正在处理 pyrocms 模块中的自定义多重删除，如何在我的代码模型中使用删除：

```
 protected $_table = 'accounts';
    public function mulDelete($muldelete) 
        {   
            $sql = 'delete from ' . $this->_table . ' where id IN('.$muldelete. ')';
            $query = $this->db->query($sql);

        } 
```

> 但是 $this->_table 正在返回帐户而不是 username_accounts，如何在 pyrocms 的 from 子句中检查用户名表前缀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:56:23.420

```
$sql = 'delete from ' .'username_'. $this->_table . ' where id IN('.$muldelete. ')'; 
```

或者

```
protected $_table = 'username_accounts'; 
```

或动态地

```
 $CI =& get_instance();
    $CI->load->database();
    echo $CI->db->dbprefix; 
```

# php - Wordpress - 在菜单和内容之间添加一个小部件

> ID：16098738
> 
> 赞同：0
> 
> 时间：2013-04-19T06:42:25.287
> 
> 标签：php, html, css, wordpress, wordpress-theming

我刚刚设置了我的第一个 wordpress 网站，我需要能够在我的菜单和内容之间添加幻灯片 2，就像你在很多网站上看到的那样。

我已经有了主题附带的内置滑块，但出于各种原因我需要使用 slidedeck 2。

这是我的意思和我想要做的图片：[解释图片](http://i.imgur.com/6OKaBdl.jpg)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:57:56.440

您需要打开您的主页文件（可能是索引或页面或模板或标题）并在需要幻灯片 2 时输入以下代码：

```
<?php echo do_shortcode( "[SlideDeck2 id=your_id]" ); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:02:20.817

如果你需要一个完全可定制的幻灯片，我推荐你[这个](http://wordpress.org/extend/plugins/slideshow-jquery-image-gallery/)插件。

使用此插件，您可以在页面内添加幻灯片或使用这样的短代码发布内容 [slideshow_deploy id='slide_id']

如果您想在某个特定位置打印幻灯片，可以使用此功能：

```
echo do_shortcode('[slideshow_deploy id='321']'); 
```

在您的主题页面中使用此代码，即。header.php 或 page.php 或 single.php 或任何你需要的地方，

# selenium - 错误：在会话 a60ba70a450c48c2901bc2b5edb3d315 和杀死 Firefox 上找不到元素名称 = user_login

> ID：16098739
> 
> 赞同：0
> 
> 时间：2013-04-19T06:42:30.030
> 
> 标签：selenium

我正在使用 Selenium 从包含 6 行和 7 列的 Excel 表中读取值。我有一个 Java 文件和一个 Selenium 文件。

以下是 Selenium File 中使用的方法

@前 `setup()`

调用`getDataFromExcel()`并将其存储在 valueMap 数组中。

@测试 `Registration()`

在此函数中迭代 valueMap 数组。

@后 `selenium.stop()`
`seleniumServer.stop()`

在将 Selenium 文件作为 JUnit 测试执行时，前 2 条记录已成功执行，我收到以下错误

得到结果：错误：在会话中找不到元素名称=用户登录 正在杀死 Firefox...

请帮助某人解决此问题，以便我可以进一步进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T14:52:45.513

.stop() 似乎存在一些导致“丢失”会话或元素的问题。尝试使用 .exit() 代替。

# sql-server-2008 - 插入行时按什么顺序添加列的默认值

> ID：16098740
> 
> 赞同：0
> 
> 时间：2013-04-19T06:42:38.857
> 
> 标签：sql-server-2008

```
CREATE TABLE [dbo].[state_record](
    [row_id] [int] NOT NULL,
    [state_id] [smallint] NOT NULL,
    [user_login] [varchar](24) NOT NULL,
    [time_entered] [datetime] NOT NULL,
    [comment] [varchar](256) NOT NULL,
    [end_time] [datetime] NOT NULL
)
ALTER TABLE [dbo].[state_record]  WITH CHECK ADD  CONSTRAINT state_end_time_constraint] CHECK  (([time_entered]<=[end_time]))

ALTER TABLE [dbo].[alert_state_record] ADD  CONSTRAINT [DF__alert_sta__time___3E723F9C]  DEFAULT (getdate()) FOR [time_entered]

INSERT INTO alert_state_record(row_id, state_id, user_login, comment, end_time)
values(1,1,'max','resolving', getdate()) 
```

插入此表有时会产生错误“INSERT 语句与 CHECK 约束“state_end_time_constraint”冲突。这是因为 time_entered 的值是在 end_time 之后计算的。

```
INSERT INTO alert_state_record(row_id, state_id, user_login, comment, time_entered, end_time)
values(1,1,'max','resolving', getdate(), getdate()) however works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:53:15.577

是的，当你运行这个时：

```
INSERT INTO alert_state_record(row_id, state_id, user_login, comment, end_time)
values(1,1,'max','resolving', getdate()) 
```

将`VALUES`考虑子句并评估所有函数，以便插入的实际值可用。如果使用关键字`DEFAULT`，则*不会*与其他评估同时进行评估

只有在评估的后期，系统才会检查是否存在列列表中未提及的任何列或在`VALUES`子句中指定条目的列的默认值`DEFAULT`，并实际评估这些默认约束以获得值那些列。

如果您不走运，对`GETDATE()`（在约束中`VALUES`和在`DEFAULT`约束中）的两次调用将获得两个不同的值。

这与第二种情况不同，在第二种情况下，对`GETDATE()`(in `VALUES`) 的两次调用被认为是同一语句的一部分（我知道在第一种情况下感觉应该是一样的，但事实并非如此），而你'重新保证两个调用将收到相同的值。

# facebook-graph-api - 使用 curl 或某些无浏览器（登录弹出窗口）方法登录 facebook 是否合法有效？

> ID：16098754
> 
> 赞同：0
> 
> 时间：2013-04-19T06:43:46.473
> 
> 标签：facebook-graph-api, curl, facebook-login

我正在尝试制作 facebook 应用程序；但是，我的系统不支持浏览器；为了编写和使用 fb APP，获取访问令牌我的应用程序要做的第一件事就是要求用户登录 facebook。

据我所见，此调用重定向到 facebook 登录，或弹出 facebook 登录。正如我之前所说，我没有浏览器；facebook是否有任何这样的机制可以记录使用某些curl或其他类型的API的使用..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:51:28.170

无论您选择何种身份验证机制，您都必须始终通过 Facebook 身份验证屏幕运行用户，以便在浏览器或类似设备上呈现。

查看[https://developers.facebook.com/docs/concepts/login/login-architecture/](https://developers.facebook.com/docs/concepts/login/login-architecture/)了解更多信息。

# mysql - 如何找出数据库中的表大小

> ID：16098756
> 
> 赞同：1
> 
> 时间：2013-04-19T06:43:49.433
> 
> 标签：mysql

我有一个大型的 Mysql 数据库。它的大小超出了我的预期。

我怎样才能找到它的桌子的大小？我需要找到该表使数据库大小变大。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:47:48.057

您可以按如下方式进行。

```
SELECT table_schema "Data Base Name", 
      sum( data_length + index_length ) / 1024 / 1024 "Data Base Size in MB" 
FROM information_schema.TABLES GROUP BY table_schema 
```

### [在这里阅读](http://www.mindfiresolutions.com/How-to-find-DB-size-and-table-info-in-MYSQL-1040.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T06:49:53.233

使用这个查询

```
show table status from <db_name>; 
```

如果您的数据库名称是用户；然后使用这个：

```
show table status from users; 
```

[检查这个 - Mysql 手册](http://dev.mysql.com/doc/refman/5.1/en/show-table-status.html)

# ruby-on-rails - 指定gem安装目录

> ID：16098757
> 
> 赞同：34
> 
> 时间：2013-04-19T06:43:56.740
> 
> 标签：ruby-on-rails, rubygems

我这里有点麻烦。我正在使用 Rails 2.3 项目（通过 ssh 在生产服务器上工作 - 不要问为什么）。这是[Gemfile](https://gist.github.com/Almaron/5418493)。当delayed_jobs 尝试启动时，输出显示我需要安装bundler gem。问题是 gemdir 是 /var/lib/gems/1.8/ 并且我没有该目录的写入权限。但是 ~/projects/shared/gems/ruby/1.8/gems 下有一个目录，我可以在其中编写。

如何定义 gem 的安装路径？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-11-23T10:55:46.770

要将**foo** gem 安装到指定文件夹，只需使用`--install-dir`选项，即

```
$ gem install --install-dir /path/to/gems/folder foo 
```

在以下情况下会有所帮助：

*   不能使用`bundle install`- 例如，如果想要安装**bundle** gem 本身，或者想要将 gem（未在 Gemfile 中列出）安装到**bundle**文件夹中
*   `sudo gem install`由于缺少默认安装路径的写入权限，命令失败

希望有帮助。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-19T07:27:11.083

您可以将以下内容添加到**config.ru**文件中：

```
ENV['GEM_HOME']="#{ENV['HOME']}/projects/shared/gems/ruby/1.8/gems"
ENV['GEM_PATH']="#{ENV['GEM_HOME']}:/var/lib/ruby/gems/1.8"
require 'rubygems'
Gem.clear_paths 
```

这将告诉您的机架应用程序在哪里寻找宝石。

还要配置你的服务器**.bashrc**：

```
export GEM_HOME="$HOME/projects/shared/gems/ruby/1.8/gems"
export GEM_PATH="$GEM_HOME:/var/lib/ruby/gems/1.8" 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-04-19T06:59:51.997

环境变量`GEM_HOME`定义了 gem 的安装位置。您需要将其设置到所需的位置。该命令是特定于操作系统的。

在 Windows 中是`set`

```
set GEM_HOME=[path]/projects/shared/gems/ruby/1.8/gems 
```

Linux 将是`export`

```
export GEM_HOME=~/projects/shared/gems/ruby/1.8/gems 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-10-19T14:18:19.163

bundler 接受 --path 选项。

```
bundle install --path vendor/bundle 
```

# html - 我可以只使用 Twitter Bootstrap 的某些元素吗？

> ID：16098758
> 
> 赞同：20
> 
> 时间：2013-04-19T06:43:56.913
> 
> 标签：html, twitter-bootstrap, css

我可以只使用引导库的某些元素吗？例如，如果我导入整个库，我的分页会因为我的 CSS 和 Bootstrap 的 CSS 之间的冲突而中断；他们正在覆盖彼此的属性。

如果可能的话，我只想要 Bootstrap 库的按钮和 div 样式属性。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-19T06:57:14.323

您可以在[Twitter Bootstrap 页面的自定义下载中](http://getbootstrap.com/customize/)下载您需要的任何内容。只需选择您需要的任何内容，然后单击下载。

你也可以去[项目官方仓库](https://github.com/twbs/bootstrap)，下载所有的less文件，只编译你需要的，注释文件中你不需要的`bootstrap.less`文件行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T06:55:32.933

好吧，我建议你从引导 CSS 文件中取出特定的 CSS 规则，并将它们放在你自己的 CSS 文件中，因为如果你在你的网站中包含整个引导 CSS 文件，然后只包含 1 或 2 个 CSS 规则，那是没有用的.

您也可以尝试先将引导 CSS 文件放在您网站的 HEAD 部分中，然后再放置您的 CSS 文件。通常，您的 CSS 文件会“更重要”，然后引导程序应用的特定样式将被您自己的规则覆盖。

```
<link bootstrap css definition />
<link your css definition /> 
```

# php - 从十六进制代码创建 UTF-8 字符串

> ID：16098764
> 
> 赞同：3
> 
> 时间：2013-04-19T06:44:28.947
> 
> 标签：php, unicode, utf-8, hex, codepoint

在 C++ 中，可以使用这种表示法创建一个 UTF-8 字符串：`"\uD840\uDC50"`.

但是，这在 PHP 中不起作用。有没有类似的符号？

如果没有，是否有任何内置方法可以创建知道其 Unicode 代码点的 UTF-8 字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T06:57:41.363

我最终像这样实现它：

```
$utf8 = html_entity_decode("&#x4E00;", ENT_COMPAT, 'UTF-8'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-23T10:29:13.023

```
function hexToString($str){return chr(hexdec(substr($str, 2)));}
$result = preg_replace_callback("/(\\\\x..)/isU", function($m) { return hexToString($m[0] ); }, $str); 
```

# android - Android 获取联系人到应用程序

> ID：16098768
> 
> 赞同：5
> 
> 时间：2013-04-19T06:44:47.423
> 
> 标签：android, android-contentprovider, android-contacts

我正在尝试在应用程序内的列表视图中显示来自用户电话的联系人列表。我可以获取联系人，但有些联系人会有多个手机号码，所以我想多次显示那个人。

```
Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    String name, number = "";
    String id;
    c.moveToFirst();
    for (int i = 0; i < c.getCount(); i++) {
        name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
        id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));

        if (Integer.parseInt(c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
            Cursor pCur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id },
                    null);
            while (pCur.moveToNext()) {
                number = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            }
        }
        Log.i("name ", name + " ");
        Log.i("number ", number + " ");
        c.moveToNext(); 
```

想要向用户显示与他拥有的号码一样多的次数。我什至可以仅根据 10 位数长的手机号码将其列入短名单吗？

```
Example

Name: John Doe 
Number 1: xxxxxxxxx
Number 2: xxxxxxxxx

Name: Sarah 
Number 1: xxxxxxxxx 
```

这应该返回三个列表项，如下所示

```
John Doe  xxxxxxxxx
John Doe  xxxxxxxxx
Sarah     xxxxxxxxx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:57:51.910

你可以试试这样的

```
List<PhoneItem> phoneNoList = new ArrayList<PhoneItem();
Cursor c = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
String name, number = "";
String id;
c.moveToFirst();
for (int i = 0; i < c.getCount(); i++) {
    name = c.getString(c.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    id = c.getString(c.getColumnIndex(ContactsContract.Contacts._ID));

    if (Integer.parseInt(c.getString(c.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
        Cursor pCur = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + " = ?", new String[] { id },
                null);
        while (pCur.moveToNext()) {
            phoneNoList.add(new PhoneItem(name, pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER))));
        }
    }
    c.moveToNext();

}

for (PhoneItem row : phoneNoList) {
    Log.i("name", row.name);
    Log.i("number", row.number+"");
}

[...]

private class PhoneItem {
   String name;
   String phone;

   public PhoneItem(String name, String phone) {
       this.name = name;
       this.phone = phone;
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T07:23:53.260

下面的代码将获取所有带有电话号码的联系人。可能有重复，因为同一个联系人可能属于不同的组。您必须循环并消除重复项。

```
String[] projection = new String[]{ ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                                    ContactsContract.CommonDataKinds.Phone.NUMBER,};
String selection = ContactsContract.CommonDataKinds.Phone.HAS_PHONE_NUMBER + "=?" ;  
String[] selectionArgs = new String[] {"1"};                            
Cursor c = context.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                                    projection, 
                                    selection, 
                                    selectionArgs, 
                                    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME
                                    + ", " + ContactsContract.CommonDataKinds.Phone.NUMBER); 
```

# c# - 通过 nPgSQL 接收 NOTIFY 有效负载

> ID：16098770
> 
> 赞同：3
> 
> 时间：2013-04-19T06:44:50.613
> 
> 标签：c#, .net, database, npgsql

目前，我正在使用`NPGSQL`连接器将 PostgreSQL 数据库与我用`VB.Net`.

我尝试使用 PostgreSQL和功能`NOTIFY`将特定表的表更改到前端。我从那次尝试中得到了积极的结果。我成功地得到了从后端到前端的通知。为了实现这一点，我尝试了以下方法：`LISTEN``NOTIFY`

```
Public Sub test()

Dim conn = New NpgsqlConnection("Server=servername;port=portNo; _
           User Id=UID;pwd=PWD;DataBase=DB;")
conn.Open()

Dim command = New NpgsqlCommand("listen notifytest;", conn)
command.ExecuteNonQuery()

AddHandler conn.Notification, AddressOf NotificationSupportHelper

command = New NpgsqlCommand("notify notifytest;", conn)
command.ExecuteNonQuery()

End Sub

Private Sub NotificationSupportHelper(ByVal sender As Object, _
                                      ByVal e As NpgsqlNotificationEventArgs)

'Notified here.

End Sub 
```

这工作正常，但是，PostgreSQL 有一个全新的功能来通知通知可以有一个有效负载，比如`NOTIFY test, 'Hello world'`（其中 Hello world 是有效负载，换句话说，附加信息）。

我想在 Notification 事件处理程序中获取该附加信息`NotificationSupportHelper`。因此，为了得到它，我只是尝试访问`NpgsqlNotificationEventArgs`. 但是我在那次尝试中失败了，因为它只包含 PID 和 Condition 作为其成员。所以我决定看一下[NPGQL 文档](http://npgsql.projects.pgfoundry.org/docs/api/index.html)，从那里，我知道，没有办法在 NPGSQL 版本 1.0 中获得更多信息。但是他们在他们的第二个版本（NPGSQL V 2.0）中为`NpgsqlNotificationEventArgs`称为[AdditionalInformation](http://npgsql.projects.pgfoundry.org/docs/api/index.html)提供了一个额外的成员。但它目前也在建设中。此属性将始终返回 String.Empty（来自[文档](http://npgsql.projects.pgfoundry.org/docs/api/index.html)）。

所以我希望你们理解我想要完成的事情，我只需要在有人提出`payload`的时候在前端接收`notification`。有人知道如何达到我的要求吗？是否有任何其他`connector`可用而不是有效地在前端`NPGSQL`处理`notification event`，这意味着`payload`在前端获得。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-08T12:33:52.457

万一其他人有这个问题。`AdditionalInformation`现在有房源。

```
Private Sub NotificationSupportHelper(ByVal sender As Object,
                                  ByVal e As NpgsqlNotificationEventArgs)
    MsgBox(e.Condition & " " & e.AdditionalInformation)
End Sub 
```

# coded-ui-tests - CodedUI 和 UISpy 的区别

> ID：16098779
> 
> 赞同：0
> 
> 时间：2013-04-19T06:45:24.393
> 
> 标签：coded-ui-tests, ui-spy

CodedUI 和 UISpy 有什么区别？两者都使用相同的机制吗？我需要在我自己的自定义网格控件 [WinForms] 中实现对 UISPY 的支持，以识别每个单元格，就像在 MS DataGridView 中一样。目前 UISPY 可以识别我的整个控件，但不能识别单个单元格。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T06:14:00.093

我不确定 UISpy 是如何工作的，但 CodedUI 使用 UI 自动化框架来访问应用程序中的 UI 组件。

无论如何，您可能希望使用[HawkEye](http://hawkeye.codeplex.com/)或[WinForms Spy 之](http://www.codeproject.com/Articles/4814/A-simple-Windows-forms-properties-spy)类的东西作为开始做您需要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T00:37:28.667

UI Spy 工具已过时且不再可用。开发人员应使用 Windows 软件开发工具包 (SDK) 中提供的其他工具，例如 Inspect.exe。

# git - 使用标签同步树

> ID：16098780
> 
> 赞同：2
> 
> 时间：2013-04-19T06:45:33.583
> 
> 标签：git, repository

我想使用特定标签将远程树同步到我的本地机器。使用 git checkout 以外的标签同步树的最佳方法是什么。因为如果我使用 git checkout 我需要为每个 repo 同步最新的树顶部，然后结帐到那个特定的标签。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-24T10:01:52.557

You can use

```
 repo init -u <path to manifest repo> -m <manifest name> -b refs/tags/<tag_name> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T08:20:13.097

你可以先做一个：

```
git fetch ; git fetch --tags 
```

（2 次提取，只是为了确保获得*所有*提交：请参阅“ [“'git fetch --tags'” 是否包含“'git fetch`'？](https://stackoverflow.com/questions/1204190/does-git-fetch-tags-include-git-fetch) ”）

它不会更新您的本地工作树（与 a 相反`git pull`）。

从那里，您可以执行以下操作：

```
git checkout aTag 
```

（有效，但让您处于分离的[头部](https://stackoverflow.com/questions/3965676/why-did-git-detach-my-head/3965714#3965714)模式）

# java - java中并行数组的并排显示

> ID：16098781
> 
> 赞同：1
> 
> 时间：2013-04-19T06:45:36.710
> 
> 标签：java, parallel-arrays

我对java很陌生，我已经编写了代码来显示以下并行数组的值：

```
short[] Years = {1995, 1997, 1998,1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012};

String[] Months = {"January", "February", "June", "January", "March", "June", "July", "August", "September", "March", "May", "January", "March", "July", "November", "March", "June"}; 
```

目前，当我运行它时，它们会相互显示。我试图让它并排显示。我怎样才能做到这一点？

这是显示它们的一段代码：

```
System.out.println("Years");
for(short temp: years)
{
System.out.println(temp);
}
System.out.println("Months");
for(String temp: months)
{
System.out.println(temp);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T06:52:50.823

尝试这个：

```
int length = Years.length > Months.length ? Months.length : Years.length;
for(int index = 0; index < length; index++) {
    System.out.println(Years[index] + '\t' + Months[index]);
} 
```

我建议阅读[这个](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:00:42.780

如果它们的长度相等：

```
for (int i = 0; i < Years.length; i++) {
    System.out.println(Years[i] + '\t' + Months[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:13:54.010

你可以这样做：

```
 short[] years = {1995, 1997, 1998,1999, 2000, 2001, 2002, 2003, 2004, 2005, 2006, 2007, 2008, 2009, 2010, 2011, 2012};
    String[] winners = {"January", "February", "June", "January", "March", "June", "July", "August", "September", "March", "May", "January", "March", "July", "November", "March", "June"};
    System.out.println("Years"+"\t"+"Premiers");
    int i = years.length-1;
    int j= winners.length-1;
    int  k=0;
int l=0;
    do{
            i--;
            j--
        System.out.println(years[k++]+"\t"+winners[l++]);
    }while(i>=0 || j>=0); 
```

你会发现输出如下：

```
Years   Premiers
1995    January
1997    February
1998    June
1999    January
2000    March
2001    June
2002    July
2003    August
2004    September
2005    March
2006    May
2007    January
2008    March
2009    July
2010    November
2011    March
2012    June 
```

# css - 自动换行在 Internet Explorer 中不起作用

> ID：16098785
> 
> 赞同：17
> 
> 时间：2013-04-19T06:45:51.303
> 
> 标签：css, internet-explorer, internet-explorer-9, word-wrap, xhtml-transitional

当我使用`word-wrap:break-word`浏览*器模式时：IE9 兼容性视图和文档模式：IE7 标准*它工作得很好。但是，当我更改*Document Mode: IE9 standards*时，它不起作用。我也尝试过使用`-ms-word-wrap:break-word`它，但它给了我相同的结果。

文档类型定义：DTD/xhtml1-transitional.dtd

谁能告诉我为什么会这样，是否有任何解决方法来应对它？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T08:43:04.527

你需要有

```
table {
    width:100%;
    table-layout:fixed;
} 
```

并`word-wrap`放入`table,td,th`不入`span`

[http://jsfiddle.net/d6VsD/7/](http://jsfiddle.net/d6VsD/7/)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-08-05T12:09:06.637

将 word-wrap 属性应用于相关元素的父级将解决 IE9 中的问题。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-11-29T06:52:09.027

**试试这种方式**

```
 .table tr td { 
               word-wrap: break-word;
               word-break: break-all;
               } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-10-17T17:56:49.947

就我而言，在我将 span 渲染为 inline-block 之前，IE 并不尊重分词样式。

```
.selector{
    display: inline-block;
    word-break: break-all;
    overflow-wrap: break-word; /* For other browsers*/
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-07-07T18:22:34.897

```
-ms-word-break: break-all; 
```

适用于 > IE9

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-10T16:07:38.933

添加`-ms-word-break: break-word;`对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T09:11:14.747

它应该可以工作，`.your_class_name{word-break:break-word;}`我已经在 ie7 - ie9 中测试过它，它打破了这个词......

# firebase - DataSnapshot 对象是否包含其所有子数据？

> ID：16098786
> 
> 赞同：1
> 
> 时间：2013-04-19T06:45:52.053
> 
> 标签：firebase

当我们有大量孩子时， **spanshot.numChildren()**的性能如何？

firebase 是否会通过其所有孩子来计算孩子的数量，还是**在添加新孩子时维护一个计数器**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:15:35.053

DataSnapshot 包含内存中本地的所有数据。在 DataSnapshot 上调用 numChildren 或其他任何内容都不会导致任何网络 I/O。

请注意，这意味着您在生成这些快照时应该小心——如果您只想计算某物的数量，则加载大型 DataSnapshot 然后调用 numChildren() 比维护单独的计数要昂贵得多孩子的数量，并在每次添加新孩子时使用事务更新它。

# java - 使用java控制文件文件夹的Windows右键单击上下文菜单

> ID：16098789
> 
> 赞同：1
> 
> 时间：2013-04-19T06:46:04.813
> 
> 标签：java, windows, access-rights

如何使用java控制windows右键单击文件夹的上下文菜单，是否有可能使用java来做到这一点。我希望如果用户在该操作之前创建/编辑/删除给定/特定文件夹中的任何文件/文件夹，我的 java 程序会获取用户的操作并允许或禁止用户这样做。

请帮助我如何做到这一点，为此进行研发但尚未找到任何解决方案。如果可能的话，需要一些指导方针来实现这一目标。

提前致谢。

# xss - 在网站上模糊测试参数和搜索跨站脚本 (XSS) 漏洞的问题

> ID：16098790
> 
> 赞同：1
> 
> 时间：2013-04-19T06:46:13.860
> 
> 标签：xss, owasp, fuzzing

我正在使用 OWASP 的 Zed 攻击代理 (ZAP) 来模糊网站上的参数并搜索跨站点脚本 (XSS) 漏洞。在观看了 youtube 视频“ [http://www.youtube.com/watch?v=rmbi-VbIK6I](http://www.youtube.com/watch?v=rmbi-VbIK6I) ”后，我正在尝试实现它，但是在进行模糊测试时，与该视频相比，我收到的响应很少。不显示脚本。最重要的是，如何通过查看响应代码来识别哪个脚本命中？我对这个领域很陌生。我正在发布屏幕截图以查看差异。请帮帮我。

我的输出： ![我的输出](https://i.stack.imgur.com/8EpoN.jpg) 视频输出： ![视频输出](https://i.stack.imgur.com/iWJ0l.jpg)

# asp.net-mvc - 如何使用与 asp.net mvc4 相同的加密？

> ID：16098791
> 
> 赞同：0
> 
> 时间：2013-04-19T06:46:15.507
> 
> 标签：asp.net-mvc, asp.net-membership, membership-provider

是的，散列更好，但是......

所以我知道我会后悔的，但我们走了。我开始了一个新项目，并决定使用 MVC 4 (BasicMembership) 中内置的 Microsoft 会员资格，这样我就不必编写注册、登录、oauth 等...

现在我想修改其中的一些行为并尽可能多地使用最佳实践。这是因为我决定需要在 1 个父级（公司）下关联多个用户 - 我知道我可以在控制器中完成所有工作并仍然完成此操作，但这不是我的愿望。

这是我的问题/愿望：

1.) 我想自己在 SQL 表 UserProfile/WebPages_Membership 中创建条目。我想在我的存储库中执行此操作，并且不希望它与 ASP.NET 耦合。问题是 MVC 正在通过我无权访问的 IMembershipAdapter 加密密码。我怎样才能使用相同的加密密钥来加密数据，以便我可以完成＃2？

2.）我不想完全重新发明轮子，所以我仍然想使用一些功能，例如：

```
WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe) 
```

3.）我不希望我的业务逻辑在控制器中！当我在 repo 级别工作时，所有的编排都将在业务层进行。

感谢您花时间阅读我的帖子 :-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:53:38.677

首先，您是否看过：[ASP.NET MembershipProvider——它究竟是如何进行加密的？](https://stackoverflow.com/questions/12433726/asp-net-membershipprovider-how-exactly-does-it-do-encryption)

第二件事可能使用已经完成的事情，例如：[CodeFirst Membership Provider](http://codefirstmembership.codeplex.com/)它允许您首先使用 EF 代码创建自己的表。

# linux - Linux RPM-spec 不会将包复制到目标文件夹

> ID：16098798
> 
> 赞同：0
> 
> 时间：2013-04-19T06:46:33.960
> 
> 标签：linux, package, rpm, rpmbuild, rpm-spec

我有一个包，目录名为*lib*，*sample*，*api*，*doc*在 parent directory 下*`%{name}-%{version}`*。我想从这些文件夹中生成一个**RPM包。**此**rpm**包应在客户端指定的重定位目标文件夹下展开这些目录。`%{name}-%{version}`包含所有包目录的文件夹被压缩在*tar.gz*中并保存在**SOURCE**文件夹下。在阅读了规范文档和网络资源后，我制作了以下规范文件。

```
Name: BATMAN
Version: 1.0.0
Release:    1%{?dist}
Summary: A cricket match program
Group: System Environment/Base
License: MEMEME
Source0: BATMAN-1.0.0.tar.gz
Prefix: /tmp
%define reloc_dir /tmp
%define target_dir %{reloc_dir}/manish
%define installdir PingPong-v%{version}

%description
Here comes the description

%prep
rm -rf %{_topdir}/BUILD/*
rm -rf %{target_dir}

%setup

%install
mkdir -p %{buildroot}
cp -R %{_topdir}/BUILD/%{name}-%{version}/* %{buildroot}

###What should come down here##############
mkdir -p %{target_dir}
install -dD %{buildroot}/* %{target_dir}
###########################################

#find %{target_dir} -type d -exec chmod 755 {} \;
#find %{target_dir} -type f -exec chmod 644 {} \;
#chmod -R 755 %{target_dir}

%files
/sample/sample.cpp
/header/BATMAN.hpp
/header/BALLMAN.hpp
/header/BUSYMAN.hpp
/header/BUSHYMAN.hpp
/doc/BATMAN.docx
/lib/BATMAN.so
/lib/BALLMAN.so
/lib/BUSYMAN.so
/lib/BUSHYMAN.so

%defattr(-,root,root,0755)

%clean
rm -rf $RPM_BUILD_ROOT

%changelog 
```

该`%setup`命令成功展开 . 下的压缩文件夹`%{_topdir}/BUILD/`。然后我将这些文件复制到`%{buildroot}`（因为`%files`标签期望文件存在于**BUILDROOT**下进行打包）。所有这些文件的打包也成功完成，但是当我`sudo rpm -ivh --nodeps <Package-Vesrion-Arch>.rpm`在生成的 rpm 上运行命令时，我看不到在目标端创建任何文件夹或发生任何复制。尽管它显示软件包已成功安装；`rpm -qa`我的包裹有一个条目。

# android - SharedPreferences 到 ViewPager

> ID：16098799
> 
> 赞同：0
> 
> 时间：2013-04-19T06:46:36.410
> 
> 标签：android, android-viewpager, sharedpreferences

我需要将基于 SharedPreferences 的preferences.xml 文件加载到 ViewPager 中。我收到此错误：

```
java.lang.IllegalStateException: Content view not yet created 
```

我正在寻找解决方案，但我找不到任何东西。我能做些什么？

MainActivity.java

```
public class MainActivity extends FragmentActivity {

    private CustomViewPager customViewPager;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);
        customViewPager = (CustomViewPager) findViewById(R.id.pager);
        customViewPager.setAdapter(new CustomPagerAdapter());
        customViewPager.setPageMargin(0);
        PreferenceManager.setDefaultValues(this, R.xml.preferences, false);
    }

    private class CustomPagerAdapter extends PagerAdapter {

        @Override
        public Object instantiateItem(ViewGroup viewGroup, int position) {
            RelativeLayout viewLayout = null;
            LayoutInflater inflater = (LayoutInflater) viewGroup.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            switch (position) {

            case 0:
                viewLayout = (RelativeLayout) inflater.inflate(R.layout.list_meetings, null);
                viewGroup.addView(viewLayout, 0);
                break;

            case 1:
                viewLayout = (RelativeLayout) inflater.inflate(R.layout.settings, null);
                viewGroup.addView(viewLayout, 0);

                getFragmentManager().beginTransaction().replace(android.R.id.content, new FragmentPreferences()).commit();
                break;
            }
            customViewPager.setObjectForPosition(viewLayout, position);
            return viewLayout;
        }

        @Override
        public int getCount() {
            return 2;
        }

        @Override
        public boolean isViewFromObject(View view, Object object) {
            return view == object;
        }
    }

    public static class FragmentPreferences extends PreferenceFragment {

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            addPreferencesFromResource(R.xml.preferences);
        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

            // View view = inflater.inflate(R.layout.settings, null);
            // return view;

            return null;
        }
    }
} 
```

设置.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

首选项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">

    <ListPreference
        android:key="speed_setting"
        android:title="@string/speed_setting_title"
        android:summary="@string/speed_setting_description"
        android:dialogTitle="@string/speed_setting_title"
        android:entries="@array/speed_setting_entry_labels"
        android:entryValues="@array/speed_setting_entry_labels"
        android:defaultValue="@string/speed_setting_default_value"
        android:icon="@drawable/ic_list_speed_setting" />
    <ListPreference
        android:key="permission_type_setting"
        android:title="@string/permission_type_setting_title"
        android:summary="@string/permission_type_setting_description"
        android:dialogTitle="@string/permission_type_setting_title"
        android:entries="@array/permission_type_setting_entry_labels"
        android:entryValues="@array/permission_type_setting_entry_labels"
        android:defaultValue="@string/permission_type_setting_default_value"
        android:icon="@drawable/ic_list_permission_type_setting" />
    <ListPreference
        android:key="sensibility_setting"
        android:title="@string/sensibility_setting_title"
        android:summary="@string/sensibility_setting_description"
        android:dialogTitle="@string/sensibility_setting_title"
        android:entries="@array/sensibility_setting_entry_labels"
        android:entryValues="@array/sensibility_setting_entry_labels"
        android:defaultValue="@string/sensibility_setting_default_value"
        android:icon="@drawable/ic_list_sensibility_setting" />
    <ListPreference
        android:key="time_format_setting"
        android:title="@string/time_format_setting_title"
        android:summary="@string/time_format_setting_description"
        android:dialogTitle="@string/time_format_setting_title"
        android:entries="@array/time_format_setting_entry_labels"
        android:entryValues="@array/time_format_setting_entry_labels"
        android:defaultValue="@string/time_format_setting_default_value"
        android:icon="@drawable/ic_list_time_format_setting" />
    <ListPreference
        android:key="maps_setting"
        android:title="@string/maps_setting_title"
        android:summary="@string/maps_setting_description"
        android:dialogTitle="@string/maps_setting_title"
        android:entries="@array/maps_setting_entry_labels"
        android:entryValues="@array/maps_setting_entry_labels"
        android:defaultValue="@string/maps_setting_default_value"
        android:icon="@drawable/ic_list_maps_setting" />
    <ListPreference
        android:key="resource_consumption_setting"
        android:title="@string/resource_consumption_setting_title"
        android:summary="@string/resource_consumption_setting_description"
        android:dialogTitle="@string/resource_consumption_setting_title"
        android:entries="@array/resource_consumption_setting_entry_labels"
        android:entryValues="@array/resource_consumption_setting_entry_labels"
        android:defaultValue="@string/resource_consumption_setting_default_value"
        android:icon="@drawable/ic_list_resource_consumption_setting" />
</PreferenceScreen> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T06:47:59.417

使用[PreferenceFragment](http://developer.android.com/reference/android/preference/PreferenceFragment.html)。但它仅在 api 级别 11 之后可用。您可以在链接中找到带有清晰示例的详细信息

# linux - busybox 网络配置脚本错误

> ID：16098800
> 
> 赞同：0
> 
> 时间：2013-04-19T06:46:37.550
> 
> 标签：linux, shell, busybox

您好，我在启动时有脚本，但我不明白为什么它在执行时显示错误

```
#!/bin/sh

# Starting the network interface

PATH="/sbin:/bin:/usr/bin:/usr/sbin"

FILENAME="/etc/ipconf"
count=0

while read LINE
do
  ipValues[count]=$(echo $LINE |  awk -F'=' '{print $2}')
  count=`expr $count + 1`
done < $FILENAME

echo "Setting up IP Address"
ifconfig eth0 up
ifconfig eth0 ${ipValues[0]} netmask ${ipValues[1]}
echo "IP :: ${ipValues[0]} SUBNET MASK :: ${ipValues[1]}"
route add default gw ${ipValues[2]}
echo "Default Gateway :: ${ipValues[2]}"

echo "Network configured properly"

exit 0 
```

这是我的 ipconf 文件

```
IPADDRESS=192.168.1.13
SUBNETMASK=255.255.255.0
GATEWAY=192.168.1.220 
```

这是我的脚本错误

```
ipValues[count]=192.168.1.13 Not found
ipValues[count]=255.255.255.0 Not found
ipValues[count]=192.168.1.220 Not found
Setting up IP Address
Line 20 syntax error: Bad substitution 
```

我的剧本正在排队`ifconfig eth0 ${ipValues[0]} netmask ${ipValues[1]}`。这个数组分配是正确的还是busybox脚本需要不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T09:15:24.083

没错，busybox 不支持脚本中的数组语法。

为了设置值，您可以使用

```
eval ipValues$count=$(echo $LINE |  awk -F'=' '{print $2}') 
```

并读取变量

```
ifconfig eth0 ${ipValues0} netmask ${ipValues1}
echo "IP :: ${ipValues0} SUBNET MASK :: ${ipValues1}"
route add default gw ${ipValues2}
echo "Default Gateway :: ${ipValues2}" 
```

# jquery - 如何在 jquery 对话框中禁用更新按钮

> ID：16098808
> 
> 赞同：0
> 
> 时间：2013-04-19T06:46:56.740
> 
> 标签：jquery, jquery-ui-dialog

这是我的完整日历。当我在特定事件对话框屏幕中单击完整日历时，将打开。

这是我的脚本：

```
 var date = new Date();
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();

    var calendar = $('#calendar').fullCalendar({
        theme: true,
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,agendaDay'
        },

        eventClick: updateEvent,
        selectable: true,
        selectHelper: true,
        select: selectDate,
        editable: true,
        events: "JsonResponse.ashx",
        eventDrop: eventDropped,
        eventResize: eventResized,
        eventRender: function(event, element) {
            //alert(event.title);
            element.qtip({
                content: event.projectdescription,
                position: { corner: { tooltip: 'bottomLeft', target: 'topRight'} },
                style: {
                    border: {
                        width: 1,
                        radius: 3,
                        color: '#2779AA'

                    },
                    padding: 10,
                    textAlign: 'center',
                    tip: true, // Give it a speech bubble tip with automatic corner detection
                    name: 'cream' // Style it according to the preset 'cream' style
                }

            });
        }

    });

}); 
```

当单击 evnt 时，将在该对话框中调用“更新事件”功能，因为我在某些 secanrio 中有一个更新按钮，我想禁用它。

```
var currentUpdateEvent;
var addStartDate;
var addEndDate;
var globalAllDay;

function updateEvent(event, element) {
    //alert(event.description);

    if ($(this).data("qtip")) $(this).qtip("destroy");

    currentUpdateEvent = event;

    $('#updatedialog').dialog('open');
    $("#eventId").val(event.id);
    $("#lblprjnumber").text(event.projectnumber);
    $("#lblprjname").text(event.projectname );
    $("#lblprjdesc").text(event.projectdescription);
    $("#lblMonday").val( event.Monday);
    $("#lblTuesday").val(event.Tuesday);
    $("#lblwednesday").val(event.Wednesday);
    $("#lblthursday").val(event.Thursday );
    $("#lblfriday").val(event.Friday);
    $("#lblsaturday").val(event.Saturday);
    $("#lblsunday").val( event.Sunday);

    $("#eventStart").text("" + event.start.toLocaleString());

    if (event.end === null) {
        $("#eventEnd").text("");
    }
    else {
        $("#eventEnd").text("" + event.end.toLocaleString());
    }

} 
```

对于您的参考，我还发布了“更新对话框”

```
$(document).ready(function() {

    // update Dialog
    $('#updatedialog').dialog({
        autoOpen: false,
        width: 470,
         buttons: {
            "update": function(evt) 
            {
                               //alert(currentUpdateEvent.title);
                var eventToUpdate = {
                    id : currentUpdateEvent.id,
                    projectnumber : $("#lblprjnumber").text(),
                    projectname : $("#lblprjname").text(),
                    projectdescription : $("#lblprjdesc").val(),
                    Monday : $("#lblMonday").val(),
                    Tuesday : $("#lblTuesday").val(),
                    Wednesday : $("#lblwednesday").val(),
                    Thursday : $("#lblthursday").val(),
                    Friday : $("#lblfriday").val(),
                    Saturday : $("#lblsaturday").val(),
                    Sunday : $("#lblsunday").val()

                };

                if (checkForSpecialChars(eventToUpdate.title) || checkForSpecialChars(eventToUpdate.description)) {
                    alert("please enter characters: A to Z, a to z, 0 to 9, spaces");
                }
                else {
                    PageMethods.UpdateEvent(eventToUpdate, updateSuccess);
                    $(this).dialog("close");
                    currentUpdateEvent.projectnumber = $("#lblprjnumber").val();
                    currentUpdateEvent.projectname = $("#lblprjname").val();
                    currentUpdateEvent.projectdescription = $("#lblprjdesc").val();
                    currentUpdateEvent.Monday = $("#lblMonday").val();
                    currentUpdateEvent.Tuesday = $("#lblTuesday").val();
                    currentUpdateEvent.Wednesday = $("#lblwednesday").val();
                    currentUpdateEvent.Thursday = $("#lblthursday").val();
                    currentUpdateEvent.Friday = $("#lblfriday").val();
                    currentUpdateEvent.Saturday = $("#lblsaturday").val();
                    currentUpdateEvent.Sunday = $("#lblsunday").val();

                    $('#calendar').fullCalendar('updateEvent', currentUpdateEvent);

                }

            }

        }

    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:22:29.367

这个具有给定 ID 的禁用按钮：

```
$("#"+ID).button("disable"); 
```

请将 ID 替换为包含按钮 ID 的变量

# android - 接入网络可用性状态android

> ID：16098810
> 
> 赞同：1
> 
> 时间：2013-04-19T06:47:02.473
> 
> 标签：android, android-networking, android-internet

我正在开发一个应用程序，我想在其中访问是否有互联网连接。我可以使用访问网络状态

```
private Boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
    = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();
    return activeNetworkInfo != null && activeNetworkInfo.isConnected();
} 
```

但这只是返回手机是否连接到互联网。我想知道连接后是否有互联网可用。比如，可能是服务器已关闭或互联网不可用。请让我知道如何做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:21:54.727

检查互联网连接正常实施，但如果您想知道您的服务器是否正在运行，首先您需要向您的服务器发送 ping 或发送存根请求（例如：发送带有任何参数的请求）。如果有响应，那么您可以完美地使用您的服务器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T07:00:58.733

检查它是否是有效的 Internet 连接，而不仅仅是您已连接到 Internet。您可以通过尝试从您的站点获取已知地址/资源来做到这一点，例如 1x1 PNG 图像或 1 字节文本文件。它还将回答您有关您的服务器状态的信息。:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T07:08:27.560

像这样试试

```
URL url = new URL("Your URL");
URLConnection conexion = url.openConnection();
conexion.setConnectTimeout(10000); // Don't forget to put a time limit
conexion.connect(); 
```

超时后（上述示例为 10 秒），它将通过超时异常。因此，您可以使用它来检查 Internet 访问是否可用。

# c++ - [C++]在此代码之前不存在的析构函数中引发内存错误。尝试创建一个新的动态数组并填充它

> ID：16098812
> 
> 赞同：1
> 
> 时间：2013-04-19T06:47:04.180
> 
> 标签：c++, data-structures, priority-queue

我正在一个处理队列的实验室工作，我认为这并不完全相关。我的任务是创建一个“优先队列”，我能想到的最好方法如下

```
void IntQueue::enqueue(int num,int priorityOfEntry)
{   
    if (isFull())
        cout << "The queue is full.\n";
    else
    {   
        // Calculate the new rear position
        //insert correct lab code here haha
        if (priorityOfEntry == 1)
        {   
            rear = (rear + 1) % queueSize;
            queueArray[rear] = num;
            queueSize++;
        }   
        else if (priorityOfEntry == 2)
        {   

            queueSize++;

            int* newArray = new int[queueSize];
            newArray[0] = num;

            for(int counter = 0;counter< queueSize; counter++)
            {   
                newArray[counter+1] = queueArray[counter];
            }   

            queueArray = newArray;

            delete [] newArray;

        }   
        else cout << "invalid priority" << endl;

        // Insert new item

        // Update item count
        numItems++;

    }   
} 
```

我只有 2 个优先级，1 和 2，我在主程序中进行了解释。当它们都具有相同的优先级时，它当然可以正常工作，但是当我提高优先级时，它会在我的析构函数中引发错误。

我真的不认为这是接近这个实验室的正确方法，但它似乎有效.. 至少如果我真的能修复这个内存错误。我认为唯一的问题可能是我更改了析构函数认为它将删除的地址。但我认为指针已经可以解释这一点。我知道我需要学习调试自己的程序。我真的。但有时我只是盯着代码看，那里只有一堵砖墙。猜猜这就是朝着正确方向轻推的目的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T06:49:05.700

`queueArray`在此之后是一个[悬空指针](http://en.wikipedia.org/wiki/Dangling_pointer)：

```
 queueArray = newArray; // Both 'queueArray' and 'newArray' point to
                         // the same memory after this assignment. 
  delete [] newArray; 
```

`queueArray`因为指向的内存是`delete`d。任何访问或销毁的尝试`queueArray`都是在访问已经被销毁的内存。正确的顺序是：

```
delete[] queueArray;
queueArray = newArray; 
```

`for`此外，在执行复制的循环中存在潜在的越界访问：

```
for(int counter = 0;counter< queueSize; counter++)
{
    // When 'counter == queueSize - 1'
    // 'newArray[counter + 1]' is one past the end.
    newArray[counter+1] = queueArray[counter];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:49:26.720

这里：

```
queueArray = newArray; // queueArray and newArray point to the same place
delete [] newArray;    // that place gets delete[]ed 
```

您`queueArray`指向与 相同的位置`newArray`，但随后您将删除位于该位置的数组。`queueArray`剩下的就是指向你已经归还给操作系统的内存，即它现在是一个悬空*指针*。

你需要`delete queueArray[]`先，然后分配`newArray`给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:04:04.893

好的，我明白了，我不知道为什么我认为我需要在优先级切换时添加另一个数组成员，我想我只是累了。

所以这是额外的数组成员，我认为这是唯一的另一个问题

# android - 可拆分的混乱

> ID：16098815
> 
> 赞同：0
> 
> 时间：2013-04-19T06:47:07.137
> 
> 标签：android, object, parcelable, serializable

我是 Android 的新手。我正在解决一个问题，我遇到了在 Activity 之间传递自定义对象的问题。我做了一些研究，发现如果我需要实现 Serializable 或 Parcellable 接口，我还发现 Parcellable 比 Serializable 更快。但是我对此感到困惑，假设我的类中有多个自定义对象作为属性，那么我是否需要让所有这些对象实现其中一个或那些接口，或者有任何其他方法可以做到这一点。

如果我不清楚，请原谅我，如果可能，请随时编辑。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:57:33.660

使用它们的最简单方法是让你的类实现`Serializable`，并确保每个类成员也实现`Serializable`（或者是像 int 这样的基值）。

如果你有一个没有实现的成员`Serializable`，你将不得不手动实现我们类的序列化/反序列化方法。

`Parcelable`效率更高，但不如`Serializable`. 查看此博客以了解如何使用`Parcelable`： [http ://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/](http://shri.blog.kraya.co.uk/2010/04/26/android-parcel-data-to-pass-between-activities-using-parcelable-classes/)

# java - Mockito 和嵌套方法调用

> ID：16098816
> 
> 赞同：0
> 
> 时间：2013-04-19T06:47:10.507
> 
> 标签：java, mockito

我有 3 节课：

```
public class SomeDAO {

   // that method I'd want to catch and change
   public void getObj() { ... }

}

public class MainService {

    private Service2 service2;

    public void doMain() {
        service2.doSomethingAnother();
    }

}

public class Service2 {

    private SomeDAO someDAO

    public void doSomethingAnother() {
        someDAO.getObj();
    }
} 
```

我所需要的 - 调用*doMain*但在 service2.doSomethingAnother() 中使用自定义someDao.getObj *(* *)*：

```
public TestClass {

    @InjectMocks
    private final MainService mainService = new MainService();

    @InjectMocks
    private final Service2 service2 = new Service2();

    @Mock
    private SomeDAO someDao;

    @Test
    public void testMe() {

        // substitution
        when(someDao.getObj()).thenReturn(new MyObj());

        // then I'm calling the outer method
        mainService.doMain();

    }

} 
```

运行该测试时，我在**mainService.doMain()**中有 NPE ：service2 in null..

**testMe**对象的内部*service2*是活动的而不是 null，它已被声明为类变量并被初始化。

我是否误解了@InjectMock 的行为？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T08:49:58.250

`Service2`没有注入`MainService`，因为它不是一个模拟。因此，`server2`您的`mainService`对象的属性是`null`。

您还试图模拟太深。正确的测试方法`MainService`是模拟`Service2`and not的依赖关系`SomeDAO`。

在`Service2`模拟`SomeDAO`.

```
public TestClass {

    @InjectMocks
    private MainService mainService;

    @Mock
    private Service2 service2;

    @Before
    public void setUp() {
        initMocks(this);
    }

    @Test
    public void testMe() {
        mainService.doMain();

        verify(service2).doSomethingAnother();

    }

} 
```

# dart - 如何使用 dartvm 实现应用流行？

> ID：16098818
> 
> 赞同：1
> 
> 时间：2013-04-19T06:47:21.637
> 
> 标签：dart, prevayler

在服务器上使用 dartvm 实现应用程序流行（想想 Prevayler）有哪些选择？
我正在寻找一个纯 Dart 解决方案（没有 Java/Prevayler 的进程间套接字）

任何现有的代码或项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:02:32.810

我还不知道 Dart 有任何对象持久性数据库。如果您只是在寻找一种可以写入磁盘的序列化对象的方法，那么有一个[序列化库](http://pub.dartlang.org/packages/serialization)和另一个[序列化库](http://pub.dartlang.org/packages/serializers)。

您可能还想尝试[用于 Dart 的 MongoDB 驱动程序](http://pub.dartlang.org/packages/mongo_dart)和用于“对象文档映射”的对象[库。](http://pub.dartlang.org/packages/objectory)

# abstract-factory - 抽象工厂模式和工厂方法的区别，被一个案例搞糊涂了

> ID：16098822
> 
> 赞同：1
> 
> 时间：2013-04-19T06:47:44.760
> 
> 标签：abstract-factory, factory-method

“工厂方法”和“抽象工厂”的主要区别在于工厂方法是单一方法，而抽象工厂是一个对象。但是，有时我不能说它是什么，例如

```
class Product{

}
interface Facotory{
    public Product create();
}

class FactoryA implements Facotory{
public Product create() {
    return null;
}   
}

class FactoryB implements Facotory{
    public Product create() {
    return null;
    }
} 
```

你能告诉我这是工厂方法还是抽象工厂？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T08:58:27.823

IMO，您上面当前的示例是工厂方法。

由于您已经定义了一个带有工厂方法（create）的接口（Factory），该方法允许子类（FactoryA 和 FactoryB）决定要实例化哪个类（产品派生类）。

# jquery - jQuery拖放扩展

> ID：16098828
> 
> 赞同：0
> 
> 时间：2013-04-19T06:48:15.463
> 
> 标签：jquery, drag-and-drop

我想要做的是将立方体拖到盒子上。盒子展开，立方体可以放置在 3 个“时间线”之一上。

我的html：

```
<div class="drag"></div>
<div class="AddRoom One">
    <div class="timeLine">
        <div id="t1"></div>
        <div id="t2"></div>
        <div id="t3"></div>
    </div>
</div>
<div class="AddRoom Two">
    <div class="timeLine">
        <div id="t1"></div>
        <div id="t2"></div>
        <div id="t3"></div>
    </div>
</div> 
```

我的JavaScript：

```
$(function () {
    $(".drag").draggable({
        revert: "invalid",
        snap: '#t3, #t2, #t1',
        snapMode: 'inner'
    });
    $(".timeLine").droppable({
        over: function (event, ui) {
            $(this).css('height', "66px");
            $(".timeLine #t1").droppable({});
            $(".timeLine #t2").droppable({});
            $(".timeLine #t3").droppable({});
        },
        out: function (event, ui) {
            $(this).css('height', "24px");
        },
        drop: function (event, ui) {
            $(this).css('height', "24px");
        }
    });
}); 
```

jsfiddle：http: [//jsfiddle.net/H7XV9/](http://jsfiddle.net/H7XV9/)

如您所见，可以将其放在 t1、t2 和 t3 上。但我只希望 t2 和 t3 在时间线扩展时可放置！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:53:46.883

利用：

```
overflow:hidden 
```

在 t2 和 t3

[jsFiddle](http://jsfiddle.net/LYssU/1/)

另外，我将它们转换为 a`class`而不是`id`. 在现实世界中拥有多个 ID 是非法的，在 HTML 中也应该是非法的。

## 来自 OP 评论的更新

### 标记

我为每个`t#`班级添加了一个`drop`班级

```
<div class="drag"></div>
<div class="AddRoom One">
    <div class="timeLine">
        <div class="drop t1"></div>
        <div class="drop t2"></div>
        <div class="drop t3"></div>
    </div>
</div>
<div class="AddRoom Two">
    <div class="timeLine">
        <div class="drop t1"></div>
        <div class="drop t2"></div>
        <div class="drop t3"></div>
    </div>
</div> 
```

### JavaScript

```
$(function () {
    $(".drag").draggable({
        revert: "invalid",
        snap: '.t3, .t2, .t1',
        snapMode: 'inner'
    });
    $(".drop").droppable({ // Just assign the event to the drop class now
        over: function (event, ui) {
            $(this).parent().css('height', "66px");
        },
        out: function (event, ui) {
            $(this).parent().css('height', "24px");
        },
        drop: function (event, ui) {
            $(this).parent().css('height', "24px");
        }
    });
}); 
```

[新的 JSFiddle](http://jsfiddle.net/Cwalkdawg/LYssU/10/)

# python-3.x - python3和virtualenv的断言错误

> ID：16098830
> 
> 赞同：2
> 
> 时间：2013-04-19T06:48:18.720
> 
> 标签：python-3.x, installation, virtualenv, ubuntu-10.04

在 ubuntu lucid 中，我默认有。我`python2.6`想安装`python 3.3.1`.

我从`Python-3.3.1.tar.bz2`我的主文件夹中提取出来，`/home/me/Python-3.3.1`以便包含所有文件。然后按照我所做的自述文件

```
./configure
make
make test
sudo make install 
```

这创建了一个在文件夹中命名的可执行`python`文件`/home/me/Python-3.3.1`。

另外，现在我的目录中有几个`python3*`文件`/usr/local/bin`。

其中 ，

python3 是可执行文件的链接，

python3.3 是一个可执行文件，

python3.3m 是一个可执行文件。

我想为python3创建一个virtualenv并尝试了以下

```
sudo virtualenv envpy331 --distribute --no-site-packages --python=/home/me/Python-3.3.1/python 
```

这产生了一个 AssertionError

```
File "/usr/local/lib/python2.6/dist-packages/virtualenv-1.8.2-py2.6.egg/virtualenv.py", line 2471, in <module>
    main()
  File "/usr/local/lib/python2.6/dist-packages/virtualenv-1.8.2-py2.6.egg/virtualenv.py", line 942, in main
    never_download=options.never_download)
  File "/usr/local/lib/python2.6/dist-packages/virtualenv-1.8.2-py2.6.egg/virtualenv.py", line 1043, in create_environment
    site_packages=site_packages, clear=clear))
  File "/usr/local/lib/python2.6/dist-packages/virtualenv-1.8.2-py2.6.egg/virtualenv.py", line 1207, in install_python
    copy_required_modules(home_dir)
  File "/usr/local/lib/python2.6/dist-packages/virtualenv-1.8.2-py2.6.egg/virtualenv.py", line 1159, in copy_required_modules
    dst_filename = change_prefix(filename, dst_prefix)
  File "/usr/local/lib/python2.6/dist-packages/virtualenv-1.8.2-py2.6.egg/virtualenv.py", line 1134, in change_prefix
    (filename, prefixes)
AssertionError: Filename /home/me/Python-3.3.1/Lib/os.py does not start with any of these prefixes: ['/usr/local'] 
```

我需要什么来纠正这个？我需要删除 python3 安装，还是需要重新配置它`prefix=/usr/local`？并再次运行安装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:56:03.107

您已经安装了它。只需指向已安装的python3。尝试这个：

```
virtualenv envpy331 --python=/usr/local/bin/python3.3 
```

# windows - 批处理：忽略将当前日期作为其名称的一部分的文件或在当前日期创建的文件的处理

> ID：16098832
> 
> 赞同：0
> 
> 时间：2013-04-19T06:48:41.950
> 
> 标签：windows, batch-file

我需要搜索名称上带有日期戳的文件并将其压缩。拉链部分工作正常。但是，我需要忽略名称中包含当前日期戳的文件。文件名模式如下：

```
filename_2013-04-18.log
filename_2013-04-19.log 
```

因此，如果 2013-04-19 是当前日期，批处理脚本应该忽略第二个文件。我只是一个初学者，所以有人可以帮忙吗？我已经到达这里：

```
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set year=%%c
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set month=%%a
for /f "tokens=2-4 delims=/ " %%a in ('date /T') do set day=%%b
set CurrentDate=%year%-%month%-%day%
echo %CurrentDate%
FOR %%c in (%1%filename*.*) DO (
echo %%c
::code to ignore file with CurrentDate
::code to zip older file(s)
) 
```

`echo %%c`正在正确打印文件名。而且，压缩代码也可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:14:30.730

一点简单：

```
for /f "tokens=2-4 delims=/ " %%a in ('date /T'
  ) do set year=%%c&set month=%%a&set day=%%b&set CurrentDate=%%c-%%a-%%b
echo %CurrentDate%
FOR %%c in (%1%filename*.*) DO (
 echo %%c
 REM code to ignore file with CurrentDate
 ECHO "%%c"|FINDSTR "%currentdate%" >nul
 IF ERRORLEVEL 1 (
 REM code to zip older file(s)
 )
) 
```

编辑 20130419-0932Z：按照建议从 FINDSTR 结果处理中删除了 NOT。

请注意，使用该组标记（2 到 4）将 %%a 分配给第一个，%%b 分配给第二个，%%c 分配给第三个。

为了便于阅读，在指示的点处断线是安全的

```
for /f "tokens=2-4 delims=/ " %%a in ('date /T'
  ) do (
 set year=%%c
 set month=%%a
 set day=%%b
 set CurrentDate=%%c-%%a-%%b
 ) 
```

是另一种有效的流行形式。

`%%c`您拥有文件名的字符串被`ECHO`编入`FINDSTR`其中尝试在`currentdate`. `>nul`抑制任何输出（`FINDSTR`因为我们对它不感兴趣）

的值`ERRORLEVEL`设置为`findstr`- 0 表示未找到，否则不设置为 0。因此，如果 ERRORLEVEL 为 1（或大于 1），则执行 ZIP 操作。如果它**为零**，则找到该字符串并绕过 ZIP 操作。

另请注意，表格

```
:: comment 
```

在命令（通常在括号中的一系列命令）之外很好`block`，但不应该在块内使用 - 在那里使用 REM，否则您可能会得到意想不到的结果。

# database - Netezza：我可以在返回之前更新 REFTABLE 结构吗

> ID：16098833
> 
> 赞同：2
> 
> 时间：2013-04-19T06:48:42.403
> 
> 标签：database, stored-procedures, output, netezza

我有一个返回 REFTABLE 的过程，但我的要求是在输出中转置和附加一些列。

如何使用“立即执行”修改 REFTABLE 结构？

提前致谢...

# c# - 通过 ServiceStack 加密消息

> ID：16098839
> 
> 赞同：3
> 
> 时间：2013-04-19T06:49:23.570
> 
> 标签：c#, .net, servicestack

给定一个应用程序需要从

```
- server running "WebApi" over ServiceStack
- consumer is a desktop app 
```

希望使用已经存在的公钥/私钥加密消息

是否支持加密/解密消息，希望是透明的？即加密/解密是通过服务器上的过滤器处理的？

或者

关于如何做到这一点的任何解决方法？

仅供参考 - 服务器已经需要 SSL 并且请求已经过身份验证，但是注册是免费/自动的，因此需要加密

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T17:27:37.280

# 更新

[v4.0.42](https://github.com/ServiceStack/ServiceStack/blob/master/docs/2015/release-notes.md#v4042-release-notes)中发布的[加密消息功能](https://github.com/ServiceStack/ServiceStack/wiki/Encrypted-Messaging)现在为所有服务提供安全通道，为现在可以通过不安全的 HTTP 轻松发送和接收加密消息的客户提供保护。

* * *

目前还没有发布对[ServiceStack](http://www.servicestack.net)中内置的消息级别加密的支持，尽管这是我们正在考虑在未来添加的内容。下面是一个示例，您可以在今天尝试使用 ServiceStack 进行探索（它需要您进行更多的研发才能提出一个好的可靠设计），因为这是一个未来可能会改变的领域，所以它不是我们现在支持的用例，但这里有一些可以与 ServiceStack 一起工作的东西：

```
class EncryptedRequest 
{ 
    //Name of the request type 
    public string Type { get; set; }

    //Serialized Request DTO using something like JSON 
    public string EncryptedBody { get; set; }

    //optional: let server the private key that was used (if multiple) 
    public string PrivateKeyMd5Hash { get; set; }
} 

class EncryptedResponse 
{ 
    //Name of the response type 
    public string Type { get; set; } 

    //Serialized Response DTO 
    public string EncryptedBody { get; set; } 

    //optional 
    public string PublicKeyMd5Hash { get; set; } 
} 
```

这是一个方便的[CryptUtils 包装器](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/CryptUtils.cs)，它可以轻松创建公钥/私钥以及能够使用它们加密/解密文本。

然后你可以拥有一个服务，并执行以下操作：

```
class EncryptedService : Service 
{ 
    const string PublicKey = ...; 
    const string PrivateKey = ...; 

    EncryptedResponse Any(EncryptedRequest request) 
    { 
        var requestType = Type.GetType("{0}.{1}" 
            .Fmt(typeof(EncryptedRequest).Namespace, request.Type)); 

        var json = CryptUtils.Decrypt(PrivateKey, request.EncryptedBody); 
        var requestDto = JsonSerializer.DeserializeFromString(json,requestType); 
        var responseDto = GetAppHost().Config.ServiceController
            .Execute(requestDto, base.RequestContext); 

        return new EncryptedResponse { 
           Type = responseDto.GetType().Name, 
           EncryptedBody = CryptUtils.Encrypt(PublicKey, responseDto.ToJson()), 
        }; 
    } 
} 
```

客户端还需要您将在带外交换的公钥/私钥对的副本。

# android - 将按钮/图像添加到标题的右上角

> ID：16098842
> 
> 赞同：-2
> 
> 时间：2013-04-19T06:49:42.423
> 
> 标签：android

```
 <View
    android:layout_width="1dp"
    android:layout_height="30dp" >
</View>

<LinearLayout
    android:layout_width="match_parent" 
    android:layout_height="35dip"
    android:background="#397921"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/headertitle"
        android:layout_width="0dip"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="left"
        android:textColor="#ffffff"
        android:paddingLeft="8dp"
         />
</LinearLayout> 
```

我有这样的标题，我将如何在右上角添加图像或按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:54:05.473

```
<RelativeLayout
    android:layout_width="match_parent" 
    android:layout_height="35dip"
    android:background="#397921"
    android:gravity="center_vertical"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/headertitle"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:layout_alignParentLeft="true"
        android:gravity="left"
        android:textColor="#ffffff"
        android:paddingLeft="8dp"
         />

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_height="wrap_content"
        android:background="@drawable/icon"/>
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T06:53:42.737

使用相对布局，您可以在其中相对于父级排列子级。

代码提示：

```
<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/header" //Your background header
    android:id="@+id/header"
   >
   <ImageView 
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentRight="true"
     android:layout_marginRight="10dp"
     android:background="@drawable/logout" //Your background image
     android:layout_centerVertical="true" 
     android:id="@+id/logout"  
     />  

   </RelativeLayout> 
```

# c - 最长公共子序列-分段错误

> ID：16098843
> 
> 赞同：4
> 
> 时间：2013-04-19T06:49:42.743
> 
> 标签：c, string, segmentation-fault

我必须编写一个程序来确定最长的公共子序列。

输入：

第一个参数是一个文件，每行包含两个字符串，分号分隔。您可以假设每个测试用例只有一个唯一的子序列。例如

XMJYAUZ;MZJAWXU

输出：

最长的公共子序列。确保打印的每一行都没有尾随空格。例如

MJAU

我正在使用 Dev C++ .. 它编译得很好！...但是这个问题是一个[编程挑战](https://www.codeeval.com/public_sc/6/)，当我提交我的答案时，它向我展示了一个分段错误！

我写了下面的代码，我得到一个分段错误我错在哪里？

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>
char str1[100],str2[100];
int len1;
int len2;
void printLCS(char b[len1][len2],char str1[],int i,int j)
{
    if(i==0 || j==0)
    return;
    if(b[i][j]=='c')
    {
        printLCS(b,str1,i-1,j-1);
        printf("%c",str1[i-1]);
    }
    else if(b[i][j]=='l')
    printLCS(b,str1,i,j-1);
    else
    printLCS(b,str1,i-1,j);
}
void Seq(char str1[],char str2[])
{

    int i,j;
    len1=strlen(str1);
    len2=strlen(str2);
    int LCS[len1+1][len2+1];
    char b[len1][len2];
    for(i=0;i<=len1;i++)
    {
        LCS[i][0]=0;
    }
    for(j=0;j<=len2;j++)
    {
        LCS[0][j]=0;
    }
    for(i=1;i<=len1;i++)
    {
        for(j=1;j<=len2;j++)
        {
            if(str1[i-1]==str2[j-1])
            {
                LCS[i][j]=1+LCS[i-1][j-1];
                b[i][j]='c';
            }
            else if(LCS[i-1][j]>=LCS[i][j-1])
            {
                LCS[i][j]=LCS[i-1][j];
                b[i][j]='u';
            }
            else
            {
                LCS[i][j]=LCS[i][j-1];
                b[i][j]='l';
            }
        }
    }
    printLCS(b,str1,len1,len2);
}
int main(int argc,char *argv[])
{
    if(argc!=2)
    {
        printf("Invalid Number of Arguments:\n");
        exit(0);
    }
    FILE *fp;
    fp=fopen(argv[1],"r");
    if(fp==NULL)
    {
        printf("File can't be opened:\n");
        exit(0);
    }
    char c;
    c=fgetc(fp);
    while(c!=EOF)
    {
        int k=0;
        if(c=='\n')
        c=fgetc(fp);
        while(c!=';')
        {
            str1[k]=c;
            k++;
            c=fgetc(fp);
        }
        str1[k]='\0';
        c=fgetc(fp);
        k=0;
        while(c!=EOF && c!='\n')
        {
            str2[k]=c;
            k++;
            c=fgetc(fp);
        }
        str2[k]='\0';
        Seq(str1,str2);
        printf("\n");
        if(c==EOF)
        {
            break;
        }
        else
        c=fgetc(fp);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T21:23:26.303

我不知道这个网站的系统，但是；我编译没有错误，结果是真的。

```
You didnt close file. Maybe memory leak etc. didnt allowed by site. 
```

而且，不要使用全局变量，除非你不知道其他解决方案

这种用法非常非常糟糕！无论如何，ISO C90 禁止这样做

```
int len1;
int len2;
void printLCS(char b[len1][len2]... 
```

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T21:45:24.367

如果您可以访问 Mac 或 Linux 系统，那么有一个名为[valgrind](http://valgrind.org/ "瓦尔格林")的出色工具可以帮助您追踪这些类型的错误：基本上，它在虚拟机中运行您的程序并监控它读取和写入内存的内容。

虽然我无法编译您的代码，但我对这个 for 循环非常怀疑：

```
 for(i=1;i<=len1;i++)
{
    for(j=1;j<=len2;j++)
    {
        if(str1[i-1]==str2[j-1])
        {
            LCS[i][j]=1+LCS[i-1][j-1];
            b[i][j]='c';
        }
        else if(LCS[i-1][j]>=LCS[i][j-1])
        {
            LCS[i][j]=LCS[i-1][j];
            b[i][j]='u';
        }
        else
        {
            LCS[i][j]=LCS[i][j-1];
            b[i][j]='l';
        }
    }
} 
```

C 和 C++ 中的数组从 0 开始，因此您感兴趣的最大偏移量可能是`strlen - 1`. 尝试将您的 for 循环更改为

```
for(i=1;i<len1;i++)
{
  for(j=1;j<len2;j++) 
  {
     ...
  }
} 
```

# angularjs - 在不触发 $scope.$watch 的情况下暂时暂停 AngularJS 中的数据绑定以更新模型

> ID：16098846
> 
> 赞同：1
> 
> 时间：2013-04-19T06:49:51.837
> 
> 标签：angularjs, angularjs-scope

**更新 2012 年 4 月 19 日太平洋标准时间下午 12 点：**要在这个上吃乌鸦。问题不在于 Angular 的数据绑定，而在于我计算日期的数学错误。我在时间计算中没有正确考虑分钟和秒。我只是从彼此中减去时间戳，期望时间能很好地出来。

* * *

我让自己陷入了 AngularJS 数据绑定的麻烦，其中我的不同输入需要相互绑定。

表格需要包含以下内容：

1.  开始日期（这是给定的，不是输入）
2.  将小时数添加到开始日期的输入
3.  结果的两个输入：1）日期选择器和 2）小时选择器

如果您更改任何输入，它应该更新其他输入。因此，以下将是理想的结果：

1.  （原始日期时间为 4 月 19 日晚上 10 点）。用户输入“1 小时”。结果日期变为 4 月 19 日，结果时间变为晚上 11 点。

2.  在上述示例的基础上，用户将日期输入更改为 4 月 20 日。“小时”现在变为 25 小时。

我已经设置了观察者，使用`$scope.$watch`这些变量中的每一个：

```
$scope.$watch('hours', function (newHours, oldHours, scope) {
  if (newHours) {
    var newEndDate = new Date(scope.origDate),
      offHours = newEndDate.getHours();    

    newEndDate.setHours(offHours + newHours);
    scope.endDate = newEndDate;
    scope.endHours = newEndDate.getHours();
  }
});    

$scope.$watch('endHours', function (newEndHours, oldEndHours, scope) {
  if (newEndHours) {
    var newEndDate = new Date(scope.endDate);
    newEndDate.setHours(newEndHours);    

    scope.endDate = newEndDate;
  }
});    

$scope.$watch('endDate', function (newEndDate, oldEndDate, scope) {
  if (newEndDate) {
    scope.hours = (newEndDate - scope.origDate) / (1000  * 60 * 60);
  }
}); 
```

这些中的每一个都可以自己正常工作，但同时它们会造成很大的麻烦。根据我对 Angular 的理解，他们似乎正在创建一个“反馈循环”。**编辑**：也就是说，模型“A”将被更新并触发模型“B”的更改。然后模型“B”将触发模型“A”的更改。

**现在**，是否可以暂时暂停数据绑定，以便我可以*在*不触发观察者的情况下更新模型？在我工作过的其他一些环境中（想到 Cocoo 上的 UITableView），可以要求“停止更新”，对模型进行一些更改，然后“恢复更新”。

AngularJS中有这样的东西吗？如果没有，我没有得到什么，我如何设置我的项目以实现所需的功能？

这是我的例子的一个[plunkr](http://plnkr.co/edit/m2vl5swRSd0iszBeZQXn)。

# javascript - Razor 中的脚本，无法使用 @ 进行更正：

> ID：16098852
> 
> 赞同：1
> 
> 时间：2013-04-19T06:50:23.990
> 
> 标签：javascript, c#-4.0, razor, asp.net-mvc-3-areas

我得到编译错误`$(this).id)`

```
<script>
            if ('@content.ToList().Count' > 0) 
            {
                $(".divContainer").text('@content.Where(p => p.ContainerID == `$(this).id`).Select(p => p.TextContents).First()');
            }
            else 
            {
                $(".divContainer").text("Please enter the text");

            }
</script> 
```

如何在剃须刀代码中添加带有类“divcontainer”的“this div”的id`@content.Where(p => p.ContainerID == "ID".Select(p => p.TextContents).First()`

**问题变得更简单。**

如何正确编写以下代码

```
@string text = $(this).text(); 
```

这里剃刀变量“文本”被分配了 Jquery 文本值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:06:15.163

使用 jquery 的 .attr() 方法获取 id

```
 if ('@content.ToList().Count' > 0) 
    {
        $(".divContainer").text('@content.Where(p => p.ContainerID == $(this).attr("id")).Select(p => p.TextContents).First()');
    }
    else 
    {
        $(".divContainer").text("Please enter the text");

    } 
```

# ruby-on-rails - Javascript 无法在生产中加载

> ID：16098853
> 
> 赞同：1
> 
> 时间：2013-04-19T06:50:25.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的应用程序在开发中运行得很好，但昨天我试图将它移到我的生产服务器上，经过一些权限和路径的工作，我虽然得到了它的工作。但似乎我无法加载 JS 资产，而图像和 css 工作正常。起初我认为是引导 js 文件让我的生活变得悲惨，但删除它只会让我在下一个 JS 资产时出错。

[https://dl.dropboxusercontent.com/u/32242733/jsfail.png](https://dl.dropboxusercontent.com/u/32242733/jsfail.png)

生产.rb

```
 # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = true

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
  # config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  # config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  config.action_mailer.default_url_options = { :host => 'example.com' }
  # ActionMailer Config
  # Setup for production - deliveries, no errors raised
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = false
  config.action_mailer.default :charset => "utf-8"

  config.action_mailer.smtp_settings = {
    address: "smtp.gmail.com",
    port: 587,
    domain: "example.com",
    authentication: "plain",
    enable_starttls_auto: true,
    user_name: ENV["GMAIL_USERNAME"],
    password: ENV["GMAIL_PASSWORD"]
  }

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5 
```

资产

```
root@flypatterns:/var/www/flypatterns/current# ls public/assets/
application-35684ef44e5902293fd317c512600f66.css       glyphicons-halflings.png
application-35684ef44e5902293fd317c512600f66.css.gz    glyphicons-halflings-white-6cccd17a7aed91dbc0157d343c68c0d9.png
application-66ba1e6c258ba515e18111b4b93c8c57.js        glyphicons-halflings-white.png
application-66ba1e6c258ba515e18111b4b93c8c57.js.gz     images
application.css                        jquery.min-6c267bfd2b3f36e6edccb2e584934c1c.map
application.css.gz                     jquery.min.map
application.js                         manifest.yml
application.js.gz                      patterns
gallery_images                         users
glyphicons-halflings-2851b489e8c39f8fad44fc10efb99c3e.png 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T08:43:11.147

在部署以下文件之前，我按照 Heroku hello 的此步骤进行以下更改

------环境.rb-----

```
::ActiveSupport::Deprecation.silenced = true 
```

------生产.rb-----

```
config.assets.compile = ['*.js', '*.css']

config.active_support.deprecation = :silence 
```

--------application.rb--------

```
config.assets.enabled = true
config.assets.initialize_on_precompile = false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:44:25.917

尝试改变

```
 config.serve_static_assets = false 
```

至

```
 config.serve_static_assets = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T08:44:21.160

我在将应用推送到 heroku 时遇到了问题。我使用了 twitter-bootstrap，在预编译资产时出现了一些错误。所以我切换到手动编译而不是自动预编译。为此，我做了以下事情：

我在 config/application.rb 中将 initialize_on_precompile 设置为 false，如下所示：

```
config.assets.initialize_on_precompile = false 
```

然后我通过运行手动完成：

```
bundle exec rake assets:precompile RAILS_ENV=production 
```

终于成功了……

除非您使用任何预定义的前端框架，否则这可能不是您要寻找的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-21T07:00:49.690

检查您的 application.js 文件我添加了一些代码来执行添加到一些奇怪的文件的 java 脚本代码。问题是我错过了一些必须被注释掉的代码的“/”:-(愚蠢的我，它花了很长时间

```
bundle exec rake assets:precompile RAILS_ENV=production 
```

向我展示了要查看的文件和行，然后我以崇高的方式打开了该文件。我希望这有助于我花了 5 天时间才找到这个该死的错误 smh

# javascript - 函数和闭包可以替换 Javascript 中的类吗？

> ID：16098854
> 
> 赞同：2
> 
> 时间：2013-04-19T06:50:33.417
> 
> 标签：javascript, angularjs

我正在阅读有关 AngularJS 的信息，并在新闻组中看到以下声明：

> 不过，我不得不说，我使用 Angular 的次数越多，我对创建类的兴趣就越少。类不是 javascript 所在的地方！你可以用纯函数和闭包做几乎所有你需要的事情，然后你不必担心麻烦的“this”和“that”。

有人可以解释“关闭”是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:59:24.633

闭包是 Javascript 代码中的一种结构，在嵌套函数中，外部函数范围保留在内部函数中。

**例如：**

```
function outer(x,y){
    var t = 1;
    return function(z){
        //x, y, t from the outer function are made available to inner function
        return x + y + z + t; 
    }
}

var outer1 = outer(1,1);  //creating a closure, or an instance of a function in sense
alert(outer1(1)); //Alerts 4

var outer2 = outer(2,2);
alert(outer2(2)); //Alerts 7 
```

> 闭包的简单解释是 ECMAScript 允许内部函数；其他函数的函数体内部的函数定义和函数表达式。并且允许这些内部函数访问其外部函数中的所有局部变量、参数和声明的内部函数。当其中一个内部函数可以在包含它的函数之外访问时，就会形成一个闭包，这样它就可以在外部函数返回后执行。此时它仍然可以访问其外部函数的局部变量、参数和内部函数声明。那些局部变量、参数和函数声明（最初）具有它们在外部函数返回时所具有的值，并且可以与内部函数进行交互。

[资源](http://jibbering.com/faq/notes/closures/)

# mysql - 如何以某种方式在选择中进行循环？

> ID：16098859
> 
> 赞同：-1
> 
> 时间：2013-04-19T06:50:48.883
> 
> 标签：mysql, sql, pivot

我有这张桌子。

```
+------+-------+--------+
| CODE | MONTH | AMOUNT |
+------+-------+--------+
|    2 |     1 |    100 |
|    3 |     1 |    200 |
|    2 |     2 |    300 |
|    3 |     2 |    400 |
+------+-------+--------+ 
```

而且，这就是我想要得到的结果。

```
+------+---------+---------+
| CODE |     MO1 |     MO2 |
+------+---------+---------+
|    2 |     100 |     300 |
|    3 |     200 |     400 |
+------+---------+---------+ 
```

我知道在 select 内循环是不可能的。
我想我也许可以使用`CASE`，但我没有像上面的示例中那样明确的月份数，其中只有 1 月和 2 月的数据。稍后我会有 3 月份的数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:56:00.110

由于您不知道确切的月数，您可以像这样动态地进行操作：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'SUM(case when Month = ''',
      Month,
      ''' then Amount else 0 end) AS `Mo',
      Month, '`'
    )
  ) INTO @sql
FROM Table2;

SET @sql = CONCAT('SELECT Code, ', @sql, '
                  FROM Table2 
                  GROUP BY Code');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

结果：

```
| CODE | MO1 | MO2 |
--------------------
|    2 | 100 | 300 |
|    3 | 200 | 400 | 
```

### [看到这个 SQLFiddle](http://www.sqlfiddle.com/#!2/280b9/15)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:05:15.427

```
SELECT A.CODE AS CODE, A.AMOUNT as MO1, B.AMOUNT as MO2 FROM
((SELECT CODE, AMOUNT from Table1 WHERE MONTH=1) AS A
INNER JOIN
(SELECT CODE, AMOUNT from Table1 WHERE MONTH=2) AS B
ON
A.CODE=B.CODE) 
```

如果超过 2 个月，则添加更多内连接

希望这可以帮助 ：）

# delphi - 如何在 Windows 上打印 Firemonkey 表单？

> ID：16098860
> 
> 赞同：0
> 
> 时间：2013-04-19T06:50:54.483
> 
> 标签：delphi, firemonkey

在 Delphi VCL 中，打印表单很容易，因为表单有一个`Print`方法。FMX 中的表单似乎并非如此。有没有一种简单的方法可以在 Windows 上的 FMX 中打印表单？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T07:22:11.027

过程如下：

1.  使用[FMX 打印 API](http://docwiki.embarcadero.com/RADStudio/en/Printing_from_a_FireMonkey_Application)。
2.  通过调用该[`MakeScreenshot`](http://docwiki.embarcadero.com/Libraries/en/FMX.Types.TControl.MakeScreenshot)方法制作表单的屏幕截图。
3.  使用 打印屏幕截图`Printer.Canvas.DrawBitmap`。

由于`TForm`不是派生自`TControl`, 并且`MakeScreenshot`是一种`TControl`方法，因此您不能调用`MakeScreenshot`您的表单。您将需要一个用于您可以调用的表单控件的整体容器`MakeScreenshot`。

# c++ - 大型矩阵的矩阵库？

> ID：16098869
> 
> 赞同：2
> 
> 时间：2013-04-19T06:51:58.860
> 
> 标签：c++, windows, matrix, linear-algebra

是否有任何用于大型矩阵（不能放入 RAM 的矩阵）的 C++ 矩阵库？

或者可能是一些旨在处理大型矩阵并且相对于基本矩阵库更快的库？

我认为 Windows 可以通过使用交换文件来处理这样的矩阵，但也许有为此优化的算法？

我找到了[ScaLAPACK](http://www.netlib.org/scalapack/)，但不确定它是否是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T08:10:58.817

您可以使用[块矩阵乘法](http://en.wikipedia.org/wiki/Block_matrix#Block_matrix_multiplication)和[求逆](http://en.wikipedia.org/wiki/Invertible_matrix#Blockwise_inversion)来减少交换。

如果您的矩阵是[稀疏](http://en.wikipedia.org/wiki/Sparse_matrix)的（即它们有很多为零的元素），您可以使用特殊的存储方法来节省内存。

# php - 用其他东西替换（ss）

> ID：16098870
> 
> 赞同：0
> 
> 时间：2013-04-19T06:52:06.530
> 
> 标签：php, regex, preg-replace

我在 PHP 中遇到了替换字符串中的 (ss) 的问题。

```
$string = 'I want a new (ss) now!';
$newString = preg_replace('\(ss\)', 'car', $string); 
```

我期待 $newString 成为：

> 我现在想要一辆新车！

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T06:54:09.587

你的问题是你的正则表达式没有[delimiters](http://php.net/manual/en/regexp.reference.delimiters.php)。

但是，由于您没有使用任何正则表达式功能，因此最好使用[`str_replace()`](http://php.net/manual/en/function.str-replace.php).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T06:53:05.610

利用`str_replace`

```
$string = 'I want a new (ss) now!';
$newString = str_replace('(ss)', 'car', $string); 
```

示例[http://codepad.org/2wcYtL8E](http://codepad.org/2wcYtL8E)

**输出**

> 我现在想要一辆新车！

# 编辑

示例`preg_replace`

[http://codepad.org/CFmSDTjR](http://codepad.org/CFmSDTjR)

```
$string = 'I want a new (ss) now!';
$newString = preg_replace('$\(ss\)$', 'car', $string); 
```

**输出**

> 我现在想要一辆新车！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T06:54:54.653

```
$newString = str_replace("ss", "car", $string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T06:56:04.380

使用 str_replace()

```
$newString = str_replace("(ss)", "car", $string); 
```

# visual-studio-2012 - Visual Studio 2012 在登录窗口中打开 Sharepoint 2013 页面

> ID：16098871
> 
> 赞同：3
> 
> 时间：2013-04-19T06:52:12.047
> 
> 标签：visual-studio-2012, sharepoint-2013

当我尝试部署/调试等时，我的托管应用程序：

![在此处输入图像描述](https://i.stack.imgur.com/l8Eb6.png)

我正在写好的证书，然后发生了一些奇怪的事情，只发生在一台机器上（很遗憾，这只是我的）。

**输入登录**按钮后（让我签名选中/未选中 100 次）它不会登录，但在此窗口中打开 sharepoint 2013 站点：

![在此处输入图像描述](https://i.stack.imgur.com/TxgWK.png)

我做了什么：

1.  重新安装视觉工作室
2.  更新视觉工作室
3.  重新启动计算机
4.  清除 cookie/catch 等

通过安装 CKSdev 工具意外解决但仅运行一次...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T09:23:12.223

我曾经遇到过，虽然它是一个调试版本，但所有凭据总是被拒绝。我仍然不知道为什么（这是一个大项目，不是完全由我自己制作的），但作为一个临时解决方案，您可以尝试对您的凭据进行硬编码。它并不完美，但它可能正在工作；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T11:31:23.453

唯一的解决方案是重新安装窗户，我没有找到任何其他解决方案

编辑：最新更新后，此问题已解决

# asp.net - PopUp 的 TargetControlID 可以使用 GridView 的 Button 吗？

> ID：16098875
> 
> 赞同：0
> 
> 时间：2013-04-19T06:52:19.123
> 
> 标签：asp.net, button, gridview, modalpopupextender

我有一个名为“发送”`Button`的.`id=btnSend``GridView`

我有一个`ModalPopUpExtender id="SendPopUp"`和`TargetControlID="btnSend"`

和

```
<asp:Panel id="SendPanel"> 
```

我得到错误

> System.InvalidOperationException：“SendPopUp”的 TargetControlID 无效。找不到 ID 为“btnSend”的控件。

我如何使它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:25:56.810

因为如果您的面板在 gridview 之外，它不会以这种方式工作。添加一个隐藏字段并将 targetcontrolid 设置为该字段。接下来在 gridview 的按钮单击中使用 modalpopup.show();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:33:38.980

```
You need to add the Click event of button then from code behind file you can show model popup by simply write code in button click event

modal.show() 
```

供您参考，我为您提供如下完整代码。我希望它会帮助你。

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head runat="server">
    <title>Untitled Page</title>
    <style type="text/css">
    .modalBackground
    {
    background-color: Gray;
    filter: alpha(opacity=80);
    opacity: 0.8;
    z-index: 10000;
    }
    </style>
    </head>
    <body>
    <form id="form1" runat="server">
    <asp:ToolkitScriptManager ID="ScriptManager1" runat="server">
    </asp:ToolkitScriptManager>
    <div>
    <asp:GridView runat="server" ID="gvdetails" DataKeyNames="UserId" AutoGenerateColumns="false">
    <RowStyle BackColor="#EFF3FB" />
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <AlternatingRowStyle BackColor="White" />
    <Columns>
    <asp:TemplateField HeaderText="Edit">
    <ItemTemplate>
    <asp:ImageButton ID="imgbtn" ImageUrl="~/Edit.jpg" runat="server" Width="25" Height="25" onclick="imgbtn_Click" />
    </ItemTemplate>
    </asp:TemplateField>
    <asp:BoundField DataField="UserName" HeaderText="UserName" />
    <asp:BoundField DataField="FirstName" HeaderText="FirstName" />
    <asp:BoundField DataField="LastName" HeaderText="LastName" />
    <asp:BoundField DataField="City" HeaderText="City" />
    <asp:BoundField DataField="Designation" HeaderText="Designation" />
    </Columns>
    </asp:GridView>
    <asp:Label ID="lblresult" runat="server"/>
    <asp:Button ID="btnShowPopup" runat="server" style="display:none" />
    <asp:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="btnShowPopup" PopupControlID="pnlpopup"
    CancelControlID="btnCancel" BackgroundCssClass="modalBackground">
    </asp:ModalPopupExtender>
    <asp:Panel ID="pnlpopup" runat="server" BackColor="White" Height="269px" Width="400px" style="display:none">
    <table width="100%" style="border:Solid 3px #D55500; width:100%; height:100%" cellpadding="0" cellspacing="0">
    <tr style="background-color:#D55500">
    <td colspan="2" style=" height:10%; color:White; font-weight:bold; font-size:larger" align="center">User Details</td>
    </tr>
    <tr>
    <td align="right" style=" width:45%">
    UserId:
    </td>
    <td>
    <asp:Label ID="lblID" runat="server"></asp:Label>
    </td>
    </tr>
    <tr>
    <td align="right">
    UserName:
    </td>
    <td>
    <asp:Label ID="lblusername" runat="server"></asp:Label>
    </td>
    </tr>
    <tr>
    <td align="right">
    FirstName:
    </td>
    <td>
    <asp:TextBox ID="txtfname" runat="server"/>
    </td>
    </tr>
    <tr>
    <td align="right">
    LastName:
    </td>
    <td>
    <asp:TextBox ID="txtlname" runat="server"/>
    </td>
    </tr>
    <tr>
    <td align="right">
    City:
    </td>
    <td>
    <asp:TextBox ID="txtCity" runat="server"/>
    </td>
    </tr>
    <tr>
    <td align="right">
    Designation:
    </td>
    <td>
    <asp:TextBox ID="txtDesg" runat="server"/>
    </td>
    </tr>
    <tr>
    <td>
    </td>
    <td>
    <asp:Button ID="btnUpdate" CommandName="Update" runat="server" Text="Update" onclick="btnUpdate_Click"/>
    <asp:Button ID="btnCancel" runat="server" Text="Cancel" />
    </td>
    </tr>
    </table>
    </asp:Panel>
    </div>
    </form>
    </body>
    </html> 
```

代码隐藏文件

```
using System.Configuration;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;

SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["dbconnection"].ToString());
protected void Page_Load(object sender, EventArgs e)
{
if(!IsPostBack)
{
BindGridData();
}
}
protected void BindGridData()
{
con.Open();
SqlCommand cmd = new SqlCommand("Select * from Employee_Details", con);
SqlDataAdapter da = new SqlDataAdapter(cmd);
DataTable dt = new DataTable();
da.Fill(dt);
gvdetails.DataSource = dt;
gvdetails.DataBind();
}
protected void btnUpdate_Click(object sender, EventArgs e)
{
con.Open();
SqlCommand cmd = new SqlCommand("update Employee_Details set FirstName=@FirstName,LastName=@LastName, City=@City,Designation=@Designation where UserId=@UserId", con);
cmd.Parameters.AddWithValue("@FirstName", txtfname.Text);
cmd.Parameters.AddWithValue("@LastName", txtlname.Text);
cmd.Parameters.AddWithValue("@City", txtCity.Text);
cmd.Parameters.AddWithValue("@Designation", txtDesg.Text);
cmd.Parameters.AddWithValue("@UserId", Convert.ToInt32(lblID.Text));
cmd.ExecuteNonQuery();
con.Close();
lblresult.Text = lblusername.Text + " Details Updated Successfully";
lblresult.ForeColor = Color.Green;
BindGridData();
}
protected void imgbtn_Click(object sender, ImageClickEventArgs e)
{
ImageButton btndetails = sender as ImageButton;
GridViewRow gvrow = (GridViewRow)btndetails.NamingContainer;
lblID.Text = gvdetails.DataKeys[gvrow.RowIndex].Value.ToString();
lblusername.Text = gvrow.Cells[1].Text;
txtfname.Text = gvrow.Cells[2].Text;
txtlname.Text = gvrow.Cells[3].Text;
txtCity.Text = gvrow.Cells[4].Text;
txtDesg.Text = gvrow.Cells[5].Text;
this.ModalPopupExtender1.Show();
} 
```

# java - 根据位置膨胀 ListView 中的自定义视图

> ID：16098886
> 
> 赞同：0
> 
> 时间：2013-04-19T06:53:24.647
> 
> 标签：java, android, android-listview, android-custom-view, android-inflate

我有一个`ListView`我想`View`在某个位置为自定义充气的地方。它实际上是第 11 项（位置 10）。

该`getCount()`方法返回 11。

这是该`getView()`方法的顶部：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    if (convertView == null) {              
        if (position < 10) {
            convertView = mInflater.inflate(R.layout.standard, null);           
        } else {
            convertView = mInflater.inflate(R.layout.custom, null);
            Log.i(TAG, "Inflated custom layout");
        }
        Log.i(TAG, "getView, position = "+position);
        holder = new ViewHolder();
        holder.tv = (TextView) convertView.findViewById(R.id.tv);
        holder.radioButton = (RadioButton) convertView.findViewById(R.id.radioButton1);             
        convertView.setTag(holder);             
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    ...
    Log.i(TAG, "getView() : position = " + position);
} 
```

这是我在 logcat 中看到的：

```
getView, position = 0
getView, position = 1
getView, position = 2 
```

其余的 getView 日志不显示；我会假设这条线会一直出现到`getView, position = 10`.

而这一行：`convertView = mInflater.inflate(R.layout.custom, null);`永远不会被调用，因为`Inflated custom layout`不会出现在 logcat 中。

不过这很有趣，因为底部的 logcat 总是被调用（当我向下滚动时`ListView`）：

```
getView() : position = 0
getView() : position = 1
getView() : position = 2
getView() : position = 3
getView() : position = 4
getView() : position = 5
getView() : position = 6
getView() : position = 7
getView() : position = 8
getView() : position = 9
getView() : position = 10 
```

**为什么**我的自定义布局没有膨胀？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:58:52.787

`getView()`当方法`View convertView`不为空时，您需要扩展布局。`View`从中返回的将`getView()`被重复使用。如果您检查视图是否为空并膨胀，它只会在第一次返回时膨胀`View`。

```
public View getView(final int position, View convertView, ViewGroup parent) {
    final ViewHolder holder;
    if (convertView == null) {              
        if (position < 10) {
            convertView = mInflater.inflate(R.layout.standard, null);           
        }
        Log.i(TAG, "getView, position = "+position);
        holder = new ViewHolder();
        holder.tv = (TextView) convertView.findViewById(R.id.tv);
        holder.radioButton = (RadioButton) convertView.findViewById(R.id.radioButton1);             
        convertView.setTag(holder);             
    } else {
        holder = (ViewHolder) convertView.getTag();
    }
    ...

    if(position > 10) {
         convertView = mInflater.inflate(R.layout.custom, null);
         Log.i(TAG, "Inflated custom layout");
    }

    Log.i(TAG, "getView() : position = " + position);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:03:50.827

在外部膨胀自定义布局`convertView == null`。因为，convertView 通常会返回以前回收的视图，因此您的自定义视图永远不会膨胀。

# c++ - 新标准的特性对 C++11 中的 boost 库实现是否有重大影响？

> ID：16098898
> 
> 赞同：3
> 
> 时间：2013-04-19T06:54:02.167
> 
> 标签：c++, boost, c++11, boost-spirit, boost-variant

**新标准的特性对C++11中的****boost**库实现是否有重大影响？

 ***鉴于可变参数模板*的存在，对`boost::variant`(BOOST_VARIANT_LIMIT_TYPES) 和库的某些部分特别感兴趣。`boost::spirit`

 *有没有关于这个的好文章？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T07:15:02.620

（我正在写我的第三条评论，这将专门针对 Spirit 的主题。我决定无论如何将我的评论融入答案）

Boost Spirit 将专门使用 C++11 功能（即放弃 C++03 支持），以便它可以充分利用改进的 TMP 能力并减少编译时间 - 编译时间是使用 Spirit V2 的一大缺点。

**Spirit X3**（实验性 V3 分支）已经在积极开发中：

> 还有其他新闻：Spirit V3 将仅支持 C++11 并支持移动：
> 
> [2013 年 2 月 11 日；下午 12:02](http://boost.2283326.n4.nabble.com/Error-with-container-within-sequence-tc4642517.html#a4642614)，乔尔·德·古兹曼写道：
> 
> > 不，X3 只会是 C++11。纯的。没有解决方法。
> > 
> > 请记住，尽管 X3 本质上是 X-perimental。从 X3 到 final 会发生很多事情。我不会关闭 C++03 支持的大门，尽管我非常倾向于在没有 03 的情况下继续前进。无论如何，V2 不会很快消失。

此外，表达式模板将是`auto`安全的，只要您想将“原始”解析器表达式绑定到局部变量，就不再需要 BOOST_SPIRIT_AUTO 宏。>

* * *

我找到了 Spirit X3 存储库的链接：

*   [https://github.com/djowel/spirit_x3](https://github.com/djowel/spirit_x3) (github)

请注意[http://boost-spirit.com/home/2013/02/23/spirit-x3-on-github/上的开发状态](http://boost-spirit.com/home/2013/02/23/spirit-x3-on-github/)***

# .net - EmailAddressAttribute 不需要

> ID：16098903
> 
> 赞同：11
> 
> 时间：2013-04-19T06:54:16.287
> 
> 标签：.net, data-annotations

我 `[EmailAddress]`在模型属性上有一个来自 .net 4.5 的 DataAnnotation，它返回一个“**电子邮件字段不是有效的电子邮件地址。**' 验证期间的错误，当电子邮件属性为空时。

虽然这在技术上是正确的，但我希望这个空值只会被`[Required]`注释捕获。

是否有任何我遗漏的参数可以传递给`[EmailAddress]`注释以允许验证空字符串，或者我是否必须回退到使用自定义验证器正则表达式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-25T22:45:24.367

没有这样的参数`EmailAddressAttribute`。此属性的验证代码如下：

```
if (value == null)
{
    return true;
}
string input = value as string;
return ((input != null) && (_regex.Match(input).Length > 0)); 
```

并且正则表达式定义为（空字符串将不匹配）：

```
_regex = new Regex(@"^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$", RegexOptions.Compiled | RegexOptions.ExplicitCapture | RegexOptions.IgnoreCase); 
```

为了实现您的目标，您可以创建可以从`DataTypeAttribute`override`IsValid`方法继承的方法，因此它将返回`true`空字符串或 null 字符串并使用 `EmailAddressAttribute`. 这应该是这样的：

```
public override bool IsValid(object value)
{
    if (value == null)
    {
        return true;
    }
    string input = value as string;
    var emailAddressAttribute = new EmailAddressAttribute();

    return (input != null) && (string.IsNullOrEmpty(input) || emailAddressAttribute.IsValid(input));
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-08-23T17:13:44.577

另一种方法是以不同的方式调用 API。对于 JSON，要求调用者`"Email": null`在正文中提供或不包含此属性。`<Email></Email>`对于 XML，如果电子邮件不可用，请提供空元素的调用者从消息正文中删除此元素。

如果 JSON 属性为 null 或不存在或 XML 元素不存在，则模型中的字段将变为 null，因此不会引发验证错误，因为除非您`[Required]`添加，否则不会出现验证错误。这样你就可以开车了。

我确实理解在某些情况下“懒惰”或无法调用者可能希望始终发送具有空值的相同正文，尤其是对于 XML。*“我发送这个`<Email></Email>`是因为我的客户没有向我提供电子邮件”*

# android - 正交相机的旋转

> ID：16098905
> 
> 赞同：4
> 
> 时间：2013-04-19T06:54:19.557
> 
> 标签：android, camera, libgdx

我可以使用此代码旋转相机

```
camera.zoom = 3//in constructor
if(camera.zoom>1)
    {
    camera.zoom-=0.01f;
    camera.rotate(15);
    } 
```

这是在渲染中完成的，现在缩放效果可以正常工作，但是当缩放完成时，我的屏幕会以当前角度保持旋转。如下所示。 ![在此处输入图像描述](https://i.stack.imgur.com/MI5wA.png)

我希望我的屏幕在缩放 0 度后停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T05:59:56.543

在您的代码片段中

```
**camera.zoom=3;** 
```

并且在每次迭代中，您将相机缩放**0.01**直到**camera.zoom > 1** ，因此您总共有 20 次迭代进行缩放

然后在迭代后旋转**18**度角，它将旋转**360**度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T16:26:21.457

我写了这个方法来计算相机的当前角度：

```
public float getCameraCurrentXYAngle(Camera cam)
{
    return (float)Math.atan2(cam.up.x, cam.up.y)*MathUtils.radiansToDegrees;
} 
```

然后我像这样调用旋转方法：

```
camera.rotate(rotationAngle - getCameraCurrentXYAngle(camera)); 
```

此代码有效，但它会在一次调用中立即轮换。要以一定速度旋转它，您需要为每一帧计算适当的“rotationAngle”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:10:56.107

您是否尝试过每次迭代旋转 1.8 度的倍数？然后，一旦 200 次迭代过去，您的图像应该已经完成​​了多次完整旋转。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T16:27:02.200

注意，计算机不能正确表示大多数实数！

在二进制中 0.01 是一个周期数，因此它将被截断/四舍五入。

几百次添加/添加浮点数会增加舍入误差，从而给你带来可怕的错误结果。

（例如，在 200 次减法之后，您的 camera.zoom 值将是 ~ 1.0000019 - 不是 1.0！）

这就是为什么您的循环重复 201 次，为您提供 0.9900019 的缩放值和 361.7996 ~ 361.8 的旋转（当使用 1.8 作为亚历克斯的答案时）。

你可以使用 libGDX 插值函数：

```
time += Gdx.graphics.getDeltaTime(); //the rounding error is futile here,
//because it'll increase the animation time by max. 1 frame
camera.zoom = Interpolation.linear.apply(3, 1, Math.min(time, 1));
camera.rotate = Interpolation.linear.apply(0, 360, Math.min(time, 1)); 
```

这段代码将创建一个一秒长的动画，从 3 缩放到 1 并从 0 旋转到 360（只是一个完整的旋转）

# python - IO 错误 - 抓取网页时 - 代理问题？

> ID：16098912
> 
> 赞同：0
> 
> 时间：2013-04-19T06:55:01.327
> 
> 标签：python, linux, screen-scraping

```
from urllib import urlopen
from bs4 import BeautifulSoup
import re

# Copy all of the content from the provided web page
webpage = urlopen('http://stats.espncricinfo.com/indian-premier-league-2012/engine/records/averages/batting.html?id=6680;type=tournament').read()

soup=BeautifulSoup(webpage);

commentary=soup.find_all("tr", "data2");

for i in range(10):

    for stat in commentary[i].stripped_strings:
        print stat,

    print "" 
```

我在 Eclipse 中运行这个 python 程序。我已更改网络连接中的代理条目。但我得到 IOError 如下：

> IOError: [Errno socket error] [Errno -2] Name or service not known

回溯（最近一次通话最后）：

> 网页中的文件“/home/sumanth/workspace/python/scraping.py”，第 22 行 = urlopen(' [http://stats.espncricinfo.com/indian-premier-league-2012/engine/records/averages/batting .html?id=6680;type=tournament](http://stats.espncricinfo.com/indian-premier-league-2012/engine/records/averages/batting.html?id=6680;type=tournament) ').read()
> 
> 文件“/usr/lib/python2.7/urllib.py”，第 86 行，在 urlopen 返回 opener.open(url)
> 
> 文件“/usr/lib/python2.7/urllib.py”，第 207 行，打开返回 getattr(self, name)(url)
> 
> 文件“/usr/lib/python2.7/urllib.py”，第 344 行，在 open_http h.endheaders(data)
> 
> 文件“/usr/lib/python2.7/httplib.py”，第 958 行，在 endheaders self._send_output(message_body)
> 
> _send_output self.send(msg) 中的文件“/usr/lib/python2.7/httplib.py”，第 818 行
> 
> 文件“/usr/lib/python2.7/httplib.py”，第 780 行，发送 self.connect()
> 
> 文件“/usr/lib/python2.7/httplib.py”，第 761 行，在连接 self.timeout，self.source_address）
> 
> 文件“/usr/lib/python2.7/socket.py”，第 571 行，在 create_connection 中引发错误
> 
> IOError：[Errno 套接字错误] [Errno 110] 连接超时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:49:34.747

看起来你有一个不稳定的互联网连接。错误“名称或服务未知”表示该页面的 DNS 查找失败，“连接超时错误”表示您无法联系远程服务器，但 DNS 查找成功。

# visual-studio - 何时在解决方案中构建\使用多个项目

> ID：16098913
> 
> 赞同：0
> 
> 时间：2013-04-19T06:55:01.500
> 
> 标签：visual-studio, projects-and-solutions

我是一个优秀但不那么先进的 .NET 开发人员。这更像是专家对初级知识转移的请求。

我在想，在 Visual Studio 中，您可以`Add`在解决方案中进行项目。当然，这些项目将带有不同的命名空间。

我的问题是

*   为什么要在解决方案中构建项目
*   在一个解决方案中构建多个项目是好的\有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:10:49.607

我想您的意思是解决方案中的多个项目，对吗？

我们主要从图书馆的角度使用它。您会收到多个程序集，这样您就可以只共享或交换应用程序的一部分。例如，如果您的应用程序中存在仅涉及应用程序一部分的错误，这将很有帮助。在这种情况下，您可以只修复和更换错误的程序集，而不是整个应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T14:15:27.310

它允许您分离应用程序的各个部分。您的 GUI、业务逻辑和数据访问都可以分开。

此外，解决方案中的项目可以通过“项目引用”相互引用。这可以确保它们都使用相同的配置进行构建：全部为 Debug 或全部为 Release。此外，当他们引用的项目发生变化时，项目可以构建。

# php - 如何选择日期时间字段中所有值的最大值但小于或等于其他日期时间值？

> ID：16098918
> 
> 赞同：0
> 
> 时间：2013-04-19T06:55:29.870
> 
> 标签：php, mysql

这是我的桌子，它很蹩脚但不要注意：

```
 CREATE TABLE items (
 item_id int(11) NOT NULL AUTO_INCREMENT,
 item_name varchar(255) NOT NULL,
 item_cat int(11) NOT NULL,
 item_desc text DEFAULT NULL,
 item_cost decimal(10, 0) DEFAULT NULL,
 item_image varchar(255) NOT NULL,
 item_brand varchar(255) DEFAULT NULL,
 item_active int(11) NOT NULL,
 PRIMARY KEY (item_id)
)

CREATE TABLE prices (
price_id decimal(10, 0) NOT NULL,
price_date datetime NOT NULL,
price decimal(10, 0) DEFAULT NULL,
fake int(11) NOT NULL AUTO_INCREMENT,
PRIMARY KEY (fake)
)

CREATE TABLE orders (
order_id int(11) NOT NULL AUTO_INCREMENT,
order_fam varchar(255) NOT NULL,
order_name varchar(255) NOT NULL,
order_otc varchar(255) DEFAULT NULL,
order_phone varchar(255) NOT NULL,
order_email varchar(255) DEFAULT NULL,
order_delivery int(11) NOT NULL,
order_payment int(11) NOT NULL,
order_comment varchar(255) DEFAULT NULL,
order_status int(11) DEFAULT NULL,
order_adress varchar(255) DEFAULT NULL,
order_user_id int(11) DEFAULT NULL,
order_date datetime DEFAULT NULL,
PRIMARY KEY (order_id)
)

mysql_query('SET NAMES utf8');
$query = 'SELECT *                                                 
 FROM                                               
prices                                                  
 WHERE                                              
price_date IN (SELECT MAX(price_date) FROM prices WHERE price_id= ' . $it . ')'; 
```

price_id 对 item_id 的引用

但这是交易。

现在我希望应用程序显示订单时的商品价格（order_date），并且我在“价格”中有这样的价格历史记录：

2013-04-19 10:13:51 $2000

2013-03-21 11:15:56 $3000

2013-02-03 10:45:22 $1400

所以到目前为止，我只是从该表中选择了最大日期。你会如何建议我修改查询？（“价格”的最大日期时间，但小于或等于 order_date）

编辑：我想选择在订单（order_date 字段）时处于活动状态的价格值（价格字段）。所以如果 order_date = 2013-03-29 11:15:56 那么价格 = $3000 不是 $2000 也不是 $1400

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:20:52.043

我认为您的查询可以改进：

```
SELECT * 
FROM prices                                                  
ORDER BY price_date DESC LIMIT 1; 
```

如果我是你，我还会在订单表中添加一个字段“price_id”，这将是你选择的钩子，只要你需要在下订单时恢复预售价格：

```
SELECT o.*, p.price
FROM orders o                                              
INNER JOIN prices p ON (o.price_id = p.price_id); 
```

我希望它有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T09:14:24.037

这是解决方案：

```
mysql_query('SET NAMES utf8');
$query = 'SELECT *
FROM
     prices
    WHERE
    price_id = ' . $it . ' AND price_date <= "' . $date . '" ORDER BY price_date DESC LIMIT  1'; 
```

我真的不需要 LIMIT 因为我没有在数组中运行任何循环，这只是为了清楚起见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:21:12.320

```
SELECT p1.* FROM                                               
prices  p1 
inner join prices p2 on p1.price_date < p2.price_date  
WHERE 
p2.price_date = 'some date' 
ORDER BY p1.price DESC LIMIT 1 
```

# ruby-on-rails - 如何在窗口 azure 上使用 LDAP？

> ID：16098923
> 
> 赞同：4
> 
> 时间：2013-04-19T06:55:38.057
> 
> 标签：ruby-on-rails, azure, active-directory, adfs

作为 ADFS 和 LDAP 的新手，我们的项目混合了 mongoDb、nodeJS 和 rails 技术。我们计划在 Windows Azure 上部署 mongodb、Nodejs 或 Rails，因为 LDAP 用于 ruby​​ 上的活动目录。如何在窗口 azure 中使用 LDAP。**与 ruby​​ 中的LDAP**相比，在 ruby​​ 中使用**ADFS**是否有任何性能变化。如果是，我如何**在 RUBY 上实现 ADFS**

 ****有谁知道它是怎么可能的。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:27:56.393

您的 LDAP 服务器会留在本地吗？需要明确的是，ADFS 并不等同于 LDAP。ADFS 是一种“安全令牌服务”(STS)。LDAP 是一个目录。

由于您提到了 ADFS，因此您的应用程序可能会对（本地）Active Directory 上的用户进行身份验证。ADFS 只能对 AD 上的用户进行身份验证，而不能在任意目录上进行身份验证。

要将您的 node.js 和 ruby​​ 应用程序连接到 ADFS，您需要实现 WS-Federation 或 SAML 协议。这些是 ADFS 支持的 2 个协议。[你可以在这里](http://msdn.microsoft.com/en-us/library/ff359114.aspx)阅读更多关于它的信息。

或者，您可以实现自己的 STS 并将其与您想要的任何东西（ADFS 或 LDAP）连接起来。如果您这样做，那么您可以更好地控制在您的应用程序中实现哪种协议（例如 OAuth2 或其他）。与 WS-Fed / SAML 相比，您可以利用的库似乎更多。

您可以查看许多开源 STS。IdentityServer 就是其中之一，人们已经成功地在其上构建了解决方案。您必须自己主持。

另一种选择是依赖[Auth0 之](http://www.auth0.com)类的第 3 方服务（可在 Windows Azure 商店中获得）。（**免责声明**：这是我正在开发的产品）。****

# php - PHPUnit CIUnit 问题

> ID：16098924
> 
> 赞同：0
> 
> 时间：2013-04-19T06:55:50.023
> 
> 标签：php, codeigniter, jenkins, phpunit

当我运行特定的测试套件时，

```
phpunit --testsuite LibTests 
```

我得到了预期的结果（通过了测试）。但是，当我运行“phpunit”时，我收到一个错误声明：

```
Fatal error: Call to a member function rss_feed_url() on a non-object in /Users/Shared/Jenkins/Home/jobs/Fanpilot_CT_3.0/workspace/tests/libs/VoltampMediaRSSFeedTest.php on line 20 
```

其中 rss_feed_url() 是我在 setup() 中加载的类的方法。

这是我的 phpunit.xml 文件的片段

```
<testsuites>
    <testsuite name="LibTests">
      <directory suffix=".php">tests/libs</directory>
    </testsuite>
</testsuites> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T07:25:27.077

问题是我没有将 $this->CI 重新初始化为正确的控制器。上次测试时它已经过时了。在每个 setUp()m 中，您需要确保初始化 $this-CI，如下所示：

```
$this->CI = set_controller(); 
```

就我而言，我有一个自定义的 MY_Controller (applications/core/My_Controller.php)。因此，如果我需要利用我的自定义控制器，我可以这样做。

```
$this->CI = set_controller('MY_Controller'); 
```

作为旁注，我最终通过在 CIU_Loader 方法 _ci_load_class 中转储 get_class 和 get_parent_class 来解决这个问题，我注意到这些值取决于我将其作为单个测试还是作为所有测试运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:35:31.463

似乎在 phpunit 中，大多数类变量在测试方法之间都未设置。如果这是问题所在（听起来像，带有非对象错误）。我相信我通过将这些变量设为私有和/或静态来为自己解决了这个问题。

# javascript - 函数不返回结果

> ID：16098930
> 
> 赞同：1
> 
> 时间：2013-04-19T06:56:00.917
> 
> 标签：javascript

我试图将一些复杂性重构为一个名为 getData 的函数，但调用此函数的代码似乎没有得到结果。

```
function getData(sql) {
  pool.getConnection(function(err, connection) {
    if (err) return;
    connection.query(sql, function(err, rows) {
      if (err) return;
      if (rows.length > 0) {
        console.log(rows);    // This outputs result from table
        return rows;
      } else {
        return [{"error":"Not found"}];
      }
    });
    connection.end();
  });
} 
```

但是，当从这样的函数调用它时，我得到未定义的返回，即使函数内的代码工作正常。

```
app.get('/1/employees/past', function(req, res, next) {
    var rows = getData("select * from users");
    res.json(rows);
}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T06:57:18.507

你`return`是从内部函数返回的，这不会影响外部函数。

您需要捕获它并返回它，并且看到它似乎与回调一起使用，您需要将额外的回调传递给`getData()`.

像这样的东西...

```
function getData(sql, callback) {
     // ...    
     connection.query(sql, function(err, rows) {
         // ...
         callback && callback(rows); // etc
     });
     // ...
} 
```

如果您想*更安全*`[[Call]]`，请确保使用[`typeof`](http://blog.alexanderdickson.com/javascript-typeof)（链接到我自己的博客文章）实现回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:00:03.520

The `getData` function is not returning anything! The `getConnection` function *inside* the `getData` function is calling a function which calls a function which returns something; the `getData` function itself is not returning anything.

What's more, if this code executes asynchronously, all the returns will execute long after the `getData` function has returned.

You're either going the synchronous `return` route or the asynchronous callback route, you can't mix both styles.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:01:14.937

Your `getData` function does not return anything - the return statements inside the code are all for the anonymous functions which you pass into `connection.query` and `connection.query`.

您的与连接相关的函数是异步的 - 即它们在您调用它们后立即返回，而无需等待任何结果可用。如果您想对返回的结果执行某些操作，您需要在其中一个匿名函数中执行此操作，而不是在`getData`完成后立即执行此操作。

# python - 故障排除“只能将元组（不是“str”）连接到元组”错误

> ID：16098934
> 
> 赞同：1
> 
> 时间：2013-04-19T06:56:15.393
> 
> 标签：python, django, django-admin

当我尝试扩展 django admin 用户时。我收到以下错误。

```
can only concatenate tuple (not "str") to tuple 
```

这是我的 models.py 类

```
from django.db import models
from django.contrib.auth.models import User
from django.db.models.signals import post_save

User.add_to_class('age', models.BooleanField(default=False))

class Employee(models.Model):

  user=models.OneToOneField(User)
  name=models.CharField(max_length=100)
  address=models.CharField(max_length=200)
  designation=models.CharField(max_length=100)
  email=models.CharField(max_length=100)    
  role=models.CharField(max_length=10)  
  project=models.CharField(max_length=50)
  task=models.CharField(max_length=50)
  avatar = models.ImageField("Profile Pic", upload_to="images/", blank=True, null=True)

def __unicode__(self):

    return self.name

def ensure_profile_exists(sender, **kwargs):
if kwargs.get('created', False):
    Employee.objects.create(user=kwargs.get('instance'))

post_save.connect(ensure_profile_exists, sender=User) 
```

这是我的 admin.py 文件

```
from django.contrib.auth.admin import UserAdmin
 UserAdmin.list_display += ('age')
 UserAdmin.list_filter += ('age')
 UserAdmin.fieldsets += ('age',) 
```

我需要向 django 管理员用户添加一个名为 age 的字段，例如个人信息中的名字、姓氏、电子邮件和年龄。请有人帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T07:01:10.903

将这些行更改为后面有逗号`'age'`

```
UserAdmin.list_display += ('age')
UserAdmin.list_filter += ('age') 
```

作为

```
UserAdmin.list_display += ('age',)
UserAdmin.list_filter += ('age',) 
```

否则，python 评估`('age')`为`'age'`而不是元组。

你已经在第三行适当地做到了这一点`UserAdmin.fieldsets += ('age',)`

# iphone - 可编辑TextView ios 6中的可点击链接

> ID：16098937
> 
> 赞同：0
> 
> 时间：2013-04-19T06:56:25.123
> 
> 标签：iphone, ios6

我将 UITextView 的可编辑属性设置为是，因为我需要 UITextView 可编辑，那么在这种情况下怎么可能点击 UITextView 中的链接？有没有办法解决我的问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:24:42.577

`UITextView`您必须在实现文件中设置检测类型，例如

```
textview.editable = NO;
textview.dataDetectorTypes = UIDataDetectorTypeAll; 
```

# html - 如何使用相对路径访问文件

> ID：16098941
> 
> 赞同：0
> 
> 时间：2013-04-19T06:56:44.630
> 
> 标签：html, css, relative-path

我的 Web 应用程序中有以下文件夹层次结构。

![在此处输入图像描述](https://i.stack.imgur.com/p7MO4.png)

我正在使用以下相对路径来访问我的 CSS 文件，但布局未检测到 CSS。有两种布局，但我从位于视图文件夹内的布局文件中调用 CSS。

这是我用来访问 CSS 文件的路径。

```
<link rel="stylesheet" type="text/css" href="../style/style.css"> 
```

我也使用了这条路径，但没有运气。

```
<link rel="stylesheet" type="text/css" href="../../style/style.css"> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T09:37:00.167

你可以使用这个：

```
<link type="text/css" href="style/style.css" rel="stylesheet" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:18:04.830

检查您是否没有使用多个 CSS 文件。如果您使用的是 Chrome/FF，您可以使用 firebug 等工具检查您的 CSS 是否被调用。

您可以使用这些工具查看完整路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:22:00.223

如果您的布局文件加载到另一个文件中，请尝试使用该文件路径或简单地使用这样的路径

```
 <head>
     <link href="/style/style.css" rel="stylesheet" type="text/css" />
 </head> 
```

你的真实布局也可以这样工作

```
<head>
     <link href="style/style.css" rel="stylesheet" type="text/css" />
 </head> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T07:08:10.190

第二个路径应该是正确的。我还在 Visual Studio 2010 中使用与您相同的文件夹进行了尝试，VS 给了我与您所说的相同的路径（第二个）。

另一个问题，您是否将链接放入 HTML 页面的标题中？

```
<head>
     <link href="../../style/style.css" rel="stylesheet" type="text/css" />
</head>
<body>

</body> 
```

# c++ - 是否有任何独立于编程语言的密码算法？

> ID：16098963
> 
> 赞同：-1
> 
> 时间：2013-04-19T06:58:13.650
> 
> 标签：c++, asp.net, qt, encryption, cryptography

我正在为一个项目开发许可块，**QT 桌面程序创建一个产品 ID，用户必须在****asp.net**网站中输入此 ID以生成激活密钥，此激活密钥包含激活产品所需的一些信息，并且必须在**QT桌面程序**中解密。我需要的是一个密码库或一个算法来加密**ASP.net中的信息并在****QT(c++)**中解密它，反之亦然。

有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:51:27.417

这些算法不是面向任何特定语言的。只需在 ASP 中获取一些加密库，在 C++ 中获取一些加密库，然后在 ASP 中加密并在 C++ 中解密......

只要库遵循正确的算法规范，就不会出现任何问题。

# testing - 使用命令行将参数传递给 STAX 作业中的特定函数

> ID：16098967
> 
> 赞同：1
> 
> 时间：2013-04-19T06:58:37.720
> 
> 标签：testing, command-line, automation, staf

> 我在该位置有一个 STAX`new15.xml`工作`/home/dharm/staf/services/stax/samples`。 `new15.xml`有两个功能 `main` 和 `readFile`

```
 file_name = '/home/dharm/datafiles/ReadData3.txt' 
```

> `readFile`is 的必需参数`file_name`。
> 
> 我想使用命令行执行这个命令，但我也想提供所需的参数来`readFile`运行。

```
staf local execute file /home/dharm/staf/services/stax/samples/new15.xml wait return result 
```

> 我应该在命令中进行哪些修改才能使其正常工作。

**“我有什么尝试”**

**第一的**

```
dharm@ubuntu:~$ staf local stax execute file /home/dharm/staf/services/stax/samples/new15.xml ARGS file_name="'/home/dharm/datafiles/ReadData3.txt'" wait returnresult
Response
--------
{
  Job ID         : 3
  Start Date-Time: 20130418-23:54:39
  End Date-Time  : 20130418-23:54:40
  Status         : Terminated
  Result         : None
  Job Log Errors : [
    {
      Date-Time: 20130418-23:54:40
      Level    : Error
      Message  : STAXPythonEvaluationError signal raised. Terminating job. 

===== XML Information =====

File: /home/dharm/staf/services/stax/samples/new15.xml, Machine: local://local
Line <Error in ARGS option>: Error in element type "<External>".

===== Python Error Information =====

com.ibm.staf.service.stax.STAXPythonEvaluationException: 

Python object evaluation failed for:
file_name='/home/dharm/datafiles/ReadData3.txt'

SyntaxError: ("mismatched input '=' expecting EOF", ('<pyEval string>', 1, 9, "file_name='/home/dharm/datafiles/ReadData3.txt'\n"))

===== Call Stack for STAX Thread 1 =====

[]
    }
  ]
  Testcase Totals: {
    Tests : 0
    Passes: 0
    Fails : 0
  }
} 
```

**“第二条命令”**

```
dharm@ubuntu:~$ staf local stax execute file /home/dharm/staf/services/stax/samples/new15.xml SCRIPT file_name="'/home/dharm/datafiles/ReadData3.txt'" wait returnresult
Response
--------
{
  Job ID         : 4
  Start Date-Time: 20130418-23:56:01
  End Date-Time  : 20130418-23:56:02
  Status         : Terminated
  Result         : None
  Job Log Errors : [
    {
      Date-Time: 20130418-23:56:02
      Level    : Error
      Message  : STAXFunctionArgValidate signal raised. Terminating job. 

===== XML Information =====

File: /home/dharm/staf/services/stax/samples/new15.xml, Machine: local://local
Line 20: Error in element type "call".

Required argument "file_name" is not provided in the call to function "readFile".

===== Call Stack for STAX Thread 1 =====

[
  function: main (Line: 19, File: /home/dharm/staf/services/stax/samples/new15.xml, Machine: local://local)
]
    }
  ]
  Testcase Totals: {
    Tests : 0
    Passes: 0
    Fails : 0
  }
} 
```

# javascript - 当子视图从 Backbone 中的服务获取 JSON 数据时，在父视图中渲染子视图

> ID：16098968
> 
> 赞同：0
> 
> 时间：2013-04-19T06:58:41.087
> 
> 标签：javascript, model-view-controller, backbone.js, view, underscore.js

在父视图中渲染子视图时，我试图解决这个问题。

父视图是一个静态的 html 块，它将是用于过滤子视图的选项卡，子视图是从服务器提取的表格数据。

问题是父视图和子视图渲染正常，但子视图的集合没有数据；但我可以确认该服务正在控制台中返回数据。

这是我的路由器：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'bootstrap',
    'view/logged-out',
    'view/leaderboard',
    'view/leaderboard-filter',  
    'view/leaderboard-overall',
    'view/login',
    'view/navigation'
], function($, _, Backbone, Bootstrap, LoggedOutView, LeaderboardView, LeaderboardFilter, OverallLeaderboardView, LoginView, NavigationView) {
    var AppRouter = Backbone.Router.extend({
        routes: {
            '': 'index',
            'leaderboard': 'leaderboard',
            'login': 'login'
        },
        index: function () {
            var loggedOutView = new LoggedOutView();
        },
        leaderboard: function(){
            var leaderboardFilter = new LeaderboardFilter();
            //var overallLeaderboardView = new OverallLeaderboardView();
        },
        login: function(){
            var loginView = new LoginView();
        }
    });

    var initialize = function(){

        var app_router = new AppRouter,
            leaderboardView = new LeaderboardView(),
            navigationView = new NavigationView();

        Backbone.history.start();
    };

    return {
        initialize: initialize
    };
}); 
```

我的父视图，从路由器调用：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'view/leaderboard-overall',
    'text!template/leaderboard-filter.html'
    ],
    function($, _, Backbone, Router, OverallLeaderboardView, LeaderboardFilterTemplate) {

        var LeaderboardFilterView = Backbone.View.extend({
            el: 'section[role="main"]',
            template: _.template(LeaderboardFilterTemplate),
            initialize: function(){
                this.innerView = new OverallLeaderboardView();
                this.render();
            },
            render: function(){
                this.$el.append(this.template());
                this.$el.append(this.innerView.render());
            }
        });

        return LeaderboardFilterView;
}); 
```

然后我想在父视图模板 HTML 中呈现一个表格视图：

```
define([
    'domLib',
    'underscore',
    'backbone',
    'router',
    'collection/leaderboard-overall',
    'text!template/leaderboard-overall.html'
    ],
    function($, _, Backbone, Router, OverallLeaderboardCollection, OverallLeaderboardTemplate) {

        var OverallLeaderboardView = Backbone.View.extend({
            el: 'section[role="main"]',
            template: _.template(OverallLeaderboardTemplate),
            initialize: function(){
                this.collection = new OverallLeaderboardCollection();
                this.collection.bind('reset', _.bind(this.render, this));
                this.collection.fetch();
            },
            render: function(){
                console.log('render overall leaderboard');
                this.$el.append(this.template({players: this.collection.toJSON()}));
            }
        });

        return OverallLeaderboardView;
}); 
```

父模板（希望在 .tab-pane 中呈现子视图）：

```
<nav id="leaderboard-filter">
    <ul class="nav nav-tabs">
        <li class="active"><a href="#all-time">All Time</a></li>
        <li><a href="#today">Today</a></li>
        <li><a href="#week">This Week</a></li>
        <li><a href="#month">This Month</a></li>
    </ul>
</nav>
<section>
    <div class="tab-content">
        <div class="tab-pane">
            <!-- Render leaderboard -->
        </div>
    </div>  
</section> 
```

子视图：

```
<table class="table table-bordered table-striped">
    <thead>                             
        <tr>
            <th>Rank</th>
            <th>Player</th>
            <th>Games Completed</th>
            <th>High Score</th>
            <th>Percent Correct</th>
            <th>Avg Answer Time</th>
            <th>Cumulative Score</th>
        </tr>
    </thead>
    <tfoot>
        <!-- Logged in user details here -->
    </tfoot>
    <tbody>
        <% _.each(players, function(player, index){ %>
            <tr>
                <td><%= index + 1 %></td>
                <td><a href="/hyc-web/"><%= _.escape(player.user) %></a></td>
                <td><%= player.games_completed %></td>
                <td><%= player.high_score %></td>
                <td><%= player.percent_correct %></td>
                <td><%= player.avg_answer_time %></td>
                <td><%= player.cumulative_score %></td>
            </tr>           
        <% }); %>                                   
    </tbody>
</table> 
```

两者都按顺序呈现，但子视图不呈现任何数据，只是表头。

无法弄清楚如何让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:49:28.607

您应该在追加时指定孩子的 el。

从

```
this.$el.append(this.innerView.render()); 
```

到

```
this.$el.append(this.innerView.render().el); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T08:01:13.917

有关您的部分问题，请参阅 RullDawg 的答案。
另一部分是您在升级到[Backbone 1.0](http://backbonejs.org/#changelog)时可能会错过一些事情。

"*将 Collection 的 "update" 重命名为 set，与类似的 model.set() 并行，并与 reset 对比。它现在是获取后的默认更新机制。如果您想继续使用 "reset"，请通过 {reset : 真的}。* ”

所以基本上，你渲染子视图的唯一时间是在父视图中渲染它时（我不知道你为什么要这样做）。`reset`你在它从未被触发的时候收听它。将其更改为`this.collection.fetch({reset: true});`并注意要附加到 DOM 的内容，它应该可以工作。

如果您不想使用该`reset`标志，则可以收听更通用的`sync`事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T09:13:04.730

我的理解是，当集合在后端有数据时，它不会呈现数据。现在你的代码有一个缺陷。fetch() 是异步调用。因此，要确保您的数据在渲染视图时可用，就是编写成功处理程序。并将您的 fetch 逻辑移动到 render() 函数，例如，如果我在 OverAllLeatherBoardView 中看到您的 fetch 代码

```
initialize: function(){
            this.collection = new OverallLeaderboardCollection();
            this.collection.bind('reset', _.bind(this.render, this));
            //this.collection.fetch(); move it to render function
        },
        render: function(){
            console.log('render overall leaderboard');
            this.collection.fetch({success: $.proxy(myDelegate, this)})
            //this.$el.append(this.template({players: this.collection.toJSON()})); move it to delegate
        },
        //here you go
        mDelegate:function(model, response, options){
          this.$el.append(this.template({players: model.toJSON()}));
        } 
```

# html - 背景图像应根据文本大小缩小

> ID：16098970
> 
> 赞同：1
> 
> 时间：2013-04-19T06:58:47.293
> 
> 标签：html, css, html-email

我是电子邮件设计模板的新手。

我有`<td>`一个背景图片。例如：`<td> Background image </td>`。

首先，我希望一些文本出现在背景图像上。其次，这个文本是动态的，所以我希望背景图像根据文本的长度缩小/调整大小。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T15:53:55.103

在 Outlook中获取标签之外的图像背景的唯一方法`<body>`是使用 VML。

查看[emailbg.net](http://emailbg.net/)

我不相信您可以将背景图像设置为百分比，因此即使您可以调整 span/div/table 以换行文本，我认为背景图像只会平铺在该元素内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T08:05:20.897

尝试在 td 标签之后添加跨度标签，并使用背景设置跨度的样式，必要时使用块。由于 span 标签是特定于元素的，它们只会为动态显示的文本提供背景。希望这可以帮助。如果您为此创建 jiddle，那就太好了。

# internet-explorer - Internet Explorer + Windows8 触摸屏问题

> ID：16098971
> 
> 赞同：7
> 
> 时间：2013-04-19T06:58:50.053
> 
> 标签：internet-explorer, google-maps, google-maps-api-3, windows-8, touchscreen

我们遇到了与**Google Maps API V3**相关的问题。问题是，当我们拖动标记时，地图也开始拖动。

我们**仅在 Windows 8 Environment + Internet Explorer 的触摸屏上遇到此问题**，在普通屏幕/移动屏幕 - IPaid/其他浏览器（Safari 和 FireFox）上正常。

我们使用了以下解决方案，但它在**Internet Explorer9 和 10**`eval javascript error`中引发错误（ ）：

 **```
google.maps.event.addListener(marker, 'dragstart', function(){
    mapObject.setOptions({ draggable: false });
});
google.maps.event.addListener(marker, 'dragend', function(){
    mapObject.setOptions({ draggable: true });
}); 
```

[示例代码在这里](http://jsfiddle.net/Mppw4/3/)。

我们也在这里报告了这个问题： [gmaps-api-issues](http://code.google.com/p/gmaps-api-issues/issues/detail?id=5292&thanks=5292&ts=1366679575)

**编辑：**

我们也在这里发布了一个[相关的问题](https://stackoverflow.com/questions/16168369/is-googlemaps-api-v3-supports-touch-event)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T10:00:02.883

**终于取得了一些成功**（地图仍然移动了一点，但目前可以忽略）！

**声明了两个变量：**

```
var isAnyMarkerIsInDraggingState = false;// if a marker is in drag state this value will be TRUE otherwise FALSE
var mapCenterPositionAtTheTimeWhenMarkerWasDragged;// Map Center Position 
```

**拖动标记时：**

```
 google.maps.event.addListener(objMarker, 'dragstart', function () {
        // Store map center position when a marker is dragged
        mapCenterPositionAtTheTimeWhenMarkerWasDragged = mapObject.getCenter();
        isAnyMarkerIsInDraggingState = true;
    }); 
```

**放下标记时（拖动结束）：**

```
google.maps.event.addListener(objMarker, 'dragend', function () {
    // Make Map draggable
    // Set isAnyMarkerIsInDraggingState = false. Because no marker is in drag state
    mapObject.setOptions({ draggable: true });
    isAnyMarkerIsInDraggingState = false;
}); 
```

**当地图拖动开始时：**

```
google.maps.event.addListener(mapObject, 'dragstart', function () {
    // isAnyMarkerIsInDraggingState = true: means the user is dragging a marker.
    // If the user is dragging the Marker then don't allow the Map to be Dragged
    if (isAnyMarkerIsInDraggingState) {
        mapObject.setOptions({ draggable: false });
    }
}); 
```

**地图处于拖动状态时：**

```
google.maps.event.addListener(mapObject, 'drag', function () {
    // isAnyMarkerIsInDraggingState = true: means the user is dragging a marker.
    // If the user is dragging the Marker then don't allow the Map to be Dragged and set its CenterPosition
    // to mapCenterPositionAtTheTimeWhenMarkerWasDragged

    if (isAnyMarkerIsInDraggingState) {
        mapObject.setCenter(mapCenterPositionAtTheTimeWhenMarkerWasDragged);
    }
}); 
```

[完整的示例代码在这里](http://jsfiddle.net/Mppw4/5/)。**

# php - 如果用户已登录 Google Apps 帐户，请签入自定义 PHP 应用程序

> ID：16098973
> 
> 赞同：0
> 
> 时间：2013-04-19T06:58:56.803
> 
> 标签：php, openid

我正在创建一个 PHP 应用程序，我想在其中实现 Openid 登录。我想实现以下功能：

如果用户已经登录了他的 Google Apps 帐户，那么 PHP 应用程序不应该再次询问他的登录信息。

如何签入自定义 PHP 应用程序登录，该用户已经登录了他的 Google Apps 帐户？我正在使用 PHP lightopenid。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T07:05:02.180

你不能。您不能简单地检查随机访问者是否在其他一些随机的第 3 方站点上进行了身份验证。因为这不关你的事，而且会是一个相当大的隐私问题。

您只能通过正常的 OpenID 登录过程，将用户重定向到 Google 并查看您返回的内容。

也许您的意思是实现*您的*登录系统？OpenID 登录只会告诉您用户是*谁。*它不会为您记住用户或为您实施任何类型的会话或权限系统。*如果用户已成功使用 OpenID 对您的站点进行了一次身份验证，请使用会话、cookie、数据库条目或您*站点上所需的任何其他内容来跟踪他。

# ruby-on-rails - 在 Rails 关系上使用 Ruby 的 select 方法并更新它

> ID：16098974
> 
> 赞同：6
> 
> 时间：2013-04-19T06:59:05.187
> 
> 标签：ruby-on-rails, ruby, arrays, activerecord

我有一个用户以前的“投票”的 ActiveRecord 关系......

```
@previous_votes = current_user.votes 
```

我需要将这些过滤到仅针对当前“挑战”的投票，所以 Ruby 的`select`方法似乎是做到这一点的最佳方式......

```
@previous_votes = current_user.votes.select { |v| v.entry.challenge_id == Entry.find(params[:entry_id]).challenge_id } 
```

但是我还需要更新这些记录的属性，并且该`select`方法将我的关系变成了一个无法更新或保存的数组！

```
@previous_votes.update_all :ignore => false
# ...
# undefined method `update_all' for #<Array:0x007fed7949a0c0> 
```

**如何像 select 方法一样过滤我的关系，但又不会失去使用 ActiveRecord 更新/保存项目的能力？**

在谷歌周围寻找似乎`named_scope`' 出现在类似问题的所有答案中，但我无法弄清楚他们可以具体完成我所追求的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:03:32.110

我相信您可以执行以下操作：

```
@entry = Entry.find(params[:entry_id])    
@previous_votes = Vote.joins(:entry).where(entries: { id: @entry.id, challenge_id: @entry.challenge_id }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-22T19:57:18.447

一个很好的方法是使用[scopes](http://guides.rubyonrails.org/active_record_querying.html#scopes)。在您的情况下，您可以按如下方式设置范围：

```
class Vote < ActiveRecord::Base
  scope :for_challenge, lambda do |challenge_id|
    joins(:entry).where("entry.challenge_id = ?", challenge_id)
  end
end 
```

然后，您获取当前投票的代码将如下所示：

```
challenge_id = Entry.find(params[:entry_id]).challenge_id
@previous_votes = current_user.votes.for_challenge(challenge_id) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-22T20:41:20.767

问题在于这`select`不是 SQL 方法。它获取所有记录并在 Ruby 端过滤它们。这是一个简化的示例：

```
votes = Vote.scoped
votes.select{ |v| v.active? }
# SQL: select * from votes
# Ruby: all.select{ |v| v.active? } 
```

由于 update_all 是一种 SQL 方法，因此您不能在 Ruby 数组上使用它。您可以坚持在 Ruby 中执行所有操作，或者将其中的一些（全部）操作移到 SQL 中。

```
votes = Vote.scoped
votes.select{ |v| v.active? }
# N SQL operations (N - number of votes)
votes.each{ |vote| vote.update_attribute :ignore, false }
# or in 1 SQL operation
Vote.where(id: votes.map(&:id)).update_all(ignore: false) 
```

如果您实际上不使用获取的投票，那么在 SQL 端执行整个选择和更新会更快：

```
Vote.where(active: true).update_all(ignore: false) 
```

虽然前面的示例适用于您`select`的 . 如果您在 Rails 模型中设置了所有关系，您可以大致如下进行：

```
entry = Entry.find(params[:entry_id])
current_user.votes.joins(:challenges).merge(entry.challenge.votes)
# requires following associations:
# Challenge.has_many :votes
# User.has_many :votes
# Vote.has_many :challenges 
```

Rails 将为您构建适当的 SQL。但是，如果某些东西不起作用，您总是可以退回到手动编写 SQL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T07:10:26.273

使用`collection_select`而不是`select`. 专门构建在返回对象`collection_select`之上，而不是像你得到的字符串数组。`select``ActiveRecord``select`

```
@previous_votes = current_user.votes.collection_select { |v| v.entry.challenge_id == Entry.find(params[:entry_id]).challenge_id } 
```

这应该`@previous_votes`作为对象数组返回

编辑：用另一种建议的方式更新这篇文章以在数组中返回这些 AR 对象

```
@previous_votes = current_user.votes.collect {|v| records.detect { v.entry.challenge_id == Entry.find(params[:entry_id]).challenge_id}} 
```

# sqlite - 错误：没有这样的排序规则：NOCASE_UTF8

> ID：16098977
> 
> 赞同：5
> 
> 时间：2013-04-19T06:59:19.427
> 
> 标签：sqlite

我正在使用现有的 db 文件`sqlite3`。特定表中的一列是有子句`COLLATE NOCASE_UTF8`。我无法在该字段中插入任​​何文本。它给出以下错误：

```
sqlite> INSERT INTO recording (recordingName) VALUES ('abcd');
Error: no such collation sequence: NOCASE_UTF8 
```

我应该如何在其中输入文字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:18:53.063

那是自定义排序规则。SQLite 原生支持名为“NOCASE”的排序规则，但不支持名为“NOCASE_UTF8”的排序规则。我认为您遇到了错误，因为您的 SQLite 数据库中没有定义这样的排序规则，但是该排序规则名称仍作为表定义的一部分存储。

我不确定 SQLite 如何处理[通过 C API 定义的排序](http://www.sqlite.org/c3ref/create_collation.html)规则的存储。但我很确定这就是你需要解决的问题。另请参阅[Collat​​ion Needed Callbacks](http://www.sqlite.org/c3ref/collation_needed.html)的文档。（您可能只需要一次调用 sqlite3_collat​​ion_needed()。）

# wpf - 无边框 WPF 自定义窗口的 DragMove 闪烁

> ID：16098985
> 
> 赞同：0
> 
> 时间：2013-04-19T06:59:52.033
> 
> 标签：wpf, drag, borderless

我有一个自定义的无边框窗口，旨在作为未来 WPF 项目的基本表单。我已经设法模拟了几乎所有本机窗口行为，但是 DragMove 有问题。当用户将其标题栏拖到 Windows 任务栏后面时，我希望窗口重新定位在任务栏上方，以便整个窗口可见。我设法通过重写 OnLocationChanged 方法来做到这一点，因为在 DragMove 期间所有与鼠标相关的处理程序都被阻止。

这就像一个魅力，除了当我沿着 Windows 任务栏拖动标题栏时会闪烁。我可以看到它正在尝试在下面重绘窗口，然后它立即在预期的位置再次重绘窗口。

如何正确中断此重绘？非常感谢！

* * *

[不幸的是，这个](https://stackoverflow.com/questions/3967432/c-sharp-wpf-dragmove-without-window-locationchanged)、[这个](https://stackoverflow.com/questions/12841909/overriding-dragmove-for-dragging-custom-controls)、[这个](https://stackoverflow.com/questions/13079407/how-to-suspend-wpf-window-to-render-before-not-all-desired-properties-are-set)和[这个](https://stackoverflow.com/questions/11703833/dragmove-and-maximize)SO 问题根本没有帮助我。这是我的代码的摘录：

```
protected override void OnLocationChanged(EventArgs e)
{
    base.OnLocationChanged(e);

    var activeScreenHeight = System.Windows.Forms.Screen.FromHandle(new WindowInteropHelper(this).Handle).WorkingArea.Bottom - ToolbarSnapThreshold;
    if (activeScreenHeight < this.RestoreBounds.Top)
    {
        this.Top = activeScreenHeight - this.RestoreBounds.Height + ToolbarSnapThreshold;
    }
}

protected void MaximizeOrRestore()
{
    this.WindowState = (this.WindowState == WindowState.Normal) ? WindowState.Maximized : WindowState.Normal;
    this.lastNonMinimizedState = this.WindowState;
}

protected void RestoreAndDragMove(MouseButtonState leftMouseButtonState)
{
    if (leftMouseButtonState == MouseButtonState.Pressed)
    {
        if (this.WindowState == WindowState.Maximized)
        {
            var activeScreenWidth = System.Windows.Forms.Screen.FromHandle(new WindowInteropHelper(this).Handle).Bounds.Width;
            var windowCurrentWidth = this.RestoreBounds.Width;

            var windowPositionAdjustX = this.relativeMousePositionX - (windowCurrentWidth / 2);

            if (windowPositionAdjustX < 0)
            {
                windowPositionAdjustX = 0;
            }
            else if (windowPositionAdjustX + windowCurrentWidth > activeScreenWidth)
            {
                windowPositionAdjustX = activeScreenWidth - windowCurrentWidth;
            }

            this.WindowState = WindowState.Normal;
            this.lastNonMinimizedState = this.WindowState;
            this.Left = windowPositionAdjustX - this.relativeMousePositionX + this.originalMousePositionX;
            this.Top = 0 - this.relativeMousePositionY + this.originalMousePositionY;
        }

        this.DragMove();
    }
}

private void Window_TitleBarClicked(object sender, MouseButtonEventArgs e)
{
    if (e.LeftButton == MouseButtonState.Pressed)
    {
        this.relativeMousePositionX = e.GetPosition(this).X;
        this.relativeMousePositionY = e.GetPosition(this).Y;
        this.originalMousePositionX = System.Windows.Forms.Cursor.Position.X;
        this.originalMousePositionY = System.Windows.Forms.Cursor.Position.Y;

        if (e.ClickCount == 2)
        {
            this.MaximizeOrRestore();
        }
    }
} 
```

# jquery - 一页投资组合的jQuery代码

> ID：16098995
> 
> 赞同：0
> 
> 时间：2013-04-19T07:00:44.077
> 
> 标签：jquery

我正在为我的一页作品集使用以下 jquery 代码

```
<script>
$(document).ready(function(){
    $('nav ul li a').click(function(){
        var el = $(this).attr('href');
        var elWrapped = $(el);
        scrollToDiv(elWrapped,140);
        return false;

    });

    function scrollToDiv(element,navheight){
          var offset = element.offset();
          var offsetTop = offset.top;
          var totalScroll = offsetTop-navheight;
          $('body,html').animate({
            scrollTop: totalScroll
        }, 650);
    }
});
</script> 
```

[关联](http://www.hettzdesigns.com)

但是当页面加载时，它直接转到网站的联系部分而不是索引部分。

谁能告诉它哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T07:11:07.570

您正在为 textarea 提供自动对焦。

```
<textarea type="textarea" name="message" id="message" rows=9 required autofocus /></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T07:11:33.040

部分在这里不是问题。问题是`Name`文本框正在关注加载，并且页面会自动滚动以显示此字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T07:24:03.753

我已经尝试单击您在问题中发布的链接，并且通过使用 Chrome，它显示了您正在谈论的行为，而另一方面，当我在 IE 10 中执行相同操作时，这种行为不会显示.

检查您网站的源代码，ID='name' 的文本框有一个**autofocus**属性。

```
<input type="text" name="name" id="name" required="" autofocus=""> 
```

请参阅此[链接](http://www.w3schools.com/tags/att_input_autofocus.asp)了解更多信息。

# vb.net - 在退出时删除 Windows 窗体控件

> ID：16098997
> 
> 赞同：0
> 
> 时间：2013-04-19T07:00:53.937
> 
> 标签：vb.net, winforms, controls, visual-studio-2010

我在手动加载表单时添加表单控件：

```
Me.FieldI = New TextBox()
Me.FieldI.Location = New System.Drawing.Point(50, 10)
Me.FieldI.Name = "FieldI"
Me.FieldI.Size = New System.Drawing.Size(40, 20)
Me.FieldI.TabIndex = 5
Me.Conversion.Controls.Add(Me.FieldI)
[..] 
```

当我关闭表单窗口并重新打开它时，控件仍然存在（带有旧`.Text`内容，因为在这种情况下它是一个文本框）。

我想删除在表单关闭事件上加载表单时创建的控件，以防止表单上的元素加倍。

我怎样才能做到这一点？

# 编辑

表单关闭代码如下所示（仅显示主表单）：

```
Private Sub Form1(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Me.FormClosing
    Main.Show()
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:04:55.330

这里的问题是表单没有被处理，所以当你再次打开它时，控件仍然存在于上次打开它的时候。

尝试以下操作：

```
Using frm = New subForm()
  frm.ShowDialog()
End Using 
```

该变量`frm`将在使用后被释放。

**还...**

您还可以通过对话框提供反馈，以检查表单是否成功。例如：

```
Dim frm As New subForm()
If frm.ShowDialog = DialogResult.OK Then
  'YAY!
Else
  'Something failed
End If 
```