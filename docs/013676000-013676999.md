# StackOverflow 问答 13676000-13676999

# ios - 检查系统是否可以响应 iOS 上的给定 URL 方案

> ID：13676004
> 
> 赞同：0
> 
> 时间：2012-12-03T01:36:48.053
> 
> 标签：ios

我正在尝试找到一种检查某个 URL 方案是否已在 iOS 上注册的好方法。这里的用例是我想检查用户是否安装了特定的应用程序，如果是，则提供基于该应用程序的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:39:14.033

使用上的`canOpenURL`方法`UIApplication`。类参考[这里](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)

# iframe - Facebook iframe 评论弹出窗口显示在其他元素下方

> ID：13676005
> 
> 赞同：0
> 
> 时间：2012-12-03T01:36:54.090
> 
> 标签：iframe, facebook-like

搜索了相当广泛的解决方案，我不认为我在重复一个已经提出的问题......

我遇到了一个问题，Facebook 之类的弹出框出现在我[页面](http://expeditions.daattravel.com/)上的其他元素下方。问题是，我使用的是具有两列布局的主题，所以当您喜欢左列的某些内容时，它会出现在右列元素的下方。

我尝试使用 z-index `iframe`，但这使得两列上的 facebook 按钮都上升到顶部，使得评论天桥出现在*除*右列 facebook 按钮之外的所有元素之上，该按钮现在显示在其上方。

使用 ShareThis 插件，该插件使用 iframe facebook like 按钮。

这能行吗？还是我需要找一个使用 XFBML 的插件？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T05:15:37.530

我放弃并通过使用解决方法解决了这个问题。我消除了 4 个共享选项中的一个，并隔开点赞按钮，这样弹出窗口就会与任何其他元素发生冲突。

这似乎是我在 wordpress 上使用的 ShareThis 插件的一个特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T13:13:33.580

这是修复...

```
.fb-like iframe 
{
max-width: inherit;
z-index: 1000;
} 
```

# qt - Qt：绘制完成后如何释放QPainterPath占用的内存？

> ID：13676009
> 
> 赞同：0
> 
> 时间：2012-12-03T01:38:12.090
> 
> 标签：qt, drawing, qpainter

问题是：我想绘制由 USB 设备生成的输入数据（数据大小超过 50MB）计算的许多行。如果我使用 QPainterPath::lineTo 和 QPainterPath::moveTo 函数画线，似乎性能不好，内存不会释放。

我的环境是：具有 8G RAM 和 Qt 4.7.2 的 Windows 7。

例如，如果数据大小为 50MB，则占用的内存为 200MB。当上一次绘制完成，应用程序准备下次绘制时，200MB不会释放。所以如果我画很多次，应用程序就会崩溃。void QRasterPaintEngine::strokePolygonCosmetic(const QPointF *points, int pointCount, PolygonDrawMode 模式) 中的异常点：

```
// Draw all the line segments.
for (int i=1; i<pointCount; ++i) {

    QPointF lp1 = points[i-1] * s->matrix + offs;  //  error here, the point is NULL
    QPointF lp2 = points[i] * s->matrix + offs;    //  error here, the point is NULL

    const QRectF brect(lp1, lp2);
    ProcessSpans penBlend = d->getPenFunc(brect, &s->penData);
    if (qpen_style(s->lastPen) == Qt::SolidLine) {
        drawLine_midpoint_i(qFloor(lp1.x()), qFloor(lp1.y()),
                            qFloor(lp2.x()), qFloor(lp2.y()),
                            penBlend, &s->penData,
                            i == pointCount - 1 ? mode_for_last : LineDrawIncludeLastPixel,
                            devRect);
    } else {
        drawLine_midpoint_dashed_i(qFloor(lp1.x()), qFloor(lp1.y()),
                                   qFloor(lp2.x()), qFloor(lp2.y()),
                                   &s->lastPen,
                                   penBlend, &s->penData,
                                   i == pointCount - 1 ? mode_for_last : LineDrawIncludeLastPixel,
                                   devRect, &dashOffset);
    }
} 
```

顺便说一句，在绘制之前，我对 QPainterPath 进行了删除操作，但在这里似乎不起作用。有人对此有任何想法吗？谢谢。

以下是我的绘图代码：

```
 int scaleFactor;
    double old_x, current_x;
    int current_y, oldval, newval, x_change_visible, tmp_x, tmp_y;
    int low = m_ui->renderAreaWidget->height() - 2, high = 20;
    int ch = getChannelNumber();
    uint64_t ss, se;

    if (sample_buffer == NULL)
        return;

    scaleFactor = getScaleFactor();

    if (painterPath != NULL)
        delete painterPath;
    if (dottedPath != NULL)
        delete dottedPath;
    if (textPath != NULL)
        delete textPath;

    dottedPath = new QPainterPath();
    painterPath = new QPainterPath();
    textPath = new QPainterPath();

    old_x = (getScrollBarValue() % stepSize);
    current_x = (getScrollBarValue() % stepSize);

    ss = (getScrollBarValue() + current_x) * scaleFactor / stepSize;
    se = ss + (getScaleFactor() * width()) * stepSize;
    if (se > getNumSamples()) // Do this _after_ calculating 'step'!
        se = getNumSamples();

    oldval = getbit(sample_buffer, ss, ch);
    current_y = (oldval) ? high : low;
    painterPath->moveTo(current_x, current_y);
    // add dummy line to indicate something
    if (ss < 100 && (isSetTriggerCondition || pretriggerPercent < 100)) {
        QPen pen;
        pen.setStyle(Qt::DotLine);
        bool textDrawed = false;

        bool isTextDrawed = false;
        for (int i = ss; i < 100; i += scaleFactor) {
            if (i >= 50 && i <= 60 && !isTextDrawed && pretriggerPercent != 100) {
                QFont font;
                //font.setFamily("Times");
                //font.setItalic(true);
                font.setPixelSize(18);
                textPath->addText(current_x, low + 1, font, QString("Pre-trigger %1%").arg(pretriggerPercent));

                isTextDrawed = true;
            }

            for (int j = 0; (j < scaleFactor) && (i + j < 100); j++) {
                dottedPath->lineTo(current_x, low);
                current_x += (double)stepSize / (double)scaleFactor;
            }
        }
        zeroX = current_x;
    }

    //current_x = (-getScrollBarValue() % stepSize);
    bool isTriggered = false;
    int oldy = current_y;
    painterPath->moveTo(current_x - ((double)stepSize / (double)scaleFactor), low);
    painterPath->lineTo(current_x, low);
    painterPath->lineTo(current_x, current_y);
    for (uint64_t i = ss; i < se; i += scaleFactor) {
        //Process the samples shown in this step.
        for (uint64_t j = 0; (j < scaleFactor) && (i + j < se); j++) {
           newval = (i + j < numSamples ? getbit(sample_buffer, i + j, ch): newval); // sample buffer is the data buffer, size is about 50M. getbit function is about to determine the specific byte in target channel is high or low.
            x_change_visible = current_x > old_x;
            if (oldval != newval && x_change_visible) {
                painterPath->lineTo(current_x, current_y);
                current_y = (newval) ? high : low;
                if (current_y != oldy && !isTriggered) {
                    isTriggered = true;
                    emit(triggerValue(getChannelNumber(), i));
                }
                painterPath->lineTo(current_x, current_y);
                old_x = current_x;
                oldval = newval;
            }
            current_x += (double)stepSize / (double)scaleFactor;
            oldy = current_y;
        }
    }
    current_x += stepSize;
    painterPath->lineTo(current_x, current_y); 
```

每个数据样本是一个字节，我将每个数据样本绘制为高电压或低电压取决于它的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T07:06:53.533

我找到了解决方案并与您分享。正如我上面发布的示例代码，我在绘制之前删除了paintEvent函数中的QPainterPath，但它不起作用。所以我在跳转到paintEvent函数之前移动了delete动作，这样可以释放QPainterPath占用的内存。感谢您的所有建议。:)

# pug - 如何让按钮显示在 Jade 表内？

> ID：13676012
> 
> 赞同：2
> 
> 时间：2012-12-03T01:38:52.940
> 
> 标签：pug

我正在尝试将 html 页面转换为 Jade。我无法让一些按钮显示在 td. （在 Angular 应用程序上工作。）

没有按钮的表格显示得很好。

```
tr(ng-repeat='local in locals |  orderBy:predicate | filter:query')
  td {{local.points}}
  td {{local.lastname}}
  td {{local.firstname}}
  td {{local.zip}} 
```

带有按钮的表格无法编译。

```
tr(ng-repeat='local in locals |  orderBy:predicate | filter:query')
  td
    button(ng-click='local.points = local.points + 10')
    button(ng-click='local.points = local.points - 10') {{local.points}}
  td {{local.lastname}}
  td {{local.firstname}}
  td {{local.zip}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:42:20.637

弄清楚了。Jade 期望按钮的值。这适用于那个 td

```
td
  button( ng-click='local.points = local.points + 10') Up
  button(ng-click='local.points = local.points - 10') Dn
  {{local.points}} 
```

# javascript - 移动网站的滑动手势

> ID：13676015
> 
> 赞同：1
> 
> 时间：2012-12-03T01:39:11.253
> 
> 标签：javascript, mobile, gestures

我正在为我正在研究的这个移动网站原型创建滑动手势：http: [//patthorntonfiles.com/snk_mobile/](http://patthorntonfiles.com/snk_mobile/)

这个想法是，当您在主页上向左滑动故事时，会出现四个图标：电子邮件故事、Facebook、Twitter 和喜欢。如果你在 iPhone 上使用过 Sparrow，我正在寻找一个非常相似的手势。我正在寻找一种基于标准的方法来做到这一点。原型已经将 jQuery 用于其他一些部分。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:49:47.143

我不确定您在寻找什么，但请搜索 JS Swipe Libraries。我刚刚在我的上一个项目中使用[了 HammerJS](http://eightmedia.github.com/hammer.js/)。

Javascript 示例：

```
var hammer = new Hammer(document.getElementById("news_article"));
hammer.ondragend = function(ev) {
    $('.icons').fadeIn();
}; 
```

# javascript - 使用javascript（OAuth）从子窗口重定向到父窗口到iframe

> ID：13676021
> 
> 赞同：0
> 
> 时间：2012-12-03T01:39:42.130
> 
> 标签：javascript, redirect, iframe, oauth

这是我们正在拍摄的理想场景：

1.  Acme.com 有一个“我的帐户”链接。当用户点击此链接时，内容来自[https://acme.xyz.com/myaccount](https://acme.xyz.com/myaccount)并显示在 acme.com 上的 iframe 中

2.  我控制“acme.xyz.com”应用程序并为用户提供使用他们的 Google/Facebook 凭据登录的选项。由于 OAuth 在登录期间正确地对 iframe 皱眉，因此我通过打开一个子窗口来执行 OAuth 重定向。

3.  一旦我在子窗口中从 Google/Facebook 获得 OAuth 回调，我想关闭子窗口并将焦点恢复到父窗口（iframe 中的那个）。

    如何执行第 3 步？我意识到我必须使用 javascript 来做到这一点，但是我们把我们的常驻 javascript 人扔到了公共汽车下面，然后把他撞倒了（笑）。如果有人可以给我一段 js/jQuery 代码，那么我保证会善待所有 javascript 帅哥。

我意识到弹出窗口拦截器会给上述方法带来麻烦，还有什么可能有问题的吗？移动设备？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T18:04:35.533

事实证明它非常简单 - 对于其他寻找解决方案的人来说，这就是我使用的：

```
 <script>
         $(document).ready(function(){

             if(opener) { // close OAuth popup window if applicable
                 opener.location.href="${customerHomeUrl}";
                 top.close();
             }

         });
    </script> 
```

# mongodb - 如何查询特定的 mongodb mapreduce 字段？

> ID：13676022
> 
> 赞同：2
> 
> 时间：2012-12-03T01:39:48.650
> 
> 标签：mongodb, mapreduce, field

如何查询从 mongodb mapReduce 生成的集合中的特定字段？
我应该输入什么来仅检索输出集合中的姓氏字段？

结果应该是：
{ "lastname" : "Doe" }

> > version()
> version: 2.2.2
> 
> > db.test.save( { first: "John", last: "Doe" } )
> 
> >db.test.find()
> { "_id" : ObjectId("50bc001a8e97247957c6000f"), “first”：“John”，“last”：“Doe”}
> 
> > db.test.mapReduce(
> function() { emit(this._id, {firstname:this.first, lastname:this.last}) } , 函数(key, value) { return null; }, {out: {reduce: 'output'}} )
> 
> { "result" : "output", "timeMillis" : 6, "counts" : { "input" : 1, "发射”：1，“减少”：0，“输出”：1}，“ok”：1，}
> 
> >db.output。find()
> { "_id" : ObjectId("50bc001a8e97247957c6000f"), "value" : { "firstname" : "John", "lastname" : "Doe" } }
> 
> >db.output.find( {}, {_id: 0})
> {“价值”：{“名字”：“约翰”，“姓氏”：“Doe”}}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:45:39.300

`find`在不修改 map-reduce的情况下，您可以得到的最接近的是：

```
db.output.find( {}, {_id:0, 'value.lastname':1} ) 
```

# facebook - 检查是否在设备上登录服务时无法重现应用程序崩溃

> ID：13676023
> 
> 赞同：1
> 
> 时间：2012-12-03T01:39:49.150
> 
> 标签：facebook, twitter, crash, exc-bad-access, acaccount

根据崩溃日志，我有一个应用程序在启动时崩溃，同时检查用户是否在设备上登录 Facebook。问题是我无法重现此崩溃，并且它发生在不同的设备上。到目前为止，我只在 iOS 6 之前的操作系统中看到过这种崩溃。我的应用程序支持的最早的 iOS 是 4.3。

这是代码，如果有人可以提供有关此方法*有时会*失败的原因（而且大多数时候不会！）

我得到的错误是 EXC_BAD_ACCESS (SIGSEGV);KERN_INVALID_ADDRESS 在 0x00000000。

```
 + (BOOL)loggedIntoServiceOnDevice:(int)socialService {

        __ENTERING_METHOD__
        BOOL loggedIntoServiceOnDevice = NO;
        ACAccountStore *accountStoreHere = [[NSClassFromString(@"ACAccountStore") alloc] init];
        ACAccountType *accountType;
        ACAccountType *accountType2;

        if (accountStoreHere) {
            if (socialService == FACEBOOK_SERVICE) {

                ACAccountType *accountType = [accountStoreHere accountTypeWithAccountTypeIdentifier:@"com.apple.facebook"];
                Class slComposeController = NSClassFromString(@"SLComposeViewController");
                if (accountType && slComposeController != nil)
                {
                    if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {

                         loggedIntoServiceOnDevice = YES;
                    }
                }
            }
            else if (socialService == TWITTER_SERVICE) {
                ACAccountType *accountType = [accountStoreHere accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
                if (accountType)
                {
                    Class slComposeController = NSClassFromString(@"SLComposeViewController");
                    if ([TWTweetComposeViewController canSendTweet] || slComposeController != nil) {
                        if ([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]) {

                            loggedIntoServiceOnDevice = YES;
                        }
                    }
                }
            }
        }
        [accountStoreHere release];
        return loggedIntoServiceOnDevice;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T17:54:30.847

以下行也在 iOS 5 中执行，因为`[TWTweetComposeViewController canSendTweet]`正在返回`YES`，所以检查的第二部分`OR`没有被评估，因为第一个已经返回`YES`：

```
[SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter] 
```

您可能希望将这些 if 语句更改为：

```
if ([TWTweetComposeViewController canSendTweet] ||
    (
     slComposeController != nil &&
     [SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter]
    )
   ) { 
```

这确保`SLComposeViewController`只有在类实际存在时才使用它。

# asp.net-mvc - 如何使用自己的身份验证机制但利用 ASP.NET MVC 授权？

> ID：13676024
> 
> 赞同：1
> 
> 时间：2012-12-03T01:40:02.333
> 
> 标签：asp.net-mvc, authentication

我有一个来自另一个（非 MVC）项目的现有用户帐户数据库，现在我们需要使用我们的特定身份验证过程来注册/登录。但我想使用 MVC 进行授权。你能告诉我我怎么能做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:48:47.933

您应该实现自定义成员资格提供程序。会员提供者的很多方法都不需要实现，所以你可以只实现你需要的方法（即认证或角色，而不是注册、更改密码）。您可以将自定义成员资格提供程序建模到现有数据库。[有关更多详细信息，请参阅此博客文章](http://www.danharman.net/2011/06/23/asp-net-mvc-3-custom-membership-provider-with-repository-injection/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:49:46.803

我们目前正在研究类似的东西，并且正在研究使用[ServiceStack](http://www.servicestack.net/) - 特别是他们提供的[身份验证和授权](https://github.com/ServiceStack/ServiceStack/wiki/Authentication-and-authorization)接口。然而，我们才刚刚开始研究这个，所以不能告诉它有多合适。

# c - C 编程：使用 fscanf()、fopen() 和格式字符串问题

> ID：13676025
> 
> 赞同：1
> 
> 时间：2012-12-03T01:40:33.700
> 
> 标签：c, scanf

我有一个名为 accounts.dat 的数据文件，其结构如下：

```
1000:Cash
3000:Common Shares Outstanding
1400:Office Equipment 
```

我正在使用 fopen() 打开/链接文件。我正在使用 fscanf() 来检索基于格式字符串的值 - “%d:%[^:]\n”。%d 代表帐号，':' 是分隔符，[^:] 是除 ':' 之外的所有字符。

```
 void getdataf() {
     FILE * infileaccs;
     FILE * infiletrans;
     int acctnumf;
     char acctdesf[DESMAX];

     char filenameacc[40] = "accounts.dat";
     infileaccs = fopen(filenameacc, "r");
     if(infileaccs==NULL){
         printf(" **File \"accounts.dat\" could not be read\n");
         printf(" **Previously entered account titles are not available\n");
         printf(" **Any previously entered transactions will not be used\n");
     } else{
         int i=0;
         while(fscanf(infileaccs, "%d:%[^:]\n",&acctnumf,acctdesf)!= EOF){
             acct[i++]=acctnumf;
             srtaccttyp(acctnumf, i);
             printf("------------>Added unique acct type %d!\n", accttyp[i]);
             printf("------------>element: %d is added into acct array in position acct[%d]\n",acctnumf,i);
             nacct++;
             accttitle(acctdesf);
         }
         fclose(infileaccs);
     } } 
```

但是此代码不起作用，它只是冻结。如果您需要更多信息，请告诉我，提前致谢。

它似乎停在 while 循环处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:14:09.920

你的`fscanf`格式

```
while(fscanf(infileaccs, "%d:%[^:]\n",&acctnumf,acctdesf)!= EOF) 
```

扫描第一行中的数字，然后是冒号，然后将所有字符存储到`acctdesf`. 然后所有后续`fscanf`的 s 都无法将一个以 a 开头的字符串转换`':'`为一个`int`，从而使您陷入无限循环。

你想读到下一行，

```
int convs;
while((convs = fscanf(infileaccs, "%d:%[^\n]",&acctnumf,acctdesf)) == 2) {
    /* do something */
}
if (convs != EOF) {
    /* oops */
} 
```

这样从下一行开始的数字仍然存在于下一行`fscanf`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:46:20.547

`fscanf`如果没有与给定格式匹配的数据，则可以返回 0，但您只检查`EOF`. 您应该做的是检查其结果`fscanf`将告诉您成功扫描了多少项目，在这种情况下，您要确保`fscanf`返回 2 或 EOF，如果两者都不是，则存在数据格式问题你的输入。

# c# - 无法获得简单的 enyim memcached 测试或 log4net 工作

> ID：13676026
> 
> 赞同：4
> 
> 时间：2012-12-03T01:40:34.360
> 
> 标签：c#, memcached, enyim

我实际上是在尝试让[protobuf-net 转码器](https://stackoverflow.com/questions/13646827/protobuf-net-transcoder-for-enyimmemcached-problems)运行，但在我能做到之前，我需要让 enyim/memcached 设置工作，并且可用的文档很少，我遇到了麻烦。这是我的简单 .net 测试：

```
using Enyim.Caching;
using Enyim.Caching.Memcached;
....

MemcachedClient Cache = new MemcachedClient();
string key = "somekey";
string objectToCache = "someval";
Cache.Store(StoreMode.Set, key, objectToCache, DateTime.Now.AddMinutes(1000000));
string test = Cache.Get(key) as string; //...it's null though 
```

我的 memcached 服务器包 1.4.14 (x64) 在[这里](http://s3.amazonaws.com/downloads.northscale.com/memcached-win64-1.4.4-14.zip)，似乎作为 Windows 服务运行良好，我正在使用最新的 nuget 包用于 enyim 和 protobuf，但是（即使关闭了转码，所以纯 enyim/memcached）没有运气。然后，再次使用 nuget 包`EnyimMemcached-log4net`尝试按照[此处](https://github.com/enyim/EnyimMemcached/wiki/Configure-Logging)的说明通过我的 web.config 打开 log4net ，我收到此错误：

> 无法加载文件或程序集 'log4net，Version=1.2.10.0，Culture=neutral，PublicKeyToken=1b44e1d426115821' 或其依赖项之一。找到的程序集的清单定义与程序集引用不匹配。（HRESULT 异常：0x80131040）“：”log4net，版本=1.2.10.0，文化=中性，PublicKeyToken=1b44e1d426115821

...这似乎是 nuget 返回错误版本的 log4net（项目参考说 1.2.11），即使它自己处理依赖项。所以我什至不明白为什么 enyim 无法存储/获取。

让这个工作的正确步骤是什么？

**编辑**：通过注释掉对持续时间的任何引用，它可以工作（包括转码）。

```
Cache.Store(StoreMode.Set, key, objectToCache); //, DateTime.Now.AddMinutes(1000000)); 
```

所以，稍微修改一下原来的问题：使用 expiresAt 有什么问题吗？有没有一种简单的方法可以让 log4net 在当前的 enyim 化身中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T19:39:43.343

答案似乎是 memcached 的错误构建，请参阅[此问题](https://stackoverflow.com/a/12712640/409856)。我无法确认，因为 1.4.5 的 couchbase d/l 不能作为正确的 Windows 服务运行（因为我的缓存层必须如此）。

至于 log4net/enyim 版本控制，当通过 VS 扩展管理器提示时更新 nuget 包管理器似乎已经解决了它，尽管我从未隔离过原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T11:07:35.557

我也有“无法加载文件或程序集'log4net，版本 = 1.2.10.0”错误。

就我而言，结果是；'EnyimMemcached-log4net' NuGet 包需要 'log4net' 的 1.2.10.0 版本，即使它没有在依赖项中特别提及。安装所需的 log4net 包为我解决了这个问题。

```
Install-Package log4net -version 1.2.10.0 
```

# c++ - c++全局变量超出类的范围

> ID：13676027
> 
> 赞同：0
> 
> 时间：2012-12-03T01:40:56.190
> 
> 标签：c++, class, scope, global-variables

所以我正在尝试用 C++ 编写一个基本的红黑树。这是我第一次从 C 到 C++ 的真正过渡，我遇到了范围问题。我正在尝试使用全局变量来跟踪树的根，因为我很懒，不想让每个函数都传回旧的或新的根。无论如何，我在任何函数或类之外声明了指针（名为 root），在我看来，任何人都应该可以看到它。当我编译时，我得到：

```
main.cpp: In member function ‘void node::ins(int)’:
main.cpp:23:4: error: ‘root’ was not declared in this scope
main.cpp: In member function ‘void node::case3()’:
main.cpp:110:4: error: ‘root’ was not declared in this scope 
```

因此，类中的函数看不到全局变量，但主函数可以。我该怎么做才能让类中的函数看到这个变量？提前致谢。最大限度

```
#include <iostream>
#include <cstdio>
using namespace std;

const int BLACK = 0;
const int RED = 1;

class node{
  public:
node *parent = NULL;
node *left = NULL;
node *right = NULL;
int color = RED;
int num = -1;
int isRoot(void){
    if(parent == NULL) return 1;
    else             return 0;
};
void ins(int newNum){
    if(isRoot() && num == -1){//if first insertion
        num = newNum;
        color = BLACK;
        root = this;
    }else if(newNum < num)
        if(left == NULL){
            left = new node;
            left->parent = this;
            left->num = newNum;
            left->fixColor();
        }else
            left->ins(newNum);
    else
        if(right == NULL){
            right = new node;
            right->parent = this;
            right->num = newNum;
            right->fixColor();
        }else
            right->ins(newNum);
};  
int uncleColor(void){
    if(parent != NULL){
        if(parent->parent != NULL){
            node *grandparent = parent->parent;
            if(grandparent->left == parent)
                if(grandparent->right == NULL)
                    return BLACK;
                else
                    return grandparent->right->color;
            else{
                if(grandparent->left == NULL)
                    return BLACK;
                else
                    return grandparent->left->color;
            }
        }else
            cout << "[Error] Grandparent DNE, at root\n";
    }else
        cout << "[Error] Parent DNE, at root\n";
    return -1;
};
void fixColor(void){
    if(isRoot()){
        color = BLACK;
    }else if(color == RED){ 
        if(parent->color == RED){//if parent is black, nothing violated
            int uncle =  uncleColor();
            if(uncle == RED){//uncle is red too
                case1();
                parent->parent->fixColor();//call recursivly on grandparent
            }else if(uncle == BLACK){//uncle is black
                case2();//case 2 will then call case 3
            }else
                cout << "[Error] fixColor uncle color mismatch\n";
        }
    }else
        cout << "[Error] fixcolor node is black?\n";
};
void case1(void){
    node *grandparent = parent->parent;
    node *uncle = NULL;
    if(grandparent->left == parent)
        uncle = grandparent->right;
    else
        uncle = grandparent->left;
    uncle->color = BLACK;
    parent->color = BLACK;
    grandparent->color = RED;
};
void case2(void){
    node *grandparent = parent->parent;
    if(this == parent->right && parent == grandparent->left){
            rotate_left();
            left->case3();
    }else if(this == parent->left && parent == grandparent->right){
            rotate_right();
            right->case3();
    }else
        case3();
};
void case3(void){
    node *grandparent = parent->parent;
    parent->color = BLACK;
    color = RED;
    if(this == parent->left)
            grandparent->rotate_right();
    else
            grandparent->rotate_left();
    if(parent->isRoot())
        root = parent;
};
void rotate_left(void){
    node *grandparent = parent->parent;
    grandparent->left = this;
    parent->right = this->left;
    this->left = parent;
    parent->parent = this;
    parent = grandparent;
};
void rotate_right(void){
    node *grandparent = parent->parent;
    grandparent->right = this;
    parent->left = this->right;
    this->right = parent;
    parent->parent = this;
    parent = grandparent;
};
void del(int val){

};
};

node *root = NULL;

int main(int argc, char **argv){
root = new node;
char READ_task;
int READ_val;
FILE *txtPtr = NULL;
if((txtPtr = fopen(argv[1],"r")) == NULL){printf("[Error] Unable to Load File: '%s'\nExiting...\n",argv[1]);}
else{
    while(fscanf(txtPtr, "%c%d", &READ_task, &READ_val) == 2){
        if(READ_task == 'i')
            root->ins(READ_val);
        else if(READ_task == 'd')
            root->del(READ_val);
        else
            cout << "Instruction from file not i or d\n";
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T01:43:04.977

您必须在使用它的每个翻译单元中*声明*它：

```
extern node* root; 
```

In your case, you'll also need a forward declaration:

```
class node;
extern node* root;

class node{
//.......... 
```

Note that this style isn't idiomatic C++, it's just C with some C++ features. I'd start learning C++ with a book.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:46:04.087

Put the declaration of `root` before the code that uses it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:58:10.887

You could also add a parameter to the functions in question and use the variable as said parameter when calling the member function

# jquery - iOS 6 中的滑动手势和捏合禁用 javascript 动画

> ID：13676034
> 
> 赞同：1
> 
> 时间：2012-12-03T01:41:44.823
> 
> 标签：jquery, html, css, ios6, responsive-design

我有一个基于响应式设计引导程序的网站 - [http://joyasolutions.com](http://joyasolutions.com)在 iOS 5 * 中正常工作 - 但是在我的 iPad 上将 iOS 升级到 6.0.1 之后 - 现在有一个摆动使滑动手势几乎无用如果尝试滑动或捏合来设置大小 - 所有滑块动画（包括所有按钮）都不再起作用。

有关如何解决此问题的任何建议？

# php - Sed 和 php：用“变量”替换 $variable

> ID：13676035
> 
> 赞同：0
> 
> 时间：2012-12-03T01:41:45.697
> 
> 标签：php, sed, replace

在一个 php 脚本中，我有一些表达式写为`$variable_like_that, $variable_like_other, $variable_this_thing, $variable_like_this`...，我喜欢将它们查找并替换为像这样的未定义变量`'variable_like_that', 'variable_like_other', 'variable_this_thing', 'variable_like_this'`。它们都以 $variable 开头。

我试图用 sed 做一些事情，它的语法对于初学者来说很奇怪：

```
sed -e "s/$variable_(.*\)/('\)$variable_(.*\)\('\)/g" myscript.php 
```

我知道，我还不是很精通它...

所以我的问题是：

*   sed 是适合这项工作的工具吗？
*   如果是的话，我会很感激帮助把事情做好。
*   如果不是，我将不胜感激一些建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:36:09.223

## sed 是适合这项工作的工具吗？

我认为`sed`对于您正在尝试做的工作来说，这是一个很好的工具。您尝试的模式很接近，但有一些问题：

*   选项开关`-e`、 和
*   您的替换命令的搜索/替换模式。

## 我应该使用哪个选项开关？

您想使用, 来*“就地”*编辑文件，而不是将`sed -e`其输出结果但保持文件不变的 ,将所做的更改保存回文件。从 sed 的关于开关的[手册页：](http://en.wikipedia.org/wiki/Man_page)`stdout``sed -i`*`-i`*

 *```
-i[SUFFIX], --in-place[=SUFFIX]
    edit files in place (makes backup if extension supplied) 
```

## 我的替换命令的搜索/替换模式怎么样？

对于您发送给 sed 的替换命令，您希望匹配以其他任何内容开头`$variable`然后以其他任何内容结尾的字符串。我会使用的**搜索**模式是：

```
\$\(variable\w\+\) 
```

关于这一点的几点：

*   （我们需要`$`用 a转义，`\`因为它本身`$`具有特殊含义（行尾））
*   `\w`是匹配任何类似单词的字符以及 _ 的正则表达式模式
*   `\+`意思是“一个或多个先前的模式”
*   转义括号内的任何内容，例如`\(...\)`被放入一个组以用于交替模式或被“记住”以进行替换。在我们的例子中，我们使用它们来记住它们以进行替换。

总之，它的基本意思是“查找以其他任何内容开头`$variable`然后结尾的字符串，并记住您找到的内容（减去美元符号，因为它不在括号内）。”

接下来，我们需要指定**替换**模式。由于我们有一个我们想要找到的模式，我们只需要指定用什么替换它：

```
'\1' 
```

代表“第`\1`一个反向引用”，其中反向引用是“与我们想要记住的第一个模式匹配的东西（我们放在`\(\)`.

另请注意：

*   您的搜索模式中可以有多个组`\(\)`；第二个是`\2`，第三个是`\3`，等等。
*   `\0`是一个特殊的反向引用，它包含与搜索模式匹配的*整个*字符串。（在我们的例子中，它还包含`$`我们要删除的 's。）

此外，我们希望替换我们找到的每一个搜索模式，而不仅仅是文件中的一行。这是用`g`代表“全局”的标志指定的。替换命令、`s`搜索模式、替换模式和全局标志都由斜杠字符 . 分隔`/`。

这就是替换命令。之后，将文件名或[shell 文件模式](http://www.gnu.org/software/findutils/manual/html_node/find_html/Shell-Pattern-Matching.html)作为第三个参数传递给 sed。把这一切放在一起，我们得到：

```
sed -i "s/\$\(variable\w\+\)/'\1'/g" myscript.php 
```

我拼凑了我自己的小版本`myscript.php`来测试和验证我制作的正则表达式是否可以满足您的需求。供您参考，我已经包含*了之前*和*之后*的版本：

## 前：

```
<?php
lorem ipsum $variable_like_that 
foo bar $variable_like_other baz
one two three $variable_this_thing four
$variable_like_this five six seven eight
?> 
```

## 后：

```
<?php
lorem ipsum 'variable_like_that' 
foo bar 'variable_like_other' baz
one two three 'variable_this_thing' four
'variable_like_this' five six seven eight
?> 
```

有关更多信息，您还可以在此处阅读更多信息：[Sed - Bruce Barnett 的介绍和教程](http://www.grymoire.com/Unix/Sed.html)。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:10:59.133

需要转义 $ 并使用右侧的 \1 来替换与 () 匹配的内容

```
sed -e "s/\$variable_\([^ ,]*\)/'variable_\1'/g" myscript.php 
```*

# android - 单选按钮(Android)

> ID：13676044
> 
> 赞同：0
> 
> 时间：2012-12-03T01:43:25.040
> 
> 标签：android

所以，我在这里要做的是有一个主要活动，如果满足要求（正确的用户名、密码和男性单选按钮被选中而不是女性），VM 将切换到“成功”活动。如果它不满足这 3 个要求中的任何一个，VM 会在按下按钮时切换到“失败”活动。除了单选按钮外，我让它正常工作。

我在布局上创建了一个 RadioGroup，但我不确定如何在类本身中实现它。我假设您必须找到 ID、覆盖侦听器等……但它无法正常工作。有任何想法吗？我在发布之前取出了大部分 RadioGroup 属性，这样就不会那么混乱了。

主要活动

```
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.RadioGroup;

public class MainActivity extends Activity implements RadioGroup.OnCheckedChangeListener
{
    Button button;
    EditText login;
    EditText password;
    RadioGroup mRadioGroup;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        button = (Button)findViewById(R.id.button1);
        login =(EditText)findViewById(R.id.editText1);
        password =(EditText)findViewById(R.id.editText2);
        button.setOnClickListener(new View.OnClickListener()  
    {
        @Override
        public void onClick(View view)
        {
            String L,P;             

            L = login.getText().toString();
            P = password.getText().toString();

            if(L.equals("name") && P.equals("123456"))
            {
                Intent intent = new Intent();  
                intent.setClass(MainActivity.this,Welcome.class);
                startActivity(intent);
            }
            else
            {
                Intent intent1 = new Intent();
                intent1.setClass(MainActivity.this,Failed.class);
                startActivity(intent1);
            }
      }   
    });

}

  /*  public void onRadioButtonClicked(View view) 
    {
        boolean checked = ((RadioButton) view).isChecked();

        switch(view.getId()) 
        {
            case R.id.radio1:
                if (checked)
                {
                Intent intent4 = new Intent();
                intent4.setClass(MainActivity.this,Welcome.class);
                startActivity(intent4);
                }
                break;
            case R.id.radio0:
                if (checked)
                {
                Intent intent2 = new Intent();
                intent2.setClass(MainActivity.this,Failed.class);
                startActivity(intent2);
                }
                break;
                }
                }
      */

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onCheckedChanged(RadioGroup group, int checkedId) 
    {
        // TODO Auto-generated method stub

    }

} 
```

失败的活动

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class Failed extends Activity
{
    Button button;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.failed);
        button = (Button)findViewById(R.id.button1);       
        button.setOnClickListener(new View.OnClickListener()

    {
        @Override
        public void onClick(View view)
        {
            Intent intent3 = new Intent();
            intent3.setClass(Failed.this,MainActivity.class);
            startActivity(intent3);
        }

    });
}
} 
```

成功活动

```
import android.app.Activity;
import android.os.Bundle;

public class Welcome extends Activity
{

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.success);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T01:58:33.520

试试这个来获取所选 RadioButton 的值并使用它来检查代码中的特定条件：

```
private RadioGroup radioOptionGrp;
private RadioButton radioOptBtn;

//Get Reference to Radio group which holds the radio buttons
radioOptionGrp = (RadioGroup) findViewById(R.id.radioOpt);

//Get id of selected radioButton
int selectOptId = radioOptionGrp.getCheckedRadioButtonId();

//Get Reference to the Selected RadioButton
radioOptBtn = (RadioButton) findViewById(selectOptId);

//Get value of the selected Radio button
String value = radioOptBtn.getText().toString(); 
```

希望这可以帮助！！这是一个示例代码，您可以从 GitHub 下载以查看 RadioButtons 的工作原理[https://github.com/asabbarwal/SimpleRadioButton](https://github.com/asabbarwal/SimpleRadioButton)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:00:48.870

我第一次遇到 RadioButtons 太不容易了。但基本上，使用它很简单。

```
private RadioGroup mRadioGroup;
private View radioButton;   
int radioButtonID;
int idx;            //index of radio item in the list

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
        mRadioGroup= (RadioGroup) findViewById(R.id.mRadioGroup);           
....
} 
```

将这部分代码放在任何点击事件方法中，idx 总是会返回选中单选按钮的索引：

```
radioButtonID = mRadioGroup.getCheckedRadioButtonId();
radioButton = mRadioGroup.findViewById(radioButtonID);
idx = mRadioGroup.indexOfChild(radioButton); 
```

如果你想捕捉单选按钮点击事件，这里是一个很好的解决方案[How to set On click listener on the Radio Button in android](https://stackoverflow.com/questions/8323778/how-to-set-on-click-listener-on-the-radio-button-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-08T12:07:35.390

```
at first you can add two radio button in your activity like other form widgets
than try this code.
pay attention that when you click and set a radio button,you must disable other radio buttons. 
```

arg1 表示该按钮被选中。

```
 package com.example.azarbaycannetworkcompany;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.CompoundButton;
import android.widget.Toast;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.RadioButton;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final RadioButton first = (RadioButton) findViewById(R.id.radioButton1);
        final RadioButton seccond = (RadioButton) findViewById(R.id.radioButton2); 
        first.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub
                if(arg1)
                {
                    seccond.setChecked(false);
                    Toast.makeText(getBaseContext(),"1 set shod",Toast.LENGTH_LONG).show();
                }

            }
        });
        seccond.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton arg0, boolean arg1) {
                // TODO Auto-generated method stub
                if(arg1)
                {
                    first.setChecked(false);
                Toast.makeText(getBaseContext(),"2 set shod",Toast.LENGTH_LONG).show();

                }

            }
        });
    }

} 
```

# java - 使用 Spring 执行多次注入

> ID：13676045
> 
> 赞同：0
> 
> 时间：2012-12-03T01:43:31.893
> 
> 标签：java, spring, dependency-injection

为什么 sessionFactory 没有被注入到 EventService 类？我想要做的是将 sessionFactory 注入 EventService 类，但发生的事情是它只被注入到 Services 类中

我的应用程序上下文 xml

```
<!-- Inject my business services class to the action -->
    <bean id="services" class ="services.Services" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

    <bean  id ="eventservice" class ="services.EventServices" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean> 
```

我在这里想念什么？我不能申报多次注射吗？

这是我的 EventServices 课程

```
package services;

import org.springframework.transaction.annotation.Transactional;
import org.hibernate.SessionFactory;
import org.hibernate.Session;
import data.*;
import java.util.List;

// This class is the business services tier in the application.
// @Transactional is needed so that a Hibernate transaction is set up,
//  otherwise updates won't have an affect
@Transactional
public class EventServices {
    // So Spring can inject the session factory
    SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory value) {
        sessionFactory = value;
    }

    // Shortcut for sessionFactory.getCurrentSession()
    public Session sess() {
        return sessionFactory.getCurrentSession();
    }

    @SuppressWarnings("unchecked")
    public List<Event> getEvents() {
        return sess().createQuery("from Event").list();
    }
} 
```

这是我的服务课

```
package services;

import org.springframework.transaction.annotation.Transactional;
import org.hibernate.SessionFactory;
import org.hibernate.Session;
import data.*;
import java.util.List;

// This class is the business services tier in the application.
// @Transactional is needed so that a Hibernate transaction is set up,
//  otherwise updates won't have an affect
@Transactional
public class Services {
    // So Spring can inject the session factory
    SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory value) {
        sessionFactory = value;
    }

    // Shortcut for sessionFactory.getCurrentSession()
    public Session sess() {
        return sessionFactory.getCurrentSession();
    }

    public void createPerson(String name) {
        Person p = new Person();
        p.setName(name);
        sess().save(p);
    }   

} 
```

到目前为止，它看起来像一个平庸的代码，但我会在 EventServices 最终工作后立即修复这个问题

# javascript - Galaxy Nexus 忽略视口元标记

> ID：13676047
> 
> 赞同：15
> 
> 时间：2012-12-03T01:43:53.420
> 
> 标签：javascript, android, css, cordova

我正在构建一个 PhoneGap 应用程序。我的应用程序设计为 320px 界面。我在应用程序中的视口标签是：

```
<meta name="viewport" content="width=320, initial-scale=0.5, maximum-scale=0.5, user-scalable=no"/> 
```

这在我运行 Ice Cream Sandwich 的 Galaxy S2 上按预期工作。320px 的界面填满了屏幕的整个宽度。

但是，在 Galaxy Nexus 上测试上述代码时，视口为 360px 宽。所以我的元素不会填满屏幕。我尝试将以下行添加到我的 Cordova 的 appname.java 文件中：

```
this.appView.getSettings().setUseWideViewPort(true); 
```

但是，这没有效果。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-15T11:44:56.290

尝试用这个替换它：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

它应该调整到特定设备的大小，但是我无法对此进行测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T14:08:49.977

我看到的答案非常接近，但他们忽略了他提出的一点：他的界面是为 320px 设计的。width=device-width 将使其适合屏幕，但这并不能确保他的界面将保持在 320 像素。

我的解决方案只是在 Wayneio 的答案上构建了一点点，提供了必要的 CSS / 标记以确保您只需要一个样式表（并且它不需要是响应式的）。

```
<html>
<head>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
</head>
<body>
    <div id="interfaceWrap">
        // insert interface here
    </div>
</body>
</html> 
```

此标记的作用是允许您将界面限制在可以通过 CSS 设置属性的特定容器。我推荐的是这样的：

```
#interfaceWrap {
    position: relative;
    width: 320px;
    margin-left: auto;
    margin-right: auto;
} 
```

这基本上告诉浏览器，无论元标记视口将页面宽度设置为什么，都将我的界面放在水平中心（`margin-left & margin-right: auto`）并将其固定为 320px 宽度（`width: 320px`）。您可以添加任何样式组合以获得您真正想要的。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-20T05:07:16.793

Use this

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

Check this [presentation](http://www.slideshare.net/slideshow/embed_code/15006907) for customizing meta tag

# node.js - Node.js 以同步方式读取？还是异步循环？

> ID：13676050
> 
> 赞同：1
> 
> 时间：2012-12-03T01:44:05.513
> 
> 标签：node.js, readline, synchronous

我正在使用 javascript / node.js 教一个孩子编程，我们打算做一个猜数字游戏。但是我发现这个`readline`模块只支持异步，这意味着游戏逻辑不能是：

```
while(true){
   guess=input(); // I seem to need block here
   ans=checkGuess(guess);
   displayAns(ans);
   if(ans==0)break;
} 
```

相反，我看到不是一个简单的循环，而是我需要调用which is called by `input`, which is called by - 这绝对是一个丑陋的混乱。我认为我不应该仅仅为了解决这个简单的问题而教孩子 CPS。`displayAns``checkGuess``input`

有没有一种简单易行的方法让孩子在 node.js 中制作这个游戏？还是我使用了错误的语言（也许是 BASIC？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T17:28:52.337

试试 node.js 指挥官。

```
$ npm install commander 
```

github：[https ://github.com/visionmedia/commander.js](https://github.com/visionmedia/commander.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-09T22:18:33.860

顺便说一句，在 javascripter 的回答中，他说要使用 node `commander`。节点指挥官不再有输入功能）；

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-09T20:01:12.493

使用它暂停输入流的[`question`方法](http://nodejs.org/api/readline.html#readline_rl_question_query_callback)，出于您的目的，该方法与“同步”相同

# java - 非交互、非联网安卓设备的升级机制

> ID：13676052
> 
> 赞同：2
> 
> 时间：2012-12-03T01:44:28.757
> 
> 标签：java, android, apk, updates, silent-installer

我一直在研究静默安装一段时间。

我目前正在尝试找到某种方法将更新安装到使用 Android 的设备上：

*   没有用户输入的手段
*   没有互联网或网络
*   正在运行 Android 4.0

这就是为什么我希望默默地做到这一点。最坏的情况是每次我想更新时都将它连接到 PC 上，但这正是我想要避免的。

我的想法是，我对该设备的唯一输入是我的 SD 卡。

我需要做的是不断在 SD 卡上查找文件；如果它在那里，那么我将在没有任何用户输入（apk 或建议的文件类型）的情况下更新设备上的软件。

从我到目前为止发现的情况来看，似乎有几种方法可以奏效：

*   [Root 在 /data/app 上将 chmod 设置为 777 （并且不关心安全性）](https://stackoverflow.com/questions/5803999/install-apps-silently-with-granted-install-packages-permission)
*   根并假装我是 ADB 程序。
*   网络上的appbrain（对我没用）
*   编写/重写操作系统（过去我的专业知识）

但是，在我从比我了解更多的人那里获得一些反馈之前，我宁愿不必扎根设备。

所以我的问题如下：

*   谁能告诉我这些方法中的一种是否适用于我的情况？（80% 的机会可以）
*   有人可以指出我在搜索中遗漏的另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:17:31.517

您可以使用提示符的 Packagemanager 命令来执行此操作。

例子：

```
su -c pm install <apk> 
```

从您的应用程序中，您可以：

```
Process p = Runtime.getRuntime().exec("su -c pm install " + <your apk>); 
```

**笔记：**

*   如果您想静默安装，您至少应该有 shell root 访问权限
*   如果您没有 shell root 访问权限，则会向用户显示一个弹出窗口

**更新** 对不起我的无知，但我想 root 是你唯一的选择。牵强附会的想法似乎可能会奏效，但由于我自己没有做过，所以我不知道。

# image - 检查大图像的像素值（对于 64 位，指针偏移是否很大？）

> ID：13676054
> 
> 赞同：0
> 
> 时间：2012-12-03T01:45:01.263
> 
> 标签：image, pointers, opencv, processing, offset

将大灰度图像转换为彩色时，我似乎遇到了指针偏移问题。我正在将 24,000 x 27,000 灰度图像转换为 Direct2D 的 32 位 RGB 图像（D2D 的要求）。

我正在对图像进行突出显示，但还没有真正找到使用自定义调色板自动执行此操作的方法，所以我只是循环遍历所有像素值并在 32 位图像上手动设置它们。它适用于较小的图像，但在尝试使用较大的图像时崩溃，如上所述。

下面是一个代码片段。

```
 CvMat* dst = cvCreateMat(height, width, CV_8UC4);

    #pragma omp parallel num_threads(nThreads)
    {
        #pragma omp for
        for( int Y = 0; Y < height; Y++ )
        {
            for( int X = 0; X < width; X++ ) 
            {
                size_t nOffset = X + Y * width;
                size_t nOffsetRGB = (X  +  Y * width) * 4;

                switch( pPixelData[nOffset] )
                {
                    case 0: //red
                    {
                        dst->data.ptr[nOffsetRGB] = 0;
                        dst->data.ptr[nOffsetRGB + 1] = 0;
                        dst->data.ptr[nOffsetRGB + 2] = 255;
                        //pDestination[nOffsetRGB + 3] = 255; //alpha opacity %
                        break;
                    }
                    default: //GrayScale
                    {
                        dst->data.ptr[nOffsetRGB] = pPixelData[nOffset];
                        dst->data.ptr[nOffsetRGB + 1] = pPixelData[nOffset];
                        dst->data.ptr[nOffsetRGB + 2] = pPixelData[nOffset];
                        //pDestination[nOffsetRGB + 3] = 255; //pSource[nOffset]; //alpha %
                        break;
                    }
                }

            } //next X
        } //next Y
    } 
```

这段代码最终会因为访问内存的错误而崩溃，我认为这是不可能的，因为我检查了灰度图像是否良好并且有足够的内存（16gb）。它也适用于稍小的图像。

任何想法都是我在这里可能做错的事情，这是我第一次将程序转换为 64 位，所以我可能会遗漏一些东西。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:39:02.743

在您的代码中，您没有考虑由于对齐而可能出现的数据间隙。它被称为步进。你可以在这里阅读大量有用的信息：

[垫::isContinuous()](http://docs.opencv.org/modules/core/doc/basic_structures.html?highlight=stepping#bool%20Mat%3a%3aisContinuous%28%29%20const)

我不知道这是否是您的错误的根源，但通过指针访问矩阵元素通常容易出错，因此建议避免它。

OpenCV C++ API 提供了几种不错且高效的安全数据访问方式。在您的情况下，最干净且易于阅读的方法是使用迭代器。为此，您使用显式类型的矩阵。示例代码如下。

```
cv::Mat1b src = …
cv::Mat4b dest(src.rows, src.cols);
cv::Mat1b::const_iterator its = src.begin();
cv::Mat4b::iterator itd = dest.begin();
for (; its != src.end(); ++its, ++itd)
{
    uchar s = *its;
    cv::Vec4b &d = *itd;
    d[0] = s; d[1] = s; d[2] = s;
} 
```

**注意：**您需要最新的 OpenCV 版本才能使用。

## OpenCV 2.1 有很多错误。不要使用低于 2.3 的任何东西。

# java - 如何在 Windows 7（SphinxPocket）上运行 autogen.sh 和 swig

> ID：13676057
> 
> 赞同：-1
> 
> 时间：2012-12-03T01:45:23.290
> 
> 标签：java, android, windows, cmd, cmusphinx

我一直在尝试为我的 android 应用程序构建 Pocketsphinx，但遇到了一些问题。

**autogen.sh**，运行 autogen.sh 的程序是什么？当我尝试在 cmd 中安装它时，它提示我选择一个程序来运行 autogen.sh。这是为什么？[将 Pocketsphinx 构建到 Android](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/) ——**我已经使用 mingw 运行了 autogen.sh，在我运行它之后我“make”但它得到了一个错误：**

```
make[3]: *** [pio.lo] Error 1
make[3]: Leaving directory `/c/sphinx/sphinxbase/src/libsphinxbase/util`
make[2]: *** [All-recursive] Error 1
make[2]: Leaving directory `/c/sphinx/sphinxbase/src/libsphinxbase`
make[1]: *** [All-recursive] Error 1
make[1]: Leaving directory `/c/sphinx/sphinxbase/src`
make: *** [all-recursive] Error 1 
```

这个可以吗？如果不是，我该如何解决？

**swig**，我在 CMD中尝试了[此处的说明，但是当我运行 swig 时，它显示](http://www.swig.org/Doc1.3/Windows.html)**“必须指定输入文件。使用 -help 获取可用选项。”** 我如何知道是否安装了 Swig？

我正在使用**MINWG**来处理这个 sphinxpocket，但我仍然不知道如何使用 swig。

我正在使用 Windows 7 Home Basic 64 位。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:00:11.543

你可以安装MSYS或者CYGWIN，它们都可以执行autogen.sh

# android - Canvas.clipPath 处的 Android UnsupportedOperationException

> ID：13676059
> 
> 赞同：11
> 
> 时间：2012-12-03T01:45:35.680
> 
> 标签：android, exception, android-canvas

我在我的项目中使用此处[https://github.com/lvillani/android-cropimage](https://github.com/lvillani/android-cropimage)的图像裁剪库来裁剪存储在设备上的图像。

但是，某些用户使用以下堆栈跟踪报告崩溃

```
java.lang.UnsupportedOperationException
at android.view.GLES20Canvas.clipPath(GLES20Canvas.java:413)
at com.android.camera.HighlightView.draw(HighlightView.java:101)
at com.android.camera.CropImageView.onDraw(CropImage.java:783)
at android.view.View.draw(View.java:11006)
at android.view.View.getDisplayList(View.java:10445)
at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.getDisplayList(View.java:10443)
at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.getDisplayList(View.java:10443)
at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.getDisplayList(View.java:10443)
at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.getDisplayList(View.java:10443)
at android.view.ViewGroup.drawChild(ViewGroup.java:2850)
at android.view.ViewGroup.dispatchDraw(ViewGroup.java:2489)
at android.view.View.draw(View.java:11009)
at android.widget.FrameLayout.draw(FrameLayout.java:450)
at com.android.internal.policy.impl.PhoneWindow$DecorView.draw(PhoneWindow.java:2154)
at android.view.View.getDisplayList(View.java:10445)
at android.view.HardwareRenderer$GlRenderer.draw(HardwareRenderer.java:853)
at android.view.ViewRootImpl.draw(ViewRootImpl.java:1961)
at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1679)
at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2558)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4697)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
at dalvik.system.NativeStart.main(Native Method) 
```

通过搜索，我认为这是由某些设备上的硬件加速引起的。我在清单中禁用了硬件加速，但异常仍在发生。我还发现“一个可靠的解决方法是识别代码中有问题的操作，将它们绘制到位图上，然后将位图传送到加速画布上。”

根据堆栈跟踪有问题的代码是

```
protected void draw(Canvas canvas) {
    if (mHidden) {
        return;
    }
    canvas.save();
    Path path = new Path();
    if (!hasFocus()) {
        mOutlinePaint.setColor(0xFF000000);
        canvas.drawRect(mDrawRect, mOutlinePaint);
    } else {
        Rect viewDrawingRect = new Rect();
        mContext.getDrawingRect(viewDrawingRect);
        if (mCircle) {
            float width  = mDrawRect.width();
            float height = mDrawRect.height();
            path.addCircle(mDrawRect.left + (width  / 2),
                           mDrawRect.top + (height / 2),
                           width / 2,
                           Path.Direction.CW);
            mOutlinePaint.setColor(0xFFEF04D6);
        } else {
            path.addRect(new RectF(mDrawRect), Path.Direction.CW);
            mOutlinePaint.setColor(0xFFFF8A00);
        }
        canvas.clipPath(path, Region.Op.DIFFERENCE);
        canvas.drawRect(viewDrawingRect,
                hasFocus() ? mFocusPaint : mNoFocusPaint);

        canvas.restore();
        canvas.drawPath(path, mOutlinePaint);

        if (mMode == ModifyMode.Grow) {
            if (mCircle) {
                int width  = mResizeDrawableDiagonal.getIntrinsicWidth();
                int height = mResizeDrawableDiagonal.getIntrinsicHeight();

                int d  = (int) Math.round(Math.cos(/*45deg*/Math.PI / 4D)
                        * (mDrawRect.width() / 2D));
                int x  = mDrawRect.left
                        + (mDrawRect.width() / 2) + d - width / 2;
                int y  = mDrawRect.top
                        + (mDrawRect.height() / 2) - d - height / 2;
                mResizeDrawableDiagonal.setBounds(x, y,
                        x + mResizeDrawableDiagonal.getIntrinsicWidth(),
                        y + mResizeDrawableDiagonal.getIntrinsicHeight());
                mResizeDrawableDiagonal.draw(canvas);
            } else {
                int left    = mDrawRect.left   + 1;
                int right   = mDrawRect.right  + 1;
                int top     = mDrawRect.top    + 4;
                int bottom  = mDrawRect.bottom + 3;

                int widthWidth   =
                        mResizeDrawableWidth.getIntrinsicWidth() / 2;
                int widthHeight  =
                        mResizeDrawableWidth.getIntrinsicHeight() / 2;
                int heightHeight =
                        mResizeDrawableHeight.getIntrinsicHeight() / 2;
                int heightWidth  =
                        mResizeDrawableHeight.getIntrinsicWidth() / 2;

                int xMiddle = mDrawRect.left
                        + ((mDrawRect.right  - mDrawRect.left) / 2);
                int yMiddle = mDrawRect.top
                        + ((mDrawRect.bottom - mDrawRect.top) / 2);

                mResizeDrawableWidth.setBounds(left - widthWidth,
                                               yMiddle - widthHeight,
                                               left + widthWidth,
                                               yMiddle + widthHeight);
                mResizeDrawableWidth.draw(canvas);

                mResizeDrawableWidth.setBounds(right - widthWidth,
                                               yMiddle - widthHeight,
                                               right + widthWidth,
                                               yMiddle + widthHeight);
                mResizeDrawableWidth.draw(canvas);

                mResizeDrawableHeight.setBounds(xMiddle - heightWidth,
                                                top - heightHeight,
                                                xMiddle + heightWidth,
                                                top + heightHeight);
                mResizeDrawableHeight.draw(canvas);

                mResizeDrawableHeight.setBounds(xMiddle - heightWidth,
                                                bottom - heightHeight,
                                                xMiddle + heightWidth,
                                                bottom + heightHeight);
                mResizeDrawableHeight.draw(canvas);
            }
        }
    }
} 
```

如何绘制到位图，然后将 blit 到画布？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T02:21:52.147

在 ICS 设备上，有一个开发者选项可以强制硬件加速，即使应用程序没有请求它也是如此。这就是导致崩溃的原因。您应该能够使用这样的东西来强制它使用软件渲染：

```
if (Build.VERSION.SDK_INT > Build.VERSION_CODES.HONEYCOMB) {
   myCustomView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T02:19:21.273

我想您可以将视图绘制到屏幕外位图并将位图复制到屏幕画布上。例如，

```
protected void draw(Canvas canvas) {
    if (mHidden) {
        return;
    }

    Bitmap bitmap = createOffScreenBitmap();
    canvas.drawa(bitmap,0f, 0f, null);

}

private Bitmap drawOffScreenBitmap(){

    // Draw whatever you want to draw right here.
} 
```

此外，您可以使用支持硬件加速的[PorterDuffxfermode](http://developer.android.com/reference/android/graphics/PorterDuffXfermode.html)，而不是`clippath`.

# string - Shell 脚本 - 打印令牌

> ID：13676061
> 
> 赞同：1
> 
> 时间：2012-12-03T01:45:39.503
> 
> 标签：string, shell, printing, token

假设一个变量：

```
word="Hi there, how are you?" 
```

我将如何打印它以便输出为：

```
Hi
there,
how
are
you? 
```

到目前为止，我只学习了 grep、cut、find、tr 命令

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:49:34.147

使用 bash：

```
word="Hi there, how are you?"
for i in $word; do echo $i; done 
```

或者，使用`tr`：

```
echo $word | tr ' ' '\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:52:30.623

```
printf "%s\n" $word 
```

格式说明符将被重复使用，直到所有令牌都被使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:00:03.653

```
echo $word|awk '{for(i=1;i<NF+1;i++) printf("%s\n", $i)}' 
```

也很好用，请试一试。

# javascript - 始终在段落末尾添加展开按钮

> ID：13676062
> 
> 赞同：0
> 
> 时间：2012-12-03T01:45:51.387
> 
> 标签：javascript, jquery

这是在线示例：http: [//jsfiddle.net/Nh4K2/](http://jsfiddle.net/Nh4K2/)

```
<div class="container">
    Nulla varius diam at sem adipiscing pharetra. Integer eget nulla non purus commodo aliquam. Aenean sed nunc neque. Aliquam eleifend aliquam arcu, ac semper nulla faucibus id. Etiam luctus eleifend tempus. Vestibulum ornare, nisi vitae fermentum luctus, sem lectus rhoncus nibh, auctor iaculis magna turpis nec turpis. Aliquam orci tortor, vulputate at pretium sit amet, blandit eget libero. Sed posuere ultricies mi, sed rhoncus massa ultrices quis. Donec pulvinar vestibulum rhoncus. Donec urna lacus, mollis et convallis at, commodo nec lectus. Maecenas pretium, nunc ac volutpat tempus, dolor orci ultricies massa, eu malesuada urna massa ut orci. Duis eget elit nulla, ornare aliquet nulla. Sed eleifend scelerisque est, eu laoreet lacus ultricies id. Aenean aliquam porttitor augue, quis lacinia augue consequat vitae. Ut venenatis orci massa. Duis dignissim, justo at pellentesque adipiscing, ligula eros mollis tellus, ut accumsan lorem dui eu est.
        <div class="whatever">hahahahahaha</div>
    <div class="damn">hohohohohohoho</div>
    <div class="laugh">lololololololololo</div>
</div>
<span>Show</span>​

function excerpt(str, nwords) {
    var words = str.split(' ');
    words.splice(nwords, words.length - 1);
    return words.join(' ') + '&hellip;';
}

var $div = $('.container');
$div.each(function() {
    var theExcerpt = excerpt($(this).text(), 30);
    $(this).data('html', $(this).html()).html( theExcerpt );
});

$('span').click(function() {
    var isHidden = $(this).text() == 'Show';
    var $div = $(this).prev();
    var theExcerpt = excerpt($div.text(), 30);
    $div.html( isHidden ? $div.data('html') : theExcerpt);
    $(this).remove();
});​ 
```

任何可能的方法使“显示”切换按钮始终显示在段落的末尾？而不是显示在第二行，格式看起来像

> sem adipiscing pharetra 处的 Nulla varius diam。整数 eget nulla non purus commodo aliquam。Aenean sed nunc neque。Aliquam eleifend aliquam arcu, ac semper nulla faucibus…<strong>显示

非常感谢任何建议或解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:54:34.897

您可以简单地将元素的`display`属性设置为.`.container``inline`

[在http://jsfiddle.net/Nh4K2/2/](http://jsfiddle.net/Nh4K2/2/)更新小提琴

如果您希望它们被阻止，您可以在两者周围添加一个包装器 div`.container`和`<span>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T01:54:49.660

将跨度添加到函数中的摘录中。

确保选择跨度`parent()`而不是它的`prev()`.

[http://jsfiddle.net/Nh4K2/3/](http://jsfiddle.net/Nh4K2/3/)

```
<div class="container">
    Nulla varius diam at sem adipiscing pharetra. Integer eget nulla non purus commodo aliquam. Aenean sed nunc neque. Aliquam eleifend aliquam arcu, ac semper nulla faucibus id. Etiam luctus eleifend tempus. Vestibulum ornare, nisi vitae fermentum luctus, sem lectus rhoncus nibh, auctor iaculis magna turpis nec turpis. Aliquam orci tortor, vulputate at pretium sit amet, blandit eget libero. Sed posuere ultricies mi, sed rhoncus massa ultrices quis. Donec pulvinar vestibulum rhoncus. Donec urna lacus, mollis et convallis at, commodo nec lectus. Maecenas pretium, nunc ac volutpat tempus, dolor orci ultricies massa, eu malesuada urna massa ut orci. Duis eget elit nulla, ornare aliquet nulla. Sed eleifend scelerisque est, eu laoreet lacus ultricies id. Aenean aliquam porttitor augue, quis lacinia augue consequat vitae. Ut venenatis orci massa. Duis dignissim, justo at pellentesque adipiscing, ligula eros mollis tellus, ut accumsan lorem dui eu est.
        <div class="whatever">hahahahahaha</div>
    <div class="damn">hohohohohohoho</div>
    <div class="laugh">lololololololololo</div>
</div>
​

function excerpt(str, nwords) {
    var words = str.split(' ');
    words.splice(nwords, words.length - 1);
    return words.join(' ') + '&hellip;' + '<span>Show</span>';
}

var $div = $('.container');
$div.each(function() {
    var theExcerpt = excerpt($(this).text(), 30);
    $(this).data('html', $(this).html()).html( theExcerpt);
});

$('span').click(function() {
    var isHidden = $(this).text() == 'Show';
    var $div = $(this).parent();
    var theExcerpt = excerpt($div.text(), 30);
    $div.html( isHidden ? $div.data('html') : theExcerpt);
    $(this).remove();
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:54:45.240

您的 HTML 结构很差，我会这样布置：

```
<div class="container">
    <div class="description_text">
        <span>description_text_here</span>
        <span class="show_more"> Show</span>
    </div>
    <div class="more_text_to_show">
        <p>more_text_to_show_here</p>
    </div>
</div> 
```

至少这就是我正在阅读您的问题和发布的代码的内容。

# python - (Python, Windows) 从其他类调用类函数

> ID：13676063
> 
> 赞同：0
> 
> 时间：2012-12-03T01:45:57.477
> 
> 标签：python, windows, class, function, variables

我试图从另一个类中调用一个类中的函数。这是我的代码：

```
import os

class GameRoom():

    msgLine1 = ""
    msgLine2 = ""
    msgLine3 = ""
    msgLine4 = ""
    msgLine5 = ""

    def GameStatus(self):
        while True:
            os.system('cls')
            print self.msgLine1
            print self.msgLine2
            print self.msgLine3
            print self.msgLine4
            print self.msgLine5 + "\n"
            print "Do what?\n"
            userDecision = raw_input()
            if userDecision.upper() == "GO":
                Player().Go()
                break
            else:
                self.CycleMessages("That's not a valid choice!")

    def CycleMessages(self,newMsg="error"):
        self.msgLine5 = self.msgLine4
        self.msgLine4 = self.msgLine3
        self.msgLine3 = self.msgLine2
        self.msgLine2 = self.msgLine1
        self.msgLine1 = newMsg

class Player():
    def Go(self):
        GameRoom().CycleMessages("Player goes.")
        GameRoom().GameStatus()

def main():
    GameRoom().GameStatus()

if __name__ == '__main__':
    main() 
```

当我`CycleMessages`通过自己打电话时，这些行填满了“这不是一个有效的选择！” 通常，就像他们应该的那样。当我`CycleMessages`从`Player`课堂上打电话时，所有的行都清除了，而不是显示“玩家去。”。“错误”也不显示。

我想要“玩家去”。当我打电话时出现`Player().Go()`。我该怎么做呢？我很感激任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:22:28.383

发生这种情况是因为当您调用 时`GameRoom().CycleMessages("Player goes.")`，您是在`GameRoom`. 轻松修复：

```
class GameRoom():

    def GameStatus(self):
        ...
            if userDecision.upper() == "GO":
                # Pass `Player` this instance of `GameRoom`
                Player().Go(self)
                break
            else:
                self.CycleMessages("That's not a valid choice!")

class Player():

    def Go(self, game):
        # And here, call `CycleMessages` on the passed instance of `GameRoom`.
        game.CycleMessages("Player goes.")
        game.GameStatus() 
```

此外，这不是您的问题，但您可能需要考虑更改命名约定（请参阅：[PEP8](http://www.python.org/dev/peps/pep-0008/#naming-conventions)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:59:36.723

您面临的部分问题（也许是它让您感到困惑的原因）是您试图使用类变量来保存您的消息，但实际上您并没有修改它们。每当您键入`self.variable = something`时，您都将分配给一个实例变量，即使存在同名的类变量也是如此。这是因为虽然您可以通过 访问类变量`self`，但不能以这种方式分配给它们。

您可以通过更准确地将类变量命名为 来避免这种情况`GameRoom.variable`，但我建议完全避免使用类变量。除了常量之外，它们很少有用。以下是如何使用实例变量设置与现在相同的东西：

```
class GameRoom(object):
    def __init__(self):
        self.message1 = ""
        self.message2 = ""
        # etc... 
```

其余代码可以相同（它已经在操作实例变量）。

一旦你设置好使用实例变量，你会遇到的麻烦是你在你想要访问它们的方法时创建你的类的一个新实例。也就是说，您一遍又一遍地`GameRoom`创建一个新实例，并且该类在每次移动后创建新实例。这通常不是您想要做的。相反，您可能只想为它们中的每一个创建一个实例，并继续重用它们。`Player``Player``GameRoom`

@kuyan 的回答显示了如何避免`GameRoom`在方法中创建新实例`Player.Go`，但您可能也希望避免创建大量`Player`实例（特别是如果您`Player`稍后在课程中遇到任何复杂的事情）。

我会做：

```
def GameStatus(self):
    player = Player()    # create a Player instance in a local variable

    # ...

    if userDecision.upper() == "GO":
        player.Go(self)  # use the variable! 
```

另一种选择是将播放器创建添加到`__init__`方法中（将其分配给`self.player`实例上的其他名称）。然后，您可以`Player`从`GameRoom`. `__init__`或者，如果您希望同一个`Player`实例在不同的房间中可用，您甚至可以将其作为方法的参数。

# java - 存储来自文本文件的输入

> ID：13676065
> 
> 赞同：2
> 
> 时间：2012-12-03T01:46:13.557
> 
> 标签：java

我的问题很简单，我想读入一个文本文件并将文件的第一行存储为一个整数，并将文件的每一行存储到一个多维数组中。我正在考虑这样做的方式是创建一个 if 语句和另一个整数，当该整数为 0 时，将该行存储到整数变量中。虽然这看起来很愚蠢，但肯定有更简单的方法。

例如，如果文本文件的内容是：

```
4
1 2 3 4
4 3 2 1
2 4 1 3
3 1 4 2 
```

第一行“4”将存储在一个整数中，每隔一行将进入多维数组。

```
public void processFile(String fileName){
    int temp = 0;
    int firstLine;
    int[][] array;
    try{
        BufferedReader input = new BufferedReader(new FileReader(fileName));
        String inputLine = null;

        while((inputLine = input.readLine()) != null){
            if(temp == 0){
                firstLine = Integer.parseInt(inputLine);
            }else{
                // Rest goes into array;
            }
            temp++;
        }
    }catch (IOException e){
        System.out.print("Error: " + e);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T01:55:53.230

我故意不回答这个来为你做这件事。尝试一下：

1.  [`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String%29)
2.  一行写着类似的东西`array[temp-1] = new int[firstLine];`
3.  带有另一条线的内部`for`循环`Integer.parseInt`

这应该足以让你走完剩下的路

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:02:39.150

我将假设您知道如何使用文件 IO。我不是很有经验，但这就是我的想法：

```
while (inputFile.hasNext())
  {
     //Read the number
     String number = inputFile.nextLine();

     if(!number.equals(" ")){
       //Do what you need to do with the character here (Ex: Store into an array)
     }else{
       //Continue on reading the document
     } 
  } 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T01:54:02.373

相反，您可以将文件的第一行存储为整数，然后进入一个 for 循环，在其中循环文件的其余行，将它们存储在数组中。这不需要`if`，因为您知道第一种情况首先发生，其他情况（数组）在之后发生。

# html - 垂直居中 带有项目符号图像的文本？

> ID：13676066
> 
> 赞同：7
> 
> 时间：2012-12-03T01:46:19.203
> 
> 标签：html, css, html-lists

所以我想弄清楚如何将我拥有的一些文本与自定义项目符号图像垂直对齐。这是我所拥有的：

```
<ul>
    <li>LINE OF TEXT</li>
    <li>LINE OF TEXT</li>
    <li>LINE OF TEXT</li>
</ul> 
```

而对于 CSS...

```
#div .class
{
    color: #4c361c;
    font-size: 13px;
    list-style-image: url(../images/image.png);
}

#div .class li{ } 
```

有没有人对如何去做这件事有任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T02:08:10.520

这是一个[演示](http://jsfiddle.net/mV3vk/12/)。

使用背景图像可以获得所需的效果。

**HTML**

```
<ul>
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
    <li>Four</li>
</ul> 
```

**CSS**

```
ul {
    list-style: none;
}

ul > li {
  background: url('../imgpath/bullet-image.png') no-repeat left center;

  /* Adjust the padding for your custom bullet image */
  padding: 10px 0 10px 34px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:08:00.073

**现在定义**您`li` `background bullets`并`background-position`根据**您的设计进行设置**

像这样

**CSS**

```
ul{
margin:0;
  padding:0;
  list-style:none;
}
li {
background:url("http://www.un.org/en/oaj/unjs/efiling/added/images/bullet-list-icon.jpg") no-repeat 0 -2px;
  padding-left:20px;
  line-height:14px;
  font-size:14px;
  margin-top:12px;
} 
```

***[现场演示](http://tinkerbin.com/CRvdjBhx)***

# android - 如何将绘图调用和采样器值的更改与单个着色器程序正确混合？

> ID：13676070
> 
> 赞同：3
> 
> 时间：2012-12-03T01:47:01.677
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在尝试使用 OpenGL ES 2.0 for Android 中的一个着色器程序使用两种不同的纹理绘制两个对象。第一个对象应该有`texture0`，第二个应该有`texture1`。

在片段着色器中，我有：

```
uniform sampler2D tex; 
```

在java代码中：

```
int tiu0 = 0;
int tiu1 = 1;
int texLoc = glGetUniformLocation(program, "tex");

glUseProgram(program);

// bind texture0 to texture image unit 0
glActiveTexture(GL_TEXTURE0 + tiu0);
glBindTexture(GL_TEXTURE_2D, texture0);

// bind texture1 to texture image unit 1
glActiveTexture(GL_TEXTURE0 + tiu1);
glBindTexture(GL_TEXTURE_2D, texture1);

glUniform1i(texLoc, tiu0);
// success: glGetError returns GL_NO_ERROR, glGetUniformiv returns 0 for texLoc

drawFirstObject(); // should have texture0

glUniform1i(texLoc, tiu1);
// success: glGetError returns GL_NO_ERROR, glGetUniformiv returns 1 for texLoc

drawSecondObject(); // should have texture1 
```

在带有 Android 2.3.3 的三星 Galaxy Ace 上运行，这两个对象具有相同的`texture0`. 类似的代码在我的台式计算机上的 OpenGL 2.0 中正确运行。

如果我删除`drawFirstObject`，第二个对象将有`texture1`.

如果我删除`drawSecondObject`，第一个对象将有`texture0`.

如果介于两者之间`drawFirstObject`，`drawSecondObject`我会暂时更改程序：

```
glUseProgram(0); // can be also any valid program other than the program from the next call
glUseProgram(program); 
```

那么两个对象都会有`texture1`.

与 不同的制服的值`sampler2D`始终设置正确。

我知道我可以仅使用一个纹理图像单元绘制具有不同纹理的两个对象，并在绘制对象之前将适当的纹理绑定到该纹理图像单元，但我也想知道这里发生了什么。

我的代码有问题吗？是否可以在 OpenGL ES 2.0 中仅通过在代码中显示的纹理图像单元之间切换来绘制具有不同纹理的对象？如果不可能，OpenGL 2.0（在可能的情况下）和 OpenGL ES 2.0 之间的区别是否记录在任何地方？我找不到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:23:41.397

经过数小时的进一步研究，我发现这个问题是我的三星 Galaxy Ace (GT-S5830) 中使用的 Adreno 200 GPU 特有的。似乎 Adreno 200 驱动程序在第一次调用绘图函数时将纹理分配给采样器，之后它忽略对采样器值的任何更改 ( `glUniform1i(samplerLocation, textureImageUnit)`)，直到两者之一发生：

*   `glUseProgram`用不同的着色器程序调用，
*   不同的纹理绑定到着色器程序使用的任何纹理图像单元。

Adreno 200 GPU 制造商的论坛中有一个[帖子](https://developer.qualcomm.com/forum/qdevnet-forums/mobile-gaming-graphics-optimization-adreno/8896)描述了同样的问题。

因此，如果您使用相同的着色器程序和之前绑定的不同纹理多次调用绘图函数，则对所描述的问题有两种解决方法：

1.  `glUseProgram(0); glUseProgram(yourDrawingProgram);`在每个绘图函数之前调用。

2.  在每次绘图调用之前，将不同的纹理绑定到着色器程序使用的至少一个纹理图像单元。此解决方案可能难以维护，因为如果您绑定已绑定到纹理图像单元的相同纹理，问题将仍然存在。因此，在这种情况下，最简单的解决方案是在每次绘图调用之前不更改采样器值并绑定着色器程序使用的所有纹理图像单元的纹理。

# javascript - 创建后销毁 Backbone.Router 和所有副作用

> ID：13676074
> 
> 赞同：4
> 
> 时间：2012-12-03T01:48:27.340
> 
> 标签：javascript, backbone.js, browser-history

假设您希望能够创建一个调用 Backbone.history.start 的 Backbone.Router 实例，销毁它的所有痕迹，然后再次创建它。

我需要这样做以进行单元测试。

问题是创建骨干路由器具有全局意义。就像 Backbone.history 一样，在你创建之前它是未定义的。

```
var ReversibleRouter = Backbone.Router.extend({
  initialize: function(){
    _buildAppPaths(this.options) // Implementation not shown. Builds the application paths
    Backbone.history.start()
  },
  destroy: function(){
    // TODO: Implement this
  }
}) 
```

我希望能够创建和完全销毁，以便我可以对我的应用程序的路由器实现进行一些单元测试。

调用`Backbone.history.stop()`和设置就足够了`Backbone.history = undefined`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:12:59.173

如果您希望进行更多全栈集成类型的测试，您可以使用以下方法重置应用程序的路由器：

```
Backbone.history.stop()
Backbone.history = undefined // Could also probably use delete here :) 
```

到目前为止，这是成功的——我们的测试可能在我们的 qunit 测试期间实例化并杀死路由器 5 次。效果很好。

也许像@AdamTerlson 这样的嘲笑是长期发展的更好方法，但我仍在学习单元和集成测试理念。不过，我不介意进行一两次完整的堆栈测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T03:10:56.937

这可能是作弊，但我认为您应该在您的测试功能单元之外模拟功能，并特别确保您的单元测试不允许访问实时 DOM、服务器或浏览器。

看看[SinonJS](http://sinonjs.org/)，这很好。

这是一个在不影响浏览器历史状态的情况下测试路由器的初始化方法的示例。

```
test('...', function () {
    // Arrange
    var buildAppPaths = sinon.stub(ReversibleRouter.prototype, '_buildAppPaths');
    var startHistory = sinon.stub(Backbone.history, 'start');
    var options = {};

    // Act
    new ReversibleRouter(options);

    // Assert
    ok(buildAppPaths.calledWith(options));
    ok(startHistory.calledOnce); // or ok(Backbone.history.start.calledOnce);
}); 
```

在这种方法下，您已成功断言所有调用都是对外部功能单元（包括参数）进行的。那时，您可以相信外部调用会完成它的工作（通过额外的单元测试证明）。

在这个单元之外进行调用将是进行**集成测试**而不是单元测试。

# c# - 替换和合并 HashSet 中的“重复项”

> ID：13676075
> 
> 赞同：2
> 
> 时间：2012-12-03T01:48:31.717
> 
> 标签：c#, linq, .net-4.0, duplicates, hashset

我`HashSet<T>`在 C# 4.0 中有一个分层对象。主键是 int，但偶尔会有重复的辅助键。我想将条目与重复的辅助键合并。在此示例中，辅助键是名称：

```
struct Element
{
  int ID;
  string Name;
  List<int> Children;
  List<int> Parents;

  public override int GetHashCode()
  {
    return ID;
  }
}

HashSet<Element> elements = new HashSet<Element>();

// Example Elements
elements.Add(1, "Apple", Children = {10, 11, 12}, Parents = {13,14,15});
elements.Add(2, "Banana", Children = {20, 21, 22}, Parents = {23,24,25});
elements.Add(3, "Apple", Children = {30, 31, 32}, Parents = {33,34,35});
elements.Add(4, "Food", Children = {1, 2, 3}, Parents = {}); 
```

目标是删除第 3 个条目 {3, "Apple",...}，然后更新并合并其他剩余元素中的 Parent 和 Children 引用；最终结果应该是这样的：

```
{ 1, "Apple", Children = { 10, 11, 12, 30, 31, 32 }, Parents = { 13,14,15, 33, 34, 35 }}
{ 2, "Banana", Children = { 20, 21, 22 }, Parents = { 23,24,25 }}
{ 4, "Food", Children = {1, 2}, Parents = {} } 
```

这是我到目前为止所拥有的，但我无法找出更新 HashSet 的最佳方法。我首先复制 HashSet，以便在迭代时进行删除。首先，我找到重复项。如果有重复我想更新，他们从副本中删除它们。那就是我卡住的地方。一旦我更新了重复项，我想删除它们，并防止使用跳过列表再次处理它们：

```
var copy = new HashSet<Element>(Elements);
HashSet<int> skip = new HashSet<int>();
foreach (var e in Elements)
{
  if (!skip.Contains(e.ID)
  {
    var duplicates = Elements.Where(x => e.Name == x.Name && e.ID != x.ID);
    if (duplicates.Any())
    {           
      foreach (var d in duplicates)
      {
        // Iterate copy and update Parent and Children references
        // How do I do this part? 
      }

      // Remove the duplicates from the copied list
      copy.RemoveWhere(x => duplicates.Select(x => x.ID)
                                      .Contains(x.ID));

      // Don't process the duplicates again
      skip.UnionWith(duplicates);
    } 
  }
}
return copy; 
```

我被困在这一点上。另外，有没有一种巧妙的方法可以用 Linq 做到这一点？

**更新：**列表已经是这样了，我无法控制初始内容。我想我可以创建一个新的包装器，它有一个更好的 Add 方法来防止重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:12:33.750

你可以试试这个：

```
var temp = Elements.GroupBy(e => e.Name)
                   .Select(g => new Element
                   {
                       ID = g.OrderBy(e => e.ID).First().ID,
                       Name = g.Key,
                       Children = g.SelectMany(e => e.Children).ToList(),
                       Parents = g.SelectMany(e => e.Parents).ToList()
                   });
var duplicates = Elements.Where(e => !temp.Any(t => t.ID == e.ID))
                         .Select(e => e.ID)
                         .Distinct();
Elements = new HashSet<Element>(temp);
foreach (Element e in Elements)
{
    e.Children.RemoveAll(i => duplicates.Contains(i));
    e.Parents.RemoveAll(i => duplicates.Contains(i));
} 
```

据我了解，您只需按 对所有元素进行分组`Name`，然后选择最低的`ID`并加入`Children`and `Parents`。显然，这是通过这个查询完成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T01:57:38.030

尝试添加这个单一的字段元素。

```
struct Element
{
  int ID;
  string Name;
  List<int> Children;
  List<int> Parents;
  Bool duplicate;
}

HashSet<Element> Elements = new HashSet();

// Example Elements
Elements.Add(1, "Apple", Children = {10, 11, 12}, Parents = {13,14,15}, duplicate = false);
Elements.Add(2, "Banana", Children = {20, 21, 22}, Parents = {23,24,25}, duplicate = false);
Elements.Add(3, "Apple", Children = {30, 31, 32}, Parents = {33,34,35}, duplicate = false);
Elements.Add(4, "Food", Children = {1, 2, 3}, Parents = {}, duplicate = false); 
```

当您迭代您的副本时，将“重复”标记为真。或者添加一个“已删除”元素，这样您就不会重新处理。管他呢。关键是，再添加一个元素。您可以随时复制元素并在添加时创建新元素。

要在前面添加到新浪的评论中，您可以使用如下键：

```
class ElementKey {
  int ID;
  string Name;
}

class Element {
  ElementKey Key;
  List<int> Children;
  List<int> Parents;
  ProcessFlagSet flags;
}

class ProcessFlagSet {
  bool Processed;
  bool Duplicate;
}

Dictionary<ElementKey,Element> ... 
```

然后您可以稍后从 ProcessFlagSet 中删除所有元素，以满足重构需求。如果您不需要它们，它们会破坏编译，直到它们被删除。

最后，我想推荐在这里创建你自己的 Add 方法。我希望您考虑传入要添加的元素，然后检查添加时是否存在键。这为您节省了一步。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T08:20:17.263

如果我对您的理解正确，您希望：

1.  移除同名元素
2.  将已移除元素的子项和父项列表合并到剩余元素
3.  在 Children 和 Parents 列表中，用剩余元素的 ID 替换对已删除 ID 的引用

这些可以通过以下代码完成：

```
// Find all duplicated elements and remove them
var duplicates = Elements.GroupBy(x => x.Name)
                         .Where(x => x.Count() > 1)
                         .SelectMany(x => x.OrderBy(e => e.ID)
                                           .Skip(1)
                                           .Select(e => new { Element = e, NewID = x.Min(y => y.ID) }))
                         .ToDictionary(x => x.Element.ID, x => new { x.Element, x.NewID });
Elements.ExceptWith(duplicates.Values.Select(x => x.Element));

// Update the Children and Parents of each remaining element
foreach (var element in Elements)
{
    var removed = duplicates.Where(x => x.Value.Element.Name == element.Name);

    var mergedChildren = element.Children.Union(removed.SelectMany(x => x.Value.Element.Children))
                                         .Select(x => duplicates.ContainsKey(x) ? duplicates[x].NewID : x)
                                         .Distinct().ToList();
    element.Children.Clear();
    element.Children.AddRange(mergedChildren);

    var mergedParents = element.Parents.Union(removed.SelectMany(x => x.Value.Element.Parents))
                                       .Select(x => duplicates.ContainsKey(x) ? duplicates[x].NewID : x)
                                       .Distinct().ToList();
    element.Parents.Clear();
    element.Parents.AddRange(mergedParents);
} 
```

# python - 为什么 printf 使用 python 中的 ctypes 不打印数字作为签名

> ID：13676077
> 
> 赞同：1
> 
> 时间：2012-12-03T01:48:41.730
> 
> 标签：python, integer, ctypes, signed

我用C写了以下代码

```
short a = 0xFFFE;
printf("hex = 0x%X, signed short = %d\n", a & 0xFFFF, a);

Output ---> hex = 0xFFFE, signed short = -2 
```

现在使用 ctypes 在 Python 中做同样的事情

```
from ctypes import *
mc = cdll.msvcrt
a = c_short(0xFFFE)
mc.printf("hex = 0x%X, signed short = %d\n", a, a)

Output ---->    hex = 0xFFFE, signed short = 65534 
```

我不确定为什么输出不同？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T22:16:24.670

`printf`没有被正确调用。使用`%hX`和`%hd`传递短裤。

```
>>> from ctypes import *
>>> mc = cdll.msvcrt
>>> a=c_short(0xFFFE)
>>> mc.printf('hex=0x%hX, signed short=%hd\n',a,a)
hex=0xFFFE, signed short=-2
28 
```

# php - Dreamweaver Regex 使用正则表达式查找和替换

> ID：13676079
> 
> 赞同：1
> 
> 时间：2012-12-03T01:48:48.097
> 
> 标签：php, regex, dreamweaver

我正在使用正则表达式来执行查找并用 Dreamweaver 替换。我遇到了一些困难。这就是我的页面中的内容（请注意，存在语法错误，因为我需要在字符串末尾添加一个括号）。

```
$email=htmlspecialchars(mysql_real_escape_string($_POST['email']);      
$name=htmlspecialchars(mysql_real_escape_string($_POST['name']); 
```

我正在尝试执行查找和替换，这将产生：

```
$email=htmlspecialchars(mysql_real_escape_string($_POST['email']));                                                    
$name=htmlspecialchars(mysql_real_escape_string($_POST['name'])); 
```

这就是我用来执行查找的内容。它似乎替换了太多文本（它从 $email 变量中的 $_POST 开始，但一直持续到 $name 变量的 $_POST）

*   查找：\$_POST['([^<]*)']
*   替换：$_POST['$1'])

我最终得到了这个：

```
$email=htmlspecialchars(mysql_real_escape_string($_POST['email']);      
$name=htmlspecialchars(mysql_real_escape_string($_POST['name'])); 
```

如您所见，它只修复了最后一个实例（这是因为 find 函数选择了从 $_POST['email'] 一直到 $_POST['name'] 的两行）。有想法该怎么解决这个吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T01:50:50.577

添加一个问号使其不贪婪。此外，您需要转义要匹配的 [ 和 ] 字符。

```
Find: \$_POST\['([^<]*?)'\]
Replace: $_POST['$1']) 
```

或者，或者，使用 ' 字符而不是 < 字符来匹配引号内的值：

```
Find: \$_POST\['([^']*)'\]
Replace: $_POST['$1']) 
```

# crystal-reports - 在交叉表中将数字转换为 MM:SS 格式

> ID：13676084
> 
> 赞同：0
> 
> 时间：2012-12-03T01:49:29.377
> 
> 标签：crystal-reports, formatting, crosstab

我正在尝试将 Crystal 报表的交叉表中的值转换为 MM:SS 格式。我使用了以下步骤：右键单击摘要 > 格式化字段 > 显示字符串 > x+2

```
WhilePrintingRecords;
NumberVar curr := CurrentFieldValue;
NumberVar mins := Truncate(curr / 60);
NumberVar secs := Remainder(curr, 60);
ToText(mins, 0, "") & ":" & ToText(secs, 0, "") 
```

secs 不为 0 时结果正常。示例：`4:30'

但是，我在`secs`为 0 时遇到问题，结果是（4 分钟）：`4:0`

我希望输出为`4:00`，秒数始终显示为 2 位数字。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:03:54.037

你是条件格式表达式中的我的[ElapsedTime](http://cogniza.com/wordpress/2005/10/18/crystal-reportscustom-functionselapsedtime/)函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:01:56.627

我用这个代替，它工作:)

```
NumberVar curr := CurrentFieldValue;
NumberVar mins := Truncate(curr / 60);
NumberVar secs := Remainder(curr, 60);
ToText(mins, 0, "") & ":" & ToText(secs, '00') 
```

# objective-c - AFNetworking 框架：如何缓存图像

> ID：13676089
> 
> 赞同：2
> 
> 时间：2012-12-03T01:50:08.730
> 
> 标签：objective-c, ios, afnetworking

```
-(void)setImageWithURL:(NSURL *)url, 
```

AFNetworking 中的方法描述：“**如果图像在本地缓存，则立即设置图像**”，但它并没有让我设置缓存目录，那么它将图像缓存在哪里？还是真的缓存图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T05:55:49.743

`AFNetworking`利用已经由其`NSURLCache`及其任何子类提供的缓存功能。

使用[Pete Steinberger 的 SDURLCache 分支，](https://github.com/steipete/SDURLCache)它提供磁盘缓存，否则`NSURLCache`on没有实现`iOS`。

**注意**：从 开始`iOS5`，这不再需要。`NSURLCache`现在妥妥`caches objects`的，只要`Cache-Control` `header`是`set`。

您可能会发现它对实例很有用`set ignoreMemoryOnlyStoragePolicy`，`YES`这`SDURLCache`将确保图像将更一致地缓存到磁盘以供离线使用（如 SDURLCache README 中所述，iOS 5 支持，但仅适用于 http，因此它仍然是一个如果您想支持 iOS 4 或 https，这是一个不错的选择）

请参阅[AFNetworking-FAQ - AFNetworking 是否内置任何缓存机制？](https://github.com/AFNetworking/AFNetworking/wiki/AFNetworking-FAQ)还有[AFURLCache - iOS](https://github.com/AFNetworking/AFNetworking/pull/25)链接的磁盘缓存。

# python - 如何在 python django 中制作自定义数组

> ID：13676092
> 
> 赞同：0
> 
> 时间：2012-12-03T01:50:27.817
> 
> 标签：python, django

我有这个字典列表

```
{"FieldFlags": "0", "FieldNameAlt": "Please forgive me", "FieldName": "field1", "FieldType": "Text", "FieldJustification": "Left", "FieldValue": "test"},
 {"FieldJustification": "Left", "FieldNameAlt": "Please forgive me", "FieldName": "min_speed", "FieldType": "Text", "FieldFlags": "0"},
 {"FieldJustification": "Left", "FieldNameAlt": "Please forgive me", "FieldName": "avg_speed", "FieldType": "Text", "FieldFlags": "0"}, 
 {"FieldJustification": "Left", "FieldNameAlt": "Please forgive me", "FieldName": "lowest_speed", "FieldType": "Text", "FieldFlags": "0"},
 {"FieldJustification": "Left", "FieldNameAlt": "Please forgive me", "FieldName": "air", "FieldType": "Text", "FieldFlags": "0"}, 
 {"FieldJustification": "Left", "FieldNameAlt": "Please forgive me", "FieldName": "slope", "FieldType": "Text", "FieldFlags": "0"}] 
```

出于我的目的，我需要将此数组转换为类似

```
fields = [('field1','test'),('min_speed',''),('avg_speed','')..] 
```

所以基本上我想要的元组 `(FiedName,FieldValue)`

如果 fieldValue 不存在，那么它应该显示为空

我怎样才能转换它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T01:54:33.443

```
fields = [(d['FieldName'], d.get('FieldValue', '')) for d in your_list] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:59:31.900

您还可以使用 map()：

```
fields = map(lambda d: (d['FieldName'], d.get('FieldValue', '')), your_list) 
```

# android - Android 2D 游戏开发：一般如何处理背景/渲染？

> ID：13676093
> 
> 赞同：1
> 
> 时间：2012-12-03T01:50:29.077
> 
> 标签：android, 2d

我目前正在尝试为我的 Android App Dev 创建一个基于 Android 的 2D 游戏。上课，在完成布局并完成其他所有工作后，我意识到我不知道如何渲染图像以及如何为我的游戏设置滚动背景。

理念：

*   这将是一个非常简单的 2D 游戏
    *   柯比将成为主角（有点已经了解如何为图像制作动画）
    *   2 个敌人（希望他们走路。但由于项目在 4 天内到期，他们可以站立）
    *   柯比只能左右移动和跳跃（我稍后会弄清楚哈哈） -

这项研究 -

*   在过去的几天里，我找了大约 5~6 小时，但无法弄清楚
    *   我遇到的主要问题是我知道 Canvas/OpenGL 用于制作背景和渲染图像，但我找不到任何视频或更简单的教程来制作我想要的关卡滚动或代码。（如果你不知道kirby是什么，关卡滚动类似于mario风格，kirby xpos + = level xpos + 是我认为代码会是什么样的......）

是的，我知道这有点等到最后一分钟，但任何帮助将不胜感激！

再次感谢，加布

# c# - 在 VS 的主副本中加载 VS 加载项时出现问题

> ID：13676094
> 
> 赞同：1
> 
> 时间：2012-12-03T01:50:44.383
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio-addins

我正在测试由其他人创建的加载项，并将加载项应用程序调试属性设置为：

启动外部程序：C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe

/resetaddin Microsoft.VSAddin.Addin1

工作目录：C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\

在我将插件定义文件路径更改为指向 bin/addin.dll 后，我运行了它，它在 Visual Studio 的实验副本中运行良好。几分钟后我最终关闭了 Visual Studio 的两个副本，现在当我打开我的主副本时，即使我不再调试它，它也会自动加载这个加载项。所以这意味着我现在不能编辑插件，因为这个插件总是在使用中。有什么想法为什么将它安装到我的 vs now 主副本中，以及为什么我无法将它加载到实验副本中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T00:21:17.170

您应该将以下设置更改为仅在实验实例下部署：

首先`.Addin`从

**C:\Users[xyz]\Documents\Visual Studio 20[ij]\Addins\**

到

**C:\Users[xyz]\AppData\Roaming\Microsoft\VisualStudio[kl].0Exp\Addins\**

文件夹。

然后你应该添加*/RootSuffix Exp*开关来启动 exp。实例而不是带有调试的普通实例。`.Addin`您可以在开发/测试加载项时更改原始扩展名。

# java - 在两个图像之间快速切换？

> ID：13676098
> 
> 赞同：0
> 
> 时间：2012-12-03T01:51:28.127
> 
> 标签：java, image

我想使用两个快速切换的图像制作一个对象来张开嘴并关闭它。我尝试使用 for 循环，但它落后于我的游戏。

```
 if(direction == Constant.UP){

        ImageIcon i = new ImageIcon("src\\images\\pacman up.png");
        image = i.getImage();

        ImageIcon i2 = new ImageIcon("src\\images\\pacman left.png");
        image = i2.getImage();

        }
 G.drawImage(image, x, y, 20,20,null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:19:38.973

Swing 中的任何动画都需要考虑[Event Dispatching Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)。

您不应在 EDT 的内容中执行任何可能阻塞它的操作（例如循环或 I/O），因为这将阻止 EDT（除其他外）处理绘制请求。

您应该始终使用能够支持双缓冲的表面，例如`JPanel`这将有助于消除闪烁

下面使用 a`javax.swing.Timer`在两个图像之间切换...

![在此处输入图像描述](../Images/d063b1862c25bcf08f077cb6c880fe54.png)![在此处输入图像描述](../Images/817ac5767eca855cee756fead78e7cac.png)

```
public class TestPacMan {

    public static void main(String[] args) {
        new TestPacMan();
    }

    public TestPacMan() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PacManPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PacManPane extends JPanel {

        private BufferedImage pacOpened;
        private BufferedImage pacClosed;
        private BufferedImage frame;
        private boolean opened = true;

        public PacManPane() {
            try {
                pacOpened = ImageIO.read(new File("PC-Closed.png"));
                pacClosed = ImageIO.read(new File("PC-Opened.png"));
                frame = pacOpened;
            } catch (IOException exp) {
                exp.printStackTrace();
            }

            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    opened = !opened;
                    frame = opened ? pacOpened : pacClosed;
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();

        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(500, 500);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (frame != null) {
                int x = (getWidth() - frame.getWidth()) / 2;
                int y = (getHeight() - frame.getHeight()) / 2;
                g2d.drawImage(frame, x, y, this);
            }
            g2d.dispose();
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:57:56.680

不要每次都创建图标。在启动时创建两个图像，并在运行时来回切换。

```
if(direction == Constant.UP){
    image = open;
}else {
    image = closed;
}

G.drawImage(image, x, y, 20,20,null); 
```

# cuda - CUDA 内核计时策略：优点和缺点？

> ID：13676102
> 
> 赞同：1
> 
> 时间：2012-12-03T01:51:47.537
> 
> 标签：cuda, gpgpu, nvidia, benchmarking

在为 CUDA 内核计时时，以下内容不起作用，因为内核在执行时不会阻止 CPU 程序执行：

```
start timer
kernel<<<g,b>>>();
end timer 
```

* * *

我已经看到了三种（成功）定时 CUDA 内核的基本方法：

(1) 两个 CUDA eventRecords。

```
float responseTime; //result will be in milliseconds
cudaEvent_t start; cudaEventCreate(&start); cudaEventRecord(start); cudaEventSynchronize(start);
cudaEvent_t stop;  cudaEventCreate(&stop);
kernel<<<g,b>>>();
cudaEventRecord(stop); cudaEventSynchronize(stop);
cudaEventElapsedTime(&responseTime, start, stop); //responseTime = elapsed time 
```

(2) 一个 CUDA 事件记录。

```
float start = read_timer(); //helper function on CPU, in milliseconds
cudaEvent_t stop;  cudaEventCreate(&stop);
kernel<<<g,b>>>();
cudaEventRecord(stop); cudaEventSynchronize(stop);
float responseTime = read_timer() - start; 
```

(3) deviceSynchronize 代替 eventRecord。（可能仅在在单个流中使用编程时有用。）

```
float start = read_timer(); //helper function on CPU, in milliseconds
kernel<<<g,b>>>();
cudaDeviceSynchronize();
float responseTime = read_timer() - start; 
```

我通过实验验证了这三种策略产生相同的时序结果。

* * *

问题：

*   **这些策略的权衡是什么？这里有什么隐藏的细节吗？**
*   **除了在多个流中计时多个内核之外，使用两个事件记录和`cudaEventElapsedTime()`函数有什么好处吗？**

* * *

您可能可以使用您的想象力来弄清楚是什么`read_timer()`。尽管如此，提供一个示例实现也无妨：

```
double read_timer(){
    struct timeval start;
    gettimeofday( &start, NULL ); //you need to include <sys/time.h>
    return (double)((start.tv_sec) + 1.0e-6 * (start.tv_usec))*1000; //milliseconds
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:18:30.240

您似乎已经排除了大多数差异，因为您说对于您展示的相对简单的情况（可能不完全正确，但我理解您的意思）和“除了时间（复杂序列）之外，它们都产生相同的结果。 ..” 第一种情况显然更好。

一种可能的区别是 windows 和 linux 之间的可移植性。我相信您的示例 read_timer 函数是面向 linux 的。您可能可以制作一个“可移植”的 read_timer 函数，但 cuda 事件系统（方法 1）是可移植的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T04:45:11.947

选项 (1) 使用 cudaEventRecord 对 CPU 进行计时。这是非常低效的，我不鼓励为此目的使用 cudaEventRecord。cudaEventRecord 可用于计时 GPU 推送缓冲区时间以执行内核，如下所示：

```
float responseTime; //result will be in milliseconds
cudaEvent_t start;
cudaEvent_t stop;
cudaEventCreate(&start);
cudaEventCreate(&stop);

cudaEventRecord(start);
kernel<<<g,b>>>();
cudaEventRecord(stop);
cudaEventSynchronize(stop);
cudaEventElapsedTime(&responseTime, start, stop); //responseTime = elapsed time 
```

如果您将多个工作项提交到多个流，则需要稍微更改代码。我建议阅读[NVVP 和计数器报告的时间差异的答案](https://stackoverflow.com/questions/12497619/difference-in-time-reported-by-nvvp-and-counters/)

对于给定的示例，选项 (2) 和 (3) 类似。选项（2）可以更灵活。

# bash - 使用 ls，如何列出文件而不打印扩展名（点后的部分）？

> ID：13676108
> 
> 赞同：42
> 
> 时间：2012-12-03T01:52:32.673
> 
> 标签：bash, ls

假设我有一个包含一些文件的目录：

```
$ ls
a.c  b.c  e.c  k.cpp  s.java 
```

如何在没有文件扩展名的情况下显示结果（点后面的部分，包括那个点）？像这样：

```
$ <some command>
a
b
e
k
s 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-12-03T01:56:52.883

使用 sed？

```
ls -1 | sed -e 's/\..*$//' 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-03T01:56:22.873

```
ls | while read fname 
do
    echo ${fname%%.*}
done 
```

试试看。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-05-27T08:37:19.593

```
ls -a | cut -d "." -f 1 
```

男 (1) 切

非常方便， -d 开关定义了分隔符和 -f 你想要的字段。

编辑：包括[Riverfall 的](https://stackoverflow.com/users/5039637/riverfall)场景也是小菜一碟，因为 cut 也可以从结尾开始，尽管逻辑有些不同。这是一个示例，其中包含一堆具有随机名称的文件，有些带有两个点，有些带有一个点，有些没有扩展名：

```
runlevel0@ubuntu:~/test$ ls
test.001.rpx  test.003.rpx  test.005.rpx  test.007.rpx  test.009.rpx  testxxx
test.002.rpx  test.004.rpx  test.006.rpx  test.008.rpx  test_nonum    test_xxx.rtv

runlevel0@ubuntu:~/test$ ls | cut  -d "." -f -2
test.001
test.002
test.003
test.004
test.005
test.006
test.007
test.008
test.009
test_nonum
testxxx
test_xxx.rtv 
```

*在字段编号之前*使用减号可以消除所有但指定的字段（在这种情况下为 1,2）并将其放在后面使其从末尾开始计数。

除了字段之外，此相同的表示法还可用于偏移量和字符（请参阅手册页）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-07T13:55:33.647

如果您已经知道文件的扩展名，则可以使用[`basename`](https://linux.die.net/man/1/basename)手册页中的 , ：

> basename - 从文件名中去除目录和后缀

不幸的是，如果您尝试过滤单个扩展名，它最有用，在您的情况下，命令是：

```
basename -s .c -a $(ls *.c) && basename -s .cpp -a $(ls *.cpp) && basename -s .java -a $(ls *.java) 
```

输出：

```
a
b
e
k
s 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-29T21:24:59.923

```
for f in *; do printf "%s\n" ${f%%.*}; done 
```

[为什么它有效？](http://tldp.org/LDP/abs/html/string-manipulation.html)

> `${string%%substring}`从 $string 后面删除 $substring 的最长匹配。

这将处理`mypackage.pkg.tar.xz`-->`mypackage`例如。

相比之下：

> ${string%substring} 从 $string 后面删除 $substring 的最短匹配。

那只`${string%substring}`会删除最后的扩展名，即 `mypackage.pkg.tar.xz`-->`mypackage.pkg.tar`

在旁注中，`printf`优先使用 to `echo`。语法稍微复杂一些，但它适用于更广泛的系统。

如果您只想查看文件而不是目录：

```
for f in *; do if [[ -f ${f} ]]; then printf "%s\n" ${f%%.*}; fi; done 
```

# php - 简单的 PHP 注册表单 - 工作了几个月，没有任何改变，现在 mysql INSERT 失败

> ID：13676110
> 
> 赞同：-1
> 
> 时间：2012-12-03T01:52:54.210
> 
> 标签：php, registration

几个月来，这张注册表就像一个魅力。我什么都没改变。现在，它通过了重复名称、电子邮件和密码检查的所有条件，然后失败到`INSERT`mysql 并返回`"An error has occurred. Your account was not created."`我不明白为什么。语法改变了还是什么？

```
 <div id="backdrop"></div>
    <div id="register">    
    <img src="http://www.staketheclaim.com/wp-content/themes/retlehs-roots-c526a84/dropbox/2012/rotate/header<?php echo(rand(1,4)); ?>.png" style="margin-left: -25px;margin-top: -20px;" />
    <div id="regi" style="width:400px;float: right;">
    <?php 
        if ($username && $userid) {
         echo "<div id='log-re' style='margin-left: 6px;width: 413px;'><h2>You must logout to register a new account. Not your Account?</h2>" . "<br /><br /><div id='cta'><a href='http://www.staketheclaim.com/logout/' class='button' style='padding-left: 36px;font-size: 24px;top: 2px;right: -160px;'>Logout Now</a></div></div>";    
        }
         else {
    if ($_POST['registerbtn']) {
         $getuser = $_POST['user'];
         $getemail = $_POST['email'];
         $password = $_POST['pass'];
         $getretypepass = $_POST['retypepass'];
         if ($getuser) {
             if(strpos($getuser, ' ') > 0 == false ){
             if ($getemail) {
                   if ($password) {
                         if ($getretypepass) {
                                if ( $password === $getretypepass) {
                                      if ( (strlen($getemail) >= 7) && (strstr($getemail, "@")) && (strstr($getemail, "."))){
                                            require("base.php");
                                            $query = mysql_query("SELECT * FROM users WHERE username='$getuser'");
                                            $numrows = mysql_num_rows($query);
                                            if ($numrows == 0) {
                                                 $query = mysql_query("SELECT * FROM users WHERE email='$getemail'");
                                            $numrows = mysql_num_rows($query);
                                            if ($numrows == 0) {
                                                $password = md5(md5("ss3verds4g".$password."ss357rd5sg"));
                                                $date = date("F d Y");
                                                $code = md5(rand());
                                        $bio = "Bio";
                                    $location = "Location";
                                                mysql_query("INSERT INTO users VALUES (
                                                              '','$getuser', '$password', '$getemail', '0', '$code', '$date', '$bio', '$location', '1'
                                                         )");
                                                         $query = mysql_query("SELECT * FROM users WHERE username='$getuser'");
                                                         $numrows = mysql_num_rows($query);
                                                         if  ($numrows == 1){
                                                               $site = "http://www.staketheclaim.com";
                                                               $webmaster = "noreply <noreply@staketheclaim.com>";
                                                                $headers = "From: $webmaster";
                                                                 $subject = "Activate Your Account";
                                                                 $message  = "Thanks for registering. Click the link below to activate your account.\n";
                                                                 $message .= "$site/activate/?user=$getuser&code=$code\n";
                                                                 $message .= "You must activate your account to login.";
                                                                 if (mail($getemail, $subject, $message, $headers )) {
                                                                          $errormsg = "You have been registered. You must activate your account from the activition link send to <b>$getemail</b>.";
                                                                          $getuser = "";
                                                                          $getemail = "";
                                                                     }
                                                                        else 
                                                             else 
                                                                   $errormsg ="An error has occured. Your account was not created.";
                                            }
                                            else
                                                $errormsg ="Their is already a user with that email.";
                                            }
                                            else
                                                $errormsg ="Their is already a user with that username.";
                                            mysql_close;
                                            }
                                            else
                                                $errormsg = "You must enter a valid email address to register.";
                                  }
                                  else
                                     $errormsg = "Your passwords did not match.";
                      } else 
                              $errormsg = "You must retype you password to register.";
                } else 
                       $errormsg = "You must enter a password to register.";
            } else
                  $errormsg = "You must enter you email to register.";
         } else
              $errormsg = "Your username cannot have any spaces.<br />";
      } else
          $errormsg = "You must enter a username to register.<br />";
    } $form = "<form action='' method='post' style='margin-top:-20px;'>
    <h2>Sign up for StakeTheClaim™.<br /> It's free!</h2>
    <br />
    <font color='red'>$errormsg</font>
    <br />
    <br />
    Username:
    <br />
    <input type='text' name='user' value='$getuser' style='' />
    <br />
    <br />
    Email:
    <br />
    <input type='text' name='email' value='$getemail' />
    <br />
    <br />
    Password:
    <br />
    <input type='password' name='pass' value='' />
    <br />
    <br />
    Re-Password:
    <br />
    <input type='password' name='retypepass' value='' />
    <br />
    <input type='submit' name='registerbtn' value='Register' />
    </form>";
    echo $form;
    }
    ?></div></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:18:55.773

这可能是一个 mysql 数据类型问题（好吧，确实是限制）。你说它失败了，`update`但我只看到一个`insert`声明。

`users`正在运行插入的表上的列类型是什么？

基本上，如果达到列类型的限制，插入就会失败。这与你所说的一致。

编辑：另外，PHP 正在折旧`mysql_*`调用。切换到任何一个`mysqli_*`或另一个替代方案，例如`PDO`. 转换`mysqli`到此代码很容易，但是您的代码需要进行全面审查，它充满了问题。你运行的是什么版本的PHP？

# opencv - 机器学习函数的响应？

> ID：13676112
> 
> 赞同：1
> 
> 时间：2012-12-03T01:53:29.767
> 
> 标签：opencv, machine-learning, svm

[使用此处](http://docs.opencv.org/modules/ml/doc/ml.html)解释的任何机器学习功能时。它们都遵循 cvStatModel 的格式。

例如 NormalBayes 的 train 函数是通过以下方式实现的：

```
CvNormalBayesClassifier::train(const Mat& trainData, const Mat& responses, const Mat& varIdx=Mat(), const Mat& sampleIdx=Mat(), bool update=false ) 
```

该文档告诉您查看 cvStatModel 以获取有关参数的详细信息。

我不明白`responses`应该采取什么措施？我知道这`trainData`是我们用于使用词袋训练系统的数据，但是在响应中放置什么？

在关于词袋的示例中，响应元素的处理方式如下：

```
float label=atof(entryPath.filename().c_str());
labels.push_back(label);

NormalBayesClassifier classifier;
classifier.train(trainingData, labels); 
```

所以在这里图像的文件名被转换为双精度并用作`responses`元素。

我不明白这一点，对此感到困惑。有人可以解释一下该`responses`元素应该采用什么吗？为什么`atof`在上面的例子中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T15:16:18.910

这些模型是有监督的机器学习技术，这意味着训练模型不仅需要训练数据（即测量向量），还需要与每个样本相关的标签（或连续值）。例如，如果您尝试检测包含猫的图像，您有一个训练集，例如 500 个不包含猫的图像和 500 个包含猫的图像。您计算所有 1000 张图像的描述符，并为每个类别分配一个数字（按照惯例，“非猫”为 -1，“猫”为 1）。然后，响应将是 1000x1 整数的矩阵，前 500值为 -1，而其余的值为 1。

在您的示例中， atof 用于将目录名称转换为唯一编号，表示类别，因为训练示例可能按文件夹（文件夹 cat、dogs、bikes 等）排序。

# javascript - 如何让页面在转发到另一个页面之前等待？

> ID：13676113
> 
> 赞同：0
> 
> 时间：2012-12-03T01:53:41.483
> 
> 标签：javascript, jquery, ajax

我目前正在成功重定向到主页，基于成功我想让页面在重定向发生之前等待 30 或 50 秒，并且我想在等待时检查是否发生了 500 内部错误消息。

```
 $(function() {  
                 $("#save").click(function() {  

                    $.ajax({  
                        type: "POST",  
                          url: "cng.json",  
                          data: json_data,  
                          contentType : 'application/json',
                           success: function(data, textStatus, xhr) {                          
                                console.log(arguments);
                                console.log(xhr.status);
                                alert("Your changes are being submitted: "+ textStatus +" : "+ xhr.status);
//modal window message
    $('<div id="loading">Loading...</div>').insertBefore('#myform');
                        // add code here to wait for 30 sec before redirecting and check for 500 error code     
                                 location.reload(true);

                           },

                            error:function(jqXHR, textStatus, errorThrown) {
                          alert( jqXHR.responseText+" - " +errorThrown + " : " +jqXHR.status);                       

                           }
                        }); 

                  });  
                }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:00:19.900

只是使用[超时](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)？

```
setTimeout(function() {
    location.reload(true);
}, 30000); 
```

顺便说一句，30 秒很长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T01:59:26.250

我会在 ajax 调用被触发时定义一个标志，然后在你的成功中放入一个 setTimeout。

```
setTimeout(check_redirect, 30000); 
```

如果错误触发，则将标志设置为 false

当计时器用完时，您的回调将被触发，检查标志并酌情继续：

```
function check_redirect()
{
   if(flag===true)
   {
      location.reload(true);
   }
} 
```

# django - 如何在 Django 中将 annotate() 与 Haystack 一起使用？

> ID：13676115
> 
> 赞同：2
> 
> 时间：2012-12-03T01:54:13.873
> 
> 标签：django, django-haystack

我有一个用 hatstack 搜索的函数，我需要获取 haystack 在数组中获取的每个对象的注释，我有这个：

```
def search(request):
if 'q' in request.GET and request.GET['q']:
    q = request.GET['q']
    results = SearchQuerySet().auto_query(q)
    things = []
    for r in results:
        things.append(r.object)
    return render_to_response('resultados.html',
        {'things': things, 'query': q}, context_instance=RequestContext(request)) 
```

我如何将每个对象的评论数量附加到结果中？

如果我添加注释，调试器会抛出我：SearchQuerySet has not 'annotate' attribute

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T07:53:44.267

`SearchQuerySet`不是你熟悉的 ORM 查询集。它只会模仿它。注释对搜索引擎也没有意义。您需要将已经准备好的数据放入索引中。

只需使用 ORM 进行另一个查询。

# jquery - 缺少 jquery ajax 成功设置

> ID：13676117
> 
> 赞同：0
> 
> 时间：2012-12-03T01:54:27.507
> 
> 标签：jquery

我有一个简单的复选框，可以通过查询数据库来选中或关闭。用户可以更改此值，我通过发送请求`ajax`。该 url 很古怪，因为它是一个 Joomla 组件（对于这个问题并不重要，但以防万一）。

```
$(function() {

$("#iButton").iButton();

$('#iButton').change(function() {
    var checkedLength = $(this + ':checked').length;
    if(1 == checkedLength){
        $.ajax({
            url: 'index.php?option=com_mycomponent&task=globaldetection&id_hash=<?php echo $id_hash; ?>&global_monitoring='+checkedLength+'&format=raw'
        });
    } else {
        $.ajax({
            url: 'index.php?option=com_mycomponent&task=globaldetection&id_hash=<?php echo $id_hash; ?>&global_monitoring='+checkedLength+'&format=raw'
        });
    }
});

});

<?php
//highlight whether the checkbox is on or off
if ($userstatus == "ENABLED") //get this value from server
{
    //turned on
    $global_monitoring = "checked=\"checked\"";
}
else
{
    $global_monitoring = "";
}

?>
    <div class="dropshadow">
    <p id="iButtontext">
      <input type="checkbox" id="iButton" <?php echo $global_monitoring; ?> name="iButton_checkbox" />
    </p>
    </div> 
```

这工作正常，正如我所料，但我在这里有几个问题：

1.  `ajax`我根据条件复制该功能两次。有没有更好的方法来做到这一点或完全可以接受？
2.  我只传入 url 而没有其他设置。我一直使用该`success`设置，但在这种情况下，我不需要做其他响应。我知道这是可选的，但那时我应该做其他事情吗？
3.  我应该传递给ajax的任何其他设置？它似乎太……简单。

任何指导表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:25:53.523

您根本不需要 if/else 结构，因为在两个分支中您都有相同的代码行，所以如果您只是将那行代码单独放置，它会起作用（它仍然会使用 的值`checkedLength`）。

但是，`$(this + ':checked').length`没有意义 - 您的选择器将*字符串连接到* *object*`':checked'`的末尾。我不知道目前这会如何工作。将结果作为“长度”的等效方法是，这有点笨拙。或者您可以使用 将其作为布尔值进行测试，除非这比执行相同工作时所需的复杂得多。 *`this``$(this).filter(':checked').length``if ($(this).is(':checked'))``this.checked`*

 *鉴于您可以直接获得检查状态，`this.checked`我认为以下更简单（并且肯定更有效）：

```
$('#iButton').change(function() {
    $.ajax({
       url: 'index.php?option=com_mycomponent&task=globaldetection&id_hash=<?php echo $id_hash; ?>&global_monitoring='
            + (this.checked ? 1 : 0) + '&format=raw'
    });
}); 
```

（我假设`.length`您最初使用的只能是`0`，或者`1`因为事件位于您通过 id 选择的元素上。）

> *“我只传递 url 而没有其他设置。我一直使用成功设置，但在这种情况下，我不需要做其他响应。我知道这是可选的，但我应该在那时做其他事情？”*

不。如果您不需要对成功执行任何操作，则不要指定成功回调 - 不过，指定错误回调可能是明智之举，以防调用因某种原因无法正常工作。*

# android - 表格上的 CSS 背景渐变在 Android 4.0 上的某些元素上留下额外的边框

> ID：13676121
> 
> 赞同：0
> 
> 时间：2012-12-03T01:54:45.630
> 
> 标签：android, css, gradient, css-tables

我有几个 4 列表，我通过 CSS 添加背景渐变 -

```
tr, td {
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #335781), color-stop(100%, #00244e)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top, #335781 0%, #00244e 100%); /* Chrome10+,Safari5.1+ */
    background: -moz-linear-gradient(top, #335781 0%, #00244e 100%); /* Firefox 3.6+ */
    background: linear-gradient(top, #335781 0%, #00244e 100%); /* W3C */
} 
```

这在 Chrome 和 Firefox 中效果很好，并为整个表格行提供了线性渐变。但是，当在库存浏览器中的 Android 4.0 设备上查看时，我最终会看到每个标签之间的纯色边框。我已经完成了所有常见的事情来确保没有边框：`cellpadding=0 cellspacing=0`在 table 标记上，以及`border-collapse: collapse, border-spacing: 0`，以及`border: 0`在 table 上的样式表中。只是为了好玩，我还尝试了 -webkit-border-image 并将其设置为相同的渐变。

在这一点上我很沮丧。任何其他想法如何摆脱这个额外的边框/间距？

# android - Android App 在模拟器中运行但显示“未安装”

> ID：13676124
> 
> 赞同：1
> 
> 时间：2012-12-03T01:55:10.627
> 
> 标签：android, eclipse, adb, android-4.2-jelly-bean

我可以在 Eclipse 的模拟器上运行我的应用程序并做事。当我在模拟器中进入“主页”并尝试再次运行应用程序（通过单击应用程序文件夹中的图标）时，它显示“应用程序未安装”

编辑：我也没有被提示授予设备本身的权限（模拟器或 Nexus 7）

此外，当我将 apk 导出到真实设备（运行 4.2.1 的nexus 7）时，该应用程序无法运行，并且表明它未安装。有什么想法吗？

这是清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.killerapprejji"
  android:versionCode="1"
  android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="14"
    android:targetSdkVersion="16" />
<permission android:name="NFC" android:permissionGroup="NFC"></permission>

<application
    android:icon="@drawable/ninjahead"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:allowClearUserData="true" android:logo="@drawable/ninjahead" android:persistent="true" android:permission="android.permission.NFC">
    <activity android:name=".MainActivity" android:label="@string/title_activity_main">
        <intent-filter>
          <action android:name="android.nfc.action.NDEF_DISCOVERED"/>
          <data android:mimeType="application/com.killerapprejji.attacked"/>
          <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity>
    <activity android:name=".SplashScreen" android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER"/>  
        </intent-filter>
    </activity>
    <activity android:name=".AttackActivity" android:theme="@style/AppTheme" android:label="@string/attack_button"></activity>
    <activity android:launchMode="standard" android:screenOrientation="portrait" android:label="@string/menu_settings" android:alwaysRetainTaskState="true" android:noHistory="false" android:description="@string/menu_settings" android:configChanges="keyboard" android:theme="@style/AppTheme" android:parentActivityName="@string/title_activity_main" android:icon="@drawable/ninjahead" android:name=".SetInfo"></activity>
    <activity android:name=".DefendActivity" android:label="@string/defend_button" android:theme="@style/AppTheme"></activity>
    <activity android:name="DisplayInteractions" android:theme="@style/AppTheme" android:label="@string/Stats" android:parentActivityName="@string/title_activity_main"></activity>
</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T06:32:47.843

有两个问题：

1）我需要

```
<uses-permission ... /> 
```

代替

```
<permission ... /> 
```

2)

```
<application ... android:permission="android.permission.NFC"> 
```

不需要包含第二部分。

# javascript - Javascript 如果 url 然后图像

> ID：13676125
> 
> 赞同：2
> 
> 时间：2012-12-03T01:55:13.687
> 
> 标签：javascript, image, url, tumblr

**你好，** 我对javascript不太了解，具体一点也不多，而且我是法国人（这意味着对不起我的英语）。

因为我对 html 和一切都不太了解，所以我只是在 tumblr 现有主题上更改 css 和 html（我知道这不是最好的解决方案，但它对我有用，我正在慢慢提高我对此的了解世界）

因此，在 tumblr 中，您已经创建了多个页面，例如使用相同标签重新组合所有帖子的页面，此页面称为[http://myblog.tumblr.com/tagged/mytag](http://myblog.tumblr.com/tagged/mytag)

**这是我的问题：我想更改每个页面的标题！**

我无法访问 php 代码（这似乎是最好的解决方案......）当我有一个标题时：

```
<body>
  <div id="header">
     <a href="/"><img src="{image:Header}"/></a> 
  </div>
</body> 
```

我已经编写了 css 代码，这样我的标题对我来说看起来不错

为了回答我的问题，我尝试了 javascript：

```
<body>
  <div id="header">
    <script>

var image = new Array("{image:Header}", "http://static.tumblr.com/my-other-image.jpg")

if(document.URL.indexOf("/") >= 0) {
    image.src = "{image:Header}"
    }

if(document.URL.indexOf("/tagged/mytag1") >= 0) {
    image.src = "http://static.tumblr.com/my-other-image.jpg"
    }

    </script>            
  </div>
</body> 
```

显然它没有用，你可能会在看我写的东西时笑...因为我只有 3 或 4 页我想更改，我可以接受带有太多代码的“肮脏解决方案”，并且我只是认为我需要所有其他页面的“其他”！

谢谢你告诉我如何让它工作，很抱歉花你一些时间来做这样一件简单的事情，这甚至是不可能的。很抱歉用我糟糕的英语谈论我的生活。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:02:13.283

您必须创建一个`image`元素，然后附加到`dom`：

```
<body>
    <div id="header"></div>
    <script>
        var uris = ["{image:Header}", "http://static.tumblr.com/my-other-image.jpg"];
        var image = document.createElement("img");
        if (document.URL.indexOf("/") >= 0) {
            image.src = uris[0]
        }
        if (document.URL.indexOf("/tagged/mytag1") >= 0) {
            image.src = uris[1]
        }
        document.getElementById("header")
            .appendChild(image);
    </script>
</body> 
```

# python - 机械化：仅跟随 URL 中带有特定元素的链接

> ID：13676127
> 
> 赞同：0
> 
> 时间：2012-12-03T01:55:30.973
> 
> 标签：python, beautifulsoup, urllib2, mechanize

学习 Mechanize：我想浏览一个新闻站点，并且只关注链接中带有 a`?sid`的链接。我似乎在 Mechanize 文档上找不到太多内容。

```
import mechanize
br = mechanize.Browser()
response = br.open("http://www.ksl.com")
target_url = 'http://www.ksl.com/?sid=23201788&nid=711&title=vampire-on-the-loose-in-serbia'

for link in br.links():
    print link.text, link.lurl 
```

这就是我现在所拥有的。我希望 Mechanize 转到 KSL 的主页，打开 URL 中的每个链接，`?sid`然后在该 URL 中搜索目标 URL。然后返回，继续搜索页面上的不同链接。在首页的末尾，底部有一个“页码”，可以追溯到很远，所以我需要它转到“下一页”以扫描更多链接......所以我想看看哪个故事中包含目标 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:00:07.663

查看[urlparse](http://docs.python.org/2/library/urlparse.html)。

```
>>> from urlparse import urlparse
>>> target_url = 'http://www.ksl.com/?sid=23201788&nid=711&title=vampire-on-the-loose-in-serbia'
>>> parsed_url = urlparse(target_url)
>>> parsed_url
ParseResult(scheme='http', netloc='www.ksl.com', path='/', params='', query='sid=23201788&nid=711&title=vampire-on-the-loose-in-serbia', fragment='')
>>> if 'sid=' in parsed_url.query:
...     do_something() 
```

# php - Json解码，访问，显示并用ID分隔名称，每9个名称

> ID：13676128
> 
> 赞同：0
> 
> 时间：2012-12-03T01:55:34.540
> 
> 标签：php, arrays, json, decode

你好 :) 我给你下面的 Json 解码。 [http://pastebin.com/XqhTMWCS](http://pastebin.com/XqhTMWCS)

它展示了我最近的 10 场比赛。我需要为每场比赛获得我的 4 个队友，以及我的 5 个敌人。（名称）**当某人是队友时，他的“teamId”是 100，当某人是敌人时，“teamId”是 200**。我需要分开并展示它们。

比如：你在玩薇恩。你的团队是：

> sirjack1101 打冠军 ID 89
> 
> blablaa 玩 ID 22
> 
> blablaaa 玩 ID 23
> 
> blablaaaa 玩 ID 24

敌方队伍是：

> blablsaa 演奏 ID 31
> 
> bsadaaas 玩 ID 12
> 
> basdasdb 播放 ID 53
> 
> blablsad 演奏 ID 67
> 
> blablsav 演奏 ID 121

我只能找到第一个用户名：

```
$recent = "My json" ;
$rec    = file_get_contents($recent);
$recdat = json_decode($rec, true); 
$fellow = $recdat[gameStatistics][0][fellowPlayers][0][summonerName];
echo $fellow; 
```

而且我只能使用相同的代码获得我的第一个冠军名称......我需要你的帮助！:)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T09:19:59.750

听起来你只需要一个`foreach`循环来遍历所有玩家。

```
<?php
define('TEAMMATE_ID', 100);
define('ENEMY_ID', 200);

$teammates = $enemies = array();
foreach ($data['gameStatistics'][0]['fellowPlayers'] as $player) {
  if ($player['teamId'] == TEAMMATE_ID) {
    $teammates[] = $player['summonerName'] .' playing ID '. $player['championId'];
  }
  else if ($player['teamId'] == ENEMY_ID) {
    $enemies[] = $player['summonerName'] .' playing ID '. $player['championId'];
  }
}

// List of teammates.
print "Teammates:\n";
print implode("\n", array_slice($teammates, 0, 4));

// List of enemies.
print "Enemies:\n";
print implode("\n", array_slice($enemies, 0, 5));
?> 
```

希望我不会偏离基地...

# javascript - 如何将 DIV 的宽度固定为其父 TD

> ID：13676137
> 
> 赞同：1
> 
> 时间：2012-12-03T01:56:26.587
> 
> 标签：javascript, html

这是我希望在我的网站上看到的内容。具有主体宽度和三列的表格：20%、70%、10%。随着浏览器窗口大小的调整，表格也会改变，表格的列也会改变它们各自的宽度。

左列（宽度为 20%）包含一个 DIV 元素，其中包含一些文本：

```
<body style="width:100%;">
 <table style="width:100%;">
  <tr>
   <td style="width:20%">
    <div style="position:relative;">
     Here goes some text.  This is a lot of text and usually should wrap around inside of the DIV element.
    </div>
    ...
  </tr>
 </table>
</body> 
```

这一切都很好，包装和所有。现在，当用户向下滚动页面时，DIV 元素及其内容会向上滚动并滚出窗口。

我想要做的是在 DIV 离开可见区域之前将其“修复”到浏览器的顶部。当用户再次向上滚动时，DIV 应该从浏览器顶部脱离并恢复其正常位置。最终效果是 DIV 要么在可见区域内滚动，要么附加到浏览器的顶部。这是通过我附加到`onscroll`事件的简单 Javascript 回调实现的，它改变了 和 之间的`fixed`位置`relative`。工作也很好。

现在我唯一注意到的是 DIV 的宽度发生了变化！只要它沿着滚动并且只要DIV的位置是，它就等于父TD的宽度`relative`。Javascript 回调将位置更改`fixed` 为 DIV 的宽度更改并溢出到相邻表列的那一刻。

如何包含 DIV 的尺寸？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:26:42.697

感谢@abelito 的提示:) 结果证明解决方案比这更容易一些。当我改变它的位置时，我*确实*需要改变 DIV 元素的宽度，但由于 TD 有 20% 的宽度，我所要做的就是根据它的位置在 20% 和 100% 之间切换 DIV 的宽度价值。这是有效的Javascript：

```
var div_is_sticky = false;

window.onscroll = function() {
  var y = window.scrollY;
  if (y >= 250) {
    if (div_is_sticky) {
      // Do nothing.
    }
    else {
      var div = document.getElementById("submenudiv");

      div.style.position = "fixed";
      div.style.width = "20%";

      div_is_sticky = true;
    }
  }
  else if (y < 250) {
    if (div_is_sticky) {
      var div = document.getElementById("submenudiv");

      div.style.position = "relative";
      div.style.width = "100%";

      div_is_sticky = false;
    }
    else {
      // Do nothing.
    }
  }
} 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:07:51.010

一旦位置更改为固定，听起来您还必须控制 DIV 的宽度。如果您使用的是原始 javascript，请尝试将 element.style.width 更改为父级的 element.offsetWidth + 'px'。如果你使用 jquery，你应该使用 .width() 方法。链接：

[https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth](https://developer.mozilla.org/en-US/docs/DOM/element.offsetWidth)

[http://api.jquery.com/width/](http://api.jquery.com/width/)

如果用户向下滚动，不要忘记将宽度恢复为“100%”。

# iphone - 图像视图不推荐使用的方法

> ID：13676138
> 
> 赞同：0
> 
> 时间：2012-12-03T01:56:40.570
> 
> 标签：iphone, objective-c, ios

内容拉伸属性在 iOS 6.0 中已被弃用，我找不到似乎可以正常工作的替代方法。

这是在 iOS 6.0 中有效但已弃用的代码：

```
UIImageView *sectionsSeparator = [[UIImageView alloc] initWithFrame:CGRectMake(x, 0, separatorWidth, totalHeight)];
sectionsSeparator.image = [self imageForSectionsSeparator];
sectionsSeparator.contentStretch = CGRectMake(0, 0.25f, 1, 0.5f);
[self addSubview:sectionsSeparator]; 
```

我尝试了下面的代码，但图像没有正确排列：

```
UIImageView* sectionsSeparator = [[UIImageView alloc] initWithFrame:CGRectMake(x, 0, separatorWidth, totalHeight)];
[sectionsSeparator setImage:[[self imageForSectionsSeparator] resizableImageWithCapInsets:UIEdgeInsetsMake(0.0f, 0.25f, 1.0f, 0.5f)]];
[overlayView addSubview:sectionsSeparator]; 
```

也许我错过了一些东西，有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:07:20.303

被弃用并不意味着它停止工作，它只是意味着你应该更喜欢一个替代方案，但旧的方法仍然有效。

无论如何，如果你想避免被弃用的东西，你可以创建一个可拉伸的图像，因为它在文档中指定：

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/DeprecationAppendix/AppendixADeprecatedAPI.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)

编辑：

cap inset 方法与内容拉伸方法相反（它向后工作）。在内容拉伸上，您用矩形覆盖您想要拉伸的内容，这是一个示例：

[http://j0ris.tumblr.com/post/7345178587/uiview-contentstretch](http://j0ris.tumblr.com/post/7345178587/uiview-contentstretch)

但是，在**resizableImageWithCapInsets**上，您涵盖了您**不想**拉伸的内容。

> 在图像的缩放或调整大小期间，被帽子覆盖的区域不会被缩放或调整大小。相反，每个方向上未被帽覆盖的像素区域从左到右和从上到下平铺，以调整图像大小。

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html#//apple_ref/occ/instm/UIImage/resizableImageWithCapInsets)：

因此，您应该以不同的方式制作插图。

# python - 这是我关于使用 Python 进行拆分的另一篇文章的后续内容

> ID：13676141
> 
> 赞同：0
> 
> 时间：2012-12-03T01:57:00.227
> 
> 标签：python, python-3.x, split

在我无法让拆分工作之前。现在它正在工作，但只对列表列表的最后一个列表执行计算。我需要它来计算每个玩家的效率，而不仅仅是文件中的最后一个。

在计算之前我正在考虑一个while循环可能会解决我的问题，但我愿意接受建议。

```
def get_data_list (file_name):
    data_file = open(file_name, "r")
    data_list = []
    for line_str in data_file:

        # strip end-of-line, split on commas, and append items to list
        data_list =line_str.strip().split(',')

        gp=int(data_list[6])
        mins=int(data_list[7])
        pts=int(data_list[8])
        oreb=int(data_list[9])
        dreb=int(data_list[10])
        reb=int(data_list[11])
        asts=int(data_list[12])
        stl=int(data_list[13])
        blk=int(data_list[14])
        to=int(data_list[15])
        pf=int(data_list[16])
        fga=int(data_list[17])
        fgm=int(data_list[18])
        fta=int(data_list[19])
        ftm=int(data_list[20])
        tpa=int(data_list[21])
        tpm=int(data_list[22])

        efficiency = ((pts+reb+asts+stl+blk)-((fga-fgm)+(fta-ftm)+to))/gp        

        data_list.append (efficiency)

    return data_list

    file_name1 = input("File name: ")
    result_list = get_data_list (file_name1)
    print(result_list) 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:00:16.817

您`data_list`在每次迭代中重新定义：

```
data_list = []
for line_str in data_file:

    # strip end-of-line, split on commas, and append items to list
    data_list =line_str.strip().split(',') 
```

尝试将第一个更改`data_list`为类似`data = []`. 此外，您可以`with`在打开文件时使用，以便正确处理关闭之类的事情：

```
def get_data_list (file_name):
    with open(file_name, "r") as data_file:
        data = []
        for line_str in data_file:

            # strip end-of-line, split on commas, and append items to list
            data_list =line_str.strip().split(',')

            # Your definitions here...
            gp=int(data_list[6])
            # ...

            efficiency = ((pts+reb+asts+stl+blk)-((fga-fgm)+(fta-ftm)+to))/gp          
            data_list.append (efficiency)
            data.append(data_list)

    return data 
```

但是，您也可以查看[csv](http://docs.python.org/2/library/csv.html)模块 - 看起来您正在处理逗号分隔的值，并且该模块提供了一个非常好的接口来处理它们。

# meteor - 如何在 Meteor.http.call 中包含用户代理信息？MediaWiki 需要它

> ID：13676142
> 
> 赞同：6
> 
> 时间：2012-12-03T01:57:02.350
> 
> 标签：meteor

每当我调用服务器上的以下方法（CoffeeScript）时，我都会从维基百科得到“脚本应该使用带有联系信息的信息性用户代理字符串，否则它们可能会在没有通知的情况下被 IP 阻止”。如何在通话中包含用户代理信息？或者它是从 Meteor Accounts 中获取的（我还没有使用）？感谢您的任何帮助...

```
Meteor.methods
  wpSearch: (queryStr) ->
    result = Meteor.http.call "GET", "http://en.wikipedia.org/w/api.php",
      params:
        action: "query"
        list: "search"
        format: "json"
        srwhat: "text"
        srsearch: queryStr 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-22T05:21:48.750

为了向未来的访问者澄清之前的答案，Meteor.http.get 的语法如下：

```
result = Meteor.http.get("https://api.github.com/user", {
   headers: {
      "User-Agent": "Meteor/1.0"
   },
   params: {
      access_token: accessToken
   } 
}); 
```

注意 headers 选项周围的花括号和分隔 headers 和 params 选项的逗号（没有这些东西是语法错误）。此示例是 EventedMind 如何在 onCreateUser() 回调期间自定义 loginButtons 的一部分。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-03T01:59:52.583

只需在参数中设置[User-Agent](http://www.w3.org/Protocols/HTTP/HTRQ_Headers.html#user-agent)`headers`（参见[http://docs.meteor.com/#meteor_http](http://docs.meteor.com/#meteor_http)）

```
Meteor.methods
  wpSearch: (queryStr) ->
    result = Meteor.http.call "GET", "http://en.wikipedia.org/w/api.php",
      headers:
        "User-Agent": "Meteor/1.0"
      params:
        action: "query"
        list: "search"
        format: "json"
        srwhat: "text"
        srsearch: queryStr 
```

# r - 将 4 维数组转换为 R 中的 2 维数据集

> ID：13676143
> 
> 赞同：5
> 
> 时间：2012-12-03T01:57:03.560
> 
> 标签：r

我想将 4 维数组转换为 2 维数据集。我提供了两种方法的代码：一种方法使用涉及的蛮力方法，`cbind`第二种`rbind`方法使用嵌套的`for-loops`. 不过，我认为可能有更好的方法。感谢您的任何建议。

```
R <- 3    # regions
M <- 5    # sites
J <- 2    # samples
T <- 4    # years

# 4-dim example array

y <- array(NA, dim = c(M, J, T, R))

# region 1
y[,1,1,1] =  1; y[,2,1,1] =  2; 
y[,1,2,1] =  3; y[,2,2,1] =  4; 
y[,1,3,1] =  5; y[,2,3,1] =  6;
y[,1,4,1] =  7; y[,2,4,1] =  8;

# region 2
y[,1,1,2] =  9; y[,2,1,2] = 10; 
y[,1,2,2] = 11; y[,2,2,2] = 12; 
y[,1,3,2] = 13; y[,2,3,2] = 14;
y[,1,4,2] = 15; y[,2,4,2] = 16;

# region 3
y[,1,1,3] = 17; y[,2,1,3] = 18; 
y[,1,2,3] = 19; y[,2,2,3] = 20; 
y[,1,3,3] = 21; y[,2,3,3] = 22;
y[,1,4,3] = 23; y[,2,4,3] = 24;

# desired two-dimensional data set

z = read.table(text = "
 1  2  3  4  5  6  7  8
 1  2  3  4  5  6  7  8
 1  2  3  4  5  6  7  8
 1  2  3  4  5  6  7  8
 1  2  3  4  5  6  7  8
 9 10 11 12 13 14 15 16
 9 10 11 12 13 14 15 16
 9 10 11 12 13 14 15 16
 9 10 11 12 13 14 15 16
 9 10 11 12 13 14 15 16
17 18 19 20 21 22 23 24
17 18 19 20 21 22 23 24
17 18 19 20 21 22 23 24
17 18 19 20 21 22 23 24
17 18 19 20 21 22 23 24
", sep = "", header = FALSE)

# using cbind and rbind to convert 4-dimensional array to 2-dimensional data set

r1 <- cbind(y[,,1,1], y[,,2,1], y[,,3,1], y[,,4,1])
r2 <- cbind(y[,,1,2], y[,,2,2], y[,,3,2], y[,,4,2])
r3 <- cbind(y[,,1,3], y[,,2,3], y[,,3,3], y[,,4,3])

my.data <- rbind(r1,r2,r3)
my.data

# using nested for-loops to convert 4-dimensional array to 2-dimensional data set

m2 <- matrix(NA, nrow = M*R, ncol= J*T)

for(i in 1:R) {
for(j in 1:T) {

m2[(M*(i-1) + (1:M)), (J*(j-1) + (1:J))] = y[,,j,i]

}
}

m2

# basis for nested for-loops above

m3 <- matrix(NA, nrow = M*R, ncol= J*T)

m3[(M*0 + (1:M)), (J*0 + (1:J))] = y[,,1,1]
m3[(M*0 + (1:M)), (J*1 + (1:J))] = y[,,2,1]
m3[(M*0 + (1:M)), (J*2 + (1:J))] = y[,,3,1]
m3[(M*0 + (1:M)), (J*3 + (1:J))] = y[,,4,1]

m3[(M*1 + (1:M)), (J*0 + (1:J))] = y[,,1,2]
m3[(M*1 + (1:M)), (J*1 + (1:J))] = y[,,2,2]
m3[(M*1 + (1:M)), (J*2 + (1:J))] = y[,,3,2]
m3[(M*1 + (1:M)), (J*3 + (1:J))] = y[,,4,2]

m3[(M*2 + (1:M)), (J*0 + (1:J))] = y[,,1,3]
m3[(M*2 + (1:M)), (J*1 + (1:J))] = y[,,2,3]
m3[(M*2 + (1:M)), (J*2 + (1:J))] = y[,,3,3]
m3[(M*2 + (1:M)), (J*3 + (1:J))] = y[,,4,3]

m3 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T02:01:52.970

尝试了几次，但是：

```
matrix(aperm(y,c(1,4,2,3)),15) 
```

或更一般地说

```
matrix(aperm(y,c(1,4,2,3)),prod(dim(y)[c(1,4)])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-02T21:28:54.903

如果有人来这里寻找关于折叠到数组的类似问题，但对于大于维度 = 2 的数组，请使用 array() 而不是 matrix()，并使用 dim() 参数指定您想要的维度。也适用于上述问题的代码是：

```
array(aperm(y,c(1,4,2,3)), dim=c(15,8)) 
```

如果您希望输出为 3d 数组，则可以通过在 dim() 中添加一个附加值来轻松修改此设置。对于您的特定情况，可能不需要 aperm() 位，但您应该始终检查折叠数组是否符合您想要的顺序并相应地使用 aperm()。

# python - 从字谜中找到回文

> ID：13676145
> 
> 赞同：3
> 
> 时间：2012-12-03T01:57:40.613
> 
> 标签：python

我试图从生成的字谜列表中找到回文。这里的转折是我的初始输入是一个回文列表。我本质上是在尝试自动寻找回文，它是回文的字谜（不是家庭作业，只是一个英语书呆子）。

输入的原始回文将来自“pals.txt”，其中回文是行分隔的，并且已删除空格和非数字字符。我正在使用英英词典文件“dictionary.txt”来生成字谜。

我将不胜感激任何输入，因为我仍然是一个初级程序员。谢谢！

```
def isPalindrome(s):
    return s.lower() == s[::-1].lower()

def anagramchk(word,chkword):
    for letter in word:
        if letter in chkword:
            chkword = chkword.replace(letter, '', 1)
        else:
            return 0
    return 1

f0 = open('pals.txt', 'r')
f1 = open('dictionary.txt', 'r')
for line in f0:
    wordin = line
    for line in f1:
        line = line.strip()
        if len(line) >= 4:
            if anagramchk(line, wordin):
                if isPalindrome(line):
                    print line
f0.close()
f1.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:05:56.657

```
import collections

def isPalindrome(s):
    return s.lower() == s[::-1].lower()

def anagramchk(word,chkword):
    return sorted(word.lower()) == sorted(chkword.lower())

def allAnagrams(dictfilepath):
    answer = collections.defaultdict(list)
    with open(dictfilepath) as dictfile:
        for line in dictfile:
            word = line.strip().lower()
            answer[''.join(sorted(word))].append(word)
    return answer

def fetchAllAnagrams(wordin, anagrams):
    return anagrams[''.join(sorted(wordin.lower()))]

def main(dictfilepath, palsfilepath):
    anagrams = allAnagrams(dictfilepath)
    with open(palsfilepath) as palfile:
        for line in palfile:
            word = line.strip().lower()
            if isPalindrome(word):
                for anagram in anagrams[''.join(sorted(word))]:
                    if isPalindrome(anagram):
                        print "%s is an anagram of %s" %(anagram, word) 
```

假设你的文件路径是`'path/to/dictfile'`and `'path/to/palsfile'`，那么你可以调用`main`如下：

```
main('path/to/dictfile', 'path/to/palsfile') 
```

希望这可以帮助

# c# - 使整个 Web 应用程序动态化

> ID：13676150
> 
> 赞同：0
> 
> 时间：2012-12-03T01:58:05.770
> 
> 标签：c#, jquery, asp.net, web-applications, knockout.js

我了解 KnockoutJS 的基础知识，我可以轻松地使单个页面真正动态化...但是我要构建一个新的 Web 应用程序，我正在寻找有关如何使整个 Web 应用程序动态化的建议每个 viewModel 和 html 模板都是动态加载的，没有完整的页面请求，但 URL 仍应指示我在哪个页面上，或者带有主题标签，后跟路径，还是更好的东西？

我有点困惑：

*   是否有一些框架可以很好地与 knockoutJs 配合使用来帮助实现这一目标？
*   我可以在不担心 KnockoutJS 的情况下实现这一目标吗？
*   是否只是调整 viewModel 以智能方式动态加载和处置其他 viewModel 和模板的问题？
*   什么是最好的做法，我该怎么办？

非常感谢任何关于此的指针、链接或提示，谢谢！

这是一个例子，注意 URL 是如何变化的，新的内容是如何动画的，他们是怎么做的呢？ [https://www.pokki.com/app/Little-Alchemy](https://www.pokki.com/app/Little-Alchemy)

顺便提一句。我使用 ASP.Net MVC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:43:01.457

您在这里要求一些事情。

1.  路由框架
2.  外部模板。

有一个简单的插件可以帮助您处理后者：[Knockout.js 外部模板引擎](https://github.com/ifandelse/Knockout.js-External-Template-Engine)

对于前者，有一些可用的路由框架可以很好地与 KO 配合使用。您通常仍然需要对子 ViewModel 的获取/创建/处置做一些事情。路由框架可能会帮助您解决这个问题，或者它可能只是处理监视通常会导致导航的事件，并调用您提供的函数。

我希望看到一个完整的插入式路由框架，它允许对 url → ViewModel 映射进行更多的声明性定义，但还没有找到任何真正容易的东西。

我开始使用的那个叫做[Path.js](https://github.com/mtrpcic/pathjs)，但是你仍然需要做一些胶水代码。

# javascript - 为什么我的图像会被裁剪？

> ID：13676151
> 
> 赞同：0
> 
> 时间：2012-12-03T01:58:08.670
> 
> 标签：javascript, jquery, css

我正在使用运行良好的[iosslider](http://iosscripts.com/iosslider/)脚本，但我不知道为什么它会裁剪我的图像而不是调整它们的大小。这是我的 css 样式和 jquery 调用：

CSS：

```
.iosSlider {
/* required */
position: relative;
top: 0;
left: 0;
overflow: hidden;

width: 100%;
height: 300px;
}

.iosSlider .slider {
/* required */
width: 100%;
height: 300px;
}

.iosSlider .slider .slide {
/* required */
float: left;
} 
```

我的 jQuery 调用：

```
$('.iosSlider').iosSlider({
        snapToChildren: true,
        desktopClickDrag: true,
        keyboardControls: true,
        onSlideChange: slideChange
    }); 
```

HTML：

```
<div class = 'iosSlider'>   
    <div class = 'slider'>
        <div class="item">
            <img src="/some_img_1.png" />
        </div>
                <div class="item">
            <img src="/some_img_2.png" />
        </div>
    </div>
</div> 
```

知道为什么我不能让我的图像调整到 300 像素的高度吗？原件高 600 像素，因此它们被切成两半。我确定这是一个 CSS 问题，但我似乎无法找到它。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:48:35.927

您的 CSS 规则仅对包含图像的 div 应用高度。如果您希望图像大小为 300 像素高，请添加如下规则：

```
.iosSlider .slider .item img {
   height: 300px;
   width: auto;
} 
```

# python - 计算器减法导致无限循环

> ID：13676153
> 
> 赞同：0
> 
> 时间：2012-12-03T01:58:21.760
> 
> 标签：python, expression, infinite-loop, calculator

我正在开发一个接受用户输入的计算器。它必须解决以下表达式：

> 1+38*(!2)-5%37

我一直在研究加法和减法，但我遇到了一个问题。

我有一个循环正在寻找“+”或“-”符号。对于“+”它有效，但对于“-”，每当我解决像这样的表达式时

> 1-38

它让我进入一个无限循环，因为该表达式的结果是

> -37

并且循环不断将“-”符号识别为减法，但将其识别为负 37。

我该如何解决这个问题？

```
def symbols_exist(exp, symbols_list):
    """ Gets an expression string and a symbols list and returns true if any symbol
        exists in the expression, else returns false. """
    for s in symbols_list:
        if s in exp:
            return True
    return False

def BinaryOperation(exp, idx):
    """ Gets an expression and an index of an operator and returns a tuple with (first_value, operator, second_value). """
    first_value = 0
    second_value = 0

    #Get first value
    idx2 = idx -1
    while (idx2 > 0) and (exp[idx2] in string.digits):
        idx2 -=1

    first_value = exp[idx2:idx]

    #Get second value
    idx2 = idx +1
    while (idx2 < len(exp)) and (exp[idx2] in string.digits):
        idx2 += 1

    second_value = exp[idx+1:idx2]

    return (first_value, exp[idx], second_value)

def solve(exp):
    if not symbols_exist(exp, all_symbols):
        return exp

    idx = 0

    while idx < len(exp):
        if exp[idx] in string.digits:
            #Digit
            idx +=1
        elif exp[idx] in ("+", "-"):
            #Addition and Subtraction
            sub_exp = BinaryOperation(exp, idx)
            if sub_exp[1] == "+":
                value = int(sub_exp[0]) + int(sub_exp[2])
            else:
                value = int(sub_exp[0]) - int(sub_exp[2])

            value = str(value)

            exp = exp.replace(''.join(sub_exp), value)
            print exp

        return solve(exp) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:49:28.390

结合原始示例中的三个功能的可能解决方案。（编辑：刚刚意识到我发布的原始答案可以简化很多）

```
all_symbols = '+-'
def solve(expres):
    lhs, symbol, rhs = expres[0], None, ''
    for ch in expres[1:]:
        if symbol:
            rhs += ch
        elif ch in all_symbols:
            symbol = ch
        else:
            lhs += ch
    if symbol is '+':
        return int(lhs) + solve(rhs)
    if symbol is '-':
        return int(lhs) - solve(rhs)
    return int(expres)

print solve('1+5') 
```

还有另一种可能有用的解决方案

```
operations = [
    ('+', lambda a, b: a + b),
    ('-', lambda a, b: a - b)
    ]
def solve(exp):
    for symbol, operation in operations:
        p = exp.rfind(symbol)
        if p > 0:
            return operation(solve(exp[:p]), solve(exp[p + 1:]))
    return int(exp) 
```

# java - 如何使用来自 java 的参数运行 .exe 应用程序？

> ID：13676156
> 
> 赞同：0
> 
> 时间：2012-12-03T01:58:50.350
> 
> 标签：java

我想用两个参数运行 .exe 应用程序。它的 VB .exe 应用程序需要两个参数来执行吗？我尝试使用创建 .cmd 文件来执行 .exe 应用程序，它运行良好。

请查看运行 .cmd 文件的代码。启动***xx.exe ./aa.txt,2012***

在java中遵循相同的程序，但给出错误...请找到下面的小型java程序。

```
public class Invoke
{
 public static void main(String as[])
 Runtime r=Runtime.getRuntime();
 Processp=null;
 try

 {
  String s="...complie.exe";
  String d="...de.txt";
  String l="...foldername";
  p=r.exec(s,d,l);
  }
  catch(Exception e){
   } 
```

请指教...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:22:14.797

这是一个如何`jEdit`从 Java 启动程序和一些 txt 文件的示例：

```
import java.io.IOException;

public class Invoke {

    public static void main(String[] args) {
        try {
            Runtime.getRuntime().exec("C:/Program Files/jEdit/jedit.exe");
            Runtime.getRuntime().exec("notepad C:/Program Files/TechSmith/Camtasia Studio 7/TSCCinst.txt");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

} 
```

# mongodb - 如何使用 Mongolab 的 $oid 和 pymongo 查找文档？

> ID：13676158
> 
> 赞同：3
> 
> 时间：2012-12-03T01:59:25.543
> 
> 标签：mongodb, pymongo, mlab

我正在尝试这样做：

```
event = coll.find_one({"_id": {"$oid": event_id}}) 
```

其中 event_id 是来自 ObjectId 的字符串：

```
event_id='50bbd48eefbdd2a1e83bc440' 
```

但事件最终是空的。我确定这不是您在 pymongo 中查找具有 ObjectId 的文档的方式，但我已经搜索了一段时间，但还没有弄清楚如何。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T02:37:56.420

你必须转换`event_id`成`ObjectId`这样的：

```
from bson.objectid import ObjectId
event_id='50bbd48eefbdd2a1e83bc440'
event = coll.find_one({"_id": ObjectId(event_id)}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T01:18:32.097

`event_id`当使用您定义的 ObjectId 字符串按 id 搜索时，只需执行

```
event = coll.find_one(event_id) 
```

# c# - OpenXML SDK - xls

> ID：13676160
> 
> 赞同：1
> 
> 时间：2012-12-03T01:59:32.623
> 
> 标签：c#, openxml-sdk

我得到了 OpenXML SDK 来创建一个 .xlsx 文件。但是无论如何它可以创建一个xls文件。这意味着，当它要求打开一个 excel 文件时，它只接受 .xlsx 文件而不接受 .xls 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:04:44.740

.xls（或 BIFF）格式是专有的二进制格式。OpenXML 格式就是……XML。该格式旨在让任何人都可以阅读、查看或修改文件内容，而无需在计算机上使用 Excel。据我所知，您不能使用 OpenXML SDK 直接创建 BIFF 格式的 Excel 文件。

# ruby - 如果未选中，如何更新复选框？

> ID：13676163
> 
> 赞同：1
> 
> 时间：2012-12-03T02:00:03.097
> 
> 标签：ruby, sinatra, erb

我有一些复选框，它们的名称映射到我的 activerecord 模型中的列。问题是，当复选框被选中时，它们会出现在 Sinatra 的 params 数组中，效果很好。但是当它们被取消选择时，参数永远不会包含：checkbox => false。它只包含 :checkbox => true。因此，用户可以从取消选择变为选中，但反之亦然，因为 :checkbox => false 的参数哈希永远不会传递。

我觉得我在这里缺少一些基本的东西。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T21:18:37.337

HTML 表单中的[控件只有在“成功”时才会提交给服务器</a>。对于复选框，这意味着它已被选中。未选中的复选框不会被提交。这意味着在 Sinatra 中，如果它被选中，则`params[:the_checkbox]`value 要么是 HTML 中指定的复选框的值（如果你没有指定一个值，这将是默认值，即 string ），或者因为什么都没有已提交。`'on'``nil`](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)

 [显而易见的解决方案是显式检查`nil`，然后假设在这种情况下未选中复选框：

```
checkbox_value = params[:the_checkbox].nil? ? false : true 
```](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2) 

[另一种选择是利用](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)[表单数据的名称/值对按照它们在文档中出现的顺序发送到服务器的事实](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1)，并且当 Sinatra 在解析数据时看到重复的名称时，它将覆盖较早的值与较晚的值。这意味着您可以在 HTML 中执行以下操作：

```
<input type='hidden' name='the_checkbox' value='false' />
<input type='checkbox' name='the_checkbox' value='true' /> 
```

现在，如果未选中复选框，它将不会被提交，但隐藏的输入将被提交，如果选中，它将被提交，但将出现*在*具有相同名称的隐藏输入之后。结果是，如果已检查，则为`params[:the_checkbox]`字符串，如果未检查，则为字符串。（请注意，您可能仍需要将字符串转换为布尔值，具体取决于您对提交的数据所做的操作）。`'true'``'false'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:47:51.533

你可以做这样的事情：

```
post '/your-route' do
  params[:checkbox] ||= false

  # now do whatever you want with params[:checkbox]
end 
```

除非它已经定义并设置为，否则它的作用是分配`false`给。`params[:checkbox]``true`

# mysql - 为什么 Wordpress 数据库架构不使用外键？

> ID：13676165
> 
> 赞同：12
> 
> 时间：2012-12-03T02:00:15.010
> 
> 标签：mysql, sql, wordpress

今天我检查了 wordpress 数据库的表，但我找不到关联表的外键，谁能告诉我为什么 wordpress 没有外键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T02:12:39.927

WordPress 使用 MyISAM，因为它具有更多功能和更好的性能，但 MyISAM 不支持外键。这是一个权衡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T02:17:17.940

外键只是约束——它们更容易保持数据的完整性，但不需要关联表。Wordpress 使用 MySQL，MySQL 可以使用许多“引擎”来存储表，但 AFAIK 只有其中一个（InnoDB）支持外键。Wordpress 可能出于性能原因决定不使用它。

# postgresql - 如何使用准备好的语句在 postgresql 中插入带时区的时间戳？

> ID：13676168
> 
> 赞同：18
> 
> 时间：2012-12-03T02:00:22.507
> 
> 标签：postgresql, timestamp, prepared-statement, timestamp-with-timezone, value-of

我正在尝试使用准备好的语句将包含日期、时间和时区的字符串插入到带有我的数据库的时区字段的时间戳中。

问题是 Timestamp.valueof 函数没有考虑字符串包含的时区，因此会导致错误。接受的格式是 yyyy-[m]m-[d]d hh:mm:ss[.f...] ，其中没有提及时区。

那是导致错误的确切代码：

pst.setTimestamp(2,Timestamp.valueOf("2012-08-24 14:00:00 +02:00"))

有什么办法可以克服吗？？提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T18:50:52.267

基本问题是 java.sql.Timestamp 不包含时区信息。我认为它总是被假定为“本地时区”。

我能想到的解决方案是不在 PreparedStatement 中使用参数，而是在 SQL 中使用时区文字：

```
update foo
  set ts_col = timestamp with time zone '2012-08-24 14:00:00 +02:00'`; 
```

另一种可能的解决方案是将格式正确的字符串传递给使用 to_timestamp() 的 PrepareStatement：

```
String sql = "update foo set ts_col = to_timestamp(?, 'yyyy-mm-dd hh24:mi:ss')"; 
PreparedStatement pstmt = connection.prepareStatement(sql);
pstmt.setString(1, "2012-08-24 14:00:00 +02:00"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T17:55:08.150

我相信您可以在数据库中再使用一个字段，其中包括时区。并在获得这两个字段后手动计算时间

# php - 如何使用服务器生成的内容抓取网站？

> ID：13676170
> 
> 赞同：0
> 
> 时间：2012-12-03T02:00:28.947
> 
> 标签：php, web-crawler

我正在编写一个简单的 php 爬虫，它从网站获取数据并将其插入到我的数据库中。我从一个预定义的 url 开始。然后我浏览页面的内容（来自 php 的 file_get_contents）并最终`file_get_contents`在该页面的链接上使用。当我回显它们然后从我的浏览器自己打开它们时，我从链接中获得的 url 很好。但是，当我使用`file_get_contents`然后回显结果时，由于与从站点动态创建的服务器端数据相关的错误，该页面无法正确显示。回显的页面内容不包括我需要的服务器中列出的数据，因为它找不到该站点的必要资源。

似乎回显网页中的相对路径不允许生成所需的内容。

谁能在这里指出我正确的方向？

任何帮助表示赞赏！

到目前为止，这是我的一些代码：

```
function crawl_all($url)
{
    $main_page = file_get_contents($url);

    while(strpos($main_page, '"fl"') > 0)
    {   
        $subj_start  = strpos($main_page, '"fl"');      // get start of subject row
        $main_page   = substr($main_page, $subj_start); // cut off everything before subject row
        $link_start  = strpos($main_page, 'href') + 6;  // get the start of the subject link
        $main_page   = substr($main_page, $link_start); // cut off everything before subject link
        $link_end    = strpos($main_page, '">') - 1;    // get the end of the subject link
        $link_length = $link_end + 1;             
        $link = substr($main_page, 0, $link_length);    // get the subject link

        crawl_courses('https://whatever.com' . $link);      
    }
}

/* Crawls all the courses for a subject. */
function crawl_courses($url)
{
    $subj_page = file_get_contents($url);
    echo $url;           // website looks fine when in opened in browser
    echo $subj_page;     // when echo'd, the page does not contain most of the server-side generated data i need

    while(strpos($subj_page, '<td><a href') > 0)
    {
        $course_start = strpos($subj_page, '<td><a href');
        $subj_page    = substr($subj_page, $course_start);
        $link_start   = strpos($subj_page, 'href') + 6;
        $subj_page    = substr($subj_page, $link_start);
        $link_end     = strpos($subj_page, '">') - 1;
        $link_length  = $link_end + 1;
        $link = substr($subj_page, 0, $link_length);

        //crawl_professors('https://whatever.com' . $link);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T07:51:30.487

尝试高级 html dom 解析器。它在这里.... [http://sourceforge.net/projects/advancedhtmldom/](http://sourceforge.net/projects/advancedhtmldom/)

# php - 如何解码从 php 到 jquery ajax 的数组响应？

> ID：13676171
> 
> 赞同：0
> 
> 时间：2012-12-03T02:00:34.363
> 
> 标签：php, javascript, jquery, ajax

我有PHP函数：

```
public function doit()
{
    $arr1= array();
        $arr1['index1'] = 'value1';
            $arr1['index2'] = 'value2';
} 
```

我从我的 JQuery 函数中调用它：

```
$.ajax
({    
    url: "/controller/doit",  
    success: function()
    { 
        alert('done!'); 
    }  
 }); 
```

我想要的一切是 - 我的 JQuery 函数，它包含这个 ajax 调用将返回我的数组，它与 PHP 函数返回的数组相同（唯一的区别当然是语言：JS 而不是 PHP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:04:18.890

你需要从你的 doit 函数中返回一些东西。

```
public function doit()
{
  $arr1= array();
  $arr1['index1'] = 'value1';
  $arr1['index2'] = 'value2';

  echo json_encode($arr1);
}

$.ajax
({    
  url: "/controller/doit",  
  success: function(data)
  { 
    console.log(data); 
  }  
}); 
```

编辑：

Jquery to PHP：当 javascript 运行时，它将使用 url 将数据数组发送到服务器。服务器接收数组，将其编码为 json 并将其发送回成功回调函数，该函数会将数据记录到控制台。

```
// YOUR JAVASCRIPT FILE
// your data to send.
var data = {'index1': 'value1', 'index2': 'value2'};

$.ajax({
  type: 'POST',
  url: '/controller/doit',
  data: data,
  success: function(data) { console.log(data) },
  dataType: 'json'
});

//YOUR PHP FILE
public function doit()
{ 
   // you should be setting your content type header to application/json if sending json
   header('Content-type: application/json');
   echo json_encode($_POST['data']);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:04:04.737

您可以使用以下命令将数组作为 json 从 php 回显：

```
echo json_encode($arr1); 
```

并在你的 JS 中使用 $.getJSON：

```
$.getJSON('/controller/doit', function(data) {
  console.log(data);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:04:08.263

您可以使用 JSON 对数组进行编码。 [http://php.net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

# c++ - STL 中的优化期望

> ID：13676172
> 
> 赞同：0
> 
> 时间：2012-12-03T02:00:38.260
> 
> 标签：c++, optimization, compiler-construction, stl

我很好奇编译器会做多少优化，所以......

```
// assume we have this declared somewhere
std::vector<int> vec;

// my question is, when fully optimized will this...
for (int i(0); i<100; ++i)
    vec.push_back(i);

// evaluate to this? psuedo code...
const size_t size = size();
const size_t newsize = size + 100;
if (size < vec.capacity())
    vec.exponentialGrowth();
vec.setSize(newsize);
for (size_t i(size); i<newsize; ++i)
    vector[i] = i; 
```

我正在使用启用了优化的 Visual Studio Express 2012。我试过查看反汇编，但优化使其难以阅读。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T08:40:37.310

查看带有`/Ox`指定选项的 VS 2012 生成的程序集，编译器并未优化以一次性为所有 100 个元素保留容量。

它一个一个地添加元素，当需要额外的空间时，将向量的容量增加 50%。向量的容量从 0 开始，然后像这样增长：

```
1, 2, 3, 4, 6, 9, 13, 19, 28, 42, 63, 94, 141 
```

GCC 4.7.2 的`-O2`行为类似，但容量增加了一倍，而不是增长了 50%。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:17:55.913

`std::vector`无论编译器优化是否打开，都会以指数方式调整大小。

如果您担心调整大小的性能（并且无法`reserve`提前提供足够的空间），请考虑使用`std::deque`. 引用[Herb Sutter](http://www.gotw.ca/gotw/054.htm)的话：*“与向量相比，双端队列更易于使用，并且天生对增长更有效率。”*

# php - 带有单选按钮的 Mysql 更新数据库

> ID：13676180
> 
> 赞同：1
> 
> 时间：2012-12-03T02:02:01.283
> 
> 标签：php, html, mysql, forms

好的，所以我正在制作一款游戏，并希望它是用户有大量图像可供选择的图像。我在数据库中有一个列 user_image ，默认值为 0，如果为 0，则为图像。它是 0-3，每个数字都是一个单独的图像。像这样..

```
<?php 
if ( $userp['user_image'] = 0 )
{
    echo 
    '<img src="../achievements/Silver-Bank.png" width="60" height="60" title="Change Image"">';
} 
elseif ( $userp['user_image'] = 1  )
{
    echo 
    '<img src="../achievements/Silver-Missions.png" width="60" height="60" title="Change Image"">';
}
elseif ( $userp['user_image'] = 2 )
{
    echo 
    '<img src="../achievements/Silver-Level.png" width="60" height="60" title="Change Image"">';
}
elseif ( $userp['user_image'] = 3 )
{
    echo 
    '<img src="../achievements/Diamond-Bank.png" width="60" height="60" title="Change Image"">';
}
?> 
```

那是显示用户图像的地方。我制作了一个页面供用户使用单选按钮选择图像。这是用于更新数据库的PHP，我似乎无法让它工作。

```
<?php 
if ( isset ( $_POST['new_user_image'] ) )
{
    $sql = "UPDATE users SET user_image=(new_user_image) WHERE id='".$id."'";
    $res = mysql_query($sql);
    if (mysql_affected_rows($connect) == 1) {
        echo 'User image sucessfully changed!';
    }
    else
{
}
}
?> 
```

那是它的PHP，而不是noobish，但它不允许我发布表格和表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:11:08.493

1.  运行 mysql_query 后需要检查数据库错误；就像是：

    `if (mysql_errno()) { die(mysql_error()); }`

2.  完全不推荐使用 mysql_ 函数——php 手册甚至有一条红色的大消息告诉你不要使用它们。请改用 mysqli 或 pdo 扩展。

3.  您拥有的 SQL 语句不是真正有效的 SQL

`SET user_image=(new_user_image)`

这绝不表示您要将变量的结果存储在该列中。您需要执行以下操作：

```
$sql = sprintf('UPDATE users SET user_image=%d WHERE id=%d', $_POST['new_user_image'], $id); 
```

如果您不确定您的 SQL，那么至少打印查询的文本`echo $sql`并检查以确保它直接针对数据库运行。您可以更轻松地解决任何特定于 SQL 的问题。

# php - 无法使用 xampp/php 让 memcache 工作

> ID：13676182
> 
> 赞同：0
> 
> 时间：2012-12-03T02:02:14.830
> 
> 标签：php, memcached, xampp

我在运行 xampp v3.1 的 Windows 7 64/位上。php版本是5.4，我试图在盒子上本地安装memcache，这样我就可以将memcache与php一起使用。我搜索了谷歌并按照有关将 memcached.exe 作为服务安装的说明，然后下载了 php 的 memcache dll 扩展文件并将其放入 php 文件夹下的 ext 文件夹中。然后我将它添加到 php.ini 文件夹，重新启动 apache，运行 phpinfo() 时没有显示 memcache，当我尝试通过 php 运行 memcache 时，它​​告诉我这个函数不存在。谁能帮我解决这个问题？我验证了服务已启动并正在运行，我尝试了不同版本的 dll php 扩展文件，但仍然是同样的问题。有什么建议么？这是我用于安装 memcache 的一个站点：

[http://shikii.net/blog/installing-memcached-for-php-5-3-on-windows-7/](http://shikii.net/blog/installing-memcached-for-php-5-3-on-windows-7/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:40:05.213

一定有一些错误记录到您的 apache 日志中。错误是什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:58:36.797

看起来我为 php 抓取了不正确的 memcache 版本。您必须为您使用的 php 版本获取正确的 memcache dll 文件。我在这里找到了正确的下载：

[http://windows.php.net/downloads/pecl/snaps/memcache/3.0.6/php_memcache-3.0.6-5.4-ts-vc9-x86.zip](http://windows.php.net/downloads/pecl/snaps/memcache/3.0.6/php_memcache-3.0.6-5.4-ts-vc9-x86.zip)

它有正确的 php 版本，5.4 和它的线程安全。一旦我下载它，提取 dll 并放入 php 扩展文件夹并重新启动 xampp/apache，它现在可以工作了。

# python - Python：选择位数来表示二进制数

> ID：13676183
> 
> 赞同：8
> 
> 时间：2012-12-03T02:02:32.833
> 
> 标签：python, binary, bits

我很好奇如何更改位数来表示二进制数。例如，假设我想将十进制 1 表示为二进制。我用：

bin(1) 并得到 0b1。

我怎样才能得到回报说 0b01 或 0b001 或 0b0001 等？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T02:40:57.290

使用[格式字符串语法](http://docs.python.org/2/library/string.html#formatstrings)：

```
>>> format(1, '#04b')
'0b01'
>>> format(1, '#05b')
'0b001'
>>> format(1, '#06b')
'0b0001' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T02:27:17.157

您可以使用[str.zfill](http://docs.python.org/2/library/stdtypes.html#str.zfill)填充二进制部分：

```
def padded_bin(i, width):
    s = bin(i)
    return s[:2] + s[2:].zfill(width) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:27:00.377

我不相信有一种内置的方法可以做到这一点。但是，由于`bin`只返回一个字符串，您可以编写一个包装函数来修改字符串以具有正确的位数：

```
def binbits(x, n):
    """Return binary representation of x with at least n bits"""
    bits = bin(x).split('b')[1]

    if len(bits) < n:
        return '0b' + '0' * (n - len(bits)) + bits
# 
```

# jquery - Django Jquery 登录表单

> ID：13676187
> 
> 赞同：0
> 
> 时间：2012-12-03T02:02:58.537
> 
> 标签：jquery, ajax, django, django-forms

我创建了一个位于对话框内的登录表单。它按预期工作，没有任何 ajax。问题是我想在关闭对话框之前验证登录表单。现在，如果有人点击提交，对话框就会关闭。成功登录就可以了，但是如果出现错误，用户需要再次单击登录以查看错误以找出问题所在。因此，我试图在关闭对话框之前实现 jquery 来验证数据。

**模板**

```
 <a id="login_div" onclick="toggleOverlay();" stlye="color:blue; cursor:pointer;">login or register</a>                                  
76        <div class="overlay">                                                                                                                
77            <div class="wrap-outer">                                                                                                         
78                <div class="wrap">                                                                                                           
79                    <div class="my-dialog">                                                                                                  
80                <a style="color:blue; cursor:pointer;" onclick="toggleOverlay();">Close</a>                                                  
81                                                                                                                                             
82                <form id="login_form" name="login_form" action="" method="post">                                                             
83                                                                                                                                             
84                                                                                                                                             
85                    <h3 id="login_header">Login</h3>                                                                                         
86                                                                                                                                             
87                    <label id="login_username">Username:</label>                                                                             
88                    <label id="login_form_username">{{ request.login_form.username }}< /label>                                                
89                    <label id="login_password" for="password">Password:</label>                                                              
90                    <label id="login_form_password">{{ request.login_form.password }} </label>                                                
91                                                                                                                                             
92                     {% csrf_token %}                                                                                                        
93                                                                                                                                             
94                    <input id="login_button" type="submit" name="login_name" value="login" />                                                
95                    <input type="hidden" id="request_path" name="next" value="{{ request.path }}"/>                                          
96                                                                                                                                             
97                </form> 
```

**jQuery**

```
1 $(window).load(function(){                                                                                                                  
2 $('#login_form').submit(function(e){                                                                                                        
3  var request_url = document.getElementById('#request_path')                                                                                 
4          $.ajax({                                                                                                                           
5             type:"POST",                                                                                                                    
6             url: request_url,                                                                                                               
7             data:$('#register_form').serialize(),                                                                                           
8             error: function(xhr, ajaxOptions, thrownError){ alert(thrownError); },                                                          
9             success: function(data){}                                                                                                       
10             });                                                                                                                             
11      e.preventDefault();                                                                                                                    
12 });                                                                                                                                         
13 }); 
```

**看法**

```
13     def process_request(self, request):                                                                                                     
14                                                                                                                                             
15         # if the top login form has been posted                                                                                             
16         if request.method == 'POST':                                                                                                        
17                                                                                                                                             
18             # validate the form                                                                                                             
19             lform = AuthenticationForm(data=request.POST)                                                                                   
20             if lform.is_valid():                                                                                                            
21                                                                                                                                             
22                 # log the user in                                                                                                           
23                 django_login(request, lform.get_user())                                                                                     
24                 return HttpResponseRedirect(request.REQUEST.get('next', '/'))                                                               
25                                                                                                                                             
26                                                                                                                                             
27                 # if this is the logout page, then redirect to /                                                                            
28                 # so we don't get logged out just after logging in                                                                          
29             else:                                                                                                                           
30                 lform                                                                                                                       
31                                                                                                                                             
32         else:                                                                                                                               
33             lform = AuthenticationForm(request)                                                                                             
34                                                                                                                                             
35         # attach the form to the request so it can be accessed within the templates                                                         
36         request.login_form = lform 
```

TL;DR：我想使用 jquery 验证登录表单，并在成功验证后关闭对话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:53:38.573

为什么不简单地利用内置的 Django 登录视图并将任何验证错误作为 JSON 返回，然后您可以使用 jQuery 显示？

你需要做几件事...

从内置的 AuthenticationForm 继承并提供一种方法以将表单错误返回为 JSON。检查 JSON 中是否有任何错误，并遍历它们并将它们添加到对话框内的 HTML 中。

[无耻插件] 请看一下我的AjaxForm/ModelForm基类，它会给你一个名为“errors_as_json”的表单的额外方法。我还有一些示例 jQuery 代码来演示如何显示错误。

[http://djangosnippets.org/snippets/2393/](http://djangosnippets.org/snippets/2393/)

快乐编码。

# javascript - 无法设置 Javascript 数组的默认值

> ID：13676188
> 
> 赞同：0
> 
> 时间：2012-12-03T02:02:58.833
> 
> 标签：javascript, html, arrays, variables

我设置了一个数组，当用户单击按钮时会更改我网站上的 h1。但是，在初始页面加载时，h1 显示为空。在单击按钮之前，标题不会实际显示。想知道是否有人知道设置此数组的默认值的快速修复方法，以便在第一次加载页面时它不为空（我意识到我可以将文本放在 HTML 中的 h1 中，但宁愿将所有内容都拉出来大批）：

```
 var arr = ["Whiskey","Vodka","Rum","Tequila"];
  var index = 0;

  $('.button').click(function(){
    $('h1#heading').html(arr[index]);
    index = (index + 1) % arr.length ;
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:05:46.183

您的数组很好，缺少默认值的是`h1`. 您可以在文档加载后使用以下代码对其进行初始化：

```
$(document).ready(function() {
  $('h1#heading').html(arr[0]);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:06:20.130

您可以在绑定后立即触发点击事件。

```
 $('.button').click(function(){
    $('h1#heading').html(arr[index]);
    index = (index + 1) % arr.length ;
  }).click(); 
```

或使用`.trigger('click');`

# macos - 如何修改文件权限

> ID：13676191
> 
> 赞同：1
> 
> 时间：2012-12-03T02:03:14.753
> 
> 标签：macos, terminal, command

我制作了脚本（steamBlob.command），它删除了文件 /Users/myuser/Library/Application\ Support/Steam/ClientRegistry.blob ... 和另一个文件。代码是

```
chmod +x steamBlob.command
rm -Rf /Users/pipsqueaker/Library/Application\ Support/Steam/ClientRegistry.blob 
rm -Rf /Users/pipsqueaker/Library/Application\ Support/Steam/AppUpdateStats.blob 
rm -Rf Users/pipsqueaker/Desktop/theRace.odt 
```

但是，当我双击它运行它时，会弹出一个窗口显示消息

无法执行文件“steamBlob.command”，因为您没有适当的访问权限。

我已经尝试进入 finder 并将所有权限更改为“读写”，但问题仍然存在。我应该将其作为 sudo 运行吗？如果有人能给我一些关于如何清除它的详细步骤，那就太好了

谢谢，

-我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:50:12.807

问题是您没有 steamBlob.command 文件的执行权限。从终端您可以“chmod +x 'filename'”（使用适当的 'filename' 值）。另外，我将使用“.sh”作为扩展名，并将第一行设为“#!/bin/tcsh”（或编写脚本的任何外壳）。

# foreach - 如何用字符串后缀重命名许多变量

> ID：13676194
> 
> 赞同：6
> 
> 时间：2012-12-03T02:03:33.567
> 
> 标签：foreach, stata, stata-macros

在 Stata 中，我有一组变量都以`pkg`. 在当前状态下，它们的结尾是数字：`pkg1`、`pkg2`、`pkg3`等`pkg4`。

我需要将所有这些变量的结尾更改为字符串：`pkgmz`、、、`pkggmz`等`pkgsp`。`pkgsptc`

我有一列这些字符串结尾，我可以将其指定为本地列表。

例如：

```
local croplist mz gmz sp sptc mil cof suk tea ric 
```

如何将数字结尾更改为字符串结尾？

我对代码的猜测可以在下面找到，并`???`指出我被难住的地方：

```
local croplist crops mz gmz sp sptc mil cof suk tea ric

foreach x of varlist pkg* {
    local new1 = substr(`x', 1, 3)
    local new2 = ???
    rename `x' ``new1'`new2''
    label var ``new1'`new2'' "Avg district level `new2' price"
} 
```

我想知道使用该命令是否会更好`regexr()`，但想不出包含它的方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T08:01:59.123

这是另一种方法。`tokenize`将单独的单词放在编号为 1 的宏中。嵌套引用```j''`仅在初等代数中处理：首先评估内部宏引用。

```
 tokenize "mz gmz sp sptc mil cof suk tea ric" 
forval j = 1/9 {
    rename pkg`j' pkg``j''
    label var pkg``j'' "Avg district level ``j'' price"
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-03T07:21:32.973

这里不需要调用正则表达式。你有新的后缀；前缀`pkg`总是相同的，因此重复提取它的劳动是不必要的。问题的核心是一次循环遍历两个列表。这是修复代码的一种方法。

```
 local croplist mz gmz sp sptc mil cof suk tea ric
local j = 1 
foreach x of varlist pkg* {
    local sffx : word `j' of `croplist' 
    rename `x' pkg`sffx'
    label var pkg`sffx' "Avg district level `sffx' price"
    local ++j 
} 
```

另请注意`rename`，在 Stata 12+ 中可以处理此问题；`regexr()`是一个函数，而不是一个命令；[http://www.stata-journal.com/sjpdf.html?articlenum=pr0009](http://www.stata-journal.com/sjpdf.html?articlenum=pr0009)中的更一般性讨论（有点过时，但与主要问题相关）；你的命令中有太多引号`rename`，所以它不起作用。

编辑 2018 年 7 月 30 日

我现在更经常使用`gettoken`：

```
local croplist mz gmz sp sptc mil cof suk tea ric
foreach x of varlist pkg* {
    gettoken sffx croplist: croplist
    rename `x' pkg`sffx'
    label var pkg`sffx' "Avg district level `sffx' price"
} 
```

本地宏`croplist`是一个堆栈。每次循环时，我们都会从堆栈中取出顶部的项目，并将其余部分留给下一次。每次循环

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-10T10:16:49.947

Ben 在评论中询问了有关在本地宏中增加计数器的问题。

Stata 的本地宏通常用于保存字符串；字符串字符可以是数字，所以持有数字是一种特殊情况，但自然是一种非常有用的情况。仅此线程就显示了几个示例。这有助于牢记这段历史。长期存在的语法基于形式

```
local macname <contents> 
```

和

```
local macname = <expression> 
```

第一个表单复制到`macname`，而第二个表单在将结果分配给 之前进行评估`macname`。增加计数器的主要方法是针对多个版本

```
local j = `j' + 1 
```

但语法

```
local ++j 
```

现在是允许的。然而，虽然允许

```
local j++ 
```

不会像您预期的那样工作，尽管发生的情况与宏的第一个语法一致。

因此，如果考虑到您的背景，这看起来有点奇怪，那是可以理解的，但是本地宏是用于字符串处理的，而不是算术的。Mata 在这方面更像主流。

我写了一个关于循环和宏的教程

Cox, NJ 2002。如何以坚韧的态度面对名单。*统计杂志*2(2): 202-222

所有人都可以访问

[http://www.stata-journal.com/sjpdf.html?articlenum=pr0005](http://www.stata-journal.com/sjpdf.html?articlenum=pr0005)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-18T22:20:27.590

从 Stata 12+ 开始，`rename`可以通过多种方式处理这种情况。

此方法创建一个`new_croplist`包含变量名称的新宏`pkgmz pkggmz pkgsp pkgsptc pkgmil pkgcof pkgsuk pkgtea pkgric`，然后用于`rename`按照模式将变量重命名`pkg<digits>`为 中指定的名称`new_croplist`。下面的数字`pkg`不需要是连续的。

```
local croplist mz gmz sp sptc mil cof suk tea ric
local new_croplist
foreach name of local croplist {
    local new_croplist `new_croplist' pkg`name'
}
rename pkg# (`new_croplist') 
```

第二种方法使用新`rename`功能两次；和以前一样，这不需要原始名称中的连续数字。第一个命令将模式的变量重命名为`pkg<digits>`中指定的名称`croplist`。第二个命令将前缀添加`pkg`到新变量名。

```
rename pkg# (`croplist')
rename (`croplist') pkg= 
```

在这两种情况下，通常在使用`rename`命令时（`rename group`在 Stata 的文档中引用），旧变量名的数量必须与新变量名的数量匹配，因此请确保匹配的变量数量与新变量名`pkg#`匹配在“croplist”中指定的名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-26T20:20:48.103

在@Nick 的优秀示例中使用计数器的另一种方法是使用 `macro shift`：

```
clear

forvalues i = 1 / 9 {
    generate pkg`i' = runiform()
}

local croplist mz gmz sp sptc mil cof suk tea ric
tokenize "`croplist'"

foreach var of varlist pkg* {
    rename `var' pkg`1'
    label var pkg`1' "Avg district level `1' price"
    macro shift
} 
```

您还可以使用该`ds`命令获取以 开头的变量名称列表`pkg`：

```
local croplist mz gmz sp sptc mil cof suk tea ric
tokenize "`croplist'"

ds pkg*

foreach var of varlist `r(varlist)' {
    rename `var' pkg`1'
    label var pkg`1' "Avg district level `1' price"
    macro shift
} 
```

在这两种情况下，您都会得到：

```
pkgmz           float   %9.0g                 Avg district level mz price
pkggmz          float   %9.0g                 Avg district level gmz price
pkgsp           float   %9.0g                 Avg district level sp price
pkgsptc         float   %9.0g                 Avg district level sptc price
pkgmil          float   %9.0g                 Avg district level mil price
pkgcof          float   %9.0g                 Avg district level cof price
pkgsuk          float   %9.0g                 Avg district level suk price
pkgtea          float   %9.0g                 Avg district level tea price
pkgric          float   %9.0g                 Avg district level ric price 
```

# internet-explorer-8 - IE8 中图像周围不需要的填充

> ID：13676209
> 
> 赞同：0
> 
> 时间：2012-12-03T02:04:56.007
> 
> 标签：internet-explorer-8

嗨，我在嵌套在锚点、跨度、表格单元格内的图像周围得到了无用的底部填充（请参阅下面的 jsfiddle 链接）。

图像是 16x16，但在 IE8 中锚点和跨度似乎是 16x19。似乎在 IE7 和 Chrome 中工作/看起来不错（未在 FF 中测试）。

尝试了很多东西，但无法摆脱它！

```
<table class="sequence">
<tr>
    <th>Test</th>
</tr>
<tr>
    <td>
        <span>
            <a href="#">
                <img class="icon" alt="" src="" />
            </a>
        </span>
    </td>
</tr> 
```

[jsfiddle](http://jsfiddle.net/fK8Nc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T03:26:05.850

添加`display: block;`为`img.icon`我解决了这个问题（在 Windows 7 上的 Internet Explorer 8 中测试）。

[jsfiddle](http://jsfiddle.net/fK8Nc/1/)

# javascript - Ckeditor 无法使用 ajaxForm 保存 textarea 值

> ID：13676210
> 
> 赞同：0
> 
> 时间：2012-12-03T02:05:21.540
> 
> 标签：javascript, jquery

我尝试使用 ajaxForm 保存：

```
<script src="ckeditor.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" src="js/jquery.form.js"></script>
<script type="text/javascript">
$('document').ready(function() {

    $('#form').ajaxForm( {
    target: '#preview', 
        success: function() { 
        } 
    }); 

});
</script>

<form method="post" name="form" id="form" action="save.php">

    <textarea name="content" id="content" class="ckeditor editor" style="width:400px; height:100px;"></textarea>
    <input type="submit" value="Submit" class="submit"/>

</form> 
```

问题是当我使用 ckeditor 时，textarea 值无法保存到数据库中，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:49:01.017

ckeditor 在哪里？

像这样初始化ckeditor

```
CKEDITOR.replace('content'); 
```

如果还是无法通过ajaxForm提交数据，尝试从ckeditor获取数据，通过通用ajax提交

```
var data = CKEDITOR.instances.content.getData();
$.post('url'
, { data : data }
, function(data) {
    //do something
}); 
```

# opengl - 我应该使用什么样的着色器来渲染头发

> ID：13676214
> 
> 赞同：1
> 
> 时间：2012-12-03T02:05:56.787
> 
> 标签：opengl, graphics, 3d, xna, shader

我有一个 3D 模型在 3Dmax 中看起来像这样：

![在此处输入图像描述](../Images/9e0d3fb464166c3b4c9810d3fb700a03.png)

我开发了一个程序（C# XNA/OpenGL）来读取 3D 模型并应用材质，所以它看起来像这样：

![在此处输入图像描述](../Images/c3190aabee53e90b86b4fe2359e464e3.png)

然而，模型是由 facegen 创建的，头发在 facegen 中看起来像这样：

![在此处输入图像描述](../Images/4180753c43ad177c298e931f2ddfa571.png)

所以我的问题是我应该使用哪种着色器来渲染头发，使它看起来像 Facegen 中的那个。

欢迎评论、关键字、点击、示例、教程或代码。

我的平台

Windows 7 64 位 C# 或 C++ XNA 或 Directx 或 OPENGL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T09:39:50.473

您可以在此处的 nVidia 示例中找到一个名为 Nalu 的 nVidia 头发演示：[https](https://developer.nvidia.com/nvidia-graphics-sdk-11-direct3d) ://developer.nvidia.com/nvidia-graphics-sdk-11-direct3d 。使用的着色器称为 Marschner 着色器，您可以在 Google 上搜索有关它的更多信息。当然，还有许多其他的头发渲染技术和许多其他着色器。

还有一个专门介绍头发渲染资源的博客[http://hairrendering.wordpress.com/](http://hairrendering.wordpress.com/)提供了很好的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T16:32:40.893

一种非常好的技术是使用粒子作为头发，但不是渲染点而是渲染线条。

一种方法是一次性渲染整个粒子的生命周期，而不是在特定时间渲染特定点。与贝塞尔曲线一起使用，您可以获得一些非常逼真的头发。你甚至可以走得更远，模拟吹头发的风等，只需使用顶点场或类似的东西来操纵粒子的路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:19:50.503

乍一看，facegen 看起来只是根据纹理使用 alpha 混合放置头发多边形，而 UNLIT 则很难发现透明的排序问题。头发方法的选择取决于许多考虑因素，包括渲染器的类型（前向/延迟）、所需的性能、是否愿意对头发多边形（或块）进行排序......

Marschner 方法非常好，但也很复杂。如果您只想快速简单，请尝试我所描述的 alphablending。

# javascript - 如何获得相对于 img 目标元素的 mousedown 偏移量？

> ID：13676215
> 
> 赞同：2
> 
> 时间：2012-12-03T02:06:07.547
> 
> 标签：javascript, jquery

我在一个元素上有一个`mousedown`事件处理程序：`img`

```
$('#some_image').bind({
    mousedown: function(e) {
        var img = e.target;
        var relpos = ???;
    }
  }) 
```

我怎样才能得到`mousedown` *相对* `img`的位置？相对，即相对于 的任何一个`img`角，以最简单的为准。

FWIW，我正在使用 jQuery。

（对不起这个愚蠢的问题。我想答案一定是微不足道的，但我找不到它，这让我发疯了......）

编辑：好的，这是答案：

```
$('#some_image').bind({
    mousedown: function(e) {
        var offset = $(this).offset();
        var relpos = [e.pageX - offset.left, e.pageY - offset.top];
        // etc.
    }
  }) 
```

实际上，我发现对于我正在做的事情，最好减去`Math.round(offset.left)`而`Math.round(offset.top)`不是原始偏移量，因为后者并不总是整数（见图）。

顺便说一句，至少根据 Firebug，事件的`offsetX`和`offsetY`是未定义的，`layerX`甚至`layerY`没有在其成员中列出。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T02:13:07.803

我从这篇文章中得到了答案 [jQuery get mouse position within an element](https://stackoverflow.com/questions/4249648/jquery-get-mouse-position-within-an-element)

```
$("#something").click(function(e){
   var parentOffset = $(this).parent().offset(); 
   //or $(this).offset(); if you really just want the current element's offset
   var relX = e.pageX - parentOffset.left;
   var relY = e.pageY - parentOffset.top;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:14:05.950

我想你可以使用 layerX 和 layerY。

```
$('#some_image').bind({
    mousedown: function(e) {
        var img = e.target;
        console.log(e.layerX+","+ e.layerY);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T02:15:10.830

jQuery 的事件对象具有 pageX 和 pageY 属性，它们返回鼠标指针相对于文档左边缘的位置。

因此，您只需在点击事件中获取该位置并与目标元素的位置进行比较。

[官方 jQuery 文档有很好的关于鼠标位置](http://docs.jquery.com/Tutorials%3aMouse_Position)跟踪的例子。

# c++ - argv[1] 给出段错误

> ID：13676222
> 
> 赞同：0
> 
> 时间：2012-12-03T02:07:35.950
> 
> 标签：c++, segmentation-fault, argv

我有以下代码：

```
int main(int argc, char *argv[])
{
  if(strcmp(argv[1],"-e")==0)
  { 
    //perform code
  }

  //code if argv[1] is not "-e"

return 0;
} 
```

当我取出整个 if 语句时：

```
if(strcmp(argv[1], "-e")==0) 
```

我的代码 if strcmp(argv[1], "-e") == 0) is not "-e" 工作正常。但是当我把它留在里面时，我的代码只适用于上面的 if 语句为真时。关于为什么会发生这种情况的任何想法？例如：

如果我使用未注释掉的 argv[1] 进行编译：

//示例程序将是一个可执行文件

exampleProgram -e < a.txt 有效，但 exampleProgram < a.txt 无效。任何想法为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:11:32.297

很简单，如果您不向程序发送任何参数，那么`args[1]`您将尝试访问未分配的内存位置。

你可以这样做：

```
int main(int argc, char *argv[])
{
  if(argc > 1 && strcmp(argv[1],"-e")==0)
  { 
    //perform code
  }

  //code if argv[1] is not "-e"

return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:11:33.133

argv 是一个数组。当您尝试在最后一个元素之外的数组中建立索引时，您会遇到段错误。为了不超过最后一个元素，请检查 argc 的值，而 argc - 1 将是您可以访问的最后一个元素的索引。更多关于段错误的信息：[http ://en.wikipedia.org/wiki/Segmentation_fault](http://en.wikipedia.org/wiki/Segmentation_fault)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:14:14.277

原因
`exampleProgram -e < a.txt`有效而 `exampleProgram < a.txt`无效
是因为当没有参数传递到程序中时，如果是 no `argv[1]`，则它超出了 args 数组的范围。在测试之前你需要做`argv[1]`的是测试看看是否有那么多参数开始。

例如：

```
if (argc > 1) {
  if(strcmp(argv[1],"-e")==0) {

  }
} 
```

`argc`用于保存程序中存在多少个参数，因此您可以在超出范围之前对其进行测试。

# c++ - 无法获取存储在向量结构中的信息

> ID：13676227
> 
> 赞同：1
> 
> 时间：2012-12-03T02:08:22.290
> 
> 标签：c++, vector, struct

我的功能有问题，它应该打印出存储的书籍列表

```
void PrintBooklist(vector<BookList>&book)
{
    for(int i=0; i<book.size(); i++)
    {   
        if (book[i].memNumBor = -1)
            cout<<book[i].title<<endl;
    }
} 
```

但它会打印出“标题”这个词；几次，但将其留空。我检查最后的大小以确保添加的任何内容都被推回，但我无法读出它。提前致谢！

```
int main()
{   
    vector<BookList>book;
    vector<MemInfo>member;
    string memberfile;
    string bookfile;
    ofstream fout;
    ifstream fin;

    cout << "\n\t\t\tWelcome to Library Management Services!"<<endl<<endl;

    Read_Member(member, fin, memberfile);
    Read_Book(book, fin, bookfile);

    SignIn(member, book, fin, fout, memberfile, bookfile); 
    return 0;
}

void Read_Member(vector<MemInfo> &member, ifstream &Fin, string &memberfile) 
{
    MemInfo temp;
    cout<<"Please enter the name of the file that contains the member information: ";
    getline(cin,memberfile);

    Fin.open(memberfile.c_str());

    if(Fin.fail())
    {
        cout<<endl<<"File containing the member information does not exist.\n"<<endl;
        exit (0);
    }

    ReadInfoMem(Fin);
    while (!Fin.eof())
    {   
        member.push_back(temp);
        ReadInfoMem(Fin);
    }
    Fin.close();

    for (int i=0; i<member.size(); i++)
    {
        cout<<endl<<member[i].lName<<endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:12:15.463

你行**分配** `memNumBor`

```
if (book[i].memNumBor = -1) 
```

你想要的是**平等检查**

```
if (book[i].memNumBor == -1) // note the double '==' 
```

**更新：**

编辑添加更多代码后，我注意到以下内容：

```
MemInfo temp;

// ...snip...

ReadInfoMem(Fin);            // presumably this reads the member info from 'Fin'?
while (!Fin.eof())
{   
    member.push_back(temp);  // and you add an *empty* 'temp' object to 'member'
    ReadInfoMem(Fin);
} 
```

我预计正在发生的事情是您正在从`Fin`in读取`ReadInfoMem`到局部`MemInfo`变量，但是您没有将填充的内容返回`MemInfo`到将其添加到`member`向量中的封闭函数。

我建议使用*return-by-value*或*pass-by-reference*。

**按值返回**

```
MemInfo ReadInfoMem(ifstream& fs)
{
    MemInfo temp;
    // populate temp
    return temp;
}

// in your calling code:
temp = ReadInfoMem(Fin); 
```

**引用传递**

```
void ReadInfoMem(ifstream& fs, MemInfo& temp)
{
    // populate temp
}

// in your calling code:
ReadInfoMem(Fin, temp); 
```

# java - 在 Java 中，为什么在尝试显示 FileNotFoundException 时会出现 NullPointerException？

> ID：13676228
> 
> 赞同：1
> 
> 时间：2012-12-03T02:08:25.957
> 
> 标签：java, nullpointerexception, try-catch

我认为只显示代码和我得到的输出比试图解释它更容易:)

这是来自我的主要方法：

```
//prompt user for filename
    System.out.println("Please enter the text file name. (Example: file.txt):");
    String filename = ""; //will be used to hold filename

   //loop until user enters valid file name
    valid = false;
    while(!valid)
    {
        filename = in.next();
        try
        {
            reader.checkIfValid(filename);
            valid = true; //file exists and contains text
        }
        catch (Exception e)
        {
            System.out.println(e + "\nPlease try again.");
        }
    } 
```

这是 reader.checkIfValid 方法：

```
public void checkIfValid(String filename) throws InvalidFileException, FileNotFoundException
{
    try
    {
        in = new Scanner(new File(filename));

        if (!in.hasNextLine()) // can't read first line
            throw new InvalidFileException("File contains no readable text.");
    }
    finally
    {
        in.close();
    }
} 
```

这是输入不存在的文件时得到的输出：

请输入文本文件名。（例如：file.txt）：

不存在.txt

java.lang.NullPointerException

请再试一次。

为什么 System.out.println(e) 会出现 NullPointerException？当我输入一个空文件或带有文本的文件时，它工作得很好。空文件打印 InvalidFileException（自定义异常）消息。

当我在“in = new Scanner(new File(filename));”周围放置一个 try-catch 语句并让 catch 块显示异常时，我*确实*打印出 FileNotFoundException，*然后*是 NullPointerException（我如果异常已经在 checkIfValid 方法中被捕获，不完全确定为什么 main 方法中的 catch 块会被激活......）。

我在这上面花了一段时间，我完全不知道出了什么问题。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:22:02.090

编辑：我认为空指针来自对 reader 的调用，捕获所有异常是不好的做法，因为您不再知道它们来自哪里！

也许 checkIfValid 方法应该只检查文件名是否有效？

```
public boolean checkIfValid(String filename) {
    try {
        File file = new File(filename);
        return file.exists();   
    } catch (FileNotFoundException) {
        System.out.println("Invalid filename ["+filename+"] "+e);
    }
} 
```

然后调用它的代码可能看起来像；

```
filename = in.next();
valid = reader.checkIfValid(filename);
if (valid)
    List<String> fileContents = readFromFile(filename); 
```

然后在它自己的方法中包含所有文件读取逻辑，如下所示；

```
public List<String> readFromFile(filename) {
    List<String> fileContents = new ArrayList<String>();
    try {
        in = new Scanner(new File(filename));
        while (in.hasNextLine()) {
            fileContents.add(in.nextLine);
        }
    } catch (IOException e){
        //do something with the exception
    } finally {
        in.close();
    }
    return fileContents;        
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T03:40:50.947

My mistake was something only I could've seen. I was catching all the exceptions so I wasn't able to see where it was coming from. Thank you for helping!

# objective-c - @synchronized 不适用于 NSMutableArray

> ID：13676229
> 
> 赞同：1
> 
> 时间：2012-12-03T02:08:37.577
> 
> 标签：objective-c, ios, multithreading, cocos2d-iphone

我正在尝试从一个可变数组中删除和对象 - 一个遍历每一帧的数组（参见刻度：方法）。

我正进入（状态

> ***集合 <__NSArrayM: 0xaa99cb0> 在枚举时发生了变异。

例外。

所以我添加 `@synchronized()`了锁定它不被其他线程触及，但它仍然失败。

```
- (void)addEventSubscriber:(id <EventSubscriber>)eventSubscriber
{
     [_eventSubscribers addObject:eventSubscriber];
}

- (void)removeEventSubscriber:(id <EventSubscriber>)eventSubscriber
{
    @synchronized(_eventSubscribers) // Not working.
    {
       [_eventSubscribers removeObject:eventSubscriber];
    }
}

- (void)tick:(ccTime)dt
{
   for (id <EventSubscriber> subscriber in _eventSubscribers)
   {
       if ([subscriber respondsToSelector:@selector(tick:)])
       {
           [subscriber tick:dt];
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T02:32:21.417

您需要在迭代时完全锁定对数组的更新。将同步块添加到这两种方法`addEventSubscriber:`并且`removeEventSubscriber:`将不起作用，因为由于迭代不同步，数组在被迭代时可能会发生变化。简而言之，一次只能运行这三种方法中的一种。

您可以使用`@synchronized`, 或 an`NSLock`在迭代时手动锁定数组更新。

或者，您可以将 GCD 与串行调度队列一起使用，以确保一次只执行一个方法。这是如何工作的：

您还可以将队列存储为您正在其中进行此处理的类对象的属性。

```
// Create the queue
dispatch_queue_t myQueue = dispatch_queue_create("myQueue", NULL);

- (void)addEventSubscriber:(id <EventSubscriber>)eventSubscriber
{
    dispatch_sync(myQueue, ^{
        [_eventSubscribers addObject:eventSubscriber];
    });
}

- (void)removeEventSubscriber:(id <EventSubscriber>)eventSubscriber
{
    dispatch_sync(myQueue, ^{
       [_eventSubscribers removeObject:eventSubscriber];
    });
}

- (void)tick:(ccTime)dt
{
    dispatch_sync(myQueue, ^{
       for (id <EventSubscriber> subscriber in _eventSubscribers)
       {
           if ([subscriber respondsToSelector:@selector(tick:)])
           {
               [subscriber tick:dt];
           }
       }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:15:15.183

您仅在从数组中删除项目时获得锁，而不是在枚举项目时。该错误表明在枚举中您试图删除一个项目，这是您的锁定允许但枚举不允许的。

在枚举之前简单地锁定数组也可能不起作用。同一个线程可以递归地锁定对象，但是如果您的枚举和删除在不同的线程上，那么尝试在枚举中删除将导致死锁。如果您处于这种情况，您将需要重新考虑您的模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-10T03:38:03.267

我经常遇到这个问题。除了本科操作系统课程之外，我没有线程处理/同步的经验，所以这就是我想出的。

每次您遍历对象列表并想要删除某些东西时 - 而是将该对象添加到全局“objectsToRemove”数组中。在您的更新方法中，从 objectsToRemove 中删除所有内容，然后清理数组以避免在下一次更新时过度删除对象。

Cocos2D has a CCArray which is essentially an NSMutableArray with some added functionality– like being able to remove an item while iterating. I haven't read through the code myself, so I'm not sure how it is implemented and therefore I don't use it.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T02:10:25.010

您也需要在此功能中添加同步。

```
- (void)tick:(ccTime)dt
{
  @synchronized(_eventSubscribers){
 for (id <EventSubscriber> subscriber in _eventSubscribers)
 {
   if ([subscriber respondsToSelector:@selector(tick:)])
   {
       [subscriber tick:dt];
   }
 }
 }
} 
```

# three.js - 计算物体的高度

> ID：13676230
> 
> 赞同：0
> 
> 时间：2012-12-03T02:08:38.767
> 
> 标签：three.js

如果物体和相机之间的距离是 500，视角是 45，如果我想让物体刚好填满整个屏幕，我可以在原点设置一个顶点，并将 500 * Math.tan(45/2) 设置为另一个顶点的 y。我已经测试了它，它是不正确的，我怎样才能弄清楚y？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:36:20.953

我已经自己解决了这个问题。Math.tan 只接收弧度，所以我应该把它改成这样：500 * Math.tan(45/2/180 * Math.PI)

# ruby-on-rails - 渲染布局为假，但仍加载视图

> ID：13676236
> 
> 赞同：2
> 
> 时间：2012-12-03T02:09:27.110
> 
> 标签：ruby-on-rails

ruby 有没有办法绕过 application.html.erb 但仍然使用控制器的相应视图？

现在我有

```
render :layout => false 
```

但我从视图中得到以下错误：

```
undefined method `each' for nil:NilClass 
```

以下是我当前的帖子控制器：

```
class PostsController < ApplicationController
  def index
    @posts = Post.where('is_deleted' => false, 'is_hidden' => false).limit(15).order('created_at DESC')
  end 
  def show
    @posts = Post.find(params[:id], :conditions => 'is_deleted = false')
  end 
  def page
    render :layout => false
    @posts = Post.where('is_deleted' => false, 'is_hidden' => false).limit(15).offset(params[:page].to_i * 15).order('created_at DESC')
  end 
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T02:33:32.427

```
def page
  render :layout => false
  @posts = Post.where('is_deleted' => false, 'is_hidden' => false).limit(15).offset(params[:page].to_i * 15).order('created_at DESC')
 end 
```

应该

```
def page
  @posts = Post.where('is_deleted' => false, 'is_hidden' => false).limit(15).offset(params[:page].to_i * 15).order('created_at DESC')
  render :layout => false
end 
```

# c++ - 多维 std::initializer_list 其中维数被指定为其类的模板参数

> ID：13676237
> 
> 赞同：3
> 
> 时间：2012-12-03T02:09:37.523
> 
> 标签：c++, templates, gcc, c++11, template-meta-programming

我有一个当前不接受 initializer_list 初始化的多维数组，但我想允许这样做。但是，似乎我无法根据模板参数为 std::initializer_list 指定任意数量的嵌套。

```
// e.g. 5D array:
array<int, 5> arr(10, 5, 20, 34, 10); // the integers are the lengths of each dimension.

// This is what I'm trying to achieve on top of the above:
// creates the array and initializes it
array<int, 5> arr{ {{{{0, 1}}}}, {{{{1, 1}}}} };

// class signature:
// template <template T, unsigned dimensions> array { ... }
// --> where T is the array element type 
```

答案不一定非得用`std::initializer_list`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T01:22:13.480

我认为这应该有效：

```
template<typename BASE, int N>
struct nested {
  typedef std::initializer_list<typename nested<BASE,N-1>::initializer_list> initializer_list;
};

template<typename BASE>
struct nested<BASE,0> {
  typedef BASE initializer_list;
};

template<typename BASE, int N>
struct multi {
  multi(typename nested<BASE,N>::initializer_list& init) {
  };
}; 
```

不幸的是，我的 gcc 版本都没有有效的 initializer_list 支持，所以我无法正确测试它。

# jquery - 使用 jQuery 来定位在 Meteor 中呈现的元素

> ID：13676240
> 
> 赞同：2
> 
> 时间：2012-12-03T02:10:05.690
> 
> 标签：jquery, meteor

我已经为此苦苦挣扎了一段时间，似乎找不到有效的解决方案。希望这里有人可以提供帮助。

我正在尝试为集合中的每个条目呈现一个 div，然后使用 jQuery 来定位每个 div，获取存储在与该 div 对应的条目中的信息，并根据数据的值更改其 CSS。

这是我的模板：

```
<template name="vis">
    <div id="vis">
        {{#each Actions}}
            <div class="visEntry" id="entry{{ID}}"></div>
        {{/each}}
    </div>
</template> 
```

我尝试使用 cursor.observe() 给我一个回调，只要条目被添加到集合中，但我不能使用 jQuery 来选择新呈现的元素。我可以通过控制台打印所选条目中的任何值，使用 jQuery 选择和修改非模板 div（在 HTML 文件中硬编码），但是当我选择我想要的元素时，它不起作用。

```
Template.vis.Actions = function(){
    var actions = Actions.find() 
    actions.observe({
        added: function(action){
            var entryHeight = action.Duration
            var entryOffset = ($("#vis").height() - entryHeight) / 2

            var target = "#entry" + action.ID;
            $(target).css({'background-color':'red'})      // Doesn't work
            $("#testDiv").css({'background-color':'red'})  // Works fine
        }
    })
    return actions
} 
```

我检查了我的live页面的源代码，jQuery选择器中使用的ID是正确的。我有四个条目：entry1、entry2、entry3 和 entry4，但它们似乎对 jQuery 不可见。这让我发疯，所以如果有人知道我做错了什么，我很想听到一些反馈。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T08:33:19.143

您也许可以`Meteor.template.rendered`为此目的使用该函数，因为问题似乎是您的 DOM 尚未呈现。您的模板可能如下所示：

```
<template name="vis">
    <div id="vis">
        {{#each Actions}}
            {{>visEntry}}
        {{/each}}
    </div>
</template>

<template name='visEntry'>
    <div class="visEntry"></div>
</template> 
```

然后你可以像这样使用 Template.rendered 回调：

```
Template.visEntry.rendered = function(){
  var mydata = this.data, 
      el = this.find('div.visEntry');

  // jquery code here;
} 
```

您将可以访问与 中的每个模板相关联的数据`this`，并且您还可以使用内置`find`来获取该模板中的适当 dom 元素。然后，您可以使用相关数据设置您想要的任何 DOM 元素的 CSS。此外，如果模板最初是提供的`Meteor.Collection`（而不是`fetched`源），那么只会呈现添加/更改/移动的模板。实际上，我认为这给了你你想要做的事情`observe`。

# jsf - 有条件地渲染 ui:define

> ID：13676243
> 
> 赞同：12
> 
> 时间：2012-12-03T02:10:40.563
> 
> 标签：jsf, facelets, templating, conditional-rendering

我如何有条件地渲染一个`<ui:define>`？

模板中的数据取决于所需的`<f:viewParam>`.

但是如果提供了无效的视图参数，则`<ui:define>`不应呈现，因为应使用模板的默认内容。

我尝试使用`<c:if>`但它不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T04:51:11.727

不可能有条件地渲染/构建`<ui:define>`. 你只能为它的内容做。`<ui:define>`模板中忽略外部的任何内容。

更好的是有条件地构建`<ui:insert>`。在`<ui:insert>`视图构建期间运行，因此无法通过通过设置的属性有条件地呈现它`<f:viewParam>`。您只能`<ui:insert>`使用条件视图构建时间标签（例如 JSTL）有条件地构建它（标签本身），而 JSTL`<c:if>`反过来又直接检查原始请求参数（因此不检查`<f:viewParam>`属性）。

在主模板中，它看起来像这样，假设仅存在请求参数就足够了（如果您需要执行验证，则需要在 EL 表达式中或在托管 bean 中进行，其中属性通过 预初始化`@ManagedProperty("#{param.foo}")`。

例如，在主模板中：

```
<c:if test="#{not empty param.foo}">
    <ui:insert name="content" />
</c:if>
<c:if test="#{empty param.foo}">
    <p>Default content</p>
</c:if> 
```

或者，更清晰但更详细

```
<c:choose>
    <c:when test="#{not empty param.foo}">
        <ui:insert name="content" />
    </c:when>
    <c:otherwise>
        <p>Default content</p>
    </c:otherwise>
</c:choose> 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-23T20:47:54.467

改为使用`<ui:fragment>`。

```
<ui:define name="description">
    <ui:fragment rendered="false">
        <meta name="description" content="do not render" />
    </ui:fragment>
</ui:define> 
```

重复的[ui:define 与 render="false" 属性仍在渲染](https://stackoverflow.com/questions/12655530/uidefine-with-rendered-false-attribute-still-rendering)

# matlab - MATLAB Linux 替代 textread

> ID：13676246
> 
> 赞同：1
> 
> 时间：2012-12-03T02:11:00.633
> 
> 标签：matlab, text

我目前正在使用 textread 加载文本文件，以便稍后在我的 GUI 上的编辑字段中显示。但是，我在 Linux 中，发现内存没有释放 - 所以，我的程序变得非常慢，我不得不关闭 MATLAB，因为我不断加载越来越多的文本文件。有没有办法在不将整个内容加载到内存的情况下显示我的文本文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:51:21.407

用老式的、类似 UNIX 的方式来做... fopen、fread、fclose。

```
A = fread(fid, count, precision, skip, machineformat) 
```

“count”为您提供要读取的数据长度，“precision”是“uchar”，“skip”是从哪里开始读取。A 是您的字符数组/字符串。

# arrays - 显示电影剪辑数组并动态更新它们？

> ID：13676251
> 
> 赞同：0
> 
> 时间：2012-12-03T02:11:23.903
> 
> 标签：arrays, actionscript-3

所以我有这个数组，命名为combo。我想根据用户点击用电影剪辑填充它（如果用户点击 1，则将“1”添加到数组并将其显示在一个区域上。

问题是，我不知道该怎么做。

作为记录，我有 4 个电影剪辑，火、风、地球和精神。当用户单击其中一个时，我希望数组更新。数组的最大长度为 6，并且始终根据“true_combo”数组进行检查。

我的问题是：

```
1) 如果长度已达到 6，如何删除 Array 中最旧的项目？
2) 根据 Combo，我如何一个接一个地显示影片剪辑（较小版本的按钮，而不是新的影片剪辑）？
3) 如何动态更新舞台上的movieclip列表？
```

这是我当前 fla [https://www.dropbox.com/s/17d9rgclz29ft1u/Untitled-1.fla的精简版](https://www.dropbox.com/s/17d9rgclz29ft1u/Untitled-1.fla)

这是检查组合与真正组合的代码：

```
function checkthis(e:Event)
{
    if(combo.length == truecombo.length)
    for(var o:int = 0; o < combo.length; o++) 
    {
        if(combo[o] == truecombo[o])
        {
            bravo.play();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:58:25.137

**1**
您可以使用`Array.shift()`（删除数组中的第一项）或`Array.pop()`（删除数组中的最后一项）

**2 / 3**
使用 for 循环并根据数组更改项目的位置。我假设数组中的项目是对影片剪辑的引用，那么这将是您可以使用的函数。

```
function add(clip:DisplayObject)
{
    if (this.combo.length >= 6) 
{
    // remove child and remove it from the list
    removeChild(this.combo.shift());
}
this.combo.push(clip);
this.addChild(clip);

    reorder();
}

function reorder()
{
   for(var i:int = 0; i < combo.length; i++)
   {
       combo[i].x = i * 50;
   }
} 
```

* * *

**更新：您可以**[在此处](http://dl.dropbox.com/u/6212130/stackoverflow/add-and-order.fla)
下载此实现的示例（Flash CS6 文件）或[在此处观看](http://dl.dropbox.com/u/6212130/stackoverflow/add-and-order.swf)

* * *

**更新 2**

```
function checkthis(e:Event)
{
    var isValid:Boolean = true;
    if(combo.length == truecombo.length)
    {
      for(var o:int = 0; o < combo.length; o++) 
      {
        if(combo[o] != truecombo[o])
        { 
            // if one item isnt the same it should fail.
            isValid = false;
        }
      }
    }
    if (isValid)
    {
        bravo.play();
    }
} 
```

# windows-mobile - windows 手机模拟器

> ID：13676255
> 
> 赞同：0
> 
> 时间：2012-12-03T02:11:36.767
> 
> 标签：windows-mobile

我正在开发一个应该在 PC 上运行的 Web 应用程序。但是现在我的老板想让我稍微改变一下，这样就可以在 windows mobile 上访问它。

我主要担心的是：

*   大量js，涉及
*   正确渲染 css 和 html

我可以要求或让手机在 windows mobile 上运行，我最终会运行，但现在我正在寻找一个用于调试的模拟器。

我已经浏览了[这个链接，](http://www.microsoft.com/en-us/download/details.aspx?id=9263)但在我看来，这是一个在 windows mobile 上开发软件应用程序的人的模拟器，所以我有一些疑问。

这个问题有可能是题外话，但我找不到更好的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:53:34.797

如果您没有要测试的设备，则最好将 Stand-alone-Device-Emulator 与任何 Windows Mobile 仿真器映像一起使用。

问题是，您的目标是哪些设备。如果是 Windows Mobile 6.1.4，你提到的链接是可以的。

此外，您应该从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=5352)加载 Stand-alone-Device-Emulator 。这使您能够开始停止不同种类的 Windows Mobile Emulator 图像。

![在此处输入图像描述](../Images/92ea8509b4c250ef964fc8b7fe9339bf.png)

模拟器中的 Internet Explorer Mobile 的行为与使用相同操作系统的设备相同。MS 认证确保了这一点。OEM 只包含由 MS 提供的 Internet Explorer。

您可能还需要加载其他模拟器映像，例如最新可用的 Windows Mobile 操作系统的 Windows Mobile 6.5.3（又名 Windows Embedded Handheld 6.5.3）。Windows Phone（7 或 8）是一个完全不同的分支。

如果 oyu 需要在模拟器内连接互联网，您需要加载并安装[ActiveSync](http://www.microsoft.com/en-us/download/details.aspx?id=15) (<=Windows XP) 或 Windows Mobile Device Center ( [WMDC](http://www.microsoft.com/en-us/download/search.aspx?q=windows%20mobile%20device%20center) , >=Windows 7)。不要将 Windows Mobile 设备中心与 Windows Mobile 设备管理器互换！

在 ActiveSync 或 WMDC 中，您可以启用 ActiveSync/WMDC 连接的直通： ![在此处输入图像描述](../Images/09bf02e924f556b6e8a7ddb1a2938b43.png)

选择“Allow Connections...”DMA 选项以允许仿真器被“放置”。

如果启用，您可以在模拟器中访问互联网或计算机的网络，因此可以连接到运行可从计算机访问的 Web 服务器。 ![在此处输入图像描述](../Images/c9adbc1477ca939362afa81d15417240.png)

~约瑟夫

# python - Python中二维数组的矩阵式打印

> ID：13676256
> 
> 赞同：1
> 
> 时间：2012-12-03T02:11:40.037
> 
> 标签：python, arrays, printing, numpy, 2d

假设我在 Python 的 numpy 数组中有一个矩阵

```
In [3]: my_matrix
Out[3]: 
array([[ 2.,  2.,  2.,  2.,  2.,  2.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,
         0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  2.,  2.,  2.,  2.,  0.,  0.,  0.,
         0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  2.,  2.,  2.,
         2.,  2.,  2.,  2.,  2.]]) 
```

有没有办法让 Python/IPython 将我的数组打印为：

```
[ 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2 2; 
  0 0 0 0 0 0 2 2 2 2 0 0 0 0 0 0 0 0; 
  0 0 0 0 0 0 0 0 0 0 2 2 2 2 2 2 2 2 ] 
```

? （~类似于MATLAB的做法）

另外，我注意到 IPython在打印数组时**不会**使用我的终端的整个宽度。`numpy`其他功能（例如`pprint.pprint`）。我该如何改变呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T02:40:02.610

使用[numpy.set_printoptions](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)。为了增加线宽：

```
np.set_printoptions(linewidth=150) 
```

用你需要的任何东西替换 150。现在，按照您的要求打印（我想这意味着没有小数点）：

```
print my_matrix.astype('i') 
```

如果您有浮点值，您还可以使用以下选项控制打印输出的精度`precision`：

```
np.set_printoptions(precision=3) 
```

# python - 打印列表的行

> ID：13676257
> 
> 赞同：0
> 
> 时间：2012-12-03T02:11:48.880
> 
> 标签：python

我正在尝试标记矩阵的行和列。

我可以创建列，但似乎无法正确创建行

这是我所做的：

```
matrix = [[1,0,1],[1,0,1],[1,0,1]]
row = 0
col = 0
dim = len(matrix)
for i in range(dim):
    print "\t", "col",i,

for r in range(0,dim):
    print
    for c in range(0,dim):
        print "\t", matrix[r][c], 
```

有人有好主意吗？

这是我得到的结果

```
col 0   col 1   col 2
1       0       1
1       0       1
1       0       1 
```

我正在寻找打印：

```
 col 0     col 1   col 2
row0    1       0       1
row1    1       0       1
row2    1       0       1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:23:31.300

```
matrix = [[1,0,1],[1,0,1],[1,0,1]]
print '\t' + '\t'.join('col{}'.format(i) for i in xrange(len(matrix[0])))
for i,row in enumerate(matrix):
    print 'row{}\t'.format(i) + '\t'.join(str(x) for x in row) 
```

# excel - 循环读取excel数据

> ID：13676259
> 
> 赞同：1
> 
> 时间：2012-12-03T02:12:26.003
> 
> 标签：excel, vba, vb.net, excel-interop

我需要将读取的数据从 excel 循环到 vb.net，当我到达最后一行/列“！@#$%^&*()”时，excel 数据将停止读取。我怎样才能做到这一点？

```
Imports Excel = Microsoft.Office.Interop.Excel
Public Class Form1
    Dim xlApp As Excel.Application
    Dim xlWorkBook As Excel.Workbook
    Dim xlWorkSheet As Excel.Worksheet
    Dim xRange As Excel.Range
    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    End Sub
    Private Sub cmdGenerate_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdGenerate.Click
        'Dim row As String
        Dim empty_cell_ctr As Integer = 0 '5
        Dim end_of_xlsheet As Boolean = False
        Dim sRow As Integer 'start row
        Dim col_end As Integer 'col W
        '
        'loading excel(open and read)
        xlApp = New Excel.ApplicationClass
        xlWorkBook = xlApp.Workbooks.Open("c:\sample.xls")
        xlWorkSheet = xlWorkBook.Worksheets("Timesheet")
        xlApp.Visible = True

        While Not end_of_xlsheet

           If sRow = "'!@#$%^&*()_+" Then
                xRange = xRange.Cells(sRow, col_end)
                end_of_xlsheet = False 'end of sheet
                Continue While
           End If

           sRow += 1

        End While

        MessageBox.Show(sRow)
    End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-09T17:32:11.353

您似乎想多了，您可以通过访问**UsedRange**属性来获取电子表格中的所有数据，然后通过访问此对象的**Value2属性将其加载到二维数组变量中，如下所示：**

```
Dim application = New Excel.Application()
Dim workbook As Excel.Workbook = application.Workbooks.Open("C:\aaa\bbb.xlsx")
Dim worksheet As Excel.Worksheet = workbook.Sheets(1)

Dim usedRange = worksheet.UsedRange
Dim usedRangeAs2DArray As Object(,) = usedRange.Value2

workbook.Save()
workbook.Close()
application.Quit()

Marshal.ReleaseComObject(application) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T02:41:55.187

您可以使用`LIKE`运算符:)

```
'Not sure why you are trying to check Row number for set of characters...

Excel.Range range = sheet.UsedRange;
Int rows_count = range.Rows.Count;

For (int sRow = 1; sRow <= rows_count; sRow++)               
    If (sheet.Cells[sRow, col_end].value Like "*'!@#$%^&*") Then
        '-- input the data to where ever you want. It is best to store it into an array first..
        xRange = sheet.Cells[i, col_end].value; 
        Break;
    Else 
        sRow++;           
    End If 
```

请查看以下参考资料，以更好地了解您的选择。

*   [将数据从 Excel 导入 VB.Net](http://www.codeproject.com/Questions/305215/How-to-import-data-from-excel-sheet-to-datagridvie)

*   [从 Excel 读取数据到 VB.Net](http://www.dreamincode.net/forums/topic/240406-question-read-data-from-excel-file-vbnet-2010/)

# java - 解析 VS 视为字符串 (JSON)

> ID：13676266
> 
> 赞同：0
> 
> 时间：2012-12-03T02:13:33.757
> 
> 标签：java, json, performance, parsing

各位程序员，

我正在开发一个速度是关键的 JAVA 应用程序。我需要处理一个 JSON 流（对服务器的请求返回一个我不断解析的 json 对象，以便稍后对其进行分析）。Json 对象大约有 2000 个字符长，所以我想知道将其视为字符串（使用 indexOf、子字符串等）而不是使用 JSON 解析器是否会更快。（我同时使用了 Jackson 和 Json-lib，没有明显的区别）？它会为我节省几毫秒吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:16:10.320

这取决于您需要从中了解什么，但总的来说，我认为使用 JSON 解析器会更好。解析器将被高度优化，因此如果您需要读取许多值，它将击败您自己的尝试。此外，解析器将忽略空格，而您必须明确处理它。

自己检查一些东西比你想象的要难。例如，如果您需要知道属性 'x' 是否存在，您不能只检查字符串是否存在`x`，因为它也可以是值的一部分。您不能寻找`x:`，因为它们之间可能存在空格。如果你找到了`x`，你知道它是否在正确的地方吗？它是正确对象的一部分，还是您根本没想到会有子对象的一部分？

在不知不觉中，您正在自己编写解析器。

如果您没有注意到差异，请不要打扰并使用解析器，因为它是最简单、最安全和最灵活的选择。仅在需要时才开始优化。

# ruby-on-rails - 使用 activerecord-sqlserver-adapter 时出错

> ID：13676267
> 
> 赞同：0
> 
> 时间：2012-12-03T02:13:46.527
> 
> 标签：ruby-on-rails, sql-server, activerecord, gem, adapter

我安装了 activerecord-sqlserver-adapter 以便它出现在我的本地 gem 中。运行命令...

```
rails generate scaffold Tablename fieldname:fieldtype 
```

返回错误（如下所示）。我已经安装了 rails 1.9.2。任何指导或帮助将不胜感激。谢谢

```
C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:251:in `require': Please install the sqlserver adapter: `gem install activerecord-sqlserver-adapter` (no such file to load -- active_record/connection_adapters/sqlserver_adapter) (LoadError)
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:251:in `require'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:50:in `resolve_hash_connection'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:41:in `resolve_string_connection'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/connection_adapters/abstract/connection_specification.rb:129:in `establish_connection'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/lazy_load_hooks.rb:42:in `each'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-3.2.8/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/active_record/base.rb:721:in `<top (required)>'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/generators/named_base.rb:166:in `pluralize_table_names?'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/generators/named_base.rb:114:in `table_name'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activerecord-3.2.8/lib/rails/generators/active_record/model/model_generator.rb:17:in `create_migration_file'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `block in invoke_all'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `each'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `map'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `invoke_all'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/group.rb:238:in `dispatch'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:109:in `invoke'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/group.rb:281:in `block in _invoke_for_class_method'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/shell.rb:74:in `with_padding'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/group.rb:270:in `_invoke_for_class_method'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/group.rb:150:in `_invoke_from_option_orm'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `block in invoke_all'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `each'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `map'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/invocation.rb:126:in `invoke_all'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/group.rb:238:in `dispatch'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/generators.rb:171:in `invoke'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-.2.8/lib/rails/commands/generate.rb:12:in `<top (required)>'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:251:in `require'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:251:in `block in require'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/activesupport-.2.8/lib/active_support/dependencies.rb:251:in `require'
    from C:/Ruby192/lib/ruby/gems/1.9.1/gems/railties-3.2.8/lib/rails/commands.rb:29:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

***当地宝石***

```
actionmailer (3.2.8, 3.1.0, 2.2.3)
actionpack (3.2.8, 3.1.0, 2.2.3)
activemodel (3.2.9, 3.2.8, 3.1.0)
activerecord (3.2.8, 3.1.0)
activerecord-sqlserver-adapter (3.2.10, 3.1.7)
activeresource (3.2.8, 3.1.0)
activesupport (3.2.9, 3.2.8, 3.1.0, 2.2.3)
ansi (1.4.3, 1.3.0)
archive-tar-minitar (0.5.2)
arel (3.0.2, 2.2.1)
bcrypt-ruby (3.0.1 x86-mingw32)
builder (3.0.4, 3.0.0)
bundler (1.2.1)
coffee-rails (3.2.2, 3.1.1)
coffee-script (2.2.0)
coffee-script-source (1.4.0, 1.1.2)
columnize (0.3.6)
erubis (2.7.0)
execjs (1.4.0, 1.2.9)
ffi (1.1.5)
hike (1.2.1)
i18n (0.6.1, 0.6.0)
journey (1.0.4)
jquery-rails (2.1.4, 2.1.3, 1.0.14)
json (1.7.5, 1.6.1)
linecache19 (0.5.12)
mail (2.4.4, 2.3.0)
mime-types (1.19, 1.16)
minitest (4.1.0, 3.5.0, 3.4.0, 1.6.0)
multi_json (1.4.0, 1.3.7, 1.3.6, 1.0.3)
nokogiri (1.5.5 x86-mingw32)
polyglot (0.3.3, 0.3.2)
rack (1.4.1, 1.3.4)
rack-cache (1.2, 1.0.3)
rack-mount (0.8.3)
rack-ssl (1.3.2)
rack-test (0.6.2, 0.6.1)
rails (3.2.8, 3.1.0)
railties (3.2.8, 3.1.0)
rake (10.0.2, 10.0.1, 0.9.2.2, 0.9.2, 0.8.7)
rdiscount (1.6.8)
rdoc (3.12, 3.10, 2.5.8)
ruby-debug-base19 (0.11.25)
ruby-debug-ide (0.4.16)
ruby-debug19 (0.11.6)
ruby_core_source (0.1.5)
sass (3.2.3, 3.1.10)
sass-rails (3.2.5, 3.1.4)
sprockets (2.1.3, 2.0.2)
sqlite3 (1.3.6 x86-mingw32, 1.3.4 x86-mingw32)
sqlite3-ruby (1.3.3)
thor (0.16.0, 0.14.6)
tilt (1.3.3)
tiny_tds (0.5.1 x86-mingw32)
tmail (1.2.7.1)
treetop (1.4.12, 1.4.11, 1.4.10)
turn (0.9.6, 0.8.3)
tzinfo (0.3.35, 0.3.30)
uglifier (1.3.0, 1.0.3)
win32-sound (0.5.0) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:59:55.877

终于解决了这个问题。为了解决这个问题，我卸载了 2 个冲突版本的 activerecord-sqlserver-adapter，安装了 ruby​​-odbc gem，安装了 activerecord-sqlserver-adapter，调整了 gemfile 以反映正确的版本，然后运行 ​​bundle update，然后 bundle install，最后是 rails 生成脚手架.. 。 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:34:04.403

宝石列在您的`Gemfile`?

添加到您的 gemfile（[gem 手册](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter#installation)）

```
gem 'tiny_tds'
gem 'activerecord-sqlserver-adapter', '~> 3.1.0' 
```

`bundle install`再次运行

# javascript - 更高级的 javascript 模式的困难

> ID：13676273
> 
> 赞同：1
> 
> 时间：2012-12-03T02:14:48.267
> 
> 标签：javascript, jquery, libraries

我在为模仿 jQuery 和其他库的练习而创建的小型 Javascript 库时遇到了一些麻烦。截至目前，它不起作用。我对 Javascript 和一般脚本非常陌生，因为我才开始自学，所以我很可能只是错过了对大多数人来说显而易见的东西。我已经尝试过寻找解决方案，但我一直无法找到解决方案，所以我自己求助于它。

这是图书馆本身：

```
(function(window, undefined) {
var document = window.document
var $m = function(obj) {
if (typeof obj === "object") {
    return obj
}
else {
    return document.getElementById(obj)
}

class: function(name){
    var ele = document.getElementsByTagName('*')
    var objects = []

    for (var q = 0 ; q < ele.length ; ++q){
    if (ele[q].className === name){
        objects.push(ele[q])
    }
    }
    return objects
}

s: function(){
    return this.style
}

window.$m = $m

})(window) 
```

简要编辑： $m 旨在成为具有方法类和 s 的对象。

这就是它在一个简单的测试页面中的引用方式：

```
<h1 class="heading" onmouseover="$m(this).s.setAttribute('text-decoration', 'underline')" onmouseout="$m(this).s.setAttribute('text-decoration', 'none')">Testing.</h1> 
```

另一个编辑：我试图这样做，虽然它没有抛出错误，但它不能正常工作。我对到底没有被调用的东西感到有些困惑。

这是新图书馆：

```
(function(window, undefined) {
    //set document to this local scope
    var document = window.document
    //create $m object
    var $m = function(obj) {
    //if it is anything but an element return itself
        if (typeof obj === "object") {
        return new init(obj);
        }
    //if it is an element return that element
        else {
        return new init(document.getElementById(obj));
        }
    }

    function init(elem){
        //set properties
        this.elem = elem;
    }

    init.prototype = {
        //return style
        sty: function() {
            return this.elem.style;
        },

            //return all objects with a certain class

        cla: function() {
        var allelem = document.getElementsByTagName('*')
        var give = []

        //gather all elements in the document and get those with matching class
            for (var q = 0 ; q < allelem.length ; ++q){
        if (allelem[q].className === this.elem.className){
            give.push(allelem[q]);
        }
        }
        //return found elements
        return give;
    }
    }
    //expose $m to global scope
    window.$m = $m;
})(window) 
```

并尝试修复它的引用方式：

```
<h1 class="heading" id="test" onmouseover="$m(this).sty.textDecoration='underline'" onmouseout="$m(this).sty.textDecoration='none'">Testing.</h1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:30:10.370

There's a couple of things wrong here. First, as user1689607 says, your syntax is invalid; you want (I think) the following for the last part:

```
function class(name){
    var ele = document.getElementsByTagName('*')
    var objects = []

    for (var q = 0 ; q < ele.length ; ++q){
        if (ele[q].className === name){
            objects.push(ele[q])
        }
    }
    return objects
}

function s() {
    return this.style
} 
```

This still won't work, though, since `class` is a [reserved word](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Reserved_Words).

Furthermore, your code from further up isn't going to allow you to do what you're trying to do in your HTML. What you're looking for is to create a new object containing the parameter you pass to `$` as a field, with the functions you've defined as members.

Try the following:

```
function MyObjConstructor(param) {
    this.field = param;
}

MyObjConstructor.prototype = 
{
    s:function(){...}//As your S function, but replace "this" with "this.field"
    clazz:function(){...}//As your class function, but replace "this" with "this.field"
} 
```

and finally

```
function $m(obj) {
    if (typeof obj === "object") {
        return new MyObjConstructor(obj);
    }
    else {
        return new MyObjConstructor(document.getElementById(obj));
    }
} 
```

This results in each object that is passed to your `$` function being wrapped, and exposing the appropriate methods. I'm not sure how jQuery does it, but this is probably a good place to start.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:25:48.210

# php - CodeIgniter 列表字段

> ID：13676279
> 
> 赞同：5
> 
> 时间：2012-12-03T02:16:04.537
> 
> 标签：php, mysql, codeigniter, codeigniter-2

我正在使用 CodeIgniter 2.1.3。我对`list_fields()` 应该返回 MySQL 结果的字段数组的函数有疑问。所以我下面的代码应该列出 MySQL 结果的所有字段。

```
$query = $this->db->query("SELECT * from $tablename where REGNO='$keyword' " );
$fields  = $query->list_fields();
foreach ($fields as $f)
{
echo $f;
} 
```

它在 Windows 中运行良好，但在 Linux 中无法运行，但如果结果中的行数为零，它甚至在 Linux 中也能运行。

知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:19:01.400

尝试检查您的 linux 机器上的 mysql 是否有任何错误（通常位于`/var/log/mysql/error.log`）。

确保您的 Linux 机器中的 PHP 和 MySQL 版本与您的 Windows 机器相同**，以防**它们在特定版本中出现错误。

# html - CSS div 重叠

> ID：13676283
> 
> 赞同：-1
> 
> 时间：2012-12-03T02:16:57.083
> 
> 标签：html, css

嘿伙计们，我得到了一个半淡出的图像，当你将鼠标悬停在它上面时，它会淡入屏幕。我也有一个我制作的盒子，所以当你将鼠标悬停在上面时，它会改变颜色。然而问题是，如果我让盒子绕着图像转，唯一有效的就是盒子改变颜色，所以它与另一个图像重叠。有任何解决这个问题的方法吗？

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="eng" lang="eng">
<head>

<style>
.meh
{
    position: relative; 
    opacity:0.5;
    filter:alpha(opacity=40); 
    width: 200px;
    height: 200px;
    top: -550px;
    left: 740px;

}

.meh:hover
{
    opacity:1.2;
    filter:alpha(opacity=100); 
}

.border
{
    position: relative; 
    height: 200px; 
        width:  200px; 
        border: 1px solid black;  
        text-align:center; 
    top: -650px;
}

.border:hover
{
    border: 1px solid green;
}
    </style>

</head>
<body>

<div class="meh">
        <img src="http://lorempixel.com/50/50" alt="meh">
</div>

<div class="border">    
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:01:27.050

为什么有顶部：-550px；给定值？？

我在这里删除了这些值。

**方法 - 1**（获得整个 div 的悬停效果）

```
.meh
{
    position: relative; 
    opacity:0.5;
    filter:alpha(opacity=40); 
    width: 200px;
    height: 200px; 
}
.meh:hover
{
    opacity:1.2;
    filter:alpha(opacity=100); 
}
.border
{
    position: relative; 
    height: 200px; 
        width:  200px; 
        border: 1px solid black;  
        text-align:center;     
}
.border:hover
{
    border: 1px solid red;
}​ 
```

**[演示](http://jsfiddle.net/ARFpj/1/)**

* * *

**方法 - 2** （为两个 div 提供单独的悬停效果）

只需添加 display:inline 到`.meh`

```
.meh
{
    position: relative; 
    opacity:0.5;
    filter:alpha(opacity=40); 
    width: 200px;
    height: 200px; display:inline
} 
```

**[演示](http://jsfiddle.net/ARFpj/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:39:17.627

让我试试...

```
 <style>
    .meh
    {
        z-index: 500;
        width: 200px;
        height: 200px; 
        text-align: center; 
    }
    .meh img {
        margin-top: 50px;
        opacity:0.5;
        filter:alpha(opacity=40); 
    }
    .meh img:hover {
        opacity:1.2;
        filter:alpha(opacity=100); 
    }   
    .border {
        z-index: -1;
        background: transparent;
        position: absolute;
        top: 0;
        height: 200px; 
                width:  200px; 
        border: 1px solid black;  
    }

    .border:hover{
        border: 1px solid green;
    }
        </style> 
```

我不知道这是否是你想要达到的风格。我已经更改了您的 css，因为您的方法是在元素图像和 div.box 上执行“：悬停”选择器。我还没有真正尝试过同时在 css 中执行两个悬停。如果您愿意，我建议您在 jquery 或 javascript 上执行此操作。

你可以试试这个并评论你的CSS。

# java - 数组中的 ParseInt

> ID：13676288
> 
> 赞同：0
> 
> 时间：2012-12-03T02:17:29.593
> 
> 标签：java, parseint

```
import java.util.Scanner;

public class NumAverage {

    public static void main (String [] args)
    {
        //int a,b;
        int[] numbers = new int [10];

        Scanner numreader = new Scanner(System.in);

        try
        {
            System.out.println("Enter 10 num");
            for (int i = 0; i < numbers.length; i++)
                numbers[i] = numreader.nextInt();
                //numbers[i] = Integer.parseInt(s)
            //for (int i = 0; i < numbers.length; i++)
            //{
                //sum += numbers[i];
            //}
        }
        catch(NumberFormatException numfo)
        {
            System.out.println(numfo.getMessage() + "cannot be converted to integer");
        }
  }
} 
```

如果用户尝试输入字符串而不是整数，我如何才能将我从键盘输入到数组中的数字变为 parseInt

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:25:10.683

尝试：

```
import java.util.Scanner;

public class NumAverage {

public static void main (String [] args)
{
    //int a,b;
    int[] numbers = new int [10];

    Scanner numreader = new Scanner(System.in);
    System.out.println("Enter 10 num");
    for (int i = 0; i < numbers.length; i++) {
        // Without the try and catch you get the appropriate exception,
        // NumberFormatException in this case
        String str = numreader.next();
        numbers[i] = Integer.parseInt(str);

        //try {
        //    numbers[i] = Integer.parseInt(numreader.next());
        //} catch(NumberFormatException e) {
        //    number[i] = 0; // or whatever you want
        //}
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-06T02:52:30.463

这就是我会为你的情况做的事情。

```
int[] numbers = new int[10];

Scanner numreader = new Scanner(System.in);

System.out.println("Enter 10 numbers");

// Get User Input
for (int i = 0; i < numbers.length; i++) {
    try {
        numbers[i] = Integer.parseInt((String) numreader.nextLine());
    } catch (NumberFormatException numFormatE) {
        System.out.println(numFormatE.getMessage() + "cannot be converted to integer");
        i = i - 1; // Restart current iteration.
    }
}
numreader.close();

// Loop through the number to get sum of the number.
int sum = 0;
for (int i = 0; i < numbers.length; i++) {
    sum += numbers[i];
}
System.out.println(sum); 
```

**但是，如果您想在主循环中组合*sum*，这也应该有效：**

```
int[] numbers = new int[10];
int sum = 0;

Scanner numreader = new Scanner(System.in);

System.out.println("Enter 10 numbers");

// Get User Input
for (int i = 0; i < numbers.length; i++) {
    try {
        numbers[i] = Integer.parseInt((String) numreader.nextLine());
    } catch (NumberFormatException numFormatE) {
        System.out.println(numFormatE.getMessage() + "cannot be converted to integer");
        i = i - 1; // Restart current iteration.
    }
    sum += numbers[i]; // Add the number in loop
}
System.out.println(sum);
numreader.close(); 
```

**更新：固定代码格式**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:21:37.197

如果 s 不是整数，则 Integer.parse(String s) 会抛出 NumberFormatException。所以用 try-catch 子句包围字符串到 int 的转换

# ms-access-2010 - Access 2010 ADP 将 1 附加到对象名称的末尾

> ID：13676293
> 
> 赞同：0
> 
> 时间：2012-12-03T02:18:15.267
> 
> 标签：ms-access-2010, adp

我设法在我的笔记本电脑上破坏了 Access。我安装了 Office 2010，然后在参加 MS 演示后决定升级到 Office 2013。这对我来说不是最好的举动。

安装后我意识到 Access 2013 不支持 ADP。所以运行安装程序并删除 Access 并从 Office 2010 重新安装它。此时一切都很好。

今天早上我决定完全卸载 Office 2013 并重新安装 Office 2010。大多数办公应用程序都运行良好，但是当我尝试在 Access 2010 中运行我的 ADP 时，它似乎在我所有数据库的末尾附加了一个 1对象，然后出错说它找不到对象。

我在尝试在数据库的打开表单上键入组合框时遇到以下错误。“找不到对象‘Company1’”。

它找不到的表对象的正确名称是 Company，而不是 Company1。它似乎也在为其他对象添加一个。

我已经检查了数据库的连接属性，并且测试正常。我可以在设计视图中打开表格，它会显示所有列等，但我无法在数据表视图中打开它来查看行。我得到与上面相同的错误。

我不相信 ADP 文件本身已损坏，因为我可以从另一台 PC 上正常打开它。

我曾尝试卸载 Office 2010 并从头开始重新安装，但似乎无法解决问题。

是否有注册表设置或正在使用对象名称的东西？

我不知所措，因此不胜感激。

谢谢，迈克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:32:07.663

当我的电脑遇到类似问题时，我发现了你的问题；在我的情况下，我将 Access 2010 添加到带有 Access 2003 的 PC 中 - 当我这样做时，当我尝试过滤表单时它会导致问题。解决方案是降级 DLL

C:\Program Files\Common Files\Microsoft Shared\MSClientDataMgr\MSCDM.DLL

版本 14.0.4731.1000 必须降级到 11.0.8204.0。突然过滤又起作用了！

所以昨晚我在 Access 2010 中测试了我的一个 ADP（他们希望我们升级！）我遇到了同样的问题 - 它在表、视图、存储过程等中附加了“1”。所以一时兴起，我改回了较新的DLL。它成功了，我把我的桌子/物品拿回来了！似乎不同版本的 DLL 与不同版本的 MS Access 存在问题。

尽管您可能已经卸载了 Access 2013，但它不会将您的所有 DLL 都更改为旧的。我建议您重命名 MSCDM.DLL（右键单击它并首先获取版本号）并查看是否可以在其位置安装第 14 版。它不需要注册或重新启动——当我更换 DLL 并再次打开我的 ADP 时，我的工作正常。

祝你好运！

*   凯文

# ios6 - 面向 OS 5.1 的应用程序无法在 iOS 6 上安装

> ID：13676295
> 
> 赞同：1
> 
> 时间：2012-12-03T02:18:38.927
> 
> 标签：ios6, installation

我的应用程序是为 iOS 5.1 及更高版本编译的。我可以使用 testflight 在 iPad 1 上安装它。但是，该应用程序无法在装有 iOS 6 的 iPad 3 上安装。两台设备都在配置文件中。

有谁知道问题可能是什么？

这是我的构建设置：

基础 SDK：最新 iOS (iOS6.0)

iOS 部署目标：iOS 5.1

有效架构：armv7 armv7s

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T03:17:30.157

原来它是配置文件。我的机器上有几个配置文件，我在创建 IPA 文件时选择了错误的一个。

# c++ - C++ lambda 引用

> ID：13676296
> 
> 赞同：2
> 
> 时间：2012-12-03T02:18:49.357
> 
> 标签：c++, c++11, lambda

这是我目前正在使用的一些代码：

```
Entity *Engine::findEntity(const std::string &name)
{
    std::for_each(p_entities.begin(), p_entities.end(),[](std::pair<const int, const std::list<Entity*>> pair) {

        std::for_each((pair.second).begin(),(pair.second).end(),[&](const Entity* &entity) {

            if ( entity->getAlive() == true && entity->getName() == name )
                return entity;
        });
    });
    return nullptr;
} 
```

我从 intel c++ 收到以下错误：

> 错误：无法在此 lambda 主体中引用此封闭函数局部变量，因为封闭 lambda 不允许隐式捕获

错误所指的封闭函数局部变量是“const Entity* &entity”。

如果我将 lambda 变量捕获方法从 [&] 更改为 [&entity]，我会收到以下错误：

> 错误：标识符“实体”未定义

我想了解为什么会发生这种情况以及我可以做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T04:59:12.437

如果我们在 C++11 中有更好的 for-each，为什么还要为 std::for_each、find_if 或迭代器烦恼？

编码更短：

```
const Entity *Engine::findEntity(const std::string &name)
{
  for(auto& eit : p_entities)
    for(auto pe : eit.second)
      if ( pe->getAlive() == true && pe->getName() == name )
        return pe;

  return nullptr;
} 
```

只需将其与基于迭代器的解决方案进行比较：

```
//...
#include <iterator> // do not forget this.

typedef std::map<int, const std::list<Entity*> > entity_map_t;

const Entity *Engine::findEntity(const std::string &name)
{
  using namespace std;
  const Entity* found_entity = nullptr;

  entity_map_t::iterator eit;
  for(eit=p_entities.begin(); (!found_entity) && eit!=p_entities.end(); ++eit)
  {
    list<Entity*>::const_iterator it_pEntity; // I called this originally lit. Maybe this is more expressive
    for(it_pEntity=eit->second.begin(); (!found_entity) && it_pEntity!=eit->second.end(); ++it_pEntity)
    {
      if ( (*it_pEntity)->getAlive() == true && (*it_pEntity)->getName() == name )
           found_entity = *it_pEntity;
    }
  }
  return found_entity;
} 
```

请注意，即使是迭代器也比任何 lambda 方法都要排序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T02:25:06.593

据我所知，您还需要在内部和外部 lambda 中捕获“名称”。
另一方面，实体不能被捕获，因为它是一个函数参数。

另外，我不鼓励您使用`std::list<Entity*>>`.
使用相当`std::list<Entity*> >`，因为一些编译器将前者误解为 operator< 和 operator>>。

更正了代码以使其编译：（`string & name`由 ref 捕获。）

```
Entity *Engine::findEntity(const std::string &name)
{
    using namespace std;

    for_each(p_entities.begin(), p_entities.end(),
      [&name](pair<const int, const list<Entity*>>& pair) 
      {
        for_each((pair.second).begin(),(pair.second).end(),
          [&name](const Entity* entity) 
          {
             if ( entity->getAlive() == true && entity->getName() == name )
               return entity;
          });
      });
    return nullptr;
} 
```

我会仔细检查这段代码，但现在应该没问题。（除了你放错了一些 &'s：pair 应该是 const ref，entity 应该只是一个普通的 const 指针。）

建议：为了使您的代码更具可读性，您可以将 lambda 标头拆分到下一行，也可以使用 in-function `using namespace std`。

更新：您的代码中仍然存在错误。`return`仅从 lambda 返回，但找到的实体永远不会返回。

UPDATE2：进一步更正，以便函数正确运行：

```
// returns the last found entity.
const Entity *Engine::findEntity(const std::string &name)
{
    using namespace std;
    const Entity * found_entity=nullptr;

    for_each(p_entities.begin(), p_entities.end(),
      [&name, &found_entity](pair<const int, const list<Entity*> >& pair) 
      {
        for_each((pair.second).begin(),(pair.second).end(),
          [&name, &found_entity](const Entity* entity) 
          {
             if( entity->getAlive() == true && entity->getName() == name )
               found_entity = entity; // here you need to modify the variable captured from the outside.
          });
      });
    return found_entity;
} 
```

**但我不会`for_each`在这种情况下**使用，因为它没有，`break`所以即使在找到实体之后它也必须完成循环。我宁愿在这里使用迭代器。

* * *

**这部分仅适用于 OP。**这就是我填补空白的方式（整个代码）：

```
#include <iostream>
#include <list>
#include <string>
#include <map>
#include <algorithm> 

class Entity{

public:
  bool getAlive() const {return true;}
  std::string getName() const {return "Barna";}
};

class Engine{

public:
  const Entity *findEntity(const std::string& name);
private:
  std::map<int, const std::list<Entity*> > p_entities;
};

const Entity *Engine::findEntity(const std::string &name)
{
  using namespace std;
  const Entity* found_entity = nullptr;
  for_each(p_entities.begin(), p_entities.end(),
      [&name, &found_entity](pair<const int, const list<Entity*> >& pair) 
      { 
        for_each((pair.second).begin(),(pair.second).end(),
          [&name, &found_entity](const Entity* entity) 
          {
            if ( entity->getAlive() == true && entity->getName() == name )
               found_entity = entity;
          });
      });
  return found_entity;
}

int main()
{
  Engine e;
  e.findEntity("he");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T03:20:34.093

这是 Barnabas 解决方案的一个稍微高效的版本：

```
// returns the first found entity.
const Entity *Engine::findEntity(const std::string &name)
{
  using namespace std;
  const Entity * found_entity=nullptr;

  find_if(p_entities.begin(), p_entities.end(),
    [&name,&found_entity](pair<const int, const list<Entity*> >& pair) 
    {
      auto it = find_if((pair.second).begin(),(pair.second).end(),
        [&name](const Entity* entity) 
        {
          if( entity->getAlive() == true && entity->getName() == name )
            return true;
          else
            return false;
        }
      );
      if (it != (pair.second).end()) {
        found_entity = *it;
        return true;
      } else {
        return false;
      }
    }
  );
  return found_entity;
} 
```

请注意，这将返回第一个找到的实体。如果您想要最后一个，而不是向前搜索，请使用`rbegin`and`rend`代替`begin`and`end`并在向后搜索时找到第一个。

# android - 如何在自定义视图上设置样式

> ID：13676299
> 
> 赞同：4
> 
> 时间：2012-12-03T02:18:54.620
> 
> 标签：android, android-layout

如果我子类化一个小部件，例如 EditText，我如何在其上应用样式？

例如，如果我的应用程序中有一个普通的 EditText，我可以在 style.xml 中执行以下操作并更改所有 EditText 实例的外观：

```
<style name="AppTheme" parent="android:Theme.Light">
    <item name="android:editTextStyle">@style/Edit</item>
</style>

<style name="Edit" parent="@android:style/Widget.EditText">
    <item name="android:background">@drawable/edit</item>
</style> 
```

但是，如果我对 EditText 进行了子类化并有一个 MyEditText 类，如何将样式设置为 MyEditText 的所有实例？例如：

```
<style name="AppTheme" parent="android:Theme.Light">
    <item name="MyEditText">@style/Edit</item>
</style> 
```

**编辑：** *澄清*

我**并不是**要添加新的属性，然后我就可以将其用于各种事情。

我正在寻找一种方法来简单地声明我希望*MyEditText类型的所有小部件都具有由样式**@style/Edit*在应用程序范围内定义的默认外观。换句话说，就像您可以在主题中设置 EditText 的默认外观一样，如何以相同的方式设置 MyEditText 的默认外观？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-03T02:22:41.740

您必须在自定义视图子类中使用接受 AttributeSet 参数的构造函数。然后你在一个 XML 文件中声明你的样式并像往常一样应用它们。[在此处查看有关创建自定义视图类](http://developer.android.com/training/custom-views/create-view.html)的开发人员页面。祝你好运！

```
class CustomView extends View {
public CustomView(Context ctx, AttributeSet attrs) {
    super(ctx, attrs);
}
} 
```

在 attrs.xml（或任何名称）中定义样式属性

```
<resources>;
   <declare-styleable name="CustomView">
   <attr name="showText" format="boolean" />
   <attr name="labelPosition" format="enum">
       <enum name="left" value="0"/>
       <enum name="right" value="1"/>
   </attr> 
```

在您的 xml 中，您可以像这样包含这些属性

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:custom="http://schemas.android.com/apk/res/com.example.customviews">
 <com.example.customviews.CustomView
 custom:showText="true"
 custom:labelPosition="left" />
</LinearLayout> 
```

# css - “LESS 引擎初始化失败”

> ID：13676301
> 
> 赞同：2
> 
> 时间：2012-12-03T02:19:01.090
> 
> 标签：css, less

我正在使用 LESS CSS 引擎来重新格式化 CSS，但在启动我们的应用程序时收到一条有点无益的消息。“财产已经存在”但哪一个？希望有人对如何追踪欢呼声有一个好主意...

```
2012-12-03 12:57:34,020 [Thread-2] DEBUG com.asual.lesscss.LessEngine- Initializing LESS Engine.
2012-12-03 12:57:34,066 [Thread-2] DEBUG com.asual.lesscss.LessEngine- Using implementation version: Rhino 1.6 release 6 Pre 2007 11 13
2012-12-03 12:57:34,095 [Thread-2] ERROR com.asual.lesscss.LessEngine- LESS Engine intialization failed.
java.lang.RuntimeException: Property already exists
    at org.mozilla.javascript.ScriptableObject.defineProperty(Unknown Source)
    at org.mozilla.javascript.LazilyLoadedCtor.<init>(Unknown Source)
    at org.mozilla.javascript.ScriptRuntime.initStandardObjects(Unknown Source)
    at org.mozilla.javascript.Context.initStandardObjects(Unknown Source)
    at org.mozilla.javascript.Context.initStandardObjects(Unknown Source)
    at com.asual.lesscss.LessEngine.<init>(LessEngine.java:67)
    at com.asual.lesscss.LessEngine.<init>(LessEngine.java:51) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T00:44:10.727

这是一个非常令人惊讶的发现。它是我从 Maven POM 中删除的以下 2 个依赖项之一（我与另一个没有发生这种情况的项目进行比较，并尝试从这个遗留应用程序中删除未使用的依赖项，一次升级几个）......我已经测试过再次添加这些，它在 LessEngine 中引起了同样的问题。这是用lesscss-engine v1.3.0（依赖于rhino 1.7R3）测试的。

```
 <dependency>
        <groupId>org.apache.xmlgraphics</groupId>
        <artifactId>fop</artifactId>
        <version>0.95</version>
    </dependency>
    <dependency>
        <groupId>jtidy</groupId>
        <artifactId>jtidy</artifactId>
        <version>r8-20050104</version>
    </dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T07:39:35.550

如果您使用非常旧的 rhino 运行时 (rs.jar)，则会发生此错误。

# sql - 使用其他查询结果的 SQL 更新

> ID：13676302
> 
> 赞同：2
> 
> 时间：2012-12-03T02:19:01.873
> 
> 标签：sql, sql-update

我已经查看了 [使用连接的 SQL 更新查询](https://stackoverflow.com/questions/982919/sql-update-query-using-joins) ..但这并不是我所需要的（我习惯于编写 SQL，并且不知道如何修改答案）。

我有一个表“a”和一个表“b”。当且仅当“b”具有字段 f1、f2、f3 等于表“a”中的 f1、f2、f3 的记录时，我想更新“a”中的字段 f1。

所以，如果我有

```
TABLE a
f1            f2            f3         ...
------------------------------------------
m             a1a 1a1       1-1-1980
m             a1a 1a1       1-1-1980
m             b1b 1b1       18-1-1982
m             c1c 1c1       16-4-1975

TABLE b
f1            f2            f3         ...
------------------------------------------
m             b1b 1b1       18-1-1982
m             c1c 1c1       16-4-1975 
```

做更新。然后表“a”看起来像：

```
TABLE a
f1            f2            f3         ...
------------------------------------------
m             a1a 1a1       1-1-1980
m             a1a 1a1       1-1-1980
m             b1b 1b1       *-1-1982
m             c1c 1c1       *-4-1975 
```

我知道如何进行字符串操作......但更新查询不是我习惯的，尤其是在这种情况下。我会很感激你的帮助。

谢谢！

编辑：我正在使用 sqlite

编辑2：这是用户建议的查询，但目前无法更新记录（可能是我的错误）：

```
UPDATE diseases
SET dateofbirth='*'||ltrim(dateofbirth,0123456789)
WHERE gender=(SELECT a1.gender FROM diseases AS a1 
              INNER JOIN stage2helper AS b ON     a1.gender = b.gender AND 
a1.dateofbirth = b.dateofbirth AND a1.postalcode = b.postalcode) 

AND postalcode=(SELECT a1.postalcode FROM diseases AS a1 INNER JOIN stage2helper AS b   ON a1.gender = b.gender AND a1.dateofbirth = b.dateofbirth AND a1.postalcode = b.postalcode) 

AND dateofbirth=(SELECT a1.dateofbirth FROM diseases AS a1 INNER JOIN stage2helper AS     b ON a1.gender = b.gender AND a1.dateofbirth = b.dateofbirth AND a1.postalcode =     b.postalcode); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:21:17.863

在 Transact-SQL 中，您可以这样做

```
UPDATE a
SET    a.f3=yourfunctiontogeneratetext()
FROM   b
WHERE  a.f1=b.f1 AND a.f2=b.f2 AND a.f3=b.f3 
```

好的 ANSI SQL 你不能使用 from 语法所以试试

```
UPDATE a
SET    a.f3=yourfunctiontogeneratetext()
WHERE  a.f1 = (SELECT a1.f1
               FROM a as a1
                    iNNER JOIN
                    b ON  a.f1=b.f1 AND a.f2=b.f2 AND a.f3=b.f3) and
       a.f2 = (SELECT a1.f2
               FROM a as a1
                    iNNER JOIN
                    b ON  a.f1=b.f1 AND a.f2=b.f2 AND a.f3=b.f3) and
       a.f3 = (SELECT a1.f3
               FROM a as a1
                    iNNER JOIN
                    b ON  a.f1=b.f1 AND a.f2=b.f2 AND a.f3=b.f3) 
```

我是在平板电脑上做的，所以请原谅任何错别字

# python - python3黑白棋游戏代码

> ID：13676303
> 
> 赞同：-2
> 
> 时间：2012-12-03T02:19:08.157
> 
> 标签：python, python-3.x, quickdraw, reversi

我有一个用于 python 3 的黑白棋游戏的 2 个文件。我的第一个文件称为 reversi.py。它实现了 (a) 游戏玩法的高级控制（例如，从计算机玩家和人类玩家那里获取动作，确定玩家是否用完动作，确定游戏结束并宣布游戏结果） , (b) 通过 QuickDraw 渲染游戏，以及 (c) 从人类玩家那里获取输入。

继承人的文件：

```
from game import *
from copy import deepcopy
from time import sleep
import sys
from subprocess import PIPE,Popen
from threading import Thread
from queue import Queue,Empty

def ParseEvent() :
    r=receive()
    if r==None:return None,None
    s=[x.rstrip().strip() for x in r.split(":")]
    return s[0],s[1]

def highlight(move):
    send( 'color 255 0 0\n circle %d %d 11\n' % \
        (240+(move[0]+0.5)*40, 100+(move[1]+0.5)*40))

def stone(x,y,turn):
    send('color %d %d %d\n' % \
        (255*(1-turn),255*(1-turn),255*(1-turn)))
    send('fillcircle %d %d %d\n' % \
        (240+(x+0.5)*40, 100+(y+0.5)*40, 17))

def draw(board):
    send('color 20 20 20\n clear\n color 15 15 100\n')
    send( 'button button1 600 20 100 20 "Calculate W:L"')
    send('fillrect %d %d %d %d\n' % (240,100,320,320))
    send('color 0 70 0\n') 
    for i in range(1,8):
        send('line %d %d %d %d\n' %\
            (240+i*40,100, 240+i*40,420))
        send('line %d %d %d %d\n' %\
            (240, 100+i*40, 560, 100+i*40))
    for i in range(8):
        for j in range(8):
            if board[i][j] >= 0:
                stone(i, j, board[i][j])

def makeBoard():
    board = []
    for i in range(8):
        board.append([])
        for j in range(8):
            board[i].append(-1)  
    board[3][3], board[4][4], board[3][4], board[4][3] = 0,0,1,1
    return board

def _queueqd(ip,q):
    for line in iter(ip.readline,b''):
        q.put(line)
    ip.close()

def send(*args):
    s=""
    for a in args:
        s+=str(a)
        if s[-1]!=" ":s+=" "
    if s!="":
        op.write((s[:-1]+"\n").encode('utf-8'))
    else:
        op.write("\n".encode('utf-8'))

def receive():
    try:
        return qdq.get_nowait().decode('utf-8')[:-1]
    except Empty:
        return None
def running():
    return qdp.poll()==None

def simulate(numTimes=1000):
    w=0
    b=0
    for i in range(numTimes):
        goesFirst=i&1
        gb=makeBoard()
        sg = Game(gb, goesFirst)
        count = 4
        while count < 64: # max num of stones is 64
            sg.get_moves()
            if sg.moves == []: 
                sg.turn = 1 - sg.turn
                sg.get_moves()
                if sg.moves!= []:
                    continue 
                sg.turn = 1 - sg.turn
                break 
            if sg.turn==0:
                mv = sg.select_move()
            else:
                mv= sg.moves[int(len(sg.moves)*random.random())]
            sg.play_move(mv)
            sg.turn=1-sg.turn
            count+=1
        num_white, num_black = sg.final_result()
        if num_white>num_black:w+=1
        if num_black>num_white:b+=1
    return w/b

try:
    qdp = Popen("java -jar quickdraw.jar",shell=True,stdout=PIPE,stdin=PIPE)
    op=qdp.stdin
    qdq = Queue()
    qdt = Thread(target=_queueqd,args=(qdp.stdout,qdq))
    qdt.daemon=True
    qdt.start()
except:
    print("quickdraw.jar must be in the same directory as this python script.")
    quit()

send( "mouseclick True\n" )
# initialize the board, get ready for the game 

board =makeBoard()
draw(board) 

# game time, let's play...
# human player is white and moves first

g = Game(board, 0)
count = 4
while count < 64: # max num of stones is 64
    g.get_moves()
    if g.moves == []: 
        g.turn = 1 - g.turn
        g.get_moves()
        if  g.moves!= []:
            continue 
        g.turn = 1 - g.turn
        break 
    if g.turn == 0:
        while running():
            event, val = ParseEvent()
            if event == "MouseClicked":
                val=[ int(x) for x in val.split(",")]
                move = [(val[0]-240)//40, (val[1]-100)//40]
                if move in g.moves: break
            elif event=="ButtonClicked":
                send("colour 20 20 20\nfillrect 600 50 200 50\ncolour 255 255 255")
                send('text "Calculating..." 600 80')
                r=simulate()
                send("colour 20 20 20\nfillrect 600 50 200 50\ncolour 255 255 255")
                send("text ",'"W:L=',r,'"'," 600 80")
    else:
        move = g.select_move()
    stone(move[0], move[1], g.turn)
    highlight(move)
    sleep(1)
    board = deepcopy(g.board)
    g.play_move(move)
    g.turn=1-g.turn
    for i in range(8):
        for j in range(8):
            if board[i][j]!= g.board[i][j]:
                stone(i,j,1-g.turn)
    sleep(1)
    stone(move[0], move[1], 1-g.turn) # redraw to de-highlight
    count += 1

# game over, let's announce the result:

num_white, num_black = g.final_result()
send('color 255 255 255\n')
if num_black > num_white:
    send('text "black wins!" 370 470\n')
elif num_black < num_white:
    send('text "white wins!" 370 470\n')
else:
    send('text "tie!" 390 470\n')
send('text "black:" 325 500\n')
send('text "%d" 375 500\n' % num_black)
send('text "white:" 425 500\n')
send('text "%d" 475 500\n' % num_white)

while running():
    pass 
```

这个文件就完成了。我的第二个文件名为 Game.py。第一个文件为玩家可以做出的动作导入这个文件。

```
import random

class Game:
    delta = [[0,-1],[1,-1],[1,0],[1,1],[0,1],\
                [-1,1],[-1,0],[-1,-1]]

    def __init__(self, board, turn):
        self.board = board
        self.turn = turn
        self.moves = self.get_moves()

    def check_move(self, move, d):
        pass #which I have to figure out!

    def get_moves(self):
        pass ##################

    def select_move(self):
        pass ##################

    def play_move(self, move): 
        m,n=move[0],move[1]
        for d in range(8):
            i, j = m, n
            if self.check_move(move,d):
                i, j = i+self.delta[d][0], j+self.delta[d][1]
                while self.board[i][j] == 1-self.turn:
                    self.board[i][j] = self.turn
                    i, j = i+self.delta[d][0], j+self.delta[d][1]
        self.board[m][n]=self.turn

    def final_result(self): 
        black, white = 0, 0   # color 0 is white
        for i in range(8):
            for j in range(8):
                if self.board[i][j] == 0: white += 1
                elif self.board[i][j] == 1: black += 1
        return white,black 
```

我应该填写三个缺失的定义。假设给定回合，check move(self, move, d) 方法检查给定的移动是否沿某个方向 d 得到验证。它相应地返回 True 或 False。换句话说，如果从move指定的格子开始，可以捕获沿方向d的许多对手棋子，那么应该返回一个True。该方法可以方便地用于其他方法，例如 get move() 和 play move()。get move(self) 方法查找当前回合的所有有效移动，并将它们返回到列表中。例如，如果在 [2,4] 和 [3,6] 处有两个移动，那么返回值应该是 [[2,4], [3,6]]。select move(self) 方法从 self.move 中选择一个移动并返回它。显然，最简单的方法是返回随机移动。

所以基本上我有这是“check_move”功能的基础：

```
def check_move(self,move,d):
    check neighboring tile:
        if empty:
            False #can't move
        if enemy present:
            while there are enemy pieces:
                True #can move 
```

这是正确的方向吗？

另外对于 get_moves 我有这样的理由：

```
def get_moves(self): # grid[ij]
    for i in range 
    for j in range
        check for possible move directions:
            check move again:
                if yes then append[ij] to a list of valid moves
        return list of valid moves 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:34:18.017

I think you should first, before you start writing code, think about what defines a valid move in Reversi. Try writing in English what the definition is. For instance, here's the conditions I can think of in a few seconds:

1.  The tested tile must be empty
2.  The tested tile must have an enemy piece next to it in the selected direction.
3.  Past that enemy piece in the given direction, there may be more enemy pieces.
4.  Past all the enemy pieces, there must be a friendly piece (not an empty space or the edge of the board).

I'm not sure if that's comprehensive or not, but it's a reasonable start. Then, think about how to test each of those. Some may easily flow from each other, while others may be separate tests.

I'd also not be shy about reading and adapting the existing code you've been given. For instance, the `play_move` method just below the method's you're going to implement does a very similar loop to what you're going to want in your `check_move` method (though it's flipping the tiles, rather than checking that they can be flipped).

# html - 即使在向右滚动后也使背景图像重复

> ID：13676307
> 
> 赞同：-1
> 
> 时间：2012-12-03T02:19:34.950
> 
> 标签：html, css, background-image, background-repeat

这是问题 [http://screencast.com/t/Dgfd5vTeEY](http://screencast.com/t/Dgfd5vTeEY)

这是网站 [http://eotomarketingsystems.com/](http://eotomarketingsystems.com/)

我到处都看过，但唯一的方法是让背景图像全宽。是通过使用这里的方法：[CSS Tricks-Full Background Image](http://css-tricks.com/perfect-full-page-background-image/)，但它是固定的背景图像，这把一切都搞砸了。向右滚动后，有没有更简单的方法让它到达那个区域？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:01:23.687

**现在** 像这样`min-width`在你的**身体CSS中定义**

如果你的`main wraper` **宽度**是`980px;`

比定义你的

```
body{
min-width:980px;
} 
```

# javascript - 有什么方法可以获取调用函数的数组元素的键值吗？

> ID：13676308
> 
> 赞同：2
> 
> 时间：2012-12-03T02:19:35.377
> 
> 标签：javascript, arrays, dynamic, key

我试图通过读取包含可变数量对象的 xml 来减少网页上的代码大小。在 javascript 代码中，我创建了一个数组来保存每个对象并循环通过 xml 数据来创建每个对象。

我循环遍历 xml 节点的数量以创建那么多对象和对象函数（鼠标悬停、onclick 等），但在函数中我使用相同的索引变量来访问当前对象属性，但是当函数实际被调用时该索引变量不再在我的范围内。

无论如何我可以获得调用对象的键（索引）值吗？

```
for(index=0, index < scenes.length; index+=1)
{
 this.thumbs[index] = document.createElement('div');
//setup more properites
this.thumbs_image[index] = document.createElement('img');
//more setup
this.thumbs[index].onmouseover = function(){
me.thumbs_image[index].src = scenes[index].attributes.getNamedItem("src").nodeValue;     //THIS IS THE PROBLEM - WHEN the function is actually called index is no longer the correct index of the array element
}
} 
```

函数 onmouseover 之外的代码可以工作，如果我在 onmouseover 内对索引进行硬编码，它就可以工作。

我尝试使用作为参数传递的索引创建一个单独的函数，但是当我动态分配函数时，我仍然使用索引分配，因为我想不出另一种方式，这也不起作用：

```
this.thumb[index].onmouseover = myFunction(index);

myFunction=function(i){
me.thumbs_image[i].src = scenes[i].attributes.getNamedItem("src").nodeValue;
} 
```

onmouseover 中是否有任何方法可以获取调用它的元素的键？

我希望有一个我只是忽略的明显解决方案 - 非常感谢任何帮助！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:28:51.717

**第一个解决方案：**替换这个：

```
this.thumbs[index].onmouseover = function(){
  me.thumbs_image[index].src = scenes[index].attributes.getNamedItem("src").nodeValue;
} 
```

有了这个：

```
this.thumbs[index].onmouseover = (function(i) {
  return function() {
    me.thumbs_image[index].src = scenes[index].attributes.getNamedItem("src").nodeValue;
  };
})(i); 
```

函数包装器将在闭包中捕获变量的值`i`，以便您可以`i`在调用处理程序时访问该值（而不是不存在的变量）。

**第二种解决方案：（** `onmouseover`和所有其他事件处理程序）将接收一个参数，即事件。该事件知道它的起源。尝试这个：

```
this.thumbs[index].onmouseover = function(evt) {
  console.log(evt.target);
} 
```

在这种特殊情况下，我推荐第二种解决方案，但第一种解决方案中的模式很重要 - 永远不要在循环中直接创建依赖于循环计数器的函数，而是始终使用函数调用来捕获循环计数器的值.

# php - 简单的上传文件表单不适用于某些浏览器

> ID：13676309
> 
> 赞同：0
> 
> 时间：2012-12-03T02:19:41.193
> 
> 标签：php, html, forms, upload

我在上传文件表单时遇到问题。我将在这里写一个不能在所有浏览器中运行的简单代码示例。

HTML 部分是这样的：

```
 <form method="POST" enctype="multipart/form-data" action="match.php">
       <input class="btn btn-info" name="dataset" type="file" id="dataset" />
       <input class="btn btn-info" type="submit" name="submit" value="Submit" />
 </form> 
```

然后，然后在 match.php 文件中，我获取并处理该文件，例如：

```
if ($_FILES["dataset"]["error"] > 0 || !($_FILES["dataset"]["size"] > 0)) {
    $dataset = "default.txt";
    echo 'error:' . $_FILES["dataset"]["error"] . ' -  filesize:' . $_FILES["dataset"]["size"];
} else {
    $dataset = $_FILES["dataset"]["tmp_name"];
    echo "Ok";
    print_r($_FILES);
} 
```

非常简单：如果上传过程中出现错误，我将使用默认文件（并打印一些错误信息），否则一切正常。

好吧，除了在某些浏览器中之外，这非常有效。比如我遇到了**Android默认浏览器**的问题（不是Chrome），Windows系统中的一些浏览器似乎也有问题（我没有自己尝试过，说实话）。

使用我打印的错误信息，看起来`$_FILES["dataset"]["error"]`（输出为 0）中没有错误，但文件大小为**0**（仅在这些浏览器上）。

文件夹权限没有问题（我使用“default.txt”文件信息在文件夹中写入文件），**php.ini**设置没有问题（实际上我用相同的 txt 文件测试它是 65kb）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:13:43.027

尝试更改`name`按钮的属性。我前段时间看到过这个问题。

```
<input class="btn btn-info" type="submit" name="send" value="Submit" /> 
```

# php - 将PHP数组转换为html

> ID：13676312
> 
> 赞同：0
> 
> 时间：2012-12-03T02:19:49.613
> 
> 标签：php, html, arrays

我需要使用一些 div 类将我的 PHP 数组转换为 html。

这是我的代码：

```
<?php
$con = mysql_connect("localhost","root","root");
if (!$con)
  {    die('Could not connect: ' . mysql_error());
  }
mysql_select_db("asd", $con);

$result = mysql_query("SELECT * FROM asd");
$something = array(); 
while ($row = mysql_fetch_assoc($result)) { 
$something[] = array("title"=>$row['title'], 
       "name"=>$row['name'], 
       "content"=>$row['content'],
       "image" => 
           array(
             "cls"=>"slide-image",
             "_src"=>$row['src'],
             "source"=>$row['source']                
             )   
       );
}
mysql_close($con);
?> 
```

我想要这样的输出

```
<div class="class1"> Here title goes</div>
Here name with some class
Here content with some class 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:30:31.450

```
<?php
mysql_connect("localhost","root","root") or die (mysql_error());
mysql_select_db("asd") or die (mysql_error());

$result = mysql_query("SELECT * FROM asd") or die (mysql_error());
while ($row = mysql_fetch_array($result)) { 
       $title = $row['title']; 
       $name = $row['name'] ;
       $content = $row['content'];
       echo "<div class=title>" . $title . "</div>";
}
mysql_close($con);
?> 
```

# java - 在同一个类中同时使用继承和组合？

> ID：13676314
> 
> 赞同：3
> 
> 时间：2012-12-03T02:20:13.233
> 
> 标签：java, oop, class, inheritance, composition

我知道当存在 is-a 关系时使用继承的规则，以及当存在 has-a 关系时使用组合的规则，但是这两个是相互排斥/相互替换的，还是会有一种情况，你应该在同班？

我在 Google 上搜索了很多，但只找到了解释您何时使用每个而不是两者的文章。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:34:46.437

[`Decorator`](http://en.wikipedia.org/wiki/Decorator_pattern)模式是一个经典示例，其中装饰类由同一类的装饰对象的实例组成，并扩展/实现同一类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:23:47.440

它们*不是*相互排斥的。示例：`Boat`和`Sailboat`。`Sailboat`is-a `Boat`，但它有 -a `Sail`，其他`Boat`s 可能有也可能没有。

# c++ - 如果有人可以向我解释这里发生了什么

> ID：13676316
> 
> 赞同：1
> 
> 时间：2012-12-03T02:21:02.700
> 
> 标签：c++, function, stack, operators, bit-manipulation

在我的程序的某个地方我有一个功能

```
for (int i = 0; i < 4; i++) if (!(mask & 1 << i))

{

   string tmp = s;

   b[i](tmp);

   mask |= 1 << i;

   generate(tmp, mask, count - 1);
} 
```

但是，如果我改变一个单一的东西（大概）应该是相同的，那么代码就不再是它应该的了。

如果不是

```
mask |= 1 << i;

generate(tmp, mask, count - 1); 
```

我写的 `generate(tmp, mask | (1 << i), count - 1)`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:23:04.643

这不是一回事。

```
mask |= 1 << i; 
```

改变变量`mask`，而你的版本 - `mask | (1 << i)`- 没有。

这就像说`x += 1`并且`x+1`行为不同 - 当然，表达式的计算结果相同，但`x`仅针对第一个版本进行更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T02:25:15.080

```
mask |= 1 << i; 
```

也可以写成：

```
mask = mask | (1 << i); 
```

在原始代码中，掩码的值为：`1, 3, 7, 15`. 但是，您修改后的版本会生成：`1, 2, 4, 8`. 所以你可以像这样改变它：

```
generate(tmp, mask = mask | (1 << i), count - 1) 
```

具有相同的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T02:22:58.527

使用第一条语句在每次迭代中改变掩码。第二个没有突变。结果语义是不同的，因为掩码在每次迭代中具有相同的值。

# c# - 在“Metro”windows 8 程序中设置鼠标光标位置

> ID：13676317
> 
> 赞同：2
> 
> 时间：2012-12-03T02:21:07.513
> 
> 标签：c#, windows, windows-8, mouse

我正在尝试设置鼠标光标的位置（因此我可以将其锁定在屏幕中央以获取我正在制作的 fps）并且无法找到一种方法来做到这一点。

我需要将光标设置在每一帧的屏幕中间，以便我可以正确处理游戏摄像机（典型的 FPS 摄像机）并且没有 mouse.setposition 等效项，据我所知，这是无法做到的。

我正在用 c# 为 windows 8 商店编写程序。

我已经尝试过：

```
 [DllImport("user32.dll")]
    static extern bool SetCursorPos(int X, int Y); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:40:04.033

我刚刚和一些微软的人谈过，目前不可行，他们希望在下一个 api 版本中添加。

# php - php - 多维数组包装类

> ID：13676318
> 
> 赞同：0
> 
> 时间：2012-12-03T02:21:12.830
> 
> 标签：php, arrays, oop, multidimensional-array

我有一些数据表示为多维数组。我想将这些数据嵌入到我的 OO 应用程序中，并为这些数据提供额外的功能，但也想通过传统的随机访问和使用迭代器来访问它（所以我可以使用 foreach）。换句话说**，我想为多维数组实现一个包装类**。

我已经尝试过的：

**一、ArrayAccess** 这个问题是服务器使用PHP 5.2.17`&offsetGet()`报错，无法通过引用返回，也就是无法实现多维元素访问：

```
$obj[$key1][$key2] = $value; 
```

请注意，升级到较新的 PHP 版本目前不是一个选项

**二、使用魔术方法** 这有点棘手，但是当我尝试使用变量作为键时，我的问题就出现了。例如

```
$obj->$key1[$key2] = $value; 
```

解释器首先评估`$key1[$key2]`抛出一个通知并返回 $key1 的第一个字符，并将其用作我数组上的键。这个我也不知道怎么解决。我曾想过使用方括号来强制操作优先级，但这与我下一次尝试的问题相同：

**三、使用简单的 get 和 set 函数** 再说一遍，旧的 PHP。当我尝试写作时它哭了：

```
$obj->get($key1)[$key2] = $value; 
```

因为它不知道如何索引以圆括号结尾的表达式。

仍然有失策的选择：将数组公开并一起忘记 OO。但在我去那里之前，我想确定真的没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:28:39.780

有时，最好用一个例子来说明。例如，您可以有一个包含产品订购数量的多维数组，其中第一个索引定义客户，第二个索引定义订单，第三个索引定义产品。那么价值就是数量。

**四。使用简单的 get 和 set 函数，但有多个参数：**

```
$value = $obj->get($key1, $key2);
$obj->set($key1, $key2, $value); 
```

或者

```
$quantity = $orderedQuantities($customerName, $orderNo, $productCode); 
```

编写对象包装器的本质是它看起来像一个对象，并且表现得像这样。如果您实现它以使其看起来和行为像一个数组，那么您也可以使用一个数组。将数组包装在行为类似于数组的对象中的唯一原因是您可以通过引用传递它，而无需使用`&`参数。

如果这是您的目标，只需将数组分配给 $obj，然后使用`$obj->arrayprop[$key1][$key2]`. 另一方面，如果您希望它表现得像一个对象，请完全跳过数组语法。

**五、使用嵌套对象** 所以使用同一个例子，你可以写一个客户对象（一种集合），它嵌入了订单对象等。

$quantity = $customers->getCustomerByName($customerName)->getOrder($orderNo)->getProduct($productCode)->quantity;

或者，为了使其更具可读性：

$customer = $customers->getCustomerByName($customerName); $order = $customer->getOrder($orderNo); $orderLine= $order->getOrderLine($productCode); $数量 = $产品->数量；

现在，这些实体中的每一个都由一个对象表示。优点是您可以使用额外的属性轻松扩展此结构。您可以为客户集合提供“findByCustomerNo”和“findByName”方法来查找特定客户，还可以提供一个“filterByPostalCode”，它可以返回一个仅包含来自该邮政编码的客户的新集合。

$order 现在可以包含计算总数的函数。

$orderLine 可能只包含一个 productCode（键）和一个数量，但通过将其设为对象，您可以轻松添加折扣、自定义名称或描述或其他属性。

总而言之，这种结构提供了很大的灵活性，尽管它一开始需要更多的输入和一点点习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:03:30.783

使用嵌套对象可以使 ArrayAccess 工作，而无需传递引用。但是您可以完全忘记内置数组函数。

```
<?php
class ArrObj implements ArrayAccess {
    private $arr;

    public function __construct($arr = null) {
        $this->arr = $arr;
    }

    public function offsetExists($key) {
        return isset($this->arr[$key]);
    }

    public function offsetGet($key) {
        return $this->arr[$key];
    }

    public function offsetSet($key, $val) {
        return $this->arr[$key] = $val;
    }

    public function offsetUnset($key) {
        unset($this->arr[$key]);
    }
}

$a = new ArrObj(array(
    'foo' => new ArrObj(array(
        'bar' => 'qwe'
    ))
));

echo $a['foo']['bar'] . '<br />';
$a['foo']['bar'] = 'asd';
echo $a['foo']['bar'] . '<br />';
?> 
```

输出：

```
qwe
asd 
```

# c# - 命名空间“System”中不存在类型或命名空间名称“SerializableAttributeAttribute”（您是否缺少程序集引用？）

> ID：13676319
> 
> 赞同：0
> 
> 时间：2012-12-03T02:21:32.720
> 
> 标签：c#, xsd, visual-studio-2012, microsoft-metro

使用 xsd 为 xml 文件生成 c# 代码时，出现错误：

命名空间“System”中不存在类型或命名空间名称“SerializableAttribute”（您是否缺少程序集引用？）

命名空间“System.ComponentModel”中不存在类型或命名空间名称“DesignerCategoryAttribute”（您是否缺少程序集引用？）

产生错误的代码：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.17929")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true)]
[System.Xml.Serialization.XmlRootAttribute(Namespace="", IsNullable=false)] 
```

我试着寻找答案。我唯一发现的是：http: [//support.microsoft.com/kb/916649](http://support.microsoft.com/kb/916649)

但这对我不起作用。解决方案资源管理器中没有系统文件夹！我正在使用 Visual Studio 2012，并且正在开发 ac#/xaml Metro 应用程序！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T06:20:19.097

Okay looks like xsd is not yet supported with metro applications! The following link explains that!

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/88d9b73b-5faa-4204-9d06-dc121e709943/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/88d9b73b-5faa-4204-9d06-dc121e709943/)

the Perl script in the last answer can be used to remove the [System.SerializableAttribute()] and [System.ComponentModel.DesignerCategoryAttribute("code")] annotations if you have a big deep xml structure! I did not so I just removed them manually!

I am not sure if removing these annotations will have any bad side effects though. I will update this answer if I face any!

Thanks

# python - TypeError：不支持的操作数类型-python 套接字

> ID：13676322
> 
> 赞同：0
> 
> 时间：2012-12-03T02:21:46.043
> 
> 标签：python, sockets

我一直在尝试解决下面的问题很长时间。我正在尝试获得类似 200,401 eyc 的响应。如果您可以快速查看下面的代码，那就太好了。我尝试了两种不同的方式，但没有一个有效如块内所示。如果有人可以帮助我，我将不胜感激。

```
"head="/questions/ask"
 host = "stackoverflow.com"
 port = 80
 try:
 sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
 except socket.error, msg:
 sys.stderr.write("[ERROR] %s\n" % msg[1])
 sys.exit(1) 
 try:
 sock.connect((host, port))
 except socket.error, msg:
 sys.stderr.write("[ERROR] %s\n" % msg[1]) 
 sys.exit(2)

 sock.send("HEAD  %s  HTTP/1.0\r\n\r\n")%(head)
 #this one gives me error"   sock.send("HEAD head1 HTTP/1.0\r\n\r\n")%(head)
 TypeError: unsupported operand type(s) for %: 'int' and 'str'", my Url is string!

 sock.send("HEAD  head  HTTP/1.0\r\n\r\n")
 #gives error 404

 s=sock.recv(12)
 print s
 sock.close()
 sys.exit" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:28:13.140

```
sock.send("HEAD  %s  HTTP/1.0\r\n\r\n")%(head) 
```

应该

```
sock.send("HEAD  %s  HTTP/1.0\r\n\r\n" % head) 
```

那有意义吗？这是操作的顺序 - 现在发送首先发生，返回一个整数，您尝试在其上`%`用于字符串格式化 - 但在整数上，运算符为您提供模数，后面需要另一个数字。

# objective-c - 如何在我的倒计时 ios 应用程序中使用用户的输入？

> ID：13676325
> 
> 赞同：0
> 
> 时间：2012-12-03T02:21:54.547
> 
> 标签：objective-c, ios, xcode, countdown

我想从用户那里收集一个日期，将其转换为 unix 纪元时间，并使用该纪元时间戳来替换我的代码中 dateWithTimeIntervalSince1970: 之后的时间戳。非常感谢任何帮助，谢谢！

```
-(void)updatelabel{
    NSCalendar *Calender = [[NSCalendar alloc]initWithCalendarIdentifier:NSGregorianCalendar];
    int units = NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
    NSDateComponents *components = [Calender components:units fromDate:[NSDate date] toDate:destinationDate options:0];
    [dateLabel setText:[NSString stringWithFormat:@"%d%c  %d%c  %d%c  %d%c", [components day], 'd', [components hour], 'h',   [components minute], 'm', [components second], 's']];  
}

- (void)viewDidLoad {
    [super viewDidLoad];
    destinationDate = [NSDate dateWithTimeIntervalSince1970:1356088260];
    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updatelabel) userInfo:nil repeats:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:37:45.433

如果您询问如何从用户那里收集日期，最简单的方法是使用 UIDatePicker。假设您正在使用 Storyboard 或 NIB，您将从对象库中拖动控件并将其“Value Changed”事件与操作方法连接起来。

![UIDatePicker](../Images/4336ede949cf0a463a514e9acdd440da.png)

在您的操作方法中，您可以将日期获取为：

```
- (IBAction)dateSelected:(UIDatePicker *)picker {
    NSDate *selectedDate = picker.date;
    // ...
} 
```

相反，如果您有来自用户的 NSString，则可以使用 NSDateFormatter 将字符串转换为 NSDate：

```
NSString *usersDateStr = @"12/01/2012" // this would be retrieved from the user.
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"MM/dd/yyyy";
NSDate *selectedDate = [formatter dateFromString:usersDateStr]; 
```

无论哪种方式，一旦你有一个日期对象，如果需要，你可以将它转换为一个 NSTimeInterval ：

```
NSTimeInterval time = [selectedDate timeIntervalSince1970]; 
```

# algorithm - 二分搜索在遍历成本方面效率不高。什么是？

> ID：13676328
> 
> 赞同：8
> 
> 时间：2012-12-03T02:22:11.583
> 
> 标签：algorithm, big-o, traversal, binary-search

当我试图将二分搜索应用到现实世界时，它让我失望了。场景如下。

> 我需要测试通过无线电通信的设备的范围。通信需要快速进行，但可以容忍缓慢的传输，直到某个时间点（例如，大约 3 分钟）。我需要测试传输是否每 200 英尺成功一次，直到失败，最多 1600 英尺。每 200 英尺将进行一次测试，需要 3 分钟才能执行。

我天真地假设二分搜索将是找到故障点的最有效方法，但考虑到 200 英尺/分钟的行进速度和 3 分钟的测试时间。如果在 500 英尺处发生传输失败，则二分查找不是查找故障点的最有效方法，如下所示。

![在此处输入图像描述](../Images/c9eb3bc6b2e58022c1ca7a663de91af2.png)

简单地走走并测试每个点会更快地找到解决方案，只需要 12 分钟，而二进制搜索和测试需要 16 分钟。

我的问题：当旅行时间很重要时，您如何计算最有效的解决方案路径？这叫什么（例如，二元旅行搜索等）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:58:02.413

二分搜索确实是基于`O(1)`访问时间的；例如，对链表进行二进制搜索几乎没有意义[但请参见注 1]，这基本上就是您正在做的事情，因为您似乎假设只有离散间隔值得测试。如果您正在寻找更准确的答案，您会发现二分搜索允许任意精度，但每精度位需要进行一次额外的测试。

假设您甚至不知道最大值可能是多少。然后你不能先在中间测试，因为你不知道中间在哪里。相反，您可以对限制进行指数搜索（这是一种由内而外的二进制搜索）；您首先在 处进行测试，`x`然后在 处进行测试，直到达到大于最大值的点（信号没有达到那么远）。（是你觉得有趣的最小答案；换句话说，如果第一次测试显示信号没有到达，那么你将停止。）在这个阶段结束时，你将在，对于某个整数，并且你会知道答案在和之间。`2x``4x``x``x``2^ix``i``2^(i-1)x``2^ix`

现在您实际上可以进行二分搜索了，从. 从那里，您可能会前进或后退，但您肯定会旅行，下一次迭代您将旅行，依此类推。`2^(i-2)x``2^(i-3)x``2^(i-4)x`

所以总而言之，在第一阶段（搜索最大值），您走到，并进行了测试。在第二阶段，二元细化，您总共走并做测试。你最终会到达 和 之间的某个点，所以在最坏的情况下你会走过最后一点（最好的情况下，你会走过）。您将完成的测试数量将在 1 次测试范围内。`2^ix``i``(2^(i-1)-1)x``i-1``d``2^(i-1)``2^i``3d``3d/2``2*ceil(log[2](d/x)) - 1``2*log[2](d/x)`

那么什么情况下应该做二分查找算法呢？基本上，它取决于旅行时间和测试时间的比例，以及所需的答案精度。简单的顺序算法在大小移动和测试`d`后找到位置；上面的二进制搜索算法最多在旅行后找到位置，但只在测试周围进行。粗略地说，如果测试花费的成本是旅行成本的两倍以上，并且预期距离远大于精度，那么您应该更喜欢二分搜索。`d/x``x``d/x``d``3d``2 log(d/x)``d/x`

在您的示例中，您似乎想要精度为 200 英尺的结果；行程时间1分钟，考试时间3分钟，是行程时间的两倍多。因此，您应该更喜欢二分搜索，除非您希望以少量的精度倍数找到答案（就像这种情况一样）。请注意，尽管二进制算法使用了 4 次测试和 1000 英尺的行程（与顺序算法的 3 次测试和 600 英尺相比），但将精度提高到 50 英尺只会在二进制算法中增加 4 次测试和 150 英尺的行程，而顺序算法将需要 20 次测试。

* * *

注意 1：实际上，如果测试的成本很高，则使用上述算法对链表进行二进制搜索可能是有意义的。假设测试的成本与列表中的索引不成正比，搜索的复杂性将是`O(N)`线性搜索和二分搜索，但二分搜索会做`O(log N)`测试和`O(N)`步骤，而顺序搜索会做`O(N)`测试和`O(N)`步骤。对于足够大的 N，这无关紧要，但对于实际大小的 N，它可能很重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:16:10.607

根据您实际想要优化的内容，可能有一种方法可以制定出最佳搜索模式。我想你不想优化最坏情况的时间，因为对于许多搜索策略来说最慢的情况是在休息的最后一刻，而二分搜索在这里实际上相当不错——你走到最后而不改变方向，而且你不会做太多的停留。

您可能会考虑不同的二叉树，并且可能会计算出找到叶子所需的平均时间。二分搜索是一种树，边走边测试也是如此——一棵非常不平衡的树，其中每个节点至少有一个叶子连接到它上面。

沿着这样一棵树前行时，您总是从正在行走的路线的一端或另一端开始，在进行测量之前先走一段距离，然后根据结果和树，停止或重复该过程并缩短线，你在它的一端或另一端。

这为您提供了可以使用动态编程进行攻击的东西。假设您已经解决了最多 N 段长度的问题，因此您知道这些长度的最佳解决方案的成本。现在您可以为 N+1 段制定最佳解决方案。考虑以 N+1 种可能的方式将 N+1 个片段分成两部分。对于每一种这样的方式，计算出移动到其决策点并进行测量的成本，然后将决策点两侧的段的两个部分的最佳可能解决方案的成本相加，可能加权以考虑最终进入这些部分的可能性。通过考虑这 N+1 种可能的方式，您可以找出拆分 N+1 段的最佳方式及其成本，并继续下去，直到您为实际拥有的段数找到最佳解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:44:10.843

实际上，二进制搜索可以应用在这里，但有一些变化。我们必须计算的不是中心，而是要访问的最佳位置。

```
int length = maxUnchecked - minChecked;
whereToGo = minChecked + (int)(length * factorIncrease) + stepIncrease; 
```

因为我们需要找到沟通失败的第一个位置，所以有时我们必须返回，之后可以优化使用其他策略

```
int length = maxUnchecked - minChecked;
int whereToGo = 0;
if ( increase )
    whereToGo = minChecked + (int)(length * factorIncrease) + stepIncrease;
else
    whereToGo = minChecked + (int)(length * factorDecrease) + stepDecrease; 
```

因此，我们的任务 - 找出这样的最优 factorIncrease、factorDecrease、stepIncrease、stepDecrease，f(failPos) 的总和值将是最小的。如何？如果 n （总长度 / 200.0f）很小，完整的蛮力将帮助你。否则，您可以尝试使用遗传算法或其他简单的方法。

步长精度 = 1，步长限制 = [0, n)。因子 eps - 1/(4*n)，因子限制 - [0,1)。

现在，简单的代码（c#）来证明这一点：

```
class Program
{
    static double factorIncrease;
    static int stepIncrease;
    static double factorDecrease;
    static int stepDecrease;
    static bool debug = false;

    static int f(int lastPosition, int minChecked, int maxUnchecked, int last, int failPos, bool increase = true, int depth = 0)
    {

        if ( depth == 100 )
            throw new Exception();

        if ( maxUnchecked - minChecked <= 0 ) {
            if ( debug )
                Console.WriteLine("left: {0} right: {1}", minChecked, maxUnchecked);

            return 0;
        }

        int length = maxUnchecked - minChecked;
        int whereToGo = 0;
        if ( increase )
            whereToGo = minChecked + (int)(length * factorIncrease) + stepIncrease;
        else
            whereToGo = minChecked + (int)(length * factorDecrease) + stepDecrease;

        if ( whereToGo <= minChecked )
            whereToGo = minChecked + 1;

        if ( whereToGo >= maxUnchecked )
            whereToGo = maxUnchecked;

        int cur = Math.Abs(whereToGo - lastPosition) + 3;

        if ( debug ) {
            Console.WriteLine("left: {2} right: {3} whereToGo:{0} cur: {1}", whereToGo, cur, minChecked, maxUnchecked);
        }

        if ( failPos == whereToGo || whereToGo == maxUnchecked )
            return cur + f(whereToGo, minChecked, whereToGo - 1, last, failPos, true & increase, depth + 1);
        else if ( failPos < whereToGo )
            return cur + f(whereToGo, minChecked, whereToGo, last, failPos, true & increase, depth + 1);
        else
            return cur + f(whereToGo, whereToGo, maxUnchecked, last, failPos, false, depth + 1);

    }

    static void Main(string[] args)
    {
        int n = 20;

        int minSum = int.MaxValue;
        var minFactorIncrease = 0.0;
        var minStepIncrease = 0;
        var minFactorDecrease = 0.0;
        var minStepDecrease = 0;

        var eps = 1 / (4.00 * (double)n);

        for ( factorDecrease = 0.0; factorDecrease < 1; factorDecrease += eps )
            for ( stepDecrease = 0; stepDecrease < n; stepDecrease++ )
                for ( factorIncrease = 0.0; factorIncrease < 1; factorIncrease += eps )
                    for ( stepIncrease = 0; stepIncrease < n; stepIncrease++ ) {
                        int cur = 0;
                        for ( int i = 0; i < n; i++ ) {
                            try {
                                cur += f(0, -1, n - 1, n - 1, i);
                            }
                            catch {
                                Console.WriteLine("fail {0} {1} {2} {3} {4}", factorIncrease, stepIncrease, factorDecrease, stepDecrease, i);
                                return;
                            }
                        }
                        if ( cur < minSum ) {
                            minSum = cur;
                            minFactorIncrease = factorIncrease;
                            minStepIncrease = stepIncrease;

                            minFactorDecrease = factorDecrease;
                            minStepDecrease = stepDecrease;
                        }
                    }

        Console.WriteLine("best - mathmin={4}, f++:{0} s++:{1} f--:{2} s--:{3}", minFactorIncrease, minStepIncrease, minFactorDecrease, minStepDecrease, minSum);

        factorIncrease = minFactorIncrease;
        factorDecrease = minFactorDecrease;

        stepIncrease = minStepIncrease;
        stepDecrease = minStepDecrease;

        //debug =true;
        for ( int i = 0; i < n; i++ )
            Console.WriteLine("{0} {1}", 3 + i * 4, f(0, -1, n - 1, n - 1, i));

        debug = true;
        Console.WriteLine(f(0, -1, n - 1, n - 1, n - 1));

    }
} 
```

所以，一些值（f++ - factorIncrease，s++ - stepIncrease，f--- - factorDecrease）：

```
 n = 9  mathmin = 144, f++: 0,1(1) s++: 1 f--: 0,2(2) s--: 1
 n = 20 mathmin = 562, f++: 0,1125 s++: 2 f--: 0,25   s--: 1 
```

# c# - 如何启用自动滚动？

> ID：13676334
> 
> 赞同：0
> 
> 时间：2012-12-03T02:22:48.870
> 
> 标签：c#, winforms, autoscroll

我有一种感觉，我错过了一些明显的东西，但是：

我有一个表格中的单行图片，理论上这些图片可以永远持续下去。我需要一个滚动条，以便用户可以查看该行中的所有图片。我知道我需要启用自动滚动，但我不知道如何启用它。有人可以告诉我如何启用它或我缺少的东西吗？

如果有帮助，这是我用来生成图片的代码：

```
private void imagePalletToolStripMenuItem_Click(object sender, EventArgs e)
    {

        MyPalletGui.Show();

        Dictionary<string,Bitmap> MyPallet = MyImageCollection.ToDictionary();
        int xcor = -50;
        int ycor = 0;
        foreach (Bitmap curtImage in MyPallet.Values){
            PictureBox myPicBox = new PictureBox();
            xcor += 50;
            myPicBox.Location = new Point(xcor, ycor);
            myPicBox.Width = 50;
            myPicBox.Height = 50;
            myPicBox.Visible = true;
            myPicBox.Image = new Bitmap(curtImage);
            this.MyPalletGui.Controls.Add(myPicBox); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:41:38.277

此代码将完全按照您的意愿执行，它使用表单作为带有 AutoScroll 的 ViewPort：

```
public Form1()
{
InitializeComponent();

PopulatePictures();
}

private void PopulatePictures()
{
this.AutoScroll = true;

string[] list = Directory.GetFiles(@"C:\\Users\\Public\\Pictures\\Sample Pictures", "*.jpg");
PictureBox[] picturebox= new PictureBox[list.Length];
int y = 100;
  for (int index = 0; index < picturebox.Length; index++)
  {
  picturebox[index] = new PictureBox();
  this.Controls.Add(picturebox[index]);
  picturebox[index].Location=new Point(index * 120, y);
  if(x%12 == 0)
  y = y + 150;
  picturebox[index].Size = new Size(100,120);
  picturebox[index].Image = Image.FromFile(list[index]);
  }
} 
```

# php - Magento - 在销售订单视图中显示类别信息

> ID：13676339
> 
> 赞同：0
> 
> 时间：2012-12-03T02:23:29.497
> 
> 标签：php, magento

编辑：所以[这个线程](https://stackoverflow.com/questions/2489572/sales-by-category-in-magento)中的一个人说：“Magento 中的所有订单数据都是特定于产品的。它不存储有关产品所属类别的任何信息。所以，正如您所发现的，没有可用的报告在 Magento 中处理这类事情。” 这是真的？我想做的事是失败的吗？

我正在尝试在 Magento 的后端销售 > 订单 > 特定订单视图 > 信息 > 已订购商品网格中显示产品类别。这不是您在导航到“销售”>“订单”时看到的主要“订单网格”。在单击第一个网格中的特定订单后，我想更改您看到的更详细的订单。

根据[该线程](https://stackoverflow.com/questions/3958965/adding-new-column-in-sales-order-view-items-in-magento-admin)的建议，我创建了一个新专栏并为其指定了正确的标题（类别）。

然后，为了尝试填充该列，我将 Joost de Valk 在[此线程](https://stackoverflow.com/questions/5009861/how-do-i-get-categories-for-a-product-in-magento)上的解决方案中的代码添加到 app/design/adminhtml/default/default/template/sales/order/view/items/renderer/default.phtml

我觉得我应该接近（或不接近），但目前该代码只是返回单词“Array”。有什么想法吗？

我当前的代码如下。有问题的列是第二个 td - 与 $cats 相呼应的那个：

```
<?php $_item = $this->getItem() ?>
// Here is the snippet I pasted in to define variables.
<?php $product = Mage::getModel('catalog/product')->load($productId);

$cats = $product->getCategoryIds();
foreach ($cats as $category_id) {
    $_cat = Mage::getModel('catalog/category')->load($category_id) ;
    echo $_cat->getName();
}  ?>
<?php $this->setPriceDataObject($_item) ?>
<tr<?php if (!$this->canDisplayGiftmessage()): ?> class="border"<?php endif; ?>>
    <td>
        <?php if ($this->canDisplayContainer()): ?>
        <div id="<?php echo $this->getHtmlId() ?>" class="item-container">
        <?php endif; ?>
        <div class="item-text">
            <?php echo $this->getColumnHtml($_item, 'name') ?>
        </div>
        <?php if ($this->canDisplayContainer()): ?>
        </div>
        <?php endif ?>
    </td>
// Here is the column in question.
    <td class="a-center"><?php echo $cats ?></td>
    <td class="a-center"><?php echo $_item->getStatus() ?></td>
    <td class="a-right"><?php echo $this->displayPriceAttribute('original_price') ?></td>

etc, etc, etc ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:24:22.770

`$_cat`是一个对象

```
$_cat = Mage::getModel('catalog/category')->load($category_id) ;

<td class="a-center"><?php echo $cats ?></td> 
```

您需要知道要显示的属性

```
echo $_cat->getXyz(); 
```

例如。

```
echo $_cat->getName(); 
```

要查看其中一些属性的列表，请尝试

```
print_r($_cat->getData()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T05:48:25.240

所以看起来类别真的很复杂，而且肯定超出了我的能力范围。我想出了一个变通办法，不管多么丑陋。由于我没有使用制造商字段并且只有 4 个相关类别，因此我正在为这 4 个类别中的每一个创建“制造商”，将它们分配给所有产品，然后在相关文件中调用制造商。制造商代码如下：

```
 <?php 
$manufacturer = Mage::getModel('catalog/product')->load($_item['product_id'])->getAttributeText('manufacturer'); 
echo $manufacturer;
?> 
```

感谢[这篇文章](http://www.magentocommerce.com/boards/viewthread/193770/#t242317)的片段，并感谢其他所有人的帮助。

# ruby-on-rails - ember.js 从路由器中的 ember-data 查询实例化第一条记录

> ID：13676353
> 
> 赞同：3
> 
> 时间：2012-12-03T02:25:21.197
> 
> 标签：ruby-on-rails, ember.js, ember-data

我想构建一个使用属性“名称”来查找用户记录的 ember 路由。

问题是 restful 后端的 show 动作，它没有配置为使用“name”作为查找器。

所以我想使用“名称”查询后端索引操作并实例化集合中返回的第一条记录。

在我看来，这应该可以使用 ember-data。

这是灰烬路线：

```
edit: Em.Route.extend
  route: '/:name/edit'

  deserialize: (router, params) ->
    user = router.get('store').findQuery( App.User, { name: params.name } )
    #return user[0]
    #return user.get('content')[0]
    return user

  serialize: (router, user) ->
    name: user.get('name')

  connectOutlets: (router, user) ->
    router.get('applicationController').connectOutlet('user', user) 
```

有人有想法么？

使用 DAN 建议的解决方案

```
 loading: Em.State.extend()

 edit: Em.Route.extend
  route: '/:name/edit'

  deserialize: (router, params) ->
    user = router.get('store').findQuery( App.User, { name: params.name } )
    deferred = $.Deferred()
    user.addObserver "isLoaded", -> deferred.resolve( user.materializedObjectAt(0) )
    return deferred.promise()

  serialize: (router, user) ->
    name: user.get('name')

  connectOutlets: (router, user) ->
    router.get('applicationController').connectOutlet('user', user) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:01:13.100

听起来您需要实现异步路由，因为`findQuery`是异步方法。查看 Luke Melia 关于该主题的幻灯片（尤其是幻灯片 11）：

[http://www.lukemelia.com/blog/archives/2012/09/18/async-routing-in-ember-js/](http://www.lukemelia.com/blog/archives/2012/09/18/async-routing-in-ember-js/)

# mysql - Mysql程序总和

> ID：13676358
> 
> 赞同：0
> 
> 时间：2012-12-03T02:26:43.337
> 
> 标签：mysql, stored-procedures, sum

我不记得如何`SUM`在 SQL 过程中做一个基本的操作，有人可以快速提醒我吗？

```
drop procedure if exists pCaCalculateCcyFluc;
delimiter //

create procedure pCaCalculateCcyFluc(
  IN  pPrice                DECIMAL(10,6),
  IN  pPricePrev            DECIMAL(10,6),
  OUT pCcyFluc              DECIMAL(10,6)  
)

MODIFIES SQL DATA
COMMENT 'calculate fluctuation'
begin

  pCcyFluc = (pPricePrev - pPrice)/pPrice;
  --
end;
//

delimiter ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:40:11.680

使用[SUM](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_sum)函数：

```
SELECT SUM(TableName.ColumnName)
   FROM TableName
   JOIN TableName ON TableName.ColumnName = TableName.ColumnName
   GROUP BY TableName.ColumnName; 
```

看看这些[例子](http://www.tutorialspoint.com/mysql/mysql-sum-function.htm)。

# java - JTable 中未出现列标题

> ID：13676359
> 
> 赞同：1
> 
> 时间：2012-12-03T02:26:52.103
> 
> 标签：java, swing, jtable, jscrollpane

关于以下代码为什么会显示列标题的任何想法？我试过有和没有scollpane。

```
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setBounds(100, 100, 800, 600);
contentPane = new JPanel();
contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
setContentPane(contentPane);
contentPane.setLayout(null);

JScrollPane scrollpane = new JScrollPane(table);

contentPane.add(scrollpane, "wrap, span");

tableModel = new DefaultTableModel(new Object[]{"Name","Instrument Type","Channel","Number of Channels"},0);

table = new JTable();
table.setBounds(6, 6, 697, 172);
tableModel = new DefaultTableModel(new Object[]{"Fixture Name","Fixture Type","Fixture Channel","Number of Channels"},0);
        table.setModel(tableModel);
        contentPane.add(table); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:31:35.130

1.  使用布局管理器
2.  将滚动窗格添加到框架，而不是表格...

你的代码片段要么丢失它，要么你的例子是错误的。

```
JScrollPane scrollpane = new JScrollPane(table); 
```

这要么意味着您已经创建了表，在这种情况下，您正在双重创建它，或者它将生成一个`NullPointerException`

您的代码应该看起来更像...

```
table = new JTable();
tableModel = new DefaultTableModel(new Object[]{"Fixture Name","Fixture Type","Fixture Channel","Number of Channels"},0);
table.setModel(tableModel);
contentPane.add(new JScrollPane(table)); 
```

查看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)了解更多详细信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:48:03.843

```
tableModel = new DefaultTableModel(new Object[]{"Fixture Name","Fixture Type","Fixture   Channel","Number of Channels"},0);
    table.setModel(tableModel);
    contentPane.add(table); // This is the place that is creating problem for you. 
```

添加时只需将 JTable 添加到 JScrollPane 并将滚动窗格添加到容器中，如下所示，

```
 **contentPane.add(new JScrollPane(table));** 
```

请参阅@Dan 帖子了解[为什么要使用 JScrollPane。](https://stackoverflow.com/questions/12670844/jtable-doesnt-show-columns-names)

# android - 将数据传递给多个片段Android中的对象

> ID：13676360
> 
> 赞同：0
> 
> 时间：2012-12-03T02:26:52.617
> 
> 标签：android, android-intent, android-fragments, sharedpreferences, android-listfragment

我们有代码可以在单击时创建带有详细视图的列表视图。有一个名为drink content 的包装类，其中包含一个drink 对象和一个静态代码段，该代码段调用调用我们的Web 服务的asyncTask。我们需要根据来自另一个活动的数据构建 URL，但我不明白创建对象的方式。我们似乎无法用对 DrinkContent 实例化实例的单个引用替换列表和详细信息片段中的一般 DrinkContent 引用。我们想使用饮料内容的实例化实例，因此我们可以编写一个构造函数来接收另一个活动期间生成的 URL 参数。我们可以将 URL 数据传递给片段，但是当编写构造函数时，会创建多个 Drink 内容实例，而我们的 Web 服务请求没有 不工作。我们将参数存储在另一个活动共享首选项中，并将它们传递给新活动。

DrinkListActivity 的代码：

```
package com.cs4720.drinkengine_android;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;

public class DrinkListActivity extends FragmentActivity
        implements DrinkListFragment.Callbacks {

    private boolean mTwoPane;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_drink_list);

        if (findViewById(R.id.drink_detail_container) != null) {
            mTwoPane = true;
            ((DrinkListFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.drink_list))
                    .setActivateOnItemClick(true);
        }

        Button button = (Button) findViewById(R.id.button1);
        button.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent i = new Intent(DrinkListActivity.this, LeaderboardActivity.class);
                startActivity(i);
            }
        });
    }

    public void onItemSelected(String id) {
        if (mTwoPane) {
            Bundle arguments = new Bundle();
            arguments.putString(DrinkDetailFragment.ARG_ITEM_ID, id);
            DrinkDetailFragment fragment = new DrinkDetailFragment();
            fragment.setArguments(arguments);
            getSupportFragmentManager().beginTransaction()
                    .replace(R.id.drink_detail_container, fragment)
                    .commit();

        } else {
            Intent detailIntent = new Intent(this, DrinkDetailActivity.class);
            detailIntent.putExtra(DrinkDetailFragment.ARG_ITEM_ID, id);
            startActivity(detailIntent);
        }
    }
} 
```

DrinkListFragment 的代码

```
package com.cs4720.drinkengine_android;

import com.cs4720.drinkengine_android.dummy.DrinkContent;
import com.cs4720.drinkengine_android.dummy.DrinkContent.GetDrinksTask;

import android.R;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class DrinkListFragment extends ListFragment {

    private static final String STATE_ACTIVATED_POSITION = "activated_position";

    private Callbacks mCallbacks = sDummyCallbacks;
    private int mActivatedPosition = ListView.INVALID_POSITION;

    public interface Callbacks {

        public void onItemSelected(String id);
    }

    private static Callbacks sDummyCallbacks = new Callbacks() {
        public void onItemSelected(String id) {
        }
    };

    public DrinkListFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<DrinkContent.Drink>(getActivity(),
                R.layout.simple_list_item_activated_1,
                R.id.text1,
                DrinkContent.ITEMS));
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        if (savedInstanceState != null && savedInstanceState
                .containsKey(STATE_ACTIVATED_POSITION)) {
            setActivatedPosition(savedInstanceState.getInt(STATE_ACTIVATED_POSITION));
        }
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);
        if (!(activity instanceof Callbacks)) {
            throw new IllegalStateException("Activity must implement fragment's callbacks.");
        }

        mCallbacks = (Callbacks) activity;
    }

    @Override
    public void onDetach() {
        super.onDetach();
        mCallbacks = sDummyCallbacks;
    }

    @Override
    public void onListItemClick(ListView listView, View view, int position, long id) {
        super.onListItemClick(listView, view, position, id);
        mCallbacks.onItemSelected(DrinkContent.ITEMS.get(position).name);
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        if (mActivatedPosition != ListView.INVALID_POSITION) {
            outState.putInt(STATE_ACTIVATED_POSITION, mActivatedPosition);
        }
    }

    public void setActivateOnItemClick(boolean activateOnItemClick) {
        getListView().setChoiceMode(activateOnItemClick
                ? ListView.CHOICE_MODE_SINGLE
                : ListView.CHOICE_MODE_NONE);
    }

    public void setActivatedPosition(int position) {
        if (position == ListView.INVALID_POSITION) {
            getListView().setItemChecked(mActivatedPosition, false);
        } else {
            getListView().setItemChecked(position, true);
        }

        mActivatedPosition = position;
    }
} 
```

DrinkDetailActivity 的代码

```
package com.cs4720.drinkengine_android;

import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.NavUtils;
import android.view.MenuItem;

public class DrinkDetailActivity extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_drink_detail);

        getActionBar().setDisplayHomeAsUpEnabled(true);

        if (savedInstanceState == null) {
            Bundle arguments = new Bundle();
            arguments.putString(DrinkDetailFragment.ARG_ITEM_ID,
                    getIntent().getStringExtra(DrinkDetailFragment.ARG_ITEM_ID));
            DrinkDetailFragment fragment = new DrinkDetailFragment();
            fragment.setArguments(arguments);
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.drink_detail_container, fragment)
                    .commit();
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        if (item.getItemId() == android.R.id.home) {
            NavUtils.navigateUpTo(this, new Intent(this, DrinkListActivity.class));
            return true;
        }

        return super.onOptionsItemSelected(item);
    }
} 
```

DrinkDetailFragment 的代码

```
package com.cs4720.drinkengine_android;

import com.cs4720.drinkengine_android.dummy.DrinkContent;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class DrinkDetailFragment extends Fragment {

    public static final String ARG_ITEM_ID = "item_id";

    DrinkContent.Drink mItem;

    public DrinkDetailFragment() {
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        if (getArguments().containsKey(ARG_ITEM_ID)) {
            mItem = DrinkContent.ITEM_MAP.get(getArguments().getString(ARG_ITEM_ID));
        }
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View rootView = inflater.inflate(R.layout.fragment_drink_detail, container, false);
        if (mItem != null) {
            String miss="";
            if(mItem.missing == 0){
                miss = "You can make this Drink!";
            }
            else{
                miss = "Missing "+ mItem.missing + " ingredients";
            }
            StringBuilder sb = new StringBuilder();
            sb.append("Name: " + mItem.name 
                    + "\n" + miss
                    + "\nDecription: " + mItem.description
                    + "\nCalories: " + mItem.calories
                    + "\nStrength: " + mItem.strength
                    + "\nIngredients: \n");
            for(int i = 0; i < mItem.units.size(); i++)
                sb.append(mItem.units.get(i) + " " + mItem.ingredients.get(i) + "\n");

            ((TextView) rootView.findViewById(R.id.drink_detail)).setText(sb.toString());
        }
        return rootView;
    }
} 
```

DrinkContent 代码

```
package com.cs4720.drinkengine_android.dummy;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import org.json.JSONObject;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.AsyncTask;
import android.util.Log;

public class DrinkContent {

    public static class Drink {

        public String name;
        public int missing;
        public String description;
        public int calories;
        public int strength;
        public List<String> units;
        public List<String> ingredients;

        public Drink(String name) {
            super();
            this.name = name;
        }

        @Override
        public String toString() {
            return name;
        }
    }

    public static String url = "http://drinkengine.appspot.com/view";

    public static List<Drink> ITEMS = new ArrayList<Drink>();
    public static Map<String, Drink> ITEM_MAP = new HashMap<String, Drink>();

    static{
        new GetDrinksTask().execute(url);
    }

    private static void addItem(Drink item) {
        ITEMS.add(item);
        ITEM_MAP.put(item.name, item);
    }

public static String getJSONfromURL(String url) {

    // initialize
    InputStream is = null;
    String result = "";

    // http post
    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(url);
        HttpResponse response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        is = entity.getContent();

    } catch (Exception e) {
        Log.e("DrinkEngine", "Error in http connection " + e.toString());
    }

    // convert response to string
    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
        is.close();
        result = sb.toString();
    } catch (Exception e) {
        Log.e("DrinkEngine", "Error converting result " + e.toString());
    }

    return result;
}

// The definition of our task class
public static class GetDrinksTask extends AsyncTask<String, Integer, String> {
    SharedPreferences prefs;

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected String doInBackground(String... params) {
        String url = params[0];
        ArrayList<Drink> lcs = new ArrayList<Drink>();
        try {

            String webJSON = getJSONfromURL(url);
            JSONArray drinks = new JSONArray(webJSON);

            for (int i = 0; i < drinks.length(); i++) {
                JSONObject jo = drinks.getJSONObject(i);
                Drink current = new Drink(jo.getString("name"));
                current.missing = Integer.parseInt(jo.getString("missing"));
                current.description = jo.getString("description");
                current.calories = Integer.parseInt(jo.getString("calories"));
                current.strength = Integer.parseInt(jo.getString("strength"));

                JSONArray units = jo.getJSONArray("units");
                current.units = new ArrayList<String>();
                for(int j = 0; j < units.length(); j++){
                    current.units.add(units.getString(j));
                }

                JSONArray ingredients = jo.getJSONArray("ingredients");
                current.ingredients = new ArrayList<String>();
                for(int j = 0; j < ingredients.length(); j++){
                    current.ingredients.add(ingredients.getString(j));
                }

                addItem(current);
            }

        } catch (Exception e) {
            Log.e("DrinkEngine", "JSONPARSE:" + e.toString());
        }

        return "Done!";
    }

    @Override
    protected void onProgressUpdate(Integer... ints) {

    }

    @Override
    protected void onPostExecute(String result) {
        // tells the adapter that the underlying data has changed and it
        // needs to update the view

    }
}
} 
```

所以现在你已经看到了代码，这个问题可能更有意义。我们需要从饮料内容中访问我们的 URL 参数。但是这些参数会根据来自另一个活动的用户输入而改变。我们将这些参数存储在其他活动共享首选项中，并将它们传递给 DrinkListActivity 并尝试编写一个构造函数来接收参数并正确构建 url。当我们用我们创建的实例替换通用的 DrinkContent 和 DrinkContent.LIST 引用时，这不起作用。所以基本上我们如何从我们的共享偏好中获取这个类的信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T07:52:53.527

SharedPreferences 跨应用程序级别共享，而不仅仅是活动级别。如果设置为公开，它实际上可以在应用程序之间共享。你应该去阅读[这里](http://developer.android.com/guide/topics/data/data-storage.html#pref)和[这里](http://developer.android.com/reference/android/content/SharedPreferences.html)的文档，因为它很好地解释了这一点。

# google-analytics - 使用 Google Analytics Experiments 进行 A/B 测试时屏蔽 url

> ID：13676363
> 
> 赞同：1
> 
> 时间：2012-12-03T02:27:22.013
> 
> 标签：google-analytics, analytics, ab-testing, google-experiments

我正在尝试使用 Google Analytics Experiments 来设置和 A/B 测试一些登录页面。 [http://support.google.com/analytics/bin/answer.py?hl=en&answer=1745147](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1745147)

有没有办法屏蔽由于重定向到其中一个页面而显示的 URL？

实验看起来是分析中的一个很棒的功能，特别是因为它与其他分析的集成非常好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-05T19:32:36.873

如果页面上也有事件，您可以“设置”页面

```
_gaq.push(["_set", "page", "/custom/page/path.html"]); // sets page for all future 
```

或者只是添加第二个参数来跟踪综合浏览量

```
_gaq.push(["_trackPageview", "/custom/page/path.html"]); // just custom pageview path 
```

# java - 翻转形状（不是图像）

> ID：13676364
> 
> 赞同：2
> 
> 时间：2012-12-03T02:27:23.897
> 
> 标签：java, swing, awt, shape, graphics2d

**已解决：** 谢谢@MadProgrammer

我换成`g2.rotate(Math.toRadians(180.0));`了`g2.scale(1, -1);`谢谢^^

* * *

我编写了程序来显示带镜子的数字时钟（垂直翻转）

这是我的代码

```
 import java.awt.*;
    import java.awt.font.GlyphVector;
    import javax.swing.*;
    import java.util.*;

    public class DigitalClock extends JFrame implements Runnable {
        /**
         * @author HASSAN
         */
        Thread runner; // declare global objects
        Font clockFont;
        Shape mirror;

        public DigitalClock() {
            super("Digital Clock - Hassan Sharaf 12MCMB33");
            setSize(600, 500);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            setVisible(true);
            setResizable(false); // create window
            setLocationRelativeTo(null);
            clockFont = new Font("digifacewide", Font.BOLD, 100); // create font

            Container contentArea = getContentPane();
            ClockPanel timeDisplay = new ClockPanel();
            contentArea.add(timeDisplay); // add components
            setContentPane(contentArea);
            start(); // start thread running
        }

        public class ClockPanel extends JPanel {

            public void paintComponent(Graphics painter) {
                // super.paintComponent(painter);
                Graphics2D g2 = (Graphics2D) painter;
                g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
                g2.setFont(clockFont); // create clock components
                g2.setColor(Color.black);
                g2.drawString(timeNow(), 20, 140);
                GlyphVector v = clockFont.createGlyphVector(getFontMetrics(clockFont).getFontRenderContext(), timeNow());
                mirror = v.getOutline();
                g2.translate(553, 160);
                g2.rotate(Math.toRadians(180.0));   
                g2.fill(mirror);
                        g2.draw(mirror);

            }
        }

        // get current time
        public String timeNow() {
            Calendar now = Calendar.getInstance();
            int hrs = now.get(Calendar.HOUR_OF_DAY);
            int min = now.get(Calendar.MINUTE);
            int sec = now.get(Calendar.SECOND);
            String time = zero(hrs) + ":" + zero(min) + ":" + zero(sec);
            return time;
        }

        public String zero(int num) {
            String number = (num < 10) ? ("0" + num) : ("" + num);
            return number; // Add leading zero if needed
        }

        public void start() {
            if (runner == null) {
                runner = new Thread(this);
            }
            runner.start();
            // method to start thread
        }

        public void run() {
            while (runner == Thread.currentThread()) {
                repaint();
                // define thread task
                try {
                    Thread.sleep(1000);
                } catch (InterruptedException e) {
                    System.out.println("Thread failed");
                }
            }
        }

        // create main method
        public static void main(String[] args) {
            DigitalClock clock = new DigitalClock();
        }
    } 
```

**问题：**我使用了 rotate() 方法，但实际上我不想旋转时钟我想垂直翻转它 **问题：**如何翻转形状**（不是图像）**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:50:31.290

根据您想要实现的目标，您有很多选择...

你可以...

*   使用符合您的旋转要求`PathIterator`的形状对象创建一个。`AffineTransform`这将要求您创建一个新路径，将其附加`PathIterator`到它，以便您可以绘制它......或
*   `Path2D`使用要旋转的形状作为新路径的基础创建一个新路径并将其传递`AffineTransform`给它。这与第一个选项几乎相同，但需要更少的代码......

这是一个例子....

```
public class SpinningTriangle {

    public static void main(String[] args) {
        new SpinningTriangle();
    }

    public SpinningTriangle() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new SpinPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class SpinPane extends JPanel {

        private Triangle triangle;
        private float angle = 0;

        public SpinPane() {
            triangle = new Triangle(50, 100);
            Timer timer = new Timer(40, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    angle += 2;
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(110, 110);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            Rectangle bounds = triangle.getBounds();
//            PathIterator pi = triangle.getPathIterator(AffineTransform.getRotateInstance(Math.toRadians(angle), bounds.width / 2, bounds.height / 2));
//            Path2D path = new Path2D.Float();
//            path.append(pi, true);
            Path2D path = new Path2D.Float(triangle, AffineTransform.getRotateInstance(Math.toRadians(angle), bounds.width / 2, bounds.height / 2));
            int x = (getWidth() - bounds.width) / 2;
            int y = (getHeight() - bounds.height) / 2;
            g2d.translate(x, y);
            g2d.setColor(Color.RED);
            g2d.fill(path);
            g2d.setColor(Color.YELLOW);
            g2d.draw(path);
            g2d.dispose();
        }

    }

    public class Triangle extends Path2D.Float {

        public Triangle(int width, int height) {

            moveTo(width / 2f, 0);
            lineTo(width, height);
            lineTo(0, height);
            closePath();

        }

    }

} 
```

**更新**

如果您只想“镜像”形状，则可以通过`-1`...缩放轴

```
public class SpinningTriangle {

    public static void main(String[] args) {
        new SpinningTriangle();
    }

    public SpinningTriangle() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new FlipPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class FlipPane extends JPanel {

        private Triangle triangle;
        private boolean flip;

        public FlipPane() {
            triangle = new Triangle(50, 100);
            Timer timer = new Timer(500, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    flip = !flip;
                    repaint();
                }
            });
            timer.setRepeats(true);
            timer.setCoalesce(true);
            timer.start();
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(110, 110);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            Rectangle bounds = triangle.getBounds();

            double scale = flip ? -1 : 1;

            Path2D path = new Path2D.Float(triangle, AffineTransform.getScaleInstance(scale, scale));
            int x = (getWidth() - bounds.width) / 2;
            int y = (getHeight() - bounds.height) / 2;
            if (flip) {

                y += bounds.height;
                x += bounds.width;

            }
            g2d.translate(x, y);
            g2d.setColor(Color.RED);
            g2d.fill(path);
            g2d.setColor(Color.YELLOW);
            g2d.draw(path);
            g2d.dispose();
        }

    }

    public class Triangle extends Path2D.Float {

        public Triangle(int width, int height) {

            moveTo(width / 2f, 0);
            lineTo(width, height);
            lineTo(0, height);
            closePath();

        }

    }

} 
```

# java - Java 我可以在不知道其大小的情况下从文件中恢复二维数组吗？

> ID：13676367
> 
> 赞同：1
> 
> 时间：2012-12-03T02:27:31.683
> 
> 标签：java, arrays, casting, restore, multidimensional-array

或者有什么方法可以在不知道其大小的情况下将通用对象（最初是 2Darray）转换为 2d 数组？

我有一个程序，用户输入数据并将数据提交到 2D 数组中，该数组的大小取决于用户输入的数量。我使用从本教程中学到的知识将数组作为对象保存到文件中。

[http://beginwithjava.blogspot.com/2011/04/java-file-save-and-file-load-objects.html](http://beginwithjava.blogspot.com/2011/04/java-file-save-and-file-load-objects.html)

（[保存]打开文件，打开对象流，写入对象，关闭）（[恢复]打开文件。从文件中打开对象流。读取对象到流。转换对象，关闭流和文件。）

但是，由于我不知道 2d 数组会有多大，所以我不知道在恢复时如何将对象转换回 2dArray。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:35:11.390

没有办法在读取之前知道大小，所以最常见的解决方案是在保存数据之前保存大小。读取器读取大小，分配足够的内存，并以常规方式继续读取数据。

另一种不太常见的方法是在文件中保存标记以指示每行数据的结束位置。在某种程度上，这类似于在 C 中以空值结尾的字符串，其中字符串的长度没有显式存储，但每次都必须重新计算。这种方法的缺点是不允许预分配。换句话说，您要么需要分配足够的内存来容纳任何合法大小的数据，要么随时动态地重新分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:51:00.700

javas ArrayList 会根据需要自动增长，如果您处于元素数量未知的不幸情况，这很有用。读取文件后，您可以将这些数组列表转换为数组。

但更好的是将大小存储在文件的开头。

# android - 手机厂商如何在安卓操作系统上设置 DPI？

> ID：13676368
> 
> 赞同：0
> 
> 时间：2012-12-03T02:27:31.573
> 
> 标签：android, dpi

如果我是手机制造商，我的手机是5.0英寸，分辨率为1920*1080，**如何设置DPI？**

我可以像这样计算广义密度：

**实际密度**= 根（1920*1920+1080*1080）/5.0 = 440.5 dpi

然后得到**广义密度**：xxhdpi

当然，我可以得到**DENSITY_XXHIGH**的常量值：480

那么，我应该将 DPI 设置为 480 dpi 吗？以及如何设置？

设置 DPI 重要吗？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:35:00.753

您可以更改它`/system/build.prop`， dpi 定义为`ro.sf.lcd_density`

```
$ cat /system/build.prop | grep lcd
ro.sf.lcd_density=240 
```

是的，设置正确的 dpi 很重要。如果不是，您的设备将在 Play 商店中出现问题，并且显示效果会很差。

# bitmap - 如何使 wxPython 窗口的背景成为位图？

> ID：13676376
> 
> 赞同：0
> 
> 时间：2012-12-03T02:28:38.810
> 
> 标签：bitmap, grid, wxpython

我已经成功地制作了一个 python twitter 客户端，但它是在 wxPython 中为 GUI 运行的。我需要知道如何设置窗口的背景图像。窗口不能重新调整大小，并且图像是位图。请帮忙。我不需要这个，但我想要它的美学。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:35:36.377

不久前我写了一个教程。看看： http: [//www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/](http://www.blog.pythonlibrary.org/2010/03/18/wxpython-putting-a-background-image-on-a-panel/)

# merge - three.js 将几何体与 ShaderMaterials 合并

> ID：13676377
> 
> 赞同：2
> 
> 时间：2012-12-03T02:28:43.913
> 
> 标签：merge, geometry, three.js

我有一个基于瓦片集的项目，我目前通过许多 ShaderMaterials 将其映射到 CubeGeometries。

渲染立方体时，立方体边缘会出现渗色和闪烁。此外，就性能而言，这似乎是一种非常糟糕的方法。

所以我查找了 THREE.GeometryUtils.merge，它显然将我的立方体合并到一个几何、顶点和所有。

是否可以使合并的网格保留我在每个立方体上使用的材料？有没有更好的方法来完成我想要做的事情？

**编辑：** 这是一个不起作用的例子。

[http://jsfiddle.net/CpQ77/3/](http://jsfiddle.net/CpQ77/3/)

```
var shaderMat1 = new THREE.ShaderMaterial({
    fragmentShader: document.getElementById("red-fragment").innerText,
    vertexShader: document.getElementById("vertex").innerText
});
var shaderMat2 = new THREE.ShaderMaterial({
    fragmentShader: document.getElementById("blue-fragment").innerText,
    vertexShader: document.getElementById("vertex").innerText
});

var cube1 = new THREE.Mesh(new THREE.CubeGeometry(64, 64, 64), new THREE.MeshFaceMaterial([shaderMat1, shaderMat1, shaderMat1, shaderMat1, shaderMat1, shaderMat1]));
cube1.position.x = 0;
cube1.position.y = 300;

var cube2 = new THREE.Mesh(new THREE.CubeGeometry(64, 64, 64), new THREE.MeshFaceMaterial([shaderMat2, shaderMat2, shaderMat2, shaderMat2, shaderMat2, shaderMat2]));
cube2.position.x = 64;
cube2.position.y = 300;

var geo = new THREE.Geometry();
THREE.GeometryUtils.merge(geo, cube1);
THREE.GeometryUtils.merge(geo, cube2);

var mergedMesh = new THREE.Mesh(geo, new THREE.MeshFaceMaterial());

scene.add(mergedMesh); 
```

当尝试使用在网络上的几个地方使用的 MeshFaceMaterial 时，它会给出一个错误消息，“Uncaught TypeError: Cannot read property 'map' of undefined”。

我无法弄清楚我错过了什么。

**Edit2：** 我发现的一种解决方法是遍历新几何体的所有面，并在调用geometry.mergeVertices() 之前对其应用materialIndex。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-29T06:28:11.977

感谢这篇文章，评论有助于找到解决方案。您应该将其作为唯一参数提供给 MeshFaceMaterial，而不是提供给 Geometry 的材料数组。

CoffeeScript 中的示例：

```
materials = []
for i in [0...6]
    texture = window["texture_" + i] # This is a Texture that has already been loaded
    materials.push new THREE.MeshBasicMaterial(
        color   : color
        map     : texture
    )
size = 1
geometry = new THREE.CubeGeometry size, size, size
cube = new THREE.Mesh geometry, new THREE.MeshFaceMaterial materials
cube.position.x = x
cube.position.y = y
cube.position.z = z  
scene.add cube  
return cube 
```

# ruby-on-rails - 登陆页面上的 Rails 注册以完成注册

> ID：13676379
> 
> 赞同：0
> 
> 时间：2012-12-03T02:28:52.033
> 
> 标签：ruby-on-rails, devise, simple-form

我有一个主页，它是我的根 url。我希望用户在这里开始注册过程，他们只输入他们的电子邮件，单击注册，然后在单独的页面上继续注册。

这是我想要在 home-root-landing-page 上的表单的一部分

```
<div>
<%= f.label :email %><br />
<%= f.email_field :email %>
</div> 
```

这就是完整的（单独的）注册页面的样子。我希望用户在 home-root-landing-page 上输入的电子邮件地址自动填充在此页面上（在他们点击注册并被重定向到此页面之后。）

```
<h2>Sign up</h2>

<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
  <%= devise_error_messages! %>

  <div><%= f.label :first_name %><br />
  <%= f.text_field :first_name %></div>

  <div><%= f.label :last_name %><br />
  <%= f.text_field :last_name %></div>

  <div><%= f.label :profile_name %><br />
  <%= f.text_field :profile_name %></div>

  <div><%= f.label :email %><br />
  <%= f.email_field :email %></div>

  <div><%= f.label :password %><br />
  <%= f.password_field :password %></div>

  <div><%= f.label :password_confirmation %><br />
  <%= f.password_field :password_confirmation %></div>

  <div><%= f.submit "Sign up" %></div>
<% end %>

<%= render "devise/shared/links" %> 
```

我正在使用设计，我在如何简单地处理这个问题上遇到了麻烦。谢谢参观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:12:46.693

在您在主页中呈现的视图中，将`form`操作设置为注册页面`/user/signup`。

在注册控制器中，`@user`使用您从主页收到的参数初始化 。

```
#UsersController
def signup
  @user = User.new(params[:user]
end 
```

上述动作将呈现`signup`视图。现在在`form_for`. 喜欢：

```
form_for(@user) 
```

这将自动填充名字和电子邮件。

但是，很明显您正在使用 Devise。我不确定它是否适用于其默认控制器，因为它正在从空哈希中初始化资源（我在源代码中看到以下代码）

```
 def new
    resource = build_resource({})
    respond_with resource
  end 
```

因此，您可能必须[覆盖注册控制器](https://gist.github.com/2343176)。

# css - SASS foreach on li 与某些类

> ID：13676383
> 
> 赞同：0
> 
> 时间：2012-12-03T02:29:43.553
> 
> 标签：css, foreach, sass

我一直在寻找这个问题的答案，以寻找我正在使用 SASS 研究的特定问题。我想从 100% 不透明度的 li 开始，然后让它循环通过具有某些类的 li，并使用 transparentize 函数减去 5% 的不透明度。但问题是 foreach 循环，因为我不知道我将有多少 li 与某个类。让我看看我是否可以用代码解释它，基本上我会向您展示长格式，如果有人可以帮助我将其转换为简短的 foreach，那就太好了。

```
li {
    ... styles are here ...

    &.Language {
        background-color: $red
    }

    &.Language.comp-1 {
        background-color: transparentize($red, 0.10);
     }

     &.Language.comp-2 {
        background-color: transparentize($red, 0.20);
     }

     &.Language.comp-3 {
        background-color: transparentize($red, 0.30);
    }

     &.Language.comp-4 {
        background-color: transparentize($red, 0.40);
    }

    &.Language.comp-5 {
        background-color: transparentize($red, 0.50);
    }
} 
```

如果我要在 PHP 中执行此操作，我会这样做，我只需要 SASS 版本：

```
$transparency_increment = .10
foreach( $item as $li ) {
   background-color: transparentize( $red, $transparency_increment);
   $transparency_increment + .10;
} 
```

希望这是有道理的，我确信我将不得不在`nth`某个地方使用该项目，因为确切的计数将是未知的。提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:51:08.397

您正在寻找的是[`@for`控制指令](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#id11)

这应该做你想要的：

```
$red: #ff0000;

@mixin foo($prefix, $num, $step){
    @for $i from 1 through $num {
        #{$prefix}-#{$i} {
            background-color: transparentize($red, $i * $step);
        }
    }
}

li {
    @include foo('&.Language.comp', 10, 0.1);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:52:16.303

未经测试并从[bootstrap-sass中提取](https://github.com/thomas-mcdonald/bootstrap-sass/blob/master/vendor/assets/stylesheets/bootstrap/_mixins.scss)

```
@mixin transparent_steps_bg($bg_color, $amount, $tranparancy_amount) {
  @while $amount> 0 {
  .comp-#{$amount} { background-color: transparentize($bg_color, $amount * tranparancy_amount); }
  $amount: $amount - 1;
} 
```

# javascript - AngularJS 数学运算

> ID：13676384
> 
> 赞同：0
> 
> 时间：2012-12-03T02:29:46.113
> 
> 标签：javascript, math, angularjs, addition

我有一个奇怪的问题，在 ng-bind 中使用数学表达式时，结果出乎意料。根据我的实验，仅当 summand 的第一部分为 15 以上且第二部分仅为 1.112 时才会出现问题。

ng-bind="sum = 16 + 1.112" ng-model="sum" value="16.112000000000002"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:37:33.997

这是一个标准的浮点舍入问题。浮点数以 2 为基数表示，因此大多数有限十进制分数没有精确表示为（二进制）浮点数。JavaScript 使用 53 位精度的 IEEE754 双精度数字，最接近 1.112 的数字是

```
1.1120000000000000994759830064140260219573974609375 
```

加上 15 需要超过 53 位来表示有效位，所以必须四舍五入，结果是

```
16.11200000000000187583282240666449069976806640625 
```

并且大于最接近 16.112 的 IEEE754 双精度数，即

```
16.111999999999998323119143606163561344146728515625 
```

因此显示 16.112 之后的第一个非零数字，以将其与最接近 16.112 的数字区分开来

# uml - UML 上下文图

> ID：13676386
> 
> 赞同：1
> 
> 时间：2012-12-03T02:30:10.590
> 
> 标签：uml

我可以知道什么是UML上下文图吗？我上网搜索了一下，得到的是一个带有流程、实体和数据存储的系统上下文图。如果它们相同，为什么称为UML上下文图而不是上下文图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T08:18:41.817

UML 上下文图不存在。UML 定义了许多图类型，但没有定义上下文图。在 UML 中，您将使用例如用例图来实现相同的目的。

# c# - WPF登录验证

> ID：13676387
> 
> 赞同：0
> 
> 时间：2012-12-03T02:30:16.253
> 
> 标签：c#, wpf, authentication, encryption, login

我使用 C# 和 LinQ 做一个 WPF 项目。我的应用程序需要用户登录才能访问该应用程序。所以，我正在做的是我在 mySQL 服务器中拥有所有成员数据（如下图所示）。**仅当“状态”**为**1**时，用户才能登录应用程序。那么，我可以知道我可以使用哪种方法来进行登录过程的所有身份验证和加密吗？谢谢。

p/s: 我是新手

![在此处输入图像描述](../Images/a232b5c59e5189529dd34f3d13275d81.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:39:46.183

只需执行以下操作：

```
 var username = txtUserName.Text;
   var password = txtPassword.Text;// there is available encryption on the web that you can use on. and your code will be like var password=enc.EncryptToString(txtPassword.Text);
   var isValidUser = from user on UserTable
                     where user.UserName == txtUserName.Text && user.Password == password && user.Status == 1
                     select user;  
   if(isValiduser.Count() > 0)
   {
     //OK you can log on
   }
   else
   {
     //user credential is invalid
   } 
```

对于您的加密，请参阅以下链接：

[C#的简单2路加密](https://stackoverflow.com/questions/165808/simple-2-way-encryption-for-c-sharp)

此致

# amazon-web-services - 限制 Amazon EC2 实例的运行时间？

> ID：13676389
> 
> 赞同：0
> 
> 时间：2012-12-03T02:30:30.137
> 
> 标签：amazon-web-services, amazon-ec2, automation

限制 Amazon EC2 实例运行时间的简单方法是什么？我时不时会遇到失控的实例，这些实例由于各种原因不会关闭。这些可能要花一大笔钱。是否有某种命令行标志相当于“5 小时后关闭此实例”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:07:53.643

AFAIK Auto-Scaling 服务不直接具有此功能。

**编辑：尽管如果您愿意，您可以创建一个用于自动缩放的组，并在预定时间将其设置为零实例 - 这样一旦达到该时间，该组中的所有实例都将被关闭。**

但是，如果您在启动和停止这些实例时涉及任何类型的自动化，您可以使用 cron 作业、Windows 计划任务，或者在您用于启动这些实例的任何脚本中添加延迟，以便在之后执行[ec2 实例关闭命令](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/starting-stopping-instances.html)指定时间段：

```
PROMPT> ec2-stop-instances i-10a64379 
```

或等效地构造以下形式的 HTTP 请求：

```
https://ec2.amazonaws.com/?Action=StopInstances&InstanceId.1=i-10a64379&AUTHPARAMS 
```

您的另一个选择是在 AMI 本身上创建任务，这样每当实例启动时，它会在 5 小时后自行关闭 - 这可能比负责它的外部计算机更干净。

# javascript - ParseFloat 变为 NaN

> ID：13676391
> 
> 赞同：3
> 
> 时间：2012-12-03T02:30:41.540
> 
> 标签：javascript

大家好，我有这个代码

```
function computeChange(){
var change;
var amountDue = parseFloat(document.getElementById("amountDue").value);
var amountReceive = parseFloat(document.getElementById("amountReceive").value);
change = amountReceive - amountDue;
document.getElementById('amountChange').innerHTML = change;
}

<td>Total Amount</td>
<td>Php:<span id="amountDue"><?php echo $sum; ?></span></td>
</tr>
<tr>
<td>Amount Paid</td>
<td><input type="number" id="amountReceive" required="required" maxlength="4" size="4" onKeyUp="computeChange()"></td>
</tr>
<tr>
<td>Change</td>
<td>Php:<span id="amountChange"></span></td>
</tr> 
```

总金额是
支付金额的小数输入类型=文本

所以问题是如果我在文本框中输入一些东西，变化的跨度就会发生`NaN`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T02:35:42.357

```
parseFloat( document.getElementById("amountDue").value ); 
```

技术上等同于

```
parseFloat( undefined ); 
```

这会产生该值`NaN`，因为 span 元素没有名为 的属性`.value`。也许你想要`.innerHTML`？

```
parseFloat( document.getElementById("amountDue").innerHTML ); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T02:34:51.577

`#amountDue`是一个`<span>`元素，所以它没有`value`属性。

用于`.innerHTML`获取其内容。

```
var amountDue = parseFloat(document.getElementById("amountDue").innerHTML); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T02:36:34.683

这不会返回值：

```
 document.getElementById("amountDue").value 
```

as`amountDue`不是 HTML 输入元素。

试试下面：

```
 document.getElementById("amountDue").innerHTML; 
```

IE

```
 var amountDue = parseFloat(document.getElementById("amountDue").innerHTML); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T02:48:56.600

`value`的 amountDue 正在返回`undefined`，导致 parseFloat 改为返回`NaN` Use `innerHTML`。更改此行

```
var amountDue = parseFloat(document.getElementById("amountDue").value); 
```

至

```
var amountDue = parseFloat(document.getElementById("amountDue").innerHTML); 
```

# c# - 实体框架。计算数据库命中

> ID：13676398
> 
> 赞同：4
> 
> 时间：2012-12-03T02:32:22.067
> 
> 标签：c#, entity-framework

在使用 NHibernate 时，我能够在测试中计算出我访问数据库的次数，这很棒（防止重写查询时出现意外错误）。

使用实体框架时执行查询时是否可以计数/检测？

示例测试如下所示：

```
int currentSqlCounter = EntityFrameWork.QueryCount();
MyMethodBeingTested();
Assert.AreEqual( 2, EntityFrameWork.QueryCount() - currentSqlCounter); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T09:04:49.633

对登录 EntityFramework 的支持非常薄弱，我不知道有任何现成的解决方案。

我在之前的项目中使用了 EFProviderWrappers [http://code.msdn.microsoft.com/EFProviderWrappers的跟踪功能来执行类似的操作。](http://code.msdn.microsoft.com/EFProviderWrappers)

# c# - 如何判断是否至少选择了一个 dataGridView 行 c#

> ID：13676400
> 
> 赞同：3
> 
> 时间：2012-12-03T02:32:39.527
> 
> 标签：c#, .net, winforms, datagridview

我有一个程序，它从 dataGridView 中的选定行中获取一个值并将其传递给一个函数。但是，gridView 可能为空或无法选择行。我处理了空网格，但我想知道是否有办法判断是否选择了任何行。

我试过这个：

```
if (Convert.ToInt32(dataGridView1.Rows.Count) > 0)
{
    //It is not empty
}
int c = dataGridView1.SelectedRows.Count(); //this line gives me an error
if (c>0)
{
    //there is a row selected
} 
```

你知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T02:37:52.300

您只需删除“计数”关键字后的括号。它应该如下所示：

```
if (Convert.ToInt32(dataGridView1.Rows.Count) > 0)
{
    //It is not empty
}
int c = dataGridView1.SelectedRows.Count; //remove parenthesis here
if (c>0)
{
    //there is a row selected
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T03:48:43.273

```
if (dataGridView1.Rows.Count > 0 && dataGridView1.SelectedRows.Count > 0) {
     ......
} 
```

# python - Python：跨模块和外壳共享对象

> ID：13676401
> 
> 赞同：3
> 
> 时间：2012-12-03T02:32:51.740
> 
> 标签：python, oop, architecture

长期聆听者，第一次来电者。

我有一个高级设计问题，可能过于笼统，但这里有：目前，我已经编写了一组相当大的模块。我通过编写调用模块的长脚本来使用它们。我需要重构以使其更具交互性；与其依赖长脚本，不如从 shell 调用函数和修改对象实例。

问题：需要跨所有模块并与外壳共享对象实例。

目前，刚刚制作了一个包含对象实例初始化的模块，所有其他模块都从这个“工作区”模块导入共享实例。我认为必须有一种更优雅的方式来做到这一点；有什么建议么？

PS 本来是用对象方法的，但是在和一个实际的程序员（我是机械人）交谈后，他建议我只使用对象作为属性的容器，并将方法分开分解。

**编辑：**更改了示例代码以包含多个实例并删除无关的文件夹/文件。

**注意：**对象方法与单独方法的问题很有趣，但这里的主要问题是从模块和外壳访问实例。

* * *

尝试一个简单的通用示例：

（免责声明：这是无意义的代码，只是试图概括地显示我要解决的问题类型。即通过调用方法和直接从 shell 更改属性来修改对象实例。）

```
===== folder structure =====

dev/init.py
dev/bike.py
dev/car.py
dev/workspace.py

===== init.py ======

from workspace import *
import bike
import car

===== workspace.py =====

class Bike:
    pass

class Car:
    pass

b = [Bike(), Bike()]
c = Car()

===== bike.py =====

from workspace import *

def start():
   b[0].x = 6
   b[1].x = 9

def move():
   b[0].x += 1
   b[1].x += 1.2

def distance():
    print(b[0].x-c.x)

===== car.py =====

from workspace import *

def start():
   c.x = 0

def move():
   c.x += 2

def brake(bike_instance):
    if bike_instance.x - c.x < 2:
        c.x = 0 
```

示例用法：

```
$ python init.py -i
>>> bike.start()
>>> car.start()
>>> bike.move()
>>> car.move()
>>> car.move()
>>> car.move()
>>> bike.distance()
>>> car.brake(b[0])
>>> car.brake(b[1])
>>> c.x = 5 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:08:23.653

我不知道您期望的工作流程是什么，或者`init.py`包的根目录中有什么，但我认为您的模块应该每个都定义它们的类。然后您将在您的入口点创建这些类的实例并使用它们。您现在正在做什么，创建实例是导入的副作用，作为“单例”类型的模式。如果您想要 2 辆自行车或 2 辆汽车怎么办？

*开发/模块/car.py*

```
class Car:
    pass 
```

*开发/模块/bike.py*

```
class Bike:
    pass 
```

*dev/init.py*（或工作区，因为我不知道它的真正用途）

```
from modules import bike, car

aBike = bike.Bike()
aCar = car.Car() 
```

# c++ - 从 QGraphicsScene 上的 QGraphicsLinearLayout 中删除 QGraphics 项

> ID：13676402
> 
> 赞同：0
> 
> 时间：2012-12-03T02:32:53.763
> 
> 标签：c++, qt, qgraphicsview, qgraphicsitem, disconnect

我遇到了一个非常令人沮丧的问题，试图在我的应用程序中删除 qgraphicsitems。我有一个菜单控制器，负责将按钮添加到布局并将它们添加到场景中。这些按钮都与自定义信号和插槽连接。当我更改状态时，我想删除此控制器并删除所有这些 qgraphicsitems。

以下是我在 menu_controller.cpp 中添加它们的方法：

```
QGraphicsWidget * temp;//this is used during iteration to add to the layout

    this->layout = new QGraphicsLinearLayout(Qt::Vertical);//q graphics view layout
    this->menu = new QGraphicsWidget;//holds the layout

    // initialize the proper buttons
    (this->game_state->is_logged_in()) ? (this->logged_in()) : (this->not_logged_in());//test whether or not the user is logged in to generate the correct menu

    // now iterate through each button and add to the layout
    for (int i = 0, z = this->buttons.size(); i < z; i++) {

        temp = this->scene->addWidget(this->buttons[i]);//add widget to the scene
        this->layout->addItem(temp);//add this widget to the layou
        connect(this->buttons[i], SIGNAL(menu_selection(QString)), this, SLOT(set_menu_option(QString)));//connect the button to this
    }

    // set menu layout as the layout and then add the menu to the scene
    this->menu->setLayout(this->layout);
    this->position();
    this->scene->addItem(this->menu); 
```

最后，我的析构函数如下所示：

```
QGraphicsScene * scene = this->game_state->get_scene();

    QList<QGraphicsItem *> list = scene->items();
    QList<QGraphicsItem *>::Iterator it = list.begin();

    for (; it != list.end(); ++it)
        if (*it)
            scene->removeItem(*it);

    for (int i = 0, z = this->buttons.size(); i < z; i++)
        disconnect(this->buttons[i], 0, 0, 0);//button not connected to anything

    // for each deletes each place in memory
    for_each(this->buttons.begin(), this->buttons.end(), utilities::delete_ptr());

    delete this->layout;//delete the layout container
    delete this->menu;//delete the menu 
```

我从场景中删除每个按钮，断开连接的按钮，然后尝试对它们调用删除。

我每次都会遇到分段错误。场景项目删除正常，断开连接正常工作，但由于某种原因，当我删除项目时，它会引发分段错误并使程序崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:59:56.053

我的猜测是你的`utilities::delete_ptr()`.

但不管怎么说。如果您要删除发送方或接收方，则无需断开信号。当其中一个被删除时，这会自动完成。

也无需遍历场景中的整个项目列表并删除它们。打电话[`QGraphicsScene::clear()`](http://doc.qt.digia.com/qt/qgraphicsscene.html#clear)就可以了。即便如此，你也不需要删除场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T15:41:55.927

感谢您的帮助。

导致分段错误的原因是小部件与信号连接，因此需要使用 deleteLater() 方法删除。

似乎删除一个元素会向其他小部件发出信号，当这种情况发生时，它找不到内存的位置，因此称为 seg fault ..

# android - 从列sqlite android游标获取唯一行

> ID：13676403
> 
> 赞同：0
> 
> 时间：2012-12-03T02:32:57.730
> 
> 标签：android, cursor, distinct, clause

嗨，我无法从文档中获得唯一的行：

```
public Cursor getcepaUnico(){
return database.query(true, "vino", new String[] {"_id", "cepa"}, null, null, null, null, "cepa", null);} 
```

但即使 DISTINCT 布尔值已更改，也会显示重复的行。也试过这个：

```
public Cursor getCepaUnico() {
return database.rawQuery("select DISTINCT cepa from vinos", null);} 
```

调用该方法后应用程序崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:58:11.497

不确定这是否能解决您的问题，但有时我只是从模拟器中提取数据库（在 Eclipse 的 DDMS 视图中），并在我的原始查询不起作用时直接使用 sqlite 编辑器运行查询；如果查询在编辑器中显示您想要的内容，则使用 rawQuery 方法中的查询。

Firefox 有一个很好的 sqlite 编辑器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:18:16.123

将 distinct 设置为 true 应该会返回不同的结果。您的循环游标的代码是否可能不正确？您可能还想发布它以供审查。

关于您的 rawQuery，您使用的是不同的表名，这可能是导致崩溃的原因。它应该是“从 vino 中选择 DISTINCT cepa”（不是 vinos）以匹配您的查询语句。

# drupal - 在主页摘要中显示/订购自定义内容

> ID：13676408
> 
> 赞同：0
> 
> 时间：2012-12-03T02:33:44.970
> 
> 标签：drupal, themes, ubercart, frontpage

我正在使用 Ubercart 开发一个网站，该网站在主页上显示产品摘要（我相信这些被称为预告片）。每个产品都有一个投票小部件，由[Vote Up/Down](http://drupal.org/project/vote_up_down)在其实际节点/页面上提供。我已经将 page.tpl.php 复制到 page-front.tpl.php 因为我想添加一个小块或框来显示主页上的赞成票数量（但实际上不允许在这里投票），最后对这些预告片进行排序按受欢迎程度（票数）。

我可以看到它`print $content`正在输出此页面的内容，但我不确定这是在哪里生成的，因此我可以挂钩或直接修改。我已经在 Wordpress 中编写了主题和插件，但我对 Drupal 还不够了解。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:05:26.800

您应该首先知道是什么在生成您的首页。是视图吗？还是其他模块？

如果是视图，您可以轻松地从 Drupal 后端添加投票计数。如果是另一件事，则取决于它是什么，有办法改变输出。

# c# - XNA 游戏中的分辨率

> ID：13676409
> 
> 赞同：1
> 
> 时间：2012-12-03T02:34:29.457
> 
> 标签：c#, xna, windows-runtime

我将尝试制作 XNA 游戏。

Windows 商店有两个建议您支持的基本分辨率：1024x768 和 1366x768

但在那之后就没有任何限制了。

常见的建议是使用可以为您缩放内容的 ViewBox。

但是 XNA 游戏没有视图框。它有一个绘制方法，您可以在其中呈现您的内容。

游戏（XNA 或 DirectX）适应不同分辨率的常用方法是什么？

我宁愿不必为每个分辨率都制作图像。这将是很多工作，我一定会错过一些。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T16:19:50.433

`GraphicsAdapter.DefaultAdapter.CurrentDisplayMode.Width`并将`.Height`为您提供当前的桌面分辨率。

然后您可以更新`Game.GraphicsDevice.Viewport`变量以使用这些设置。

上面的代码通常放在 Game1.cs 构造函数中

然后提供的链接记录了一种使您的精灵、背景等看起来正确的技术，与分辨率无关（如果代码不是 100% 最新的，理论应该是合理的）

[http://msdn.microsoft.com/en-us/library/bb447674%28v=xnagamestudio.10%29.aspx](http://msdn.microsoft.com/en-us/library/bb447674%28v=xnagamestudio.10%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T19:50:06.193

[我在教程中](http://www.riemers.net/eng/Tutorials/XNA/Csharp/Series2D/Resolution_independency.php)阅读了两种不同的方法：

*   将所有内容调整为新视口（即使更改纵横比）
*   只是在周围画更多的环境

当然，您可以混合使用两者：调整所有内容的大小，只要它仍然可以保持相同的纵横比（例如 4:3 或 16:9），然后显示或多或少的背景/环境。

你也可以决定显示黑色内容而不是更多的环境，如果每个人都有完全相同的视线很重要（例如，出于公平考虑），但在这种情况下，使用战争迷雾可能是一个更好的主意减少视力。

# c# - 更改其他页面中的 div 内容

> ID：13676414
> 
> 赞同：-1
> 
> 时间：2012-12-03T02:34:52.793
> 
> 标签：c#, asp.net, html

我使用下面的代码对该代码文件的页面的 div 进行了更改：

```
HtmlGenericControl divTest = Page.FindControl("test") as HtmlGenericControl;   
divTeste.InnerText = "tested"; 
```

但现在，我想换一页。例如：default.aspx 代码后面更改了 test.aspx 中的 div 内部文本...

上面的代码没有被挪用。我想要永久的改变。应该是什么代码？

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:57:57.193

您需要了解 ASP.NET 的工作原理。[ASP.NET 简介](http://www.codeproject.com/Articles/4468/Beginners-Introduction-to-ASP-NET)

如果您在 Default.aspx 上，然后不想移动到 Test.aspx，您可以在 Test.aspx 中使用 Default.aspx 中的值，但是您不能只更改您所在页面的不同页面。（实际上，可以通过将数据写入数据库，然后在您要更改的页面上访问该数据，但对于您的示例，我不相信您正在寻找类似的东西）

我能想到的最接近您的示例的是使用查询字符串。

**Default.aspx 标记**

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

**Default.aspx 后面的代码**

```
protected void Button1_Click(object sender, EventArgs e)
{
    Response.Redirect("Test.aspx?DivMSG=Hello");
} 
```

**Test.aspx 标记**

```
<div id="MyTestDiv" runat="server">

</div> 
```

**Test.aspx 代码背后**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        MyTestDiv.InnerText = Request.QueryString["DivMSG"];
    }
} 
```

**更新：**

使其永久化的一种方法是将其写入数据库。一个简单的例子，但你需要做数据库代码

**Default.aspx 标记**

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
<asp:Button ID="Button1" runat="server" Text="Button" OnClick="Button1_Click" /> 
```

**Default.aspx 后面的代码**

```
protected void Button1_Click(object sender, EventArgs e)
{
    string messageToWriteToTestDiv = TextBox1.Text;

    // Code: to write messageToWriteToTestDiv to the database
} 
```

**Test.aspx 代码背后**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        string myMessage = "";

        // Code: string myMessage = Get Message from Database to write to div

        MyTestDiv.InnerText = myMessage;
    }
} 
```

**Test.aspx 标记**

```
<div id="MyTestDiv" runat="server">

</div> 
```

# vb.net - 尝试以金钱之类的形式格式化文本框值

> ID：13676417
> 
> 赞同：-1
> 
> 时间：2012-12-03T02:35:12.530
> 
> 标签：vb.net

我正在尝试在文本框上显示一个值，例如金钱：10.50。但每次我把 10.50 显示为 10.5

```
 Private Sub button1_Click(ByVal sender As System.Object, ByVal e As
            System.EventArgs) Handles button1.Click

       textbox3.text = val(textbox1.text) + val(textbox2.text) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:41:13.597

使用格式字符串。

```
textbox3.text = (val(textbox1.text) + val(textbox2.text)).ToString("N") 
```

我想建议`Decimal.TryParse`方法而不是`val()`功能。

```
Dim no1,no2,no3 as Decimal
Decimal.TryParse(TextBox1.Text,no1)
Decimal.TryParse(TextBox2.Text,no2)

no3= no1 + no2

TextBox3.Text= no3.ToString("N") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:07:05.363

那么为什么不直接使用 NumericUpDown 呢？您可以将其设置为有两位小数使用

```
NumericUpDownCtrlName.DecimalPlaces = 2 
```

要获取或设置小数的值，只需使用：

```
NumericUpDownCtrlName.Value 
```

# ant - 如何在目录下构建所有 build.xml (.java) 文件

> ID：13676418
> 
> 赞同：0
> 
> 时间：2012-12-03T02:35:13.533
> 
> 标签：ant, build, subdirectory

我们需要自动测试我们发布的所有 Java 示例是否正确编译。我们需要它来构建所有文件而不列出每个文件。列出每一个意味着如果有人忘记添加一个新的（这将在某天发生），显式调用将错过它。通过遍历所有 build.xml 文件，我们总能得到一切。

这样做很容易：

1.  在干净的 VM 上安装示例（我们在每次测试运行时恢复为快照）。
2.  创建一个调用所有已安装的 build.xml 文件的 build.xml 文件。
3.  使用ant运行生成的build.xml

第 2 步需要一种方法来生成 build.xml 文件。有没有办法告诉 ant 运行子目录下的所有 build.xml 文件或创建一个调用所有底层 build.xml 文件的 build.xml？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:24:56.893

听起来您想要做的是为许多（希望）遵循标准布局模式的子项目运行相同的构建过程。

如果是这种情况，您可以创建一个知道如何编译这些项目的单个 build.xml，并制作一个找到所有子目录的顶级构建脚本，然后在每个子目录中调用公共构建脚本。 [Subant 是为此量身定制的](http://ant.apache.org/manual/Tasks/subant.html)，不需要神奇的 C# 程序即可在每个目录中生成脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:35:13.533

我们找不到任何东西，所以我们编写了一个程序来创建一个 build.xml，它调用一个目录下的所有 build.xml 文件。完整的解决方案在[Windward Wrocks](http://blogs.windward.net/davidt/2012/12/02/build-all-build-xml-java-files-under-a-directory/)（我的博客）。

代码是（是的，使用 C# 为 Java 创建构建文件）：

```
using System; 
using System.IO; 
using System.Text; 
using System.Xml; 
using System.Xml.Linq; 

namespace BuildJavaTestScript 
{ 
    public class Program 
    { 
        /// <summary> 
        /// Build build.xml for all build.xml files in sub-directories. 
        /// </summary> 
        /// <param name="args">Optional: build.xml root_folder</param> 
        public static void Main(string[] args) 
        { 
            string projFile = Path.GetFullPath(args.Length > 0 ? args[0] : "build.xml"); 
            string rootDirectory = Path.GetFullPath(args.Length > 1 ? args[1] : Directory.GetCurrentDirectory()); 
            Console.Out.WriteLine(string.Format("Creating build file {0}", projFile)); 
            Console.Out.WriteLine(string.Format("Root directory {0}", rootDirectory)); 

            XDocument xdoc = new XDocument(); 
            XElement elementProject = new XElement("project"); 
            xdoc.Add(elementProject); 
            elementProject.Add(new XAttribute("name", "BuildAll")); 
            elementProject.Add(new XAttribute("default", "compile")); 

            XElement elementTarget = new XElement("target"); 
            elementProject.Add(elementTarget); 
            elementTarget.Add(new XAttribute("name", "compile")); 

            XElement elementEcho = new XElement("echo"); 
            elementTarget.Add(elementEcho); 
            elementEcho.Add(new XAttribute("message", "Build All: jdk = ${java.home}, version = ${java.version}")); 

            // add .sln files - recursively 
            AddBuildXmlFiles(elementTarget, rootDirectory, rootDirectory); 

            Console.Out.WriteLine("writing build file to disk"); 
            // no BOM 
            using (var writer = new XmlTextWriter(projFile, new UTF8Encoding(false))) 
            { 
                writer.Formatting = Formatting.Indented; 
                xdoc.Save(writer); 
            } 

            Console.Out.WriteLine("all done"); 
        } 

        private static void AddBuildXmlFiles(XElement elementTarget, string rootDirectory, string folder) 
        { 

            // add build.xml files 
            foreach (string fileOn in Directory.GetFiles(folder, "build.xml")) 
            { 
                string filename = Path.GetFileName(fileOn); 
                string workingFolder; 
                if (folder.StartsWith(rootDirectory)) 
                { 
                    workingFolder = folder.Substring(rootDirectory.Length).Trim(); 
                    if ((workingFolder.Length > 0) && (workingFolder[0] == Path.DirectorySeparatorChar || workingFolder[0] == Path.AltDirectorySeparatorChar)) 
                        workingFolder = workingFolder.Substring(1); 
                } 
                else 
                    workingFolder = folder; 
                if (workingFolder.Length == 0) 
                    continue; 

                XElement elementExec = new XElement("ant"); 
                elementExec.Add(new XAttribute("dir", workingFolder)); 
                elementExec.Add(new XAttribute("antfile", filename)); 
                elementTarget.Add(elementExec); 
            } 

            // look in sub-directories 
            foreach (string subDirectory in Directory.GetDirectories(folder)) 
                AddBuildXmlFiles(elementTarget, rootDirectory, subDirectory); 
        } 
    } 
} 
```

# javascript - 加载图像并淡入，但以顺序方式

> ID：13676419
> 
> 赞同：3
> 
> 时间：2012-12-03T02:35:15.977
> 
> 标签：javascript, jquery

我正在尝试加载我的图像并淡入。它的工作。但是让我们假设我有 4 张图片。现在，我的脚本通过加载最后一张图片而不是第一张图片来工作。如何让我的 js 加载第一个图像，并在加载第一个图像后开始加载第二个图像？

这是我的代码：

```
$(function(){
    $("a").click(function(){
        $("#load").load('load.html', function() {
            $('#load img').hide();
            alert($("#load img").length);

            $('#load img').each( function(){
                $(this).on('load', function () {
                    $(this).fadeIn();
                });
            });
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:06:33.220

见[http://jsfiddle.net/5uNGR/15/](http://jsfiddle.net/5uNGR/15/)

尝试在每个图像加载时不尝试对其执行淡入淡出的操作，而是在每次发生任何加载事件时测试动画队列中下一个图像的正常性，然后在动画回调中，查看下一个图像是否正常准备好了。这是一个应该可以工作的脚本。

顺便说一句，有关图像就绪测试的更多信息，请参阅[http://www.sajithmr.me/javascript-check-an-image-is-loaded-or-not](http://www.sajithmr.me/javascript-check-an-image-is-loaded-or-not)。

```
$(function () {
    // util fn to test if image loaded properly
    var isImgLoadOk = function (img) {
        if (!img.complete) { return false; }
        if (typeof img.naturalWidth != "undefined" && img.naturalWidth == 0) {
            return false;
        }
        return true;
    };

    $("a").on('click', function () {

        $("#load").load('load.html', function () {

            var imgs = $('#load img').hide(), //create image array and hide (chaining)
                animIndex = 0, //position in the animation queue
                isFading = false; //track state of whether an animation is in prog

            // this is a load handler AND is called in the fadeIn callback if 
            // not at last image in the collection
            var fadeNextImg = function () {

                // make sure a load event didn't happen in the middle of an animation
                if (isFading) return;

                // last image in animation queue?
                var isLast = animIndex == imgs.length - 1;

                // get the raw image out of the collection and test if it is loaded happily
                var targetImage = imgs[animIndex];
                if (isImgLoadOk(targetImage)) {
                    // jQuery-up the htmlImage
                    targetImage = $(targetImage);

                    // increment the queue
                    animIndex++;

                    // set animation state - this will ignore load events
                    isFading = true;

                    // fade in the img
                    targetImage.fadeIn('slow', function () {
                        isFading = false;
                        // test to see if next image is ready to load by 
                        // recursively calling the parent fn
                        if (!isLast) fadeNextImg();
                    });

                }
            };

            imgs.on('load', fadeNextImg);

        });

        return false;
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T14:43:05.893

Ron 的解决方案是有点过度设计的 IMO。如果您的意图确实是在动画开始之前加载所有图像，那么您可以执行类似于以下的操作：

```
$(function(){
    $("a").click(function(){
        $("#load").load('load.html', function() {
            $('#load img').hide(); // I would recommend using css to hide the image instead
            alert($("#load img").length);

            $("#load img").each(function(i, image) {
               setTimeout(function() { // For each image, set increasingly large timeout before fadeIn
                  $(this).fadeIn();
               }, 2000 * i);
            });
        });
        return false;
    });
}); 
```

# regex - 带有重复字符的正则表达式

> ID：13676431
> 
> 赞同：2
> 
> 时间：2012-12-03T02:36:43.090
> 
> 标签：regex, computer-science

我需要编写一个正则表达式，它可以检测一个只包含字符 x、y 和 z 的字符串，但是这些字符与它们的邻居不同。

这是一个例子

xyzxzyz = 通过

xyxyxyx = 通过

xxyzxz = 失败（重复 x）

zzzxxzz = 失败（相邻字符重复）

我认为这会起作用 ((x|y|z)?)*，但它似乎不起作用。有什么建议么？

**编辑**

请注意，我正在寻找一个不允许向前看或向后看操作的答案。唯一允许的操作是交替、连接、分组和闭包

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T04:25:22.513

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T02:40:01.177

这应该做你想要的：

```
^(?!.*(.)\1)[xyz]*$ 
```

（显然，仅在具有前瞻功能的引擎上）

内容本身由第二部分处理：（`[xyz]*`任意数量的 x、y 或 z 字符）。锚`^...$`在这里是说它必须是整个字符串。并且特殊条件（没有相邻对）由否定前瞻处理`(?!.*(.)\1)`，这表示字符串中的任何位置都不能有一个字符后跟相同的字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T03:18:38.007

我今天走路时有一个想法并将其放在正则表达式上，但我还没有找到它不正确匹配的模式。所以这里是正则表达式：

```
^((y|z)|((yz)*y?|(zy)*z?))?(xy|xz|(xyz(yz|yx|yxz)*y?)|(xzy(zy|zx|zxy)*z?))*x?$ 
```

这是一个[小提琴](http://refiddle.com/h0u)！

如果您发现模式不匹配，请告诉我，我会尝试修改它！我知道这有点晚了，但我真的很困扰我无法解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-12T12:05:48.000

I understand this is quite an old question and has an approved solution as well. But then I am posting 1 more possible and quick solution for the same case, where you want to check your regular expression that contains consecutive characters.

Use below regular expression:

```
String regex = "\\b\\w*(\\w)\\1\\1\\w*"; 
```

Listing possible cases that above expression returning the result.

**Case 1: abcdddd or 123444**

Result: Matched

**Case 2: abcd or 1234**

Result: Unmatched

**Case 3: &*%$$$ (Special characters)**

Result: Unmatched

Hope this will be helpful... Thanks:)

# magento-1.7 - 如何将 magento 样本数据与 magento 集成？

> ID：13676441
> 
> 赞同：5
> 
> 时间：2012-12-03T02:39:14.547
> 
> 标签：magento-1.7, magento

我已经使用 magento-1.7.0.2.zip 在 ubuntu 上安装了 magento。我还下载了 magento 示例数据 magento-sample-data-1.6.1.0.tar.gz 。但我无法将此示例数据与我的 magento 安装集成。

请有人帮助我。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T03:51:38.737

这是[有关如何安装它的指南](http://www.magentocommerce.com/knowledge-base/entry/installing-the-sample-data-for-magento)

您应该知道的主要事情是您需要提取magento示例数据（.sql文件和媒体文件夹）然后将媒体文件夹放入您的magento安装并将.sql文件导入您的空数据库**，然后**再运行Magento安装向导，否则您赢了'无法成功安装示例数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T06:22:24.227

这是我检查所有上述答案的最简单方法很复杂

1.从示例数据安装示例数据库（mysql）文件。

* * *

2.从示例数据中的媒体中复制 catlog 文件夹并粘贴到您的 magento 项目中。

* * *

3.如果在windows上没有文件夹权限的问题，其他的必须检查那里的具体方法。

# python - SingleRelatedObjectDescriptor 对象没有属性“通过”

> ID：13676443
> 
> 赞同：0
> 
> 时间：2012-12-03T02:39:38.943
> 
> 标签：python, django, debugging, model

嗨，我有以下 Admin.py

```
from portfolio.models import LandingPage, Galleries
from django.contrib import admin

from mezzanine.pages.models import Page, RichTextPage, Link
from mezzanine.core.admin import DisplayableAdmin
from mezzanine.utils.urls import admin_url

class GalleriesInline(admin.StackedInline):
    model= Galleries.galleries.through

    list_display = ('galleries','thumb')
class PortfolioAdmin(admin.ModelAdmin):
    fieldsets = [
            (None,  {'fields':['gallerytitle']})
            ]
    inlines = [GalleriesInline]

admin.site.register(LandingPage, PortfolioAdmin) 
```

这是我的模型.py

```
from django.db import models
from mezzanine.pages.models import Page
from mezzanine.galleries.models import Gallery, GalleryImage

class LandingPage(models.Model):

    gallerytitle = models.CharField(max_length=200)

    def __unicode__(self):
        return self.name

class Galleries(LandingPage):
    landingpage = models.ForeignKey(LandingPage, related_name='lan_page')
    #galleriesthumb = models.ForeignKey(GalleriesThumb)
    tagline = models.CharField(max_length=100)
    gallery = models.ManyToManyField(Gallery, related_name='gallerys')
    thumb = models.ManyToManyField(GalleryImage)

    def __unicode__(self):
        return self.name 
```

当尝试通过管理员添加新的“LandingPage”时，我得到：

```
Environment:

Request Method: GET
Request URL: http://localhost:8000/admin/portfolio/landingpage/add/

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
['mezzanine.boot',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.redirects',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.sitemaps',
 'django.contrib.staticfiles',
 'mezzanine.conf',
 'mezzanine.core',
 'mezzanine.generic',
 'mezzanine.blog',
 'mezzanine.forms',
 'mezzanine.pages',
 'mezzanine.galleries',
 'mezzanine.twitter',
 'portfolio',
 'debug_toolbar',
 'django.contrib.admin',
 'django.contrib.comments']
Installed Middleware:
['debug_toolbar.middleware.DebugToolbarMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.redirects.middleware.RedirectFallbackMiddleware',
 'django.middleware.common.CommonMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware',
 'mezzanine.core.request.CurrentRequestMiddleware',
 'mezzanine.core.middleware.TemplateForDeviceMiddleware',
 'mezzanine.core.middleware.TemplateForHostMiddleware',
 'mezzanine.core.middleware.AdminLoginInterfaceSelectorMiddleware',
 'mezzanine.pages.middleware.PageMiddleware']

Traceback:
File "/home/grumps/.virtualenvs/ofmax/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  89\.                     response = middleware_method(request)
File "/home/grumps/.virtualenvs/ofmax/local/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/grumps/projects/ofmax/urls.py" in <module>
  8\. admin.autodiscover()
File "/home/grumps/projects/ofmax/mezzanine/boot/__init__.py" in autodiscover
  76\.     django_autodiscover(*args, **kwargs)
File "/home/grumps/.virtualenvs/ofmax/local/lib/python2.7/site-packages/django/contrib/admin/__init__.py" in autodiscover
  29\.             import_module('%s.admin' % app)
File "/home/grumps/.virtualenvs/ofmax/local/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)
File "/home/grumps/projects/ofmax/portfolio/admin.py" in <module>
  8\. class GalleriesInline(admin.StackedInline):
File "/home/grumps/projects/ofmax/portfolio/admin.py" in GalleriesInline
  9\.     model= Galleries.galleries.through

Exception Type: AttributeError at /admin/portfolio/landingpage/add/
Exception Value: 'SingleRelatedObjectDescriptor' object has no attribute 'through' 
```

我正在尝试将管理员设置为显示画廊的所有实例，并选择一个画廊以便能够选择与画廊相关的 GalleryImage

如果这是一个愚蠢的问题，我很抱歉。我是新手，我正在努力解决这个问题，但我被困住了。

# java - 从数据库接收数据时收到空指针异常

> ID：13676448
> 
> 赞同：0
> 
> 时间：2012-12-03T02:40:03.093
> 
> 标签：java, mysql, spring, hibernate, struts2

我有存储在我的数据库中的事件列表，但是当我尝试检索它们时，我得到的只是一个胖空指针异常，即使结果在那里。

这是我的活动服务类

```
@Transactional
public class EventServices {
    // So Spring can inject the session factory
    SessionFactory sessionFactory;
    public void setSessionFactory(SessionFactory value) {
        sessionFactory = value;
    }

    // Shortcut for sessionFactory.getCurrentSession()
    public Session sess() {
        return sessionFactory.getCurrentSession();
    }

    @SuppressWarnings("unchecked")
    public List<Event> getEvents() {
        return sess().createQuery("from Event").list();
    }
} 
```

这是我的 ActionSupport 课程

```
public class EventAction extends ActionSupport {

    protected EventServices eventServices;

    protected String redirectUrl;

    public String getRedirectUrl() {
        return redirectUrl;
    }

    public void setRedirectUrl(String redirectUrl) {
        this.redirectUrl = redirectUrl;
    }

    public void setEventServices(EventServices eventServices) {
        this.eventServices = eventServices;
    }
} 
```

我的事件动作类（Listing.java）

```
public class Listing extends EventAction{
    public String execute(){
        events = eventServices.getEvents();
        return "success";
    }

    List<Event> events;

    public List<Event> getEvents(){ return events; }
} 
```

视图中的片段 (Listing.jsp)

```
<s:iterator value="events">
  <form action='Delete.action'>
    <input type='hidden' name=id value='<s:property value="id" />' />
    <input type='submit' value='-' title='Delete' />
  </form>
  <form action='Attendance.action'>
    <input type='hidden' name=id value='<s:property value="id" />' />
    <input type='submit' value='A' title='Attendance' />
  </form>
  <s:property value="name" />
  <br>
</s:iterator> 
```

而且我不知道这是否会有所帮助这是我的 struts config xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" /> <!-- set to false for prod -->

    <package name="events" namespace="/events" extends="struts-default">
        <action name="*" class="actions.events.{1}">
            <result>/views/events/{1}.jsp</result>
            <result name="redirect" type="redirect">${redirectUrl}</result>
        </action>
    </package>

    <package name="root-redirect" namespace="/" extends="struts-default">
        <action name="*">
            <result type = "redirect">events/Listing.action</result>
        </action>
    </package>

</struts> 
```

以及管理 sessionFactory 生命周期的 Application context xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

    <bean id="sessionFactory" scope="singleton"
        class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="configLocation" value="classpath:hibernate.cfg.xml"/>
    </bean>

    <!-- Springs Hibernate Transaction Manager -->
    <bean id ="transactionManager" class = "org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

    <tx:annotation-driven/>

    <!-- Inject my business services class to the action -->
    <bean id="services" class ="services.Services" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

    <bean id="evemtservices" class ="services.EventServices" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
    </bean>

</beans> 
```

这就是错误

```
Struts Problem Report
Struts has detected an unhandled exception:
Messages:   
File:   actions/events/Listing.java
Line number:    12 
```

完整的堆栈跟踪

```
java.lang.NullPointerException
    actions.events.Listing.execute(Listing.java:13)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    java.lang.reflect.Method.invoke(Unknown Source)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:446)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:285)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:238)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:191)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:252)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:193)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:242)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:544)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.obtainContent(SiteMeshFilter.java:129)
    com.opensymphony.sitemesh.webapp.SiteMeshFilter.doFilter(SiteMeshFilter.java:77)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.springframework.orm.hibernate4.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:119)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
    java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    java.lang.Thread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:58:01.050

根据评论发布答案：

问题是基于哪个 Spring 无法在操作类中注入服务的错字。在 OP 的 bean 定义中

```
<bean id="evemtservices" class ="services.EventServices" scope ="singleton">
        <property name = "sessionFactory" ref = "sessionFactory"/>
 </bean> 
```

Id 被声明为`evemtservices`，而在操作类中使用的属性被命名为`eventservices`。

由于 Spring 没有注入服务，因此方法调用抛出空指针。

# c++ - QT Creator 无法创建纯 C++ 项目或 HTML5 项目（QT Creator 直接关闭）

> ID：13676453
> 
> 赞同：0
> 
> 时间：2012-12-03T02:40:56.873
> 
> 标签：c++, html, qt4, qt-creator, ubuntu-12.04

我的操作系统中的 QT Creator 有问题。我正在使用 ：

1.  Ubuntu 12.04
2.  QT 创作者 2.4.1
3.  QT 4.8.0

我尝试创建一个新项目，然后选择“其他项目”，然后尝试选择“Plain C++ Projec”。

但是在我单击“Plain C++ Project”或其他类型的项目后，QT Creator 被关闭，除了第一个选项或默认选项“QT Console Application”。

当我尝试在 ubuntu 中使用终端运行时出现的错误是：“QSp​​iAccessible::accessibleEvent 未处理：“6”obj: QMenu(0x82ba3a8, name = “QtCreator.Menu.File”) “QtCreator.Menu.File”QSpiAccessible::未处理accessibleEvent：“7”obj：QMenu（0x82ba3a8，name =“QtCreator.Menu.File”）“QtCreator.Menu.File”FIXME：处理对话框开始。QSpiAccessible :: accessibleEvent未处理：“8008”obj：QObject（ 0x0）“无效接口！”QSpiAccessible::accessibleEvent 未处理：“8008”obj：QObject（0x0）“无效接口！”接口无效断言失败：“获取无效接口的更新。对此进行调查。”，文件 atspiadaptor.cpp，第 899 行中止（核心转储）“

不仅适用于无法打开的“普通 C++ 项目”，还适用于 HTML 5 和“其他项目”菜单中的所有可选项目。

我希望它不能解决..请帮助...：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T02:35:50.793

已解决...问题是“atspiadaptor.cpp，第 899 行”，因此要解决它只需删除 qt-at-spi 包，因为该错误位于 qt-at-spi 包中（请参阅[https://bugs. launchpad.net/ubuntu/+source/qtcreator/+bug/959722](https://bugs.launchpad.net/ubuntu/+source/qtcreator/+bug/959722)）。

sudo apt-get 删除 qt-at-spi

:D

# zend-framework2 - 在 WAMP 中安装 Zend Framework 2 - localhost 指向与我的 Zend 项目相同的根目录

> ID：13676455
> 
> 赞同：0
> 
> 时间：2012-12-03T02:41:10.067
> 
> 标签：zend-framework2

我正在尝试了解 Zend 框架，这令人沮丧，因为我什至无法安装该死的东西。:) 所以请帮忙。

OP：Windows 7 服务器：WAMP

我违反了 Zend Framework 1 的文档分配，但不是第 2 版（这是我想要的）。

让我告诉你我做了什么以及有什么问题。

1.  我已经安装了一个工作的 WAMP 服务器，从`http://localhost`

2.  在 wamp 的 www 中，我为框架创建了一个名为“zendy”的文件夹

3.  我去了 Windows、系统 32、驱动程序等并编辑了我的主机文件。这里我有： 127.0.0.1 localhost 127.0.0.1 zendy # 我已经为我的 zend 项目添加了这个

4.  然后我去了 httpd.conf 并在最后添加了这个：

    服务器名称 zendy DocumentRoot "C:\wamp\www\zendy"

5.  我去了 Zend Framework 2 文档并下载了 zend 骨架，将竞争粘贴到我的 zendy 文件夹中。从命令行我输入：

    “php composer.phar 自我更新” “php composer.phar 安装”

就像 zend[框架 2 文档](http://framework.zend.com/manual/2.0/en/user-guide/skeleton-application.html)所说的那样。

安装工作正常，我看到了这个：

```
Installing dependencies from lock file
- Installing zendframework/zendframework (dev-master)
  Cloning 18c8e223f070deb07c17543ed938b54542aa0ed8

Generating autoload files 
```

1.  现在，如果我键入`http://zendy`一切正常，但如果我键入`http://localhost`，我将获得相同的 zendy 目录，并且我无法访问 www 文件夹中的其他 php 项目（非 zend）。

**所以基本上：`http://localhost`去同一个地方`http://zendy`（我无法访问我的本地主机）。**

关于什么是错的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T21:16:08.057

您需要将本地主机以及其他项目添加到虚拟主机文件中。

```
<VirtualHost *:80>
  DocumentRoot "C:\serverpath\htdocs"
  ServerName localhost
</VirtualHost> 
```

# linux - 如何将当前正在运行的 linux 进程置于后台？

> ID：13676457
> 
> 赞同：128
> 
> 时间：2012-12-03T02:41:12.973
> 
> 标签：linux, bash, shell, background

我有一个命令，它使用 git 从 Linux shell 将文件上传到远程服务器，这需要几个小时才能完成。

我怎样才能把那个正在运行的程序放在后台？这样我仍然可以在 shell 上工作并且该过程也完成了吗？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2012-12-03T03:47:53.437

使用 CTRL+Z 暂停该进程，然后使用该命令`bg`在后台恢复它。例如：

```
sleep 60
^Z  #Suspend character shown after hitting CTRL+Z
[1]+  Stopped  sleep 60  #Message showing stopped process info
bg  #Resume current job (last job stopped) 
```

手册页中有关作业控制和`bg`使用的更多信息：`bash`

> 作业控制在进程运行时
> 键入*挂起*字符（通常是 ^Z、Control-Z）会导致该进程停止并将控制权返回给 bash。[...] 然后，用户可以操纵此作业的状态，使用 bg 命令在后台继续它，[...]。A ^Z 立即生效，并具有导致挂起的输出和预输入被丢弃的额外副作用。
> 
> bg [ *jobspec* ...]在后台
> 恢复每个暂停的作业*jobspec*，就好像它是用 & 开始的。如果 *jobspec*不存在，则使用 shell 的*当前作业*概念。

**编辑**

启动一个进程，你甚至可以杀死终端，它仍然继续运行

```
nohup [command] [-args] > [filename] 2>&1 & 
```

例如

```
nohup /home/edheal/myprog -arg1 -arg2 > /home/edheal/output.txt 2>&1 & 
```

只是忽略输出（不是很明智）将文件名更改为`/dev/null`

要将错误消息设置为不同的文件，请将其更改`&1`为文件名。

另外：您可以使用该`jobs`命令查看那些后台进程的索引列表。`kill %1`您可以通过运行或`kill %2`使用数字作为进程的索引来终止后台进程。

# google-app-engine - 如何使用 webapp2 解析路径参数

> ID：13676458
> 
> 赞同：4
> 
> 时间：2012-12-03T02:41:17.310
> 
> 标签：google-app-engine, python-2.7, webapp2, path-parameter

我来自 Java REST 背景到`Python`on `Google App Engine's`. 我需要一些使用`webapp2`路径参数的帮助。下面是 Java 如何读取请求的示例。有人会将代码翻译成python如何读取它`webapp2`吗？

```
// URL: my_dogs/user_id/{user_id}/dog_name/{a_name}/breed/{breed}/{weight}

@Path("my_dogs/user_id/{user_id}/dog_name/{a_name}/breed/{breed}/{weight}")
public Response getMyDog(
    @PathParam("user_id") Integer id,
    @PathParam("a_name") String name,
    @PathParam("breed") String breed,
    @PathParam("weight") String weight
){

//the variables are: id, name, breed, weight.
///use them somehow

} 
```

我已经浏览了 google 上的示例（[https://developers.google.com/appengine/docs/python/gettingstartedpython27/usingwebapp](https://developers.google.com/appengine/docs/python/gettingstartedpython27/usingwebapp)）。但我不知道如何扩展简单

```
app = webapp2.WSGIApplication([('/', MainPage),
                           ('/sign', Guestbook)],
                          debug=True) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T03:11:12.277

看看 webapp2 中的 URI 路由。在这里，您可以匹配/路由 URI 并获取参数。这些关键字参数将传递给您的处理程序：[http ://webapp2.readthedocs.io/en/latest/guide/routing.html#the-url-template](http://webapp2.readthedocs.io/en/latest/guide/routing.html#the-url-template)

这是一个带有一个参数 {action} 的 helloworld 示例：

```
#!/usr/bin/python
# -*- coding: utf-8 -*-

import webapp2

class ActionPage(webapp2.RequestHandler):

    def get(self, action):

        self.response.headers['Content-Type'] = 'text/plain'        
        self.response.out.write('Action, ' + action)

class MainPage(webapp2.RequestHandler):

    def get(self):

        self.response.headers['Content-Type'] = 'text/plain'
        self.response.write('Hello, webapp2 World!')

app = webapp2.WSGIApplication([
        webapp2.Route(r'/<action:(start|failed)>', handler=ActionPage),
        webapp2.Route(r'/', handler=MainPage),                    
], debug=True) 
```

还有你的 app.yaml：

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: false

handlers:
- url: (.*)
  script: helloworld.app

libraries:
- name: webapp2
  version: latest 
```

当我尝试时，这在 SDK 中运行良好

```
http://localhost:8080/start   # result: Action, start
or
http://localhost:8080         # result: Hello, webapp2 World! 
```

# build - 如何在目录下构建所有解决方案 (.SLN) 文件

> ID：13676459
> 
> 赞同：2
> 
> 时间：2012-12-03T02:41:19.647
> 
> 标签：build, msbuild, subdirectory

我们需要自动测试我们发布的所有 C#、C++ 和 VB.NET 示例是否正确编译。我们需要它来构建所有文件而不列出每个文件。列出每一个意味着如果有人忘记添加一个新的（这将在某天发生），显式调用将错过它。通过遍历所有 .sln 文件，我们总能得到一切。

这样做很容易：

1.  在干净的 VM 上安装示例（我们在每次测试运行时恢复为快照）。
2.  创建一个调用所有已安装 .sln 文件的 BuildAll.proj (MSBuild) 文件。
3.  使用 MSBuild 运行生成的 BuildAll.proj 文件

第 2 步需要一种方法来生成 BuildAll.proj 文件。有没有办法告诉 MSBuild 运行子目录下的所有 .sln 文件或创建调用所有底层 .slnl 文件的 BuildAll.proj ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-16T14:13:14.073

此 PowerShell 脚本将还原所有 NuGet 包并在当前目录中递归构建所有解决方案。确保 nuget.exe 和 msbuild 在您的 PATH 中。

```
$baseDir = (Get-Item -Path ".\" -Verbose).FullName
$items = Get-ChildItem -Path $baseDir -Include *.sln -Recurse
foreach ($item in $items){
    nuget restore $item
    msbuild $item
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-11T17:39:46.753

您可以将以下 PowerShell 用于 .NET Core 项目

```
$baseDir = (Get-Item -Path ".\" -Verbose).FullName
Write-Host ("Scanning *.sln files in " + $baseDir)
$solutionPaths = Get-ChildItem -Path $baseDir -Include *.sln -Recurse
Write-Host ("Total found: " + $solutionPaths.Count)
foreach ($solutionPath in $solutionPaths) {  
    Write-Host ("Building => " + $solutionPath)
    dotnet build $solutionPath
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:41:19.647

我们找不到任何东西，所以我们编写了一个程序来创建一个 BuildAll.proj，它调用一个目录下的所有 .sln 文件。完整的解决方案在[Windward Wrocks](http://blogs.windward.net/davidt/2012/12/02/build-all-solution-sln-files-under-a-directory/)（我的博客）。

代码是：

```
using System; 
using System.IO; 
using System.Text; 
using System.Xml; 
using System.Xml.Linq; 

namespace BuildDotNetTestScript 
{ 
    /// <summary> 
    /// Builds a test script to compile all .sln files under the directory in. 
    /// </summary> 
    public class Program 
    { 
        private static readonly XNamespace xmlns = "http://schemas.microsoft.com/developer/msbuild/2003"; 

        private enum VS_VER 
        { 
            VS_2005, 
            VS_2008, 
            VS_2010, 
            NONE 
        } 

        private static VS_VER vsVersion = VS_VER.NONE; 

        /// <summary> 
        /// Build TestAll.proj for all .sln files in this directory and sub-directories. 
        /// </summary> 
        /// <param name="args">Optional: [-VS2005 | -VS2008 | -VS2010] TestAll.proj root_folder</param> 
        public static void Main(string[] args) 
        { 

            int indexArgs = 0; 
            if (args.Length >= 1 && args[0][0] == '-') 
            { 
                indexArgs = 1; 
                switch (args[0].ToUpper().Trim()) 
                { 
                    case "-VS2005": 
                        vsVersion = VS_VER.VS_2005; 
                        break; 
                    case "-VS2008": 
                        vsVersion = VS_VER.VS_2008; 
                        break; 
                    case "-VS2010": 
                        vsVersion = VS_VER.VS_2010; 
                        break; 
                    default: 
                        Console.Error.WriteLine("Only options are -VS2005, -VS2008, or -VS2010"); 
                        Environment.Exit(1); 
                        return; 
                } 
            } 

            string projFile = Path.GetFullPath(args.Length > indexArgs ? args[indexArgs] : "TestAll.proj"); 
            string rootDirectory = 
                Path.GetFullPath(args.Length > indexArgs + 1 ? args[indexArgs + 1] : Directory.GetCurrentDirectory()); 
            Console.Out.WriteLine(string.Format("Creating project file {0}", projFile)); 
            Console.Out.WriteLine(string.Format("Root directory {0}", rootDirectory)); 

            XDocument xdoc = new XDocument(); 
            XElement elementProject = new XElement(xmlns + "Project"); 
            xdoc.Add(elementProject); 
            elementProject.Add(new XAttribute("DefaultTargets", "compile")); 
            elementProject.Add(new XAttribute("ToolsVersion", "3.5")); 

            XElement elementPropertyGroup = new XElement(xmlns + "PropertyGroup"); 
            elementProject.Add(elementPropertyGroup); 
            XElement elementDevEnv = new XElement(xmlns + "devenv"); 
            elementPropertyGroup.Add(elementDevEnv); 
            elementDevEnv.Value = "devenv.exe"; 

            XElement elementTarget = new XElement(xmlns + "Target"); 
            elementProject.Add(elementTarget); 
            elementTarget.Add(new XAttribute("Name", "compile")); 

            // add .sln files - recursively 
            AddSlnFiles(elementTarget, rootDirectory, rootDirectory); 

            Console.Out.WriteLine("writing project file to disk"); 
            // no BOM 
            using (var writer = new XmlTextWriter(projFile, new UTF8Encoding(false))) 
            { 
                writer.Formatting = Formatting.Indented; 
                xdoc.Save(writer); 
            } 

            Console.Out.WriteLine("all done"); 
        } 

        private static void AddSlnFiles(XElement elementTarget, string rootDirectory, string folder) 
        { 

            // add .sln files 
            foreach (string fileOn in Directory.GetFiles(folder, "*.sln")) 
            { 
                // .../JS/... is VS2005 
                bool isJSharp = fileOn.ToUpper().Replace('\\', '/').Contains("/JS/"); 
                bool versionMatch = true; 
                switch (vsVersion) 
                { 
                    case VS_VER.VS_2005: 
                        if ((!fileOn.ToUpper().Contains("VS2005")) && (! isJSharp)) 
                            versionMatch = false; 
                        break; 
                    case VS_VER.VS_2008: 
                        if (isJSharp || !fileOn.ToUpper().Contains("VS2008")) 
                            versionMatch = false; 
                        break; 
                    case VS_VER.VS_2010: 
                        if (isJSharp || !fileOn.ToUpper().Contains("VS2010")) 
                            versionMatch = false; 
                        break; 
                    default: 
                        if (isJSharp || fileOn.ToUpper().Contains("VS2005") || fileOn.ToUpper().Contains("VS2008") || fileOn.ToUpper().Contains("VS2010")) 
                            versionMatch = false; 
                        break; 
                } 
                if (!versionMatch) 
                    continue; 

                string command = string.Format("\"$(devenv)\" \"{0}\" /Rebuild", Path.GetFileName(fileOn)); 
                XElement elementExec = new XElement(xmlns + "Exec"); 
                elementExec.Add(new XAttribute("Command", command)); 

                string workingFolder; 
                if (folder.StartsWith(rootDirectory)) 
                { 
                    workingFolder = folder.Substring(rootDirectory.Length).Trim(); 
                    if ((workingFolder.Length > 0) && (workingFolder[0] == Path.DirectorySeparatorChar || workingFolder[0] == Path.AltDirectorySeparatorChar)) 
                        workingFolder = workingFolder.Substring(1); 
                } 
                else 
                    workingFolder = folder; 
                if (workingFolder.Length > 0) 
                    elementExec.Add(new XAttribute("WorkingDirectory", workingFolder)); 
                elementTarget.Add(elementExec); 
            } 

            // look in sub-directories 
            foreach (string subDirectory in Directory.GetDirectories(folder)) 
                AddSlnFiles(elementTarget, rootDirectory, subDirectory); 
        } 
    } 
} 
```

# emacs - 如何在 Emacs 中自动跳转到新创建的缓冲区/窗口

> ID：13676462
> 
> 赞同：3
> 
> 时间：2012-12-03T02:41:25.957
> 
> 标签：emacs

在编译、发生搜索、grep 搜索等，Emacs 会在一个单独的窗口中创建一个新的缓冲区来显示结果，有没有自动跳转到那个窗口？它很有用，因为这样我就可以使用`n`and`p`而不是`M-g n`and`M-g p`来移动到下一个和上一个项目；另外，缓冲区可以快速退出`q`。目前，每次运行这些命令时，我都会手动切换到新缓冲区，这很烦人。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T06:29:37.643

你可以使用建议。

例如，要跳转到 grep 缓冲区，请使用以下建议：

```
(defadvice compilation-start (after compilation-start-maximize activate)
  (when (equal mode 'grep-mode)
    (switch-to-buffer "*grep*")
    ;; you may want to maximize the buffer
    (delete-other-windows))) 
```

对于发生，您可以使用以下建议

```
(defadvice occur-1 (after occur-maximize activate)
  (other-window 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T20:18:24.117

经过一番搜索，我想出了这个解决方案，但没有建议内置函数：

```
(add-hook 'occur-hook (lambda () (pop-to-buffer occur-buf)))
(add-hook 'grep-mode-hook (lambda () (pop-to-buffer (get-buffer "*grep*"))))
(setq help-window-select t)
(add-hook 'compilation-mode-hook (lambda () (pop-to-buffer (get-buffer "*compilation*")))) 
```

它适用于`*Occur*`、`*grep*`和。`*compilation*``*Help*`

# java - Dijkstra 的算法辅助

> ID：13676469
> 
> 赞同：0
> 
> 时间：2012-12-03T02:42:56.630
> 
> 标签：java

给定一个邻接矩阵，我需要计算第一个顶点和最后一个顶点之间的最短路径（通常是顶点 i 和 j，但我们暂时可以忽略它）。我编写了一个算法，它实际上只能正确计算第一个节点和第二个节点之间的距离（我猜是朝着正确方向迈出的一步）。

```
static int dijkstra(int[][] G, int i, int j) {
    //Get the number of vertices in G
    int n = G.length;
    int[] bestpath = new int[n];
    int max = Integer.MAX_VALUE;
    boolean[] visited = new boolean[n];

    for (int x = 0; x < n; x++) {
        visited[x] = false;
        bestpath[x] = max;
    }

    bestpath[i] = 0;

    for (int x = 0; x < n; x++) {
        int min = max;
        int currentNode = i;
        for (int y = 0; y < n; y++) {
            if (!visited[y] && bestpath[y] < min) {
                System.out.println(G[y][x]);
                currentNode = y;
                min = bestpath[y];
            }
        }
        visited[currentNode] = true;
        for (int y = 0; y < n; y++) {
            if (G[currentNode][y] < max && bestpath[currentNode] + G[currentNode][y] < bestpath[y]) {
                bestpath[y] = bestpath[currentNode] + G[currentNode][y];
            }
        }
    }

    return bestpath[j];
} 
```

如果我猜的话，我会说我的逻辑在本节中有缺陷：

```
 for (int y = 0; y < n; y++) {
            if (!visited[y] && bestpath[y] < min) {
                System.out.println(G[y][x]);
                currentNode = y;
                min = bestpath[y];
            }
 } 
```

一个例子是矩阵

```
0 1 0 
1 0 1
0 1 0 
```

这将返回 2（在权重 1 的顶点 1 和顶点 2 之间的一条路径，以及权重为 1 的 2 和 3 之间的另一条路径）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:52:51.133

如果矩阵不仅存储 1 和 0，还存储 i 到 j 的距离，那么您确实需要跟踪从任何节点 i 到 j 的最佳距离。换句话说，您的工作数组应该是一个工作矩阵。即使你只是做一个非加权图，我认为这种方法更好。

SPF算法有不同的版本。为您尝试翻译成 java 的内容发布伪代码。

# python - Scrapy 蜘蛛不会从所有页面收集数据

> ID：13676471
> 
> 赞同：1
> 
> 时间：2012-12-03T02:43:06.977
> 
> 标签：python, python-2.7, scrapy

我正在使用 Scrapy BaseSpider 从网站收集数据。刮板从产品展示页面开始，移动到“下一页”链接，从每个页面收集某些数据并将其存储到 CSV 文件中。蜘蛛运行正常，但仅从第 1 页、第 2 页和最后一页（第 36 页）收集数据。经过几个小时的修改代码后，我无法弄清楚原因。以下代码显示了我的蜘蛛。有什么建议么？

```
from scrapy.spider import BaseSpider
from scrapy.selector import HtmlXPathSelector
from scrapy.http.request import Request
from longs.items import LongsItem
from scrapy.utils.response import get_base_url
import urlparse

class LongsComSpider(BaseSpider):
    name = "longs"
    allowed_domains = ["longswines.com"]
    start_urls = ["http://www.longswines.com/wines/?page=3&sortby=winery&item_type=wine"]

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select("//div[@class='pagebox']/a[6]/@href")
        for site in sites:
            relative_next_page = site.extract()
            next_page = [urlparse.urljoin(response.url, relative_next_page)]
            if not not relative_next_page:
            yield Request(next_page[0], self.parse)

        products = hxs.select("//div[@class='productlistitem']")
        items = []
        for product in products:
            item = LongsItem()
            item["title"] = product.select("div[1]/h2/a/text()").extract()
            item["link"] =  response.url
            item["price"] = product.select("div[2]/h2/text()").extract()
            item["details"] = product.select("div[1]/p/text()").extract()
            items.append(item)
        for item in items:
            yield item 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:47:06.287

我认为你在这条线上有问题

`if not not relative_next_page:`

你有`not`两个

# javascript - 使用 Javascript .focus() 突出显示文本

> ID：13676473
> 
> 赞同：0
> 
> 时间：2012-12-03T02:44:00.437
> 
> 标签：javascript, html, css

我有一个像这样的表格：

```
<form action='word.php' name = 'searchbox'>
<input type='text' name='word' id = 'searchbox' value = 'default'>
</form> 
```

在我的身体里，我有：

```
<body onLoad="searchbox.word.focus()"> 
```

你可以在这里看到小提琴：http: [//jsfiddle.net/WEZ7S/](http://jsfiddle.net/WEZ7S/)

我想要实现的只是在“默认”末尾有一个闪烁的光标，而是选择了整个单词。

令人惊讶的是，谷歌一直无法找到任何解决方案。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T02:48:20.243

您可以通过重置`.value`元素的属性来解决此问题：

```
searchbox.word.focus();
searchbox.word.value = searchbox.word.value; 
```

还有一些比较简单的解决方案：[使用 JavaScript 将光标放在文本输入元素中的文本末尾](https://stackoverflow.com/questions/511088/use-javascript-to-place-cursor-at-end-of-text-in-text-input-element)

**演示：http: [//jsfiddle.net/WEZ7S/1/](http://jsfiddle.net/WEZ7S/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:47:18.007

从先前回答的问题：[https ://stackoverflow.com/a/13371452/1238887](https://stackoverflow.com/a/13371452/1238887)

这是一个漂亮的小技巧：

```
$(document).ready(function() {
    var $field = $("#searchbox"),
        oldVal = $field.val();
    $field.focus().val('').val(oldVal);
}); 
```

演示：http: [//jsfiddle.net/X7Y8S/](http://jsfiddle.net/X7Y8S/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T02:51:12.480

使用[`setSelectionRange`](https://developer.mozilla.org/en-US/docs/DOM/Input.setSelectionRange)（Chrm，FF）：

```
var len = searchbox.word.length;

searchbox.word.focus();
searchbox.word.setSelectionRange(len, len); 
```

# google-apps-script - 找不到方法 open()

> ID：13676474
> 
> 赞同：-1
> 
> 时间：2012-12-03T02:44:07.993
> 
> 标签：google-apps-script, google-sheets, google-api, google-sheets-api

找不到方法`open()`。

1.  如果找不到，为什么在我键入点时它让我选择它？
2.  那么我应该如何打开文件呢？ `openByID()`? 真的吗？我从哪里得到这个神奇的ID？从getURL？严重地？这是唯一出现的事情：

    ```
    SpreadsheetApp.openById(id).getUrl() 
    ```

    但我不明白如果我没有 ID 挂起它，我应该如何获取 URL...导致捕获 22。此外，我假设如果我确实获得了我仍然需要的 URL解析它以获取 ID……他们为那个特定的咒语提供了什么神奇的方法？

显然，我的理解不足。有什么帮助吗？

```
function copyTemplate() {
  var targetSpreadsheetName="The file";

  var targetSpreadsheetID=SpreadsheetApp.open(targetSpreadsheetName).getId();
  targetSpreadsheetID.insertSheet("CellData", 1, {template:temp});

  // The code below will duplicate the sheet named "CellData" and insert it after 
  // the 1st sheet and call it "CellData"
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var temp = ss.getSheetByName("CellData");
  ss.insertSheet("CellData", 1, {template:temp});
} 
```

* * *

问题是多部分的。

返回的错误消息是“找不到方法 open()”。

第一个问题是“为什么找不到方法 open()？”。

第二个问题是“如果事实上它找不到它，为什么它让我在键入点时选择它？”

第三个问题是“考虑到 open() 方法无法正常工作，我应该如何打开文件？” 我期望从社区收到的假定答案是“with openByID()”。

这就引出了第四个问题，即“我从哪里获得 ID？”。明显的答案似乎是“getURL()”。

这就引出了第五个问题，即“我如何使用 getURL()？” getURL 似乎需要一个 ID。如果 getURL 需要一个 ID 来获取 URL，而 openByID 需要一个 URL 来获取 ID，那么就会出现无限循环。我肯定误会了什么。

第六个问题是“如果 getURL() 最终成为解决方案的一部分，如何将 ID 与返回的字符串的其余部分区分开来？”

我希望这能澄清我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:59:19.520

好吧，我最终会尝试回答您的问题，希望您会发现它足够清楚... ;-)

第一件事：

```
var ss = SpreadsheetApp.open() 
```

确实出现在点之后的自动补全中，您没有注意的是参数是一个文件，即由适当的语句返回的对象。现在让我们看看如何获​​取它，并通过这个示例来了解如何获取该文件的其他参数：

```
 function myFunction() {
    var files = DocsList.find('thisisthesheetIwant');// this is an array of file objects that include the term 'thisisthesheetIwant'
    var file = files[0];// I take the first one
    var filename = file.getName();//and get its name
    var fileId = file.getId();// its ID
    var fileurl = file.getUrl();//and its url
// then I show the results in the logger
    Logger.log('number of file found = '+files.length+'\n\n'+filename+'\n\n'+fileId+'\n\n'+fileurl+'\n\n')
    var ss = SpreadsheetApp.open(file);// using that file object I can open a spreadsheet
    var content = ss.getSheets()[0].getDataRange().getValues().toString();// and get the whole content of the first sheet
    Logger.log('content = '+content);// there it is
    } 
```

带有代码的电子表格[可在此处获得，](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dGtPUVdfa2JRZi12c1ZLSnJEOWpCV3c)因此您可以自己对其进行测试，我将其命名为`thisisthesheetIwant`希望您没有任何具有相似名称或内容的文件，因为如果返回超过 1 个文件，它将无法按我的预期工作。

看看记录器，我希望它能回答你的问题。它应该如下所示： ![在此处输入图像描述](../Images/409987842c72bef107d8466e71e8d78e.png)

工作表本身是这样的：

![在此处输入图像描述](../Images/e02ef155b9579c3858e3d7ce15d008a1.png)

**编辑：**请注意，ID 和 URL 有一个共同的部分，URL 是您可以在浏览器的地址栏中看到的，ID 只是其中的一部分。现在您可以打开同一个电子表格

```
SpreadsheetApp.openById(fileId) 
```

# jquery - jquery模态对话框加载另一个页面，如何在对话框中提交表单而不刷新父页面

> ID：13676476
> 
> 赞同：0
> 
> 时间：2012-12-03T02:44:33.803
> 
> 标签：jquery

我有一个页面（页面 A）包含一个 jquery 模式对话框，其中包含另一个页面（页面 B），在该页面上，我将提交表单，但是，一旦提交表单，整个页面都会刷新（页面 A不见了，只显示页面B）。

我可以只在对话框中提交表单并保持对话框打开吗？

我想要 iframe 以外的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T02:48:35.500

你应该使用这个 Ajax 表单 jquery 插件：

[http://www.malsup.com/jquery/form/](http://www.malsup.com/jquery/form/)

# c# - 从 Range 集合中填充 Word 文档

> ID：13676477
> 
> 赞同：2
> 
> 时间：2012-12-03T02:44:39.093
> 
> 标签：c#, .net, ms-word, vsto, office-addins

在我的 Word 插件中，我有一个来自 Document.Words 集合的范围副本列表，如下所示：

```
private void button1_Click(object sender, RibbonControlEventArgs e)
{
    Document doc = Globals.ThisAddIn.Application.ActiveDocument;
    List<Range> list = new List<Range>();
    foreach (Range word in doc.Words)
    { 
        list.Add(word);
    }
    MessageBox.Show("list: " + list[0].Text + "|"+ list[1].Text + "|"+ list[2].Text + "|"+      list[3].Text + "|"+ list[4].Text);

    list[0].Text = "Hello ";
    MessageBox.Show("list: " + list[0].Text + "|"+ list[1].Text + "|"+ list[2].Text + "|"+ list[3].Text + "|"+ list[4].Text);
} 
```

现在我创建一个包含“good good good.”的文档。将列表中的第一项分配给“hello”后，第二项也发生了变化。该消息显示一个带有“Hello”、“hello good”（？？？）、“good”的列表。那么我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:49:26.517

尝试添加到列表中的不是对 Range 的引用，而是它的值（文本）：

```
var list = new List<string>();
foreach (Range range in doc.Words)
{ 
    list.Add(range.Text);
} 
```

或很快：

```
var list = new List<string>(doc.Words.Cast<Range>().Select(r => r.Text)); 
```

所以现在您可以在不引用 VSTO 对象的情况下操作字符串。

# phalcon - 模型和数据透视表

> ID：13676479
> 
> 赞同：2
> 
> 时间：2012-12-03T02:44:45.893
> 
> 标签：phalcon

我有一个自定义的书面解决方案，我将其移植到 Phalcon。这是我第一次使用 Phalcon，虽然它易于使用且有据可查，但我似乎找不到任何关于通过数据透视表链接的模型的链接。

这是失败的：

我有用户。用户有统计数据。两者与一个名为 users_stats 的表相关联。该表包含两列：用户 ID 和统计 ID。我创建了第三个名为 Users_Stats 的类来模拟数据透视表。

用户模型：

```
<?php
class Users extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->hasMany('stat_id', 'Users_Stats', 'user_id', array('foreignKey' => true));
    }
} 
```

统计模型：

```
<?php
class Stats extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->belongsTo('stat_id', 'Users_Stats', 'id');
    }
} 
```

Users_Stats 模型：

```
<?php
class Users_Stats extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->hasMany('user_id', 'Users', 'id');
        $this->hasMany('stat_id', 'Stats', 'id');
    }
} 
```

我只是希望能够根据用户收集统计信息。我不确定我是否缺少的是每个模型都需要属于和 hasMany（Stats 有很多 User_Stats && User_Stats 有很多 Stat；等等）。我知道我错过了一些东西。

任何帮助，将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T00:53:45.623

在玩了一些游戏之后，在 Nikolaos Dimopoulos 的帮助下，我发现了一些东西。

1.  类不能有下划线。
2.  查找表的模型必须属于每个类，并且必须具有许多相同的类。
3.  属于一个查找表模型的每个类都必须属于该查找表的模型，并且必须具有多个查找表的模型。

用户模型：

```
<?php
class Users extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->belongsTo('id', 'UserStats', 'user_id');

        $this->hasMany('user_id', 'UserStats', 'id');
    }
} 
```

统计模型：

```
<?php
class Stats extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->hasMany('stat_id', 'UserStats', 'id');

        $this->belongsTo('stat_id', 'UserStats', 'id');
    }
} 
```

用户统计模型：

```
<?php
class UserStats extends \Phalcon\Mvc\Model {
    /**
     * Set database name as there is no UserStats DB
     *
     * @return string
     */
        public function getSource() {
        return 'user_stats';
    }

    public function initialize() {
        $this->belongsTo('user_id', 'Users', 'id');
        $this->belongsTo('stat_id', 'Stats', 'id');

        $this->hasMany('id', 'Users', 'user_id');
        $this->hasMany('id', 'Stats', 'stat_id');
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T14:49:25.330

试试这个（[来源](http://docs.phalconphp.com/en/latest/reference/models.html#relationships-between-models)）：

用户模型：

```
<?php
class Users extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->hasMany(
            'stat_id', 
            'Users_Stats', 
            'user_id', 
            array('foreignKey' => true)
        );
    }
} 
```

统计模型：

```
<?php
class Stats extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->hasMany('stat_id', 'Users_Stats', 'id');
    }
} 
```

Users_Stats 模型：

```
<?php
class Users_Stats extends \Phalcon\Mvc\Model {
    public function initialize() {
        $this->belongsTo('user_id', 'Users', 'id');
        $this->belongsTo('stat_id', 'Stats', 'id');
    }
} 
```

用户 1->许多用户_统计 许多<-1 统计

# algorithm - 如何使用 mutil-images 模拟单反相机的慢速快门

> ID：13676481
> 
> 赞同：0
> 
> 时间：2012-12-03T02:44:56.173
> 
> 标签：algorithm, image-processing

当您使用单反相机的慢速快门拍照时。你可以得到特殊的效果。例如[http://img.photobucket.com/albums/v157/Oilfan94/Rocky%20Mountains%20-%202007/5856-FR-web.jpg](http://img.photobucket.com/albums/v157/Oilfan94/Rocky%20Mountains%20-%202007/5856-FR-web.jpg)。

有没有可能我使用 mutil-images 来模拟这些结果。我的意思是从同一个场景拍摄一系列照片。然后合并这些照片。我试图合并这些图像。但是效果太差了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:58:47.417

由于照片中的像素值对应于在快门打开时到达传感器上该点的光量，我假设你可以这样做（伪代码）

```
out(i, j) = sum(frame_n(i, j) for each n) / n 
```

获得时间间隔内的平均值。

# c++ - 指数加权平均 c++ 嵌套 for 循环

> ID：13676482
> 
> 赞同：1
> 
> 时间：2012-12-03T02:44:57.697
> 
> 标签：c++, moving-average

我正在寻找使用我从大型数据集中提取的数据来实现带有滑动窗口的指数加权移动平均线。

代码有效，但结果绝对不是他们应该的，我似乎无法弄清楚为什么。这是我的代码，请详细说明我到底做错了什么：

```
for(unsigned int i = window; i< close_price.size(); i++)
{
     double tmp3;
     double tmp4;
     for(int j = 0; j < window; j++) 
     {
          tmp3 += pow(lambda,j) * pow(close_price[i-j], 2);
          tmp4 += pow(close_price[i-j], 2); 
          if(j == window-1)
          {
              double temp = (1-lambda) * (pow(close_price[window], 2) + tmp3);
              ewma.push_back( sqrt(temp) );
              sma.push_back( tmp4/window );
          }
          tmp3 = 0;
          tmp4 = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:12:27.957

基本上问题是 tmp3 和 tmp4 没有初始化，所以 tmp3+=blah 有未定义的结果。

我现在看到你的代码的方式应该是这样的：

```
for(size_t i = window; i< close_price.size(); i++)
{
     double tmp3 = 0.0;
     double tmp4 = 0.0;
     for(size_t j = 0; j < window; j++) 
     {
          tmp3 += pow(lambda,j) * pow(close_price[i-j], 2);
          tmp4 += pow(close_price[i-j], 2); 
     }
     double temp = (1-lambda) * (pow(close_price[window], 2) + tmp3);
     ewma.push_back( sqrt(temp) );
     sma.push_back( tmp4/window );
} 
```

说明：在 for 循环中不需要额外的 if，因为 j 的最后一个值`window-1`无论如何都会是，tmp3 和 tmp4 将在每次 i-loop 开始时初始化。size() 的类型`size_t`不是 unsigned int，如果有的话。

# php - php登录脚本未正确执行

> ID：13676487
> 
> 赞同：0
> 
> 时间：2012-12-03T02:46:15.620
> 
> 标签：php, login

嘿伙计们，我正在创建一个简单的登录脚本。当我输入有效的用户名和密码时，该函数调用 login_success.php 但没有任何反应。我使用以下链接获取资源：

*   [http://www.phpeasystep.com/phptu/6.html](http://www.phpeasystep.com/phptu/6.html)
*   [http://forum.codecall.net/topic/44787-creating-loginregistration-forms-with-php/#axzz2DwhIYfzj](http://forum.codecall.net/topic/44787-creating-loginregistration-forms-with-php/#axzz2DwhIYfzj)
*   [http://frozenade.wordpress.com/2007/11/24/how-to-create-login-page-in-php-and-mysql-with-session/](http://frozenade.wordpress.com/2007/11/24/how-to-create-login-page-in-php-and-mysql-with-session/)

我也在这个网站上搜索了一些帖子。您的帮助总是值得赞赏的。这是代码：

登录.php

```
<?php
ob_start(); 
include 'connect.php'; 

$usernamefield = $_POST['usernamefield']; 
$passwordfield = $_POST['passwordfield']; 

$sql = "SELECT * FROM login WHERE username = '$usernamefield' and password = '$passwordfield'"; 
$result = mysql_query($sql); 

$count = mysql_num_rows($result); 

if($count == 1) {
    session_register("usernamefield"); 
    session_register("passwordfield"); 
    header("Location: login_success.php"); 
} else { 
    echo "Invalid username or password"; 
} 
exit(); 
?> 
```

login_success.php

```
<?php 
session_start(); 
if(!session_is_registered(myusername)){
    header("Location: login.php"); 
}
?>

<html> 
<body>
Login Successful
</body> 
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:48:04.423

放在`session_start();`login.php 文件的顶部。使用 设置会话变量`$_SESSION['variable']='value';`。检查访问使用`if(isset($_SESSION['variable'])){`，这应该可以完成。

已`session_register('variable');`弃用，不应使用，以及`session_is_registered('variable')`： http: [//php.net/manual/en/function.session-register.php](http://php.net/manual/en/function.session-register.php)

如果您试图让它在新的 PHP 安装中工作，您可能使用的是 5.4.x，并且这些功能已被删除，因此它们不起作用。

# c# - LINQ 查询在转换为 SQL 之前在 C# 中进行评估？

> ID：13676489
> 
> 赞同：4
> 
> 时间：2012-12-03T02:46:34.190
> 
> 标签：c#, .net, entity-framework

这有效

```
DateTime dtYesterday = DateTime.Now.AddDays(-1);
data = data.Where(d => d.CreatedTime <= dtYesterday); 
```

但这并不

```
data = data.Where(d => d.CreatedTime <= DateTime.Now.AddDays(-1)); 
```

因为 EF 无法将其翻译成 SQL。没关系。

但只是出于好奇，有没有办法强制它`DateTime.Now.AddDays(-1)`在将其转换为 SQL 之前评估它的值？

我想知道是否有类似的语法？

```
data = data.Where(d => d.CreatedTime <= ForceEvaluate(DateTime.Now.AddDays(-1))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:54:42.267

`IQueryable<T>`和之间的区别在于`IEnumerable<T>`前者保留了程序员（即您）编写的表达式，以将其呈现给执行查询的查询引擎（即 RDBMS）。弄清楚这`DateTime.Now.AddDays(-1)`是一个需要评估的函数是可行的，但与一个简单直接且具有熟悉且易于识别的语法的解决方案相比，这太神奇了：

```
DateTime dtYesterday = DateTime.Now.AddDays(-1);
data = data.Where(d => d.CreatedTime <= dtYesterday); 
```

不得不猜测会剥夺程序员将函数传递`DateTime.Now.AddDays(-1)`给 RDBMS 的机会：完全可以想象，当前数据库日期/时间与您的应用程序服务器不同，可能会导致一组不同的行。另一方面，引入`ForceEvaluate`语法是没有意义的，因为如果您必须标记要评估的表达式，您最好使用熟悉的方式（请参阅我在上面粘贴的代码）。

# llvm - 应该如何使用 LLVM 模块？

> ID：13676491
> 
> 赞同：1
> 
> 时间：2012-12-03T02:46:37.880
> 
> 标签：llvm

我正在使用 LLVM 将用户定义的语言转换为字节码，但我不确定应该如何使用模块。

一开始，我认为它类似于 C/C++ 目标文件（以避免在编辑单个文件时对每个文件进行字节码重新编译）。但是，我在[LLVMpy 文档](http://www.llvmpy.org/llvmpy-doc/dev/doc/llvm_concepts.html)中找到了这一行，这似乎表明情况并非如此：

> 模块间引用是不可能的。也就是说，模块 A 不能直接调用模块 B 中的函数。

如果我们不能为单个上下文提供多个模块，有人可以解释为什么模块与上下文分开吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T05:46:54.297

这是可能的，但就像`.o`你提到的文件一样，它们必须首先链接到一个二进制文件中。

给定一对比特码文件：

```
$ llvm-dis a.bc -o -
; ModuleID = 'a.bc'

@0 = global [13 x i8] c"Hello world!\0A"

declare i32 @printf(i8*)                                                                                               

define void @f() {                                                                                                                                                                              
  %1 = call i32 @printf(i8* getelementptr inbounds ([13 x i8]* @0, i64 0, i64 0))                                                                                                               
  ret void
}

$ llvm-dis b.bc -o -
; ModuleID = 'b.bc'

declare void @f()

define i32 @main() {
  call void @f()
  ret i32 0
} 
```

这不起作用：

```
$ lli b.bc
LLVM ERROR: Program used external function 'f' which could not be resolved! 
```

但是，如果将它们链接在一起，它将：

```
$ llvm-ld a.bc b.bc -disable-opt -o c

$ llvm-dis c.bc -o -
; ModuleID = 'c.bc'

@0 = global [13 x i8] c"Hello world!\0A"

declare i32 @printf(i8*)

define void @f() {
  %1 = call i32 @printf(i8* getelementptr inbounds ([13 x i8]* @0, i64 0, i64 0))
  ret void
}

define i32 @main() {
  call void @f()
  ret i32 0
}

$ lli c.bc 
Hello world! 
```

# ios - 通过表格单元格按钮将单元格名称传递到另一个视图

> ID：13676496
> 
> 赞同：0
> 
> 时间：2012-12-03T02:48:05.300
> 
> 标签：ios, xcode, uitableview, button

好的，所以我想将一个视图控制器中表格单元格中包含的名称传递给另一个视图控制器中的数组。我想通过一个也包含在第一个表的单元格中的按钮来执行此操作。

以下是描述表格单元格的地方：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

// add "add" button
UIButton *addFriendButton = [UIButton buttonWithType:UIButtonTypeContactAdd];
addFriendButton.frame = CGRectMake(250.0f, 5.0f, 75.0f, 30.0f);

[cell addSubview:addFriendButton];

[addFriendButton addTarget:self
                    action:@selector(addFriend:)
                    forControlEvents:UIControlEventTouchUpInside];

if(!cell)
{
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
}

cell.textLabel.text = [array objectAtIndex:indexPath.row];
return cell;

} 
```

这里是描述按钮方法的地方：

```
- (IBAction)addFriend:(id)sender
{
    NSLog(@"Add friend.");

} 
```

第一个视图控制器的名称 - 执行传递的控制器 - 称为 ViewController - 而第二个视图控制器 - 接收传递信息的控制器 - 称为 MyMealViewController。我希望将传递的信息存储在其中的数组称为 myMenuArray。

我认为这基本上是所有相关信息。如果您需要我提供任何其他信息 - 或者如果您需要澄清我提出的问题 - 为了使我的问题可以回答，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:11:57.947

您可以使用

```
cell.textLabel.text = [array objectAtIndex:indexPath.row];

[[addFriendButton addTarget:self
                        action:@selector(addFriend:) toTarget:self      withObject:cell.textLabel.text]
forControlEvents:UIControlEventTouchUpInside];

- (void)addFriend:(NSString *)theFriendName 
{
   NSLog(@"Add friend.");
// Now here you make the instance of the new ViewController and you set the text you are     adding.
MyViewController *theVC = [MyViewController alloc] initWithNibName:@"MyViewController"     bundle:nil];
[theVC setNewFriend:theFriendName];
[self presentModalViewController:theVC animated:YES];

} 
```

# java - 试图读取进程输入流

> ID：13676497
> 
> 赞同：0
> 
> 时间：2012-12-03T02:48:17.943
> 
> 标签：java

在以下场景中，我们正在处理一个控制台应用程序，其中有一个 PHP 脚本作为 Java 应用程序中的一个进程运行。每次脚本输入两个值并返回“OK”或“ERR”。我试图捕捉从输入输入到脚本所需的时间以及它返回“OK”或“ERR”值的时间。

我已经实施了以下修复，但它似乎仍然不起作用。如果有人能解释一下。

```
try {
        proc = runtime.exec("php " + "script.php");            

        inp = new BufferedReader( new InputStreamReader(proc.getInputStream()) );
        out = new BufferedWriter( new OutputStreamWriter(proc.getOutputStream()) );

        while (true) {
            temp = getRandomUser() + " " + getRandomHost();
            startTime = System.currentTimeMillis();
            //System.out.println(temp);

            print(pipe(temp));

            while (!inp.readLine().equals("ERR") || !inp.readLine().equals("OK")) {
            }

            endTime = System.currentTimeMillis();
            procTime = (long) endTime - startTime;

            fout.write(Double.toString(procTime));
            fout.newLine();
            //System.out.println("! " + procTime);
        }

} catch (IOException ex) {
        System.out.println("Thread prematurely Terminated...");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:04:25.347

您对症状的描述不清楚。但是，这种类似几乎肯定是错误的：

```
while (!inp.readLine().equals("ERR") || !inp.readLine().equals("OK")) {
} 
```

首先，如果你到达流的末尾， readLine 将返回`null`，当你尝试调用`equals`它时你会得到一个 NPE。

其次，条件实际上是调用`readLine()`了两次。看起来您的意图是阅读并丢弃行，直到获得与“ERR”或“OK”匹配的行。但是代码并没有这样做。事实上，如果它读取的第一个重要行是“OK”，则条件不会触发......并且您将继续尝试阅读。代码应该是这样的：

```
String line = inp.readLine();
while (line != null && !line.equals("ERR") && !line.equals("OK")) {
    line = inp.readLine();
} 
```

这个错误当然足以解释为什么代码会阻塞......

# iphone - UIActivityViewController 报告“远程撰写控制器超时”

> ID：13676500
> 
> 赞同：3
> 
> 时间：2012-12-03T02:48:41.897
> 
> 标签：iphone, objective-c, ios, uiactivityviewcontroller

当我通过消息点击我的应用程序的共享时，我在 Xcode 控制台中得到了这个：但是，邮件工作得很好。Message 控制器从不明显显示，这在已发布的应用程序中很烦人。

```
Remote compose controller timed out (YES)! 
```

这是苹果的错误吗？它今天才开始发生。

代码：

```
if(SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0"))
{
    NSString *textToShare = [NSString stringWithFormat:@"test"];
    NSArray *activityItems = [[NSArray alloc]  initWithObjects:textToShare, nil];
    UIActivityViewController *activityVC = [[UIActivityViewController alloc] initWithActivityItems:activityItems
                                                  applicationActivities:nil];

    activityVC.completionHandler = ^(NSString *activityType, BOOL completed)
    {
        NSLog(@" activityType: %@", activityType);
        NSLog(@" completed: %i", completed);
    };

    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        self.popover = [[UIPopoverController alloc] initWithContentViewController:activityVC];

        CGRect rect = [[UIScreen mainScreen] bounds];

        [self.popover
                    presentPopoverFromRect:rect inView:self.view permittedArrowDirections:0 animated:YES];
    }
    else
    {
        [self presentViewController:activityVC animated:YES completion:nil];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T22:18:44.103

这段代码没有任何问题。它在我的设备上运行没有问题。您可能想尝试重新启动您的设备或在另一台设备上尝试。

我发现这个问题的少数孤立参考与 iOS 6 的 beta 版本或其他遭受偶尔崩溃的人有关，所以也许我们只是在减缓处理此消息 UI 中的扭结的速度。

# colors - 如何在LESS中反转颜色

> ID：13676501
> 
> 赞同：25
> 
> 时间：2012-12-03T02:48:43.433
> 
> 标签：colors, less

是否有我没有看到可以反转颜色的特定颜色操作？我看到了很多颜色方法，但看不到这样做的方法。

参考：

[http://lesscss.org/](http://lesscss.org/)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-03T03:37:54.957

There are multiple interpretation of inverting color.

*   You want a color with the opposite hue:

    `spin(@color, 180)`

*   You want a color that the sum with current one is white:

    `#fff - @color`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-03T17:23:55.803

不幸的是`invert()`，Less 中没有任何功能。

我认为随着[小义的回答](https://stackoverflow.com/a/13676802/4316314)突出显示`spin()`，Less 功能会非常有帮助。将它用于红色或蓝色（例如编译成颜色#111100，它也很暗。`spin(red, 180)``spin(#000011, 180)`

我想将段落的颜色设置为`black`背景是否亮，`white`如果背景暗则设置为。这是我如何使用`if()`,`boolean()`和`luma()`：

```
@bkg-color: #001;
@is-bg-dark: boolean(luma(@bkg-color) > 50%);

.container {
  background-color: @bkg-color;
}

p {
  color: if(@is-bg-dark, black, white);
} 
```

[阅读有关较少函数](http://lesscss.org/functions/#logical-functions-boolean)的更多信息，例如 boolean()。

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-12-03T03:21:15.507

我不认为有一个特定的函数可以反转颜色，但你可以做的就是将你的颜色设置为变量。例如：

```
@color1: #666;
@color2: #fff;

body {
background-color: @color1;
color: @color2;
}

h1 {
color: @color2;
} 
```

然后，只需制作一个备用样式表，并将倒置颜色设置为主要样式表中使用的变量。只要您在整个 css 中使用变量，这些颜色就会被反转。

# linux - 如何在 Linux 的 ncurses 中显示特殊字符？

> ID：13676507
> 
> 赞同：3
> 
> 时间：2012-12-03T02:49:15.900
> 
> 标签：linux, ncurses

我正在尝试编写一个让 Lenny 跳跃的代码，但 lenny 面对这个：(͡° ͜ʖ ͡°)

当编译和运行代码（g++ -o Lenny main.cpp）时，我得到输出“（͡°�~\�~V͡°）”。有没有办法让它显示（͡°͜ʖ͡°）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:06:37.250

Linux 具有良好的 Unicode 支持，如果您所做的只是输出，则不需要任何特殊库：

```
#include <iostream>
int main()
{
    std::cout << "( ͡° ͜ʖ ͡°)\n";
} 
```

在线演示：http: [//ideone.com/UUS6Il](http://ideone.com/UUS6Il)

或者，您不能依赖 Linux 的内置 UTF-8 并明确说明它：

```
#include <iostream>
#include <locale>
int main()
{
    std::locale::global(std::locale("en_US.utf8"));
    std::wcout.imbue(std::locale());
    std::wcout << L"( ͡° ͜ʖ ͡°)\n";
} 
```

在线演示：http: [//ideone.com/EhTfB9](http://ideone.com/EhTfB9)

编辑：根据您在评论中的代码，您的问题实际上是关于 ncurses 库 I/O，而不是关于 C++。为了让您的程序按预期工作，

1.  `setlocale(LC_ALL, "en_US.utf8");`在您的开头附近添加该行`main()`（并`#include <clocale>`相应添加）
2.  更改要使用的链接线`-lncursesw`，而不是`-lncurses`您正在使用的链接线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T02:52:00.083

您正在处理 Unicode 字符。你可以使用这个库：[ICU](http://site.icu-project.org/)。

[在这里](https://stackoverflow.com/questions/55641/unicode-processing-in-c)查看更多：

# python - 使用python以相同的速率遍历文本文件中的列表和行？

> ID：13676509
> 
> 赞同：1
> 
> 时间：2012-12-03T02:49:27.890
> 
> 标签：python, list, file-io, iteration

所以我有一个家庭作业，我在另一篇文章中问过，但不是很详细，因此我自己的错没有得到我想要的答案。我需要做的是打开一个结构化的文本文件，其中文件的每一行都属于一个特定的类别。虽然类别和顺序不会改变，但它们重复的次数可能会改变。我的工作是获取每一行（忽略前两行）并向该行添加一个 XML 标记。为此，我提出了一个包含类别字符串名称的列表。我遇到的问题是我无法弄清楚如何以与文件中的文本行相同的速率遍历类别列表。

例如：

如果我的文本文件是：

```
peas
carrots
broccoli
beans 
```

我的清单是

```
tagList=["apples","oranges","bananas","pears"] 
```

然后我不断得到：

```
<apples>peas</apples>
<oranges>peas</oranges>
<bananas>peas</bananas>
<pears>peas</pears>
<apples>carrots</apples>
<oranges>carrots</oranges>
<bananas>carrots</bananas>
<pears>carrots</pears>
ect.... 
```

而不仅仅是

```
<apples>peas</apples>
<oranges>carrots</oranges>
<bananas>broccoli</bananas>
<pears>beans</pears> 
```

我的印象是我需要一个嵌套的 for 循环，所以我有这样的东西。

```
for line in file:
    for x in tagList:
        outputFile.write("<"+x+">"+line+"</"+x+">\n") 
```

我完全理解为什么事情会以现在的方式出现，我只是对如何解决它感到迷茫。我发现其他关于以相同速率迭代 2 个列表的帖子，但似乎找不到任何关于以相同速率迭代文件中的行和列表的任何内容。任何帮助将不胜感激。谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T02:56:06.480

不知道这里关于回答作业的政策是什么，但我会解释你的代码在做什么，以防万一：

它的工作方式与您编码的方式完全相同。

您嵌套了一个 for 循环（文件中的 tagList）。

因此，您实际上要做的是浏览文件，如果有 4 个项目，则在每个点 (1-4)，您将再次循环通过 tagList （其中有 4 个项目）。

所以在第一步，你得到了豌豆（来自文件），但在你输出它之前，你进入另一个 for 循环（tagList），一旦你在那里，你会输出“豌豆”。

然后第二个 for 循环将再经过 3 次，您将总共获得 4 个“豌豆”。迭代完成后，您将返回第一个 for 循环并移动到下一个元素，这一次将输出胡萝卜。

希望这能解释你在这里做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:00:09.560

Unutbu 是正确的 - zip 在这里最容易使用。

```
>>> lista = ['a', 'b', 'c', 'd']
>>> listb = [1, 2, 3, 4]
>>> for a, b in zip(lista, listb):
    print a, b

a 1
b 2
c 3
d 4 
```

嵌套的 for 循环看起来像这样，并且实际上会将您的列表相乘 - 我认为这不是您想要的。

```
>>> for a in lista:
    for b in listb:
        print a, b

a 1
a 2
a 3
a 4
b 1
b 2
... 
```

另一种方法是使用列表索引，尽管由于 Python 具有 zip 功能，您最好使用它。

```
>>> for i in range(4):
    print lista[i], listb[i]

a 1
b 2
c 3
d 4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:06:02.560

```
 python 3.2
    list comprehension

    >>> [["<"+v+">"+i+"</"+v+">"] for i in st for v in tag] 
```

# javascript - 无法访问 svg 路径属性

> ID：13676516
> 
> 赞同：1
> 
> 时间：2012-12-03T02:50:54.850
> 
> 标签：javascript, html, svg

我正在使用 html5、js 和 css3。

我有以下代码：

HTML

```
<object id="bottom" data="img/model/skirt.svg"
title="bottom" type="image/svg+xml" width="325"
height="500"> </object> 
```

JS

```
var b = document.getElementById("bottom");
b = b.getSVGDocument().getElementById("here");
alert(b); 
```

，这给了我“对象SVGPathElement”。

但是当我尝试访问填充属性时，我收到一条“未定义”消息。 `alert(b.fill);`例如。

fill 属性肯定是在 svg 文件中设置的。我显然错过了一些东西。任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T03:46:05.123

`svgEl.setAttribute(name, value)`您必须使用和访问 SVG 属性`svgEl.getAttribute(name)`。

没有访问诸如`HTMLElement`.

但如果你真的想要，你可以扩展`SVGElement.prototype`：

```
Object.defineProperties(SVGElement.prototype, {
  fill: {
    get: function() {
      return this.getAttribute('fill');
    },
    set: function(value) {
      return this.setAttribute('fill', value);
    }
  }
}); 
```

# android - 打开保存在 SD 卡中的图像，并可选择将其裁剪为图库中以应用为墙纸

> ID：13676526
> 
> 赞同：0
> 
> 时间：2012-12-03T02:52:17.147
> 
> 标签：android, android-intent, android-camera-intent

我有一个应用程序，其中我在**SD Card**的一个文件夹中下载了一些图像。我想把它保存为墙纸。

使用下面的代码用户可以将其设置为墙纸。

```
WallpaperManager myWallpaperManager = WallpaperManager.getInstance(context);
myWallpaperManager.setBitmap(loadedImage); 
```

但是，当从图库应用程序中选择图像以设置壁纸时，这不会为用户提供任何 UI 来选择图像的一部分，例如裁剪操作。我希望我的代码触发这样的操作。当用户单击我的应用程序中的按钮时，我想将他们带到带有裁剪选项的图库应用程序以设置壁纸。

请让我知道如何做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:18:53.703

你可能想试试这个：

1.  从您的图书馆（包括 SD 卡）中选择 - **void selectPhoto()**：

    ```
    Intent intent = new Intent();
    intent.setType("image/*");
    intent.setAction(Intent.ACTION_GET_CONTENT);
    startActivityForResult(Intent.createChooser(intent, "Choose photo to upload"), PICK_FROM_FILE); 
    ```

2.  开始裁剪动作 - **void doCrop()**：

    ```
    Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setType("image/*");

    // Check if there is image cropper application installed.
    List<ResolveInfo> list = getPackageManager().queryIntentActivities( intent, 0 );

    int size = list.size();

    // If no cropper application is found, throw a message.
    if (size == 0) {            
        Toast.makeText(this, "Can not find image crop app", Toast.LENGTH_SHORT).show();
        return;

    // If there're cropper applications found, use the first
    } else {

        // Specify image path and cropping parameters
        intent.setData(mImageCaptureUri);
        intent.putExtra("outputX", 0);
        intent.putExtra("outputY", 0);
        intent.putExtra("return-data", true);

        Intent i = new Intent(intent);
        ResolveInfo res = list.get(0);
        i.setComponent( new ComponentName(res.activityInfo.packageName, res.activityInfo.name));
        startActivityForResult(i, CROPPED_IMAGE); 
    ```

3.  处理活动结果 - **void onActivityResult(int requestCode, int resultCode, Intent data)**

    ```
    if (resultCode != RESULT_OK) return;

    switch (requestCode) {
        case PICK_FROM_FILE: 
            mImageCaptureUri = data.getData();
            doCrop();
            break;          
        case CROPPED_IMAGE:         
            Bundle extras = data.getExtras();
            try{
                if (extras != null) {
                     Bitmap myImage = extras.getParcelable("data");
                }
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
            break; 
    ```

此代码将在您选择图像后立即激活裁剪操作。

请注意，*mImageCaptureUri*是选定的图像 URI，它将传递给裁剪操作的意图。

# sharepoint - 如何向内容查询 Webpart 添加分页功能？

> ID：13676527
> 
> 赞同：0
> 
> 时间：2012-12-03T02:52:18.777
> 
> 标签：sharepoint, sharepoint-2010

在尝试使用 Content Query Webpart (CQWP) 进行分页时，我遇到了一个大问题。我需要能回答以下问题的人：

1.  如何让 CQWP 使用分页？
2.  如果你建议我使用一些别人定制的CQWP，我希望它可以被我设计。
3.  除了使用 CQWP 之外，您能提供一些其他建议吗？
4.  使用本文中提到的解决方案是否是解决此问题的好方法：[SharePoint 2010 Content Query Web Part with paging](http://blog.mastykarz.nl/sharepoint-2010-content-query-web-part-paging/comment-page-3/#comment-220067)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T08:46:10.697

请按照此 url 使用分页内容查询 Web 部件。我部署了这个 Web 部件，并成功完成。

[http://blog.mastykarz.nl/paging-content-query-web-part/](http://blog.mastykarz.nl/paging-content-query-web-part/)

# c - c中文本模式和二进制模式的区别

> ID：13676528
> 
> 赞同：4
> 
> 时间：2012-12-03T02:52:21.343
> 
> 标签：c, file-io

在文本模式下写入/读取文件时，新行字符被转换为回车和换行，即 \n 到 \r\n 但在二进制模式下不会发生这种情况。

同样，ASCII 值 26 将在文本模式下写入文件末尾，但在二进制模式下不会发生这种情况。

我知道这个问题早先在 SO 中被问过，但我没有找到任何关于这种行为的理由。

我的意思是，这种行为只是为了区分文本和二进制模式，还是这种翻译有任何具体原因，并且在二进制模式的情况下不写入 ASCII 值 26。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T02:58:29.140

从某种意义上说，二进制模式是“原始的”：没有翻译任何内容，因为它没有这样做的基础。而在文本模式下，文件被解释为文本，因此（例如）行尾被翻译为适当的表示。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T03:02:35.127

文本文件处理取决于操作系统。根本不处理二进制文件。Windows，用 CR+LF 替换行尾，在 Linux 和 OSX 中它是 LF。在 Linux 中，就操作系统而言，文本文件和二进制文件的处理没有区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-31T10:05:20.237

模式修饰符 翻译模式 t 以文本（翻译）模式打开。b 以二进制（未翻译）模式打开；涉及回车和换行字符的翻译被禁止。

# c# - 错误：无法将类型“MyBlock.BlockClass”隐式转换为“System.Web.Mvc.ActionResult”

> ID：13676531
> 
> 赞同：0
> 
> 时间：2012-12-03T02:52:35.663
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, razor

我正在尝试使用一个基本的 dll 文件来计算一个块的体积，并使用 asp.net mvc 来创建页面。

我有一个接受三个输入的表单，并且在控制器页面中有这个代码。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace MvcApplication1.Controllers
{
    public class blockController : Controller
    {
        //
        // GET: /block/

        public ActionResult Index()
        {
            return View();
        }

        [HttpPost]
        public ActionResult Index(BlockModel model)
        {
            if (ModelState.IsValid)
            {
                MyBlock.BlockClass newVol = new MyBlock.BlockClass(model.Length, model.Width, model.Height);
                return newVol;
            }
        }

    }
} 
```

块 dll 采用长度宽度和高度的三个值，当我尝试运行它时出现此错误

```
Error   6   Cannot implicitly convert type 'MyBlock.BlockClass' to 'System.Web.Mvc.ActionResult'    c:\users\ryan\documents\visual studio 2012\Projects\dad\MvcApplication1\MvcApplication1\Controllers\blockController.cs  25  24  MvcApplication1 
```

唯一的其他代码来自我的视图页面，如果它有助于解决问题，我也可以发布它，因为我正在尝试显示 BlockClass 的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:02:54.097

它应该是这样的

```
 [HttpPost]
 public ActionResult Index(BlockModel model)
 {
    if (ModelState.IsValid)
    {
        MyBlock.BlockClass newVol = new MyBlock.BlockClass(model.Length, model.Width, model.Height);

        return View("MyBlockView", newVol);   // The view you want to pass the model too
    }
 } 
```

# node.js - 玉迭代可以有一个微模板变量吗？

> ID：13676537
> 
> 赞同：-1
> 
> 时间：2012-12-03T02:53:00.553
> 
> 标签：node.js, pug, templating

我使用玉作为 express.js 视图引擎，我使用 Micro-Templating ；这是我遇到的一个问题是模板

```
 script(id='form',type='text/html')
    select(id='select_category',name='product_category')
       option <%= option%> 
```

使用模板

```
$(tmpl('form',{'option':'something'})) 
```

现在我有不止一个选择，所以这就是我所做的

我更改模板

```
 script(id='form',type='text/html')
    select(id='select_category',name='product_category')
       each val,key in  <%= option%>
           option <%= val%> 
```

使用

```
 $(tmpl('form',{'option':[some arr]})) 
```

这将导致错误提示“Unexpected token <”；

那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:15:11.963

```
option #{val} 
```

是您想要将值`val`放入`option`元素中的内容。Jade 使用类似于 ruby​​/coffeescript 的插值语法。

目前尚不清楚您想要的输出是什么，但如果您想要那些文字 PHP 样式的标签，请尝试：

```
option= '<%=' + val + '%>' 
```

# java - 使用 iText 打开 PDF 时自动打开打印对话框

> ID：13676541
> 
> 赞同：3
> 
> 时间：2012-12-03T02:53:49.227
> 
> 标签：java, javascript, pdf, itext

我需要能够在打开 pdf 时自动提供打印对话框。我需要用 javascript 来做，我想知道我是否可以使用 iText 附加所说的 javascript？这样做对我来说会更干净，因为我目前已经在使用 iText 库。否则有没有更好的方法来做到这一点？目前使用：

```
Document document = new Document();
document.add(New Paragraph("<script type="text/javascript">print();</script>")); 
```

但是，这不会对 pdf 进行任何更改，但在打开时仍然不会打印。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T03:01:49.903

我使用 iText API 调用在没有 Javascript 的情况下做了类似的事情：

```
PdfWriter writer = ...;
PdfAction action = new PdfAction(PdfAction.PRINTDIALOG);
writer.setOpenAction(action); 
```

# android - 错误：没有这样的列

> ID：13676543
> 
> 赞同：2
> 
> 时间：2012-12-03T02:54:33.513
> 
> 标签：android, sqlite

我开发了一个使用 sqlite 数据库的 android 应用程序。

1.  **主要问题：** **我一直面临这个错误，没有这样的专栏，但我只是找不到这个问题的原因。任何意见将不胜感激。**
2.  **次要问题：** 我希望应用程序检查用户的信息是否在数据库中。如果它不存在，我希望系统能够处理某些事情。检查部分怎么做？我尝试了类似下面的方法。但我不确定它是否有效，因为没有这样的专栏问题。

    ```
     String values[] = helper.get_synccontentByEmailID(SettingConstant.EMAIL);
                if(!(values[0] == null)){

                } 
    ```

--数据库类--

```
 public void onCreate(SQLiteDatabase db) {

    db.execSQL("CREATE TABLE synccontent (" + 
            "tableid INTEGER PRIMARY KEY AUTOINCREMENT, " +
            "emailid_sync TEXT " +
            "contentid TEXT," +
            "contentpath TEXT," +
            "filesize TEXT," +
            "createdtime TEXT,"+
            "createdate TIMESTAMP default current_timestamp);");
}
public String[] get_synccontentByEmailID(String emailid_sync){
    SQLiteDatabase myDB = null;
    String[] returnMsg = null;
    myDB = this.getReadableDatabase();

    Cursor c = myDB.rawQuery("SELECT tableid, emailid_sync, contentid, contentpath, filesize, createdtime" +
            " from synccontent where emailid_sync='"+emailid_sync+"' ", null);
    int emailid_syncColumn = c.getColumnIndex("emailid_sync");              
    int contentidColumn = c.getColumnIndex("contentid");
    int contentpathColumn = c.getColumnIndex("contentpath");
    int filesizeColumn = c.getColumnIndex("filesize");
    int createdtimeColumn = c.getColumnIndex("createdtime");

    if (c.moveToFirst()) {
        do {
            returnMsg = new String[5]; 
            String contentid = c.getString(contentidColumn);
            String contentpath = c.getString(contentpathColumn);
            String filesize = c.getString(filesizeColumn);
            String createdtime = c.getString(createdtimeColumn);

            returnMsg[0] = emailid_sync;
            returnMsg[1] = contentid;
            returnMsg[2] = contentpath;
            returnMsg[3] = filesize;
            returnMsg[4] = createdtime;

        } while (c.moveToNext());
    } 
```

- 主要活动 -

```
 syncButton = (Button) findViewById(R.id.sync_btn);
    syncButton.setOnClickListener(new View.OnClickListener(){
        @Override
        public void onClick(View v) {

                    String values[] = helper.get_synccontentByEmailID(SettingConstant.EMAIL);
                if(!(values[0] == null)){

                }

E/AndroidRuntime(4543): android.database.sqlite.SQLiteException: no such column: contentid: , while compiling: SELECT tableid, emailid_sync, contentid, contentpath, filesize, createdtime from wbm_synccontent where emailid_sync='testing@yahoo.com' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:01:46.050

后面少了一个逗号`emailid_sync TEXT`。

```
db.execSQL("CREATE TABLE synccontent (" + 
            "tableid INTEGER PRIMARY KEY AUTOINCREMENT, " +
            "emailid_sync TEXT, " +
            "contentid TEXT," +
            "contentpath TEXT," +
            "filesize TEXT," +
            "createdtime TEXT,"+
            "createdate TIMESTAMP default current_timestamp);"); 
```

那应该解决主要问题，在另一个答案中给出了次要问题的解决方案。我认为这很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T02:58:21.590

`Primary Issue`

也许您首先创建了没有 contentId 的表。然后您添加了新列 contentId。但是表没有重新创建。要重新创建表和 db 再次卸载应用程序，然后再次安装。

```
Secondary Issue 
```

你可以这样做

```
Cursor c = myDB.rawQuery("SELECT * from synccontent where emailid_sync='"+emailid_sync+"' ", null);
if(c.getCount()==0){       //not in db
} 
```

# android - SSLHandshakeException api.facebook.com

> ID：13676545
> 
> 赞同：1
> 
> 时间：2012-12-03T02:54:38.287
> 
> 标签：android, facebook

尝试使用 Facebook 登录编写我的第一个 Android 原生应用程序。

我得到一个 SSLHandshakeException 并且我不知道如何解决它。

我的主要活动继承自 FacebookActivity 并执行 openSession() 我得到了 Facebook 日志，但我无法登录（那是我得到异常的时候）

Facebook 应用程序中的“密钥哈希”是我从已签名应用程序的密钥库中获得的。

```
public class MainActivity extends FacebookActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  this.openSession();
  setContentView(R.layout.activity_main);

} 
```

堆栈跟踪：

```
12-02 21:37:29.711: E/HttpOperation.run(2088): class javax.net.ssl.SSLHandshakeException org.bouncycastle.jce.exception.ExtCertPathValidatorException: IssuerName(OU=Class 3 Public Primary Certification Authority, O="VeriSign, Inc.", C=US) does not match SubjectName(OU=www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97 VeriSign, OU=VeriSign International Server CA - Class 3, OU="VeriSign, Inc.", O=VeriSign Trust Network) of signing certificate. [https://api.facebook.com/restserver.php?api_key=882a8490361da98xxxxxxxxxxx1ddc14d&email=nicoxxxx.xxxxxxxx%40gmail.com&format=JSON&method=auth.login&migrations_override=%7B%27empty_json%27%3A+true%7D&password=M*****4&sig=76b8a7f5xxxxxxxx052875b7b831f&v=1.0]
12-02 21:37:29.711: E/HttpOperation(2088): Encountered exception: javax.net.ssl.SSLHandshakeException: org.bouncycastle.jce.exception.ExtCertPathValidatorException: IssuerName(OU=Class 3 Public Primary Certification Authority, O="VeriSign, Inc.", C=US) does not match SubjectName(OU=www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97 VeriSign, OU=VeriSign International Server CA - Class 3, OU="VeriSign, Inc.", O=VeriSign Trust Network) of signing certificate.
12-02 21:37:29.711: W/System.err(2088): javax.net.ssl.SSLHandshakeException: org.bouncycastle.jce.exception.ExtCertPathValidatorException: IssuerName(OU=Class 3 Public Primary Certification Authority, O="VeriSign, Inc.", C=US) does not match SubjectName(OU=www.verisign.com/CPS Incorp.by Ref. LIABILITY LTD.(c)97 VeriSign, OU=VeriSign International Server CA - Class 3, OU="VeriSign, Inc.", O=VeriSign Trust Network) of signing certificate.
12-02 21:37:29.711: W/System.err(2088):     at org.apache.harmony.xnet.provider.jsse.OpenSSLSocketImpl.startHandshake(OpenSSLSocketImpl.java:477) 
```

# linux - 如何找到行和单词的总和

> ID：13676550
> 
> 赞同：0
> 
> 时间：2012-12-03T02:55:39.867
> 
> 标签：linux, bash, unix

我有三个文件，每个文件包含一行，两列如下：

**文件1.txt**

3 5

**文件2.txt**

2 6

**文件 3.txt**

6 3

我想将它们组合在一个文件中，该文件将第一列和第二列相加，如下所示：

**最终文件.txt**

11 14

我需要用 Unix 命令来做到这一点

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T03:05:21.870

这是使用的快速方法`awk`：

```
awk '{ one+=$1; two+=$2 } END { print one, two }' file[1-3].txt > finalfile.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T03:12:37.427

在寻求帮助之前，您需要自己尝试解决问题。但是我觉得这个问题很有趣。这是使用 bash 脚本的可能解决方案：

```
cat file1.txt file2.txt file3.txt > treefiles.txt
suma=0;
sumb=0;

while read a b
do
  suma=$((suma + a));
  sumb=$((sumb + b));
done < treefiles.txt;

echo "$suma $sumb"; 
```

考虑到评论：

```
suma=0;
sumb=0;

while read a b
do
  ((suma += a));
  ((sumb += b));
done < <(cat f1.txt f2.txt f3.txt)

echo "$suma $sumb"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T03:10:43.153

假设 Python 标记是一个错误，这将解决问题。

```
echo `cat file*.txt` | awk 'BEGIN {a=0;b=0;} {for (i=1;i<=NF;i++) { if ( i%2 == 0 ) { b+=$i } else { a+=$i } } } END { print a, b }' 
```

echo `...` 将所有数字放在一行上。awk 程序将变量 a 和 b 中的奇数列和偶数列相加。

# windows - IntelliJ 构建配置键盘快捷键

> ID：13676551
> 
> 赞同：1
> 
> 时间：2012-12-03T02:56:05.513
> 
> 标签：windows, keyboard, intellij-idea, keyboard-shortcuts

我有点疯了，不使用鼠标。如何从以下起始位置到达结束位置。看截图！![在此处输入图像描述](../Images/a4d4635704d5a92f715d7e11159cdd3a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:58:32.163

恐怕目前不可能，创建了一个新问题，[请投票](http://youtrack.jetbrains.com/issue/IDEA-96424)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T18:08:00.407

我同意这似乎不可能。这是 IntelliJ 中键盘快捷键的链接：

[http://www.jetbrains.com/resharper/webhelp/Reference__Keyboard_Shortcuts.html](http://www.jetbrains.com/resharper/webhelp/Reference__Keyboard_Shortcuts.html)

# php - Dreamweaver Regex 使用正则表达式查找和替换

> ID：13676555
> 
> 赞同：1
> 
> 时间：2012-12-03T02:56:17.950
> 
> 标签：php, regex, dreamweaver, regex-greedy

我在我的网站上有很多实例，我无意中包含了以下代码：

```
if (isset(htmlspecialchars($_GET['u']))) 
```

我需要进行广泛的查找/替换以将该代码变成这样：

```
if (isset($_GET['u'])) 
```

我正在尝试使用下面的代码来查找正则表达式，但只有在我不包含 htmlspecialchars 和括号时才会出现。

*   查找： htmlspecialchars(\$_GET['([^']*)'])
*   替换：$_GET['$1']

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:05:00.693

`()`并且`[]`需要逃脱。

```
isset\(htmlspecialchars\(\$_GET\['([^']*)'\]\)\) 
```

# c - Malloc 不断返回相同的指针

> ID：13676559
> 
> 赞同：0
> 
> 时间：2012-12-03T02:56:55.157
> 
> 标签：c, pointers, malloc

我有一些 C 代码来解析文本文件，首先逐行解析，然后解析为令牌

这是逐行解析它的函数：

```
int parseFile(char *filename) {
//Open file
FILE *file = fopen(filename, "r");
//Line, max is 200 chars
int pos = 0;
while (!feof(file)) {
    char *line = (char*) malloc(200*sizeof(char));
    //Get line
    line = fgets(line, 200, file);
    line = removeNewLine(line);
    //Parse line into instruction
    Instruction *instr = malloc(sizeof(instr));
    instr = parseInstruction(line, instr);
    //Print for clarification
    printf("%i: Instr is %s arg1 is %s arg2 is %s\n", 
        pos,
        instr->instr,
        instr->arg1,
        instr->arg2);
    //Add to end of instruction list
    addInstruction(instr, pos);
    pos++;
    //Free line
    free(line);
}
return 0; 
```

}

这是将每一行解析为一些标记并最终将其放入指令结构的函数：

```
Instruction *parseInstruction(char line[], Instruction *instr) {
//Parse instruction and 2 arguments
char *tok = (char*) malloc(sizeof(tok));
tok = strtok(line, " ");
printf("Line at %i tok at %i\n", (int) line, (int) tok);
instr->instr = tok;
tok = strtok(NULL, " ");
if (tok) {
    instr->arg1 = tok;
    tok = strtok(NULL, " ");
    if(tok) {
        instr->arg2 = tok;
    }
}
return instr; 
```

}

ParseInstruction 中的行`printf("Line at %i tok at %i\n", (int) line, (int) tok);`总是打印相同的两个值，为什么这些指针地址永远不会改变？我已经确认 parseInstruction 每次都返回一个唯一的指针值，但是每条指令的 instr 槽中都有相同的指针。

为清楚起见，指令定义如下：

```
typedef struct Instruction {

char *instr;
char *arg1;
char *arg2; 
```

} 操作说明;

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T03:00:37.157

这就是`strtok`工作原理：它实际上修改了它正在操作的字符串，用分隔符替换分隔符`'\0'`并将指针返回到该字符串。（请参阅[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/strtok.3.html#BUGS)[中的“BUGS”部分`strtok(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/strtok.3.html#BUGS)，尽管它不是真正的错误，只是人们通常不期望的行为。）因此，您`tok`的首字母将始终指向`line`.

顺便说一句，这个：

```
char *tok = (char*) malloc(sizeof(tok));
tok = strtok(line, " "); 
```

首先将其设置`tok`为指向 的返回值`malloc`，然后将其重新分配为指向 的返回值`strtok`，从而完全丢弃 的返回值`malloc`。就像这样写：

```
int i = some_function();
i = some_other_function(); 
```

`some_function()`完全丢弃;的返回值 除了更糟糕的是，因为丢弃的返回值会`malloc`导致[内存泄漏](http://en.wikipedia.org/wiki/Memory_leak)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T03:24:25.847

我可以通过代码看到一些问题。最令人震惊的是`parseInstruction`：

```
char *tok = (char*) malloc(sizeof(tok));
tok = strtok(line, " "); 
```

在这里，您为 分配内存`tok`，但随后设置`tok`等于 的结果`strtok`，这实际上使您分配的内存无法访问（它从未使用过）。这不仅是内存泄漏，而且意味着这`tok == line`将永远是正确的，因为`strtok`返回一个指向第一个标记的指针（当使用第一个参数 != 调用时，它`NULL`通常是字符串的开头）。

这解释了您的第一个问题（值相同）。至于您的值在重复迭代中*始终*相同的问题，Edmund 的回答很好地总结了它：完全是偶然的，您正在释放和分配同一块内存。

您应该摆脱这`char *tok = malloc(...)`条线，只需`strtok`按预期在适当的位置对字符串进行操作即可。这将解决您的内存泄漏问题。不过，您仍然会在打印输出中看到相同的值，因为这就是`strtok`工作原理。

**但是，使用此代码最终会遇到的一个严重问题**是，您使用指向*. `line`*这在循环的每次迭代*期间*都可以正常工作，但是当您在每次迭代结束时释放时，该内存就会消失，只会被其他人回收。它现在可能会偶然地起作用，但最终你会到处都是[SEGFAULT](http://en.wikipedia.org/wiki/Segmentation_fault)。如果你希望每个`struct Instruction`人都有自己的私人记忆，你会想做更多这样的事情：

```
// You already do this part, but with a bug; use this code instead
Instruction *instr = (Instruction *)malloc(sizeof(Instruction));

// Then, inside parseInstruction, make these relevant changes
instr->instr = (char *)malloc(strlen(tok) + 1);
strcpy(instr->instr, tok);

instr->arg1 = (char *)malloc(strlen(tok) + 1);
strcpy(instr->arg1, tok);

instr->arg2 = (char *)malloc(strlen(tok) + 1);
strcpy(instr->arg2, tok); 
```

这里的要点是，您希望为`malloc`结构中的每个字段创建一个新的内存块，大小`strlen(...) + 1`（“+1”用于 NUL 字节），然后将字符串复制到该新内存中。

当需要释放时，请确保释放*所有*内存：

```
// free each field
free(instr->instr);
free(instr->arg1);
free(instr->arg2);

// free the struct itself
free(instr); 
```

可以做一些其他的事情来清理你的代码（例如，你的很多分配是不必要的：`fgets(line, 200, file)`与 具有相同的效果`line = fgets(line, 200, file)`），但这应该会让你走上正轨。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T03:06:18.983

您正在为一行分配内存，处理它，然后释放它。（您还为指令分配其他内存并且不释放它，但这是分开的。）

发生的事情是，当您从行中释放内存时，会出现一个大小为 200 个字符的孔（加上一些簿记空间）。你正在使用的`malloc`找到这个洞并在下次循环中重用它。

这些都是单独的分配，但恰巧内存中的相同空间被每个分配重用。当然，这应该被视为意外：您所做的其他分配的更改可能会改变它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T02:59:29.617

一定`sizeof(char)`不是`sizeof(tok)`

纠正它

```
char *tok = (char*) malloc(sizeof(tok));
    to

char *tok = (char*) malloc(sizeof(char)); 
```

# c# - 在 windows phone xna 游戏中使用 TTF 字体

> ID：13676560
> 
> 赞同：2
> 
> 时间：2012-12-03T02:57:10.887
> 
> 标签：c#, windows-phone-7, xna, spritefont

我在 Windows phone xna 游戏中使用了安装在我的电脑中的 TTF 字体。（[如此](https://stackoverflow.com/questions/9446159/windows-phone-7-how-to-use-ttf-in-spritefont)）由于该字体已安装在电脑中，它在模拟器上完美运行。由于我没有将字体导入项目，我不太确定它是否可以在设备上运行。

谁能告诉我它在设备中可以正常工作吗？我是否以正确的方式进行操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:57:58.170

XNA 内容管道在构建时生成一个 sprite 字体并将其与您的游戏打包在一起。无需在手机上安装原始 TrueType 字体。

当然，最好的确定方法是获取实际的 Windows Phone 设备并尝试一下。

# c# - 无法绑定到 Windows 8 应用商店应用中的附加属性

> ID：13676562
> 
> 赞同：1
> 
> 时间：2012-12-03T02:57:21.637
> 
> 标签：c#, xaml, windows-8, windows-runtime

我有一个附加属性，它似乎不允许我绑定到 Windows 8 中的附加属性。我可以在 Silverlight/WPF 中自由使用这种方式，但我不知道为什么它不会让我这样做。MSDN 论坛上的一篇帖子说它是通过 Windows 8 Release 修复的，我现在有这个版本，但它不会工作。它说“价值不在预期范围内”..

```
 public static class CountHelper
{
    public static readonly DependencyProperty TitleProperty =
        DependencyProperty.RegisterAttached("Title", typeof (string), typeof (CountHelper), new PropertyMetadata(default(string)));

    public static void SetTitle(UIElement element, string value)
    {
        element.SetValue(TitleProperty, value);
    }

    public static string GetTitle(UIElement element)
    {
        return (string) element.GetValue(TitleProperty);
    }
} 
```

XAML 文件

```
 <TextBlock local:CountHelper.Title="Hello"  Text="{Binding Path=(local:CountHelper.Title)}"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T04:44:43.157

你的数据上下文是什么？也许您应该将 ElementName 属性添加到您的绑定中，以将上下文设置为您的控件。

*编辑 - 这对我来说很好：

```
using Windows.UI.Xaml;
using Windows.UI.Xaml.Controls;

namespace App75
{
    public static class CountHelper
    {
        public static readonly DependencyProperty TitleProperty =
            DependencyProperty.RegisterAttached("Title", typeof(string), typeof(CountHelper), new PropertyMetadata(default(string)));

        public static void SetTitle(UIElement element, string value)
        {
            element.SetValue(TitleProperty, value);
        }

        public static string GetTitle(UIElement element)
        {
            return (string)element.GetValue(TitleProperty);
        }
    }

    public sealed partial class MainPage : Page
    {
        public MainPage()
        {
            this.InitializeComponent();
        }
    }
}

<Page
    x:Class="App75.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:App75"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid
        Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
        <TextBlock
            x:Name="tb"
            local:CountHelper.Title="Hello"
            Text="{Binding Path=(local:CountHelper.Title), ElementName=tb}" />
    </Grid>
</Page> 
```

# php - php / mysql 升级脚本出错

> ID：13676563
> 
> 赞同：0
> 
> 时间：2012-12-03T02:57:28.183
> 
> 标签：php, mysql, while-loop, upgrade

我正在尝试创建一个升级脚本，但某处似乎是一个错误，导致 while 循环永无止境。

我想要做的是使用升级代码的结果设置一个数据库字段。因此我有 2 个 while 循环。第一个循环是遍历所有 user_id，第二个 while 循环是计算每个用户填写的所有配置文件字段的百分比。

我想这是一个逻辑错误，因为如果我通过提供确切的 user_id 在没有第一个 while 循环的情况下运行升级代码，它工作正常。或者可能是问题，一些user_id不再存在？

请看一下代码：

```
$count_userid = 1;

       while($count_userid < 10000)
        {  

    // profile percentage

              $resultpercentage = mysql_query("SELECT profilevalue_1, profilevalue_2, profilevalue_3 FROM table_profilevalues WHERE profilevalue_user_id = '$count_userid' LIMIT 1");

            while ($row = mysql_fetch_row($resultpercentage)) {
              $empty_count = 0;
              $count = count($row);
              for ($i = 0; $i < $count; $i++)
                if ($row[$i] === '' || $row[$i] === '-1' || $row[$i] === 'NULL')
                  $empty_count++;
              $profile_percent_user = ((int) (100 * (1 - $empty_count / ($count - 1))));

              // SAVE PROFILE PERCENTAGE
              $profile_percentage_query = "UPDATE table_users SET user_profilepercentage='$profile_percent_user' WHERE user_id='$count_userid' LIMIT 1";
              $database->database_query($profile_percentage_query);
            } 

          $count_userid++;
        } 
```

有人在这里看到问题吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:54:27.950

一方面，由于 SQL 查询中的“LIMIT 1”，$resultpercentage 将包含 1 个值，对吗？那么下面的while循环是什么循环呢？并且以下计数将永远是 1，这否定了它之后的 for 循环。

tl; dr：删除“LIMIT 1”，以便您可以遍历所有结果。

# iphone - 推动segue动画向左移动？

> ID：13676566
> 
> 赞同：0
> 
> 时间：2012-12-03T02:57:41.997
> 
> 标签：iphone, xcode, storyboard, uistoryboardsegue

我设置了一个具有 3 个视图的导航控制器。我使用带有滑动手势的 push segue 来模仿 iPhone 主屏幕（应用程序页面）。它工作正常，但我注意到当向右滑动以返回页面时，过渡动画使其看起来像是在前进页面。关于如何获得推动转场动画以使其向左移动的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:44:15.133

您不应该为此使用导航控制器。您应该将页面放在滚动视图中，或者使用`UIPageViewController`. 从 iOS 6 开始，您可以将页面视图控制器设置`transitionStyle`为`UIPageViewControllerTransitionStyleScroll`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T10:08:57.470

更好地使用 unwindSegues，它们非常容易，我通过这篇文章学会了使用它们：[https ://spin.atomicobject.com/2014/10/25/ios-unwind-segues/](https://spin.atomicobject.com/2014/10/25/ios-unwind-segues/)

和 Stackoverflow 相关：[Unwind segues 有什么用，你如何使用它们？](https://stackoverflow.com/questions/12561735/what-are-unwind-segues-for-and-how-do-you-use-them)

# ios - 查找立体图像中匹配关键点的距离

> ID：13676574
> 
> 赞同：2
> 
> 时间：2012-12-03T02:58:40.840
> 
> 标签：ios, opencv, computer-vision, triangulation

我目前正在从 ios 设备上的相机中提取帧。从这些帧中，我使用 ORB 来查找关键点及其描述符。然后我使用 BFMatcher 来查找图像上关键点之间的匹配。

从这里我希望计算从相机到这些点的距离。我使用的所有点都是平面的（现在我使用墙上的别针进行测试）。在这个阶段没有必要考虑非平面表面，所以这应该很容易。

我目前有：

*   关键点
*   关键点描述符
*   关键点之间的匹配
*   基本矩阵
*   基本矩阵
*   两个摄像头的投影矩阵（虽然我不确定如何测试第二个摄像头是否正确）

我想我必须以某种形式使用三角测量，但不确定它是如何工作的。我知道我必须将来自每个相机的光线（由相机投影矩阵定义？）通过每个关键点并找到它们相交的点（或最接近相交的点）。正如我在 3D 空间中假设的那样，每条射线相交的可能性极小。此外，我的关键点匹配通常非常好，因为我做了一些基本的过滤，但有时关键点是错误的，所以我需要考虑这一点。

在此之前，我使用 Matlab 校准了相机，所以我有焦距、主点和失真。但是，我从图像中提取的所有点都是 2D 的。据推测，有必要在 3D 中表示这些点，但我不确定如何。

还是我完全采取了错误的方法？

[![](../Images/7afa9aae060b1c833dd7ea971566a04b.png)](https://i.stack.imgur.com/NSqgo.png)

显然，这将针对场景中的每个点完成，但我只画了一个点。平面（正方形）将始终处于相同位置，但相机位置会因帧而异。关键点将位于同一位置，但并非每帧都拾取每个点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:36:47.473

请参阅 Hartley-Sturm 关于最佳三角剖分的著名[论文](http://users.cecs.anu.edu.au/~hartley/Papers/triangulation/triangulation.pdf)，以及[Kanatani 的变体](http://www.comp.leeds.ac.uk/bmvc2008/proceedings/papers/55.pdf)：

# linux - 蓝牙隐藏在 GATT 上的输出报告

> ID：13676575
> 
> 赞同：1
> 
> 时间：2012-12-03T02:58:55.427
> 
> 标签：linux, linux-kernel, linux-device-driver, bluez

我正在 Bluez 中通过 GATT 使用 HID，我想知道 hid_output_report 创建的输出报告如何进入用户空间。提前致谢

# java - java.lang.ref.FinalizerReference 导致的内存泄漏

> ID：13676576
> 
> 赞同：23
> 
> 时间：2012-12-03T02:59:05.580
> 
> 标签：java, android

当启动 com.android.gallery3d 并按返回键大约 2000 次时，我得到了 java.lang.OutOfMemoryError 异常。android 4.0.4中com.android.gallery3d的dump heap。使用MAT分析发现java.lang.ref.FinalizerReference被嵌套调用。什么可能导致这个嵌套调用？

```
android.app.ContextImpl @ 0x418f8c98
android.media.AudioManager @ 0x419495c8
android.media.AudioManager$1 @ 0x41949688
java.lang.ref.FinalizerReference @ 0x419496a8
java.lang.ref.FinalizerReference @ 0x419496e8
java.lang.ref.FinalizerReference @ 0x41949800
java.lang.ref.FinalizerReference @ 0x41949848
java.lang.ref.FinalizerReference @ 0x41949890
java.lang.ref.FinalizerReference @ 0x419498d8
java.lang.ref.FinalizerReference @ 0x41949920
java.lang.ref.FinalizerReference @ 0x419499b0
java.lang.ref.FinalizerReference @ 0x419499f8
java.lang.ref.FinalizerReference @ 0x41949a40
java.lang.ref.FinalizerReference @ 0x41949a88
java.lang.ref.FinalizerReference @ 0x41949ad0
java.lang.ref.FinalizerReference @ 0x4194a5a8
java.lang.ref.FinalizerReference @ 0x4194af48
java.lang.ref.FinalizerReference @ 0x4194b878 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T14:30:31.123

我的应用程序中出现了这些症状，结果证明与内存泄漏有关。我曾经注册一个从活动到单例对象的回调。活动的破坏取决于回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-18T14:37:19.830

在我的例子中，我在自定义 SurfaceView 的重写 onDraw 方法中创建了一个新的（尽管很小）对象。

# database - 在 Joomla 中更改数据库内容的语言

> ID：13676579
> 
> 赞同：0
> 
> 时间：2012-12-03T02:59:36.060
> 
> 标签：database, joomla, localization

我有一个包含大量信息的数据库，并将其显示在我的网站上。现在我需要将这些信息翻译成其他语言。我曾想过使用 joomfish，但据我所知，joomfish 仅适用于文章。有没有简单的方法在 Joomla 上做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:43:29.013

请尝试以下链接以获取扩展名。也尝试一下Mambelfish。

[http://extensions.joomla.org/extensions/languages/translations-for-joomla](http://extensions.joomla.org/extensions/languages/translations-for-joomla)

# java - java编译器如何找到类文件而classpath未设置为jdk路径？

> ID：13676585
> 
> 赞同：7
> 
> 时间：2012-12-03T03:00:57.880
> 
> 标签：java, classpath, javac, dos

我正在尝试深入了解 Java 编译。所以我把我的 IDE 放在一边，开始使用 MS-DOS 命令行......

我创建了一个简单的项目，如下面的树中所述：

**示例应用程序**

```
|____**src**

       |_____pack
               |______Sample.java
|____**classes** 
```

这是 Sample.java 源代码：

```
public class Sample 
{

    private String s = new String("Hello, world");

    public Sample(){
          System.out.println(s);
    }
} 
```

我只是想编译这个类，所以我使用了 javac 命令：

```
prompt\SampleApp\src>javac -d ..\classes -sourcepath . pack\Sample.java 
```

一切正常，但我没想到，因为我`CLASSPATH`在编译我的 Sample.java 文件之前删除了我的环境变量。因此，由于编译器无法找到 java.lang.String 类文件，因此我期待编译器错误。

我读了这篇文章[http://www.ibm.com/developerworks/java/library/j-classpath-windows/](http://www.ibm.com/developerworks/java/library/j-classpath-windows/)它帮助我理解了很多事情。文章作者说默认的类路径是当前工作目录。但我不明白为什么我的源代码编译没有错误。有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T03:11:03.337

> 因此，由于编译器无法找到 java.lang.String 类文件，因此我期待编译错误。

简短的回答是编译器*知道*在哪里可以找到所有标准 Java SE 库类，而无需您告诉它。

更长的答案是`String`在引导类路径中找到了该类。这是由命令*隐式*设置的，`javac`以引用 JDK 安装中的相关 JAR。该`javac`命令在查找常规类路径中的内容之前先搜索引导类路径。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T03:05:20.603

类路径变量并没有按照你的想法做。引用 oracle 文档：

> CLASSPATH 变量是告诉应用程序（包括 JDK 工具）在哪里查找用户类的一种方式。（属于 JRE、JDK 平台和扩展的类应通过其他方式定义，例如引导类路径或扩展目录。）

来源：[http ://docs.oracle.com/javase/tutorial/essential/environment/paths.html](http://docs.oracle.com/javase/tutorial/essential/environment/paths.html)

基本上，由于`java.lang.*`它是平台的一部分并随 JDK/JRE 一起交付，因此您不必告诉编译器在哪里寻找它们。

# html - HTML 标签值获得水平滚动条，如何格式化？

> ID：13676587
> 
> 赞同：49
> 
> 时间：2012-12-03T03:01:05.737
> 
> 标签：html, pre

![这张图片显示了我在代码中发生的事情](../Images/7610ea61bea18ecd7995c00d24e7f5ea.png) 这是我的博客页面。有时我不得不在博客中使用 C#、PHP 和其他代码片段。因此，我使用 pre 标签使它看起来不错，并保持格式代码不变。`pre`标签宽度为 100%，并且有背景颜色。但是，文本离开了它，如上图所示，水平滚动条将出现。我该如何克服呢？我不想要底部滚动条。

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-12-03T03:38:47.570

There are a few solutions:

The simplest is to place line breaks in the text. This probably is not what you want though, since it will either leave large right margins or still cause scroll bars, unless the browser window is just the right size.

Another is to use `white-space:pre-wrap;` in the CSS for your `<pre>` tag. This will cause the text to wrap to a new line as necessary, but still preserve all whitespace present in the source. See [https://developer.mozilla.org/en-US/docs/Web/CSS/white-space](https://developer.mozilla.org/en-US/docs/Web/CSS/white-space) for more information about this CSS property.

Alternatively, if you do not want any line breaks added (either manually or through automatic word wrap), you can use one of the following CSS properties for your `<pre>` tag:

*   `overflow-x:hidden;` This will simply cut off the text that extends past the right edge. It will not be visible at all.
*   `overflow-x:scroll;` This will cause scroll bars to appear within your webpage in case text extends past the right edge. This will prevent the entire page from getting so wide that scroll bars appear at the bottom. See [http://www.w3schools.com/cssref/playit.asp?filename=playcss_overflow-x&preval=scroll](http://www.w3schools.com/cssref/playit.asp?filename=playcss_overflow-x&preval=scroll) for an example.
*   `overflow-x:auto;` Like `overflow-x:scroll;` except the scrollbars only appear if required. (Thanks ccalvert in the comments)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-09-06T07:54:08.167

添加样式：

```
pre { 
    white-space: pre-wrap; 
    word-break: break-word;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-14T07:22:28.257

我的行包含在`<a>`标签中。这对我有用：

```
a, pre {
  white-space: pre-wrap;
  word-wrap: break-word;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-10T00:10:57.150

您可以使用一些 CSS 属性：

```
pre {
display: flex;
white-space: normal;
word-break: break-word;
} 
```

可选地，如果`<pre>`在里面`<span>`：

```
span pre { display: inline-flex; } 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-02T12:41:49.540

您可以添加一个包装器 div 并添加下一个 CSS 属性

```
{
   div#wrapper {
      overflow: scroll;
      display: grid;
   }
} 
```

# android - how to show the missed call number in lock screen?

> ID：13676595
> 
> 赞同：8
> 
> 时间：2012-12-03T03:02:12.827
> 
> 标签：android, screen-lock

I have make an app that can show missed call when screen is locked,but I don't know how to show number of missed call on the locked screen.the call image is from `MultiWaveView`which has defined already,I have trid using `OnDraw`,with `Canvas` and `paint`,draw the specify coordinate.but it doesn't work .so anyone help me?thanks a lot.

![image](../Images/c2c45558a9bee2d9b0f233db9a72de23.png)

how to show the number(e.g.in picture is position **2** )in the picutre?

**edit1**

for now I have get the right number of missed call in app,but it doesn't show correctly

class:

`framework\base\core\java\com\android\internal\widget\multiwaveview\MissedCallView.java`

```
public class MissedCallView extends View {

private static final String TAG = "MissedCallViews";

public static final int UPDATESTART = 10;

private static final int DELAYTIME = 10000;

private int sTempMissedCallCount=-1;

Context mContext;

Canvas mCanvas;

public MissedCallView(Context context) 
{

super(context);

Log.i(TAG, "MissedCallView1");

mCanvas=new Canvas();

}

public MissedCallView(Context context, AttributeSet attrs)
{ 
super(context, attrs);

Log.i(TAG, "MissedCallView2");

mCanvas=new Canvas();

}

public MissedCallView(Context context,int missedCallNum) {

super(context);

sTempMissedCallCount=missedCallNum;

Log.i(TAG, "MissedCallView3");

mCanvas=new Canvas();

}

@Override 
protected void onDraw(Canvas canvas) {
super.onDraw(canvas);

if(sTempMissedCallCount>0)

{

Paint paint=new Paint(Paint.ANTIALIASFLAG); 
paint.setColor(Color.RED); Log.i(TAG,"Integer.toString(sTempMissedCallCount)is:"+Integer.toString(sTempMissedCallCount)); canvas.drawText(Integer.toString(sTempMissedCallCount),40,310,paint);//50 invalidate();

Log.i(TAG, "invalidate");

}

} 
```

}

this is the custom view ,Only `MissedCallView(Context context,int missedCallNum)` works ,it called at `public class MissCallObserver extends ContentObserver` when listen the missed called number .but the onDraw doesn't work ,so the app doesn't show the number I have got.

**EDIT2:**

for now I call the function in my custom hanlder, handler do every 10 second

```
private final Handler mUpdateMissCallNum = new Handler() {
@Override
public void handleMessage(Message msg) {
Log.i(TAG, "mUpdateMissCallNum");
switch (msg.what) {
case UPDATESTART:

Log.i(TAG, "UPDATESTART");
sNewMissedCallCount = getMissedCallCount(mContext);
if (sNewMissedCallCount != sTempMissedCallCount)
{

Log.i(TAG, "sNewMissedCallCount != sTempMissedCallCount");
new Thread(new Runnable()
{
public void run()
{

Log.i(TAG, "sNewMissedCallCount is:"+sNewMissedCallCount);

Log.i(TAG, "sTempMissedCallCount is:"+sTempMissedCallCount);
sTempMissedCallCount = sNewMissedCallCount;
mMissedCallView=new MissedCallView(mContext,sTempMissedCallCount);
//call my costum view here
Log.i(TAG, "sTempMissedCallCount is:"+sTempMissedCallCount);
        }
        }
    ).start();
    }
    break;
    default:
    break;
    }
}
} 
```

I draw it with canvas and paint,without XML files

then I　lock screen in XML:Keyguardscreentabunlock.xml (framework\base\core\res\res\layout).

which is use Ripple Lock in system:

```
<com.android.internal.widget.multiwaveview.MultiWaveView
android:id="@+id/unlockwidget"
android:orientation="horizontal"
android:layoutwidth="matchparent"
android:layoutheight="matchparent"
android:layout_alignParentBottom="true"
        android:targetDrawables="@array/lockscreen_targets_with_camera"
        android:targetDescriptions="@array/lockscreen_target_descriptions_with_camera"
        android:directionDescriptions="@array/lockscreen_direction_descriptions"
        android:handleDrawable="@drawable/ic_lockscreen_handle"
        android:waveDrawable="@drawable/ic_lockscreen_outerring"
        android:outerRadius="@dimen/multiwaveview_target_placement_radius"
        android:snapMargin="@dimen/multiwaveview_snap_margin"
        android:hitRadius="@dimen/multiwaveview_hit_radius"
        android:rightChevronDrawable="@drawable/ic_lockscreen_chevron_right"
        android:horizontalOffset="0dip"
        android:verticalOffset="60dip"
        android:feedbackCount="3"
        android:vibrationDuration="20"
        /> 
```

then I get this :

![enter image description here](../Images/83716affa52f892b527ef12f03ee152f.png)

Now I want to show the missed call number on the center of the circle(in the picuture mouse position.),And I don't know how to achieve.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T03:09:19.733

you can make use of flag [`FLAG_SHOW_WHEN_LOCKED`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#FLAG_SHOW_WHEN_LOCKED)

for more information on lock screen [My android lock](http://code.google.com/p/mylockforandroid/wiki/LockActivity)

```
public static final int FLAG_SHOW_WHEN_LOCKED 
```

Lines from API level 5

> Window flag: special flag to let windows be shown when the screen is locked. This will let application windows take precedence over key guard or any other lock screens. Can be used with FLAG_KEEP_SCREEN_ON to turn screen on and display windows directly before showing the key guard window. Can be used with FLAG_DISMISS_KEYGUARD to automatically fully dismisss non-secure keyguards

## UPDATE1 for missed calls:

All you need is to query the phone for any calls then extract missed one & Then just get the count of rows in the Cursor that is return by the query

```
String[] projection = { CallLog.Calls.CACHED_NAME, CallLog.Calls.CACHED_NUMBER_LABEL, CallLog.Calls.TYPE };
       String where = CallLog.Calls.TYPE+"="+CallLog.Calls.MISSED_TYPE;          
       Cursor c = this.getContentResolver().query(CallLog.Calls.CONTENT_URI, selection,where, null, null);
       c.moveToFirst();    
       Log.d("CALL", ""+c.getCount()); //do some other operation
        if(c.getCount() == SOME_VALUE_TO_START_APP_ONE) 
```

In the where clause you set condition for selection of data. In your case you need everything which type equals `CallLog.Calls.MISSED_TYPE`.

you can select the Name of the caller and his number, ofcourse you can specify more information to be queried like type of number like mobile, home, work.
The expression is equivalent to SQL query, something like:

```
SELECT CACHED_NAME, CACHED_NUMBER_LABEL, TYPE FROM CONTENT_URI WHERE TYPE=MISSED_TYPE 
```

> UPDATE2: how to show the 2 in the picutre .?

All you need to do is set the alarm string in the system settings, as follows:

```
String message = "2";
Settings.System.putString(context.getContentResolver(),
        Settings.System.NEXT_ALARM_FORMATTED, message); 
```

# sql - 为什么此 SQL ODBC 查询不起作用？

> ID：13676603
> 
> 赞同：2
> 
> 时间：2012-12-03T03:03:10.790
> 
> 标签：sql, odbc

为什么这条 SQL 语句不起作用？

```
Select 'event2' as 'EVENTCOLN' 
```

错误出现为：

[霍尼韦尔][ODBC 驱动程序]未找到预期的词法元素：

如果我尝试

```
Select 'event2' 
```

错误出现为：

[霍尼韦尔][ODBC 驱动程序]SQL 语句意外结束

我尝试了许多其他变体似乎都不起作用。

我只想让数据库吐出一个值'event2'

仅供参考，我正在连接到一个名为“Experion PKS ODBC 驱动程序”的 ODBC 驱动程序

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:08:16.047

尝试

```
Select 'event2' as EVENTCOLN 
```

或者

```
Select 'event2' as "EVENTCOLN" 
```

您正在使用字符串文字作为列名。

如果您的 ODBC 驱动程序不支持选择没有表名的值，请选择一个随机表并选择 TOP 1：

```
SELECT TOP 1 'event2' AS EVENTCOLN FROM MyTable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:09:51.957

我不知道具体的司机，但

```
Select 'event2' 
```

不是一个完整的 SQL 语句 - 因此意外结束。如果我只想获得 'event2' 的值，我会尝试类似：

```
SELECT event2 FROM <tablename>; 
```

我不知道您在 'event2' 上使用的单引号 - 除非它是一个非常独特的驱动程序，否则您不希望在列名上使用引号。另外，请注意我添加了“FROM”来指定具有“event2”列的表。

我添加了一个分号 - 一些驱动程序/数据库需要，而另一些则不需要 - 你可以尝试两种方式。

# android - .obj 文件 triangle_fan 或 triangles

> ID：13676604
> 
> 赞同：0
> 
> 时间：2012-12-03T03:03:35.237
> 
> 标签：android, opengl-es, 3d, mesh

我正在使用 Blender 创建 .obj 文件，然后尝试编写自定义解析器来读取文件并创建网格。我有几个问题。我的示例是使用搅拌机中的立方体，但我想将我的问题扩展到立方体之外。

当我在搅拌机中创建一个立方体并将其保存为 .obj 文件时，我得到了这个......

```
# Blender v2.63 (sub 0) OBJ File: ''
# www.blender.org
mtllib cube.mtl
o Cube_Cube.001
v -0.911915 -0.851241 1.196067
v -0.911915 -0.851241 -0.803933
v 1.088085 -0.851241 -0.803933
v 1.088085 -0.851241 1.196067
v -0.911915 1.148759 1.196067
v -0.911915 1.148759 -0.803933
v 1.088085 1.148759 -0.803933
v 1.088085 1.148759 1.196067
usemtl 
s off
f 2 1 5 6
f 6 7 3 2
f 7 8 4 3
f 1 4 8 5
f 1 2 3 4
f 8 7 6 5 
```

而我的Mesh渲染方法是这样的......

```
@Override
    public void draw(GL10 gl)
    {
        super.draw(gl);
        gl.glColor4f(255, 0, 255, 150);
        gl.glFrontFace(GL10.GL_CCW);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glVertexPointer(3,GL10.GL_FLOAT,0,vertexBuffer);

        gl.glDrawElements(GL10.GL_TRIANGLE_FAN,vertexBuffer.array().length,GL10.GL_UNSIGNED_SHORT,indexBuffer);
        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisable(GL10.GL_CULL_FACE);
        gl.glColor4f(255, 255, 255, 255);
    } 
```

如何填充我的索引缓冲区和顶点缓冲区以便能够绘制这个立方体。我可以将所有顶点都放在一个“drawElements”函数中，还是必须逐个三角形地完成？.obj 文件是否会使一个面超过四个顶点？（比如二维五边形或六边形？）如果是这样，我将如何绘制它们？.OBJ 文件是否使用 Triang 扇形或条形？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-12T17:39:41.510

就实际效率提升而言，如果您将缓冲区存储在 GPU 上，则很可能没有。如果您正在计算 CPU 上的数据并将其缓冲到 GPU 每一帧（如果可以的话，您应该避免并将其存储在 GPU 本身上），那么您正在通过使用三角形风扇/条来减小缓冲区大小。但是，在光栅化过程中，除非光栅化器循环能够迭代具有大于 3 个顶点的复杂形状（我非常怀疑），否则无论如何它都必须对多边形进行三角剖分。

我不是一个沉重的 android 程序员，但如果您使用的 OpenGL 版本有“GenerateBuffer()”和“DrawArrays()”，请使用它们。由于使用三角形风扇/条仅有助于硬件组件之间的缓冲速度，因此如果您的 android 设备没有专用的图形设备，则可能无需进行优化。

就你如何做而言，你只需对三角形列表进行去三角化。使用三角形条带，您必须遍历所有三角形并找到它们的列表，它们的 2 个顶点位置与每个先前的顶点相同。对于三角形风扇，您需要遍历所有三角形，并找到它们的列表，它们与每个先前的顶点具有相同的 2 个顶点位置，并且它们都必须具有相同的旋转原点。

上面的描述只是三角剖分算法的逆：

对于四边形（与您的示例代码一样），您可以使用上面的三角形扇形方法（三角形条不适用于搅拌机 obj 文件四边形）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:50:36.357

OpenGL 和显卡只是简单的机器，它们绘制三角形的速度非常快。因此，您应该首先关注三角形。忽略四边形。无论如何，四边形通常被一组两个三角形所取代，您无法控制它们是如何划分的。五边形和更多的问题带来了更多的问题。也忽略条带和粉丝。无论如何，通用的 3d 模型通常只是三角形。在特殊情况下，扇形和条形可用作优化。例如，如果您从高度图以网格的形式对景观进行建模，则三角形条非常有用。

# spring - 如何访问 Spring MVC 控制器类中的自定义 bean？

> ID：13676605
> 
> 赞同：4
> 
> 时间：2012-12-03T03:03:42.430
> 
> 标签：spring, model-view-controller, javabeans

我是春天的新手，所以请多多包涵。

我正在查看本指南（http://java2t.com/233/using-spring3-jdbctemplate-rowmapper-to-return-list-of-records/）。它在 Eclipse 中使用“普通”java 项目。我正在尝试使用动态 Web 项目来模拟示例，但没有任何成功。

**我的 web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID"
    version="3.0">

    <display-name>StaffDirectory</display-name>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>

    <welcome-file-list>
        <welcome-file>index.jsp</welcome-file>
    </welcome-file-list>    
</web-app> 
```

**我的 spring-servlet.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:component-scan base-package="org.flinders.staff.directory" />

    <mvc:annotation-driven />
    <mvc:resources mapping="/resources/**" location="/resources/" />
    <mvc:view-controller path="/" view-name="index"  /> 

    <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/test" />
        <property name="username" value="root" />
        <property name="password" value="PVHmg57bE4" />
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>

     <bean id="staffDirectoryDAO" class="org.flinders.staff.directory.dao.impl.StaffDirectoryDAOImpl">
        <property name="jdbcTemplate" ref="jdbcTemplate" />
    </bean>

    <bean id="staffDirectoryService" class="org.flinders.staff.directory.services.impl.StaffDirectoryServiceImpl">
        <property name="staffDirectoryDAO" ref="staffDirectoryDAO" />
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass" >
            <value>org.springframework.web.servlet.view.tiles2.TilesView</value>
        </property>
    </bean>

    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles.xml</value>
            </list>
        </property>
    </bean> 
</beans> 
```

**我的控制器类**

```
package org.flinders.staff.directory.controllers;

import java.util.List;

import org.flinders.staff.directory.models.database.StaffModel;
import org.flinders.staff.directory.models.misc.SearchModel;
import org.flinders.staff.directory.services.StaffDirectoryService;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class StaffDirectoryController {
    private StaffDirectoryService staffDirectoryService;

    @RequestMapping("/SearchResults")
    public void showSearchResults() {
        //StaffDirectoryService staffDirectoryService = (StaffDirectoryService) getServletContext().getBean("StaffDirectoryService");
        List<StaffModel> staffList = staffDirectoryService.viewStaffResults();

        for (StaffModel staffModel : staffList) {

          System.out.println(staffModel.getStaffID() + "    : "

              + staffModel.getFirstname() + "  : " + staffModel.getSurname());

        }

        System.out.println();

    }

    @RequestMapping("/SearchForm")
    public ModelAndView showSearchForm() {
        return new ModelAndView("search/SearchForm", "SearchModel", new SearchModel());
    }
} 
```

我没有遇到任何发布/重新启动我的 Tomcat 实例的情况。但是转到我的浏览器，我的代码在我的控制器类中的这段代码（List staffList = staffDirectoryService.viewStaffResults();）上抛出了一个异常。

有任何想法吗？谢谢！:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T05:24:35.753

使用 Autowired Annotation 注入服务对象

首先... 导入 Autowired Annotation

```
import org.springframework.beans.factory.annotation.Autowired; 
```

并通过注解注入服务对象。

```
@Autowired
private StaffDirectoryService staffDirectoryService; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:34:44.727

看起来你没有注入`StaffDirectoryService`，所以当你调用它时它是 null `viewStaffResults()`，从而抛出一个`NullPointerException`.

添加`@Autowired`注释应该可以帮助您解决这个问题：

```
@Autowired
private StaffDirectoryService staffDirectoryService; 
```

# php - PHP 到 HTML（输入文本字段/IMG 上传）

> ID：13676609
> 
> 赞同：1
> 
> 时间：2012-12-03T03:04:30.460
> 
> 标签：php, html, input, upload

我正在寻找一个脚本，允许在一个协调的 html 页面中更新两个单独的变量（img 和 textfield）。

我希望用户上传图片，然后在文本字段中输入谷歌文档链接。在他们提交这两个变量之后，html 将被更新/替换为新的图像/链接。

任何有关执行此操作/入门的最有效方法的见解将不胜感激！非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:25:36.763

这会让你开始上传图片[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp) 剩下的你应该看看关于 MySQL/PHP 的教程 你要求做的事情很简单，只需几个几个小时的学习，你可以做到这一点。

# haskell - 生成此数组时的无限循环

> ID：13676616
> 
> 赞同：2
> 
> 时间：2012-12-03T03:05:33.193
> 
> 标签：haskell

我实现了 KMP 算法的失败表。

```
kmp s = b
    where a = listArray (0,length s-1) s
          b = 0:list 0 (tail s)
          list _ [] = [] 
          list n (x:xs) 
            | x==a!n    = (n+1):list (n+1) xs
            | n > 0     = list (b!!(n-1)) (x:xs)
            | otherwise = 0:list 0 xs 
```

`b`是一个列表，`b!!(n-1)`最后一行很慢，因此我希望加快速度并执行以下操作。

```
kmp s = b
    where a = listArray (0,length s-1) s
          t = listArray (0,length s-1) b
          b = 0:list 0 (tail s)
          list _ [] = [] 
          list n (x:xs) 
            | x==a!n    = (n+1):list (n+1) xs
            | n > 0     = list (t!(n-1)) (x:xs)
            | otherwise = 0:list 0 xs 
```

请注意，唯一的区别是替换`b!!`为`t!`并声明`t`为从 生成的数组`b`。

对于相同的输入，原始代码具有正确的输出，但新代码只是输出`<<loop>>`。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:40:14.707

您的问题是列表`b`需要数组`t`来确定其结构（长度）。但是数组`t`在存在之前需要列表的长度：

```
listArray :: Ix i => (i,i) -> [e] -> Array i e
listArray (l,u) es = runST (ST $ \s1# ->
    case safeRangeSize (l,u)            of { n@(I# n#) ->
    case newArray# n# arrEleBottom s1#  of { (# s2#, marr# #) ->
    let fillFromList i# xs s3# | i# ==# n# = s3#
                               | otherwise = case xs of
            []   -> s3#
            y:ys -> case writeArray# marr# i# y s3# of { s4# ->
                    fillFromList (i# +# 1#) ys s4# } in
    case fillFromList 0# es s2#         of { s3# ->
    done l u n marr# s3# }}}) 
```

如您所见，首先分配一个适当大小的原始数组，然后填充它`arrEleBottom`（这是一个`error`带有消息未定义数组元素的调用），然后遍历列表并将列表元素写入数组（列表元素可以毫无问题地引用数组值）。然后，最后，阵列被冻结。在数组被冻结之前，无法从填充代码外部访问它（它基本上是一个`ST s`计算）。

`ST s`修复它的最简单方法是 IMO 在monad中使用可变数组，

```
kmp s = elems b
  where
    l = length s - 1
    a = listArray (0, l) s
    b = runSTArray $ do
           t <- newArray_ (0,l)
           writeArray t 0 0
           let fill _ _ [] = return t
               fill i n (x:xs)
                 | x == a!n = do
                        writeArray t i (n+1)
                        fill (i+1) (n+1) xs
                 | n > 0    = do
                        k <- readArray t (n-1)
                        fill i k (x:xs)
                 | otherwise = do
                        writeArray t i 0
                        fill (i+1) 0 xs
           fill 1 0 (tail s) 
```

是对代码的一种非常直接（而且效率有点低）的翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T06:49:09.753

这并不能直接回答您的问题，但提供了比使用`STArray`s.

该算法的命令式版本直接转换为不使用重复列表索引或状态的版本，只是惰性数组构造：

```
import Data.Array.IArray

kmp :: String -> Array Int Int
kmp s = b
  where
    a :: Array Int Char
    a = listArray (0,l-1) s
    b = listArray (1,l) (0:map (\q -> f (b!(q-1)) q) [2..l])
    f k q
      | k > 0 && (a ! k) /= (a ! (q-1)) =
        f (b ! k) q
      | a ! k == a ! (q-1) = k + 1
      | otherwise = k
    l = length s 
```

但是，我没有对此进行基准测试。

# javascript - 手动检查复选框并使用 jquery 触发

> ID：13676618
> 
> 赞同：0
> 
> 时间：2012-12-03T03:05:47.453
> 
> 标签：javascript, jquery, click, checkbox, checked

我有一些代码：

```
$(document).ready(function(){
    $("#a").click(function(){
        $("#b").trigger("click");
    });

    $("#b").click(function(){
        alert($("#b").prop("checked"));
    });
}); 
```

这是HTML代码：

```
<form>
    <input type="checkbox" id="a"></input>
    <input type="checkbox" id="b"></input>
</form> 
```

如果手动单击“b”复选框，它将显示“true”，但如果选中“a”，它将显示“false”，然后将 b 的属性检查更改为 true。

谁能告诉我如何检查 b 的当前道具。我必须从 a 和本身触发事件检查 b，但是当这样做时，我无法检查 b 是否被检查

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:07:20.247

```
$(document).ready(function() {
    $("#a").click(function() {
        $("#b").prop("checked", true);
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:24:15.833

只需使用 setTimeout。它给 b 足够的时间在显示警报之前进行检查：

```
 $(document).ready(function(){
            $("#a").click(function(){
                $("#b").click();
            });

            $("#b").click(function(){
                setTimeout('alert($("#b").prop("checked"));',0);
            });
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T07:00:13.933

是的，这比我想象的要容易。只需将 Click 事件更改为 Change 事件，在 Change 之前单击触发，因此在 Change 事件中我可以获得新值而不能在 Click 事件中

# java - 为 SE mysql-connector-java-5.1.22-bin.jar 工作时，用于 EE 的 jdbc 出现错误

> ID：13676619
> 
> 赞同：0
> 
> 时间：2012-12-03T03:05:50.010
> 
> 标签：java, jdbc

我在带有 JAVASE 7（工作正常）的桌面应用程序中使用 mysql-connector-java-5.1.22-bin.jar 用于 JDBC，但对于 JAVASE 6（与 JAVASE 7 应用程序中的代码相同）它不起作用。我在控制台中都看不到任何异常，也看不到我所做的任何调试打印。有什么问题？

这是我的项目文件夹[http://open-pages.com/temp.zip](http://open-pages.com/temp.zip)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:22:19.203

我认为您的问题不涉及 java 6 与 Java 7。据我所知，您的代码中没有任何内容使用 Coin 语法。问题是 java 桌面应用程序与 Web 应用程序。JDBC驱动程序是否包含在war文件中？（在库文件夹中）我通常在上下文中配置数据库连接。xml 并使用 InitialContext 获取数据源。

只需编写一个简单的测试 jsp 或 Servlet 即可连接到您的数据库并显示一些查询结果。您可以直接在网页上打印任何异常，以便于测试。我不确定为什么没有将异常写入您的日志文件（检查写入服务器日志文件夹的最新文件）

```
<%-- mysqlTest.jsp :For testing mysql connection and database query syntax --%>
<html><body>
<h2 align="center">SQL Test for mySQL JDBC Driver</h2>
<%
java.sql.Connection con = null;
try {
    String url="jdbc:mysql://localhost:3306/test";
    Class.forName("com.mysql.jdbc.Driver").newInstance();
    con=java.sql.DriverManager.getConnection(url, "root", "abc");
    if(con!=null) {
        String query="select userName, password from users";
        java.sql.PreparedStatement stmt=con.prepareStatement(query);
        java.sql.ResultSet r=stmt.executeQuery();
        while(r.next()){
            out.print(r.getString(1));
            out.println("<br>");
        }
        r.close();
        stmt.close();
    }
    else
        out.println("<strong>The Database connection is null.  DriverManager could not return a valid connection.</strong>");        
    }
    catch(ClassNotFoundException e){
        out.println("Cannot load driver<br>" +e.toString());
    }
    catch(java.sql.SQLException e){
        out.println(e);
    }
    catch(Exception e){
        out.println(e);
    }
    finally {
        if(con!=null)
            con.close();
    }
%></body></html> 
```

# java - 为签名部分中的图像解析电子邮件

> ID：13676620
> 
> 赞同：2
> 
> 时间：2012-12-03T03:06:05.670
> 
> 标签：java, image, parsing, email, attachment

有一个程序可以检查收件箱中的未读电子邮件，解析电子邮件内容并将其发送到记录。如果电子邮件中有任何图像，这些图像将作为记录的附件发送。现在，如果任何电子邮件的签名部分中有图像，则该图像也将作为附件发送。

有没有办法可以检查电子邮件签名部分中的图像并忽略它们？或者有没有办法让我跳过整个签名内容的解析？

如果难以解析来自不同电子邮件服务器的电子邮件的签名部分，我想知道是否有可能来自 Outlook 的电子邮件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:28:46.457

编写消息时将签名合并到消息中。消息发送后，通常无法将签名与发件人手动键入的内容区分开来。

但也许，如果您引用的签名始终具有某种通用格式，您可能可以使用正则表达式或类似的东西检测到该特定格式。

# javascript - 使用 .on() 理解数据传递

> ID：13676624
> 
> 赞同：3
> 
> 时间：2012-12-03T03:06:31.057
> 
> 标签：javascript, jquery

我在读

```
function myHandler(event) {
    alert(event.data.foo);
}

$("p").on("click", { foo: "bar" }, myHandler) 
```

但我想我可以做到

```
 function myHandler(a) {
      alert(a);
  }
  $("p").on("click", function() { myHandler('bar') }) 
```

我为什么要使用事件，事件实际上是为了什么，我也看到很多人在他们的代码中使用' `this`'和' `that`'，但我不明白它是什么，为什么不只是按他们的名字选择元素`$('#something')`，这就是我平时做什么？关于编写最简化程序代码的任何提示？有太多不同的方法，但在编码上做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:53:06.580

简短的回答是，实现同一件事的方法不止一种，这取决于具体情况。

第一个代码片段在语义方面做了一些事情：

1.  函数声明非常明确，`myHandler`不是普通函数，而是事件处理程序；现在这对您来说可能并不重要，但是一旦您将代码移交给其他人或者您在几个月后回到您的代码中，这将是重要的。

2.  因为它是单独声明的，所以它也显示了`myHandler`将被重用的意图。我想会有更多的语句将相同的处理程序应用于其他 jQuery 选择器。

3.  由于#1 和#2，辅助数据不能再以正常方式传递，但也需要通过the 传递`Event`。

您自己的代码片段在通用代码和简单性之间做出了妥协；它没有理由爆炸。

**回答您的其他问题**

> 我为什么要使用事件？

在很多情况下你不会；以这段代码为例，基于 jQuery 事件处理最常用的特性：

```
<a href="http://www.example.org">...</a>

$('a').on('click', function(e) { 
    e.preventDefault();
    // do something beautiful
}); 
```

在这里，事件`e`被传递给点击处理程序，然后当点击链接时，它会阻止浏览器导航到链接。可以通过以下方式完成相同的操作：

```
$('a').on('click', function() { 
    // do something beautiful
    return false;
}); 
```

尽管上面代码的意图不太明显，但它完全不接触事件就做了同样的事情。

> 事件究竟是为了什么？

它封装了有关各种用户输入的数据，例如按键、单击、拖动等。jQuery 对其进行了概括，并通过数据传递功能对其进行了扩展。也可以看看：[`Event object`](http://api.jquery.com/category/events/event-object/)

> 为什么不直接按名称选择元素？

这里没有权威的答案，但是当你`this`用来引用被点击的元素（或基于它的选择器来引用父、兄弟等）时，点击处理程序代码变得更加通用和可维护；如果您需要向其他元素添加相同的行为，则无需编写 X 个不同的点击处理程序。

# sql - 必须在 SQL INSERT 语句中定义缩放器变量

> ID：13676627
> 
> 赞同：1
> 
> 时间：2012-12-03T03:06:50.847
> 
> 标签：sql, variables, insert, scalar

我正在尝试编写具有 3 个文本框的代码，并且我需要将输入框中的信息传递给 SQL 数据库，然后将其显示在 gridview 中，用作购物车。我在我的 catch 块中不断收到一个错误，说我必须定义一个 @strItemName 的标量变量。这是我的代码...任何帮助将不胜感激。抱歉，如果此代码在网站上的格式不完全正确，这是我的第一篇文章。提前致谢。

```
protected void btnSubmit_Click(object sender, EventArgs e)
    {
        string strItemName = txtTitle.Text;
        string strMovieQuantity = txtNumMovies.Text;
        string strMoviePrice = txtPrice.Text;
        //string strCurrentUser = HttpContext.Current.User.Identity.Name;
        // I need this later to have a current user also inserted into the table

        string strConnection = ConfigurationManager.ConnectionStrings["cs3200"].ToString();
        SqlConnection myConnection = new SqlConnection(strConnection);

        string strSql = "INSERT INTO ShoppingCart ([ItemName], [QuantityOrdered], [UnitPrice]) VALUES  (@strItemName, @strQuantityOrdered, @strUnitPrice)";
        SqlCommand myCommand = new SqlCommand(strSql, myConnection);

        try
        {
            myConnection.Open();
            int intCnt = myCommand.ExecuteNonQuery();
            if (intCnt > 1)
            {
                lblInsert.Text = intCnt.ToString() + "Records was added";
            }
            else
            {
                lblInsert.Text = "One Record was inserted";
            }
            myConnection.Close();
        }

        catch (Exception ex)
        {
            lblInsert.Text = "Unable to insert your record" + "</br>";
            lblInsert.Text += "Error Message = " + ex.Message;
            myConnection.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:09:59.533

您必须在调用 ExecuteNonQuery() 方法之前指定参数。

```
 using(SqlConnection myConnection=new SqlConnection(cnStr))
   {
   using(SqlCommand myCommand=new SqlCommand(strSql,myConnection))
    {
    myCommand.Parameters.AddWithValue("@strItemName",value1);
    myCommand.Parameters.AddWithValue("@strQuantityOrdered",value2);
    myCommand.Parameters.AddWithValue("@strUnitPrice",value3);
    myConnection.Open();
    int intCnt = myCommand.ExecuteNonQuery();
    ....
    }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:12:33.380

如果您想使用“准备好的语句”（始终建议），您需要执行以下操作：

*   [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.prepare%28v=vs.71%29.aspx)

    ```
    rConn.Open()
    Dim command As SqlCommand = New SqlCommand("", rConn)
    ' Create and prepare an SQL statement.
    command.CommandText = "insert into Region (RegionID, RegionDescription) values (@id, @desc)"
    command.Parameters.Add("@id", id)
    command.Parameters.Add("@desc", desc)
    command.Prepare() ' Calling Prepare after having set the Commandtext and parameters.
    command.ExecuteNonQuery() 
    ```

如果您只想要一个简单的“插入”，那么您可以执行以下操作：

```
string sql = 
  "insert into Region (RegionID, RegionDescription) values ('" + id +
  "', '" + desc + "')";
SqlCommand command = new SqlCommand(sql);
command.ExecuteNonQuery() 
```

# javascript - 将 ruby 变量从控制器分配给 javascript 变量

> ID：13676636
> 
> 赞同：0
> 
> 时间：2012-12-03T03:08:47.473
> 
> 标签：javascript, ruby-on-rails, variables

我一直在到处寻找并尝试了我能找到的每一个建议，但它仍然不起作用。基本上，我试图将输入的任何内容拆分为单独的单词，然后将每个单词作为链接。我试图从数据库中获取一个值并将其传递给 javascript，以便我可以在 javascript 中使用一个变量作为该值。这是代码：

在控制器中：

```
def show
  @icelandic_reader = IcelandicReader.find(params[:id])
  @icelandic_reader_json = @icelandic_reader.text.to_json;

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @icelandic_reader }
 end
end 
```

在 .js.erb 文件中：

```
window.onload = function() {
  var myText = <%= @icelandic_reader_json %>;
  console.log("test1");
  var words = myText.split(" ");
  console.log("test2");
  var numWords = words.length;
  var textToInsert;

  for (var i = 0; i < numWords; i++) {
      console.log("inside for loop");
      textToInsert += "<a href=#>" + words[i] + "</a>" + " ";
  }

  document.getElementById('icelandic_reader_text').innerHTML = textToInsert;

} 
```

我没有收到任何错误，但我没有看到任何测试控制台日志出现。我已经尝试了所有找到如何分配 ruby​​ 变量的方法，但它不起作用。我有红宝石 3​​.2.6。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:43:16.400

这对我来说看起来很奇怪。如果`@icelandic_reader.text`只是一个字符串，你为什么要调用`to_json`它？如果它是 的属性`@icelandic_reader`，您可以从视图中访问它，那么您为什么还要将它分配为实例变量呢？为什么你甚至需要这个`render json`电话？Rails 只会`show.js.erb`在您的视图文件夹中查找。

试试这个：

```
# controller

def show
  @icelandic_reader = IcelandicReader.find(params[:id])

  respond_to do |format|
    format.html # show.html.erb
    format.json 
  end
end 
```

在你的 js.erb 中：

```
# js.erb

var myText = "<%= @icelandic_reader.text %>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T16:16:16.717

我只想结束这个问题，这就是为什么我要回答我自己的问题。Teeg 告诉我使用 Gon，这最终对我有用，但他发表了评论，所以我无法投票作为答案。

# php - 在 MySQL 查询中的变量后添加 ORDER BY

> ID：13676637
> 
> 赞同：1
> 
> 时间：2012-12-03T03:08:59.707
> 
> 标签：php, mysql

我目前有这行代码，效果很好：

```
$data2 = mysql_query("SELECT * FROM notes WHERE HiveID=" . $HiveID) or die(mysql_error()); 
```

我想颠倒我的列表顺序，所以我尝试在 WHERE 之后添加 ORDER BY。我尝试了以下代码：

```
$data2 = mysql_query("SELECT * FROM notes WHERE HiveID=" . $HiveID  . "ORDER BY Date DESC") or die(mysql_error()); 
```

这段代码给了我错误：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“BY Date DESC”附近使用正确的语法。

我不知道如何让它工作，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T03:10:36.380

您在开引号后缺少一个空格。

应该`. $hive . " ORDER BY...`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:10:56.927

你的查询是 `HiveID=" . $HiveID . "ORDER`这样的（如果 hiveid 是 5）所以它不会给你结果在尝试`5ORDER` 之前必须有一个空格`ORDER`

```
"SELECT * FROM notes WHERE HiveID=" . $HiveID." ORDER BY Date DESC" 
```

或者

```
"SELECT * FROM notes WHERE HiveID='".$HiveID."' ORDER BY Date DESC" 
```

# android - Phonegap 目前是否支持全屏平板应用？

> ID：13676641
> 
> 赞同：1
> 
> 时间：2012-12-03T03:09:19.953
> 
> 标签：android, cordova

我知道 Phonegap 现在实际上是 Cordova (sp?)。我发现的信息似乎无法回答有关全屏平板电脑应用程序的问题。我见过为智能手机设计的应用程序可以出现在平板电脑上，比如 iPad，但我不打算这样做。
我曾看到一些关于使用 phonegap 的杂志应用程序，我可以使用类似的东西。我只是想知道它将如何出现在更大屏幕的平板设备中。谢谢，布鲁斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:17:02.097

是的。

如果您的意思是全屏，例如在 android 中删除状态栏和屏幕控件，答案会变得有点复杂，但这是 android 的问题，而不是 phonegap 的问题。

# z-index - Keyshot VR z-index

> ID：13676667
> 
> 赞同：0
> 
> 时间：2012-12-03T03:12:37.500
> 
> 标签：z-index

有人可以帮忙解决这个问题吗？

我已经在网页中嵌入了一个 Keyshot VR ( [http://www.keyshot.com/vr/](http://www.keyshot.com/vr/) ) 剪辑（它在所有浏览器中都可以正常工作，所以没关系），我遇到的问题就在包含 Keyshot 剪辑的 div 是一个滑出菜单栏。您可以在此处查看它[http://pattonnz.businesscatalyst.com/unit#anchor-link-1](http://pattonnz.businesscatalyst.com/unit#anchor-link-1) 问题是在 Chrome 中，滑出菜单选项卡被包含 Keyshot 剪辑 div 的 div 覆盖，在所有其他浏览器的滑出选项卡位于堆栈的顶部；影响滑出选项卡的所有样式的 z-index 为 1000，影响 Keyshot 剪辑容器的所有样式的 z-index 为 1。

有人可以对此有所了解吗？我觉得好像我已经用尽了 mu 选项。KeyShotVR 脚本本身中是否有任何我可以调整以使其正常运行的内容？或者任何其他解决方案？

提前感谢格兰特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T14:51:35.000

删除`position:relative;`iframe 上的，你会很高兴的。由于您没有尝试在 iframe 内绝对定位元素，因此没有必要。看起来您正在使用边距控制 iframe 位置，这很好，但是如果您想使用绝对定位来定位 iframe，您可以让 overviewImg div `position:relative;`和内部 div 或 iframe`position:absolute;`定义顶部、左侧、底部或右侧位置.

顺便说一句，KeyShotVR 很好用！

# iphone - iPhone : 如何防止屏幕拉伸成 4 英寸显示屏

> ID：13676670
> 
> 赞同：3
> 
> 时间：2012-12-03T03:13:07.193
> 
> 标签：iphone, iphone-5

我只希望我的应用程序可以在 3.5 英寸区域内看到，即使它在 iPhone 4 英寸显示屏上。我取消选中 IB 文件中的所有视图的“自动布局”，但它仍然使用全屏。还有其他选择吗？如何防止我的应用使用 4 英寸全屏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T03:29:54.980

默认情况下，iPhone 应用程序在 iPhone 5（4 英寸显示屏）上以信箱方式运行，除非您添加`Default-568h@2x.png`启动图像。

如果您添加了一个`Default-568h@2x.png`图像（或者它已由 XCode 添加）并且您想返回到信箱模式，您需要

*   删除`Default-568h@2x.png`文件
*   运行干净的构建（`⌥</kbd>`⇧</kbd>`⌘</kbd> + `K`)```
*   从设备/模拟器中删除应用程序

现在构建并运行应用程序，它应该再次运行 letterboxed。

# c++ - 在 main() 中为通用模板类选择数据类型

> ID：13676674
> 
> 赞同：1
> 
> 时间：2012-12-03T03:14:08.860
> 
> 标签：c++, arrays, templates, generics, dynamic

所以我被要求写一个简单的向量模板，我相信我已经正确地写了这门课，看看我们教科书 (Savitch) 中的一些广义列表的例子。现在我试图`main()`通过让用户选择数据类型来调用类。声明标识符后，我遇到了问题`list1`。在使用 if 语句切换数据类型后，我希望能够使用相同的标识符。但是，我不认为我的 if 语句主体中的语法是正确的，因为`list1`已经声明了。在java中，我一直认为在声明一个类之后你可以随时调用它的构造函数，但我不知道如何在C++中做到这一点。

```
#include <iostream>
using namespace std;

template <class T>
class SimpleVector {
    public:
        SimpleVector();
        SimpleVector(int);
        SimpleVector(const SimpleVector & copy);
        ~SimpleVector();
        int size();
        T getElementAt(int n);
        T & operator[](int index);

    private:
        T * item;
        int length;
};

int main() {

    int dType;
    int dataSize;

    cout << "What type of data do you want to enter?\n(1 for integer, 2 for double and 3 for strings)" << endl;
    cin >> dType;
    cout << "How many data inputs? " << endl;
    cin >> dataSize;

    SimpleVector <int> list1; // if I dont declare then for loop doesn't recognize list as a declared variable.
    if (dType == 0) {
        SimpleVector <int> list1(dataSize);
    }
    else if (dType == 1) {
        SimpleVector <double> list1(dataSize);
    }
    else {
        SimpleVector <string> list1(dataSize);
    }

    cout << "Please enter the data:" << endl;
    for (int i = 0; i < dataSize; i++) {
        cin >> list1[i];
    }

    return 0;
}

template <class T> SimpleVector<T>::SimpleVector() {
    item = NULL;
    length = 0;
}
template <class T> SimpleVector<T>::SimpleVector(int s) {
    length = s;
    item = new T[length];

}

template <class T> SimpleVector<T>::SimpleVector(const SimpleVector & copy) {
    int newSize = copy - > size();
    item = new T[newSize];

    for (int i = 0; i < newSize; i++)
    item[i] = copy.item[i];
}

template <class T> SimpleVector<T>::~SimpleVector() {
    delete[] item;
}

template <class T> int SimpleVector<T>::size() {
    return length;
}

template <class T> T SimpleVector<T>::getElementAt(int n) {
    return *(item + n);
}

template <class T> T & SimpleVector<T>::operator[](int index) {
    return this->item[index];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:39:46.857

C++, like Java, is a statically typed and statically scoped language. This means that the type and lifetime of variables must be known at compilation time.

> In java I always thought after a class is declared you can call its construtor at any time, but I have no idea how to do that in C++.

This is not different from Java. In Java, what you're attempting would be equivalent to doing:

```
MyClass c;
if (cond) {
   MyClass c = new MyClass(1);
} else  {
   MyClass c = new MyClass(2);
} 
```

This has *nothing* to do with calling constructors. It has to do with the fact that you're *declaring* new variables in nested scopes, and they are completely independent of variables of the same name in outer scopes.

If you need runtime polymorphism, then (by definition), you actually need to use polymorphism. That is, you need to create a common base class with virtual functions:

```
class SimpleVectorBase
{
public:
    SimpleVectorBase() { }
    virtual ~SimpleVectorBase() { }

    virtual int size() const { return length; }

    // ... etc. ...

private:
    int length;
}

template <class T>
class SimpleVector : public SimpleVectorBase {
    // ...
}

int main() {
    // ...

    SimpleVectorBase* list1;
    if (dType == 0) {
        list1 = new SimpleVector<int>(dataSize);
    } else if (dType == 1) {
        list1 = new SimpleVector<double>(dataSize);
    } else {
        list1 = new SimpleVector<string>(dataSize);
    }

    // ...
} 
```

However, doing this won't really help you with your `for` loop. In your particular case, you probably would be better off templatizing the whole thing:

```
template<typename T>
void doWork(int dataSize)
{
    SimpleVector<T> list1(dataSize);
    std::cout << "Please enter the data:" << std::endl;
    for (int i = 0; i < dataSize; i++) {
        std::cin >> list1[i];
    }
    // ... Do other stuff with list1 ...
} 
```

and then your `main()` function would do:

```
if (dType == 0) {
    doWork<int>(dataSize);
} else if (dType == 1) {
    doWork<double>(dataSize);
} else {
    doWork<string>(dataSize);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:23:33.957

您不能切换数据类型。一旦声明为特定类型的变量不能更改为不同的类型。

变量有范围。

```
{
    int a;
    .....stuff.....
}
// a cannot be accessed here. 
```

`a`现在只能在 open`{`和 close之间使用`}`。

```
{
    int a; // First a
    .....stuff..... // a refers to the first a here
        {
            int a;
            .....stuff..... // a refers to the second a here
        }
    .....stuff..... // a refers to the first a here
} 
```

第二个`a`是与第一个不同的变量。它只能在它的范围内访问 - 即在离它最近的开括号和闭括号之间。

如果你真的想要一个动态类型，试试`Boost.variant`or `Boost.Any`。

# ruby-on-rails - 无法连接到 Heroku 上的数据库

> ID：13676675
> 
> 赞同：1
> 
> 时间：2012-12-03T03:14:19.067
> 
> 标签：ruby-on-rails, postgresql, heroku

我正在按照将 Rails 部署到 Heroku 的“入门”说明进行操作，但在尝试访问数据库时遇到了问题。

采取的步骤：

1）创建一个新项目

```
rails new pdfl_4 -d postgresql
rake db:create:all 
```

2）添加到git

```
git init
git add .
git commit -m "Initial commit"
git push 
```

3) 推送到 Heroku

```
heroku login
heroku create
git push heroku master 
```

4）尝试连接到数据库

```
heroku pg:psql 
```

一切正常，直到最后一步。错误消息读取“psql：无法连接到服务器：连接超时”

好像我在这里遗漏了一些基本的东西，但不确定它是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:18:07.213

如[heroku 文档中`heroku pg:psql`](https://devcenter.heroku.com/articles/heroku-postgresql#pgpsql)所述，

> 您必须在系统上安装 PostgreSQL 才能使用`heroku pg:psql`

按照[本地设置的说明在本地](https://devcenter.heroku.com/articles/heroku-postgresql#local-setup)启动和运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:45:37.670

我认为这可能是 Windows 问题。我的好友能够从他的 Mac 连接到我的数据库。

我使用 Taps 将本地数据库推送到 Heroku，效果很好 [https://github.com/heroku/heroku-taps](https://github.com/heroku/heroku-taps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T09:18:43.620

你跑了吗

```
 heroku run rake db:migrate 
```

或者

```
 heroku db:push  #this will push your ocal db to heroku 
```

?

# xpath - XPath 获取标签 X 中的所有信息，除了标签 Y 中的信息

> ID：13676678
> 
> 赞同：0
> 
> 时间：2012-12-03T03:14:29.240
> 
> 标签：xpath

在下面的代码中，如何使用 Xpath 获取 class='pageHeading' 中的所有信息，而不获取`<span>`标签中的任何数据？

我所追求的信息很简单：“闪亮的发饰”

这是我到目前为止所尝试的：

```
//*[@class='pageHeading' | //*[not(contains(@class, 'smallText'))]
//*[@class='pageHeading' and //*[not(contains(@class, 'smallText'))] 
```

这是我正在处理的代码：

```
<td class="pageHeading" valign="top">
    Shiny Hair Accessories
   <br>
   <span class="smallText">[10672]</span>
   <br>
    <span class="smallText">UPC no. : 817953901653672</span>
</td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:40:30.330

我想到了。text() 函数获得了属于具有类“pageHeading”的元素的第一层文本，同时忽略了跨度标签，就像我需要的那样。

```
//td[@class = 'pageHeading']/text() 
```

# javascript - 将浏览器重新调整到特定高度时更改固定位置

> ID：13676679
> 
> 赞同：0
> 
> 时间：2012-12-03T03:14:45.057
> 
> 标签：javascript, css, positioning

我目前将`fixed position`div 用于我的 div，将其设置为留在页面底部。但是，当我将浏览器的大小重新调整为该 div 越过我的左侧导航的最小高度时，我遇到了一个问题。

所以我想要做的是，每当用户将浏览器窗口的大小重新调整到略低于我`left navigation`固定位置的高度`removed`时`changed`，它不会`overlap my left navigation`移动，浏览器将生成滚动到页面底部的位置div 停留。

那么我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:19:32.000

### 最好使用一个类来`<body>`：

```
threshold = 500;
if( $(window).height() < threshold ){
   $('body').addClass('fixed');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:17:36.087

你可以得到浏览器的高度，`$(document).height()`而不是你可以检查

```
if($(document).height() > youwant){

   $('selector').css('bla','bla');
  //do you want

} 
```

用js

```
 if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE

    myHeight = window.innerHeight;
  } 
if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'

    myHeight = document.documentElement.clientHeight;
  } 
```

现在你可以检查

```
 if(myHeight >bla){
   //your code
   } 
```

# java - 无法编译最大公约数的代码？

> ID：13676680
> 
> 赞同：-1
> 
> 时间：2012-12-03T03:15:05.093
> 
> 标签：java, eclipse, greatest-common-divisor

我无法编译我的代码，特别是在我调用“gcd();”的主程序中 我应该把什么放在括号里？谢谢你。

```
import java.util.Scanner;

public class gcd {

    public static void main(String[] args) {
        gcd();
    }

    public static int gcd(int a, int b) {
        Scanner console = new Scanner(System.in);
        System.out.println("Please enter the number 1 & 2: ");
        a = console.nextInt();
        b = console.nextInt();
        if (b == 0) 
            return a;
        else return (gcd (b, a % b));
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T03:19:44.470

您的`gcd`方法需要两个整数参数，因此`gcd()`不会编译。我认为你应该在这里做的是将 IO 和计算分开 - 也许将 IO 移动到 main 方法：

```
public static void main(String[] args) {
    Scanner console = new Scanner(System.in);
    System.out.println("Please enter the number 1 & 2: ");
    int a = console.nextInt();
    int b = console.nextInt();
    System.out.println(gcd(a, b));  // notice the two int arguments
}

public static int gcd(int a, int b) {  // no IO, only gcd calculation
    if (b == 0) 
        return a;
    else return (gcd(b, a % b));
} 
```

将您的程序分成“逻辑”组件通常很好。在我上面的内容中，该`main`方法处理 IO 并`gcd`处理实际计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T03:20:32.570

括号允许您将数据传递给方法。在这种情况下，您将两个`int`s 传递给`gdc`(`a`和`b`)。

当你定义你的方法时，括号之间和之后的部分`public static int gcd`是你告诉你的方法应该传递什么变量给它的地方。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T03:21:17.230

因为 gcd 方法有两个它正在接收的整数值（a 和 b），所以您应该通过传递两个整数值来调用该方法。

例如：`gcd(3, 5);`

或者您可以传递两个 int 类型的变量。

# c# - 试图从 XMl 文件中检索数据，但由于文件正在使用而出现错误

> ID：13676681
> 
> 赞同：1
> 
> 时间：2012-12-03T03:15:07.307
> 
> 标签：c#, xml, dataset

我正在尝试从 Xml 中检索数据。我是编程新手，所以请原谅我。

```
 protected void Page_Load(object sender, EventArgs e)
  {

    string MyXmlFile= @"E:\\Programming stuff\\Work\\website\\XMLFile.xml";    
     DataSet ds= new DataSet();

    System.IO.FileStream MyReadXml= new System.IO.FileStream(MyXmlFile, System.IO.FileMode.Open);

    ds.ReadXml(MyReadXml);

    DataGrid DataGrid1 = new DataGrid();

    DataGrid1.DataSource = ds;
    DataGrid1.DataBind();
   } 
```

我在浏览器上遇到的错误是：

“该进程无法访问文件 'E:\Programming stuff\Work\website\XMLFile.xml'，因为它正被另一个进程使用。”

您能帮我确定正在访问该文件的其他进程吗？

编辑：更改代码后：

```
protected void Page_Load(object sender, EventArgs e)
{
  if(!IsPostBack) 
  {
    string MyXmlFile= Server.MapPath("~/XMLFile.xml");    

   using(System.IO.FileStream MyReadXml= new System.IO.FileStream(MyXmlFile,System.IO.FileMode.Open));
    {
 DataSet ds= new DataSet();
ds.ReadXml(MyReadXml);

DataGrid DataGrid1 = new DataGrid();

DataGrid1.DataSource = ds;
DataGrid1.DataBind();
PlaceHolder1.Controls.Add(DataGrid1);
    }
}
} 
```

错误：“当前上下文中不存在名称‘MyReadXml’”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:19:01.953

完成工作后总是关闭流

> > 将代码放在 using 块中可确保在控制离开该块时立即释放对象。

```
using(System.IO.FileStream MyReadXml= new System.IO.FileStream(MyXmlFile,System.IO.FileMode.Open));
{
    ds.ReadXml(MyReadXml);

    DataGrid DataGrid1 = new DataGrid();

    DataGrid1.DataSource = ds;
    DataGrid1.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:23:14.427

总是`close`和`dispose`流（尝试使用块）。重新启动您的应用服务器（werserver），看看会发生什么？

```
if(!IsPostBack)
{
 string MyXmlFile= @"E:\\Programming stuff\\Work\\website\\XMLFile.xml";    
 using(System.IO.FileStream MyReadXml=System.IO.File.OpenRead(MyXmlFile))
  {
    DataSet ds= new DataSet();
    ds.ReadXml(MyReadXml);
    //Add DataGrid control markup in .aspx.
    DataGrid1.DataSource = ds.Tables[0];
    DataGrid1.DataBind();
  }
 } 
```

注意：如果`XMLFile.xml`放在根目录下，`website`则使用`Server.MapPath()`方法从虚拟路径获取绝对文件路径。

```
string MyXmlFile= Server.MapPath("~/XMLFile.xml"); 
```

如果您想以编程方式添加 ASP.NET 服务器控件，则将`PlaceHolder`控件添加到 .aspx 文件中并调用该`PlaceControl1.Controls.Add(DataGrid1)`方法。

```
string MyXmlFile= @"E:\\Programming stuff\\Work\\website\\XMLFile.xml";    
     using(System.IO.FileStream MyReadXml=System.IO.File.OpenRead(MyXmlFile))
      {
        DataSet ds= new DataSet();
        ds.ReadXml(MyReadXml);
        DataGrid DataGrid1=new DataGrid();
        DataGrid1.DataSource = ds.Tables[0];
        DataGrid1.DataBind();
        PlaceHolder1.Controls.Add(DataGrid1);
      } 
```

编辑：

> 我仍然收到错误，因为“MyReadXml 不存在”我做错了什么吗？

您已经终止了 using 块。请删除分号。

```
using(System.IO.FileStream MyReadXml=new   
     System.IO.FileStream(MyXmlFile,System.IO.FileMode.Open))
    {
     ...
    } 
```

# ruby-on-rails - 间歇性 Carrierwave S3 403 签名与错误不匹配

> ID：13676689
> 
> 赞同：0
> 
> 时间：2012-12-03T03:17:57.120
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave, fog

从 Heroku 上的应用程序将文件上传到 s3 时，我遇到了看似随机的错误。我正在使用 jquery-file-upload 使用 CORS 方法和此代码将图片上传到我的存储桶中的 tmp/ 目录。

```
 def url
    temp_url = AWS::S3::S3Object.url_for(
      s3_key,
      S3_CONFIG['bucket'],
      use_ssl: true)
    puts temp_url
    temp_url
    # temp_url.to_s.encode_signs
  end

  def delete_photo_from_s3
    begin
      photo = AWS::S3::S3Object.find(s3_key, S3_CONFIG['bucket'])
      photo.delete
    rescue Exception => e
      Rails.logger.error e.message
    end
  end

  private

  def s3_key
    parent_url = self[:uri]
    # If the url is nil, there's no need to look in the bucket for it
    return nil if parent_url.nil?
    # This will give you the last part of the URL, the 'key' params you need
    # but it's URL encoded, so you'll need to decode it
    object_key = parent_url.split(/\//)
    "#{object_key[3]}/#{object_key[4]}/#{object_key[5]}"
  end 
```

从那里我使用carrierwave上传和处理这些图像。但是，有时上传会静默失败，并且我的 s3 存储桶中出现 403 Forbidden 错误。不确定是什么原因造成的。

从那里，我使用 Qu 处理后台作业，使用 remote__url 调用将图像附加到carrierwave。这是我的后台任务：

```
class PhotoUploader
  def self.perform(finding_id, photo_id)
    begin
      finding = Finding.find(finding_id)
      photo = Photo.find(photo_id)
      upload = finding.uploads.build
      # attached_picture = photo.temp_image_url || photo.url
      upload.remote_attachment_url = photo.url
      if upload.save!
        Rails.logger.debug "#{Time.now}: Photo #{photo_id} saved to finding..."
        photo.set(:delete_at => 1.hour.from_now)  # UTC, same as GMT (Not local time!)
        photos = Photo.where(:processing => true, :delete_at.lte => Time.now.utc)  # Query for UTC time, same type as previous line (also not local time!)
        finding.unset(:temp_image)
        if photos
          photos.each do |photo|
            photo.destroy
            Rails.logger.debug "Photo #{photo.id} - #{photo.uri} destroyed."
          end
        end
      else
        raise "Could not save to s3!"
      end
    rescue Exception => e
      Rails.logger.debug "#{Time.now}: PH01 - Error processing photo #{photo_id}, trying again... :: #{e.message}"
      retry
    end
  end
end 
```

这有时有效，但并非总是如此，这真的很奇怪。我最终在我的 s3 日志中得到了一堆这些错误：

> fc96aee492e463ff67c0a9835c23c81a09c4c36a53cdf297094ded3a7d02c62f actionlog-development [02/Dec/2012:20:27:18 +0000] 71.205.197.214 - 625CEFB5DB7867A7 REST.GET.OBJECT tmp/4f75d2fb4e484f2ffd000001/apcm_photomix1_0022.jpg "GET /actionlog-development/tmp/4f75d2fb4e484f2ffd000001/apcm_photomix1_0022.jpg ?AWSAccessKeyId=AKIAI_ ***_*** _ZA6A&Expires=1354480332&Signature=4wPc+nT84WEdOuxS6+Ry4iMNkys=HTTP/1.1" 403 SignatureDoesNotMatch 895 - 8 - "-" "Ruby" -

我已经阅读了很多关于这个的内容，似乎人们有时会在签名中有未转义的“+”时遇到这个问题。我不确定这是 Carrierwave、Fog 还是 AWS::S3 问题。

如果您能对此提供任何帮助，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-22T13:24:27.720

最好使用 v4 签名，这应该可以防止这种错误。只需将选项“signature_version: :v4”添加到 url_for 调用。

```
temp_url = AWS::S3::S3Object.url_for(
  s3_key,
  S3_CONFIG['bucket'],
  use_ssl: true,
  signature_version: :v4) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T21:34:20.810

这是**Fog**和**Excon**的问题。

请参阅[此答案](https://stackoverflow.com/a/28375102/737275)以了解如何修复它并切换到使用实际 aws-sdk 的更好解决方案。

* * *

库 --- 磁盘空间 --- 代码行 --- 引导时间 --- 运行时部门 --- 开发部门

雾 --- 28.0M --- 133469 --- 0.693 --- 9 --- 11

aws-sdk --- 5.4M --- 90290 --- 0.098 --- 3 --- 8*

# algorithm - AES。在powershell中加密字节数组

> ID：13676695
> 
> 赞同：-2
> 
> 时间：2012-12-03T03:19:27.273
> 
> 标签：algorithm, powershell, encryption, aes, encryption-symmetric

我需要使用 AES 加密方法在 powershell 脚本中加密字节数组（[byte[]]）。我找到了编码字符串的函数：

```
[Reflection.Assembly]::LoadWithPartialName("System.Security")

function Encrypt-String($String, $Passphrase, $salt="My Voice is my P455W0RD!",     $init="Yet another key", [switch]$arrayOutput)
{
   $r = new-Object System.Security.Cryptography.RijndaelManaged
   $pass = [Text.Encoding]::UTF8.GetBytes($Passphrase)
   $salt = [Text.Encoding]::UTF8.GetBytes($salt)

   $r.Key = (new-Object Security.Cryptography.PasswordDeriveBytes $pass, $salt, "SHA1", 5).GetBytes(32) #256/8
   $r.IV = (new-Object Security.Cryptography.SHA1Managed).ComputeHash( [Text.Encoding]::UTF8.GetBytes($init) )[0..15]

   $c = $r.CreateEncryptor()
   $ms = new-Object IO.MemoryStream
   $cs = new-Object Security.Cryptography.CryptoStream $ms,$c,"Write"
   $sw = new-Object IO.StreamWriter $cs
   $sw.Write($String)
   $sw.Close()
   $cs.Close()
   $ms.Close()
   $r.Clear()
   [byte[]]$result = $ms.ToArray()
   if($arrayOutput) {
  return $result
   } else {
      return [Convert]::ToBase64String($result)
   }
} 
```

[在http://gallery.technet.microsoft.com/scriptcenter/PowerShell-Script-410ef9df](http://gallery.technet.microsoft.com/scriptcenter/PowerShell-Script-410ef9df)阅读带有注释的代码

帮助更改函数，使其编码字节数组而不是字符串

Ssory 为我的英语。你好来自俄罗斯:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:13:18.717

我正在做我需要的。新代码：

```
[Reflection.Assembly]::LoadWithPartialName("System.Security")

 $String=$buff #ARRAY OF BYTES TO ENCODE
 $Passphrase="Pas"
  $salt="My Voice is my P455W0RD!"
  $init="Yet another key"

   $r = new-Object System.Security.Cryptography.AesManaged
   $pass = [Text.Encoding]::UTF8.GetBytes($Passphrase)
   $salt = [Text.Encoding]::UTF8.GetBytes($salt)

   $r.Key = (new-Object Security.Cryptography.PasswordDeriveBytes $pass, $salt, "SHA1", 5).GetBytes(32) #256/8
   $r.IV = (new-Object Security.Cryptography.SHA1Managed).ComputeHash( [Text.Encoding]::UTF8.GetBytes($init) )[0..15]
   $r.Padding="Zeros"

   $c = $r.CreateEncryptor()
   $ms = new-Object IO.MemoryStream
   $cs = new-Object Security.Cryptography.CryptoStream $ms,$c,"Write"
   $cs.Write($String, 0,$String.Length)
   $cs.Close()
   $ms.Close()
   $r.Clear()
   [byte[]]$Encrypted = $ms.ToArray() 
```

# matlab - 您如何在 Matlab 中使用 Log4j2

> ID：13676705
> 
> 赞同：2
> 
> 时间：2012-12-03T03:20:54.433
> 
> 标签：matlab, log4j, log4j2

我正在尝试在 Matlab 应用程序中从 log4j 1.2 切换到 log4j 2。

我已将 log4j-core-2.0-beta3.jar 和 log4j-api-2.0-beta3.jar 添加到我的 Matlab java 类路径中。

在我的 Matlab 类构造函数中，我：

```
import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

this.logger = LogManager.getLogger(myClassNameAsString); 
```

但是当我检查 Logger 对象时，我看到：

```
K>> this.logger

ans =

myClassNameAsString:ERROR in Default 
```

我没有定义配置文件，我希望 log4j 给我默认配置并登录到控制台（根据 log4j2 文档）

难道我做错了什么？

在 Matlab 中使用 log4j2 有问题吗？

编辑：我相信这与 Matlab 中 log4j 的内置用法有关，用于 Matlab 自己的内部日志记录。我设法解决了与 logback 类似的问题，因为 logback 抱怨 Matlab 使用 log4j。classpath.txt 文件可能可以用来解决这个问题，即从 classpath.txt 中删除 log4j 但这可能会破坏 Matlab 的内部日志记录。我通过切换到不同的日志记录工具来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:54:56.130

我的 Matlab (R2012a) 版本在后台使用 log4j，因此您的代码可能链接到旧版本的 log4j (R2012a\java\jarext\log4j.jar)。

查看位于 Matlab Root:\toolbox\local 目录下的 classpath.txt 文件。

# facebook - 移动 Safari Facebook 登录重定向问题 - Javascript SDK

> ID：13676712
> 
> 赞同：2
> 
> 时间：2012-12-03T03:21:35.213
> 
> 标签：facebook, facebook-graph-api, safari, facebook-javascript-sdk, mobile-safari

Javascript SDK 适用于我桌面上的每个浏览器，但我在 iPhone 上遇到了 Safari 的问题。

以下是发生的情况： - 我单击登录 - Facebook Oauth 在新窗口中打开，我成功登录 - Facebook Oauth 窗口关闭，旧窗口显示 - 没有刷新登录页面（如桌面浏览器那样），没有任何反应...

所以我成功登录了，但是旧页面出现了。用户认为他们没有登录。我见过类似的问题儿子堆栈溢出但没有答案。

有没有人看到这个或知道解决方案？

```
 <html xmlns:fb="http://ogp.me/ns/fb#">
  <body>
  <div id="fb-root"></div>
  <script>
    window.fbAsyncInit = function() {
      FB.init({
        appId      : <%= FACEBOOK_CONFIG['app_id'] %>, // App ID
        channelUrl : '//'+window.location.hostname+'/channel', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
      });
      // Additional initialization code here
      // whenever the user logs in, we refresh the page

      FB.Event.subscribe('auth.login', function() {
        setTimeout('document.location.reload()', 10);
      });

    };

    // Load the SDK Asynchronously
    (function(d){
       var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
       if (d.getElementById(id)) {return;}
       js = d.createElement('script'); js.id = id; js.async = true;
       js.src = "//connect.facebook.net/en_US/all.js";
       ref.parentNode.insertBefore(js, ref);
     }(document));
  </script> 
```

# windows - 命令提示符“Net View 系统错误 6118”

> ID：13676714
> 
> 赞同：10
> 
> 时间：2012-12-03T03:22:05.770
> 
> 标签：windows, command-line

当我尝试在命令提示符下使用“网络视图”时，我收到错误代码 6118。这是什么意思，我该如何解决？谢谢，尼克。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T03:28:00.643

6118 表示此工作组的服务器列表当前不可用，主要是由于防火墙保护阻止了 SMB。

您可以按照以下步骤检查

1.  首先检查每台电脑是否在同一个工作组中。
2.  禁用每台 PC 中的防火墙和病毒防护。
3.  从 PC1 ping PC2 以确保网络正常
4.  net view \PC2 从 PC1 检查它是否正常。

# c++ - 如何正确关闭我创建的 QProcess？

> ID：13676715
> 
> 赞同：1
> 
> 时间：2012-12-03T03:22:08.523
> 
> 标签：c++, qt

在我的 Qt C++ 程序中，我创建了如下进程：

```
myProcess = new QProcess();
myProcess->start(programpath, arguments); 
```

终止进程处理如下：

```
myProcess->terminate(); 
```

`QProcess::kill()`用, `terminate()`or终止子进程`close()`，但我不想使用它，因为它没有给子进程在退出前清理的机会。

有没有其他方法可以退出该过程？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:34:59.253

`terminate`实际上给了这个过程一个清理的机会。被终止的程序必须抓住这个机会，即系统发送一个[SIGTERM](http://en.wikipedia.org/wiki/SIGTERM#SIGTERM)和应用程序，它可以忽略它并自行干净地退出。如果这仍然不够好，那么您必须实现自己的方式来要求应用程序退出。杰里米·弗里斯纳（Jeremy Friesner）取得了一些不错的继任。如果应用程序代码不是您自己编写的，则您必须仔细阅读该程序的文档，也许它记录了如何做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:33:16.253

礼貌的方式是让父进程礼貌地要求子进程离开。然后当子进程退出时（根据自己的意愿），QProcess 对象将发出一个finished(int, QProcess::ExitStatus) 信号，并且您可以有一个连接到该信号的插槽以继续您的进程（例如，通过删除当时的 QProcess 对象）。（或者，如果您不介意暂时阻塞 Qt 事件循环，您可以在要求其退出后对 QProcess 对象调用 waitForFinished() ，并且 waitForFinished() 直到进程消失或超时时间已过）

当然，要使上述工作正常，您需要某种方式要求子进程退出。你如何去做这将取决于子进程正在运行什么。如果幸运的话，您可以控制子进程的代码，在这种情况下，您可以修改它以响应父进程的某些操作而退出——例如，您可以将子进程编码为在其 stdin 时退出描述符被关闭，并让父进程在 QProcess 对象上调用 closeWriteChannel() 以导致这种情况发生。或者，如果您在 Linux/Unix 下运行，您可以向子进程发送 SIGINT 信号，子进程可以设置一个处理程序来捕获信号并开始有序关闭。或者如果你想要一些非常愚蠢的东西——又快又脏，让子进程定期检查已知位置是否存在文件（例如“/tmp/hey-child-process-PIDNUMBERHERE-go-away.txt”或其他内容），父进程将创建这样的文件当它想让孩子离开时。并不是说我会推荐最后一种方法，因为我认为它不会非常健壮，除非作为概念证明。

# python - 子类构造函数返回一个超类对象

> ID：13676716
> 
> 赞同：4
> 
> 时间：2012-12-03T03:22:10.090
> 
> 标签：python, django

我专注`django.contrib.gis.geos.Point`于更好地创建和处理具有*明确*纬度和经度的点。

我当前的代码：

```
from django.contrib.gis.geos import Point

class LLPoint(Point):
    def __init__(self, *args, **kwargs):
        lat = kwargs.get('latitude')
        lng = kwargs.get('longitude')

        if lat and lng:
            super(LLPoint, self).__init__(lng, lat)
        elif lat or lng:
            raise TypeError(u'You must both declare latitude and longitude, '
                'not just one of them.')
        else:
            super(LLPoint, self).__init__(*args, **kwargs)

    def __unicode__(self):
        c = self.coordinates()
        return u'LLPoint Lat: %.5f Lng: %.5f' % (c['latitude'], c['longitude']) 

    def coordinates(self):
        return {
            'latitude': self.coords[1], 
            'longitude': self.coords[0]
        } 
```

问题是：

```
>>> LLPoint(latitude=10.0, longitude=20.0)
<Point object at 0xdeadbeef> 
```

为什么它返回一个`Point`对象？这样我就不能使用我在子类中声明的任何东西。如果我尝试用存根类重现问题，它会起作用。这可能很愚蠢，但我看不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T03:40:30.293

[`Point.__init__`](https://github.com/django/django/tree/master/django/contrib/gis/geos)来电

```
 super(Point, self).__init__(point, srid=srid) 
```

哪来[`GEOSGeometry.__init__`](https://github.com/django/django/blob/master/django/contrib/gis/geos/geometry.py#L47)的，哪来的

```
 self._post_init(srid) 
```

执行

```
 self.__class__ = GEOS_CLASSES[self.geom_typeid] 
```

这将类更改`self`为`Point`。邪恶的。

* * *

你可以试试：

```
class LLPoint(Point):
    def __init__(self, *args, **kwargs):
        ...
        super(LLPoint, self).__init__(lng, lat)   # this changes self.__class__ to Point
        ...
        self.__class__ = LLPoint 
```

# android - Google C2DM ACOUNT_MISSING

> ID：13676717
> 
> 赞同：0
> 
> 时间：2012-12-03T03:22:12.490
> 
> 标签：android, android-c2dm

我仍在使用 Google C2DM 而不是 GCM。目标设备是 CyanogenMod 9 (ICS) 和 C2DM 运行良好，无需在设备中创建任何 Google 帐户。

但是当我在 GB 2.3.3 上运行模拟器时出现错误“ACCOUT_MISSING”。我发现该消息的意思是“用户必须在设备中拥有 Google 帐户”。但它在我的 ICS 设备中没有任何 Google 帐户，但它一直运行良好。我对此很困惑。请任何人帮助我。

谢谢。

编辑：我再次阅读了 C2DM 文档并清楚地解释了错误。

ACCOUNT_MISSING 手机上没有 Google 帐户。应用程序应要求用户打开帐户管理器并添加 Google 帐户。固定在设备端。

但绝对我的测试设备没有任何谷歌帐户，但 C2DM 工作正常。已经快一年了。我无法理解这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:23:57.487

Android Cloud to Device Messaging (C2DM) 已弃用，您必须使用 Google Cloud Messaging。而且您必须在手机上创建一个 google 帐户。（对于 Android 4.0，您不需要创建一个 google 帐户）

# javascript - for循环中的多个函数

> ID：13676719
> 
> 赞同：0
> 
> 时间：2012-12-03T03:22:18.733
> 
> 标签：javascript, jquery

我可以在 for 循环中创建多个函数吗？

```
var mySound1 = new buzz.sound( "laser-01", { formats: [ "ogg", "mp3", "acc" ]});
var mySound2 = new buzz.sound( "alien-noise-01", {formats: [ "ogg", "mp3", "acc" ]});

var sound = [mySound1, mySound2]

// additional sounds
var $i;
for ( $i = 0; $i< sound.length; $i++){
    function playsound[$i](){   
           a[$i].play().fadeIn().loop();
        }
}

playsound1(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:28:31.703

您可以重用一个功能：

```
// declare your sound dictionary
var sounds = {
    'laser':       new buzz.sound( "laser-01", { formats: [ "ogg", "mp3", "acc" ]}),
    'alien-noise': new buzz.sound( "alien-noise-01", {formats: [ "ogg", "mp3", "acc" ]})
};

// this is the helper function
var playSoundFn = function() {
    this.play().fadeIn().loop();
};

// assign the helper function to all your sounds
for (var i=0, len=sounds.length; i<len; i++){
    sounds[i].playSound = playSoundFn;
}

// then play your sounds from any of them in your dictionary :
sounds['laser'].playSound();
sounds['alien-noise'].playSound(); 
```

****编辑**** (感谢[TheSmose](https://stackoverflow.com/users/1838763/thesmose) )

`sounds`如果数组中的每个项目都是使用`buzz.sound.prototype`原型创建的，那么您可以简单地向它添加一个自定义函数并简单地使用它：

```
// this is the helper function
buzz.sound.prototype.playSound = function() {
    this.play().fadeIn().loop();
};

// declare your sound dictionary
var sounds = {
    'laser':       new buzz.sound("laser-01", { formats: ["ogg", "mp3", "acc"]}),
    'alien-noise': new buzz.sound("alien-noise-01", {formats: ["ogg", "mp3", "acc"]})
};

// then play your sounds from any of them in your dictionary :
sounds['laser'].playSound();
sounds['alien-noise'].playSound(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:24:11.383

您最好将 $i 作为参数传递给 playsound 函数

```
var sounds = [
    new buzz.sound( "laser-01", { formats: [ "ogg", "mp3", "acc" ]}),
    new buzz.sound( "alien-noise-01", {formats: [ "ogg", "mp3", "acc" ]})
];

var playsound = function (i) {   
   sounds[i].play().fadeIn().loop();
}

playsound(1); 
```

如果你真的想要`playsound1()`样式函数名称，你可以评估它（尽管我建议不要添加这个）：

```
for (var i = 0; i < sounds.length; i++){
    eval('var playsound' + (i+1) + ' = function() { playsound(' + i + '); };');
}

playsound1();
playsound2(); 
```

# ruby-on-rails - ActiveRecord::Base.connection.execute Ruby On Rails 的数组

> ID：13676722
> 
> 赞同：1
> 
> 时间：2012-12-03T03:22:54.723
> 
> 标签：ruby-on-rails, arrays, postgresql, activerecord

我是 Rails 的新手，我需要执行一些 sql 查询并将其数组输出到视图。

在控制器上

```
@accounts = Account.all
 @itemlist = Account.find(:all,:select => 'subdomain')

 @schemasize = ActiveRecord::Base.connection.select_rows(%q{select pg_size_pretty(CAST((SELECT SUM(pg_total_relation_size(table_schema || '.' || table_name) ) FROM information_schema.tables WHERE table_schema = '}+@itemlist.map(&:subdomain).join(" ")+%q{') As bigint) )  As schema_size}).to_s.gsub(/\D/, '').to_f / 1024 
```

命令输出

```
 Account Load (36.0ms)  SELECT "public"."accounts".* FROM "public"."accounts"
  Account Load (2.0ms)  SELECT subdomain FROM "public"."accounts"
   (88.0ms)  select pg_size_pretty(CAST((SELECT SUM(pg_total_relation_size(table
_schema || '.' || table_name) ) FROM information_schema.tables WHERE table_schem
a = 'subdomain1 subdomain2') As bigint) ) As schema_size
  Rendered accounts/kapasitas.html.erb within layouts/admin (239.0ms)
Completed 200 OK in 2765ms (Views: 2208.1ms | ActiveRecord: 484.0ms) 
```

在 html.erb 上

```
 <tr>
    <td><%= account.subdomain %></td>
    <td><%= @schemasize %></td>
  </tr> 
```

视图输出：http: [//i.cubeupload.com/jVrShN.png](http://i.cubeupload.com/jVrShN.png)

不能每个子域的大小模式。

我想要输出，例如：http: [//i.cubeupload.com/PMPBYn.png](http://i.cubeupload.com/PMPBYn.png)

我怎样才能做到这一点？任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:05:32.693

首先，不要纠结`pg_size_pretty`，让显示代码担心格式化。

接下来，您需要了解它`select_rows`返回一个数组数组（返回的每一行都有一个内部数组）并且数组条目将是字符串。

您的查询返回单行，因此您可以使用它`first`来提取该行，另一个`first`用于从该行中提取单列。然后您可以使用`to_i`来获取助手会理解的数字：

```
@schemasize = ActiveRecord::Base.connection.select_rows(%q{select CAST(...)})
                                           .first
                                           .first
                                           .to_i 
```

并在显示时使用[`number_to_human_size`](https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human_size)：

```
<%= number_to_human_size(@schemasize) %> 
```

有关`number_to_human_size`.

如果您担心电话会溢出`Fixnum`，`to_i`请不要。`to_i`将根据需要切换到使用`Bignum`：

```
1.9.2p312 :011 > '1'.to_i.class
 => Fixnum 
1.9.2p312 :012 > '12345678910111213141516'.to_i.class
 => Bignum 
```

并且`number_to_human_size`对.`Bignum`和`Fixnum`.

如果您总是希望结果以 MB 为单位，请使用`to_f`（或`to_d`for `BigDecimal`）而不是`to_i`，手动缩放（就像您现在所做的那样），并使用[`String#%`](https://ruby-doc.org/core/String.html#method-i-25)它来格式化它：

```
<%= '%.4f' % @schemasize %> 
```

* * *

如果您想要每个架构的大小，那么您需要调整您的`table_schema = ...`to `table_schema in (...)`，然后添加一个`GROUP BY table_schema`. 像这样的东西：

```
select table_schema, sum(pg_total_relation_size(table_schema || '.' || table_name))
from information_schema.tables
where table_schema in ('subdomain1', 'subdomain2')
group by table_schema 
```

这将为您提供一个这样的数组数组`select_rows`：

```
[
  [ 'subdomain1', '3284762389' ],
  [ 'subdomain2', '129837' ]
] 
```

然后您可以使用以下命令将每一行解压缩：

```
@sizes = raw.map { |schema, size| [ schema, size.to_i ] }
# Or to_d as noted above 
```

`@sizes`然后你可以在你的 ERB中循环并格式化上面的大小。

# javascript - 如何使用 sencha touch 显示和隐藏分页工具栏？

> ID：13676726
> 
> 赞同：1
> 
> 时间：2012-12-03T03:23:53.213
> 
> 标签：javascript, sencha-touch

我有一个小要求，即 sencha touch 中的 PDFViewer，默认分页工具栏是隐藏的。一旦我们点击 pdf 文档，分页工具栏就会显示出来，剩下的时间它是隐藏的。我的问题是分页工具栏没有显示和隐藏。我尝试了以下代码。你能建议我吗？这是我的代码

```
samplePdf = {
 xtype : 'pdfpanel',
 id: 'pdfViewer', src :'http://cdn.mozilla.net/pdfjs/tracemonkey.pdf',
 scrollable: true,
 hidePagingtoolbar: false,
 listeners: {
      tap: {
          fn: function() {
                paging = Ext.getCmp('pdfViewer');
                if(samplePdf.hidePagingtoolbar==false){
                  hidePagingtoolbar:true
                 //Ext.getCmp('pdfViewer').hidePagingtoolbar.hide();
                }
                else{ 
                 hidePagingtoolbar: true;
                }
              },
     element: 'element'},}}; 
```

谢谢，拉贾塞卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:00:42.887

我建议使用“HidePagingtoolbar”对象的“getter/setter”，例如

```
listeners: {
  tap: {
      fn: function() {
            paging = Ext.getCmp('pdfViewer');
            paging.setHidePagingtoolbar(!paging.getHidePagingtoolbar());
          }
    }
} 
```

那应该切换 HidePaggingToolbar 标志。

# php - 附加 URL，这样它就不会给出 404

> ID：13676739
> 
> 赞同：-7
> 
> 时间：2012-12-03T03:25:59.743
> 
> 标签：php, javascript, html, url

我想在 URL 中附加一些内容，以使其保持有效。

例如：

原始网址是：[http ://www.menards.com/main/appliances/air-conditioners-dehumidifiers/soleus-12-000-btu-portable-air-conditioner-with-heat-pump/p-1754474-c -5571.htm](http://www.menards.com/main/appliances/air-conditioners-dehumidifiers/soleus-12-000-btu-portable-air-conditioner-with-heat-pump/p-1754474-c-5571.htm)

附录：[http ://www.menards.com/main/appliances/air-conditioners-dehumidifiers/soleus-12-000-btu-portable-air-conditioner-with-heat-pump/p-1754474-c- 5571.htm&sort=](http://www.menards.com/main/appliances/air-conditioners-dehumidifiers/soleus-12-000-btu-portable-air-conditioner-with-heat-pump/p-1754474-c-5571.htm&sort=)

我想在这个 URL 的任何地方添加一些东西，这样它就不会给出 404 Page Not Found。

“我想这样做是出于某种特定的原因”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:34:12.460

要将 vars 附加到 url 的末尾，第一个需要以问号 ( `?`) 开头，随后的变量添加一个 & 号 ( `&`)。

例如：

```
'http://my.site.com/index.html?variable1=hello&variable2=goodbye' 
```

这可以出于*“任何数量的特定原因”来完成*

# javascript - 谷歌地图V3地理编码多个标记（来自xml的地址）和信息窗口问题

> ID：13676741
> 
> 赞同：0
> 
> 时间：2012-12-03T03:26:40.640
> 
> 标签：javascript, google-maps-api-3

我试图搜索这么多，但找不到任何适合我的地图的解决方案！

我想建立一个网站，人们可以上传天气照片并将其显示在谷歌地图上。在我想使用地理编码之前一切都很好！事实上，标记处于良好位置，但信息窗口始终相同（最后一个标记信息窗口）。我从一个解析 SQL 数据库中的 XML 的 php 文件中获取地址（“名称”）。我知道很少有人遇到同样的问题，但即使有他们的解决方案，它也不适合。

这是代码：

```
 <!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<title>皆の天気ｂｙロマンスカイ</title>
<link rel="stylesheet" href="styletenki.css" />
  <!--[if lte IE 9]>
        <link rel="stylesheet" href="styleie.css" />
        <![endif]-->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">
var geocoder;

function load() {
  geocoder = new google.maps.Geocoder();
  var map = new google.maps.Map(document.getElementById("map"), {
    center: new google.maps.LatLng(47.6145, -122.3418),
    zoom: 4,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("googleapitest.php", function (data) {
    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
      var name = markers[i].getAttribute("name");
      var date = markers[i].getAttribute("date");
      //var point = new google.maps.LatLng(parseFloat(markers[i].getAttribute("lat")),
      //   parseFloat(markers[i].getAttribute("lgn")));
      var type = markers[i].getAttribute("type");
      var temperature = markers[i].getAttribute("temperature");
      var cloud = markers[i].getAttribute("cloud");
      var comment = markers[i].getAttribute("comment");

      var html = "<b>" + name + "</b> <br/>" + temperature + "</b> <br/>" + cloud + "</b> <br/>" + comment;

      //var icon = customIcons[type] || {};

      /* Appel au service de geocodage avec l'adresse en parametre */
      geocoder.geocode({
        'address': name
      }, function (results, status) {
        /* Si l'adresse a pu etre geolocalisee */
        if (status == google.maps.GeocoderStatus.OK) {

          /* Affichage du marker */
          var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location
          });

          bindInfoWindow(marker, map, infoWindow, html);
        }
      });
    }
  });
}

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function () {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest;

  request.onreadystatechange = function () {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

function doNothing() {}
  </script>

  </head>

  <body onLoad="load()">
    <div id="map" style="width: 800px; height: 600px"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T08:42:59.627

Your problem is that the `html` variable used in `bindInfoWindow(marker, map, infoWindow, html);` is changed during the for loop. When callback of `geocoder.geocode` is called, that's the last value of `html` that is used for all your markers. To work around this problem, you have to capture value of `html` with a closure. Something like :

```
(function(capturedHtml){
  geocoder.geocode({
    'address': name
  }, function (results, status) {
    /* Si l'adresse a pu etre geolocalisee */
    if (status == google.maps.GeocoderStatus.OK) {

      /* Affichage du marker */
      var marker = new google.maps.Marker({
        map: map,
        position: results[0].geometry.location
      });

      bindInfoWindow(marker, map, infoWindow, capturedHtml);
    }
  });
})(html); 
```

# jquery - 到目前为止，我是否使用 var 悬停时图像大小的一半

> ID：13676742
> 
> 赞同：0
> 
> 时间：2012-12-03T03:26:52.017
> 
> 标签：jquery

t 似乎让它工作？ --------------------添加代码------------

```
$(document).ready(function() {

    var offsetX = 20;
    var offsetY = 10;

$('[id^=TMBOBJ]').each(function() {
var $a = $(this).find('a');
$a.attr('href' , $a.attr('href').replace('html', 'jpg'));
$a.removeAttr('onclick');
$a.removeAttr('target');
$a.addClass("nextfancy");
$a.attr('rel', 'group')
});

$('a.nextfancy').hover(function(e) {
var href = $(this).attr('href');
$('<img id="largeImage" src="' + href + '" alt="big image" />')
.css('top', e.pageY + offsetY)
.css('left', e.pageX + offsetX)
.appendTo('body');
}, function() {
$('#largeImage').remove();
});

$('a.nextfancy').mousemove(function(e) {
$("#largeImage").css('top', e.pageY + offsetY).css('left', e.pageX + offsetX);
});

$("a.nextfancy").fancybox({
'transitionIn': 'elastic',
'transitionOut': 'elastic',
'overlayColor': '#000000',
'titlePosition': 'inside'
});
}); 
```

# php - 用户头像插件wordpress，如何显示图片

> ID：13676743
> 
> 赞同：0
> 
> 时间：2012-12-03T03:27:11.453
> 
> 标签：php, wordpress

我正在为 wordpress 使用[用户头像](http://wordpress.org/extend/plugins/user-avatar/)插件。现在我想为用户显示图像。我正在尝试使用此代码但未找到。

```
<?php 

$id = 2631;

echo get_avatar( $id, 32 ); 

?> 
```

任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:40:12.673

```
<?php 
$id = $user id;
echo get_avatar( $id); 
?> 
```

# python - 在 Alembic 迁移中使用 SQLAlchemy ORM：我该怎么做？

> ID：13676744
> 
> 赞同：20
> 
> 时间：2012-12-03T03:27:12.003
> 
> 标签：python, sqlalchemy, alembic

我目前有一列包含 HTML 标记。在该标记中，有一个我想存储在新列中的时间戳（以便我可以查询它）。我的想法是在一次迁移中执行以下操作：

1.  为数据创建一个可以为空的新列
2.  使用 ORM 拉回我需要解析的 HTML
3.  对于每一行
    1.  解析 HTML 以提取时间戳
    2.  更新 ORM 对象

但是当我尝试运行迁移时，它似乎陷入了无限循环。这是我到目前为止所得到的：

```
def _extract_publication_date(html):
    root = html5lib.parse(html, treebuilder='lxml', namespaceHTMLElements=False)
    publication_date_string = root.xpath("//a/@data-datetime")[0]
    return parse_date(publication_date)

def _update_tip(tip):
    tip.publication_date = _extract_publication_date(tip.rendered_html)
    tip.save()

def upgrade():
    op.add_column('tip', sa.Column('publication_date', sa.DateTime(timezone=True)))
    tips = Tip.query.all()
    map(tips, _update_tip)

def downgrade():
    op.drop_column('tip', 'publication_date') 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2016-03-18T14:36:11.277

在使用@velochy 的答案进行了一些实验后，我确定了类似以下在 Alembic 中使用 SqlAlchemy 的模式。这对我很有用，可能可以作为 OP 问题的一般解决方案：

```
from sqlalchemy.orm.session import Session
from alembic import op

# Copy the model definitions into the migration script if
# you want the migration script to be robust against later
# changes to the models. Also, if your migration includes
# deleting an existing column that you want to access as 
# part of the migration, then you'll want to leave that 
# column defined in the model copies here.
class Model1(Base): ...
class Model2(Base): ...

def upgrade():
    # Attach a sqlalchemy Session to the env connection
    session = Session(bind=op.get_bind())

    # Perform arbitrarily-complex ORM logic
    instance1 = Model1(foo='bar')
    instance2 = Model2(monkey='banana')

    # Add models to Session so they're tracked
    session.add(instance1)
    session.add(instance2)

    # Apply a transform to existing data
    m1s = session.query(Model1).all()
    for m1 in m1s:
        m1.foo = transform(m1.foo)
    session.commit()

def downgrade():
    # Attach a sqlalchemy Session to the env connection
    session = Session(bind=op.get_bind())

    # Perform ORM logic in downgrade (e.g. clear tables)
    session.query(Model2).delete()
    session.query(Model1).delete()

    # Revert transform of existing data
    m1s = session.query(Model1).all()
    for m1 in m1s:
        m1.foo = un_transform(m1.foo)
    session.commit() 
```

这种方法似乎可以正确处理事务。在处理这个问题时，我经常会生成数据库异常，它们会按预期回滚。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-12T12:43:37.967

对我有用的是通过执行以下操作来获得会话：

```
connection = op.get_bind()
Session = sa.orm.sessionmaker()
session = Session(bind=connection) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2022-02-04T11:12:50.640

您可以使用[automap 扩展](https://docs.sqlalchemy.org/en/14/orm/extensions/automap.html)在迁移期间自动创建数据库的 ORM 模型，而无需将它们复制到代码中：

```
import sqlalchemy as sa
from alembic import op
from sqlalchemy.ext.automap import automap_base

Base = automap_base()

def upgrade():
    # Add the new column
    op.add_column('tip', sa.Column('publication_date', sa.DateTime(timezone=True)))

    # Reflect ORM models from the database
    # Note that this needs to be done *after* all needed schema migrations.
    bind = op.get_bind()
    Base.prepare(autoload_with=bind)  # SQLAlchemy 1.4 and later
    # Base.prepare(bind, reflect=True)  # SQLAlchemy before version 1.4
    Tip = Base.classes.tip  # "tip" is the table name

    # Query/modify the data as it exists during the time of the migration
    session = Session(bind=bind)
    tips = session.query(Tip).all()
    for tip in tips:
        # arbitrary update logic
        ...

def downgrade():
    op.drop_column('tip', 'publication_date') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T14:04:06.477

从评论继续，你可以尝试这样的事情：

```
import sqlalchemy as sa

tip = sa.sql.table(
    'tip',
    sa.sql.column('id', sa.Integer),
    sa.sql.column('publication_date', sa.DateTime(timezone=True)),
)

def upgrade():
    mappings = [
        (x.id, _extract_publication_date(x.rendered_html))
        for x in Tip.query
    ]

    op.add_column('tip', sa.Column('publication_date', sa.DateTime(timezone=True)))

    exp = sa.sql.case(value=tip.c.id, whens=(
        (op.inline_literal(id), op.inline_literal(publication_date))
        for id, publication_date in mappings.iteritems()
    ))

    op.execute(tip.update().values({'publication_date': exp}))

def downgrade():
    op.drop_column('tip', 'publication_date') 
```

# c++ - 替换链表头的问题

> ID：13676746
> 
> 赞同：1
> 
> 时间：2012-12-03T03:27:55.837
> 
> 标签：c++, linked-list

编写一个函数来在链表上进行头部插入。它的一半工作是将对象插入头部并重新附加列表，但我以某种方式丢失了列表中的原始头节点。

如果列表是 [green, red, blue] 并且我尝试插入黄色，它会起作用，但新列表将是 [yellow, red, blue]。

节点类是：

```
template<class T>
class Node
{
public:
    Node(T theData, Node<T>* theLink) : data(theData), link(theLink){}
    Node<T>* getLink( ) const { return link; }

    const T& getData( ) const { return data; }

    void setData(const T& theData) { data = theData; }
    void setLink(Node<T>* pointer) { link = pointer; }

private:
    T data;
    Node<T> *link;
}; 
```

列表存储在队列中，因此头部插入是该类的方法。队列前后都有私有变量，它们指向列表的相应位置。

```
template<class T>
void Queue<T>::headInsert(T& theData)
{
   Node<T> *temp;
   temp = front->getLink();
   front->setLink(new Node<T>(theData, temp->getLink() ));
   front = front->getLink();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:31:26.190

您的问题在于您的`setLink`电话：

```
template<class T>
void Queue<T>::headInsert(T& theData)
{
   Node<T> *temp;
   temp = front->getLink();
   front->setLink(new Node<T>(theData, temp->getLink() )); // Right here
   front = front->getLink();
} 
```

你实际上有很多问题。首先，假设我们有以下测试列表：

`front = Red -> Green -> Blue -> NULL`

该调用`temp = front->getLink()`产生以下输出：

`temp = Green -> Blue -> NULL`.

`new Node<T>(theData, temp->getLink())`调用 where ，然后`theData = Yellow`产生：

`new Node<T>(theData, temp->getLink())`= `Yellow -> Blue -> NULL`。

然后打电话`front->setLink(new(...)`给你：

`front = Red -> Yellow -> Blue -> NULL`

最后，`front = front->getLink()`：

`front = Yellow -> Blue -> NULL`.

这不是你想要的。你只是想把`yellow`它放在列表的前面：

```
template<class T>
void Queue<T>::headInsert(T& theData)
{
   front = new Node<T>(theData, front);
} 
```

无需修改内部指针。只需将 front 指向包含您的数据的新节点，它的 next 指针指向旧数据。

# lisp - 在 r5rs 方案中实现长度（dracket）

> ID：13676751
> 
> 赞同：-1
> 
> 时间：2012-12-03T03:28:41.003
> 
> 标签：lisp, scheme, racket, r5rs

是否可以使用 car 和 cdr 系列函数来实现 R5RS 方案函数“长度”？如果是这样，有人可以发布实现吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:31:30.107

当然，这很简单。我没有给出直接的答案，因为这看起来像家庭作业，而且写起来很简单。填空：

```
(define (length lst)
  (if <???>              ; if the list is empty
      <???>              ; return 0
      (<???>             ; otherwise add 1 and
       (length <???>)))) ; advance the recursion over the rest of the list 
```

请注意，只`cdr`使用了。我们对列表的实际内容不感兴趣，因此可以忽略`car`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:13:25.823

Óscar López 的回答是正确的。这里还有两个实现（同样是填空）。

第一个是左折叠解决方案（与 Óscar 的解决方案相反，后者是右折叠解决方案）：

```
(define (length lst)
  (let loop ((lst lst)
             (count 0))
    (if <???>                   ; if the list is empty
        <???>                   ; return the count
        (loop <???> <???>))))   ; otherwise bump the count and continue down the list 
```

这具有尾递归的优点，而右折叠版本不是。

第二种是龟兔赛跑解决方案，它允许检测循环列表（如果给定循环列表，早期的解决方案将永远运行）：

```
(define (length lst)
  (if (null? lst)
      0
      (let loop ((tortoise lst)
                 (hare (cdr lst))
                 (count 1))
        (cond ((eq? tortoise hare) #f)                   ; found a cycle
              ((null? hare) <???>)                       ; reached end of list
              ((null? (cdr hare)) <???>)                 ; reached end of list too
              (else (loop <???> <???> (+ count 2)))))))  ; bump the count and keep looking 
```

# php - 如何通过正则表达式从另一个字符串中获取一个字符串？

> ID：13676753
> 
> 赞同：0
> 
> 时间：2012-12-03T03:28:54.943
> 
> 标签：php, curl

我想`js`通过 PHP CURL 获取文件，然后使用正则表达式获取 的值`var pluses`，所以输出应该是`/\+/g`. 有人可以建议我的代码有什么问题吗？

谢谢

这是我尝试过的，但没有运气：

```
$url = 'http://cdn.jsdelivr.net/jquery.cookie/1.3/jquery.cookie.js';

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$output = curl_exec($ch);
curl_close($ch);

preg_match('/^var\spluses\s=\s/', $output, $match);
print_r($match); 
```

实况代码： http: [//phpfiddle.org/main/code/x4w-cn5](http://phpfiddle.org/main/code/x4w-cn5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:32:46.113

要获得匹配，您需要选择它。尝试

```
preg_match('/var\spluses\s=\s(.*);/', $output, $match); 
```

分配给加号的值应该在`$match[1]`.

正则表达式的`^`开头是行分隔符的开头，它将选择限制为以字符开头的行`var`，而不考虑缩进。

```
preg_match('/^\s*var\spluses\s=\s(.*);/', $output, $match); 
```

此正则表达式将限制为关键字前带有任何 ( `*`) 空格的行。`var`

# cuda - 相对较小的阵列大小的 GPU 精度问题？

> ID：13676754
> 
> 赞同：0
> 
> 时间：2012-12-03T03:29:05.840
> 
> 标签：cuda, precision

我有一些 CUDA 代码可以执行一些线性代数来反转一种特殊类型的结构化矩阵。我使用算法的序列化版本的结果来计算 RMS 误差。错误随着问题的大小而增长，其程度超出了我的预期。任何人都可以提供有关为什么会这样的见解吗？

GPU 代码**非常**幼稚。这是故意的，我很快就会优化它——我只想要一个简单的基线内核，它可以给出正确的结果。

```
 __global__ void levinson_durbin_gpu(TYPE *h0_d, TYPE *h_d, TYPE *v_d, TYPE *x_d, TYPE *y_d, int N) //Naive kernel
{
    int j = threadIdx.x;
    int i;

    __shared__ TYPE hn_1[512]; 
    hn_1[j] = h_d[j];

    for(i=1; i<N; i++)
    {
        if(j < i)
        {
            TYPE hn = h_d[i];
            TYPE yn = y_d[i];

            __syncthreads();

            //Set up temporary arrays, compute inner products
            __shared__ TYPE temp[512]; //Temp for hn_1_J_v
            __shared__ TYPE temp2[512]; //Temp for hn_1_J_x
            __shared__ TYPE temp3[512]; //Temp for hn_1_v

            temp[j] = hn_1[j]*v_d[i-j-1];
            temp2[j] = hn_1[j]*x_d[i-j-1];
            temp3[j] = hn_1[j]*v_d[j];
            __syncthreads();

            //Three reductions at once
            for(unsigned int s=1; s<i; s*=2)
            {
                int index = 2*s*j;
                if((index+s) < i)
                {
                    temp[index] += temp[index+s];
                    temp2[index] += temp2[index+s];
                    temp3[index] += temp3[index+s];
                }
                __syncthreads();
            }

            TYPE hn_1_J_v = temp[0];
            TYPE hn_1_J_x = temp2[0];
            TYPE hn_1_v = temp3[0];

            TYPE alpha_v = (hn - hn_1_J_v)/(h0_d[0] - hn_1_v);
            TYPE alpha_x = (yn - hn_1_J_x)/(h0_d[0] - hn_1_v);

            __shared__ TYPE w_v[512];
            w_v[j] = v_d[j] - alpha_v*v_d[i-j-1];

            __shared__ TYPE w_x[512];
            w_x[j] = x_d[j] - alpha_x*v_d[i-j-1];

            v_d[j] = w_v[j];
            x_d[j] = w_x[j];
            if(j == 0)
            {
                v_d[i] = alpha_v;
                x_d[i] = alpha_x;
            }

        }

        __syncthreads();
    }

} 
```

标识符`TYPE`是浮点数或双精度数，具体取决于我编译代码的方式。我正在使用 1 个带有 N 个线程的块（再次，在这里保持天真和简单）。使用单精度，我看到以下结果：

N=4：RMS 误差 = 0.0000000027
N=8：RMS 误差 = 0.0000001127
N=16：RMS 误差 = 0.0000008832
N=32：RMS 误差 = 0.0000009233
N=64：RMS 误差 = 42.0136776452
N=80：RMS 误差 = 281438717。

我不知道这是我的算法错误还是某种精度问题。如果有帮助，我可以使用双精度、算法的 CPU 版本或计算 RMS 误差的代码来显示上述结果。我正在使用 GeForce GTX 660 Ti (cc 3.0) GPU。变量`x_d`包含最终结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:39:48.913

感谢评论部分的帮助，我自己解决了这个问题，所以我会在这里记录下来，以防其他人遇到类似的问题。

问题确实是同步问题——我`__syncthreads()`在不同的控制流块中使用。解决方案是将控制流块分成多个部分并`__syncthreads()`在每个部分之后调用：

```
__global__ void levinson_durbin_gpu(TYPE *h0_d, TYPE *h_d, TYPE *v_d, TYPE *x_d, TYPE *y_d, int N) //Naive kernel
{
    int j = threadIdx.x;
    int i;

    __shared__ TYPE hn_1[512];
    hn_1[j] = h_d[j];
    __syncthreads();

    //Set up temporary arrays
    __shared__ TYPE temp[512]; //Temp for hn_1_J_v
    __shared__ TYPE temp2[512]; //Temp for hn_1_J_x
    __shared__ TYPE temp3[512]; //Temp for hn_1_v

    TYPE hn;
    TYPE yn;

    for(i=1; i<N; i++)
    {
        if(j < i)
        {
            hn = h_d[i];
            yn = y_d[i];

            //Compute inner products
            temp[j] = hn_1[j]*v_d[i-j-1];
            temp2[j] = hn_1[j]*x_d[i-j-1];
            temp3[j] = hn_1[j]*v_d[j];
        }

        __syncthreads();

        //Have all threads complete this section to avoid synchronization issues

        //Three reductions at once
        for(unsigned int s=1; s<i; s*=2)
        {
            int index = 2*s*j;
            if((index+s) < i)
            {
                temp[index] += temp[index+s];
                temp2[index] += temp2[index+s];
                temp3[index] += temp3[index+s];
            }
            __syncthreads();
        }

        if(j < i)
        {
            TYPE hn_1_J_v = temp[0];
            TYPE hn_1_J_x = temp2[0];
            TYPE hn_1_v = temp3[0];

            TYPE alpha_v = (hn - hn_1_J_v)/(h0_d[0] - hn_1_v);
            TYPE alpha_x = (yn - hn_1_J_x)/(h0_d[0] - hn_1_v);

            __shared__ TYPE w_v[512];
            w_v[j] = v_d[j] - alpha_v*v_d[i-j-1];

            __shared__ TYPE w_x[512];
            w_x[j] = x_d[j] - alpha_x*v_d[i-j-1];

            v_d[j] = w_v[j];
            x_d[j] = w_x[j];
            if(j == 0)
            {
                v_d[i] = alpha_v;
                x_d[i] = alpha_x;
            }
        }

    __syncthreads();
}

} 
```

N=32：RMS 误差 = 0.0000009233
N=64：RMS 误差 = 0.0000027644
N=128：RMS 误差 = 0.0000058276
N=256：RMS 误差 = 0.0000117755
N=512：RMS 误差 = 0.0000237040

我学到了什么：在 CUDA 中使用同步机制时，请确保所有线程都达到相同的障碍点！我觉得这种事情应该会产生编译器警告。

# php - Wordpress 在一个页面上使 PHP 无效，而不是在其他页面上？

> ID：13676758
> 
> 赞同：0
> 
> 时间：2012-12-03T03:29:49.943
> 
> 标签：php, wordpress

我正在使用此脚本在其中一个子页面中调用指向父页面的链接：

```
<?php
$this_page = get_post($id);
$parent_id = $this_page->post_parent;
if ($parent_id) {
$parent = get_page($parent_id);
echo '<a href="'.get_permalink($parent->ID).'" title="">Return to '.get_the_title($parent->ID).'</a>';}
?> 
```

这个示例在这里工作得很好： [http ://www.energytoolsint.com/clean-sweep/parent-test-call/](http://www.energytoolsint.com/clean-sweep/parent-test-call/)

但不会在这里解析？ [http://www.energytoolsint.com/healthcare-practitioners/](http://www.energytoolsint.com/healthcare-practitioners/)

相同的页面模板，一个呈现，另一个不呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:32:00.230

从 URL 来看，这是因为 energytoolsint.com/healthcare-practitioners 是一个父页面。当然，您可以更改永久链接，但 URL 表明它没有父链接，因此为 null 值。

转到仪表板中的页面。查看发布日期下方的最右侧。

# java - Android，如何在状态更改时更改操作栏徽标按钮？

> ID：13676760
> 
> 赞同：0
> 
> 时间：2012-12-03T03:30:27.673
> 
> 标签：java, android, android-actionbar

所以我想知道如何实现一个带有徽标按钮的操作栏，每个状态都有不同的图像。（按下，释放等）。

我知道如何为普通按钮执行此操作，但我不确定操作栏徽标按钮是否可行？

如果不是，如何实现支持此功能的操作栏？外部库？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:17:05.097

创建一个可绘制的 xml 文件，`res/drawable`例如`res/drawable/button_selector.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/button_pressed"
      android:state_pressed="true" />
    <item android:drawable="@drawable/button_normal" />
</selector> 
```

where`button_pressed`和`button_normal`只是您的可绘制目录之一中的常规 png 文件（例如/ `drawables-hdpi`）

然后在你的 menu.xml 或你的代码中你可以参考 `@drawable/button_selector`or `R.drawable.button_selector`并且当按钮被按下时图像会自动改变。

如果您需要更改 ActionBar 按钮背景，则需要覆盖`res/values/style.xml`.

```
<style name="YourTheme.Sherlock" parent="@style/Theme.Sherlock">
    <item name="actionBarItemBackground">@drawable/actionbar_item_background_selector</item>
    <item name="android:actionBarItemBackground">@drawable/actionbar_item_background_selector</item>
</style> 
```

两条线都很重要：一条用于 SherlockActionBar，一条用于标准 ActionBar

然后将主题设置为清单中的活动：

```
 <activity
        android:name=".yourActivity"
        android:theme="@style/YourTheme.Sherlock" >
    </activity> 
```

这里`actionbar_item_background_selector.xml`将被放置在`res/drawable`

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<!-- Even though these two point to the same resource, have two states so the drawable     will invalidate itself when coming out of pressed state. -->
    <item android:state_focused="true"  android:state_enabled="false" android:state_pressed="true" android:drawable="@drawable/scene_overlay_bar_pressed_center"     />
    <item android:state_focused="true"  android:state_enabled="false"                                  android:drawable="@drawable/abs__list_selector_disabled_holo_light" />
    <item android:state_focused="true"                                android:state_pressed="true" android:drawable="@drawable/scene_overlay_bar_pressed_center" />
    <item android:state_focused="false"                               android:state_pressed="true" android:drawable="@drawable/scene_overlay_bar_pressed_center" />
    <item android:state_focused="true"                                                             android:drawable="@drawable/abs__list_focused_holo" />
    <item                                                                                          android:drawable="@android:color/transparent" />

</selector> 
```

用您选择的可绘制对象替换背景`android:state_pressed="true"`

仅仅为了一个背景要做很多事情，但这就是`ActionBar`工作原理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T03:32:49.617

您可以使用选择器来选择不同的图像。 [具有禁用 UI 感觉的 Android ImageButton](https://stackoverflow.com/questions/7228985/android-disable-image-button-ui-feel) 可能会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:40:10.183

我想你正在寻找这个：

```
final ActionBar bar = getActionBar();
bar.setDisplayHomeAsUpEnabled(true); 
```

这会自动使您设置的徽标在单击时看起来像被按下。不需要有不同的图像来显示状态变化。这是一个很简单的方法。虽然如果您使用的是 ActionBarSherlock，我认为这是行不通的。我相信严格 4.0。查看[ActionBar](http://developer.android.com/reference/android/app/ActionBar.html#setHomeButtonEnabled%28boolean%29)上的文档。

# cordova - 摘要 Auth + PhoneGap

> ID：13676761
> 
> 赞同：3
> 
> 时间：2012-12-03T03:30:39.747
> 
> 标签：cordova, jquery-mobile, login, digest-authentication

我在理解使用 JQuery Mobile 登录表单和 PhoneGap 的身份验证时遇到了一些麻烦。我需要使用 localStorage 存储凭据，然后使用 Digest Auth 发布它们。我有 JQuery Mobile 登录表单，但从那里迷路了。我会很感激我能得到的任何帮助！谢谢

# asp.net-mvc-3 - kendo ui网格单元格显示区域随着更多数据的添加而缩小

> ID：13676763
> 
> 赞同：0
> 
> 时间：2012-12-03T03:30:59.600
> 
> 标签：asp.net-mvc-3, datagrid, kendo-ui

如何防止告诉网格最大化记录显示区域并保持页面控件区域固定？这就是我在将数据添加到网格时遇到的情况。记录显示区域缩小，页面导航控件区域随着页面的增加不断增加，占用剩余空间，而页面导航控件是垂直对齐而不是水平对齐。

这在升级到 Kendo UI Web 版本 2012.3.1114 后开始发生。![在此处输入图像描述](../Images/77dd2c1a5b3151e939997d6f842a1148.png)

**编辑更多信息：**

我正在初始化网格如下：

```
 $("#kendoGrid").kendoGrid({         
        height: "200px",  div is constant height
        dataSource: this._dataSource,
        autowidth: true,
        columns: columnModels,
        sortable: true,                             
        pageable: {
            refresh: true,
            pageSizes: true
        },              
        width: '100%'

    }); 
```

网格是 ASP.NET MVC 页面的一部分，定义如下：

```
using (Html.BeginForm())
{
    <fieldset>

        <div id="centerstage"  >
            <div id="left" >
                <div id="accordion">                                       
                </div>              
            </div>  
            <div id="main-content-div" style="overflow: hidden">
                <div id="center" class="column" />                   
                <div id="console" class="console" >
                    <table  id="kendoGrid" >
                    </table>
                    <div id="pager"></div> 
                </div>
            </div>
            <div id="right" >
                <div id="dashboardDiv"  >
                    <p>dash board</p>    
                </div>
            </div>
        </div>
    </fieldset> 
```

并使用剑道拆分器进行初始化。

```
 $("#centerstage").kendoSplitter({
        orientation: "horizontal",
        panes: [
                        { collapsible: true, resizable: true, size: "21%" },
                        { collapsible: false, resizable: true, size: "60%" },
                        { collapsible: true, resizable: true, size: "19%" }
                    ]
    });

    $("#main-content-div").kendoSplitter({
        orientation: "vertical",
        panes: [
                        { collapsible: false, size: "500px" },
                        { collapsible: true, resizable: true, size: "220px" }
                    ]
    }); 
```

# c# - 会话不持久？

> ID：13676764
> 
> 赞同：3
> 
> 时间：2012-12-03T03:31:14.983
> 
> 标签：c#, session, user-controls

我无计可施。我的代码没有跟踪 C# 中的会话

我正在使用应该获取会话数据的用户控件，但它没有。

这是用户控件：

```
[Serializable]
public partial class studentComments : System.Web.UI.UserControl
{

    protected void Page_Load(object sender, EventArgs e)
    {
        string currStud;
        if (Session["CS"] == null)
        {
            currStud = "50";
        }
        else
        {
            currStud = (string)Session["CS"];
        }

        lblHeader.Text = "Comments for Student " + currStud;

        //display(currStud);
    }
} 
```

这是初始 aspx.cs 页面中的代码

```
try
{
    student temp = studList.Find(o => o.student_id == studID);

    Session["CS"] = "45";
    PnlComment.Visible = true;
}
catch (NullReferenceException nre)
{
    lblTest.Text = "Student does not exist!";
} 
```

显然用户控件在 PnlComment 控件中。

*编辑* 我实际上将一个对象传递给会话，但我将其更改为静态字符串以进行测试，希望这会简化事情。唉，标签一直显示 50。为什么不显示 45？

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:39:16.150

It isn't a very widely held opinion but I've always found ASP's session management rules to be a bit counter intuitive so I tend to avoid using them at all. In addition I just don't like using strings as identifiers throughout my program as it can lead to collisions and other sorts of run time bugs.

Stick with using cookies to save your own session identifier that lives in the database and have it serialize/deserialize to an object with properties and fields. It's much more resilient to refactoring and if something goes wrong it's a lot easier to debug.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:50:51.060

您的 default.aspx.cs page_load 事件在用户控件 page_load 事件之后触发，因此虽然页面加载后会话值可能为“45”，但标题文本值将显示旧值“50”，因为它已设置在那之前。

# android - TextView.setText 导致强制关闭内部捕获（但不是其他）

> ID：13676772
> 
> 赞同：0
> 
> 时间：2012-12-03T03:32:01.053
> 
> 标签：android, android-widget

我正在尝试编写一个简单的应用程序来尝试加载和播放声音文件。我有两种声音，我想得到它们的列表，然后播放任何被点击的声音。以下代码有效：

```
public class SoundPoolTest extends ListActivity {
    String sounds[] = { "shot", "explode" };
    SoundPool soundPool;
    int[] soundId = new int[sounds.length];
    {
        for (int i = 0; i < soundId.length; i++) {
            soundId[i] = -1;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setVolumeControlStream(AudioManager.STREAM_MUSIC);
        soundPool = new SoundPool(20, AudioManager.STREAM_MUSIC, 0);

        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, sounds));
        for (int i = 0; i < sounds.length; i++) {

            try {
                AssetManager assetManager = getAssets();
                AssetFileDescriptor descriptor = assetManager.openFd("sound/"
                        + sounds[i] + ".wav");
                soundId[i] = soundPool.load(descriptor, 1);
            } catch (IOException e) {
                TextView textView = (TextView) super.getListView()
                        .getChildAt(i);
                textView.setText("Could not load file!");
            }
        }
    }

    protected void onListItemClick(ListView list, View view, int position,
            long id) {
        super.onListItemClick(list, view, position, id);
        if (soundId[position] != -1) {
            soundPool.play(soundId[position], 1, 1, 0, 0, 1);
        }
    }
} 
```

但是，如果我弄乱了 的参数，`assetManager.openFd`以至于找不到文件来测试异常处理程序，则应用程序强制在呈现列表之前关闭（LogCat 输出`thread exiting with uncaught exception`）。问题是`textView.setText("Could not load file!");`线路；如果我将其注释掉，则没有问题。更令人费解的是，如果我`catch`留空，将同一段代码放入`onListItemClick`方法中，就变成了这样

```
protected void onListItemClick(ListView list, View view, int position,
            long id) {
        super.onListItemClick(list, view, position, id);
        TextView textView = (TextView) super.getListView().getChildAt(position);
        textView.setText("Clicked!");
        if (soundId[position] != -1) {
            soundPool.play(soundId[position], 1, 1, 0, 0, 1);
        }
    } 
```

它运行良好，按预期单击时会更改文本。我无法理解这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:13:11.673

在您的 for() 循环中进行此更改，然后尝试。

```
for (int i = 0; i < sounds.length; i++) {

        try {
            AssetManager assetManager = getAssets();
            AssetFileDescriptor descriptor = assetManager.openFd("sound/"
                    + sounds[i] + ".wav");
            TextView textView = (TextView) super.getListView()
                    .getChildAt(i);
            soundId[i] = soundPool.load(descriptor, 1);
        } catch (IOException e) {
            textView.setText("Could not load file!");
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:32:22.060

问题可能是 不维护创建的所有子视图`super.getListView().getChildAt(i);` 。`ListView`它只保留对屏幕上视图的引用。屏幕外的视图被回收并重新用于其他内容。如果基础数据很大，这避免了必须管理数百个视图。

`getView()`尝试从适配器中的方法加载声音。一般来说，避免试图`ListView`从外面抓住物品`getView()`。

# jquery - 使用 jquery 悬停菜单时在 ouside div 中移动图像

> ID：13676774
> 
> 赞同：-1
> 
> 时间：2012-12-03T03:32:11.177
> 
> 标签：jquery, html, menu

好吧，我在一个菜单中有 5 个元素，下面有一条带有移动图像的小线，这取决于您悬停的元素。默认是在当前网站下，所以它可以从 5 个元素中的任何一个开始。

因此，如果您将某些内容悬停，它会移动到该位置，如果您停止悬停菜单，它会返回当前位置。但是，如果您将其他元素悬停在当前元素之前，它会直接到达该点。

所有菜单都有相同的 id 开头部分，例如 #fxmenu_1。从 1 到 5，我认为只取 id 的数量并避免写 5 个 jquery 会更快。

我尝试了一点，但我的 jquery 有问题。

```
$(document).ready(function(){
var id;
    $('#fxmenu_'+id+':not(.totalactive)').hover(function (){
        $('#img').animate({"marginTop": "-70px"},1000, function(){
            $('#img').animate({"marginLeft":+(180*id)+"px"},1000, function(){
                $('#img').animate({"marginTop": "-90px"},1000);
                });
        });
    });
}); 
```

在这里你可以看到我的例子：http: [//jsfiddle.net/rzJMv/1/](http://jsfiddle.net/rzJMv/1/)

这是另一个尝试

```
$(document).ready(function(){
var id,
    hovermenu = $('#fxmenu_'+id);
    $(hovermenu).hover(function (){
        $('#img').animate({marginTop: "-70px"},1000, function(){
            $('#img').animate({marginLeft:+(180*id)+"px"},1000, function(){
                $('#img').animate({marginTop: "-90px"},1000);
            });
        });
    }, function() {
        $('#img').removeAttr('style');

    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:08:03.547

我可以建议使用这个 javascript 插件吗？
[http://www.scriptiny.com/2008/05/sliding-javascript-menu-highlight-1kb/](http://www.scriptiny.com/2008/05/sliding-javascript-menu-highlight-1kb/)

它具有您尝试重新创建的功能。为什么要尝试重新创建轮子？

**编辑 1**

无论如何，如果你确实想用你的代码来做这件事，这里是一个返工。

**HTML**

```
<div id="pmenu">
    <ul id="bmenul">
        <li><a class="brand" id="fxmenu1_" href="/">LOGO</a> </li>
        <li class="active"><a id="fxmenu_2"  href="/team" title="team">The team</a> </li>
        <li><a id="fxmenu_3" href="/services" title="Servicios">Services</a> </li>
        <li><a id="fxmenu_4" href="/projects" title="Proyectos">Projects</a> </li>
        <li><a id="fxmenu_5" href="/contact" title="Contacto">Contact</a> </li>
    </ul>
    <div id="bar">
        <div id="img"></div>
    </div>
</div> 
```

**Javascript**

```
$(document).ready(function() {
    var activeIndex = $('#bmenul > li.active').index();

    $('#img').css({
        'marginLeft': (180 * activeIndex) + 'px'
    }).show();

    $('#bmenul > li').not('.active').hover(function() {
        var index = $(this).index();
        $('#img').stop().animate({
            'marginLeft': (180 * index) + 'px'
        }, 400);
    }, function() {
        $('#img').stop().animate({
            'marginLeft': (180 * activeIndex) + 'px'
        }, 400);
    });
});​ 
```

**CSS**

```
...
#img {
    max-height: 180px;
    width: 180px;
    border-bottom: 2px solid #000000;
    display: none;
} 
```

**[演示](http://jsfiddle.net/rzJMv/7/)**

# c#-4.0 - 将字符串数据转换为 List<> 的类型

> ID：13676775
> 
> 赞同：0
> 
> 时间：2012-12-03T03:32:29.790
> 
> 标签：c#-4.0

我想取一个字符串并根据字符串中记录的“类型”创建一个类型化的列表。例如，假设 str 是“System.string”。我想要为我创建列表的方法。当然，字符串可以包含“引用”程序集中任何对象的文本。我没有成功尝试以下方法：

```
 Type classType = Type.GetType(str);
    List<classType> wgList = new List<classType>(); 
```

我收到一条消息，指出“classType 是一个字段，但用作类型”..

# 我该如何解决这个问题以获得我需要的东西？

以下代码提供了一个很好的解决方案：

```
 Type ty = Type.GetType(ItemType); 
 wgList = (IList)Activator.CreateInstance(typeof(List<>).MakeGenericType(ty)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:48:14.457

你不能那样做，或者我不明白你的目的是什么？

请改用 List<object>。

您可以在 System.Linq 命名空间中使用 Extension 方法 is Cast<T>() 将您的 List<object> 转换为 List<T>。

```
List<Entry> entries = wgList.Cast<Entry>().ToList() 
```

# php - 如何使用 PHP MSQL 使用 Jquery 日期时间选择器从日期列中选择或查询日期？

> ID：13676776
> 
> 赞同：-1
> 
> 时间：2012-12-03T03:32:38.260
> 
> 标签：php, jquery, mysql, datepicker

我想使用 jquery 日期选择器选择或查询日期。我有日期列字段，如下图所示。如果我选​​择需要生成的日期并在给定日期显示结果。例如，我选择日期 10-12-2012 并显示输入的所有数据那个日期。请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T19:41:21.243

Correct me if i'm wrong, but it seems you're trying to perform a query statement when a date from date-picker is selected. 为此，您应该使用 jquery.post 或 .get 功能。

首先，您需要创建一个 php 文件，该文件使用带有要搜索的日期的 $_GET 或 $_POST 消息执行查询语句。

就像是

```
<?php if(isset($_GET['pickdate'])){
 //set a variable $datepicked
 //Prepare your SQL statement "Select * from table where date='$datepicked'"
//run the query 
//echo the result with divs and style stuff
} ?> 
```

然后在您的 jquery 函数中，您只需通过事件触发的 .get 函数调用 php 文件

```
$.get('phppickdate.php', {pickdate:datepicked },function(data) {
  $('.result').html(data);
}); 
```

在同一个 html/php 文档中创建一个 div

```
<div class="result"></div> 
```

我不记得很好的代码，但它是这样的。

# ios - readerController.delegate 不解除ModalViewController

> ID：13676778
> 
> 赞同：0
> 
> 时间：2012-12-03T03:32:46.687
> 
> 标签：ios, xcode, pdf, viewer

我已将 vfr Reader 框架添加到我的应用程序中，我可以查看 pdf，但是当我想通过电子邮件发送 pdf 或取消电子邮件时，模态视图不会关闭。我正在使用 iOS 6 和 xcode 4.5。到目前为止，这是我的代码：

```
#pragma mark - Reader method

- (IBAction)didViewPdf {

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

    NSString *myPath = [paths objectAtIndex:0];

    myPath = [myPath stringByAppendingPathComponent:@"karahipi.pdf"];

    ReaderDocument *document = [ReaderDocument withDocumentFilePath:myPath password:nil];

    if (document != nil) {

        readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
        readerViewController.delegate = self;
        readerViewController.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"background.png"]];
        readerViewController.navigationController.navigationBar.tintColor = [UIColor blackColor];

        readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;

        [self presentViewController:readerViewController animated:YES completion:nil];

    }

}

#pragma mark - Reader delegate metho

- (void)dismissReaderViewController:(ReaderViewController *)viewController {

    [self dismissModalViewControllerAnimated:YES];
} 
```

我已经在 iOS 6 中运行了该演示作为它在那里工作的目标。

# knockout.js - knockout custom mapping of child arrays

> ID：13676781
> 
> 赞同：0
> 
> 时间：2012-12-03T03:32:55.220
> 
> 标签：knockout.js

I'm new to Knockout.js and am trying to create a complex object based on a work history.

I'm currently able to pass in the data An employee has positions which have projects which have experiences, etc etc. While I'm able to pass in the data and populate the child objects, I believe what want to do is build up my child objects manually so I can attach methods and computedObservables. I'm just not sure how do wire up my other objects. Do I write a for each loop or is there some spiffy knockout magic to make this simpler?

any guidance would be greatly appreciated!

```
Namespace.viewModel = function (model) {
              console.log('initViewCalled');         

              var memberVM = {
                  Id: ko.observable(model.Id),
                  FName: ko.observable(model.FName),
                  LName: ko.observable(model.LName),
                  Positions: ko.observableArray(model.Positions),
              };              
            // computed goodness goes here
              memberVM.FullName = ko.computed(function () {
                  return this.FName() + ' ' +  this.LName();
          }, memberVM);// methods
          this.addPosition = function () {
              this.Positions.push({MemberId:this.MemberId });
          } .bind(this);
          return memberVM;
      };

      Namespace.position = function (model) {
          var positionVM = {
              EndDate: ko.observable(model.EndDate),
              Description: ko.observable(model.Description),
              HoursPerWeek: ko.observable(model.HoursPerWeek),
              HourlyRate: ko.observable(model.HourlyRate),
              MaxDate: ko.observable(model.MaxDate),
              MinDate: ko.observable(model.MinDate),
              MemberId: ko.observable(model.Id),
              Name: ko.observable(model.Name),
              PositionId: ko.observable(model.Id),
              Summary: ko.observable(model.Summary),
              SalaryEnd: ko.observable(model.SalaryEnd),
              SalaryStart: ko.observable(model.SalaryStart),
              StartDate: ko.observable(model.StartDate),
              Title: ko.observable(model.Title),
              Projects: ko.observableArray(model.Projects), // automapped...
          };

          this.addProject = function () {
              this.Projects.push({ MemberId: this.MemberId });
          } .bind(this);

          return positionVM;
      };

      Namespace.project = function(model) {
          var projectVM = {
              EndDate: ko.observable(model.EndDate),
              Description: ko.observable(model.Description),
              MemberId: ko.observable(model.Id),
              Name: ko.observable(model.Name),
              PositionId: ko.observable(model.Id),
              StartDate: ko.observable(model.StartDate),
              Experiences: ko.observableArray(model.Experiences) // auto-mapped
          };

           this.addExperience = function () {
                  this.Experiences.push("New Experience");
                }.bind(this);

          return projectVM;
      }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:34:57.530

If your data is coming in already structured, consider using the [mapping](http://knockoutjs.com/documentation/plugins-mapping.html) plugin to convert everything to `observables`/`observableArrays`.

I think this is what you are trying to do.

Using the `mappingOptions` you can add in computed observables, if you'd like.

# html - 如何在 html 文件中替换为

> ID：13676783
> 
> 赞同：3
> 
> 时间：2012-12-03T03:33:45.783
> 
> 标签：html, xml

我想`&nbsp;`用`&#160;`我的 html 文件中的所有替换来支持 XML 解析器。但我不想直接替换它们，我想在`<!DOCTYPE >`下面添加一个实体：

`<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"[<!ENTITY nbsp "&#160;">]> <html><head></head><body><div>Hello&nbsp;World!</div></body></html>`

`]>`但是当我查看文件时，文件顶部有一个额外的内容：

有谁知道如何处理它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:44:33.540

您所拥有的是将实体声明包含在内部子集中的有效方法。但是，该文档在其他方面无效，因为您可以使用[W3C 标记验证器](http://validator.w3.org)进行检查：缺少元素`xmlns`上的 required 属性，并且 required属性也是如此。`html``title`

当作为 text/html 提供时，文档按照浏览器处理 HTML 文档的方式进行处理，这意味着内部子集无法识别；事实上，文档类型定义根本不被读取——相反，文档类型声明只是被视为魔术字符串，因此有些字符串会触发“怪癖模式”，有些则不会。doctype 声明以一种简单的方式解析，这使得第一个“>”终止它，因此它之后的任何内容都被视为字符数据。

士气是实体声明不能在内部或外部与“HTML”一起使用，当“HTML”意味着向浏览器发送某些内容并告诉（在 HTTP 标头中）它是 text/html 时——这就是服务器通常告诉的当他们发送 .html 文件时。

用作 application/xhtml+xml 并固定为符合 XHTML 语法，您的方法适用于符合标准的浏览器（在线演示：[http](http://www.cs.tut.fi/~jkorpela/test/nbsp.xhtml) ://www.cs.tut.fi/~jkorpela/test/nbsp.xhtml ）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"
 [<!ENTITY nbsp "&#160;">]>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Entity demo</title></head>
<body>
  <div>Hello&nbsp;World!</div>
</body>
</html> 
```

但是，IE 8 和更早版本在作为 application/xhtml+xml 服务时不处理 HTML（浏览器只会启动“另存为”对话框）。

结论取决于您在做什么以及为什么（以及在何种意义上）您需要“支持 XML 解析器”。这实际上不是关于解析，而是关于实体声明。XHTML 用户代理不需要像 HTML 中那样理解预定义的实体（XML 中定义的实体除外），但是这种可能性是否以某种方式实现了？通常，转换`&nbsp;`为实际的不间断空格字符比转换为字符引用要好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:37:39.370

这里

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"[<!ENTITY nbsp "&#160;"> 
```

# scheme - 如何编写 Scheme（R5RS 语言）程序来计算最大深度（不使用 max 函数）？

> ID：13676784
> 
> 赞同：1
> 
> 时间：2012-12-03T03:33:49.917
> 
> 标签：scheme, racket, r5rs

这是我对深度程序的了解，但是如何在没有 max 函数的情况下执行此操作（仅使用 define、lambda、quote (')、car、cdr、cons、cond、eq? 和 equal？）？

```
(define depth
     (lambda (expr)
        (cond ((null? expr) 0) 
              ((list? (car expr)) 
               (max (+ 1 (depth (car expr))) (depth (cdr expr)))) 
              ((null? (cdr expr))0) (max (depth (cdr expr)))))) 
```

输入： ((id = id + id)(if bool then (if bool then (id = id + id))(id = const / const)(id = id + id))(while bool (id = id - const )(id = id - id)))

应该输出：最大深度：2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T03:39:15.937

好吧，您总是可以实现自己的`my-max`并使用它而不是内置`max`过程：

```
(define (my-max a b)
  (if (> a b) a b)) 
```

您必须以一种或另一种方式进行基本相同的比较，才能找到最大深度 - 因此可以将其重构为辅助程序。请注意，内联比较不是一个好主意，因为这将需要计算两次递归调用 - 最好坚持使用辅助过程，无论是它`max`还是`my-max`.

此外，您的代码中不需要第二次调用`max`- 如果只有一个值，为什么需要找到最大值？

# java - Palette empty in NetBeans 7.2.1 on Windows XP

> ID：13676788
> 
> 赞同：1
> 
> 时间：2012-12-03T03:34:34.737
> 
> 标签：java, swing, netbeans, ide, palette

I'm new to Java programming, I wanna develop small software for cell phones (Nokia Asha 200 at first). At first the Palette had some items, but as I downloaded Swing components, nothing is showing anymore. I already tried many solutions proposed over the net, but most of them are for Linux systems, and I'm using Windows XP. Nothing worked. The palette remains empty, although the menu Tools|Palette says it should have a lot of stuff (like Swing, AWT, Beans, etc). Someone said somewhere to right-click on the palette and choose "order by...", but right-clicking doesn't show any menu. Any help will be very appreciated. Thanks!

# php - How to start a background process in PHP on a linux system and repeatedly write user ajax input to its stdin

> ID：13676792
> 
> 赞同：3
> 
> 时间：2012-12-03T03:34:56.720
> 
> 标签：php, background, ghostscript

On a new PHP session on a linux web server, I want to start a process (specifically ghostscript) running in the background in console input mode and then repeatedly write new data to its input. This data write needs to occur every time new user data arrives via ajax. The user data is interpreted by the PHP script into postscript commands for ghostscript and then needs to be sent to gs. The gs output will be to a named file. The reason for doing this is that I need speed and want to avoid the overhead of starting gs on each new input from the user. (Once gs is running and waiting for input it takes about 40ms to process my data, but restarting gs and processing the data is taking around 250ms.) Although I can get gs to run in the background and accept input from the shell, I am having difficulty getting it to do this from a PHP script. I've been through all the variations of exec, shell_exec, popen, system, coproc, etc. that I can think of and I seem to be missing something fundamental. Thanks for any insights.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T13:14:03.243

如果您在服务器上有适当的访问权限，可以启动一个套接字并使 ghostscript 接受来自该套接字的输入。

例如

在 tty 上：
`$ socket -sl 11555`

在另一个 tty 上：
`$ nc 0 11555 | ghostscript`

现在，无论您向套接字写入什么内容，gs 都会将其作为输入接收。当您的 AJAX 请求到达服务器时，您可以进行所需的任何处理，然后将生成的 postscript 命令从 PHP 写入套接字。

# php - Trying to Display Table but it's not being displayed

> ID：13676794
> 
> 赞同：0
> 
> 时间：2012-12-03T03:36:21.753
> 
> 标签：php, html

I am using twitter Bootstrap for UI to display the links in the code in the form of table But it's not actually being displayed in the table. Please find the error.

```
<center> <div class="well well-large"> <table>
<?php
    require "config.php";
    require "course_availability_file.php";
    //require "database_queries.php";
    //require "webcrawler.php";

    $course_selected = strtolower( $_POST['coursename1']);
    $available = course_availability($course_selected);
    if ( $available == 0){
        echo "Invalid course"."</br>";
    }
    else {
        // echo "Valid course"."</br>";
        //echo "List of  training links for the course  ".$course_selected ."</br>";
        function retrieveFromDatabase($course_selected){
            require "config.php";
            $con = mysql_connect($db_host,$db_user ,$db_pass);
            if (!$con){
                die('Could not connect: ' . mysql_error());
            }
            mysql_select_db($db_name, $con);

            $sql_retrieve = "SELECT DISTINCT course_link from course where course_name = '".$course_selected."' AND number < 5 ;";
            $result = mysql_query( $sql_retrieve);
            while($row = mysql_fetch_array($result))
            {
                echo '<tr>';
                $link = $row['course_link'];
                echo '<a href="' . $link. '"> ' .$link.' </a>'."</br>";
                echo '</tr>';
            }
            $check_num_rows = mysql_num_rows($result);
            mysql_close($con);            
            return $check_num_rows;
        }
        retrieveFromDatabase($course_selected);
    }    
?> </table></div> </center> 
```

I'm trying to find out where the error is. All I want to display my links in a table.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:42:56.403

Try putting `echo '<a href="' . $link. '"> ' .$link.' </a>'."</br>";` inside a `<td></td>` element.

`echo '<td><a href="' . $link. '"> ' .$link.' </a>'."</br></td>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:51:55.353

### 简单的事情：

1.  不要使用`center`标签。相反，给`margin: 0 auto;`.
2.  你错过了`<td>`。

### 您不能添加除`td`under之外的任何其他标签`tr`。

代替：

```
echo '<a href="' . $link. '"> ' .$link.' </a>'."</br>"; 
```

和：

```
echo '<td><a href="' . $link. '"> ' .$link.' </a></td>'; 
```

# oracle - 使用 Max(Date) 删除行？

> ID：13676797
> 
> 赞同：-1
> 
> 时间：2012-12-03T03:36:27.040
> 
> 标签：oracle, sqlplus

我正在尝试根据他们的租赁日期从他们的表中删除一些成员。如果他们没有租用超过3年，他们可以被删除。我面临的问题是一些成员最近租了，这意味着查询仍然会拉起他们的 ID 并删除所有数据，因为他们的记录中有一个日期表明 DateOut 值大于 3 年。

```
delete from (select *
               from rental
                    inner join member
                            on rental.member_id = member.member_id
                    inner join rental_line
                            on rental.rental_id = rental_line.rental_id
              where months_between(sysdate, dateout) > ( 36 )); 

delete from member
 where exists(select dateout
                from rental
               where member.member_id = rental.member_id
                 and months_between(sysdate, rental.dateout) > ( 36 )); 
```

这是我正在运行以删除数据的两个脚本，它首先从出租中拉出，它们是外键中的 ON CASCADE，它也从 Rental_Line 表中提取数据。然后第二个查询运行以自由地从成员表中删除数据，因为没有任何完整性问题，因为之前从链接表中删除了相应的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T05:42:32.143

```
Delete from rental r where r.member_id in (
  select i.member_id 
  from rental i 
  group by i.member_id 
  having MONTHS_BETWEEN(sysdate, max(dateout))>(36)
);

DELETE FROM Member where not exists(
  Select * 
  from rental 
  where Member.Member_ID =  Rental.Member_ID
); 
```

您刚刚删除了所有租赁记录，除非您保留存档，否则您只是在寻找根本没有租赁的成员。如果不是这种情况，您将需要为已清除的 member_id 创建一个临时保留表。

# sql-server-2008 - 删除时无法更新序列

> ID：13676798
> 
> 赞同：-1
> 
> 时间：2012-12-03T03:36:30.227
> 
> 标签：sql-server-2008

```
UPDATE dbo.ControlBrandMapping
SET Sequence = SUBQUERY.SORTORDER
FROM 
    (SELECT 
         Sequence, ROW_NUMBER() OVER (ORDER BY Sequence) AS SORTORDER 
     FROM ControlBrandMapping) SUBQUERY
WHERE ControlBrandMapping.Sequence = SUBQUERY.Sequence` 
```

我在这里要做的是在删除时我正在尝试更新行序列。在用户屏幕上，我有一个 tabelDnD，它在拖动时会重新排列序列。

假设顺序是：

```
1
2
3
4
5 
```

现在可以说我删除了第 3 行。我要 4 变成 3， 5 变成 4。

IE

```
1
2
3
4 
```

它给了我奇怪的序列。但与此同时，当我再次使用 tabelDnD 读取行时，它就可以了。我相信我上面提到的查询存在一些问题。

注意：它不是一`IDENTITY`列。它不是我表中唯一的列。

请帮助解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:58:32.563

您确定需要重新编号所有后续行吗？这听起来像是一个演示问题，即您想向人类显示一个整齐的数字列表。这不需要在数据库中存储“漂亮”的数字。

也就是说，您可以使用类似这样的方法来处理单个删除：

```
 update dbo.ControlBrandMapping
   set Sequence = Sequence - 1
   where Sequence > @DeletedSequence 
```

这种事情往往会在具有多个用户同时更新数据库的典型系统中解开。典型的系统也有需要更新的外部引用等等......。

# javascript - How to check and recheck within ajax and wait until the value of the server message changes?

> ID：13676807
> 
> 赞同：0
> 
> 时间：2012-12-03T03:39:20.197
> 
> 标签：javascript, jquery, ajax

I am working ona application, when the user clicks on the "save" button in the application, it saves the information and restarts the server. The form has to be successfully submitted before ajax success will fire. If the information is saved correctly from the form, i get a 200 success message from the server.

If there is success(200) the server restarts, when the Server restarts or is restarting it gives a 500 internal server message, it take about 30 to 40 sec or more to restart the server so i have await time for 30 sec.. Once the server restarts it gives a 200 success server message.

Currently I am using *Ajax call 2* to check for success for data submission for server restart and the other 1st *Ajax call 1* to recheck the server is restarting and the data has been updated.

I have currently the following 2 ajax codes

Ajax call 1

```
 $.ajax({
           // dataType : 'jsonp',
            //jsonp : 'js',
            url: "some.json",
            beforeSend : function(jqXHR, settings) {
                console.info('in beforeSend');
                console.log(jqXHR, settings);
            },
            error : function(jqXHR, textStatus, errorThrown) {
                alert(" 500 top data still loading"+ jqXHR +  " : " + textStatus +  " : " + errorThrown);
                console.info('in error');
                console.log(jqXHR, textStatus, errorThrown);
            },
            complete : function(jqXHR, textStatus) {
             alert(" complete "+ jqXHR +  " : " + textStatus);
                console.info('in complete');
                console.log(jqXHR, textStatus);
            },
            success: function(data, textStatus, jqXHR){
            alert(" success "+ jqXHR +  " : " + textStatus);
                console.info('in success');
                console.log(data, textStatus, jqXHR);
            }
        }); 
```

Ajax call 2

```
 $(function () {
    $("#save").click(function () {

        $.ajax({
            type: "POST",
            url: "some.json",
            data: json_data,
            contentType: 'application/json',
            success: function (data, textStatus, xhr) {
                console.log(arguments);
                console.log(xhr.status);
                alert("Your changes are being submitted: " + textStatus + " : " + xhr.status);
                $('#myModal').modal('hide');
                /*                   
        This gives a messagthat  the server is restarting iina modal window and waits for 30sec
        */
                $('#myModal-loading').modal('show');

/***  Re check bit by Ryan ***/
var restartCheck = window.setInterval(
$.ajax({
    // dataType : 'jsonp',
    //jsonp : 'js',
    url: "../../../../../rest/configuration",
    beforeSend: function (jqXHR, settings) {
        console.info('in beforeSend');
        console.log(jqXHR, settings);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert(" 500 top data still loading " + jqXHR + " : " + textStatus + " : " + errorThrown);
        console.info('in error');
        console.log(jqXHR, textStatus, errorThrown);

    },
    complete: function (jqXHR, textStatus) {
        alert(" complete " + jqXHR + " : " + textStatus);
        console.info('in complete');
        console.log(jqXHR, textStatus);
    },
    success: function (data, textStatus, jqXHR) {
        window.clearInterval(restartCheck);
        alert(" success " + jqXHR + " : " + textStatus);
        console.info('in success');
        console.log(data, textStatus, jqXHR);
    }
}), 30000); //This will call the ajax function every 3 seconds until the clearInterval function is called in the success callback.
/*** recheck bit **/

                setTimeout(function () {
                    location.reload(true);
                }, 30000);

                $('<div id="loading">Loading...</div>').insertBefore('#myform-wiz');

            },

            error: function (jqXHR, textStatus, errorThrown) {
                alert(jqXHR.responseText + " - " + errorThrown + " : " + jqXHR.status);

            }
        });

    });
});

}); 
```

Is it possible to re-check continuously within success in `Ajax call 2` , if the server is giving a 500 error message to check for restart of server and recheck for success for 200 before redirecting back to the updated page?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:12:16.763

您可能只使用 setInterval。不要忘记在成功回调中清除它。

```
var restartCheck = window.setInterval(    
$.ajax({
           // dataType : 'jsonp',
            //jsonp : 'js',
            url: "some.json",
            beforeSend : function(jqXHR, settings) {
                console.info('in beforeSend');
                console.log(jqXHR, settings);
            },
            error : function(jqXHR, textStatus, errorThrown) {
                alert(" 500 top data still loading"+ jqXHR +  " : " + textStatus +  " : " + errorThrown);
                console.info('in error');
                console.log(jqXHR, textStatus, errorThrown);

            },
            complete : function(jqXHR, textStatus) {
                alert(" complete "+ jqXHR +  " : " + textStatus);
                console.info('in complete');
                console.log(jqXHR, textStatus);
            },
            success: function(data, textStatus, jqXHR){
                window.clearInterval(restartCheck);
                alert(" success "+ jqXHR +  " : " + textStatus);
                console.info('in success');
                console.log(data, textStatus, jqXHR);
            }
        })
, 3000);  //This will call the ajax function every 3 seconds until the clearInterval function is called in the success callback. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:32:50.053

好吧，我的想法可能是将您的`ajax`请求放入一个方法中并执行以下操作：

* * *

**1.**发送请求以保存您的数据并重新启动服务器。

**2.**在这个过程中你需要验证数据在数据库中没有重复。

**3.**如果出现错误，则该方法会一次又一次地执行，但由于在编号 2 中实施的验证，数据不会被双重保存，只有服务器会重新启动。

* * *

为了开始这一切，我模拟了你的情况。只是要知道，我不知道您使用的是哪种服务器语言（因为问题中未指定`tags`），但我将使用它`PHP`来简化此操作...

**以下示例说明了这一点：**

用户在文本框中输入他/她的姓名，然后当他/她单击“保存”按钮时，数据将被发送到服务器，并`50s`在回调后返回到客户端。但是，如果输入名称是，`oscar`那么服务器将返回`500 HTTP`错误，您将看到代码如何再次执行以尝试再次“重新启动”服务器（记住这是一个模拟）。否则一切都会返回`200 HTTP`OK。

*   请阅读代码中的所有注释，检查浏览器控制台，如果可以的话……测试一下！

* * *

***index.php***：这是主页。

```
<html>
<head>
<title>Simulation</title>
</head>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('#btn').click(function() {
     save();
  });
});

function save() {

    $('#msg').text('Please wait while restarting the server...').show();
    $('#btn').hide();

    $.ajax({
        type: 'POST',
        url: 'process.php',
        data: $('form').serialize(),
        statusCode: {
            500: function() { 

                console.log('500 HTTP error present, try again...');

                /* Invoke your method again to try restarting the server. 
                 * To avoid double save of 'name' variable please 
                 * check the first comments at 'process.php' file.
                 */
                $('#msg').text('Re-trying to restart the server...');

                /* While waiting check the browser console and look that 
                 * the save method is getting invoked again and again until 
                 * you change the name from 'oscar' to another.
                 */
                save();
            },
            200: function() {
                $('#msg').text('Server restarted!').fadeOut('slow');
                $('#btn').fadeIn();
            }
        }
    });

};
</script>
<body>
<span id="msg"></span>
<br/>
<form>
Name: <input type="text" name="name" id="name"/><br/>
<input type="button" name="btn" id="btn" value="Save"/>
</form>
</body>
</html> 
```

* * *

***process.php***：该文件将接收`ajax`来自 jQuery 的请求（只是要知道我使用的是**1.7.2**版本）。

```
<?php
if(isset($_POST['name'])){

  $name = $_POST['name'];

  /* TODO: In this case and at this point, you need to save the 
   * name into DB but only if it doesn't exist because if 500 error
   * is present, then the request have to be validated again to 
   * just restart the server (maybe doing some if/else to evaluate) and 
   * don't make a double save.
   */

  /* TODO: restart the server... 
   * I will simulate the long wait for the server to respond (50s)
   * using sleep before sending back the name variable to client side.
   *
   * But!
   * I will do a tricky thing at this point. If the name is 'oscar' then
   * I will produce a 500 HTTP error to see what happens at client side...
   */

   /* Wait first 27s */
   sleep(27);

   /* If $name is 'oscar' then return 500 error */
   if($name == 'oscar') {
    throw new Exception('This is a generated 500 HTTP server error.');
   }

   /* If $name != 'oscar' then wait 23s to simulate 
    * the long time for restarting server...
    */
    sleep(23);

    flush();

    /* Retun $name in the callback */
    echo $name;  
}
?> 
```

* * *

希望这可以帮助 ：-）

# proxy - Serving two sites from one server with Nginx

> ID：13676809
> 
> 赞同：69
> 
> 时间：2012-12-03T03:39:44.817
> 
> 标签：proxy, nginx

I have a Rails app up and running on my server and now I'd like to add another one.

I want Nginx to check what the request is for and split traffic based on domain name

Both sites have their own nginx.conf symlinked into sites-enabled, but I get an error starting nginx `Starting nginx: nginx: [emerg] duplicate listen options for 0.0.0.0:80 in /etc/nginx/sites-enabled/bubbles:6`

They are both listening on 80 but for different things.

Site #1

```
upstream blog_unicorn {
  server unix:/tmp/unicorn.blog.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name walrus.com www.walrus.com;
  root /home/deployer/apps/blog/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @blog_unicorn;
  location @blog_unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://blog_unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

Site two:

```
upstream bubbles_unicorn {
  server unix:/tmp/unicorn.bubbles.sock fail_timeout=0;
}

server {
  listen 80 default deferred;
  server_name bubbles.com www.bubbles.com;
  root /home/deployer/apps/bubbles/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  try_files $uri/index.html $uri @bubbles_unicorn;
  location @bubbles_unicorn {
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header Host $http_host;
    proxy_redirect off;
    proxy_pass http://bubbles_unicorn;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2012-12-03T20:37:41.960

[文档说：](http://nginx.org/r/listen)

> default_server 参数（如果存在）将导致服务器成为指定地址：端口对的默认服务器。

也很明显，只能有一个**默认**服务器。

它还说：

> 一个监听指令可以有几个特定于与套接字相关的系统调用的附加参数。它们可以在任何监听指令中指定，但对于给定的地址：端口对只能指定一次。

因此，您应该从其中一个指令中删除`default`和。这同样适用于指令。`deferred``listen 80``ipv6only=on`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-06-02T10:22:13.697

刚刚遇到同样的问题，但重复`default_server`指令不是此消息的唯一原因。

您只能`backlog`在其中一个`server_name`指令上使用参数。

例子

站点 1：

```
server {
    listen 80 default_server backlog=2048;
    server_name www.example.com;
    location / {
        proxy_pass http://www_server;
    } 
```

站点 2：

```
server {
    listen 80;    ## NOT NOT DUPLICATE THESE SETTINGS 'default_server backlog=2048;'
    server_name blogs.example.com;
    location / {
        proxy_pass http://blog_server;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-03T01:56:58.383

我遇到了同样的问题。我通过修改我的 /etc/nginx/sites-available/example2.com 文件来修复它。我将服务器块更改为

```
server {
        listen 443 ssl; # modified: was listen 80;
        listen [::]:443; #modified: was listen [::]:80;
        . . .
} 
```

在 /etc/nginx/sites-available/example1.com 我注释掉了`listen 80`，`listen [::]:80`因为服务器块已经配置为 443。

# java - Postgres 数据类型转换

> ID：13676816
> 
> 赞同：38
> 
> 时间：2012-12-03T03:40:29.233
> 
> 标签：java, sql, postgresql, casting

我的数据库是 Postgres 8。我需要将数据类型转换为另一个。这意味着，其中一种列数据类型是`varchar`并且需要在语句`int`中使用 Postgres将其转换为。`SELECT`

目前，我获取字符串值并将其转换`int`为 Java。
有什么办法吗？示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-12-03T03:48:34.613

```
**cast(varchar_col AS int)**  -- SQL standard
```

或者

```
**varchar_col::int**          -- Postgres syntax shorthand
```

这些语法变体在*任何地方*（几乎）都有效。第二个可能需要在特殊情况下嵌套括号：

*   [PostgreSQL：为所有表字段的长度创建索引](https://stackoverflow.com/questions/34143116/postgresql-create-index-on-length-of-all-table-fields/34144962#34144962)

如果语法限制只允许功能符号，则可能需要第一个：

*   [PostgreSQL - LATERAL 表函数上的 CAST 与 :: 运算符](https://dba.stackexchange.com/q/280410/3684)

还有两种变体：

```
int4(varchar_col)         -- only works for some type names
int '123'                 -- must be an untyped, quoted string literal 
```

注意我是怎么写的。那是内部类型名称，并且还为它定义了一个函数。不能用作or 。***`int4`***`(varchar_col)`~~`integer()`~~~~`int()`~~

另请注意，最后一种形式不适用于*数组*类型。~~`int[] '{1,2,3}'`~~必须是`'{1,2,3}'::int[]`or `cast('{1,2,3}' AS int[])`。

[**此处**](https://www.postgresql.org/docs/current/sql-expressions.html#SQL-SYNTAX-TYPE-CASTS)和[**此处**](https://www.postgresql.org/docs/current/sql-syntax-lexical.html#SQL-SYNTAX-CONSTANTS-GENERIC)的手册中的详细信息。

要对 有效`integer`，字符串必须由可选的前导符号 ( `+`/ `-`) 后跟数字组成。前导/尾随空格被忽略。

# mysql - PDO 语法错误，SQLSTATE[42000]

> ID：13676820
> 
> 赞同：0
> 
> 时间：2012-12-03T03:40:37.770
> 
> 标签：mysql, syntax, pdo

我收到以下错误，我看不到问题。谢谢你的帮助。

> 致命错误：未捕获异常 'PDOException' 并带有消息 'SQLSTATE[42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在“唯一”附近使用的正确语法 VALUES ('XX.XXX.XX.X','03/12/2012','XX.XXX.XX.X - 03 /12/2012')' 在 /home/content/07/XXX/html/header.php:11 的第 1 行' 堆栈跟踪：#0 /home/content/07/XXX/html/header.php(11) : PDOStatement->execute(Array) #1 /home/content/07/XXX/html/index.php(15): include('/home/content/0...') #2 {main} 抛出 /第 11 行的 home/content/07/XXX/html/header.php

```
$ip = $_SERVER['REMOTE_ADDR'];
$date = date("d/m/Y");
$unique = $ip." - ".$date;

$data = array($ip, $date, $unique, $date);
$STH1 = $DBH->prepare("INSERT INTO uniques (ip, date, unique) VALUES (?, ?, ?) ON DUPLICATE KEY UPDATE date = ?");
$STH1->execute($data); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:41:35.317

用反引号包裹 uniquer，因为它是保留关键字

例如

```
INSERT INTO uniques (ip, date, `unique`) ... 
```

*   [MySQL 保留关键字列表](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# php - Can Jquery load method be used for getting data from PHP?

> ID：13676824
> 
> 赞同：0
> 
> 时间：2012-12-03T03:41:05.533
> 
> 标签：php, jquery, zend-framework, zend-server

I am using zend framework project which is been created by using zend studio. Also there is a Jquery project which is created separately.

I have deployed jquery project in tomcat, and on click of one button in jquery, a php method is called by using ajax **LOAD** method. PHP is returning string value.

However, for some reason data is not coming back to jquery method.

```
 Jquery method:

 var res =  $('#updatedtime').load("http://test/index/returndate"); 
```

* * *

```
PHP method

public function returndateAction(){
  $this->_helper->viewRenderer->setNoRender(true);//this will do job

   return "hi";

 } 
```

Can we use jquery LOAD method be used to get data? Please correct me if am wrong!

Thanks all

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T03:50:58.617

客户端不知道也不关心你在服务器端运行什么。您可以从服务器获取任何您想要的东西，无论是使用 PHP 创建的东西，还是静态资源。

如果您没有取回数据，请使用浏览器的网络工具来验证是否正在发出请求以及是否正在返回数据。此外，请确保您实际上是在服务器端执行该功能。看来你不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:50:59.420

是的，只需添加一个回调函数作为第二个参数[`.load`](http://api.jquery.com/load/)

```
$('#updatedtime').load("http://test/index/returndate", function (phpString) { ... }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T03:50:24.507

你的意思是这样的：PHP

```
public function returndateAction(){
  $this->_helper->viewRenderer->setNoRender(true);//this will do job
  echo "hi";
} 
```

jQuery

```
// data from PHP is displayed in your element having id updatedtime
$('#updatedtime').load("http://test/index/returndate"); 
```

或者

```
$('#updatedtime').load("http://test/index/returndate", function(data){
    alert(data); //shows 'hi'
}); 
```

检查您尝试通过负载访问的 url 是否实际被调用。

# php - need help connecting to RDS from local and EC2

> ID：13676828
> 
> 赞同：0
> 
> 时间：2012-12-03T03:42:01.107
> 
> 标签：php, amazon-web-services

I am trying to connect to RDS from my `localhost` and `ec2` server.
I can connect fine with `MySQL Workbench 5.2 CE` but i cant seem to connect with `PHP`.
They are in the same zone and security group.

```
$dbName = "*******-****.***************.**-****-*.rds.amazonaws.com:3306";
$dbTable = "myTable";
$dbUser = "myUser";
$dbPass = "*********";

define("HOST", $dbName);
define("DBUSER", $dbUser);
define("PASS", $dbPass);
define("DB", $dbTable);
$conn = new mysqli(HOST, DBUSER, PASS, DB) or  die(); 
```

these are the errors
`Warning: mysqli::mysqli() [<a href='mysqli.mysqli'>mysqli.mysqli</a>]: php_network_getaddresses: getaddrinfo failed: No such host is known.`

`Warning: mysqli::mysqli() [<a href='mysqli.mysqli'>mysqli.mysqli</a>]: [2002] php_network_getaddresses: getaddrinfo failed: No such host is known. (trying to connect via tcp://*******-****.***************.**-****-*.rds.amazonaws.com:3306)`

`Warning: mysqli::mysqli() [<a href='mysqli.mysqli'>mysqli.mysqli</a>]: (HY000/2002): php_network_getaddresses: getaddrinfo failed: No such host is known.`

the endpoint works fine as i said with the client, not on browser.
but what does this error mean, and how would i start debugging this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:46:55.313

您是否在亚马逊管理控制台中检查了您的亚马逊 ec2 的安全组。请检查您是否打开了 mysql 的端口（即 3306）

# json - 使用外部 json 数据编译 mustache 部分

> ID：13676829
> 
> 赞同：0
> 
> 时间：2012-12-03T03:42:26.230
> 
> 标签：json, partial, mustache, gruntjs

我正在为我们的内部文档和测试使用 mustache partials - 如另一个 SO question [how to have grunt task render mustache partials to static HTML](https://stackoverflow.com/questions/13521608/how-to-have-grunt-task-render-mustache-partials-to-static-html)中所述，我现在想使用外部 json 文件驱动部分数据。json 文件将与部分文件命名相同，并将包含将与部分文件一起编译的模拟数据。

关于如何使它工作的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:17:42.103

我更新了 hogan.js 文件以读取与部分同名的 data.json 文件：

```
module.exports = function(grunt) {

  // Grunt utilities.
  var task   = grunt.task,
    file     = grunt.file,
    utils    = grunt.util,
    log      = grunt.log,
    verbose  = grunt.verbose,
    fail     = grunt.fail,
    option   = grunt.option,
    config   = grunt.config,
    template = grunt.template,
    _        = utils._

  // external dependencies
  var fs   = require('fs'),
    hogan  = require('hogan');

  // ==========================================================================
  // TASKS
  // ==========================================================================
  grunt.registerMultiTask('hogan', 'Compile mustache files to HTML with hogan.js', function() {

    var data     = this.data,
      src        = grunt.file.expandFiles(this.file.src),
      dest       = grunt.template.process(data.dest),

      // Options are set in gruntfile
      defaults   = {
        production:  false,
        docs:        false,
        title:      'Sellside',
        setAccount: 'NA',
        setSiteId:  'NA',
        layout:     'docs/templates/layout.mustache',
        paths: {},
        partials: {},
        partialsData: {},
      },

      options = _.extend(defaults, this.data.options || {})

      !src && grunt.warn('Missing src property.')
      if(!src) return false

      !dest && grunt.warn('Missing dest property')
      if(!dest) return false

    var done         = this.async()
    var srcFiles     = file.expandFiles(src)

    if(options.paths.partials) {

      var partials = grunt.file.expandFiles(options.paths.partials);
      log.writeln('Compiling Partials...');
      partials.forEach(function(filepath) {
        var filename = _.first(filepath.match(/[^\\\/:*?"<>|\r\n]+$/i)).replace(/\.mustache$/, '');
        log.writeln(filename.magenta);

        var dataFilepath = filepath.replace(/\.mustache$/, '.json');

        var partial = fs.readFileSync(filepath, 'utf8');
        options.partials[filename] = hogan.compile(partial);

        // if a data file exists, read in the data
        if(fs.existsSync(dataFilepath)) {
          options.partialsData[filename] = grunt.file.readJSON(dataFilepath);
        }

      });
      log.writeln();
}

    try {
      options.layout   = fs.readFileSync(options.layout, 'utf8')
      options.layout   = hogan.compile(options.layout, {
        sectionTags: [{
          o: '_i',
          c: 'i'
        }]
      })
    } catch(err) {
      grunt.warn(err) && done(false)
      return
    }

    srcFiles.forEach(function(filepath) {
      var filename = _.first(filepath.match(/[^\\\/:*?"<>|\r\n]+$/i)).replace(/\.mustache$/, '')

      grunt.helper('hogan', filepath, filename, options, function(err, result) {
        err && grunt.warn(err) && done(false)
        if(err) return

        file.write(dest.replace('FILE', filename), result)
      })
    })

    done()
  })

  // ==========================================================================
  // HELPERS
  // ==========================================================================
  grunt.registerHelper('hogan', function(src, filename, options, callback) {
    log.writeln('Compiling ' + filename.magenta);

    var page                = fs.readFileSync(src, 'utf8'),
        html                = null,
        layout              = options.layout,
        context             = {};

        context[filename]   = 'active';
        context._i          = true;
        context.production  = options.production;
        context.docs        = options.docs;
        context.setAccount  = options.setAccount;
        context.setSiteId   = options.setSiteId;

    var title               = _.template("<%= page == 'Index' ? site : page + ' · ' + site %>")
    context.title           = title({
      page: _(filename).humanize().replace('css', 'CSS'),
      site: options.title
    })
    try {
      page = hogan.compile(page, {
        sectionTags: [{
          o: '_i',
          c: 'i'
        }]
      })

      context = _.extend(context, options.partialsData);    
      options.partials.body = page;
      page = layout.render(context, options.partials)

      callback(null, page)
    } catch(err) {
      callback(err)
      return
    }
  })
}; 
```

alert.json 文件的简单示例：

```
{
  "modifier": "alert-warning",
  "alertType": "Warning!",
  "message": "Best check yo self, you're not looking too good."
} 
```

### alert.mustache

# 警报

```
 <div class="row-fluid">
    <div class="alert {{alert.modifier}}">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      <strong>{{alert.alertType}}</strong>
      {{alert.message}}
    </div>
  </div>

</div><!-- /container --> 
```

我更喜欢下一个示例，因为您可以创建不同的数据以在相同的部分中使用：

### 警报.json

```
{
  "default": {
    "modifier": "alert-warning",
    "alertType": "Warning!",
    "message": "Best check yo self, you're not looking too good.!"
  },
  "error": {
    "modifier": "alert-error",
    "alertType": "Error!!!",
    "message": "You did something horribily wrong!!!"
  },
  "success": {
    "modifier": "alert-success",
    "alertyType": "Success!!!",
    "message": "The record has been successfully saved..."
  }
} 
```

### alert.mustache

```
<!-- partial -->
<div class="container">
  <h1>alerts</h1>

  <div class="row-fluid">
    <div class="alert {{modifier}}">
      <button type="button" class="close" data-dismiss="alert">&times;</button>
      <strong>{{alertType}}</strong>
      {{message}}
    </div>
  </div>

</div><!-- /container --> 
```

### partials.mustache --- 这是引用警报部分的地方

```
 {{#alert.default}}
    {{> alert }}
  {{/alert.default}}

  {{#alert.error}}
    {{> alert }}
  {{/alert.error}}

  {{#alert.success}}
    {{> alert }}
  {{/alert.success}} 
```

让我知道这是否有帮助。

谢谢，布赖恩

# ruby-on-rails - 两个控制器，一个模型——为什么我的应用要寻找第二个模型？

> ID：13676834
> 
> 赞同：1
> 
> 时间：2012-12-03T03:43:01.280
> 
> 标签：ruby-on-rails, rails-models

我有一个订单模型。

客户可以获得一些对消费者友好的视图，让他们可以创建和查看自己的订单，所有这些都由 Orders 控制器提供支持。

管理员可以在采购控制器的支持下获得创建、编辑、查看、删除和管理订单的全部视图。

据我所知，Purchase 控制器应该只与 Order 模型对话，但以下错误消息让我认为它正在寻找一个不存在的 Purchase 模型：

```
ActiveRecord::StatementInvalid in PurchasesController#new
NameError in PurchasesController#new
uninitialized constant Purchase
Rails.root: /Users/steven/Dropbox/testivate 
```

这就是错误的意思吗？如果是这样，我如何阻止 Purchases 控制器尝试查找 Purchase 模型？

我的代码...

**应用程序/控制器/purchases_controller.rb：**

```
class PurchasesController < ApplicationController
  def new
    @purchase = Order.new
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @purchase }
    end
  end
  def create
    @purchase = Order.new(params[:purchase])
    respond_to do |format|
      if @purchase.save
        format.html { redirect_to purchase_path(@purchase), notice: 'Purchase was successfully created.' }
        format.json { render json: @purchase, status: :created, location: @purchase }
      else
        format.html { render action: "new" }
        format.json { render json: @purchase.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

**/config/routes.rb：**

```
Testivate::Application.routes.draw do
  resources :orders
  resources :purchases
end 
```

**/app/views/purchases/new.html.haml：**

```
.textbox
  %p#notice= notice
  %h1 New Purchase
  = render 'form'
  = link_to 'List Purchases', purchases_path 
```

**/app/views/purchases/_form.html.haml：**

```
= simple_form_for @purchase do |f|
  = f.error_notification
  = f.input :name
  = f.button :submit 
```

***更新：**所以我刚刚意识到“事务”是 Rails 中的保留字，所以我改变了它。但是还有什么我需要解决的吗？*

***更新 2：**当我完全注释掉 #new 视图和 _form 时，我仍然会收到错误消息，所以我认为问题出在我的控制器或路由或其他地方，而不是我使用 simple_form。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:06:11.073

**更新：**

这是答案的一半。对于另一半，请参阅对该问题的评论。

**原答案：**

这里的部分问题是，默认情况下`form_for`（`simple_form_for`构建在顶部）假设某些关于给定记录使用哪些路径的事情，它派生自该记录的类。在您的情况下，由于`@purchase`实际上是`Order`该类的一个实例，因此这些假设会给您带来麻烦。

如果您查看由 生成的表单`simple_form_for`，您会发现它为表单提供了一个 id 和一个类`new_order`，并且表单中的字段具有类似 的名称`order[name]`。要使用 rails`purchase`而不是`order`在表单中使用，您必须为其传递一个`:as`选项。

从[文档中`form_for`](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for-label-Resource-oriented+style)：

> 如果您有一个需要表示为不同参数的对象，例如充当客户端的 Person：

他们给出的例子：

```
<%= form_for(@person, :as => :client) do |f| %>
  ...
<% end %> 
```

在您的情况下，您实际上想告诉它`@purchase`像“购买”一样对待：

```
= simple_form_for @purchase, :as => :purchase do |f|
  = f.error_notification
  = f.input :name
  = f.button :submit 
```

这将获得正确的表单 ID 等，以便您可以`params[:purchase]`像上面一样在创建操作中使用例如。但这还不够，因为表单的操作（URL）最终仍将是`/orders`. 要更改它，请添加一个`:url`选项：

```
= simple_form_for @purchase, :as => :purchase, :url => purchases_path(@purchase) do |f|
  = f.error_notification
  = f.input :name
  = f.button :submit 
```

这也将解决您发布的[其他问题。](https://stackoverflow.com/questions/13682312/how-to-use-two-controllers-with-one-model-in-rails#13682312)

# javascript - 更改元素 ID 并在该 ID 上使用新函数

> ID：13676837
> 
> 赞同：1
> 
> 时间：2012-12-03T03:43:26.990
> 
> 标签：javascript

我正在尝试使用 javascript 构建缩略图幻灯片。我对 Javascript 很陌生，所以我的做法可能有点奇怪......

我遇到的问题是我有一个主图像，然后我有 4 个缩略图。当我单击第一个缩略图时，它会更改主图像和第一个缩略图。但是当我点击更改后的缩略图时，它需要用另一张照片（与新缩略图对应的照片）更改主图像

我用这样的调用初始化我的函数：

```
document.getElementById('thumb1').onclick=thumbs1; 
```

哪个使用此功能：

```
function thumbs1(){
    num1 = 1;
    num2 = 0;
    var src1 = largeArray[num1];
    var src2 = thumbArray[num2];
    document.getElementById('main').src=src1;
    document.getElementById('one').src=src2;
    document.getElementById('one').id='change';
} 
```

我正在尝试将新缩略图的 id 更改为“更改”并调用另一个函数，如下所示：

```
document.getElementById('change').onclick=changed; 
```

这使用了以下功能：

```
function changed(){
    num1 = 0;
    var src1 = largeArray[num1];
    document.getElementById('change').src=src1;
    document.getElementById('change').id='one';
} 
```

使用 Firebug 时，我发现了错误，我认为这是由于调用`document.getElementById('change').onclick=changed;`. 浏览器找不到元素 ID“更改”，因为我还没有调用更改 ID 的函数。

有谁知道如何解决这个问题。（我知道代码质量很差......我在自学）

这是该页面的实时链接：[我的页面](http://www.chrisfrank.me/eclass/js/lesson5.html#)

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:19:32.127

```
var array = //id's of your images here. you could type them static or search your document for images and get their id attribute.

document.addEventListener("click", function(e){
    var clicked_image = e.target || e.srcElement; //using jquery can help with this cause older versions of IE are stupid, but depends on if you want to support them. 
    var id = clicked_image.getAttribute(id);
    var temp = document.getElementById("main").src;

    for (var i = 0; i < array.length; i++){
        if(array[i] == id){
            document.getElementById("main").src = clicked_image.src;
            clicked_image.src = temp;
        }
    }
}) 
```

这非常快速和肮脏，你最好`eventlisteners`只分配给你的图像。您将使用与上述相同的语法，但它应该让您知道该怎么做。

有了这个，您不必担心点击了什么图像，您只需更改主要内容，然后将拇指更改为主要内容。因此，您消除了尝试跟踪每个图像是什么的麻烦。

# c# - 无法使用 WCF 获取元数据

> ID：13676844
> 
> 赞同：0
> 
> 时间：2012-12-03T03:44:04.670
> 
> 标签：c#, wcf, web-services

我正在尝试设置一个返回 JSON 对象的 Web 服务，并且我正在按照本[教程](http://mikesknowledgebase.com/pages/Services/WebServices-Page1.htm)进行操作，但是当我尝试运行它时出现此错误

> 错误：无法从中获取元数据`http://localhost:10995/Service1.svc` 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅位于 [http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata) Exchange 错误 URI 的 MSDN 文档：`http://localhost:10995/Service1.svc` 元数据包含无法解析的引用：'localhost:10995 /Service1.svc'。远程服务器返回意外响应：(405) 方法不允许。远程服务器返回错误：(405) Method Not Allowed.HTTP GET Error URI: `http://localhost:10995/Service1.svc` There was an error download `http://localhost:10995/Service1.svc`。请求失败，HTTP 状态为 404：未找到。

所以我尝试查找这意味着什么并遇到这些链接以尝试修复它

[WCF - 无法获取元数据](https://stackoverflow.com/questions/10361013/wcf-cannot-obtain-metadata)

[WCF - 错误：无法获取元数据](https://stackoverflow.com/questions/10192824/wcf-error-cannot-obtain-metadata)

[错误：无法从 WCF 服务获取元数据](https://stackoverflow.com/questions/6056329/error-cannot-obtain-metadata-from-wcf-service)

[WCF 测试客户端无法添加服务，无法获取元数据](https://stackoverflow.com/questions/9114870/wcf-test-client-cannot-add-service-cannot-obtain-metadata)

但他们都没有解决问题。这是我第一次尝试做任何类型的网络服务，我今天开始研究，所以显然我对这一切都是新手。

这个错误是什么意思，我该如何修复它以便我可以测试它？

```
<system.serviceModel>
<services>
  <service name="WcfService4.Service1" behaviorConfiguration="WcfService4.Service1Behavior">
    <!-- Service Endpoints -->
    <endpoint address="../Service1.svc"
      binding="webHttpBinding"
      contract="WcfService4.IService1"
      behaviorConfiguration="webBehaviour" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="WcfService4.Service1Behavior">
      <!-- To avoid disclosing metadata information, set the value below to false before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="webBehaviour">
      <webHttp/>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T09:18:07.420

> use namespace name with your service name and contract name... See the code snippet below:

```
<service name="WcfService3.Service1"
 behaviorConfiguration="ServiceBehavior">
>         
<endpoint address="../Service1.svc" binding="wsHttpBinding" contract="WcfService3.IService1"> 
```

where **"WcfService3"** is the namespcae.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:16:24.710

尝试这个

```
<serviceMetadata httpGetEnabled="true" httpsGetEnabled="true"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:05:41.277

它不仅仅是一个错字是吗？

```
contract="WcfService4e.IService1" 
```

它应该是

```
contract="WcfService4.IService1" 
```

# django - Django 从头开始

> ID：13676849
> 
> 赞同：0
> 
> 时间：2012-12-03T03:45:24.627
> 
> 标签：django, django-forms, django-cms

我是一名 PHP 开发人员，了解所有主要框架，如 Joomla!、CI、zend 等。

现在我得到了一个基于 Python 的 CMS（DJango）项目。

我现在正在研究 python，我有一些疑问。

1.  我可以为 DJango 的运行平台设置 wamp（我的意思是 apache）吗？如果是，请向我推荐任何设置 wamp 的文档/教程

2.  Django 是 MVC 架构框架词吗？

3.  就像在 Joomla 中一样！它有任何认证系统吗？

从哪里开始 Django？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:01:32.763

1.  由于 django 带有用于开发的内置服务器，因此无需设置 apache。但是如果你想设置 apache，你可以试试[bitnami django-stack](http://bitnami.org/stack/djangostack)。
2.  是的。Django 是一个基于 MVC 架构的框架。我发现这个[django-faq-question](https://docs.djangoproject.com/en/dev/faq/general/#django-appears-to-be-a-mvc-framework-but-you-call-the-controller-the-view-and-the-view-the-template-how-come-you-don-t-use-the-standard-names)很有用。
3.  是的。Django 在名为`auth`. 有关这方面的更多信息可以在[此处的 django 文档](https://docs.djangoproject.com/en/dev/topics/auth/)中找到。

[要开始编写您的第一个 django 应用程序，请参阅此处](https://docs.djangoproject.com/en/dev/intro/tutorial01/)给出的清晰文档。

# macos - 如何使用 Applescript 创建或替换文件？

> ID：13676850
> 
> 赞同：0
> 
> 时间：2012-12-03T03:45:26.950
> 
> 标签：macos, applescript

`/tmp/test.txt`我正在尝试使用 AppleScript将内容写入文件。

*   如果文件不存在，我想创建它。
*   如果确实存在，我想替换内容。

这被证明是相当困难的，因为 AppleScript 创建新文件与写入现有文件的语法不同。我还考虑过删除已经存在的文件，然后创建它，但 AppleScript 默认会将内容移至垃圾箱，因此即使这样也相当复杂。

我要写入文件的数据中可能有很多特殊字符，所以我真的不想做类似的事情，`do shell script "cat " + data + " > /tmp/txt.txt"`因为我不知道`escapeshellarg`AppleScript 有什么。

以下是我到目前为止的内容，但出现错误：

> 无法将文件“Macintosh HD:private:tmp:test.txt”转换为类型引用。

我真的很想通过改进`write_to_file`我在[这里](http://hints.macworld.com/article.php?story=20050219134457298)得到的帮助函数来抽象它，这样如果文件不存在，它就会负责创建文件。

```
my write_to_file("hello", "/tmp/test.txt", false)

on write_to_file(this_data, target_file, append_data)
    try

        if not (exists POSIX file target_file) then
            make new document file at ("/tmp/" as POSIX file as alias) with properties {name:"test.txt", text:the_data}
        end if

        set the target_file to the target_file as POSIX file
        set the open_target_file to open for access file target_file with write permission
        if append_data is false then set eof of the open_target_file to 0
        write this_data to the open_target_file starting at eof
        close access the open_target_file
        return true
    on error e
        try
            display dialog e
            close access file target_file
        end try
        return false
    end try
end write_to_file 
```

## 如何使用 Applescript 创建或替换文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:56:53.167

您犯的第一个错误是将 POSIX 路径与 HFS 路径混合。posix 路径是 /tmp/test.txt，如果启动卷的名称当然是 Macintosh HD，则同一文件的 hfs 路径将是 Macintosh HD:tmp:test.txt。

```
open for access file "Volume:Path:to:file.txt" 
```

第二个错误是对于 Mac OS X，/tmp 文件夹不是存储临时文件的地方。您需要管理员权限才能在此处写入，系统将提示用户输入用户名和密码。它存储在 /var/folders 中，并且在登录时为每个用户创建一个文件夹，还可以快速切换用户。要访问此文件夹的路径，您应该使用临时项目的命令路径。临时项目将在启动之间被删除。

```
set theFile to (path to temporary items as string) & "test.txt" 
```

第三个错误是当你使用*带引号的形式时，*你可以使用 do shell 脚本。由于 AppleScript 与 shell 一样是 unicode，因此不存在 do shell 脚本无法处理字符的情况。

```
do shell script "/bin/echo -n " & (quoted form of "$@%^&*()@") & " > " POSIX path of theFile 
```

最后，您犯了需要检查文件是否存在的错误。当您使用 open for access 命令时，该文件将在您不存在时创建。因此，您需要的唯一代码是：

```
set theFile to (path to temporary items as text) & "test.txt"
writeToFile(theFile, "Hello!", false)
writeToFile(theFile, (linefeed & "Goodbye!" as string), true)

on writeToFile(p, d, a)
    try
        set fd to open for access file p with write permission
        if not a then set eof of fd to 0
        write d to fd starting at (get eof of fd) as «class utf8»
        close access fd
    on error
        close access file p
    end try
end writeToFile 
```

或使用创建 UTF-8 文件的 do shell 脚本，但给定的路径现在需要是 POSIX 路径

```
set theFile to (path to temporary items as text) & "test.txt"
writeToFile(POSIX path of theFile, "goodbye!", false)
writeToFile(POSIX path of theFile, (linefeed & "hello!" as string), true)

on writeToFile(p, d, a)
    set cmd to "/bin/echo -n " & quoted form of d & " >"
    if a then set cmd to cmd & ">"
    do shell script cmd & space & quoted form of p
end writeToFile 
```

选择你喜欢的那一款

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T05:20:23.220

尝试：

```
my write_to_file("hello", "/tmp/test.txt", true)

on write_to_file(this_data, target_file, append_data)
    try
        tell application "System Events" to exists file target_file
        if not the result then do shell script "> " & quoted form of target_file
        set the open_target_file to open for access target_file with write permission
        if append_data is false then set eof of the open_target_file to 0
        write this_data to the open_target_file starting at eof
        close access the open_target_file
        return true
    on error e
        try
            display dialog e
            close access target_file
        end try
        return false
    end try
end write_to_file 
```

# apache - 如何创建和实施不会在浏览器中发出警告而只是确保安全通信的免费 ssl 证书？

> ID：13676853
> 
> 赞同：1
> 
> 时间：2012-12-03T03:45:48.163
> 
> 标签：apache, openssl, ssl-certificate

这确保了在地址栏中符号化的安全通信。

我有一个 apache 虚拟服务器。我遵循了一些教程，但总是有这个浏览器通知它必须接受证书。即使在接受证书后，页面也不会加载。php 页面本身是完美的，这不是错误的来源。

分享创建自己可以实际使用的证书所需的知识，这意味着不提出“接受证书”或至少在安装证书后工作。如果到目前为止我遇到的教程没有缺陷，我不会在这里写这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:38:42.340

正如 Ken White 在评论中提到的，对于商业用途或部署，私下颁发的证书永远不会是安全的证书。

但是，如果您希望将其用于测试目的，那么您可以尝试在相应的浏览器中安装您的私有证书的“私有 CA 和根”。您应该参考浏览器帮助来了解如何执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T21:21:52.180

您可以生成您的证书，然后让[StartCom](https://www.startssl.com/?app=1)免费将其签名为1 类验证证书。使用 1 类验证证书，您不会在 http 地址栏中看到“绿色”符号，并且证书很少（即您的域名和个人电子邮件），但它确实消除了浏览器安全警告。申请过程比“上流社会”认证要精简得多。看起来你正在寻找类似的东西。

# arrays - 在actionscript 3中每帧移动所有数组对象的x，y位置？

> ID：13676854
> 
> 赞同：1
> 
> 时间：2012-12-03T03:45:50.800
> 
> 标签：arrays, actionscript-3, loops, duplicates

我有我的代码设置，以便我的库中有一个电影剪辑，其中一个名为“block”的类被多次复制并添加到这样的数组中：

```
function makeblock(e:Event){
newblock=new block;
newblock.x=10;
newblock.y=10;
addChild(newblock);
myarray[counter] = newblock; //adds a newblock object into array
counter += 1;
} 
```

然后我有一个循环，用一种当前原始的方式来处理我的问题：

```
 stage.addEventListener(Event.ENTER_FRAME, gameloop);
    function gameloop(evt:Event):void {
        if (moveright==true){
            myarray[0].x += 5;
            myarray[1].x += 5;
            myarray[2].x += 5
              -(and so on)- 
```

我的问题是如何为复制到数组中的新对象以及之前添加的对象更改每帧的 x,y 值。当然，比自己写出更优雅的方式... array[0].x += 5, array[1], array[2], array[3] 等。

理想情况下，我希望一个数组最多有 500 个或更多数组对象，所以显然我不想单独写出来哈哈，我还需要它与性能一致，所以使用 for 循环或其他东西循环通过整个数组并移动每个 x += 5 行不通吗？无论如何，如果有人有任何想法，那就太好了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:51:39.457

如果您必须移动 100 个对象，则必须移动它们。没有其他选择。

但是，您真正可以做的是优化解决方案本身来节省性能。我的几分钱：

*   当然，必须在您的情况下应用循环，逐行管理 100 多个作业绝对不是正确的方法。尽管仅使用循环就不会获得任何性能。

*   尝试对对象进行分组。正如我在上面看到的，您似乎正在以相似的增量移动所有这些对象。将它们全部分组到更大的电影剪辑（或[Sprites](http://livedocs.adobe.com/flash/9.0/ActionScriptLangRefV3/flash/display/Sprite.html)）中，然后将其移动。

*   学习[Blitting 和缓存](http://www.adobe.com/devnet/flash/articles/blitting_mc.html)方法以节省大量性能，否则您迟早会走上无法再扭曲逻辑的道路，而性能将是痛苦的。

*   此外，在上一步的范围内，如果同一对象有多个状态，请考虑使用[Sprite Sheets 。](http://www.adobe.com/devnet/flex/articles/actionscript_blitting.html)

最后，我还想提醒您不要浪费时间在微优化上并考虑它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:57:47.577

您可以使用一些容器精灵并在创建时将块添加到其中：

```
// Some init place
var blockContainer:Sprite = new Sprite();
addChild(blockContainer); 
```

制作积木：

```
function makeblock(e:Event){
    newblock=new block;
    newblock.x=10;
    newblock.y=10;
    // Add the block to the container
    blockContainer.addChild(newblock);
    myarray[counter] = newblock; //adds a newblock object into array
    counter += 1;
} 
```

还有游戏循环：

```
stage.addEventListener(Event.ENTER_FRAME, gameloop);

function gameloop(evt:Event):void {
    if (moveright==true){
         blockContainer.x += 5;
    }
    // etc...
} 
```

这样，您只需移动一个对象。当然，这种方法只有在所有块都需要向同一方向移动时才有效。顺便说一句，for 循环也可以正常工作——500 次迭代算不了什么。唯一的性能问题可能只是渲染，无论您选择哪种方法都会发生这种情况，因为您必须以某种方式移动块（换句话说，这里的性能并不是真正的问题，因为您必须渲染移动更改，唯一的问题是您如何选择实现运动以方便您自己的编码）。

# web-applications - 将我的网站交付给网页设计师进行工作的最佳方式是什么？

> ID：13676855
> 
> 赞同：1
> 
> 时间：2012-12-03T03:46:02.130
> 
> 标签：web-applications

我正在接近完成一个我已经构建了很长一段时间的 Web 应用程序，主要是在 PHP 中。我打算将网站的设计（html、css）外包给 elance 的设计师。由于这是我第一次，我有一些问题要确保过程顺利进行。

1.  将网站交付给他们工作的最佳方式是什么？该站点的某些方面执行 shell 命令并且需要我的 mysql 数据库才能访问。为了让他们设计网站，他们需要访问这些页面。实现这一目标的最佳方法是什么？我应该将它放在我的网络服务器上并允许他们在实时站点上工作吗？如果重要的话，我在 Ubuntu 上运行本地服务器，并在我的 Linode 服务器上设置了颠覆设置。

2.  大多数设计师是否熟悉 PHP 并能够整理代码来设计网站？

3.  对于从未外包过网站设计的人，还有什么其他建议吗？该网站可能有 100 页，其中许多具有非常相似的结构。让他们为每个结构提供 CSS/HTML，然后自己在网站的其余部分实施是否更具成本效益？

非常感谢你的帮助。我很乐意提供任何需要的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T21:40:32.230

我认为实际上最好让他们使用您提供的信息（可能是不同页面的一些打印屏幕和其他规范）进行设计本身，这样他们就可以有上下文，然后您将 HTML/CSS 等应用到页面你自己。这可能是最好的方法，尤其是如果您不希望陌生人与他们一起拥有您网站的“副本”...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T17:10:08.370

我想这很大程度上取决于您希望外包给谁。它将成为一家设计公司、一个设计师、一家拥有设计师和开发人员的公司吗？在大多数管道中，站点是在开发之前设计的，因此这可能是一个倒退的过程。但这只是从我有限的角度来看。

对于您的每个问题，这将取决于设计师。如果你愿意付出更多，你可以找到一个优秀的设计师并且知道 HTML/CSS（甚至 PHP），但如果资金有限，可能很难找到一个在这两个方面都非常出色的人。支付更多费用，您可能会让他们访问您迄今为止所做的事情并让他们参与其中。

如果你选择更便宜的路线，最简单的方法可能是简单地与设计师坐下来，尽可能多地给他们提供信息，然后让他们在 Photoshop 之类的模型上工作。然后，您可以定期迭代他们的设计，直到您满意为止，完成后自己实现所有与代码相关的内容。这将需要您更多的工作和时间，但肯定会花费更少。

因此，根据您的方法，有几种方法可以解决。希望这会有所帮助，但如果您有任何其他问题，请告诉我。

# ios - 从另一个应用程序在 Apple 的时钟应用程序中设置新闹钟

> ID：13676858
> 
> 赞同：10
> 
> 时间：2012-12-03T03:46:11.757
> 
> 标签：ios, clock, alarm

我搜索了这方面的参考资料，并找到了一些预告片，但没有什么全面的。

我正在寻找一种方法来从一个新的（自行创建的）应用程序中在实际的 IOS 闹钟应用程序中设置（并且可能删除，虽然不是绝对必要）一个新的闹钟。

基本上，我正在创建的应用程序将以编程方式向时钟应用程序添加一个新闹钟（设置时间，包括选择铃声），然后它会像往常一样简单地运行——使内置闹钟响起时间到了。

任何人都可以具体指出有助于实现这一目标的 API 吗？

我确实找到了对 CFPreferences API 的引用，这些似乎意味着能够为其他应用程序设置首选项。这听起来很接近，但显然我需要更多信息，特别是：

1) 时钟应用程序的捆绑包/应用程序 ID 2) 使用该首选项设置添加（或删除）新警报的格式和细节

有没有人可以提供任何智慧？

非常感谢，斯科特赫德

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T03:54:41.000

这种行为是不可能的，抱歉。您可以通过您的应用程序设置具有自定义音调的警报并通过您的应用程序处理它们，这些称为本地通知，但无法将警报添加到 ios 闹钟。

# r - writeClipboard 用于矩阵或数据帧？

> ID：13676862
> 
> 赞同：16
> 
> 时间：2012-12-03T03:46:53.220
> 
> 标签：r, matrix, dataframe, clipboard

[`writeClipboard`](http://www.inside-r.org/r-doc/utils/writeClipboard)适用于原始或字符向量。有什么可以让我将 matrix/data.frames 放入剪贴板的吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T03:57:47.807

我认为`write.table`这个`file = "clipboard"`论点会起作用。这是一个例子：

```
write.table(mtcars, "clipboard", sep="\t", row.names=FALSE) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-16T13:59:08.020

一个不错的独立于操作系统的解决方案是：

```
library(clipr)
clipr::write_clip(mtcars) 
```

但也可能受到尺寸限制。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-24T16:15:36.000

如果您的桌子稍大一点，上述答案大多是错误的。

```
Warning message:
In .External2(C_writetable, x, file, nrow(x), p, rnames, sep, eol,  :
  clipboard buffer is full and output lost 
```

黑客修复是这样的：

```
writeClipboard(knitr::kable(d)) 
```

# javascript - 回调中的 Javascript 回调

> ID：13676863
> 
> 赞同：0
> 
> 时间：2012-12-03T03:47:26.657
> 
> 标签：javascript, ajax, google-maps-api-3

我对为什么我从来没有点击过`GETNEARCALLBACK`下面的功能感到困惑。逻辑是这样的：

1.  在页面加载时我调用`INITIALIZE`
2.  `INITIALIZE`愉快地执行和调用`GETSTATIONS`
3.  `GETSTATIONS`使用回调函数执行 AJAX 请求`GETNEARESTSTAIONS`，Web 服务器以 JSON 格式的数据库查询结果进行响应。
4.  `GETNEARESTSTAIONS``GETNEARCALLBACK`获取结果并使用回调函数创建一个 Google Maps API 距离矩阵请求
5.  我运行我的站点并使用 Firebug 确定我永远不会访问`GETNEARCALLBACK`.

我认为我对 Google Maps API 的使用是正确的，因为如果我不在`GETNEARESTSTATIONS`我的 AJAX 请求中调用，它就会正确执行。

函数初始化（）{ GETPOSITION（）；绘图（）；GETADDR(); GETSTATIONS(); }

```
var xmlhttp;

function GETSTATIONS() {
  if(window.XMLHttpRequest) {
    xmlhttp = new XMLHttpRequest();
  } else {
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
  }
  xmlhttp.onreadystatechange = GETNEARESTSTATION();
  xmlhttp.open("GET", "final.php", true);
  xmlhttp.send();
}

var STATIONLIST;

function GETNEARESTSTATION() {
  if(xmlhttp.readyState == 4 && xmlhttp.status == 200) {
    STATIONLIST = eval("(" + xmlhttp.responseText + ")");
    var LAT = parseFloat(document.getElementById("LATITUDE").value);
    var LON = parseFloat(document.getElementById("LONGITUDE").value);
    var latlng = new google.maps.LatLng(LAT, LON);
    var destinationA = STATIONLIST[0].ADDRESS;
    var service = new google.maps.DistanceMatrixService();
    service.getDistanceMatrix({
      origins: [latlng],
      destinations: [destinationA],
      travelMode: google.maps.TravelMode.DRIVING,
      unitSystem: google.maps.UnitSystem.IMPERIAL,
      avoidHighways: false,
      avoidTolls: false
    }, GETNEARCALLBACK);
  }
}

function GETNEARCALLBACK(response, status) {
  if(status == google.maps.DistanceMatrixStatus.OK) {
    var destinations = response.destinationAddresses;
    var results = response.rows[0].elements;
    for(var j = 0; j < results.length; j++) {
      var element = results[j];
      document.getElementById("STATIONADDR").innerHTML = parseFloat(element.distance.value) + " " + response.destinationAddresses[j];
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:06:49.120

需要函数变量，而不是函数返回值

```
//xmlhttp.onreadystatechange = GETNEARESTSTATION(); //error
xmlhttp.onreadystatechange = GETNEARESTSTATION; 
```

# mongodb - 流星应用程序关于 vagrant share 的问题

> ID：13676868
> 
> 赞同：4
> 
> 时间：2012-12-03T03:48:14.560
> 
> 标签：mongodb, meteor, nfs, vagrant

我有一个带有流星的流浪虚拟机（虚拟机）设置。我的主人和客人都是 Ubuntu。VM 包含通过 Vagrantfile 设置的 vboxfs 共享文件夹。我注意到的行为类似于 NFS 挂载。

我可以在这个共享文件夹中创建一个流星项目，但是当我运行该项目时，我得到指向 mongodb 的错误。

如果我按照 [https://github.com/pixelhandler/vagrant-dev-env/blob/master/README.md](https://github.com/pixelhandler/vagrant-dev-env/blob/master/README.md)上的说明进行操作， 我的应用程序就可以正常工作。

经过进一步调查，似乎 MongoDB 不适用于 NFS 共享，[http://www.mongodb.org/display/DOCS/NFS](http://www.mongodb.org/display/DOCS/NFS)

有没有其他人遇到过这个问题？如果是这样，您是否找到了（非 rsync）解决方案？

我打算将这个问题的链接发送到 10gen，也许他们团队中的某个人可以回答它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T01:55:33.230

不确定 Mongo 计划在 NFS/vboxfs 上重新运行什么，但您可以通过在共享文件夹中运行您自己的 MongoDB 来解决此问题（例如，使用 ubuntu mongodb 包）。使用`MONGO_URL`环境变量告诉meteor 在哪里连接。如果你传递这个变量，meteor 将不会尝试在 meteor 项目目录中启动 MongoDB。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-13T10:00:26.107

您可以将数据目录移动到 VM 内的某个位置，并使用 vagrant 文件夹中的符号链接：

```
cd /vagrant/.meteor/local
ln -s ~/db/

```

这意味着数据不会被共享，但你可能希望它被 git 忽略。

（[https://grahamrhay.wordpress.com/2013/06/18/running-meteor-in-a-vagrant-virtualbox/](https://grahamrhay.wordpress.com/2013/06/18/running-meteor-in-a-vagrant-virtualbox/)）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T10:39:18.687

grahamrhay 的解决方案不适用于在 Windows 上启动的 vagrant box。没有办法在 windows 上为 vagrant 创建符号链接，至少对于管理员帐户来说是这样。

# ios - 如何删除 UIToolbar 按钮图标上的阴影？

> ID：13676870
> 
> 赞同：1
> 
> 时间：2012-12-03T03:48:19.967
> 
> 标签：ios, uibarbuttonitem, uitoolbar, shadow

如何在 UIToolbar 上的 UIBarButtonItem 上移除图标的阴影？

这是我的意思的图像：

![在此处输入图像描述](../Images/fc7a3df05c75436bf47ae4c88adff0f7.png)

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T03:57:27.987

`UIBarButtonItem`这是当您使用其中一个系统项来创建按钮时呈现a 的标准方式。

如果您想要不同的外观，您需要使用自己的图像和`UIButton`. `UIBarButtonItem`用方法创建`initWithCustomView:`。当你这样做时，你将失去“发光”效果。要取回它，您需要设置`showsTouchWhenHighlighted`.`UIButton`

# java - Java 编译器找不到我的 Scanner 变量

> ID：13676874
> 
> 赞同：1
> 
> 时间：2012-12-03T03:49:31.260
> 
> 标签：java

```
import java.io.*;
import java.util.*;

class Read
{
    public static void main(String args[])
    {
        try {
        Scanner scan = new Scanner(new java.io.File("textfile.txt"));
        } catch (FileNotFoundException e){
        }        
        while(scan.hasNext()){
        String line = scan.nextLine();
        String[] elements = line.split(",");
        }
    }
} 
```

为什么我会得到

```
error: cannot find symbol
        while(scan.hasNext()){
              ^
  symbol:   variable scan 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T03:50:59.373

问题在于范围。您可以在块之外*声明对象，并在其中**实例化*它。`Scanner``try...catch`

 *当然，您也可能希望将所有依赖于`Scanner`实例化的 I/O 操作放入其中`try...catch`，否则您以后会遇到问题。

例子：

```
public static void main(String[] args) {
    Scanner scan = null;
    try {
        scan = new Scanner(new File("textfile.txt"));
        // other I/O operations here including anything that uses scan
    } catch (FileNotFoundException e) {
        System.out.println("helpful error message", e);
    }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T03:52:06.147

你`scan`应该在`try-catch`块外声明，或者你可以把`while`循环放在`try-catch`块中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T03:54:34.590

更改了 where 循环的位置。

```
import java.io.*;
import java.util.*;

class Read
{
    public static void main(String args[])
    {
        try {
        Scanner scan = new Scanner(new java.io.File("textfile.txt"));
         while(scan.hasNext()){
          String line = scan.nextLine();
          String[] elements = line.split(",");
         }
        } catch (FileNotFoundException e){
           e.printStackTrace();
        }        
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-03T03:53:30.520

试试这个代码

```
import java.io.*;
import java.util.*;

class Read
{
public static void main(String args[])
{
    Scanner scan=null;
    try 
    {
       scan = new Scanner(new java.io.File("textfile.txt"));
       while(scan!=null)
       {
        String line = scan.nextLine();
        String[] elements = line.split(",");
       }
    } catch (FileNotFoundException e){ }        
}
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-03T03:54:58.263

```
class Read
{
    private static final String TEXT_FILE = "textfile.txt";

    public static void main(String args[])
    {
        // BAD
        try {
          Scanner scan = new Scanner(new java.io.File("textfile.txt"));
        } 
        catch (FileNotFoundException e) {
          ; // Eating exceptions - a bad habit :(
        }        
        while(scan.hasNext()){
          String line = scan.nextLine();
          String[] elements = line.split(",");
        }
    }
} 
```

相比之下 ...

```
class Read
{
    public static void main(String args[])
    {
        // Good
        try {
          Scanner scan = new Scanner(new java.io.File(TEXT_FILE));
          while(scan.hasNext()){
            String line = scan.nextLine();
            String[] elements = line.split(",");
          }
        } 
          catch (FileNotFoundException e){
            System.out.println ("Error parsing " + TEXT_FILE + ": " + e.getMessage());
        }        
    }
} 
```*

# php - Jquery autosuggestion 使用 Case 继续搜索

> ID：13676875
> 
> 赞同：0
> 
> 时间：2012-12-03T03:49:38.730
> 
> 标签：php, javascript, jquery, html

我有一个 jquery 搜索建议。该功能运行正常。但现在我想要功能检测继续搜索。

示例：我想搜索姓名 David，我在文本框中输入文本：Da。并会显示名称建议。现在，如果我单击每个位置，div 框建议将关闭对吗？这里是我想要的，当我再次点击文本框搜索时，它会显示我上次输入的 div 框建议，如下所示：Da

到目前为止，这是 JS 代码：

```
$(document).ready(function() {
    $(".searchs").keyup(function() {
        var searchbox = $(this).val();
        var dataString = 'searchword=' + searchbox;
        if (searchbox == '') {
            $("#display").hide();
        } else {
            $.ajax({
                type: "POST",
                url: "searchs.php",
                data: dataString,
                cache: false,
                success: function(html) {
                    $("#display").html(html).show();
                }
            });
        }
        return false;
    });
    $(".searchs").blur(function() {
        $("#display").hide();
    });
}); 
```

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:27:39.770

如果文本框中有文本，以下是当用户单击文本框时如何显示建议 div。

```
$(".searchs").focus(function()
{
  var seachbox = $(this).val(); /*note, you will need to change $(this) to the proper selector of your textbox*/
  if(seachbox != '')
  {
    $("#display").show();
  }
}); 
```

# internet-explorer - 混合内容 IE 8 与 IE9

> ID：13676876
> 
> 赞同：2
> 
> 时间：2012-12-03T03:49:49.653
> 
> 标签：internet-explorer, https

IE8 处理混合内容的方式与 IE9 有区别吗？我正在查看一个遗留的 DotNetNuke https 站点。当我使用 IE 8 访问 https 站点时，我会收到混合内容警告消息，但是当我使用 IE9 浏览 https 站点时，我没有收到混合内容警告弹出窗口。两个浏览器中的显示混合内容设置已设置为提示。我总是在加载整个页面后看到提示，无论我在混合内容警告中选择是还是否，我都会在页面上看到相同的内容。

有谁知道为什么我在 IE8 和 IE9 中看到不同的行为？任何其他浏览器设置是否会影响是否向用户显示混合内容警告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T09:31:13.550

关于混合内容的行为应该是相同的。但是，不一样的是页面加载的文档模式。您能否确认触发混合模式警告的内容实际上是在 IE9 模式下通过 HTTP 加载的？请注意，对于您的方案，任何嵌套文档的文档模式也可能不同（即：iframe）。

你应该可以通过开发工具栏检查这些东西。

# r - 从矩阵中的每一列中获取 Min 的最快方法？

> ID：13676878
> 
> 赞同：12
> 
> 时间：2012-12-03T03:50:15.577
> 
> 标签：r, matrix, benchmarking, min

从矩阵中的每一列中提取最小值的最快方法是什么？

* * *

## 编辑：

将所有基准移至以下答案。

### 使用高、短或宽矩阵：

```
 ##  TEST DATA
  set.seed(1)
  matrix.inputs <- list(
        "Square Matrix"     = matrix(sample(seq(1e6), 4^2*1e4, T), ncol=400),   #  400 x  400
        "Tall Matrix"       = matrix(sample(seq(1e6), 4^2*1e4, T), nrow=4000),  # 4000 x   40
        "Wide-short Matrix" = matrix(sample(seq(1e6), 4^2*1e4, T), ncol=4000),  #   40 x 4000
        "Wide-tall Matrix"  = matrix(sample(seq(1e6), 4^2*1e5, T), ncol=4000),   #  400 x 4000
        "Tiny Sq Matrix"    = matrix(sample(seq(1e6), 4^2*1e2, T), ncol=40)     #   40 x   40
  ) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-03T03:53:31.900

该`sos`软件包非常适合回答此类问题。

```
library("sos")
findFn("colMins")
library("matrixStats")
?colMins 
```

[http://finzi.psych.upenn.edu/R/library/matrixStats/html/rowRanges.html](http://finzi.psych.upenn.edu/R/library/matrixStats/html/rowRanges.html)

奇怪的是，对于我尝试的一个示例来说，`colMins`速度*较慢*。也许有人可以指出我的例子有什么好笑的？

```
set.seed(101); z <- matrix(runif(1e6),nrow=1000)
library(rbenchmark)
benchmark(colMins(z),apply(z,2,min))
##               test replications elapsed relative user.self sys.self
## 2 apply(z, 2, min)          100  14.290     1.00     7.216    7.057
## 1       colMins(z)          100  25.585     1.79    15.509    9.852 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-03T12:13:59.050

这是一种在方形和宽矩阵上速度更快的方法。它用于`pmin`矩阵的行。（如果您知道将矩阵拆分为行的更快方法，请随时编辑）

```
do.call(pmin, lapply(1:nrow(mat), function(i)mat[i,])) 
```

使用与@RicardoSaporta 相同的基准：

```
$`Square Matrix`
          test elapsed relative
3 pmin.on.rows   1.370    1.000
1          apl   1.455    1.062
2         cmin   2.075    1.515

$`Wide Matrix`
      test elapsed relative
3 pmin.on.rows   0.926    1.000
2         cmin   2.302    2.486
1          apl   5.058    5.462

$`Tall Matrix`
          test elapsed relative
1          apl   1.175    1.000
2         cmin   2.126    1.809
3 pmin.on.rows   5.813    4.947 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-10-09T03:45:16.927

*2014 年 12 月 17 日更新*：

`colMins()`等。在最近版本的[matrixStats](http://cran.r-project.org/package=matrixStats)中显着加快了速度。这是使用 matrixStats 0.12.2 更新的基准测试摘要，显示它（“cmin”）比第二快的方法快约 5-20 倍：

```
$`Square Matrix`
     test elapsed relative
2    cmin   0.216    1.000
1     apl   4.200   19.444
5 pmn.int   4.604   21.315
4     pmn   5.136   23.778
3    lapl  12.546   58.083

$`Tall Matrix`
     test elapsed relative
2    cmin   0.262    1.000
1     apl   3.006   11.473
5 pmn.int  18.605   71.011
3    lapl  22.798   87.015
4     pmn  27.583  105.279

$`Wide-short Matrix`
     test elapsed relative
2    cmin   0.346    1.000
5 pmn.int   3.766   10.884
4     pmn   3.955   11.431
3    lapl  13.393   38.708
1     apl  19.187   55.454

$`Wide-tall Matrix`
     test elapsed relative
2    cmin   5.591    1.000
5 pmn.int  39.466    7.059
4     pmn  40.265    7.202
1     apl  67.151   12.011
3    lapl 158.035   28.266

$`Tiny Sq Matrix`
     test elapsed relative
2    cmin   0.011    1.000
5 pmn.int   0.135   12.273
4     pmn   0.178   16.182
1     apl   0.202   18.364
3    lapl   0.269   24.455 
```

*先前评论 2013-10-09*：
仅供参考，因为 matrixStats v0.8.7 (2013-07-28)，`colMins()`速度大约是以前的两倍。原因是先前使用的函数`colRanges()`，这解释了此处报告的“令人惊讶的缓慢”结果。和`colMaxs()`的速度相同。`rowMins()``rowMaxs()`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-03T04:35:11.070

```
lapply( split(mat, rep(1:dim(mat)[1], each=dim(mat)[2])), min)

which( ! apply(my.mat, 2, min, na.rm=T) ==
        sapply( split(my.mat, rep(1:dim(my.mat)[1], each=dim(my.mat)[2])), min) )
# named integer(0) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T21:27:17.417

以下是迄今为止的答案集合。随着更多答案的贡献，这将被更新。

## 基准

```
 library(rbenchmark)
  library(matrixStats)  # for colMins

  list.of.tests <- list (
        ## Method 1: apply()  [original]
        apl =expression(apply(mat, 2, min, na.rm=T)),

        ## Method 2:  matrixStats::colMins [contributed by @Ben Bolker ]
        cmin = expression(colMins(mat)),

        ## Method 3: lapply() + split()  [contributed by @DWin ]
        lapl = expression(lapply( split(mat, rep(1:dim(mat)[1], each=dim(mat)[2])), min)),

        ## Method 4: pmin() / pmin.int()  [contributed by @flodel ]
        pmn = expression(do.call(pmin, lapply(1:nrow(mat), function(i)mat[i,]))),
        pmn.int = expression(do.call(pmin.int, lapply(1:nrow(mat), function(i)mat[i,]))) #,

        ## Method 5: ????
        #  e5 = expression(  ???  ),
        )  

  (times <- 
        lapply(matrix.inputs, function(mat)
            do.call(benchmark, args=c(list.of.tests, replications=500, order="relative"))[, c("test", "elapsed", "relative")]
  ))

  ############################# 
  #$         RESULTS         $#
  #$_________________________$#
  #############################

  # $`Square Matrix`
  #      test elapsed relative
  # 5 pmn.int   2.842    1.000
  # 4     pmn   3.622    1.274
  # 1     apl   3.670    1.291
  # 2    cmin   5.826    2.050
  # 3    lapl  41.817   14.714  

  # $`Tall Matrix`
  #      test elapsed relative
  # 1     apl   2.622    1.000
  # 2    cmin   5.561    2.121
  # 5 pmn.int  11.264    4.296
  # 4     pmn  18.142    6.919
  # 3    lapl  48.637   18.550  

  # $`Wide-short Matrix`
  #      test elapsed relative
  # 5 pmn.int   2.909    1.000
  # 4     pmn   3.018    1.037
  # 2    cmin   6.361    2.187
  # 1     apl  15.765    5.419
  # 3    lapl  41.479   14.259  

  # $`Wide-tall Matrix`
  #      test elapsed relative
  # 5 pmn.int  20.917    1.000
  # 4     pmn  26.188    1.252
  # 1     apl  38.635    1.847
  # 2    cmin  64.557    3.086
  # 3    lapl 434.761   20.785  

  # $`Tiny Sq Matrix`
  #      test elapsed relative
  # 5 pmn.int   0.112    1.000
  # 2    cmin   0.149    1.330
  # 4     pmn   0.174    1.554
  # 1     apl   0.180    1.607
  # 3    lapl   0.509    4.545 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-25T22:08:01.570

`mat[(1:ncol(mat)-1)*nrow(mat)+max.col(t(-mat))]`看起来相当快，而且它是基础 R。

# java - 对象实例化时间是否取决于其大小？

> ID：13676891
> 
> 赞同：0
> 
> 时间：2012-12-03T03:52:15.617
> 
> 标签：java, microbenchmark

我们知道对象的大小取决于它的字段类型。但是对象实例化时间是否取决于其字段类型？看我的测试

```
public class Test {
    byte f1;
    byte f2;
    byte f3;
    byte f4;
    byte f5;
    byte f6;
    byte f7;
    byte f8;
    byte f9;
    byte f10;

    public static void main(String[] args) {
        int n = 1000000;
        Test[] a = new Test[n];
        long t0 = System.currentTimeMillis();
        for(int i = 0; i < n; i++) {
            a[i] = new Test();
        }
        System.out.println(System.currentTimeMillis() - t0);
    }
} 
```

也许不是一流的，对于不同的字段类型仍然给我相当稳定的结果：

```
byte - 125 ms
int  - 250 ms
long - 370 ms 
```

这是为什么？我在笔记本（Celeron 925）上从 Eclipse 运行它，它需要 -Xmx1024M。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:04:07.783

**较大**的类型将需要**更多时间**，因为操作系统必须在**HEAP中****搜索**合适的内存量以适应该类型。所以类型越大，通常需要更多的时间。

 **大多数时候**对象实例化时间与字段类型成正比****

# jquery - EaselJS 拖拽动作不流畅

> ID：13676892
> 
> 赞同：0
> 
> 时间：2012-12-03T03:52:19.237
> 
> 标签：jquery, html, canvas, html5-canvas, easeljs

[我刚开始尝试 EaselJS，我的第一次尝试是在https://github.com/CreateJS/EaselJS/blob/master/examples/DragAndDrop.html](https://github.com/CreateJS/EaselJS/blob/master/examples/DragAndDrop.html)的拖放示例之后加载 jpeg 图像

**问题：**当我试图拖动一个对象时，拖动的动作非常不稳定且不流畅！为什么是这样？

我试过`stage.enableMouseOver(50);`了，但还是一样。它不像[这个](http://www.html5canvastutorials.com/kineticjs/html5-canvas-drag-and-drop-tutorial/)使用 KineticJS 的例子那么流畅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-26T17:42:54.633

我通常在移动和桌面网络应用程序上使用以下公式，这还不错。仅当显示对象包含许多其他文本和显示对象时，我才会遇到一些性能问题。

这是一个启用拖放到已加载位图的示例。

```
var canvas;
var stage;  

init = function () {

    canvas = document.getElementById("canvas");
    stage = new createjs.Stage(canvas);
    displayPicture ("YOUR PATH");
}

displayPicture = function (imgPath) {

    var image = new Image();

    image.onload = function () {

        // Create a Bitmap from the loaded image
        var img = new createjs.Bitmap(event.target)

        // scale it
        img.scaleX = img.scaleY = 0.5;

        /// Add to display list
        stage.addChild(img);

        //Enable Drag'n'Drop
        enableDrag(img);

        // Render Stage
        stage.update();

    }

    // Load the image
    image.src = imgPath;
}

enableDrag = function (item) {

    // OnPress event handler
    item.onPress = function(evt) {

        var offset = {  x:item.x-evt.stageX,
                        y:item.y-evt.stageY};

        // Bring to front
        stage.addChild(item);

        // Mouse Move event handler
        evt.onMouseMove = function(ev) {

            item.x = ev.stageX+offset.x;
            item.y = ev.stageY+offset.y;
            stage.update();
        }
    }
}

init() 
```

# php - 使用来自 iOS 的 POST 将数组传递给 PHP

> ID：13676893
> 
> 赞同：7
> 
> 时间：2012-12-03T03:52:18.987
> 
> 标签：php, ios, post

因此，我浏览了无数类似的问题，但没有一个回答我正在寻找的内容或以完整的方式回答它，所以希望大家能帮助我。

我需要使用 POST 将一系列餐厅 ID 从 iOS 传递到 PHP 文件，或者无论如何都可以正常工作。我知道 ASIHTTPRequest 但我正在寻找内置的东西，它已被开发人员放弃。最后，我不想通过 URL 传递它们，因为我不知道会有多少条目。

所以这就是我到目前为止所得到的。

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:theURL]];

[request setHTTPMethod:@"POST"];

NSMutableDictionary *jsonDict = [[NSMutableDictionary alloc] init];
[jsonDict setValue:restaurants forKey:@"restIDs"];
NSLog(@"JSON Dict: %@",jsonDict);//Checking my array here

NSData *jsonData = [NSJSONSerialization dataWithJSONObject:jsonDict options:kNilOptions error:nil];
NSString *jsonString = [[NSString alloc] initWithData:jsonData encoding:NSUTF8StringEncoding];
NSLog(@"JSON String: %@",jsonString); //Checking my jsonString here...

[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

[request setValue:@"json" forHTTPHeaderField:@"Data-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [jsonData length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody: jsonData];
NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
NSLog(@"Return DATA contains: %@", [NSJSONSerialization JSONObjectWithData:returnData options:NSJSONReadingMutableContainers error:nil]);
NSArray *restMenuCount = [NSJSONSerialization JSONObjectWithData:returnData options:NSJSONReadingMutableContainers error:nil]; 
```

因此，从这一端开始，我检查了一切，一切看起来都很好，但从 PHP 端它甚至没有捡起它。

这是我的 PHP 文件的样子：

```
$restIDs = $_POST['restIDs'];
echo $restIDs; //Checking to see if it even has anything......but nothing there
for ($i = 0; $i < $restIDs.count; $i++) {
    $query = "SELECT * FROM `MenuItems` WHERE rest_id = '$restID'";
    $result = mysqli_query($connect, $query);
    $number = mysqli_num_rows($result);
    $menuNumber[$i] = $number;
}

echo json_encode($menuNumber); 
```

所以最后，我做错了什么？为什么我的 PHP 端没有收到任何东西。最重要的是，有人可以向我解释如何通过 POST 发送数组。因为我觉得这是我真正的问题，所以我对它的理解不足以自己解决问题。我不明白您如何将所有内容从 iOS 端放入并在 PHP 端提取。

我希望所有这些都足够清楚，在此先感谢。

**编辑：**
我尝试通过 URL 将数组作为字符串传递，然后将其分解，幸运的是它起作用了......但我只是在 URL 限制之下，所以我仍然想找出另一个解决方案。至少，现在我知道我的其余代码按预期工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T04:21:16.650

您似乎对如何`$_POST`填充变量有一个基本的误解。将文档类型指定为 JSON 并将 JSON 字符串作为帖子正文放入将不会自动填充此数组。正文必须采用特定格式。通常，这意味着 url 编码的对，例如`a=1&b=2&c=2&d=%2fg+y`等。这在一定程度上限制了您可以发送的数据类型。特别是，如果您希望它自动显示在 $_POST 变量中，那么从这个意义上说，任意 JSON 对象是不可能的。这里有几个选项：

`$_POST`选项一：直接使用帖子正文，而不是使用。使用 PHP JSON 解析器使用`fopen("php://input")`和解析它：

```
$input = file_get_contents("php://input");
$obj = json_decode($input,true);
$restIDs = $obj['restIDs']; 
```

如果你走这条路，你不需要创建一个带有一个名为的字段的对象`restIDs`。您可以改为简单地序列化数组并`$obj`用作`$restIDs`

选项二，假设您在 restIDs 中的对象只是字符串，而不是将数据作为 JSON 对象传递，请按照 PHP 使用的方式格式化正文：

```
NSMutableString *bodyStr = [NSMutableString string];
for (NSString *restID in restaurants) {
    [bodyStr appendFormat:@"restIDs[]=%@&",[restID stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
}
NSData *body = [bodyStr dataUsingEncoding:NSUTF8StringEncoding];
[request setHTTPBody: body]; 
```

现在您应该可以`$_POST['restIDs']`按照您的预期使用它了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:26:15.843

您传递的数组错误。首先你把它放在一个 JSON 字符串中，然后你没有把 JSON 字符串放在 post 变量中，而是作为 HTML 消息的正文。如果要使用 JSON 通过 POST 消息将数据传输到 PHP，则需要将其设置为 post 变量。然后在 PHP 中，读取变量并解码 json 以获得原始变量。这是我如何做到的一个例子。

抱歉，我最初在这里粘贴了 Java 代码。这可能更有意义。

```
-(void) setPath: (NSString *) input
{
    Path=input;
}

-(void) run
{
    NSDictionary* jsonDictionary=[NSDictionary dictionaryWithObject: data1 forKey:@"data"];
    NSString* jsonString = [jsonDictionary JSONRepresentation];
    AFHTTPClient *httpClient=[[AFHTTPClient alloc] initWithBaseURL:url];
    NSDictionary *params =[NSDictionary dictionaryWithObjectsAndKeys:
                           apps,@"app",
                           jsonString,@"smpdata",nil];
    NSMutableURLRequest *request = [httpClient requestWithMethod:@"POST" path:Path parameters:params];

    NSURLResponse *response = nil;
    NSError *error = nil;

    NSData *data=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

    if (error) {
        NSLog(@"Error: %@",error);
    }
    else {
        id JSON = AFJSONDecode(data, &error);
        NSArray *dataarray=[JSON valueForKey:@"Data"];
        status= [NSString stringWithFormat:@"%@",[JSON valueForKeyPath:@"Status"]];
        NSLog(@"%@",status);
        returndata= dataarray;

    }
}

-(NSArray *) returndata {
    return returndata;
}

-(NSString *) status {
    return status;
}

@end 
```

PHP

```
<?
$jsondata=$_POST['smpdata'];
$data = json_decode($jsondata);
?> 
```

# php - 如何为获取和发布使用相同的操作/模板？

> ID：13676895
> 
> 赞同：1
> 
> 时间：2012-12-03T03:52:54.460
> 
> 标签：php, templates, symfony-1.4

我有一个 Symfony 1.4 应用程序，我继承了它来维护和更新。我无法理解/弄清楚的一件事是如何为加载和帖子使用相同的模板/动作名称。

来自 Struts2 背景，我可以为这两种方法重用相同的操作，但有一个指向“输入”方法的 get 点，而 post 将指向一个“执行”方法。但我似乎在 Symfony 中找不到类似的工作流程。

假设 get 和 post 都使用相同的模板，并且我想使用相同的操作名称，我如何为每种类型指定不同的方法名称？

例如，对于登录表单，我想创建一个登录操作，使用基本上显示模板的“输入”方法，提交后，它将转到执行方法以在重定向或重新显示表单之前验证数据与错误。

我意识到我可以在我的执行方法顶部放置一个 if ($request->isMethod('POST')) ，但我认为必须有一个更好/更传统的方法来做到这一点。我认为 symfony 中一定有一些东西可以做到这一点，但我只是没能找到它。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:00:40.720

您正在寻找的是路由。你可以在 Symfony 中路由 HTTP 请求方法。

这是文档：[http ://symfony.com/legacy/doc/reference/1_4/en/10-Routing](http://symfony.com/legacy/doc/reference/1_4/en/10-Routing)

您想要做的一个示例的结构如下：

```
login_input:
    url:  /login
    class: sfRequestRoute
    param: { module: login, action: input }
    requirements: { sf_method: get }

login_execute:
    url:  /login
    class: sfRequestRoute
    param: { module: login, action: execute }
    requirements: { sf_method: post } 
```

# sql - Java PreparedStatement 无法执行 MySQL 插入语句

> ID：13676896
> 
> 赞同：1
> 
> 时间：2012-12-03T03:52:58.017
> 
> 标签：sql, jdbc, prepared-statement

我正在尝试使用 Java 中的 PreparedStatement 将新用户插入数据库。我创建了一个格式正确的 SQL 语句，但由于某种原因，在调用 executeUpdate(); 时创建了一个错误；

```
DatabaseConnection dbconnection = DatabaseConnection.getInstance();
Connection con = dbconnection.getConnection();
PreparedStatement pstmt; // Prepare Statement automatically sanitizes inputs
    try {
        pstmt = con.prepareStatement("INSERT INTO " + TABLE_NAME + " (" + USERNAME + ", " + PASSWORD_HASH + ", " + EMAIL + ") VALUES (?, ?, ?)");
        pstmt.setString(1, username); // (these are parameters)
        pstmt.setString(2, passwordHash);
        pstmt.setString(3, email);

        System.out.println(pstmt.toString());

        int updateCount = pstmt.executeUpdate();
        System.out.println("Updated: " + updateCount);

        if (updateCount == 0) return false;
        return true;

    } catch (SQLException e) {
        System.out.println("Error");
        return false;
    } 
```

我已经将打印出来的 SQL 语句复制并粘贴到终端中，在终端中我打开了与数据库的连接，它工作正常（添加了“;”）。

我知道这不起作用，因为 executeUpdate() 之后的打印语句永远不会被打印。我在代码的其他地方使用 PreparedStatements 来检查用户是否在数据库中，并且这些 SELECT 调用与 executeQuery() 一起工作正常。

为什么会失败？

编辑：我打印了堆栈跟踪，我得到了我的表的一个字段没有默认值的错误。这是真实的。表中有更多字段，用户名/密码哈希/电子邮件，但为什么请求会从终端而不是 Java 执行正常？（我在想，如果我只是分配可以解决这个问题的默认值，但我想看看是否有另一种方法。）

堆栈跟踪：

```
java.sql.SQLException: Field 'firstname' doesn't have a default value
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2734)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2458)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2375)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2359)
at com.quizzine.database.UserData.createNewAccount(UserData.java:81)
at com.quizzine.login.CreateAccountServlet.doPost(CreateAccountServlet.java:50)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:29:46.700

> 我打印了堆栈跟踪，我收到错误，我的表的一个字段没有默认值。这是真实的。表中有更多字段，用户名/密码哈希/电子邮件，但为什么请求会从终端而不是 Java 执行正常？

只要被遗漏的列可以为空或者它们具有通过`DEFAULT`约束指定的默认值，只需将值插入表中的列子集就可以了。否则，无论是通过控制台还是`PreparedStatement`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-20T08:59:06.757

```
java.sql.SQLException: Field 'firstname' doesn't have a default value 
```

异常意味着您的列`firstname`有一个`NOT NULL`约束，并且您在创建表时没有给它一个默认值`TABLE_NAME`

你可以通过这两种方法解决这个问题，

方法一：

```
alter "TABEL_NAME" 
add a default value, such as '' to the column "firstname" 
```

或方法2：

```
 pstmt = con.prepareStatement("INSERT INTO " + TABLE_NAME + " (" + USERNAME + ", " + PASSWORD_HASH + ", " + EMAIL + ", " + FIRST_NAME + ") VALUES (?, ?, ?, '')");      // changed here
    pstmt.setString(1, username); // (these are parameters)
    pstmt.setString(2, passwordHash);
    pstmt.setString(3, email); 
```

# r - 在R中合并多个数据帧

> ID：13676897
> 
> 赞同：2
> 
> 时间：2012-12-03T03:52:59.843
> 
> 标签：r, merge, dataframe

所以我有很多数据框，我正在尝试合并它们。其中一些采用以下形式：

```
 sites1  AA1 SA
1   13: C   0.360828
2   14: S   0.017064
3   15: I   0.010810 
```

其他是：

```
 sites2  AA2 Freq
1   1:  X   0.013
2   1:  S   0.987
3   2:  L   1.000 
```

我有另一个数据框将第一组中的正确数据框与第二组中的正确数据框链接起来，它是这样的：

```
 V1  V2
1   1JH6    AT4G18930
2   3MXZ    AT2G30410 
```

左边的名字对应一个数据框，右边的名字对应另一个数据框。我正在尝试通过这样做来合并它们

```
for (i in 1:n){
  name = paste("1",names2[i,2])
  assign(name,merge(names2[i,1],names2[i,2]))
} 
```

但这只是返回一个带有两个名称的数据框。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:40:16.777

尝试用`assign`以下内容替换 for 循环中的语句

```
 assign(name,merge(get(as.character(names2[i,1])), 
                       get(as.character(names2[i,2])))) 
```

* * *

此外，请考虑将语句修复`name = paste....`如下：

```
 name = paste("T1",names2[i,2], sep="")
   # added sep="" to not have a space.
   # changed the name so that does not start with a number 
```

# ruby-on-rails - before_destroy 回调未在生产模式下注册

> ID：13676898
> 
> 赞同：1
> 
> 时间：2012-12-03T03:53:00.107
> 
> 标签：ruby-on-rails, activerecord, callback

我曾经能够通过 ./config/initializers/active_record_base.rb 中的以下代码为我的应用程序中的每个 ActiveRecord 实例注册一个 before_destroy 回调...

```
class ActiveRecord::Base
    before_destroy :enumerate_descendants

    def enumerate_descendants(args={})
        # code...
    end
end 
```

但现在，在 Rails 3.2.9 和 ruby​​ 1.9.3p327 应用程序中，这只适用于开发模式，不适用于生产模式。（顺便说一句，从我的控制器中，我调用的是销毁而不是删除。）一些证据：

```
localhost:my_app me$ RAILS_ENV=development rails console
Loading development environment (Rails 3.2.9)
1.9.3-p327 :001 > Person._destroy_callbacks
 => [<ActiveSupport::Callbacks::Callback:0x007fbdde8f2890 @klass=ActiveRecord::Base, @kind=:before, 
@chain=[...], @per_key={:if=>[], :unless=>[]}, @options={:if=>[], :unless=>[]},
@raw_filter=:enumerate_descendants, @filter=:enumerate_descendants, @compiled_options="true", @callback_id=12>] 

localhost:my_app me$ RAILS_ENV=production rails console
Loading production environment (Rails 3.2.9)
1.9.3-p327 :001 > Person._destroy_callbacks
 => [] 
```

如果我在 ./environments/production.rb 中使用 config.cache_classes = false，回调会在生产模式下注册，但这对于生产应用程序来说显然是个问题......

那么，除了我的所有模型的基类之外，任何想法 - 我如何才能在生产模式下为所有 ActiveRecord 实例注册 before_destroy 回调？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:26:04.310

正如我在评论中所写，这可能是因为在 ActiveRecord::Base 中添加“before_destroy”*之前加载了模型。*在开发环境中（何时`config.cache_classes = false`）重新加载模型（对于每个请求？），然后“before_destroy”已经在 ActiveRecord::Base 上注册。

**我已经在旧 Rails 中对此进行了测试，但我得到了相同的行为**

您必须找出在哪里使用代码在 ActiveRecord::Base 上注册“before_destroy”，以便在加载任何模型*之前完成。*

如果您自己对此进行测试，例如`require 'one_of_your_models'`在控制台中执行以查看它是否适用于重新加载，这还不够，您必须`Object.send(:remove_const, :OneOfYourModels)`在重新加载之前执行此操作（Rails 在重新加载模型之前执行此操作）。

# c++ - “呼叫没有匹配功能”错误

> ID：13676904
> 
> 赞同：0
> 
> 时间：2012-12-03T03:54:09.043
> 
> 标签：c++, class, vector

我正在做这个项目，我必须将文件中的输入输入到向量中，然后分解该向量并将其元素发送到一个类中。我正在尝试对班级人员进行测试，但是当我尝试这样做时出现此错误。

错误：

```
C:\Users\Eric\Dropbox\CSE 2122 - C++\Project Files\Homework09\main.cpp:57: error: no matching function for call to `person::person(int, std::vector<int, std::allocator<int> >&)'
C:\Users\Eric\Dropbox\CSE 2122 - C++\Project Files\Homework09\main.cpp:9: note: candidates are: person::person(const person&)
C:\Users\Eric\Dropbox\CSE 2122 - C++\Project Files\Homework09\main.cpp:17: note:                 person::person(int, std::vector<float, std::allocator<float> >) 
```

主文件

```
#include <iostream>
#include <fstream>
#include <vector>

using namespace std;

/* Person Class */
class person
{
    public:
        int id;
        vector <float> scores;
        float averageScore;

    /* Person Constructor */
    person(int _id, vector<float> _scores)
    {
    id = _id;
    scores = _scores;

    int total;

    for(unsigned int i = 0; i < _scores.size(); i++)
    {
        total += _scores[i];
    }

    averageScore = (total / _scores.size());
    }
};

/* Function Prototypes */
string getFileName();
void readFile(string fileName, vector <int> &tempVec);

/* Main */
int main()
{
    vector <int> tempVec;
    vector <int> tempVec2;

    tempVec2.push_back(56);
    tempVec2.push_back(98);
    tempVec2.push_back(78);
    tempVec2.push_back(89);

    int personCount = 0;

    vector <person> personVector;

    string fileName = getFileName();

    readFile(fileName, tempVec);

    personCount = (tempVec.size())/(4);

    person eric = person(110, tempVec2);

}

/* getFileName Function */
string getFileName()
{
    string fileName;
    cout << "Enter the file you wish to read from: ";
    cin >> fileName;

    return fileName;
}

/* readFile Function */
void readFile(string fileName, vector <int> &tempVec)
{
    float x = 0;

    ifstream fin;

    fin.open(fileName.c_str(), ios::in);

    if(!fin.is_open())
    {
        perror(fileName.c_str());
        exit(10);
    }

    while(!fin.fail())
    {
        fin >> x;
        tempVec.push_back(x);
    }

    fin.close();
} 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T03:58:21.887

您的`person`构造函数采用 a `vector`of `float`s，并且您试图将其传递`tempVec2`给它，这是 a `vector`of `int`s。

# ruby-on-rails-3 - ActionView::Template::Error 未定义的局部变量或方法 `href'

> ID：13676905
> 
> 赞同：0
> 
> 时间：2012-12-03T03:54:27.687
> 
> 标签：ruby-on-rails-3, routing, ruby-on-rails-3.2

为什么我的 rails 应用程序会为任何需要路由的操作引发错误？

这是我得到的：

```
ActionView::Template::Error (undefined local variable or method `href' for #<#<Class:0xaba4f00>:0xafd636c>): 
```

对于任何人`link_to`，可能有什么问题？，我将 routes.rb 恢复为一个好的版本，但是，我仍然有问题..

任何想法 ？

**编辑**

这是我的路线.rb

```
DCACLab2::Application.routes.draw do

  resources :authentications

  resources :class_rooms_member_ships

  resources :lessons

  resources :subscriptions
  resources :plans

  resources :schools

  #match '/:id' => 'class_rooms_member_ships#new', :constraints => { :id => /\d+/ }

  devise_for :users, :controllers => {  :registrations => "users/registrations" } # :sessions => "users/sessions",

  resources :teacher_profiles do
    get :autocomplete_school_name, :on => :collection
  end
  resources :experiments
  get 'experiments/:id/info_edit' => 'experiments#info_edit',:constraints => { :id => /\d+/ }

  Rails.application.routes.draw do

    resources :teacher_profiles

    resources :schools

    filter :locale, :pagination, :uuid
  end

  match 'lang' => 'home#set_lang'

  match 'free_trial' => 'home#free_trial'
  match 'home' => 'home#home'
  match 'features' => 'home#features'
  match 'pricing' => 'home#pricing'

  match 'contact' => 'contact#new', :as => 'contact', :via => :get
  match 'contact' => 'contact#create', :as => 'contact', :via => :post

  match 'dashboard' => 'experiments#index'
  match 'complete_order' => 'home#complete_order'
  post 'notifications' => 'subscriptions#instant_payment_notification'
  get 'paypal/checkout', to: 'subscriptions#paypal_checkout'
  get 'paypal/checkout/post/form', to: 'subscriptions#paypal_checkout_post_form'

  #match 'lab' => 'home#lab'
  match 'lab' => 'experiments#lab'

  match 'trial_account' => 'home#trial_account'
  match 'student_account' => 'home#student_account'
  match 'school_account' => 'home#school_account'

  match 'create_account' => 'home#registration_entrance'
  match 'users/create_account' => 'home#registration_entrance'
  match 'registration_redirect' => 'home#registration_redirect', :via=>[:post]
  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  root :to => 'home#home'

  match '/auth/facebook/logout' => 'authentications#facebook_logout', :as => :facebook_logout
  #match '/auth/facebook/callback' => 'authentications#create'
  match '/auth/:provider/callback' => 'authentications#create'
  match '/auth/failure' => 'authentications#failure'

  match '/fb_channel', :controller=>'authentications', :action=>'fb_channel'

end 
```

至于link_to代码，它只是正常的..

```
%li{:class=>"#{action_name == action ? 'active':''}"}
                 = link_to :controller => '/home', :action => action do
                   = t(action) 
```

# vba - 打开excel文件将内容复制到数组输出这些项目到另一个结果文件

> ID：13676907
> 
> 赞同：0
> 
> 时间：2012-12-03T03:54:31.557
> 
> 标签：vba, excel

我从未在 VBA 中编码，但我正在尝试将 obj-c 中的一些知识转换为这个。

-我想打开一个文件（一个文件夹大约200个文件）

- 浏览每个文件中的单元格范围

- 然后找到每个单元格中第一个逗号之前的所有内容（单词）（此范围内的单元格有三个逗号）

- 将每个单元格的值添加到数组中

（扫描其余文件并执行相同操作）

-获取结果数组并将它们全部粘贴到另一个名为 master list 的文件中

我想我已经涵盖了大部分内容（第一次使用 VBA，虽然不确定），但我还没有弄清楚如何阅读每个单元格中的第一个逗号之前的所有内容

另外，如果我有任何明显的错误或逻辑问题，请告诉我

先感谢您

感谢您的帮助！

```
Sub CopyWordsToMainFileRow()

Dim Cell As Range
Dim counter As Integer
Dim word As String
Dim arrayOfIngredients() As Variant 'array of words from search
Dim fileName As String
Dim arrayOfFileNames As Variant
Dim MainCounter As Integer
Dim p As String, x As Variant

MainCounter = 0
counter = 0

' Make array of file names
    p = "/Users/waf04/Desktop/*.xls"
    arrayOfFileNames = GetFileList(p)

    Select Case IsArray(arrayOfFileNames)
        Case True 'files found
            MsgBox UBound(arrayOfFileNames)
            Sheets("Sheet1").Range("A:A").Clear
            For i = LBound(arrayOfFileNames) To UBound(arrayOfFileNames)
                Sheets("Sheet1").Cells(i, 1).Value = arrayOfFileNames(i)
            Next i
        Case False 'no files found
            MsgBox "No matching files"
    End Select
'end make array of file names

'Create array from cells in each file
For fileNameCounter = 0 To UBound(arrayOfFileNames)

    fileName = arrayOfFileNames(MainCounter)
    Workbooks.Open fileName:="fileName"
    arrayOfIngredients = Range("AT2:EP200").Value 'add value of cells to array

    'make array of results for each file
    For Each Cell In Range("AT2:EP200")
        word = Cell.Value ' make this string equal to the value of everything before the first comma in that cell
        arrayOfIngredients(counter) = word 'add string to array
        counter = counter + 1
        Next Cell

Workbooks.Close fileName:="fileName"
Next fileNameCounter
'==============================
'Output unsorted array
Workbooks.Open fileName:="/Users/waf04/Desktop/ingredients_collection.xlsx"
Range("A1:A" & UBound(arrayOfIngredients) + 1) = _
WorksheetFunction.Transpose(arrayOfIngredients)

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T06:12:35.183

这是您修改的代码以解决一些逻辑问题并展示如何使字符串达到第一个逗号。

这会在输出文件的单个列中从每个文件中输出逗号分隔的单词列表。

我假设在所有情况下，每个工作簿中感兴趣的工作表都是`index 1`. 您可能需要更改它以适合您的床单。

注意：我是在 Windows 机器上开发的，它可能会在我不知道的 Mac 上出现问题。

更改用评论解释`' *** like this`

```
Sub CopyWordsToMainFileRow()
    Dim cell As Range
    Dim counter As Long 'Integer *** no advanatge in using Integer, and risks overflow
    Dim word As Variant  'String *** need variant for For Each loop
    Dim arrayOfIngredients() As Variant 'array of words from search
    Dim fName As String ' fileName As String *** dont use keywords as variables
    Dim arrayOfFileNames As Variant
    Dim MainCounter As Long 'Integer
    Dim p As String, x As Variant

    ' *** extra variables
    Dim wb As Workbook
    Dim ws As Worksheet
    Dim arrayFromSheet As Variant
    Dim CellValue As Variant

    ' *** not used ?
'    MainCounter = 0
'    counter = 0

    ' Make array of file names
    p = "/Users/waf04/Desktop/*.xls"
    arrayOfFileNames = GetFileList(p)

    Select Case IsArray(arrayOfFileNames)
        Case True 'files found
            MsgBox UBound(arrayOfFileNames)
            With Sheets("Sheet1") ' *** avoid multiple references to sheet
                .Range("A:A").Clear
'            For i = LBound(arrayOfFileNames) To UBound(arrayOfFileNames)
'                Sheets("Sheet1").Cells(i, 1).Value = arrayOfFileNames(i)
'            Next i

            ' *** put file names into sheet in one step ***
                .Range(.Cells(1, 1), .Cells(UBound(arrayOfFileNames) - LBound(arrayOfFileNames) + 1)) = arrayOfFileNames
            End With
        Case False 'no files found
            MsgBox "No matching files"
            ' ***** End Sub here. ***
            Exit Sub
    End Select
    'end make array of file names

    ' *** Initialise results array: Range("AT2:EP200")  has 20099 cells
    ReDim arrayOfIngredients(1 To 20099)  ' <== you may want a more generic sizing solution

    'Create array from cells in each file
    'For fileNameCounter = 0 To UBound(arrayOfFileNames)
    For fileNameCounter = LBound(arrayOfFileNames) To UBound(arrayOfFileNames) ' *** handle 0 or 1 based arrays

        fName = arrayOfFileNames(fileNameCounter) ' MainCounter) *** use correct counter
        Set wb = Workbooks.Open(fileName:=fName)  ' *** use  variable, use workbook object
        Set ws = wb.Worksheets(1) ' *** use worksheet object, set to required sheet
        ' *** don't overwrite prior results, so don't need this line
        ' arrayOfIngredients = ws.Range("AT2:EP200") 'add value of cells to array 

        'make array of results for each file
        '  *** don't loop over cells, get data into an array instead
        arrayFromSheet = ws.Range("AT2:EP200")
        counter = 1 ' *** initialise counter for each file
        'For Each Cell In Range("AT2:EP200")
        For Each word In arrayFromSheet
            ' *** see new code below
            'word = Cell.Value ' make this string equal to the value of everything before the first comma in that cell
            i = InStr(word, ",")
            If i > 0 Then
                arrayOfIngredients(counter) = arrayOfIngredients(counter) & Left$(word, i - 1) & ","  ' *** add string to array
            Else
                ' *** what to do if no , ???
            End If
            counter = counter + 1
        Next word

        wb.Close SaveChanges:=False ' *** close object
    Next fileNameCounter
    '==============================
    'Output unsorted array
    ' *** strip trailing comma
    For i = LBound(arrayOfIngredients) To UBound(arrayOfIngredients)
        If Len(arrayOfIngredients(i)) > 0 Then
            arrayOfIngredients(i) = Left$(arrayOfIngredients(i), Len(arrayOfIngredients(i)) - 1)
        End If
    Next i
    Set wb = Workbooks.Open(fileName:="/Users/waf04/Desktop/ingredients_collection.xlsx") ' *** use object
    wb.Worksheets(1).Range("A1:A" & UBound(arrayOfIngredients) - LBound(arrayOfIngredients) + 1) = _
    Application.Transpose(arrayOfIngredients) ' *** use object and use Application rather than Worksheet tramspose

End Sub 
```

# sql-server - 检查 2 个复合主键中 1 个的约束

> ID：13676908
> 
> 赞同：0
> 
> 时间：2012-12-03T03:54:33.040
> 
> 标签：sql-server, sql-server-2008, foreign-key-relationship

我知道如果我只想在复合主键中的 1 个（我目前有 2 个）上强制执行外键约束是不可能的。所以我想使用 Check Constraint 来实现它，但我找不到任何例子。

我有`TableA`&`C1`作为`C2`复合主键。然后`TableB`使用`C1`& `C3`，但我只想在 TableA 和 TableB 之间强制执行 C1。

谢谢。

编辑：将 TableA 视为个人详细信息，将 TableB 视为此人的电话号码。所以我想确保 TableB 只包含 TableA 中有效现有人员的电话号码。TableA 的 C2 是复合键的一部分，由于设计而存在，目前无法更改。

# foursquare - 四方场地/建议完成不支持类别过滤器

> ID：13676913
> 
> 赞同：2
> 
> 时间：2012-12-03T03:55:19.423
> 
> 标签：foursquare

目前，Suggest Completion Venues API 不支持按类别 ID 过滤结果。这是计划好的还是有替代的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:06:06.573

建议完成 API 不支持按类别 ID 过滤。您必须手动对响应进行此类过滤，或使用不同的端点。

# python - Python - 在循环另一个列表时从一个列表中提取项目

> ID：13676914
> 
> 赞同：0
> 
> 时间：2012-12-03T03:55:31.723
> 
> 标签：python, for-loop, pygame, nested-loops

全部，

如果有帮助，我可以发布我的其余代码。我有一个 pygame 版本的 Asteroids，但我使用的是文本文件中单词的直方图。我正在创建一个字典 [hist]，其中单词作为键，出现次数作为值。

当我创建我的单词实例时，我想使用单词和值。我尝试在循环中添加另一个循环`for w in range(len(hist))`，现在进行递归，但是通过递归，我没有得到任何值，而在另一个循环中，我只得到每个 w 实例的最后一个键和值。

```
class Word(object):
    def __init__(self, color, pos, radius, speed, heading, term, font, screen):
        self.color = color
        self.x = pos[0]
        self.y = pos[1]
        self.radius = radius
        self.speed = speed
        self.heading = heading
        self.term = term
        self.font = font
        self.screen = screen

    def draw(self, surface):
        pygame.draw.circle(surface, self.color, (int(self.x),int(self.y)), self.radius)
        hist_text = self.font.render(self.term, True, (0, 128, 0))
        self.screen.blit(hist_text, (int(self.x) - hist_text.get_width() // 2, int(self.y) - hist_text.get_height() // 2))

    def move(self):
        self.x += self.speed * math.cos(self.heading)
        self.y += self.speed * math.sin(self.heading)

    def checkBounds(self):
        """ wrap around screen """

        if self.x > width:
            self.x = 0
        if self.x < 0:
            self.x = width
        if self.y > height:
            self.y = 0
        if self.y < 0:
            self.y = height

def first(lst):
    if lst == []:
        return 0
    else:
        print(lst[0])
        return first(lst[1:])   

for ele in hist:
    term_keys = hist.keys()
    sizes = hist.values()

for w in range(len(hist)):
    color = (220,0,0)
    radius = 33
    for ele in sizes:
        radius = 3 * ele
        font = pygame.font.Font(None, 33 * int(ele))
    print radius
    x = 0
    y = 0
    speed = random.randint(1,5)
    heading = random.uniform(0, math.pi*2)
    for ele in term_keys:
        term = ele
    screen = screen
    w = Word(color, (x, y), radius, speed, heading, term, font, screen)
    words.append(w) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:07:25.373

呃，太笨了。我通过添加计数使其工作

```
count = 0
for w in range(len(hist)):
    color = (220,0,0)
    x = 0
    y = 0
    size = sizes[count]
    term = term_keys[count]
    speed = random.randint(1,5)
    heading = random.uniform(0, math.pi*2)
    screen = screen
    radius = 5 * size
    font = pygame.font.Font(None, int(size) * 5)
    print radius
    print term
    w = Word(color, (x, y), radius, speed, heading, term, font, screen)
    words.append(w)
    count += 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:22:38.820

像许多评论者一样，我真的不清楚你想要什么。如果您要做的是创建一个`hist`计算单词出现次数的字典，请在文件中使用`collections.Counter`. 一个例子：

```
>>> t = '''All,
...
... I can post the rest of my code if that helps. I've got a pygame version of A
steroids, but I'm using a histogram of words from a text file. I'm creating a di
ctionary [hist] with the words as keys, and the number of occurrences as values.

...
... When I create my word instances, I want to use the word and the value. I've
tried sticking another loop in the for w in range(len(hist)) loop, and now recur
sion, but with recursion I get no values and with another loop I get only the la
st key and value put in for each instance of w.'''
>>> t = t.split()
>>> collections.Counter(t)
Counter({'the': 7, 'and': 5, 'I': 5, 'of': 5, 'a': 4, 'in': 3, 'with': 3, 'anoth
er': 2, 'as': 2, 'for': 2, "I've": 2, 'get': 2, 'but': 2, 'words': 2, "I'm": 2,
'word': 2, 'my': 2, 'loop': 2, 'Asteroids,': 1, 'code': 1, 'text': 1, 'each': 1,
 'When': 1, 'number': 1, 'rest': 1, 'key': 1, 'put': 1, 'occurrences': 1, 'want'
: 1, 'post': 1, 'if': 1, 'instance': 1, 'use': 1, 'from': 1, 'recursion,': 1, 'v
alue.': 1, 'create': 1, 'loop,': 1, 'file.': 1, 'range(len(hist))': 1, 'to': 1,
'only': 1, 'version': 1, 'pygame': 1, 'w.': 1, 'helps.': 1, 'got': 1, 'tried': 1
, 'creating': 1, 'dictionary': 1, 'that': 1, 'All,': 1, 'keys,': 1, 'histogram':
 1, 'value': 1, '[hist]': 1, 'using': 1, 'now': 1, 'last': 1, 'no': 1, 'instance
s,': 1, 'values': 1, 'can': 1, 'w': 1, 'recursion': 1, 'sticking': 1, 'values.':
 1}) 
```

# mongodb - 如何使用 mongoexport 删除 _Id 字段？

> ID：13676919
> 
> 赞同：1
> 
> 时间：2012-12-03T03:56:36.560
> 
> 标签：mongodb, export

> **可能重复：**
> [没有 _id 字段的 mongoexport](https://stackoverflow.com/questions/12976145/mongoexport-without-id-field)

使用 mongoexport 时如何删除 _Id 字段？

> $ ./mongo
> MongoDB shell 版本：2.2.2
> 连接到：test
> > db.coll.insert( {first: "John", last: "Doe"} )
> > exit
> $./mongoexport --db test --collection coll --out out.json --fields '第一，最后'

out.json：

> {“_id”：{“$oid”：“50bc20b3cef5182e2a788fc9”}，“first”：“John”，“last”：“Doe”}

代替：

> {“第一个”：“约翰”，“最后一个”：“Doe”}

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-12-03T05:02:13.063

你不能。_id 总是包括在内！

# c - libpq - PQconnectdb 失败时的 PQreset

> ID：13676922
> 
> 赞同：0
> 
> 时间：2012-12-03T03:57:04.883
> 
> 标签：c, postgresql, libpq

如果我尝试通过建立连接`PQconnectdb`但它失败了，是否可以调用`PQreset`重`PGconn*`试或者仅在我已经连接过一次时才有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:23:38.067

如果连接尝试由于某些无效的连接选项（如无效连接选项等错误）而失败，那么调用 PQreset 也会失败。但是对于 PQconnectdb 的所有参数都正确并且由于远程服务器忙或不接受新连接等原因连接不成功的情况，PQreset 将正常工作。

# jquery - 没有固定高度的滚动列表

> ID：13676924
> 
> 赞同：0
> 
> 时间：2012-12-03T03:57:22.730
> 
> 标签：jquery, dom

[JSFiddle - 固定高度](http://jsfiddle.net/fkmCM/)

[JSFiddle - 问题](http://jsfiddle.net/CnBap/)

我有一个固定高度的 ul。有两个按钮 (#up) 和 (#down) 在单击时滚动浏览其余元素。我想删除 ul 上的固定高度，以允许每个 li 中不同长度的副本（目前它允许 3 li 的最大高度为 90px）。它在定义 ul 的高度和 li 的最大高度时起作用，删除它们显示超过所需的 (4) 数量的 li。

CSS：

```
#container ul {
height:400px;
margin: 1em 0 0 0;
padding: 0;
position: relative;
overflow: hidden;
}

#container ul li {
display: none;
min-height: 90px;
font: 0.9em/1.25em Arial, Helvetica, sans-serif;
color: #121c39;
padding: .5em;
border-bottom: 1px dotted #121c39;
background: transparent;
overflow: hidden;
}

#container ul li span {
display: block;
font: bold 1.125em Arial, Helvetica, sans-serif;
}

#container ul li a {
display: block;
color: #121c39;
} 
```

HTML：

```
 <div class="fourcol">
        <div id="container">
            <a href="#" id="up">Up</a>
            <a href="#" id="down">Down</a>
          <h2>New Arrivals</h2>
          <ul>
            <li><span>Gun 1</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 2</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 3</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 4</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 5</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
            <li><span>Gun 6</span>Lorem ipsum dolor sit amet,consectetuer adipiscin consectetuer adipi<a href="">Learn More</a></li>
          </ul>
    </div> 
```

和 JS

```
$('#up').click(function(e){
    var first = $('#container ul li:first');
    first.hide('fast',function(){
        $('#container ul').append(first.show(500));
    });
    e.preventDefault();
});
$('#down').click(function(e){
    var last = $('#container ul li:last');
    last.hide('fast',function(){
    $('#container ul').prepend(last.show(500));
   });
   e.preventDefault();
}); 
```

我可以让 ul 只显示前 4 个（或任何 li 的）

```
$('#container > ul > li:lt(4)').show(); 
```

我希望 ul 只显示 4 个项目并滚动浏览，一次只显示 4 个并保持它们的顺序。如何在每次点击时应用 $('#container > ul >li:lt(4)')....？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:27:50.400

您需要使用 JS 来跟踪`li`一次显示的 s 数量。不同高度的 CSS 解决方案似乎是不可能的。像这样的东西：

```
//after up/down clicks:
$("li:gt(3)").hide(); 
```

# c - 捕获通过 netcat 发送的 tun 接口上的数据包

> ID：13676928
> 
> 赞同：1
> 
> 时间：2012-12-03T03:57:53.737
> 
> 标签：c, networking, driver, tunnel

我正在尝试通过网络上的一些简单的 tun/tap 示例工作，但遇到了一些麻烦。简而言之，我正在尝试：

1.  创建一个tun接口并给它一个地址
2.  使用一些代码打开 tun 接口，打印接收到的数据包
3.  用 netcat 发送一些数据包
4.  使用wireshark和打印它们的代码观察数据包

我在（3）和（4）方面遇到了麻烦。[本教程](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)说，在较旧的 linux 版本中，您可以使用 ping，但显然情况不再如此，所以我正在尝试使用 netcat。我的假设是我没有正确发送数据 - 具体来说，使用 netcat 我必须针对特定端口，所以我给它一个任意端口以及 tun 接口的地址。

由于wireshark 和这两个程序都没有看到任何东西，我认为是数据包的发送不正确。有没有比使用 netcat 更好的方法？

tun接口：

```
$ ifconfig tun2
tun2      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  
          inet addr:192.168.7.1  P-t-P:192.168.7.2  Mask:255.255.255.255
          UP POINTOPOINT NOARP MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:100 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B) 
```

写入一些数据包，没有观察到错误

```
$ echo -n 'fooooo' | nc 192.168.7.1 5555
$
$ echo -n `cat index.html` | nc 192.168.7.1 5555
$ 
```

Wireshark（和程序控制台）什么都不显示：

```
$sudo tshark -i tun2
.... 
```

我已经为（2）尝试了两种不同的代码，它们都应该打印出接收到的数据包：

*   [https://gist.github.com/585369](https://gist.github.com/585369)
*   [http://backreference.org/2010/03/26/tuntap-interface-tutorial/](http://backreference.org/2010/03/26/tuntap-interface-tutorial/)

更新：

在上面的第二个链接中运行 simpletun 程序作为客户端和服务器，在同一台机器上，对于我得到的服务器：

```
$ ./simpletun -i tun2 -s -d
Successfully connected to interface tun2 
```

对于客户端（我认为它将在另一台机器上运行）：

```
$./simpletun -i tun2 -c 192.168.7.1 -d
ioctl(TUNSETIFF): Device or resource busy
Error connecting to tun/tap interface tun2! 
```

所以我很确定我正在打开 tun2。

编辑2：

我在带有 ubuntu 服务器的 virtualbox VM 上执行此操作。一旦我让它在一台机器上工作，我想尝试用第二台机器编写一个简单的 UDP 桥，两者都在 tun 接口上。

编辑3：

环回它是

```
$ sudo tshark -i lo
[sudo] password for nflacco: 
tshark: Lua: Error during loading:
 [string "/usr/share/wireshark/init.lua"]:45: dofile has been disabled
Running as user "root" and group "root". This could be dangerous.
Capturing on lo
  0.000000  192.168.7.1 -> 192.168.7.1  TCP 74 59584 > personal-agent [SYN] Seq=0 Win=32792 Len=0 MSS=16396 SACK_PERM=1 TSval=26444728 TSecr=0 WS=4
  0.000019  192.168.7.1 -> 192.168.7.1  TCP 54 personal-agent > 59584 [RST, ACK] Seq=1 Ack=1 Win=0 Len=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:04:52.643

是否有另一个系统连接在隧道 tun2 的另一端？

请注意`RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)`ifconfig 输出。确实没有通过该接口传输数据包。确保该接口上有一些接收器。

例如，如果您将其用于虚拟化，请确保虚拟机已启动并准备好接收数据包。如果您将其用于 VPN 或其他用途，请确保远程系统正在响应。

我已经使用隧道接口进行虚拟化。＆它工作，当VM启动并运行时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-04T13:00:19.600

尝试

```
echo -n 'fooooo' | nc 192.168.7.2 5555 
```

您需要将流量发送到 tun 接口子网中的 IP，而不是接口 IP 本身。如果您将它发送到接口 IP，内核将不会在线发送它，因为数据包已到达其目的地。

# java - com.microsoft.sqlserver.jdbc.SQLServerException 与 jpa

> ID：13676932
> 
> 赞同：-2
> 
> 时间：2012-12-03T03:58:26.647
> 
> 标签：java, sql-server, hibernate, jpa, persistence

**我对JPA**模式下的 Hibernate 有疑问。

有错误信息：

`com.microsoft.sqlserver.jdbc.SQLServerException`

仅转发结果集不支持请求的操作。当使用in`java.persistence.Query`设置时。我需要使用.`setMaxResults``hibernate``JPA``setMaxResults()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:30:20.230

确保为 JPA 添加的配置文件和 jar 文件正确。

# c# - 在 C# 错误“字符串不能为零长度。参数名称：oldValue”中使用 linq to xml 创建动态 xml 文件

> ID：13676934
> 
> 赞同：1
> 
> 时间：2012-12-03T03:58:39.813
> 
> 标签：c#, xml, linq-to-xml

这是错误的屏幕截图

![在此处输入图像描述](../Images/5bd4c9d2028e9ffed1afe6388b8d6439.png)

![在此处输入图像描述](../Images/817308e2e6de2bfc15cd769d21c9f947.png) ![在此处输入图像描述](../Images/199bfeec500f167b43c65eb94e97a183.png)

我想要发生的是动态创建一个xml文件，xml的节点将是`string[] textBoxNamesArray`并且值将是`string[] textBoxTextArray`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:01:31.110

您正在替换空字符串， ur 的第一个参数`i.replace()`是`""`，不允许

您必须在此处提及您要替换的旧字符串

如果您不想替换任何值，那么只需这样做：

```
xml.Add(new XElement(i, o)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T04:01:37.443

问题在于调用`String.Replace`. [第一个参数不能是空字符串](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)。而且由于您正在用该调用替换“”，`string.Empty`因此实际上并不需要并且可以将其删除。

所以将行更改为

```
xml.Add(new XElement(i, o)); 
```

# python - 用于语法高亮的 powerpoint / openoffice 插件

> ID：13676935
> 
> 赞同：2
> 
> 时间：2012-12-03T03:58:51.310
> 
> 标签：python, syntax-highlighting, powerpoint

我需要创建一个使用 python 代码的 powerpoint，并且将来可能是 C++ 代码。我想知道是否有人知道一个允许代码块的插件（我知道你可以使用这个[http://www.fauskes.net/nb/syntaxms/](http://www.fauskes.net/nb/syntaxms/)来允许进行特殊粘贴，但我希望我可以从任何文本编辑器中复制文本（我使用了很多不同的编辑器）然后直接粘贴到那里）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:36:05.650

只是建议您使用以下工具链：

1.  使用 reST 和/或 Sphinix 编写任何代码，python，C++，...
2.  使用 rst2odt.py 或 Sphinix 工具将其转换为 .odt 文件（打开文档文本，开源）
3.  将其保存到 MS .doc 文件
4.  从 Word 复制到 Powerpoint

# c# - XPathSelectElements 结果上的 XPathSelectElement

> ID：13676936
> 
> 赞同：-2
> 
> 时间：2012-12-03T03:59:12.700
> 
> 标签：c#, xml, linq, xpath

好的，有一些问题，我可以运行 XPathSelectElements 来获取我想要从中提取信息的三个（在这种特定情况下，尽管它可能是 X 个）节点集。我正在抓取一些符合 XHTML 的 HTML，并且必须使用 XPathSelectElements 来查找 X 个数，在此示例中为 Order 对象。

考虑将 HTML/XML 简化为以下内容：

```
<RandomInfo>
<NAME>ASDSADS</NAME>
<WHAT>Dunno</NAME>
<div id='OrderResults'>
  <div id='order_foo'>
    <ID>1</ID>
    <Customer>Bill</Customer>
    <Total>500</Total>
  </div>
  <div id='order_bar'>
    <ID>2</ID>
    <Customer>Bob</Customer>
    <Total>200</Total>
  </div>
  <div id='order_abc'>
    <ID>1</ID>
    <Customer>Butch</Customer>
    <Total>100</Total>
  </div>
</div>
</RandomInfo> 
```

“order_*”名称是动态的，不能依赖于选择节点。所以我有一个 XPathSelectElements 可以为我正确获取三个 div 的集合。但是，当我遍历每个返回的 XNode 并尝试调用 XPathSelectElement("//Customer") 时，我总是会为该 XPathSelectElement 调用返回相同的值。我可以使用 VS 查看节点对象正在发生变化，但 XPathSelectElement 没有从当前节点获取。如果显然以某种方式返回到父节点/文档以获取值，我该如何强制它“根植”自身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:20:54.327

你可以使用这个 xpath

`./Customer`

`.`表示当前节点（通常隐含）

`/`表示该特定节点的子节点

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T10:36:58.533

并且 // 在 XPath 的开头表示文档根目录中的任何节点。因此，您可能在任何节点中，它将始终匹配您文档的所有客户节点。//（无论是在 xpath 的开头还是在中间）对性能非常不利，应该避免！

# batik - 如何找到包 org.w3c.dom.svg？

> ID：13676937
> 
> 赞同：4
> 
> 时间：2012-12-03T03:59:29.583
> 
> 标签：batik

我似乎找不到它，Netbeans 说这个包不存在？我必须获得哪个 jar 包才能拥有包 org.w3c.dom.svg？我正在使用蜡染 SVG

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-01-22T18:33:34.023

Jelle Fresen 回答中的 W3C 参考链接是规范的 v.1.1，从 2010 年开始。不幸的是，蜡染 1.9（截至本文撰写时的最新版本）是针对 2001 年更旧的 1.0 规范编写的。

1.0 和 1.1 规范之间肯定还有其他不兼容之处，但我遇到的第一个是 a `java.lang.NoSuchMethodError: org.w3c.dom.svg.SVGTransformList.getNumberOfItems()I`，因为 Apache 需要`int`s，而 SVG 1.1 API 以`long`值说话。

W3C 的 SVG 1.0 参考实现可以在这里找到，至少现在是这样：[https ://www.w3.org/TR/SVG10/java.html](https://www.w3.org/TR/SVG10/java.html)

不幸的是，该软件包依赖于 SMIL。3.0 是 SVG 1.1 之前的最新版本，仅包含两个 Java 类，您可以在此处找到：[https ://www.w3.org/TR/SMIL3/smil-timing.html#q142](https://www.w3.org/TR/SMIL3/smil-timing.html#q142)

您可以简单地从该代码构建您自己的 JAR。或者您可能只使用 Maven 来解决您的所有问题。不幸的是，我正在使用的客户仍然生活在依赖地狱中，这些事情需要手动解决。

非常感谢 Jelle Fresen，他的链接让我找到了我正在寻找的东西。

**更新：**好的，看起来 Batik 发行版也包含这些库，这并不奇怪。你可以在这里下载它，就像我已经拥有的那样：[https ://xmlgraphics.apache.org/batik/download.html](https://xmlgraphics.apache.org/batik/download.html)

令人困惑的是，`batik-all-1.9.jar`（包含在 中`batik-bin-1.9.zip`）并不包含您需要的一切。

所以对原始问题的真正（最实用，如果你没有受到 Maven 祝福的话）答案是`org.w3c.dom.svg`可以在`xml-apis-ext-1.3.04.jar`Batik 发行版中找到该包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T07:01:30.690

我知道这个问题可能很老了，但我最近遇到了同样的问题（使用蜡染时，门户网站上缺少这种依赖关系）......

我通过从[这个站点](http://www.java2s.com/Code/Jar/w/Downloadw3cjar.htm)下载 w3c.jar 解决了这个问题。希望它可以帮助将来的人！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-06T16:24:34.817

您正在寻找的是 SVG 规范的 Java 语言绑定，可以在 W3C 的 SVG 推荐的附录 D.1 中找到：http: [//www.w3.org/TR/SVG11/java.html](http://www.w3.org/TR/SVG11/java.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-21T23:54:56.783

我也有类似的需求，这样我就可以在独立模块之间传递 SVG 和 MathML 文档。据我所知，这些没有官方祝福的 Maven 托管 jar 文件，但我确实制作了官方发布的绑定的非常非官方的 jar 文件，并在 2007 年将它们放在 Maven 上。MathML 绑定有一些小的编译错误，我在构建之前进行了纠正。SMIL 依赖关系也被传递地提供。以下是 Maven 依赖描述符：

```
<!-- The SVG DOM bindings for Java, written by the W3C, distributed by aXSL. -->
<dependency>
    <groupId>org.axsl.org.w3c.dom.svg</groupId>
    <artifactId>svg-dom-java</artifactId>
    <version>1.1</version>
</dependency>

<!-- The MathML DOM bindings for Java, written by the W3C, distributed by aXSL. -->
<dependency>
    <groupId>org.axsl.org.w3c.dom.mathml</groupId>
    <artifactId>mathml-dom-java</artifactId>
    <version>2.0</version>
</dependency> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-25T03:37:24.743

我在尝试使用 IntelliJ在[https://xmlgraphics.apache.org/batik/using/swing.html构建 Batik Swing 示例时遇到了这个问题。](https://xmlgraphics.apache.org/batik/using/swing.html)

对我来说，解决方案是通过获取 Maven 库来解决的（不是立即，相信我）：xml-apis:xml-apis:2.0.2 和... xml-apis:xml-apis-ext:1.3.04

（在撰写本文时，这些是我可用的最新版本）

**[更新]仅在使用****batik:** Maven batik 存储库 时才需要上述依赖项。我最终通过在 batik:*:1.7 中获取*所有库（对于 1.7 版）使代码正常工作。*但是，这些库的 SVG 掩码存在问题。**我发现使用org.apache.xmlgraphics:batik-all**要好得多。这修复了 svg:mask 问题并消除了对其他依赖项的需要，包括上面的 xml-apis: 。

# flash - 使用字符串变量作为访问 AS 2 中其他变量的路径

> ID：13676940
> 
> 赞同：-1
> 
> 时间：2012-12-03T04:00:24.357
> 
> 标签：flash, path, actionscript-2

我正在使用 actionscript 2 在 Flash 中制作一个简单的格斗游戏（我知道 as3 更好，但现在改变不是一种选择，我发誓我的下一个项目将在 as3 中）。

事情是这样的，我有一个“播放器”对象，它在实例化时附加一个名为“player1”或“player2”的影片剪辑，具体取决于给定的参数。正确的实例名称存储在名为 PlayerName 的变量中。例如：

```
var character:Player = new Player(1); 
```

此代码将创建一个 Player 对象。由于数字“1”，构造函数会将 PlayerName 变量设置为字符串“player1”。最后，构造函数还应该将一个名为“player1”的影片剪辑附加到根目录。

我解决了附加电影剪辑的命名问题：

```
_root.attachMovie(ID, this["PlayerName"], _root.getNextHighestDepth()); 
```

现在有了类似的想法，我想解决以下问题（这是我的问题）：假设我想移动我最近生成的电影剪辑（或访问它的任何属性），我如何在路径中使用字符串 PlayerName 到主持人？我的直觉是这样做：

```
_root.PlayerName._x +=1; 
```

或者

```
 _root.(this["PlayerName"])._x +=1; 
```

希望当 flash 编译时，this["PlayerName"] 会变成存储的字符串，但这显然不起作用。我真的被困在这里，我以前一直在 PHP 中这样做，我的意思是，如果这是 PHP，我会使用这个：

```
_root.$PlayerName._x +=1; 
```

有什么建议么？你怎么能做到这一点？我可以想到一些解决方法，即在附加剪辑时存储对剪辑的引用：

```
clip = _root.attachMovie(.... 
```

然后通过剪辑（clip._x +=1）访问它的属性，但如果我知道如何使用路径中的变量（如 PHP 中的变量）来做到这一点，我会感觉更舒服。不是我太在意，只是在其他情况下，此“剪辑”解决方法可能不起作用。

请记住，我对动作脚本中的 OOP 有点陌生，哈哈，也许这完全是疯狂的，人们会以其他方式这样做。

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T06:01:15.630

不需要使用“x”，因为这是位置而不是字符 [NAME] 它自己。

```
 _root.PlayerName._x +=1; //dont need the x value 
```

尝试类似：

```
 _root.PlayerName +"1"; //from memory should =: PlayerName1

     trace("player"+1);// just type this as a test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:51:45.773

没关系，我找到了方法，无论如何，谢谢。如果其他人遇到同样的疑问，这就是你的做法：

要告诉 flash 您将使用变量内的 STRING 作为路径，您需要使用方括号。现在这可能会有点混乱，至少对我来说，因为当你使用括号时，你不应该使用点。您可能会认为，如果变量名为 PlayerName 并且 de MC 属性的路径是 _root.PlayerName._x ，那么语法将是：

```
_root.[PlayerName]._x +=1; 
```

但这是错误的并且不起作用。至少这是我迄今为止收集到的。现在，为了让它工作，你需要去掉第一个括号之前的点，第二个之后就可以了。不知道这是否正确，但它似乎确实有效，试一试：

```
_root[PlayerName]._x +=1; 
```

这确实有效，它访问名为“whatever-is-inside-the-PlayerName-variable”的电影剪辑的 _x 属性并将其递增 1。我发现这令人困惑的原因是因为根之后没有点，它看起来就好像您正在访问 root 变量，就好像它是一个数组一样，这没有任何意义，因为 PlayerName 没有存储在 root 中......无论如何，我不知道如何或为什么，但这似乎有效。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T13:31:09.750

`_root[variableName]._x`是在路径中使用变量的正确方法。

# javascript - 如何使用来自 geojson 和 d3js 的附加信息？

> ID：13676945
> 
> 赞同：0
> 
> 时间：2012-12-03T04:00:51.813
> 
> 标签：javascript, geojson

我正在玩一点 d3js，我从荷兰创建了一个包含基本统计信息的 GeoJson 文件，现在我可以渲染卡片，但我不知道如何使用附加属性（IE 显示属性中的状态名称：GM_CODE）

```
 d3.json("gemeente.json", function (data) {

      svg.selectAll("path").data(data.features)
    .enter().append("path")
    .attr("d", path)
    .style("fill", function () { return "#44aaee" })
    .on("mouseover", function (e) { d3.select(this).style("fill", "#5522aa") })
    .on("mouseout", function (e) { console.log(data.features); d3.select(this).style("fill", "#44aaee") })
  }); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:20:05.767

geojson 数据集中的属性位于：data.features.properties。因此，如果您的财产是“GM_CODE”。如果是 data.features.properties.GM_CODE。

在方法中使用它会是这样的：

```
svg.selectAll("path").data(data.features)
    .enter().append("path")
    .attr("d", path)
    .style("fill", function () { return "#44aaee" })
    .text(function(d) { return d.properties.GM_CODE;}) 
```

# wordpress - WordPress“冻结”主页？

> ID：13676948
> 
> 赞同：0
> 
> 时间：2012-12-03T04:01:33.387
> 
> 标签：wordpress

我正在为客户开发一个 Wordpress 网站。该网站有一个自定义主页。每个星期六，我的客户都会用新内容填充主页，因此旧内容会被删除，新内容会接管。所以主页每周只更新一次。

现在，我的客户希望能够在一周内逐渐用新内容填充页面并预览更改（没有定期访问者看到更新的内容），并安排主页在周六更新新内容以供所有人查看。

有什么办法，在周六主页重新填充新内容后，有点“冻结”页面并向普通访问者提供静态 HTML，而像我的客户这样的登录用户将能够看到动态版本页面并预览他们在一周内对其所做的更改。然后在接下来的星期六用新内容自动“刷新”页面，并再次“冻结”它？

登台/版本控制环境在这里可能会有点过头了，因为它只适用于一个页面（主页），而且我认为我的客户，一个非技术人员，不能很好地管理登台。缓存插件可能也不起作用，因为据我了解，如果用户清除浏览器中的缓存，它将显示他们不希望看到的所有新内容......

任何帮助将非常感激！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:20:24.017

我建议您使用[Transients API](http://codex.wordpress.org/Transients_API)。因此，在您的主页模板上，您将首先查看访问者是否已登录。如果他们已登录，您将显示主页的实际内容。如果它们不是，您将获得瞬态（[`get_transient()`](http://codex.wordpress.org/Function_Reference/get_transient)），如果它仍然处于活动状态（它不返回 a `false`），则显示它。如果它返回`false`，您将`ob_start()`显示主页的实际内容，然后使用和`$contents = ob_get_clean();`更新您的瞬态。[`set_transient()`](http://codex.wordpress.org/Function_Reference/set_transient)`echo $contents;`

除此之外，您可以向`init`,`template_redirect`或您喜欢的任何其他钩子添加一个动作（只要它在每次页面加载时触发）。在那里，您必须检查是否该显示主页的新内容。如果是，您使用[`delete_transient()`](http://codex.wordpress.org/Function_Reference/delete_transient)删除瞬态，因此您的主页将更新。

我现在没有时间给你一个代码示例，但我认为你应该能够弄清楚代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T07:59:32.017

我会使用“未来”的帖子状态..

WordPress 具有“安排”帖子的能力。因此，您告诉您的客户将帖子“安排”到他想要的某一天，在他去的整个星期中。

然后，您有很多方法可以确保只有一个组可以看到它们，例如管理员 - 通过使用以下[条件](http://codex.wordpress.org/Conditional_Tags) ：

```
if (is_admin()) {

} 
```

现在，正如我所说，这里有很多方法可以实现这一点，通过过滤查询、添加新查询、添加[多个循环](http://codex.wordpress.org/The_Loop#Multiple_Loops_Example_1)等，等等。

例如 ：

```
 if (is_admin()) { // if we are admin - or any other conditional wanted
// start a new query
$my_query = new WP_Query('post_status=future');
while ($my_query->have_posts()) : $my_query->the_post();
//do the thing
wp_reset_postdata();
// start the normal query ...
    } 
```

另一种方法是在循环内正常使用 [get_post_status()](http://codex.wordpress.org/Function_Reference/get_post_status)

```
$status = get_post_status();

if ($status == 'future') && (is_admin()) {
//display post as you would
} 
// continue normal query / post display here .. 
```

因此，这样，该页面将对“普通”用户正常运行 - 直到更新日期，但会显示管理员的预定帖子（或已登录，或特定用户，或您想要的任何条件）

**更新一：**根据评论的概念证明：

警告：丑陋的非高效代码。概念演示..

```
while ( have_posts() ) : the_post(); 
// start here 

                    $future_q = new WP_Query( 'post_status=future' );

                    while ( $future_q->have_posts() ) : $future_q->the_post();
                    if (current_user_can( 'administrator' ) == TRUE ){
                    the_title();}
                    endwhile;
                    wp_reset_postdata();

                    echo 'Normal start here :';
                    the_title(); 
```

上面的代码适用于我的设置。确实，它是丑陋的代码，效率不高，不是最好的方法，但它是一个概念证明，可以使用`future`帖子状态来完全按照 OP 的要求进行操作。您可以通过修改和过滤查询变量、更改循环或检查循环内部的循环状态，甚至使用 get_posts() 将这个概念付诸实践——所有这些都可以满足您想要的任何条件。

# mysql - 从 Ruby on Rails 中的数组中删除具有列值的记录

> ID：13676952
> 
> 赞同：2
> 
> 时间：2012-12-03T04:02:54.107
> 
> 标签：mysql, ruby-on-rails, ruby

我在一个名为记录的表中有一个名为 school_id 的列。

现在我有一个 school_ids 数组，我想删除所有具有以下 id 且属于该数组的记录。

问题是，有没有办法只用一行命令来做到这一点？像：

Record.delete_all(:school_id => [1, 2, 3, 4])？

现在我在这里做一个循环，并尽可能地简化这部分。TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T07:41:17.223

你可以用你的方式。我希望你使用的是 Rails 3.x

```
Record.delete_all(:school_id => [1, 2, 3, 4]) 
```

它生成 SQL

```
DELETE FROM "records" WHERE "records"."school_id" IN (1, 2, 3, 4) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:12:41.060

看看这个[destroy_all](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#M002274)

它期望删除一个字符串、数组或 id 散列。

我经常为destroy_multiple向控制器添加另一个动作

```
def destroy_multiple
  current_user.entries.destroy_all(:id => params[:user_ids])
  redirect_to entries_url
end 
```

不要忘记添加收集路线..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T04:11:23.487

我对 Rails 不太了解，但您可以在 SQL 中轻松完成：

`delete from records where school_id in (1,2,3,4)`

希望有帮助吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T04:17:53.837

```
School.where('id IN (?)', school_ids).destroy_all 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-08T09:56:08.577

```
Record.where(:school_id => [1, 2, 3, 4]).delete_all 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-03-22T10:07:08.317

这很简单

```
Record.where(school_id: school_ids).delete_all 
```

# ruby-on-rails-3 - rails 3.2.9 的 rake 错误

> ID：13676953
> 
> 赞同：0
> 
> 时间：2012-12-03T04:03:00.100
> 
> 标签：ruby-on-rails-3

我刚刚从 3.2.8 升级到 Linux Mint 14 和 Rails 3.2.9。现在我在运行时收到此错误`rake db:create`

```
rake aborted!
undefined method `values_at' for "MySQL.  Versions 4.1 and 5.0 are recommended.":String
Tasks: TOP => db:create 
```

我的 Gemfile 看起来像这样：

```
source 'https://rubygems.org'

gem 'rails', '3.2.9'
gem 'execjs'
gem 'therubyracer'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'mysql2'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platforms => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:15:37.627

您是否可能忘记更新某些依赖项？尝试运行：

```
$ bundle outdated 
```

并检查您是否需要更新其他宝石....

# javascript - Hide / show image button while showing an array of images

> ID：13676954
> 
> 赞同：-1
> 
> 时间：2012-12-03T04:03:02.237
> 
> 标签：javascript, html

Please help! I have been cracking this for days but no avail.. :( I can't hide/ show Previous / Next buttons as of my following scenarios..

I have a 3 images array. Each individual image is shown using Previous / Next buttons. The scenario are as follows:

*   P1 Image is shown: Hide Previous Button, show Next Button

*   P2 Image is shown: Show Previous & Next Button

*   P3 image is shown: Hide Next Button, Show Previous Button

My codes are as follows:

Javascript:

```
var myPix = new Array()

myPix[0] = 'P1.jpg'
myPix[1] = 'P2.jpg'
myPix[2] = 'P3.jpg'

var thisPic = 0

function doPrevious() {
    if (document.images && thisPic > 0) {
        thisPic--
        document.myPicture.src=myPix[thisPic]
    }
}

function doNext() {
    if (document.images && thisPic < 2) {
        thisPic++
        document.myPicture.src=myPix[thisPic]
    }
} 
```

* * *

HTML codes:

Previous / Next Buttons here:

```
<td height="47" align="right">
    <a href="javascript:doPrevious()" title="Previous">
        <img src="PrevBtn.jpg" width="120" height="35" border="0" />
    </a>
    <a href="javascript:doNext()" title="Next">
        <img src="NextBtn.jpg" width="120" height="35" border="0" />
    </a>
</td> 
```

Image shown here:

```
<table border="0" align="center" cellpadding="0" cellspacing="0" id="Table_01">
    <tr>
        <td>
            <img id="pic" name="myPicture" src="P1.jpg" />
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:26:50.960

Try changing the constants in your if statements to 1 because you want the 'next' picture to be hidden only when thisPic = 2 and 'prev' hidden when thisPic = 0\.

Look at the lines with *.style.display and see if you get what they're doing. It would probably be beneficial to look up html attributes and properties. [http://www.w3schools.com/jsref/prop_style_display.asp](http://www.w3schools.com/jsref/prop_style_display.asp)

```
function doPrevious() {
    var pic = document.getElementById("pic");
    var next = document.getElementById("next");
    if (document.images && thisPic > 1) {
        thisPic--;
        pic.src=myPix[thisPic];
        next.style.display = "none";
    }
    else document.getElementById("next").style.display = "block";
}

function doNext() {
    var pic = document.getElementById("pic");
    var prev = document.getElementById("prev");
    if (document.images && thisPic < 1) {
        thisPic++;
        pic.src=myPix[thisPic];
        prev.style.display = "none";
    }
    else prev.style.display = "block";
} 
```

Edit your html to give prevBtn and NextBtn ids like so:

```
<td height="47" align="right"><a href="javascript:doPrevious()" title="Previous"><img src="PrevBtn.jpg" id = "prev" width="120" height="35" border="0" /></a> 
```

Then you can call document.getElementById(id) when you need it and change their style property to "none" as above.

# lisp - 检查 lisp 中是否存在关键字参数

> ID：13676955
> 
> 赞同：2
> 
> 时间：2012-12-03T04:03:15.887
> 
> 标签：lisp, common-lisp

我正在尝试编写一个函数，通过以下方式将关键字参数传递给函数

```
 (defun hyphenate (string &key upper lower)
  (do ((s (cdr (coerce string 'list)) (cdr s))
       (acc (string (char string 0))))
      ((null s) (cond
                 (lower (string-downcase acc))
                 (t (string-upcase acc))))
     (cond
      ((upper-case-p (car s)) (setf acc (concatenate 'string
                                                     (concatenate 'string acc "-")
                                                     (string (car s)))))
      (t (setf acc (concatenate 'string acc (string (car s))))))))) 
```

基本上，如果函数接收到关键字upper，它会调用string-upcase，如果它接收到关键字lower，它会做一个string-downcase。

我只是不知道在我的函数中测试这些参数的适当方法是什么。我不想将它们绑定到一个值。我只想这样称呼他们

（连字符“jobPostings”：上）

如何检查函数调用中是否存在 :upper？它一直告诉我有一个“传递给连字符的未配对关键字”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T07:36:20.987

作为参数的关键字和*关键字参数*是两个不同的东西。*关键字参数*是命名参数。它们有**两个项目**：*名称*和*值*。

像这样：

```
CL-USER 1 > (defun hyphenate (string &key upper lower) (list string upper lower))
HYPHENATE 
```

您需要提供**名称和值**。请注意，未传入的关键字参数的值为 NIL。

```
CL-USER 2 > (hyphenate "foo" :upper t)
("foo" T NIL) 
```

将其与*可选*参数进行比较：

```
CL-USER 3 > (defun hyphenate (string &optional case) (list string case))
HYPHENATE 
```

现在你只需要给出可选参数，它可以是符号`:upper`。

```
CL-USER 4 > (hyphenate "foo" :upper)
("foo" :UPPER) 
```

或者您使用命名关键字参数，在其中传入大小写符号：

```
CL-USER 5 > (defun hyphenate (string &key case) (list string case))
HYPHENATE 
```

同样，作为两项：名称和值：

```
CL-USER 6 > (hyphenate "foo" :case :upper)
("foo" :UPPER) 
```

关于您的功能的一些评论：

*   如果您检查谓词，请使用 IF，而不是 COND

*   您正在迭代字符串并首先将其转换为字符串。通常你会使用索引来遍历字符串。

*   `DO`您在循环中一遍又一遍地将单个字符连接到一个字符串。太丑了 如果您已经在使用列表作为输入，为什么不在输出也使用列表并在退出时将其转换回字符串？

如果您想坚持使用列表的想法，您需要在列表上进行映射。

```
(defun hyphenate (string  &key (case :upper))
  (map 'string
       (if (eq case :upper) #'char-upcase #'char-downcase)
       (destructuring-bind (start . rest)
           (coerce string 'list)
         (cons start
               (mapcan (lambda (char)
                         (if (upper-case-p char)
                             (list #\- char)
                           (list char)))
                       rest))))) 
```

`MAPCAN`插入必要的连字符。外部`MAP`转换大小写并返回一个字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:15:51.200

这不是关键字参数的工作方式。

鉴于这种：

```
(defun hyphenate (string &key upper lower)
  ...) 
```

你会像这样调用它：

```
> (hyphenate "fooBar" :lower t)
"foo-bar"
> (hyphenate "fooBar" :upper t)
"FOO-BAR"
> (hyphenate "fooBar")
"FOO-BAR"
> (hyphenate "fooBar" :upper t :lower t)
"foo-bar"
> (hyphenate "fooBar" :upper)
ERROR: keyword argument list not of even length
[1]> 
```

基本上，关键字参数在必需和可选参数之后作为内联[属性列表给出。](http://clhs.lisp.se/Body/26_glo_p.htm#property_list)

也许你想要的是：

```
(defun hyphenate (string &optional (case :lower))
  (assert (member case '(:lower :upper)))
  (let ((lower (eq case :lower)))
    ...)) 
```

现在你这样称呼它：

```
> (hyphenate "fooBar" :lower)
"foo-bar"
> (hyphenate "fooBar" :upper)
"FOO-BAR"
> (hyphenate "fooBar")
"foo-bar"
> (hyphenate "fooBar" nil)
ERROR: (assert (member nil '(:lower :upper))) failed
[1]> 
```

您可能需要重新考虑要接受的函数，`nil`以便不调用任何 case 函数。但由于我不知道你将如何使用它，这只是一个建议。

但是，您还应该为此功能考虑其他事项。

例如，您正在将原始字符串转换为列表。如果`hyphenate`经常调用，您可能会注意到性能下降。如果您直接访问原始字符串会更好。

您还可以使用`(make-string (+ (length string) num-hyphens))`.

最后，您可以使用[`nstring-upcase`and`nstring-downcase`](http://clhs.lisp.se/Body/f_stg_up.htm)，因为生成的字符串总是新鲜的。

* * *

[PS：在 Common Lisp 中，可以知道在lambda 列表](http://clhs.lisp.se/Body/03_da.htm)中的参数声明中是否实际上为可选或关键字参数提供了额外的变量：

```
(defun foo (string &optional (opt (default-opt-expression) opt-supplied-p))
  ...)

(defun bar (string &key (key (default-key-expression) key-supplied-p))
  ...) 
```

在这些示例中，`opt-supplied-p`and`key-supplied-p`是布尔值，说明是否提供了参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T06:09:22.153

如果我理解正确，你想要这样的东西，对吧？

```
(ql:quickload "cl-ppcre")
(defun hyphenate (string &key (transform-case #'identity))
  (reduce
   #'(lambda (a b)
       (concatenate 'string a (when (> (length a) 0) "-")
                    (funcall transform-case b)))
          (cl-ppcre:split "(?=[A-Z])" string) :initial-value ""))

(hyphenate "fooBarBaz")
"foo-Bar-Baz"

(hyphenate "fooBarBaz" :transform-case #'string-downcase)
"foo-bar-baz" 
```

这也减少了consing / coercion，您可以编写更多的转换函数来处理字符，例如音译它们或您喜欢的任何东西。

如果你的关键参数不是一个函数，你可以做一些事情来达到这个效果：

```
(ccase key-argument
  (possilbe-value-0 (do what possible value 0 does))
  (possilbe-value-1 (do what possible value 1 does))
  . . .
  (possilbe-value-N (do what possible value N does))) 
```

例如，但确实有很多方法可以做到这一点。

* * *

类似，但没有 ppcre：

```
(defun hyphenate (string &key (case-transform #'identity))
  (with-output-to-string (stream)
    (loop for c across string
       do (if (upper-case-p c)
              (progn
                (when (> (file-position stream) 0)
                  (write-char #\- stream))
                (write-char (funcall case-transform c) stream))
              (write-char c stream)))))

(hyphenate "fooBarBaz")
"foo-Bar-Baz"

(hyphenate "fooBarBaz" :case-transform #'char-downcase)
"foo-bar-baz" 
```

# razor - Razor 智能感知不考虑继承属性

> ID：13676956
> 
> 赞同：2
> 
> 时间：2012-12-03T04:03:16.183
> 
> 标签：razor, asp.net-mvc-4, visual-studio-2012, intellisense

我正在使用 RazorEngine 3（Antaris fork at [https://github.com/Antaris/RazorEngine](https://github.com/Antaris/RazorEngine)）从 Razor 视图生成电子邮件，并有一个扩展`TemplateBase<T>`名为`EmailTemplateBase<T>`.

**Views**目录中 的 web.config具有正确设置的基本类型：

```
<system.web.webPages.razor>
    <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <pages pageBaseType="EmailTemplateBase`1[[EmailModelBase]]">
        ... 
```

我还可以确认，在重新启动 Visual Studio (2012) 后，定义的属性`EmailTemplateBase<T>`可以通过 IntelliSense 访问。问题是在其基类 (TemplateBase) 上定义的公共属性，尤其`_Layout`是`Model`无法通过 IntelliSense 访问。

在作品中复制这些属性`EmailTemplateBase<T>`：

```
public new T Model
{
    get { return base.Model; }
    set { base.Model = value; }
} 
```

但是，我不应该这样做。肯定有更好的方法吗？为什么 Visual Studio 的 Razor 代码编辑器看不到我的基类的属性？

# emacs - 使用 AppleScript 在终端中运行 emacs

> ID：13676957
> 
> 赞同：1
> 
> 时间：2012-12-03T04:03:16.283
> 
> 标签：emacs, terminal, applescript

我希望在 Xcode 中创建一个 AppleScript 应用程序来启动终端并运行`emacs`. 我还希望它在完成后键入`Esc`-`X`并按照我需要运行的任何 emacs 程序进行。我试过`do shell script "emacs"`了，但日志输出是

`[XXAppDelegate applicationWillFinishLaunching:]: emacs: standard input is not a tty (error 1)`

这仍然不能解决稍后输入`Esc`的问题。`X`

作为 AppleScript 的新手，除了基本命令之外，我知道的不多，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T04:26:33.073

刚刚发现这个工作：

> ```
> tell application "Terminal"
>      set currentTab to do script "emacs"
> end tell
> 
> tell application "Terminal" to activate
> tell application "System Events" to key code 53 
> ```

这使得终端的当前选项卡（或新选项卡）运行 emacs 并键入`Esc`.

# gridview - Windows 应用商店应用程序 GridView 性能

> ID：13676960
> 
> 赞同：1
> 
> 时间：2012-12-03T04:03:42.567
> 
> 标签：gridview, windows-8, windows-store-apps

我有一个带有 DataTemplate 的 GridView 控件。DataTemplate 内部是堆栈面板，其中包含一个图像控件和一个文本块。我已将图像控件的 Source 属性绑定到返回位图图像的函数，该函数在网格视图请求它们之前已预先加载。

问题是，当您要显示 10 个或更多图像时，应用程序在显示每个图像时会在几秒钟内无响应，这很糟糕。

我尝试使用虚拟化堆栈面板，它使 UI 立即响应，但随后滚动 gridview 变得很慢，但只是第一次，一旦你滚动到最后，以便所有图像都显示出来，那么它就很好了。

这是在我的 i7 四核 2.2Ghz 笔记本电脑上，在平板电脑/平板电脑上会更糟。

图像的大小不超过 640x480，我不希望它太大。

我应该改为显示缩略图还是有其他方法可以加快图像的显示速度？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T23:41:51.760

使用缩略图不会错。无论如何，请检查包含图像的类的方法，因为您可以选择缩放方法，选择更快的方法（尽管图像质量更差）。

# ruby-on-rails - MINGW32 错误，使用错误版本的 ruby 并修复 sublime text 2 的别名

> ID：13676966
> 
> 赞同：0
> 
> 时间：2012-12-03T04:04:50.350
> 
> 标签：ruby-on-rails, ruby, mingw32

`C:\program files x86`我在我的计算机上的文件夹中安装了 Ruby 1.9.2 。我安装了 RailsInstaller，它将 Ruby 1.9.3 放入`C:\RailsInstaller`. 我使用控制面板卸载了 1.9.2。

当我在 中运行命令时`cmd.exe`，应用了 ruby​​ 1.9.3，一切正常。但是，当我在 中运行命令时`MINGW32`，会应用 Ruby 1.9.2 并且出现错误。“`C:/Program:`错误的解释器：没有这样的文件或目录”

但是，如果我在 MINGW32 中执行 ruby​​ -v，它说我正在使用 Ruby 1.9.3

如何让 MINGW32 使用通过 RailsInstaller 安装的 Ruby 版本？

我的`.bashrc`文件只有这一行：

别名 subl="/c/Program\ Files/Sublime\ Text\ 2/sublime_text.exe

该别名设置也不起作用。

使用 Windows 8 专业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:15:16.503

1.  打开 c:/msys/1.0/etc/profile（假设 MSYS 是根据您的 MinGW 安装的）。
2.  找出`export PATH=".:/usr/local/bin:/mingw/bin:/bin:$PATH"`
3.  修改为`export PATH=".:/usr/local/bin:/mingw/bin:/bin:/c/RailsInstaller:$PATH`
4.  保存并重新启动 MSYS。

# jquery - 如何在 jquery 中上传和读取 .csv 文件

> ID：13676971
> 
> 赞同：0
> 
> 时间：2012-12-03T04:05:17.633
> 
> 标签：jquery, csv

> **可能重复：**
> [如何使用 codeigniter 框架在 jquery 中读取 csv 文件](https://stackoverflow.com/questions/13695164/how-to-read-csv-file-in-jquery-using-codeigniter-framework)

假设这是我的 .csv

fileempId,lastName,firstName,middleName,street1,street2,city,state,zip,gender,birthDate,ssn,empStatus,joinDate,workStation,location,custom1,workState,salary,payFrequency,FITWStatus,FITWExemptions,DD1Routing,DD1Account,DD1Amount, DD1AmountCode,DD1Checking,DD2Routing,DD2Account,DD2Amount,DD2AmountCode,DD2Checking 1,Dela Cruz,Juano,Santos,,,,,,1,,,兼职实习,, asd Division, Makati,one, asd,150,Bi Weekly,不适用,100,,,,,,1234,9876,100,SAVINGS,BLANK 3,Palogan,Ralph,,,,,,,1,11-Mar-11,,全职合同,2-Mar-11, sdf系, pasay,,,,,不适用,,,,,,,,,,,, 5,San,Goku,,,,hidden 叶,,,1,11-Mar-11,,,,,,, ,,,不适用,0,,,,,,,,,,

假设这是我的 html 代码

```
<label>Choose File:</label><font color="#FF0000">*</font>
<input type="file" name="file" id="file" />
<input type="button" id="importButton" value="Import" name="importButton" /> 
```

如何获取该文件的值并使用 jquery 将其显示给用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T04:11:39.217

[http://github.com/evanplaice/jquery-csv/](http://github.com/evanplaice/jquery-csv/)

看链接。在您的 HTML 中添加 jquery-csv.js。然后使用，

```
$.csv.function(csv, {options}, callback); 
```

客户端：（即浏览器）- 通过脚本元素导入。

```
<script src="jquery-csv.js"></script> 
```

服务器端：（即 Node.js）- 通过标准 CommonJS 方法导入。

```
var $ = jQuery = require('jquery');
require('./jquery.csv.js'); 
```

用法 每个方法都可以用以下形式调用： $.csv.function(csv, {options}, callback);

# javascript - 我怎么知道css过渡动画结束了？

> ID：13676979
> 
> 赞同：0
> 
> 时间：2012-12-03T04:07:08.937
> 
> 标签：javascript, jquery

我想`animating = false`在过渡动画结束后进行设置，我使用了 settimeout ，它在桌面上可以正常工作，但在 ipad 上时间错误，是否可以准确地知道对象的 css 动画结束？

CSS：

```
#pane{ -webkit-transition: -webkit-transform 1s ease-out ; } 
```

JavaScript：

```
function css_translate(j, k) {
    var i = 'translate(' + k + 'px,0px)';
    j.css({
        'transform': i,
        '-moz-transform': i,
        '-webkit-transform': i,
        '-o-transform': i,
    });
}
if (animating == false) {
    animating = true;
    css_translate($pane, handler.page[handler.currentp + 1] * -1);
}
setTimeout(function() {
    handler.animating = false;
}, transitiontime); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:11:24.457

CSS 过渡的结束[会触发一个`transitionEnd`事件](http://www.w3.org/TR/css3-transitions/#transition-events)，因此您可以准确地知道。这些事件使用供应商前缀，因此您需要处理...对于 Chrome/Webkit，它是`webkitTransitionEnd`：

```
j.on('webkitTransitionEnd', function(event) {
    handler.animating = false;
}); 
```

[强制性 JSFiddle](http://jsfiddle.net/ET3Vz/4/)

# android - Android - 是什么启动了我的服务？

> ID：13676980
> 
> 赞同：0
> 
> 时间：2012-12-03T04:07:10.790
> 
> 标签：android, android-service

我有一项服务，用于在用户不做其他事情时上传选定的文件。它在我的应用程序告诉它时开始，当我的应用程序告诉它时它停止。但是由于某种原因，在使用其他应用程序时，我会在看似随机的时间收到我的服务启动通知。有没有办法确定是什么告诉我的服务开始？

它是标准服务，因为它扩展了服务，并绑定到我的 UploadScreenActivity。

onCreate 非常简单：

```
public void onCreate() {
    instance = this;
    if(connectivityManager == null){
            connectivityManager = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
    }
    mNM = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);

    Toast.makeText(this, "Service started", Toast.LENGTH_SHORT).show();
} 
```

在浏览其他应用程序时，“服务已启动”通知会在看似随机的时间出现。

我的服务代码基于服务文档中的本地服务示例：http: [//developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T05:11:07.603

系统不会自行启动您的服务。该应用程序是否在广播接收器中侦听外部的任何内容？如果没有，您必须在代码中的某个地方启动它。我会加强日志记录并密切关注它。或者将事件发布到错误日志服务（bugsense、acra 等）。

您的代码的哪些部分启动服务？我会从那里开始。奥卡姆剃刀。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:36:01.297

您是否为您的服务定义了一个意图过滤器，允许其他应用程序隐式启动您的服务。来自 android 开发者的这个参考也可能会有所帮助： android:exported 其他应用程序的组件是否可以调用服务或与之交互 - 如果可以，则为“true”，否则为“false”。当值为“false”时，只有相同应用程序的组件或具有相同用户ID的应用程序才能启动服务或绑定到服务。

# ios - 在 iOS 应用更新上执行代码

> ID：13676984
> 
> 赞同：1
> 
> 时间：2012-12-03T04:08:11.197
> 
> 标签：ios, core-data

我有一个 iOS 应用程序，它使用 Core Data 来存储一些临时数据。我已经创建了一个更新版本的应用程序，我很快就会在 App Store 上发布。一旦用户更新了应用程序，我如何执行一段代码？是否有用户更新应用后调用的回调方法？

我想用较新的数据存储替换现有数据存储的模式。我不想迁移任何数据。当用户更新应用程序时，只需重置数据模型和数据。数据库中没有存储任何重要内容，可以将其删除。现在，当我在设备上更新应用程序时，它会崩溃。但是当我卸载该应用程序并重新安装时，它可以工作。那么我该如何告诉 iOS，“查一下之前存在的任何数据模型，然后从一个全新的开始！”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:11:08.307

在应用程序启动时，您可以检查某个键是否在您的 NSUserDefaults 中。如果没有，请删除数据库，并为此键设置一些内容。

# javascript - Jquery滚动代码跳动

> ID：13676985
> 
> 赞同：0
> 
> 时间：2012-12-03T04:08:24.593
> 
> 标签：javascript, jquery, html, scroll

好的，所以当我向上/向下滚动时，我正在向左/向右滚动 div。它有效，但它很跳跃，而且看起来很丑。我不能按原样将其用于网站，所以有人可以告诉我如何解决跳跃问题吗？另外，请不要告诉我使用插件。

```
var numScroll = 0;
            $(document).ready(function() {
                $(window).scroll(function(event){
                    numScroll = $(window).scrollTop();
                    $("#main").css("top", numScroll + "px");
                    $("#main").css("left", -numScroll + "px");
                });
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:12:32.673

我猜这个`scroll`事件触发了*很多，*使浏览器在滚动时搅动。

为什么我们不应该告诉你使用插件？复制别人的作品有什么意义？正如它所发生的那样，[jQuery 节流/去抖动插件](http://benalman.com/projects/jquery-throttle-debounce-plugin/)应该可以很好地解决这个问题：

```
var numScroll = 0;
$(document).ready(function() {
    var $window = $(window);
    var $main = $("#main");

    $window.scroll($.throttle(50, function(event){
        numScroll = $window.scrollTop();
        $main.css({top: numScroll + "px", left: -numScroll + "px"});
    });
})); 
```

请注意选择器缓存以获得更好的性能——浏览器对`scroll`事件所做的工作越少，“跳跃”的事情就越少。

# mysql - 用户定义的排序 - 额外的列或表？

> ID：13676986
> 
> 赞同：0
> 
> 时间：2012-12-03T04:08:27.560
> 
> 标签：mysql, database-design

假设我在数据库中编码了一系列文章，这些文章显示在网站的前端。

如果添加了对自定义排序的支持，那么如何/应该在数据库中表示？

PS：可能会有一篇文章显示在多个列表中的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T10:07:28.703

将用户定义的排序存储在数据库中的唯一方法是将数据行存储在表中。为此，您需要列

*   识别用户，
*   识别物品，以及
*   识别订单。

前两个很容易。有几种不同的方式来存储订单。设计目标通常是减少重写订单的需要。

```
create table user_defined_order (
  user_id integer not null references users (user_id),
  article_id integer not null references articles (article_id),
  sort_order <sort_data_type> not null,
  primary key (user_id, article_id),
  unique (user_id, sort_order)
); 
```

最后一个约束`unique (user_id, sort_order)`是依赖于应用程序的。

**sort_data_type 选项**

不同的数据类型为您提供了用于插入和更改顺序的不同选项。最常用的是

*   没有间隙的整数（插入需要重写一堆行）
*   带间隙的整数（插入间隙，当间隙关闭时重写一堆行）
*   浮动（在现有浮动之间插入一半，拆分失败时重写）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T10:00:57.833

如果我理解正确，那么每个用户都可以以不同的顺序显示订单。假设每个用户都有一个 id，那么您将需要一个由三个字段组成的表，用户 id/文章 id/显示顺序，其中用户 id 和文章 id 为表提供了一个复合主键。

# iphone - 将类从非弧转换为弧

> ID：13676988
> 
> 赞同：3
> 
> 时间：2012-12-03T04:08:41.793
> 
> 标签：iphone, ios

大家好，

```
@property (nonatomic, assign) NSInteger myindex; 
```

在执行到 Objective C ARC 的转换后，此行更改为**unsafe_unretained**任何人都可以解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:13:55.630

_unsafe_unretained 是一个变量限定符。

从[过渡到 ARC 文档](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)

> __unsafe_unretained 指定一个不保持被引用对象活动的引用，并且在没有对该对象的强引用时不设置为 nil。如果它引用的对象被释放，则指针悬空。

简单地说，如果你使用这个限定符，它不会为你做任何保留，并且当没有其他对象保留它时，它不会自动将其引用设置为 nil。

## 编辑：看到评论后

首先，所讨论的变量是原始类型（`NSInteger`、 like`CGFloat`等`float`）。`__weak`所以像, `__strong`,之类的变量限定符`__unsafe_unretained`对它们没有影响。所以下面的代码没有危险。

```
@property (nonatomic, assign) NSInteger myindex; 
```

现在，如果在其他一些部分，您有一个非原始类型，如 NSString、UIImage 等，带有此限定符，那么您必须确保在整个使用过程中保留变量，并在之后释放它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:16:58.080

在您的情况下，它不会更改为，`unsafe_unretained`因为它是一个标量值。可能你这样写：

```
@property (nonatomic, assign) NSInteger *myindex; 
```

这就是它转换为`unsafe_unretained`.

在 ARC`assign`中是有效的`unsafe_unretained`。

对于标量值，如`int`, `float`。你可以`assign`自己使用。对于可以使用`weak`或的对象`unsafe_unretained`，这取决于上下文。

`unsafe_unretained`并`weak`防止保留对象，但方式略有不同。

*   `weak`当对象被释放时，指向对象的指针将转换为 nil。
*   `unsafe_unretained`将继续指向对象所在的内存，即使在对象被释放后也是如此。由于访问该解除分配的对象，这可能会导致崩溃。

# javascript - 如何在函数中返回 Ajax 的值？

> ID：13676989
> 
> 赞同：1
> 
> 时间：2012-12-03T04:08:48.643
> 
> 标签：javascript, jquery, ajax

我有下面的功能。如何在函数中返回成功、错误、完成的值？

```
function checkstatus() {
  $.ajax({
    url: "foo.json",
    beforeSend : function(jqXHR, settings) {
      console.info('in beforeSend');
      console.log(jqXHR, settings);
    },
    error : function(jqXHR, textStatus, errorThrown) {
      alert(" 500  data still loading"+ jqXHR +  " : " + textStatus +  " : " + errorThrown);
      console.info('in error');
      console.log(jqXHR, textStatus, errorThrown);
    },
    complete : function(jqXHR, textStatus) {
      alert(" complete "+ jqXHR +  " : " + textStatus);
      console.info('in complete');
      console.log(jqXHR, textStatus);
    },
    success: function(data, textStatus, jqXHR){
      alert(" success "+ jqXHR +  " : " + textStatus);
      console.info('in success');
      console.log(data, textStatus, jqXHR);
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T04:22:58.187

尝试类似：

```
function checkstatus( callback ) {
   $.ajax({
    .......
    success: function(data, textStatus, jqXHR){
        callback(data);
    }
   });
}
//and callback
checkstatus(function (data) {    
    alert(data);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T04:25:02.020

您不能使用异步请求从单独的函数返回值，因为`.ajax`调用之后的代码（您将返回的位置）将在ajax 回调*之前执行。*相反，您应该创建对回调的依赖项。

如果请求是同步的，您可以这样做：

```
function checkStatus() {
   var statuses = [];
   $.ajax(...
      success: function (data, textStatus, jqXHR) {
          statuses.push(textStatus);
      }
   ...

   return statuses;
} 
```

# c++ - 与 Wt 示例组合时的链接错误

> ID：13676990
> 
> 赞同：2
> 
> 时间：2012-12-03T04:08:52.763
> 
> 标签：c++, cmake, linker-errors, wt

我正在为我的项目使用 C++ 网络框架。我正在尝试向 gitmodel 示例添加身份验证。

我收到以下错误：

```
../hangman/CMakeFiles/hangman.wt.dir/Session.o: In function `Session::Session()':     /home/s/Downloads/wt-3.2.3/examples/hangman/Session.C:101: undefined reference to `void Wt::Dbo::Session::mapClass<User>(char const*)'
../hangman/CMakeFiles/hangman.wt.dir/Session.o: In function `Wt::Auth::Dbo::AuthInfo<User>::user() const': /home/s/Downloads/wt-3.2.3/src/Wt/Auth/Dbo/AuthInfo:94: undefined reference to `Wt::Dbo::ptr<User>::ptr(Wt::Dbo::ptr<User> const&)'
../hangman/CMakeFiles/hangman.wt.dir/Session.o: In function `Session::user() const': /home/s/Downloads/wt-3.2.3/examples/hangman/Session.C:138: undefined reference to `Wt::Dbo::ptr<User>::operator bool() const' 
/home/s/Downloads/wt-3.2.3/examples/hangman/Session.C:139: undefined reference to `User::User()'
/home/s/Downloads/wt-3.2.3/examples/hangman/Session.C:139: undefined reference to `Wt::Dbo::ptr<User> Wt::Dbo::Session::add<User>(User*)'
/home/s/Downloads/wt-3.2.3/examples/hangman/Session.C:139: undefined reference to `Wt::Dbo::ptr<User>::operator=(Wt::Dbo::ptr<User> const&)' 
```

完整错误列表： http: [//pastie.org/5469803](http://pastie.org/5469803)

我尝试使用cmake生成的makefile。追查下来，原来这个链接器错误是在运行CMakeFiles目录下的link.txt之后。我尝试将 gitmodel 示例和 hangman 示例的 link.txt 结合起来，因为 hangman 也进行身份验证。这是我的link.txt：

```
/usr/bin/c++   -O2 -g ../hangman/CMakeFiles/hangman.wt.dir/Session.o CMakeFiles/gitview.wt.dir/Git.o CMakeFiles/gitview.wt.dir/GitModel.o CMakeFiles/gitview.wt.dir/__/wt-homepage/SourceView.o CMakeFiles/gitview.wt.dir/GitView.o  -o gitview.wt -rdynamic -L/home/s/Downloads/wt-3.2.3/build/src/http -L/home/s/Downloads/wt-3.2.3/build/src -L/home/s/Downloads/wt-3.2.3/build/src/Wt/Dbo -L/home/s/Downloads/wt-3.2.3/build/src/Wt/Dbo/backend -lcrypt -L/usr/local/lib ../../src/http/libwthttp.so.3.2.3 ../../src/libwt.so.3.2.3 ../../src/Wt/Dbo/libwtdbo.so.3.2.3 ../../src/Wt/Dbo/backend/libwtdbosqlite3.so.3.2.3  /usr/local/lib/libboost_filesystem.so /usr/local/lib/libboost_random.so /usr/local/lib/libboost_regex.so /usr/local/lib/libboost_signals.so /usr/local/lib/libboost_system.so /usr/local/lib/libboost_filesystem.so -lz -lssl -lcrypto ../../src/Wt/Dbo/libwtdbo.so.3.2.3 /usr/local/lib/libboost_thread.so /usr/local/lib/libboost_program_options.so /usr/local/lib/libboost_date_time.so -lpthread -ldl -Wl,-rpath,/home/s/Downloads/wt-3.2.3/build/src/http:/home/s/Downloads/wt-3.2.3/build/src:/home/s/Downloads/wt-3.2.3/build/src/Wt/Dbo:/home/s/Downloads/wt-3.2.3/build/src/Wt/Dbo/backend:/usr/local/lib 
```

馅饼链接：[http://pastie.org/5469815](http://pastie.org/5469815)

谁能告诉我的链接命令有什么问题？

在运行 cmake 时，我得到

```
/home/s/Downloads/wt-3.2.3/examples/gitmodel on master ✗ at  1:24PM 
➜ BOOST_FS_LIB=/usr/local/lib/libboost_filesystem.so cmake . 
-- ** Not building gitmodel example: requires boost_filesystem library.
CMake Warning (dev) in CMakeLists.txt:
  No cmake_minimum_required command is present.  A line of code such as

   cmake_minimum_required(VERSION 2.8)

 should be added at the top of the file.  The version specified may be lower
 if you wish to support older CMake versions for this project.  For more
 information run "cmake --help-policy CMP0000".
 This warning is for project developers.  Use -Wno-dev to suppress it.

-- Configuring done
-- Generating done
-- Build files have been written to: /home/s/Downloads/wt-3.2.3/examples/gitmodel 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:47:02.347

看起来链接器没有找到 Dbo 符号。

如果您使用 cmake 进行编译，能否提供您的 CMakelist.txt？

查看 gitmodel Cmakelist 和 auth Cmakelist 示例，将*wtdbo*和*wtdbosqlite3*添加到 TARGET_LINK_LIBRARIES 就足够了。

```
user@debiam:~$ cat /usr/lib/Wt/examples/gitmodel/CMakeLists.txt
IF(NOT WIN32)

IF(BOOST_FS_LIB)
  WT_ADD_EXAMPLE(gitview.wt
    Git.C
    GitModel.C
    ../wt-homepage/SourceView.C
   GitView.C
 )
TARGET_LINK_LIBRARIES(gitview.wt ${BOOST_FS_LIB} ${BOOST_SIGNALS_LIB} ${BOOST_SYSTEM_LIB})

INCLUDE_DIRECTORIES(
  ${WT_SOURCE_DIR}/src
)

ADD_DEPENDENCIES(gitview.wt wt ${EXAMPLES_CONNECTOR})

ELSE(BOOST_FS_LIB)

  MESSAGE(STATUS "** Not building gitmodel example: requires boost_filesystem library.")

ENDIF(BOOST_FS_LIB)

ELSE(NOT WIN32)

  MESSAGE(STATUS "** Not building gitmodel example: uses POSIX calls not available on win32")

ENDIF(NOT WIN32) 
```

.

```
user@debiam:~$ cat /usr/lib/Wt/examples/feature/auth1/CMakeLists.txt
WT_ADD_EXAMPLE(auth1.wt 
        Auth1.C
    model/Session.C
    model/User.C
) 

TARGET_LINK_LIBRARIES(auth1.wt wtdbo wtdbosqlite3 ${BOOST_SIGNALS_LIB} ${BOOST_SYSTEM_LIB})

INCLUDE_DIRECTORIES(${WT_SOURCE_DIR}/src) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T12:24:04.817

看起来您没有将 User.C 作为源文件包含在内？你也可能无意中离开了

```
DBO_EXTERN_TEMPLATES(User); 
```

在你的头文件中，没有任何对应的

```
DBO_INSTANTIATE_TEMPLATES(User); 
```

推荐的解决方法：删除所有 DBO_EXTERN_TEMPLATES(...) 行。

# ruby-on-rails - 在 rails 2.3.8 中查询 Microsoft Server 2008

> ID：13676991
> 
> 赞同：2
> 
> 时间：2012-12-03T04:09:08.790
> 
> 标签：ruby-on-rails, sql-server-2008, dbi, unixodbc

我目前正在使用 rails 2.3.8 和 dbi gem 来访问 mssql 数据库。生产位于交钥匙 Rails VA 中，开发位于 linux VM 中不能考虑更改为 tinytds，因为它会中断并希望使用旧方法。我目前有以下代码设置来访问和查询 mssql

外部数据.rb

```
def self.datapoint_connection(&block)
   db_connection('type1',&block)
end

def self.db_connection(connection_type, &block)
  begin
    conn_data = YAML::load_file("#{Rails.root}/config/eg_databases.yml")[connection_type.to_s]
    driver = conn_data.delete('driver')
    user = conn_data.delete('username')
    password = conn_data.delete('password')
    conn_params = conn_data['entry']
    conn_str = "DBI:#{driver}:#{conn_params}"
    conn = DBI.connect(conn_str, user, password)
    if block_given?
      yield conn
    else
      return conn
    end
  ensure
      # disconnect from server
      conn.disconnect if conn && conn.connected? && block_given?
  end
end 
```

eg_database.yml

```
type1:
  driver: ODBC
  entry: dsn_con1
  username: blah
  password: 'blah' 
```

查询另一个数据库

```
def excluded_testrun_users
  ExternalData.datapoint_connection do |dbh|
    dbh.select_all("SELECT username FROM team where team") do |row|
      puts row
    end
  end
end 
```

整体查询

```
def user_test_run_sql(granularity,date,end_date_condition=false)
  "(select * from test_run where user_id NOT IN 
  (#{excluded_testrun_users.map{|u| DataPoint.sanitize(u)}.join(", ")}) 
   #{' and testrun_end IS NOT NULL' if end_date_condition}) as sub_test_run"
end 
```

我想知道这是否是在 mssql 中访问同一服务器下的多个数据库的正确方法。dsn 是否必须为每个数据库连接更改（创建）但在同一服务器下？

当我尝试跑步时。我收到以下错误

```
Error getting query: Unable to load driver 'ODBC' (underlying error: uninitialized constant DBI::DBD::ODBC)

.... not gonna show stupidly long called path list to every conceivable files for ruby...
/usr/local/rvm/rubies/ruby-1.8.7-p357/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require' 
```

/usr/local/rvm/rubies/ruby-1.8.7-p357/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'

```
script/server:3 
```

任何见解或帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:16:37.743

你可以使用 bundle 来处理你的依赖。在您的 Gemfile 中使用它：

```
source "http://rubygems.org"

group :db do
     gem 'ruby-odbc', :require => 'odbc'
    gem 'tiny_tds'
    gem 'activerecord-sqlserver-adapter', '~> 3.1.0'
end 
```

并确保您安装了 unixODBC 和 UnixODBC-devel 软件包。

我也有一个在线示例：[https ://github.com/fidalgo/ruby-mssql-example](https://github.com/fidalgo/ruby-mssql-example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T05:31:51.747

听起来您没有正确安装 dbi 和 dbd-odbc gem。检查以确保 odbc.so 和 odbc_utr8.so 文件存在并且您可以在 irb 中要求 'odbc'。

[http://gordonotspanish.blogspot.com/2010/02/resolved-uninitialized-constant.html](http://gordonotspanish.blogspot.com/2010/02/resolved-uninitialized-constant.html)

# joomla - 将参数传递给joomla中的自定义字段

> ID：13676994
> 
> 赞同：1
> 
> 时间：2012-12-03T04:09:34.500
> 
> 标签：joomla

我创建了一个自定义字段，当我编辑它时获取相关人员，文章的主题。我想传递这篇文章的类别 ID，但我不知道该怎么做。下面是我的代码：在article.xml

```
<fields name="idn_tags">
        <field name="idn_tags_people" type="IdnTagsPeopleCheckboxes" />
        <field name="idn_tags_subject" type="IdnTagsSubjectCheckboxes" />
</fields> 
```

在edit.php中

```
<?php echo $this->form->getInput('idn_tags_people','idn_tags'); ?>
<?php echo $this->form->getInput('idn_tags_subject','idn_tags'); ?> 
```

在每个类 IdnTagsPeopleCheckboxes 和 IdnTagsSubjectCheckboxes 中，我想传递当前文章的类别 id 以仅获取人员，该类别的主题，哪些文章可能被标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T06:14:54.573

Joomla 已经介绍了将自定义字段添加到文章组件[***阅读此***](http://docs.joomla.org/Adding_custom_fields_to_the_article_component)内容。如果您有任何问题，请告诉我。***[也读这个](https://stackoverflow.com/questions/8168932/how-do-you-add-fields-to-com-content-in-joomla-with-a-plugin-and-store-the-data)***。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T04:22:46.937

好的！只需这样做：

```
<?php $this->form->setValue('idn_tags_people','idn_tags', $[Your Value]); ?>
<?php echo $this->form->getInput('idn_tags_people','idn_tags'); ?> 
```

# c++ - 字节内的字节序

> ID：13676999
> 
> 赞同：2
> 
> 时间：2012-12-03T04:10:18.777
> 
> 标签：c++, endianness

最近我正在追踪一个当网络通信的两端具有不同的字节序时出现的错误。一方已经发送了电报标记`lastSegment`，而另一方仍在无休止地等待最后一段。

我读了这段代码：

```
#ifndef kBigEndian
    struct tTelegram
    {
       u8 lastSegment : 1;
       u8 reserved: 7;
       u8 data[1];
    };
#else
    struct tTelegram
    {
       u8 reserved: 7;
       u8 lastSegment : 1;
       u8 data[1];
    };
#endif 
```

我知道字节序与多字节类型有关，例如 int、long 等。但是为什么它在前面的代码中关心呢？`lastSegment`并且`reserved`在一个字节内。

那是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T04:14:05.233

您的结构中有 16 位。在 32 位或 64 位架构上，*根据字节顺序*，在查看原始二进制文件时可能会`data`出现在“之前”`reserved`或“之后”。`lastSegment`IE 如果我们考虑 32 位，您的结构可能会沿 32 位边界打包。它可能看起来像这样：

```
 padbyte1 padbyte2 data lastSegment+reserved 
```

或者看起来像这样

```
 lastSegment+reserved data padbyte1 padbyte2 
```

因此，当您将这 16 位放在网络上然后在另一端重新解释它们时，您知道您得到的是`data`还是`lastSegment`？

您的问题不在字节内，它`data`与`reserved`and相关`lastSegment`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T04:20:24.390

对于位域，*即使*在同一 CPU 上运行的不同编译器之间也不能保证排序。*从理论上讲*，您甚至可以通过使用相同的编译器更改标志来更改顺序（不过，公平地说，我必须补充一点，我实际上从未见过这种情况发生）。