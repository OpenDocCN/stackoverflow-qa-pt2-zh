# StackOverflow 问答 13561000-13561999

# android - 类似模式的 SQL 接口？

> ID：13561002
> 
> 赞同：1
> 
> 时间：2012-11-26T08:19:23.013
> 
> 标签：android, sqlite

我有两个表，`SyncedComments`并且`QueuedComments`，后者保存本地评论，直到它们与网络服务器同步，当它们成功同步时，它们被放置在同步表中，我的应用程序应该对每种类型都无动于衷。我通过 CursorLoader 加载评论，当用户阅读它们时，它们可能会被移动到同步表中。假设用户也可以编辑评论，也许在他们被移动的时候，所以应用程序应该知道评论在哪里，不管它是表。

为了支持这一点，我想到了一个包含 3 列的表，local_id、synced_id 和 queued_id，local_id 是持久的，并且只是作为对其他两个 id 之一的引用。当创建评论时，插入新行，其 sync_id 设置为 NULL，队列 id 已给出，当评论被移动时，queue_id 设置为 NULL 并设置 sync_id。这样我的应用程序只需要始终引用本地 id。

这个解决方案看起来如何？有什么缺陷吗？它可以做得更聪明吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:34:51.683

我首先将所有评论放在*一个*表中，并带有评论是否同步的标志（实际上它可能是服务器上的 ID，设置为 NULL 直到同步，然后从服务器获取值）。这将使您减少到 1 个表而不是 3 个，使显示所有评论更容易（因为您不需要进行联合），最重要的是避免在显示时同步评论时出现问题，因为评论不会移动到任何地方。而且它对数据库文件的写入更少，因此它会导致更少的碎片和更少的对闪存设备的写入。

# git - 将上游 git 更改与挂起的拉取请求合并

> ID：13561004
> 
> 赞同：17
> 
> 时间：2012-11-26T08:19:41.093
> 
> 标签：git, github

我在 GitHub 上的一个常见工作流程中不断遇到 git 问题。

1.  我分叉一个回购
2.  我提交了一些更改
3.  我向上游仓库发出拉取请求
4.  当上游开发人员坐在我的拉取请求上时，旋转拇指。
5.  上游开发人员对他们的 repo 进行了更改
6.  他们查看您的拉取请求，但由于他们的树中的更改将不再干净地应用，所以他们要求您更新您的拉取请求。
7.  我从上游获取更改并将更改合并到我的存储库中，解决冲突，提交更改
8.  我在我的拉取请求中重新提交提交以使其整洁。

这就是问题所在：我的拉取请求现在包含步骤 2 和 7 之间发生的所有更改，包括上游开发人员自己的更改。在最近的一个示例中，这将一个 10 行的拉取请求扩展到超过 12,000 行。

我应该如何将我的原始提交重新应用到上游 repo 的更高版本，而他们的更改不会进入我的拉取请求？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-08T21:11:05.103

改变这个

> 7）我从上游获取并合并更改到我的仓库中，解决冲突，提交更改。
> 
> 8）我在我的拉取请求中重新提交提交以使其整洁。

到

> 我将我的 repo 重新定位到上游，使其整洁。

我们假设您`feature`从 分叉了分支`upstream/master`，并且为了安全起见，我们将使用临时分支。如果出现问题，只需删除`feature-rebase`分支并重新开始。

```
git checkout feature
git checkout -b feature-rebase
git rebase -i upstream/master 
```

这将在 之上重放您的提交`upstream/master`，就好像您现在已经分叉一样。一旦一切看起来都很好，用重新定位的版本替换旧`feature`分支。

```
git branch -m feature feature-old
git branch -m feature-rebase feature
git branch -d feature-old
git checkout feature
git push -f origin feature 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:26:40.017

如果您已经在这样做，我无法弥补您的问题，但是当您提交拉取请求时，最简单的方法是为其创建一个单独的分支。

这样，您就可以轻松定义拉取请求中应包含哪些提交，并且以后还可以更新拉取请求以包含新更改。

如果您想要合并来自上游的新更改，您可以获取这些更改，并在其上重新设置您的主题分支。

在 github 中发出拉取请求时，您可以选择此分支，以确保拉入正确的提交。

每次你推送到这个分支（甚至 push -f）都会自动更新拉取请求。

# c# - AppDomain.CurrentDomain.GetAssemblies() 在使用 Sybase 时抛出 System.Reflection.ReflectionTypeLoadException

> ID：13561007
> 
> 赞同：2
> 
> 时间：2012-11-26T08:19:51.440
> 
> 标签：c#, reflection

我想我使用了一个很常见的模式：

```
var result = from a in AppDomain.CurrentDomain.GetAssemblies()
                         from t in a.GetTypes()
                         where t.IsDefined(typeof(TAttribute), inherit)
                         select t; 
```

如果我从 Program.cs 调用代码，它就可以工作。

此外，如果我从它的工作形式调用它 - 有时，取决于形式。有时它只是抛出一个错误：Mindestens ein Typ in der Assembly kann nicht geladen werden。Rufen Sie die LoaderExceptions-Eigenschaft ab, wenn Sie weitere Informationen benötigen。

详细信息中有以下信息：

{"Die Datei oder Assembly \"EntityFramework, Version=4.2.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089\" oder eine Abhängigkeit davon wurde nicht gefunden. Das System kann die angegebene Datei nicht finden.":"EntityFramework, Version=4.2 .0.0，文化=中性，PublicKeyToken=b77a5c561934e089"}

这对我来说有点不可思议。据我所知，我们不在任何地方使用 EntityFramework，只有 Telerik 作为 ER。

我在 projekt 目录中做了一个“findstr /s /i /m entityframework *. ”。*

有趣的是，它在 Sybase dll“SQL Anywhere 12\iAnywhere.Data.SQLAnywhere.v4.0.dll”中找到了它。

好吧 - 这看起来有点像 sybase sql 数据提供程序。但据我所知，我们不需要 EntityFramework，并且该项目也可以按预期工作。

我该如何解决这个问题？就像说：我想解析 Appdomain，但不是一些第三方 dll。或者有什么办法可以忽略错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:40:16.173

在这种情况下解析整个 appdomain 将扫描所有加载的 dll，如果它们未在您的应用程序中使用，所有这些类型的所有类型都将被加载事件。我的德语不流利，但我认为该错误意味着找不到 EF dll。需要加载一些您的代码未使用的类，并在一些在 appdomain 中加载的 dll 中声明，并且需要 EF。你说你使用 Telerik，也许它有一些直接使用 EF 的控件？

如果您只想扫描您的 dll，简单的解决方案是引入程序集名称的约定。假设您的所有 dll 都将被命名`OfflerCompany.ProjectName.Something`并扫描 dll 名称以查找`OfflerCompany`.

另请注意，dll 是延迟加载到 appdomain 的，因此如果您希望所有 dll 都存在，您可能会感到失望（如果所有直接使用或至少一次不使用，则可能已经存在）。

您可能需要考虑创建包含需要扫描的所有 dll 名称的配置文件。这是我喜欢的最干净、最透明的解决方案。

# iphone - 集成 ShareKit App iOS 时出错

> ID：13561008
> 
> 赞同：1
> 
> 时间：2012-11-26T08:19:52.300
> 
> 标签：iphone, objective-c, ios, sharekit

我想在我的项目中使用 shareKit 应用程序，但是当我尝试在 facebook 上发布图像时出现此错误。

```
Error: This endpoint has been deprecated. To temporarily enable it, you may disable the "august 2012" platform migration. It will be disabled permanently on August 1, 2012. 
```

我正在使用最新的 SDK 或 ShareKit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:55:25.847

您不需要使用 ShareKit 来实现 Facebook 集成。使用新的 iOS 6`SLComposeViewController`发布到 Facebook

这是发布到 Facebook 的完整代码

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) //check if Facebook Account is linked
    {
      mySLComposerSheet = [[SLComposeViewController alloc] init];
        mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook]; 
                [mySLComposerSheet setInitialText:[NSString stringWithFormat:@"Test",mySLComposerSheet.serviceType]];
       [mySLComposerSheet addImage:yourimage]; //an image you could post
        [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    }
    [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {
        NSString *output;
        switch (result) {
            case SLComposeViewControllerResultCancelled:
                output = @"Action Cancelled";
                break;
            case SLComposeViewControllerResultDone:
                output = @"Post Successfull";
                break;
            default:
                break;
        } 
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Facebook" message:output delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
        [alert show];
    }]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T06:32:48.340

您没有使用最新版本。最新版本是：[ShareKit 2.0](http://github.com/sharekit/sharekit)。

如果你只在 iOS6 上使用 Facebook、Twitter 或新浪微博**，**直接使用 social.network 真的更直接。

# django - django 模板和列表字典

> ID：13561009
> 
> 赞同：12
> 
> 时间：2012-11-26T08:19:55.190
> 
> 标签：django, django-templates

我正在使用 django 的模板系统，我遇到了以下问题：

我将字典对象 example_dictionary 传递给模板：

```
example_dictionary = {key1 : [value11,value12]} 
```

我想做以下事情：

```
{% for key in example_dictionary %}
// stuff here (1)
{% for value in example_dictionary.key %}
// more stuff here (2)
{% endfor %}
{% endfor %} 
```

但是，这不会进入第二个 for 循环。

确实，如果我把

```
{{ key }} 
```

在 (1) 上，它显示了正确的键，但是，

```
{{ example_dictionary.key }} 
```

什么都不显示。

在[这个答案](https://stackoverflow.com/a/6285769/931303)中，有人建议使用

```
{% for key, value in example_dictionary.items %} 
```

但是，这在这种情况下不起作用，因为我希望 (1) 获得有关特定键的信息。

我如何实现这一目标？我错过了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T08:23:14.613

我假设您正在寻找一个嵌套循环。在外部循环中，您使用字典键执行某些操作，并且在嵌套循环中，您迭代可迭代的字典值，在您的情况下是一个列表。

在这种情况下，这是您需要的控制流：

```
{% for key, value_list  in example_dictionary.items %}
  # stuff here (1)
  {% for value in value_list %}
    # more stuff here (2)
  {% endfor %}
{% endfor %} 
```

一个样品：

```
#view to template ctx:
example_dictionary = {'a' : [1,2]}

#template:
{% for key, value_list  in example_dictionary.items %}
  The key is {{key}}
  {% for value in value_list %}
    The key is {{key}} and the value is {{value}}
  {% endfor %}
{% endfor %} 
```

结果将是：

```
The key is a
The key is a and the value is 1
The key is a and the value is 2 
```

如果这不是您想要的，请使用示例来说明您的需求。

# java - 如何在 Java 中 ping 和保存统计信息

> ID：13561010
> 
> 赞同：0
> 
> 时间：2012-11-26T08:20:06.697
> 
> 标签：java, ping, inetaddress

我的任务是用 Java 制作一个简单的控制台 pinger。我尝试了以下代码，但有两个主要问题。

首先，即使我连接到互联网（我可以从控制台 ping 任何站点），当我运行代码时返回 false。

其次，是否可以跟踪 ping 的响应时间？

这是代码：

```
try {
    InetAddress address = InetAddress.getByName(the_link);
    System.out.println(the_link);
    // Try to reach the specified address within the timeout
    // periode. If during this periode the address cannot be
    // reach then the method returns false.
    boolean reachable = address.isReachable(5000);
    System.out.println("Is host reachable? " + reachable);
} catch (Exception e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:50:46.510

对于大多数外部 ip，这不是一个好方法。而是可以使用以下

```
boolean reachable = (java.lang.Runtime.getRuntime().exec("ping -c 1 www.google.lk").waitFor()==0); 
```

# javascript - Javascript document.getElementById().value='' 字段执行但没有效果

> ID：13561012
> 
> 赞同：0
> 
> 时间：2012-11-26T08:20:38.900
> 
> 标签：javascript, jquery, forms, file-io

我正在尝试制作一个按钮来清除它旁边的输入。到目前为止我的代码是这样的，

```
<input type="file" name="lay4img1" id="lay4img1">
<a href="javascript:;"
   onclick="
     if(document.getElementById('lay4img1').value != '') {
       document.getElementById('lay4img1').value = '';
       alert('clear success');
     } else { 
       alert('failed'); 
     }">
   <input type="button" value="Clear">
</a> 
```

当我选择一个文件并使其`lay4img1`具有值，然后按下按钮时，警报`clear success`被执行，所以`document.getElementById`也被执行，但该字段仍然不为空？我的代码有什么问题？

除了`<input type="file" name="lay4img1" id="lay4img1">`，我还有其他字段，所以我不想也不能使用`<button type="reset">`它，因为它会清除整个表单，我认为这不是用户友好的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:31:39.930

这是绑定处理程序的一种可怕方式。此外，用锚包裹按钮是完全没有意义的。考虑使用 JS 添加事件监听器。此侦听器删除旧输入并将其替换为新输入：

HTML：

```
<input id="mybutton" type="button" value="Clear"> 
```

JS：

```
function clickhandler(){
     var input = document.getElementById('lay4img1');

     var replacement = document.createElement('input');
     replacement.type = "file";
     replacement.id = 'lay4img1';
     replacement.name = 'lay4img1';

     if(input.value != '') {
       input.parentElement.replaceChild(replacement, input);
       alert('clear success');
     } else { 
       alert('failed'); 
     }
}
var button = document.getElementById('mybutton');
if (!button.addEventListener) {
    button.attachEvent("onclick", clickhandler);
}
else {
    button.addEventListener("click", clickhandler, false);
} 
```

这是一个演示：http: [//jsfiddle.net/LHM9V/1/](http://jsfiddle.net/LHM9V/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:37:31.883

如果输入字段是同级的，如下所示......你可以试试这个带有`onClick`属性的javascript代码......

```
<form>
     <input type="file" name="lay4img1" id="lay4img1">
     <button type="button" onClick="this.parentNode.getElementsByName('lay4img1')[0].value=new Array();">Clear</button>
</form> 
```

# facebook - 在会话中添加 facebook like 按钮

> ID：13561020
> 
> 赞同：1
> 
> 时间：2012-11-26T08:21:50.610
> 
> 标签：facebook, session, colorbox

我目前在彩盒 iframe 中有以下代码：

```
 <? If($_Session['login']) { ?>

 Complete website + Metaheaders facebook like button + fb like button

 <? } else { header('location: index.php'); ?> 
```

因此，如果有人已登录，则会设置会话并且他可以查看彩盒内容。如果没有设置会话，您将被重定向到主页。

我的问题如下：当有人登录并按下 colorbox iframe 中的 fb like 按钮时，他会抓取 index.php 的数据。当我删除 if session check 语句时，他会从颜色框 iframe 中的元标题中获取正确的数据。如何在 php 会话中使用类似 fb 的按钮

# java - 拍摄图像并裁剪

> ID：13561026
> 
> 赞同：2
> 
> 时间：2012-11-26T08:22:32.130
> 
> 标签：java, android

我正在关注本教程：http: [//mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/](http://mobile.tutsplus.com/tutorials/android/capture-and-crop-an-image-with-the-device-camera/)

我正在尝试创建一个具有 " `take picture`"`Button`和, 的简单活动`ImageView`，然后简单地拍照，然后打开 Android 内置的裁剪活动。我可以毫无意外地打开相机，但是，在拍照时，代码不会将照片发送到裁剪活动。

调用裁剪活动时，它似乎崩溃了。我不确定为什么会发生这种情况；我完全按照这个例子（除了我不需要的开始的 XML 内容），我查看了代码，一切似乎都有意义。我确定这是导致此问题的某个地方的一个小错误。这是我的活动代码：

```
package com.example.project;

import android.app.Activity;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Bundle;
import android.provider.MediaStore;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class ImageChoose extends Activity implements OnClickListener {

//keep track of camera capture intent
final int CAMERA_CAPTURE = 1;
//captured picture uri
private Uri picUri;
final int PIC_CROP = 2;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image_choose);
    Button takePicture = (Button)findViewById(R.id.takePicture);
    takePicture.setOnClickListener(this);
}

public void onClick(View v) {
    if (v.getId() == R.id.takePicture){
        try{
            //use standard intent to capture an image
            Intent captureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            //we will handle the returned data in onActivityResult
            startActivityForResult(captureIntent, CAMERA_CAPTURE);
        }catch(ActivityNotFoundException anfe){
            //display an error message
            String errorMessage = "Your device doesn't support photos!";
            Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
            toast.show();
        }
    }

}

protected void onActivityResult(int requestCode, int resultCode, Intent data){
    if (resultCode == RESULT_OK){
        if (requestCode == CAMERA_CAPTURE){
            picUri = data.getData();
            performCrop();
        }else if(requestCode == PIC_CROP){
            //get the returned data
            Bundle extras = data.getExtras();
            //get the cropped bitmap
            Bitmap thePic = extras.getParcelable("data");
            //retrieve a reference to the ImageView
            ImageView picView = (ImageView)findViewById(R.id.picture);
            //display the returned cropped image
            picView.setImageBitmap(thePic);
        }
    }
}

private void performCrop(){
    try{
        //call the standard crop action intent (the user device may not support it)
        Intent cropIntent = new Intent("com.android.camera.action.CROP");
            //indicate image type and Uri
        cropIntent.setDataAndType(picUri, "image/*");
            //set crop properties
        cropIntent.putExtra("crop", "true");
            //indicate aspect of desired crop
        cropIntent.putExtra("aspectX", 1);
        cropIntent.putExtra("aspectY", 1);
            //indicate output X and Y
        cropIntent.putExtra("outputX", 256);
        cropIntent.putExtra("outputY", 256);
            //retrieve data on return
        cropIntent.putExtra("return-data", true);
            //start the activity - we handle returning in onActivityResult
        startActivityForResult(cropIntent, PIC_CROP);
    }catch(ActivityNotFoundException anfe){
        String errorMessage = "Your device doesn't support photo cropping!";
        Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
        toast.show();
    }
  }

  } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T13:16:50.023

我使用过这种类型的操作。这是我的代码，带有以下链接：-[详细说明](https://stackoverflow.com/questions/13414463/launch-android-camera-intent-and-layout/13414940#13414940)

我希望这会对您有所帮助。我建议您关注以下几行：-

```
Intent camera=new Intent();
camera.setAction(MediaStore.ACTION_IMAGE_CAPTURE);
camera.putExtra("crop", "true"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:50:18.550

裁剪活动是库存 Android 相机应用程序的一部分。它可能在您的设备上可用，也可能不可用，尤其是在您使用自定义/供应商相机应用程序时。如果您希望它可靠地工作，您必须获取裁剪器的代码并将其合并到您自己的应用程序中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T13:23:18.377

```
private void performCrop(){
}
Inside this method we are going to call an Intent to perform the crop, so let’s add “try” and “catch” blocks in case the user device does not support the crop operation:

try {
}
catch(ActivityNotFoundException anfe){
    //display an error message
    String errorMessage = "Whoops - your device doesn't support the crop action!";
    Toast toast = Toast.makeText(this, errorMessage, Toast.LENGTH_SHORT);
    toast.show();
}

    //call the standard crop action intent (the user device may not support it)
Intent cropIntent = new Intent("com.android.camera.action.CROP");
    //indicate image type and Uri
cropIntent.setDataAndType(picUri, "image/*");
    //set crop properties
cropIntent.putExtra("crop", "true");
    //indicate aspect of desired crop
cropIntent.putExtra("aspectX", 1);
cropIntent.putExtra("aspectY", 1);
    //indicate output X and Y
cropIntent.putExtra("outputX", 256);
cropIntent.putExtra("outputY", 256);
    //retrieve data on return
cropIntent.putExtra("return-data", true);
    //start the activity - we handle returning in onActivityResult
startActivityForResult(cropIntent, PIC_CROP);

//keep track of cropping intent
final int PIC_CROP = 2; 
```

# google-maps-api-3 - 多个自定义街景生成

> ID：13561030
> 
> 赞同：3
> 
> 时间：2012-11-26T08:22:43.740
> 
> 标签：google-maps-api-3, panoramas, google-street-view

我想在屏幕上显示另一个街景窗格。我将“redraw()”函数绑定到按钮 onclick 事件。onclick 事件调用 redraw() 函数绘制另一个街景失败。

当在 initialize() 函数中调用 redraw() 函数时，它运行良好。

Q1。为什么这个 redraw() 函数的行为不同？
Q2。我怎样才能让它按我的意愿工作？

```
<!DOCTYPE html>
<html>
<head>
<title>Google Maps JavaScript API v3 Example: Simple Custom StreetView</title>
<meta charset="utf-8">
<link href="/default.css" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
<script>
  var tileSize, worldSize;
  var panorama = null;
  var panorama1 = null;
  var panoOptions = null;
  var panoOptions1 = null;

  function initialize() {
    // Set up Street View and initially set it visible. Register the
    // custom panorama provider function. Set the StreetView to display
    // the custom panorama 'reception' which we check for below.
    panoOptions = {
      pano: 'reception',
      visible: true,
      panoProvider: getCustomPanorama
    }; 
    tileSize = 1024;
    worldSize = 1024;
    panorama = new google.maps.StreetViewPanorama(
      document.getElementById('pano_canvas'), panoOptions);
   //redraw();

  }

  function redraw() {
    // Set up Street View and initially set it visible. Register the
    // custom panorama provider function. Set the StreetView to display
    // the custom panorama 'reception' which we check for below.

    tileSize = 1024;
    worldSize = 1024;

    panoOptions1 = {
      pano: 'reception1',
      visible: true,
      panoProvider: getCustomPanorama1
    };

    panorama1 = new google.maps.StreetViewPanorama(
      document.getElementById('pano_canvas1'), panoOptions1);
  }

  // Return a pano image given the panoID.
  function getCustomPanoramaTileUrl(pano, zoom, tileX, tileY) {
    // Note: robust custom panorama methods would require tiled pano data.
    // Here we're just using a single tile, set to the tile size and equal
    // to the pano "world" size.
    return 'panoReception1024-0.jpg';
  }

  // Return a pano image given the panoID.
  function getCustomPanoramaTileUrl1(pano, zoom, tileX, tileY) {
    // Note: robust custom panorama methods would require tiled pano data.
    // Here we're just using a single tile, set to the tile size and equal
    // to the pano "world" size.
    return 'panoReception1024-0.jpg';
  }

  // Construct the appropriate StreetViewPanoramaData given
  // the passed pano IDs.
  function getCustomPanorama(pano, zoom, tileX, tileY) {
    if (pano == 'reception') {
      return {
        location: {
          pano: 'reception',
          description: 'Google Sydney - Reception'
        },
        links: [],
        // The text for the copyright control.
        copyright: 'Imagery (c) 2010 Google',
        visible: true,
        // The definition of the tiles for this panorama.
        tiles: {
          tileSize: new google.maps.Size(tileSize, 512),
          worldSize: new google.maps.Size(worldSize, 512),
          // The heading in degrees at the origin of the panorama
          // tile set.
          centerHeading: 105,
          getTileUrl: getCustomPanoramaTileUrl
        }
      };
    }
  }

  // Construct the appropriate StreetViewPanoramaData given
  // the passed pano IDs.
  function getCustomPanorama1(pano, zoom, tileX, tileY) {
    if (pano == 'reception1') {
      return {
        location: {
          pano: 'reception1',
          description: 'Google Sydney - Reception'
        },
        links: [],
        visible: true,
        // The text for the copyright control.
        copyright: 'Imagery (c) 2010 Google',
        // The definition of the tiles for this panorama.
        tiles: {
          tileSize: new google.maps.Size(tileSize, 512),
          worldSize: new google.maps.Size(worldSize, 512),
          // The heading in degrees at the origin of the panorama
          // tile set.
          centerHeading: 105,
          getTileUrl: getCustomPanoramaTileUrl1
        }
      };
    }
  }

  google.maps.event.addDomListener(window, 'load', initialize);
 </script>
 </head>
 <body>
 <div>
 <b>Tile Size: </b>
 <select id="tileSize" >
  <option value="256">256</option>
  <option value="512">512</option>
  <option value="768">768</option>
  <option value="1024" selected>1024</option>
  <option value="2048">2048</option>
  </select>
  <b>World Size: </b>
  <select id="worldSize" >
  <option value="256">256</option>
  <option value="512">512</option>
  <option value="768">768</option>
  <option value="1024" selected>1024</option>
  <option value="2048">2048</option>
  </select>
<input type="button" value="Redraw" id="redraw" onclick="redraw()" />
  </div>
  <div id="pano_canvas" style="width: 500px; height: 380px"></div>
  <div id="pano_canvas1" style="width: 500px; height: 380px"></div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T15:21:20.643

我找到了如何使它工作，但仍然不知道为什么。在 redraw() 函数中，我添加了 setPano() 如下。

```
panorama1 = new google.maps.StreetViewPanorama(document.getElementById('pano_canvas1'), panoOptions1);
panorama1.setPano('reception1'); 
```

然后 redraw() 函数按预期工作。否则，不会调用自定义 panoProvider 函数。我想 setPano 在内部调用自定义 panoProvider 函数。

# iphone - iphone忘记密码怎么邮寄

> ID：13561031
> 
> 赞同：1
> 
> 时间：2012-11-26T08:22:45.587
> 
> 标签：iphone, objective-c

我正在开发一个应用程序，我想知道如何在 iPhone 中实现忘记密码的情况。

当用户忘记他们的密码时，我的应用程序中有一个按钮，当我点击它`UIAlertView`打开时，我有一个文本字段，用户必须输入他们的电子邮件地址，密码才能在该邮件 ID 上获取邮件。

我该怎么做，我已经为按钮定义了一个动作，这是代码：

```
-(IBAction)forgetpassword:(id)sender
{
    UIAlertView *av = [[UIAlertView alloc]initWithTitle:@"Forget Password" message:@"Please Enter your Email address " delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"OK", nil];
    av.alertViewStyle = UIAlertViewStylePlainTextInput;
    [av textFieldAtIndex:0].delegate = self;
    [av show];
} 
```

但我需要的只是需要我可以使用的代码并将密码邮寄到用户将输入的电子邮件 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:27:28.423

只需将委托添加`MFMessageComposeViewControllerDelegate`到 .h 文件，然后在您想发送电子邮件时使用此代码，并`MessageUI.framework`在项目中添加框架

```
-(IBAction)forgetpassword:(id)sender
{
     if ([MFMailComposeViewController canSendMail]) 
     {

        MFMailComposeViewController *mailComposeViewController = [[MFMailComposeViewController alloc] init];
        NSString *mailBody = @"your Message";

        [mailComposeViewController setMessageBody:mailBody isHTML:NO];
        mailComposeViewController.mailComposeDelegate = self;
        [self presentViewController:mailComposeViewController animated:YES completion:nil];
    } 
    else 
    {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"e-Mail Sending Alert"
                                                        message:@"You can't send a mail"
                                                       delegate:nil
                                              cancelButtonTitle:@"OK" 
                                              otherButtonTitles:nil];
        [alert show];
        [alert release];
    }
} 
```

这个波纹管方法是委托方法`MFMessageComposeViewControllerDelegate`

```
#pragma mark - MFMessage Delegate

- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)mailComposeController:(MFMailComposeViewController*)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError*)error
{
    if (result == MFMailComposeResultSent) 
    {
        NSLog(@"\n\n Email Sent");
    }
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

您还可以使用[SKPSMTPmessage](https://github.com/jetseven/skpsmtpmessage)网络服务发送电子邮件

我希望这可以帮助你...

# actionscript-3 - 如何在 Adob e Air 上使用 Facebook 请求？

> ID：13561032
> 
> 赞同：1
> 
> 时间：2012-11-26T08:22:46.033
> 
> 标签：actionscript-3, facebook-graph-api, apache-flex, air, flex4.5

我在这样的 Web 应用程序中使用了 Facebook 请求。

```
Facebook.ui( "apprequests", {message:"blrablrablra"}, CallBackFuction, null ); 
```

但是在空中，Mobile 没有`ui`；只有`api`所以我不知道我必须做什么。

如何使用 Facebook 请求`FacebookMobile.api`？

无论如何，这可能吗？

# javascript - 如何将参数从 iframe 传递到 iframe？

> ID：13561033
> 
> 赞同：0
> 
> 时间：2012-11-26T08:22:46.430
> 
> 标签：javascript, jsp, iframe

我有一个名为 parent.jsp 的父 jsp。这会生成一个名为 iframe1 的 iframe，而后者又会构建一个名为 iframe2 的 iframe。

从 parent.jsp ：

```
<iframe id="iframe1" style="display:none;" height="430" 
width="675" 
src="iframe1.jsp?myNumber=<%= bean.getMyNumber() %>" > 
```

在这里，我在 iframe1.jsp 中使用：

```
String myNumber=request.getParameter("myNumber"); 
```

现在我需要再次将它传递给 iframe2.jsp。为此，我调用了一个名为：createSecondIframe() 的 javascript 方法。在这里我像这样使用它：

```
createSecondIframe(myNumber)
{
ifrm.setAttribute("src", "iframe2.jsp?myNO=myNumber");
} 
```

这里 iframe2 使用所有视觉内容创建，但是当我这样做时 myNumber 没有被传递：

```
System.out.println("MyNo::"+request.getParameter("myNO")); 
```

我明白了，MyNO 为空。

**编辑 ：**

根据布鲁诺的建议，这个函数调用 createSecondIframe() ：

```
function iframe1(myNumber)
{
var parentDynamicDiv = window.parent.document.getElementById('overlay1');
var iframe = window.parent.document.getElementById('container1');

iframe.style.display = 'none';
parentDynamicDiv.style.display = 'none';
createSecondIframe(myNumber);
} 
```

我哪里错了？请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:32:40.120

您没有使用 myNO 变量，而是将 myNO 指定为字符串。试试这个

```
createSecondIframe(myNumber)
{
    ifrm.setAttribute("src", "iframe2.jsp?myNO=" + myNumber);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:36:39.253

`myNumber`浏览器对 servlet 上下文中存在哪些内容一无所知。您必须在客户端代码中的某处明确定义它。

```
<script type="text/javascript">
    var myNumber = <%= myNumber %>; 
</script>

createSecondIframe(num)
{
ifrm.setAttribute("src", "iframe2.jsp?myNO="+ num);
} 
```

然后打电话`createSecondIframe`给`myNumber`

```
createSecondIframe(myNumber) 
```

# spring - Spring Hibernate JPA不在同一个表中保存多行

> ID：13561037
> 
> 赞同：1
> 
> 时间：2012-11-26T08:23:00.627
> 
> 标签：spring, jpa, persistence

我正在研究用户可以向多个人发送消息的要求，我必须将这些消息保存在消息表中。
我使用 JPA entityManager 来持久化对象，使用 Hibernate 作为持久性提供者和 Spring 声明式事务管理。

即使我执行了 3 次 persist() 方法，它也只在表中保存了一行。我不知道该怎么做才能保存所有消息。它不显示任何异常消息。

以下是我在 applicationContext.xml 中的声明式事务管理配置

```
 <tx:advice id="txAdvice" >

    <tx:attributes>

        <tx:method
            name="*"
            propagation="REQUIRED" />
    </tx:attributes>
</tx:advice>

<aop:config>

    <aop:pointcut
        id="messageServiceOperation"
        expression="execution(* com.abhinow.message.services.*.*(..))" />

    <aop:advisor
        advice-ref="txAdvice"
        pointcut-ref="messageServiceOperation" />
</aop:config> 
```

以下是我的服务类 MessageService.java 中的代码

```
 private void saveMultipleMessages(SentMessage message) {
    String[] toAddresses = message.getMultipleDestinations().split(",");
    for(String to: toAddresses) {
        message.setTo(to);
    saveMessage(message);
    }
}

public void saveMessage(SentMessage message) {
    messageRepository.saveSentMessage(message);
} 
```

以下是我的 MessageRepository.java 中的代码

```
 @Repository
  public class MessageRepository {

   @PersistenceContext
   EntityManager entityManagerFactory;

   public void saveSentMessage(SentMessage message) {

    entityManagerFactory.persist(message);

    }
      } 
```

任何帮助，将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:30:24.077

看起来您在 for 循环中重新使用了相同的 SentMessage 对象。我的猜测是 JPA 会检测到它已经持久化了这个对象并且不会再持久化它。

尝试这样的事情：

```
private void saveMultipleMessages(SentMessage message) {
    String[] toAddresses = message.getMultipleDestinations().split(",");
    for(String to: toAddresses) {
        SentMessage toSave = message.withToAddress(to);
        saveMessage(toSave);
    }
} 
```

其中 " `withToAddress`" 基于当前创建了一个新的 SentMessage 对象，但地址不同。当您使用这种技术时，您可以使 SentMessage 不可变，这通常比可变对象具有优势。

# javascript - 在文件输入更改时异步将图像上传到亚马逊 s3

> ID：13561039
> 
> 赞同：1
> 
> 时间：2012-11-26T08:23:08.320
> 
> 标签：javascript, jquery, ajax, image, amazon-s3

我知道 jquery-file-upload 和 uploadify，但两者似乎都依赖于指示用户界面的闪存解决方案/回退。

### 如何仅使用 javascript 异步上传图像文件？

每次文件输入发生变化时，我都想将图片上传到s3，然后将图片位置异步保存到数据库中。一些想法：

*   直接发布到 Amazon s3，并在成功时将图像位置发布到数据库

但是，我不确定如何在不泄露敏感 s3 密钥的情况下处理对 s3 的身份验证访问。

另外，我如何保证新图像文件的名称是唯一的？

*   以某种方式序列化图像数据，将其作为带有 ajax 的字符串发布

然后服务器会放入s3存储桶，保存位置等。图像数据可以正确序列化并重新制作成图像吗？我知道您可以使用 显示预览图像`FileReader`，因此我可以使用它获取图像数据。

* * *

请让我知道上述方法之一是否可行，或者是否有一种简单的方法可以使这样的事情起作用：

```
$('#file-upload').change(function() {
  // Asynchronously get image on amazon s3 and saved in the database
}); 
```

应该是可能的，但是我看到的所有示例都与带有插件解决方案的用户界面非常相关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:00:10.803

忘了这个问题！通过阻止正常的表单提交使其工作，如下所示：

```
var path = $('#form').attr('action');
$('#form').submit(function(evnt) {
  // stop normal submission
  evnt.preventDefault();  

  // POST it asynchronously
  var formData = new FormData(this);
  $.ajax({
    url: path,
    type: 'POST',
    data: formData,
    cache: false,
    contentType: false,
    processData: false
  });
}); 
```

# notifications - 连接到 kset->uevent_ops 以获取设备通知

> ID：13561045
> 
> 赞同：1
> 
> 时间：2012-11-26T08:23:51.937
> 
> 标签：notifications, linux-kernel, linux-device-driver, embedded-linux, udev

在 Linux 内核版本 2.6.34 之前，我曾经挂接到 uevent_ops 以在我的块设备驱动程序的 init_module 中获取设备添加/删除通知。

```
 my_uevent_ops = kset->uevent_ops;

    kset->uevent_ops = my_uevent_ops_callback; 
```

现在我想将我的驱动程序移植到 3.2 ，但是 kset->uevent_ops 是恒定的，所以我不能加入它。他们有什么方法可以在我的设备驱动程序中获取块设备驱动程序的通知吗？我也可以将通知链用于块设备吗？

提前致谢。

# html - 使用 locationchange 事件时如何使用 mx:html 捕获 302 重定向

> ID：13561050
> 
> 赞同：0
> 
> 时间：2012-11-26T08:24:16.397
> 
> 标签：html, apache-flex, oauth, air, http-status-code-302

我想要一个空中应用程序来制作一个 OAuth 应用程序。但是当我得到 302 重定向时，无法触发`locationChange`事件`mx:html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T01:25:14.000

您可以设置 html.location，并且您可以通过查看 locationChange 事件上的 html.location 来捕获重定向。

如果您想在 html 组件使用它之前捕获重定向，您可以尝试挂钩 htmlLoader

# jquery - 如何在 textarea 中检测域名（例如： .com 、 .org 等）并使用 jquery 将该域显示为 url？

> ID：13561052
> 
> 赞同：-3
> 
> 时间：2012-11-26T08:24:30.160
> 
> 标签：jquery

我是 JQuery 的新手。我在文本区域（可能存在普通文本）中检测域名（例如：www.google.com、rubyonrails.org 等）时遇到问题，并且仅在查看整个文本时将该域名显示为超链接另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:59:38.643

以下代码将从字符串中查找域。您可以在文本区域中的某些事件上使用此代码，然后将匹配的字符串用作 a 的 href**标签。**

 **```
var str = "This is text string. Here comes the domain http://www.w3schools.com/js/js_obj_regexp.asp Its another Test String.";
var pattern = /((?:(?:http|ftp):\/\/)[^ ]*)/gi;
console.log(str.match(pattern)); 
```**

# c# - Dictionary.TryGetValue 中的 out 参数是否通过引用值指向

> ID：13561053
> 
> 赞同：7
> 
> 时间：2012-11-26T08:24:35.447
> 
> 标签：c#, dictionary, reference

考虑我是否有`Dictionary<Key,List<item>>` `TestDictionary`

如果我做：

```
List<item> someCollection;
TestDictionary.TryGetValue(someKey,out someCollection); //assuming that someCollection will not return null;
someCollection.add(someItem); 
```

对象`someItem`会被添加到集合中的`Dictionary`value`TestDictionary[someKey]`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T08:27:12.433

是的，如果它是 Ref 类型，您将拥有该对象的引用，如果它是 Value 类型，当然还有一个副本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:48:51.877

Jon Skeet 在这方面发表了[很棒的文章](http://msmvps.com/blogs/jon_skeet/archive/2012/11/24/stack-overflow-question-checklist.aspx)。但是，无论如何，这里的代码片段可以帮助你：

```
class Item
{}

void Main()
{
    var dictionary = new Dictionary<int, Item>();
    dictionary[1] = new Item();

    Item i1;
    Item i2;

    dictionary.TryGetValue(1, out i1);
    dictionary.TryGetValue(1, out i2);

    Debug.Assert(object.ReferenceEquals(i1, i2));
} 
```

# asp.net - jQuery 工具提示在 AJAX DOM 更新后消失

> ID：13561054
> 
> 赞同：0
> 
> 时间：2012-11-26T08:24:36.617
> 
> 标签：asp.net, jquery-ui, updatepanel, jquery-tooltip

在我的布局模板中，就在关闭 body 标记之前，我有一个初始化 jQuery 工具提示的 Javascript。这是（没什么特别的）：

```
$('.grid-column-header, .small-button, .text-with-second-content').tooltip({ show: { effect: "none"} }); 
```

在我执行 AJAX 更新之前一切正常。例如，一个 ASP。NET UpdatePanel 替换了我的 DOM 的一部分。替换 DOM 后，jQuery tooltip 消失。

有没有办法解决这个问题？

ps 这个问题适用于其他插件。有时我只是通过在 AJAX 调用后再次调用 pluting 初始化代码来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:49:12.837

```
function InitTooltip(){$('.grid-column-header, .small-button, .text-with-second-content').tooltip({ show: { effect: "none"} });}
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(InitTooltip); 
```

# ios - 使用armv7s无法从atos获取正确的代码位置

> ID：13561059
> 
> 赞同：0
> 
> 时间：2012-11-26T08:25:08.163
> 
> 标签：ios, ios6

我试图象征 iOS 崩溃报告

```
zhou:bin zhou$ ./atos -arch armv7s -o ktv 0x001145fb 
```

我得到以下结果

```
-[InviteChorusCell showDuetWorks] (in ktv) (InviteChorusCell.mm:108) 
```

一切似乎都正常，我确定我的 dsym 文件和 atos 文件是正确的，而且我确定他给我的文件名和行号不正确，我找不到正确的比较错误。有没有人和我遇到同样的问题？我非常感谢。

对不起我的廉价英语。

```
 *** -[NSURL initFileURLWithPath:]: nil string parameter 
(null)
(
    0   CoreFoundation                      0x3595f8a7 __exceptionPreprocess + 186
    1   libobjc.A.dylib                     0x37d06259 objc_exception_throw + 32
    2   CoreFoundation                      0x3595f789 +[NSException raise:format:] + 0
    3   CoreFoundation                      0x3595f7ab +[NSException raise:format:] + 34
    4   Foundation                          0x353f005f -[NSURL(NSURL) initFileURLWithPath:] + 78
    5   Foundation                          0x353efffb +[NSURL(NSURL) fileURLWithPath:] + 42
    6   ktv                                 0x0005ae25 _mh_execute_header + 93733
    7   ktv                                 0x00063a25 _ZNSt11_Deque_baseIsSaIsEE15_M_create_nodesEPPsS3_ + 27336
    8   ktv                                 0x0007341b _ZNSt11_Deque_baseIsSaIsEE15_M_create_nodesEPPsS3_ + 91326
    9   ktv                                 0x00064b8f _ZNSt11_Deque_baseIsSaIsEE15_M_create_nodesEPPsS3_ + 31794
    10  ktv                                 0x0007349b _ZNSt11_Deque_baseIsSaIsEE15_M_create_nodesEPPsS3_ + 91454
    11  Foundation                          0x3548360d __NSFireTimer + 144
    12  CoreFoundation                      0x35933a33 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
    13  CoreFoundation                      0x35933699 __CFRunLoopDoTimer + 364
    14  CoreFoundation                      0x3593226f __CFRunLoopRun + 1206
    15  CoreFoundation                      0x358b54a5 CFRunLoopRunSpecific + 300
    16  CoreFoundation                      0x358b536d CFRunLoopRunInMode + 104
    17  GraphicsServices                    0x37551439 GSEventRunModal + 136
    18  UIKit                               0x333c1cd5 UIApplicationMain + 1080
    19  ktv                                 0x0004d8af _mh_execute_header + 39087
    20  ktv                                 0x00046160 _mh_execute_header + 8544
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:34:18.137

您是否正确计算了地址？

我在这里写了一个类似问题的答案：[https ://stackoverflow.com/a/13576028/474794](https://stackoverflow.com/a/13576028/474794)

# sharepoint - 如何自定义内容查询 Web 部件的 HTML 代码

> ID：13561062
> 
> 赞同：1
> 
> 时间：2012-11-26T08:25:10.470
> 
> 标签：sharepoint, xslt, sharepoint-2010

我想自定义 CQWP 的输出 HTML 代码，我不想看到`<table class="s4-wpTopTable">...</table>`。但即使我尝试在本文的帮助下编辑 ContentQueryMain.xsl 文件：[Customizing the HTML code of a Content Query Web Part](https://www.nothingbutsharepoint.com/sites/eusp/Pages/Customizing-the-HTML-code-of-a-Content-Query-Web-Part.aspx)，表格仍然存在。我什至找不到任何生成表格的代码，哪个类是“s4 -wpTopTable”。所以，我需要一些人才来告诉我如何阻止 CQWP 生成 TABLE。

我尝试将 Content Query Webpart 的 SuppressWebPartChrome 设置为“True”，但表格仍然存在，这是个大问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:23:48.677

我遇到了像您一样的问题，因此我决定开发一个 Web 部件，以便轻松自定义门户的外观和感觉。您可以在此处找到有关它的详细信息：[项目列表器 Web 部件](http://www.spwp.net/web-parts/item-lister-web-part.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:57:07.360

如果要自定义 CQWP 的输出 HTML，您应该：

1.  确保您的 CQWP 不在 webpartzone 中，因为 webpartzone 将使`SuppressWebPartChrome`您的 webpart 不起作用。
2.  在 SPD 的帮助下将您的 webpart 插入页面，然后在代码视图中，您可以将 CQWP 的 SuppressWebPartChrome 更改为`True`（默认为 False）。
3.  看看你页面的源代码，`<table class="s4-wpTopTable">...</table>`现在没有了，酷！
4.  CQWP的sharepoint生成的任何其他附加代码，您可以在您的ContentQueryMain.xsl文件中自定义它，所以您应该学习语言--XSTL。不要害怕它，一小时就可以轻松学会.

# java - 如何检查字符串是否以确切的字符串结尾？

> ID：13561063
> 
> 赞同：2
> 
> 时间：2012-11-26T08:25:11.300
> 
> 标签：java, string

输入是 XYZ

String 数组包含三个字符串，即

1.  test.alpha.beta.XYZWorld
2.  test.gamaa.mu.XYZ
3.  测试.nu.tera.XYZ

如果我提供输入“XYZ”，我需要最后两个结果。不是 test.alpha.beta.XYZWorld。如果我使用 java.lang.String 中定义的 lastIndexOf 方法，显然它返回 1,2 和 3 结果。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:27:04.477

中有一个`endsWith()`方法`String`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:27:25.590

查看**String API中的**[**String.endsWith(suffix)**](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#endsWith%28java.lang.String%29)方法。它返回一个**布尔值**。

 ****```
 String s = "test.gamaa.mu.XYZ";
  System.out.println(s.endsWith("XYZ"));

  returns TRUE 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T08:31:45.917

```
 String pattern = "xyz";
    String a = "xyz";
    String b = "xyzA";

    int position = b.lastIndexOf(pattern);
    if (b.length() == position + pattern.length())
    {
       System.out.print("OK");
    } else
    {
        //error
    } 
```****

# c++ - C ++：将字符串附加到循环中第一个和最后一个数组索引的输出

> ID：13561065
> 
> 赞同：0
> 
> 时间：2012-11-26T08:25:15.760
> 
> 标签：c++, arrays

我试图尽可能地说出标题。在这里，我有一个函数，它通过两个并行数组进行索引，然后以某种格式输出它们。

```
void outputTable(string salsa_jars[], int jars_sold[], int index[])
{
   int totalSold = 0;
   cout << setw(8) << "\nSalsa type sells: " << endl
        << "-------------------------------" << endl;

   for(int i = 0; i <= (SALSA_TYPES-1); i++)
   {
    totalSold += jars_sold[index[i]];
    cout << setw(15) << left << salsa_jars[index[i]]
         << setw(15) << right << jars_sold[index[i]] << endl;
   }

   cout << "-------------------------------" << endl
        << "Total sales: " << setw(17) << totalSold << endl;
} 
```

![在此处输入图像描述](../Images/a63553a119163f5efa65d821d780930e.png)

我想要实现的是在数组的第一个和最后一个输出中添加一个字符串。下面是我的尝试。

```
void outputTable(string salsa_jars[], int jars_sold[], int index[])
{
   int totalSold = 0;
   cout << setw(8) << "\nSalsa type sells: " << endl
        << "-------------------------------" << endl;

   for(int i=0;i<=(SALSA_TYPES-1);i++)
   {
      if(i == 0){
      cout << setw(7) << left << salsa_jars[index[i]]
           << "(Highest)" << setw(14) << right
           << jars_sold[index[i]] << endl;
      }
      else if (i == (SALSA_TYPES-1)){
        cout << setw(7) << left << salsa_jars[index[i]]
        << "(Lowest)" << setw(15) << right
        << jars_sold[index[i]] << endl;
      }
      else{
        totalSold += jars_sold[index[i]];
        cout << setw(15) << left << salsa_jars[index[i]]
             << setw(15) << right << jars_sold[index[i]] << endl;
      }
    }  

    cout << "-------------------------------" << endl
         << "Total sales: " << setw(17) << totalSold << endl;
} 
```

![在此处输入图像描述](../Images/36ec2e78ff70da8d141f5a358d43175b.png)

但是代码似乎是多余的，我想不出任何其他方法来做到这一点。如果有人有任何指示，我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:31:43.830

只需为条目准备适当的标题，并使用通用逻辑来显示它：

```
for(int i=0;i<=(SALSA_TYPES-1);i++)
{
   string title = toString(salsa_jars[index[i]]);
   if(i == 0){
       title += " (Highest)";
   }
   else if (i == (SALSA_TYPES-1)){
     title += " (Lowest)";
   }
     totalSold += jars_sold[index[i]];
     cout << setw(15) << left << title
          << setw(15) << right << jars_sold[index[i]] << endl;
   }
 } 
```

# android - 下载文件的最新版本

> ID：13561071
> 
> 赞同：0
> 
> 时间：2012-11-26T08:26:24.353
> 
> 标签：android, download, httpurlconnection

我正在使用以下代码从我控制的网络服务器下载文件

```
URL url = new URL("http://........");
HttpURLConnection connection = (HttpURLConnection)url.openConnection();
connection.setDefaultUseCaches(false);
connection.setUseCaches(false);
connection.setRequestMethod("GET");
connection.setDoOutput("true");
connection.connect();

InputStream in = connection.getInputStream();
File dst = new File(".......");
FileOutputStream out = new FileOutputStream(dst);
byte[] buffer = new byte[1024];
int len = 0;
while ((len=in.read(buffer))>0) {
    out.write(buffer,0,len);
}

connection.disconnect();
in.close();
out.close(); 
```

减去所有必要的尝试捕获。上面的代码适用于将文件下载到我的特定目的地。但是无法下载最新版本（例如，如果我更改网络服务器上的文件内容）

就好像某物正在保留它之前下载的文件的某种缓存，只要 URL 与以前相同，它就会发回相同的文件。我的数据连接在下载期间变为活动状态，因此我的服务提供商可能会出现这种情况

我需要的是某种方式来强制我的代码主动刷新目标文件。我发现网络浏览器能够做到这一点。如果我用网络浏览器输入链接，然后再次运行我的代码，最新版本会被下载

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:28:11.407

尝试`?time=201211261200`在 URL 的末尾添加一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:01:20.927

要么在服务器上修复它，要么在客户端修复它。

客户端：尝试通过添加随机值使 URL 随机化。因此，总是会下载最新版本。

```
Random r = new Random();
int someValue = r.nextInt(10000);

"http://someurl" + "?t=" + someValue; 
```

# django - django 通知。如何使用线程电子邮件发送？

> ID：13561076
> 
> 赞同：0
> 
> 时间：2012-11-26T08:26:55.087
> 
> 标签：django, django-notification

在我`django-notification`用来发送通知的 django 应用程序中。但是我注意到在某些情况下（发送多个通知时）我的 Web 应用程序会延迟响应。尽管我通过 Ajax 请求发送通知，但我仍然认为最好实现`mailtools`提供线程电子邮件的库。

有没有人实施过这样的事情？这简单吗？我如何使用`ThreadedMailer`from `mailtools`in `django-notification`？

或者，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:32:48.640

为此目的使用[芹菜。](http://celeryproject.org/)使用 django 很容易设置，您可以使用您现在正在使用的代码。

ajax 请求将电子邮件放入任务队列并返回。如果您想稍后检查任务是否成功，您可以返回您的任务 ID。

**更新：**

Celery 只允许你在后台调用你的函数。在你调用的 ajax 视图中说：

```
send_email(…) 
```

现在`tasks.py`你应该定义函数：

```
@task
def send_email(…) 
```

在视图中，您将通过以下方式调用它：

```
send_email.delay(…) 
```

就是这样。该电子邮件将由后台工作程序守护程序使用您现有的 python 代码发送。

这不会`django-notification`过时。Celery 做了完全不同的事情，可以与你能想象到的任何库一起使用。

唯一的变化是任务参数必须是可选的。这意味着您必须传递数据库 ID，而不是整个对象等。

# ios6 - iOS 6 中的 pausesLocationUpdatesAutomatically 无法按预期工作

> ID：13561080
> 
> 赞同：5
> 
> 时间：2012-11-26T08:27:04.793
> 
> 标签：ios6, cllocationmanager

我想实现一个功能，其中我使用 GPS 进行位置更新，当用户不移动时，我希望暂停 GPS 更新。根据“*与位置服务保持同步*”视频，我这样做了：

```
 //Configure Location Manager
 self.theLocationManager = [[CLLocationManager alloc]init];
[self.theLocationManager setDelegate:self];
[self.theLocationManager setDesiredAccuracy:kCLLocationAccuracyBest];
[self.theLocationManager setActivityType:CLActivityTypeFitness];

 NSLog(@"Activity Type Set: CLActivityTypeFitness");

[self.theLocationManager setPausesLocationUpdatesAutomatically:YES];
[self.theLocationManager startUpdatingLocation]; 
```

代表：

```
- (void)locationManager:(CLLocationManager *)manager
    didUpdateLocations:(NSArray *)locations
{
    NSLog(@"Started location Updates");
}

- (void)locationManagerDidPauseLocationUpdates:(CLLocationManager *)manager
{
    NSLog(@"Pausing location Updates");
}

- (void)locationManagerDidResumeLocationUpdates:(CLLocationManager *)manager
{
    NSLog(@"Resuming location Updates");

    UIAlertView *pop = [[UIAlertView alloc]initWithTitle:@"Info" message:@"Location    Updates resumed" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [pop show];
    [pop release];
} 
```

我没有得到想要的行为，并且当设备空闲时，甚至没有调用代表“didPause..”和“didResume...”。

理想情况下，GPS 更新必须根据设备的状态和 CLActivityType 停止和恢复，但此处并非如此。

谁能帮助我，我做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T02:53:58.930

如果您让设备在同一位置停留约 15 分钟，则应该会出现暂停。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T16:05:03.523

当 locationManagerDidPauseLocationUpdates: listener 被调用时，您可能应该使用区域位置。请参阅这篇文章中第一个答案的更新： [iOS 6 AutoPause doesn't work](https://stackoverflow.com/questions/12920911/ios-6-autopause-doesnt-work)

# android - 获取每个 facebook 专辑 wrt 专辑 id 的专辑 - facebook android-sdk

> ID：13561082
> 
> 赞同：0
> 
> 时间：2012-11-26T08:27:09.953
> 
> 标签：android, facebook, photos

我使用 facebook android sdk 获得了所有 facebook 专辑（及其 id），并将它们显示在列表中。现在点击特定列表项，我想获取该专辑的所有照片（wrt“id”）

我通过这种方式获得了专辑 ID：

```
if (!facebook.isSessionValid()) {
        facebook.authorize(this, new String[] { "user_photos" },

        new DialogListener() {

            public void onComplete(Bundle values) {

            mAsyncRunner.request("me/albums", new albumsRequestListener()); 
            }

            public void onFacebookError(FacebookError error) {
            }

            public void onError(DialogError e) {
            }

            public void onCancel() {
            }
        });
    }

public class albumsRequestListener implements RequestListener {

    public void onComplete(String response, Object state) {
        // TODO Auto-generated method stub

        try {

            Log.d("Facebook-Example", "Response: " + response.toString());
            JSONObject json = Util.parseJson(response);
            String count = "0";
            JSONArray jArrData = new JSONArray();
            jArrData = json.getJSONArray("data");

            for (int i = 0; i < jArrData.length(); i++) {

                JSONObject objAlbum = jArrData.getJSONObject(i);

                String albumId = objAlbum
                        .getString("id");
                String albumName = objAlbum
                        .getString("name");

                if(objAlbum.has("count"))
                        {
                    count = objAlbum.getString("count");
                        }
                else
                    {
                    count = "0";
                    }

                FbAlbums obj = new FbAlbums();

                obj.setId(albumId);
                obj.setName(albumName);
                obj.setCount(count);

                listFbAlbums.add(obj);
            }

              FB.this.runOnUiThread(new Runnable() {
                    public void run() {
                        adapter = new FbAlbumsListAdapter(
                                getApplicationContext(),listFbAlbums);
                        lvAlmbums.setAdapter(adapter);
                        pb.setVisibility(View.INVISIBLE);

                        lvAlmbums.setOnItemClickListener(new OnItemClickListener() {

                            public void onItemClick(AdapterView<?> parent, View view,
                                    int position, long id) {
                                Toast.makeText(getApplicationContext(), position, Toast.LENGTH_SHORT).show();
                            }

                    });
                    }

                });
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
    }

    public void onIOException(IOException e, Object state) {
        // TODO Auto-generated method stub

    }

    public void onFileNotFoundException(FileNotFoundException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    public void onMalformedURLException(MalformedURLException e,
            Object state) {
        // TODO Auto-generated method stub

    }

    public void onFacebookError(FacebookError e, Object state) {
        // TODO Auto-generated method stub

    }

} 
```

如何获取包含每个专辑图像来源的 json？还是有其他方法？任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:52:29.573

只需使用相册 ID 并在末尾添加 /photos 即可：

```
mAsyncRunner.request(albumid+"/photos", new photosRequestListener()); 
```

# c - 来自内核模块中的函数的 EFAULT

> ID：13561102
> 
> 赞同：1
> 
> 时间：2012-11-26T08:28:14.740
> 
> 标签：c, linux-kernel, kernel-module, kernel, rootkit

我试图通过检查它们的 inode 和设备 ID 是否匹配来比较两个文件名是否引用同一个文件。目前，我打电话`vfs_stat`来获取ID。

问题是，如果我传递`vfs_stat`一个存储在用户空间中的文件名，它可以正常工作，但是如果我传递一个文件名，该文件名作为全局变量存储在我的内核模块中，它会出错`EFAULT`

如果两个文件相同，是否有其他方法可以获取 ID 或比较？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:05:24.093

`vfs_stat`获取存储在用户空间中的文件名。但是，如果您在源代码中跟踪该调用，您会看到（在 fs/stat.c 中）基本上有两个部分。从用户空间文件名字符串中查找`struct path`，然后根据路径结构的内容调用 VFS stat 操作。所以你可以从内核空间做同样的事情。查看`kern_path()`以查找`struct path`存储在内核空间中的文件名。从那里，你可以`vfs_getattr()`直接打电话。完成后不要忘记`path_put`。

基本上，您正在使用`vfs_fstatat()`. 但也要考虑是否可以在没有 stat 调用的情况下进行管理。在 path 结构中的某个地方有一个 inode 指针，这对于您正在尝试做的事情可能已经足够了。

# c++ - 针对推送优化的线程安全 C/C++ 队列

> ID：13561106
> 
> 赞同：5
> 
> 时间：2012-11-26T08:28:34.750
> 
> 标签：c++, c, thread-safety, queue

我正在寻找针对推送操作进行优化的线程安全 C/C++ 队列实现。我不介意弹出操作是否阻塞，但我希望永远不会在推送端阻塞。

让我解释一下为什么。我计划为 C# 应用程序编写探查器，我将有多个线程将消息推送到单个调度程序线程。我不介意调度程序是否会很快阻塞，但我想避免推送方面的任何延迟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T11:33:51.070

您可以使用[boost.lockfree](http://boost-sandbox.sourceforge.net/doc/html/boost/lockfree/queue.html)。它在 boost 沙箱 svn 中，计划在 1.53 或 1.54 版本中与 boost 一起发布，具体取决于 boost.atomic 是否及时发布。目前 boost.lockfree 依赖于 std::atomic 而不是 boost.atomic，所以你需要一个 c+11 编译器来使用它。

# android - 如何保持列表视图内容的更改颜色不变，直到在列表视图中选择另一个项目？

> ID：13561107
> 
> 赞同：1
> 
> 时间：2012-11-26T08:28:36.210
> 
> 标签：android, android-layout, android-intent, android-emulator

我正在开发一个项目，在该项目中，我需要在选择 ListView 的项目时更改 ListView 中的文本颜色。

我可以在选择列表项时更改文本的颜色，但是几秒钟后，颜色会变回原来的颜色。在单击另一个列表项之前，我希望该颜色保持不变。看看下面的截图：

![在此处输入图像描述](../Images/3bce60ac33cf3350dd8c28bd77ed3681.png)

单击 ListView 的项目时，我可以将更改后的颜色文本变为白色，但几秒钟后，文本会变回以前的颜色。

我想保持 textview 的白色，直到我单击 ListView 的其他项目。

以下是我的 textviews 选择器文件。对于黑色文本：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true"  android:color="@android:color/white"/>
    <item android:state_focused="true"  android:color="@android:color/white"/>
    <item android:state_selected="false" android:color="@android:color/black"/> 
</selector> 
```

对于红色文本：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_selected="true" android:color="@android:color/white"/>
    <item android:state_focused="true" android:color="@android:color/white"/>
    <item android:state_selected="false" android:color="@color/red"/>
</selector> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:39:26.470

您需要将所选项目的位置存储在某处并覆盖`getView`适配器的位置，以便在回收视图时正确设置背景。此外，您还需要告诉您的适配器在项目被选中时刷新视图。

如果您使用`ArrayAdapter`，例如可以像这样扩展它：

```
private class SelectionArrayAdapter extends ArrayAdapter<String> {

    private int selectedItem = -1;

    public SelectionArrayAdapter(Context context, int resource, String[] objects) {
        super(context, resource, objects);
    }

    public void setSelection(int position) {
        selectedItem = position;
        notifyDataSetChanged();
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = super.getView(position, convertView, parent);
        if(position == selectedItem) {
            view.setBackgroundColor(Color.RED);
        }
        else {
            view.setBackgroundColor(Color.TRANSPARENT);
        }
        return view;
    }
} 
```

当单击一个项目时，您只需要调用该`setSelection`方法：

```
 listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            adapter.setSelection(position);
        }
    }); 
```

# c - C中的输入/输出变量

> ID：13561108
> 
> 赞同：3
> 
> 时间：2012-11-26T08:28:54.600
> 
> 标签：c

想象一下，你在 C 中有一个初始化指针的函数：

`void initialize(Pointer * p);`

我会说参数 p 是一个 [out] 参数。

然后我们有一个函数可以获取 p 并对其进行操作。

`void manipulate(Pointer * p)`

现在我怀疑 p 是 [out] 还是 [in/out]。

我会说 [out] 因为我们只是在操纵它。我会说 [in/out] 因为进来的东西已经被初始化了。

我想知道哪一个是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:32:36.420

声明中没有任何内容表明这一点。唯一真正的决定是函数中的代码做了什么。

在更现代的实现中，`const`关键字可用于指示只读参数：

```
void manipulate(const Pointer * p) 
```

这表示`*p`不能在函数内赋值，所以它是只读（或`in`）类型。但是，如果`const`缺少，它仍然可以是只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:34:58.110

两者都不完全正确。

您正在传递一个指向函数的指针。所以它可以被认为是*因为*你传递了指针的*value*。此外，它可以被认为是*out，*因为您可能正在更改它的指针。

所以我不会相信*这个*理论*。*我会把它作为一个指针:)

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:35:27.530

标准 C 中没有直接输入/输出的概念。但是您可以通过定义自己的宏来实现。

实际上，所有参数传递仅通过 2 种方法完成。

```
1\. pass by value
2\. pass by address 
```

这取决于你如何操作。如果您不想修改传入参数，请使用`const`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T08:39:18.200

如果`Pointer`类型本身不是一个实际的指针，比如`typedef int *Pointer`，那么`initialize`函数不能为参数分配内存。

在这种情况下，您必须将*指针*作为引用传递，即您必须传递指针的地址，这意味着函数应该将指向指针的指针作为参数：

```
void initialize(Pointer **p)
{
    *p = malloc(sizeof(Pointer));
    ...
} 
```

调用为

```
Pointer *p;
initialize(&p); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T08:44:22.357

**示例 1**

```
char buf[256];

void manipulate(char * p)
{
    strcpy(p,"Just test string");
}

int main()
{
    manipulate(buf);
    printf("%s\n",buf);
} 
```

在上面的示例中，buf 字符串被初始化为静态缓冲存储器。这里的 `manipulate`函数会将消息复制到缓冲存储器。

**示例 2**

```
char *buf;

void initialize(char **p)
{
    *p = malloc(256*sizeof(char));
}

void manipulate(char * p)
{
    strcpy(p,"Just test string");
}

int main()
{
    initialize(&buf)
    manipulate(buf);
    printf("%s\n",buf);
} 
```

在第二个示例中，buf 是指向未在定义中初始化的字符串的指针。这里的初始化函数`initialize`将使用缓冲区，这就是我们使用它的原因，`char **p` 这意味着该函数将初始化指针的地址。如果我们`*p`像在函数中那样传递变量，`manipulate()`这意味着我们只能更改指针`p`指向的内存的内容。*

# ios - 错误操作无法完成。（com.facebook.sdk 错误 2。）

> ID：13561109
> 
> 赞同：3
> 
> 时间：2012-11-26T08:28:55.443
> 
> 标签：ios, xcode, facebook, ios5, sharekit

我的应用程序在模拟器和带有 ios6 的设备上都运行良好。但是当我在 ios5 中使用该应用程序时，我可以登录 facebook 并转到 facebook 应用程序。但是，当应用程序即将发布时，它无法执行但弹出“错误操作无法完成。（com.facebook.sdk错误2。）”。我已经检查了捆绑 ID 和设置。不知道如何解决错误。我正在使用 sharekit 来集成共享

需要一些帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-22T20:42:34.317

打印错误的用户信息。它应该为您提供更详细的解释，说明它失败的原因。

# font-face - 字体在 IE 10 中不起作用

> ID：13561111
> 
> 赞同：9
> 
> 时间：2012-11-26T08:29:00.517
> 
> 标签：font-face, internet-explorer-10

我绝对没有成功让 IE 10 显示自定义字体。还有其他人对此有解决方案吗？我可以在网上看到一些喊话，说其他人在 IE 10 中的字体有问题，但没有找到解决方案或确认的错误。

有相同经验或解决方案的人吗？

这就是我现在所拥有的，它在 10 之前的 IE、Chrome 和 Safari 中运行良好：

```
@font-face {
    font-family: "LCD";
    src: url('http://www.somedomain.xxx/Public/Fonts/Quartz_Regular.ttf');
}

<!--[if IE]>
<style type="text/css">
@font-face {
    font-family: "LCD";
    src: url('http://www.somedomain.xxx/Public/Fonts/Quartz_Regular.eot');
}
</style>
<![endif]--> 
```

我曾尝试用其他格式的字体文件替换 woff、ott 等，但完全没有运气。

暗示字体松鼠的答案使它工作。现在工作标记（对于 IE 10）是：

```
@font-face {
    font-family: "LCD";
    src: url('/Public/Fonts/quartz_regular-webfont.eot');
    src: url('/Public/Fonts/quartz_regular-webfont.eot?#iefix') format('embedded-opentype'),
         url('/Public/Fonts/quartz_regular-webfont.woff') format('woff'),
         url('/Public/Fonts/quartz_regular-webfont.ttf') format('truetype'),
         url('/Public/Fonts/quartz_regular-webfont.svg#quartzregular') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T08:52:37.383

由于 HTML 注释和样式元素，我假设这是在 HTML 文件中……如果不是，请查看。

除此之外，只需使用[@font-face 生成器](http://www.fontsquirrel.com/fontface/generator)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T20:12:29.267

如果激活安全模式，IE10 是否有可能不呈现 Web 字体？停用（互联网选项 - 安全）后，我的网站正确显示...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:15:36.210

我让 font-squirrel @font-face 在除 IE 之外的所有东西中工作，但我的问题是 .woff 是唯一不包含在我服务器上的 IIS mime-types 中的东西。这可能会帮助那些也结束了这个问题的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-04T17:35:07.863

我刚刚遇到一位客户报告他无法在他的网站上看到 webfont。最后，默认情况下“高”安全级别（在 IE 选项中）会阻止 Web 字体。您可以创建一个基本上为“高”但仍启用网络字体的自定义安全级别。或者只是把它调低到中高。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T08:40:53.473

IE 10 -> [reference](http://msdn.microsoft.com/en-us/library/hh781508%28v=vs.85%29.aspx)上的字体未更新 ，您可以使用与 IE-9 相同的字体

[你可以在这里](https://stackoverflow.com/questions/4607560/font-face-works-in-ie8-but-not-ie9)学习如何使用 font-face

我认为您包括所有类型的字体...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T07:16:15.807

我在这里使用了这个： [http ://www.impressivewebs.com/ie10-css-hacks/](http://www.impressivewebs.com/ie10-css-hacks/)

进一步来说：

```
@media screen and (min-width:0\0) {  
    /* IE9 and IE10 rule sets go here */  
} 
```

通过使用它，我们可以弹出一个不错的替代字体，并且在其他具有开放字体的浏览器中仍然具有性感。

试试这里的字体：http: [//cssfontstack.com](http://cssfontstack.com)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-27T07:40:43.703

必须添加字体生成器不会为*所有*字体修复此问题。例如，当使用 Helvetica Neue Medium Condensed (HelveticaNeueLTW1G-MdCn) 字体时。我在网站上使用多种字体。它们都使用字体生成器，除了 Helvetica-font。

# android - 如何在 Java 和 Android 中为 ReadUnsignedByte() 的进程设置超时

> ID：13561112
> 
> 赞同：0
> 
> 时间：2012-11-26T08:29:09.410
> 
> 标签：android, exception, timeout

我有以下代码，我使用 ReadUnsignedByte() 函数但挂起并且不返回任何导致挂起应用程序的内容。我用了try catch但是没有响应，这种情况我该怎么办？

```
private int getEndOfSeqeunce(DataInputStream in, byte[] sequence) throws TimeoutException {
    int seqIndex = 0;
    byte c = -99;
    for(int i=0; i < FRAME_MAX_LENGTH; i++) {
        Log.v("DataInputStream", ""+in);
        try {
            c = (byte) in.readUnsignedByte(); // Stuck here ... No response at this line which hangs the Android application.
            Log.v("C ::::::::UNSIGNE::readUnsignedByte::::::::", ""+c);
            if(c == sequence[seqIndex]) {
                seqIndex++;
                if(seqIndex == sequence.length) return i + 1;
            } else seqIndex = 0;

        } catch (IOException e) {
            e.printStackTrace();
            i = FRAME_MAX_LENGTH;
            Activity ac = (Activity) cox;   
            }

    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:47:47.087

这是一个阻塞调用，您不能设置超时，它必须返回数据或失败并出现异常。如果您正在从套接字读取，它将阻塞，直到达到读取超时（如果已设置）。您可能希望在单独的线程中运行它以不挂起 UI，但它仍会阻塞。如果这是针对通信协议的，那么您可能在某些地方遇到问题并且期望未发送的数据。

# oracle - Oracle - 存储用户设置

> ID：13561119
> 
> 赞同：0
> 
> 时间：2012-11-26T08:29:44.387
> 
> 标签：oracle, settings

用户已注册多个团队（少于 30 个）。

UserTeam 表 - UserId、TeamId

我如何将其存储为 varchar，例如“123:0;124:1;155:1”，其中 123、124 和 155 是团队 ID，有没有更好的方法？或者只是“124:155”，这意味着只存储有权限的团队。

UserScore - UserId、ActivityId、ScoreId、TeamId 的？

您对 Oracle 数据库有何建议？

编辑：团队总数可能是数万个左右，但分配给用户的团队总数将少于 30 个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:41:35.110

使用规范化规则来设计您的数据模型。从性能的角度来看，从那里去规范化是必要的。

```
**User**
UserId
UserData

**Team**
TeamId
TeamData

**UserTeam**
UserId
TeamId

foreign key constraints to user and team table

**UseScore** 
UserId
TeamId
ActivityId
Score

foreign key constraints to user, team and activity table 
```

# ruby-on-rails-3 - 如何测试模型中定义的模型和方法

> ID：13561120
> 
> 赞同：0
> 
> 时间：2012-11-26T08:29:43.593
> 
> 标签：ruby-on-rails-3, rspec-rails

请告诉我用 rspec 测试模型的主要内容是什么，我只测试验证部分，如电子邮件和密码等，有必要测试模型中定义的方法。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:34:15.830

如果你只是测试验证，你应该使用这个：

```
https://github.com/thoughtbot/shoulda-matchers 
```

如果你想测试方法（任何方法，而不仅仅是验证方法），你必须根据你定义的行为来评估每个响应的可能性。

```
describe "semaphore" do
  describe "#turn_green" do
    it "should turn green" do
      subject.turn_green.should == "green"
    end
    it "should not turn red" do
      subject.turn_green.should_not == "red"
    end
  end
end 
```

# html - 使用来自表单 HTTP GET 响应的 XML - 仅限前端

> ID：13561122
> 
> 赞同：0
> 
> 时间：2012-11-26T08:29:55.973
> 
> 标签：html, forms, http, get

我想构建一个简单的网页，通过 GET 请求查询不同域上的数据库，并在查询成功时在页面/新页面上指示。就像这个特定数据库的[downforeveryoneorjustme](http://www.downforeveryoneorjustme.com/)一样。

由于域不同，我认为我不能发出 AJAX GET 请求。

我可以通过以下方式获得有效的 XML 响应，但我不知道如何使用该响应。有没有只使用javascript的简单方法？如果不是，我需要看什么才能做到这一点？

```
<form method="get" action="http://XXX.XX.XX.XX:XXX">
<input type="text" name="text" value="apples" />
<input type="text" name="number" value="4351" />
<input type="submit" value="go" >
</form> 
```

编辑：我还需要检查返回的 XML 的值之一。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:40:55.407

跨域 AJAX 请求并非不可能[AJAX 跨域调用](https://stackoverflow.com/questions/2558977/ajax-cross-domain-call)。

但无论如何，您的问题是关于如何解析响应。如果您正在查询另一个网站，查看查询是否成功的最简单方法是检查 HTTP 响应代码。您没有指定服务器端语言，如果您不使用 AJAX，我怀疑您将使用该语言处理您的请求，所以我无法给您任何细节，但取决于您收到响应的方式，您只需检查一下响应码等于 200，表示请求成功完成。

至于检查数据库是否关闭，根据这篇文章[，数据库的 HTTP 状态代码已关闭](https://stackoverflow.com/questions/1434315/http-status-code-for-database-is-down)，这种情况将返回 500 或 503。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:41:53.017

只要您有有效的 AJAX 请求，您仍然可以在不同的域中使用 AJAX GET 请求。您可以像这样简单地使用 jQuery ajax：

```
$.get('your_URL', function(response) {
  $('.result').html(response);
  alert('Load was performed.');
}); 
```

# grails - 如何在不重建 Grails 中的 war 文件的情况下更新外部配置文件

> ID：13561127
> 
> 赞同：5
> 
> 时间：2012-11-26T08:30:29.307
> 
> 标签：grails, configuration-files, application-settings

如何在不重建 Grails 中的 war 文件的情况下更新外部配置文件（例如： `config-ex.groovy`、 ）？`config-ex.properties`

重新启动应用程序服务器将应用来自外部配置文件的新更新。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T15:01:36.733

如果我理解得很好，您想在战争之外将 Grails 配置外部化。您可以像这样在 config.groovy 中定义外部配置

```
grails.config.locations = ["file:path/to/your/Configfile.groovy"] 
```

请参阅 Grails 文档[4.4 外部化配置](http://grails.org/doc/2.1.0/guide/conf.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T19:45:17.710

定义你的外部 Grails 配置：

```
grails.config.locations = ["file:some/path/to/Config.groovy"] 
```

然后要在运行时重新加载它们，您可以使用如下代码：

```
def config = grailsApplication.config
def locations = config.grails.config.locations

locations.each {
  String configFileName = it.split('file:')[0]
  config.merge(new ConfigSlurper().parse(new File(configFileName).text))
} 
```

我在受管理员保护的控制器中有上述代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-09T11:36:02.777

为了这个，绕着房子转了一圈，谢谢格雷格

对于服务或 groovy src 文件，您可以使用：

```
import org.springframework.context.ApplicationContext
ApplicationContext ctx = (ApplicationContext) org.codehaus.groovy.grails.web.context.ServletContextHolder.getServletContext().getAttribute(org.codehaus.groovy.grails.web.servlet.GrailsApplicationAttributes.APPLICATION_CONTEXT);
def grailsApplication = ctx.getBean("grailsApplication")
ConfigObject config = ctx.getBean(GrailsApplication).config
def locations = config.grails.config.locations
locations.each {
   String configFileName = it.split("file:")[1]
   config.merge(new ConfigSlurper().parse(new File(configFileName).text))
} 
```

对于通常从控制器扩展的抽象类：

```
import grails.util.Holders
def config = Holders.config
def locations = config.grails.config.locations
locations.each {
  String configFileName = it.split("file:")[1]
  config.merge(new ConfigSlurper().parse(new File(configFileName).text))
 } 
```

# dictionary - 在同一行中使用多个“for x in y”。语法问题

> ID：13561132
> 
> 赞同：0
> 
> 时间：2012-11-26T08:30:50.317
> 
> 标签：dictionary, python-2.7, syntax-error

我想做的很简单：

```
collection = {'a':[], 'b':[], 'c':[]}
values = [1,2,3] 
```

我想制作一个产生以下内容的函数：（将值附加到字典的列表元素中，`dic`和 的`list`长度相同）

```
{'a':[1], 'b':[2], 'c':[3]} 
```

这很简单，我可以使用几个 `for x in`. 但我想在一行中做到这一点。（在同一行中使用两个循环）并且我无法使语法正常工作。

我尝试了一些类似的事情，但它们都导致语法错误：

```
collection[c].append(value), for c in d.iteritems(), for value in values 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:33:18.383

你不能在一条线上做你想做的事。您可以在一行上创建一个新字典：

```
{k: collection[k] + [v] for k, v in zip(collection.keys(), values)} 
```

结果：

```
>>> collection = {'a':[], 'b':[], 'c':[]}
>>> values = [1,2,3]
>>> {k: collection[k] + [v] for k, v in zip(collection.keys(), values)}
{'a': [1], 'c': [2], 'b': [3]} 
```

这称为[dict 理解](http://docs.python.org/2/reference/expressions.html#dictionary-displays)。就像列表推导和生成器表达式一样，您*可以*在其中一个中使用多个循环，但这里不需要一个。会将键 from与 中的整数`zip()`配对。`collection``values`

要`dict`就地修改，您必须至少使用 2 行：

```
for k, v in zip(collection.keys(), values):
    collection[k].append(v) 
```

Python 确实接受了这一点，但这与我可以为您查找的几乎所有样式指南背道而驰：

```
for k, v in zip(collection.keys(), values): collection[k].append(v) 
```

Python 会引发语法错误，因为它将您的行解释为表达式的元组（逗号使其成为元组），并且您的两个表达式是`for`语句，不能在表达式中使用。

# c# - 无法通过 ODBC 从 Oracle 获取长值

> ID：13561133
> 
> 赞同：0
> 
> 时间：2012-11-26T08:30:54.857
> 
> 标签：c#, sql, oracle, odbc

我遇到了一个非常大的问题。我正在编写一个应用程序，用于使用 Oracle-DB 中的一些数据构建一个 txt 文件。

所以实际上我遇到了 data_default 列（LONG 类型）的问题。

让我们发布一些代码：

这是我的选择：

```
SELECT table_name || '.' || column_name, data_precision, data_type, nullable, data_length, data_default 
```

这是我读取数据的方式：

```
string dataDefault = (dataReader[5].GetType() == typeof(DBNull)) ? "" : Convert.ToString(dataReader.GetString(5)) 
```

所以也许这不是“漂亮”的方式，但我在这里对 LONG 数据类型有一个大问题。我无法以这种方式从 data_default 获取数据。我在互联网上搜索，但我想在 C#-Code 中解决这个问题。如果不可能，请不要高估我的 SQL 知识 ;-)

祝你有美好的一天，克莱门斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:29:43.300

I got the answer! After a long time of searching and forging i wanna post the final solution:

```
create or replace function get_col_default
(
p_owner in all_tab_cols.owner%type,
p_table_name in all_tab_cols.table_name%type,
p_column_name in all_tab_cols.column_name%type
)
return varchar2
as
        l_data_default LONG;
begin
        select data_default into l_data_default
          from all_tab_cols
         where owner = p_owner
           and table_name = p_table_name
           and column_name = p_column_name;

        return substr( l_data_default, 1, 4000 );
end; 
```

And then you can create this query for example:

```
select a.table_name, a.COLUMN_NAME, get_col_default('exOwner',a.table_name,a.COLUMN_NAME) 
from all_tab_columns a
where  table_name like 'table%'
and owner like 'exOwner' 
```

The good thing about this is, that you can extend that function very easy and won't be limited to 1 result/execute. (i had this problem in some further ideas)

Have a nice day! ;)

# android - 如何将数据设置为由片段膨胀的布局

> ID：13561134
> 
> 赞同：2
> 
> 时间：2012-11-26T08:31:07.457
> 
> 标签：android, android-layout, android-fragments, android-tabhost, android-inflate

我有一个 FragmentActivity，它设置了一个带有 3 个选项卡的主布局。每个选项卡都有自己的片段，将自己的布局扩展为主布局。

例如，三个片段之一：

```
public class Fragment1 extends Fragment {

  public View onCreateView(LayoutInflater inflater, ViewGroup container,
      Bundle savedInstanceState) {
    if (container == null) {
            return null;
        }
    return inflater.inflate(R.layout.fragment1, container, false);
  }
} 
```

当我添加所有片段并将它们与选项卡连接时，一切正常。当我单击 tab1 时，会显示 Fragment1 的布局，当我单击 Tab2 时，会显示 Fragment2 的布局。

问题是，当我想更改该膨胀布局中的某些内容时（例如，在 fragment1 布局中将 setText 执行为 textView），我在该行中收到 NullPointerException 并且应用程序停止。

这不起作用：

```
 TextView test = (TextView) findViewById(R.id.fragmentOneText1);
 test.setText("Test text!"); 
```

如何将数据设置为膨胀布局？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:36:22.330

您必须首先通过使用`LayoutInflater`并映射片段中的控件来扩展片段特定的布局

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View fragmentView = inflater.inflate(R.layout.R.layout.fragment1, container, false);
        TextView text = (TextView) fragmentView.findViewById(R.id.fragmentOneText1);
        mTextNoResult=(TextView)fragmentView.findViewById(R.id.text_noresult);
        return fragmentView;
} 
```

# ios5 - CoreBluetooth writeValue:forDescriptor: 问题

> ID：13561136
> 
> 赞同：7
> 
> 时间：2012-11-26T08:31:12.767
> 
> 标签：ios5, descriptor, core-bluetooth

我的 CoreBluetooth 应用程序需要启用客户端特征配置描述符中的“指示位”。这是我所做的：

1.  开始扫描
2.  开始连接设备
3.  称呼`discoverServices`
4.  `discoverCharacteristics`在回调内部调用

    -(void)peripheral:(CBPeripheral *)peripheral didDiscoverServices:(NSError *)error

5.  `discoverDescriptorsForCharacteristic`在回调内部调用

    -(void)peripheral:(CBPeripheral *)peripheral didDiscoverCharacteristicsForService:(CBService *)service error:(NSError *)error

6.  内部回调

    -(void)peripheral:(CBPeripheral *)peripheral didDiscoverDescriptorsForCharacteristic:(CBCharacteristic *)characteristic error:(NSError *)error

我打了电话：

```
 if ( [[descriptor.UUID representativeString] isEqualToString:@"2902" ] )
        {
            const unsigned char raw_data[] = {0x02};
            NSData *myData = [NSData dataWithBytes: raw_data length: 2];
            [self.cBCP writeValue:myData forDescriptor:descriptor];
        } 
```

但是我的应用程序在 : 中崩溃了`writeVale`。控制台中的错误消息是：

> 无法使用此方法编写客户端特征配置描述符！

任何想法？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-13T08:29:29.890

很老的问题，但是由于没有回答，似乎该方法`setNotifyValue(_:for:)`是否会为您处理，这取决于以下特征属性：

*   仅通知：将启用通知。
*   仅指示：将启用指示。
*   指示和通知：仅启用通知。

所以如果需要启用indications，characteristic 必须只有indicate 属性，并且notify 应该被移除。

我想这背后的主要原因是指示要慢得多，因此除非需要指示，否则 iOS 将始终更喜欢最快的选项。

[阅读有关 Apple 文档的更多信息](https://developer.apple.com/documentation/corebluetooth/cbperipheral/1518949-setnotifyvalue)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T04:58:17.803

问题是您不能像以前那样使用 writeValue:forDescriptor: 方法来写入客户端配置描述符 (UUID = 2902) 的值。

相反，您应该使用 CBPeripheral 类的 setNotifyValue:forCharacteristic: 方法来配置客户端指示或服务器上特征值的通知。

# java - 如何通过动态数组或 ArrayList f 使用数据库中的值填充 JTable

> ID：13561137
> 
> 赞同：0
> 
> 时间：2012-11-26T08:31:13.207
> 
> 标签：java, swing

我在数据库中有 6 列，最多大约 20 行。我喜欢用 Java 编写一个通用程序，用这些值填充 JTable。我非常熟悉使用动态数组，但不熟悉 Swing 中的 JTable 属性和模型。

任何人都可以在这里指导我的要求吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:37:55.697

您必须创建自己的表模型。请参阅此处的 API 文档：http: [//docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableModel.html)

基本上，`getColumnCount()`将返回您的列`getRowCount()`数、数据库中的行数、`getColumnName(int columnIndex)`每列的一些名称（数据库中的列名或任意名称，可能来自常量字符串数组）。`getColumnClass(int columnIndex)`在简单的情况下，可以为每一列返回 String.class。然后你必须将每个值转换为字符串。

`getValueAt(int rowIndex, int columnIndex)`必须从数据库中返回给定行和列的值。您可能应该将所有这些值预加载到二维数组或类似的东西中（但这将是另一个问题的答案；））。

您现在可以忽略其他方法，它们用于可编辑表。

您的代码可能如下所示：

```
String[][] tableData = readTableDataFromDatabase();
String columnNames = initColumnNames(); //From DB or constants
TableModel model = new DbTableModel(tableData, columnNames);

class DbTableModel extends AbstractTableModel {
    private String[][] tableData;
    private String[] columnNames;

    public DbTableModel(String[][] tableData, columnNames) {
        this.tableData = tableData;
        this.columnNames = columnNames;
    }
    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        return tableData[rowIndex][columnIndex];
    }
    @Override
    public int getRowCount() {
        return tableData.length;
    }
    @Override
    public int getColumnCount() {
        if(tableData.length == 0)
            return 0;
        return tableData[0].length;
    }
    @Override
    public String getColumnName(int column) {
        return columnNames[column]
    }
} 
```

此示例假设您将数据库中的数据作为 2D 数组读取。如果您使用我**强烈**推荐的 O/R-Mapper（如 Java Persistence API - JPA），您可能会加载一个实体列表。每个实体将包含表行的数据。无论如何，表模型不会有太大变化。您将从列表中获取实体对象并调用`get`实体上的“”-Methods，而不是访问数组值。

Java 教程中有更多信息：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html#data](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:20:58.183

看看这里的教程：http: [//docs.oracle.com/javase/tutorial/uiswing/components/table.html#data](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

这是我前段时间编写的基于列表的只读 TableModel 示例：

[https://sourceforge.net/p/puces-samples/code/HEAD/tree/tags/sessionstate-1.0/sessionstate-suite/sessionstate-sample/src/blogspot/puce/sessionstate/sample/ParticipantTableModel.java](https://sourceforge.net/p/puces-samples/code/HEAD/tree/tags/sessionstate-1.0/sessionstate-suite/sessionstate-sample/src/blogspot/puce/sessionstate/sample/ParticipantTableModel.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T09:31:23.267

很好，但我希望 readTableDataFromDatabase(); 返回结果集对象

# ruby-on-rails - 我正在使用 rails castomniauth，我收到此错误

> ID：13561140
> 
> 赞同：2
> 
> 时间：2012-11-26T08:31:27.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, mongoid, omniauth

我在 Rails 中使用 Mongodb 作为数据库，使用 /auth/linkedin/callback 时出错

NoMethodError in AuthenticationsController#create undefined method []' for nil:NilClass Rails.root: /home/prem/Music/heronhrm Application Trace | 框架跟踪 | 完整跟踪 app/models/user.rb:57:in apply_omniauth' app/controllers/authentications_controller.rb:19:in `create'

此外，当我`self.email = omniauth['user_info']['email'] if email.blank?`从 usermodel 中删除时，验证错误会出现在

users/sign_up 电子邮件不能为空 我想为 twitter、linkdin 和 facebook 实现。

我的身份验证.rb

```
 class Authentication
  include Mongoid::Document

 belongs_to :user
    field :user_id, :type => String
    field :provider, :type => String
    field :uid, :type => String
 def self.find_by_provider_and_uid(provider, uid)
  where(provider: provider, uid: uid).first
end

end 
```

我的用户模型是这样的

```
def apply_omniauth(omniauth)
    self.email = omniauth['user_info']['email'] if email.blank?
    authentications.build(:provider => omniauth['provider'], :uid => omniauth['uid'])
  end

  def password_required?
    (authentications.empty? || !password.blank?) && super
  end 
```

我的身份验证控制器是这样的

```
 class AuthenticationsController < ApplicationController
  def index
    @authentications = current_user.authentications if current_user
  end

 def create
    omniauth = request.env["omniauth.auth"]
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    elsif current_user
      current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
      flash[:notice] = "Authentication successful."
      redirect_to authentications_url
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if user.save
        flash[:notice] = "Signed in successfully."
        sign_in_and_redirect(:user, user)
      else
        session[:omniauth] = omniauth.except('extra')
        redirect_to new_user_registration_url
      end
    end
  end
  def destroy
    @authentication = current_user.authentications.find(params[:id])
    @authentication.destroy
    flash[:notice] = "Successfully destroyed authentication."
    redirect_to authentications_url
  end

protected

  # This is necessary since Rails 3.0.4
  # See https://github.com/intridea/omniauth/issues/185
  # and http://www.arailsdemo.com/posts/44
  def handle_unverified_request
    true
    end
    end 
```

我的注册控制器是这样的

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super
    session[:omniauth] = nil unless @user.new_record?
  end

  private

  def build_resource(*args)
    super
    if session[:omniauth]
      @user.apply_omniauth(session[:omniauth])
      @user.valid?
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T11:50:06.847

在你的 app/models/authentication.rb 添加这个

```
def self.find_by_provider_and_uid(provider, uid)
  where(provider: provider, uid: uid).first
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:36:13.923

你在你的模型中添加了这个吗？如果未添加，则添加此然后尝试

```
key :provider, String
key :uid, String 
```

# spring - 如何在 Spring Batch 2 和 Hibernate 4 中使用 HibernateItemWriter？

> ID：13561141
> 
> 赞同：0
> 
> 时间：2012-11-26T08:31:31.347
> 
> 标签：spring, hibernate, spring-batch

使用休眠 3 时，以下代码有效：

```
<bean id="ivsHibernateWriter"
    class="org.springframework.batch.item.database.HibernateItemWriter">
    <property name="hibernateTemplate" ref="hibernateTemplate"/>
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean class="org.springframework.orm.hibernate3.HibernateTemplate" id="hibernateTemplate" >
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

升级到休眠 4 后，我的测试失败，出现以下异常：

```
org.springframework.orm.hibernate4.SessionHolder cannot be cast to org.springframework.orm.hibernate3.SessionHolder 
```

我想过将 hibernateTemplate bean 更改为与 hibernate 4 内联，如下所示：

```
 <bean class="org.springframework.orm.hibernate4.HibernateTemplate" id="hibernateTemplate" >
    <property name="sessionFactory" ref="sessionFactory" />
</bean> 
```

但是，这个类不存在。

我们应该如何使用 Hibernate4 和 Spring Batch？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T21:06:27.110

我认为 Spring Batch 对 Hibernate 4 的支持已经存在。无需注入`hibernateTemplate`内部`HibernateItemWriter`。仅`sessionFactory`注射就足够了。有关更多详细信息，请查看[此链接](http://www.javatopper.blogspot.in/2014/12/springing-into-batch-job.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:39:12.940

目前这是不可能的，因为 Spring Batch 不支持 hibernate4 。您可能会看到有关此[https://jira.springsource.org/browse/BATCH-1904的 Jira 问题](https://jira.springsource.org/browse/BATCH-1904)

如果您没有严格的业务要求，我建议您使用 JdbcItemWriters；恕我直言，hibernate 和 jpa 在 Spring Batch 中的支持很差（我明白为什么）。

# java - Java TreePath.equals() 麻烦

> ID：13561142
> 
> 赞同：1
> 
> 时间：2012-11-26T08:31:35.343
> 
> 标签：java, swing, outline

由于 TreePath 用于识别数据节点的方法，我无法让 Outline 控件（替代 TreeTable）与数据对象树一起工作。

关键问题是 TreePath 的 equals() 方法使用数据节点的 equals() 方法来识别数据树中的两个节点对象是相同的。TreeModel.java 甚至评论了这个问题：

“一些实现可能假设如果两个 TreePaths 相等 [由 equals() 确定]，它们标识相同的节点。如果不满足此条件，可能会导致绘制问题和其他奇怪的问题。” 示例数据：

*   一个
    *   乙
        *   C
        *   D
    *   乙
        *   乙
        *   F
    *   H
    *   ķ

这里，两个“B”节点作为单独的节点可能被认为具有相等的值（因此 equals() 返回 true），但它们肯定不代表树中的相同节点。

好的，所以如果源数据对象已经实现了 equals() 以指示*仅考虑节点本身的相等值*，如果在特定父节点下出现多个相同值的节点，则会破坏 TreePath。在这种情况下，Outline 无法展开/折叠正确的相同值节点之一。

如果 TreePath.equals() 使用“==”而不是数据对象的 equals() 方法，这个问题将得到解决。然而，由于股票 TreePath 与 TreeModel 等紧密相连，因此如何在没有大量中断的情况下修复这种行为并不明显。

有没有一些优雅的方法来获得正确的效果？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:43:34.750

Actually, I think that the problem comes from the way you are implementing `equals()` in your `TreeNode`'s. Two `TreeNode`'s, in your case, should be considered equals if they represent the same visual nodes. Two `TreeNode`'s can represent the same model object (for example Model Object B) but remain different nodes..

Here is a simple demo based on DefaultMutableTreeNode (`equals()` uses the `Object.equals(Object)` default implementation `==`). Every 2 seconds it toggles selection from node B1 to B2:

```
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.Timer;
import javax.swing.ToolTipManager;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeModel;
import javax.swing.tree.TreeNode;
import javax.swing.tree.TreePath;

public class TestTreeNodes {

    public static class SomeModelNode {
        private String value;

        public SomeModelNode(String value) {
            super();
            this.value = value;
        }

        public String getValue() {
            return value;
        }

    }

    public class MyTreeCellRenderer extends DefaultTreeCellRenderer {

        @Override
        public Component getTreeCellRendererComponent(JTree tree, Object value, boolean sel, boolean expanded, boolean leaf, int row,
                boolean hasFocus) {
            Component cell = super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);
            if (value instanceof DefaultMutableTreeNode) {
                DefaultMutableTreeNode treeNode = (DefaultMutableTreeNode) value;
                if (treeNode.getUserObject() instanceof SomeModelNode) {
                    setText(((SomeModelNode) treeNode.getUserObject()).getValue());
                }
            }
            return cell;
        }
    }

    private JFrame f;
    private JTree tree;
    private DefaultMutableTreeNode nodeA;
    private DefaultMutableTreeNode nodeB1;
    private DefaultMutableTreeNode nodeB2;
    private DefaultMutableTreeNode nodeC;
    private DefaultMutableTreeNode nodeD;
    private DefaultMutableTreeNode nodeE;
    private DefaultMutableTreeNode nodeF;
    private DefaultMutableTreeNode nodeH;
    private DefaultMutableTreeNode nodeK;

    private boolean showingB1 = false;

    protected void initUI() {
        tree = new JTree(getModel());
        for (int i = 0; i < tree.getRowCount(); i++) {
            tree.expandRow(i);
        }
        ToolTipManager.sharedInstance().registerComponent(tree);
        tree.setCellRenderer(new MyTreeCellRenderer());
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.setLocationRelativeTo(null);
        f.add(new JScrollPane(tree));
        f.pack();
        f.setVisible(true);
        Timer t = new Timer(2000, new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                if (!showingB1) {
                    tree.getSelectionModel().setSelectionPath(getPathForNode(nodeB1));
                } else {
                    tree.getSelectionModel().setSelectionPath(getPathForNode(nodeB2));
                }
                showingB1 = !showingB1;
            }
        });
        t.start();

    }

    private TreePath getPathForNode(TreeNode node) {
        List<TreeNode> nodes = new ArrayList<TreeNode>();
        TreeNode current = node;
        while (current != null) {
            nodes.add(current);
            current = current.getParent();
        }
        Collections.reverse(nodes);
        return new TreePath(nodes.toArray(new Object[nodes.size()]));
    }

    private TreeModel getModel() {
        SomeModelNode a = new SomeModelNode("A");
        SomeModelNode b = new SomeModelNode("B");
        SomeModelNode c = new SomeModelNode("C");
        SomeModelNode d = new SomeModelNode("D");
        SomeModelNode e = new SomeModelNode("E");
        SomeModelNode f = new SomeModelNode("F");
        SomeModelNode h = new SomeModelNode("H");
        SomeModelNode k = new SomeModelNode("K");
        nodeA = new DefaultMutableTreeNode(a);
        nodeB1 = new DefaultMutableTreeNode(b);
        nodeB2 = new DefaultMutableTreeNode(b);
        nodeC = new DefaultMutableTreeNode(c);
        nodeD = new DefaultMutableTreeNode(d);
        nodeE = new DefaultMutableTreeNode(e);
        nodeF = new DefaultMutableTreeNode(f);
        nodeH = new DefaultMutableTreeNode(h);
        nodeK = new DefaultMutableTreeNode(k);
        // Children of A
        nodeA.add(nodeB1);
        nodeA.add(nodeB2);
        nodeA.add(nodeH);
        nodeA.add(nodeK);
        // Children of B1
        nodeB1.add(nodeC);
        nodeB1.add(nodeD);
        // Children of B2
        nodeB2.add(nodeE);
        nodeB2.add(nodeF);
        DefaultTreeModel model = new DefaultTreeModel(nodeA);
        return model;
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TestTreeNodes().initUI();
            }
        });
    }

} 
```

# sql - 如何从具有每种语言行的表中获取默认语言行？

> ID：13561148
> 
> 赞同：0
> 
> 时间：2012-11-26T08:32:01.863
> 
> 标签：sql, sql-server, sql-server-2008

假设我有这 2 个表，并且我有 2 种语言，en 和 ar，

```
CREATE TABLE [dbo].[xProduct](
        [ID] [int] IDENTITY(1,1) NOT NULL,
    [Model] [varchar](255) NULL,
 CONSTRAINT [PK_xProduct] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[xProductT](
    [ID] [int] IDENTITY(1,1) NOT NULL,
        [PID] [int] NOT NULL,
    [Lang] [varchar](2) NOT NULL,
    [Name] [nvarchar](255) NULL,
    [Description] [nvarchar](255) NULL,
    [IsDefault] [bit] NULL,
 CONSTRAINT [PK_xProductT] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

-- xProduct
ID  Model
1   SVE11611
2   SVE11711

-- xProductT
ID  PID Lang       Name                        Description         IsDefault
1   1   EN  Sony Vaio E11611    Sony Vaio E11611 Description         1
2   1   AR  سوني فايو E11611    وصف سوني فايو E11611              NULL
3   2   EN  Sony Vaio E11711    Sony Vaio E11711 Description        1 
```

这是我尝试过的，

```
declare @lang varchar(2) ='en'
declare @id int =1
-- Works and give a single row
Select p.*,pt.* from xProduct p inner join xProductT pt on (p.id = pt.pid and pt.lang = @lang)where p.id=@id    

set @lang  ='ar'
set  @id =1    
-- Works and give a single row
Select p.*,pt.* from xProduct p inner join xProductT pt on (p.id = pt.pid and pt.lang = @lang)where p.id=@id

set @lang  ='en'
set  @id =2    
-- Works and give a single row
Select p.*,pt.* from xProduct p inner join xProductT pt on (p.id = pt.pid and pt.lang = @lang)where p.id=@id

set @lang  ='ar'
set  @id =2    
-- Does not work I need to select the default one
Select p.*,pt.* from xProduct p inner join xProductT pt on (p.id = pt.pid and pt.lang = @lang)where p.id=@id 
```

但是第四个不工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:52:03.643

如果默认值存储在那里，您通常必须加入转换表两次：

```
set @lang  ='ar'
set  @id =2    
-- Does not work I need to select the default one
Select
    p.*,COALESCE(pt.Name,ptDef.Name) as Name
from
    xProduct p
       left join
    xProductT pt
       on
         (p.id = pt.pid and pt.lang = @lang)
       inner join
    xProductT ptDef
       on
         (p.id = ptDef.pid and ptDef.IsDefault=1)
where p.id=@id 
```

返回第`COALESCE`一个非 NULL 参数 - 因此`pt`，如果连接成功，或者 from`ptDef`是第一个连接失败，这将导致它更喜欢行中的值。

* * *

正如我在评论中指出的那样，我通常会推荐这种模式：

```
CREATE TABLE [dbo].[xProduct](
        [ID] [int] IDENTITY(1,1) NOT NULL,
    [Model] [varchar](255) NOT NULL,
    [DefaultName] [nvarchar](255) NOT NULL,
    [DefaultDescription] [nvarchar](255) NOT NULL,
 CONSTRAINT [PK_xProduct] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)
) ON [PRIMARY]

CREATE TABLE [dbo].[xProductT](
    [ID] [int] IDENTITY(1,1) NOT NULL,
        [PID] [int] NOT NULL,
    [Lang] [varchar](2) NOT NULL,
    [Name] [nvarchar](255) NOT NULL,
    [Description] [nvarchar](255) NOT NULL
 CONSTRAINT [PK_xProductT] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)
) ON [PRIMARY] 
```

因为您现在可以保证已提供默认语言版本（并且不需要向翻译表添加约束以防止将多种语言标记为默认语言）。然后它简化了查询：

```
 set @lang  ='ar'
set  @id =2    
-- Does not work I need to select the default one
Select
    p.*,COALESCE(pt.Name,p.DefaultName) as Name
from
    xProduct p
       left join
    xProductT pt
       on
         (p.id = pt.pid and pt.lang = @lang)
where p.id=@id 
```

（你可以，如果你想过火，存储默认值是哪种语言，并*防止*该语言的翻译出现在翻译表中。但这通常是过火的 - 通常，所有默认值都在一个单一的反正语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:41:59.337

您在**xProductT表中没有价值**

```
for @lang  ='ar' and @id =2 
```

尝试这样的事情：

```
set @lang  ='ar'
set  @id =2    
-- Does not work I need to select the default one
Select p.*,
       isnull([PID],1),
       isnull([Lang],'EN'),
       isnull([Name],'Sony Vaio E11611'),
       isnull([Description],'Sony Vaio E11611 Description'),
       isnull([IsDefault],1)

from xProduct p left join xProductT pt on (p.id = pt.pid and pt.lang = @lang)where p.id=@id 
```

### [SQL Fiddle 演示](http://sqlfiddle.com/#!3/aaafe/2)

# c# - 禁用按钮的 ContextMenu

> ID：13561149
> 
> 赞同：2
> 
> 时间：2012-11-26T08:32:05.963
> 
> 标签：c#, contextmenu

我想制作一个上下文菜单，当用户在控件上进行“右键单击”时显示，这是一个按钮。不幸的是，一些按钮被禁用。有人可以帮助我并告诉我如何给他们一个上下文菜单吗？

我的（不工作）尝试：

```
 private void ShowRightClickMenu(object sender, MouseEventArgs e)
    {
        ContextMenu Temp = new ContextMenu();
        if (e.Button == MouseButtons.Right && secondTagObj[Convert.ToInt32(((Button)sender).Tag)].typ != string.Empty)
        {
            this.ContextMenu = Temp;        // works
            Temp.MenuItems.Add("Create.."); //works
            Temp.MenuItems.Add("Delete");   // works
        }
        if (raster[Convert.ToInt32(((Button)sender).Tag)].Enabled == false && e.Button == MouseButtons.Right)
        {
            this.ContextMenu = Temp;        // works not
            Temp.MenuItems.Add("New...");   // works not
        }
        else
        {
            this.ContextMenu = Temp;        // works, but only if button is visible
            Temp.MenuItems.Add("New...");   // works, but only if button is visible
        }
    } 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:39:07.437

在 WPF 中，您可以使用`ContextMenuService`为禁用的控件启用上下文菜单。

```
private void ShowRightClickMenu(object sender, MouseEventArgs e)
{
    ContextMenu Temp = new ContextMenu();
    ContextMenuService.SetShowOnDisabled((Button)sender, true);
... 
```

[更新以获得更好的可读性] 对于 WinForms，请查看[Microsoft 论坛上的此条目](http://social.msdn.microsoft.com/Forums/en-US/winforms/thread/2977f3ae-5522-4ba5-a52e-133feebd51d4/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-18T21:52:40.747

*（假设这个问题是针对 WPF 的，如@medasocles 回答的评论中所示......）*

要`ContextMenuService`在 WPF 中使用 @medasocles 所提到的，您可以执行以下操作：

```
<Button Content="Blah" Command="{Binding MyCommand}" ContextMenuService.ShowOnDisabled="True">
    <Button.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Context Item" Command="{Binding MyContextCommand}" />
        </ContextMenu>
    </Button.ContextMenu>
</Button> 
```

我不相信这会真正解决你的问题。我认为将按钮放在框架中会更容易，比如边框，并将上下文菜单添加到边框。然后，我将向按钮添加一个触发器，该触发器设置为何`IsHitTestVisible`时`False`禁用按钮，从而允许交互传递到后面的边框，并且您的菜单可以按预期工作。

# jquery - 使用 jQuery Ajax 插件上传图像在 IE 中不起作用

> ID：13561150
> 
> 赞同：0
> 
> 时间：2012-11-26T08:32:06.450
> 
> 标签：jquery, ajax, file-upload, jquery-forms-plugin

我正在使用[Malsup 的 jquery 表单插件](http://www.malsup.com/jquery/form/)

我有这个代码。

```
$(document).ready(function() { 
        jQuery("input[name=file]").change(function(e){
            if( browserType == "MSIE" ){
                jQuery("#start_campaign").ajaxForm({
                    target: '.imgPreview',  
                    url: host+"/forms/campaign-image-upload.php?action=ajaxUploadImage",
                    beforeSend: function() {
                        console.log(2);
                    },
                    success: function(responseText,statusText,xhr,$form) {
                        alert('status: ' + statusText + '\n\nresponseText: \n' + responseText + 
                        '\n\nThe output div should have already been updated with the responseText.');
                    }
                }).submit();
            } else {
                readURL(this);
            }   
        });
    }); 
```

它在`beforeSend`函数上运行，但之后出现这种错误：

```
SCRIPT3: Member not found.

jquery.form.js, line 349 character 5
LOG: [jquery.form] state = complete 
```

这是第 349 行： ![在此处输入图像描述](../Images/f20d925b616d079f0d95017298ab6f35.png)

这段代码有什么问题？我一直在互联网上搜索并没有找到答案。

您的帮助将不胜感激和奖励！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T07:54:49.653

我的项目中也出现了同样的错误，因为我已经触发了文件上传控制的标签。

如果您已将文件上传控件触发到 div 或 a 等其他元素，如果是，请删除文件上传控件的触发器和 IE 中的简单显示文件上传控件，然后上传图像它将完美工作。

请试试这个。

对不起，我的英语不好

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T14:45:53.913

我通过查看此网址回答了这个问题：http: [//peroijanet.wordpress.com/2011/06/22/script3-member-not-found/](http://peroijanet.wordpress.com/2011/06/22/script3-member-not-found/)

似乎错误在于您的页面上有多个相同的提交按钮`name="submit"` 确保您只有一个提交按钮`<input type="submit" name="submit" value="Submit" />`

天哪，这拯救了我的一天！:D

# java - java中的队列错误

> ID：13561151
> 
> 赞同：0
> 
> 时间：2012-11-26T08:32:09.740
> 
> 标签：java, singleton, queue

我已经通过一个单例类实现了一个异步线程，其中存在一个队列，我向其中添加了日志记录对象。但它**在 java.util.linkedlist.remove 没有给出这样的元素异常**

```
public class LogDaoSingleton extends Thread {

private static LogDaoSingleton logDaoSingleton = new LogDaoSingleton();

private static Queue<ScoreLoggingObject> queue = new LinkedList<ScoreLoggingObject>();

private static Boolean firstTime = true;

private LogDAO logDAO;
private SkipLogDaoImpl skipLogDAO;

Connection conNull = null;
Connection connection = null;

private int counter = 0;

Connection con = null;

Connection skipCon = null;

public static LogDaoSingleton getInstance() {
    return logDaoSingleton;
}

private static void createInstance() {
    logDaoSingleton = new LogDaoSingleton();
}

private LogDaoSingleton() {
    try {
        con = HMDBUtil.getNonTxNullProdConnection();
        conNull = HMDBUtil.getNonTxNullProdConnection();
        skipCon = HMDBUtil.getNonTxNullProdConnection();
        logDAO = new LogDAOImpl();
        skipLogDAO = new SkipLogDaoImpl();
        hmCandScoreLog = PropertyReader.getStringProperty(
                CacheConstants.CLUSTER_REPORT,
                CacheConstants.HM_CAND_SCORE_LOG);
        hmCandScoreLogNull = PropertyReader.getStringProperty(
                CacheConstants.CLUSTER_REPORT,
                CacheConstants.HM_CAND_SCORE_LOG_NULL);
    } catch (HMCISException e) {
        e.printStackTrace();
    }
}

public static void addtoQueue(ScoreLoggingObject scoringObject) {
    queue.add(scoringObject);
    if (firstTime) {
        synchronized (firstTime) {
            if (firstTime) {
                createInstance();
                logDaoSingleton.setDaemon(false);
                logDaoSingleton.start();
                firstTime = false;
            }
        }
    }
}

public void run() {
    try {
        while (true) {
            try {
                if (null != queue && queue.size() > 0) {
                    logData(queue.poll());
                } else {
                    try {
                        Thread.sleep(2 * 60 * 1000);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }
                }
            } catch (Exception e) {
                // Do nothing.
            }
        }
    } catch (Throwable e) {
        firstTime = true;
    }
}

private void logData(ScoreLoggingObject scoreLoggingObject) {

    }
} 
```

}

错误在**logData(queue.poll());**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:23:40.937

这种方法至少存在三个问题：

```
public static void addtoQueue(ScoreLoggingObject scoringObject) {
    queue.add(scoringObject);
    if (firstTime) {
        synchronized (firstTime) {
            if (firstTime) {
                createInstance();
                logDaoSingleton.setDaemon(false);
                logDaoSingleton.start();
                firstTime = false;
            }
        }
    }
} 
```

即

1.  你正在添加一个`LinkedList`没有锁的东西。`LinkedList`不是并发安全集合。尝试`ConcurrentSkipLinkedList`作为更好的收藏。

2.  您正在阅读`firstTime`使用双重检查锁定...可能会产生您可能不相信的副作用...去看看“Java Concurrency in Practice”，特别是第 32 页上的 Yuck-face 列表。尝试预测什么该程序将在阅读本书*之前输出。*然后阅读说明。不幸的是，当我指出 JVM 有权在同步点之间重新排序操作时，我将不得不破坏该示例对您的影响。所以结果是*您的同步块*中的操作可以按*任何*顺序实现......例如它们可以按以下顺序发生（可能不是，但如果按此顺序执行，JVM 实现仍然有效）

    ```
     synchronized (firstTime) {
            if (firstTime) {
                firstTime = false;
                createInstance();
                logDaoSingleton.setDaemon(false);
                logDaoSingleton.start();
            }
        } 
    ```

    如果您的 createInstance() 方法中抛出异常会发生什么？

    如果是我，我会通过强制 JVM 遵守顺序来解决这个问题`firstTime`（`volatile`尽管您仍然需要仔细检查！）

3.  `firstTime`是`Boolean`由自动装箱初始化的，对于布尔值使用池实例，所以你的双重检查锁实际上是`synchronized (Boolean.TRUE)`而不是`synchronized (firstTime)`。此外，在非最终字段上同步是一种不好的形式，因为它几乎从不做你想做的事情。您可能只想使`addToQueue`方法同步*，直到*您知道有问题为止。

TL; DR 您正试图通过锁定变得“聪明”……总是一个糟糕的计划……尤其是在您知道自己需要聪明之前。写出可能可行的最简单的东西，然后继续解决剩下的问题。然后看看性能问题在哪里......只有这样你才应该担心锁定这个类。

# selenium - 无法将 isDisplayed() 方法值与文本文件中的输入数据进行比较

> ID：13561160
> 
> 赞同：0
> 
> 时间：2012-11-26T08:32:44.637
> 
> 标签：selenium, webdriver

我正在运行测试以检查元素是否显示，因为这是使用 isDisplayed() 方法。此方法获取该元素的正确状态（真/假），我的要求是将此布尔值（真/假）与另一个文本文件中给出的值进行比较。在比较这两个值时，虽然它应该通过，但测试失败了。

这是我的代码：

```
String expected = //Passing the expected value from text file.                  
Boolean actual = driver.findElement(By.xpath(//xpath).isDisplayed();
Assert.assertEquals(expected, actual);.![The image below show shows the debug view of both the variables][1] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:41:40.617

尝试改用与`Boolean.valueOf(String s)`比较。应该如此。`Boolean``String``expected``Boolean.valueOf(String s)`

# java - 当我们只有 .class 文件时如何转换对象？

> ID：13561161
> 
> 赞同：3
> 
> 时间：2012-11-26T08:32:45.740
> 
> 标签：java, reflection, casting

假设我有一个名为*ObjectFoo.class*的类文件，但我无权访问*ObjectFoo.java*源文件，因为**该类文件是在运行时创建的**。在这种情况下有没有办法投射一个对象？

目前，我正在使用此代码来转换对象，但在此示例中，我的类路径中需要有*ObjectFoo.java*：

```
Class c = Class.forName("ObjectFoo");
ObjectFoo object = (ObjectFoo) c.newInstance(); 
```

目标是使用 Java 反射从其类文件中实例化一个对象。 **我正在寻找仅使用 Java API 而没有其他第三方库的解决方案。**

提前感谢您的回答！

乔纳森。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:37:14.743

当您使用第三方库、打包为 .jar 文件时，您将始终针对 .class 文件进行编译和运行。.jar 档案包含 .class 文件，而不是 .java 文件。

因此，如果 ObjectFoo 类不属于某个包，则上面的代码是正确的。否则，您将不得不将完整的包之类的路径放到类中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:56:27.877

要使用 Java 类，您不需要源文件。您只需要编译好的类文件，并且需要确保Java 编译器可以在正确的位置找到该类文件。

`ObjectFoo.class`当您编译和运行您自己的代码时，请确保包含该文件的目录位于类路径中。您可以通过使用and命令的`-cp`选项来做到这一点：`javac``java`

```
javac -cp C:\SomeDirectory;. MyProgram.java
java -cp C:\SomeDirectory;. MyProgram.java 
```

`C:\SomeDirectory`包含的目录在哪里`ObjectFoo.class`。

注意：也没有理由使用反射、with`Class.forName(...)`等来创建`ObjectFoo`. 只需使用`new`运算符即可；那么你也不需要投射。

```
ObjectFoo object = new ObjectFoo(); 
```

# ssis - 在运行时覆盖 SSIS 连接管理器 ConnectionString

> ID：13561164
> 
> 赞同：1
> 
> 时间：2012-11-26T08:32:51.683
> 
> 标签：ssis

我有一个 SSIS 包，我从不同的 SQL Server 代理作业并行执行了几次。我使用命令行参数 /CONNECTION 将 ConnectionString 设置为连接管理器。

似乎 SSIS 正在用设计时值再次覆盖我的运行时 ConnectionString。我还找到了一篇 MSDN 文章，指出确实会发生这种情况。
[http://msdn.microsoft.com/en-us/library/bb500430(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/bb500430(v=sql.105).aspx)

有没有办法在运行时覆盖连接管理器 ConnectionString？我需要这个功能，因为我对不同的设置使用相同的包，所以我不能“硬编码”ConnectionString。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T12:41:38.633

如果您仅限于使用命令行，则使用**/SET**在运行时更改**变量**的值并使用表达式，从该变量构建连接字符串（因为您在上面发布的链接说 /SET 覆盖设计时值，而 /CONNECTION 没有。）

```
dtexec /f mypackage.dtsx /set \package.variables[myvariable].Value;myvalue 
```

在运行时覆盖或提供**ConnectionSting**的另一种方法是开始使用**包配置，如此**[处](http://msdn.microsoft.com/en-us/library/ms141682%28v=sql.90%29.aspx)所述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-14T19:37:41.790

使用记事本编辑`[mypackage].dtsx`，手动更改`ConnectionString`，然后保存。

# jquery - jQuery比较和追加

> ID：13561165
> 
> 赞同：0
> 
> 时间：2012-11-26T08:32:53.360
> 
> 标签：jquery, compare, append

我有一个用 jquery 检查的下拉菜单，如果选择了某个值，则会显示一个输入框。我需要将所选值与数组进行比较，如果选择与数组中的某个值匹配，则必须将该值添加到我的隐藏字段的标记中。非常感谢您的建议，因为我的 jquery 知识几乎没有

我当前的代码：（我将查询我的数据库以获取 Trekkers 的所有子值，这将是我的数组）

```
<script type="text/Javascript">
        jQuery(function ($){
            $(document).ready(function () {
                    $(".kw").hide();
                });

            $(function(){
                $('.postform').change(function() {
                    var selectData = $(this).attr("data-select");
                    var selectValue = $(this).val();
                    $('.kw').hide();
                     if($("fieldset[data-select='" + selectData + selectValue +"']").css("display") == "none"){
                         $("fieldset[data-select^='" + selectData + "']").hide();
                         $("fieldset[data-select='" + selectData + selectValue +"']").show();
                     }
                });
            });
        });
        </script>

<form role="search" method="get" id="equipfilter" action="">
 <fieldset>
  <select name="exc_equipment_cat" id="exc_equipment_cat" class="postform" data-select="select1">
    <option class="level-0" value="allerlei">Allerlei&nbsp;&nbsp;(10)</option>
    <option class="level-0" value="implemente">Implemente&nbsp;&nbsp;(97)</option>
    <option class="level-1" value="balers-toebehore">&nbsp;&nbsp;&nbsp;Balers &amp; Toebehore&nbsp;&nbsp;(4)</option>
    <option class="level-1" value="disse">&nbsp;&nbsp;&nbsp;Disse&nbsp;&nbsp;(4)</option>
    <option class="level-1" value="hammermeule">&nbsp;&nbsp;&nbsp;Hammermeule&nbsp;&nbsp;(4)</option>
    <option class="level-1" value="ploee">&nbsp;&nbsp;&nbsp;Ploeë&nbsp;&nbsp;(11)</option>
    <option class="level-1" value="ripper">&nbsp;&nbsp;&nbsp;Ripper&nbsp;&nbsp;(8)</option>
    <option class="level-0" value="trekkers">Trekkers&nbsp;&nbsp;(43)</option>
    <option class="level-1" value="case">&nbsp;&nbsp;&nbsp;Case&nbsp;&nbsp;(4)</option>
    <option class="level-1" value="fiat">&nbsp;&nbsp;&nbsp;Fiat&nbsp;&nbsp;(5)</option>
    <option class="level-1" value="ford">&nbsp;&nbsp;&nbsp;Ford&nbsp;&nbsp;(1)</option>
    <option class="level-1" value="john-deere">&nbsp;&nbsp;&nbsp;John Deere&nbsp;&nbsp;(13)</option>
    <option class="level-1" value="landini">&nbsp;&nbsp;&nbsp;Landini&nbsp;&nbsp;(5)</option>
    <option class="level-1" value="massey-ferguson">&nbsp;&nbsp;&nbsp;Massey Ferguson&nbsp;&nbsp;(3)</option>
    <option class="level-1" value="mccormick">&nbsp;&nbsp;&nbsp;McCormick&nbsp;&nbsp;(4)</option>
    <option class="level-1" value="new-holland">&nbsp;&nbsp;&nbsp;New Holland&nbsp;&nbsp;(8)</option>
 </select>
</fieldset>
<fieldset class="kw" data-select="select1 WHERE VALUE SHOULD BE ADDED" style="display: none;">
  <legend>Kw Range:</legend>
  <input type="text" name="kw_min" placeholder="min" value=""><br>
  <input type="text" name="kw_max" placeholder="max" value="">
 </fieldset>
 <fieldset>
  <legend>Price Range:</legend>
  <input type="text" name="pr_min" placeholder="from" value=""><br>
  <input type="text" name="pr_max" placeholder="to" value="">
 </fieldset>
<input type="submit" id="filtersubmit" value="Search">
</form> 
```

这是对[这个问题的回应](https://stackoverflow.com/q/13526454/1846934)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:40:06.667

我希望这可以帮助你

```
var values = ['a', 'b', 'c'];
jQuery('your-selector-to-select').change(function(){
    var j = jQuery(this);
    if(values.indexOf(j.val()) >= 0) {
        jQuery('hidden-selector').val(j.val());
    }
}); 
```

回答你的第一个问题：

```
jQuery('your-fieldset-selector').attr('data-select', 'select1 ' + j.val()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:43:56.487

使用 inArray(value,array) 在数组中搜索并获得匹配的索引。

```
var yourarray = ['value1','value2'];
$('.matchedindex').text($.inArray($('.search').val(),yourarray) ; 
```

如果`$('.search').val()`等于 value1则为`$('.matchedindex').text()`1

或者您可以使用 $.each 在数组中搜索：

```
var flag=false;
$.each(array,function(i,value){
    if(value.search($('.search').val())!=-1){
    # search is matched # you have index and value of array
        flag=true;
    }
}); 
```

# wpf - 查找 WPF 列表框中的所有控件

> ID：13561171
> 
> 赞同：1
> 
> 时间：2012-11-26T08:33:41.603
> 
> 标签：wpf

我想访问 WPF 列表框中的所有按钮，这是我的 xaml 代码。

```
<Grid>
    <ScrollViewer x:Name="myScrollViewer" HorizontalScrollBarVisibility="Disabled" MouseDown="myStackPanel_MouseDown"  MouseUp="myScrollViewer_MouseMove"  VerticalScrollBarVisibility="Hidden" Height="435" BorderBrush="{x:Null}" Width="250" Margin="0,-4,-4,-4" ScrollChanged="scrollerVideoCategory_ScrollChanged">
        <StackPanel Orientation="Vertical" Name="StackPanleEmployee" Margin="40,0,0,0" MouseDown="myStackPanel_MouseDown"  MouseUp="myScrollViewer_MouseMove"   Loaded="StackPanleVideoCategory_Loaded" >
            <ListBox x:Name="ListBoxEmployeVideoType" MouseDown="myStackPanel_MouseDown"  MouseUp="myScrollViewer_MouseMove"  BorderThickness="0,1,0,0" BorderBrush="#E2E2E2">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" Width="200" Name="myStackPanel" MouseDown="myStackPanel_MouseDown"  MouseUp="myScrollViewer_MouseMove" >
                            <Button  VerticalAlignment="Center" Style="{StaticResource ButtonVideoTabItemDefault}"   MouseUp="b_MouseMove"  Tag="{Binding Path}" Content="{Binding Name}" Name="btnSubCategory"  Click="btnVideoCategorySelection_Click"></Button>
                            <Separator Background="#E2E2E2" Margin="0"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

有人知道吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:22:38.083

像这样的东西可能会奏效

```
 /// <summary>
        /// Finds the visual child.
        /// </summary>
        /// <typeparam name="childItem">The type of the child item.</typeparam>
        /// <param name="obj">The obj.</param>
        /// <returns></returns>
        private IEnumerable<T> FindVisualChildren<T>(DependencyObject obj) where T : DependencyObject
        {
            for (int i = 0; i < VisualTreeHelper.GetChildrenCount(obj); i++)
            {
                DependencyObject child = VisualTreeHelper.GetChild(obj, i);
                if (child != null && child is T)
                {
                    yield return (T)child;
                }
                else
                {
                    var childOfChild = FindVisualChildren<T>(child);
                    if (childOfChild != null)
                    {
                        foreach (var subchild in childOfChild)
                        {
                            yield return subchild;
                        }
                    }
                }
            }
        } 
```

只需声明您想要的类型和包含它们的控件

```
 var buttons = FindVisualChildren<Button>(ListBoxEmployeVideoType).ToList(); 
```

这只是一个简单的示例，可以根据您的需要进行扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:41:06.947

您可以使用 VisualTreeHelper 或 LogicalTreeHelper 类的 GetChildren() 方法。[参考 SDK](http://msdn.microsoft.com/en-us/library/ms753391.aspx)

视觉树表示在 UI 中呈现的所有元素，而逻辑树是 UI 的基本结构。[您可以在此处](http://www.codeproject.com/Articles/21495/Understanding-the-Visual-Tree-and-Logical-Tree-in)阅读有关使用的详细信息

希望这可以帮助。

# asp.net-mvc - 在 MVC 中实现 Asp.Net Ajax 控件

> ID：13561176
> 
> 赞同：0
> 
> 时间：2012-11-26T08:33:59.857
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-ajax

我正在阅读[Telerik](http://xblogs.kompas-xnet.si/post/Telerik-ASPNET-AJAX-Controls-in-MVC-project.aspx)帖子关于 MVC 项目中的 Telerik ASP.NET AJAX 控件。根据他们的说法，我们可以在 Asp.Net MVC 中实现 Telerik AJAX 控件。所以我的问题是我们能否在我的 Asp.Net MVC 项目中实现 ASP.Net Ajax 控件。如果是，应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T14:37:35.950

是的，您可以，但您必须了解这些限制。您可以从[Telerik.com 上的文档中了解](http://www.telerik.com/help/aspnet-ajax/mvc-radcontrols-for-aspnet-mvc-overview.html)更多信息；他们有一些关于这个过程的文档。我建议尽可能使用 MVC 助手。

# r - 将变量添加到 R 中的 ts 对象

> ID：13561180
> 
> 赞同：0
> 
> 时间：2012-11-26T08:34:26.830
> 
> 标签：r, time-series

我有一个使用`as.ts`R 中的函数创建的对象，现在我想要一种简单的方法来转换其中一个变量并将其添加到同一个`ts`对象中。所以，例如

```
tsMloa <- ts(read.dta("http://www.stata-press.com/data/r12/mloa.dta"), frequency=12, start=1959)
tsMloa[, "meanLog"] <- tsMloa[,"log"] - mean(tsMloa[,"log"]) 
```

给我一个`subscript out of bounds`错误。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:04:05.263

首先，您应该考虑添加`require(foreign)`到您的示例代码中，因为它是运行您的代码所必需的。

我对文件或它们的格式一无所知`*.dta`，但我可以告诉你，如果你想在 中使用时间序列`R`，你最好研究一下`zoo`and`xts`系列函数。

考虑到这一点，请尝试以下操作：

```
require(xts)
require(foreign)

tsMloa <- ts(read.dta("http://www.stata-press.com/data/r12/mloa.dta"), frequency=12, start=1959)

tt <- seq(as.Date("1959-01-01"), as.Date("1990-12-01"), by='mon')
tsMloa_x <- xts(unclass(tsMloa)[,1:3], order.by=tt)

tsMloa_x$meanLog <- tsMloa_x$log - mean(tsMloa_x$log) 
```

那应该可以满足您的需求-它使您有理由研究非常好的软件包。

* * *

用`zoo`-- 加上我创建了一个函数来把你的整数变成月份。

```
require(foreign)
require(zoo)

Mloa <- read.dta("http://www.stata-press.com/data/r12/mloa.dta"), frequency=12, start=1959)

intToMonth <- function(intMonth, origin = "1960-01-01"){
    dd <- as.POSIXlt(origin)
    ddVec <- rep(dd, length(intMonth))
    ddVec$mon  <- ddVec$mon + intMonth%%12
    ddVec$year <- ddVec$year + intMonth%/%12
    ddRet <- as.Date(ddVec)
    return(ddRet)
}

dateString <- intToMonth(Mloa[, 'tm'])

zMloa <- zoo(Mloa[, -2], dateString)
zMloa$meanLog <- zMloa$log - mean(zMloa$log) 
```

正如我所看到的，您的问题是将源文件中的时间戳转换为 R 可以理解并可以使用的东西。我发现适应 R 的这一部分特别棘手。

上述函数将获取您的月份整数，并将它们转换为一个`Date`对象。结果输出将与`zoo`和`xts`作为`order.by`参数一起使用。

如果您需要更改原始日期，只需向函数提供第二个参数 - 即`otherDateString <- intToMonth(timeInts, "2011-01-01")`.

# java - Android日期选择器计算，在特定日期之前和之后

> ID：13561188
> 
> 赞同：0
> 
> 时间：2012-11-26T08:35:17.563
> 
> 标签：java, android, date, calendar, datepicker

我有一个应用程序，它使用当前日期和用户使用日期选择器选择的日期，如下所示：

*   如果用户选择的日期大于当前日期+280 天，则会执行一些代码。

*   如果用户选择的日期小于当前日期，则会执行一些代码。

我用这段代码这样做..

```
 Calendar start2 = Calendar.getInstance();

       int birthYear = birthDayDatePicker.getYear();
            int birthMonth = birthDayDatePicker.getMonth();
            int birthDay = birthDayDatePicker.getDayOfMonth();

            start2.set(birthYear, birthMonth, birthDay);

           Calendar cal2 = Calendar.getInstance();
           cal2.setTime(birthDate);
           cal2.add(Calendar.DAY_OF_MONTH,daysToAdd);
 birthDayChosenCalender.set(birthYear,birthMonth,birthDay);
         MaxBirthDayCalender.set(currentYear, currentMonth, currentDay);

          long diff = birthDayChosenCalender.getTimeInMillis() - MaxBirthDayCalender.getTimeInMillis(); //result in millis
          long daysBetween = diff / (24 * 60 * 60 * 1000);
          System.out.println("Days between ,,,,,,,,,,,,,,,,,,"+daysBetween);

          if(MaxBirthDayCalender.before(birthDayChosenCalender) && daysBetween <= 280){

do sth } 
```

有没有其他干净的方法来做到这一点！因为这种方式效果不好！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:37:15.383

另一种干净的方法是使用 Joda Time 库。

除此之外，一切都可以使用 millis 和单个日历实例来完成：

```
Calendar pickedDate = new GregorianCalendar(
        picker.getYear(), 
        picker.getMonth(), 
        picker.getDayOfMonth());
long pickedTime = pickedDate.getTimeInMillis();
long now = new Date().getTime();

if (pickedTime - now <= (280 * 24 * 60 * 60 * 1000)) { // 280 days in milliseconds
  // ...
} 
```

应满足以下要求：

> 我有一个应用程序，它使用当前日期和用户使用日期选择器选择的日期，如下所示：
> 
> *   如果用户选择的日期大于当前日期+280 天，则会执行一些代码。
> *   如果用户选择的日期小于当前日期，则会执行一些代码。

# windows-phone-8 - 获取数据使用情况 WP8

> ID：13561189
> 
> 赞同：3
> 
> 时间：2012-11-26T08:35:19.577
> 
> 标签：windows-phone-8, traffic

如何在我的 WP8 上以编程方式获取数据使用情况？我找到`DataUsage`了具有属性的类`BytesReceived`和`BytesSent`. 但在 MSDN 上，我发现了以下内容：

> 备注 Windows Phone 8 此 API 未实现，如果调用将引发异常。

也许，有人知道我怎样才能获得流量使用情况（用于蜂窝/Wifi 连接）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T08:53:46.167

不幸的是，没有 API 可以获取手机的整体流量使用情况。或者至少，第三方开发人员无法使用（可能存在某种内部 API，因为 Data Sense 能够显示该信息）。

# asp.net-mvc - 我的 webapi mvc4 没有在带有 net.4.0 的服务器中运行

> ID：13561191
> 
> 赞同：0
> 
> 时间：2012-11-26T08:35:30.920
> 
> 标签：asp.net-mvc, .net-4.0

您好，我使用框架 4.5 制作了一个应用程序（与 SQL 服务器连接的 WEB API MVC4），在我的 IIS express 中运行良好，但我尝试在使用框架 4.0 的其他服务器上发布，我的应用程序没有运行？我更改了我的应用程序的属性，适用于框架 4.0，并且在我的 IIS express 中运行良好，但其他服务器没有运行。我无法在其他服务器上上传版本框架。谢谢你的回答，对不起我正在学习的英语

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T12:01:06.850

也许您在 Web 应用程序中更改了不足以部署的目标框架属性。在您的代码中，您可以使用需要 .net 4.5 的库，而您只更改了设置。关于在您的 iis express 中运行它必须说您的系统默认支持 .net 4.5，而您的应用程序说我只需要 .net 4.0。所以 .net 4.5 相关部分将在本地服务器上编译和执行，这里没有歧义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T04:42:27.443

不支持在 .NET4 机器上运行基于 .NET4.5 的应用程序。仅仅因为 .NET4.5 是 .NET4 的超集。为 .NET4 构建的所有内容都适用于 .NET4.5，但反之则不行。如果您使用的是 Visual Studio 2012，您可以将 TargetFramework（在项目属性中）更改为 .NET Framework 4，这将确保您的应用是为 .NET4 构建的。

--Varun（.NET 框架团队）

# sql - 有人可以验证这个功能吗？

> ID：13561195
> 
> 赞同：0
> 
> 时间：2012-11-26T08:35:43.603
> 
> 标签：sql, sql-server

抱歉打扰各位了。我的任务是在客户端进行一些代码审查，发给我的笔记本电脑没有安装 SQL。当我在等待安装时，想忙着查看代码并遇​​到了这个 gem

```
CREATE FUNCTION [dbo].[Uf_GetTotalDaysInMonth]
(
    -- Add the parameters for the function here
    @anydateofMonth datetime
)
RETURNS int
AS
BEGIN
    -- Declare the return variable here
    DECLARE @totalDaysInMonth int
    -- Add the T-SQL statements to compute the return value here

        DECLARE @givendate datetime
        SET @givendate = STR(Year(@givendate)) + '-' + STR(Month(@givendate) + 1) + '-01' 

        select @totalDaysInMonth = datepart(dd, dateadd(day, -1, @givendate))

    -- Return the result of the function
    RETURN @totalDaysInMonth

END 
```

忽略不必要的额外变量的使用，我相信这个函数会在12月崩溃

```
STR(Month(@givendate) + 1) 
```

将评估为 13 并将给出超出范围的日期错误。有人可以帮我验证一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:03:04.580

当通过 @anydateofMonth 十二月日期时，您将在函数中遇到错误。你可以使用这个：

```
CREATE FUNCTION [dbo].[Uf_GetTotalDaysInMonth]
(
    -- Add the parameters for the function here
    @anydateofMonth datetime
)
RETURNS int
AS
 BEGIN
    DECLARE @nextMonth datetime
    SET @nextMonth = dateadd(m, 1, @anydateofMonth)
    RETURN (SELECT Day(dateadd(d, -Day(@nextMonth), @nextMonth)))
  END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:45:23.230

[http://sqlfiddle.com/#!6/185c9/7](http://sqlfiddle.com/#!6/185c9/7)

SQL Fiddle没有错误，只有13作为输出

# buttonclick - Blackberry10 级联

> ID：13561196
> 
> 赞同：0
> 
> 时间：2012-11-26T08:35:46.097
> 
> 标签：buttonclick, blackberry-10

我是 Blackberry 10 开发的新手。我创建了一个按钮，但我无法从当前屏幕到下一个屏幕执行推送屏幕功能。这是我正在使用的代码：

```
onClicked:{
  navigationPane.push(firstPage);
} 
```

而且我还使用实现了一个选项卡

```
TabbedPane {
  activePane: Page {
    Label {
      id: label
      text: "What do you like more, kittens or puppies?"

    }
  }
  sidebarState: SidebarState.VisibleCompact
  onActiveTabChanged: {
  }
  Tab {
    title: "Puppies"
    onTriggered: label.text = "kittens"
          NavigationPane {
     id: navigationPane 
```

> **`//how to call a screen from this,i got stuck with this,can any some send me simple code for pushing a screen.?`**

```
 }
  }
  Tab {
    title: "Kittens"
    onTriggered: label.text = "I love kittens!"
          NavigationPane {
     id: navigationPane

      >   **`//how to call a screen from this,i got stuck with this,can any some send me simple code for pushing a screen.?`**

      }
  }
} 
```

在此选项卡中，我想在单击选项卡图标时执行推送屏幕功能。谁能帮我完成这两个功能？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T07:51:51.550

这是为不同屏幕创建选项卡的示例，您在主选项卡中进入下一个 qml，如下所示

```
Tab {
 title: "Puppies"
NavigationPane {
        id: navigationPane
        Sample //this is one qml page as like Sample.qml
       {
        }
    } 
```

}

```
Tab {
 title: "Kittens"
NavigationPane {
        id: testpage
        Test //this is one qml page as like Test.qml
       {
        }
    } 
```

}

您可以通过设置 id 来访问其他 qml 文件：，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:08:26.510

您必须在每个选项卡内声明一个 NavigationPane，然后将其推入：

```
Tab {
title: "Puppies"
onTriggered: label.text = "kittens"
NavigationPane {
   id: navigationPane
} 
```

}

# c# - ConsoleCancelEventHandler - 按下 Ctrl+C 时无法输入

> ID：13561200
> 
> 赞同：0
> 
> 时间：2012-11-26T08:36:19.000
> 
> 标签：c#

我的 C# 项目包含这样的代码：

```
 public static void ConsoleCancelEventHandler(object sender, ConsoleCancelEventArgs e)
    {
        bExit = true;
        Thread.Sleep(5000);
    }

    static void Main(string[] args)
    {
        Console.CancelKeyPress += ConsoleCancelEventHandler; 
```

这可能不是出色的代码风格。但我的问题是 - 为什么它不起作用。将 C++ CLI 项目添加到我的解决方案后，我无法访问`ConsoleCancelEventHandler`. 我按下`Ctrl+C`但没有任何反应。为什么？我该如何处理`Ctrl+C`才能正确退出应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:25:12.890

不知道为什么 .NET 处理程序不工作，但[`SetConsoleCtrlHandler`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)应该工作：

[捕获控制台退出 C#](https://stackoverflow.com/questions/474679/capture-console-exit-c-sharp/474743#474743)

# login - 在第三方网站上“远程”登录

> ID：13561208
> 
> 赞同：1
> 
> 时间：2012-11-26T08:36:54.387
> 
> 标签：login, request

我有一个相当笼统的问题，从某种意义上说，我什至不确定这是否可能。我正在尝试收集一些关于它的意见，来自更有经验的人。

想象一下，我是三个（只是说一个数字）在线书店的成员。多年来，我在这三个帐户上都买了很多书。现在，假设我想创建一个应用程序，它可以登录这三个帐户并执行服务器请求以将我的所有书籍排序在一个列表中。这样我就可以从一个位置访问我的书籍，类似于 Pidgin 或 Trillian 使用多个即时通讯服务所做的那样。

这甚至是一个现实的选择吗？当然，我不*知道*我必须执行哪些服务器请求和/或数据将以哪种数据格式发回。假设这不会侵犯所有 EULA，您将如何处理？

这有点模糊，但这就是我目前所拥有的一切:)

提前非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:48:39.323

恐怕您必须通过自己的 API 与每台服务器通信（假设它有一个）。然后，您可以从每个服务器获取相关信息并在您的应用程序中对其进行处理（例如，获取公共信息，将其聚合到单个列表中，排序...）。

这或多或少是 pidgin/trillian 所做的。

恕我直言，当您想通过您的应用购买新书时，会出现更有趣的问题 :)

# c# - 覆盖 EntityFramework SaveChanges - 获取 SQL 并调用自定义过程

> ID：13561209
> 
> 赞同：5
> 
> 时间：2012-11-26T08:37:00.500
> 
> 标签：c#, entity-framework, entity-framework-5

我正在寻找一种方法来覆盖 EF 中的 SaveChanges 方法/进程。我们需要以某种方式获取 SQL，阻止执行正常的更新/删除/插入，并使用生成的 SQL 来运行我们的自定义过程。

*   正常打电话`SaveChanges()`。让 EF 生成 SQL。
*   获取 SQL
*   防止该 SQL 以正常方式执行
*   调用自定义存储过程（需要额外的参数等）
*   假装我们执行`SaveChanges`（或只是返回 0）

我看到的唯一真正的问题是从方法内部获取 SQL `SaveChanges`。我们会做的是这样的事情，理想情况下......

1.  获取提供者/连接/等
2.  设置事件挂钩来处理这个
3.  完成，没有代码更改/覆盖等。

我们正在使用 MVC4 和 EF5 对 3 个字母的首字母缩写词的数据库。这里的重点是避免在每个更新操作中手动编写 SQL，并依靠 EF 为我们生成所有这些。由于该过程采用直接 SQL

是的，这不是一个好方法（单一程序），但我们在这件事上别无选择。没有任何。如果我们不能这样做，那么我们将需要编写自定义 sql。也许我们可以通过另一种方式来执行此操作，即传递上下文并自己完成工作？然后我们可以审计'SaveChanges（）'从未被调用：D

**解决方案**

* * *

我使用`EFTracingProvider`作为起点来创建我自己的提供程序来执行此操作（以及其他一些事情）。您也可以*只*使用 EFTracingProvider 将所有内容放在您的 Entities 类中并处理事件。您不会看到修改后的 SQL，因为此事件将在它之后触发，因此您需要进行自己的日志记录。这已被剥离以更好地适应网站:)

```
public class MyEntities : MyBaseEntities
{

    public MyEntities(): this(connectionString: "name=MyBaseEntities") {}
    public MyEntities(string connectionString) 
             : base(MakeConnection(connectionString, "EFTracingProvider")) {}

    /// <summary>
    /// Insert the wrapped connection by calling the base toolkit.
    private static EntityConnection MakeConnection(string connectionString, params string[] providers)
    {
        var conn = EntityConnectionWrapperUtils.CreateEntityConnectionWithWrappers(
            connectionString,
            providers
            );

        //get the tracing connection, so that we can attach event handlers
        var us = conn.UnwrapConnection<EFTracingConnection>();
        if (us != null)
        {
            us.CommandExecuting += BeforeExecute;
        }
        return conn;
    }

    private static void BeforeExecute(object sender, CommandExecutionEventArgs e)
    {
        // If an Create/Update/Delete action then we need to wrap it in our custom proc   
        if (IsCudAction(e.CommandTree))
        {
            var text = cmd.Parameters.Cast<DbParameter>().Aggregate(
                cmd.CommandText, 
                (current, p) => current.Replace(p.ParameterName, SafeSql.Prepare(p.Value)));

            cmd.CommandType = CommandType.StoredProcedure;
            cmd.CommandText = "[dbo].[ExecuteForMe]";
            cmd.Parameters.Clear();
            cmd.Parameters.AddRange(new[]
                {
                    new SqlParameter("commandText", text),
                    new SqlParameter("extraInfo", "logging context")
                });
        }
    }

    public static bool IsCudAction(DbCommandTree commandTree)
    {
        if (commandTree is DbUpdateCommandTree) return true;
        if (commandTree is DbDeleteCommandTree) return true;
        if (commandTree is DbInsertCommandTree) return true;
        if (commandTree is DbQueryCommandTree) return false;
        if (commandTree is DbFunctionCommandTree) return false;
        throw new InvalidOperationException("Unknown type of CommandTree: " + commandTree.GetType().Name);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:25:08.620

似乎有可能使用[EF Tracing Provider](http://efwrappers.codeplex.com/)获取 SQL ...请参阅此[链接中的最后一篇文章](https://stackoverflow.com/questions/11578374/entity-framework-4-0-how-to-see-sql-statements-for-savechanges-method)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T21:34:12.887

正如我在评论中所说，您可以[将 crud 操作映射到存储过程](http://weblogs.asp.net/zeeshanhirani/archive/2010/10/14/inserting-updating-and-deleting-entity-using-stored-procedures.aspx)（嗯，CUD 操作）。是的，编写、映射和维护这些存储过程需要大量工作，但可能的收益是更好的性能和安全性。这就是 DBA 如此喜欢它们的原因。这甚至可能是在您的数据库中创建这个中央整体过程的主要原因。可能有一种方法可以使用“CUD sprocs”来满足相同的要求。

# branch - 拥有 5 家旅馆的非营利性社会：只有一个 FB 页面还是每个都有自己的页面？

> ID：13561214
> 
> 赞同：0
> 
> 时间：2012-11-26T08:37:15.990
> 
> 标签：branch, facebook-page

我们是一个非营利性社会，在全县拥有十几家旅馆（和其他设施）。

如果我们为每个旅馆设置一个 FB 页面，我们的客人可能会*喜欢*他们的旅馆（他们与之联系的旅馆，因为这是他们的*临时住所*），但他们很可能不*喜欢*我们的治理社会。这对于个人旅馆来说很酷，可以提高其声誉，但不会影响我们主要品牌的声誉。

有类似场景的经验吗？你会怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:02:15.807

为所有旅馆创建一个页面。在不同地点管理和转售旅馆更容易（也更便宜）。协同作用依赖于团队而不是个人层面。

# php - 在 insert_batch 之前调用 empty_table 的 codeigniter

> ID：13561215
> 
> 赞同：1
> 
> 时间：2012-11-26T08:37:16.297
> 
> 标签：php, codeigniter, activerecord

我有一个包含 3 个字段的表（myTable）：

```
ID (int), posistion(int), products_id(int) 
```

我有一个表格，我们可以在其中更改订单，并从此列表中删除项目。用户完成编辑列表后，他提交表单。

我想在插入新数据之前清空表格。

所以我打电话`$this->db->empty_table("myTable");`

之后我像这样插入新数据：

```
$this->db->insert_batch("jcarousel",$insert); 
```

问题是：在插入查询之后以某种方式调用了 empty_table()，因为我的表总是空的。需要明确的是：当我注释掉时，我的插入查询工作正常`//$this->db->empty_table("myTable");`

我已经尝试了几件事，所以我的代码有点搞砸了。现在它看起来像这样：

```
public function change_carousel_order($value='')
{
    $this->output->enable_profiler(TRUE);
    $empty = $this->empty_table();
    //$empty = TRUE;
    $form = $this->input->post();
    //print_r($form['order']);
    $insert = array();
    foreach ($form['order'] as $key => $value) {
        //echo "value: ".$value;
        $insert[$key]['product_id'] = $value;
        $insert[$key]['posistion'] = $key;

    }
    echo $this->db->last_query();
    if($empty==TRUE)
    {
        echo "jaaa";
        echo $this->insert_change_carausel_order($insert);
    }
    else{
        echo "neee!";
    }
    echo $this->db->last_query();
    //redirect("welcome/jcarousel");
}
public function empty_table($value='')
{
    return $this->db->empty_table("jcarousel");
}
public function insert_change_carausel_order($insert=array())
{
    return $this->db->insert_batch("jcarousel",$insert);
} 
```

任何人都看到我做错了什么？为什么调用 empty_table() 后 codeigniter 不插入任何数据？任何帮助将不胜感激。

$this->output->enable_profiler(TRUE); 告诉我们有 2 个查询；删除查询确实在插入查询之后运行

```
0.0003       DELETE FROM `jcarousel` 
0.0002       INSERT INTO `jcarousel` (`posistion`, `product_id`) VALUES (0,'755'), (1,'835'), (2,'838') 
```

和另一个结果相同的设置：

```
0.0006       DELETE FROM `jcarousel` 
0.0002       INSERT INTO `jcarousel` (`posistion`, `product_id`) VALUES (0,'755'), (1,'835'), (2,'838') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:56:46.163

我认为你有拼写错误的问题。

正如你所说

```
ID (int), position(int), products_id(int) 
```

但是在数组中你使用如下

```
//wrong
$insert[$key]['product_id'] = $value;

//correct
$insert[$key]['products_id'] = $value;

//wrong
$insert[$key]['posistion'] = $key;

//correct
$insert[$key]['position'] = $key; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T12:28:01.723

问题是 chrome 的 firebug 插件。这会导致页面被加载两次，第二次加载它丢失了所有的帖子数据。

希望我能帮助某人解决这个问题（最好是晚一点，然后永远不要）

# html - 用于移动设备的 html5 全屏 API

> ID：13561217
> 
> 赞同：4
> 
> 时间：2012-11-26T08:37:18.167
> 
> 标签：html, mobile, fullscreen

它可以？

我试过了，它在 PC 上运行正常，但我的移动设备都没有成功（ipad、nexus 7、三星 Galaxy S3、Kindle fire HD……）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:40:19.197

[根据http://caniuse.com/#search=fullscreen](http://caniuse.com/#search=fullscreen)，浏览器对全屏 API 的支持实际上很差

如果你真的需要为你的应用程序使用整个屏幕，你应该为移动用户找到一个替代方案。

这个 Javascript hack 可以帮助你：http: [//mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/remove-address-bar/)

# matlab - matlab 巴特沃斯滤波器

> ID：13561219
> 
> 赞同：1
> 
> 时间：2012-11-26T08:37:33.173
> 
> 标签：matlab, filter, octave

我需要应用一个巴特沃斯过滤器。为了证明我的截止频率，我需要像图片的第二个正方形那样绘制“残差与截止频率”图。

残差来自

![在此处输入图像描述](../Images/044c9826503dabbde3d2f3383990f85a.png)

所以我想申请一个

-巴特沃斯滤波器

-低通

*   订单 n=2

*   截止频率 wn= [0,20] Hz

所以我怀疑是否有办法通过matlab找到残差。然后根据截止频率绘制它们。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:24:07.337

您可以获取输入信号（调用它`x`）并执行类似的操作

```
[b,a]=butter(2, [0 0.3]) % assuming the cutoff is 0.3 times the Nyquist frequency
y = filter(b,a,x)
n = length(x)
z = x - y
z = z.^2
z = sum(z) / n
R = sqrt(z) 
```

# python - 使用python多线程时需要锁吗？

> ID：13561220
> 
> 赞同：4
> 
> 时间：2012-11-26T08:37:35.070
> 
> 标签：python, multithreading

想想这段代码：

```
#!/usr/bin/env python

from threading import Thread

count = 0

def test():
    global count
    for i in range(10):
        count = count + 1

if __name__ == '__main__':
    for i in range(1000):
        Thread(target = test).start()
    print count 
```

我使用多个线程，但结果总是正确的。这是否意味着我可以在实现访客计数器之类的东西时使用没有锁的 python 线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:41:19.993

你确实需要一个。尽管多线程在 Python 中的工作方式不同，但由于[Global Interpreter Lock](http://wiki.python.org/moin/GlobalInterpreterLock)，Python 字节码中非原子的操作仍然需要锁定。

在你的情况下，你可以检查你的函数`test`（`dis.dis(test)`）的字节码：

```
 3           0 SETUP_LOOP              30 (to 33)
             3 LOAD_GLOBAL              0 (range)
             6 LOAD_CONST               1 (1000)
             9 CALL_FUNCTION            1
            12 GET_ITER
       >>   13 FOR_ITER                16 (to 32)
            16 STORE_FAST               0 (i)

 4          19 LOAD_GLOBAL              1 (count)   # start of increment
            22 LOAD_CONST               2 (1)
            25 BINARY_ADD
            26 STORE_GLOBAL             1 (count)   # end of increment
            29 JUMP_ABSOLUTE           13
       >>   32 POP_BLOCK
       >>   33 LOAD_CONST               0 (None)
            36 RETURN_VALUE 
```

如您所见，增量是字节码级别的 2xload、update、store，所以这不起作用。增量实际上是 4 个单独的操作，您必须保护它们以确保它们不会被中断。

在您的示例中，即使您使用 ，问题仍然存在`count += 1`，如字节码所示：

```
4          19 LOAD_GLOBAL              1 (count)
           22 LOAD_CONST               2 (1)
           25 INPLACE_ADD
           26 STORE_GLOBAL             1 (count) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:52:42.847

如果你只是做作业，你就不需要锁。

但是当你这样做`count = count + 1`时，在每次读取`count`、添加`1`和写入之间可能会发生一些事情`count`。

即使使用`count += 1`也不能解决这个问题，因为这也涉及到分配。（由于就地操作也涉及到后台分配，所以情况是一样的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:51:12.220

当然你应该使用锁。在这种简单的情况下，您已经得到了正确的答案。尝试在**main**中设置 range(100000) 。你会看到问题。在我的机器中，结果是 999960，但它是随机结果。根据系统负载等情况会出现错误。

# objective-c - 以编程方式创建的 NSButton 不会按下

> ID：13561221
> 
> 赞同：2
> 
> 时间：2012-11-26T08:37:39.570
> 
> 标签：objective-c, macos, nsview, nsbutton, nsbuttoncell

当我单击它们时，我以编程方式创建的按钮基本上没有被按下。知道为什么吗？什么都没有发生，动作没有触发，图像没有变成备用图像，等等。

（我正在使用 MomentaryChangeButton 但我已将其设置为 MomentaryPushIn （以检查它是否在推动。这并不令人沮丧。）

```
 NSButton *titleButton = [[NSButton alloc]initWithFrame:NSMakeRect(TITLE_BUTTON_X_OFFSET, TITLE_BUTTON_Y_OFFSET, TITLE_BUTTON_WIDTH, TITLE_BUTTON_HEIGHT)];
    [titleButton setBordered:NO];
    [titleButton setNeedsDisplay:YES];
    [titleButton setImage:[NSImage imageNamed:TITLE_BUTTON_NAME]];
    [titleButton setAlternateImage:[NSImage imageNamed:TITLE_BUTTON_PRESSED_NAME]];
    [titleButton setButtonType:NSMomentaryChangeButton];
    [self addSubview:titleButton];

    NSButton *aboutButton = [[NSButton alloc]initWithFrame:NSMakeRect(ABOUT_BUTTON_X_OFFSET, ABOUT_BUTTON_Y_OFFSET, ABOUT_BUTTON_WIDTH, ABOUT_BUTTON_HEIGHT)];
    [aboutButton setBordered:NO];
    [aboutButton setNeedsDisplay:YES];
    [aboutButton setButtonType:NSMomentaryChangeButton];
    [aboutButton setImage:[NSImage imageNamed:ABOUT_BUTTON_NAME]];
    [aboutButton setAlternateImage:[NSImage imageNamed:ABOUT_BUTTON_PRESSED_NAME]];
    [[aboutButton image] setSize:NSMakeSize(ABOUT_BUTTON_WIDTH, ABOUT_BUTTON_HEIGHT)];
    [[aboutButton alternateImage]setSize:NSMakeSize(ABOUT_BUTTON_WIDTH, ABOUT_BUTTON_HEIGHT)];
    [self addSubview:aboutButton];

    NSButton *settingsButton = [[NSButton alloc]initWithFrame:NSMakeRect(SETTINGS_BUTTON_X_OFFSET, SETTINGS_BUTTON_Y_OFFSET, SETTINGS_BUTTON_WIDTH, SETTINGS_BUTTON_HEIGHT)];
    [settingsButton setBordered:NO];
    [settingsButton setNeedsDisplay:YES];
    [settingsButton setButtonType:NSMomentaryChangeButton];
    [settingsButton setImage:[NSImage imageNamed:SETTINGS_BUTTON_NAME]];
    [settingsButton setAlternateImage:[NSImage imageNamed:SETTINGS_BUTTON_PRESSED_NAME]];
    [[settingsButton image] setSize:NSMakeSize(SETTINGS_BUTTON_WIDTH, SETTINGS_BUTTON_HEIGHT)];

    [self addSubview:settingsButton]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:40:33.707

您必须为每个按钮实现`setTarget:`和。`setAction:`

* * *

完整的实现是：

```
-(void)awakeFromNib{

    NSString *SETTINGS_BUTTON_NAME=@"red.png";
    NSString *SETTINGS_BUTTON_PRESSED_NAME=@"green.png";

    NSButton *settingsButton = [[NSButton alloc]initWithFrame:NSMakeRect(20, 500, 120, 32)];
    [settingsButton setBordered:YES];
    [settingsButton setNeedsDisplay:YES];
    [settingsButton setButtonType:NSMomentaryChangeButton];
    [settingsButton setImage:[NSImage imageNamed:SETTINGS_BUTTON_NAME]];
    [settingsButton setAlternateImage:[NSImage imageNamed:SETTINGS_BUTTON_PRESSED_NAME]];
    [[settingsButton image] setSize:NSMakeSize(120,32)];

    [settingsButton setTitle:@"title"];
    [settingsButton setTarget: self];
    [settingsButton setAction: @selector(invisible:)]; //invisible is a selector see below
    [self.window.contentView addSubview: settingsButton];
}

- (IBAction)invisible:(id)sender{ //change this name accordingly
    NSLog(@"yepiiee");
} 
```

编辑：根据我的方便，我做了一些更改，图像和框架矩形大小，您可以根据您的要求进行更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:26:31.103

尝试检查要添加按钮的视图的框架。View 可以绘制其子视图，但如果按钮不在“可见”框架区域中，则不会接收到动作。

# css - 全屏 Flash 背景

> ID：13561225
> 
> 赞同：-1
> 
> 时间：2012-11-26T08:37:51.130
> 
> 标签：css, flash

我试图在我的 HTML 内容后面播放全屏 Flash 电影。

我已经成功地做到了，但问题是它不能全屏拉伸。

我的分区：

```
<div id="flashmovie" style="width:100%;height:100%;position:absolute; z-index:-999;left:0;top:0">
    <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="100%" height="100%">
        <param name="movie" value="resources/video/bg_grass.swf" />
        <param name="quality" value="high" />
        <param name="wmode" value="transparent">
        <param name="scale" value="exactfit">
        <param name="salign" value="t">
        <embed src="resources/video/bg_grass.swf" quality="high" type="application/x-shockwave-flash" width="100%" height="100%" wmode="transparent" pluginspage="http://www.macromedia.com/go/getflashplayer" />
    </object>
</div> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:53:40.990

使其位置固定，高度和宽度为 100%。应该可以解决问题。

# ios - iOS - 使用隐藏式字幕的 AVPlayer

> ID：13561228
> 
> 赞同：10
> 
> 时间：2012-11-26T08:38:00.587
> 
> 标签：ios, captions

我正在使用 iOS 上的 AVPlayer 使用“closedCaptionDisplayEnabled 属性”在电影（hls 或 mp4）上显示字幕或副标题，但字幕不显示任何内容。我不知道为什么？

您有什么解决方案可以在电影（hls，mp4）上显示字幕（字幕）吗？

我看到了一些关于应用程序、youtube、netflix、tvguide 和一些用于隐藏字幕的示例。

我想可能是 iphone 上的所有应用程序、netflix 的 ipad、youtube 使用一个文件并在视频中插入字幕

但是，我想使用两个文件（一个文件 hls 或 mp4，一个文件 srt 或 WebVTT）

[图像1](http://zencoder.com/images/ipad-captions.png)，[图像2](http://fawny.org/blogimages/CCfoto-iOS-CC-Courier.PNG)

感谢您阅读本文！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-03-17T22:16:41.707

iOS AVPlayer 通过以下两种方式之一支持字幕：使用 CEA-608 标准（CEA-708/ATSC 传统编码的修改版本）将字幕编码到分段的 MPEG2-TS 视频文件中，或者通过以分段 WebVTT 文件，该文件在 HLS 视频的主 m38u 播放列表中指定。WebVTT 标准以与字幕类似的方式支持“软”字幕（可以打开和关闭）（它们都被归类为定时元数据）；如果您更喜欢“硬”字幕（它们被“刻录”到视频中），您将在转码过程中将字幕数据提供给您的视频编码器。

有关更多信息，请参阅以下链接：

[https://developer.apple.com/library/ios/documentation/networkinginternet/conceptual/streamingmediaguide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html](https://developer.apple.com/library/ios/documentation/networkinginternet/conceptual/streamingmediaguide/UsingHTTPLiveStreaming/UsingHTTPLiveStreaming.html)

[http://blog.zencoder.com/2012/07/13/closed-captioning-for-web-mobile-and-tv/](http://blog.zencoder.com/2012/07/13/closed-captioning-for-web-mobile-and-tv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T21:18:14.477

您是否尝试使用 srt 文件作为字幕？因为 iOS 上的 AVPlayer 内置隐藏字幕必须编码为流的一部分（查看 AVPlayer 文档）。搜索可以在视频中插入 srt 的视频编辑软件（注意：这不是作为视频一部分的内置字幕；您可以将它们打开关闭）。

现在，除非您可以这样做，否则唯一的其他解决方案是通过解析 srt 文件并在视频视图顶部显示 UILabel 来实现您自己的字幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-19T20:15:45.143

一个非常快速和简单的方法是将它加载到 webView 中。

```
@IBOutlet weak var webView: WKWebView!

override func viewDidLoad() {
    super.viewDidLoad()

    let html = """
        <video playsinline controls width="100%" autoplay src="https://example.com/xyz.mp4">
            <track default src="https://example.com/abc.vtt">
        </video>
    """
    webView.loadHTMLString(html, baseURL: nil)
} 
```

# gmail - 可以通过带有 IMAP 的 xoauth2 与 Gmail 保持长连接吗？

> ID：13561229
> 
> 赞同：0
> 
> 时间：2012-11-26T08:38:04.753
> 
> 标签：gmail, oauth-2.0, imap, google-apps

我正在构建一个 Gmail 通知程序，它需要能够实时通知新电子邮件。是否可以使用 Gmail API 执行此操作？仅供参考，身份验证是使用 Gmail 的[xoauth2 协议](https://developers.google.com/google-apps/gmail/xoauth2_protocol)实现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:41:37.147

Gmail 的 IMAP 服务器支持 IDLE 命令，这是实现电子邮件通知的最佳方式，因为它导致非常低的流量和新电子邮件的即时推送通知。IDLE 记录在：

[https://www.rfc-editor.org/rfc/rfc2177](https://www.rfc-editor.org/rfc/rfc2177)

请注意您需要结束 IDLE 会话并每 29 分钟重新启动一次（可能 Google 也将其设置得较低，您应该进行试验）以防止 Gmail IMAP 服务器终止连接。

在进行 OAUTH 2.0 身份验证时，所有这些都应该可以正常工作。

# javascript - 使用 jQuery 获取元素时值未定义

> ID：13561231
> 
> 赞同：0
> 
> 时间：2012-11-26T08:38:40.107
> 
> 标签：javascript, jquery

下面是我使用 jQuery 获取输入元素的代码：

```
var txt = $(tableRow).find('input:text');
if (txt.value == null) {
  //TO DO code
} 
```

这就是我使用纯 JavaScript 的方法

```
var txt = document.getElementById('txtAge');
if (txt.value == null) {
  //TO DO code
} 
```

使用第一种方式，txt 的值是未定义的。但是对于第二种方式，值是输入元素内部的内容。现在更有趣的是，在 Mozilla Firebug 的右下角窗格中，如果我向下滚动到 txt 的“值”，我可以在那里看到它，两种方式。

我知道我可以简单地说`$(txt).val()`，但我也想了解为什么如果 jQuery 选择了一个元素，我无法访问它的值。jQuery 不只是一个 JavaScript 函数库吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T08:40:26.000

`.value`不是 jquery api 的一部分。您应该[`.val()`](http://api.jquery.com/val/)改用：

```
var txt = $(tableRow).find('input:text');
if (txt.val() == "") {
  //TO DO code
} 
```

dom 对象和 jquery dom 对象并不完全相同。实际上，您可以打开开发者工具（在 webkit 中）或 Firebug (Firefox) 来检查它们在里面是什么。Jquery 拥有更多信息（实际上，它包含它所代表的 dom 的一个实例）。所以，如果你想使用`.value`，你需要从 jquery 对象中调用“通用” dom 对象，然后使用`.value`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:43:11.693

jQuery 使用各种本地和非本地技术选择 DOM 元素，并将它们全部放在它自己的类似数组的实例中，该实例也将它们包装在自己的 API 中。jQuery 不会“扩展”原生 DOM 属性或方法，因此您需要以 DOM 节点为目标来执行此操作。

可以这样想：

```
var node = document.getElementById('txtAge'); // the DOM node
var txt = $('#txtAge'); // the same node wrapped in a jQuery object/API 
```

由于 jQuery 对象拥有一个类似数组的 DOM 节点集合，因此您可以通过以下方式访问第一个元素：

```
txt[0] // same as node 
```

但一般建议你使用[`.get()`](http://api.jquery.com/get/)方法：

```
txt.get(0) 
```

另一种更 jQuery 的方式来做你想做的事是使用 jQuery 集合迭代`.each()`：

```
$(tableRow).find('input:text').each(function() {
    // "this" in the each callback is the DOM node
    if ( this.value == null ) {
        // Do something
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:44:04.837

```
var x = $(tableRow).find('input:text'); 
```

这是一个 jquery 对象。

```
`x.value` 
```

jquery object 中没有属性值。所以它返回未定义。

`x.val()`是一种可用于获取元素值的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T08:49:15.100

`.find()`将返回一个类似 arry 的对象。如果您确定只有一个元素与您的查询匹配，您可以这样做

```
var txt = $(tableRow).find('input:text')[0].value; 
```

这不是很像 jQuery，可以这么说，更像是 jQuery 和 DOM 方法的不匹配，但它会得到你想要的。此外，由于您显示，作为 DOM 示例，`var txt = document.getElementById('txtAge');`这可以在 jQuery 中重写为

`var txt = $('#txtAge')[0];`

# mysql - 使用 Distinct 返回重复值。如何避免这种情况？

> ID：13561234
> 
> 赞同：1
> 
> 时间：2012-11-26T08:38:59.410
> 
> 标签：mysql, sql

询问：

```
 select distinct (Customer) ,CustomerID from history where Customer != '' and        Customer LIKE 'Ram%'; 
```

结果：

```
 Ramer ram100
      Raman ra45
      Raman ra45 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:40:20.943

尝试使用`MAX`and `group by`。

```
 select Customer, MAX(CustomerID) CustomerID
 from   history
 where  Customer != '' AND Customer LIKE 'Ram%'
 GROUP BY Customer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:48:34.627

如果您还想查看所有客户 ID，请使用[`group_concat`](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

```
select customer, group_concat(distinct customerid)
from history
where Customer != '' and Customer like 'Ram%'
group by customer 
```

# php - 使用 PHP 邮件程序发送 2 封电子邮件失败

> ID：13561235
> 
> 赞同：5
> 
> 时间：2012-11-26T08:39:02.180
> 
> 标签：php, email, phpmailer

我对这个比较困惑。

```
//SMTP servers details
$mail->IsSMTP(); 
$mail->Host = "mail.hostserver.com";  
$mail->SMTPAuth = false;     
$mail->Username = $myEmail;  // SMTP usr
$mail->Password = "****";    // SMTP pass
$mail->SMTPKeepAlive = true;   
$mail->From = $patrickEmail; 
$mail->FromName = "***";    
$mail->AddAddress($email, $firstName . " " . $lastName); 
$mail->WordWrap = 50;                                 
$mail->IsHTML(true);                                  
$mail->Subject = $client_subject;
$mail->Body    = $client_msg;

if($mail->Send())
{

$mail->ClearAllRecipients(); 
$mail->ClearReplyTos();
$mail->ClearCustomHeaders();
...
$mail->From = "DO_NOT_REPLY@..."; 
$mail->FromName = "****";    
$mail->AddAddress($ToEmail1, "***"); //To: (recipients).
$mail->AddAddress($ToEmail2, "***"); //To: (recipients).
$mail->WordWrap = 50;            
$mail->IsHTML(true);             
$mail->Subject = $notification_subject;
$mail->Body    = $notification_msg;
if($mail->Send())
{
... 
```

第一封电子邮件发送良好。第二个没有。这种行为的原因可能是什么？我错过了某种重置吗？

* * *

更新：使用不同的邮件服务器似乎可以工作，所以显然这是导致问题的特定邮件服务器的设置。知道那可能是什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T21:10:50.393

一些提供商对在特定时间跨度内可以发送的消息数量施加限制。要确定您的问题是否取决于提供商“速率限制”，您应该尝试在第一次发送后添加暂停。例如：

```
if ($mail->Send()) {
    sleep(10);  // Seconds
    ...
    if ($mail->Send()) {
        ...
    }
} 
```

然后，通过逐渐降低睡眠时间，您应该能够确定哪个是速率限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:24:12.893

试试这个：正如@Felipe Alameda A 提到的`Remove $mail->SMTPKeepAlive = true;`

```
// for every mail
if(!$mail->Send())
{
    echo 'There was a problem sending this mail!';
}
else
{
    echo 'Mail sent!';        
}
$mail->SmtpClose(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T09:34:46.933

恕我直言，您需要为每封发送的电子邮件创建新的 PHPMailer 对象。如果您想共享一些通用设置，请使用以下内容：

```
$mail = new PHPMailer();
/* Configure common settings */

while ($row = mysql_fetch_array ($result)) {
    $mail2 = clone $mail;
    $mail2->MsgHTML("Dear ".$row["fname"].",<br>".$cbody);
    $mail2->AddAddress($row["email"], $row["fname"]);
    $mail2->send();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-03T21:36:51.977

我认为你的问题是`$mail->SMTPAuth = false;`

很难相信有不需要身份验证的 ISP 或 SMTP 提供商，即使它们是免费的。

您可以尝试这个来检查错误，而不是检查是否为`send()`真：

```
 if ( $mail->IsError() ) { // 
    echo ERROR;
  }
  else {
    echo NO ERRORS;
  }

 //Try adding this too, for debugging:
  $mail->SMTPDebug  = 2;  // enables SMTP debug information 
```

您代码中的其他所有内容看起来都很好。我们经常使用 PHPMailer，从来没有遇到过任何问题

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-04T09:47:23.623

我个人会尝试采取一些小步骤，例如发送相同的电子邮件..所以只需清除收件人并尝试发送相同的电子邮件（此代码适用于我）。如果此代码通过，您可以继续添加以前的行并在失败的地方进行调试

也许`$mail->ClearCustomHeaders();`做问题

```
//SMTP servers details
$mail->IsSMTP(); 
$mail->Host = "mail.hostserver.com";  
$mail->SMTPAuth = false;     
$mail->Username = $myEmail;  // SMTP usr
$mail->Password = "****";    // SMTP pass
$mail->SMTPKeepAlive = true;   
$mail->From = $patrickEmail; 
$mail->FromName = "***";    
$mail->AddAddress($email, $firstName . " " . $lastName); 
$mail->WordWrap = 50;                                 
$mail->IsHTML(true);                                  
$mail->Subject = $client_subject;
$mail->Body    = $client_msg;
// all above is copied
if($mail->Send()) {
  sleep(5);
  $mail->ClearAllRecipients(); 
  $mail->AddAddress('another@email.com'); //some another email

}
... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-05T06:11:55.270

试试下面的例子。,

```
<?php

//error_reporting(E_ALL);
error_reporting(E_STRICT);

date_default_timezone_set('America/Toronto');

require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail             = new PHPMailer();

$body             = file_get_contents('contents.html');
$body             = eregi_replace("[\]",'',$body);

$mail->IsSMTP(); // telling the class to use SMTP
$mail->Host       = "mail.yourdomain.com"; // SMTP server
$mail->SMTPDebug  = 2;                     // enables SMTP debug information (for testing)
                                           // 1 = errors and messages
                                           // 2 = messages only
$mail->SMTPAuth   = true;                  // enable SMTP authentication
$mail->Host       = "mail.yourdomain.com"; // sets the SMTP server
$mail->Port       = 26;                    // set the SMTP port for the GMAIL server
$mail->Username   = "yourname@yourdomain"; // SMTP account username
$mail->Password   = "yourpassword";        // SMTP account password

$mail->SetFrom('name@yourdomain.com', 'First Last');

$mail->AddReplyTo("name@yourdomain.com","First Last");

$mail->Subject    = "PHPMailer Test Subject via smtp, basic with authentication";

$mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test

$mail->MsgHTML($body);

$address1 = "whoto@otherdomain.com";
$address2 = "whoto@otherdomain.com";

$mail->AddAddress($address1, "John Doe");
$mail->AddAddress($address2, "John Peter");

$mail->AddAttachment("images/phpmailer.gif");      // attachment if any
$mail->AddAttachment("images/phpmailer_mini.gif"); // attachment if any

if(!$mail->Send()) {
  echo "Mailer Error: " . $mail->ErrorInfo;
} else {
  echo "Message sent!";
}
?> 
```

**注意：**更好的是，您可以将多用户电子邮件和名称设置为 ARRAY，例如

```
<?php

    $recipients = array(
       'person1@domain.com' => 'Person One',
       'person2@domain.com' => 'Person Two',
       // ..
    );

    foreach($recipients as $email => $name)
    {
       $mail->AddCC($email, $name);
    }

    (or)

    foreach($recipients as $email => $name)
    {
       $mail->AddAddress($email, $name);
    }
?> 
```

我认为这可以帮助您解决问题。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-04T17:29:33.320

我认为你在这里遇到了组织问题。

我建议：

1.  设置您的设置（SMTP、用户、通行证）
2.  使用来自包含消息的数组和地址的信息创建新的电子邮件对象
3.  发送电子邮件
4.  转到第 2 步

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-29T14:38:25.193

关键*可能*在于您省略的部分。两封邮件的发件人域名是否相同？否则 SMTP 主机可能会将其视为中继尝试。如果您有权访问 SMTP 服务器日志，请检查这些；他们可能会提供线索。

此外，检查`$mail->ErrorInfo`说什么......它可能会告诉你问题是什么。

# sharepoint-2010 - Sharepoint 2010 添加选择字段

> ID：13561237
> 
> 赞同：0
> 
> 时间：2012-11-26T08:39:07.293
> 
> 标签：sharepoint-2010, choice, choicefield

我必须在共享点列表中添加一个选择字段（下拉列表）。我在 Visual Studio 中使用 SharePoint API。

这是我的代码。我试图运行它并且没有错误，但它不起作用。

```
private void addChoiceField(SPFeatureReceiverProperties properties, String _listName, String _fieldName)
        {
            using (SPWeb _web = properties.Feature.Parent as SPWeb)
            {
                    SPList _list = _web.Lists.TryGetList(_listName);
                    writeLog(properties, "list name:" + _listName);
                    SPFieldChoice _fieldDD = (SPFieldChoice)_list.Fields[_fieldName];
                    writeLog(properties, "fieldname:" + _fieldName);
                    if (_fieldName == "State")
                    {
                        _fieldDD.Choices.Clear();
                        _fieldDD.Choices.Add("Gesloten-Verloren");
                        _fieldDD.Choices.Add("Analyse nodig");
                        _fieldDD.Choices.Add("Onderhandeling of revise");
                        _fieldDD.Choices.Add("Presentatie of demo");
                        _fieldDD.Choices.Add("Voorstel voor prijsofferte");
                        _fieldDD.Choices.Add("Prospect");
                        _fieldDD.Choices.Add("Waardevol");
                        _fieldDD.Choices.Add("Gesloten-Gewonnen");
                        _fieldDD.Update();
                    }
}
} 
```

有谁知道出了什么问题或如何使用 API 以不同的方式添加选择字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:10:06.403

你需要打电话

> _list.Fields.CreateNewField

实际将其添加到列表中，而不是尝试从列表中提取现有字段。

这是方法描述的链接：http: [//msdn.microsoft.com/en-us/library/microsoft.harepoint.spfieldcollection.createnewfield.aspx](http://msdn.microsoft.com/en-us/library/microsoft.harepoint.spfieldcollection.createnewfield.aspx)

# iphone - 应用程序在 17.2 条款中被拒绝。询问电子邮件 ID

> ID：13561238
> 
> 赞同：24
> 
> 时间：2012-11-26T08:39:09.013
> 
> 标签：iphone, ios, in-app-purchase, privacy

我的应用程序是一个同步解决方案（想象一下保管箱）。用户需要登录才能访问应用程序的功能，如果他还没有创建任何帐户，他可以注册。

注册要求验证电子邮件 ID，如果用户忘记了密码以向他发送密码，也会使用此电子邮件 ID。

但苹果拒绝了这个应用程序说：

> 17.2：要求用户分享个人信息（例如电子邮件地址和出生日期）才能正常运行的应用程序将被拒绝
> 
> 我们发现您的应用要求客户注册个人信息才能访问非基于帐户的功能，这不符合 App Store 审核指南。
> 
> 应用程序在允许访问与用户无关的应用程序功能和内容之前不能要求用户注册。需要共享个人信息的用户注册必须是可选的或与帐户特定的功能相关联。此外，请求的信息必须与功能相关。
> 
> 尽管 App Store Review Guidelines 的第 11.6 条要求应用程序向单个用户拥有的所有 iOS 设备提供订阅内容，但强制用户注册以满足此要求是不合适的；此类用户注册必须是可选的。
> 
> 向用户明确说明，注册将使他们能够从任何 iOS 设备访问内容，并为他们提供随时注册的方式，如果他们希望以后扩展对其他 iOS 设备的访问权限

请帮我解决这个问题。Dropbox/facebook 等许多应用程序都需要登录。我不明白他们拒绝我的应用程序的确切原因。

另外，请指导关于应用内购买，为什么不能强制注册

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-28T06:33:55.040

要求 App Store Review 人员澄清他们的拒绝。他们接受了。并且该应用程序获得了批准：D 现在在 Appstore 上 :)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T08:54:33.510

我也遇到过这种问题，我的应用程序也因此被拒绝。我再次更改了我的应用程序流程，就像用户注册是可选的一样。用户可以通过跳过此步骤查看应用程序的所有功能而无需注册。如果他想做一些用户特定的事情，那么您可以要求注册，例如：（用户喜欢、评论、照片上传等）或者他可以使用公开的内容和功能。

在应用内购买的情况下，您可以提示用户，如果他将在您的应用中注册，他可以在他的所有设备中使用此内容。

向用户明确说明，注册将使他们能够从任何 iOS 设备访问内容，并为他们提供随时注册的方式，如果他们希望以后扩展对其他 iOS 设备的访问权限

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T08:48:21.860

Apple 不允许需要您共享个人信息（例如电子邮件地址）的应用程序才能运行。

您的选择是，删除对电子邮件地址的需要或删除您应用的帐户创建表单并将其移动到网站。

它还指出您的应用程序要求创建一个帐户以访问完整的应用程序，甚至需要该帐户或访问不需要用户拥有帐户的功能。您可以在不创建帐户的情况下使这些功能可用，您可能能够通过审核。

像 Facebook 和 Dropbox 这样的应用程序之所以能通过审查程序，是因为它们没有仅在应用程序中的注册选项。他们重定向到一个网站。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-10-02T19:12:40.577

我最近通过电话与 Apple 代表就我的一个应用程序进行了交谈，该应用程序也被指控违反了第 17.2 条。

我向他解释说，这封电子邮件将用于找回密码、监控市场内的交易以及管理任何不当行为（例如用户上传攻击性或受版权保护的内容）。该代表回答说：“先生，该条款规定'要求用户共享个人信息（例如电子邮件地址和出生日期）才能运行的应用程序将被拒绝'。我不能允许您要求您的用户提交他们的电子邮件如果它不是基于帐户的”。他似乎不明白这些电子邮件仅出于安全目的而基于帐户。

我确实向他提到过 Instagram 和 Facebook 都需要在启动时登录。他简单地回答说：“是的，但这些应用程序完全基于帐户。”

老实说，我觉得他在盲目地遵循 Apple 的准则（“因为它说我们必须严格遵守！”）。他对社交网络应用程序的运作方式知之甚少，对法律（特别是 DMCA - 在一个单独的问题上）的了解更少。向他们解释所有的工作如何被证明是徒劳的；他们不会让步，因为他们被要求像他们一样严格遵守 Apple 的广泛条款。

我的结论是：我不得不妥协应用程序的用户流，以便可以跳过应用程序的注册页面，并且其市场中的所有其他功能都被锁定给非注册用户。这没有道理。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T08:49:05.693

> 注册要求验证电子邮件 ID，如果用户忘记了密码，也可以使用此电子邮件 ID 向他发送密码。
> 
> 应用程序在允许访问与用户无关的应用程序功能和内容之前不能要求用户注册。

在我看来，重点是您要求用户提供他的电子邮件地址，作为创建用户帐户的一个步骤。这与 Dropbox 和其他应用程序所做的不同（即，您为您的 Dropbox 帐户提供凭据，这与您的电子邮件地址不同，尽管可以相同）。

您可以完全删除电子邮件验证，也可以将其推迟到稍后向用户明确说明这是访问私人信息所必需的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-01-20T02:35:44.353

对我来说也是这样，虽然第一个版本被批准了，第二个版本因为这个原因被拒绝了，我在登陆视图添加了跳过按钮。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-24T11:57:00.000

上周我也遇到了同样的事情，这是 Apple 的回复：

> 至于 17.2 问题，昵称、头像或分享不是这些社交网络的固有或特定功能，因此，不应要求用户注册这些服务，或向您提供访问其社交网络帐户的权限。如果用户不提供此信息，则不应阻止用户使用您的应用和服务。
> 
> 相反，最好使用您自己的身份验证方法，并为用户提供创建昵称和上传头像的选项，独立于这些网络。
> 
> 此外，我们意识到这些社交网络可能非常受欢迎。但是，社交网络的流行并不是强迫尚未或选择不注册并向这些服务提供其个人信息的用户在使用您的应用程序之前的适当理由。
> 
> 因此，我们要求您包含自己的身份验证机制，以允许用户选择仅向您注册，创建一个仅包含所需信息且与您的应用功能相关的帐户的帐户。
> 
> 此致，
> 
> 应用商店评论

所以简而言之，您必须提供自定义身份验证，而不仅仅是使用 Facebook。尽管我见过许多要求您使用 Facebook 登录的应用程序。

谢谢，詹姆斯

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-11-26T08:45:22.863

这一切都在最后一段中进行了总结。显然，您的应用程序没有（以明确的方式）通知用户注册是为了同步，从他们的回复来看，如果没有注册，您的应用程序似乎毫无用处。

如果是这种情况，您应该更具体地说明为什么需要用户注册。

附带说明一下，我个人不喜欢在您看到或尝试任何东西之前强制您注册的应用程序/网站。我希望你的申请不一样。

# plone - 如何为 Plone 中的所有成员设置标准的“允许”和“次要”可添加内容类型？(folder_constraintypes_form)

> ID：13561239
> 
> 赞同：1
> 
> 时间：2012-11-26T08:39:12.603
> 
> 标签：plone

在 Plone 4.2 中，如何限制所有成员的可添加内容类型？

我所有的成员（目前有 400 个并且还在增长）应该有一组默认的内容类型，可以在“主”文件夹 (/Members/mymember) 中添加。也就是说，如果我的会员转到他的主文件夹，则应该只有少数内容类型，如“文档”、“图像”和“文件”作为默认添加类型。所有其他内容类型，如事件、收藏等，应仅位于“添加”菜单的“更多”菜单项下。

我以为我可以为每个 myplone.org/Members/mymember/folder_constraintypes_form （“添加”菜单的“限制”项）设置“使用父文件夹设置”。然后从父 myplone.org/Members/folder_constraintypes_form 我将设置我喜欢的默认内容类型。也就是说所有成员的主文件夹都可以继承成员中的设置。但是，作为 plone 站点管理员，我无法为 /Members/ 文件夹设置标准的“允许”和“次要”（“更多...”菜单）。我确实允许有可能选择

*   允许添加标准类型
*   手动指定类型

也就是说，/Members/ 没有“手动指定类型”。所以我不能为父成员文件夹设置任何默认值，所有成员的主文件夹都可以从该文件夹继承......

当然，我可以使用脚本遍历所有成员，并为每个主文件夹设置 folder_constraintypes。这将为所有老成员设定条件。但是，对于每个新成员，都必须再次这样做。

我发现让用户在 Home 文件夹中添加 8 种或更多内容类型非常令人费解，而他们实际上只需要使用 2 或 3 种。我怎样才能改变这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:23:10.637

您可以为您的成员文件夹创建内容类型。并在 manage_afteradd 方法中设置您想要的所有内容。

您我们将能够将 Plone 配置为使用您的内容类型作为成员文件夹，这将为新用户解决您的问题。

正如您所说，对于所有先前创建的成员文件夹，您编写了一个迭代所有成员文件夹的脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T08:42:18.087

成员文件夹将 member_search_form-template 设置为默认视图。此模板不显示指向 folder_constraintypes-template 的链接，但您可以通过在成员文件夹的 url 末尾附加其名称来访问该模板。

'http://localhost:8080/yourSiteName/Members/folder_constraintypes'

注意：不要排除文件夹，否则无法自动创建用户文件夹:)

# java - 递归遍历二叉搜索树并按列打印数据

> ID：13561244
> 
> 赞同：4
> 
> 时间：2012-11-26T08:39:37.950
> 
> 标签：java, recursion, binary-search-tree

我使用 main 函数读入的文本文件构建了一个二叉搜索树。生成的树包含文本文件的单词，并带有一个计数，因此同一个单词不会被插入两次。问题不在于构建树，而是让信息正确显示。数据要求以4列打印，以保持可读性。

例子：

```
|BTNode1|BTNode2|BTNode3|BTNode4|  
|BTNode5|BTNode6|BTNode7|BTNode8| 
```

该类`BTNode`有一个`toString()`方法可以打印出各个节点的数据。但是，每当我用根节点调用下面的代码并且计数为 0 时，我都会正确地获取节点信息，但是每列的节点数量很奇怪。任何想法如何让它发挥作用？如有必要，我可以发布其他代码。

编辑：添加了整个类以反映更改，并添加了示例当前输出。可能是构建树的问题。

EDIT2：更改`printcount = 1`，修复了显示问题。代码现在可以正常工作。

```
package speech;

public class BSTree {
private BTNode root;
private final String DISPLAY_FORMAT_CAPS =
    "*****************************************************************";
private StringBuilder buffer = new StringBuilder();
private int printcount = 1;
public BSTree (){
    root = null;
}

public BTNode insert(String indata, boolean lowercase){
    if(lowercase){
        if(root != null){
            return insertRecursive(root,indata.toLowerCase());
        }
        else{
            root = new BTNode(indata.toLowerCase());
            return root;
        }
    }
    else{
        if(root != null){
            return insertRecursive(root,indata);
        }
        else{
            root = new BTNode(indata);
            return root;
        }

    }

}

private BTNode insertRecursive(BTNode node, String value) {
    if (value.compareTo(node.data) < 0){
        if (node.left != null) {
            return insertRecursive(node.left, value);
        } else {
            //System.out.println("  Inserted " + value + " to left of Node " + node.data);
            node.left = new BTNode(value);
            return node.left;
        }
    } else if (value.compareTo(node.data) > 0) {
        if (node.right != null) {
            return insertRecursive(node.right, value);
        } else {
            //System.out.println("  Inserted " + value + " to right of Node " + node.data);
            node.right = new BTNode(value);
            return node.left;
        }
    } else if (value.compareTo(node.data) == 0){
        node.incrementCount();
        //System.out.println("Incremented count of " + value + " to: " + node.wordcount);
        return node;
    }
    return null;
}

private int wordcountRecursive(BTNode node){
    if(node == null){
        return 0;
    }
    else{
        return wordcountRecursive(node.left) + node.wordcount + wordcountRecursive(node.right);
    }
}

public int wordcount(){
    return wordcountRecursive(root);
}

public void display(){
    System.out.println(DISPLAY_FORMAT_CAPS);
    displayRecursive(root);
    System.out.println(buffer.toString());
    System.out.println(DISPLAY_FORMAT_CAPS);
    System.out.println("Word Count:" + wordcount());

}

private void displayRecursive (BTNode node){
    //System.out.println(count);
    if(node != null){
        displayRecursive(node.left);
        addNodeDisplay(node);       
        displayRecursive(node.right);

    }

}

private void addNodeDisplay(BTNode node){
    if(printcount % 4 != 0){
        buffer.append("|").append(node);
    }
    else{
        buffer.append("|").append(node).append("|\n");
    }
    printcount++;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:30:21.133

我添加了一些示例数据，这看起来很有效：

```
private void displayRecursive(Node node) {
  displayRecursive(node, 0);
  System.out.println("");
}

private int displayRecursive(Node node, int count) {

  if (node != null) {
    // Do left first.
    count = displayRecursive(node.getLeft(), count);
    // New line?
    if (count > 0 && count % 4 == 0) {
      // End of line.
      System.out.println("|");
    }
    // Then me.
    System.out.print("|" + node);
    count += 1;
    // Then right.
    count = displayRecursive(node.getRight(), count);
  }
  return count;
}

private void test() {
  Node root = new Node("Root");
  Node left = new Node("Left");
  Node right = new Node("Right");
  root.setLeft(left);
  root.setRight(right);
  Node leftLeft = new Node("Left.Left");
  leftLeft.setLeft(new Node("LeftLeftLeft"));
  leftLeft.setRight(new Node("LeftLeftRight"));
  left.setLeft(leftLeft);
  left.setRight(new Node("Left.Right"));
  right.setLeft(new Node("Right.Left"));
  right.setRight(new Node("Right.Right"));
  displayRecursive(root);
}

public static void main(String[] args) throws InterruptedException {
  try {
    Test test = new Test();
    test.test();
  } catch (Exception e) {
    e.printStackTrace();
  }
}

static class Node {
  final String data;
  private Node left = null;
  private Node right = null;

  Node(String data) {
    this.data = data;
  }

  @Override
  public String toString() {
    return data;
  }

  /**
   * @return the left
   */
  public Node getLeft() {
    return left;
  }

  /**
   * @param left the left to set
   */
  public void setLeft(Node left) {
    this.left = left;
  }

  /**
   * @return the right
   */
  public Node getRight() {
    return right;
  }

  /**
   * @param right the right to set
   */
  public void setRight(Node right) {
    this.right = right;
  }
} 
```

它打印：

```
|LeftLeftLeft|Left.Left|LeftLeftRight|Left|
|Left.Right|Root|Right.Left|Right|
|Right.Right 
```

# calendar - 如何在 Kendo UI 中使用 Jalali 日历或 Jalali 日期选择器？

> ID：13561245
> 
> 赞同：7
> 
> 时间：2012-11-26T08:39:45.417
> 
> 标签：calendar, datepicker, kendo-ui, persian

我需要带有剑道 UI 的 Jalali 日历（波斯日历）或 Jalali 日期选择器，但我不知道如何才能拥有它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:15:18.473

Kendo UI 当前仅支持公历。不支持波斯历。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-15T06:08:50.413

Kendo UI 不支持波斯日历，但有一个构建在 KendoUI 库之上的波斯日期选择器。[在这里](http://www.alirezazahedi.com/?p=337)你可以使用它。

[![在此处输入图像描述](../Images/4b1425005792044045168fb38eeae339.png)](https://i.stack.imgur.com/KmODa.png)

# iphone - WCF Rest service-Post 方法的参数编码

> ID：13561248
> 
> 赞同：1
> 
> 时间：2012-11-26T08:40:03.547
> 
> 标签：iphone, wcf, rest

我在 iPhone 应用程序的 WCF 休息服务部分工作。我的方法之一如下。

```
[OperationContract]
        [WebInvoke(Method="POST",
                   ResponseFormat = WebMessageFormat.Json,
                   BodyStyle = WebMessageBodyStyle.Wrapped,
                   UriTemplate = "Update/{tokenId}/{title}")]
int Update (string tokenId, string title); 
```

我的问题是当我们在“title”参数中传递特殊字符时，这个方法没有被调用。我认为这与编码有关。我们如何为此实现编码？如果可能，请提供 iPhone 和 WCF 部分的编码和解码代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:20:44.243

您需要对 URI 中的参数使用 URL 编码/解码。

对于 .NET 部分，要么使用一些自定义反序列化器机制（Web API 中有这样的，不记得它们是否在 WCF 4 REST 中）或：

方法 UrlEncode 和 UrlDecode 来自[`System.Web.HttpUtlity class`](http://msdn.microsoft.com/en-us/library/1e55w41w.aspx)

对于 iphone 部分，请查看此处的问题，例如 [如何对字符串进行 URL 编码](https://stackoverflow.com/questions/8088473/url-encode-a-nsstring)

# mysql - SQL - 重复相同的查询块

> ID：13561253
> 
> 赞同：0
> 
> 时间：2012-11-26T08:40:20.647
> 
> 标签：mysql, sql, query-optimization

```
select * from ( select * from y where x="t") where z rlike "(.*)query1"
union
select * from ( select * from y where x="t") where z rlike "(.*)query2" 
```

正如您在上面看到的，括号包含通常返回多行结果的相同查询。有没有办法通过只查询一次括号内的select语句并一遍又一遍地使用结果来优化它？

PS：我想以有序的方式获取结果，所以第一个联合查询的结果必须保持在顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:42:27.433

这里有三件事：

*   `UNION`首先，如果可以使用，请避免使用`UNION ALL`. Plain `union`s 涉及删除重复项，因此需要更多时间。
*   当您可以考虑查询时，请执行此操作。在这里，除了一个标准之外，您有精确查询的联合，然后您可以使用`OR`.
*   `select * from (select * ...`是冗余，可以避免。

这使：

```
SELECT *
  FROM y
 WHERE x = 't'
   AND ( z RLIKE '(.*)query1'
        OR
         z RLIKE '(.*)query2'
       ) 
```

正如 melpomene 在评论中所说（谢谢！）您甚至可以在正则表达式级别考虑：
`WHERE z RLIKE '(.*)query1|(.*)query2'`

如果其中有重复项`y`并且您不想要它们，因为`UNION`丢弃它们，您可以引入`DISTINCT`但如果没有必要则避免。

如果你想要一个订单，永远不要依赖 DBMS。使用`ORDER BY`：

```
ORDER BY CASE WHEN z RLIKE '(.*)query1' THEN 1
              WHEN z RLIKE '(.*)query2' THEN 2
              ELSE 3 -- given the WHERE clause, should never happen
         END 
```

# symfony - Symfony 推进 addAnd

> ID：13561256
> 
> 赞同：0
> 
> 时间：2012-11-26T08:40:49.100
> 
> 标签：symfony, propel

我不知道推进。我需要转换这个推进代码。在此代码中，字符串`$array[$i]`将与仅存储在 this`$array[0]`中的或最后一个字符串协调。`$array[$i]``$array[0]`

```
$array[0]->addAnd($array[$i]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T20:07:44.797

该`addAnd(...)`方法将另一个条件（Propel`Criterion`对象）添加到`WHERE`生成的 SQL 查询中的子句 - 在您的情况下，该查询由`$array[0]`. 由于我们不知道是什么`$array[$i]`（尽管它很可能是 Propel `Criterion`）我们不能真正说出结果会是什么，但它会附加`AND {string representation of $array[$i]}`到现有的 SQL 中。您可以查看[Propel API 文档](http://api.propelorm.org/1.3.0/runtime/propel-util/Criterion.html#methodaddAnd)以获取有关该`addAnd(...)`方法的信息。

# java - Tomcat集群新手

> ID：13561273
> 
> 赞同：0
> 
> 时间：2012-11-26T08:41:42.423
> 
> 标签：java, tomcat, web-applications, cluster-computing, high-availability

我正在研究 tomcat 的高可用性。
我读到你可以在 Tomcat 中进行集群，作为负载均衡器，你可以使用 Apache http。
我无法理解以下内容：
应该是负载平衡模块的 Apache http 是否应该安装在与 Tomcat 服务器不同的机器上？
例如，如果我有 3 个 tomcat 服务器作为一个集群，应该在所有 3 个服务器中都安装 http 吗？还是在其他服务器？
另外，如果我使用 Linux 工具来实现高可用性，有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:52:05.557

一般来说，没有这样的限制，即 Apache 应该在单独的机器上实现。在实践中，您可能想要这样做。

Apache 可以用作负载均衡器，这样所有的请求都会到达 apache，它会根据策略将查询分派给某个 tomcat（决定何时分派给哪个 tomcat 的算法，例如轮询）。

应该安装一个 apache，它可以与 3 个 tomcat（任意数量的 tomcat）通信。

顺便说一句，它不需要像 Apache 这样的基于软件的负载均衡器，而是您可以使用硬件负载均衡器。

* * *

Apache = httpd 它是一个可以接受 http 请求并（除其他外）将它们发送到 tomcat 的 Web 服务器。

Tomcat 也是一个用 Java 编写的 Web 服务器，旨在运行 Java Web 应用程序。

所以整体架构应该如下：

```
client --> Apache (host a) ________  tomcat1 (host b)
                          |________  tomcat2 (host c)
                          |________  tomcat3 (host d) 
```

至于硬件负载均衡器 - 这些是各种制造商的盒子，如 Sisco、F5 等。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:57:00.250

要拥有 HA，用户需要始终从他们发出请求的 DNS 名称/IP 地址中获得响应。

有多种方法可以实现这一点，有些甚至不是相互排斥的。

可以说，框中的第一个工具是 DNS 循环。

这是您的 DNS 条目没有单个 IP 地址的地方，而是一个 IP 地址列表。您的 DNS 记录的每个查询都会以不同的顺序返回列表。支持 DNS 循环的客户端浏览器将尝试第一个条目并按顺序回退到其他条目。不支持 DNS 循环的客户端浏览器只会尝试第一个条目。这充当了一种负载平衡器……对于具有 DNS 循环意识的客户端应用程序，您可以获得一种自动故障转移的形式。

框中的下一个工具是负载均衡器，例如 Apache HTTPD 或 Nginix。这些充当客户端看到的前端。它们是状态感知的（希望您将它们配置为），因此它们知道您的哪些 Tomcat 服务器已启动，哪些已关闭，并将客户端请求路由到具有容量且已启动的服务器。

所以如果你想要HA。您首先对 Tomcat 服务器进行集群...这很可能需要集群的会话存储...所以您使用数据库来保存会话存储...然后您将该数据库集群以防故障转移...然后您的但在 Tomcat 实例前面的负载均衡器...然后您添加第二个负载均衡器以防负载均衡器发生故障...然后您使用 DNS 循环在负载均衡器之间进行平衡...

您可以使用 ARP 广播 IP 地址接管来快速替换负载平衡器来代替 DNS 循环，或者除了 DNS 循环...

然后你开始考虑地理冗余......所以你去药房买了一瓶阿司匹林！

在我忘记之前，没有什么说你不能在同一个硬件上做到这一切......只是你冒着进程窃取 CPU/内存/磁盘的风险以及硬件故障的风险。

您可以获得的最基本的弹性 HA 是两台机器，它们都运行数据库集群，都运行 Tomcat 集群，都运行负载均衡器，并且都配置为应用程序 DNS 名称的 DNS 循环条目

# javascript - 在单击一次之前，Shadowbox 不会在悬停时打开

> ID：13561286
> 
> 赞同：0
> 
> 时间：2012-11-26T08:43:04.853
> 
> 标签：javascript, jquery, onmouseover, shadowbox

我正在使用 Shadowbox 在悬停时显示图像，但由于某种原因，它仅在我第一次单击链接后才有效。我正在使用 Chrome 和 FireFox，都不能正常工作。

你可以在这里看到：[http ://www.impero.co.za/demo/hsrc/site_content/view/how-we-curate-data](http://www.impero.co.za/demo/hsrc/site_content/view/how-we-curate-data)

有一个叫做“定性数据”的锚。它不会在悬停时打开 Shadowbox，但是一旦我单击它一次，它就会打开，然后从那里开始，它会在悬停时打开。

据我从 shadowbox 的网站和 Stackoverflow 资源帖子中看到的，我做对了。

知道这里有什么问题吗？

提前致谢，

科布斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:05:39.807

`Shadowbox.open(this);`在您的`onmouseover`属性中使用，例如

```
<a id="shadowbox[gallery]"
   href="http://www.impero.co.za/demo/hsrc/assets/uploads/images/qualitativedata.jpg"
   onmouseover="Shadowbox.open(this);"
   rel="shadowbox[gallery]">Qualitative Data</a> 
```

# c++ - 没有默认标签的 Switch-Case 中的无效值

> ID：13561290
> 
> 赞同：1
> 
> 时间：2012-11-26T08:43:36.803
> 
> 标签：c++, switch-statement

我非常喜欢在 enum-switch-case 中跳过“默认：”标签。因此，当枚举具有未由 switch-case 处理的新值时，我会收到编译器警告。

现在一位同事说，当将一个整数传递给枚举未涵盖的这个 switch-case 时，我会遇到分段错误。

至少我们正在使用的 gcc 可以正确处理它。[Visual Studio 文档](http://msdn.microsoft.com/en-us/library/k0t5wee3.aspx)还说：如果“没有一个常量与 case 标签中的常量匹配并且默认标签不存在 >>> 控制权转移到 switch 语句之后的语句。”

这是标准以及所有（或至少大多数）编译器的行为吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:47:21.417

MS 编译器似乎做得对。这是标准所说的（6.4.2/5）：

> 如果没有与条件匹配的大小写常量，并且如果有`default`标签，则控制传递到由`default`标签标记的语句。如果没有 case 匹配并且如果没有，`default`则不会执行 switch 中的任何语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:47:02.523

仅当跳过的大小写破坏了您的代码时，它才会导致分段错误。否则，任何编译器都不应该发出会产生分段错误的代码。

将产生故障的示例：

```
 switch(flag) {
     case Type1: p = malloc(200); break;
     case Type2: p = malloc(100); break;
 }
 memcpy(p, source, 10); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:48:30.300

[stmt.switch] 状态：

> 如果没有大小写匹配并且没有默认值，则不会执行 switch 中的任何语句。

所以是的，VS 在这方面遵循标准。

# windows-runtime - Blend 不显示本地化字符串

> ID：13561295
> 
> 赞同：1
> 
> 时间：2012-11-26T08:44:07.303
> 
> 标签：windows-runtime, windows-store-apps

我正在用 xaml 和 c# 编写一个 Windows 8 商店应用程序，并且正在使用[msdn 中概述的方法](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh965329.aspx)本地化字符串。

它在应用程序运行时正确显示字符串，但在 Expression Blend 设计时它总是显示一个空字符串。

```
<TextBlock x:Uid="IDST_LOAD_TITLE" x:Name="pageTitle" Text=""
    Grid.Column="1" IsHitTestVisible="false" 
    Style="{StaticResource PageHeaderTextStyle}"/> 
```

我什至尝试过完全摆脱 Text="" ......

有什么办法可以让它工作吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T06:02:26.113

我是这样解决的：

创建一个类，例如：

```
public class Strang
{
    public string          IDST_LOAD_TITLE
    { get { return Strings.IDST_LOAD_TITLE; } }

    public string          IDST_SAVE_TITLE
    { get { return Strings.IDST_SAVE_TITLE; } }
    ... 
```

将其添加到您的 app.xaml：

```
<Application
    x:Class="MyApp.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:myApp="using:MyApp"
    >

    <Application.Resources>
        <ResourceDictionary>
          <ResourceDictionary.MergedDictionaries>
              <ResourceDictionary Source="Common/StandardStyles.xaml"/>
          </ResourceDictionary.MergedDictionaries>

          <!-- Look here! -->
          <myApp:Strang x:Key="Strang" />

      </ResourceDictionary>
    </Application.Resources>
</Application> 
```

然后在您页面的 xaml 代码中，执行以下操作：

```
 <TextBlock 
            x:Name="m_titleStatic" 
            Text="{Binding IDST_LOAD_TITLE}" 
            DataContext="{StaticResource Strang}"
            /> 
```

# java - 网络上的 JFreeChart

> ID：13561298
> 
> 赞同：2
> 
> 时间：2012-11-26T08:44:19.617
> 
> 标签：java, swing, jsp, servlets, jfreechart

首先，我是最后一年的学生。我们正在创建一个 KPI，我们看到 JFree 图表可用于显示图表。现在我们有一个关于决定该软件是否基于 Web 的问题（主要投票来自桌面应用程序。只有 1 个是基于 Web 的解决方案。）。

但是，这是我们必须做的；

1.  使用图表显示数据
2.  图表区域的颜色必须在运行期间更改（例如：如果 < 90% 出勤率 'RED'，如果 > 90% 出勤率'GREEN'）
3.  当用户单击图表的特定区域时，将所有相关数据显示为“工具提示文本框”或其他内容。当鼠标悬停时，显示一些摘要。
4.  仪表板中将有 6 个 KPI。
5.  KPI 属于 2 个类别，HR 和 PROJECTS。

现在我的问题是，做这件事的简单方法是什么？基于网络还是桌面？JFreeChart 在 web 中会支持这些功能吗？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:49:13.777

首先是长答案，然后是简短答案。如果您在 Web 上使用 JFreeChart，您有两种选择：

*   在小程序中显示图表，这将允许您执行 JFreeChart 支持的所有基本工作，包括您上面提到的那些。
*   在服务器端使用 JFreeChart 生成将由服务器提供的图像。在这种情况下，#2 将很困难，因为您必须刷新页面，#3 将非常困难甚至几乎不可能

鉴于上述情况，简短的回答是：我建议你构建一个桌面应用程序，它会更容易处理图表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-27T14:36:53.633

根据我的经验，最好使用 Javascript 库生成甘特图，然后与任何框架 Java Web 集成。您可以使用一些库，例如：

*   [Twproject 甘特图](https://gantt.twproject.com/)
*   [jQuery甘特图](https://github.com/oguzhanoya/jquery-gantt)
*   [JSGantt 改进](https://jsganttimproved.github.io/jsgantt-improved/)
*   [jQuery.甘特图](http://taitems.github.io/jQuery.Gantt/)

最后有一个成本选项：[Daylot Gantt](https://javascript.daypilot.org/gantt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T08:48:12.323

如果您想使用 JFreechart 它可以用来渲染图像并将其发布在页面上，您还可以使用某种形式的基于 jquery 的图表绘图。无论哪种方式，您都必须控制刷新数据。在独立应用程序中，它可能会更容易一些。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T08:52:03.657

您可以使用这些 JFreeCharts 来满足您指定的要求。

JFree 图表将图表显示为图像。但是有一些方法会显示工具提示和摘要，您必须根据您的要求实现这些方法。

# list - 两个列表之间的交集 F#

> ID：13561301
> 
> 赞同：6
> 
> 时间：2012-11-26T08:44:27.693
> 
> 标签：list, f#

我正在寻找一个函数，它需要两个列表之间的交集并创建一个新列表，我有这个函数：`let intersect x y = Set.intersect (Set.ofList x) (Set.ofList y)`做我想做的事情，但我不想使用 F# 中的任何内置函数

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:02:21.087

最好使用图书馆的东西，但如果你不能

如果我们假设输入列表已排序（使用`List.sort`或编写您自己的）：

```
let rec intersect a b =
    match a with
    |h::t -> match b with
             |h2::t2 -> 
                 if h=h2 then h::(intersect t t2)
                 else if h>h2 then intersect t b else intersect a t2
             |[] -> []
    |[] -> [] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-07T14:43:04.773

我同意在这种情况下将列表转换为集合并不好。

这是另一个无需转换为集合但使用内置[Enumerable.Intersect](https://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)函数的替代方法：

```
open System.Linq

let intersect (xs:'a seq) (ys: 'a seq) = xs.Intersect(ys) 
```

您可以使用 调用此函数`FSharpList`。

# vb.net - Vb.Net - 遍历数据库中的文件名，然后下载它们

> ID：13561303
> 
> 赞同：1
> 
> 时间：2012-11-26T08:44:49.507
> 
> 标签：vb.net

需要帮助，因为努力编写代码：

下面的函数将遍历数据库以获取文件名，然后下载这些文件（如果存在）。我正在努力在这里“下载文件代码”中编写代码。还需要它返回 ARRAY，它应该是已在此代码中下载的文件的名称。

任何人都可以请帮忙。

```
Public Function DownloadFile(ByVal SourcePath As String, ByVal TargetPath As String) As Boolean

    Dim DownloadFile As Boolean = False
    Dim lvar_FileName As String = Nothing
    Dim lvar_FileType As String = Nothing

    Using Conn As New SqlConnection(ConnString)
        SQLCommand = New SqlCommand("File_List",Conn)
        SQLCommand.CommandText = "Select File_Name from File_List "
        Try
            Conn Conn.Open()
            Dim reader As SqlDataReader
            reader = SQLCommand.ExecuteReader()
            While reader.Read()
                'Code Here
                lvar_FileName = reader(0)

        'Download Files Code here

            End While
        Catch ex As Exception

        End Try
    End Using

    Return DownloadFile 

End Function 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T08:52:16.730

我将返回 a 而不是数组，`List(Of String)`因为它可以调整大小：

```
Public Function DownloadFile(ByVal SourcePath As String, ByVal lvar_TargetPath As String) As List(Of String)
    Dim allFiles As New List(Of String) 
    Using Conn As New SqlConnection(ConnString)
        Using SQLCommand = New SqlCommand("Select File_Name from File_List", Conn)
            Try
                Conn.Open()
                Using reader = SQLCommand.ExecuteReader()
                    While reader.Read()
                        Dim fileName = reader.GetString(0)
                        Dim destPath = Path.Combine(SourcePath, fileName)
                        allFiles.Add(destPath)
                    End While
                End Using
            Catch ex As Exception
                ' Log exception here, otherwise don't catch it
            End Try
        End Using
    End Using
    Return allFiles
End Function 
```

# c - 使用结构的段错误

> ID：13561304
> 
> 赞同：1
> 
> 时间：2012-11-26T08:44:50.123
> 
> 标签：c, concat

我已经写了大约一个星期的 C，所以请耐心等待。我在方法中遇到分段错误错误，`assemble_url`我不知道为什么。这是我的代码：

```
/** Includes */
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <mysql/mysql.h>

/** Definitions */
#define MAX_OPTIONS 32
#define MAX_ARGS 32

/** Command option */
typedef struct {
    char *argname;
    char *value;
} command_option;

/** Command */
typedef struct {
    command_option options[MAX_OPTIONS];
} command_t;

/**
 * Prints the arguments passed in in a hashmap format (key => value)
 */
void populate_command(command_t *cmd,int argc,char *argv[])
{
    int i,j=0;

    /** Check to see if we have arguments. If argc is equal to 1 than there are no arguments besides the filename */
    if(argc>1)
    {

        /* Start at position 1, since argv[0] is the filename being called */
        for(i=1;i<argc;i++)
        {

            /* Head of argv array */
            char *arg = argv[i];

            /* Create a copy of head for traversal. */
            char *c = arg;

            /* traverse the char array, ensuring we arent dealing with NULL values(c!==NULL) and NULL pointers(*c!=='\0') */
            while(*c != '\0' && c != NULL)
            {

                /* Were only concerned with parsing the flags and obtaining the flag value. */
                if(strchr("-",*c))
                {

                    char *key = c; /* Key */
                    char *value = argv[i+1]; /* Value */

                    /* ensure we have a value existent for key */
                    if(strchr("-",*value))
                    {
                        /** user supplied a key with no value */
                        break;
                    }
                    command_option *option = &cmd->options[j];
                    option->argname = key;
                    option->value   = value;

                    j++;

                    /* Debug dump */
                    printf("arg %d: %s -> %s\n",i,option->argname,option->value);

                }/* end strchr */

                /** Increment the traversal array */
                c++;

            }/* end while loop */

        }/* end forloop */

    }/* endif */

}/** end print_args */

/**
 * Concatenates two strings and returns the resulting concatenated string
 */
char* concatstring(char *s1,char *s2)
{
    /* Allocate memory for *result. We add 1 to account for the extra byte to store the null character. Strlen accounts for all
     non-null bytes, so using strlen(s1) + strlen(s2) + 1 ensures that an overflow wont occur. An overflow occurs when
     the number of bytes being used (in our example, is the addition of strlen for s1 and s2) is more than the number of bytes
     allocated (in our example, the number of bytes allocated to *result)*/
    char *result = malloc(strlen(s1)+strlen(s2)+1);

    /*Copies the C string pointed by source(s1) into the array pointed by destination(result), including the terminating null character. */
    strcpy(result,s1);

    /* appends a copy of the source string(s2) to the destination string(result). The terminating null character in
     destination is overwritten by the first character of source, and a null-character is included at
     the end of the new string formed by the concatenation of both in destination.*/
    strcat(result,s2);

    /* return result */
    return result;

} /** end concatstring */

char* assemble_url(command_t *cmd,char *str)
{
    int i,opt_len = sizeof(&cmd->options);
    for(i=0;i<opt_len;i++)
    {
        command_option *option = &cmd->options[i];
        char *key = option->argname;
        char *value = option->value;
        if(i==0)
        {
            str = concatstring(str,key);
            str = concatstring(str,"=");
            str = concatstring(str,value);
        }
        else
        {
            str = concatstring(str,"&");
            str = concatstring(str,key);
            str = concatstring(str,"=");
            str = concatstring(str,value);
        }
    }
    return str;
} 
```

该程序中发生的情况如下：

1./用户键入程序名称和标志选项，例如： `program -test a -test2 b`

2./程序解析命令并用选项填充命令结构。每个选项都有一个标志（argname）和与之关联的值（值）

3./ 然后程序尝试使用这些选项键和值创建一个 URL，例如`http://url/?test=a&test2=b`

该程序可以编译，但我对指针和引用仍然不熟悉（我认为 & 被称为引用），所以也许这就是程序出错的原因。

任何帮助是极大的赞赏！另外，如果您看到任何处理 assemble_url 的问题或更好的方法，也请告诉我（我不认为它的处理方式最好，但就像我说的，我对 C 编程非常陌生）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T14:22:04.647

因为您要连接两个以上的字符串，所以最好一次为所有连接分配内存。

```
#include <stdarg.h>
#include <string>
char* stringBuilder(int count, ...)
{
    va_list ap, vacnt;
    int j;
    int len = 1;
    char* buffer;
    va_start(ap, count); 
#ifdef va_copy
        va_copy(vacnt,ap);
#else
    vacnt = ap;
#endif
    for(j=0; j<count; ++j){
        len+=strlen(va_arg(vacnt, char*)); 
    }
    va_end(vacnt);
    buffer = (char*) malloc(len * sizeof(char));
    buffer[0]=0;
    for (j=0;j<count;++j) {
       strcat (buffer, va_arg(ap, char*));
    }
    va_end(ap);
    return buffer;
 } 
```

您可以这样使用它：

```
char* x = stringBuilder(4,"hello", " ", "world", "\n");
printf(x);
free(x); 
```

另请注意，键和值都必须为您的应用程序的目的进行 URL 编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:51:39.053

这个初始化

```
int opt_len = sizeof(&cmd->options); 
```

会给你一个指针的字节大小`&cmd->options`。在您尝试做的事情的背景下，这没有任何意义。

如果要确定数组中的元素数（假设它没有衰减为指针），正确的技术是

```
int opt_len = sizeof cmd->options / sizeof *cmd->options; 
```

在这种情况下`opt_len`，将使用`MAX_OPTIONS`value 进行初始化（这意味着您可以`MAX_OPTIONS`在其位置使用）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:53:35.367

concatstring 导致大量内存泄漏。每次调用都会分配一个新的缓冲区，但您从不费心去释放它们，并且您释放了指针，因此没有机会再次释放该内存。

这不是段错误的原因。

# xmpp - 为什么没有“to”属性时存在节被拒绝

> ID：13561307
> 
> 赞同：0
> 
> 时间：2012-11-26T08:45:19.500
> 
> 标签：xmpp, ejabberd

至于[XMPP 文档（示例 10）](http://xmpp.org/rfcs/rfc3921.html)，这种节应该是有效的：

```
<presence from="support@im.server.com" /> 
```

然而 ejabberd 回复 400 响应。这里的原因是缺少“to”字段。我想知道为什么会这样。 [基于 XEP-0114 分析的 XML 模式，](http://xmpp.org/extensions/xep-0114.html#schema)我猜原因在于 support@im.server.com 是一个外部组件。

有人可以确认我是对/错，或者提出如何克服这种情况的建议吗？

XMPP 服务器：ejabberd 2.1.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:15:07.513

您提到的示例 10 向客户端发送用户存在并包含资源。所以这是服务器=>客户端。

如果我理解您正确，您可以将此状态从您的组件发送到服务器（组件=> 服务器）。如果没有地址，服务器就无法将此存在路由到另一个实体。

# php - codeigniter 多个 OR 查询

> ID：13561311
> 
> 赞同：2
> 
> 时间：2012-11-26T08:45:33.500
> 
> 标签：php, codeigniter

我想在 Codeigniter 中使用以下查询：

```
SELECT `users` . * , `users_profile` . * FROM (`users`) LEFT JOIN `users_profile`
ON `users`.`id` = `users_profile`.`users_id`
WHERE (`loginid` = '$username' OR `email` = '$username' )
AND `password` = '$password' AND `users`.`status` = 'A' LIMIT 1 
```

它工作正常，但是当我以 Codeigniter 格式编写此查询时：

```
$this->db->where('loginid',"$username");
$this->db->or_where('email', "$username");    
$this->db->where('password',MD5($password));
$this->db->where('users.status','A');
$this->db->limit(1); 
```

它将始终返回 true 什么是正确的语法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:05:45.577

可能您的查询在codeIgniter中应该是这样的......作为参考，您可以看到这个链接 [参考](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)

```
$this->db->select('*');
$this->db->from('users');
$this->db->join('users_profile', 'users_profile.id = users.id', 'left');
$this->db->where("(loginid = '$username' OR email = '$username') AND password = 'MD5($password) AND status = 'A')'"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:53:11.647

您应该使用 where() 的自定义字符串方法，因为仅使用 ActiveRecord 是无法直接实现的。请参阅[文档中的此链接](http://ellislab.com/codeigniter/user-guide/database/active_record.html#select)并滚动到 where() 函数下的第 4 个选项。

例子：

```
 Custom string:

    You can write your own clauses manually:
    $where = "name='Joe' AND status='boss' OR status='active'";

    $this->db->where($where);

$this->db->where() accepts an optional third parameter. If you set it to FALSE, CodeIgniter will not try to protect your field or table names with backticks.

$this->db->where('MATCH (field) AGAINST ("value")', NULL, FALSE); 
```

# internet-explorer - IE10 Adob e Flash 渲染

> ID：13561312
> 
> 赞同：2
> 
> 时间：2012-11-26T08:45:35.017
> 
> 标签：internet-explorer

有谁知道 IE 10 如何使用 Microsoft 更新提供的内置 activx 控件 flash.ocx 呈现 Flash 内容？

渲染我的意思是......显示......哪个api用于在解码后显示flash内容。

# facebook - Facebook 以认证用户身份发帖

> ID：13561316
> 
> 赞同：1
> 
> 时间：2012-11-26T08:45:42.887
> 
> 标签：facebook, facebook-graph-api

当我使用

```
$facebook->api("/userId/feed/", 'POST', $attachment); 
```

Facebook 发布到我的朋友墙上，他们通过我的应用程序进行了身份验证。我不想要这个。当我使用

```
$facebook->api("/me/feed/", 'POST', $attachment); 
```

仅在我的提要中发布 Facebook 帖子。

**所以**我希望我的应用程序将 $attachment 数组发布到我的提要（作为我）和每个经过身份验证的用户提要（作为他）而不发布到朋友墙。（确保我有来自身份验证过程的 stream_publish 权限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T01:57:17.233

当您对用户进行身份验证并且用户授权您的应用程序的权限时，Facebook 会为您提供该特定用户的访问令牌。您需要将此访问令牌保存在数据库中（或您认为合适的任何地方）。每次向 Facebook API 发出请求时，都需要传递此访问令牌。

因此，您可以使用`/me/feed`端点以用户身份在他们自己的墙上发帖，但您需要将用户的访问令牌与您的请求一起传递。访问令牌是 Facebook 知道“我”指的是谁的方式。

例如，假设我使用您的应用程序。我使用我的 Facebook 帐户授权您的应用程序，并且 Facebook 会为您提供代表我的访问令牌。我使用您的应用程序在我的墙上发布消息：“Hello World！” `/me/feed/`然后，您使用我的访问令牌向端点提交请求。消息“Hello World！” 将出现在我的 Facebook 墙上并显示它是由我发布的。

# salesforce - 验证规则语法

> ID：13561317
> 
> 赞同：1
> 
> 时间：2012-11-26T08:45:47.097
> 
> 标签：salesforce

我有两个值（A，B）和一个自定义字段的选项列表。如果选择 B 以外的值，则不应输入自定义字段。如果选择 B 值，则可以输入自定义字段。使用什么功能。? 我很困惑。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:00:48.843

像这样的东西？我使用了来自 Account 的标准字段，`Rating`是一个选项列表，`ShippingCountry`是文本字段。

验证标准：

```
ISPICKVAL(Rating, "Hot") && ISBLANK(ShippingCountry) || 
NOT(ISPICKVAL(Rating, "Hot")) && NOT(ISBLANK(ShippingCountry)) 
```

错误信息：

> 当评级为“热”时，送货国家是强制性的。请更改评级或清除“发货国家/地区”字段中的值。

*如果您熟悉逻辑、简化等，则该条件基本上是[XNOR ；）但我们在函数参考中没有 XOR 函数。](http://en.wikipedia.org/wiki/XNOR_gate)*

您还可以考虑将其拆分为 2 个单独的验证规则 - 这将让您编写更清晰的说明用户必须执行的操作“*您选择了 B -> 填充此值！；您选择了 A -> 清除此值*”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-28T00:39:21.637

使用 eyecream 给出的示例，您可以进一步减小条件的大小，如下所示：

```
ISPICKVAL( Rating, "Hot" ) = ISBLANK( ShippingCountry ) 
```

那是（拼写出来的）：

*   如果 Rating 是 Hot 并且 ShippingCountry 是空白，那么两个条件都将为 TRUE 并且彼此相等，因此验证将激活并显示错误

    和

*   如果 Rating 不是 Hot 并且 Shippingcountry 不是空白，则两个条件都将为 FALSE 但彼此相等，因此验证将激活并显示错误

当您必须为许多字段指定类似的标准时，这种类型的较短 XOR 表达式可能会很方便，例如“运输街道、城市、州和邮政编码必须全部输入或全部空白”的验证。

在这种情况下，您将输入：

```
ISBLANK( ShippingStreet ) != ISBLANK( ShippingCity ) 
|| ISBLANK( ShippingCity ) != ISBLANK( ShippingState ) 
|| ISBLANK( ShippingState ) != ISBLANK( ShippingPostalCode ) 
```

请注意将街道状态连接到城市一直到邮政编码的每个条件之间的传递性。

该表达式基本上意味着以下两个条件：

*   如果街道为空，则城市应为空，如果城市为空，则州应为空，如果州为空，则邮政编码应为空

    和

*   如果街道不为空，则城市不应为空，如果城市不为空，则州不应为空，如果州不为空，则邮政编码不应为空

# wpf - 如何以样式传递转换器中的当前组合框项目

> ID：13561324
> 
> 赞同：0
> 
> 时间：2012-11-26T08:46:39.673
> 
> 标签：wpf, xaml

我正在尝试为comboxitem 创建一种样式。我想将当前的组合框项传递给转换器。风格就像

```
 <Style x:Key="MyVisibilityStyle" TargetType="{x:Type ComboBoxItem}">
        <Setter Property="Visibility">
            <Setter.Value>
                <MultiBinding Converter="{StaticResource VisibiltyMultiValueConverter}">
                    <Binding Path="."/>
                    <Binding Path="SelectedItem"
                             ElementName="ABCComboBox"/>
                </MultiBinding>
            </Setter.Value>
        </Setter>
    </Style> 
```

问题是“。” 正在传递 MainWindow 的对象而不是组合框项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:07:11.063

通过`<Binding Path=".">`您传递 ComboBoxItem 拥有的对象，但`<Binding RelativeSource="{RelativeSource Self}"/>`您可以传递控件本身。

您还可以做的是传递整个 ComboBox 及其选定的索引/项目：

在你的转换器中，你可以像这样得到你的 ComboBoxItem：

```
ComboBoxItem cbi = (ComboBoxItem)(cb.ItemContainerGenerator.ContainerFromIndex(selectedindex)); 
```

或者

```
ComboBoxItem cbi = (ComboBoxItem)(cb.ItemContainerGenerator.ContainerFromItem(selecteditem)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:30:13.273

您可以使用 FindAncestor 获取组合框的选定项：

`<Binding Path="SelectedItem" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=ComboBox}"/>`

# silverlight - Silverlight 4 中 TreeView 的滚动行为

> ID：13561326
> 
> 赞同：3
> 
> 时间：2012-11-26T08:47:03.117
> 
> 标签：silverlight, treeview, scroll

我是 SilverLight 4 的新手，我对 TreeView 控件的行为有疑问。

**我希望能够在 TreeView 内垂直滚动，但只有当我将鼠标悬停在项目上时滚动才有效。滚动条是可见的，它可以完美地工作，但是当我的鼠标在 TreeView 内但不在任何 TreeView 项目上时，TreeView 不会滚动。有没有什么办法解决这一问题？或者，如果有人知道任何免费或专有控件，我很乐意知道。**

[![](../Images/03ac260d527d4abba8cd8eaa464c0623.png)](https://i.stack.imgur.com/1312Z.jpg)

注意：将 TreeView 放置在 ScrollingViewer 中是可行的，但它会破坏 TreeView 的样式。如果可能的话，我也不想使用 ScrollViewer。

谢谢

如果有人想尝试一下，这是代码：

```
<UserControl x:Class="TreeViewScrollingTest.MainPage"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
mc:Ignorable="d"
d:DesignHeight="300" d:DesignWidth="400"xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk">

<Grid x:Name="LayoutRoot" Background="White">
    <sdk:TreeView x:Name="treeView1" Height="200">
        <sdk:TreeViewItem Header="Header 001">
            <TextBlock>Test 001</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 002">
            <TextBlock>Test 002</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 003">
            <TextBlock>Test 003</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 004">
            <TextBlock>Test 004</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 005">
            <TextBlock>Test 005</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 006">
            <TextBlock>Test 006</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 007">
            <TextBlock>Test 007</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 008">
            <TextBlock>Test 008</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 009">
            <TextBlock>Test 009</TextBlock>
        </sdk:TreeViewItem>
        <sdk:TreeViewItem  Header="Header 010">
            <TextBlock>Test 010</TextBlock>
        </sdk:TreeViewItem>
    </sdk:TreeView>
</Grid>
</UserControl> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-31T20:13:45.500

我在我的博客上发布了一个解决方案，这是一个不需要对模板进行任何干预的简单解决方案：

[http://shemesh.wordpress.com/2013/12/31/silverlight-treeview-scroll-behavior/](http://shemesh.wordpress.com/2013/12/31/silverlight-treeview-scroll-behavior/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T10:32:47.080

使用 Lee Campbell 博客文章中的提示：http: [//leecampbell.blogspot.ch/2009/01/horizo​​ntal -stretch-on-treeviewitems.html](http://leecampbell.blogspot.ch/2009/01/horizontal-stretch-on-treeviewitems.html)

我修改了默认列定义，现在 TreeViewItems 至少正确地拉伸到 TreeView 的整个宽度。现在滚动问题也消失了，因为 TreeView 控件意识到我的鼠标光标位于 TreeViewItems 上。

# javascript - 同一页面上具有相同上一个/下一个控制窗格的两个滑块

> ID：13561328
> 
> 赞同：0
> 
> 时间：2012-11-26T08:47:16.003
> 
> 标签：javascript, jquery, slider, flexslider

我正在尝试在同一页面上构建两个滑块，每个滑块都有自己的上一个/下一个控制窗格。

棘手的部分：当用户点击任何一个控制器时，两个滑块都必须在各自的方向上滑动。

我已经阅读了 FlexSlider 的文档，但我不确定它的属性/API 是否可以实现。

有没有人试过这个或知道更好的滑块来完成这项工作？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T11:33:43.423

我设法做到了，毕竟不是那么难。

基本上我使用了这个解决方案：[Flex Slider - 如何为两个滑块添加相同的控件，](https://stackoverflow.com/questions/10171709/flex-slider-how-to-add-same-controls-for-two-sliders)但仅适用于上一个/下一个按钮。

```
$('a.nextButton').click(function() {
                            $('.flexslider').show();
                            var totalSlides = slider.count-1;
                            var currSlide = slider.currentSlide;
                            if (currSlide != totalSlides){
                                var next = currSlide+1;
                                slider.flexAnimate(next);
                            }
                            else{
                                next = 0;
                                slider.flexAnimate(0);
                            }
                        });
$("a.prevButton").click(function(){
                            $('.flexslider').show();
                            var currSlide = slider.currentSlide;
                            if (currSlide !== 0){
                                var prev = currSlide-1;
                                slider.flexAnimate(prev);
                            }
                            else{
                                prev = slider.count - 1;
                                slider.flexAnimate(prev);
                            }
                        });
                    }
                }); 
```

# android - 如何将动画列表设置为 xml 属性

> ID：13561335
> 
> 赞同：7
> 
> 时间：2012-11-26T08:47:40.030
> 
> 标签：android, android-animation, android-xml

有没有办法设置和启动`xml` `animation-list`一个`xml`属性？我可以按如下方式以编程方式设置和启动它：

```
 ImageView img = (ImageView) findViewById(R.id.loadingImageView);
    img.setBackgroundResource(R.drawable.loading_animation);
    AnimationDrawable frameAnimation = (AnimationDrawable) img.getBackground();
    frameAnimation.start(); 
```

动画列表是：

```
<animation-list xmlns:android="http://schemas.android.com/apk/res/android"
//...
android:oneshot="false" >

<item
    android:drawable="@drawable/loading_anim_frame_one"
    android:duration="50"/>
 <item
    android:drawable="@drawable/loading_anim_frame_two"
    android:duration="50"/> 
```

等等。

有没有办法只用标记来做到这一点`xml`，即没有java代码？

如果没有，有没有办法至少将其设置为`xml`属性，然后以编程方式启动它？

我不能使用单个drawable的旋转，因为动画由几个drawable按顺序组成。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T10:15:16.980

您可以将其声明为

```
<set xmlns:android="http://schemas.android.com/apk/res/android" >

    <scale
        android:duration="700"
        android:fillAfter="false"
        android:fromXScale="0.0"
        android:fromYScale="0.0"
        android:interpolator="@android:anim/accelerate_decelerate_interpolator"
        android:pivotX="50%"
        android:pivotY="50%"
        android:toXScale="1.4"
        android:toYScale="1.4" />

    <scale
        android:duration="400"
        android:fillBefore="false"
        android:fromXScale="1.4"
        android:fromYScale="1.4"
        android:pivotX="50%"
        android:pivotY="50%"
        android:startOffset="700"
        android:toXScale="0.8"
        android:toYScale="0.8" />

</set> 
```

只是一个参考。您将不得不更改动画类型和参数。据我所知，您必须使用 java 启动它。

编辑：

[这](https://stackoverflow.com/questions/2136258/how-to-load-animationdrawable-from-xml-file)是对动画列表有帮助的链接

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T09:08:53.350

我认为您应该首先加载动画：

```
Animation anim = AnimationUtils.loadAnimation(this, R.anim.animation_name);

img.startAnimation(anim); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-12T09:36:24.877

添加带有 alpha 和翻译的示例以供将来参考：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
    <translate
        android:duration="400"
        android:fromYDelta="-100%p"
        android:toYDelta="0%p" />

    <alpha
        android:duration="800"
        android:fromAlpha="0"
        android:toAlpha="1" />
</set> 
```

# rest - 通过调用 REST API 创建帐户

> ID：13561344
> 
> 赞同：1
> 
> 时间：2012-11-26T08:48:21.780
> 
> 标签：rest

我登录到一个网站，它问我“调用我们的 API，我们会给你回电”。结构是“/users/:id/apply”。我想知道如何进入这种类型的网站，这可能需要我使用我的令牌作为密码检查基本身份验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:04:25.703

如果结构是“/users/:id/apply”，您可以使用您的 id 调用：

例如：您的用户是 Alladin，您的密码是“芝麻开门”

使用：/users/Aladdin/apply

对于基本身份验证，将其添加到您的标题中：

授权：基本 QWxhZGRpbjpvcGVuIHNlc2FtZQ== Base64("Aladdin:open sesame") = "QWxhZGRpbjpvcGVuIHNlc2FtZQ=="

# mysql - mysql全文布尔搜索与asterix

> ID：13561345
> 
> 赞同：1
> 
> 时间：2012-11-26T08:48:24.990
> 
> 标签：mysql, search, boolean, full-text-search

我有一个如下查询：

> SELECT prd_id FROM products WHERE MATCH (prd_search_field) AGAINST ('+gul* +yetistiren* +adam*' in boolean mode);

这不会返回包含“gul”的行。

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html) 文件是这么说的。

> 那么搜索 '+word +the*' 可能会返回比搜索 '+word +the' 更少的行：前一个查询保持原样并且需要 word 和 the*（以 the 开头的单词）都存在在文档中。后一个查询被转换为 +word（只需要 word 存在）。the 太短又是一个停用词，任何一个条件都足以导致它被忽略。

因此，据我了解，在我的情况下不能应用太短的单词条件，因为我在每个单词后使用 *。这有什么问题？

作为解决方案，我使用以下查询，但由于它很慢，我需要找到另一个解决方案。任何想法将不胜感激？提前致谢..

> SELECT prd_id FROM products WHERE 1 AND MATCH (prd_search_field) AGAINST ('+yetistiren* +adam*' in boolean mode) AND prd_search_field LIKE '%gul%';

作为注释 ft_min_word_length=4 在所有共享主机环境中都是默认值，我无法更改它。

# c++ - 无法获取返回值

> ID：13561348
> 
> 赞同：2
> 
> 时间：2012-11-26T08:48:32.597
> 
> 标签：c++

我正在使用此函数从记事本文件中读取数据并填写数据，`char str[255]`但在我执行该函数后`str`仍为空。

```
char str[255];

char* data_pull()
{
    std::ifstream in("C:/myfile.txt");
    if(!in){
        printf("\nCannot open the file");
       exit (1);
    }

    while(in){
        in.getline(str, 255);  
       printf(str);
    }

    in.close();
    return str;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:53:00.787

随着`in.getline(str, 255);`您不断覆盖`str`输入文件中的每一行：换句话说，每一行都将覆盖存储在`str`.

如果文件以空行`str`结尾，则将在循环末尾存储一个空字符串。

# sql - 相当于在 SQL 中定义局部变量

> ID：13561351
> 
> 赞同：0
> 
> 时间：2012-11-26T08:48:53.090
> 
> 标签：sql, hive

我有一张像这样的桌子：

```
id    B       C
a     0.5     10.1
b     0.6     2.3
c     0.9     2.1
d     15.2    8.2 
```

我想计算一个数量，例如：“B低于平均值的C的标准偏差”。

我不知道该怎么做。

```
select ssdev_pop(C) from (select B, C from table where B < avg(B) ); 
```

不起作用，我不知道如何一次性访问 avg(B) （我知道我可以计算它并将其插入第二个查询，但我想避免这种情况）。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:54:49.200

试试这个，

```
SELECT stddev_pop(C) 
FROM
(
   SELECT B, C
   FROM   table1
   WHERE  B < (SELECT AVG(B) FROM table1 )
) s 
```

演示：[http ://www.sqlfiddle.com/#!2/9d570/8](http://www.sqlfiddle.com/#!2/9d570/8)

# javascript - 文本区域焦点 IE

> ID：13561352
> 
> 赞同：0
> 
> 时间：2012-11-26T08:48:55.317
> 
> 标签：javascript, jquery, internet-explorer, focus

我对文本区域和 IE 中的焦点有疑问。我在 textarea 上有一个点击处理程序来添加一个值。这在 Firefox 和 Chrome 中完美运行，但在 IE 中它似乎有效，但随后焦点转到左上角。我怎样才能解决这个问题。

这是我编辑文本区域的代码：

```
$(".js-feedback").click(function(){
    var v = $(this).val();
    $(this).val(v + ((v == '') ? '' : "\n\n") + "Periode 1: ");

    return false;
}); 
```

问候，米歇尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:20:06.590

找到了办法。

```
 <textarea id="myTextarea" style="width: 98%; margin: 0px; height: 53px;" name="data[feedback][1]" class="js-feedback" placeholder="Hier uw opmerkingen..." autocomplete="off">Periode 0: Hier uw tekst
    </textarea>

    <script type="text/javascript">

        $(".js-feedback").click(function(){
            var v = $(this).val();
            if($.browser.msie){
                var htmElement = document.getElementById('myTextarea');
                htmElement.setSelectionRange( v.length, v.length );
            }
            else{
                $(this).val(v + ((v == '') ? '' : "\n\n") + "Periode 1: ");
            }
            return false;
        });
    </script> 
```

确保你声明

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

还

# grails - 提交后额外刷新

> ID：13561360
> 
> 赞同：1
> 
> 时间：2012-11-26T08:49:21.890
> 
> 标签：grails, refresh, form-submit, gsp, submit-button

我知道每当您提交表单时，您都会刷新页面。但是有没有一种方法可以使用 javascript 或任何允许网页在输入提交按钮后再次刷新一次的方法？

非常感谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:41:07.717

我猜你需要实现的是 Post、Redirect、Get 模式，这是 Grails 应用程序中推荐的方式。如果您键入 grails generate-controller [somedomainclassname]，您将看到该控制器实际上采用了这种模式。

它的工作原理如下：

1.  您的表单提交给控制器内的操作，我们称之为`save()`
2.  然后，您的`save()`操作会执行必要的操作以实际保存对象，完成后，它会向浏览器发送“重定向”，就像这样：`redirect(action: "show", id: mySavedObject.id)`
3.  这将导致浏览器为 url /mycontroller/show/{id} 发出 GET
4.  该请求由`show`您的控制器的操作接收。然后它继续显示刚刚创建的对象。

这种方法与 HTTP 语义配合得很好，避免了终端用户烦人的“你想重新发布你的表单数据”问题。

# python - 使用 django 显示带有绑定数据的 html 表单

> ID：13561362
> 
> 赞同：0
> 
> 时间：2012-11-26T08:49:34.747
> 
> 标签：python, django, html, django-forms

我有 django 表单，但是在我的 HTML 中，我添加了一个额外的输入字段（直接添加到 html 页面中），我可以在我的 django 视图中使用 request.POST.get('extra_field_name') 访问它。

如果 form.is_valid() 为假，我可以将表单作为 HTML 格式获取，数据显示在 HTML 中，**但额外添加的字段为空值（直接添加到 html 页面中）**

在验证结果之后，如何获取这个新添加的额外 html 字段的有界表单数据。

请提供您的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:19:59.370

看法：

```
html_added_field = ''
error_added_field = None
if request.method == 'POST':
    html_added_field = request.POST.get('extra_field_name')\
    if form.is_valid():
        pass
    else:
        error_added_field = _('Error')

context = {'html_added_field':html_added_field,'error_added_field':error_added_field} 
```

HTML：

```
<input type="text" value="{{ html_added_field }}" />{% if error_added_field %}<div class="error">{{ error_added_field }}</div>{% endif %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T08:58:41.560

Bennett 的这篇文章可能会对您有所帮助。

[http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/](http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/)

简而言之，您必须覆盖`__init__`表单的方法，在那里添加新的“extra_field_name”。这些字段包含在 self.fields 列表中，这样做：

```
self.fields['extra_field_name'] = forms.CharField(put_here_definitions_for_your_field) 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T17:35:03.447

老实说，最好的方法是让您的基本 django 表单处理额外的字段。不使用 html 中的额外字段。但是，如果您不能/不想要，如 xbello 所述，在[http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/](http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/)中，您可以使用各种技巧来处理动态字段。

我发现使用表单工厂方法更健壮。一个生成动态表单的函数，为未来的更多变化做好准备。不过，你必须决定最好的方法:-)

# alloy - 为什么这种对称性断言是错误的？

> ID：13561366
> 
> 赞同：0
> 
> 时间：2012-11-26T08:50:12.360
> 
> 标签：alloy

我真的很困惑为什么我的以下断言总是有一个反例。

```
//assertions must NEVER by wrong
assert Symmetric{
all r: univ -> univ | some ~r iff (some x, y: univ | x not in y and y not in x and 
                                  (x->y in r) and (y->x in r))
}

check Symmetric 
```

反例总是显示 1 univ set 中的元素。然而，这不应该是这样，因为我指定会有一些 ~r iff x 不在 y 中并且 y 不在 x 中。唯一的元素不应该满足这个陈述。

然而，为什么该模型总是对我的断言提出反例呢？

```
---INSTANCE---
integers={}
univ={Univ$0}
Int={}
seq/Int={}
String={}
none={}
this/Univ={Univ$0}
skolem $Symmetric_r={Univ$0->Univ$0} 
```

非常感谢一些指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:37:47.153

在 Alloy 中，断言用于检查逻辑语句（模型的属性）的正确性，而不是指定应始终保留在模型中的属性。所以你没有指定

> 如果 x 不在 y 中且 y 不在 x 中，将会有一些 ~r

`r`相反，您问 Alloy 对于所有二元关系,和 Alloy是否是真的`some ~r iff x not in y and y not in x [...]`，而 Alloy 回答说这不是真的，并给了您一个该属性不成立的具体示例（反例）。

其他几点

*   `some ~r`并不意味着“r 是对称的”；它只是意味着转置`r`是非空的，这是不一样的。如果二进制关系等于它的转置，则它是对称的，所以你可以写`r = ~r`来表达它；

*   而不是`some x, y: univ | x not in y and y not in x and [...]`你可以等效地写`some disj x, y: univ | [...]`;

*   however, that `some` expression doesn't really express the symmetry property, because all it says is that "there are some x, y such that both x->y and y->x are in r"; instead, you want to say something like "for all x, y, if x->y is in r, then y->x is in r too".

# c# - DrawableGameComponent 不响应我的点击

> ID：13561367
> 
> 赞同：1
> 
> 时间：2012-11-26T08:50:15.010
> 
> 标签：c#, windows-phone-7, xna

我已经创建了一个基本的`DrawableGameComponent`和实现`Update`的`Draw`功能。我的更新方法如下所示：

```
 public override void Update(GameTime gameTime)
        {
            if (this.state != ComponentState.Hidden)
            {
                if (this.state == ComponentState.Visible)
                {   
                    while (TouchPanel.IsGestureAvailable)
                    {
                        GestureSample gesture = TouchPanel.ReadGesture();

                        if (gesture.GestureType == GestureType.Tap)
                        {
                            Point tapLocation = new Point((int)gesture.Position.X, (int)gesture.Position.Y);

                            // TODO: handle input here!
                            this.state = ComponentState.Hidden; // test
                        }
                    }
                }
            }

            base.Update(gameTime);
        } 
```

我在构造函数中启用了以下手势：

```
TouchPanel.EnabledGestures = GestureType.Tap | GestureType.VerticalDrag; 
```

这里的问题是，当我检查 Tap 时，它对 if 测试没有反应。我需要对 DrawableGameComponent 做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:57:31.687

似乎您的手势正在代码中的其他位置被读取，并且当您提供的代码检查`TouchPanel.IsGestureAvailable`它是否为假时，因为它们都已被读取。

解决此问题的常用方法是创建一个 InputState 类，该类为您可能拥有的不同屏幕包装所有输入代码。这种模式（以及其他一些好的模式）可以在Microsoft 在其教育部分提供的[GameState 管理示例中找到。](http://xbox.create.msdn.com/en-US/education/catalog/sample/game_state_management)这个示例对于任何项目来说都是一个非常好的起点，因为它负责屏幕管理、输入等。

希望有帮助。

# javascript - 使用从参数派生的类名切换 div

> ID：13561370
> 
> 赞同：2
> 
> 时间：2012-11-26T08:50:18.673
> 
> 标签：javascript, jquery, class

我有一个 JavaScript 函数，其中类名作为参数。所以我想切换（）参数中的特定类名。我该怎么做？我试过这样，但它不起作用。

```
function hideclass(classval){
$("#divname.classval").toggle();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:51:57.803

试试这个

```
 function hideclass(classval){
    $("#divname."+classval).toggle();
 } 
```

或者

```
function hideclass(classval){
    $("#divname").hasClass(classval).toggle();
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:52:00.950

只需将值连接到选择器的文本：

```
function hideclass(classval){
    $("#divname." + classval).toggle();
} 
```

# authentication - 有人解释日内瓦框架和 WIF

> ID：13561371
> 
> 赞同：0
> 
> 时间：2012-11-26T08:50:20.223
> 
> 标签：authentication, wif, claims-based-identity, geneva-framework

我很笨，不知道这两个框架提供了什么。我想转向基于声明的身份验证，但不明白这两个框架为我提供了什么。这两者是提供相同的功能只是名称不同还是有目的？

是否有关于 SO 的问题可以帮助我开始将现有表单身份验证应用程序移植到“基于声明的身份验证”？

非常感谢您的回答

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T18:40:28.377

日内瓦现在称为 Active Directory 联合服务 (ADFS)。

它是一种安全令牌服务 (STS)，它发出包含用户属性（姓名、电子邮件等）的签名令牌。

WIF 是包含在 ASP.NET 应用程序中的一组类，它提供连接到 ADFS 的管道。

看一下：

[基于声明的身份和访问控制指南](http://msdn.microsoft.com/en-us/library/ff423674.aspx)

[AD FS 2.0 内容地图](http://social.technet.microsoft.com/wiki/contents/articles/2735.ad-fs-2-0-content-map.aspx)

[Windows 身份基础 (WIF) 内容映射](http://social.technet.microsoft.com/wiki/contents/articles/3665.windows-identity-foundation-wif-content-map.aspx)

**更新**

上面的 WIF 链接包含[Windows Identity Foundation (WIF) 入门](http://social.technet.microsoft.com/wiki/contents/articles/3487.get-started-with-windows-identity-foundation-wif.aspx)链接，其中包括 Identity Training Kit 和一些“入门”示例。

# javascript - 如何将动态值传递给事件监听器

> ID：13561372
> 
> 赞同：0
> 
> 时间：2012-11-26T08:50:26.997
> 
> 标签：javascript, requirejs

我正在使用服务器端技术 (JSP) 来呈现我的视图。因此，我有一个`for`循环遍历列表的循环。现在，我想将单击侦听器绑定到为列表中的每个项目呈现的按钮。点击监听器中的代码需要item ID，我不明白如何传递给JavaScript代码。

我也使用`requirejs`, 如果这对解决方案很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:55:02.683

也许您只是不需要将 html ID 传递给您的 javascript。您可以使用 css 类来检索 DOM 中的按钮。javascript 代码取决于您使用的框架。

在本机 javascript 中，您可以像这样检索按钮：

```
var buttons = document.querySelectorAll('button.my_class'); 
```

换成`my_class`你想要的就行了。

您可以通过执行以下操作访问按钮 ID：

```
var button_id = buttons[0].id 
```

如果要将项目 ID 附加到按钮，可以使用`data`属性。例如 ：

```
<button id="my_button" data-id="item_id" /> 
```

在javascript中，您可以`data_id`像这样访问：

```
var item_id = buttons[0].getAttribute('data-id'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:05:17.063

在大多数事件处理程序中，`this`是触发事件的 DOM 节点，所以类似这样的工作：

```
button.onclick = function() {
    alert(this.id);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:08:48.560

这是现场[示例](http://jsfiddle.net/nameIsNull/HPp5m/) 如果您使用的是 jQuery 和 requirejs，这将是这样的：

```
require(['jQuery'], function ($) {
    $('.container_element').on('click', '.button_class', function () {
        console.log('You have clicked button with id ', $(this).attr('id'));
    })
}) 
```

# c# - RestSharp Deserialize 返回空属性，但 xml.deserialize 测试有效

> ID：13561373
> 
> 赞同：7
> 
> 时间：2012-11-26T08:50:29.813
> 
> 标签：c#, xml, xml-serialization, restsharp

编辑：当我问这个问题时，我想尝试一些东西。我已经在请求上设置了 XmlNamespace 属性，这就是诀窍。

```
request.XmlNamespace = "http://musicbrainz.org/ns/mmd-2.0#"; 
```

但是我真的不明白为什么...

下一个问题是让 RestSharp 将 xml 属性识别为对象属性

* * *

周末的大部分时间我都在处理这个问题，但我只是没有让它工作。

我正在尝试围绕 RestFul 网络服务（MusicBrainz）编写一个包装器。我正在使用一个简单的示例进行测试：获取一位艺术家的详细信息并将其放入自定义艺术家对象中。

当我在 RestClient 上执行 Execute 时，它​​结束正常，但我的对象属性为空。但是当我使用 XmlDeserializer 测试反序列化时，对象属性被填充（但不适用于与属性对应的属性，但我稍后会解决这个问题)

在响应的反序列化和将对象放入 response.data 之间会发生什么？很可能这是我正在犯的“新手”错误，因为这是我使用 RestSharp 的第一步。

帮助将不胜感激..

返回的 xml：

```
<metadata>
   <artist type="Group" id="f1548c5b-329e-4036-921c-02213a04b525">
       <name>Uriah Heep</name>
           <sort-name>Uriah Heep</sort-name>
           <country>GB</country>
           <life-span>
               <begin>1970</begin>
           </life-span>
    </artist>
</metadata> 
```

我的课 ：

```
public class Artist
{
    public int Id { get; set; }
    public string Type { get; set; }
    public string Name { get; set; }
    public string SortName { get; set; }
    public string Country { get; set; }

} 
```

在下面的代码中，输出属性被填充

```
var output = xml.Deserialize<Artist>(response); 
```

但是调用时相同的响应不会填充属性

```
var response = client.Execute<T>(request); 
```

完整代码（为简单起见，我将测试代码放在通用方法中）：

```
public T Execute<T>(RestRequest request) where T : new()
{
    var client = new RestClient();
    client.BaseUrl = BaseUrl;
    client.Authenticator = null;

    //does not fill properties 
    var response = client.Execute<T>(request);

    if (response.ErrorException != null)
    {
        throw response.ErrorException;
    }
    var xml = new XmlDeserializer();

    //fills properties
    var output = xml.Deserialize<Artist>(response);

    return response.Data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-14T01:07:03.143

发生这种情况是因为`Execute`方法在收到响应后，会尝试根据请求的 RootElement 和 XmlNamespace 属性对其进行*协商，并将***它们复制**到`XmlDeserializer`.

这是[来自 RestClient](https://github.com/restsharp/RestSharp/blob/master/RestSharp/RestClient.cs#L568)的代码：

```
 handler.RootElement = request.RootElement;
     handler.DateFormat = request.DateFormat;
     handler.Namespace = request.XmlNamespace;
     response.Data = handler.Deserialize<T>(raw); 
```

如果您传递带有不匹配的 XmlNamespace 的 RestRequest，RestSharp `XmlDeserializer`（在幕后使用 XDocument）将无法将响应 XML 映射到对象属性，而您将获得默认/空值。

现在对于默认实现（当您`XmlDeserializer`手动创建时），如果您不设置 XmlNamespace，反序列化器将执行*自动检测*，基本上忽略响应中的所有命名空间并仅通过其名称映射所有属性。

[请参阅XmlDeserializer 的](https://github.com/restsharp/RestSharp/blob/master/RestSharp/Deserializers/XmlDeserializer.cs#L59)源代码：

```
 // autodetect xml namespace
     if (!Namespace.HasValue())
     {
         RemoveNamespace(doc);
     } 
```

考虑到以上所有因素，很明显为什么在您使用此行将 XmlNamespace 属性显式设置为请求对象中的匹配命名空间后它开始工作：

```
 request.XmlNamespace = "http://musicbrainz.org/ns/mmd-2.0#"; 
```

`Execute`方法将命名空间复制到反序列化器中，并将 XML 适当地映射到对象。

# c# - Linq查询基于多个字段和属性查找重复对象为空

> ID：13561376
> 
> 赞同：3
> 
> 时间：2012-11-26T08:50:46.427
> 
> 标签：c#, .net, linq

我正在尝试根据 2 个字段定位重复对象，但仅在第 3 个字段也为空的情况下

```
ItemNumber, Name, Pricebook, Parent
Item1, A, B, <null>
Item2, A, B, Item1
Item3, A, B, <null>
Item4, A, B, Item1
Item5, A, B, Item2 
```

所以在上面的列表中，只有 2 个重复项实际上是 Item1 和 Item3

```
var duplicateItemsList =
    from i in items
    group i by new { i.ItemNumber, i.Pricebook, i.Parent } into d
    where d.Count() > 1
    select new { ItemNumber = d.Key.ItemNumber, Pricebook = d.Key.Pricebook, Parent = d.Key.Parent, Count = d.Count() }; 
```

我遇到的麻烦是检查 Linq 查询中的空字段值。

在上面的 Linq 查询之后，我只想得到一个包含重复的 ItemNumber 和 Pricebook 字段值的列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T08:54:56.580

我认为您`Parent`在结果和摸索键中不需要属性，因为它具有`null`价值。此外，如果匿名对象与分配的属性名称相同，则不需要指定属性名称。

```
var duplicateItemsList =
    from i in items
    where i.Parent == null
    group i by new { i.Name, i.Pricebook } into d
    where d.Count() > 1
    select new { 
                  d.Key.Name, 
                  d.Key.Pricebook, 
                  Count = d.Count()
               }; 
```

您还可以引入新的范围变量来存储组中的项目计数。然后项目计数将只计算一次：

```
var duplicateItemsList =
    from i in items
    where i.Parent == null
    group i by new { i.Name, i.Pricebook } into d
    let groupItemsCount = d.Count()
    where groupItemsCount > 1
    select new { 
                  d.Key.Name, 
                  d.Key.Pricebook, 
                  Count = groupItemsCount
               }; 
```

*正如@Blachshma*指出的那样更新，您按 ItemNumber 而不是 Name 分组

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:54:48.387

```
var duplicateItemsList =
    from i in items
    where i.Parent == null
    group i by new { i.ItemNumber, i.Pricebook, i.Parent } into d
    where d.Count() > 1
    select new { ItemNumber = d.Key.ItemNumber, Pricebook = d.Key.Pricebook, Parent = d.Key.Parent, Count = d.Count() }; 
```

您可以在分组之前仅过滤空项目，并使用附加的 where 子句进行重复检查。

# c# - 可拖动点

> ID：13561377
> 
> 赞同：1
> 
> 时间：2012-11-26T08:50:48.020
> 
> 标签：c#, wpf, charts, draggable, dynamic-data-display

我正在使用带有动态数据显示的 wpf 中的图表。我想插入一个动态可拖动点。直到现在我可以像这样插入一个

```
<d3:DraggablePoint Position="0.2,0.2" /> 
```

但我想将它插入代码后面，不幸的是我不知道怎么做！只要我在项目地图中命名并修改这个特定元素，我就可以修改它的一些属性。

谁能指出我如何自己做一个可拖动的点，以便当图表缩放或填充时，该点也可以做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:06:44.123

您将需要包含 using 语句：

```
using Microsoft.Research.DynamicDataDisplay.Charts.Shapes; 
```

然后实例化你的 DraggablePoint 像：

```
DraggablePoint dPoint = new DraggablePoint(); 
```

设置您的 DraggablePoint 属性，然后将其添加到您的绘图中，例如：

```
plotter.Children.Add(dPoint); 
```

# scala - Play 中 Rest 类的 Scala 特征

> ID：13561382
> 
> 赞同：2
> 
> 时间：2012-11-26T08:51:08.550
> 
> 标签：scala, playframework-2.0

在 Play Framework 项目中，我有用于处理 REST 请求的控制器，例如：

```
 object AddressBean extends Controller with RestTrait{

  def list = Action {
    val list = Addresses.findAll()
    Ok(Json.toJson(list.map(s => Json.toJson(s)(AddressJson.addressWrites))))
  }

  def create = Action {
    Ok("")
  }
} 
```

（请注意，我只是把 OK("") 编译，我必须实现它们，就像我实现列表方法一样）。

我想为所有这些 REST 类定义一个特征以实现相同的方法，我开始喜欢：

```
 /**
 * Define an interface for all of our REST classes.
 */
trait RestTrait extends Controller{
  /**
   * List entities.
   */
  def list
  /**
   * Create entity. Get entity from request.body
   */
  def create

  //and so on
} 
```

问题是我收到一条警告说`Unit does not take parameters`，所以我明白我的 trait 方法应该有一个 Action 返回类型，所以我最终将它们定义为：

```
 /**
 * Define an interface for all of our REST classes.
 */
trait RestTrait extends Controller{
  /**
   * List entities.
   */
  def list = Action{
      Ok("")
  }
  /**
   * Create entity. Get entity from request.body
   */
  def create = Action{
      Ok("")
  }

  //and so on
} 
```

有没有办法避免像这样在 trait 中定义方法？因为那时我必须`override`在我的课堂上使用。`implement`我主要不想`override`那些方法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:24:33.663

没有返回类型的抽象方法将返回 Unit，因此您所要做的就是将 Action[AnyContent] 的返回类型添加到您的方法中。

```
trait RestTrait extends Controller{
  /**
   * List entities.
   */
  def list:play.api.mvc.Action[play.api.mvc.AnyContent]

  /**
   * Create entity. Get entity from request.body
   */
  def create:play.api.mvc.Action[play.api.mvc.AnyContent]

  //and so on
} 
```

Action 实际上是一个单例对象，它接受一个返回结果的函数。

```
object Action extends java.lang.Object with scala.ScalaObject {
...
  def apply(block : scala.Function1[play.api.mvc.Request[play.api.mvc.AnyContent], play.api.mvc.Result]) : play.api.mvc.Action[play.api.mvc.AnyContent]
  def apply(block : => play.api.mvc.Result) : play.api.mvc.Action[play.api.mvc.AnyContent]
} 
```

# android - Android 画廊、他的适配器、广播和服务不更新画廊视图

> ID：13561384
> 
> 赞同：0
> 
> 时间：2012-11-26T08:51:20.193
> 
> 标签：android, service, android-gallery, baseadapter

我有一个带有自定义基本适配器的库，并从带有图像路径的数组列表中填充，从具有广播的服务发送。

带有路径的数组列表不是空的，我调用了 notifidatasetchange 但画廊没有改变：

这是代码：

服务.java

```
@Override
        protected void onProgressUpdate(Integer... progreso) {

            // Actualizo el progreso
            Integer progresoImagenes = progreso[0];
            if (progresoImagenes == 0) {
                Toast.makeText(contexto,
                        "Las fotografias se descargaran en una carpeta llamada FotosTuenti dentro de tu tarjeta de memoria.",
                        Toast.LENGTH_LONG).show();
            } else {
                actualizaAdaptador();
                //((NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE)).notify(01, generaNotificacion().build());
                // TODO notificaciones para 4.0 y menos
            }

private void actualizaAdaptador() {

        Intent intent = new Intent(ACTUALIZA_ACTION);
        intent.addCategory("com.colymore.android.fototuenti");
        intent.putExtra(ACTUALIZA_DATOS, pathImagen);//pathimagen = /sdcard/images/1.jpg
        sendBroadcast(intent);
    } 
```

这是baseadapter.java，广播接收器

公共静态类 AdaptadorImagenes 扩展 BaseAdapter {

```
 private Context contexto    = null;

    public AdaptadorImagenes(Context contexto) {

        this.contexto = contexto;

    }

    @Override
    public int getCount() {
        return pathImagenes.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        if (!(convertView instanceof ImageView)) {
            ImageView cv = new ImageView(contexto);

            if (contexto.getResources().getConfiguration().orientation == 1)
                cv.setLayoutParams(new Gallery.LayoutParams(parent.getWidth(), parent.getHeight()));
            else
                cv.setLayoutParams(new Gallery.LayoutParams(210, 210));
            cv.setScaleType(ImageView.ScaleType.FIT_XY);
            cv.setImageBitmap(getBitMapRedimensionado(position));
            convertView = cv;
        }

        return convertView;

    }

    /**
     * Metodo para redimensionar un bimap
     * 
     * @param posicion
     *            del bitmap en una lista que contiene los path
     * @return bitmap redimensionado
     */
    private Bitmap getBitMapRedimensionado(int posicion) {

        File fichero = new File(pathImagenes.get(posicion));
        Bitmap bmOriginal = redondeaEsquinasBitmap(Bitmap.createScaledBitmap(BitmapFactory.decodeFile(fichero.toString()),
                210, 210, true));

        return bmOriginal;
    }

    /**
     * Metodo para redondear las esquinas de un bitmap
     * 
     * @param bitmap
     *            a redondear
     * @return bitmap redondeado
     */
    public Bitmap redondeaEsquinasBitmap(Bitmap bitmap) {
        Bitmap salida = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(salida);

        final int color = 0xff424242;
        final Paint paint = new Paint();
        final Rect rect = new Rect(0, 0, bitmap.getWidth(), bitmap.getHeight());
        final RectF rectF = new RectF(rect);
        final float roundPx = 12;

        paint.setAntiAlias(true);
        canvas.drawARGB(0, 0, 0, 0);
        paint.setColor(color);
        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);
        paint.setXfermode(new PorterDuffXfermode(Mode.SRC_IN));
        canvas.drawBitmap(bitmap, rect, rect, paint);

        return salida;
    }

}

public class Receptor extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        android.os.Debug.waitForDebugger();
        if (intent != null) {
            Bundle bundle = intent.getExtras();
            pathImagenes.add(bundle.getString("com.colymore.tuenti.update.datos"));
            adaptador.notifyDataSetChanged();
        }
    }

} 
```

在活动的 onResume 中：

```
@Override
    public void onResume() {
        adaptador = new AdaptadorImagenes(contexto);
        final IntentFilter serviceActiveFilter = new IntentFilter(ServiceDownloader.ACTUALIZA_ACTION);
        serviceActiveFilter.addCategory("com.colymore.android.fototuenti");
        this.serviceReceiver = new Receptor();
        this.registerReceiver(this.serviceReceiver, serviceActiveFilter);
        super.onResume();
    } 
```

我在 BroadCastReceiver 中接收数据；如果我做 adapter.getAdapter 返回我适配器对象，并且 pathimagenes.get(i) 返回字符串..

**我认为是因为在主线程中我调用了一个服务，该服务启动了一个 asyntask，并且在 asyntask 的progressoupdate 中，我使用广播接收器向主活动发送图像的路径并更新它。**

这是错误的方式吗？

任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:11:27.470

您必须注册您的 broadcastReceiver 才能使其工作：

在您的活动中：

```
IntentFilter intentfilterTime = intentfilterTime = new IntentFilter();  
intentfilterTime.addAction("com.colymore.android.fototuenti");
registerReceiver(broadcastReceiver, intentfilterTime);//you have to create a broadcastReceiver on your activity too 
```

# xna - XNA C# 对象纹理

> ID：13561387
> 
> 赞同：1
> 
> 时间：2012-11-26T08:51:37.940
> 
> 标签：xna, textures

我有一个关于 xna 的问题。当我将它放入我的代码（我在 MSDN 上遵循它）时，我从 MSDN（带有纹理的船）获得了一个示例 fbx 文件，它也适用于纹理，但是当我放置我自己的模型（带有 minecraft 污垢块纹理的立方体）它只显示立方体，而不是纹理。该程序没有给我任何错误。

# ios - iOS 模拟器“设置”应用程序崩溃

> ID：13561391
> 
> 赞同：3
> 
> 时间：2012-11-26T08:51:42.683
> 
> 标签：ios

设置应用程序在运行 iOS 6.0、视网膜 4 英寸的 iOS 模拟器中崩溃。有人注意到这个吗？任何解决方法？

# android - 单击图像视图以在其上绘制画布，在每个触摸事件上垂直移动图像视图。为什么？

> ID：13561393
> 
> 赞同：3
> 
> 时间：2012-11-26T08:51:45.963
> 
> 标签：android

我想在图像视图上绘制画布我正在使用手指画的概念，但它不起作用

```
public class show_image extends Activity implements OnTouchListener,ColorPickerDialog.OnColorChangedListener {
    ImageView img_vw_show;
    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();
    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    // Remember some things for zooming
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;
    float x1, y1, x2, y2;
    Bitmap bmp;
    int i = 1, width, height;
    private static final float MINP = 0.25f;
    // private static final float MAXP = 0.75f;
    int w, h;
    Bitmap mBitmap, bMap, newBitmap;
    Canvas mCanvas;
    Path mPath;
    Paint mBitmapPaint, mPaint;
    MaskFilter mEmboss;
    MaskFilter mBlur;
    BufferedInputStream buf;
    MyView mv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.show_image);
        System.out.println("oncreate method called");
        img_vw_show = (ImageView) this.findViewById(R.id.img_vw_show);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);

        mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 }, 0.4f, 6, 3.5f);

        // mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
        img_vw_show.setOnTouchListener((OnTouchListener) this);
        String responseImagePath = this.getIntent().getStringExtra(
                "responseImagePath");
        String selectedImagePath = this.getIntent().getStringExtra(
                "selectedImagePath");
        System.out.println("responseImagePath in show image========"
                + responseImagePath);
        System.out.println("selectedImagePath in show image========"
                + selectedImagePath);
        Boolean selectedImagePathFlag = false;

        if (selectedImagePath == null) {
            selectedImagePathFlag = true;

        } else if (selectedImagePath.equals("")) {
            selectedImagePathFlag = true;
        }

        if (selectedImagePathFlag) {
            if (responseImagePath != null && !responseImagePath.equals("")) {
                URL url1;
                InputStream in;

                try {
                    url1 = new
                    // URL("http://mail.sshanghvi.com:8080/sacplupload/checklist/"+responseImagePath);
                    URL("http://192.168.1.49:82/uploads/" + responseImagePath);
                    in = url1.openStream();
                    // Read the inputstream
                    buf = new BufferedInputStream(in);

                    BitmapFactory.Options o = new BitmapFactory.Options();
                    o.inJustDecodeBounds = true;
                    // The new size we want to scale to
                    final int REQUIRED_SIZE = 70;

                    // Find the correct scale value. It should be the power of
                    // 2.
                    int width_tmp = o.outWidth, height_tmp = o.outHeight;
                    int scale = 1;
                    while (true) {
                        if (width_tmp / 2 < REQUIRED_SIZE
                                || height_tmp / 2 < REQUIRED_SIZE)
                            break;
                        width_tmp /= 2;
                        height_tmp /= 2;
                        scale *= 2;
                    }

                    // Decode with inSampleSize
                    BitmapFactory.Options o2 = new BitmapFactory.Options();
                    o2.inSampleSize = scale;
                    bMap = BitmapFactory.decodeStream(buf, null, o2);
                    img_vw_show.setImageBitmap(bMap);
                    width = bMap.getWidth();
                    height = bMap.getHeight();
                    System.out.println("Width and Height is==" + width + " & "
                            + height);
                    mv = new MyView(show_image.this, bMap);
                    System.out.println("Setting the Myview");
                    mv.invalidate();
                    if (in != null) {
                        in.close();
                    }
                    if (buf != null) {
                        buf.close();
                    }

                } catch (Exception e) {
                    Log.e("Error reading file", e.toString());
                }
            } else {
                Toast.makeText(getApplicationContext(), "Image Not Available",
                        Toast.LENGTH_SHORT).show();
            }
        } else {
            File imgFile = new File(selectedImagePath);
            BitmapFactory.Options bfOptions = new BitmapFactory.Options();

            bfOptions.inDither = false; // Disable Dithering mode
            bfOptions.inPurgeable = true; // Tell to gc that whether it needs
                                            // free memory, the Bitmap can be
                                            // cleared
            bfOptions.inInputShareable = true; // Which kind of reference will
                                                // be used to recover the Bitmap
                                                // data after being clear, when
                                                // it will be used in the future
            bfOptions.inTempStorage = new byte[32 * 1024];
            Bitmap myBitmap = BitmapFactory.decodeFile(
                    imgFile.getAbsolutePath(), bfOptions);
            img_vw_show.setImageBitmap(myBitmap);

        }
    }

    public class MyView extends View {

        public MyView(Context c, Bitmap img) {
            super(c);
            mPaint = new Paint();
            mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(Color.RED);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(8);
            setWillNotDraw(false);
            mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 }, 0.4f, 6,
                    3.5f);
        }
        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
        }

        Bitmap newBitmap;
        Canvas newCanvas;
        public void onDraw(Canvas canvas) {
            super.onDraw(newCanvas);
            newBitmap= Bitmap.createBitmap(width, height,
                    Bitmap.Config.ARGB_8888);
            newCanvas= new Canvas(newBitmap);
            System.out.println("canvas == "+canvas);
            System.out.println("newCanvas == "+newCanvas);
            System.out.println("onDraw Called");

            img_vw_show.draw(newCanvas);

            newCanvas.drawBitmap(newBitmap, 0, 0, mBitmapPaint);

            newCanvas.drawPath(mPath, mPaint);

            img_vw_show.setImageBitmap(newBitmap);
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            System.out.println("Touch Start Called");
            onDraw(newCanvas);
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }

        private void touch_move(float x, float y) {
            System.out.println("Touch Move Called");
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX) / 2, (y + mY) / 2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {

            System.out.println("Touch Up Called");
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            newCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw
            mPath.reset();
        }
    }
    private static final int COLOR_MENU_ID = Menu.FIRST;
    private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
    private static final int BLUR_MENU_ID = Menu.FIRST + 2;
    private static final int ERASE_MENU_ID = Menu.FIRST + 3;
    private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);

        menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
        menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
        menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
        menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
        menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');

        /****
         * Is this the mechanism to extend with filter effects? Intent intent =
         * new Intent(null, getIntent().getData());
         * intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
         * menu.addIntentOptions( Menu.ALTERNATIVE, 0, new ComponentName(this,
         * NotesList.class), null, intent, 0, null);
         *****/
        return true;
    }

    @Override
    public boolean onPrepareOptionsMenu(Menu menu) {
        super.onPrepareOptionsMenu(menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        mPaint.setXfermode(null);
        mPaint.setAlpha(0xFF);

        switch (item.getItemId()) {
        case COLOR_MENU_ID:
            new ColorPickerDialog(this, this, mPaint.getColor()).show();
            return true;
        case EMBOSS_MENU_ID:
            if (mPaint.getMaskFilter() != mEmboss) {
                mPaint.setMaskFilter(mEmboss);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case BLUR_MENU_ID:
            if (mPaint.getMaskFilter() != mBlur) {
                mPaint.setMaskFilter(mBlur);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case ERASE_MENU_ID:
            // mPaint.setXfermode(new
            // PorterDuffXfermode(PorterDuff.Mode.CLEAR));
            return true;
        case SRCATOP_MENU_ID:
            // mPaint.setXfermode(new
            // PorterDuffXfermode(PorterDuff.Mode.SRC_ATOP));
            mPaint.setAlpha(0x80);
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

    @Override
    public void colorChanged(int color) {
    }
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        float x = event.getX();
        float y = event.getY();
        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            mv.touch_start(x, y);
            v.invalidate();
            break;
        case MotionEvent.ACTION_MOVE:
            mv.touch_move(x, y);
            v.invalidate();
            break;
        case MotionEvent.ACTION_UP:
            mv.touch_up();
            v.invalidate();
            break;
        }
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:37:58.367

即使我在我的应用程序中也遇到了同样的问题。将画布上的形状绘制到 imageViews 上，然后每次更新它们似乎都不起作用。

我通过将形状提取到我的 UI 类中来完成相同的操作，并在那里编写了一个方法 showView(View v, color color) {

}

并在需要时在我的主要活动中调用它。在我的应用程序中，场景是动态更改画布的颜色。

所以我就这样处理它并且它奏效了。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:24:12.427

```
 Canvas Class:
       public void init() 
 {
    basePaint = new Paint();
    basePaint.setColor(Color.RED);
    basePaint.setStrokeWidth(2);
    basePaint.setStyle(Paint.Style.FILL_AND_STROKE);

    paint = new Paint();
    paint.setStrokeWidth(2);
    paint.setColor(color);

    triPaint = new Paint();
    triPaint.setColor(Color.RED);
    triPaint.setStrokeWidth(2);
    triPaint.setStyle(Paint.Style.FILL_AND_STROKE);

    triPaint1 = new Paint();
    triPaint1.setColor(Color.RED);
    triPaint1.setStrokeWidth(2);
    triPaint1.setStyle(Paint.Style.FILL_AND_STROKE);

    diffPaint = new Paint();
    diffPaint.setColor(color);
    diffPaint.setStrokeWidth(2);
    diffPaint.setStyle(Paint.Style.FILL_AND_STROKE);

    Log.i("color","="+color);
    paint.setStyle(Paint.Style.FILL_AND_STROKE);

}

  @Override
   public void onDraw(Canvas canvas) {

    Log.d("check","="+color);
    Log.e("check","after set:"+buf);
    Log.i("new view ", " on draw ");
    paint.setStyle(Paint.Style.STROKE);
    paint.setStrokeWidth(5);
    paint.setColor(Color.WHITE);

    /*basePaint.setStyle(Paint.Style.FILL);
    basePaint.setStrokeWidth(3);
    basePaint.setColor(Color.RED);

    canvas.drawLine(0,40,80,40,basePaint);*/
    path = new Path();
    path.moveTo(0, 30);                             /*For Borders*/
    path.lineTo(30, 0);
    path.lineTo(-30, 0);
    path.close();
    path.offset(20, -5);
    canvas.drawPath(path, paint);

    diffPaint.setStyle(Paint.Style.FILL);
    diffPaint.setStrokeWidth(3);
    diffPaint.setColor(color);                    //To fill The Triangle
    Log.d("Filling","Triangles");

    diffPath = new Path();
    diffPath.moveTo(0, 30);
    Log.d("After","1st line");

    diffPath.lineTo(30, 0);
    Log.d("After","2nd line");

    diffPath.lineTo(-30, 0);
    Log.d("After","3rd line");

    diffPath.close();
    diffPath.offset(20, -5);
    Log.d("Locating","Arrow");

    canvas.drawPath(diffPath, diffPaint);
    Log.d("Drew","Arrow");
    Log.d("Color","="+color);

         triPaint.setStyle(Paint.Style.FILL);
    triPaint.setStrokeWidth(100);
    triPaint.setColor(Color.BLACK);

    triPath = new Path();
    triPath.moveTo(0, -20);
    triPath.lineTo(20, 0);
    triPath.lineTo(-20, 0);                     //To Fill the extra Space
    triPath.close();
    triPath.offset(42,26);
    canvas.drawPath(triPath, triPaint);

    triPaint1.setStyle(Paint.Style.FILL);
    triPaint1.setStrokeWidth(100);
    triPaint1.setColor(Color.BLACK);

    triPath1 = new Path();
    triPath1.moveTo(0, -20);
    triPath1.lineTo(20, 0);
    triPath1.lineTo(-20, 0);
    triPath1.close();
    triPath1.offset(-2,26);
    canvas.drawPath(triPath1, triPaint1);       
}

   UI class:

   public void show(View anchor,int color) {
    preShow();

    int xPos, yPos, arrowPos;

    mDidAction = false; /*Setting the position of arrows drawn using canvas in UI*/

    int[] location = new int[2];

    anchor.getLocationOnScreen(location);

    Rect anchorRect = new Rect(location[0], location[1], location[0]
            + anchor.getWidth(), location[1] + anchor.getHeight());

    mRootView.measure(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

    int rootHeight = mRootView.getMeasuredHeight();

    if (rootWidth == 0) {
        rootWidth = mRootView.getMeasuredWidth();
    }

    int screenWidth = mWindowManager.getDefaultDisplay().getWidth();
    int screenHeight = mWindowManager.getDefaultDisplay().getHeight();

    if ((anchorRect.left + rootWidth) > screenWidth) {
        xPos = anchorRect.left - (rootWidth - anchor.getWidth());
        xPos = (xPos < 0) ? 0 : xPos;

        arrowPos = anchorRect.centerX() - xPos;

    } else {
        if (anchor.getWidth() > rootWidth) {
            xPos = anchorRect.centerX() - (rootWidth / 2);
        } else {
            xPos = anchorRect.left;
        }

        arrowPos = anchorRect.centerX() - xPos;
    }

    int dyTop = anchorRect.top;
    int dyBottom = screenHeight - anchorRect.bottom;

    boolean onTop = (dyTop > dyBottom) ? true : false;

    if (onTop) {
        if (rootHeight > dyTop) {
            yPos = 15;
            LayoutParams l = mScroller.getLayoutParams();
            l.height = dyTop - anchor.getHeight();
        } else {
            yPos = anchorRect.top - rootHeight;
        }
    } else {
        yPos = anchorRect.bottom;

        if (rootHeight > dyBottom) {
            LayoutParams l = mScroller.getLayoutParams();
            l.height = dyBottom;
        }
    }

     showArrow(((onTop) ? R.id.arrow_down : R.id.arrow_up), arrowPos,color);
             /*updating color of arrow which is the shape drawn in canvas*/

                 container.setBackgroundColor(color);

    setAnimationStyle(screenWidth, anchorRect.centerX(), onTop);
    mWindow.showAtLocation(anchor, Gravity.NO_GRAVITY, xPos, yPos);

} 
  Main Activity:

   Whenever the shape needs to be updated by a modification of color:

    btn1 = (Button) this.findViewById(R.id.btn1);
    btn1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            Log.d("In","View");    
            quickAction.show(v,Color.BLUE);

     /*By passing the color the color is getting updated and modified on each button click for the shape drawn using canvas on the imageView*/
        }
    }); 
```

# php - 在关联（数组）上找到类型为 Doctrine\Common\Collections\ArrayCollection 的实体，但期待（其他）

> ID：13561400
> 
> 赞同：3
> 
> 时间：2012-11-26T08:52:06.570
> 
> 标签：php, symfony, doctrine

我得到的错误是：

> 在关联模型\StoreBundle\Entity\campaign#campaignOperatingSystems 上找到类型为 Doctrine\Common\Collections\ArrayCollection 的实体，但需要模型\StoreBundle\Entity\campaignOS

以下是campaignOS的总结：

```
/**
 * model\StoreBundle\Entity\campaignOS
 * @ORM\Table(name="campaign_os")
 * @ORM\Entity
 */
class campaignOS extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('OS', 'entity', array(
                'class' => 'modelStoreBundle:listOS',
                'property' => 'OsName',
                'multiple' => 'true',
                'expanded' => 'true'
        ));
    }

    /**
     * @var integer $id
     *
     * @ORM\Column(name="campaign_os_id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    public function getId()
    {
        return $this->id;
    }

    /**
     * @ORM\ManyToOne( targetEntity="campaign", inversedBy="campaignOperatingSystems" )
     * @ORM\JoinColumn( name="campaign_os_id", referencedColumnName="campaign_id" )
     */
    private $campaign;

    public function setCampaign( \model\StoreBundle\Entity\campaign $ourCampaign )
    {
        $this->$campaign = $ourCampaign;
    }

    public function getCampaign()
    {
        return $this->$campaign;
    }

    /**
     * @ORM\OneToOne( targetEntity="listOS" )
     * @ORM\JoinColumn( name="campaign_os_id", referencedColumnName="os_id" )
     */
    private $os;

    public function setOS( \model\StoreBundle\Entity\listOS $campaignOS )
    {
        $this->os = $campaignOS;
    }

    public function getOS()
    {
        return $this->os;
    }
} 
```

活动总结：

```
/**
 * model\StoreBundle\Entity\campaign
 *
 * @ORM\Table(name="campaign")
 * @ORM\Entity
 */
class campaign extends AbstractType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $builder->add('Name', 'text', array( 'label' => 'Campaign Name' ));
        //$builder->add('CampaignDescription', 'textarea', array( 'label' => 'Campaign Description' ));
        $builder->add('CampaignOperatingSystems', new campaignOS(), array( 'label' => 'Campaign OS' ));
/*      $builder->add('CampaignOperatingSystems', 'entity', array(
                'class' => 'modelStoreBundle:campaignOS',
                'property' => 'OS.OsName',
                'multiple' => 'true',
                'expanded' => 'true',
                'label' => 'Campaign OS'
        )); */
    }

    /**
     * @var integer $id
     *
     * @ORM\Column(name="campaign_id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    public function __construct()
    {
        $this->campaignOperatingSystems = new ArrayCollection();
    }
    /**
     * @ORM\OneToMany(targetEntity="campaignOS", mappedBy="campaign")
     * * , cascade={"persist", "remove"})
     * @var ArrayCollection $campaignOperatingSystems
     */
    protected $campaignOperatingSystems;

    public function addCampaignOperatingSystem(\model\StoreBundle\Entity\campaignOS $campaignOperatingSystems)
    {
        $this->campaignOperatingSystems[] = $campaignOperatingSystems;

        /* foreach( $campaignOperatingSystems as $campaignOS )
        {
            $campaignOS->setCampaign( $this );
        } */
        return $this;
    }

    public function removeCampaignOperatingSystem(\model\StoreBundle\Entity\campaignOS $campaignOperatingSystems)
    {
        $this->campaignOperatingSystems->removeElement($campaignOperatingSystems);
    }

    public function getCampaignOperatingSystems()
    {
        return $this->campaignOperatingSystems;
    }
} 
```

这是显示和持续的内容：

```
public function newAction( Request $request )
    {

        //create a campaign
        $campaign = new campaign();

        // get the form
        $form = $this->createForm( new campaign(), $campaign );

        if ($request->getMethod() == 'POST') {
            $form->bindRequest($request);

            if ($form->isValid()) {
                // perform some action, such as saving the task to the database
                //get our data manager
                $em = $this->getDoctrine()->getManager();

                //make it presistent
                $em->persist($campaign);

                //update the DB
                $em->flush();

                return $this->redirect($this->generateUrl('displayDB'));
            }
        }

        return $this->render('modelStoreBundle:DisplayDB:newCampaign.html.twig', array(
                'form' => $form->createView(),
        ));

    } 
```

这是堆栈跟踪：堆栈跟踪

```
in /vagrant/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php at line 753   
            $state = $this->getEntityState($entry, self::STATE_NEW);
            if ( ! ($entry instanceof $assoc['targetEntity'])) {
                throw new ORMException(
                    sprintf(
                        'Found entity of type %s on association %s#%s, but expecting %s',
                        get_class($entry),
at UnitOfWork ->computeAssociationChanges (array('fieldName' => 'campaignOperatingSystems', 'mappedBy' => 'campaign', 'targetEntity' => 'model\StoreBundle\Entity\campaignOS', 'cascade' => array(), 'orphanRemoval' => false, 'fetch' => '2', 'type' => '4', 'inversedBy' => null, 'isOwningSide' => false, 'sourceEntity' => 'model\StoreBundle\Entity\campaign', 'isCascadeRemove' => false, 'isCascadePersist' => false, 'isCascadeRefresh' => false, 'isCascadeMerge' => false, 'isCascadeDetach' => false), object(PersistentCollection)) 

in /vagrant/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php at line 651    
at UnitOfWork ->computeChangeSet (object(ClassMetadata), object(campaign)) 

in /vagrant/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php at line 383    
at UnitOfWork ->computeScheduleInsertsChangeSets () 

in /vagrant/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php at line 673    
at UnitOfWork ->computeChangeSets () 

in /vagrant/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php at line 273    
at UnitOfWork ->commit (null) 

in /vagrant/vendor/doctrine/orm/lib/Doctrine/ORM/EntityManager.php at line 355    
at EntityManager ->flush (null) 

in kernel.root_dir/cache/dev/jms_diextra/doctrine/EntityManager.php at line 362    
at EntityManager ->flush () 

in /vagrant/src/model/StoreBundle/Controller/DisplayDBController.php at line 65    
at DisplayDBController ->newAction (object(Request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:10:54.153

这些方法的签名

```
public function addCampaignOperatingSystem(\model\StoreBundle\Entity\campaignOS $campaignOperatingSystems)
public function removeCampaignOperatingSystem(\model\StoreBundle\Entity\campaignOS $campaignOperatingSystems) 
```

表示您希望在输入中输入一个**campaignOS**类型的**对象**，但您正在向其中一个对象传递一个ArrayCollection（我想是）。**`campaignOS`**

 **所以错误在于签名或 - 可能 - 进入你的逻辑。

也许你想要一个像这样的操作`setCompaignOperationSystem`？**

# db2 - 谁能帮我在 db2 中重写以下查询

> ID：13561408
> 
> 赞同：0
> 
> 时间：2012-11-26T08:52:47.973
> 
> 标签：db2, query-optimization

这是**查询**

```
select *
FROM 
WEBSS.P0022_INVENTORY_ACTIVITY_LOG I LEFT OUTER JOIN WEBSS.P0029_LOCATION L2 ON I.INVT_XFER_LOC_ID = L2.LOC_ID,
WEBSS.P0029_LOCATION L
WHERE 
I.LOC_ID = L.LOC_ID 
UNION ALL 
select *
FROM 
WEBSS.P0022_INVENTORY_ACTIVITY_LOG I LEFT OUTER JOIN WEBSS.P0029_LOCATION L2 ON I.LOC_ID = L2.LOC_ID,
WEBSS.P0029_LOCATION L
WHERE 
I.INVT_XFER_LOC_ID = L.LOC_ID; 
```

你能告诉我我能以有效的方式使用**第二个查询吗？**

当您查看查询时，您会发现条件有一个小的变化..所以我们真的需要进行两个查询 nwith union all..

我需要调整第二个查询，即..任何可能的方法来重写第二个查询以获得良好的性能..对此有什么帮助吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:49:45.903

我不是db2专家，但是sql语句一般都是一样的

*   UNION ALL 返回也重复
*   仅使用 Union 以不返回重复项
*   如果您不在联合中添加“（）”，它将完成它会按照您编写它们的顺序执行联合[http://msdn.microsoft.com/en-us/library/ms180026.aspx](http://msdn.microsoft.com/en-us/library/ms180026.aspx)
*   为什么你从 WEBSS.P0029_LOCATION L 中选择而不使用左连接？我会使用两个左连接，是吗

# php - 如何翻译 WordPress 模板名称？

> ID：13561410
> 
> 赞同：13
> 
> 时间：2012-11-26T08:52:54.667
> 
> 标签：php, wordpress, internationalization, wordpress-theming, po

例如，我知道如何通过使用 Poedit 生成 .po 和 .mo 文件来为主题和模板创建翻译。但是由于模板名称是在每个模板文件顶部的 PHP 注释中编写的，因此我无法翻译它。

WordPress 模板标题：

```
/**
 * Template Name: Three columns
 *
 * @package WordPress
 */ 
```

模板名称由 Wordpress 以某种方式解析，并用于在创建页面时填充模板选择下拉列表。

所以我的问题是：有没有办法翻译 WordPress 模板名称？WordPress 是否还会查找我可以在模板文件中设置的任何特定变量？还是不可能？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T09:00:30.887

我最近偶然发现了这一点。这是我解决这个问题的方法：

首先，将（如果您还没有）添加`Text Domain: mytext_domain`到您的`style.css`，`mytext_domain`您的主题的实际文本域在哪里。

然后在主题中的某处添加对翻译函数的虚拟调用（最好将其添加到模板名称声明下方，这样您就不会想知道为什么要放置它）：

```
/**
 * Template Name: Three columns
 *
 * @package WordPress
 */
__( 'Three columns', 'mytext_domain' ); 
```

这样做的原因是因为 WordPress 将您的模板名称传递给`translate()`函数，但由于翻译插件解析您的代码，他们不知道您的模板名称应该是 .po（或者是 .mo？）文件的一部分。`__()`修复该问题的虚拟调用。

将`Text Domain`声明添加到 style.css 的原因是因为这是 WordPress 在解析模板名称时查找主题的文本域的地方。

我不能给你确切的来源，因为我真的只是在核心代码周围摸索，直到我弄清楚它是如何工作的以及如何能够翻译我的模板名称。

PP：我不确定 Poedit 是如何工作的——如果你手动添加翻译，你可能不需要虚拟调用——只需在有和没有它的情况下进行测试，然后使用最适合你的 :)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-12T10:52:25.537

更好的方法：

1.  `Text Domain: theme-slug`如果您还没有这样做，请将标题添加到您的 style.css 文件中。

2.  通过查看 develop.svn 主干来查看官方 WordPress 开发人员包：http: [//develop.svn.wordpress.org/trunk/](http://develop.svn.wordpress.org/trunk/)

3.  在那里，您将找到一个名为 /tools/i18n 的目录。在那个目录中有一个`makepot.php`文件。您可以将其用于主题，如下所示：

`> php makepot.php wp-theme /path/to/your/theme/directory theme-slug.pot`

这将使用最新的 WordPress 代码为您创建 POT 文件。它从标头、所有 WordPress i18n 函数以及所有内容中获取字符串。这也意味着您不需要像其他答案所暗示的那样创建任何“假”字符串。

确保你也`svn update`每隔一段时间做一次，因为 i18n 工具和核心主干代码可以每隔一段时间更新一次新事物。

请注意，使用 i18n 工具时，它们需要在中继结帐中。您不能在文件系统中移动它们，因为它们依赖于 WordPress 函数来对文件进行一些解析，因此它们具有从树中备份到 WordPress 核心 /src 目录的相对包含路径。整个主干目录需要完好无损，工具才能正常工作。但是，可以取消配置主干目录，您不需要安装 WordPress，它只需要一些 WordPress 代码来正确解析文件。

# android - android-如何通过编码关闭我的手机？

> ID：13561427
> 
> 赞同：0
> 
> 时间：2012-11-26T08:53:47.253
> 
> 标签：android

我想通过编码关闭我的手机，请任何人帮助我。该应用程序所需的权限是什么以及所需的编码是什么。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:02:39.367

我知道关闭设备的唯一可能性是使用 root 命令：

```
try {
        String[] str ={"su","-c","reboot -p"};
        Process p = Runtime.getRuntime().exec(str);
        if(p.waitFor()==127 || p.waitFor()==255){
        //no root, error
        }
    } catch (Exception e) {

    } 
```

另一种可能性是查看 android 资源以查看系统关闭的对象，但要使其正常工作，您的应用程序需要位于 /system/app 文件夹中（因此您必须是 root 才能执行此操作）。如果你有 root 我的解决方案对于最终用户来说很简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:03:22.290

您可以使用 PowerManager 使其重新启动（这并不能保证它会重新启动 - 操作系统可能会取消它）：

[http://developer.android.com/reference/android/os/PowerManager.html#reboot(java.lang.String](http://developer.android.com/reference/android/os/PowerManager.html#reboot(java.lang.String) )

它需要 REBOOT 权限：

[http://developer.android.com/reference/android/Manifest.permission.html#REBOOT](http://developer.android.com/reference/android/Manifest.permission.html#REBOOT)

您是否还可以在尝试启用/禁用键盘保护时检查您的 logcat，并发布其中的内容？

# google-ads-api - 如何在 joomla 中将 Google Adwords Conversio 跟踪代码添加到 CK 表单？

> ID：13561428
> 
> 赞同：3
> 
> 时间：2012-11-26T08:53:47.340
> 
> 标签：google-ads-api

如何将 Google Adword 转换代码添加到 Joomla 网站？这里有一个使用CK表单扩展创建的表单，提交数据后它将进入感谢页面。我想在此页面中添加 Google Adword 转换跟踪代码。我怎么能这样做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:28:27.540

我不确定我的方法是否最准确和最简单。

我为不同的 ckforms 创建了许多“感谢页面”，并将每个页面用作每个表单中的结果页面 URL。

然后，我在模板索引文件中使用php代码来判断这个页面是否出来，如果显示一个“感谢页面”，则相关表单的跟踪代码将在正文结束之前输出。

像这样的代码：

```
<?php if(JRequest::getVar('id')==XXXXXX){?>
    <!-- Google Code for Contact Us Page Form Completion Conversion Page -->
    <script type="text/javascript">
    XXXXXXXXXXXXXXXX - your tracking code here - XXXXXXXXXXXXXXXXXXXXXXXX
    </noscript>
<?php }?> 
```

希望能帮到大家。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-11T16:05:54.283

我已经在 joomla 1.5 中尝试过这个并且它有效。这是您必须执行的步骤。

1) 转到站点菜单下的全局配置。

2) 将默认编辑器设为无，然后单击保存并关闭按钮。

3) 单击扩展菜单下的模块管理器。

4）点击新建按钮创建一个新模块。当您单击新建按钮时，屏幕上会出现一个弹出窗口，选择自定义 HTML。

5）给这个模块一个标题，设置位置调试，最后至少将模块分配给你要跟踪的页面。在自定义文本字段中，您可以粘贴您的 Adword 代码。

6）最后点击保存并关闭。这样，Joomla 将不会清理您的 Script 标签，直到您在更改默认编辑器后不会对其进行任何更改。您的 Google Adword 转换代码已成功设置。

之后，您可以再次进入全局配置并再次设置您喜欢的编辑器，保存并关闭。

这不是我的主意，我在这里找到的，[https://www.linkedin.com/pulse/20140729101150-347831273-how-to-add-google-adword-conversion-code-to-joomla-site](https://www.linkedin.com/pulse/20140729101150-347831273-how-to-add-google-adword-conversion-code-to-joomla-site)

# android - 如何在 Android 中制作 3Dmaps 和离线地图

> ID：13561432
> 
> 赞同：0
> 
> 时间：2012-11-26T08:54:01.550
> 
> 标签：android, google-maps, android-layout, map

我正在寻找 Android 中的 3d 地图和离线地图数据下载示例。

如果您知道任何示例，请在此处发布有关 3d 地图和离线地图的信息。

Android中是否有任何3d地图示例？这是我正在使用的代码 [https://github.com/nutiteq/hellomap3d](https://github.com/nutiteq/hellomap3d)

我在控制台中收到错误

```
 [2012-11-26 16:15:40 - Dex Loader] Unable to execute dex: Multiple dex files define Lcom/nutiteq/MapView$1;
     [2012-11-26 16:15:40 - HelloMap3DActivity] Conversion to Dalvik format failed: Unable to execute dex: Multiple dex files define Lcom/nutiteq/MapView$1; 
```

![在此处输入图像描述](../Images/b77c2d47aa0a9b519b1a977658f66e28.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:22:10.167

这是上述答案的解决方案..

只需删除 nutiteq-3dsdk-1.0.0pre.jar 文件它工作正常..

# android - setVisibility() 不刷新活动布局

> ID：13561436
> 
> 赞同：0
> 
> 时间：2012-11-26T08:54:46.063
> 
> 标签：android, visibility, android-theme, android-holo-everywhere

我在微调器项目选择上将按钮的可见性设置为 VISIBLE 或 GONE：-

```
selectUserTypeSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view,
                    int position, long id) {
                FilterUserType newUserType = FilterUserType.get(position);
                if(filter.userType != newUserType){
                    filter.userType = newUserType;
                    ScrollView mainScrollView =  (ScrollView) findViewById(R.id.mainLayout);
                    switch (newUserType) {
                    case AnyUser:
                    case CurrentUser:{
                        selectUserBtn.setVisibility(View.GONE);
                        break;
                    }
                    case SpecificUser:{
                        selectUserBtn.setVisibility(View.VISIBLE);
                        break;
                    }
                    default:
                        break;
                    }
                }
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {}

        }); 
```

这里的问题是我的视图在此操作后没有刷新，但是当我在页面上选择一个 EditText 并且键盘启动时......当时它会刷新并显示所需的行为。

我尝试将 switch-case 编辑为：-

```
switch (newUserType) {
    case AnyUser:
    case CurrentUser:{
        selectUserBtn.setVisibility(View.GONE);
        mainScrollView.invalidate();
        break;
    }
    case SpecificUser:{
        selectUserBtn.setVisibility(View.VISIBLE);
        mainScrollView.invalidate();
        break;
    }
    default:
        break;
    }
} 
```

但这也行不通

仅供参考，我`HoloEverywhere`在我的项目中使用主题，这个微调器来自 HoloEverywhere 小部件。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-06T16:43:15.120

我有同样的问题。holoeverywhere 中的微调器类在调用 onItemSelected 后更新其图形。所以它“覆盖”了你的布局更新。我找到的唯一解决方案是设置一个处理程序来更新 ui，在未来 1 秒执行。像这样：

```
Handler han = new Handler();
        han.postAtTime(new Runnable() {
            @Override
            public void run() {
                // UPDATE UI HERE
            }
        }, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-18T12:13:25.970

最简单的解决方案 anno 2022 是使用以下方法：

```
runOnUiThread(() -> mBoatSelectMenu.setVisibility(View.VISIBLE)); 
```

其中 mBoatSelectMenu 引用的 XML id 是所选元素的。

# c++ - 如果我使用 Array 而不是 Vector，有什么缺点吗？

> ID：13561438
> 
> 赞同：5
> 
> 时间：2012-11-26T08:54:48.347
> 
> 标签：c++, c, memory

我用 C++ 编写了一个 MPC 控制器，其中包括一个 Matrix 类，我将数据存储在一个数组中，并使用了 C 内存函数（memcpy、memset 等）。今天我用c++向量替换了数组，我用copy来移动内存等......我遇到了一个问题，通过用向量替换数组，使用向量控制信号的计算时间几乎翻了一番。

如果我使用 alloc、memcpy、memset、free ins c++ 代码有什么缺点吗？如果有的话，那些是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T08:59:31.887

使用手动内存管理意味着您有更多工作要做。因此你有更多的机会犯错误。

在 C++ 中，手动内存管理几乎总是错误的。如果你真的需要一个裸数组，你至少应该使用类似`boost::scoped_array`or的包装器`boost::shared_array`。[std::unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)也可用于管理数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T09:02:33.257

`Vector`在两个方面增加价值：

1.  提供数组中不存在的附加功能`C`，例如调整大小、检查当前大小等。您可以从其界面中找到更好的替代方案到您的自定义解决方案。
2.  捕获一些错误，例如寻址超出`vector`.

如果您对专有数据管理感到满意并对代码质量充满信心，则不需要`vector`. 但是请注意，这可能会带来一些软件问题，例如与`C`数组相比降低了数组的可维护性`vector`（例如，未来的代码可能会访问超出范围的值，即使您当前的代码没有）。

**编辑**：请参阅@Als 答案以了解您的情况（`std::array`）的可能替代方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T08:59:13.867

如果您要插入或删除许多对象，则向量有 1 个主要（相对而言）问题，除了在此处无关的向量的开头/中间插入的情况（数组具有相同的问题）。

如果您有大量的插入要完成，您通常会**`reserve`**在插入之前添加一个调用。称它为`vector.reserve(<best guess number of objects to be inserted>)`

这是因为，正如您所知，vector 根据需要分配内存。如果您一次插入大量项目，则可能涉及大量重新分配/复制，这可能会消耗大量时间。

这个问题还有**其他解决方案**。一种是**`std::deque`**在这种情况下使用效率更高一些，因为它不会每次都复制整个向量。或者使用**`std::array`**which 是围绕 C 数组的矢量样式包装器。

编辑：标题已更改，但此信息可能仍然有用..

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T09:03:48.000

如果您在编译时已经知道数组的大小，请使用数组，实际上`std::array`是更好的选择，但如果您需要动态数组，则最好使用`std::vector`.

> **如果我使用 Array 而不是 Vector，有什么缺点吗？**

数组很可能会为您提供更好的性能，因为不需要像`std::vector`.

但是，请注意，在大多数情况下，性能优势在大多数情况下并不显着，除非您的分析器指出这是一个问题。

> **如果我使用 alloc、memcpy、memset、free ins c++ 代码有什么缺点吗？如果有的话，那些是什么？**

您绝对不应该在 C++ 中使用 c 风格的内存分配和管理功能。缺点是：

*   使用 C++，除非无法避免，否则根本不应该使用动态分配。您应该使用智能指针。这正是 C++ 提供它们的目的。
*   此外，手动内存管理更容易出错。由于您使用的是 C++，因此您的代码的未来维护者可能只是*假设*您已经使用`new`并调用`delete`了`malloc`ed 指针，从而导致了 UB。
*   使用 c 风格函数的另一个缺点是，不像`new`它们不调用对象构造函数，这会使您的对象未初始化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:21:22.873

std::vector 和原始数组之间需要注意的一个区别是，std::vector 将在复制时为元素调用复制构造函数和复制赋值运算符，而对于原始数组，您必须自己这样做（例如，像“memcpy”不会调用复制构造函数/赋值运算符）。

如果数组的元素是原始类型或 POD 类型（POD 类型，Plain Old Data，基本上是一个只有公共数据成员而没有基类的类或结构），那没关系。

这种差异正是您使用原始数组获得更好性能的原因：进行的复制更少。C++11 通过右值引用和移动构造函数/赋值运算符最小化了这个问题，但它仍然不太可能击败手动处理的内存。

但无论如何，直接在代码的任何地方处理内存都是一个坏主意：它可能导致内存泄漏、非异常安全代码，并使代码过长和复杂。您可以创建自己的专门为 POD 类型设计的数组类，这样您将获得像 std::vector 这样的数组类的便利性和安全性以及原始数组的效率。

# objective-c - GCDAsyncSocket 错误

> ID：13561443
> 
> 赞同：1
> 
> 时间：2012-11-26T08:55:06.427
> 
> 标签：objective-c, ios, tcp, gcdasyncsocket

如果我想编译我的程序，我遇到了一些错误，我不知道发生了什么我想在我的 iPad 上编译它，我想在我的 iPad 上构建一个 TCP 服务器来从客户端读取数据。我是IOS编程的初学者。感谢帮助！西蒙 ![错误](../Images/4e3b4302a6be79d0085ad2ae1d09b680.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:02:21.517

我认为您没有添加 [安全框架](http://developer.apple.com/library/mac/#documentation/security/Reference/SecurityFrameworkReference/_index.html)。到您的项目。尝试添加并再次运行。

添加安全框架转到目标->构建阶段->将二进制文件与库链接，然后单击 (+) 符号并添加框架。

# php - PHP 可以在 web 上工作，但不能在本地 apache（linux mint）上工作

> ID：13561444
> 
> 赞同：0
> 
> 时间：2012-11-26T08:55:05.940
> 
> 标签：php, linux, apache, localhost

我试图在本地 apache 上运行[PHP 表单教程](http://www.html-form-guide.com/php-form/php-form-tutorial.html)，虽然它适用于我的 web apache，但它不适用于本地。在我的本地机器中，我收到以下错误：

> “注意：未定义的索引：第 2 行 /opt/lampp/htdocs/rw/form/myform1.php 中的 formSubmit”。

我已经附加了 lampp 用户和组，并尝试将权限从 644 设置为 777，但没有结果。有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:05:26.787

亚历克斯，这不是错误。这只是`notice`一种“警告”。这是因为您本地计算机中的 php.ini 设置设置为向您显示通知，以及`errors`.
您可以检查该值是否为`set`，以避免该通知。为此，您可以使用`isset()`：

> PHP 中的isset() 函数确定变量是否已设置且不为NULL。它返回一个布尔值，也就是说，如果设置了变量，则返回 true，如果变量值为 null，则返回 false。

**参考： http:** [//notesofgenius.com/how-fix-php-notice-undefined-index/](http://notesofgenius.com/how-fix-php-notice-undefined-index/)

**隐藏通知：**
现在您有一个`php.ini`设置`error_reporting`设置为包括`E_NOTICE`。`error_reporting`您可以通过设置来选择不显示通知`E_ALL & ~E_NOTICE`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T08:57:06.083

在从数组中获取变量之前检查变量是否已设置：

```
if(isset($_POST['formSubmit']) && $_POST['formSubmit']) 
```

# angularjs - AngularJS 和 Handlebars - 都需要或不需要

> ID：13561447
> 
> 赞同：38
> 
> 时间：2012-11-26T08:55:13.323
> 
> 标签：angularjs, handlebars.js

我想知道AngularJS是否用作前端的js框架，模板引擎是否需要单独的Handlebars？...在我看来，模板引擎功能可以使用 AngularJS 本身来完成！

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-26T12:26:02.320

你是对的，Handlebars 和 Angular 放在一起是没用的。

Handlebars 和 Angular 是完全不同的东西。

Handlebars 是一个模板引擎。你编写了一个花哨的模板字符串，给它一个 JSON 对象，然后它从数据中渲染出 HTML。没有数据绑定，没有更新，它只是一次渲染。

AngularJS 是一个 HTML 编译器和数据绑定器。Angular 将在 HTML 中查找角度模板标签，解释/编译它们，并使用给定控制器范围内的数据更改来更新 HTML。Angular 不仅会渲染一次 HTML 字符串，它还会编译 HTML，将其绑定到作用域，并在该作用域上的数据发生变化时进行更新。

[一张图片中的车把](http://docs.angularjs.org/img/One_Way_Data_Binding.png)

[AngularJS 数据绑定/模板在一张图片中](http://docs.angularjs.org/img/Two_Way_Data_Binding.png)

[AngularJS 的 HTML 编译器在一篇文章中](http://docs.angularjs.org/guide/compiler)

[AngularJS 的完整概述/指南，因此您可以了解它的实际工作原理](http://docs.angularjs.org/guide/)

# java - Hql查询绑定数据成员

> ID：13561448
> 
> 赞同：2
> 
> 时间：2012-11-26T08:55:14.257
> 
> 标签：java, hibernate, struts2, struts, hql

```
Query qry = session.createQuery("From RegistrationBean where ? = ?");
qry.setString(0,searchCriteria);
qry.setString(1,searchField);
searchList =(ArrayList<RegistrationBean>) qry.list(); 
```

`RegistrationBean`实体类有`userName, address, age`字段..我想`userName, address`使用上面的单个查询通过搜索条件等搜索用户...但是即使用户存在，查询也会返回零结果..

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:03:19.433

两个参数都设置为0位置，第二个不设置。位置参数应按顺序设置。

```
qry.setParameter(0,searchCriteria);
qry.setParameter(1,searchField); 
```

但是字段名称应该通过以下方式

```
String queryString = "from RegistrationBean as model where model." + propertyName   + "= ?";
Query queryObject = getSession().createQuery(queryString);
queryObject.setParameter(0, value);
return queryObject.list(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:03:11.153

尝试以下方式：

```
Query qry = session.createQuery("select * from RegistrationBean where :searchCrit = :searchValue");
qry.setString(":searchCrit",searchCriteria);
qry.setString(":searchValue",searchField);
searchList =(ArrayList<RegistrationBean>) qry.list(); 
```

像这样使用它而不是设置索引更合适（您的问题是您将两者都设置为 0），因为如果您更改查询中的某些内容，您可能需要在之后更改您的设置器。

# dependency-injection - 3 层架构中的 IOC

> ID：13561450
> 
> 赞同：0
> 
> 时间：2012-11-26T08:55:36.010
> 
> 标签：dependency-injection, inversion-of-control

我正在构建一个具有表示层 (PL)、业务逻辑层 (BLL) 和数据访问层 (DAL) 的 3 层架构。

我想在 3 个不同的物理项目中实现它，如下所示：

*   PL 项目 -> BLL Dll 参考
*   BLL 项目 -> DAL 参考
*   Dll DAL 项目 -> 无参考

通过定义接口和通过构造函数注入使用 DI 在 BLL 和 DAL 之间应用 IOC 的概念将改变架构如下

*   PL 项目 -> BLL Dll***参考，DAL Dll 参考（用于具体类型的 DI 到 BLL 对象的构造函数）***
*   BLL 项目 -> DAL 参考
*   DAL 项目 -> 无参考

理想情况下，我希望实现以下目标，同时通过 DI 维护我的 IOC。

*   PL 项目 -> BLL Dll 参考
*   BLL 项目 -> DAL Dll 参考
*   DAL 项目 -> 无参考

这怎么可能？

注意：我不想使用 IOC 容器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:13:42.940

您可以将 DI 的引导分为两部分。在 PL 项目中完成的第一项工作是为在 BL 中实现接口并由 PL 使用的对象设置 IOC 配置。第二部分，在 BL 项目中编写，将为在 DAL 中实现接口并由 BL 使用的对象设置 IOC 配置。然后，您需要让您的 PL 项目设置引导程序调用 BL 项目的引导程序，并进行自己的配置。如果您这样做，则不必在 PL 中引用 DAL。

# fluent-nhibernate - Fluent NHibernate 使用组件自动映射复合 ID

> ID：13561455
> 
> 赞同：3
> 
> 时间：2012-11-26T08:56:10.157
> 
> 标签：fluent-nhibernate, fluent-nhibernate-mapping

我有这种复杂的情况：一个国家/地区/州/城市的数据库，其主键由一个名为“Id”的列中的代码（nvarchar（3））加上“祖先”的所有关键列（地区/州/城市）。

所以表国家只有一个键列（Id），而城市有4个键列（Id、StateId、regionId、CountryId）。显然它们都是相关的，所以每个祖先列都是相关表的外键。

我的模型中有映射这种关系的实体。但它们都派生自一种称为 Entity<T> 的类型，其中 T 可能是简单类型（字符串、in 等）或复杂类型（实现键的组件）。Entity<T> 实现了一个称为 T 类型的 Id 的属性。

对于每个 db 表，如果它有一个复杂的键，我在一个单独的组件中实现它，它也覆盖 Equals 和 GetHashCode() 方法（将来我将在 Entity 基类中实现它们）。

所以我有一个 RegionKey 组件，它有 2 个属性（Id 和 CountryId）。我有外键和主键命名和类型的约定，没关系。我还为每个复杂实体映射 ovverrides。

为简单起见，我们只关注国家和地区表。他们来了：

```
public class Country: Entity<string>
{
    public virtual string Name { get; set; }
    public virtual IList<Region> Regions { get; set; } 
}

 public class Region: Entity<RegionKey>
{
    public virtual string Name { get; set; }
    public virtual Country Country { get; set; }
} 
```

和 RegionKey 组件：

```
namespace Hell.RealHellState.Api.Entities.Keys
{
  [Serializable]
  public class RegionKey
  {
    public virtual string Id { get; set; }
    public virtual string CountryId { get; set; }

    public override bool Equals(object obj)
    {
        if (obj == null)
            return false;
        var t = obj as RegionKey;
        if (t == null)
            return false;
        return Id == t.Id && CountryId == t.CountryId;
    }

    public override int GetHashCode()
    {
        return (Id + "|" + CountryId).GetHashCode();
    } 
  }
} 
```

下面是 AutoPersistenceModel 的配置：

```
 public ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
          .Database(
            MsSqlCeConfiguration.Standard
            .ConnectionString(x=>x.Is(_connectionString))
          )
          .Mappings(m => m.AutoMappings.Add(AutoMappings))
          .ExposeConfiguration(BuildSchema)
          .BuildSessionFactory();
    }

    private AutoPersistenceModel AutoMappings()
    {
        return AutoMap.Assembly(typeof (Country).Assembly)
            .IgnoreBase(typeof(Entity<>))
            .Conventions.AddFromAssemblyOf<DataFacility>()
            .UseOverridesFromAssembly(GetType().Assembly)
            .Where(type => type.Namespace.EndsWith("Entities"));
    }

    private static void BuildSchema(Configuration config)
    {
        //Creates database structure
        new SchemaExport(config).Create(false, true);
        //new SchemaUpdate(config).Execute(false, true);
    } 
```

这是 Regions 实体覆盖

```
public class RegionMappingOverride : IAutoMappingOverride<Region>
{
    public void Override(AutoMapping<Region> mapping)
    {
        mapping.CompositeId(x=>x.Id)
            .KeyProperty(x => x.Id, x=> x.ColumnName("Id").Length(3).Type(typeof(string)))
            .KeyProperty(x => x.CountryId, x => x.ColumnName("CountryId").Length(3).Type(typeof(string)));
    }
} 
```

现在，当我测试此映射时，我收到一条错误消息：关系中列的数据类型不匹配。

我也试过这个覆盖：

```
 public void Override(AutoMapping<Region> mapping)
    {
        mapping.CompositeId()
            .ComponentCompositeIdentifier(x=>x.Id)
            .KeyProperty(x => x.Id.Id, x=> x.ColumnName("Id").Length(3).Type(typeof(string)))
            .KeyProperty(x => x.Id.CountryId, x => x.ColumnName("CountryId").Length(3).Type(typeof(string)));
    } 
```

它几乎可以工作，但它创建了一个带有 varbinary(8000) 单列键的 Regions 表，这不是我想要的：

```
CREATE TABLE [hell_Regions] (
[Id] varbinary(8000) NOT NULL
, [Name] nvarchar(50) NULL
, [CountryId] nvarchar(3) NULL
);
GO
ALTER TABLE [hell_Regions] ADD CONSTRAINT [PK__hell_Regions__0000000000000153] PRIMARY KEY ([Id]);
GO
ALTER TABLE [hell_Regions] ADD CONSTRAINT [FK_Regions_Country] FOREIGN KEY ([CountryId]) REFERENCES [hell_Countries]([Id]) ON DELETE NO ACTION ON UPDATE NO ACTION;
GO 
```

我不知道如何处理它，因为在我看来一切都很好。

提前感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-27T09:20:25.290

好的，我设法解决了它：我必须将 CompositeId 类签名为 MAPPED，因为它是一个组件。所以这是我的新 RegionMappingOverride：

```
public class RegionMappingOverride : IAutoMappingOverride<Region>
{
    public void Override(AutoMapping<Region> mapping)
    {
        mapping.CompositeId(x=>x.Id)
            .Mapped()
            .KeyProperty(x =>x.Id,x=>x.Length(3))
            .KeyProperty(x => x.CountryId, x=>x.Length(3));
    }

} 
```

现在创建的sql是正确的：

```
create table hell_Countries (
    Id NVARCHAR(3) not null,
   Name NVARCHAR(50) null,
   primary key (Id)
)

create table hell_Regions (
    Id NVARCHAR(3) not null,
   CountryId NVARCHAR(3) not null,
   Name NVARCHAR(50) null,
   primary key (Id, CountryId)
)

alter table hell_Regions 
    add constraint FK_Region_Country 
    foreign key (CountryId) 
    references hell_Countries 
```

# java - 阅读 Spring 3 中的所有 bean

> ID：13561456
> 
> 赞同：0
> 
> 时间：2012-11-26T08:56:23.417
> 
> 标签：java, spring, spring-3

我需要阅读所有类的豆类`com.Foo`。我以前是怎么做的：

```
BeanFactory factory = new XmlBeanFactory(new ClassPathResource(file));
Map elements = BeanFactoryUtils.beansOfTypeIncludingAncestors((ListableBeanFactory) factory, com.Foo.class); 
```

事实证明，`XmlBeanFactory`现在已弃用。如何在 Spring 3.1 中读取给定类的所有 bean？

* * *

编辑：*新*工厂必须能够从任何文件、类路径或文件系统加载 bean 定义 XML。到目前为止，我使用的是 Spring`org.springframework.core.io.Resource`接口，它工作得很好（它有很多实现，适用于任何类型的文件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:41:03.253

将`Resource`资源位置作为构造函数参数的类是 [`GenericXmlApplicationContext`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/context/support/GenericXmlApplicationContext.html)

来自 javadoc：

> 具有内置 XML 支持的便捷应用程序上下文。这是 ClassPathXmlApplicationContext 和 FileSystemXmlApplicationContext 的灵活替代方案，可通过设置器进行配置，最终调用 refresh() 激活上下文。

至于它们并没有被弃用`beansOfTypeIncludingAncestors()`。`ListableBeanFactory`

# java - 如何使用 JSP 表达式标签编写条件运算符

> ID：13561458
> 
> 赞同：1
> 
> 时间：2012-11-26T08:56:26.987
> 
> 标签：java, jsp

我尝试使用“cdata”在 jsp 表达式 xml 标记中编写条件运算符逻辑。但它会产生错误。甚至尝试使用 (<) 但未解决

例如：10 < 15

任何机构都可以解决这个问题吗？请帮助我。

# android - 键盘出现时ActionBar隐藏

> ID：13561459
> 
> 赞同：5
> 
> 时间：2012-11-26T08:56:29.390
> 
> 标签：android, actionbarsherlock

我正在使用 ActionBarSherlock。`windowSoftInputMode`是`adjustPan`（我也尝试过`adjustResize`）`adjustNothing`。

我想`ActionBar`在键盘出现时保持在屏幕上，**但要**滑动我的布局（因此文本仍然可见）。

这是它看起来正确的方式： ![在此处输入图像描述](../Images/d47c77e6ce740174bd0bcbc89482f78f.png)

当键盘出现时： ![在此处输入图像描述](../Images/940c8715d608a00f3fffa239b76dadd4.png)

**问题是**：如何`ActionBar`在使用时保持可见`adjustPan`（因此`EditText`s 将始终可见）？

**注意** 我不能`ScrollView`用来握住我的`View`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:04:37.990

我发现，当您申请of时，可能会出现问题`adjustResize`（由于某种原因，它只是用来代替`adjustPan`）：`FLAG_FULLSCREEN``Window``Activity`

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
            WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

如果没有这条线调整大小工作就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:09:52.660

看起来布局向上滑动以为键盘腾出一些空间尝试：

将此添加到您的 manifest.xml：

```
<activity android:name=".YourActivity" android:label="@string/app_name" android:configChanges="keyboardHidden|orientation|keyboard" /> 
```

重要的部分是： **android:configChanges="keyboardHidden|orientation|keyboard"**

[android 文档 manifest.xml](http://developer.android.com/guide/topics/manifest/activity-element.html)

# c++ - 如何在 C++ 中创建从单个父进程并行执行的两个子进程？

> ID：13561461
> 
> 赞同：1
> 
> 时间：2012-11-26T08:56:38.193
> 
> 标签：c++, linux, fork

嗨，我正在 Linux 平台上使用 gin C++。我有一个父进程。我需要从这个父进程创建两个子进程，它们将并行执行一段时间。而父进程正在等待这两个进程完成，然后它完成其执行。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:58:40.937

使用`fork()`和`exec`函数族来启动子进程。父进程可以调用`waitpid`直到子进程存在。

执行链接： http: [//linux.about.com/library/cmd/blcmdl3_execvp.htm](http://linux.about.com/library/cmd/blcmdl3_execvp.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T08:58:48.193

使用 fork() 生成新进程；

然后在父进程中，您可以使用 waitpid() 等待它们都完成。

# visual-studio-2010 - 已在 MTM 2010 中执行单元测试

> ID：13561463
> 
> 赞同：1
> 
> 时间：2012-11-26T08:56:44.773
> 
> 标签：visual-studio-2010, testing

我已经通过测试构建了 VS 2010 解决方案，一切正常。

现在，在 MTM 2010 中引入这些自动化测试时，我应该再次执行它们吗？

我看不出他们已经被执行并成功了。

非常感谢您提前支持纳西姆

# svn - 如何获取特定属性值的修订号

> ID：13561465
> 
> 赞同：2
> 
> 时间：2012-11-26T08:56:47.393
> 
> 标签：svn

我需要获取特定自定义属性的修订号。例如，我在版本号 130 处设置了自定义属性“标签”，值为“测试”。

现在我需要通过使用svn命令行客户端（svn.exe，svnmucc.exe，svnlook.exe，.. .)。

我怎样才能得到 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:04:40.790

简短的回答 -**没办法**

更长的答案 - Subversion 从修订到属性（和价值）有很好的自然方式，但不是相反的方式，至少不需要大量的手工操作。SVN Book[特别注意一下](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.html)

> 尽管 Subversion 属性（或者更准确地说，它们的可用接口）具有所有实用性，但有一个主要缺点：虽然设置自定义属性是一件简单的事情，但后来发现该属性是一个完全不同的蜡球。
> 
> 尝试定位自定义修订属性通常涉及对存储库的所有修订执行线性遍历，询问每个修订，“你有我正在寻找的属性吗？” 将 --with-all-revprops 选项与 svn log 命令的 XML 输出模式一起使用以促进此搜索。
> 
> ...
> 
> 试图找到一个自定义的版本化属性也很痛苦，并且通常涉及到整个工作副本的递归 svn propget。

# c++ - 将在 STL 集合上操作的函数泛化到所有集合

> ID：13561466
> 
> 赞同：3
> 
> 时间：2012-11-26T08:56:51.890
> 
> 标签：c++, stl, c++11

我创建了这个模板函数来从 shared_ptr 集合中查找和删除项目

```
template<class T>
bool FindAndDelete(set<shared_ptr<T>>& collection, shared_ptr<T> item)
{
    auto foundItem = find(collection.begin(), collection.end(), item);
    if(foundItem != collection.end())
    {
        collection.erase(foundItem);
        return true;
    }
    else
    {
        return false;
    }
} 
```

问题：我怎样才能更概括它以涵盖所有集合？（矢量、列表等...）

例如

```
template<class K, class T>
bool FindAndDelete(K<shared_ptr<T>>& collection, shared_ptr<T> item); 
```

注意：我来自 C#，所以可能代码有点不对:) 请纠正我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T09:00:51.077

如果你想从容器中删除元素，那么这样的事情会起作用：

```
template<class K>
bool FindAndDelete(K& collection, typename K::value_type item); 
```

请记住，`value_type`地图的 是`std::pair<key_type, mapped_type>`，因此您可能需要为这些地图提供特殊版本，例如

```
template<typename T, typename K>
bool FindAndDelete(std::map<T,K>K& collection, 
                   typename std::map::<T,K>::key_type key); 
```

同样适用于`std::multimap`C++11`std::unordered_*`变体。这些容器具有`find`比 更有效的成员函数`std::find`，因此值得有专门的实现`findAndDelete`来利用这一点。

您还可以查看[std::remove_if](http://en.cppreference.com/w/cpp/algorithm/remove)和[擦除删除习惯用法](http://en.wikipedia.org/wiki/Erase-remove_idiom)作为非关联容器实现的替代方法。在您有重复的情况下，这可能会更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:00:02.510

```
template <template<typename> class K, typename T>
bool FindAndDelete(K<shared_ptr<T> > &collection, shared_ptr<T> item); 
```

# jquery - http请求没有问题时jquery ajax错误

> ID：13561472
> 
> 赞同：0
> 
> 时间：2012-11-26T08:57:09.923
> 
> 标签：jquery

我正在使用 jquery 进行 ajax 调用：

```
 // omitting the code for the options properties

    var options = {
        type: Type,
        url: Url,
        data: '{aString:"abc"}',
        contentType: ContentType,
        dataType: dataType,
        //processdata: ProcessData,
        success: function (msg) {
            ServiceSucceeded(msg);
        },
        error: ServiceFailed

    };
    function ServiceFailed(result) {
        alert('Service call failed: ' + result.status + '' + result.statusText);
    }

    $.ajax(options).done(function () {
      alert("success: " + msg);
    }); 
```

此调用的工作原理是调用 options 中定义的 url。端点是我托管的 wcf 服务，因此我已验证它是否按预期调用。

我用 fiddler 监控通话，我发现请求或响应没有任何问题。http 响应代码为 200 OK。

但是没有调用 done 中的函数。而是运行 ServiceFailed。为什么是这样？为什么没有调用 done()，为什么 jquery consi

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:00:36.660

我们只能根据您发布的内容进行猜测。

您正在`dataType`为 jQuery 指定 a （但没​​有告诉我们该数据类型是什么），这意味着您（可能）告诉它转换结果。例如，如果您的`dataType`变量是“json”，jQuery 将尝试将结果转换为 JSON；如果是“xml”，jQuery 会尝试将结果转换为 XML。

如果您正在观看呼叫发生并看到带有内容的 200 响应，这向我表明这是数据转换失败。

您可以很容易地找到有关错误发生原因的更多信息。使用此签名调用该`error`函数：

```
function error(jqXHR, textStatus, errorThrown) 
```

...因此您可以在其中放置一个断点并检查`textStatus`（根据您对结果的监控，它*应该*是 200，但如果它不是有用的信息）和`errorThrown`，这可能会让您知道出了什么问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:03:40.343

如果您的 Url 是远程的，那么您将需要使用 JSONP，这需要您将查询字符串添加到 Url`?callback?`

[jQuery ajax 在本地文件上工作但不能从远程 url 工作？](https://stackoverflow.com/questions/7566972/jquery-ajax-working-on-local-file-but-not-working-from-a-remote-url)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:04:34.317

你没有指定数据类型……关于服务器响应的期望……jQuery处理响应数据并将其作为第一个参数传递给你的成功回调函数（如果提供）。您可以在传递给 $.ajax 的唯一参数中将 dataType 指定为键/值对。支持的类型有：

```
"xml": Treat the response as an XML document that can be processed via jQuery.
"html": Treat the response as HTML (plain text); included script tags are evaluated.
"script": Evaluates the response as JavaScript and evaluates it.
"json": Evaluates the response as JSON and sends a JavaScript Object to the success callback. 
```

看看这个页面

[http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests](http://docs.jquery.com/Specifying_the_Data_Type_for_AJAX_Requests)

# javascript - javascript 创建的控制值未发布到服务器

> ID：13561473
> 
> 赞同：1
> 
> 时间：2012-11-26T08:57:21.293
> 
> 标签：javascript, asp.net, postback

在我的 Html 页面中，我使用 javascript 在循环中创建了一些文本框。

内部循环的代码片段：

```
var row = myTable.tBodies[0].insertRow(rowCount);
var cell1 = row.insertCell(0);
cell1.style.width = '40%';
var element1 = document.createElement("input");
element1.type = "text";
element1.className = 'textSub';
element1.id = 'txtOndNr' + rowNr;
cell1.appendChild(element1); 
```

当我按下提交按钮时，我似乎无法访问他们的值服务器端。我知道它们不是服务器控件等。但我希望通过 request.form("id") 访问它们。此外，当我检查萤火虫时，这些值不在帖子值中（控件位于表单标签内，这不是问题）。

有谁知道我做错了什么？

额外信息：ASP.NET 1.1，脚本位于 ASCX

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T08:58:50.950

Asp.net**仅将由 asp.net 创建的控制状态保持在视图状态中**。您需要使用`hidden field to store the state of newly created controls`并稍后访问服务器上的隐藏字段以获取状态/数据。

**在 html 中**

```
<input type="hidden" runat="server" id="hdnFornewlyCreated" /> 
```

**在 JavaScript 中**

```
document.getElementById('<%= hdnFornewlyCreated.ClientID %>').value = "stringcontainState"; 
```

**在后面的代码中**

```
string state = hdnFornewlyCreated.Value; // Use this to extract state and data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:31:30.420

我刚刚发现用于发送表单值的不是 ID，而是 NAME。如果我更改`element1.id = 'txtOndNr' + rowNr;`为，`element1.name = 'txtOndNr' + rowNr;`我可以使用 Request.form("txtOndNr0") 访问这些值。

检查 firebug http post 请求时看起来像这样

```
txtOndNr0   qsdf
txtOndNr1   
txtOndNr2   qsdf 
```

对我来说，这看起来像是一个更清洁的解决方案。

# javascript - 请在这里帮助我对 Javascript 进行反混淆

> ID：13561475
> 
> 赞同：-3
> 
> 时间：2012-11-26T08:57:36.723
> 
> 标签：javascript, packed

> **可能重复：**
> [反混淆 Javascript](https://stackoverflow.com/questions/2867027/deobfuscating-javascript)

有人可以帮我去混淆这个吗？我尝试了很多方法，但没有希望。

```
<script type="text/javascript">
//<![CDATA[
<!--
var x = "function f(x){var i,o=\"\",l=x.length;for(i=0;i<l;i+=2) {if(i+1<l)o+=" + "x.charAt(i+1);try{o+=x.charAt(i);}catch(e){}}return o;}f(\"ufcnitnof x({)av" + " r,i=o\\\"\\\"o,=l.xelgnhtl,o=;lhwli(e.xhcraoCedtAl(1/)3=!11)0t{yrx{=+;x+ll" + "=};acct(h)e}{f}roi(l=1-i;=>;0-i)-o{=+.xhcratAi(;)r}teru n.oussbrt0(o,)l};(f" + ")\\\"96\\\\,5\\\"00\\\\\\\\5\. /3>02\\\\\\\\qL)hn>\\\"\\\\\\\\\\\\BLc0bn37\\" + "\\0J\\\\21{81d02\\\\\\\\\\\\\\\\\\\\\\\\!jl:\\\\\\\\\\\\\\\\14\\\\0b\\\\| -" + "r^<36\\\\0>\\\\&.\\\"\\\\\\\\\\\\^ BPZ|d<\\\\n1\\\\02\\\\\\\\\\\"\\\\\\\\\\" + "\\)0\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\WjDCSW\\\\\\\\\\\\\\\\#" + "bskan10\\\\06\\\\03\\\\\\\\R<kr4m03\\\\\\\\mKZ,e?16\\\\0G\\\\.j^$7t02\\\\\\" + "\\|Su{\\\\ \\\\\\\\C\\\\s[ho\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\" + "05\\\\0{\\\\i` lPDgqcr1r02\\\\\\\\{]+jxv33\\\\0J\\\\5>r~^6nF&>g820\\\\0W\\\\" + "jzrgE nF7>\\\"\\\\\\\\\\\\n:\\\\\\\\yVtgn/27\\\\0Y\\\\ol\\\\k\\\\\\\";\\\\0" + "6\\\\0N\\\\<*8&6t02\\\\\\\\wYnke/20\\\\0W\\\\.rz=Jp14\\\\0>\\\\r4gj27\\\\0[" + "\\\\.vz=Lp17\\\\0>\\\\c4ix\\\\r3\\\\02\\\\\\\\`jdiE }Uja-`33\\\\0P\\\\bwkhD" + " 7G17\\\\\\\\vbiq32\\\\06\\\\03\\\\\\\\k%krth\\\\\\\\36\\\\0$\\\\i|on35\\\\" + "06\\\\03\\\\\\\\<%g44603\\\\\\\\\\\\r=\\\\b.lk21\\\\0M\\\\v>3vD {Ltjbm5^00\\" + "\\\\\\;.C2HA35\\\\0>\\\\b4ul21\\\\0L\\\\eyce\\\\b\\\\\\\\b\\\\k#{jrt\\\\\\\\" + "36\\\\0j\\\\v{ilPB|B<Z^/|L82tf6B03\\\\\\\\.>\\\\&\\\\\\\" \\\\6^03\\\\\\\\." + ">^h\\\\r\\\\\\\"0\\\\00\\\\\\\\zz>)0>02\\\\\\\\n_)}>>37\\\\01\\\\02\\\\\\\\" + "\\\"\\\\\\\\\\\\TOUVk.FGUG\\\\>\\\\\\\\b\\\\`ung!b34\\\\0B\\\\r3gg14\\\\0_\\" + "\\.j^$2/03\\\\\\\\0Wcl.u37\\\\0L\\\\{jwv6y02\\\\\\\\i_q wu1Q02\\\\\\\\~$vr\\" + "\\h\\\\\\\\b\\\\h#pc^h\\\\_\\\\\\\".\\\\jr7g02\\\\\\\\gLi~>A\\\\\\\\\\\\\\\\" + "%bjbmc\\\\r3\\\\02\\\\\\\\.fg<7z02\\\\\\\\3Mhzfm\\\\\\\\\\\\\\\\#bjkt{\\\\r" + "6\\\\03\\\\\\\\opqv0<02\\\\\\\\lb8R -14\\\\0\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\"" + "0\\\\vb^<36\\\\0>\\\\&.\\\"\\\\\\\\\\\\^ 36\\\\0>\\\\Z`\\\\p\\\\\\\\@\\\\jL" + "h2r^\\\"\\\\\\\\\\\\00\\\\0l\\\\)z >6^03\\\\\\\\.>\\\\&\\\\\\\" \\\\20\\\\0" + "b\\\\Rlf8Qt02\\\\0 \\\\&!\\\\ \\\\\\\\n\\\\\\\\\\\\{F$z=^33\\\\0N\\\\zg &\\" + "\\\\\\\\\\\\\\0E01\\\\\\\\8(40]636\\\\0$\\\\i|on35\\\\06\\\\03\\\\\\\\<%g44" + "603\\\\\\\\\\\\r=\\\\b.lk21\\\\0M\\\\v>3vD {Ltjbm\\\\\\\\\\\\\\\\#bjkt{\\\\" + "r6\\\\03\\\\\\\\R<06\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\03\\\\0{\\\\ot q\\\\\\\\" + "\\\\\\\\.b6>\\\\3\\\\\\\"\\\\\\\\\\\\\\\"3\\\\00\\\\\\\\{{cj^v34\\\\0B\\\\n" + "zie33\\\\0I\\\\R<g;7m03\\\\\\\\>Psznr27\\\\02\\\\00\\\\\\\\Rp^tQ>36\\\\0l\\" + "\\:ld<\\\\n2\\\\00\\\\\\\\.>\\\\&\\\\\\\" \\\\6^03\\\\\\\\.>l&\\\\\\\\\\\\\\" + "\\14\\\\0b\\\\j -rW<7S17\\\\\\\\a| *v*GYUC\\\\n\\\\\\\"L\\\\0B\\\\)\\\\\\\"" + "r\\\\34\\\\02\\\\00\\\\\\\\j >r^ 36\\\\0>\\\\&.\\\"\\\\\\\\\\\\^ 36\\\\0p\\" + "\\tR>^14\\\\0J\\\\\\\"\\\\\\\\\\\\Z`\\\\p\\\\\\\\@\\\\jL:!\\\"\\\\\\\\\\\\^" + " 36\\\\0>\\\\&.\\\"\\\\\\\\\\\\\\\\n\\\\\\\"L\\\\0BvbB/00\\\\01\\\\$.t^06\\" + "\\0[\\\\,j?Z6e01\\\\\\\\jG$.;^0H01\\\\\\\\8(40^#04\\\\0l\\\\jacm5^00\\\\\\\\" + "<,4cMb35\\\\0>\\\\ojon\\\\r6\\\\03\\\\\\\\~f\\\\7\\\\\\\":\\\\14\\\\0[\\\\|" + "z`i\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\03\\\\0{\\\\7b17\\\\\\\\sv4^03\\\\\\\\>B" + " 4\\\\\\\\\\\\\\\\[Cgd\\\\u\\\\\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\"4\\\\03\\" + "\\\\\\3Bwc7l03\\\\\\\\>HZ,jw13\\\\0J\\\\fApg7e03\\\\\\\\<Z;Rmg37\\\\0P\\\\z" + ">rs7n02\\\\\\\\02\\\\0p\\\\tR>^6Q03\\\\\\\\ll<:nd\\\\\\\\02\\\\0>\\\\&.\\\"" + "\\\\\\\\\\\\^ 36\\\\0>\\\\&.\\\\l\\\\\\\\4\\\\01\\\\\\\\ brj<-j1Rp^tQ>36\\\\" + "0l\\\\:ld<\\\\n2\\\\00\\\\\\\\.>\\\\&\\\\\\\" \\\\6^03\\\\\\\\.>l&\\\\\\\\\\" + "\\\\\\14\\\\0b\\\\| >r\\\\n\\\\\\\"L\\\\0BvtB/36\\\\0>\\\\&.\\\"\\\\\\\\\\\\" + "^ 36\\\\0p\\\\tR>^32\\\\0J\\\\21-8\\\\ \\\\\\\\b\\\\vjvc\\\"\\\\\\\\\\\\\\\"" + "\\\\\\\\\\\\03\\\\0{\\\\7~17\\\\\\\\ v\\\\\\\\\\\\\\\\%b08640H01\\\\\\\\.=p" + "<2o02\\\\\\\\}Q=.2033\\\\00\\\\01\\\\\\\\=|\\\\%\\\\\\\"d\\\\27\\\\0R\\\\}q" + "z&Op36\\\\0$\\\\c|rf21\\\\0\\\\\\\\\\\\\\\\<\\\\;Rlg07\\\\0J\\\\.m^$L034\\\\" + "0B\\\\c3ix\\\\r6\\\\03\\\\\\\\R<^$3=03\\\\\\\\rKpo\\\"\\\\\\\\\\\\\\\"\\\\\\" + "\\\\\\\\\"\\\\\\\\\\\\7R17\\\\\\\\g}h]37\\\\0L\\\\o{ b\\\\\\\\\\\\\\\\[Cos\\" + "\\h\\\\\\\"t\\\\13\\\\0N\\\\gp\\\\:\\\\\\\" \\\\\\\\nb\\\\Rj^h\\\\r\\\\\\\"" + "0\\\\00\\\\\\\\.1`t@<jZ&2\\\"\\\\\\\\\\\\^ 36\\\\0>\\\\&.\\\"\\\\\\\\\\\\0 " + "02\\\\\\\\lb8Rtf2Q00\\\\\\\\ASDT\\\\n\\\\\\\"L\\\\0B\\\\)\\\\\\\"r\\\\34\\\\" + "02\\\\00\\\\\\\\j >r^ 36\\\\0>\\\\&.\\\"\\\\\\\\\\\\^ 36\\\\0p\\\\tR>^14\\\\" + "0J\\\\\\\"\\\\\\\\\\\\Z`\\\\p\\\\\\\\0\\\\02\\\\\\\\lb8R\\\\-\\\\\\\"\\\\\\" + "\\\\\\\\\"[\\\\dp^$3=03\\\\\\\\rKpo\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\\\\"\\\\" + "\\\\\\\\n[rwr]33\\\\0W\\\\{lai\\\"\\\\\\\\\\\\\\\"\\\\\\\\\\\\03\\\\0{\\\\g" + "c l\\\\\\\\\\\\\\\\pbbkif26\\\\04\\\\03\\\\\\\\3Brcny\\\\\\\\36\\\\0j\\\\v{" + "ilJBzBlZ\\\\\\\\\\\\\\\\14\\\\0b\\\\Rj^r\\\\n\\\\\\\"L\\\\0BvtB/36\\\\0>\\\\" + "&.\\\"\\\\\\\\\\\\^ 36\\\\0p\\\\tR>^32\\\\0J\\\\21-8\\\"\\\\\\\\\\\\\\\"\\\\" + "\\\\\\\\16\\\\0-\\\\Z,t?26\\\\0Y\\\\kw\\\\n\\\\\\\"\\\\\\\\\\\\\\\"\\\\\\\\" + "\\\\\\\"6\\\\01\\\\\\\\,+?Znh\\\\\\\\wZ&y\\\\ \\\\\\\\1\\\\02\\\\\\\\w]h cm" + "27\\\\0H\\\\77\\\\1h\\\\q)1e03\\\\\\\\s_)gifQP }lcQj21\\\\0$\\\\r~hv\\\\\\\\" + "\\\\\\\\#btm q31\\\\0S\\\\2w^h\\\\r\\\\\\\"0\\\\00\\\\\\\\.1`t@<jZ&2\\\"\\\\" + "\\\\\\\\^ 36\\\\0>\\\\&.\\\"\\\\\\\\\\\\0 02\\\\\\\\lb8Rtj2Q00\\\\\\\\GLWT^" + "KXxTGTCu^M[^h\\\\r\\\\\\\"0\\\\00\\\\\\\\.1`t@<34\\\\0B\\\\jkdf27\\\\0S\\\\" + "R<l;7g02\\\\\\\\7R17\\\\\\\\&x\\\\ \\\\\\\\n\\\\\\\\\\\\{X$b=^20\\\\0Y\\\\b" + "w\\\\g\\\\\\\"h\\\\\\\\n2\\\\00\\\\\\\\.>\\\\&\\\\\\\" \\\\6^03\\\\\\\\.>l&" + "\\\\\\\\\\\\\\\\14\\\\0b\\\\| >r\\\\n\\\\\\\"L\\\\0B77\\\\1f\\\\4o03\\\\\\\\" + "\\\\J\\\\\\\".\\\\\\\\&\\\\\\\" \\\\6^03\\\\\\\\.> 8\\\\\\\\\\\\\\\\RE77\\\\" + "1g\\\\Ct6 00\\\\\\\\*N&?an23\\\\0L\\\\@q8&0t02\\\\\\\\xQZ,e?22\\\\04\\\\00\\" + "\\\\\\10\\\\00\\\\01\\\\\\\\[ZG$)T1I00\\\\\\\\27\\\\05\\\\02\\\\\\\\02\\\\0" + "0\\\\00\\\\\\\\14\\\\0M\\\\\\\\t7\\\\00\\\\\\\\10\\\\00\\\\01\\\\\\\\34\\\\" + "0[\\\\10\\\\09\\\\26\\\\0?\\\\\\\\\\\\\\\\\\\\<C040<5900\\\\\\\\4{00\\\\\\\\" + "\\\\j\\\\\\\"0\\\\!3%3mp22\\\\0u\\\\-a<>3j03\\\\\\\\1{0! 0\\\\(\\\\\\\\3\\\\" + "02\\\\\\\\LIY^YZ27\\\\04\\\\02\\\\\\\\@i]@2A02\\\\\\\\3s02\\\\\\\\CI^CEL07\\" + "\\04\\\\00\\\\\\\\PyMP7B17\\\\\\\\p{zt7417\\\\\\\\quyu;xt|77\\\\1y\\\\|!gdd" + "l'f<(pujw\\\\#\\\\\\\\C\\\\23\\\\03\\\\02\\\\\\\\22\\\\06\\\\01\\\\\\\\32\\" + "\\01\\\\03\\\\\\\\3W03\\\\\\\\07\\\\03\\\\03\\\\\\\\25\\\\0N\\\\XS01\\\\02\\" + "\\00\\\\\\\\10\\\\00\\\\03\\\\\\\\02\\\\00\\\\03\\\\\\\\36\\\\0F\\\\23\\\\0" + "0\\\\01\\\\\\\\00\\\\0t\\\\\\\\\\\\26\\\\01\\\\00\\\\\\\\16\\\\04\\\\00\\\\" + "\\\\\\\"\\\\f(;} ornture;}))++(y)^(iAtdeCoarchx.e(odrChamCro.fngriSt+=;o27=" + "1y%2;*=)yy)6+(9i>f({i+)i+l;i<0;i=r(foh;gten.l=x,l\\\"\\\\\\\"\\\\o=i,r va){" + ",y(x fontincfu)\\\"\")";
while (x = eval(x));
//-->
//]]> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:09:42.103

它分 3 步进行编码，如果您替换`while (x = eval(x));`为： `var res = eval(x);` `var res2 = eval(res);` `var res3 = eval(res2);` res3 将具有以下值： `document.writeln("<form action=\"http://ongkir.info/mobile/find_cost\" method=\"post\" accept-charset=\"utf-8\" target=\"_blank\">\r\n<table border=\"0\" style=\"font: Normal 14px Arial;\"> <tbody>\r\n<tr>\r\n <th align=\"left\" valign=\"middle\"><br />\r\nCEK TARIFF KURIR</th>\r\n <td><br />\r\n<img src=\"http://jne.co.id/images/favicon.ico\" width=\"50\" height=\"30\"/></td>\r\n </tr>\r\n\t\t\r\n\t\t<input type=\"hidden\" name=\"courier_type\" value=\"jne\"/>\r\n\r\n<tr>\r\n <td><br />\r\nFROM</td>\r\n <td><br />\r\n\t\t <input name=\"daerah_asal\" value=\"\" size=\"20\" style=\"border: 1px solid #3b6e22; color: #666666;\" type=\"text\" /></td>\r\n </tr>\r\n<tr>\r\n <td><br />\r\nTO</td>\r\n <td><br />\r\n<input name=\"daerah_tuju\" value=\"\" size=\"20\" style=\"border: 1px solid #3b6e22; color: #666666;\" type=\"text\" /></td>\r\n </tr>\r\n<tr>\r\n <td><br />\r\nWEIGHT (gram)</td>\r\n <td><br />\r\n<input name=\"weight\" value=\"1000\" size=\"20\" style=\"border: 1px solid #3b6e22; color: #666666;\" type=\"text\" /></td>\r\n </tr>\r\n<tr>\r\n <td><br />\r\n<span style=\"font-size: x-small;\">Copyright <a href=\"http://www.wahyuputra.web.id/\" target=\"_blank\">WAHYUPUTRA</a></span></td>\r\n <td><br />\r\n<input style=\"background: #6AA450; border: 1px solid #3b6e22; color: white; display: inline-block; font-size: 12px; height: 24px; line-height: 24px; margin-right: 10px; padding: 0px 6px; text-decoration: none;\" name=\"submit\" type=\"submit\" value=\"SUBMIT\" /></td>\r\n </tr>\r\n</tbody></table>\r\n</form>");`

# iphone - 如何在 iOS 中绘制带有两个 y 轴的条形图？

> ID：13561479
> 
> 赞同：0
> 
> 时间：2012-11-26T08:57:50.437
> 
> 标签：iphone, core-plot, bar-chart

我正在使用 core-plot 框架来绘制图表。但我需要用两个 y 轴绘制两个条形图。请帮助提供示例代码/示例链接。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:03:08.980

对于您的要求，此波纹管链接对您非常有用..在此示例中还有许多图形和图表可用

[MIMChart-库](https://github.com/ReetuRaj/MIMChart-Library)

和本教程与 core-plot 库

1.  [如何使用核心绘图部分绘制图形](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)

2.  [使用核心绘图来绘制线图](http://www.springtiger.co.uk/2010/10/03/using-core-plot-to-draw-line-graphs/)

我希望这对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T02:34:40.240

Core Plot 附带的*Plot Gallery*示例应用程序中的“Axis Demo”展示了如何执行此操作。您创建另一个轴并将其添加到`axes`轴集的数组中。辅助 y 轴可以与其他轴共享相同的绘图空间，或者如果它需要具有不同的比例，则可以分配到另一个绘图空间。

# javascript - 是否可以使用 FileReader 将网页打开到 base64？

> ID：13561481
> 
> 赞同：0
> 
> 时间：2012-11-26T08:57:55.833
> 
> 标签：javascript, google-chrome, google-chrome-extension, filereader

我已经有 `var img = new Image(); img.src = src-url;` 如何将它传递给 FileReader？PS：我不使用画布来获取base64，因为画布同样支持gif格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:17:25.637

[使用最新API](http://www.html5rocks.com/en/tutorials/file/xhr2/)的示例，与旧浏览器不兼容。

```
var xhr = new XMLHttpRequest();
xhr.open('GET', 'http://www.gravatar.com/avatar/40ca36f062050220082cd8c46b377ab4?s=32&d=identicon&r=PG', true);
xhr.responseType = 'blob';

xhr.onload = function(e) {
  var blob = new Blob([this.response], {type: 'image/png'});
  var reader = new FileReader();
  reader.onload = function() {
    console.log(reader.result)
  };
  reader.readAsDataURL(blob);
};

xhr.send(); 
```

# c++ - 使用visual studio express 2012解决语法错误“unexpected identifier dmap”

> ID：13561483
> 
> 赞同：0
> 
> 时间：2012-11-26T08:58:24.070
> 
> 标签：c++, microsoft-metro, visual-studio-2012

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

我正在使用 Visual Studio 2012 编译 Palabos。我收到以下错误：

警告 1 警告 C4346: 'plb::ExtractDynamicsChainFunctional2D::DMap' : 从属名称不是类型 c:\users\max\desktop\drawing\c++\palabos\src\dataprocessors\metastufffunctional2d.hh 100 1 绘图

错误 2 错误 C2061：语法错误：标识符 'DMap' c:\users\max\desktop\drawing\c++\palabos\src\dataprocessors\metastufffunctional2d.hh 100 1 绘图

导致此错误的代码是：

```
/* ******** ExtractDynamicsChainFunctional2D ************************************ */
template<typename T, template<typename U> class Descriptor>
ExtractDynamicsChainFunctional2D<T,Descriptor>::ExtractDynamicsChainFunctional2D (
        ExtractDynamicsChainFunctional2D<T,Descriptor>::DMap const& dynamicsMap_,
        pluint maxChainSize_ )
    : dynamicsMap(dynamicsMap_),
      maxChainSize(maxChainSize_)
{ } 
```

我对 C++ 的了解非常有限。有人可以解释导致此错误的原因，以及我如何解决它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:01:52.897

错误意味着：`ExtractDynamicsChainFunctional2D<T,Descriptor>::DMap`默认情况下*不是*类型，不能这样使用。如果你想让它被识别为一种类型，你必须放在`typename`它前面。

该问题仅发生在模板代码内部，您希望在其中访问另一个模板的成员类型。

# image - RestKit 图片上传参数

> ID：13561485
> 
> 赞同：0
> 
> 时间：2012-11-26T08:58:26.020
> 
> 标签：image, cocoa-touch, cocoa, post, restkit

我已经多次尝试使用 RestKit 启用 POST 图像文件传输，但到目前为止仅使用 curl 成功。工作代码如下，但它是同步的并且使 UI 无响应。

```
NSArray *arguments =
[NSArrayarrayWithObjects:assetScriptFullPath,
  @"-F", [NSString stringWithFormat:@"asset[file]=@%@", fullPath],
  @"-F", [NSString stringWithFormat:@"asset[user_id]=%d", user_id],
  @"-F", [NSString stringWithFormat:@"asset[checksum]=%s", [(NSString *)md5hash UTF8String]],
  nil];
NSTask *task = [NSTasklaunchedTaskWithLaunchPath:@"/usr/bin/curl"arguments:arguments]; 
```

在服务器上接收到 curl 调用，如下所示：

```
{
"asset"=>{
  "file"=>#<ActionDispatch::Http::UploadedFile:0xcfcc630
    @original_filename="IMG_6236.JPG",
    @content_type="image/jpeg",
    @headers="Content-Disposition: form-data; name=\"asset[file]\"; filename=\"IMG_6272.JPG\"\r\nContent-Type: image/jpeg\r\n",
    @tempfile=#<File:/tmp/RackMultipart20121117-21489-brm3b9>>,
  "user_id"=>"522",
  "checksum"=>"ab23bc492bac990d9022248315c743c1"
  }
} 
```

RestKit 的一次尝试是基于这篇文章（[RestKit Image Upload](https://stackoverflow.com/questions/8438170/restkit-image-upload)），但不会在资产中嵌套文件。我尝试将参数嵌套在“资产”中没有奏效或崩溃。

```
{
  "user_id"=>"522",
  "checksum"=>"ab23bc492bac990d9022248315c743c1",
  "file"=>#<ActionDispatch::Http::UploadedFile:0x883eb9c
    @original_filename="file",
    @content_type="image/jpeg",
    @headers="Content-Disposition: form-data; name=\"file\"; filename=\"file\"\r\nContent-Type: image/jpeg\r\n",
    @tempfile=#<File:/tmp/RackMultipart20121125-25702-ac8ck9>>
} 
```

使用下面 RestKit 高级教程中描述的方法，我要么无法获得所需的层次结构（资产中的文件），要么无法在不崩溃的情况下获得附加的图像数据。 [https://github.com/RestKit/RestKit/blob/master/Docs/MobileTuts%20Advanced%20RestKit/Advanced_RestKit_Tutorial.md](https://github.com/RestKit/RestKit/blob/master/Docs/MobileTuts%20Advanced%20RestKit/Advanced_RestKit_Tutorial.md) 此处描述了我尝试附加导致崩溃的图像的一种方法： [序列化 RestKit 中的嵌套图像（Rails 后端)](https://stackoverflow.com/questions/8203182/serialize-nested-image-in-restkit-rails-backend)

```
{
"asset"=>{
  "user_id"=>"522", 
  "file"=>"@/Users/dev/IMG_6236.JPG", 
  "checksum"=>"ab23bc492bac990d9022248315c743c1"
  }
} 
```

有什么建议吗？谢谢！

* * *

如果我可以改变服务器的期望，我可以让它与平面参数层次结构一起工作。但这不是解决方案，我无法更改层次结构。代码如下：

```
[params setFile:asset forParam:@"file"];
[params setData:[name dataUsingEncoding:NSUTF8StringEncoding] forParam:@"name"];
[params setData:[user_id dataUsingEncoding:NSUTF8StringEncoding] forParam:@"user_id"];
[client post:assetScriptPath params:params delegate:self]; 
```

这是服务器看到的，但我需要这一切都在上面的“资产”中。

```
{
  "file"=>#<ActionDispatch::Http::UploadedFile:0xcfcc630
    @original_filename="IMG_6236.JPG",
    @content_type="image/jpeg",
    @headers="Content-Disposition: form-data; name=\"file\"; filename=\"IMG_6272.JPG\"\r\nContent-Type: image/jpeg\r\n",
    @tempfile=#<File:/tmp/RackMultipart20121117-21489-brm3b9>>,
  "user_id"=>"522",
  "checksum"=>"ab23bc492bac990d9022248315c743c1"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:06:05.397

我们这样做的方式是将图像编码为 base64Encoding 并在服务器端对其进行解码。

像这样的东西。

```
NSData *imageData = [NSData dataWithData:imageForUpload];
NSString *encodedString = [imageData base64Encoding]; 
```

之后它就像一个普通的 RestKit 帖子一样工作。

# sublimetext2 - 在 Sublime Text 中关闭所有选项卡，但不关闭窗口

> ID：13561487
> 
> 赞同：63
> 
> 时间：2012-11-26T08:58:34.243
> 
> 标签：sublimetext2, sublimetext3, keyboard-shortcuts, sublimetext, shortcut

有没有办法在 Sublime Text 中一次性关闭所有选项卡，但在当前项目打开的情况下保留窗口？当我只想关闭所有打开的文件并开始`Cmd-W`一项一项的新任务时，这真的很烦人。如果我这样做`Cmd-Opt-W`，它将关闭所有选项卡和当前项目。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-11-26T09:19:16.123

感谢 Alex，结果很简单，Preferences > Key Bindings > User：

`{ "keys": ["super+shift+w"], "command": "close_all" }`

无需重新启动 Sublime，它立即工作。更棒的是，无需使用新的快捷方式，您仍然可以`Cmd-W`在所有选项卡消失后关闭 Sublime 窗口。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2012-11-26T09:11:25.690

文件菜单中有一个选项，但没有快捷方式：

*   文件 -> 关闭所有文件

**编辑**- 更改用户设置：

可以，打开 Preferences -> Key Bindings - User 并在 [] 之间粘贴以下内容：

`{ "keys": ["ctrl+alt+shift+w"], "command": "close_all" }`

然后使用 Ctrl、Alt、Shift 和 w 关闭所有选项卡。

您必须先重新启动 Sublime。

**注意：**对于 Sublime Text 3.2.2，Build 3211，您不需要重新启动 sublime text 来浪费您的时间。只需将代码放入 [ ]（如上所述），保存并关闭 Key Bindings - User 窗口。现在全部使用 Ctrl + Alt + Shift + W 打开的选项卡将在不退出 Sublime Text 的情况下关闭。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2014-03-08T02:42:32.740

这是我在 Mac Sublime Text 3 上设置的内容

```
1\. 转到 Sublime Text -> Preferences -> Key Bindings - User
2.添加以下绑定：
[
  …………
  { "keys": ["command+shift+w"], "command": "close_all" }
]
3\. 保存文件

```

现在，点击“Command+Shift+W”将关闭所有打开的选项卡。点击“Command+W”仅关闭当前选项卡。这与其他应用程序窗口的 Mac 快捷方式有点一致。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-12-18T13:25:23.400

默认情况下，关闭所有选项卡不会关闭窗口，但请注意：[Sublime Text 3](http://www.sublimetext.com/3)的最后一个版本 3059（2013 年 12 月 13 日）现在包括：

> 拖出最后一个选项卡时自动关闭窗口

它由以下设置管理：

```
// Set to true to close windows as soon as the last file is closed, unless
// there's a folder open within the window. This is always enabled on OS X,
// changing it here won't modify the behavior.
"close_windows_when_empty": false, 
```

* * *

> 我只想关闭所有打开的文件并开始新任务

在同一个 Sublime Text 3 build 3059 中，您还具有以下设置：

> 当最后一个文件关闭时，会自动创建一个新的临时文件

结合“文件->关闭所有文件”，可以帮助在新文件中快速启动。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-01-05T03:06:35.690

转到 Preferences>Key Bindings - User> 并添加以下行。

```
{ "keys": ["super+w"], "command": "close_file" } 
```

现在当你点击 cmd+w 时，只有文件会关闭而不是整个窗口，因为你的目标是“close_file”。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2017-07-05T13:53:52.103

最酷的方法是： `File - > Close All Tabs`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-05-05T09:11:25.153

如果您像我一样，并且实际上更喜欢右键单击选项卡并选择`Close All Tabs`命令，您可以：

1.  `View Package File`在 Sublime Text 中运行命令
2.  选择`Default/Tab Context.sublime-menu`
3.  添加行：

> { "command": "close_all", "args": { "group": -1, "index": -1 }, "caption": "关闭所有标签页" }

4.  节省。可能需要重新启动。

提示：

*   在 ST3 中测试，但我从中得到的文档是针对 ST2 的，所以应该没问题
*   如果不是最后一行，请不要忘记在行尾添加逗号
*   对我来说，无法编辑该`Tab Context.sublime-menu`文件，因为它应该在其中的文件夹丢失了。就是这样，创造它，对我来说是`$HOME\AppData\Roaming\Sublime Text 3\Packages\Default\`
*   也可以直接创建/编辑文件，而不是通过包查看过程

# sql - 比较嵌套 SELECT 中外部 SELECT 的计数？

> ID：13561488
> 
> 赞同：1
> 
> 时间：2012-11-26T08:58:35.630
> 
> 标签：sql, sql-server, sql-server-2008

我有这个 SQL 查询，

```
select * from (select * from .......) as a
where 1 = case when CountOfInnerSelect = 1 Then 1 ELSE ............ 
```

是否有可能我可以在外部 SELECT 中获得内部选择的计数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:06:10.967

是的 ：

```
select * from (select count(0) as cnt from .......) as a
where 1 = case when a.cnt = 1 Then 1 ELSE ............ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:09:45.217

您`WHERE Clause`没有多大意义，因为它在这里像过滤器一样应用。（即；类似于`WHERE myCount = 1`）

```
SELECT * FROM
(SELECT c1,c2,c3,..,Cn,COUNT(*) AS myCount
 FROM YourTable
 GROUP BY c1,c2,c3,..,Cn
) A
WHERE 1 = CASE myCount WHEN 1 THEN 1 ELSE... END 
```

# json - 在行动中，return json("Partial view name") 不会成功 ajax

> ID：13561489
> 
> 赞同：0
> 
> 时间：2012-11-26T08:58:36.400
> 
> 标签：json, asp.net-mvc-3, jquery

我的 js 文件中有 2 个函数用于 2 个按钮。当我尝试：

```
 return Json("_ThanksForLogin"); 
```

它不会进入 js 文件，也不会进入 ajax 的成功。单击按钮时，它只会在对话框中显示字符串“_ThanksForLogin”。我应该怎么办？

我的功能：

```
 $(function () {
    $("#loginBtn").click(function () {

        var user = getUser();

        // poor man's validation
        if (user.Username == null) {
            alert("please enter username.");
            return;
        }
        if (user.Password == null) {
            alert("please enter password.");
            return;
        }

        var json = $.toJSON(user);
        $.ajax({
            url: '/Members/MemberLoginPartial/LoginUser',
            type: 'POST',
            dataType: 'json',
            data: json,
            contentType: 'application/json; charset=utf-8',
            success:
                     function (address) {

                         $("#resultMessage").load(address);
                         setTimeout(function () { $("#resultMessage").dialog("close") }, 1000);
                         location.href = "/Members/Members/Index";
                     },
            close: function (event, ui) {
                location.href = "/Members/Members/Index"
            }
        });

    });
}); 
```

我想通过**返回 json()**将“_ThanksForLogin”部分视图的地址发送到这部分：

```
 success:
           function (address) {

             $("#resultMessage").load(address);
             setTimeout(function () { $("#resultMessage").dialog("close") }, 1000);
             location.href = "/Members/Members/Index";
          }, 
```

之后，对话框会自动关闭并重定向到用户配置文件。感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:22:37.960

`Json()`应该返回[JSON](http://www.json.org/js.html)，而不是 html。你需要的是

`return PartialView(_ThanksForLogin)`

这将返回`PartialView`名为“_ThanksForLogin”。

# html - css 内联块 vs 浮动

> ID：13561496
> 
> 赞同：8
> 
> 时间：2012-11-26T08:59:07.957
> 
> 标签：html, css-float, css

我正在做一些测试，`float`并且`inline-block`我注意到它们之间存在差异。

正如您从[**这个示例**](http://codepen.io/anon/pen/kwrtD)中看到的那样，如果我使用`display:inline-block`div，它们之间会有一点余量，但如果我使用`float:left`它，它会按预期工作。

请注意，我使用的是 Eric Meyer 的 Reset CSS v2.0。

是因为我做错了什么还是这种`inline-block`行为方式（在这种情况下它不是很可靠）。

**HTML**

```
<!DOCTYPE html>
<html>
<head>
  <title>How padding/margin affect floats</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div id="wrap">
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
        <div class="square"></div>
    </div>
</body>
</html> 
```

**CSS（不重置）**

```
#wrap{
  width: 600px;
    margin:auto;
}

.square{
    width: 200px;
    height: 200px;
    background: red;
    margin-bottom: 10px;
    /*display: inline-block;*/
  float:left;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T09:03:32.063

> 我正在对 float 和 inline-block 进行一些测试，我注意到它们之间存在差异。

无论资源给您暗示它们可能**不**相同的含义都是误导性的。它们是[完全不同的东西](http://www.ternstyle.us/blog/float-vs-inline-block)。

> div 之间有一点边距

那不是一个`margin`. `div`这是由 HTML 中 s之间的换行符产生的空格。一种解决方案是仅删除换行符，另一种解决方案是`font-size: 0`在包含元素上设置（从而导致不呈现空格）。

请注意，如果使用第二种方法，则需要`font-size`在 inner `div`s 上设置另一个，否则将不会呈现其中的文本。

希望有帮助！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T09:03:54.800

这是因为空间。如果您`font-size: 0`在容器元素上设置，间隙将消失（确保重置`font-size`内联块）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T09:03:42.723

给父元素`font-size: 0;`。

然后，将`font-size`孩子的 设置为`font-size: 12px`（或您的设计规定的任何大小），如下所示：

```
#wrap{
    font-size:0;
}
.square{
    font-size:12px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:15:42.550

据我了解，内联块元素将显示与其他内联对象相同的自动伪边距间距。而浮动元素被视为相对于文档的对象流完全独立（因此，没有烦人的间隙）。

抱歉，我无法给出更详细的答案，但这绝对是我之前遇到过的问题。对于它的价值，间距对于内联块元素应该是*可靠*的烦人，如果你试图在不被推到下一行的情况下尝试包含在父元素中的所有内容，你只需要记住补偿那些*伪边距。*

# c# - 所有任务在 C# 中都有父任务，对吗？

> ID：13561499
> 
> 赞同：0
> 
> 时间：2012-11-26T08:59:19.937
> 
> 标签：c#, task, parent

```
 static void Main(string[] args)
    {
        string x = string.Empty;
        Task t = new Task(() => {
            x = "dd";
        });
        Task<int> cT = t.ContinueWith<int>(gg => {
            return 23;
        });

        t.Start();
        Console.WriteLine(cT.Result);
        Console.ReadLine();
    } 
```

结果：23。是的我想要。所以，我可以说所有任务在 C# 中都有父任务，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:00:32.653

`t`没有父任务，所以不：你不能说“所有任务都有父任务”。那些是*延续*的将有一个父任务。

# java - 服务请求丢失了参数

> ID：13561505
> 
> 赞同：3
> 
> 时间：2012-11-26T08:59:39.030
> 
> 标签：java, web-services, tomcat, servlets, servlet-filters

[Tomcat中丢弃了与Request参数](https://stackoverflow.com/questions/13560023/request-parameters-are-dropped-in-tomcat)相关的问题

嗯......显然，即使是在某些服务器上最简单的请求也会丢失参数，而有些则可以。

```
@GET
@Path("/get-retrieve")
public String foo(){
    return ""+httpServletRequest.getParameterMap().size();
} 
```

所以返回值是`0`（零）。

**更新**：AccessLogValve 记录的请求包含参数

```
127.0.0.1 - - [26/Nov/2012:03:04:58 -0800] "POST /api/get-retrieve?x=y HTTP/1.1" 200 16 
```

所以，问题可能出在Tomcat的某个地方扔掉了那些参数......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T12:31:13.793

我有过一次，经过长时间的调查后发现问题出在Tomcat的 server.xml 中的连接器定义中：

`<Connector connectionTimeout="20000" maxHttpHeaderSize="9000" maxParameterCount="100" port="8080" protocol="HTTP/1.1" redirectPort="8443"/>`

查看“maxParameterCount”的定义，在我们的例子中它被设置为 0，这导致所有请求参数都被丢弃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T15:01:48.003

确保你没有将 httpServletRequest 传递给另一个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-15T13:34:08.563

我们遇到了这个问题，结果证明我们允许多个线程访问该`HttpServletRequest`对象。这是不允许的。它不是线程安全的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-26T10:32:32.780

基于链接问题中发布的代码

```
wr.type(MediaType.MULTIPART_FORM_DATA).post(ClientResponse.class, multipart); 
```

问题可能是您使用 注释您的方法`@GET`，但实际上您的客户发出了`POST`. 也许 JAX-RS 的某些实现仍将请求路由到您的方法，但由于方法不匹配而无法提取参数。一旦您比较了 GET 的样子，该算法确实非常不同：

```
GET /path/to/resource?id=foobar HTTP/1.1
Host: example.com 
```

和一个帖子：

```
POST /path/to/resource HTTP/1.1
Host: example.com
Content-Type: multipart/form-data, boundary=A9zfsdf0x;9ad

--A9zfsdf0x;9ad
content-disposition: form-data; name="id"

foobar 
```

所以，当你设计你的 RESTful API 时，你应该仔细选择方法，并在客户端和服务器上都使用它。

# android - PNG混合模式

> ID：13561507
> 
> 赞同：4
> 
> 时间：2012-11-26T08:59:47.657
> 
> 标签：android, image-processing, android-image

在 Photoshop 中有几种混合模式，例如：

*   颜色燃烧
*   乘
*   变暗
*   减轻
*   覆盖

（更多信息在这里：[http](http://help.adobe.com/en_US/photoshop/cs/using/WSfd1234e1c4b69f30ea53e41001031ab64-77eba.html) ://help.adobe.com/en_US/photoshop/cs/using/WSfd1234e1c4b69f30ea53e41001031ab64-77eba.html ）

例如，对于“**颜色加深**”模式，“查看每个通道中的颜色信息，并通过增加两者之间的对比度使基础颜色变暗以反映混合颜色。与白色混合不会产生任何变化”。

这是我的代码：

```
Bitmap blendBitmap = BitmapFactory.decodeStream(ctx.getAssets().open(filename));
Canvas canvas = new Canvas(srcBitmap);
canvas.drawBitmap(blendBitmap, 0, 0, null); // ?
p.recycle();
p = null; 
```

例如，是否可以应用 Color Burn 混合模式，而不是简单地将图像绘制在其他图像之上（就像在这个小代码中一样）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T11:19:20.727

这并不困难。

我使用 NDK（因为性能）来处理像素。混合模式的信息非常有用：[Photoshop 如何将两张图像混合在一起？](https://stackoverflow.com/questions/5919663/how-does-photoshop-blend-two-images-together)

我的最终解决方案是：

```
#define ChannelBlend_ColorBurn(A, B)  ((uint8_t) ((B == 0) ? B : max(0, (255 - ((255 -  
#define ChannelBlend_Alpha(A, B, O)    ((uint8_t) (O * A + (1 - O) * B))
#define ChannelBlend_AlphaF(A, B, F, O) (ChannelBlend_Alpha(F(A, B), A, O))

typedef struct {
    uint8_t red;
    uint8_t green;
    uint8_t blue;
    uint8_t alpha;
} rgba;

// Blend
JNIEXPORT void 
JNICALL Java_com_package_Filter_jniBlend(JNIEnv* env, jobject obj, jobject bitmapA,
    jobject bitmapB, jobject bitmapOut, jint mode) {

    // Properties
    AndroidBitmapInfo   infoA;
    void*               pixelsA;
    AndroidBitmapInfo   infoB;
    void*               pixelsB;
    AndroidBitmapInfo   infoOut;
    void*               pixelsOut;

    int ret;

    // Get image info
    if ((ret = AndroidBitmap_getInfo(env, bitmapA, &infoA)) < 0 ||
        (ret = AndroidBitmap_getInfo(env, bitmapB, &infoB)) < 0 ||
        (ret = AndroidBitmap_getInfo(env, bitmapOut, &infoOut)) < 0) {
        return;
    }
    // Check image
    if (infoA.format != ANDROID_BITMAP_FORMAT_RGBA_8888 ||
        infoB.format != ANDROID_BITMAP_FORMAT_RGBA_8888 ||
        infoOut.format != ANDROID_BITMAP_FORMAT_RGBA_8888) {
        return;
    }
    // Lock all images
    if ((ret = AndroidBitmap_lockPixels(env, bitmapA, &pixelsA)) < 0 ||
        (ret = AndroidBitmap_lockPixels(env, bitmapB, &pixelsB)) < 0 ||
        (ret = AndroidBitmap_lockPixels(env, bitmapOut, &pixelsOut)) < 0) {
        LOGE("Error! %d", ret);
    }

    int h = infoA.height;
    int w = infoA.width;
    int wh = w * h;

    int n;
    rgba* inputA = (rgba*) pixelsA;
    rgba* inputB = (rgba*) pixelsB;
    rgba* output = (rgba*) pixelsOut;

    rgba pA, pB;

    int x, y;
    for (y = 0; y < h; y++) {
        for (x = 0; x < w; x++) {
            n = y * w + x;

            pA = inputA[n];
            pB = inputB[n];

            float alpha = (float) pB.alpha / 255.0;

            output[n].red = ChannelBlend_AlphaF(pA.red, pB.red, ChannelBlend_ColorBurn, alpha);
            output[n].green = ChannelBlend_AlphaF(pA.green, pB.green, ChannelBlend_ColorBurn, alpha);
            output[n].blue = ChannelBlend_AlphaF(pA.blue, pB.blue, ChannelBlend_ColorBurn, alpha);
        }
    }

    // Unlocks everything
    AndroidBitmap_unlockPixels(env, bitmapA);
    AndroidBitmap_unlockPixels(env, bitmapB);
    AndroidBitmap_unlockPixels(env, bitmapOut);
} 
```

提高性能的小评论：在我为单个像素制作方程式之后，将值存储在某种缓存中以便下次在没有方程式的情况下更快地访问它会很好。

# c - 是否可以修改此 X-Macro 以构建包含数组的结构？如何？

> ID：13561509
> 
> 赞同：0
> 
> 时间：2012-11-26T08:59:48.720
> 
> 标签：c, arrays, x-macros

在 SO 上找到了这个非常有用的 Q/A：[有没有办法在 C 中循环使用具有不同类型元素的结构？](https://stackoverflow.com/q/1784782/1370465)

但是由于我对整个 X-Macro 的东西还很陌生，所以我想知道，是否以及如何将这个示例改编为带有数组的结构 - 如下所示：

```
typedef struct
{    
    uint8    Addr1[SIZEOF_ADDR];
    uint8    Addr2[SIZEOF_ADDR];
    uint8    Addr3[SIZEOF_ADDR];
} TEST; 
```

这是要适应的：

```
//--- first describe the structure, the fields, their types and how to print them
#define X_FIELDS \
    X(int, field1, "%d") \
    X(int, field2, "%d") \
    X(char, field3, "%c") \
    X(char *, field4, "%s")

//--- define the structure, the X macro will be expanded once per field
typedef struct {
#define X(type, name, format) type name;
    X_FIELDS
#undef X
} mystruct; 
```

我的出发点是这样的，但我很确定，格式必须是别的东西，或者必须被替换：

```
#define X_FIELDS \
    X(uint8, Addr1, "%02X") \
    X(uint8, Addr2, "%02X") \    
    X(uint8, Addr3, "%02X") 
```

地址类似于 {0x10,0x12,0x0A} - 大小相同。

*编辑：*

这是我当前如何使用这个结构的一个例子，没有 x 宏：

```
TEST test =  {{0x16,0xA4,0x3},
              {0x16,0xA4,0x2},
              {0x16,0xA4,0x1}};

printf("%02X",test.addr1[i]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:34:37.673

你有一个合理的开始...

```
#include <stdio.h>
typedef unsigned char uint8;
enum { SIZEOF_ADDR = 3 };

#define X_FIELDS \
    X(uint8, Addr1, "0x%02X") \
    X(uint8, Addr2, "0x%02X") \
    X(uint8, Addr3, "0x%02X")

//--- define the structure, the X macro will be expanded once per field
typedef struct {
#define X(type, name, format) type name[SIZEOF_ADDR];
    X_FIELDS
#undef X
} TEST;

extern void iterate1(TEST *test);
extern void iterate2(TEST *test);

//--- Print the values
void iterate1(TEST *test)
{
     const char *pad;
//--- "iterate" over all the fields of the structure
#define X(type, name, format) \
         printf("%s is ", #name); \
         pad = "{"; \
         for (size_t i = 0; i < sizeof(test->name); i++) \
         { \
              printf("%s" format, pad, test->name[i]); \
              pad = ","; \
         } \
         printf("}\n");
X_FIELDS
#undef X
}

// Alternatively, define a function `print_addr()`
static void print_addr(const char *format, const uint8 *addr, size_t addrsize)
{
    char pad = '{';
    for (size_t i = 0; i < addrsize; i++)
    {
        putchar(pad);
        printf(format, addr[i]);
        pad = ',';
    }
    putchar('}');
}

//--- Print the values using print_addr()
void iterate2(TEST *test)
{
    //--- "iterate" over all the fields of the structure
#define X(type, name, format) \
    printf("%s is ", #name); \
    print_addr(format, test->name, sizeof(test->name)); \
    printf("\n");
    X_FIELDS
#undef X
} 
```

（此代码被视为单个文件，已知可以在 Mac OS X 10.7.5 上的 GCC 4.7.1 下干净地编译。）

# php - 来自数据库列的图像未加载

> ID：13561510
> 
> 赞同：0
> 
> 时间：2012-11-26T08:59:57.177
> 
> 标签：php

代码：

```
<?php
    $page = $_GET['page'];
    $category = $_GET['cat'];
    $your_db = @ new mysqli("database","name","password");
    if (mysqli_connect_errno())
    {
    echo 'ERROR!
    '.mysqli_connect_errno()
    .' - Not connected : '.mysqli_connect_error().'
    ';
    die;
    }
    else
    {
    $db_connect = $your_db->select_db("databasename");
    if (!$db_connect)
    {
    echo 'ERROR CONNECT DATA BASE';
    die;
    }
    }
    echo '<p>';
    $query = "select distinct fldCity from info order by fldCity";
    $result = $your_db->query($query);
    $number_of_records = $result->num_rows;
    for ($i = 0; $i < $number_of_records; $i++)
    {
    $row = $result->fetch_assoc();
    echo '<a href="index.php?cat='.stripslashes($row['fldCity']).'">';
    echo stripslashes($row['fldCity']);
    echo '</a>&nbsp;/&nbsp;';
    }
    echo '</p>';
    if ($category)
    {
    $query = "select fldCompanyLogo, fldCompanyName, fldAddress, fldCity, fldProvince, fldPostalCode, fldMenuLink
    from info where fldCity = '$category' and length(fldCompanyLogo) > 0 order by fldCity";
    }
    else
    {
    $query = "select fldCompanyLogo, fldCompanyName, fldAddress, fldCity, fldProvince, fldPostalCode, fldMenuLink
    from info where length(fldCompanyLogo) > 0 order by fldCity";
    }

    $result = $your_db->query($query);
    $number_of_records = $result->num_rows;
    $num_pages = $number_of_records / 7;
    if (($number_of_records % 7) > 0 )
    {
    $num_pages++;
    }
    if (strlen($page) == 0)
    {
    $page = 0;
    }
    else
    {
    $page = $page * 4;
    }
    echo '<table border="0" cellspacing="10" cellpadding="10" style="border-collapse: collapse" bordercolor="#111111">';
    $row_num = 4;
    $result->data_seek($page);
    for ($i = $page; $i < $number_of_records; $i++)
    {
    if ($row_num <= 4)
    {
    echo '<tr>';
    for ($col_num = 0; $col_num < 4; $col_num++)
    {
    $row = $result->fetch_assoc();
    echo '<td>';
    show_image(stripslashes($row['fldCompanyLogo']),stripslashes($row['fldCompanyName']));
    echo '
    ';
    echo '<b><font face="Tahoma" size="2"><a href="mysite.ca/'.stripslashes($row['fldMenuLink']).'" target="_blank"></font>';
    echo '<font face="Tahoma" size="2"><a href="'.stripslashes($row['fldMenuLink']).'" target="_blank">';
    echo stripslashes($row['fldCompanyName']);
    echo '</a>';
    echo '
    ';
    echo stripslashes($row['fldCity']);
    echo '
    ';
    echo stripslashes($row['fldProvince']);
    echo '
    ';
    echo stripslashes($row['fldPostalCode']);
    echo '</td>';
    }
    $row_num++;
    echo '</tr>';
    }
    else
    {
    break;
    }
    }
    echo '</table>';
    for ($j = 0; $j < $num_pages; $j++)
    {
    $page_link = $j + 1;
    echo '<font face="Tahoma" size="4"><b><a href="index.php?page='.$j.'&cat='.$category.'">'.$page_link.'</a></b></font>&nbsp;';
    }
    echo '&nbsp;'.$number_of_records;
    function show_image($image_name)
    {
    if (file_exists("'$image_name'"))
    {
    $dim_img = getimagesize('/images/'.$image_name);
    echo '<img src="/images/'.$image_name.'" alt = '.$alt.' border=0 align="bottom"';
    echo 'width = '. $dim_img[100] .' height = ' .$dim_img[100] . ' />';
    }
    else
    echo 'Add your image here!';
    }
    ?> 
```

我完全迷失了，我找不到为什么数据库中的图像没有与脚本一起加载的错误。我用蓝色突出显示了我认为错误所在的区域。我只是在那个特定的地方找不到任何错误！我想要的只是从我的数据库中的列中获取并连接到“echo”的图像

没有显示图像，我找不到关于为什么图像没有显示的错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:04:15.253

尝试将图像转换为`Base64`字符串和`Base64`字符串转换为图像

还有为什么 `echo '';`你用这个它没有意义

# c# - C# winform 中 Crystal Reports 中的未知命名空间

> ID：13561513
> 
> 赞同：0
> 
> 时间：2012-11-26T09:00:03.603
> 
> 标签：c#, winforms, dll, crystal-reports, namespaces

我在 C# winform 中创建水晶报表。但在 report.cs 中，从命名空间获取错误：

```
****using CrystalDecisions.Shared;**
    **using CrystalDecisions.ReportSource;**
    **using CrystalDecisions.CrystalReports.Engine;****

    public class rptReport : **ReportClass** {

        public rptReport() {
        } 
```

我为这个命名空间添加了紧急 dll，但它得到了错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:05:50.650

看起来您没有安装 Crystal 运行时或没有添加对项目的引用。

# c# - 从组合框中获取特定项目

> ID：13561516
> 
> 赞同：0
> 
> 时间：2012-11-26T09:00:05.660
> 
> 标签：c#, asp.net

这是我的代码：

```
<asp:DropDownList ID="language" DataSourceID="TerminalLanguageDTS" DataValueField="TERMINAL_LANGUAGE_ID" DataTextField="TERMINAL_LANGUAGE_NAME" runat="server" Width="175px" > </asp:DropDownList> 
<asp:button id="edit" runat="server onClick="edit_Click" Text="Edit">

<asp:SqlDataSource ID="TerminalLanguageDTS" runat="server" ConnectionString="<%$ConnectionStrings:Kernel_dbConnectionString %>" SelectCommand="SELECT [TERMINAL_LANGUAGE_NAME],[TERMINAL_LANGUAGE_ID] FROM [terminal_languages]">
</asp:SqlDataSource> 
```

我想要做的是当用户点击编辑时，语言下拉列表中的特定语言应该是可见的，例如，如果下拉列表包含：英语法语和日语作为页面加载时的语言它应该只有英语和法语编辑点击

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:04:46.513

您可以做的是在编辑单击时按其值从下拉列表中删除一项：

```
ListItem myitem = language.Items.FindByValue("itemtoreomve");
if (myitem != null)
{
    language.Items.Remove(myitem);
} 
```

您也可以按文本删除项目：

```
 ListItem myitem = language.Items.FindByText("itemtoreomve"); 
```

# c# - .NET 4 exe 崩溃并出现 80131506 退出代码

> ID：13561518
> 
> 赞同：1
> 
> 时间：2012-11-26T09:00:29.050
> 
> 标签：c#, exception, .net-4.0, crash, exe

在过去的 6 个月（几乎 24/7）中，我在 5 台不同的机器上运行相同的控制台应用程序，并且没有出现任何问题。最近我买了 2 台新机器并运行应用程序，其中一台机器运行良好，但另一台总是在一段时间后崩溃，在 Windows 事件日志中我看到以下消息：

> 该进程因 IP 000007FEF0469450 (000007FEF0280000) 的 .NET 运行时中的内部错误而终止，退出代码为 80131506" 没有错误堆栈或其他任何内容

ps 在这个应用程序中，我使用 GCServer = true

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:29:30.127

我很好奇，[这里](https://stackoverflow.com/questions/334706/fatal-execution-engine-error-79ffee24-80131506)提到的安装 .Net 3.5 sp1 的修复是否也适用于您（运行 .net 4）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T07:39:34.877

好的，事实证明故障计算机中的一个内存芯片存在硬件问题。

# php - 查找 :-char 是否在 [ 和 ] 之间

> ID：13561519
> 
> 赞同：-1
> 
> 时间：2012-11-26T09:00:30.410
> 
> 标签：php, regex

我正在寻找一种解决方案来确定 :-char 是否被 [ 和 ] 包围。

我有一种语法，可以在模板中定义具有相应值的键。语法由 :-char 展开以识别键，但如果 :-char 在括号内，它也应该是有效的。基本上我的样本/案例是这样的：

`:key1[value]:key2[this:value should work too]`.

我正在寻找一种方法来查找 :-char 是否在括号内。我已经开始写出一个程序来解决这个问题，但是在写下一个电子脉冲的过程中，我脑海中的某个地方说“正则表达式..正则表达式”。但我对他们很陌生。有人可以帮我吗？

Ps 如果你对这个问题投了反对票，至少告诉我为什么你认为这是一个不好的问题。在我看来，这是一个正确的问题，我正在寻求帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:07:12.223

我将向您展示解析此问题的一般方法：[DEMO](http://regex101.com/r/eP7kY5)

`:(key\d)+\[([^\]]+)\]`

您需要做的是匹配之间的所有内容`[`，因此您必须告诉正则表达式您想要匹配所有不是这样的东西，`]`而不是使用...`.*``]``[^\]]`

您可以查看演示以获取更多说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:04:57.050

```
preg_match('~\[[^\]]*:~', $str) 
```

如果括号内`1`有一个字符，这将返回。`:`正则表达式假定括号总是成对的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:09:03.000

要查找 :-char 是否在 [] 内，只需在您的正则表达式中添加以下内容：

```
preg_match('/\[:-char\]/', $string); 
```

这将匹配所有用 [ ] 包裹的 ":-char"。请注意 [ ] 字符是正则表达式模式的一部分，因此应该被转义。如果你想找到所有的“:-char”，但是看看它是否有[]，那么你去

```
preg_match('/(\[)?:-char(\])?/', $string, $var); 
```

然后 () 中所有内容的结果将被捕获到`$var`. 并且从它的结构可以判断它是否被 [ ] 包裹了

为了更好地理解正则表达式的工作原理，我建议使用标准 PHP 文档： http: [//php.net/manual/en/book.pcre.php](http://php.net/manual/en/book.pcre.php)

# sharepoint-2010 - CAML 查询生成器/构建器

> ID：13561526
> 
> 赞同：1
> 
> 时间：2012-11-26T09:01:04.797
> 
> 标签：sharepoint-2010

我正在寻找可以将输入作为字段/值/运算符/条件并返回具有两种组合（AND/OR）的caml查询字符串的sharepoint caml查询构建器函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:06:54.363

看看这些工具

[http://www.codeproject.com/Articles/458008/CAML-Query-Builder](http://www.codeproject.com/Articles/458008/CAML-Query-Builder)

[http://spcamlviewer.codeplex.com/](http://spcamlviewer.codeplex.com/)

[http://spcamlqueryhelper.codeplex.com/](http://spcamlqueryhelper.codeplex.com/)

希望能帮助到你 ：） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T02:36:42.430

U2U 工具链接现在好像坏了：

我发现了这个：

关于：[http ://www.sjoukjezaal.com/blog/tool-sharepoint-developers-caml-designer/](http://www.sjoukjezaal.com/blog/tool-sharepoint-developers-caml-designer/)

下载： [http ://sharepoint.biwug.be/SitePages/Caml_Designer.aspx](http://sharepoint.biwug.be/SitePages/Caml_Designer.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-16T12:13:55.600

对于 C#，请查看[Camlex.NET：http://camlex.codeplex.com/](http://camlex.codeplex.com/)

# php - Apache Tomcat/7.0.21 - 错误报告，同时尝试登录 phresco 框架

> ID：13561527
> 
> 赞同：0
> 
> 时间：2012-11-26T09:01:04.573
> 
> 标签：php, android, iphone

我正在尝试运行 Phresco 框架，并且我正在登录屏幕（我已输入用户名作为用户名和密码作为密码），因为它们在视频中显示，但是每当我点击登录按钮时，我总是遇到以下错误：

```
Apache Tomcat/7.0.21 - Error report 
```

我已经安装了 Apache Tomcat 7.0.32，所以请专家告诉我我需要做什么来解决这个问题，在此先感谢。

得到这个：

```
HTTP Status 500 -

type Exception report

message

description The server encountered an internal error () that prevented it from fulfilling this request.

exception

java.lang.reflect.InvocationTargetException
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)

root cause

java.lang.NoClassDefFoundError: Could not initialize class com.sun.xml.bind.v2.model.impl.RuntimeModelBuilder
    com.sun.xml.bind.v2.runtime.JAXBContextImpl.getTypeInfoSet(JAXBContextImpl.java:473)
    com.sun.xml.bind.v2.runtime.JAXBContextImpl.<init>(JAXBContextImpl.java:319)
    com.sun.xml.bind.v2.runtime.JAXBContextImpl$JAXBContextBuilder.build(JAXBContextImpl.java:1170)
    com.sun.xml.bind.v2.ContextFactory.createContext(ContextFactory.java:145)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:210)
    javax.xml.bind.ContextFinder.find(ContextFinder.java:368)
    javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:574)
    javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:522)
    com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getStoredJAXBContext(AbstractJAXBProvider.java:191)
    com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getJAXBContext(AbstractJAXBProvider.java:184)
    com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getUnmarshaller(AbstractJAXBProvider.java:136)
    com.sun.jersey.core.provider.jaxb.AbstractJAXBProvider.getUnmarshaller(AbstractJAXBProvider.java:119)
    com.sun.jersey.core.provider.jaxb.AbstractListElementProvider.readFrom(AbstractListElementProvider.java:214)
    com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:553)
    com.sun.jersey.api.client.ClientResponse.getEntity(ClientResponse.java:523)
    com.sun.jersey.api.client.WebResource.handle(WebResource.java:686)
    com.sun.jersey.api.client.WebResource.access$300(WebResource.java:74)
    com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:508)
    com.photon.phresco.framework.impl.ServiceManagerImpl.getApplicationTypesFromServer(ServiceManagerImpl.java:268)
    com.photon.phresco.framework.impl.ServiceManagerImpl.initCache(ServiceManagerImpl.java:105)
    com.photon.phresco.framework.impl.ServiceManagerImpl.<init>(ServiceManagerImpl.java:85)
    sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    java.lang.Class.newInstance0(Class.java:355)
    java.lang.Class.newInstance(Class.java:308)
    com.photon.phresco.framework.PhrescoFrameworkFactory.constructClass(PhrescoFrameworkFactory.java:85)
    com.photon.phresco.framework.PhrescoFrameworkFactory.getServiceManager(PhrescoFrameworkFactory.java:106)
    com.photon.phresco.framework.impl.ProjectAdministratorImpl.doLogin(ProjectAdministratorImpl.java:637)
    com.photon.phresco.framework.actions.Login.login(Login.java:99)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    java.lang.reflect.Method.invoke(Method.java:597)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:452)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:291)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:254)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:263)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:207)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:248)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)

note The full stack trace of the root cause is available in the Apache Tomcat/7.0.21 logs.
Apache Tomcat/7.0.21 
```

# ruby-on-rails - Best_in_place display_with 没有找到帮手

> ID：13561533
> 
> 赞同：7
> 
> 时间：2012-11-26T09:01:40.603
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, best-in-place

关于如何在 Best In place 中使用 display_with 选项的文档并不多，但我试图让 Best_in_Place 以精简形式（mm/dd/yyyy）显示日期。我的数据库（sqlserver）以日期时间格式存储日期，我使用此命令显示该字段：

```
<%= best_in_place(@production, :budget_approval_internal,  type: :date, :nil => "[Not    set]")  %> 
```

单击 gem 时，按预期工作，放置一个日历控件以选择日期，然后以简短形式显示它。但是当我按下刷新时，我得到的日期如下：

```
 2013-12-04 00:00:00 UTC 
```

所以我想我可以使用 :display_with 选项来使用一个看起来像这样的助手：

```
def format_date(my_date)
   my_date.strftime('%m/%d/%Y')
end 
```

我把它放在 application_helper.rb 模块中，然后尝试了这个：

```
 <%= best_in_place(@production, :budget_approval_internal,  type: :date, :display_with => :format_date, :nil => "[Not    set]")  %> 
```

但我说错了：

“找不到助手 format_date。有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T14:39:51.240

我遇到了同样的问题，并使用了 zubin 完成的 best_in_place 的拉取请求中的一个小片段。

> `<%= in_place_edit(@term, :starts_on, display_with: lambda { |dt| ldt(dt) }, html_attrs: {datepicker: "true"}) %>`

这里的 ldt 是采用日期对象并转换为我想要的格式的方法。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:02:08.157

也许您可以覆盖生产模型的 setter 方法`budget_approval_internal`。这不是最好的解决方案，但如果您仅在此模型中使用 best_in_place 就可以了。

```
class Production
  def budget_approval_internal
    read_attribute(:budget_approval_internal).strftime("dd/mm/YY")
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:39:00.630

您应该`include ApplicationHelper`在控制器中或将方法添加到适当的帮助文件中。
编辑：您需要打开 ActionView::Base 类并添加您的方法

```
module ActionView  
    class Base  
        def format_date(rec)  
            rec.strftime('%m/%d/%Y')  
        end  
    end  
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-29T17:21:35.147

我自己也遇到了类似的问题。对于像您这样的简单格式化方法，您应该只使用`:display_as`而不是`:display_with`.

您在视图中的 b_i_p 代码将使用`:display_as => format_date`.

然后将该`format_date`方法放入您的模型中。删除参数并重写方法如下：

```
def format_date
   self.my_date.strftime('%m/%d/%Y')
end 
```

无需使用 ApplicationHelper。

# android - android上OpenCV drawContours的奇怪问题

> ID：13561537
> 
> 赞同：1
> 
> 时间：2012-11-26T09:01:47.123
> 
> 标签：android, opencv, draw

我偶然发现了一个关于 Android 上 OpenCV drawContours 的奇怪问题。有时，（没有明显的模式）函数 drawContours 会产生这样的结果：

[drawContours http://img17.imageshack.us/img17/9031/screenshotgps.png](http://img17.imageshack.us/img17/9031/screenshotgps.png)

虽然它显然应该只产生白色部分。

把它放在上下文中：我使用精明算法检测边缘，然后我找到轮廓

```
Imgproc.findContours(dil, contours, dummy, Imgproc.RETR_LIST, Imgproc.CHAIN_APPROX_SIMPLE); 
```

然后我选择几个符合某些要求的轮廓并将它们添加到列表中：

```
List<MatOfPoint> goodContours = new ArrayList<MatOfPoint>(); 
```

之后我随机选择一个轮廓并在垫子上绘制它（用白色填充）并将其转换为 android Bitmap：

```
Mat oneContour = new Mat(orig.rows(), orig.cols(), CvType.CV_8UC1);
int index = (int) (Math.random() * goodContours.size());
Imgproc.drawContours(oneContour, goodContours, index, new Scalar(255, 255, 255), -1);
Bitmap oneContourBitmap = Bitmap.createBitmap(oneContour.cols(), oneContour.rows(), Bitmap.Config.ARGB_8888);
Utils.matToBitmap(oneContour, oneContourBitmap); 
```

大多数时候我得到了我所期望的：纯黑色背景上的白色补丁，但有时我得到了上面的结果。我在这里完全不知所措。我怀疑可能存在一些内存泄漏，但我尝试在所有 Mat 不再有用后立即释放它们（我也尝试在所有发生但没有效果的函数结束时释放它们）但我无法来查明问题的根源。

有没有人有类似的问题？

我首先在 OpenCV 2.4.0 上发现了这一点，但在 2.4.3 上保持不变。

任何建议表示赞赏。

# c++ - 为什么调用不接受带参数的函数的函数在 C 中编译但在 C++ 中不编译

> ID：13561538
> 
> 赞同：16
> 
> 时间：2012-11-26T09:01:47.170
> 
> 标签：c++, c, gcc, g++

假设我有这个功能：

```
void func() {} 
```

当我`func`使用某些参数（例如`func(132)`）调用时，`C++`编译器会产生错误，而`C`编译器不会。

在这种情况下，两个编译器有什么区别？`C++`产生这个错误有什么优点/缺点？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-26T09:04:04.843

没有优点或缺点。C 支持这一点，以便与 1980 年代的 K&R C 兼容。如果您仍在使用 1980 年代编写的代码，您可能会喜欢此功能。如果您想从编译器获得更好的诊断，您可能不喜欢此功能。

```
void func(); 
```

在 C 中，这意味着`func`采用*未指定*的参数。

如果需要指定函数*不*带参数，可以这样写：

```
void func(void); 
```

在 C++ 中，这两个原型是相同的。（在 C 中，只有第二个是原型。）如果您使用 GCC/Clang 的`-Wstrict-prototypes`选项进行编译，您将收到`void func();`在 C 中使用的警告，这是您应该做的。

这只是关于**函数声明。** 在这两种语言中，以下函数**定义**是相同的：

```
// These two are the SAME
void func() { }
void func(void) { }

// These two are DIFFERENT
void func();
void func(void); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T09:03:58.077

在 C++ 中，该函数没有参数。在 C 中，它意味着不确定数量的参数。

这是 C 语言早期的保留，其中每个函数都返回 an `int`，并且对于传递的参数要轻松得多。

# android - 如何滑动列表视图的特定行？

> ID：13561542
> 
> 赞同：1
> 
> 时间：2012-11-26T09:02:02.630
> 
> 标签：android

我想刷一个列表视图的每一行。我不知道该怎么做。在这里，我将图像和文本放在基本 adpater 中。如果我滑动特定项目更改文本框文本并更改 imagview 中的图像。

如果我刷卡意味着没有采取任何行动。

```
public View getView(int position, View convertView, ViewGroup parent)
{
/*  bitmap=new Bitmap[itemDetailsrrayList.size()];

    try 
    {

            URL url = new URL(itemDetailsrrayList.get(position).get("image"));
            HttpGet httpRequest = null;
            httpRequest = new HttpGet(url.toURI());
            HttpClient httpclient = new DefaultHttpClient();
            HttpResponse response = (HttpResponse) httpclient.execute(httpRequest);
            HttpEntity entity = response.getEntity();
            BufferedHttpEntity b_entity = new BufferedHttpEntity(entity);
            InputStream input = b_entity.getContent();
             bitmap[position] = BitmapFactory.decodeStream(input);

    } catch (URISyntaxException e)
    {
        Log.e("dd","d");
        e.printStackTrace();
    } catch (IOException e) 
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }*/

    ViewHolder holder;
    if (convertView == null) {
        convertView = l_Inflater.inflate(R.layout.item_details_view, null);
        holder = new ViewHolder();
        holder.txt_itemName = (TextView) convertView.findViewById(R.id.name);
        holder.txt_itemDescription = (TextView) convertView.findViewById(R.id.cityState);
        holder.txt_itemPrice = (TextView) convertView.findViewById(R.id.phone);
        holder.itemImage = (ImageView) convertView.findViewById(R.id.photo);
        holder.itemimmm=(WebView)convertView.findViewById(R.id.webView1);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    holder.txt_itemName.setText(itemDetailsrrayList.get(position).get("id"));
    holder.txt_itemDescription.setText(itemDetailsrrayList.get(position).get("name"));
    holder.txt_itemPrice.setText(itemDetailsrrayList.get(position).get("price"));
    holder.itemimmm.loadUrl(itemDetailsrrayList.get(position).get("image"));
    //holder.itemImage.setImageBitmap(bitmap[position]);

    return convertView;
}

static class ViewHolder {
 WebView itemimmm;
    TextView txt_itemName;
    TextView txt_itemDescription;
    TextView txt_itemPrice;
    ImageView itemImage;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T18:11:34.577

我一直在寻找一些类似的动画，最后（几个小时后）我找到并实施了[47 度滑动](https://github.com/47deg/android-swipelistview/)，只是我做了一些调整。

但最后它起作用了！希望它对你有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:04:29.327

这是代码

```
 public View getView(int position, View convertView, ViewGroup parent)
    > {
    >     View view = null;
    > 
    >     Model m = filter.subItems.get(position);
    >     if(m != null)
    >     {
    >         if (convertView == null) {
    >             LayoutInflater inflator = context.getLayoutInflater();
    >             view = inflator.inflate(R.layout.rowlayout, null);
    >             ViewHolder viewHolder = new ViewHolder();
    >             viewHolder.position = position; - here you can put your position.
    >             view.setOnTouchListener(this.listener);
    >             //assign whatever you like to the viewHolder - in most cases the model and inlated controls and then assign 
    >         } else {
    >             view = convertView;
    >         }
    >         view.setTag(viewHolder);
    >     } 
```

和

```
public boolean onTouch(View v, MotionEvent event) {
    ViewHolder viewHolder = ((ViewHolder) v.getTag());
} 
```

# android - 如何在android中使用菜单项对listview数组进行排序

> ID：13561543
> 
> 赞同：0
> 
> 时间：2012-11-26T09:02:11.923
> 
> 标签：android

我有从 android 中的服务器获取电话联系的代码，我使用菜单项来制作它，这是我的代码

```
Cursor cursor = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
            int row = cursor.getCount();
            friend_item = new MenuItem [row];
            //int i=0;

            while(cursor.moveToNext()){
                nama = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                phone = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
            //  friend_item[i] = new MenuItem(nama,phone);
                //i++;
            }   

            cursor.moveToFirst(); 
            while(!cursor.isAfterLast()){
                Log.d("", "" + cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
                phone = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                phoneList.add(phone);
                cursor.moveToNext();
            }

            cursor.close();             

            String [] phonearray = (String[]) phoneList.toArray(new String[phoneList.size()]);          

        //  friendarray();
            String friends=phonearray[0]+"";   
            for(int a=1; a<phonearray.length; a++){
                friends = friends + ","+ phonearray[a];

            }

            Log.d("" , "" + friends);        
                List<NameValuePair> params = new ArrayList<NameValuePair>();
                params.add(new BasicNameValuePair("phone", mPhoneNumber));
                params.add(new BasicNameValuePair("friend", friends));

                // getting JSON string from URL
                JSONObject json = jParser.makeHttpRequest(Constants.url_phone_contact, "POST", params);

                // Check your log cat for JSON reponse
                Log.d("All Friend: ", json.toString());

                try {
                    friend = json.getJSONArray("friend");
                    friend_item = new MenuItem[friend.length()]; 
                     // looping through All Products
                    for (int a = 0; a < friend.length(); a++) {
                    JSONObject  c = friend.getJSONObject(a);  

                    //Storing each json item in variable

                    phone_friend= c.getString("phone"); 
                    id_friend = c.getString("id_ref");

                    Log.e("id_user", id_friend);  

                   namaFriend = getName(phone_friend);                                    

                   if(phone_friend == null){
                       Toast.makeText(getApplicationContext(), "contact not found", Toast.LENGTH_LONG).show();
                   }else{
                      friend_item[a] = new MenuItem(namaFriend, phone_friend);

                    // creating new HashMap   
                    HashMap<String, String> map1 = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    //map1.put("phone", mPhoneNumber);  
                    map1.put("id_ref", id_friend); 
                    map1.put("nama_friend", namaFriend);

                   // adding HashList to ArrayList
                    friendList.add(map1);

                   }
                    }

              } catch (JSONException e) {

              e.printStackTrace();

              }  
              //i++;*/    

             return null;               
        }       

     /**
         * After completing background task Dismiss the progress dialog
         * **/
     protected void onPostExecute(String file_url) {
            pDialog.dismiss();    
            if(friend_item != null && friend_item.length > 0){            

                mainlist.setAdapter(new ListMenuAdapter(friend_item));

            } else 
                Toast.makeText(getApplicationContext(), "You don't have friend using Shoop! yet, please invite them :)", Toast.LENGTH_LONG).show();
        }
    } 
```

要从 android 设备获取名称，我使用此代码

```
private String getName(String number) {
        // define the columns I want the query to return
        String[] projection = new String[] {
                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone.NUMBER};

        // encode the phone number and build the filter URI
        Uri contactUri = Uri.withAppendedPath(ContactsContract.CommonDataKinds.Phone.CONTENT_FILTER_URI, Uri.encode(number));

        // query time
        Cursor c = getContentResolver().query(contactUri, projection, null,
                null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME +" ASC");

        // if the query returns 1 or more results
        // return the first result
        if (c.moveToFirst()) {
            String name = c.getString(c.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            return name;
        }

        // return the original number if no match was found
        return number;
    } 
```

此列表菜单适配器

```
private class ListMenuAdapter extends BaseAdapter{

        private MenuItem [] item;

        protected ListMenuAdapter(MenuItem... item){
            this.item = item;
        }   

        public int getCount() {
            return item.length;
        } 

        public Object getItem(int pos) {
            return item[pos];
        }

        public long getItemId(int position) {
            return position;
        }

        public ViewGroup getViewGroup(int position, View view, ViewGroup parent){
            if(view instanceof ViewGroup){
                return (ViewGroup) view;
            }

            Context context = parent.getContext();
            LayoutInflater inflater = LayoutInflater.from(context);
            ViewGroup viewgroup = (ViewGroup)inflater.inflate(R.layout.custom_content_friend, null);

            return viewgroup;           
        }

        public View getView(int position, View convertView, ViewGroup parent) {

            ViewGroup group = getViewGroup(position, convertView, parent);
            MenuItem menu = item[position];

            TextView name = (TextView) group.findViewById(R.id.content_friend_myname);
            TextView phone  = (TextView) group.findViewById(R.id.content_friend_desc);

            if(menu.my_name == null || menu.phone == null){
                Toast.makeText(getApplicationContext(), "Contact not found", Toast.LENGTH_LONG).show();
            }else{      
            name.setText(menu.my_name);
            phone.setText(menu.phone);
            }

            return group;     
        }       
    }  

    private class MenuItem{

        private String my_name, phone;

        protected MenuItem(String my_name, String phone){
            this.my_name = my_name;
            this.phone= phone;
        }       

    } 
```

现在，我想获得包含姓名和电话的列表视图，并按姓名升序排序，该怎么做？谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:14:36.960

在你的活动课上写下：

```
public class MyActivity extends Activity {

    ....
    private ListView listView01;
    private ArrayList<MenuItem> list;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

  //       ...
        listView01 = (ListView)findViewById(R.id.listView1);

        list=new ArrayList<MyActivity.MenuItem>();

  //    code to fill your ArrayList

        Collections.sort(list, myComparator);

        listView01.setAdapter(new ListMenuAdapter());
    }
       Comparator<MenuItem> myComparator = new Comparator<MenuItem>()
    {
            public int compare(MenuItem arg0,MenuItem arg1) 
            { 
                return arg0.my_name.compareTo(arg1.my_name);
            }

};
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:15:04.197

**-**首先使用一个`ArrayList`代替`Array`来存储将被适配器进一步使用的数据。

**-**用于根据姓名对姓名和电话（即联系人）`java.util.Comparator<T>`进行**排序。**

**-**用于`Collections.sort(List<?> l , Comparator c)`调用排序。

**-**并`notifyDataSetChanged()`在使用适配器设置 ListView 后调用适配器。

**例如：**

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;

class Car {

    private String name;
    private String brand;
    private double cost;

    public Car(String name, String brand, double cost) {

        this.name = name;
        this.brand = brand;
        this.cost = cost;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getBrand() {
        return brand;
    }

    public void setBrand(String brand) {
        this.brand = brand;
    }

    public double getCost() {
        return cost;
    }

    public void setCost(double cost) {
        this.cost = cost;
    }

    public String toString() {

        return getName();
    }

}

public class Hog {

    ArrayList<Car> cars = new ArrayList<Car>();

    public void setIt() {

        cars.add(new Car("Padmini", "Fiat", 100008.00));
        cars.add(new Car("XYlo", "Mahindra", 100000.00));
        cars.add(new Car("Swift", "Maruti", 200000.00));
    }

    public void sortIt() {

        Collections.sort(cars, new NameComparator());
        System.out.println(cars);
        Collections.sort(cars, new BrandComparator());
        System.out.println(cars);
        Collections.sort(cars, new CostComparator());
        System.out.println(cars);
    }

    class NameComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return c1.getName().compareTo(c2.getName());
        }
    }

    class BrandComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return c1.getBrand().compareTo(c2.getBrand());
        }
    }

    class CostComparator implements Comparator<Car> {

        public int compare(Car c1, Car c2) {

            return new Double(c1.getCost()).compareTo(new Double(c2.getCost()));
        }
    }

    public static void main(String[] args) {

        Hog h = new Hog();

        h.setIt();
        h.sortIt();
    }

} 
```

# wix - wix 意外的子元素“网站”

> ID：13561544
> 
> 赞同：2
> 
> 时间：2012-11-26T09:02:14.387
> 
> 标签：wix, wix3

使用下面的代码，一切都编译没有任何错误。但是当我运行生成的 MSI 时，我没有看到在 IIS 中创建的任何站点：

```
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi' xmlns:iis='http://schemas.microsoft.com/wix/IIsExtension'>
  <iis:WebSite Id='dp_service_site' Description='Default Web Site'>
    <iis:WebAddress Id="AllUnassigned" Port="80" />
  </iis:WebSite>
  .
  .
  <DirectoryRef Id='DPDIR'>
    <Component Id='dservice' DiskId='1' Guid ='21e0c49d-e9a6-4de6-894c-d0632ea45f5a'>
      <iis:WebVirtualDir Id='dp_wvd' Alias="DocumentPublisher" Directory='DPDIR'   WebSite='dp_service_site'>           
        <iis:WebApplication Id='dp_app' Name='Default Application' WebAppPool='dp_pool' Isolation='medium'>
        </iis:WebApplication>
      </iis:WebVirtualDir>          
      <iis:WebAppPool Id='dp_pool' Identity='networkService' Name='dservice' />
    </Component>
  </DirectoryRef>
  .
  .
  <Feature Id='Service' Title='Document Service' Level='1'>
    <ComponentRef Id='dservice' />
  </Feature>
</Wix> 
```

* * *

![](../Images/013fe0a6a167e81d6ddd083c1a2360b5.png)

我收到错误。我已经按照您上面提到的更改了代码。我附上了截图和这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:44:06.290

我相信这里的问题是您没有在组件中创建网站，因此安装程序只是尝试查找现有网站。相反，您可能应该有这样的东西：

```
<Wix xmlns='http://schemas.microsoft.com/wix/2006/wi' xmlns:iis='http://schemas.microsoft.com/wix/IIsExtension'>

  .
  .
  <DirectoryRef Id='DPDIR'>
    <Component Id='dservice' DiskId='1' Guid ='21e0c49d-e9a6-4de6-894c-d0632ea45f5a'>
      <iis:WebVirtualDir Id='dp_wvd' Alias="DocumentPublisher" Directory='DPDIR'   WebSite='dp_service_site'>           
        <iis:WebApplication Id='dp_app' Name='Default Application' WebAppPool='dp_pool' Isolation='medium'>
        </iis:WebApplication>
      </iis:WebVirtualDir>          
      <iis:WebAppPool Id='dp_pool' Identity='networkService' Name='dservice' />
    </Component>
    <Component Id='website'>
      <iis:WebSite Id='dp_service_site' Description='Default Web Site' Directory='DPDIR'>
        <iis:WebAddress Id="AllUnassigned" Port="80" />
      </iis:WebSite>
    </Component>
  </DirectoryRef>
  .
  .
  <Feature Id='Service' Title='Document Service' Level='1'>
    <ComponentRef Id='dservice' />
    <ComponentRef Id'website' />
  </Feature>
</Wix> 
```

因此，该网站将被创建为一个单独的组件。我相信，既然您已经指定了端口号，那么如果该端口上已经存在一个网站，那么它将修改该现有网站而不是创建一个新网站。

**更新：**如错误所示，您需要将目录属性添加到指向“DPDIR”的网站元素。我已经更新了上面的示例。

# html - tinyMCE：避免在 style="width:..." 中转换“width”属性

> ID：13561545
> 
> 赞同：1
> 
> 时间：2012-11-26T09:02:16.780
> 
> 标签：html, css, styles, tinymce

我正在使用 TinyMCE 开发邮件编辑器。由于邮件客户端具有旧的 HTML 渲染，我需要在表格元素中设置“宽度”属性，例如：

`<table cellpadding="0" cellspacing="0" width="600" id="backgroundTable">`

但是tinyMCE不断将其转化为

`<table cellpadding="0" cellspacing="0" style="width: 600px;" id="backgroundTable">`

我的方法：我复制 HTML 代码，将其粘贴到 tinyMCE 的“HTML”弹出窗口中。我单击此弹出窗口上的“更新”按钮。TinyMCE 向我展示了我的 HTML 代码解释，一切都受到尊重。但是当我单击 HTML 按钮再次显示弹出的 HTML 代码时，宽度会转换为样式属性。

我的 tinyMCE 配置是：

`mode : "textareas",`

`theme : "advanced",`

`plugins : "autolink,lists,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",`

`elements : 'abshosturls',`

`relative_urls : false,`

`inline_styles : true,`

`verify_html : false,`

`element_format : "html",`

`extended_valid_elements : "table[width|cellpadding|cellspacing|height|class|style|id]",`

我认为其他配置在这里没用（theme_advanced 选项和其他......）。

我在 tinyMCE 文档中进行了搜索，但没有找到有关此替换的任何信息。TinyMCE 似乎清理了代码。

我一直在寻找选项，但如果有人有解决方案......

编辑：甚至`inline_styles : false,`什么都不做！

# android - 在为 Android 构建 V8 javascript 引擎时，我不断收到“[...]/bin/*-ar: not found”错误

> ID：13561546
> 
> 赞同：2
> 
> 时间：2012-11-26T09:02:17.450
> 
> 标签：android, android-ndk, v8

我正在尝试为 Android 构建 V8 javascript 引擎，但由于某种原因我无法成功。我按照[此处](http://code.google.com/p/v8/wiki/D8OnAndroid)给出的说明进行操作。一切都开始得很好。我可以从我的终端发出`make android_arm.release -j8`命令，有一段时间它看起来很甜蜜。然后突然我得到这个输出：

```
/bin/sh: 1: /home/dbm/android/ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/*-ar: not found 
```

说法正确：指定位置没有`*-ar`文件。

***但什么是`*-ar`文件？我该如何解决这个错误？***

该环境是在 64 位架构（安装了 ia32-libs）上运行 Ubuntu 12.10 的野兽，我为/使用/反对 Android NDK r8c 构建。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T09:20:15.063

Ubuntu似乎有问题！？无论如何-提取通过`tar -jxf`对我有用。请参阅[http://code.google.com/p/android/issues/detail?id=41187](http://code.google.com/p/android/issues/detail?id=41187)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-02T18:05:38.297

使用 'tar -jxf' 提取 android ndk。如果您使用“在此处提取”选项，它似乎会遗漏一些文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-28T12:49:33.053

问题在于 NDK 构建系统将平台名称作为为构建源代码而运行的命令的前缀。如果您注意到收到的错误，则`*-ar`. 不知何故，平台名称被设置为`*`而不是正确的前缀`arm-linux-androideabi`（给出正确的名称`arm-linux-androideabi-ar`）。您需要弄清楚这些信息在哪里被跳过。那应该可以解决您的问题。

PS。如果我有空闲时间，我会尝试复制您的问题，看看是否可以为您提供确切的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T09:11:37.543

`ar`是来自 gnu 工具的存档实用程序。`$NDK/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi-ar`通常，您的工具链中应该有一个可用的。看起来你的好像不见了。

# iphone - Iphone 多屏幕/视图应用程序

> ID：13561552
> 
> 赞同：2
> 
> 时间：2012-11-26T09:02:37.047
> 
> 标签：iphone, xcode, cocoa

我对 iPhone 开发非常陌生，我正在使用 xcode 开发一个示例应用程序。
我指的是在线教程和示例来构建我的第一个应用程序。

我想尝试多屏幕/视图应用程序，我想在某些特定事件（如按钮单击）上显示特定屏幕。

我在谷歌上搜索了多屏 iPhone 应用程序的教程，但我得到了不同的方法。

我在两者之间感到困惑：
1.基于导航的应用程序。
2\. 基于窗口的应用程序。
3\. 基于视图的应用程序。

我需要为多视图/屏幕应用程序选择哪种应用程序类型。是不是我们不能使用第二种和第三种类型创建多视图/屏幕应用程序，我认为这不应该是这种情况，但我很困惑。

到目前为止我做了什么。

我创建了一个基于窗口的应用程序，其中我有一个登录页面（文本字段和单击按钮）我想扩展此应用程序以根据登录结果显示主屏幕/错误屏幕。

我已经`.xib`为主屏幕和错误屏幕创建了 2 个文件（有相应的 .m 和 .h 控制器文件），现在我想删除登录屏幕并显示主屏幕/错误屏幕，但我不知道如何存档这个当我们在基于窗口的应用程序中时。

可以指出可以解释这种情况的有用教程/示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:31:12.870

在进入任何在线教程之前，最好先阅读苹果的指南。以下指南可能是一个好的开始：

[App Programming Guide - Design Basics](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/AppDesignBasics/AppDesignBasics.html#//apple_ref/doc/uid/TP40007072-CH2-SW1)了解 iOS 开发的基础知识

[人机界面指南](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40006556)

和

[查看编程指南](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/viewpg_iphoneos/Introduction/Introduction.html)

理解和实现不同的视图控制器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:21:21.560

希望这有助于您关于委托 [http://www.switchonthecode.com/tutorials/creating-your-first-iphone-application-with-interface-builder的问题](http://www.switchonthecode.com/tutorials/creating-your-first-iphone-application-with-interface-builder)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-16T21:39:56.623

如果您使用带有场景和转场的情节提要 (iOS 5+)，本[教程](http://www.techotopia.com/index.php/Using_Xcode_Storyboarding_%28iPhone_iOS_5%29)可能会帮助您理清思路。

# xcode - 动态 NSCombobox

> ID：13561554
> 
> 赞同：0
> 
> 时间：2012-11-26T09:02:43.007
> 
> 标签：xcode, core-data, cocoa-bindings, nsarraycontroller, nscombobox

我正在创建一个应用程序，其中有多个实体，现在我需要动态过滤第三个组合框的内容。我更好地解释自己。我有 3 个组合框（建筑物、楼层和部门），我想首先显示包含的所有建筑物，但第二个应该只显示在建筑物计划之前选择的，最后一个我应该只选择建筑物的部门以及您选择的计划。我怎样才能做到这一点？为了简化附加一些照片。

![在此处输入图像描述](../Images/fb58492d06c1102ab77ee6b8fafed23b.png)

![在此处输入图像描述](../Images/76664fe75b9ed53111eb84ec053518e4.png)

![在此处输入图像描述](../Images/f36d0b2e317f698092d6a8523469a026.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:28:26.913

如果您对 Core Data 使用单个 fetch 请求，您只需使用谓词向下钻取。

但是，您的关系设置不正确。例如， 中有一个`edificio`属性`Particelle`。如果它指的是建筑物，它应该是与对象的关系*，*`Edifici`而不是某种外键。Core Data 中没有外键，只有关系。

如果你这样做，使用`NSFetchedResultsController`. 您现在可以简单地遍历对象图而无需任何特定的获取。

该方案可能是这样的（可能需要更改顺序）：

```
Anno <--->> Particella <---->> Edificio <---->> AreaRischio 
```

现在您可以简单地告诉 fetched results 控制器开始获取所有`Anno`实体。然后你用简单的点符号向下钻取：

```
NSSet *listForNextTable = selectedAnnoObject.particelle; 
```

并进一步与

```
NSSet *listForNextTable = selectedParticellaObject.edifici; 
```

等等。你看，它变得非常简单。

# scala - Scala：元素列表的元素之间的递归搜索

> ID：13561556
> 
> 赞同：2
> 
> 时间：2012-11-26T09:03:05.517
> 
> 标签：scala, search, recursion, constraints

如果我有这样的课程：

```
class Person (var name:String, var surname:String, var sons: Set[Person]) 
```

我想要控制一个人不能在他的儿子和他儿子的儿子之间控制自己。我怎样才能做到这一点？

我曾想过递归搜索。但我必须小心不要创造循环。我可以使用布尔值作为守卫，只要你找到一个包含自身的项目就会停止搜索。

我该如何实施？你有想法吗？非常感谢。

**更新** 非常感谢您的帮助。很好的答案，但最重要的是你有很好的想法。现在我只需要最后一点帮助来测试我的小项目的这个检查。

我的真实情况如下：

```
trait ArchitecturalElement extends PropertyHolderElement with TypedElement{}

abstract class Component extends ConnectableElement with ArchitecturalElement {
  var subElements : Set[ArchitecturalElement]
  var interactionPoints : Set[InteractionPoint]
  //Here I put the control
  //A component cannot contain himself in his subElements and in subElements of it subelement
  def notHerOwnDescendant = {
  def notDescendant(ancestor: Component, current: Component, checked: Set[ArchitecturalElement]): Boolean =
  !current.subElements.contains(ancestor) && current.subElements.forall(
        p => checked.contains(p) || notDescendant(ancestor, p, checked + p))

  notDescendant(this, this, Set())
  }

 }//Component

abstract class InteractionPoint extends ConnectableElement{}

class SAInterface(  var name : String,
        var description : String = "empty",
        var direction : SAInterfaceDirection = null
        )extends InteractionPoint with ArchitecturalElement

class SAComponent ( var name :String,
        var description : String = "empty",
        var subElements : Set[ArchitecturalElement] = Set(),
        var interactionPoints : Set[InteractionPoint] = Set()
        ) extends Component 
```

但我有一个不兼容的类型：

类型不匹配; 找到：a0Dominio.ArchitecturalElement 所需：a0Dominio.SAComponent

```
p => checked.contains(p) || notDescendant(ancestor, p, checked + p)
                                                //  ^  here 
```

从一个 Set [ArchitecturalElement]，我派生一个 Set [Component]？而 Component 继承自 ArchitecturalElement。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T11:55:17.590

以下方法产生当前人的所有后代，同时它不会在循环中丢失：

```
def descendants(stop: Set[Person] = Set()): Set[Person] = 
  if(stop contains this) Set() 
  else                   this.sons.flatMap(descendants(_,stop + this)) + this 
```

您可以使用它来检查您的状况。为了检测任意循环，一旦您最终进入`if`.

另一种方法是在构造函数/设置器中强制图形是非循环的。这允许您使用没有停止集的搜索，因为所有现有实例都保证是无循环的，并且可以使用稍微更简单和更快的方法来测试条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:26:15.830

如果我理解正确，你想要这样的东西：

 ~~~~```
class Person(...) {
  ...

  def notHerOwnDescendant = 
    !sons.contains(this) && sons.forall(!_.sons.contains(this))

  ...
} 
```~~ 

或者，如果你想一路向下：

```
class Person(...) {
  ...

  def notDescendant(person: Person) = 
    !sons.contains(person) && sons.forall(_.notDescendant(person))

  def notHerOwnDescendant = 
    notDescendant(this)

  ...
} 
```

~~免责声明：我无法在 IDE 中测试此代码，因此无法保证它可以编译并且是正确的。尽管如此，我希望它至少有助于作为思想的食物:-)~~

### 更新

这是一个更新和测试的版本，它使用@gilad 提到的“图形着色”解决方案处理周期：

```
class Person (val name:String, val surname:String, var sons: Set[Person]) {
  def notHerOwnDescendant = {
    def notDescendant(ancestor: Person, current: Person, checked: Set[Person]): Boolean =
      !current.sons.contains(ancestor)
          && current.sons.forall(
            p => checked.contains(p) || notDescendant(ancestor, p, checked + p))

    notDescendant(this, this, Set())
  }
} 
```

一些测试代码：

```
val abel = new Person("", "Abel", Set())
val cain = new Person("", "Cain", Set())
val adam = new Person("", "Adam", Set(abel, cain))

println("Adam is not his own descendant: " + adam.notHerOwnDescendant)
cain.sons += cain
println("Added Cain to his sons' set")
println("Adam is not his own descendant: " + adam.notHerOwnDescendant)
abel.sons += adam
println("Added Adam to his grandsons' set")
println("Adam is not his own descendant: " + adam.notHerOwnDescendant) 
```

和输出：

```
Adam is not his own descendant: true
Added Cain to his sons' set
Adam is not his own descendant: true
Added Adam to his grandsons' set
Adam is not his own descendant: false 
```

### 更简单的解决方案？

作为旁注，我相信你可以通过坚持`val`属性而不是`var`s 来阻止一个人成为他自己的后代。如果集合`sons`是不可变的，则无法在图中创建循环，因为您需要`sons`在创建父级之前做好准备，并且无法将父级添加到任何现有后代的儿子集合中。请注意，我必须保留`sons`a`var`才能编译上述测试代码。

至少我是这么看的——但是可能有一些技巧可以解决这个问题，例如使用我还不太熟悉的惰性评估。所以如果我错了，请有人纠正我。

### 更新 2

> 类型不匹配; 找到：`a0Dominio.ArchitecturalElement`需要：`a0Dominio.SAComponent`

我认为这里可能有一个错字：根据您的方法的声明，`SAComponent`应该`Component`不是吗？

无论如何，问题在于您声明`subElements`为 a `Set[ArchitecturalElement]`，因此它的元素显然是 type `ArchitecturalElement`，而不是 a `Component`（继承关系是相反的）。因此，要么更改为`subElements`a `Set[Component]`，要么将函数参数声明`ancestor`为。`current``ArchitecturalElement`

### 更新 3

一种新的成员方法，`Person`用于查找后代图中属于循环的所有人员：

```
def descendantsWithCycle = {
  def findCycle(current: Person, checked: Set[Person]): Set[Person] =
    if (checked contains current) Set(current)
    else {
      val newChecked = checked + current
      current.sons.flatMap(p => findCycle(p, newChecked))
    }

  findCycle(this, Set())
} 
```~~

# javascript - 如何从客户端浏览器检测或避免编辑的 javascript？

> ID：13561559
> 
> 赞同：0
> 
> 时间：2012-11-26T09:03:14.287
> 
> 标签：javascript

我是使用 javascript 的新手，
现在我可以使用 firebug 从浏览器编辑我的 javascript 代码。
任何想法，以检测或避免从客户端浏览器编辑的 javascript ??

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T09:04:32.527

你不能。

您可以（并且应该）使用服务器端代码来检查发送到服务器的任何数据是否正常，但您不能做任何事情来阻止人们发送他们喜欢的任何数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:06:39.423

无法阻止人们在浏览器中修改您的 js，因为 js 是从服务器按原样发送的。

但是，您可以[混淆](http://www.javascriptobfuscator.com/)您的 js，使其更难编辑。（[另一个链接](http://www.daftlogic.com/projects-online-javascript-obfuscator.htm)）

# java - 为什么 JVM 一直在做 full gc 而老年代只有半满？

> ID：13561568
> 
> 赞同：2
> 
> 时间：2012-11-26T09:03:44.600
> 
> 标签：java, garbage-collection, jvm-hotspot, concurrent-mark-sweep

我在 CentOS 64 位 linux 机器上使用 jdk 1.7.0_09。

gc 相关的 vm args 是

> -Xmx4g -Xmn2g -XX:SurvivorRatio=4 -XX:PermSize=128m -XX:MaxPermSize=128m -XX:InitialTenuringThreshold=15 -XX:CMSWaitDuration=50 -XX:MaxTenuringThreshold=15 -XX:+UseConcMarkSweepGC -XX:+UseParNewGC -XX:CMSInitiatingOccupancyFraction=80 -XX:+CMSParallelRemarkEnabled -XX:ReservedCodeCacheSize=128m

但它一直在做完整的 gc

```
jstat -gcutil pid 1000    
    S0     S1     E      O      P     YGC     YGCT    FGC    FGCT     GCT   
    0.00   0.00  15.62  57.52  19.90     11    2.081 11109 7454.686 7456.767   
    0.00   0.00  15.81  57.52  19.90     11    2.081 11109 7454.686 7456.767   
    0.00   0.00  15.81  57.51  19.90     11    2.081 11111 7454.892 7456.973   
    0.00   0.00  16.06  57.51  19.90     11    2.081 11111 7455.115 7457.196
    0.00   0.00  16.06  57.51  19.90     11    2.081 11111 7455.115 7457.196
    0.00   0.00  16.27  57.51  19.90     11    2.081 11111 7455.115 7457.196
    0.00   0.00  16.27  57.51  19.90     11    2.081 11111 7455.115 7457.196
    0.00   0.00  16.29  57.51  19.90     11    2.081 11111 7455.115 7457.196
    0.00   0.00  16.29  57.51  19.90     11    2.081 11111 7455.115 7457.196
    0.00   0.00  16.29  57.47  19.90     11    2.081 11113 7455.549 7457.629
    0.00   0.00  16.29  57.47  19.90     11    2.081 11113 7455.549 7457.629
    0.00   0.00  16.34  57.47  19.90     11    2.081 11113 7455.549 7457.629
    0.00   0.00  16.34  57.47  19.90     11    2.081 11113 7455.549 7457.629
    0.00   0.00  16.34  57.47  19.90     11    2.081 11113 7455.549 7457.629
    0.00   0.00  16.42  57.47  19.90     11    2.081 11114 7455.549 7457.629
    0.00   0.00  16.42  57.44  19.90     11    2.081 11115 7455.986 7458.067 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:10:16.930

尽管有“FGC”列，但它并不是真正的完整 GC。CMS 正在做的是一个并发收集，以查看是否可以从旧收集中清除任何内容（您可以看到它正在执行的操作）。可以判断这不是完整 GC 的方法是，完整 GC 会清除伊甸园空间并从一个幸存者空间复制到另一个。

恕我直言，您使用的选项越多，您就越有可能遇到某些组合并产生令人惊讶的结果。我会坚持最少的选择，看看它的表现如何。仅当您知道它们将始终提供帮助时才添加选项。

尝试开始，

```
-mx4g -XX:MaxPermSize=128m -XX:+UseConcMarkSweepGC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:11:07.717

这是正常的。如果您执行“-verbose:gc”，您可以看到“完整”集合实际上是一个并发集合（您指定了“-XX:+UseConcMarkSweepGC”）您还可以看到时间并没有增加太多。那个时间是并发的，而不是停止世界。

# android - 无法在 Android 中保存 CheckBox 的状态

> ID：13561576
> 
> 赞同：0
> 
> 时间：2012-11-26T09:04:14.110
> 
> 标签：android, checkbox

我正在开发一个应用程序。一页中有许多复选框。我想在退出页面时保存 CheckBox 的状态。我使用 SharedPreferences 来保存。代码是这样的：

```
checkbox1.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
// TODO Auto-generated method stub
Editor editor = getSharedPreferences("syllabus", 0).edit();
editor.putBoolean("cbx1_ischecked", isChecked);
editor.commit();
}
    });
checkbox2.setOnCheckedChangeListener(new OnCheckedChangeListener(){
    public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
    // TODO Auto-generated method stub
    Editor editor = getSharedPreferences("syllabus", 0).edit();
    editor.putBoolean("cbx2_ischecked", isChecked);
    editor.commit();
    }

}); 
```

当我离开这个页面，然后再回来。默认情况下，所有复选框状态都不会被选中。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:14:14.993

您正在保存值，但您必须恢复它们，您的活动是这样开始的：

```
SharedPreferences prefs = getSharedPreferences("syllabus", 0);
checkbox1.setChecked(prefs.getBoolean("cbx1_ischecked" ,false));
checkbox2.setChecked(prefs.getBoolean("cbx2_ischecked" ,false)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T10:11:31.343

试试这个

```
 boolean check1,check2;
 checkbox1.setOnCheckedChangeListener(new OnCheckedChangeListener(){
 public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
 // TODO Auto-generated method stub
  check1=isChecked;

 }
});

checkbox2.setOnCheckedChangeListener(new OnCheckedChangeListener(){
public void onCheckedChanged(CompoundButton arg0, boolean isChecked) {
// TODO Auto-generated method stub
 check2=isChecked;

}

}); 

//store boolean only once when you leave the activity
 Editor editor = getSharedPreferences("syllabus", 0).edit();
 editor.putBoolean("cbx1_ischecked", check1);
 editor.putBoolean("cbx2_ischecked", check2);
 editor.commit();

 In onCreate()

  SharedPreferences prefs = getSharedPreferences("syllabus", 0);
  checkbox1.setChecked(prefs.getBoolean("cbx1_ischecked" ,false));
  checkbox2.setChecked(prefs.getBoolean("cbx2_ischecked" ,false)); 
```

# algorithm - 查找覆盖在 3D 高度图上的圆的一组点

> ID：13561580
> 
> 赞同：3
> 
> 时间：2012-11-26T09:04:26.860
> 
> 标签：algorithm, math, 3d, computational-geometry

我有一个 NxN 值的高度图。

我想找到，给定一个点 A（红点），它的 x 和 y 坐标是给定的（并且 z 从数据中已知，所以 A 是表面的一个顶点）一组位于圆周上的点圆心在 A 和半径 R 的圆是一个很好的近似圆形“布”（灰色）覆盖在数据点描述的假想表面上。

采样，我试图找到的点集之间的倒数距离，不需要是统一的，但我仍然想至少找到所有与网格边缘相交的点距离 A 为 R 的圆。

如何找到这组点？

这是一个已知问题吗？

[![带圆圈的 3d 高度图](../Images/332e2b41779837db2041f2755d5852f3.png)](https://i.stack.imgur.com/nSYSS.jpg)
[（来源：[keplero.com](http://www.keplero.com/upps/grid.jpg)）]

- 编辑

Jan 使用的假设是正确的：样本形成与 [0,0] 对齐的规则矩形或正方形网格（在 XY 平面中）。但我想考虑 Z 方向的位移来计算距离。您可以将高度图视为地形，并将我正在寻找的算法视为向探险者提供的指令，该指令仅在给定纬度或经度的路径上行驶，标记距离 A 为 R 的点。步行距离，这是考虑到到目前为止所做的所有 Z 位移。探险者也在山谷中攀爬和下降。

对此的简单算法将是这样的。我们知道给定 R，x 和 y 轴上的最大位移对应于完全平坦的表面。如果没有斜率，x,y 点都在边界正方形 Ax-R < x < Ax+r 和 Ay-R

此时，它将开始移动到靠近的单元格，因为如果周界进入网格的一个单元格的边缘，它也必须退出该单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:01:14.740

我认为这将很难以精确的方式解决，所以我建议尝试直接的方法来模拟你的探险者将在表面上采取的路径。

给定您的起点`A`和行进距离`d`，计算`P`XY 平面上`d`从`A`.

对于 中的每个点`p`，`P`将线段`A-p`与您的网格相交，以便最终得到探险者从一个网格正方形穿过到下一个网格正方形的一系列点，如果探险者从 出发，就会发生这种情况`A`。然后应该通过从您的网格数据中插值来为这些点提供 z 坐标。因此，您可以通过此点序列前进并跟踪到目前为止的行进距离。最终将达到目标距离 - 调整`p`到这一点。

P 现在包含您要查找的周长。`P`根据您的需要调整样本保真度（大小）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T21:24:36.080

只是为了澄清-您在 3d 中有一个三角形表面，对于`Vi`网格中的给定起始顶点，您希望找到`U`可通过长度为 的表面（即测地线）的路径到达的顶点集`Li <= R`。

一种方法是将其转换为基于图形的问题：

1.  形成加权无向图`G(V,E)`，其中`V`是三角曲面网格中的顶点集，`E`是该网格中的边集。边权重应该是每条边的欧几里得（3d）长度。该图是离散距离图 - 网格中每个相邻顶点之间“沿表面”的距离。
2.  从起始顶点运行[Dijkstra](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)算法的变体`Vi`，仅扩展长度`Li`满足约束的路径`Li <= R`。访问的顶点集`U`将是那些可以通过最短（测地线）路径到达的顶点`Li <= R`。

这种方法的精度应该与表面网格的分辨率有关——只要每个单元内的表面曲率不太高，欧几里得边长应该是实际测地距离的良好近似值，如果不是，表面网格应该在这方面进行改进。

希望这可以帮助。

# jquery - Jquery（fancybox+photoswipe 库）在 W3TC 停用时停止工作

> ID：13561583
> 
> 赞同：-3
> 
> 时间：2012-11-26T09:04:31.240
> 
> 标签：jquery, fancybox

我的网站有问题。我使用 W3TC wordpress 插件+cloudflare+maxcdn 来缓存我网站上的所有内容。

现在我想移植我的网站。由于我在打开 W3TC 时出现移植问题，因此我想将其关闭并进行备份。但现在我所有的画廊和花式盒子都停止工作了。

这是怎么回事？我感谢任何可以帮助我解决这个问题的意见，因为我不想永远依赖 W3TC。谢谢，马蒂斯

## ---*编辑*---

对不起，我不清楚的问题，我会尽力澄清。

# 1 示例：

在我的主页侧边栏上，我有一个名为“联系我们”的按钮。单击后，它会通过 /#fancyboxID-1 命令打开一个弹出式联系表单。但是，这仅在启用 W3TC 后才有效。禁用后，单击该按钮会将 /#fancyboxID-1 添加到 url，但没有任何反应。

# 2 示例：

在几个子页面中，我使用 FIAGallery 作为图库插件：此插件使用 Jquery，如果启用了 W3TC，则可以正常工作。禁用后，不会出现任何画廊（但是空间在那里，但只是空的）

我玩过 W3TC，发现 Minify 设置似乎对此负责（一旦禁用，就会出现问题）确切地说，是 JS minify 设置一旦禁用就会破坏它。

## 这是我的设置（仅限活动设置）

* * *

重写 URL 结构

HTML 缩小：启用 JS 缩小设置：启用 CSS 缩小设置：启用 每更新外部文件：21600 秒垃圾收集间隔：21600 秒

* * *

我试过清空缩小缓存，但没有显示任何结果。

我希望这更清楚一点，如果您需要更多信息，请询问。我感谢所有输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T22:02:17.690

您是否打开了 CloudFlare 的 Rocket Loader？这可能会影响某些 JavaScript 和 jQuery，您应该将其关闭（如果打开）以查看它是否可以解决问题。如果它最终解决了关闭它的问题，请在[此处](https://www.cloudflare.com/wco-bug-report.html)向我们报告错误。

# image-processing - 为 windows phone 开发 Polyframe 图像编辑应用程序

> ID：13561586
> 
> 赞同：3
> 
> 时间：2012-11-26T09:04:34.947
> 
> 标签：image-processing, silverlight-4.0, windows-phone-7.1, windows-phone-8

嗨，上周我开始为 windows phone 8 开发 polyframe 应用程序。因此，对于开发，我使用 IOS PolyFrame 应用程序作为参考：[https](https://itunes.apple.com/us/app/polyframe/id481964944) ://itunes.apple.com/us/app/polyframe/id481964944 。

所以我的疑问是，我需要根据提供的结构实现相框。该应用程序将支持在每个布局中添加/编辑图像以及更改所选布局的方向。所以我的问题是，是否可以用 xaml 和 C# 开发类似的东西。我在用布局和布局调整相关的东西填充图像时遇到问题。任何人都可以建议我一些想法来开始开发应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T00:04:13.470

简而言之，是的，您应该能够使用 XAML 执行您尝试构建的操作。

这是一个非常简单的示例，说明如何在照片上应用不规则蒙版：

![猫](../Images/1b36d78b00793de464434fc0edf60028.png)

这是使用以下 XAML 实现的：

```
 <Image Source="/Assets/cat.jpg" Height="200"
                Clip="M 120 95 L 90 265 L 220 265 L 190 95 A 50 50 0 1 0 120 95" 
                Margin="0,10,224,0" 
                RenderTransformOrigin="0.5,0.5" >
            <Image.RenderTransform>
                <CompositeTransform TranslateX="-50"/>
            </Image.RenderTransform>
        </Image>
        <Image Source="/Assets/cat.jpg" Height="200"  
                Clip="M 120 95 L 90 265 L 220 265 L 190 95 A 50 50 0 1 0 120 95" 
                Margin="0">
            <Image.Projection>
                <PlaneProjection 
                                GlobalOffsetX="50" 
                                GlobalOffsetY="-190" 
                                RotationZ="45"/>
            </Image.Projection>
        </Image> 
```

请注意，您将不得不做一些数学运算或设计一些预先计算的区域以按照您想要的方式排列所有内容，但这对我来说看起来完全可行。

# c# - 尝试打开 Excel 文件时提示消息

> ID：13561590
> 
> 赞同：0
> 
> 时间：2012-11-26T09:04:47.807
> 
> 标签：c#, excel, io

我有一个打开 Excel 文件并读取内容的代码。每次我第一次运行代码时，它都会打开 Excel 文件而不提示我。但是从第二次开始它总是提示我这个消息

**用户 1 正在修改 TestFile.xlsx。以只读方式打开**

它总是在这部分代码提示：

```
Excel ._Workbook  xlsBook = xlsApp .Workbooks.Open (_fileName,0,false,5 ,"","",false ,Excel .XlPlatform .xlWindows ,"",true ,false ,0,true ,false ,false ); 
```

**注意：我也在操作完成后关闭文件并使用 VS 2012**

那么这个提示可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:12:37.753

运行代码并退出后，查看任务管理器，很可能 EXCEL.EXE 实例仍在运行。

您很可能没有释放所有 com 对象，例如：

```
 System.Runtime.InteropServices.Marshal.ReleaseComObject(_theWorkbook);
            System.Runtime.InteropServices.Marshal.ReleaseComObject(_sheets);
            System.Runtime.InteropServices.Marshal.ReleaseComObject(_workSheet);
            System.Runtime.InteropServices.Marshal.ReleaseComObject(_range);
            System.Runtime.InteropServices.Marshal.ReleaseComObject(_excelObj); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:12:54.610

确保没有资源仍然可以打开文件。你能发布你用来关闭资源的代码吗？也许那里有错误。

最后，尽管它很丑陋，但它对于测试目的是有效的：尝试在关闭文件后手动调用垃圾收集器。

最后，考虑使用 OpenXml API 来处理 Excel/Word 文件，而不是 Interop DLL（请记住，这些需要客户端安装 Excel，而不是您可以与应用程序一起部署的 OpenXml 库）。

# rtsp - 关于 RTSP 设置请求

> ID：13561592
> 
> 赞同：0
> 
> 时间：2012-11-26T09:04:52.867
> 
> 标签：rtsp, rtsp-client

我们正在尝试为我们的一种解决方案构建一个 SIP2RTSP 网关，其中一个 SIP 邀请被转换为对 wowza 媒体服务器的 RTSP 设置请求，然后从 mediaServer 向 SipClient 播放回放。

但是，当发送设置请求时，wowza 总是绑定到 rtsp 客户端地址，即使目标是在 SETUP 请求标头的传输中设置的。在这里，我们要告诉 wowza rtsp 服务器绑定到 sip UA IP 而不是 rtsp 客户端 ip 以用于 RTP 流量的流动。

RFC 2326 说

```
destination:
      The address to which a stream will be sent. The client may
      specify the multicast address with the destination parameter.
      To avoid becoming the unwitting perpetrator of a remote-
      controlled denial-of-service attack, a server SHOULD
      authenticate the client and SHOULD log such attempts before
      allowing the client to direct a media stream to an address not
      chosen by the server. This is particularly important if RTSP
      commands are issued via UDP, but implementations cannot rely
      on TCP as reliable means of client identification by itself. A
      server SHOULD not allow a client to direct media streams to an
      address that differs from the address commands are coming
      from. 
```

在这里它还告诉 **服务器不应允许客户端将媒体流定向到与命令来自的地址不同的地址。**

目标字段的用途是什么以及我们如何引导 RTSP 客户端以外的媒体流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:43:40.850

The point is that client MAY request the stream to be sent at client-chosen location. Still server should be doing this carefully, and take decision whether to allow an address which is different from RTSP client address or not using security consideration such as authentication availability etc. Because sending stream blindly to any given address, esp. via UDP, is unsafe: a malicious client might easily bring server down.

All in all, `destination` is where to send stream to. Servers do not guarantee that streams will be sent to locations other than RTSP client's.

# localization - 在不同的 Word 本地化中引用标题？

> ID：13561602
> 
> 赞同：1
> 
> 时间：2012-11-26T09:05:30.140
> 
> 标签：localization, ms-word

我有一个 Word 文档，我需要与不同 Office 文化中的用户进行交流。我在 daDK，deDE 中的其他用户。

当我们交换文件时，标题中的字段代码

```
{STYLEREF "Overskrift 1" \* MERGEFORMAT} 
```

在另一边失败，因为在 deDE Headline 1 中的命名不同。换一种方式当然也一样。

有什么办法可以克服这个吗？我可以使用不同的方式来引用标题（枚举？）或者我可以以某种方式从 VBA 以编程方式避免这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T00:28:48.667

这是过度本地化的一个非常糟糕的例子。显然，您甚至不能在字段中使用内部名称（“heading1”等）。AFAIK，您有以下选择来解决这个问题：

*   避免文档中的内置样式。
*   使用 WdBuiltinStyle 枚举以编程方式创建标头，例如：

    ```
    ActiveDocument.Styles(wdStyleHeading1).NameLocal 
    ```

*   令人惊讶的是，这似乎也适用于不同的标题级别（但我不知道为什么以及是否有副作用）。

    ```
    {STYLEREF "1" \* MERGEFORMAT}
    {STYLEREF "2" \* MERGEFORMAT} 
    ```

# c# - 具有空列表（零计数）的 OData 结果导致错误

> ID：13561604
> 
> 赞同：2
> 
> 时间：2012-11-26T09:05:34.477
> 
> 标签：c#, asp.net, asp.net-web-api, odata

我已经实现了 OData 来查询我的 API 生成的列表。但有时列表是空的，OData 结果应该只返回一个空的 json，但它没有。相反，它会引发以下错误

值必须大于或等于 1。 参数名称：value 实际值为 0。

这是我的控制器方法

```
 // Get states by Id
    [HttpGet]
    [ActionName("GetStatesByID")]    
    public ODataResult<DataAccess.Model.State> GetStatesByID(ODataQueryOptions options,int id)
    {

        var states = this.Repository.GetAllStatesByCountry(id).AsQueryable<DataAccess.Model.State>();

        var results = (options.ApplyTo(states) as IQueryable<DataAccess.Model.State>);

        long count = states.Count();

        return new ODataResult<DataAccess.Model.State>(results, null, count);

    } 
```

只要列表为空，我就可以将计数设为 0，这不会引发错误，但这确实不是一个好习惯，所以我想知道是否有任何其他解决方法，以便 ODataResult 返回一个空 json 时列表是空的而不是抛出错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:36:18.120

由于我没有当前环境，因此没有机会对此进行测试，但请尝试一下：

```
[HttpGet]
[ActionName("GetStatesByID")]    
public ODataResult<DataAccess.Model.State> GetStatesByID(ODataQueryOptions options,int id)
{
    var states = this.Repository.GetAllStatesByCountry(id)
                                .AsQueryable<DataAccess.Model.State>();

    long count = states.Count();

    if(count == 0)
      return null;

    var results = (options.ApplyTo(states) as IQueryable<DataAccess.Model.State>);

    return new ODataResult<DataAccess.Model.State>(results, null, count);
} 
```

然后处理空/空结果客户端，或者你可以做>>[这个](https://stackoverflow.com/a/3079326/1045728)：

即当 count > 0 时，只需序列化 ODataResult<> 并将其作为 Stream 返回，当 count 为 0 时，您返回 ODataResult 的硬编码字符串表示形式（计数为零）等。它不是那么漂亮，但它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T01:32:38.393

这是 ODataResult 类中的一个错误。相应的 codeplex 错误位于[http://aspnetwebstack.codeplex.com/workitem/640](http://aspnetwebstack.codeplex.com/workitem/640)

# c# - 如何使用 C# 将字符串的前两个字符更改为“01”？

> ID：13561606
> 
> 赞同：10
> 
> 时间：2012-11-26T09:05:37.520
> 
> 标签：c#

我有这样的字符串：

```
var abc = "00345667";
var def = "002776766"; 
```

前两个字符始终为“ `00`”。我怎样才能将这些更改为 " `01`" ？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T09:07:07.850

您可以使用[Substring(](http://msdn.microsoft.com/en-us/library/aka44szs.aspx) )。

```
var res = "01" + abc.Substring(2); 
```

**编辑**需要进行更多替换时的一些性能考虑。

如果您有更多子字符串要替换，您可以使用 StringBuilder，请阅读这篇文章[如何提高 Visual C# 中的字符串连接性能](https://support.microsoft.com/en-us/help/306822/how-to-improve-string-concatenation-performance-in-visual-c)

**字符串连接 VS 字符串生成器**

在 Visual C/C++ 中通过 strcat() 改进字符串连接的一种技术是分配一个大字符数组作为缓冲区并将字符串数据复制到缓冲区中。在 .NET Framework 中，字符串是不可变的；它不能就地修改。C# + 连接运算符会构建一个新字符串，并在连接大量文本时导致性能下降。

但是，.NET Framework 包含一个针对字符串连接进行了优化的 StringBuilder 类。它提供与在 C/C++ 中使用字符数组相同的好处，以及自动增加缓冲区大小（如果需要）并为您跟踪长度。本文中的示例应用程序演示了 StringBuilder 类的使用，并将性能与串联进行了比较。[参考](https://support.microsoft.com/en-us/help/306822/how-to-improve-string-concatenation-performance-in-visual-c)

使用 StringBuilder 将“002776766”更改为“012776766”。

```
StringBuilder sb = new StringBuilder(def);
sb[1] = '1';    
def = sb.ToString(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-26T09:07:38.513

看看[Substring](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)和[string.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。

```
string result = string.Format("01{0}", abc.Substring(2)); 
```

或[正则表达式。替换](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.replace.aspx)

```
string result = Regex.Replace(abc, "^00", "01"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T09:07:49.900

您可以使用`Regex.Replace()`可以在命名空间中找到的方法来执行此操作`System.Text.RegularExpressions`。

```
abc = Regex.Replace(abc ,"^00","01");
                        |      
                        |
                        |->^ depicts that start of the string 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:07:52.640

试试这个

```
"00".Concat(abc.Substring(2));
"00".Concat(def.Substring(2)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:14:32.793

您可以使用正则表达式中的替换功能。

```
like   var abc = "00345667";

       var newvar =Regex.Replace(abc, "^00", "01"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-20T05:24:58.820

```
var abc = "00345667";
var def = "002776766";
string str= string.Format("01{0}", abc.TrimStart('00')); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-28T15:04:11.383

使用[字符串插值](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/tokens/interpolated)

```
var abc = "00345667";
var abc = $"01{abc.Substring(2)}"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-08-09T08:04:28.977

如果您使用的是 C# 8 或更高版本，您也可以使用[范围](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/ranges)运算符来执行此操作。它非常易读

```
var res = "01" + abc[2..]; 
```

# php - 如何从php中的url获取数据

> ID：13561608
> 
> 赞同：1
> 
> 时间：2012-11-26T09:05:43.720
> 
> 标签：php, mod-rewrite

大家好，我现在一直在工作，`$_GET['whatever']`这次我需要一些我在看到这个 URL 之前从未做过的事情，`domain.com/author/name_of_user`我的问题是我如何在那种 URL 中获取数据？我一直在寻找答案，他们所说的只是`$_GET['']`；所以示例我有这个链接`http://localhost/domain/attachments.php` 我如何`http://localhost/domain/attachments/`首先将这个链接更改为？我将如何从中获取数据`$_GET['']`？请帮帮我我真的很困惑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:10:47.830

这称为 URL 重写：

[http://httpd.apache.org/docs/2.2/rewrite/](http://httpd.apache.org/docs/2.2/rewrite/)

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

这些是 Apache / IIS 中 url 重写的链接。

简而言之，它需要：`http://localhost/domain/attachments.php`并将其“转换”（或重写）为 `http://localhost/domain/attachments`（或您喜欢的任何内容）。

通常它用于改善搜索引擎优化。

你仍然可以正常使用 $_GET 因为它只是一个转换，最后你仍然有whatever.php?var=value&....只是它对浏览器的显示不同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:10:28.823

重写 URL 非常简单。Apache 附带了一个名为`mod_rewrite`处理此问题的 mod。你唯一需要做的就是在你的`.htaccess`.

我推荐你阅读这篇文章：[htaccess Tricks](http://corz.org/serv/tricks/htaccess2.php)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T12:26:54.830

您将需要 .htaccess 文件位于您网站的根目录，该文件会将您的网站 URL 从 example.com/index.php?var1=12&var2=23 重写为类似于 example.com/pagename/12/23 以下是一些基础知识使用 .htaccess 进行 URL 重写：[http ://www.yourhtmlsource.com/sitemanagement/urlrewriting.html](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T09:10:16.743

您应该使用 Apache 的重写模块来重写您的 URL。

在您的特定情况下 - 在您激活之后`mod_rewrite`- 尝试此重写规则：

```
RewriteEngine On
RewriteRule ^domain/attachments/?$ /domain/attachments.php 
```

但是，这不会`$_GET`以任何方式影响您的阵列。

# ninject - Ninject - 如何从注入的子对象中引用父对象

> ID：13561609
> 
> 赞同：3
> 
> 时间：2012-11-26T09:05:48.830
> 
> 标签：ninject, circular-dependency, circular-reference

我正在尝试使用 Ninject 来组成一个对象图，其中父对象包含一个子对象，并且子对象还维护对其父对象的引用。

如果没有依赖注入，它看起来像这样：

```
public interface IParent { }
public interface IChild { }

public class Parent : IParent
{
    public Parent()
    {
        Child = new Child(this);
    }

    public IChild Child { get; private set; }       
}

public class Child : IChild
{
    public Child(IParent parent)
    {
        Parent = parent;
    }

    public IParent Parent { get; private set; }
} 
```

我希望能够配置 Ninject 绑定以支持这种关系，以便`IParent`可以在瞬态范围内实例化多个实例，每个实例都会自动填充一个`IChild`持有对它的循环引用的实例。

我已经阅读了建议 Ninject 可以支持循环关系的评论，但我无法得出一个有效的配置。

请问有什么建议吗？

谢谢，

蒂姆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T13:35:49.763

万一其他人遇到这个问题，这是我使用的解决方案（尽管我接受可能存在更好的解决方案）：

```
public interface IParent { }

public interface IChild
{
    IParent Parent { get; set; }
}

public class Parent : IParent, IInitializable
{
    public Parent(IChild child)
    {
        Child = child;
    }

    public IChild Child { get; private set; }

    public void Initialize()
    {
        Child.Parent = this;
    }
}

public class Child : IChild
{
    public IParent Parent { get; set; }
} 
```

关键是在父类中实现 Ninject 的`IInitializable`接口，使得它在合成完成后接收回调。在此回调处理程序中，父实例简单地为子对象分配对`this`.

# delphi - 4 KB 卡在 RemotThread

> ID：13561613
> 
> 赞同：0
> 
> 时间：2012-11-26T09:06:06.640
> 
> 标签：delphi, winapi, memory, memory-management

我使用此代码段将一个小函数注入到这样的远程进程中：

```
function InjectMemory(Process: LongWord; Memory: pointer; Len: longword): pointer;
var
  BytesWritten: longword;
begin
  Result := VirtualAllocEx(Process, nil, Len, MEM_COMMIT or MEM_RESERVE, PAGE_EXECUTE_READWRITE);
  WriteProcessMemory(Process, Result, Memory, Len, BytesWritten);
end;

function MyFunc ( p : pointer ) : Integer; stdcall;
begin end;

var
 PHandle        : Cardinal;
 RemoteThreadID : Cardinal;
begin
 pHandle := OpenProcess (PROCESS_ALL_ACCESS, false, 1234)
 if pHandle <> 0 then
  pThreadAddress := InjectMemory (pHandle, @MyThread, SizeOfProc(@MyThread)); 
  CreateRemoteThread (pHandle, nil, 0, pThreadAddress, nil, 0, RemoteThreadID);
  CloseHandle (pHandle)
 end;
end; 
```

SizeOfProc 函数：

```
uses
  Windows, sysutils;

function SizeOfCode(Code: pointer): integer;
function SizeOfProc(Proc: pointer): integer;

implementation

const
  Opcodes1: array [0..255] of word =
  (
    (16913),(17124),(8209),(8420),(33793),(35906),(0),(0),(16913),(17124),(8209),(8420),(33793),(35906),(0),(0),(16913),
    (17124),(8209),(8420),(33793),(35906),(0),(0),(16913),(17124),(8209),(8420),(33793),(35906),(0),(0),(16913),
    (17124),(8209),(8420),(33793),(35906),(0),(32768),(16913),(17124),(8209),(8420),(33793),(35906),(0),(32768),(16913),
    (17124),(8209),(8420),(33793),(35906),(0),(32768),(529),(740),(17),(228),(1025),(3138),(0),(32768),(24645),
    (24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(69),
    (69),(69),(69),(69),(69),(69),(69),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(24645),(0),
    (32768),(228),(16922),(0),(0),(0),(0),(3072),(11492),(1024),(9444),(0),(0),(0),(0),(5120),
    (5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(5120),(1296),
    (3488),(1296),(1440),(529),(740),(41489),(41700),(16913),(17124),(8209),(8420),(17123),(8420),(227),(416),(0),
    (57414),(57414),(57414),(57414),(57414),(57414),(57414),(32768),(0),(0),(0),(0),(0),(0),(32768),(33025),
    (33090),(769),(834),(0),(0),(0),(0),(1025),(3138),(0),(0),(32768),(32768),(0),(0),(25604),
    (25604),(25604),(25604),(25604),(25604),(25604),(25604),(27717),(27717),(27717),(27717),(27717),(27717),(27717),(27717),(17680),
    (17824),(2048),(0),(8420),(8420),(17680),(19872),(0),(0),(2048),(0),(0),(1024),(0),(0),(16656),
    (16800),(16656),(16800),(33792),(33792),(0),(32768),(8),(8),(8),(8),(8),(8),(8),(8),(5120),
    (5120),(5120),(5120),(33793),(33858),(1537),(1602),(7168),(7168),(0),(5120),(32775),(32839),(519),(583),(0),
    (0),(0),(0),(0),(0),(8),(8),(0),(0),(0),(0),(0),(0),(16656),(416)
  );

  Opcodes2: array [0..255] of word =
  (
    (280),(288),(8420),(8420),(65535),(0),(0),(0),(0),(0),(65535),(65535),(65535),(272),(0),(1325),(63),
    (575),(63),(575),(63),(63),(63),(575),(272),(65535),(65535),(65535),(65535),(65535),(65535),(65535),(16419),
    (16419),(547),(547),(65535),(65535),(65535),(65535),(63),(575),(47),(575),(61),(61),(63),(63),(0),
    (32768),(32768),(32768),(0),(0),(65535),(65535),(65535),(65535),(65535),(65535),(65535),(65535),(65535),(65535),(8420),
    (8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(8420),(16935),
    (63),(63),(63),(63),(63),(63),(63),(63),(63),(63),(63),(63),(63),(63),(63),(237),
    (237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(101),(237),(1261),
    (1192),(1192),(1192),(237),(237),(237),(0),(65535),(65535),(65535),(65535),(65535),(65535),(613),(749),(7168),
    (7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(7168),(16656),
    (16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(16656),(0),
    (0),(32768),(740),(18404),(17380),(49681),(49892),(0),(0),(0),(17124),(18404),(17380),(32),(8420),(49681),
    (49892),(8420),(17124),(8420),(8932),(8532),(8476),(65535),(65535),(1440),(17124),(8420),(8420),(8532),(8476),(41489),
    (41700),(1087),(548),(1125),(9388),(1087),(33064),(24581),(24581),(24581),(24581),(24581),(24581),(24581),(24581),(65535),
    (237),(237),(237),(237),(237),(749),(8364),(237),(237),(237),(237),(237),(237),(237),(237),(237),
    (237),(237),(237),(237),(237),(63),(749),(237),(237),(237),(237),(237),(237),(237),(237),(65535),
    (237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(237),(0)
  );

  Opcodes3: array [0..9] of array [0..15] of word =
  (
    ((1296),(65535),(16656),(16656),(33040),(33040),(33040),(33040),(1296),(65535),(16656),(16656),(33040),(33040),(33040),(33040)),
    ((3488),(65535),(16800),(16800),(33184),(33184),(33184),(33184),(3488),(65535),(16800),(16800),(33184),(33184),(33184),(33184)),
    ((288),(288),(288),(288),(288),(288),(288),(288),(54),(54),(48),(48),(54),(54),(54),(54)),
    ((288),(65535),(288),(288),(272),(280),(272),(280),(48),(48),(0),(48),(0),(0),(0),(0)),
    ((288),(288),(288),(288),(288),(288),(288),(288),(54),(54),(54),(54),(65535),(0),(65535),(65535)),
    ((288),(65535),(288),(288),(65535),(304),(65535),(304),(54),(54),(54),(54),(0),(54),(54),(0)),
    ((296),(296),(296),(296),(296),(296),(296),(296),(566),(566),(48),(48),(566),(566),(566),(566)),
    ((296),(65535),(296),(296),(272),(65535),(272),(280),(48),(48),(48),(48),(48),(48),(65535),(65535)),
    ((280),(280),(280),(280),(280),(280),(280),(280),(566),(566),(48),(566),(566),(566),(566),(566)),
    ((280),(65535),(280),(280),(304),(296),(304),(296),(48),(48),(48),(48),(0),(54),(54),(65535))
  );

function SizeOfCode(Code: pointer): integer;
var
  Opcode: word;
  Modrm: byte;
  Fixed, AddressOveride: boolean;
  Last, OperandOveride, Flags, Rm, Size, Extend: longword;
begin
  try
    Last := longword(Code);
    if Code <> nil then
    begin
      AddressOveride := False;
      Fixed := False;
      OperandOveride := 4;
      Extend := 0;
      repeat
        Opcode := byte(Code^);
        Code := pointer(longword(Code) + 1);
        if Opcode = $66 then
        begin
          OperandOveride := 2;
        end
        else if Opcode = $67 then
        begin
          AddressOveride := True;
        end
        else
        begin
          if not ((Opcode and $E7) = $26) then
          begin
            if not (Opcode in [$64..$65]) then
            begin
              Fixed := True;
            end;
          end;
        end;
      until Fixed;
      if Opcode = $0f then
      begin
        Opcode := byte(Code^);
        Flags := Opcodes2[Opcode];
        Opcode := Opcode + $0f00;
        Code := pointer(longword(Code) + 1);
      end
      else
      begin
        Flags := Opcodes1[Opcode];
      end;
      if ((Flags and $0038) <> 0) then
      begin
        Modrm := byte(Code^);
        Rm := Modrm and $7;
        Code := pointer(longword(Code) + 1);
        case (Modrm and $c0) of
          $40: Size := 1;
          $80:
            begin
              if AddressOveride then
              begin
                Size := 2;
              end
              else
                Size := 4;
              end;
          else
          begin
            Size := 0;
          end;
        end;
        if not (((Modrm and $c0) <> $c0) and AddressOveride) then
        begin
          if (Rm = 4) and ((Modrm and $c0) <> $c0) then
          begin
            Rm := byte(Code^) and $7;
          end;
          if ((Modrm and $c0 = 0) and (Rm = 5)) then
          begin
            Size := 4;
          end;
          Code := pointer(longword(Code) + Size);
        end;
        if ((Flags and $0038) = $0008) then
        begin
          case Opcode of
            $f6: Extend := 0;
            $f7: Extend := 1;
            $d8: Extend := 2;
            $d9: Extend := 3;
            $da: Extend := 4;
            $db: Extend := 5;
            $dc: Extend := 6;
            $dd: Extend := 7;
            $de: Extend := 8;
            $df: Extend := 9;
          end;
          if ((Modrm and $c0) <> $c0) then
          begin
            Flags := Opcodes3[Extend][(Modrm shr 3) and $7];
          end
          else
          begin
            Flags := Opcodes3[Extend][((Modrm shr 3) and $7) + 8];
          end;
        end;
      end;
      case (Flags and $0C00) of
        $0400: Code := pointer(longword(Code) + 1);
        $0800: Code := pointer(longword(Code) + 2);
        $0C00: Code := pointer(longword(Code) + OperandOveride);
        else
        begin
          case Opcode of
            $9a, $ea: Code := pointer(longword(Code) + OperandOveride + 2);
            $c8: Code := pointer(longword(Code) + 3);
            $a0..$a3:
              begin
                if AddressOveride then
                begin
                  Code := pointer(longword(Code) + 2)
                end
                else
                begin
                  Code := pointer(longword(Code) + 4);
                end;
              end;
          end;
        end;
      end;
    end;
    Result := longword(Code) - Last;
  except
    Result := 0;
  end;
end;

function SizeOfProc(Proc: pointer): integer;
var
  Length: longword;
begin
  Result := 0;
  repeat
    Length := SizeOfCode(Proc);
    Inc(Result, Length);
    if ((Length = 1) and (byte(Proc^) = $C3)) then Break;
    Proc := pointer(longword(Proc) + Length);
  until Length = 0;
end; 
```

RemoteThread 工作得很好。但我可以看到在线程应该被释放之后还有 4 kbytes（或字节？！）。有什么我想念的吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:57:45.343

看来你没有打电话`VirtualFreeEx`，所以内存没有被释放。如果您想释放它，那么您显然需要调用`VirtualFreeEx`. 但是，您需要等到远程线程发出信号后再执行此操作。

在评论中你说：

> 我的进程在线程之前关闭。那我应该如何释放它？

好吧，这将是一个挑战！一个建议是您根本不尝试释放此内存。相反，这将确保您只分配一次。每次创建线程时都在分配内存。更改该策略以分配内存一次，然后为您创建的每个后续线程重新使用它。

另一种方法是确保您的进程等待远程线程，然后释放。通过调用`WaitForSingleObject`远程线程句柄来做到这一点。请注意，远程线程句柄是来自`CreateRemoteThread`. 您目前忽略它。

# python - pip：如何安装 git pull 请求

> ID：13561618
> 
> 赞同：42
> 
> 时间：2012-11-26T09:06:50.923
> 
> 标签：python, pip

我想用 pip 安装一个 git pull 请求，以便在我的本地 virtualenv 中进行测试。我想直接从 github 安装它，而不创建本地 git 存储库。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-26T09:06:50.923

您可以通过附加哈希将确切的提交添加到 URL：

```
pip install git+https://github.com/other-repository/project.git@remote_branch_name 
```

例子：

```
pip install --user git+https://github.com/d1b/pip.git@fix_pip_build_directory 
```

或单次提交。但是，如果拉取请求（远程分支）得到更新，这不会得到更新：

```
pip install --user git+https://github.com/d1b/pip.git@d89b5803db2b520e754b9b26b771d22121738637 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-04-30T06:40:33.283

github 为您提供的一个简洁功能是它抢先合并拉取请求并将它们作为您可以专门获取的隐藏引用提供。如果您正在构建一个 CI 系统来测试拉取请求，这非常棒。

直到最近，pip 还不支持指定这些隐藏的 refs，但在上个月，pip 已经对此提供了支持[（](https://github.com/pypa/pip/commit/737dfbfc71490b41ab92c6d49b0c303c0e197f46)确认在 10.0.1 中工作）。

以下命令将为以下命令安装合并版本的拉取请求 123 `user/repo`：

```
pip install git+https://github.com/user/repo.git@refs/pull/123/merge 
```

此外，要安装拉取请求 123 的未合并版本（不要弄乱 github API 来追踪原始分支！）：

```
pip install git+https://github.com/user/repo.git@refs/pull/123/head 
```

# mysql - 原始 sql 值是数组。红宝石

> ID：13561619
> 
> 赞同：2
> 
> 时间：2012-11-26T09:06:53.280
> 
> 标签：mysql, sql, ruby, ruby-on-rails-3

尝试执行以下操作

```
ElectricityProfile.find_by_sql ["select * fromelectricity_profiles where owner_id IN ?", array]
```

但是似乎 sql 不接受数组。

有没有其他方法可以根据数组检查列？

使用：Rails 3.2.x Ruby 193 MySQL

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:12:31.837

你需要在`?`.

```
ElectricityProfile.find_by_sql ["select * from electricity_profiles where owner_id IN (?)", array] 
```

或者

```
ElectricityProfile.where("owner_id IN (?)", array) 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-26T09:15:31.907

使用下面的。

```
 ElectricityProfile.find_by_sql("select * from electricity_profiles where owner_id in (?)", array]) 
```

# sql - SQL Server 数据库设计和外键混淆

> ID：13561622
> 
> 赞同：3
> 
> 时间：2012-11-26T09:06:58.253
> 
> 标签：sql, sql-server, database-design, ssms, sql-server-2008

我需要帮助以使我的数据库设计更好。

db 设计来自老开发人员，现在我试图通过放置外键来更好地设计，这样就不会有任何孤儿表。

**情况1：**

这是故事：

我有表格`ProductGroup`（PG），`ProductType`（PT），`Brand`（B），`Design`（D）来保留项目的所有具体细节。然后将所有四个表组装成一个表`ProductMaster`(PM)，它们将在其中连接并生成一个`ProdCd`.

当删除任何一行时`PG,PT,B,G`，PM 中的所有相关行也将被删除。

有表格的示例（代码将被简化）：

```
CREATE TABLE [dbo].[ProductMaster](
    [ProdCd] [varchar](25) NOT NULL,
    [GCd] [varchar](15) NULL,
    [ACd] [varchar](15) NULL,
    [BCd] [varchar](15) NULL,
    [CCd] [varchar](15) NULL,
    [ProdType] [varchar](50) NULL,
    [BrandCd] [varchar](25) NULL,
    [Design] [varchar](150) NULL,
 CONSTRAINT [PK_ProductMaster] PRIMARY KEY CLUSTERED 
(
    [ProdCd] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[ProductGroup](
    [GCd] [varchar](15) NOT NULL,
    [GroupDesc] [varchar](150) NULL,
 CONSTRAINT [PK_ProductGroup] PRIMARY KEY CLUSTERED 
(
    [GCd] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[ProductType](
    [GCd] [varchar](1) NOT NULL,
    [ACd] [varchar](15) NOT NULL,
    [ProdType] [varchar](50) NOT NULL,
    [TypeDesc] [varchar](150) NULL,
 CONSTRAINT [PK_ProductType] PRIMARY KEY CLUSTERED 
(
    [GCd] ASC,
    [ACd] ASC,
    [ProdType] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[Brand](
    [GCd] [char](1) NOT NULL,
    [BCd] [varchar](15) NOT NULL,
    [BrandCd] [varchar](25) NOT NULL,
    [BrandName] [varchar](75) NULL,
 CONSTRAINT [PK_Brand] PRIMARY KEY CLUSTERED 
(
    [GCd] ASC,
    [BCd] ASC,
    [BrandCd] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[Design](
    [GCd] [char](1) NOT NULL,
    [CCd] [varchar](15) NOT NULL,
    [DesignCd] [varchar](25) NOT NULL,
    [DesignDesc] [varchar](150) NULL,
 CONSTRAINT [PK_Design] PRIMARY KEY CLUSTERED 
(
    [GCd] ASC,
    [CCd] ASC,
    [DesignCd] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

样本是：

*   `ProductMaster`( `100010010001, 1, 0001, 001, 0001, PC-10 A, ZEN, PLAIN WHITE`)
*   `ProductGroup`( `1, Finished Goods`)
*   `ProdType`( `1, 0001, PC-10 A, Dinner Plate 10 Inch`)
*   `Brand`( `1, 001, ZEN, ZEN`)
*   `Design`( `1, 0001, PLAIN WHITE, NO DECAL PLAIN WHITE`)

如果我删除 的`Design`行`(1, 0001, PLAIN WHITE, NO DECAL PLAIN WHITE)`，整个行都`ProductMaster`将被删除。

**案例二：**

我有一个包含标题和详细信息的交易表。明细只保留表“ProductType”中的“ACd”，其中“GCd”始终为 1。当修改 PG、PT、B、G 时，事务上的记录也被修改为“GCd”=1。

表是这样的：

```
CREATE TABLE [dbo].[PFHdr](
    [FNO] [varchar](25) NOT NULL,
    [FMO] [varchar](6) NULL,
    [FDate] [datetime] NULL,
    [GCd] [int] NULL, *This is group related to the transcation not with the PM
    [IQtyc] [float] NULL,
    [RQtyc] [float] NULL,
    [TQtyc] [float] NULL,
 CONSTRAINT [PK_PFrmHdr] PRIMARY KEY CLUSTERED 
(
    [FNO] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY]

CREATE TABLE [dbo].[PFDtl](
    [FNO] [varchar](25) NOT NULL,
    [ACd] [varchar](15) NOT NULL,
    [Input] [float] NULL,
    [Reject] [float] NULL,
    [Transfer] [float] NULL,
 CONSTRAINT [PK_PFrmDtl] PRIMARY KEY CLUSTERED 
(
    [FNO] ASC,
    [ACd] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] 
```

样本是：

*   PFHdr(201211-00001,00001,2012-11-26,1,10,0,10)
*   PFDtl(201211-00001,0001,5,0,5)
*   PFDtl(201211-00001,0002,5,0,5)

`ProdType`如果( )的 ProductType 记录`1, 0001, PC-10 A, Dinner Plate 10 Inch`被删除，PFDtl 上的记录也被删除。但是如果记录`ProdType`（`7, 0001, PC-12 A, Dinner Plate 12 Inch`）被删除，PFdtl 上的记录并没有改变。

请帮助我，对设计发表评论，

1.  如何让它变得更好？
2.  如何应用外键是可能的？
3.  对数据库设计有什么建议吗？
4.  在 CASE 2 中，我应该添加列“GCd”以便能够使用外键吗？
5.  如果 ProductType 上的 ProdType 必须是唯一的，我应该将其用作主键（使用 GCd 和 ACd）还是只需要设置 UNIQUE 或不设置任何限制

**笔记：**

1.  旧设计没有任何外键，都是应用受限的
2.  我添加第二种情况

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:55:36.327

这里真的有两个问题。是否存在外键？如果存在外键，是否声明了它们？当我阅读您的架构时，其中有一些外键，例如 ProductMaster.GCd。他们只是没有被宣布。

声明外键的优点是它限制数据以防止丢失“引用完整性”，即外键实例引用不存在的主键的情况。这称为“孤立引用”。一般来说，强制引用完整性的优势远远大于在插入时让 DBMS 检查完整性的成本，以及处理被拒绝数据所需的额外编程。

如果您想向现有数据库添加引用完整性约束，您可能必须在 DBMS 允许您放入约束之前找到并处理“孤立引用”。这通常会涉及大量使用“WHERE NOT EXISTS”构造。

太糟糕了，以前的开发人员一开始就没有声明外键。

# iphone - 在iphone中单击按钮时如何查看tableview控制器

> ID：13561635
> 
> 赞同：1
> 
> 时间：2012-11-26T09:07:54.823
> 
> 标签：iphone, ios, xcode4.5

单击按钮时，我需要在下一个窗口中查看表格视图容器。我通过故事板将按钮与文件所有者连接并查看了表格，但我需要将其作为程序进行。我想给一些事件处理程序按钮并查看表格。有没有可能这样做。我附上图片以供参考，

![从按钮到表格视图](../Images/d2e1bb24b535b5f4f112509b0f88f4d2.png) 我用这个代码，

```
TableViewController *yourTableViewController = [[TableViewController alloc] initWithNibName:@"TableViewController" bundle:nil];
self.navigationController pushViewController:yourTableViewController animated:YES]; 
```

在“ viewDidLoad() ”中，但没有显示。我是否需要在情节提要中配置任何内容来做到这一点。请建议我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:33:23.843

放入您单击的按钮而不是viewdidload。

观看：[mobile.tutsplus.com/tutorials/iphone/uitableview](http://mobile.tutsplus.com/tutorials/iphone/uitableview)

# javascript - 使用 CSS 灵活的居中布局

> ID：13561638
> 
> 赞同：2
> 
> 时间：2012-11-26T09:08:02.450
> 
> 标签：javascript, html, css, layout, user-interface

我想`<div>`在页面上居中容器标签，使其满足以下条件：

1.  当屏幕宽度大于`<div>`的最大宽度时，我希望`<div>`在屏幕内水平居中。
2.  当屏幕宽度等于`<div>`的最大宽度时，`<div>`应该填满整个屏幕。
3.  当屏幕宽度小于`<div>`的最大宽度时，`<div>`应该调整大小以匹配屏幕的宽度。

这是否可能仅使用 CSS，或者我需要使用 JavaScript 来实现这种灵活性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:13:21.983

> 这是否可能仅使用 CSS，或者我需要使用 JavaScript 来实现这种灵活性？

这是很有可能的。

## 如何？

这里的关键是 CSS[`max-width`](https://developer.mozilla.org/en-US/docs/CSS/max-width)属性以及`margin: 0 auto;`居中。

这是一个评论相当好的 jsFiddle: [little link](http://jsfiddle.net/eGXrU/)。

**HTML：**

```
<div class = "inner">

</div> 
```

**CSS：**

```
.inner {
    margin: 0 auto; /*makes sure the div is centered*/
    max-width: 300px; /*maximum width*/
    width: 100%; /*default*/
    height: 100px; /*just for clarity*/
    background: dodgerblue; /*prettiness*/
} 
```

正如**@Cerbrus**在评论中提到的那样，`margin: 0 auto;`实际上`margin-top`也是如此。因此，如果您愿意为 设置不同的值`margin-top`，请改用以下内容：

```
margin-left: auto;
margin-right: auto; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:12:26.760

这将使您的 div`id='myDiv'`在 600 像素以下的屏幕上拉伸到 100% 宽度，否则它将居中。

```
#myDiv{
    width:600px;
    margin-left: auto;
    margin-right: auto;
}

@media only screen and (max-width 600px) {
    #myDiv{
        width:100%;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:08:54.237

看这个例子——

```
<div id="container"></div>​ 
```

CSS-

```
#container
{
   margin-left:auto;
   margin-right:auto;
   height:500px;
   max-width:400px;
   background-color:yellow;
   min-width:100px;  //ensures that your div will resize to match the width of the screen
}​ 
```

在这里查看工作演示 - [http://jsfiddle.net/UgxZe/4/](http://jsfiddle.net/UgxZe/4/)

您可以观察您需要的所有 3 个场景。

# jsf - Primefaces 数据表丢失数据

> ID：13561642
> 
> 赞同：1
> 
> 时间：2012-11-26T09:08:17.617
> 
> 标签：jsf, datatable, primefaces, lazy-loading

我在使用 PrimeFaces 3.4.1 和 JSF 2.1.6 的数据表中遇到以下问题。第一次加载页面时，dataTable 会填充来自我们数据库的数据，但是每当在页面上执行操作（编辑链接、dataTable 排序或过滤）时，dataTable 都会丢失其数据。DataTable 具有来自此类的元素：

```
package es.cne.sicbios.entities.tramites.envios;

import java.io.Serializable;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Entity;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.OneToOne;

import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataContactoEconomico;
import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataEmpresaFilial;
import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataHistoricoTipoSujeto;
import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataPersonaContacto;
import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataPlantaProduccion;
import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataRepresentante;
import es.cne.sicbios.entities.tramites.envios.sujeto.data.EnvioDataSujeto;
import es.cne.sicbios.entities.tramites.solicitudes.SolicitudSujeto;

@SuppressWarnings("serial")
@Entity
public class EnvioSujeto extends Envio implements Serializable{

@ManyToOne(optional = false, cascade = CascadeType.ALL)
private SolicitudSujeto solicitud;

@OneToOne(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private EnvioDataContactoEconomico envioDataContactoEconomico;

@OneToMany(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private List<EnvioDataEmpresaFilial> enviosDataEmpresaFilial;

@OneToMany(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private List<EnvioDataHistoricoTipoSujeto> enviosDataHistoricoTipoSujeto;

@OneToMany(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private List<EnvioDataPlantaProduccion> enviosDataPlantaProduccion;

@OneToOne(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private EnvioDataSujeto envioDataSujeto;

@OneToMany(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private List<EnvioDataPersonaContacto> enviosDataPersonaContacto;

@OneToMany(mappedBy = "envioSujeto", cascade = CascadeType.ALL)
private List<EnvioDataRepresentante> enviosDataRepresentante;

public SolicitudSujeto getSolicitud() {
    return solicitud;
}

public void setSolicitud(final SolicitudSujeto solicitud) {
    this.solicitud = solicitud;
}

... //rest of getters and setters
} 
```

在对 dataTable 执行操作后进行调试时，我们仅保留 envioDatasujeto 字段上的数据，元素上的所有其他数据都会丢失。

这是xhtml：

```
<ui:composition template="/templates/layout.xhtml"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:blb="http://ecb.bilbomatica.es/components">

    <ui:define name="content">
        <f:loadBundle basename="es.cne.sicbios.gestionsujetos" var="gestionmsg" />
        <h:form id="formulario">
            <p:messages id="messages" showDetail="true" autoUpdate="true"
                closable="true" />

                <p:dataTable var="envioSujeto"
                value="#{listadoEnviosSujetoMB.lazyListaAllEnvios}" 
                paginator="true" rows="10"
                paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                rowsPerPageTemplate="5,10,15"               
                selectionMode="single"  
                selection="#{listadoEnviosSujetoMB.envioSeleccionado}" 
                id="listaEnviosSujetos" 
                lazy="true">

                <f:facet name="header">  
                    #{gestionmsg.txt_listadoEnviosSujetos} 
                </f:facet>

                <p:column sortBy="#{envioSujeto.envioDataSujeto.datosSujeto.acronimo}" headerText="#{gestionmsg.column_acronimo}"
                    filterBy="#{envioSujeto.envioDataSujeto.datosSujeto.acronimo}">
                    <h:outputText value="#{envioSujeto.envioDataSujeto.datosSujeto.acronimo}" />                    
                </p:column>

                <p:column sortBy="#{envioSujeto.solicitud.id}"
                    headerText="#{gestionmsg.column_id_tramite}"
                    filterBy="#{envioSujeto.solicitud.id}"
                    filterMatchMode="contains">
                    <h:outputText value="#{envioSujeto.solicitud.id}" />                    
                </p:column>

                <p:column sortBy="#{envioSujeto.fechaCreacion.time}"
                    headerText="#{gestionmsg.column_fechaCreacion}"
                    filterBy="#{envioSujeto.fechaCreacion.time}"
                    filterMatchMode="contains">
                    <h:outputText value="#{envioSujeto.fechaCreacion.time}" >
                        <f:convertDateTime pattern="dd/mm/yyyy"/>
                    </h:outputText>
                </p:column>

                <p:column sortBy="#{envioSujeto.tipo}"
                    headerText="#{gestionmsg.column_tipoEnvio}"
                    filterBy="#{envioSujeto.tipo}"
                    filterMatchMode="contains">
                    <h:outputText value="#{envioSujeto.tipo}" />
                </p:column>

                <p:column sortBy="#{envioSujeto.solicitud.estado}"
                    headerText="#{gestionmsg.column_estado}"
                    filterBy="#{envioSujeto.solicitud.estado}"
                    filterMatchMode="contains">
                    <h:outputText value="#{envioSujeto.solicitud.estado}" />
                </p:column>

                <p:column sortBy="#{envioSujeto.idRegistro}"
                    headerText="#{gestionmsg.column_idRegistro}"
                    filterBy="#{envioSujeto.idRegistro}"
                    filterMatchMode="contains">
                    <h:outputText value="#{envioSujeto.idRegistro}" />
                </p:column>

                <p:column sortBy="#{envioSujeto.id}"
                    headerText="id"
                    filterBy="#{envioSujeto.id}"
                    filterMatchMode="contains">
                    <h:outputText value="#{envioSujeto.id}" />
                </p:column>
                <ui:remove>
                <!-- 
                <p:column 
                    headerText="#{gestionmsg.column_bloqueo}"
                    >
                    <h:outputText value="" />
                </p:column>
                 -->
                 </ui:remove>

            </p:dataTable>

            <p:commandLink icon="ui-icon-pencil"
                update=":formulario"
                actionListener="#{listadoEnviosSujetoMB.goToEditarEnvio}"  >    
                <h:outputText value="Editar" />                                         
            </p:commandLink>
        </h:form>
    </ui:define>
</ui:composition> 
```

以及它的托管bean：

```
package es.cne.sicbios.managedbean.gestionsujetos;

import java.io.Serializable;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.ViewScoped;

import es.cne.sicbios.entities.tramites.envios.Envio;
import es.cne.sicbios.services.tramites.envios.IEnvioService;
import es.cne.sicbios.utils.FacesUtils;

@SuppressWarnings("serial")
@ViewScoped
@ManagedBean(name = "listadoEnviosSujetoMB")
public class ListadoEnviosSujetoMB implements Serializable {

@ManagedProperty(value = "#{envioSujetoService}")
private IEnvioService envioService;
private Envio envio;
private List<Envio> listaAllEnvios;
private LazyEnvioSujetoDataModel lazyListaAllEnvios;
private Envio envioSeleccionado;

/**
 * 
 * Getters y Setters
 */
@PostConstruct
public void init(){
    if (lazyListaAllEnvios == null) {
        lazyListaAllEnvios = new LazyEnvioSujetoDataModel(envioService);
    }
}

public void setEnvioService(final IEnvioService envioService) {
    this.envioService = envioService;
}

public Envio getEnvio() {
    return envio;
}

public void setEnvio(final Envio envio) {
    this.envio = envio;
}

public List<Envio> getListaAllEnvios() {
    if (listaAllEnvios == null) {
        listaAllEnvios =  envioService.getAll();
    }
    return listaAllEnvios;
}

public void setListaAllEnvios(final List<Envio> listaAllEnvios) {
    this.listaAllEnvios = listaAllEnvios;
}

public Envio getEnvioSeleccionado() {
    return envioSeleccionado;
}

public void setEnvioSeleccionado(final Envio envioSeleccionado) {
    this.envioSeleccionado = envioSeleccionado;
}

/**
 * Métodos de navegación
 */
public String goToEditarEnvio() {
    FacesUtils.saveObjectInFlashScope("envio", envioSeleccionado);
    return "/pages/gestionsujetos/envio.xhtml?faces-redirect=true";
}

public LazyEnvioSujetoDataModel getLazyListaAllEnvios() {
    return lazyListaAllEnvios;
}

public void setLazyListaAllEnvios(final LazyEnvioSujetoDataModel lazyListaAllEnvios) {
    this.lazyListaAllEnvios = lazyListaAllEnvios;
}
} 
```

此外，我们尝试对数据进行延迟加载，但它不起作用。这是我们使用的数据模型（PrimeFaces.org 上的延迟加载示例的改编类）：

```
package es.cne.sicbios.managedbean.gestionsujetos;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import javax.faces.bean.ViewScoped;

import org.primefaces.model.LazyDataModel;
import org.primefaces.model.SelectableDataModel;
import org.primefaces.model.SortOrder;

import es.cne.sicbios.entities.tramites.envios.Envio;
import es.cne.sicbios.services.tramites.envios.IEnvioService;

/**
 * Dummy implementation of LazyDataModel that uses a list to mimic a real datasource like a database.
 */
@ViewScoped
public class LazyEnvioSujetoDataModel extends LazyDataModel<Envio> implements Serializable, SelectableDataModel<Envio> {

/**
 * 
 */
private static final long serialVersionUID = 983251078912322527L;
private final List<Envio> datasource;

public List<Envio> getDatasource() {
    return datasource;
}

public LazyEnvioSujetoDataModel(final IEnvioService envioService) {
    this.datasource = envioService.getAll();
}

@Override
public Envio getRowData(final String rowKey) {
    for(final Envio envio : datasource) {
        if(envio.getId().equals(rowKey))
            return envio;
    }

    return null;
}

@Override
public Object getRowKey(final Envio envio) {
    return envio.getId();
}

@Override
public List<Envio> load(final int first, final int pageSize,
        final String sortField, final SortOrder sortOrder, final Map<String,String> filters) {
    final List<Envio> data = new ArrayList<Envio>();

    //filter
    for(final Envio envio : datasource) {
        boolean match = true;

        for(final Iterator<String> it = filters.keySet().iterator(); it.hasNext();) {
            try {
                final String filterProperty = it.next();
                final String filterValue = filters.get(filterProperty);
                final String fieldValue = String.valueOf(envio.getClass().getField(filterProperty).get(envio));

                if(filterValue == null || fieldValue.startsWith(filterValue)) {
                    match = true;
                }
                else {
                    match = false;
                    break;
                }
            } catch(final Exception e) {
                match = false;
            }
        }

        if(match) {
            data.add(envio);
        }
    }

    //sort
    //      if(sortField != null) {
    //          Collections.sort(data, new LazySorter(sortField, sortOrder));
    //      }

    //rowCount
    final int dataSize = data.size();
    this.setRowCount(dataSize);

    //paginate
    if(dataSize > pageSize) {
        try {
            return data.subList(first, first + pageSize);
        }
        catch(final IndexOutOfBoundsException e) {
            return data.subList(first, first + (dataSize % pageSize));
        }
    }
    else {
        return data;
    }
}
} 
```

对这个问题有什么想法吗？在此先感谢，胡安乔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T09:14:19.653

团队合作的朋友得到了这个问题的答案。我们正在使用 Spring Tool Suite，有时它会更改 JSF 托管 bean 的保存方法。我们需要在我们的 web.xml 上有这个：

```
<context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>server</param-value>
</context-param> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T23:30:44.513

我有同样的问题，我意识到这是因为我不小心使用后才修复它

```
import javax.faces.bean.ViewScoped; 
```

包而不是

```
import javax.faces.view.ViewScoped; 
```

# android - 如何禁用长按android的键盘

> ID：13561643
> 
> 赞同：3
> 
> 时间：2012-11-26T09:08:21.367
> 
> 标签：android, android-layout

我使用文本框来查看从字符串文件中获取的文本。如果用户愿意，我想给机会从编辑文本中复制文本。它可以完全或部分复制。

当长按事件发生时，复制消息出来。但是vertual键盘也出来了。我无法隐藏它。我尝试了几种方法，这是我的 xml 代码。

```
<EditText
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginBottom="23dp"
    android:background="@null"
    android:editable="false"
    android:gravity="right"
    android:inputType="none"
    android:padding="@dimen/padding_maintextview"
    android:text="@string/text"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

这是java代码。

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(tvchange12.getWindowToken(), 0);
tvchange12.onCheckIsTextEditor(); 
```

这是 MEdit 类

```
public class MEditText extends EditText {
    public MEditText(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

    @Override
    public boolean onCheckIsTextEditor() {
        return false;
    }
} 
```

请帮我隐藏垂直键盘以进行长按。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:17:18.600

如果您不需要编辑文本，请使用 TextView 代替，就像这个用户可以在没有键盘的情况下选择和复制文本

# .htaccess - 301重定向和unicode输出

> ID：13561654
> 
> 赞同：0
> 
> 时间：2012-11-26T09:08:58.707
> 
> 标签：.htaccess, joomla, joomla2.5, http-redirect, joomla-sef-urls

在一个主要的网站更新之后，我正在做各种 301 指令，但是一些 404 页面似乎一次又一次地出现。

该模式非常简单，因为 unicode 字符似乎存在问题。

但是，似乎我在这些麻烦的链接上进行了许多 301 重定向，Unicode 字符现在只是重定向链接的一部分。

因此，如果我有一个看起来像这样的 SEF url，它会给我一个 404：

```
http://mysite.com/mobileconnection-%7C-yourchoice.html 
```

理论上正确的网址是：

```
http://mysite.com/mobileconnection-|-yourchoice.html 
```

似乎我无法将其重写为正确的角色。

谁能指出我某种方向？:)

**更新**

> 问题始于谷歌网站管理员工具。显然谷歌以 Unicode 格式显示 404 URL，所以 | （管道）显示为 %7C。我使用网站管理员工具进行了重定向，最终得到了包含 %7C instad 的 SEF url。

**答案很好，我现在认为它很有用:)**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:16:21.110

这有点问题。因为不是所有的浏览器都会通过 | 字符本身，许多旧的将对其进行 URL 编码。因此，在 URL 中使用非 ASCII 符号根本不是一个好的解决方案。

此外，由于网络服务器将传递编码字符，因此很难处理此 URL，因此在重写规则中，您始终需要使用 %7C 而不是 |。

请在 URL 中使用 ASCII ;)

除了使用重定向之外，您还可以在 .htaccess 中使用 URL 重写替换`%7C`为`|`，但我不确定网络服务器是否能够处理此替换。

# android - 如何实现对 Web 服务器的轮询服务？

> ID：13561657
> 
> 赞同：2
> 
> 时间：2012-11-26T09:09:12.857
> 
> 标签：android, service, webserver, polling

我第一次在 Android 中遇到一个问题：我需要一个像轮询一样工作的服务。

我有一个 Activity 必须定期向 Web 服务器发出 POST 请求。事实上，它控制着我正在与之交谈的人是否有新消息。在实践中，如果有新消息，请求应该返回布尔值 TRUE 或 FALSE。如果为 TRUE，我会在 GUI 上收到某种警告。

也许你可以扩展它：我有一个我正在与之交谈的人的列表视图，并且我正在与之交谈的每个用户都需要该服务并返回适当的通知（始终显示在列表视图中，例如例子）。所以结果看起来就像在顶部工具栏中到达 facebook 的消息（这里我们有一个列表视图）。

如何设置此程序？它在资源/电池方面“贪婪”？

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-30T11:50:06.320

首选的机制是让电话正常向服务器发出请求，但让服务器保持套接字打开并且请求未得到响应，直到它有东西要发送（或者直到某个超时过去，当它发送一个“询问”时）我再次'消息，以防手机消失在隧道或其他地方）。

现代方法是使用 GCM 或类似方法。

# c#-4.0 - 无法在 xna 上播放视频

> ID：13561658
> 
> 赞同：0
> 
> 时间：2012-11-26T09:09:21.863
> 
> 标签：c#-4.0, xna-4.0

我在使用 xna 播放视频时遇到问题，我无法使用 xna 播放视频。它抛出异常。例外是：System.InvalidOperationException“发生意外错误”。

这是我的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace VideoGameTest1
{

    public class Game1 : Microsoft.Xna.Framework.Game
    {
        GraphicsDeviceManager graphics;
        SpriteBatch spriteBatch;

        Texture2D videotexture;
        Video video;
        VideoPlayer videoplayer;

        public Game1()
        {
            graphics = new GraphicsDeviceManager(this);
            Content.RootDirectory = "Content";
        }

        protected override void Initialize()
        {
            // TODO: Add your initialization logic here

           // IsMouseVisible = true;
            base.Initialize();
        }

        /// <summary>
        /// LoadContent will be called once per game and is the place to load
        /// all of your content.
        /// </summary>
        protected override void LoadContent()
        {
            // Create a new SpriteBatch, which can be used to draw textures.
            spriteBatch = new SpriteBatch(GraphicsDevice);

            video = Content.Load<Video>("Wildlife");
            videoplayer = new VideoPlayer();

            // TODO: use this.Content to load your game content here
        }

        /// <summary>
        /// UnloadContent will be called once per game and is the place to unload
        /// all content.
        /// </summary>
        protected override void UnloadContent()
        {
            // TODO: Unload any non ContentManager content here
        }

        protected override void Update(GameTime gameTime)
        {
            // Allows the game to exit
            if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)  
                this.Exit();

            if (videoplayer.State == MediaState.Stopped) 
            {
                videoplayer.IsLooped = true;
                videoplayer.Play(video);
            }
            // TODO: Add your update logic here

            base.Update(gameTime);
        }

        protected override void Draw(GameTime gameTime)
        {
            GraphicsDevice.Clear(Color.CornflowerBlue);

            if (videoplayer.State != MediaState.Stopped) 
            {
                videotexture = videoplayer.GetTexture();
            }

            Rectangle screen = new Rectangle(GraphicsDevice.Viewport.X, GraphicsDevice.Viewport.Y, GraphicsDevice.Viewport.Width, GraphicsDevice.Viewport.Height);

            spriteBatch.Begin();
            if (videotexture != null) 
            {
                spriteBatch.Draw(videotexture,screen, Color.White);
            }
            spriteBatch.End();

            base.Draw(gameTime);
        }
    }
} 
```

此处抛出异常：videoplayer.Play(video);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T08:14:52.717

谢谢你们！

我通过安装新的编解码器“K-lite 编解码器”来修复它

现在它运行了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:32:16.803

可能是缺乏对编解码器的支持。[该站点](http://www.mobiletechworld.com/2010/07/28/windows-phone-7-codecs-support-no-hd-video-playback-no-divx-either/)有一个受支持的编解码器列表以及哪些适用于 XNA 框架。例如，如果您的视频当前以 DIVX 编码，您的 PC 将播放它，但 WP7 不支持它。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T16:37:17.927

问题是，您正试图在更新循环中播放视频，并且每次（每秒 30 次）它都试图访问它从开始播放视频的更新。尝试将视频播放代码放在初始化部分。如果它工作正常，请在评论中回复。如果不是，那么在这里发表评论。我会进一步调查。

# url-rewriting - 模块 URL 在本地主机上工作但在服务器上不工作

> ID：13561659
> 
> 赞同：0
> 
> 时间：2012-11-26T09:09:26.327
> 
> 标签：url-rewriting, yii, url-routing

我已经通过 gii 生成了一个模块管理员并添加了基于模块的身份验证。应用程序在虚拟主机上运行为

```
www.localhost.com 
```

它的模块在 localhost 通过 url 工作正常

```
www.localhost.com/admin 
```

或者

```
www.localhost.com/admin/default 
```

但是当我在服务器上上传模块并通过 url 访问时，它会给出错误 404。我也在另一台服务器上检查过它。我的 config/main.php 作为

```
'urlManager'=>array(
                    'urlFormat'=>'path',
                    'showScriptName'=>false,
                    'rules'=>array(
                            '<controller:\w+>/<id:\d+>'=>'<controller>/view',
                            '<controller:\w+>/<action:\w+>/<id:\d+>'=>'<controller>/<action>',
                            '<controller:\w+>/<action:\w+>'=>'<controller>/<action>',
                    ),
            ), 
```

和 .htaccess 文件为

```
 Options +FollowSymLinks
IndexIgnore */*
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

请告诉我我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:20:51.357

您可能需要重写基本路径。试试这个：

```
RewriteEngine On
RewriteBase / 
```

# magento - 如何在 magento 中应用从我们自己的自定义表中获取的价格

> ID：13561661
> 
> 赞同：2
> 
> 时间：2012-11-26T09:09:40.460
> 
> 标签：magento

我想应用从我的自定义表中获取的价格（比如 my_own_prices）。我在某些情况下无法使用 magento 的价格（如分层价格或特价），我需要从我的表中获取数据并将其应用于购物车。如果可以，请回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:15:24.810

您可以使用`catalog_product_get_final_price`观察者来做到这一点。

首先在你的模块中声明观察者（假设你已经有模块）`etc/config.xml`：

```
<config>
    ...
    <frontend>
        <events>
            <catalog_product_get_final_price>
                <observers>
                    <something_unique_here>
                        <type>singleton</type>
                        <class>YourCompany_YourModule_Model_Observer</class>
                        <method>catalogProductGetFinalPrice</method>
                    </something_unique_here>
                </observers>
            </catalog_product_get_final_price>
        </events>
    </frontend>
    ...
</config> 
```

然后在你的模块中`Model\Observer.php`添加以下方法：

```
public function catalogProductGetFinalPrice($observer)
{
    $product = $observer->getEvent()->getProduct();

    // Do your queries to your custom tables here and if necessary ..
    $product->setFinalPrice(..);
} 
```

# java - 在mysql，java中计算日期范围内的价格

> ID：13561664
> 
> 赞同：2
> 
> 时间：2012-11-26T09:09:45.057
> 
> 标签：java, mysql

我们有表格，它的数据看起来像

```
startDate|endDate |price
=========+========+========  
1 dec    | 15 dec | 100  
16 dec   |31 dec  | 200  
1 jan    | 31 Jan | 300  
1 feb    | 10 feb | 30
15 feb   | 28 feb | 40
1 march  | 15 march | 50 
```

价格为一日价。现在我想计算日期之间的价格，比如 12 月 1 日到 12 月 10 日。那么价格将是（100 * 10 天）。另一个条件是计算 12 月 1 日至 1 月 15 日之间的价格，然后价格将为（（100 * 15 天）+（200*15 天）+（300*15 天））。还有一个条件是计算 2 月 20 日至 3 月 5 日之间的价格，然后价格将是 (40*8days + 50*5)。如何根据数据价格计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:19:03.237

首先，您需要选择任何区间拟合查询日期。然后您可以计算每个间隔的天数和间隔的价格。然后简单总结一下。

```
select 
 SUM(
  DATEDIFF(
   if( end_date > '2012-09-12', '2012-09-12', end_date ),
   if( start_date < '2012-09-02', '2012-09-02', start_date )
  ) * price
 )
from prices where start_date < '2012-09-12' and end_date > '2012-09-02' 
```

SqlFiddle - [http://sqlfiddle.com/#!2/abc0b/11/0](http://sqlfiddle.com/#!2/abc0b/11/0)

这是 INT 时间的示例

```
select 
 SUM(
  DATEDIFF(
   if( end_date > '2012-09-12', '2012-09-12', end_date ),
   if( start_date < '2012-09-02', '2012-09-02', start_date )
  ) * price
 )
from (
 select 
  FROM_UNIXTIME( start_date, '%Y-%m-%d' ) as start_date,
  FROM_UNIXTIME( end_date, '%Y-%m-%d' ) as end_date,
  price
 from prices where start_date <  UNIX_TIMESTAMP( '2012-09-12' ) and end_date >  UNIX_TIMESTAMP( '2012-09-02' )
) as l 
```

编辑：固定示例，感谢小提琴编辑 2：Unix 时间戳示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:23:19.707

也许您可以尝试以下方法：

询问：

```
select price*10
  from prices
  where '2012-09-02' between start_date
  and start_date + interval 10 day 
```

结果：

```
PRICE*10
1010 
```

参考：* [SQLFIDDLE](http://sqlfiddle.com/#!2/abc0b/32)

当前间隔只是一个静态值。您可以将其作为动态值传递给您的查询。为了获得涉及的多个日期范围，您只需要在不同的开始日期之间传递不同的间隔来捕捉价格。让我知道是否清楚或您需要进一步澄清:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-26T09:16:33.627

**编辑**：我保留了我的答案，但不再同意，请参阅评论了解原因。

一个可能的答案，虽然我不认为这是最好的（见其他答案）是非规范化你的数据：

```
day    | price
=======+======
1 dec  | 100
2 dec  | 100
3 dec  | 100
4 dec  | 100
...
15 dec | 100
16 dec | 200
17 dec | 200
... 
```

那么你的答案很简单：

```
select sum(price) from mytable where day > '1 dec' and day < '15 jan' 
```

这可能会使您的数据更易于使用和更直观，但有一些缺点：

*   它可能会更慢；如果范围长时间保持不变，则查询多行比 1 行慢
*   更新可能会更慢（出于同样的原因）。

# selenium - Selenium IDE - 从动态列表中选择时无法记录 Gmail 用户名

> ID：13561667
> 
> 赞同：2
> 
> 时间：2012-11-26T09:10:07.157
> 
> 标签：selenium, selenium-ide

我是这个论坛和硒的新手。我尝试使用 selenium IDE 记录和播放我的 gmail 登录信息。我使用以下步骤登录。1\. 从 google.com 定向到 gmail.com 2\. 输入我的用户名（注意：由于我已经多次使用我的用户名登录 Firefox，当我开始输入正确的第一个字母时，我的用户名开始显示在动态列表中用户名。我正在使用键盘或鼠标从该动态列表中选择用户名） 3\. 然后我输入我的密码并单击“登录”按钮。

这样做会在 Selenium IDE 中生成以下脚本

命令：

1.  ( `command`)打开 ( `Target`)/ServiceLogin?service=mail&passive=true&rm=false&continue=http://mail.google.com/mail/&scc=1<mpl=default<mplcache=2
2.  ( `command`)type ( `Target`)id=密码 (值)XXXXXX
3.  ( `command`)clickAndWait ( `Target`)id=登录

由于上述命令没有记录我的用户名，所以当我播放时，它没有登录并在浏览器中出现错误“输入您的电子邮件地址”。我明白，由于我从动态列表中选择用户名，硒没有记录事件。如果我手动输入脚本以将用户名输入为 (command)type (Target)id=Email (Value)XXXXXX 并播放，那么它可以按预期登录。

**谁能建议我如何通过 Selenium IDE 记录从动态列表中选择用户名？我只使用 Selenium IDE，没有 RC 和 web 驱动程序**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:09:26.547

用户名文本框未记录在 selenium ide 中，您必须使用文本框的 Xpath。

在您的 selenium ide 中使用此代码，然后检查

```
<tr>
<td>open</td>
<td>https://accounts.google.com/ServiceLogin?service=mail&amp;passive=true&amp;rm=false&amp;continue=http://mail.google.com/mail/&amp;scc=1&amp;ltmpl=default&amp;ltmplcache=2</td>
<td></td>
</tr>

<tr>
<td>verifyTextPresent</td>
<td>Username</td>
<td></td>
</tr>

<tr>
<td>type</td>
<td>//*[@id=&quot;Email&quot;]</td>
<td>xyz@gmail.com</td>
 </tr>

 <tr>
<td>verifyTextPresent</td>
<td>Password</td>
<td></td>
</tr>

<tr>
<td>type</td>
<td>id=Passwd</td>
<td>password</td>
 </tr>

<tr>
<td>clickAndWait</td>
<td>id=signIn</td>
<td></td>
</tr>

<tr>
<td>verifyValue</td>
<td>id=signIn</td>
<td>Sign in</td> 
```

![在此处输入图像描述](../Images/8b6c9ff96e092fec6c97342e45e3a875.png)

# c - 在 C 中求解 2 的 200 000 次方

> ID：13561671
> 
> 赞同：1
> 
> 时间：2012-11-26T09:10:21.583
> 
> 标签：c, math

我该如何解决：`2 ^ 200'000`在 C 中
我尝试了几种解决方案，例如：

```
unsigned long long int variable = 1;
int i = 0;
 for(i = 0; i < 200000; i++) {
        variable *= 2;
 }
 printf("%llu", variable); 
```

我得到了结果：0

我也累了：

```
variable = 1 << 200000; 
```

我得到了同样的结果

还有：

```
pow(2, 200000); 
```

我得到了结果：`inf`

我知道结果将是一个非常大的数字！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T09:12:16.500

你需要使用[bignums](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)。提供它们的一个好的 C 库是[GMPlib](http://gmplib.org/)（或*Gmp*）。

另请参阅[此](https://stackoverflow.com/a/8758423/841108)和[此](https://stackoverflow.com/a/13000103/841108)答案。

如果这是一项家庭作业，并且您必须避免使用外部库，请实现您自己的幼稚和低效的 bignum 操作，方法是将例如以 1000000000 为底的大数字表示为 bigdigits 的向量（以 1000000000 为底，即`unsigned int`-s 小于 1000000000）。但是请注意，bignum 操作的有效算法是一个非常困难的主题（您可以在这方面攻读博士学位）。

使用 Common Lisp（实际上是Linux 上的[SBCL](http://sbcl.org/)`(expt 2 200000)` ），给出很多数字，以

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:17:18.277

您将如何尝试在课堂上用铅笔和纸重复 20 或 100 次来解决这个问题？同样的方法在这里也很完美。我只是建议颠倒数组，这样可以从左到右相乘并以正确的顺序打印最终数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T09:44:07.917

If you can't use an external bignum library, then you have to implement your own.

Start by defining what your big number will look like in memory. For example, for rational numbers (which are the most awesome) a number might be represented as "a/b*(2**e)"; and you might have a variable sized array of unsigned bytes to represent a denominator, a variable length array of unsigned bytes to represent a divisor, a variable length array of unsigned bytes to represent an exponent, and some flags (e.g. denominator sign and exponent sign).

The next step is to write code to do primitive operations on pieces of your big number. For example, code to add variable length arrays together, code to shift a variable length array left/right, code to multiply 2 variable length arrays, etc.

The next step would be to implement normal operations using your primitive operations. For example (for the rational numbers), "bigNumber << 44" is actually "a/b*(2**e) << 44", and you'd just add 44 to "e".

The next step is to convert your number into your format using those normal operations you implemented. For example, you might create a big number that has the value 1 (denominator=1, divisor=1, exponent=0) and then shift it left by 200000 (denominator=1, divisor=1, exponent=0+200000).

Of course then you need some way of converting your big number into a string so it can be displayed. This requires actual division (rather than "multiply by inverse") which gets tricky.

Please note that for your purposes you only actually need a "0 bit" significand and an 18-bit exponent to store the number (in a format designed specifically for that number). If you don't need to display the resulting number in decimal, then it becomes very easy.

For example, to display it in hex you could do:

```
char hexDigitTable[16] = "0123456789ABCDEF";

// My big number with a 0-bit significand and 18-bit exponent!
uint32_t exponent = 20000;     

printBigNumber(uint32_t exponent) {
    int digit;

    if(exponent > 4) {
        // Note: "number / 16" is the same as "number >> 4" which is
        //       the same as "exponent - 4".
        printBigNumber(exponent - 4);
    }
    digit = 1 << (exponent & 3);
    printf("%c", hexDigitTable[digit]);
} 
```

See how easy it is if you're lazy? :-)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-27T11:18:11.577

你不需要“计算”任何东西。基数 2 是特殊的 - 它是二进制基数 - 以 2^x 的形式出现的 2 的幂可以生成为 1 << x（左移）。您需要设置一个至少可以容纳 200,000 位的位域，例如 unsigned char[25000] 并将最高位设置为 1。然后，您只需将该位域解释为整数。

用十六进制写出这个数字很简单——只需用十六进制写出每个字节。要以十进制打印出来，您可能需要一个 bignum 库:(

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-27T10:57:25.903

2 ^ 200000 远远超出任何内置数据类型。

您需要在数组中表示幂以手动模拟乘法。

例如，您可以使用数组 { 0,1,2,3,4,5,6,7,8,9 } 来存储 9,876,543,210。

其次，您应该使用分治算法来降低计算复杂度。

为了计算

```
a ^ b 
```

你需要计算

```
t = a ^ (b/2) 
```

第一的。然后用 t 计算

```
a ^ b = t * t * a ^ ( b % 2 ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T09:12:34.653

为此，您需要某种形式的[bignum 库](http://en.wikipedia.org/wiki/Arbitrary-precision_arithmetic)，C 中的任何本机数据类型都无法准确保存该数字。请注意，表示此数字将占用大量内存。

# ios - Apple LLVM 编译器错误 4.1

> ID：13561682
> 
> 赞同：4
> 
> 时间：2012-11-26T09:11:10.647
> 
> 标签：ios, xcode, compiler-errors, llvm

所以，我碰巧移动了一些文件夹，突然间我的项目认为喜欢而不工作会很酷。有人可以告诉我如何解决这个错误吗？（为 irl iphone 编译时出错。）

短错误：

```
clang: error: no such file or directory: '/Users/OscarApeland/Downloads/LNG Converter 2/LNG Converter/LNG Converter/LNG Converter-Prefix.pch'
clang: error: no input files
Command/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang failed with exit code 1 
```

完整错误：

```
ProcessPCH "/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/PrecompiledHeaders/LNG Converter-Prefix-chblhzzekvnqprcbihkzfysqbmqa/LNG Converter-Prefix.pch.pth" "LNG Converter/LNG Converter-Prefix.pch" normal armv7s objective-c com.apple.compilers.llvm.clang.1_0.compiler
cd "/Users/OscarApeland/Downloads/LNG Converter 2/LNG Converter"
setenv LANG en_US.US-ASCII
setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -x objective-c-header -arch armv7s -fmessage-length=0 -std=gnu99 -fobjc-arc -Wno-trigraphs -fpascal-strings -O0 -Wno-missing-field-initializers -Wno-missing-prototypes -Wreturn-type -Wno-implicit-atomic-properties -Wno-receiver-is-weak -Wduplicate-method-match -Wformat -Wno-missing-braces -Wparentheses -Wswitch -Wno-unused-function -Wno-unused-label -Wno-unused-parameter -Wunused-variable -Wunused-value -Wempty-body -Wuninitialized -Wno-unknown-pragmas -Wno-shadow -Wno-four-char-constants -Wno-conversion -Wno-shorten-64-to-32 -Wpointer-sign -Wno-newline-eof -Wno-selector -Wno-strict-selector-match -Wno-undeclared-selector -Wno-deprecated-implementations -DDEBUG=1 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -Wprotocol -Wdeprecated-declarations -g -Wno-sign-conversion "-DIBOutlet=__attribute__((iboutlet))" "-DIBOutletCollection(ClassName)=__attribute__((iboutletcollection(ClassName)))" "-DIBAction=void)__attribute__((ibaction)" -miphoneos-version-min=5.1 -iquote "/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/LNG Converter.build/Debug-iphoneos/LNG Converter.build/LNG-generated-files.hmap" "-I/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/LNG Converter.build/Debug-iphoneos/LNG Converter.build/LNG-own-target-headers.hmap" "-I/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/LNG Converter.build/Debug-iphoneos/LNG Converter.build/LNG-all-target-headers.hmap" -iquote "/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/LNG Converter.build/Debug-iphoneos/LNG Converter.build/LNG-project-headers.hmap" -I/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Products/Debug-iphoneos/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include -I/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include "-I/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/LNG Converter.build/Debug-iphoneos/LNG Converter.build/DerivedSources/armv7s" "-I/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/LNG Converter.build/Debug-iphoneos/LNG Converter.build/DerivedSources" -F/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Products/Debug-iphoneos --serialize-diagnostics "/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/PrecompiledHeaders/LNG Converter-Prefix-chblhzzekvnqprcbihkzfysqbmqa/LNG Converter-Prefix.pch.dia" -c "/Users/OscarApeland/Downloads/LNG Converter 2/LNG Converter/LNG Converter/LNG Converter-Prefix.pch" -o "/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/PrecompiledHeaders/LNG Converter-Prefix-chblhzzekvnqprcbihkzfysqbmqa/LNG Converter-Prefix.pch.pth" -MMD -MT dependencies -MF "/Users/OscarApeland/Library/Developer/Xcode/DerivedData/LNG_Converter-fhuumyzhzihyzkcrahggbbgzeijr/Build/Intermediates/PrecompiledHeaders/LNG Converter-Prefix-chblhzzekvnqprcbihkzfysqbmqa/LNG Converter-Prefix.pch.d" 
```

还有截图 ![在此处输入图像描述](../Images/3966d7e0f69aa92224875a5b1894138b.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T09:14:24.577

您需要编辑目标的构建设置并更新“前缀标题”以修复其路径。

![在此处输入图像描述](../Images/c58682afe4b2e81fc1ff4d9b0dd4f28f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-17T18:09:57.853

我遇到了那个错误：缺少 MyProject-Prefix.pch 和 CordovaLib_Prefix.pch 果然，我可以验证它们不在应有的位置。

这是我认为发生的事情：

*   我将项目的所有文件从一个目录复制到另一个目录（事实）
*   Finder 明智地决定不复制以 w .pch 结尾的文件

这是有道理的，为了解决这个问题，我所要做的就是将文件从它们的原始位置复制到它们应该在的目录中。

# php - 我可以将各种网站的现有代码上传到 bitbucket

> ID：13561684
> 
> 赞同：0
> 
> 时间：2012-11-26T09:11:12.207
> 
> 标签：php, git, bitbucket

我对源代码控制非常陌生。我在没有任何源代码控制的情况下使用 php 处理过各种网站。

我已经注册了 bitbucket 帐户。我只想将我在那里工作过的所有网站的代码保留在 bitbucket 上，以便在我当前项目的开发过程中，我应该能够看到那里的特定代码片段是如何实现的。

我可以用 bitbucket 做到这一点吗，因为那些只是文件和文件，它们不是任何源代码控制系统，如 git 或 mercurial。

我是否需要先安装 git 或 mercurial 才能将所有这些文件上传到那里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:16:45.483

请查看此处的 bitbucket 说明，然后按照步骤操作。首先在您的系统上安装 Git。

> [https://confluence.atlassian.com/pages/viewpage.action?pageId=269981802](https://confluence.atlassian.com/pages/viewpage.action?pageId=269981802)

# c++ - C++ 任意（动态）类型转换

> ID：13561693
> 
> 赞同：2
> 
> 时间：2012-11-26T09:11:47.077
> 
> 标签：c++, templates

我已经为两种类型 A 和 B 编写了一个适配器模式，假设可以适应这些类型。这只是一个普通的模板类。问题是我需要从 A 和 B 转换。虽然我不知道 A 和 B 的类型，但稍后会通过专门提供它们。

有没有办法通过告诉 C++ 将来会存在类型转换器来允许从任意 A 和 B 进行转换，如果不存在则抛出错误。（而不是仅仅假设没有办法转换）

例如：

```
template<typename A, typename B> B Converter(A a) { return B(); } 
```

该转换器适用于任意类型，但显然不能正确转换。然后我想指定：

```
template<> int Converter(int a) { return a/2; }
template<> float Converter(bool a) { return (a) ? 0.45f : 12f; }
template<> int Converter(myType a) { return a.value; }

then, later one, by the "user"(after compilation) I would like to effectively create more converters. For example, I will allow the user to hook into my code and supply converters for their custom types. 
```

我想我可以修改

```
template<typename A, typename B> B Converter(A a) { `Find appropriate converter in list and use that` } 
```

更复杂，但我正在寻找一种有效的方法来做到这一点。事实上，我想允许使用多个相同类型的转换器：

```
template<> int Converter(int a) { return a/4; } 
```

（所以，在一种情况下，我将使用一个 int 到 int 的转换器，将值减半，在另一种情况下，我将使用 a/4。我希望能够动态更改这些。所以我不会使用真的专业）

我只是想在编译时（我会写一些）或运行时（用户会写一些）插入我的类型转换器。我希望这些速度非常快，并且我希望我编写的转换器更快，因为它们是内置的。

有任何想法吗？

# c - 从 C 中的 printf 语句中调用宏函数

> ID：13561694
> 
> 赞同：6
> 
> 时间：2012-11-26T09:11:53.370
> 
> 标签：c, c-preprocessor

我在从 printf() 语句中理解宏函数调用的使用方面遇到了问题。

我有以下代码：

```
#include<stdio.h>
#define f(g,h) g##h
main()
{
    printf("%d",f(100,10));
} 
```

此代码输出“10010”作为答案。

我了解到宏函数调用只是复制粘贴宏函数代码来代替调用，并替换了参数。

所以代码应该是这样的：

```
#include<stdio.h>
#define f(g,h) g##h
main()
{
    printf("%d",100##10);
} 
```

但是当我用替换的宏单独执行上述代码时，我得到一个编译错误。

那么第一个代码如何给出 10010 作为答案，而第二个代码给出编译错误呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-26T09:15:38.150

预处理器连接运算符在宏被替换*之前*`##`完成。它只能用于宏体。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:15:45.713

运算符`##`对于预处理器具有特殊意义，它是一个标记粘贴运算符，将两个标记“粘合”在一起。因此，在您的情况下，`g`并且`h`“粘合”在一起，从而产生了新的 token - int literal `10010`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:16:24.107

有一些特殊字符（例如`##`宏中的一些特殊字符）会更改“仅替换文本”规则。*

# c# - unity3d 游戏收不到推送通知

> ID：13561695
> 
> 赞同：0
> 
> 时间：2012-11-26T09:12:05.183
> 
> 标签：c#, java, android, unity3d, google-cloud-messaging

我正在使用 Unity3d 构建游戏，它将使用 GCM 服务（我将其写入自定义库）。但这是我的问题。只要此自定义库位于本机 android 应用程序中，它就可以工作。

我将它放入 Unity3d 游戏并发送推送通知的那一刻，设备没有收到推送通知。我知道该库是可访问的，因为我可以在 logcat 中读取来自该库的调试日志。

我认为 Unity3d 以某种方式阻止 GCM 服务运行，从而阻止设备接收推送通知。

关于Unity3d，我应该知道什么会导致这个问题吗？还是有人有类似的问题？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T03:14:10.670

据我所知，Unity 与 GCM 服务没有冲突。

如果有帮助，这里是通过插件在 Unity 上使用 GCM 的链接。

[https://github.com/kobakei/unity-gcm](https://github.com/kobakei/unity-gcm)

# iphone - iphone app会保留sqlite数据库吗

> ID：13561697
> 
> 赞同：0
> 
> 时间：2012-11-26T09:12:23.783
> 
> 标签：iphone, ios, sqlite

我正在创建 iphone 应用程序，要求如下

1.我有固定的数据库，如果不存在，则必须与应用程序一起保留，不要创建。
2\. 我正在使用 FM 数据库，但我不知道如何使数据库与应用程序保持一致。

直到现在我使用创建如果不存在查询。它为特定路径创建数据库并存储在那里。但是，即使在 iphone 而不是模拟器中运行应用程序，它是否会保留与应用程序一起使用的数据库。

请让我摆脱这种困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:17:55.410

> 它为特定路径创建数据库并存储在那里。但是，即使在 iphone 而不是模拟器中运行应用程序，它是否会保留与应用程序一起使用的数据库。

如果您在运行时创建数据库，那么它将存储在某个用户目录中。这本质上与运行应用程序的设备相关联。具体来说，如果您在模拟器中运行您的应用程序，那么数据库将在模拟器操作系统文件系统中创建（如果您在设备上运行应用程序，则将在设备文件系统中创建）。然后，当您在设备上运行应用程序时，将在那里创建一个新数据库。

在这种情况下，两者之间没有任何关系。如果您需要不同的设备共享某些信息，您可以使用同步（可能使用 iCloud）来做到这一点。

如果您的数据库是静态的，正如您所说的那样，并且您可以在第一次运行应用程序之前创建它，那么您可以将它包含在应用程序包中。这样，它将与应用程序绑定，并且可以在安装了应用程序的每台设备上使用。

# javascript - 使用点击事件重启函数

> ID：13561705
> 
> 赞同：2
> 
> 时间：2012-11-26T09:12:56.107
> 
> 标签：javascript, jquery

编辑*

在我的文字游戏中，我添加了一个重新启动按钮。目前的问题是，当我按下它时，它会回到开始屏幕，就像它应该的那样。但是当第二次点击开始按钮时，它会带回之前已经玩过的游戏。我现在已将所有代码放入单独的函数中，以便我可以再次为新游戏运行它们。问题是我不知道如何清除最后一场比赛才能重新开始。单击此按钮时如何重新启动所有功能？

我有功能..

```
createGrid()
startplay()
restartplay()
keyPress()
backGroundSound()
dragEvent()
nextQuestion()
closeMessage()
replaySound()
backGroundImage() 
```

我在 document.ready 函数中运行它们

```
$(document).ready(function () {

backGroundSound();
createGrid();
keyPress();
backGroundImage();
playBackGroundSound();
dragEvent();

$('.next-question').on('click', function () {
    nextQuestion();
});
$('.close-message').one("click", function () {
    closeMessage();
});
$(".replay-sound").click(function () {
    replaySound();
});
//Click event to start the game
$(".start-btn-wrapper").click(function () {
    startplay();
});
//Click event to restart the game
$(".restart-btn").click(function () {
    restartplay();
}); 
```

单击重新启动按钮时，我希望它刷新功能，然后再次单击开始按钮时，为用户开始新游戏。如果不刷新页面，我将如何做到这一点？

我想在单击重新启动按钮时清除功能，然后在单击开始按钮时再次启动它们。

这个小提琴只有脚本：http: [//jsfiddle.net/V4SYZ/](http://jsfiddle.net/V4SYZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:32:30.560

您可能只需要清除存储上次游戏数据的任何数据结构。例如，如果它在一个数组中，则将其重置为一个空数组，`data = []`或者如果在一个对象中是一个空对象`data = {}`，等等。它是如果不了解代码的结构及其工作原理，很难更具体。

**编辑**

查看您在该小提琴中发布的代码，就在您`$.ready()`将一堆变量初始化为空数组的事件中调用所有这些函数之前；我没有仔细查看代码，但您可能需要再次执行此操作才能开始您的新游戏。

正如我之前建议的那样，我会将该代码移动到一个新函数中：

```
Function newGame() {
    randomWord = [];
    listOfWords = [];
    attemptNumber = [];
    completionNumber = [];
    populationNumber = [];
    gridSize = [];

    backGroundSound();
    createGrid();
    keyPress();
    backGroundImage();
    playBackGroundSound();
    dragEvent();
} 
```

然后`newGame()`在`$.ready()`处理程序和点击处理程序中调用函数`.restart-btn`：

```
$(document).ready(function () {

    newGame();

    $('.next-question').on('click', function () {
            nextQuestion();
    });
    $('.close-message').one("click", function () {
            closeMessage();
    });
    $(".replay-sound").click(function () {
            replaySound();
    });
    //Click event to start the game
    $(".start-btn-wrapper").click(function () {
            startplay();
    });

    //Click event to restart the game
    $(".restart-btn").click(function () {
            newGame();
            restartplay();
    });     

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:17:42.163

总是可以做一个非缓存的重新加载，像这样：

`window.location.reload(true);`

这告诉浏览器重新加载页面并明确**不**使用内存中的任何内容（基本上，与`Cntrl+F5`Windows 机器上的 a 相同）。不过，这假设您不需要在当前“会话”中保留任何内容。

# iphone - Tableview推送到不同的视图

> ID：13561706
> 
> 赞同：0
> 
> 时间：2012-11-26T09:12:57.130
> 
> 标签：iphone, ios, xcode

我有这个代码，当按下一个单元格时，它会推送到一个新视图。这个新视图会根据按下的单元格的名称更改其标题。但是，所有单元格的视图都是相同的，如果我在一个单元格下更改某些内容，它会更改每个其他单元格的视图。我该如何做到这一点，以便每个单元格的每个视图都不同，而不会创建大量视图；这是不切实际的。谢谢你。

推送代码：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
[self.tableView deselectRowAtIndexPath:indexPath animated:YES];

ACollection *newView = [[ACollection alloc] init];
newView.template = [[Global collections] objectAtIndex:indexPath.row];

newView.theTitle = [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text;
[self.navigationController pushViewController:newView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:20:53.140

theTitle 似乎是您在单元格选择时设置的局部变量。但是，导航控制器在导航项中设置视图控制器的标题。因此，您可以设置 AVCollections 标题，如 tis：

```
newView.navigationItem.title = [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text; 
```

在细胞选择过程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:45:56.587

好吧，现在考虑我们在数组中有字符串。（数组项的数量等于单元格的数量。或者我们可以说您正在从数组中加载详细信息。）。

首先，在`didSelectRowAtIndexPath:`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
         // Here we got the name of the item we are currently going to load
         NSString *item_Name   =   [contentArray objectAtIndex: indexPath.row];
         ViewController *yourViewController   =  [[ViewController alloc] initWithNIBName: @"ViewController" bundle: nil];
         yourViewController.navigationItem.title  =  item_Name;
         [self.navigationController pushViewController: yourViewController animated: YES];
} 
```

或者像 lukya 说的你可以使用

```
NSString *item_Name   =   [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text; 
```

如果您要将单元格本身的标题标签设置为详细视图的标题。

希望这可以帮助。

# iphone - Monotouch 检查当前平台

> ID：13561707
> 
> 赞同：1
> 
> 时间：2012-11-26T09:13:00.957
> 
> 标签：iphone, ios, xamarin.ios

我想弄清楚如何找到当前的设备**平台**。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:18:08.163

[在链接](https://stackoverflow.com/questions/10889695/how-do-i-get-the-ios-device-and-version-in-monotouch/10889966#10889966)中找到答案并轻松访问我也在此处发布该代码。

```
using System;
using System.Runtime.InteropServices;
using MonoTouch.Foundation;
using MonoTouch.UIKit;

namespace Playersync_iPhone_v2 {
public class DeviceHardware {
    public const string HardwareProperty = "hw.machine";

    public enum HardwareVersion {
        iPhone,
        iPhone3G,
        iPhone3GS,
        iPhone4,
        VerizoniPhone4,
        iPhone4S,
        iPod1G,
        iPod2G,
        iPod3G,
        iPod4G,
        iPad,
        iPad2WIFI,
        iPad2WIFI24,
        iPad2GSM,
        iPad2CDMA,
        iPad3WIFI,
        iPad3GSM,
        iPad3CDMA,
        iPhoneSimulator,
        iPhone4Simulator,
        iPadSimulator,
        Unknown
    }

    [DllImport(MonoTouch.Constants.SystemLibrary)]
    static internal extern int sysctlbyname([MarshalAs(UnmanagedType.LPStr)] string property, IntPtr output, IntPtr oldLen, IntPtr newp, uint newlen);

    public static HardwareVersion Version {
        get {
            var pLen = Marshal.AllocHGlobal(sizeof(int));
            sysctlbyname(DeviceHardware.HardwareProperty, IntPtr.Zero, pLen, IntPtr.Zero, 0);

            var length = Marshal.ReadInt32(pLen);

            if (length == 0) {
                Marshal.FreeHGlobal(pLen);

                return HardwareVersion.Unknown;
            }

            var pStr = Marshal.AllocHGlobal(length);
            sysctlbyname(DeviceHardware.HardwareProperty, pStr, pLen, IntPtr.Zero, 0);

            var hardwareStr = Marshal.PtrToStringAnsi(pStr);
            var ret = HardwareVersion.Unknown;

            if (hardwareStr == "iPhone1,1")
                ret = HardwareVersion.iPhone;
            else if (hardwareStr == "iPhone1,2")
                ret = HardwareVersion.iPhone3G;
            else if (hardwareStr == "iPhone2,1")
                ret = HardwareVersion.iPhone3GS;
            else if (hardwareStr == "iPhone3,1")
                ret = HardwareVersion.iPhone4;
            else if (hardwareStr == "iPhone3,3")
                ret = HardwareVersion.VerizoniPhone4;
            else if(hardwareStr == "iPhone4,1")
                ret = HardwareVersion.iPhone4S;
            else if (hardwareStr == "iPad1,1")
                ret = HardwareVersion.iPad;
            else if (hardwareStr == "iPad2,1")
                ret = HardwareVersion.iPad2WIFI;
            else if (hardwareStr == "iPad2,2")
                ret = HardwareVersion.iPad2GSM;
            else if (hardwareStr == "iPad2,3")
                ret = HardwareVersion.iPad2CDMA;
            else if (hardwareStr == "iPad2,4")
                ret = HardwareVersion.iPad2WIFI24;
            else if (hardwareStr == "iPad3,1")
                ret = HardwareVersion.iPad3WIFI;
            else if (hardwareStr == "iPad3,2")
                ret = HardwareVersion.iPad3GSM;
            else if (hardwareStr == "iPad3,3")
                ret = HardwareVersion.iPad3CDMA;
            else if (hardwareStr == "iPod1,1")
                ret = HardwareVersion.iPod1G;
            else if (hardwareStr == "iPod2,1")
                ret = HardwareVersion.iPod2G;
            else if (hardwareStr == "iPod3,1")
                ret = HardwareVersion.iPod3G;
            else if (hardwareStr == "iPod4,1")
                ret = HardwareVersion.iPod4G;
            else if (hardwareStr == "i386" || hardwareStr=="x86_64") {
                if (UIDevice.CurrentDevice.Model.Contains("iPhone"))
                    ret = UIScreen.MainScreen.Bounds.Height * UIScreen.MainScreen.Scale == 960 || UIScreen.MainScreen.Bounds.Width * UIScreen.MainScreen.Scale == 960 ? HardwareVersion.iPhone4Simulator : HardwareVersion.iPhoneSimulator;
                else
                    ret = HardwareVersion.iPadSimulator;
            }

            Marshal.FreeHGlobal(pLen);
            Marshal.FreeHGlobal(pStr);

            return ret;
        }
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:16:36.697

这是我从快速谷歌搜索中找到的一个片段。更新最新一轮硬件应该是微不足道的。

资料来源：[http ://www.bscheiman.org/2010/08/30/detecting-hardware-type-monotouch/](http://www.bscheiman.org/2010/08/30/detecting-hardware-type-monotouch/)

```
using System;
using System.Runtime.InteropServices;
using MonoTouch.Foundation;
using MonoTouch.UIKit;
namespace YourNamespace
{
    public class DeviceHardware
    {
        public const string HardwareProperty = "hw.machine";

        public enum HardwareVersion
        {
            iPhone,
            iPhone3G,
            iPhone3GS,
            iPhone4,
            iPod1G,
            iPod2G,
            iPod3G,
            iPad,
            iPhoneSimulator,
            iPhone4Simulator,
            iPadSimulator,
            Unknown
        }

        [DllImport(MonoTouch.Constants.SystemLibrary)]
        static internal extern int sysctlbyname([MarshalAs(UnmanagedType.LPStr)] string property, IntPtr output, IntPtr oldLen, IntPtr newp, uint newlen);

        public static HardwareVersion Version
        {
            get
            {
                var pLen = Marshal.AllocHGlobal(sizeof(int));
                sysctlbyname(DeviceHardware.HardwareProperty, IntPtr.Zero, pLen, IntPtr.Zero, 0);

                var length = Marshal.ReadInt32(pLen);

                if (length == 0)
                {
                    Marshal.FreeHGlobal(pLen);

                    return HardwareVersion.Unknown;
                }

                var pStr = Marshal.AllocHGlobal(length);
                sysctlbyname(DeviceHardware.HardwareProperty, pStr, pLen, IntPtr.Zero, 0);

                var hardwareStr = Marshal.PtrToStringAnsi(pStr);
                var ret = HardwareVersion.Unknown;

                if (hardwareStr == "iPhone1,1")
                    ret = HardwareVersion.iPhone;
                else if (hardwareStr == "iPhone1,2")
                    ret = HardwareVersion.iPhone3G;
                else if (hardwareStr == "iPhone2,1")
                    ret = HardwareVersion.iPhone3GS;
                else if (hardwareStr == "iPhone3,1")
                    ret = HardwareVersion.iPhone4;
                else if (hardwareStr == "iPad1,1")
                    ret = HardwareVersion.iPad;
                else if (hardwareStr == "iPod1,1")
                    ret = HardwareVersion.iPod1G;
                else if (hardwareStr == "iPod2,1")
                    ret = HardwareVersion.iPod2G;
                else if (hardwareStr == "iPod3,1")
                    ret = HardwareVersion.iPod3G;
                else if (hardwareStr == "i386")
                {
                    if (UIDevice.CurrentDevice.Model.Contains("iPhone"))
                        ret = UIScreen.MainScreen.Bounds.Height * UIScreen.MainScreen.Scale == 960 || UIScreen.MainScreen.Bounds.Width * UIScreen.MainScreen.Scale == 960 ? HardwareVersion.iPhone4Simulator : HardwareVersion.iPhoneSimulator;
                    else
                        ret = HardwareVersion.iPadSimulator;
                }

                Marshal.FreeHGlobal(pLen);
                Marshal.FreeHGlobal(pStr);

                return ret;
            }
        }
    }
} 
```

# c - C：用户输入字符串，包括“'”-字符

> ID：13561711
> 
> 赞同：0
> 
> 时间：2012-11-26T09:13:37.327
> 
> 标签：c, encryption, char, caesar-cipher, cs50

我需要读入用户输入和用户凯撒密码来加密它。但是在阅读用户输入时我遇到了以下问题，如果我输入例如，我的程序不会终止：“ `./caesar 3 I'm`”问题似乎是字符`'`。该程序适用于其他输入。

```
/**
 *
 * caesar.c
 *
 * The program caesar encrypts a String entered by the user
 * using the caesar cipher technique. The user has to enter
 * a key as additional command line argument. After that the
 * user is asked to enter the String he wants to be encrypted.
 *
 * Usage: ./caesar key [char]
 *
 */

#include <cs50.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

int caesarCipher(char original, int key);

int main(int argc, string argv[])
{
    if (argc > 1)
    {    
        int key = atoi(argv[1]);    

        for (int i = 2; i < argc; i++)
        {
            for (int j = 0; j < strlen(argv[i]); j++)
            {
                argv[i][j] = caesarCipher(argv[i][j], key);
            }
        }

        for (int i = 2; i < argc; i++)
        {
            printf("%s", argv[i]);
        }

        return 0;
    } 
    else
    {
        printf("The number of command arguments is wrong! \n");

        return 1;
    }
}

int caesarCipher(char original, int key)
{
    char result = original;

    if (islower(original))
    {
        result = (original - 97 + key) % 26 + 97;
    }
    else if (isupper(original))
    {
        result = (original - 65 + key) % 26 + 65;   
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T09:17:09.650

Shell 将 解释`'`为字符串的开头。所以你需要逃避它：

```
./凯撒 3 我是
```

或将参数括在双引号中：

```
./caesar 3 “我是”
```

请注意，这与您的程序无关。只有命令行外壳处理这个问题。

# twitter4j - 如何使用 twitter4j 更改 twitter 流 api 上的关键字？

> ID：13561713
> 
> 赞同：7
> 
> 时间：2012-11-26T09:13:53.543
> 
> 标签：twitter4j, twitter-streaming-api

我正在使用 twitter4j 连接到 Stream API。

我从这篇文章中了解到，在[不重新打开流的情况下更改 Twitter 流过滤器关键字](https://stackoverflow.com/questions/3275228/change-twitter-stream-filter-keywords-without-re-opening-stream)，在连接打开时无法更改关键字。我必须断开连接并更改过滤谓词并重新连接它。

我想知道是否有任何代码示例可以让我断开连接、更改关键字并重新连接？

目前，我尝试在 onStatus() 下的 StatusListener 中执行此操作，经过 X 时间后，它会将关键字更改为“juice”。但是我没有办法关闭连接并重新连接到 Stream API。

```
if (diff>=timeLapse) {
   StatusListener listener = createStatusListener();
   track = "juice";
   twitterStream = new TwitterStreamFactory().getInstance();
   twitterStream.addListener(listener);
   FilterQuery fq = new FilterQuery();
   fq.track(new String[] {track});
   startTime=System.currentTimeMillis();
   twitterStream.filter(fq);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:53:03.957

您需要先 cleanUp() 流，然后使用 filter(FilterQuery) 方法打开一个新流以更改跟踪条件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-22T01:37:09.897

您只需`Filter(query)`再次调用即可完成此操作，无需调用`cleanUp()`，因为调用`filter(query)`会为您执行此操作。这是我这样做的方法，无需停止/重新启动流！

```
private TwitterStream twitterStream;

private void filterTwitterStream() {

    if (conditionToStopStreaming) {
        if (null != twitterStream) {
            twitterStream.shutdown();
            twitterStream = null;
        }
    } else {
        if (twitterStream == null) {
            twitterStream = new TwitterStreamFactory(getConfiguration()).getInstance();
            twitterStream.addListener(getListener());
        }

        FilterQuery qry = new FilterQuery();

        String[] keywords = {......}
        qry.track(keywords);

        twitterStream.filter(qry);
    }
} 
```

Where`getConfiguration()`返回我的`Configuration`对象​​并 `getListener()`返回我定义的`StatusListener()`对象

# c# - 如何使该功能等待其他功能完成？

> ID：13561714
> 
> 赞同：2
> 
> 时间：2012-11-26T09:13:55.883
> 
> 标签：c#, timing

我有以下功能。此功能开始从设备读取设置。首先我设置一个参数，以便我的程序知道它正在从设备读取，然后我设置正在读取的设置，最后我向设备发送命令。

读取设备响应的函数知道它应该检查要读取的参数，因为设置了这样做的参数。但我面临一个问题：因为我只更改布尔值并执行一个非常小的函数来发送命令，所以下面的函数在设备发送任何响应之前完成。

我尝试通过在两者之间放置 while 函数来解决此问题。这解决了第一个块，但如果我尝试与其他块一起，我的整个应用程序崩溃。我的问题是如何让这个函数暂停，直到参数`IsReadingSettingFromDevice`设置回 false？

```
 private void ReadSettings()
    {

        ProgramParameters.C.IsReadingSettingFromDevice = true;
        ProgramParameters.C.SettingToReadFromDevice = Data.CMD_type;
        SerialCom.SC.SendCommand(Data.CMD_type);
        Debug.WriteLine("DEBUG INFO: SendCommand: " + Data.CMD_type);

        while (ProgramParameters.C.IsReadingSettingFromDevice) ;

        ProgramParameters.C.IsReadingSettingFromDevice = true;
        ProgramParameters.C.SettingToReadFromDevice = Data.CMD_IPsettings;
        SerialCom.SC.SendCommand(Data.CMD_IPsettings);
        Debug.WriteLine("DEBUG INFO: SendCommand: " + Data.CMD_IPsettings);

        //while (ProgramParameters.C.IsReadingSettingFromDevice) ;

        ProgramParameters.C.IsReadingSettingFromDevice = true;
        ProgramParameters.C.SettingToReadFromDevice = Data.CMD_version;
        SerialCom.SC.SendCommand(Data.CMD_version);
        Debug.WriteLine("DEBUG INFO: SendCommand: " + Data.CMD_version);

        //while (ProgramParameters.C.IsReadingSettingFromDevice) ;

        ProgramParameters.C.IsReadingSettingFromDevice = true;
        ProgramParameters.C.SettingToReadFromDevice = Data.CMD_channels;
        SerialCom.SC.SendCommand(Data.CMD_channels);
        Debug.WriteLine("DEBUG INFO: SendCommand: " + Data.CMD_channels);
    } 
```

编辑： ProgramParameters 类只是我自己创建的一个类。它保留了有关程序当前状态的全局参数的一些信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:41:17.583

在单独的线程中启动长时间运行的方法，例如为了简单起见使用任务并行库 - 它在后台为您做了很多工作。然后，您可以决定是要等待结果还是能够在应用程序中执行其他操作（可能至少正确退出）。

**[在此处](http://blogs.msdn.com/b/csharpfaq/archive/2010/06/01/parallel-programming-in-net-framework-4-getting-started.aspx)**查看有关 TPL 的“入门”文章，或**[在此处](http://www.albahari.com/threading/)**查看更通用（和更底层）的线程教程。

# algorithm - 该算法的渐近时间复杂度

> ID：13561725
> 
> 赞同：3
> 
> 时间：2012-11-26T09:14:37.183
> 
> 标签：algorithm, time-complexity, asymptotic-complexity

我想知道以下算法的时间复杂度。乍一看，时间复杂度看起来是 O(n^5)，这就是我在互联网上看到的大多数网站中提到的。但仔细分析似乎给出了不同的答案，下面是代码：

```
public void fun(int n)
{
   int i,j,k,sum=0;
   for(i=0;i<n;i++)
   {
       for(j=0;j<i*i;j++)
       {
            if(j%i==0)
            {
                for(k=0;k<j;k++)
                sum++;
            }
       }
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:48:52.377

请注意，这`j%i c== 0`将产生`true` `O(i)`时间（对于每个 distinct `i`） - 因此内部循环将`O(i)`在每次“外部”迭代中重复自身时间。

因此复杂度是`O(n*n^2 + n*n^3) = O(n^4)`

**解释：**
`O(n*n^2)`用于“中间循环”，无论 if 条件的评估如何，它都会重复自身。这是`O(n^3)`因为你得到：`1 + 4 + 9 + 16 + ... + n^2`这是[平方](http://www.trans4mind.com/personal_development/mathematics/series/sumNaturalSquares.htm)和并且是`O(n^3)`。
`O(n*n^3)`有点棘手：

对于 each `i`，每个内部循环重复`i`次数，所以对于每个`i`你得到： `i + 2i + 3i + ... + (i-1)i`内部循环的总重复次数。很容易看出它实际上`i(1 + 2 + ... + i-1)`是`O(i^3)`。

现在，我们可以看到，因为它发生在每一个`i`- 总复杂性将是（不是正式的，只是直观的）：`O(1^3) + O(2^3) + ... + O(n^3)`这是`O(n^4)`来自[立方级数的总和](http://www.proofwiki.org/wiki/Sum_of_Sequence_of_Cubes)

**结论：**
虽然冷分析可能已经显示`O(n^5)`- 因为内部循环不会在中间循环的每次迭代中重复自身 -**总复杂度是`O(n^4)`**

# wpf - 如何确保只有授权用户才能运行我的 WPF 应用程序？

> ID：13561726
> 
> 赞同：0
> 
> 时间：2012-11-26T09:14:43.143
> 
> 标签：wpf, deployment, registration

我们的老板最近决定，我正在开发的 WPF 应用程序不应再免费，并要求用户为产品付费。这意味着我必须管理授权用户列表并确保只有付费用户才能运行该应用程序。

这个功能一般称为什么，所以我可以查看它并阅读我的各种选项？.net 框架中是否有任何工具来管理这个？

# excel - 从第二列填充额外的值

> ID：13561727
> 
> 赞同：1
> 
> 时间：2012-11-26T09:14:45.263
> 
> 标签：excel, formula

我有两列：A 和 B。我想检查 A 列的每个值是否存在于 B 中。如果不存在，我想用该值添加一个新行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:42:27.457

如果术语存在，这样的东西将返回一些起始位置

```
 =FIND("some text","some cell text with some text") 
```

然后你可以把它包装在一个 if

```
 =if(FIND("some text","some cell text with some text")>0,TRUE,FALSE) 
```

如果你是真的，你需要添加一个新行

如果是假的，你不会。

如果您已经有几行，则添加新行很困难，您是要插入行还是添加到列表底部等。

对“真实”列进行过滤并将其复制并粘贴为新行并进行编辑以适应需要会更容易。

# actionscript - 需要帮助 - actionscript 3 - 俄罗斯方块游戏开始和停止选项

> ID：13561728
> 
> 赞同：3
> 
> 时间：2012-11-26T09:14:52.160
> 
> 标签：actionscript

最近我试着做一个俄罗斯方块游戏。我通过谷歌找到了一个教程。网址是[http://www.emanueleferonato.com/2011/05/02/creation-of-a-complete-flash-tetris-game/](http://www.emanueleferonato.com/2011/05/02/creation-of-a-complete-flash-tetris-game/)。我工作。但是当我按下 Ctrl+Enter 时游戏会自动启动。我不知道当我按空格键并在特定时间（1分钟）后停止游戏时是否可以手动启动游戏。我在谷歌搜索了很多，但我没有找到与教程代码相关的合适的。谁能帮我手动启动游戏并在特定时间后停止。这是游戏的文档类文件...

```
package {

import flash.display.Sprite;
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.events.KeyboardEvent;

public class Main extends Sprite {

    private const TS:uint=30;
    private var fieldArray:Array;
    private var fieldSprite:Sprite;
    private var tetrominoes:Array = new Array();
    private var colors:Array=new Array();
    private var tetromino:Sprite;
    private var currentTetromino:uint;
    private var nextTetromino:uint;
    private var currentRotation:uint;
    private var tRow:int;
    private var tCol:int;
    private var timeCount:Timer=new Timer(2000);
    public function Main() {

        generateField();
        initTetrominoes();
        nextTetromino=Math.floor(Math.random()*3);
        generateTetromino();
        stage.addEventListener(KeyboardEvent.KEY_DOWN,onKDown);
    }
    private function generateField():void {
        fieldArray = new Array();
        fieldSprite=new Sprite();
        addChild(fieldSprite);
        fieldSprite.graphics.lineStyle(0,0xCFCCF7);
        for (var i:uint=0; i<20; i++) {
            fieldArray[i]=new Array();
            for (var j:uint=0; j<12; j++) {
                fieldArray[i][j]=0;
                fieldSprite.graphics.beginFill(0x404040);
                fieldSprite.graphics.drawRect(TS*j,TS*i,TS,TS);
                fieldSprite.graphics.endFill();
                }
            }
        }

      private function initTetrominoes():void {
          // I
        tetrominoes[0]=[[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],
        [[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]]];
        colors[0]=0x00FFFF;
        // T
        tetrominoes[1]=[[[0,0,0,0],[1,1,1,0],[0,1,0,0],[0,0,0,0]],
        [[0,1,0,0],[1,1,0,0],[0,1,0,0],[0,0,0,0]],
        [[0,1,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
        [[0,1,0,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]];
        colors[1]=0xAA00FF;
        // L
        tetrominoes[2]=[[[0,0,0,0],[1,1,1,0],[1,0,0,0],[0,0,0,0]],
        [[1,1,0,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],
        [[0,0,1,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
        [[0,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,0,0]]];
        colors[2]=0xFFA500;
        // J
        tetrominoes[3]=[[[1,0,0,0],[1,1,1,0],[0,0,0,0],[0,0,0,0]],
        [[0,1,1,0],[0,1,0,0],[0,1,0,0],[0,0,0,0]],
        [[0,0,0,0],[1,1,1,0],[0,0,1,0],[0,0,0,0]],
        [[0,1,0,0],[0,1,0,0],[1,1,0,0],[0,0,0,0]]];
        colors[3]=0x0000FF;
        // Z
        tetrominoes[4]=[[[0,0,0,0],[1,1,0,0],[0,1,1,0],[0,0,0,0]],
        [[0,0,1,0],[0,1,1,0],[0,1,0,0],[0,0,0,0]]];
        colors[4]=0xFF0000;
        // S
        tetrominoes[5]=[[[0,0,0,0],[0,1,1,0],[1,1,0,0],[0,0,0,0]],
        [[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,0,0]]];
        colors[5]=0x00FF00;
        // O
        tetrominoes[6]=[[[0,1,1,0],[0,1,1,0],[0,0,0,0],[0,0,0,0]]];
        colors[6]=0xFFFF00;
        }     
      private function generateTetromino():void {
          currentTetromino = Math.floor(Math.random()*7);
          nextTetromino=Math.floor(Math.random()*3);
          drawNext();
          currentRotation=0;
          tRow=0;
          if (tetrominoes[currentTetromino][0][0].indexOf(1)==-1) {
              tRow=-1;
              }
              tCol=4;
              drawTetromino();
              timeCount.addEventListener(TimerEvent.TIMER, onTime);
              timeCount.start();
      }
      private function drawNext():void {
          if (getChildByName("next")!=null) {
              removeChild(getChildByName("next"));
          }
          var next_t:Sprite=new Sprite();
          next_t.x=390;
          next_t.y=62
          next_t.name="next";
          addChild(next_t);
          next_t.graphics.lineStyle(0,0xb7b7b7);
          for (var i:int=0; i<tetrominoes[nextTetromino][0].length; i++) {
              for (var j:int=0; j<tetrominoes[nextTetromino][0][i].length; j++)
              {
                  if (tetrominoes[nextTetromino][0][i][j]==1) {
                      next_t.graphics.beginFill(colors[nextTetromino]);
                      next_t.graphics.drawRect(TS*j,TS*i,TS,TS);
                      next_t.graphics.endFill();
                  }
              }
          }
      }
      private function onTime(e:TimerEvent):void {
          if (canFit(tRow+1,tCol,currentRotation)) {
              tRow++;
              placeTetromino();
              } else {
                  landTetromino();
                  generateTetromino();
              }
      }
      private function drawTetromino():void {
          var ct:uint=currentTetromino;
          tetromino=new Sprite();
          addChild(tetromino);
          tetromino.graphics.lineStyle(0,0xCFCCF7);
          for (var i:int=0; i<tetrominoes[ct][currentRotation].length; i++)
          {
              for (var j:int=0; j<tetrominoes[ct][currentRotation][i].length; j++) {
                  if (tetrominoes[ct][currentRotation][i][j]==1) {
                      tetromino.graphics.beginFill(colors[ct]);
                      tetromino.graphics.drawRect(TS*j,TS*i,TS,TS);
                      tetromino.graphics.endFill();
                  }
              }
          }
          placeTetromino();
          }     
      private function placeTetromino():void {
          tetromino.x=tCol*TS;
          tetromino.y=tRow*TS;
      }
      private function onKDown(e:KeyboardEvent):void {
          switch (e.keyCode) {
              case 37 :
              if (canFit(tRow,tCol-1,currentRotation)) {
                  tCol--;
                  placeTetromino();
              }
              break;
              case 38 :
              var ct:uint=currentRotation;
              var rot:uint=(ct+1)%tetrominoes[currentTetromino].length;
              if (canFit(tRow,tCol,rot)) {
                  currentRotation=rot;
                  removeChild(tetromino);
                  drawTetromino();
                  placeTetromino();
              }
              break;
              case 39 :
              if (canFit(tRow,tCol+1,currentRotation)) {
                  tCol++;
                  placeTetromino();
              }
              break;
              case 40 :
              if (canFit(tRow+1,tCol,currentRotation)) {
                  placeTetromino();
                  }   else {
                      landTetromino();
                      generateTetromino();
                  }
                  break;
          }
      }
      private function landTetromino():void {
          var ct:uint=currentTetromino;
          var landed:Sprite;
          for (var i:int=0; i<tetrominoes[ct][currentRotation].length; i++)
          {
              for (var j:int=0; j<tetrominoes[ct][currentRotation][i].length; j++) {
                  if (tetrominoes[ct][currentRotation][i][j]==1) {
                      landed = new Sprite();
                      addChild(landed);
                      landed.graphics.lineStyle(0,0x000000);
                      landed.graphics.beginFill(colors[currentTetromino]);
                      landed.graphics.drawRect(TS*(tCol+j),TS*(tRow+i),TS,TS);
                      landed.graphics.endFill();
                      landed.name="r"+(tRow+i)+"c"+(tCol+j);
                      fieldArray[tRow+i][tCol+j]=1;
                  }
              }
          }
          removeChild(tetromino);
          checkForLines();
      }
      private function checkForLines():void {
          for (var i:int=0; i<20; i++) {
              if (fieldArray[i].indexOf(0)==-1) {
                  for (var j:int=0; j<12; j++) {
                      fieldArray[i][j]=0;
                      removeChild(getChildByName("r"+i+"c"+j));
                  }
                  for (j=i; j>=0; j--) {
                      for (var k:int=0; k<12; k++) {
                          if (fieldArray[j][k]==1) {
                              fieldArray[j][k]=0;
                              fieldArray[j+1][k]=1;
                              getChildByName("r"+j+"c"+k).y+=TS;
                              getChildByName("r"+j+"c"+k).name="r"+(j+1)+"c"+k;
                          }
                      }
                  }
              }
          }
      }
      private function canFit(row:int,col:int,side:uint):Boolean {
          var ct:uint=currentTetromino;
          for (var i:int=0; i<tetrominoes[ct][side].length; i++) {
              for (var j:int=0; j<tetrominoes[ct][side][i].length; j++) {
                  if (tetrominoes[ct][side][i][j]==1) {
                      // out of left boundary
                      if (col+j<0) {
                          return false;
                          }
                          // out of right boundary
                          if (col+j>11) {
                              return false;
                          }
                          // out of bottom boundary
                          if (row+i>19) {
                              return false;
                          }
                          // out of top boundary
                          if (row+i<0) {
                              return false;
                          }
                          // over another tetromino
                          if (fieldArray[row+i][col+j]==1) {
                              return false;
                          }
                      }
                  }
              }
              return true;
      }
} 
```

我会很感激的。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:54:08.190

更改主要功能：

```
 public function Main() {
   generateField();
   initTetrominoes();
   nextTetromino=Math.floor(Math.random()*3);
   stage.addEventListener(KeyboardEvent.KEY_DOWN,onKDown);
 }
 // add new funciton
 private function start():void {
    generateTetromino();
 }

 // edit the keydown callback to listen for the space bar - add it first in front of 37
    case 32 :
      start();
      break; 
```

# javascript - FB.ui 提要。如何获取当前标签 URL？

> ID：13561729
> 
> 赞同：0
> 
> 时间：2012-11-26T09:14:55.900
> 
> 标签：javascript, facebook-javascript-sdk

我的应用中有共享按钮的代码

```
FB.ui({
        method: 'feed',
        link: '',
        picture: 'icon.png',
        name: '',
        caption: '',
        description: ''
}); 
```

但是，此应用程序将安装在多个 Facebook 选项卡上。如何获取当前的 facebook 标签 URL，以便将其插入到上面的“链接”中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:36:08.440

页面的 id 可以在`signed_request`最初发布到您的应用程序中找到。你需要使用这个。

# powershell - 远程命令中的最大数据大小

> ID：13561730
> 
> 赞同：4
> 
> 时间：2012-11-26T09:14:58.270
> 
> 标签：powershell, powershell-remoting

我的 powershell 脚本使用以下代码将文件发送到自定义会话中的多个客户端（代码已缩短）

```
function DoCopyFile
{
    param(
    [Parameter(Mandatory=$true)] $RemoteHost,
    [Parameter(Mandatory=$true)] $SrcPath,
    [Parameter(Mandatory=$true)] $DstPath,
    [Parameter(Mandatory=$true)] $Session)
.
.
.               
    $Chunks | Invoke-Command -Session $Session -ScriptBlock { `
        param($Dest, $Length)

        $DestBytes = new-object byte[] $Length
        $Pos = 0
        foreach ($Chunk in $input) {
            [GC]::Collect()
            [Array]::Copy($Chunk, 0, $DestBytes, $Pos, $Chunk.Length)
            $Pos += $Chunk.Length
        }

        [IO.File]::WriteAllBytes($Dest, $DestBytes)
        [GC]::Collect()
    } -ArgumentList $DstPath, $SrcBytes.Length
.
.
.
}

$Pwd = ConvertTo-SecureString $Node.Auth.Password -asplaintext -force
$Cred = new-object -typename System.Management.Automation.PSCredential -ArgumentList ("{0}\{1}" -f $Name, $Node.Auth.Username),$Pwd
$Sopts = New-PSSessionOption -MaximumReceivedDataSizePerCommand 99000000
$Session = New-PSSession -ComputerName $Name -Credential $Cred -SessionOption $Sopts
DoCopyFile $Name ("{0}\{1}" -f $Node.Installer.ResourceDir, $Driver.Name) $Dest $Session 
```

完整的复制功能在这里描述：http: [//poshcode.org/2216](http://poshcode.org/2216)

大于 52MB 的文件会出现问题。它失败并出现以下错误：

```
Sending data to a remote command failed with the following error message: The total data received from the remote
client exceeded allowed maximum. Allowed maximum is 52428800\. For more information, see the
about_Remote_Troubleshooting Help topic.
    + CategoryInfo          : OperationStopped: (CLI-002:String) [], PSRemotingTransportException
    + FullyQualifiedErrorId : JobFailure
    + PSComputerName        : CLI-002 
```

正如您在代码中看到的，我使用自定义的 ps 会话。当我将 MaximumReceivedDataSizePerCommand 设置为非常低的值（如 10kb）时，它会失败并显示一条消息，告诉最大值为 10kb，所以我假设 MaximumReceivedDataSizePerCommand 应用于 ps 会话对象。

是否需要在远程机器或其他地方进行此配置？是什么导致了这个错误？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T10:25:39.217

您需要`PSSessionConfiguration`在远程计算机中创建一个新的（这不使用默认的）：

```
Register-PSSessionConfiguration -Name DataNoLimits #or the name you like. 
```

然后配置您想要的参数（在本例中为`MaximumReceivedDataSizePerCommandMB`和`MaximumReceivedObjectSizeMB`）：

```
Set-PSSessionConfiguration -Name DataNoLimits `
-MaximumReceivedDataSizePerCommandMB 500 -MaximumReceivedObjectSizeMB 500 
```

`PSSessionConfiguration`然后使用您需要的创建新会话：

```
$Session = New-PSSession -ComputerName MyRemoteComp -ConfigurationName DataNoLimits 
```

在您的本地计算机中。

以这种方式使用来自 posh.org 的发送文件，我复制了一个 ~80MB 大小的文件。更大的尺寸返回我的内存不足异常。

更多关于[这里。](http://powershell.com/cs/media/p/7257.aspx#using-custom-session-configurations)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-25T13:25:59.973

您可以查看有关后台智能传输服务 (BITS)[的帖子。](http://woshub.com/copying-large-files-using-bits-and-powershell/)如需更多帮助，您还可以查看[MSDN 文档](https://technet.microsoft.com/pt-br/library/jj590836(v=wps.630).aspx)。从文章来看，有以下几点考虑：

> 使用 BITS 协议的优势：
> 
> *   BITS 是一种智能协议，能够控制使用的带宽而不影响其他网络应用程序的工作。BITS 只能使用空闲频段，并在传输过程中动态改变数据速率（如果其他应用程序增加网络使用）
> *   如果出现中断或计算机重新启动，BITS 任务将自动恢复
> *   文件可以在后台下载，用户不会注意到
> *   接收端和服务器端不需要部署 IIS 服务器
> 
> 因此，BITS 是在慢速网络中传输大文件的首选协议。

希望有帮助。

# asynchronous - WinRT：阻止任务

> ID：13561731
> 
> 赞同：1
> 
> 时间：2012-11-26T09:15:02.517
> 
> 标签：asynchronous, windows-runtime, task, block, async-await

我正在实现我的应用程序的网络层，即使用异步 JSON-RPC 协议。

为了与服务器通信，我想做一个方法来发送正确的请求，等到服务器发送响应，然后返回。一切都使用 async/await 关键字。

这是简化的示例代码：

字符串响应；

```
Task<string> SendRequest(string methodName, string methodParams)
{
    string request = generateRequest(methodName, methodParams);

    await Send(request); // this will send using DataWriter, and StreamSocket

    // block Task until response arrives

    return response;
}

async void ReceiveLoop()
{
    while (true)
    {
            uint numStrBytes = await _reader.LoadAsync(BufferSize);

            string msg = _reader.ReadString(numStrBytes);

            response = msg;

            // unblock previously blocked SendRequest
        }        
    }
}

async void main()
{
    RecieveLoop();  
}

async void SendButtonPressed()
{
    string response = await SendRequest("Test method", "Test params");

    Debug.WriteLine("Response = " + response);
} 
```

这种模式的主要问题是这种阻塞动作。此操作应阻止当前任务，并允许处理超时。我尝试使用 ManualResetEvent 和 WaitOne(int) 来处理这个问题，但它冻结了整个线程，并且因为我只使用 async/await，它冻结了整个应用程序（对我来说更准确的是 UI 线程）。

对我来说看起来很老套的解决方案是我可以将 Task.Delay 与 CancellationTokens 一起使用。

它看起来像这样：

```
...
CancellationTokenSource cts;
int timeout = 10000;

Task<string> SendRequest(string methodName, string methodParams)
{
    ... (prepare request, and send)

    cts = new CancellationTokenSource();

    try
    {
        await Task.Delay(timeout, cts.Token);
    } catch(TaskCanceledException)
    {

    }

    // do rest
}

async void ReceiveLoop()
{
    // init recieve loop, and recieve message

    cts.Cancel();      
} 
```

该解决方案的问题（除了看起来像黑客之外）是性能 - 每个请求都会抛出一个异常，需要处理（在这种情况下跳过）。这个很慢，很痛:)

我怎样才能以更优雅的方式做到这一点？是否有任何其他选项可以阻止任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T12:24:52.943

将接收和发送循环转换为一个由发送按钮触发的循环：

```
while(!cancel) {
    await sendRequest();
    await receiveResponse();
} 
```

不确定您是否甚至需要循环，因为我不知道您的确切要求。它可能看起来像这样：

```
await sendRequest();
await receiveResponse(); 
```

这将执行一个请求-响应-循环。

* * *

阅读您在下面的评论，我想添加以下内容：您是对的，现在您需要两个循环。我将通过首先创建一个类来表示正在运行的请求来解决这个问题：

```
class Request { int ID; object Response; TaskCompletionCource CompletedTask; } 
```

发送内容时，您创建此类的一个实例并将其添加到`Dictionary<int, Request>`. 这`ID`是服务器可以用来响应您的请求的共享标识符（我知道多个请求可能未完成）。

收到回复后，您保存结果并将其标记`CompletedTask`为已完成。酸发送方法应如下所示：

```
var request = CreateRequest();
await sendRequest(request);
await request.CompletedTask.Task;
return request.Response; 
```

遗嘱作为`TaskCompletionSource`一个事件。该类`Request`封装了所有相关数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T22:35:59.880

行，

在 usr 的帮助下，我设法编写了这段代码，它阻塞了当前任务，超时：

任务超时扩展：

```
internal struct VoidTypeStruct{}

 public static class TaskTimeoutExtension
    {
        public static async Task TimeoutAfter(this Task task, int millisecondsTimeout)
        {
            if (task == await Task.WhenAny(task, Task.Delay(millisecondsTimeout)))
                await task;
            else
                throw new TimeoutException();
        }
    } 
```

阻塞任务：

```
var tcs = new TaskCompletionSource<VoidTypeStruct>();

try
{
    await Task.Run(async () => { await tcs.Task; }).TimeoutAfter(RequestTimeout);
}
catch (TimeoutException)
{                           
}

// store tcs variable somewhere 
```

解锁任务：

```
tcs.SetResult(new VoidTypeStruct()); 
```

这工作得非常快（至少比以前的解决方案好得多）。

最后的问题：真的，没有其他方法可以阻止任务吗？关键部分呢，没有任务的互斥锁吗？

# iis - 如何使用 Web.config 实现 URL HTTP 压缩和缓存？

> ID：13561733
> 
> 赞同：1
> 
> 时间：2012-11-26T09:15:04.887
> 
> 标签：iis, web-config, http-headers, plesk, http-compression

我已经通过 microhosting.in 购买了共享主机 在为我的初创公司整理网站之后，自然而然的下一步就是推广。所以我检查了性能。Pagespeed 测试指出缓存和未压缩的 http 存在问题。现在，通过 Plesk 托管 Windows 意味着对于任何 IIS 功能要求，我必须明确说服托管服务提供商，除非使用 Web.config。技术团队有点弱，无法尝试[http://blog.fi.net.au/?p=372](http://blog.fi.net.au/?p=372)使用 http 启用公共缓存，因为代理缓存可能会抑制元标记内容嗅探，应该是可取的。是否有任何自定义实现可以与 Web.config 结合起来应用这些，就像我在任何地方找到使用 .htaccess 的解决方案一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:53:05.590

将可选内容压缩在单独的文件夹中，并使用其自己的 web.config 强制将内容编码相关属性添加到标头。对于强制性内容，重命名文件以使用 asp.net 运行时并放置 --> 将 ContentType 替换为预期的 MIME 类型，嵌套在某个标记中，因为在服务器端 xsl 转换期间将其放置在最外层或未注释为默认刺激。现在在 global.asax 中实现以下 C# 逻辑

```
 void Application_PreRequestHandlerExecute(object sender, EventArgs e)
 {
     HttpApplication app = sender as HttpApplication;
    string acceptEncoding = app.Request.Headers["Accept-Encoding"];
    Stream prevUncompressedStream = app.Response.Filter;

    if (acceptEncoding == null || acceptEncoding.Length == 0)
        return;

    acceptEncoding = acceptEncoding.ToLower();

    if (acceptEncoding.Contains("gzip"))
    {
        // gzip
        app.Response.Filter = new GZipStream(prevUncompressedStream,
            CompressionMode.Compress);
        app.Response.AppendHeader("Content-Encoding", "gzip");
    }       /*else if (acceptEncoding.Contains("deflate") || acceptEncoding == "*")
    {
        // defalte
        app.Response.Filter = new DeflateStream(prevUncompressedStream,
            CompressionMode.Compress);
        app.Response.AppendHeader("Content-Encoding", "deflate");
    }*/    // Only cache for X seconds.
Response.Cache.SetExpires(DateTime.Now.AddMonths(9));
Response.Cache.SetMaxAge(new TimeSpan(270, 0, 0,0,0));
Response.Cache.SetCacheability(HttpCacheability.Public);
Response.Cache.SetValidUntilExpires(true);

// Sliding expiration means we reset the X seconds after each request.
// SetETag is required to work around one aspect of sliding expiration.
Response.Cache.SetSlidingExpiration(true);
Response.Cache.SetETagFromFileDependencies();

} 
```

# hibernate - HQL 查询返回重复记录

> ID：13561734
> 
> 赞同：2
> 
> 时间：2012-11-26T09:15:05.947
> 
> 标签：hibernate, hql

我的问题是关于如何在 hql 查询后解决“返回重复记录”。这是一个例子：

```
SELECT t0 FROM table0 t0, table1 t1, table2 t2 WHERE 

(((t0.a = 1 AND t0.b = 2 AND t0.c = 3) AND (t1.a = 4 AND t1.b = 5 AND t1.c = 6)) 

OR 

((t0.a = 7 AND t0.b = 8 AND t0.c = 9) AND (t1.a = 10 AND t1.b = 11 AND t1.c = 12) AND (t2.a = 13 AND t2.b = 14 AND t2.c = 15)) 
```

此查询正确返回我的记录，但有些记录不止一次返回。我想我知道原因。“table2 t2”没有用于“OR”之前的条件（“WHERE”和“OR”之间）。如何避免重复记录？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:22:52.843

如果您粘贴的是 SQL 输出（不是 HQL），则问题是该语句没有正确地 JOIN 表。

我希望表`t0`，`t1`并且`t2`彼此之间具有某种关系，并且查询应该包含`WHERE t0.foo = t1.bar AND t1.baz=t2.bah`。由于缺少此内容，因此预计结果会重复。

# actionscript-3 - 如何为 AS3 类包创建 API 引用？

> ID：13561736
> 
> 赞同：1
> 
> 时间：2012-11-26T09:15:07.880
> 
> 标签：actionscript-3

我已经使用 AS3 构建了一个简单的框架。我需要为用于构建此框架的类包生成 API 参考。

我可以利用这些类中指定的注释来自动生成 API 参考吗？

谢谢，

拉杰尼什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:25:34.780

您可以使用[Natural Docs](http://www.naturaldocs.org/)或 Grant Skinner 的 AsDoc [AsDocr包装器](http://gskinner.com/blog/archives/2010/01/asdocr_simple_a.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T22:08:36.147

您可以使用 asdoc 工具，它包含在 SDK 中。
[https://www.google.nl/search?q=asdoc+tool](https://www.google.nl/search?q=asdoc+tool)

# uitextview - 在 UITableViewCell 中调整 UITextView 的大小时会发生奇怪的事情

> ID：13561738
> 
> 赞同：0
> 
> 时间：2012-11-26T09:15:19.320
> 
> 标签：uitextview, autoresize

**背景：**

我有一个主从视图拆分视图控制器。在详细表视图中，我有一个静态表视图，其中一个单元格仅包含一个 UITextView 以显示客户的评论。

当我在主视图中点击客户名称时，它会读取评论信息并将其设置在 UITextView 中详细视图的 viewWillAppear 中的文本中。同时， UITextView 使用以下代码调整大小：

```
CGRect frame;
frame = self.detailCustomerCommentUITextView.frame;
frame.size.height = [self.detailCustomerCommentUITextView contentSize].height;

self.detailCustomerCommentUITextView.frame = frame;
[self.tableView reloadData]; 
```

该单元格的高度也发生了变化：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
CGFloat height = 30.0;

if (indexPath.section==3&&indexPath.row==1)
{
    height = MAX(self.detailCustomerCommentUITextView.frame.size.height, 30.0);

}else if (indexPath.section == 0 && indexPath.row == 0)
{
    height = 55.0;
}else if (indexPath.section == 1 && indexPath.row == 0)
{
    height = 47.0;
}

    return height;
} 
```

**重现问题的步骤：**

我第一次点击一个客户 (Customer Short)，它有一个简短的评论文本。调整大小的框架为： (CGRect) frame = origin=(x=67, y=-6) size=(width=568, height=32)

我在断点后得到了这个值： self.detailCustomerCommentUITextView.frame = frame;

然后在 heightForRowAtIndexPath 中，我得到了相同的高度：

(CGFloat) 高度 = 32

这看起来不错，但在应用程序中，我在 UITextView 中没有看到任何评论！

我很确定这个文本视图的文本不是空的，因为我已经在调试模式下检查了它。

然后我再次点击同一个客户，在 Break point after：

```
frame = self.detailCustomerCommentUITextView.frame; 
```

我看到（CGRect）框架=原点=（x=67，y=-6）大小=（宽度=568，高度=10）

这意味着在最后一帧调整为高度“32”后，UITextView 的大小调整为高度“10”。

然后代码运行通过

```
frame.size.height = [self.detailCustomerCommentUITextView contentSize].height;

self.detailCustomerCommentUITextView.frame = frame; 
```

我看到高度再次设置为 32。但这一次一切都很完美。我看到评论文本和 UITextView 调整大小：

然后我重复了上述步骤，发现一切正常，UITextView 不再调整大小。

**问题总结：**

在我第一次点击客户 Short 时，为什么 UITextView 在成功调整为高度 32 后调整为高度 10？

我使用了单步调试，但找不到任何其他更改框架的代码。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:36:55.870

问题解决了。我发现虽然 UITextView 已调整大小，但当它调用 heightForRowAtIndexPath 时，UITextView 的框架与单元格的新高度重叠。

在情节提要中，UITextView -> Size Inspector -> View -> Autosizing，我删除了所有内部箭头，只留下 I 外部（抱歉，我不知道哪个是 Struts，哪个是 Springs）。通过这种方式， UITextView 将自动调整大小以适应单元格的新高度。

希望这对任何需要的人都有帮助。

# php - 使用 PDO 引发异常“找不到驱动程序”

> ID：13561739
> 
> 赞同：1
> 
> 时间：2012-11-26T09:15:19.427
> 
> 标签：php, mysql

在我的 PHP 代码中，我运行以下代码：

```
private function dbConnection() {
        if (!is_resource($this->connessione))
            try {
                    $this->connessione = new PDO($this->db_type.":dbname=".$this->db_name.";host=".$this->db_server, $this->db_username, $this->db_pass );
                    //echo "PDO connection object created";
                    $this->setupSQLStatement();
                }
            catch(PDOException $e)
                {
                    echo $e->getMessage();
                    die();
                }
    } 
```

它引发了异常“找不到驱动程序”。什么是驱动程序以及如何使用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:24:57.507

PDO 带有一个核心扩展，以及一些 DBMS（MySQL、PostgreSQL、Oracle、SQLite...）的许多“适配器”。

这些适配器是您需要启用的附加扩展`php.ini`，如下所示：

```
extension=php_pdo.dll
;extension=php_pdo_firebird.dll
;extension=php_pdo_ibm.dll
;extension=php_pdo_informix.dll
;extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll
;extension=php_pdo_oci.dll
;extension=php_pdo_oci8.dll
;extension=php_pdo_odbc.dll
;extension=php_pdo_pgsql.dll
;extension=php_pdo_sqlite.dll
;extension=php_pdo_sqlite_external.dll
;extension=php_pdo_user.dll 
```

在 UNIX 环境中，将 .dll 替换为 .so。仅取消注释您需要的适配器（在上面的示例中：MySQL）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:27:18.057

添加以下内容并检查它是否输出“mysql”行。

```
foreach(PDO::getAvailableDrivers() as $driver)
    echo $driver, '<br>'; 
```

如果没有，则打开 php.ini 并找到：

```
;extension=php_pdo_mysql.dll 
```

删除`;`, 所以它看起来像这样，然后重试：

```
extension=php_pdo_mysql.dll 
```

也执行与上述相同的操作：

```
;extension=php_pdo.dll 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:24:30.033

```
PDO::getAvailableDrivers() 
```

使用它，您可以在服务器中找到可用的驱动程序。

# c - 将整数转换为字符串

> ID：13561743
> 
> 赞同：0
> 
> 时间：2012-11-26T09:15:35.797
> 
> 标签：c

我已经使用 rand 函数来生成一个随机数。我想把这个号码收集到一个`char buffer[10]`或一个`char *ptr`

```
main()
{
    char *ptr;
    int a;
    srand(time(NULL));
    a = rand();
} 
```

我想将 a 中的值复制到缓冲区或指向它`char *ptr`，请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:38:57.970

仅供参考，`snprintf`当您事先不知道缓冲区需要多大时，这里是如何使用的：

```
size_t len = snprintf(NULL, 0, "%d", a) + 1;
char *ptr = malloc(len);
if (!ptr) {
    // memory allocation failed, you must decide how to handle the error
} else {
    snprintf(ptr, len, "%d", a);

    ... // some time later

    free(ptr);
} 
```

但是，由于您的代码是用旧样式编写的（没有返回类型，`main`并且所有变量都在函数开头声明），因此您的 C 实现可能没有`snprintf`. 请注意，Microsoft`_snprintf`不是直接替代品：当它截断输出时，它不会告诉您要写入多少数据。

在这种情况下，您可以使用该值`RAND_MAX`来计算该值可能有多少位，因此您的缓冲区需要多大。10 在 Linux 上是不够的，其中`RAND_MAX`is `2147483647`，因此您的 nul 终止字符串需要 11 个字节。

顺便说一句，我忽略了`snprintf`指示截断以外的错误的可能性，它使用返回值-1。那是因为`%d`不能失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:17:44.903

您可以使用

```
char x[10];
sprintf(x, "%d", integer_number); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:18:33.793

```
char ptr[10];
sprintf(ptr,"%d",a); 
```

如果你想使用`char *ptr`

```
char *ptr = malloc(10*sizeof(char));
sprintf(ptr,"%d",a);

// And If you want to free allocated space for ptr some where:
free(ptr); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:26:38.633

使用起来更安全`snprintf()`。

```
int answer = 42;
char buf[32];
snprintf(buf, sizeof(buf), "%d", answer);
printf("The answer is: %s\n", buf); 
```

如果要使用动态分配的缓冲区：

```
const size_t size = 32;
char *buf = malloc(size);
if (buf != NULL) {
    snprintf(buf, size, "%d", answer);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:41:13.470

如果您的编译器是 GCC：

```
#define _GNU_SOURCE
#include <stdio.h>
#include <stdlib.h>

main()
{
    char *ptr;
    int a;
    srand(time(NULL));
    a = rand();
    asprintf(&ptr, "%d", a);
    printf("%s\n", ptr);
    //DO SOMETHING
    free(ptr);
} 
```

# javascript - 隐藏和显示 div

> ID：13561745
> 
> 赞同：-2
> 
> 时间：2012-11-26T09:15:41.297
> 
> 标签：javascript, jquery, html

嗨，我有一个我想要的表单，如果我点击提交按钮显示一个图表我试图将表格放在一个 div 标签中，我不知道如何标记这个不可见，如果我点击按钮图表的显示可以请帮助我

```
<form class="form-analyste"  name="MyForm" action="{{ path('ConstruireGraph')}}" method="post" id="crs" >
<input name="send_button" type="submit" value="Valider" class="cssbutton" />
</form>
<div id="chartdiv" style="width: 100%; height: 400px;">
</div> 
```

我有这段代码来加载图表：

```
 <script type="text/javascript">
var chart;
var chartData = [];

// generate some random data, quite different range
function generateChartData() {
    var firstDate = new Date();
    var i = 0;
    firstDate.setDate(firstDate.getDate() - 50);

    while ( i < 50) {
        var newDate = new Date(firstDate);
        newDate.setDate(newDate.getDate() + i);
{% for gra in gra %}

         var HO_ATT_DL_LEVEL_RATE = {{gra.HO_ATT_DL_LEVEL_RATE}};
         var SDCCH_DROP_RATE = {{gra.SDCCH_DROP_RATE}};
         var HO_ATT_BETTER_CELL_RATE = {{gra.HO_ATT_BETTER_CELL_RATE}};

        chartData.push({
            date: newDate,
            HO_ATT_DL_LEVEL_RATE: HO_ATT_DL_LEVEL_RATE,
            SDCCH_DROP_RATE: SDCCH_DROP_RATE,
            HO_ATT_BETTER_CELL_RATE: HO_ATT_BETTER_CELL_RATE,
            HO_ATT_BETTER_CELL_RATE: HO_ATT_BETTER_CELL_RATE
        });{% endfor %}

        i++;
    }
}

// this method is called when chart is first inited as we listen for "dataUpdated" event
function zoomChart() {
    // different zoom methods can be used - zoomToIndexes, zoomToDates, zoomToCategoryValues
    chart.zoomToIndexes(10, 20);
}

// create chart
AmCharts.ready(function() {
    // generate some random data first
    generateChartData();

    // SERIAL CHART    
    chart = new AmCharts.AmSerialChart();
    chart.marginTop = 0;
    chart.autoMarginOffset = 5;
    chart.pathToImages = "http://www.amcharts.com/lib/images/";
    chart.zoomOutButton = {
        backgroundColor: '#000000',
        backgroundAlpha: 0.15
    };
    chart.dataProvider = chartData;
    chart.categoryField = "date";

    // listen for "dataUpdated" event (fired when chart is inited) and call zoomChart method when it happens
    chart.addListener("dataUpdated", zoomChart);

    // AXES
    // category                
    var categoryAxis = chart.categoryAxis;
    categoryAxis.parseDates = true; // as our data is date-based, we set parseDates to true
    categoryAxis.minPeriod = "DD"; // our data is daily, so we set minPeriod to DD
    categoryAxis.dashLength = 2;
    categoryAxis.gridAlpha = 0.15;
    categoryAxis.axisColor = "#DADADA";

    // first value axis (on the left)
    var valueAxis1 = new AmCharts.ValueAxis();
    valueAxis1.axisColor = "#FF6600";
    valueAxis1.axisThickness = 2;
    valueAxis1.gridAlpha = 0;
    chart.addValueAxis(valueAxis1);

    // second value axis (on the right) 
    var valueAxis2 = new AmCharts.ValueAxis();
    valueAxis2.position = "right"; // this line makes the axis to appear on the right
    valueAxis2.axisColor = "#FCD202";
    valueAxis2.gridAlpha = 0;
    valueAxis2.axisThickness = 2;
    chart.addValueAxis(valueAxis2);

    // third value axis (on the left, detached)
    valueAxis3 = new AmCharts.ValueAxis();
    valueAxis3.offset = 50; // this line makes the axis to appear detached from plot area
    valueAxis3.gridAlpha = 0;
    valueAxis3.axisColor = "#B0DE09";
    valueAxis3.axisThickness = 2;
    chart.addValueAxis(valueAxis3);
    var valueAxis4 = new AmCharts.ValueAxis();
    valueAxis4.offset = 100; // this line makes the axis to appear detached from plot area
    valueAxis4.axisColor = "#1E90FF";
    valueAxis4axisThickness = 2;
    valueAxis4.gridAlpha = 0;
    chart.addValueAxis(valueAxis4);
    // GRAPHS
    // first graph
    var graph1 = new AmCharts.AmGraph();
    graph1.valueAxis = valueAxis1; // we have to indicate which value axis should be used
    graph1.title = "HO_ATT_DL_LEVEL_RATE";
    graph1.valueField = "HO_ATT_DL_LEVEL_RATE";
    graph1.bullet = "round";
    graph1.hideBulletsCount = 30;
    chart.addGraph(graph1);

    // second graph                
    var graph2 = new AmCharts.AmGraph();
    graph2.valueAxis = valueAxis2; // we have to indicate which value axis should be used
    graph2.title = "SDCCH_DROP_RATE";
    graph2.valueField = "SDCCH_DROP_RATE";
    graph2.bullet = "square";
    graph2.hideBulletsCount = 30;
    chart.addGraph(graph2);

    // third graph
    var graph3 = new AmCharts.AmGraph();
    graph3.valueAxis = valueAxis3; // we have to indicate which value axis should be used
    graph3.valueField = "HO_ATT_BETTER_CELL_RATE";
    graph3.title = "HO_ATT_BETTER_CELL_RATE";
    graph3.bullet = "triangleUp";
    graph3.hideBulletsCount = 30;
    chart.addGraph(graph3);
   var graph4 = new AmCharts.AmGraph();
    graph4.valueAxis = valueAxis4; // we have to indicate which value axis should be used
    graph4.valueField = "HO_ATT_BETTER_CELL_RATE";
    graph4.title = "HO_ATT_BETTER_CELL_RATE";
    graph4.bullet = "bubble";
    graph4.hideBulletsCount = 30;
    chart.addGraph(graph4);
    // CURSOR
    var chartCursor = new AmCharts.ChartCursor();
    chartCursor.cursorPosition = "mouse";
    chart.addChartCursor(chartCursor);

    // SCROLLBAR
    var chartScrollbar = new AmCharts.ChartScrollbar();
    chart.addChartScrollbar(chartScrollbar);

    // LEGEND
    var legend = new AmCharts.AmLegend();
    legend.marginLeft = 110;
    chart.addLegend(legend);

    // WRITE
    chart.write("chartdiv");
});

        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:22:52.350

使用 jquery 会很容易，只需像这样设置元素的 css 属性：

```
$('element').css(visibility,hidden); <-- to hide it, and visible to show it, maybe you could add all this to a click event on the submit form, also you can use some other techniques like fadeIn() and fadeOut(). 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:32:29.170

我不确定你想要什么......检查下面的代码......

HTML：

```
<div>
     <div name="graph"></div>
     <button type="button" onClick="toggle()"></button>
</div> 
```

JavaScript：

```
function toggle(){
     var graph=this.parentNode.getElementsByName('graph')[0];
     var style=window.getComputedStyle(graph).display;
     if(style=='none'){
          graph.style.display='online'; // you can also use 'block' instead of 'online'
          this.innerHTML='Show';
     }else{
          graph.style.display='none';
          this.innerHTML='Hide';
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:32:39.750

`div`如果我理解您的问题是在不提交表单的情况下显示/隐藏标签内的内容，

```
$(document).ready(function() {
     $('.cssbutton').click(function(event) {
        event.preventDefault();                
        $('#chartdiv').toggle();
     });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T10:33:58.400

将“chartdiv”的**显示属性设置为****无**

```
<div id="chartdiv" style="width: 100%; height: 400px; display: none;"></div> 
```

**向Valider**按钮添加点击事件。

```
<input name="send_button" type="submit" value="Valider" class="cssbutton" onclick="showHide();" /> 
```

并编写以下脚本来执行该功能

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.js"></script>

<script type="text/javascript" language="javascript">
var flag=0;
function showHide()
{
if(flag==0){
    $('#chartdiv').show();
    flag=1;
    }
    else
    {
    $('#chartdiv').hide();
    flag=0;
    }
}
</script> 
```

我希望这可以帮助你

# sql - SQL - 如何获得 2 个表 sql 的最大计数

> ID：13561748
> 
> 赞同：0
> 
> 时间：2012-11-26T09:15:41.687
> 
> 标签：sql, oracle

我只想显示最大价值的计数（LEG.LEG#），我该如何实现。我知道我可以使用 max 但在这种情况下如何使用 max。

询问，

```
select leg.T#,count(leg.LEG#) 
from trktripleg leg,trktrip trip 
WHERE leg.T#  = trip.T# AND trip.L#='10001' 
GROUP BY leg.T# 
ORDER by leg.T# ASC; 
```

结果，

```
 T# COUNT(LEG.LEG#)
---------- ---------------
         1               3
         3               3
         8               3
        18               3
        21               3
        25               4
        26               3
        29               3
        35               4
        37               5
        39               3

        T# COUNT(LEG.LEG#)
---------- ---------------
        44               4
        57               4
        61               4
        62               3
        65               4
        71               5
        73               3
        75               5
        80               5
        90               4
        93               5

        T# COUNT(LEG.LEG#)
---------- ---------------
        97               5
        98               4
       101               4
       107               3

SQL> desc trktripleg
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 T#                                        NOT NULL NUMBER(10)
 LEG#                                      NOT NULL NUMBER(2)
 DEPARTURE                                 NOT NULL VARCHAR2(30)
 DESTINATION                               NOT NULL VARCHAR2(30)

SQL> desc trktrip
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------

 T#                                        NOT NULL NUMBER(10)
 L#                                        NOT NULL NUMBER(8)
 REG#                                      NOT NULL VARCHAR2(10)
 TRKTRIP_DATE                              NOT NULL DATE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:23:07.623

```
SELECT MAX(c)
FROM (SELECT leg.T#,COUNT(leg.LEG#) c
FROM trktripleg leg,trktrip trip 
WHERE leg.T#  = trip.T# AND trip.L#='10001' 
GROUP BY leg.T#); 
```

# xna - XNA中每个三角形碰撞的奇怪行为

> ID：13561755
> 
> 赞同：1
> 
> 时间：2012-11-26T09:16:14.797
> 
> 标签：xna, collision, mesh

我一直在研究 XNA 中的（有点）更高级的碰撞检测（和滑动响应），它读取任何加载模型的 VertexBuffer 并从其顶点（和索引）生成平面实例......更客观地说是定制的 Face 结构一个代表实际面的主平面，以及另外三个代表其边界的主平面。

这样，当一个 BoundingSphere 与为每 3 个顶点生成的 BoundingBox 相交时，会检查另一个与面的 main Plane 的交点，然后，确定碰撞发生在三角形内部，其他三个平面，它们是要与三角形的边缘对齐，请检查 BoundingSphere 是否不在外部。

到目前为止，我在复杂的网格中得到了有趣的好结果，能够实时缩放、旋转和移动它们，而不会在转换过程中破坏碰撞网格……但我相信我的问题在于生成面的部分，因为我只能用构成网格的一半三角形得到正确的 - 实际上接近完美的结果，这也取决于它是哪个网格。使用一些随机的几何形状，我没有这个问题。

就像 Face 结构内的一个或多个平面的一些法线被翻转，导致 BoundingSphere 报告绝对没有与某些三角形发生碰撞......

某处一定有一些小东西......否则我不会让球体与确实有效的三角形发生如此精确的碰撞......

现在我只想让这个小东西发挥作用，然后我会考虑优化它......

[源文件](http://www.mediafire.com/?auccwgwqfuca61e "仅包含最重要的文件。")

# c# - 不确定必须传递什么 objectContext

> ID：13561758
> 
> 赞同：0
> 
> 时间：2012-11-26T09:16:20.567
> 
> 标签：c#, asp.net-mvc-3

我有存储库：

```
namespace Zinc.Repositories.EF.Scorm
{
public class ScormModuleRepository : Repository<ScormModule>, IScormModuleRepository
{
#region Constructor

/// <summary>
/// Initializes a new instance of the <see cref="ScormModuleRepository"/> class.
/// </summary>
/// <param name="objectContext">The object context.</param>
public ScormModuleRepository(ObjectContext objectContext)
  : base(objectContext)
{

}

#endregion

/// <summary>
/// Clear all records (for user and selected scorm module) from the scorm.userscormmoduledata and scorm.userscormmoduleassessment tables.
/// </summary>
/// <param name="id"></param>
/// <param name="userScormModuleId"></param>
public void ResetModule(int id, int userScormModuleId, int currentUser)
{
  using (SqlConnection conn = new SqlConnection(ZincModelContainer.CONNECTIONSTRING))
  {
    using (SqlCommand cmd = conn.CreateCommand())
    {
      conn.Open();
      cmd.CommandType = System.Data.CommandType.StoredProcedure;
      cmd.CommandText = "[Zinc].[ResetUserScormModuleData]";

      SqlParameter param = new SqlParameter("@userId", System.Data.SqlDbType.Int);
      param.Value = id;
      cmd.Parameters.Add(param);

      SqlParameter param2 = new SqlParameter("@userScormModuleId", System.Data.SqlDbType.Int);
      param2.Value = userScormModuleId;
      cmd.Parameters.Add(param2);

      SqlParameter param3 = new SqlParameter("@currentUser", System.Data.SqlDbType.Int);
      param3.Value = currentUser;
      cmd.Parameters.Add(param3);

      cmd.ExecuteNonQuery();
    }
  }
} 
```

在我的控制器中，我有：

```
[HttpGet]
public ActionResult UserDetails(int id)
{
  var user = ZincService.GetUserForId(id);
  if (user == null || user.Customer.CustomerId != CurrentCustomer.CustomerId)
    return DataNotFound();

  ManageUserViewModel viewModel = new ManageUserViewModel();
  viewModel.User = user;
  viewModel.IsLockedOut = MembershipService.IsUserLocked(user.Email);
  viewModel.IsActivated = user.DateTimeActivated.HasValue && MembershipService.IsUserApproved(user.Email);
  viewModel.IsArchived = user.IsArchived;
  var scormModuleRepository = new ScormModuleRepository();
  var trainingService = new Zinc.ServiceImplementations.TrainingService(scormModuleRepository);
  IEnumerable<UserTrainingDataModel> ids =  trainingService.GetTrainingModulesForUser(user.UserId);
  viewModel.TrainingModules = ids;

  return View(viewModel);
} 
```

我收到一条错误消息：`var scormModuleRepository = new ScormModuleRepository();`说明：

> 错误 2 'Zinc.Repositories.EF.Scorm.ScormModuleRepository' 不包含采用 0 个参数的构造函数 C:\TFSPreview\Zinc\Web\Project\Areas\User\Controllers\ManageController.cs 102 35 Zinc.Web

我必须在这里传递什么是 ObjectContext 类型的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:28:07.630

是的，您必须将 的实例传递`ObjectContext`给`ScormModuleRepository`

```
// get context
ObjectContext objectContext = ....;
var repository = new ScormModuleRepository(objectContext); 
```

# c# - 当用户单击 MessageDialog 上的按钮时如何调用 FileSavePicker？

> ID：13561760
> 
> 赞同：1
> 
> 时间：2012-11-26T09:16:30.800
> 
> 标签：c#, .net, windows-8, microsoft-metro

我有一个 Windows 8 Metro 风格的应用程序，我遇到了应该很容易完成的事情，但我发现很难想出一个解决方案。由于现在已经一个星期了，我还没有找到解决方案，我提供了 300 代表的赏金来获得一个可行的解决方案。

设想：

当我编辑文本框并单击创建新文档时，会出现一个消息对话框，询问我是否要在创建新文件之前保存对现有文件的更改。如果我单击“是，保存更改” - 然后 FileSavePicker 打开，允许我保存文件。

问题：当我单击“是，保存更改”时，我得到一个 ACCESSDENIED 异常。我设置了断点，但异常细节没有透露任何其他信息。

注意：我没有启用 DocumentsLibrary 声明，因为在这种情况下这不是必需的，当这不起作用时，我还是尝试启用它 - 但我仍然收到错误。

此外，所有代码都可以完美地独立运行（彼此分开），但是当您将它们捆绑在一起时，当 FileSavePicker 试图打开时，它就会分崩离析。

我相信这可能是一个线程问题。但我不确定。

[MSDN](http://msdn.microsoft.com/en-au/library/windows/apps/windows.ui.popups.messagedialog)上的消息对话框。

我的代码如下：

```
async private void New_Click(object sender, RoutedEventArgs e)
{
    if (NoteHasChanged)
    {
        // Prompt to save changed before closing the file and creating a new one.
        if (!HasEverBeenSaved)
        {

        MessageDialog dialog = new MessageDialog("Do you want to save this file before creating a new one?",
            "Confirmation");
        dialog.Commands.Add(new UICommand("Yes", new UICommandInvokedHandler(this.CommandInvokedHandler)));
        dialog.Commands.Add(new UICommand("No", new UICommandInvokedHandler(this.CommandInvokedHandler)));
        dialog.Commands.Add(new UICommand("Cancel", new UICommandInvokedHandler(this.CommandInvokedHandler)));

        dialog.DefaultCommandIndex = 0;
        dialog.CancelCommandIndex = 2;

        // Show it.
        await dialog.ShowAsync();
    }
    else { }
}
else
{
    // Discard changes and create a new file.
    RESET();
} 
```

}

还有 FileSavePicker 的东西：

```
private void CommandInvokedHandler(IUICommand command)
{
    // Display message showing the label of the command that was invoked
    switch (command.Label)
    {
        case "Yes":

            MainPage rootPage = this;
            if (rootPage.EnsureUnsnapped())
            {
                // Yes was chosen. Save the file.
                SaveNewFileAs();
            }
            break;
        case "No":
            RESET(); // Done.
            break;
        default:
            // Not sure what to do, here.
            break;
    }
}

async public void SaveNewFileAs()
{
    try
    {
        FileSavePicker saver = new FileSavePicker();
        saver.SuggestedStartLocation = PickerLocationId.Desktop;
        saver.CommitButtonText = "Save";
        saver.DefaultFileExtension = ".txt";
        saver.FileTypeChoices.Add("Plain Text", new List<String>() { ".txt" });

        saver.SuggestedFileName = noteTitle.Text;

        StorageFile file = await saver.PickSaveFileAsync();
        thisFile = file;

        if (file != null)
        {
            CachedFileManager.DeferUpdates(thisFile);

            await FileIO.WriteTextAsync(thisFile, theNote.Text);

            FileUpdateStatus fus = await CachedFileManager.CompleteUpdatesAsync(thisFile);
            //if (fus == FileUpdateStatus.Complete)
            //    value = true;
            //else
            //    value = false;

        }
        else
        {
            // Operation cancelled.
        }

    }
    catch (Exception exception)
    {
        Debug.WriteLine(exception.InnerException);
    }
} 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T06:18:32.440

问题似乎是您在关闭`FileSavePicker`之前`MessageDialog`（以及在`await dialog.ShowAsync()`呼叫终止之前）打开 a 。我不确定为什么会发生这种行为，但可以轻松完成解决方法。我只会举一个例子，你可以根据自己的需要和模型来调整它。

首先，声明一个`Enum`.

```
enum SaveChoice
{
    Undefined,
    Save,
    DoNotSave
} 
```

然后，在您的类中创建一个字段/属性。同样，这不是最明智的设计选择，但它可以作为示例。

```
SaveChoice _currentChoice; 
```

然后，修改您的`CommandInvokeHandler`方法：

```
void CommandInvokedHandler(IUICommand command)
{
    // Display message showing the label of the command that was invoked
    switch (command.Label)
    {
        case "Yes":
            var rootPage = this;
            if (rootPage.EnsureSnapped())
                _currentChoice = SaveChoice.Save;
            break;
        case "No":
            _currentChoice = SaveChoice.DoNotSave;
            break;
        default:
            _currentChoice = SaveChoice.Undefined;
            // Not sure what to do, here.
            break;
    }
} 
```

最后，编辑您的`New_Click`方法：

```
//Continues from dialog.CancelCommandIndex = 2;
// Show it.
await dialog.ShowAsync();
if (_currentChoice == SaveChoice.Save) SaveNewFileAs(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T08:05:21.070

您可以在调用文件选择器之前引入一个微小的延迟，以确保消息对话框已结束。

```
await Task.Delay(10);
StorageFile file = await saver.PickSaveFileAsync(); 
```

# jquery - jQuery翻转速度

> ID：13561763
> 
> 赞同：0
> 
> 时间：2012-11-26T09:16:40.473
> 
> 标签：jquery

下面是我为在两个之间翻转而编写的代码`div`，

如何控制翻转动作的速度？

这是代码：

### HTML：

```
<button type="button" id="go">FLIP</button>
<div class="container">
    <div class="page1">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque euismod mauris       metus, ac consectetur felis. Cras consectetur, est vel malesuada faucibus, ligula enim suscipit elit, ut ornare quam urna quis felis. In hac habitasse platea dictumst.
    </div>
    <div class="page2">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Duis interdum, odio vel       condimentum varius, nibh nunc 
    </div>
</div> 
```

### JS：

```
$('.container').click(function() {
    var page1 = $('.page1');
    var page2 = $('.page2');
    var toHide = page1.is(':visible') ? page1 : page2;
    var toShow = page2.is(':visible') ? page1 : page2;

    toHide.removeClass('flip in').addClass('flip out').hide();
    toShow.removeClass('flip out').addClass('flip in').show();
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:40:49.150

如果您希望它在此处的 css 中更快或更慢地更改：

```
.flip.out {
   -webkit-transform: rotateY(-90deg) scale(.9);
   -webkit-animation-name: flipouttoleft;
   -webkit-animation-duration: 250ms;        // here
   -moz-transform: rotateY(-90deg) scale(.9);
   -moz-animation-name: flipouttoleft;
   -moz-animation-duration: 250ms;           // here
}
.flip.in {
   -webkit-animation-name: flipintoright;
   -webkit-animation-duration: 525ms;       // here
   -moz-animation-name: flipintoright;
   -moz-animation-duration: 525ms;          // here
} 
```

如果这有帮助，请检查这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:23:03.147

您可以将选项传递给[`hide`](http://api.jqueryui.com/hide/)and [`show`](http://api.jqueryui.com/show/)：

```
.hide({duration: 500 /* ms */});
.show({duration: 500 /* ms */}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:24:45.073

隐藏/显示函数的第一个参数对应于以毫秒为单位的持续时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:38:53.913

您可以简单地使用jQuery 的`hide()`和`show()`方法，就像在这个小提琴中一样，看看：

[http://jsfiddle.net/YqhpS/26/](http://jsfiddle.net/YqhpS/26/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:41:37.293

您是否使用 CSS3 变换来实现翻转效果？然后您可以像这样指定过渡持续时间： `transition: <property> <duration> <timing-function> <delay>`

请参阅：[https ://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_transitions)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-21T10:38:04.560

我刚刚做了类似的事情。我从 CDN 下载了 jquery 翻转插件。然后我为我的所有照片制作了一个带有“照片”类的 div，每张照片都有一个 div 类“正面”和“背面”及其内容。主 CSS 应该转到主 div 'photo'。在例如 Github 上解释过，还有其他的。js代码很简单。您可以为插件添加各种属性，也可以添加速度。 `<script> $(function(){ $(".flip").flip({ trigger: 'click', speed: 1000 }); }); </script>`

我看到你的问题很老了。当你问它时，也许这一切还不存在。

# c# - POST 字典

> ID：13561764
> 
> 赞同：1
> 
> 时间：2012-11-26T09:16:42.783
> 
> 标签：c#, asp.net, web

我将字典发布到C# Web 服务器中，想问如何获取POST 字典？
下面是我的示例字典

```
{"Debtor":{"CompanyName":"Big Company","AccNo":"300-G002","DocDate":"26-November-2012"}}

[OperationContract]
[WebInvoke(Method = "POST", UriTemplate = "json/PostSalesOrderData", RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    Dictionary<string, Object.Test> PostSalesOrderData(object data);

    public Dictionary<string, Object.Test> PostSalesOrderData(object data)
    { 
        JavaScriptSerializer serializer = new JavaScriptSerializer();
        string str = serializer.Serialize(data);

        Dictionary<string, Object.Test> userData = serializer.Deserialize<Dictionary<string, Object.Test>>(str);

        return userData;

    } 
```

Xcode 响应字符串

服务器在处理请求时遇到错误。异常消息是“反序列化 System.Object 类型的对象时出错。令牌 '"' 是预期的，但发现是 'D'。'。有关更多详细信息，请参阅服务器日志。异常堆栈跟踪是：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:05:55.507

如果您使用的是 WCF，如果您更改`PostSalesOrderData(object data)`为`PostSalesOrderData(Dictionary<string, VALUETYPE> data)`.

如果这不起作用，请获取原始字符串并手动反序列化：

```
public Dictionary<string, Object.Test> PostSalesOrderData(string data)
{
    var jss = new JavaScriptSerializer();
    var dict = jss.Deserialize<Dictionary<string,dynamic>>(data);

    ...
} 
```

我没有测试反序列化到`Dictionary<string, dynamic>`，如果每个条目都是相同类型，您可能需要将实际模型类型放在那里。您可能还需要进行设置`[WebInvoke(BodyStyle = WebMessageBodyStyle.Bare)]`才能使其正常工作。

# app-store - 点击继续并登录以检查下载。[沙盒]

> ID：13561769
> 
> 赞同：21
> 
> 时间：2012-11-26T09:17:09.557
> 
> 标签：app-store, app-store-connect, storekit

有时我会收到一个非常烦人的对话框，其中包含以下文字：“点击继续并登录以检查下载。” 如果我登录（使用沙盒用户）或点击取消，对话框会立即再次显示。

我正在使用非续订订阅和非消耗性产品。

任何想法如何摆脱这个对话框？

谢谢

/马丁

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-18T22:24:57.563

共识似乎是：

*   问题始于 iOS 6
*   如果您没有使用 Apple ID 登录“设置”，这似乎不会发生。
*   打开飞行模式，然后像在“设置”中那样注销您登录的任何 Apple ID，然后将飞行模式保持开启约 15 分钟，这些消息将停止一段时间。
*   擦拭设备并恢复不会让它消失
*   有人对此提出了一个错误，并标记为重复，所以苹果似乎意识到了这个问题，但还不愿意对此做任何事情。
*   有人猜测，当您的设备使用一个 ID 登录 Sandbox 并使用另一个 ID 登录 live store 时，就会发生这种情况。如果您正在测试应用内购买，请在开始测试之前退出您的主 ID。

这里有一些关于这个问题的更多讨论：

[https://discussions.apple.com/message/21492551?ac_cid=tw123456#21492551](https://discussions.apple.com/message/21492551?ac_cid=tw123456#21492551)

[https://discussions.apple.com/thread/4412889?tstart=0](https://discussions.apple.com/thread/4412889?tstart=0)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T07:55:54.607

沙盒多次发出冗余对话框，非沙盒帐户不可用。如果您遵循 storekit 协议，则无需担心。我遇到了从 didReceiveResponse 代表发出的重复警报框的相同问题，但是我的应用程序获得了批准，并且在实际环境中没有问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-31T11:56:26.443

我以最简单的方式解决了这个问题。当 AlertView 出现时，只需单击继续并使用该帐户登录。（在我的情况下，它甚至存储了从我的 iTunesConnect 中的测试用户列表中删除的旧帐户）。我收到了我正在测试我的 InAppPurchase 的 5 或 6 个帐户的警报，但是在我用所有这些帐户登录后，我不再收到它。希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T16:28:48.007

我有同样的问题。

我非常肯定，实际问题在于**支付队列中有应用内购买，并且这些购买需要从队列中清除**。

这样做的代码：

```
[[SKPaymentQueue defaultQueue] finishTransaction:transaction]; 
```

我的应用程序有一个复杂的验证系统，在我调用上述方法之前需要通过它。如果用户在此期间退出应用程序或失去互联网连接，付款队列中将会有剩余的购买。

解决此问题的一种方法是在您获得的每笔交易上将应用程序修改为“finishTransaction” - 因此清除支付队列。确保登录到所有可能与付款队列中的购买相关的帐户（也就是您用于该应用程序的所有测试帐户）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-13T22:59:39.627

我添加了

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

到我的 appDelegate didFinishLaunchingWithOptions 结束，它为我解决了这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-07T11:53:07.237

2017年依然存在！

看起来像沙盒故障：尽管退出了沙盒用户帐户，但仍会记住该用户的 ID，并且该用户的不完整交易不断弹出。

我通过以下方式清除这些：

*   出现提示时以问题用户身份登录，
*   为该用户在应用程序中运行“恢复购买”功能（如果出现提示，请重新输入凭据）。

这将清除所有未完成的交易（如果您的“恢复购买”功能是正确的），因此该消息将不会出现在后续运行中（直到沙盒交易再次不完整......）

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-04-16T15:32:46.560

为我解决的问题类似于 kgaidis 的答案，但为了让这更容易，我只放置了多个：SKPaymentQueue.defaultQueue().finishTransaction(transaction as!SKPaymentTransaction)

进入 updatedTransactions 函数的购买状态。我在那里放置了大约 20 个并运行了应用程序。在应用程序购买了几个沙盒后，问题就消失了。

# regex - 正则表达式 - 查找和替换记事本++

> ID：13561780
> 
> 赞同：0
> 
> 时间：2012-11-26T09:17:54.327
> 
> 标签：regex, notepad++

我正在使用记事本++。

我想找到以下内容

`$result["value"]`

并将其替换为

`$result->Items[0]->value`

那么任何人都可以帮助我使用正则表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:21:22.753

这个对我有用：

找什么：`\$result\["([^"]+)"\]`

用。。。来代替：`$result->Items[0]->\1`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:22:49.870

使用这个正则表达式

```
\$result\["value"\] 
```

并将其替换为

```
$result->Items[0]->value 
```

# google-cloud-messaging - 带有 xtify 的 GCM。不注册设备

> ID：13561784
> 
> 赞同：3
> 
> 时间：2012-11-26T09:18:03.437
> 
> 标签：google-cloud-messaging, xtify

我正在尝试使用 Google Cloud Messaging 实现推送。[我完成了http://developer.xtify.com/display/sdk/Getting+Started+with+Google+Cloud+Messaging](http://developer.xtify.com/display/sdk/Getting+Started+with+Google+Cloud+Messaging)的所有步骤，但该设备未出现在测试实施中。我的 appkey 是 Development。我尝试使用 xtify 的示例，但我更改了示例 MainActivity 中的键 XTIFY_APP_KEY、PROJECT_ID 但我不知道如何从这个应用程序发送推送。我启用通知。我必须做什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:30:21.613

以下是您可以做的几件事：

*   仔细检查您的 PROJECT_ID 是否有效。
*   确保您在 google API 控制台中启用了 GCM。
*   确保您已将 Google API 密钥复制到您在 Xtify 控制台中创建的应用程序中。
*   实现[Xtify Notifier](http://developer.xtify.com/display/sdk/Advanced+Integration+Guide+for+Google+Cloud+Messaging#AdvancedIntegrationGuideforGoogleCloudMessaging-HandlingEventsandNotificationData)以在 Xtify SDK 发生错误时获取回调。

如果您需要更多帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T13:58:42.117

我已经在寻找一个答案来解决这个讨论中描述的问题。所以我按照答案 2 的步骤操作，但是自从迁移到 gcm 后，android 应用程序没有得到 Xid。

# facebook - 使用 Selinium ide 插件工具测试项目

> ID：13561785
> 
> 赞同：1
> 
> 时间：2012-11-26T09:18:05.373
> 
> 标签：facebook, gmail

我使用 Selenium IDE 工具为登录功能录制了一个测试脚本。在使用该工具时，将我的登录链接识别为元素“id=aui_3_4_0_1_305”。但是当我运行录制的脚本时，该工具将错误显示为“未找到元素 id=aui_3_4_0_1_305”。

实际上，我已经为登录功能录制了一个 Selenium (IDE) 脚本。在我录制的脚本中，我为“登录”执行了“单击”操作，其中应用程序始终为登录链接生成一个新 ID。所以当我运行录制的脚本时。应用程序为登录链接生成一个新 ID，该工具向我显示错误消息“未找到元素 id=aui_3_4_0_1_305”。

请建议我如何为这些类型的案例记录我的硒脚本。因为每次我运行该录制的脚本时，它都会显示相同的错误消息并停止该脚本。

另外我的很多朋友说每次登录功能都是新创建的动态id，一定是随机错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:52:25.690

您可以使用starts-with 将您的定位器用作xpath，我认为aui 部分仍然很常见。或者使用 id 值中仍然常见的任何内容，例如 : `//input[starts-with(@id,'aui')]`。确保没有其他以 aui 开头的元素，否则 xpath 会找到多个元素。

# android - 如何在android应用程序中设置昼夜主题

> ID：13561786
> 
> 赞同：6
> 
> 时间：2012-11-26T09:18:04.903
> 
> 标签：android

我创建了一个使用首选项列表来设置日夜模式主题的 Android 应用程序。

我的样式.xml

```
<style name="Theme.FullScreen" parent="@android:style/Theme.Black.NoTitleBar.Fullscreen"></style>

<style name="PreferencesTheme" parent="android:Theme.Light">
    <item name="android:background">#FFEAEAEA</item>
</style>

<style name="PreferencesTheme" parent="android:Theme.Light">
    <item name="android:windowBackground">@drawable/ic_icon_settings</item>
</style> 
```

有谁知道如何将夜间和白天模式应用于我的 styles.xml

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T09:46:29.543

您应该查看 Android 3.2 API13 示例应用程序中的*HoneycombGallery*示例。

他们实现这一点的方式是：

在你的声明两个主题`styles.xml`：

```
<style name="ActionBar" parent="@android:style/Widget.Holo.ActionBar" />

<style name="ActionBar.Light" parent="@style/ActionBar">
    <item name="android:background">@color/actionbar_background_light</item>
</style>

<style name="ActionBar.Dark" parent="@style/ActionBar">
    <item name="android:background">@color/actionbar_background_dark</item>
</style>

<style name="AppTheme.Light" parent="@android:style/Theme.Holo.Light">
    <item name="android:actionBarStyle">@style/ActionBar.Light</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="listDragShadowBackground">@android:color/background_light</item>
    <item name="menuIconCamera">@drawable/ic_menu_camera_holo_light</item>
    <item name="menuIconToggle">@drawable/ic_menu_toggle_holo_light</item>
    <item name="menuIconShare">@drawable/ic_menu_share_holo_light</item>
</style>

<style name="AppTheme.Dark" parent="@android:style/Theme.Holo">
    <item name="android:actionBarStyle">@style/ActionBar.Dark</item>
    <item name="android:windowActionBarOverlay">true</item>
    <item name="listDragShadowBackground">@android:color/background_dark</item>
    <item name="menuIconCamera">@drawable/ic_menu_camera_holo_dark</item>
    <item name="menuIconToggle">@drawable/ic_menu_toggle_holo_dark</item>
    <item name="menuIconShare">@drawable/ic_menu_share_holo_dark</item>
</style> 
```

*在模式之间切换的菜单：*

这是`main_menu.xml`

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/toggleTheme"
        android:title="Day/Night"
        android:showAsAction="never" />
</menu> 
```

以及他们在*白天*和*夜间*模式`MainActivity`之间切换的课程：

 **注意：我已经删除了这个问题上下文不需要的其他内容。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

    case R.id.toggleTheme:
        if (mThemeId == R.style.AppTheme_Dark) {
            mThemeId = R.style.AppTheme_Light;
        } else {
            mThemeId = R.style.AppTheme_Dark;
        }
        this.recreate();
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }
} 
```

在模式之间切换所需的全局变量：

```
private int mThemeId = -1; 
```

为了保存最后选择的*模式*，在 onCreate() 中：

```
if(savedInstanceState != null && savedInstanceState.getInt("theme", -1) != -1) {
    mThemeId = savedInstanceState.getInt("theme");
    this.setTheme(mThemeId);
} 
```

但是请务必从 SDK 管理器下载示例并查看实际（整个）功能。**

# c# - C# 在某个容器中排列字符串变量

> ID：13561789
> 
> 赞同：1
> 
> 时间：2012-11-26T09:18:42.440
> 
> 标签：c#, visual-studio-2010, c#-4.0

我是 C# 新手，我的代码中有这么多字符串值

```
string text1 = textbox1.text;
string text2 = textbox2.text;
string text3 = textbox3.text;
string text4 = textbox4.text; 
```

还有一些布尔值

```
bool chk1 = checkBox1.Checked;
bool chk2 = checkBox2.Checked;
bool chk3 = checkBox3.Checked; 
```

我也有复选框类型为真

```
checkBox2.Checked = true;
checkBox3.Checked = true;
checkBox4.Checked = true;
checkBox5.Checked = true; 
```

复选框部分基本上是在表单加载有没有办法编写一些整洁的代码并减少没有。行数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:22:10.093

使用数组：

```
string[] texts = { textbox1.Text, textbox2.Text, textbox3.Text, textbox4.Text };

bool[] checks = { checkBox1.Checked, checkBox2.Checked, checkBox3.Checked }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:21:59.343

在这里理解您的上下文并不容易。这些字符串是什么？由于它是重复的，我唯一想到的就是使用数组来减少代码行数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:24:50.330

```
var texts = { textbox1.Text, textbox2.Text, textbox3.Text, textbox4.Text };
var checks = { checkBox1.Checked, checkBox2.Checked, checkBox3.Checked }; 
```

为文本框和复选框提供特殊数组也很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:31:58.423

如果字符串和布尔值每次都以固定数字创建，我倾向于使用`Arrays`.

```
string[] texts = { textbox1.Text, textbox2.Text, textbox3.Text, textbox4.Text };

bool[] checks = { checkBox1.Checked, checkBox2.Checked, checkBox3.Checked }; 
```

如果没有，我会使用`List<string> and List<bool>`，在那里您可以添加和删除您的值。

```
List<string> myTexts = new List<string>();
myTexts.Add(textbox1.Text); 
```

您可以像在数组中一样访问这些值：

```
Console.Write(myTexts[0]); 
```

您还可以考虑使用具有属性的类来管理变量：

```
class myValues
{
   internal string text1 { get; set; }
   internal string text2 { get; set; }
   internal string text3 { get; set; }
   internal string text4 { get; set; }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:40:31.030

您可以试试这个：（只需更改您想要的控件类型）

```
 List<String> TextList = new List<string>();
        foreach (var item in Controls)
        {
            if (item is TextBox)
            {
                TextList.Add(((TextBox)item).Text);
            }
        } 
```

# footer - 页脚淡入淡出

> ID：13561790
> 
> 赞同：1
> 
> 时间：2012-11-26T09:18:43.257
> 
> 标签：footer

我想在这个网站**（www.8layertech.com）**上做一个页脚，我是新手。

滚动时页脚淡出，当您在任何地方停止滚动时页脚将淡入。我知道它可以在 jquery 中制作，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:57:19.110

`jQuery`没有内置的方法来捕捉`scrollstart`或`scrollstop`事件。
James Padolsey 创建了一个为此实现事件的插件： [Link](http://james.padolsey.com/javascript/special-scroll-events-for-jquery/)
您可以使用它并实现您需要的东西。8layertech 似乎使用相同的代码。

# c++ - 如何在不使用 QMediaPlayer 的情况下在 Qt 中获取音频和视频文件的持续时间

> ID：13561791
> 
> 赞同：4
> 
> 时间：2012-11-26T09:18:51.220
> 
> 标签：c++, qt, qt4, duration, qtimer

我一直在开发一个应用程序，我可以使用**QDirIterator**遍历系统驱动器并查找音频/视频文件，使用**QStandardItemModel**获取详细信息并将其显示在 QTreeview 上。我已成功显示文件名、类型、大小、修改日期，但**DURATION**是我无法做到的。

这是代码：

```
// Displays Files in Detail View on Clicking Drive
void DetailView::on_DriveView_clicked(const QModelIndex &index)
{
int m_count_row = 0;

QStandardItemModel *model = new QStandardItemModel(0,0);
QString sPath = pSystemModel->fileInfo(index).absoluteFilePath();
pSystemTreeViewModel->setRootPath(sPath);
ui->DriveListView->setRootIndex(pSystemTreeViewModel->index(sPath));

pSystemModel->setRootPath(QDir::currentPath());
pSystemModel->setFilter(QDir::NoDotAndDotDot | QDir::AllDirs );
pSystemTreeViewModel->setFilter( QDir::Files | QDir::NoDotAndDotDot );

QStringList m_list;
QDirIterator dirIt(sPath,QDirIterator::Subdirectories);

while (dirIt.hasNext())
{
    dirIt.next();
    if (QFileInfo(dirIt.filePath()).isFile())
    {
        if (QFileInfo(dirIt.filePath()).suffix() == "mp3" ||(QFileInfo(dirIt.filePath()).suffix() == "mts" ) ||(QFileInfo(dirIt.filePath()).suffix() == "m2ts" ))
        {
            m_list << dirIt.filePath();

            QModelIndex m_index = model->index(m_count_row, 0, QModelIndex());
            model->setHeaderData( 0, Qt::Horizontal, "Name" );
            model->setHeaderData( 1, Qt::Horizontal, "Type" );
            model->setHeaderData( 2, Qt::Horizontal, "Size" );
            model->setHeaderData( 3, Qt::Horizontal, "Date Modified" );

            model->setData( m_index, dirIt.fileName(), Qt::DecorationRole );
            QStandardItem *itemName = new QStandardItem(dirIt.fileName());
            model->setItem(m_count_row, 0, itemName);

            model->setData( m_index, dirIt.fileInfo().suffix(), Qt::DecorationRole );
            QStandardItem *itemExtention = new QStandardItem( dirIt.fileInfo().suffix());
            model->setItem(m_count_row, 1, itemExtention);

            model->setData( m_index, dirIt.fileInfo().size(), Qt::DecorationRole );
            float fFileSize = dirIt.fileInfo().size();
            float fFileKB = fFileSize / 1024; //kilobyte
            float fFileMB = fFileKB / 1024; //megabyte
            float fFinalSize = ceilf(fFileMB * 100) / 100;

            QString sSizeValue = QString::number(fFinalSize);
            QStandardItem *itemSize = new QStandardItem(sSizeValue + " MB");
            model->setItem(m_count_row, 2, itemSize);

            model->setData( m_index, dirIt.fileInfo().lastModified(), Qt::DecorationRole );
            QDateTime m_time = dirIt.fileInfo().lastModified();
            QString sTime = m_time.toString("dd/MM/yyyy hh:mm:ss");
            QStandardItem *itemDate = new QStandardItem(sTime);
            model->setItem(m_count_row, 3, itemDate);

            ui->DriveListView->setModel(model);
            ui->DriveListView->setRootIsDecorated(false);
            m_count_row++;
        }
    }

    pSystemTreeViewModel->setNameFilterDisables(false);
}
} 
```

我不确定是否可以使用上述方式获得持续时间，因为我找不到任何此类属性。他们还有其他方法吗？我不想使用 QMediaPlayer。任何其他替代解决方案可以帮助我用 Duration 更新我的上述代码？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:29:26.160

**使用 Qt**

您可以尝试探索 Qt 的[声子模块](http://doc.qt.digia.com/qt/phonon-overview.html)。

我认为Phonon 的 MediaObject 类中的[这个函数](http://doc.qt.digia.com/qt/phonon-mediaobject.html#totalTime)可能有助于获得你想要实现的目标。

PS 请阅读该函数末尾写的警告，以避免得到错误的结果。

* * *

编辑 1： **不使用 Qt**

[在此处](http://taglib.github.com/)阅读有关 TagLib 库的信息。检查他们提到的有关获取文件长度的[此功能。](http://taglib.github.com/api/classTagLib_1_1AudioProperties.html#acdd3ffe79f3a76ec5edb85bb911407e1)它也在 LGPL 之下。

# ruby-on-rails - rails 3.0 查看助手返回的字符串

> ID：13561792
> 
> 赞同：0
> 
> 时间：2012-11-26T09:18:58.993
> 
> 标签：ruby-on-rails, view, helper

谢谢你的时间！

我是 Rails 新手，对`view helper`.

我在`helpers/application_helper.rb`.

```
def error_table()
  return %{<table>...</table>}
end 
```

我`error_table`在`show.html.erb`.

```
<%= error_table() %> 
```

但是当我查看这个页面时，它给了我这个字符串`<table>...</table>`。

我查看了 html 源代码，它看起来像这样：`&lt;table&gt;...&lt;/table&gt;`

我想将此表插入到 html 页面而不是显示它。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:21:07.000

默认情况下，Rails 对所有呈现的字符串进行 HTML 转义，这样就不会发生 XSS 攻击。

因此，在您的情况下，您必须调用`.html_safe`字符串以将其标记为“安全”HTML，并且它不会被转义，或者将其传递给`raw()`执行相同操作但不会对 nil 对象吠叫的助手。（我前段时间[写过这种平庸）](http://www.tigraine.at/2012/08/23/when-to-use-raw-and-when-to-use-html_safe/)

在您的情况下，我建议您将该代码放入帮助程序中：

```
def error_table()
  return %{<table>...</table>}.html_safe
end 
```

或者

```
def error_table()
  return raw(%{<table>...</table>})
end 
```

这样您就不必在每个呼叫站点上都这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:20:57.380

试试这个：

```
<%=raw error_table() %> 
```

在 Rails 3.0 之后，<%= %> 默认转义 HTML。

# c# - 单元格验证时出现 FormatException 错误

> ID：13561795
> 
> 赞同：0
> 
> 时间：2012-11-26T09:19:10.140
> 
> 标签：c#, winforms, double

当我将文件加载到数据网格中时，我收到一条错误消息，`FormatException Error`. 在这里，我正在尝试做的是比较两个单元格值，如果 col 索引 2 值大于 col 索引 3，则显示错误消息。

当我第一次加载文件时，我没有问题。我为`seconfd time, i'm gettign the above error message`.

我尝试使用`Convert.ToInt32, int`，仍然收到相同的错误消息。我怎样才能解决这个问题？？

```
private void datagridview_CellValidating(object sender, CellValidatingEventArgs e)
{
if (e.ColumnIndex != 0)
{
    if (e.RowIndex >= 0 && e.RowIndex < 8)
    {
        if (e.Value != null && datagridview.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value != null)
        {
                //Convert.ToInt32, int////
            if (Double.Parse(e.Value.ToString()) <=
                Double.Parse(datagridview.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value.ToString()))
            {
                MessageBox.Show("error");
                e.Cancel = true;
                datagridview.Rows[e.RowIndex].ErrorText = errorMesssage;
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:26:49.287

我认为你应该在这里重新审视你的状况

```
if (Double.Parse(e.Value.ToString()) <=    
    Double.Parse(datagridview.Rows[e.RowIndex].Cells[e.ColumnIndex - 1].Value.ToString())) 
```

现在，当您验证比较时会发生什么，将使用and`Column1`中的可用值（而不是您提到的），因此如果无法解析其中的值，那么它将弹出一个格式异常，因为它无法解析。`Column2``Column1``Column1`

所以也许你需要在你的 if 子句中指定列

`if (e.ColumnIndex != 0) // here you allow for Column3, so that e.ColumnIndex - 1 is 2`

# ruby-on-rails - 需要使用 rails2.x 中的 scribd_carrierwave 插件制作具有翻转效果的在线杂志

> ID：13561801
> 
> 赞同：2
> 
> 时间：2012-11-26T09:19:35.997
> 
> 标签：ruby-on-rails, scribd

嗨，任何人都可以帮我解决 scribd 载波问题。我正在使用 rails **2.3.11**版本和集成的**scribd_carrierwave**插件。我现在想要的只是让视图看起来像**在线杂志**。它应该产生像翻页一样的效果，用户可以放大/缩小。最后，我想要他们整个 pdf 文档的缩略图视图。

请帮我完成这个.......

请参阅以下[http://devaldi.com/zine/NZ_Tourism_2007.php?ro=flash,html](http://devaldi.com/zine/NZ_Tourism_2007.php?ro=flash,html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:00:06.330

查看实现，`display_ipaper`-function 采用选项哈希。[scribd javascript API](http://www.scribd.com/developers/javascript_api#parameters)中列出了相应的选项。有一个名为`mode`允许“书”显示模式的选项。

尝试`<%= attachment.display_ipaper({mode: "book"}) %>`在您的视图中调用。这需要 scribd-document 的 flash-view，这似乎是该 gem 使用的视图。

# android - setImeOptions：为什么软键盘上不显示“完成”按钮？

> ID：13561808
> 
> 赞同：32
> 
> 时间：2012-11-26T09:20:19.827
> 
> 标签：android, android-softkeyboard, ime

我尝试使用**input.setImeOptions(EditorInfo.IME_ACTION_DONE); 设置软键盘上的“完成”按钮；**

但“完成”按钮根本不会显示在软键盘上。

请问有什么建议吗？

```
public void modif(int position) {
    AlertDialog.Builder alert = new  AlertDialog.Builder(MainActivity.this);
    alert.setTitle("Modifica");
    EditText input = new EditText(MainActivity.this);
    input.setImeOptions(EditorInfo.IME_ACTION_DONE);
    alert.setView(input);
    final Editable value = input.getText();
    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {  
        public void onClick(DialogInterface dialog, int whichButton) {
            Toast.makeText(getApplicationContext(), value,   Toast.LENGTH_LONG).show();
        }
    });

    alert.setNegativeButton("Cancel", new     DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
        // Canceled.
        }
    });
    alert.show();                   
} 
```

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-11-26T09:25:09.813

这可能是因为您的输入字段不是单行的。

尝试添加

```
input.setSingleLine(); 
```

你会看到按下键盘的动作键实际上会执行一个“完成”的动作（即关闭键盘）

请参阅[http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_ACTION_DONE](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html#IME_ACTION_DONE)

# html - 如何在具有黑色背景色的 div 上制作具有透明背景色的特定 div

> ID：13561812
> 
> 赞同：2
> 
> 时间：2012-11-26T09:20:37.150
> 
> 标签：html, css

如何在具有黑色背景色的 div 上制作具有透明背景色的特定 div？

谢谢。

我试图让它与添加另一个透明但没有运气的 div 一起工作，我的代码如下

```
.a {
    width: 300px;
    height: 300px;
    position: absolute;
    top: 0;
    left: 0;
}

.b {
    opacity: 0.7;
    background-color: #000;
    width: 300px;
    height: 300px;
    position: absolute;
    top: 0;
    left: 0;
}

.c {
    opacity: 1;
    position: absolute;
    top: 120px;
    left: 170px;
    width: 100px;
    height: 30px;
    background-color: transparent;
}​

<div class="a"><img src="http://www.helpinghomelesscats.com/images/cat1.jpg" /></div>
<div class="b"></div>
<div class="c"></div> 
```

[http://jsfiddle.net/sJW6U/1/](http://jsfiddle.net/sJW6U/1/)

前 ![在此处输入图像描述](../Images/9a32e210753bbca9a47c0771404cf3ae.png)

后 ![在此处输入图像描述](../Images/df2c7b48c2b72b1dff8c919813e1c3d6.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:46:32.473

这里的问题是，即使你这样做，你只会看到你的透明 div 后面的半黑色 div，它不会“切掉”它下面的 div。

那这个呢？

```
.a {
    width: 300px;
    height: 300px;
    position: absolute;
    cursor: none;
    top: 0;
    left: 0;
    /*overflow hidden to contain box shadow*/
    overflow: hidden;
}

.b {
    position: absolute;
    /*using box-shadow to create background*/
    -webkit-box-shadow: 0 0 0 50000px rgba(0,0,0,0.7);
    box-shadow: 0 0 0 50000px rgba(0,0,0,0.7);
    /*change height and position as needed*/
    width: 50px;
    height: 50px;
    top: 45px;
    left: 75px;
    z-index: 10;
}​ 
```

标记必须更改为以下内容：

```
 <div class="a">
    <img src="http://www.helpinghomelesscats.com/images/cat1.jpg" />
    <div class="b"></div>
</div> 
```

[http://jsfiddle.net/sJW6U/71/](http://jsfiddle.net/sJW6U/71/)

希望这可以帮助。

奖励：使用这样的东西将 .b 附加到鼠标：

```
$(document).on('mousemove', function(e){
    $('.b').css({
       left:  e.pageX -25,
       top:   e.pageY -25
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:52:32.840

对于 JavaScript 解决方案，请查看这个 jsFiddle：[little link](http://jsfiddle.net/X87QV/)。

如果代码的任何部分含糊不清，我很乐意解释。请注意，我已尝试稍微改进您的 HTML 和 CSS 结构——不再需要指定`width`s 或`height`s 。

以下是代码的注释版本，HTML：

```
<div class = "a">
    <img src = "http://www.fox.com/glee/_ugc/images/bios/jayma-mays_small.jpg"/>
    <div class = "b">
    </div>
    <div class = "c">
    </div>
</div>​ 
```

CSS：

```
.a {
    position: relative; /*to make sure children are positioned relatively to it*/
    top: 0;
    left: 0;
    display: inline-block;
}
.b {
    opacity: 0.7;
    background-color: #000;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0; /*fill all of the parent*/
    z-index: 5;
}
.c {
    position: absolute;
    z-index: 10;
}​ 
```

JavaScript：

```
function clip(x1, y1, x2, y2) {
    var w = x2 - x1, h = y2 - y1; //find width and height of the clipping area
    var div = document.getElementsByClassName("c")[0];
    div.style.backgroundImage = "url('http://www.fox.com/glee/_ugc/images/bios/jayma-mays_small.jpg')";
    div.style.backgroundPosition = (-x1) + "px " + (-y1) + "px";
    div.style.width = w + "px";
    div.style.height = h + "px";
    div.style.top = y1 + "px";
    div.style.left = x1 + "px";
}
clip(75, 75, 150, 150); //clips from 75, 75 to 150, 150, you can customize it 
```

希望有帮助！

# c# - 如何使线程不崩溃应用程序

> ID：13561816
> 
> 赞同：1
> 
> 时间：2012-11-26T09:20:49.467
> 
> 标签：c#, multithreading

假设我有以下控制台应用程序：

```
Thread thread = new Thread(new ThreadStart(() => { throw new Exception(); }));
thread.IsBackground = true;
thread.Start();

while (true)
  Console.WriteLine("Hello from main thread"); 
```

是否有可能使整个应用程序不会因为背景胎面的异常而崩溃（当然不使用 try..catch）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T09:26:17.267

附加未处理的异常处理程序：http: [//msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)

使用全局处理程序实现所需结果的更好方法（好的，使用 try/catch，但只有一次）：

```
 public static void GlobalHandler(ThreadStart threadStartTarget)
    {
        try
        {
            threadStartTarget.Invoke();
        }
        catch (Exception ex)
        {
             //handle exception here
        }
    } 
```

然后开始你的线程：

```
 Thread thread = new Thread(o => GlobalHandler(ThreadMethod));
        thread.Start(); 
```

PS 然而，真的，我不喜欢捕捉所有异常的想法。这*几乎*从来都不是好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:28:08.683

你可以使用`ThreadPool`线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:30:11.123

隐藏未经处理的异常并忘记它不是一个好习惯，所以不要这样做。

我不确定您为什么不想使用 try/catch，但这是处理这种情况的最佳方法，在这种情况下，您应该尽可能修复异常，或者至少将其记录下来以供以后查看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:39:21.247

即使您可以全局**捕获**未处理的异常，您也应该知道有些异常您可能能够捕获，但不能**处理**。StackoverflowException 可能没有留下足够的堆栈空间来处理异常。与 OutOfMemory 相同。大型物体可能没有足够的空间，但也有可能根本没有空间。
因此，您通常编写代码来捕获和处理您可以处理的那些异常（filenotfound、accessviolation 等），并让所有其他异常让您的应用程序崩溃（崩溃比继续处于未定义状态更好）。对于未处理的异常，您唯一可以做的事情是：尝试优雅地关闭您的应用程序（保存一些更改，写入错误日志或其他）并重新抛出异常。

# php - 更改 Wordpress 下载响应标头

> ID：13561823
> 
> 赞同：0
> 
> 时间：2012-11-26T09:21:17.783
> 
> 标签：php, wordpress, .htaccess, executable, httpresponse

目前，我在本地开发服务器上有一个 wordpress 站点，上面有一个下载链接。在此下载链接上是一个 setup.exe/softwarename.msi 安装程序包，该安装程序包已使用内置的 microsoft iexpress 工具进行压缩。

问题？Wordpress 将下载作为 application/x-msdownload 发送。这会在 Chrome 和其他浏览器中触发各种恶意软件警报。将响应头简单地更改为 application/octet-stream 可能会解决问题。但是，我不确定如何更改它，以便 wordpress 发送正确的响应标头，而不是一些古老的 application/x-msdownload 标头。有没有办法可以使用 htaccess 重定向链接来更改标题？

谁能帮我？我不希望客户因为虚假的恶意软件警报而被拒之门外。

谢谢！

编辑：我设法使用 AddType 来更改返回的类型。我仍然有同样的问题。还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:46:52.833

这是一个简单重定向的想法：

```
RewriteEngine On 
RewriteRule ^old-url\.php$ http://www.domain.com/new-url.php [NC,R=301,T=application/octet-stream ] 
```

# fancybox - Fancybox 和 Tinymce_gzip

> ID：13561837
> 
> 赞同：1
> 
> 时间：2012-11-26T09:22:11.983
> 
> 标签：fancybox, tinymce

我对花哨的盒子有问题。我的问题是这个。

A 在 Ajax 有一个网站。所有页面都在 Ajax 中，我使用花哨的框来显示一些信息。它每次都在工作，直到我打开一个 tinymce 编辑器。我使用 tinymce GZIP。

我尝试关闭tinymce，但仍然无法正常工作。

这是代码：

```
$(document).ready(function() {
$(".grayDClr").fancybox({
beforeShow: function () { try{
for (var i = 0; i < tinymce.editors.length; i++) {
tinyMCE.EditorManager.execCommand("mceRemoveControl", true, tinymce.editors[i].id);
}
}catch(err) {alert(err)} },
openEffect : 'none',
closeEffect : 'none',
maxWidth : 831,
minHeight : 0,
minWidth : 500,
autoSize : true,
fitToView : true,
margin : 40,
padding : [15, 15, 45, 15],
afterShow : function() {}
});
}); 
```

# javascript - 选定对象上的 Raphael JS 自由变换

> ID：13561838
> 
> 赞同：3
> 
> 时间：2012-11-26T09:22:11.703
> 
> 标签：javascript, svg, raphael, transform

我正在尝试使用 Raphael.js 动态创建对象。例如：

```
var paper = Raphael("canvas");
      var elements = [];
      elements.push(paper.rect(20,30,100,12).attr({fill:"orange"})); 
      elements.push(paper.path("m200,200l280,200l290,290z").attr({fill: "rgb(213,111,5)"})); 
      elements.push(paper.ellipse(340,100,90,40).attr({fill:"hsb(0.5,0.9,0.9)"})); 
```

然后我想在每个形状上使用自由变换，但除非单击单个形状，否则隐藏边界框和手柄。到目前为止，我已经遍历了数组中的每个形状，应用了自由变换并隐藏了句柄：

```
for(var i in elements) {
    var ft = paper.freeTransform(elements[i],{draw:['bbox']})
    ft.hideHandles();
} 
```

但是我正在努力为每个对象添加一个事件处理程序，该处理程序将显示已单击形状上的句柄，并将其隐藏在其他对象上。

我将非常感谢任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T20:07:52.997

解决了！

它没有我想象的那么复杂。我一直在处理闭包（Javascript 不是我的第一语言），但我的解决方案是：

```
var paper = Raphael("canvas");
var elements = [];
elements.push(paper.rect(20,30,100,12).attr({fill:"orange"})); 
elements.push(paper.path("m200,200l280,200l290,290z").attr({fill: "rgb(213,111,5)"}));      
elements.push(paper.ellipse(340,100,90,40).attr({fill:"hsb(0.5,0.9,0.9)"}));

//add Free Transform to all elements
for(var i in elements) {
  var thisShape = elements[i];
  var ft = paper.freeTransform(thisShape,{draw:['bbox']});
  ft.hideHandles();
  thisShape.click(function(){
    paper.forEach(function(el) {
  if(el.freeTransform.handles.bbox != null)
    el.freeTransform.hideHandles();
});
this.freeTransform.showHandles();
  });
} 
```

这似乎不是一个非常优雅的解决方案，但它确实可以完成工作。有没有更好的办法？

# jquery - 当溢出隐藏时仅获取可见图像

> ID：13561839
> 
> 赞同：0
> 
> 时间：2012-11-26T09:22:22.320
> 
> 标签：jquery

我有一个显示为图像的 html 结构。当容器设置为溢出隐藏时，有什么方法可以获取那些不完全可见的图像（最后一行）？我能够获得隐藏的图像。

![在此处输入图像描述](../Images/1da747ca115116be2e24d486abde1006.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:24:42.757

您可以使用此自定义选择器来查找未溢出其父级的元素：

```
jQuery.extend(jQuery.expr[':'], {
    inparent: function(el) {
        var $el = $(el),
        parent = $el.parent();
        if ($el.offset().top >= parent.offset().top && 
            $el.offset().top + $el.outerHeight(true) <= parent.offset().top + parent.outerHeight(true) && 
            $el.offset().left >= parent.offset().left && 
            $el.offset().left + $el.outerWidth(true) <= parent.offset().left + parent.outerWidth(true)) 
        {
            return true;
        }
        return false;
    }
}); 
```

然后，您可以使用以下方法找到部分或完全隐藏的图像：

```
var visibleimg = $('#container > img:not(:inparent)'); 
```

# rest - 如何使用 Symfony2 形式发布/放置没有包装对象的模型？

> ID：13561840
> 
> 赞同：1
> 
> 时间：2012-11-26T09:22:38.130
> 
> 标签：rest, symfony, symfony-forms, fosrestbundle

我正在使用 FOSRestBundle，我正在尝试发布/放置 json 模型。

文章模型类似于：

```
{
    "id": 456,
    "body": "Lorem ipsum dolor sid amet"
} 
```

目前，如果我对控制器操作执行 POST/PUT，我需要执行以下操作：

```
POST /articles
{
    "article": {
        "body": "Lorem ipsum dolor sid amet"
    }
} 
```

但我想做：

```
POST /articles
{
    "body": "Lorem ipsum dolor sid amet"
} 
```

请注意，JSON 对象在 Symfony2 的 Request 对象中自动反序列化。

**如何删除对象的前缀键？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T10:57:07.097

在您的 ArticleType 类中：

```
public function getName() {
    return null;
} 
```

这应该有效。

# c# - RX for .NET - 当从 Disposable.Create 中调用observer.OnCompleted 时没有任何反应

> ID：13561842
> 
> 赞同：1
> 
> 时间：2012-11-26T09:22:41.923
> 
> 标签：c#, system.reactive, observable

我在 C# 中使用 .NET 的 RX 库。谁能向我解释为什么“observer.OnCompleted()”方法在以下代码中什么都不做：

```
var observableStream = Observable.Create<CustomMessage>(
       (observer) =>
           {
               CustomMessage cm = new CustomMessage();
               CustomMessage.Subscribe(observer.OnNext);

               return Disposable.Create(
               () =>
                   {
                       Console.WriteLine("Disposing...");
                       CustomMessage.Unsubscribe(observer.OnNext);                          
                       observer.OnCompleted();                //***Nothing happens here***
                   }
               );
       });

    //IObserver.OnException()
    public override void OnException(Exception e)
    {
        Console.WriteLine("Exception occurred - " + e.Message);
    }

    //IObserver.OnComplete()
    public override void OnUnsubscribe()
    {
        Console.WriteLine("Unsubscribed...");            
    }

    //IObserver.OnNext()
    public override void HandleNextMsg(IRVMessage msg)
    {
        Console.WriteLine("Instance received a message");
    }

IDisposable myDisposable = observableStream.Subscribe(HandleNextMsg, OnException, OnUnsubscribe);

//At some later point....
myDisposable.Dispose(); 
```

该代码旨在订阅 CustomMessages 流。在设置订阅时，它会使用我的 CustomMessage 类型注册 observer.OnNext() 方法。然后在处理订阅时取消注册观察者.OnNext()。所有这些都正常工作。每当收到 CustomMessage 时，都会调用我的“HandleNextMsg()”方法。

稍后，当我希望终止订阅时，我调用“Dispose()”并成功执行以下两行：

```
Console.WriteLine("Disposing...");
CustomMessage.Unsubscribe(observer.OnNext); 
```

然后我不再收到 CustomMessages。然而，尽管执行了以下行，但什么也没做：

```
observer.OnCompleted(); 
```

我希望它会拨打电话：

```
Console.WriteLine("Unsubscribed..."); 
```

在某些时候，观察者和“OnUnsubscribe”方法之间的连接丢失了，我想确切地了解发生了什么。'observer.OnNext()' 怎么能成功注销，但是'observer.OnCompleted()' 什么都不做呢？

有人向我指出，仅仅因为我正在处理流并不意味着我应该调用“OnCompleted()”，但我仍然想了解它为什么不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:12:36.760

OnCompleted() 旨在通知订阅者上游序列（在您的情况下为 CustomMessage ）已经结束。这并不意味着确认订阅者请求取消订阅已成功，这似乎是您尝试使用它的方式。OnCompleted() 是关于序列的通知，针对所有订阅者，而不是针对该序列的单个订阅。

换句话说，您不应该在 Dispose 中调用它。毕竟订阅者自己在退订，为什么需要通知呢？

至于什么都没有发生的实际技术原因，我猜测回调（按设计）在您已经处置时不会执行。只是一个理论，它不是很相关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T16:55:55.793

您看到的问题是由`Observable.Create`包装您传递的函数的方式以及您订阅结果的任何观察者引起的`IObservable`。基本上，流程是：

*   Observable.Create 返回一个 AnonymousObservable。
*   AnonymousObservable 将观察者包装在订阅中的 AutoDetachObserver 中。
*   AnonymousObservable 从订阅返回 AutoDetachObserver（实现 IDisposable）。
*   AutoDetachObserver.Dispose 设置它的停止标志，**然后**释放原始订阅函数返回的对象。此标志导致观察者忽略对 OnError 和 OnCompleted 的未来调用，从而导致不调用包装的观察者方法。

这个答案基于 RX 的 v1.x，但我希望这在 v2.0 中没有改变。

如果您有一些无论订阅如何结束（OnError、OnCompleted 或 Dispose）都需要运行的代码，我建议您使用[Observable.Finally](http://msdn.microsoft.com/en-us/library/hh212133%28v=vs.103%29.aspx)。

# node.js - 显示错误的最佳方式 Express、Jade 和 Mongo

> ID：13561850
> 
> 赞同：2
> 
> 时间：2012-11-26T09:23:10.347
> 
> 标签：node.js, mongodb, express, mongoose, pug

使用 Express & Jade 将警告消息传递到视图的最佳方式是什么？

我创建了一个登录系统，用于检查输入的密码与存储在 Mongo 数据库中的密码是否相符，然后设置 cookie 并重定向，或者如果不正确则仅重定向。

```
if(obj.password === req.body.loginPassword){
     res.cookie('username', req.body.loginUsername);
     red.redirect('/')
}else{
     res.redirect('/');
} 
```

我想在登录失败时通过 else 向视图传递警告消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:16:48.617

**快递 3.0：**

您可以使用 req.session 来存储错误消息或简单地查看这个中间件： [https ://github.com/jaredhanson/connect-flash](https://github.com/jaredhanson/connect-flash)

**快递 2.0：**

您可以直接使用 req.flash 。[http://expressjs.com/2x/guide.html](http://expressjs.com/2x/guide.html)中描述的用法

# c# - 找不到创建的索引

> ID：13561855
> 
> 赞同：0
> 
> 时间：2012-11-26T09:23:33.253
> 
> 标签：c#, java, database, sqlite, sqljet

使用 SQLJet 作为 Java 项目的 SQLite 库，我为我的表创建了一个索引，并使用它从数据库中获取一些东西，我不断收到错误，我不知道我做错了什么。稍微解释一下我的代码（我创建了多个表，但它们没有任何意义。）我该如何解决这个错误？

```
org.tmatesoft.sqljet.core.SqlJetException: Index not exists: FULL_NAME_INDEX: error code is MISUSE
    at org.tmatesoft.sqljet.core.internal.table.SqlJetTable.checkIndexName(SqlJetTable.java:285)
    at org.tmatesoft.sqljet.core.internal.table.SqlJetTable.access$300(SqlJetTable.java:46)
    at org.tmatesoft.sqljet.core.internal.table.SqlJetTable$2.runWithLock(SqlJetTable.java:149)
    at org.tmatesoft.sqljet.core.table.SqlJetDb$1.runSynchronized(SqlJetDb.java:172)
    at org.tmatesoft.sqljet.core.table.engine.SqlJetEngine.runSynchronized(SqlJetEngine.java:217)
    at org.tmatesoft.sqljet.core.table.SqlJetDb.runWithLock(SqlJetDb.java:170)
    at org.tmatesoft.sqljet.core.internal.table.SqlJetTable.lookup(SqlJetTable.java:146)
    at eureqapp.DatabaseManager.getContact(DatabaseManager.java:408) 
```

我的代码：

```
public DatabaseManager() throws SqlJetException, IOException
{
    try
    {
        //Creates a database file, if it doesn't exist already.
        File dbFile = new File(databaseFileName);
        if (!dbFile.exists())
        {
            dbFile.createNewFile();

            db = SqlJetDb.open(dbFile, true);
            db.beginTransaction(SqlJetTransactionMode.WRITE);
            db.getOptions().setUserVersion(1);
            createTables();

        } else
        {
            db = SqlJetDb.open(dbFile, true);
            db.beginTransaction(SqlJetTransactionMode.WRITE);
            db.getOptions().setUserVersion(1);
        }
    } catch (Exception e)
    {
        e.printStackTrace();
    } finally
    {

        if (db.isOpen())
        {
            db.commit();
            db.close();
        }
    }
}

public static void createTables() throws SqlJetException
{
    try
    {
        if (!db.isOpen())
        {
            db.open();
        }

        db.beginTransaction(SqlJetTransactionMode.WRITE);
        db.createTable(CREATE_TABLE_CONTACT);
        db.createIndex(CREATE_CONTACT_NAME_INDEX);

    } catch (Exception e)
    {
        e.printStackTrace();
    } finally
    {

        if (db.isOpen())
        {
            db.commit();
            db.close();
        }
    }
} 
```

我在哪里调用我的 getContact 方法

```
public static Contact getContact(String name) throws SqlJetException
{
    Contact c = new Contact();

    try
    {
        if (!db.isOpen())
        {
            db.open();
        }
        db.beginTransaction(SqlJetTransactionMode.READ_ONLY);

        ISqlJetTable table = db.getTable("CONTACT");
        ISqlJetCursor cursor = table.lookup("FULL_NAME_INDEX", name);

        String contactName = cursor.getString("name");
        String contactAddress = cursor.getString("address");
        String contactPlace = cursor.getString("place");
        String contactDepartment = cursor.getString("department");
        String contactTelephone = cursor.getString("telephone_number");
        String contactMobile = cursor.getString("mobile_number");
        String contactEmail = cursor.getString("email_address");
        cursor.close();
        db.close();

        c = new Contact(contactName, contactAddress, contactPlace, contactDepartment, contactTelephone, contactMobile, contactEmail);

        return c;
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:55:24.077

您是使用创建索引的同一用户还是使用应用程序中的其他用户？
如果您使用其他用户，则该用户似乎无权访问和使用索引。然后允许应用程序用户使用索引。

# jquery-ui - 更改 UI 对话框 jQuery 的位置

> ID：13561856
> 
> 赞同：1
> 
> 时间：2012-11-26T09:23:35.477
> 
> 标签：jquery-ui, jquery-ui-dialog

我有一个关于下拉事件更改的 jQuery 发布请求，它在下拉列表下方呈现一个表单，这一切都在[jQuery UI 对话框](http://docs.jquery.com/UI/Dialog)
中完成 。呈现的表单有点长，用户必须向下滚动才能保存它。我不希望用户向下滚动，位置应该向上一点，也许是 20px。

```
 $("#dropdownid").change(function(){
    if($(this).val() == 1)
    {

        $.post("<?php echo Yii::app()->request->baseUrl . '/controller/model/'; ?>",$(this).serialize(),
            function(data) {
                $("#dialog").html(data);
                $("#dialog").dialog("open");
            }
        );
    }
}); 
```

表单已经在中心，所以理想情况下这不起作用在加载另一个用户发布[后更改 jquery 对话框的位置。](https://stackoverflow.com/questions/4024132/change-the-position-of-a-jquery-dialog-box-after-it-loads)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:30:36.187

有一些选项以及对话框的位置。看看：[http ://api.jqueryui.com/dialog/#option-position](http://api.jqueryui.com/dialog/#option-position)

这会将对话框设置在中心，并将 150 像素设置为顶部。试试看嘛：

```
$("#dialog").html(data);
$("#dialog").dialog({ position: [($(window).width() / 2) - (dialogWidth / 2), 150] });
$("#dialog").dialog("open"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T12:04:42.583

我有同样的问题。对我有用的是下一个组合：

```
 $(function () {
		var _left = (window.innerWidth / 2) - 250;
		$("#dv_TreePopup").dialog({
			autoOpen: false, width: 500, height: 'auto',
			position: [_left, 50],
			create: function (event) {
				$(event.target).parent().css({ 'position': 'absolute', "left": _left, "top": 50 });
			}
		});
      $("#dv_TreePopup").dialog("open");
	});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"></script>
<link href="https://code.jquery.com/ui/1.12.0/themes/base/jquery-ui.css" rel="stylesheet"/>
<div style="position: relative;">
	<div id="dv_TreePopup" style="display: none;">
        Some content
    </div>

</div>
```

# android - 查看寻呼机指示器 Jake Wharton

> ID：13561859
> 
> 赞同：8
> 
> 时间：2012-11-26T09:24:03.170
> 
> 标签：android, android-viewpager

我正在使用 Jake Wharton 的示例来显示 viewpager 指示器。 [www.viewpagerindicator.com](http://www.viewpagerindicator.com)

我正在使用捕捉圈指示器。

谁能告诉我如何增加圆圈之间的宽度？

应该改什么参数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-23T08:14:50.093

我们需要将“threeRadius”参数增加到更高的值。谢谢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T14:24:13.157

您可以在文件 res/values/vpi_attrs.xml 中找到所有参数。指定的 CirclePageIndicator 关联的样式：

```
<!-- Radius of the circles. This is also the spacing between circles. -->
<attr name="radius" format="dimension" /> 
```

不可能改变两个圆之间的间隙。你必须继承 CirclePageIndicator：

*   在您的项目中创建 YourCirclePageIndicator
*   添加新属性 gapCircle
*   覆盖 onDraw 方法并更改 shortOffset/longOffset 的计算

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-23T21:18:00.267

称呼`CirclePageIndicator.setRadius()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-03T22:46:39.067

我知道这是一个老问题，但是对于将来可能遇到此问题的其他人，我想我最好将其发布。
简单地将“threeRadius”参数增加到更高的值是行不通的，因为它会打乱圆的中心。

所以这里是**CirclePageIndicator**类的修改版本：

```
import android.content.Context;
import android.content.res.Resources;
import android.content.res.TypedArray;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Paint.Style;
import android.graphics.drawable.Drawable;
import android.os.Parcel;
import android.os.Parcelable;
import android.support.v4.view.MotionEventCompat;
import android.support.v4.view.ViewConfigurationCompat;
import android.support.v4.view.ViewPager;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.view.ViewConfiguration;

import com.viewpagerindicator.PageIndicator;

import static android.graphics.Paint.ANTI_ALIAS_FLAG;
import static android.widget.LinearLayout.HORIZONTAL;
import static android.widget.LinearLayout.VERTICAL;

/**
 * Draws circles (one for each view). The current view position is filled and
 * others are only stroked.
 */
public class CirclePageIndicator extends View implements PageIndicator {
    private static final int INVALID_POINTER = -1;

    private float mRadius;
    private final Paint mPaintPageFill = new Paint(ANTI_ALIAS_FLAG);
    private final Paint mPaintStroke = new Paint(ANTI_ALIAS_FLAG);
    private final Paint mPaintFill = new Paint(ANTI_ALIAS_FLAG);
    private ViewPager mViewPager;
    private ViewPager.OnPageChangeListener mListener;
    private int mCurrentPage;
    private int mSnapPage;
    private float mPageOffset;
    private int mScrollState;
    private int mOrientation;
    private boolean mCentered;
    private boolean mSnap;

    private int mTouchSlop;
    private float mLastMotionX = -1;
    private int mActivePointerId = INVALID_POINTER;
    private boolean mIsDragging;
    private int distanceBetweenCircles = 20;

    public CirclePageIndicator(Context context) {
        this(context, null);
    }

    public CirclePageIndicator(Context context, AttributeSet attrs) {
        this(context, attrs, R.attr.vpiCirclePageIndicatorStyle);
    }

    public CirclePageIndicator(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        if (isInEditMode()) return;

        //Load defaults from resources
        final Resources res = getResources();
        final int defaultPageColor = res.getColor(R.color.default_circle_indicator_page_color);
        final int defaultFillColor = res.getColor(R.color.default_circle_indicator_fill_color);
        final int defaultOrientation = res.getInteger(R.integer.default_circle_indicator_orientation);
        final int defaultStrokeColor = res.getColor(R.color.default_circle_indicator_stroke_color);
        final float defaultStrokeWidth = res.getDimension(R.dimen.default_circle_indicator_stroke_width);
        final float defaultRadius = res.getDimension(R.dimen.default_circle_indicator_radius);
        final boolean defaultCentered = res.getBoolean(R.bool.default_circle_indicator_centered);
        final boolean defaultSnap = res.getBoolean(R.bool.default_circle_indicator_snap);

        //Retrieve styles attributes
        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.CirclePageIndicator, defStyle, 0);

        mCentered = a.getBoolean(R.styleable.CirclePageIndicator_centered, defaultCentered);
        mOrientation = a.getInt(R.styleable.CirclePageIndicator_android_orientation, defaultOrientation);
        mPaintPageFill.setStyle(Style.FILL);
        mPaintPageFill.setColor(a.getColor(R.styleable.CirclePageIndicator_pageColor, defaultPageColor));
        mPaintStroke.setStyle(Style.STROKE);
        mPaintStroke.setColor(a.getColor(R.styleable.CirclePageIndicator_strokeColor, defaultStrokeColor));
        mPaintStroke.setStrokeWidth(a.getDimension(R.styleable.CirclePageIndicator_strokeWidth, defaultStrokeWidth));
        mPaintFill.setStyle(Style.FILL);
        mPaintFill.setColor(a.getColor(R.styleable.CirclePageIndicator_fillColor, defaultFillColor));
        mRadius = a.getDimension(R.styleable.CirclePageIndicator_radius, defaultRadius);
        mSnap = a.getBoolean(R.styleable.CirclePageIndicator_snap, defaultSnap);

        distanceBetweenCircles = getResources().getDimensionPixelSize(R.dimen._40);

        Drawable background = a.getDrawable(R.styleable.CirclePageIndicator_android_background);
        if (background != null) {
            setBackgroundDrawable(background);
        }

        a.recycle();

        final ViewConfiguration configuration = ViewConfiguration.get(context);
        mTouchSlop = ViewConfigurationCompat.getScaledPagingTouchSlop(configuration);
    }

    public void setCentered(boolean centered) {
        mCentered = centered;
        invalidate();
    }

    public boolean isCentered() {
        return mCentered;
    }

    public void setPageColor(int pageColor) {
        mPaintPageFill.setColor(pageColor);
        invalidate();
    }

    public int getPageColor() {
        return mPaintPageFill.getColor();
    }

    public void setFillColor(int fillColor) {
        mPaintFill.setColor(fillColor);
        invalidate();
    }

    public int getFillColor() {
        return mPaintFill.getColor();
    }

    public void setOrientation(int orientation) {
        switch (orientation) {
            case HORIZONTAL:
            case VERTICAL:
                mOrientation = orientation;
                requestLayout();
                break;

            default:
                throw new IllegalArgumentException("Orientation must be either HORIZONTAL or VERTICAL.");
        }
    }

    public int getOrientation() {
        return mOrientation;
    }

    public void setStrokeColor(int strokeColor) {
        mPaintStroke.setColor(strokeColor);
        invalidate();
    }

    public int getStrokeColor() {
        return mPaintStroke.getColor();
    }

    public void setStrokeWidth(float strokeWidth) {
        mPaintStroke.setStrokeWidth(strokeWidth);
        invalidate();
    }

    public float getStrokeWidth() {
        return mPaintStroke.getStrokeWidth();
    }

    public void setRadius(float radius) {
        mRadius = radius;
        invalidate();
    }

    public float getRadius() {
        return mRadius;
    }

    public void setSnap(boolean snap) {
        mSnap = snap;
        invalidate();
    }

    public boolean isSnap() {
        return mSnap;
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if (mViewPager == null) {
            return;
        }
        final int count = mViewPager.getAdapter().getCount();
        if (count == 0) {
            return;
        }

        if (mCurrentPage >= count) {
            setCurrentItem(count - 1);
            return;
        }

        int longSize;
        int shortPaddingBefore;
        if (mOrientation == HORIZONTAL) {
            longSize = getWidth();
            shortPaddingBefore = getPaddingTop();
        } else {
            longSize = getHeight();
            shortPaddingBefore = getPaddingLeft();
        }

        final float neededSpaceForCircles = (mRadius * 2 * count + distanceBetweenCircles * (count - 1));
        final float startX = (longSize - neededSpaceForCircles) / 2f + mRadius;
        final float shortOffset = shortPaddingBefore + mRadius;

        float dX;
        float dY;

        float pageFillRadius = mRadius;
        if (mPaintStroke.getStrokeWidth() > 0) {
            pageFillRadius -= mPaintStroke.getStrokeWidth() / 2.0f;
        }

        //Draw stroked circles
        for (int iLoop = 0; iLoop < count; iLoop++) {
            float drawLong = startX + iLoop * (distanceBetweenCircles + 2 * mRadius);

            if (mOrientation == HORIZONTAL) {
                dX = drawLong;
                dY = shortOffset;
            } else {
                dX = shortOffset;
                dY = drawLong;
            }
            // Only paint fill if not completely transparent
            if (mPaintPageFill.getAlpha() > 0) {
                canvas.drawCircle(dX, dY, pageFillRadius, mPaintPageFill);
            }

            // Only paint stroke if a stroke width was non-zero
            if (pageFillRadius != mRadius) {
                canvas.drawCircle(dX, dY, mRadius, mPaintStroke);
            }
        }

        //Draw the filled circle according to the current scroll
        float cx = (mSnap ? mSnapPage : mCurrentPage) * (distanceBetweenCircles + 2 * mRadius);
        if (!mSnap) {
            cx += mPageOffset * distanceBetweenCircles;
        }
        if (mOrientation == HORIZONTAL) {
            dX = startX + cx;
            dY = shortOffset;
        } else {
            dX = shortOffset;
            dY = startX + cx;
        }

        canvas.drawCircle(dX, dY, mRadius, mPaintFill);
    }

    public boolean onTouchEvent(android.view.MotionEvent ev) {
        if (super.onTouchEvent(ev)) {
            return true;
        }
        if ((mViewPager == null) || (mViewPager.getAdapter().getCount() == 0)) {
            return false;
        }

        final int action = ev.getAction() & MotionEventCompat.ACTION_MASK;
        switch (action) {
            case MotionEvent.ACTION_DOWN:
                mActivePointerId = MotionEventCompat.getPointerId(ev, 0);
                mLastMotionX = ev.getX();
                break;

            case MotionEvent.ACTION_MOVE: {
                final int activePointerIndex = MotionEventCompat.findPointerIndex(ev, mActivePointerId);
                final float x = MotionEventCompat.getX(ev, activePointerIndex);
                final float deltaX = x - mLastMotionX;

                if (!mIsDragging) {
                    if (Math.abs(deltaX) > mTouchSlop) {
                        mIsDragging = true;
                    }
                }

                if (mIsDragging) {
                    mLastMotionX = x;
                    if (mViewPager.isFakeDragging() || mViewPager.beginFakeDrag()) {
                        mViewPager.fakeDragBy(deltaX);
                    }
                }

                break;
            }

            case MotionEvent.ACTION_CANCEL:
            case MotionEvent.ACTION_UP:
                if (!mIsDragging) {
                    final int count = mViewPager.getAdapter().getCount();
                    final int width = getWidth();
                    final float halfWidth = width / 2f;
                    final float sixthWidth = width / 6f;

                    if ((mCurrentPage > 0) && (ev.getX() < halfWidth - sixthWidth)) {
                        if (action != MotionEvent.ACTION_CANCEL) {
                            mViewPager.setCurrentItem(mCurrentPage - 1);
                        }
                        return true;
                    } else if ((mCurrentPage < count - 1) && (ev.getX() > halfWidth + sixthWidth)) {
                        if (action != MotionEvent.ACTION_CANCEL) {
                            mViewPager.setCurrentItem(mCurrentPage + 1);
                        }
                        return true;
                    }
                }

                mIsDragging = false;
                mActivePointerId = INVALID_POINTER;
                if (mViewPager.isFakeDragging()) mViewPager.endFakeDrag();
                break;

            case MotionEventCompat.ACTION_POINTER_DOWN: {
                final int index = MotionEventCompat.getActionIndex(ev);
                mLastMotionX = MotionEventCompat.getX(ev, index);
                mActivePointerId = MotionEventCompat.getPointerId(ev, index);
                break;
            }

            case MotionEventCompat.ACTION_POINTER_UP:
                final int pointerIndex = MotionEventCompat.getActionIndex(ev);
                final int pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);
                if (pointerId == mActivePointerId) {
                    final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
                    mActivePointerId = MotionEventCompat.getPointerId(ev, newPointerIndex);
                }
                mLastMotionX = MotionEventCompat.getX(ev, MotionEventCompat.findPointerIndex(ev, mActivePointerId));
                break;
        }

        return true;
    }

    @Override
    public void setViewPager(ViewPager view) {
        if (mViewPager == view) {
            return;
        }
        if (mViewPager != null) {
            mViewPager.setOnPageChangeListener(null);
        }
        if (view.getAdapter() == null) {
            throw new IllegalStateException("ViewPager does not have adapter instance.");
        }
        mViewPager = view;
        mViewPager.setOnPageChangeListener(this);
        invalidate();
    }

    @Override
    public void setViewPager(ViewPager view, int initialPosition) {
        setViewPager(view);
        setCurrentItem(initialPosition);
    }

    @Override
    public void setCurrentItem(int item) {
        if (mViewPager == null) {
            throw new IllegalStateException("ViewPager has not been bound.");
        }
        mViewPager.setCurrentItem(item);
        mCurrentPage = item;
        invalidate();
    }

    @Override
    public void notifyDataSetChanged() {
        invalidate();
    }

    @Override
    public void onPageScrollStateChanged(int state) {
        mScrollState = state;

        if (mListener != null) {
            mListener.onPageScrollStateChanged(state);
        }
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
        mCurrentPage = position;
        mPageOffset = positionOffset;
        invalidate();

        if (mListener != null) {
            mListener.onPageScrolled(position, positionOffset, positionOffsetPixels);
        }
    }

    @Override
    public void onPageSelected(int position) {
        if (mSnap || mScrollState == ViewPager.SCROLL_STATE_IDLE) {
            mCurrentPage = position;
            mSnapPage = position;
            invalidate();
        }

        if (mListener != null) {
            mListener.onPageSelected(position);
        }
    }

    @Override
    public void setOnPageChangeListener(ViewPager.OnPageChangeListener listener) {
        mListener = listener;
    }

    /*
     * (non-Javadoc)
     *
     * @see android.view.View#onMeasure(int, int)
     */
    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        if (mOrientation == HORIZONTAL) {
            setMeasuredDimension(measureLong(widthMeasureSpec), measureShort(heightMeasureSpec));
        } else {
            setMeasuredDimension(measureShort(widthMeasureSpec), measureLong(heightMeasureSpec));
        }
    }

    /**
     * Determines the width of this view
     *
     * @param measureSpec A measureSpec packed into an int
     * @return The width of the view, honoring constraints from measureSpec
     */
    private int measureLong(int measureSpec) {
        int result;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if ((specMode == MeasureSpec.EXACTLY) || (mViewPager == null)) {
            //We were told how big to be
            result = specSize;
        } else {
            //Calculate the width according the views count
            final int count = mViewPager.getAdapter().getCount();
            result = (int) (getPaddingLeft() + getPaddingRight()
                    + (count * 2 * mRadius) + (count - 1) * mRadius + 1);
            //Respect AT_MOST value if that was what is called for by measureSpec
            if (specMode == MeasureSpec.AT_MOST) {
                result = Math.min(result, specSize);
            }
        }
        return result;
    }

    /**
     * Determines the height of this view
     *
     * @param measureSpec A measureSpec packed into an int
     * @return The height of the view, honoring constraints from measureSpec
     */
    private int measureShort(int measureSpec) {
        int result;
        int specMode = MeasureSpec.getMode(measureSpec);
        int specSize = MeasureSpec.getSize(measureSpec);

        if (specMode == MeasureSpec.EXACTLY) {
            //We were told how big to be
            result = specSize;
        } else {
            //Measure the height
            result = (int) (2 * mRadius + getPaddingTop() + getPaddingBottom() + 1);
            //Respect AT_MOST value if that was what is called for by measureSpec
            if (specMode == MeasureSpec.AT_MOST) {
                result = Math.min(result, specSize);
            }
        }
        return result;
    }

    @Override
    public void onRestoreInstanceState(Parcelable state) {
        SavedState savedState = (SavedState) state;
        super.onRestoreInstanceState(savedState.getSuperState());
        mCurrentPage = savedState.currentPage;
        mSnapPage = savedState.currentPage;
        requestLayout();
    }

    @Override
    public Parcelable onSaveInstanceState() {
        Parcelable superState = super.onSaveInstanceState();
        SavedState savedState = new SavedState(superState);
        savedState.currentPage = mCurrentPage;
        return savedState;
    }

    static class SavedState extends BaseSavedState {
        int currentPage;

        public SavedState(Parcelable superState) {
            super(superState);
        }

        private SavedState(Parcel in) {
            super(in);
            currentPage = in.readInt();
        }

        @Override
        public void writeToParcel(Parcel dest, int flags) {
            super.writeToParcel(dest, flags);
            dest.writeInt(currentPage);
        }

        @SuppressWarnings("UnusedDeclaration")
        public static final Parcelable.Creator<SavedState> CREATOR = new Parcelable.Creator<SavedState>() {
            @Override
            public SavedState createFromParcel(Parcel in) {
                return new SavedState(in);
            }

            @Override
            public SavedState[] newArray(int size) {
                return new SavedState[size];
            }
        };
    }
} 
```

注意线

```
distanceBetweenCircles = getResources().getDimensionPixelSize(R.dimen._40); 
```

要更改距离，只需更改**distanceBetweenCircles**的值。我对其进行了硬编码，因为我在所有视图中总是需要相同的距离。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-16T13:50:41.843

使用自定义属性`gapWidth`

```
<com.viewpagerindicator.CirclePageIndicator
  android:id="@+id/indicator"
  android:padding="@dimen/activity_padding"
  android:layout_gravity="center_horizontal|bottom"
  android:layout_margin="@dimen/tutorial_indicator_margin"
  android:layout_height="wrap_content"
  android:layout_width="wrap_content"
  android:background="#00000000"
  app:gapWidth="24dp"/> 
```

不要忘记添加`xmlns:app="http://schemas.android.com/apk/res-auto"`到您的父布局。

# javascript - 手机 - 使用 JavaScript 通过手机摄像头拍摄快照

> ID：13561861
> 
> 赞同：1
> 
> 时间：2012-11-26T09:24:26.580
> 
> 标签：javascript

几个月前，我为手机开发了一个特殊的 php web 应用程序。我们的客户使用带有 Android 和 Opera Mobile 的三星 Galaxy xcover 来浏览应用程序。

在我的 Web 应用程序中，我使用了一个名为“navigator.getUserMedia”的客户端 JavaScript 功能，Opera Mobile 支持该功能。我认为它非常强大，但是我缺少一些东西。

看：我使用“navigator.getUserMedia”让用户可以制作相机快照并通过 Ajax 将图像上传到我的网络服务器目录（我认为是这样）。

它工作正常，真的！

但是 - 这就是我的问题 - 我还没有找到如何更改这些手机快照的分辨率。主要问题是捕获的图像太小（144px x 144px）。

如果有可能控制创建图像大小的规则或定义，我检查了整个 JavaScript 代码。我找到了一些宽度和高度定义（以 px 为单位）并更改了它们以查看会发生什么。但我没有运气。创建的图像大小仍然是 144px x 144px :-(

现在我不确定这是否通常是 JS 问题。难道是“navigator.getUserMedia”功能没有我需要的可能性？

有没有人遇到过或遇到过同样的问题？有人解决了吗？

你的

唐尼

# java - Eclipselink 或 Hibernate 中的 NamedQuery 自定义

> ID：13561864
> 
> 赞同：0
> 
> 时间：2012-11-26T09:24:32.280
> 
> 标签：java, sql, hibernate, eclipselink, birt

如何像在 BirtReport 中一样在 EclipseLink 中自定义 NamedQuery。

下面是Birt Report的查询和自定义Where子句

是否可以像这样为 EclispeLink 自定义，非常感谢您的帮助。

询问

```
select customernumber from orders 
```

用于查询的自定义 Where 子句

```
<![CDATA[ 
var parmcount = params["parmorders"].value.length
var whereclause = "";
if( parmcount > 0 ){
    whereclause = " where customernumber in ( ";
}
for( i=0; i < parmcount; i++ ){
    if( i == 0 ){
        whereclause = whereclause + params["parmorders"].value[i];
    }else{
        whereclause = whereclause + " , " + params["parmorders"].value[i];  
    }
}
if( parmcount > 0 ){
    this.queryText = this.queryText + whereclause + " ) ";
}

  ]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:40:00.733

从文档：

> 以 Java Persistence 查询语言指定一个静态的命名查询。查询名称的范围是持久性单元。NamedQuery 注解可以应用于实体或映射的超类

因此，`NamedQuery`不能在运行时更改。同样随着参数数量的变化，查询也会发生变化。`NamedQuery`因此，在这种特殊情况下使用是不可行的。

但是您可以尝试在运行时根据参数动态创建查询和附加条件，就像在您的代码中发布的那样。

```
entityManager.createQuery(queryText).getResultList(); 
```

此外，您可以直接使用关键字`IN`并将列表设置为参数以消除迭代。

```
//-- Ignoring code for appending parameters & conditions
String whereCondition = " where customernumber IN (:customerNumbers)";
queryText = queryText + whereCondition;
entityManager.createQuery(queryText).setParameter("customerNumbers", customerNumbersList).getResultList(); 
```

# ajax - 在 localStorage 中存储图像

> ID：13561867
> 
> 赞同：4
> 
> 时间：2012-11-26T09:24:35.370
> 
> 标签：ajax, local-storage

我尝试使用 Ajax 请求在**localStorage中存储图像。**

```
<!DOCTYPE html>
<html>
    <head>
        <title>test</title>
        <script type="text/javascript">
            window.onload = function() {
                var xmlhttp;
                if (window.XMLHttpRequest) {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp = new XMLHttpRequest();
                }
                else {// code for IE6, IE5
                    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                xmlhttp.onreadystatechange=function() {
                    if (xmlhttp.readyState==4 && xmlhttp.status==200) {
                        var storedImage;
                        if (localStorage.getItem('imgtest')) {
                            storedImage = localStorage.getItem('imgtest');
                            alert("get");
                        }
                        else {
                            storedImage = xmlhttp.responseText;
                            localStorage.setItem('imgtest',storedImage);
                            alert("set");
                        }
                        document.getElementById("test").style.backgroundImage = 'data:image/png;base64,' + storedImage;
                    }
                }
                xmlhttp.open("GET","img.png");
                xmlhttp.setRequestHeader("Content-type","image/png");
                xmlhttp.send();
            }
        </script>
    </head>
    <body>
        <div id="test" style="width: 100px; height: 100px;"></div>
    </body>
</html> 
```

我可以存储流，但不显示图像。

也许是因为我的编码，我不知道。你能告诉我我做错了什么或者是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T16:03:34.550

您是否尝试过这样的 url() ：

document.getElementById("test").style.backgroundImage = 'url(data:image/png;base64,' + storedImage + ')';

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:50:04.977

您是否尝试使用 POST 完成您的请求？

# string - numpy 大数组到字符串获取

> ID：13561868
> 
> 赞同：2
> 
> 时间：2012-11-26T09:24:40.337
> 
> 标签：string, numpy

我有一个来自 datetime 的 numpy 日期对象数组，我必须将其转换为字符串，以便可以将其用作 SQL 语句的一部分（对于 mysql）。一般来说，这工作得很好：

```
dats = str(dates_list)
dats = string.replace(dats[1:-1],' ',"','") 
```

除非它足够长以`print dates_list`显示...（例如：）`print numpy.arange(4000)`。

我尝试直接使用**repr**特殊方法（是的，我知道我不应该这样做），它应该提供可用于重建对象的字符串表示形式。显然，我无法使用`[ 0 1 2 ..., 4997 4998 4999]`.

如何获得整个数组的字符串表示形式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:17:49.257

转换为列表似乎有效：

```
dats = str(list(dates_list)) 
```

但更正确的选择是更改 numpy 的 [printoptions](http://docs.scipy.org/doc/numpy/reference/generated/numpy.set_printoptions.html)。有一个`threshold`选项可以设置打印摘要而不是完整代表的限制。默认值为 1000。您可以将其更改为无穷大：

```
import numpy as np
np.set_printoptions(threshold=np.inf)

dats = str(dates_list) 
```

# .net - 使用自定义套索选择任何 UIElement？

> ID：13561869
> 
> 赞同：1
> 
> 时间：2012-11-26T09:24:41.507
> 
> 标签：.net, wpf, uielement

我们正在尝试实现与`InkCanvas`with相同的 Lasso 行为`Canvas`来选择 any `UIElement`。[我们尝试使用此MSDN 链接](http://msdn.microsoft.com/en-us/library/vstudio/ms788721%28v=vs.90%29)中提到的 (IncrementalLassoHitTester) ，但它没有帮助，因为它只选择笔画。

有没有办法实现这个目标？

# eclipse - 如何创建一个黑莓 Maven 项目

> ID：13561874
> 
> 赞同：3
> 
> 时间：2012-11-26T09:24:52.883
> 
> 标签：eclipse, maven, blackberry, continuous-integration

我已经搜索了几天，找不到任何解决我问题的方法。有没有办法用 eclipse 创建一个黑莓 maven 项目。我需要这个来支持持续集成。

我发现的唯一解决方案给出了错误（参见**Peter Butkovic**的回答），我找不到任何方法来修复它们......

提前致谢...

**编辑** 这是 Maven 输出：

```
[INFO] Scanning for projects...
[WARNING] 
[WARNING] Some problems were encountered while building the effective model for org.hello.bb:hellobb:jar:1.0
[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-compiler-plugin is missing. @ line 44, column 12
[WARNING] 'build.plugins.plugin.version' for org.apache.maven.plugins:maven-eclipse-plugin is missing. @ line 32, column 12
[WARNING] 
[WARNING] It is highly recommended to fix these problems because they threaten the stability of your build.
[WARNING] 
[WARNING] For this reason, future Maven versions might no longer support building such malformed projects.
[WARNING] 
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building HelloBB 1.0
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ hellobb ---
[INFO] Deleting D:\work\blackberry_ws\MTest\target
[INFO] 
[INFO] --- maven-antrun-plugin:1.3:run (OS_Environment_Validation) @ hellobb ---
[INFO] Executing tasks
[INFO] Executed tasks
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ hellobb ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 1 resource
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ hellobb ---
[WARNING] File encoding has not been set, using platform encoding Cp1252, i.e. build is platform dependent!
[INFO] Compiling 1 source file to D:\work\blackberry_ws\MTest\target\classes
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ hellobb ---
[debug] execute contextualize
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory D:\work\blackberry_ws\MTest\src\test\resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ hellobb ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ hellobb ---
[INFO] No tests to run.
[INFO] Surefire report directory: D:\work\blackberry_ws\MTest\target\surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------

Results :

Tests run: 0, Failures: 0, Errors: 0, Skipped: 0

[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ hellobb ---
[INFO] Building jar: D:\work\blackberry_ws\MTest\target\hellobb-1.0.jar
[INFO] 
[INFO] --- maven-antrun-plugin:1.3:run (App_Creation_Deployment) @ hellobb ---
[INFO] Executing tasks
    [mkdir] Created dir: D:\work\blackberry_ws\MTest\target\app-binary
      [jar] Building jar: D:\work\blackberry_ws\MTest\target\hellobb.jar
     [echo] Generating the BlackBerry App....
     [echo] Preverifying....
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 4.081s
[INFO] Finished at: Tue Nov 27 11:25:52 FET 2012
[INFO] Final Memory: 9M/110M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-antrun-plugin:1.3:run (App_Creation_Deployment) on project hellobb: An Ant BuildException has occured: Execute failed: java.io.IOException: Cannot run program "preverify" (in directory "D:\work\blackberry_ws\MTest\target\app-binary"): CreateProcess error=2, The system cannot find the file specified -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

**编辑 2**

顺便一提。如果我将项目导入 Eclipse，IDE 会给我这个错误：

```
Plugin execution not covered by lifecycle configuration: org.apache.maven.plugins:maven-antrun-plugin:1.3:run 
(execution: OS_Environment_Validation, phase: validate) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:25:59.887

我相信您应该选择以下描述的解决方案：[http ://www.dzone.com/links/r/blackberry_app_development_using_maven_and_eclipse.html](http://www.dzone.com/links/r/blackberry_app_development_using_maven_and_eclipse.html)

# performance - 如何提高 Windows Phone 中全景控制的性能

> ID：13561876
> 
> 赞同：2
> 
> 时间：2012-11-26T09:25:00.533
> 
> 标签：performance, windows-phone-7, panorama-control

我正在构建一个带有全景控件的 Windows Phone 应用程序，它有四个 PanoramaItems。每个 PanoramaItem 都有一个列表框，其中包含一些列表框项。

如果选择了其中一个列表框项，应用程序将导航到另一个页面，当我按下 BackKey 时，应用程序通常**需要一秒钟**才能返回主页。`Loaded()`和上没有计时事件`NavigatedTo()`。

所以问题可能出在 ListBox 上？但是应该有列表框的数据缓存，如果有的话我找不到原因。

# java - 将经过的毫秒转换为正确的 java 日期格式？

> ID：13561881
> 
> 赞同：3
> 
> 时间：2012-11-26T09:25:16.340
> 
> 标签：java, datetime, elapsedtime, elapsed

我在开发过程中陷入困境，我有这样的要求，我需要找到两个日期之间的延迟，即..`currentdate-date from database`

我需要以`dd:hh:mm`. 在参考了很多参考资料后，我发现了如何转换为单独的毫秒小时和分钟，但期待的是：如果结果是 X 毫秒，我需要以正确的日分钟和秒格式显示它

**示例：2 天：03 分钟：46 秒**

这是正在使用的代码：

```
Calendar calendar1 = Calendar.getInstance();
Calendar calendar2 = Calendar.getInstance();
calendar1.setTime(date);
calendar2.setTime(date1);
long milliseconds1 = calendar1.getTimeInMillis();
long milliseconds2 = calendar2.getTimeInMillis();
long diff = milliseconds1 - milliseconds2;
System.out.println("diff ::"+diff);
long diffSeconds = diff / 1000;
long diffMinutes = diff / (60 * 1000);
long diffHours = diff / (60 * 60 * 1000);
long diffDays = diff / (24 * 60 * 60 * 1000); 
```

谁能建议我进一步做什么？请指导我..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T09:27:49.447

使用[乔达时间](http://joda-time.sf.net)。Java API 不包含任何处理“两个日期/时间值之间的差异”的内容。在 Joda Time 中，您可以在`Period`（实际上是针对以日历为中心的差异）和 a `Duration`（实际上只是经过的时间差异）之间进行选择。

理想情况下，将 Joda Time 用于*所有*日期/时间问题 - 这是一个更好、更好的 API。

在这种情况下，我怀疑您在*逻辑上*得到了 a `Duration`，但您需要将其转换为 a`Period`以便将 a[`PeriodFormatter`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/PeriodFormatter.html)用于字符串转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:28:18.177

你需要先计算`diffDays`

```
diffDays = diff / (24 * 60 * 60 * 1000); 
```

然后计算剩余的毫秒数：

```
diff -= diffDays * 24 * 60 * 60 * 1000; 
```

使用新的 diff 计算 diffHours 等等......

一个建议：使用像这样的常量值：

```
private static final int SECOND = 1000;
private static final int MINUTE = 60 * SECOND;
// and so on 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T09:33:04.887

**-**`Joda`当您处理任何日期时间问题时，我建议您使用图书馆。

**Joda Time 有一个时间间隔的概念：**

`Interval interval = new Interval(oldTime, new Instant());`

顺便说一下，Joda 有两个概念：Interval 表示两个时间点之间的时间间隔（表示上午 8 点到 10 点之间的时间），以及 Duration 表示没有实际时间界限的时间长度（例如，表示两个小时！）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T18:10:39.683

使用 JodaTime，这真的很容易。请参阅以下代码：

```
public void testJoda() {
    DateTime then = new DateTime("2012-03-23T02:30:00.000");
    DateTime now = new DateTime("2012-03-24T02:29:00.000");

    DurationFieldType[] ddhhmm = { DurationFieldType.days(),
            DurationFieldType.hours(), DurationFieldType.minutes() };
    Period p = new Period(then, now, PeriodType.forFields(ddhhmm));
    System.out.println(p.toString());

    p = new Period(then, now, PeriodType.days());
    System.out.println(p.toString());

    p = new Period(then, now, PeriodType.hours());
    System.out.println(p.toString());

    DurationFieldType[] hhmm  = { DurationFieldType.hours(), DurationFieldType.minutes() };
    p = new Period(then, now, PeriodType.forFields(hhmm));
    System.out.println(p.toString());
} 
```

测试间隔为 23h59m。它的输出与预期的一样：

```
PT23H59M
P0D
PT23H
PT23H59M 
```

以同样的时间间隔，一天后，就在 3 月 25 日春季 DST 跳跃前后：

```
DateTime then = new DateTime("2012-03-24T02:30:00.000");
DateTime now = new DateTime("2012-03-25T03:29:00.000"); 
```

你正确地得到：

```
P1DT-1M
P1D
PT23H
PT23H59M 
```

真的，没有比这更容易的了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:32:04.073

```
Calendar calendar1 = Calendar.getInstance();
Calendar calendar2 = Calendar.getInstance();
calendar1.setTime(date);
calendar2.setTime(date1);

int dayDiff = calendar1.get(Calendar.DAY_OF_MONTH) - calendar2.get(Calendar.DAY_OF_MONTH);  
int hourDiff = calendar1.get(Calendar.HOUR_OF_DAY) -calendar2.get(Calendar.HOUR_OF_DAY);   
int dayDiff = calendar1.get(Calendar.SECOND) - calendar2.get(Calendar.SECOND); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-07T20:22:42.573

# c - 带有opengl UI安全问题

> ID：13561883
> 
> 赞同：-1
> 
> 时间：2012-11-26T09:25:19.290
> 
> 标签：c, opengl

> **可能重复：**
> [使用 opengl 创建交互式对话框](https://stackoverflow.com/questions/13551346/interactive-dialog-creation-with-opengl)

由于身份验证对话框从用户那里获取密码，因此它在任何时候都会以“* * * * * * * * *”的形式打印出密码。通过opengl UI，我该怎么做？

见图片[http://media.sharewareconnection.com/images/large/authentication-132.gif](http://media.sharewareconnection.com/images/large/authentication-132.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:06:42.303

> 通过opengl UI，我该怎么做？

OpenGL 不是 UI 系统。它是一个绘图 API，甚至不处理用户输入。它当然可以用作绘制 GUI 小部件的后端，例如文本或密码输入字段，但这不是 OpenGL 本身功能的一部分。

因此，要么您自己实现您的工具包：然后您负责绘制所需的替换字符（或将其留空）。

或者您正在使用一些 GUI 工具包：那么您应该阅读该工具包的文档，了解如何操作，因为 OpenGL 只是用于将内容绘制到帧缓冲区的“笔和纸”。

# wpf - 协作 WPF 应用程序 - 多个键盘和鼠标

> ID：13561887
> 
> 赞同：2
> 
> 时间：2012-11-26T09:25:42.177
> 
> 标签：wpf

我需要设计一个协作 WPF 应用程序，允许多个用户**同时**编辑UI 的**不同**部分。

这*必须*使用单个应用程序来完成，在单个计算机上运行，​​在单个投影仪上显示 - 但需要使用许多键盘和鼠标。在协作/会议室环境中为每个用户配备一台计算机是不可能的。

我对如何做到这一点有一个大致的想法 - 使用原始输入，在应用程序中模拟鼠标指针，并以某种方式对应用程序进行分区（在事件和焦点方面），以便每个分区接受自己的一组输入事件，并且每个分区都保持它自己的键盘和鼠标焦点。

有没有人这样做过或知道更好的方法来应对这一挑战？我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:52:57.247

我认为您不会从 WPF 获得这种行为。如果有可能，这将是大量的工作。

更不用说，即使 WPF 支持 N 个逻辑焦点范围的概念，您一次只能将键盘焦点放在一个元素中。

我只会制作一个常规的 WPF 应用程序，并使用诸如此类的一些软件来搜索解决[方案](http://www.online-tech-tips.com/free-software-downloads/control-one-computer-with-multiple-keyboards-and-mice/)

# ios - 更改 UISegmentedControl 文本

> ID：13561891
> 
> 赞同：0
> 
> 时间：2012-11-26T09:26:01.177
> 
> 标签：ios, xcode

我正在尝试更改我在 IB 中制作的 UISegmentedControl 的文本。这是代码

```
[changeButton removeAllSegments];
[changeButton insertSegmentWithTitle:NSLocalizedString(@"Traffic",@"traffic string")  atIndex:0 animated:YES];
[changeButton insertSegmentWithTitle:NSLocalizedString(@"Satellite",@"satellite string")  atIndex:1 animated:YES]; 
```

但是什么也没发生：我总是看到 IB 为我设置的默认标签（“第一”和“第二”）。当然，我将 IBOUtlet 放在我的 .h 中：

```
 __weak IBOutlet UISegmentedControl *changeButton; 
```

我错过了什么？一般来说，当我在 IB 中创建控件时，为了以编程方式访问它，将 IBOutlet 放入 .h 是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:33:11.203

```
__weak 
```

哦等等......如果它很弱，它会在范围结束时被释放并为空（当创建它的方法返回时）。省略`__weak`它应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:37:08.483

这仅在您同时设置属性和名为 changeButton 的 ivar 时才相关。OP 不清楚，所以把它放在这里以防万一。

看起来你正在混合属性和 ivars。

changeButton ivar 与属性 changeButton 不同。

删除行...

```
 __weak IBOutlet UISegmentedControl *changeButton; 
```

从.h

并将代码更改为...

```
[_changeButton removeAllSegments];
[_changeButton insertSegmentWithTitle:NSLocalizedString(@"Traffic",@"traffic string")  atIndex:0 animated:YES];
[_changeButton insertSegmentWithTitle:NSLocalizedString(@"Satellite",@"satellite string")  atIndex:1 animated:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T10:01:02.937

解决了。问题是我在init方法中写了上面的指令。他们应该进入 viewDidLoad 方法！

# shell - 如何在 shell 中使用 grep 查找文件中的特定文本

> ID：13561901
> 
> 赞同：2
> 
> 时间：2012-11-26T09:26:53.683
> 
> 标签：shell, grep, find

我想搜索一些字符串是直接在文件中的所有子文件夹

我需要找出字符串：

```
DEBUG ('[S:B:H] project=', $project->name, '<<<<<<<<<<<<<'); 
```

我曾经使用 grep -lir 'some text' *

但我想它不是那样工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:24:32.177

这个有效::

```
grep -lier 'DEBUG ('\''\[S:B:H] project='\'', $project->name, '\''<<<<<<<<<<<<<'\'');' <testfile> 
```

# php - 搜索结果错误

> ID：13561902
> 
> 赞同：0
> 
> 时间：2012-11-26T09:26:56.283
> 
> 标签：php, mysql, search

这是我的搜索查询，如果没有结果匹配，我该如何显示错误，请帮助

```
 $sql="SELECT  * FROM course WHERE course_name LIKE '%" . $search_name .  "%'";
              //-run  the query against the mysql query function
              $result=mysql_query($sql); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:29:15.300

```
$sql="SELECT  * FROM course WHERE course_name LIKE '%" . $search_name .  "%'";
              //-run  the query against the mysql query function
$result=mysql_query($sql);

if(mysql_num_rows($result) < 1)
{
    echo 'There were no results.';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:30:31.507

```
if(mysql_num_rows($sql)=="0")
{
echo "----------------"; //your code here
} 
```

# javascript - 嵌入文本和图像，然后将其作为单个图像

> ID：13561904
> 
> 赞同：0
> 
> 时间：2012-11-26T09:27:17.957
> 
> 标签：javascript, jquery, image-processing, client-side

我有一张图片；比如说“鉴赏证书”。只有证书中的人的名字会改变。

当用户在文本框中输入他的名字时，证书上的名字应该是他刚刚输入的文本。

我可以通过将文本重叠到图像上来做到这一点。但是

真正的问题是：

在他输入他的名字之后；文本和证书图像在客户端组合并呈现为单个图像。

这必须在**没有服务器端代码或 HTML5 画布的 jquery/javascript 中完成**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:40:31.310

简单但简短（从 div 中输出物理图像）对于纯 jQuery/Javascript 是不可能的。可以通过 HTML5 画布使用，虽然有点原始，并且有许多好的 php 库（imagick、gd）可以让这看起来轻而易举。

# cordova - Sencha Touch 2 - 防止 a-href 事件（a-href 事件处理）

> ID：13561908
> 
> 赞同：7
> 
> 时间：2012-11-26T09:27:56.760
> 
> 标签：cordova, event-handling, dom-events, sencha-touch-2

在我的 Sencha Touch 2 应用程序中，我需要自己处理重定向事件。我的意思是我需要能够处理 href 事件并自己进行重定向。

我正在使用以下代码：

```
Ext.Viewport.element.addListener("tap", function(e) {
    e.stopEvent();
    e.stopPropagation();
    e.preventDefault();
    var href = e.target.getAttribute("href");
    // ... my code ...
}, this, {delegate: "a"}); 
```

上述功能均不起作用（`stopEvent`, `stopPropagation`, `preventDefault`）。该应用程序始终在我的应用程序 Web 视图中打开该链接。

这里有任何可能的方法来禁用href打开链接吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-26T14:44:08.490

我通常这样做：

```
Ext.Viewport.element.dom.addEventListener('click', function (e) {
    if (e.target.tagName !== 'A') {
        return;
    };
    e.preventDefault();
    var href = e.target.getAttribute('href');
}, false); 
```

[在这里试试](http://www.senchafiddle.com/#G7f1O)

希望这有帮助

# objective-c - NSDateFormatter BC/AD 日期问题

> ID：13561912
> 
> 赞同：2
> 
> 时间：2012-11-26T09:28:15.303
> 
> 标签：objective-c, ios, cocoa-touch, nsdateformatter

我试图弄清楚如何使用 NSDateFormatter 解析 AD 和 BC 日期以及为什么 0000 年无法解析。

```
NSString *test1 = @"0000-01-01";
NSString *test2 = @"0001-01-01";
NSString *test3 = @"0002-01-01 AD";
NSString *test4 = @"0002-01-01 BC";

NSDateFormatter *formatter1 = [[NSDateFormatter alloc] init];

[formatter1 setDateFormat: @"yyyy-MM-dd"];

NSLog(@"test 1 - %@", [formatter1 dateFromString: test1]);
NSLog(@"test 2 - %@", [formatter1 dateFromString: test2]);

NSDateFormatter *formatter2 = [[NSDateFormatter alloc] init];

[formatter2 setDateFormat: @"yyyy-MM-dd G"];

NSLog(@"test 3 - %@", [formatter2 dateFromString: test3]);
NSLog(@"test 4 - %@", [formatter2 dateFromString: test4]); 
```

这就是它返回的内容：

```
2012-11-26 11:24:27.536 Test[1968:c07] test 1 - (null)
2012-11-26 11:24:28.615 Test[1968:c07] test 2 - 0001-12-31 22:21:00 +0000
2012-11-26 11:24:37.604 Test[1968:c07] test 3 - 0001-12-31 22:21:00 +0000
2012-11-26 11:24:45.738 Test[1968:c07] test 4 - 0003-12-31 22:21:00 +0000 
```

如您所见，它为 0000 日期返回 null，而为其他变体返回错误日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T04:04:00.447

根据[维基百科](http://en.wikipedia.org/wiki/0_%28year%29)，在通常用于在公历及其前身儒略历中对年份进行编号的 Anno Domini (AD) 系统中不存在零年。在这个系统中，公元 1 年之后是公元前 1 年。但是，天文年编号（与儒略年 BC 一致）和 ISO 8601:2004（与公历年一致）中有零年1 BC）以及所有佛教和印度教日历。

您无法正确记录日期对象。尝试使用 stringFromDate 函数将获得的日期转换为字符串并记录输出。

# static-linking - 链接 Free Pascal 程序以包含依赖项

> ID：13561914
> 
> 赞同：3
> 
> 时间：2012-11-26T09:28:18.513
> 
> 标签：static-linking, freepascal

我有两个 Free Pascal 单元，我想在 linux 上的 C 程序中使用它们。

这是我所做的：

```
$ fpc -fPIC base64.pas queueutils.pas
Warning: Only one source file supported
Free Pascal Compiler version 2.2.2 [2008/11/05] for x86_64
Copyright (c) 1993-2008 by Florian Klaempfl
Target OS: Linux for x86-64
Compiling queueutils.pas
queueutils.pas(2088,11) Warning: Symbol "Socket" is deprecated
queueutils.pas(2097,10) Warning: Symbol "Connect" is deprecated
queueutils.pas(2104,3) Warning: Symbol "Sock2Text" is deprecated
2432 lines compiled, 0.5 sec
4 warning(s) issued

$ ppumove -o queueutils -e ppl *.ppu
PPU-Mover Version 2.1.1
Copyright (c) 1998-2007 by the Free Pascal Development Team

Processing base64.ppu... Done.
Processing queueutils.ppu... Done.
Linking queueutils.o base64.o
Done. 
```

到目前为止似乎很好，创建了 libqueueutils.so：

```
$ file libqueueutils.so
libqueueutils.so: ELF 64-bit LSB shared object, AMD x86-64, version 1 (SYSV), not stripped

$ ldd libqueueutils.so
ldd: warning: you do not have execution permission for `./libqueueutils.so'
        statically linked 
```

但是，当 C 程序尝试以这种方式使用库时：

```
libqueue = dlopen("./libqueueutils.so", RTLD_LAZY);
if (!libqueue) {
  fprintf (stderr, "%s\n", dlerror());
} 
```

它会产生一条错误消息：

```
$ ./tmbrkr
./libqueueutils.so: undefined symbol: VMT_PROCESS_TPROCESS 
```

如果我将 process.o 和 process.ppu 添加到 ppumove 完成的链接过程中，则此 VMT_PROCESS_TPROCESS 相关错误得到解决。然而，在这样做之后，另一个单元丢失了，然后另一个......你明白了。

有没有办法以某种方式将所有必要的单元链接到一个 .so 文件中，以便 C 程序可以正确地 dlopen() 库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T10:03:03.310

就像普通的二进制 (exe) 来自“程序”源文件一样，.so/dll 是从“库”源文件创建的。

其余的是模型是相同的。您只需构建库主程序，编译器就会收集所有必要的单元并将它们填充到 .so 中。

使用 export 关键字，您可以定义要导出的符号。

```
library testdll;

uses x,y,z;

// define exportable symbols here

// some examples of symbol exports
exports
   P1 index 1,  // dll based on index
   P2 name 'Proc2', // normal export with alternate external symbol
   P3,               // just straight export.
   P4 resident    // for some MCU use
   ;

begin
  // startup code
end. 
```

还要在手册中查找 $soname $libsuffix 和 $libprefix。

虽然我建议只使用最新的 2.6.0，而不是 5 年前的 2.2.2

不过，它可能需要先用 PIC 重新编译 FPC。

# android - 整个应用程序的单个警报对话框

> ID：13561915
> 
> 赞同：6
> 
> 时间：2012-11-26T09:28:18.220
> 
> 标签：android, android-alertdialog

我必须在我的应用程序中显示许多错误消息和警报对话框。我不想使用 Toast，我更喜欢使用`AlertDialog`.

我如何创建和维护一个警报对话框并只更改其中的错误消息字符串，而不是在每个活动中创建一个新的警报对话框？

无论我从事什么活动，我都必须能够访问`AlertDialog`实例以显示和关闭它。

我怎样才能做到这一点？请给我一些线索。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-26T09:32:16.350

制作一个类并粘贴此功能...（可能是Utils.java）

```
public static void alertDialogShow(Context context, String message)
        {
            final AlertDialog alertDialog = new AlertDialog.Builder(context).create();
            alertDialog.setMessage(message);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener() 
            {
                public void onClick(DialogInterface dialog, int which) 
                {
                    alertDialog.dismiss();
              } 
            }); 
            alertDialog.show();
        } 
```

并通过写作来称呼它..

```
Utils.alertDialogShow(YourActivity.this,"Your Error Message") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T09:34:48.870

您始终可以使用您的 alertdialog 调用作为方法编写 Activity 的基类，然后对于您的任何 Activity 类而不是使用扩展 Activity，使用扩展 MyBaseActivity，然后在需要时通过传递您想要输出的字符串来调用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T09:35:41.043

尝试这个：

```
/**
 * Class for showing validation message
 */

package com.prj.utility;

import com.prj.R;

import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.Window;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;
import com.prj.utility.System;

public class ValidationPopup {

    Context mContext = null;

    public ValidationPopup(Context mContext) {
        // TODO Auto-generated constructor stub
        this.mContext = mContext;
    }

    /**
     * 
     * @param strTitle - title of dialog
     * @param strMessage - message to be shown in dialog
     * @param value - edit text object
     */
    public void showValidationDialog(String strTitle, String strMessage,
            final EditText value) {
        final AlertDialog dlgValidationPopUp = new AlertDialog.Builder(mContext)
                .create();

        final LayoutInflater lyInflaterForDlgTitle = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        LinearLayout lLayoutCustTitle = (LinearLayout) lyInflaterForDlgTitle
                .inflate(R.layout.custom_title, null);

        TextView tvTitle = (TextView) lLayoutCustTitle
                .findViewById(R.id.tvTitle);
        tvTitle.setText(strTitle);
        dlgValidationPopUp.setCustomTitle(lLayoutCustTitle);
        if (strMessage == null || strMessage.trim().equalsIgnoreCase("")) {

            //If there isn't any message in database for validation of the field, then DEFAULT_MESSAGE will be used
            strMessage = Config.DEFAULT_MESSAGE;
        }

        dlgValidationPopUp.setMessage(strMessage);
        dlgValidationPopUp.setCancelable(true);
        dlgValidationPopUp.setButton("OK",
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        dlgValidationPopUp.dismiss();

                        //Edittext will be given focus if the field is edit text and it is not null
                        if (value != null)
                            value.requestFocus();
                    }
                });
        dlgValidationPopUp.show();

    }

} 
```

您可以在应用程序中的任何位置创建此类的对象，

```
ValidationPopup vPopup = new ValidationPopup(mContext); 
```

`showValidationDialog`并根据您的需要调用方法

```
vPopup.showValidationDialog("Alert Msg","This is message content", objectOfEditText);//You can pass null as third arg if its not for edittext. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:32:30.403

我在帮助类中做这样的事情

```
 public static void AlertBox(final Activity activity, final String title, final String message)
 {
     AlertDialog.Builder alertbox = new AlertDialog.Builder(activity);
     alertbox.setTitle(title);
     alertbox.setCancelable(false);
     alertbox.setMessage(message);
     alertbox.setNeutralButton("OK", new DialogInterface.OnClickListener() {
         public void onClick(DialogInterface dialog, int which) {
         activity.finish();
         }
 });

     alertbox.show();
 } 
```

# cassandra - Cassandra 压缩代码库

> ID：13561921
> 
> 赞同：4
> 
> 时间：2012-11-26T09:28:48.673
> 
> 标签：cassandra, codebase, snappy

我想知道当我在 Cassandra 的列族中插入一个新列时，磁盘上究竟存储了多少字节。我的主要问题是，当使用 Snappy 压缩列时，我需要知道这些信息，我知道原始字节的计算，但是由于数据的可变性，我无法正确估计压缩率。任何有关在 Cassandra 代码库中哪里可以找到这么多字节的信息都将受到欢迎。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:58:59.100

压缩永远无法提供有保证的压缩比。您可以获得的最佳结果是样本数据的平均比率。

因此，获取大量样本数据，将其插入测试实例，并测量磁盘使用情况。

您可能拥有使用 Snappy 压缩得很差的数据，并且实际上导致磁盘使用量比存储原始字节多。

当涉及到数据压缩时，只有一个规则：*MEASURE*

# telnet - 如何在 telnetd 中设置环境变量并在登录时访问它

> ID：13561922
> 
> 赞同：2
> 
> 时间：2012-11-26T09:29:02.920
> 
> 标签：telnet

鉴于

> telnetd 的运行方式是为客户端分配一个 Telnet 伪终端设备，然后创建一个登录进程，该进程将 Telnet 伪终端的从端作为 stdin、stdout 和 stderr。telnetd 操作 Telnet 伪终端的 master 端，实现 TELNET 协议，在客户端和登录过程之间传递字符。

我试图在登录过程中获取远程主机的 IP 地址和端口号，一旦建立 telnet 连接并且用户通过身份验证。

在 getpeername 成功后的 telnetd main() 中，我添加了 REMOTE_HOST 和 REMOTE_PORT 的 setenv 并尝试在登录过程中访问这些变量。但我无法在 login.c 中访问这些环境变量。

我的问题太具体了，但是如果有人已经尝试在 telnetd 中添加一个 env var 并且能够在登录过程中访问，请建议我如何去做。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:45:22.613

问题终于解决了。在 telnetd 中，有许多调用会在其中重新设置环境。startslave 是创建哪个 tty 并分叉登录过程的功能。因此，在 startslave 中做了 getpeername(0, (struct sockaddr *)&from, &fromlen) 并在分叉登录过程之前添加了环境变量。现在 vars 可用。

# android - 在将 android 应用程序上传到市场时指定 c2dm 客户端登录令牌

> ID：13561928
> 
> 赞同：0
> 
> 时间：2012-11-26T09:29:52.543
> 
> 标签：android, google-play, android-c2dm

我需要在开发者控制台中指定 C2DM 客户端登录令牌，同时将我的应用程序上传到市场，因为我的应用程序正在使用 c2dm 服务。这是我的疑问： 1 这个令牌是一次还是每次？2\. 我的应用上传到市场后，如果它更新了token，我该怎么办？较早的令牌仍然有效吗？我还能收到通知吗？请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:37:58.420

首先，请尽快切换到 GCM。

1 这个令牌是一次还是每次？答：是的，一旦 Google 为设备提供了令牌，它就会保持不变。（如果在不久的将来，您决定切换到 GCM，那么将为该设备生成一个新密钥。）

1.  如果在将我的应用程序上传到市场后更新令牌，我该怎么办？A：在这种情况下，让您的应用程序在每次启动时收集注册密钥。如果密钥已更改，请检查您的共享首选项。如果是，请相应地更新服务器端的数据库。

# c# - C# 单元测试 - 奇怪的项目目录

> ID：13561931
> 
> 赞同：1
> 
> 时间：2012-11-26T09:30:04.167
> 
> 标签：c#, unit-testing, directory

我有一种情况，我正在运行单元测试并试图获取项目基本路径，它给了我一个奇怪的输出。

```
D:\VSCode\Bob.Smith\Projects\MySolution\DEVELOPMENT\MyClasses\MyProject\TestResults\Jacob.Freeman_P1004 2012-11-26 09_21_33\Out 
```

这是 VS 的一个已知问题还是我错过的问题？我正在使用没有其他代码的以下行来获取目录信息。

```
string output = null;
output = Environment.CurrentDirectory; 
```

我尝试了不同的各种方法来获取目录信息，如下所示，但它仍然给我相同的输出。

```
output = System.IO.Directory.GetCurrentDirectory() 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:41:59.680

正如文件所述`Environment.CurrentDirectory`：

> 获取或设置当前工作目录的标准路径。

当前工作目录不一定是项目的基本路径 - 它是在您启动 exe 时。在运行测试时，此路径由测试运行器设置。该变量可以在程序运行时更改。

在应用程序中，您应该使用它`Assembly.GetEntryAssembly().Location`来获取您的 exe 文件的位置。这不适用于测试，因为它们是由测试运行程序执行的。

如果出于测试目的，您只需要您可以使用的已测试 dll 文件的位置`typeof(SomeTypeThatIsDeclaredInThatDLL).Assembly.Location`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:35:18.480

它按设计工作。您的测试在针对 bin 的不同目录中执行。

# javascript - Jquery自定义验证无法正常工作

> ID：13561932
> 
> 赞同：1
> 
> 时间：2012-11-26T09:30:03.963
> 
> 标签：javascript, jquery, regex, validation

我处于无法使用 Jquery 的验证插件的情况。所以我写了一个自定义验证器。但是由于某种原因，测试功能不起作用。

代码运行良好，直到行 `if (format.test(email)) {`。请分享你的知识。提前致谢

```
$(document).ready(function () {
    $("#MainContent_btnSubmit").click(function () {
        validateEmail();

    });
});

function validateEmail() {

    var format = "[a-zA-Z._0-9]@[a-zA-Z.0-9].[a-zA-Z]";
    var email = $("#MainContent_txtEmail").val();

    if (format.test(email)) {
        alert("Correct Email");
    }
    else {
        alert("Wrong Email");
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T09:33:09.770

首先，正则表达式不写成字符串。他们有自己的文字类型：

```
var format = /[a-zA-Z._0-9]@[a-zA-Z.0-9].[a-zA-Z]/; 
```

其次，每个字符类只匹配一个字符。如果没有转义，a`.`是通配符。此外，`test`如果任何子字符串`email`满足该模式，将报告 true。所以你需要[锚定](http://www.regular-expressions.info/anchors.html)模式。你的意思可能是这样的：

```
var format = /^[a-zA-Z._0-9]+@[a-zA-Z.0-9]+\.[a-zA-Z]+$/; 
```

第三，[匹配有效的电子邮件地址比您想象的要难。](http://www.regular-expressions.info/email.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T09:32:14.180

`format`需要是一个`RegExp`对象：

```
var format = new RegExp("[a-zA-Z._0-9]@[a-zA-Z.0-9].[a-zA-Z]"); 
```

此外，我怀疑您希望该值仅包含电子邮件，因此请使用锚点：

```
var format = new RegExp("^[a-zA-Z._0-9]+@[a-zA-Z0-9]+\\.[a-zA-Z]+$"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-12-03T07:22:33.207

您可以使用正则表达式`"^[a-zA-Z._0-9]+@[a-zA-Z0-9]+\\.[a-zA-Z]+$"`并用它创建一个 RegExp 对象

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T09:33:56.660

我不确定这是否是复制粘贴错误，但是查看您的功能代码，可以看到您还没有关闭该功能`validateEmail()`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T09:34:10.013

我认为您要么像这样缺少顶部的 jquery 插件：

```
<script src='path-to-your-jQuery-plugin' type='text/javascript'></script> 
```

或者

```
function validateEmail() {

var format = /^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;
var email = $("#MainContent_txtEmail").val();

    if (format.test(email)) {
        alert("Correct Email");
    }
    else {
        alert("Wrong Email");
    }
}    // in your code here you missed the closing tag of the function 
```

# c# - 使用 System.Runtime.InteropServices.COMException 激活

> ID：13561935
> 
> 赞同：0
> 
> 时间：2012-11-26T09:30:10.663
> 
> 标签：c#

激活`System.Runtime.InteropServices.COMException`导致以下错误。日志后面列出了错误摘要和这些错误的详细信息...

> 激活 C:\Documents and Settings\MCIS\Desktop\Sanjivini\2.7\SanjiviniCommonApp.application 导致异常。检测到以下失败消息：
> + 加载运行时失败。（来自 HRESULT 的异常：0x80131700）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:39:50.373

[ClickOnce](http://en.wikipedia.org/wiki/ClickOnce)需要正确版本的[.NET](http://en.wikipedia.org/wiki/.NET_Framework)运行时才能运行应用程序。检查这些项目：

*   .NET 运行时已安装在客户端计算机上[（最新的 .NET 运行时）](http://www.microsoft.com/en-us/download/details.aspx?id=30653)
*   您拥有正确版本的 .NET 运行时（4.0、3.5 SP1 等）
*   如果计算机/Windows 版本是 32 位 ( *x86* )，请检查应用程序是否未编译为仅在 64 位 ( *x64* ) 上运行。

# multithreading - 在 TThread 派生类中重新创建 TThread

> ID：13561939
> 
> 赞同：-1
> 
> 时间：2012-11-26T09:30:19.767
> 
> 标签：multithreading, delphi, delphi-7, tthread

我创建了一个从 TThread 类派生的新类，在构造函数上我调用“inherited Create(True);”，然后调用“Resume()”，因为我已经覆盖了 Execute() 调用，现在我想调用 Execute( ) （再次运行线程）而不破坏类实例，所以我在新类中有一个名为“myRestart()”的函数，它调用“继承的 Create(True);” 并使我能够再次调用“Resume()”并且线程再次工作。

我的问题是，这是一种安全的做法吗？如果我有这个类的多个实例，它也会起作用吗？或者有更好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:03:13.650

不要到处做这样的事情。如果您希望线程类中的过程/函数运行不止一次，请从 Execute 覆盖中的 while() 循环调用它们，并向线程发出信号以在顶部使用合适的同步对象、信号量或事件来运行代码，说：

```
TmyThread.Execute;
begin
  while true do
  begin
    someEvent.waitFor(INFINITE);
    if terminated then exit;
    doMyProcedure(params);
    doOtherStuff;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T10:19:21.723

我认为您必须显示您的重启代码？因为据我所知，如果线程完成它的 Execute 过程，那么它在操作系统中的状态将更改为 DONE 并且再次调用 resume 只会启动该线程，因为它只是主线程中的一个函数，而不是一个真正的单独线程。

顺便说一句，您可以根据需要使用此示例代码

```
unit UWorker;

interface

uses Windows, Classes, Contnrs;

type
  TWorkerThread=class;

  TWorkerJob=class
    procedure ExecuteJob(Worker: TWorkerThread); virtual; abstract;
  end;

  TWorkerThread=class(TThread)
  private
    FFinished: TObjectList;
    FNotFinished: TObjectList;
  protected
    procedure Execute;Override;
  public
    constructor Create(createSuspended: Boolean);override;
    destructor Destroy; override;
  public
    property Finished: TObjectList read FFinished;
    property NotFinished: TObjectList read FNotFinished;
  end;

implementation

{ TWorkerThread }

constructor TWorkerThread.Create(createSuspended: Boolean);
begin
  inherited;
  FFinished := TObjectList.Create;
  FNotFinished := TObjectList.Create;
end;

destructor TWorkerThread.Destroy;
begin
  FFinished.Free;
  FNotFinished.Free;
  inherited;
end;

procedure TWorkerThread.Execute;
var
  CurrentJob: TWorkerJob;
begin
  while not Terminated do
  begin
    if FNotFinished.Count > 0 then
    begin
      CurrentJob := TWorkerJob(FNotFinished.Items[0]);
      FNotFinished.Extract(CurrentJob);

      with CurrentJob do
      begin
        ExecuteJob(Self);
      end;
      FFinished.Add(CurrentJob);
    end else
    begin
      // pass the cpu to next thread or process
      Sleep(5);
    end;
  end;

end;

end. 
```

要使用此代码，只需创建一个工作人员，然后创建一些作业实例并将它们添加到 NotFinished 列表中。Worker 会一一执行所有作业。要重新启动作业，只需从已完成列表中提取它并再次将其添加到未完成。

请记住，您必须继承您的作业并覆盖 ExecuteJob 过程。

# javascript - 使用 jquery、javascript 的外系统滑块

> ID：13561945
> 
> 赞同：0
> 
> 时间：2012-11-26T09:30:40.227
> 
> 标签：javascript, jquery, outsystems

我需要一个用于 Outsystems 应用程序的滑块组件，其中我有三个值低、中和高。（假设低-> 0、中-> 5、高-> 10）用户应该可以将滑块指示器放置在这些值中的任何一个上。

有什么提示吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:49:55.510

如果您只需要一个能够用一系列范围填充它的滑块，您可以选择 jquery UI one：

[http://jqueryui.com/slider/#steps](http://jqueryui.com/slider/#steps)

强大的功能和支持。

编辑：对于颜色演变，您可以为带有颜色背景的工具提示创建一个 div，您将根据所选值进行更改。您的代码看起来像这样：

```
(if val == 1){handle.css('color','red');}
else if(val == 5){handle.css('color','yellow')} 
else if (val == 10) {handle.css('color','green')} 
```

# android - Android Tabhost 键盘重叠输入

> ID：13561949
> 
> 赞同：2
> 
> 时间：2012-11-26T09:31:16.660
> 
> 标签：android, keyboard, android-tabhost

我有 tabhost 布局，我在其中加载我的表单活动（滚动条中有 10 个输入）。当我开始在最底部的输入上键入时，显示的键盘和未显示的焦点输入（键盘与输入重叠而不是正常滚动）并且我看不到我在输入什么。当我尝试在 tabhost 之外运行表单活动时，一切正常，我可以键入并查看始终聚焦的输入。我的最低 API 级别为 10，最高为 17。

任何帮助或方向高度赞赏。

TabHost 布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<TabHost 
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@android:id/tabhost"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
>
<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >

   <RelativeLayout
       android:id="@+id/layTab"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_alignParentBottom="true"
       android:layout_centerVertical="true"
       android:gravity="center"
       android:background="#00A99D"
       android:paddingLeft="0dip"
       android:paddingRight="0dip" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:gravity="center|bottom"                
            android:padding="0dip" />

    </RelativeLayout>
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentTop="true"
        android:layout_above="@id/layTab"/>
</RelativeLayout> 
```

表格布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical">

 <ScrollView 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#eee"
    android:padding="0dip"
    android:layout_alignParentBottom="true">   
<LinearLayout
    android:id="@+id/body"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/header"
    android:orientation="vertical" >

<EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:hint="1"
            android:ems="10" />

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:hint="2"
            android:ems="10" />             

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:hint="3"
            android:ems="10" />    

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:hint="4"
            android:ems="10" />    

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:hint="5"
            android:ems="10" />    

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:hint="6"
            android:ems="10" />    

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:hint="7"
            android:ems="10" />    

         <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:hint="8"
            android:ems="10" />    

            <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:imeOptions="flagNoExtractUi"
            android:hint="9"
            android:ems="10"/>

               <EditText
            android:id="@+id/editText6"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:hint="10"
            android:ems="10" />    

    </LinearLayout>

</ScrollView>

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T09:43:53.220

When a keyboard pops up, it has 'two visual modes'. FullScreen, meaning that the window in which the keyboard renders is fully overlaying your application or not fullscreen.

In the second case the window, in which your activity displays, is resized. With this resizing, I assume that a `TabHost` does scale up but the child layouts (in the case your form) are not scaled the same way as if they would be a stand-alone layout.

The Android documentation states that an application using an EditText should be aware of:

*   Properly set the inputType in your editable text views, so that the input method will have enough context to help the user in entering text into them.
*   **Deal well with losing screen space when the input method is displayed. Ideally an application should handle its window being resized smaller, but it can rely on the system performing panning of the window if needed. You should set the windowSoftInputMode attribute on your activity or the corresponding values on windows you create to help the system determine whether to pan or resize (it will try to determine this automatically but may get it wrong).**
*   You can also control the preferred soft input state (open, closed, etc) for your window using the same windowSoftInputMode attribute.

# django - cProfiler Django 中间件：对统计数据进行排序

> ID：13561959
> 
> 赞同：2
> 
> 时间：2012-11-26T09:32:04.387
> 
> 标签：django, profiler, django-middleware

在 Django 中，我使用以下中间件 Cprofiler 片段/来自[http://djangosnippets.org/snippets/727/](http://djangosnippets.org/snippets/727/)）

如何更改用于排序的内容？如果我想使用 sort_stats() 代码中的哪个位置？

```
import sys
import cProfile
from cStringIO import StringIO
from django.conf import settings

class ProfilerMiddleware(object):
    def process_view(self, request, callback, callback_args, callback_kwargs):
        if settings.DEBUG and 'prof' in request.GET:
            self.profiler = cProfile.Profile()
            args = (request,) + callback_args
            return self.profiler.runcall(callback, *args, **callback_kwargs)

    def process_response(self, request, response):
        if settings.DEBUG and 'prof' in request.GET:
            self.profiler.create_stats()
            out = StringIO()
            old_stdout, sys.stdout = sys.stdout, out
            self.profiler.print_stats(1)
            sys.stdout = old_stdout
            response.content = '<pre>%s</pre>' % out.getvalue()
        return response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T11:05:12.107

I think you are looking for the sort_stats function and it needs to go right before print_stats.

```
 def process_response(self, request, response):
    if settings.DEBUG and 'prof' in request.GET:
        self.profiler.create_stats()
        out = StringIO()
        old_stdout, sys.stdout = sys.stdout, out
        self.profiler.sort_stats('name')
        self.profiler.print_stats(1)
        sys.stdout = old_stdout
        response.content = '<pre>%s</pre>' % out.getvalue()
    return response 
```

Also take a look at this [http://docs.python.org/2/library/profile.html](http://docs.python.org/2/library/profile.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T20:18:53.083

sort_stats() 不能直接在探查器上使用。我在这里找到了解决方案：

[http://djangosnippets.org/snippets/1579/](http://djangosnippets.org/snippets/1579/)

# c# - 枚举继承 - C#

ID：13561960

赞同：0

时间：2012-11-26T09:32:05.353

标签：c#, inheritance, enums

# static - play 2.0 服务静态文件

> ID：13561961
> 
> 赞同：1
> 
> 时间：2012-11-26T09:32:07.177
> 
> 标签：static, playframework

我希望从 project_root/assets/abc.png 提供 localhost/assets/abc.png 文件

GET /assets/*file controllers.Assets.at(path="/public", file)

使用上面的路由，将不会提供 localhost/assets/abc.png（我找不到方法）
，但 localhost/assets/images/abc.png 将从 root/assets/images/abc.png 提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:53:03.540

在底部添加以下条目`routes`：

```
# Serves only abc.png from root public folder
GET     /$file<abc.png>        controllers.Assets.at(path="/public", file) 
```

也就是说，如果您有多个文件要像这样提供，最好将它们放在子文件夹中

# php - Transact.dll 的 Authorized.net Payment Getway 问题

ID：13561962

赞同：0

时间：2012-11-26T09:32:08.000

标签：php, wordpress, events, payment, authorize.net

# c++ - VS2010：在 std::vector.clear() 中断言“向量迭代器不兼容”

> ID：13561967
> 
> 赞同：-1
> 
> 时间：2012-11-26T09:32:20.323
> 
> 标签：c++, visual-studio-2010, stl, assert, assertion

我正在使用以下愚蠢的代码：

```
std::vector<wxString> m_redoSteps;
...
m_redoSteps.clear(); 
```

当我使用 Visual Studio 6 或 GCC m_redoSteps.clear() 进行编译时，工作正常，当我使用 Visual Studio 2010 时，会出现“向量迭代器不兼容”的断言（这会导致发布版本崩溃）。

任何想法这里有什么问题？

--

编辑：再添加一行代码：

```
std::vector<wxString> m_redoSteps;
...
if (!m_redoSteps.empty())
{
   // do something in case it is not empty - which isn't in my case
   ...
}
m_redoSteps.clear(); // first call leads to the assertion... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T10:05:29.873

安装 Visual Studio 2010 sp1，请参阅此错误报告：[http ://connect.microsoft.com/VisualStudio/feedback/details/545013](http://connect.microsoft.com/VisualStudio/feedback/details/545013)

**更新（2015 年 4 月 14 日）：**

错误描述为*545013：“vector::erase”约束在调试版本中返回不兼容的迭代器。*

原始链接[http://connect.microsoft.com/VisualStudio/feedback/details/545013](http://connect.microsoft.com/VisualStudio/feedback/details/545013)不可用，但是原始错误的缓存在这里[http://web.archive.org/web/20140727031651/http:// /connect.microsoft.com/VisualStudio/feedback/details/545013](http://web.archive.org/web/20140727031651/http://connect.microsoft.com/VisualStudio/feedback/details/545013)

该错误已在 Visual Studio SP 1 中解决，如此[处所述 Visual Studio 2010 Service Pack 1 的描述](https://support.microsoft.com/en-us/kb/983509)

# url-rewriting - nginx 重写 URL

> ID：13561968
> 
> 赞同：0
> 
> 时间：2012-11-26T09:32:22.433
> 
> 标签：url-rewriting, nginx

我想重写以下网址：

```
index.php?SOMETHING=VALUE 
```

作为

```
/SOMETHING/VALUE 
```

我对 nginx 重写没有经验，因此将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T10:55:59.413

我想出了解决您问题的方法：

```
location /index.php {
    if ( $args ~ "(?<PATH1>.*)=(?<PATH2>.*)" ) {
        rewrite ^ /${PATH1}/${PATH2}? last;
    }
} 
```

说明：

*   `if ( $args ~ "(?<PATH1>.*)=(?<PATH2>.*)" )`：从 URL 参数中捕获两个相关部分，将值存储在变量`PATH1`和`PATH2`
*   `rewrite ^`意思是“重写整个 URI”
*   `/${PATH1}/${PATH2}`正在构建新的 URI
*   尾随`?`通知`nginx`您不想附加原始 URL 参数
*   `last`告诉`nginx`重写后继续遵守规则

# android - AsynTask 正在向列表视图添加额外的项目

> ID：13561970
> 
> 赞同：1
> 
> 时间：2012-11-26T09:32:26.020
> 
> 标签：android

我在我的应用程序中使用了 pulltorefresh 列表视图。当我调用 pulltoRefresh 时，我正在调用 AsyncTask。在调用它之前，我正在清除 ArrayLists 中的所有数据并将我的适配器设置为 null。下面的代码显示了这一点

```
 listView.setOnRefreshListener(new OnRefreshListener() {

//          @Override
            public void onRefresh() {
                // Your code to refresh the list contents goes here
                listView.setAdapter(null);
                scroll=true;
                pic.clear();
                id.clear();
                name.clear();
                msg.clear();
                img.clear();
                profimg.clear();
                objid.clear();
                comment.clear();
                weburl.clear();
                adapter.clear();
                likes.clear();
                like_or_unlike.clear();
                 previousTotal = 0;

                  listView.removeFooterView(footerView);
//              listView.setAdapter(null);
//              scroll=true;
//              notifyDataSetChanged();
//              urlval=0;
                j=0;
                 loading = true;
                webserv="https://graph.facebook.com/me/home?access_token="+accesstoken;
                 doInBack dob=new doInBack();
                 dob.execute(); 

//               doback(webserv);
                    Log.e("hi","doback called");

                // Make sure you call listView.onRefreshComplete()
                // when the loading is done. This can be done from here or any
                // other place, like on a broadcast receive from your loading
                // service or the onPostExecute of your AsyncTask.

                // For the sake of this sample, the code will pause here to
                // force a delay when invoking the refresh

            }
        }); 
```

当我调用这个 Asyntask 时，立即添加了一个我们看不到的项目。我在我的 onScrollListener 类中观察到了这一点，我用它来加载更多数据。

我的 onScrollListener 类是

```
 listView.setOnScrollListener(new  OnScrollListener() {

            private int threshold = 0;
//          
            public void onScrollStateChanged(AbsListView view, int scrollState) {
////                
                  if (scrollState != 0) {  
                    isScrolling = true; 
                }
                else {   
                   isScrolling = false;  
                  adapter.notifyDataSetChanged();

                }  

            }

          public void onScroll(AbsListView view, int firstVisibleItem,int visibleItemCount, int totalItemCount) 
          {     

//           public void onScrollStateChanged(AbsListView view , int scrollState)
//           {
//                  if (scrollState != 0) {  
//                      listView.getAdapter().isScrolling = true; 
//                  }
//                  else {   
//                      listView.getAdapter().isScrolling = false;  
//                      listView.getAdapter().notifyDataSetChanged();  
//                  }  
//              }  
              // TODO Auto-generated method stub

              if (loading) {
                  if (totalItemCount > previousTotal) {
                    Log.e("in loading","in load");
                      loading = false;
                      previousTotal = totalItemCount;
                  }
              } 
//                   int lastInScreen = firstVisibleItem + visibleItemCount; 
//              if (!loading && (totalItemCount - visibleItemCount) ==(firstVisibleItem + threshold)){
                   if (!loading && (firstVisibleItem + visibleItemCount) >= totalItemCount){
//                    if(((firstVisibleItem + visibleItemCount) == totalItemCount)){
//                   if (!(loading)  &&(totalItemCount - visibleItemCount) ==(firstVisibleItem + threshold)) {
//                clearAllResources(); 
                       System.out.println(firstVisibleItem );
                       System.out.println(visibleItemCount );
                       System.out.println(totalItemCount);
                  scroll=false;
//                  if (!(loading)  &&(totalItemCount - visibleItemCount) == (firstVisibleItem + threshold)) {
                       Log.v("in gridview loading more","grid load");
//                      
                       doInBack dob=new doInBack();
                       dob.execute();  
//                       doback(webserv);
                    loading = true;
                   }
              }

      });

        doInBack dob=new doInBack();
            dob.execute();     
//        doback(webserv);
        Log.e("hi","doback called");

        } 
```

我真的不明白为什么它会在调用 AsyncTask 时临时添加项目。帮助我。在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T09:37:46.430

首先让我知道，**你为什么要创建不同的 ArrayList**来存储 Object 的数据。

```
 pic.clear();
 id.clear();
 name.clear();
 msg.clear();
 img.clear();
 profimg.clear();
 objid.clear();
 comment.clear();
 weburl.clear();
 adapter.clear();
 likes.clear();
 like_or_unlike.clear(); 
```

所以我的第一个建议是创建一个包含所有值的单个对象并将其放入**`ArrayList<Object>`**. 管理单个 ArrayList 比管理多个 ArrayList 更容易。性能也会提高。

# windows - 如何跟踪 WinRT 应用程序（在 Win32 中很简单）？

> ID：13561975
> 
> 赞同：8
> 
> 时间：2012-11-26T09:32:35.167
> 
> 标签：windows, windows-8, windows-runtime

在“旧”时代，我为 Windows 用户创建了简单的工具，它可以跟踪他们在电脑前所做的事情（简单的活动监视器）。我使用的是 Win32 api 和 GetForegroundWindow、GetWindowThreadProcessId 等函数。

昨天我安装了新的 Windows 8 并且厌倦了运行我的程序。我获得了 50% 的成功：对于“经典”桌面，它像往常一样工作:)。对于 Metro UI，我只有一个应用程序：WWAHost :( 没有任何细节。

所以我的问题是：有没有办法在 Metro UI 中跟踪活动的应用程序？感谢帮助

更新：我正在尝试从 Win32 访问 Metro UI 应用程序，我知道从另一个 Metro 应用程序访问 Metro 应用程序是不可能的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:32:45.480

您会看到，在 WinRT 中，您的应用程序是最顶层的应用程序。当您的应用程序不是最顶层的应用程序时，您的线程将被挂起，内核将不会为您的应用程序安排更多操作。故事结局。

这意味着您想要完成的事情无法在 WinRT 中完成。您的想法更像是一个常驻应用程序或可以访问桌面的服务。这些应用程序有两个优点。1）他们总是在运行。而且，2）他们有 API 来做你想做的事。

WinRT 有意将应用程序置于沙盒中，以保护用户的体验、性能和电池寿命。您的情景和分数与您的情况更加相似，这凸显了对桌面应用程序的持续需求。（只要持续需要这些类型的应用程序；））。

抱歉，如果这是个坏消息。

至于枚举其他应用程序。这也是不可能的。您无法知道是否安装了另一个应用程序或它是否正在运行。您可以通过协议激活或文件激活或（在某种意义上）通过共享合同来调用另一个应用程序。但是您不知道他们是否收到消息以及用户是否首先安装了它。这是设计使然。

值得一提的是，您可以在 WinRT 应用程序中调用 Win32 API。它会导致很多问题，并且可能会让人头疼以获得商店的认证。但即便如此，并非所有 API 都对您开放。而且您会发现这个特定的用例是行不通的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T09:37:13.070

我相信这是不可能的。在 Windows 8 'Metro' 中，只有一个应用程序处于活动状态。当最上面的应用程序正在运行时，所有其他应用程序将处于暂停状态。这使得无法编写监视当前正在执行的其他应用程序的应用程序。

请参阅有关[Windows 8 应用生命周期的大量文章](http://blogs.learnnowonline.com/blog/bid/239178/Windows-8-The-App-Lifecycle)。

# php - 美学如何反转报价

> ID：13561985
> 
> 赞同：0
> 
> 时间：2012-11-26T09:33:07.820
> 
> 标签：php, mysql

好吧，我的项目终于差不多完成了，我不确定它到底有多安全，但它是一个起点，如果有这么多人不付钱让某人修复一些东西，它可以等待虽然我一直在学习，但长话短说我让它输出一个文件

我遇到了一些麻烦。

这是我的代码

```
 file_put_contents('DONE.html', '<html><?php include('config.php'); </html>'); 
```

但是我确信你可以看到我的问题是，由于整个字符串被放入 ' 引号中，它不会正确读取 config.php，因为它认为它应该不在引号中，我该如何解决这个问题，因为我有很多 ' 和" 需要添加到此，我不确定如何使我的 php 脚本输出引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T09:35:17.220

由相同字符分隔的字符串中的引号字符应使用反斜线/反斜杠字符进行转义。

```
 file_put_contents('DONE.html', '<html><?php include(\'config.php\'); </html>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T09:40:04.157

有几种方法可以实现您想要做的事情：

```
 file_put_contents('DONE.html', "<html><?php include('config.php'); </html>");

 file_put_contents('DONE.html', '<html><?php include("config.php"); </html>');

 file_put_contents('DONE.html', "<html><?php include(\"config.php\"); </html>"); 
```

您基本上在单引号和双引号之间交替，或者转义（使用反斜杠）双引号内的双引号，这样它就不会关闭前一个引号。

无论如何，我认为你想做的有点奇怪。您为什么不直接将 config.php 包含在内，而不是将包含添加到该文件中？如果更改 config.php 的名称或路径会发生什么？您必须从所有文件中更改它，为什么不只是：

```
<?php
include("config.php");
include("DONE.html");
?> 
```

# sql-server - 远程查询、查看和 where 子句性能

> ID：13561991
> 
> 赞同：1
> 
> 时间：2012-11-26T09:33:23.780
> 
> 标签：sql-server

在使用远程查询和应用 where 子句时，我对我们的 SQL 服务器的性能问题感到有些困惑。当我在本地服务器上运行查询时，会使用聚集索引搜索，但从远程情况下并非如此。

因此，在本地服务器上运行它需要 2 秒：

```
SELECT * FROM uv_order WHERE order_id > '0000200000' 
```

但是从远程数据库运行这个需要 2 分钟：

```
SELECT * FROM RemoteServer.data.dbo.uv_order WHERE order_id > '0000200000' 
```

这`uv_order`是一个非常复杂的视图，但是由于在从本地服务器执行时使用了索引搜索，所以我不明白为什么它在运行远程查询时不能使用它。这只适用于视图的接缝，因为在桌子上做同样的事情会按预期工作。

任何想法为什么会发生这种情况以及如何“修复”它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T10:02:08.833

那么你可以像这样修复它

```
select *
from openquery(
    RemoteServer,
    'select * from data.dbo.uv_order WHERE order_id > '''0000200000''''
) 
```

# c++ - 聚合初始化

> ID：13561992
> 
> 赞同：2
> 
> 时间：2012-11-26T09:33:29.907
> 
> 标签：c++

如果我有一个结构并且我像这样初始化它：

```
#include <memory>

struct MyHandle
{
        std::shared_ptr<int> handle_;
};

int main()
{
        MyHandle m{std::make_shared<int>(42)};
} 
```

MyHandle 的聚合初始化是否发生所以 **没有构造函数**用于初始化 MyHandle 类型的对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T09:36:22.710

MyHandle 不是 POD，因为 POD 不能包含非 POD 成员（并且 shared_ptr 不是 POD）。在构造 MyHandle 对象时肯定会调用 shared_ptr 的构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T09:53:58.093

这是正确的。只有没有用户提供的构造函数的类才允许聚合初始化，并且（用标准的话来说，C++11 8.5.1/2），“每个成员都是从相应的初始化子句复制初始化的”。所以没有`MyHandle`使用构造函数，只为类类型的每个成员使用一个复制、移动或转换构造函数。

默认初始化每个成员的隐式默认构造函数用于默认和值初始化；但它不能用于聚合初始化，因为每个成员只能初始化一次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T09:41:05.467

显然 std::shared_ptr 不是 POD，您可以使用[std::is_pod](http://en.cppreference.com/w/cpp/concept/PODType)检查 POD 类型：

```
std::is_pod<std::shared_ptr<int>>::value 
```

应该返回 0

# django - Django + JQMobile + PhoneGap

> ID：13561999
> 
> 赞同：2
> 
> 时间：2012-11-26T09:34:10.370
> 
> 标签：django, cordova, jquery-mobile

我一直在开发一个移动应用程序来访问我的一个 django 网站。我使用 TastyPie 完成了 restful API，并使用 JQMobile 开发了前端。我已经到了我想要登录用户并有权访问该登录用户的部分。

我已经做了很多阅读和搜索，但我仍然不确定什么是最好的方法。理想情况下，我想使用用户名和密码登录用户，然后过滤该用户的一些 API 返回数据（我可以通过 TastyPie 文档进行操作）。

其他人如何使用 JQMobile 和 Django 对用户进行身份验证。我也在使用PhoneGap，因此如果需要，我可以将登录返回的用户信息存储在本地存储中。但是我不太确定如何将它们一起编码以使 request.user 在移动用户使用该应用程序时在 django 端可用。

到目前为止，我已经从 TastyPie 方面的 UserResource 中的另一篇文章中提出了这一点，以登录用户，但我不确定用户登录后该怎么做。

```
class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        list_allowed_methods = ['get', 'post']

    def override_urls(self):
        return [
            url(r"^(?P<resource_name>%s)/signin%s$" %
                (self._meta.resource_name, trailing_slash()),
                self.wrap_view('signin'), name="api_signin"),
        ]

    def signin(self, request, **kwargs):
        self.method_check(request, allowed=['post'])

        # Per https://docs.djangoproject.com/en/1.3/topics/auth/#django.contrib.auth.login...
        username = request.GET['username']
        password = request.GET['password']
        user = authenticate(username=username, password=password)

        if user is not None:
            if user.is_active:
                login(request, user)
                return self.create_response(request, {'success': True})
            else:
                # Return a 'disabled account' error message
                return self.create_response(request, {'success': False})
        else:
            # Return an 'invalid login' error message.
            return self.create_response(request, {'success': False}) 
```

有没有人有任何可以共享的代码，或者如何登录用户并维护他们的状态的任何指针？

干杯，本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T11:44:12.653

Phonegap 实际上只是一个封装在一些本机代码中的浏览器，这意味着它具有与普通 Web 浏览器一样持久会话的相同方法 - cookie！

每个发送到后端 API 的 ajax 请求都可以`sessionid`像普通`GET`请求一样包含 cookie。该`requst.user`对象将在您的视图中提供给您。

您不需要为此构建任何特殊的东西或使用本地存储。唯一需要[验证的是您的域已列入白名单](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)，以便您的应用可以访问它。