# StackOverflow 问答 14438000-14438999

# php - 获取函数调用的第一个参数的字符串

> ID：14438001
> 
> 赞同：3
> 
> 时间：2013-01-21T11:50:29.543
> 
> 标签：php, regex

我想使用 PHP-Files 搜索特殊函数调用。原因是，我想为 GetText-Extension 生成 .MO-Files。所以我首先需要创建一个 .PO-Files，其中包含所有需要的文本字符串。

我已经找到了很多文本，但是有一些问题。

这是我的正则表达式，用于查找函数调用的第一个参数：

```
/\_\([\'|\"]{1}(.+?[^\\\])[\'|\"]{1}[,]{0,1}.*?\)+/si 
```

我需要找到具有以下模式的函数调用：

```
_("text");
_("text %s", 3);
_('text'); 
```

文本可能包含转义的引号。我的问题是，我需要知道，通话中是否使用了撇号或正常引号。

如果我有电话

```
_('"text"'); 
```

然后我得到了问题，我得到了文本

```
"text 
```

没有结束引号。

你们中有人有想法吗，我怎样才能让我的正则表达式工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:08:35.427

对于这种东西，我会使用 PHP 的[标记器，而不是正则表达式：](http://php.net/manual/en/function.token-get-all.php)

```
$funcName = '_';
$tokens   = token_get_all(file_get_contents('path/to/your/script.php'));
$strings  = array();

foreach($tokens as $index => $token){

  if(!is_array($token))
    continue;

  if($token[0] === T_CONSTANT_ENCAPSED_STRING){

    if(!isset($tokens[$index - 2]) || ($tokens[$index - 1] !== "("))
      continue;

    list($id, $text, $line) = $tokens[$index - 2];

    // this is your string (substr drops quotes around it)
    if(($id === T_STRING) && ($text === $funcName))
      $strings[] = substr($token[1], 1, -1);

  }    
}

var_dump($strings); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:00:42.893

原始正则表达式：

```
_\((?|'((?:[^'\\]|\\.)*)'|"((?:[^"\\]|\\.)*)") 
```

分隔正则表达式：

```
~_\((?|'((?:[^'\\]|\\.)*)'|"((?:[^"\\]|\\.)*)")~ 
```

结果在捕获组 1 中。我使用了分支重置模式`(?|pattern)`，以便为每个由 . 分隔的交替分支重置捕获组编号`|`。

分支重置内部`(?|'((?:[^'\\]|\\.)*)'|"((?:[^"\\]|\\.)*)")`有 2 种模式：

*   `'((?:[^'\\]|\\.)*)'`：匹配和捕获单引号字符串中的内容，该字符串由非引号非反斜杠或转义序列组成。实际上，我在这里有点粗心，因为（原始）换行符被认为是字符串的一部分。我认为规范不允许这样做，但如果输入包含有效代码，那么应该没有问题。

*   `"((?:[^"\\]|\\.)*)"`: 同上，但用于双引​​号字符串。

请注意，我不使用函数的其余参数。

# java - ASCII 码 => 字符串

> ID：14438003
> 
> 赞同：0
> 
> 时间：2013-01-21T11:50:48.990
> 
> 标签：java, ascii

我有下一个 ASCII 码字符串：

```
[-76,-96,-80,106,-58,106,-1,34,7,123,-84,101,51] 
```

在这些代码值的字符字符串中转换它的最佳方法是什么？这里有什么陷阱吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:55:12.333

你需要把它变成对应的字节数组，然后实例化`new String(byteArray)`。

```
String [] strings = input.substring(1, input.length()-1).split(",");
byte[] bytes = new byte[strings.length];
int i = 0;
for (String s : strings) bytes[i++] = Byte.parseByte(s);
System.out.println(new String(bytes, "UTF-8")); 
```

使用正确的字符编码代替“UTF-8”。它可以是 CP-1250、ISO-8859-1 或类似的。

# jquery - jQuery UI toggleClass Duration 被忽略

> ID：14438006
> 
> 赞同：1
> 
> 时间：2013-01-21T11:51:00.633
> 
> 标签：jquery, jquery-ui, css

我遇到了 jQuery UI 的 toggleClass 函数的问题。我正在使用它来添加一个类，当用户将鼠标悬停在该元素上时，该类将应用缓动过渡。它似乎没有使用持续时间参数。当您鼠标移出时，该类立即消失。

库（都按此顺序添加到头部）：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

功能：

```
$(function() {
    $("#sidebar li").hover(
        function() {
            $(this).toggleClass("current-hover", 1000);
            return false;
    });
}); 
```

CSS：

```
.nav-highlight li.current-hover a{
padding-left:1.563em;
border-left-style:solid;
border-left-color:#e42626;
-webkit-transition:padding .25s ease; /* chrome */
-moz-transition:padding .25 ease; /* firefox */
-o-transition:padding .25 ease; /* opera */
transition:padding: .25 ease;
color:#e42626; 
```

}

行动中的组合：http: [//jsfiddle.net/ggjqb/6/](http://jsfiddle.net/ggjqb/6/)

# jquery - Ajax 和引导模式

> ID：14438010
> 
> 赞同：7
> 
> 时间：2013-01-21T11:51:21.583
> 
> 标签：jquery, twitter-bootstrap

我正在尝试进行 ajax 调用以删除使用引导模式的用户。模态用于确认目的，如下所示。

```
<!-- Modal -->
<div id="deleteModal" class="modal hide fade" tabindex="-1" role="dialog" aria-hidden="true">
<div class="modal-header">
<button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
<h3 id="myModalLabel">Delete user</h3>
</div>
<div class="modal-body">
<p>You are about to delete this user. Are you sure that you want to continue?</p>
</div>
<div class="modal-footer">
<button id="confirm" class="btn btn-primary">Yes</button>
<button id="cancel" class="btn" data-dismiss="modal" aria-hidden="true">No, leave</button>
</div>
</div> 
```

然后我使用以下 javascript 来处理用户输入

```
 $('a#delete').click(function(e){
        var anchor = this;
        $('#deleteModal').modal('show');
        $('button#confirm').click(function(e){
            $('#deleteModal').modal('hide');
            $.ajax({
                url: $(anchor).attr('href'),
                success:function(result){
                    $(anchor).closest('tr').addClass("error");
                    $(anchor).closest('tr').delay(2000).fadeOut();
              }});
        });
        return false;
    }); 
```

用户必须点击的链接是这样的

```
<a id="delete" href="/admin/edit/user/delete/30" class="btn btn-danger" user="30"><i class="icon-trash"></i> Delete</a> 
```

它有效，但我注意到发生了一些奇怪的事情。如果我单击删除一个用户并选择从模式中取消该操作，然后我选择删除另一个确认该操作的用户，则两个用户都将被删除。

我认为我声明的规则仍然适用于会话期间单击的对象。有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T12:56:02.663

这是因为您在 上注册`click`活动的方式`button#confirm`。每次单击删除按钮时，您都会向模态对话框的确认按钮注册一个新的单击事件处理程序。

你的方法有问题在[这里演示](http://jsfiddle.net/arunpjohny/YYtqq/2/)。

可以通过将逻辑分成两部分来修复

```
$('button#confirm').click(function(e){
    $('#deleteModal').modal('hide');
    $.ajax({
        url: $('#deleteModal').attr('href'),
        success:function(result){
            $(anchor).closest('tr').addClass("error");
            $(anchor).closest('tr').delay(2000).fadeOut();
      }});
});

$('a#delete').click(function(e){
    var anchor = this;
    $('#deleteModal').modal('show').attr('href', $(anchor).attr('href'));
    return false;
}); 
```

这里我们`confirm`只在页面加载时注册一次点击事件，但是当点击删除按钮时，我们通过`user`属性将上下文信息传递给确认模式。在确认回调中，我们使用此上下文信息来确定必须删除哪个用户。

您可以在[此处的演示](http://jsfiddle.net/arunpjohny/YYtqq/3/)中对其进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:35:33.803

当用户单击链接时，尽管单击了对话框按钮，但仍会提交该链接。您需要防止默认行为：`e.preventDefault();`

```
 $('a#delete').click(function(e){
    e.preventDefault();
    var anchor = this;
    $('#deleteModal').modal('show');
    $('button#confirm').click(function(e){
        $('#deleteModal').modal('hide');
        $.ajax({
            url: $(anchor).attr('href'),
            success:function(result){
                $(anchor).closest('tr').addClass("error");
                $(anchor).closest('tr').delay(2000).fadeOut();
          }});
    });
    return false;
}); 
```

执行此操作的另一种方法是不将 href 值放入链接。您已经拥有用户属性，因此这是某种重复：

```
<a id="delete" class="btn btn-danger" user="30"><i class="icon-trash"></i> Delete</a> 
```

和js：

```
 $('a#delete').click(function(e){
    var anchor = this;
    var del_link = '/admin/edit/user/delete/' + $(anchor).attr('user');
    $('#deleteModal').modal('show');
    $('button#confirm').click(function(e){
        $('#deleteModal').modal('hide');
        $.ajax({
            url: del_link,
            success:function(result){
                $(anchor).closest('tr').addClass("error");
                $(anchor).closest('tr').delay(2000).fadeOut();
          }});
    });
    return false;
}); 
```

`delete`您是否对所有删除链接使用相同的id？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-05T21:20:55.100

使用 .unbind() 取消绑定您的点击事件或对您的点击事件执行 .one() 确保它只执行一次。

```
$('a#delete').one('click', function(e) { 
```

或者

```
$('a#delete').unbind().live('click', function(e) { 
```

# c# - 谷歌自定义搜索 API C# 2.0

> ID：14438016
> 
> 赞同：0
> 
> 时间：2013-01-21T11:51:36.793
> 
> 标签：c#, .net, c#-2.0, google-search-api

我需要在我的 .NET 2.0 项目中调用 Google 自定义搜索 API。我不能使用[Google Libraries](https://developers.google.com/custom-search/v1/libraries)，因为它们是用 .NET 3.5 编写的。我尝试在 .NET 2.0 中编译它们，但在 LINQ 和 Json.NET 3.5 版本的库中有很大的依赖关系。

我尝试使用 2.0 版本的 Json.NET 库，但无法将 JSON 响应反序列化为我的自定义对象类之一。问题在于反序列化。我可以忽略反序列化中的字段吗？反序列化总是返回错误，因为我无法从 Google 获取代表 JSON 答案的类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:51:18.183

I managed to get it to work. I've used this site: [Generate Class based on JSON](http://json2csharp.com/#) to get the full representation of my JSON in .Net Classes. After that i got an error on deserialization because google is returning this value: "msvalidate.01" and it could not get represented in class for deserialization.

After i decorate with this attribute

```
[JsonProperty("msvalidate.01")]
public string msvalidate; 
```

i managed to get it to work.

# java - Neo4j 1.8.1 ExecutionEngine 构造函数更改

> ID：14438020
> 
> 赞同：0
> 
> 时间：2013-01-21T11:51:44.423
> 
> 标签：java, neo4j

我刚刚从使用 Neo4j 1.8 升级到 1.8.1，并注意到 ExecutionEngine 构造函数合同发生了变化。ExecutionEngine( GraphDatabaseService [)](http://api.neo4j.org/1.8.1/org/neo4j/cypher/javacompat/ExecutionEngine.html#ExecutionEngine%28org.neo4j.graphdb.GraphDatabaseService%29)构造函数不再可用。

这是一个代码片段：

```
import org.neo4j.cypher.CypherException;
import org.neo4j.cypher.ExecutionEngine;
import org.neo4j.cypher.ExecutionResult;
import org.neo4j.graphdb.GraphDatabaseService;

public class CypherQueryExecutionService {
    private final ExecutionEngine executionEngine;

    public CypherQueryExecutionService(GraphDatabaseService 
graphDatabaseService) {
        executionEngine = new ExecutionEngine(graphDatabaseService);
    }
... 
```

POM 提取物：

```
 <dependency>
            <groupId>org.neo4j</groupId>
            <artifactId>neo4j</artifactId>
            <version>1.8.1</version>
        </dependency>

        <dependency>
            <groupId>org.neo4j</groupId>
            <artifactId>neo4j-kernel</artifactId>
            <version>1.8.1</version>
            <type>test-jar</type>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.neo4j.app</groupId>
            <artifactId>neo4j-server</artifactId>
            <version>1.8.1</version>
        </dependency>

        <dependency>
            <groupId>org.neo4j.app</groupId>
            <artifactId>neo4j-server</artifactId>
            <version>1.8.1</version>
            <type>jar</type>
            <classifier>static-web</classifier>
        </dependency> 
```

如果没有快速修复，您能否提供一个正确使用 StringLogger 的示例？在我们的例子中，我们在 SLF4J 上使用 logback。

谢谢，

史蒂文

# scala - 如果值不为空，则添加到列表

> ID：14438021
> 
> 赞同：16
> 
> 时间：2013-01-21T11:51:44.520
> 
> 标签：scala, functional-programming, monads

我有可以返回空值的函数：

```
def func(arg: AnyRef): String = {
...
} 
```

我想将结果添加到列表中，如果它不为空：

```
...
val l = func(o)
if (l != null)
  list :+= l
.... 
```

或者

```
def func(arg: AnyRef): Option[String] = {
...
} 
```

```
...
func(o).filter(_ != null).map(f => list :+= f)
... 
```

但是看起来太重了。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-21T12:11:24.277

您可以简单地将选项附加到列表中。这是因为由于隐式转换， an`Option`可以被视为`Iterable`（空的`None`，只有一个元素） 。`Some``Option.option2Iterable`

因此，对于选项变体（第二版`func`），只需执行以下操作：

```
list ++= func(o) 
```

对于另一个变体（的第一个版本），您可以首先使用（将转换为或用 包装该值）`func`将返回值转换为`func`选项，然后像上面那样做。这使：`Option.apply``null``None``Some`

```
list ++= Option(func(o)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:41:01.530

首先，您应该指出该函数可能/可能不会返回一个值，其中返回值被包装`Some`或`None`返回

```
def func(arg: AnyRef): Option[String] = {
    //  ...
    Some(value) orElse None
} 
```

使用来自 func(0) 的列表，该列表`val list = func(0) collect {case Some(x) => x}`仅采用使用 collect 定义的值。

# objective-c - 使用 ZipArchive Objective-C 压缩带密码的文件

> ID：14438023
> 
> 赞同：0
> 
> 时间：2013-01-21T11:52:11.677
> 
> 标签：objective-c, zip, ziparchive

使用 ZipArchive Objective-C 库压缩受密码保护的文件时出现问题。我的代码如下：

```
ZipArchive * zip = [[ZipArchive alloc] init];
[zip CreateZipFile2: nameOfZip Password: @"hello"];

for (int i = 0; i < [dirContents count]; i++) {
    NSString * pathToFile = @"the path...";

    [zip addFileToZip: percorsoFile newname: @"the name of the file"];
}

[zip CloseZipFile2]; 
```

zip 文件已成功创建，但问题是当我尝试使用默认程序在我的 Mac 上提取它时，它总是显示“密码不正确”。任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:07:31.840

您使用“hello”密码创建生成的文件。这些文件要解压缩使用以下代码。

```
[zip UnzipOpenFile:nameOfZip Password:@"hello"]; 
```

# ninject - NServiceBus 和 Ninject - 访问 NSB 消息属性

> ID：14438024
> 
> 赞同：2
> 
> 时间：2013-01-21T11:52:20.520
> 
> 标签：ninject, nservicebus, multi-tenant

我们将 NServiceBus 和 Ninject 用于多租户 SaaS 应用程序。

当用户访问我们的网站或 API 时，我们可以通过检查 HttpContext Request 对象的主机名、检索有关该帐户的各种设置（其中一个是我们应该连接的数据库）来确定用户连接到哪个帐户和请求的其余部分连接到正确的数据库（进行各种其他检查）。

在我们的 NSB Windows 服务中，我们没有共享上下文的概念，通过它我们可以确定要连接的主机数据库，因此我们在基本命令类上创建了一个属性，用于存储创建命令的帐户/数据库/信息。

当为传入消息构造消息处理程序时，依赖项之一是存储库，该存储库将它应该连接到的数据库的名称作为参数。

如前所述，Ninject 可以为 Web 请求访问 HttpContext 中的正确数据库，但对于 NSB 服务，消息本身包含我们只能在构造处理程序后访问的数据库详细信息，这显然会失败，因为它需要一个参数（即包含在消息中！）以成功构建存储库。鸡肉和鸡蛋:)

这是一个冗长的询问方式......

*   在 Ninject 创建周期期间是否可以访问消息的属性？
*   这感觉像是因为我的架构“错误”而很难解决的难题之一，是这样吗？
*   我想避免将公共属性放在像“SetDatabase”这样的存储库上，因为感觉它很容易被滥用/误解，并对用户数据造成严重破坏。
*   我还考虑过创建一个存储库工厂，Ninject 会使用它，但仍然不确定如何访问传入的消息属性。

提前致谢！

* * *

编辑解决方案

我最终使用了来自 Udi 和 Eben 答案的混合方法。

我为我的 API 消息使用了外出消息修改器，将客户的帐户名称添加到出站消息的标头（来自 HttpContext）。然后，按照 Udi 的建议，在 NSB Windows 服务中，我使用入站修改器来检查标头并提取帐户名称。

我还创建了两个接口实例，按照 Eben 的建议向我的存储库提供连接字符串/帐户详细信息。一种用于 Web 请求，一种 ThreadStatic 类型由传入的 mutator 设置，然后 Ninject 绑定用于 NSB 的 repo 实例化。

我不能将两者都标记为正确，抱歉 Eben！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:22:57.390

你肯定似乎有一点架构问题。

要解决这个问题，一个选项可能是拥有类似 a 的东西`ITenantProvider`，由 a`HttpTenantProvider`和 a实现`ThreadStaticTenantProvider`。对于您的网站，您可以将 http 版本注入到存储库中，它会询问实例，例如`TenantProvider.DatabaseName`（或任何您需要的）。对于端点实现，您可以使用“线程静态”实现。我只是说线程静态，因为您将要从多个线程访问租户提供程序实例，并且可能需要线程特定的状态。但是，无论您决定做什么，都取决于您:)

在消息处理开始时，您可以转换为线程静态版本并调用类似`((TheadStaticTenantProvider)TenantProvider).SetCurrentMessage(theMessage)`. 然后，存储库将通过线程静态租户提供程序从消息中接收所需的数据。

在[Shuttle](http://shuttle.codeplex.com/)中，我们使用处理管道，因此我将创建一个模块，该模块插入到处理接收到的消息的管道中，以便为我在租户提供程序上设置消息。我不太了解 NServiceBus，但可能有类似的东西，您可以在收到消息后挂接到事件中为您设置它。

我希望我有道理:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:58:59.457

您应该考虑使用工作单元或消息修改器挂钩来完成此类工作。更多信息在这里：

[http://support.nservicebus.com/customer/portal/articles/860275-unit-of-work-in-nservicebus](http://support.nservicebus.com/customer/portal/articles/860275-unit-of-work-in-nservicebus)

[http://support.nservicebus.com/customer/portal/articles/860492-pipeline-management-using-message-mutators](http://support.nservicebus.com/customer/portal/articles/860492-pipeline-management-using-message-mutators)

我还建议在您的消息中使用标题来获取此类信息，而不是将其放在基类中。

# opencv - 为什么opencv FREAK提取器会删除这么多关键点，特别是使用ORB检测器

> ID：14438030
> 
> 赞同：18
> 
> 时间：2013-01-21T11:52:31.430
> 
> 标签：opencv, orb, extractor, feature-descriptor, freak

我正在使用 OpenCV 2.4.3 c++ 接口来查找两个图像之间的匹配点。第一次尝试是使用 SURF。唯一的问题是耗时，所以我尝试了新的 FREAK 提取器。使用 SURF 进行检测，使用 FREAK 进行描述，我意识到 FREAK 将关键点的数量减少到几乎检测到的一半，并且结果匹配还不够。这就是原因，我尝试 FAST 来获得更多的关键点。结果：

1.  SURF 检测器，SURF 提取器，BFMatcher crosscheck true，RANSAC：第一个图像 70 个关键点，第二个图像 50 个关键点，200 毫秒。250 毫秒。15 毫秒。15 毫秒。
2.  SURF 检测器，FREAK 提取器，BFMatcher 交叉检查为真，RANSAC：第一个图像 39 个关键点，第二个图像 30 个关键点（在 FREAK 之后），200 毫秒，50 毫秒。, 0 毫秒, 0 毫秒。结果是好的匹配太少了。
3.  FAST 检测器、FREAK 提取器、BFMatcher crosscheck true、RANSAC：120 个关键点、90 个关键点（FREAK 之后的 69 和 48 个关键点）、10 毫秒、450 毫秒、15 毫秒、10 毫秒。

之后，我使用了 ORBFeatureDetector，它获得的关键点数量与 FAST 相同，但在 FREAK 提取器之后，每个图像的结果关键点为 0。难道我做错了什么？ORB 关键点与从 FAST 获得的关键点不同吗？也许我可以为此提出另一个问题，但我有最后一个问题。什么是检测器/提取器的最佳组合，以获得与我使用 SURF 的第一次实验相同的结果，但减少了处理时间？因为当我获得更多关键点时，提取器部分也更耗时，尽管我使用 FREAK。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-06T12:25:57.073

如果 FREAK 无法为其生成描述符，则 FREAK 会删除点，这种情况很多时候发生在图像的边界，因为如果它超出边界图像，它就无法生成描述符。我通过在提取之前应用 ROI 来避免这个问题。

我也将 FAST 与 FREAK 结合使用，我得到了最好的结果，但我仍然有减少提取时间的问题，这对我来说太高了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-02T20:57:59.233

实际上，您使用了参数 cross check = true。这也是你很多积分被淘汰的原因。从计算的角度来看，这个参数如果为真，则代价高昂。它用于避免在匹配过程中不完全匹配的描述符对。

如果您有两组描述符 D1 和 D2，则此参数仅允许在 D1-> D2 和 D2->D1 匹配方向上通常匹配的对。

那么，这一切都取决于您的应用程序，也许您不需要那么高的匹配精度......

最好的祝福。

亚历克斯

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-03-24T11:07:38.503

除了删除边界点，正如 Jav_Rock 所建议的那样，点的巨大（不一致？！）减少实际上取决于您存储在 keyPoint 中的大小参数。即使您将 scaleNormalized 设置为 false，如果大小参数的浮点值接近零，FREAK 也会丢弃此关键点。（但我似乎无法弄清楚为什么，因为 keyPoint 的大小参数仅在 scaleNormalized 为真时使用：[source](https://github.com/kikohs/freak/blob/master/src/freak.cpp#L332)）

因此，如果您不使用 scaleNormalization，请务必将 size 参数设置为大于零（例如一）的值。
并将其作为单位“像素大小”的值（使用 scaleNormalization 时）。
顺便提一句。[默认情况下](https://github.com/kikohs/freak/blob/master/src/freak.cpp#L73)，最小关键点大小为 7 。

希望这可以帮助...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-26T14:52:44.317

FAST 只是一个关键点检测器（没有描述符）。如果您结合 FAST 和用于描述（多尺度）BRIEF，您将获得 ORB。

# iphone - 将图像添加到 HTML 字符串 iphone

> ID：14438039
> 
> 赞同：4
> 
> 时间：2013-01-21T11:53:13.717
> 
> 标签：iphone, ios, objective-c

如何将我的 Xcode 项目中存在的图像添加到 HTML 字符串中以打印输出。

我尝试了以下代码，但图像不打印，而是在 PDF 中出现一个空白框。

```
-(NSString *)prepareHTMLText {
    NSMutableString *body = [NSMutableString stringWithString:@"<!DOCTYPE html><html><body>"];

        [body appendString:@"<h2>Ingredients</h2>"];

     [body appendFormat:@"<p>%@ %@</p>", @"text", @"TEStText"];

   // [body appendFormat:@"<img src=\"%@\" alt=\"\" height=\"100\" width=\"100\"/>",[[NSBundle mainBundle] pathForResource:@"edit" ofType:@"png"]];

    [body appendFormat:@"<img src=\"%@\"/>",[UIImage imageNamed:@"edit.png"]];

    [body appendString:@"</body></html>"];
    return body;
} 
```

我得到了如上所述的输出 ![在此处输入图像描述](../Images/3fea256418e206df983b2286cd4602bd.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:22:08.287

您需要一个 URL，而不是文件路径或图像对象本身。尝试类似：

```
NSString *fileURLString = [[[NSBundle mainBundle] URLForResource:@"edit" withExtension:@"png"] absoluteString];
[body appendFormat:@"<img src=\"%@\"/>", fileURLString]; 
```

# javascript - 其他 .js 文件无法访问 jQuery

> ID：14438044
> 
> 赞同：1
> 
> 时间：2013-01-21T11:53:32.987
> 
> 标签：javascript, google-chrome-extension

这是一个html页面：

```
 <html>
<head>
    <script src="http://code.jquery.com/jquery-1.9.0.min.js" type="text/javascript"></script>
</head>
<body>
    <script src="background.js" type="text/javascript"></script>
</body>
</html> 
```

这是背景.js：

```
alert("Alert1!");
var test = jQuery.trim(" Words and / { objects & things");
alert("Alert2!"); 
```

Alert1 有效，但 alert2 从不播放。如果我删除 jQuery，那么它可以工作。我已经在标题和正文中尝试了 background.js 文件。我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T11:56:46.600

`jquery.js`从[http://code.jquery.com/jquery-1.9.0.min.js](http://code.jquery.com/jquery-1.9.0.min.js)下载并将其内联到您的扩展目录并内联引用它，如下所示。

# 根本原因

Chrome 扩展程序不支持对文件的外部引用。

# 工作版本

```
<html>
<head>
    <script src="jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="background.js" type="text/javascript"></script>
</head>
<body>
</body>
</html> 
```

# 编辑 1

# 工作版本

### 清单.json

将 Jquery 和您的代码都注册到`manifest file`.

```
{
    "name": "Jquery In Background",
    "description": "http://stackoverflow.com/questions/14438044/jquery-cant-be-accessed-by-other-js-file",
    "background": {
        "scripts": [
            "jquery.js",
            "background.js"
        ]
    },
    "version": "1",
    "manifest_version": 2
} 
```

### 背景.js

你的代码和以前一样

```
alert("Alert1!");
var test = jQuery.trim(" Words and / { objects & things");
alert("Alert2!" + test); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:37:42.980

我可以使用以下清单和代码来提醒修剪后的值。

显现

```
{
  "name": "Tester",
  "version": "0.1",
  "manifest_version": 2,
  "background":{
    "page":"background.html",
    "persistent": false
  }
} 
```

背景.html

```
<html>
<head>
</head>
<body>
    <script src="jquery-1.9.0.min.js" type="text/javascript"></script>
    <script src="background.js" type="text/javascript"></script>
</body>
</html> 
```

背景.js

```
var test = jQuery.trim(" Words and / { objects & things");
alert(test); 
```

# javascript - 如何使全屏背景图像大于窗口视图？

> ID：14438045
> 
> 赞同：0
> 
> 时间：2013-01-21T11:53:40.927
> 
> 标签：javascript, jquery, css

我有一个使用此代码的全屏背景网页

```
html, body {
  height: 100%;
  width: 100%;
  padding: 0;
  margin: 0;
}

#background-image{
  z-index: -999;
  min-height: 100%;
  min-width: 1024px;
  width: 100%;
  height: auto;
  position: fixed;
  top: 0;
  left: 0;
  } 
```

这没关系，但我想做的是隐藏图像的 4 个边框并使图像在背景中居中。

看看这张图片来描述我真正需要的东西 [https://dl.dropbox.com/u/7064770/Untitled-1.png](https://dl.dropbox.com/u/7064770/Untitled-1.png)

任何 javascript 代码也被广泛接受

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T11:58:36.347

尝试使用 CSS3`background-size`属性：

```
#background-image{
  background-size:cover;
  z-index: -999;
  min-height: 100%;
  min-width: 1024px;
  width: 100%;
  height: auto;
  position: fixed;
  top: 0;
  left: 0;
  } 
```

# mongodb - Mongodb不会做任何事情

> ID：14438046
> 
> 赞同：3
> 
> 时间：2013-01-21T11:53:42.380
> 
> 标签：mongodb

我不是 mongoDB 专家，我尝试更改 conf 文件以激活身份验证。这最终导致 mongoDB 完全卡住：

*   我的 node.js 应用程序（使用 mongoose）无法连接到 mongo
*   如果我使用 mongo shell 并尝试输入诸如“show dbs”之类的基本内容，我的答案总是如下所示：

> root@*:~# mongo
> 
> MongoDB 外壳版本：1.6.3
> 
> 1 月 21 日星期一 12:46:26 ***警告：没有 utf8 支持的蜘蛛猴构建。考虑使用 utf8 支持重建
> 
> 连接到：测试
> 
> 显示数据库

```
assert failed : listDatabases failed:{
    "assertion" : "unauthorized db:admin lock type:-1 client:127.0.0.1",
    "assertionCode" : 10057,
    "errmsg" : "db assertion failure",
    "ok" : 0
}

Mon Jan 21 12:46:33 uncaught exception: assert failed : listDatabases failed:{
    "assertion" : "unauthorized db:admin lock type:-1 client:127.0.0.1",
    "assertionCode" : 10057,
    "errmsg" : "db assertion failure",
    "ok" : 0 
```

我尝试过的事情：

*   转到 mongo conf 文件以停用身份验证（并重新启动 mongo 甚至我的服务器）

PS：对不起格式，不知道如何使它正确..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:31:25.630

好的，我尝试完全卸载 mongo 并备份所有内容。我实际上是在旧版本的 mongo 上，并了解到还有另一个包（http://docs.mongodb.org/manual/tutorial/install-mongodb-on-ubuntu/）。

我安装了这个，重新创建了我的用户和一切，一切都很好。

# installation - Inno Setup PageDescriptionLabel 相互重叠

> ID：14438047
> 
> 赞同：2
> 
> 时间：2013-01-21T11:53:47.837
> 
> 标签：installation, windows-installer, inno-setup

我最近切换到 Inno Setup，这太棒了！除了在某些事情上遇到麻烦之外，我几乎能够让大部分事情正常工作。

基本上，我正在尝试创建自己的页眉设计，并且试图使页面标题/页面描述透明。但是，它们在页面更改时相互重叠。（请参考图片）。

![http://img703.imageshack.us/img703/6180/88647320.png](../Images/49e152de4aa97a38bb0d6a8318751a92.png)

代码：

```
procedure InheritBoundsRect(ASource, ATarget: TControl);
begin
  ATarget.Left := ASource.Left;
  ATarget.Top := ASource.Top;
  ATarget.Width := ASource.Width;
  ATarget.Height := ASource.Height;
end;

procedure CurPageChanged(CurPageID: Integer);
var
  TD: TLabel;
begin
    TD := TLabel.Create(WizardForm);
    TD.Parent := WizardForm.PageDescriptionLabel.Parent;
    TD.Caption := WizardForm.PageDescriptionLabel.Caption;
    TD.WordWrap := WizardForm.PageDescriptionLabel.WordWrap;
    TD.Transparent := True;
    InheritBoundsRect(WizardForm.PageDescriptionLabel, TD);
    TD.AutoSize := True;
end; 
```

另外，我什至不确定这是否是最好的方法，所以如果有人有任何建议，我很乐意听取他们的意见。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:12:34.473

正如您正确指出的那样，您多次创建标签。更具体地说，每次显示新页面时（每次按下下一步或返回按钮时）。您只需要创建一次标签，最好是在向导表单初始化事件中，如[`InitializeWizard`](http://jrsoftware.org/ishelp/topic_scriptevents.htm#InitializeWizard). 除此之外，您需要在每次页面更改时更改标签的标题。为此，您需要使用该[`CurPageChanged`](http://jrsoftware.org/ishelp/topic_scriptevents.htm#CurPageChanged)事件。因此，要制作透明的页面描述标签（我错过的），您可以使用如下脚本：

```
[Code]
var
  DescLabel: TLabel;

procedure InheritBoundsRect(ASource, ATarget: TControl);
begin
  ATarget.Left := ASource.Left;
  ATarget.Top := ASource.Top;
  ATarget.Width := ASource.Width;
  ATarget.Height := ASource.Height;
end;

procedure InitializeWizard;
begin
  DescLabel := TLabel.Create(WizardForm);
  DescLabel.Parent := WizardForm.PageDescriptionLabel.Parent;  
  DescLabel.WordWrap := WizardForm.PageDescriptionLabel.WordWrap;
  DescLabel.AutoSize := WizardForm.PageDescriptionLabel.AutoSize;
  DescLabel.Transparent := True;
  InheritBoundsRect(WizardForm.PageDescriptionLabel, DescLabel);

  WizardForm.PageDescriptionLabel.Visible := False;
end;

procedure CurPageChanged(CurPageID: Integer);
begin
  DescLabel.Caption := WizardForm.PageDescriptionLabel.Caption;
end; 
```

# jquery - 带有垂直拇指托盘的超大全屏滑块

> ID：14438050
> 
> 赞同：0
> 
> 时间：2013-01-21T11:53:54.647
> 
> 标签：jquery, css, wordpress, slider, supersized

我有 Jquery 超大全屏滑块，默认快门主题作为我的 wordpress 主题滑块。此滑块的默认缩略图容器在屏幕底部是水平的。有没有人知道如何在屏幕右侧垂直制作这个拇指托盘？

超大的演示链接：-[带有水平拇指托盘的演示](http://buildinternet.com/project/supersized/slideshow/3.2/demo.html)

所需结果的演示链接：[带有垂直拇指托盘的演示](http://labs.burntfeathers.com/?theme=village)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:30:03.133

我发现这个基于 jQuery（没有冲突模式）非常有用且完全免费： http: [//www.comslider.com](http://www.comslider.com) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:01:45.473

请参阅以下链接

看第二个演示

[http://www.menucool.com/slider/jquery-slideshow](http://www.menucool.com/slider/jquery-slideshow)

其他参考

[http://evoslider.com/demo3.html](http://evoslider.com/demo3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:12:52.737

在 supersized.shuter.js 中，我找到了负责拇指托盘水平移动的脚本行。

```
/* Thumbnail Mouse Scrub
        ----------------------------*/
        if (api.options.mouse_scrub){
            $(vars.thumb_tray).mousemove(function(e) {
                var containerWidth = $(vars.thumb_tray).width(),
                    listWidth = $(vars.thumb_list).width();
                if (listWidth > containerWidth){
                    var mousePos = 1,
                        diff = e.pageX - mousePos;
                    if (diff > 10 || diff < -10) {
                        mousePos = e.pageX;
                        newX = (containerWidth - listWidth) * (e.pageX/containerWidth);
                        diff = parseInt(Math.abs(parseInt($(vars.thumb_list).css('left'))-newX )).toFixed(0);
                        $(vars.thumb_list).stop().animate({'left':newX}, {duration:diff*3, easing:'easeOutExpo'});
                    }
                }
            });
        } 
```

随着 suersized-shutter.css 的一些变化，我得到了包含缩略图的垂直拇指托盘。但是在这个垂直托盘中，我的拇指水平移动并隐藏而不是随着垂直拇指托盘高度移动。因此，如果您熟悉超大滑块的自定义和设置，建议我进行适当的自定义。

# jquery - 发布和更改页面

> ID：14438052
> 
> 赞同：0
> 
> 时间：2013-01-21T11:54:00.597
> 
> 标签：jquery, ajax, post

如何在没有**html**表单的情况下将参数发布到页面并调用目标页面。

我有这样的链接

```
<a href="#" class="post">Post</a> 
```

**想用jQuery**发布一些信息

 **```
$('a.post').on('click', function() {    
$.ajax({
 'url'  : 'test.php',
 'type' : 'POST',
 'data' : {}
        }); 
}); 
```

该解决方案有效，我可以发布数据，但我无法转到目标页面（'test.php'）。我想转到 test.php 并发布数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:59:27.807

为什么你不能在这种情况下使用锚来导航？它似乎达到了你的既定目标。

```
<a href="test.php?param1=a" class="post">Post</a> 
```

或者，如果您确实需要发布帖子，请使用以下表格：

```
<form action="test.php" method="post">
  ...
</form> 
```**

# javascript - 用javascript检测损坏的图像不起作用

> ID：14438054
> 
> 赞同：0
> 
> 时间：2013-01-21T11:54:07.713
> 
> 标签：javascript, jquery, image

我已经尝试了许多使用 javascript 来检测损坏的图像的解决方案，但它似乎不起作用。知道我做错了什么吗？

从此处的下拉框中选择“jquery”以查看损坏的图像：-

[http://www.api.jonathanlyon.com/getpocket/view.html](http://www.api.jonathanlyon.com/getpocket/view.html)

该网站的代码在这里： -

```
 <!doctype html>
<html>
<head>
    <meta charset=utf-8>
    <title>Insights Lab</title>
<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>  
    <style>
    ul li { color: red;}
    .emphasis { color: green;}
    .code {color: #3387B5}
    body { font-family: 'Roboto Condensed', sans-serif; }
p { font-size: 14px; color:#999; }
h2 { font-size: 18px; 
color:#666;
}
.view {
  bottom: 10;
  height: 16px;
  position: absolute;
}
    #art {
      position: relative;
    width:220px;
    border: 1px solid #999;
    float:left;
    margin-right:10px;
    padding:5px;
    height:300px;
    margin-bottom:8px;
    background-color: #EEEEEE;
    }
    </style>
<script language="JavaScript" type="text/javascript">
function onImgErrorSmall(source)
{
source.src = "http://www.forbes.com/favicon.ico";
// disable onerror to prevent endless loop
source.onerror = "";
return true;
}

function onImgErrorLarge(source)
{
source.src = "http://www.forbes.com/favicon.ico";
// disable onerror to prevent endless loop
source.onerror = "";
return true;
}
</script>
</head>
<body>

<?php

function baseurl($url) {

// you can add more to it if you want
$urlMap = array('com', 'co.uk','it','org','net','ca','io','me','edu','ac.uk','info','au');

$host = "";
//$url = "http://www.google.co.uk";

$urlData = parse_url($url);
$hostData = explode('.', $urlData['host']);
$hostData = array_reverse($hostData);

if(array_search($hostData[1] . '.' . $hostData[0], $urlMap) !== FALSE) {
  $host = $hostData[2] . '.' . $hostData[1] . '.' . $hostData[0];
} elseif(array_search($hostData[0], $urlMap) !== FALSE) {
  $host = $hostData[1] . '.' . $hostData[0];
}

return $host;

}
function highlight($text, $words) {
    preg_match_all('~\w+~', $words, $m);
    if(!$m)
        return $text;
    $re = '~\\b(' . implode('|', $m[0]) . ')\\b~i';
    return preg_replace($re, '<span class="code">$0</span>', $text);
}

$q=$_GET["q"];

$con = mysql_connect('mysql.site.com','un','pw');
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("getpocket", $con);

$sql="SELECT * FROM `articles` WHERE `given_title` like '%".$q."%' or `excerpt` like '%".$q."%' order by `time_added` desc";

$result = mysql_query($sql);

while($row = mysql_fetch_array($result))
  {
  $tit = highlight($row['given_title'], $q);
  $exc = highlight($row['excerpt'], $q);
  $url = $row['resolved_url'];
  ?> 
    <div id = "art">
    <h2><?php echo $tit;?></h2>
    <p><?php echo $exc;?></p>

    <div class = "view">

    <a href ="<?php echo $url;?>" target='_blank'><img src = "http://<?php echo baseurl($url);?>/favicon.ico" height="16" width="16" onerror="onImgErrorSmall(this)"></a>
    </div>
    </div>
<?php
}
mysql_close($con);
?> 

</body>
</html> 
```

任何想法我做错了什么？

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:20:30.493

在前面加上这个`</body>`

```
<script>
    function onImgErrorLarge(orig_img) {
        var img = new Image();

        img.src =  orig_img.src;

        img.onerror = function() {
            orig_img.src = 'other source';
            //alert('Img not found');
        };
    }

function showUser(str) {
    if (str=="") {
        document.getElementById("txtHint").innerHTML="";
        return;
    }
    if (window.XMLHttpRequest)  {// code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();
    } else {// code for IE6, IE5
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }

    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)  {
            document.getElementById("txtHint").innerHTML=xmlhttp.responseText;

            var imgs = document.getElementsByTagName('img');

            for(var i = 0; i < imgs.length; i++) 
               onImgErrorLarge(imgs[i]);
        }
    }
    xmlhttp.open("GET","getarticles.php?q="+str,true);
    xmlhttp.send();
}

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-18T05:34:30.930

您可以使用[.error()](http://api.jquery.com/error/) API 来检测损坏的图像。

```
jQuery('img').error(function() {
        //Do stuff if broken image found
    }); 
```

本文还将帮助您： [使用 jQuery 删除损坏的图像](http://www.levihackwith.com/automatically-remove-broken-images-from-the-dom-using-jquery/)

# sql - 防止任何表上的意外更新/删除

> ID：14438055
> 
> 赞同：5
> 
> 时间：2013-01-21T11:54:07.937
> 
> 标签：sql, sql-server, triggers

我有好几次意外更新生产表的所有记录。注意力不集中等等...

我听说 MySQL 是一个编译/运行时开关，以防止此类事故。就像，如果我会做一个

```
UPDATE Table SET Field=0 
```

由于缺少 WHERE 子句，这不会编译/运行。如果你*真的*想全部更新，你可以

```
UPDATE Table SET Field=0 WHERE 42=42 
```

对 MS SQL 有什么想法吗？

我在网上找到了一些关于触发器的答案。我想那会有点贵。这意味着我必须将触发器放在每个必要的表上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T22:07:01.457

如果您尝试为每个人设置此设置，您可以通过打开 IMPLICIT_TRANSACTIONS 来关闭 SQL Server 的自动提交功能。[见这里](http://suneethasdiary.wordpress.com/tag/disabling-auto-commit-mode-in-sql-server-management-studio/)。

如果您只关心您，则上述内容也可以在您的会话中使用`SET IMPLICIT_TRANSACTIONS ON`。然后，您必须实际调用 COMMIT 以使任何东西粘住。[见这里](http://msdn.microsoft.com/en-us/library/ms187807.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:40:41.950

在这种情况下，您始终可以在发出命令之前启动事务，但不要`COMMIT`在末尾添加 a。这样您就可以验证查询是否具有预期的效果，如果是，请手动发出`COMMIT`. 如果您犯了错误，只需发出`ROLLBACK`.

您还可以向表中添加触发器以防止发生 INSERTS 或 UPDATES，但这会影响所有人，而不仅仅是您。

最重要的是，您永远不应该在生产系统上运行未经测试的查询；) 改用数据库的快照副本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T12:46:01.510

除了别人说的（MySQL安全更新模式，限制生产，先在开发服务器上测试），训练自己在SQL窗口中编写这样的更新语句并不难。

```
update
set
where 
```

然后回溯到顶部，并填写详细信息。这可以防止您省略 WHERE 子句，但不会阻止您编写错误的 WHERE 子句。我现在一直这样做，即使我在本地机器上的 SQL 窗口中编写 SQL，错误更新的惩罚为零。

最好的办法可能是在您选择的文本编辑器的~~emacs~~中编写您的 SQL ，并对其进行编程以将“UPDATE”扩展为带有 WHERE 子句的部分语句。

在有人问之前，我也写了这样复杂的 WHERE 子句。

```
where () 
```

其次是

```
where (() or ()) 
```

然后由

```
where ((() and ()) or ()) 
```

然后我回去填写条件。

几年前，当我不得不用 C 编写大量代码时，我养成了这个习惯。它源于训练自己编写这样的“if”语句。省略括号和大括号导致其他人很头疼，所以我消除了这种可能性。

```
if () {
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-22T03:20:26.510

如何养成始终使用的习惯：

```
UPDATE TOP (2) dbo.table set name = etc 
```

假设您知道您只想更新 1 行。如果您返回“受影响的 2 行”，您就知道您打错了，但至少您还没有破坏整个表格。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T12:04:47.510

正如之前所说的其他良好做法：不允许访问 prod db，不要在没有 where 的情况下执行更新；我为他们添加了使用不同的用户和安全策略。保持良好的日志，以便您可以恢复它以防万一。整个表的更新，取决于它的大小，可能会锁定整个表！

# jqgrid - 如何根据列中的值更改 JQGrid 中的行颜色

> ID：14438058
> 
> 赞同：5
> 
> 时间：2013-01-21T11:54:11.207
> 
> 标签：jqgrid

我在我的应用程序中使用 JQGrid。

在这里，我想根据列中的值更改 JqGrid 行的颜色。

我可以更改列的颜色，但不能更改行的背景颜色。

这是我用来更改行颜色的代码...

```
loadComplete: function (data) {
    //RETRIEVE COLUMN INDEX : ISPRINTED
    var isPrintColIndex = getGridColumnIndex(jQuery("#list10_d"), 'isPrinted');

    //CHANGE COLOR OF PRINTED ARTICLES
    //NOTE : JSON FORMATs ARE DIFFERENT SO ...HERE WE ARE ADDING CONDITION
    if (data != null && data.rows != null) {
        for (var index = 0; index < data.rows.length; index++) {

            if (typeof (data.rows[index].id) === 'undefined') {
                //LOAD BY JQGRID API ITSELF
                if (data.rows[index].isPrinted == 'NO') {
                    if (data.rows[index].isPrinted == 'NO') {
                        jQuery("#list10_d").jqGrid(
                            'setCell', data.rows[index]._id_, "articleid",
                            "", {
                            'background-color': 'red'
                        });
                    }
                }
            } else {
                ///FOR FIRST LOAD : LOAD BY JSON CALL
                if (data.rows[index].cell[isPrintColIndex] == 'NO') {
                    jQuery("#list10_d").jqGrid(
                        'setCell', data.rows[index].id, "articleid", "", { 'background-color': 'red' });
                }
            }
        }
    }
} 
```

谁能建议我更改上面的代码所以我可以更改行的背景颜色？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T13:12:16.250

行的颜色（背景颜色或文本颜色）可以通过在选定元素（行）上分配附加`style`或属性来定义。jqGrid允许*在填充网格主体期间*执行此操作。因此，使用将使您获得最佳性能。您应该使用来查看性能改进。`class``<tr>``rowattr`*`rowattr``gridview: true`*

 *[答案](https://stackoverflow.com/a/10531680/315935)提供了您问题的解决方案。

[这里](https://stackoverflow.com/a/6575634/315935)描述的替代方法很慢，应该只在没有`rowattr`实现特性的旧版本的 jqGrid 上使用。要了解为什么使用方式`rowattr`更快，我建议您阅读[答案](https://stackoverflow.com/a/12519858/315935)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:21:23.933

在 - 的里面

```
loadComplete: function (){

    var rowIds = $(grid).jqGrid('getDataIDs');
    for (i = 1; i <= rowIds.length; i++) {//iterate over each row
        rowData = $(grid).jqGrid('getRowData', i);
        //set background style if ColumnValue == true
        if (rowData['ColumnValue'] == 'true') {
            $(grid).jqGrid('setRowData', i, false, "CSSRowSTyleToApply");
        } //if
    } //for
}//loadComplete 
```

这应该做你正在寻找的。如果您想根据行内的值为行着色，您可以只取出该值，因为您已经拥有当前所在的行信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-05T07:24:18.323

上面的解决方案非常接近，但是需要一些非常重要的更改，请使用下面的解决方案，希望您会喜欢！

```
loadComplete: function () {
  var rowIds = $('#YourGridId').jqGrid('getDataIDs');
       for (i = 0; i < rowIds.length; i++) {//iterate over each row
       rowData = $('#YourGridId').jqGrid('getRowData', rowIds[i]);
       //set background style if ColValue === true\
       if (rowData['ColName'] === "ColValue") {
         $('#YourGridId').jqGrid('setRowData', rowIds[i], false, "CSSClass");
       } //if
  } //for
}//loadComplete
```*

# unit-testing - Orchard 中 MVC 项目的单元测试

> ID：14438059
> 
> 赞同：2
> 
> 时间：2013-01-21T11:54:14.080
> 
> 标签：unit-testing, orchardcms

我正在为我的 MVC 应用程序使用 Orchard CMS。我需要为此实施单元测试。任何人都可以帮我提供这个实施指南吗？

问候， 钱达纳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:12:56.787

好的，所以这不是单元测试。我不确定我是否看到了测试 Orchard 数据访问的意义，因为它已经进行了大量测试。相反，您应该测试特定于您的代码的内容，模拟、伪造或存根底层基础设施。在现有的测试中也有很多这样的例子。您还可以查看此模块中的测试示例：[https ://bitbucket.org/bleroy/nwazet.commerce/src/c88a2c033e4f6cc8ee1f619ab149d7f1460e93ba/Nwazet.Commerce.Tests?at=default](https://bitbucket.org/bleroy/nwazet.commerce/src/c88a2c033e4f6cc8ee1f619ab149d7f1460e93ba/Nwazet.Commerce.Tests?at=default)

# php - 为什么这评估为真？

> ID：14438060
> 
> 赞同：1
> 
> 时间：2013-01-21T11:54:18.057
> 
> 标签：php

> **可能重复：**
> [为什么 (0 == 'Hello') 在 PHP 中返回 true？](https://stackoverflow.com/questions/5894350/why-does-0-hello-return-true-in-php)

```
<?php
echo ('names' == 0) ? 1 :0;
?> 
```

评估为 TRUE

如果我添加一个额外的等号，它将起作用，但这是违反直觉的。

```
<?php
echo ('names' === 0) ? 1 :0;
?> 
```

评估为 FALSE

```
<?php
echo ('names' == FALSE) ? 1 :0;
?> 
```

评估为 FALSE

还发现了这一点： [为什么 1234 == '1234 test' 评估为真？](https://stackoverflow.com/questions/12151997/why-does-1234-1234-test-evaluate-to-true?rq=1)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T11:57:33.727

原因是字符串'names'的数值是0，但布尔值是`true`（据我所知，任何不是'0'或类似的非空字符串都相当于`true`PHP）。

# c - 在 ubuntu 中编译 c 程序时出错“time_struct 的存储大小未知”

> ID：14438061
> 
> 赞同：2
> 
> 时间：2013-01-21T11:54:18.327
> 
> 标签：c, ubuntu, compiler-errors

**嗨，我尝试使用 gcc 编译 C 程序，但出现此错误：**

timerc.c：在函数'timer_'中：timerc.c:32:16：错误：'Time_Struct'的存储大小未知

这是程序：

```
#include <sys/types.h>
#if TIME_WITH_SYS_TIME
# include <sys/time.h>
# include <time.h>
#else
# if HAVE_SYS_TIME_H
#  include <sys/time.h>
# else
#  include <time.h>
# endif
#endif
void timer_(long *UnixSysTime)
{
  int dummy;
  struct timeb Time_Struct;
  dummy=ftime(&Time_Struct);
  *UnixSysTime=Time_Struct.time;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:57:29.293

当您使用以下内容声明结构变量时：

```
 struct timeb Time_Struct; 
```

编译器不知道它的定义。因此，它无法为其分配内存。包括定义此结构的头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:50:38.137

添加

```
#include <sys/timeb.h> 
```

在其他包括行之后。

然后编译器**将知道**他的存储大小

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-06T11:10:30.770

在我的系统 ubunt 12.04 LTS 中，位置是 /usr/include/x86_64-linux-gnu/sys 目录。

对于 32 位机器，它的位置是 /usr/include/i386-linux-gnu/sys。

检查 timeb.h 文件以获取有关 struct timeb 等的更多详细信息

# ibm-mobilefirst - Worklight 适配器部署

> ID：14438063
> 
> 赞同：0
> 
> 时间：2013-01-21T11:54:30.330
> 
> 标签：ibm-mobilefirst

我是 IBM Worklight 的新手，现在开始使用适配器，我能够从 Eclipse IDE 运行应用程序，但我需要一些帮助才能在设备（iPAD/平板电脑）中执行相同的应用程序。

我用一个简单的 html 创建了一个 worklight 项目，单击一个按钮，我称为一个 Http Adapter，它只是调用一个 Java 类并返回一个字符串。我已经在 Eclipse 中部署了适配器和移动应用程序。点击`http://localhost:8080/console`后，我可以看到适配器和移动应用程序。单击移动应用程序上的按钮时，它会带来适配器的价值，它工作正常。

我已将该应用程序转换为 xcode 项目并连接我的 iPAD，该 iPAD 识别移动应用程序并将其安装在我的 iPAD 中，当单击移动应用程序中存在的按钮时，不显示来自适配器的值。

如何以及在何处配置适配器？在哪里指定我的适配器安装在某某机器的移动应用程序？请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T10:43:28.787

您的问题出在应用程序描述符中。您无法从设备通过 localhost 访问 Worklight 服务器。您需要为 application-descriptor.xml 提供一个有效的 URL ( `http://<YOUR WROKLIGHT SERVER IP>:<PORT, USUALLY 8080>`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T17:36:55.357

> 如何以及在何处配置适配器？在哪里指定我的适配器安装在某某机器的移动应用程序？请帮我

快速澄清一下：

适配器本身是一个服务器端元素。您不会告诉应用程序本身（在部署时）配置与适配器的连接。但是，您将配置到**Worklight 服务器**的连接。正如 Ravidor 所说，您可能需要调整 Worklight Server。

对于测试， localhost:8080 在同一台测试机器上工作正常，但在移动设备上 localhost 指向移动设备，而不是外部任何东西，所以它实际上是在寻找服务器本身。

将应用程序描述符调整为服务器的ip（或计算机的实际ip地址进行测试）。

然后，使用 invokeProcedure 方法完成的 HTTP 请求将使用应用程序描述符中的服务器地址来调用托管相关适配器的 Worklight Server。

快速示例：

我的测试计算机/服务器的 ip 为 192.168.1.5 将 localhost 的 url 部分更改为 192.168.1.5（端口在 8080 处保持不变）。从那里重建并部署应用程序。当您使用模拟器、桌面浏览器，甚至是连接到网络的真实硬件设备（如 iPad）时，它将连接到托管码头服务器的特定机器和端口。

在苹果设备上，您可以覆盖 iPad 设置 ->（应用名称）中的设置。应该有一个地方可以手动输入新的服务器位置。

希望这能澄清一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:35:34.517

一个小正确：如果应用程序在您的桌面浏览器中运行，它不保证它可以在 iPad 上运行。

通常，桌面浏览器是在测试时运行 Web 服务器的同一台机器。所以在大多数情况下，默认主机名将是“localhost”。

我可以建议您避免在 worklight.properties 和 application-descriptor.xml 中使用“localhost”并使用您的 IP 地址。此外，该 IP 地址应该可以从您的移动设备访问（通过 ping）。防火墙/路由器可能会阻止此类访问，因此请确保您之前正确配置它们！你在 iPad 上运行你的应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T13:43:12.330

如果您的应用程序在控制台中运行？如果是，那么它应该在设备上工作。检查设备上的 wifi 或 Gprs，因为 Worklight 应用程序将使用适配器访问 WL 服务器。所以你需要适当的互联网连接。请提供日志，您可能会错过查看错误

# java - 将 JSF .xhtml 文件映射为无扩展名

> ID：14438068
> 
> 赞同：9
> 
> 时间：2013-01-21T11:55:05.837
> 
> 标签：java, jsf, jsf-2, url-rewriting, facelets

在 JSF 中，我可以将 Faces Servlet 映射到各种 URL 模式。例如到`*.xhtml`。

然而，我想要的是将 Faces Servlet 映射到**无**扩展名。这意味着，如果我的`customers.xhtml`Web 根目录中有一个页面，我想使用`http://example.com/customers`.

我查看了[如何在没有文件扩展名的情况下配置 JSF url 映射的问题？](https://stackoverflow.com/questions/5860004/how-do-i-configure-jsf-url-mappings-without-file-extensions)这在某种程度上有效，但它需要我单独映射我拥有的每个文件（如果我错了，请纠正我）。

如何将所有`.xhtml`文件一次性映射到 Faces Servlet，而无需单独映射它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T12:01:01.750

使用标准方法是不可能的。您基本上需要自制一个映射到的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)`/*`并检查当前请求 URL 是否为无扩展名，如果是，则[`RequestDispatcher#forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)对附加文件扩展名的 URL 执行调用（您知道，转发不会修改当前请求 URL 作为重定向会做）。您还需要一个自定义[视图处理程序](http://docs.oracle.com/javaee/6/api/javax/faces/application/ViewHandler.html)`<h:form>`来为 JSF等生成所需的无扩展 URL `<h:link>`。

或者，您可以使用[PrettyFaces](http://ocpsoft.org/prettyfaces/)或 OmniFaces 的[FacesViews](http://showcase.omnifaces.org/facesviews/ExtensionlessURLs)，这样您就无需重新发明轮子。在 FacesViews 展示页面的底部，您可以找到一些直接指向源代码的简单链接，这可能会给您一些启发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-14T21:34:34.340

现在，有了标准就可以了。JSF 2.3 解决了这个问题。一个例子可以在[这里](https://github.com/readonlynetwork/sandbox/tree/master/jsf-hide-extension)找到。[JSF 发布信息](https://arjan-tijms.omnifaces.org/p/jsf-23.html#1260)

只需`<url-pattern>/pageName</url-pattern>`在 web.xml 中 JSF 的 servlet 映射中使用

```
 <servlet>
      <servlet-name>JSF</servlet-name>
      <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
      <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
      <servlet-name>JSF</servlet-name>
      <!-- suffix -->
      <!-- if someone open /other.xhtml instead of /other -->
      <url-pattern>*.xhtml</url-pattern>

      <url-pattern>/home</url-pattern><!-- it will map to /home.xhtml -->
      <url-pattern>/other</url-pattern><!-- it will map to /other.xhtml -->
    </servlet-mapping> 
```

# xcode - 在 IOS 模拟器中保存与推荐的启动图像大小不同的屏幕截图

> ID：14438069
> 
> 赞同：0
> 
> 时间：2013-01-21T11:55:06.437
> 
> 标签：xcode, image, ipad, ios-simulator, app-launcher

我正在使用 IOS Simlator 的“保存屏幕截图”功能为 iPad 创建启动图像。但是，它在纵向模式下为我提供了 768x1024 的图像尺寸，但推荐尺寸为 768x1004。我在其他模式下也遇到了同样的异常。使用我的图像，我收到警告，但效果很好。如果我从图像上切掉状态栏，它是 768x1004，但在运行时会拉伸到真实状态栏后面。如果我在 Xcode 中选择“在应用程序启动期间隐藏状态栏”，状态栏将永久消失并且根本不会重新出现。我应该做什么？如果启动图像尺寸错误，应用商店会拒绝我的应用吗？正如我所说，它似乎工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T11:59:30.417

值得一提的是，我一直使用 768x1024 默认图像并且从未被拒绝（为此）。

# perl - 在 perl 中处理复杂的哈希

> ID：14438071
> 
> 赞同：2
> 
> 时间：2013-01-21T11:55:10.660
> 
> 标签：perl, hash, hash-of-hashes

我有如下简单的 perl 脚本：

```
#!/usr/bin/perl
use strict;
use Data::Dumper;
my %x;

$x{"a"}="b";
$x{"b"}={'c'=>3,'d'=>4};
$x{"c"}={'e'=>{'f'=>5,'g'=>6},'h'=>{'i'=>7,'j'=>8}};

print Dumper(%x); 
```

这输出我如下：

```
> ./temp.pl
$VAR1 = 'c';
$VAR2 = {
          'e' => {
                   'g' => 6,
                   'f' => 5
                 },
          'h' => {
                   'j' => 8,
                   'i' => 7
                 }
        };
$VAR3 = 'a';
$VAR4 = 'b';
$VAR5 = 'b';
$VAR6 = {
          'c' => 3,
          'd' => 4
        };
, 
```

但我想要的输出是不同的。所以我尝试了下面的代码：

```
#!/usr/bin/perl

use strict;
use Data::Dumper;
my %x;

$x{"a"}="b";
$x{"b"}={'c'=>3,'d'=>4};
$x{"c"}={'e'=>{'f'=>5,'g'=>6},'h'=>{'i'=>7,'j'=>8}};

foreach (keys %x )
{
        if(ref($x{$_}) eq "HASH")
        {
        print Dumper(\%{$x{$_}}).",";
        }
        else
        {
        print $x{$_}.",\n"
        }
} 
```

但这给了我如下输出：

```
> ./temp.pl
$VAR1 = {
          'e' => {
                   'g' => 6,
                   'f' => 5
                 },
          'h' => {
                   'j' => 8,
                   'i' => 7
                 }
        };
,b,
$VAR1 = {
          'c' => 3,
          'd' => 4
        }; 
```

但我需要的是如下。我不需要 VAR1 等，也不`=>`需要在输出中。我只需要键和值，它们之间有一个空格

```
c  {
          'e'  {
                   'g'  6,
                   'f'  5
                 },
          'h'  {
                   'j'  8,
                   'i'  7
                 }
        },
a b,
b  {
          'c'  3,
          'd'  4
        } 
```

所有的 perl 专家，谁能给我正确的方向来打印我需要的输出！

我从 perleone 的建议中得到了我需要的东西。但我也尝试了以下说法：

```
my %y={"one"=>404,"two"=>\%x}; 
```

现在如果我这样做

```
print Dumper(\%y); 
```

它给了我一个输出：

```
> ./temp.pl
{
          'HASH(0x807f08c)' undef
        } 
```

我在这里哪里出错了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:08:52.083

看看[文档](https://metacpan.org/module/Data::Dumper#Configuration-Variables-or-Methods)。使用这些设置：

```
$Data::Dumper::Pair     = ' ';
$Data::Dumper::Sortkeys = 1;
$Data::Dumper::Terse    = 1;

...

print Dumper( \%x ); 
```

# ruby - 尝试为 Windows XP 安装 Ruby Gems 时出现 SocketError

> ID：14438078
> 
> 赞同：1
> 
> 时间：2013-01-21T11:55:50.253
> 
> 标签：ruby, windows-xp

我正在尝试安装`nokogiri`, `selenium-webdriver`，`mechanize`但出现如下错误：

```
ruby 1.9.3p374 (2013-01-15) [i386-mingw32]

C:\Documents and Settings\pp>gem install nokogiri
ERROR:  Could not find a valid gem 'nokogiri' (>= 0) in any repository
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    SocketError: getaddrinfo: No such host is known.  (http://rubygems.org/lates
t_specs.4.8.gz)

C:\Documents and Settings\pp>gem install nokogiri
ERROR:  Could not find a valid gem 'nokogiri' (>= 0) in any repository
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    SocketError: getaddrinfo: No such host is known.  (http://rubygems.org/lates
t_specs.4.8.gz)

C:\Documents and Settings\pp>gem install selenium-webdriver
ERROR:  Could not find a valid gem 'selenium-webdriver' (>= 0) in any repository

ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    SocketError: getaddrinfo: No such host is known.  (http://rubygems.org/lates
t_specs.4.8.gz)

C:\Documents and Settings\pp>gem install selenium
ERROR:  Could not find a valid gem 'selenium' (>= 0) in any repository
ERROR:  While executing gem ... (Gem::RemoteFetcher::FetchError)
    SocketError: getaddrinfo: No such host is known.  (http://rubygems.org/lates
t_specs.4.8.gz) 
```

你能帮我完成它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:23:54.653

您的错误似乎是代理问题，请尝试以下命令

`gem install --http-proxy <your proxy host:port> <your gem name>`

例如。

`gem install --http-proxy http://localhost:8888 selenium-webdriver`

你也可以做

`SET HTTP_PROXY=http://%USER%:%PASSWORD%@%SERVER%:%PORT%`

然后执行你的`gem install`

# java - 创建一个带有摆动布局的简单控制台

> ID：14438079
> 
> 赞同：2
> 
> 时间：2013-01-21T11:55:51.883
> 
> 标签：java, swing

我正在尝试使用摆动布局实现一个简单的“控制台”，我将能够以不同的线条和不同的颜色向每个控制台添加简单的消息。

我已经能够做某事，但我仍然有问题。

我对此进行了 2 次尝试。

1：带网格布局：

> ```
>  summeryGrid = new JPanel(new GridLayout(0, 1));
>     summeryGrid.setBounds(10, 140, 600, 300);
>     summeryGrid.add(createErrorMessage("some error message"));
>     summeryGrid.add(createErrorMessage("some error message1"));
>     summeryGrid.add(createErrorMessage("some error message2")); 
> ```

这实际上工作正常。但我遇到的问题是，如果我没有足够的消息，它们之间就会存在巨大的差距。我确实尝试设置 hgap 和 vgap 但它们在这件事上没有影响。

2：尝试用流式布局。但是由于某种原因，那个该死的可怕布局似乎只能垂直而不是水平地工作。所以这不好，除非我能改变它的布局

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:14:20.653

您可以使用单个 JEditorPane 来显示整个内容。

这是一个非常简单的例子：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.FontMetrics;
import java.util.Date;
import java.util.Random;
import java.util.Timer;
import java.util.TimerTask;

import javax.swing.JEditorPane;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.text.BadLocationException;
import javax.swing.text.Document;
import javax.swing.text.MutableAttributeSet;
import javax.swing.text.SimpleAttributeSet;
import javax.swing.text.StyleConstants;

public class TestConsole {

    private static final String TEXT = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec purus sapien, molestie dapibus feugiat vitae, pharetra lobortis lacus. Proin metus neque, malesuada vel consectetur vel, imperdiet et mauris. Vivamus vel tortor ipsum, ac semper ipsum. Nam semper tellus et purus molestie vestibulum. Aliquam erat volutpat. Nam vulputate facilisis magna id sollicitudin. Donec rutrum lorem sit amet orci lacinia congue. Ut nec nibh ipsum, et ornare tellus. Etiam nisi massa, mollis eu viverra id, luctus sed massa. Donec tincidunt erat vel sapien varius ultricies. Vivamus dui diam, consequat nec facilisis ut, interdum at enim. Vestibulum vestibulum, lorem nec cursus eleifend, purus orci egestas quam, vel sodales sem magna at nibh. Cras id nibh eleifend turpis sollicitudin adipiscing. Nunc aliquet posuere vulputate. Suspendisse id augue ut quam mattis sollicitudin. ";

    private static final int ROWS = 24;
    private static final int COLUMNS = 80;

    private JEditorPane console;

    public void append(final String s, final Color color) {
        if (!SwingUtilities.isEventDispatchThread()) {
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    append(s, color);
                }
            });
            return;
        }
        Document document = console.getDocument();
        MutableAttributeSet sas = new SimpleAttributeSet();
        StyleConstants.setForeground(sas, color);
        try {
            document.insertString(document.getLength(), s, sas);
        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    private void initUI() {
        JFrame frame = new JFrame(TestConsole.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        console = new JEditorPane() {
            @Override
            public Dimension getPreferredSize() {
                Dimension d = super.getPreferredSize();
                FontMetrics fm = getFontMetrics(getFont());
                int colWidth = fm.charWidth('m');
                int rowHeight = fm.getHeight();
                d.width = Math.max(d.width, rowHeight * ROWS);
                d.height = Math.max(d.height, colWidth * COLUMNS);
                return d;
            }
        };
        console.setEditable(false);
        console.setContentType("text/html");
        console.setForeground(Color.WHITE);
        console.setBackground(Color.BLACK);
        console.setFont(new Font("Consolas", Font.PLAIN, 14));
        frame.add(new JScrollPane(console));
        frame.pack();
        frame.setVisible(true);
        Timer t = new Timer();
        t.scheduleAtFixedRate(new TimerTask() {
            Random random = new Random();

            @Override
            public void run() {
                int start = random.nextInt(TEXT.length());
                int size = random.nextInt(TEXT.length() - start);
                append(TEXT.substring(start, start + size) + "\n", new Color(random.nextInt(256), random.nextInt(256), random.nextInt(256)));
            }
        }, new Date(), 1000);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestConsole().initUI();
            }
        });
    }

} 
```

# php - 子网格展开但不显示信息

> ID：14438088
> 
> 赞同：1
> 
> 时间：2013-01-21T11:56:28.317
> 
> 标签：php, oracle, jqgrid

我的网格有点奇怪，不知道为什么。我已经创建了几个子网格，并且在这个网格中从未遇到过问题，但我的出生很困难。主网格的信息显示没有任何问题，但子网格不显示任何内容。

![浏览器画面](../Images/c80edd00eab4744493b7efa8f3217917.png)

也就是说，他甚至成功地为子网格提供了 php json。我试图享受另一个必须工作的子网格，我正在更改 url、字段等，只有当我更改主网格的 url 时，它才能让我显示。为什么有人知道？

```
jQuery("#organismos").jqGrid({
    url: 'model/ministerio/mod_organismo.php',
    colNames:['Cód. Organismo','Data Efetiva','Estado', 'Sigla', 'Designação curta', 'Designação longa', 'Última alteração', 'Alterado pelo utilizador'],
    colModel:[
        {name:'COD_ORG',index:'COD_ORG',width:80, align:'center', editable:true, editrules:{required:true}, editoptions:{size: 5 ,maxlength:4}, formoptions: { elmsuffix: ' *'}},
        {name:'DATA_EFETIVA',index:'DATA_EFETIVA',width:100,align:'center',datefmt: 'Y/M/d', editrules:{date:true},editable:true,editoptions:{ size: 11, maxlength: 10,dataInit: function(element) {$(element).datepicker({dateFormat: date_format, autosize:true})}}, formoptions: { elmsuffix: ' *'}},
        {name:'ESTADO_DTEF',index:'ESTADO_DTEF',width:50, align:'center',edittype:'select', editoptions:{value:{A:'Ativo',I:'Inativo'}}, editable:true, editrules:{required:true}, formoptions: { elmsuffix: ' *'}},
        {name:'SIGLA_ORG',index:'SIGLA_ORG',width:80, align:'center', editable:true, editrules:{required:true}, editoptions:{size: 13 ,maxlength:12}, formoptions: { elmsuffix: ' *'}},
        {name:'DESC_C_ORG',index:'DESC_C_ORG', width:150, align:'center', editable:true, editoptions:{size: 31, maxlength:30}},
        {name:'DESC_L_ORG',index:'DESC_L_ORG', width:300, align:'center', edittype:'textarea' ,editable:true, editrules:{required:true}, editoptions:{size: 31, maxlength:150}, formoptions: { elmsuffix: ' *'}},
        {name:'DATA_ULT_ALT',index:'DATA_ULT_ALT', hidden:true},
        {name:'UTILIZADOR',index:'UTILIZADOR', hidden:true}
    ],
    sortname: 'DATA_EFETIVA',
    caption:"Objetivo do Projeto",
    pager: '#pager1',
    height:'400',
    multiselect: false,
    subGrid: true,
    subGridOptions: { "plusicon" : "ui-icon-triangle-1-e",
                      "minusicon" :"ui-icon-triangle-1-s",
                      "openicon" : "ui-icon-arrowreturn-1-e",
                      "reloadOnExpand" : false,
                      "selectOnExpand" : true },
    subGridRowExpanded: function(subgrid_id, row_id) {
        var subgrid_table_id, pager_id;
        subgrid_table_id = subgrid_id+"_t";
        pager_id = "p_"+subgrid_table_id;
        $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>");
        jQuery("#"+subgrid_table_id).jqGrid({
            url:"model/objetivos/mod_obj_estrategicos.php?idorg="+row_id,
            colNames:['Cód. Obj. Estratégico','Data Efetiva','Estado', 'Designação curta', 'Designação longa', 'Peso', 'Última alteração', 'Alterado pelo utilizador'],
            colModel:[
                {name:'COD_OBJ_EST',index:'COD_OBJ_EST', width:80, align:'center', editable:true, editrules:{required:true}, editoptions:{size: 5 ,maxlength:4}, formoptions: { elmsuffix: ' *'}},
                {name:'DATA_EFETIVA',index:'DATA_EFETIVA',width:100,align:'center',editable:true,editoptions:{ size: 11, maxlength: 10,dataInit: function(element) {$(element).datepicker({dateFormat: date_format, autosize:true})}}, formoptions: { elmsuffix: ' *'}},
                {name:'ESTADO_DTEF',index:'ESTADO_DTEF', width:50, align:'center',edittype:'select', editoptions:{value:{A:'Ativo',I:'Inativo'}}, editable:true, editrules:{required:true}, formoptions: { elmsuffix: ' *'}},
                {name:'DESC_C_OBJ_EST',index:'DESC_C_OBJ_EST', width:100, align:'center' ,editable:true, editrules:{required:true}, editoptions:{size: 31 ,maxlength:30}, formoptions: { elmsuffix: ' *'}},
                {name:'DESC_L_OBJ_EST',index:'DESC_L_OBJ_EST', width:300, align:'center', edittype:'textarea' ,editable:true, editrules:{required:true}, editoptions:{size: 31 ,maxlength:150}, formoptions: { elmsuffix: ' *'}},
                {name:'PESO',index:'PESO', width:50, align:'center',editable:true, editrules:{required:true, number: true}, editoptions:{size: 6 ,maxlength:5}, formoptions: { elmsuffix: ' *'}},
                {name:'DATA_ULT_ALT',index:'DATA_ULT_ALT', hidden:true},
                {name:'UTILIZADOR',index:'UTILIZADOR', hidden:true}
            ],
            rowNum:20,
            pager: pager_id,
            sortorder: "asc",
            editurl:"controller/objetivos/Estrategicos.php?idorg=" +row_id,
            height: '100%',
            autowidth: true
        });
        jQuery("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit:true,add:true,del:true, view:true});
    }
}); 
```

网格 1 中的 JSON 结果：

```
{"page":"1","total":1,"records":"3","rows":[{"id":"1 ","cell":["1 ","2012\/10\/24","Ativo","Ta","funcionar?","OK","2012\/10\/18 13:49:35","1"]},{"id":"21 ","cell":["21 ","2012\/10\/31","Ativo","aa","aaa","oaa","2013\/01\/17 10:59:52","1"]},{"id":"12 ","cell":["12 ","2013\/01\/09","Ativo","TEJO","rio","rio","2013\/01\/03 18:21:40","1"]}]} 
```

当我在网格 1 中选择一行时，从网格 2 生成 JSON：

```
{"page":"1","total":1,"records":"3","rows":[{"id":"AAASwaAAEAAAAC7AAA","cell":["12 ","2013\/01\/03","Ativo","1","1","1","2013\/01\/18 15:00:46","1"]},{"id":"AAASwaAAEAAAAC\/AAA","cell":["3 ","2012\/11\/01","Ativo","Barcelona","Juventus","14.9","2012\/12\/28 14:49:57","1"]},{"id":"AAASwaAAEAAAAC8AAB","cell":["4 ","2012\/12\/24","Ativo","Sim","ok","75.69","2012\/12\/28 14:50:33","1"]}]} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T13:07:46.623

就像我之前在评论中写的那样，问题的原因是`id`. 如果从 ids ( `"1 "`to `"1"`、`"21 "`to`"21"`和`"12 "`to `"12"`) 中删除尾随空格，则原始的[非工作网格](http://www.ok-soft-gmbh.com/jqGrid/UZUMAKI.htm)将[正常工作](http://www.ok-soft-gmbh.com/jqGrid/UZUMAKI_.htm)：

![在此处输入图像描述](../Images/c0149857eed623bbec8c0f029e6a23cf.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T23:01:17.653

我不确定我在这里遗漏了什么，但我无法在子网格中找到数据，尽管我在父网格中看到数据并能够扩展它....

```
 var myData =   
  {"page":"1","total":"1","records":"2","rows":[{"id":"591","cell":["07/10/2013","Vas Editor","Workflow Transfer","All","1","591","null","2013-07-10 11:00:22",{"cell":["07/10/2013","Vas Editor","Workflow Transfer","All","1","591","null","2013-07-10 11:00:22",null]}]},{"id":"592","cell":["07/10/2013","Vas Editor","Pending Requirements","All","2","592","null","2013-07-10 11:00:35",{"cell":["07/10/2013","Vas Editor","Pending Requirements","All","2","592","null","2013-07-10 11:00:35",null]}]}],"message":""
  };

    jQuery("#noteTable").jqGrid({
    datatype : "local",     
    colNames : [ 'Date', 'User Name', 'Tag(s)', 'Applicant', 'Note', 'Id','Applicant Id','Date TS','subRow'],
    colModel : [ 
        {name : 'date', index : 'date', width : 120 }, 
        {name : 'userName', index : 'userName', width : 150 }, 
        {name : 'tags', index : 'tags', width : 150 }, 
        {name : 'applicant', index : 'applicant', width : 150, editable : true }, 
        {name : 'note', index : 'note', width : 150 }, 
        {name : 'id', index : 'id', hidden : true } , 
        {name : 'applicantId', index : 'applicantId', hidden : true},
        {name : 'dateTS', index : 'dateTS', hidden : true},
        {name : 'subRow', index : 'subRow', hidden : true}

    ],
    rowNum : 10,
    rowList : [ 10, 20, 30 ],
    pager : '#notesTablePager', // un comment this line to see the pagination bar
    sortname : 'dateTS',
    viewrecords : true,
    sortorder : "desc",
        idPrefix: "m",
subGrid: true,
subGridRowExpanded: function(subgrid_id, row_id) {
var data = $("#noteTable").jqGrid("getLocalRow", row_id);
// we pass two parameters
// subgrid_id is a id of the div tag created within a table
// the row_id is the id of the row
// If we want to pass additional parameters to the url we can use
// the method getRowData(row_id) - which returns associative array in type name-value
// here we can easy construct the following
console.log('row_id****'+row_id);
console.log('searchData *****'+searchData);
    console.log('myData *****'+myData);
    var localRowData1 = $(this).jqGrid('getLocalRow', row_id);
    var localRowData = $("#noteTable").jqGrid('getLocalRow', row_id).cell;
    console.log('localRowData1 ***************'+localRowData1);
    console.log('localRowData ***************'+localRowData);

   var subgrid_table_id;
   var subgridTableId = subgrid_id + "_t"; 
   $("#" + subgrid_id).html("<table id='" + subgridTableId + "'></table>");       
   $("#" + subgridTableId).jqGrid({      
        datatype: "local",            
        data: data.cell,
        colNames : [ 'Date', 'User Name', 'Tag(s)', 'Applicant', 'Note', 'Id','Applicant Id','Date TS' ],
        colModel : [ 
                    {name : 'date', index : 'date', width : 120 }, 
                    {name : 'userName', index : 'userName', width : 150 }, 
                    {name : 'tags', index : 'tags', width : 150 }, 
                    {name : 'applicant', index : 'applicant', width : 150, editable : true }, 
                    {name : 'note', index : 'note', width : 150 }, 
                    {name : 'id', index : 'id', hidden : true } , 
                    {name : 'applicantId', index : 'applicantId', hidden : true},
                    {name : 'dateTS', index : 'dateTS', hidden : true}
    ],
      height: '100%',
      rowNum:20,
      sortname: 'Date',
      sortorder: "desc",
      idPrefix: "s_" + row_id + "_"
   })

}

}).navGrid('#notesTablePager', {add : false, edit : false, del : false});
$("#noteTable").setGridParam({datatype : 'json',loadonce : true});
$("#noteTable")[0].addJSONData(myData); 
$("#noteTable").setGridParam({datatype : 'local'});
$("#noteTable").setGridParam({pagination : true});
$("#notesResultDiv").css("display", "inline");
$("#noteTable").trigger('reloadGrid'); 
```

# java - 如何编写连接到本地文件以发送和接收数据包的客户端套接字流

> ID：14438089
> 
> 赞同：7
> 
> 时间：2013-01-21T11:56:31.420
> 
> 标签：java

如何在 Java 中的本地文件系统客户端上编写此套接字流？

Python 工作：

```
# Echo server program
import socket,os

s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
try:
    os.remove("/tmp/socketname")
except OSError:
    pass
s.bind("/tmp/socketname")
s.listen(1)
conn, addr = s.accept()
while 1:
    data = conn.recv(1024)
    if not data: break
    conn.send(data)
conn.close()

# Echo client program
import socket
s = socket.socket(socket.AF_UNIX, socket.SOCK_STREAM)
s.connect("/tmp/socketname")
s.send('Hello, world')
data = s.recv(1024)
s.close()
print 'Received', repr(data) 
```

爪哇：

```
 /* Client: how do you mention the /tmp/socketname? */
  public static String localsendTCPBytes(String bytes) throws IOException {
    String downloaded = null;
    Socket socket = new Socket("localhost", 58888);
    DataOutputStream upload = new DataOutputStream(socket.getOutputStream());
    BufferedReader download = new BufferedReader(new InputStreamReader(socket.getInputStream()));

    String caps = bytes;
    upload.writeBytes(caps);
    upload.flush();
    String get;
    downloaded = download.readLine();
    System.out.println("[TCP]: downloading: " + downloaded);
    socket.close();
    return downloaded;
  } 
```

**跟进：**

1）导入jar并附加到项目：

[JUnixsocket - 下载 JAR](http://code.google.com/p/junixsocket/downloads/detail?name=junixsocket-1.3-bin.tar.bz2&can=2&q=)

2) Unitest Java 客户端代码

```
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import org.newsclub.net.unix.AFUNIXSocket;
import org.newsclub.net.unix.AFUNIXSocketAddress;
import org.newsclub.net.unix.AFUNIXSocketException;

public class SimpleTestClient {
  public static void main(String[] args) throws IOException {
    final File socketFile = new File("/tmp/socketname");
    AFUNIXSocket sock = AFUNIXSocket.newInstance();
    try {
      sock.connect(new AFUNIXSocketAddress(socketFile));
    } catch (AFUNIXSocketException e) {
      System.out.println("Cannot connect to server. Have you started it?");
      System.out.flush();
      throw e;
    }
    System.out.println("Connected");
    InputStream is = sock.getInputStream();
    OutputStream os = sock.getOutputStream();
    byte[] buf = new byte[128];
    int read = is.read(buf);
    System.out.println("Server says: " + new String(buf, 0, read));
    System.out.println("Replying to server...");
    os.write("Hello Server".getBytes());
    os.flush();
    os.close();
    is.close();
    sock.close();
    System.out.println("End of communication.");
  }
} 
```

3）构建/编译问题：

```
java.lang.UnsatisfiedLinkError: Could not load junixsocket library, tried [/opt/newsclub/lib-native/libjunixsocket-linux-1.6-amd64.so, /opt/newsclub/lib-native/libjunixsocket-linux-1.5-amd64.so, lib:junixsocket-linux-1.6-amd64, lib:junixsocket-linux-1.5-amd64]; please define system property org.newsclub.net.unix.library.path
    at org.newsclub.net.unix.NativeUnixSocket.load(NativeUnixSocket.java:95)
    at org.newsclub.net.unix.NativeUnixSocket.<clinit>(NativeUnixSocket.java:105)
    at org.newsclub.net.unix.AFUNIXSocket.<init>(AFUNIXSocket.java:36)
    at org.newsclub.net.unix.AFUNIXSocket.newInstance(AFUNIXSocket.java:50)
    at unixdomainsocket.SimpleTestClient.main(SimpleTestClient.java:26)
Caused by: java.lang.UnsatisfiedLinkError: no junixsocket-linux-1.5-amd64 in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1681)
    at java.lang.Runtime.loadLibrary0(Runtime.java:840)
    at java.lang.System.loadLibrary(System.java:1047)
    at org.newsclub.net.unix.NativeUnixSocket.load(NativeUnixSocket.java:77)
    ... 4 more
Exception in thread "main" java.lang.NoClassDefFoundError: Could not initialize class org.newsclub.net.unix.NativeUnixSocket
    at org.newsclub.net.unix.AFUNIXSocketImpl.connect(AFUNIXSocketImpl.java:125)
    at org.newsclub.net.unix.AFUNIXSocket.connect(AFUNIXSocket.java:97)
    at org.newsclub.net.unix.AFUNIXSocket.connect(AFUNIXSocket.java:87)
    at unixdomainsocket.SimpleTestClient.main(SimpleTestClient.java:28)
Java Result: 1 
```

4）解决方案：

```
-Djava.library.path=/usr/lib/jni -Djava.library.path=/usr/lib/rxtx -Djava.security.policy=applet.policy -Djava.library.path=/var/tmp/screwyou/jar/lib-native 
```

作品！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-25T07:01:55.020

“junixsocket 是一个 Java/JNI 库，它允许从 Java 中使用 Unix 域套接字（AF_UNIX 套接字）。”

[https://code.google.com/p/junixsocket/](https://code.google.com/p/junixsocket/)

“JUDS（Java Unix 域套接字）提供类来解决 Java 中访问 Unix 域套接字的需求。”

[https://code.google.com/p/juds/](https://code.google.com/p/juds/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-02T00:53:32.993

虽然问题中提到了对我有用的解决方案，但我发现我只需要在 JVM 上设置一个 -D 标志，就像这样，就可以解决问题：

```
-Djava.library.path=/usr/lib/jni 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-21T12:16:12.617

您不能使用 Java JDK 中的 Unix 域套接字。如果你能找到一个，你将需要一个外部包。

# javascript - 如何使用 javascript 更改部分 HTML href 元素

> ID：14438090
> 
> 赞同：1
> 
> 时间：2013-01-21T11:56:37.337
> 
> 标签：javascript, html

我有一个想用 javascript 更改的 href：

```
<a href="http://YOURSUBDOMAIN.foxycart.com/cart?name=ITEMNAME&price=YOURPRICE">Add to Cart</a> 
```

我需要使用 javascript 变量更改 href 的 ITEMNAME 和 YOURPRICE 部分。实现这样的目标的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:00:20.390

您需要更改 href 属性:)

```
<a id="myLink" href="http://YOURSUBDO..." >Add to cart</a>
<script>
    var itemName = "poney";
    var price = 100;
    document.getElementById('myLink").href = "http://YOURSUBDOMAIN.foxycart.com/cart?name=" + itemName + "&price=" + price;
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:03:10.490

```
<script lang='javascript'>  
    function change_url(item_name, item_price)
    {
        new_url = 'http://YOURSUBDOMAIN.foxycart.com/cart?';
        new_url+= 'name='+item_name+'&price='+item_price;
        document.getElementById('your_link').src = new_url;
                    alert('Your new link for the page : '+document.getElementById('your_link').src);
    }
</script>

<a id='your_link' href="http://YOURSUBDOMAIN.foxycart.com/cart?name=ITEMNAME&price=YOURPRICE">Add to Cart</a>
<input type='text' id='test_input' onchange="change_url('New Product',200)" /> 
```

# spring-mvc - 如何使用 Spring MVC 3.1 通过控制器传递表单数据 - Spring MVC 的新手

> ID：14438092
> 
> 赞同：1
> 
> 时间：2013-01-21T11:56:40.533
> 
> 标签：spring-mvc

我是spring的新手，也是spring mvc的新手。我正在使用 3.1 版。另外，目前，我使用的是 Tomcat 7 和 MySQL 5.5。我在数据库表中有数据，可以在网页上显示。现在，我正在尝试将数据从 Web 表单添加到我的数据库，然后在网页上显示该数据。

**当我尝试调用我的 Web 表单时，这是我的运行时错误的一部分：**

** 根本原因是：不支持请求方法“GET” org.springframework.web.HttpRequestMethodNotSupportedException：org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter$ServletHandlerMethodResolver.resolveHandlerMethod(AnnotationMethodHandlerAdapter.java 不支持请求方法“GET” :665) 在 org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:424) 在 org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:431) org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900) 在 org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827) 在 org.springframework.web.servlet.FrameworkServlet。processRequest(FrameworkServlet.java:882) at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778) at javax.servlet.http.HttpServlet.service(HttpServlet.java:621) at javax.servlet.http .HttpServlet.service(HttpServlet.java:722) 在

**这是我的控制器有问题的部分**。请注意，如果我只有 @RequestMapping("/newProfile") 行，而不是其他 @RequestMapping 行，那么我会得到一个网页，但没有显示我的数据，这是我所期望的，因为我没有插入在我的 DAO 层中。

```
 @RequestMapping(value = "/newProfile", method = {RequestMethod.POST})
//@RequestMapping("/newProfile")
public String addNewProfile(@ModelAttribute("profile")Profile profile, ModelMap model) {
      model.addAttribute("firstName", profile.getFirstName());
      model.addAttribute("lastName", profile.getLastName());
      return "newProfileResult";
   } 
```

**这是我的输入网络表单（目前使用 JSP）：**

```
<%@ include file="/WEB-INF/jsp/includes.jsp" %>
<%@ include file="/WEB-INF/jsp/header.jsp" %>

<html>
<head>
    <title>Profile Test</title>
</head>
<body>

<h2>Information</h2>
<form:form method="POST" action="/newProfile">
   <table>
    <tr>
        <td><form:label path="firstName">First Name</form:label></td>
        <td><form:input path="firstName" /></td>
    </tr>
    <tr>
        <td><form:label path="lastName">Last Name</form:label></td>
        <td><form:input path="lastName" /></td>
    </tr>   
    <tr>
        <td colspan="2">
            <input type="submit" value="Submit"/>
        </td>
    </tr>    
</table>  
</form:form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:26:10.800

异常告诉 Spring 找不到 GET 请求的映射。我假设您只在浏览器中输入 /newProfile。这会导致 GET 请求。提供到 GET 请求的映射。您可以通过单独的映射来执行此操作，或者在您编写时省略该方法。

# php - 如何将元素（键=>值）添加到空数组？

> ID：14438094
> 
> 赞同：0
> 
> 时间：2013-01-21T11:56:49.950
> 
> 标签：php

如何使用循环将元素（键=>值）添加到空数组？为 AJAX 响应构建 Json 数据。我试过array_push。但不起作用

```
$arr = array();
foreach ($result as $row) { 
   array_push($arr, $row->key => $row->value);                          
}   
$data['message'] = json_encode($arr); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:00:09.350

```
$arr = array();
foreach ($result as $row) { 
   $arr[$row->key] = $row->value;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:01:12.207

下面是测试代码。

```
$arr = array();

$result = array
(
    'one' => 'One',
    'two' => 'Two',
    'three' => 'Three',
);

foreach ($result as $key => $value)
{
   array_push($arr, array($key => $value));                          
}   
$data['message'] = json_encode($arr);

echo "<pre>";
print_r($data);
```

**结果将是**

```
Array
(
    [message] => [{"one":"One"},{"two":"Two"},{"three":"Three"}]
)
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:06:19.763

`+`标志在 php 中被重载：

```
$arr += $result; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:10:52.933

这很简单

让你拥有数组

```
$name = array("a,b,c,d"); 
```

现在，如果您想将其转换为 key=>value 则只需使用

```
$name = array_values($name); 
```

你完成了。只需通过使用打印它来检查它

```
print_r($name); 
```

# visual-studio - 如何使用 Visual Studio 2012 和 NUnit 命令行工具生成代码覆盖率报告？

> ID：14438099
> 
> 赞同：2
> 
> 时间：2013-01-21T11:57:16.443
> 
> 标签：visual-studio, visual-studio-2012, nunit, code-coverage

使用 Visual Studio 2012 (Ultimate) 和 NUnit 2.6.2，在命令行上运行 NUnit (nunit-console) 时如何分析覆盖率？当 NUnit 在 Visual Studio 中运行测试时，Visual Studio 似乎能够分析覆盖率，但我也需要知道如何在命令行上执行此操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T12:31:34.100

我发现了如何做到这一点。原来有这个命令行实用程序[vstest.console.exe](http://msdn.microsoft.com/en-us/library/vstudio/jj155796.aspx)如果它有正确的适配器，它也能够运行 3rdparty 单元测试。由于我已将 NUnit 测试适配器安装为 Visual Studio 的扩展，因此我必须使用`/UseVsixExtensions`vstest.console.exe 的选项。此外，为了启用代码覆盖率分析，我提供了该`/EnableCodeCoverage`选项。

```
"C:\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\CommonExtensions\Microsoft\TestWindow\vstest.console.exe" /UseVsixExtensions:true /EnableCodeCoverage "C:\Users\Arve\Documents\Visual Studio 2012\Projects\MyApp\MyApp.Tests\bin\Debug\MyApp.Tests.dll" 
```

上面的命令会在“TestResults”目录下生成一个后缀为 .coverage 的文件。

# meteor - Meteor 实时模板和纯 JS 变量

> ID：14438100
> 
> 赞同：2
> 
> 时间：2013-01-21T11:57:18.213
> 
> 标签：meteor

我有以下非常简单的 Meteor 应用程序：

在标签.html

```
<body>
  {{> tags}}
</body>

<template name="tags">
  <input type="button" id="submit" value="Change tag" />
  {{tags}}
</template> 
```

...在 tags.js 中

```
var tags = 1;

if (Meteor.isClient) {
    Template.tags.tags = function() {
        return tags;
    };

    Template.tags.events({
        'click #submit': function() {
            console.log("You pressed the button");
            tags += 1;
        }
    });
} 
```

当我启动应用程序时，我会得到一个按钮和旁边的 var 标记 (1) 的初始值，这是正确的。然后，当我单击按钮时，标签的值会增加（我可以在控制台中检查），但模板不会重新渲染。这是正常行为吗？我不确定我应该期待什么 - 在文档中找不到任何可以告诉我实时模板何时重新渲染的内容。

但是，如果我将 var 更改为使用 Session 对象：

在标签.html

```
<body>
  {{> tags}}
</body>

<template name="tags">
  <input type="button" id="submit" value="Change tag" />
  {{tags}}
</template> 
```

...在 tags.js 中

```
var tags = Session.set("tags", 1);

if (Meteor.isClient) {
    Template.tags.tags = function() {
        return Session.get("tags");
    };

    Template.tags.events({
        'click #submit': function() {
            console.log("You pressed the button");
            Session.set("tags", Session.get("tags") + 1);
        }
    });
} 
```

...一切正常。

谁能阐明更多？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:32:43.940

这很正常。相关文档在[这里](http://docs.meteor.com/#reactivity)：

> 可以触发更改的反应性数据源是：
> 
> *   会话变量
> *   集合上的数据库查询
> *   流星状态
> *   流星用户
> *   Meteor.userId
> *   Meteor.loggingIn

# python - 使用 os.system 命令执行时如何将 python 控制台输出重定向到 QTextBox？

> ID：14438106
> 
> 赞同：0
> 
> 时间：2013-01-21T11:57:34.400
> 
> 标签：python, windows, perl, pyqt

我想在 python 中使用 QProcess 命令执行 perl 文件。但是当我尝试使用 QProcess.start 命令时它不起作用，但是当我使用 os.system 命令时它会执行。如何在 python 中使用 QProcess 执行 perl 文件以及如何将执行的输出打印重定向到 QTextBox？这是我尝试的一段代码：

这里它没有执行 perl 文件......

```
os.chdir('E:\Jayakanth\python_proj\code\py_files\H264_perl_script')
qprocess = QtCore.QProcess()
qprocess.start('example.pl')
qprocess.waitForFinished(-1)
msg = str(qprocess.readAll())
self.textbrowser.append(msg) 
```

但它是这样工作的：

```
import os
os.system('example.pl') 
```

或者如何将 os.system 执行的 python 控制台输出重定向到 Qtextbox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:38:42.890

考虑到您似乎在 Windows 上，您可能必须在传递给 os.system() 的字符串中提供 Perl 可执行文件的完整路径

> os.system('E:\path\to\perl.exe example.pl');

这是我的猜测。

# nhibernate - 多对多单向

> ID：14438109
> 
> 赞同：1
> 
> 时间：2013-01-21T11:57:41.680
> 
> 标签：nhibernate, fluent-nhibernate, many-to-many

我在用户和调查之间有多对多关系，这种关系是双向的，所以在为 列表添加新调查时`users`，我需要这样做：

```
foreach(User user in users)
{
    survey.Users.Add(user);
    user.Survey.Add(survey);
} 
```

遍历所有用户对我来说似乎有点矫枉过正，因为可能有很多用户。

没有更好的方法吗？是否有可能有一个单向的多对多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:02:48.420

啊，你的问题是你的数据库设计。如果不分解，多对多关系会导致您非常头疼:)。

**解决方案：**创建一个名为 的新表`UserSurvey`，其中包含一个主键，然后是一个`UserID`字段和一个`SurveyID`字段，如下所示：

```
----------------------------------------
| UserSurveyID | PrimaryKey            |
| UserID       | Foreign Key to User   |
| SurveyID     | Foreign key to Survey |
---------------------------------------- 
```

然后您需要做的就是查询该表以获取您需要的内容。

我还要做的可能是在 nHibernate`UserSurvey`类中，放置实际`User`属性和`Survey`属性，以便在您拥有`UserSurvey`对象后为您节省额外的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T19:08:37.263

是的，你可以有一个单向的多对多。你不需要做任何特别的事情来实现这一点，只是不要映射关系的另一端。

如果您需要维护关系的内存表示，那么您需要在执行过程中添加对关系双方的引用。这并不过分，您必须将一组用户与调查相关联，因此在某些时候您必须遍历一组用户并进行关联。

如果要避免加载调查的用户集合，可以在访问之前检查集合是否已初始化：

```
foreach(User user in users)
{
    user.Survey.Add(survey);
    if (NHibernateUtil.IsInitialized(survey.Users)
    {
        survey.Users.Add(user);
    }
} 
```

# oracle - 从没有 ref_cursor 的存储过程中返回行

> ID：14438110
> 
> 赞同：0
> 
> 时间：2013-01-21T11:57:50.530
> 
> 标签：oracle, plsql

我有一个像

```
create procedure Sample(sid out number,sname out varchar2) is
begin
select id,name into sid,sname from emp;
end; 
```

我的结果应该是

```
id      name
------------
1      Sai
5      Hari
8      Nari 
```

我无法获得高于数组类型的结果，我如何才能获得它（没有 ref_cursor 和 ref_cursor）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:32:19.123

“没有 ref_cursor 和 ref_cursor”有点令人困惑。没有和有？

但是您的输出，如果您不允许 REF CURSOR ，则必须是数组输出。

例如：

创建这些类型：

```
create type myemptype as object (id number, name varchar2(200));
/
create type myemptab as table of myemptype;
/ 
```

然后：

```
SQL> create or replace procedure Sample(p_tab  out myemptab) is
  2  begin
  3    p_tab := myemptab();
  4    for r_emp in (select id,name from emp order by id)
  5    loop
  6      p_tab.extend;
  7      p_tab(p_tab.last) := myemptype(r_emp.id, r_emp.name);
  8    end loop;
  9  end;
 10  /

Procedure created.

SQL>
SQL> declare
  2    t_emp  myemptab;
  3  begin
  4    sample(t_emp);
  5    for idx in 1..t_emp.count
  6    loop
  7      dbms_output.put_line(t_emp(idx).id || chr(9) || t_emp(idx).name);
  8    end loop;
  9  end;
 10  /
1       Sai
5       Hari
8       Nari

PL/SQL procedure successfully completed. 
```

或者更好，作为流水线函数：

```
SQL> create or replace function Sample
  2  return myemptab pipelined
  3  is
  4  begin
  5    for r_emp in (select id,name from emp order by id)
  6    loop
  7      pipe row ( myemptype(r_emp.id, r_emp.name) );
  8    end loop;
  9  end;
 10  /

Function created.

SQL> col name format a10
SQL> select * from table(sample);

        ID NAME
---------- ----------
         1 Sai
         5 Hari
         8 Nari 
```

使用标量数组编辑：

```
SQL> create type myempidtab as table of number;
  2  /

Type created.

SQL> create type myempnametab as table of varchar2(20);
  2  /

Type created.

SQL> create or replace procedure Sample(p_id out myempidtab ,p_name out myempnametab) is
  2  begin
  3    p_id := myempidtab();
  4    p_name := myempnametab();
  5    for r_emp in (select id,name from emp order by id)
  6    loop
  7      p_id.extend;
  8      p_name.extend;
  9      p_id(p_id.last) := r_emp.id;
 10      p_name(p_name.last) := r_emp.name;
 11    end loop;
 12  end;
 13  /

Procedure created.

SQL> declare
  2    t_id    myempidtab;
  3    t_name  myempnametab;
  4  begin
  5    sample(t_id, t_name);
  6    for idx in 1..t_id.count
  7    loop
  8      dbms_output.put_line(t_id(idx) || chr(9) || t_name(idx));
  9    end loop;
 10  end;
 11  /
1       Sai
5       Hari
8       Nari

PL/SQL procedure successfully completed.

SQL> 
```

# asp.net - 使用excel互操作将excel单元格作为数字字段

> ID：14438115
> 
> 赞同：0
> 
> 时间：2013-01-21T11:58:00.217
> 
> 标签：asp.net, excel-interop

我正在使用 excel Interop 将数据导出到 excel 中，我想将某个范围设为数字格式。像 D 范围或 E 范围

```
 eg: 112.36 or 400.00 it will be upto two decimal places 
```

在我导出到 excel 后，它应该显示为 400.00 而不是 400。

```
 My code is below,

       try
       {        int column = 0,row = 0;

                //Start Excel and get Application object.
                oXL = new Excel.Application();
                oXL.Visible = false;

                //Get a new workbook.
                oWB = (Excel._Workbook)(oXL.Workbooks.Add(Missing.Value));
                oSheet = (Excel._Worksheet)oWB.ActiveSheet;
                oRng = oSheet.UsedRange;
                object missing = System.Reflection.Missing.Value; 
                for (int k = 1; k <= dt.Columns.Count; k++)
                {
                    oRng.Cells.set_Item(1, k, dt.Columns[k-1].ToString());
                }

                foreach (DataRow r in dt.Rows)
                {
                    row++;
                    column = 0;
                    foreach (DataColumn c in dt.Columns)
                    {
                        oXL.Cells[row + 1, ++column] = r[c.ColumnName];
                    }
                }
                Excel.Range newRange = oSheet.get_Range("D2", "D"+oSheet.UsedRange.Columns.Count);
                newRange.NumberFormat="#,##";
                oWB.SaveAs(@"D:\Test\Report.xls",Excel.XlFileFormat.xlXMLSpreadsheet, missing, missing, false, false, Excel.XlSaveAsAccessMode.xlNoChange,  
                missing, missing, missing, missing, missing);  

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:16:58.057

Try this number format:

```
newRange.NumberFormat = "#.##0,00"; 
```

# git - 将新项目添加到现有的 github 存储库

> ID：14438120
> 
> 赞同：0
> 
> 时间：2013-01-21T11:58:40.730
> 
> 标签：git, github, commit, repository

我正在开发一个客户端-服务器应用程序，我想将两个项目（客户端和服务器）存储在 github 上的同一个 github 存储库中。我在 macOS 上。我使用 Eclipse git 插件为客户端项目创建了一个本地存储库，然后将其提交到 github。它工作得很好。

现在我想将服务器端项目添加到这个 Repo 中，可能在一个新的子文件夹中。这部分是在与客户端部分不同的工作空间上开发的。我尝试使用 Eclipse 共享项目，但它告诉我没有现有的 repo。我认为这是因为系统的两个部分是使用不同的 Eclipse IDE 开发的。

我试图在第一个下创建一个新的 repo，但它变得一团糟，因为 github 无法理解哪个是 master。我正在使用 GitHub 客户端应用程序来管理对远程存储库的提交。

有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T16:09:41.917

它可能不会直接回答您的答案，但我认为这种特殊情况可以通过 Git 的[**submodules**](http://git-scm.com/book/en/Git-Tools-Submodules)等功能来解决。

在这种情况下，无论如何，您需要在某个地方托管两个不同的存储库。但是在子模块的帮助下，你可以告诉 Git 一个 repo 的文件应该位于另一个 repo**的目录树**中。不会造成你描述的混乱！

例如，假设您将项目托管为`github.com/user/Client`和`github.com/user/Server`repos。转到`Client`存储库的文件夹并执行以下操作：

```
git submodule add git@github.com:user/Server.git src/server 
```

这会将具有给定地址的 repo 克隆到您指定的文件夹中（`src/server`在本例中）。

之后，您必须提交更改。虽然添加了很多文件，但commit diff**不会**有很多变化：特殊文件中只有一个简短的记录，说这样的存储库现在是一个子模块。也就是说，`Server`实际上并没有存储在`Client`repo 中的文件，只存储了对它们的引用。这就是 git 子模块的强大之处。

请注意，在那之后，当您在`Client`其他地方克隆您的 repo 时，默认情况下不会获取其子模块。您必须使用`git submodule update --init`来初始化子模块。

另请注意，`Server`对子模块的引用指向它的特定版本。对 repo进行一些更改后，`Server`您可能想要转到`Client`repo，导航到子模块的目录（`src/server`在本示例中）并在repo中进行简单的`git pull`更改并提交更改。`Client`同样，不会有巨大的差异，只会提交对子模块的新**引用。**

作为带有子模块的 repo 的示例，您可以查看我的 Vim 设置目录的 repo：它的[bundle](https://github.com/NIA/dotvim/tree/master/bundle)文件夹中有许多插件，它们都是 git 子模块。GitHub 很好地展示了它们，如果它是 GitHub 托管的，则可以轻松地一键导航到子模块 repo。

*PS 如果这一切与您想要的没有任何共同之处，而您只是想将一个文件夹`Server`添加到 repo `Client`，您可以复制`Server`到客户端**并**通过删除目录中的所有 Git 痕迹`Server`（如果有的话）删除`.git`它。现在您只需拥有一个 repo，提交所有这些更改并继续。这样做的缺点是完全丢失了`Server`回购的历史——在项目的初始阶段这并不是一个很大的痛苦。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:28:51.420

我认为，这不是 git 工作的方式。Git 需要一个存储库的根目录，所有要提交的文件夹和文件都必须在这个目录中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-20T15:05:59.750

使用以下命令克隆您现有的存储库：

`git clone https://github.com/company/our_repo.git`

手动将您的项目文件夹带到所需的位置，即trunk/bin

现在提交，然后使用以下命令推送 repo：

```
git commit -m "message"
git push origin master 
```

# javascript - 如何使用 jquery 动态读取 XML？

> ID：14438123
> 
> 赞同：1
> 
> 时间：2013-01-21T11:58:58.657
> 
> 标签：javascript, jquery, xml, xml-parsing

I know how to read an XML using an ajax request and making use of text() and nodename. But what i want is reading any XML dynamically so that,it automatically reads all the tags and values and can display the XML in the form a tree structure. Suggestions using javascript are also welcome.Thanks

# ruby-on-rails - Rails 3 中 activerecord 模型中的 DSL 配置

> ID：14438126
> 
> 赞同：3
> 
> 时间：2013-01-21T11:59:03.600
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, dsl, rails-activerecord

我想为一些数据库数据构建报告。我通过 activerecord 模型将报告的设置存储在数据库中，但我不希望这样，我想写类似的东西

```
class Department < ActiveRecord::Base
    ...
    report do
        name   "Total Sales by Departments"
        method :name

        report_field do
            name     "Total Sales"
            action   :sum
            relation "Sales"
            method   :spent
        end

        report_field do
            name     "Average Sales"
            action   :avg
            relation "Sales"
            method   :spent
        end
    end
end 
```

有人可以告诉我这是怎么做到的，我应该读什么，也许是一些与我的问题相似的其他事情的例子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:20:58.047

我将从阅读[Class Macros](http://techie.lucaspr.im/creating-class-macros/)开始。

# android - 异步任务花费太长时间来完成这项工作

> ID：14438127
> 
> 赞同：4
> 
> 时间：2013-01-21T11:59:17.740
> 
> 标签：android, android-asynctask, telnet

我需要从设备发送命令，并且`progressdialog`应该在命令完成之前显示进度。为此，我`asynctask`在我的应用程序中使用。但是完成命令需要很长时间。

那么，有没有办法将 asynctask 的优先级设置为最大呢？

任何建议将不胜感激。提前致谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-21T12:07:09.483

那么你可以试试这个：

```
protected Void doInBackground() {
    Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
/* do the work */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-06T06:16:47.163

您还可以定义自己的自定义超时，以防您不想让用户在指定时间之后等待来自 Web 服务的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T11:58:10.097

`THREAD_PRIORITY_BACKGROUND`目前，Android 为所有优先级或更差的线程使用后台线程 cgroup ，`THREAD_PRIORITY_BACKGROUND`为 10，`THREAD_PRIORITY_DEFAULT`为 0，`THREAD_PRIORITY_FOREGROUND`为 -2。

如果您选择`THREAD_PRIORITY_BACKGROUND + THREAD_PRIORITY_MORE_FAVORABLE`（又名 9），您的线程将被从后台 cgroup 中提升 10% 的限制，同时它的重要性不足以经常中断您的用户界面线程。

```
 protected final YourResult doInBackground(YourInputs... yis) {
        Process.setThreadPriority(THREAD_PRIORITY_BACKGROUND + THREAD_PRIORITY_MORE_FAVORABLE);
        ...
    } 
```

但请注意，底层实现可能会为不同的任务、下一个 AsyncTask 或其他任何事情重用相同的 Thread 对象。不过，Android 似乎只是在 doInBackground() 返回后重置了优先级。.

# sql - 如果存在，则使用“和”条件进行内部连接，否则如果不存在

> ID：14438128
> 
> 赞同：-1
> 
> 时间：2013-01-21T11:59:24.350
> 
> 标签：sql, sql-server-2008, tsql, select

我有表“图像”，如果存在，我想获取主图像，如果不存在，则获取表中的第一行。我用这个：

```
SELECT Students.Id, Images.ImagePath
FROM Students INNER JOIN    
     Images 
     ON  Students.Id = Images.StudentId 
     AND (   (Images.IsMain = 1) 
          OR (Images.ImagePath = (
              SELECT TOP(1) ImagePath 
              FROM  Images 
              WHERE StudentId = Students.IdId)))
WHERE Students.Id = @StudentId 
```

如果图像中没有“IsMain”，我只会得到一行，但如果有“IsMain”，我会得到两次。

[http://sqlfiddle.com/#!3/3ade7/1](http://sqlfiddle.com/#!3/3ade7/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:07:08.450

 ~~~~```
SELECT  a.*,
        CASE 
            WHEN b.StudentID IS NULL
            THEN c.ImagePath
            ELSE b.ImagePath
        END AS ImagePath
FROM    Students a
        LEFT JOIN
        (
            SELECT  StudentID, ImagePath
            FROM    Images
            WHERE   IsMain = 1
        ) b ON a.ID = b.StudentID
        LEFT JOIN
        (
            SELECT StudentID, ImagePath,
                    ROW_NUMBER() OVER (PARTITION BY  StudentID 
                                    ORDER BY ImagePath ASC) rn
            FROM    Images
        ) c ON c.rn = 1 AND
                a.ID = c.StudentID 
```

*   [SQLFiddle 演示（*带 IsMain*）](http://sqlfiddle.com/#!3/b5e2d/1)
*   [SQLFiddle 演示（*没有 IsMain*）](http://sqlfiddle.com/#!3/243c3/1)~~  ~~**更新**

更好的一个，

```
SELECT  a.*,
        c.ImagePath
FROM    Students a
        LEFT JOIN
        (
            SELECT StudentID, ImagePath,
                    ROW_NUMBER() OVER (PARTITION BY  StudentID 
                                    ORDER BY IsMain DESC) rn
            FROM    Images
        ) c ON  c.rn = 1 AND
                a.ID = c.StudentID
-- WHERE    a.ID = 1   -- remove this if you want for specific Student 
```

*   [SQLFiddle 演示（*带 IsMain*）](http://sqlfiddle.com/#!3/b5e2d/6)
*   [SQLFiddle 演示（*没有 IsMain*）](http://sqlfiddle.com/#!3/243c3/4)

如果要求学生在表上**至少有一条记录**`Images`，则更`LEFT JOIN`改为`INNER JOIN`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:06:48.250

您的问题是您选择了 IsMain 图像*和*第一个图像。

以下代码选择第一行，如果存在则为 IsMain 行，否则为顶行。

```
SELECT Students.Id, Images.ImagePath
FROM Students INNER JOIN    
    Images 
    ON  Students.Id = Images.StudentId 
    AND Images.ImagePath = (
        SELECT TOP(1) ImagePath 
        FROM Images 
        WHERE StudentId = Students.Id
        ORDER BY IsMain DESC) -- This line forces the IsMain image to be the top image returned.
WHERE Students.Id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:12:35.583

怎么样，

```
SELECT 
            S.Id, 
            COALESCE(MI.ImagePath, OI.ImagePath) ImagePath
FROM 
            Students S
    LEFT JOIN   
            Images MI 
                ON  S.Id = MI.StudentId AND MI.IsMain = 1
    INNER JOIN
            Images OI
            ( 
              SELECT TOP 1 ImagePath 
              FROM  Images 
              WHERE StudentId = Students.IdId
            )
    WHERE
        Students.Id = @StudentId 
```

您应该在子查询中指定 order by，以便知道将选择哪个其他图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:15:11.670

为什么所有这些查询都如此复杂，我错过了什么吗？就像获得第一行一样简单

```
SELECT top (1) Students.Id, Images.ImagePath
FROM Students INNER JOIN    
     Images 
     ON  Students.Id = Images.StudentId 
WHERE Students.Id = 1
order by case when Images.IsMain = 1  then 1 else 0 end desc 
--order by Images.IsMain = 1 
```~~~~

# c++ - std::string, wstring, u16/32string 澄清

> ID：14438129
> 
> 赞同：13
> 
> 时间：2013-01-21T11:59:26.353
> 
> 标签：c++, string, unicode, std

`std::string`我目前对和之间区别的理解`std::wstring`仅仅是缓冲区的类型；即，`char`vs `wchar_t`，分别。

我还读到大多数（如果不是全部）Linux 发行版`char`用于任何和所有字符串，包括 ASCII 和 UTF，其中 Windows 是`wchar_t`不再使用的主要操作系统。

但是，我还想直接了解更多字符串类型：`u16string`和`u32string`，它们分别是具有 2 字节和 4 字节缓冲区的字符串。

所以，我的问题是：

在具有`sizeof(wchar_t) == 2`, 的平台上`std::wstring`功能等同于`std::u16string`, 以及具有`sizeof(wchar_t) == 4`和`std::u32string`的平台

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-21T12:32:19.863

不同之处在于`char`and的细节是实现定义的，而and`wchar_t`的编码是由 C++11 标准明确定义的。`char16_t``char32_t`

这意味着*可能*`wstring`存储与or相同的数据，但我们不知道是哪一个。并且允许一些奇怪的实现使它们完全不同，因为旧 char 类型的大小和编码没有被标准定义。*`u16string``u32string`*

# multithreading - Matlab - 单核上的多线程

> ID：14438130
> 
> 赞同：0
> 
> 时间：2013-01-21T11:59:27.653
> 
> 标签：multithreading, matlab, parfor

我正在研究由三个函数组成的简单计算程序。

首先 f1() 生成某种数据并将其存储在缓冲区（向量或队列或其他）中。

第二个 f2() 获取该数据并对其进行一些计算并将结果存储在另一个缓冲区中。

第三个函数 f3() 对 f2() 的结果进行可视化（创建绘图、报告等）。

这三个功能需要在单核机器上同时运行。我知道 PARFOR 循环和 matlabpool。但它可以创建最大线程数（工人）= min（8，'机器中的核心数'）。是否有任何解决方案可以在单核机器上的 matlab 中创建几个线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:37:12.110

如我所见，您有几种选择：

1.  制作自己的线程。基本上它只是一个不断调用函数的循环。
2.  一旦相关输入发生变化，使用观察者模式更新结果（实际上也是一个线程 - 但阻止函数重新计算已经评估的输入）
3.  在您的机器上启动几个 matlab 进程并让它们通过某些协议（端口或文件）发送/接收数据。

# c# - Castle Dynamic Proxy 如何在 CreateClassProxyWithTarget 中合并数据

> ID：14438133
> 
> 赞同：0
> 
> 时间：2013-01-21T11:59:29.690
> 
> 标签：c#, castle-dynamicproxy

是否可以使用 Castle Dynamic Proxy 将代理功能添加到已生成且非空的对象？

我试过这个：

```
Dog _myDog=new Dog();
_myDog.Name="Fuffy";

var _proxyDog = generator.CreateClassProxyWithTarget<Dog>(_myDog, ProxyGenerationOptions.Default, new DogInterceptor()); 
```

`_proxyDog`结果作为一个新对象。

现在这只是一个例子，在现实世界的应用程序中，我的对象有 30 多个属性，我想知道我是否可以避免一个一个地复制这些道具！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:52:34.427

是的。唯一的问题：ProxyGenerator 无论如何都需要实例化该类型的对象。此代码实际上在我的项目中正常工作：

```
public static class MongoExtensions
{
    static readonly ProxyGenerator pg = new ProxyGenerator();
    public static MongoCollection GetRetryCollection(this MongoDatabase db, string collectionName, int retryCount = 5, int pauseBetweenRetries = 2000)
    {
        var coll = db.GetCollection(collectionName);
        return (MongoCollection)pg.CreateClassProxyWithTarget(typeof(MongoCollection), coll, new object[] { db, collectionName, coll.Settings }, new RetryingInterceptor { RetryCount = retryCount, PauseBetweenCalls = pauseBetweenRetries });
    }
} 
```

CreateClassProxyWithTarget 的参数是：

*   代理对象的类型，
*   代理实例
*   代理类型的构造函数参数数组。
*   此代理的拦截器。

我无法真正解释为什么它需要对象的构造函数参数，但是这段代码对我来说可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T16:07:58.590

我有同样的问题，所以使用 vlad 的建议这对我有用：

```
var _proxyDog = generator.CreateClassProxyWithTarget(_myDog.GetType(), _myDog, new DogInterceptor()); 
```

从我所见，创建了一个模拟真实类的新包装器（代理），而包装的类（目标）是我的原始对象。

附加：不，我再次检查并且“目标类型”是正确的，但代理没有反映其中设置的值。我认为这是一个错误；和一个大的。

从第一张图片中，您可以看到满足所有导入的原始类。

图片在这里...遗憾的是，我无法发布图片供您查看，因为看起来我需要“10”的声誉；显然。这有多傻？对不起。

如您所见，代理上的属性既为空又不完整，但“_target”下的原始类仍然完好无损。探测代理属性会导致异常行为，您不需要检查目标，因为您会避开装饰器的目的。

另一张图在这里...

我希望所有属性都在那里完全模仿基础类；或者它们都不是，并且映射是动态的。就目前而言，它对我也不起作用，因为我真正想要访问的一个属性被暴露了一个不正确的值。

科林。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T14:50:04.557

原始问题中的方法很好。但是，您需要确保被包装的类中的所有属性都标记为虚拟。

# javascript - 如何在 action.link 中使用 html 输入标签

> ID：14438138
> 
> 赞同：0
> 
> 时间：2013-01-21T11:59:39.360
> 
> 标签：javascript, asp.net-mvc, razor

我正在尝试制作一个接收某些内容并将其放入新选项卡的 Html.Actionlink()，问题是该按钮是一种输入类型。我有这样的输入， `<input type="submit" class="btnText" id="previewButton2" value="Preview" />` 我在输入中做的事情是在 ActionLink 中做的，但它不起作用，我不知道为什么。`@Html.ActionLink("Preview", "/", new { Id=Model.Id}, new { @class = "btnText", type = "submit", target = "_blank" })`

我如何在 ActionLink 中使用输入标签，或者我应该怎么做才能工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:06:44.807

使用现有代码的唯一选择是使用 Javascript onclick 提交表单（**但这不是很好的做法）**

您真正应该做的是设置`input`按钮样式，使其看起来像您的`a`标签，然后您可以减少使用 JavaScript 来完成您需要的操作。

# windows-phone-7 - 在滚动查看器中添加按钮和网络浏览器

> ID：14438144
> 
> 赞同：0
> 
> 时间：2013-01-21T12:00:06.547
> 
> 标签：windows-phone-7, xaml, windows-phone-8

我有一个包含网络浏览器的滚动查看器，我还需要 `<Button Grid.Row="1"> <Button.Background> <ImageBrush ImageSource="../Images/cont_banner.png" /> </Button.Background> <Button.Content> <HyperlinkButton Content="" NavigateUri="callto:3950" /> </Button.Content> </Button>` 在滚动视图内添加一个按钮，但我不能。

这是我在 scoolviewer 外带有按钮的代码，我怎样才能将它移到里面？

```
 <DataTemplate>

                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="100"/>
                    </Grid.RowDefinitions>

                    <ScrollViewer HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto" Margin="25, 0, 0, 0" Grid.Row="0">
                        <!--<TextBlock Text="{Binding Path=Descrption}" Style="{StaticResource servicesText}" TextWrapping="Wrap" />-->

                        <phone:WebBrowser DataContext="{Binding Path=Descrption}" x:Name="webBrowserHTML" Foreground="Black" Loaded="webBrowserHTML_Loaded" />

                    </ScrollViewer>
                        <!--<Image Source="../Images/cont_banner.png" Width="270"  Grid.Row="1"/>-->

                    <Button Grid.Row="1">
                        <Button.Background>
                            <ImageBrush ImageSource="../Images/cont_banner.png" />
                        </Button.Background>
                        <Button.Content>
                            <HyperlinkButton Content="" NavigateUri="callto:3950" />
                        </Button.Content>
                    </Button>

                </Grid>

            </DataTemplate>
        </controls:Pivot.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:41:16.883

你可以这样做：

```
<ScrollViewer HorizontalScrollBarVisibility="Disabled"
              VerticalScrollBarVisibility="Auto"
              Margin="25, 0, 0, 0">
    <StackPanel>
        <phone:WebBrowser DataContext="{Binding Path=Descrption}"
                          x:Name="webBrowserHTML"
                          Height="400"
                          Foreground="Black"
                          Loaded="webBrowserHTML_Loaded" />

        <Button>
            <Button.Background>
                <ImageBrush ImageSource="../Images/cont_banner.png" />
            </Button.Background>
            <Button.Content>
                <HyperlinkButton Content="" NavigateUri="callto:3950" />
            </Button.Content>
        </Button>
    </StackPanel>
</ScrollViewer> 
```

请注意，**您需要将 Web 浏览器控件的高度显式设置为适当**的值。

您可能还希望将左边距设置为 24 像素（不是 25 像素）以与平台的其余部分保持一致。

**更新**
您必须设置的高度`WebBrowser`才能正常工作。

# html - Outlook 电子邮件的右对齐图像

> ID：14438148
> 
> 赞同：3
> 
> 时间：2013-01-21T12:00:23.717
> 
> 标签：html, css

我使用浮动右对齐我的图像。

```
<div align="left">
   Insight
   <img height="20" style="float:right;" src="https://mydomain/myimage.jpeg">
</div> 
```

我将此 html 作为电子邮件发送。但是，在 Microsoft Outlook 中，图像没有正确对齐，因为我认为 ms Outlook 不支持浮动。

有没有其他方法可以正确对齐它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T13:07:53.413

表格、嵌套表格和更多表格是 Outlook 的关键。

```
<table width="100%" cellspacing="0" cellpadding="0" border="0">
    <tr>
        <td align="right" valign="top">
            <img height="20" src="https://mydomain/myimage.jpeg">
        </td>
    </tr>
</table> 
```

# symfony - 如何添加捆绑包？

> ID：14438151
> 
> 赞同：2
> 
> 时间：2013-01-21T12:00:35.680
> 
> 标签：symfony, bundle

我想添加这个[包](https://github.com/robzienert/CalendarBundle)，但我不知道如何在我的项目中安装它。

我使用 Ubuntu，我的项目位于 var/www/Symfony。有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:35:46.210

你可以在 packagist.org 上找到他的包：[https ://packagist.org/packages/ricktg/calendar-bundle](https://packagist.org/packages/ricktg/calendar-bundle)

只需插入

```
"ricktg/calendar-bundle": "dev-master" 
```

进入您的 web 文件夹中的 composer.json 并运行

```
composer.phar update 
```

在您的控制台中。

# css - 如何使用 Twitter Bootstrap 摆脱这个白框？

> ID：14438154
> 
> 赞同：0
> 
> 时间：2013-01-21T12:00:57.257
> 
> 标签：css, twitter-bootstrap

我正在将 Twitter 引导程序与我目前正在处理的项目一起使用，当我将屏幕缩小一点时，我看到主页眉和页脚周围出现白色边框。

[您可以在也使用 Bootstrap 的Font Awesome](http://fortawesome.github.com/Font-Awesome/)上看到相同的问题- 只需将屏幕缩小一点，您就会在屏幕右侧的页眉和页脚处看到一个白框。

有谁知道是什么原因造成的？！

# node.js - module.export 不工作 CompoundJS？

> ID：14438167
> 
> 赞同：1
> 
> 时间：2013-01-21T12:01:26.253
> 
> 标签：node.js, module, export, mongoose, undefined

我是 CompoundJS 的新手。我正在开发一个示例应用程序。如果遵循以下教程：

[使用猫鼬模型](https://github.com/1602/compound/wiki/Using-Mongoose-Models)

我在 db/schema.js 文件中编写了以下代码：

```
customSchema(function () {

   var mongoose = require('mongoose');

   mongoose.connect('mongodb://localhost/my_database');

   var Schema = mongoose.Schema, ObjectId = Schema.ObjectId;

   module.exports["mongoose"] = mongoose;

   module.exports["model"] = {}

}); 
```

在我的 model.js 文件（person.js）中，我有以下代码：

```
 var Person = mongoose.model('Person', new module.schema());

   model['Person'] = Person; 
```

当我运行**Compound s**时，我得到 ReferenceError: mongoose is not defined。

任何帮助都是不言而喻的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:57:44.783

Wiki 已过时，所有文档目前都可在[http://compoundjs.com 获得](http://compoundjs.com)，我将删除 wiki 以避免混淆。

如果您需要 mongoose 作为 ORM，可以使用此示例：[https ://github.com/anatoliychakkaev/mongoose-compound-example-app](https://github.com/anatoliychakkaev/mongoose-compound-example-app)

# html - CSS内阴影，只有一个角，不是一侧

> ID：14438169
> 
> 赞同：4
> 
> 时间：2013-01-21T12:01:35.903
> 
> 标签：html, css, shadow

我想知道是否可以只在一个角落而不是一侧产生内阴影效果？

大致如下。

```
--------------------------
|                        |
|                        |
|                       -|
|                     ---|
|                  ------|<-shadows
|               ---------|
-------------------------- 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:07:14.837

您可以使阴影渐变...从您的背景颜色到您想要实现的颜色。在您的 css 中使用`inset`使阴影出现在框内并使用[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/) “创建”渐变十六进制代码。

# c# - 加载值后更改下拉列表的值

> ID：14438172
> 
> 赞同：1
> 
> 时间：2013-01-21T12:01:44.483
> 
> 标签：c#, jquery, asp.net-mvc, json

`dropdown`加载其中的所有值后，我需要设置一个值。第一个`dropdown`(District) 值加载第二个`dropdown`(Councils) 的值，并`JSon`调用带来`ID`选择 Councils 中的值`dropdown`，但只能在完全加载后设置：

```
$("#PostalCode").keyup(function () {
    loadPTPostalCode();
});

$("#PostalCodeExtension").keyup(function () {
    loadPTPostalCode();
});

function loadPTPostalCode()
{
    if ($("#PostalCode").val() >= 1000) {
       $.ajax({
            url: '/Address/GetPTPostalCode',
            type: "POST",
            dataType: "json",
            data: { postalCode: $("#PostalCode").val(), postalCodeExtension: $("#PostalCodeExtension").val() },
            success: function (data) {
                 //Set the Distict value and fire the load of the Councils Dropdown
                $("#districtDropdown").val(data.PTCouncil.PTDistrict.Id).change(function () {
                 // I tried to define the Council value after the load of his dropdown changes but no luck
                    $("#councilDropdown").val(data.PTCouncil.Id);
                });
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                //alert(textStatus)
            }
        });
    }
} 
```

编辑：

我还有一个与 District Dropdown 相关的级联：

```
$("#districtDropdown").cascade({
    url: "/Address/ListCouncilByDistrict",
    paramName: "districtId",
    firstOption: 'Selecione o Concelho...',
    childSelect: $("#councilDropdown")
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:03:12.437

不确定我是否完全理解你的问题，但试试这个：

```
 success: function (data) {
                 //Set the Distict value and fire the load of the Councils Dropdown
                $("#districtDropdown").val(data.PTCouncil.PTDistrict.Id).change(function () {
                 // I tried to define the Council value after the load of his dropdown changes but no luck
                    $("#councilDropdown").val(data.PTCouncil.Id);
                }).change();
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:15:51.880

只有在加载后才能在委员会下拉列表中设置值，这可能是通过另一个 Ajax 调用发生的。我假设您有另一个 java 脚本代码，它在改变地区值时加载理事会值（可能在地区下拉列表的更改处理程序中）。因此，您需要在该函数中设置委员会值。大纲将类似于

```
success: function (data) {
  //Set the Distict value
  $("#districtDropdown").val(data.PTCouncil.PTDistrict.Id);
  // store the council id in temp storage (currently using DOM element)
  $("#councilDropdown")[0]["temp_council_id"] = data.PTCouncil.Id;
  // fire loading of council drop-down
  $("#districtDropdown").change(); // this is assuming that change handler has the
                                   // relevant code. If not then invoke that code.
} 
```

现在，在加载理事会下拉列表的代码中，添加代码以从临时存储中设置理事会 ID

```
$("#districtDropdown").change(function() {
   // code to load council drop-down
   ....

   // set the selected council id (if any)
   var councilId = $("#councilDropdown")[0]["temp_council_id"];
   if (councilId) {
       $("#councilDropdown").val(councilId);
       $("#councilDropdown")[0]["temp_council_id"] = null; // clear temp storage
   }
}); 
```

# api - 在 RESTful API 中添加属性

> ID：14438179
> 
> 赞同：0
> 
> 时间：2013-01-21T12:02:18.707
> 
> 标签：api, http, rest

我正在设计一个 HTTP API。

我有一个具有 Balance 属性的 Card 资源，客户可以添加/减去该属性。

起初我认为这应该实现为 PUT，因为它是对资源的一种更新形式，但后来我读到 PUT 是幂等的，但增加一个数量不是幂等的。

由于它不是对象的创建，我想我只能将其称为控制器，例如：

```
POST example.org/card/{card-Id}/AddToBalance

data: value=10 
```

将在余额中增加 10。

**有没有更好的办法？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:13:02.763

Yea, use cases like these are not where REST excels (expressing operations, particularly when they only affect a small subset of an entities data). Your particular case is pretty simple though, you can handle it with a slight change to your verb and endpoint:

```
PUT example.org/card/{card-Id}/balance

{"value" : 100} 
```

Basically read as `"Update the balance of card {id} to 100"`. On the server side you will still need to validate the transaction, and determine wether its a valid add based off the existing value of the balance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:09:40.050

就 REST 原则而言，设计看起来不错。

PUT 动作应该是幂等的。但这取决于你的要求

其他你可以使用**PATCH**的东西，因为你只是在做部分更新而不是完全替换资源。

# regex - 替换字符串中的扩展名

> ID：14438183
> 
> 赞同：-3
> 
> 时间：2013-01-21T12:02:45.137
> 
> 标签：regex, text

我有包含以下字符串的文本文件：

```
coordsys = "Z:/SatData/Satimages/Project/Mtsat/mtsat-2r/nrl/NW-Pacific/Geo-Color/Project/201108170432_DAY1.jp2"
coordsys = "Z:/SatData/Satimages/Project/Mtsat/mtsat-2r/nrl/NE-Pacific/Geo-Color/Project/201208170432_NGT1.jp2"
coordsys = "Z:/SatData/Satimages/Project/kalpana/images/Geo-Color/Project/201108170432_DAY1.jp2"
img = ".jp2" 
```

我只需要在以“coordsys”开头的字符串中将扩展名从 jp2 更改为 img，而不是其他任何字符串。例如 img = ".jp2" 应保持 img = ".jp2"，但所有其他字符串应变为：

```
coordsys = "Z:/SatData/Satimages/Project/Mtsat/mtsat-2r/nrl/NW-Pacific/Geo-Color/Project/201108170432_DAY1.img"
coordsys = "Z:/SatData/Satimages/Project/Mtsat/mtsat-2r/nrl/NE-Pacific/Geo-Color/Project/201208170432_NGT1.img"
coordsys = "Z:/SatData/Satimages/Project/kalpana/images/Geo-Color/Project/201108170432_DAY1.img" 
```

我怎么能用正则表达式做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:22:02.600

全部替换`(coordsys)(.*)(\.jp2)`为`$1$2.img`

# javascript - javascript FileReader - 分块解析长文件

> ID：14438187
> 
> 赞同：39
> 
> 时间：2013-01-21T12:02:56.977
> 
> 标签：javascript, html, parsing, filereader

我有很长的文件需要解析。因为它很长，我需要一块一块地做。我试过这个：

```
function parseFile(file){
    var chunkSize = 2000;
    var fileSize = (file.size - 1);

    var foo = function(e){
        console.log(e.target.result);
    };

    for(var i =0; i < fileSize; i += chunkSize)
    {
        (function( fil, start ) {
            var reader = new FileReader();
            var blob = fil.slice(start, chunkSize + 1);
            reader.onload = foo;
            reader.readAsText(blob);
        })( file, i );
    }
} 
```

运行它后，我只看到控制台中的第一个块。如果我将“console.log”更改为 jquery 附加到某个 div，我只会看到该 div 中的第一个块。其他块呢？如何让它发挥作用？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2015-02-04T10:25:07.673

[FileReader](http://www.w3.org/TR/FileAPI/#dfn-filereader)`block` API 是异步的，因此您应该通过调用来处理它。A`for loop`不会这样做，因为它不会在读取下一个块之前等待每次读取完成。这是一种工作方法。

```
function parseFile(file, callback) {
    var fileSize   = file.size;
    var chunkSize  = 64 * 1024; // bytes
    var offset     = 0;
    var self       = this; // we need a reference to the current object
    var chunkReaderBlock = null;

    var readEventHandler = function(evt) {
        if (evt.target.error == null) {
            offset += evt.target.result.length;
            callback(evt.target.result); // callback for handling read chunk
        } else {
            console.log("Read error: " + evt.target.error);
            return;
        }
        if (offset >= fileSize) {
            console.log("Done reading file");
            return;
        }

        // of to the next chunk
        chunkReaderBlock(offset, chunkSize, file);
    }

    chunkReaderBlock = function(_offset, length, _file) {
        var r = new FileReader();
        var blob = _file.slice(_offset, length + _offset);
        r.onload = readEventHandler;
        r.readAsText(blob);
    }

    // now let's start the read with the first block
    chunkReaderBlock(offset, chunkSize, file);
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-06-02T18:35:12.613

您可以利用[Response](https://developer.mozilla.org/en-US/docs/Web/API/Response)（[fetch](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)的一部分）将大多数内容转换为其他任何 blob、文本、json 并获得一个 ReadableStream 可以帮助您以块的形式读取 blob

```
var dest = new WritableStream({
  write (str) {
    console.log(str)
  }
})

var blob = new Blob(['bloby']);

(blob.stream ? blob.stream() : new Response(blob).body)
  // Decode the binary-encoded response to string
  .pipeThrough(new TextDecoderStream())
  .pipeTo(dest)
  .then(() => {
    console.log('done')
  })
```

**旧答案**（WritableStreams pipeTo 和 pipeThrough 之前没有实现）

我想出了一个有趣的想法，它可能非常快，因为它将 blob 转换为 ReadableByteStreamReader 可能也容易得多，因为您不需要处理块大小和偏移量之类的东西，然后在循环中递归地执行所有操作

```
function streamBlob(blob) {
  const reader = new Response(blob).body.getReader()
  const pump = reader => reader.read()
  .then(({ value, done }) => {
    if (done) return
    // uint8array chunk (use TextDecoder to read as text)
    console.log(value)
    return pump(reader)
  })
  return pump(reader)
}

streamBlob(new Blob(['bloby'])).then(() => {
  console.log('done')
})
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-04T14:23:30.023

的第二个参数`slice`实际上是结束字节。您的代码应类似于：

```
 function parseFile(file){
    var chunkSize = 2000;
    var fileSize = (file.size - 1);

    var foo = function(e){
        console.log(e.target.result);
    };

    for(var i =0; i < fileSize; i += chunkSize) {
        (function( fil, start ) {
            var reader = new FileReader();
            var blob = fil.slice(start, chunkSize + start);
            reader.onload = foo;
            reader.readAsText(blob);
        })(file, i);
    }
} 
```

或者您可以使用它[`BlobReader`](https://github.com/mgechev/blobreader)来简化界面：

```
BlobReader(blob)
.readText(function (text) {
  console.log('The text in the blob is', text);
}); 
```

更多信息：

*   [自述文件.md](https://github.com/mgechev/blobreader/blob/master/README.md)
*   [文档](https://github.com/mgechev/blobreader/blob/master/docs/README.md)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-13T22:26:30.750

在类中修改@alediaferia 答案（[此处为打字稿版本](http://www.typescriptlang.org/play/#src=class%20FileStreamer%20%7B%0A%20%20private%20offset%3A%20number%20%3D%200%3B%0A%20%20private%20readonly%20defaultChunkSize%20%3D%2064%20*%201024%3B%20%2F%2F%20bytes%0A%0A%0A%20%20constructor(private%20file%3A%20File)%20%7B%0A%20%20%20%20this.rewind()%3B%0A%20%20%7D%0A%0A%20%20public%20rewind()%3A%20void%20%7B%0A%20%20%20%20this.offset%20%3D%200%3B%0A%20%20%7D%0A%0A%20%20public%20isEndOfFile()%3A%20boolean%20%7B%0A%20%20%20%20return%20this.offset%20%3E%3D%20this.getFileSize()%3B%0A%20%20%7D%0A%0A%20%20public%20readBlockAsText(length%3A%20number%20%3D%20this.defaultChunkSize)%20%7B%0A%0A%20%20%20%20const%20fileReader%3A%20FileReader%20%3D%20new%20FileReader()%3B%0A%20%20%20%20const%20blob%3A%20Blob%20%3D%20this.file.slice(this.offset%2C%20this.offset%20%2B%20length)%3B%0A%0A%0A%20%20%20%20return%20new%20Promise%3Cstring%3E((resolve%2C%20reject)%20%3D%3E%20%7B%0A%0A%20%20%20%20%20%20fileReader.onloadend%20%3D%20(event%3A%20ProgressEvent)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20const%20target%3A%20FileReader%20%3D%20(event.target)%20as%20FileReader%3B%0A%20%20%20%20%20%20%20%20if%20(target.error%20%3D%3D%20null)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20result%3A%20string%20%3D%20target.result%3B%0A%20%20%20%20%20%20%20%20%20%20this.offset%20%2B%3D%20result.length%3B%0A%20%20%20%20%20%20%20%20%20%20this.testEndOfFile()%3B%0A%20%20%20%20%20%20%20%20%20%20resolve(result)%3B%0A%20%20%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%20%20reject(target.error)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20fileReader.readAsText(blob)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%0A%20%20private%20testEndOfFile()%3A%20void%20%7B%0A%20%20%20%20if%20(this.isEndOfFile())%20%7B%0A%20%20%20%20%20%20console.log('Done%20reading%20file')%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20private%20getFileSize()%3A%20number%20%7B%0A%20%20%20%20return%20this.file.size%3B%0A%20%20%7D%0A%7D)）并在承诺中返回结果。勇敢的编码人员甚至会将其包装到[异步迭代器](https://github.com/tc39/proposal-async-iteration)中……</p>

```
class FileStreamer {
    constructor(file) {
        this.file = file;
        this.offset = 0;
        this.defaultChunkSize = 64 * 1024; // bytes
        this.rewind();
    }
    rewind() {
        this.offset = 0;
    }
    isEndOfFile() {
        return this.offset >= this.getFileSize();
    }
    readBlockAsText(length = this.defaultChunkSize) {
        const fileReader = new FileReader();
        const blob = this.file.slice(this.offset, this.offset + length);
        return new Promise((resolve, reject) => {
            fileReader.onloadend = (event) => {
                const target = (event.target);
                if (target.error == null) {
                    const result = target.result;
                    this.offset += result.length;
                    this.testEndOfFile();
                    resolve(result);
                }
                else {
                    reject(target.error);
                }
            };
            fileReader.readAsText(blob);
        });
    }
    testEndOfFile() {
        if (this.isEndOfFile()) {
            console.log('Done reading file');
        }
    }
    getFileSize() {
        return this.file.size;
    }
} 
```

在控制台中打印整个文件的示例（在[异步](https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Instructions/async_function)上下文中）

```
const fileStreamer = new FileStreamer(aFile);
while (!fileStreamer.isEndOfFile()) {
  const data = await fileStreamer.readBlockAsText();
  console.log(data);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-09-13T20:43:15.963

使用简单的方法将大文件解析为小块：

```
 //Parse large file in to small chunks
                var parseFile = function (file) {

                        var chunkSize = 1024 * 1024 * 16; //16MB Chunk size
                        var fileSize = file.size;
                        var currentChunk = 1;
                        var totalChunks = Math.ceil((fileSize/chunkSize), chunkSize);

                        while (currentChunk <= totalChunks) {

                            var offset = (currentChunk-1) * chunkSize;
                            var currentFilePart = file.slice(offset, (offset+chunkSize));

                            console.log('Current chunk number is ', currentChunk);
                            console.log('Current chunk data', currentFilePart);

                            currentChunk++;
                        }
                }; 
```

# php - 将文本框保存为变量而不提交

> ID：14438189
> 
> 赞同：-5
> 
> 时间：2013-01-21T12:02:59.193
> 
> 标签：php, html

首先我有这个。

```
<form method="post" action="<? echo $_SERVER['PHP_SELF']; ?>">
<input type="text" name="varenummer" id="varenummer" onkeyup="gethint(this.value)" hidden=true style="display:none">
</form> 
```

然后后来我有了这个

```
if (isset($_POST['tryk'])) {
$pri = mysql_real_escape_string($_POST['pri']);
$sek = mysql_real_escape_string($_POST['sek']);
$dat1 = mysql_real_escape_string($_POST['dat1']);
$dat2 = mysql_real_escape_string($_POST['dat2']);
$dat3 = mysql_real_escape_string($_POST['dat3']);
$dato = $dat1 . "-" . $dat2 . "-" . $dat3;
$tek = mysql_real_escape_string($_POST['tek']);
$id1 = mysql_real_escape_string($_POST['id1']);
$varenummer = mysql_real_escape_string($_POST['varenummer']);

$insert = mysql_query("insert into Servicetxt (ID2, Servicenum, PriServiceTxt,
SekServiceTxt, Teknikker, Dato, Varenum) VALUES ('NULL', '$id1', '$pri', '$sek', '$tek',
'$dato', '$varenummer')")or die(mysql_error());    
} 
```

问题是，提交按钮“tryk”被放置在 ajax 页面上。如何在 isset($_POST['tryk']) 之前将 textbox(varenummer) 的值保存为 php 变量，而无需按下任何按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:14:56.440

PHP 是服务器端编程语言，而 JavaScript (jQuery) 在客户端运行。

我们可以使用 PHP 编写 JS，但 JS 不能影响 PHP（通过 AJAX 或类似方式除外）。

你可以做的是使用`SESSION`

这是示例代码。

**JS代码**

```
$("#varenummer").change(function(e)
{
    e.preventDefault();
    var data_posts = $(this).val();

    // Send Ajax request to backend.php
    $.post("/backend.php", {"varenummer": data_posts});
});
```

**PHP 代码**

```
<?php
    // do any authentication first, then add POST variable to session
    $_SESSION['varenummer'] = $_POST['varenummer'];
?>
```

`$_SESSION`您可以像**SUPER-GLOBAL**本身一样全局使用该会话变量。

# excel - 选择带有变量的工作表时出现 Excel 2007 VBA 运行时错误

> ID：14438190
> 
> 赞同：0
> 
> 时间：2013-01-21T12:03:09.503
> 
> 标签：excel, vba

我最近回到了 VBA 并一直在测试通过变量中的字符串添加工作表的概念。我已经能够成功添加工作表，我的代码的最后两行只是选择变量的工作表名称，然后选择单元格 A + 存储在另一个变量中的行号

在 Sheet1 的 A 列中，从 A1 开始，我有一个包含 8 个不同名称的列表，这些名称循环显示：

*   鲍勃
*   杰夫
*   最大限度
*   史蒂夫
*   罗西
*   皮帕
*   佩内洛普
*   抢

我希望宏在选择单元格 A9 的情况下在工作表“Rob”上结束，但是我收到运行时 1004 错误

我已经逐步完成了代码，它使用变量正确选择了工作表，但是当它尝试选择 A9 行时，出现错误

我的代码如下：

```
Sub Add_worksheets()

Dim sheetName As String
Dim rownum As Integer

rownum = 1
Range("A" & rownum).Select
sheetName = ActiveCell.Value

Do Until Range("A" & rownum).Value = ""
Range("A" & rownum).Select
sheetName = CStr(ActiveCell.Value)
Worksheets.Add(After:=Worksheets(Worksheets.Count)).Name = sheetName
Sheets("sheet1").Select
rownum = rownum + 1
Loop

Sheets(sheetName).Select
Range("A" & rownum).Select

End Sub 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:25:16.407

我还建议您添加`if-else`以检查工作表名称是否存在。您为什么要这样做`select`？我不支持选择，因为你需要它，你可以试试这个：因为当你增加`rownum`它到第 10 个单元格时，这意味着 Sheetname 不再有名字而是空的..

```
Dim sheetName As String
Dim rownum As Integer
Dim WS as WorkSheet

rownum = 1
sheetName = Range("A" & rownum).Value '-- remove select

Do Until Range("A" & rownum).Value = ""
Range("A" & rownum).Select
sheetName = CStr(ActiveCell.Value)
Worksheets.Add(After:=Worksheets(Worksheets.Count)).Name = sheetName
Set WS = Sheets(sheetName)
Sheets("sheet1").Select
rownum = rownum + 1
Loop

rownum = rownum - 1 '-- here
WS.Activate
Range("A" & rownum).Value = rownum 
```

或者您可以只使用一个数组来创建工作表，然后稍后***选择***一个工作表......而不是来回返回第一个工作表......带有名称......

```
Sub addSheets()
Dim rowNum as Integer
Dim Ws as WorkSheet
Dim vArray as Variant

'-- creates one dimensional array
vArray = WorkSheetFunction.Transpoe(Sheets(1).Range("A1:A9")) 

For rownum = Lbound(vArray) to Ubound(vArray)
   If IsEmpty(vArray(rowNum)) Then
      On Error Resume Next
      Set Ws = Sheets(vArray(rowNum))
      If Err.Number <> 0 Then '--no such sheet, so add it
         Worksheets.Add(After:=Worksheets(Worksheets.Count)).Name = vArray(rowNum)
         Set Ws = Sheets(vArray(rowNum))
      End If
   End IF
Next rownum

Ws.Activate
Ws.Range("A1").offset(rownum).value = rownum
End Sub 
```

# java - 自定义窗口标题和 ActionBar

> ID：14438194
> 
> 赞同：0
> 
> 时间：2013-01-21T12:03:27.557
> 
> 标签：java, android

为什么 getActionBar() 返回 null？

我的应用程序中有自定义窗口标题。在我的 AndroidManifest.xml 文件下方

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.map"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.example.map.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="com.example.map.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/customTheme" >
        <activity
            android:name="com.example.map.MainActivity"
            android:configChanges="orientation|screenSize"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="adjustResize"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.example.map.MapActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
        </activity>
        <activity
            android:name="com.example.map.PersonalInformationActivity"
            android:screenOrientation="portrait"
            android:label="@string/app_name" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="MY_KEY" />
    </application>
</manifest> 
```

MainActivity 的问题。它适用于 ActionBar Tabs + Fragments（下面的代码）。在其他活动中一切正常。

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {   
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.activity_main);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.window_header); 

        final ActionBar actionBar = getActionBar();

        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        String label1 = getResources().getString(R.string.label1);
        Tab tab = actionBar.newTab();
        tab.setText(label1);
        TabListener<Login> tl = new TabListener<Login>(this, label1, Login.class);
        tab.setTabListener(tl);
        actionBar.addTab(tab);

        String label2 = getResources().getString(R.string.label2);
        tab = actionBar.newTab();
        tab.setText(label2);
        TabListener<Registration> tl2 = new TabListener<Registration>(this, label2, Registration.class);
        tab.setTabListener(tl2);
        actionBar.addTab(tab);

    }

    private class TabListener<T extends Fragment> implements ActionBar.TabListener {
        private Fragment mFragment;
        private final Activity mActivity;
        private final String mTag;
        private final Class<T> mClass;

        public TabListener(Activity activity, String tag, Class<T> clz) {
            mActivity = activity;
            mTag = tag;
            mClass = clz;
        }

        public void onTabSelected(Tab tab, FragmentTransaction ft) {
            // Check if the fragment is already initialized
            if (mFragment == null) {
                // If not, instantiate and add it to the activity
                mFragment = Fragment.instantiate(mActivity, mClass.getName());
                ft.add(android.R.id.content, mFragment, mTag);
            } else {
                // If it exists, simply attach it in order to show it
                ft.attach(mFragment);
            }
        }

        public void onTabUnselected(Tab tab, FragmentTransaction ft) {
            if (mFragment != null) {
                // Detach the fragment, because another one is being attached
                ft.detach(mFragment);
            }
        }

        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // User selected the already selected tab. Usually do nothing.

            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:53:11.093

如果您想使用`ActionBar`，您需要请求`ActionBar` 查看下面的代码。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // The Action Bar is a window feature. The feature must be requested
    // before setting a content view.
    getWindow().requestFeature(Window.FEATURE_ACTION_BAR);

    setContentView(R.layout.main);

    // experiment with the ActionBar 
    ActionBar actionBar = getActionBar();
    actionBar.hide();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T06:33:19.023

我有类似的问题，我曾经在下面的行中遇到错误，因为我在设置内容视图之前请求了自定义标题功能。

```
setContentView(R.layout.userlayout);
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE) 
```

首先请求功能和问题消失了

```
requestWindowFeature(Window.FEATURE_CUSTOM_TITLE)
setContentView(R.layout.userlayout); 
```

希望这是您想要的解决方案..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:09:48.063

`getActionBar()`在 API 级别 11 中引入。在您的清单中，您声称您的应用程序也将在 API 级别 8 上运行。它不会。

[在](https://stackoverflow.com/questions/6867076/getactionbar-returns-null)API >= 11 的设备上调用可能返回 null 的原因有很多。

# c++ - 从一个类中只调用一次方法

> ID：14438195
> 
> 赞同：3
> 
> 时间：2013-01-21T12:03:30.723
> 
> 标签：c++, algorithm, events, logic

我有一个形状类，其中有一个方法 ( `hitTest(int,int)`) 可以持续检查鼠标是否在其范围内。在另一种方法中，我继续检查鼠标是否停留在那里超过 1 秒。
如果有，触发一个运行动画的函数（通过通知/事件）如果
没有，则不触发动画
如果它已经触发了动画并且动画正在运行但鼠标在此期间离开该区域，则触发中断功能（通过通知/事件）

```
//OnLoad _initHover = false;

void update() //called continously in the application per frame
{
if(hitTest(getMouseX(), getMouseY())){
                if(!_initHover){
                    _initHover = true;
                    _hoverStartTime = getCurrentTime(); //start hover time
                    cout<<"Start hist test\n";
                }

                //If it has hovered over the video for 1.0 sec
                if((ofGetElapsedTimef() - _hoverStartTime) > 1.0){
                    cout<<"Hitting continously for 1 sec\n";
                    notificationCenter->postNotification(new AnimationStartNotification);
                }
            }
            else{
                    _initHover = false;
                    notificationCenter->postNotification(new AnimationInterruptNotification);
            }
} 
```

上面的代码运行良好，但我在尝试使用时遇到了一个逻辑问题。上述 Shape 类有多个实例，因此每个类也有它们的`update()`方法。鼠标光标在整个应用程序中具有`animationStarthandler`并且`animationStophandlers`是单个类。

**问题 1：**因此，即使其中一个形状只是通知`animationStarthandler`触发，命中测试为错误的其他形状类也会将动画设置为`interrupt`并且动画不会运行。
**问题 2：**当命中测试成功并且光标在该区域中超过`1 sec`时，命中测试将继续发送通知以启动动画（动画的持续时间约为 1.5 秒）如何限制命中测试触发动画只播放一次，然后一次又一次地触发相同的动画？

如果在我的应用程序的 main 方法中，我直接尝试通过调用`playAnimation`指针类中的方法来触发动画，我会得到所需的结果。但我想将这种悬停时间和动画功能赋予 ShapeClass 本身。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:31:51.380

我认为您应该考虑添加一个新的布尔值，它保存动画触发的信息（在代码示例中调用`_animationTriggered`）。这可以防止尚未触发动画的形状停止它以及触发它的动画多次。

```
if(hitTest(getMouseX(), getMouseY()))
{
    if(!_initHover)
    {
        _initHover = true;
        _hoverStartTime = getCurrentTime();
        cout<<"Start hist test\n";
    }

    if((ofGetElapsedTimef() - _hoverStartTime) > 1.0)
    {
        if (!_animationTriggered)
        {
            cout<<"Hitting continously for 1 sec\n";
            notificationCenter->postNotification(new AnimationStartNotification);
            _animationTriggered = true;
        }
    }
}
else
{
    if ( _animationTriggered )
    {
        _initHover = false;
        notificationCenter->postNotification(new AnimationInterruptNotification);
        _animationTriggered = false;
    }
} 
```

不要忘记在同一个地方初始化这个新的布尔值`_initHover`

# java - OpenGL ES：渲染时的 glFrustrum

> ID：14438196
> 
> 赞同：1
> 
> 时间：2013-01-21T12:03:34.763
> 
> 标签：java, android, opengl-es

我正在 Android 上的 3d 场景中开发相机系统。到目前为止，我使用这个初始化代码来：

```
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
        Log.i(LOG_TAG, "onSurfaceCreated()");

        TextureLibrary.loadTextures(m_context, gl);

        //Set initial perspective and viewport
        gl.glMatrixMode(GL10.GL_PROJECTION); 
        float fov = .01f * (float) Math.tan(Math.toRadians(45.0 / 2.0));
        float aspectRatio = 1.9541f;
        gl.glFrustumf(-fov, fov, -fov / aspectRatio, fov / aspectRatio, 0.01f, 100.0f);
        gl.glViewport(0, 0, (int) _viewportWidth, (int) _viewportHeight);
        gl.glMatrixMode(GL10.GL_MODELVIEW);

        gl.glEnable(GL10.GL_DEPTH_TEST);
        gl.glEnable(GL10.GL_CULL_FACE);
        gl.glEnable(GL10.GL_TEXTURE_2D);
        gl.glFrontFace(GL10.GL_CW);
        gl.glCullFace(GL10.GL_BACK);

        initialise();
    } 
```

但现在，我想更新渲染方法中的截锥体，以执行缩放和/或图像失真。但是，它似乎是**截锥体更新**。

这是渲染代码（去掉了一些胖子，除了通常的 Push 和 PopMatrix 之外，它不包含任何 GL 状态更改代码）：

```
private void render(GL10 gl)
    {
      //Frustrum update code
        gl.glMatrixMode(GL10.GL_PROJECTION); 
        float fov = .01f * (float) Math.tan(Math.toRadians(45.0 / 2.0));
        float aspectRatio = 1.9541f;
        gl.glFrustumf(-fov, fov, -fov / aspectRatio, fov / aspectRatio, 0.01f, 100.0f);
        gl.glMatrixMode(GL10.GL_MODELVIEW);

        gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glEnableClientState(GL10.GL_TEXTURE_COORD_ARRAY);

        gl.glClearColor(0.3f, 0.3f, 0.3f, 1.0f);
        gl.glLoadIdentity();
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT);         

       //Render all the things here!

        gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
        gl.glDisableClientState(GL10.GL_TEXTURE_COORD_ARRAY);
    } 
```

如您所见，设置截锥体的片段几乎相同，使用的值也相同。但是，当在 render 方法中调用 glFrustum 时，**程序不会显示任何正在绘制的内容**。我觉得这很奇怪，因为使用的值完全相同（强制纵横比时）。

视口仍然在 OnSurfaceChanged 方法中设置/更新，该方法至少被命中一次。

```
public void onSurfaceChanged(GL10 gl, int width, int height) {
        _viewportWidth = width;
        _viewportHeight = height;
        gl.glMatrixMode(GL10.GL_PROJECTION); 
        gl.glViewport(0, 0, (int) _viewportWidth, (int) _viewportHeight);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
    } 
```

我认为这可能与 OpenGL 状态有关，但在我尝试的所有方法中，我还没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:08:45.593

`glFrustum()`与当前矩阵连接。由于您还没有完成 a `glLoadIdentity()`，这意味着您将与前一个截锥体相乘。

# javascript - 替换文本

> ID：14438198
> 
> 赞同：0
> 
> 时间：2013-01-21T12:03:47.287
> 
> 标签：javascript, html

我是 javascript 新手，如果你能帮助我解决我面临的这个问题，那就太好了。在下面的 HTML 代码中，我试图突出显示一个特定的单词（比如“消息”），方法是通过附加到该单词以使其变为粗体来替换该单词。

```
<body>
  <img src="http://some.web.site/image.jpg" title="abcd" />
  This is a test message.
</body> 
```

字符串“这是一条测试消息”直接在正文元素中找到（因此没有 id，因此无法使用 getElementById 来提取文本）。

所以我得到了整个body元素并使用textContent提取了文本。（这给了我文本并忽略了html中文本上方的图像。）然后在突出显示这个词后，我将'body's textContent设置回新的细绳。

问题是现在我无法保留文本上方的图像，并且新正文中只有 textContent 的值，并且图像丢失了。这是我使用的 JS（但现在我用单词 phone 替换 message）。

```
<script>
function myFunction(){
  var x = document.getElementsByTagName('body')[0].textContent;
  var v = x.replace("message","phone");
  document.getElementsByTagName('body')[0].textContent = v;
} 
</script> 
```

有没有其他方法可以替换直接放在正文下方的文本，它也有其他元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:18:01.113

为了做这样的事情，您需要遍历文档中的所有文本节点，搜索单词并将其换行。

像这样的东西：

```
function highlight(str,node) {
    if( !node) node = document.body;
    var c = node.children, l = c.length, i, p;
    for( i=0; i<l; i++) {
        if( c[i].nodeType == 1) highlight(str,c[i]);
        if( c[i].nodeType == 3) {
            if( (p=c[i].data.indexOf(str)) > -1) {
                c[i].splitText(p);
                c[i].nextSibling.deleteData(0,str.length);
                c[i].parentNode.insertBefore(
                    document.createElement('b'),c[i].nextSibling
                ).appendChild(document.createTextNode(str));
            }
        }
    }
} 
```

那应该这样做。要使用，只需调用`highlight("message")`，使用您想要的任何文本。请注意，这将区分大小写 - 如果您需要无大小写匹配，请告诉我，我会进行编辑以考虑到这一点（尽管在大多数情况下您可能会侥幸逃脱`highlight("message"); highlight("Message");`）

此外，您可以将搜索限制为特定元素。假设您有`<div id="replace-me">`，您可以将搜索限制为该元素，如下所示：

```
highlight("message",document.getElementById('replace-me')); 
```

（你可以使用任何方式获取节点，这只是最简单的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:08:53.457

textContent 属性设置或返回指定节点及其所有后代的文本内容。

如果您设置 textContent 属性，则所有子节点都将被删除并替换为包含指定字符串的单个 Text 节点。

参考[这里](http://www.w3schools.com/jsref/prop_node_textcontent.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:26:34.330

尝试

```
var children = document.body.childNodes;
for(var len = children.length, child=0; child<len; child++){
    if (children[child].nodeType === 3){ // textnode
        var contents = children[child].nodeValue;
       children[child].nodeValue = contents.replace(/message/gi, 'phone');
    }
} 
```

# google-app-engine - GAE：OAuth 2.0 授权 URL 无法加载到 Google 协作平台小工具中

> ID：14438199
> 
> 赞同：1
> 
> 时间：2013-01-21T12:03:48.993
> 
> 标签：google-app-engine, python-2.7, oauth-2.0, google-sites, google-api-client

我有一个 Python 应用程序，在 Google App Engine 中执行。该应用程序使用 Google Calendar API 和 api-client-library。我的代码经过简化，如下所示：

```
import webapp

oauth2_decorator = oauth2decorator_from_clientsecrets(
    CLIENT_SECRETS,
    scope=CALENDAR_SCOPE,
    message=MISSING_CLIENT_SECRETS_MESSAGE)

class MyRequestHandler(webapp2.RequestHandler):
  @oauth2_decorator.oauth_aware
  def get(self):
    if oauth2_decorator.has_credentials():
      # do stuff
    else:
      self.response.out.write(oauth2_decorator.authorize_url())

app = webapp2.WSGIApplication([
    ('/', MyHandleRequest),
    (oauth2_decorator.callback_path, oauth2_decorator.callback_handler())
], debug=True) 
```

到目前为止，一切都很好。用户首次进入应用程序时，它会请求授权以使用用户的日历。用户提供授权，然后应用程序运行。

当我使用 Google Sites Gadget 将应用程序集成到 Google Site 中时，就会出现问题。用户第一次输入时，小工具会显示空白内容。如果用户直接打开该小工具的内容（appspot url），它可以正常工作：授权 url 已加载并且应用程序可以正常工作。

Google 协作平台中集成的 apppot 网址是否存在任何已知问题？

提前谢谢了

# c++ - 如何删除具有一些子项作为成员的 QGraphicsItem？

> ID：14438202
> 
> 赞同：3
> 
> 时间：2013-01-21T12:04:04.437
> 
> 标签：c++, qt, qgraphicsitem

我有一个继承 QGraphicsItem 的自定义项目。它有一些子图形项作为成员变量。我应该按什么顺序从场景中删除这些项目以及如何删除它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T12:25:54.820

像这样创建您的成员图形项目：

```
class MyClass : public QGraphicsItem
{
    ...
private:

    SomeKindOfGraphicsItem* _item1;
    SomeOtherGraphicsItem* _item2;
} 
```

* * *

```
MyClass::MyClass( ... ) :
    QGraphicsItem( ... ),
    _item1( new SomeKindOfGraphicsItem( ..., this ) ),
    _item2( new SomeOtherGraphicsItem( ..., this ) )
{
    ...
} 
```

`MyClass`在这种情况下，只需从场景中移除父项（在此示例中）就足够了。这也将删除所有子项：

> **无效 QGraphicsScene::removeItem(QGraphicsItem * item)**
> 
> 从场景中移除项目项及其所有子项。项目的所有权被传递给调用者（即，QGraphicsScene 在销毁时将不再删除项目）。

此外，当一个对象`MyClass`被删除时，它会通过`Qt`机制删除其所有子对象：

> **QGraphicsItem::~QGraphicsItem() [虚拟]**
> 
> 销毁 QGraphicsItem 及其所有子项。如果该项目当前与场景相关联，则该项目将在删除之前从场景中移除。
> 
> 注意：在销毁项目之前从 QGraphicsScene 中删除项目更有效。

# html - 用于授权目的的一次性 HtmlString 扩展

> ID：14438203
> 
> 赞同：0
> 
> 时间：2013-01-21T12:04:08.940
> 
> 标签：html, asp.net-mvc, razor, extension-methods, asp.net-authorization

我打算为 MVC 创建一个扩展，如下所示：

```
public static class DivExtension
{

    public static MvcHtmlElement BeginDiv(this HtmlHelper helper)
    {

        return new MvcDiv(helper.ViewContext).BeginDiv("","");
    } 
    public static MvcHtmlElement BeginDiv(this HtmlHelper helper, string id)
    {

        return new MvcDiv(helper.ViewContext).BeginDiv(id,"");
    } 
} 
```

在 Razor 中，我可以这样使用它：

```
@{using(Html.BeginDiv())
  {
        <text>
              This should appear inside a div <input type="text" value="oi" />
        </text>
   }
} 
```

这将生成以下 HTML 输出：

```
 <div>
   This should appear inside a div <input type="text" value="oi" />
 </div> 
```

但是想象一下，我的代码不只是创建一个**div** ，而是接收一个代表角色的字符串，如果登录的用户不属于指定的角色，则应该禁止该扩展中的 HTML：

```
public static class HtmlAuthSuppressor
{

    public static MvcHtmlElement AuthHTML(this HtmlHelper helper, string roles)
    { 
        //some code that would allow suppression
    }  
} 
```

如果我这样使用：

```
<b>Do you see something below?</b>
@{using(Html.AuthHTML("Role_Super_User"))
  {
        <text>
              Congratz!!! You can see this, u are super, indeed. <input type="text" value="oi" />
        </text>
   }
} 
```

如果用户不属于指定角色，最终的 HTML 输出将是：

```
<b>Do you see something below?</b> 
```

那可能吗？

**更新：** 我知道我可以生成这样的 HTML：

```
 <b>Do you see something below?</b> 
     <!--   
              Congratz!!! You can see this, u are super, indeed. <input type="text" value="oi" />
        --!> 
```

但这会向客户透露一些我不想透露的东西，除了使响应不必要地加重。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-10T09:00:56.527

您不需要为此构建扩展..只需执行以下操作：

```
<b>Do you see something below?</b>

    @if (Request.IsAuthenticated && User.IsInRole("Role_Super_User"))
    {
        <text>
              Congratz!!! You can see this, u are super, indeed. <input type="text" value="oi" />
        </text>
    } 
```

# email - Visual basic - txt 作为电子邮件脚本的字符串

> ID：14438210
> 
> 赞同：1
> 
> 时间：2013-01-21T12:04:25.723
> 
> 标签：email, vba

我正在尝试修复邮件脚本。

我非常需要类似的东西

```
cmBody = "c:\body.txt" 
```

这不是那么简单，但你明白了。

txt 文件是电子邮件的内容。

我希望你们能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:33:35.020

你可以这样做：

```
 Dim fso As Object
    Dim contents As String

    Set fso = CreateObject("Scripting.FileSystemObject")
    contents = fso.OpenTextFile("c:\temp\test.txt", ForReading).ReadAll() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:30:28.927

我得到了它。

这是我最终使用的代码。（如果你们中的任何一个人甚至理解这个问题）

```
Open "C:\body.txt" For Input As #intFile
strFile = Input$(LOF(intFile), #intFile)
Close #intFile
cmBody = strFile 
```

# javascript - 使用 D3 创建 DIV 的动态列表

> ID：14438214
> 
> 赞同：6
> 
> 时间：2013-01-21T12:04:43.607
> 
> 标签：javascript, jquery, jquery-ui, jquery-selectors, d3.js

我一直在使用[D3](http://d3js.org)创建精美的动画图表，示例很棒。但是，我正在尝试做一些看似更基本的事情，但遇到了麻烦 - 将数据绑定到一个简单的 DIV 列表。

我设置`enter()`初始化不透明度为 0 的元素，`transition()`将它们淡入，`exit()`淡出并移除它们。`enter()`并且`exit()`似乎工作正常 - 但是，当更新包含列表中已经存在的元素时，它似乎被部分删除 - 包含的 DIV 仍然存在，但内容消失了。我不明白为什么元素的内容会以这种方式改变。

我的代码如下：

```
var data = [...];
sorted = data.sort(function(a, b) { return d3.descending(a.id, b.id); });

var tweet = tweetsBox
    .selectAll('div')
    .data(sorted, function(d) { return d.id; });

var enterDiv = tweet.enter()
    .append("div")
    .attr("class", "tweetdiv")
    .style("opacity", 0);
enterDiv.append("div")
    .attr("class", "username")
    .text(function(d) { return "@" + d.username });
enterDiv.append("div")
    .attr("class", "displayname")
    .text(function(d) { return d.displayname });
enterDiv.append("div")
    .attr("class", "date")
    .text(function(d) { return d.date });
enterDiv.append("div")
    .attr("class", "text")
    .text(function(d) { return d.text });

tweet.transition()
    .delay(200)
    .style("opacity", 1);

tweet.exit()
    .transition()
    .duration(200)
    .style("opacity", 0)
    .remove(); 
```

我还在这里设置了[一个 jsFiddle 来](http://jsfiddle.net/rWByD/1/)演示这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:13:29.000

问题是您选择了您创建的 s，但每个数据元素`div`创建了多个。`div`更新时，d3 尝试将数据与嵌套`div`的 s 匹配。由于您已经为顶级`div`s 分配了一个特殊类，因此修复非常简单。代替

```
.selectAll('div') 
```

和

```
.selectAll('.tweetdiv') 
```

# dynamics-crm-2011 - MS CRM 2011 复制报价

> ID：14438216
> 
> 赞同：0
> 
> 时间：2013-01-21T12:04:51.110
> 
> 标签：dynamics-crm-2011

自 4 周以来，我一直在使用 MS CRM 2011。我必须将现有报价复制到新报价。哪种方法是最好的方法？使用 Javascript 或 C# aspx 主页？

有人能给我一个例子吗？

先谢谢了！

托马斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:44:15.500

有很多方法可以做到这一点。这里有两个。

## 网址初始化

[http://www.renauddumont.be/en/2011/crm-2011-passing-field-values-to-a-form-using-url-parameters](http://www.renauddumont.be/en/2011/crm-2011-passing-field-values-to-a-form-using-url-parameters)

[http://msdn.microsoft.com/en-us/library/gg334436.aspx](http://msdn.microsoft.com/en-us/library/gg334436.aspx)

[http://msdn.microsoft.com/en-us/library/gg334375.aspx](http://msdn.microsoft.com/en-us/library/gg334375.aspx)

我之前已经为联系人实现了这一点。我的要求最适合 URL 初始化方法。我也可以看到这种技术在引用方面的优势。对于这种方法，我也会推荐[Gareth Tucker 的博客文章](http://garethtuckercrm.com/2012/07/31/duplicate-record-button-using-jscript-in-microsoft-crm-2011/)，其中描述了如何做到这一点。

我使用了 Gareth 帖子的几个元素，但我将我的最终脚本分解为更紧凑的内容。本质上，您使用 javascript 来提取特定字段的值，并将它们作为查询字符串参数排列到特殊形成的 CRM 表单 URL 中。此 url 解压缩查询字符串参数，并以新形式将您传递的值分配给相应的字段。 *当您打开一个项目并且想要克隆它并让新表单保持打开状态以供用户编辑时，这非常有用。*

我最终从联系表单功能区调用了这个脚本，该脚本作为 Web 资源添加。Gareth 也很好地解释了如何做到这一点。

```
// Register this namespace to avoid collision with other scripts that may 
// run within this form 
Type.registerNamespace("BF.Contact");

    // Create a function that will be called by a ribbon button.
BF.Contact.Clone = function() {

    var extRaqs = "";

    // ownerid
    extRaqs += "&ownerid=" + Xrm.Page.getAttribute("ownerid").getValue()[0].id;
    extRaqs += "&owneridname=" + Xrm.Page.getAttribute("ownerid").getValue()[0].name;
    extRaqs += "&owneridtype=systemuser"; 

    extRaqs += BF.Contact.Clone.GetValue("address1_line1"); 
    extRaqs += BF.Contact.Clone.GetValue("address1_line2"); 
    extRaqs += BF.Contact.Clone.GetValue("address1_city");  
    extRaqs += BF.Contact.Clone.GetValue("address1_postalcode");    
    extRaqs += BF.Contact.Clone.GetValue("mobilephone");
    extRaqs += BF.Contact.Clone.GetValue("telephone1"); 
    extRaqs += BF.Contact.Clone.GetValue("telephone2");
    extRaqs += BF.Contact.Clone.GetValue("fax");    
    extRaqs += BF.Contact.Clone.GetValue("emailaddress1");
    extRaqs += BF.Contact.Clone.GetValue("address1_county");    

    extRaqs += "&donotsendmm=1"

    var newURL = Xrm.Page.context.getServerUrl() + "/main.aspx?etn=contact&pagetype=entityrecord&extraqs=";

    newURL += encodeURIComponent(extRaqs);

    window.open(newURL , "_blank", "width=900px,height=600px,resizable=1");
}

BF.Contact.Clone.GetValue = function(attributename) {
    var _att = Xrm.Page.getAttribute(attributename);
    var _val = "";

    if (_att == null || _att.getValue() == null ) {
        return "";
    }

    if (_att.getFormat() == "date") {
        _val = _att.getValue().format("MM/dd/yyyy");
    } else {
        _val = _att.getValue();
    }

    return "&" + attributename + "=" +  _val;
} 
```

一些缺点：

1.  只有在您打开要克隆的项目的表单时才真正有效。
2.  一次只能工作一项。
3.  URL 有限制，对于非常大的实体/字段，并非所有内容都可以克隆。

## 工作流/对话框

如果您希望能够克隆多个项目，一种非常快速的方法是创建一个针对您要克隆的实体的工作流或对话框。在工作流中，创建目标类型的新项目。新创建的项目的属性可以设置为您的任何要求。将它们默认为静态值，使用克隆项目中的值或工作流允许的任何其他值填充它们。一个主要缺点是无法将表单呈现给用户。

# c# - MemoryAppender PatternLayout 不渲染？

> ID：14438217
> 
> 赞同：11
> 
> 时间：2013-01-21T12:04:59.393
> 
> 标签：c#, log4net

App.config 看起来像这样：

```
<appender name="MemoryAppender" type="log4net.Appender.MemoryAppender">
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%date [%thread] %-5level - %message" />
  </layout>
</appender> 
```

代码如下所示：

```
foreach (var ev in events)
{
   string msg = ev.RenderedMessage;
} 
```

从返回的字符串`ev.RenderedMessage`只是消息，而*不是*整个模式。我也试过用`WriteRenderedMessage`a `StringWriter`，结果是一样的。有没有办法在应用了模式的情况下获取消息？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T12:09:06.950

我找到了 ：）

```
var events = _ma.GetEvents();
string result = "";
using (StringWriter writer = new StringWriter())
{
    foreach (var ev in events)
    {
        _ma.Layout.Format(writer, ev);
        writer.Write(Environment.NewLine);
    }
    result = writer.ToString();
} 
```

# windows-phone-7 - windows 商店市场上免费提交应用程序是否有额外费用

> ID：14438218
> 
> 赞同：0
> 
> 时间：2013-01-21T12:05:01.950
> 
> 标签：windows-phone-7, windows-store-apps, windows-store

我在 wiki [http://en.wikipedia.org/wiki/Windows_Phone_Store上读到了这个](http://en.wikipedia.org/wiki/Windows_Phone_Store)

“免费应用程序的免费提交限制为 100 次；此后，免费应用程序每次提交的费用为 19.99 美元”

并且不需要从已在此商店提交免费应用程序的人们那里得到澄清。

每个帐户最多有 100 个免费应用程序，这里没有什么令人困惑的地方。

每个帐户费用 99 美元，一切都清楚:)。

但让我感到困惑的是每个应用提交 19.99 美元的费用？每次提交免费应用程序时我都需要额外支付 19.99 $ :S 是否正确？

谢谢你和我分享经验

我知道这是个愚蠢的问题，但我不想花 100 美元来回答我的问题

感谢分享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:47:24.610

100 个限制用于提交，而不是应用程序。
注意：
- 如果您提交的应用程序未通过认证，则视为提交。
- 如果您向应用提交更新，则视为提交。
- 如果您的应用程序的 WP7.X 和 WP8 版本有不同的 XAP 文件，则将被视为多次提交。

如果并且当您达到此限制时，更便宜的选择是拥有多个帐户并跨帐户拆分提交，因为这将为您提供另外 100 个提交，另外 99 美元。

不过要现实一点。你真的打算每周提交两次，每周提交一年吗？（允许您有 2 周的假期；））

# ruby - 使用carrierwave上传文件

> ID：14438220
> 
> 赞同：2
> 
> 时间：2013-01-21T12:05:14.040
> 
> 标签：ruby, upload, carrierwave

首先，我是 RoR 的真正初学者，所以请原谅这个问题的简单性。我正在尝试使用 POST 参数上传文件。形式是基本的：一个text_field（与文件无关）和一个file_field。我正在使用 CarrierWave 宝石。这个想法是从用户那里获取选择的文件并将其上传到本地文件夹中。

我无法上传文件，我不明白为什么。有人有想法吗？

我的代码：

查看/home/index.html.erb

```
<%= form_for @home, :url => {:action => 'uploadFile'}, :html => {:multipart => true} do |f|%>
<div class="field">
  <tr>
    <td><%= f.label :campagne, "Nom de la campagne : " %></td>
    <td><%= text_field_tag :campagne %></td>
  </tr>
</div>
<div class="field">
  <tr>
    <td><%= f.label :fichier, "Fichier de numéros : " %></td>
    <td><%= f.file_field :fichier %></td>
  </tr>
</div>
</table>
<p><%= f.submit "Charger le fichier"%></p>  
<% end %> 
```

家庭控制器：

```
def index
    self.new
    render :file => 'app\views\home\index.html.erb'
end

def new
    @home = Home.new(params[:fichier])

end

def uploadFile
    #campagne = params[:campagne]
    #chemin = params[:numeros]
    #post = DataFile.save(params[:upload])
    #render :text => "Nom de la capagne : #{campagne} et Chemin du fichier : #{chemin}"
    #post = DataFile.save(params[:upload])
    require "carrierwave"

    # Stockage du fichier à l'aide de CarrierWave
    stockage = FichierUploader.new
    stockage.store!(params[:fichier])

    render :text => "File has been uploaded successfully " + " Campagne : " + params[:campagne] + " Fichier : " + params[:fichier].to_s
end 
```

路线.rb：

```
match "home" => "home#index"
match "home/uploadFile" => "home#uploadFile"

resources :home
get 'home/uploadFile'
post 'home/uploadFile' 
```

# javascript - 选中另一个隐藏的单选按钮

> ID：14438223
> 
> 赞同：0
> 
> 时间：2013-01-21T12:05:41.280
> 
> 标签：javascript, jquery, forms

**你好**，

`input`选择另一个时，我正在尝试选择隐藏的收音机

```
<div class="questions">
<div class="questions_title">
    <span> Q : What Are you doing now ?</span>
</div>                       
<div class="answers">           
  <script>
      $('#answerid_').on('checked', function() {
         $('#degres_').prop('checked', true);
         return false;
      });
  </script>

  <div class="field">
   <input type="radio" value="1915" id="answerid_1" name="answerid_1" class="required">
   <input type="hidden" value="0" id="degres_1" name="degres_1">
   <span class="questions_label">Working. </span>
  </div>
  <div class="field">
   <input type="radio" value="1916" id="answerid_2" name="answerid_1">
   <input type="hidden" value="1" id="degres_2" name="degres_1">
   <span class="questions_label">Playing.</span>
  </div>
  <div class="field">
   <input type="radio" value="1917" id="answerid_3" name="answerid_1">
   <input type="hidden" value="2" id="degres_3" name="degres_1">
   <span class="questions_label">not Sleeping </span>
  </div>
  <div class="field">
   <input type="radio" value="1918" id="answerid_4" name="answerid_1">
   <input type="hidden" value="3" id="degres_4" name="degres_1">
   <span class="questions_label">Nothing.</span>
  </div>

</div> 
```

我需要 => 选择任何答案时，`degree`也会检查下一个隐藏的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:09:03.337

您无法检查隐藏类型的输入。但是，您可以检查单选类型的不可见输入（带有`display:none`样式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:07:04.727

您需要通配符来附加事件和更改事件。

**[现场演示](http://jsfiddle.net/rajaadil/tTpCu/)**

```
$('[id^=answerid_]').on('change', function() {
        $(this).next(':hidden').prop('checked', true);
        return false;
}); 
```

我建议您设置隐藏字段的值，而不是使用隐藏检查。

```
$(this).next(':hidden').val("true"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T10:24:17.090

You can't check a hidden-type input. it is expecting a value, so the value could be 1 if previous is cecked or 0 if not checked.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:46:27.880

你可以试试这个

***JS代码***

```
$('[id^=answerid_]').on('change', function() {
        $(this).siblings('[id^=degres_]').prop('checked', true);
        alert($(this).siblings('[id^=degres_]').prop('checked'));
   return false;
}); 
```

[演示](http://jsfiddle.net/tTpCu/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-22T22:44:27.733

after use the folowing code

`$('[id^=answerid_]').on('change', function() { $(this).siblings('[id^=degres_]').prop('checked', true); //alert($(this).siblings('[id^=degres_]').prop('checked')); return false; });`

and changing hidden input to another radio because it now work and by adding

`style="margin-left: -16px; position: absolute;"`

for every answer input to be above degrees radio it work successfully.

**but in the last question it's not work or check degree input :(**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-21T12:08:25.323

它应该是..

```
 $('[id^=answerid_]').on('change', function() {
    $(this).next().prop('checked', true);
    return false;
 }); 
```

# javascript - 如何使用javascript仅获取div的内容而不是整页

> ID：14438224
> 
> 赞同：0
> 
> 时间：2013-01-21T12:05:43.717
> 
> 标签：javascript, ajax

我希望能够只获取 div 的内容而不是加载整个页面。

我现在的js是：

```
 $(document).ready(function(){
    $("#myform").validate({
        debug: false,
        rules: {
            name: "required",
            email: {
                required: true,
                email: true
            }
        },
        messages: {
            name: "Please let us know who you are.",
            email: "A valid email will help us get in touch with you.",
        },
        submitHandler: function(form) {
            $.post('file.php', $("#myform").serialize(), function(data) {
                $('#results').html(data);
            });
        }
    });
}); 
```

当我提交表单时它正在加载整个页面，我希望它只加载一个 div 的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:09:26.653

请参阅以下链接以了解如何使用 JavaScript 访问 DIV 元素：

> [使用 JavaScript 获取 DIV 的内容](https://stackoverflow.com/questions/8647216/get-content-of-a-div-using-javascript)
> 
> [如何仅使用 javascript（无 jQuery）获取 div 标签的文本](https://stackoverflow.com/questions/10370204/how-can-get-the-text-of-a-div-tag-using-only-javascript-no-jquery)

):

# android - Android 位图不需要的黑色边框

> ID：14438231
> 
> 赞同：1
> 
> 时间：2013-01-21T12:06:22.653
> 
> 标签：android, image, bitmap, save, border

我的图像视图上有这个位图，当我保存位图时，它包括位图周围的黑色边框。边框在那里是因为位图的大小与屏幕大小不同。任何人都可以告诉我为什么以及如何解决它？非常感谢您！

这是我的图片之前和之后的屏幕截图： ![图像](../Images/5498479a5329f575f20ebbda0432c857.png)

这是我的布局 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/relativelayout"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:gravity="center_horizontal" >

 <LinearLayout
 android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:layout_alignParentLeft="true"
 android:layout_centerVertical="true" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:visibility="gone" />

  <ImageView
      android:id="@+id/imageView2"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_weight="1"
      android:adjustViewBounds="true"
      android:scaleType="fitCenter" />

</LinearLayout>
<Button
    android:id="@+id/selectPhotoButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Select Photo" />

<Button
    android:id="@+id/editPhotoButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Edit Now" />

 </RelativeLayout> 
```

有问题的图像视图是**imageView2**。

这是我保存图像的方法：

```
 private void savePhoto() {
    if (editPhotoImg.getDrawable() == null) {
        // Toast.makeText(getApplicationContext(), "No Photo Edited",
        // Toast.LENGTH_SHORT).show();
    } else {
        try {
            String filePath = getOutputMediaFile(RESULT).getPath();
            editPhotoImg.setDrawingCacheEnabled(true);
            Bitmap b = editPhotoImg.getDrawingCache(true);

            b.compress(CompressFormat.JPEG, 100, new FileOutputStream(
                    filePath));

            // Toast.makeText(getApplicationContext(),
            // "Image saved to: "+filePath, Toast.LENGTH_SHORT).show();

            // detectFaces(true);

        } catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Invalid File       Path",
                    Toast.LENGTH_SHORT).show();
        }
    }
} 
```

再次感谢您的提前帮助！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:14:46.363

你已经设置

```
<ImageView
      android:id="@+id/imageView2"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      ... /> 
```

它将图像视图拉伸到其父视图的边界（这不能保证图像与您的父视图具有相同的大小）。如果您不想要黑色边框，则视图应该有`"wrap_content"`，因此它将自动调整加载图像的大小。

# xcode - Xcode + PhoneGap + 制作照片 = 没有可用的相机

> ID：14438232
> 
> 赞同：1
> 
> 时间：2013-01-21T12:06:24.303
> 
> 标签：xcode, cordova

Mac OS X Lion 10.7.4
PhoneGap 1.2

我正在使用**Ipad 6.0 Simulator**构建我的应用程序。

```
var pictureSource,
  destinationType;

function onDeviceReady() {
  pictureSource = navigator.camera.PictureSourceType;
  destinationType = navigator.camera.DestinationType;

  if (noConnection()) alert("No internet connection. Working in offline mode.");

  deviceId = device.uuid;

  initDb();
  initFileSystem();
}

 $("#take-photo").click(function(e){
    e.preventDefault();
    navigator.camera.getPicture(onPhotoUriSuccess,
      onPhotoFail,
      {quality: 85, destinationType: destinationType.FILE_URI}
    );
    return false;
  }); 
```

看起来一切正常但我收到一个错误**'no camera available'**。
也许是因为我正在运行我的应用程序 wuth **Ipad 6.0 Simulator**。

我有**Ipad 6.0 模拟器**和**iOS 设备**可用于我的应用程序。当我选择**iOS 设备**并运行时，我收到一条错误消息**“没有任何已配置的 iOS 设备与兼容的 iOS 版本可用...”**

**如何使我的相机可用？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T12:09:05.467

你的怀疑是有根据的。模拟器不提供摄像头。

# api - 在 Heroku 上，使用 Node.js 是否可以防止第三方 API 调用需要队列 + 工作人员测功机？

> ID：14438233
> 
> 赞同：4
> 
> 时间：2013-01-21T12:06:24.997
> 
> 标签：api, node.js, heroku, background-process, worker

Heroku Dev Center on [the page about using worker dynos and background jobs](https://devcenter.heroku.com/articles/background-jobs-queueing)指出您需要使用 worker 的 + 队列来处理 API 调用，例如获取 RSS 提要，因为如果服务器很慢并且执行此操作可能需要一些时间在网络测功机上会导致它被阻止接收其他请求。

但是，根据我的阅读，在我看来，Node.js 的主要观点之一是，由于其基于异步事件的运行时模型，它在这些条件下不受阻塞的影响。

我很困惑，因为这不意味着可以在 web dynos 中进行 API 调用（异步）吗？也许这些文档是为同步模型更普遍的 Ruby/Python/etc 用例编写的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:59:31.597

NodeJS 是[反应器模式](http://en.wikipedia.org/wiki/Reactor_pattern)的一种实现。NodeJS 的默认构建使用 5 个反应器。一旦这 5 个反应器被用于 IO 绑定任务，主事件循环将阻塞。

关于 NodeJS 的一个常见误解是，它是一个允许你同时做很多事情的系统。不一定是这种情况，它允许您在等待 IO 绑定任务时做其他事情，一次最多 5 个。

任何 CPU 绑定任务总是在主事件循环中执行，这意味着它们将阻塞。

这意味着如果你的“工作”是 IO 绑定的，比如把东西放在数据库中，那么你可能不使用 dynos 就可以侥幸逃脱。这当然取决于您计划一次进行多少事情。请记住，您在主应用程序中放置的任何任务都会从其他传入请求中占用资源。

通常不建议这样的事情，如果你有一个做一些处理的工作，它属于一个队列，在它自己的进程或线程中执行。

# android - 如何阻止android EditText中的特殊字符和小写字符？

> ID：14438237
> 
> 赞同：0
> 
> 时间：2013-01-21T12:06:33.727
> 
> 标签：android, android-edittext, android-2.3-gingerbread

我正在开发一个安卓应用程序。我正在使用**android 2.3.3**进行开发。

在一个屏幕中，我正在显示**文本框 (EditText)**并从用户那里获取输入。
要求是限制**用户只能输入大写字母（仅限字母、数字）并且不允许使用特殊字符**

为此，如果我使用**“InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS”**，那么它将只允许大写字符（仅将键盘显示为大写字母），但它也允许特殊字符 &、* 等。

但我需要，**没有特殊字符，键盘只显示大写字母**
以上在android中是否可行？
欢迎您的所有想法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-21T12:18:55.780

```
android:digits="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"
android:inputType="textCapCharacters"
android:capitalize="sentences" 
```

在 .xml 文件中使用上述行，使其仅输入字母和数字

# php - 用掩码替换字符串模式的最快方法

> ID：14438240
> 
> 赞同：9
> 
> 时间：2013-01-21T12:06:46.760
> 
> 标签：php

我有类似的字符串

```
$string = "string_key::%foo%:%bar%"; 
```

, 和参数数组

```
$params = array("foo" => 1, "bar" => 2); 
```

如何在 $string 模式中替换此参数？预期结果是

```
string_key::1:2 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:11:40.750

首先，您需要重写`$params`数组：

```
$string = "string_key::%foo%:%bar%";
$params = array("foo" => 1, "bar" => 2);
foreach($params as $key => $value) {
    $search[] = "%" . $key . "%";
    $replace[] = $value;
} 
```

之后，您可以简单地将数组传递给`str_replace()`：

```
$output = str_replace($search, $replace, $string); 
```

^([在键盘上查看输出](http://codepad.org/fCbfkwXn))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-07T15:26:47.047

就个人而言，我做了这个：

```
$string = "string_key::%foo%:%bar%";
$params = array("%foo%" => 1, "%bar%" => 2);
$output = strtr($string, $params); 
```

您不必做任何其他事情，因为如果数组中有一些值或字符串不会被替换和忽略。

快速简单的模式替换方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:39:45.240

我不确定对您来说最快的解决方案是什么（这取决于字符串大小和您将使用的替换值的数量）。

我通常使用这种函数来执行参数化替换。它使用`preg_replace_callback`和 一个闭包来执行每个百分比括起来的单词的替换。

```
function replaceVariables($str, $vars)
{
    // the expression '/%([a-z]+)%/i' could be used as well 
    // (might be better in some cases)
    return preg_replace_callback('/%([^%]+)%/', function($m) use ($vars) {
        // $m[1] contains the word inside the percent signs
        return isset($vars[$m[1]]) ? $vars[$m[1]] : '';
    }, $str);
}

echo replaceVariables("string_key::%foo%:%bar%", array(
    "foo" => 1,
    "bar" => 2
));
// string_key::1:2 
```

**更新**

它与`str_replace()`在没有相应替换的情况下找到百分比封闭值的情况下使用不同。

这一行决定了行为：

```
return isset($vars[$m[1]]) ? $vars[$m[1]] : ''; 
```

如果它`'%baz%'`不是`$vars`. 但是这个：

```
return isset($vars[$m[1]]) ? $vars[$m[1]] : $m[0]; 
```

将留`'%baz%'`在你的最后一串。

# selenium - 鼠标悬停在元素上

> ID：14438241
> 
> 赞同：0
> 
> 时间：2013-01-21T12:06:48.207
> 
> 标签：selenium, mouseover, selenium-webdriver

[http://www.franchising.com/](http://www.franchising.com/) ---> 鼠标悬停（Franchises AZ）---> 需要点击Q

我试过以下

```
WebElement we1=driver.findElement(By.cssSelector("a[href='/franchises/']"));

WebElement we2=driver.findElement(By.cssSelector("a[href='/franchises/q.html']"));

String js = "arguments[0].style.height='auto'; arguments[0].style.visibility='visible';";

((JavascriptExecutor) driver).executeScript(js, we2); // I have used the script since the we2 is not visible

Actions builder=new Actions(driver);
builder.moveToElement(we1).perform();
Thread.sleep(5000);
we2.click(); 
```

任何人都可以尝试与我分享代码...我仍然收到“ElementNotVisibleException”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T06:47:42.007

在进入代码之前，我只想让你确保你正在使用的 Selenium 服务器的版本。请使其更新版本`2.28.x`

**代码：**

```
 driver = new FirefoxDriver();
    driver.get("http://www.franchising.com/franchises/");
    Thread.sleep(5000);
    WebElement element=driver.findElement(By.xpath("//tr[3]/td/table/tbody/tr/td[4]/a"));
    Actions builder = new Actions(driver);
    builder.moveToElement(element).build().perform();
    Thread.sleep(5000); 
```

这对我来说可以。试试这个代码。我希望这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T05:00:27.717

使用 firefoxdriver，很大程度上取决于您使用的驱动程序版本以及系统上的 Firefox 版本，因为本机支持会因此而有所不同。

以下适用于 Chrome ：

```
WebElement link1 = driver.findElementByLinkText("Franchises A-Z");
Actions action = new Actions(driver);
action.moveToElement(link1).click(driver.findElementByXPath("//a[contains(@href,'franchises/b')]")).perform(); 
```

# c++ - 内存操纵 - 我做错了什么？

> ID：14438244
> 
> 赞同：0
> 
> 时间：2013-01-21T12:06:52.463
> 
> 标签：c++, arrays, memory, character, memcpy

对，所以我正在玩弄内存移动数据。我在这里遇到了麻烦。我做错了什么？我已经考虑了空终止符，但它仍然没有输出我所期望的。

```
char buff[34] = "I will not do anything like that.";
char * protocol = "abcdefghi";

char data[44];

memcpy(data, protocol, 10);
memcpy(data + 9, buff, 34);

cout << data << endl; //abcdefghiI will not do anything like that.
cout << strlen(data) << endl; // 42

char poin[10];
memcpy(poin, data, 10);

cout << poin << endl; //abcdefghiI╠╠╠╠╠╠╠╠╠╠abcdefghiI will not do anything like that. 
```

对于最后一个 cout，我期待的只是 abcdefghi，但正如你在上面看到的那样。任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:10:49.067

`poin`不是以- 结尾的`'\0'`字符串。`'\0'`你在这里覆盖了第一个`'I'`：

```
memcpy(data + 9, buff, 34); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:12:50.763

因为`poin`不是空终止的。你复制了`data`into的前 10 个字节`poin`，所以现在

```
poin[0] == 'a'
poin[1] == 'b'
poin[2] == 'c'
poin[3] == 'd'
poin[4] == 'e'
poin[5] == 'f'
poin[6] == 'g'
poin[7] == 'h'
poin[8] == 'i'
poin[9] == 'I' 
```

然后，`std::cout`超出了 array`poin`的边界，这些地址中的值确实是未知的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:11:12.617

最后一个`memcpy`不包括`'\0'`用于终止 C 样式字符串。

`strcpy`使用，或者使用 C++ - 时，你会好得多`std::string`。

# javascript - 获取先前选择的值或阻止选择默认值

> ID：14438245
> 
> 赞同：0
> 
> 时间：2013-01-21T12:06:56.400
> 
> 标签：javascript, jquery, selection

是否可以`<select>`获取先前选择的值或以某种方式阻止默认值？例如我有

```
<select id="select_site" name="sites" selectedindex="0">
<option value="">Please select site</option>
<option value="4">first</option>
<option value="5" selected="selected">second</option>
<option value="8">third</option>
</select> 
```

因此，如果选择的选项为空值，我需要恢复以前选择的`second`值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:14:05.287

您可以将更改事件处理程序绑定到元素并将新值存储在变量中。如果该值为空字符串，请将其设置为变量中的任何内容：

```
$('#select_site').change(function() {
    if (this.value === '') {
        this.value = $(this).data('previous_value');
    }
    else {
        $(this).data('previous_value', this.value);
    }
}).triggerHandler('change'); // <- trigger change event to get initial value 
```

[**演示**](http://jsfiddle.net/65ctQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:18:50.703

不需要js：

```
<select id="select_site" name="sites" selectedindex="0">
  <optgroup label="Please select site">
    <option value="4">first</option>
    <option value="5" selected="selected">second</option>
    <option value="8">third</option>
  </optgroup>
</select> 
```

演示：http: [//jsbin.com/obeker/1/](http://jsbin.com/obeker/1/)

参考：[https ://developer.mozilla.org/docs/HTML/Element/optgroup](https://developer.mozilla.org/docs/HTML/Element/optgroup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:09:50.503

不，您不能这样做，因为更改事件是在选择聚焦后触发的，而不是在选择更改之前触发的。没有本机*“onbeforechange”*事件，但您可以在选择更改后删除空值，使其不再可用。

执行此操作的代码：

```
$('select').change(function (event) {
    $this = $(this);
    if ($this.val() !== '') {
        $this.children('option:first').remove();
    }
}); 
```

# jquery - 呈现动态生成的表时是否会调用 JQuery 事件？

> ID：14438246
> 
> 赞同：0
> 
> 时间：2013-01-21T12:06:57.633
> 
> 标签：jquery, events, dom

我有一个我正在处理的数据网格控件，它总共使用 4 个表来生成固定列标题、列标题、固定单元格和单元格（左上角、右上角、左下角、右下角，底部滚动垂直滚动，右边水平滚动）。某些表格之间的对齐方式（在这种情况下，固定单元格 [垂直] 和非固定列标题 [水平]）必须与滚动时的表格同步，并且标题宽度是根据表格中的隐藏标题计算的数据。即使对于非常大（100k+ 行）的数据集，这也很有效——除非最初加载。该表是动态生成的（通过 AJAX 回调），我正在寻找一种方法，

TL;DR：需要一个事件或一些技巧，以便我在为通过 DOM 或 JQuery 调用动态创建的表呈现表的内容后调用函数（最好不要像 setTimeout 调用那样一起破解）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T13:53:52.157

必须通过创建一个 setTimeout 来解决这个问题，该 setTimeout 调用一个重复检查大小变化的函数，如下所示（排除了一些不直接相关的代码）：

```
function Datagrid() {
    var _this = this; setTimeout(function () { _this.CheckAutoColumns(); }, 20);
}
function Datagrid_CheckAutoColumns() {
    if (this != null) {
        var render = false;
        for (var i = 0; i < this.Columns.length; i++) {
            if (this.Columns[i].__LastWidth != this.Columns[i].Container.width()) {
                render = true;
                break;
            }
        }
        if (render == true) { this.Render(); }
        if (this.Disposing === false) { var _this = this; setTimeout(function () { _this.CheckAutoColumns(); }, 20); }
    }
}
Datagrid.prototype.constructor = Datagrid;
Datagrid.prototype.CheckAutoColumns = Datagrid_CheckAutoColumns; 
```

# ruby - 我如何要求 'rake' 才能在 .gemspec 中使用 FileList？

> ID：14438247
> 
> 赞同：3
> 
> 时间：2013-01-21T12:07:03.733
> 
> 标签：ruby, rubygems, gem, rake, bundler

我正在使用捆绑器`:path => '/path/to/gem'`的功能来构建和使用修改后的上游 gem，它`Rake::FileList`在其 .gemspec 中使用。

在这个阶段，我正在安装的捆绑包尚未激活，或者可能是安装顺序禁止捆绑器使用`rake`.

我正在使用红宝石 1.8.7。

我的宝石文件：

```
source 'http://rubygems.org'

gem "rake"
gem "foreign_gem", :path => '/home/user/src/foreign_gem' 
```

我得到的错误：

```
$ bundle install
Unfortunately, a fatal error has occurred. Please see the Bundler 
troubleshooting documentation at http://bit.ly/bundler-issues. Thanks! 
/home/ilya/src/foreign_gem/foreign_gem.gemspec:11: uninitialized constant FileList (NameError)
        from /home/user/.rbenv/versions/1.8.7-p358/lib/ruby/site_ruby/1.8/rubygems/specification.rb:426:in 'initialize'
        from /home/user/src/foreign_gem/foreign_gem.gemspec:1:in 'new'
        from /home/user/src/foreign_gem/foreign_gem.gemspec:1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T20:23:49.263

您应该能够在文件`require 'rake'`顶部添加`foreign_gem.gemspec`以使用`FileList`.

我不知道这是否是最佳做法，但它应该有效。

# android - 如何刷新对话框Android

> ID：14438257
> 
> 赞同：2
> 
> 时间：2013-01-21T12:07:16.703
> 
> 标签：android, dialog, oncreate

我与 builder.setSingleChoiceItem 进行了对话，其中包含用户可以选择的项目数组。但是当用户向该数组添加内容时，该对话框中的列表不会更新，而是显示上一个列表。

我读到您需要重新创建对话框才能实现此目标。你如何重建它？您如何销毁对话框并重新创建其内容？以便您可以刷新列表？

非常感谢您提前回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T02:37:00.110

我找到了答案

```
 @Override
    public void onPrepareDialog(int id, Dialog dialog) 
    {
        switch(id) 
        {
//name of the case of the dialog you want to REFRESH -meaning destroy and recreate
            case REMOVE_WATCH_WORD :
                removeDialog(REMOVE_WATCH_WORD);
                break;

        }
     } 
```

我找到了一种方法来做到这一点。为了每次都重新创建您的对话框以刷新对话框中的所有内容、标题、列表、数组、所有内容，请在 onPrepareDialog 中删除您的对话框。这将允许重置所有值，因为将再次调用 onCreate 对话框。这是解决这个问题的最好、最简单的方法。

# sed - 用 sed 合并匹配的行

> ID：14438258
> 
> 赞同：0
> 
> 时间：2013-01-21T12:07:17.957
> 
> 标签：sed

我在这里看到了一些答案，但无法让它们为我工作。我有这样的文字：

```
line1
line2 text=^M
line3
line4 
```

基本上我需要的是`=^M\n`用空字符替换`s/=^M\n//`，所以输出是（^M 是特殊字符 ctrl+v ctrl+m）

```
line1
line2 textline3
line4 
```

我知道这是一些 sed 分支，但我无法让它们工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:16:07.747

单程：

```
$ sed '/^M/{N;s/=^M\n//;}' file
line1
line2 textline3
line4 
```

其中 ^M 必须输入为：Ctrl-V + Ctrl-M

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T02:40:06.483

awk 解决方案

```
 #awk -f myawk.sh temp.txt
   BEGIN { print "Start Records"}
   {
       if ($2 ~ /=\^M/){
           a=$1;
           gsub("=\\^M","",$2);
           b=$2; f=1
       }
       else {
          if(f==1){
              print a""b""$0;
              a="";
              b="";
          }else{
          print $0
          }
      }
  }
  END {print "Process Complete"} 
```

# python - Python 3 中单个变量的意外多次返回

> ID：14438259
> 
> 赞同：0
> 
> 时间：2013-01-21T12:07:18.123
> 
> 标签：python, python-3.x

我编写了一些代码，以便人们可以输入日期。停止输入小于 1 或大于 12 的月份的错误检查应仅在其在这些范围内时返回一个值。如果我输入一些“超出范围”的数字，它会正确地重新要求重新输入一个月，但会返回所有值。到底是怎么回事？

```
# the question asked to get the month input for the xml updater
def month_q():
    try:
        month = int(input('What was the month [MM] which the installers were  updated/created by xxx?:'))
    except:
        print("That was not a valid number. Please re-enter a 2 digit month")
        month_q()
    updatemonth = month_check(month)
    print("Month q returning:", updatemonth)
    return updatemonth

# check the update month is a valid month
def month_check(month):
    if month < 1:
        print("The month must be a number between 01 and 12\. Please re-enter")
        month_q()
    elif month > 12:
        print("The month must be a number between 01 and 12\. Please re-enter")
        month_q()
    else:
        print("Month_check returning month:", month)
        return month

# this updates the xml file with the date of the last installer    
def xml_updater():
    updatemonth = month_q()
    print("Update month:", updatemonth)

xml_updater() 
```

结果是在输入正确的月份“12”之前输入坏月份“15”、“14”和“13”是：

```
What was the month [MM] which the installers were updated/created by xxx?:15
The month must be a number between 01 and 12\. Please re-enter
What was the month [MM] which the installers were updated/created by xxx?:14
The month must be a number between 01 and 12\. Please re-enter
What was the month [MM] which the installers were updated/created by xxx?:13
The month must be a number between 01 and 12\. Please re-enter
What was the month [MM] which the installers were updated/created by xxx?:12
Month_check returning month: 12
Month q returning: 12
Month q returning: None
Month q returning: None
Month q returning: None
Update month: None 
```

到底是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:13:12.653

你的函数没有返回任何东西；它一次又一次地调用问题函数，但忽略了返回值：

```
def month_check(month):
    if month < 1:
        print("The month must be a number between 01 and 12\. Please re-enter")
        month_q()
    elif month > 12:
        print("The month must be a number between 01 and 12\. Please re-enter")
        month_q()
    else:
        print("Month_check returning month:", month)
        return month 
```

如果月份小于 1 或大于 12，函数将返回`None`（默认）。该语句`updatemonth = month_check(month)`然后分配`None`给`updatemonth`并在`print("Month q returning:", updatemonth)`运行时打印`Month q returning: None`。但是由于您`month_q`递归调用，然后返回到上一个`month_check()`调用，然后`None`再次返回，依此类推。

这是您的函数的嵌套跟踪，如`month_q`调用`month_check`调用`month_q`等：

```
month_q():
    What was the month [MM] which the installers were updated/created by xxx?:15
    month_check(15):
        The month must be a number between 01 and 12\. Please re-enter
        month_q():
            What was the month [MM] which the installers were updated/created by xxx?:14
            month_check(15):
                The month must be a number between 01 and 12\. Please re-enter
                month_q():
                    What was the month [MM] which the installers were updated/created by xxx?:13
                    month_check(13):
                        The month must be a number between 01 and 12\. Please re-enter
                        month_q():
                            What was the month [MM] which the installers were updated/created by xxx?:12
                            month_check(12):
                                Month_check returning month: 12
                                <- 12
                            Month q returning: 12
                            <- 12
                        <- None
                    Month q returning: None
                    <- None
                <- None
            Month q returning: None
            <- None
        <- None
    Month q returning: None
    <- None
Update month: None 
```

相反，让检查函数返回 True 或 False 以指示正确的结果，并将要求重新输入的请求留给`month_q`.

用`while`循环而不是递归来做到这一点；如果你必须经常问，你最终会得到一个递归太深的异常。

```
def month_q():
    while True:
        try:
            month = int(input('What was the month [MM] which the installers were  updated/created by xxx?:'))
            if not month_check(month):
                raise ValueError()
        except ValueError:
            print("Please re-enter a 2 digit month")
            continue
        print("Month q returning:", month)
        return month

# check the update month is a valid month
def month_check(month):
    if month < 1 or month > 12:
        print("The month must be a number between 01 and 12")
        return False
    return True 
```

您也可以内联该检查：

```
def month_q():
    while True:
        try:
            month = int(input('What was the month [MM] which the installers were  updated/created by xxx?:'))
            if month < 1 or month > 12:
                raise ValueError()
        except ValueError:
            print("Please re-enter a 2 digit month between 01 and 12.")
            continue
        print("Month q returning:", month)
        return month 
```

使用一揽子`except:`条款绝不是一个好主意。在上面的代码中，当您输入非整数值时，我会捕获`ValueError`引发的错误，如果您确实输入了整数但它不是介于 1 和 12 之间的值，则会*引发相同的异常。*这大大简化了“不是一个月”的错误处理。`int()`

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:12:14.107

尝试这个：

```
try:
    month = int(input('What was the month [MM] which the installers were  updated/created by xxx?:'))
except:
    print("That was not a valid number. Please re-enter a 2 digit month")
    month_q()
    break 
```

那应该会停止打印不正确的月份

另外，你应该改变

```
updatemonth = month_check(month)
print("Month q returning:", updatemonth)
return updatemonth 
```

至：

```
updatemonth = month_check(month)
try:
    updatemonth
except NameError:
    updatemonth = None

if updatemonth is None:
    break
print("Month q returning:", updatemonth)
return updatemonth 
```*

# php - 无法访问视图中的验证错误

> ID：14438260
> 
> 赞同：6
> 
> 时间：2013-01-21T12:07:18.013
> 
> 标签：php, validation, laravel-4, blade

我已经设置了一个带有一些验证的控制器。

```
public function attemptLogin()
{
    $rules = array(
        'email'=>'required|email', 
        'password'=>'required'
    );

    $validator = Validator::make(Input::all() , $rules);
    if($validator->fails()){
        return Redirect::to('login')->withErrors($validator);
    };
} 
```

如果我直接在控制器中输出消息

```
$messages = $validator->messages();
print_R($messages->all()); 
```

我收到验证错误 - 但是如果我重定向：

```
return Redirect::to('login')->withErrors($validator); 
```

视图中可用的`$errors`数组总是空的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-09T15:35:35.387

来自[laravel 四个文档](http://laravel.com/docs/4.2/validation)

> 请注意，当验证失败时，我们使用该`withErrors`方法将 Validator 实例传递给 Redirect。此方法会将错误消息闪烁到会话，以便它们在下一个请求时可用。

变量`$errors`它不是一个数组。

> 该`$errors`变量将是 的一个实例 `MessageBag`。

~~出于某种原因，我不太喜欢@seamlss 的想法。~~ 你可以用这个~~反而。~~

```
@if(Session::has('errors'))
<? $errors = Session::get('errors'); ?>
<div class="alert alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <ul>
        <li id="form-errors" >
            <h3> {{ $errors->first('email') }}</h3>
        </li>
    </ul>
</div>
@endif 
```

*我已经使用了一些`bootstrap`组件，不要混淆，您唯一需要的是带有花括号和神奇@符号的线条。*

来自[laravel 文档错误消息和视图](http://laravel.com/docs/4.2/validation#error-messages-and-views)

> 因此，重要的是要注意 $errors 变量将始终在您的所有视图中可用，在每个请求中，允许您方便地假设 $errors 变量始终已定义并且可以安全使用。

你也可以检查[这个](http://jasonlewis.me/article/laravel-using-forms-and-the-validator)

```
@if( $errors->has('email') )
    <div class="control-group error">
        <label class="control-label" for="email">Email</label>
        <div class="controls">
            <input type="text" id="email" placeholder="Email" name="email">
            <span class="help-inline">{{ $errors->first('email') }}</span>
        </div>
    </div>
@endif 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-16T04:55:04.950

我已经成功重定向使用`->withErrors($validation)`

然后在视图中检查条件`@if( $errors->count() > 0 )`...

```
@if( $errors->count() > 0 )
    <p>The following errors have occurred:</p>

    <ul id="form-errors">
        {{ $errors->first('username', '<li>:message</li>') }}
        {{ $errors->first('password', '<li>:message</li>') }}
        {{ $errors->first('password_confirmation', '<li>:message</li>') }}
    </ul>   
@endif 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:22:45.823

你有没有尝试过：

```
return Redirect::to('login')->withErrors($validator); 
```

或者

```
return Redirect::to('login')->withErrors($validator->messages()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-08T10:40:44.050

当您难以显示错误并且它们通过正确传递时，这是另一种可能性`->withErrors()`。如果您重定向到必须执行任何类型的自身状态检查和自身调用的控制器操作，`->withErrors()`它将隐藏第`$errors`一个注入的操作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-22T14:39:51.230

尝试以下

```
return Redirect::to('login')->with('errors',$validator->errors->all()); 
```

然后从您的视图中遍历此错误

```
foreach($errors as $error) {
    print $error;
} 
```

# ruby - 使用 Ruby 读取 Windows 文件夹/文件权限

> ID：14438261
> 
> 赞同：1
> 
> 时间：2013-01-21T12:07:19.020
> 
> 标签：ruby, windows, permissions

我想获得 Ruby 中的文件夹权限列表。作为输入，我给出例如`'c://temp'`和输出应该是，哪个用户/组具有权限以及哪些权限。

接下来是传递第二个参数（用户或组），以便 ruby​​ 可以告诉我该组或用户在哪个文件夹上具有权限（读/写等）。

找不到任何东西并且`get_permissions`from`win32-file-gem`不起作用。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:04:48.043

尝试使用 win32-file-stat gem。例如：

```
require 'win32/file/stat'
f = File::Stat.new("c:/temp")
p f 
```

会给你这样的东西：

`#<File::Stat archive=false atime=1970-01-01 04:00:00 +0400 blksize=4096 blockdev=false blocks=0 compressed=false ctime=1970-01-01 04:00:00 +0400 dev=C: encrypted=false gid=0 hidden=false indexed=true ino=0 mode=040755 mtime=1970-01-01 04:00:00 +0400 nlink=1 normal=false offline=false rdev=2 readonly=false reparse_point=false size=0 sparse=false system=false temporary=false uid=0`

您可以在其中看到`mode`和作为数字，分别由 和`gid`访问。`uid```f.mode``f.gid``f.uid`

# user-interface - 更改文本选择颜色

> ID：14438268
> 
> 赞同：0
> 
> 时间：2013-01-21T12:07:35.520
> 
> 标签：user-interface, ios6, uitextview, selection

我怀疑在 iOS 6（特别是在 ）中无法更改文本选择（最好是句柄）颜色`UITextView`。

但为了确定，我想问一下。谷歌搜索并没有让我找到任何有用的东西，所以如果有人有明确的答案，我会很高兴听到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:37:26.377

我认为你可以这样做：

```
 UIColor *color = [UIColor blackColor];
 textField.attributedPlaceholder = [[NSAttributedString alloc] initWithString:placeholderText attributes:@{NSForegroundColorAttributeName: color}]; 
```

看不到[这里](http://iphonedevelopment.blogspot.in/2011/03/attributed-strings-in-ios.html)

# java - 如何反序列化 Java 中 xml 文件中的电子邮件列表？

> ID：14438272
> 
> 赞同：0
> 
> 时间：2013-01-21T12:07:55.413
> 
> 标签：java, xml, email, xstream

我有一个应用程序，它会输出一个包含电子邮件内容的 XML 文件。此 XML 文件将由不同的应用程序解析并发送电子邮件。验证应用程序发送电子邮件的部分。

实际发送电子邮件的方法是这样的：

```
public void sendEmail(List<String> toRecipients, List<String> ccRecipients, List<String> bccRecipients, String subject, String body) { 

// code.. 

} 
```

我尝试发送的测试电子邮件应该来自这个 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<email>
  <to>
    <recipient>user1@somecompany.com</recipient>
    <recipient>user2@somecompany.com</recipient>
  </to>
  <cc>
    <recipient>user3@somecompany.com</recipient>
  </cc>
  <bcc>
    <recipient>user5@somecompany.com</recipient>
  </bcc>
  <subject>test ABC </subject>
  <body><h1>test XYZ</h1></body>
</email> 
```

我正在使用 XStream 库，我的问题在于解析 . 我尝试了几种不同的方法，但被卡住了。XML解析方法是：

```
private void parseXmlFile(String xmlFilePath) {
        XStream xstream = new XStream(new DomDriver());

        xstream.alias("email", EmailPojo.class);
        xstream.alias("recipient", Recipient.class);
        xstream.alias("to", To.class);
        xstream.alias("cc", Cc.class);
        xstream.alias("bcc", Bcc.class);

        xstream.addImplicitCollection(To.class, "to", "to", Recipient.class);
        // xstream.addImplicitCollection(To.class, "to");
        // xstream.addImplicitCollection(Cc.class, "cc");
        // xstream.addImplicitCollection(Bcc.class, "bcc");

        EmailPojo emailPojo = new EmailPojo();

        StringBuilder sb = new StringBuilder();
        try {
            // filename is filepath string
            BufferedReader br = new BufferedReader(new FileReader(new File(xmlFilePath)));
            String line;

            while ((line = br.readLine()) != null) {
                sb.append(line.trim());
            }
        } catch (FileNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }

        List<EmailPojo> emailPojoList = new ArrayList<EmailPojo>();

        try {
            emailPojoList = (List<EmailPojo>) xstream.fromXML(sb.toString());

        } catch (Exception e) {
            emailPojo = null;// TODO: handle exception
        }
    } 
```

这似乎很简单，但我无法做到这一点。我在这里想念什么？这里有什么问题？

提前致谢！

编辑：忘记了异常输出：

`Exception in thread "main" com.thoughtworks.xstream.InitializationException: No field "to"`用于隐式收集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:05:01.453

该行：

```
xstream.addImplicitCollection(To.class, "to", "to", Recipient.class); 
```

是说类上有一个集合字段，`To`它是应该添加`to`实例的地方。`Recipient`

没有看到`To`类，这是一个猜测，但我认为类的集合字段上的字段`To`更有可能被调用`recipients`，应该注册：

```
xstream.addImplicitCollection(To.class, "recipients", Recipient.class); 
```

请参阅 JavaDoc[`xstream.addImplicitCollection(Class, String, Class)`](http://xstream.codehaus.org/javadoc/com/thoughtworks/xstream/XStream.html#addImplicitCollection%28java.lang.Class,%20java.lang.String,%20java.lang.Class%29)

# wordpress - 在 wordpress 中取消设置 posttype 数组

> ID：14438279
> 
> 赞同：0
> 
> 时间：2013-01-21T12:08:23.303
> 
> 标签：wordpress, custom-post-type

我有一系列帖子，我将其显示如下

```
 $types = get_post_types( array(  
                                    'public' => true,
                                    '_builtin' => false), 'objects' ); 
    foreach ( $types as $type )
      echo '<li>'.'<a href="'.home_url().'/'.$type->name.'" id="'.$type->name.'">
      <span class="post-text">'. $type->singular_label.'</span>
      <span class="entry-title" style="display:none;">'.$type->description.'</span>
      </a></li>'; 
```

我必须从上面数组中获得的数组中取消设置数组，这意味着

```
 [news] => stdClass Object
        (
            [labels] => stdClass Object
                (
                    [name] => News
                    [singular_name] => News
                    [add_new] => Add News
                    [add_new_item] => Add New News
                    [edit_item] => Edit News
                    [new_item] => New News
                    [view_item] => View News
                    [search_items] => Search News
                    [not_found] => No News Found
                    [not_found_in_trash] => No News Found in Trash
                    [parent_item_colon] => Parent Page:
                    [all_items] => News
                    [menu_name] => News
                    [edit] => Edit
                    [view] => View News
                    [parent] => Parent News
                    [name_admin_bar] => News
                )

            [description] => This will display all the posts under news post type.
            [publicly_queryable] => 1
            [exclude_from_search] => 
            [capability_type] => post
            [map_meta_cap] => 1
            [_builtin] => 
            [_edit_link] => post.php?post=%d
            [hierarchical] => 1
            [public] => 1
            [rewrite] => Array
                (
                    [slug] => news
                    [with_front] => 1
                    [pages] => 1
                    [feeds] => 1
                    [ep_mask] => 1
                )

            [has_archive] => 1
            [query_var] => news
            [register_meta_box_cb] => 
            [taxonomies] => Array
                (
                    [0] => category
                )

            [show_ui] => 1
            [menu_position] => 
            [menu_icon] => 
            [can_export] => 1
            [show_in_nav_menus] => 1
            [show_in_menu] => 1
            [show_in_admin_bar] => 1
            [delete_with_user] => 
            [label] => News
            [singular_label] => News
            [name] => news
            [cap] => stdClass Object
                (
                    [edit_post] => edit_post
                    [read_post] => read_post
                    [delete_post] => delete_post
                    [edit_posts] => edit_posts
                    [edit_others_posts] => edit_others_posts
                    [publish_posts] => publish_posts
                    [read_private_posts] => read_private_posts
                    [read] => read
                    [delete_posts] => delete_posts
                    [delete_private_posts] => delete_private_posts
                    [delete_published_posts] => delete_published_posts
                    [delete_others_posts] => delete_others_posts
                    [edit_private_posts] => edit_private_posts
                    [edit_published_posts] => edit_published_posts
                )

        )

    [wardrobes] => stdClass Object
        (
            [labels] => stdClass Object
                (
                    [name] => Wardrobes
                    [singular_name] => Wardrobes
                    [add_new] => Add Wardrobes
                    [add_new_item] => Add New Wardrobes
                    [edit_item] => Edit Wardrobes
                    [new_item] => New Wardrobes
                    [view_item] => View Wardrobes
                    [search_items] => Search Wardrobes
                    [not_found] => No Wardrobes Found
                    [not_found_in_trash] => No Wardrobes Found in Trash
                    [parent_item_colon] => Parent Page:
                    [all_items] => Wardrobes
                    [menu_name] => Wardrobes
                    [edit] => Edit
                    [view] => View Wardrobes
                    [parent] => Parent Wardrobes
                    [name_admin_bar] => Wardrobes
                )

            [description] => This will show all the posts under Wardrobes post type.
            [publicly_queryable] => 1
            [exclude_from_search] => 1
            [capability_type] => post
            [map_meta_cap] => 1
            [_builtin] => 
            [_edit_link] => post.php?post=%d
            [hierarchical] => 1
            [public] => 1
            [rewrite] => Array
                (
                    [slug] => wardrobes
                    [with_front] => 1
                    [pages] => 1
                    [feeds] => 1
                    [ep_mask] => 1
                )

            [has_archive] => 1
            [query_var] => wardrobes
            [register_meta_box_cb] => 
            [taxonomies] => Array
                (
                    [0] => category
                )

            [show_ui] => 1
            [menu_position] => 
            [menu_icon] => 
            [can_export] => 1
            [show_in_nav_menus] => 1
            [show_in_menu] => 1
            [show_in_admin_bar] => 1
            [delete_with_user] => 
            [label] => Wardrobes
            [singular_label] => Wardrobes
            [name] => wardrobes
            [cap] => stdClass Object
                (
                    [edit_post] => edit_post
                    [read_post] => read_post
                    [delete_post] => delete_post
                    [edit_posts] => edit_posts
                    [edit_others_posts] => edit_others_posts
                    [publish_posts] => publish_posts
                    [read_private_posts] => read_private_posts
                    [read] => read
                    [delete_posts] => delete_posts
                    [delete_private_posts] => delete_private_posts
                    [delete_published_posts] => delete_published_posts
                    [delete_others_posts] => delete_others_posts
                    [edit_private_posts] => edit_private_posts
                    [edit_published_posts] => edit_published_posts
                )

        )

    [journal] => stdClass Object
        (
            [labels] => stdClass Object
                (
                    [name] => Journal
                    [singular_name] => Journal==
                    [add_new] => Add Journal==
                    [add_new_item] => Add New Journal==
                    [edit_item] => Edit Journal==
                    [new_item] => New Journal==
                    [view_item] => View Journal==
                    [search_items] => Search Journal
                    [not_found] => No Journal Found
                    [not_found_in_trash] => No Journal Found in Trash
                    [parent_item_colon] => Parent Page:
                    [all_items] => Journal
                    [menu_name] => Journal
                    [edit] => Edit
                    [view] => View Journal==
                    [parent] => Parent Journal==
                    [name_admin_bar] => Journal==
                )

            [description] => This will show all the posts under journal post type.
            [publicly_queryable] => 1
            [exclude_from_search] => 
            [capability_type] => post
            [map_meta_cap] => 1
            [_builtin] => 
            [_edit_link] => post.php?post=%d
            [hierarchical] => 1
            [public] => 1
            [rewrite] => Array
                (
                    [slug] => journal
                    [with_front] => 1
                    [pages] => 1
                    [feeds] => 1
                    [ep_mask] => 1
                )

            [has_archive] => 1
            [query_var] => journal
            [register_meta_box_cb] => 
            [taxonomies] => Array
                (
                    [0] => category
                    [1] => post_tag
                )

            [show_ui] => 1
            [menu_position] => 
            [menu_icon] => 
            [can_export] => 1
            [show_in_nav_menus] => 1
            [show_in_menu] => 1
            [show_in_admin_bar] => 1
            [delete_with_user] => 
            [label] => Journal
            [singular_label] => Journal==
            [name] => journal
            [cap] => stdClass Object
                (
                    [edit_post] => edit_post
                    [read_post] => read_post
                    [delete_post] => delete_post
                    [edit_posts] => edit_posts
                    [edit_others_posts] => edit_others_posts
                    [publish_posts] => publish_posts
                    [read_private_posts] => read_private_posts
                    [read] => read
                    [delete_posts] => delete_posts
                    [delete_private_posts] => delete_private_posts
                    [delete_published_posts] => delete_published_posts
                    [delete_others_posts] => delete_others_posts
                    [edit_private_posts] => edit_private_posts
                    [edit_published_posts] => edit_published_posts
                )

        )

) 
```

现在，当我得到自定义帖子类型数组时，我必须从数组中删除“衣柜”。

wordpress 或 php.ini 中是否有任何功能？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T04:24:58.463

如果你用 google 搜索过`php`+ `unset`，你会发现：

> ### [unset - 取消设置给定变量](http://php.net/manual/en/function.unset.php)
> 
> **unset()**销毁指定的变量。**函数内部unset()**
> 的行为可能因您尝试销毁的变量类型而异。

 **在您的示例中：`unset( $types['wardrobes'] );`**

# c++ - 如何从堆中删除变量？

> ID：14438287
> 
> 赞同：3
> 
> 时间：2013-01-21T12:08:43.337
> 
> 标签：c++, visual-c++, heap-memory, free

我一直在做一些研究，但仍然找不到解决我的问题的方法。据我所知，当我们在函数之外声明变量时，它们是在堆内分配的，并且直到执行结束才释放内存；除非我们专门使用该`delete`功能这样做。我尝试了以下函数来释放在代码开头声明的变量，但它们都不起作用（在 dbgdel.cpp 中出现调试错误）：`delete`, `delete []`, `free()`. 我究竟做错了什么？

我将粘贴在代码的摘要版本下面。任何帮助表示赞赏。谢谢！

（我知道在正确的编程中通常不需要全局变量，但这不是我的一段代码，我只是想按原样修复它。）

```
#include <stdio.h>
#include <conio.h>
#include <cv.h>
#include <highgui.h>
#include <cxcore.h>
#include "Viewer.h"
....    
// Arrays
float z_base [5201][5201];
....

uchar maskThreshold [5200][5200];
...

void main(){
.....       
     delete [] z_base;
     //free (z_base);
     //delete z_base;
     //free (&z_base);    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:10:34.347

> 据我所知，当我在每个函数之外声明变量时，它们是在堆内分配的

这不是真的。通常，您只需调用`delete`or`delete[]`如果您已分别使用`new`or分配内存`new []`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T12:11:59.107

1.  没有堆（在 C++ 中）。
2.  所有内存在执行结束时被释放。
3.  `delete`什么你`new`，`delete[]`什么你`new[]`。
4.  `void main`是错误的（main 必须返回 int）。

就这些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T12:10:15.460

你没有。运行时将为您完成。根据经验，您只需要`delete/delete[]`使用`new/new[]`.

另外，请注意全局变量不是在堆上分配的，而是在静态内存中的。

# java - 在 Android 上使用 Ant/Eclipse 将目标或属性设置为子项目

> ID：14438294
> 
> 赞同：0
> 
> 时间：2013-01-21T12:08:56.077
> 
> 标签：java, android, eclipse, ant

我需要切换到 Ant，我设法编译并安装了 Android apk 文件，但我没有设法将属性或特定目标传输到引用的库。

我在引用库中 build.xml 上的代码：

```
<echo message="Property value is '${foo.dist}'" />

<target name="AfficherVersionAnt">
  <echo message="Version d'Ant utilisée : ${ant.version}"/>
</target> 
```

当我把它放在起始包中时，相同的代码是有效的。

```
<property name="foo.dist" value="true"/> 
```

（对于目标，如果我与目标一起启动）

我的 ant 配置是通过以下方式生成的：

```
"C:\Program Files (x86)\Android\android-sdk\tools\android" update project -p "D:\project" 
```

而且我看不到在哪里可以设置链接

有人能帮我吗 ？我需要全局变量或类似的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:22:36.293

在eclipse中，您可以为ant定义自己的变量

转到外部工具配置 > 您的配置文件 > 环境，并定义新的环境变量。

# python - 忽略 DataFrame CSVread 中的第一行

> ID：14438295
> 
> 赞同：0
> 
> 时间：2013-01-21T12:08:58.120
> 
> 标签：python, pandas

我目前正在尝试构建一个相当简单的脚本，它将比较来自 CSV 的两个 DataFrame 并执行内部合并以删除重复项。现在我注意到我的一个 CSV 文件如下所示：

```
Row [0]: One column
Row [1:]: 2+ columns 
```

现在，当我尝试通过 pandas.csv_read(...) 导入它时，我收到以下错误

```
Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.10.0-py2.7-macosx-10.5-i386.egg/pandas/io/parsers.py", line 391, in parser_f
return _read(filepath_or_buffer, kwds)
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.10.0-py2.7-macosx-10.5-i386.egg/pandas/io/parsers.py", line 207, in _read
return parser.read()
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.10.0-py2.7-macosx-10.5-i386.egg/pandas/io/parsers.py", line 624, in read
ret = self._engine.read(nrows)
File "/Library/Frameworks/Python.framework/Versions/7.3/lib/python2.7/site-packages/pandas-0.10.0-py2.7-macosx-10.5-i386.egg/pandas/io/parsers.py", line 945, in read
data = self._reader.read(nrows)
File "parser.pyx", line 634, in pandas._parser.TextReader.read (pandas/src/parser.c:5795)
File "parser.pyx", line 656, in pandas._parser.TextReader._read_low_memory (pandas/src/parser.c:6015)
File "parser.pyx", line 734, in pandas._parser.TextReader._read_rows (pandas/src/parser.c:6892)
File "parser.pyx", line 791, in pandas._parser.TextReader._convert_column_data (pandas/src/parser.c:7596)
File "parser.pyx", line 1015, in pandas._parser.TextReader._get_column_name (pandas/src/parser.c:10425) 
```

我认为这与第一行有关，因为当我删除它时，问题就消失了。我怎样才能忽略这些错误并用空值填充其余部分？

最好的，奥利弗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:31:43.997

我认为正确的答案是你不能，一般来说。 `csv_read`期望输入格式正确。当您超出预期输入时，每个人都可能想要不同的行为。例如，如果您的输入如下所示：

```
0
1,2,3
4,5,6
7,8,9 
```

一个人可能想忽略第一行，另一个人可能想为第一行的两个缺失列填充 NA 值，另一个人可能只想读取第一列（推断第一行只有一列，并忽略后续行上的多余值）。这三种解决方案都是合理的，因此最好将数据清理工作留给用户。

话虽如此，如果您发布有关您尝试清理的输入类型的更多信息，我相信这里有人可以帮助您。

# html - 将 gzip 压缩的 css 文件导入 html 标头？

> ID：14438301
> 
> 赞同：0
> 
> 时间：2013-01-21T12:09:10.037
> 
> 标签：html, css, wordpress, gzip

为了增加我的网站响应时间，我正在尝试使用 gzip 压缩的 css 和 js 文件。我为我的 wordpress 网站创建了 style.css.gz 文件，但无法导入它。我将 style.css 和 style.css.gz 文件都复制到了所需的目录中，但它没有导入文件。我已经更改了 .htaccess 文件。在线工具 whatsmyip.org 向我显示服务器已准备好将 gzip 压缩文件发送到浏览器，但通过 gzipwtf.org，style.css 显示为解压缩。有人可以帮助我如何将此文件导入我的网页。目前我将其导入为：

```
 <link rel="stylesheet" type="text/css" href="http://localhost:8888/wordpress/wp-content/themes/WP-Answers-Theme/style.css" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:16:19.167

您可以通过 htaccess 文件本身使用 gzip 压缩。无需自己抓取文件即可对其进行处理。只需将以下内容添加到您的 htaccess 中：

```
<ifModule mod_gzip.c>
  mod_gzip_on Yes
  mod_gzip_dechunk Yes
  mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
  mod_gzip_item_include handler ^cgi-script$
  mod_gzip_item_include mime ^text/.*
  mod_gzip_item_include mime ^application/x-javascript.*
  mod_gzip_item_exclude mime ^image/.*
  mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
</ifModule> 
```

# javascript - jQuery 悬停在后续悬停时重新定位

> ID：14438306
> 
> 赞同：0
> 
> 时间：2013-01-21T12:09:24.037
> 
> 标签：javascript, jquery, jquery-ui, position

我`hover`在一个元素上设置了一个事件，该元素使用 jQuery UI 的`position`函数`div`在其下方显示一个右侧，“out”设置为隐藏它`div`。

问题是，随后的悬停位置`div`在每次悬停时越来越远。

示例：http: [//jsfiddle.net/Shpigford/8ZkgJ/](http://jsfiddle.net/Shpigford/8ZkgJ/)

将鼠标悬停在红色框上，然后再次将鼠标悬停在它上面，您会看到蓝色框很快就被定位得越来越远。

`click`如果我更改为一个事件，也会发生同样的事情。`div`当我隐藏然后尝试再次显示它时，定位似乎发生了一些奇怪的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:15:45.097

而不是`position({...}).show()`，使用`show().position({...})`. 原因是`positon`当元素不可见时它将不起作用。[您可以在http://api.jqueryui.com/position/](http://api.jqueryui.com/position/)找到以下注释：

> jQuery UI 不支持定位隐藏元素

# wcf - 如何从 WCF 服务读取 xml 文件？

> ID：14438312
> 
> 赞同：2
> 
> 时间：2013-01-21T12:09:37.423
> 
> 标签：wcf

我想从 WCF 服务读取 xml 文件。xml 文件 settings.xml 与服务 exe 位于同一文件夹中，并且该服务作为 Windows 服务托管。

当客户端访问服务时，服务 exe 正在查看 system32 文件夹并抛出未找到文件异常

```
C:\Windows\system32\Settings.xml 
```

这是 try catch 块中的代码，并抛出了客户端捕获的 FaultException。

```
XmlSerializer serializer = new XmlSerializer(_appSettings.GetType());
            StreamReader sr = new StreamReader("Settings.xml", Encoding.UTF8);
            _appSettings = (SpecialityFinishingSettings)serializer.Deserialize(sr);
            sr.Close(); 
```

基本上我正在尝试读取 xml 并将其反序列化为可以与服务一起使用的对象。

我该怎么做才能从服务中读取此文件？

使用 InstallUtil.exe 安装服务

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:51:59.567

问题是“Settings.xml”没有作为文件找到。您需要指定完整路径。您可以：

*   使用绝对路径
*   将路径存储在配置文件中。此路径将是您将从中打开文件的文件夹，然后可以将其附加到文件名中。
*   按照 Anand 的建议获取应用程序运行的路径 (System.AppDomain.CurrentDomain.BaseDirectory + "Settings.xml";)

# c# - 从数据表中获取特定列

> ID：14438318
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:09:48.437
> 
> 标签：c#, datatable, linq-to-dataset

我需要数据表中的特定列将其绑定到 DataGridView 中。我有以下专栏。

> Work1 价格 面积 que Len bre 尺寸
> A 12 x 1 1.2 1 1.2
> A 12 y 2 2 2.2 4.4
> A 12 z 3 11 1 11

以上是我的数据表，我需要指定列，即**Area、Que、bre、size [Que * (bre * Len)]**
为了获得我在 Linq-to-DataTable 查询之后使用的这种类型的数据。

```
 var data = dt.AsEnumerable().Select
                (r => new
                {
                    Area = r.Field<string>("Area"),
                    Que = r.Field<int>("Quantity"),
                    Breath = r.Field<decimal>("Breath"),
                    Length = r.Field<decimal>("Length"),
                    totLen = r.Field<int>("Quantity") * (r.Field<decimal>("Breath") * r.Field<decimal>("Length"))
                }).ToList(); 
```

但是它不起作用，它没有价值，我不知道为什么？谁能告诉我该怎么做？如果有任何其他替代选项可用，我很乐意看到......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:20:58.067

> 它给出错误“指定的演员表无效。”

所以你得到了一个`InvalidCastException`扩展[`Field`](http://msdn.microsoft.com/en-us/library/bb360891.aspx)方法。

您必须检查哪一列的类型与您指定的类型不匹配，例如：

```
totLen = r.Field<int>("Quantity") * r.Field<decimal>("Breath") * r.Field<decimal>("Length") 
```

如果三列中的任何一列的类型与您提供的类型不同，则上述操作将失败。也许`Breath`不是 a`decimal`而是 a `double`。

编辑您的问题并提供数据库中的类型，我们可以帮助识别正确的类型。

# django - 如何在守护进程模式下运行 Django 服务器？

> ID：14438321
> 
> 赞同：2
> 
> 时间：2013-01-21T12:10:12.830
> 
> 标签：django

我想在守护进程模式下运行 Django 开发服务器，这样当我退出 shell 时，服务器仍然可以运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:29:59.427

除了@Bernhard 所说的，如果您打算将其用于生产环境，您应该使用 mod_wsgi 在 apache 下运行 django：

[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:23:16.800

你在 Linux 上吗？两种选择：

1.  使用`screen` [http://linux.die.net/man/1/screen](http://linux.die.net/man/1/screen)
2.  [使用http://linux.die.net/man/1/nohup](http://linux.die.net/man/1/nohup)启动 Django 服务器`nohup`

# asp.net-mvc - 为什么是 被赋予 NoValidate 属性？

> ID：14438325
> 
> 赞同：33
> 
> 时间：2013-01-21T12:10:20.940
> 
> 标签：asp.net-mvc, html, jquery-validate

无法让 jQuery Validate 插件正常运行。

模型

```
public class FooVM
{
    [Required]
    public string Name { get; set; }
} 
```

布局

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <script src="@Url.Content("~/scripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/scripts/jquery-migrate-1.0.0.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/scripts/jquery.validate.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
        <script src="@Url.Content("~/scripts/bootstrap.min.js")" type="text/javascript"></script>
        <link href="@Url.Content("~/content/bootstrap-responsive.min.css")" rel="stylesheet" type="text/css" />
        <link href="@Url.Content("~/content/bootstrap.min.css")" rel="stylesheet" type="text/css" />
        <title>@ViewBag.Title</title>
    </head>
    <body>
    <div class="container">
        <div class="row">
            <div class="span12">
                <div class="navbar">
                    <div class="navbar-inner">
                        <a class="brand" href="#">idoneit</a>
                        <ul class="nav">
                            <li class="menu-link">@Html.ActionLink("Home", "index", "bar")</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="span12 error-container">

            </div>
            <div class="span12 main-body">
                @RenderBody()
            </div>
        </div>
    </div>
    </body>
</html> 
```

看法

```
model bootstrapvalidate.Models.FooVM
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@using (Html.BeginForm("add", "bar", FormMethod.Post, new { @class = "form-horizontal" }))
{
    <fieldset>
        @Html.ValidationSummary()
        <legend>Testing Bootstrap & Validate</legend>
        <div class="control-group">
            <label for="Name" class="control-label">Name</label>
            <div class="controls">
              @Html.TextBoxFor(x => x.Name) 
            </div>
            <button type="submit" class="btn">Add!</button>
        </div>
    </fieldset>
} 
```

当我提交时，错误消息会短暂显示，然后表单无论如何都会发回。

我注意到的一件事是我以前没有见过的标记包含“novalidate”属性

```
<form action="/bar/add" class="form-horizontal" method="post" novalidate="novalidate"> 
```

从我读过的位来看，这是阻止验证的 HTML5 属性。所以，是的，这就是我认为的原因。

问题是 - 为什么将它添加到表单中？我没有求过！

编辑：根据@rob 的回答进行了一些挖掘，似乎 jquery validate 抛出异常，因此回发..

![调试结果](../Images/eaef6cf113d39b82b368ffe45c4df195.png)

这是 jquery.validate 1.10

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-21T12:17:12.430

该[`novalidate`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form)属性由 jquery.validate 第 32 行添加：

```
// Add novalidate tag if HTML5.
this.attr('novalidate', 'novalidate'); 
```

如果您使用的是 HTML5，请[删除该属性](http://forum.jquery.com/topic/disable-jquery-validate-when-html5-form-validation-is-present)：

```
$("#contactForm").validate();
$("#contactForm").removeAttr("novalidate"); 
```

在您的`web.config`中，确保您有：

```
 <appSettings>        
    ...
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
  </appSettings> 
```

还要确保它们没有被注释掉。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-21T14:01:21.393

我认为这确实是一个措辞不佳的问题。

本质上，问题根本不是`novalidation`属性（正如@robasta 所说）。

我无法让 jQuery 1.9 和 jQuery.Validate 1.10 玩得很好。切换回 jQuery 1.83 立即修复它，一切都按我的预期工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-19T04:47:42.170

通过快速浏览并阅读之前的评论，我注意到如果您`data-val=true`在表单中的任何项目上都有该属性，则 novalidate 属性将自动插入`jquery.validate`.

这是有道理的，因为如果您使用这些属性，那么您不打算通过验证，因此 novalidate 属性；但是，通过阅读 w3schools 上的 html5`novalidate`属性，您可以覆盖默认值`novalidate`；新`jquery.validate`脚本必须考虑到这一点。

我认为这是瘦身，如果有人同意，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-29T10:25:08.727

改变

```
// Add novalidate tag if HTML5.
this.attr('novalidate', 'novalidate'); 
```

至

```
// Add novalidate tag if HTML5.
    if (typeof (Worker) !== "undefined") { this.attr('novalidate', 'novalidate'); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2021-03-23T08:03:12.060

对于默认的 jquery 表单验证，在 Html.BeginForm @novalidate="" 中添加此属性

# mysql - mysql加速搜索查询

> ID：14438334
> 
> 赞同：0
> 
> 时间：2013-01-21T12:10:55.433
> 
> 标签：mysql

我有一个包含 2 列的文章表

```
Id INT(4) PK 自动增量
说明 VARCHAR(250)
（以及更多列）

```

该表包含 500.000 条记录，是一个 INNODB 表。现在我想搜索这样的文章：

```
SELECT COUNT(*) FROM article（描述如'%cannon%'）；
```

执行几乎需要一秒钟..

我该怎么做才能使这更快？

我已经在描述列上找到了索引

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:16:42.563

您应该考虑在描述中添加全文索引：

[http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)

然后使用：

```
SELECT 
    COUNT(*) 
FROM article 
WHERE MATCH (description) AGAINST ('cannon' WITH QUERY EXPANSION); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:14:23.320

查询`like '%cannon%'`很难优化。不，索引不能帮助你。也许全文搜索可以帮助你。

# ruby-on-rails - 在开发环境中静音 Rails memcache 日志记录

> ID：14438343
> 
> 赞同：2
> 
> 时间：2013-01-21T12:11:22.493
> 
> 标签：ruby-on-rails, logging, memcached, environment, dalli

想在开发日志和 STOUT 中静音大量 dalli 输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:11:22.493

使用以下内容创建初始化程序：

```
Rails.cache.silence! 
```

取自[https://github.com/mperham/dalli/issues/207](https://github.com/mperham/dalli/issues/207)

# android - 当前 Loation 没有在 android 中挑选

> ID：14438349
> 
> 赞同：3
> 
> 时间：2013-01-21T12:11:43.950
> 
> 标签：android, google-maps, itemizedoverlay

我现在正在处理一个与谷歌地图服务相关的项目。我想在我的地图上指出我当前的位置。为此，我有了使用 itemizedoverlay 的想法。我在 Geopoint 的帮助下检索当前位置。但是当我在我的代码中使用 itemizedoverlay 时，无法获取该位置，我在我的 OnCreate 方法中使用它。如果我将其移至 OnLocationChanged 方法，则 GeoPoint(point) 将不会被 itemizedoverlay 拾取并且会以错误结束，在目前的情况下，应用程序会被压垮。

```
 MapView mapView;
    Location location;
    LocationManager locationmanager;
    LocationListener locationlistener; 

        public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

      mapView = (MapView) findViewById(R.id.mapView);
      mapView.setTraffic(true);
      mapView.setBuiltInZoomControls(true);

        //locationmanager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  
   // locationlistener = new GPSLocationListener();
      //  locationmanager.requestLocationUpdates(LocationManager.GPS_PROVIDER 0,0,locationlistener);                                                                                         

      GeoPoint point = new GeoPoint(
                (int) (location.getLatitude() * 1E6), 
                (int) (location.getLongitude() * 1E6));

            Toast.makeText(getBaseContext(), 
                "Latitude: " + location.getLatitude() + 
                " Longitude: " + location.getLongitude(), 
                Toast.LENGTH_SHORT).show();

      List<Overlay> mapOverlays = mapView.getOverlays();
      Drawable drawable = this.getResources().getDrawable(R.drawable.icon);

          HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
          OverlayItem overlayitem = new OverlayItem(point,"","" );
          itemizedoverlay.addOverlay(overlayitem);
          mapOverlays.add(itemizedoverlay);

}

/*      private class GPSLocationListener implements LocationListener 
      {
        @Override
        public void onLocationChanged(Location location) {
          if (location != null) {
            GeoPoint point = new GeoPoint(
                (int) (location.getLatitude() * 1E6), 
                (int) (location.getLongitude() * 1E6));

            Toast.makeText(getBaseContext(), 
                "Latitude: " + location.getLatitude() + 
                " Longitude: " + location.getLongitude(), 
                Toast.LENGTH_SHORT).show();

            OverlayItem overlayitem = new OverlayItem(point,"","" );
              itemizedoverlay.addOverlay(overlayitem);
              mapOverlays.add(itemizedoverlay);

}
        } */

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }

    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {

Toast.makeText(getBaseContext(),"GPS Disabled",Toast.LENGTH_SHORT).show();      

    }

    @Override
    public void onProviderEnabled(String provider) {

        Toast.makeText(getBaseContext(),"GPS Enabled",Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    } 
```

你能建议我解决这个问题吗？提前致谢，如果我在这里犯了任何错误，我们深表歉意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:31:54.963

试试这个 -

```
/**
* Setting Google Map to provided location 
*/
 private void setMaptoLocation(Location location) {
  mapView.setBuiltInZoomControls(true);
  mapView.setSatellite(true);
  int LAT = (int)(location.getLatitude() * 1E6) ;
  int LNG = (int)(location.getLongitude() * 1E6) ;
  GeoPoint point = new GeoPoint(LAT, LNG);
  mapController = mapView.getController();
  List<Overlay> mapOverlays = mapView.getOverlays();
  Drawable drawable = this.getResources().getDrawable(R.drawable.icon);
  HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable,this);
  OverlayItem overlayitem = new OverlayItem(point,"","" );
  itemizedoverlay.addOverlay(overlayitem);
  mapOverlays.add(itemizedoverlay);
  mapController.setZoom(ZOOM_LEVEL - ZOOM_LEVEL / 2); // Set zoom level per requierment
  mapController.animateTo(point);

 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:33:56.827

您可以使用 com.google.android.maps.MyLocationOverlay，它会自动在地图视图上显示您的位置。它甚至会在旅行时更新您的位置。

注意：您分别在 onResume 和 onPause 上显示调用 enableMyLocation 和 disableMyLocation 以获得更好的性能。

```
@Override
    protected void onResume() {
        super.onResume();
        if (locationOverlay != null)
            locationOverlay.enableMyLocation();
    }

    @Override
    protected void onPause() {
        if (locationOverlay != null)
            locationOverlay.disableMyLocation();
        super.onPause();
    } 
```

**已编辑**

```
MyLocationOverlay locationOverlay;

public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      mapView = (MapView) findViewById(R.id.mapView);
      mapView.setTraffic(true);
      mapView.setBuiltInZoomControls(true);
locationOverlay = new MyLocationOverlay(this, mapView);
List<Overlay> mapOverlays = mapView.getOverlays();
 mapOverlays.add(locationOverlay);
} 
```

还添加 onResume() 和 onPause() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:23:01.857

我认为你必须与`Google Maps Android API v2`

有关更多信息，请查看[Google Maps Android API v2](https://developers.google.com/maps/documentation/android/start)。

请从上面的链接中检查示例代码的链接。 [示例代码](https://developers.google.com/maps/documentation/android/intro#sample_code)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:30:12.170

**位置**不是您在**onCreate()**中初始化的位置，所以我猜它为空。还有一件事，如果你有纬度和经度，逐项列出的肯定会在地图上显示位置。检查 Manifest 中所需**的 Access_Course_location**和**Access_fine_location**权限。

# hibernate - Grails 中的准备好的语句计数

> ID：14438355
> 
> 赞同：1
> 
> 时间：2013-01-21T12:12:03.897
> 
> 标签：hibernate, grails, database-performance

在分析 Grails 应用程序的休眠统计信息时，有一个我无法理解的问题。PrepareStatementCount 的值随着每个请求而增加。请求相同或不同都没有关系。据我了解，每个准备好的语句都由数据库缓存在查询缓存中。这样在第二次请求时，数据库不需要再次解析 sql 语句。它节省了数据库服务器上的 CPU 使用率。

我希望，如果我发送两次请求，PrepareStatementCount 应该增加 1。我的查询缓存有问题还是我误解了休眠统计信息？

查询示例发布在 [另一个问题中](https://stackoverflow.com/questions/14360610/prepared-statements-in-grails)

# c# - 如何将字符串转换为int然后再转换为字符串？

> ID：14438357
> 
> 赞同：6
> 
> 时间：2013-01-21T12:12:12.667
> 
> 标签：c#, .net, number-systems

我试图搜索我的问题的重复项，但找不到。另外，很抱歉标题不太好理解。我对我正在搜索的内容以及术语感到非常困惑。我是一名电子工程师，对 .Net 框架知之甚少，所以请善待我 :)

我目前的项目是一个心率监测器，可以将测量的心率存储到 EEPROM 中，然后发送到 PC 以供以后查看日志。

我正在使用 RS-232（串行）协议与 8 位微控制器连接。每当我向微控制器发送一个`l`代表char`log`的信息时，它都会以以下格式向我发送一些信息：

```
0x1E 0x21 0x01 0x13 0x14 0x35 0x46 0x1E 0x21 0x01 0x13 0x14 0x43 0x48 0x0A 0x0D 
```

空格用于提供信息，这些字节彼此不分隔。

从微控制器发送的这些 8 位 HEX 值包括记录信息的开始，即`0x1E`DD MM YY HH MM 格式的日期和时间以及记录的心率。当所有记录都回显时，将发送 0x0A 和 0x0D 字符。

例如，上面的代码意味着：

```
Record start.
21.01.13 14:35
Heart Rate: 70
Record start.
21.01.13 14:43
Heart Rate: 72
End of records. 
```

我怎样才能得到这样的字符串值：“S210113143570S210113144372”，哪里`S`可以是任何东西。之后，我将对其应用正则表达式语法并将其划分为组，以便我可以将这些值添加到`listview`控件中。

*在评论和答案后编辑：*

*我没有写错样本。不幸的是，编码与上面完全相同。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:22:01.603

所以，实际上每个字节代表一个数字。我假设你已经有一个`byte[]`包含这些值的数组：

```
var data = new byte[] { 0x1E, 0x21, 0x01, 0x13, 0x14, 0x35, 0x46,
                        0x1E, 0x21, 0x01, 0x13, 0x14, 0x43, 0x48, 0x0A, 0x0D }; 
```

你现在可以像这样创建真实的对象：

```
class LogEntry
{
    public DateTime Timestamp { get; set; }
    public int HeartRate { get; set; }
}

var logEntries = new List<LogEntry>();

for(int i = 0; i < data.Length; i+= 7)
{
    if(data[i] == 0x0a && data[i + 1] == 0x0d)
        break;
    if(data[i] != 0x1e)
        throw new InvalidDataException();

    var logEntry = new LogEntry();
    var year = BcdToDecimal(data[i + 3]) + 2000;
    var month = BcdToDecimal(data[i + 2]);
    var day = BcdToDecimal(data[i + 1]);
    var hour = BcdToDecimal(data[i + 4]);
    var minute = BcdToDecimal(data[i + 5]);
    var heartRate = data[i + 6];
    logEntry.Timestamp = new DateTime(year, month, day, hour, minute, 0);
    logEntry.HeartRate = heartRate;
    logEntries.Add(logEntry);
}

byte BcdToDecimal(byte bcdValue)
{
    return (byte)((bcdValue / 16 * 10) + (bcdValue % 16));
} 
```

该方法`BcdToDecimal`将 BCD 转换为其实际值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:22:11.350

兄弟，我认为您应该考虑使用字符串，即

```
string heartRate=70;
string recordStart=21.01.13 14:35;
string fullValue = heartRate + '|' + recordStart; 
```

现在，您可以使用拆分方法轻松拆分该字符串，而不是应用正则表达式，例如，

```
string splittedValues[]=fullValue.Split('|'); 
```

你会在需要时得到这些值，比如

```
splittedValues[0] \\it will be heard rate string (at index zero)
similarly
splittedValues[1] \\it will be record start string (at index one) 
```

我仍然不明白你的问题，如果我的回答无关紧要，请告诉我，我会澄清

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:14:26.887

```
public static String ParseData(String data)
{
    MatchCollection matches = Regex.Matches(data, "0[xX]([a-fA-F0-9]{2})");

    Int32 count = 0;
    String result = String.Empty;

    foreach (Match match in matches)
    {
        switch (count)
        {
            case 0:
            {
                if (match.Value.Equals("0x1E", StringComparison.OrdinalIgnoreCase))
                {
                    result += "S";
                    break;
                }

                goto End;
            }

            case 1:
            case 2:
            case 3:
            case 4:
            case 5:
                result += match.Groups[1].Value;
                break;

            case 6:
                result += Int32.Parse(match.Groups[1].Value, NumberStyles.HexNumber).ToString();
                count = -1;
                break;
        }

        ++count;
    }

    End:;

    return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T13:49:25.747

我很抱歉我犯了一个非常愚蠢的错误。我看到在微控制器端执行此操作非常容易，而且不那么耗费时钟周期。现在我已经这样做了，现在解析这些值真的很容易。

我在微控制器端使用了这个例程：

```
unsigned char BCDtoDecimal(unsigned char bcd_number)
{
  return ((bcd_number>>4)*10 + (bcd_number&0x0F));
} 
```

因此，代码在 C# 方面非常简单：

```
 private void buttonGetLogs_Click(object sender, EventArgs e)
    {
        string inputBuffer;
        char[] charArray;
        try
        {
            serialPort.Write("l");
            inputBuffer = serialPort.ReadLine();
            charArray = inputBuffer.ToCharArray();
            inputBuffer = string.Empty;
            foreach (char item in charArray)
            {
                inputBuffer += Convert.ToInt32(item).ToString();
            }
        }
        catch (Exception) { }
    } 
```

# google-chrome - 使用 Google Web Fonts 优先考虑 SVG 字体

> ID：14438368
> 
> 赞同：26
> 
> 时间：2013-01-21T12:12:54.380
> 
> 标签：google-chrome, svg, webfonts, google-webfonts

除非您使用 SVG 字体，否则 Windows 上的 Google Chrome 中的字体渲染非常糟糕。然而，谷歌网络字体优先考虑 WOFF 文件。

有什么方法可以强制它提供 SVG 字体，还是我必须自己手动托管字体？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-18T15:30:44.427

您需要托管文件，因为使用`@import`或`<link>`方法引用仅调用 WOFF 文件的 CSS 文件（因为浏览器检测）。前任。[http://fonts.googleapis.com/css?family=Open+Sans](http://fonts.googleapis.com/css?family=Open+Sans)：

```
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  src: local('Open Sans'), local('OpenSans'), url('http://themes.googleusercontent.com/static/fonts/opensans/v6/cJZKeOuBrn4kERxqtaUH3T8E0i7KZn-EPnyo3HZu7kw.woff') format('woff');
} 
```

在本地托管文件后，您可以在堆栈中向上移动 SVG 调用以对其进行优先级排序。你可以在这里看到一个例子：[http ://www.fontspring.com/blog/smoother-web-font-rendering-chrome](http://www.fontspring.com/blog/smoother-web-font-rendering-chrome)

```
@font-face {
  font-family: 'MyWebFont';
  src: url('webfont.eot'); 
  src: url('webfont.eot?#iefix') format('embedded-opentype'),
  url('webfont.svg#svgFontName') format('svg'),
  url('webfont.woff') format('woff'),
  url('webfont.ttf')  format('truetype');
} 
```

# android - 如何在 Android 的 web 视图中显示内置的缩放控件

> ID：14438369
> 
> 赞同：2
> 
> 时间：2013-01-21T12:12:59.733
> 
> 标签：android, webview, android-listview, android-webview, zooming

可能与此重复[始终在 WebView [1](https://stackoverflow.com/questions/6866710/always-show-zoom-controls-in-webview)中显示缩放控件，但我只想显示并非总是需要的缩放控件。

基本上我有一个列表视图，我用 getVIew 方法中的多个 webview 填充它。

这是代码

```
 public View getView(final int position, View convertView,
            ViewGroup parent) {

        View vi = convertView;
        if (convertView == null) {
            vi = inflater.inflate(R.layout.book_reader_list_style, parent,
                    false);
            holder = new ViewHolder();

            holder.webView = (WebView) vi.findViewById(R.id.webView1);
            WebSettings webSettings = holder.webView.getSettings();
            holder.webView.setVerticalScrollBarEnabled(false);
            holder.webView.setHorizontalScrollBarEnabled(false);
            holder.webView.setVisibility(View.VISIBLE);
            webSettings.setLoadWithOverviewMode(true);
            webSettings.setUseWideViewPort(false);

            webSettings.setBuiltInZoomControls(true);
            webSettings.setSupportZoom(true);
            webSettings.setLoadWithOverviewMode(true);

            holder.webView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Log.i("Webview", "Clicked");

                }
            });

            vi.setTag(holder);
        } else {

            holder = (ViewHolder) vi.getTag();
        }

        holder.webView
                .loadDataWithBaseURL(
                        null,
                        "<!DOCTYPE html><html><body style = \"text-align:center\"><img style=\"border-style:dotted;border-width:5px;border-color:black;\" src= "
                                + URLs.get(position)
                                + " alt=\"page Not Found\"></body></html>",
                        "text/html", "UTF-8", null);

        return vi;

    }
}

class ViewHolder {
    WebView webView;

} 
```

这是我的 XML 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<WebView
    android:id="@+id/webView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:clickable="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:scrollbars="none" /> 
```

列表视图很好地填充了网络视图，但问题是我想要缩放按钮控件。

*   请查看我的 XML 和 Java 代码。我做错了什么？

我试过了

```
webSettings.setBuiltInZoomControls(true);
webSettings.setSupportZoom(true); 
```

但仍然无法正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:35:31.880

将 **android:clickable="false"**设置为 **android:clickable="true"**。在您的 webView XML 中。您可以删除可聚焦的或使它们也为真

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:29:49.567

在 oncreate() 方法中

```
webView.getSettings().setBuiltInZoomControls(true); 
```

并始终在询问之前进行搜索。它可以减少冗余并节省您的时间。

一次检查这个伙伴。

[网页视图的缩放控件](https://stackoverflow.com/questions/8049343/how-to-control-zoom-in-webview)

# java - 如何在我的 TextView 中以粗体和多色显示文本

> ID：14438371
> 
> 赞同：2
> 
> 时间：2013-01-21T12:13:07.970
> 
> 标签：java, android, android-layout, textview

我的要求是在 TextView 中以彩虹色文本和粗体等多色显示文本，我该如何实现这一点。我需要使用 java 代码动态显示它们。

```
TextView text=new TextView(context);
                        text.setText(status);
                    text.setBackgroundResource(R.drawable.grd_btn);
                    text.setGravity(Gravity.CENTER);
                    text.setPadding(2, 0, 2, 0);
                    text.setTypeface(font2,Typeface.BOLD);
                    text.setTextColor(Color.WHITE); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-21T12:40:12.043

嘿，对不起，我的朋友耽搁了。必须解决您的问题，这需要一段时间。所以首先是输出，

![在此处输入图像描述](../Images/eb5a6197b394dbba510fd87604c4c89f.png)

因此，假设上面显示的是您需要的输出，这里是它的代码。

**xml文件**

```
<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"/> 
```

**res 文件（比如 strings.xml）**

```
<color  name="violet">#9400D3</color>
<color  name="indigo">#4B0082</color>
<color  name="blue">#0000FF</color>
<color  name="green">#00FF00</color>
<color  name="yellow">#FFFF00</color>
<color  name="orange">#FF7F00</color>
<color  name="red">#FF0000</color> 
```

**你的java文件**

```
 TextView textView = (TextView)findViewById(R.id.textView1);
        Shader textShader=new LinearGradient(0, 0, 0, 20,
                new int[]{getResources().getColor(R.color.violet),getResources().getColor(R.color.indigo),
                getResources().getColor(R.color.blue),
                getResources().getColor(R.color.green),
                getResources().getColor(R.color.yellow),
                getResources().getColor(R.color.orange),
                getResources().getColor(R.color.red)},
                new float[]{0,0.2f,0.4f,0.6f,0.8f,0.9f,1}, TileMode.CLAMP);
        textView.getPaint().setShader(textShader);
        textView.setTextSize(20); 
```

就是这样。对于您的大胆风格，请点击我之前回答的以下链接，

[https://stackoverflow.com/a/5169604/603744](https://stackoverflow.com/a/5169604/603744)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:19:52.787

```
 String text = "This is <font color='red'>red</font>. This is <font     color='blue'>blue</font>.";
 textView.setText(Html.fromHtml(text), TextView.BufferType.SPANNABLE);
 textView.setTypeface(null,Typeface.BOLD); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-15T15:54:20.710

这对我来说最简单

所有学分： [https ://gist.github.com/ishitcno1/0c8bcb8ad72cb0879acb](https://gist.github.com/ishitcno1/0c8bcb8ad72cb0879acb)

```
public class RainbowTextView extends TextView {
  protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);

    int[] rainbow = getRainbowColors();
    Shader shader = new LinearGradient(0, 0, 0, w, rainbow, 
        null, Shader.TileMode.MIRROR);

    Matrix matrix = new Matrix();
    matrix.setRotate(90);
    shader.setLocalMatrix(matrix);

    getPaint().setShader(shader);
  }

  private int[] getRainbowColors() {
    return new int[] {
      getResources().getColor(R.color.rainbow_red),
      getResources().getColor(R.color.rainbow_yellow),
      getResources().getColor(R.color.rainbow_green),
      getResources().getColor(R.color.rainbow_blue),
      getResources().getColor(R.color.rainbow_purple)
    };
  }
} 
```

# iphone - 在 iphone 中重新加载 DatePicker

> ID：14438372
> 
> 赞同：1
> 
> 时间：2013-01-21T12:13:11.400
> 
> 标签：iphone, ios, objective-c, xcode, datepicker

我有一个显示 DatePicker 的按钮。当应用程序启动时，它会显示当前日期。

但是当我选择另一个日期并隐藏选择器视图并再次尝试查看我的日期选择器时，它不会显示当前日期。

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:20:11.100

因此，每当您显示日期选择器时，请将当前日期设置为日期选择器。

```
datepicker.date = [NSDate date]; 
```

[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIDatePicker_Class/Reference/UIDatePicker.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:08:34.187

您可以使用以下简单代码为日期选择器设置所选日期：

```
[DatePicker setDate:[NSDate date]]; 
```

或者：

```
DatePicker.date = [NSDate date]; 
```

您可以为所选日期使用任何值，因此日期选择器在打开时显示该日期

你也可以使用：

```
[DatePicker setDate:[NSDate date] animated:YES]; 
```

在选择器打开时为所选行添加动画

# java - 运算符 reinterpret_cast 后出现错误“核心转储”

> ID：14438374
> 
> 赞同：1
> 
> 时间：2013-01-21T12:13:20.857
> 
> 标签：java, c++, memory-leaks, java-native-interface, coredump

我有以下问题：

我创建了 Java 项目，它通过 JNI 使用 C++ 动态库。它读取图像并分析其特征。当我运行使用相同库的**C++ 项目时 - 一切都****很好**，进程终止时没有错误，但是**Java 项目**在不同的图像上终止，并**出现错误**“崩溃发生在 Java 虚拟机之外的本地代码中。......核心转储”。

导致错误的代码如下：

```
vector<char> getFileContent(const string &fileName)
{
    ifstream file(fileName.c_str());
    vector<char> buf;
    copy( std::istreambuf_iterator<char>(file), std::istreambuf_iterator<char>(),std::back_inserter(buf) );
    return buf;
} 

int analyzeFiles(vector<File> files)
{
    //check for extension ". jpg"
    for(size_t i = 0; i < files.size(); i++)
    {   
        vector<char> fileContent = getFileContent(files[i].directory + '/' + files[i].fileName);
        DrawingDetector dd(reinterpret_cast<const uint8_t*>(&fileContent[0]), fileContent.size()); //causes error in a runtime, terminates on any image
        //the rest code
    }
} 
```

有人有什么想法吗？对于我的问题的任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:15:50.627

您应该处理向量为空的情况（`&fileContent[0]`此时可能无效。）

快速检查是查看文件是否真的被打开。

# c# - C# 中的 TestMethod 用于从 ASP .NET MVC 控制器检查 JSON 数据

> ID：14438375
> 
> 赞同：1
> 
> 时间：2013-01-21T12:13:28.220
> 
> 标签：c#, json, asp.net-mvc-3, unit-testing, assert

请告诉我如何通过不更改控制器操作来获取值。

```
Controller
     [HttpPost]
        public JsonResult A_Action_In_Controller(Guid ID)
        {
            var operationConfirmation = _repository.DoSomethingInDB(emailID);

            return Json(new { operationConfirmation }, JsonRequestBehavior.AllowGet);
        }
Test Method
    [TestMethod]
        public void DoSomethingInDB_SendOperationConfirmationToTheUI()
        {... 
                var expected = "Successfully Completed";

            var target = controller.A_Action_In_Controller(obj1.Id);

            Assert.AreEqual(expected, target.Data);

        } 
```

错误

> ```
> Assert.AreEqual failed. Expected:<Successfully Completed (System.String)>. Actual:<{ operationConfirmation = Successfully 
> ```
> 
> 已完成 } (<>f__AnonymousType2`1[[System.String, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]])>。

请告诉我如何写类似的东西 `Assert.AreEqual(expected, target.Data.operationConfirmation);`

而不是我现在所拥有的，我不想更改我的控制器代码

`Assert.AreEqual(expected, target.Data);`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:23:11.640

您需要反序列化 JSON 字符串，下面使用`JavaScriptSerializer`该类：

首先，在您的方法中命名您的确认`A_Action_In_Controller`，如下所示：

```
return Json(new { confirmation = operationConfirmation }, JsonRequestBehavior.AllowGet); 
```

然后在您的测试方法中执行此操作：

```
var js = new JavaScriptSerializer();
var deserializedTarget = (object[])js.DeserializeObject(target.Data.ToString());
var result = (string)deserializedTarget["confirmation"]; 
```

然后你可以这样做：

```
Assert.AreEqual(expected, result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:02:39.397

控制器改为

```
Controller
 [HttpPost]
    public JsonResult A_Action_In_Controller(Guid ID)
    {
        var operationConfirmation = _repository.DoSomethingInDB(emailID);

        return Json(operationConfirmation, JsonRequestBehavior.AllowGet);
    } 
```

然后测试方法效果很好

```
 [TestMethod]
    public void DoSomethingInDB_SendOperationConfirmationToTheUI()
    {... var expected = "Operation failed";         

        var target = controller.A_Action_In_Controller(obj1.Id);

        Assert.AreEqual(expected, target.Data); 
```

# javascript - 无法从画布获取图像数据，因为画布已被跨域数据污染

> ID：14438377
> 
> 赞同：10
> 
> 时间：2013-01-21T12:13:36.957
> 
> 标签：javascript, jquery

我正在使用 html5`Canvas`从图像中获取颜色。为此，我在 javascript 中编写了以下代码：

[http://jsfiddle.net/8dQSS/1/](http://jsfiddle.net/8dQSS/1/)（请检查控制台查看异常）

```
function getImageColor() {
    var colors = [];
    var image = new Image();

    image.onload = function () {
        var canvas = document.createElement("canvas");
        canvas.width = image.width;
        canvas.height = image.height;

        // Draw the image in canvas
        var ctx = canvas.getContext("2d");
        ctx.drawImage(image, 0, 0);

        // Get the pixel data
        var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

        // Loop through imageData.data - an array with 4 values per pixel: red, green, blue, and alpha
        for (var x = 0; x < imageData.width; x++) {
            for (var y = 0; y < imageData.height; y++) {
                var index = 4 * (y * imageData.width + x);
                var r = imageData.data[index];
                var g = imageData.data[index + 1];
                var b = imageData.data[index + 2];
                var a = imageData.data[index + 3];

                colors.push("rgb(" + r + "," + g + "," + b + ")");
            }
        }
    };
    image.src = "http://www.xxxxxxxxxxxx.com/demos/assets/image.jpg";
} 
```

上面的代码抛出以下异常：

```
Unable to get image data from canvas because the canvas has been tainted by cross-origin data.
Uncaught Error: SECURITY_ERR: DOM Exception 18 
```

谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-06T12:01:51.837

您是通过文件系统使用它吗？如果是，则在服务器（本地主机）上运行它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T12:22:35.353

我知道的唯一解决方案是将要加载的图像与文件托管在同一服务器上，您无法通过画布访问和处理 Web 上所需的任何图像。

编辑：如果你愿意，你可以这样[做](https://developer.mozilla.org/en-US/docs/HTML/CORS_Enabled_Image?redirectlocale=en-US&redirectslug=CORS_Enabled_Image)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-27T22:34:26.387

我得到了同样的错误。我`crossorigin`在画布上搜索了很多。第一个解决方案是添加`img.crossOrigin='anonymous'`. 但问题仍然存在。我使用的是 s3 提供的资产，并修复了在存储桶策略中添加此问题的问题。

```
{
  "Version": "2008-10-17",
  "Statement": [
     {
       "Sid": "AllowPublicRead",
       "Effect": "Allow",
       "Principal": {
         "AWS": "*"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::seu-candidato/*"
     }
  ]
} 
```

存储桶中的资产有一些参数，例如`X-Amz-Expires`，`X-Amz-Date`我删除了它们，我的问题得到了解决

# javascript - 在 Javascript 中同步音频和鼠标移动

> ID：14438378
> 
> 赞同：0
> 
> 时间：2013-01-21T12:13:40.517
> 
> 标签：javascript, html, flash, timer

这似乎是一项几乎不可能完成的任务，我最近几个月一直在努力。

我正在尝试将录制的音频与录制的鼠标位置移动同步。

我尝试了很多算法，并深入研究了 javascript 计时器。

对我来说，我注意到不可能记录鼠标和音频并同步这两个元素

使用运行可靠的 HTML5 音频。

使用自调整定时器的鼠标录制仍然太糟糕，无法提供稳定的

解决方案。（setTimeout、setInterval、performanceNowKit……等等……）

有什么方法可以将录制的鼠标移动与录制的音频同步，以便有一些

我正在与之交谈的那种白板，因为无论我做什么，它都会在一段时间后变得不同步。

非常感谢。

# java - Java 语句，加载数据返回生成的键

> ID：14438381
> 
> 赞同：3
> 
> 时间：2013-01-21T12:13:57.780
> 
> 标签：java, mysql, prepared-statement, return-value, load-data-infile

我的问题可能很简单，但我找不到任何答案。

如果我执行`statement.execute("LOAD DATA ...")`它会像`INSERT`Statement 一样生成返回键，

如果我不希望从`LOAD DATA`语句中收到任何返回值，我应该执行：

`statement.execute("LOAD DATA ...",Statement.NO_GENERATED_KEYS)`还是没有必要，因为`statement.execute("LOAD DATA ...")`在这种情况下不会返回任何密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T05:13:07.183

1.  你必须`Statement.executeUpate()`使用`LOAD DATA`
2.  如果您不需要返回值，请使用`Statement.executeUpdate("LOAD DATA..", Statement.NO_GENERATED_KEYS)`

# mvvmcross - MVVM Cross - OnNavigatedTo 未触发

> ID：14438384
> 
> 赞同：1
> 
> 时间：2013-01-21T12:14:16.877
> 
> 标签：mvvmcross

我现在正在将 MVVM Cross 改装到现有的 WinRT/WP8 应用程序中。我有 IoC 和 Navigation 工作，但我无法触发 LayoutAwarePage.OnNavigatedTo 事件来实例化相关的 ViewModel

我已经在 HomeView 中设置了 ViewModel 属性，该属性被检测到并加载了 HomeView，但是基础 OnNavigatedTo 事件不会触发以加载 HomeViewModel

关于如何找出问题所在的任何指示？

谢谢

托比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:15:42.397

在检查名称时写到一半就想通了——在我的旧应用程序中，我已经覆盖了 OnNavigatedTo，因此 LayoutAwarePage 中调用 Mvx 代码以加载 ViewModel 的那个被忽略了...dolt

# sql - 两列上的单个非聚集索引还是每列上的单独索引？

> ID：14438387
> 
> 赞同：2
> 
> 时间：2013-01-21T12:14:26.447
> 
> 标签：sql, sql-server, sql-server-2008, tsql, database-design

假设我有下表：

```
Table: RelationshipType
============================================================
|  ID (PK)  |  ParentID  |  ChildID  |  RelationshipType   |
============================================================ 
```

大多数情况下，`ParentID`和`ChildID`是单独选择的：

```
... WHERE ParentID = @SomeID

... WHERE ChildID  = @SomeID 
```

有时两者都被选中：

```
... WHERE ParentID = @SomeID AND ChildID  = @SomeOtherID 
```

我想提高这些查询的性能，但最值得注意的是前两个。`ParentID`我应该在+上创建一个非聚集索引，`ChildID`还是在一个索引上创建`ParentID`另一个索引`ChildID`？

**编辑：** 所有这些查询都是高度选择性的（返回 1 或 2 条记录）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T17:53:44.287

你能摆脱代理键`ID`吗？

如果是，请考虑创建以下内容：

*   上的主键和[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)键`{ParentID, ChildID}`。
*   上的二级索引`{ChildID, ParentID}`，但也包含`RelationshipType`在索引中（使用[INCLUDE](http://msdn.microsoft.com/en-us/library/ms188783.aspx)关键字）。

这样，您在所有 3 种情况下都有一个[覆盖](http://use-the-index-luke.com/sql/glossary/covering-index)索引，因此您不必支付双重查找的代价（这通常是聚簇表中的二级索引所必需的）：

*   `... WHERE ParentID = @SomeID`可以通过在索引的 B-Tree 中进行简单的查找来满足：`{ParentID, ChildID}`. `ChildID`和`RelationshipType`¹的值可以直接从这个 B-Tree 的找到的叶子中检索。
*   `... WHERE ChildID = @SomeID`可以通过在索引的 B-Tree 中进行简单的查找来满足：`{ChildID, ParentID}`. `ParentID`和`RelationshipType`²的值可以直接从该 B-Tree 的找到的叶子中检索。
*   `... WHERE ParentID = @SomeID AND ChildID = @SomeOtherID`两者都可以满足。

*¹聚类键是表的“主”B 树，包括所有列，而不仅仅是唯一的列。*

*²感谢`INCLUDE (RelationshipType)`。*

* * *

与现在做类似的事情`ID`是可能的，但需要 3 个索引而不是 2 个，并且所有这些索引都会更胖以实现覆盖。你必须测量以确保，但我的感觉是，这将比它的价值更麻烦。

否则，根本不要使用集群。只需在以下位置创建普通索引：

*   `{ID}`- 常规的非聚集主索引（使用 NONCLUSTERED 关键字）。
*   `{ParentID}`- 常规二级索引。
*   `{ChildID}`- 常规二级索引。

您将拥有一个普通的堆表，因此每次访问都需要*索引搜索 +（通常）表堆访问*，但您的索引将保持苗条，从而提高缓存效率。

`... WHERE ParentID = @SomeID AND ChildID = @SomeOtherID`将需要两次索引查找（或者可能在其中一个`{ParentID}`或`{ChildID}`索引+表堆访问上进行查找），但这仍然非常快并且不太频繁（如您所述）。

* * *

在决定任何一种方式之前，请务必测量实际数据量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:22:48.287

正如您所说的那样查找`ParentId`或者`ChildId`是高度选择性的，我只会选择两个单独的索引。

然后，SQL Server 可以使用任一索引来`WHERE ParentID = @SomeID AND ChildID = @SomeOtherID`计算匹配的一或两行的剩余谓词。

我想一个例外是，如果表或多或少是只读的并且整个数据库适合内存，那么拥有附加索引没有不利的一面，它避免了查找以检索丢失的列。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:24:42.190

在某种程度上，如果不知道每个选择的频率以及对表的插入/更新发生的频率，就不可能说什么会给您的数据库带来最佳性能，但这是我最好的猜测：

听起来像 ParentID，ChildID 可能是你的主键，根据定义它是一个聚集索引。

这里的懒惰方法是在 ParentID 和 ChildID 上再创建两个非聚集索引。但是...尤其是 ParentID 列，或任何列在您的主键/集群索引中的第一个列 - 如果您创建另一个非集群 ParentID 索引，我真的不确定您是否会获得任何选择收益。非聚集索引将存储按该索引排序的表的副本，但在这种情况下，主键决定了表的顺序，并且它已经首先按 ParentID 排序。

所以总而言之，我会在 ChildID 上创建一个 ParentID 和 ChildID 的主键和一个非聚集索引，我认为你很高兴。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T12:36:45.370

我会在每一列上创建一个非聚集索引，但包括另一列以及RelationshipType 列（我假设RelationshipType 是您正在检索的数据）：

```
CREATE NONCLUSTERED INDEX IX_RelationshipType_ParentID
ON
    RelationshipType(ParentID)
INCLUDE
    (ChildID, RelationshipType)
GO

CREATE NONCLUSTERED INDEX IX_RelationshipType_ChildID
ON
    RelationshipType(ChildID)
INCLUDE
    (ChildID, RelationshipType)
GO 
```

这将导致引擎一旦找到条目就能够从索引中获取所需的数据，而无需在找到索引中的项目后返回表。

# jquery - 如何在 mvc3 中实现加载器，一个视图页面在弹出窗口中打开另一个视图页面

> ID：14438391
> 
> 赞同：0
> 
> 时间：2013-01-21T12:14:48.577
> 
> 标签：jquery, asp.net-mvc-3

如何使用包含部分视图的 mvc 页面实现加载程序。我将如何知道操作何时完成。当页面包含部分视图或页面在弹出窗口中使用 jquery 打开另一个视图时，我的加载器不会运行。谁能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:24:14.687

好吧，如果您使用 ajax 加载部分内容，您应该使用：

```
$(document).ajaxStart(function () {
   //Show loader
});

$(document).ajaxSuccess(function () {
  //Success, hide loader
});

$(document).ajaxError(function (e, xhr, settings, exception) {
   //Error, hide loader show error message
}); 
```

你需要的是一个带有加载器的 div，它默认显示。:] 你显示/隐藏！希望这可以帮助！

# c++ - 模板参数类型

> ID：14438398
> 
> 赞同：2
> 
> 时间：2013-01-21T12:15:01.953
> 
> 标签：c++, templates, parameters

我有一个功能：

```
template<class T>
static string
format(T ui, T sentinal, char listSeparator)
{
    stringstream s;
    if (ui == sentinal)
    {
        s << "n/a" << listSeparator;
    }
    else
    {
        s << ui << listSeparator;
    }
    return s.str();
} 
```

调用函数的方式是：

```
output << format(field1,Backend::NA_Value, csvSeparator);
output << format(field2,Backend::NA_Value, csvSeparator);
/// ...etc 
```

以前 `field1`和`field2`属于`unsigned int`. 决定将这些类型更改为`unsigned long long`. 但是出现编译错误：

```
std::string format(T,T,char)' : template parameter 'T' is ambiguous
main.cpp(39) : see declaration of 'format'
could be 'Juint'
'unsigned __int64' 
```

这是什么原因？NA_Value？它被定义为：

```
static const Juint NA_Value = (Juint) -1;
typedef unsigned int   Juint 
```

它无法确定模板T？！编译器从哪里决定 __int64？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:17:40.100

这是*模板类型推导*的问题，您在函数的签名中多次出现相同的类型。编译器只是不知道您想要`T`成为这两种类型中的哪一种，因为在调用中这两种情况属于*不同的类型*。

你调用`format`如下（`Juint`根据你的替换`typedef`）：

```
format(unsigned long long ui, unsigned int sentinal, char listSeparator); 
```

您更改了前一个参数的类型，所以现在它与第二个不同。在您进行此更改之前，两个参数具有相同的类型。

要解决此问题，您有以下选择：

*   使模板类型不同。[（见 Joachim Pileborg 的回答）](https://stackoverflow.com/a/14438458/592323)

*   通过在调用函数时将特定类型显式声明为模板参数来强制指定类型。这将自动转换不匹配的参数，就像您习惯于正常功能一样（在这种情况下不会发生类型推导）：

    ```
    output << format<Juint>(field2,Backend::NA_Value, csvSeparator);
                    ^^^^^^^

    output << format<unsigned long long>(field2,Backend::NA_Value, csvSeparator);
                    ^^^^^^^^^^^^^^^^^^^^ 
    ```

*   将其中一个参数转换为另一种类型。这使得两个参数相同并且类型推导将成功：

    ```
    output << format(static_cast<Juint>(field2),Backend::NA_Value, csvSeparator);
                     ^^^^^^^^^^^^^^^^^^

    output << format(field2,static_cast<unsigned long long>(Backend::NA_Value), csvSeparator);
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
    ```

*   也改变 的 typedef `Juint`，使类型再次相同，类型推导也成功。

*   添加类型特征 /`enable_if`它将模板类型限制为满足条件的特定类型的类，但在你的情况下，我认为这不是你想要的。

就个人而言，我希望有另一种选择：最好只对第一个参数执行类型推导并强制第二个参数自动在调用站点上强制转换（如“`T`但不推导”参数类型）。但是没有这样的选择。

在您的情况下，最好的选择是`Juint`也使用相同的类型（列表中的第 4 个选项），或者通过选择第一个选项使您的函数“更通用”。正如 Joachim Pileborg 的回答一般指出的那样，必须注意函数中类型的用法，但在您的情况下，它应该没问题，而无需更改函数的主体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:17:59.013

for 的类型`Backend::NA_Value`不再与`field1`or`field2`变量相同。一个是`unsigned int`一会儿另一个是一个`unsigned long long`。

要么更改`Juint`typedef 以匹配`field1`and的类型`field2`。或者您可以添加一个新的模板变量：

```
template<class T, class U>
static string
format(T ui, U sentinal, char listSeparator) 
```

当然，如果您执行后者，您将在比较中收到其他错误和/或有关不匹配类型的警告。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:26:16.930

编译器错误说明了一切：应该是什么类型`T`？是`unsigned long long`如 所示`field1`，还是`unsigned int`如 所示`Backend::NA_Value`？
编译器无法确定您的意思，因此会产生错误。

可能的解决方案是：

1.  也改成`Backend::NA_Value`_`unsigned long long`
2.  明确指定要用于的类型`T`：

    ```
    format<unsigned long long>(field1, Backend::NA_Value, csvSeparator); 
    ```

3.  更改格式，使第一个和第二个参数可以是不同的类型：

    ```
    template<class T, class U>
    static string
    format(T ui, U sentinal, char listSeparator)
    {
        stringstream s;
        if (ui == sentinal)
        {
            s << "n/a" << listSeparator;
        }
        else
        {
            s << ui << listSeparator;
        }
        return s.str();
    } 
    ```

    通过此更改，`sentinal`可以是可以与 进行相等比较的任何类型`ui`。

# iphone - 将控制器推送到 UINavigationController 在 iPad 上工作，但在 iPhone 上不工作

> ID：14438399
> 
> 赞同：0
> 
> 时间：2013-01-21T12:15:06.657
> 
> 标签：iphone, ios, objective-c, uinavigationcontroller

在为 iPad 和 iPhone 开发应用程序时，我遇到了一个非常烦人的问题。

我希望我的导航控制器（由故事板设置）推送一个显示一些详细信息的视图控制器。

以下代码曾经有效，但现在我在 iPhone 上推动控制器时遇到黑屏，而完全相同的代码在 iPad 上可以正常工作。所有使用的控制器都是非零值。发生的情况是显示使用导航控制器更改视图的通常动画，但之后只有黑屏。

```
ADetailViewController* detailController =
    [self.storyboard instantiateViewControllerWithIdentifier:@"ADetailViewController"];
    exposeController.data = aRealEstate;
    exposeController.appData = self.appData;
    [self.navigationController pushViewController: detailController animated:YES]; 
```

我对代码进行了一些调试并注意到，调用了 ADetailViewController 类的 viewDidLoad，但没有调用 viewDidAppear，这意味着显示了详细信息视图（我也通过黑屏注意到了 :-)）

我会很感激这个问题的一种提示。

***更新***

我设法自己解决了这个问题。造成这种情况的原因是我在委托依赖项中构建了一个循环依赖项。当 rootView 将被隐藏时，这用于弹出推送的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:38:21.357

您正在使用情节提要，那么为什么不使用 segues 呢？

视图控制器的所有实例化都是通过执行 segue 来处理的。您可以在 中方便地进行所有自定义`prepareForSegue:`。

我相信您的错误是由 iPhone 和 iPad 故事板中的不同配置引起的。如果您决定使用 segue，则推送视图控制器的过程会更加透明，您将能够更轻松地找到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:41:48.083

我有两个建议给你：

1.  你试过清理你的项目吗？
2.  也许`ADetailViewController`标识符不是 a `UIViewController`，也许是因为标识符已存储在 iPhone 故事板中的错误字段中。

祝你好运

# c# - 汇集一组数字中的数字以匹配另一组的大小

> ID：14438404
> 
> 赞同：2
> 
> 时间：2013-01-21T12:15:24.160
> 
> 标签：c#, algorithm

我需要通过组合其中的数字来减小集合的大小。我需要所有可能的组合。这里有两个例子可以说明我的情况。

1) Set1 有 4 个条目，而 Set2 有 2 个。所以我们需要在每种情况下组合两个数字。

```
Set1 = {70, 100, 50, 200}; Set2 = {"part1", "part2"}
All combinations I want to retrive should look like following:
"part1"        |"part2"
  70 + 100       |  50 + 200
  70 + 50        | 100 + 200
  70 + 200       |  50 + 100
 100 + 50       |  70 + 200
 100 + 200      |  50 +  70
  50 + 200       | 100 +  70
 50             |  70 + 100 + 200
 70             |  50 + 100 + 200
 100            |  50 +  70 + 200
 200            |  50 +  70 + 100  
 70 + 100 + 200 |  50
 50 + 100 + 200 |  70
 50 +  70 + 200 |  100
 50 +  70 + 100 |  200 
```

2) Set1 有 4 个条目，而 Set2 有 3 个条目。所以我们只需将两个数字组合一次。

```
Set1 = {70, 100, 50, 200}; Set2 = {"part1", "part2", "part3"}
All combinations I want to retrive should look like following:
"part1"   |"part2"     |"part3"
   70        | 100        |  50 + 200
   70        |  50        | 100 + 200
   70        | 200        |  50 + 100
   50        |  70        | 100 + 200 
   50        | 100        |  70 + 200
   50        | 200        |  70 + 100
 100       |  70        |  50 + 200
 100       | 200        |  50 +  70
 100       |  50        | 200 +  70
 200       |  70        |  50 + 100
 200       | 100        |  50 +  70
 200       |  50        |  70 + 100
   70        |  50 + 200  |  100
   70        | 100 + 200  |   50
   70        |  50 + 100  |  200
   50        | 100 + 200  |   70
   50        | 200 + 70   |  100
   50        |  70 + 100  |  200
 100       |  50 + 200  |   70
 100       |  50 +  70  |  200
 100       | 200 +  70  |   50
 200       |  50 + 100  |   70
 200       |  50 +  70  |  100
 200       |  70 + 100  |   50 
   50 + 200  | 100        |  70
 100 + 200 |  50        |  70
   50 + 100  | 200        |  70
 100 + 200 |  70        |  50
   70 + 200  | 100        |  50
   70 + 100  | 200        |  50
   50 + 200  |  70         | 100
   50 +  70  | 200         | 100
 200 +  70 |  50         | 100
   50 + 100  |  70         | 200
   50 +  70  | 100         | 200
   70 + 100  |  50         | 200 
```

我很感激任何帮助。我想不出任何词语来更好地解释我的担忧。但我很乐意回答任何问题。在你的帮助下，我也许能够证实我的问题。虽然应用程序是用 C# 编写的，但我不一定需要源代码。我的问题是概念而不是实现。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:17:34.303

您的问题的主要困难是：

### 如何获取给定集合的所有子集？

这是我的想法：我想你的第一组不会超过 32 个元素。否则，结果将是相当巨大的。

然后，对于给定的集合`MySet = { a, b, c, d, e }`，该集合的每个子集都可以用 和 之间的值来`0`描述`2^5 - 1`。

如何 ？

使用位！OK 例如，数字`5`（`00101`二进制​​）表示，`a`并且`c`包含在子集中。

所以要拥有给定`N`元素集的子集的整个集合。只需从迭代`0`到`2^N-1`排除。

### 那么，如何创建其他部分（最后一个除外）？

只需获取第一组的补码并迭代其子集即可。

### 那么，最后一部分呢？

获取您之前部分的补充！

使用这种技术可能不必寻找前一个子集的补码，但它需要一些非标准的按位运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:29:27.533

好的，所以这里的总体思路是

*   从 -开始，`{0, 0, 0, 0}`对于`Set1`.
*   `0`表示 中的第一项`Set2`。因此，第一个数组是“中的所有内容都`Set1`属于中的第一项`Set2`”。
*   返回与此对应的分区。
*   增量`{0, 0, 0, 0}`为`{0, 0, 0, 1}`。
*   `1`表示 中的第二项`Set2`。因此，这个数组是“中的所有内容都`Set1`属于 中的第一项`Set2`，除了最后一项，它属于中的第二项`Set2`”。
*   返回与此对应的分区。
*   增加`{0, 0, 0, 1}`（`{0, 0, 1, 0}`或者`{0, 0, 0, 2}`如果您有超过 2 个项目`Set2`）。
*   重复直到你击中`{1, 1, 1, 1}`（或`{2, 2, 2, 2}`等）并且不能再进一步。

然后，您可以添加逻辑说“如果分区有任何*空白*部分，请不要打扰它”。

我实现了如下：

```
static IEnumerable<ILookup<T, U>> Pool<T, U>(T[] t, U[] u)
{
    // Start off with all zeroes.
    int[] indices = new int[u.Length];

    while (true)
    {
        // Build a Lookup from the array.
        var lookup = (Lookup<T,U>)indices
            .Select((ti, ui) => new { U = u[ui], T = t[ti] })
            .ToLookup(p => p.T, p => p.U);
        // Only return it if every part is non-empty.
        if (lookup.Count == t.Length)
            yield return lookup;

        // Increment to the next value.
        int toIncrement = u.Length - 1;
        while (++indices[toIncrement] == t.Length)
        {
            indices[toIncrement] = 0;

            // Stop when we can't increment further.
            if (toIncrement-- == 0)
                yield break;
        }
    }
} 
```

你可以称之为

```
foreach (var q in Pool(
    new[] { "part1", "part2" },
    new[] { 70, 100, 50, 200 }))
{
    foreach (int i in q["part1"])
        Console.Write(i + " ");
    Console.Write("| ");
    foreach (var ii in q["part2"])
        Console.Write(ii + " ");
    Console.WriteLine();
} 
```

注意我已经制作了我的参数数组，因为我很懒，但是您可以将它们列出，或者将它们设为可枚举并调用`ToArray`它们。

# bash - 这个 bash 命令中的“-”（减号）是什么意思？

> ID：14438406
> 
> 赞同：4
> 
> 时间：2013-01-21T12:15:27.003
> 
> 标签：bash

有人可以向我解释`-`以下命令中的（减号）符号是什么意思吗？

```
wget -O - "https://www.some-domain.com/file.tar.gz" | tar xzf - 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-21T12:16:56.767

`-` 取决于命令及其响应方式。但它通常意味着 bash 命令中的标准输出/标准输入。

在这种情况下，`-`是`-O`选项的参数，因此下载的数据不会保存在文件中，而是打印到标准输出，因此可以通过管道传输到 tar 命令

# javascript - 在 HTML 页面中借助 javascript 或 jquery 解决黑屏

> ID：14438407
> 
> 赞同：0
> 
> 时间：2013-01-21T12:15:29.590
> 
> 标签：javascript, jquery, html

我想要这样，在加载我的页面时，应该有一个带有白色字母的黑屏。3 秒后它必须解散并且主页将可见。

如何使用 JavaScript 或 jQuery 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:15:25.660

首先，您需要一个适合该任务的 HTML 结构。作为兄弟的内容容器和覆盖容器可以很好地用于此目的。

**示例 HTML**

```
<div id="overlay">
    <p>Please wait while something wonderful happens</p>
</div>
<div id="content">
    <div id="lipsum">
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
    </div>
</div> 
```

**jQuery**

要使用 jQuery 完成此操作，请先隐藏您的内容容器并使用内置`.fadeOut`方法。确保提供一个回调，在完成时显示您的内容容器。这是一个例子：

```
$(document).ready(function () {
    var showContent = function showContent() {
        //callback that fires once animation is complete.
        $('#content').show();
    }, hideOverlay = function hideOverlay() {
        $('#overlay').fadeOut('slow', showContent);
    };
    //after 3000 milliseconds (=3 seconds), call the hideOverlay function
    window.setTimeout(hideOverlay, 3000);
}); 
```

**JavaScript**

要使用普通的 JavaScript 来做到这一点，您需要`opacity`随着时间的推移调整元素的样式（`window.setInterval`这里是您的朋友。）这是一个示例：

```
window.onload = function () {
    var JSShowContent = function JSShowContent() {
        var content = document.getElementById('content');
        content.style.display = 'block';
    }, JSHideOverlay = function JSHideOverlay () {
        var overlay = document.getElementById('overlay'),
            opacity = 1,
            interval = 0,
            rate = 5; //rate is in milliseconds
        overlay.style.opacity = opacity; //set initial opacity as it defaults to ""
        interval = window.setInterval(function () {
            opacity -= 0.01; //decrement opacity
            overlay.style.opacity = opacity;
            if (opacity <= 0) {
                window.clearInterval(interval);
                overlay.style.display = 'none';
                JSShowContent();
            }
        } , rate);
    };
    //after 3000 milliseconds (=3 seconds), call the hideOverlay function
    window.setTimeout(JSHideOverlay, 3000);
}; 
```

**现场演示**

这是一个你可以玩的小提琴：http: [//jsfiddle.net/dYrsP/](http://jsfiddle.net/dYrsP/)

只需将函数更改`window.setTimeout`为`hideOverlay`并重新运行它即可查看 jQuery 版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:20:50.587

假设您的黑屏是 id 为“黑屏”的 div

```
 <div id="black-screen">
      <!-- Black screen and white letters goes here -->
 </div> 
```

在您的文档中的某处放置

```
<script>
    function hideBlackScreen(){
        $("#black-screen").hide('slow');
    }
    $(function(){
        setTimeout(hideBlackScreen, 3000);
    });
</script> 
```

如果您愿意，我可以发布一些 jsfiddle 示例

这是关于 hide() 函数[链接的 jQuery Docs](http://api.jquery.com/hide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:37:52.373

要拥有全屏 div：

[http://andrewpeace.com/css-full-screen-div.html](http://andrewpeace.com/css-full-screen-div.html)

```
<body style="height:100%">
<div style="width:100%;height:100%;
    position:absolute;
    top:0;left:0;
    background: none repeat scroll 0 0 black;
    vertical-align: middle;
    text-align: center;">
    <font style="color:white">My text</font>
</div> 
```

# ios6 - 已弃用日历

> ID：14438410
> 
> 赞同：4
> 
> 时间：2013-01-21T12:15:37.787
> 
> 标签：ios6, calendar

```
if ([eventStore.calendars count] == 0)   
    { 
        NSLog(@"No calendars are found.");
        return NO;
    }
 EKCalendar *targetCalendar = nil;
 /* Try to find the calendar that the user asked for */
 for (EKCalendar *thisCalendar in eventStore.calendars){ line2
     if ([thisCalendar.title isEqualToString:paramCalendarTitle] &&
         thisCalendar.type == paramCalendarType){
        targetCalendar = thisCalendar;
        break;
     }
} 
```

第 1 行和第 2 行出现错误：“不推荐使用日历：在 IOS 6 中首先不推荐使用”
如何解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:23:59.493

相反，您必须使用以下方法。

```
- (NSArray *)calendarsForEntityType:(EKEntityType)entityType;

NSArray *cals = [eventStore calendarsForEntityType: EKEntityTypeEvent]; 
```

并使用 line2 中的数组`cals`。

[在此处](http://developer.apple.com/library/ios/#documentation/EventKit/Reference/EKEventStoreClassRef/Reference/Reference.html#//apple_ref/occ/instm/EKEventStore/calendarsForEntityType%3a)查看文档

# jquery - Flowplayer 5.3.0 与 Mootols 1.4.5 和 jQuery 1.9 冲突

> ID：14438411
> 
> 赞同：0
> 
> 时间：2013-01-21T12:15:39.137
> 
> 标签：jquery, mootools, flowplayer

我正在构建一个使用 MooTools 构建的项目。设计中内置了很多视频，我决定从 VideoJS 迁移到 Flowplayer，因为所有伟大的事件和可定制的外观。

这是我设置标题的方法：

*   添加 MooTools

    ```
    <?php Assets::js(array(
        // Libs
        'readme.js',
        'lib/mootools-yui-compressed.js',
        'lib/...',
        'lib/...',
    ));
    ?> 
    ```

*   添加 jQuery

    ```
    <script
        src="<?=base_url();?>/static/js/lib/jquery190.js">
        jQuery.noConflict();
    </script> 
    ```

*   添加 Mootools

    ```
    <script src="<?=base_url();?>static/js/flowplayer530/flowplayer.js"></script> 
    ```

这是实际加载播放器并让我播放视频的设置。但是当我看 FireBug 时，我仍然看到了这一点。（还不能发布图片）“RefferenceError：jQuery 未定义。”

```
 slice.call( docElem.childNodes, 0 )[0].nodeType;   ->  jquery190.js (line 3811) 
```

我的观点是，如果没有定义 jQuery，Flowplayer 应该如何运行？

TLDR；播放器工作，但我不喜欢这样的错误发生，我想知道为什么。

提前致谢。

# tridion - SDL Tridion 2009 SP1 自定义 URL 获取当前字段值

> ID：14438417
> 
> 赞同：5
> 
> 时间：2013-01-21T12:15:52.243
> 
> 标签：tridion, tridion2009

我正在连接到包含以下代码的组件字段上的自定义 URL

```
 function SaveAndClose()
        {
            var newValue = new Array();
            newValue[0] = "/feed.ashx?type="+ $("#Type").val() + "&user="+ $("#User").val();
            window.returnValue = newValue;
            self.close();
        }
       document.write("Current Value:");
       document.write(window.dialogArguments.fieldValue); 
```

SaveAndClose 函数完美运行并将值发送回组件，但 window.dialogArguments.fieldValue 始终返回未定义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:23:57.183

您需要阅读`customArguments`dialogArguments 上的属性：

```
document.write(window.dialogArguments.customArguments.fieldValue); 
```

# jquery - jquery 选项卡和 Telerik 和 ajax 日期选择器

> ID：14438422
> 
> 赞同：0
> 
> 时间：2013-01-21T12:16:04.630
> 
> 标签：jquery, asp.net, ajax, tabs, datepicker

我正在使用 jquery UI 选项卡并向其添加 Telerik datepicker（不想使用 jquery datepicker 来解决样式问题）..我可以看到选项卡上的控件，但是当我单击它时，它没有打开并且 url 更改为`http://localhost/#`.

我已经尝试过 ajax CalendarExtender 并且发生了同样的事情。

我没有收到任何错误。

我正在使用 jquery 1.5.1 和 jquery-ui-1.8.11.js。

编辑 ：：

在母版页上我有：

```
 <link href="Content/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
    <link rel="Shortcut Icon" href="favicon.ico" />
    <script src="Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui-1.8.11.js" type="text/javascript"></script>
    <script src="Scripts/jquery.qtip-1.0.0-rc3.min.js" type="text/javascript"></script>
    <script src="Scripts/cufon/cufon-yui.js" type="text/javascript"></script>
    <script src="Scripts/cufon/Lubalin_Graph_700.font.js" type="text/javascript"></script>
    <script src="Scripts/jquery.watermark.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery.validator.js" type="text/javascript"></script>
    <script type="text/javascript" src="scripts/jquery.tablesorter.min.js"></script>
    <script src="Scripts/jquery.colorbox.js" type="text/javascript"></script> 
```

我的标签结构是：

```
 <div id="tabs">
                <ul>
                    <li title=""><a href="FAQs.aspx">FAQ</a></li>
                    <li title=""><a href="Profile.aspx">Profile</a></li>
                    <li title=""><a href="Contact.aspx">Contact</a></li>
        </div> 
```

jquery是：

```
 $("#tabs").tabs({
        select: function (event, ui) {
            $(ui.panel).empty();
            $(ui.panel).append("preloader.gif' />");
        },
        cache: false,
        ajaxOptions: { cache: false }
    }); 
```

在个人资料 aspx 页面中，我有这个 ajax：

```
 <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox><br />
                        <asp:CalendarExtender ID="CalendarExtender1" runat="server" TargetControlID="TextBox1">
                        </asp:CalendarExtender> 
```

对于 Telerik：

```
<telerik:RadDatePicker runat="server" ID="date" Width="110px" ></telerik:RadDatePicker> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:41:06.860

当 AJAX 加载页面时，重要的是要了解所有加载事件都已在主页上发生。这意味着任何包含在加载处理程序或`document.ready`远程页面上的代码都会在加载后立即触发，并且不会等待任何后续的 html 首先加载

如果远程页面中的脚本在它们引用的 html 之前存在，它们将在该 html 存在之前触发。

在脚本之前放置 html 可以解决这个问题。

或者，您可以使用选项卡加载事件来`$.getScript`拨打电话

编辑：以下代码来自 jQueryUI 选项卡 API，每次加载 ajax 选项卡时都会触发：

```
$( "#tabs" ).on( "tabsload", function( event, ui ) {
   var active = $(this).tabs('option','active');
    /* index starts at zero for first tab*/
   if(active==2){
     /* iniitalize datepicker here*/
   }

}); 
```

# c# - WPF ListView 样式

> ID：14438425
> 
> 赞同：3
> 
> 时间：2013-01-21T12:16:10.607
> 
> 标签：c#, wpf, xaml

我现在才开始使用 WPF ListView，我有几个问题：

*   有没有办法让我应用一种风格，让每一行都变暗一点，只是为了便于阅读？
*   Width="*" 的 ListView 等效项是什么？
*   我在哪里可以找到一个体面的风格？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:22:26.747

您之前的所有问题都已在此处得到解答：

*   [如何为 WPF 中的列表视图提供交替的行背景颜色和交替的列背景颜色？](https://stackoverflow.com/questions/1399102/how-can-i-give-alternating-row-background-color-and-alternating-column-backgroun#1399119)
*   [ListView 列自动调整大小](https://stackoverflow.com/questions/2834971/listview-column-auto-sizing)
*   [任何免费的 WPF 主题？](https://stackoverflow.com/questions/260098/any-free-wpf-themes#260416)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:20:36.820

1-检查 ListView 上的 AlternationCount 属性。它允许交替行的样式不同。

[http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.alternationcount.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.alternationcount.aspx)

似乎有人在这里回答了一个类似的问题： [wpf datagrid alternate row colouring](https://stackoverflow.com/questions/4792628/wpf-datagrid-alternate-row-coloring)

2-如果您希望将 ListBox 调整为容器的大小，请尝试查看一些布局容器，例如[CodeProject](http://www.codeproject.com/Articles/140613/WPF-Tutorial-Layout-Panels-Containers-Layout-Trans)。特别是 DockPanel。

3-[在哪里可以找到免费的 WPF 控件和控件模板？](https://stackoverflow.com/questions/121724/where-can-i-find-free-wpf-controls-and-control-templates)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:22:35.127

几秒钟的谷歌搜索会给你像[WPF ListView这样的结果](http://www.c-sharpcorner.com/uploadfile/mahesh/listview-in-wpf/)

和[WPF Listview 自定义](http://ligao101.wordpress.com/2007/07/27/customizing-listview-in-wpf-part-i/)

还有你的第二个问题

“*”表示拉伸以填充可用空间，并且是分数，因此如果一行是*，另一行是2*，那么第二行将是第一行大小的两倍。

希望能帮助到你

# bash - csh：识别脚本中的已知别名

> ID：14438426
> 
> 赞同：1
> 
> 时间：2013-01-21T12:16:11.803
> 
> 标签：bash, terminal, alias, csh

我的问题：我在终端中定义了一些别名。然后我正在执行一个需要使用该别名的 csh 脚本，但它无法识别。

我理解为什么它不能被识别，并且执行脚本`source`正在工作。但是，这是我无法使用的解决方案（出于各种原因..）

我可以看到在 bash 中，已知的解决方案是添加`shopt -s expand_aliases`到脚本中。但 shopt 在 csh 中不被识别。

有一些匹配的解决方案吗？还是其他？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:33:41.253

如果可以选择更新脚本：不要采购整个脚本，而是将您的别名命令放在一个文件中，例如 .cshalias。在您的脚本中，在开头添加该行以获取此别名文件：`source .cshalias`. 这应该做。

理想情况下，您编写的 shell 脚本应该在内部获取 2 个别名文件：用户级文件`~/.cshrc`和系统范围`/etc/csh.cshrc`，以便将来发生的任何更新也将反映在您的脚本中。也可能有一些其他文件定义了别名，您必须在脚本中找出并获取这些文件。

# ajax - 带有 Ajax 的 Joomla 2.5 内容插件

> ID：14438428
> 
> 赞同：1
> 
> 时间：2013-01-21T12:16:15.483
> 
> 标签：ajax, joomla2.5

在我的 Joomla 2.5.x 站点上，我想添加链接，打开 Fancybox 窗口，带有邮件表单，用户在其中输入邮件和地址。提交时，插件将验证邮件并将其发送给正确的收件人。

我写了插件，偶然发现了一个问题：如何让 Ajax 调用执行数据库人员和发送邮件的 php 脚本。

如果我使用以下网址：

```
$.ajax({
    type: 'POST',
    url: ''/my_site/plugins/content/my_plugin/sendmessage.php',
        ... 
```

php 脚本超出了 Joomla 参考，它关闭的原因是：

```
 defined('_JEXEC') or die(); 
```

并且 Joomla 功能不起作用。有解决方法，例如将以下人员添加到 php 脚本中：

```
<?php
define( '_JEXEC', 1 );

// JPATH_BASE should point to Joomla!'s root directory
define( 'JPATH_BASE', realpath(dirname(__FILE__) .'/' ) );
define( 'DS', DIRECTORY_SEPARATOR );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
$mainframe =& JFactory::getApplication('site');
$mainframe->initialise();
$user =& JFactory::getUser();
$session =& JFactory::getSession();
?> 
```

但我不确定此解决方法的安全性。我更喜欢干净的解决方案。查了很多，发现正确的方法是创建一个php函数，添加到控制器中，然后从Ajax中调用，方法如下：

```
 $.ajax({
    type: 'POST',
        url: 'index.php?option=com_mycomponent&format=raw&task=mytask';
         ... 
```

但是这种方式是否仅适用于 Component ？我需要的是一个插件。如何在 Plugin 中运行对 php 函数/脚本的简单 ajax 调用？任何帮助将不胜感激，我正在寻找退出一段时间的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T21:31:33.460

这已经在 J​​oomla 3.2 中实现，有一个新的 Ajax 功能。如果您需要在之前的版本中使用它，请查看已添加到 3.2 的[https://github.com/betweenbrain/Joomla-Ajax-Interface ，您也可以将其安装到 Joomla 2.5+ 并使用它。](https://github.com/betweenbrain/Joomla-Ajax-Interface)

# android - Android缩放片段上的Jquery preventDefault()

> ID：14438429
> 
> 赞同：0
> 
> 时间：2013-01-21T12:16:19.217
> 
> 标签：android, jquery, google-chrome, zooming, preventdefault

我有一些事件绑定到一个链接，例如：

```
<a class='mylink' href='01'>My Link</a>

$(document).on('touchstart', '.mylink', function(e){

   e.preventDefault();

   $(document).find('#someblock').fadeIn();

}) 
```

当然，它确实工作正常。但是在 Android Chrome 上，如果您有一些彼此靠近的链接，在点击其中一些链接后，会出现一个缩放片段（让用户选择他想要的链接而不是误按）。如果我从这个片段中点击带有 preventDefault() 的链接，preventDefault() 将不起作用，并且浏览器会尝试从“href”属性加载 URL。

有没有办法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:46:05.227

尝试使用“点击”事件而不是触摸开始：

```
$(document).on('click', '.mylink', function(e){
   e.preventDefault();
   $(document).find('#someblock').fadeIn();
}); 
```

# razor - 在 JQuery 模板中使用我的助手（Razor 语法）？

> ID：14438434
> 
> 赞同：0
> 
> 时间：2013-01-21T12:16:34.033
> 
> 标签：razor, jquery-templates

无论如何在 JQuery 模板中使用 Razor ！？！？

```
<td class="start">{% if (!o.options.autoUpload) { %}
            <button class="btn btn-primary">
                <i class="icon-upload icon-white"></i>
                <span>{%=locale.fileupload.start%}</span>
            </button>
**@Html.LookupValues("Hrm_PeriodStatus_PeriodStatusType",CalendarPeriodFields.PeriodStatusType, "V_PeriodStatusTypeTitle")**   
        {% } %}</td>
     {% } else { %}
        <td colspan="2"></td>
    {% } %}
    <td class="cancel">{% if (!i) { %}
        <button class="btn btn-warning">
            <i class="icon-ban-circle icon-white"></i>
            <span>{%=locale.fileupload.cancel%}</span>
        </button>
    {% } %}</td> 
```

我想在此模板中创建一个下拉列表，但过程是完全独立的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:22:50.043

除非此 javascript 文件通过服务器端处理程序呈现，否则您不能在静态文件（如 javascript）中使用服务器端帮助程序。

例如，您可以有一个提供视图的控制器操作：

```
public class MyTemplatesController: Controller
{
    public ActionResult Index()
    {
        Response.ContentType = "text/javascript";
        return View();
    }
} 
```

然后您可以有一个相应的视图，其中将包含您的模板 ( `~/Views/MyTemplates/Index.cshtml`)，并且您可以在其中使用服务器端助手：

```
<td class="start">
    {% if (!o.options.autoUpload) { %}
        <button class="btn btn-primary">
            <i class="icon-upload icon-white"></i>
            <span>{%=locale.fileupload.start%}</span>
        </button>
        @Html.LookupValues(
            "Hrm_PeriodStatus_PeriodStatusType",
            CalendarPeriodFields.PeriodStatusType, 
            "V_PeriodStatusTypeTitle"
        )
    {% } %}
</td>
{% } else { %}
    <td colspan="2"></td>
{% } %}
<td class="cancel">
{% if (!i) { %}
   <button class="btn btn-warning">
       <i class="icon-ban-circle icon-white"></i>
       <span>{%=locale.fileupload.cancel%}</span>
   </button>
{% } %}
</td> 
```

然后你可以参考这个脚本：

```
<script id="someTemplate" src="@Url.Action("MyTemplates", "Index")" type="text/x-jquery-tmpl"></script> 
```

# count - 计算新运算符的查询

> ID：14438438
> 
> 赞同：1
> 
> 时间：2013-01-21T12:16:45.483
> 
> 标签：count, new-operator, ndepend

我正在尝试使用 NDepend 创建另一个自定义查询，但无法弄清楚。

这是我想查询的伪代码：

```
var list
foreach type t
    int newCount = 0
    foreach type u in t.TypesUsed
        if "new"-operator of u is called anywhere within t
            newCount++;
    end foreach
    list.Add( new Tuple<Type, int>(t, newCount) )
end foreach
return list 
```

我想知道“新”运算符在类型中的任何位置被调用了多少次。

我对 NDepend 查询的语法非常陌生。所以一些提示会有很大帮助:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T10:12:04.853

您可以尝试此查询，该查询列出了每种类型`t`的代码中实例化的所有类型`t`（即，当通过`new`运算符调用其构造函数之一时实例化类型）。

```
from t in JustMyCode.Types
let typesInstantiated = from tUsed in t.TypesUsed 
                        where tUsed.Constructors.Any(c => c.IsUsedBy(t))
                        select tUsed
where typesInstantiated.Count() > 0
select new { t, typesInstantiated } 
```

结果如下所示：

![实例化的类型](../Images/69705bde5f75f25ee72aa4268f871405.png)

# javascript - Javascript/jQuery：根据数据属性值重新排序 div

> ID：14438439
> 
> 赞同：17
> 
> 时间：2013-01-21T12:16:50.683
> 
> 标签：javascript, jquery, arrays

> **可能重复：**
> [按数据属性的数值对元素进行排序](https://stackoverflow.com/questions/14160498/sort-element-by-numerical-value-of-data-attribute)

我想根据它们上设置的数据属性重新组织 div，范围从最高整数到最低整数。现在，我将所有数据推入一个数组并对其进行排序，但我不确定如何继续。我如何使用它来重新组织其父 div 中的 div？

```
var prices = new Array();
$(this).children('.listing-item').each(function() {
    var price = parseInt($(this).attr('data-listing-price'));
    prices.push(price)
});
prices.sort(function(a,b){return b-a}); 
```

例如，这让我得到一个像 139,129,129,109,109,84 这样的数组。现在我的想法是使用这样的选择器再次循环遍历 div：

```
$('.listing-item[data-listing-price="' + prices[0] + '"]') 
```

但我不确定如何移动 div（具有最高数据属性整数的 div 应该移动到顶部等等。知道吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-21T12:33:24.153

这是解决方案

HTML：

```
<div id="list">
  <div class="listing-item" data-listing-price="2">2</div>
  <div class="listing-item" data-listing-price="3">3</div>
  <div class="listing-item" data-listing-price="1">1</div>
  <div class="listing-item" data-listing-price="4">4</div>
</div> 
```

JS：

```
var divList = $(".listing-item");
divList.sort(function(a, b){
    return $(a).data("listing-price")-$(b).data("listing-price")
});
$("#list").html(divList); 
```

JSF中：

[http://jsfiddle.net/bittu4u4ever/ezYJh/1/](http://jsfiddle.net/bittu4u4ever/ezYJh/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:31:57.877

```
var s = new Array;
var i = 0;
var x = $(".ch").length;
$(".ch").each( function() {
    s[i] = $(this).data("id");
    i++;
});
var g = s.sort(function(a,b){return a-b});
for(var c = 0; c < x; c++) {
    var div = g[c];
    var d = $(".ch[data-id="+div+"]").clone();
    var s = $(".ch[data-id="+div+"]").remove();
    $(".pa").append(d);
} 
```

[工作小提琴](http://jsfiddle.net/UKmNM/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-21T12:30:12.513

您可以调整此处描述的功能：[如何使用 jQuery 按字母顺序对列表进行排序？](https://stackoverflow.com/questions/1134976/how-may-i-sort-a-list-alphabetically-using-jquery) 只需更改排序功能（' `<`'）

```
<div id="foo">
    <div class="test" data-listing-price="30">30</div>
    <div class="test" data-listing-price="62">62</div>
    <div class="test" data-listing-price="11">11</div>
    <div class="test" data-listing-price="43">43</div>
</div> 
```

在您的 js 中（从最高整数到最低整数）：

```
var div = $('#foo');
var listitems = div.children('div.test').get();
listitems.sort(function (a, b) {
 return (+$(a).attr('data-listing-price') > +$(b).attr('data-listing-price')) ?
  -1 : (+$(a).attr('data-listing-price') < +$(b).attr('data-listing-price')) ? 
   1 : 0;
})
$.each(listitems, function (idx, itm) { div.append(itm); }); 
```

[http://jsfiddle.net/NfVxk/](http://jsfiddle.net/NfVxk/)

# ios - 解析 XML - 从 URL 加载图像

> ID：14438442
> 
> 赞同：2
> 
> 时间：2013-01-21T12:17:00.370
> 
> 标签：ios, objective-c

我正在解析一个包含图片链接的 XML 文件，并试图在 UITableView 中显示它们。由于某种原因，它们没有出现在视图中。我认为这个问题与我的解析脚本没有任何关系，因为它可以在表格中显示文本。这是我显示图片的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath

{
    static NSString *CellIdentifier = @"Cell";

     Tweet *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)

    {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        CGRect imageFrame = CGRectMake(2, 8, 40, 40);

        UIImageView *customImage = [[UIImageView alloc] initWithFrame:imageFrame];

        customImage.tag = 0013;

        [cell.contentView addSubview:customImage];

    }

    UIImageView *customImage = (UIImageView *)[cell.contentView viewWithTag:0013];

    customImage.image = [UIImage imageWithData:[NSData dataWithContentsOfURL: [NSURL URLWithString:[currentTweet pic]]]];

    return cell;

} 
```

我是否必须先加载图像？如果是这样，我该怎么做，因为我只有在解析 xml 后才能获得图像的 url？

感谢任何帮助安托万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:42:35.660

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    Tweet *currentTweet = [[xmlParser tweets] objectAtIndex:indexPath.row];
    UIImageView *customImage = (UIImageView*)[cell.contentView viewWithTag:1234];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        CGRect imageFrame = CGRectMake(2, 8, 40, 40);
        customImage = [[UIImageView alloc] initWithFrame:imageFrame];
        customImage.tag = 1234;
        [cell.contentView addSubview:customImage];
    }

    dispatch_queue_t imageQueue = dispatch_queue_create("queue", NULL);
    dispatch_async(imageQueue, ^{
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL: [NSURL URLWithString:[currentTweet pic]]]];
        dispatch_async(dispatch_get_main_queue(), ^{
            customImage.image = image;
        });
    });

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:24:03.907

您需要在表格视图中异步加载图像，按照本教程将有所帮助

[http://dbrajkovic.wordpress.com/2012/01/08/load-images-asynchronously-in-a-uitableview-using-gcd-grand-central-dispatch/](http://dbrajkovic.wordpress.com/2012/01/08/load-images-asynchronously-in-a-uitableview-using-gcd-grand-central-dispatch/)

[http://kosmaczewski.net/asynchronous-loading-of-images-in-a-uitableview/](http://kosmaczewski.net/asynchronous-loading-of-images-in-a-uitableview/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:35:25.450

```
 @interface ViewController ()
{
    NSMutableArray *images;
NSMutableDictionary *dicImages_msg;
    BOOL isDecliring_msg;
    BOOL isDragging_msg;

  }
 @implementation ViewController ()
 - (void)viewDidLoad
  {
    [super viewDidLoad];
    dicImages_msg = [[NSMutableDictionary alloc] init];
    [self parsing];//parse and save the images to the images array
  }

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:   (NSIndexPath *)indexPath
{

   static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil)
  {
      cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    // Set up the cell...
   }

      cell.imageView.image=[UIImage imageNamed:@"placeholder.png"]; //placeholder image is blank image displayed till the image loads

    if ([dicImages_msg valueForKey:[images objectAtIndex:indexPath.row]])
    {

        if (images.count == 0)
        {
            cell.imageView.image=[UIImage imageNamed:@"placeholder.png"];
        }

        else
        {
            cell.imageView.image=[dicImages_msg valueForKey:[images objectAtIndex:indexPath.row]];
        }
    }

    else
    {

        if (!isDragging_msg && !isDecliring_msg)
        {
            [self performSelectorInBackground:@selector(downloadImage_3:) withObject:indexPath];
        }

        else
        {
            cell.imageView.image=[UIImage imageNamed:@"placeholder.png"];
        }
    }

return cell;

}
-(void)downloadImage_3:(NSIndexPath *)path
{

    NSAutoreleasePool *pl = [[NSAutoreleasePool alloc] init];

    UIImage *img=[[UIImage alloc]init];
            img=[UIImage imageWithData: [NSData dataWithContentsOfURL:[NSURL URLWithString:[images objectAtIndex:path.row]]]];

    [dicImages_msg setObject:img forKey:[images objectAtIndex:path.row]];

     [self.YourTable performSelectorOnMainThread:@selector(reloadData) withObject:nil waitUntilDone:NO];

     [pl release];

} 
```

# android - 在 facebook android 中共享时出现问题

> ID：14438451
> 
> 赞同：0
> 
> 时间：2013-01-21T12:17:39.990
> 
> 标签：android, facebook, cordova

在我的 android phonegap 应用程序中，我使用 createchooser 使用插件从移动设备获取所有共享应用程序。它可以正常共享，但是当我尝试在 postToWall 页面文本框中输入时，facebook 应用程序自动关闭并在 logcat 中显示错误。我在三星银河选项卡（android 2.2）中面临这个问题。

这是我的代码：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/plain");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"www.google.com");
this.ctx.startActivity(Intent.createChooser(emailIntent, "Share:")); 
```

这是我的 logcat 错误：

```
01-23 07:08:42.865: I/dalvikvm(4054): threadid=3: reacting to signal 3
01-23 07:08:42.875: I/dalvikvm(4054): Wrote stack traces to '/data/anr/traces.txt'. 
```

请帮我解决这个问题。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:40:49.447

它可能就像需要将 http:// 放在 URL 前面一样简单

您可能知道，原生 android facebook 共享只接受 URL，不接受其他任何内容。共享文本或文本 + URL 不起作用（屁股很痛） - 所以它可能认为这是一个字符串，除非你输入 http://

例子：

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);
emailIntent.setType("text/plain");
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,"http://www.google.com");
this.ctx.startActivity(Intent.createChooser(emailIntent, "Share:")); 
```

# apache - apache Solr-4.0.0 无法使用 Tomcat 加载 mysql 驱动程序

> ID：14438455
> 
> 赞同：0
> 
> 时间：2013-01-21T12:17:50.943
> 
> 标签：apache, tomcat

我正在尝试将 apache Sonr(apache-solr-4.0.0) 与 Tomcat 集成并低于错误。

```
15:12:40    SEVERE  DataImporter    Delta Import Failed
java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: 
Could not load driver:  com.mysql.jdbc.Driver Processing Document # 1
        at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java:273)
... 11 more
Caused by: org.apache.solr.common.SolrException: Error loading class ' com.mysql.jdbc.Driver'
        at org.apache.solr.core.SolrResourceLoader.findClass(SolrResourceLoader.java:436)
        at org.apache.solr.handler.dataimport.DocBuilder.loadClass(DocBuilder.java:889)
        ... 12 more
Caused by: java.lang.ClassNotFoundException:  com.mysql.jdbc.Driver
        at java.net.URLClassLoader$1.run(Unknown Source) 
```

我尝试了以下添加 mysql-connector-java-5.1.22-bin.jar 的选项，但没有一个有效

1.  作为战争的一部分添加（solr.war/WEB-INF/lib）
2.  添加为 Web 服务器 (Tomcat/lib) 的一部分
3.  在 example/solr 下创建一个新目录 lib 并放置 mysql 连接器 jar (mysql-connector-java-5.1.22-bin.jar) 并从 solr.xml 引用 lib 路径。

任何帮助都非常可观。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:03:40.907

类名后面有一个空格：

```
Error loading class '*** ***com.mysql.jdbc.Driver' 
```

删除尾随空格。

HIH

# javascript - 在 JavaScript 中克隆 FileList 对象以进行文件上传？

> ID：14438456
> 
> 赞同：7
> 
> 时间：2013-01-21T12:17:54.793
> 
> 标签：javascript, html, object, file-upload, cloning

好了，我的情况就到这里。我有一个处理 AJAX 表单提交和其他相关同步和异步请求的 JavaScript 类。它收集数据，然后将此数据设置为请求的临时存储，然后使用临时存储数据发出请求。

例如：

*   用户开始构建请求，将 NAME 和 LAST NAME 放入表单
*   该数据被放入对象变量 SUBMITDATA
*   发出请求时，此数据将被克隆到另一个变量 TEMPSUBMITDATA
*   请求完成后，用于发出请求的数据仍然可用（用于调试或其他目的）

这意味着如果两个请求同时通过同一个对象进行，那么我仍然可以访问用于发出这些请求的数据。

一切都按预期工作，直到我想使用 HTML5 FileList 和 FormData。虽然我可以相对轻松地在 JavaScript 中克隆对象，但我无法克隆 FileList。这是一个例子：

```
<html>
<head>
    <script type="text/javascript">
        // This method is used to clone data objects
        function clone(object){
            if(object==null || typeof(object)!=='object'){
                return object;
            }
            // This line throws the error when FileList data is attempted to be cloned
            var tmp=object.constructor();
            for(var key in object){
                tmp[key]=clone(object[key]);
            }
            return tmp;
        }

        // This is an example data storage
        var submitData=new Object();
        submitData['some-data']='abc';

        function uploader(files){

            submitData['my-files']=files;

            // This clones the object and leads to the error because of FileList
            var tempSubmitData=clone(submitData);

            // HERE WOULD THE ACTUAL FORM SUBMIT HAPPEN
            // THIS EXAMPLE IS SHOWN FOR EASIER READING OF
            // THE PROBLEM EXPLAINED ABOVE

        }
    </script>
</head>
<body>
    <input type="file" name="myfile" value="" onchange="uploader(this.files);"/>
</body> 
```

这引出了我的问题，我可以 - 完全 - 以任何方式克隆这种类型的数据，以便我可以存储它直到请求完成？或者真的是每次都制作新对象的唯一方法？

新的对象解决方案对我来说并不好，因为我的类就像一个单独的应用程序一样工作，它有一个日志和其他数据，这些数据对以后的请求跟踪很有用，而且它在每种情况下都非常有效——直到现在我偶然发现了 HTML5 FileList和 FormData 使用。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-22T19:25:00.623

如果您正在使用`jQuery`，您可以使用该`extend`方法克隆这样的对象。

```
var clonedObject = $.extend(true,{},yourObject); 
```

如果你不是，也许你可以在这种情况下使用本机`Object.create()`

```
var clonedObject = Object.create(yourObject); 
```

最后一个不是副本（如果我没记错的话，它是一个**空**对象，它具有前一个的*属性*和*功能作为其原型的一部分），但它是相似的，我认为在这种情况下它会为你工作。*

# nullpointerexception - 缩回时drools 5.5.0-final中的NullPointerException

> ID：14438459
> 
> 赞同：0
> 
> 时间：2013-01-21T12:17:59.557
> 
> 标签：nullpointerexception, drools

我对以下规则有疑问：

```
rule "Término sin Traducción"
    salience -100
    dialect "mvel"
    when
        traductor : TraductorDeEventosTratados()
            eventoGenerico : EventoGenerico() from traductor.eventoGenerico
    then
        System.out.println("Evento generico: " + eventoGenerico);
            traductor.setEventoGenerico( null );
            update( traductor );
            retract( eventoGenerico );
end 
```

当收回“eventoGenerico”时，它会导致一个`NullPointerException`，就好像它不存在于工作内存中（它实际上存在，并且另一个规则将它设置`eventoGenerico`为`traductor`之前）：

```
Exception executing consequence for rule "Término sin Traducción" in RULA_PROV.SYSTEM_RULES: [Error: drools.retract( eventoGenerico ): null]
[Near : {... System.out.println("Evento gen ....}]
             ^
[Line: 1, Column: 1]
        at org.drools.runtime.rule.impl.DefaultConsequenceExceptionHandler.handleException(DefaultConsequenceExceptionHandler.java:39)
        at org.drools.common.DefaultAgenda.fireActivation(DefaultAgenda.java:1297) 
```

但是，如果我进行这个小改动，它就可以正常工作（这验证了 eventtoGenerico 确实存在于工作内存中）：

```
rule "Término sin Traducción"
    salience -100
    dialect "mvel"
    when
        traductor : TraductorDeEventosTratados()
            eventoGenerico : EventoGenerico()
            eventoGenerico2 : EventoGenerico( this == eventoGenerico ) from traductor.eventoGenerico
    then
        System.out.println("Evento generico: " + eventoGenerico);
            traductor.setEventoGenerico( null );
            update( traductor );
            retract( eventoGenerico );
end 
```

它看起来像一个错误，有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:28:38.573

你可以收回（traductor），但不能收回Generico。

问题是 eventtoGenerico 是您的“traductor”事实的属性。你不能收回它，因为你没有在工作记忆中引用这个事实。

您确实插入了一个 EventoGenerico 对象作为一个单独的事实，但它只是在您引用它的第二个（工作）示例中，因此能够收回它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T10:04:18.753

这似乎是 Drools 5.5 中由使用 mvel 方言引起的错误。我设法使用这个简单的测试重现了您的错误：

爪哇：

```
Model model = new Model("Model A");
DataSample data = new DataSample(model);
ksession.insert(model);
ksession.insert(data);

ksession.fireAllRules(); 
```

流口水：

```
rule "Rule 1"
dialect "mvel"
when
    $d: DataSample()
    $m: Model() from $d.model
then
    $d.setModel(null);
    update($d);
    retract($m);
end 
```

如果您删除**方言“mvel”**修饰符，该规则将按预期工作。最近在 Drools 的邮件列表中有一些关于 mvel 的错误报告。也许这就是其中之一。

最好的祝福，

# internet-explorer - iFrames Iexplorer 不写入或读取会话（或 cookie）

> ID：14438461
> 
> 赞同：0
> 
> 时间：2013-01-21T12:18:10.957
> 
> 标签：internet-explorer, session, iframe, cookies, p3p

我构建了一个表单来逐步提交数据。在步骤之间，数据从步骤 1 进行到步骤 2，依此类推。需要这些数据。50% 的访问者使用 iframe 从不同站点访问表单。

最初，数据存储在 cookie 中。这几乎适用于所有浏览器，除了 iexplorer。我玩了几天 P3P 但放弃了。什么都没有改变。然后我读到会话没有这个问题。所以我将整个登录系统更改为会话。

现在我正在测试系统，除了粗略的 Iexplorer 之外，每个浏览器仍然使用 iframe 中的表单工作。

有什么我可以做的吗？

更新：服务器位于我的时区时位于另一个时区。更改时区应该会有所帮助，但没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:33:29.417

花了一些时间，但它已经解决了。开始了：

1.  有时时区不正确。如果差值超过一个小时，Iexplorer 会话将立即被销毁。您可以手动更改时区或要求您的网络托管商这样做。在 PHP 中，您可以尝试：`date_default_timezone_set(string $timezone_identifier)`

2.  除了1之外，有时候一小时之内就呆不下去了。如果是这样，您可以更改会话缓存过期设置。在 PHP 中是`<?php session_cache_expire(1440); ?>`

3.  iframe 中的 IE 有时会出现下划线问题。使用下划线时，IE 拒绝 cookie。所以不要使用它们或确保 IE 不会以这种方式存储它的会话。

4.  使用 P3P（检查它是否在法律上允许等等！）。在 PHP 中你可以使用`header('P3P: CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"');`

这就是我所尝试的，他们一起工作（不是靠他们自己）。

# haskell - 如何在 Parsec 中形成可能匹配许多选项但必须匹配至少一个选项的 OR 选择？

> ID：14438462
> 
> 赞同：0
> 
> 时间：2013-01-21T12:18:23.613
> 
> 标签：haskell, parsec

我正在尝试使用 Parsec 包在 Haskell 中编写解析器。输入规则的一部分要求解析器匹配规则选项。规则中可能有多个规则匹配，但*至少有*一个规则必须匹配，否则解析器会产生错误。

让我举个例子。假设我们有两个名为`first`和的 Parsec 规则`more`。它可能是：

*   输入匹配`first`后跟`more`;
*   输入仅匹配`first`；或者那个
*   输入仅匹配`more`。

在任何情况下，至少有一个`first`或`more`必须匹配。关于如何做到这一点的任何想法？我考虑过使用，`<|>`但如果我理解正确，它只会匹配*其中一个*规则（即第一个成功的规则）。

**编辑：**

澄清：如果两者都`first`匹配`more`，则必须返回两者的结果。如果只有一个匹配，另一个的返回值可以是一些空值，如`Nothing`，但不允许同时`Nothing`返回`first`和`more`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:43:32.150

假设事情应该来是一些特定的顺序：

```
atLeastOne :: [Parser a] -> Parser [a]
atLeastOne ps = do
  rs <- catMaybes <$> mapM optionMaybe ps
  if null rs
    then parserFail "At least one thing should be present"
    else return rs 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:39:37.667

真正天真的方式是这样的：

```
oneOrBoth first_ more_ = try both <|> first <|> more where
    first = (:[]) <$> first_
    more  = (:[]) <$> more_
    both  = liftM2 (++) first more 
```

这将生成长度为 1 或 2 的列表，并在可能的情况下优先生成长度为 2 的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:51:59.833

它不像其他答案那样普遍，但这可以解决您的问题：

```
atLeastOne :: ParsecT s u m a -> ParsecT s u m a -> ParsecT s u m (Maybe a, Maybe b)
atLeastOne p1 p2 = firstMatches <|> secondMatches <|> fail "Invalid input"
    where
        firstMatches = do
            a <- p1
            maybeB <- (p2 >>= Just <|> return Nothing)
            return (Just a, maybeB)
        secondMatches = do
            b <- p2
            return (Nothing, Just b) 
```

用法：

```
atLeastOne first more 
```

**后期编辑：**

或者更安全的版本：

```
data Choice3 a b c = Choice1Of3 a | Choice2Of3 b | Choice3Of3 c

atLeastOne :: ParsecT s u m a -> ParsecT s u m b -> ParsecT s u m (Choice1Of3 a b (a, b))
atLeastOne p1 p2 = firstMatches <|> secondMatches <|> fail "Invalid input"
    where
        firstMatches = do
            a <- p1
            (p2 >>= \b -> Choice3Of3 (a, b)) <|> Choice1Of3 a
        secondMatches = do
            b <- p2
            return $ Choice2Of3 b 
```

# java - StackTrace : StackTraceElement 自定义

> ID：14438465
> 
> 赞同：0
> 
> 时间：2013-01-21T12:18:43.743
> 
> 标签：java, stack-trace

我想自定义[类](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html)的哈希码。我的问题是如何使用这个新的自定义类而不是 JVM 的默认 StackTraceElement 类。 [`StackTraceElement`](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:27:44.997

> 我想通过扩展自定义 StackTraceElement 类

[StackTraceElement](http://docs.oracle.com/javase/7/docs/api/java/lang/StackTraceElement.html)是`final`并且因此不能被扩展。

如果您（无论出于何种原因）想要自定义堆栈跟踪的打印方式，您可以实现一个实用程序方法，该方法采用`Throwable`然后使用各种方法`StackTraceElement`来创建您自己的布局，例如

```
public static void printCustomizedTrace(Throwable t) {
   for(StackTraceElement e : t.getStackTrace()) {
      System.err.println(" => " + e.getFileName() + ":" + e.getLineNumber());
   }
} 
```

您还可以使用**委托**并创建一个列表`CustomStackTraceElements`，并在类中实现其他逻辑（如 different `hashmap()`）`CustomStackTraceElement`：

```
public static List<CustomStackTraceElement> getCustomizedStackTrace(Throwable t) {
   List<CustomStackTraceElement> result = new ArrayList<>();

   for(StackTraceElement e : t.getStackTrace()) {
      result.add(new CustomStackTraceElement(e));
   }

   return result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:34:32.827

StackTraceElement 是最后一个类。最终课程不能延长。

看看[这个](http://en.wikipedia.org/wiki/Final_%28Java%29)和[这个](https://stackoverflow.com/questions/5181578/use-of-final-class-in-java)

# tsql - TSQL - IF ... then else and case on Dates

> ID：14438466
> 
> 赞同：0
> 
> 时间：2013-01-21T12:18:45.500
> 
> 标签：tsql, date

脑子都冻僵了...

我有 4 个状态日期，即客户记录上的状态发生更改的时间，然后我需要查询数据并查找客户在特定日期的状态。

例如数据

客户设置日期 现场日期 关闭日期 关闭日期

0001 01/01/12 10/01/12 23/02/12 15/11/12

0002 08/10/12 11/11/12

0003 2012 年 11 月 12 日

因此，对于 2012 年 12 月 31 日的日期，0001 将表示关闭状态，0002 将表示实时，0003 将表示设置。

我只想返回该日期的客户和状态。

所以在 31/12/12 我会得到 0001 Closed 0002 Live 0003 Setup 的结果

我用一个案例尝试了这个，但它在某个地方出错了，因为它似乎让我返回了相同的状态，我可以看到为什么它不起作用，但我的小脑袋无法找到让它工作的方法。这来自另一个提取并插入#Temp 表的查询。

```
CASE 
WHEN #TempOutput.[System Setup] BETWEEN @Start and @End THEN 'Prospect' 
WHEN #TempOutput.[Prospect to Live] BETWEEN @Start and @End THEN 'Live'
WHEN #TempOutput.[Live to Terminal] BETWEEN @Start and @End THEN 'Terminal'
WHEN #TempOutput.Closing BETWEEN @Start and @End THEN 'Closed'
END 
```

这就像第一步一样，然后我需要循环显示每个客户在一段时间内的状态。因此，如果它是一个每周周期，那么它需要根据进入日期循环 52 次......我可以做到这一点！哈哈

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:24:47.340

```
SELECT Client,
CASE 
   WHEN [Closed] <= @GivenDate THEN 'Closed'
   WHEN [Closing] <= @GivenDate THEN 'Closing'
   WHEN [Live to Terminal] <= @GivenDate THEN 'Terminal'
   WHEN [Prospect to Live] <= @GivenDate THEN 'Live'
   ELSE 'Prospect' 
END Status
FROM #TempOutput
WHERE [System Setup] <= @GivenDate 
```

# email - 使用 cakephp 发送邮件时出错

> ID：14438470
> 
> 赞同：4
> 
> 时间：2013-01-21T12:18:51.273
> 
> 标签：email, cakephp

我现在使用 CakePHP 已经有一段时间了，我想使用 Email 组件。但我遇到了麻烦。

确实，当我尝试发送电子邮件时，我收到：

无法发送电子邮件。错误：发生内部错误。

嗯...但是，为什么？^^

这是我的控制器：

```
$this->Email->from = 'Email<my.email@myHost.fr>';
$this->Email->to = 'Another.Email@AnotherHost.com';
$this->Email->subject = 'This is the email Subject';
if ($this->Email->send('This is the email message'))
    $this->set('success', 'Email successfully sent !'); 
```

还有我在 app/Config 中的 Email.php：

```
public $smtp = array(
    'transport' => 'Smtp',
    'from' => array('contact@myHost.fr' => 'myHost'),
    'host' => '192.168.10.50',
    'port' => 25,
    'timeout' => 30,
    'username' => 'user',
    'password' => 'secret',
    'client' => null,
    'log' => false,
    //'charset' => 'utf-8',
    //'headerCharset' => 'utf-8', 
```

我还想知道 Cake 是否使用二进制文件来发送像“sendmail”或“邮件”这样的电子邮件，因为在我的 linux 服务器上，这些二进制文件没有安装。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:27:26.583

1) 配置您的 app/config/email.php：

```
public $gmail = array(
        'host' => 'ssl://smtp.gmail.com',
        'port' => 465,
        'username' => 'your qmail username@gmail.com',
        'password' => 'password',
        'transport' => 'Smtp'
    ); 
```

2）在控制器顶部加载电子邮件组件

```
App::uses('CakeEmail', 'Network/Email'); 
```

3) 发送电子邮件

```
 public function send_email(){
            $Email = new CakeEmail();
            $Email->config('gmail');
            $Email->from('from@gmail.com');
            $Email->to('to@gmail.com');  
            $Email->subject('Expire Date Information ');
            $Email->emailFormat('html');
            $Email->send();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:35:58.757

`EmailComponent`从 CakePHP 2.x 开始不推荐使用，取而代之的是CakeEmail[库类](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)。我相信只需`CakeEmail`要从 中读取您的配置`app/Config/Email.php`，`EmailComponent`而是将其选项作为属性 ( `smtpOptions`)。

迁移到新组件非常容易`CakeEmail`，在控制器类定义之上，只需添加：

```
App::uses('CakeEmail', 'Network/Email'); 
```

然后在您的控制器中，将您当前的代码替换为：

```
// In the top of your controller, initialize the component variable first.
private $__Email;

// In your action...
$this->__Email = new CakeEmail();
$this->__Email->from('my.email@myHost.fr')
    ->to('email@AnotherHost.com')
    ->subject('This is the email Subject')
    ->send('This is the email message');

$this->set('success', 'Email successfully sent !'); 
```

至于您的第二个问题，是的，您需要在用于发送邮件的服务器上安装类似 sendmail 的 MTA（邮件传输代理）。在水下，CakeEmail 使用 PHP 的`mail()`方法，该方法使用您`sendmail_path`在`php.ini`文件中设置的任何内容。

# objective-c - 如何更改ios中字符串的日期格式

> ID：14438476
> 
> 赞同：-2
> 
> 时间：2013-01-21T12:19:43.213
> 
> 标签：objective-c, nsdate

我有一个字符串**2013-01-10T08:24:12.503**，它是“日期”和“时间”。这是我从服务器收到的格式。

我想以 2013-01-10 08:24:12 的格式显示它。我怎样才能做到这一点？

请帮帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:37:42.273

您需要转义`T`字符串

```
NSString *string = [NSString stringWithFormat:@"2013-01-10T08:24:12.503"];
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd'T'HH:mm:ss.SSS"]; 
```

使用上述格式正常`NSDate`

```
NSDate *formattedDate = [dateFormatter dateFromString:string];   // 2013-01-10 02:54:12 +0000 
```

再次设置你想要的格式

```
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"]; 
```

得到`String`你想要的，

```
NSString *curDate = [dateFormatter stringFromDate:date];    // 2013-01-10 08:24:12 
```

检查这个[链接](https://stackoverflow.com/questions/2800780/unable-to-parse-date-using-nsdateformatter#answer-2800868)，我在哪里得到了参考。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-21T12:26:52.177

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

 [dateFormatter setDateFormat:@"yyyy-MM-dd 'at' HH:mm"];

 NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:162000];

  NSString *formattedDateString = [dateFormatter stringFromDate:date];

  NSLog(@"formattedDateString: %@", formattedDateString); 
```

# db2 - db2 export 数据一致性

> ID：14438479
> 
> 赞同：0
> 
> 时间：2013-01-21T12:19:48.987
> 
> 标签：db2, export, consistency

我正在导出一个大小约为 1TB 的表。

如何确保在导出期间，数据从一致点导出。

假设如果我的导出运行了 3 小时，并且在此期间如果在此特定表上发生任何 dml，它将如何影响我的导出。

我的出口转储也会转储最近的 dmls 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:58:09.750

添加`WITH RR`到您的 select 语句中会强制该语句使用可重复的读取隔离级别——这将保证您的导出在事务上是一致的。

例如：

```
export to file.del of del
select * from yourtable WITH RR; 
```

您可以在 DB2 文档中 阅读有关[隔离级别的更多信息。](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.admin.perf.doc/doc/c0004121.html)

请注意，这样做可能会对应用程序的并发性（和性能）产生负面影响，并且很容易导致问题，因此只要导出 1Tb 表的内容，就无法有效地锁定表。

如果确实需要获得一组事务一致的数据，并且无法像这样导出数据，您可以考虑备份数据库并将其还原到另一个系统上，在该系统上不会有其他应用程序尝试访问同时数据库。

# android - 测试扩展下载时出现错误 NOT_MARKET_MANAGED

> ID：14438482
> 
> 赞同：1
> 
> 时间：2013-01-21T12:20:05.273
> 
> 标签：android, android-lvl, apk-expansion-files

我想测试扩展文件下载器，但应用程序没有通过 LVL 许可证。它给了我`ERROR NOT_MARKET_MANAGED`

*   我的申请已经发布。
*   我通过更改版本代码并将扩展文件放在 Google Play 上起草了一个应用程序。
*   在开发者帐户中，我添加了我的电子邮件地址以获取测试响应并更改`response normally`为`LICENSED`.
*   我在我的真实设备中安装了起草的应用程序并返回错误代码 3，即`ERROR NOT_MARKET_MANAGED`

现在缺少什么？

**编辑：**它现在正在工作，实际上我`LICENCED`在一段时间后得到了回应。我认为谷歌需要时间来更新它的服务器。

我得到了`XAPK file validation failed`它卡住了。

# java - 将布尔值转换为布尔值

> ID：14438485
> 
> 赞同：-3
> 
> 时间：2013-01-21T12:20:21.090
> 
> 标签：java

我用 get.bool 调用方法并获取 bool 值，我需要更新其他需要获取 boolean(Value.setValue()) 类型的方法，

```
Bool aa = Entry.getBool();

Value.setValue(aa ); 
```

因为我使用 aa 我收到消息 BooleanValue 类型中的方法 setValue(Boolean) 不适用于参数 (Bool)

我应该怎么做这个铸造？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:29:50.580

我认为他试图做的是将布尔值转换为布尔值（原语）。如果是这样的话，你可以这样做：

```
//Construct a Boolean object.
Boolean blnObj = new Boolean("true");

//use booleanValue of Boolean class to convert it into boolean primitive
boolean b = blnObj.booleanValue();
System.out.println(b); 
```

# logging - 使用 Play 的多个 log4j 配置文件

> ID：14438487
> 
> 赞同：2
> 
> 时间：2013-01-21T12:20:24.050
> 
> 标签：logging, configuration, log4j, playframework-2.0

我正在尝试创建两个 log4j.xml 文件 - 一个用于测试，一个用于生产。

例如

*   log4j-test.xml
*   log4j-prod.xml

谷歌搜索后发现，必须在 conf 文件中指定路径，以便选择使用哪一个。但即使我指定它像

> application.log.path=/log4j-test.xml

它仍然试图寻找 log4j.xml，据我所知，这是默认的（因为在项目中它没有在任何地方指定），我得到了

> log4j:WARN 找不到记录器（应用程序）的附加程序。
> 
> log4j:WARN 请正确初始化 log4j 系统。
> 
> log4j:WARN 有关详细信息，请参阅[http://logging.apache.org/log4j/1.2/faq.html#noconfig](http://logging.apache.org/log4j/1.2/faq.html#noconfig) 。

我检查了给出的链接，但它没有包含我的案例的信息。

所以 - 如果文件名是 log4j.xml 一切正常，但如果我尝试将其重命名为 log4j-test.xml 并在 application.conf 文件中指定路径，它会给出上面的警告并且日志记录不起作用。

我需要两种不同配置的主要原因是在测试环境中我想使用一组附加程序，但在生产环境中使用一组不同的附加程序。（如果有与使用多个 log4j 配置 xml 不同的方法来实现这一点，请提供建议）

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:26:31.470

我通常`-Dlog4j.configuration=\path\filename`在启动应用程序时使用 in java指定我的 log4j 文件`jvm parameters`。如果可能，您可以尝试相同的方法

# c# - 同步两个 BackgroundWorker

> ID：14438497
> 
> 赞同：1
> 
> 时间：2013-01-21T12:20:53.773
> 
> 标签：c#, multithreading, thread-safety, backgroundworker, thread-sleep

我正在使用其[Modbus](http://en.wikipedia.org/wiki/Modbus)协议向硬件控制器编写 C# 包装器。
控制器有 12 个输入和 12 个输出。

包装器有两个任务：
1\. 以恒定的时间间隔（即 50 毫秒）轮询控制器的输入。
2\. 运行预先配置的序列，这会改变控制器的输出。

该序列是基于 XML 的：

```
<opcode>
  <register>0</register>
  <bit>1</bit>
  <duration>500</duration>
</opcode>
<opcode>
  <register>0</register>
  <bit>0</bit>
  <duration>0</duration>
</opcode>
.... 
```

在上面的示例中，控制器应打开输出#0 并在 500 毫秒后将其关闭。
操作之间的暂停是使用`Thread.Sleep()`.
过去我只使用了一个 BackgroundWorker。当不运行序列时，它会进行轮询。

**挑战：**
对包装器的新需求是它可以在运行序列时检测控制器输入的变化。
我已将包装器修改为具有 2 个后台工作程序，一个用于轮询，另一个用于设置输出寄存器。
每个 BackgroundWorkers 在控制器上调用一个单独的函数，它们不会尝试访问彼此的数据，也不会共享任何数据。

**当前代码：**

```
private void workerSequence_DoWork(object sender, DoWorkEventArgs e)
{
    if (!terminating)
        if (e.Argument != null)
            DoSequence(e);
}

private void workerPoll_DoWork(object sender, DoWorkEventArgs e)
{
    if (!terminating)
    {
        DoPoll();
        Thread.Sleep(pollInterval);
    }
}

private void DoSequence(DoWorkEventArgs e)
{
    string sequenceName = e.Argument.ToString();

    foreach (configurationSequencesSequenceOpcode opcode in sequencesList[sequenceName])
    {
        if (workerSequence.CancellationPending)
            break;

        byte register = opcode.register;
        bool bit = opcode.bit;
        int duration = opcode.duration;

        SetRegister(register, bit, false);
        Thread.Sleep(duration);
    }

    e.Result = e.Argument;
} 
```

**问题：**
这两个 BackgroundWorker 似乎相互干扰。我试过使用`Semaphore`，但是处理序列`Monitor.Wait()`的`ManualResetEvent.WaitOne()`BackgroundWorker 不能很好地处理它们。主要问题 - 它的睡眠时间与以前不一致。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:42:18.280

在测试代​​码之外使用`Thread.Sleep`通常并不理想。

您可以将`System.Threading.Timer`对象用于这两个要求。

* * *

**编辑**如果要防止并发调用，可以使用锁来实现互斥。

创建两个计时器处理程序都可以看到的要锁定的对象：

```
public object gate = new object(); 
```

* * *

对于轮询，您要设置一个像这样的计时器：

```
var pollTimer = new Timer( HandlePoll, null, 0, Timeout.Infinite );
...

void HandlePoll( object state )
{
  lock ( gate )
  {
    DoPoll();
  }
  pollTimer.Change( pollInterval, Timeout.Infinite );
} 
```

我已将时间段设置为，`Timeout.Infinte`因此计时器不会重复。这意味着一个轮询完成和另一个开始之间的时间 - 如果需要一些时间`pollInterval`，这将与轮询周期不同。`DoPoll()`

这样做还可以防止计时器在之前的轮询仍在运行时再次滴答作响。

* * *

您可以使用相同的主体来发送命令，但您必须将当前索引管理到`sequencesList`：

```
var seqTimer = new Timer( HandleSequence, null, 0, Timeout.Infinate );
int seqIndex = 0;
...

void HandleSequence( object state )
{
  var opcode = sequencesList[sequenceName][ seqIndex ];

  byte register = opcode.register;
  bool bit = opcode.bit;
  int duration = opcode.duration;

  lock( gate )
  {
    SetRegister(register, bit, false);
  }

  seqIndex++;
  if ( seqIndex < sequencesList[sequenceName].Count )
  {
    seqTimer.Change( duration, Timeout.Infinte );
  }
} 
```

或类似的东西（但有适当的错误处理！）

您只需处理计时器即可处理终止和取消。

* * *

顺便说一句，您可以阅读一本关于线程的优秀（免费）电子书：

[`Albahari: Threading in C#`](http://www.albahari.com/threading/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:24:20.610

将序列名称排队到等待 BlockingCollection 的一个线程怎么样？

伪，每个设备通道一个线程：

```
while(true)
{
    if outputQueue.TryTake(thisSeqName,50)
    {
        foreach (configurationSequencesSequenceOpcode opcode in sequencesList[thisSeqName])
        {
            outputOpcode(opcode);
            DoPoll();
        }
    }
    else
        DoPoll();
} 
```

嗯..这将无法正常工作，因为在发送序列时它可能会过于频繁地轮询。需要重新考虑，但我仍然认为每个设备一个线程将是一种更好的方法。

```
int startTick=Environment.TickCount;
while(true){
    int now=Environment.TickCount;
    waitInterval=50-(now-startTick);
    if outputQueue.TryTake(thisSeqName,waitInterval)
    {
        foreach (configurationSequencesSequenceOpcode opcode in sequencesList[thisSeqName])
        {
            outputOpcode(opcode);
            int now=Environment.TickCount;
            waitInterval=50-(now-startTick);
            if (waitInterval<=0)
            {
                DoPoll();
                startTick=Environment.TickCount;
            }
        }
    }
    else
    {
        DoPoll();
        startTick=Environment.TickCount;
    }
} 
```

# android - 在 intent.action.BATTERY_CHANGED 期间出现致命异常

> ID：14438498
> 
> 赞同：1
> 
> 时间：2013-01-21T12:20:54.543
> 
> 标签：android, android-intent

我制作了一个简单的应用程序来监视设备的电池电量。我使用这段代码：

```
private void setProperImageByBatteryLevel() {

    BroadcastReceiver batteryLevelReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            context.unregisterReceiver(this);
            int rawlevel = intent.getIntExtra("level", -1);
            int scale = intent.getIntExtra("scale", -1);
            int level = -1;
            if (rawlevel >= 0 && scale > 0) {
                level = (rawlevel * 100) / scale;
            }
            if (DEBUG) {
                Log.i(TAG, "Charge: " + Integer.toString(level) + "%");
            }
            if (level > 80) {
                batteryImg.setImageResource(R.drawable.bat100);
            } else if (level > 60) {
                batteryImg.setImageResource(R.drawable.bat80);
            } else if (level > 40) {
                batteryImg.setImageResource(R.drawable.bat60);
            } else if (level > 20) {
                batteryImg.setImageResource(R.drawable.bat40);
            } else if (level > 0) {
                batteryImg.setImageResource(R.drawable.bat20);
            }
        }
    };
    IntentFilter batteryLevelFilter = new IntentFilter(Intent.ACTION_BATTERY_CHANGED);
    activity.registerReceiver(batteryLevelReceiver, batteryLevelFilter);
} 
```

它工作正常，但有时我会遇到以下异常：（大约 10/1 次）

```
01-21 13:16:56.617: E/AndroidRuntime(7810): FATAL EXCEPTION: main
01-21 13:16:56.617: E/AndroidRuntime(7810): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000000 (has extras) } in hu.trendency.activitimap.widgets.Battery$2@4053e3b8
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.os.Handler.handleCallback(Handler.java:587)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.os.Handler.dispatchMessage(Handler.java:92)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.os.Looper.loop(Looper.java:123)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.app.ActivityThread.main(ActivityThread.java:3687)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at java.lang.reflect.Method.invokeNative(Native Method)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at java.lang.reflect.Method.invoke(Method.java:507)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at dalvik.system.NativeStart.main(Native Method)
01-21 13:16:56.617: E/AndroidRuntime(7810): Caused by: java.lang.IllegalArgumentException: Receiver not registered: hu.trendency.activitimap.widgets.Battery$2@4053e3b8
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:610)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:919)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:331)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at hu.trendency.activitimap.widgets.Battery$2.onReceive(Battery.java:92)
01-21 13:16:56.617: E/AndroidRuntime(7810):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
01-21 13:16:56.617: E/AndroidRuntime(7810):     ... 9 more 
```

有人看到问题了吗？

编辑 ：

我改变了你告诉我的方式，现在我得到了这个：

```
01-23 14:43:40.205: E/AndroidRuntime(27064): FATAL EXCEPTION: main
01-23 14:43:40.205: E/AndroidRuntime(27064): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.intent.action.BATTERY_CHANGED flg=0x60000000 (has extras) } in hu.trendency.activitimap.widgets.Battery$2@40534080
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.os.Handler.handleCallback(Handler.java:587)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.os.Looper.loop(Looper.java:123)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.app.ActivityThread.main(ActivityThread.java:3687)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at java.lang.reflect.Method.invokeNative(Native Method)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at java.lang.reflect.Method.invoke(Method.java:507)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at dalvik.system.NativeStart.main(Native Method)
01-23 14:43:40.205: E/AndroidRuntime(27064): Caused by: java.lang.IllegalArgumentException: Receiver not registered: hu.trendency.activitimap.widgets.Battery$2@40534080
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.app.LoadedApk.forgetReceiverDispatcher(LoadedApk.java:610)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.app.ContextImpl.unregisterReceiver(ContextImpl.java:919)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.content.ContextWrapper.unregisterReceiver(ContextWrapper.java:331)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at hu.trendency.activitimap.widgets.Battery$2.onReceive(Battery.java:93)
01-23 14:43:40.205: E/AndroidRuntime(27064):    at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T12:15:20.503

改变

```
context.unregisterReceiver(this); 
```

至

```
activity.unregisterReceiver(this); 
```

因为您进入的上下文`onReceive()`可能与您最初用于注册接收者的上下文相同，也可能不同。

您还可以`unregisterReceiver()`使用 try/catch 块和 catch 和 ignore围绕调用`IllegalArgumentException`。

# inno-setup - InnoSetup 如何确定卸载程序窗口的 HWND？

> ID：14438502
> 
> 赞同：2
> 
> 时间：2013-01-21T12:21:17.627
> 
> 标签：inno-setup

我需要那个 hwnd 在我的自定义 dll 中使用它。
`ExpandConstant('{hwnd}')`在卸载程序中不起作用...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:43:25.897

您可以简单地从`UninstallProgressForm`对象的`Handle`属性中获取它。这是一个示例代码，它使用 Windows API 函数更改卸载表单窗口的文本，该函数通过传递的句柄更改文本作为证明：

```
[Code]
#ifdef UNICODE
  #define AW "W"
#else
  #define AW "A"
#endif
function SetWindowText(hWnd: HWND; lpString: string): BOOL;
  external 'SetWindowText{#AW}@user32.dll stdcall';

procedure CurUninstallStepChanged(CurUninstallStep: TUninstallStep);
begin
  if CurUninstallStep = usUninstall then
    SetWindowText(UninstallProgressForm.Handle, 'Caption set by window handle');
end; 
```

# centos - 用php-5.2.8在centos上配置xdebug

> ID：14438503
> 
> 赞同：0
> 
> 时间：2013-01-21T12:21:20.403
> 
> 标签：centos, centos5, php-5.2

我按照链接[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)在我的 centos5.8 中安装 xdebug2.2.1 for netbeans7.2 php 但我没有 phpize 需要安装 php5-dev 并且我需要继续工作php 版本 5.2.8 所以无法在 centos5.8 中安装 php5-dev

我的 rpm -qa |grep php 给出以下内容：

php-common-5.2.8-1.fc5.remi，php-mysql-5.2.8-1.fc5.remi，

php-gd-5.2.8-1.fc5.remi，php-5.2.8-1.fc5.remi，

php-cli-5.2.8-1.fc5.remi , php-pdo-5.2.8-1.fc5.remi

php-xml-5.2.8-1.fc5.remi

请帮我想办法为以下技术栈 php-5.2.8 centos-5.8 安装 xdebug

无法更改php版本但可以灵活升级或降级centos

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:58:26.430

谢谢你们

找到我的问题的答案我需要安装 php-devel-5.2.8-1.fc5.remi 以使 phpize 工作，然后按照前面提到的链接[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)。它工作正常。

# c# - 在 Vb.Net 中获取服务器端下拉列表的选定值

> ID：14438507
> 
> 赞同：0
> 
> 时间：2013-01-21T12:21:38.033
> 
> 标签：c#, jquery, asp.net, hidden-field

我使用 jQuery 填写了我的服务器端下拉列表，我必须在我使用 Vb.net 的服务器端获取这个下拉值。一个想法是在按钮单击时将所选值保存在隐藏字段中并进入服务器端，但我想知道这是我可以直接获取此值而不使用隐藏字段的任何方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:24:27.107

您可能想尝试 Request.forms 并检查它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:51:39.183

就像 Dhaval 说的那样，您可以使用 Request.Form。在我的项目中，我使用过它，它通过使用按钮来工作。

在您的标记中

添加一个像这样的按钮`

```
<asp:Button ID="IDButton" runat="server" CssClass="HiddenText" /> 
```

HiddenText 是一个简单的 css 类，显示设置为无。

```
<script src="http://code.jquery.com/jquery-1.8.3.js" type="text/javascript"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js" type="text/javascript">  </script> 
```

默默强行回帖

```
 <script type="text/javascript" language="javascript">
function SaveSelectedValueForLaterUse(selectedItem, selectedLabel) {
        __doPostBack('<%#IDButton.UniqueID%>', selectedItem + '|' +  selectedLabel);
         }
  </script> 
```

在您的 jquery 选择功能中

```
 select: function (e, i) {
            SaveSelectedValueForLaterUse(i.item.val, i.item.label);
               } 
```

现在享受您在代码背后的辛勤工作的成果

```
 Protected Sub IDButton_Click(sender As Object, e As EventArgs) Handles IDButton.Click
    Dim args As String() = Split(Request.Form("__EVENTARGUMENT"), "|", , CompareMethod.Text)
   //grab the id and use it
   Dim myid=args[0]
 End Sub 
```

# numpy - 对非常大的一维数组进行排序

> ID：14438509
> 
> 赞同：2
> 
> 时间：2013-01-21T12:21:45.143
> 
> 标签：numpy, pandas, pytables

我即将第一次尝试 Pytables，我需要在每个时间步将数据写入 hdf 文件。我将有超过 100,000 个时间步长。完成后，我想按第 2 列对我的 100,000+ x 6 数组进行排序，即，我目前已按时间排序所有内容，但现在我需要按降雨率递减的顺序对数组进行排序（第 2 列）。我不确定如何从这里开始。我知道将整个数组放在内存中是不明智的。任何想法如何快速有效地做到这一点？

感谢任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:32:58.640

> 我知道将整个数组放在内存中是不明智的。

你可能想多了。一个 100K x 6 的阵列`float64`只需要大约 5MB 的 RAM。在我的电脑上，对这样一个数组进行排序大约需要 27 毫秒：

```
In [37]: a = np.random.rand(100000, 6)

In [38]: %timeit a[a[:,1].argsort()]
10 loops, best of 3: 27.2 ms per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:36:54.883

除非您有一台非常旧的计算机，否则您应该将整个数组放入内存中。假设它们是浮点数，它只需要`100000*6*4./2**20 = 2.29`Mb。双打的两倍。您可以使用 numpy 的 sort 或 argsort 进行排序。例如，您可以从第二列获取排序索引：

```
import numpy as np
a = np.random.normal(0, 1, size=(100000,6))
idx = a[:, 1].argsort() 
```

然后使用这些索引您想要的列或整个数组：

```
b = a[idx] 
```

您甚至可以使用不同类型的排序并检查它们的速度：

```
In [33]: %timeit idx = a[:, 1].argsort(kind='quicksort')
100 loops, best of 3: 12.6 ms per loop

In [34]: %timeit idx = a[:, 1].argsort(kind='mergesort')
100 loops, best of 3: 14.4 ms per loop

In [35]: %timeit idx = a[:, 1].argsort(kind='heapsort')
10 loops, best of 3: 21.4 ms per loop 
```

因此，您会看到对于这种大小的数组来说，这并不重要。

# list - QOOXDOO：错误的解决方法：“无法设置模型选择。也许您的模型不是唯一的？” 删除数组中的所有项目时？

> ID：14438510
> 
> 赞同：0
> 
> 时间：2013-01-21T12:21:54.377
> 
> 标签：list, selection, qooxdoo

当我尝试删除数组中的所有元素时出现此错误，该数组是选择框的模型。据我了解，这是因为我选择了第一行并删除了所有项目，以便再次替换它们。我该怎么做才能工作？

```
// is only created the first time
weeks: new qx.data.Array()

// every time I change the year I have to
weeks.deleteAll();
// for each week in the year add the week
weeks.push(qx.data.marshal.Json.createModel({
     label: "week: " + weeksNum
    ,fromDay: week.startDay
    ,toDay: week.endDay
}));

// the view
var weeksSelectBox = new qx.ui.form.SelectBox();
var weeksController = new qx.data.controller.List(this.__headerData.weeks, weeksSelectBox, 'label');
content.add(weeksSelectBox);
weeksSelectBox.addListener("changeSelection", function(e) {
    var selectedItem = e.getData()[0];
    var model = null;
    if(selectedItem){
        model = selectedItem.getModel()
    }
    this.__component.onWeekSelected(model);
}.bind(this)); 
```

# asp.net - 实体框架 SQL server 将数据库转换为精简版最佳实践

> ID：14438515
> 
> 赞同：2
> 
> 时间：2013-01-21T12:22:12.213
> 
> 标签：asp.net, sql-server-2008, entity-framework, webforms

我有一个关于 SQL Server 和 .net 的问题。

我使用 asp.net 4 webforms 开始了一个项目，并使用 Microsoft SQL Server Express Edition（64 位）创建了一个数据库，一切正常。我使用实体框架和数据库优先方法。

我的网络托管服务提供商只有 sql server 2008 (www.arvixe.com)。我尝试在他们的服务器上创建数据库并尝试了许多不同的方式来上传数据库，但似乎并不那么容易。

问题是，1）我可以使用一些 SQL 精简版或其他版本并拥有独立版本的 sql server 吗？2）如果我要使用精简版，我可以使用 sql server management studio 访问数据库（数据库将存储在服务器上的文件夹中_3）更改数据库的最佳和快速方法是什么（如果需要）？4) 是否有可用的迁移选项？4）我需要再次创建模型吗？（我试过但似乎给出了错误）

我只有两张表，所以创建它并不是什么大不了的事，但我不想要不必要的复杂性。

任何帮助，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:28:08.887

1）我刚刚经历了这个并在[SQL Server Compact Toolbox](http://sqlcetoolbox.codeplex.com/)的帮助下解决了它。一旦我接受了它，我不得不使用第三方工具，我发现岩石可以顺利滚动。这里有大量非常实用和有用的信息，但是一旦您下载了[3.0.0.7 版本](http://sqlcetoolbox.codeplex.com/releases/view/103781)，您将看到您需要做的就是编写数据库模式和数据的脚本，然后从[SQL Server中在 SQLCE 数据库上运行该脚本紧凑的工具箱](http://sqlcetoolbox.codeplex.com/)。当您返回 Visual Studio 时，您会看到（仅表（无存储过程/触发器/等）SQL Compact Edition 数据库已正确更新。

2) 不可以。您无法从 SSMS 中连接到 SQLCE 数据库。至少，在投入数小时的研究之后……我做不到。如果我在这方面错了，请纠正我（论坛）。

# vhdl - VHDL std_logic_vector 使用 numeric_std 转换为有符号和无符号

> ID：14438516
> 
> 赞同：4
> 
> 时间：2013-01-21T12:22:13.787
> 
> 标签：vhdl, unsigned, signed

`std_logic_vector`我对使用从到`signed`/的转换有一些疑问`unsigned`。我总是使用转换`signed(...)`, `unsigned(...)`，但是当我尝试使用库中定义的转换`numeric_std`( `to_signed`, `to unsigned`) 时，它不起作用。有人可以向我解释为什么会这样吗？为什么转换`unsigned()`和`signed()`工作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T12:43:37.337

因为`std_logic_vector`和`signed`/`unsigned`类型密切相关，可以使用typecast的方式进行转换。所以`signed(a_std_logic_vector)`，`unsigned(a_std_logic_vector)`没关系。但是，标准中也定义了要转换的函数。

查看[VHDL 常见问题解答](https://web.archive.org/web/20160317021815/http://www.vhdl.org/comp.lang.vhdl/FAQ1.html#vec_conversion)。这是一个旧网站，在新闻组还很热门的时候，它仍然有很多关于 VHDL 的好信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:05:40.553

查看 numeric_std 的包规范。您会发现 to_signed 从整数转换为有符号 ...。

正如“vermaete”所说，signed 是与 std_logic_vector 密切相关的类型，因此您不需要转换函数。

# c# - 如何在 64 位操作系统中打开嵌入在 Windowforms 控件中的 Excel(.xlsx) 文件

> ID：14438518
> 
> 赞同：1
> 
> 时间：2013-01-21T12:22:17.487
> 
> 标签：c#, excel, browser

我正在尝试使用 webbrowser 控件在 Windows 窗体中显示 Excel 文档。

使用在 Codeproject How to Integrate Excel in a Windows Form Application using the WebBrowser[^] 中搜索到的代码，我能够在 webbrowser 控件中正确显示 32 位操作系统中的 excel（.xls 和 .xlsx）文件。

但是，当我尝试在 64 位操作系统中执行代码时，.xlsx 类型的 Excel 文件没有在 webbrowser Control 中打开，而是作为普通的 excel 文件打开，但 .xls 文件在 webbrowser Control 中正确打开。为此，我使用以下链接执行了注册脚本以更改注册表设置当您尝试在 IE7 或 IE8 中查看 2007 Microsoft Office 程序文档时会打开一个新窗口，但 .xlsx 文件始终像 Office excel 文件一样单独打开，而不是打开它在网络浏览器控件中。

目前我正在使用 Microsoft Office 2010 软件作为我的办公工具。

请提供解决方案以打开`.xlsx`要在 webbrowser 控件中打开的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T20:52:53.300

为了能够在 64 位进程中嵌入 Office，您需要安装 64 位 Office。这意味着您不能拥有 32 位 Office（[它们不能在同一台机器上共存](http://blogs.technet.com/b/office2010/archive/2010/02/23/understanding-64-bit-office.aspx)）并且您的 32 位程序将无法运行。您可以发布两个版本，一个 x86 和一个 x64）并让用户做出选择，或者同时发布两个版本并使用检测 CPU 位数的启动器启动正确的版本。

顺便说一句，您仍然需要[BrowserFlags](http://support.microsoft.com/kb/927009) hack，因为自 2007 年以来，Microsoft 不鼓励您这样做。虽然 Office 2010 仍然支持[ActiveX Document Server](http://msdn.microsoft.com/en-us/library/aa733734%28v=VS.60%29.aspx)，但 Office 团队将在将来的某个时候删除该支持。因此，如果您依赖 Office 的 ActiveX Document Server 支持作为核心功能，则需要提前计划。

# c# - 重构 if 语句

> ID：14438520
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:22:26.567
> 
> 标签：c#, asp.net, if-statement

所以 atm 我正在将一个 excel 文档导入我的项目中。然后，如果电子表格中的任何列为空，我将使用 if 语句显示相应的错误消息。我的代码正在运行，但它看起来并不整洁。无论如何将所有 if 语句重构为循环以显示错误消息，可能是另一种检查所有的方法？checkIfColumnIsEmpty 是一个 bool 方法，如果该列为空，则返回 true

```
//if either column 0 and 1 are empty && column 2,3,4 and 5 are not
    if (!checkIfColumnisEmpty(r.ItemArray[0]) || !checkIfColumnisEmpty(r.ItemArray[1])
        && checkIfColumnisEmpty(r.ItemArray[2]) && checkIfColumnisEmpty(r.ItemArray[3])
         && checkIfColumnisEmpty(r.ItemArray[4]) && checkIfColumnisEmpty(r.ItemArray[5]))
    {
        if (checkIfColumnisEmpty(r.ItemArray[0]) && !checkIfColumnisEmpty(r.ItemArray[1]))
        {
            throw new ImportBOQException("Error importing document: First column is empty");
        }
        else if (!checkIfColumnisEmpty(r.ItemArray[0]) && checkIfColumnisEmpty(r.ItemArray[1]))
        {
            throw new ImportBOQException("Error importing document: Second column is empty");
        }

        else if (!checkIfColumnisEmpty(r.ItemArray[0]) && !checkIfColumnisEmpty(r.ItemArray[1]))
        {
            //all columns are valid so...
            Column0inSpreadsheet = r.ItemArray[0] as string;
            Column1inSpreadsheet = r.ItemArray[1] as string;

          //Other code which performs other operations, once the level as reached this far
        }
    }                                

    //if column 0 and 1 are NOT empty && Either column 2,3,4 or 5 is empty
    else if (checkIfColumnisEmpty(r.ItemArray[0]) && checkIfColumnisEmpty(r.ItemArray[1])
          || !checkIfColumnisEmpty(r.ItemArray[2]) || !checkIfColumnisEmpty(r.ItemArray[3])
           || !checkIfColumnisEmpty(r.ItemArray[4]) || !checkIfColumnisEmpty(r.ItemArray[5]))
    {
        if (checkIfColumnisEmpty(r.ItemArray[2]))
        {
            throw new ImportBOQException("Error importing document: Third column is empty");
        }
        else if (checkIfColumnisEmpty(r.ItemArray[3]))
        {
            throw new ImportBOQException("Error importing document: Fourth column is empty");
        }
        else if (checkIfColumnisEmpty(r.ItemArray[4]))
        {
            throw new ImportBOQException("Error importing document: Fifth column is empty");
        }
        else if (checkIfColumnisEmpty(r.ItemArray[5]))
        {
            throw new ImportBOQException("Error importing document: Sixth column is empty");
        }
        else
        //all columns are valid so...
        {   Column2inSpreadsheet = (r.ItemArray[2]) as string;
            Column3inSpreadsheet = (r.ItemArray[3]) as string;
            Column4inSpreadsheet = (r.ItemArray[4]) as string;
            Column5inSpreadsheet = (r.ItemArray[5]) as string;

            //Other code which performs other operations, once the level as reached this far
        }
    }
    else
    //other errors ot related to empty colums
    {
        throw new Exception("Error Uploading");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:26:46.947

首先，将 r 转换为具有命名属性的类，而不是使用数组索引器并从源初始化集合。其次，使用签名 bool VerifyColumn(string value, string propertyName) 创建辅助方法。这是一个基础重构，也许您可​​以将您的逻辑从“Holy s***”更改为“那是一团糟，但我们可以改变它！”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:31:20.383

如果您只需要检查其中一列是否为“空”并获取它的索引，您可以使用它：

```
var firstEmptyColumn = r.ItemArray
    .Select((f, i) => new { Field=f, Index=i })
    .FirstOrDefault(x => r.IsNull(x.Index) || x.Field.ToString().Trim().Length == 0);
if (firstEmptyColumn != null)
{
    string errorMsg = string.Format("Error importing document: {0} column is empty",
        firstEmptyColumn.Index);
    throw new ImportBOQException(errorMsg);
} 
```

# android - 将 Adob e Captive 运行时添加到 Android Eclipse 项目

> ID：14438524
> 
> 赞同：1
> 
> 时间：2013-01-21T12:22:36.610
> 
> 标签：android, air, adobe-captivate

我必须将用 Flash 编写的游戏嵌入到我的 Android 项目中。

该游戏是使用 Adob​​e AIR 开发的。开发此游戏的团队已向我发送了一个包含 Captive 运行时的 *.apk。我知道您可以从 Adob​​e Flex 导出 apk。

但是，如果我在其中一项活动中将 swf 游戏添加到我现有的项目中怎么办？如何将 Captive 运行时嵌入到我的 Android 项目中，以及如何设置显示我的游戏的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T00:57:26.350

好的，当您从其自身构建一个`Android APK`应用`Adobe Air`程序并拥有自己的活动（`.AppEntry`）时，该活动由`Air`运行时引导程序启动。您无法*将我的 swf 添加到 Android 活动*，因为嵌入 APK 的所有 Flash 代码都是从安装活动启动的。

Adobe air 编译`swf`代码`classes.dex`并将资源和清单添加到 APK。Captive 运行时只是添加了一个巨大的核心库，未压缩几乎 17 兆。此库包含 flash 和 Air 运行时，因此您的使用无需单独安装任何 AIR 运行时库。

**注意***强制运行时构建是`minimal 8 Megs`使用强制运行时压缩的。您必须使用 Adob​​e AIR SDK 创建您的游戏并创建 Adob​​e Air 发布版本，该版本将其打包在 Android APK 中。安装后，您可以使用多种方法（自定义 URL、文件、通过 ANE 的广播接收器等）与其他 APK 通信。

我希望这会有所帮助！

# json - 使用 KnocloutJS 视图模型将数据保存到服务器

> ID：14438525
> 
> 赞同：0
> 
> 时间：2013-01-21T12:22:47.287
> 
> 标签：json, knockout.js, knockout-mapping-plugin

我想将我的 ViewModel 保存到我的 SQL 服务器。标准淘汰赛 ko.toJSON(viewModel) 一直给我一个未定义的错误，所以经过一番挖掘后，我发现了这个[问题](https://stackoverflow.com/questions/11690292/knockout-post-json-form-data-posts-null)，但仍然给我未定义的错误。

这是我的视图模型的代码，这只是一个获取两种货币之间转换率的货币转换表。

```
 //ko Event Handler for datepicker.js
    ko.bindingHandlers.datepicker = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            //initialize datepicker with some optional options
            var options = allBindingsAccessor().datepickerOptions || {};
            $(element).datepicker(options).on("changeDate", function (ev) {
                var observable = valueAccessor();
                observable(ev.date);
            });
        },
        update: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor());
            $(element).datepicker("setValue", value);
        }
    };

    //Currency Model Definition
    var currency = function (data) {
        var self = this;
        self.DateCreated = ko.observable(formatJsonDate(data.DateCreated));
        self.CurrencyFrom = ko.observable(data.CurrencyFrom);
        self.CurrencyTo = ko.observable(data.CurrencyTo);
        self.ConversionRate = ko.observable(data.ConversionRate);

        //Yhoo Finance API
        ko.computed(function () {
            var from = self.CurrencyFrom(),
                 to = self.CurrencyTo();

            if (!from || !to) {
                self.ConversionRate("N/A");
                return;
            }

            getRate(from, to).done(function (YahooData) {
                console.log("got yahoo data for [" + from + "," + to + "]: ", YahooData);
                self.ConversionRate(YahooData.query.results.row.rate);
            });
        });
    }

    var NewDate = new Date().getFullYear() + '-' + ("0" + (new Date().getMonth() + 1)).slice(-2) + '-' + new Date().getDate();

    var CurrencyModel = function (Currencies) {
        var self = this;
        self.Currencies = ko.observableArray(Currencies);

        self.AddCurrency = function () {
            self.Currencies.push({
                DateCreated: NewDate,
                CurrencyFrom: "",
                CurrencyTo: "",
                ConversionRate: ""
            });
        };

        self.RemoveCurrency = function (Currency) {
            self.Currencies.remove(Currency);
        };

        self.Save = function () {

            $.ajax({
                url: "#",
                contentType: 'application/json',
                data: ko.mapping.toJSON(CurrencyModel),
                type: "POST",
                dataType: 'json',
                success: function (data) {
                    //I get undefined....
                    alert(ko.mapping.toJSON(CurrencyModel));
                },
                error: function (data) { alert("error" + data); }
            });
        }

        $.ajax({
            url: "CurrencyConfiguration.aspx/GetConfiguredCurrencies",
            data: '{}',
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataType: "JSON",
            timeout: 10000,
            success: function (Result) {
                //                    callback(Result);
                var MappedCurrencies =
              $.map(Result.d,
             function (item) {
                 getRate(item.CurrencyFrom, item.CurrencyTo);
                 return new currency(item);
             }
       );
                self.Currencies(MappedCurrencies);

            },
            error: function (xhr, status) {
                alert(status + " - " + xhr.responseText);
            }
        });

    };

    function formatJsonDate(jsonDate) {
        var FormatDate = new Date(parseInt(jsonDate.substr(6)));
        var Output = FormatDate.getFullYear() + '-' + ("0" + (FormatDate.getMonth() + 1)).slice(-2) + '-' + FormatDate.getDate();
        return (Output);
    };

    function getRate(from, to) {
        return $.getJSON("http://query.yahooapis.com/v1/public/yql?q=select%20rate%2Cname%20from%20csv%20where%20url%3D'http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes%3Fs%3D" + from + to + "%253DX%26f%3Dl1n'%20and%20columns%3D'rate%2Cname'&format=json&callback=?");
    }

        function callback(data) {
        if (viewModel) {
            // model was initialized, update it
            ko.mapping.fromJS(data, viewModel);
        } else {
            // or initialize and bind
            viewModel = ko.mapping.fromJS(data);
            ko.applyBindings(viewModel);
        }
    }

    $('#Date').datepicker();

    $(document).ready(function () {
        var VM = new CurrencyModel();
        ko.applyBindings(VM);
    }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:29:49.907

```
data: ko.mapping.toJSON(CurrencyModel) 
```

您正在尝试 JSONify 定义而不是实际实例

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:01:59.283

不是您要使用的[方法：](http://knockoutjs.com/documentation/json-data.html)

```
ko.toJSON 
```

而不是关闭映射对象？

# php - 无法在 codeigniter 的查看页面上显示文件错误消息

> ID：14438535
> 
> 赞同：0
> 
> 时间：2013-01-21T12:23:12.803
> 
> 标签：php, codeigniter, file-upload

我正在尝试使用显示图像上传错误消息，`flashdata`但我在下面显示的代码无法正常工作。可能是什么原因？

请建议我解决此问题的解决方案。

mycontrollerPage.php

```
class Booksetups extends CI_Controller  
{
    function book($book_id = 0)
    {
       $config = array(); 
       $config['base_url'] = 'http://localhost/thexxr.com/Booksetups/book/pgn/';
       $config["total_rows"] = $this->Booksmodel->record_count(); 
       $config['uri_segment'] = 4; 
       $config['per_page'] = 5;  
       $config['full_tag_open'] = '<div id="pagination">';
       $config['full_tag_close'] = '</div>';

        //------------not wroking file upload error validation------------------------------------------   
        $config['upload_path'] = 'uploads/'; 
        $config['allowed_types'] = 'gif|jpg|jpeg|png'; 
        $config['max_size'] = '1000'; 
        $config['max_width'] = '1920'; 
        $config['max_height'] = '1280'; 
        $config['remove_spaces'] = 'TRUE'; 
        $config['file_path'] = 'TRUE'; 
        $config['full_path']    = '/uploads/';

        $this->load->library('upload', $config);
        $this->upload->do_upload("img1");
        $this->upload->do_upload("img2");
        //------------------------------------------------------------------------

       $this->pagination->initialize($config);   
       $page = ($this->uri->segment(4)) ? $this->uri->segment(4) : 0;   

       $this->form_validation->set_error_delimiters('<div  class="error">', '</div>')->set_rules('subject_id', 'subject_id','trim|required|min_length[1]|max_length[150]|xss_clean');
       $this->form_validation->set_error_delimiters('<div  class="error">', '</div>')->set_rules('cover_id', 'cover_id','trim|required|min_length[1]|max_length[150]|xss_clean');
       $this->form_validation->set_error_delimiters('<div  class="error">', '</div>')->set_rules('language_id', 'language_id','trim|required|min_length[1]|max_length[150]|xss_clean');
       $this->form_validation->set_error_delimiters('<div  class="error">', '</div>')->set_rules('edition_id', 'edition_id','trim|required|min_length[1]|max_length[150]|xss_clean');

        if(($this->input->post('book_id'))&& ($this->form_validation->run() === TRUE))
        {  
            if( ! $this->upload->do_upload()) //trying to display error
            {
                   $error = array('error' => $this->upload->display_errors()); 
                   $this->session->set_flashdata('error', $error);
                   redirect(current_url()); 
            }
            $this->session->set_flashdata('msg', '1 row(s) affected.');
            $this->Booksmodel->entry_update();  
            redirect(current_url());
        }
    }
} 
```

我的视图.php

```
<?php echo '<fieldset><legend>'. $formtopic.'</legend>' ?>  

<?php echo validation_errors();  ?>   
<?php 
    $message = $this->session->flashdata('msg');  
    if($message)
    {
    ?>
    <div class="success" id="msgdiv"><?php echo  $this->session->flashdata('msg'); ?></div> 
    <?php 
    }
?>  

<?php 
$message = $this->session->flashdata('error');  
    if($message)
    {
    ?> 
    <?php echo $error;?>   
    <!-- Here i am getting. Message like "array" why not i am getting the error message instead? --> 
<?php 
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:52:46.423

我会推荐使用 form_validation 的 validation_errors()。这是我的做法。
看看[这个答案](https://stackoverflow.com/questions/13005081/codeigniter-validate-file-before-do-upload)中的图书馆。
这个库有两个方法 validate_upload（它只检查文件是否有效）
和 do_upload（必须仅在 validate_upload 返回 true 时使用）。

Codeigniter 中有一个文件上传库，[这里](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)是文档。复制我的答案代码并将其粘贴到名为 MY_Upload.php 的文件中，并将此文件保存在 application/Code 文件夹中。现在我定义这样的规则

```
$this->form_validation->set_rules('userfile', 'New Image', 'trim|callback_valid_upload'); 
```

当图像上传是可选的时，您可以将其包装在一个条件中

```
if(isset($_FILES['userfile']) AND $_FILES['userfile']['name']!= ''){
    $this->form_validation->set_rules('userfile', 'New Image', 'trim|callback_valid_upload');   
} 
```

其中 userfile 是表单的文件字段。你可以看到我在规则 callback_valid_upload 中调用了一个函数
这是回调中使用的控制器方法

```
public function valid_upload()
{
    $this->load->library('upload'); 

    $config['upload_path']      =   'your path here';           
    $config['allowed_types']    =   'png';
    $config['max_size']         =   2048;
    $config['max_width']        =   85;
    $config['max_height']       =   110;

    $this->upload->initialize($config);

    if (!$this->upload->validate_upload('userfile'))
    {
        $this->form_validation->set_message('valid_upload', $this->upload->display_errors());
        return FALSE;
    }else{
        return TRUE;
    }       
} 
```

此方法将检查我们上传的文件是否有效，成功则返回 true，否则返回 false。
验证失败时加载表单

```
View

echo validation_errors();
//blah blah
//<form action="">
//  <input type="" />
//  <input type="" />
//  <input type="" />
//</form> 
```

如果你想单独显示消息

```
<input type="file" name="userfile" id="" /> 
<?php echo form_error('userfile')?> 
```

如果验证成功，现在像这样上传文件。

```
if($this->form_validation->run())
{
    if(isset($_FILES['userfile']) AND $_FILES['userfile']['name'] !='')
    {
        $this->upload->do_upload('userfile'); // this will upload file
        $image_data =   $this->upload->data();
        $data['image_field_name_of_table']      =   $image_data['raw_name'];
    }
    //other data in $data array here

    $id =   $this->mymodel->insert($data);
    if($id){
        $this->session->set_flashdata('notice', ' Successful');
        redirect('your url');   
    }
}else{
    //load view here
} 
```

更多编辑：
我在您的代码中注意到的一件事是一个问题

```
 $config = array(); 
   $config['base_url'] = 'http://localhost/thexxr.com/Booksetups/book/pgn/';
   $config["total_rows"] = $this->Booksmodel->record_count(); 
   $config['uri_segment'] = 4; 
   $config['per_page'] = 5;  
   $config['full_tag_open'] = '<div id="pagination">';
   $config['full_tag_close'] = '</div>';

    $this->load->library('upload', $config);
    $this->upload->do_upload("img1");

    unset($config);

    $config['upload_path'] = 'uploads/'; 
    $config['allowed_types'] = 'gif|jpg|jpeg|png'; 
    $config['max_size'] = '1000'; 
    $config['max_width'] = '1920'; 
    $config['max_height'] = '1280'; 
    $config['remove_spaces'] = 'TRUE'; 
    $config['file_path'] = 'TRUE'; 
    $config['full_path']    = '/uploads/';

    $this->load->library('upload', $config); //load again with new configuration
    $this->upload->do_upload("img1");
    $this->upload->do_upload("img2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:30:06.123

这是我在 CI 中设置和显示错误的一些辅助函数

```
if (!function_exists('set_flash_message'))
{
    function set_flash_message($title, $message, $type='success')
    {
        $CI =& get_instance();
        $CI->session->set_flashdata(
            'flash_message',
            array(
                'type' => $type,
                'title' => $title,
                'text' => $message));
    }
}

if (!function_exists('flash_message'))
{
    function flash_message()
    {
        $CI =& get_instance();
        $message = $CI->session->flashdata('flash_message');
        return $CI->load->view('desktop/flash_message', $message, TRUE);
    }
} 
```

您可以从控制器设置消息：

```
set_flash_message('Error', 'Something went wrong', 'error'); 
```

并从视图中显示错误

```
<?php echo flash_message(); ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:40:24.800

正如我在评论中所说；

> 您正在获取数组，因为您将闪存错误消息设置为数组 [ `$error = array('error' => $this->upload->display_errors());`]，请尝试将其设置为字符串

如果您查看源代码中的函数，它要么采用哈希数组，要么采用字符串。
如果传入一个数组，那么它会将带有key的flashdata设置为flash消息类型，带有value的message；忽略第二个参数。
如果您将两个参数作为字符串传递，它将使用第一个字符串设置 flashdata 键。

所以要么做；

```
$this->session->set_flashdata('error', 'something went wrong'); 
```

或者

```
$this->session->set_flashdata(array('error', 'something went wrong')); 
```

源代码：

```
function set_flashdata($newdata = array(), $newval = '')
    {
        if (is_string($newdata))
        {
            $newdata = array($newdata => $newval);
        }

        if (count($newdata) > 0)
        {
            foreach ($newdata as $key => $val)
            {
                $flashdata_key = $this->flashdata_key.':new:'.$key;
                $this->set_userdata($flashdata_key, $val);
            }
        }
    } 
```

# java - JFrame.getLocationOnScreen() 用于最小化窗口

> ID：14438539
> 
> 赞同：3
> 
> 时间：2013-01-21T12:23:36.680
> 
> 标签：java, swing, jframe, jdialog

我[`getLocationOnScreen()`](http://docs.oracle.com/javase/6/docs/api/java/awt/Component.html#getLocationOnScreen%28%29)在`JFrame`我的 Swing 应用程序中调用。如果`JFrame`最小化 -32000，则返回 -32000。

预计：

[计算机上的位置坐标显示 X=-32000，Y=-32000](https://stackoverflow.com/questions/1478765/location-coordinates-on-computer-showing-x-32000-y-32000)

但是我需要在窗口被最小化之前知道它的位置，或者如果它再次最大化而没有实际最大化它就会是该位置。因为即使它被最小化，我也需要`JDialog`相对定位。`JFrame`

**可能的解决方案：** 添加`WindowListener`到事件`JFrame`并`windowIconified()`保存坐标。然后用它代替`getLocationOnScreen()`.

`JFrame`仅使用方法有更好的解决方案吗？

需要多屏配置，并使用以下代码。

```
GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice[] gs = ge.getScreenDevices();
    for (int j = 0; j < gs.length; j++) {
        GraphicsDevice gd = gs[j];
        GraphicsConfiguration[] gc = gd.getConfigurations();
        for (int i = 0; i < gc.length; i++) {
            Rectangle gcBounds = gc[i].getBounds();
            Point loc = topContainer.getLocationOnScreen(); //might return -32000 when minimized
            if (gcBounds.contains(loc)) { //fails if -32000 is returned 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:03:39.827

只需使用`getLocation()`. 最小化与否，它总是会返回适当的值：

```
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class TestJFrame {

    public void initUI() {
        final JFrame frame = new JFrame(TestJFrame.class.getSimpleName());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(600, 400);
        frame.setVisible(true);
        Executors.newScheduledThreadPool(1).scheduleAtFixedRate(new Runnable() {
            @Override
            public void run() {
                System.err.println(frame.getLocation());
            }
        }, 0, 1000, TimeUnit.MILLISECONDS);
    }

    public static void main(String[] args) throws ClassNotFoundException, InstantiationException, IllegalAccessException,
            UnsupportedLookAndFeelException {
        UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new TestJFrame().initUI();
            }

        });
    }
} 
```

# c# - 更新 SQL 数据源中的查询参数

> ID：14438540
> 
> 赞同：0
> 
> 时间：2013-01-21T12:23:39.577
> 
> 标签：c#, asp.net, sql-server

我有以下代码在经历一些条件后更新 SQL 数据源的查询参数的值。

```
SqlDataSource sdm = new SqlDataSource("<our connection string>", "SELECT  [Message Id] ,[To] ,[From] ,[Reply To] ,[Subject] ,[Message] ,[Date added] FROM [database].[dbo].[User Messages] where ([to]=@sid or [from]=@sid) and ([to]=@qid or [from]=@qid)  and [reply to]=@rid");

string user = Session["USERID"].ToString();
string to = Request["to"].ToString();
string from = Request["from"].ToString();
sdm.UpdateParameters["rid"].DefaultValue = Request["replyid"].ToString();
sdm.UpdateParameters["sid"].DefaultValue = user;
if (user == to)
  sdm.UpdateParameters["qid"].DefaultValue=from;
else
  sdm.UpdateParameters["qid"].DefaultValue= to;

sdm.Update();
sdm.DataBind();
Repeater1.DataSource = sdm;
Repeater1.DataBind(); 
```

它显示 NullReferenceException 在`sdm.UpdateParameters["rid"].DefaultValue = Request["replyid"].ToString();`

`rid`已在查询字符串中设置为`?rid=a`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:40:50.917

您需要使用该`Request.QueryString`集合来获取您的`rid`参数：

```
sdm.UpdateParameters["rid"].DefaultValue = Request.QueryString["rid"]; 
```

使用带有的索引器将使您从、或集合`Request`中获取值，直接使用会使您的意图更加清晰。`QueryString``Form``Cookies``ServerVariables``Request.QueryString`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:39:05.470

查询字符串不应该`?replyid=a`代替`?rid=a?`.

似乎`Request["replyid"]`返回null，然后`ToString()`抛出异常。

# php - 连接到不同服务器上的 mysql

> ID：14438544
> 
> 赞同：4
> 
> 时间：2013-01-21T12:23:50.627
> 
> 标签：php, mysql, apache

我试图从另一台服务器连接到 mysql 数据库服务器。以下是两台服务器上的配置。

> 服务器 1：我安装了带有 php 和 apache 服务的 xampp，它具有以下 ip 172.x1.x1.x1
> 
> 服务器 2：我安装了 mysql，它的 ip 为 172.x1.x1.x2。

以下是我用来连接数据库的连接脚本

```
<?php
    //Database connection constants
    define("DATABASE_HOST", "172.x1.x1.x2");
    define("DATABASE_USERNAME", "root");
    define("DATABASE_PASSWORD", "");
    define("DATABASE_NAME", "management");
?> 
```

上面的脚本位于一个名为 app_config.php 的文件中，它位于服务器 1 中 以下脚本位于一个名为 connect.php 的文件中，它也位于服务器 1 中

```
<?php
require 'app_config.php';
$connect_error = 'Sorry we\'experiencing connection problems.';
$table_error = 'Table not found';
mysql_connect(DATABASE_HOST, DATABASE_USERNAME, DATABASE_PASSWORD)
or die($connect_error); 
```

mysql_select_db(DATABASE_NAME) 或 die($table_error); ?> 现在当我尝试连接时出现以下错误

> 警告：mysql_connect() [function.mysql-connect]: Host 'hr1.saqa.co.za' is not allowed to connect to this MySQL server in C:\xampp\htdocs\scripts\functions\database\connect.php on第 4 行
> 
> 致命错误：在第 5 行调用 C:\xampp\htdocs\scripts\functions\database\connect.php 中未定义的函数 handle_error()

如果你能帮助我，那将是可怕的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:26:35.323

由于您的数据库服务器与您的 php/apache 服务器不同，您需要`172.x1.x1.x2`在 mysql-php 连接字符串中指定主机名。

还要确保 mysql 用户`root`具有远程连接权限。其他明智的 mysql-server 将不允许您的`root`用户远程登录。即来自您的server1。

你可以从`mysql.user`表中确定。

```
mysql> select Host,User from user where User = "root";
+------------+------+
| Host       | User |
+------------+------+
| 127.0.0.1  | root |
| ::1        | root |
| localhost  | root |
| sgeorge-mn | root |
| %          | root |
+------------+------+
4 rows in set (0.01 sec) 
```

`%`表示任何主机。

要创建具有远程连接权限的用户，请使用以下`mysql`查询：

```
mysql> CREATE USER 'root'@'%' IDENTIFIED BY 'your_password'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:33:23.177

1）确保防火墙允许 MySQL。

2）确保 MySQL 远程连接权限 Allowed 。

# excel - 我在 VBA 中为 Excel 编写了三个宏；我正在寻求帮助将它们联系在一起。

> ID：14438546
> 
> 赞同：0
> 
> 时间：2013-01-21T12:23:57.480
> 
> 标签：excel, vba

我对编码还很陌生，所以我会很简短。我有一个非常大的数据集要在 excel 中处理。从两个电子表格中，我将数据汇总在一起。

所以每组有4列。一列包含数据点的字母数字名称。（例如，NC000023、NC000224 等）。我想将匹配的字母数字名称与一张纸排列到另一张纸上。首先想到的是按字母顺序对两列进行排序，这确实最匹配。但是，从一张到另一张缺少一些数据点，导致整个数据出现多个帧移位。

我编写了以下宏来纠正这些移码。

第一个只是确定两列是否在特定行中匹配

```
Sub Matching()
'
' Macro1 Macro
'
' Keyboard Shortcut: Ctrl+m
'
    Range("I2").Select
    ActiveCell.FormulaR1C1 = "=EXACT(RC[-4],RC[-5])"
    Range("I2").Select
    Selection.AutoFill Destination:=Range("I2:I40028"), Type:=xlFillDefault 
```

这会根据 D3 数学 E3 和 D550 是否与 D550 等匹配，生成一个 TRUE 为 FALSE 的新列。

然后，我找出 I 列中的所有单元格为 FALSE，并确定我需要删除哪些 4 个单元格以更正该匹配。该代码旨在消除罪魁祸首，将其粘贴，并将较低的行向上移动以取代它。

```
Sub RedCut()
'
' Macro2 Macro
' Shortcut CTRL + r

'
    ActiveCell.Offset([0], [-3]).Select
    Range(ActiveCell, ActiveCell.Offset(0, 3)).Cut
    ActiveCell.Offset([0], [12]).Select
    ActiveSheet.Paste
    ActiveCell.Offset([0], [-12]).Select
    Range(ActiveCell, ActiveCell.Offset(0, 3)).Select
    Selection.Delete Shift:=xlUp

End Sub 
```

而对于另一个

```
Sub Bluecut()
'
' Bluecut Macro
'
' Keyboard Shortcut: Ctrl+b

  ActiveCell.Offset([0], [3]).Select
    Range(ActiveCell, ActiveCell.Offset(0, -3)).Cut
    ActiveCell.Offset([0], [9]).Select
    ActiveSheet.Paste
    ActiveCell.Offset([0], [-9]).Select
    Range(ActiveCell, ActiveCell.Offset(0, -3)).Select
    Selection.Delete Shift:=xlUp
'
End Sub 
```

编写完这些宏后，我一直在执行以下步骤。

1.  按 CTRL+M 调用匹配的标题行的 TRUE 或 FALSE 列表
2.  用 FALSE 找出一行。确定是需要删除数据集 1 还是数据集 2 中的四个单元格
3.  再次按 CTRL + M，并更正该行。

我的问题是，是否可以编写一个代码，如果 D 列中的相应单元格与左侧和下方的一个单元格相同，则对 I 列中具有 FALSE 的行执行 Sub Bluecut，或者对一行执行 Sub Redcut如果 D 列中的相应单元格与右上方的一个单元格相同，则列中为 FALSE。”

抱歉，当我开始打字时，这似乎不太复杂。我将不胜感激您能给我的任何帮助，即使它只是编写一小段代码的提示。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:51:51.440

for/next 或 for/each 循环应该适合您的需要。

作为一个快速的组合，我会做这样的事情，在你的匹配之后运行：

```
Dim I as range
for each I in Range("I2:I40028").Cells
     I.select
     if activecell.offset(0,-5)=activecell(1,-6) then 
         bluecut
     else
         redcut
     end if
next 
```

当然，我会在内部进行所有测试，而不是选择每个单元格，因为它会运行得更快，即使`application.ScreenUpdating=False`不必查看所有屏幕更新

# sharepoint-2010 - 如何从共享点列表中获取列的数据类型？

> ID：14438550
> 
> 赞同：2
> 
> 时间：2013-01-21T12:24:10.770
> 
> 标签：sharepoint-2010

1.  我想获取或检索在共享点列表中创建列表的特定列的数据类型。

    ```
    Can you help me for doing the task? 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T17:46:06.057

请参阅[SPField.Type](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfield.type.aspx)（或[SPField.TypeDisplayName](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfield.typedisplayname.aspx)）。

```
SPList list = web.Lists["my list"];
SPField field = list.Fields["particular"];
SPFieldType fieldType = field.Type;
string fieldTypeName = field.TypeDisplayName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-24T21:56:29.127

基于[Rich Bennema 的回答](https://stackoverflow.com/a/14444349/641833)（引用 Microsoft.SharePoint.Client 和 Microsoft.SharePoint.Client.RunTime 版本 16 库并使用 Microsoft.SharePoint.Client 命名空间）：

```
using (ClientContext cont = new ClientContext(SharePointUrl))
{
    cont.Credentials = new SharePointOnlineCredentials(Username, SecurePassword);

    FieldCollection fields = cont.Web.Lists.GetByTitle(SharePointListName).Fields;
    cont.Load(fields);
    cont.ExecuteQuery();

    var results =
            fields.Select(
                f => new
                {
                    f.InternalName,
                    f.TypeDisplayName,
                    TextMaxLength = (f is FieldText) ? ((FieldText)f).MaxLength : 0,
                    FieldChoices = (f is FieldChoice) ? ((FieldChoice)f).Choices : new string[0]
                }
            );
} 
```

# r - 根据两个协变量级别的对应关系选择数据帧的行

> ID：14438555
> 
> 赞同：2
> 
> 时间：2013-01-21T12:24:17.487
> 
> 标签：r, subset

我目前正在研究两个不同的数据帧，其中一个非常长（`long`）。我需要做的是选择`long`其对应的所有行在`id_type`另一个（较小的）数据集中至少出现一次。

假设两个数据帧是：

```
long <- read.table(text = "
  id_type   x1   x2

   1       0     0  
   1       0     1
   1       1     0
   1       1     1
   2       0     0
   2       0     1
   2       1     0
   2       1     1
   3       0     0  
   3       0     1
   3       1     0
   3       1     1
   4       0     0  
   4       0     1
   4       1     0
   4       1     1", 
header=TRUE) 
```

和

```
short <- read.table(text = "
  id_type   y1   y2    

   1       5     6    
   1       5     5    
   2       7     9", 
     header=TRUE) 
```

在实践中，我想要获得的是：

```
 id_type   x1   x2    

  1       0     0  
  1       0     1
  1       1     0
  1       1     1
  2       0     0  
  2       0     1
  2       1     0
  2       1     1 
```

我曾尝试使用`out <- long[long[,"id_type"]==short[,"id_type"], ]`，但它显然是错误的。你将如何进行？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:27:32.107

只需使用`%in%`：

```
out <- long[long$id_type %in% short$id_type, ] 
```

看`?"%in%"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:28:03.510

你在哪里失踪`%in%`：

```
> long[long$id_type %in% unique(short$id_type),]
  id_type x1 x2
1       1  0  0                                                             
2       1  0  1                                                             
3       1  1  0                                                             
4       1  1  1                                                             
5       2  0  0                                                             
6       2  0  1                                                             
7       2  1  0                                                             
8       2  1  1 
```

# c# - ContextMenu 数据上下文绑定

> ID：14438556
> 
> 赞同：0
> 
> 时间：2013-01-21T12:24:17.870
> 
> 标签：c#, wpf, binding

这是一个简单的问题。我有一个 XAML，目前看起来像这样：

```
<ListBox>
     <ListBox.ContextMenu>
            <ContextMenu DataContext="{Binding Path=FeedContextMenu}"
     </ListBox.ContextMenu>
</ListBox> 
```

My intention is to take the data context from the ListBox and use its `FeedContextMenu` property as a DataContext for ContextMenu. Now all you WPF gurus will probably immediately say that this will not work. Apparently, this has something to do with the fact that ContextMenu isn't part of the visual tree. Now I'm not a WPF expert, so after googling for hours and trying out different suggested solutions that didn't work nor make any sense to me whatsoever, I would like to ask someone with a greater knowledge to explain it to me **what** and **why** needs to be done in order for this to work. Thanks.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:46:08.010

您可以尝试绑定到 ContextMenu 的[PlacementTarget](http://msdn.microsoft.com/en-us/library/system.windows.controls.contextmenu.placementtarget.aspx)（即 ListBox）的 DataContext，如下所示：

```
<ContextMenu DataContext="{Binding PlacementTarget.DataContext.FeedContextMenu,
                                   RelativeSource={RelativeSource Self}}"> 
```

# c# - C# 在通过 .NET 远程处理订阅事件时检测错误的可见性

> ID：14438558
> 
> 赞同：1
> 
> 时间：2013-01-21T12:24:38.843
> 
> 标签：c#, events, remoting

订阅通过远程处理引发的事件时，回调方法必须是公共的，否则在另一端引发事件时不会发生任何事情。

有什么东西可以帮助我发现这种情况吗？例如可以强制的异常...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:35:50.157

看起来，你有更多的设计问题，而不是技术问题。为什么你首先使用事件而不是远程处理？使用某种机制会更合适，它会向界面的用户显示他正在使用远程对象，而不是隐藏它。

在这个具体示例中，我将为事件侦听器声明接口并公开诸如 AddLister/RemoveLister 之类的方法。

因此，您的客户端实现了列表器接口并为您提供了一个远程实例，您可以在需要引发事件时调用该实例。这会给调用者一个想法，即您的服务已被删除，并且不会像您在事件中遇到的那样产生问题。

# ms-access - 具有引用完整性的 MS Access 不允许 NULL 值

> ID：14438561
> 
> 赞同：1
> 
> 时间：2013-01-21T12:24:45.797
> 
> 标签：ms-access, null, referential-integrity

Microsoft Access 数据库中有两个表。其中一个定义元素，另一个引用它们。然而，这个参考是可选的。该值可以为 NULL。只要外键存在，我就不允许插入或更新 NULL 值。在没有外键的情况下保存 NULL 值后，我无法添加键。

参考列设置为“Required = false”，并且允许单独使用 NULL 值。只有参照完整性不能处理 NULL 值。

那怎么解决？

**更新：**我想到了一些可能相关的事情：我的外键使用了两列。其中一个始终设置，但另一个可以为空。

**添加了示例架构：**

表总线：
列：
• objid 整数
• busnumber 整数
• name varchar
主键：objid、busnumber

表 conn：
列：
• objid 整数
• name varchar
• bus1 整数
• bus2 整数
主键：objid、名称

conn (objid, bus1) 引用总线 (objid, busnumber) 作为 1:n 并且
conn (objid, bus2) 引用总线 (objid, busnumber) 作为 1:n

两个引用都是可选的，但 objid 是上级对象的一部分并且总是被设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:45:34.023

在所示的示例设置中，很有可能将空值编辑到现有元素并使用空值创建记录。我怀疑你可能有一些不完全正确的设置。

![与空值的关系](../Images/1f9580989b6b05095bc46fd3c2920fcb.png)

# nhibernate - NHibernate 代码映射 (Loquacious) - 级联选项

> ID：14438564
> 
> 赞同：12
> 
> 时间：2013-01-21T12:25:02.707
> 
> 标签：nhibernate, orm, nhibernate-mapping, cascade

我对使用 NHibernate Mapping By Code 时的级联枚举选项行为有疑问。

枚举有以下选项：

```
[Flags]
public enum Cascade
{
    None = 0,
    Persist = 2,
    Refresh = 4,
    Merge = 8,
    Remove = 16,
    Detach = 32,
    ReAttach = 64,
    DeleteOrphans = 128,
    All = 256,
} 
```

它们旨在像位标志组合一样使用（据我所知）。

我查看了 NHibernate 文档，并在那里定义了 XML 映射的以下级联选项：[生命周期和对象图](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-graphs)

任何人都可以通过代码描述新 Nhibernate 映射的级联选项吗？其中一半是自我描述，另一半不是。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-22T13:55:22.823

从`src\NHibernate\Mapping\ByCode\Impl\CascadeConverter.cs`

```
 private static IEnumerable<string> CascadeDefinitions(this Cascade source)
    {
        if (source.Has(Cascade.All))
        {
            yield return "all";
        }
        if (source.Has(Cascade.Persist))
        {
            yield return "save-update, persist";
        }
        if (source.Has(Cascade.Refresh))
        {
            yield return "refresh";
        }
        if (source.Has(Cascade.Merge))
        {
            yield return "merge";
        }
        if (source.Has(Cascade.Remove))
        {
            yield return "delete";
        }
        if (source.Has(Cascade.Detach))
        {
            yield return "evict";
        }
        if (source.Has(Cascade.ReAttach))
        {
            yield return "lock";
        }
        if (source.Has(Cascade.DeleteOrphans))
        {
            yield return "delete-orphan";
        }
    } 
```

注意：`all`级联除了`delete-orphan`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T13:33:48.917

*   **无**：没有级联
*   **坚持 = ISession.SaveOrUpdate**
*   **Refresh = ISession.Refresh**：将对象的 db 状态加载到内存中并更新其属性
*   **Merge = ISession.Merge**：从 db 加载具有相同 Id 的对象，并使用给定实例的属性更新其属性。返回加载的对象
*   **Remove = ISession.Delete**：删除数据库中的给定实例并从会话中分离
*   **Detach = ISession.Evict**：从会话/更改跟踪中删除对象
*   **ReAttach = ISession.Lock(LockMode.None)**：将给定的未修改实例重新附加到会话中
*   **DeleteOrphans** : 删除没有被父对象引用的关联对象
*   **全部**：**除 DeleteOrphans 之外的所有上述内容（感谢@Stefan Steinegger）**

# iphone - UITextView 获取和丢失焦点事件

> ID：14438569
> 
> 赞同：0
> 
> 时间：2013-01-21T12:25:19.613
> 
> 标签：iphone

当我的 UITextView 获得和失去焦点时如何获取事件？我还没有发现诸如此类的事件。（UITextView 不可编辑）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:30:05.450

在您的代码中使用覆盖 touchesBegan

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *) event
{
    UITouch *touch = [[event allTouches] anyObject];
    if ([touch view]==textviewtofocus)
    {
        // textviewtofocus get focus
    }
else 
// textviewtofocus lost focus

} 
```

# scala - 玩！- 从 SBT 控制台与 webapp 交互

> ID：14438570
> 
> 赞同：3
> 
> 时间：2013-01-21T12:25:23.203
> 
> 标签：scala, playframework-2.0, sbt

我有戏！2 我已经定义了一些工作的应用程序。这些作业与外部 Web 服务和数据库交互，因此它们需要一个正在运行的应用程序才能工作。

我希望能够从 Play 控制台将这些作业作为 SBT 任务启动。因此，我按照[指南](http://www.scala-sbt.org/release/docs/Detailed-Topics/Tasks.html)定义了自己的任务，并且能够定义简单的任务。我不能做的是从应用程序命名空间导入。我想这是有道理的——在 SBT 的上下文中，我们可能没有运行应用程序。

> 是否有某种方法可以编写 SBT 任务，其中启动应用程序并且可以访问应用程序命名空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T09:28:25.107

不知道您是否还需要答案，您是否尝试过使用 Play 控制台？

```
$ play console 
```

它会加载您所有的应用程序类，以便您可以随意使用它们。

有关更多信息，请参阅[http://www.playframework.com/documentation/2.1.0/PlayConsole](http://www.playframework.com/documentation/2.1.0/PlayConsole) :)

# matlab - 在matlab中计算环境物理数据系列的积分

> ID：14438572
> 
> 赞同：2
> 
> 时间：2013-01-21T12:25:39.287
> 
> 标签：matlab, integration, equation, heat

下图是一个湖泊的示意图，方程式说明了如何计算湖泊的有效热通量。

![在此处输入图像描述](../Images/bfced867f596eaf0ede9c8abec22f3fc.png)

其中 S 是地表通量向量，q 是短波辐射，h 是混合层深度，z 是湖泊深度。例如：

```
q0 = 400+(1-400).*rand(100,1); % This is the short wave radiation
kd = 0.8; % extinction coefficient
h = 10; % depth of the surface mixed layer
for i = 1:length(q0); % loop for calculating short wave radiation at depth h
    qh(i) = q0(i).*exp(-kd*h); % here, qh is calculated according to the Lambert Beer law
end 
```

给定

```
dz = 0.5 
```

z 以 dz 为增量从 0（表面）到深度 h 变化，即

```
z = 0:dz:h 
```

我将如何在matlab中计算这个方程的最后一部分，即如何在表面和h之间的深度z处计算q？这里用积分表示？

抱歉，如果这应该在另一个堆栈溢出论坛上，但它似乎与编程比纯物理或数学问题更相关。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:32:37.167

为了正确整合，您需要计算[0, h] 范围内的所有*q* ( *z ) 值。*如果`q0`和`qh`是 N×1 列向量，这意味着`q`应该是一个 N×M 矩阵，其中 M 是 [0, h] 范围内的样本点数。

首先，让我们`z`正确定义：

```
z = linspace(0, h, 200); %// M=200, but it's an arbitrary number to your choosing 
```

的计算`q`可以简化为：

```
q = q0 * exp(-kd * z); 
```

并且`qh`实际上等于 的最后一列`q`，*即* `q(:, end)`。

积分本身可以近似为和并使用 计算`sum`：

```
dz = z(2) - z(1);
I = sum(q, 2) * dz; 
```

### 附言

由于*q* ( *z* ) = *e* ^((- *k [d]* · *z* ))，您可以很简单地分析计算积分：

```
I = q0 * (1 - exp(-kd * h)) / kd; 
```

# ruby-on-rails - 循环中的多个 gsub

> ID：14438575
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:25:59.757
> 
> 标签：ruby-on-rails, ruby-on-rails-3, loops, callback, gsub

我的 Article.rb 中有一个小的文章百科全书：

```
class Article < ActiveRecord::Base
  attr_accessible :name, :content
end 
```

如果我在一篇文章中找到与另一篇文章的名称相对应的文本，我现在想在文章中自动链接。例如，在名为“示例一”的文章中，内容是“您也可以查看示例二以进一步阅读”。在保存“示例一”时，我想设置文章“示例二”的链接。我的方法是添加到 Article.rb

```
class Article < ActiveRecord::Base
  attr_accessible :name, :content

  before_save :createlinks

  def createlinks
    @allarticles = Article.all
    @allarticles.each do |article|
      self.content = changelinks(self.content)
    end
  end

  def changelinks(content)
    content = content.gsub(/#{article.name}/, "<%= link_to '#{article.name}', article_path(article) %>")
  end 
```

我的articles_controller 是：

```
def update
  @article = Article.find(params[:id])
  if @article.update_attributes(params[:article])
    redirect_to admin_path
  else
    render 'edit'
  end
end 
```

但显然有一个错误引用行 content = content.gsub(etc...)：

ArticlesController 中的 NameError#update 未定义的局部变量或方法 `article' for #

我该如何解决这个问题，以便它检查所有其他文章名称并为我要保存的当前文章创建链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:48:52.577

您的 changelink 方法不“知道”什么是 article 变量。您必须将其作为参数传递：

```
 def createlinks
    @allarticles = Article.all
    @allarticles.each do |article|
      self.content = changelinks(self.content, article)
    end
  end

  def changelinks(content, article)
    content = content.gsub(/#{article.name}/, "<%= link_to '#{article.name}', article_path(article) %>")
  end 
```

但是这种实现链接而不是文章名称的方式在我看来并不是最好的。

# jquery - jquery切换从左到右和向后滑动

> ID：14438577
> 
> 赞同：12
> 
> 时间：2013-01-21T12:26:07.447
> 
> 标签：jquery, jquery-animate, toggle

我在页面左侧有一个“菜单”按钮，一旦选择，我就有一个包含菜单项显示的 div。然后我有另一个按钮可以选择隐藏菜单。

理想情况下，我希望它能够滑出（从左到右）并向后滑出，但未能使其正常工作。我尝试过使用 animate 和 SlideToggle，但没有一个适合我所拥有的。有小费吗？

```
<div id="cat_icon">Menu</div>
<div id="categories">
    <div CLASS="panel_title">Menu</div>
    <div CLASS="panel_item">
        <template:UserControl id="ucCategories" src="UserControls/ProductCategories.ascx" />
    </div>
</div> 
```

```
$('#cat_icon').click(function () {
    $('#categories').toggle();
    $('#cat_icon').hide();
});
$('.panel_title').click(function () {
    $('#categories').toggle();
    $('#cat_icon').show();
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-21T13:03:24.943

看到这个：[演示](http://jsfiddle.net/QDUQk/)

```
$('#cat_icon,.panel_title').click(function () {
   $('#categories,#cat_icon').stop().slideToggle('slow');
}); 
```

更新：从左向右滑动：[Demo2](http://jsfiddle.net/QDUQk/1/)

**注意**：第二个也使用 jquery-ui

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-10-27T00:41:15.797

从右侧滑动：

```
$('#example').animate({width:'toggle'},350); 
```

向左滑动：

```
$('#example').toggle({ direction: "left" }, 1000); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-21T12:53:04.583

`#categories`最初隐藏

```
#categories {
    display: none;
} 
```

然后，使用 JQuery UI，`Menu`缓慢地制作动画

```
var duration = 'slow';

$('#cat_icon').click(function () {
    $('#cat_icon').hide(duration, function() {
        $('#categories').show('slide', {direction: 'left'}, duration);});
});
$('.panel_title').click(function () {
    $('#categories').hide('slide', {direction: 'left'}, duration, function() {
        $('#cat_icon').show(duration);});
}); 
```

[JSFiddle](http://jsfiddle.net/VXWyg/5/)

您也可以以毫秒为单位使用任何时间

```
var duration = 2000; 
```

如果您也想隐藏，请同时`class='panel_item'`选择`panel_title``panel_item`

```
$('.panel_title,.panel_item').click(function () {
    $('#categories').hide('slide', {direction: 'left'}, duration, function() {
        $('#cat_icon').show(duration);});
}); 
```

[JSFiddle](http://jsfiddle.net/VXWyg/7/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-21T12:45:43.323

用这个...

```
$('#cat_icon').click(function () {
    $('#categories').toggle("slow");
    //$('#cat_icon').hide();
});
$('.panel_title').click(function () {
    $('#categories').toggle("slow");
    //$('#cat_icon').show();
}); 
```

请参阅此[示例](http://jsfiddle.net/uu7ZB/)

问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-02T01:41:46.590

没有像**slideLeft()**和**slideRight()**这样的方法，看起来像[slideUp()](https://api.jquery.com/slideUp/)和[slideDown() ，但是您可以使用 jQuery 的](https://api.jquery.com/slideDown/)[animate()](https://api.jquery.com/animate/)函数来模拟这些效果。

**HTML 代码：**

```
<div class="text">Lorem ipsum.</div> 
```

**jQuery代码：**

```
 $(document).ready(function(){
    var DivWidth = $(".text").width();
    $(".left").click(function(){
      $(".text").animate({
        width: 0
      });
    });
    $(".right").click(function(){
      $(".text").animate({
        width: DivWidth
      });
    });
  }); 
```

你可以在这里看到一个例子：[如何滑动切换一个 DIV 从左到右？](https://stackhowto.com/how-to-slide-toggle-a-div-from-left-to-right/)

# latex - org-mode 使用 minted for latex 和 htmlize for html 突出显示

> ID：14438582
> 
> 赞同：1
> 
> 时间：2013-01-21T12:26:21.127
> 
> 标签：latex, syntax-highlighting, org-mode, pygments, htmlize.el

我正在尝试在 org 模式下从乳胶重写一些文档。

我想要的是在导出的 Latex/pdf 和 html 中突出显示的代码。对于latex/pdf，我使用pygments 和html htmlize.el。

我有以下代码片段。如果我选择名称“asm”，突出显示适用于 html (htmlize.el)，但不适用于 pygments（因为它不识别“asm”）。如果我将其更改为“nasm”，它适用于 pygments，但不适用于 htmlize.el。如何解决这个问题？

```
#+begin_src asm
    mov cx,3

    loopstart:
       do stuff
       dec cx
       jnz loopstart
#+end_src 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T14:39:43.920

`_mapping.py`您可以在第 193 行修补文件`../pygments/lexers/`：

```
'NasmLexer': ('pygments.lexers.asm', 'NASM', ('nasm','asm'), ('*.asm', '*.ASM'), ('text/x-nasm',)), 
```

`('nasm',)`变成`('nasm','asm')`

它可以帮助: `locate _mapping.py`，不要记得删除旧的 pyc: `sudo rm _mapping.pyc`，可选：`sudo python -c "import py_compile;py_compile.compile('_mapping.py')"`

# json - 在运行时知道所选对象的名称

> ID：14438586
> 
> 赞同：0
> 
> 时间：2013-01-21T12:26:36.090
> 
> 标签：json, three.js

对不起我的英语：我加载了几个对象。Json 和我使用 Ray 选择它们并相交以使它们改变颜色。但我想知道在运行时选择了哪个加载的对象。当前并使用下面的代码，输出为： [object Object] $ var intersects = ray.intersectObjects(scene.children);

```
 if ( intersects.length > 0 ) {

                if ( INTERSECTED != intersects[ 0 ].object ) {

                    var aux = intersects[ 0 ].object;

                    if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );

                    INTERSECTED = intersects[ 0 ].object;

                    INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();
                    INTERSECTED.material.emissive.setHex( 0xffff00 );

                        console.debug("name:,"+aux);

                }

            } else {

                if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );

                INTERSECTED = null;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:21:22.040

`id`您可以在创建每个网格时为其添加唯一的。

```
mesh = new THREE.Mesh( geometry, material );
mesh.id = some_unique_id;
scene.add( mesh ); 
```

然后在你的相交逻辑中：

```
if ( intersects.length > 0 ) {

    alert( intersects[0].object.id );

} 
```

# servlets - 简单的 HTML 表单提交错误

> ID：14438589
> 
> 赞同：0
> 
> 时间：2013-01-21T12:26:51.050
> 
> 标签：servlets

我正在尝试创建一个简单的 HTML 表单来将数据从 JSP 提交到 Servlet。我收到 404 not found 异常。我的请求网址：`http://*****:80**/myapps/more/test.html`

## HTML

```
<form id="userForm" action="/more/loginServlet" method="post">
   <input id="Submit"  value="Submit" type="submit">
</form> 
```

web.xml

* * *

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE web-app PUBLIC "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN" "http://java.sun.com/dtd/web-app_2_3.dtd">

<web-app>
    <servlet>
        <servlet-name>LoginServlet</servlet-name>                    
        <servlet-class>com.more1.LoginServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>LoginServlet</servlet-name>
        <url-pattern>/more/loginServlet</url-pattern>
    </servlet-mapping>
</web-app> 
```

小服务程序代码

* * *

```
package com.more1;

protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    System.out.println("===========================");
    // System.out.println(request.getParameter("service_number"));
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:31:25.233

您的表单操作 URL 错误。它应该留在`/myapps`上下文中而不是外出。404 错误仅仅意味着请求的 URL 没有指向任何有效的资源。如果您仔细观察浏览器地址栏中的请求 URL，您应该已经注意到该`/myapps`部分已经消失了。

相应地修复它：

```
<form id="userForm" action="/myapps/more/loginServlet" method="post"> 
```

或者就像您目前（根据​​浏览器地址栏中的 URL）已经坐在以下位置`/myapps/more`：

```
<form id="userForm" action="loginServlet" method="post"> 
```

或者如果你担心上下文路径的动态性，内联`HttpServletRequest#getContextPath()`如下：

```
<form id="userForm" action="${pageContext.request.contextPath}/more/loginServlet" method="post"> 
```

另一种方法是引入 HTML`<base>`标记。

### 也可以看看：

*   [如何在不包含上下文根名称的情况下使用相对路径？](https://stackoverflow.com/questions/4764405/how-to-use-relative-paths-without-including-the-context-root-name/4764586#4764586)
*   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)

* * *

**与具体问题无关**，您是否绝对肯定在学习 servlet 时正在阅读正确且最新的教程？您的`web.xml`根声明是一个 Servlet 2.3，它已经有十多年的历史了。我们目前已经在使用 Servlet 3.0。[从我们的 servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)开始，获取一些理智的 Hello World 示例和理智的教程的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:33:34.033

您的应用似乎部署在上`myapps`​​下文路径中（HTML 页面 URL 为`/myapps/more/test.html`）。但是您的表单提交给`/more/loginServlet`. 它应该提交给`/myapp/more/loginServlet`.

为避免对页面中的上下文路径进行硬编码，请使用 JSTL 标记：

```
<form action="<c:url value='/more/loginServlet'/>" ...> 
```

或明确地预先设置上下文路径：

```
<form action="${pageContext.request.contextPath}/more/loginServlet" ...> 
```

# php - 将 php 添加到 .tpl 以检查 cookie 值

> ID：14438593
> 
> 赞同：0
> 
> 时间：2013-01-21T12:26:56.260
> 
> 标签：php, cookies, smarty, echo

我正在尝试将 php 脚本添加到 .tpl 文件中，以检查是否已设置 cookie：

`<?php if (isset($_COOKIE['IA'])) echo "?campaign=333"; if (isset($_COOKIE['IA']) && isset($_COOKIE['Ptag'])) echo "&p=" . $_COOKIE['Ptag'] ;?>`

我尝试在 {php} 代码 {/php} 和 {php} /file/function.php {/php} 中包含 php。我也试过代码。

但是，似乎没有任何效果。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:30:14.853

使用 smarty 预定义变量： [http ://www.smarty.net/docsv2/en/language.variables.smarty.tpl](http://www.smarty.net/docsv2/en/language.variables.smarty.tpl)

例如：

`{if $smarty.cookies.IA}?campaign=333{/if}{if $smarty.cookies.IA && $smarty.cookies.Ptag}&p={$smarty.cookies.Ptag}{/id}`

这揭示了一些安全问题，例如 XSS，因此您最好从模板中验证此参数并仅将有效值传递给模板 - 但总的来说，我提到的方式是到达`$_COOKIE`全局的方式

# ruby-on-rails - 在 Rails 3 上使用 i18n 延迟作业

> ID：14438594
> 
> 赞同：5
> 
> 时间：2013-01-21T12:27:00.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, delayed-job

我有这个任务延迟_job：

```
def any_method
 UserMailer.delay(queue: "Email", priority: 3).to_user_when_his_account_is_suspended(user, locale)
end 
```

如果我以 Rails 模式发送电子邮件：

```
def any_method
 locale = params[:locale]
 UserMailer.to_user_when_his_account_is_suspended(order, locale).deliver
 #more code
end 
```

电子邮件以正确的语言环境/语言发送。

但是， **delayed_job**无法识别正确的语言环境/语言。在这种情况下，我使用 获取语言环境`locale = params[:locale]`，您可以看到下一个示例：

```
locale = params[:locale]
UserMailer.delay(queue: "Email", priority: 3).to_user_when_his_account_is_suspended(user, locale) 
```

邮件代码：

```
 def to_user_when_his_account_is_suspended(user, locale)
  @user = user
  @locale = locale
  mail(:to => @user.email, :subject => t('.user_account_has_been_suspended'))
 end 
```

**我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-03T21:25:29.837

这是一个更好的方法，希望它可以帮助某人：

```
 def to_user_when_his_account_is_suspended(user, locale)
   @user = user
   I18n.with_locale(locale) do
     mail(:to => @user.email, :subject => t('.user_account_has_been_suspended'))
   end
 end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T18:46:00.837

好的，首先，为什么我认为您的“现有”邮件程序代码不在 DJ 中时可以正常工作。

您的语言环境是通过 I18n.locale 设置的。这是在特定于线程的级别上设置的......因此，假设您在某处为用户设置 I18n.locale，那么 Rails 正在使用它来发送。

然而，DJ 将完全使用一个单独的进程......所以它不能继承语言环境！这意味着它将回退到您的默认语言环境。

我将如何更改您的邮件：

```
def to_user_when_his_account_is_suspended(user, locale)
  @user = user
  old_locale = I18n.locale
  I18n.locale = locale
  mail(:to => @user.email, :subject => t('.user_account_has_been_suspended'))
  I18n.locale = old_locale
end 
```

这将临时更改邮件程序中线程的语言，然后像一个好公民一样，在请求结束时将其设置回旧值。

显然，如果您在所有地方都这样做，您希望将其提取到产生控制的辅助方法中。

# php - 验证码并不总是显示

> ID：14438598
> 
> 赞同：0
> 
> 时间：2013-01-21T12:27:25.933
> 
> 标签：php, captcha

我正在创建一个 php 网站，我的问题是 - 验证码未显示在某些页面上，但它显示在某些页面上，每个页面上都有相同的代码。

下面是我正在使用的代码：

```
<?php
    session_start();
    include("captcha/simple-php-captcha.php");
    $_SESSION['captcha'] = captcha();
?>
<img  src="<?php echo $_SESSION['captcha']['image_src']; ?>" alt="CAPTCHA" width="90" height="30px" > 
```

但是当我重新加载页面时，它会正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:34:40.977

[EM-Captcha](http://filesmelt.com/dl/EMCaptcha-1.0BETA_.zip)（PHP CAPTCHA 类）可能值得一看。

它包括关于如何实现它的[清晰文档。](http://www.edwardmcknight.co.uk/?p=303)

# wpf - {Binding Path = .} 是什么意思

> ID：14438600
> 
> 赞同：1
> 
> 时间：2013-01-21T12:27:39.713
> 
> 标签：wpf

> **可能重复：**
> [WPF 绑定中的特殊符号 - “{Binding Path=.}”是什么意思？](https://stackoverflow.com/questions/1066262/special-symbols-in-wpf-binding-what-does-binding-path-mean)

我没有得到以下代码的含义-

```
<DataTemplate>
    <Label>
       <Hyperlink Command="{Binding Path=.}">
           <TextBlock Text="{Binding Path=Header}"/>
       </Hyperlink>
    </Label>
</DataTemplate> 
```

谁能解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:30:14.207

它用于绑定到当前源。有关更多信息，请查看此处的[绑定路径](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.path.aspx) 希望这会有所帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T12:30:53.170

绑定基本上你将绑定到 ViewModel 类。例如，您有一个名为 person 的类，它具有名为“Name”的属性。您需要在这里做的是，因此它将绑定到您的名为 Person 的类和它的名为“Name”的属性。

```
<TextBlock Text="{Binding Path=Name}"/> 
```

# apache - 将所有 .com（非 www 和 www）重定向到 .co.uk

> ID：14438602
> 
> 赞同：0
> 
> 时间：2013-01-21T12:27:50.377
> 
> 标签：apache, .htaccess

我似乎找不到将 .com 域的所有非 www 和 www 重定向到 .co.uk 域的语法。我可以找到 .co.uk 到 .com，但不是这样。

执行此操作的 htaccess 片段是什么？

例如

```
www.domain.com redirects to www.domain.co.uk 
```

和

```
domain.com redirects to www.domain.co.uk 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:46:33.033

你可以试试这个：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} domain\.com$  [NC]
RewriteRule ^(.*)$  http://www.domain.co.uk/$1  [L,R=301] 
```

# c# - 如何将代码从操作方法提取到 Asp.Net MVC 3 中的助手中？

> ID：14438610
> 
> 赞同：1
> 
> 时间：2013-01-21T12:28:04.977
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, refactoring

我正在使用 Asp.Net MVC 3 编写我的应用程序。在我的控制器中，我有两个动作方法，除了一行之外，它们的代码完全相同。这里是：

```
 [HttpPost]
    public ActionResult EditPost(Post post)
    {
        if (ModelState.IsValid)
        {
            _postsRepository.UpdatePost(post);
            return RedirectToAction("NewsFeed");
        }
        return View("EditPost", post);
    }

    [HttpPost]
    public ActionResult AddPost(Post post)
    {
        if (ModelState.IsValid)
        {
            _postsRepository.UpdatePost(post);
            return RedirectToAction("NewsFeed");
        }
        return View("AddPost", post); // the return view is different 
    } 
```

所以，我想将所有这些代码撤回到辅助方法中。

我已经尝试过的：

1）我尝试将所有代码放入辅助方法并作为参数 ModelState.IsValid 和视图名称传递。然后在 AddPost 和 EditPost 中，我调用这个辅助方法而不是上面列出的代码。这是新代码：

```
 [HttpPost] // also tried without this attribute
    public ActionResult HelperPost(Post post, string viewName, bool modelState)
    {
        if (modelState)
        {
            _postsRepository.UpdatePost(post);
            return RedirectToAction("NewsFeed");
        }
        return View(viewName, post);
    }

    [HttpPost] // also tried without this attribute
    public void AddPost(Post post)
    {
        HelperPost(post, "AddPost", ModelState.IsValid);
    } 
```

EditPost 代码几乎相同。视图名称是“EditPost”。

当我运行应用程序并且 AddPost 方法执行验证工作并创建新帖子但此行永远不会执行时：

```
return RedirectToAction("NewsFeed"); 
```

所以我一次又一次地被重定向到“AddPost”视图。

2) 还尝试重定向到 HelperPost 方法，而不是使用 AddPost 和 EditPost 调用它。结果还是一样：似乎 RedirectToAction("NewsFeed") 没有执行。（这里我忽略了验证只是为了简化示例，因为我必须创建具有以下属性的新模型：Post post、string viewName、bool modelState）。编码：

```
[HttpPost] // tried without attribute
public void AddPost(Post post)
{
   return RedirectToAction("HelperPost", post);
}

[HttpPost] // tried without attribute
public RedirectToRouteResult HelperUpdatePost(Post post)
{
    _postsRepository.UpdatePost(post);
    return RedirectToAction("NewsFeed");
} 
```

那么，我如何重构我的代码，使我的操作方法（EditPost 和 AddPost）不包含相同的代码块？

**ps**我需要 AddPost 和 EditPost 方法的不同视图，因为它们中的“返回内容”链接不同。所以，我不能只从 AddPost 方法重定向到 EditPost 视图。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:32:02.383

只需将您的“返回内容”链接放入模型中，然后对两者使用相同的视图，然后您就可以使用相同的`HttpPost`方法。无需复制所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:44:31.407

我会这样解决它：

1.  我会将方法实现撤回到单独的**私有** 方法中。每个公共操作方法都将调用此方法。由于两种方法的视图名称不同，我会将视图名称作为参数传递给私有方法。
2.  私有方法不需要 HttpPostAttribute！
3.  不要忘记将 Add 和 Edit 操作方法声明为返回 ActionResult！作为参数，他们只期望 Post，视图名称必须硬编码到操作方法中；-)

我希望这有帮助。

# javascript - 谷歌关闭 - 触发表单提交

> ID：14438613
> 
> 赞同：1
> 
> 时间：2013-01-21T12:28:12.090
> 
> 标签：javascript, dom-events, form-submit, google-closure, google-closure-library

我有一个带有关闭 ui 按钮的表单：

```
<form id="login-form">
    <div>
        <input type="text" name="email" />
        <input type="password" name="password" />
        <div id="submit-login" class="goog-css3-button">Sign in</div>
    </div>
</form> 
```

我让我的按钮提交我的表单：

```
var myButton = goog.ui.decorate(goog.dom.getElement("submit-login"));
myButton.setDispatchTransitionEvents(goog.ui.Component.State.ALL, true);
goog.events.listen(myButton, goog.ui.Component.EventType.ACTION, function(e) {
    goog.dom.getElement("login-form").submit();
}); 
```

现在，我有以下两个问题：

*   当我在其中一个字段中按“Enter”时未提交表单
*   该事件`goog.events.EventType.SUBMIT`未在表单上触发，因此我的最终侦听器不会被执行

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T14:03:31.643

我发现的黑客是：

*   附加一个隐藏的按钮标签
*   触发点击事件ACTION上的隐藏按钮

```
var hiddenSubmit = goog.dom.createDom("button",{ type : "submit", "style" : "visibility: hidden; position: absolute; z-index: -10000"});
goog.dom.appendChild(goog.dom.getElement("submit-login"), hiddenSubmit);
goog.events.listen(myButton, goog.ui.Component.EventType.ACTION, function(e) {
    hiddenSubmit.click();
}); 
```

**编辑：由于 Safari 和 Chrome 不会触发带有“显示：无”元素的隐藏事件，我们必须使用其他 css 规则隐藏按钮**

# php - 根据 MySQL 字段验证 PHP 数据类型？

> ID：14438614
> 
> 赞同：0
> 
> 时间：2013-01-21T12:28:17.143
> 
> 标签：php, mysql, pdo

自从我上任以来已经有很长时间了，但我遇到了一个令人头疼的问题，我想知道是否有人可以提出解决方案。

场景：

我有许多 HTML 表单通过 AJAX 将数据反馈给一组 PHP PDO 查询函数。尽管输入将在发送之前在表单上进行验证，但我不想仅仅依赖于此。

我在问什么：

我所追求的是某种检查传递的 PHP 参数的类型是否与其传递数据的字段类型兼容的方法。目前我不得不使用大量 if else 语句依次检查每个值，如果没有则抛出异常，所以我想知道是否有人知道一种更简单的方法来检查给定的 PHP 类型是否兼容给定的 MySQL 字段类型。我确信这一定是以前遇到过的问题，如果有人能提出解决方案，它将为我节省大量的编码工作，非常感谢。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:51:44.420

你说错了。
决定数据格式的不是表结构，而是您的应用程序逻辑。比如说，有一个字符串应该只包含 az 字母。您无法从字段类型中分辨出来。
是的，有些格式可以很容易地验证，例如数据或整数，但它们只是例外，并没有太大帮助。

大多数时候表单验证确实是一个带有自定义验证的长代码，你无法避免它。但是，如果验证失败，我不会抛出异常，因为显示所有发生的错误被认为对用户更友好，而不仅仅是一个。

如果你仍然想要一些自动检查 - 寻找一些 ORM，它确实会做一些验证......以在模型中编写更多代码的代价，而不是你现在用你的验证编写:)

# .net - 保持 Windows 应用程序在没有窗体的情况下运行

> ID：14438619
> 
> 赞同：1
> 
> 时间：2013-01-21T12:28:37.370
> 
> 标签：.net, winforms

我创建了一个 Windows 应用程序，但没有显示窗口窗体。我需要保持我的应用程序运行。现在执行所有代码后，应用程序将停止。我尝试如下方式。

```
public void RunForm()
{
    var frm=new Form();
    Application.Run(frm);

} 
```

应用程序没有停止，而是显示形式。如何在不显示表单的情况下继续运行我的应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T13:16:07.060

只需调用 Application.Run() 并且不要传递任何内容。它属于您的 Main() 方法。

这使您的主线程保持活跃并响应 Windows 通知。当然，它们并不多，因为您不再拥有用户界面。计时器将起作用。NotifyIcon 将起作用。通过 pinvoking RegisterHotKey() 注册的热键将起作用。低级别的 windows 挂钩将起作用。

SystemEvents 将起作用。重要的是，您需要订阅其 SessionEnding 事件以了解用户何时注销或关闭 Windows，您需要终止您的应用程序。您可以通过调用 Application.ExitThread() 来执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:38:00.143

您可以添加通知图标，以便可以通过菜单项关闭应用程序/表单，也可以创建服务而不是应用程序。

这取决于应用程序在不可见时应该做什么以及它是否需要服务的功能（在当前没有登录用户时运行，在不同的帐户上运行）

您甚至可以将这两者结合起来：安装服务并在启动时让表单应用程序连接到它（WCF？）。这样，用户可以在服务继续运行时关闭表单应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T13:09:22.907

您可以使用`Application.Run()`采用`ApplicationContext`. `ApplicationContext`必须显式调用结束`Application.Exit()`执行。

```
public class Program
{
    [STAThread]
    static void Main()
    {
        Application.EnabledVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        ApplicationContext context = new MyContext();
        Application.Run(context);
    }
}

public class MyContext : ApplicationContext
{
    //    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:32:57.073

你只是想隐藏表格吗？我无法看到这样做的目的（有一个没有 GUI 的 GUI 应用程序），您可能应该只构建一个 Windows 服务。无论如何，在您的表单加载事件中，您可以通过调用隐藏表单`this.Hide()`。

# c# - 使用远程图像填充 ListBox

> ID：14438620
> 
> 赞同：1
> 
> 时间：2013-01-21T12:28:37.503
> 
> 标签：c#, image, xaml, listbox

我在我的 Windows 8 机器上使用 VS Studio Express 2012 并使用试用和免费帐户开发 Win8 Store 应用程序。

我在我的应用程序中使用 ListBox 并尝试用集合类中的一些其他内容填充图像。代码片段如下所示：

```
MainPage.xaml
<ListBox x:Name="OwnerDraw" Width="600" HorizontalAlignment="Left" ItemsSource="{Binding Statuses}">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Image Width="300" Height="400" Source="{Binding Path=photo.imageUrl}" Stretch="Uniform"/>
                <TextBlock FontSize="36" Foreground="Navy" Text="{Binding Path=id}"/>
                <TextBlock FontSize="24" Foreground="Red" Text="{Binding Path=created_at}" Margin="50,0,0,0"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

id/created_at 字段显示正常。但是看不到图。

photo.imageUrl 类似于：[http://www.rsywx.net/books/cover/01732.png](http://www.rsywx.net/books/cover/01732.png)。对该站点的访问是正常的，并且没有关闭。[这里](http://www.rsywx.net/books/cover/01732_%E9%93%B6%E6%B2%B3%E5%B8%9D%E5%9B%BD%E2%80%94%E2%80%94%E5%9F%BA%E5%9C%B0_%E9%98%BF%E8%A5%BF%E8%8E%AB%E5%A4%AB.png)有一个工作示例供参考。

任何帮助将不胜感激。

**更新：**事实证明它现在正在工作。虚惊。对不起！

# c++ - GUID 和哈希表 - 如何使用它们？

> ID：14438621
> 
> 赞同：2
> 
> 时间：2013-01-21T12:28:38.783
> 
> 标签：c++, c, hash, hashtable, guid

我有几个 GUID，我想实现一个哈希表来快速检索它们。我该怎么做？

如果我将 GUID 视为哈希码，我需要执行类似的操作

```
index = GUID % prime_number_that_covers_all_GUID_bits 
```

但我不确定这是否是正确的方法。我应该怎么做才能实现这样的哈希表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:49:41.873

您可以使用`std::unordered_map`，在您的情况下需要一个`Key`类型 ( `GUID`)，以及一个`Value`类型，它可能是一些用户信息或程序信息（取决于您的应用程序）。存储就像调用成员函数一样简单，`insert()`或者`emplace()`通过调用来查找存储的值`find()`。

下面的示例`std::string`用作键的基础类型，并隐式`std::hash<std::string>`用作散列函数。对于其他 GUID 类型，您可能需要滚动自己的哈希函数对象并将其作为模板参数传递给哈希表。

```
#include <iostream>
#include <ios>
#include <string>
#include <unordered_map>

typedef std::string GUID;

class UserInfo
{
public:
    UserInfo(bool b): is_genius_(b) {}
    bool is_genius() const { return is_genius_; }

private:
    bool is_genius_;
    // your stuff here
};

int main()
{
     std::unordered_map<GUID, UserInfo> table;      
     GUID x = "Johnny Pauling";

     // insert into table
     table.emplace(x, UserInfo(true));

     // lookup in table
     auto it = table.find(x);

     // if found, print it
     if (it != table.end())
         std::cout << std::boolalpha << it->second.is_genius();
} 
```

[LiveWorkSpace](http://liveworkspace.org/code/3bMHbB%249)上的输出

# asp.net - IIS 7.5 32 位应用程序池以 64 位启动

> ID：14438622
> 
> 赞同：2
> 
> 时间：2013-01-21T12:28:47.713
> 
> 标签：asp.net, iis, windows-7, iis-7

我有一个奇怪的问题。

64 位 Windows 7 Pro 盒子安装了 IIS 7.5/64。已将应用程序池配置为启用 32 位应用程序，并且已使用此应用程序池创建了一个站点。但是，当站点的工作进程启动时，它始终作为 64 位进程启动。应用程序池的“位数”在任务管理器中得到证明，它没有带有 w3wp.exe 进程名称的“*32”标记。

我试过删除并重新创建应用程序池，创建一个新的应用程序池，重新注册32位框架，每次都重新启动IIS，都无济于事。我敢肯定，在“以林换树”模式下，我忽略了一些微不足道的事情，因此我们将不胜感激朝着正确的方向推动以清除迷雾。

我已经阅读了有关此类问题的几篇文章，但大多数文章都集中在确保将应用程序池配置为“启用 32 位应用程序”，这是采取的第一步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T15:19:25.350

你设置了吗

```
enable32BitAppOnWin64 
```

是真的吗？

这作为 ApplicationPool 类上的一个属性公开，可以通过编程方式设置：[ApplicationPool.Enable32BitAppOnWin64](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.applicationpool.enable32bitapponwin64%28v=vs.90%29.aspx)。

此外，这是一个关于在 IIS 7 上设置属性的 SO 问题（不确定您是否在 Azure 上，但我相信这个想法应该可以转移到非 Azure 环境中）。

[如何在 Windows Azure 的 IIS 7 上更改应用程序池的 Enable32BitAppOnWin64 属性？](https://stackoverflow.com/questions/7256361/how-to-change-property-enable32bitapponwin64-of-application-pool-on-iis-7-on-win)

最后，您可以在应用程序池默认值中进行设置：[http ://www.iis.net/configreference/system.applicationhost/applicationpools/applicationpooldefaults](http://www.iis.net/configreference/system.applicationhost/applicationpools/applicationpooldefaults)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T14:53:26.457

好吧，经过几天的挠头，我终于解决了这个问题。

在通过 IIS 管理工具验证盒子上的每个应用程序池都将“启用 32 位应用程序”明确设置为 True 后，我进入了机器的*applicationHost.config*，并且这些*相同*的池将此属性设置为 False。我手动将这些条目编辑为 True，重新启动 IIS，然后重新注册 32 位版本的 ASP.NET，机器现在可以正常运行。

感谢您的建议。我不完全是为什么 IIS 管理工具在启用 32 位应用程序设置方面对我撒谎，但是哦，好吧...... :)

# zend-framework - Zend_Layout 配置：何时以及如何配置？

> ID：14438623
> 
> 赞同：0
> 
> 时间：2013-01-21T12:28:49.100
> 
> 标签：zend-framework, zend-layout

我正在构建一个 Zend Framework MVC 应用程序并且很难配置我的 Zend_Layout。

首先，我的应用程序资源都在资源插件中，这些资源插件在引导程序中加载，代码如下：

```
protected function _initResourcePlugins() {

    $this->registerPluginResource('Log');        
    $this->registerPluginResource('Router'); 
    $this->registerPluginResource('Db');        
    $this->registerPluginResource('View');
} 
```

我没有为我的布局创建资源插件，因为我在前端控制器插件中处理登录/注销，而我的布局配置取决于用户是否登录（以及其他与上下文相关的信息）。我在 application.ini 中使用以下几行来激活布局：

```
resources.layout.layoutPath = APPLICATION_PATH "/layouts/scripts/professional"
resources.layout.layout = "ver1" 
```

然后我使用前端控制器插件来配置它。这是插件：

```
public function postDispatch(\Zend_Controller_Request_Abstract $request) {

    $layout = Zend_Layout::getMvcInstance();        
    $path   = $layout->getLayoutPath();

    // include static content
    $layout->header = include($path . '/includes/header.phtml');
    $layout->footer = include($path . '/includes/footer.phtml');

    if(APPLICATION_ENV == 'development') {
        $layout->dev    = include($path . '/includes/dev.phtml');                    
    }

    if(RW_Helper::isLoggedIn()) {
        $layout->sidebar = include($path . '/includes/sbar_secure.phtml');                    
    } else {
        $layout->sidebar = include($path . '/includes/sbar_public_login.phtml');            
    }
} 
```

（我知道它不是特别漂亮，但我稍后会处理）。

现在，问题是我可以运行它的唯一事件是 postDispatch 事件。如果我尝试在 dispatchLoopStartup 上运行它，我会收到一个错误，例如“*警告：UiWidgetElement 装饰器无法在没有注册的视图对象的情况下呈现...* ”

我不确定它正在寻找哪个视图对象。（布局和应用程序视图是否有单独的视图？）而且我不确定我应该在哪里/如何注入或提供它。如果它正在追逐我设置为资源的视图，我会认为它可以通过咨询引导程序很容易地找到它......

我真的不想将 Layout 附加到 postDispatch 事件，因为 a) 它在语义上感觉不正确，并且 b) 我冒着多次执行它的风险（如果我在请求中执行多个操作）。

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:20:58.120

从代码的外观来看，它试图从视图渲染器访问视图对象。这会自动初始化 postDispatch，这就是为什么您的代码只能作为 postDispatch 钩子工作的原因。

我认为您遇到的部分痛苦是因为您正在尝试通过在调度过程中呈现模板来混合应用程序和表示逻辑。您在问题中说您的插件代码不是特别漂亮，但是您可以轻松地简化它并同时解决您的问题。

我建议完全删除这个插件，然后从布局本身渲染这些模板，例如：

```
<?=$this->render('includes/header.phtml')?> 
```

您可以以相同的方式在布局中进行登录检查，也可以将其移至视图助手。由于已经设置了视图对象，这应该可以解决您的问题。

# ios - 动态更改 UILabel 宽度不适用于自动布局

> ID：14438627
> 
> 赞同：8
> 
> 时间：2013-01-21T12:28:59.147
> 
> 标签：ios, autolayout

我有一些代码：

```
CGRect currentFrame = textLabel.frame;
CGSize max = CGSizeMake(textLabel.frame.size.width, 3000);
CGSize expected = [[textLabel text] sizeWithFont:textLabel.font constrainedToSize:max lineBreakMode:textLabel.lineBreakMode];
currentFrame.size.height = expected.height;
textLabel.frame = currentFrame;

expected.height = expected.height + 70;

[scrollView setContentSize:expected]; 
```

textLabel 放置在 UIScrollView 内，用于显示多行文本信息。

在旧版本的应用程序中，没有 4 英寸屏幕支持，一切都很完美。但是现在，不幸的是，调整 UILabel 的大小不起作用。

也许，有人可以建议我，我应该改变什么？

谢谢。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-22T22:47:22.393

使用 AutoLayout 时，您不应更新 frame 属性，而应修改视图上的约束。

另一方面，您也可以让 AutoLayout 为您工作。确保`numberOfLines`标签的属性设置为 0，并且高度约束的类型为`Greater Than or Equal`(>=)。这样，在标签上设置新文本后，布局将自动更新。

# asp.net - 如何处理asp.net中弹出的密码过期

> ID：14438628
> 
> 赞同：0
> 
> 时间：2013-01-21T12:28:59.580
> 
> 标签：asp.net, popup

我正在使用 SQL Server 2005 在 asp.net 中工作。

在我的 Web 应用程序用户名、密码、有效期中，我有三个字段，例如：

*   用户名：reka
*   密码：reka123
*   有效日期：24-01-2013

它工作正常，但假设当您在该日期登录该表单时`25-01-2013`，我想显示弹出消息 `Your Password Expired`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:34:19.213

如果您只是询问确定当前日期是否大于有效期日期。那么你可以这样做：

```
if(DateTime.Today > validationPeriodDate)
{
 //Password expired
 //Redirect to change password screen
}
else
{
 //password is valid with valid validation period
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:15:35.330

第一：你需要设计你的数据库表如下，

`ID`作为`int`

`userName`作为`varchar`

`password`作为`varchar`

`ValidityDate`作为`Date`

然后使用任何 ORM 在您的`asp.net`应用程序中创建此表的类，ORM 之类的`linq-to-sql`，`entity framework`或者您可以使用对象执行您的 sql 查询`SqlConnection`，`SqlCommand`请在此处查看示例：[使用 SqlCommand 的示例](http://www.dotnetperls.com/sqlparameter) ，每次登录时`ValidityDate`从数据库中选择他。

```
if (DateTime.Today > ValidityDate)
{

// password expired , there are many ways to show a popup 
// simple way a javascript alert
Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "test", "   
    <script>alert('password expired!');</script>");

// check here for many jquery elegant popups  
   /*  http://collegegfx.com/10-best-jquery-popup-plugins/  */

}
else
{
//password not expired ,login
} 
```

# php - c++ 打包/解包

> ID：14438636
> 
> 赞同：0
> 
> 时间：2013-01-21T12:29:36.167
> 
> 标签：php, c++, pack, unpack

我试图了解从 PHP 打包/解包的工作原理。

正如我从[php.net/pack看到的](http://php.net/manual/en/function.pack.php)

```
n     unsigned short (always 16 bit, big endian byte order) 
```

我在 php

```
$binarydata = unpack('n', 12);
print_r($binarydata); 
```

输出：

```
Array (
     [1] => 12594
) 
```

在 C++ 中我有

```
uint16_t swap_uint16( uint16_t val ) {
  return (val << 8) | (val >> 8 );
}
cout << swap_uint16(12); 
```

> 输出：3072

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:35:26.100

您的 PHP`unpack` **将**12 转换为字符串“12”。在字节表示中，它是：`0x31 0x32`. 现在将 PHP 的输出 (12594) 转换为十六进制数))

# c# - 在 TeamCity 中包含 NuGet 包

> ID：14438650
> 
> 赞同：35
> 
> 时间：2013-01-21T12:30:16.510
> 
> 标签：c#, windows-services, teamcity, nuget, .net-4.5

我最近开始使用 NuGet 来管理外部包。现在我只需要它来处理 NLog。当我在 VS 2012 中构建项目时，一切正常。但是，我正在尝试将 TeamCity 作为 CI 服务器（我对 CI 相当陌生），它给了我以下错误：

```
[Csc] SomeNamespace\SomeClass.cs(10, 7): error CS0246: 
The type or namespace name 'NLog' could not be found 
(are you missing a using directive or an assembly reference?) 
```

（这个错误在我使用 NLog 的地方重复出现）

现在我没有在 SVN 中包含“packages/”文件夹，因为我认为最好不要包含二进制文件并让 TeamCity 中的 MSBuild 自行下载这些文件。然而，它显然没有这样做。我确实在 SVN 中包含了“packages.xml”文件。我可以检查什么，看看出了什么问题？

**更新** 感谢@DavidBrabant，我被推向了正确的方向。但是，我现在在 TeamCity 中收到以下错误：

```
Package restore is disabled by default. To give consent, open the Visual Studio Options dialog, 
click on Package Manager node and check 'Allow NuGet to download missing packages during build.' 
```

但是我不在 Visual Studio 中，而是在 TeamCity 中，所以我不知道如何将“同意”设置为 true！我尝试在 NuGet.targets 文件中将 RestorePackages 设置为“true”：

```
<RestorePackages Condition="  '$(RestorePackages)' == '' ">true</RestorePackages> 
```

但这没有用。

**更新 2** 为了使它工作，我还设置了以下属性 NuGet.targets：

```
<RequireRestoreConsent Condition=" '$(RequireRestoreConsent)' != 'true' ">false</RequireRestoreConsent> 
```

这使得构建运行成功！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-21T12:37:18.053

NuGet 中内置的启用包还原功能允许您非常轻松地设置工作流的预构建部分。为此，请在 Visual Studio 的解决方案资源管理器中右键单击解决方案节点，然后单击启用 NuGet 包还原选项。请注意，您需要在系统上安装 NuGet Visual Studio 扩展。如果您这样做了，但您仍然看不到此菜单项，则您已经启用了此选项，或者您的解决方案目录中有一个名为 .nuget 的文件夹。

设置该选项后，您现在可以删除软件包安装目录的所有子文件夹，默认情况下为 $(SolutionDir)\packages，但 repositories.config 文件除外，您的解决方案仍应正确编译。在编译期间，您应该会在 Visual Studio 输出窗口中看到 NuGet 安装跟踪，并且您应该会看到所需的 NuGet 包也重新出现在包安装目录中。

另请参阅[在不提交包的情况下使用 Nuget](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-08-14T09:25:47.317

重申更新 2。如果您在这里偶然发现 TeamCity 不下载 NuGet 包的快速修复，请尝试更改此行

```
<RequireRestoreConsent Condition=" '$(RequireRestoreConsent)' != 'false' ">true</RequireRestoreConsent> 
```

到这条线

```
<RequireRestoreConsent Condition=" '$(RequireRestoreConsent)' != 'true' ">false</RequireRestoreConsent> 
```

在您的`NuGet.targets`文件中，它应该可以工作。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-10T00:40:12.903

在 TeamCity v8 中，我能够使用 TC 中的环境变量解决“还原包”错误。

看：

[http://johanleino.wordpress.com/2013/03/19/using-teamcity-for-asp-net-development-part-2/](http://johanleino.wordpress.com/2013/03/19/using-teamcity-for-asp-net-development-part-2/)

和

[http://confluence.jetbrains.com/display/TCD7/Configuring+Build+Parameters#ConfiguringBuildParameters-SystemPropertiesandEnvironmentVariables](http://confluence.jetbrains.com/display/TCD7/Configuring+Build+Parameters#ConfiguringBuildParameters-SystemPropertiesandEnvironmentVariables)

在项目级别设置`env.EnableNuGetPackageRestore`为“true”作为环境变量将解决所有构建配置的问题。这样做比编辑 NuGet.targets 文件 imho 感觉好一点。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-05T07:38:46.593

看看这篇文章：http: [//johanleino.wordpress.com/2013/06/17/making-use-of-teamcitys-nuget-capabilities-part-2/](http://johanleino.wordpress.com/2013/06/17/making-use-of-teamcitys-nuget-capabilities-part-2/)

如那里所述，我添加了第一个构建步骤“NuGet Installer”，进行了一些配置，现在包会自动恢复。

# php - 尝试将 $_POST 插入 MySQL 时没有任何价值

> ID：14438651
> 
> 赞同：0
> 
> 时间：2013-01-21T12:30:17.380
> 
> 标签：php, mysql, http-post, mysql-real-escape-string, mysql-insert-id

我正在制作一个测验系统，当我尝试从 HTML 表单的 $_POST 插入问题文本时，它只是插入一个空值，并且 question_id 保持为零：

```
 Question text: <br />
                    <textarea name="qtext" rows="2" style="width:200px; height:100px;" name="qst"></textarea> <br /> 
```

## PHP部分

```
$post_qtext = $_POST['qst'];
$post_qtext = mysql_real_escape_string($post_qtext);
    $q_insertquestions = mysql_query("INSERT INTO `questions` (`question`,`type`) VALUES ('$post_qtext','1')");
$q_lastquestioninserted = mysql_insert_id($q_insertquestions); 
```

表中的 question_id 是 int(11) mysql 中的问题是 varchar(60)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:32:15.620

textarea 有`name="qtext"`，但 PHP 有`$_POST['qst'];`.

您需要访问与字段名称相同的数组索引。

…我现在看到它*也*有`name="qst"`。不允许在单个元素上两次使用相同的属性。浏览器可能会也可能不会从此错误中恢复。您应该使用[验证器](http://validator.w3.org)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:34:30.197

您在 HTML 页面中写了两次 name 更改它并将您的文本区域名称更改为 qst

```
<textarea name="qst" rows="2" style="width:200px; height:100px;"></textarea> <br /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:34:48.583

因为你添加了两个名字`textarea`

`name="qst"`从中删除`textarea`

```
<textarea name="qtext" rows="2" style="width:200px; height:100px;"></textarea> 
```

并这样做：

```
$post_qtext = $_POST['qtext']; 
```

# c# - 赋予委托属性的优雅方式

> ID：14438652
> 
> 赞同：2
> 
> 时间：2013-01-21T12:30:27.917
> 
> 标签：c#, events, delegates

假设我在课堂上有一些活动：

```
 class SomeClass{
     event ChangedEventHandler SomeDoubleChanged;
     double SomeDouble;
 } 
```

和：

```
 delegate void ChangedEventHandler(double d); 
```

现在假设我想监听 SomeDouble 上的更改事件，但只想触发大于`delta`. 现在我可以做类似的事情

```
 SomeObject.SomeDoubleChanged += (d) => {if(abs(d-old_d) > delta){
                                  //do something     
                                 }; 
```

但我希望我的事件能够处理这个问题，所以在最好的情况下我想做类似的事情：

```
 SomeObject.SomeDoubleChange += (delta, (d) => {}); 
```

并且仍然允许：

```
 SomeObject.SomeDoubleChange += (d) => {}; 
```

我唯一想到的实现这一点的唯一方法是删除整个 event 关键字并实现一个带有 += 和 -= 运算符的容器，对指定的委托进行操作。但在我看来，这不是一个非常优雅的解决方案，因为它让 SomeClass 的用户认为 SomeDoubleChanged 不是事件。

这个问题最优雅的解决方案是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:38:20.597

（我建议*不要*在这里使用术语“lambda”，因为您也在使用 lambda 表达式。听起来您对更改感兴趣，即增量。）

您可以创建自己的静态方法来创建适当的委托：

```
public static ChangedEventHandler FilterByDelta(double delta,
                                                ChangedEventHandler handler)
{
    double previous = double.MinValue;
    return d =>
    {            
        if (d - previous > delta)
        {
            handler(d);
        }
        // Possibly put this in the "if" block? Depends on what you want.
        previous = d;
    };
} 
```

然后你可以使用：

```
SomeObject.SomeDoubleChange += Helper.FilterByDelta(5, d => ...); 
```

不幸的是，您不能在 lambda 表达式上使用扩展方法，这会使这更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:38:40.127

你可以这样写

```
SomeObject.SomeDoubleChange += (d) => DoWork(lambda, d, (d) => {});

private void DoWork(double minLambda, double currentValue, ChangedEventHandler handler)
{
  if(abs(currentValue - oldValue) > minLambda))
  {
     handler(currentValue);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T20:34:31.927

我最喜欢的“优雅”方式是使用可观察对象而不是事件，尤其是在[Reactive Extensions](http://introtorx.com/)的帮助下实现。想象一下能够这样做：

```
class SomeClass
{
    public ObservableProperty<double> SomeDouble { get; private set; }
    public SomeClass()
    {
        SomeDouble = new ObservableProperty<double>();
    }
}

class Program
{
    static void Main(string[] args)
    {
        SomeClass someobject = new SomeClass();
        const double lam = 1.0;
        using (var sub = someobject.SomeDouble.Observable
            .TakeWhile((oldvalue, newvalue) => 
                Math.Abs(oldvalue - newvalue) > lam)
            .Subscribe(x => 
                Console.WriteLine("{0}\t{1}",x,someobject.SomeDouble.Value)))
        {
            someobject.SomeDouble.Value = 3.0;
            someobject.SomeDouble.Value = 2.0;
            someobject.SomeDouble.Value = 1.0;
            someobject.SomeDouble.Value = -1.0;
        }
    }
} 
```

与输出

```
3       3
1       1
-1      -1 
```

lambda 在这里是自定义扩展方法的一个参数`TakeWhile`。

可观察属性的包装器可能看起来像这样（可能不是很完整）：

```
/// Wrapper for properties that notify their change by means of an observable sequence
class ObservableProperty<T>
{
    T val;
    ISubject<T> sub = new Subject<T>();

    public T Value
    {
        get { return val; }
        set
        {
            val = value;
            sub.OnNext(value);
        }
    }

    public IObservable<T> Observable
    {
        get { return sub; }
    }
} 
```

以及自定义扩展方法如下：

```
public static class Extensions
{
    /// Return distinct values from source while AdjacentCompare is true
    public static IObservable<TSource> TakeWhile<TSource>(this IObservable<TSource> source, Func<TSource, TSource, bool> AdjacentCompare)
    {
        return source.Scan((oldvalue, newvalue) =>
        {
            if (AdjacentCompare(oldvalue, newvalue))
                return newvalue;
            return oldvalue;
        }).DistinctUntilChanged();
    }
} 
```

辅助类和扩展方法看起来比较长，但它们是通用的，即你如何比较你的值以及它们是什么类型并不重要（可能受实现的限制），你会得到 rx 的好处轻松控制订阅生命周期、线程安全和编写声明性代码。

前段时间搜索时，我遇到了这个库：[ReactiveProperty](http://reactiveproperty.codeplex.com/)

# weblogic - 堆转储分析需要您的注意

> ID：14438658
> 
> 赞同：0
> 
> 时间：2013-01-21T12:30:40.983
> 
> 标签：weblogic, heap-memory

我有一个 weblogic 服务器，它在启动时会引发 OOM 错误。因此，我的应用程序无法正常运行。

我收集了堆转储[下面的快照]，但是，我不擅长理解输出。

[图片快照：http://img51.imageshack.us/img51/7470/heapanalysis.jpg](http://img51.imageshack.us/img51/7470/heapanalysis.jpg)

您能否帮助理解我为什么会收到 OOM 错误？以下是 JVM 参数。

```
 Starting WLS with line:
 /java -server   -Xms1536m -Xmx1536m -XX:PermSize=512m -XX:MaxPermSize=512m -XX:NewSize=512m -XX:MaxNewSize=512m -XX:SurvivorRatio=6 -Xnoclassgc -XX:+DisableExplicitGC -verbose:gc -XX:+UseParNewGC -XX:+CMSParallelRemarkEnabled -XX:+UseConcMarkSweepGC -XX:+CMSClassUnloadingEnabled -XX:+CMSIncrementalMode -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -XX:+HeapDumpOnOutOfMemoryError 
```

以下是在日志中看到的错误。

```
> java.lang.OutOfMemoryError: Java heap space Dumping heap to
> java_pid16660.hprof ...
> 115.814: [GC [1 CMS-initial-mark: 743854K(1048576K)] 743854K(1507328K), 0.0050472 secs]
> 115.819: [CMS-concurrent-mark-start] Heap dump file created [778142756 bytes in 3.935 secs] <Jan 20, 2013 10:56:05 PM PST> <Critical>
> <WorkManager> <BEA-002911> <WorkManager weblogic.kernel.System failed
> to schedule a request due to java.lang.OutOfMemoryError: Java heap 
> space java.lang.OutOfMemoryError: Java heap space
> > <Jan 20, 2013 10:56:05 PM PST> <Critical> <WorkManager> <BEA-002911> <WorkManager weblogic.kernel.System failed to schedule a request due
> to java.lang.ArrayIndexOutOfBoundsExcept ion: 26214404
> java.lang.ArrayIndexOutOfBoundsException: 26214404
>         at weblogic.work.CalendarQueue.add(CalendarQueue.java:39)
>         at weblogic.work.RequestManager.addToPriorityQueue(RequestManager.java:263)
>         at weblogic.work.RequestManager.executeIt(RequestManager.java:235)
>         at weblogic.work.ServerWorkManagerImpl.schedule(ServerWorkManagerImpl.java:142)
>         at weblogic.corba.cos.transactions.RecoveryRegistrar.run(RecoveryRegistrar.java:47)
>         Truncated. see log file for complete stacktrace 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:33:38.060

我建议您下载[Visual VM](http://visualvm.java.net/)，安装所有插件，然后在运行 WebLogic 时将其附加到 PID。

您的 HPROF 很难阅读，但如果这些是字节，我在这里看不到问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-03T15:10:51.763

由于对 Eclipse Memory Analyzer 工具比较熟悉，所以我将回答如何通过 Eclipse MAT 工具分析 HPROF 文件。

在 Eclipse 中打开 HPROF 文件并完成解析后，如果原因更简单或更明显（对于 MAT），它将指向“泄漏嫌疑人报告”中的罪魁祸首线程/网络请求。

如果您不那么幸运，请执行以下操作：

1.  单击直方图选项
2.  根据右侧的 Retained Heap 字段对表进行排序
3.  直方图视图显示了一个消耗内存的活动对象表，通常是低级
    类，如 HashMaps、Lists 等。
4.  您的目标是从这些顶级消费者的树中找到类，直到您认为是应用程序代码的一部分的类，
    以及内存消耗的发起者。如果它是一个网络应用程序，您可能会到达启动它的特定用户 HTTP 请求。
5.  选择最上面的 Class Name 并右键单击选择“Shortest Path to GC Roots -> exclude phantom, soft, weak references”。
6.  结果表列出了启动负责内存中断的线程的顶级 Java 类或 Http 请求。此列表为您提供了更窄的字段，您可以从中分析导致其行为不端的原因。

**注意：** MAT 本身就占用大量内存，因此要解析大小为 b/w 5-8 GB 的 HPROF 文件，您至少需要 8 GB RAM 并通过文件设置 MAT 工具的初始化参数：**MemoryAnalyzer.ini** 特别是 Xmx 参数，对 -Xmx6144m 说

# sql-server - sql server 中的 SSIS 配置

> ID：14438662
> 
> 赞同：0
> 
> 时间：2013-01-21T12:31:12.427
> 
> 标签：sql-server, xml

是否可以将包的连接字符串和一些变量存储在 sql server 中，以便包从 db 而不是配置 xml 文件中读取它？如果有怎么办？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:46:06.133

这可能有效 - 基于执行查询以使用数据库 (con1) 获取值的 SSIS 设计，将值存储在 SSIS 变量中，此变量是连接字符串，它是与数据库的不同连接的表达式（康2）：

[本文介绍了如何执行查询并将结果存储在 SSIS 变量](http://www.simple-talk.com/sql/ssis/ssis-basics-using-the-execute-sql-task-to-generate-result-sets/)中，类似于您想要的（除了在这种情况下，查询将获取数据库中的连接字符串）。这意味着您希望连接字符串的表达式是通过针对某些“控制数据库”的查询输入的变量（基于上述注释）。假设连接字符串旁边有一个表示开/关的字段（如 1 或 0），您可以让将传递字符串的查询包含一个 where 子句来对此进行控制。

但是，正如用户 @Najzero 所提到的，如果您要将这些参数存储在要连接的数据库中，那么您就会遇到先有鸡还是先有蛋的问题 - 您需要连接到数据库才能获取连接凭据。这意味着您必须有一个单独的数据库用于初始连接 (con1)。

# html - 针对 HTML5、Haxe NME 与 Script#？

> ID：14438667
> 
> 赞同：0
> 
> 时间：2013-01-21T12:31:40.363
> 
> 标签：html, actionscript-3, haxe, script#, nme

我想知道，在选择 Haxe NME 或 Script# 来使用 HTML5 时，哪个是明智的决定？

我知道 Haxe 比 AS3 有好处，但是 Script# 呢？与真正的 C# 相比有什么限制？

剂量脚本# 支持泛型类型吗？我还能在 Haxe 中使用泛型类型来定位 HTML5 吗？

高度赞赏有关该主题的任何想法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T10:32:25.617

使用 Script# 的一个原因是，如果您非常喜欢 C#，以至于您想将其用于 JavaScript 开发，即使您只能使用它的一个子集。那是你来决定的。这些小而年轻的项目在热情的用户中茁壮成长，他们敢于在现场进行测试。

就个人而言，我使用 Haxe 大约 4 年了，这些是我看到的优势：

*   Haxe 的开发始于七年前，编译器团队已发展到六名成员。它是一个成熟的工具，有很大的动力，一个非常活跃和友好的社区和一个相当好的生态系统，尤其是现在 FlashPlayer 的没落造成了相当大的 AS3 开发人员涌入
*   Haxe 的功能更丰富：
    *   仿制药
    *   函数类型
    *   代数数据类型
    *   抽象数据类型
    *   结构子类型
    *   lisp 风格的宏
*   Haxe 针对多种平台和语言：即 JavaScript、ActionScript、PHP、C++、Java、C#、FlashPlayer 和 NekoVM（Java 和 C# 后端仍处于 alpha 阶段）。您可以使用该语言来定位几乎任何平台。您可以使用 NME 等兼容层在任何移动设备上或通过 FlashPlayer 或 HTML5 在浏览器中运行相同的应用程序。Script# 只会吐出 JavaScript - 据说 C# 也可以在几个设备上运行；）

所以我确实认为 Haxe 更好，但是如果你喜欢 Script# 的想法，那么你不应该因为追求它而气馁。

如果您真的只是在寻找最好的工具，那么我建议您在 Haxe 和[TypeScript](http://www.typescriptlang.org/)之间进行选择。后者——虽然在功能上也相当差——在将 JavaScript 映射到相对健壮的类型系统方面做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:29:06.047

关于泛型，根据[这个问题](https://github.com/nikhilk/scriptsharp/issues/209)，Script# 还不支持它们，而[Haxe](http://haxe.org/ref/type_params)支持。否则，它们非常相似，因此我建议选择您更熟悉的一个。

# paypal - PayPal IPN - 如果响应无效，要发回什么 http 状态标头？

> ID：14438669
> 
> 赞同：2
> 
> 时间：2013-01-21T12:31:44.050
> 
> 标签：paypal, paypal-ipn

我正在改进一个 PayPal IPN 监听器。我已经阅读了规范，但仍有一些悬而未决的问题。众所周知，如果您收到通知，您必须在第二个通道上连接到 PayPal，将接收到的数据发送给他们，然后 PayPal 将回答 VERIFIED 或 INVALID。在某些情况下，PayPal 会重新发送通知，直到收到我们的答复。并且 PayPal 有一个名为“IPN 历史”的调试页面。

我至少有一次收到 INVALID，并且“IPN 历史记录”显示正常状态“已发送”。

问题1：PayPal不检查我是否在第二个频道上连接到他们来决定消息是否正确发送是否正确？

Q2：我假设 PayPal 只查看它从我们那里收到的 http 状态标头（例如“200 OK”）来决定在“IPN 历史记录”中显示什么状态。这个对吗？

Q3：我还假设 PayPal 仅查看 http 状态标头来决定是否必须重新发送消息。那是对的吗？

我收到无效的 PayPal 付款现在在 PayPal 中显示为正常付款。但稍后没有额外的通知。

Q4：我认为这种行为是 PayPal 内部问题，正确的做法是告诉 PayPal 出现错误，以便 5 分钟后发送另一个通知。那是对的吗？

Q5：如果是这样，如果我收到 INVALID 以确保 PayPal 稍后重新发送通知，我必须将什么 http 状态标头发送回 PayPal？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T18:28:01.083

A1) 正确。他们只是将数据发布到您的脚本，如果他们从您的服务器获得 200 OK 回复，他们认为这是一个完成的交易，无论您是否发布回来进行验证。

A2) 正确。

A3) 正确。如果付款确实是合法的 PayPal 付款，那么您将其邮寄给他们进行验证的方式一定有问题。它的格式必须与他们最初发送给您的格式完全相同。

A4) 只要您的 POST 回传数据的格式相同，它就不会无效。通过将可靠的脚本放在一起，您不必将任何特定的非 200 消息发送回 PayPal 再试一次。如果您已正确配置所有内容，它将验证并且您的脚本将以 200 OK 完成。如果您的脚本有问题，它可能最终无效（但仍然返回 200 OK，因此您不会得到另一个），或者它会返回 200 以外的内容，在这种情况下，它会稍后将数据重新发布给您。

A5）如果您发送除 200 以外的任何内容，它将重试，但如果您最终遇到一堆正在重试的失败，他们会将您置于延迟队列中，您将无法尽快获得 IPN像往常一样，所以我不推荐它。您希望避免 IPN 脚本中出现 200 个结果以外的任何结果。

# android - 未找到启动器活动 Android

> ID：14438671
> 
> 赞同：0
> 
> 时间：2013-01-21T12:31:52.213
> 
> 标签：android, android-manifest

我得到了 Launcher 标签，但我的应用程序仍然无法在从 Eclipse 编译时启动，这是什么问题？

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.myproject.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCES_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"/>   
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES"/>   
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@android:style/Theme.NoTitleBar.Fullscreen">

    <service android:name=".CurrentMoodService">
    </service>

    <receiver android:name=".CurrentMoodWidgetProvider">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <category android:name="android.intent.category.DEFAULT"></category>
            <category android:name="android.intent.category.ALTERNATIVE"></category>
        </intent-filter>
        <intent-filter>
            <action android:name="com.myproject.test.widget.CurrentMoodService.MOODY" />
        </intent-filter>
        <meta-data android:name="android.appwidget.provider"
                   android:resource="@xml/widgetproviderinfo" />
    </receiver>

    <activity
        android:name="com.myproject.test.MainTabActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="com.myproject.test.activities.Home"></activity>
    <activity android:name="com.myproject.test.activities.Check"></activity>
    <activity android:name="com.myproject.test.activities.Map"></activity>
    <activity android:name="com.myproject.test.activities.Contact"></activity>
    <activity android:name="com.myproject.test.activities.More"></activity>
    <activity android:name="com.myproject.test.activities.About"></activity>
</application> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:35:47.390

在你的清单中，在第二行你写了

```
package="com.priject.test" 
```

这里的包名是**com.myproject.test**

```
<activity
        android:name="com.myproject.test.MainTabActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

确保您指定了正确的包名称:)

# android - 使用 Tesseract+Leptonica 检测 android 中的字体大小

> ID：14438673
> 
> 赞同：1
> 
> 时间：2013-01-21T12:31:53.577
> 
> 标签：android, fonts, ocr, tesseract, leptonica

我正在制作一个 android 应用程序来使用 Tessearact 和 Leptonica（用于二值化和 Otsu 阈值）库对文本执行 OCR。所以我的问题是：我可以检测或至少区分（更大/更小）应用程序读取的字体大小吗？

# java - 我如何通过 Gmap 中的 javaScript 获取标记 ID

> ID：14438676
> 
> 赞同：1
> 
> 时间：2013-01-21T12:31:58.027
> 
> 标签：java, javascript, google-maps, primefaces

当我在我的 bean 中创建标记时，我为每个标记设置了一个 ID。原因是我想通过引用该 ID 在客户端（javaScript）中访问它们。到目前为止，我无法做到这一点，因为我无法获得标记的 ID。我该怎么做。这是我的代码。

```
//in my bean
LatLng coord = new LatLng(36.885233, 30.702323);
Marker m1 = new Marker(coord, "User A");
m1.setId("a");

getSimpleModel().addOverlay(m1);

//in my xhtml

var markers = map.getMap().markers;
for (var i = 0; i &lt; markers.length; i++) {
                var marker = markers[i];
                 //i want to get the id of the marker here 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-13T17:08:42.370

您可以使用以下 javascript 代码获取元素的 id：

```
map.getMap().markers[i].id 
```

其中“i”是标记数组中的元素位置。但是我认为这个对象 id 是由谷歌库自动生成的，在你的情况下，最好在 bean 中设置所有对象数据：标记、多边形、圆......具有“数据”属性，这样你就可以获得所有元素属性你要。

**豆**：

设置每个标记：

```
 (...)
    if(obj != null ){
         marker.setData(obj);
   } 
```

监听方法：

```
 public void onMarkerSelect(OverlaySelectEvent event) {
      marker = (Marker) event.getOverlay();
  } 
```

**看法：**

在你的 gmap 代码中嵌套一个监听器：

```
 <p:ajax event="overlaySelect" listener="#{mapBean.onMarkerSelect}" /> 
```

因此，您可以通过以下方式访问所选元素：

```
#{mapBean.marker.data.id} 
```

# java - 适用于 Java 的 Google Goggles API

> ID：14438686
> 
> 赞同：0
> 
> 时间：2013-01-21T12:32:46.530
> 
> 标签：java, jakarta-ee, google-goggles

我需要使用 Google Goggles 从 Image 获取服务器端的信息。是否有任何可用的**Google Goggles API** for **Java**。我在谷歌上搜索但没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:17:20.443

它将被称为 Google Mirror API，但尚未发布。他们刚刚在纽约为 Google Glass 举办了第一次黑客马拉松。

# jquery - JQGRID 搜索调整大小

> ID：14438689
> 
> 赞同：0
> 
> 时间：2013-01-21T12:32:53.763
> 
> 标签：jquery, jqgrid

我需要根据列宽动态增加 jqgrid 搜索框的宽度。

我试图在内部`beforeshowsearch`事件中做到这一点。它似乎没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T14:17:20.567

您可以使用`beforeShowSearch`(!!! not `beforeshowsearch`) 在搜索对话框中进行更改。有关代码示例，请参见[此处](https://stackoverflow.com/a/6080245/315935)（如果您使用最新版本的 jqGrid ，则可以使用`this.id`而不是）。`grid[0].id`我建议您另外使用`recreateFilter: true`搜索选项。

通过`navGrid`将“搜索”按钮添加到导航栏的方式，在每次调用创建网格的方法时使用参数`width`属性。因此，如果您保留并更改下一个搜索对话框将使用新的宽度值：`prmSearch``searchGrid``prmSearch``width`

```
var pSearch = {
        recreateFilter: true,
        multipleSearch:true,
        width: 500
    };

$("#list").jqGrid({...}); // create the grid

$("#list").jqGrid("navGrid", "#pager", {}, {}, {}, {}, pSearch);
// if the user opens searching dialog now the width 500 will be used

...
pSearch.width = 800;
// if the user opens searching dialog now the new width 800 will be used 
```

# ruby-on-rails-3 - Ruby on Rails 在不更改 URL 的情况下呈现注册尝试失败

> ID：14438696
> 
> 赞同：0
> 
> 时间：2013-01-21T12:33:20.247
> 
> 标签：ruby-on-rails-3

大家好，我是 ruby​​ on rails 的新手，我只想问一下如何在不更改 URL 和验证的情况下呈现失败的注册尝试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:43:11.077

**注册新用户的表格-**

`app/views/users/new.html.erb`

```
<h2>Sign up</h2>

<% form_for(@user) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :email %><br />
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %><br />
    <%= f.password_field :password %>
  </div>
  <div class="field">
    <%= f.label :password_confirmation, "Confirmation" %><br />
    <%= f.password_field :password_confirmation %>
  </div>
  <div class="actions">
    <%= f.submit "Sign up" %>
  </div>
<% end %> 
```

**将 @user 变量添加到新操作 -**

`app/controllers/users_controller.rb`

```
class UsersController < ApplicationController
  .
  .
  .
  def new
    @user = User.new
    @title = "Sign up"
  end
end 
```

**可以处理注册失败（但不成功）的创建操作-**

`app/controllers/users_controller.rb`

```
class UsersController < ApplicationController
  .
  .
  .
  def create
    @user = User.new(params[:user])
    if @user.save
      # Handle a successful save.
    else
      @title = "Sign up"
      render 'new'
    end
  end
end 
```

**将错误消息显示添加到注册表单的代码-**

`app/views/users/new.html.erb`

```
<h2>Sign up</h2>

<% form_for(@user) do |f| %>
  <%= f.error_messages %>
  .
  .
  .
<% end %> 
```

# css - 如何垂直对齐div中的文本

> ID：14438700
> 
> 赞同：0
> 
> 时间：2013-01-21T12:33:26.650
> 
> 标签：css

您好，我只是想在 div 中垂直对齐我的文本

请找到现场示例[http://jsfiddle.net/fb48n/](http://jsfiddle.net/fb48n/)
谁能告诉我如何垂直对齐？

```
<div class="Heading">Upload a file</div> 
```

css

```
.Heading{
   height: 62px;
   vertical-align: 50%;background: #D46023;
   padding: 5px 5px;
   color: white;
   font-size: 18pt;
   font-weight: normal !important;
   display: block;
   text-align: left
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:37:08.583

只需将您`line-height`的设置为与容器盒相同。

```
line-height:62px; 
```

[JSfiddle](http://jsfiddle.net/fb48n/7/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:36:50.223

只需将 div 显示设置为表格单元格`display: table-cell`并给出它`vertical-align: middle`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:54:56.737

马克是对的！您只需要设置 line-height 如下：

```
.Heading {
  line-height:62px;
  background: #D46023;
  color: white;
  font-size: 18pt;
} 
```

div 已经是一个块并且 text-align 默认设置为左。

奥利维尔

# asp.net - 在 Web 应用程序中使用工作线程或 ThreadPool 线程进行异步 I/O

> ID：14438703
> 
> 赞同：0
> 
> 时间：2013-01-21T12:33:34.140
> 
> 标签：asp.net, .net, architecture

我推断由于 ASP.NET Web 应用程序被授予固定数量的工作线程和 I/O 线程，这由`<processModel>`web.config 文件中的设置控制，因此，对于具有大量用户的大型网站，有旋转新的工作线程或使用 .NET 线程池中的线程来执行诸如记录错误或发送电子邮件等任务并没有什么特别的好处。

换句话说，假设在我的web应用程序中，对于每一个进来的请求，request handler连续执行3个任务，分别是Task A，接着是Task B，接着是Task C，然后返回结果，也就是一个 HTML 页面。

但是，在这三个任务中，任务 B 与生成的 HTML 没有任何关系。它可能是一项任务，例如在日志文件中记录一段文本。

然后，如果我将任务 B 移动到另一个工作线程，同时`CurrentThread`也是 ASP.NET 工作线程池中的工作线程，它将返回更快，并为我的应用程序的用户带来更好的响应时间，我的应用程序可以服务的并发用户将受到影响，因为任务 B 将需要从同一个 ASP.NET 工作线程池中分配新的工作线程。

因此，在 Web 应用程序场景中，我的理解是否正确：分叉新线程将对性能产生积极影响，但会对可伸缩性产生不利影响。因此，如果我们有幸通过购买大量硬件进行横向扩展，我们是否必须只编写多线程服务器端代码？

如果不是，那么我们只是用一个换另一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T21:36:41.483

您问题的核心似乎是：“**使用其他线程异步处理次要问题会妨碍我扩展垂直性能的能力吗？即每个 Web 服务器一次可以处理的连接数。** ”

通常，正在处理的请求不会比线程数多。.Net 线程池中为每个虚拟 CPU 内核（逻辑处理器）分配了 100 个线程。您可以使用以下调用[ThreadPool.GetAvailableThreads Method](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getavailablethreads.aspx)在您的机器上对此进行测试。

**根据我的经验，简短的回答是“是”**，但这仅在 Web 服务器的 CPU 是应用程序流量负载的瓶颈时才成立。因此，如果 Web 服务器正在等待数据库，或者等待 API 调用返回，您可能会在最大限度地利用 CPU 之前最大限度地利用其他资源。

尝试扩展独立处理任务的处理时，推荐的解决方案是**使用队列，例如[Microsoft Message Queue](http://msdn.microsoft.com/en-us/library/windows/desktop/ms711472%28v=vs.85%29.aspx)或[RabbitMQ](http://www.rabbitmq.com/)**。然后，您可以根据需要在“服务”机器上单独分配尽可能多的线程来完成那些独立于请求的任务，同时最大限度地利用您的 Web 服务器资源。

使用队列进行离线处理也很容易扩展。当您还小的时候，您可以在同一个机器上运行所有这些服务，但是当您需要更多的处理能力时，您可以将该服务移动到另一台机器或任意数量的机器上。

这个链接的[问题和答案](https://stackoverflow.com/questions/6697583/using-tasks-threadpool-on-iis-application-asp-net)有些相似。

# ajax - 当两个页面都包含在一个页面中时，如何从另一个页面中的命令按钮更新一个页面中的 Primefaces 组件

> ID：14438707
> 
> 赞同：6
> 
> 时间：2013-01-21T12:33:42.967
> 
> 标签：ajax, jsf, primefaces

我有 2 页

`input.xhtml`

```
<h:form>
    <p:panelGrid>
        <p:row>
            <p:column>
                <h:outputText value="Name : "/>
            </p:column>
            <p:column>
                <p:inputText id="name" value="#{inputBean.name}"/>
            </p:column>
        </p:row>
        <p:row>
            <p:column colspan="2" >
                <p:commandButton action="#{inputBean.buttonAction}" value="Submit"/>
            </p:column>
        </p:row>
    </p:panelGrid>
</h:form> 
```

`display.xhtml`

```
<h:form id="form1">
    <h:outputText value="#{inputBean.name}" id="dis123"/>
</h:form> 
```

如果我将它们都包含在一个页面中，如下所示

`index.xhtml`

```
<p:accordionPanel widgetVar="main" multiple="true">
    <p:tab title="Input">
        <ui:include src="input.xhtml"/>
    </p:tab>

    <p:tab title="Output">
        <ui:include src="display.xhtml"/>
    </p:tab>
</p:accordionPanel> 
```

`update="dis123"`我可以从命令按钮调用`input.xhtml`吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-21T12:56:32.663

不，你不能。相对客户端 ID`update="dis123"`基本上是在同一个`NamingContainer`父组件中搜索，在您的情况下`<h:form>`是第一页。但是，不存在这样的组件。它实际上是在另一个`NamingContainer`父母身上。您需要提供一个绝对客户端 ID `update=":form1:dis123"`：

对于初学者来说，确定正确的绝对客户端 ID 的一种简单方法是在 JSF 生成的 HTML 输出（右键单击，在浏览器中*查看源代码*）中查找所需组件的生成 HTML 元素 ID，然后在其前面加上`:`.

请注意，这一切都与包含无关。将所有代码放在一个页面中时，您会遇到完全相同的问题。

### 也可以看看：

*   [如何找出用于 ajax 更新/渲染的组件的客户端 ID？找不到从“bar”引用的表达式“foo”的组件](https://stackoverflow.com/questions/8634156/how-to-reference-components-in-jsf-ajax-cannot-find-component-with-identifier/8644762#8644762)

# ruby-on-rails - 如何还原迁移期间在回滚时设置的少数值

> ID：14438719
> 
> 赞同：0
> 
> 时间：2013-01-21T12:34:29.073
> 
> 标签：ruby-on-rails, rails-migrations

我们在迁移过程中为某一行设置了一些值，我们如何在回滚时处理这个问题。我想在 down 上设置空的 null 值

```
def up
f = Foo.where(:name => 'some').first
f.update_attributes(:val1 => 'val1', :val2 => 'val2');
end

def down
# What should we do here to revert the migration
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:16:46.930

您可以执行 rake db:rollback STEP=2。

您可以将 2 替换为您想要返回的任意数量的迁移。

你也可以试试这个：

```
def up
    f = Foo.where(:name => 'some').first
    f.update_attributes(:val1 => 'val1', :val2 => 'val2');
    end

    def down
    f = Foo.where(:name => 'some').first
    f.update_attributes(:val1 => nil, :val2 => nil);
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:22:00.723

```
rake db:migrate:down VERSION=version_number

def up
  f = Foo.where(:name => 'some').first
  f.update_attributes(:val1 => 'val1', :val2 => 'val2')
end

def down
  f = Foo.where(:name => 'some').first
  f.update_attributes(:val1 => nil, :val2 => nil) if f.present?
end 
```

# c# - 实现 IDataGridViewEditingCell 但也具有编辑控件的自定义 DataGridView 列？

> ID：14438731
> 
> 赞同：2
> 
> 时间：2013-01-21T12:35:18.263
> 
> 标签：c#, .net, winforms, datagridview

我即将开始开发自定义日历列。我设计了一个`IDataGridViewEditingCell`之前实现的列，它允许用户编辑内容，而单元格首先必须进入编辑模式（是一个弹出编辑框）。

对于我的日历列，如果用户单击将与单元格右侧对齐的日历图标，我希望拥有此功能，这将弹出一个不同的控件，因此单元格无需进入编辑模式，从而减少用户必须经过的点击次数。

但是，如果用户想要输入日期，我也希望用户能够自己输入单元格（因为打字员通常更快），在这种情况下，单元格将需要进入编辑模式，并给出使用适当的编辑控件。

有关此接口的 MSDN 文档说明如下：

> 此接口由诸如 DataGridViewCheckBoxCell 之类的类实现，这些类派生自 DataGridViewCell 并提供用于指定值的用户界面 (UI)，而无需承载编辑控件。无论单元格是否处于编辑模式，都会显示这种情况下的 UI。
> 
> 其他单元格类型（例如 DataGridViewButtonCell）提供 UI，但不存储用户指定的值。在这种情况下，单元格类型不实现 IDataGridViewEditingCell 或承载编辑控件。
> 
> 当单元格处于编辑模式时显示编辑控件的单元格类型（例如 DataGridViewTextBoxCell）不实现 IDataGridViewEditingCell，而是提供实现 IDataGridViewEditingControl 的伴随类。例如，DataGridViewTextBoxCell 提供了一个派生自 TextBox 控件并实现 IDataGridViewEditingControl 的 DataGridViewTextBoxEditingControl。在这种情况下，单元格 EditType 属性设置为表示编辑控件类型的 Type 对象。

对我来说，这意味着一个单元格不能实现这个接口*并*承载一个编辑控件。

有没有人有这种情况的经验，我有什么选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:16:28.210

我从这个文档中收集到的是，在实现时`IDataGridViewEditingCell`，单元格*是*编辑控件。要获得所需的功能，您必须创建一个 DataGridViewCalendarCell 和一个`DataGridViewCalendarEditingControl`由列中所有单元格共享的关联。您可能还需要制作一个`DataGridViewCalendarColumn`。

# macos - opendiff ( FileMerge ) 停止在 Mac OS X 上使用 git

> ID：14438732
> 
> 赞同：4
> 
> 时间：2013-01-21T12:35:22.230
> 
> 标签：macos, git, difftool

我在 Mac OS X 上使用 opendiff 和 git 作为 difftool，今天它刚刚停止工作。
它不会给出错误消息，它只是默认将差异转储到终端上。

我遵循了关于如何配置它的通用指南，但无济于事：

*   创建了一个可执行脚本：

    ```
    #!/bin/sh  
    /usr/bin/opendiff "$2" "$5" -merge "$1" 
    ```

*   为 .gitconfig 添加了选项：

    ```
    external = ~/git-diff-cmd.sh
    tool = opendiff 
    ```

但它不起作用。
实际上，FileMerge 之前自动识别并启动，甚至不用这个脚本和配置，只要做`git difftool -t opendiff {filename}`就行了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:40:48.403

尝试设置环境变量

```
export GIT_EXTERNAL_DIFF=<path to your script> 
```

# hibernate - 对象引用一个未保存的瞬态实例，在刷新之前保存瞬态实例：

> ID：14438733
> 
> 赞同：1
> 
> 时间：2013-01-21T12:35:24.253
> 
> 标签：hibernate

![表的关系](../Images/7b3d7e2a6c1557f494abea5c827b3da2.png)

上图显示了表之间的关系。

**AddressType**表 包含静态值，例如*mailing*、*home*、*work*等。

在**AddressTypeRel**模型类中，我有一个带有多对一注释的**AddressType对象**

AddressTypeRel.java

```
public class AddressTypeRel implements java.io.Serializable{
.......

private AddressType addressType=new AddressType();
.......

@ManyToOne()
@LazyCollection(LazyCollectionOption.FALSE)
@JoinColumn(name="typeId", insertable=false, updatable=false, nullable=false)
@NotFound(action = NotFoundAction.IGNORE)
public AddressType getAddressType() {
   return addressType;
}

public void setAddressType(AddressType addressType) {
   this.addressType = addressType;
}
......
} 
```

保存到**地址**表后，我还应该将地址和*addressId的**类型*（*邮寄/账单*）保存到**AddressTypeRel**但我无法保存。当我尝试保存时

 ***```
AddressTypeRel addressTypeRel=new AddressTypeRel();
addressTypeRel.setAddressId(i) //i=5 for example
addressTypeRel.setTypeId(j)    //j=4 for example
hibernatetemplate.save(addressTypeRel); 
```

发生的错误是：

> 对象引用未保存的瞬态实例 - 在刷新之前保存瞬态实例：com.sample.AddressType

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-09T11:53:16.233

您需要更改`@ManyToOne()`为，`@ManyToOne(cascade = CascadeType.ALL)`以便保存将尝试级联到 AddressType，然后像您`insertable=false, updatable=false`设置的那样忽略它`@JoinColumn`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-29T09:33:22.027

### 问题

实体`AddressTypeRel`将一个表列映射到两个 bean 属性：

1.  `int typeId`（这在问题中没有明确说明，但您可以从中推断出来`addressTypeRel.setTypeId(j) //j=4 for example`）
2.  `AddressType addressType`（如问题中明确描述的那样）

Hibernate 不允许两次映射同一个表列，除非您采取如下所述的必要步骤。

### 解决方案

这是两步过程，你只做了第一步。目标是使`AddressType addressType`（通过其 getter 映射`getAddressType()`）只读，**因为 Hibernate 仅在所有其他映射都是只读的情况下才允许多次映射一列**。

1.  `AddressTypeRel`建立和`AddressType`只读之间的关系：

    *   正如您已经将其映射为一样`insertable=false, updatable=false`，但这仅适用于关系而不是目标实体
2.  使目标实体只读，在我们的例子中是`AddressType`：

    *   只需标记它`@Transient`，此注释将使休眠状态忽略关系的其他实体，并且不会打扰您保存它

### 讨论

*   **我以前用过`insertable=false, updatable=false`，为什么现在出现这个问题？**因为在实体字段上具有读写映射更为常见，而在某些原始类型或非实体对象上具有只读映射。`int`在这种情况下，您在 entity上有读写映射和只读映射`AddressType`。当然，您不必`@Transient`对原始类型或非实体对象使用注释。
*   **为什么不`insertable=false, updatable=false`更聪明，并检测这些情况？**因为 Hibernate 将两个实体之间的关系视为三部分构造：*a）这个实体 b）目标实体 c）它们之间的关系*，所以使这个构造只读需要*b）*和*c）*只读，并且对于两者都有不同的工具来做到这一点（如解决方案中所述）。这很有用，因为您可以更好地控制，例如，您可能想要创建目标实体`@Transient`而不是关系`insertable=true, updatable=true`。***

# c# - 如何在处理 SqlTransaction 之前检查状态

> ID：14438736
> 
> 赞同：4
> 
> 时间：2013-01-21T12:35:28.293
> 
> 标签：c#, .net, ado.net

我有以下使用 SqlTransaction 的代码。我已经在 catch 中调用了 dispose 并最终阻塞了.. 但是在调用 Dispose() 之前我没有检查它是否已经被释放。我们如何在调用 Dispose() 之前检查 SqlTransaction 是否已经被释放？

我提到了[MSDN:SqlTransaction.Dispose Method](http://msdn.microsoft.com/en-us/library/aa326309%28v=vs.71%29.aspx)。但这不包括我的问题。

也参考[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.dispose(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.dispose(v=vs.100).aspx)

注意：我已经知道它`TransactionScope`比`SqlTransaction`. 但我试图了解 SqlTransaction 的处置。

**代码**

```
 using (SqlConnection connection = new SqlConnection(connectionString))
        {
            connection.Open();

            SqlTransaction transaction = null;

            try
            {
                transaction = connection.BeginTransaction();

                sessionID = GetSessionIDForAssociate(connection, empID, transaction);
                //Other code

                //Commit
                transaction.Commit();
            }
            catch
            {
                //Rollback
                if (transaction != null)
                {
                    transaction.Rollback();
                    transaction.Dispose();
                }

                //Throw exception
                throw;
            }
            finally
            {
                if (transaction != null)
                {
                    transaction.Dispose();
                }
            } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T12:42:35.227

> 我们如何在调用 Dispose() 之前检查 SqlTransaction 是否已经被释放？

你不必。调用 dispose 两次不会给您带来任何问题。

[处置 - MSDN](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)

> 如果多次调用对象的 Dispose 方法，则对象必须忽略第一次调用之后的所有调用。如果多次调用其 Dispose 方法，则该对象不得引发异常。当资源已被释放时，除 Dispose 之外的实例方法可能会引发 ObjectDisposedException。

但是，如果您只想调用一次 Dispose，那么您可以使用布尔标志来设置事务何时被处理，或者您可以将其设置为 null。或者删除对 dispose 的调用，`catch`因为`finally`block 总是会被调用。

由于 SqlTransaction 实现了[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，**因此如果将它与 using block 一起使用会更好**。就像是：

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();

    using (SqlTransaction transaction = connection.BeginTransaction())
    {
        try
        {
            sessionID = GetSessionIDForAssociate(connection, empID, transaction);
            //Other code

            //Commit
            transaction.Commit();
        }
        catch
        {
            //Rollback
            if (transaction != null)
            {
                transaction.Rollback();
            }

            //Throw exception
            throw;
        }
    }
} 
```

由于使用块的行为就像`try/finally`块一样，它将确保在事务完成后处理事务（即使发生异常）。所以你不必手动调用`Dispose`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:38:33.373

在调用 dispose 后添加`transaction=null`，然后您现有的测试将起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T12:40:36.087

为什么要检查它是否已被处置？`Dispose`您可以通过简单地忽略块中的调用来避免调用两次`catch`：

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();

    SqlTransaction transaction = null;

    try
    {
        transaction = connection.BeginTransaction();

        sessionID = GetSessionIDForAssociate(connection, empID, transaction);
        //Other code

        //Commit
        transaction.Commit();
    }
    catch
    {
        //Rollback
        if (transaction != null)
        {
            // No need to dispose here - finally is always called
            transaction.Rollback();
        }

        //Throw exception
        throw;
    }
    finally
    {
        if (transaction != null)
        {
            // Always called, so no need to dispose elsewhere.
            transaction.Dispose();
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T12:41:51.363

`.Dispose()`从 catch 块中删除调用。finally 总是被执行，所以这样你会尝试两次来处理事务。

它没有回答“我怎么知道它是否已经被处理”，但可能会解决您的问题。

# tridion - 在开发环境之间传输 Tridion 模式时可能需要进行哪些修改

> ID：14438739
> 
> 赞同：6
> 
> 时间：2013-01-21T12:35:34.107
> 
> 标签：tridion, tridion-2011

我想在外部管理系统（在本例中为 GIT）中维护我的 Tridion 模式定义。为此，我通过 webdav 访问 Tridion 内容管理器。通常，当我这样做时，指向其他系统项的链接会转换为 webdav url。

当我引用一个类别时，这变得更加困难，因为命名空间 URI 包含对出版物的嵌入式引用。这是我的一个模式的 webdav 视图的摘录：

```
<xsd:import namespace="tcm:0-3-1/Categories.xsd" 
            schemaLocation="/webdav/01%20Definitions/Categories.xsd"/> 
```

如果系统之间的发布 ID 不同，这将是一个问题。我的第一个想法是看到命名空间 URI 原则上是不透明的，我可以用我自己的系统中立值替换它。不幸的是，内容管理器似乎解析命名空间 URI 以确定模式位置，如果它不将字符串的第一部分识别为 URI，则保存失败。

有没有办法通过以其他方式编辑架构来实现我的目标？有没有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T15:25:45.697

我不知道您是否可以使用客户端 GIT 钩子脚本做任何事情，但否则事件处理程序可能会做某事。当您尝试保存架构时，您可以将我想要的出版物与拥有的出版物相匹配。

不是直接回答，而是建议。也许它能让你走得更远。

# javascript - 根据特定的字符序列将文本分组

> ID：14438742
> 
> 赞同：1
> 
> 时间：2013-01-21T12:35:38.240
> 
> 标签：javascript, regex

我想将文本分成特殊字符匹配的组。

例如，下面的文本应该分成三个部分，在每个`m=`匹配项上拆分：

```
v=0 o=NNMAS 8571 287 IN IP4
t=1358416438 0
m=audio 43538 RTP/AVP 0 8 18 96 97
c=IN IP4
a=sendrecv
m=audio 43538 RTP/AVP 0 8 18 96 97
c=IN IP4 
```

应该成为

1：

```
v=0 o=NNMAS 8571 287 IN IP4
t=1358416438 0 
```

2：

```
m=audio 43538 RTP/AVP 0 8 18 96 97
c=IN IP4
a=sendrecv 
```

3：

```
m=audio 43538 RTP/AVP 0 8 18 96 97
c=IN IP4 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:38:56.470

最简单的方法是在 regex 上拆分`(?m)^(?=m=)`。

**解释：**

```
(?m)  # Turn on multiline mode (so the next line works correctly).
^     # Assert position at the start of the line.
(?=   # Assert that the following text can be matched at the current position:
 m=   #  m=
)     # End of lookahead assertion. 
```

您需要告诉我们您正在使用哪个正则表达式引擎，以便我们可以提供工作代码示例。

在 JavaScript 中，模式修饰符需要在正则表达式之外，所以你得到：

```
result = subject.split(/^(?=m=)/m); 
```

# sql - 更新 sql 表中的特定行

> ID：14438752
> 
> 赞同：4
> 
> 时间：2013-01-21T12:36:03.867
> 
> 标签：sql, sql-server, tsql, sql-server-2005

我有以下 SELECT 语句。

```
SELECT     AETID, DSRID, FYEID, BASICRATE, EURORATE, 
  COMID, BRAID, CURID, CURIDCONV, ENTRYDATE, EVNUMBER, 
  ORIGIN, IEEID, RELDOCNUM, GJOID, JOURNALNUM,
  JUSTIFICATION, KEPYOAMOUNT, KEPYONUM, STATUS, 
  UPDSTATUS, TOTALCB, IDLINKED, CREUSERID, CREUSERDATE, 
  UPDUSERID, UPDUSERDATE, ACEIDCROSSENTRY, ACEIDCROSSEDENTRY, 
  ISCROSS, ISCROSSED, ACEIDCANCEL, ACEIDPRIMARY, CCEID
FROM         EliteUser.ACE
WHERE     (JOURNALNUM > 1193) 
  AND (JOURNALNUM < 2387) 
```

我想要做的是更新特定的行，以便`journalnum = 1194`更新到 1，`journalnum = 1195`更新到 2 等

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T12:42:59.943

哪一列是要输入的新值？假设您要更新 JournalNum 列，使其从 1 开始：

```
UPDATE
    EliteUser.ACE
SET
    JournalNum = JournalNum - 1193
WHERE
    JournalNum > 1193
AND JournalNum < 2387 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T12:37:54.043

```
UPDATE EliteUser.ACE
SET journalnum = journalnum - 1193
WHERE  JOURNALNUM > 1194 
   AND JOURNALNUM < 2387; 
```

**或者：**

```
UPDATE e
SET e.JOURNALNUM = t.rownum
FROM EliteUser.ACE e
INNER JOIN
(
  SELECT JOURNALNUM, ROW_NUMBER() OVER(ORDER BY JOURNALNUM ASC) rownum
  FROM EliteUser.ACE
  WHERE  JOURNALNUM > 1194 
    AND JOURNALNUM < 2387
) t ON e.JOURNALNUM = t.JOURNALNUM 
```

# joomla - 多类别或 Joomla 中的什么？

> ID：14438753
> 
> 赞同：1
> 
> 时间：2013-01-21T12:36:06.727
> 
> 标签：joomla, joomla2.5, categories

现在我一直在计划开发一个流量很大的大型体育网站。

站点将是基于内容的站点。

我想在这个网站上使用 Joomla。但是我有一个问题 Joomla 不允许多类别的文章，因为它的性质。（Joomla 的数据库架构旨在将一篇文章与一个类别相关联）。

但我需要多个类别。因为我有球队和联赛/杯赛。我认为，球队是一个类别，但联赛/杯赛也是一个类别。一支球队可以同时参加联赛和杯赛。所以对于 Joomla，它不是可以建立这样的结构。

我用谷歌搜索了 Joomla 的多类别。有一些组件有望成功解决这个问题。但是当我看到他们的代码时，他们使用关系表将一篇文章与多个类别相关联。好的，它适用于他们的组件但核心模块不知道关系表。

我还检查了一些 CCK（K2、seblod 和钴）。但我不确定他们能否帮助我。而且我也怀疑 CCKs 的表现。正如我上面所说的，网站的流量会很大。

我想了解您的想法，为此可以做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:32:11.050

**希望在 Joomla 3.1（3 月）中会有标记来解决这个问题，**但如果你愿意，你可以现在[查看该功能的代码，](http://joomlacode.org/gf/project/joomla/tracker/?action=TrackerItemEdit&tracker_item_id=29855)尽管它确实需要对核心文件进行一些更改并且仍在开发中（注意它没有设置准备审查）。

取决于交付可能可行的站点的时间范围。唯一的事情是您可能想要为布局进行自定义覆盖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T11:44:46.903

当然，CCK 的工作速度会比原生解决方案慢。但是，如果您如此关心速度，我什至不会从 Joomla 开始。

但我确信 Cobalt 8 是完美优化的。如果有快速工作的 CCK，那就是钴。他们在优化方面投入了大量资金。在 1.5 秒内包含 50 000 条文章和 3 个关系字段的部分。与其他人相比，这非常令人印象深刻。然而他们总是优化它。Cobalt 客户抱怨运行缓慢的案例数不胜数。这些已在下一次更新中修复（并且他们每周四发布更新）。

Cobalt 的另一件事是 Multilevelselect 字段可以完全替换类别。您可以多次设置它，您可以添加多个字段。在这种情况下，这通常可以作为解决方案。因为这个字段有过滤器。因此，您可以搜索或过滤。

# bios - bios如何以退出模式启动？

> ID：14438757
> 
> 赞同：0
> 
> 时间：2013-01-21T12:36:25.393
> 
> 标签：bios, option-rom

我有一个选项 rom，但除非我按 esc 键并且 bios 调用选项 rom，否则 bios 不会启动。我想知道bios如何在不按esc键的情况下调用选项rom？它会跳转到同一个入口点吗？特别是当我只能看到启动画面时，选项 rom 的输出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T05:24:17.910

成功！这是我的 misc.bin 补丁。我反汇编了 misc.bin 并永久激活了 esc 键序列，因此它绕过了加载错误。

```
seg000:016B loc_16B: ; 代码外部参考：seg000:00BBj
seg000:016B 调用 sub_CB0
seg000:016E mov ds:byte_5A24, 0
seg000:0173 推 bx
seg000:0174 调用 sub_DFE
seg000:0177 流行 bx
seg000:0178 无
seg000:0179 无
seg000:017A 调用 sub_26C
seg000:017D 调用 sub_1F0
seg000:0180 mov cx, 0BB8h
段000:0183
seg000:0183 loc_183: ; 代码外部参考：seg000:019Cj
seg000:0183 mov 啊，1
seg000:0185 int 16h ; 键盘 - 检查缓冲区，不要清除
seg000:0185 ; 返回： ZF 清除缓冲区中的字符
seg000:0185 ; AH = 扫描码，AL = 字符
seg000:0185 ; 如果缓冲区中没有字符，则设置 ZF
seg000:0187 jz 短 loc_199
seg000:0189 异或啊，啊
seg000:018B int 16h ; 键盘 - 从缓冲区读取字符，如果为空则等待
seg000:018B ; 返回：AH = 扫码，AL = 字符
seg000:018D cmp 斧头，2106h
seg000:0190 jz 短 loc_1A0
seg000:0192 cmp 斧头，1519h
seg000:0195 jz 短 loc_1A0
seg000:0197 jmp 短 loc_1BD
seg000:0199 ; -------------------------------------------------- -------------------------
段000:0199
seg000:0199 loc_199: ; 代码外部参考：seg000:0187j
seg000:0199 调用 sub_2318
seg000:019C 循环 loc_183
seg000:019E jmp 短 loc_1BD
seg000:01A0 ; -------------------------------------------------- -------------------------
seg000:01A0
seg000:01A0 loc_1A0: ; 代码外部参考：seg000:0190j
seg000:01A0 ; seg000:0195j
seg000:01A0 移动 ds:byte_5A5B, 1
seg000:01A5 移动 ds:byte_573C, 0
seg000:01AA 移动 ds:byte_5A22, 0
seg000:01AF 调用 sub_27E
seg000:01B2 移动 ds:byte_5A21, 3
seg000:01B7 移动 DX，8
seg000:01BA jmp loc_2ED
seg000:01BD ; -------------------------------------------------- -------------------------
seg000:01BD
seg000:01BD loc_1BD: ; 代码外部参考：seg000:0197j
seg000:01BD ; seg000:019Ej
seg000:01BD 调用 sub_F67
seg000:01C0 引用

```

# sql-server-2008 - 通过 RODBC 包从 SQL 读取视图

> ID：14438759
> 
> 赞同：1
> 
> 时间：2013-01-21T12:36:31.797
> 
> 标签：sql-server-2008, r, view, rodbc

通过 RODBC 函数*odbcConnect*，我们将 R 与 SQL Express 2008 数据库连接起来。

*使用sqlFetch*函数在 R 中导入表非常容易

```
 sqlFetch(channel, sqtable, ..., colnames = FALSE, rownames = TRUE) 
```

如果我们想要读取和导入**SQL 视图**，我们该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:40:27.213

来自[RODBC PDF](http://cran.r-project.org/web/packages/RODBC/RODBC.pdf)：

> 请注意，“表”包括 DBMS 提供的任何类似表的对象，特别是视图和系统表

因此，视图确实被系统视为表。

# java - 旋转后的 Tiff 文件失去颜色

> ID：14438765
> 
> 赞同：0
> 
> 时间：2013-01-21T12:36:51.610
> 
> 标签：java, image, tiff, jai

我的任务是将 tiff 图像旋转 90°。我找到了一些如何通过 JAI 执行此操作的示例。所以我写了一段代码，形成了一个我发现的例子：

```
BufferedImage im = ImageIO.read(new FileInputStream(rasterFilePath));
PlanarImage pi = PlanarImage.wrapRenderedImage(im);
BufferedImage bi = pi.getAsBufferedImage();
AffineTransform at = new AffineTransform();
at.translate(-(im.getWidth() - im.getHeight()) / 2, (im.getWidth() - im.getHeight()) / 2);
at.rotate(Math.toRadians(90), bi.getWidth() / 2, bi.getHeight() / 2);
AffineTransformOp opRotated = new AffineTransformOp(at,AffineTransformOp.TYPE_BILINEAR);
im = opRotated.filter(bi, null);
ImageIO.write(im, "TIFF", new FileOutputStream(rasterFilePath)); 
```

现在，一个问题是我旋转了一个图像，但我失去了颜色。我得到新的旋转图像，其中颜色为灰度。我使用gdal工具（gdalinfo）检查了操作前后图像的差异，我得到：

前：

```
Driver: GTiff/GeoTIFF
Files: C:\test.tif
Size is 6000, 7000
Coordinate System is `'
Metadata:
  TIFFTAG_IMAGEDESCRIPTION=image description
  TIFFTAG_XRESOLUTION=1000
  TIFFTAG_YRESOLUTION=1000
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 7000.0)
Upper Right ( 6000.0,    0.0)
Lower Right ( 6000.0, 7000.0)
Center      ( 3000.0, 3500.0)
Band 1 Block=6000x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 0,0,0,255
    1: 0,0,51,255
    2: 0,0,102,255
    3: 0,0,153,255
    4: 0,0,204,255
    5: 0,0,255,255
    6: 0,51,0,255
    7: 0,51,51,255
    8: 0,51,102,255
    .
    .
    .
    254: 0,0,0,255
    255: 0,0,0,255
Band 2 Block=6000x1 Type=Byte, ColorInterp=Undefined 
```

后：

```
Driver: GTiff/GeoTIFF
Files: C:\test.tif
Size is 7000, 6000
Coordinate System is `'
Metadata:
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 6000.0)
Upper Right ( 7000.0,    0.0)
Lower Right ( 7000.0, 6000.0)
Center      ( 3500.0, 3000.0)
Band 1 Block=7000x8 Type=Byte, ColorInterp=Gray
Band 2 Block=7000x8 Type=Byte, ColorInterp=Undefined 
```

有谁知道我在这段代码中缺少什么？

# javascript - 更改标签的颜色

> ID：14438770
> 
> 赞同：0
> 
> 时间：2013-01-21T12:37:04.130
> 
> 标签：javascript, html, css, xhtml

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T12:37:57.490

因为 `getElementsByTagName("b")`返回一个元素的集合，你需要得到第一个：

```
var a = document.getElementsByTagName("b")[0]; 
```

注意括号之间的索引`[0]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:45:17.083

更冗长的方式，但希望更清楚。去你所有的`b`元素并改变它们的颜色：

```
 var boldTags = document.getElementsByTagName ("b");

  console.log("There are " + boldTags.length + " bold elements");
  for (var i = 0; i < boldTags.length; i++) {
      var boldTag = boldTags[i]; 
      boldTag.style.color = "#00FF00";
      console.log("Element indexed  " + (i + 1) + " has color of \n" + boldTag.style.color);
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:44:22.230

如果您的页面中有多个`<b>`标签，那么您可以使用以下代码更改所有粗体文本的颜色。

```
$("b").attr("style","color:#00FF00;") 
```

# php - JSON 解析 utf-8 中的单个 qoutes 错误

> ID：14438771
> 
> 赞同：0
> 
> 时间：2013-01-21T12:37:07.280
> 
> 标签：php, utf-8, json

我一直在为这个发疯：

我有这个代码：

```
var names = JSON.parse('<?php echo json_encode($names ); ?>'); 
```

其中`$names`包含 utf-8 内容的数组在哪里。

哪个工作正常，但是当包含`$names`数组时`'`我开始收到`unexpected token/charachter`错误。

我尝试了各种不同的东西，例如：

```
var names = JSON.parse('<?php echo 
json_encode(str_replace("'","\'",$names),JSON_HEX_APOS  | JSON_HEX_QUOT ); ?>'); 
```

或者

```
var names = JSON.parse('<?php
 echo json_encode($names,JSON_HEX_APOS  | JSON_HEX_QUOT ); ?>'); 
```

并且没有帮助。我得到`Uncaught SyntaxError: Unexpected token`错误。

```
var names = JSON.parse('{"1":{"136":{"0":"135 \u05dc\u05dc\u05d0 
 \u05d4\u05d2\u05d1\u05dc\u05d4"},"75":{"0":"\u05d1\u05d5\u05e0\u05d5\u05e1 75"},"199":
  {"0":"\u05d1\u05d5\u05e0\u05d5\u05e1 199"},"5":{"0":"card bonus 5"},"30":
  {"0":"\u05e1\u05dc\u05e7\u05d5\u05dd \u05d4\u05d5\u05d3\u05e2\u05d5\u05ea"},"40":{"0":"40
  \u05e2\u05e8\u05d1\u05d9\u05ea"}],"37":[{"0":"\u05d6\u05e8\u05d5 
 \u05d0\u05e0\u05d2\u05dc\u05d9\u05ea"}],"38":[{"0":"\u05d6\u05e8\u05d5 
 \u05e8\u05d5\u05e1\u05d9\u05ea"}],"39":
 [{"0":"\u05d6\u05e8\u05d5 \u05d8\u05d0\u05d9"}]}'); 
```

这是一个很长的字符串，我只是将其切成两半，因此语法可能看起来不正确，但总体思路。

我怎样才能让它解析数组？

我正在使用 PHP 5.3，所以我无法尝试`JSON_UNESCAPED_SLASHES`或者`JSON_UNESCAPED_UNICODE`它是否相关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:38:38.813

有效的 JSON 是有效的 JavaScript；你可以简单地写：

```
var names = <?php echo json_encode($names ); ?>; 
```

至于 UTF-8 字符，这里是一个测试：

```
<script>
alert(<?php echo json_encode("\xE2\x82\xAC"); ?>); // should alert €
</script> 
```

# twitter - tmhOAuth 库的 Twitter OAuth 错误

> ID：14438773
> 
> 赞同：0
> 
> 时间：2013-01-21T12:37:10.020
> 
> 标签：twitter, twitter-oauth

我有一些代码：

```
<?php

require '../tmhOAuth.php';
require '../tmhUtilities.php';

$tmhOAuth = new tmhOAuth(array(
  'consumer_key' => 'THE_CONSUMER_KEY',
  'consumer_secret' => 'THE_CONSUMER_SECRET',
  'user_token' => 'THE_ACCESS_TOKEN',
  'user_secret' => 'THE_ACCESS_TOKEN_SECRET',
));

$response = $tmhOAuth->request('POST', $tmhOAuth->url('1.1/statuses/update'), array(
  'status' => 'Test message. Lorem ipsum.'
));

if ($response != 200) {
    //Do something if the request was unsuccessful
    echo 'There was an error posting the message.<pre>';
    print_r($tmhOAuth);
    echo '</pre>';
}
?> 
```

结果：

```
There was an error posting the message.
tmhOAuth Object
(
    [response] => Array
        (
            [raw] => HTTP/1.0 200 Connection established

            [headers] => Array
                (
                    [HTTP/1.0 200 Connection established] => 
                    [] => 
                )

            [code] => 0
            [response] => 
            [info] => Array
                (
                    [url] => https://api.twitter.com/1.1/statuses/update.json
                    [content_type] => 
                    [http_code] => 0
                    [header_size] => 0
                    [request_size] => 444
                    [filetime] => -1
                    [ssl_verify_result] => 0
                    [redirect_count] => 0
                    [total_time] => 2.279306
                    [namelookup_time] => 7.3E-5
                    [connect_time] => 0.001006
                    [pretransfer_time] => 0
                    [size_upload] => 0
                    [size_download] => 0
                    [speed_download] => 0
                    [speed_upload] => 0
                    [download_content_length] => -1
                    [upload_content_length] => -1
                    [starttransfer_time] => 0
                    [redirect_time] => 0
                    [certinfo] => Array
                        (
                        )

                    [primary_ip] => 172.30.10.17
                    [primary_port] => 3128
                    [local_ip] => 172.30.37.89
                    [local_port] => 59260
                    [redirect_url] => 
                    [request_header] => CONNECT api.twitter.com:443 HTTP/1.1
Host: api.twitter.com:443
User-Agent: tmhOAuth 0.7.2+SSL - //github.com/themattharris/tmhOAuth
Proxy-Connection: Keep-Alive
Authorization: OAuth oauth_consumer_key="THE_CONSUMER_KEY", oauth_nonce="123123", oauth_signature="123123", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1358771273", oauth_token="THE_ACCESS_TOKEN", oauth_version="1.0"

                )

            [error] => error setting certificate verify locations:
                      CAfile: /home/my/www/test/cacert.pem
                      CApath: /home/my/www/test
            [errno] => 77
        ) 
```

我不知道如何解决它：

```
 [error] => error setting certificate verify locations:
                  CAfile: /home/my/www/test/cacert.pem
                  CApath: /home/my/www/test
        [errno] => 77 
```

我使用 tmhOAuth 库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:54:19.587

您是否将应用程序设置设置为“读取和写入”，而不仅仅是“读取”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T15:25:54.157

我有同样的问题。我认为 OpenSsl 需要安装在您的 php 服务器上。

在配置构造函数中试试这个

'curl_ssl_verifypeer' => 假，

# twitter-bootstrap - 给 yii 引导组件一个类

> ID：14438775
> 
> 赞同：1
> 
> 时间：2013-01-21T12:37:12.250
> 
> 标签：twitter-bootstrap, yii

如何向此示例添加类：

```
<?php
$this->widget('bootstrap.widgets.TbTabs', array(
    'type'=>'tabs', // 'tabs' or 'pills'
    'tabs'=>array(
        array('label'=>'Krant', 'content'=>'Home Content', 'active'=>true),
        array('label'=>'Postcode', 'content'=>'Postal'), 

    ),
));
?> 
```

我找不到任何这样做的财产，这是打算这样做还是不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:39:46.767

默认情况下 Yii 约定，你可以这样尝试：

```
<?php
$this->widget('bootstrap.widgets.TbTabs', array(
    'type'=>'tabs', // 'tabs' or 'pills'
    'htmlOptions' => array('class' => 'yourClassName'),
    'tabs'=>array(
        array('label'=>'Krant', 'content'=>'Home Content', 'active'=>true, 'htmlOptions' => array('class' => 'yourClassNameForThisChild')),
        array('label'=>'Postcode', 'content'=>'Postal'), 

    ),
));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T11:17:47.663

您可以按照以下方式进行操作

```
<?php
  $this->widget('bootstrap.widgets.TbTabs', array(
    'type'=>'tabs', // 'tabs' or 'pills'
    'tabs'=>array(
       array('label'=>'Krant', 'content'=>'Home Content', 'active'=>true),
       array('label'=>'Postcode', 'content'=>'Postal'), 
     ),
     'htmlOptions' => array('class' => 'class_name')
  ));
?> 
```

# twitter-bootstrap - Google Adsense 出现西班牙标志？

> ID：14438783
> 
> 赞同：0
> 
> 时间：2013-01-21T12:37:25.573
> 
> 标签：twitter-bootstrap, adsense, google-ads-api

我目前正在设计我的另一个网站并且有一个非常奇怪的错误，它不需要修复，但我对它发生的原因非常感兴趣。

我以与往常一样的方式创建了一个 Adsense 框，它可以工作，但是 Google 在此设计上放置了 Adchoices 徽标，它以（我认为是）西班牙语显示（点击它会重定向到 Google 的西班牙语 adsense 信息页面。广告显示为英文。

我知道不同的一件事是我正在使用引导程序设计它，但我已将 lang='en' 放在 HTML 标记中。

那么有人对为什么会发生这种情况有任何想法吗？

我正在开发的网站是[http://pideas.rastrack.co.uk](http://pideas.rastrack.co.uk/)

谢谢 - 瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T19:09:44.577

你有西班牙的 AdSense 帐户吗？我有一两次类似的问题，它以不同的语言出现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T22:26:32.437

一旦我把它放在正确的域上，就以某种方式解决了。

# unicode - Unicode 中可能的组合字符序列

> ID：14438785
> 
> 赞同：2
> 
> 时间：2013-01-21T12:37:27.460
> 
> 标签：unicode

有些字符不包含在 Unicode 中（即重音西里尔字母），但可以使用组合序列创建。据我了解，可能的组合字符序列是在布局引擎和/或使用的字体中定义的。我对吗？那么，如何获得所有可能的组合序列呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T14:35:35.093

您是正确的，因为布局引擎和字体的组合尝试创建任意组合序列可能会失败。此问题的解决方案超出了 Unicode 标准的范围。

从[Unicode 6.2](http://www.unicode.org/versions/Unicode6.2.0/)[第 2](http://www.unicode.org/versions/Unicode6.2.0/ch02.pdf)章：

> 所有组合字符都可以应用于任何基本字符，并且原则上可以与任何脚本一起使用。与其他字符一样，将组合字符分配给一个或另一个块仅标识其主要用途；它并不打算定义或限制它可能适用的字符范围。*在 Unicode 标准中，所有字符代码序列都是允许的。*
> 
> 这并不要求实现同样好地支持所有可能的组合。因此，虽然允许将阿拉伯注释标记应用于汉字符或天城文辅音，但在渲染中不太可能得到很好的支持或没有多大意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T14:43:38.917

这取决于您的特定布局引擎，是否以及如何查询某个 Unicode 字符序列是否可显示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-22T08:37:24.463

Unicode 中可能的组合字符序列集实际上是无限的（尽管只是可枚举的无限），因为组合字符可能出现在任何字符之后，包括组合字符。有时你会看到人们在 StackOverflow 中玩这个，使用一个字符，后面是一长串组合字符。

所以这个列表将是无限的。它可以自动生成，但用处不大。

重音西里尔字符包含在 Unicode 中，而不是预先组合的字符。在 Unicode 中，重音西里尔字符只是两个连续的 Unicode 代码点。

呈现的质量取决于所使用的字体和渲染引擎。通常，新软件可以很好地处理像 я́（西里尔字母 ya 和锐音）这样的简单情况，但旧软件可能具有简单的渲染例程，有时会错位变音符号。质量渲染要求软件访问有关基本字符尺寸的信息并相应地放置变音符号。

重要的是，变音符号取自与基本字符相同的字体。“跨字体”组合往往会产生糟糕或糟糕的结果。所以你应该首先检查哪些字体包含组合锐角U+0301，然后在剩余的候选字体中选择字体。

Unicode 有“<a href="http://www.unicode.org/reports/tr34/" rel="nofollow">命名字符序列”的概念。通俗地说，当组合不作为预先组合的字符存在时，它可以用来给一个序列（如字母后跟组合标记）赋予一些身份和“特征”。给出的动机是：“这种 Unicode 代码点序列的通用符号通常在话语文本中很有用。更正式地说，其他标准可能需要引用 Unicode 中由字符序列表示的实体。映射表可能会将其他标准中的单个字符映射到 Unicode 字符序列，并且字体或键盘的曲目覆盖列表可能需要引用不对应于单个 Unicode 代码点的实体。” 然而，[注册表](http://www.unicode.org/Public/UNIDATA/NamedSequences.txt)不包含任何以西里尔字符为碱基的序列。

# c# - C# - 传递函数以派生对象属性作为参数

> ID：14438786
> 
> 赞同：1
> 
> 时间：2013-01-21T12:37:35.377
> 
> 标签：c#, linq, generics

我想通过指定我在函数参数中搜索的 Foo 的属性来使这个函数更通用。目前我必须为 Foo 的每个属性都有一个函数，而不仅仅是一个通用函数。

```
private Func<Foo, bool> ByName(bool _exclude, string[] _searchTerms)
{
    if (_exclude)
    {
        return x => !_searchTerms.Contains( x.Name.Replace(" ", "").ToLower() );
    }

    return x => _searchTerms.Contains( x.Name.Replace(" ", "").ToLower() );
} 
```

是否有可能使这个函数更通用以便能够传递 Foo 的搜索属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:41:57.980

您可以轻松添加`Func<Foo, string>`：

```
private Func<Foo, bool> By(Func<Foo, string> property,
                           bool exclude, string[] searchTerms)
{
    if (exclude)
    {
        return x => !searchTerms.Contains( property(x).Replace(" ", "").ToLower() );
    }

    return x => searchTerms.Contains( property(x).Replace(" ", "").ToLower() );
} 
```

你会这样称呼它：

```
By(x => x.Name, ...); 
```

请注意，此方法不是通用的。它只支持类型的属性`string`，因为你的搜索方法使用`Replace`的属性和你`searchTerms`也是`strings`。

BTW：请注意我命名参数的方式。.NET 命名约定不使用下划线作为参数。

# android - Android - 未初始化 SharedPreferences 时出现 NullPointerException

> ID：14438789
> 
> 赞同：0
> 
> 时间：2013-01-21T12:37:47.597
> 
> 标签：android, nullpointerexception, initialization, sharedpreferences

我有一些设置需要在应用程序启动时检索。我首先设计了我的设置页面，保存了设置，然后在主要活动中添加了设置检索代码。该应用程序运行良好。

但是如果我清除数据或进行全新安装，它会导致 NullPointerException，我相信这是因为`shared_prefs/settings.xml`根本不存在。

```
SharedPreferences mSettings;
private String mUsername;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mSettings = getSharedPreferences("settings", 0);
    mUsername = mSettings.getString("username", null);

    // this results a NullPointerException
    // but it'll be fine the next time app starts with the fix below
    //
    // Toast.makeText(this, mUsername, Toast.LENGTH_LONG);

    // fix: manually initializing prefs
    if(mUsername == null) {
        SharedPreferences.Editor editor = mSettings.edit();
        editor.putString("username", "Android");
        editor.commit();
        mUsername = "Android";
    }
} 
```

修复解决了这个问题。但是，我还没有看到人们像我一样进行 pref 初始化。

所以我想知道这是否是初始化preferecnes的正确方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:48:50.947

为什么不使用“Android”作为默认值？

```
mUsername = mSettings.getString("username", "Android"); 
```

# facebook - Facebook 点赞数不一致

> ID：14438790
> 
> 赞同：2
> 
> 时间：2013-01-21T12:37:48.270
> 
> 标签：facebook, facebook-like, facebook-opengraph

我刚开始在我的网站上实现 Facebook 点赞。我通过添加 javascript 和开放图形元标记快速设置它。到目前为止它工作正常，但我遇到了一个问题。

在此页面（正确的 URL）上，Facebook 喜欢的数量正确显示（7 个喜欢）：

[http://www.quoteso.me/quotes/150375](http://www.quoteso.me/quotes/150375)

但是，当我进入我的 Facebook 帐户并单击喜欢的项目（Michelle 喜欢“如果...时不会发生变化”）返回页面时，URL 变成了这样长的混乱：

[http://www.quoteso.me/quotes/150375?fb_action_ids=3916984578168&fb_action_types=og.likes&fb_source=other_multiline&action_object_map=%7B%223916984578168%22%3A435713013167457%7D&action_type_map=%7B%223916984578168%22%3A%22og.likes%22% 7D&action_ref_map=%5B%5D](http://www.quoteso.me/quotes/150375?fb_action_ids=3916984578168&fb_action_types=og.likes&fb_source=other_multiline&action_object_map=%7B%223916984578168%22%3A435713013167457%7D&action_type_map=%7B%223916984578168%22%3A%22og.likes%22%7D&action_ref_map=%5B%5D)

并且喜欢的数量会发生变化（1 个喜欢）。

不幸的是，我根本不熟悉 Facebook 开放图。有谁知道为什么会这样？我将如何解决它？

非常感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:15:24.130

附加参数用于分析 ( [https://www.facebook.com/insights/](https://www.facebook.com/insights/) )，例如跟踪用户从 Facebook 的哪个区域点击。

`fb_source=other_multiline`

> 当用户通过开放图形多线故事被带到您的应用程序时，可以找到。目前，这个 fb_source 参数可以在时间线、股票代码和新闻源的故事中找到。

![other_multiline](../Images/29b127b825d0c1093d269951efd7ca46.png)

所以在你的情况下（我相信）7个喜欢来自直接，1个来自Facebook Graph Story

如果您愿意，可以在内部处理数据，您甚至可以根据需要重定向，但没有必要。

只要确保你改变这个

```
<meta property="og:url" content="http://www.quoteso.me/quotes/150375?fb_action_ids=3916984578168&amp;fb_action_types=og.likes&amp;fb_source=other_multiline&amp;action_object_map=%7B%223916984578168%22%3A435713013167457%7D&amp;action_type_map=%7B%223916984578168%22%3A%22og.likes%22%7D&amp;action_ref_map=%5B%5D" /> 
```

到规范的，这将是

```
<meta property="og:url" content="http://www.quoteso.me/quotes/150375" /> 
```

`href`你在这里明确定义

```
 <div class="fb-like inline-block" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div> 
```

所以它不会使用所有参数抓取当前页面

*   [http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)
*   [https://developers.facebook.com/docs/fb_source/](https://developers.facebook.com/docs/fb_source/)

# c++ - Windows 精确计时：CreateTimerQueueTimer 或 system_clock::now() 中的错误？

> ID：14438798
> 
> 赞同：2
> 
> 时间：2013-01-21T12:38:04.700
> 
> 标签：c++, winapi, c++11, visual-studio-2012, chrono

我正在努力实现 +/- ms 的计时精度。我希望线程之间的时间为 10 毫秒，但是当我测量时间时，我得到的结果接近 15 毫秒。

我试图了解问题是由于我测量时间的方式引起的，还是由于我测量时间准确而​​导致的延迟 `CreateTimerQueueTimer`

我的代码看起来像

```
#include "stdafx.h"
#include <iostream>
#include <Windows.h>
#include <chrono>
#include <ctime>
using namespace std;
int current;
long long* toFill;
void talk()
    {
    chrono::time_point<chrono::system_clock> tp = \
        chrono::system_clock::now();
    toFill[current++]=chrono::duration_cast<chrono::milliseconds>(tp.time_since_epoch()).count() ;
    }

int _tmain(int argc, _TCHAR* argv[])
    {
    HANDLE hTimer;
    current = 0;
    toFill = new long long[1000];
    CreateTimerQueueTimer(&hTimer,NULL, 
        (WAITORTIMERCALLBACK)talk,NULL,
        0,10,0);
    _sleep(3000);
    DeleteTimerQueueTimer(NULL,hTimer,NULL);
    for (int i = 1;i<current;i++)
        {
        cout << i << " : " << toFill[i]-toFill[i-1]<< endl;
        }
    return 0;
    } 
```

输出看起来像

```
...
161 : 16 <-- Should be 10
162 : 15
163 : 16
164 : 16
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:04:55.210

Windows 中计时器和实时时钟的准确性受到时钟滴答中断率的限制。默认情况下每秒重复 64 次，1/64 秒 = 15.625 毫秒。就像你看到的一样。

提高该速率实际上是可能的，在程序开始时调用[timeBeginPeriod(10)](http://msdn.microsoft.com/en-us/library/dd757624%28VS.85%29.aspx)以获得 10 毫秒的精度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-28T15:33:12.390

CreateTimerQueue 并不意味着精确计时。它在下面使用线程池，这可能会引入明显的延迟。

来自 MSDN 的[CreateTimerQueueTimer 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682485%28v=vs.85%29.aspx)文档：

> 回调函数排队到线程池。这些线程会受到调度延迟的影响，因此时间可能会根据应用程序或系统中发生的其他情况而有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:55:37.230

如果您需要比 15 毫秒更好的分辨率，那么这有望有所帮助：

[为 Windows 实施持续更新的高分辨率时间提供程序](http://web.archive.org/web/20130308151045/http://msdn.microsoft.com/en-us/magazine/cc163996.aspx)

（感谢[@MaxTruxa](https://stackoverflow.com/questions/14438798/windows-precise-timing-error-in-createtimerqueuetimer-or-system-clocknow/14439136?noredirect=1#comment63093062_14439136)对链接的更新）

~~至于测量时间：如果我可以访问 Windows 或 Visual Studio，我会[试一试 high_resolution_clock](http://en.cppreference.com/w/cpp/chrono/high_resolution_clock)。（我在 7 年前切换到 Linux，抱歉，我自己无法检查。）~~正如 Xeo 所写：“high_resolution_clock 是带有 MSVC 的 system_clock 的 typedef。”

# android - 另一个线程上的 Android 网络操作而不是 UI

> ID：14438800
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:05.650
> 
> 标签：android, multithreading, android-asynctask, android-videoview, ui-thread

我正在播放来自 Internet 的流，因为不应该在 UI 线程上处理网络操作等长进程，所以我正在使用 AsyncTask。在主线程中，我设置了一些 videoView 规范：

```
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);
    setContentView(R.layout.videoview);
    progressDialog = ProgressDialog.show(this, "Loading", "Please Wait", true, true);

    videoView = (VideoView) findViewById(R.id.surface_view);
    videoView.setVideoPath(ChannelPath);
    videoView.setMediaController(new MediaController(this));

    new LoadStream().execute("");
} 
```

在 AsyncTask 我开始播放视频：

```
private class LoadStream extends AsyncTask<String, Void, Void> {
    protected Void doInBackground(String... urls) {
            videoView.setOnPreparedListener(new OnPreparedListener() {
                public void onPrepared(MediaPlayer mp) {
                    videoView.start();
                    progressDialog.dismiss();
                }
            });
        return null;
    }
} 
```

我试图在 AsyncTask 上拥有与 videoView 相关的所有部分，但无法在 AsyncTask 上设置视频路径和 setMediaController。我想知道哪个部分正是耗时的部分？我的代码好吗？还是我在 UI Thread 上还有很长的过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:41:01.753

当非 UI 线程希望对 UI 做某事时，该线程可以将 a 传递`Runnable`给 UI 线程以执行。有几种方法可以做到这一点；其中之一是让非 UI 线程执行类似以下的操作（这需要稍作调整；我在没有参考运行代码的情况下输入它）：

```
runOnUiThread(new Runnable() {
    void run() {
        // place UI code here
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:48:47.743

您不需要为此使用异步任务。仅在方法中使用`ProgressDialog progressBar = ProgressDialog.show(context, "", "Loading Records, Please Wait..", true);`并关闭此进度条。`onPrepared`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:41:58.893

另请参阅[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html) 最初的 prepare() 步骤需要时间，因此您应该在另一个线程上执行此操作或使用 prepareAsnyc 调用。setVideoPath() 方法仅设置将在 prepare() 中使用的路径。

如果您浏览代码（例如[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/VideoView.java#VideoView.openVideo](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/VideoView.java#VideoView.openVideo) () ) 你会看到，如果表面还没有初始化，那么那里什么也没有做，即使是，prepareAsync() 也会在该方法中被调用以完成繁重的工作。

# css - 推特引导 CSS 移动

> ID：14438801
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:10.610
> 
> 标签：css, twitter-bootstrap

我有一个 CSS 问题。我正在尝试使用 Twitter 引导主题，但是当我将网站缩小到移动设备时遇到了问题。

[http://webodew.com/websites/testsite/](http://webodew.com/websites/testsite/)

如果我让我的计算机浏览器窗口变小，顶部的文本开始超出下面的文本……使其无法阅读。

这是因为标签的位置错误吗？我试图玩它，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:43:33.723

你的问题似乎是

```
.main-banner {
height:400px;
} 
```

将其替换为

```
.main-banner {
min-height:400px;
} 
```

将解决问题。至少它对我来说是这样的:)

# xslt - 访问 xsl 中的查询字符串参数值

> ID：14438803
> 
> 赞同：1
> 
> 时间：2013-01-21T12:38:15.187
> 
> 标签：xslt, query-string

我有一个由 xsl 创建的联系我们页面。该页面中的提交按钮重定向到同样由 xsl 创建的感谢页面。现在我想将输出作为`Thank You <name i enter>`. 以查询字符串的形式在 url 中传递。现在我如何在页面中访问它？`request.getParameter(<parameter name>)`我可以在这里使用类似 xsl 的任何等价物吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:52:52.727

**使用类的[`QueryString`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.querystring.aspx)属性[`HttpRequest`](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)**。

以下是如何使用此属性的示例 (C#)：

int循环1，循环2；

```
// Load NameValueCollection object.
NameValueCollection coll=Request.QueryString; 
// Get names of all keys into a string array.
String[] arr1 = coll.AllKeys; 
for (loop1 = 0; loop1 < arr1.Length; loop1++) 
{
   Response.Write("Key: " + Server.HtmlEncode(arr1[loop1]) + "<br>");
   String[] arr2 = coll.GetValues(arr1[loop1]);
   for (loop2 = 0; loop2 < arr2.Length; loop2++) 
   {
      Response.Write("Value " + loop2 + ": " + Server.HtmlEncode(arr2[loop2]) + "<br>");
   }
} 
```

**在您的情况下，当您找到所需的名称-值对时，获取该值并将其作为参数传递给 XSLT 转换**。在 .NET 中，一种方法是使用该[`XsltArgumentList.AddParam()`](http://XsltArgumentList.AddParam) 方法

**同样，这是一个完整的 C# 示例**：

```
using System;
using System.IO;
using System.Xml;
using System.Xml.Xsl;

public class Sample
{

    public static void Main()
    {

        // Create the XslCompiledTransform and load the stylesheet.
        XslCompiledTransform xslt = new XslCompiledTransform();
        xslt.Load("order.xsl");

        // Create the XsltArgumentList.
        XsltArgumentList xslArg = new XsltArgumentList();

        // Create a parameter which represents the current date and time.
        DateTime d = DateTime.Now;
        xslArg.AddParam("date", "", d.ToString());

        // Transform the file. 
        using (XmlWriter w = XmlWriter.Create("output.xml"))
        {
            xslt.Transform("order.xml", xslArg, w);
        }
    }
} 
```

**XSLT 转换必须有一个`xsl:param`名为的全局变量`date`：**

```
<xsl:param name="date"/> 
```

上面的代码将此全局参数设置为想要的值。然后在 XSLT 代码中，只需将参数访问为`$date`.

# sql - 从sql中的特定字符中提取字符串

> ID：14438808
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:35.757
> 
> 标签：sql, sql-server

在我的 SQL 中，我有类似的字符串

```
Declare @Temp Varchar(Max) ='Pravin Gaonkar: 12 Jan 2013 11:56:21 : Hello World 1*Makarand Sawant: 12 Jan 2013 15:36:39 : Hello World 2*Makarand Sawant: 12 Jan 2013 21:21:51 : Hello World 3 *' 
```

我使用了 '*' 作为分隔符

我想检索从第二个最后一个`*`字符到最后一个`*`字符的最后一个字符串

在上面的示例中，结果字符串将是

```
Makarand Sawant: 12 Jan 2013 21:21:51 : Hello World 3 
```

我的查询

```
SELECT Reverse(Left(Reverse(@Temp), Charindex('*', Reverse(@Temp)) -1)) 
```

但它给了我错误**`Invalid length parameter passed to the LEFT or SUBSTRING function.`**

数据库是 SQL SERVER 2008

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:46:46.613

这假定决赛后没有字符，`*`并且您总共至少有 2 个 字符`*`。

```
SELECT REVERSE(SUBSTRING(LTRIM(Reverse(@Temp)), 2, CHARINDEX('*', @Temp, 2)+1)) 
```

就个人而言，我会将其存储在单独的子句中并将其拆分到客户端代码中。Java 和 .net 的字符串处理比 SQL Server 好得多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:11:30.603

另一种方法：您需要`*`在字符串中间（要拆分字符串的位置）使用此代码。

```
Select replace(Right(yourstring,Len(yourstring) - charindex('*',yourstring)),'*','')
from yourtable
; 
```

[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!3/d8cc6/1)

结果：

```
NEWVALUE
Namdev: 21 Jan 2013 17:41:51 : SLM call logg for ATM not coming
 inservice Docket No# W301211224 Cust JAGJEET 
```

# c++ - OpenCV、C++ 中的简单视频播放

> ID：14438814
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:45.853
> 
> 标签：c++, opencv

我想问你一个关于如何在 C++ 中使用 OpenCV 库解码和显示视频的问题。更详细地说，我需要了解如何正确设置两帧之间的延迟。

我有一个每秒 25 帧的 .mp4 视频。

我使用通常的循环抓取并显示帧：

```
while (something) {
  ...
  capture->read(f);
  imshow("video_title", f);
  waitKey(delay)
} 
```

其中*capture*是指向*VideoCapture*对象的指针，*f*是*Mat*对象。

我在设置*延迟*变量的值时遇到问题。

理想情况下，*延迟*应设置为 1000/fps。

在我的情况下，1000/25 = 40。但是，如果我将*延迟*设置为 40 毫秒，则视频播放会比它应该的慢。

我显然可以修改*延迟*值。如果我使用 30 毫秒，播放仍然太慢。如果我使用 20 毫秒，它比它应该的要快。

由于没有中间处理步骤，这种情况应该很容易管理。

所以：

*   我究竟做错了什么？
*   您能否建议一种正确设置延迟的方法，以便以正确的速度播放视频？

“正确速度”是指保持音频和视频同步的帧速率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:06:34.023

显然 read 和 imshow 命令需要一些时间来执行，因此播放速度较慢。我会测量上一个 imshow 的经过时间，比如 5 毫秒，然后只等待 40-5 = 35 毫秒。

# mysql - 将 3 个查询优化为单个查询的最佳方法

> ID：14438815
> 
> 赞同：1
> 
> 时间：2013-01-21T12:38:47.817
> 
> 标签：mysql, sql, select

假设我有以下查询。

```
SELECT count(*) FROM info WHERE info = 'a' and uid = 1
SELECT count(*) FROM info WHERE info = 'b' and uid = 1
SELECT count(*) FROM info WHERE info = 'c' and uid = 1; 
```

除了编写 3 个查询之外，有什么方法可以让我在一个查询中获取所有这些详细信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:41:21.157

通过...分组？

```
SELECT count(*) AS count, info FROM info WHERE uid=1 GROUP BY info

count | info
5       a
10      b
11      c 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-21T12:41:46.110

```
SELECT info, count(*) as info_cnt 
FROM T
WHERE uid = 1 and info IN ('a', 'b','c')
GROUP BY info 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-21T12:40:16.807

```
SELECT  info,
        SUM(CASE WHEN info = 'a' THEN 1 ELSE 0 END) `a`,
        SUM(CASE WHEN info = 'b' THEN 1 ELSE 0 END) `b`,
        SUM(CASE WHEN info = 'c' THEN 1 ELSE 0 END) `c`
FROM    tableName
WHERE   uid = 1 AND info IN ('a','b','c')
GROUP   BY info 
```

这将为您提供行中的结果

```
uid a   b   c
==============
1   5   2   6 
```

# php - php 附加 xml 子字符串

> ID：14438816
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:48.497
> 
> 标签：php, regex

在下面的 xml 中，我必须附加印象标记下的所有 url。

```
 <Ad id="32716">        
<InLine>            
    <AdSystem>BrightRoll</AdSystem>         
    <AdTitle/>          
    <Impression><![CDATA[http://2901.btrll.com/imp/2901/12446/PreRoll.911.123806/start;Video;1358769313]]>
    </Impression>           
    <Impression><![CDATA[http://brxserv.btrll.com/v1/epix/6835361/3850628/20799/32716/TbwKgCbwBkAABQ_SyhAABRPwAAf8wAOsGEAAAAAAAfYQiqTYrVDQ/event.imp/r_64.aHR0cDovL2Iuc2NvcmVjYXJkcmVzZWFyY2guY29tL3A_YzE9MSZjMj02MDAwMDA2JmMzPSZjND1icngmYzU9MDEwMDAwJmM2PTY4MzUzNjEmYzEwPSZjQTE9OCZjQTI9NjAwMDAwNiZjQTM9MjA3OTkmY0E0PTM4NTA2MjgmY0E1PTQ3NDcmY0E2PTY4MzUzNjEmY0ExMD0zMjcxNiZjdj0xLjcmY2o9JnJuPTEzNTg3NjkzMTMmcj1odHRwJTNBJTJGJTJGcGl4ZWwucXVhbnRzZXJ2ZS5jb20lMkZwaXhlbCUyRnAtY2I2QzB6RkY3ZFdqSS5naWYlM0ZsYWJlbHMlM0RwLjY4MzUzNjEuMzg1MDYyOC4wJTJDYS40NzQ3LjIwNzk5LjMyNzE2JTJDdS45NjguMHgwJTNCbWVkaWElM0RhZCUzQnIlM0QxMzU4NzY5MzEz]]>
    </Impression>           
    <Impression><![CDATA[http://ib.adnxs.com/seg?add=362896&t=2&cb=1358769313]]>
    </Impression>           
    <Impression><![CDATA[http://rc.rlcdn.com/361686.gif]]>
    </Impression>           
    <Impression><![CDATA[http://mobile.btrll.com/event/impression?ts=1358769313920&siteId=3850628&lineItemId=20799]]>
    </Impression>           
    <Creatives>             
        <Creative sequence="1">                 
            <Linear>                        
                <Duration>00:00:14</Duration>                       
                <TrackingEvents>                            
                    <Tracking event="midpoint"><![CDATA[http://brxserv.btrll.com/v1/epix/6835361/3850628/20799/32716/TbwKgCbwBkAABQ_SyhAABRPwAAf8wAOsGEAAAAAAAfYQiqTYrVDQ/event.mid/r_64.aHR0cDovLzI5MDEuYnRybGwuY29tL2ltcC8yOTAxLzEyNDQ2L1ByZVJvbGwuOTExLjEyMzgwNi9taWQ7VmlkZW87MTM1ODc2OTMxMw]]>
                    </Tracking>                         
                    <Tracking event="complete"><![CDATA[http://brxserv.btrll.com/v1/epix/6835361/3850628/20799/32716/TbwKgCbwBkAABQ_SyhAABRPwAAf8wAOsGEAAAAAAAfYQiqTYrVDQ/event.end/r_64.aHR0cDovLzI5MDEuYnRybGwuY29tL2ltcC8yOTAxLzEyNDQ2L1ByZVJvbGwuOTExLjEyMzgwNi9kb25lO1ZpZGVvOzEzNTg3NjkzMTM]]>
                    </Tracking>                         
                    <Tracking event="complete"><![CDATA[http://mobile.btrll.com/event/completion?ts=1358769313921&siteId=3850628&lineItemId=20799]]>
                    </Tracking>                     
                </TrackingEvents>                       
                <VideoClicks>                           
                    <ClickThrough><![CDATA[http://brxserv.btrll.com/v1/epix/6835361/3850628/20799/32716/TbwKgCbwBkAABQ_SyhAABRPwAAf8wAOsGEAAAAAAAfYQiqTYrVDQ/event.click/r_64.aHR0cDovLzI5MDEuYnRybGwuY29tL2Nsay8yOTAxLzEyNDQ2L1ByZVJvbGwuOTExLjEyMzgwNi9ub25lLztWaWRlbzsxMzU4NzY5MzEz]]>
                    </ClickThrough>                         
                    <ClickTracking><![CDATA[http://brxserv.btrll.com/v1/epix/6835361/3850628/20799/32716/TbwKgCbwBkAABQ_SyhAABRPwAAf8wAOsGEAAAAAAAfYQiqTYrVDQ/event.c_trk/r_64.aHR0cDovLzI5MDEuYnRybGwuY29tL2Nsay8yOTAxLzEyNDQ2L1ByZVJvbGwuOTExLjEyMzkyNy9ub25lLztWaWRlbzsxMzU4NzY5MzEz]]>
                    </ClickTracking>                            
                    <ClickTracking><![CDATA[http://mobile.btrll.com/event/click?ts=1358769313921&siteId=3850628&lineItemId=20799]]>
                    </ClickTracking>                        
                </VideoClicks>                      
                <MediaFiles>                            
                    <MediaFile delivery="progressive" type="video/mp4" bitrate="400" height="240" width="320"><![CDATA[http://brxcdn2.btrll.com/production/134980/Home_Depot_MuddyBoots_640x480_15sec.mp4]]>
                    </MediaFile>                        
                </MediaFiles>                   
            </Linear>                   
        </Creative>             
        <Creative sequence="1">                 
            <CompanionAds>                  </CompanionAds>             
        </Creative>         
    </Creatives>        
</InLine> 
```

在现有内容 和 之间`<Impression>`，`</Impression>`想添加更多字符串。

我怎样才能做到这一点？

我正在尝试这样的事情

```
$pattern = '<Impression>.*?</Impression>';      
preg_match($pattern, $jsaved, $matchesarr); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:57:38.457

在大多数情况下*，您不应使用正则表达式来解析 HTML 或 XML。它不是适合这项工作的工具，而且很可能令人沮丧且容易出错。 [有关在 PHP 中执行此操作的更好方法，请参阅此问题](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-xml-with-php/3577662#3577662)。

话虽如此，您的正则表达式失败，因为默认情况下，`.`它不匹配换行符。`<Impression>...</Impression>`这意味着只有当它全部出现在一行时，您才会匹配。

要解决此问题，您必须添加多行开关 ( `m`)：

`$pattern = '|<Impression>.*?</Impression>|m';`

**有例外。如果您的输入定义非常明确并且始终遵循可预测的格式，那么正则表达式就可以了。但绝对值得考虑 XML 解析器是否会更好。*

# jquery - jQuery绑定被多次调用

> ID：14438817
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:52.047
> 
> 标签：jquery, bind

普通的 jQuery 绑定函数对我来说被调用了两次，我在使用 jQuery mobile 时也看到了这个问题。

```
$(document).ready(function(){

$(window).bind("resize",function(){

$("#length").text($(window).width());
$("#length").show("slow");
$("#length").hide("slow");
});
});

 <html>
   <body>
     <div id='length' style= display:none></div>
     <div class="font size">1</div>
   </body>
 </html> 
```

摆弄：http: [//jsfiddle.net/2Yy7Q/](http://jsfiddle.net/2Yy7Q/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:42:42.763

众所周知的浏览器行为，一种可能的解决方法：

[http://jsfiddle.net/2Yy7Q/1/](http://jsfiddle.net/2Yy7Q/1/)

```
$(document).ready(function () {
    (function () {
        var timeout;
        $(window).bind("resize", function () {
            clearTimeout(timeout);
            timeout = setTimeout(function () {
                $("#length").text($(window).width());
                $("#length").show("slow");
                $("#length").hide("slow");
            }, 50);
        });

    })();
}); 
```

**注意** 你可以将超时时间设置为 0，50 是给你的想法

# javascript - 通过内部文本获取所有元素

> ID：14438820
> 
> 赞同：1
> 
> 时间：2013-01-21T12:38:57.043
> 
> 标签：javascript

我遇到了一个问题：我想在 html 文档中搜索一个字符串。到目前为止，我尝试使用 window.find(..) 方法，但我无法取回找到的元素的节点。例如，我可以突出显示所有匹配的文本。但是我想把所有的节点放在一个数组中，我找不到可以返回给我选择文本的节点的方法。以下代码仅突出显示匹配的文本，我想获取它的（父）节点。

```
function doSearchAdam(text) {
if (window.find && window.getSelection) {
    document.designMode = "on";
    var sel = window.getSelection();
    sel.collapse(document.body, 0);
    while (window.find(text)) {
        document.execCommand("HiliteColor", false, "yellow");
        sel.collapseToEnd();
    }
    document.designMode = "off";
} else if (document.body.createTextRange) {
    var textRange = document.body.createTextRange();
    while (textRange.findText(text)) {
        textRange.execCommand("BackColor", false, "yellow");
        textRange.collapse(false);
    }
} 
```

}

多谢你们！亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T16:56:07.600

将上面评论中的代码放入代码标签中，以提高可读性。

```
$(document).ready(function() { 
    $("#findButton").click(function() { 
        myFunction(); 
    }); 
});

function myFunction() { 
    var matchedPages = new Array(); 
    $(".Page").filter(function() {
        if ($(this).text().indexOf($("#findText").val()) >= 0) {
            //$("#findText").value() console.log($(this)); 
            matchedPages.push($(this)); 
        } 
    }); 
    console.log(matchedPages);
    console.log(matchedPages[1].attr("id")); 
} 
```

# javascript - setAttribute中的javascript onClick事件

> ID：14438821
> 
> 赞同：0
> 
> 时间：2013-01-21T12:38:58.793
> 
> 标签：javascript, jquery, html, fullcalendar

我正在使用完整日历，当我们单击下个月/年时，所有表的 td 字段都会刷新。

刷新所有数据后，我还希望它也`onClick`应该获取新数据。

刷新代码如下

```
 function updateCells(firstTime) {
//alert('called');
var startYear = t.start.getFullYear();
var today = clearTime(new Date());
var cell;
var date;
var row;
subTables.each(function(i, _sub){
var d = cloneDate(t.start);
d.setFullYear(d.getFullYear(),i,1);
d.setFullYear(d.getFullYear(),i,1-d.getDay());
$(_sub).find('td').each(function(ii, _cell) {

    cell = $(_cell);
    if (d.getMonth() == i) {
        cell.removeClass('fc-other-month');
    }else{
        cell.addClass('fc-other-month');
    }
    if (+d == +today && d.getMonth() == i) {
        cell.addClass(tm + '-state-highlight fc-today');
    }else{
        cell.removeClass(tm + '-state-highlight fc-today');
    }
    cell.find('div.fc-day-number').text(d.getDate());
    cell.find('div.fc-day-number').setAttribute('onClick','clicked("' + d.getDate() + '"');
    //document.getElementsByTagName('div.fc-day-number').setAttribute('onClick','clicked("' + d.getDate() + '"');
    addDays(d, 1);
});
});
bodyRows.filter('.fc-year-have-event').removeClass('fc-year-have-event');
 } 
```

错误是

```
TypeError: document.getElementsByTagName(...).setAttribute is not a function 
```

有谁知道如何在 onClick 事件中设置新数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:41:51.183

该`getElementsByTagName()`函数返回一个[NodeList](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，它是节点的集合，因此您需要对其进行迭代并分别对每个节点执行操作。

```
var nodes = document.getElementsByTagName(...);
for(var i = 0; i < nodes.length; i++) {
    var node = nodes[i];
    node.setAttribute(...);
} 
```

尽管我不相信该功能旨在或打算与完整的选择器一起使用，但只有标签名称（so`'div'`和 not `'div.fc-day-number'`）。

相反，您可以这样做：

```
cell.find('div.fc-day-number').off('click').click(function(e) {
   clicked(d.getDate());
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:46:49.390

```
var i = 0;
$(_sub).find('td').each(function(ii, _cell) {
    document.getElementsByTagName('div.fc-day-number')[i].setAttribute('onClick','clicked("' + d.getDate() + '"');
    i++;
}); 
```

.each() 也是一个循环，您只需声明一个变量并递增。

# javascript - ASP.Net 按钮禁用

> ID：14438825
> 
> 赞同：1
> 
> 时间：2013-01-21T12:39:08.580
> 
> 标签：javascript, asp.net, button

我正在使用 javascript 代码禁用按钮，但我的服务器端事件没有触发..知道吗？

```
Javascript
------------------------

        function DisableButton() {
            if (typeof (Page_ClientValidate) == 'function') {
                Page_ClientValidate();
            }
            if (Page_IsValid) {
               document.getElementById('<%=BtnToprimaryValidation.ClientID%>').disabled = true;
                document.getElementById('<%=BtnToprimaryValidation.ClientID%>').value = 'Please wait ...';
            }
        }

ASP.Net
-------------------------
<asp:Button ID="BtnToprimaryValidation" runat="server" 
                        meta:resourcekey="BtnToprimaryValidationResource1" 
                       CssClass="submitButton">

Server Side c#
---------------------------

        protected void Page_Load(object sender, EventArgs e)
        {
            BtnToprimaryValidation.Click += BtnToprimaryValidationClick;
        }
         protected void BtnToprimaryValidationClick(object sender, EventArgs e)
        {
        } 
```

提前致谢， 拉胡尔 R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:46:02.420

**事件不会在禁用的项目上触发**

而不是禁用，您必须将`DisableButton`方法更改为`return false`，如下所示：

```
function DisableButton() {
        if (typeof (Page_ClientValidate) == 'function') {
            Page_ClientValidate();
        }
        if (Page_IsValid) {
            document.getElementById('<%=BtnToprimaryValidation.ClientID%>').value = 'Please wait ...';
        }
        else {
            return false;
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T13:12:49.480

正如[@mattytommo](https://stackoverflow.com/users/1039608/mattytommo)在上一个答案中所述，**事件不会在禁用按钮上触发**。

使用短暂的超时先触发事件，然后禁用按钮：

```
setTimeout(function(){ 
document.getElementById('<%=BtnToprimaryValidation.ClientID%>').disabled = true; 
}, 100); 
```

就像我在[这个问题](https://stackoverflow.com/questions/14195881/onclientclick-is-stopping-postback)上建议的那样。

# c# - 使用 async/await 模式下载多个文档

> ID：14438829
> 
> 赞同：0
> 
> 时间：2013-01-21T12:39:28.493
> 
> 标签：c#, concurrency, async-await

我想对 C# 5 中引入的这些新关键字进行一些实验。我有兴趣研究如何以并发方式分配工作。我会更自然地使用线程池来做这件事，但有兴趣对这种新的异步模式做同样的事情。

所以这是我的玩具示例，我正在编写一个爬虫，它将从 n 个根站点爬取并进一步跟踪链接。有没有什么好的并发模式来编写这个应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:57:12.860

无论使用哪种线程技术，您都需要一名经理将工作负载分配给各个工作人员。管理器将创建 1-N 个工作进程。在工作进程中，他们将执行您选择的目标线程化方法。

我建议您创建一个接口，这些工作人员中的每一个都需要遵守该接口，并在接口内指定一个采用 url 的启动方法、一个可能的错误条件，这些条件是公开的并且可以检查，停止进程的能力和一种在工作完成后在没有错误的情况下传递数据的方法。最后是一个状态，例如枚举，关于它当前是否正在工作、停止或因错误而停止。

然后，管理器可以通过传递目标 URL 并将工作单元放入自己的内部队列来简单地创建每个进程。然后，经理通过队列寻找将自己标记为已完成的项目，然后将数据交给 GUI（？）以显示给最终用户。

那么这个新的异步等待模式将如何适应它呢？您只需在工作人员类中使用 async await 进行调用并根据需要处理数据。管理器不需要知道，因为类通过接口方法与管理器通信。

以下是一些帮助您开始使用异步等待模式的文档：

[Stephen Toub的基于任务的异步等待模式](http://www.microsoft.com/en-us/download/details.aspx?id=19957)（下载字）

[使用 Async 和 Await 进行异步编程（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/hh191443.aspx)

# java - 如何加速 jar 签名者？

> ID：14438831
> 
> 赞同：6
> 
> 时间：2013-01-21T12:39:42.133
> 
> 标签：java, performance, ant, jar, signer

我使用 ant 为我的 jars 签名以进行 web-start 部署。Ant.signjar 在 web 启动签名时非常慢。如何加快签约进程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-22T06:28:48.620

我找到了一种可能的解决方案。

早些时候在构建脚本 ant.signjar 中为所有 jars 顺序调用（我们使用 gradle 构建，超过 20 MB 的依赖项）。现在我使用 groovy 库 GPars 方法：withPool(4) 和 eachParallel { ant.signjar }。我的电脑有 2 个核心，构建服务器有 4 个核心，这很酷。（快 3 倍）

第二个技巧是缓存：我们对所有 RELEASE/NON-SNAPSHOT 依赖项使用缓存的签名 jar。当我们在没有清理的情况下运行构建时，它运行得更快，因为使用了构建目录中缓存的签名库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T07:39:35.093

我通常使用 2 个目标：一个用于签署整个项目，一个用于仅签署我的 jar。所以后者不会重新签署依赖关系并使签署过程更快。

# mysql - MYSQL - 如何构建这个查询？

> ID：14438835
> 
> 赞同：1
> 
> 时间：2013-01-21T12:39:48.560
> 
> 标签：mysql, sql, select, aggregate-functions

我想获得一个仅给出成员名称的组及其成员列表（仅显示一次）：

**表_a：**

```
| GROUP_ID |   NAME |
---------------------
|        1 |    Tom |
|        2 |  Frank |
|        3 | Shilla |
|        1 | Scully |
|        3 | Scully |
|        3 | Scully |
|        3 | Scully |
|        4 | Scully |
|        1 |    Jen | 
```

**表_b：**

```
| ID | GROUP_NAME |
-------------------
|  1 |   Troopers |
|  2 |      Clubs |
|  3 |  Mavericks |
|  4 |   Tomatoes | 
```

这是[SQLFidlle](http://www.sqlfiddle.com/#!2/b6e70/3)
这是结果：

```
| GROUP_NAME |        GROUP_CONCAT(C.NAME) |
--------------------------------------------
|  Mavericks | Scully,Scully,Scully,Shilla |
|   Tomatoes |                      Scully |
|   Troopers |              Scully,Jen,Tom | 
```

我想得到的是

```
| GROUP_NAME | GROUP_CONCAT(C.NAME) |
-------------------------------------
|  Mavericks | Scully,Shilla        |
|   Tomatoes | Scully               |
|   Troopers | Scully,Jen,Tom       | 
```

我应该如何更改查询？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T12:41:32.717

只需添加`DISTINCT`

```
SELECT  b.GROUP_NAME, GROUP_CONCAT(DISTINCT c.Name)
FROM    
        (
            SELECT GROUP_ID
            FROM   table_a
            WHERE  name = 'Scully'
            GROUP BY table_a.GROUP_ID
        ) a 
        INNER JOIN table_b b
            ON a.GROUP_ID = b.ID
        INNER JOIN table_a c
            ON a.GROUP_ID = c.GROUP_ID
GROUP BY b.GROUP_NAME; 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/b6e70/5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:41:44.277

只需将 DISTINCT 添加到您的 GROUP_CONCAT。查看[MySQL 文档](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

```
... GROUP_CONCAT(DISTINCT C.NAME) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:43:23.200

试试这个查询

```
SELECT 
    * 
FROM table_b as b
LEFT JOIN (
    SELECT 
          GROUP_CONCAT(DISTINCT NAME) as Names,
          GROUP_ID
    FROM Table_a 
    GROUP BY GROUP_ID
) as a ON a.GROUP_ID = b.ID 
```

[SQL 小提琴](http://www.sqlfiddle.com/#!2/b6e70/13)

# sublimetext2 - 如何停止 ST2 将 type="text/javascript" 添加到脚本标签？

> ID：14438836
> 
> 赞同：0
> 
> 时间：2013-01-21T12:39:57.177
> 
> 标签：sublimetext2

当我在带有 sublime text 2 的 HTML 文档中打开脚本标记时，它会自动添加 type="text/javascript" 但我不想要它，因为它在 HTML5 规范中不是必需的。我该如何阻止它这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T14:16:42.833

首选项菜单 -> 浏览包 -> 浏览**HTML** floder -> 使用任何文本编辑器打开**html_completions.py** - > 替换该行

```
("script\tTag", "script type=\"${1:text/javascript}\">$0</script>"), 
```

和

```
("script\tTag", "script>$0</script>"), 
```

# c++ - 使用 curl 和 C++ 进行 Django 身份验证

> ID：14438843
> 
> 赞同：2
> 
> 时间：2013-01-21T12:40:15.683
> 
> 标签：c++, django, authentication, curl

我正在尝试创建一个 C++ 应用程序来登录 Django 服务器。我一直在寻找这个，但我还没有找到解决我的具体问题的方法。

我正在使用 libcurl 网站的示例之一来执行请求：

```
#include <stdio.h>
#include <curl/curl.h>

int main(void)
{
    CURL *curl;
    CURLcode res;

    curl = curl_easy_init();
    if(curl) {
        curl_easy_setopt(curl, CURLOPT_URL, "http://127.0.0.1/");

        /* Perform the request, res will get the return code */ 
        res = curl_easy_perform(curl);
        /* Check for errors */ 
        if(res != CURLE_OK)
            fprintf(stderr, "curl_easy_perform() failed: %s\n", curl_easy_strerror(res));

        /* always cleanup */ 
        curl_easy_cleanup(curl);
    }
    return 0;
} 
```

我找到了一个输入用户名和密码的选项：

```
curl_easy_setopt(curl, CURLOPT_USERPWD, "luis:123456"); 
```

但问题是我不知道 Django 如何识别这个 curl 选项。

其他可能性是完成 Django 提供的登录表单。我使用的表格是：

```
<html><body>
<form method="post" action="/login">
{% csrf_token %}
  {% if form.errors %}
    <p class="error">Login error</p>
  {% endif %}
<table>
<tr>
    <td>Username</td>
    <td>{{ form.username }}</td>
</tr>
<tr>
    <td>Password</td>
    <td>{{ form.password }}</td>
</tr>
</table>

<input type="submit" value="login" />
</form>

</body>
</html> 
```

使用此选项，我的问题是我不知道如何使用 C++ 和 curl 获取和完成表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:56:11.970

您需要将带有登录表单数据的 POST 请求发送到登录 URL - 除非 Django Web 应用程序提供不同的登录机制，但通常情况并非如此。

当您发送 POST 数据并且 Django 登录表单处理确实成功地验证了用户身份时，您将获得一个 cookie，您将在后续请求中存储和使用该 cookie。

另请注意，登录表单使用`csrf_token`标签，这意味着如果您没有`csrftoken`随请求发送带有表单数据的 cookie 和令牌，Django 将拒绝该请求。我建议您查看加载和提交登录页面时浏览器发出的 HTTP 请求。所有现代浏览器都有很好的调试工具来监控请求。

或者，如果您可以控制 Django Web 应用程序，您可以在登录页面的视图功能中禁用 CSRF 令牌验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:43:19.687

我不完全确定，但我认为 CURL 所做的是标准[HTTP authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)。它不知道表单是登录表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:49:28.543

查看正在发生的事情的最简单方法之一是安装wireshark，查看数据并使用它来设计您的curl选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-06T21:48:50.173

*正如问题的原始海报所述：*

* * *

**解决方案**

为了使用 curl c++ 实现 POST，我使用`curl_easy_setopt(curl, CURLOPT_POSTFIELDS, "username=luis&password=123456);`了并且在 Django Web 服务视图中禁用了 CSRF：

```
from django.views.decorators.csrf import csrf_exempt
...
@csrf_exempt
def mylogin(request):

    username = request.POST['username']
    password = request.POST['password']
    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
           login(request, user)
        else:
            # Return a 'disabled account' error message
            return HttpResponse("Error\n")
    else:
        # Return an 'invalid login' error message.
        return HttpResponse("Invalid pass or user\n")
... 
```

# python - 将 python 与子进程 Popen 一起使用

> ID：14438845
> 
> 赞同：6
> 
> 时间：2013-01-21T12:40:18.500
> 
> 标签：python, subprocess

我正在努力将子进程与 python 一起使用。这是我的任务：

1.  通过命令行启动一个 api（这应该与在命令行上运行任何参数没有什么不同）
2.  验证我的 API 已经出现。最简单的方法是轮询标准。
3.  针对 API 运行命令。当我能够运行新命令时会出现命令提示符
4.  通过轮询标准输出来验证命令是否完成（API 不支持日志记录）

到目前为止我所做的尝试：
1\. 我被困在这里使用 Popen。我明白，如果我使用 `subprocess.call("put command here")`这个作品。我想尝试使用类似的东西：

```
import subprocess

def run_command(command):
  p = subprocess.Popen(command, shell=True,
                       stdout=subprocess.PIPE,
                       stderr=subprocess.STDOUT) 
```

我使用的地方，`run_command("insert command here")`但这什么也没做。

关于 2\. 我认为答案应该类似于这里： [Running shell command from Python and capture the output](https://stackoverflow.com/questions/4760215/running-shell-command-from-python-and-capturing-the-output)，但由于我无法让 1\. 工作，我还没有尝试过。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-21T12:42:58.950

至少要真正启动子进程，您必须告诉 Popen 对象真正进行通信。

```
def run_command(command):
    p = subprocess.Popen(command, shell=True,
            stdout=subprocess.PIPE,
            stderr=subprocess.STDOUT)
    return p.communicate() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-21T12:56:30.270

您可以查看[Pexpect](http://pexpect.sourceforge.net/pexpect.html)，这是一个专门为与基于 shell 的程序交互而设计的模块。

例如，启动 scp 命令并等待密码提示，您可以：

```
child = pexpect.spawn('scp foo myname@host.example.com:.')
child.expect ('Password:')
child.sendline (mypassword) 
```

有关 Python 3 版本，请参阅[Pexpect-u](http://pypi.python.org/pypi/pexpect-u/)。

# android - Android卡片动画

> ID：14438850
> 
> 赞同：2
> 
> 时间：2013-01-21T12:40:45.077
> 
> 标签：android, android-layout, android-viewpager, android-animation

在Android中制作循环动画的一堆卡片的最佳策略是什么，即当刷卡到底部时，卡片在顶部。

我要采用的方法是将卡片制作为布局文件（在代码中填写详细信息），然后使用`ListView`类型机制使视图以所需的方式移动。但是，我看不到在这种方法中处理 z 排序的好方法。

任何想法或链接到做类似的事情的图书馆表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T08:32:46.723

您可以使用 viewpager，然后设置寻呼机转换。您可以根据需要自定义寻呼机转换。ViewPager 可以做成循环的。首先，您可以查看开发人员站点，他们具有带有 viewpager 的 pagertransformer 的基本实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:44:10.273

我认为创建这样的动画不是以编程方式而是作为一部小电影来创建这样的动画会更自然。您可以动态计算图片下方的卡片，但使用硬编码电影将其洗牌。

# jasper-reports - 如何在条形图中隐藏网格线？

> ID：14438857
> 
> 赞同：2
> 
> 时间：2013-01-21T12:41:16.813
> 
> 标签：jasper-reports, jfreechart

我正在创建一个带有条形图的*JR报告。*

一切都很好，但我无法隐藏图表上的网格线。

我正在使用*JFreeChart 1.0.12*和*JasperReports 4.6*

[http://community.jaspersoft.com/questions/802773/lines](http://community.jaspersoft.com/questions/802773/lines)

[http://community.jaspersoft.com/questions/802773/grid](http://community.jaspersoft.com/questions/802773/grid)

# c# - 如何概括一个方法

> ID：14438862
> 
> 赞同：1
> 
> 时间：2013-01-21T12:41:36.147
> 
> 标签：c#

我有一个我想概括的方法。我想对任何对象类型使用以下反序列化函数，如下所示：

```
ExportDefinition _expDefinition = new ExportDefinition("a.ini");
DeliveryDefinition _delDefinition = new DeliveryDefinition("b.ini");

ExportDefinition expDef = Deserialize(_expDefinition);
DeliveryDefinition devDef = Deserialize(_delDefinition); 
```

```
public SomeType Deserialize(SomeType?? tp)  // What should I use instead of SomeType?
{     
    try
    {
        FileStream readFileStream = new FileStream(definitionFile, FileMode.Open, FileAccess.Read, FileShare.Read);

        XmlSerializer serializerObj = new XmlSerializer(typeof(tp));
        tp loadedObj = (tp)serializerObj.Deserialize(readFileStream);
        readFileStream.Close();
     }
     catch (Exception ex)
     {
        throw new Exception(ex.Message);
     }

     return loadedObj;
} 
```

任何想法，如何实现这一目标？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-21T12:43:43.777

使用泛型：

```
 public T Deserialize<T>(string filePath)
    {
        Stream stream = null;

        try
        {
            stream = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.Read);
            XmlSerializer serializerObj = new XmlSerializer(typeof(T));

            return (T)serializerObj.Deserialize(stream);
        }
        catch (Exception)
        {
            throw;
        }
        finally
        {
            if (stream != null)
            {
                stream.Close();
            }
        }
    } 
```

* * *

基于 Marc Gravell 的有用评论的非通用版本：

```
public object Deserialize(string filePath, Type type)
{
    Stream stream = null;

    try
    {
        stream = new FileStream(filePath, FileMode.Open, FileAccess.Read, FileShare.Read);
        XmlSerializer serializerObj = new XmlSerializer(type);

        return serializerObj.Deserialize(stream);
    }
    catch (Exception)
    {
        // Put something useful here
        throw;
    }
    finally
    {
        if (stream != null)
        {
            stream.Close();
        }
    }
} 
```

# java - 如何不从头开始迭代集合

> ID：14438866
> 
> 赞同：8
> 
> 时间：2013-01-21T12:41:41.593
> 
> 标签：java, collections

我希望迭代跳过前几个元素。`elements`是一个`List<WebElement>`。我想不是从头开始遍历列表，而是从中间的某个地方开始，我怎么能这样做？

```
for ( WebElement element : elements )
{
      //block of code
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T12:46:56.650

对于许多想要对特定范围应用某些*操作**的*情况，可以[使用](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)：*`List`[`subList()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#subList%28int,%20int%29)*

 *```
for (WebElement element : elements.subList(3, 7)) {
  // do stuff
} 
```

这也适用于删除一些范围：

```
myList.subList(4, 14).clear(); 
```

请注意，`subList`仅存在于 上`List`，因此这不适用于 a`Set`或其他非 List`Collection`对象。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-21T12:45:06.863

如果`elements`是一个列表，您可以使用 listIterator，特别是方法`elements.listIterator(index)`。它将返回从元素 at 开始的列表迭代器`index`。

例如：

```
for(ListIterator iter = elements.listIterator(2);iter.hasNext;) {
  WebElement element = (WebElement)iter.next;
  ...
} 
```

如果`elements`不是列表，您仍然可以通过使用您的集合内容创建一个新列表来使用该方法。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-21T12:46:19.503

您可以像本例一样使用 List.listIterator(int)

```
 List<WebElement> list = ...
    for(Iterator<WebElement> i = list.listIterator(1); i.hasNext();) {
        WebElement next = i.next();
    } 
```

或者干脆

```
for(int i = 1; i < list.size(); i++) {
     WebElement e = list.get(i);
} 
```

请注意，#1 使用 LinkedList 更快，而#2 使用 ArrayList 更快。有一个特殊的标记接口 java.util.RandomAccess 来确定哪个版本对给定列表更有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-21T12:53:18.680

为什么不直接使用最简单最直接的方式呢？

```
int i = 0;
for (WebElement element : elements)
{
      if (/*i++ satisfies some condition*/) {
          //block of code
      }
} 
```

或者，更原生的方式：在未增强的 for 循环中跟踪索引。

像创建子列表这样的其他方式看起来更漂亮，但这需要更多的时间和空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-21T12:54:43.177

如果您想引用或制作您自己的，可以这么说，您可以使用数组列表。这将允许您通过引用访问点（如数组），然后您可以使用通用的 while(node.hasNext()) {...} 迭代到最后。*

# java - 将 SQLite 表数据导出为 XML

> ID：14438873
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:41:56.913
> 
> 标签：java, android, xml, sqlite, android-sqlite

我在尝试将我的 SQLite 数据库表导出到 XML 文件时遇到空指针异常。

**StackTrace：** PasteBin[链接](http://pastebin.com/cZu5gg2B)

--
**更新 2：** 我只是不明白传入的内容（在初始化和调用 Main Activity 中的 exportData 方法时）：`DatabaseAssistant DA = new DatabaseAssistant(myContext, **WHAT_IS_PASSED_HERE?**); DA.exportData();`
--
**更新：** 提到我得到 NPE 的行是：at `com.astix.reachout.DatabaseAssistant.exportData(DatabaseAssistant.java:72`&`com.astix.reachout.ReachOutMain$9.onClick(ReachOutMain.java:347)`

`_exporter.startDbExport( _db.getPath() );`里面有哪些`DA.exportData()`
-
我提到了[这个答案](https://stackoverflow.com/a/2593752/1184579)。我的数据库助手代码：

```
public class DatabaseAssistant
{
    public String filNameFullPath;
    public long filNameTS;
    public String EXPORT_FILE_NAME;
    //private static final String EXPORT_FILE_NAME = "/sdcard/datanaexport.xml";

    private Context _ctx;
    private SQLiteDatabase _db;
    private Exporter _exporter;

    public String newfilename(){
        System.out.println("inside newfilename()");

        filNameTS = System.currentTimeMillis();
        filNameFullPath = Environment.getExternalStorageDirectory().getPath();
        EXPORT_FILE_NAME = filNameFullPath + "/" + filNameTS +".xml";
        System.out.println("new file name: " + EXPORT_FILE_NAME);
        return EXPORT_FILE_NAME;
    }

    public DatabaseAssistant( Context ctx, SQLiteDatabase db )
    {
        _ctx = ctx;
        _db = db;

        newfilename();
        try
        {
            System.out.println("inside try databaseAssitant() -- file name: " + EXPORT_FILE_NAME);
            // create a file on the sdcard to export the
            // database contents to
            File myFile = new File( EXPORT_FILE_NAME );
                        myFile.createNewFile();

                        FileOutputStream fOut =  new FileOutputStream(myFile);
                        BufferedOutputStream bos = new BufferedOutputStream( fOut );

            _exporter = new Exporter( bos );
        }
        catch (FileNotFoundException e)
        {
            e.printStackTrace();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    public void exportData( )
    {
        log( "Exporting Data" );

        try
        {
            System.out.println("inside try exportData()");
            _exporter.startDbExport( _db.getPath() );

            // get the tables out of the given sqlite database
                    String sql = "SELECT * FROM sqlite_master";

                    Cursor cur = _db.rawQuery( sql, new String[0] );
                    Log.d("db", "show tables, cur size " + cur.getCount() );
                    cur.moveToFirst();

                    String tableName;
                    while ( cur.getPosition() < cur.getCount() )
                    {
                        tableName = cur.getString( cur.getColumnIndex( "name" ) );
                        log( "table name " + tableName );

                        // don't process these two tables since they are used
                        // for metadata
                        if ( ! tableName.equals( "android_metadata" ) &&
                        ! tableName.equals( "sqlite_sequence" ) )
                        {
                            exportTable( tableName );
                        }

                        cur.moveToNext();
                    }
                _exporter.endDbExport();
            _exporter.close();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
    }

    private void exportTable( String tableName ) throws IOException
    {
        _exporter.startTable(tableName);

        // get everything from the table
        String sql = "select * from " + tableName;
        Cursor cur = _db.rawQuery( sql, new String[0] );
        int numcols = cur.getColumnCount();

        log( "Start exporting table " + tableName );

//      // logging
//      for( int idx = 0; idx < numcols; idx++ )
//      {
//          log( "column " + cur.getColumnName(idx) );
//      }

        cur.moveToFirst();

        // move through the table, creating rows
        // and adding each column with name and value
        // to the row
        while( cur.getPosition() < cur.getCount() )
        {
            _exporter.startRow();
            String name;
            String val;
            for( int idx = 0; idx < numcols; idx++ )
            {
                name = cur.getColumnName(idx);
                val = cur.getString( idx );
                log( "col '" + name + "' -- val '" + val + "'" );

                _exporter.addColumn( name, val );
            }

            _exporter.endRow();
            cur.moveToNext();
        }

        cur.close();

        _exporter.endTable();
    }

    private void log( String msg )
    {
        Log.d( "DatabaseAssistant", msg );
    }

    class Exporter
    {
        private static final String CLOSING_WITH_TICK = "'>";
        private static final String START_DB = "<export-database name='";
        private static final String END_DB = "</export-database>";
        private static final String START_TABLE = "<table name='";
        private static final String END_TABLE = "</table>";
        private static final String START_ROW = "<row>";
        private static final String END_ROW = "</row>";
        private static final String START_COL = "<col name='";
        private static final String END_COL = "</col>";

        private BufferedOutputStream _bos;

        public Exporter() throws FileNotFoundException
        {
            this( new BufferedOutputStream(
                    _ctx.openFileOutput( EXPORT_FILE_NAME,
                    Context.MODE_WORLD_READABLE ) ) );
        }

        public Exporter( BufferedOutputStream bos )
        {
            _bos = bos;
        }

        public void close() throws IOException
        {
            if ( _bos != null )
            {
                _bos.close();
            }
        }

        public void startDbExport( String dbName ) throws IOException
        {
            String stg = START_DB + dbName + CLOSING_WITH_TICK;
            _bos.write( stg.getBytes() );
        }

        public void endDbExport() throws IOException
        {
            _bos.write( END_DB.getBytes() );
        }

        public void startTable( String tableName ) throws IOException
        {
            String stg = START_TABLE + tableName + CLOSING_WITH_TICK;
            _bos.write( stg.getBytes() );
        }

        public void endTable() throws IOException
        {
            _bos.write( END_TABLE.getBytes() );
        }

        public void startRow() throws IOException
        {
            _bos.write( START_ROW.getBytes() );
        }

        public void endRow() throws IOException
        {
            _bos.write( END_ROW.getBytes() );
        }

        public void addColumn( String name, String val ) throws IOException
        {
            String stg = START_COL + name + CLOSING_WITH_TICK + val + END_COL;
            _bos.write( stg.getBytes() );
        }
    }

    class Importer
    {

    }

} 
```

在我的主要活动中（在按钮的 onClick 下调用）：

```
DatabaseAssistant DA = new DatabaseAssistant(myContext, mySQLiteDatabase);
DA.exportData(); 
```

这里 ^ （上面声明为）：

```
private Context myContext;
private SQLiteDatabase mySQLiteDatabase; 
```

任何建议都是可观的..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:17:22.000

要么`_exporter`要么`_db`是`null`。

您的构造函数初始化了这两个变量，因此构造函数的`mySQLiteDatabase`给定值很可能已经是`null`. （尽管如果构造函数中发生任何错误，您*将*得到无效`_exporter`；最好只抑制异常并继续进行，就好像什么都没发生一样。这里不是这种情况，因为没有堆栈跟踪。）

# cocoa - 将 NSScrollView 添加到 IKImageBrowserView 以进行滚动

> ID：14438885
> 
> 赞同：0
> 
> 时间：2013-01-21T12:42:49.560
> 
> 标签：cocoa, nsscrollview, ikimagebrowserview

我在 MacOSX 10.8 上使用 Xcode 4.4。我正在尝试将 NSScrollView 添加到 IKImageBrowserView 以实现垂直滚动功能。我在 IB 和代码中的 NSScrollView 之上添加了 IKImageBrowserView：

```
[self.scroll_View setDocumentView:self.image_BrowserView]; 
```

但是在将图像添加到 IKImageBrowserView 后，我没有获得垂直滚动功能。我看到 ImageBrowserView 后面的滚动视图，但没有滚动。我也设置了：
`[self.window setContentView:scrollCurrentList_View];`
我还看到一些帖子说 NSBackingStoreRetained on NSWindow。他们是向 IKImageBrowserView 添加垂直滚动以查看图像的一些简单方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T13:58:26.077

在 IB 中选择您`IKImageBrowserView`的，然后选择编辑器菜单，然后在嵌入菜单项中选择像这样的滚动视图

![在此处输入图像描述](../Images/20a30eb294f4ccafd5dcc4aabbde0ef7.png)

然后选择滚动视图 IB

在属性中启用垂直滚动条

像这样

![在此处输入图像描述](../Images/08fc50f5efca48e848747d9a1a8b272f.png)

# signalr - 客户端上的 SignalR 错误功能是做什么用的？

> ID：14438890
> 
> 赞同：0
> 
> 时间：2013-01-21T12:43:15.640
> 
> 标签：signalr

```
$.connection.hub.error(function (err) {
                alert("Error signalR:" + JSON.stringify(err));
            }); 
```

我可以用这个功能做什么？在移动设备上运行时，它总是更频繁地显示这一点，并且它从不提供任何信息。那么你如何使用它呢？

我也从未遇到过 SignalR 因这个原因而崩溃的情况，所以我应该把它注释掉吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T17:49:13.320

对于运行时情况， .error 在无法与您的实现一起使用的独特浏览器/客户端场景中很有用。例如，假设您有一个应用程序需要 SignalR 仅使用 Web 套接字或服务器发送的事件传输：

```
$.connection.hub.start(["serverSentEvents","webSockets"]); 
```

这意味着 SignalR 将无法在 < IE 10 中成功启动连接。因此，在这种情况下使用 .error 将允许您通知用户，由于他们的浏览器选择，他们没有启用实时功能。

最终，它会根据您要完成的工作变得有用。另一个例子是 JabbR 中的 dfowler 使用它来清除他的“待处理消息”队列[https://github.com/davidfowl/JabbR/blob/master/JabbR/Chat.js#L978](https://github.com/davidfowl/JabbR/blob/master/JabbR/Chat.js#L978)。

希望这可以帮助！

# c++ - C++ 共享库定义和取消定义功能

> ID：14438891
> 
> 赞同：0
> 
> 时间：2013-01-21T12:43:17.910
> 
> 标签：c++, linux, cmake, shared-libraries

我有一个关于使用共享库的特定功能的问题。我有自己的小型代码内分析器，我在多个项目中使用它，因此通常包含为共享库。最初我想使用编译时标志来关闭分析代码。例如：

```
#ifdef PROFILEAPP
class Profiler {
   static void start() { ... }
   static void stop() { ... }
};
#else
 class Profiler {
   static void start(){}
   static void stop(){} 
 }; 
```

但是，如果在未定义符号的情况下预先编译了 lib，则此方法不起作用。请注意，我的库**不仅仅是**标题。

所以我发现我可以使用 cmake 命令编译两个不同的目标：

```
set_property( TARGET my_lib PROPERTY COMPILE_DEFINITIONS "PROFILEAPP") 
```

这确实有效，但我必须更改客户端应用程序中的链接选项，以处理两个不同的 .so 文件。但是，我想知道这是否是要走的路？像 boost 这样的库在机器差异方面做类似的事情吗？有什么方法可以通过在我的客户端应用程序中定义 PROFILEAPP 来做同样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:49:47.183

保持两种不同的构建配置本质上是您唯一可以做的事情。最终，您会发现为您的应用程序创建多个构建配置可能也是最简单的。调试、配置文件、发布等

# php - 从多个循环将项目添加到数组

> ID：14438896
> 
> 赞同：0
> 
> 时间：2013-01-21T12:43:31.720
> 
> 标签：php, for-loop, foreach

下面提供的代码是我真实代码的摘要。我想使用多个循环将多个数组中的项目添加到最终数组中。但我也想多次添加相同的值，因此将所有内容包装在另一个循环中。听起来很乱，但我认为代码解释得很好。为什么我只能从一个循环中得到结果？换句话说，为什么`$total`只包含六个元素一六而不是 30 个元素（一六五次），正如人们对 for 循环所期望的那样？

```
for ($counter = 1; $counter < 5; $counter++) {
     $first_arr = array('one', 'two', 'three');
     $second_arr = array('four', 'five', 'six');

    $total = array();

    foreach ($first_arr as $x) {
        $total[] = $x;
    }

    foreach ($second_arr as $x) {
        $total[] = $x;
    }
}
var_dump($total); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:45:09.777

因为您要`$total`在外循环的每次迭代中进行重置。在外循环之前声明它，你的问题就会得到解决。

像这样：

```
$total = array();
$first_arr = array('one', 'two', 'three');
$second_arr = array('four', 'five', 'six');

for ($counter = 1; $counter < 5; $counter++) {
    // assuming $first_arr and $second_arr have numerical keys
    // which they do, in this example
    $total = array_merge($total, $first_arr, $second_arr);
}

var_dump($total); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:47:23.237

将以下行放在 for 循环之外

```
 $total = array(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:47:32.113

只需进行一些更改....它会起作用

```
for ($counter = 1; $counter < 5; $counter++) {
 $first_arr = array('one', 'two', 'three');
 $second_arr = array('four', 'five', 'six');

$total = array();
$i = 0;

foreach ($first_arr as $x) {
    $total[$i] = $x;
    $i++;
}

foreach ($second_arr as $x) {
    $total[$i] = $x;
    $i++;
}
}
var_dump($total); 
```

希望能帮助到你..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T12:53:40.607

那是因为您已经在循环中声明了数组。每次循环再次开始时，数组都会被重置为空值，因此最终的循环值会显示在结果中。

在循环之外声明这些，它会正常工作，

```
$first_arr = array('one', 'two', 'three');
$second_arr = array('four', 'five', 'six');
    for ($counter = 1; $counter <= 5; $counter++) {
        foreach ($first_arr as $x) {
            $total[] = $x;
        }

        foreach ($second_arr as $x) {
            $total[] = $x;
        }
    } 
```

# php - python问题入门

> ID：14438899
> 
> 赞同：0
> 
> 时间：2013-01-21T12:43:34.250
> 
> 标签：php, python, debugging, variable-assignment

所以，我刚开始使用 python 并学会了如何解决一些问题，但我被这个问题困住了，我搜索的内容对我没有帮助。

这是我的`test.py`文件：[http](http://pastebin.com/TzASyCxm) ://pastebin.com/TzASyCxm ，我在其中使用 mysql 并将一些数据输出到 LCD 屏幕。

现在，在我的脚本中执行代码会返回以下错误：

```
self.ip[host] = socket.gethostbyname(host)
TypeError: 'str' object does not support item assignment 
```

我正在尝试在 php 中做一个简单的操作：

```
$data = array();
$test = 'level1';
$data[$test] = 'alex'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:48:53.100

正如错误所述，`self.ip`是一个字符串，您不能分配给字符串中的元素。

大概您打算将其初始化为字典：`self.ip = {}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:51:58.150

与在 PHP 中一样，您需要`$data`使用空数组初始化变量`array()`，以便对其进行索引和分配元素，以类似的方式，您需要分配一个字典`self.ip`以随后进行索引和分配值。

您可以使用的方法因要求而异，但我们通常坚持两种格式中的一种

```
self.ip = dict()
self.ip = {} 
```

**笔记**

Python 错误消息是不言自明的，您可以从中轻松识别问题

```
TypeError: 'str' object does not support item assignment 
```

这意味着它`self.ip`是一个字符串对象，在 Python 中，字符串对象是不可变的，不像 C/C++ 那样不能被索引。很可能，您可能在失败之前用字符串初始化了这个变量。

# javascript - IE 忽略空格字符

> ID：14438903
> 
> 赞同：0
> 
> 时间：2013-01-21T12:43:52.277
> 
> 标签：javascript, jquery, html, internet-explorer

我有一个 textarea 后面有一个 div（包含与 textarea 相同的内容，但有用于突出显示的跨度），它在 Chrome 和 Firefox 中运行良好（由于边框有一些宽度黑客）。[JSFiddle](http://jsfiddle.net/nuNus/29/)

我只是无法让它在 IE 中工作（目前在 8 中测试）。似乎与某种相关`whitespace`或`word-wrap`因为您可以看到后面的 div 忽略了 2 个字符后的空格。

`.replace(/[ \xA0]{2}/g, " &nbsp;")`似乎有助于使 div 更好地复制 textarea 内容，但仍然无法解决问题并最终破坏了 Chrome + FF。

*我上周发布了一个类似的问题，但此后取得了一些进展并将问题隔离到 IE*

谢谢

# iphone - 如何在iphone日历中添加月相

> ID：14438904
> 
> 赞同：-5
> 
> 时间：2013-01-21T12:43:52.563
> 
> 标签：iphone, calendar

如何添加谷歌日历月相。我尝试了很多但在谷歌中没有结果请解决我的问题。提前感谢您的支持。或此链接无效的其他链接。请发送另一个正确的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:48:38.763

您可以使用以下说明添加日历（月相在“更多”下列出）： http: [//support.google.com/calendar/bin/answer.py ?hl=en&answer=37098](http://support.google.com/calendar/bin/answer.py?hl=en&answer=37098)

然后只需将其同步到您的 iPhone，就像您使用任何其他日历一样。

# java - 在 Eclipse 中使用本地调试模式在 Jboss 5.1 中调试应用程序

> ID：14438906
> 
> 赞同：2
> 
> 时间：2013-01-21T12:44:00.607
> 
> 标签：java, eclipse, jboss, ejb, jboss5.x

我正在尝试设置我的 Eclipse 项目，以便能够调试可在 Jboss 5.1 中部署的 EJB 应用程序。要配置调试选项，我使用了此处描述的选项：

[Eclipse 中的 JBoss 调试](https://stackoverflow.com/questions/516196/jboss-debugging-in-eclipse)

我尝试了上述方法，它可以工作，但有以下限制：

*   如果我更改任何代码，我必须重建应用程序并重新部署到 Jboss 并重新启动服务器。我们使用 ANT 来构建项目，因此由于很小的变化而不得不重新构建和重新部署应用程序并不是很理想。

*   我管理了两种方法：

第一个如[Eclipse 中的 JBoss 调试中](https://stackoverflow.com/questions/516196/jboss-debugging-in-eclipse)所述。这要求我手动复制war文件，远程启动jboss，然后在ecliplse中启动远程调试器。

第二种方法是我仍然会手动将war文件复制到jboss，但不会远程启动jboss。相反，我会在 Eclipse 中启动 jboss。这种工作，但问题是我在进行更改时仍然必须进行手动部署。

我之前在 Tomcat 中运行的 eclipse 中调试了一个应用程序，如果我对代码进行更改，我所要做的就是重新启动服务器。

是否可以在 Eclipse 中本地调试 EJB 应用程序，以便如果我进行代码更改，我需要做的就是在本地重新启动服务器而不需要重新部署 war 文件？

# c++ - 在 Pidion 等某些设备中未显示 Dvorak SIP

> ID：14438907
> 
> 赞同：1
> 
> 时间：2013-01-21T12:44:07.740
> 
> 标签：c++, windows-mobile, soft-keyboard, dvorak, soft-input-panel

我已经从位置构建和部署了`Dvorak SIP`示例。`C:\Program Files\Windows Mobile 6 SDK\Samples\PocketPC\CPP\ATL\dvoraksip`该示例成功部署和注册，当我从托盘中间的 SIP 图标单击 Dvorak 时，它会在其中打开，并且除了运行 Windows Mobile 5.0[的 Pidion BIP-1300-GSM](http://www.mypidion.com/product/product_tab.asp?t_idx=178&bmenu=1)`Windows Mobile 5 emulator`之外的一些其他设备。

是什么原因？

我应该提到它总是成功部署和注册。

**更新**

我把`DebugMessage`所有的方法。

当我 Deploy`Dvorak`时，在设备上调用方法，`dvoraksip.cpp`就像在 Emulator 上发生的那样。

当我在模拟器中单击托盘中的图标时，方法`dvorak_implementation.cpp`被正确调用，但 Pidion 设备上没有调用任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:01:00.807

我不知道你那边可能出了什么问题。在 Windows Mobile 5 上使用此 WM653 示例时存在一些陷阱。当您在 VS8 配置管理器中切换到 WM5 时，必须调整部署设置：

![部署 DVORAK SIP 的设置](../Images/1ea1784fa07a22de56ba6b42fd6078e6.png)

你在 VS2008 中也安装了 WM5 SDK 吗？

在 VS8 中确保静态链接 ATL： ![ATL 静态链接](../Images/7e7ef697ae9d2567fd2e5d0351de6103.png)

这是我使用 WM5 SDK 更新的 DVORAK SIP 示例的 VS2008 项目/解决方案：[http ://www.hjgode.de/temp/dvoraksipVS2008_WM5SDK.zip](http://www.hjgode.de/temp/dvoraksipVS2008_WM5SDK.zip)

我在 WM5 设备上进行了测试（没有 Pidion，一个运行 WM5 的 Intermec CK60）： ![WM5 设备屏幕上的 Dvorak SIP](../Images/dab71f98e1e01a3ce2fded6790163300.png)

我看到您在 social.msdn 上发布了同样的问题，谁也知道在哪里。如果 pidion 仍然不能像 WM5 设备那样工作，您应该考虑更换型号。

作为替代方案，您可以使用 Richard Boling 的 SIP NumPanel 示例。

![Richard Boling 数字键盘 SIP 示例](../Images/8cbb0943a63a23829c72c22b5bd06b74.png)

这是 WM5SDK 的 VS8 解决方案：[http ://www.hjgode.de/temp/BolingNumPanel.zip](http://www.hjgode.de/temp/BolingNumPanel.zip)

# hadoop - 启动 Hadoop 时 EC2 上的权限被拒绝（公钥）

> ID：14438912
> 
> 赞同：5
> 
> 时间：2013-01-21T12:44:23.013
> 
> 标签：hadoop, amazon-ec2, permission-denied

我的经理向我提供了一个 Amazon 实例和一个 ppk。可以登录；尝试安装 hadoop；进行了所需的配置更改，例如，将 master 和 slaves 文件从 localhost 编辑为 EC2 实例名称，将所需的属性添加到 mapred-site.xml/hdfs-site.xml/core-site.xml 文件，将 namenode 格式化为 HDFS . 现在，当我运行 start-dfs.sh 脚本时，出现以下错误。启动namenode，登录到/home/ubuntu/hadoop/libexec/../logs/hadoop-ubuntu-namenode-domU-12-31-39-07-60-A9.out主机'XXX.amazonaws.com的真实性（某些 IP）' 无法建立。

您确定要继续连接（是/否）？是 XXX.amazonaws.com：警告：将“XXX.amazonaws.com”（ECDSA）永久添加到已知主机列表中。XXX.amazonaws.com：权限被拒绝（公钥）。XXX.amazonaws.com：权限被拒绝（公钥）。

**截至目前，主节点和从节点将是同一台机器。**

XXX是实例名，有些IP是它的IP。出于安全原因屏蔽它们。

我完全不知道使用 EC2 实例、SSH 等，只需要在其中运行一个简单的 MapReduce 程序。

请建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T14:15:41.917

Hadoop 使用 SSH 将信息从主服务器传输到从服务器。看起来您的节点正在尝试通过 SSH 相互通信，但尚未配置为这样做。为了进行通信，Hadoop 主节点需要对从节点进行无密码 SSH 访问。无密码很有用，因此每次您尝试运行作业时，您都不必为每个从节点再次输入密码。那将是相当乏味的。看起来您必须在节点之间进行设置，然后才能继续。

我建议您查看[本指南](http://www.michael-noll.com/tutorials/running-hadoop-on-ubuntu-linux-single-node-cluster/)并找到名为“配置 SSH”的部分。它阐述了如何实现这一点。

# android - 使用 GCM 获取 Android 位置并将其显示在网络上（谷歌地图）

> ID：14438913
> 
> 赞同：0
> 
> 时间：2013-01-21T12:44:23.947
> 
> 标签：android, google-cloud-messaging

我只是想知道从网络浏览器（任何计算机）要求 Android 提供其位置（示例）是否可行，以便用户可以使用谷歌地图查看它。

这是我头上的设计：

*   从浏览器发送请求以获取位置到 Web 服务器
*   向数据库表（GCM_REQUESTS）添加一条记录，请求和请求时间。
*   Web 服务器使用 GCM 和 requestId 发送请求以提供位置（或其他）。
*   GCM 会将相同的数据发送到 android
*   现在 Android 应用程序解析数据（请求）并向其发送类似这样的位置（http://myserver.com/updatelocation?reqId=123&lon=10.0&lat=5.5）
*   这将保存在 GCM_REQUESTS 表中。
*   同时使用 AJAX 调用，我们将池（5 秒）用于 GCM_REQUESTS 表中的任何更新，如果我们发现任何更新，我们将读取它并将其发送回浏览器
*   现在 AJAX 调用将停止轮询，浏览器将更新位置。

请指导我这种方法是否有效，是否可以通过其他任何方法进行优化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:04:21.523

我做过类似的事情，这种方法对我来说非常有效，这里只是一些有用的指针：

1）当你推送到GCM服务器时，如果响应不成功（例如NotRegistered或MisMatchSenderID），则通过浏览器适当地响应用户（应用程序不再安装在设备上或出现错误与设备通信）

2) 如果设备以 null 响应，请确保已处理（见下文）并以此时无法确定设备位置的方式向用户报告。

我遇到的导致我的应用程序崩溃的事情是，如果您尝试将位置数据设置到帖子中并且它为空。我在下面粘贴了我的代码来处理这个问题，这样你就可以避免这样的问题。

```
String provider = lm.getBestProvider(criteria, true);

    if(provider == null)
    {
        provider = LocationManager.GPS_PROVIDER;
    }
    Location location = lm.getLastKnownLocation(provider);

    String lat1 = "";
    String lon1 = "";
    if(location != null)
    {
        lat1 = String.valueOf(location.getLatitude());
        lon1 = String.valueOf(location.getLongitude());
    } 
```

希望这可以帮助

# asp.net - ASP.NET MVC 中的 ViewModel 和 Model 之间的主要区别是什么？

> ID：14438914
> 
> 赞同：4
> 
> 时间：2013-01-21T12:44:30.653
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor, asp.net-mvc-4

这些中的每一个都应满足哪些要求才能被归类为模型或视图模型？（除了他们居住的目录）

谢谢大家，

戴夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:48:41.570

尽管 Oded 在不属于 MVC 的 ViewModel 中是正确的，但许多人仍然使用该术语来描述一个模型，该模型本质上是一个或多个已翻译数据类的组合，用于表示目的。

在典型的实现中，MVC Web 项目可能无法直接访问 DTO 类，它反过来调用核心层中的一个方法，该方法调用数据库，检索 DTO 对象并将它们转换为“视图模型” .

我想它可以帮助新手（将他们的数据类称为模型）区分 DTO 类和基于 DTO 类纯粹为演示目的而构建的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T12:45:48.507

首先， A`ViewModel`不是 MVC 模式的一部分。

它是[MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel)的一部分。

两种模式中的 MV 意味着模型（如业务/域模型）和 UI 视图。

MVC 还有一个*Controller*，它是视图和模型之间的协调器。按照微软 MVC 框架的默认设置，Controllers、Views 和 Models 分别进入匹配名称的目录。

MVVM 具有 ViewModel，它是视图本身的模型。由于这不是 MVC 模式的一部分，因此默认情况下 Microsoft 的 MVC 模板中没有这些内容，但如果您希望引入此抽象，您应该为它们创建一个 ViewModels 目录。

# .net - 命名列“Id”时，Dapper 和“操作可能会破坏运行时”

> ID：14438916
> 
> 赞同：9
> 
> 时间：2013-01-21T12:44:34.533
> 
> 标签：.net, dapper

我在 .NET 4.5 中使用 dapper 来轻松查询我的 MS SQl 数据库。以下工作正常：

**没问题：**

```
const string sql = @"
SELECT g.Name, g.Slug, g.CreatedDate, COUNT(r.Id) recipientCount
FROM Groups g
LEFT JOIN GroupRecipients r ON r.GroupId = g.Id
WHERE g.CustomerId = @CustomerId
GROUP BY g.Id, g.Name, g.Slug, g.CreatedDate

"; 
```

return _connection.Query(sql, new { CustomerId = customerId }).ToList();

**选择“Id”列的问题 - 引发 VerificationException**：

```
const string sql = @"
SELECT g.Id, g.Name, g.Slug, g.CreatedDate, COUNT(r.Id) recipientCount
FROM Groups g
LEFT JOIN GroupRecipients r ON r.GroupId = g.Id
WHERE g.CustomerId = @CustomerId
GROUP BY g.Id, g.Name, g.Slug, g.CreatedDate

";
return _connection.Query<GroupWithRecipientCount>(sql, new { CustomerId = customerId }).ToList(); 
```

抛出异常并显示消息**“操作可能会破坏运行时”。**

谁能指出我在这里可能做错了什么？我的**GroupWithRecipientCount**类如下所示：

```
public class GroupWithRecipientCount
{
    public int Id { get; set; }
    public DateTime CreatedDate { get; set; }
    public string Name { get; private set; }
    public string Slug { get; private set; }
    public int RecipientCount { get; private set; }
} 
```

**编辑1：**

我删除了这个：

如果我**将 Id 列重命名为**“Id”以外的其他名称，则一切正常，即

```
"SELECT g.Id SomeOtherName, g.Name, ..." 
```

如果将我的班级的 Id 字段重命名为 SomeOtherName，看起来它也会中断，所以我猜这个问题与映射 Id 字段有关，但这只是一个猜测。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-26T23:52:50.443

当我的模型类在映射到 SQL 字段时具有错误的数据类型时，我得到了这个异常。我的模型（错误地）是一个 int 并且 SQL 语句正在返回一个字符串。如果您收到这条神秘的错误消息，请仔细检查您的数据类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T19:56:59.257

原来是一些安全问题，我扼杀了原始异常并引发了另一个异常。

# jquery - 为什么 .change 事件不起作用

> ID：14438917
> 
> 赞同：0
> 
> 时间：2013-01-21T12:44:40.903
> 
> 标签：jquery

我想使用 jQuery ajax 获取每月的天数，但是 .change 事件不起作用。你知道为什么吗？

我尝试调用 alert() 函数，但没有响应。

索引.html

```
 <script src="js/jquery.js"></script>
 <script type="text/javascript">
   $("#month").change(function() {

       alert("Alert something!");

       var year= $("#year").val();
       var month= $("#month").val();

       $.ajax({
            type: "POST",
            url: "getMonthDays.php",
            dataType: "html",   //expect html to be returned
            data: {year: year, month: month}
            }).done(function(msg){
                if(parseInt(msg)!=0)    //if no errors
                {
                    $('#days').html(msg);    //load the returned html into days
                }
            });

    });

  </script>

    <select id="year">
        <option value="2012">2012</option>
        <option value="2013">2013</option>
    </select>

    <select id="month">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>

    <select id="day">
        <div id="daysInMonth"></div>
    </select> 
```

getDaysInMonth.php

```
<?php

    function getDaysInMonth($month, $year){
    return $month == 2 ? ($year % 4 ? 28 : ($year % 100 ? 29 : ($year %400 ? 28 : 29))) : (($month - 1) % 7 % 2 ? 30 : 31);
}

    $year = $_POST["year"];
    $month = $_POST["month"];

    $daysInMonth = getDaysInMonth($month, $year);

    $string = "<option value=\"0\">Den:</option>";

    for($i = 1; $i <= $daysInMonth; $i++){
        $string .= "<option value=\"$i\">$i</option>";
    }

    echo $string;

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:51:43.463

你得到的代码是完美的。您在哪里添加了`<script>`用于加载 jquery 的标签。我认为这会在您的情况下造成问题。

这是一个工作示例[http://jsfiddle.net/dvfEX/](http://jsfiddle.net/dvfEX/)

# php - 限制对php文件的访问

> ID：14438918
> 
> 赞同：2
> 
> 时间：2013-01-21T12:44:54.100
> 
> 标签：php, android, json, restrict

我目前正在编写一个 Android 应用程序，它访问我服务器上的 PHP 文件并显示我的 MYSQL 数据库提供的 JSON 数据。

一切都很好，我喜欢它的简单性，但我不太满意有人可以输入这个 PHP 文件的 URL 并看到一个充满潜在敏感数据的页面。

你会给我什么建议来防止任何人访问这个 PHP 文件，除了那些使用我的 Android 应用程序的人？

非常感谢您提供的任何信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:53:03.540

关键字是身份验证。HTTP-Authentication 就是为此目的而设计的！

HTTP-auth 有 2 种形式：

1.  **基本：**易于设置，安全性较低
2.  **摘要：**更难设置，更安全

    *   [这](http://php.net/manual/en/features.http-auth.php)是php手册。
    *   这[就是](https://stackoverflow.com/questions/7288526/android-http-authentication)您可以在您的 android 应用程序中执行的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:50:28.483

没有真正的万无一失的方法来做到这一点。但是，您可以要求用户代理与您的应用程序匹配。您还可以在应用程序中隐藏作为 POST 数据传递到 PHP 文件的私钥。现在，这些都不会阻止那些决心获得原始产出的人，但它会减慢那些只是在浪费时间看看他们能完成什么的人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T12:52:13.337

如果请求使用以下标头发送，为什么不只启用有效响应：

```
Content-Type=application/json 
```

如果请求没有将其作为 传递`Content-Type`，那么您只需终止脚本（因为常规浏览器通常想要获取`text/html`或类似的东西）。把所有东西都锁紧并不值得，就好像你的应用程序可以从你的服务器获取数据一样，任何用户也有机会。

# wordpress - 在 wordpress 中按修改日期显示发布顺序

> ID：14438920
> 
> 赞同：9
> 
> 时间：2013-01-21T12:44:57.047
> 
> 标签：wordpress, post

我必须按最后修改日期显示帖子。所以我使用了下面的代码。

```
$args = array(
    'post_type' => $post_type,
    'numberposts' => '2',
    'orderby' => 'modified',
    'order'=> 'ASC',
);
$the_query = new WP_Query( $args ); 
```

但是我在上面的代码中找不到任何更新。`'orderby' => 'modified'`我应该在论点中使用其他东西而不是。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T14:34:47.010

你应该使用`DESC`for `order`。

试试这个：

```
 $the_query = new WP_Query( array(
     'post_type'   => $post_type,
     'numberposts' => '2',
     'orderby'     => 'modified',
     'order'       => 'DESC',
 )); 
```

使用`DESC`将首先为您提供最新帖子（降序）。

**编辑：**

正如 Andrew[评论](https://stackoverflow.com/questions/14438920/to-display-the-post-order-by-modified-date-in-wordpress/14440877?noredirect=1#comment93150372_14440877)的那样，默认值`order`is`DESC`并且因此可以从代码中省略：

```
 $the_query = new WP_Query( array(
     'post_type'   => $post_type,
     'numberposts' => '2',
     'orderby'     => 'modified',
 )); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-21T12:50:00.057

尝试

```
<?php query_posts($query_string . '&post_type=$post_type&orderby=modified&order=desc'); ?> 
```

# mysql - SQL 从 2 个表中选择并按月分组

> ID：14438921
> 
> 赞同：0
> 
> 时间：2013-01-21T12:45:01.337
> 
> 标签：mysql, sql, select

好的，所以我有 2 张桌子

第一个被调用`msg`，另一个是`msg_t`

`msg`(id, send_type, ..) `msg_t`(id, msg_id, send_time)

我要做的是获取`msg`send_type = 1 的所有行

并计算`msg_t`每个条目`msg`并按月分组

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:47:15.670

```
SELECT  a.ID, MONTHNAME(b.send_time), COUNT(b.msg_id) totalCount
FROM    msg a
        LEFT JOIN msg_t b
            ON a.ID = b.msg_id
WHERE   a.send_type = 1
GROUP   BY a.ID, MONTH(b.send_time) 
```

*   [月名()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_monthname)
*   [月（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)

通过 using ，对于表上没有记录`LEFT JOIN`的将显示零值`msg.ID``msg_t`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:47:27.237

```
SELECT
  m.id,
  MONTH(send_time)
  COUNT(t.*)
FROM msg m
INNER JOIN msg_t t ON m.id = t.msg_id
WHERE m.send_type = 1
GROUP BY m.id,
         MONTH(send_time) 
```

# c# - 功能区控制焦点在按钮点击

> ID：14438922
> 
> 赞同：2
> 
> 时间：2013-01-21T12:45:01.450
> 
> 标签：c#, .net, wpf, ribbon, ribbon-control

我对 Microsoft 功能区控件有疑问。如果我将焦点放在文本框中并单击功能区菜单中的按钮，则焦点仍保留在`Textbox`. 所以我的文本框属性`ViewModel`没有得到更新。

我在网上搜索但没有找到解决方案。我尝试设置`FocusManager.IsFocusScope`和`Focusable`控制`Ribbon`没有效果。

我想要的只是如果单击按钮，文本框会失去焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T13:11:26.130

我会想象这样的事情：（假设功能区的 x:name 是功能区）

```
ribbon.PreviewMouseDown += handlerMethod;
public void handlerMethod(object sender, MouseEventArgs e)
{
    ribbon.Focus();
} 
```

# php - 算术 shell_exec() 返回 0 php

> ID：14438923
> 
> 赞同：0
> 
> 时间：2013-01-21T12:45:03.680
> 
> 标签：php, math, return, shell-exec

我有这样的数据，

```
field1,field2
test,11
test,3
test,14
test,200
test,8 
```

我想总结所有field2。我使用 shell_exec。

```
$execute = 'x=0;for i in `cut -d\',\' -f2 /app/tibs/tosweb/CCS1/tos/temp/test2.txt`; do let x+=i; echo $x; done';
$output = shell_exec($execute);
echo "<pre>".var_export($output, TRUE)."</pre>\\n"; 
```

我不明白，为什么 x 的值总是返回 0？请帮助我的朋友，谢谢你。

*对不起我的英语不好：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:56:29.790

`cut`不接受多字符分隔符（由于转义，它会将您的转义分隔符视为多字符）。所以你可以使用未转义的：

```
x=0;for i in `cut -d"," -f2 data.txt `; do let x+=i; echo $x; done 
```

或者`awk`相反

```
x=0;for i in `awk -F\',\' '{ print $1 }'  data.txt `; do let x+=i; echo $x; done 
```

为了防止转义，请使用 doule qoutes 将命令括起来：

```
$execute = "x=0;for i in `cut -d',' -f2 /app/tibs/tosweb/CCS1/tos/temp/test2.txt`; do let x+=i; echo $x; done"; 
```

# android - Android - 创建一个带有水平可滚动行的垂直 ListView

> ID：14438926
> 
> 赞同：0
> 
> 时间：2013-01-21T12:45:09.500
> 
> 标签：android, listview, android-viewpager, horizontal-scrolling

我需要一个 Vertical ListView，其中每一行都是一个水平滚动的项目列表。每个项目都是一个带有按钮的图像。我需要该应用程序与 Android 2.2 兼容。

我在这里阅读了 3 个可行的解决方案

1.  使用自定义的 Horizo​​ntal ListView 作为行

2.  在 ListView中使用 ViewPager 作为行 [ViewPager](https://stackoverflow.com/questions/8674529/viewpager-inside-listview)

3.  使用水平滚动视图

这些解决方案有点陈旧，每个都有批评者。

所以我想知道，在目前的状态下，是否有针对我的问题的“官方”解决方案？或者，什么是最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:52:37.883

如果垂直 ListView 中的项目数是固定的，那么最好为每个项目使用 Horizo​​ntal ListViews。

# python - Python 压缩一个子文件夹而不是整个文件夹路径

> ID：14438928
> 
> 赞同：10
> 
> 时间：2013-01-21T12:45:11.293
> 
> 标签：python, subdirectory, zipfile

我有一个程序可以压缩文件夹中的所有内容。我没有编写这段代码，但我在网上的某个地方找到了它，我正在使用它。我打算压缩一个文件夹，例如 C:/folder1/folder2/folder3/ 。我想将文件夹 3 及其所有内容压缩到一个文件中，比如文件夹 3.zip。使用下面的代码，一旦我压缩它，folder3.zip 的内容将是 folder1/folder2/folder3/and files。我不希望整个路径被压缩，我只希望我对压缩感兴趣的子文件夹（在本例中为文件夹 3）。我尝试了一些 os.chdir 等，但没有运气。

```
def makeArchive(fileList, archive):
    """
    'fileList' is a list of file names - full path each name
    'archive' is the file name for the archive with a full path
    """
    try:
        a = zipfile.ZipFile(archive, 'w', zipfile.ZIP_DEFLATED)

        for f in fileList:
            print "archiving file %s" % (f)
            a.write(f)
        a.close()
        return True
    except: return False 

def dirEntries(dir_name, subdir, *args):
    # Creates a list of all files in the folder
    '''Return a list of file names found in directory 'dir_name'
    If 'subdir' is True, recursively access subdirectories under 'dir_name'.
    Additional arguments, if any, are file extensions to match filenames. Matched
        file names are added to the list.
    If there are no additional arguments, all files found in the directory are
        added to the list.
    Example usage: fileList = dirEntries(r'H:\TEMP', False, 'txt', 'py')
        Only files with 'txt' and 'py' extensions will be added to the list.
    Example usage: fileList = dirEntries(r'H:\TEMP', True)
        All files and all the files in subdirectories under H:\TEMP will be added
        to the list. '''

    fileList = []
    for file in os.listdir(dir_name):
        dirfile = os.path.join(dir_name, file)
        if os.path.isfile(dirfile):
            if not args:
                fileList.append(dirfile)
            else:
                if os.path.splitext(dirfile)[1][1:] in args:
                    fileList.append(dirfile)
            # recursively access file names in subdirectories
        elif os.path.isdir(dirfile) and subdir:
            print "Accessing directory:", dirfile
            fileList.extend(dirEntries(dirfile, subdir, *args))
    return fileList 
```

您可以通过 调用它`makeArchive(dirEntries(folder, True), zipname)`。

关于如何解决这个问题的任何想法？我正在使用 Windows 操作系统和 python 25，我知道在 python 2.7 中有 shutil make_archive 有帮助，但由于我正在使用 2.5，我需要另一个解决方案：-/

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-21T13:04:54.063

您必须给出一个使用相对路径的`arcname`参数。[`ZipFile.write()`](http://docs.python.org/2/library/zipfile.html#zipfile.ZipFile.write)通过提供要删除的根路径来做到这一点`makeArchive()`：

```
def makeArchive(fileList, archive, root):
    """
    'fileList' is a list of file names - full path each name
    'archive' is the file name for the archive with a full path
    """
    a = zipfile.ZipFile(archive, 'w', zipfile.ZIP_DEFLATED)

    for f in fileList:
        print "archiving file %s" % (f)
        a.write(f, os.path.relpath(f, root))
    a.close() 
```

并调用它：

```
makeArchive(dirEntries(folder, True), zipname, folder) 
```

我已经把毯子拿走了`try:`，`except:`; 这里没有用，只会隐藏你想知道的问题。

该[`os.path.relpath()`](http://docs.python.org/2/library/os.path.html#os.path.relpath)函数返回相对于 的路径`root`，有效地从存档条目中删除该根路径。

在 python 2.5 上，该`relpath`功能不可用；对于这个特定的用例，以下替换将起作用：

```
def relpath(filename, root):
    return filename[len(root):].lstrip(os.path.sep).lstrip(os.path.altsep) 
```

并使用：

```
a.write(f, relpath(f, root)) 
```

请注意，上述功能仅适用于您保证以;开头`relpath()`的特定情况。在 Windows 上，一般情况要复杂得多。如果可能的话，您真的很想升级到 Python 2.6 或更高版本。`filepath``root``relpath()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T13:02:56.943

[ZipFile.write](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.write)有一个可选参数`arcname`。使用它来删除部分路径。

您可以将方法更改为：

```
def makeArchive(fileList, archive, path_prefix=None):
    """
    'fileList' is a list of file names - full path each name
    'archive' is the file name for the archive with a full path
    """
    try:
        a = zipfile.ZipFile(archive, 'w', zipfile.ZIP_DEFLATED)

        for f in fileList:
            print "archiving file %s" % (f)
            if path_prefix is None:
                a.write(f)
            else:
                a.write(f, f[len(path_prefix):] if f.startswith(path_prefix) else f)
        a.close()
        return True
    except: return False 
```

不过，Martijn 使用 os.path 的方法要优雅得多。

# fonts - Adobe CFF 格式的“私人 DICT 数据”有什么用

> ID：14438930
> 
> 赞同：2
> 
> 时间：2013-01-21T12:45:19.093
> 
> 标签：fonts, adobe, postscript, compact-font-format

如 Adob​​e“紧凑字体格式”(CFF) 规范 ( [http://partners.adobe.com/public/developer/en/font/5176.CFF.pdf](http://partners.adobe.com/public/developer/en/font/5176.CFF.pdf) ) 中所述，CFF 压缩后记中有一个“私有”字体字典字体（例如带有 TrueType 轮廓的 OpenType 字体）。

有人可以解释一下 CFF 字体中的“私有 DICT 数据”有什么用吗？

以及如何检查“私人 DICT 数据”的字体 - 例如在 FontLab Studio 中？

* * *

**更新：**

似乎 FontLab Studio 显示 Private DICT 提示数据如下：

![在此处输入图像描述](../Images/39f80414a3c2af1bb6ef479fae9155f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T17:15:34.013

Private DICT 数据相当于 type 1 字体 Private dict（有几个额外的值，在 CFF 规范中定义）。您可以在 Adob​​e Type 1 字体格式（第 5 章）中找到各种条目的详细信息，不过我并没有想到一个 URL。

私有数据是存储字体范围提示信息的地方（即它有利于提示）。

您*必须*有一个 Private DICT，但如果所有值都是默认值，则它可以为空。我不知道 Font Lab Studio 对这些信息做了什么（如果有的话）。

# oracle - schema_version 没有选择权限？

> ID：14438934
> 
> 赞同：11
> 
> 时间：2013-01-21T12:45:28.787
> 
> 标签：oracle, flyway

我使用 test/test 作为用户/密码执行 flyway:init 并得到以下输出：

```
[INFO] Creating schema "MY_SCHEMA" ...
[INFO] Creating Metadata table: "MY_SCHEMA"."schema_version"
[INFO] Schema initialized with version: 1 
```

然后我使用 MY_SCHEMA/flyway 作为用户/密码连接到 oracle，但我无法在 schema_version 上进行选择，我得到“ORA-00942：表或视图不存在”。用户测试也无法在 schema_version 上进行选择。

如何查看 schema_version 表中的内容？

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-21T15:34:13.463

见[http://flywaydb.org/documentation/faq.html#case-sensitive](http://flywaydb.org/documentation/faq.html#case-sensitive)

必须引用表名才能从中进行选择。

# c# - 如何在 Windows 窗体应用程序中显示 MJPEG 流？

> ID：14438935
> 
> 赞同：4
> 
> 时间：2013-01-21T12:45:33.920
> 
> 标签：c#, windows-forms-designer, mjpeg

我有一个视频流，它以 MJPEG over HTTP 的形式出现。

有没有办法在 Windows 窗体应用程序中显示这样的流？

我已经有一组例程用于显示来自网络服务器的简单 JPEG，但不是连续的 MJPEG。也许这两个问题是相关的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-21T15:51:53.893

I have found a library which works rather nicely: [http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder](http://channel9.msdn.com/coding4fun/articles/MJPEG-Decoder)

You can use it as follows in a C# solution

```
// class attribute
MjpegDecoder m_mjpeg;

// In the constructor
m_mjpeg = new MjpegDecoder();
m_mjpeg.FrameReady += mjpeg_FrameReady;

// Private method
private void mjpeg_FrameReady(object sender, FrameReadyEventArgs e)
{

        yourPictureBox.Image = e.Bitmap;
} 
```

Source is also available for debugging.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T11:52:41.013

我知道已经很晚了，但我发现这个解决方案非常适合我的需求，并且可能也是你的。

这里是：[Motion JPEG 流媒体服务器](http://www.codeproject.com/Articles/371955/Motion-JPEG-Streaming-Server)

# java - 我的服务无法在 Android 上运行，为什么？

> ID：14438939
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:45:49.060
> 
> 标签：java, android

这里是代码：

```
public class MyServeice extends Service 
{
    private Timer pushTimer;
    private final int NOTEF_ID = 1234;
    NotificationManager manager;

    @Override
    public IBinder onBind(Intent arg0) 
    {
        return null;
    }

    @Override
    public void onCreate() 
    {
        Log.i("MyActivity", "1");
        //pushTimer = new Timer();
        manager = (NotificationManager)getSystemService(NOTIFICATION_SERVICE);
    }

    @Override
    public void onDestroy() 
    {
        Log.i("MyActivity", "2");
        //pushTimer.cancel();
    }

    @Override
    public void onStart(Intent intent, int startid) 
    {
        Log.i("MyActivity", "3");
        //pushTimer.schedule(new TimerTask()
        //{
        //  @Override
        //  public void run() 
        //  {
                Notification not = new Notification(R.drawable.ic_launcher, "Custom notification", System.currentTimeMillis());
                PendingIntent notIntent = PendingIntent.getActivity(this , 0, new Intent(this, MainActivity.class), 0);
                not.setLatestEventInfo(this,  "Title", "Text", notIntent);
                manager.notify(NOTEF_ID, not);
                manager.cancel(NOTEF_ID);
        //  }
        //}, 0L, 60L * 1000);
    }

} 
```

我尝试从我的 MainActivity 活动类开始它（在我认为问题出在计时器之前，但现在我评论它）。此处开始代码：

`startService(new Intent(this, MyServeice.class));`

没有显示来自服务类的日志，所以我决定根本没有启动服务。应用程序不会崩溃并正常启动。你能检查我的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:01:42.860

使用此方法：

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {} 
```

这是关于服务的好教程：[点击这里！](http://marakana.com/forums/android/examples/60.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:53:12.813

你在**MyService**类中犯了一个错误

你用

```
 @Override
 public void onStart(Intent intent, int startid) 
```

& 在**服务**生命周期中没有 onStart(..) 方法

试试这个方法而不是上面的

```
 @Override
  public int onStartCommand(Intent intent, int flags, int startId) 
```

**编辑：**

&第二个你必须在清单文件中声明服务，比如：

```
<manifest ... >
  ...
  <application ... >
      <service android:name=".MyServeice" />
      ...
  </application>
</manifest> 
```

有关服务的更多信息，请参阅此文档 [http://developer.android.com/guide/components/services.html](http://developer.android.com/guide/components/services.html)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-21T13:01:58.417

问题关闭。将有关我的服务类的信息添加到清单中解决了我的问题。

# r - R中数据的标准化

> ID：14438942
> 
> 赞同：2
> 
> 时间：2013-01-21T12:45:51.553
> 
> 标签：r

我正在对大型电子表格进行一些 PCA 分析，并根据负载选择我的 PC。据我所知，由于我的数据有不同的单位，因此在进行 PCA 分析之前必须进行标准化。

该功能是否`prcomp()`固有地执行标准化？

我正在阅读`prcomp()`帮助文件，并在以下参数下看到了这个`prcomp()`：

```
scale. a logical value indicating whether the variables should be scaled to have
       unit variance before the analysis takes place. The default is FALSE for 
       consistency with S, but in general scaling is advisable. Alternatively, a
       vector of length equal the number of columns of x can be supplied. The
       value is passed to scale. 
```

“缩放变量以具有单位方差”是否意味着标准化？

我目前正在使用这个命令：

```
prcomp(formula = ~., data=file, center = TRUE, scale = TRUE, na.action = na.omit) 
```

够了吗？还是我应该做一个单独的标准化步骤？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:52:09.863

是的，`scale = TRUE`将导致所有变量都被缩放为具有单位方差（即方差为 1，因此标准差为 1）。这是“标准化”的常见定义，但还有其他方法可以做到这一点等。`center = TRUE`平均中心数据，即从该变量的每个观察值中减去变量的平均值。

当您执行此操作 ( `scale = TRUE, center = TRUE`) 而不是 PCA 位于数据集的协方差矩阵上时，它位于相关矩阵上。因此，PCA 找到了解释变量之间相关性而不是协方差的轴。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T12:49:37.220

如果您通过标准化的意思是每列除以它们的标准差，然后减去每列的平均值，那么使用`scale = TRUE`and`center = TRUE`就是您想要的。

# cakephp - 如何使用 cakephp 维护子域中的会话？

> ID：14438948
> 
> 赞同：2
> 
> 时间：2013-01-21T12:46:06.467
> 
> 标签：cakephp

我想在我的两个域 alpha.domain.com 和 wwww.domain.com 之间保持会话。我已经在 bootstrap.php 中进行了更改

```
ini_set("session.cookie_domain", ".domain.com"); 
```

并且还在 core.php 中将安全级别设置为“低”，但无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T18:37:05.123

您需要使用设置[cookie域](http://book.cakephp.org/2.0/en/core-libraries/components/cookie.html)的蛋糕方式。

```
public $components = array('Cookie');
public function beforeFilter() {
    parent::beforeFilter();
    $this->Cookie->domain = 'example.com';
} 
```

注意：这是针对 CakePHP 2.0

# c# - 离线应用-数据库

> ID：14438950
> 
> 赞同：1
> 
> 时间：2013-01-21T12:46:11.550
> 
> 标签：c#, sql, database, desktop-application, strongly-typed-dataset

我在为桌面应用程序选择数据库时遇到问题。该应用程序将离线工作，并且需要一个关系数据库。

我的第一个想法是创建一个强类型数据集并将数据保存在 xml 中。但这不是一个安全的选择。

第二个想法是把 SQL Express 放在电脑上，但这会很累。

我应该使用哪个选项？也许你有其他想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T12:49:33.943

您可以将[SQLite](http://www.sqlite.org/)与 SQLite-NET 或[SQL Server Compact Edition](http://www.microsoft.com/en-us/sqlserver/editions/2012-editions/compact.aspx)一起用于离线数据库。

快速编辑：[这里](https://stackoverflow.com/questions/2278104/sql-ce-sqlite-what-are-the-differences-between-them)和[这里](https://stackoverflow.com/questions/4839342/sql-server-compact-4-0-vs-sqlite)是 SQL Server CE 与 SQLite 的比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:48:33.693

您应该使用标准的 *.mdf 文件内数据库和使用 LINQ 的 EF。客户不需要在他的机器上安装除 .NET 以外的任何东西。

# android - 生成用户唯一哈希

> ID：14438955
> 
> 赞同：0
> 
> 时间：2013-01-21T12:46:25.270
> 
> 标签：android

我需要生成一个哈希，这对于 android 设备上的用户来说是唯一的。因为他们可以有多个用户，这对我来说似乎很困难。我正要使用设备的 IMEI（或另一台设备，如果有的话），但由于 android 支持多个用户，我必须使用其他东西，如果可能的话不更改我的权限（目前我有互联网和阅读/写存储权限）

有任何想法吗？

对于散列本身，我会使用 MD5 或 SHA1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:32:33.937

[按照 Google 的建议，](http://android-developers.blogspot.com/2011/03/identifying-app-installations.html)生成 UUID 并将其存储在设备上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T15:52:52.620

我在所有平台上都使用 OpenUDID，效果很好！[https://github.com/vieux/OpenUDID](https://github.com/vieux/OpenUDID)

# java - 休眠查询到 ArrayList

> ID：14438959
> 
> 赞同：1
> 
> 时间：2013-01-21T12:46:29.233
> 
> 标签：java, hibernate

我对 Java 和 Hibernate 非常陌生，在从 Unix 背景被带到一个有问题的 Java 项目之后，我需要帮助。

该项目目前设置了 Hibernate，并设置了搜索文档元数据数据库的条件，并且当前假设使用这行代码的“唯一结果”；

```
doc = (DocumentDetails) criteria.uniqueResult(); 
```

我认为，这意味着它只需要一份文件的详细信息。但是我们现在可以返回多个可能的文档详细信息，我需要将它们放入一个`ArrayList`以确定哪个是最新文档。

任何帮助将不胜感激如何做到这一点。我为我的前进而道歉，但我需要快速解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T12:51:48.763

```
List<DocumentDetails> result = criteria.list(); 
```

就如此容易。Hibernate[已记录在案](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/Criteria.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T12:52:38.267

```
ArrayList<DocumentDetails> doc = (ArrayList<DocumentDetails>) criteria.list(); 
```

# qt - Qt：QPSQL 准备在课堂上不起作用

> ID：14438961
> 
> 赞同：3
> 
> 时间：2013-01-21T12:46:34.757
> 
> 标签：qt, postgresql, qsqlquery

我试图将用于连接本地 PostgreSQL 服务器的代码从我的“main.cpp”文件外包到一个名为“database.cpp”的单独类中。

当我在“main.cpp”中有代码时，连接工作得很好：

**主文件**

```
QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");
QSqlQuery query(db);

qint32 declareConnection()
{
    db.setHostName("127.0.0.1");
    db.setPort(5432);
    db.setDatabaseName("postgres");
    db.setUserName("postgres");
    db.setPassword("password");

    return 0;
}

qint32 createUser(QString username, QString password)
{
    if (db.open())
    {
        db.transaction();

        query.prepare("INSERT INTO users (name, password) VALUES (?, ?);");
        query.bindValue(0, username);
        query.bindValue(1, toMD5(password));

        query.exec();
        query.finish();

        db.commit();
        db.close();
    }

    return 0;
}

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    qDebug() << "Declare Database: " << declareConnection();
    qDebug() << "Create User: " << createUser("Testuser", "Testpassword");

    return a.exec();
} 
```

但是在我将函数放入“database.cpp”之后，每次我尝试执行它时，prepare.query() 都会失败。这是我当前的代码：

**主文件**

```
int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    Database postgre;

    qDebug() << "Declare Database: " << postgre.declareConnection();
    qDebug() << "Create User: " << postgre.createUser("Testuser", "Testpassword");

    return a.exec();
} 
```

**数据库.h**

```
class Database : public QObject
{
Q_OBJECT
public:
explicit Database(QObject *parent = 0);

qint32 declareConnection();
qint32 createUser(QString username, QString password);

QSqlDatabase db();
}; 
```

**数据库.cpp**

```
QSqlDatabase Database::db()
{
    return QSqlDatabase::database();
}

qint32 Database::declareConnection()
{
    QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");

    db.setHostName("127.0.0.1");
    db.setPort(5432);
    db.setDatabaseName("postgres");
    db.setUserName("postgres");
    db.setPassword("password");

    return 0;
}

qint32 Database::createUser(QString username, QString password)
{
    if (db().open())
    {
        db().transaction();

        QSqlQuery query(db());
        query.prepare("INSERT INTO users (name, password) VALUES (?, ?);");
        query.bindValue(0, username);
        query.bindValue(1, toMD5(password));

        query.exec();
        query.finish();

        db().commit();
        db().close();
    }

    return 0;
} 
```

数据库的声明似乎工作得很好，但是当涉及到“createUser()”函数时，“query.prepare()”命令总是存在这个问题。

**数据库已打开**，因此可以正常工作。当我签入调试时，事务
也**处于打开状态。****准备是错误**
的。 query.exec() 说：**第 1 行末尾的语法错误： EXECUTE ^**。 QPSQL：**无法创建查询**。 警告：**没有未结交易**。（但是是开放的？？？）

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T14:39:06.770

问题就在这里

> 无效数据库::declareConnection() { QSqlDatabase db = QSqlDatabase::addDatabase("QPSQL");

您在堆栈上声明了**局部**变量。`db`决定是：

```
class Database : public QObject
{
   ...
   QSqlDatabase & db() { return m_db; }
private:
   QSqlDatabase m_db;
};

void Database::declareConnection()
{
    m_db = QSqlDatabase::addDatabase("QPSQL");
...
} 
```******

# oauth-2.0 - 使用 OAuth2 在 Plone 站点上创建第三方 API？

> ID：14438963
> 
> 赞同：4
> 
> 时间：2013-01-21T12:46:43.813
> 
> 标签：oauth-2.0, plone

我们可能想要创建第三方 API 来访问我们的 Plone CMS 站点数据。在第三方系统中共享用户权限的一种可能方法是 OAuth2，如 Twitter、Tumblr 和 Facebook 所使用的。这样，第三方在用户单击对话框中的“允许”以访问自己的数据后获得用户特权。

*   是否存在 Plone 充当 OAuth2 主机的现有解决方案（不确定术语）

*   此用例可能还有哪些其他选项

我不着急，这是 2014 年的计划 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T22:25:21.370

据我所知，pmr2.oauth 是唯一一个为 Plone 提供 OAuth 提供程序支持的包（披露：我也写了这个）（即这让 Plone 充当“OAuth 主机”，包括对范围的支持，以便让用户知道什么他们允许，如 Twitter 等）。我简要介绍了另一个名为 wsgioauth 的包，但它是一个相当通用的包，它是针对 wsgi 的，所以我最终构建了自己的包（看起来 wsgioauth 已经 3 年没有维护了）。

目前只支持OAuth 1.0；原因是在开发时没有好的 OAuth 2.0 库，尤其是对于提供者而言。直到最近，对 RFC 6749（实际的 OAuth 2.0 标准）的支持才开始通过 oauthlib 浮出水面，oauthlib 是对 pmr2.oauth 的请求进行签名的库。也就是说，希望我以足够模块化的方式编写它以插入对 OAuth 2.0 的支持，或者至少核心很容易修改以包含对此的支持。我非常乐意让 Plone 社区接受并改进它（甚至分叉它，或任何熟悉该领域的人），因为我还没有任何立即计划包括对 OAuth 2.0 的支持。

# regex - .htaccess/symfony2 - 重写重定向 /en/ 不匹配 /en

> ID：14438965
> 
> 赞同：0
> 
> 时间：2013-01-21T12:46:46.857
> 
> 标签：regex, .htaccess, symfony, symfony-2.1

我的 .htaccess 中有以下代码：

```
RedirectMatch permanent /en/(.*) /$1 
```

或者

```
RewriteRule ^en/?(.*)?/?$  $1  [R=301,L,QSA] 
```

使用和/或 RewriteBase /

我想要做的是将每个重定向`http://example.com/en/somthing`到`http://example.com/somthing`（无论是否带有斜杠）

相反，当我访问`http://example.com/en/admin`（不带斜杠）时，我被重定向到`http://example.com//admin`（带有 2 个斜杠）当我访问`http://example.com/en/admin/`（带有斜杠）时，一切正常.. 其他每个 url 都可以使用尾部斜杠而不是.. 我正在使用symfony2 如果这有帮助，这是我的 routing.yml

```
deo_secure:
    resource: "@DeoSecureBundle/Resources/config/routing.yml"
    prefix:   /admin

welcome:
    pattern:  /
    defaults: { _controller: AcmeDemoBundle:Welcome:index }

_demo:
    resource: "@AcmeDemoBundle/Controller/DemoController.php"
    type:     annotation
    prefix: /demo

fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml"

fos_user_profile:
    resource: "@FOSUserBundle/Resources/config/routing/profile.xml"
    prefix: /profile

fos_user_register:
    resource: "@FOSUserBundle/Resources/config/routing/registration.xml"
    prefix: /register

fos_user_resetting:
    resource: "@FOSUserBundle/Resources/config/routing/resetting.xml"
    prefix: /resetting

fos_user_change_password:
    resource: "@FOSUserBundle/Resources/config/routing/change_password.xml"
    prefix: /profile 
```

deo_secure 的路由文件是：

```
deo_secure_homepage:
    pattern:  /
    defaults: { _controller: DeoSecureBundle:Admin:index } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T15:13:05.710

You could try This

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase   /
RewriteCond %{REQUEST_URI} ^(.*)/en/(.*) 
RewriteRule ^ /%2 [R=301,L] 
```

sample :

[http://sepidarcms.ir/en/admin/](http://sepidarcms.ir/en/admin/)

redirect to:

[http://sepidarcms.ir/admin/](http://sepidarcms.ir/admin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:38:24.660

您必须将原始指令更改为：

```
RedirectMatch permanent ^/en/(.*)$ /$1 
```

或更好地将其替换为：

```
Redirect permanent /en/ / 
```

# javascript - 如何防止除文本区域外的所有表单元素上的回车/输入

> ID：14438966
> 
> 赞同：1
> 
> 时间：2013-01-21T12:46:46.583
> 
> 标签：javascript, jquery, textarea

我最近接手了一个现有项目，遇到了 textareas 和回车不起作用的问题。经过一番挖掘，我找到了以下代码：

```
$(window).keydown(function (event) {
    if (event.keyCode == 13) {
        event.preventDefault();
        return false;
    }
}); 
```

所以，我认为这是为了防止表单元素在访问者/用户按下回车时提交表单。

知道如何保留上述代码片段的功能，并且仍然允许在 textareas 中回车吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T13:54:49.983

只是为了结束这个问题，我找到了后续问题的解决方案：如何防止在除 textareas 之外的所有表单元素上返回/输入。

```
$(document).keypress(function (e) {
    if (e.which == 13 && e.target.nodeName != "TEXTAREA") {
        event.preventDefault();
        return false;
    }
}); 
```

# javascript - documentElement 的 childNodes 返回一个 null

> ID：14438970
> 
> 赞同：1
> 
> 时间：2013-01-21T12:46:55.477
> 
> 标签：javascript

我正在执行一些简单的 JS 遍历测试，我想知道为什么我的 documentElement 包含一个空对象？

```
<html>
    <head>
        <title>My document</title>
    </head>
    <body>
        <h1>Some header</h1>
        <p id="pID">Some paragraph</p>
        <p name="pNAME">Another paragraph/p>
    </body>
</html>
<script type="text/javascript">
    var rootElement = document.documentElement;
    var childNodes = rootElement.childNodes;

    for (var i = 0; i < childNodes.length; i++) {
      document.write(childNodes[i].localName);
      document.write("<br>");
    }
</script> 
```

它返回`head, null, body`。但是为什么里面有 3 个`childNodes`呢`rootElement`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:05:23.753

如果您只列出对象而不是它们`localName`，您将看到：

```
[object HTMLHeadElement]
[object Text]
[object HTMLBodyElement] 
```

所以你收到`null`的`localName`文本节点。要解决此问题，您需要`children`而不是`childNodes`：

```
<script type="text/javascript">
    var rootElement = document.documentElement;
    var childNodes = rootElement.children;

    for (var i = 0; i < childNodes.length; i++) {
      document.write(childNodes[i]);
      document.write("<br>");
    }
</script> 
```

这是[JSFiddle](http://jsfiddle.net/mgechev/aCBSE/)中的演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T12:58:20.283

`</head>`和之间的新行`<body>`被认为是文本（`[object Text]`），所以它的`.localName`属性是`null`。

如果你尝试这个，它应该只输出 2 个元素

```
 <html>
    <head>
        <title>My document</title>
    </head><body>
        <h1>Some header</h1>
        <p id="pID">Some paragraph</p>
        <p name="pNAME">Another paragraph</p>
    </body>
</html>

    <script type="text/javascript">
        var rootElement = document.documentElement;
        var childNodes = rootElement.childNodes;

        for (var i = 0; i < childNodes.length; i++) {
          document.write(childNodes[i].localName);
          document.write("<br>");
        }
    </script> 
```

# sql-server - 实体框架代码首先不在 vs2010 中创建数据库

> ID：14438971
> 
> 赞同：0
> 
> 时间：2013-01-21T12:46:55.613
> 
> 标签：sql-server, asp.net-mvc-3, visual-studio-2010, entity-framework

我是 vs2010 和实体框架（以及 ASP.NET MVC 以及......我来自 winforms vs2005 背景）以及天蓝色平台的新手，并且很快将开始使用这些技术的项目。我已经为 vs2010 安装了 vs2010 和 windows azure sdk 工具包，并且正在运行本教程，将 ASP.NET Web 应用程序部署到 Windows Azure 云服务和 SQL 数据库。

[http://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/](http://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)

我已经到了“添加 SQL 支持”部分，按照说明进行操作，当我编译和运行时，没有创建任何数据库。我正在使用 sql server 2008 r2。任何想法为什么会这样？sql server 日志中根本没有显示任何内容。我的连接详细信息看起来不错，我是否缺少某种附加功能或某些权限设置需要更改？干杯，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-22T05:58:05.127

这是我自己整理的。如果您想知道我在教程页面的评论中发布的答案，只需点击链接（评论部分中的名称 Mathew）。

[http://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/](http://www.windowsazure.com/en-us/develop/net/tutorials/cloud-service-with-sql-database/)

# php - CKEDITOR，当按下回车（带br）时，文本区域中显示奇怪的字符

> ID：14438977
> 
> 赞同：0
> 
> 时间：2013-01-21T12:47:19.810
> 
> 标签：php, javascript, editor, ckeditor

在 ckeditor（最新版本）中，我将 enterMode 配置为使用 ENTER_BR。但是每次我在编辑器中按 enter 时，它都会在新创建的行前面显示一些奇怪的字符（“â€‹”），我不知道为什么。

有谁知道如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T12:29:38.847

我在工作中也遇到了这个问题，在一个安装了 ckeditor（我相信是 4.0）的遗留应用程序上。

对我们来说，这是 html 中 script 标签上的 charset 属性的问题。它们已设置为 ISO-8859-1：

```
<script src="somejsfile.js" charset="ISO-8859-1"></script> 
```

删除 charset 属性或将其设置为 UTF-8 为我们解决了这个问题。

# php - JQuery：通过 AJAX 调用提交包含多个字段的表单

> ID：14438985
> 
> 赞同：1
> 
> 时间：2013-01-21T12:47:42.790
> 
> 标签：php, javascript, jquery

我正在开始网络编程，因为到目前为止我只用于网页设计。

我的问题是我做了一项调查，显示每个部门有 12 个问题的表格。部门的数量取决于以前称为“部分”的选择器。

因此，如果“section”有 1 个部门，表单可以显示 12 个问题字段，如果“section”有 10 个部门，则可以显示 120 个问题字段。

在提交之前，我将数据序列化并编码为 Base64：

```
// Setup call
    $.ajax({
      type: 'GET',
      url: 'survey_actions.php&action=save',
      data: { parameters: Base64.encode($("#mySurvey").serialize()) },
      dataType: 'text',
      beforeSend:function(){
        // Load waiting panel
        loader("on");
      },
      success:function(response){
[...] 
```

我确定这不是干净的方法，因此我遇到了以下问题：当要填充的字段数量很少（例如 12）时，一切正常，但是当数字较高时（例如 72） ，服务器没有接收到所有数据。

字段命名如下：“sectorID_questionID”。所以在帖子中，参数字符串是：

```
...&1_0=X&1_1=X&1_2=X&1_3=X... 
```

（X 是用户给问题的值）。

所以问题是：解决它并使用 AJAX 将大量数据发送到服务器而不进行修剪的最合适的方法是什么？

真诚的，感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T12:53:11.417

将 ajax 类型更改为`POST`，而不是`GET`从中获取数据`$_POST`。您的数据可能超出最大查询字符串长度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:53:28.897

Ajax 只能在查询字符串中获取数据。因此，如果没有正确发送大数据，则可能是您的 server/application.platform 的限制。您可能会考虑增加 max_input_vars。并确保您使用 POST 而不是 GET

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:06:21.410

```
 $.ajax({
      type: "POST",
      url: "some.php",
      data: { name: "John", location: "Boston" }
    }).done(function( msg ) {
      alert( "Data Saved: " + msg );
    }); 
```

只需使用上述语法，我认为您不需要序列化数据

# node.js - NodeJS 模块.exports

> ID：14438986
> 
> 赞同：0
> 
> 时间：2013-01-21T12:47:49.450
> 
> 标签：node.js

我有 2 个功能

```
 module.exports = (app, express) ->
  config = nconf.get("database:#{app.settings.env}")
  switch app.settings.env
    when 'production'
      app.db = mongoskin.db("#{config.host}:#{config.port}/#{config.name}",  {journal: false})
    else 
      app.db = mongoskin.db("#{config.host}:#{config.port}/#{config.name}",  {journal: false})

module.exports.db = (db , env) ->
  config = nconf.get("database:#{env}")
  switch env
    when 'production'
      db = mongoskin.db("#{config.host}:#{config.port}/#{config.name}",  {journal: false})
    else 
      db = mongoskin.db("#{config.host}:#{config.port}/#{config.name}?",  {journal: false})
  return db 
```

在某些地方，我们正在使用第二个功能。但是，我们想摆脱一个功能。我们如何在不传递 app 参数的情况下进行操作？有没有更好的方法来定义第一个函数？

谢谢，拉贾。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:47:11.360

添加了一个 DBSingleton 类并在任何地方使用该对象。

# android - 在android中创建目录

> ID：14438990
> 
> 赞同：0
> 
> 时间：2013-01-21T12:48:06.627
> 
> 标签：android

android 是否有某种限制，你可以一次创建多少个目录？因为我实际上是在尝试将我的数据库保存在子子目录中。所以我正在使用以下代码..

```
DATABASE_NAME = Environment.getExternalStorageDirectory() + "/AllDatabases/" + comp
            + "/Balance/" + wy + ".db"; 
```

当我首先创建一个名为“AllDatabases”的文件夹，然后在其中创建一个带有变量“comp”的特定值的子文件夹（比如“lol”）时，代码工作得非常好

```
 where comp = lol 
```

然后它在那里成功地创建了数据库。但是当我再次删除创建的文件夹并直接尝试使用上面的语句构建它时，我正在为我的 DATABASE_NAME 分配一些值，它会强制关闭我的应用程序。这就是 LogCat 显示的...

```
01-21 18:03:30.194: E/Database(19098): sqlite3_open_v2("/mnt/sdcard/lol/MyLedgers/2012-2013.db", &handle, 6, NULL) failed
01-21 18:03:30.254: E/SQLiteOpenHelper(19098): Couldn't open /mnt/sdcard/lol/MyLedgers/2012-2013.db for writing (will try read-only):
01-21 18:03:30.254: E/SQLiteOpenHelper(19098): android.database.sqlite.SQLiteException: unable to open database file
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1921)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:883)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:960)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:953)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:548)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:203)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:98)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:158)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at com.balance.start.LedgerInfoDB.opentoread(LedgerInfoDB.java:78)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at com.balance.start.MainView.onCreate(MainView.java:101)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.ActivityThread.access$2300(ActivityThread.java:126)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.os.Looper.loop(Looper.java:123)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at android.app.ActivityThread.main(ActivityThread.java:4633)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at java.lang.reflect.Method.invokeNative(Native Method)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at java.lang.reflect.Method.invoke(Method.java:521)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-21 18:03:30.254: E/SQLiteOpenHelper(19098):  at dalvik.system.NativeStart.main(Native Method)
01-21 18:03:30.254: E/Database(19098): sqlite3_open_v2("/mnt/sdcard/chomu/MyLedgers/2012-2013.db", &handle, 1, NULL) failed
01-21 18:03:30.264: W/dalvikvm(19098): threadid=1: thread exiting with uncaught exception (group=0x400207d8)
01-21 18:03:30.264: E/AndroidRuntime(19098): FATAL EXCEPTION: main
01-21 18:03:30.264: E/AndroidRuntime(19098): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.balance.start/com.balance.start.MainView}: android.database.sqlite.SQLiteException: unable to open database file
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2669)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2685)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.ActivityThread.access$2300(ActivityThread.java:126)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2038)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.os.Looper.loop(Looper.java:123)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.ActivityThread.main(ActivityThread.java:4633)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at java.lang.reflect.Method.invokeNative(Native Method)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at java.lang.reflect.Method.invoke(Method.java:521)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at dalvik.system.NativeStart.main(Native Method)
01-21 18:03:30.264: E/AndroidRuntime(19098): Caused by: android.database.sqlite.SQLiteException: unable to open database file
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1921)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:883)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:168)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at com.balance.start.LedgerInfoDB.opentoread(LedgerInfoDB.java:78)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at com.balance.start.MainView.onCreate(MainView.java:101)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-21 18:03:30.264: E/AndroidRuntime(19098):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2633)
01-21 18:03:30.264: E/AndroidRuntime(19098):    ... 11 more 
```

请给我一些替代方案或告诉我如何避免这种限制。

谢谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T12:49:13.377

您需要一个一个而不是同时创建子文件夹。例如。如果您有一个包含子文件夹名称的数组文件夹，那么

```
File cnxDir = Environment.getExternalStorageDirectory();

    for (String folder : folders) {

        cnxDir = new File(cnxDir.toString() + File.separator + folder);
        if (!cnxDir.exists()) {
            cnxDir.mkdir();

        }

    } 
```

# ruby - 如何在 ruby 中清除 Selenium 中没有 id 的文本字段？

> ID：14438996
> 
> 赞同：0
> 
> 时间：2013-01-21T12:48:23.180
> 
> 标签：ruby, selenium

我是新手`Selenium`，这个怀疑可能是基本的。我有一个类型的输入元素，`text`它有一些默认值，但我需要`clear`那个值和`insert`一个新值。

有人可以帮忙吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T23:11:00.210

在 webdriver 你可以使用 clear 命令

```
@d = Selenium::WebDriver.for(:remote, :url => "http://localhost:8080/wd/hub/")
@d.navigate.to <your site>
@d.find_element(:name, "username")
@d.clear() #clears any text that was in the username field
@d.send_keys ("user") #enters the new text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T13:03:09.397

如果您发布带有代码片段的问题会更有帮助。无论如何，简短的回答。

```
selenium.type("//input[@name='INPUTNAME']","NEW VALUE"); 
```

# nsis - 为什么我收到 !insertmacro: 未找到名为“MUI_DEFAULT”的宏错误？

> ID：14438997
> 
> 赞同：0
> 
> 时间：2013-01-21T12:48:27.097
> 
> 标签：nsis

我正在为我的安装程序编写一个脚本。我使用超现代的 ui 以获得更好的外观。所以我使用了以下代码。但是我收到错误 insermacro mui_default not found;

代码：

```
!insertmacro MUI_DEFAULT MUI_TEXT_COLOR FFFFFF
!insertmacro MUI_DEFAULT MUI_BGCOLOR 3d66ab
!insertmacro MUI_DEFAULT UMUI_TEXT_LIGHTCOLOR FFFF00
!insertmacro MUI_DEFAULT UMUI_BRANDINGTEXTFRONTCOLOR 8b8ca4
!insertmacro MUI_DEFAULT UMUI_BRANDINGTEXTBACKCOLOR eeeef3
!insertmacro MUI_DEFAULT UMUI_LEFTIMAGE_BMP \
    "${NSISDIR}\Contrib\UltraModernUI\Skins\blue\LeftBranding.bmp"
!insertmacro MUI_DEFAULT UMUI_HEADERIMAGE_BMP \
    "${NSISDIR}\Contrib\UltraModernUI\Skins\blue\Header.bmp"
!insertmacro MUI_DEFAULT UMUI_BOTTOMIMAGE_BMP \
    "${NSISDIR}\Contrib\UltraModernUI\Skins\blue\BtmImg.bmp"
!insertmacro MUI_DEFAULT MUI_ICON \
    "${NSISDIR}\Contrib\Graphics\UltraModernUI\Icon.ico"
!insertmacro MUI_DEFAULT MUI_UNICON \
    "${NSISDIR}\Contrib\Graphics\UltraModernUI\UnIcon.ico" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T13:03:00.267

该宏仅在之后有效，`!include "UMUI.nsh"`但对于全局设置，您可能只使用定义：

```
!define MUI_TEXT_COLOR FFFFFF
...
!define  UMUI_BRANDINGTEXTBACKCOLOR eeeef3

!include "UMUI.nsh"

!insertmacro MUI_PAGE_... 
```

# c# - C#输入值如何验证从A到ZZZ

> ID：14438998
> 
> 赞同：-1
> 
> 时间：2013-01-21T12:48:29.170
> 
> 标签：c#

输入值可以是从 A 到 ZZZ（只有字母，没有数字字符）我如何验证 from 和 to 字段。

其中输入可以是 A 或 AA 或 AAA

*   乙>甲
*   BB > A
*   BBB > 一个
*   BBB < B
*   BBB < BB
*   DD > C 但 D 应该是 < CC 失败，因为它不是字典顺序

我在考虑先检查长度，因为如果从长度小于到长度，那么它总是会更短。如果长度相等，则按字母顺序检查。然后我就解开了。

不是简单的字典顺序，因为三个可能的组 single、double、triple chars single group 低于 double 和 Triple group 以及 double 低于 Triple group 不仅仅是字母顺序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T12:55:32.177

您是否考虑过使用正则表达式？`\b[A-Z]{1,3}\b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T12:55:30.793

```
string from = "BB";
string to = "AAA";
bool valid = string.Compare(from, to) < 0; // false 
```

所以它已经按字典顺序工作。[**演示**](http://ideone.com/QFXTBA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T13:01:31.597

您可以执行以下操作：将字符串 AAA 想象为一个数字，即 A*26^2 + A*26^1 + A*26^0

（以 26 为基数，因为有那么多字母）

拆分字符串，将值 A 到 Z 转换为 1 到 26（前面的空白 = 0），您就完成了：

```
 A = 0*26^2 + 0*26^1 + 1*26^0 => 1
 B = 2 => 2
 ...
 Z = 26 => 26
 AA = 1 * 26^1 + 1 => 27
 ...
 ZZ = 26*26^1 + 26 = 702
 ...
 ZZZ = 26*26^2 + 26*26^1 + 26 => 18278 
```

把它包起来

```
 public int LetterCodeToInt(String LetterCode)
    {
        //fill up whitespaces in front.
        String s = LetterCode.PadLeft(3, '_').ToUpper();

        int value = 0;
        int k = s.Length -1;
        for (int i = 0; i < s.Length; i++)
        {
            if (s[i] != '_')
            {
                //ASCII "A" is 65, subtract 64 to make it "1" 
                value += (((int)s[i]) - 64) * Convert.ToInt32(Math.Pow(26, k));
            }
            k--;
        }
        return value;
    } 
```

你可以这样做：

```
 if (LetterCodeToInt("AAA") > LetterCodeToInt("AZ")){

 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-21T14:28:48.127

你在正确的轨道上。创建一个自定义比较器，首先检查长度。例如：

```
public class MyComparer : IComparer<string>
{
    public int Compare(string x, string y)
    {
        if (x.Length < y.Length) return -1;
        if (x.Length > y.Length) return 1;
        return Comparer.Default.Compare(x, y);
    }
} 
```

# c++ - Qt Creator 5 - 没有设置调试器

> ID：14438999
> 
> 赞同：6
> 
> 时间：2013-01-21T12:48:32.677
> 
> 标签：c++, qt, qt-creator

我为**Microsoft Visual C++ x86 Compiler**设置了一个编译器，但现在我遇到了这个错误：

***编译器“Microsoft Visual C++ x86 Compiler”无法为 Qt 版本生成代码。*** 警告：**未设置调试器**

我想我需要设置调试器，但我不知道放置调试器选项卡的路径。

我已经安装了 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T13:09:02.430

SDK的二进制版本需要MSVS2010，Express版本应该可以。SP1 也必须安装在这些之上。

对于调试，您还需要为其安装 Windws SDK 7.1 和 SP1 更新。

此答案中的链接： [https ://stackoverflow.com/a/14089968/1717300](https://stackoverflow.com/a/14089968/1717300)

* * *

如果要使用MSVS2012，我觉得还是得自己编译。指示：

[http://qt-project.org/wiki/Building-Qt-5-from-Git](http://qt-project.org/wiki/Building-Qt-5-from-Git)