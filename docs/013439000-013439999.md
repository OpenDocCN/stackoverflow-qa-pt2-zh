# StackOverflow 问答 13439000-13439999

# knockout.js - Knockout.js：绑定到复杂对象

> ID：13439002
> 
> 赞同：12
> 
> 时间：2012-11-18T09:39:50.403
> 
> 标签：knockout.js

我是 knockout.js 的新手，我正在尝试绑定到以下代表用户的对象：

```
{
    "$id": "1",
    "$values": [
        {
            "$id": "2",
            "Locations": {
                "$id": "3",
                "$values": []
            },
            "Photos": {
                "$id": "4",
                "$values": []
            },
            "UserId": 1,
            "Name": "Test User"
        }
    ]
} 
```

用户可以零个或多个位置，以及零个或多个照片。

视图模型：

```
function UsersViewModel() {
    var self = this;
    self.users = ko.observableArray();

    var baseUri = 'http://localhost:46241/api/users';

    $.getJSON(baseUri, function (data) {
        self.users = data;
    });
}

$(document).ready(function () {
    ko.applyBindings(new UsersViewModel());
}) 
```

HTML 包含以下绑定：

```
<ul id="update-users" data-bind="foreach: users"> 
     <li> 
            <div><div class="item">User ID</div>
                <input type="text" data-bind="value: $data.UserId" />
            </div>                 
            <div><div class="item">Name</div>
                <input type="text" data-bind="value: $data.Name" />
            </div>                  
     </li> 
</ul> 
```

我做错了吗？或者用户对 Locations 和 Photos 的对象引用可能会破坏绑定？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-18T10:34:12.643

> 我做错了吗？

是的。您正在覆盖`observableArray`JSON 回调中的您，从而将其销毁：

```
$.getJSON(baseUri, function (data) {
    self.users = data;
}); 
```

一般来说，淘汰赛 observables 是这样分配的：

```
$.getJSON(baseUri, function (data) {
    self.users(data.$values);
}); 
```

*请注意，在您的情况下，`data.$values`似乎包含实际数组，而不是`data`本身。*

这适用于您的情况，但它并没有充分发挥淘汰赛的潜力。

正是为这种情况创建了[映射插件。](http://knockoutjs.com/documentation/plugins-mapping.html)它递归地遍历一个复杂对象并将其所有属性转换为可观察对象，并将所有包含的数组转换为可观察数组。这使您可以对对象的状态进行细粒度控制，从而使您可以监视每个更改。

```
$.getJSON(baseUri, function (data) {
    ko.mapping.fromJS(data.$values, {}, self.users);
}); 
```

它还允许部分更新：假设您从服务器检索用户列表，并且您的视图模型已经有一半。映射插件能够仅将那些缺失的视图添加到您的视图模型中，并对现有的进行适当的更改。如果您想了解如何操作，请阅读文档中的[“高级用法”部分。](http://knockoutjs.com/documentation/plugins-mapping.html#advanced_usage)

* * *

假设您从服务器获取一组用户对象并使用映射插件，那么您的绑定将如下所示：

```
<ul id="update-users" data-bind="foreach: users"> 
     <li> 
            <div><div class="item">User ID</div>
                <input type="text" data-bind="value: UserId" />
            </div>                 
            <div><div class="item">Name</div>
                <input type="text" data-bind="value: Name" />
            </div>
            <ul class="photos" data-bind="foreach: Photos.$values">
              <!-- ... -->
            <ul>
     </li> 
</ul> 
```

一般来说，@Greg Smith 的评论是正确的。尝试丢失`$`对象中的键，它们可能会在某些时候与淘汰赛中的特殊变量发生冲突。例如，您可以安全地用下划线替换它们。

更一般地说，如果我是你，我会尝试在你的 JSON 中去掉整个`$id`/`$values`概念，它似乎没有任何用途：

```
[
    {
        "Locations": [],
        "Photos": [],
        "UserId": 1,
        "Name": "Test User"
    }
] 
```

# php - 查询性能 - MySQL

> ID：13439004
> 
> 赞同：1
> 
> 时间：2012-11-18T09:39:55.723
> 
> 标签：php, mysql

我们有一个名为“tags”的表，它有 3 个列：id、value、count，其值是唯一键。

我们的成员应该为他们最喜欢的音乐输入标签，我们将把每个成员标签保存在“members.favorites”表中，对于我们查询“tags”表的自动建议。

现在成员最喜欢的是：“song1,song2,song3”，我们把这个值放在“members.favorites”中，现在为了放入“tags”，我们将用'，'爆炸并将其插入"tags"，所以 "tags" 得到 3 行，分别是 "song1"、"song2"、"song3" 和 "count=1"，现在另一个成员来输入 "song3,song4,song5"，将其输入到 "tags" "、"song4" 和 "song5" 将作为新行插入，因为它们不存在，但 "song3" 已经存在，我需要为 "song3" 执行 "count+1"。

我的代码是：

```
$tags_array =  explode(',', $tags);
foreach($tags_array as $key => $val){
    $check_if_already_exists = mysql_query("SELECT value FROM tags WHERE value = '$val'");
    if(mysql_num_rows($check_if_already_exists)){
        // This already exists, so count++
        mysql_query("UPDATE tags SET count = count+1 WHERE value = '$val'");    
    }else{
        // It's a new tag, insert
        mysql_query("INSERT INTO tags (value, count) VALUES ('$val', '1')");
    }
} 
```

但这似乎以某种方式连接！每个用户可能有 20 首最喜欢的歌曲，上面的代码似乎没有最好的性能，有人有任何改进的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:42:27.663

您可以使用[INSERT ... ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)语法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T09:43:53.270

您需要名为 UPSERT 的指令。
在 MYSQL 上，您可以使用 INSERT... ON DUPLICATE 或者您可以使用 REPLACE 语法

# c# - MVVM - 调用控制方法

> ID：13439007
> 
> 赞同：3
> 
> 时间：2012-11-18T09:40:19.277
> 
> 标签：c#, wpf, mvvm

我正在寻找 MVVM 解决方案。视图中使用了一个控件（我们称之为 V）。该控件有一个方法 Foo()。该方法不能被事件调用，因为它的操作没有连接到控件的任何事件。我需要从 ViewModel 调用这个方法，但是 ViewModel 当然不知道视图。您对如何扩展 Control 以启用符合 MVVM 的 V.Foo() 调用有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-14T12:05:58.227

我刚刚检查了我未接受的问题并找到了这个。
我记得我通过向控件添加**ICommand**依赖属性解决了这个问题，该控件使用**OneWayToSource**绑定，没有更新。*Execute()*调用将调用控件上的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:34:41.740

在这种情况下，我通常会使用 Messenger（例如 MVVMLight）/Mediator/EventAggregator（例如 Prism）模式来通知 View 它应该执行该方法。使用这种模式，您基本上可以从 VM 向某个收件人（在您的情况下为视图）发送消息，而不知道谁将处理它。因此视图模型不需要知道视图。

此外，此模式可用于创建可以处理我的许多收件人的通用广播消息，而发件人不知道其中任何一个。

例子：

*   [在WP7中实现导航](http://geekswithblogs.net/lbugnion/archive/2011/01/06/navigation-in-a-wp7-application-with-mvvm-light.aspx)
*   [用于松散耦合事件的 MVVMLight Messenger](http://stevenhollidge.blogspot.de/2011/05/mvvmlight-messenger-for-loosely-coupled.html)
*   [MVVM 中介者模式](http://sachabarbs.wordpress.com/2009/03/16/mvvm-mediator-pattern/)
*   [Prism 中的事件聚合器](http://neverindoubtnet.blogspot.de/2009/05/event-aggregator-in-prism-explorer.html)

和

*   [我在 MVVMLight messenger 上的一些杂谈](https://stackoverflow.com/search?q=user%3A266919+messenger)

**PS：**

这种方法有很多有效的案例。但是，必须说，如果有其他解决方案，应该避免从 ViewModel 调用 View。

对于那些批评从视图模型访问视图的人：请记住，MVVM 是通过提供替代方案来授权用户，而不是强加规则。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:25:12.120

在视图模型中创建一个布尔值，它将向视图发出信号以执行操作。如果您有权访问该控件，请创建一个依赖属性，该属性可以绑定到上述布尔值并在更改时调用该方法。如果您没有能力编写依赖属性，请创建一个可以完成工作的行为。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T09:51:16.160

“当然 ViewModel 对视图一无所知”？

如果你使用 MVVM，ViewModel**必须**知道 View。

您可能需要查看[RoutedCommand](http://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx)或[RelayCommand](http://msdn.microsoft.com/en-us/library/system.windows.input.routedcommand.aspx)

# xcode - viewDidLoad 之前运行的是什么？

> ID：13439008
> 
> 赞同：4
> 
> 时间：2012-11-18T09:40:23.510
> 
> 标签：xcode, viewdidload

我需要设置和存储一些可用于视图的 NSUserDefaults 数据。这不适用于 viewDidLoad。

这可以做到吗？在 viewDidLoad 之前我可以使用什么方法？你会推荐什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:51:57.923

有几种方法`UIViewController`肯定会在之前运行`viewDidLoad`- 这是您的代码的合适位置取决于您的特定问题和体系结构。

*   `initWithNibName:bundle:`在创建视图控制器时调用
*   `loadView`是设置视图的代码

另一种选择是确保在视图控制器初始化之前由不同的组件设置默认值。这可能在工作流前一部分的视图控制器中，或者由应用程序委托初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T10:34:47.957

applicationDidFinishLaunching 听起来像是默认设置的好地方

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T09:51:22.940

在您的应用程序的 AppDelegate 中尝试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-23T01:15:39.690

这是一个使用 UserDefaults 保持应用程序登录状态的示例：

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {
    // You can keep your Google API keys here(if you have any)
    let storyBoard = UIStoryboard(name: "Main", bundle: Bundle.main)
    let homeScreen = storyBoard.instantiateViewController(withIdentifier: "YourHomecontroller") as? ViewController
    if(UserDefaults.standard.isLoggedIn()){
        self.window?.rootViewController = homeScreen
    }else{
        let loginScreen = storyBoard.instantiateViewController(withIdentifier: "LoginViewController")
        self.window?.rootViewController = loginScreen
    }
    return true
} 
```

并使用以下方法扩展 UserDefaults：

```
// this is used to serialize the boolean value:isLoggedIn
func setIsLoggedIn(value:Bool){
        setValue(value, forKey: "isLoggedIn")
        UserDefaults.standard.synchronize()
    }

// this method is used to check the value for isLoggedIn flag
func isLoggedIn() -> Bool{
        return bool(forKey: "isLoggedIn")
    } 
```

这样，您可以有条件地在视图控制器之间切换。如果用户已经通过身份验证，您将希望显示主屏幕。

# php - 如何获得正确的行 XML？

> ID：13439009
> 
> 赞同：-4
> 
> 时间：2012-11-18T09:40:50.380
> 
> 标签：php, xml, import, xml-parsing

为了编写我的 XML，我使用以下代码：

```
$xml = simplexml_load_file('import.xml');
foreach($xml->Классификатор->Группы->Группа as $group)
echo $group->Наименование . '<br />' .
     $group->Ид . '<br />' .
     $group->Группы->Группа->Наименование . '<br />' .
     $group->Группы->Группа->Ид . '<br /><br />';
echo '<br /><br /><br /><br /><br /><br />';
foreach($xml->Каталог->Товары->Товар as $item)
echo $item->Наименование . '<br />' . $item->Ид . '<br /><br />'; 
```

**所有 XML 文件都[在这里](http://zalil.ru/33972674)**

我需要获取它所属的产品名称（Каталог->Товары->Товар->Наименование），父类别的名称（Классификатор->Группы->Группа->Наименование）以及子类别的名称类别（Классификатор->Группы->Группа->Группы->Группа->Наименование ），即事实证明：

```
товар (Каталог->Товары->Товар->Наименование)
его категория (Классификатор->Группы->Группа->Наименование)
его подкатегория (Классификатор->Группы->Группа->Группы->Группа->Наименование) 
```

怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:08:46.073

您需要收集一个包含组 ID 作为键和所有必要值的哈希数组。然后通过 id 查找组名和属性变得简单。这是工作示例：

```
$xml = simplexml_load_file('/tmp/1.xml');
$groups = array();
foreach($xml->Классификатор->Группы->Группа as $group) {
  $groups[ (string) $group->Ид] = array(
    "name" => (string) $group->Наименование,
  );
  foreach($group->Группы->Группа as $subgroup) {
    $groups[ (string) $subgroup->Ид] = array(
      "name" => (string) $subgroup->Наименование,
      "parent" => (string) $group->Наименование
    );
  }
}
foreach($xml->Каталог->Товары->Товар as $item) {
  $group = $groups[ (string) $item->Группы->Ид];
  echo $item->Наименование ."\n". 
       (isset($group["parent"]) ? $group["parent"]."\n" : "").
       $group["name"]."\n\n";
} 
```

# vb.net - 如何使查找反向方法继续移动？

> ID：13439017
> 
> 赞同：1
> 
> 时间：2012-11-18T09:42:12.787
> 
> 标签：vb.net, replace

我目前能够搜索一些文本并找到第一个匹配的字符串。这从左到右移动，每次单击“btnFindNext”时，都会选择下一个匹配的字符串。

但是，我现在想让搜索从右向左移动。我正在使用 RichTextBoxFind.Reverse 方法，实际上这会从右侧选择第一个匹配的字符串。但是，当用户再次单击“btnFindNext”时，不会选择下一个匹配的字符串。任何想法为什么？

编辑：我已经添加了我当前使用的代码来从左到右选择。

用户首先按“查找”，这是代码。

```
 startFrom = RichTextBox.Find(textToFind.Text,
 RichTextBox.SelectionStart, RichTextBoxFinds.None)

If lastposition <> -1 Then
RichTextBox.SelectionStart = startFrom
RichTextBox.SelectionLength = textToFind.Text.Length
startFrom = startFrom + 1
    Else
        MsgBox(cboFFindWhat.Text & " Not Found")
    End If 
```

然后用户按下“查找下一个”。这是代码。

```
startFrom = RichTextBox.Find(textToFind.Text, startFrom, RichTextBoxFinds.None)
If startFrom <> -1 Then
RichTextBox.SelectionStart = startFrom
RichTextBox.SelectionLength = textToFind.text.length
startFrom = startFrom + 1
Else
MsgBox(textToFind.Text & " Not Found")
End If 
```

以上两段代码非常适合搜索文档。我现在想让它成为可能，以便用户可以向上搜索。这是如何实现的？任何帮助将非常感激。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:35:53.937

试试这个代码的反向部分。每次运行它时，它都会查找上一个事件。（然后当你开始时，它又开始了。）

```
Dim start As Integer
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    If start = 0 Then start = RichTextBox1.Text.Length
    start = RichTextBox1.Find("findme", 0, start, RichTextBoxFinds.Reverse)
    MessageBox.Show(start.ToString)
End Sub 
```

# c++ - 模板特化的 using-like 语句

> ID：13439019
> 
> 赞同：3
> 
> 时间：2012-11-18T09:42:31.587
> 
> 标签：c++, templates, using-directives

假设header中有如下定义

```
namespace someNamespace {
    template<class T, class S>
    int operator + (const T & t, const S & s) {
        return specialAdd (t, s);
    }
} 
```

现在我希望标题的用户能够执行类似的操作

```
using someNamespace::operator + <OneClass,SecondClass>; 
```

这显然是不可能的。

这样做的原因是我不希望我的 operator + 干扰标准 operator +，因此让用户可以指定应该为哪些类型 operator + 定义。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T11:04:26.567

使用 barton-nackman 技巧：[http ://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick](http://en.wikipedia.org/wiki/Barton%E2%80%93Nackman_trick)

```
template<typename T,typename S>
class AddEnabled{
    friend int operator + (T const& t, const S & s) {
      T temp(t);
      return temp.add(s);
    }
};

class MyClass: public AddEnabled<MyClass,int>{
  public:

    MyClass(int val):mVal(val){

    }

    int add(int s){
      mVal+=s;
      return mVal;
    }

  private:
    int mVal;
}; 
```

这是另一个重载 << 运算符的示例：

```
template<typename T>
class OutEnabled {
  public:
    friend std::ostream& operator<<(std::ostream& out, T const& val) {
      return static_cast<OutEnabled<T> const&>(val).ioprint(out);
    }    

  protected:
    template<typename U>
    U& ioprint(U& out) const {
      return static_cast<T const*>(this)->print(out);
    }
}; 
```

要使用它，您可以让您的类从 OutEnabled 继承：

```
class MyClass: public OutEnabled<MyClass>{ ... 
```

或者您可以定义一个哨兵对象，例如在 cpp 文件的匿名命名空间中

```
namespace{
 OutEnabled<MyClass> sentry;
} 
```

一旦模板 OutEnabled 被实例化 ( `OutEnabled<MyClass>`)，GLOBAL 运算符就`std::ostream& operator<<(std::ostream& out, MyClass const& val)` 存在。

进一步 MyClass 必须包含一个函数（模板）匹配

```
 template<typename U>
 U& print(U& out) const {
   out << mBottomLeft << "\t"<< mW << "\t"<< mH;
   return out;
 } 
```

由于这是由`ioprint`.

该函数`U& ioprint(U& out)`不是绝对必要的，但如果您没有`print`在`MyClass`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:30:56.477

他们可以专门化的类型特征类，以及 operator+ 中的 enable_if？将 operator+ 放在全局命名空间中，但它返回

```
std::enable_if< for::bar<c1>::value && for::bar<c2>::value, int > 
```

其中 bar 是命名空间中的模板类型特征类，如下所示：

```
template<class T>
struct bar: std::false_type {}; 
```

我认为这应该会导致 sfinae 使您的模板加上仅匹配您专门接受的内容。

你可能想在 enable_if 中加入一些 deconst 和 ref 剥离，并在你的 operator+ 中做一些完美的转发。

# php - javascript 不使用 ajax 执行

> ID：13439033
> 
> 赞同：2
> 
> 时间：2012-11-18T09:44:34.360
> 
> 标签：php, jquery, ajax

如何使 javascript 代码在以前从 ajax 调用加载的 php 页面上执行？

**代码示例：** ajax+function parseScript 强制 javascript 在 ajax 请求的页面上运行

**Senario：**我正在从 selectQuest.php 中选择一个问题，并使用 ajax 请求一个名为 showRecord.php 的页面。

页面 showRecord.php 将显示一个表格，其中包含与所选问题相对应的信息。它包含不运行的 javascript。当我单击提交时，javascript 返回将允许我更新数据库中的信息。

下面的代码示例在 showRecord.php 中找到。最后，如果后者运行，showRecord 将对 updateQuestion.php 发出另一个 ajax 请求。

但是javascript没有在showRecord.php中运行

```
 function show(fileTex,aTex,bTex,cTex,dTex,eTex,newQuestNumTex,textAreaTex,textQuesAnsTex)
    {

  if (window.XMLHttpRequest)
   {// code for IE7+, Firefox, Chrome, Opera, Safari
   xmlhttp=new XMLHttpRequest();
   }
   else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4)
    {
    var resp=xmlhttp.responseText;
    document.getElementById("txtHint2").innerHTML=resp;
    parseScript(resp);
  // document.getElementById("txtHint").style.border="1px solid #A5ACB2";
    }
  }
xmlhttp.open("POST","updateQuestionAdmin.php?param="+fileTex+"&text_A="+aTex+"&text_B="+bTex+"&text_C="+cTex+"&text_D="+dTex+"&text_E="+eTex+"&text_ID="+newQuestNumTex+"&text_Ques="+textAreaTex+"&text_Ans="+textQuesAnsTex,true);
xmlhttp.send();
}

// this function create an Array that contains the JS code of every <script> tag in parameter
// then apply the eval() to execute the code in every script collected
function parseScript(strcode) {
  var scripts = new Array();         // Array which will store the script's code

  // Strip out tags
  while(strcode.indexOf("<script") > -1 || strcode.indexOf("</script") > -1) {
    var s = strcode.indexOf("<script");
    var s_e = strcode.indexOf(">", s);
    var e = strcode.indexOf("</script", s);
    var e_e = strcode.indexOf(">", e);

    // Add to scripts array
    scripts.push(strcode.substring(s_e+1, e));
    // Strip from strcode
    strcode = strcode.substring(0, s) + strcode.substring(e_e+1);
  }

  // Loop through every script collected and eval it
  for(var i=0; i<scripts.length; i++) {
    try {
      eval(scripts[i]);
    }
    catch(ex) {
      // do what you want here when a script fails
    }
  }
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T18:30:44.270

正如 iyrag 所说，Javascript 框架会有所帮助。jQuery 有一个[回调函数](http://api.jquery.com/jQuery.ajax/)，您可以在脚本成功加载并使用 ajax 完成时运行该函数。

您将希望在该回调函数中执行一些其他内容，例如：

```
$.ajax({
  url: 'test.php',
  success: function(data) {
    $('#result').html(data); // Display script return on some div
    someFunction(); // blabla

// Execute some other javascript here, you'll be abble to access the DOM of the test.html
// page because here you'lle be sure that test.html is loaded.showRecord.php should not contain javascript, which would rather be here

  }
}); 
```

我也发布了这个，因为标签具有 jQuery ......

# asp.net - 如何为相关表的 GridView 中使用的 dbContext 的自定义排序构造 lambda

> ID：13439034
> 
> 赞同：0
> 
> 时间：2012-11-18T09:44:38.257
> 
> 标签：asp.net, lambda, linq-to-entities, entity-framework-5

我在 webforms 应用程序中有一个使用模型绑定和强类型 EF5 dbContext 类的 GridView。gridview 使用 SelectMethod 属性从我的 EF5 模型返回类：

```
<asp:GridView ID="Server_grid" runat="server" AllowSorting="True"
    ItemType="server_table" SelectMethod="getServers"> 
```

我的 EF server_table 类与另一个名为 user_table 的表有关系。在我的网格中，我从 user_table 中为我的列之一提取相关的用户名属性，如下所示：

```
<asp:TemplateField HeaderText="User Name">
    <ItemTemplate>
        <%# Item.user_table.username %>
</asp:TemplateField> 
```

我的选择方法看起来像：

```
public IQueryable<server_table> getServers()
{
    return dataContext.server_table.Include(x => x.user_table);
} 
```

这一切都很好，但我需要对这一列进行排序。所以......我要么需要完全放弃模型绑定（嘘！）并在我的查询中选择匿名类型（换句话说，回到使用 LinqDataSource 和匿名类型并失去模型绑定给我的类型检查，叹息）哪个将允许我在 GridView 上简单地添加一个简单的 SortExpression 属性，或者......找出一些方法来进行自定义排序。

所以我一直在琢磨这个想法，并想出了一些可行的方法。我正在做的是声明这样的排序事件：

```
protected void serverSort(object sender, GridViewSortEventArgs e)
{
    sortExpression = e.SortExpression; //stash in a global
    e.Cancel = true; //don't actually sort
    Server_grid.DataBind(); //I'll sort there based on the stashed sortExpression
} 
```

然后在我的 SelectMethod 中，我试图基于保存的 sortexpression 构建一个 lambda，例如，在这种情况下，我将“user_table.username”放在我的列 SortExpression 属性中，该属性存储在上面的 sortExpression 中，然后解析它并将其用于以下用途：

```
public IQueryable<server_table> getServers()
{
    var query = dataContext.server_table.Include(x => x.user_table);
    //how do I use the sortExpression string below to build a lambda?
    query = query.OrderBy(SOMETHING CLEVER HERE);
    return query;
} 
```

所以基本上，如果我有表属性的名称或表关系的名称与该相关表上的属性名称，我该如何构建一个 lambda？因此，如果我的 SortExpression 是 server_table 上的简单属性名称，它将起作用，或者如果它是相关表上的属性名称，我可以将 sortExpression 字符串解析为在该表上具有相关表 + 属性名称。我需要能够解析任意长度的关系，即user_table.other_table.another_table.yadday-yadday.property。必须有一种方法，但我的 LINQ 内部 foo 并不是那么好（对此有什么建议吗？）。

或者是否有更好/更简单的方法可以像这样排序，并继续使用我喜欢的模型绑定？我希望我可以在网格 SortExpression 属性中使用 user_table.username ！！啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T09:54:51.907

您可以按顺序使用属性集合`p => p.Attributes["ColumnName"]`

```
public IQueryable<server_table> getServers()
{
    var query = dataContext.server_table.Include(x => x.user_table);
    //how do I use the sortExpression string below to build a lambda?
    query = query.OrderBy(p => p.Attributes[ColumnNameStoredInSortExpressVariable]);
    return query;
} 
```

# php - 有没有办法检查一台计算机（JS / PHP）插入了多少个屏幕？

> ID：13439035
> 
> 赞同：2
> 
> 时间：2012-11-18T09:44:40.583
> 
> 标签：php, javascript, jquery

我没有这个问题的代码。但是，我一直在寻找一种方法来检测访问者当前拥有多少个屏幕。我想要实现的是 2 个监视器之间的 JS 或 jQuery 幻灯片。我认为最好的方法是首先找出有多少个屏幕和屏幕大小。

我还想过制作一个会分布在 2 个屏幕上的巨大 div，但我认为这行不通。

抱歉，我没有提供任何代码，但我环顾四周，在网上找不到任何东西。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:00:43.960

使用JavaScript你只能得到浏览器的窗口大小，至少用户有浏览器的窗口填满所有的虚拟桌面，你可以“检测”屏幕的数量。对于“检测”，我的意思是您可以使用最常见的屏幕尺寸统计数据和一些概率进行计算，如果您了解所有用户，这并非完全不可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T16:52:01.683

您将无法检测到监视器的数量。您可能只能根据屏幕宽度猜测它。

提供流动设计，让您的访客决定窗口宽度。

# assembly - 解码和理解汇编代码

> ID：13439036
> 
> 赞同：-2
> 
> 时间：2012-11-18T09:44:46.197
> 
> 标签：assembly

> **可能重复：**
> [解码和理解汇编代码](https://stackoverflow.com/questions/13391171/decoding-and-understanding-assembly-code)

我是 c 和汇编代码的初学者，我们有一个“炸弹”作业（用 c 编写）调用需要某些密码的方法，但代码不可见，我需要通过查看汇编代码来确定正确的密码.

代码表明此方法的密码是 6 个数字，作为“输入”传递给方法uzzle_1（我试图避免触发）。

我无法理解汇编代码。

这个问题的答案是什么？

我认为这个puzzle_1 的关键字是数组。

```
08048db4 <puzzle_1>:
8048db4:        push   %ebp
8048db5:        mov    %esp,%ebp
8048db7:        sub    $0x38,%esp
8048dba:        lea    -0x24(%ebp),%eax
8048dbd:        mov    %eax,0x4(%esp)
8048dc1:        mov    0x8(%ebp),%eax
8048dc4:        mov    %eax,(%esp)
8048dc7:        call   804897e <read_six_numbers>
8048dcc:        movl   $0x1,-0xc(%ebp)
8048dd3:        jmp    8048df9 <puzzle_1+0x45>
8048dd5:        mov    -0xc(%ebp),%eax
8048dd8:        mov    -0x24(%ebp,%eax,4),%eax
8048ddc:        mov    -0xc(%ebp),%edx
8048ddf:         sub    $0x1,%edx
8048de2:        mov    -0x24(%ebp,%edx,4),%edx
8048de6:        add    $0xbf,%edx
8048dec:        cmp    %edx,%eax
8048dee:        je     8048df5 <puzzle_1+0x41>
8048df0:         call   8048d93 <denied_nextstep>
8048df5:         addl   $0x1,-0xc(%ebp)
8048df9:         cmpl   $0x5,-0xc(%ebp)
8048dfd:         jle    8048dd5 <puzzle_1+0x21>
8048dff:          call   8048d73 <allow_nextstep>
8048e04:        leave  
8048e05:        ret 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:23:19.170

这里大约需要理解三类：

1）计算机体系结构：

*   寄存器架构/指令集架构
    *   算术（如 a+b）
    *   按位逻辑，例如 a OR b
    *   具有不同标志的有符号和无符号条件（例如 a == b 或 a < b ）
        *   `cmp %edx,%eax`
    *   跳跃
        *   无条件：`jmp`
        *   有条件的：`je`; `jle`等——与*条件代码*或*标志*或*状态寄存器有关*
        *   子程序：`call`;
    *   内存架构
    *   不同种类的*寻址模式*
        *   即时`sub $0x38,%esp`
    *   内存地址计算`lea -0x24(%ebp),%eax`
    *   CISC 类型：您可以直接“添加”到内存地址吗 `addl $0x1,-0xc(%ebp)`
    *   RISC 类型 - 读/修改/写回

2) 语言的语法

*   指令 src, dst 与 instr dst, src
*   *标签*、注释、汇编指令、十进制和十六进制数的编码

3) 局部栈帧、局部变量和指针的概念

*   `push ebp; mov esp, ebp;`
*   此特定示例中使用的调用约定（全局寄存器、通用寄存器或堆栈（帧）
*   不适合寄存器的项目通常使用指针传递

学习这一点的最佳方法是使用指令级调试器显示内存和寄存器内容，并以最佳方式突出显示每条指令之间的变化。当然还要阅读指令集架构手册和应用程序二进制接口规范。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T09:49:15.447

你需要学习组装。一个快速入门，以便您自己发现答案是使用一个将助记符映射到其目的的表格，一个用于不同寻址模式的表格，一个用于将十六进制映射到十进制的计算器，如果可以的话，一个一个地逐步完成说明不要在你的脑海中做它，当你不明白一些事情时，一个很好的互联网连接可以做一些研究。

例如，这里是前几条指令......

```
; Push the value in %ebp register onto stack
8048db4:        push   %ebp

; Copy the value from %esp register into %ebp register
8048db5:        mov    %esp,%ebp

; Subtract 0x38 from %esp register
8048db7:        sub    $0x38,%esp

; Wasn't sure about this one, so I looked it up
; (Looking up things you're not sure of is a 
;  good way to learn about those things.)
; http://stackoverflow.com/q/1658294/31671
8048dba:        lea    -0x24(%ebp),%eax 
```

# php - 我在获取子类别时感到困惑我只想重复每个子类别一次..

> ID：13439041
> 
> 赞同：0
> 
> 时间：2012-11-18T09:45:04.893
> 
> 标签：php

请帮助我，我在获取类别时感到困惑，我只想重复每个子类别一次..

```
<?php
mysql_connect("localhost", "root", "")or die(mysql_error())//connect to mysql;
mysql_select_db("ubcommerce")//select database;
$catagories = "";
$sql = mysql_query("SELECT * FROM inventory ORDER BY subcatagory DESC")//select data from table;
$found = mysql_num_rows($sql);
if ($found > 0) {
    while ($row = mysql_fetch_array($sql)) {
        // Gather all $row values into local variables for easier usage in output 
        $subcatagory = $row['subcatagory'];
        $link = $row['catagory'];
        $link = lcfirst($link);
        $catagories .= "<li>$subcatagory</li>";
    }
} else {
    $catagories = "you have no product in your list yet";
}
?>

<html>
    <body>

    <div class="col-content">
        <ul>
<?php echo $catagories; ?>
        </ul>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:06:54.317

使用 pdo ;)

```
<?php
//connect to your db
$bdd = new PDO('mysql:host=localhost;dbname=test', 'root', 'ubcommerce');
//prepare your request
$bdd->prepare('SELECT * FROM inventory ORDER BY subcatagory DESC');
//exec your request
$bdd->execute();
//put your reponse into an array
$rep = $bdd->fetchAll();
//run your array
foreach($rep as $subCategory){
    echo $subCategory['catagory'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:47:29.103

评论中详述的问题的最简单解决方案是编写如下查询：

```
SELECT DISTINCT subcatagory FROM inventory ORDER BY subcatagory DESC 
```

（尽管它可能无法很好地扩展）

# ios - iOS：获取 UITextView 语言

> ID：13439042
> 
> 赞同：1
> 
> 时间：2012-11-18T09:45:08.753
> 
> 标签：ios, uikit, uitextview

> **可能重复：**
> [是否可以检测到 iPhone 上当前的键盘输入法？](https://stackoverflow.com/questions/3860553/is-it-possible-to-detect-the-current-keyboard-input-method-on-the-iphone)
> [获取“uitextview”iphone 的书写语言？](https://stackoverflow.com/questions/13433733/get-writing-language-of-uitextview-iphone)

如何获取 UITextView 对象的当前编辑语言？我的意思是 UITextView 键盘的当前语言

我没有其他话要说，但问题编辑器需要更多文字在这里大声笑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:03:14.217

您是指访问文本视图的设备使用的语言吗？你不能只得到系统的语言吗？你可以使用：

`NSString * language = [[NSLocale preferredLanguages] objectAtIndex:0];`

（不是我的代码，在这里找到：[Getting current device language in iOS?](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios)）

编辑：实际上这就是`UITextInputMode`你可以在这里阅读文档之后的内容：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputMode_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextInputMode_Class/Reference/Reference.html)

# java - Java Regex 匹配之前和之后的所有内容

> ID：13439044
> 
> 赞同：2
> 
> 时间：2012-11-18T09:45:18.423
> 
> 标签：java, regex

我有以下形式的字符串：something~#~something。

本质上，我使用 ~#~ 作为分隔符，但我只想将第一个元素与其余元素分开。

例如，如果我有以下字符串：What~#~AGreat~#~Day

我希望我的第一场比赛是“What”，我的第二场比赛是“AGreat~#~Day.

我正在使用的实际字符串如下所示： A1~#~@NP->_A1 所以它们不限于字母数字字符。任何人都可以帮忙吗？我试着四处寻找类似的问题，但我似乎无法让它工作。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T09:47:29.637

```
String first = input.substring(0, input.indexOf("~#~"));
String second = input.substring(input.indexOf("~#~") + 3, input.length()); 
```

输出：

```
first:  What
second: AGreat~#~Day 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T09:49:13.077

你也可以使用`split(String regex, int limit)`方法。例如这段代码

```
public class Test {
    public static void main(String[] args) {
        String s = "abc.bcd.cde";
        System.out.println(Arrays.toString(s.split("\\.", 2)));
    }
} 
```

产生以下输出：

```
[abc, bcd.cde] 
```

# c++ - 使用函数操作结构数据类型的值

> ID：13439049
> 
> 赞同：0
> 
> 时间：2012-11-18T09:45:55.753
> 
> 标签：c++, function, struct

我正在学习 C++ 中的结构类型，并尝试编写一个函数来更改结构类型变量成员的值。但是，它会产生意外的输出，我无法弄清楚为什么会这样。/*测试结构类型的程序*/

```
#include <iostream>
#include <cstring>
using namespace std;
struct myStruct
{
    string a;
    string b;
    int c;
    float d;
};

void assignValues(myStruct myobj)
{
    myobj.a = "foobar";
    myobj.b = "Foo Bar";
    myobj.c = 12;
    myobj.d = 15.223;
}
int main()
{
    myStruct x;
    cout << x.a <<endl;
    //x.a = "Hello world";
    //x.b = "This is C++";
    //x.c = 10;
    //x.d = 13.1332;
    assignValues(x);
    cout << x.a<<endl;
    cout << x.b << endl;
    cout << x.c << endl;
    cout << x.d << endl;
} 
```

如果我使用单独的赋值语句（我已在代码中注释掉）而不是 assignValues() 函数，我会得到预期的输出。

PS：我期望的输出值如下：foobar, Foo Bar, 12, 15.223

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:04:38.853

通过引用将 myStruct 参数传递给 assignValue 函数，因此可以对其进行修改：

```
void assignValues(myStruct& myobj)
                         ^^^ pass by reference
{
    myobj.a = "foobar";
    myobj.b = "Foo Bar";
    myobj.c = 12;
    myobj.d = 15.223;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:09:05.480

尽管您可以将指针传递给函数：

```
void assignValues(myStruct* myobj) //<---- pointer
{
    myobj->a = "foobar";
    myobj->b = "Foo Bar";
    myobj->c = 12;
    myobj->d = 15.223;
} 
```

# android - ToneGenerator 崩溃 Android

> ID：13439051
> 
> 赞同：7
> 
> 时间：2012-11-18T09:46:14.413
> 
> 标签：android, audio, crash

几天前，我收到了关于我发布的应用程序的崩溃日志。

错误来自 ToneGenerator，我找不到问题所在。

在这里，我有一个倒数计时器，当计时器达到 0 时，应用程序会启动一个 ToneGenerator。

```
private void lanceMinuteur(int temps, int color){
    if(color == 0)
        minuteur.setTextColor(getResources().getColor(R.color.color_important));
    else
        minuteur.setTextColor(getResources().getColor(R.color.color_informative));

    if(chronoLance){
        chrono.cancel();
    }
    chronoLance = true;

    chrono = new CountDownTimer((temps + 1) * 1000, 1000) {
        public void onTick(long millisUntilFinished) {
            minuteur.setText(String.valueOf(millisUntilFinished / 1000) + "\"");
        }
        public void onFinish() {
            minuteur.setText("0\"");
            minuteur.setTextColor(getResources().getColor(R.color.textcolor1design));
            chronoLance = false;
            final ToneGenerator tg = new ToneGenerator(AudioManager.STREAM_NOTIFICATION, 100);  //The error is coming from here
            tg.startTone(ToneGenerator.TONE_PROP_ACK);
        }
    }.start();

} 
```

我收到的崩溃日志：

```
java.lang.RuntimeException: Init failed
at android.media.ToneGenerator.native_setup(Native Method)
at android.media.ToneGenerator.<init>(ToneGenerator.java:798)
at ma.myperf.musculation.activ.GoPerformanceActivity$2.onFinish(GoPerformanceActivity.java:350)
at android.os.CountDownTimer$1.handleMessage(CountDownTimer.java:118)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:150)
at android.app.ActivityThread.main(ActivityThread.java:4385)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
at dalvik.system.NativeStart.main(Native Method) 
```

那么可能是什么问题？我检查了 ToneGenerator 是否有 try Catch 块，但没有。

我在想可能发生崩溃的设备没有 AudioManager.Stream_Notification？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-05T08:00:14.560

我在[这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/p8p0Ech3Yu8)找到了这个：

听起来您的应用程序没有释放其媒体播放器资源。播放完声音后，您需要调用 MediaPlayer.release() 方法。如果您快速播放大量声音，垃圾收集器将无法跟上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-13T03:18:27.530

我也有同样的问题。完成后您必须释放音源。因此，请使用与音调发生器具有相同毫秒的处理程序。

```
 handler.postDelayed(new Runnable() {
                    @Override
                    public void run() {
                        if (toneGenerator != null) {
                            toneGenerator.release();
                            toneGenerator = null;
                        }
                    }

                }, 2000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T20:55:01.483

我使用**SoundPool**来解决我的问题。我读到 SoundManager 是播放短音效的最佳选择，所以我使用了此处发布的解决方案，因为 ToneGenerator 看起来太不稳定了。

```
public void initSounds(Context theContext, int nbMaxSons) {
    mContext = theContext;
    mSoundPool = new SoundPool(nbMaxSons, AudioManager.STREAM_MUSIC, 0);
    mSoundPoolMap = new HashMap<Integer, Integer>();
    mAudioManager = (AudioManager) mContext.getSystemService(Context.AUDIO_SERVICE);
}

public void addSound(int index, int soundID) {
    mAvailibleSounds.add(index);
    mSoundPoolMap.put(index, mSoundPool.load(mContext, soundID, 1));

}

public void playSound(int index) {
    // dont have a sound for this obj, return.
    if (mAvailibleSounds.contains(index)) {

        int streamVolume = mAudioManager.getStreamVolume(AudioManager.STREAM_MUSIC);
        int soundId = mSoundPool.play(mSoundPoolMap.get(index), streamVolume, streamVolume, 1, 0, 1f);

        mKillSoundQueue.add(soundId);

        // schedule the current sound to stop after set milliseconds
        mHandler.postDelayed(new Runnable() {
            public void run() {
                if (!mKillSoundQueue.isEmpty()) {
                    mSoundPool.stop(mKillSoundQueue.firstElement());
                }
            }
        }, 3000);
    }
} 
```

所以我想知道当 ToneGenerator 经常崩溃时可以给它什么用途。

# asp.net-mvc - 回发模型为空

> ID：13439054
> 
> 赞同：1
> 
> 时间：2012-11-18T09:46:55.593
> 
> 标签：asp.net-mvc, razor, postback

我更改了索引视图，以便每一行都包含在一个表单中：

**索引.cshtml**

```
@model IEnumerable<LevEl.Models.Page>

@foreach (var item in Model)
{
  using (Html.BeginForm("Edit", "Pages", item, FormMethod.Post, new { id = "itemForm_" + item.PageId }))
  { 
  <tr>
    <td>
      @Html.DisplayFor(modelItem => item.Title)
    </td>
    ...
    ... more fields
    ...
    <td>
      @Html.CheckBoxFor(modelItem => item.IsPublished, new { onClick = "$(itemForm_" + item.PageId + ").submit();" })
    </td>
    <td>
      @Html.ActionLink("Edit", "Edit", new { id = item.PageId }) | @Html.ActionLink("Details", "Details", new { id = item.PageId }) | @Html.ActionLink("Delete", "Delete", new { id = item.PageId })
    </td>
  </tr>
  }
} 
```

这是我的控制器：

**PagesController.cs**

```
public ActionResult Index()
{
  return View(db.Pages.Include(p => p.Language).ToList());
}

[HttpPost]
public ActionResult Edit(Page page)
{
  var method = Request.HttpMethod;

  if (ModelState.IsValid)
  {
    if (page.PageContents.GroupBy(pc => pc.Language).Any(g => g.Count() > 1))
      return HttpNotFound("A page cannot have two translations in the same language.");

    db.Entry(page).State = EntityState.Modified;
    db.SaveChanges();
    ClearMenuKeys();
    return RedirectToAction("Index");
  }
  return View(page);
} 
```

当我切换复选框中的值并到达控制器时，`page`为空。如何`page`在回发时传递整个对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:19:36.997

在我看来，您的 HTML 不存储页面的值。`@Html.DisplayFor`也只显示您必须`@Html.HiddenFor`为该字段设置的数据。

编辑：

```
@Html.DisplayFor(modelItem => item.Title)
@Html.HiddenFor(modelItem => item.Title) 
```

# eclipse - 如何在 Eclipse 中设置 SVN 存储库？

> ID：13439056
> 
> 赞同：1
> 
> 时间：2012-11-18T09:47:30.940
> 
> 标签：eclipse, svn

如何让 svn 存储库在 Eclipse 中工作。我安装了 svn 但除了链接之外找不到存储库的位置。[http://wso2.org/library/67](http://wso2.org/library/67)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:58:24.047

您需要为`svn`.

此[ibm 开发人员工作链接](http://www.ibm.com/developerworks/opensource/library/os-ecl-subversion/)总结了从 svn 存储库签出代码的步骤并进一步显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T00:50:26.863

您应该为 Eclipse 安装一个 SVN 插件。我建议您在这里使用 Subversive：http: [//www.eclipse.org/subversive/](http://www.eclipse.org/subversive/)

# java - 将加载的类保存到文件

> ID：13439057
> 
> 赞同：2
> 
> 时间：2012-11-18T09:47:45.373
> 
> 标签：java, class, reflection

是否可以将加载的类保存到文件中？

```
Class cc = Class.forName("projects.implementation.JBean"); 
```

或者，也许是为了获得该班级的实际位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:49:35.067

是的，您可以作为 Class.class 实现`Serializable`接口，您可以将其序列化到文件中并再次反序列化。

例子 -

```
Class Test{
    public static void main(String[] args) throws ClassNotFoundException {
        try {
            OutputStream file = new FileOutputStream("test.ser");
            OutputStream buffer = new BufferedOutputStream(file);
            ObjectOutput output = new ObjectOutputStream(buffer);
            try {
                Class cc = Class.forName("com.test.Test");
                System.out.println(cc);
                output.writeObject(cc);
            } finally {
                output.close();
            }
        } catch (IOException ex) {
            ex.printStackTrace();
        }
        try {
            // use buffering
            InputStream file = new FileInputStream("test.ser");
            InputStream buffer = new BufferedInputStream(file);
            ObjectInput input = new ObjectInputStream(buffer);
            try {
                // deserialize the class
                Class cc = (Class) input
                        .readObject();
                // display 
                System.out.println("Recovered Class: " + cc);
            } finally {
                input.close();
            }
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        } catch (IOException ex) {
            ex.printStackTrace();
        }

    }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:12:52.353

在 Java 中序列化一个 Class 对象只是序列化类的限定名称。反序列化时，按名称查找类。

在一般情况下，我认为一旦加载了与类定义（字节码）相对应的字节，就不可能得到它。Java 允许在运行时定义类，并且据我所知，在加载类后不会公开字节。

但是，根据使用的 ClassLoader，您可能会发现

```
cc.getResourceAsStream("JBean.class") 
```

就是你所需要的，使用它自己的 ClassLoader 将类流作为资源加载。

另一种选择可能是拦截类的加载。ClassLoader 将看到“defineClass”中的字节，因此自定义 ClassLoader 可以将它们存储在某个地方。

# objective-c - 在后台显示视图控制器

> ID：13439059
> 
> 赞同：0
> 
> 时间：2012-11-18T09:48:31.110
> 
> 标签：objective-c, ios, xcode, uiimagepickercontroller

我在呈现视图控制器时遇到问题，而另一个视图控制器已经呈现。

在我的应用程序中，我展示了一个`UIImagePickerController`，在选择图像（从库中或通过设备的相机）后，它应该返回到另一个视图控制器。

例如，假设您单击了一个启动相机的相机按钮，并且在您拍照后，相机向下滑动，但您看到的不是带有相机按钮的视图，而是一个允许您编辑元数据的视图图片。

有谁知道完成这项任务的方法？

谢谢你，iLyrical。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:28:45.927

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
    [picker dismissModalViewControllerAnimated:NO];

    NewViewController *viewController = [[NewViewController alloc] init];
    viewController.image = image;
    [self presentModalViewController:viewController animated:NO];
} 
```

如果您可以使用 iOS 5.0 或更新版本：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)image editingInfo:(NSDictionary *)editingInfo
{
   [picker dismissViewControllerAnimated:YES completion:^(){
        NewViewController *viewController = [[NewViewController alloc] init];
        viewController.image = image;
        [self presentViewController:viewController animated:NO completion:nil];
    }];
} 
```

[在UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)上查看 Apple 的文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T07:52:21.347

如果你能够在呈现 UIImagePickerController 之前初始化最终的 viewController，你可以尝试：

1.  初始化最终视图控制器
2.  将其设置为隐藏或其视图的 alpha=0 并推送非动画
3.  呈现 imagePicker viewController
4.  将最终的 viewController 设置为非隐藏
5.  关闭模态视图控制器

# java - 查找 arrayList 的中间数

> ID：13439062
> 
> 赞同：3
> 
> 时间：2012-11-18T09:48:49.710
> 
> 标签：java, median

给定整数：

> 1）数组列表1：3456
> 
> 2）数组列表2：78910

如果这些被推算为 ArrayList 的整数，那么找到中间数字的最佳方法是什么？

我在想 a.size()/2 （给定 a 是 ArrayList 的名称）

我也想为第一个示例返回整数集的中间数，这将是 45，对于第二个示例，这将是 891

如果 ArrayList 是偶数还是奇数，将进行哪些检查？我在想如果 Arraylist 的大小是奇数，那么将下一个整数添加到整数列表中？我试过这个，但我一直在绕圈子。我也不想对我的列表进行排序。

任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:09:38.973

如果我理解正确，你只需要先和最后切断......

```
out.remove(0);
out.remove(out.size()-1); 
```

但首先测试您的列表大小是否大于 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:09:50.563

如果您只想删除 ArrayList 中的第一个和最后一个元素，您可以这样做。

```
ArrayList<Integer> list = new ArrayList<Integer>();
list.add(Arrays.asList(7,8,9,1,0));
list.remove(list.size()-1);
list.remove(0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:07:02.393

与其考虑包含的内容，不如考虑*排除*的内容：两端的数字，可以在不知道长度是奇数还是偶数的情况下引用它们：

```
List<Integer> middle = list.subList(1, list.length() - 1); 
```

# php - 使用 htaccess 在虚拟目录上强制目录斜杠

> ID：13439070
> 
> 赞同：2
> 
> 时间：2012-11-18T09:50:16.583
> 
> 标签：php, apache, .htaccess, mod-rewrite, rewrite

我了解如何将目录斜杠添加到实际目录，但我需要在虚拟目录上添加尾部斜杠 - 这样，当用户访问 **example.com/website/blog/entries**时（*其中 /blog 和 /entries 都是虚拟目录*)，URL 地址将实际更改为：**example.com/website/blog/entries/**

这是我当前的工作 htaccess 代码，用于将假/虚拟目录转换为我的 php 脚本的参数：

```
RewriteRule ^/?([a-zA-Z_\-/.]+)$ index.php?file=$1 [L,QSA] 
```

这个**RewriteRule**使**example.com/website/blog/entries/**看起来像**example.com/website/index.php?file=blog/entries/**只对 PHP，而不是用户。

以下是一些我尝试过但无济于事的重写规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule .*[^/]$ %{REQUEST_URI}$1/ [L,R=301]

# -----------------------------------------------

RewriteCond %{REQUEST_URI} ^(.+)/$
RewriteRule ^.+/$ %1 [R=301,L] 
```

我认为问题是因为我当前将虚拟目录转换为参数的正则表达式会查找以“/”开头的目录名称，因此当站点安装时不在根文件夹（“/”）中，或者如果没有斜杠，它重定向到完全错误的东西。我无法在我的 htaccess 文件中的任何位置写入文件夹路径，因为路径会不断变化。例如，我不能使用类似的东西：

```
RewriteRule ^(.*)$ http://localhost:8888/project/$1/ [L,R=301] 
```

在将虚拟目录转换为 PHP 参数**之前**，有没有办法在真实目录和虚拟目录上强制使用斜杠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:42:10.447

像下面这样的东西应该做你需要的：

```
RewriteEngine On

# Put here the URL where .htaccess is located
RewriteBase /project/

# Redirect virtual URLs w/o trailing slash to URL with it
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*[^/])$ $1/ [R=301,QSA,L]

# pass virtual URLs into index.php as file argument
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?([a-zA-Z_\-/.]+)$ index.php?file=$1 [L,QSA] 
```

规则按照它们在配置中出现的顺序进行处理，因此重定向是在将数据传递到 index.php 之前完成的

这是不使用`RewriteBase`URL 硬编码部分的版本：

```
RewriteEngine On

# Redirect virtual URLs w/o trailing slash to URL with it
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^(.*[^/])$
RewriteRule .* %1/ [R=301,QSA,L]

# pass virtual URLs into index.php as file argument
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} ^/?([a-zA-Z_\-/.]+)$
RewriteRule .* index.php?file=%1 [L,QSA] 
```

# c++ - 我的 MergeSort 显示错误的输出，您认为我的代码有什么问题？

> ID：13439071
> 
> 赞同：-1
> 
> 时间：2012-11-18T09:50:26.490
> 
> 标签：c++, mergesort, output

```
 List List:: mergesort(List m)
    {
    if(m.count() <= 1)
           return m;
        else
       {
    List l,r;
        node* temp = m.head;
        node* ptemp = m.head;
        node* first = m.head;
        int c = m.count();
        for(int i = 1; temp->next!=NULL && i<=(c/2)+1; i++)
        {
         ptemp = temp;
         temp = temp->next;
         }

      ptemp->next = NULL;

      while(first!=NULL)
      {
         l.insert(first->data);
         first = first->next;
      }

      while(temp!=NULL)
      {
        r.insert(temp->data);
         temp = temp->next;
      }

      cout<<"\t\t";
      l.display();
      cout<<"\t\t";r.display();cout<<"\n";

      l = mergesort(l);
      r = mergesort(r);
     }
 } 
```

我试图在“合并排序算法的划分步骤”中展示每个步骤。

例如我输入这个列表：5 3 7 14 2

期望的输出：-

```
 5 3 7 14 2

     5 3 7                  14 2

  5 3      7              14     2

5     3     7           14         2 
```

我得到的是：

```
 5 3 7 14 2

     5 3 7                  14 2

     5 3                    7             

     5                      3
     14                     2 
```

我应该怎么办？我已经尝试了所有可能的事情，但甚至无法接近。请问有什么机构可以帮忙吗？

好的，这是我在调试后理解的，函数 mergesort() 内部的内容是：

> 合并排序（5 3 7 14 2）
> 
> 合并排序（5 3 7）
> 
> 合并排序(5 3)
> 
> 合并排序(14 2)

我需要的是：-

```
mergesort(5 3 7 14 2)
mergesort(5 3 7)   
       mergesort(14 2)   
mergesort(5 3) 
```

我什么都想不出来。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:33:15.510

你把树放错了。您永远不会像那样显示“合并排序树”，因为您无法在控制台输出中向上移动。相反，您应该将树旋转 90 度。像这样

```
List List:: mergesort(List m, int depth)
{
   for (int i = 0; i < depth; ++i)
       cout << '\t';
   display();
   cout << '\n';

   ...
   l = mergesort(l, depth + 1);
   r = mergesort(r, depth + 1);

} 
```

depth 变量控制在显示您在此调用中排序的值之前显示的缩进量。每个调用的值都显示在单独的行上。这会将树旋转 90 度，以便根显示在控制台的左边缘，子节点跟随其父节点并逐渐向右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:07:45.293

我尝试创建像您描述的那样的树的方式（尽管不完全相同，因为`mergesort()`不会为一个元素序列创建另一个级别）是建立一个中间状态树，然后使用[广度优先搜索](http://en.wikipedia.org/wiki/Breadth-first_search)步行树的实际显示它。除了将树实际构建为单独的数据结构之外，您还可以实现`mergesort()`不使用递归，而是自己控制中间步骤，有效地使用隐式树的广度优先搜索遍历。

下面是我的意思的一个例子。输出的格式不是很好，但至少每一行都包含预期的内容。此外，输出显示了拆分和中间合并的中间结果。

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <vector>

using namespace std::placeholders;

typedef std::vector<int> range;

std::ostream& print_range(std::ostream& out, range const& v)
{
    out << '[';
    if (!v.empty()) {
        std::copy(v.begin(), v.end() - 1,
                  std::ostream_iterator<int>(out, ", "));
        out << v.back();
    }
    return out << "] ";
}

std::vector<range>
mergesort(std::vector<range> const& rs)
{
    std::cout << "> ";
    std::for_each(rs.begin(), rs.end(),
                  [](range const& r) { print_range(std::cout, r); });
    std::cout << "\n";
    if (rs.end() != std::find_if(rs.begin(), rs.end(),
                                 [](range const& r) {
                                     return 1 < r.size();
                                 })) {
        std::vector<range> sr;
        std::for_each(rs.begin(), rs.end(),
                      [&](range const& r) {
                          sr.push_back(range(r.begin(),
                                             r.begin() + r.size() / 2));
                          sr.push_back(range(r.begin() + r.size() / 2,
                                             r.end()));
                      });
        sr = mergesort(sr);
        std::vector<range> result;
        for (range::size_type i(0); i + 1 < sr.size(); i += 2) {
            result.push_back(range());
            std::merge(sr[i].begin(), sr[i].end(),
                       sr[i + 1].begin(), sr[i + 1].end(),
                       std::back_inserter(result.back()));
        }
        std::cout << "< ";
        std::for_each(result.begin(), result.end(),
                      [](range const& r) { print_range(std::cout, r); });
        std::cout << "\n";
        return result;
    }
    else {
        return rs;
    }
}

range mergesort(range const& input)
{
    return mergesort(std::vector<range>(1, input)).front();
}

int main()
{
    try
    {
        range input{std::istream_iterator<int>(std::cin),
                std::istream_iterator<int>()};
        mergesort(input);
    }
    catch (std::exception const& ex)
    {
        std::cout << "ERROR: " << ex.what() << '\n';
    }
} 
```

# javascript - 将此函数添加到现有函数中

> ID：13439080
> 
> 赞同：-1
> 
> 时间：2012-11-18T09:52:40.123
> 
> 标签：javascript, html, javascript-events

尝试不同的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:50:50.150

您不需要将所有 onLoad 处理程序收集到一个函数。用于`window.addEventListener("load", ...`在页面加载时执行某些操作 - 您可以在多个位置重复此行，并且所有处理程序都将运行而不是最新的处理程序。同样，使用`addEventListener("change", ...`代替`onChange = ...`：

```
window.addEventListener("load", function() {                    // note here
    var likeShield = document.getElementById("likeShield");
    var chooseShield = document.getElementById("chooseShield");
    var cb3 = document.getElementById("cb3");
    var cb4 = document.getElementById("cb4");

    function checkchecks() {
        if (
        likeShield.value == "noShield" && chooseShield.value == "ely" && (cb3.checked || cb4.checked)) {
            document.getElementById("cb2").checked = true;
        }
    }
    likeShield.addEventListener("change", checkchecks);     //note here
    chooseShield.addEventListener("change", checkchecks);
    cb3.addEventListener("change", checkchecks);
    cb4.addEventListener("change", checkchecks);
})​ 
```

小提琴：http: [//jsfiddle.net/Hz7KF/2/](http://jsfiddle.net/Hz7KF/2/)

由于您的 javascript 在页面本身加载后立即生效，因此您也无需等待其他资源。现代浏览器会显示该`domReady`事件，但您不能依赖它，因为 IE8 不知道该事件。

jQuery ( [http://jquery.com/](http://jquery.com/) ) 定义了`ready`事件。它`domReady`尽可能使用，并使用 IE 的后备。JQuery 还为 Javascript 中的大多数 dom 操作函数定义了更短的语法：

```
$(function(){                                //or $(document).ready(function(){
    var likeShield = $("#likeShield");
    var chooseShield = $("#chooseShield");
    var cb2 = $("#cb2"); //note that you did not cache this element
    var cb3 = $("#cb3");
    var cb4 = $("#cb4");

    function checkchecks() {
        if( likeShield.val()=="noShield" && chooseShield.val()=="ely" && (cb3.is(":checked") || cb4.is(".checked")){
            cb2.prop("checked",true)
        }
    }

    likeShield.on("change", checkchecks);
    chooseShield.on("change", checkchecks);
    cb3.on("change", checkchecks);
    cb3.on("change", checkchecks);
} 
```

由于性能不是这里的瓶颈，您可以通过不缓存元素来权衡性能（数十微秒）以换取可读性。将处理程序附加到所有`input`s 和`select`s（而不是枚举集）还可以防止逻辑更改时潜在的未来错误：

```
$(function(){
    $("input, select").on("change",function(){ 
        if( $("#noShield").is(":selected") && $("#ely").is(":selected") 
            && ( $("#cb3").is(":checked") || $("#cb4").is(":checked") )
        ){
            $("#cb2").prop("checked",true); 
        }
    })
}) 
```

小提琴：http: [//jsfiddle.net/Hz7KF/3/](http://jsfiddle.net/Hz7KF/3/)

# c# - 我必须多次单击消息框按钮才能从消息框中出来

> ID：13439081
> 
> 赞同：0
> 
> 时间：2012-11-18T09:52:51.273
> 
> 标签：c#, winforms

退出按钮单击事件。

```
`void buttn2_Click(object sender, EventArgs e) //QUIT BUTTON CLICK EVENT. 
    {
       if (MessageBox.Show("LEAVE CURRENT GAME?", "QUIT CONFIRMATION", MessageBoxButtons.YesNo) == DialogResult.Yes)
        {
            this.Controls.Remove(buttn); .. PLAY AGAIN BUTTON.
            this.Controls.Remove(buttn2);
            for (int i = 0; i <= gencount; i++)
            {
               this.Controls.Remove(panel[i]);
               this.Controls.Remove(label200[i]);
               this.Controls.Remove(label100[i]);
               this.Controls.Remove(Tbox[i]);
            }
               this.Controls.Remove(AttemptsRem);
               this.Controls.Remove(AttemptNum);
               this.Controls.Remove(TimeRem);
               this.Controls.Remove(Min);
               this.Controls.Remove(Sec);
               this.Controls.Remove(misc);
               this.ReftoForm2.Show(); To go back to the starting form 
        }
        else
            buttn.Focus();
    } 
```

Form1 激活事件。

```
 private void Form1_Activated(object sender, EventArgs e)
    {
        if (ui_formCowsAndBulls.rdbSinglePlayer.Checked == true)//Static variable
        {

            //GetAllTheWords(); .. Am still working on getting a the 4 letter words
            //GetDistinctElements(); .. randomly out of a list.
            textBox1.PasswordChar = '*';
            textBox1.Focus();
            foreach (string val in distinctWords)
            {
                if (val == "ABLE") .. For single player,the guess word is ABLE.
                    textBox1.Text = val;
            }
        }
        else
        {
            textBox1.Text = string.Empty;
            textBox1.Enabled = true;
            textBox1.Focus();
        }
        //textBox1.Focus();
    } 
```

再次播放点击事件

```
 private void buttn_Click(object sender, EventArgs e) //PLAY AGAIN CLICK EVENT.
    {
        for (int i = 0; i <= gencount; i++)
          {
            this.Controls.Remove(panel[i]);
            this.Controls.Remove(label200[i]);
            this.Controls.Remove(label100[i]);
            this.Controls.Remove(Tbox[i]);
          }

            this.Controls.Remove(AttemptsRem);
            this.Controls.Remove(AttemptNum);
            textBox1.Text = string.Empty;
            textBox1.Enabled = true;
            textBox1.Focus();
            incrpanel = 0; gencount = 0; count = 10;
            this.Controls.Remove(TimeRem);
            this.Controls.Remove(Min);
            this.Controls.Remove(Sec);
            this.Controls.Remove(misc);
            this.textBox1.PasswordChar = '*';
            this.Controls.Remove(buttn);
            this.Controls.Remove(buttn2);
    } 
```

我的问题是当我点击消息框按钮NO时我没有从消息框出来。我第一次玩游戏时从消息框出来，但是如果我第二次玩游戏，我需要点击两次才能从消息框出来。如果我第三次玩游戏，我需要单击是或否按钮 3 次才能从消息框出来。我希望你们能帮助我。我发布了同样的问题之前但没有代码。希望代码有所帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:00:33.800

我认为您可能正在订阅`Click`-event：

```
button1.Click += new EventHandler(buttn2_Click); 
```

在代码中多次调用它的位置，因此当单击按钮时，将显示 MessageBox，并且当`buttn2_Click`事件处理程序（您发布的代码）完成时，它将再次运行，显示另一个 MessageBox，订阅（上面的“...+=...”）完成的次数。

# iphone - UIInterfaceOrientationMaskAllButUpsideDown 在构建时显示错误

> ID：13439082
> 
> 赞同：1
> 
> 时间：2012-11-18T09:52:54.437
> 
> 标签：iphone, ios6, autorotate

我正在制作一个部署目标为 4.3 的应用程序，但我的基础 SDK 是 6.0。

现在，当我进行构建时，编译器会显示有关`UIInterfaceOrientationMaskAllButUpsideDown`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:22:13.227

该符号未在 4.3 中定义，因此它不起作用:) ios6 改变了 VC 告诉它支持的旋转的方式

使用 shouldAutorotate 实现旧方法：

# xquery - 返回结果中的 distinct-values() 不起作用？

> ID：13439083
> 
> 赞同：-1
> 
> 时间：2012-11-18T09:53:21.957
> 
> 标签：xquery

我是 XQuery 的新手，我的问题是关于不同的值，我正在使用以下代码来检索电影评论者

```
xquery version "1.0";
declare boundary-space preserve;
<result>
{for $reviews in doc("reviews.xml")/reviews/review,
     $movie in doc("movies.xml")/movies/movie
 where $reviews/movie_title = $movie/movie_title
   and $movie//movie_genre = "Drama"
   and $movie//month > 6
 order by $reviews/movie_reviewer descending
 return
(<reviewer>{distinct-values($reviews/movie_reviewer)}</reviewer>, '&#xa;')
 }
 </result> 
```

后来我将代码更改为

```
xquery version "1.0";
declare boundary-space preserve;
<result>
{for $reviews in doc("reviews.xml")/reviews/review,
     $movie in doc("movies.xml")/movies/movie
 where $reviews/movie_title = $movie/movie_title
   and $movie//movie_genre = "Drama"
   and $movie//month > 6
 return
{for $content in distinct-values($reviews/movie_reviewer)
      order by $content descending
      return (<reviewer>{$content}</reviewer>, '&#xa;')}
 }
 </result> 
```

但我得到了类似的结果

```
 <result>
 <reviewer>Wesley Barry</reviewer>
 <reviewer>Michael Gordon</reviewer>
 <reviewer>Michael Gordon</reviewer>
 <reviewer>Michael Gordon</reviewer>
 <reviewer>John Frankenheimer</reviewer>
 <reviewer>J. Lee Thompson</reviewer>
 <reviewer>J. Lee Thompson</reviewer>
 <reviewer>Charles Walters</reviewer>
 <reviewer>Charles Walters</reviewer>
 </result> 
```

我怎样才能使结果像

```
<result>
 <reviewer>Wesley Barry</reviewer>
 <reviewer>Michael Gordon</reviewer>
 <reviewer>John Frankenheimer</reviewer>
 <reviewer>J. Lee Thompson</reviewer>
 <reviewer>Charles Walters</reviewer>
 </result> 
```

? 我知道这是非常基本的，但我就是不明白这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:16:33.603

请遵循@Ranon 的建议。但是，从您的查询中猜测：最简单的方法是您是否可以使用 XQuery 3.0 和新的 group-by-statement。

```
xquery version "3.0";
declare boundary-space preserve;
<result>
{for $reviews in doc("reviews.xml")/reviews/review,
     $movie in doc("movies.xml")/movies/movie
 let $reviewer := $reviews/movie_reviewer
 where $reviews/movie_title = $movie/movie_title
   and $movie//movie_genre = "Drama"
   and $movie//month > 6
 group by $reviewer
 order by $reviewer descending
 return
(<reviewer>{$reviewer}</reviewer>, '&#xa;')
 }
 </result> 
```

# ajax - h:commandButton 和 f:ajax 不呈现 ah:dataTable 如果没有提供动作属性

> ID：13439084
> 
> 赞同：0
> 
> 时间：2012-11-18T09:53:33.783
> 
> 标签：ajax, jsf

我有一个带有数据表的后续表单和一个带有输入字段的编辑部分来操作表数据。单击命令按钮后，我想刷新数据表：

```
<f:ajax>
<h:panelGroup id="timesheet_panel">
    <h:dataTable id="datatable"
            value="#{timesheetController.myTimeSheet}" var="child">
    ......
        <h:column>
        <!-- update editor panel data -->
        <h:commandLink
            action="#{timesheetController.load(child.item['$uniqueid'])}">
                    <h:outputText value="#{message.edit}" />
            <f:ajax
                render=":#{component.parent.parent.parent.parent.clientId}:editorpanel" />
        </h:commandLink>
    </h:column>

    </h:dataTable>

    <!-- Editor  -->
    <h:panelGroup id="editor">
        <h:inputText value="#{timesheetController.workitem.item['_category']}" />

        <h:commandButton action="/mypage"
                    actionListener="#{timesheetController.process('10')}"
            value="Update Tabledata">
            <f:ajax render="datatable" />
        </h:commandButton>
    </h:panelGroup>
</h:panelGroup>
</f:ajax> 
```

注意：我有 ah:column 和 ah:commandLink 来更新表格下方编辑器面板中显示的数据。

问题是：为什么要在编辑器面板中为 commandButton 提供 action 属性？如果我没有提供 action 属性，f:ajax render="datatable" 将不会刷新数据表。所以在我看来，这里只能使用 actionListener 来更新后端数据。只有当操作的结果等于当前页面时，操作方法才会起作用。任何人都可以解释这种行为吗？我正在研究 GlassFish 3.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:04:04.583

要刷新表，您至少需要将 bean 放入**@ViewScoped中。**否则，您的 beed 将在设置值后重新创建，以便您达到相同的点。

# jquery - 没有覆盖的 jQuery UI 模态对话框窗口

> ID：13439088
> 
> 赞同：2
> 
> 时间：2012-11-18T09:54:15.057
> 
> 标签：jquery, jquery-ui, modal-dialog

我一直在尝试使用 jQuery UI 模态对话框，它看起来很不错，但不是我所需要的 - 是否有可能在没有禁用背景的灰色覆盖的情况下打开对话框？像这样的东西：

[http](http://demos.kendoui.com/web/window/index.html) ://demos.kendoui.c​​om/web/window/index.html（但是telerik很贵，现在我需要一些开源的东西）

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:07:32.893

是的，这是可能的，您应该没有遇到这样的问题，因为这是对话框的默认行为：

> modalType：布尔值
> 
> 默认值：假
> 
> 如果设置为 true，则对话框将具有模态行为；页面上的其他项目将被禁用，即无法交互。模态对话框在对话框下方但在其他页面元素上方创建覆盖。

尝试将[modalType](http://api.jqueryui.com/dialog/#option-modal)设置为 false。

编辑：

modalType仅在 jQuery UI 1.10 中重命名为[modal 。](http://api.jqueryui.com/dialog/#option-modal)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T10:12:43.800

如果您想保持模态功能，您可以通过将`.ui-widget-overlay`类自定义到 jqueryui css 或使用 themeroller 部分来更改背景覆盖样式`Modal Screen for overlays`。

如果您不想要模态功能，只需更改`modalType`属性即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-12T16:57:53.960

我知道的最简单的方法是：

```
$( ".selector" ).dialog({ modal: true }); // with the overaly

$( ".selector" ).dialog({ }); //without the overlay 
```

# java - JAXB - 过滤完全注释类中的字段

> ID：13439089
> 
> 赞同：2
> 
> 时间：2012-11-18T09:54:25.553
> 
> 标签：java, jaxb

我有一个完全注释的类和多个 xsd（每个都有一组不同的字段），我希望根据使用同一类的不同 xsd 进行编组。

我希望能够控制编组/解组过程并根据 xsd 过滤掉一些字段。

顺便说一句，我正在使用 cxf。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:36:56.597

**注意：**我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您使用 MOXy 作为您的 JAXB 提供程序，那么您可以通过标准注释将模型映射到一个 XML 模式，然后使用 MOXy 的外部映射文档调整映射以匹配其他 XML 模式（请参阅：[http://blog.bdoughan .com/2010/12/extending-jaxb-representing-annotations.html](http://blog.bdoughan.com/2010/12/extending-jaxb-representing-annotations.html)）。

1.  `JAXBContext`#1 - 基于注释创建以匹配模式 #1
2.  `JAXBContext`#2 - 基于注释和映射文件 #1 创建以匹配模式 #2
3.  `JAXBContext`#3 - 基于注释和映射文件 #2 创建以匹配模式 #3

如果您的模式之一与其他模式几乎没有相似之处，映射文件还允许您完全忽略注释。

*   [http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html](http://blog.bdoughan.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)

# javascript - 格式化系统日期，比较错误

> ID：13439091
> 
> 赞同：0
> 
> 时间：2012-11-18T09:54:35.553
> 
> 标签：javascript, extjs, extjs4.1

我有一个名为`yourDate` `2012-11-30`. 现在我需要将此日期与系统日期进行比较，以检查它是否**超过或等于**系统日期。

我怎样才能做到这一点 ？

我的方法；

var tDay= Ext.Date.parse("2012-11-30", "Ymd"); var sDay= new Date().dateformat('Ymd'); // 系统日期

我收到一条错误消息`TypeError: (new Date).dateformat is not a function`。我该如何纠正这个？

注意：我正在使用 Extjs

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T09:57:24.207

尝试以下操作：

```
var sDay = Ext.Date.format(new Date(), 'Y-m-d') 
```

但我认为您不需要格式化**当前**日期进行比较。

您可以使用`var sDay = new Date()`然后比较日期对象，例如`if(sDay > tDay)`

# c++ - wxWindow 自动适应父窗口大小

> ID：13439094
> 
> 赞同：3
> 
> 时间：2012-11-18T09:55:06.507
> 
> 标签：c++, wxwidgets

我怎样才能使（它在-> -> ...`wxGrid`之后继承）对象大小适合父大小？我尝试了方法，但它不起作用。 方法：`wxScrollerWindow``wxWindows``wxPanel``Fit``OnInit`

```
bool MyApp::OnInit()
{
    wxFrame * win = new wxFrame(NULL, -1, _T("App"), wxPoint(300,300), wxSize(400,300), wxDEFAULT_FRAME_STYLE);
    wxPanel * panel = new wxPanel(win, -1);
    wxGrid * grid = new wxGrid(panel, -1, wxPoint(5,5), wxSize(300,200));
    grid->SetDefaultColSize(120);
    grid->SetDefaultRowSize(55);
    grid->SetRowLabelSize(55);
    grid->SetColLabelSize(25);
    grid->CreateGrid(2,6,wxGrid::wxGridSelectCells);
    grid->Fit();
    win->Show();
    return true;
} 
```

`MyApp`之后继承`wxApp`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T12:08:42.307

您可能想使用[sizer](http://docs.wxwidgets.org/2.8/wx_wxsizer.html)：

```
wxSizer* sizer = new wxBoxSizer(wxHORIZONTAL);
// expand contents, add 5px border on all sides:
sizer->Add(grid,1,wxEXPAND|wxALL,5);
panel->SetSizer(sizer); 
```

当 wxFrame 调整大小时（以及第一次显示时），它会自动调整其唯一（直接）子窗口（面板）的大小以适应其客户端大小。然后面板的大小调整器将调整网格的大小。

# python - 如何通过检查列表中是否存在子级索引值来过滤 Pandas 数据框的行？

> ID：13439098
> 
> 赞同：8
> 
> 时间：2012-11-18T09:56:00.670
> 
> 标签：python, pandas

`df`我有一个具有多级索引的示例 Pandas 数据框：

```
>>> df
                STK_Name   ROIC   mg_r
STK_ID RPT_Date                       
002410 20111231      ???  0.401  0.956
300204 20111231      ???  0.375  0.881
300295 20111231     ????  2.370  0.867
300288 20111231     ????  1.195  0.861
600106 20111231     ????  1.214  0.857
300113 20111231     ????  0.837  0.852 
```

并`stk_list`定义为`stk_list = ['600106','300204','300113']`

我想获取`df`sub_level 索引`STK_ID`值在`stk_list`. 输出如下：

```
 STK_Name   ROIC   mg_r
STK_ID RPT_Date                       
300204 20111231      ???  0.375  0.881
600106 20111231     ????  1.214  0.857
300113 20111231     ????  0.837  0.852 
```

基本上，我可以通过以下方式实现此示例数据的目标：

```
df = df.reset_index() ; df[df.STK_ID.isin(stk_list)] 
```

但是我的应用程序数据框中已经有列“STK_ID”和“RPT_Date”，所以 reset_index() 会导致错误。无论如何，我想直接过滤索引而不是列。

从中学习：[如何在 Pandas 中按子级索引进行过滤](https://stackoverflow.com/questions/12224778/how-to-filter-by-sub-level-index-in-pandas)

我尝试`df[df.index.map(lambda x: x[0].isin(stk_list))]`了，Pandas 0.8.1 给出了`AttributeError: 'unicode' object has no attribute 'isin'`，

`reset_index()`我的问题：我应该如何在不使用&方法的情况下通过检查列表中的子级索引值来过滤 Pandas 数据帧的行`set_index()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-19T04:26:44.540

使用`level`参数 in[`DataFrame.reindex`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reindex.html)怎么样？

```
In [14]: df
Out[14]: 
            0         1
a 0  0.007288 -0.840392
  1  0.652740  0.597250
b 0 -1.197735  0.822150
  1 -0.242030 -0.655058

In [15]: stk_list = ['a']

In [16]: df.reindex(stk_list, level=0)
Out[16]: 
            0         1
a 0  0.007288 -0.840392
  1  0.652740  0.597250 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-19T11:48:31.853

你可以试试：

```
df[df.index.map(lambda x: x[0] in stk_list)] 
```

例子：

```
In : stk_list
Out: ['600106', '300204', '300113']

In : df
Out:
                STK_Name   ROIC   mg_r
STK_ID RPT_Date
002410 20111231      ???  0.401  0.956
300204 20111231      ???  0.375  0.881
300295 20111231     ????  2.370  0.867
300288 20111231     ????  1.195  0.861
600106 20111231     ????  1.214  0.857
300113 20111231     ????  0.837  0.852

In : df[df.index.map(lambda x: x[0] in stk_list)]
Out:
                STK_Name   ROIC   mg_r
STK_ID RPT_Date
300204 20111231      ???  0.375  0.881
600106 20111231     ????  1.214  0.857
300113 20111231     ????  0.837  0.852 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-07-13T13:00:47.017

我参加聚会已经很晚了，但肯定是最易读和最直观的方法是使用`index.levels[n].isin`？

它是这样工作的：

```
>>> stk_list = [600106, 300204, 300113]
>>> df[df.index.levels[0].isin(stk_list)]
                STK_Name   ROIC   mg_r
STK_ID RPT_Date                       
300204 20111231      ???  0.375  0.881
300295 20111231     ????  2.370  0.867
300113 20111231     ????  0.837  0.852 
```

我喜欢这种方法的地方在于，该命令实际上可以像英语句子一样阅读。

ps 在 OP 中，stk_list 是一个字符串列表。一些列表理解-fu 将处理这个问题：

```
df[df.index.levels[0].isin([int(i) for i in stk_list])] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-23T18:00:34.203

对我来说，只有当我从 x 中取出零时，它才有效，如下所示：

```
a[a.index.map(lambda x: x in b)] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-25T20:58:36.057

`get_level_values`：

```
df[df.index.get_level_values(level = 0).isin(stk_list)] 
```

# git - 带有参考日志的 Git 图

> ID：13439099
> 
> 赞同：3
> 
> 时间：2012-11-18T09:56:08.350
> 
> 标签：git

我正在尝试改进我的自定义 git 日志格式字符串。除了参考名称之外，我几乎拥有我想要的一切。我已经可以得到一个类似于我想要的日志：

```
> git log --all --source --pretty=oneline --graph

* b7c7ad3855b54e94ad7ac03f2d2e5b96d6e5ac1d      refs/heads/b1 na
| *   695e1482622a79230fa1d83afb8d70e86847334a  refs/heads/master Merge branch 'b1'
| |\  
| |/  
|/|   
* | ec21f370f82096c0208f43b390da234d92e8c74a    refs/heads/b1 beta
* | c6bc1f55ab3b1bd568493a5de4298dfcb4f66d8d    refs/heads/b1 alfa
* | 762dd868ae87753afc1cbf9803744c76f9a9e121    refs/heads/b1 tango
| * 57fb27bff06ee9bb569f93ba815e9dcd69521c13    refs/heads/master little last post commit
|/  
| * 8d613d09b43152a7263b6e02d47ec8a4304f54be    refs/heads/b3 the other commit
| * e1f32b7cb86633351df06e37c2c58ef3f9fafc40    refs/heads/b3 something
|/  
| * 01b5c6728cf25dd576733211ce75dd3ecc29c7ba    refs/heads/b2 this time a 
```

我正在努力使用我自己的格式字符串获得自定义输出，如下所示：

```
>  git log --pretty=format:'%h - %gD %s' --source -g        
b7c7ad3 - HEAD@{0} na
ec21f37 - HEAD@{1} beta
01b5c67 - HEAD@{2} this time a
01b5c67 - HEAD@{3} this time a
695e148 - HEAD@{4} Merge branch 'b1'
57fb27b - HEAD@{5} little last post commit 
```

我的主要问题是我无法获得我想要的参考名称。我认为它是 %g? 格式字符串，但它们似乎都没有给我完整的参考名称。

另一个问题是 %g? 除非我走 reflogs (-g)，否则格式字符串是空的。但是 git 拒绝将 --graph 与 -g 结合使用

如何使用我可以进一步自定义的格式字符串重现第一个样本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T17:10:22.787

这是可能的。只需使用`%d`并提供`--decorate=full`

```
$ git log --pretty=format:'%h %d'
bde5d58  (HEAD, origin/master, master)
dd4446d 
1eeab2a 
...

$ git log --decorate=full --pretty=format:'%h %d'
bde5d58  (HEAD, refs/remotes/origin/master, refs/heads/master)
dd4446d 
1eeab2a 
... 
```

# javascript - mongoose中嵌入文档上的重复键错误索引

> ID：13439102
> 
> 赞同：3
> 
> 时间：2012-11-18T09:56:37.877
> 
> 标签：javascript, node.js, mongodb, mongoose

我正在尝试使用猫鼬运行这个简单的嵌入式文档：

```
var mongoose = require('mongoose');
var PageSchema = new mongoose.Schema({
    url:String
});
var AlbumSchema = new mongoose.Schema({
    pages:[ PageSchema ]
});

mongoose.model('Album', AlbumSchema);
var Album = mongoose.model('Album');
var album = new Album({pages:[{url:"1"}]});
album.save(function(err, a) {
    console.log(err);
}); 
```

第二次运行此代码后，我收到此错误：

```
{ 
    [MongoError: E11000 duplicate key error index: doalbums.albums.$pages.id_1  dup key: { : null }]
    name: 'MongoError',
    err: 'E11000 duplicate key error index: doalbums.albums.$pages.id_1  dup key: { : null }',
    code: 11000,
    n: 0,
    connectionId: 161,
    ok: 1 
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T10:48:50.307

我不确定你在这里做错了什么，但正在发生的事情是：为字段“页面”创建了一个索引，因此它不允许重复。要检查这一点，你可以在 mongo shell 中给出这个命令`doalbums.albums.getIndexes()`（我认为你的数据库名称是**doalbums**并且集合名称是**专辑**）这将列出“专辑”中的所有索引。然后删除不需要的索引，使用 `db.albums.dropIndex()`。这将允许重复。你可以参考[http://docs.mongodb.org/manual/administration/indexes/](http://docs.mongodb.org/manual/administration/indexes/)

# android - AsyncTask 无法在 Android 4.0 及更高版本中执行

> ID：13439107
> 
> 赞同：3
> 
> 时间：2012-11-18T09:57:51.863
> 
> 标签：android

我有一个基于 AsyncTask 类的多个扩展的应用程序。

在 4.0 以下的任何 Android 版本上一切正常。

对于 4.0 或更高版本，我的“doInBackground”方法都不会执行。OnPreExecute 被调用，但“doInBackground”和 onPostExecute 从未到达。

我读到这是一个谷歌问题。有没有什么办法解决这一问题？我需要保留 AsyncTasks 类和行为。使用普通线程意味着我需要更改我的整个应用程序。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T13:36:21.287

我不知道为什么我的问题被否决了，因为这确实是 android 版本之间的 Google 兼容性问题。

我使用了以下帮助类来执行异步任务：

```
 public class AsyncTaskExecutionHelper {
static class HoneycombExecutionHelper {
    public static <P> void execute(AsyncTask<P, ?, ?> asyncTask, boolean parallel, P... params) {
        Executor executor = parallel ? AsyncTask.THREAD_POOL_EXECUTOR : AsyncTask.SERIAL_EXECUTOR;
        asyncTask.executeOnExecutor(executor, params);
    }
}

public static <P> void executeParallel(AsyncTask<P, ?, ?> asyncTask, P... params) {
    execute(asyncTask, true, params);
}

public static <P> void executeSerial(AsyncTask<P, ?, ?> asyncTask, P... params) {
    execute(asyncTask, false, params);
}

private static <P> void execute(AsyncTask<P, ?, ?> asyncTask, boolean parallel, P... params) {
    if (Build.VERSION.SDK_INT >= 11) {
        HoneycombExecutionHelper.execute(asyncTask, parallel, params);
    } else {
        asyncTask.execute(params);
    }
} 
```

}

通过以下方式调用您的异步任务：

```
 CustomAsynkTas customTask = new CustomAsynkTask();
       AsyncTaskExecutionHelper.executeParallel(customTask); 
```

在哪里

```
CustomAsynkTask extends AsyncTask 
{
      //etc
 } 
```

经过测试，它适用于所有 android 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:21:14.323

你确定不是你的 AsyncTask 不起作用吗，如果你在启动时运行了很多它们并且它们在单线程中执行，那么执行所有它们可能需要一段时间。

尝试在 Application.onCreate 或主要活动 onCreate 中运行一个新的 AsyncTask 并查看它是否运行。这样，您将测试一个从一开始就开始的独立 AsyncTask。

# php - 多态性——确保一切都是正确的

> ID：13439108
> 
> 赞同：0
> 
> 时间：2012-11-18T09:57:55.857
> 
> 标签：php, oop

我有一个负责处理所有配置的类 - 从文件中读取配置，并获取在 index.php 中设置的基本配置变量（+ 从那里设置它们）。

因此，我决定在这里使用多态性——我将 Config 类抽象化，并用 FILE 和 VARIABLE 类对其进行了扩展。

如果具有这两个职责的基类长 100 行，这是一种好的实践行为吗？

不要在这里对我投反对票——我只是不想在项目已经完成时发现它不是一个灵活的解决方案。

这是代码（虽然没有重构、测试和添加几个函数，但概念应该很清楚）。

```
class Config {

    private $file;

    public static $configs = array();

    /**
     * Initializes basic website configurations such as base URL, or the name
     * of the index file.
     *
     * These values can be accessed through this class
    */
    public static function init($configs = array())
    {
        foreach($configs as $key => $value)
        {
            self::$configs[$key] = $value;
        }
    }

    /**
     * Returns the configuration variable which is set in the index file
     *
     * @param string $attribute
     * @return multitype:
     */
    public function __get($attribute)
    {
        return ($this->configs[$attribute]) ? $this->configs[$attribute] : -1;
    }

    /**
     * Setting path to the config file.
     * 
     * @param string $module
     */
    private function __construct($module)
    {
        // Path to the config file
        $path = APATH . 'config' . DIRECTORY_SEPARATOR . $module . '.php';

        // Set the config file to the attribute here
        $this->file = include $path;
    }

    /**
     * Return the object.
     *
     */
    public static function factory($module)
    {
        return new Config($module);
    }

    /**
     * Loads configurations from the given file.
     *
     */
    public function load($property)
    {
        // Return requested value
        return $array[$property];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:49:31.000

你正在做的事情没有*错*，但这让我想*知道你为什么*要这样做。

如果您尝试以特定方式强制处理配置变量，那么可能会在静态类中加载它们一次。如果您正在尝试练习抽象，那么它是 100 行还是 1K 或任何长度都无关紧要。

这确实让我想知道为什么您将配置变量分散在许多不同的文件中，这样就需要像这样封装加载过程。通常配置信息在启动时加载一次并保留。如果您的应用程序启动后某处的某个文件/类没有加载配置或只是忽略您的实现，会发生什么？

如果不出意外，您可能希望将“init”设为私有并从构造函数中调用它。否则可以调用“工厂”但忽略此步骤并假设不存在配置信息。另外 - 如果 'configs' 是静态的，那么 '$this->configs' 似乎有点粗略。

# c# - Redis 客户端 GetAll 来自某个类的键

> ID：13439118
> 
> 赞同：6
> 
> 时间：2012-11-18T09:59:21.817
> 
> 标签：c#, redis, servicestack

我有一个带有许多键（大约 100 个）的 redis，我只想从 ClassA 类型中选择键（只是一个例子）。

现在我正在做 GetAllKeys，然后在所有项目上进行 foreach 循环并仅选择相关键。

是否可以仅选择相关键并使用一个功能将它们全部获取？

当我做 GetAll 时，我只得到 2 件物品，而我应该得到 45 件左右。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T11:58:39.647

以下代码将帮助您找到特定的键，您必须`*`在字符串后指定通配符，只会从 Redis 服务器获取特定的键。

```
 using (RedisClient redisClient = new RedisClient("localhost"))
 {
      string searchString = "ClassA*";

      var getSpecificKeys = redisClient.SearchKeys(searchString);

      foreach (var getKey in getSpecificKeys)
      {
           // operation
      }
  } 
```

# python - 如何将 .ipynb 文件上传到 Notebook Cloud 实例？

> ID：13439119
> 
> 赞同：3
> 
> 时间：2012-11-18T09:59:30.263
> 
> 标签：python, ipython, ipython-notebook

[https://notebookcloud.appspot.com/](https://notebookcloud.appspot.com/)上的 iPython Notebook 工具允许您下载 iPython 笔记本的 .ipynb 文件。但我找不到将其上传到另一个实例的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T23:31:59.593

归功于 Thomas K。

您应该能够将文件拖放到仪表板上（带有笔记本列表的页面）– Thomas K

* * *

## 更新：在一位用户评论无法拖放后：

在 ipython-notebook 仪表板页面上，请参阅以下行：“要导入笔记本，请将文件拖到下面的列表中或单击此处。” 单击“此处”链接将打开一个对话框以上传笔记本文件。

# c# - 我如何从两个不同的接口中引用方法

> ID：13439121
> 
> 赞同：1
> 
> 时间：2012-11-18T10:00:10.417
> 
> 标签：c#

如何引用提供相同方法的接口的方法定义，并且我想在类中定义该函数。例如我有两个接口

```
 public interface i1
{
    void show();

}

public interface i2
{
    void show();
} 
```

假设一个类 ClassA 实现了这些接口。他们会在定义上发生冲突吗？或者我应该如何定义它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:03:12.153

只有一种情况是可能发生冲突的——当您需要在一个类中拥有多个具有相同签名的方法时（方法名称和参数相同）。通常你可以只重命名一种方法来解决这个冲突。但是当你实现接口时，你不能改变实现方法的签名。如果多个接口具有相同签名的方法，并且您需要该方法的不同实现，则使用[显式接口实现](http://msdn.microsoft.com/en-us/library/aa288461%28v=vs.71%29.aspx)来解决冲突：

```
public class A : i1, i2
{
   void i1.show() { ... }
   void i2.show() { ... }
} 
```

用法：

```
A a = new A();
i1 x = (i1)a;
x.show(); // will call i1.show() implementation 
```

正如@ryadavilli 所说，仅当您需要针对不同接口的不同实现时才需要显式实现。否则，一种`show()`方法将满足两个接口。如果只有一种方法，则没有冲突。

*顺便说一句*，在 C# 中，我们使用 PascalCase 来命名方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:03:38.570

你可以这样做

```
class A : i1, i2
{
    void i1.show()
    {
        Console.WriteLine("1");
    }

    void i2.show()
    {
        Console.WriteLine("2");
    }
} 
```

如果您只想为两个 show() 提供一个实现

```
class A : i1, i2
{
    public void show()
    {
        Console.WriteLine("common method.");
    }
} 
```

# c# - C#如何将datagridview中的某些列日期时间更新到数据库

> ID：13439128
> 
> 赞同：0
> 
> 时间：2012-11-18T10:01:03.410
> 
> 标签：c#, sql-server, datagridview, updates

我需要将 datagridview 中的某些列更新到数据库。但不要更新到数据库。

第一步：我从 datetimepicker 中选择 datetime。

第二步：在 datagridview 上显示日期时间。

步骤树：我需要更新/编辑 datagridview 到数据库。

**在 Datagridview 上显示。**

```
EmpNo     fName     ChkDate     ChkIn   ChkOut
00001     Al        01/10/2012  08:02   17:04
00002     Bik       01/10/2012  07:43   18:35 
```

我需要将字段“ChkIn”更新到数据库。

**代码**

```
SqlConnection Conn;
SqlCommand cmd = new SqlCommand();
SqlDataAdapter da;
DataTable dt = new DataTable();
DataSet ds = new DataSet();
StringBuilder sb = new StringBuilder();

string appConn = ConfigurationManager.ConnectionStrings["connDB"].ConnectionString;

int i;

    for (i = 1; i < dgvShow.Rows.Count; i++)
    {
        if (dgvShow.Rows.Count > 0)
        {
            SqlConnection conn = new SqlConnection(appConn);
            string sql = "UPDATE [WebSP].[dbo].[filesTA]"
            + "SET [filesTA].ChkIn = replace(convert(nvarchar(10),'" + dgvShow.Rows[i].Cells[3].Value + "',102),'.',':')"
            + "FROM [WebSP].[dbo].[filesTA]"
            + "WHERE [filesTA].ChkDate = '" + dateTimePicker.Value.ToString("yyyy-MM-dd") + "' and [filesTA].EmpNo = '" + dgvShow.Rows[i].Cells[0].Value + "'";

            da = new SqlDataAdapter(sql, Conn);
            DataSet ds = new DataSet();
            da.Fill(ds);
            Conn.Close();

            dgvShow.DataSource = ds;
            da.Update(ds);
        }
    } 
```

错误：更新无法找到 TableMapping['Table'] 或 DataTable 'Table'。

**我尝试其他代码：**

```
Conn = new SqlConnection();
            if (Conn.State == ConnectionState.Open)
            {
                Conn.Close();
            }
            Conn.ConnectionString = appConn;
            Conn.Open();

SqlDataAdapter adapter = new SqlDataAdapter("SELECT * FROM [filesTA]", appConn);
            adapter.UpdateCommand = new SqlCommand("UPDATE [WebSP].[dbo].[filesTA]"
            + "SET [filesTA].ChkIn = replace(convert(nvarchar(10),@cIn,102),'.',':')"
            + "FROM [WebSP].[dbo].[filesTA]"
            + "WHERE [filesTA].ChkDate = @cDate and [filesTA].EmpNo = @eNo", Conn);

            adapter.UpdateCommand.Parameters.Add("@cIn", SqlDbType.NVarChar, 10, "ChkIn");
            adapter.UpdateCommand.Parameters.Add("@cDate", SqlDbType.NVarChar, 10, "ChkDate");
            adapter.UpdateCommand.Parameters.Add("@eNo", SqlDbType.NVarChar, 10, "EmpNo");

            DataSet ds = new DataSet();
            adapter.Fill(ds);

            dgvShow.DataSource = ds;
            adapter.Update(ds); 
```

此代码不保存到数据库。

# 谢谢你的时间。:D

**类型数据库：**

ChkIn 和 ChkDate 类型 DateTime,EmpNo 类型 NUMERIC

**我试试**

```
int i;
            for (i = 1; i < dgvShow.Rows.Count; i++)
            {
                if (dgvShow.Rows.Count > 0)
                {
                    using (Conn = new SqlConnection(appConn))
                    {
                        Conn.Open();

                        string sql = "UPDATE [WebSP].[dbo].[filesTA]" +
                                     "SET [filesTA].ChkIn = replace(convert(nvarchar(10),@cIn,102),'.',':')" +
                                     "FROM [WebSP].[dbo].[filesTA]" +
                                     "WHERE [filesTA].ChkDate = @cDate and [filesTA].EmpNo = @eNo";
                        SqlCommand cmd = new SqlCommand(sql, Conn);
                        cmd.Parameters.Add("@cIn", SqlDbType.DateTime, 10, "ChkIn").Value = Convert.ToDateTime(dgvShow.Rows[i].Cells[3].Value).ToString();
                        cmd.Parameters.Add("@cDate", SqlDbType.DateTime, 10, "ChkDate").Value = Convert.ToDateTime(dateTimePicker.Value.ToString()).ToString();
                        cmd.Parameters.Add("@eNo", SqlDbType.Decimal, 10, "EmpNo").Value = Convert.ToDecimal(dgvShow.Rows[i].Cells[0].Value).ToString();
                        cmd.ExecuteNonQuery();
                    }

                }
            } 
```

错误：从字符串转换日期和/或时间时转换失败。T__T

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:39:28.457

您可以尝试直接使用 SqlCommand 摆脱 SqlDataAdapter

```
Using(Conn = new SqlConnection(appConn))
{
    Conn.Open();

    string sql = "UPDATE [WebSP].[dbo].[filesTA] " + 
                 "SET [filesTA].ChkIn = replace(convert(nvarchar(10),@cIn,102),'.',':') " + 
                 "FROM [WebSP].[dbo].[filesTA] " +
                 "WHERE [filesTA].ChkDate = @cDate and [filesTA].EmpNo = @eNo";
    SqlCommand cmd = new SqlCommand(sql, Conn);
    cmd.Parameters.Add("@cIn", SqlDbType.NVarChar, 10, "ChkIn").Value = 
                               dgvShow.Rows[i].Cells[3].Value;
    cmd.Parameters.Add("@cDate", SqlDbType.NVarChar, 10, "ChkDate").Value = 
                                 dateTimePicker.Value.ToString("yyyy-MM-dd") ;
    cmd.Parameters.Add("@eNo", SqlDbType.NVarChar, 10, "EmpNo").Value = 
                                 dgvShow.Rows[i].Cells[0].Value ;
    cmd.ExecuteNonQuery();
} 
```

当然，在使用参数的时候，我们需要在运行命令之前设置好它们的值。

但是我真的不太了解更新 ChkIn 字段的代码。该字段（根据 Parameter 类型）是一个 nvarchar，那么为什么不尝试直接在代码中格式化 @cIn 值并避免使用 Sql Server Replace 和 Convert 函数呢？**102**也是日期[**样式**](http://msdn.microsoft.com/en-us/library/ms187928.aspx)。它用于将日期表达式格式化为带有`yy.mm.dddd`模式的字符串，但您有一个仅包含时间信息的字符串。

例如

**在您上次编辑后 - 更改为此**

```
DateTime chkIN = Convert.ToDateTime(dgvShow.Rows[i].Cells[3].Value);
DateTime chkDate = Convert.ToDateTime(dateTimePicker.Value.ToString("yyyy-MM-dd"));
decimal empNo = Convert.ToDecimal(dgvShow.Rows[i].Cells[0].Value) ;

cmd.Parameters.Add("@cIn", SqlDbType.DateTime).Value = chkIN;
cmd.Parameters.Add("@cDate", SqlDbType.DateTime).Value = chkDate;
cmd.Parameters.Add("@eNo", SqlDbType.Decimal).Value = empNo; 
```

查询中使用的语法也可能是其他问题的根源，但我需要查看您的连接字符串。

# php - PHP 配置：PDO 扩展已启用但未加载

> ID：13439133
> 
> 赞同：1
> 
> 时间：2012-11-18T10:02:24.533
> 
> 标签：php, apache, magento, wamp

我使用的是 Windows 7，wamp 服务器版本 2.2，PHP 版本 5.2.9。当我尝试在本地主机上运行我的 magento 网站时，它给了我以下错误：

“此适配器需要 PDO 扩展，但未加载扩展”

我仔细检查了 php.ini 文件中是否启用了 PDO 扩展。

```
;extension=php_bz2.dll
extension=php_curl.dll
;extension=php_dba.dll
;extension=php_dbase.dll
;extension=php_exif.dll
;extension=php_fdf.dll
extension=php_gd2.dll
;extension=php_gettext.dll
;extension=php_gmp.dll
;extension=php_ifx.dll
;extension=php_imap.dll
;extension=php_interbase.dll
;extension=php_ldap.dll
extension=php_mbstring.dll
extension=php_mcrypt.dll
;extension=php_mhash.dll
;extension=php_mime_magic.dll
;extension=php_ming.dll
;extension=php_msql.dll
;extension=php_mssql.dll
extension=php_mysql.dll
extension=php_mysqli.dll
;extension=php_oci8.dll
;extension=php_openssl.dll
extension=php_pdo.dll
;extension=php_pdo_firebird.dll
;extension=php_pdo_mssql.dll
extension=php_pdo_mysql.dll
;extension=php_pdo_oci.dll
;extension=php_pdo_oci8.dll
;extension=php_pdo_odbc.dll
;extension=php_pdo_pgsql.dll
extension=php_pdo_sqlite.dll
;extension=php_pgsql.dll
;extension=php_pspell.dll
;extension=php_shmop.dll
;extension=php_snmp.dll
extension=php_soap.dll
;extension=php_sockets.dll
;extension=php_sqlite.dll
;extension=php_sybase_ct.dll
;extension=php_tidy.dll
;extension=php_xmlrpc.dll
;extension=php_xsl.dll
;extension=php_zip.dll 
```

phpinfo 也加载了正确的 php.ini 文件。它早些时候工作，但突然开始给出错误。我还检查了 Apche 错误日志，但没有找到任何线索。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:46:56.467

*   首先将扩展目录移动到\Windows\System32\inetsrv{php}\extension
*   从 php.ini 文件更改路径

我认为您在加载 .dll 时遇到了安全问题！试试这个，让我知道结果。

* * *

要找出加载了哪个 php.ini 文件，请尝试以下操作（在命令行和网络服务器中运行以确保哪个版本加载了不同的环境）。

**检查 php.ini 文件路径：**

```
<?php
    $path = php_ini_loaded_file();
    echo 'The loaded file path is :' . $path;
?> 
```

# sql - SQL Server：根据匹配夹具的完成情况获取记录范围

> ID：13439134
> 
> 赞同：1
> 
> 时间：2012-11-18T10:03:02.610
> 
> 标签：sql, sql-server, tsql, pagination

我们有一个`Fixtures`jQuery 轮播滚轮，它显示已完成和即将到来的装置。请参阅新闻滚轮上方的[http://www.allblacks.com/ 。](http://www.allblacks.com/)目前这是硬编码的。

我们希望最多可滚动 5 条记录。滚轮应显示最近完成的夹具，前向箭头显示接下来的两个即将进行的夹具，后向箭头显示最近完成的两个夹具。这通过roller js自动发生，即如果返回5条记录，则roller将显示中央记录，即记录#3。

那么，如何编写查询以提取五条记录，其中第三条记录是最近完成的夹具？

下面是数据库结构。夹具的完成由 决定`eventDateTime`。

表**事件**：

```
eventID   Event                      eventDateTime
-------------------------------------------------
2016      Australia v All Blacks     2012-12-11 22:00:00.000
2015      South Africa v Australia   2012-12-04 03:00:00.000
2014      South Africa v Australia   2012-11-28 03:00:00.000
2013      South Africa v All Blacks  2012-11-22 03:00:00.000
2012      All Blacks v Australia     2012-11-07 19:35:00.000
2011      Australia v All Blacks     2012-10-31 22:00:00.000
2010      Australia v South Africa   2012-10-24 22:00:00.000
.... 
```

**编辑**

因此，由于`eventID`2012 年是截至当前日期（2012 年 11 月 18 日）最近完成的比赛，我希望返回的记录如下，`eventID`2012 年在中间，即第三条记录：

```
eventID   Event                      eventDateTime
-------------------------------------------------
2010      Australia v South Africa   2012-10-24 22:00:00.000  
2011      Australia v All Blacks     2012-10-31 22:00:00.000  
2012      All Blacks v Australia     2012-11-07 19:35:00.000
2013      South Africa v All Blacks  2012-11-22 03:00:00.000
2014      South Africa v Australia   2012-11-28 03:00:00.000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:53:26.950

You probably need just this:

```
select eventID, Event, eventDateTime
from
  (select top 3 *
   from events
   where DATEADD(dd, DATEDIFF(dd,0,eventDateTime), 0) <= getdate()
   order by eventDateTime) first
union all
select eventID, Event, eventDateTime
from
  (select top 2 *
   from events
   where DATEADD(dd, DATEDIFF(dd,0,eventDateTime), 0) > getdate()
   order by eventDateTime) second 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:38:19.170

```
Select * from
(
select top 3 * from #event where eventDateTime<=(getdate()) order by eventDateTime desc
UNION
select top 2 * from #event where eventDateTime>(getdate())
) a
order by eventDateTime 
```

一个补充可能是

```
Select * from
(
select top 3 *,1 - row_number() over (order by GetDate() - eventDateTime)  as Sequence from #event where eventDateTime<=(getdate()) order by eventDateTime desc
UNION
select top 2 *, row_number() over (order by eventDateTime - GetDate() ) from #event where eventDateTime>(getdate())
) a
order by  eventDateTime 
```

# android - Android：应用程序的专用内存分配

> ID：13439135
> 
> 赞同：-3
> 
> 时间：2012-11-18T10:03:09.837
> 
> 标签：android, android-layout, android-intent, kernel

[问同样的问题，但不是针对 iPhone 而是针对 Android 平台]

我想专门分配一小部分内存给我的应用程序使用。这样做的目的是在我的 Android 手机上运行的另一个应用程序无论如何都不会影响我的应用程序。

有没有可能？如果是，那么如何？

任何链接或任何帮助都会帮助我...

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:18:19.657

不，这在实践中是不可能的。从理论上讲，包含内核扩展的应用程序可以让扩展分配一些有线内存并将对该内存的引用传递给应用程序进程。这在对 iOS 应用程序施加的限制范围内是不可能的——内核接口不可用。

# bluetooth - 安卓蓝牙键盘

> ID：13439141
> 
> 赞同：0
> 
> 时间：2012-11-18T10:03:37.837
> 
> 标签：bluetooth, arduino, circuit

我正在尝试使用任何 arduino 为 Android 手机制作蓝牙键盘（3x4），因为我正在尝试将其制作为盲文键盘。可能吗？如果是。我应该使用哪种 arduino？还有其他蓝牙盾吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T09:47:19.093

您需要一个 Arduino uno（或任何兼容的板）和一个用于 Arduino 的蓝牙屏蔽或板。您可以从 sparkfun试用这款[蓝牙板。](https://www.sparkfun.com/products/158)

该板通过串行连接到 Arduino。所以你可以只使用内置的串行库。

该板还可以轻松与 Android 设备连接。

# c# - 如何在 C# winform 中刷新用户控件？

> ID：13439149
> 
> 赞同：-1
> 
> 时间：2012-11-18T10:03:50.003
> 
> 标签：c#, winforms, user-controls

我在 C# winform 中使用用户控件而不是表单。在用户控件中，我在单击按钮时放置按钮（新建），刷新用户控件。我使用 this.refresh(); 在事件中，但没有工作！

```
private void Btn_New_Click(object sender, EventArgs e)
{
   this.Refresh();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:21:19.750

`Refresh()`只是在屏幕上重新绘制控件。通常您不会手动调用它，而是必须更改控件的属性，例如

```
private void Btn_New_Click(object sender, EventArgs e)
{
    this.TextBoxFirstName.Text = string.Empty;
    this.TextBoxLastName.Text = string.Empty;
    // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:07:09.700

您将必须实现 2 种方法，一种用于管理组合框，另一种用于管理 Button。

```
Private Void ComboBox_SelectedIndexChanged ()
{
     switch(ComboBox.selectedIndex)
     {
          case 0:
               textbox1.text = "1";
               break;
          case 1:
               textbox1.text = "2";
               break;
          // ... etc
     }
}

Private Void Button_clicked ()
{
     ComboBox.selectedIndex = 0;
} 
```

# javascript - 我是否需要在 javascript / typescript 中为匿名函数指定返回类型？

> ID：13439157
> 
> 赞同：2
> 
> 时间：2012-11-18T10:05:01.917
> 
> 标签：javascript, typescript

我有以下功能：

```
 $('td:eq(' + iColumn + ') input', oSettings.oApi._fnGetTrNodes(oSettings))
        .each(function () {
            aData.push(this.value);
         }); 
```

在打字稿中，我收到一条消息：

```
Error   3   Function declared a non-void return type, but has no return expression 
```

为什么我会收到此消息？我可以通过说“return true”来解决该消息。我应该始终为此指定返回类型吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:48:10.233

打字稿存储库上文件中`.each()`的签名是：`jquery.d.ts`

```
each(func: (index: any, elem: Element) => JQuery); 
```

jQuery 文档说

> 我们可以通过返回 false 从回调函数中停止循环。

这意味着这`jquery.d.ts`是错误的。

[如果您从Boris Yankov 的存储库](https://github.com/borisyankov/DefinitelyTyped/tree/master/Definitions)中获取更新版本，它将变为：

```
each(func: (index: any, elem: Element) => any); 
```

此表格将允许您返回任何东西，或者什么都不返回。

# c++ - 使用 doxygen 以类 C++ 语言记录未声明的函数

> ID：13439159
> 
> 赞同：5
> 
> 时间：2012-11-18T10:05:10.670
> 
> 标签：c++, documentation, doxygen

我正在开发一个专有工具，它使用类似 C++ 的语言来定义各种方法。该工具提供了自己的编译器来将这些方法编译成 .so 文件。它不遵循 C++ 的“声明-定义”语法，但在其他方面非常相似。示例代码如下所示：

```
method _foo::bar(var message) {
    // do something with 'message' here
} 
```

我尝试使用 doxygen 记录此方法，如下所示：

```
/**
  * @brief this method does something with @a message.
  */
method _foo::bar(var message) {
    // do something with 'message' here
} 
```

但这给了我一个警告：

```
warning: documented function `method _foo::bar' was not declared or defined. 
```

我尝试将`@fn method _foo::bar()`、、`@fn _foo::bar`和添加`@fn bar`到注释块（一个接一个），但它们都没有导致将`@brief`消息添加到文档中。

我已经在 Stack Overflow 上进行了搜索，这篇[Doxygen 评论与 C++ 标头](https://stackoverflow.com/questions/11583920/doxygen-comments-with-undeclared-functions-in-c-headers)中未声明的函数最接近我的问题，但它并不能完全解决我的问题。

有没有办法配置 doxygen 来为函数生成文档，而不管它是否未声明？

# python - 在 Python 中添加和追加到列表之间的区别

> ID：13439160
> 
> 赞同：0
> 
> 时间：2012-11-18T10:05:17.327
> 
> 标签：python

> **可能重复：**
> [LIST.append(1) 和 LIST = LIST + [1] (Python) 有什么区别](https://stackoverflow.com/questions/3638486/what-is-the-difference-between-list-append1-and-list-list-1-python)

我对参数如何传递给函数及其可变性有疑问，尤其是在列表的情况下。

考虑以下...

```
def add_list(p):
    p = p + [1]

def append_list(p):
   p.append(1)

p = [1, 2, 3]

add_list(p)
print p

append_list(p)
print p 
```

我得到的输出是......

```
[1, 2, 3]
[1, 2, 3, 1] 
```

为什么在函数中追加原始列表时会更改，但使用运算符 + 时不会更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:23:30.207

函数中的赋值运算符创建一个新的局部变量。在 *add_list* 函数中，您的*p*是局部变量。

# google-apps-script - 谷歌电子表格中的行数减一

> ID：13439166
> 
> 赞同：2
> 
> 时间：2012-11-18T10:06:30.963
> 
> 标签：google-apps-script, google-sheets

我想删除空行。第 885 行是非空行，应保留。但是，我的代码说（并在 msgbox 中显示）885 是空的，应该被删除。当它到达 i=884 时，它会打印第 885 行中的实际内容，并说它不会被删除。所以，我很困惑。它似乎正确地作用于数据，但它报告的行号错误。我怀疑你会告诉我偏移量是从零开始的，并且行从 1 开始，所以如果 lastrow=888（从 1 开始），那么我需要减去 1 来匹配偏移量。所以我在电子表格中看到的第 885 行实际上是第 884 行作为偏移量。

但是...当 i=885 行有数据时，偏移量为 884。而当 i=884 时，偏移量为 883...那为什么要打印第 885 行的内容？这里严重混淆。我怎么了？

最后但最重要的是......它删除了错误的行！它怎么能引用正确的数据，但仍然删除错误的行？？？

```
var s = SpreadsheetApp.getActiveSheet();
var range = SpreadsheetApp.getActiveSheet().getDataRange();
var i = range.getLastRow();
var msg;
var colNum;

for (; i > 1; i--) {  // I like to start at the end
  var foundAvalue=0;  // reset flag for each row

  rowRange = range.offset(i, 0, 1); 

  var valArray=rowRange.getValues();
  var foundAvalue=0;
  var msg;
  var totalColumns=rowRange.getNumColumns();

   colNum=0;   

   while (colNum < totalColumns && (foundAvalue==0)) {
     if (valArray[0][colNum] != '') {       
       foundAvalue=1; 
       msg="Row " + i + " =" + valArray[0];
       Browser.msgBox(msg);
       msg="Row " + i + " will not be deleted";
       Browser.msgBox(msg);
     }
     colNum++;
   }
   if (foundAvalue == 0) {
      msg="Row " + i + " =" + valArray[0] + "WILL be deleted";
      Browser.msgBox(msg);
           // delete empty row
      // s.deleteRow(i);
   }

 } // end for(i) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T19:33:27.257

下面是一些应该完成你想要的代码。您是正确的，问题的根源在于基于 0 的索引。棘手的部分是 JavaScript/Apps 脚本数组使用基于 0 的索引，但是当您调用类似`getLastRow()`的内容时，返回的范围是基于 1 的。总而言之，您的代码很好 - 只是那个问题让您感到困惑。希望这可以帮助：

```
function DeleteFun(){
  var mySheet = SpreadsheetApp.getActiveSheet();
  var range = mySheet.getDataRange();

  // Iterate using a counter, starting at the last row and stopping at
  // the header (assumes the header is in the first row)
  for (i = mySheet.getLastRow() - 1; i > 0; i--) {
    var foundAvalue = 0;
    // Here we get the values for the current row and store in an array
    rowRange = range.getValues()[i]
    // Now we iterate through that array
    for (j = 0; j <= rowRange.length; j++) {
      // If any non-nulls are found, alert they won't be deleted and move on
      if (rowRange[j] != null && rowRange[j] != '') {
        foundAvalue = 1; 
        msg="Row " + (i+1) + " =" + rowRange[0] + " and will not be deleted";
        Browser.msgBox(msg);
        break;
       }
    }

    if (foundAvalue == 0) {
      msg="Row " + (i+1) + " =" + rowRange[0] + "WILL be deleted";
      Browser.msgBox(msg);
      // Delete empty row
      mySheet.deleteRow(i+1);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T20:05:14.733

如果您不在工作表中使用公式，您也可以在“纯”数组中执行此操作。

像这样的例子：

```
function deleteEmptyRows(){ 
 var sh = SpreadsheetApp.getActiveSheet();
 var data = sh.getDataRange().getValues();
 var targetData = new Array();
 for(n=0;n<data.length;++n){
 if(data[n].join().replace(/,/g,'')!=''){ targetData.push(data[n])};// checks the whole row
 Logger.log(data[n].join().replace(/,/g,''))
 }
 sh.getDataRange().clear(); // clear the whole sheet
 sh.getRange(1,1,targetData.length,targetData[0].length).setValues(targetData);//write back all non empty rows
 } 
```

# mysql - 在 ALTER TABLE 之后 MySQL shell 中的回滚不起作用

> ID：13439167
> 
> 赞同：5
> 
> 时间：2012-11-18T10:06:35.560
> 
> 标签：mysql, innodb

（MySQL 5.5，InnoDB 表）为什么我不能回滚到保存点或上一个`begin`语句？

```
mysql> set autocommit=0;
Query OK, 0 rows affected (0.00 sec)

mysql> start transaction;
Query OK, 0 rows affected (0.00 sec)

mysql> savepoint id;
Query OK, 0 rows affected (0.00 sec)

mysql> alter table sg_Section add column (published tinyint(1) default 0);
Query OK, 2 rows affected (0.30 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> rollback to savepoint id;
ERROR 1305 (42000): SAVEPOINT id does not exist 
```

在保存点之后不运行任何命令时，它似乎“工作”：

```
mysql> savepoint id;
Query OK, 0 rows affected (0.00 sec)

mysql> rollback to savepoint id;
Query OK, 0 rows affected (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T10:07:51.393

DDL 在 MySQL 中不是事务性的。

任何 DDL 语句都会隐式提交打开的事务。

手册中的更多详细信息：http: [//dev.mysql.com/doc/refman/5.5/en/implicit-commit.html](http://dev.mysql.com/doc/refman/5.5/en/implicit-commit.html)

# jquery - 与 jQuery.ready() 或 DOM 就绪相关的 JQuery Basic

> ID：13439172
> 
> 赞同：0
> 
> 时间：2012-11-18T10:07:02.747
> 
> 标签：jquery, html

我见过人们这样做

```
$(window).load(function(){
}); 
```

还

```
$(document).ready(function() {
}); 
```

但是一些jquery仍然可以在这两个函数之外工作，为什么？

**更新**

唔。这意味着我可以在 $(document).ready 中使用 $(window).load 吗？或者他们应该分开？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:11:23.853

只有代表

```
$(document).ready() 
```

.ready 函数在 DOM 准备好后执行。

```
$(window).load(); 
```

将在页面及其所有内容加载完成后执行。这意味着所有图像，css。

如果您正在编写一些不依赖于选择 DOM 节点或不需要完全加载文档的 JS 代码，您可以并且通常应该将该代码放在此块之外。

# html - 我网站上的 iframe 未加载

> ID：13439182
> 
> 赞同：0
> 
> 时间：2012-11-18T10:08:46.440
> 
> 标签：html, iframe

我正在尝试将我[网站上](http://www.karmielfolkklub.com/)的一个页面加载到另一个页面中的 iframe 中，我目前正在本地主机上运行该页面。不幸的是，它不起作用。我已经尝试从 youtube、heroku（我的页面托管的地方）等加载其他页面，它们都工作正常，只有专门来自我的网站的内容没有加载。任何想法为什么？

我的页面的代码如下：

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">            
  </head>   
  <body>
    <h1>hi</h1>
    <iframe width="560" height="315" src="http://www.karmielfolkklub.com"></iframe>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:46:06.627

页面[http://www.karmielfolkklub.com](http://www.karmielfolkklub.com)发送的 HTTP 标头显示：

```
X-Frame-Options: sameorigin 
```

[这意味着](https://developer.mozilla.org/en-US/docs/The_X-FRAME-OPTIONS_response_header)不允许浏览器在内联框架中显示页面，除非包含 iframe 元素的页面在同一个域中。现代浏览器通常遵循这一点。

更改这取决于服务器设置或用于生成页面的服务器端代码。

# python - 每次在 django 中创建另一行时创建一行

> ID：13439190
> 
> 赞同：2
> 
> 时间：2012-11-18T10:09:35.290
> 
> 标签：python, database, django, model

每次在特定表中创建一行时，我想在我的一个数据库表中创建一行。例如：

```
class Group(models.Model):
    name               = models.CharField(max_length=50)
    slug               = models.SlugField(unique = True)
    about              = models.TextField(blank = True, null=True) 
```

每次在此表中创建新行时，我都想在 Link 类中添加新行

```
class Link(models.Model):
    name               = models.CharField(max_length=50)
    slug               = models.SlugField(unique = True)
    location           = models.CharField(max_length= 200) 
```

该组的蛞蝓将成为链接位置的一部分。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:18:21.320

这是[`post_save`](https://docs.djangoproject.com/en/dev/ref/signals/#django.db.models.signals.post_save)信号的来源。您可以将其添加到 models.py 的底部：

```
from django.db.models.signals import post_save

def create_group_links(instance, created, **kwargs):
    if created:
        Link.objects.create(name='FOO', slug='BAR', location='LOC' + instance.slug)
post_save.connect(create_group_links, sender=Group) 
```

# ruby-on-rails - 带有rails的mongodb，通过数组中的id查找

> ID：13439197
> 
> 赞同：7
> 
> 时间：2012-11-18T10:10:31.110
> 
> 标签：ruby-on-rails, mongodb, select, find, bson

我可以通过 BSON id 从 Mongodb 获取一个元素

```
db.my_collection.find({_id: ObjectId("567bc95ab62c732243123450")}) 
```

它有效。但是我怎样才能得到一个 id 数组呢？就像是

```
db.my_collection.find({_id: [ObjectId("567bc95ab62c732243123450"])}) 
```

正如 mongodb 网站上所建议的那样，我尝试了不同的方法，但交互式 shell 抱怨语法。

**编辑：**

发现一个问题：

它应该是

```
db.my_collections.find({_id: { $in : [ObjectId("567bc95ab62c732243123450")]}}) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T10:23:28.253

在 Rails 中：

```
MyCollection.find({'_id' => { "$in" => collection_ids}}) 
```

# android - 如何将 POI 库包含到 Android 项目中？

> ID：13439199
> 
> 赞同：1
> 
> 时间：2012-11-18T10:11:16.173
> 
> 标签：android, apache-poi

如何将 poi 库包含到 android 项目中？当我想将它包含在常规 Java 项目中时，我会右键单击该项目，在 Eclipse -> 构建路径 -> 添加外部档案

我应该如何在 Android 项目中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:22:12.500

您应该将 jar 放在 libs 文件夹中，然后 Project -> Properies -> Java Buid Path -> Add JARs -> 从 libs 文件夹中选择您的库的 jar -> OK。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:16:29.693

您应该将 jar 放入 libs 文件夹（与 res 或 src 文件夹相同级别）并执行 Eclipse -> Build path -> Add external Archives

# android - android-16 的源代码与 jar 文件不匹配

> ID：13439200
> 
> 赞同：2
> 
> 时间：2012-11-18T10:11:19.373
> 
> 标签：android

我的 Eclipse Android 应用程序是使用 android-sdk\platforms\android-16 中的 android.jar 构建的，在断点处我想查看调用堆栈中的以下代码：

```
ViewRoot.draw(boolean) line: 1522 
```

我在 android-sdk\sources\android-16 中有 android-16 的源代码。但是，没有 ViewRoot.java - 我最接近的是 android-sdk\sources\android-16\android\view 中的 ViewRootImpl.java。draw(boolean) 函数在那里，但从第 2050 行开始。第 1522 行的功能完全不同。

所以我的问题是：为什么文件名和行号不匹配？

我的清单有 targetSdkVersion="15"，但这应该没什么区别，对吧？我在源文件夹中搜索了 ViewRoot.java，但只找到了 ViewRootImpl.java 和 ViewRootImpl_Delegate.java（不管是什么）。

编辑：添加了完整的调用堆栈

```
Spine [Android Application] 
DalvikVM[localhost:8613]    
    Thread [<1> main] (Suspended (breakpoint at line 670 in ChartView)) 
        <VM does not provide monitor information>   
        ChartView.onDraw(Canvas) line: 670  
        ChartView(View).draw(Canvas) line: 6880 
        NineFrameLayout(ViewGroup).drawChild(Canvas, View, long) line: 1646 
        NineFrameLayout(ViewGroup).dispatchDraw(Canvas) line: 1373  
        LinearLayout(ViewGroup).drawChild(Canvas, View, long) line: 1644    
        LinearLayout(ViewGroup).dispatchDraw(Canvas) line: 1373 
        FrameLayout(ViewGroup).drawChild(Canvas, View, long) line: 1644 
        FrameLayout(ViewGroup).dispatchDraw(Canvas) line: 1373  
        PhoneWindow$DecorView(ViewGroup).drawChild(Canvas, View, long) line: 1644   
        PhoneWindow$DecorView(ViewGroup).dispatchDraw(Canvas) line: 1373    
        PhoneWindow$DecorView(View).draw(Canvas) line: 6883 
        PhoneWindow$DecorView(FrameLayout).draw(Canvas) line: 357   
        PhoneWindow$DecorView.draw(Canvas) line: 1862   
        ViewRoot.draw(boolean) line: 1522   
        ViewRoot.performTraversals() line: 1258 
        ViewRoot.handleMessage(Message) line: 1859  
        ViewRoot(Handler).dispatchMessage(Message) line: 99 
        Looper.loop() line: 123 
        ActivityThread.main(String[]) line: 3683    
        Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
        Method.invoke(Object, Object...) line: 507  
        ZygoteInit$MethodAndArgsCaller.run() line: 839  
        ZygoteInit.main(String[]) line: 597 
        NativeStart.main(String[]) line: not available [native method]  
    Thread [<8> Binder Thread #2] (Running) 
    Thread [<7> Binder Thread #1] (Running) 
    Thread [<10> Binder Thread #3] (Running)    
    Thread [<11> Binder Thread #4] (Running) 
```

这是我感兴趣的 ViewRoot.draw 中发生的事情，因为这是调用堆栈中的点（在调试器中使用 step return），其中视图屏幕在运行 Gingerbread 的手机上被空白（在我的情况下是 AVD -我没有那个硬件）。这是因为我升级了 UI 以使用 SherlockActionBar，但是有问题的代码是从 Android 导入的，而不是从 Sherlock 库导入的。但我的问题仍然存在 - 为什么我在 android-16 源代码中找不到 ViewRoot.java，只有一个类似的模块，其中行号不相关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T23:17:14.370

您在堆栈跟踪中看到的行号和类与您运行 apk 的 android 版本有关。在您的情况下**Gingerbread**，因此您需要在该版本的 sdk 中查找源代码。在您的情况下，假设您正在使用的 sdk 版本，适当的源代码应该是[这样的。](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.7_r1/android/view/ViewRoot.java#ViewRoot.draw%28boolean%29)如果它不只是更改该站点上的版本，那么您应该拥有您正在寻找的东西。

# asp.net - Ajax 控件工具包组件引用错误

> ID：13439213
> 
> 赞同：0
> 
> 时间：2012-11-18T10:12:47.827
> 
> 标签：asp.net, ajaxcontroltoolkit

您好我正在尝试在 asp.net 项目中安装 ajax 控件工具包。我使用 Nugget 将库下载到项目中并将每个控件加载到工具箱中，但是当我尝试使用任何控件时，我收到此错误：

```
Error   3   The type 'System.Web.UI.Design.ExtenderControlDesigner' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.   D:\Projects IDE\Visual Studio\C# Book\ASP.NET\WebSite12\Default.aspx    14 
```

阅读此错误后，我将其添加到配置文件中：

```
<assemblies>
      <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</assemblies> 
```

我知道这应该指向我需要的程序集，但它不起作用，也许有人可以告诉我首先应该从哪里得到这个字符串财产，我不明白我应该从哪里得到它们，尤其是 PublicKeyToken。

这是我的全部代码：

```
 <%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
        </asp:ToolkitScriptManager>
        <asp:AlwaysVisibleControlDesigner ID="AlwaysVisible" runat="server">

        </asp:AlwaysVisibleControlDesigner>
    </form>
</body>
</html> 
```

这是 web.config 文件的内容：

```
 <?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <system.web>
      <compilation debug="false" targetFramework="4.0" >
          <assemblies>
              <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
          </assemblies>
      </compilation>
    <pages>
      <controls>
        <add tagPrefix="asp" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />
      </controls>
    </pages>
  </system.web>
</configuration> 
```

在通过名为 packages.config 的 nugget 安装 ajax 控制工具包后，还添加了第二个配置文件：

```
 <?xml version="1.0" encoding="utf-8"?>
<packages>
  <package id="AjaxControlToolkit" version="4.1.60919" targetFramework="net40" />
</packages> 
```

我在这里做错了什么？为什么我会收到这个错误？

**编辑**

事实证明，我必须添加一个额外的程序集才能工作：

```
 <assemblies>
          <add assembly="System.Web.Extensions.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
          <add assembly="System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
 </assemblies> 
```

现在我收到一条错误消息：

```
**Error 2   Type 'AjaxControlToolkit.AlwaysVisibleControlDesigner' does not have a public property named 'TargetControlID'. D:\Projects IDE\Visual Studio\C# Book\ASP.NET\WebSite12\Default.aspx    14 
```

**

这是代码：

```
<asp:AlwaysVisibleControlDesigner ID="AlwaysVisible"  runat="server" TargetControlID="Panel1" HorizontalOffset="10" HorizontalSide="Right" VerticalOffset="10" >
 </asp:AlwaysVisibleControlDesigner> 
```

我很确定这应该是正确的，我从 Proffesional asp.net in C# and VB 一书中得到了这个例子

不知何故，我的代码没有获得 ajaxcontrol 工具包属性。我该如何纠正这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T13:35:33.187

我很久以前就遇到过这个问题。我的代码的问题在于它使用了两个不同版本的 Ajax 控制工具包。工具箱有最新的 Ajax 控件工具包（带有颜色选择器、编辑器控件的工具包），并且在项目中添加的引用是旧版本的。

怎么解决：

1.  从工具箱中删除 Ajax Control 选项卡。
2.  重新添加选项卡并右键单击选项卡，选择选择项目并浏览到 `AjaxControltoolkit.dll`您自己项目中的文件并按确定（只是为了确保我们在两个地方使用相同的版本）
3.  清理并重建解决方案，您就可以开始了。

# java - 在 Java 中使用对象的副本

> ID：13439217
> 
> 赞同：1
> 
> 时间：2012-11-18T10:13:09.313
> 
> 标签：java, object, copy

我最后的最后一个 java 作业，除了下面的这两行，我一切都好。它的意图是什么，我该怎么做？任何提供线索的人都将受到赞赏。

我不允许在这个上使用原语

> 不要直接分配给定的 Wrapper Class 对象（Integer、Char、Double 等）。使用对象的副本。

昨天我和我的助手谈过，当你这样分配值时，他很难过：

> 整数 asd ;
> asd = 新整数（10）；

而不是这个：

> 整数 asd ;
> asd = 10 ;

它复制对象并分配值。然后（我认为）旧记录有资格进行垃圾收集器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:22:11.530

我想这意味着您应该使用[Integer#parseInt](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)和[Integer#valueOf](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Integer.html#valueOf%28java.lang.String%29)之类的方法，而不是直接使用构造函数创建对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:21:25.113

有点像他们在钓鱼

```
object.clone(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:35:58.700

您可能必须对其进行序列化和反序列化。然后您可以获得该对象的另一个副本。见[https://stackoverflow.com/a/2836659/940313](https://stackoverflow.com/a/2836659/940313)

顺便说一句，默认`Object.clone()`情况`protected`下，因此您可能无法以这种方式复制对象，除非相应的类真正实现`clone()`并将其声明为`public`.

# regex - 用于 R 注释的正则表达式 Emacs

> ID：13439218
> 
> 赞同：2
> 
> 时间：2012-11-18T10:13:12.220
> 
> 标签：regex, r, emacs, lisp, elisp

我想在 Emacs 中构建一个正则表达式来清理我的 R 代码。

我遇到的问题之一是有不同类型的评论：你有一定数量的空格（1），例如：

```
 # This is a comment:
# This is also a comment 
```

或者你有这样的情况（2）：

```
require(lattice) # executable while the comment is informative 
```

这个想法是我想在第二类评论（在可执行的东西之后）时对齐评论，同时排除第一类评论。

理想情况下，它将所有评论与第一类评论对齐，但不是第一类评论。

例子：

```
funfun <- function(a, b) {
# This is a function
    if (a == b) { # if a equals b
      c <- 1 # c is 1 
    }
  }  
# 
```

至：

```
funfun <- function(a, b) {
# This is a function
    if (a == b) { # if a equals b
      c <- 1      # c is 1 
    }
  }  
# 
```

我找到了一个正则表达式来代替第一种，所以我能够按段落对齐它们（标记段落）。那工作得很好。

那么问题是反向替换：

```
(replace-regexp "^\\s-+#+" "bla" nil (point-min) (point-max)) 
```

这将从行首替换为任意数量的空格和任意数量的注释字符，例如：

```
 ######### 
```

进入

```
 bla 
```

问题是我想将它们替换回原来的样子，所以“bla”必须回到相同数量的空格和相同数量的#。

希望有人了解我想要做什么，并且对方法有更好的想法，或者知道如何解决这个正则表达式部分。

![在此处输入图像描述](../Images/5c236c27d53386ad298aef414ecd2939.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:58:06.707

好吧，这里有一些我认为你在做的疯狂尝试。它似乎工作，但它需要大量的测试和抛光：

```
(defun has-face-at-point (face &optional position)
  (unless position (setq position (point)))
  (unless (consp face) (setq face (list face)))
  (let ((props (text-properties-at position)))
    (loop for (key value) on props by #'cddr
          do (when (and (eql key 'face) (member value face))
               (return t)))))

(defun face-start (face)
  (save-excursion
    (while (and (has-face-at-point face) (not (bolp)))
      (backward-char))
    (- (point) (save-excursion (move-beginning-of-line 1)) (if  (bolp) 0 -1))))

(defun beautify-side-comments ()
  (interactive)
  ;; Because this function does a lot of insertion, it would
  ;; be better to execute it in the temporary buffer, while
  ;; copying the original text of the file into it, such as
  ;; to prevent junk in the formatted buffer's history
  (let ((pos (cons (save-excursion
                     (beginning-of-line)
                     (count-lines (point-min) (point)))
                   (- (save-excursion (end-of-line) (point)) (point))))
        (content (buffer-string))
        (comments '(font-lock-comment-face font-lock-comment-delimiter-face)))
    (with-temp-buffer
      (insert content)
      (goto-char (point-min))
      ;; thingatpt breaks if there are overlays with their own faces
      (let* ((commentp (has-face-at-point comments))
             (margin
              (if commentp (face-start comments) 0))
             assumed-margin pre-comment commented-lines)
        (while (not (eobp))
          (move-end-of-line 1)
          (cond
           ((and (has-face-at-point comments)
                 commentp)            ; this is a comment continued from
                                        ; the previous line
            (setq assumed-margin (face-start comments)
                  pre-comment
                  (buffer-substring-no-properties
                   (save-excursion (move-beginning-of-line 1))
                   (save-excursion (beginning-of-line) 
                                   (forward-char assumed-margin) (point))))
            (if (every
                 (lambda (c) (or (char-equal c ?\ ) (char-equal c ?\t)))
                 pre-comment)
                ;; This is the comment preceded by whitespace
                (setq commentp nil margin 0 commented-lines 0)
              (if (<= assumed-margin margin)
                  ;; The comment found starts on the left of
                  ;; the margin of the comments found so far
                  (save-excursion
                    (beginning-of-line) 
                    (forward-char assumed-margin)
                    (insert (make-string (- margin assumed-margin) ?\ ))
                    (incf commented-lines))
                ;; This could be optimized by going forward and
                ;; collecting as many comments there are, but
                ;; it is simpler to return and re-indent comments
                ;; (assuming there won't be many such cases anyway.
                (setq margin assumed-margin)
                (move-end-of-line (1- (- commented-lines))))))
           ((has-face-at-point comments)
            ;; This is the fresh comment
            ;; This entire block needs refactoring, it is
            ;; a repetition of the half the previous blockp
            (setq assumed-margin (face-start comments)
                  pre-comment
                  (buffer-substring-no-properties
                   (save-excursion (move-beginning-of-line 1))
                   (save-excursion (beginning-of-line) 
                                   (forward-char assumed-margin) (point))))
            (unless (every
                     (lambda (c)
                       (or (char-equal c ?\ ) (char-equal c ?\t)))
                     pre-comment)
              (setq commentp t margin assumed-margin commented-lines 0)))
           (commentp
            ;; This is the line directly after a block of comments
            (setq commentp nil margin assumed-margin commented-lines 0)))
          (unless (eobp) (forward-char)))
        ;; Retrieve back the formatted contnent
        (setq content (buffer-string))))
    (erase-buffer)
    (insert content)
    (beginning-of-buffer)
    (forward-line (car pos))
    (end-of-line)
    (backward-char (cdr pos)))) 
```

我还在 pastebin 上复制了它以获得更好的可读性： http: [//pastebin.com/C2L9PRDM](http://pastebin.com/C2L9PRDM)

编辑：这应该恢复鼠标位置，但不会恢复滚动位置（可以工作，也许，我只需要寻找滚动的存储方式）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T00:41:23.313

`align-regexp`是你需要的令人敬畏的 emacs 魔法：

```
(defun align-comments ()
  "align R comments depending on whether at start or in the middle."
  (interactive)
  (align-regexp (point-min) (point-max)  
    "^\\(\\s-*?\\)\\([^[:space:]]+\\)\\(\\s-+\\)#" 3 1 nil) ;type 2 regex
  (align-regexp (point-min) (point-max)  
    "^\\(\\s-*\\)\\(\\s-*\\)#" 2 0 nil))                    ;type 1 regex 
```

前：

```
# a comment type 1
      ## another comment type 1
a=1 ###### and a comment type 2 with lots of #####'s
a.much.longer.variable.name=2          # and another, slightly longer type 2 comment    
      ## and a final type 1 
```

后：

```
 # a comment type 1
      ## another comment type 1
a=1                           ###### and a comment type 2 with lots of #####'s
a.much.longer.variable.name=2 # and another, slightly longer type 2 comment    
      ## and a final type 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T14:10:12.563

尝试

```
(replace-regexp "^\\(\\s-+\\)#" "\\1bla" nil (point-min) (point-max)) 
```

然后

```
(replace-regexp "^\\(\\s-+\\)bla+" "\\1#" nil (point-min) (point-max)) 
```

但如果我很了解你，我可能会做类似的事情：

```
(align-string "\b\s-#" begin end) 
```

# php - Codeigniter DB Query with where, or, and.. and like

> ID：13439225
> 
> 赞同：6
> 
> 时间：2012-11-18T10:14:46.497
> 
> 标签：php, mysql, codeigniter, activerecord

我在下面查询它的条件（减去选择、来自等）

```
$this->db->where('show_year', $yyyy);
$this->db->or_where('idn', $idn);
$this->db->or_like('post_slug', $idn); 
```

哪些形式

```
SELECT * FROM (`nyb_articles`) 
WHERE `show_year` = '2009' 
OR `idn` = 'the' 
AND `post_slug` LIKE '%the%' 
```

但是我希望它更像

```
SELECT * FROM (`nyb_articles`) 
WHERE `show_year` = '2009' 
AND (`idn` = 'the' OR `post_slug` LIKE '%the%') 
```

我的问题是我不确定 CI 的活动记录是否支持这个概念，如果支持，我将如何解决它，因为我在文档的任何地方都找不到它的概念。无论我如何改变`like`, `or_like`, `where`，`or_where`我什至无法确定类似的东西。所以有人有任何想法吗？如果可能的话，我宁愿远离原始查询，但如果我必须准备一个并这样做，我会，只是不想这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T13:41:14.090

你试过这个吗？

```
SELECT * FROM (`nyb_articles`) 
WHERE `show_year` = '2009' AND `idn` = 'the' 
OR `show_year`='2009' AND `post_slug` LIKE '%the%' 
```

我认为以下会产生上面的表达式：

```
$this->db->select(...)->from(...)->
where("show_year","2009")->where("idn","the")->
or_where("show_year","2009")->like("post_slug","%the%") 
```

# azure - 天蓝色推送通知是否仅适用于从客户端完成的操作？

> ID：13439227
> 
> 赞同：0
> 
> 时间：2012-11-18T10:15:00.370
> 
> 标签：azure, windows-8, push-notification

我们试图实现一个系统，当我们在数据库中插入一些元组时，我们将使用该系统发出通知，当插入是通过应用程序而不是其他地方完成时，它们似乎工作正常。我的问题是，推送通知是否仅在从应用程序执行 CRUD 操作时才有效？而不是其他地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:37:35.943

我猜您为您的应用程序插入注册了推送通知（[更新插入脚本](http://www.windowsazure.com/en-us/develop/mobile/tutorials/get-started-with-push-dotnet/#header-2)）。每当应用程序插入数据时，就会执行脚本并推送通知。但是，如果您使用不调用自定义插入脚本的方法写入数据，则不会发送任何通知。

在 WCF 中开始实施推送的链接：

*   [http://blogs.msdn.com/b/dawate/archive/2011/01/18/windows-phone-7-azure-and-push-notification-tutorial-series-in-c.aspx](http://blogs.msdn.com/b/dawate/archive/2011/01/18/windows-phone-7-azure-and-push-notification-tutorial-series-in-c.aspx)
*   [http://code.msdn.microsoft.com/windowsapps/WCF-Horse-Race-f22b99ff](http://code.msdn.microsoft.com/windowsapps/WCF-Horse-Race-f22b99ff)

# html - 制作一个所有内容垂直对齐的 CSS 标题

> ID：13439229
> 
> 赞同：1
> 
> 时间：2012-11-18T10:15:34.117
> 
> 标签：html, css, header, padding, innerhtml

我对 CSS 很陌生，需要一些帮助。

我目前正在制作一个网站，其中一个标题位于前 100% 宽度，其内容遵循 960grid 系统。

到目前为止，这是我如何做到的，HTML 和 CSS：

```
<div id="header">
<div id="header-inner">
/logo/
/nav/
/search/
</div>
</div> 
```

和CSS：

```
#header { background: red; }
#header-inner { margin: auto; padding: 25px 0; width: 940px; } 
```

我在 header-inner 上使用了 clear-fix，一切正常。通过将徽标作为 IMG 插入，它可以确保徽标的顶部和底部之间有 25px 的空间，从而“定义”标题的高度。

即使在将导航作为 UL/LI 元素插入之后，它仍然可以工作，但是后来当我添加搜索输入时，一切都搞砸了。表单标签似乎在输入周围给了它一个不可见的边框，使其使用的高度超过了“需要”。

搜索输入也更大，显然形成了一个新的高度。

我只是想知道是否有一种聪明有效的方法来制作标题？无需从 header-inner 中删除 padding，也不必在 header-inner 父级中的每个元素上定义 padding-top 和 bottom

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:19:14.940

你可以通过列表做到这一点

```
<ul>
  <li>logo</li>
  <li>nav</li>
  <li>search</li>
</ul> 
```

你可以设置li的宽度

# java - 编程便携式 voip

> ID：13439232
> 
> 赞同：0
> 
> 时间：2012-11-18T10:16:37.037
> 
> 标签：java, c++, sockets, portability, voip

我想创建 VoIP 客户端程序，但因为我不想为不同的系统编写不同版本的程序，所以我仔细选择了我的开发平台。只是因为我对 C 和 C++ 非常熟悉，我才倾向于 C++，但是我不确定这些 C++ 库将如何转移到 MAC……如果有的话。Java 似乎更便携，但我不确定他们是否有一个我可以在 Mac 和 Windows 上使用的框架。

是否有已经为我在 Mac 和 Windows 上为 C++ 或 Java 工作的库/框架？我不想重新发明轮子并将其开发为尽可能简单和快速。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:11:49.970

你可以使用 Poco 库，它是一个 C++ 框架，它是跨平台的，并且有很多功能可以处理网络、数据流等等。

[http://pocoproject.org/documentation/index.html](http://pocoproject.org/documentation/index.html)

试一试。

# android - 使用 AndEngine 创建透明的游戏菜单项

> ID：13439234
> 
> 赞同：0
> 
> 时间：2012-11-18T10:16:50.257
> 
> 标签：android, sprite, andengine, game-engine

我正在尝试创建一个包含一些菜单项的游戏菜单，例如

1.  新游戏
2.  多人游戏
3.  选项
4.  出口

我想让这个菜单项透明。只有白色文本应该可见。
所以我想我不需要菜单项的任何背景图像。

我看过下面给出的 SpriteButton 示例。

```
ButtonSprite playButton = new ButtonSprite(0, 0, btnNormalTextureRegion, btnPushedTextureRegion, this.getVertexBufferObjectManager(), new OnClickListener() {
    @Override
    public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {
        // Do Stuff here
     }
} 
```

我不明白的是如何初始化**btnNormalTextureRegion**？
我使用下面给出的代码来初始化对象的 ITexture 和 ITextureRegion。

```
mBackgruondTexture = new BitmapTexture(activity.getTextureManager(), new IInputStreamOpener() {
                public InputStream open() throws IOException {
                    return activity.getAssets().open("gfx/backgrounds/greenbg.jpg");                
                }
            });
mBackgruondTextureRegion = TextureRegionFactory.extractFromTexture(mBackgruondTexture); 
```

此代码从asset 打开一个图像。
因为我不想为菜单项使用任何图像我如何初始化**btnNormalTextureRegion**。

或者

有没有其他方法可以创建游戏菜单？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:22:24.177

在我看来，更简单的选择是`Text`为每个菜单项创建一个包含对象的场景。这就是我在我的一个游戏中使用的方法。我将课程上传到了 pastebin，请在[此处查看](http://pastebin.com/puepeseS)。

除非您希望菜单项本身是精灵（即图片而不仅仅是纯文本），否则这是实现菜单的好方法。

# cakephp - Cakephp 自定义错误页面

> ID：13439235
> 
> 赞同：0
> 
> 时间：2012-11-18T10:17:02.537
> 
> 标签：cakephp

我指的是已经提出的问题。[CakePHP 2.0 - 如何制作自定义错误页面？](https://stackoverflow.com/questions/9620363/cakephp-2-0-how-to-make-custom-error-pages)

它给了我很多解决问题的想法，但我不想抛出异常，而是想将它用于我的所有控制器和操作。它建议我在任何我想要的特定位置做任何地方我`throw new NotFoundException();`想要它的任何地方我的意思是缺少控制器或动作的地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:07:17.470

关闭调试后，您的所有错误都将转换为 400 或 500 错误。因此，您只需要根据需要自定义`app/View/Errors/error400.ctp`和`app/View/Errors/error500.ctp`。

# cordova - Sencha Touch 2 返回可接受的 json；phonegap 拒绝它

> ID：13439238
> 
> 赞同：1
> 
> 时间：2012-11-18T10:17:34.037
> 
> 标签：cordova, extjs, touch

在 Chrome 中运行我的 Sencha 2 应用程序，我有一个带有休息代理的商店和一个 json 类型的阅读器。商店从 Web 服务获取数据，返回的 json 为：

```
{"user":{"distributionRespondentId":"71","loginId":"01000368_95655233_71","remoteId":"90","name":"Tycho Brahe","companyId":1000368,"companyName":"MickTest3","pin":"60075826"}} 
```

根据 JsonLint 的说法，这很好，在 Chrome 中运行的 Sencha 2 应用程序对此非常满意。

我用 Applaud 设置了 Eclipse，并将我的 Sencha 2 应用程序放在 assets/www 目录中。当我在 Android 设备上调试它时，Sencha 对 json 咳嗽，报告：

> file:///android_asset/www/touch/sencha-touch-all.js：第 106299 行：[WARN][Ext.data.reader.Reader#process] 无法解析服务器返回的 JSON：SyntaxError: Unexpected token非法的

这对我来说没有多大意义。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:53:52.123

我在不同的设置中遇到了类似的问题，但基本上是相同的错误。令人沮丧的是，我的 JSON 也验证得很好，但应用程序就是不喜欢它。

'Unexpected tocken ILLEGAL' - 是的，感谢调试器先生的详细错误消息。

问题是我的内容中有未转义的字符（例如 HTML 内容、单引号等）。一旦我清理了来自服务器的源代码，我的应用程序很乐意将其解析为 JSON。

# rule - 从语法规则创建 dfa 的工具

> ID：13439239
> 
> 赞同：1
> 
> 时间：2012-11-18T10:17:37.333
> 
> 标签：rule, dfa

我正在寻找将一组规则转换为确定性有限自动机的任何工具或软件。实际上我正在开发一个词干分析器，类似于英语的搬运工词干分析器。我有一组规则可以从留下词干的术语中删除后缀和/或前缀。我可以手动将此规则转换为 DFA，但它是一种临时解决方案，会导致灵活性问题。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-14T02:31:07.883

我不知道如何将规则转换为 DFA，但对于 DFA 的操作以及测试和调试它们，一个很棒的（免费）程序是[JFlap](http://www.jflap.org)。它有大量的内置工具，以及对各种自动机和机器的支持。也许那里的某个地方就是你要找的东西！

# java - 使用 java 写入 .xlsx。发生 BiffViewer 错误

> ID：13439240
> 
> 赞同：1
> 
> 时间：2012-11-18T10:17:46.517
> 
> 标签：java, apache-poi

我用过的罐子：`dom4j poi-3.8.jar` `poi-ooxml-3.8.jar` `poi-ooxml-schemas-3.8.jar` `xbean.jar`

编码 ：

```
package org.capgemini.ui;

import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Date;
import java.util.Enumeration;
import java.util.Iterator;
import java.util.Vector;

import org.apache.poi.xssf.usermodel.XSSFCell;
import org.apache.poi.xssf.usermodel.XSSFRow;
import org.apache.poi.xssf.usermodel.XSSFSheet;
import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class XSSFWorkBookWriter  {

public void writeWorkBook(Vector table) throws Exception {      

XSSFWorkbook workBook = new XSSFWorkbook();
XSSFSheet sheet = workBook.createSheet();
table=new Vector();
table.add(new String("Howdy"));
table.add(new java.sql.Date(2012,06,20));
table.add(new Double(13.35D));
table.add(new String("Fine"));
table.add(new java.sql.Date(2012,06,20));
table.add(new Double(13.38D));

Iterator rows=table.iterator();
Enumeration rowsOfVector=table.elements();
int totalNoOfRows=table.size()/2;
int currentRow=0;
while (rows.hasNext () && currentRow<totalNoOfRows){
XSSFRow row =  sheet.createRow(currentRow++);               
for (int i = 0; i < 3; i++) {
XSSFCell cell=row.createCell(i);
Object val=rows.next();
if( val instanceof String){
cell.setCellValue(val.toString());
            }
else if(val instanceof Date){
cell.setCellValue((java.sql.Date)val);
            }
else if(val instanceof Double){
cell.setCellValue((Double)val);
}
}
}

FileOutputStream outPutStream = null;
    try {
        outPutStream = new FileOutputStream("D:/Try.xlsx");
        workBook.write(outPutStream);
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if (outPutStream != null) {
            try {
                outPutStream.flush();
                outPutStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
}

public static void main(String[] args) {
    XSSFWorkBookWriter bookWriter=new XSSFWorkBookWriter();
    try {
        bookWriter.writeWorkBook(new Vector());
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

错误 ：：

> ```
> org.apache.poi.hssf.dev.BiffViewer$CommandParseException: Biff viewer needs a filename
>  at org.apache.poi.hssf.dev.BiffViewer$CommandArgs.parse(BiffViewer.java:333)
>  at org.apache.poi.hssf.dev.BiffViewer.main(BiffViewer.java:386) 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T22:18:16.893

BiffViewer 是 HSSF 的一部分，它仅适用于较旧的 .xls 文件（基于 OLE2）。您正在使用 XSSF 生成一个 .xlsx 文件，这是一种不同的低级格式。

如果您真的想使用 BiffViewer（不知道为什么，它通常只用于调试，但仍然如此），那么您需要将您的 XSSF 代码更改为 HSSF 代码。否则，如果您确实打算使用 XSSF 生成 .xlsx 文件，那么您将无法使用 HSSF 调试工具。如果您想知道 .xlsx 文件中的内容，请将其解压缩（.xlsx 是 xml 文件的 zip）并查看 XML。

# ios - 尝试编译 SQLCiper iOS 项目时出错

> ID：13439244
> 
> 赞同：1
> 
> 时间：2012-11-18T10:18:40.397
> 
> 标签：ios, sqlcipher

我正在尝试在我的 iOS Phonegap 应用程序中使用 SQLCipher。我已经安装了 SQLCipher，它运行良好。我最近升级了我的洞环境以支持 iOS6 并将 SQLCipher 添加到我的项目中，现在我收到了这个错误：

```
/bin/sh -c /Volumes/Work/workspace/ios/webappskeleton/webappskeleton/sqlcipher/build/sqlcipher.build/Release-iphoneos/amalgamation.build/Script-9069D08A0FCE185A0042E34C.sh
checking build system type... i386-apple-darwin11.4.2
checking host system type... i386-apple-darwin11.4.2
checking for gcc... /usr/bin/gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... configure: error: cannot run C compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details.
make: *** No rule to make target `sqlite3.c'.  Stop. 
```

我是objective-c的新手。如果您对解决此问题有任何想法，请告诉我。

我的环境：

```
OSX 10.7.5
XCode 4.5.2
XCode Command Line Tools 4.5.2 
```

编辑：

```
Here's the content of config.log:

This file contains any messages produced by compilers while
running configure, to aid debugging if configure makes a mistake.

It was created by sqlite configure 3.7.12.1, which was
generated by GNU Autoconf 2.62\.  Invocation command line was

  $ ./configure --enable-tempstore=yes CC=/usr/bin/gcc CFLAGS=-DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2

## --------- ##
## Platform. ##
## --------- ##

hostname = new-host-2.home
uname -m = x86_64
uname -r = 11.4.2
uname -s = Darwin
uname -v = Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64

/usr/bin/uname -p = i386
/bin/uname -X     = unknown

/bin/arch              = unknown
/usr/bin/arch -k       = unknown
/usr/convex/getsysinfo = unknown
/usr/bin/hostinfo      = Mach kernel version:
     Darwin Kernel Version 11.4.2: Thu Aug 23 16:25:48 PDT 2012; root:xnu-1699.32.7~1/RELEASE_X86_64
Kernel configured for up to 4 processors.
2 processors are physically available.
4 processors are logically available.
Processor type: i486 (Intel 80486)
Processors active: 0 1 2 3
Primary memory available: 4.00 gigabytes
Default processor set: 114 tasks, 608 threads, 4 processors
Load average: 1.54, Mach factor: 2.44
/bin/machine           = unknown
/usr/bin/oslevel       = unknown
/bin/universe          = unknown

PATH: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
PATH: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/libexec
PATH: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin
PATH: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/local/bin
PATH: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/usr/bin
PATH: /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/usr/local/bin
PATH: /Applications/Xcode.app/Contents/Developer/usr/bin
PATH: /Applications/Xcode.app/Contents/Developer/usr/local/bin
PATH: /Applications/Xcode.app/Contents/Developer/Tools
PATH: /opt/local/bin
PATH: /opt/local/sbin
PATH: /Users/nadir/.rvm/gems/ruby-1.9.3-p194/bin
PATH: /Users/nadir/.rvm/gems/ruby-1.9.3-p194@global/bin
PATH: /Users/nadir/.rvm/rubies/ruby-1.9.3-p194/bin
PATH: /Users/nadir/.rvm/bin
PATH: /usr/bin
PATH: /bin
PATH: /usr/sbin
PATH: /sbin
PATH: /usr/local/bin
PATH: /usr/local/mysql/bin
PATH: /Volumes/Work/android-sdk-macosx/tools
PATH: /Volumes/Work/android-sdk-macosx/platform-tools
PATH: /usr/X11/bin
PATH: /usr/local/git/bin

## ----------- ##
## Core tests. ##
## ----------- ##

configure:2131: checking build system type
configure:2149: result: i386-apple-darwin11.4.2
configure:2171: checking host system type
configure:2186: result: i386-apple-darwin11.4.2
configure:2256: checking for gcc
configure:2283: result: /usr/bin/gcc
configure:2521: checking for C compiler version
configure:2529: /usr/bin/gcc --version >&5
i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
Copyright (C) 2007 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

configure:2533: $? = 0
configure:2540: /usr/bin/gcc -v >&5
Using built-in specs.
Target: i686-apple-darwin11
Configured with: /private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/src/configure --disable-checking --enable-werror --prefix=/Applications/Xcode.app/Contents/Developer/usr/llvm-gcc-4.2 --mandir=/share/man --enable-languages=c,objc,c++,obj-c++ --program-prefix=llvm- --program-transform-name=/^[cg][^.-]*$/s/$/-4.2/ --with-slibdir=/usr/lib --build=i686-apple-darwin11 --enable-llvm=/private/var/tmp/llvmgcc42/llvmgcc42-2336.11~67/dst-llvmCore/Developer/usr/local --program-prefix=i686-apple-darwin11- --host=x86_64-apple-darwin11 --target=i686-apple-darwin11 --with-gxx-include-dir=/usr/include/c++/4.2.1
Thread model: posix
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.11.00)
configure:2544: $? = 0
configure:2551: /usr/bin/gcc -V >&5
llvm-gcc-4.2: argument to `-V' is missing
configure:2555: $? = 1
configure:2578: checking for C compiler default output file name
configure:2600: /usr/bin/gcc -DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2   conftest.c  >&5
ld: warning: building for iOS, but linking against dylib built for MacOSX: /usr/lib/libSystem.dylib
configure:2604: $? = 0
configure:2642: result: a.out
configure:2659: checking whether the C compiler works
configure:2669: ./a.out
./configure: line 2671: 43322 Segmentation fault: 11  ./$ac_file
configure:2673: $? = 139
configure:2682: error: cannot run C compiled programs.
If you meant to cross compile, use `--host'.
See `config.log' for more details.

## ---------------- ##
## Cache variables. ##
## ---------------- ##

ac_cv_build=i386-apple-darwin11.4.2
ac_cv_env_CC_set=set
ac_cv_env_CC_value=/usr/bin/gcc
ac_cv_env_CFLAGS_set=set
ac_cv_env_CFLAGS_value='-DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2'
ac_cv_env_CPPFLAGS_set=
ac_cv_env_CPPFLAGS_value=
ac_cv_env_CPP_set=
ac_cv_env_CPP_value=
ac_cv_env_LDFLAGS_set=
ac_cv_env_LDFLAGS_value=
ac_cv_env_LIBS_set=
ac_cv_env_LIBS_value=
ac_cv_env_TCLLIBDIR_set=
ac_cv_env_TCLLIBDIR_value=
ac_cv_env_build_alias_set=
ac_cv_env_build_alias_value=
ac_cv_env_host_alias_set=
ac_cv_env_host_alias_value=
ac_cv_env_target_alias_set=
ac_cv_env_target_alias_value=
ac_cv_host=i386-apple-darwin11.4.2
ac_cv_prog_ac_ct_CC=/usr/bin/gcc

## ----------------- ##
## Output variables. ##
## ----------------- ##

ALLOWRELEASE=''
AR=''
AWK=''
BUILD_CC=''
BUILD_CFLAGS=''
BUILD_EXEEXT=''
CC='/usr/bin/gcc'
CFLAGS='-DSQLITE_HAS_CODEC -DSQLITE_TEMP_STORE=2'
CPP=''
CPPFLAGS=''
DEFS=''
DSYMUTIL=''
DUMPBIN=''
ECHO_C=''
ECHO_N='-n'
ECHO_T=''
EGREP=''
EXEEXT=''
FGREP=''
GREP=''
HAVE_TCL=''
INSTALL_DATA=''
INSTALL_PROGRAM=''
INSTALL_SCRIPT=''
LD=''
LDFLAGS=''
LIBOBJS=''
LIBS=''
LIBTOOL=''
LIPO=''
LN_S=''
LTLIBOBJS=''
NM=''
NMEDIT=''
OBJDUMP=''
OBJEXT=''
OPT_FEATURE_FLAGS=''
OTOOL64=''
OTOOL=''
PACKAGE_BUGREPORT=''
PACKAGE_NAME='sqlite'
PACKAGE_STRING='sqlite 3.7.12.1'
PACKAGE_TARNAME='sqlite'
PACKAGE_VERSION='3.7.12.1'
PATH_SEPARATOR=':'
RANLIB=''
RELEASE=''
SED='/usr/bin/sed'
SHELL='/bin/sh'
SQLITE_OS_OS2=''
SQLITE_OS_UNIX=''
SQLITE_OS_WIN=''
SQLITE_THREADSAFE=''
STRIP=''
TARGET_DEBUG=''
TARGET_EXEEXT=''
TARGET_HAVE_READLINE=''
TARGET_READLINE_INC=''
TARGET_READLINE_LIBS=''
TCLLIBDIR=''
TCLSH_CMD=''
TCL_BIN_DIR=''
TCL_INCLUDE_SPEC=''
TCL_LIBS=''
TCL_LIB_FILE=''
TCL_LIB_FLAG=''
TCL_LIB_SPEC=''
TCL_SRC_DIR=''
TCL_STUB_LIB_FILE=''
TCL_STUB_LIB_FLAG=''
TCL_STUB_LIB_SPEC=''
TCL_VERSION=''
TEMP_STORE=''
USE_AMALGAMATION=''
USE_GCOV=''
VERSION=''
VERSION_NUMBER=''
XTHREADCONNECT=''
ac_ct_CC='/usr/bin/gcc'
ac_ct_DUMPBIN=''
bindir='${exec_prefix}/bin'
build='i386-apple-darwin11.4.2'
build_alias=''
build_cpu='i386'
build_os='darwin11.4.2'
build_vendor='apple'
datadir='${datarootdir}'
datarootdir='${prefix}/share'
docdir='${datarootdir}/doc/${PACKAGE_TARNAME}'
dvidir='${docdir}'
exec_prefix='NONE'
host='i386-apple-darwin11.4.2'
host_alias=''
host_cpu='i386'
host_os='darwin11.4.2'
host_vendor='apple'
htmldir='${docdir}'
includedir='${prefix}/include'
infodir='${datarootdir}/info'
libdir='${exec_prefix}/lib'
libexecdir='${exec_prefix}/libexec'
localedir='${datarootdir}/locale'
localstatedir='${prefix}/var'
lt_ECHO='echo'
mandir='${datarootdir}/man'
oldincludedir='/usr/include'
pdfdir='${docdir}'
prefix='NONE'
program_prefix='NONE'
program_transform_name='s,x,x,'
psdir='${docdir}'
sbindir='${exec_prefix}/sbin'
sharedstatedir='${prefix}/com'
sysconfdir='${prefix}/etc'
target_alias=''

## ----------- ##
## confdefs.h. ##
## ----------- ##

#define PACKAGE_NAME "sqlite"
#define PACKAGE_TARNAME "sqlite"
#define PACKAGE_VERSION "3.7.12.1"
#define PACKAGE_STRING "sqlite 3.7.12.1"
#define PACKAGE_BUGREPORT ""

configure: exit 1 
```

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:40:17.217

对于那些面临同样问题的人，只需删除此存储库内容：{projectname}.xcodeproj/xcuserdata

感谢 Daij-Djan 和 Nick Parker 的帮助 :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T13:44:30.983

我也遇到了这个错误。

我通过将 iOS 部署目标从 6.1 降低到 5.0 来解决它：

![在此处输入图像描述](../Images/28141b348afe3ead68bbee4571fb5018.png)

# c++ - 运行时错误窗口，如何在 VS c++ 2008 中以发布模式进行调试

> ID：13439251
> 
> 赞同：-3
> 
> 时间：2012-11-18T10:19:49.547
> 
> 标签：c++, qt, visual-studio-2008, release, runtime-error

我有我在 Visual Studio 2008 中编译的应用程序，
但我也安装了 VS 2010 和 2005，当我在发布模式下编译我的应用程序并在编译器之外运行它时，我在几秒钟后得到了我不知道的窗口按摩我的应用程序中的哪个部分即将到来。当我按下调试窗口时，它会打开 2010 2 个问题：

1.我如何在VS 2008中打开它？（我已经在 regedit 中设置为默认使用 2008）
2.如何从我的应用程序中捕获此错误窗口的来源？当我在发布模式下运行它时，我可以在 VS 2008 中设置任何额外的设置来为我提供更多信息吗？

![调试窗口错误](../Images/cff36e2a428103405277eccbefb59586.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:44:48.133

在发布模式下打开调试。

选择`Release configuration`项目，以便您创建正确的版本，然后在崩溃的项目上右键单击并选择属性。

![在此处输入图像描述](../Images/49c0e526dabf99bbf925452c64ec87a7.png)

你会看到类似的东西（但这是 vs2005）

![在此处输入图像描述](../Images/c60342394c3c13c7daf40aa03742f0ec.png)

选择带圆圈的选项并将值更改为 Program Database。

现在在属性列表中选择链接器：

![在此处输入图像描述](../Images/de1432f3b409c16dd59788837f99b194.png)

并将生成调试信息更改为`yes`

您可能还需要将用于优化的 C++ 属性更改为关闭，因为启用它后调试可能不会那么简单。这是因为在编译后组织代码以最大化速度等的各种方式（但这留给读者作为练习。）

# android - 从android中的不同布局读取数据

> ID：13439257
> 
> 赞同：0
> 
> 时间：2012-11-18T10:20:32.453
> 
> 标签：android, layout, android-edittext

我有两个类和两个布局，我想从布局 A 中读取 Edittext 的数据，我在具有布局 B 的 setcontentview 的类中编写代码。希望以上内容清楚。问候亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:31:09.997

当您调用新的 Activity 时，您可以向它发送一些参数。

```
EditText mEditText = (EditText) findElementById(R.id.mEditText);
Intent mIntent = new Intent(FirstActivity.this, SecondActivity.class);
intent.putExtra("mString", mEditText.getText().toString());
startActivity(mIntent); 
```

并在第二个 Activity 中恢复数据

```
String mString = getIntent().getStringExtra("mString"); 
```

# jquery - 带有回调的 DOM 对话框

> ID：13439262
> 
> 赞同：1
> 
> 时间：2012-11-18T10:21:25.343
> 
> 标签：jquery, html, dom, callback

我正在使用 Dom (HTML / CSS / JavaScript / jQuery) 创建一个自定义对话框。这些对话框有按钮，这些按钮应该有一些功能，其中包含在引发某些特定事件时要执行的指令（onClick ...）。

为了调用这些对话框，我创建了一个 draw( `showMessaging(MsgText, Msgtitle, ClickCallback)`) 函数。这些函数有一些回调（`ClickCallback`）要由这些按钮执行，但是当我调用函数（`showMessaging`）并将某些函数传递给它时，这些按钮会在引发某些事件时执行，回调将被执行而不是函数（`showMessaging`） .

这是代码。

```
function showMessagingWarning(sMessage, sTitle, callbackYes) {
    //Reference
    var overlay = $('<div>').addClass('wb_boxOverlay1_');

    if ($('.wb_boxOverlay1_').length > 0) {
        $('.wb_boxOverlay1_').remove();
    }

    $('body').prepend(overlay);

    var msgBox = $('.wx_dialog_boxes'); //boite de message
    var msgIcon = $('.wb_msg_icon_displ'); //icone de la boite de message
    var msgTitle = $('.wb_ms_title_content'); //titre de la boite de dialogue
    var msgContent = $('.wb_msg_message'); //Contenu du message
    var btnNo = $('.wb_msg_box_button_no');
    var btnYes = $('.wb_msg_box_button_yes');
    var btnCancel = $('.wb_msg_box_button_cancel');
    var btnClose = $('.wb_msg_close_lnk');
    //setting up the class
    var tclass = "wb_dlg_warning";

   //Display buttons
    btnNo.css('display', 'none');
    btnCancel.css('display', 'none');
    btnYes.css('display', 'inline-block').children('span').text('OK');

    //ajout des variables
    msgIcon.addClass(tclass);
    msgTitle.text(sTitle);
    msgContent.text(sMessage);

    btnClose.bind('click', '', function () {
        $('.wb_boxOverlay1_').remove();
        $('.wx_dialog_boxes').fadeOut();
    });

    if (callbackYes) {
        btnYes.bind('click', '', callbackYes);
    }

    btnYes.bind('click', '', function () {
        $('.wb_boxOverlay1_').remove();
        $('.wx_dialog_boxes').fadeOut();
    });

    msgBox.show();
} 
```

# google-apps-script - 如何将 Google Doc (Google Drive) 表单数据自动传输到 Google 文档

> ID：13439265
> 
> 赞同：2
> 
> 时间：2012-11-18T10:21:50.523
> 
> 标签：google-apps-script, google-sheets, google-drive-api, google-spreadsheet-api

我想自动化将表单用户提交的数据（在 Google Doc 表单上）传输到具有此数据的空字段的单独文档（Google Doc 文档）的过程。

例如，在表格中输入的人名或出生日期会自动转移到我希望它出现的文档区域，以及文档中的其他预先存在的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:44:48.467

可以选择将表单链接到 Google 表单上的电子表格。只需单击“选择响应目的地”即可进行设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T16:53:07.843

随着 2013 年 5 月表单服务的推出，您有多种选择来完成此任务。

1.  绑定到表单的脚本可以修改文档。表单绑定脚本将接收带有[FormResponse](https://developers.google.com/apps-script/reference/forms/form-response)对象的*表单提交事件。*您的脚本将使用[文档服务](https://developers.google.com/apps-script/reference/document/)来打开和修改包含 FormResponse 内容的文档。

2.  绑定到接收表单输入的电子表格的脚本可以修改文档。电子表格绑定脚本将接收*电子表格表单提交事件*。同样，使用文档服务来更新您的文档。

参考：

*   [了解事件](https://developers.google.com/apps-script/understanding_events)
*   [扩展 Google 文档/替换文本](https://developers.google.com/apps-script/guides/docs#replacing_text)展示了如何替换目标文档中的占位符。

# javascript - 如何检查对象值？

> ID：13439269
> 
> 赞同：0
> 
> 时间：2012-11-18T10:22:21.470
> 
> 标签：javascript

我无法在我的测试页面中找出一些有趣的东西。
所以，我可以说我有我的页面对象：

```
<b id="1i1">$</b> 
```

这可以通过我的脚本中的一些 innerHTML 进行更改（效果很好）。
我想检查这个对象的值并进行比较：

```
function buttonPress()
{
    if(document.getElementById("1i1").value == "$")
    {
        //do something
    }
} 
```

但是`getElementById("1i1").value`上面代码中的输出是`undefined`，不是`"$"`。
如何从该对象获取字符串值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:32:35.800

尝试`innerHTML`

```
function buttonPress()
{
    if((document.getElementById("1i1").innerHTML) == "$")
    {
        return (document.getElementById("1i1").innerHTML);
    }
}

alert(buttonPress()) 
```

[**提琴手**](http://jsfiddle.net/m4yQT/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:44:01.243

您的 HTML 文档有一个粗体标记节点和一个[文本](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1312295772)节点。该`document.getElementById("1i1")`表达式返回粗体标记。现在获取第一个文本
`.firstChild`，然后`.wholeText`获取在浏览器中可见的字符串。

```
document.getElementById("1i1").firstChild.wholeText 
```

[DOM 规范](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-1312295772)很容易阅读，当事情变得复杂时，jQuery[有](http://jquery.com/)很大帮助。

# php - 如果条件总是返回真

> ID：13439271
> 
> 赞同：1
> 
> 时间：2012-11-18T10:23:16.533
> 
> 标签：php, arrays, if-statement, explode

我正在逐行读取文本文件，每行都有逗号分隔值。例子

```
Name,Phone,URL,notavailable 
```

读数很好，脚本正确返回了这些行。最后一个值具有“可用”或“不可用”。

我正在爆炸这样的一条线

```
$sections = explode(",", $line); 
```

它返回

```
 Array
    (
        [0] => Name
        [1] => Phone
        [2] => URL
        [3] => notavailable

    ) 
```

我可以使用

```
$sections[0], $sections[1] etc. 
```

他们显示得很好。但是当我尝试比较最后一个值时会出现问题。

```
$check = $sections[3];
if($check=="notavailable")
{Do something }
else {Do something else} 
```

但是 if 语句总是返回 false。我想不通。试了这么多次。有人可以指出我脚本中的错误，这将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:27:00.523

您需要进行一些调试。像这样扔一条线

```
$check = $sections[3];
echo "check = '$check'";    // Debug print 
```

如果你用这样的引号打印出来，你可能会看到有前导/尾随空格。如果是这种情况，一个简单的调用就[`trim()`](http://php.net/manual/en/function.trim.php)可以解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:31:20.510

$a == $b 等于 TRUE 如果在类型杂耍之后 $a 等于 $b。$a === $b 如果 $a 等于 $b 并且它们属于同一类型，则相同 TRUE。

当你读取文件时，你也读取了空格，所以你需要修剪它们。

所以你应该使用：

```
if(trim($section[3]) === "notavailable"){
    //Do something
} else {
    //Do something else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:03:20.467

尝试使用

```
 if(preg_match_all('/notavailable/i',$section[3]))
 {
    // Not Available
 }
 else
 {
     // Available
 } 
```

# ruby-on-rails - Rails：部署到 Heroku，很多问题

> ID：13439276
> 
> 赞同：1
> 
> 时间：2012-11-18T10:23:32.277
> 
> 标签：ruby-on-rails, sqlite, postgresql

第一次尝试将我的 Rails 应用程序部署到 Heroku，我遇到了很多问题。该应用程序崩溃了，您可以查看图像中的日志：http: [//i.stack.imgur.com/bsx1b.png](https://i.stack.imgur.com/bsx1b.png)

更糟糕的是，当我尝试在本地查看我的应用程序时，它无法在 postgreSQL 环境中运行.当我回到 database.yml 中使用 sqLite3 时，它工作得很好。我认为问题可能是除了添加 pg gem 和运行 bundle install 之外，我实际上还必须安装 postgreSQL。

我继续使用一键式安装程序（Windows 7 64 位）安装 PostgreSQL。重启后，一个简单的 rails server 或 bundle install 命令开始失败，所以我重新安装了整个 ruby​​ & rails。

现在 rails server 命令工作正常，当我尝试在本地环境中查看我的应用程序时，它会提示不同的错误。所以现在我有 pgAdmin III 和 Rails

```
PG::Error

fe_sendauth: no password supplied 
```

我试图按照[这个](https://stackoverflow.com/questions/12452073/trying-to-set-up-postgres-for-ror-app-getting-error-fe-sendauth-no-password)，但我找不到“pg_hba.conf”。我猜答案是基于不同的操作系统。

现在又一次，捆绑器不工作，给我错误......

**问题：** 1）我是否正确使用一键式安装程序安装 postgreSQL？因为这导致我的 ROR 以某种方式“崩溃”，我不得不完全重新安装导轨。2）我想我要删除所有与postgreSQL相关的东西，重新安装Rails，一切从头开始。我必须采取哪些步骤？我看过的所有参考资料似乎都不适合 Windows 环境。

在我的 gemfile 中，我有

```
gem 'pg'
gem 'thin' 
```

在我的数据库中，我有

```
# SQLite version 3.x
#   gem install sqlite3
#
#   Ensure the SQLite 3 gem is defined in your Gemfile
#   gem 'sqlite3'
development:
  adapter: postgresql
  encoding: utf8
  database: mangfeel_development
  pool: 5
  timeout: 5000

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: postgresql
  encoding: utf8
  database: mangfeel_test
  pool: 5
  timeout: 5000

production:
  adapter: postgresql
  encoding: utf8
  database: mangfeel_production
  pool: 5
  timeout: 5000 
```

**安装 PostgreSQL 后，我现在遇到的错误：**

```
c:\ruby\myapp>rails server
C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:926:in `report_activate_error': Could not find RubyGem railties (>= 0) (Gem::LoadError)
    from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:244:in `activate_dep'
    from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:236:in `activate'
    from C:/Program Files (x86)/ruby-1.9.2/lib/ruby/site_ruby/1.9.1/rubygems.rb:1307:in `gem'
    from C:/RailsInstaller/Ruby1.9.3/bin/rails:18:in `<main>' 
```

**当我运行捆绑安装时：**

```
Gem::InstallError: The 'json' native gem requires installed build tools

Please update your PATH to include build tools or download the DevKit
from 'http://rubyinstaller.org/downloads' and follow the instructions
at 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'
An error occurred while installing json (1.7.5), and Bundler cannot continue.
Make sure that `gem install json -v '1.7.5'` succeeds before bundling. 
```

**所以我将完全删除 pgAdminIII、PostgreSQL、Ruby on Rails，然后从头开始。**

我认为部署不会那么难，但是从 SQLite3 迁移到 PostgreSQL 比我想象的要花费更多的时间和精力。我真的很感激这个问题的一些帮助。

**-------------------------------------------------- -------------------------------------------------- --------------------**

**更新：重新安装一切后，我从头开始重新设置。**

我检查了我的 SQLite3 版本应用程序运行良好。所以我开始设置 postgreSQL。首次设置 postgreSQL 时出现以下错误。通过设置，我的意思是编辑 config/database.yml 并安装 gem 'pg' 并删除 gem 'sqlite3'。当我尝试连接到 localhost:3000 时，出现以下错误：

```
ActiveRecord::ConnectionNotEstablished 
```

经过一番研究，我发现设置数据库可能有更多步骤。所以我运行了 bundle 命令，

```
bundle exec rake db:setup 
```

但是然后在控制台中，当我运行*bundle exec rake db:setup*时出现以下错误。

```
Couldn't create database for {"adapter"=>"postgresql", "host"=>"localhost", "encoding"=>"utf8", "database"=>"db/myapp_test", "pool"=>5, "timeout"=>5000}
rake aborted!
could not connect to server: Connection refused (0x0000274D/10061)
    Is the server running on host "localhost" (::1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused (0x0000274D/10061)
    Is the server running on host "localhost" (127.0.0.1) and accepting
    TCP/IP connections on port 5432?
c:/ruby/myapp/config/environment.rb:5:in `<top (required)>'
Tasks: TOP => db:schema:load => environment 
```

当我尝试连接到 localhost:3000 时，我再次收到上述错误，而不是*ActiveRecord::ConnectionNotEstablished*。

**问题：我做错了什么，我该如何解决这个问题？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T14:00:07.330

如果您有错误：

```
PG::Error

fe_sendauth: no password supplied 
```

您有个好消息，您的应用程序现在可以使用 PostgreSQL 数据库。（但你需要配置一些东西）

安装 PostgreSQL 后，您可以通过以下命令使用 PostgreSQL 创建新的 rails 应用程序：

```
rails new my_app -d postgresql 
```

这`database.yml`将被创建：

```
development:
  adapter: postgresql
  encoding: unicode
  database: my_app_development
  pool: 5
  username: my_app
  password:

test:
  adapter: postgresql
  encoding: unicode
  database: my_app_test
  pool: 5
  username: my_app
  password:

production:
  adapter: postgresql
  encoding: unicode
  database: my_app_production
  pool: 5
  username: my_app
  password: 
```

你看，三个数据库都有`username`和`password`字段，这是 Postgresql 中的帐户用户，`database.yaml`文件中的三个数据库将由该用户创建。所以你需要提供`username`它`password`。默认安装 Postgresql 后，它创建了一个用户名是`postgresql`，密码是`postgresql`。你可以使用它。

如果要使用其他用户，只需`pgAdmin III`右键单击打开并创建新用户，然后`Login Roles`选择`New login role`使用密码创建新用户。然后将该用户名和密码放入`database.yaml`文件中。

之后，您现在需要的只是查找并打开`pg_hba.conf`文件，以使应用程序的某些配置可以与 PostgreSQL 一起使用。我很长时间没有使用 Windows，所以我不确定它在哪里，但你可以在安装 PostgreSQL 的文件夹中找到它。例如，如果您安装在`E:\`分区上，也许您可​​以在以下位置找到它：

`E:\PostgreSQL\version\data`

找到后，打开并找到一行：

```
# "local" is for Unix domain socket connections only
local all all ident sameuser 
```

将其更改为：

```
# "local" is for Unix domain socket connections only
local all all md5 
```

然后重新启动您的 Postgresql 数据库。要为应用程序创建数据库，请运行`rake db:create`或`rake db:create:all`. 现在您的应用程序现在可以使用 PostgreSQL 数据库了，真高兴 :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:29:26.797

我不是 Rails 专家，但这是我最近在 Heroku 上使用 POSTGRES 进行的部署的 YAML 文件之一

```
development:
adapter: postgresql
host: localhost
database: dbname_development

production:
adapter: postgresql
host: localhost
database: dbname_production 
```

在 postgres 部署的情况下，您似乎缺少一个名为 host 的参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T00:22:54.963

**在 Windows 上从 SQLite3 迁移到 PostgreSQL 的步骤，以将现有 Rails 应用程序部署到 Heroku：**

1.  在您的**Gemfile**中，找到`gem 'sqlite3'`并将其更改为`gem 'pg'`. 运行`bundle install`。
2.  [从这里](http://www.postgresql.org/download/)下载 Postgres 。选择一键式安装程序并选择您的操作系统环境（32 位或 64 位）。在安装过程中，不要选择安装它建议您安装的任何额外软件。它可能会弄乱您现有的 Rails，您将不得不重新安装 Rails。
3.  现在转到**config/database.yml，**并将其更改为以下格式。当前是为 SQLite3 设置的，并且缺少 PostgreSQL 所需的一些字段。

    ```
    development:
       adapter: postgresql
       encoding: unicode
       database: my_app_development
       pool: 5
       username: my_app
       password:

    test:
       adapter: postgresql
       encoding: unicode
       database: my_app_test
       pool: 5
       username: my_app
       password:

    production:
       adapter: postgresql
       encoding: unicode
       database: my_app_production
       pool: 5
       username: my_app
       password: 
    ```

适配器不同，有用户名和密码字段。默认的用户名和密码是 postgresql，但如果它不起作用（它对我不起作用），然后转到您的 pgAdmin，创建一个新的登录角色以创建另一个用户名/密码（检查选项使其成为超级用户）并使用它。

4、此时，您可以通过运行创建一个新的应用程序

```
rails new my_app -d postgresql 
```

运行您的本地服务器，并尝试连接到 localhost:3000 以查看是否显示了欢迎页面。

5，如果一切正常，那么你需要做的就是创建一个新的 PostgreSQL 数据库，并将你现有的模型迁移到它。跑

```
rake db:create:all
rake db:migrate 
```

完毕！现在检查您现有的应用程序是否在本地运行良好，并尝试将您的应用程序部署到 Heroku。

# neo4j - 运行不区分大小写的密码查询

> ID：13439278
> 
> 赞同：42
> 
> 时间：2012-11-18T10:23:41.693
> 
> 标签：neo4j, case-insensitive, cypher

是否可以在 neo4j 上运行不区分大小写的密码查询？

试试看：[http ://console.neo4j.org/](http://console.neo4j.org/)

当我输入这个：

```
start n=node(*) 
match n-[]->m 
where (m.name="Neo") 
return m 
```

它返回一行。但是当我输入这个时：

```
start n=node(*) 
match n-[]->m 
where (m.name="neo") 
return m 
```

它不返回任何东西；因为名称保存为“Neo”。有没有一种简单的方法来运行不区分大小写的查询？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-18T10:54:13.353

是的，通过使用不区分大小写的正则表达式：

```
WHERE m.name =~ '(?i)neo' 
```

[https://neo4j.com/docs/cypher-manual/current/clauses/where/#case-insensitive-regular-expressions](https://neo4j.com/docs/cypher-manual/current/clauses/where/#case-insensitive-regular-expressions)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-01-05T15:46:48.323

另一种方法是：

```
WHERE LOWER(m.Name) = LOWER("Neo") 
```

如果您使用的是 Neo4j 客户端 (.NET)：

```
Client.Cypher.Match("(m:Entity)")
    .Where("LOWER(m.Name) = LOWER({name})")
    .WithParam("name", inputName)
    .Return(m => m.As<Entity>())
    .Results
    .FirstOrDefault(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-21T12:47:59.343

如果有人正在研究如何使用参数执行此操作，我设法做到了。

```
query = "{}{}{}".format('Match (n) WHERE n.pageName =~ "'"(?i)", name, '" RETURN n') 
```

并且“名称”是变量或您的参数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-25T06:46:05.867

您可以将参数传递给不区分大小写的正则表达式，例如：

**WHERE m.name =~'(?i)({param})**

# php - PHP中更有效的字符串清理正则表达式

> ID：13439294
> 
> 赞同：4
> 
> 时间：2012-11-18T10:27:16.400
> 
> 标签：php, regex, string, clean-urls, code-cleanup

好的，我希望有人可以用一点正则表达式来帮助我。

我正在尝试清理字符串。

基本上，我是：

1.  用替换替换除 A-Za-z0-9 之外的所有字符。

2.  用单个替换实例替换替换的连续副本。

3.  从字符串的开头和结尾修剪替换。

示例输入：

( *&&* (%()$( *)#&* #&%&% *%(%$* +-_狗跳过原木*(&)$%& *)#)@#%&)&^)@#* )

所需输出：

The+dog+jumped+over+the+log

我目前正在使用这个非常混乱的代码，并且只知道有一种更优雅的方式来完成这个......

```
function clean($string, $replace){

    $ok = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";
    $ok .= $replace;
    $pattern = "/[^".preg_quote($ok, "/")."]/";

    return trim(preg_replace('/'.preg_quote($replace.$replace).'+/', $replace, preg_replace($pattern, $replace, $string)),$replace);
} 
```

Regex-Fu 大师能否为我提供更简单/更有效的解决方案？

* * *

Botond Balázs 和 hakre 提出并解释了一个更好的解决方案：

```
function clean($string, $replace, $skip=""){
    // Escape $skip
    $escaped = preg_quote($replace.$skip, "/");

    // Regex pattern
    // Replace all consecutive occurrences of "Not OK" 
    // characters with the replacement
    $pattern = '/[^A-Za-z0-9'.$escaped.']+/';

    // Execute the regex
    $result = preg_replace($pattern, $replace, $string);

    // Trim and return the result
    return trim($result, $replace);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:37:44.327

我不是“正则表达式忍者”，但我会这样做。

```
function clean($string, $replace){
    /// Remove all "not OK" characters from the beginning and the end:
    $result = preg_replace('/^[^A-Za-z0-9]+/', '', $string);
    $result = preg_replace('/[^A-Za-z0-9]+$/', '', $result);

    // Replace all consecutive occurrences of "not OK" 
    // characters with the replacement:
    $result = preg_replace('/[^A-Za-z0-9]+/', $replace, $result);

    return $result;
} 
```

我想这可以进一步简化，但是在处理正则表达式时，清晰度和可读性通常比聪明或编写超级优化代码更重要。

让我们看看它是如何工作的：

*   `/^[^A-Za-z0-9]+/`：
    *   `^`匹配字符串的开头。
    *   `[^A-Za-z0-9]`匹配所有*非*字母数字字符
    *   `+`意思是“匹配前面的一个或多个”
*   `/[^A-Za-z0-9]+$/`：
    *   和上面一样，除了`$`匹配字符串的结尾
*   `/[^A-Za-z0-9]+/`：
    *   和上面一样，除了它也匹配中间字符串

**编辑：** OP 是正确的，前两个可以替换为`trim()`：

```
function clean($string, $replace){
    // Replace all consecutive occurrences of "not OK" 
    // characters with the replacement:
    $result = preg_replace('/[^A-Za-z0-9]+/', $replace, $result);

    return trim($result, $replace);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T10:38:07.687

我不想听起来超级聪明，但我不会称它为 regex-foo。

您所做的实际上几乎是正确的方向，因为您使用`preg_quote`，许多其他人甚至不知道该功能。

但是可能在错误的地方。错误的地方，因为您引用了字符类中的字符，并且在正则表达式中引用了（相似但）不同的规则。

此外，正则表达式的设计考虑了您的情况。这可能是您寻找向导的部分，让我们看看一些选项如何使您的否定字符类更紧凑（我将生成保留以使其更明显）：

```
[^0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz] 
```

有类似`0-9`,`A-Z`的结构`a-z`，可以准确地表示这一点。如您所见`-`，它是字符类中的一个特殊字符，它不是字面意思，而是具有一些从到到的字符：

```
[^0-9A-Za-z] 
```

所以这已经更紧凑并且代表相同。还有像`\d`和`\w`这样的符号在你的情况下可能很方便。但我暂时采用第一个变体，因为我认为它的作用已经很明显了。

另一部分是重复。让我们看看，有`+`哪个意味着一个或多个。所以你想替换一个或多个不匹配的字符。您可以通过在应该匹配一次或多次的部分末尾添加它来使用它（默认情况下它是贪婪的，因此如果有 5 个字符，则将采用这 5 个字符，而不是 4 个）：

```
[^0-9A-Za-z]+ 
```

我希望这是有帮助的。另一个步骤是在开头和结尾也删除不匹配的字符，但现在是清晨，我对此不太熟悉。

# installation - 在 ATLAS 中构建共享库

> ID：13439296
> 
> 赞同：7
> 
> 时间：2012-11-18T10:27:46.683
> 
> 标签：installation, shared-libraries, lapack, atlas

我已经阅读了整个 ATLAS 安装指南，它说构建共享 (.so) 库所需要做的就是将`--shared`标志传递给配置脚本。但是，当我构建时，我的文件夹中`.so`出现的唯一文件是and ，尽管指南说应该还有其他六个：`lib``libsatlas.so``libtatlas.so`

```
libatlas.so, libcblas.so, libf77blas.so, liblapack.so, libptcblas.so, libptf77blas.so 
```

安装后，由于缺少这些库，某些测试会失败。此外，FFPACK 在安装期间需要这些库。

有没有人遇到过这个？我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-21T22:41:17.117

根据我的经验，它比这要复杂得多，请参阅我们在[https://github.com/hpcugent/easybuild-easyblocks/blob/master/easybuild/easyblocks/a/atlas.py](https://github.com/hpcugent/easybuild-easyblocks/blob/master/easybuild/easyblocks/a/atlas.py)上对 ATLAS 构建过程的 EasyBuild 实现。

我们需要：

*   启用 -fPIC 编译器选项
*   在“lib”目录中运行“make shared cshared ptshared cptshared”

我们甚至没有使用 --shared 进行配置，可能是因为它没有太多作用。

如果您想轻松构建 ATLAS（以及您将与之链接的任何内容），请查看 EasyBuild。

（免责声明：我是 EasyBuild 的开发人员）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T09:54:12.173

[首先，如果您错误地为配置指定了 --force-tids 标志，则不会构建并行库。要检查这一点，您可以运行 make ptcheck](http://sourceforge.net/tracker/?func=detail&aid=3577908&group_id=23725&atid=379483)。[我对这里](https://stackoverflow.com/questions/13525852/determining-the-independent-cpus-specified-with-affinity-ids-for-building-at)标志的规范有疑问

然后，如果我检查我生成的 ATLAS Makefile，它会显示“......仅当 atlas 构建到一个库时”，实际上只构建了两个“胖”库：libsatlas.so 和 libtatlas.so。

我想您可以将 FFPACK 与这些库链接起来，或者更改生成的 ATLAS Makefile 以包含您需要的目标（这不会太难，因为静态库可用）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-02T19:13:49.907

我必须手动创建指向 .so.3 文件的链接。所以版本库文件存在，但不是 cmake 正在寻找的文件。

跑步

```
 sudo ln -s libatlas.so.3 libatlas.so
 sudo ln -s libcblas.so.3 libcblas.so
 sudo ln -s liblapack_atlas.so.3 
```

（我没有构建 cblas、atlas 或 lapack，而是使用 apt-get 安装它们。想知道为什么没有自动创建链接）。

# java - 检查android模拟器是否静音

> ID：13439297
> 
> 赞同：0
> 
> 时间：2012-11-18T10:28:02.203
> 
> 标签：java, android, android-emulator, ringtone

我正在开发一个 android 应用程序，我想知道 android 手机是否静音。我需要知道如何通过 Java 代码在 android 模拟器上检查这个东西。另外，我如何仅通过 android 模拟器的图形界面就可以在没有任何代码的情况下知道相同的事情

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:44:14.560

您可以通过以下代码行检查。

```
 AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

    if (audioManager.getRingerMode() == AudioManager.RINGER_MODE_SILENT) {
        // If it reaches here then it means it is silent mode
    } 
```

希望这会帮助你。

# android - 在 Android 应用中处理“不要保留活动”

> ID：13439300
> 
> 赞同：8
> 
> 时间：2012-11-18T10:28:29.850
> 
> 标签：android, android-activity, crash

我有**2 个活动**：一个向用户显示信息列表的活动，以及用户可以在其中创建新信息的**子**活动**。**

很明显，从第一个活动开始，我调用了“ **startActivityForResult** ()”，当用户将他想要的内容放入第二个活动时，我回到第一个活动，并在“ **onActivityResult** ()”函数中接收到信息保存信息。

我的问题是**“不要保留活动”**选项。我读到这发生在低内存手机中。但是当设备关闭活动时我们如何处理呢？

在我的示例中，**当调用第二个活动时，第一个活动被杀死**，因此当我们返回该活动时会发生崩溃，并且我的信息丢失了。

处理它的正确方法是什么？知道我无法在第二个活动中保存我的信息，因为我正在使用文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:35:14.697

根据您的目的使用[SharedPreferences 。](http://developer.android.com/reference/android/content/SharedPreferences.html)顺便说一句，您可以在完全关闭活动时使用此技术来存储数据。

获取您的类数据，通过使用将其转换为字符串`GSON`并存储。

加载时只需将其`SharedPreferences`从字符串中移出并转换回您的对象。

假设您有`MyData`所有无能为力的信息的课程。

```
MyData myData = ....;

SharedPreferences mPrefs = context.getSharedPreferences("MyPrefs", 0);
Gson gson = new Gson();
String toStore = gson.toJson(myData);

SharedPreferences.Editor editor = mPrefs.edit();
editor.putString("stored", toStore);
editor.commit();

 .... 
```

当您加载之前的活动时：

```
String loadedMyDataStr = mPrefs.getString("stored", "");
MyData data = gson.fromGson(loadedMyDataStr, MyData.class ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:36:00.623

`onPause`正如您所说，每个活动都可以在方法调用后随时终止。您可以从第一个活动中存储您的 ListView 状态`onPause`并将其加载`onResume`- 您可以为此目的使用单例。

此外，您的操作`onPause`应该尽可能快，不要在那里进行任何复杂的操作。否则，您的应用程序可能看起来像已冻结，并且没有用户可以与之交互...

# javascript - 检测 iframe 内的点击事件

> ID：13439303
> 
> 赞同：51
> 
> 时间：2012-11-18T10:28:58.847
> 
> 标签：javascript, jquery, html, iframe, tinymce

我正在为 TinyMCE 编写插件，但在检测 iframe 内的点击事件时遇到问题。

从我的搜索中，我想出了这个：

加载 iframe：

```
<iframe src='resource/file.php?mode=tinymce' id='filecontainer'></iframe> 
```

iframe 中的 HTML：

```
<input type=button id=choose_pics value='Choose'> 
```

jQuery：

```
//Detect click
$("#filecontainer").contents().find("#choose_pic").click(function(){
    //do something      
}); 
```

我见过的其他帖子通常在不同的域上有问题（这没有）。但是，仍然没有检测到该事件。

可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-12-08T21:26:39.190

我通过这样做解决了它：

```
$('#filecontainer').load(function(){

        var iframe = $('#filecontainer').contents();

        iframe.find("#choose_pics").click(function(){
               alert("test");
        });
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-18T10:32:37.973

我不确定，但你也许可以使用

```
$("#filecontainer #choose_pic").click(function() {
    // do something here
}); 
```

或者你可以`<script>`在 iframe 中添加一个标签（如果你可以访问里面的代码），然后`window.parent.DoSomething()`在框架中使用代码

```
function DoSomething() {
    // do something here
} 
```

在父母。如果这些都不起作用，请尝试`window.postMessage`. [这是有关此的一些信息](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-30T10:43:40.990

我知道这很旧，但您的代码中的 ID 不匹配，一个是**choose_pic**，一个是**choose_pics**：

```
<input type=button id=choose_pics value='Choose'>

$("#filecontainer").contents().find("#choose_pic").click(function(){
    //do something      
}); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-27T11:36:08.080

```
$("#iframe-id").load( function() {
    $("#iframe-id").contents().on("click", ".child-node", function() {
        //do something
    });
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T09:30:12.463

tinymce API 处理编辑器 iframe 中的许多事件。我强烈建议使用它们。这是单击处理程序的示例

```
// Adds an observer to the onclick event using tinyMCE.init
tinyMCE.init({
   ...
   setup : function(ed) {
      ed.onClick.add(function(ed, e) {
           console.debug('Iframe clicked:' + e.target);
      });
   }
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-08-20T13:54:13.910

只是张贴以防万一它对某人有帮助。对我来说，以下代码完美运行：

```
$(document).ready(function(){
     $("#payment_status_div").hide();
     var iframe = $('#FileFrame').contents();
     iframe.find("#take_payment").click(function(){
         $("#payment_status_div").show("slow");
     });
}); 
```

其中“FileFrame”是 iframe id，“take_payment”是 iframe 内的按钮。由于 iframe 中的表单已发布到不同的域，因此在使用加载时，我收到一条错误消息：

> 阻止来源为“ [https://www.example.com](https://www.example.com) ”的框架访问来源为“ [https://secure-test.worldpay.com](https://secure-test.worldpay.com) ”的框架。协议、域和端口必须匹配。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-06-02T17:25:26.597

在我的例子中，有**两个 jQuery**，用于内部和外部 HTML。在附加内部事件之前，我有四个步骤：

1.  等待外部 jQuery 准备好
2.  等待 iframe 加载
3.  抓取内部 jQuery
4.  等待内部 jQuery 准备好

* * *

```
$(function() {   // 1\. wait for the outer jQuery to be ready, aka $(document).ready
    $('iframe#filecontainer').on('load', function() {   // 2\. wait for the iframe to load
        var $inner$ = $(this)[0].contentWindow.$;   // 3\. get hold of the inner jQuery
        $inner$(function() {   // 4\. wait for the inner jQuery to be ready
            $inner$.on('click', function () {   // Now I can intercept inner events.
                // do something
            });
        });
    });
}); 
```

诀窍是使用内部 jQuery 附加事件。注意我是如何获得内部 jQuery 的：

```
 var $inner$ = $(this)[0].contentWindow.$; 
```

我不得不从 jQuery 中脱离出来，进入它的对象模型。其他答案中的`$('iframe').contents()`方法在我的情况下不起作用，因为它与外部 jQuery 保持一致。（顺便说一句，返回`contentDocument`。）

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-09-07T10:02:54.197

如果有人对已**接受答案**的“快速重现”版本感兴趣，请参见下文。归功于不在 SO 上的朋友。这个答案也可以通过编辑集成到接受的答案中，......（它必须在（本地）服务器上运行）。

```
<html>
<head>
<title>SO</title>
<meta charset="utf-8"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>

<style type="text/css">
html,
body,
#filecontainer {
width: 100%;
height: 100%;
}
</style>
</head>
<body>
<iframe src="http://localhost/tmp/fileWithLink.html" id="filecontainer"></iframe>

<script type="text/javascript">
$('#filecontainer').load(function(){

  var iframe = $('#filecontainer').contents();

  iframe.find("a").click(function(){
    var test = $(this);
    alert(test.html());
  });
});
</script>
</body>
</html> 
```

文件WithLink.html

```
<html>
<body>
<a href="https://stackoverflow.com/">SOreadytohelp</a>
</body>
</html> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-07-19T16:27:38.457

就我而言，我试图从父文档中触发一个自定义事件，并在子 iframe 中接收它，所以我必须执行以下操作：

```
var event = new CustomEvent('marker-metrics', {
    detail: // extra payload data here
});
var iframe = document.getElementsByTagName('iframe');
iframe[0].contentDocument.dispatchEvent(event) 
```

并在 iframe 文档中：

```
document.addEventListener('marker-metrics', (e) => {
  console.log('@@@@@', e.detail);
}); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-03-01T05:43:44.180

尝试

```
 $('#yourIframeid').on("load", function () {
            $(this).contents().on("contextmenu, keydown, mousedown, mouseup, click", function (e) {
               //do your thing
            });

        }); 
```

`$('#yourIframeid').on("load")`如果 `$('#yourIframeid').onload(`不起作用，请使用 。

# iphone - UIScrollView setContentSize 使用自动布局打破视图

> ID：13439304
> 
> 赞同：6
> 
> 时间：2012-11-18T10:29:10.387
> 
> 标签：iphone, objective-c, uiscrollview, autolayout

我在我的 iPhone 应用程序中使用自动布局并且有一个`UIScrollView`. 在我的应用程序运行时，我需要在几个点更改滚动视图的内容大小（因此设置内容大小`viewWillAppear`是无用的，因为我在其他地方看到了这个建议）。

当我更改它时，我的子视图会跳来跳去，大概是因为它打破了自动布局约束。

那么如何在启用自动布局的情况下更改我的滚动视图内容大小呢？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-20T22:25:38.310

我遇到了同样的问题，我知道这不是最终的解决方案，但是现在，`viewWillLayoutSubviews`通过将代码放入`viewDidLayoutSubviews`其中，我可以在 viewController 完成默认业务后设置 contentSize ，而不是调用它：)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:46:07.737

在`viewWillLayoutSubviews`. 苹果说：

> 当视图的边界发生变化时，视图会调整其子视图的位置。您的视图控制器可以覆盖此方法以在视图布置其子视图之前进行更改。此方法的默认实现什么也不做。

[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)

# c# - 如何在不使用数据库的情况下在 Windows 窗体项目中添加一些列和标题？

> ID：13439308
> 
> 赞同：-1
> 
> 时间：2012-11-18T10:30:08.863
> 
> 标签：c#, winforms

如何在 ac# windows application 、 columns 和 header 中制作？像这个：![在此处输入图像描述](../Images/c5d601e60f2f59e6ef3bb22c2a8ecfbc.png)

是的，我想动态添加行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:45:18.863

您可以[`DataTable`](http://msdn.microsoft.com/en-us/library/system.data.datatable%28v=vs.100%29.aspx)使用[`DataGridView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview%28v=vs.100%29.aspx)：

```
DataTable table = new DataTable();
table.Columns.Add("Name", typeof(string));
table.Rows.Add("Johnnie");

// I assume that you've already created dataGridView (in your form)
dataGridView.DataSource = table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:55:01.653

*当您不使用 database 时，您不需要 ADO.NET DataTables*。只需将 gridview 添加到您的表单中。选择你的gridview，在属性窗口的底部你会看到两个链接`Add Column...`，`Edit Columns...`。您可以在此处添加所需的列并设置其类型。

假设您有以下课程：

```
public class City
{
   public string Name { get; set; }
   public string Country { get; set; }
   public string CountryCode { get; set; }
   public string State { get; set; }
} 
```

将 DataGridViewTextBoxColumn 类型的四列添加到带有标题的 GridView 中`Country:`，`Country Code:`, `State:`, `City:`（您可以将列设为只读）。然后转到`Edit Columns`并指定每列 DataPropertyName。它应该是 City 类的属性名称，将绑定到哪一列。例如，它应该是`Name`column 的属性`City`。

然后创建城市列表并将其分配给 GridView：

```
BindingList<City> cities = new BindingList<City>()
{
    new City() { Name = "Carros", Country = "France", CountryCode = "FRA" },
    new City() { Name = "Barcelona", Country = "Spain", State = "Catalonia" }
};

dataGridView.DataSource = cities; 
```

如果您将使用`BindingList`而不是 simple `List`，那么您的城市列表上的更改将影响 DataGrid 中的数据（即当您添加或删除城市时）：

```
void ButtonAddCity_Click(object sender, EventArgs e)
{
    cities.Add(new City() {
        Name = nameTextBox.Text,
        Country = countryTextBox.Text, 
        CountryCode = codeTextBox.Text,
        State = stateTextBox.Text
    }); 
} 
```

# java - 比较java中的两个日期类型变量

> ID：13439311
> 
> 赞同：2
> 
> 时间：2012-11-18T10:30:28.797
> 
> 标签：java

我在比较两种数据类型 Variable -> java.sql.Date 类型时发现了一些问题。

首先我正在创建当前数据（yyyy-mm-dd）：

```
java.util.Date date = new java.util.Date();

java.sql.Date dateSql = new Date(date.getTime()); 
```

其次，我从 MySQL 接收数据：

```
MyDataEntity myDataEntity = session.getNamedQuery(MyDataEntity.GET_ELEMENT).uniqueResult(); 
```

然后我试图比较两个日期：

```
if(dataSql != myDataEntity.getDate()){
System.out.println("different");
}else{
System.out.println("these same");
} 
```

结果是，这两个日期总是不同的。但是当我打印这两个数据的值时，我得到了这些相同的值：

```
System.out.println(dataSql);
System.out.println(myDataEntity.getDate); 
```

影响：

```
2012-11-16
2012-11-16 
```

但是，我发现了一个问题：

如果我做：

```
long date1 = dateSql.getTime();  // print 1353106800000
long date2 = myDataEntity.getDate().getTime(); // print 1353234605091 
```

那么如何比较两个日期（yyyy-mm-dd）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:35:01.400

首先，`.equals(..)`用来比较非原始对象——`someDate.equals(anotherDate)`

Using`==`比较它们的 jvm 标识——即它们是否是堆上的同一个对象，而不是它们的值。

然后确保你比较正确的东西——你想要相同的日期，然后你应该放弃小时、分钟和天。为此，您可以使用：

*   数学减去毫秒
*   `java.util.Calendar`的`.set(..)`方法。
*   joda-time `DateMidnight`- 最佳选择

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:35:39.733

这是一个众所周知的问题：java.sql.Date 对象删除了在日期对象的下端找到的精度（请参阅打印末尾的所有那些零）。因此，您必须标准化 java.util.Date 和 java.sql.Date 之间的精度。

```
java.util.Date utilDate = new java.util.Date();
java.sql.Date sqlDate = new java.sql.Date(utilDate.getTime()); 
```

哦，使用 .equals 来比较对象，而不是 ==。

# data-modeling - 包含两种不同关系的数据模型

> ID：13439320
> 
> 赞同：3
> 
> 时间：2012-11-18T10:31:26.860
> 
> 标签：data-modeling, relationship

我试图找出我应该使用哪种数据模型以及这个数据模型应该是什么样子。模型需要存储在关系数据库 (SQL) 中。使用的语言：PHP。

我有几种项目：项目、任务和评论。在我的最终应用程序中，将有许多类型的项目。

每个项目（任何类型）需要能够属于另一个项目（任何类型），每个项目（任何类型）需要能够是另一个项目（任何类型）的后续。所以我需要两种不同的关系：继承和时间顺序；两者都是定向的。无论是哪种关系项目都可能不会回环到它们自己。非法：项目 A -> 项目 B -> 项目 C -> 项目 A。

我希望能够提取以下类型的信息：

*   向我展示导致该项目的项目链。（时间关系） 输出：列表
*   显示属于此项目的所有项目。（继承关系）输出：树
*   告诉我这个项目如何导致那个项目（忽略其他项目中的项目）。（时间顺序和继承关系）输出：？？

我不知道我会如何想象最后一个。

用户需要能够：

*   添加/删除项目（任何类型）
*   建立/破坏关系（任何类型）
*   更改关系或项目类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T16:24:54.740

```
Item(iid,itemstuff,typeid,iid)
type(typeid,description) 
```

使用 itemstuff，您可以添加可序列化的数据，或者您可能喜欢的常见内容。然后，如果您愿意，可以专攻：

```
Item1(iid,i1....)
item2(iid,i2....)
. 
```

但是，改变就意味着更新。

对于类似的问题，我不得不这样做一次，但当时我并没有为环回而烦恼。我严重怀疑您能否在 rdbms 中获得这样的动态模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:54:50.440

我不明白这如何通过关系概念设计成为问题。您始终可以通过解析输出（来自查询）来获取您正在寻找的表单中的信息。例如

使用架构：

```
project(pid,...),
milestone(pid,mid),
tasks(tid,mid,..),
reviews(rid,tid,..),
events(evid,rid), ... 
```

从一个项目中，您可以获取导致审核的所有事件，甚至与项目相关的所有事件（通过连接），然后通过它们进行解析，以您喜欢的任何信息格式排列和显示。

用户始终可以添加和删除项目。以您的示例为例，我还无法理解“更改关系或项目类型”的含义！

# javascript - 输入变化时如何动态改变div的内容？

> ID：13439323
> 
> 赞同：0
> 
> 时间：2012-11-18T10:31:54.007
> 
> 标签：javascript

```
<input type="text" class="input-text qty" title="Qty" value="1" maxlength="12" id="qty" name="qty" />
<div id="qtyvalue"><div> 
```

页面上有一个输入文本框。我正在使用 Javascript 将 qtyvalue 输出到以下 div。

```
var qty =document.getElementById('qty').value;
document.getElementById('qtyvalue').innerHTML = qty; 
```

现在，如果用户在文本框中输入数字，qtyvalue 的值会相应改变，我不需要刷新页面。我应该如何更改代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:34:38.173

将其包装在`keyup`事件中：

```
var input = document.getElementById('qty'); 
input.onkeyup = function() {
    document.getElementById('qtyvalue').innerHTML = input.value;    
} 
```

但是您也应该考虑在其他事件上添加相同的操作：`change`, `paste`, `input`。

[这里的](http://jsfiddle.net/9cyXq/)工作示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:17:58.890

```
<input type="text" onchange="javascript:callMeOnChange()" class="input-text qty" title="Qty" value="1" maxlength="12" id="qty" name="qty" />
<div id="qtyvalue"><div>
<script>
function callMeOnChange()
{
$('#qtyvalue').value=$('#qty').val();
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-04T13:52:38.240

在输入字段内容更改时更改按钮状态

```
<script type="text/javascript">
        $('#submit').attr('disabled',true);//
        $('#captchaStatusTrue').attr('hidden',true);//
        $('#captchaStatusFalse').removeAttr('hidden');//

      document.getElementById("status").onchange = function(){ 
        var status = document.getElementById("status").value;
        var falses = "false";

       if(status == falses){//
                $('#submit').attr('disabled',true);//
                $('#captchaStatusTrue').attr('hidden',true);//
                $('#captchaStatusFalse').removeAttr('hidden');//
            }
            else{//
                   $('#submit').removeAttr('disabled');//
                   $('#captchaStatusFalse').attr('hidden',true);//
                   $('#captchaStatusTrue').removeAttr('hidden');//

            }//
      };//
    </script> 
```

# php - php/mysql 中的阿拉伯语出现“？？？？？？” html中的问号

> ID：13439324
> 
> 赞同：26
> 
> 时间：2012-11-18T10:32:09.637
> 
> 标签：php, mysql, encode, arabic, html-encode

> **可能重复：**
> [在 MySQL 数据库中以阿拉伯语保存数据](https://stackoverflow.com/questions/6859018/save-data-in-arabic-in-mysql-database)

我在使用 PHP 从 MYSQL 数据库中检索阿拉伯语数据时遇到问题，它显示为问号“????” 在 HTML 中：

1.  我有一个以“utf8_general_ci”作为排序规则的数据库。
2.  该数据库包含一些阿拉伯语数据。
3.  HTML 编码为“UTF-8”。
4.  当我尝试以 HTML 格式检索数据时，它显示为“???????”。

请帮忙 ！！！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-18T10:45:29.913

您必须通过以下查询在第一次连接 mysql 时设置字符集：

```
SET CHARACTER SET utf8 
```

例如在 mysqli 函数中

```
$MySQL_Handle = mysqli_connect(HOSTNAME,DATABASE_USERNAME,DATABASE_PASSWORD,DATABASE_NAME) 
or die ( mysqli_error($MySQL_Handle) ); 

$sSQL= 'SET CHARACTER SET utf8'; 

mysqli_query($MySQL_Handle,$sSQL) 
or die ('Can\'t charset in DataBase'); 
```

和 PDO 样本：

```
$dbh = new PDO('mysql:host=localhost;dbname=' . $DB_NAME, $DB_USER,
$DB_PASS, array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'UTF8'"));
$dbh->exec("SET CHARACTER SET UTF8"); 
```

此操作需要在插入之前和选择之前。

# java - 转储 H2 插入语句

> ID：13439327
> 
> 赞同：4
> 
> 时间：2012-11-18T10:32:20.443
> 
> 标签：java, jdbc, h2

嗨，我如何仅为 H2 In Memory DB 的实例转储数据。

我目前拥有的

```
 PreparedStatement preparedStatement = connection
            .prepareStatement("SCRIPT SIMPLE NOSETTINGS");
    ResultSet resultSet = preparedStatement.executeQuery();
    response.setContentType("text/plain");
    ServletOutputStream out = response.getOutputStream();
    while (resultSet.next()) {
        String columnValue = resultSet.getString(1);
        out.print(columnValue);
        out.println(); 
```

这会转储整个数据库结构，但不仅仅是插入数据。基本上我想做的是备份我在开发模式下插入的数据，这样下次启动数据库时，我可以将数据重新写入脚本。

表结构不是问题，因为它是由 JPA 完成的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T14:31:53.613

要过滤掉仅插入，您可以使用：

```
if (columnValue.startsWith("INSERT")) {
    out.println(columnValue);
} 
```

# iphone - UIWebview中的超链接点击方法

> ID：13439329
> 
> 赞同：0
> 
> 时间：2012-11-18T10:32:30.973
> 
> 标签：iphone, objective-c, ios, uiwebview, uiwebviewdelegate

我的 iphone 应用程序中有一个`UIWebView`，每当用户点击任何超链接时，我都必须检测点击方法。我想在用户单击超链接时调用一种方法我知道该方法

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType 
```

但是无论用户是否单击了超链接，只要加载任何链接都会检测到它，但我只想在用户单击任何方法时调用方法。请让我摆脱这个问题。-提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:54:08.593

You can check the `UIWebViewNavigationType`.

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {
        NSLog("User tapped a link.");
    }
} 
```

See [UIWebView Class Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html) for more information.

# jquery - 我如何引用调用 jQuery 插件的元素？

> ID：13439333
> 
> 赞同：0
> 
> 时间：2012-11-18T10:32:41.753
> 
> 标签：jquery

例如：

```
<div id="target" data-width="400px"></div>

$("#target").myPlugin({width: ??? }); 
```

？？？必须是`data-width`属性值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:38:13.547

```
$("#target").myPlugin({width: $("#target").attr('data-width') }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:38:49.840

你可以这样做

```
$("#target").myPlugin({
  width: $("#target").data('width') 
 }); 
```

所有功劳[归于adeno](https://stackoverflow.com/users/965051/adeneo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T10:36:35.080

[http://api.jquery.com/width/](http://api.jquery.com/width/)

您可以使用 .width() 轻松获得 leh 宽度

# android - 为什么我的编辑联系人不起作用？

> ID：13439336
> 
> 赞同：2
> 
> 时间：2012-11-18T10:33:13.427
> 
> 标签：android, android-intent

我正在显示联系人列表，并有一个上下文菜单可通过调用意图来编辑联系人。在某些联系人上它工作正常，但在其他人的编辑联系人活动是空白的。有任何想法吗？

这是光标...

```
 projection = new String[]{ContactsContract.CommonDataKinds.Phone.NUMBER,ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,ContactsContract.CommonDataKinds.Phone._ID};   
 uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
 cursor = getActivity().getContentResolver().query(uri, projection, null, null,    ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC"); 
```

这是我的 CursorAdapter.getView() 中的代码...

```
textView.setText(cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)) ; 
```

这是我的 onContextItemSelected 中的代码...

```
cursor.moveToPosition(position);
String idContact = cursor.getString(cursor.getColumnIndex(ContactsContract.Contacts._ID));
Intent i = new Intent(Intent.ACTION_EDIT);
i.setData(Uri.parse(ContactsContract.Contacts.CONTENT_LOOKUP_URI + "/" + idContact));
parent.startActivity(i); 
```

我检查了 logcat 并且可以看到

```
I/ActivityManager(  102): Starting activity: Intent { act=android.intent.action.EDIT dat=content://com.android.contacts/contacts/lookup/23356 cmp=com.android.htccontacts/.ui.EditContactActivity } 
```

但没有错误消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-20T17:14:55.420

试试这个：

```
Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
Cursor cursor = this.getContentResolver().query(uri, null, null, null, ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC");
long idContact = cursor.getLong(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.CONTACT_ID)); 
```

然后

```
Intent i = new Intent(Intent.ACTION_EDIT);
Uri contactUri = ContentUris.withAppendedId(ContactsContract.Contacts.CONTENT_URI, idContact); 
i.setData(contactUri); 
```

# visual-studio-2010 - SharePoint 沙盒 Webpart 中的图像/图像按钮

> ID：13439339
> 
> 赞同：1
> 
> 时间：2012-11-18T10:33:34.483
> 
> 标签：visual-studio-2010, sharepoint, web-parts

刚开始为 Sharepoint Online 开发，但我熟悉如何将 Web 部件部署/打包到本地 Sharepoint 和 Sharepoint Online。

尝试创建一个包含大量图像链接或图像按钮的基本 Web 部件，以运行指向不同库和功能的各种链接。webpart 将很好地激活，但我正在努力让图像在部署到 Sharepoint Online 后显示。

如果我将图像包含在 Web 部件解决方案中并将其部署到本地 Sharepoint，图像会正确显示，但打包和上传时图像不会显示。我用谷歌搜索了很多，并尝试了将图像作为嵌入资源添加到 Web 部件包 .wsp 中的不同方法，但似乎都不起作用。

我知道我只能将 Web 部件制作为沙盒形式，以便在线与 Sharepoint 一起使用，因此我可以映射到 Sharepoint 图像文件夹，并且确实需要将图像/图标文件与 .wsp 一起打包。

我是否需要将图像文件包含在解决方案中的特定位置以便打包和引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T13:27:13.207

您需要通过[模块添加图像](http://msdn.microsoft.com/en-us/library/ee231567.aspx)

`Url`可以是任何文档库。

```
<Module Name="Pics" Url="PathToDocLib">
   <File Path="yourPicture.png" Url="Pics/yourPicture.png" />
</Module> 
```

# spreadsheet - 按日期（A 列）过滤行并将总和（C 列）写入另一个工作表中的字段

> ID：13439346
> 
> 赞同：2
> 
> 时间：2012-11-18T10:34:44.113
> 
> 标签：spreadsheet, google-docs, google-sheets, formula

`Google Spreadsheet`我在文档中有两张纸。第一个具有月、收入、费用和利润列（分别为 A、B、C、D），并且在每一行中，费用值应根据另一张称为费用的工作表中的过滤器（我认为）计算。

费用表包含日期、名称和价格列。

因此，我需要编写公式来仅过滤特定月份的费用，将这些行中的所有价格相加，并将该值写入第一张表中的 C 列（该月的行）。

你可以看到[这个例子](https://docs.google.com/spreadsheet/ccc?key=0Ag2JTbxo1igsdGZkQmoxT1pkM1F2c3BSWW9pMW5TTGc)，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T21:38:33.137

这是一个可以填写的公式（我在F2中输入过）：

`=ArrayFormula(SUMIF(TEXT(Expenses!A$2:A;"MMMM");A2;Expenses!C$2:C))`

这是一个公式，将自动在列中填充结果（我已在 G2 中输入）：

`=ArrayFormula(IF(LEN(A2:A);SUMIF(TEXT(Expenses!A2:A;"MMMM");A2:A;Expenses!C2:C);IFERROR(1/0)))`

这个公式会考虑到年份；我在 J2 中输入了它，在 I2:I 中引用了月份-年份字符串：

`=ArrayFormula(IF(LEN(I2:I);SUMIF(TEXT(Expenses!A2:A;"MMMM yyyy");I2:I;Expenses!C2:C);IFERROR(1/0)))`

# ruby-on-rails - Ruby on rails 2 级模型

> ID：13439350
> 
> 赞同：0
> 
> 时间：2012-11-18T10:34:56.860
> 
> 标签：ruby-on-rails, ruby

我需要一些帮助在现有模型中创建一个非常简单的论坛。

我想要的游戏页面，有一个迷你论坛，可以在其中创建一些主题和对此主题的一些评论。一开始我只是实现主题。

这是我遇到的错误：

```
Mysql2::Error: Column 'user_id' cannot be null: INSERT INTO `topics` (`game_id`, `question`, `user_id`) VALUES (1, 'asd', NULL) 
```

这是我的主要模型：

**游戏.rb**

```
class Game < ActiveRecord::Base
   attr_accessible :name

   validates :user_id, presence: true
   validates :name, presence: true, length: { maximum: 50 }

   belongs_to :user

   has_many :topics, dependent: :destroy

end 
```

**主题.rb**

```
class Topic < ActiveRecord::Base
     validates_presence_of :question
     validates_presence_of :game_id

     attr_accessible :question, :user_id

     validates :question, length: {maximum: 50}, allow_blank: false

     belongs_to :game
     belongs_to :user
end 
```

**主题控制器.rb**

```
def create
    @game = Game.find(params[:game_id])
    @topic = @game.topics.create(params[:topic])
    @topic.user_id = current_user.id

    respond_to do |format|
      if @topic.save
        format.html { redirect_to @game, notice: 'Topic was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
end 
```

**游戏/show.html.erb**

```
<h2>Topics</h2>
<% @game.topics.each do |topic| %>

    <p>
      <b>Question:</b>
      <%= topic.question %>
    </p>
<% end %>

<h2>Add a topic:</h2>
<%= form_for([@game, @game.topics.build]) do |f| %>
    <div class="field">
     <%= f.label :question %><br />
      <%= f.text_field :question %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
<% end %> 
```

谢谢 ;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:39:50.533

我相信您遇到的问题是Rails之间`create`的差异。`new`

仅使用`new`初始化模型，允许您稍后保存/验证；using`create`将在一个命令中执行所有这些步骤，从而创建数据库行。

所以当你尝试执行

```
@game.topics.create(params[:topic]) 
```

Rails 尝试使用`params[:topic]`并设置`game_id`to创建一个主题`@game.id`，之后它立即尝试验证它创建的这个新主题并将其保存到数据库中。

您可以考虑的潜在选择：

1) 使用`@game.topics.new(params[:topic])`

2）合并`{:user_id => current_user.id}`：`@game.topics.create(params[:topic].merge({:user_id => current_user.id})`

我个人建议使用选项 1（即使用 new 代替），但我之前已经看到使用选项 2。

**编辑：**看起来好像您可能遇到的另一个问题：应该`current_user`在`@current_user`您的代码中吗？

* * *

旁注：通常，如果`create`无法创建数据库行，它仍然可以工作（而不是返回初始化模型），但在您的情况下，由于数据库级别的 user_id 限制为 NOT NULL，这看起来不会发生，导致未捕获的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:58:00.970

You may want to consider reading the [Rails Guide on nested resources](http://guides.rubyonrails.org/routing.html#nested-resources). I've been where you are now , take a look at [this discusion](https://stackoverflow.com/questions/5207038/the-better-way-to-pass-the-foreign-key-value-to-the-rails-controller).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:59:11.487

我猜您是在未登录的情况下访问该站点，因此`user_id`不会设置。您应该确保所有修改或创建主题的操作都有一个登录用户。[在这个 Railscast](http://railscasts.com/episodes/20-restricting-access)中可以找到一个简单的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T12:21:36.090

我认为`current_user.id`设置不正确，请检查这些问题几乎是所有其他问题，ruby 调试器是最受困扰的方法

在您的 GEM 文件中添加

*宝石文件*

```
gem 'debugger' 
```

跑`bundle install`

然后在你的控制器中

```
def create
    @game = Game.find(params[:game_id])
    @topic = @game.topics.create(params[:topic])

    @topic.user_id = current_user.id

    debugger

    respond_to do |format|
      if @topic.save
        format.html { redirect_to @game, notice: 'Topic was successfully created.' }
      else
        format.html { render action: "new" }
      end
    end
end 
```

这将阻止您进入调试器行，然后从控制台您可以查看是否设置了值。[检查更多](https://github.com/cldwalker/debugger)

# linux - 无法使用 g++ 进行编译

> ID：13439355
> 
> 赞同：3
> 
> 时间：2012-11-18T10:35:31.933
> 
> 标签：linux, gcc, compilation, g++, gaul

现在我尝试使用一个名为“ *GAUL* ”的开源工具，其中实现了一些遗传算法。通过编译示例文件，我发现我只能通过使用 gcc 而不是 g++ 来编译这些数据。前任：

* * *

1）使用`gcc -I /usr/local/include/ -c wildfire_threat.c -o test.o`

`gcc** -g -O2 -Wall -o test2.out test.o -lgaul -lgaul_util -lm -lpthread -lslang -lm`

也适用于组合

`gcc -I /usr/local/include/ -c wildfire_threat.c -o test.o`

`g++ -g -O2 -Wall -o test2.out test.o -lgaul -lgaul_util -lm -lpthread -lslang -lm`

* * *

但是 2) 使用

`g++ -I /usr/local/include/ -c wildfire_threat.c -o test.o`

`g++ -g -O2 -Wall -o test2.out test.o -lgaul -lgaul_util -lm -lpthread -lslang -lm`

我收到以下错误消息：

```
test.o: In function `wildfire_simulation(int*, bool)':
wildfire_threat.c:(.text+0x52): undefined reference to `random_int(unsigned int)'
wildfire_threat.c:(.text+0x74): undefined reference to `random_int(unsigned int)'
test.o: In function `wildfire_score(population_t*, entity_t*)':
wildfire_threat.c:(.text+0xb55): undefined reference to `ga_entity_set_fitness(entity_t*, double)'
test.o: In function `wildfire_seed(population_t*, entity_t*)':
wildfire_threat.c:(.text+0xb86): undefined reference to `random_boolean()'
wildfire_threat.c:(.text+0xbb9): undefined reference to `random_boolean_prob(double)'
wildfire_threat.c:(.text+0xc18): undefined reference to `random_int(unsigned int)'
wildfire_threat.c:(.text+0xc25): undefined reference to `random_int(unsigned int)'
wildfire_threat.c:(.text+0xc92): undefined reference to `random_int(unsigned int)'
test.o: In function `wildfire_mutate_flip(population_t*, entity_t*, entity_t*)': 
wildfire_threat.c:(.text+0xd41): undefined reference to `random_int(unsigned int)'
test.o: In function `wildfire_crossover(population_t*, entity_t*, entity_t*, entity_t*, entity_t*)':
wildfire_threat.c:(.text+0xe25): undefined reference to `random_boolean()' 
wildfire_threat.c:(.text+0xe37): undefined reference to `random_int(unsigned int)' 
wildfire_threat.c:(.text+0xff0): undefined reference to `random_int(unsigned int)'
test.o: In function `wildfire_ga_callback(int, population_t*)':
wildfire_threat.c:(.text+0x11bc): undefined reference to `ga_get_entity_from_rank(population_t*, unsigned int)'
wildfire_threat.c:(.text+0x11c4): undefined reference to `ga_entity_get_fitness(entity_t*)'
wildfire_threat.c:(.text+0x11ef): undefined reference to 
`ga_population_score_and_sort(population_t*)' 
wildfire_threat.c:(.text+0x1206): undefined reference to `ga_fitness_mean_stddev(population_t*, double*, double*)'
wildfire_threat.c:(.text+0x122b): undefined reference to `ga_get_entity_from_rank(population_t*, unsigned int)'
wildfire_threat.c:(.text+0x1233): undefined reference to `ga_entity_get_fitness(entity_t*)'
wildfire_threat.c:(.text+0x1268): undefined reference to `ga_get_entity_from_rank(population_t*, unsigned int)'
wildfire_threat.c:(.text+0x1270): undefined reference to `ga_entity_get_fitness(entity_t*)'
test.o: In function `main':
wildfire_threat.c:(.text+0x12b0): undefined reference to `random_seed(unsigned int)'
wildfire_threat.c:(.text+0x12dd): undefined reference to `ga_select_two_roulette_rebased(population_t*, entity_t**, entity_t**)'
wildfire_threat.c:(.text+0x12e6): undefined reference to `ga_select_one_roulette_rebased(population_t*, entity_t**)'
wildfire_threat.c:(.text+0x132e): undefined reference to `ga_genesis_integer(int, int, int, bool (*)(int, population_t*), bool (*)(int, entity_t*), void (*)(void*), void (*)(void*), bool (*)(population_t*, entity_t*), bool (*)(population_t*, entity_t*), entity_t* (*)(population_t*, entity_t*), bool (*)(population_t*, entity_t**), bool (*)(population_t*, entity_t**, entity_t**), void (*)(population_t*, entity_t*, entity_t*), void (*)(population_t*, entity_t*, entity_t*, entity_t*, entity_t*), void (*)(population_t*, entity_t*), void*)'
wildfire_threat.c:(.text+0x135c): undefined reference to `ga_population_set_parameters(population_t*, ga_scheme_type_t, ga_elitism_type_t, double, double, double)'
wildfire_threat.c:(.text+0x136d): undefined reference to `ga_evolution_threaded(population_t*, int)'
wildfire_threat.c:(.text+0x137e): undefined reference to `ga_get_entity_from_rank(population_t*, unsigned int)'
wildfire_threat.c:(.text+0x1386): undefined reference to `ga_entity_get_fitness(entity_t*)'
wildfire_threat.c:(.text+0x13b5): undefined reference to `ga_get_entity_from_rank(population_t*, unsigned int)'
wildfire_threat.c:(.text+0x1434): undefined reference to `ga_get_entity_from_rank(population_t*, unsigned int)'
wildfire_threat.c:(.text+0x1528): undefined reference to `ga_extinction(population_t*)'
collect2: ld returned 1 exit status 
```

* * *

谁能向我解释这个谜，以及我如何避免使用 gcc，因为这会给我想要嵌入的剩余源代码带来问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:53:08.923

您的第三方 C 库可能`extern "C"`在其标头中缺少声明。要在不修改第三方标头的情况下解决此问题，您可以在您的 C++ 源代码中执行类似的操作，只要您`#include`有相关的第三方标头：

```
extern "C" {
  #include "gaul.h"         // note: I'm just guessing the names of the
  #include "gaul_utils.h"   //       actual header files here...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:58:48.750

您应该使用 C 编译器编译 C 源代码，并使用 C++ 编译器编译 C++ 源代码。在特定情况下，GAUL 库是用 C 编写的，它的头文件不适合包含在 C++ 编译中 - 它们缺少`extern "C"`，所以当你编译为 C++ 时，函数是用 C++ 链接声明的，当然，在C 编译的库。

# python - 从GDAL中的栅格中提取点

> ID：13439357
> 
> 赞同：2
> 
> 时间：2012-11-18T10:35:52.380
> 
> 标签：python, gdal, ogr

我有一个光栅文件和一个 WGS84 纬度/经度点。

我想知道栅格中的哪个值与该点相对应。

我的感觉是我应该`GetSpatialRef()`在光栅对象或其一个波段上使用，然后将 a`ogr.osr.CoordinateTransformation()`应用于该点以将其映射到光栅空间。

我希望那时我可以简单地询问光栅乐队当时的情况。

但是，栅格对象似乎没有`GetSpatialRef()`访问地理定位点的方法或方法，因此我对如何执行此操作有些茫然。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T00:21:38.133

假设我有一个 geotiff 文件 test.tif。然后下面的代码应该在像素附近的某处查找值。我对查找单元格的部分没有那么自信，并且会修复存在错误。这个页面应该有帮助，[“GDAL 数据模型”](http://openev.sourceforge.net/app/developer_info/COURSE1_gdal_datamodel.html)

此外，如果您还没有，您可以访问[gis.stackexchange.com](http://gis.stackexchange.com)寻找专家。

```
import gdal, osr

class looker(object):
    """let you look up pixel value"""

    def __init__(self, tifname='test.tif'):
       """Give name of tif file (or other raster data?)"""

        # open the raster and its spatial reference
        self.ds = gdal.Open(tifname)
        srRaster = osr.SpatialReference(self.ds.GetProjection())

        # get the WGS84 spatial reference
        srPoint = osr.SpatialReference()
        srPoint.ImportFromEPSG(4326) # WGS84

        # coordinate transformation
        self.ct = osr.CoordinateTransformation(srPoint, srRaster)

        # geotranformation and its inverse
        gt = self.ds.GetGeoTransform()
        dev = (gt[1]*gt[5] - gt[2]*gt[4])
        gtinv = ( gt[0] , gt[5]/dev, -gt[2]/dev, 
                gt[3], -gt[4]/dev, gt[1]/dev)
        self.gt = gt
        self.gtinv = gtinv

        # band as array
        b = self.ds.GetRasterBand(1)
        self.arr = b.ReadAsArray()

    def lookup(self, lon, lat):
        """look up value at lon, lat"""

        # get coordinate of the raster
        xgeo,ygeo,zgeo = self.ct.TransformPoint(lon, lat, 0)

        # convert it to pixel/line on band
        u = xgeo - self.gtinv[0]
        v = ygeo - self.gtinv[3]
        # FIXME this int() is probably bad idea, there should be 
        # half cell size thing needed
        xpix =  int(self.gtinv[1] * u + self.gtinv[2] * v)
        ylin = int(self.gtinv[4] * u + self.gtinv[5] * v)

        # look the value up
        return self.arr[ylin,xpix]

# test
l = looker('test.tif')
lon,lat = -100,30
print l.lookup(lon,lat)

lat,lon =28.816944, -96.993333
print l.lookup(lon,lat) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-30T14:30:21.657

是的，API 不一致。栅格（数据源）有一个`GetProjection()`方法（返回 WKT）。

这是一个执行您想要的功能（从[此处](https://github.com/openmeteo/pthelma/blob/87aeed3a6c680eacb502b582bfe78f3ece6087f6/pthelma/spatial.py#L175)绘制）：

```
def extract_point_from_raster(point, data_source, band_number=1):
    """Return floating-point value that corresponds to given point."""

    # Convert point co-ordinates so that they are in same projection as raster
    point_sr = point.GetSpatialReference()
    raster_sr = osr.SpatialReference()
    raster_sr.ImportFromWkt(data_source.GetProjection())
    transform = osr.CoordinateTransformation(point_sr, raster_sr)
    point.Transform(transform)

    # Convert geographic co-ordinates to pixel co-ordinates
    x, y = point.GetX(), point.GetY()
    forward_transform = Affine.from_gdal(*data_source.GetGeoTransform())
    reverse_transform = ~forward_transform
    px, py = reverse_transform * (x, y)
    px, py = int(px + 0.5), int(py + 0.5)

    # Extract pixel value
    band = data_source.GetRasterBand(band_number)
    structval = band.ReadRaster(px, py, 1, 1, buf_type=gdal.GDT_Float32)
    result = struct.unpack('f', structval)[0]
    if result == band.GetNoDataValue():
        result = float('nan')
    return result 
```

其文档如下（取自[此处](http://pthelma.readthedocs.org/en/latest/dev/spatial.html#spatial.extract_point_from_raster)）：

```
spatial.extract_point_from_raster(point, data_source, band_number=1) 
```

> data_source 是一个 GDAL 栅格，而 point 是一个 OGR 点对象。该函数返回data_source指定波段中离点最近的像素值。
> 
> point 和 data_source 不必在同一个参考系中，但它们都必须定义适当的空间参考。
> 
> 如果该点不在栅格中，则会引发 RuntimeError。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-11-26T14:45:42.883

```
project = self.ds.GetProjection()
srPoint = osr.SpatialReference(wkt=project) 
```

完成...这样，矢量文件采用了输入光栅文件的投影

# c - C - 结构的 dns 查询

> ID：13439361
> 
> 赞同：0
> 
> 时间：2012-11-18T10:36:27.143
> 
> 标签：c, dns, udp, structure

> **可能重复：**
> [C - 字节数组到结构（dns 查询）](https://stackoverflow.com/questions/13438969/c-byte-array-to-structure-dns-query)

我有这些结构：

```
typedef struct dnsQuery {
  char header[12];
  struct dnsQuerySection *querySection;
} TdnsQuery;

typedef struct dnsQuerySection {
  unsigned char *name;
  struct dnsQueryQuestion *question;
} TdnsQuerySection;

typedef struct dnsQueryQuestion {
  unsigned short qtype;
  unsigned short qclass;
} TdnsQueryQuestion; 
```

我在一个字节数组中有一个 DNS`buf`查询`recvfrom`。我正在尝试从字节数组中获取结构，如下所示：

```
TdnsQuery* dnsQuery = (TdnsQuery*)buf; 
```

当我尝试像这样访问 qtype 时：

```
printf("%u", dnsQuery->querySection->question.qtype); 
```

我得到段错误 11。

有人可以帮我处理这些结构吗？他们怎么了？我试图添加结构：

```
typedef struct udpPacket {
  char header[8];
  structr dnsQuery query;
} 
```

并从字节数组映射这个结构，但它没有帮助。有人可以帮我处理这些结构吗？对于使用 UDP 协议的 DNS 查询，它们应该是什么样子？

**编辑：**我的结构现在看起来像这样：

```
 typedef struct {
      unsigned short qtype;
      unsigned short qclass;
 } dnsQueryQuestion;

 typedef struct {

      dnsQueryQuestion *question;
      unsigned char *data[0];
 } dnsQuerySection;

 typedef struct {
      char header[12];
      dnsQuerySection querySection[0];
 } dnsQuery;

 typedef struct udpPacket {
      char header[8];
      dnsQuery query[0];
 } TudpPacket; 
```

我添加了解析功能：

```
void parse(unsigned char *data, unsigned short *qtype, unsigned short *qclass) {
    int i = 0;
    while (data[i]) {
        int len = data[i];
        i += len + 1;
    }
    *qtype = (unsigned short) data[i+1];
    *qclass = (unsigned short) data[i+3];
    return;
} 
```

并试图解析：

```
TudpPacket udpPack = (TudpPacket)buf;
parse(udpPack.query.querySection.data, &(udpPack.query.querySection.question.qtype), &(udpPack.query.querySection.question.qclass));
printf("%u\n", udpPack.query.querySection.question.qtype); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:56:46.163

首先，您可以先更改`dnsQuery`为：

```
typedef struct dnsQuery {
  char header[12];
  struct dnsQuerySection querySection[0];
} TdnsQuery; 
```

在此处查看零长度数组的用法：http: [//gcc.gnu.org/onlinedocs/gcc/Zero-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)

但是，由于`QNAME`DNS 问题中的部分是可变长度的，因此您可能无法单独使用`QTYPE`或直接使用。例如，`QCLASS``struct`

```
Header

00 01   - ID = 1
01 00   - RD = 1
00 01   - QD = 1
00 00   - AN
00 00   - NS
00 00   - NR

   Question  for www.google.com

   03 77   - 3 w
   77 77   - w w
   06 67   - 6 g
   6f 6f   - o o
   67 6c   - g l
   65 03   - e 3
   63 6f   - c o
   6d 00   - m 0
   00 01   - QTYPE
   00 01   - QCLASS 
```

如果您可以保证传入请求中只有**一个问题，请尝试以下操作：**

```
typedef struct dnsQuerySection {
  unsigned char *data[0];
} TdnsQuerySection; 
```

并编写一个函数来解析它。

**编辑：**下面是解析函数的草图，只是为了您的方便。

```
char* parse(unsigned char *data, unsigned short *qtype, unsigned short *qclass) {
    int i = 0;
    while (data[i]) {
        int len = data[i];
        i += len + 1;
    }
    /* data[i] == 0 */
    /* you may need to loop data[] again and do strcpy to get the domain name */
    *qtype = (unsigned short) data[i+1];
    *qclass = (unsigned short) data[i+3];
    return /* domain name */;
} 
```

# c++ - char * 和 const_cast 有什么区别 (string.c_str())

> ID：13439363
> 
> 赞同：5
> 
> 时间：2012-11-18T10:36:34.313
> 
> 标签：c++, char, const-cast, osc

我使用外部库来处理 2 个应用程序之间的 udp (OSC) 通信。要格式化将要发送的消息，该库需要一个 char*，但我从 UI 中得到一个必须转换的字符串。

当我处理代码的其他部分时，udp 部分是这样硬编码的：

```
 char* endofMess = "from setEndMess"; 
```

并且工作正常。我认为很容易让它与我的字符串一起工作并写道：

```
 std::string s = "from setEndMess";
    char* endofMess = const_cast<char*>(s.c_str()); 
```

但与第一个示例不同，我收到的消息格式正确，现在我只收到乱码。有人知道它来自哪里吗？

谢谢！

马蒂厄

编辑：我使用的代码：每次 OSCVal 发送消息的方法都会改变：

```
void osc500::testOSC(int identifier, float OSCval)
{
UdpTransmitSocket transmitSocket( IpEndpointName( destIP, port ) );
 char buffer[1024];
 osc::OutboundPacketStream p( buffer, 1024 );

p << osc::BeginBundleImmediate
    << osc::BeginMessage( endofMess )
       << OSCval << osc::EndMessage
<< osc::EndBundle;

transmitSocket.Send( p.Data(), p.Size() );
} 
```

如果我必须改变 OSC 模式，我称之为：

```
void osc500::setEndMess(String endpattern){
// endofMess = "from setEndMess"; //OK works fine each time it's called

//1st try :
//std::string s = "from setEndMess"; 
//endofMess = const_cast<char*>(s.c_str()); //gibberish    

//2nd try :
//std::string s = "from setEndMess";
//endofMess = &s[0]; //gibberish    

//3rd & 4th tries :
//char s[4] = {'t','e','s','t'}; 
//char s[5] = {'t','e','s','t','\0'};
//endofMess = s; //gibberish    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T10:44:48.733

`c_str()`用于 的只读访问`std::string`。

如果要通过指针写入字符串，请使用...

1.  一个数组（或向量）`char`而不是`std::string`
2.  `char* buf = &str[0];`- 直接指向字符串的第一个字符

*Trick (2) 保证在 C++11 下工作；实际上，它也可以在 C++03 中使用，但这依赖于`std::string`具有连续存储的编译器实现。*

（无论你做什么，都要注意缓冲区的长度。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T11:04:09.730

我怀疑 char* 没有被写入，它只是非常量，因为它是一个遗留 API。如果是这样，您的问题可能是 std::string 超出范围或在您调用 c_str 和它在 API 内部使用的位置之间被修改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T10:42:18.583

如果你想修改`std::string`内容，我认为你应该使用`&s[0]`（确保字符串足够大）。

```
std::string s = "abcdef...";
char* ptr = &s[0]; 
```

例如（用 MSVC10 测试）：

```
#include <iostream>
#include <ostream>
#include <string>

using namespace std;

void f(char* ptr, size_t count)
{
    for (size_t i = 0; i < count; i++)
        ptr[i] = 'x';
}

int main()
{
    string s = "abcdef";
    cout << s << endl;

    f(&s[0], 3);
    cout << s << endl;    
} 
```

输出：

```
abcdef
xxxdef 
```

# c# - 在数据库中添加重复记录后显示一条消息

> ID：13439368
> 
> 赞同：0
> 
> 时间：2012-11-18T10:37:30.903
> 
> 标签：c#, sql-server, database, winforms, stored-procedures

我用 C# winforms 和 SQL server 和 LINQ to SQL 编写程序。我使用用户控件而不是表单。在我的用户控件中，我放了 3 个文本框，txtStartNumber、txtEndNumber、txtQuantity。用户定义文本框的值，当点击按钮时，它会根据 txtQuantity 的值插入一些记录。

我想在创建重复号码时，它不会添加到数据库并显示消息。我该怎么办？我必须在代码后面或服务器端编写代码吗？我必须在存储过程或触发器中设置它？

```
 private void btnSave_Click(object sender, EventArgs e)
        {
            long  from = Convert.ToInt64(txt_barcode_f.Text);
            long to = Convert.ToInt64(txt_barcode_t.Text);
            long quantity = Convert.ToInt64(to - from);
            int card_Type_ID=Convert.ToInt32(cmb_BracodeType .SelectedValue);
            long[] arrCardNum = new long[(to - from)];

            arrCardNum[0]=from;

            for (long i = from; i < to; i++)
             {
                 for(int j=0; j<(to-from) ;j++)
                 {
                 arrCardNum[j]=from+j;
                 string r = arrCardNum[j].ToString();
                 sp.SaveCards(r, 2, card_Type_ID, SaveDate, 2);
                 }
             }
        } 
```

存储过程代码。

```
ALTER PROCEDURE dbo.SaveCards
@Barcode_Num int
,@Card_Status_ID int 
,@Card_Type_ID int
,@SaveDate varchar(10)
,@Save_User_ID int 

AS

BEGIN 
INSERT INTO [Parking].[dbo].[TBL_Cards]
           ([Barcode_Num]
           ,[Card_Status_ID]
           ,[Card_Type_ID]       
           ,[Save_User_ID])

     VALUES
           (@Barcode_Num
           ,@Card_Status_ID
           ,@Card_Type_ID
           ,@Save_User_ID)

    END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:53:01.093

if you are storing the data in sql server then, you can create set [PRIMARY KEY](http://blog.sqlauthority.com/2008/09/08/sql-server-%E2%80%93-2008-creating-primary-key-foreign-key-and-default-constraint/) for the for the barcode num columen in the TBL_Cards table . And you can display error message by using [duplicatekeyException](http://msdn.microsoft.com/en-us/library/system.data.linq.duplicatekeyexception.aspx) or Use [RAISEERROR](http://msdn.microsoft.com/en-us/library/ms177497%28v=sql.105%29.aspx) in the stored procedure

hope this helps

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:47:37.173

如果您正确设置数据库，任何添加重复键的尝试都会引发异常。您可以捕获该异常以查看它是否是尝试添加重复键的结果。
例如：

```
try
{
    sp.SaveCards(r, 2, card_Type_ID, SaveDate, 2);
}
catch (SqlException e) 
{
  // Check if exception was raised because of a duplicate key and perform your logic
}
catch (Exception ex)
{
  // Any other exceptions raised
} 
```

您提到了 LINQ，因此我建议您也阅读有关**[DuplicateKeyException](http://msdn.microsoft.com/en-us/library/system.data.linq.duplicatekeyexception.aspx)**异常的信息。

# product - Magento Magmi 列映射器

> ID：13439371
> 
> 赞同：0
> 
> 时间：2012-11-18T10:37:39.640
> 
> 标签：product, magmi

我正在使用 Magmi 在 Magento DB 中导入产品。我正在尝试映射列，但我不必映射所有列，因为它们有正确的名称。但是只有几列需要映射，但我想不通，我该怎么做。

我应该将 csv 中可用的所有列映射到映射器中吗？

我们应该将什么格式映射列放入列映射器？假设我有 sku_name、category_name、product_type。这个 s 应该如何映射？

sku_name：sku，category_name：类别，product_type：类型。

这是正确的格式吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T19:04:26.593

它的工作方式实际上非常简单。单击配置链接并获取该框后，您首先以逗号分隔格式将 CSV 文件中的一个或多个列的名称输入到映射列列表文本框中。然后在离开文本字段后单击，您刚刚输入的每个值都会出现一个新的文本字段，您只需填写您希望原始映射的列的名称

因此，要使用您的示例，您有 sku_name、category_name 和 product_type 列，并且您希望将它们分别映射到 sku、category 和 type。因此，在映射列列表文本字段中，输入 sku_name、category_name、product_type。然后在将鼠标单击文本字段后，将出现三个新的文本字段，一个用于您刚刚输入的三列值中的每一个。从那里，只需用相应的值填写表单的其余部分，在我们的例子中是 sku、类别和类型，你就可以开始了。

同样的事情也可以应用于其他插件的配置。这实际上就是我发现列映射器如何工作的方式。我正在阅读默认值设置器插件的 wiki 页面（http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Default_Values_setter），它提到点击会导致新的文本字段出现，这让我想知道同样的原则是否适用于其他插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T11:32:26.330

我有这个作为列：

```
_store,_attribute_set,_type,_category,_root_category,_product_websites 
```

我刚刚将它们输入到“映射列列表”输入中，并在此输入动态生成的输入下关注 JavaScript 构建，例如：

```
New name for col _store

New name for col _attribute_set

New name for col _type

New name for col _category

New name for col _root_category

New name for col _product_websites 
```

如果您没有这种行为，请确保您已打开 JavaScript，并且没有其他 JavaScript 错误会破坏此脚本。

玩得开心！

# java - 如何将数据插入其列是动态定义的摆动表（来自mysql数据库的数据）？

> ID：13439372
> 
> 赞同：1
> 
> 时间：2012-11-18T10:37:40.257
> 
> 标签：java, mysql, swing, jtable, jtableheader

我有一个表，在打开一个框架时，该表从 mysql 数据库中的一个表中接收它的列和它们各自的标题。如何将 sql 数据库表中的所有值插入到 swing 表中？这是我的代码...

```
DefaultTableModel dtm=(DefaultTableModel)jTable1.getModel();
String query1=null;
try    {
  query1="select * from "+Variables.table+";";
  ResultSet rsft=st.executeQuery(query1);  
  Object o[]=new Object[x];  
  while(rsft.next()) {                
    for(int i=1;i<=x;i++){
      o[i-1]=rsft.getString(i);
    }
    dtm.addRow(o);
  }
} catch(Exception e) {
  System.out.println(e.getMessage());  
} 
```

在上面的代码中，x 是一个整数，表示 sql 表中的列数。而 Variables.table 是一个包含表名的静态变量。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:52:15.573

问题是它`getColumnCount`仍然会返回 0，尽管您添加了一些行。打电话`setColumnCount`也行。

您可以在源代码中验证这一点，或者只是执行快速测试，例如

```
import javax.swing.table.DefaultTableModel;

public class DefaultTableModelDemo {
  public static void main( String[] args ) {
    DefaultTableModel defaultTableModel = new DefaultTableModel();
    defaultTableModel.addRow( new Object[]{"Test", "Test"} );
    System.out.println( "defaultTableModel.getRowCount() = " + 
       defaultTableModel.getRowCount() );
    System.out.println( "defaultTableModel.getColumnCount() = " + 
       defaultTableModel.getColumnCount() );
  }
} 
```

给出以下输出

```
defaultTableModel.getRowCount() = 1
defaultTableModel.getColumnCount() = 0 
```

首先创建一个数据向量可能更容易，然后创建一个新的`TableModel`并替换现有`TableModel`的`JTable`.

补充说明：

*   由于`dtm`已经用于 a `JTable`，您应该只在事件调度线程上更新它。但是数据库连接/查询通常是“慢”的，不应该在 EDT 上执行。`addRow`您可以通过将每个调用包装在一个调用中来避免这种情况，`SwingUtilities#invokeXXX`或者只是在后台线程上构造一个新`TableModel`线程并在 EDT 上一次性替换模型。有关更多信息，请参阅[Swing 并发教程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。
*   不要忘记`close`在`ResultSet`finally 块中

# android - 尝试访问活动时出现空指针异常

> ID：13439377
> 
> 赞同：0
> 
> 时间：2012-11-18T10:38:17.840
> 
> 标签：android, variables, android-activity, nullpointerexception

尝试访问我的活动并更改一些整数时，我收到了 nullpointerexception。这是它的样子： *MainActivity.java*

```
 public class MainActivity extends Activity {

    public static SoundManager mSoundManager = new SoundManager();

    private static final String TAG = MainActivity.class.getSimpleName();

     private MainGamePanel gamePanel;
     SharedPreferences myPrefs;

     public int win = 0;
     public int fail = 0;

     int wins = 0;
     int fails = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    // requesting to turn the title OFF
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    // making it full screen
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    // set our MainGamePanel as the View
    setContentView(new MainGamePanel(this));

    myPrefs = this.getSharedPreferences("hgbdata", 0);

        try {
        wins = myPrefs.getInt("wins", 0);
        fails = myPrefs.getInt("fails", 0);
        if ((wins != 0) && (fails != 0)) {
        gamePanel.winn = wins;
        gamePanel.failn = fails;
        }
        } catch (NullPointerException npe) {
            Log.d(TAG, "Nothing to load");
        }

    //INIT SOUND
    mSoundManager.initSounds(getBaseContext());
    //SOUNDS
    mSoundManager.addSound(1, R.raw.draw);
    mSoundManager.addSound(2, R.raw.cheer);
    mSoundManager.addSound(3, R.raw.boo);

    }

. . .

public void win() {
    win++;
}

public void fail() {
    fail++;
}

} 
```

这是我试图从以下位置进行活动的地方： *MainGamePanel.java*

```
public class MainGamePanel extends SurfaceView implements
SurfaceHolder.Callback {

private static final String TAG = MainGamePanel.class.getSimpleName();

private MainThread thread;
private MainActivity activity;

. . .

public void update() {

//somewhere inside the update()
activity.win();

. . .

activity.fail();

}

} 
```

这是日志：

```
11-18 10:23:47.336: D/MainThread(1190): Starting game loop
11-18 10:23:47.336: D/MainThread.initTimingElements()(1190): Timing elements for stats initialised
11-18 10:23:47.386: D/gralloc_goldfish(1190): Emulator without GPU emulation detected.
11-18 10:24:19.925: D/dalvikvm(1190): GC_CONCURRENT freed 356K, 2% free 28540K/28999K, paused 132ms+30ms, total 441ms
11-18 10:24:20.965: W/dalvikvm(1190): threadid=13: thread exiting with uncaught exception (group=0x40a13300)
11-18 10:24:20.965: E/AndroidRuntime(1190): FATAL EXCEPTION: Thread-105
11-18 10:24:20.965: E/AndroidRuntime(1190): java.lang.NullPointerException
11-18 10:24:20.965: E/AndroidRuntime(1190):     at com.nti.hanga.gubbe.MainGamePanel.update(MainGamePanel.java:591)
11-18 10:24:20.965: E/AndroidRuntime(1190):     at com.nti.hanga.gubbe.MainThread.run(MainThread.java:92)
11-18 10:24:21.235: I/AndroidRuntime(1190): VM exiting with result code 0, cleanup skipped. 
```

`MainGamePanel.java:591`是`activity.win();`

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:55:33.710

You shouldn't even try to reference your activity from the SurfaceView.

Define an interface and use a callback to let the activity know that the game is over.

```
public Interface GameOverListener {
    void onGameOver(boolean won);
} 
```

In your custom surface view

```
ArrayList<GameOverListener > listeners = new ArrayList<GameOverListener >();

...

public void setGameOverListener(GameOverListener listener){
    listeners.add(listener);
} 
```

In your update event

```
for (GameOverListener listener:listeners){
   listener.onGameOver(gameWon?true:false); // here you pass true if they won, false if they lost
} 
```

In your Activity:

```
public class MainActivity extends Activity implements GameOverListener {

...

@Override
public void onCreate(Bundle savedInstanceState) 
{
    ... 
    gamePanel.setGameOverListener(this);
    ...
}

public void onGameOver(boolean won){
   if (won){
      // they won!
   } else {
      // they lost!
   }
} 
```

You could improve the surface view class by adding removeGameOverListener and checking that you do not add the same listener twice in setGameOverListener.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:42:42.763

如果其中一个`activity.win()`或在文件`activity.fail()`的行`591`上`MainGamePanel.java`，则可能意味着`activity == null`. 你确定你已经初始化了吗？

# android - Android：将两个不同的应用程序合并为一个

> ID：13439380
> 
> 赞同：0
> 
> 时间：2012-11-18T10:38:24.533
> 
> 标签：android, android-layout, android-intent, android-emulator, android-ndk

我有两个不同应用程序的源代码。在一个单独的项目中，我想启动一个应用程序，如果用户单击选项 1，则转到第一个应用程序，如果单击下一步按钮，则转到其他应用程序。我用按钮制作了一个主页。现在我该如何完成这个任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:52:02.523

如果您必须使用应由第三方（您的）启动的应用程序，请确保将这两个安装在您的设备上并通过`Intent`您的第三方启动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:30:59.800

这很容易。查看`/system/bin/am`命令（此处：[如何从命令行启动 Android 应用程序？](https://stackoverflow.com/questions/6613889/how-to-start-an-android-application-from-the-command-line)）。您可以使用`Runtime.getRuntime().exec()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:39:06.393

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("PACKAGE NAME OF THE OTHER APPLICATION");
startActivity(LaunchIntent); 
```

将“其他应用程序的包名称”替换为您要运行的应用程序的包名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-08T06:56:50.647

您可以使用 2 个按钮创建一个新 Activity 并将其设为 MainActvity。从按钮 1 调用第一个应用程序的 MainActivity，从第二个按钮调用第二个应用程序的 MainActivity，使用 Intent 和 startActivity()。

并在 AndroidManifest.xml 中进行必要的更改

# javascript - 使用一个 onclick 功能隐藏许多 div

> ID：13439382
> 
> 赞同：0
> 
> 时间：2012-11-18T10:38:47.557
> 
> 标签：javascript, onclick

我正在为这个问题寻找一个 Javascript 解决方案。我有以下 HTML：

```
<div id = "container">
  <div id = "data">
    <div>
      <h3> Address</h3>
      <b>Expand...</b>
      <div id="content">ul. Pomorska</div>
    </div>
    <div>
      <h3> Telefon </h3> <b>Expand...</b>
      <div id="content">26565352</div>
    </div>
    <div>
      <h3>Email</h3>
      <b>Expand...</b>
      <div id="content">asdasdag@aga.com</div>
    </div>
  </div>
</div> 
```

我想在进行 onclick Expand 时隐藏内容 div。到目前为止，我已经制作了一个隐藏内容 div 并尝试为节点分配事件处理程序的函数。

```
function hideinfo() {
  var node = document.getElementById("data");
  var contactdata = node.getElementsByTagName("div");
  for(var i=0; i<contactdata.length;i++) {
    if(contactdata[i].id == "content") {
      alert(contactdata[i].previousSibling.innerHTML);
      contactdata[i].previousSibling.addEventListener('click',ShowHide,false);
      contactdata[i].style.display="none";
    }
  }
} 
```

问题是警报显示未定义。为什么看不到节点？有没有更好的方法在 Javascript 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:52:48.023

> The previousSibling property returns the previous sibling node (the previous node in the same tree level) of the selected element

which returns in your case the TEXT node.

As you can see in this jsfiddle: [http://jsfiddle.net/Xu383/](http://jsfiddle.net/Xu383/)

```
alert(contactdata[i].previousSibling.nodeName); 
```

You are better of using the querySelectorAll.

Also you can't have multiple divs with the SAME id, use class instead.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T10:48:12.310

因为`previousSibling`很可能是`div`元素之前的文本节点。你可能想[`previousElementSibling`](https://developer.mozilla.org/en-US/docs/DOM/Element.previousElementSibling)改用:)

在当今的大多数浏览器中，[querySelectorAll](https://developer.mozilla.org/en-US/docs/DOM/Document.querySelectorAll)允许您使用 CSS 选择器来查找元素，也是一个不错的选择（IE8+）

# eclipse - 泽西岛：找不到 Java 类和 MIME 媒体类型应用程序/json 的消息正文编写器

> ID：13439386
> 
> 赞同：24
> 
> 时间：2012-11-18T10:39:15.810
> 
> 标签：eclipse, json, jersey, message, mime

在试图弄清楚我的问题是什么之后，我终于决定问你如何解决我的问题。我见过不同的人有同样的问题，我尝试了他们被建议做的所有事情，但对我的问题没有任何帮助。所以基本上我有一个使用 Jersey 构建的 RESTful 服务。对于我的客户，我想以 JSON 格式返回一个对象。我阅读了不同的教程并决定使用 jersey-json-1.8 库是有意义的。我像往常一样将所有内容添加到我的项目中并尝试运行它，但每次我调用服务时（通过 get request atm。）我收到 HTTP 错误代码 500（内部服务器错误）并且我的服务器响应没有消息正文作家可以找到。如果我返回 XML，它工作得很好，一切都很好。我还尝试复制 jersey-json-1.8。jar 到我的 Tomcat lib 文件夹，因为我必须使用我正在使用的 mysql lib 执行此操作，但它也没有帮助。如果你能帮我把这些东西弄好，我会很高兴的！如果您需要更多信息，请发表评论，我会尽快提供：）

我的项目设置是： 3 个不同的包 1\. 我的 RESTfulServices 2\. 我的 Java 工作，我处理 SQL 连接等。 3\. 一个包，我存储我需要使用的所有模型并且我想以 JSON 格式返回（在我的示例中为试驾路线）

Tomcat Webserver IDE：Eclipse 我正在使用 Maven

无论我以什么方式或如何尝试返回对象，它都无法正常工作，并且我不断收到错误消息：

```
Mapped exception to response: 500 (Internal Server Error)
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class com.mykong.models.Teststrecke, and Java type class com.mykong.models.Teststrecke, and MIME media type application/json was not found 
```

编辑：这是我的 JSON 服务方法

```
@Path("/hellojson")
public class JSONService {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public ArrayList<Route> getJSONMsg()  
    {

        Route ts = new Route();
        ts.setId(1);
        ts.setName("HelloWorld");

        Route ts2 = new Route();
        ts2.setId(2);
        ts2.setName("HelloWorld");

        ArrayList<Route> availRoutes = new ArrayList<Route>();
        availRoutes.add(ts);
        availRoutes.add(ts2);

        return availRoutes;

    }
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-11-18T11:52:21.033

尝试将 Genson 库添加到您的类路径[http://owlike.github.io/genson/](http://owlike.github.io/genson/)。它是一个 json<>java 流和数据绑定 api。它与球衣很好地集成在一起，要让您运行，您需要 0 配置。Jersey 检测到该库在您的类路径中，并通过委托给 Genson 来启用 json 映射。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-06-11T12:20:46.990

在您的 POM.xml 中包含此依赖项并运行 Maven -> Update

```
<dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.18.1</version>
</dependency>
<dependency>
   <groupId>com.owlike</groupId>
   <artifactId>genson</artifactId>
   <version>0.99</version>
</dependency> 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-03-06T21:58:16.227

添加以下依赖项解决了我的问题。根据@eugen，我尝试添加`Genson`有助于摆脱异常的依赖项，但是我的服务器由于某种原因抛出了 400 个错误请求。似乎`Genson`无法正确传输 json 请求。但下面的依赖工作正常。希望它对其他人有所帮助，因为这个问题让我发疯了！

```
<dependency>
  <groupId>com.fasterxml.jackson.jaxrs</groupId>
  <artifactId>jackson-jaxrs-json-provider</artifactId>
  <version>2.3.0</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-08T09:00:20.000

将`jersey-json`依赖项移动到 pom.xml 的顶部为我解决了这个问题。

```
<dependencies>
  <dependency>
    <groupId>com.sun.jersey</groupId>
    <artifactId>jersey-json</artifactId>
    <version>1.18.1</version>
  </dependency>

  <!-- other dependencies -->

</dependencies> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-13T01:39:31.317

Check under Maven Dependencies in the Package Explorer, if you don't see that or jersey-bundle-1.8.jar, then you probably have specified just jersey-server. Change the dependency in pom.xml to jersey-bundle and it should work.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-30T05:58:00.850

这个问题是不久前提出的，但对于那些阅读，请注意 jersey servlet 容器有它自己的 POJO 映射器。

通过将以下内容添加到您的 web.xml 来启用它

```
<init-param>
    <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
    <param-value>true</param-value>
</init-param> 
```

我确实注意到 jersey 和 genson 映射对象的方式存在一些差异。例如，如果一个类有一个类型为 A 的字段，该字段设置为 B 的一个实例，它扩展了 A，genson 将不会正确序列化 B，而 jersey 会。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-11-14T16:12:15.283

Jersey 2.4：我也遇到了这个问题，并发布这个以防它帮助某人。我从 Jersey API Specification for JSON Integration 中选择了这个：（[https://jersey.java.net/documentation/latest/user-guide.html#json](https://jersey.java.net/documentation/latest/user-guide.html#json)）

我使用 Jettison 将 Jersey 与 JSON 集成。但即使在添加了所有库之后，我也得到了错误：找不到 Java 类和 MIME 媒体类型应用程序/json 的消息正文编写器

这一切都是为了添加正确的库并注册功能> 除了 Jersey 提供的所有其他库之外，我还添加了一个额外的库：jersey-media-json-jettison-2.4.jar。并添加了以下代码来注册 Jettison 功能。

```
 public class MyApplication extends ResourceConfig{
      public MyApplication() {
          register(JettisonFeature.class);
          packages("org.XXX.XXX.XXX");   
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-06T11:47:57.503

删除 @Produces(MediaType.APPLICATION_JSON); 并使用 JSONLibraries.zip 文件将您的数据与 JSON 相互转换。它工作得很好。上面代码的问题是它使用了 maven 和 jackson 的组合。因此，当您仅使用运动衫时，找不到 APPLICATION_JSON。我使用到/从 JSON 转换的东西，它给了我同样的错误，我尝试了这个解决方案，它工作正常。

代码：

```
@Path("/hellojson")
public class JSONService {

    @GET
    public ArrayList<Route> getJSONMsg()  
    {

        Route ts = new Route();
        ts.setId(1);
        ts.setName("HelloWorld");

        Route ts2 = new Route();
        ts2.setId(2);
        ts2.setName("HelloWorld");

        ArrayList<Route> availRoutes = new ArrayList<Route>();
        availRoutes.add(ts);
        availRoutes.add(ts2);

        return JSONObject.fromObject(availRoutes.toString()));
    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-07-21T08:23:37.867

上述问题将通过使用jackson库而不是genson来解决。

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.0</version>
    </dependency>

    <!-- https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind -->
    <dependency>
        <groupId>com.fasterxml.jackson.core</groupId>
        <artifactId>jackson-databind</artifactId>
        <version>2.9.2</version>
    </dependency>

    <dependency>
        <groupId>org.glassfish.jersey.media</groupId>
        <artifactId>jersey-media-json-jackson</artifactId>
        <version>2.25</version>
    </dependency> 
```

在我的情况下，genson 在响应中给出了一个空的 json，但如果我们将 json 转换为字符串会很好。但是会创建一个不需要的输出，因为在响应中你会得到一个字符串而不是 json。所以最好使用杰克逊图书馆很容易做到这一点。

注意：只有当类实现了可序列化接口时，Jackson 才会将您的响应转换为 json。因此，如果您要发送 JSONObject，那么最好发送 JSONObject 列表。

# php - php文件路径/文件扩展名未保存到sql中的数据库

> ID：13439389
> 
> 赞同：4
> 
> 时间：2012-11-18T10:41:26.957
> 
> 标签：php, sql, image, filepath

我成功地将图像加扰并将图像上传到我的数据库，但是文件路径没有保存到我的 sql 数据库中的“配置文件”选项卡中。这里有什么问题？我如何解决它。

```
include 'core/init.php';

function change_profile_image($user_id, $file_temp, $file_extn) {
$file_path = 'profile/' . substr (md5(time()), 0, 10) . '.' . $file_extn;
move_uploaded_file($file_temp, $file_path);
mysql_query("UPDATE `users` SET `profile` = " . $file_path . "' WHERE `user_id` = " . (int)$user_id);

}

 if (isset($_FILES['profile']) === true) {
    if (empty($_FILES['profile']['name']) === true) {
       echo 'y u no choose file!';
  } else {
       $allowed = array ('jpg', 'jpeg', 'gif', 'png');

       $file_name = $_FILES['profile']['name'];
       $file_extn = strtolower(end(explode ('.', $file_name)));
       $file_temp = $_FILES['profile']['tmp_name'];

       if (in_array($file_extn, $allowed) === true) {
        change_profile_image($session_user_id, $file_temp, $file_extn);

        header('Location: dontdelete.php');
        exit();

       }else {
        echo 'y u no jpg or png or gif';       

       }
  }
 }

if (empty($user_data['profile']) === false) {
    echo '<img src"', $user_data['profile'], '" alt="">'; 
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:44:38.900

您的代码行：

```
mysql_query("UPDATE `users` SET `profile` = " . $file_path . "' WHERE `user_id` = " . (int)$user_id); 
```

看着

```
`profile` = " . $file_path . "' 
```

您在开头忘记了 ' `$file_path`;)

# javascript - 如何将无序列表扩展到某个链接

> ID：13439390
> 
> 赞同：0
> 
> 时间：2012-11-18T10:41:32.767
> 
> 标签：javascript, jquery

我有一个动态构建的无序列表，如下所示，一旦使用 jquery 加载列表，我想找到一种方法来扩展具有特定 ID 的链接上方的所有节点，

例如，我可能希望将 id=1905 的链接所需的所有节点展开为可见，并让所有其他节点折叠。

希望这是有道理的。

```
 <div id="menu">
        <ul>
            <li><a class="inactive" href="#"><img src="images/folder.png">Baking</a>
                <ul>
                    <li><a class="inactive" href="#">Bars</a>
                        <ul>
                            <li><a id="1905" class="rlink" href="url">Rasberry Crumb Breakfast Bars</a></li>
                        </ul>
                    </li>
                </ul>
            </li>
            <li><a id="1803" class="rlink" href="url">text</a></li>
        </ul>
    </div> 
```

所以列表最初会像这样加载

![在此处输入图像描述](../Images/353af3840b5d41aa7ae1ee240b8048f9.png)

我想像这样扩展它

![在此处输入图像描述](../Images/43832153ae8765722b34cc8030d40ba8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T10:54:15.363

You could try going up the parent nodes of the element you want and activate them:

```
var parentList= $('#link1905').closest('ul');

while (parentList.length > 0) {
    parentList.prev('a').removeClass('inactive'); /* and/or .addClass('active'); */

    parentList = parentList.closest('ul');
} 
```

Also you must start your element id's with a letter: [What are valid values for the id attribute in HTML?](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)

# sql - sql server 正则表达式

> ID：13439397
> 
> 赞同：2
> 
> 时间：2012-11-18T10:43:04.047
> 
> 标签：sql, sql-server, regex, sql-server-2012

在 SQL Server (2012) 中，我有一个带有数值的字段。该字段的类型为`int`。假设数据库中的字段包含`123456789`. 我正在这样搜索：

```
select * from table1 where field1 like '[1-9]{0,2}3456789' 
```

我也试过`'^[1-9]{0,2}$3456789'`

两者都不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T10:46:40.850

SQL Server 本身不支持正则表达式。您需要为此安装 CLR 程序集。

`LIKE`模式语法不支持量词，因此在不使用 CLR 的情况下，唯一的选择是将其扩展。

```
where field1 like '3456789' 
 or  field1 like '[1-9]3456789'  
 or  field1 like '[1-9][1-9]3456789' 
```

# django - Django 视图有一个意外的关键字参数

> ID：13439399
> 
> 赞同：8
> 
> 时间：2012-11-18T10:43:11.340
> 
> 标签：django, python-2.7

我有以下网址模式：

```
urlpatterns = pattern('',
    ...
    url(r'edit-offer/(?P<id>\d+)/$', login_required(edit_offer), name='edit_offer'),
) 
```

和相应的 edit_offer 视图：

```
def edit_offer(request, id):
  # do stuff here 
```

报价页面上的链接导致编辑报价视图：

```
<a class="btn" href="{% url edit_offer offer.id %}">Edit</a> 
```

单击按钮会引发 TypeError：

```
edit_offer() got an unexpected keyword argument 'offer_id' 
```

有什么想法吗？我看不出这里有什么问题。我有其他类似模式的视图，它们都工作正常。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-18T10:45:08.483

试试这个：

你的`urls.py`：-

```
urlpatterns = pattern('whatever_your_app.views',
    ...
    url(r'edit-offer/(?P<id>\d+)/$', 'edit_offer', name='edit_offer'),
) 
```

你的`views.py`：-

```
from django.contrib.auth.decorators import login_required

...

@login_required
def edit_offer(request, id):
    # do stuff here 
```

在你的`template`:-

```
{% url 'edit_offer' offer.id %} 
```

# c++ - 为什么 chrono 有自己的命名空间？

> ID：13439401
> 
> 赞同：18
> 
> 时间：2012-11-18T10:43:30.843
> 
> 标签：c++, c++11, chrono

到目前为止，我在 C++ 标准库中看到的所有其他内容都在`std`命名空间中。如果我使用的东西`std::chrono`通常超过每行 80 个字符的限制 - 这不是问题，只是不方便。

所以这是我的简单问题：为什么 chrono 标头有自己的命名空间？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-18T16:28:09.430

[我是计时提案](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2661.htm)的主要作者。子命名空间不是我的第一选择，只是因为冗长。我发现自己`using namespace std::chrono`几乎每次使用该设施时都在写作。

然而，这是一个非常有争议的提议。许多人，包括我的一些合著者，强烈认为子命名空间是合适的。我没有强烈反对子命名空间，因为我们处于需要妥协的空间，或者像美国国会一样陷入僵局。:⁠-⁠) 这种死锁的结果可能是 C11 的`timespec`.

boost 比 std 更积极地尝试子命名空间，本文的主要作者之一也是 chrono 演变而来的 boost 日期时间库的作者。所以这显然会对使用子命名空间有很大的吸引力。

展望未来，子命名空间很可能将成为绝对必需的。想象一下，如果我们添加包含 12 月缩写的日历服务：`dec`. 这将直接与以下冲突：

```
ios_base& dec(ios_base& str); 
```

在`<ios>`. 所以总而言之，我从一开始就没有坚持使用子命名空间可能是错误的。:⁠-⁠) 展望未来，观察委员会在哪里创建子命名空间和不创建子命名空间将会很有趣。

**更新（6年后...）**

真相总是比小说离奇...

所以我*确实*提出`std::chrono::dec`了 的缩写`December`，认为由于嵌套的`chrono`命名空间，这将是安全的。但是没有，由于潜在的冲突，委员会决定在标准化过程中重命名`std::chrono::dec`为。`std::chrono::December`

那么嵌套命名空间值得吗？

我不知道。此更新是一个数据点，而不是意见。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T13:02:32.710

还有其他命名空间，例如`std::placeholders`. 最终，在 C++03 中，委员会没有选择子命名空间，但现在很明显，`std`命名空间正变得严重超载。因此，我希望 C++14 的许多库提案将使用子命名空间来用于更大的组件组织。

# jquery - 用jquery从数组中删除一个值

> ID：13439403
> 
> 赞同：0
> 
> 时间：2012-11-18T10:44:06.363
> 
> 标签：jquery, arrays

```
<div id="values">10 67 87 100 56</div>

<div id="#val1">87</div> 
```

单击带有 jquery 的#val1 时，如何从数组中删除 87 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:57:19.663

另一种方法可能是这样的：

```
​$(function​ () {
    $("#val1").click(function() {
        var arr = $("#values").text().split(" "); // Create an array of the values
        var toRemove = $(this).text(); // Get the value to remove

        // Remove the value
        arr = $.grep(arr, function(value) {
            return value != toRemove;
        });

        // Add the new array back as text (without the removed value)
        $("#values").text(arr.join(" "));
    });
});​ 
```

[在这里看小提琴](http://jsfiddle.net/VFZ2b/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T10:46:55.983

尝试类似的东西

```
var y = [10, 67, 87 ,100 ,56] //or $("#values").text().split(' ');
var removeItem = 67;

y = jQuery.grep(y, function(value) {
  return value != removeItem;
}); 
```

[**提琴手**](http://jsfiddle.net/uqyXb/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T10:47:29.937

好吧，您在这里并不是真的在谈论数组。只是`<div>`元素中的一些文本值。

你可以做的是从这样的现有值创建一个数组 -

```
var selection = $("#val1").text();
var divValues = $("#values").text().split(' '); 
```

然后组装一个新数组，该数组仅包含与所选值不匹配的值（在本例中`87`）。

```
var newValues = [];
$.each(divValues,function(index,value){
  if (value != selection){
    newValues.push(value);
  }
}); 
```

现在我们将数组值重新连接在一起，以返回我们之前提取的文本内容。

```
$("#values").text(newValues.join(' ')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T11:03:22.130

如果`#values`包含由空格分隔的类似数组的数据，那么您可以执行以下操作：

```
 $('#val').click(function () {
            var delVal = $("#val").text();
            var arr = $("#values").text().split(' ');
            $("#values").html("");
            for (i = 0; i < arr.length; i++) {
                if (arr[i] != delVal)
                    $("#values").append(arr[i] + " ");
            }
        }); 
```

**在 jsFiddle 中检查**：http : [//jsfiddle.net/Milian/buNaM/](http://jsfiddle.net/Milian/buNaM/)

# php - 将 XLSX 文件导入 PHP 数组

> ID：13439411
> 
> 赞同：17
> 
> 时间：2012-11-18T10:45:13.320
> 
> 标签：php, xlsx

是否可以将 XLSX 文件的每一行导入 PHP 数组中的一行？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2015-05-01T21:01:48.900

您可以使用此处提供的 PHPExcel：[https ://phpexcel.codeplex.com/releases/view/119187](https://phpexcel.codeplex.com/releases/view/119187)

这是我用来读取`xls`或读取`xlsx`数组的内容：

```
require_once('/path/to/PHPExcel.php');

$filename = "example.xlsx";
$type = PHPExcel_IOFactory::identify($filename);
$objReader = PHPExcel_IOFactory::createReader($type);
$objPHPExcel = $objReader->load($filename);

foreach ($objPHPExcel->getWorksheetIterator() as $worksheet) {
    $worksheets[$worksheet->getTitle()] = $worksheet->toArray();
}

print_r($worksheets); 
```

**更新/ 2022-02-13：**

[PhpSpreadsheet](https://phpspreadsheet.readthedocs.io/en/latest/)已经推出几年了，它已经取代了 PHPExcel。以下代码或多或少与上面相同，但有一些小的改进：

1.  将代码转换为函数或方法。
2.  自动检测文件类型。
3.  添加了指定如何处理空值、格式和公式的能力。
4.  最重要的是，调用析构函数并清除内存。如果没有这最后一步，我在加载大文件后总是内存不足。

```
/**
 * Create a multidimensional array of worksheets from a filename.
 *
 * @param mixed $nullValue Value returned in the array entry if a cell doesn't exist
 * @param bool $calculateFormulas Should formulas be calculated?
 * @param bool $formatData Should formatting be applied to cell values?
 *
 * @return array
 */
function spreadsheet_to_array($nullValue = null, $calculateFormulas = true, $formatData = false) {
    $results = [];
    $spreadsheet = \PhpOffice\PhpSpreadsheet\IOFactory::load($file);
    foreach ($spreadsheet->getWorksheetIterator() as $worksheet) {
        $results[$worksheet->getTitle()] = $worksheet->toArray($nullValue, $calculateFormulas, $formatData);
    }
    // save memory
    $spreadsheet->__destruct();
    $spreadsheet = NULL;
    unset($spreadsheet);
    return $results;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2015-07-06T00:39:55.857

我用这个：

```
include 'simplexlsx.class.php';
$xlsx = @(new SimpleXLSX('myFile.xlsx'));
$data =  $xlsx->rows(); 
```

[你可以从这里](http://www.spyrozone.net/hacking/2011/05/php-parse-and-retrieve-data-from-xlsx-files.jsp)simplexslx 。

**更新**

显然上面的链接不再起作用了。您现在可以使用[此](https://github.com/shuchkin/simplexlsx). （感谢@Basti）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-09-25T14:08:58.040

可以使用[PHPExcel](https://github.com/PHPOffice/PHPExcel)库解决问题：

```
$data = [];

$type = PHPExcel_IOFactory::identify($filepath);
$objReader = PHPExcel_IOFactory::createReader($type);

$objPHPExcel = $objReader->load($filepath);

$rowIterator = $objPHPExcel->getActiveSheet()->getRowIterator();
foreach($rowIterator as $row){
    $cellIterator = $row->getCellIterator();
    foreach ($cellIterator as $cell) {
        $data[$row->getRowIndex()][$cell->getColumn()] = $cell->getCalculatedValue();
    }
} 
```

$filepath - xls 或 xlsx 文件的路径。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-13T14:05:31.660

是的[phpspreadsheet](https://phpspreadsheet.readthedocs.io/en/latest/)：

```
 include 'vendor/autoload.php';
        if($_FILES["import_excel"]["name"] != '')
        {
            $allowed_extension = array('xls', 'csv', 'xlsx');
            $file_array = explode(".", $_FILES["import_excel"]["name"]);
            $file_extension = end($file_array);
            if(in_array($file_extension, $allowed_extension))
            {
                $file_name = time() . '.' . $file_extension;
                move_uploaded_file($_FILES['import_excel']['tmp_name'], $file_name);
                $file_type = \PhpOffice\PhpSpreadsheet\IOFactory::identify($file_name);
                $reader = \PhpOffice\PhpSpreadsheet\IOFactory::createReader($file_type);
                $spreadsheet = $reader->load($file_name);
                unlink($file_name);
                $data = $spreadsheet->getActiveSheet()->toArray();
                foreach($data as $row)
                {
                    $insert_data = array(
                        ':test1'          =>  $row[0],
                        ':test2'          =>  $row[1],
                        ':test3'          =>  $row[2],
                        ':test4'          =>  $row[3]
                    );
                 };
                $query = "
                    INSERT INTO post
                    (  test1, test2, test3, test4)
                    VALUES
                    ( :test1, :test2, :test3, :test4)
                ";
                $statement = $connect->prepare($query);
                $statement->execute($insert_data);
             }
             echo "succes";
        }else{
           echo "only xls,csv,xlsx are allowed";
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-20T15:38:28.080

```
<?php
require_once 'SimpleXLSX.php';

if ( $xlsx = SimpleXLSX::parse('pricelist.xlsx') ) {
  print_r( $xlsx->rows() );
} else {
  echo SimpleXLSX::parseError();
}
?> 
```

[简单XLSX](https://github.com/shuchkin/simplexlsx)

# hadoop - 在 hadoop 上使用 udf 运行 pig 脚本

> ID：13439413
> 
> 赞同：0
> 
> 时间：2012-11-18T10:45:19.717
> 
> 标签：hadoop, apache-pig, hadoop-streaming

我是hadoop和猪的新手。我想知道如何运行内部调用 UDF 方法的猪脚本？问题是我没有看到像 Pig UDF 手册网站上提到的“注册 blah.jar”语句：

```
register myudfs.jar;
A = load 'student_data' as (name: chararray, age: int, gpa: float);
B = foreach A generate flatten(myudfs.Swap(name, age)), gpa;
C = foreach B generate $2;
D = limit B 20;
dump D; 
```

但我确实看到了一个包含“blah.jar”的“jar”目录。我的同事已经离开了，所以我想知道有什么诀窍？也许我可以将 jar 文件添加到命令行？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T21:41:06.920

如果脚本中没有`REGISTER`语句（并且脚本有效），那么它不会调用任何 UDF，可能除了 Pig 的任何[内置函数](http://ofps.oreilly.com/titles/9781449302641/udf_lists.html)。如果您想使用 UDF，则需要`REGISTER`声明。 `REGISTER`如果没有调用 UDF，则没有必要，这可能是您在脚本中看不到它的原因。

[这](http://ofps.oreilly.com/titles/9781449302641/writing_udfs.html)是编写 UDF 的一个很好的参考。编写完成后，您需要将其编译成 jar 文件，并确保还包括它所依赖的任何类（例如 EvalFunc）。这是你要的罐子`REGISTER`。

# java - 迭代地连接整数数组

> ID：13439415
> 
> 赞同：1
> 
> 时间：2012-11-18T10:45:22.383
> 
> 标签：java, arrays

我有一个方法`in2.getImagesOneDim()`，它给了我一个整数数组，更准确地说是图像的像素值。现在我想创建一个包含所有图像的所有像素值的大数组。因此，我必须多次调用此方法。现在我想将前一个输出连接到当前输出，直到所有图像都被读取。

在某种伪代码中，其中 + 是一个连接 ... ：

```
 for (int i = 1; i < 25; i++) {
  ConArray = ConArray + in2.getImagesOneDim("../images/"+i);
 } 
```

我将如何在 java 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:34:44.987

将大问题拆分为许多小问题，您会找到方法：

1.  将每个图像读入单独的数组
2.  计算总大小
3.  加入子数组

查看示例

```
import java.util.Arrays;

public class ImageProgram {

    public static void main(String[] args) {
        System.out.println(Arrays.toString(new ImageReader().readImages()));
    }
}

class ImageReader {

    public int[] readImages() {
        int[][] images = readImagesInto2DArray();
        return makeOneDimensionArray(images);
    }

    private int[] makeOneDimensionArray(int[][] arrays) {
        int totalLength = computeTotalLength(arrays);
        int[] array = new int[totalLength];
        int destPos = 0;
        for (int[] subArray : arrays) {
            System.arraycopy(subArray, 0, array, destPos, subArray.length);
            destPos += subArray.length;
        }
        return array;
    }

    private int computeTotalLength(int[][] arrays) {
        int length = 0;
        for (int[] subArray : arrays) {
            length += subArray.length;
        }
        return length;
    }

    private int[][] readImagesInto2DArray() {
        int size = 24;
        int[][] result = new int[size][];
        for (int i = 0; i < size; i++) {
            result[i] = readArray(i + 1);
        }
        return result;
    }

    private int[] readArray(int index) {
        // read from file
        int[] result = new int[index];
        Arrays.fill(result, index);
        return result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T10:51:27.763

```
List<int[]> pixels = new ArrayList<int[]>();
for (int i = 1; i < 25; i++) {
    pixels.add(in2.getImagesOneDim("../images/"+i));
}
return pixels; 
```

现在您有了所有数据的列表，您可以使用`pixels.get(index);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:20:39.003

您可以使用该`Collections#addAll`方法。

```
List<Integer> allIntegers = new ArrayList<Integer>();

for (int i = 1; i < 25; i++) {
    Integer[] imageIntegers = in2.getImagesOneDim("../images/"+i);
    allIntegers.addAll(Arrays.asList(imageIntegers));
}

return allIntegers.toArray(); 
```

# scala - Sbt 打包命令不要复制资源

> ID：13439417
> 
> 赞同：8
> 
> 时间：2012-11-18T10:45:37.390
> 
> 标签：scala, sbt

我将 sbt 用于一个简单的小型 GUI 项目，该项目从`src/main/scala/resources`. 起初，一切正常，我可以`compile`。`package`, 和`run`. 生成的 jar 和 class 文件中都有资源文件夹。然后我执行`clean`命令。我重新运行`compile`and `package`，突然应用程序崩溃了。我检查了生成的jar和classes，发现这次`resources`没有复制文件夹。

现在运行应用程序可以让我`NullPointerException`指向加载资源的行（图标）。

我没有更改 sbt 构建文件或项目中的任何内容。只需运行`clean`并重新运行`compile`和`package`. 我不知道从哪里开始寻找问题。我应该从哪里开始寻找？我究竟做错了什么？

**编辑（最小的例子）**

该项目是来自 typesafe 的 g8 ( [https://github.com/typesafehub/scala-sbt.g8](https://github.com/typesafehub/scala-sbt.g8) ) 的标准 Scala 模板。这是我的`Build.Scala`：

```
import sbt._
import sbt.Keys._

object ObdscanScalaBuild extends Build {
  val scalaVer = "2.9.2"

  lazy val obdscanScala = Project(
    id = "obdscan-scala",
    base = file("."),
    settings = Project.defaultSettings ++ Seq(
      name := "project name",
      organization := "thesis.bert",
      version := "0.1-SNAPSHOT",
      scalaVersion := scalaVer,
      // add other settings here

      // resolvers

      // dependencies
      libraryDependencies ++= Seq (
        "org.scala-lang" % "scala-swing" % scalaVer,
        "org.rxtx" % "rxtx" % "2.1.7"
      )
    )
  )
} 
```

它以前可以很好地构建代码。这是项目代码目录结构：

![在此处输入图像描述](../Images/4e8af7f7e7dbbf56195d0f5bc23f032c.png)

它工作正常，首先在 jar 中输出这个目录：

![在此处输入图像描述](../Images/1f31b602667ed4e4da3708ba1942f068.png)

突然之间，当我通过 sbt 控制台执行`clean`and`compile`命令时，它不再复制 jar 或类目录（目标内部）中的资源目录。我现在无法将资源目录复制到目标，除非恢复以前的版本并再编译一次。我通过 Windows 的历史备份恢复以前的版本。

够清楚吗？我需要补充什么吗？

**编辑：**

将文件移动到 后`src/main/resources`，编译后的文件现在包含资源。但是现在，我不能在eclipse中运行它。这是我的代码：

```
object ControlPanelContent {
  val IconPath = "/icons/"
  val DefaultIcon = getClass.getResource(getIconPath("icon"))

  def getImage(name: String) = {
    getClass.getResource(getIconPath(name))
  }

  def getIconPath(name: String) = {
    IconPath + name + ".png"
  }
}

case class ControlPanelContent(title: String, iconName: String) extends FlowPanel {
  name = title
  val icon: ImageIcon = createIcon(iconName, 64)

  val pageTitle = new Label(title)

  protected def createIcon(name: String, size: Int): ImageIcon = {
    val path: Option[URL] = Option(ControlPanelContent.getImage(name))

    val img: java.awt.Image = path match {
      case Some(exists) => new ImageIcon(exists).getImage
      case _            => new ImageIcon(ControlPanelContent.DefaultIcon).getImage
    }
    val resizedImg = img.getScaledInstance(size, size, Image.SCALE_SMOOTH)
    new ImageIcon(resizedImg)
  }
} 
```

TLDR 版本是这样的，我猜：

```
getClass.getResource("/icons/icon.png") 
```

如果我从`sbt console`命令中调用，它会起作用。这是我从以下位置调用代码时的结果`sbt console`：

```
scala> getClass.getResource("/icons/icon.png")
res0: java.net.URL = file:/project/path/target/scala-2.9.2/classes/icons/icon.png 
```

运行时会出现以下异常：

```
Caused by: java.lang.NullPointerException
    at javax.swing.ImageIcon.<init>(Unknown Source)
    at thesis.bert.gui.ControlPanelContent.createIcon(ControlPanel.scala:54)
    at thesis.bert.gui.ControlPanelContent.<init>(ControlPanel.scala:33)
    at thesis.bert.gui.controls.DTC$.<init>(Diagnostics.scala:283)
    at thesis.bert.gui.controls.DTC$.<clinit>(Diagnostics.scala)
    ... 60 more 
```

**编辑 2：**它现在可以工作了。我刚刚从 Eclipse 中删除了该项目，重新运行`sbt eclipse`，它神奇地工作。不知道为什么（也许是缓存？）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-25T19:35:57.240

资源的 SBT 约定是将它们放入`src/main/resources/`，而不是`src/main/scala/resources/`. 尝试将您的`resources`文件夹上移一级。然后应该包含它的内容，这意味着您将在生成的 jar 文件中获取`icons`和`indicator`文件夹（直接在根级别，而不是在`resources`文件夹中）。

如果您将资源放在 scala 中，我认为它只复制已编译的文件（即`.class`由 scala 编译产生的文件）。

如果它不能解决您的问题，您可以发布用于加载资源的代码行吗？

# jquery - 以颜色显示 jquery themeroller 图标

> ID：13439418
> 
> 赞同：2
> 
> 时间：2012-11-18T10:45:53.893
> 
> 标签：jquery, jquery-ui, themeroller, jquery-ui-theme

大厅，

我正在使用 jquery themeroller 警报图标。我希望这个图标以不同的颜色显示。例如，此图标在错误消息中显示为红色，在警告消息中显示为黄色。下面是默认图标。

```
<span class="ui-icon ui-icon-alert"></span> 
```

是否可以为 Jquery 图标添加颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:53:34.823

您可以使用主题滚轮更改图标的颜色以及几乎所有其他内容，如下所示：

[http://tinyurl.com/cjdquub](http://tinyurl.com/cjdquub)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T15:50:19.370

您可以使用主题滚轮或其他软件构建您的样式图标集框架，然后根据您的需要为不同的 css 类指定不同的背景图像 URL。

例如：

```
red color <span class="ui-icon ui-icon-alert red"></span>
<br><br>
blue color <span class="ui-icon ui-icon-alert blue"></span> 
```

CSS：

```
.ui-icon.red { background-image: url(http://code.jquery.com/ui/1.9.1/themes/base//images/ui-icons_cd0a0a_256x240.png); }
.ui-icon.blue { background-image: url(http://rhizosphere.googlecode.com/hg-history/e546f1a44825e2e1568de9d5bb87d3f2b1f41acd/src/stylesheets/blue/images/ui-icons_6391de_256x240.png); } 
```

所以核心的 jQuery UI css 是一样的，你只需覆盖特定的属性。

这是一个工作小提琴：http: [//jsfiddle.net/rrbn3/](http://jsfiddle.net/rrbn3/)

# python - 使用 XLRD 遍历列中的行

> ID：13439420
> 
> 赞同：2
> 
> 时间：2012-11-18T10:46:10.423
> 
> 标签：python, amazon, xlrd, xlutils, bottlenose

我已经能够让列在单独的列表中输出列的值。但是我需要保留这些值并一一使用它们来执行亚马逊查找。亚马逊查找不是问题。让 XLRD 一次给出一个值一直是个问题。是否还有一种在 Python 中设置时间的有效方法？我发现计时器问题的唯一答案是记录进程开始的时间并从那里开始计数。我宁愿只是一个计时器。这个问题有点两部分，这是我到目前为止所做的。

我使用 argv[1] 使用 xlrd 加载电子表格，然后使用 argv[2] 将其复制到新的电子表格名称；argv[3] 我需要成为计时器实体，但我还没有那么远。

我努力了：

```
import sys
import datetime
import os
import xlrd
from xlrd.book import colname
from xlrd.book import row
import xlwt
import xlutils
import shutil
import bottlenose

AMAZON_ACCESS_KEY_ID = "######"
AMAZON_SECRET_KEY = "####"

print "Executing ISBN Amazon Lookup Script -- Please be sure to execute it python amazon.py input.xls output.xls 60(seconds between database queries)"

print "Copying original XLS spreadsheet to new spreadsheet file specified as the second arguement on the command line."

print "Loading Amazon Account information . . "

amazon = bottlenose.Amazon(AMAZON_ACCESS_KEY_ID, AMAZON_SECRET_KEY)
response = amazon.ItemLookup(ItemId="row", ResponseGroup="Offer Summaries", SearchIndex="Books", IdType="ISBN")
shutil.copy2(sys.argv[1], sys.argv[2])

print "Opening copied spreadsheet and beginning ISBN extraction. . ."
wb = xlrd.open_workbook(sys.argv[2])

print "Beginning Amazon lookup for the first ISBN number."
for row in colname(colx=2):
    print amazon.ItemLookup(ItemId="row", ResponseGroup="Offer Summaries", SearchIndex="Books", IdType="ISBN") 
```

我知道这有点模糊。我是否应该尝试做一些类似 column = colname(colx=2) 的事情，然后我可以为 row in column 做：非常感谢任何帮助或指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:33:56.797

在您的代码中使用的`colname()`只是要返回列的**名称**（例如，除非您覆盖了名称，否则在您的情况下默认为“C”）。此外，colname 的使用超出了工作簿内容的上下文。我认为您可能希望使用正在加载的工作簿中的特定工作*表*，并且在该工作表中您希望引用列的值（在您的示例中为 2），这听起来有点正确吗？

```
wb = xlrd.open_workbook(sys.argv[2])

sheet = wb.sheet_by_index(0)
for row in sheet.col(2):
        print amazon.ItemLookup(ItemId="row", ResponseGroup="Offer Summaries", SearchIndex="Books", IdType="ISBN") 
```

尽管我认为查看对`amazon.ItemLookup()`您的调用可能想要引用`row`而**不是**因为`"row"`后者只是一个字符串，而前者是`row`从您的 for 循环命名的变量的实际内容。

# sql - 如何为分层数据执行 WHERE NOT IN？

> ID：13439422
> 
> 赞同：0
> 
> 时间：2012-11-18T10:46:22.333
> 
> 标签：sql, sql-server-2005, hierarchical-data, hierarchical-query

我有一个表，它是点之间的路径列表。我想创建一个查询以从给定点返回带有 pointID 和范围（点数）的列表。但是花了一天时间试图解决这个问题，但没有去任何地方，有谁知道应该怎么做？（我正在为 MS-SQL 2005 编写此内容）

[例子](http://sqlfiddle.com/#!3/f6b14/1)

```
-- fromPointID | toPointID |
---------------|-----------|
--           1 |         2 |
--           2 |         1 |
--           1 |         3 |
--           3 |         1 |
--           2 |         3 |
--           3 |         2 |
--           4 |         2 |
--           2 |         4 |

with PointRanges ([fromPointID], [toPointID], [Range])
 AS
 (
    -- anchor member
     SELECT [fromPointID],
            [toPointID],
            0 AS [Range]   
     FROM dbo.[Paths]
     WHERE [toPointID] = 1
     UNION ALL
     -- recursive members
     SELECT P.[fromPointID],
            P.[toPointID],
            [Range] + 1 AS [Range]   
     FROM dbo.[Paths] AS P
     INNER JOIN PointRanges AS PR ON PR.[toPointID] = P.[fromPointID]
   WHERE [Range] < 5 -- This part is just added to limit the size of the table being returned
 --WHERE P.[fromPointID] NOT IN (SELECT [toPointID] FROM PointRanges)
 --Cant do the where statment I want to because it wont allow recurssion in the sub query
 )
 SELECT * FROM PointRanges

--Want this returned
-- PointID | Range |
-----------|-------|
--       1 |     0 |
--       2 |     1 |
--       3 |     1 |
--       4 |     2 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T00:51:57.890

Markus Jarderot 的链接对此给出了很好的答案。我最终尝试使用他的答案，并尝试用 C# 和 linq 重写我的问题，但它最终更像是一个数学问题而不是编码问题，因为我有一个包含数千个点的表，它们相互关联。这仍然是我感兴趣的事情，并试图通过阅读有关数学和图论的书籍来更好地理解，但如果其他人遇到这个问题，我认为 Markus Jarderot 的链接是你会找到的最佳答案。

# javascript - 无法计算文本字段值

> ID：13439429
> 
> 赞同：2
> 
> 时间：2012-11-18T10:47:21.200
> 
> 标签：javascript, jquery, ajax, struts2

> **可能重复：**
> [无法使用 jQuery 获取文本字段值](https://stackoverflow.com/questions/13438570/unable-to-get-textfield-value-using-jquery)

当用户更改文本字段中的项目数量时，我正在尝试更改输入字段。在这里，我从我的数据库中遍历我的列表。现在我必须为客户开具发票。

在我的代码中，如果我要更改单个项目的数量，那么它会影响列表中的所有其他项目。我只想更改数量已更改的特定项目。

下面的代码给了我一个错误。它会在单次更改项目数量时更改所有项目的价值。

我的代码：（**新更新）**

```
 <script type="text/javascript">
             $(document).ready(function(){  
                $(function() {        
                   $('input[name="quantity"]').change(function() {
                    var $tr = $(this).closest("tr");
                    var unitprice = $tr.find('input[name^="unitprice"]').val();  
                    $tr.find('input[name^="price"]').val($(this).val() * unitprice);
                }); 
                var totalPrice = 0;
                $('input[name="price"]').each(function(){
                    totalPrice += parseFloat(this.value);
                    $('[name=subtotal]').val(totalPrice);
                });
            }); 
        }); 
        </script>
         ..................
         ..................
         <tr>
            <td height="65%" valign="top" width="100%"> 
                <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
                    <s:iterator  value="#session.BOK" status="userStatus">
                        <tr style="height: 10px;"> 
                            <td width="65%" align="left"><s:property value="bookTitile"/></td> 
                            <td width="10%" align="left"><s:textfield name="unitprice" value="%{price}" size="4"/></td>
                            <td width="10%" align="center"><s:textfield name="quantity" value="1" size="2"/></td>  
                            <td width="15%" align="center"><s:textfield name="price" value="%{price}" size="6"></s:textfield> </td>
                        </tr> 
                    </s:iterator>  
                </table>   
                </td>
            </tr> 
              <tr>
                   <td height="1%" valign="top" width="100%"> 
                          <table width="100%" height="100%" border="0" cellpadding="0" cellspacing="0">
                                       <tr style="height: 10px;"> 
                                           <td width="100%" align="right" colspan="5">   
                                                <s:textfield name="subtotal"  size="5"> </s:textfield>
                                          </td>
                                       </tr> 
                           </table>  
                 </td>
          </tr> 
```

输出如下图所示：

![在此处输入图像描述](../Images/f3df62321ba21fd77d061aa5f3ccd244.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:57:53.250

Try this instead

```
<script type="text/javascript">
    $(function() {        
        $('input[name="quantity"]').change(function() {
            var $tr = $(this).closest("tr");
            var unitprice = $tr.find('input[name^="unitprice"]').val();  
            $tr.find('input[name^="price"]').val($(this).val() * unitprice);
        });
    });
</script> 
```

**Update :** This the function that will return the total caculated price. Use it as per need.

```
function calculateBasket() {
    var totalPrice = 0;
    $('input[name="price"]').each(function(){
        totalPrice += parseFloat(this.value);
    });

    return totalPrice;
} 
```

# javascript - 为什么我的画布不显示？

> ID：13439434
> 
> 赞同：0
> 
> 时间：2012-11-18T10:47:59.153
> 
> 标签：javascript, html, canvas

```
<canvas id="canvas" width="150" height="150">
  <p>Désolé, votre navigateur ne supporte pas Canvas mettez le donc à jour</p>
</canvas>
<script>
  var canvas  = document.querySelector('#canvas');
  var context = canvas.getContext('2d');
  var test = new Image();
  test.src = 'test.jpg'; // I'm sure that test.jpg is in the folder
  context.drawImage(test, 35, 35);
</script> 
```

你能帮我么？我的画布确实存在，但我无法在其中插入图像。为什么？有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:48:54.223

`load`您需要通过使用其事件等到图像下载完成。

```
var test = new Image();

test.onload = function() { context.drawImage(test, 35, 35); };

test.src = 'test.jpg'; 
```

# hibernate - Struts2 插入和更新子表和父表

> ID：13439439
> 
> 赞同：0
> 
> 时间：2012-11-18T10:48:51.257
> 
> 标签：hibernate, struts2, actioncontext

我用Hibernate和Struts2搭建了一个小网站

我有一个表调用类别

结构如：

> ID
> 
> 类别名称
> Parentcatid
> ...

我的所有文件是：

类别 Pojo

```
import java.io.Serializable;
import java.util.List;
import java.util.Set;
import javax.persistence.*;

@Entity
@Table(name = "Category")
public class Category implements Serializable {

    private static long serialVersionUID = -3308170321970658110L;
    private Integer idcategory;
    private String categoryname;    
    private int homepage;
    private String categorynameviet;
    private String description;
    private String url;
    private Category parentidcat;
    private List<Category> subcategory ;

    /**
     * @return the idcategory
     */
    @Id
    @GeneratedValue
    @Column(name="idcategory")
    public Integer getIdcategory() {
        return idcategory;
    }

    /**
     * @param idcategory the idcategory to set
     */
    public void setIdcategory(Integer idcategory) {
        this.idcategory = idcategory;
    }

    /**
     * @return the categoryname
     */
    @Column(name="categoryname")
    public String getCategoryname() {
        return categoryname;
    }

    /**
     * @param categoryname the categoryname to set
     */
    public void setCategoryname(String categoryname) {
        this.categoryname = categoryname;
    }

    /**
     * @return the homepage
     */
    @Column(name="homepage")
    public int getHomepage() {
        return homepage;
    }

    /**
     * @param homepage the homepage to set
     */
    public void setHomepage(int homepage) {
        this.homepage = homepage;
    }

    /**
     * @return the categorynameviet
     */
    @Column(name="categorynameviet")
    public String getCategorynameviet() {
        return categorynameviet;
    }

    /**
     * @param categorynameviet the categorynameviet to set
     */
    public void setCategorynameviet(String categorynameviet) {
        this.categorynameviet = categorynameviet;
    }

    /**
     * @return the description
     */
    @Column(name="description")
    public String getDescription() {
        return description;
    }

    /**
     * @param description the description to set
     */
    public void setDescription(String description) {
        this.description = description;
    }

    /**
     * @return the url
     */
    @Column(name="url")
    public String getUrl() {
        return url;
    }

    /**
     * @param url the url to set
     */
    public void setUrl(String url) {
        this.url = url;
    }

    /**
     * @return the parentidcat
     */
    @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumn(name="parentcatid")
    public Category getParentidcat() {
        return parentidcat;
    }

    /**
     * @param parentidcat the parentidcat to set
     */
    public void setParentidcat(Category parentidcat) {
        this.parentidcat = parentidcat;
    }

    /**
     * @return the subcategory
     */
    @OneToMany(mappedBy="parentidcat")
    public List<Category> getSubcategory() {
        return subcategory;
    }

    /**
     * @param subcategory the subcategory to set
     */
    public void setSubcategory(List<Category> subcategory) {
        this.subcategory = subcategory;
    }

} 
```

我的行动

```
import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionSupport;
import java.util.List;
import java.util.Map;
import org.apache.struts2.interceptor.validation.SkipValidation;
import org.dejavu.pirate.dao.CategoryDAO;
import org.dejavu.pirate.model.Category;

public class CategoryAdminAction extends ActionSupport {

    private static final long serialVersionUID = -738951644056447324L;
    private Category cat;
    private static CategoryDAO catDAO = new CategoryDAO();
    private List<Category> categoryList;
    private boolean ckhomepage;

    @Override
    public String execute() {
        return SUCCESS;
    }

    public String setUpForInsertOrUpdate() {
        getCategoryParent();
        if (cat != null && cat.getIdcategory() != null) {
            cat = catDAO.findCatById(cat.getIdcategory());
        }
        return "success";
    }

    public String InsertOrUpdateCategory() {
        int parentId = 0;
        if (ckhomepage == true) {
            cat.setHomepage(1);
        } else {
            cat.setHomepage(0);
        }

        if (cat.getUrl() == null) {
            cat.setCategorynameviet(cat.getCategoryname());
        }

        if (cat.getIdcategory() == null) {

            catDAO.addCategory(cat);
        } else {            
            catDAO.updateCategory(cat);
        }
        return SUCCESS;
    }

    public void getCategoryParent() {
        categoryList = catDAO.getAllCategory();
        Map session = ActionContext.getContext().getSession();
        session.put("getAllCategoryID", categoryList);
    }

    @SkipValidation
    public String getAllCategory() {
        categoryList = catDAO.getAllCategory();
        return SUCCESS;
    }

    public List<Category> getCategoryList() {
        return categoryList;
    }

    public void setCategoryList(List<Category> categoryList) {
        this.categoryList = categoryList;
    }

    /**
     * @return the catDAO
     */
    public CategoryDAO getCatDAO() {
        return catDAO;
    }

    /**
     * @param catDAO the catDAO to set
     */
    public void setCatDAO(CategoryDAO catDAO) {
        this.catDAO = catDAO;
    }

    public Category getCat() {
        return cat;
    }

    public void setCat(Category cat) {
        this.cat = cat;
    }

    public boolean isCkhomepage() {
        return ckhomepage;
    }

    public void setCkhomepage(boolean ckhomepage) {
        this.ckhomepage = ckhomepage;
    }
} 
```

和我的表单片段，仅用于下拉框：

```
<s:select name="cat.parentcatid" list="#session.getAllCategoryID" listKey="parentcatid" listValue="categoryname" headerValue="-- Select Category --" headerKey="0" /> 
```

更新类别时出现问题，它可以加载类别列表，但选择的是 headerValue 而不是它的父级名称！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:18:54.127

尝试这个：

```
@Id
@GeneratedValue
@Column(name="idcategory")
private Integer idcategory; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T18:54:42.337

我用 s:select 的使用 Value 属性解决了我的问题

```
<s:select name="cat.parentcatid" list="#session.getAllCategoryID" listKey="parentcatid" listValue="categoryname" headerValue="-- Select Category --" headerKey="0" value="parentid"/> 
```

# command-line - VLC 播放器中的命令行 YouTube - 质量控制？

> ID：13439442
> 
> 赞同：6
> 
> 时间：2012-11-18T10:49:11.990
> 
> 标签：command-line, youtube, vlc

我正在尝试制作一个小脚本，其中涉及使用 VLC 从命令行播放 YouTube 视频。我在搜索路径中使用带有 VLC 的 Windows 7。

打字

```
vlc http://www.youtube.com/watch?v=v0faacLn8K4 
```

播放视频，但始终以最高质量播放。在 Internet 浏览器中，附加术语 '&fmt=18' 会强制使用低分辨率模式。但是，在命令行中使用它，

```
vlc http://www.youtube.com/watch?v=v0faacLn8K4&fmt=18 
```

给出一个错误：

```
´fmt´ is not recognized as an internal or external command,
operable program or batch file. 
```

我试过用各种引号引用网址，但无济于事。整个链接被传递给 VLC，包括引号。

有什么办法解决这个问题？是否有用于选择流质量的 VLC 开关？[VLC 命令行帮助](http://wiki.videolan.org/VLC_command-line_help)可能有答案，但理解所有开关的含义有点超出我的能力。

音乐学分：Breakbot 在你身边

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T15:41:12.387

从命令提示符转到 VLC 目录，然后键入

```
vlc "http://www.youtube.com/watch?v=v0faacLn8K4&fmt=18" 
```

为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-11T21:31:27.867

安装[Streamlink](https://streamlink.github.io/)：

```
sudo -H pip install streamlink 
```

将流发送到`cvlc --fullscreen`：

```
streamlink --player="cvlc --fullscreen" "https://www.youtube.com/freecodecamp/live" best 
```

为了节省带宽，您可以使用`worst`而不是`best`.
也张贴[在这里](https://superuser.com/a/1412778/500826)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-22T04:26:08.597

你需要从命令行运行吗？

如果您只是启动 VLC 本身，然后使用 'ctrl+N' 打开一个 'Open Media' 对话框，该对话框将在网络选项卡上，您可以在“请输入网络 URL”中输入 url +“&fmt=18” ：“ 区域。

即只是没有任何引号的完整路径。

适用于我的 VLC 版本 2.2.1。

# python - 如何覆盖 ModelChoiceField 模板？

> ID：13439443
> 
> 赞同：0
> 
> 时间：2012-11-18T10:49:25.073
> 
> 标签：python, django, templates

我想覆盖 ModelChoiceField 模板。我有一个具有名称和深度等属性的类别模型 - 类别是嵌套的，深度告诉我给定类别的树有多深。我要做的是按深度缩进类别名称，所以如果我有两个类别 - 深度 2 和 4，那么我想在选择框中将它们的名称缩进 2 和 4 个空格。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T10:53:51.513

你考虑[过 django mptt](http://django-mptt.github.com/django-mptt/)吗？

它添加了一大堆帮助处理树数据，包括漂亮的嵌套小部件

否则，我想我过去使用过类似的东西（从旧代码库复制，所以可能需要调整才能工作。另外，认为它是为 django 1.2 编写的，所以可能需要更新）

```
class MyChoiceField(forms.ModelChoiceField):
    def label_from_instance(self, obj):
        return my_fun(obj)

class MyModelAdmin(admin.ModelAdmin):
    def formfield_for_foreignkey(self, db_field, request, **kwargs):
        if db_field.name == "my_field":
            kwargs["form_class"] = MyChoiceField
            return db_field.formfield(**kwargs)
        return super(MyModelAdmin, self).formfield_for_foreignkey(
            db_field, request, **kwargs) 
```

# php - PHP While 循环从多个“加入”表中分离唯一类别

> ID：13439445
> 
> 赞同：2
> 
> 时间：2012-11-18T10:49:47.123
> 
> 标签：php, mysql, join, while-loop

我正在加入 4 个表，并希望创建一个 while 循环来吐出嵌套在不同类别下的结果。

**我的桌子**

*类别*
ID | 分类名称

*页面*
ID | 页名 | 类别

*page_content*
id | page_id | image_id

*图片*
ID | 拇指路径

**我当前的 SQL 连接**

```
<?php $all_photos = mysql_query("
    SELECT * FROM categories JOIN pages ON pages.category = categories.id
    JOIN image_pages ON image_pages.page_id = pages.id
    JOIN images ON images.id = image_pages.image_id
");?> 
```

**我想要的结果来自 while 循环**

我想得到这样的东西......

**类别 1**
*页 1*
图片 1、图片 2、图片 3

*第 2 页*
图 2，图 4

**类别 2**
页 3
图片 1

*第 4 页*
图片 1，图片 2，图片 3

每个图像可以属于多个页面，每个页面可以属于多个类别。

目前我有 2 个解决方案，一个根据其中的页面数量多次列出每个类别：

例如。类别 1，第 1 页，图像 1 - 类别 1，第 1 页，图像 2 等

一个在另一个while循环中使用一个while循环，在另一个while循环中使用一个while循环，导致3个sql查询。

```
<?php $all_categories = mysql_query("SELECT * FROM categories");?>

<?php 

    while($all_category = mysql_fetch_array($all_categories)) {

        ?>
        <h4><?=$all_category['category_name']?></h4>

        <?php $all_pages = mysql_query("SELECT * FROM pages WHERE category = " . $all_category['id'] . "");?>

        <?php 
            while($all_page = mysql_fetch_array($all_pages)) {
            ?>
                <p><?=$all_page['page_name']?></p>

                <?php $all_images = mysql_query("SELECT * FROM images JOIN image_pages ON image_pages.page_id  = " . $all_page['id'] . " AND image_pages.image_id = images.id");

                ?>

                <div class="admin-images-block clearfix">

                <?php

                while($all_image = mysql_fetch_array($all_images)) {
                ?>

                    <img src="<?=$all_image['thumb_path']?>" alt="<?=$all_image['title']?>"/>

                <?php
                }

                ?>
                </div>
                <?php
            }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:47:18.467

我认为第二种解决方案更好更直接。你可以这样做：

更新：

```
 <?php
$all_cats=mysql_query("select * from categories");
while($all_cat = mysql_fetch_array($all_cats)){
    //print your cat title 
    $check = mysql_query("select * from images i, pages p, page_content pc categories c where c.id = p.category and p.id = pc.page_id and pc.image_id=i.id");

    if(mysql_num_rows($check) > 0){

    $all_pages=mysql_query("select * from pages where category=".$all_cat['id']);
    while($all_page = mysql_fetch_array($all_pages)){
        //print your page
        echo "<p>".$all_page['page_name']."</p>";
        ?>
        <div class="admin-images-block clearfix">
            <?php

            $all_images=mysql_query("select * from images where id=".$all_page['image_id']);
            while($all_image = mysql_fetch_array($all_images)) {
            //print your img
            ?>
                <img src="<?=$all_image['thumb_path']?>" alt="<?=$all_image['title']?>"/>
            <?php}?>
         </div>
    <?php
    }

    }
}
?> 
```

祝你好运:)

# ruby-on-rails-3 - Twitter Bootstrap Carousel 仅在编辑页面上消失

> ID：13439446
> 
> 赞同：1
> 
> 时间：2012-11-18T10:49:51.507
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, carousel

我正在关注本教程：[http ://untame.net/2012/08/twitter-bootstrap-build-a-stunning-two-column-blog/](http://untame.net/2012/08/twitter-bootstrap-build-a-stunning-two-column-blog/)

我的旋转木马工作正常（滚动工作正常，所有图像都被渲染）但是当我导航到一个`EDIT`页面时它就消失了但仍然显示滚动功能

它在这里工作： [http ://s7.postimage.org/dsf75yc6z/Carousel.png](http://s7.postimage.org/dsf75yc6z/Carousel.png)

现在我按下了`EDIT`：[http ://s13.postimage.org/64i1v0hif/Carousel2.png](http://s13.postimage.org/64i1v0hif/Carousel2.png)

这是我布局中的轮播代码：

```
 <div id="myCarousel" class="carousel slide">
      <!-- Carousel items -->
      <div class="carousel-inner">
        <div class="active item"><img src="../slider/musteri.jpg" /></div>
        <div class="item"><img src="../slider/Deepak.jpg" /></div>
        <div class="item"><img src="../slider/4.jpg" /></div>
        <div class="item"><img src="../slider/1.jpg" /></div>
        <div class="item"><img src="../slider/2.jpg" /></div>
      </div>
      <!-- Carousel nav -->
      <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
      <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
    </div> 
```

我的`EDIT`功能是脚手架：

```
# GET /news/1/edit
def edit
  @news = News.find(params[:id])

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @news }
  end
end 
```

我的`EDIT`观点只是呈现`<%= render 'form' %>`

该形式与用于的形式相同，`NEW`并且旋转木马工作正常！

这让我疯了！有任何想法吗 ？:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T08:19:34.100

这里的问题是图像的路径。Rails 具有资产管道，因此您实际上不需要将图像放在资产文件夹中的另一个文件夹中。（希望这是有道理的）

将您的图像从滑块文件夹中取出，然后将它们放入

```
assets/images 
```

然后当你想调用图像时，只需使用

```
<img src="/assets/filename.jpg"> 
```

希望有帮助

# java - Android：加载 xml 布局时出现 OutOfMemoryError。我该如何避免它是什么意思？

> ID：13439448
> 
> 赞同：0
> 
> 时间：2012-11-18T10:50:29.577
> 
> 标签：java, android, android-layout, out-of-memory

> **可能重复：**
> [Android：错误膨胀 xml：类未知](https://stackoverflow.com/questions/13439207/android-error-inflating-xml-class-unknown)

我的应用程序在扩展此布局时崩溃：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" xmlns:android="http://schemas.android.com/apk/res/android">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="match_parent" >

            <Button
                android:id="@+id/btnSurvey"
                android:layout_width="80dip"
                android:layout_height="80dip"
                android:layout_centerInParent="true"
                android:background="@drawable/myschedulechanges_icon"
                android:onClick="openSurvey" />

            <TextView
                android:id="@+id/textView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/btnSurvey"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="3dip"
                android:text="Mijn\nroosterwijzigingen" />

        </RelativeLayout>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1" >

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" >

            <Button
                android:id="@+id/btnAutomaticCheck"
                android:layout_width="80dip"
                android:layout_height="80dip"
                android:layout_centerInParent="true"
                android:background="@drawable/automaticcheck_icon"
                android:onClick="openAutomaticCheck" />

            <TextView
                android:id="@+id/textView2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/btnAutomaticCheck"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="3dip"
                android:text="Automatisch\nchecken" />

        </RelativeLayout>

        <RelativeLayout
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_weight="1" >

            <Button
                android:id="@+id/btnManualCheck"
                android:layout_width="80dip"
                android:layout_height="80dip"
                android:layout_centerInParent="true"
                android:background="@drawable/manualcheck_icon"
                android:onClick="openManualCheck" />

            <TextView
                android:id="@+id/textView3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/btnManualCheck"
                android:layout_centerHorizontal="true"
                android:layout_marginTop="3dip"
                android:text="Handmatig\nchecken" />

        </RelativeLayout>

    </LinearLayout>

</LinearLayout> 
```

使用这些错误消息：

```
11-18 09:48:15.713: E/AndroidRuntime(642): FATAL EXCEPTION: main
    11-18 09:48:15.713: E/AndroidRuntime(642): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.camelotapps.augustinianum/com.camelotapps.augustinianum.ScheduleChangesActivity}: android.view.InflateException: Binary XML file line #46: Error inflating class <unknown>
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.os.Handler.dispatchMessage(Handler.java:99)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.os.Looper.loop(Looper.java:137)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at java.lang.reflect.Method.invokeNative(Native Method)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at java.lang.reflect.Method.invoke(Method.java:511)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at dalvik.system.NativeStart.main(Native Method)
    11-18 09:48:15.713: E/AndroidRuntime(642): Caused by: android.view.InflateException: Binary XML file line #46: Error inflating class <unknown>
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.createView(LayoutInflater.java:606)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.Activity.setContentView(Activity.java:1835)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at com.camelotapps.augustinianum.ScheduleChangesActivity.onCreate(ScheduleChangesActivity.java:18)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.Activity.performCreate(Activity.java:4465)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
    11-18 09:48:15.713: E/AndroidRuntime(642):  ... 11 more
    11-18 09:48:15.713: E/AndroidRuntime(642): Caused by: java.lang.reflect.InvocationTargetException
    11-18 09:48:15.713: E/AndroidRuntime(642):  at java.lang.reflect.Constructor.constructNative(Native Method)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.LayoutInflater.createView(LayoutInflater.java:586)
    11-18 09:48:15.713: E/AndroidRuntime(642):  ... 26 more
    11-18 09:48:15.713: E/AndroidRuntime(642): Caused by: java.lang.OutOfMemoryError
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.Bitmap.nativeCreate(Native Method)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.Bitmap.createBitmap(Bitmap.java:605)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.Bitmap.createBitmap(Bitmap.java:551)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.Bitmap.createScaledBitmap(Bitmap.java:437)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.BitmapFactory.finishDecode(BitmapFactory.java:524)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:499)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:351)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:773)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.content.res.Resources.loadDrawable(Resources.java:1935)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.view.View.<init>(View.java:2785)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.widget.TextView.<init>(TextView.java:449)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.widget.Button.<init>(Button.java:108)
    11-18 09:48:15.713: E/AndroidRuntime(642):  at android.widget.Button.<init>(Button.java:104)
    11-18 09:48:15.713: E/AndroidRuntime(642):  ... 29 more 
```

第 46 行是本节的第一行：

```
<Button
    android:id="@+id/btnAutomaticCheck"
    android:layout_width="80dip"
    android:layout_height="80dip"
    android:layout_centerInParent="true"
    android:background="@drawable/automaticcheck_icon"
    android:onClick="openAutomaticCheck" /> 
```

为什么我会收到 OutOfMemoryError？而且，更重要的是，我能做些什么来避免它？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:29:13.023

似乎主要原因是 OutOfMemory 加载 Bitmap 时，您可能加载了太多 Bitmaps 吗？如果是的话，你可以考虑实现一个 LRUCache ......让我更新......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:41:28.160

我只是稍微减小了按钮背景的大小。它现在工作正常！

# kendo-ui - KendoUI Grid - rollback from from a remove row

> ID：13439451
> 
> 赞同：0
> 
> 时间：2012-11-18T10:51:11.630
> 
> 标签：kendo-ui

I am creating a custom transport for KendoUI that would connect Kendo to a number of cool data sources like webSQL. My Kendo Grid problem is that when I implement the delete/destroy command I am not able to prevent the grid from the actual remove row to happen, even if the data source layer has responded with an error.

I get called via the `RemoteTransport.destroy` method. The input parameter contains an error and a success callback, but even if I call the error callback, or try to return a "false", or try to return a $.Deferred that I eventually reject: the grid row is gone. Actually it's gone before I get called.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T17:47:32.210

I believe you would want the **cancelChanges** method on the grid.

[http://docs.kendoui.com/api/web/grid#cancelchanges](http://docs.kendoui.com/api/web/grid#cancelchanges)

*A response from the KendoUI forum helps decoupling the UI part from the data layer part*

> In the RemoteTransport call the rejection handler this will cause an exception in the DataSource. In the DataSource definition place an error handler that call the actual cancelChanges or whatever rollback method the control will have. Still inperfect - but at least doable.

# ios - IOS：如何使用 Google Drive sdk 库将文件上传到特定的 Google Drive 文件夹

> ID：13439457
> 
> 赞同：7
> 
> 时间：2012-11-18T10:51:39.817
> 
> 标签：ios, google-drive-api

我将 Google drive sdk 与我的 iOS 应用程序集成在一起。但我不知道如何将文件上传到 Google 驱动器特定文件夹。

这是用于上传文件的代码。但是这个将文件上传到我的谷歌驱动器根文件夹。任何人共享代码以将文件上传到谷歌驱动器特定文件夹？

**我的代码：**

```
-(void)uploadFileToGoogleDrive:(NSString*)fileName
{    
GTLDriveFile *driveFile = [[[GTLDriveFile alloc]init] autorelease];

driveFile.mimeType = @"application/pdf";
driveFile.originalFilename = @"test.doc";
driveFile.title = @"test.doc";

NSString *filePath = [LocalFilesDetails getUserDocumentFullPathForFileName:fileName isSignedDocument:YES];

GTLUploadParameters *uploadParameters = [GTLUploadParameters
                                         uploadParametersWithData:[NSData dataWithContentsOfFile:filePath]
                                         MIMEType:@"application/pdf"];    

GTLQueryDrive *query = [GTLQueryDrive queryForFilesInsertWithObject:driveFile
                                    uploadParameters:uploadParameters];

[self.driveService executeQuery:query 
  completionHandler:^(GTLServiceTicket *ticket,
                       GTLDriveFile *updatedFile,
                       NSError *error) {
    if (error == nil) {
        NSLog(@"\n\nfile uploaded into google drive\\<my_folder> foler");
    } else {
        NSLog(@"\n\nfile uplod failed google drive\\<my_folder> foler");            
    }
}];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T20:59:22.700

您需要设置参考的`parents`属性`driveFile`。

```
GTLDriveParentReference *parentRef = [GTLDriveParentReference object];
parentRef.identifier = folderIdentifier; // identifier property of the folder
driveFile.parents = @[ parentRef ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T12:00:06.697

我不知道 iOS，所以可能不符合标准，但是[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)中的这段代码有帮助吗

```
+ (void)insertFileWithService:(GTLServiceDrive *)service
                        title:(NSString *)title
                  description:(NSString *)description
                     parentId:(NSString *)parentId
                     mimeType:(NSString *)mimeType
                         data:(NSData *)data
              completionBlock:(void (^)(GTLDriveFile *, NSError *))completionBlock {
  GTLDriveFile *file = [GTLDriveFile object];

  file.title = title;
  file.descriptionProperty = description;
  file.mimeType = mimeType;

  GTLUploadParameters *uploadParameters =
    [GTLUploadParameters uploadParametersWithData:data MIMEType:mimeType];
  GTLQueryDrive *query =
    [GTLQueryDrive queryForFilesInsertWithObject:file
                                uploadParameters:uploadParameters]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T15:47:32.090

GTLServiceTicket *_editFileListTicket;

```
 GTLServiceDrive *service = self.driveService;

    GTLDriveFile *folderObj = [GTLDriveFile object];

    folderObj.title = [NSString stringWithFormat:@"%@", title];

    folderObj.mimeType = @"application/vnd.google-apps.folder";

    GTLQueryDrive *query = [GTLQueryDrive queryForFilesInsertWithObject:folderObj
                                                       uploadParameters:nil];
    _editFileListTicket = [service executeQuery:query
                              completionHandler:^(GTLServiceTicket *ticket,
                                                  GTLDriveFile *folderItem,
                                                  NSError *error) {

                                 if (error == nil)
                                 {

                                     UIAlertView *alert=[[UIAlertView alloc] initWithTitle:nil message:@"Created" delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
                                     [alert show];

                                    }
                                 else
                                 {

                                     NSLog(@"error");

                                  }
                              }]; 
```

# java - Can't understand error about Object array

> ID：13439472
> 
> 赞同：0
> 
> 时间：2012-11-18T10:54:16.787
> 
> 标签：java

TestAddress.java

```
Address[] adrsarr = new Address[5];
        adrsarr[0] = new Address("B402", "3", "42", "Behind Sector 9",
                "New Delhi", "Delhi", "Delhi", "India", "232113");
        adrsarr[1] = new Address("B1", "2", "61", "Bb Road 2", "Mumbai",
                "Mumbai", "Maharashtra", "India", "1213");
        adrsarr[2] = new Address("AH2", "325", "98", "BPGC", "Goa", "Goa",
                "Goa", "India", "403726");
        adrsarr[3] = new Address("a222", "2", "81", "Sector market",
                "New Delhi", "Delhi", "Delhi", "India", "11a001"); 
```

Address.java has a constructor of type `Address()` and of `Address(string, string, string, string, string, string, string, string, string)`

Now this given code does not work inside the main TestAddress class, it gives an error on the line where I'm declaring adrsarr

```
- Syntax error on token ";", { expected after this token 
```

But if I put it inside a function like buildArr(), then it compiles flawlessly, no errors.

Any idea what's happening? How am I supposed to initialize an object array without making a function?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:05:24.807

> 现在这个给定的代码在主 TestAddress 类中不起作用，它在我声明 adrsarr 的行上给出了一个错误

您不能在**方法、构造函数或初始化块**之外**填充数组**。

 **```
 public class Country {
    Address[] add = new Address[3];
    add[0] = new Address();// this would not **compile**, put it inside a constructor /method.

      {
           this.add[0] = new  Address();// populating inside an init block, works fine 
       }
      public country() {
        this.add[0] = new  Address(); //populating inside a constructor, works fine
       }
       public void method(){
         this.add[0] = new Address();//populating inside a method, works fine
        }
  } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-18T11:10:18.483

使用 Array Initializer 代替初始化赋值语句。

```
Address[] add = { new Address(), new Adress(), new Adress() }; 
```

数组初始化器只能在声明中使用或作为数组创建表达式的一部分（请参阅[Java 语言规范 - 第 10.6 章“数组初始化](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)器” ）**

# c# - 使用 datatable.DefaultView.Sort 对数据表进行排序

> ID：13439474
> 
> 赞同：0
> 
> 时间：2012-11-18T10:54:28.207
> 
> 标签：c#, asp.net

我正在尝试对数据表进行排序。但它不起作用。

```
arr[0] = "name"; 
arr[1] = "DESC";

myDataSet.Tables["table1"].DefaultView.Sort = arr[0] + " " + arr[1]; 
```

在这里，`myDataSet`指的是我用于报告查看器的数据集。

我错过了什么吗？还有其他方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T10:59:30.047

请记住，您必须使用默认视图作为查看器的新数据源。

使用 defaultView 属性调用绑定方法，然后[调用 ToTable()](http://msdn.microsoft.com/en-us/library/a8ycds2f.aspx)

# android - Android - 传入 SMS 监听器 (ICS)

> ID：13439475
> 
> 赞同：3
> 
> 时间：2012-11-18T10:54:28.627
> 
> 标签：android, sms, broadcastreceiver

我创建了一个 BroadcastReceiver，它实际上处理传入的 SMS。这是在 android 2.3.3 中运行良好的代码，但不知何故无法在运行 ICS 的设备上运行相同的代码。

我的接收器

```
public class SmsListener extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        System.out.println("#### SMS Received");
        if(intent.getAction().equals("android.provider.Telephony.SMS_RECEIVED")){
            Bundle bundle = intent.getExtras();           //---get the SMS message passed in---
            SmsMessage[] msgs = null;
            String msg_from;
            if (bundle != null){
                //---retrieve the SMS message received---
                try{
                    Object[] pdus = (Object[]) bundle.get("pdus");
                    msgs = new SmsMessage[pdus.length];
                    for(int i=0; i<msgs.length; i++){
                        msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);
                        msg_from = msgs[i].getOriginatingAddress();
                        String msgBody = msgs[i].getMessageBody();
                        System.out.println("#### SMS Received: " + msg_from);
                        System.out.println("#### Message: " + msgBody);
                    }
                }catch(Exception e){
                           Log.d("Exception caught",e.getMessage());
                }
            }
        }
    }
} 
```

权限

```
 <receiver android:name=".SmsListener" android:enabled="true"       android:permission="android.permission.RECEIVE_SMS">
      <intent-filter>
         <action android:name="android.provider.Telephony.SMS_RECEIVED" />
      </intent-filter>
   </receiver>    

<uses-permission android:name="android.permission.RECEIVE_SMS" /> 
<uses-permission android:name="android.permission.READ_SMS"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T05:32:41.967

实际上我得到了答案，现在有了最新的安全添加，android 只允许通过可见活动注册广播接收器。

# apache - 将某些路径以及其中的任何内容重定向到 404，然后重定向到主页

> ID：13439476
> 
> 赞同：1
> 
> 时间：2012-11-18T10:54:34.553
> 
> 标签：apache, .htaccess, redirect

我正在尝试重定向所有内容，例如：

```
mycomain.com/ST/My_Dir/anything 
```

where`ST`等于一个州的缩写，`anything`等于任何东西。

我在我的`.htaccess`文件中尝试了以下代码，但它不起作用..

```
ErrorDocument 404 /index.php

RedirectMatch 404 ^[a-zA-Z]{2}/My_Dir/.*$ 
```

另外，有没有办法让我`My_Dir`不区分大小写？我知道如何在 PHP 中执行此操作，但不确定这里是否相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T22:12:09.800

如果要强制特定 url 返回 404 响应，可以使用：

```
RewriteRule ^[A-Z]{2}/My_Dir/.* - [R=404,NC] 
```

而不是`RedirectMatch`规则。也可以抛出 403 Forbidden 你可以使用`F`

```
RewriteRule ^[A-Z]{2}/My_Dir/.* - [F,NC] 
```

在这两个示例中，该`NC`标志使匹配不区分大小写。此外，我不建议使用您的主页 (/index.php) 作为 404 页面，最好制作自定义 404.php 并将您的设置`ErrorDocument`为该页面。

# vb.net - Link dataTable With DatagridView

> ID：13439479
> 
> 赞同：1
> 
> 时间：2012-11-18T10:55:02.407
> 
> 标签：vb.net

I'm linking `DataTable` with `DatagridView` but when I want to make new row gives me an error `System.NullReferenceException was unhandled by user code . Object reference not set to an instance of an object.`

* * *

```
Imports System.Data

Partial Class DataAssembly_SearchCentral
Inherits System.Web.UI.Page

Dim tblresult As DataTable
Dim drCurrent As DataRow
Dim dsdata As New DataSet()

  Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    If IsPostBack Then
        Exit Sub
    End If
    If ResultGV.Rows.Count = 0 Then

        tblresult = New DataTable("tblresult")
        Dim column As DataColumn

        column = New DataColumn()
        column.DataType = System.Type.GetType("System.String")
        column.ColumnName = "Payeer"
        column.AutoIncrement = False
        column.Caption = "Payeer"
        column.ReadOnly = False
        column.Unique = False

        tblresult.Columns.Add(column)

        column = New DataColumn()
        column.DataType = System.Type.GetType("System.String")
        column.ColumnName = "Office"
        column.AutoIncrement = False
        column.Caption = "Office"
        column.ReadOnly = False
        column.Unique = False

        tblresult.Columns.Add(column)

        dsdata.Tables.Add(tblresult)

    End If

End Sub
Protected Sub Result_btn_Click(ByVal sender As Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles Result_btn.Click

    drCurrent = tblresult.NewRow()
    drCurrent("Payeer") = MasName_txt0.Text
    drCurrent("Office") = ddl_office.SelectedItem.Text
    tblresult.Rows.Add(drCurrent)

    dsdata.Tables.Add(tblresult)
    ResultGV.DataSource = dsdata.Tables("tblresult")

    ResultGV.DataBind()

End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:10:59.777

`tblresult`当您尝试在 中访问它时不存在`Result_btn_Click()`。

看看你的`Page_Load()`方法：

```
If IsPostBack Then
    Exit Sub ' <-- This gets called and the code below won't execute.
             '     Therefore tblresult doesn't exist in the click handler
End If

If ResultGV.Rows.Count = 0 Then

    tblresult = New DataTable("tblresult")
    ' ...

End If 
```

`tblresult`如果它不是回发，您只创建一个实例。另一方面，无论何时触发事件处理程序，请求都是回发。确保`tblresult`在尝试添加新行之前创建一个实例。

# post - TinyMCE: How to post use key combination Shift Enter?

> ID：13439481
> 
> 赞同：3
> 
> 时间：2012-11-18T10:55:17.087
> 
> 标签：post, tinymce, shift, enter, onkeypress

I'm using the TinyMCE editor in chat and very uncomfortable to send a message by submit-button. I would like to know, how post message use "onkeypress" in TinyMCE ?

I do this so:

```
<script type="text/javascript">
tinyMCE.init({
...
        setup : function(ed) {
            ed.onKeyPress.add(
                function (ed, evt) {
                    if(evt.shiftKey && evt.keyCode == 13) {
                        AjaxPost();
                        //alert('shift + enter key');
                        return;
            }              
        });
    }
...
</script>

<script type="text/javascript">
function PostAjax()
{
var Message=document.getElementById('Message').value;
    $.ajax({
        type: "POST",
        url: "PostTinyMCE.php?Message="+Message,
        success: function(html)
        {
        $("#General").html(html);
        }
    });
}
</script>

<textarea name="content" id="Message" style="width:100%"></textarea> 
```

but it does not give me the desired effect, functions AjaxPost(); does't start, where is my mistake? Please help me...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:19:30.213

在函数中使用 alert 语句`AjaxPost`来检查函数是否`AjaxPost();`被执行。如果不是，请尝试将您的 js 函数放在 tinymce init 之前。如果是，您需要验证您的 ajax 代码。

# extjs - 禁用表单面板

> ID：13439482
> 
> 赞同：0
> 
> 时间：2012-11-18T10:55:17.937
> 
> 标签：extjs, extjs4.1

我有一个窗体，我需要在满足条件时禁用它。

```
if (conditionIsMet){

        var theFormPanel= Ext.ComponentQuery.query('#winId> #theFormPanel')[0];

} 
```

但我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T10:57:58.183

```
if (conditionIsMet){
  var theFormPanel= Ext.ComponentQuery.query('#winId> #theFormPanel')[0].disable();
} 
```

为什么在这里使用 ComponentQuery 查询？你不能通过id获取formpanel吗？`Ext.getCmp('formPanelId').disable();`

# android - Missing styles. Is the correct theme chosen for this layout?

> ID：13439486
> 
> 赞同：163
> 
> 时间：2012-11-18T10:56:13.040
> 
> 标签：android

> Missing styles. Is the correct theme chosen for this layout? Use the Theme combo box above the layout to choose a different layout, or fix the theme style references. Failed to find style `mapViewStyle` in current theme.

I tried every solutions available to solve this problem but nothing seems to work. I have included library in the manifest file. I even created style is styles.xml, I have chosen Google Apis build target as well.

Can somebody please give me a solution?

here is my **xml** file:

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
style="@style/AppTheme"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

 <com.google.android.maps.MapView
     android:id="@+id/themap"
     style="@style/mapViewStyle"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent"
     android:apiKey="here i have my key"
     android:clickable="true"
     android:enabled="true" />

  </RelativeLayout> 
```

Here is my **manifest** snippet:

```
 <uses-library android:name="com.google.android.maps" />

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".Second" />

    <activity android:name=".Third"  android:theme="@android:style/Theme.Black"/>
  </application> 
```

here is my **style.xml** file

```
<resources>
    <style name="mapViewStyle" parent="@android:style/Theme.Black">
    </style>
</resources> 
```

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2014-08-21T08:22:48.260

对于 Android Studio（或 IntelliJ IDEA），

如果您的项目中一切正常，并且您的布局中仍然出现错误，请尝试“使缓存无效并重新启动”。

在 Android Studio 重新创建缓存和索引时喝杯咖啡。

![如何使缓存无效并重新启动](../Images/f0e9d639090a39f89cc031c7d08f9cbb.png)

* * *

## 回答 #2

> 赞同：152
> 
> 时间：2013-05-30T10:02:40.000

我遇到了同样的问题，发现它是图形布局编辑器顶部的主题下拉菜单。我从 Holo 更改为 Theme 并显示布局并且错误消失了。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-08-06T15:42:25.917

我通常做的是以下内容： a `Gradle Clean`,`Rebuild`和`Sync all my Gradle files`. 之后我`restart` **Android Studio**，我去：

```
Select Theme -> Project Themes -> AppTheme 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-08-09T07:06:54.733

这是因为您选择的不是项目的主题。接下来尝试做：

[![在此处输入图像描述](../Images/01470e8dab7f132125b147e781383f06.png)](https://i.stack.imgur.com/rigiK.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-01-03T09:34:37.943

如果我们使用 Android Studio 创建太多项目，有时会出现渲染问题。即使创建一个空白活动，我们也会收到这样的渲染错误。请关闭并重新启动 Android Studio。如果问题仍然存在，您可以[![Android Studio 缓存失效和重启](../Images/38629c7446297963a2bd58e6c48b0b57.png)](https://i.stack.imgur.com/QFFLt.png)

希望这可以帮助。它的工作方式与经验法则相似，以防一切看起来都很好并且仍然存在错误，重新启动应用程序通常可以解决问题。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-15T08:55:47.753

在我的情况下，当设计器中 Android 版本的默认设置设置为“预览 N”时，问题发生了。将 Android 版本更改为“23”，错误通知消失了。
**编辑**
并且不要忘记取消选中“自动选择最佳”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-12-29T09:22:00.120

我通过更改 build.gradles 中“依赖项”中的“类路径”来解决它。

只是改变：

```
dependencies {
    classpath 'com.android.tools.build:gradle:2.3.0-alpha2' 
```

或类似的东西：

```
dependencies {
    classpath 'com.android.tools.build:gradle:2.2.3' 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-03-05T19:14:53.857

我在使用 Android Studio 1.5.1 时遇到了同样的问题。

这通过使用 Android SDK 管理器和更新*Android 支持库*以及支持库的*本地 Maven 存储库来解决*。

[![在此处输入图像描述](../Images/070602b2bafc7a09cfe2ecfaf8aba782.png)](https://i.stack.imgur.com/umGhZ.png)

更新SDK并**重启**Android Studio后，问题解决。

希望这对尝试其他建议后遇到同样问题的人有所帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-05T19:00:05.430

像这样覆盖操作栏样式后出现此错误。我也在预览中丢失了操作栏。

```
<style name="general_app_theme" parent="@style/Theme.AppCompat">
    <!-- for API level 11 -->
    <item name="android:actionBarStyle">@style/action_bar_style</item>

    <!-- Support library compatibility -->
    <item name="actionBarStyle">@style/action_bar_style</item>

</style>

<style name="action_bar_style" parent="@style/Widget.AppCompat.ActionBar">
    <!-- for API level 11 -->
    <item name="android:height">@dimen/action_bar_height</item>
    <item name="android:background">@color/action_bar_color</item>
    <item name="android:displayOptions">showTitle</item>

    <!-- Support library compatibility -->
    <item name="displayOptions">showTitle</item>
</style> 
```

所以，问题是我的习惯覆盖了主题。这就是为什么我将 AppCompat（从“项目主题”）更改为 general_app_theme（从“清单主题”）的原因。现在我没有这个错误，预览中的操作栏又回来了。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-03-21T10:54:57.707

参考@Benno 提供的答案：您可以简单地从主题菜单中选择“DeviceDefault”，而不是更改为特定主题。这应该选择与模拟设备最兼容的主题。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-06-09T06:31:08.120

如果在尝试了以上所有解决方案后仍然存在问题，请尝试修改 API 级别，如下所示。不正确的 API 级别也可能导致问题。

[![在此处输入图像描述](../Images/88581dd877b7018435947acce07ba491.png)](https://i.stack.imgur.com/p7ZLO.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-07-29T08:41:01.047

可以通过将**styles.xml**中的主题从 Theme.AppCompat.Light.DarkActionBar更改为 Base.Theme.AppCompat.Light.DarkActionBar 来修复它

```
<style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
    </style> 
```

至

```
<style name="AppTheme" parent="Base.Theme.AppCompat.Light.DarkActionBar">
        <!-- Customize your theme here. -->
        <item name="colorPrimary">@color/colorPrimary</item>
        <item name="colorPrimaryDark">@color/colorPrimaryDark</item>
        <item name="colorAccent">@color/colorAccent</item>
    </style> 
```

并**清理项目**。它肯定会有所帮助。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-25T02:59:22.173

尝试将设计视图中的主题切换为“清单主题”中的选项之一。我猜这是因为您从清单中继承主题以支持多个 api 级别。无论如何，它对我有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-04-07T22:40:10.613

XML 中的大多数错误是由于您为资源指定的名称而发生的。

存储在可绘制文件夹中的图像需要以适当的方式命名。只需检查以下内容：

1.  有没有重复的文件？如果是这样，请删除重复项。（例如`"image.jpg"`和`"image.png"`不允许同时出现。它不会显示任何错误但有时会显示R.java无法解析）
2.  文件名是否包含任何大写字母？如果是这样，请右键单击该`file`-> `refactor`->`rename` 并将其重命名为全部小写，没有连字符，并且只允许使用 az 和 0-9。

只要确定上述情况。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-12-28T11:33:28.320

我遇到了同样的问题。在预览中选择另一个主题可以暂时解决问题。[喜欢图片](https://i.stack.imgur.com/Oq6oE.png)

最后，我发现我的styles.xml中有`AppTheme`and `AppBaseTheme`。并且`AppTheme`有父母 `AppBaseTheme`。`AppBaseTheme`具有一种系统样式的 父级。

并且每个布局文件都使用主题`AppTheme`。只需将`AppTheme`' 的父母更改为`AppBaseTheme`' 的父母。它永久地解决了问题。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-05-22T15:50:58.030

这已经很晚了，但我喜欢分享我在同样问题上的经验。我在 Android Studio 中遇到了同样的问题，我尝试了在互联网上找到的其他解决方案，但除非我**重建项目**并解决我的问题，否则对我没有任何用处。

希望这对你也有用。

快乐编码。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-06-13T19:54:07.853

我使用 Holo.Light 作为其父级的自定义主题遇到了同样的问题。在灰色文本中，Android Studio 表示缺少某些属性。当我如下添加这些缺少的属性时，渲染问题就消失了 -

```
 <item name="android:textEditSuggestionItemLayout"></item>
    <item name="android:textEditSuggestionContainerLayout"></item>
    <item name="android:textEditSuggestionHighlightStyle"></item> 
```

尽管它们在我的风格主题中引入了错误，但它们在渲染活动设计或构建我的应用程序时没有造成任何问题。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-08-23T16:38:19.443

将您的应用主题更改为 AppCombat.. [![在此处输入图像描述](../Images/2722e25c10c955a40ae8fa2fb8aec06b.png)](https://i.stack.imgur.com/NfLcD.png)

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-07-31T14:18:51.880

您可以通过更改“应用程序主题”并选择任何主题（例如灯光）来简单地删除此错误。此错误将被删除。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-04-17T12:53:24.377

对我来说，它发生在`menu.xml`文件中，因为我使用**android:Theme.Light**作为我的主题，所以我所做的是 -

1.  在名为 values-v21 的 res 目录中添加了新文件夹。

2.  添加**android:Theme.Material.Light**作为 AppTheme 在`styles.xml`.

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-01-03T12:39:45.823

只需点击“ **AppTheme** ”按钮，然后选择“ **Manifest Themes** ”。它在大多数情况下都有效。

# vb.net - Picture Box and Form Transparency

> ID：13439487
> 
> 赞同：1
> 
> 时间：2012-11-18T10:56:22.090
> 
> 标签：vb.net

Maybe I am missing something, but is it the case that when you set a pictureboxes background to transparent, all it really does is set it to the same color as the forms background?

What I am trying to do is draw an animation for the benefit of this, a bouncing ball - which I paint on the form, then overlay that with a picture frame. End result should be a bouncing ball in a picture frame, I should mention that the picture frame does not have a straight edge, so it is not possible to arrange 4 picture boxes in a frame. The ball needs to vanish behind the frame to change color and then magically bounce back out.

I have tried:

1.Setting the picture box background to pink and then key out the same pink, this basically cuts away everything, including that which is behind the picture box 2.Setting the picture box to transparent, this just displays the picture box background as the same color as the forms background. 3.I have tried painting the image in a rectangle, this had the same effect as drawing it in a picture box.

I am not sure what I am doing wrong, I am wondering if there is any other ways I could try or if someone has made a custom control or library that supports transparency?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T09:10:23.263

嗯...如果您想使用 Picturebox 并获得透明图像，请尝试将 picturebox 的背景设置为您的“球”（可能您需要一个图像编辑器）。并设置图片框透明。它曾经对我有用（VS Express 2010）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T09:52:51.583

在做了一些更深入的研究之后，我通过使用 PaintEventArgs 和 me.paint 将图像绘制到表单来解决这个问题

使用以下方法使每个图像透明：

```
Dim TestImage as Bitmap
TestImage.MakeTransparent(<Transparency Color>) 
```

不过谢谢你们俩的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T20:56:46.833

尝试使用具有背景图像集的面板。这是因为; 正如您所说：透明选项仅采用父级的背景色。

# facebook - How to put log in box in a website to ensure one user can vote once only?

> ID：13439488
> 
> 赞同：2
> 
> 时间：2012-11-18T10:56:21.367
> 
> 标签：facebook, voting, voting-system

I have a school project to do which requires us to develop an online voting website. how do i ensure one user has voted once only?

the website is supposed to be in booths in public places which means i cannot use ip addresses or cookies. i was planning to use fb login id or maybe some other email id but i cannot find relevant codes/links. i just want people to go through the procedure of entering the log in id but not go to fb directly.

my website cannot be published online.

could you please suggest how i can achieve this? it is a bit urgent, thank you!

# c# - How to change position of inherited items in an Inherited user control

> ID：13439490
> 
> 赞同：5
> 
> 时间：2012-11-18T10:56:30.977
> 
> 标签：c#, winforms, visual-studio, inheritance, user-controls

I have used a user control as a base class (let's call it BaseUC) with 3 labels (in 3 lines) on it (they are set as protected).

And there is another user control that inherits from it (InheritedUC). I have added two more labels in InheritedUC, which are positioned between the base's labels (so there are 5 lines).

Everything is fine is Visiual Studio's design UI view. But when I run the application, labels on BaseUC overlap with the ones in InheritedUC and I can't see the ones on the inherited control.

Any ideas to fix this? Thank you very much

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:37:11.943

来自 MSDN：[Control.Anchor 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor.aspx)

> 使用 Anchor 属性可以定义控件在调整其父控件大小时如何自动调整大小。**将控件锚定到其父控件可确保在调整父控件大小时，锚定边缘相对于父控件的边缘保持在相同位置。**
> 
> 您可以将控件锚定到其容器的一个或多个边缘。例如，如果您有一个带有 Anchor 属性值设置为 Top 和 Bottom 的 Button 的 Form，当 Form 的高度增加时，Button 会被拉伸以保持到 Form 的顶部和底部边缘的锚定距离。

在所有标签上设置 Anchor 属性：例如：

```
label1.Anchor = AnchorStyles.Top | AnchorStyles.Left; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:38:32.090

如果您将控件放在 a 中[`FlowLayoutPanel`](http://msdn.microsoft.com/en-us/library/system.windows.forms.flowlayoutpanel.aspx)并设置以下选项：

```
AutoScroll = True
FlowDirection = TopDown
WrapContents = False 
```

然后你应该得到面板，它会随着你的控件的添加或删除而增长和缩小。

[资源](http://www.philosophicalgeek.com/2008/12/12/an-easy-stack-layout-panel-for-winforms/)

# php - Doctrine2 use of criteria inside the entity class

> ID：13439492
> 
> 赞同：1
> 
> 时间：2012-11-18T10:57:03.097
> 
> 标签：php, symfony, doctrine-orm

I try to write a method whose task would be to return only selected elements of the collection of items associated with a particular entity.

```
/**
 * @ORM\OneToMany(targetEntity="PlayerStats", mappedBy="summoner")
 * @ORM\OrderBy({"player_stat_summary_type" = "ASC"})
 */
protected $player_stats;

public function getPlayerStatsBySummaryType($summary_type)
{
    if ($this->player_stats->count() != 0) {
        $criteria = Criteria::create()
            ->where(Criteria::expr()->eq("player_stat_summary_type", $summary_type));

        return $this->player_stats->matching($criteria)->first();
    }

    return null;
} 
```

but i get error:

```
PHP Fatal error:  Cannot access protected property Ranking\CoreBundle\Entity\PlayerStats::$player_stat_summary_type in /Users/piotrkowalczuk/Sites/lolranking/vendor/doctrine/common/lib/Doctrine/Common/Collections/Expr/ClosureExpressionVisitor.php on line 53 
```

any idea how to fix this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T15:12:29.917

固定的。它应该是：

```
 $criteria = Criteria::create()
        ->where(Criteria::expr()->eq("playerStatSummaryType", $summary_type)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:13:43.493

确保`PlyerStats`实体具有`getPlayerStatSummaryType()`公共方法。注释正在使用它，`@ORM\OrderBy`并且（我想）你的自定义标准正在使用它`getPlayerStatsBySummaryType()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:16:37.917

`$player_stat_summary_type`为类中的属性提供一个 getter `Ranking\CoreBundle\Entity\PlayerStats`。

# python - 返回一个包含另一个列表元素的列表

> ID：13439503
> 
> 赞同：0
> 
> 时间：2012-11-18T10:58:50.517
> 
> 标签：python, list

我需要写一个表达式，我完全被卡住了。我有部分代码我认为我写得正确，但我坚持其余部分。我需要代码返回一个包含列表中每个第 3 个元素的新列表，从索引 0 开始。

例如：如果我有`[0, 1, 2, 3, 4, 5]`我需要返回的列表`[0, 3]`

我到目前为止的代码是：

```
result = []
i = 0
while i < len(L):
    result.append(L[i])
    i = 
return result 
```

有人可以帮我弄清楚我需要什么`i =`表达式才能使这段代码正常工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T11:00:36.290

首先，您可以使用扩展切片表示法使事情变得更容易：

```
In [1]: l = [0, 1, 2, 3, 4, 5]

In [2]: l[::3]
Out[2]: [0, 3] 
```

从[文档](http://docs.python.org/2/reference/datamodel.html)：

> 一些序列还支持带有第三个“step”参数的“扩展切片”：a[i:j:k] 选择 a 中索引为 x 的所有项目，其中 x = i + n*k，n >= 0 和 i <= x <j。

至于您的代码示例，您可能需要`i = i + 3`或`i += 3`那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:02:36.037

也许试试这个：

```
result = []
for i in range(0, len(L), 3):
    result.append(L[i])
return result 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T11:05:23.190

另一种选择是使用`enumerate`.

```
[j for i, j in enumerate([0, 1, 2, 3, 4, 5]) if i % 3 == 0] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T11:06:55.357

这会给你一个可迭代的序列：

```
import itertools

l = [0, 1, 2, 3, 4, 5]
itertools.islice(l, 0, None, 3) 
```

要将其转换为列表，请使用 list() 函数。

```
impiort itertools

def get_sublist(l):
    return list(itertools.islice(l, 0, None, 3)) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-18T14:58:16.377

```
 python 3.2
    one way:
    >>> [i for i in range(0,len(L),3)]
    [0,3]

    your method:
    result = []
    i = 0
    while i <= len(L):
       result.append(L[i])
       i+=3
    return result 
```

# php - Symfony2 - Logging not working on Production

> ID：13439507
> 
> 赞同：3
> 
> 时间：2012-11-18T10:59:47.333
> 
> 标签：php, logging, symfony, production

I have a Symfony2 web application.

Everything works well in local. But when moving to production environment, there are some things that don't work the same as local.

Now, to figure out what is going on on Production I am trying to write some logs.

For some reason, I am not getting to write anything to the production log. Could anyone tell me what I am doing wrong? This is my code in the Controller in (nothing too sophisticated, by the way):

```
$logger = $this -> get("logger");
$logger -> err("My Trace --> " . $my_inspect_variable); 
```

The ./logs/prod.log is being writing properly by Symfony. But when I try to write something by myself, it just ignores me.

My `config_prod.yml` file:

```
monolog:
handlers:
    main:
        type:         fingers_crossed
        action_level: error
        handler:      nested
    nested:
        type:  stream
        path:  %kernel.logs_dir%/%kernel.environment%.log
        level: debug 
```

# android - 我想将一些数据从一个活动路径到另一个活动，但 onActivityResult 方法不起作用

> ID：13439508
> 
> 赞同：1
> 
> 时间：2012-11-18T10:59:53.883
> 
> 标签：android

首先，我创建了一个名为的类，`GetMusics.java`因此我想将音乐名称传递给`MusicPlater.java`类，但`onActivityResult`方法不起作用。我不知道我在哪里犯了错误。

这是`GetMusic.java`课

```
public class GetMusics extends ListActivity{

private final String SD_PATH = Environment.getExternalStorageDirectory().getPath();
List<String> songs = new ArrayList<String>();
MediaPlayer mp = new MediaPlayer();

class Mp3Filter implements FilenameFilter{

    @Override
    public boolean accept(File dir, String filename) {
        // TODO Auto-generated method stub
        return filename.endsWith(".mp3");
    }

}
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.music_layout);
    updateMusicList();
}

private void updateMusicList(){
    File file = new File(SD_PATH);
    if(file.listFiles(new Mp3Filter()).length>0){
        for(File f : file.listFiles(new Mp3Filter()) ){
            songs.add(f.getName());
        }
    }
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(getApplicationContext(), android.R.layout.simple_dropdown_item_1line,
            songs);
    setListAdapter(adapter);
}

@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Intent i = new Intent(GetMusics.this,MusicPlayer.class);
    i.putExtra("song_name", songs.get(position));
    setResult(100,i);
    finish();

} 
```

}

这是 MusicPlayer.java 类

```
public class MusicPlayer extends Activity {

MediaPlayer mp = new MediaPlayer();

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.music_player);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==100){
        String song_name = data.getStringExtra("song_name");
        mp.reset();
        try {
            mp.setDataSource(Environment.getExternalStorageDirectory()
                    .getPath() + "/" + song_name);
            mp.prepare();
            mp.start();
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalStateException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
}
} 
```

# php - 比较两个数组并排序 WRT USD

> ID：13439509
> 
> 赞同：0
> 
> 时间：2012-11-18T10:59:56.903
> 
> 标签：php, mysql

考虑以下是我的两个数据库表，其中的内容正在通过以下方式获取到数组`mysql_fetch_array($result)`：

**表 1**                                                                       **表 2**

```
+--------+-------------+ +--------+------ ------------------------------------+
| 美元 | 型号 | | 美元 | 型号 |
+--------+-------------+ +--------+------ ------------------------------------+
| 700 | iPad 2 WiFi 16GB | | 710 | iPad2 WiFi 16GB |
| 400 | iPhone 4S 16GB | | 450 | iPhone4S 16GB |
| 250 | iPod Touch(第 4 代)8GB | | 200 | iPod Touch 第 4 代 8GB |
+--------+-------------+ +--------+------ ------------------------------------+

```

现在我想做的是创建一个新数组并比较两个数组的位置`similar_text($array1,$array2) percentage = 90 or above`，然后按 USD 的 asc onbehlaf 对第三个数组进行排序。类似于 PHP + mysql 的东西

`Select * from Table1,Table2 where similar_text(Table1.model,Table2.model) > 90 order by Table1.USD asc`

**注意：**我在 mysql 中尝试了 LEVENSHTEIN，但它非常慢，尤其是当你的表中有 1000 行时

所以输出应该如下所示：

```
+--------+------------------------------ ------------------+
| 1美元 | 型号1 USD2 | 模型2 |
+--------+----------------------------------------+ ------------------------------+
| 250 | iPod Touch(第 4 代)8GB | | 200 | iPod Touch 第 4 代 8GB |
| 400 | iPhone 4S 16GB | | 450 | iPhone4S 16GB |
| 700 | iPad 2 WiFi 16GB | | 710 | iPad2 WiFi 16GB |
+--------+-------------+ +--------+------ ------------------------------------+

```

请让我知道我怎样才能做到这一点？

# iphone - 为不同的 iOS 版本使用不同的 Storyboard

> ID：13439510
> 
> 赞同：0
> 
> 时间：2012-11-18T10:59:58.220
> 
> 标签：iphone, xcode, ios5, ios6

我正在开发一个通用应用程序，我想支持 iOS 6、iOS 5 和 iPhone 5。我打算用不同的 Storyboard 来做到这一点，但问题是如何在 AppDelegate 中切换 Storyboard。我试过这个：

```
 - (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
    {

        float currentVersion = 6.0;

        CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

        if ([[[UIDevice currentDevice] systemVersion] floatValue] >= currentVersion == NO) {

            if (iOSDeviceScreenSize.height == 480)
            {

                UIStoryboard *ios5iphone = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone-ios5" bundle:nil];

            }

            else
            {UIStoryboard *ios5iphone = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad-ios5" bundle:nil];}

        }
return YES;

    } 
```

我有 4 个故事板（iPhone 4/5 和 iOS 6 的自动布局，iPad 的 iOS 6 的自动布局，iOS 5 的 iPhone 4 和 iOS 5 的 iPad）

我的问题是如何在应用程序启动之前切换故事板。

错误：

```
2012-11-18 13:42:42.471 iEveryTech[22902:c07] Unknown class Firs in Interface Builder file.
2012-11-18 13:42:42.494 iEveryTech[22902:c07] *** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: 'Could not instantiate class named NSLayoutConstraint'
*** First throw call stack:
(0x1632052 0xfaed0a 0x15daa78 0x15da9e9 0x43b7d7 0x43b9af 0x43b6b7 0x33c36d 0x1e3e2c 0x1e43a9 0x1e45cb 0x1ffb89 0x1ff9bd 0x1fdf8a 0x1fde2f 0x1fbffb 0x1fc85a 0x1e5fbf 0x1e621b 0x1e70f1 0x155fec 0x15b572 0x15572b 0x144bc2 0x144ce2 0x144ea8 0x14bd9a 0x11cbe6 0x11d8a6 0x12c743 0x12d1f8 0x120aa9 0x17c5fa9 0x16061c5 0x156b022 0x156990a 0x1568db4 0x1568ccb 0x11d2a7 0x11ea9b 0x228d 0x21b5 0x1)
terminate called throwing an exception(lldb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T13:22:01.420

根据您的错误，您的目标似乎是 iOS 版本 < 6。可能您正在使用目标摘要设置中的 Main Storyboard 设置。正如您[在此处](https://stackoverflow.com/a/12592651/251513)看到的，他完全按照您的意愿行事。
否则，您可以[将两个目标用于不同的版本](https://stackoverflow.com/a/12537643/251513)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T14:36:07.893

这是我的问题的灵魂

```
 #import "AppDelegate.h"

#define SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(v) ([[[UIDevice currentDevice] systemVersion] compare:(v) options:NSNumericSearch] != NSOrderedAscending)

@interface AppDelegate ()
@property (strong, nonatomic) UIViewController *initialViewController;
@end

@implementation AppDelegate

@synthesize window = _window;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CGSize iOSDeviceScreenSize = [[UIScreen mainScreen] bounds].size;

    UIStoryboard *mainStoryboard = nil;
    if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0")==NO)

            if (iOSDeviceScreenSize.height == 480)
            {

                mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone-ios5" bundle:nil];
    } else {
        mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad-ios5" bundle:nil];
    }

    if (SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO(@"6.0"))

        if (iOSDeviceScreenSize.height == 480)
        {

            mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
        } else {
            mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
        }

    self.initialViewController = [mainStoryboard instantiateInitialViewController];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = self.initialViewController;
    [self.window makeKeyAndVisible];

    return YES; 
```

感谢@Mat！

# asp-classic - asp字符串比较（我认为编码）

> ID：13439511
> 
> 赞同：1
> 
> 时间：2012-11-18T11:00:00.273
> 
> 标签：asp-classic, encode

我正在向我的asp页面发送一个发布请求，我使用我得到的参数以这种方式读取文件：

```
station = request.form("station")
StationFolderPath = currentDir & "iPhoneListener\Locations\" & station
fs.FolderExists(StationFolderPath) 
```

用英文字母没有问题。但是当我发送希伯来字母时，它找不到文件夹。我用这个检查过

```
response.write(right(station,6)) 
```

并得到：`#1497`也许有人知道如何将其编码`&#1497`为普通字母。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T06:08:31.997

[您可以从此处](https://stackoverflow.com/posts/6116611/edit)使用 HTML 解码功能并将代码中的第一行更改为 station = HTMLDecode(request.form("station"))。

```
Function HTMLDecode(sText)
    Dim regEx
    Dim matches
    Dim match
    sText = Replace(sText, "&quot;", Chr(34))
    sText = Replace(sText, "&lt;"  , Chr(60))
    sText = Replace(sText, "&gt;"  , Chr(62))
    sText = Replace(sText, "&amp;" , Chr(38))
    sText = Replace(sText, "&nbsp;", Chr(32))

    Set regEx= New RegExp

    With regEx
     .Pattern = "&#(\d+);" 'Match html unicode escapes
     .Global = True
    End With

    Set matches = regEx.Execute(sText)

    'Iterate over matches
    For Each match in matches
        'For each unicode match, replace the whole match, with the ChrW of the digits.

        sText = Replace(sText, match.Value, ChrW(match.SubMatches(0)))
    Next

    HTMLDecode = sText
End Function 
```

# xcode - 如何从这些文件构建 Mac OS X 安装程序包？

> ID：13439518
> 
> 赞同：1
> 
> 时间：2012-11-18T11:02:52.987
> 
> 标签：xcode, macos, package, packagemaker, pkg-file

已经尝试了很多方法：pkgbuild、productbuild、PackageMaker、Packages 应用程序......

我要构建的平面包的结构：

```
Distribution - xml script
MacBookPro2011EFIUpdate.pkg - flat package
Resources - resources folder, contains language localizations 
```

扁平包装信息：

```
id="com.apple.pkg.MacBookPro2011EFIUpdate" version="2.7.0.0.1.1330468277" 
```

例如，我在 productbuild 方面的失败：

```
productbuild: error: Cannot copy package "MacBookPro2011EFIUpdate.pkg" into product.
(Bundle-style package "MacBookPro2011EFIUpdate.pkg" is not supported.) 
```

请尝试从以下文件构建安装程序包：[链接](http://www.mediafire.com/?w7ib3vilwzjjzz9)
如果成功，请告诉您您是如何做到的！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-20T04:35:33.303

使用的正确命令确实是`productbuild`，但它只适用于 Flat 包，如错误所示。你`MacBookPro2011EFIUpdate.pkg`是一个 Bundle 样式的包：很容易区分 Bundle 样式的包是一个目录，而 Flat 包是一个 xar 存档。

要得到你想要的，首先将 Bundle 样式的包转换为 Flat 包：
`pkgutil --flatten MacBookPro2011EFIUpdate.pkg FlatMacBookPro2011EFIUpdate.pkg`

然后生成一个使用这个新 Flat 包的新分发文件：
`productbuild --package FlatMacBookPro2011EFIUpdate.pkg --synthesize newdist.dist`

将您的脚本和资源条目从您的分发文件复制到 newdist.dist。然后构建你的最终包：
`productbuild --resources Resources/ --distribution newdist.dist MyCoolPackage.pkg`

# regex - 通过 htaccess 重定向，其中 IP 不是 && 删除 index.php

> ID：13439519
> 
> 赞同：0
> 
> 时间：2012-11-18T11:02:56.403
> 
> 标签：regex, apache, .htaccess, expressionengine

我通常使用这个 htaccess 文件从我在 ExpressionEngine 中的 URL 中删除 index.php

```
AddType video/ogg .ogv
AddType video/mp4 .mp4
AddType video/webm .webm

AcceptPathInfo On

Options -Indexes

<IfModule mod_rewrite.c>
RewriteEngine On

Options +FollowSymLinks

# Looks for files and directories that do not exist
# and provide the segments to the index.php file
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond $1 !^/index.php
RewriteCond $1 !.(css|js|png|jpe?g|gif|ico)$ [NC]
RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

虽然效果很好，但在我们将此站点投入生产之前，我们会通过此 htaccess 文件将所有到给定 url 的流量引导到另一个

```
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_ADDR} !^127\.0\.0\.1
RewriteRule ^(.*)$ http://www.anotherdomain.com/ [R=301,NC] 
```

我自己的 IP 地址正在替换 localhost 调用，以便我可以访问该站点。

基本上我正在寻找的是这两个的组合，它将为我从我的 URL 中删除 index.php，但仍然重定向其他所有人。

谢谢，史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:08:54.870

发现这很好用：

```
RewriteEngine on

# If your IP address matches any of these - then dont re-write
RewriteCond %{REMOTE_ADDR} !^127\.0\.0\.1 
RewriteRule ^(.*)$ http://www.anothersite.com/ [R=302,L]

# do not rewrite links to the assets and theme files
RewriteCond $1 !^(assets|themes|images)

# do not rewrite for php files in the document root, robots.txt etc
RewriteCond $1 !^([^\..]+\.php|robots\.txt|crossdomain\.xml)

# but rewrite everything else
RewriteRule ^(.*)$ index.php/$1 [L] 
```

# maven - Maven 和 Maven 资源插件

> ID：13439520
> 
> 赞同：1
> 
> 时间：2012-11-18T11:03:05.147
> 
> 标签：maven

我想使用 maven-resources-plugin 将资源复制到另一个目录。

我的资源目录具有以下结构：

```
log4j.xml
xml
  |_ resource-1
  |_ resource-n 
```

我只想将 log4.xml 复制到输出目录。这是我的插件代码：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
    <configuration>
        <outputDirectory>${glassfish.conf}</outputDirectory>
            <resources>
                <resource>
                    <directory>${conf.location}</directory>
                    <includes>
                        <include>**/log4j.xml</include>
                    </includes>
                    <excludes>
                        <exclude>**/xml/*</exclude>
                    </excludes>
                </resource>
            </resources>
        </configuration>
        <executions>
            <execution>
                <id>copy-log4j-to-glassfish</id>
                <phase>package</phase>
                <goals>
                    <goal>copy-resources</goal>
                </goals>
            </execution>
        </executions>
</plugin> 
```

但所有内容都被复制到输出目录（log4j.xml 和 xml 目录）。

我试过了

```
<resource>
    <directory>${conf.location}</directory>
        <excludes>
            <exclude>**/xml/*</exclude>
        </excludes>
</resource> 
```

或者

```
<resource>
    <directory>${conf.location}</directory>
    <includes>
        <include>**/log4j.xml</include>
    </includes>                         
</resource> 
```

甚至

```
<resource>
    <directory>${conf.location}</directory>
    <excludes>
        <exclude>**/*</exclude>
    </excludes>
</resource> 
```

但是目录的所有内容都包括在内......有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T08:53:45.033

回答 Andrew Logvinov ：

使用这样的插件：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
    <executions>
        <execution>
            <id>copy-log4j-to-glassfish</id>
            <phase>package</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>${glassfish.conf}</outputDirectory>
                <resources>
                    <resource>
                        <directory>${conf.location}</directory>
                        <includes>
                            <include>log4j.xml</include>
                        </includes>
                    </resource>
                </resources>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

它工作得很好，只复制了 log4j.xml。

现在有了这个插件配置：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <version>2.6</version>
    <executions>
        <execution>
            <id>copy-log4j-to-glassfish</id>
            <phase>package</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <outputDirectory>${glassfish.conf}</outputDirectory>
        <resources>
            <resource>
                <directory>${conf.location}</directory>
                <includes>
                    <include>log4j.xml</include>
                </includes>
            </resource>
        </resources>
    </configuration>
</plugin> 
```

我所有的文件都被复制了。

[我在这里](http://maven.apache.org/xsd/maven-4.0.0.xsd)检查 xsd块`configuration`可以在标签内`plugin`或`execution`标签内，所以我不知道这是插件错误还是对我的误解。

# xcode - Xcode 图标问题

> ID：13439521
> 
> 赞同：0
> 
> 时间：2012-11-18T11:03:09.507
> 
> 标签：xcode

在应用程序加载器中，我总是得到一个错误，而不是 Info.plist 文件中指定的图标不在顶级应用程序包装器下。

请帮助我已经解决了这个问题 2 天，但它还没有解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:29:38.780

那么你的文件的路径是什么？它不能是 Bla/Icon.png 而是 Icon.png（不在子文件夹中）

# r - 如何将单列转换为R中的矩阵

> ID：13439531
> 
> 赞同：2
> 
> 时间：2012-11-18T11:04:31.590
> 
> 标签：r, vector, matrix

我有一个长度为 R*N 的列，我想将它转换为 R 中的 RxN 矩阵。有没有简单的方法可以在不使用循环和按值分配的情况下完成此操作？

格式为

```
r1
r2
r3

..

rR*N 
```

将其转换为

```
r(1..N)
r(N+1 .. 2*N)
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T11:17:42.627

这在 R 中非常简单。假设您的对象被称为`dat`：

```
matrix(dat, R, byrow=TRUE) 
```

其中`R`表示行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T16:40:15.307

如果您的数据集很大，您可能希望节省内存。这是一个简单的例子：

```
x = round(runif(15, min=1, max=15));
## use dim() to set dimensions instead of matrix() to avoid duplication of x
dim(x) <- c(3, 5);
rowNames = c("row1", "row2", "row3");
colNames = c("c1", "c2", "c3", "c4", "c5");
dimnames(x) = list(rowNames, colNames);
print(x);

     c1 c2 c3 c4 c5
row1  7  2  2 11  9
row2  2  6 11 14 10
row3  2 11  6 13 12 
```

请注意，“x”的类现在是“矩阵”：

```
> class(x)
[1] "matrix" 
```

# android - 移植ROM时出现netd错误

> ID：13439534
> 
> 赞同：0
> 
> 时间：2012-11-18T11:05:16.237
> 
> 标签：android

我一直在尝试将 CM9 从 Galaxy Y 移植到 s5830i，我知道从源代码移植更好，但由于我不知道如何，我必须这样做。问题是，当我刷它时，我得到了这个错误：

E/NetdConnector（1455）：在 java.lang.Thread.run（Thread.java:856） E/NetdConnector（1455）：通信错误 E/NetdConnector（1455）：java.io.IOException：没有这样的文件或目录 E /NetdConnector（1455）：在 android.net.LocalSocketImpl.connectLocal（本机方法） E/NetdConnector（1455）：在 android.net.LocalSocketImpl.connect（LocalSocketImpl.java:238） E/NetdConnector（1455）：在 android。 net.LocalSocket.connect(LocalSocket.java:98) E/NetdConnector(1455)：在 com.android.server.NativeDaemonConnector.listenToSocket(NativeDaemonConnector.java:119) E/NetdConnector(1455)：在 com.android.server。 NativeDaemonConnector.run(NativeDaemonConnector.java:88)

我也一直在寻找解决方案，有人说这是 ICS 的错误，也有人说真正的问题出在 libsysutil.so 中，所以我将其替换为现有的，但仍然没有运气。我也更换了netd，但仍然......我已经解决了除了那个之外的所有问题，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:38:19.070

这是因为 lib 文件不匹配，通常在移植时发生。

给你的另一个建议是永远不要替换 /system/bin 的 netd 否则你的 Rom 将无法启动。

尝试通过交换 libandroid_runtime.so ， libwebcore.so

# sharepoint - SP.Folder 的 DeleteObject() 和 Recycle() 方法有什么区别

> ID：13439535
> 
> 赞同：5
> 
> 时间：2012-11-18T11:05:16.940
> 
> 标签：sharepoint, directory, recycle, sharepoint-clientobject

任何人都可以帮助我了解 SP.Folder 的 DeleteObject() 和 Recycle() 方法之间的区别吗？

我找到了这个文档，但对我来说并不清楚。

[http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfolder.recycle.aspx](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfolder.recycle.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:09:08.530

```
Delete() 
```

不使用回收站永久删除。

将项目移动到回收站使用

```
Recycle(); 
```

[http://nickgrattan.wordpress.com/2007/10/09/spfolder-splist-deleting-versus-recycling/](http://nickgrattan.wordpress.com/2007/10/09/spfolder-splist-deleting-versus-recycling/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-19T09:40:18.703

SharePoint 像 Windows 操作系统一样维护一个回收站，我们可以通过代码使用它来临时删除。我在我们的一个项目中使用了 Recycle()。当我们使用 Delete() 或 DeleteObject() 时，它会直接删除项目而不将它们放入回收站，但如果您使用 Recycle() 方法，它会将项目发送到回收站。

希夫·托马尔

Shiv.Tomar@tekritisoftware.com

[http://www.tekritisoftware.com/brochure/Microsoft-Sharepoint-Development](http://www.tekritisoftware.com/brochure/Microsoft-Sharepoint-Development)

# drop-down-menu - nicEdit 不显示选定的字体大小和系列

> ID：13439542
> 
> 赞同：2
> 
> 时间：2012-11-18T11:06:15.320
> 
> 标签：drop-down-menu, fonts, nicedit

我已将 nicEdit 添加到我的代码中，但不知何故，当我选择字体大小和系列时，nicEdit 不显示所做的选择。有什么出路和可能的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T13:02:33.950

好吧，我稍微调整了 js 文件以获取答案。只要看起来足够近，所有功能都在那里。在. `update`_ `var nicEditorSelect = bkClass.extend({`当任何下拉框的值发生更改时，将调用此函数。`elm`传递的参数是值。你可以 console.log 它来查看值。

```
this.setDisplay(elm) 
```

将设置显示的选定值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-19T09:36:25.300

基于最新的[nicEdit.js](http://nicedit.com/download.php)，这是我改进选择选项的解决方案。我已经修复了要显示的显示文本，但为每个选项添加了一个新的显示文本作为第三个数组参数，以避免巨大的 Header 1 显示文本等。我​​也调整了宽度。

```
/* START CONFIG */
var nicSelectOptions = {
    buttons: {
        'fontFormat' : {name : __('Select Font Format'), type : 'nicEditorFontFormatSelect', command : 'formatBlock'},
        'fontFamily': { name: __('Select Font Family'), type: 'nicEditorFontFamilySelect', command: 'fontname' },
        'fontSize' : {name : __('Select Font Size'), type : 'nicEditorFontSizeSelect', command : 'fontsize'}
    }
};
/* END CONFIG */
var nicEditorSelect = bkClass.extend({

    construct : function(e, buttonName, options, nicEditor) {
        this.options = options.buttons[buttonName];
        this.elm = e;
        this.ne = nicEditor;
        this.name = buttonName;
        this.selOptions = new Array();

        this.buttonWidth = buttonName === "fontSize" ? 50 : 100;

        this.margin = new bkElement('div').setStyle({ 'float': 'left', margin: '2px 1px 0 1px' }).appendTo(this.elm);
        this.contain = new bkElement('div').setStyle({ width: this.buttonWidth + 'px', height: '20px', cursor: 'pointer', overflow: 'hidden' }).addClass('selectContain').addEvent('click', this.toggle.closure(this)).appendTo(this.margin);
        this.items = new bkElement('div').setStyle({ overflow: 'hidden', zoom: 1, border: '1px solid #ccc', paddingLeft: '3px', backgroundColor: '#fff' }).appendTo(this.contain);
        this.control = new bkElement('div').setStyle({ overflow: 'hidden', 'float': 'right', height: '18px', width: '16px' }).addClass('selectControl').setStyle(this.ne.getIcon('arrow', options)).appendTo(this.items);
        this.txt = new bkElement('div').setStyle({ overflow: 'hidden', 'float': 'left', width: this.buttonWidth - 22 + 'px', height: '16px', marginTop: '1px', fontFamily: 'sans-serif', textAlign: 'center', fontSize: '12px' }).addClass('selectTxt').appendTo(this.items);

        if (!window.opera) {
            this.contain.onmousedown = this.control.onmousedown = this.txt.onmousedown = bkLib.cancelEvent;
        }

        this.margin.noSelect();

        this.ne.addEvent('selected', this.enable.closure(this)).addEvent('blur', function(event) {
            this.disable.closure(this);
            this.setDisplay(elm);
        });

        this.disable();
        this.init();

    },

    disable : function() {
        this.isDisabled = true;
        this.close();
        this.contain.setStyle({opacity : 0.6});
    },

    enable : function(t) {
        this.isDisabled = false;
        this.close();
        this.contain.setStyle({opacity : 1});
    },

    setDisplay : function(txt) {
        this.txt.setContent(txt);
    },

    toggle : function() {
        if(!this.isDisabled) {
            (this.pane) ? this.close() : this.open();
        }
    },

    open : function() {
        this.pane = new nicEditorPane(this.items, this.ne, { minWidth: this.buttonWidth - 2 + 'px', padding: '0px', borderTop: 0, borderLeft: '1px solid #ccc', borderRight: '1px solid #ccc', borderBottom: '0px', backgroundColor: '#fff' });

        for(var i=0;i<this.selOptions.length;i++) {
            var opt = this.selOptions[i];
            var itmContain = new bkElement('div').setStyle({ overflow: 'hidden', borderBottom: '1px solid #ccc', minWidth: this.buttonWidth - 2 + 'px', textAlign: 'left', overflow: 'hidden', cursor: 'pointer' });
            var itm = new bkElement('div').setStyle({padding : '0px 4px'}).setContent(opt[1]).appendTo(itmContain).noSelect();
            itm.addEvent('click',this.update.closure(this,opt[0],opt[2])).addEvent('mouseover',this.over.closure(this,itm)).addEvent('mouseout',this.out.closure(this,itm)).setAttributes('id',opt[0]);
            this.pane.append(itmContain);
            if(!window.opera) {
                itm.onmousedown = bkLib.cancelEvent;
            }
        }
    },

    close : function() {
        if(this.pane) {
            this.pane = this.pane.remove();
        }   
    },

    over : function(opt) {
        opt.setStyle({backgroundColor : '#ccc'});           
    },

    out : function(opt) {
        opt.setStyle({backgroundColor : '#fff'});
    },

    add : function(k,v,d) {
        this.selOptions.push(new Array(k,v,d)); 
    },

    update: function (elm, elmTxt) {
        this.ne.nicCommand(this.options.command, elm);
        this.setDisplay(elmTxt);
        this.close();   
    }
});

var nicEditorFontFamilySelect = nicEditorSelect.extend({
    sel: { 'arial': 'Arial', 'comic sans ms': 'Comic&nbsp;Sans', 'courier new': 'Courier&nbsp;New', 'georgia': 'Georgia', 'helvetica': 'Helvetica', 'impact': 'Impact', 'times new roman': 'Times', 'trebuchet ms': 'Trebuchet', 'verdana': 'Verdana' },

    init : function() {
        this.setDisplay('Font');
        for(itm in this.sel) {
            this.add(itm, '<font face="' + itm + '">' + this.sel[itm] + '</font>', '<font face="' + itm + '">' + this.sel[itm] + '</font>');
        }
    }
});

var nicEditorFontSizeSelect = nicEditorSelect.extend({
    sel: { 1: '8', 2: '10', 3: '12', 4: '14', 5: '18', 6: '24' },
    init: function () {
        this.setDisplay('Size');
        for (itm in this.sel) {
            this.add(itm, '<font size="' + itm + '">' + this.sel[itm] + '</font>', this.sel[itm]);
        }
    }
});

var nicEditorFontFormatSelect = nicEditorSelect.extend({
    sel: { 'p': 'Paragraph', 'h1': 'Heading&nbsp;1', 'h2': 'Heading&nbsp;2', 'h3': 'Heading&nbsp;3', 'h4': 'Heading&nbsp;4', 'h5': 'Heading&nbsp;5', 'h6': 'Heading&nbsp;6', 'pre': 'Pre' },

    init : function() {
        this.setDisplay('Style');
        for(itm in this.sel) {
            var tag = itm.toUpperCase();
            this.add('<' + tag + '>', '<' + itm + ' style="padding: 0px; margin: 0px;">' + this.sel[itm] + '</' + tag + '>', this.sel[itm]);
        }
    }
}); 
```

我还根据自己的喜好重新排序了 buttonList 中的选择：

```
/* START CONFIG */

var nicEditorConfig = bkClass.extend({
    buttons : {
        'bold' : {name : __('Click to Bold'), command : 'Bold', tags : ['B','STRONG'], css : {'font-weight' : 'bold'}, key : 'b'},
        'italic' : {name : __('Click to Italic'), command : 'Italic', tags : ['EM','I'], css : {'font-style' : 'italic'}, key : 'i'},
        'underline' : {name : __('Click to Underline'), command : 'Underline', tags : ['U'], css : {'text-decoration' : 'underline'}, key : 'u'},
        'left' : {name : __('Left Align'), command : 'justifyleft', noActive : true},
        'center' : {name : __('Center Align'), command : 'justifycenter', noActive : true},
        'right' : {name : __('Right Align'), command : 'justifyright', noActive : true},
        'justify' : {name : __('Justify Align'), command : 'justifyfull', noActive : true},
        'ol' : {name : __('Insert Ordered List'), command : 'insertorderedlist', tags : ['OL']},
        'ul' :  {name : __('Insert Unordered List'), command : 'insertunorderedlist', tags : ['UL']},
        'subscript' : {name : __('Click to Subscript'), command : 'subscript', tags : ['SUB']},
        'superscript' : {name : __('Click to Superscript'), command : 'superscript', tags : ['SUP']},
        'strikethrough' : {name : __('Click to Strike Through'), command : 'strikeThrough', css : {'text-decoration' : 'line-through'}},
        'removeformat' : {name : __('Remove Formatting'), command : 'removeformat', noActive : true},
        'indent' : {name : __('Indent Text'), command : 'indent', noActive : true},
        'outdent' : {name : __('Remove Indent'), command : 'outdent', noActive : true},
        'hr' : {name : __('Horizontal Rule'), command : 'insertHorizontalRule', noActive : true}
    },
    iconsPath : '../nicEditorIcons.gif',
    buttonList: ['save', 'bold', 'italic', 'underline', 'left', 'center', 'right', 'justify', 'ol', 'ul', 'fontFormat', 'fontFamily', 'fontSize', 'indent', 'outdent', 'image', 'upload', 'link', 'unlink', 'forecolor', 'bgcolor'],
    iconList : {"bgcolor":1,"forecolor":2,"bold":3,"center":4,"hr":5,"indent":6,"italic":7,"justify":8,"left":9,"ol":10,"outdent":11,"removeformat":12,"right":13,"save":24,"strikethrough":15,"subscript":16,"superscript":17,"ul":18,"underline":19,"image":20,"link":21,"unlink":22,"close":23,"arrow":25}

});
/* END CONFIG */ 
```

[选择前的截图](http://i.stack.imgur.com/Od9Cy.png)

[选择后截图](http://i.stack.imgur.com/FakqV.png)

# matlab - matlab中数组中的单元数

> ID：13439543
> 
> 赞同：0
> 
> 时间：2012-11-18T11:06:18.760
> 
> 标签：matlab

```
fid=fopen('transform.txt');
alltext = textscan(fid, '%s');

d = size(alltext)

for k=1:1
    line = alltext{1}{k}
end 
```

我正在使用`size()`函数来获取单元格的数量，但它没有给我想要的答案....我想要名为的数组变量中的单元格数量`alltext`

转换.txt 文件

mecca06.pgm 2 0.707 -0.1414 0 0.707 1.2726 0 0 0 1 mecca06.pgm c

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:16:31.860

如果 textscan 找到字符串，它会返回一个包含一个或多个元胞数组的元胞数组。您搜索的说明符数量（在您的情况下为 %s）定义了它返回的嵌套单元格数组的数量。对于您的情况，您只搜索 %s 的最原始解决方案是：

```
 d = size(alltext{1}); 
```

# javascript - 使用 || 的 Javascript 命名空间

> ID：13439545
> 
> 赞同：3
> 
> 时间：2012-11-18T11:06:33.283
> 
> 标签：javascript, javascript-namespaces

我已经看到 JavaScript 中的命名空间定义为：

```
var AppSpace = AppSpace || {}; 
```

和/或

```
var namespace = {}; 
```

谁能告诉我：

1.  有什么不同？
2.  是什么|| 用于第一个示例？
3.  为什么在第一个示例中`AppSpace`使用了两次？
4.  哪个是首选语法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T11:10:38.607

`||`运算符是 JavaScript 中的which`logical or`如果左操作数为真，则返回其左操作数，否则返回其右操作数。第一种语法更可取，因为当您不确定命名空间是否已定义时，您可以在代码中的多个位置（例如在不同的文件中）重复使用它：

```
var AppSpace = AppSpace || {}; // AppSauce doesn't exist (falsy) so this is the same as:
                               // var AppSauce = {};
AppSauce.x = "hi";

var AppSpace = AppSpace || {}; // AppSauce does exist (truthy) so this is the same as:
                               // var AppSauce = AppSauce;
console.log(AppSauce.x); // Outputs "hi" 
```

相对：

```
var AppSpace = {};
AppSauce.x = "hi";

var AppSpace = {}; // Overwrites Appsauce
console.log(AppSauce.x); // Outputs undefined 
```

# ruby-on-rails - 如何通过href向控制器发送参数

> ID：13439546
> 
> 赞同：0
> 
> 时间：2012-11-18T11:06:39.380
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, href

我必须像这样发送`id`我的控制器：

```
<%=link_to(@active,{:controller => 'emppedes', :action=> 'index', :id => @id})%> 
```

但使用`href`而不是`link_to`. 如果我这样做`href`：

```
<a href="/emppedes"> 
```

没有`id`发送。

```
<a href="/ emppedes :id => @id"> 
```

不起作用。我如何`id`发送`href`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:12:35.517

为什么不能使用`link_to`助手？无论如何，您可能想要：

```
<a href="/emppedes?id=<%=@id%>"> 
```

但我强烈建议不要在应用内的链接中使用原始标签。我相信您也可以使用`link_to`助手实现所有目标。请举例说明为什么你认为你不能使用它。

* * *

（回复您的评论）我会这样做：

```
<%= content_tag :li, :class => ( 'active' if @active == "personaldetails" ) do %>
  <%= link_to '/emppedes', :id => @id do %>
    <i class="icon-chevron-right"></i>
    Personal Details
  <% end %>
<% end %> 
```

# jquery - id 的 jQuery 选择器是否总是在没有引号和 # 符号的情况下工作？

> ID：13439547
> 
> 赞同：1
> 
> 时间：2012-11-18T11:06:44.033
> 
> 标签：jquery, jquery-selectors

我突然发现，在使用 Mozilla / jQuery v1.8.2 时，我不需要使用带引号和 # 符号的 id。例如，$(bt2) 与 $(“#bt2”) 的工作方式相同，请参见下面的代码。

这个选择器会一直工作吗？使用这种较短的选择形式是否有任何潜在的缺点？

```
<html>
<head>
    <title>append</title>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript">
    $(document).ready (function(){
        $(bt2).click(function(){
           $(i1).append("<li>a4</li>", "<li>a5</li>");
        });
    }); 
   </script>
</head>
<body>
    <button id="Button1">Append List</button>
    <ul id="i1">
        <li>a1</li>
    </ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:36:25.423

一些浏览器支持直接访问没有 id 的 html 元素，你甚至不需要 jquery 选择器或 document.getElementById 来访问它们。`In the jquery selector the id you are passing is not taken as Id but as object (html element)`因为 Button1.id 给你 id 如果它是 id 那么它不应该给你 id。在这里，我没有使用任何选择器，甚至没有使用 getElementById **[Live Demo](http://jsfiddle.net/rajaadil/zvkgF/3/)**。

**html**

```
<button id="Button1">Append List</button> 
```

**Javascript**

```
alert( Button1.id); //Without any jquery selector or getElementById 
```

**在下面给出的用于在 ID 为 Button1 的按钮上绑定事件的代码中，Button1 不被​​视为 id，而是对象和 jquery 正在将 javascript 可访问的 dom 对象转换为 jquery 对象并绑定单击事件**

```
$(Button1).click(function(){
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:13:45.977

这是一个你不应该依赖的假设，因为每个浏览器都在使用它。

您最好完全避免这种情况，因为其他开发人员使用您的代码甚至都不好。您应该始终尝试推理和使用最好的语义，不仅是关于您自己，而且是记录在案的方式。

在 jQuery 中，您有一整页仅与[选择器](http://api.jquery.com/category/selectors/)有关。

请使用这样的描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:09:05.363

您可以这样做，但请注意，这可能不适用于其他浏览器。相反，您将需要使用

```
$("#id") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-29T07:33:51.357

浏览器缓存具有 id 的元素并将其存储在文档的 HTMLCollection 中。要在 chrome 中查看开发人员工具，请在加载页面时在 javascript 的开头放置一个断点。在“本地”部分下的右窗格下查看。在这里你展开这个：document，在所有：HTMLAllCollection[]下你可以看到所有元素，下面是一个列表，其中包含所有具有id的元素。但是 jQuery 文档[https://api.jquery.com/id-selector/](https://api.jquery.com/id-selector/)没有提到这一点，所以它不是正确的语法。同样为了可读性和维护，最好坚持使用 $('#id')。

# iphone - 是否可以通过 UIActivityViewController 共享图像并保留 exif 数据？

> ID：13439549
> 
> 赞同：5
> 
> 时间：2012-11-18T11:07:08.993
> 
> 标签：iphone, image, camera, uiimagepickercontroller, photos

我有一个应用程序，可以通过以下方式将图像保存到相机胶卷中的自定义相册中

```
 [library writeImageToSavedPhotosAlbum:[newTestImage CGImage] metadata:metadata
      completionBlock:^(NSURL *assetURL, NSError *error) {
        //error
      }
    ]; 
```

这很好用，但是，我想允许用户从应用程序内共享这些图像，我是通过

```
 ALAsset *assetToShare = self.images[indexPath.row];
        NSString *stringToShare = @"…..";
        NSArray *dataToShare = @[assetToShare, stringToShare];

        UIActivityViewController *activityVC = [[UIActivityViewController alloc]
              initWithActivityItems:dataToShare applicationActivities:nil];

        [self presentViewController:activityVC animated:YES completion: ^{
            //Some Expression  
        }];} 
```

但是，这样做会删除图像中的所有 exif 数据，有没有办法可以实现相同的功能但保留元数据？非常感谢您的帮助。

编辑：用于输入 ALAssets 的代码

```
 if ([[group valueForProperty:ALAssetsGroupPropertyName] isEqualToString:@"my pics"]) {
                           [self.assetGroups addObject:group];
                           _displayArray = [self.assetGroups objectAtIndex:0]; ...}]; 
```

然后：

```
 [_displayArray enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
    if (result) {
        [self.images addObject:result]; }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T15:15:20.850

你有没有尝试过这样的事情？只是传递实际图像。

```
ALAsset *assetToShare = self.images[indexPath.row];

ALAssetRepresentation *rep = [assetToShare defaultRepresentation];

UIImage *imageToShare = [UIImage imageWithCGImage:[rep fullResolutionImage]];

NSString *stringToShare = @"…..";
NSArray *dataToShare = @[imageToShare, stringToShare];

UIActivityViewController *activityVC = [[UIActivityViewController alloc]
initWithActivityItems:dataToShare applicationActivities:nil];

[self presentViewController:activityVC animated:YES completion: ^{
//Some Expression
}];} 
```

# mysql - 编写没有组子查询的查询？

> ID：13439552
> 
> 赞同：0
> 
> 时间：2012-11-18T11:07:31.900
> 
> 标签：mysql

据我了解，每次查看一行时都会调用子查询，在这种情况下，将查看每一行。

我如何重写这个查询？子查询只需要运行一次，但是当我必须删除组中只有 1 个条目的 id 时，我想不出如何选择 id（我希望组数>1）。

目的是获取与其他行大小相同的行列表

```
select id 
from file 
where size in 
    ( 
    select size from 
        (
        select count(*) as c, size 
        from file 
        group by size 
        having c>1 and size>0
        ) as t
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:36:49.697

加入反对子查询怎么样？

```
SELECT  a.*
FROM    `FILE` a 
        INNER JOIN
        (
            SELECT  COUNT(*) as c, `SIZE` 
            FROM    `file `
            WHERE   `size` > 0
            GROUP BY size 
            having  COUNT(*) > 1
        ) b ON a.Size = b.Size 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T12:09:53.220

恕我直言，优化器应该处理它，所以你不必这样做。

让 MySQL 解释语句。

除此之外，您可以将子查询存储在临时表中

更新

```
CREATE TEMPORARY TABLE tmpTab
  SELECT count(*) AS c, size 
  FROM file 
  GROUP BY size 
  HAVING c>1 AND size>0;

SELECT id 
FROM file 
WHERE size IN 
    ( SELECT size FROM tmpTab ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T12:27:56.470

您可以只使用一个子查询而不是两个：

```
select id 
from file 
where size in (
    select size 
    from file 
    group by size 
    having count(*)>1 and size>0
    ) 
```

但如果你只想使用连接，你可以使用这样的东西：

```
select distinct file.id
from file inner join file file1 on file.size = file1.size
where file.size>0 and file.id <> file1.id 
```

# google-chrome - 尝试开发扩展时如何集成chrome浏览器内置工具（特别是“查找”）？

> ID：13439553
> 
> 赞同：1
> 
> 时间：2012-11-18T11:07:56.010
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools, replace

我正在尝试开发一个 chrome 扩展，它的一部分需要具有全局查找关键字功能，就像浏览器附带的内置“查找”（ **Ctrl+F ）一样。****（编辑：**它需要在同一个选项卡上多次并同时调用“查找”）

我的第一个想法是找到一个可以从 Chrome 中提供“查找”功能的 API。但是，在浏览完[列表](http://developer.chrome.com/extensions/api_index.html)后，我看不到我在寻找什么。此外，我的问题的关键字（“Chrome 扩展”、“Chrome API”、“查找”、“搜索”）过于笼统，即使经过大量谷歌搜索，我也找不到此类 API 的类似示例或信息。

为了提供一致的用户体验，我很乐意在我的扩展程序中提供类似的（如果不准确的话）“查找”工具。为了避免重新发明轮子，最好能以某种方式调用内置函数。[现有的扩展](https://chrome.google.com/webstore/search/find?utm_source=chrome-ntp-icon)大多是 Javascript 中自己的实现，有限制（不能在 iframe 中搜索，没有全局突出显示等）。这将是我最后的手段。

有谁知道这样的 API（**将从浏览器调用内置的“查找”工具**）或与我的问题类似的示例？如果没有，请让我知道在 javascript 中实现它的最佳方法是什么，因为我是词法分析或解析的新手。

非常感谢！！

-加文

PS：这是我在这里的第一篇文章，如果我没有就我的问题提供足够的信息（或者你根本不认为这是一个问题），请随时告诉我！

**EDIT2：**我正在尝试构建一个基于“查找”的改进扩展，可以解决这种情况：

在文本密集型页面中，如果我想定位一个区域，其中提到了关键字**A**和**关键字 B** ，但这两个关键字并不直接相邻，并且它们都在文档中出现了很多次。在这种情况下，我既不能搜索“ **keywordA keywordB** ”（因为它们彼此不相邻），也不能搜索单个关键字（出现次数过多）。

例如，在基于 html 的数学教科书中，您希望找到同时提及“**线性代数**”和“**矩阵**”的次数最多的章节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T09:13:25.397

内置搜索不支持同一选项卡上的多个并发调用。因此，即使有一天它可以通过 API 访问，它也不太可能支持并发，因为并发搜索对于单个交互式用户的一般用例来说并不自然，并且涉及 UI。作为对现有内置搜索的改进，我可以想象的一件事是支持查询语言，这将允许搜索替代方案（即`car | auto`for `OR`-ing），这将以某种方式解决您需求的“多个”部分。

您的选择是使用内容脚本来搜索文本，例如（使用 jQuery）：

```
var search_i = $('*:contains("text to find")'); 
```

通过这种方式，您可以根据需要执行和组合尽可能多的搜索，但您需要设计一个适当的（可理解的）UI，为每个搜索呈现结果，而不会干扰其他搜索。

# prototypejs - 使用 Jasmine 测试原型自定义事件

> ID：13439555
> 
> 赞同：1
> 
> 时间：2012-11-18T11:07:57.527
> 
> 标签：prototypejs, jasmine

我为那些仍然使用 PrototypeJS 并希望使用[jasmine](https://github.com/pivotal/jasmine)和[jasmine-prototype](https://github.com/masylum/jasmine-prototype)插件测试自定义事件的人发布这个。

我们根据用户点击或表单提交触发自定义事件。我们想要一种简单的方法来测试自定义事件是否正确触发。

这是一个例子：

```
var CustomEventsDispatcher = ( function() {
   function init(){

    //if elements exists
    if($$('a.trigger_bomb')) {
        // Observe the elements
        $$(elements).each(function(element) {
            element.observe('click', function(e) {
                this.fire("bomb:explode", {})
            });
        });
    }

    return {'init' : init};
 })(); 
```

使用网络上可用的资源，我创建了一个夹具......

```
 // spec/fixtures/links.html
 <a class="trigger_bomb" href="#"> Trigger Bomb </a> 
```

...和一个测试套件：

```
 //spec/trigger_bomb_spec.js
 describe("Trigger Bombs", function() {

    beforeEach(function(){
       loadFixtures("links.html")
       CustomEventsDispatcher.init();
   })

   it("should raise the custom event", function(){
      var element=$$('a.trigger_bomb').first();
      spyOnEvent(element, 'click');
      element.click();

      expect('click').toHaveBeenTriggeredOn(element);
      expect('bomb:explode').toHaveBeenTriggeredOn(element);
   });
 }); 
```

第一个断言工作正常，但不是第二个。原因是它`spyOnEvent`改变了点击事件的处理方式`element`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:47:10.657

最简单的方法是像这样模拟`fire`函数：

```
 //spec/trigger_bomb_spec.js
 describe("Trigger Bombs", function() {

    beforeEach(function(){
       loadFixtures("links.html")
       CustomEventsDispatcher.init();
   })

   it("should raise the custom event", function(){
      var element=$$('a.trigger_bomb').first();
        spyOn(element, 'fire')
        element.click()
        expect(element.fire).toHaveBeenCalledWith('bomb:explode', {})
   });
 }); 
```

然而这个解决方案有一个副作用：点击将被执行，这将导致 jasmine 页面结果不断重新加载。您需要拦截点击事件并使用全局`beforeEach`挂钩停止默认行为：

```
// spec/helpers/spec_helper.js
beforeEach(function(){

    // stop all clicks from fixtures 
    // (but allow clicks from the user in the jasmine result page)
    document.observe('click', function(e){
        var element = e.findElement('#HTMLReporter')
        if (element == document)   {
            Event.stop(e)
        }
    })             
}) 
```

希望这将帮助某人节省几个小时的调试时间:)。随意评论/改进/提出更好的选择。

# matlab - Matlab：如何随机置换和逆置换向量

> ID：13439557
> 
> 赞同：3
> 
> 时间：2012-11-18T11:08:22.843
> 
> 标签：matlab, random

我需要在 Matlab 中实现以下算法。

1.  认为`A = [3 4 1 9 5]`
2.  随机排列`A`说，`A = [5 1 4 3 9]`
3.  将 2 添加到前两个元素：`A = [7 3 4 3 9]`
4.  置换A背，`A = [3 4 3 9 7]`

我正在使用`randperm()`函数来置换：

```
index = randperm(numel(A));
A = A(index); 
```

但问题是如何在将数组更改为第一个排列后将其重新`A`排列。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T11:38:55.210

您实际上可以将索引放在左侧：

```
A(index) = A; 
```

;-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T13:10:23.517

所以基本上，你只想添加 2 到 2 个随机元素的 vector `A`。无需置换，只需选择两个随机索引。在最新版本的 matlab [randperm](http://www.mathworks.nl/help/matlab/ref/randperm.html)中，有两个参数：

> `p = randperm(n,k)`返回一个行向量，其中包含`k`从 1 到（含）随机选择的唯一整数`n`。

那么你可以使用：

```
idx = randperm(numel(A),2);
A(idx)=A(idx) + 2; 
```

在旧版本上，您可以使用：

```
idx = randperm(numel(A));
idx = idx(1:2);
A(idx)=A(idx) + 2; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T11:11:52.207

试试这个

```
 index = randperm(numel(A));
 nums=1:length(A)
 return_index=nums(index)
 temp = A(index);
 temp(1:2)=temp(1:2)+2;
 A(nums)=temp(return_index); 
```

# javascript - 使用JS从客户端PC读取文件而不上传

> ID：13439560
> 
> 赞同：3
> 
> 时间：2012-11-18T11:09:00.603
> 
> 标签：javascript, file

我正在建立一个网站来在线管理和保存我的所有联系人...要在数据库中添加新联系人，我必须在我的网站中输入完整的联系人，例如填写表格。但信不信由你，我有 3,000 多个联系人要保存。所以我试图让我的工作更轻松。

我在我的网站中创建了一个 HTML 下拉框来放置 vCard。现在我不想将它们上传到我的服务器并使用 PHP 来读取文件内容并解析来自 vCard 的信息（姓名、手机号码、电子邮件等），因为在我的国家，互联网连接一点都不好。我的浏览速度只有 30-56 kbps。相反，我希望能够在不上传它们的情况下使用 javascript 来做到这一点。一方面，我不必上传整个文件。另一方面，在我将 PHP 保存到数据库之前，它不需要做任何事情。

我从 HTML 下拉框中获得了已删除文件的位置。现在我需要一个一个地加载文件并将它们的内容读取为 Javascript 中的字符串。我知道如何做剩下的。

有谁知道我该怎么做？请不要使用 jQuery。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:12:24.887

[现代浏览器](http://caniuse.com/#feat=fileapi)中存在File [API](http://www.html5rocks.com/en/tutorials/file/dndfiles/)。

# asp.net - 如何删除asp.net中的.aspx .asmx后缀

> ID：13439561
> 
> 赞同：3
> 
> 时间：2012-11-18T11:09:01.640
> 
> 标签：asp.net

我们的大部分应用程序都是基于 asp.net。

所以所有的 url 都会有 .aspx 或 .asmx 之类的后缀

我想知道是否有任何想法删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:17:38.927

查看以下教程之一：

**URL 路由**（ASP.Net 4.0 及更高版本）：

*   [**使用 ASP.NET 4 Web 表单的 URL 路由**](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)——Scott *Guthrie*

**URL 重写**（ASP.Net 3.5 及更低版本）：

*   [**使用 ASP.NET 重写 URL**](http://weblogs.asp.net/scottgu/archive/2007/02/26/tip-trick-url-rewriting-with-asp-net.aspx) —— *Scott Guthrie*
*   [](http://sharpertutorials.com/clean-url-structure-in-aspnet/)**在 ASP.Net中[**清理 URL 结构**](http://sharpertutorials.com/clean-url-structure-in-aspnet/)*——Sharpertutorials.com***

# c - 在 execl() 中打开 .txt 文件

> ID：13439565
> 
> 赞同：3
> 
> 时间：2012-11-18T11:09:10.887
> 
> 标签：c, file, ubuntu, exec

如何使用函数打开`.txt`文件？`execl()`c中是否还有其他功能可以`gedit`在Ubuntu中打开文件。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:10:09.897

> c中是否有任何其他功能可以在gedit中打开文件

最简单的是

```
system("gedit file.txt"); 
```

* * *

作为旁注，您可能需要查看`xdg-open`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:24:14.883

你也可以试试这个

```
execlp("/usr/bin/gedit","gedit","text.txt",NULL); 
```

`execl()`和的一般语法`execlp()`

```
int execl(const char *path, const char *arg, ...);
int execlp(const char *file, const char *arg, ...); 
```

给出完整路径`text.txt`

# jetty - 无法让 jettyRun 在 Gradle 中工作

> ID：13439566
> 
> 赞同：3
> 
> 时间：2012-11-18T11:09:12.650
> 
> 标签：jetty, classpath, gradle

我有一个具有以下结构的 WEBAPP MULTI PROJECT Gradle 构建。我也在使用弹簧框架。尽管找不到我的 bean 文件（dao-beans.xml），但我无法让 webapp 在 Jetty 中运行。如果我将 bean 文件复制到 webapp 构建目录，它们会被找到，但是 Spring 无法实例化我的类，因为它无法在类路径中找到类。我究竟做错了什么？

```
+-- build.gradle
+-- dao-impl
¦   +-- src
¦       +-- main
¦       ¦   +-- java
¦       ¦   +-- resources
¦       ¦       +-- dao-beans.xml
¦       +-- test
¦           +-- java
+-- gradle.properties
+-- presenter
¦   +-- build.gradle
¦   +-- src
¦       +-- main
¦       ¦   +-- java
¦       ¦   +-- resources
¦       ¦   ¦   +-- beans.xml
¦       ¦   +-- webapp
¦       ¦       +-- WEB-INF
¦       ¦           +-- web.xml
¦       +-- test
¦           +-- java
+-- settings.gradle 
```

演示者的 build.gradle：

```
apply plugin: "jetty"
apply plugin: "war"

jettyRun {
    httpPort = 8080
    scanIntervalSeconds = 3
} 
```

战争结构：

```
├── META-INF
│   └── MANIFEST.MF
└── WEB-INF
    ├── classes
    │   ├── beans.xml
    │   ├── *.classes
    │   └── logback.xml
    ├── lib
    │   ├── *.jar
    └── web.xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T14:14:42.407

您需要使您的“dao-impl”成为一个独立的 Java 项目（因此顶级项目构建它）。

新文件 dao-impl/build.gradle

```
apply plugin: "java" 
```

指导顶层项目关于子项目。

然后在现有的presenter/build.gradle 文件中添加对该其他项目的依赖：

```
dependencies {
  ...
  compile project(':dao-impl').sourceSets.main.output
} 
```

这应该会导致 JAR 在部署的 Jetty 中在通常的位置 WEB-INF/lib/dao-impl-xyzjar 中发出（如果可能，最好取消 .sourceSets.main.output，但两种形式都应该工作）

# ios - 带有文本字段的 ios 选择器视图

> ID：13439577
> 
> 赞同：0
> 
> 时间：2012-11-18T11:10:44.483
> 
> 标签：ios, xcode

当有人单击该文本字段时，我尝试将文本字段与 Picker 视图相结合，而不是调出默认键盘，我希望它调出一个 Picker 视图，其中列出了我喜欢的几个选择。

.h 文件

```
#import <UIKit/UIKit.h>

@interface activate : UIViewController<UIPickerViewDataSource, UIPickerViewDelegate>

@property (weak, nonatomic) IBOutlet UIPickerView *gender;
@property (strong, nonatomic) NSArray *arrStatus;

@property (weak, nonatomic) IBOutlet UITextField *GenderTextField;

@end 
```

.m 文件包含

```
@synthesize gender;
@synthesize arrStatus;
@synthesize GenderTextField;
- (void)viewDidLoad
{
    [super viewDidLoad];
    self.GenderTextField.inputView = gender;
    arrStatus = [[NSArray alloc] initWithObjects:@"Male", @"Female", nil];
}
-(void)textFieldBeganEditing:(NSNotification *)note{
    GenderTextField = note.object; // set ivar to current first responder
    [gender setHidden:NO];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
    //One column
    return 1;
}

-(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
    //set number of rows
    return arrStatus.count;
}

-(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
    //set item per row
    return [arrStatus objectAtIndex:row];
}
- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{

    self.GenderTextField.text=[arrStatus objectAtIndex:row];

}
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.GenderTextField.inputView = self.gender;
    [gender setHidden:NO];

} 
```

任何帮助或示例将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:45:48.117

我认为一种简单的方法是在`UITextField`. 不要让用户单击该文本字段。当用户单击您的文本字段时，您可以显示您的选择器。用户完成拣选后。更新您的文本字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:24:52.957

诀窍是永远不要让文本字段成为FirstResponder

将字段子类化，而不是将触摸传递给将调用 becomeFirstResponder 的超级，而是显示选择器视图

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-30T15:23:53.093

有一个简单的方法，实现 UITextfieldDelegate 协议。这是一个名为的方法

```
- (BOOL)textFieldShouldBeginEditing:(UITextfield *)textfield 
```

你可以在这个方法上做点什么

```
return NO; 
```

键盘将不再显示

代码将如下所示

```
- (BOOL)textFieldShouldBeginEditing:(UITextfield *)textfield
{
      //Do somethings....

      return NO;
} 
```

# entity-framework - 无法删除多对多关系

> ID：13439578
> 
> 赞同：1
> 
> 时间：2012-11-18T11:10:46.310
> 
> 标签：entity-framework, entity-framework-4.1, ef-code-first

我有两个具有多对多关系的实体，如下所示。

```
public class StandardContact {
    ...
    public virtual ICollection<RelayConfig> RelayConfigs { get; set; }
}

public class RelayConfig {
....
    public virtual ICollection<StandardContact> StandardContacts { get; set; }
} 
```

我正在尝试更新 RelayConfig 及其与 StandardContact 的关系。这是我在 Update() 方法中添加的代码。它只是添加一些新的 StandardContact 和/或删除现有的 StandardContacts（根据用户的要求）。参数exposedContacts表示应在数据库中更新的StandardContacts的全包列表

```
public void Update(RelayConfig relayConfig, List<StandardContact> exposedContacts) {

    RelayConfig dbRelayConfig = context.RelayConfigs.Include(r => r.StandardContacts)
                                       .Where(r => r.Id == relayConfig.Id).SingleOrDefault();
    context.Entry<RelayConfig> (dbRelayConfig).CurrentValues.SetValues(relayConfig);

    List<StandardContact> addedExposedContacts = 
        exposedContacts.Where(c1 => !dbRelayConfig.StandardContacts.Any(c2 => c1.Id == c2.Id)).ToList();
    List<StandardContact> deletedExposedContacts = 
        dbRelayConfig.StandardContacts.Where(c1 => !exposedContacts.Any(c2 => c2.Id == c1.Id)).ToList();

    StandardContact dbExposedContact = null;
    addedExposedContacts.ForEach(exposedContact => {
        dbExposedContact = context.StandardContacts.SingleOrDefault(sc => sc.Id == exposedContact.Id);
        dbRelayConfig.StandardContacts.Add(dbExposedContact);
    });
    deletedExposedContacts.ForEach(exposedContact => { dbRelayConfig.StandardContacts.Remove(exposedContact); });
} 
```

与 RelayConfig 相关的新 StandardContact 实体的添加正在正确进行。但是，删除（上面代码中的最后一行）没有任何效果，链接表中的多对多关系保持不变。

简而言之，我无法从 RelayConfig 对象中删除 StandardContact 实体。我没有得到任何异常，但代码运行通过。

**更新：**

这是与数据库相关的代码：

**RelayContext 类**

```
public class RelayContext : DbContext {

    public DbSet<Station> Stations { get; set; }
    public DbSet<StandardContact> StandardContacts { get; set; }
    public DbSet<RelayConfig> RelayConfigs { get; set; }
    public DbSet<StandardRelay> StandardRelays { get; set; }
    public DbSet<Rack> Racks { get; set; }
    public DbSet<Group> Groups { get; set; }
    public DbSet<Relay> Relays { get; set; }
    public DbSet<Contact> Contacts { get; set; }

    public RelayContext() {
        Database.SetInitializer(new RelayContextInitializer());
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<Rack>().HasOptional<RelayConfig>(r => r.DefaultFirstRelayConfig).WithMany(rc => rc.RacksWithDefaultFirstRelay).WillCascadeOnDelete(false);
        modelBuilder.Entity<Rack>().HasOptional<RelayConfig>(r => r.DefaultSecondRelayConfig).WithMany(rc => rc.RacksWithDefaultSecondRelay).WillCascadeOnDelete(false);
    }
} 
```

**RelayConfig 存储库**

```
public class RelayConfigRepository {

    internal RelayContext context;

    public RelayConfigRepository(RelayContext context) {
        this.context = context;
    }
    ....
    public void Update(RelayConfig relayConfig, List<StandardContact> exposedContacts) {
        RelayConfig dbRelayConfig = context.RelayConfigs.Include(r => r.StandardContacts)
                                           .Where(r => r.Id == relayConfig.Id).SingleOrDefault();
        context.Entry<RelayConfig> (dbRelayConfig).CurrentValues.SetValues(relayConfig);

        List<StandardContact> addedExposedContacts = 
            exposedContacts.Where(c1 => !dbRelayConfig.StandardContacts.Any(c2 => c1.Id == c2.Id)).ToList();
        List<StandardContact> deletedExposedContacts = 
            dbRelayConfig.StandardContacts.Where(c1 => !exposedContacts.Any(c2 => c2.Id == c1.Id)).ToList();

        StandardContact dbExposedContact = null;
        addedExposedContacts.ForEach(exposedContact => {
            dbExposedContact = context.StandardContacts.SingleOrDefault(sc => sc.Id == exposedContact.Id);
            dbRelayConfig.StandardContacts.Add(dbExposedContact);
        });
        deletedExposedContacts.ForEach(exposedContact => { dbRelayConfig.StandardContacts.Remove(exposedContact);});

    }
    .... 
} 
```

**UnitOfWork 类**

```
public class UnitOfWork : IDisposable {

    private RelayContext context = new RelayContext();

    private bool disposed = false;

    private RelayConfigRepository _relayConfigRepository;
    public RelayConfigRepository RelayConfigRepository {
        get {
            if (_relayConfigRepository == null) {
                _relayConfigRepository = new RelayConfigRepository(context);
            }
            return _relayConfigRepository;
        }
    }

    private StandardContactRepository _standardContactRepository;
    public StandardContactRepository StandardContactRepository {
        get {
            if (_standardContactRepository == null) {
                _standardContactRepository = new StandardContactRepository(context);
            }
            return _standardContactRepository;
        }
    }
    public void Save() {
        try {
            context.SaveChanges();
        }
        catch (DbUpdateConcurrencyException ex) {
            throw new RepositoryException(ErrorMessages.UpdateConcurrencyError);
        }
        catch (Exception ex) {
            throw new RepositoryException(ErrorMessages.GeneralError);
        }
    }

    protected virtual void Dispose(bool disposing) {
        if (!this.disposed) {
            if (disposing) {
                context.Dispose();
            }
        }
        this.disposed = true;
    }

    public void Dispose() {
        Dispose(true);
        GC.SuppressFinalize(this);
    }
} 
```

调用 RelayConfigRepository 上的 Update 方法的**WPF 客户端（ViewModel） 。**

```
[Export(typeof(RelayConfigEditViewModel))]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class RelayConfigEditViewModel :Screen {
    private RelayConfig _relayConfig;
    public RelayConfig RelayConfig {
        get { return _relayConfig; }
        set { _relayConfig = value; NotifyOfPropertyChange(() => RelayConfig); }
    }

    private ObservableCollection<StandardContact> _standardContacts = new ObservableCollection<StandardContact>();
    public ObservableCollection<StandardContact> StandardContacts {
        get { return _standardContacts;}
        set { _standardContacts = value; NotifyOfPropertyChange(() => StandardContacts); }
    }
    ....
    public void Save() {
        List<StandardContact> exposedContacts = StandardContacts.Where(sc => sc.IsMarked).ToList();
        try {
            using (UnitOfWork unitOfWork = new UnitOfWork()) {
                if (editMode == EditMode.Add) {
                    unitOfWork.RelayConfigRepository.Insert(RelayConfig, exposedContacts);
                }
                else {
                    unitOfWork.RelayConfigRepository.Update(RelayConfig, exposedContacts);
                }
                unitOfWork.Save();
            }
        }
        catch (Exception ex) {
            HandleException(ex);
        }
        events.Publish(RelayConfig);
    }
} 
```

**更新 2**

跟踪有点笨拙，但我可以看到与更新方法相关的特殊过程语句。以下是 EF 生成的相关 SQL 语句。

```
update [dbo].[RelayConfigs]
set [Name] = @0, [DisplayName] = @1
where (([Id] = @2) and ([Version] = @3))

**exec sp_executesql N'insert [dbo].[RelayConfigStandardContacts]([RelayConfig_Id], [StandardContact_Id])
values (@0, @1)
',N'@0 int,@1 int',@0=1,@1=4** 
```

如您所见，有用于更新 RelayConfig 记录和在链接表 RelayConfigStandardContact 中添加另一个条目的 SQL（我在多对多记录中添加的新记录）。但是没有为我从多对多关系中删除的链接表记录生成 SQL 语句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:18:44.973

测试程序以显示它应该按预期工作：

```
using System.Collections.Generic;
using System.Data.Entity;
using System.Linq;

namespace EFDelMany
{
    public class StandardContact 
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public virtual ICollection<RelayConfig> RelayConfigs { get; set; }
    }

    public class RelayConfig
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public virtual ICollection<StandardContact> StandardContacts { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<StandardContact> StandardContacts { get; set; }
        public DbSet<RelayConfig> RelayConfigs { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            Database.SetInitializer(new DropCreateDatabaseAlways<MyContext>());
            using (var context = new MyContext())
            {
                context.Database.Initialize(true);

                // Create one RelayConfig and 5 StandardContacts
                var relayConfig1 = new RelayConfig { Name = "R1" };
                var standardContact1 = new StandardContact { Name = "S1" };
                var standardContact2 = new StandardContact { Name = "S2" };
                var standardContact3 = new StandardContact { Name = "S3" };
                var standardContact4 = new StandardContact { Name = "S4" };
                var standardContact5 = new StandardContact { Name = "S5" };

                // Create relationship for StandardContacts 1,2,3
                relayConfig1.StandardContacts = new List<StandardContact>
                {
                    standardContact1,
                    standardContact2,
                    standardContact3
                };

                context.RelayConfigs.Add(relayConfig1);
                context.StandardContacts.Add(standardContact4);
                context.StandardContacts.Add(standardContact5);

                context.SaveChanges();
            }
            // see screenshot "Before"

            RelayConfig relayConfig = new RelayConfig { Id = 1, Name = "R1a" };
            List<StandardContact> exposedContacts = new List<StandardContact>
            {
                // delete relationship to StandardContacts 1 and 3
                new StandardContact { Id = 2 }, // keep relationship to StandardContact 2
                new StandardContact { Id = 4 }, // add relationship to StandardContact 4
                new StandardContact { Id = 5 }  // add relationship to StandardContact 5
            };

            using (var context = new MyContext())
            {
                RelayConfig dbRelayConfig = context.RelayConfigs.Include(r => r.StandardContacts)
                                                   .Where(r => r.Id == relayConfig.Id).SingleOrDefault();
                context.Entry<RelayConfig> (dbRelayConfig).CurrentValues.SetValues(relayConfig);

                List<StandardContact> addedExposedContacts = 
                    exposedContacts.Where(c1 => !dbRelayConfig.StandardContacts.Any(c2 => c1.Id == c2.Id)).ToList();
                List<StandardContact> deletedExposedContacts = 
                    dbRelayConfig.StandardContacts.Where(c1 => !exposedContacts.Any(c2 => c2.Id == c1.Id)).ToList();

                StandardContact dbExposedContact = null;
                addedExposedContacts.ForEach(exposedContact => {
                    dbExposedContact = context.StandardContacts.SingleOrDefault(sc => sc.Id == exposedContact.Id);
                    dbRelayConfig.StandardContacts.Add(dbExposedContact);
                });
                deletedExposedContacts.ForEach(exposedContact => { dbRelayConfig.StandardContacts.Remove(exposedContact); });

                context.SaveChanges();
            }
            // see screenshot "After"
        }
    }
} 
```

**更新前**：

![前](../Images/54e42a8a86a9a372f9c46dbda07e2060.png)

**更新后**：

![后](../Images/e4ecf7a895069452f38a369d3a684776.png)

# c - 在 C 中以只读方式传递指向函数的指针

> ID：13439580
> 
> 赞同：5
> 
> 时间：2012-11-18T11:10:51.990
> 
> 标签：c, function, pointers, readonly

正如标题所说，我可以将一个指针传递给一个函数，所以它只是指针内容的副本吗？我必须确保该功能不会编辑内容。

非常感谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T11:14:39.653

您可以使用`const`

`void foo(const char * pc)`

这`pc`是指向 const char 的指针，通过使用`pc`您无法编辑内容。

但这并不能保证您不能更改内容，因为通过创建另一个指向相同内容的指针，您可以修改内容。

所以，这取决于你，你将如何实施它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T11:17:43.677

是的，

```
void function(int* const ptr){
    int i;
    //  ptr = &i  wrong expression, will generate error ptr is constant;
    i = *ptr;  // will not error as ptr is read only  
    //*ptr=10;  is correct 

}

int main(){ 
    int i=0; 
    int *ptr =&i;
    function(ptr);

} 
```

在`void function(int* const ptr)`ptr 中是恒定的，但 ptr 指向的不是恒定的，因此`*ptr=10`是正确的表达！

* * *

```
void Foo( int       *       ptr,
          int const *       ptrToConst,
          int       * const constPtr,
          int const * const constPtrToConst )
{
    *ptr = 0; // OK: modifies the "pointee" data
    ptr  = 0; // OK: modifies the pointer

    *ptrToConst = 0; // Error! Cannot modify the "pointee" data
    ptrToConst  = 0; // OK: modifies the pointer

    *constPtr = 0; // OK: modifies the "pointee" data
    constPtr  = 0; // Error! Cannot modify the pointer

    *constPtrToConst = 0; // Error! Cannot modify the "pointee" data
    constPtrToConst  = 0; // Error! Cannot modify the pointer
} 
```

[在这里学习！](http://en.wikipedia.org/wiki/Const-correctness)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T11:12:04.153

> 我必须确保该功能不会编辑内容

除非函数接受一个`const`参数，否则你唯一能做的就是显式地向它传递你的数据副本，可能是使用`memcpy`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T11:15:36.617

> 我必须确保该功能不会编辑内容。

什么内容？指针指向的值？在这种情况下，您可以像这样声明您的函数

```
void function(const int *ptr); 
```

然后`function()`不能改变ptr指向的整数。

如果你只是想确保`ptr`自己没有被改变，别担心：它是按值传递的（就像 C 中的所有东西一样），所以即使函数改变了它的`ptr`参数，也不会影响传入的指针。

# php - 如何从 php 中的 FORM 动作中获取响应

> ID：13439591
> 
> 赞同：2
> 
> 时间：2012-11-18T11:13:29.363
> 
> 标签：php, html, forms, box-api

我正在尝试在 php 中创建一个 html 文件，其中用户必须上传数据以使用 API 在 Box.net 中上传。Form 标签的 action 属性有一个 url，它会发回一条确认消息。

我的问题是当我上传文件并单击提交时，我得到一个 xml 响应页面。但我不希望用户看到这样的数据，但我希望这些数据用于计算并显示用户适当的消息。

我怎样才能得到那个 xml 响应？

以下是我的代码：

```
<?php
$upload_url = 'https://upload.box.net/api/1.0/upload/i9g1fmnn9odhg739sdgdfgdg/480416060';
?>

<form action="<?php echo $upload_url;?>"
 enctype="multipart/form-data" accept-charset="utf-8" method="POST">
<input type="file" name="new_file1" />
<input type="text" name="share" value="1" />
<input type="submit" name="upload_files" value="Upload File" />
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:18:56.647

1.  上传文件。
2.  读取文件的数据。
3.  [使用cURL](http://php.net/manual/en/book.curl.php)将文件的数据发送到相关 URL 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:26:13.223

你可以这样做

```
echo $_POST['new_file1']
echo $_POST['share']
echo $_POST['upload_files'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T22:14:28.130

要将您的请求发送到 Box，您需要更改表单，以便它发布到您自己的 PHP 文件。然后要将请求从您的服务器发送到框，在您指示表单提交给您的文件中，您将执行以下操作：

```
<?php
$ch = curl_init();

$upload_url = 'https://upload.box.net/api/1.0/upload/i9g1fmnn9odhg739sdgdfgdg/480416060';

curl_setopt($ch, CURLOPT_URL, $upload_url);
curl_setopt($ch, CURLOPT_POST, true);
$post = array(
    "file_box" => "@" . $_FILES['upload']['tmp_name'],
    "share"    => $_POST['share']
);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 

$response = curl_exec($ch);
?> 
```

$response 对象将包含来自 Box 的响应。

# java - Java GUI 是否在所有操作系统上都显示相同？

> ID：13439595
> 
> 赞同：0
> 
> 时间：2012-11-18T11:14:11.623
> 
> 标签：java, swing, user-interface, look-and-feel

使用来自 Swing 的组件构建其 GUI 的 Java 编写的程序在所有操作系统上的显示是否完全相同？

编辑：让我这样问这个问题：使用 Java 是否可以设计一个保证在所有平台上显示完全相同的 GUI？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T15:01:10.957

正确使用，常见的 Swing 组件在平台和 L&F 上都非常稳定，但不能保证。应该避免无缘无故违反 UI 默认值的诱惑。这方面的例子比比皆是，但[这里](https://stackoverflow.com/q/7229226/230513)和[这里](https://stackoverflow.com/a/12532237/230513)讨论了有关大小的常见缺陷。测试是强制性的，但广泛可用的虚拟机减轻了这项工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T11:22:10.217

差不多吧。但是使用 UIManager 您可以根据操作系统的主题确定主题。
例子：

```
UIManager.LookAndFeelInfo looks[] = UIManager.getInstalledLookAndFeels();
    try{
        //0-Swing, 1-Mac, 2-?, 3-Windows, 4-Old Windows
        UIManager.setLookAndFeel(looks[3].getClassName());
    }catch(Exception e){
        System.out.println(e.getMessage());
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T11:32:00.643

是的，只要您使用 swing 并且没有特定于平台的代码，它们就会。

那就是说：那时他们不会感到“自然”。SWT 在那里好一点

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T11:20:57.253

简短地说，默认情况下它看起来会有所不同，因为swing使用系统外观，但您可以覆盖它（http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html），在这种情况下是应用程序在具有相同外观和感觉的所有平台上看起来都一样，或者您可以禁用一些外观和感觉功能，例如 -Dswing.noxp=true

# certificate - 是否可以使用 PositiveSSL 证书签署 EXE（可执行文件）？

> ID：13439599
> 
> 赞同：0
> 
> 时间：2012-11-18T11:14:55.413
> 
> 标签：certificate, ssl-certificate, digital-certificate

是否可以使用 PositiveSSL 证书签署 EXE 文件。那么当试图打开.exe文件时，windows会说发布者已经过验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:17:01.777

不，需要代码签名证书来签署可执行文件（二进制文件）

*   [http://en.wikipedia.org/wiki/Code_signing](http://en.wikipedia.org/wiki/Code_signing)
*   [http://www.comodo.com/business-security/code-signing-certificates/code-signing.php](http://www.comodo.com/business-security/code-signing-certificates/code-signing.php)

# uitableview - IOS 6 子类不更新 UITableViewCell 中的 UITextField

> ID：13439602
> 
> 赞同：3
> 
> 时间：2012-11-18T11:15:33.617
> 
> 标签：uitableview, ios6

我有一个 UITableView 它处于原型模式。我已将 4 个标签和 2 个文本字段放入一个单元格中，其中一个单元格是基本文本条目，并且工作正常。

我对 TableViewCell 进行了子类化。

头文件

```
#import <UIKit/UIKit.h>

@interface witLeagueSeriesGameDetailCell : UITableViewCell

@property (strong, nonatomic) IBOutlet UILabel *witGameNumber;
@property (strong, nonatomic) IBOutlet UITextField *witGameScore;
@property (strong, nonatomic) IBOutlet UITextField *witGameResult;

- (void) SetGameResult:(NSString *)resultName;

@end 
```

实施文件

```
#import "witLeagueSeriesGameDetailCell.h"
#import "witAppDelegate.h"

@implementation witLeagueSeriesGameDetailCell

@synthesize witGameNumber=_witGameNumber;
@synthesize witGameScore = _witGameScore;
@synthesize witGameResult = _witGameResult;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void) SetGameResult:(NSString *)resultName{

    NSLog([NSString stringWithFormat:@"%@",resultName]);
    //self.witGameResult.text = resultName;
    [_witGameResult setText:resultName];
}

@end 
```

tableview 也被子类化了。它包含一个在输入适当的文本字段时弹出的选择器。选择行时，它将值传递回setGameresult函数，我可以使用nslog查看此

但是，单元格的文本不会在屏幕上更新。

从代码中可以看出，我尝试了点概念方法和消息方法来设置文本。

TVC 选择器代码是

```
- (void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component{
    witLeagueSeriesGameDetailCell *myLabel = [[witLeagueSeriesGameDetailCell alloc] init];
    [myLabel SetGameResult:[NSString stringWithFormat:@"%@",[self.statusList objectAtIndex:row]]];

} 
```

关于为什么它可能不会在屏幕上显示的任何想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:24:10.920

这些是 IBOutlets，所以它们应该连接到故事板上的那些。

# wordpress - 在 PHP 页面上设置视频时出现空白页面

> ID：13439604
> 
> 赞同：1
> 
> 时间：2012-11-18T11:15:41.607
> 
> 标签：wordpress, jwplayer

我正在使用 wordpress，但我想在 Php 上创建视频，人们可以点击`http://example.com/play.php`并自动播放视频。我尝试了很多次，但都没有成功。

我粘贴在头下的这段代码

```
<script type='text/javascript' src='/jwplayer/jwplayer.js'></script> 
```

这是视频的来源：

```
<div id='movieframe'></div>

<script type="text/javascript">    
  jwplayer('movieframe').setup({

   'flashplayer': '/jwplayer/player.swf',
   'width': '480',
   'height': '270',
   'file': '/images/intro2.flv'
   controlbar: "none",
   autostart: true
  });
</script> 
```

我正在为 wordpress 使用 JW 播放器插件，我不知道我错在哪里。请纠正我。只是显示空白页。

谢谢

# haskell - 使用 GADT 构建具有不同节点类型和父子关系规则的树

> ID：13439606
> 
> 赞同：2
> 
> 时间：2012-11-18T11:15:52.993
> 
> 标签：haskell, tree, gadt

我正在尝试使用 simple[`xml`](http://hackage.haskell.org/package/xml)包为自定义 XML 结构构建 XML 生成器。这是一个示例 XML 片段：

```
<Response>
  <Answer>Hello World</Answer>
  <Play loop="3">http://example.com/a.mp3</Play>
  <SendAnswer dest="someuri">
    <Answer>Something</Answer>
    <Play>someuri</Play>
  </SendAnswer>
</Response> 
```

在这个自定义 XML 中，有一些规则指定可以在每种元素下嵌套哪些元素。是否可以定义一个 GADT 来构建基于这些规则限制结构的 XML 片段？规则简单地列出了允许的父子关系类型（例如，Response 不能是任何其他元素的子元素，SendAnswer 可以是 Response 的子元素等）。

这是我走了多远：[https ://gist.github.com/4104499](https://gist.github.com/4104499)

执行时，它输出：

```
<Response>

  <Speak loop="2">

    http://example.com/a.mp3
  </Speak>
</Response> 
```

但是，我觉得这种方法有很多缺点：

1.  MyXMLElement 的数据定义（第 31 行）将需要与有效父子关系一样多的行。在不同的实现中，可以只列出一个元素的合法子元素，并在运行时检查合法关系。我选择了这种方法（使用 GADT），以便无效的 XML 树在编译时是非法的。
2.  eval 给出的接口非常有限：不允许任意嵌套（即使遵循父子关系规则）；它不允许根据需要添加 XML 属性。

我想知道这个问题是否适合使用 GADT 的解决方案。如果是，如何设计得更好？

# c++ - c ++声明带有联合的Rect结构

> ID：13439610
> 
> 赞同：0
> 
> 时间：2012-11-18T11:16:40.927
> 
> 标签：c++

我想声明 Rect 结构：

```
struct{
   float x,y;
   float width,height;
}Rect; 
```

和联合变量 x,y 到 'pos' 和 width,height 到 'size' Vector2f 结构：

```
struct{
   float x,y;
}Vector2f; 
```

我怎么能用工会做到这一点？

```
Rect rect; 
//rec.x; rec.y; rect.pos; rect.pos.x; rect.pos.y; 
//rect.width; rect.height; rect.size; rect.size.x; rect.size.y; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:25:44.160

您的语法错误：结构的名称出现在正文之前，而不是在正文之后：

```
struct Rect {
   float x, y;
   float width, height;
}; 
```

好了，现在你可以走了。

但请注意，“联合”在 C++ 中的含义完全不同。A`union`是一种数据结构，它像 a 一样对`struct`对象进行分组。但是，虽然 a 的每个实例`struct`可以同时保存多个值，但 a 的实例一次`union`只能保存一个*值*。它们有它们的用途，但这些用途非常罕见，通常有更好的（和类型安全的）方法来实现相同的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T11:32:41.503

您正在寻找**匿名工会**。语法是：

```
struct Rect {

   union {
       Vector2f pos;
       struct {
           float x,y;
       };
   };
   union {
       Vector2f size;
       struct {
           float width, height;
       };
   };

}; 
```

演示：http: [//ideone.com/JgqABu](http://ideone.com/JgqABu)

*（不过我不建议这样做；我只是[亲吻](http://en.wikipedia.org/wiki/KISS_principle)并使用向量。）*

# java - 为什么 Ant 找不到 javac？

> ID：13439611
> 
> 赞同：0
> 
> 时间：2012-11-18T11:16:45.923
> 
> 标签：java, windows, ant, build, ibatis

有以下`build.bat`文件：

```
echo off  
set JAVA_HOME="C:\Program Files\Java\jdk1.6.0_25"  
set BUILD_CP="C:\Program Files\Java\jdk1.6.0_25\bin\lib\tools.jar";"C:\Program Files\Java\jdk1.6.0_25\bin";..\devlib\ant.jar;..\devlib\optional.jar;..\devlib\junit.jar;..\devlib\xercesImpl.jar;..\devlib\xmlParserAPIs.jar;  
"C:\Program Files\Java\jdk1.6.0_25\bin\java" -classpath %BUILD_CP% org.apache.tools.ant.Main -buildfile build.xml all  

set BUILD_CP=  

pause 
```

当我运行它时，我得到：

构建失败

```
file:D:/Development/Java/Frameworks/JMeter/TestDemoIbatis/iBATIS_JPetStore-4.0.5/build/build.xml:29: Unable to find a javac compiler;
com.sun.tools.javac.Main is not on the classpath.
Perhaps JAVA_HOME does not point to the JDK

Total time: 0 seconds
Press any key to continue . . . 
```

但我的`JAVA_HOME`,[设置](https://i.stack.imgur.com/DCEhH.png)`PATH`正确：

![在此处输入图像描述](../Images/0c994af06eab2fd8807008f140f268d7.png)

**更新：**
蚂蚁脚本：

```
<project name="JPetStore" default="all" basedir=".">  

  <property file="build.properties"/>  

  <path id="classpath">  
    <pathelement location="${src}/"/>  
    <fileset dir="${lib}" includes="**/*.jar" />  
    <fileset dir="${devlib}" includes="**/*.jar" />  
  </path>  

  <target name="clean" >  
    <delete dir="${wars}"/>  
    <delete dir="${webapp}"/>  
    <delete>  
      <fileset dir="${src}" >  
        <include name="**/*.class"/>  
      </fileset>  
    </delete>  
  </target>  

  <target name="prepare" depends="clean">  
    <mkdir dir="${wars}"/>  
    <mkdir dir="${webapp}"/>  
    <mkdir dir="${webapp}/WEB-INF/classes"/>  
    <mkdir dir="${webapp}/WEB-INF/lib"/>  
  </target>  

  <target name="compile" depends="prepare"> //LINE 29 that fails 
    <javac srcdir="${src}" destdir="${webapp}/WEB-INF/classes" deprecation="off" debug="${debug}">  
      <classpath refid="classpath"/>  
    </javac>  
  </target>  

  <target name="assemble.view">  
    <copy todir="${webapp}">  
      <fileset dir="${web}">  
        <include name="**/*.jsp"/>  
        <include name="**/*.html"/>  
      </fileset>  

    </copy>  
  </target>  

  <target name="assemble" depends="compile">  
    <copy todir="${webapp}/WEB-INF/classes">  
      <fileset dir="${src}" >  
        <exclude name="**/*.java"/>  
        <exclude name="**/*.class"/>  
      </fileset>  
    </copy>  
    <copy todir="${webapp}/WEB-INF/lib">  
      <fileset dir="${lib}" />  
    </copy>  
    <copy todir="${webapp}">  
      <fileset dir="${web}" />  
    </copy>  
  </target>  

  <target name="war" depends="assemble">  
    <jar jarfile="${wars}/jpetstore.war">  
      <fileset dir="${webapp}">  
        <include name="**/*"/>  
      </fileset>  
    </jar>  
  </target>  

  <target name="all" depends="war" />  

</project> 
```

这里有什么问题？我在`Windows7/64-bit`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:20:52.747

尝试在类路径周围加上双引号，以防止类路径因空格而被拆分：

由此：

```
"C:\Program Files\Java\jdk1.6.0_25\bin\java" -classpath %BUILD_CP% org.apache.tools.ant.Main -buildfile build.xml all 
```

至

```
"C:\Program Files\Java\jdk1.6.0_25\bin\java" -classpath "%BUILD_CP%" org.apache.tools.ant.Main -buildfile build.xml all 
```

**编辑：**

您也可以尝试从 BUILD_CP 中删除引号。

```
echo off  
set JAVA_HOME="C:\Program Files\Java\jdk1.6.0_25"  
set BUILD_CP=C:\Program Files\Java\jdk1.6.0_25\bin\lib\tools.jar;C:\Program Files\Java\jdk1.6.0_25\bin;..\devlib\ant.jar;..\devlib\optional.jar;..\devlib\junit.jar;..\devlib\xercesImpl.jar;..\devlib\xmlParserAPIs.jar;  
"C:\Program Files\Java\jdk1.6.0_25\bin\java" -classpath "%BUILD_CP%" org.apache.tools.ant.Main -buildfile build.xml all  

set BUILD_CP=  

pause 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:03:21.863

中的空格似乎是某种问题`Program Files`。
在@Chris 评论之后，我尝试自己构建文件，并注意到`ant -p`由于`""`环境变量而失败。
通过`JAVA_HOME=C:\Program Files\Java\jdk1.6.0_25`从`JAVA_HOME="C:\Program Files\Java\jdk1.6.0_25"`我能够`ant`直接运行并成功构建。
我从来没有遇到过空格问题`JAVA_HOME`，我总是将它安装在`Program Files`.
所以我不确定这是否是`Windows 7`.
如果有人能解释为什么会发生这种情况，我会将答案标记为已接受

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T12:52:05.543

这对我有用：

```
echo off

set JAVA_HOME="c:\Program Files\Java\jdk1.6.0_25"

set BUILD_CP=%JAVA_HOME%\lib\tools.jar;..\devlib\ant.jar;..\devlib\optional.jar;..\devlib\junit.jar;..\devlib\xercesImpl.jar;..\devlib\xmlParserAPIs.jar;

%JAVA_HOME%\bin\java -classpath %BUILD_CP% org.apache.tools.ant.Main -buildfile build.xml all

set BUILD_CP=

pause 
```

请注意，我必须更改 build.xml 以添加 source=1.4 指令：

```
<javac srcdir="${src}" destdir="${webapp}/WEB-INF/classes" deprecation="off" debug="${debug}" source="1.4"> 
```

# menu - TYPO3 创建菜单快捷方式链接到第一个子菜单（如果存在）

> ID：13439612
> 
> 赞同：1
> 
> 时间：2012-11-18T11:16:47.993
> 
> 标签：menu, typo3, shortcut, typoscript

我在 TYPO3 下遇到以下问题：

如果菜单的第 0 级有任何子菜单，我想链接到子菜单的第一个子菜单。

例如，点击产品应该将我们带到螺丝刀，而不是产品页面，该页面应该是空的。

```
-home (id=1)
-products (id=2)
--screwdrivers (id=3)
--cables (id=4)
-about (id=5)
-impress (id=6) 
```

我有一个简单的 3 级菜单，由 Typoscript 创建：

```
temp.menu_1 = HMENU
temp.menu_1 {
  1 = TMENU
  1 {
    #expAll =1
    wrap = <ul id="nav1">|</ul>
    noBlur = 1

    NO = 1
    NO {
      wrapItemAndSub = <li>|</li>
      stdWrap.htmlSpecialChars = 1
      ATagTitle.field = title
    }
    ACT <.NO
    ACT {
      wrapItemAndSub = <li id="nav1act">|</li>
    }

  }

  2 < .1
  2 {
    wrap = <ul id="nav2">|</ul>
    ACT.wrapItemAndSub = <li id="nav2act">|</li>
  }

  3 < .2
  3 {
    wrap = <ul id="nav3">|</ul>
    ACT.wrapItemAndSub = <li id="nav3act">|</li>
  }
} 
```

我已经找到了一些不错的 Typoscript 动态替换 id 但不明白如何组合它，或者我猜是否有更简单的解决方案。

样本取自此处：（仅限德语​​） [http://www.auxnet.de/blog/blog-post/2011/01/15/typo3-einzelnen-menue-link-durch-anderen-link-ersetzen.html](http://www.auxnet.de/blog/blog-post/2011/01/15/typo3-einzelnen-menue-link-durch-anderen-link-ersetzen.html)

排版：替换菜单中的 id：

```
lib.myFooterNav = HMENU
lib.myFooterNav.special = directory
lib.myFooterNav.special.value = 44
lib.myFooterNav.wrap = <div class="hlist"><ul>|</ul></div>
lib.myFooterNav.1 = TMENU
lib.myFooterNav.1 {
  NO.allWrap = <li>|</li>
  NO.doNotLinkIt.stdWrap.override = 1
  NO.doNotLinkIt.stdWrap.if {
    equals.field = uid
    value = 48
  }
  NO.before.stdWrap.cObject = TEXT
  NO.before.stdWrap.cObject {
   data = getIndpEnv:REQUEST_URI
   wrap = !!<=|?===>
  }
  NO.before.stdWrap.if {
    equals.field = uid
    value = 48
  }
  NO.after = </a>
  NO.after.stdWrap.if {
    equals.field = uid
    value = 48
  }
  ACT.allWrap = <li>|</li>
  ACT.ATagParams = class="active"
  ACT = 1
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:12:44.930

我认为您可以将产品页面设置为螺丝刀页面的快捷方式，而无需触摸排版。

# scala - Scala匹配变量传递

> ID：13439621
> 
> 赞同：2
> 
> 时间：2012-11-18T11:18:26.160
> 
> 标签：scala, match

我是 Scala 的新手，并试图理解匹配。

当我尝试运行以下代码时，javaw VM 没有响应（一直在等待 - 从 eclipse 中尝试）

```
case GenericProfile(user) => processGenericProfile(_)
case _ => println("Invalid data found") 
```

但是，以下部分可以正常工作：

```
case GenericProfile(user) => processGenericProfile(GenericProfile(user))
case _ => println("Invalid data found") 
```

我试图理解为什么第一种情况无法响应。我不想通过 GenericProfile(user) - 我想知道如何简化它。谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-18T11:27:08.483

在没有看到如何定义`processGenericProfile`和`GenericProfile`定义的情况下很难确定，但我认为您的第一个案例 ( `case GenericProfile(user) => processGenericProfile(_)`) 只是返回一个部分应用的函数`processGenericProfile`，而不是将其应用于案例左侧的结果，正如我理解您想要做的那样。 ..

考虑一下这个 REPL 会话，我在其中给出了“假”定义`processGenericProfile`和`GenericProfile`

```
scala> case class GenericProfile(user: String)
defined class GenericProfile

scala> def processGenericProfile(u: GenericProfile) = "processed"
processGenericProfile: (u: GenericProfile)java.lang.String

scala> GenericProfile("Paolo") match {
     | case GenericProfile(user) => processGenericProfile(_)
     | case _ => "wrong"
     | }
res0: java.lang.Object = <function1> 
```

查看`match`?的返回类型 很可能你没有被卡住，匹配返回一个函数并且没有应用它，所以你在等待某事发生，但 scala 认为它已经完成了你想做的事情（返回一个函数）。

如果您需要捕获整个`GenericProfile`，而不仅仅是它包含的用户，您可以使用带有符号[的别名，如下所示：](https://coderwall.com/p/m1bnlq)`@`

```
 scala> GenericProfile("Paolo") match {
         | case u @ GenericProfile(user) => processGenericProfile(u)
         | case _ => "wrong"
         | }
    res2: java.lang.String = processed 
```

最后一件事。我不确定“用户”`case GenericProfile(user)`代表什么。我写它的方式，它是一个绑定到包含在`GenericProfile`. 即在第一种情况下，我们说“如果我们正在检查的项目是 a `GenericProfile`，则获取它包含的字符串（在这种情况下为“Paolo”）并将其绑定到 name `user`。

由于您没有在右侧使用该值，因此您还可以执行以下操作：

```
case u @ GenericProfile(_) => processGenericProfile(u) 
```

其中`_`左侧的 明确表明您正在丢弃匹配的用户，并且您只是对检查类型是否为 a 感兴趣`GenericProfile`。

相反，如果“用户”是您之前定义的变量（即您希望您的 case 语句检查您是否有`GenericProfile`特定用户的变量），那么您需要告诉 scala 这`user`是您定义的内容，而不是您要绑定的名称无论在`GenericProfile`. 这可以通过[用反引号包围您的标识符（用户）](https://stackoverflow.com/questions/6576594/need-clarification-on-scala-literal-identifiers-backticks)来完成，如下所示：

```
val user="Paolo"

GenericProfile("Paolo") match {
    case u @ GenericProfile(`user`) => processGenericProfile(u) 
                                               //now this only matches                      
                                               //GenericProfile("Paolo")
    case GenericProfile(_) => "not Paolo"    
    case _ => "wrong"
} 
```

# c# - (c# + windows forms) 将项目添加到不同类的listBox

> ID：13439624
> 
> 赞同：2
> 
> 时间：2012-11-18T11:19:01.483
> 
> 标签：c#, winforms, listbox

我有两个类（表单），我希望在单击“接受”按钮时`class2`添加一个项目。`listBox``class1`

我尝试使用以下代码，但列表框中没有任何变化：

```
private void button1_Click(object sender, EventArgs e)
{
    CarRental i = new CarRental();
    string id = idRental.Text.ToString();

    i.listBox1.Items.Add(id);
    i.listBox1.Update();
    this.Close();
} 
```

我在哪里犯了错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:23:55.907

在 上声明`RentalId`财产`Form2`。在`CarRental`表单（您的第一个表单）处执行以下操作：

```
using(Form2 form2 = new Form2())
{
    if (fomr2.ShowDialog() != DialogResult.OK)
        return;

    listBox.Items.Add(form2.RentalId);
} 
```

以这种方式实现`Fomr2.RentalId`属性：

```
public string RentalId
{
   get { return idRental.Text; } // you don't need ToString() call
} 
```

然后选择您的“接受”按钮并将其`DialogResult`属性设置为`OK`. 因此，单击该按钮将关闭您的对话框并返回`DialogResult.OK`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:22:47.227

您创建了一个类型为 CarRental 的新实体。您应该做的是将第一个表单发送到第二个表单，并通过该实例修改内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:23:13.800

您需要访问打开的表单，而不是创建 CarRental 表单的新实例

```
private void button1_Click(object sender, EventArgs e)
{
    CarRental i = (CarRental)Application.OpenForms["CarRentalFormObjectName"];
    string id = idRental.Text.ToString();

    i.listBox1.Items.Add(id);
    i.listBox1.Update();
    this.Close();
} 
```

# javascript - 如何将外部 js 文件注入 iFrame

> ID：13439625
> 
> 赞同：3
> 
> 时间：2012-11-18T11:19:05.070
> 
> 标签：javascript, jquery, iframe

我正在尝试在 iframe 中插入 jQuery 和另一个 JS 文件。我想知道这是否可能，还是有一些问题？

假设这些页面只是在同一个域名上运行。

父页面将尝试使用 Javascript 覆盖 iframe 中的元素。
然后我需要在子页面 (http://jsbin.com/esifez/2) 上添加另一个 jQuery 库。

对此有任何想法吗？

```
$(function() {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'http://code.jquery.com/jquery-latest.min.js';
  $("#main_iframe").contents().find("body").append(script);
}); 
```

[演示链接](http://jsbin.com/ilabad/2)。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:40:25.877

在您的演示链接中，您的 iframe 已经包含尝试访问`$`或`jQuery`在您`find("body").append(script);`将被计算之前的方式的 javascript。所以这会引发一个错误，因为`$`还不存在。您要么需要做以下两件事之一：

1.  手动将 jQuery 脚本标签包含在 iframe 源代码的头部。考虑到您的 iframe 源代码中有 jQuery 代码，为什么不这样做呢？

2.  不要有任何脚本试图访问`jQuery`或`$`在您的 iframe 的源中，除非引用位于函数或单独的脚本中，这些脚本只有在您插入 jQuery 脚本标签后才会执行。

基本上对于第 2 点，不要直接在 iframe 中使用它：

```
<script>
  /// dolar wont exist yet
  $(function(){

  })
</script> 
```

而是在您的父代码中执行此操作：

```
var insertScript = function(src){
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = src;
  $("#main_iframe").contents().find("body").append(script);
}

$(function() {
  insertScript('http://code.jquery.com/jquery-latest.min.js');
  // any code in your iframe that relies on jQuery should be 
  // moved off into this file
  insertScript('iframe-js-code-that-requires-jq.js');
}); 
```

但是，在 iframe 源中已有 jQuery 脚本标签而不是动态插入它仍然更有意义。

# android - 如何在android中的textview中添加日期和时间

> ID：13439626
> 
> 赞同：4
> 
> 时间：2012-11-18T11:19:17.863
> 
> 标签：android, android-datepicker

我正在开发一个应用程序，我需要在其中显示日期和时间`TextView`。我该如何实施？

我需要在 XML 文件或 java 文件中实现概念吗？

我的 XML 文件包含一个`Textview`例如：

```
<TextView
            android:id="@+id/DATE"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text=""
            android:gravity="center"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textSize="30dp" /> 
```

我需要采取哪些步骤？

引导我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T11:37:40.540

你绝对应该用java代码来做。

```
TextView textView = (TextView) findViewById(R.id.DATE);
textView.setText(DateUtils.formatDateTime(context, System.currentTimeMillis(), DateUtils.FORMAT_SHOW_TIME | DateUtils.FORMAT_SHOW_DATE | DateUtils.FORMAT_NUMERIC_DATE | DateUtils.FORMAT_12HOUR)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T11:45:43.813

在这里您可以在 textview 中看到显示时间和日期

```
TextView textView = (TextView) findViewById(R.id.DATE);
Date date = new Date(location.getTime());
DateFormat dateFormat = android.text.format.DateFormat.getDateFormat(getApplicationContext());
textView .setText("Time: " + dateFormat.format(date)); 
```

# c - strncpy 行为与 sprintf 不同

> ID：13439627
> 
> 赞同：2
> 
> 时间：2012-11-18T11:19:20.747
> 
> 标签：c, printf, strncpy

我正在使用以下代码创建一个用于测试哈希表的“密钥”（特别是，我正在测试删除项目所需的时间）：

```
void remove_keys()
{
    for (int i = 0; i < NUM_ITEMS; i++) {
        char temp_key[20];
        sprintf((char *)&temp_key, "Key: %d", i);
        size_t key_len = strlen(temp_key) + 1;

        char *key = malloc(sizeof(char) * (key_len));
        sprintf(key, "%s", temp_key); // THIS LINE

        htable_item *item = htable_item_search(root, key, key_len);
        if (!item) {
            printf("Item not found: %s\n", key);
        } else {
            //printf("Item found: %s - %s\n", key, item->value);
            if (!htable_item_delete(root, item)) {
                printf("Error while deleting: %s\n", key);
            }
        }
    }
} 
```

在我用评论标记的行中，有一个奇怪的行为。我正在使用 sprintf 将“temp_key”的内容复制到“key”。在此之前，我使用 strncpy 将“temp_key”的内容复制到“key”，但我从这个操作得到的结果是这样的（从 XCode 的调试器打印）：

```
Printing description of key:
(char *) key = 0x0000000100103ed0 "Key: 10\xb0\xe7\x03\x01\x10" 
```

而“temp_key”产生以下输出：

```
Printing description of temp_key:
(char [20]) temp_key = "Key: 10" {
  [0] = 'K'
  [1] = 'e'
  [2] = 'y'
  [3] = ':'
  [4] = ' '
  [5] = '1'
  [6] = '0'
  [7] = '\0'
  [8] = '\0'
  [9] = '\0'
  [10] = '\0'
  [11] = '\0'
  [12] = '\0'
  [13] = '\0'
  [14] = '\0'
  [15] = '\0'
  [16] = '\0'
  [17] = '\0'
  [18] = '\0'
  [19] = '\0'
} 
```

哈希表使用 memcmp 比较 htable_item_search 函数中的键。但是使用 strncpy 有一些项目（如“Key：10”）在使用 sprintf 时找不到它完美地工作。那么为什么会有这种差异呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T11:24:57.833

来自[http://www.cplusplus.com/reference/clibrary/cstring/strncpy/](http://www.cplusplus.com/reference/clibrary/cstring/strncpy/)

如果 source 比 num 长（因此，在这种情况下，destination 可能不是以 null 结尾的 C 字符串），则不会在目标末尾隐式附加空字符。

strncpy 不会向您的字符串添加空终止符，因此在使用此函数时，您的字符串末尾会有垃圾。

# android - 如何更改谷歌地图中道路的颜色？

> ID：13439628
> 
> 赞同：4
> 
> 时间：2012-11-18T11:19:26.583
> 
> 标签：android, google-maps, android-mapview, android-canvas

我正在寻找一种在 MapView for Android 中更改道路颜色（黄色）的方法。我想过重写该`onDraw`方法，然后遍历每个像素并更改它，但该方法是最终的。

我还想过用 ViewGroup 包装 MapView，然后尝试覆盖它的 onDraw，但我不知道该怎么做。

有人有想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-17T11:37:20.260

现在（我不知道从什么时候开始，从 Google Maps API V3.0 看来）它很容易使用Maps Android API 的[Styled Map](https://developers.google.com/maps/documentation/android-api/styling)功能。对于地图样式 JSON 准备，您可以使用[Styling Withard](https://mapstyle.withgoogle.com/)。您也可以只将必要的部分添加到 JSON 样式对象，而不是所有地图元素。例如，对于黄色道路（带有蓝色标签），JSON ( `/res/raw/map_style.json`) 可以是：

```
[
  {
    "featureType": "road",
    "elementType": "geometry.fill",
    "stylers": [
      {
        "color": "#ffff00"
      }
    ]
  },
  {
    "featureType": "road",
    "elementType": "labels.text.fill",
    "stylers": [
      {
        "color": "#0000ff"
      }
    ]
  } 
```

]

和`MainActyvity.java`地图片段：

```
public class MainActivity extends AppCompatActivity implements OnMapReadyCallback {

    private GoogleMap mGoogleMap;
    private MapFragment mapFragment;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mapFragment = (MapFragment) getFragmentManager()
                .findFragmentById(R.id.map_fragment);
        mapFragment.getMapAsync(this);
    }

    @Override
    public void onMapReady(GoogleMap googleMap) {
        mGoogleMap = googleMap;

        try {
            // Customise the styling of the base map using a JSON object defined
            // in a raw resource file.
            boolean success = mGoogleMap.setMapStyle(
                    MapStyleOptions.loadRawResourceStyle(
                            this, R.raw.map_style));

            if (!success) {
                Log.e(TAG, "Style parsing failed.");
            }
        } catch (Resources.NotFoundException e) {
            Log.e(TAG, "Can't find style. Error: ", e);
        }
        // Position the map's camera near Sydney, Australia.
        mGoogleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(new LatLng(50.4501,30.5234), 16.0f));

    }

} 
```

和`activity_main.xls`：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context="com.test.just.googlemapsgeneral.activities.MainActivity">

    <fragment
        android:id="@+id/map_fragment"
        android:name="com.google.android.gms.maps.MapFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"/>

</RelativeLayout> 
```

结果你应该得到：

[![Android 风格的地图片段](../Images/f71bc9d82b405d55f0dde626cdf1d7b4.png)](https://i.stack.imgur.com/ghZKi.png)

您还可以为静态地图添加样式参数：对于

[https://maps.googleapis.com/maps/api/staticmap?&key=[your_MAPS_API_KEY]¢er=50.4501,30.5234&zoom=16&size=640x640&style=feature:road|element:geometry|color:0xFFFF00](https://maps.googleapis.com/maps/api/staticmap?&key=[your_MAPS_API_KEY]&center=50.4501,30.5234&zoom=16&size=640x640&style=feature:road|element:geometry|color:0xFFFF00)

要求你得到：

[![风格化的静态地图](../Images/4121f68a407fedb404c69e3e0d6ef292.png)](https://i.stack.imgur.com/Ti9uW.png)

更多详情请查看[官方博客](https://maps-apis.googleblog.com/2016/09/custom-map-styling-with-google-maps.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-07T04:42:14.420

我建议您考虑使用 OpenStreetMap 数据而不是 Google MapView 切换到[osmdroid](http://code.google.com/p/osmdroid/)，并修改街道颜色渲染的源代码。

# mongodb - 实时或近实时分析应用程序设计注意事项

> ID：13439629
> 
> 赞同：0
> 
> 时间：2012-11-18T11:19:57.353
> 
> 标签：mongodb, hadoop, analytics, near-real-time, bigdata

我正在设计和实现（近）实时网络分析引擎。这类似于[Google Analytics](http://www.google.com/analytics/)和[ChartBeat](http://chartbeat.com/)。预计每天有近 1.5 亿个请求。我们有 5 到 8 台机器，每台机器配备 2.5GHz（8 核）CPU 和 16 GB RAM。

我正在寻找满足此要求的水平可扩展解决方案。目前，我正在为此目的分析 mongo-hadoop 组合。从我到现在的理解是，很难将所有数据保存在一个地方（一台机器）进行分析。因此，Hadoop 作为数据处理器和 MongoDB 作为数据存储在我看来是一个很好的组合。

这种应用程序是否有标准或（我应该说）经过验证的架构？我应该考虑哪些设计因素？mongo-hadoop 组合对某人有用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:25:00.370

我假设你已经读过这个？

[http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start](http://www.mongodb.org/display/DOCS/Hadoop+Quick+Start)

此处分片配置的更多详细信息和工作示例 - [http://www.slideshare.net/spf13/mongodb-and-hadoop](http://www.slideshare.net/spf13/mongodb-and-hadoop)

# php - 如何让用户在我的服务器上获取一些文件

> ID：13439635
> 
> 赞同：-1
> 
> 时间：2012-11-18T11:21:38.107
> 
> 标签：php, zip

我正在开发一个生成一些 PDF 文件的页面。

生成它们后，我想让用户下载所有创建的文件。

我在共享主机上禁用对 PHP 中 zip lib 的访问，我不知道如何将所有文件提供给用户。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:22:44.087

您只需要创建文件路径/地址的链接

```
 http://bla.com/folder/new.pdf

<a href="http://bla.com/folder/new.pdf">CLICK HERE TO DOWNLOAD pdf</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T12:23:54.733

我假设应该将十个文件下载到客户端计算机上。我的方法是发送所谓的下载标题，然后将浏览器重定向到下一个文件，直到所有文件都发送完毕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:30:47.340

如果你不能压缩，你可以尝试用这个来压缩它们：http: [//pear.php.net/package/Archive_Tar](http://pear.php.net/package/Archive_Tar) 或者你的操作系统的 exec 命令：`tar -cvwf pdf.tar pdf_files/`

获得 tar 文件后，您可以使用标签正常链接它。

# javascript - 如何导入 JSON 文件？

> ID：13439644
> 
> 赞同：0
> 
> 时间：2012-11-18T11:23:17.757
> 
> 标签：javascript, jquery

我想将我的数据放在一个单独的文件中（与所有其他文件的路径相同）。我正在努力导入 JSON 文件。这是我尝试过的，但没有奏效：

```
$.getJSON("rezepte.json", function(obj) {
var rezepte = obj.rezepte;
}); 
```

***更新 - 这就是最终的工作***非常感谢您的所有帮助。

```
var rezepte = $.getJSON("rezepte.json", function(obj) {
rezepte = obj.rezepte;
}); 
```

在代码中直接使用此数据时，一切正常：

```
var rezepte = [
{ "name" : "Eierkopf" , "zutaten" : ["eier", "butter", "kekse"] , "menge" : ["3 Eier", "20g Butter", "5 Kekse"] , "portionen" : 1 , "zubereitung" : ["1\. alles", "2\. schön", "3\. mischen."] },
{ "name" : "Käseschnitte" , "zutaten" : ["käse", "brot"] , "menge" : ["500g Käse", "2 Scheiben geschnittenes Brot"] , "portionen" : 2 , "zubereitung" : ["1\. Brotunterseite mit Butter bestreichen (altes Brot verwenden)", "2\. Brotoberseite mit Weisswein beträufeln", "3\. mit Käse bedecken und würzen", "4\. 20min. in vorgeheizten Ofen bei 180 Grad" , "5\. nomal öpis"] },
{ "name" : "Gemüse-Auflauf" , "zutaten" : ["lauch"] , "menge" : ["1 Stengel Lauch", "5 Zitronen"], "portionen" : 4 , "zubereitung" : ["1\. schneiden", "2\. Kochen", "3\. essen", "4\. xxx", "5\. yyy", "6\. en guete"] } ]; 
```

另存为`rezepte.json`：

```
{
"rezepte" :

[
{ "name" : "Eierkopf" , "zutaten" : ["eier", "butter", "kekse"] , "menge" : ["3 Eier", "20g Butter", "5 Kekse"] , "portionen" : 1 , "zubereitung" : ["1\. alles", "2\. schön", "3\. mischen."] },
{ "name" : "Käseschnitte" , "zutaten" : ["käse", "brot"] , "menge" : ["500g Käse", "2 Scheiben geschnittenes Brot"] , "portionen" : 2 , "zubereitung" : ["1\. Brotunterseite mit Butter bestreichen (altes Brot verwenden)", "2\. Brotoberseite mit Weisswein beträufeln", "3\. mit Käse bedecken und würzen", "4\. 20min. in vorgeheizten Ofen bei 180 Grad" , "5\. nomal öpis"] },
{ "name" : "Gemüse-Auflauf" , "zutaten" : ["lauch"] , "menge" : ["1 Stengel Lauch", "5 Zitronen"], "portionen" : 4 , "zubereitung" : ["1\. schneiden", "2\. Kochen", "3\. essen", "4\. xxx", "5\. yyy", "6\. en guete"] }
]

} 
```

***不幸的是，它仍然无法正常工作 - $.getJSON 只生成一个包含 3 个空对象的数组***很乐意获得进一步的帮助。谢谢，安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:24:16.230

听起来您需要访问`rezepte`返回对象的属性。

```
$.getJSON("rezepte.json", function(obj) {
    var rezepte = obj.rezepte;
}); 
```

将该参数命名为 是不明智的`json`，因为它不是一个 JavaScript 对象（通常）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:36:07.687

由于非 ascii 符号，您对其进行了错误编码，`rezepte.json`应如下所示：

```
[{"name":"Eierkopf","zutaten":["eier","butter","kekse"],"menge":["3 Eier","20g Butter","5 Kekse"],"zubereitung":["1\. alles","2\. sch\u00f6n","3\. mischen."]},{"name":"K\u00e4seschnitte","zutaten":["k\u00e4se","brot"],"menge":["500g K\u00e4se","2 Scheiben Brot"],"zubereitung":["1\. Brotunterseite mit Butter bestreichen (altes Brot verwenden)","2\. Brotoberseite mit Weisswein betr\u00e4ufeln","3\. mit K\u00e4se bedecken und w\u00fcrzen","4\. 20min. in vorgeheizten Ofen bei 180 Grad"]},{"name":"Gem\u00fcse-Auflauf","zutaten":["lauch"],"menge":["1 Stengel Lauch","5 Zitronen"],"zubereitung":["1\. schneiden","2\. Kochen","3\. essen","4\. xxx","5\. yyy","6\. en guete"]}] 
```

形成：

```
[
  {
    "name": "Eierkopf",
    "zutaten": [
      "eier",
      "butter",
      "kekse"
    ],
    "menge": [
      "3 Eier",
      "20g Butter",
      "5 Kekse"
    ],
    "zubereitung": [
      "1\. alles",
      "2\. sch\u00f6n",
      "3\. mischen."
    ]
  },
  {
    "name": "K\u00e4seschnitte",
    "zutaten": [
      "k\u00e4se",
      "brot"
    ],
    "menge": [
      "500g K\u00e4se",
      "2 Scheiben Brot"
    ],
    "zubereitung": [
      "1\. Brotunterseite mit Butter bestreichen (altes Brot verwenden)",
      "2\. Brotoberseite mit Weisswein betr\u00e4ufeln",
      "3\. mit K\u00e4se bedecken und w\u00fcrzen",
      "4\. 20min. in vorgeheizten Ofen bei 180 Grad"
    ]
  },
  {
    "name": "Gem\u00fcse-Auflauf",
    "zutaten": [
      "lauch"
    ],
    "menge": [
      "1 Stengel Lauch",
      "5 Zitronen"
    ],
    "zubereitung": [
      "1\. schneiden",
      "2\. Kochen",
      "3\. essen",
      "4\. xxx",
      "5\. yyy",
      "6\. en guete"
    ]
  }
] 
```

# java - byte[] byteArray = anotherByteArray 是做什么的？

> ID：13439647
> 
> 赞同：2
> 
> 时间：2012-11-18T11:23:56.760
> 
> 标签：java, arrays, constructor, byte

如果这个问题非常容易回答，我会立即道歉，但我以前从未处理过 Java，我什至不知道如何正确地表达这个问题。让我们假设以下代码（在 Java 中）：

```
byte[] arrayOfBytes1;
int i = 16;
arrayOfBytes1 = new byte[i];

byte[] arrayOfBytes2 = arrayOfBytes1; 
```

所以我的问题是，arrayOfBytes2 实际上是什么？它会是arrayOfBytes1 的独立副本，还是会引用它？提前致谢。

PS 哦，如果有人可以提供 C/C++ 模拟，那将非常有帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-18T11:25:35.823

它将作为对它的引用，因此您可以通过执行以下操作来避免很多混乱：

```
byte[] arrayOfBytes2 = arrayOfBytes1.clone(); 
```

这样，您将获得初始数组的独立副本。

# java - 如何在java中识别二维数组相对于CSV单元格的位置

> ID：13439650
> 
> 赞同：0
> 
> 时间：2012-11-18T11:24:12.277
> 
> 标签：java, excel, csv

我想在java中获得一个二维数组的位置。

**目的**：我从 CSV 文件中获取这个二维数组进行验证。所以我想通过提及它的 Cell 位置来确定哪个是无效的。

例子：

**    A B C D E  **

1 **  a b c d e**

2 **  f g h i j**

3 **  k l m n o**

4 **  p q k r s**

如果我在上面输入的代码中给出“h”，它应该给我 C2。这方面的 API 将非常有帮助。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:30:43.503

Apache POI 应该可以帮助您进行 excel 操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T20:10:58.457

使用以下方法以获得更好的结果。

```
private static String ConvertColumnNumberToChars( int i ){

if( i < 0 )
throw new UnsupportedOperationException("Converted number must be greater than zero.");

int iBase = 'Z' - 'A'+1;
if( iBase > Character.MAX_RADIX )
throw new UnsupportedOperationException("This JRE can't convert to radix greater than "+Character.MAX_RADIX);

String interConversion = Integer.toString(i-1, iBase).toUpperCase();

//System.out.print("inter: "+ interConversion +";  ");

char[] ac = interConversion.toCharArray();

for( int j = 0; j < ac.length; j++ ) {

int poziceOdzadu = ac.length - j - 1;
char c = ac[j];
ac[j] =  (char) ('A' - poziceOdzadu + Character.digit( c, iBase ));

}
return String.copyValueOf( ac );

} 
```

您所要做的就是向该方法输入一个 int 值，该方法要更改为列名。

String Value's Row Number+1 为 CSV 文件的行号，ConvertColumnNumberToChars(Number+1) 为列字符名。

祝你好运！

# java - 是否可以使用扫描仪创建实例？

> ID：13439654
> 
> 赞同：0
> 
> 时间：2012-11-18T11:24:23.643
> 
> 标签：java

我们知道如何通过在 main 中编写来创建实例...

```
Class newObject = new Class(); 
```

有没有办法通过用户输入创建一个“newObject”并弹出一个新的newObject？我正在考虑使用扫描仪，但我不确定如何完成。我是这样猜测的：

```
Scanner sc = new Scanner(System.in);
Class sc.next(); = new Class(); 
```

还是这样？

```
Scanner sc = new Scanner(System.in);
(some name) = sc.next();
Class (some name) = new Class(); 
```

因此，用户将对象名称（某个名称）输入到扫描仪中，然后将创建该对象名称（某个名称）。

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T08:01:00.453

您可以使用 Apache commons 中的 BeanUtils 来编写一个为您执行此操作的方法。我以前做过类似以下的事情。

```
 public <T> T bindBean(String[] line, Class<T> cls) throws Exception {
        T newInstance = cls.newInstance();
        Map<String, Object> properties = BeanUtils.describe(newInstance);
        Field[] format = cls.getDeclaredFields();
        for (int i = 0; i < format.length; i++) {
            properties.put(format[i].getName(), line[i]);
        }
        BeanUtils.populate(newInstance, properties);

        return newInstance;
    } 
```

您可以像上面一样创建一个方法，然后从 Scanner 传递 line[] 参数。或者您可以从方法内部获取值。那只是偏好。

我在这里抛出了异常，因为我只是想证明我的观点而不是处理它们。希望这是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:27:11.647

最好的方法是创建一个接受 Scanner 类的构造函数来创建 Class，假设您可以访问 Class 代码并且可以输入值。

```
Class testClass{

  testClass(Scanner input)
  {
    //Populate the class.
  }

} 
```

如果 Class 是原始类型，那么您可以只使用 nextInt （或其他相关）类型函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:28:47.160

您可以将反射用于您的目的，如下所示：

```
ClassLoader classLoader = ClassLoader.getSystemClassLoader();
String className = sc.next()
Class userClass = classLoader.loadClass(className);
Object classInstance = userClass.newInstance(); 
```

类加载器用作其名称状态：用于加载类。只需给它类的名称，如果在您的可执行库（即 jar 文件或类）或项目构建路径中找到此类，它将创建您需要的类（仍然不是实例）。

比你使用这个类来创建一个实例，这会产生一个具有所需类实现的通用对象

# sql - 简单的 sql 查询 - 无法扩展临时段错误

> ID：13439660
> 
> 赞同：-1
> 
> 时间：2012-11-18T11:25:10.067
> 
> 标签：sql, oracle

我想像这样在 Oracle 服务器上运行一个查询（我知道这没有意义，但试图让它尽可能简单）：

```
select tableA.acolumn
from A.tableA, A.tableB, C.tableC
where tableA.acolumn = tableB.acolumn and tableA.cId = tableC.id 
```

`tableA`并且`tableC`有大约 4 万条记录，`tableB`大约有 1 万条。

它运行 5 分钟，然后抛出错误

> *ORA-01652: 无法扩展临时段。*

如果我在没有“C.tableC”的情况下执行它，它会在 2 秒内完成。

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T16:19:33.980

我设法解决了这个问题。tableC 需要使用gather_table_stats 函数手动分析。

# java - 如何在 Arch Linux 上安装 Java

> ID：13439665
> 
> 赞同：17
> 
> 时间：2012-11-18T11:26:04.487
> 
> 标签：java, archlinux, manjaro

根据[https://wiki.archlinux.org/index.php/Java](https://wiki.archlinux.org/index.php/Java)我可以通过调用命令在干净的 Arch Linux 安装上安装 Open JDK 7

```
pacman -S jdk7-openjdk 
```

但是这样做时，我收到一条错误消息

```
error: target not found: jdk7-openjdk 
```

我已经注释掉了我最近的 Pacman 存储库，`/etc/pacman.d/mirrorlist`并通过调用 pacman -Syu 运行了第一次更新，希望这会导致上面的包被发现。

**如何使用 pacman 在 Arch Linux 上安装 Open JDK 7？**

编辑：我正在运行一个带有 ARM 处理器的 Raspberry Pi，我希望获得一个为其硬件量身定制的 Java 版本，并使用操作系统硬件浮点支持。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-07T16:22:48.253

获取您附近最好的镜子（查看[此列表](https://www.archlinux.org/mirrors/)）；你甚至可以在[archlinux 网站](https://www.archlinux.org/mirrorlist/)上生成一个新的镜像列表。然后运行`# pacman -Syy; # pacman -Su; # pacman -S jdk8-openjdk`（或者`jre8-openjdk`如果您只需要 JRE）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-06T09:33:18.650

尝试以下命令：

```
pacman -S jre7-openjdk 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-18T11:32:02.857

OpenJDK 依赖于多个 Arch Linux 软件包，因此仅安装 Oracle 的 JDK 是不够的。

首先必须删除 icedtea-web

```
sudo pacman -R icedtea-web 
```

然后构建 Oracle JRE AUR 包，

在安装 OracleJRE 之前，我必须手动删除 openjdk6 并忽略依赖项：

```
[argy@Freak jre]$ sudo pacman -Rdd openjdk6 
```

安装 OracleJRE

```
sudo pacman -U jre-7u2-1-i686.pkg.tar.xz 
```

构建和安装 JDK AUR 包：

```
sudo pacman -U jdk-7u2-1-i686.pkg.tar.xz 
```

注销并登录，以便更新 PATH 并安装 java。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-06T08:56:04.673

只是一个快速的观察：

当您更改存储库时，最好使用更新，`pacman -Syyu`因为这将刷新所有包。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-18T11:30:22.710

试试这个：

```
pacman -S java7-openjdk 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-13T13:35:48.593

基于armv6l的RB。检查[here](http://archlinuxarm.org/packages)你可以看到没有用于armv6l的openjdk的打包版本。

这就是我在 raspi 上展示的拱门

```
 [root@raspi ~]# pacman -Ss openjdk
    extra/openjdk6 6.b24_1.11.4-1
    Free Java environment based on OpenJDK 6.0 with IcedTea6 replacing binary plugs.
   [root@raspi ~]# 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-28T21:59:13.483

或者您可以完全跳过`pacman`并完全控制：

*   [从https://adoptopenjdk.net/](https://adoptopenjdk.net/)下载`tar.gz`您需要的 JDK 版本

*   展开存档：`tar zxvf OpenJDKxxx.ta.gz`

*   将 JDK 移动到`/opt`：`sudo mv jdk-xxx /opt`

*   更新`PATH`：

```
export JAVA_HOME=/opt/jdk-xxx
export PATH=$PATH:$JAVA_HOME/bin 
```

*   测试：`java -version`

这样，您可以安装任意多个不同版本的 JDK，并通过更改`PATH`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-30T09:56:54.180

由于当前下载和安装 Oracle JDK 的过程，您可能无法在 linux 环境下轻松完成此操作。因为很多以前支持的 JDK 包现在都不起作用了。如果你想在你的**arch-linux / manjaro**机器上安装**Oracle JDK-8 ，**[这个要点](https://gist.github.com/RavinduSachintha/1b41eeed5e1fcb84ec71f2e26854274e)会很好地指导你。

 **解决方案将简要如下。

1.  首先需要将相关的 JDK git 克隆到您的 PC。

    `cd ~/Downloads && git clone https://aur.archlinux.org/jdk8.git`

2.  现在你应该在 Downloads 中有一个 jdk8 文件夹。将您从 oracle 下载的“.tar.gz”移动到该文件夹​​，如果它也在下载中，并且我的文件名正确，命令将是这样的。

    `mv ~/Downloads/jdk-8u212-linux-x64.tar.gz ~/Downloads/jdk8/`

3.  现在我们将进入 jdk8 文件夹并编辑 PKGBUILD。

    `cd jdk8 && nano PKGBUILD`

4.  我们要更改的源代码行是.... `"https://download.oracle.com/otn-pub/java/jdk/${pkgver}-${_build}/${_hash}/${_pkgname}-${pkgver}-linux-x64.tar.gz"`到我们现在在文件夹中的文件名，`jdk-8u212-linux-x64.tar.gz`

5.  保存并退出 PKGBUILD。现在我们可以从该目录中构建和安装。

    `makepkg -sric`

6.  如果一切看起来都很好，您可以在完成后删除该目录。

    `cd ~ && rm -r ~/Downloads/jdk8`**

# mysql - 删除直接在 MySQL 上生成的 UUID 的破折号

> ID：13439673
> 
> 赞同：8
> 
> 时间：2012-11-18T11:27:25.573
> 
> 标签：mysql, uuid

我使用 PDO 直接在 MySQL 上生成`UUID`using 。`INSERT INTO tbl1 (key, val) VALUES (UUID(), :value)`我不知道如何在 MySQL 端删除那些**-**（破折号），在 PHP 端我可以简单地使用`str_replace()`.

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-06T01:20:10.003

```
REPLACE(UUID(),'-','') 
```

您不需要 UNHEX，只需替换连字符即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:31:06.747

获取十进制值以放入某些整数字段使用

```
UNHEX(REPLACE(UUID(),'-','')) 
```

# linux-kernel - 在 register_chrdev_region 中使用计数变量

> ID：13439681
> 
> 赞同：0
> 
> 时间：2012-11-18T11:27:50.640
> 
> 标签：linux-kernel, linux-device-driver, kernel-module, drivers

据我了解，的签名`register_chrdev_region`描述如下

```
extern int register_chrdev_region(dev_t firstmajor,unsigned int count,const char*dev_name);
//firstmajor: The major number requested for reservation of the dirver
//dev_name: Name of the device associated with the major number(for procfs and sysfs)
//count: Total number of contagious device numbes that is requested?? 
```

我没有`count`在函数中使用争论（`alloc_chrdev_region`同样）。请解释一个为驱动程序保留传染设备号的简单用例

参考[http://www.makelinux.net/ldd3/chp-3-sect-2中的3.2.2](http://www.makelinux.net/ldd3/chp-3-sect-2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-09-21T13:31:34.337

Count 是分配给此主编号或此驱动程序的次编号的数量 **在创建设备节点时，用户有责任创建具有允许的次编号的设备节点（它应该小于计数）**

例如：如果我们创建第一个数字为 0 并计数为 2 的驱动程序，内核会为该驱动程序分配 0 到 2 个次要数字。但是用户仍然可以创建一个次要编号大于 2 的设备节点。如果次要编号大于 2，内核无法访问该设备节点的驱动程序，因为该次要编号未注册，因此无法打开该设备节点并抛出错误您想在该设备节点上执行文件操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T13:13:31.477

评论说：

```
/**     
 * alloc_chrdev_region() - register a range of char device numbers
 * @dev: output parameter for first assigned number
 * @baseminor: first of the requested range of minor numbers
 * @count: the number of minor numbers required
 * @name: the name of the associated device or driver
 *      
 * Allocates a range of char device numbers.  The major number will be
 * chosen dynamically, and returned (along with the first minor number)
 * in @dev.  Returns zero or a negative error code.
 */ 
```

您可以在 fs/fuse/cuse.c 中找到一个示例：

```
/* determine and reserve devt */
devt = MKDEV(arg->dev_major, arg->dev_minor);
if (!MAJOR(devt))
        rc = alloc_chrdev_region(&devt, MINOR(devt), 1, devinfo.name);
else
        rc = register_chrdev_region(devt, 1, devinfo.name);
if (rc) {
        printk(KERN_ERR "CUSE: failed to register chrdev region\n");
        goto err;
} 
```

# flash - 使用 Flash 和 Red5 实时流式传输的视频的垂直条失真

> ID：13439682
> 
> 赞同：2
> 
> 时间：2012-11-18T11:27:58.473
> 
> 标签：flash, video, webcam, red5

我有一个带闪存和播放器的 Red5 流媒体。我使用 H.264 编码器来传输视频。但是有一些问题大约有 20% 的人，这些条出现在视频中：

![在此处输入图像描述](../Images/7183ffc0e8cc4d160edd4e246107b97e.png)

如何摆脱那些酒吧？我尝试使用许多不同的设置和目标 Flash 播放器版本创建 .swf。如您所见，这些条似乎没有被压缩，所以这可能是播放器问题，而不是记录器问题？问题连接到指定的流，我的意思是如果一个流有这些条，那么每个其他播放器（该指定流的观察者）也会有这种失真。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:35:34.397

我不能说你为什么会得到这个或如何解决它，但我很确定我能说出*什么*这是。这看起来像是一种非常典型的错误类型，其中图像存储为具有一定步幅的一维数组（在一维数组中前进到下一行的距离），但它正在以不同的步幅进行处理或显示，导致每个连续行相对于前一行水平偏移相同的量。步幅通常可能不等于视频的宽度，两者之间的混淆是视频软件中常见的错误类型。亮度（灰度）平面（图像的一部分）似乎在此处具有正确的步幅，但视频的色度（颜色）平面已以不正确的步幅进行处理。绿色区域看起来在 YUV 颜色空间中具有 U=0 和 V=0 的色度值（即它们可能来自行之间的填充），

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T13:14:22.237

你的陈述：

```
I mean that if a stream has those bars, then every other player (watcher of that specified stream) will also have this kind of distortion. 
```

=> 这对我来说听起来基本上就像一个网络摄像头问题。您是否也尝试使用标准设置发布流？我的意思是使用 Sorensen 编解码器代替 h264。Sorensen Codec 也会出现这些问题吗？原因基本上，当在发送方创建视频时，您的问题听起来像是一个问题。Red5 什么都不做，然后将流代理给所有参与者。

塞巴斯蒂安

# .htaccess - 使用 .htaccess 处理两个查询字符串

> ID：13439684
> 
> 赞同：3
> 
> 时间：2012-11-18T11:28:11.480
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, query-string, clean-urls

我正在尝试为具有两个查询字符串参数的页面重写 url。并根据这些参数值（设置与否），在页面上显示不同的内容。

```
example.com/fotograf.php?aid=10
example.com/fotograf.php?aid=10&fid=5 
```

上面的 URL 是未重写的示例。我只是想让它们

```
example.com/fotograf/10/
example.com/fotograf/10/5/ 
```

第一个 URL 链接到包含照片的相册，第二个 URL 链接到该相册中的照片。

在`.htaccess`中，我只想能够通过上面的干净 URL 访问他们。之后，我将检查脚本顶部的 URL，如果它不干净，那么使用我编写的函数将其重定向到干净的 URL（通过使用 preg_match 和 preg_split 获取值并使用 header 函数重定向）。

到目前为止，我已经尝试过这个规则（这对查看专辑不起作用）：

```
RewriteRule ^fotograf/([0-9-/]+)/([0-9]+)/?$ fotograf.php?aid=$1&fid=$2 [L] 
```

然后，这个（总是重定向到专辑）：

```
RewriteRule ^fotograf/([0-9-/]+)/?$ fotograf.php?aid=$1 [L] 
```

最后，这个（帮助我通过类似的 URL 查看照片`example.com/fotograf/10/?fid=5`）：

```
RewriteCond %{QUERY_STRING} ^fid=(.*)$
RewriteRule ^fotograf/(.*)/$ fotograf.php?aid=$1&fid=%1 
```

但我不想在 URL 中看到任何问号或 & 符号。

不知何故，我需要检查哪些（已）设置并相应地重定向，但我只是不知道如何实现这一点。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:50:33.430

你需要让你的应用程序生成你想要的 URL，所以在表单中：

```
example.com/fotograf/10/
example.com/fotograf/10/5/ 
```

并遵循重写规则将确保它会到达您的 php：

```
RewriteEngine On

RewriteRule ^fotograf/([0-9]+)/([0-9]+)/?$ fotograf.php?aid=$1&fid=$2

RewriteRule ^fotograf/([0-9]+)/?$ fotograf.php?aid=$1 
```

`mod_rewrite`无法重写 HTML 页面中的 URL...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T03:33:30.670

```
# this works 
  RewriteEngine On
  RewriteBase /yourdir/yourfolder/

# only 1 in root 
# RewriteRule ^([a-zA-Z0-9-]+)$ index.php?act=$1[L,QSA]

  RewriteRule ^([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/?$ members.php?act=$1&opts=$2

  RewriteRule ^([a-zA-Z0-9-]+)/?$ members.php?act=$1

 #   Your url would be:
 #   example of http://localhost/yourdir/yourfolder/members.php?act=beer
 #   http://localhost/yourdir/yourfolder/beer
 # or 
 # http://localhost/yourdir/yourfolder/members.php?act=beer&ops=morebeer
 # http://localhost/yourdir/yourfolder/beer/morebeer 
```

# sqlite - 在 SQLite 中按日期运行 Total-Order

> ID：13439687
> 
> 赞同：1
> 
> 时间：2012-11-18T11:29:07.503
> 
> 标签：sqlite, android-sqlite

我有一张如下表：

```
 CREATE TABLE [TBL_test] ([ID] int PRIMARY KEY,[RDate] CHAR(10),[Debtor] int,
    [Creditor] int);

    insert into [TBL_test] values(1,'2012/10/11',100,0);
    **insert into [TBL_test] values(2,'2012/11/02',20,0);**
    insert into [TBL_test] values(3,'2012/11/09',0,5);
    **insert into [TBL_test] values(4,'2012/11/02',0,10);**

    select *,(select sum(t2.Debtor - t2.Creditor) from TBL_test t2 where t2.rdate <=
    t1.rdate                
    order by rdate) as RT
    from TBL_test t1
    order by rdate 
```

结果

```
ID  RDate       Debtor  Creditor    RT
1   2012/10/11  100     0           100
2   2012/11/02  20      0           110
4   2012/11/02  0       10          110
3   2012/11/09  0       5           105 
```

请建议我该如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T12:36:25.213

不是证明解决方案，但可能对您有用，无需更改日期值

```
select *,(select sum(t2.Debtor - t2.Creditor) from TBL_test t2 where (t2.rdate < t1.rdate) or (t2.rdate = t1.rdate and t2.ID <= t1.ID) ) as RT
from TBL_test t1
order by rdate,ID 
```

# hibernate - 什么是服务方式？

> ID：13439689
> 
> 赞同：0
> 
> 时间：2012-11-18T11:29:13.137
> 
> 标签：hibernate, jakarta-ee, service, dependency-injection

我正在学习 Hibernate，同时阅读与 DI 或 IOC 相关的文章。

在学习hibernate和阅读与DI或IOC相关的文章时，我发现这个术语叫做“服务”，什么是服务方法？它如何影响您的整个应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:43:00.310

如今，典型的设计（在某种程度上被 Spring 和 EJB 普及）涉及三层：Web、服务和 DAO。

Web 层应该只与服务层交互（调用服务方法），提供具有事务管理的高级业务功能。

业务层应该只调用 DAO 层（或业务层的其他部分），请求数据。每个 Web 请求都可能涉及多个业务调用，每个业务调用都可能涉及多个 DAO 调用。

# 也可以看看

*   [在DAO，服务层架构中使用spring MVC和Hibernate的正确方法是什么](https://stackoverflow.com/questions/8993318)

# android - Android 应用程序中的 Modbus4j

> ID：13439695
> 
> 赞同：1
> 
> 时间：2012-11-18T11:29:55.423
> 
> 标签：android, exception, modbus

我在 Android 应用程序中使用 modbus4j。在我用java测试它之前，它工作正常。但在 Android 中，master.init() 有问题，它不起作用。在清单中，我添加了 Internet 和访问网络状态的权限。我有一个或多或少这样的代码：

```
// Perform action on click
            // Read IP from layout***
            EditText edittext_IP = (EditText) findViewById(R.id.editText1);
            TextView MWReaded = (TextView) findViewById(R.id.textView4);
            // **********************

            //
            String slaveIP;
            slaveIP = edittext_IP.getText().toString();

            ModbusFactory factory = new ModbusFactory();
            IpParameters params = new IpParameters();
            params.setHost(slaveIP);
            params.setPort(502);
            params.setEncapsulated(false);
            ModbusMaster master = factory.createTcpMaster(params, true);
            master.setTimeout(500);
            master.setRetries(2);

            try {
                master.init();
            } catch (ModbusInitException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
                Toast.makeText(getApplication(),
                        "Error: " + e.getMessage(), 10).show();
            }
            ModbusLocator locator = new ModbusLocator(1,
                    RegisterRange.HOLDING_REGISTER, 0,
                    DataType.TWO_BYTE_INT_UNSIGNED);

            Object xx = null;
            try {
                xx = master.getValue(locator);
            } catch (ModbusTransportException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ErrorResponseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            int Register = 0;

            if (xx != null){
            Register = Integer.parseInt(xx.toString());
            } else{
                Register = 6969;
            }

            MWReaded.setText(String.valueOf(Register));
            TextView txttest_n = (TextView) findViewById(R.id.textView5);
            txttest_n.setText("n=" + n);
            n = n + 1;

        }
    }); 
```

但是主人永远不会被初始化。我可以看到一个例外。“android.os.NetworkOnMainThreadException”

**你知道我该如何解决这个问题吗？**

# java - java中的公共静态void main

> ID：13439696
> 
> 赞同：-2
> 
> 时间：2012-11-18T11:29:56.510
> 
> 标签：java

我在一次采访中被问到为什么我们不首先创建一个包含该`main`方法的类的实例，就像 java 中的所有其他类一样。为什么要 `main`声明方法`static`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T11:56:21.923

至于**为什么**使用该`main`方法`static`——对于入口点方法来说，这是一个完全合理的选择，它是在新 Java VM 中执行的第一段代码。如果不是`static`，则入口点类必须有更多的约束和要求，因为 JVM 首先需要实例化它，然后调用`main`. 这不会起到建设性的作用，只会成为障碍。

# assembly - 在汇编中制作动态数组

> ID：13439700
> 
> 赞同：1
> 
> 时间：2012-11-18T11:30:40.430
> 
> 标签：assembly, masm, dynamic-arrays, dynamic-allocation

如何在汇编中的程序中间制作一个动态数组？我试过这段代码，但没有用

```
.CODE
.DATA
list DWORD <register or memory>DUP(?) 
```

你知道解决这个问题的任何方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T01:39:20.463

`dup`不是 NASM 或 FASM 语法，而是 MASM；并且由于您不能在 *nix 上合法使用 MASM，`sys_newstat`因此`sys_brk`也不可能。所以你的目标是Windows？

您将使用`Heap*`内存 API 函数。你会使用`HeapAlloc`和`HeapReAlloc`。如果您不介意 CRT 依赖项，那么您可以按照 Linuxios 的建议进行操作并使用`malloc`

# android - PhoneGap 是 App 开发的好选择吗？

> ID：13439705
> 
> 赞同：44
> 
> 时间：2012-11-18T11:31:13.453
> 
> 标签：android, cordova

我是一名新的 iOS 开发人员，但目前对 Android 开发和 Java 一无所知。我将花时间学习开发 Android 版本应用程序的工具。PhoneGap 的跨平台能力听起来很强大，但我不确定是否有任何缺点。谁能告诉我使用PhoneGap的利弊？根据您的经验，您会建议我选择原生 Android 还是 PhoneGap？在此先感谢您的任何建议。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-11-18T12:07:23.067

很久以前，我一直在使用 Phonegap 进行开发。
`NOTE: this is all based on my own experience`

### 专业人士：

*   您不需要任何“本地”经验，只需要中级“网络开发技能”就足够了。
*   对于 95% 的用户来说，您不必担心它是否可以在 iOS 和 Android 上运行，因为 Phonegap 可以解决您的所有问题，只需使用 Phonegap Libs。
*   就我的经验而言，对于 iOS 来说，测试起来非常简单快捷。
    *   我团队的另一部分正在构建“android 版本”。别担心，你不需要。那是个人的选择。最后，我们将所有内容合并在一起，只需要重新检查几件事。（例如，不同页面上的不同布局。有关此内容的更多信息，请参见**缺点**。）

### 缺点

*   您必须考虑要使用的按钮。Android 设备有一个自己的“返回”按钮。至于 iOS，您需要在您的应用程序中开发它。这是您自己的选择，但您最终可能会设计两个页面。
*   性能方面的Phonegap并不是最好的。我不能告诉你这个的确切原因，核心方面。我们的应用程序不需要高度图形化的界面，但 Phonegap 似乎已经在与“体面”的网页作斗争了。因此，当您计划构建需要高图形性能的游戏或应用程序时，您最好使用原生。

### 然后我为你做了一些快速的研究。

*   [在这里](https://spreadsheets.google.com/pub?key=0AsTInFQpmXDNdEdJU0ZNNGx3dDA3aXAxV3lXYWhXVHc "移动框架比较")，我找到了一个不错的移动框架比较。（通过[这个 SO q。](https://stackoverflow.com/questions/6927564/any-disadvantages-of-using-jqtouch-phonegap-over-android-api "在 Android API 上使用 JQTouch/Phonegap 有什么缺点吗？")）
*   [这](http://www.sapandiwakar.in/api-research-study-iphone-and-android-applications/ "Titanium v​​s Phonegap vs Native 应用程序开发")是一篇写得很好的文章，比较了**Titanium**、**Phonegap**和**Native**应用程序开发。
*   [这里](http://www.tekritisoftware.com/phonegap-app-development-pros-cons "使用 PhoneGap 开发移动应用程序 - 优点和缺点")列出了优点和缺点。

绑定在一起，这实际上取决于您的应用程序的目的。
在设计需要高图形性能的游戏或其他应用程序时，您最好使用原生编程。
当您计划构建轻量级应用程序并且您已经具备 Web 开发知识时，我推荐 Phonegap。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-18T12:12:48.770

您正在寻找一种工具来开发已经存在的 Android 版本的应用程序？那么作为关键优势的跨平台能力不会被使用吗？

我建议您在原生 Android 开发上投入一些时间。您可能熟悉 Objective-C，进入 JAVA 不会是一项艰巨的任务。由于其一致的外观（按钮和其他布局组件）和更好的性能，本机应用程序比 Web 应用程序获得更好的评级。PhoneGap 应用程序在 iOS 设备上运行愉快，但在三星 Galaxy Nexus 等双核 Android 设备上仍然落后。

入门：

*   [安卓 SDK 下载](http://developer.android.com/sdk/index.html)
*   [Eclipse IDE 下载](http://www.eclipse.org/downloads/packages/eclipse-ide-java-developers/junosr1)
*   [Google 的入门培训](http://developer.android.com/training/index.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-18T11:39:11.883

我刚刚从头开始尝试原生 Android 和 Phonegap。如果您想在 Android 上做一些不需要 phonegap 未涵盖的特定手机功能的事情，Phonegap 可能是一个好主意（因为否则您将同时使用 phonegap 和 android native 来开发 phonegap 插件 =D）。

另一方面，Android 在 Activity 生命周期的管理上引入了一些复杂性，使用 phonegap 时无需担心。

因此，如果您不需要一个非常复杂的应用程序，但它可以像一个简单的 Web 应用程序一样运行良好，或者如果您需要的所有电话功能都由 phonegap 支持，那么 phonegap 可能是首选（特别是如果您已经熟悉 Web 开发）。

啊，当然，您不能期望 phonegap 应用程序具有与本机应用程序相同的性能。但同样，如果您的性能要求不是太高，那么可能值得考虑 phonegap。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-18T12:40:51.737

phonegap 作为一个原生 webview 工作，可以访问一些主要的原生功能，比如手势相机......使用它，除了原生功能之外，您还可以在任何 Web 应用程序中做任何您可以做的事情......所以这一切都取决于您的应用程序以及你真正想做的事

# java - Java中用于识别网络消息的连续常量

> ID：13439707
> 
> 赞同：0
> 
> 时间：2012-11-18T11:31:39.513
> 
> 标签：java, networking, constants

我这里有一个 Java 问题。我有很多常量，它们是连续的常量整数，目前定义如下：

```
interface Flags {
  static final short A = 0;
  static final short B = A + 1;
  static final short FIRST_USER_FLAG = B + 1;
} 
```

你们中的许多人现在会推荐我使用 Enum。问题是，我需要不止一个地方有这些标志。所以它会像：

```
interface CustomFlags {
  static final short USER_A = Flags.FIRST_USER_FLAG + 1;
  static final short USER_B = USER_A + 1;
} 
```

您在此处看到的代码也必须在网络的两侧相同，包括在服务器代码和客户端代码中。它们之间的每条消息都定义了它的标志，并且通过这个标志，网络创建了使用这个标志注册的消息对象。这似乎不是最好的方法，但我想不出更好的方法。问题是，网络代码有自己的标志和消息，它们执行一些基本的身份验证和握手。然后必须有使用网络的代码定义的消息（及其标志）。

我的问题是，如何使它更易于维护和阅读？此外，如果有人知道发送和重新创建消息的更好方法（我同时使用 TCP 和 UDP，取决于消息），我将非常感激听到它。

如果有什么我没有解释的，请告诉我，我会补充的。

PS：对不起我的英语不好，因为我不是母语人士。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:52:25.993

我会保持原样。这是定义协议常量的常用技术。如果对等点不是 Java，我可能会进一步“去工程化”，直接定义名称和它们的值，而不用担心算术。你不希望它很容易改变，你实际上希望它不可能改变，这样就不会无意间出现协议不兼容性。枚举适用于你对名称和类型安全更感兴趣的情况，并且不太关心实际值，序数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:40:01.057

枚举仍然是答案。您可以专门列出一个值，或者将枚举放在服务器和客户端通用的接口文档中，或者您可以简单地要求各个区域的值相同。IE，

```
public enum Flags
{
  short A (0);
  short B (1);
  short FIRST_USER_FLAG (2);
  private int value;

  private Flags(int value) {
      this.value = value;
  }
} 
```

然后指定枚举必须在服务器和客户端上都满足该标准。如果需要，您可以向服务器提供枚举。

# c# - 在 Compact Framework 中设置 LastWriteTime

> ID：13439713
> 
> 赞同：2
> 
> 时间：2012-11-18T11:32:46.597
> 
> 标签：c#, file, windows-mobile, compact-framework

我需要更改`LastWriteTime`智能设备项目（Windows Mobile 6 Professional）中的属性，所以我使用的是 Compact Framework。

该类`File`支持获取最后写入时间（`File.GetLastWriteTime`），但`File.SetLastWriteTime`不支持该方法。

我尝试使用`FileInfo`类及其`LastWriteTime`属性，但它对于 Compact Framework 是只读的。

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T13:31:01.173

在紧凑框架上，许多功能不受支持。你必须 p/invoke 这个 windows API 函数。

[设置文件时间](http://msdn.microsoft.com/en-us/library/ms886812.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T09:19:29.220

用

```
 DateTime dtNow = new DateTime();
        dtNow = DateTime.Now;
        Win32Setfiletime.setLastWrite(@"\zdump.exe", dtNow); 
```

Win32文件时间：

```
 using System;

    using System.Collections.Generic;
    using System.Text;

    using System.Runtime.InteropServices;

    namespace SetFileTime
    {
        class Win32Setfiletime
        {
            [StructLayout(LayoutKind.Sequential)]
            struct FILETIME
            {
                public uint DateTimeLow;
                public uint DateTimeHigh;
            }
            [StructLayout(LayoutKind.Sequential)]
            struct SYSTEMTIME
            {
                [MarshalAs(UnmanagedType.U2)]
                public short Year;
                [MarshalAs(UnmanagedType.U2)]
                public short Month;
                [MarshalAs(UnmanagedType.U2)]
                public short DayOfWeek;
                [MarshalAs(UnmanagedType.U2)]
                public short Day;
                [MarshalAs(UnmanagedType.U2)]
                public short Hour;
                [MarshalAs(UnmanagedType.U2)]
                public short Minute;
                [MarshalAs(UnmanagedType.U2)]
                public short Second;
                [MarshalAs(UnmanagedType.U2)]
                public short Milliseconds;

                public SYSTEMTIME(DateTime dt)
                {
                    dt = dt.ToUniversalTime();  // SetSystemTime expects the SYSTEMTIME in UTC
                    Year = (short)dt.Year;
                    Month = (short)dt.Month;
                    DayOfWeek = (short)dt.DayOfWeek;
                    Day = (short)dt.Day;
                    Hour = (short)dt.Hour;
                    Minute = (short)dt.Minute;
                    Second = (short)dt.Second;
                    Milliseconds = (short)dt.Millisecond;
                }
            }
            static DateTime getDateTime(SYSTEMTIME systemTime)
            {
                DateTime dt = new DateTime(systemTime.Year, systemTime.Month, systemTime.Day, systemTime.Hour, systemTime.Minute, systemTime.Second);
                return dt;
            }
            static SYSTEMTIME getSystemTime(DateTime dt)
            {
                SYSTEMTIME st = new SYSTEMTIME(dt);
                return st;
            }
            static FILETIME getFileTime(DateTime dt)
            {
                FILETIME ft = new FILETIME();
                SYSTEMTIME st = new SYSTEMTIME(dt);
                SystemTimeToFileTime(ref st, ref ft);
                return ft;
            }
            [DllImport("coredll.dll", EntryPoint = "SystemTimeToFileTime", SetLastError = true)]
            static extern bool SystemTimeToFileTime(ref SYSTEMTIME lpSystemTime, ref FILETIME lpFileTime);

            [DllImport("coredll.dll", SetLastError = true)]
            static extern bool FileTimeToSystemTime([In] ref FILETIME lpFileTime,out SYSTEMTIME lpSystemTime);

            [DllImport("coredll.dll")]
            static extern bool FileTimeToLocalFileTime([In] ref FILETIME lpFileTime, out FILETIME lpLocalFileTime);

            [DllImport("coredll.dll", SetLastError = true)]
            [return: MarshalAs(UnmanagedType.Bool)]
            static extern bool SetFileTime(IntPtr hFile, ref FILETIME lpCreationTime, ref FILETIME lpLastAccessTime, ref FILETIME lpLastWriteTime);
            [DllImport("coredll.dll")]
            static extern bool GetFileTime(IntPtr hFile, ref FILETIME lpCreationTime, ref FILETIME lpLastAccessTime, ref FILETIME lpLastWriteTime);
            [DllImport("coredll", SetLastError = true)]
            static extern IntPtr CreateFile(String lpFileName, EFileAccess dwDesiredAccess, EFileShare dwShareMode, IntPtr lpSecurityAttributes, ECreationDisposition dwCreationDisposition, EFileAttributes dwFlagsAndAttributes, IntPtr hTemplateFile);

            #region "constants"
            [Flags]
            enum EFileAccess : uint
            {
                //
                // Standart Section
                //

                AccessSystemSecurity = 0x1000000,   // AccessSystemAcl access type
                MaximumAllowed = 0x2000000,     // MaximumAllowed access type

                Delete = 0x10000,
                ReadControl = 0x20000,
                WriteDAC = 0x40000,
                WriteOwner = 0x80000,
                Synchronize = 0x100000,

                StandardRightsRequired = 0xF0000,
                StandardRightsRead = ReadControl,
                StandardRightsWrite = ReadControl,
                StandardRightsExecute = ReadControl,
                StandardRightsAll = 0x1F0000,
                SpecificRightsAll = 0xFFFF,

                FILE_READ_DATA = 0x0001,        // file & pipe
                FILE_LIST_DIRECTORY = 0x0001,       // directory
                FILE_WRITE_DATA = 0x0002,       // file & pipe
                FILE_ADD_FILE = 0x0002,         // directory
                FILE_APPEND_DATA = 0x0004,      // file
                FILE_ADD_SUBDIRECTORY = 0x0004,     // directory
                FILE_CREATE_PIPE_INSTANCE = 0x0004, // named pipe
                FILE_READ_EA = 0x0008,          // file & directory
                FILE_WRITE_EA = 0x0010,         // file & directory
                FILE_EXECUTE = 0x0020,          // file
                FILE_TRAVERSE = 0x0020,         // directory
                FILE_DELETE_CHILD = 0x0040,     // directory
                FILE_READ_ATTRIBUTES = 0x0080,      // all
                FILE_WRITE_ATTRIBUTES = 0x0100,     // all

                //
                // Generic Section
                //

                GenericRead = 0x80000000,
                GenericWrite = 0x40000000,
                GenericExecute = 0x20000000,
                GenericAll = 0x10000000,

                SPECIFIC_RIGHTS_ALL = 0x00FFFF,
                FILE_ALL_ACCESS =
                StandardRightsRequired |
                Synchronize |
                0x1FF,

                FILE_GENERIC_READ =
                StandardRightsRead |
                FILE_READ_DATA |
                FILE_READ_ATTRIBUTES |
                FILE_READ_EA |
                Synchronize,

                FILE_GENERIC_WRITE =
                StandardRightsWrite |
                FILE_WRITE_DATA |
                FILE_WRITE_ATTRIBUTES |
                FILE_WRITE_EA |
                FILE_APPEND_DATA |
                Synchronize,

                FILE_GENERIC_EXECUTE =
                StandardRightsExecute |
                  FILE_READ_ATTRIBUTES |
                  FILE_EXECUTE |
                  Synchronize
            }
            [Flags]
            public enum EFileShare : uint
            {
                /// <summary>
                ///
                /// </summary>
                None = 0x00000000,
                /// <summary>
                /// Enables subsequent open operations on an object to request read access.
                /// Otherwise, other processes cannot open the object if they request read access.
                /// If this flag is not specified, but the object has been opened for read access, the function fails.
                /// </summary>
                Read = 0x00000001,
                /// <summary>
                /// Enables subsequent open operations on an object to request write access.
                /// Otherwise, other processes cannot open the object if they request write access.
                /// If this flag is not specified, but the object has been opened for write access, the function fails.
                /// </summary>
                Write = 0x00000002,
                /// <summary>
                /// Enables subsequent open operations on an object to request delete access.
                /// Otherwise, other processes cannot open the object if they request delete access.
                /// If this flag is not specified, but the object has been opened for delete access, the function fails.
                /// </summary>
                Delete = 0x00000004
            }
            enum ECreationDisposition : uint
            {
                /// <summary>
                /// Creates a new file. The function fails if a specified file exists.
                /// </summary>
                New = 1,
                /// <summary>
                /// Creates a new file, always.
                /// If a file exists, the function overwrites the file, clears the existing attributes, combines the specified file attributes,
                /// and flags with FILE_ATTRIBUTE_ARCHIVE, but does not set the security descriptor that the SECURITY_ATTRIBUTES structure specifies.
                /// </summary>
                CreateAlways = 2,
                /// <summary>
                /// Opens a file. The function fails if the file does not exist.
                /// </summary>
                OpenExisting = 3,
                /// <summary>
                /// Opens a file, always.
                /// If a file does not exist, the function creates a file as if dwCreationDisposition is CREATE_NEW.
                /// </summary>
                OpenAlways = 4,
                /// <summary>
                /// Opens a file and truncates it so that its size is 0 (zero) bytes. The function fails if the file does not exist.
                /// The calling process must open the file with the GENERIC_WRITE access right.
                /// </summary>
                TruncateExisting = 5
            }
            [Flags]
            enum EFileAttributes : uint
            {
                Readonly = 0x00000001,
                Hidden = 0x00000002,
                System = 0x00000004,
                Directory = 0x00000010,
                Archive = 0x00000020,
                Device = 0x00000040,
                Normal = 0x00000080,
                Temporary = 0x00000100,
                SparseFile = 0x00000200,
                ReparsePoint = 0x00000400,
                Compressed = 0x00000800,
                Offline = 0x00001000,
                NotContentIndexed = 0x00002000,
                Encrypted = 0x00004000,
                Write_Through = 0x80000000,
                Overlapped = 0x40000000,
                NoBuffering = 0x20000000,
                RandomAccess = 0x10000000,
                SequentialScan = 0x08000000,
                DeleteOnClose = 0x04000000,
                BackupSemantics = 0x02000000,
                PosixSemantics = 0x01000000,
                OpenReparsePoint = 0x00200000,
                OpenNoRecall = 0x00100000,
                FirstPipeInstance = 0x00080000
            }
            #endregion

            public static DateTime getFileTime(string sFile)
            {
                DateTime dt = new DateTime();
                IntPtr hFile = CreateFile(sFile,EFileAccess.FILE_GENERIC_READ, EFileShare.Write, IntPtr.Zero,ECreationDisposition.OpenExisting, EFileAttributes.Normal, IntPtr.Zero);
                if (hFile != IntPtr.Zero)
                {
                    FILETIME ftCreation = new FILETIME();
                    FILETIME ftLastAccess=new FILETIME();
                    FILETIME ftLastWrite=new FILETIME();
                    if (GetFileTime(hFile, ref ftCreation, ref ftLastAccess, ref ftLastWrite))
                    {
                        SYSTEMTIME st=new SYSTEMTIME();
                        if (FileTimeToSystemTime(ref ftLastAccess, out st))
                            dt = getDateTime(st);
                    }
                }
                return dt;
            }
            public static bool setLastWrite(string sFile, DateTime dt)
            {
                bool bRet = false;
                IntPtr hFile = CreateFile(sFile,EFileAccess.FILE_GENERIC_READ, EFileShare.Write, IntPtr.Zero,ECreationDisposition.OpenExisting, EFileAttributes.Normal, IntPtr.Zero);
                if (hFile != null)
                {
                    FILETIME ftCreation = new FILETIME();
                    FILETIME ftLastAccess=new FILETIME();
                    FILETIME ftLastWrite=new FILETIME();
                    if (GetFileTime(hFile, ref ftCreation, ref ftLastAccess, ref ftLastWrite))
                    {
                        FILETIME ftNewLastWrite= new FILETIME();
                        ftNewLastWrite=getFileTime(dt);
                        SetFileTime(hFile, ref ftCreation, ref ftLastAccess, ref ftNewLastWrite);
                    }
                }
                return bRet;
            }
        }
    } 
```

# windows - 如何从 C++ 更改 Windows 闪烁光标形状？

> ID：13439717
> 
> 赞同：3
> 
> 时间：2012-11-18T11:33:25.637
> 
> 标签：windows, cursor, blink

如何将窗口闪烁光标形状从默认情况下的垂直（|）更改为水平，就像在 dos（_）中使用的那样。

有什么好的功能可以解决这个问题吗？

操作系统：win7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T00:28:58.037

这实际上称为*插入符号*，而不是*游标*。这可能就是混乱的来源，以及为什么寻找解决方案并没有产生太多的用处。[NullPonyPointer 的评论](https://stackoverflow.com/questions/13439717/how-to-change-windows-blink-cursor-shape-from-c#comment18373963_13439717)也反映了这种常见的混淆。该`SetCursor`功能确实是您想要更改鼠标光标的功能，但无法更改插入符号。

幸运的是，有一整组 Windows 函数可以使用脱字符号：[`CreateCaret`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648399.aspx)、、、、和。还有其他一些用于操纵眨眼时间的方法，但我建议坚持用户的当前设置（这将是默认设置）。[`ShowCaret`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648406.aspx)[`HideCaret`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648403.aspx)[`SetCaretPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648405.aspx)[`DestroyCaret`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648400.aspx)

首先，一点背景。[我强烈建议阅读关于插入符号](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648397.aspx)和[使用插入](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648398.aspx)符号的两篇介绍性 MSDN 文章。但这里有一个简短的总结：插入符号归窗口所有；特别是当前具有焦点的窗口。此窗口可能类似于文本框控件。当窗口获得焦点时，它会创建一个插入符号来使用，然后当它失去焦点时，它会销毁它的插入符号。显然，如果您不手动执行任何操作，您将收到默认实现。

现在，示例代码。因为我喜欢糖果机界面，所以我将它包装在一个函数中：

```
bool CreateCustomCaret(HWND hWnd, int width, int height, int x, int y)
{
    // Create the caret for the control receiving the focus.
    if (!CreateCaret(hWnd,    /* handle to the window that will own the caret */
                     NULL,    /* create a solid caret using specified size    */
                     width,   /* width of caret, in logical units             */
                     height)) /* height of caret, in logical units            */
        return false;

    // Set the position of the caret in the window.
    if (!SetCaretPos(x, y))
        return false;

    // Show the caret. It will begin flashing automatically.
    if (!ShowCaret(hWnd))
        return false;

    return true;
} 
```

然后，为了响应[`WM_SETFOCUS`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646283.aspx),[`EN_SETFOCUS`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761685.aspx)或类似的通知，我会调用该`CreateCustomCaret`函数。为了响应[`WM_KILLFOCUS`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646282.aspx),[`EN_KILLFOCUS`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761682.aspx)或其他类似的通知，我会打电话给`DestroyCaret()`。

或者，`CreateCustomCaret`可以从位图创建插入符号。我可能会提供以下重载：

```
bool CreateCustomCaret(HWND hWnd, HBITMAP hbmp, int x, int y)
{
    // Create the caret for the control receiving the focus.
    if (!CreateCaret(hWnd,   /* handle to the window that will own the caret   */
                     hBmp,   /* create a caret using specified bitmap          */
                     0, 0))  /* width and height parameters ignored for bitmap */
        return false;

    // Set the position of the caret in the window.
    if (!SetCaretPos(x, y))
        return false;

    // Show the caret. It will begin flashing automatically.
    if (!ShowCaret(hWnd))
        return false;

    return true;
} 
```

# python - 如何解释 numpy.correlate 和 numpy.corrcoef 返回的值？

> ID：13439718
> 
> 赞同：38
> 
> 时间：2012-11-18T11:33:26.260
> 
> 标签：python, numpy, scipy, correlation

我有两个一维数组，我想看看它们的相互关系。我应该在 numpy 中使用什么程序？我正在使用`numpy.corrcoef(arrayA, arrayB)`并且`numpy.correlate(arrayA, arrayB)`两者都给出了一些我无法理解或理解的结果。

有人可以阐明如何理解和解释这些数字结果（最好使用示例）？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-18T14:28:17.510

`numpy.correlate`简单地返回两个向量的互相关。

如果您需要了解互相关，请从[http://en.wikipedia.org/wiki/Cross-correlation](http://en.wikipedia.org/wiki/Cross-correlation)开始。

通过查看自相关函数（与自身互相关的向量）可以看到一个很好的例子：

```
import numpy as np

# create a vector
vector = np.random.normal(0,1,size=1000) 

# insert a signal into vector
vector[::50]+=10

# perform cross-correlation for all data points
output = np.correlate(vector,vector,mode='full') 
```

![代码图](../Images/3edb47c6b354f4221d11bc362954603e.png)

当两个数据集重叠时，这将返回一个具有最大值的 comb/shah 函数。由于这是一个自相关，因此两个输入信号之间不会有“滞后”。因此相关性的最大值是vector.size-1。

如果您只想要重叠数据的相关值，您可以使用`mode='valid'`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-17T17:05:54.913

我暂时只能评论`numpy.correlate`。这是一个强大的工具。我将它用于两个目的。首先是在另一个模式中找到一个模式：

```
import numpy as np
import matplotlib.pyplot as plt

some_data = np.random.uniform(0,1,size=100)
subset = some_data[42:50]

mean = np.mean(some_data)
some_data_normalised = some_data - mean
subset_normalised = subset - mean

correlated = np.correlate(some_data_normalised, subset_normalised)
max_index = np.argmax(correlated)  # 42 ! 
```

我使用它的第二个用途（以及如何解释结果）是用于频率检测：

```
hz_a = np.cos(np.linspace(0,np.pi*6,100))
hz_b = np.cos(np.linspace(0,np.pi*4,100))

f, axarr = plt.subplots(2, sharex=True)

axarr[0].plot(hz_a)
axarr[0].plot(hz_b)
axarr[0].grid(True)

hz_a_autocorrelation = np.correlate(hz_a,hz_a,'same')[round(len(hz_a)/2):]
hz_b_autocorrelation = np.correlate(hz_b,hz_b,'same')[round(len(hz_b)/2):]

axarr[1].plot(hz_a_autocorrelation)
axarr[1].plot(hz_b_autocorrelation)
axarr[1].grid(True)

plt.show() 
```

[![三赫兹和两赫兹自相关显示在下方](../Images/4bb2d228275e98c7748e3ab162dbb88f.png)](https://i.stack.imgur.com/GNKri.png)

找到第二个峰的索引。从这里你可以回过头来找到频率。

```
first_min_index = np.argmin(hz_a_autocorrelation)
second_max_index = np.argmax(hz_a_autocorrelation[first_min_index:])
frequency = 1/second_max_index 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-03-28T18:58:03.220

在阅读了所有教科书的定义和公式之后，对于初学者来说，看看如何从另一个推导出来可能会很有用。首先关注两个向量之间仅成对相关的简单情况。

```
import numpy as np

arrayA = [ .1, .2, .4 ]
arrayB = [ .3, .1, .3 ]

np.corrcoef( arrayA, arrayB )[0,1] #see Homework bellow why we are using just one cell
>>> 0.18898223650461365

def my_corrcoef( x, y ):    
    mean_x = np.mean( x )
    mean_y = np.mean( y )
    std_x  = np.std ( x )
    std_y  = np.std ( y )
    n      = len    ( x )
    return np.correlate( x - mean_x, y - mean_y, mode = 'valid' )[0] / n / ( std_x * std_y )

my_corrcoef( arrayA, arrayB )
>>> 0.1889822365046136 
```

**作业**：

*   将示例扩展到两个以上的向量，这就是 corrcoef 返回矩阵的原因。
*   查看 np.correlate 对不同于“有效”的模式的作用
*   看看`scipy.stats.pearsonr`over (arrayA, arrayB)

另一个提示：请注意，在此输入上处于“有效”模式的 np.correlate 只是一个点积（与上面 my_corrcoef 的最后一行比较）：

```
def my_corrcoef1( x, y ):    
    mean_x = np.mean( x )
    mean_y = np.mean( y )
    std_x  = np.std ( x )
    std_y  = np.std ( y )
    n      = len    ( x )
    return (( x - mean_x ) * ( y - mean_y )).sum() / n / ( std_x * std_y )

my_corrcoef1( arrayA, arrayB )
>>> 0.1889822365046136 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-18T13:49:17.687

如果您对**int**向量的结果感到困惑，则可能是由于**溢出**：

```
>>> a = np.array([4,3,2,0,0,10000,0,0], dtype='int16')
>>> np.correlate(a,a[:3], mode='valid')
array([    29,     18,      8,  20000,  30000, -25536], dtype=int16) 
```

怎么会？

```
29 = 4*4 + 3*3 + 2*2
18 = 4*3 + 3*2 + 2*0
 8 = 4*2 + 3*0 + 2*0
...
40000 = 4*10000 + 3*0 + 2*0 shows up as 40000 - 2**16 = -25536 
```

# http - URI 中 (./) 的含义？

> ID：13439725
> 
> 赞同：4
> 
> 时间：2012-11-18T11:34:16.363
> 
> 标签：http, url, uri

[在这里](https://stackoverflow.com/a/4071178/859154)阅读并查看示例后

给定 uri 的例子：

```
 http://a/b/c/d;p?q 
```

重定向到`"g"`会将我重定向到 `http://a/b/c/g`（因为 c 是目录）

所以我问自己什么时候应该使用`./g`

它实际上是相同的[转到当前文件夹并找到`g`]

那么为什么这种语法甚至存在？`./`我应该什么时候使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:42:51.963

通用 URI 语法由称为方案、权限、路径、查询和片段的组件的分层序列组成。

```
 URI         = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

  hier-part   = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty 
```

方案和路径组件是必需的，但路径可能为空（无字符）。存在权限时，路径必须为空或以斜杠 ("/") 字符开头。当权限不存在时，路径不能以两个斜杠字符（“//”）开头。这些限制导致路径有五个不同的 ABNF 规则（第 3.3 节），其中只有一个会匹配任何给定的 URI 引用。

```
 The following are two example URIs and their component parts:

         foo://example.com:8042/over/there?name=ferret#nose
         \_/   \______________/\_________/ \_________/ \__/
          |           |            |            |        |
       scheme     authority       path        query   fragment
          |   _____________________|__
         / \ /                        \
         urn:example:animal:ferret:nose 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T11:43:13.030

我会这样说：

这个构造存在（或被创建/定义）没有特殊原因。它之所以存在，是因为它是其他结构（`.`、`/`、`/g`）的逻辑组合，这些结构是必需的，因此是出于其他原因而定义的。由于这些结构（此处的路径组件）可以或多或少地组合而不受限制，因此有问题`./g`的结构是明确定义的，因此是有效的。但这并不意味着必须有特殊的理由来解释为什么要定义或必须定义这个构造。

# sql - Access 2010 使用 SQL 将 2 列合并为第 3 列

> ID：13439732
> 
> 赞同：0
> 
> 时间：2012-11-18T11:35:47.260
> 
> 标签：sql, rdbms, ms-access-2010

我有一个包含两列的 Access 2010 表；纬度和经度。我想创建一个名为 loc 的第三列，它将两个值合并为一个，并用逗号分隔它们（纬度，经度）。

我已经到了这一步，这使得选择查询：

```
SELECT ([latitude] & ", " & [longitude]) AS loc
FROM AllCountries; 
```

这将显示预期的结果。但是，我无法将此信息复制到第三列。我尝试像这样附加它，但我得到所有记录的键值错误：

```
INSERT INTO AllCountries ( loc )
SELECT ([latitude] & ", " & [longitude]) AS loc
FROM AllCountries; 
```

任何想法如何做到这一点？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:38:17.747

试试这个（我假设列 loc 已经创建了没有值）：

```
UPDATE AllCountries
SET [loc] = [latitude] & ", " & [longitude] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:07:27.250

您的第三列应该是 varchar 或字符串等效的，您可以将列转换为合并

参考： [https ://stackoverflow.com/a/9126375/1805210](https://stackoverflow.com/a/9126375/1805210)

# iphone - 在应用程序支持中找不到 iPhone 模拟器

> ID：13439742
> 
> 赞同：0
> 
> 时间：2012-11-18T11:37:48.477
> 
> 标签：iphone, xcode

我想将照片添加到我的 iPhone 6.0 模拟器，但在应用程序支持中找不到该文件夹​​。也不是 iPad 模拟器。它可以在其他地方还是我必须下载一些东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:10:54.133

试试这个

finder -> go -> go to folder -> 粘贴以下内容：

```
~/Library/Application Support/iPhone Simulator/6.0/Media/DCIM/100APPLE/ 
```

你可以把你的照片放在这里。

:)

# php - 仅在需要时更新自定义 wordpress 元字段的日期

> ID：13439745
> 
> 赞同：0
> 
> 时间：2012-11-18T11:38:00.620
> 
> 标签：php, wordpress, function, action, hook

在 save_post 上，如果此 meta_key 不存在，我想在帖子中添加到期日期（现在 + 30 天），否则什么也不做。
我在我的function.php中尝试了这段代码：

```
add_action( 'save_post', 'update_date' );
  function update_date( $post_id ) { 
  $expire = date( 'm/d/Y H:i:s', strtotime( '+' . '30' . ' days' ) );
  $meta_exist = get_post_meta($post_id, 'expire_date', true);
  if ($meta_exist == ''){
    add_post_meta( $post_id, 'expire_date', $expire, true );
  }
} 
```

但我注意到，这样它总是更新日期，如果它已经定义了。

如何仅在需要时添加日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:26:17.847

验证帖子不是修订版，我稍微更改了您的代码：

```
add_action( 'save_post', 'update_date' );
function update_date( $post_id ) {
  if (!wp_is_post_revision($post_id)) {
    $expire = date( 'm/d/Y H:i:s', strtotime( '+' . '30' . ' days' ) );
    $meta_exist = get_post_meta($post_id, 'expire_date', true);
    if (!$meta_exist){
      add_post_meta( $post_id, 'expire_date', $expire, true );
    }
  }
} 
```

# java - 想将 startwith( ) 方法用作 !startwith( ) 吗？

> ID：13439749
> 
> 赞同：1
> 
> 时间：2012-11-18T11:38:33.443
> 
> 标签：java, string

我正在尝试从如下所示的文本文件中读取字符串：

```
 # hello my name is captain
1111 $3340 4
1211 $9182 5
1211 $9192 9 
```

```
if(!line.startsWith("#")) {
    System.out.println(line);
} 
```

这会打印出除以下内容之外的所有内容`#`：

```
 hello my name is captain
1111 $3340 4
1211 $9182 5
1211 $9192 9 
```

我找不到任何使用该`!`符号的示例，也无法说出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:46:48.633

尝试这个。您的代码中的错误在注释前包含一个空格。所以检查修剪它。

```
BufferedReader reader = new BufferedReader(new FileReader(new File("path-to-file")));

String line;

while ((line = reader.readLine()) != null){
    if (!line.trim().startsWith("#")){
        System.out.println(line);
    }
} 
```

# image - OpenCV，如何在不重新初始化窗口的情况下显示一系列图像

> ID：13439750
> 
> 赞同：2
> 
> 时间：2012-11-18T11:38:34.930
> 
> 标签：image, opencv, window

我目前正在研究医学图像的分割工具。它基本上是在算法的每次迭代中演变的轮廓。

我想要做的是每 20 次迭代在图像上显示轮廓。目前我正在通过创建一个窗口、使用该`cvDrawContour`函数并使用`imshow`. 20 次迭代后，我销毁窗口并再次执行这些步骤。

有没有办法创建一个不会被破坏的窗口，并且您可以在其中更改它显示的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T14:57:06.743

绝对地。只是不要每次都破坏你的窗户。您的图像存储在一些`cv::Mat mat`，只需`cv::imshow("My Window", mat);`每次使用，无需销毁它。

# ios - 自定义播放列表保存/检索

> ID：13439751
> 
> 赞同：1
> 
> 时间：2012-11-18T11:38:49.927
> 
> 标签：ios

我有一个应用程序，允许用户构建一个简单的播放列表，该列表存储为 s 数组 `MPMediaItem`。当应用程序退出或进入后台时，我想将播放列表存储在一个文件中，并在用户再次打开应用程序时检索它。

我应该只在文件中保存一个 id 而不是整个`MPMediaItem`对象吗？

此外，由于用户的库可能已更改，我将如何将保存的列表与 iPod 库进行比较，我是否循环并运行一堆查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:45:07.407

将此数组保存到 plist 文件中，这是一种从本地文件保存和读取的有效方法。下面是从 plist 创建、保存、读取数据的方法。希望对您有所帮助。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
NSString *doc = [paths    objectAtIndex:0]; //path of document folder
NSString *path = [doc stringByAppendingPathComponent:@"nameOfPlist.plist"];   //get the path of your plist in document folder.

NSDictionary* dic = [NSDictionary dictionaryWithObjectsAndKeys:@"123456",@"number", nil]; //save your data into a dictionary or array.
[dic writeToFile:path atomically:YES];  //then write the dic/array into the plist file.

NSDictionary* dic2 = [NSDictionary dictionaryWithContentsOfFile:path];  //read data from plist.
NSLog(@"dic2 is:%@",[dic2 objectForKey:@"number"]); 
```

# php - !$a 和 $a 之间的 php 区别 === false

> ID：13439757
> 
> 赞同：0
> 
> 时间：2012-11-18T11:39:27.353
> 
> 标签：php, booleanquery

> **可能重复：**
> [是 !$page == false 还是 $page 在 php 中？](https://stackoverflow.com/questions/4705196/is-page-false-or-page-in-php)

这两种支票有什么区别？哪种类型检查称为失败并返回 false 的函数或方法的正确方法？

```
if (!is_dir($path)) {...} 
```

或者

```
if (is_dir($path) === false) {...} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:44:21.153

```
(!is_dir($path)){...} 
```

IF is_dir($path)**等于**false。

```
(is_dir($path) === false){...} 
```

IF is_dir($path) 的**IDENTIFCAL**为 false。这在 is_dir($path) 的结果必须是布尔 FALSE 值的意义上更**明确。**没有其他事情会做。

运行此示例：

```
<?php

$var = 0;

if($var == false){
    echo 'Var is EQUAL to FALSE.';
}

if($var === false){
    echo 'Var is IDENTICAL to FALSE.';
}

?> 
```

[在此处](http://www.php.net/manual/en/language.operators.comparison.php)阅读比较运算符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:43:04.197

如果 $a 设置为 0，或者 $a 未设置，则 !$a 将为真。三等号严格检查是否为假，而不仅仅是空值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:44:06.810

运算符`===`是“同值同类型”比较。所以只有当已经是一个等于假的类型`$foo === false`时才为真，而将根据类型执行不同的操作（例如，如果是对象或资源，那么它会检查它是否为空值。如果它是一个字符串，那么它检查 null （我也认为是一个空字符串，但我不确定）。如果它是一个整数，那么它会检查它是否为零。基本上它在添加 bool 类型之前类似于 C 的运算符（其中 boolean价值观确实是价值观）。`$foo``bool``!$foo``$foo``$foo``!``int`

在您的代码中，这两个示例都是“正确的”，尽管第一个示例使用`!`运算符是最简洁的，应该是首选。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-18T11:59:25.357

我认为通过给出一些示例会更容易理解（您需要在命令提示符/终端中执行php命令）！不是逻辑运算符，它由 php 文档定义为“！如果 $a 不为 TRUE，则 $a 的结果为 TRUE。”

```
php -r "$a=NULL; $b = !$a; var_dump($b);" 
```

> 返回布尔（真）

```
php -r "$a=''; $b = !$a; var_dump($b);" 
```

> 返回布尔（真）

```
php -r "$a=array(); $b = !$a; var_dump($b);" 
```

> 返回布尔（真）

```
php -r "$a=false; $b = !$a; var_dump($b);" 
```

> 返回布尔（真）

```
php -r "$a=0; $b = !$a; var_dump($b);" 
```

> 返回布尔（真）

```
php -r "$a=0.0; $b = !$a; var_dump($b);" 
```

> 返回布尔（真）

`php -r "$a='0'; $b = !$a; var_dump($b);"`

> 返回布尔（真）

虽然 $a === false 只有当 $a 是实际的布尔值并且它的值为 false 时才会为真（所有其他先前的例子都将是错误的 ! 运算符）

```
php -r "$a=false; $b = $a === false; var_dump($b);" 
```

> 返回布尔（真）

在您的示例中，只需使用 not 运算符！因为您不需要检查 is_dir 结果的类型。

# jquery - 移动 Web 应用程序的快速按钮

> ID：13439762
> 
> 赞同：5
> 
> 时间：2012-11-18T11:39:52.867
> 
> 标签：jquery, performance, click, mobile-application

我构建了一个 WepApp，我喜欢使用来自 Google 的这段代码来消除触摸设备上 300 毫秒的延迟

**文档**
[http://developers.google.com/mobile/articles/fast_buttons](http://developers.google.com/mobile/articles/fast_buttons)

我不确定，我在我的 HTC one X 上看不出这两个版本有什么区别。

**演示 1（正常）**
[http://jsbin.com/awejal/4/edit](http://jsbin.com/awejal/4/edit)

**演示 2（带有 fastclick 修复）**
[http://jsbin.com/awejal/5/edit](http://jsbin.com/awejal/5/edit)

我在控制台中得到（在演示 2 中）额外的错误，`TypeError: element is null` 但为什么呢？我不明白。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T21:40:42.160

几乎可以肯定，问题出在您的打字机上。像这样的 TypeError 意味着您试图在空对象上调用方法。你需要找出为什么你会得到那个打字错误，然后修复它。如果没有 DOM 和 jQuery 之间的正确链接，谷歌提供的代码将无济于事。

我认为导致您出现问题的线路是

```
new FastButton(document.getElementById("fastclick"), goSomewhere); 
```

因为我没有看到任何带有 id 的元素`fastclick`。

尝试修复它，让我知道它是如何工作的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T12:12:21.403

您确定您检测元素是否被切换的方法是正确的吗？它看起来像两者`#onclick`并`#onclickJQ`共享一个公共变量来检测它们应该处于哪个状态：`bt = 0;`. 因此，如果您尝试一个接一个地按下，第二次点击事件将没有可见的变化。为了解决这个问题，使用属性来存储关于切换状态的数据......

JS：

```
function blub(selector) {
    if ($(selector).attr("attr-bt") == "0") {
        $(selector).attr("attr-bt", "1");
        $(selector).css('background-color', '#aa0000');
    }
    else {
        $(selector).attr("attr-bt", "0");
        $(selector).css('background-color', '#333333');
    }
}
$(document).ready(function() {
    $('#onclickJQ').attr("attr-bt", "0");
    $('#onclick').attr("attr-bt", "0");
}); 
```

回答您的问题，要消除延迟，只需使用[jQueryMobile](http://jquerymobile.com/)和库提供的[点击事件](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)：

```
$(document).ready(function() {
    $('#onclickJQ').live("tap", function() {
        blub('#onclickJQ');
    });
});​ 
```

但是，必须修改第一个演示按钮 [带有内联 onclick 事件] 以专门使用点击事件：

```
$(document).ready(function() {
    $('#onclick').live("tap", function() {
        blub('#onclick');
    });
});​ 
```

演示： http: [//fiddle.jshell.net/jnY2n/4/show/](http://fiddle.jshell.net/jnY2n/4/show/)

在 iPhone 4S 上测试；第一个 div 在重复点击时会“滞后”，而第二个 div 运行平稳。

# php - 如何使用 echo 命令在表格中应用 bgcolor

> ID：13439765
> 
> 赞同：1
> 
> 时间：2012-11-18T11:40:36.463
> 
> 标签：php, html

我想将背景颜色应用于表格。我已经使用 echo 命令编写了表格，但是对如何应用 bgcolor 感到困惑，任何人都可以指导我..

```
print("<table align='center' width='50%' border=1> ");
echo "<TR><TD> Sr.No </td>";
echo "<td  width=\"16%\" bgcolor=\"#CCCCCC\"> delete</td>";
echo "<Td> File Name </td> ";
echo "<td> Share It </td>";
echo "</tr></table>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T11:42:20.527

```
echo '<tr><td> Sr.No</td>';
echo '<td width="16%" bgcolor="' . $colorVariable .  '"> delete</td>';
echo '<td> File Name </td>';
echo '<td> Share It</td></tr>'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T11:42:27.030

“”正在碰撞。您需要转义字符，如下所示。

```
echo"<td  width=\"16%\" bgcolor=\"#CCCCCC\"> delete</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:48:18.253

尝试

```
echo '<td  width="16%" bgcolor="#CCCCCC"> delete</td>'; 
```

**PHP双引号和单引号**

```
$some="Oh god";

echo "My answer is $some ";

//result is: My answer is Oh god 
```

在上面，使用双引号，变量 $someis 在引号内计算，结果不是预期的：变量被计算为 Oh God。即使用双引号括起来，也会计算变量，而不是函数或常量。

```
echo 'My answer is $some';

//result is: My answer is $some. 
```

如上所述，当使用单引号时，变量不会被计算，而是在屏幕上按字面意思打印为 $some。

* * *

**好读**

[**php中的单引号与双引号是否有性能优势？**](https://stackoverflow.com/questions/482202/is-there-a-performance-benefit-single-quote-vs-double-quote-in-php)

# java - 如何为 Maven 站点生成 Google 站点地图？

> ID：13439771
> 
> 赞同：4
> 
> 时间：2012-11-18T11:41:51.223
> 
> 标签：java, maven, maven-site-plugin, xml-sitemap

是否可以通过[maven-site-plugin](http://maven.apache.org/plugins/maven-site-plugin/)生成[Google Sitemap](http://en.wikipedia.org/wiki/Google_Sitemaps)？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-01T13:41:59.853

如果您仍然需要，可以尝试我的 sitemapxml 插件。

要测试，请运行：

```
mvn site com.github.s4u.plugins:sitemapxml-maven-plugin:gen 
```

运行后，您的站点目录中将有 sitemap.xml。

接下来，您可以将此插件添加到您的项目中：

```
<project>
...
    <build>
    ...
       <plugins>
           <plugin>
               <groupId>com.github.s4u.plugins</groupId>
               <artifactId>sitemapxml-maven-plugin</artifactId>
               <version>1.0.0</version>
               <executions>
                   <execution>
                       <goals>
                           <goal>gen</goal>
                       </goals>
                   </execution>
               </executions>
           </plugin>
       </plugins>
    ...
    </build>
...
</project> 
```

插件将使用标准命令运行：

```
mvn site 
```

您可以在网站上找到有关插件的更多信息：http: [//s4u.github.io/sitemapxml-maven-plugin/](http://s4u.github.io/sitemapxml-maven-plugin/)

# stream - 从远程服务器设置音频流

> ID：13439773
> 
> 赞同：2
> 
> 时间：2012-11-18T11:42:04.863
> 
> 标签：stream, radio

我有一个非常笼统的问题。不幸的是，我根本无法在网上找到任何提示。似乎有很多关于如何在家中设置无线电流的信息，但不是来自远程服务器。

我有一个设置了适当托管的网页。理想情况下，我想做的是在那里上传音频文件并组织一个广播流。另外，我打算写一些脚本来拥有流模式，那就是一些定制的调度......

我需要哪些工具来做到这一点？首先，只有一个 .txt 文件，其中包含要播放的文件顺序，其次，如果可能的话，最好是自定义顺序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T01:13:08.473

记录了很多选项来实现这一点，可以通过谷歌找到。例如：

[http://nunzioweb.com/streaming_audio-example.htm](http://nunzioweb.com/streaming_audio-example.htm)

[http://www.selfseo.com/story-13698.php](http://www.selfseo.com/story-13698.php)

[http://www.iradeo.com/](http://www.iradeo.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-28T00:18:51.390

如果您的远程服务器上有 sshd，您还可以通过 ssh 手动流式传输文件，如下所示：

```
ssh user@192.168.2.101 "cat music.mp3" | mplayer - 
```

我发现这比 3rd 方流媒体软件更容易在脚本中使用。

编辑：如果你有一个带有 mp3 文件的文本文件可以播放，你可以这样做：

```
ssh user@192.168.2.101 'cat <path to text playlist> | while read file; do cat $file; done' | mplayer - 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-27T21:10:34.353

看看： http: [//www.icecast.org/](http://www.icecast.org/)

您可以创建 .m3u 格式的播放列表，并使用 icecast 作为 mp3 流来传输音频。

这里有一堆使用 icecast 的示例广播电台：http: [//dir.xiph.org/index.php](http://dir.xiph.org/index.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T22:34:15.577

您还可以查看基于 Flash 的 RTMP 音频流 - 例如，last.fm 和 youtube 使用它。尽管您无法在通常的虚拟主机上为其设置流媒体服务器，但对于任何大型流媒体服务都可以这样说——它们中的任何一个都具有可扩展的架构，包括多个服务器、负载平衡等。您至少需要VPS 来测试这种流媒体。在 RTMP 服务器中 - 有几个免费的，您可以使用： [http](http://www.flashrealtime.com/list-of-available-rtmp-servers/) : //www.flashrealtime.com/list-of-available-rtmp-servers/ 另一个值得注意的例子 - 是 HTML5 流媒体，其中一个播放器： [http ://www.projekktor.com/](http://www.projekktor.com/)

# ios5 - UIButton ImageView在iCarousel中占用更多空间并且不响应触摸事件

> ID：13439783
> 
> 赞同：1
> 
> 时间：2012-11-18T11:43:03.360
> 
> 标签：ios5, uiimageview, uibutton, icarousel

我是初学者，尝试使用**iCarousel**制作菜单。到目前为止，我尝试的是为轮播中的每个视图返回一个带有自定义图像的 UIButton。图像列表已声明与示例中的说明相同。我面临的问题是：

1.  按钮（在轮播中返回视图） - 它的图像没有正确调整，如图所示。

2.  您还可以看到，当我显示熊时，它正在挑选老虎的描述！

3.  当我点击任何图片时，它只是向前滚动而不是对按钮按下事件做出反应。

![](../Images/4cce9a7407315e9ec0d14f5d18260c5e.png)

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {

    //set up carousel data
    wrap = YES;

    self.menuItems = [NSMutableArray arrayWithObjects:@"Bear.png",
                    @"Zebra.png",
                    @"Tiger.png",
                    @"Goat.png",
                    @"Birds.png",
                    @"Giraffe.png",
                    nil];

    self.descriptions = [NSMutableArray arrayWithObjects:@"Bears Eat: Honey",
                         @"Zebras Eat: Grass",
                         @"Tigers Eat: Meat",
                         @"Goats Eat: Weeds",
                         @"Birds Eat: Seeds",
                         @"Giraffes Eat: Trees",
                         nil];
}

return self;
}

- (void)buttonTapped:(UIButton *)sender
{
NSInteger index = [aCarousel indexOfItemViewOrSubview:sender];

switch (index) {
    case 0:
    NSLog(@"at index: %d",index);
        break;

    case 1:
    NSLog(@"at index: %d",index);
      break;   

    case 2:
        NSLog(@"at index: %d",index);
        break;  
    case 3:
        NSLog(@"at index: %d",index);
        break;  
    case 4:
        NSLog(@"at index: %d",index);
        break; 
    case 5:
        NSLog(@"at index: %d",index);
        break;  
    }  }

- (void)viewDidLoad
{
aCarousel.type = iCarouselTypeInvertedRotary;
aCarousel.delegate = self;
aCarousel.dataSource = self;
//aCarousel.frame = CGRectMake(0, 68, 320, 257);

[super viewDidLoad];
}

#pragma - mark iCarousel Delegate

- (NSUInteger)numberOfItemsInCarousel:(iCarousel *)carousel 
{
    return [self.menuItems count];
}

- (NSUInteger)numberOfVisibleItemsInCarousel:(iCarousel *)carousel
{
    // limit the number of item views loaded concurrently (for performance)
    return 4;
}

- (UIView*)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.bounds = CGRectMake(0, 0, 240.0f, 200.0f);

    [button setImage:[UIImage imageNamed:[menuItems objectAtIndex:index]] forState:UIControlStateNormal];    
    [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchDown];
    button.imageView.contentMode = UIViewContentModeScaleAspectFit;
    button.contentHorizontalAlignment = UIControlContentHorizontalAlignmentFill;
    //button.contentVerticalAlignment = UIControlContentVerticalAlignmentFill;  

     return button;
}

- (NSUInteger)numberOfPlaceholdersInCarousel:(iCarousel *)carousel
{
    return 0;
}

- (CGFloat)carouselItemWidth:(iCarousel *)carousel
{
    // usually this should be slightly wider than the item views
    return 240; //for 220 px image
}

- (BOOL)carouselShouldWrap:(iCarousel *)carousel
{
    return self.wrap;
}

- (void)carouselDidScroll:(iCarousel *)carousel
{
    [label setText:[NSString stringWithFormat:@"%@", [descriptions objectAtIndex:carousel.currentItemIndex]]];
} 
```

我真的厌倦了尝试调整轮播数小时。虽然我尝试了aspectfitratio，调整框架但不知道为什么输出错误。可以请有人弄清楚我在哪里做错了吗？非常感谢 ：（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T18:41:35.747

Atlast 我能够自己解决问题。不知道为什么我的项目表现得如此奇怪，所以我决定在新项目中使用 iCarousel。我注意到的错误如下：

1.  在 nib 文件中，当我将类类型设置为 iCarousel 用于子视图时，它在*对象列表中显示类似***“I Carousel”**的内容- 我将列表中的名称手动更改为我的*IBOutlet iCarousel 对象*为“aCarousel”。

***   其次，我没有在`-(UIView*)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view`方法中正确地将 UIButton 分配给 UIView 。我很高兴在示例文件夹中找到**“按钮演示” 。**从那里我复制了我的代码，现在一切都很棒！:)** 

 **在这里复制代码给任何想看的人：

```
- (UIView*)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index reusingView:(UIView *)view
{
    UIButton *button = (UIButton *)view;
    if (button == nil)
    {
        //no button available to recycle, so create new one
        UIImage *image = [UIImage imageNamed:[menuItems objectAtIndex:index]];
        button = [UIButton buttonWithType:UIButtonTypeCustom];
        button.frame = CGRectMake(0.0f, 0.0f, image.size.width, image.size.height);
        //[button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
        [button setBackgroundImage:image forState:UIControlStateNormal];
        //button.titleLabel.font = [button.titleLabel.font fontWithSize:50];
        [button addTarget:self action:@selector(buttonTapped:) forControlEvents:UIControlEventTouchDown];
    }

    //set button label
    //[button setTitle:[NSString stringWithFormat:@"%i", index] forState:UIControlStateNormal];
    //Use these commented lines if you are displaying some text on button
    return button;
} 
```**

# neo4j - 使用 gremlin 的 neo4j 图形文本搜索

> ID：13439784
> 
> 赞同：1
> 
> 时间：2012-11-18T11:43:07.050
> 
> 标签：neo4j, gremlin

如何使用 gremlin 在 neo4j 中进行文本搜索？我想搜索所有节点类型和所有节点属性。我阅读了 gremlin 文档，但无法找到我的问题的答案。

我将 API 与 node 和 express 一起使用。

```
g.V.filter{it.*=="a*"} 
```

我需要安装另一个系统来为我进行文本搜索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T22:14:52.363

为了速度，做 filter{it.getProperty('gender').matches...}

对于不使用顶点线性扫描的全文搜索，请确保创建关于性别的全文索引。有关更多信息，请参阅 Neo4jGraph 上的蓝图文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:52:18.990

```
g.V.filter{it.gender.matches('mal.*')} 
```

# css - 如何将 CSS 应用于仅具有活动类的锚（仅限父级）而不包括子级？

> ID：13439786
> 
> 赞同：0
> 
> 时间：2012-11-18T11:43:33.103
> 
> 标签：css

**已解决 谢谢！**

我需要将 css 应用于当前活动菜单（父列表 li 项），这是我的代码：

```
#supermenu li.current-menu-item a, #supermenu li.current-menu-item a:hover {
      font-weight: bold;
      color: #fff;
      background-color: #ea6ea0;
      border-right: 1px solid #ea6ea0;
      box-shadow:inset 0 -1px 2px #bf1358;
} 
```

覆盖看起来像一个漫长而混乱的过程的孩子的链接，有什么干净的方法可以排除孩子的链接吗？

但是 css 被应用于子链接/锚点，因为它与下拉菜单结合使用，我怎样才能阻止子链接具有相同的 css？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:49:00.780

如果我理解正确，请尝试以下操作：

```
#supermenu li.current-menu-item > a,
#supermenu li.current-menu-item > a:hover {
      font-weight: bold;
      color: #fff;
      background-color: #ea6ea0;
      border-right: 1px solid #ea6ea0;
      box-shadow:inset 0 -1px 2px #bf1358;
} 
```

你可以看看这篇[文章](http://css-tricks.com/child-and-sibling-selectors/)来了解`>` *[孩子组合](http://www.w3.org/TR/css3-selectors/#child-combinators)*器。

请注意，它不适用于**IE6**或更低版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:49:20.310

尝试使用`>`运算符，它只会匹配直接后代。

这应该有效：

```
#supermenu li.current-menu-item > a, 
#supermenu li.current-menu-item > a:hover {
  font-weight: bold;
  color: #fff;
  background-color: #ea6ea0;
  border-right: 1px solid #ea6ea0;
  box-shadow:inset 0 -1px 2px #bf1358;
} 
```

请注意，IE7 和更早版本不支持它。

# sqlite - 如何清理 sqlite3 列中的数据

> ID：13439795
> 
> 赞同：0
> 
> 时间：2012-11-18T11:44:43.413
> 
> 标签：sqlite, sanitize

我有一个 sqlite3 表，其中有一列名为 Title，它存储了一些电影的名称。

```
Table name - table1
Column name - Title
Examples data: "Casablanca" (1983) {The Cashier and the Belly Dancer (#1.4)} 
```

我有另一个 sqlite3 表，其中有一列存储电影标题。

```
Table name - table2
Column name - Title
Examples data: casa blanca 
```

这两个表都是使用不同的数据集创建的，因此尽管电影名称相同（`casa blanca`vs `"Casablanca" (1983) {The Cashier and the Belly Dancer (#1.4)}`），但都存储有额外的文本。

我想做的是清理两列中已经存储的数据。通过清理，我想去除单元格内容：1.空格2.spl字符，如！，'，“，逗号等。3.全部转换为小写

我希望至少可以在两列之间进行某种程度的匹配。

我的问题是，我如何对已经存储在 sqlite 表中的数据执行这些清理。我没有在加载前进行清理的选项，因为我只能访问加载的数据库。

我正在使用 sqlite 3.7.13，并且我正在使用 sqlite manager 作为 gui。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T14:22:25.567

此任务过于专业，无法仅在 SQL 中完成。

您应该编写简单的 Perl 或 Python 脚本来扫描您的表，逐行读取数据，将其擦洗以满足您的要求并将其写回。

这是 Perl 中的示例：

```
use DBI;
my $dbh = DBI->connect("dbi:mysql:database=my.db");
# replace rowid with your primary key, but it should work as is:
my $sth = $dbh->prepare(qq{
    SELECT rowid,*
    FROM table1
});
while (my $row = $sth->fetchrow_hashref()) {
    my $rowid = $row->{rowid};
    my $title = $row->{title};
    # sanitize title:
    $title = lc($title); # convert to lowercase
    $title =~ s/,//g;    # remove commas
    # do more sanitization as you wish
    # ...
    # write it back to database:
    $dbh->do(
         qq{
             UPDATE table1
             SET title = ?
             WHERE rowid = ?
         }, undef,
         $title,
         $rowid,
    );
}
$sth->finish();
$dbh->disconnect(); 
```

# ios - Apple 指南，关于网络通信、加密数据

> ID：13439796
> 
> 赞同：1
> 
> 时间：2012-11-18T11:44:46.190
> 
> 标签：ios, xcode, web-services, web-applications

我将需要在我的应用程序和服务器之间加密消息。我正在浏览苹果的文档以查找有关该问题的信息。（基本上我需要加密通信进行的方式，以便没有其他应用程序可以模仿并使用我的服务器）有谁知道这是否会给 Apple 带来问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:48:48.720

没有苹果对此没有问题，但是....

如果您使用强加密，则必须获得许可证，请查看此[站点](http://www.bis.doc.gov/encryption/encfaqs6_17_02.html)以获取更多详细信息。他们在获得许可证时提供的文件，您必须在发布应用程序时上传到苹果。

我还发现了这个指向[这个博客的](http://tigelane.blogspot.co.il/2011/01/apple-itunes-export-restrictions-on.html)[SO](https://stackoverflow.com/questions/2128927/using-ssl-in-an-iphone-app-export-compliance) ，它详细说明了如何获得许可。

# objective-c - 捏时更改字体大小 UITextField

> ID：13439797
> 
> 赞同：1
> 
> 时间：2012-11-18T11:44:58.687
> 
> 标签：objective-c, ipad, ios6, uitextfield

我正在为 iPad 开发一个 iOS6 应用程序。用户可以添加文本字段，对其进行编辑、移动和旋转。我希望当用户捏住该字段时，它会变大。我已经尝试过了，但是文本被像素化了，因为字体大小没有改变。如何检测实际字体大小以增加它？这是我的实际代码：

```
- (void)pinchDetected:(UIPinchGestureRecognizer*) pinchRecognizer {
    CGFloat scale = pinchRecognizer.scale;   
    self.transform = CGAffineTransformScale(self.transform, scale, scale);   
    pinchRecognizer.scale = 1.0;    
} 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T12:05:24.360

为什么不试试这个？

```
CGFloat currentFontSize = self.font.pointSize;
CGFloat newFontSize = currentFontSize * scale; //or anything you wish    
self.font = [self.font fontWithSize:newFontSize]; 
```

# html - 属性状态：已弃用或已过时？

> ID：13439800
> 
> 赞同：8
> 
> 时间：2012-11-18T11:45:36.523
> 
> 标签：html, deprecated, obsolete

我是 HTML 5 的新手，我在*不同*的W3 HTML 标准化文档中找到了一些问题来获取属性的状态。

例如，从 HTML 4.01 起，不应再使用元素的`bgcolor`属性。`<body>`它已被弃用。（见：[http](http://www.w3.org/TR/html4/present/graphics.html#h-15.1.1) ://www.w3.org/TR/html4/present/graphics.html#h-15.1.1 ）。

但是它在 HTML 5 中的状态是什么？在 HTML 标记规范中，该属性被标记为过时（参见：[http](http://www.w3.org/TR/html-markup/body.html) ://www.w3.org/TR/html-markup/body.html ）。

这是否意味着本书中的属性不再存在于 HTML 5 中？

考虑编写符合标准的客户端，我应该与文档中的哪个参考相关，以便对属性进行精确和定义的处理？只是因为它已经过时而放弃它？把它留在那里，否则对它充耳不闻（有一个属性节点但它没有意义）？

标准化文件中记录在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:36:45.727

如果您询问用户代理应该做什么，对于`<body>`元素上的 bgcolor 情况，这是在[Rendering Section](http://dev.w3.org/html5/spec/rendering.html)中为 HTML5 定义的，它说：

> 当 body 元素设置了 bgcolor 属性时，新值应使用解析旧颜色值的规则进行解析，如果不返回错误，则用户代理应将该属性视为表示提示将元素的“背景颜色”属性设置为结果颜色。

# entity-framework - EF5 中具有多个 DbContext 实例的更改通知 - 是否记录在案，在哪里？

> ID：13439804
> 
> 赞同：2
> 
> 时间：2012-11-18T11:46:02.967
> 
> 标签：entity-framework, entity-framework-5, dbcontext, change-tracking

我正在开发一个使用 EF5 作为 ORM 的应用程序。

在开始之前，我需要创建测试以确认 EF5 中的所有内容都正常工作。我测试的一件事是对 UnitOfWork 的支持。我通过创建多个 DbContext 实例来模拟多个工作单元（例如在 IOC 中将 DbContext 生命周期设置为 PerWebRequest 时的多个请求）。

我在那里遇到了一个惊喜，因为 EF5 似乎使用了[SqlDependency](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldependency.aspx)之类的东西，因为我的情况如下：

```
DbContext unit1 = new DbContext(), unit2 = new DbContext();
unit1.Items.Add(new Item() { Name = "Item1" });
Assert.AreEqual(0, unit1.Items.ToList().Count); // true as item is in unit1.Items.Local collection
Assert.AreEqual(0, unit2.Items.ToList().Count);

unit1.SaveChanges();

Assert.AreEqual(1, unit1.Items.ToList().Count); // true as unit1 is saved
Assert.AreEqual(1, unit2.Items.ToList().Count); // true as unit2 is somehow notified of changes 
```

我正在尝试查找文档，但 EF 项目页面和博客和谷歌都没有帮助我。这不是旧版 EF 的工作方式，没有开箱即用的功能来通知其他上下文（即参见[这个问题](https://stackoverflow.com/questions/4852564/entity-framework-underlying-data-in-database-change-notification)）。如果这实现了很好，但我需要说明它的文档，因为我担心我不能依赖这个特性，而且我不能依赖知道如果其他工作单元完成，我的上下文中的数据不会改变，就像这里显然一样。

# ruby-on-rails-3 - Rails：在 *.js.erb 中渲染不执行

> ID：13439805
> 
> 赞同：4
> 
> 时间：2012-11-18T11:46:21.120
> 
> 标签：ruby-on-rails-3

我的 js.erb 文件中有这段代码

```
$("<%=j render(:partial => "phone/phone_fields" , :phone => @phone ,:token => tokenizer, :exists => false) %>").hide().appendTo('.contacts').slideDown(); 
```

调用它的控制器传递 @phone 变量，而 tokenizer 是一个助手。如果我将标记器和@phone 作为警报消息，它可以工作，但是当我在渲染语句中使用它时，它什么也不做。它根本不执行。它甚至没有给出错误或其他东西..

我尝试了许多变体，例如在控制器中调用 js 渲染语句，结果被传递到 js 文件中，但仍然无法正常工作。但我想知道为什么它适用于我的一个助手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:05:32.503

从“js.erb”文件渲染部分内容时试试这个：

```
<%= escape_javascript(render(:partial => "phone/phone_fields",
:phone => @phone ,:token => tokenizer, :exists => false)) %> 
```

# javascript - Safari 6 Extension Popover 重新加载导航

> ID：13439806
> 
> 赞同：1
> 
> 时间：2012-11-18T11:46:22.700
> 
> 标签：javascript, safari, safari-extension, safari6

我开发了一个在 Safari 5 中运行良好的带有 Popover 的 Safari 扩展。我在 Javascript 中使用了以下代码来重新加载页面：
`safari.extension.popovers[0].contentWindow.location.reload();`

以下代码用于转到另一个 HTML 文件：
`safari.extension.popovers[0].contentWindow.location.replace("second.html");`

但是在 Safari 6 中，如果我使用这些代码之一，Safari 不仅会在弹出窗口中打开链接，还会在主窗口中打开链接。

我怎样才能解决这个问题？

# iphone - UIButton 动作

> ID：13439807
> 
> 赞同：1
> 
> 时间：2012-11-18T11:46:34.670
> 
> 标签：iphone, objective-c, ios, ibaction

我在情节提要中设置了一个 UIButton，当按下它时会为 UIVIew 设置动画。我希望同一个按钮在第二次按下时将 UIView 设置为动画/移动回其原始点。

做这个的最好方式是什么？

感谢您的帮助或指点。

这是我用来动画和移动 UIVIew 的代码：

我正在使用一个名为 buttonCurrentStatus 的 BOOL。

```
-(IBAction)sortDeals:(UIButton*)sender {

if (buttonCurrentStatus == NO)
{
    buttonCurrentStatus = YES;

CGRect menuTopFrame = self.menuTop.frame;
menuTopFrame.origin.y = 30;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:0.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

self.menuTop.frame = menuTopFrame;

[UIView commitAnimations];
    NSLog(@"Sort Deals touched button status = yes");

} else {
        buttonCurrentStatus = NO;

        CGRect menuTopFrame = self.menuTop.frame;
        menuTopFrame.origin.y = 30;

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
        [UIView setAnimationDelay:0.0];
        [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];

        self.menuTop.frame = menuTopFrame;

        [UIView commitAnimations];

NSLog(@"Sort Deals touched button status = no");

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:17:04.007

```
-(IBAction)sortDeals:(UIButton*)sender {

sender.selected = !sender.selected;

int moveby = (sender.selected) ? 30: -30;

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:0.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
menuTop.frame = CGRectMake(menuTop.frame.origin.x, menuTop.frame.origin.y + moveby, menuTop.frame.size.width, menuTop.frame.size.height);
[UIView commitAnimations];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T17:58:07.747

另一种更通用的方法是使用将执行两种方法之一的 IBAction。像以前的答案一样，您可以使用 BOOl 值或 int 来确定要使用的操作。这是一个更一般的答案，可用于多种目的。

首先，您需要一个 BOOL 变量。在本例中，我将 Bool 变量设置为 boolVarible（是的，我知道我拼错了）。默认情况下，我将其设置为 YES。

```
bool boolVarible = YES; 
```

我把它变成了一个类变量。

```
-(IBAction)buttonAction:(id)sender {
    if (boolVarible == YES)
    {
        //Execute first action
        [self firstAction];
    }
    else
    {
        //Execute second action
        [self secondAction];
    }
}

-(void)firstAction {
    //Do something here...
}

-(void)secondAction {
    //Do something here...
} 
```

希望你明白这一点。然后，您可以随时交换操作。只需简单地更改 BOOl 值，然后当按下按钮时，它将执行另一个方法。我发现这比一次完成所有操作更干净。祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T19:00:20.810

您的问题的非常简单的解决方案是，如果您在需要实现此方法的类中声明两个布尔变量。您的代码将如下所示

在 .m 文件中

```
BOOL Action1;
BOOL Action2; 
```

现在在 ViewDidload 方法中

```
 (void)viewDidLoad 
 {
   Action1=TRUE;
   Action2=FALSE;
   [super viewDidLoad];

  } 
```

现在你的方法

```
 (IBAction)sortDeals:(UIButton*)sender {
   if (Action1 == TRUE)
 {

   CGRect menuTopFrame = self.menuTop.frame;
   menuTopFrame.origin.y = 30;
   [UIView beginAnimations:nil context:nil];
   [UIView setAnimationDuration:0.5];
   [UIView setAnimationDelay:0.0];
   [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
   self.menuTop.frame = menuTopFrame;
   [UIView commitAnimations];
   NSLog(@"Sort Deals touched button status = yes");
     Action1=FALSE;
     Action2=TRUE;
    }
   else 
    if (Action2 == TRUE)
   {

   CGRect menuTopFrame = self.menuTop.frame;
    menuTopFrame.origin.y = 30;
   [UIView beginAnimations:nil context:nil];
   [UIView setAnimationDuration:0.5];
    [UIView setAnimationDelay:0.0];
    [UIView setAnimationCurve:UIViewAnimationCurveEaseOut];
    self.menuTop.frame = menuTopFrame;
   [UIView commitAnimations];
   NSLog(@"Sort Deals touched button status = no");
   Action1=TRUE;
   Action2=FALSE;
   } 
```

希望它对你有用。谢谢

# postgresql - 在 postgresql 中检查时态数据库的最小可变性

> ID：13439808
> 
> 赞同：1
> 
> 时间：2012-11-18T11:46:38.607
> 
> 标签：postgresql, datetime, variance

我有一张这样的桌子：

```
+------------+------------------+
|temperature |Date_time_of_data |
+------------+------------------+
| 4.5        |9/15/2007 12:12:12|                  
| 4.56       |9/15/2007 12:14:16|
| 4.44       |9/15/2007 12:16:02|
| 4.62       |9/15/2007 12:18:23|
| 4.89       |9/15/2007 12:21:01|
+------------+------------------+ 
```

数据集包含 1000 多条记录，我想检查**最小可变性**。对于每 30 分钟，如果温度的方差不超过 0.2，我希望将那半小时的所有温度值替换为 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:26:01.877

这是一个 SELECT 来获取每条记录的时间段的开始：

```
SELECT temperature,
       Date_time_of_data, 
       date_trunc('hour', Date_time_of_data)+
       CASE WHEN date_part('minute', Date_time_of_data) >= 30
            THEN interval '30 minutes'
            ELSE interval '0 minutes'
       END as start_of_period
FROM your_table 
```

它将日期截断为小时（2007 年 9 月 15 日 12:12:12 到 2007 年 9 月 15 日 12:12:00），然后如果日期最初超过 30 分钟，则添加 30 分钟。

接下来 - 使用 start_of_period 对结果进行分组并获取每个组的最小值和最大值：

```
SELECT temperature,
       Date_time_of_data,
       max(Date_time_of_data) OVER (PARTITION BY start_of_period) as max_temp,
       min(Date_time_of_data) OVER (PARTITION BY start_of_period) as min_temp
FROM (previou_select_here) 
```

Next - 过滤掉方差大于 0.2 的记录

```
SELECT temperature,
       Date_time_of_data
FROM (previou_select_here)
WHERE (max_temp - min_temp) <=0.2 
```

最后更新你的表

```
UPDATE your_table
SET temperature = NULL
WHERE Date_time_of_data IN (previous_select_here) 
```

您可能需要更正此查询中的一些拼写错误，然后才能正常工作。我还没有测试过它们。如果需要，您可以简化它们。

PS如果您需要过滤掉方差小于 0.2 的数据，您可以简单地从第三个 SELECT 创建一个 VIEW

```
 WHERE (max_temp - min_temp) > 0.2 
```

并使用 VIEW 代替表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T12:29:13.640

这个查询应该做的工作：

```
with intervals as (
    select
        date_trunc('hour', Date_time_of_data) + interval '30 min' * round(date_part('minute', Date_time_of_data) / 30.0) as valid_interval
    from T
    group by 1
    having var_samp(temperature) > 0.2
)
select * from T
where 
    date_trunc('hour', Date_time_of_data) + interval '30 min' * round(date_part('minute', Date_time_of_data) / 30.0) in (select valid_interval from intervals) 
```

内部查询（标记为区间）返回方差超过 0.2 ( `having var_samp(temperature) > 0.2`) 的时间。`date_trunc ...`表达式将 Date_time_of_data 舍入为半小时间隔。

该查询在提供的数据集上不返回任何内容。

```
create table T (temperature float8, Date_time_of_data timestamp without time zone);
insert into T values 
    (4.5, '2007-9-15 12:12:12'),
    (4.56, '2007-9-15 12:14:16'),
    (4.44, '2007-9-15 12:16:02'),
    (4.62, '2007-9-15 12:18:23'), 
    (4.89, '2007-9-15 12:21:01')
; 
```

# javascript - Javascript 删除机制

> ID：13439810
> 
> 赞同：3
> 
> 时间：2012-11-18T11:46:44.410
> 
> 标签：javascript

> **可能重复：**
> [javascript中的删除运算符](https://stackoverflow.com/questions/6173308/the-delete-operator-in-javascript)

我有以下代码。我不明白为什么第二次删除失败。

另外，我注意到即使在我为 foo 分配了其他东西之后， foo 函数仍然存在。

有没有办法引用函数？
（假设我希望 a`bar2=foo()`表现得像`bar`作业）。

```
> function foo(){var bar=0; return function(){return bar++;}}
undefined
> bar = foo()
function () {return bar++;}
> bar()
0
> bar()
1
> delete bar
true
> foo = foo()
function () {return bar++;}
> foo()
0
> foo()
1
> delete foo
false 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T12:01:01.430

`delete`仅适用于可删除的属性。像这样声明的函数：

```
function f(){
} 
```

不可删除。

尝试将此语法用于原始函数声明：

```
foo = function (){var bar=0; return function(){return bar++;}} 
```

在这里看到它：http: [//jsfiddle.net/Sxnaw/](http://jsfiddle.net/Sxnaw/)

您可以通过本文深入了解可删除和不可删除属性：[http://perfectionkills.com/understanding-delete/](http://perfectionkills.com/understanding-delete/)

# xcode - 将图像保存在文件夹中并直接使用 XCode

> ID：13439812
> 
> 赞同：0
> 
> 时间：2012-11-18T11:47:03.743
> 
> 标签：xcode, photoshop

我想知道是否可以保存您刚刚在 Photoshop 中编辑的图像，并立即在 XCode 中使用它，而不是一直将图像拖到 XCode 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:00:23.763

您可以创建一个文件夹引用到您保存图像的位置。

为此，请使用“*将文件添加到 'NameOfProject'* ”菜单命令，然后选择您的文件夹。确保选项设置如下：

![在此处输入图像描述](../Images/3aa09d05b496d57d1c0e695e9226a9ed.png)

然后，当您查看该文件夹的内容时，图像应该出现在 Xcode 中。引用它们时，您必须使用文件夹的名称。例如`[UIImage imageNamed:@"MyImages/image.png"];`

# php - PHP、MySQL 中的数据阻塞

> ID：13439814
> 
> 赞同：1
> 
> 时间：2012-11-18T11:47:11.953
> 
> 标签：php, mysql, concurrency, transactions, locking

我正在为一家小型诊所编写队列管理系统。会有多个用户尝试做同样的事情，所以这是一个并发问题。我熟悉 ACID 保证，也了解交易的概念。我知道两个人不能同时更改相同的数据。

但这是我的问题：我有一个`PHP`函数`isFree($time)`可以确定特定医生在那段时间是否有空。恐怕如果两个用户都尝试调用相同的函数，他们都可能会得到肯定的结果并将事情搞砸，所以我需要以某种方式将并发用户排队，或者只接受一个。

解决这个问题的最简单方法是限制我的函数一次只能调用一个。我可能需要某种标志或阻塞系统，但我不知道该怎么做。

或者另一方面，只限制那些可能重叠的函数调用会更快。例如`isFree($time)`周一和周二同时调用函数不会造成任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:06:23.780

您实际上是在要求锁定。

我猜您的队列系统在 MySQL 上运行用于数据库。如果是这样，您可以`LOCK`使用您正在使用的表（或在某些数据库引擎上，您正在使用的特定行！）。结构是`LOCK TABLES yourTableName READ`。

这将有效地防止其他任何人阅读表格中的任何内容，直到：

1.  您的会话已结束
2.  你释放锁（使用`UNLOCK`）

这适用于所有数据库存储引擎。InnoDB 通过事务支持行级锁定。不要使用`SELECT`查询，而是将其后缀`FOR UPDATE`以完全锁定您刚刚读取的行。

[这](http://dev.mysql.com/doc/refman/5.0/en/innodb-locking-reads.html "这个页面可能会派上用场")有望进一步阐明 MySQL/innoDB 的锁定机制。为了释放锁，要么更新行，要么提交事务。

# php - DateTime 格式整月与记录不符

> ID：13439816
> 
> 赞同：4
> 
> 时间：2012-11-18T11:47:36.337
> 
> 标签：php, datetime, format

尝试使用 DateTime 对象输出完整的月份名称，但不知何故我不是[在这里显示文档](http://nl1.php.net/manual/en/datetime.formats.date.php)。

我想把日期写成 2012 年 11 月 18 日，但我没有成功

```
$date = new DateTime();
$datum =  $date->format("d m Y"); 
```

输出 18 11 2012 ??

阅读这种格式`dd ([ \t.-])* m ([ \t.-])* y`应该输出正确，但这根本不起作用？？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-18T11:54:27.203

有关格式字符，请参阅[`date()`手册页](http://php.net/date)。[`DateTime::format()`这在手册页](http://php.net/datetime.format)上多次提及。

对于要使用格式字符的完整月份名称`F`。

> 一个月的完整文本表示，例如一月或三月

* * *

您链接到的“日期格式”手册页适用于*输入*日期字符串，而不是输出格式。

# php - 为什么我的 MySQLi 连接这么慢？

> ID：13439817
> 
> 赞同：11
> 
> 时间：2012-11-18T11:48:02.047
> 
> 标签：php, mysql

我的本地系统需要大约 1 秒来建立 MySQLi 连接。代码：

```
$db = new mysqli( 'localhost', 'root', 'pass', 'mydb' ); 
```

为什么这么慢？这是正常的吗？我可以改进它吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-11-18T11:55:18.123

将“localhost”切换到 127.0.0.1。

所以，而不是：

```
$db = new mysqli( 'localhost', 'root', 'pass', 'mydb'); 
```

利用：

```
$db = new mysqli( '127.0.0.1', 'root', 'pass', 'mydb'); 
```

看到这个问题似乎很受欢迎，很多人想知道[为什么](http://thisinterestsme.com/slow-mysqli-connection/)会这样：

> 这是因为 MySQL 客户端将对主机名进行 IPV6 查找。如果失败（在这种情况下，显然失败了），它将尝试进行 IPV4 查找。在 IPV6 (AAAA) 查找失败和 IPV4 (A) 查找成功之间，我们得到的是一个持续约 1-2 秒的连接超时周期。

值得注意的是，这个问题似乎只发生在 Windows 7 及更高版本中。在 Windows 7 之前，localhost 解析由 hosts 文件处理，该文件预先配置为`127.0.0.1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T11:55:41.527

正如[托尼建议的那样](https://stackoverflow.com/questions/11140975/ado-and-msqli-connections-very-slow/11367649#11367649)：

> 我编辑了 Mysql my.ini 以将 mysql 服务更改为仅绑定到 IPV4 环回适配器。
> 
> ```
> [mysqld]
> ...
> bind=127.0.0.1 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-03T18:53:58.833

另一种选择是编辑 hosts 文件，该文件位于 windows\system32\drivers\etc 下

```
# localhost name resolution is handled within DNS itself.
    127.0.0.1       localhost
#   ::1             localhost 
```

使用具有管理员权限的编辑器取消注释 127.0.0.1。

# android - 我应该在哪里同步这个静态 SharedPreference 助手类？

> ID：13439821
> 
> 赞同：1
> 
> 时间：2012-11-18T11:48:46.670
> 
> 标签：android, sharedpreferences, synchronized

我创建了一个以静态方式持有 SharedPreferences 访问权限的类。查看 AOSP ContextImpl.java 的 SharedPreferenceImpl，我看到它在执行`synchronized(this)`时使用。`put``get`

我还应该`synchronized`在下面的代码中添加某处吗？

```
public class AppPreferences {
  // Get static SharedPreferences Editor
  private static Editor getEditor(Context ctx) {
    return PreferenceManager.getDefaultSharedPreferences(ctx).edit();
  }
  // Get static SharedPreferences
  private static SharedPreferences getPref(Context ctx) {
    return PreferenceManager.getDefaultSharedPreferences(ctx);
  }
  public static String getUserName(Context ctx, String defaul) {
    return getPref(ctx).getString("user_name", defaul);
  }
  public static void setUserName(Context ctx, String text) {
    getEditor(ctx).putString("user_name", text).commit();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T21:28:43.633

里面有`android.app.ContextImpl`一个[静态场](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/android/app/ContextImpl.java#ContextImpl.0sSharedPrefs)

```
private static final HashMap<String, SharedPreferencesImpl> sSharedPrefs =
         new HashMap<String, SharedPreferencesImpl>(); 
```

（旁边`private static final HashMap`？！/旁边）。[这是在这里](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/android/app/ContextImpl.java#346)
填充的。因此，共享相同上下文的应用程序中的所有线程（我在[这里](https://stackoverflow.com/questions/16327221/getdefaultsharedpreferences-what-is-the-context-for-a-multi-package-applicat)问过，但我仍然不是 100% 确定）将共享这个实例的静态映射 - 现在，每当你调用 edit() 时，你都会得到一个[新的 EditorImpl 实例](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/android/app/ContextImpl.java#2837)- 所以在您在问题中提到的“同步（this）” *this*指的是手头的 EditorImpl 的实例 - 它没有太多作用 - 它只是同步对 EditorImpl 的内部映射的访问。但是（不同的）编辑器在（*common*）*SharedPreferencesImpl*实例上进行同步，当他们要修改这个（SharedPreferencesImpl）实例时。所以在`SharedPreferencesImpl`***`commit()`例如在同步[开启](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/android/app/ContextImpl.java#2937)`commitToMemory()`的地方被[调用](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/android/app/ContextImpl.java#2999)。请记住，尽管对磁盘的写入是以随机顺序排列的（请参阅 javadoc 中的 [enqueueDiskWriteSo](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.1_r1/android/app/ContextImpl.java#3052)并注意在写入内存和排队写入磁盘之间没有锁定）。因此，只要您不依赖于修改顺序并且不依赖于*原子*检查*和*设置首选项值（需要您自己同步），您应该可以安全地修改首选项 注意我引用的代码是针对 2.3.1_r1 -希望仍然有效 `SharedPreferencesImpl.this``commit`***

# java - http请求解析期间的错误编码

> ID：13439825
> 
> 赞同：0
> 
> 时间：2012-11-18T11:49:10.087
> 
> 标签：java, spring, encoding

我尝试通过以下方式从 http 表单提交一些信息：

`<form method="GET" action="/springhibernate/notes/addComment"> <textarea rows="10" cols="30" name="content" placeholder="type comment here"></textarea> <input type="hidden" name="note.id" value=<c:out value="${note.id}"/>/> <input type="submit" class="button" value="send comment"/> </form>`

Spring 框架将此提交请求映射到控制器

```
@RequestMapping(value = "notes/addComment", method = RequestMethod.GET)
public String addComment(@RequestParam("content") String content, @RequestParam("note.id") String parent_id, ModelMap model) throws UnsupportedEncodingException {
    Long note_id = notesService.addComment(content, Long.valueOf(parent_id));
    return "redirect:viewNote/" + parent_id;
} 
```

结果我有： ?°?±???????µ 在内容变量中。

仅非拉丁字符会出现问题。

JSP 页面包含：<%@ page contentType="text/html;charset=WINDOWS-1251" language="java" %>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T21:40:25.613

几个小时前我遇到了类似的问题。请看[这里](https://stackoverflow.com/questions/13429112/how-do-i-fix-broken-encoding-in-my-webapp)。我在问题的末尾发布了我的解决方案。

# css - 背景：颜色在 IE8 中不起作用

> ID：13439831
> 
> 赞同：6
> 
> 时间：2012-11-18T11:50:04.177
> 
> 标签：css

```
body {
    background: gray; 
    font-family: sans-serif;
    width: 960px;
    margin: auto;
}

header {
    background: green;
    border: 10px solid black;
}

nav {
    margin-top:10px;
    background: #62D99C;
    border-radius: 10px;
    padding: 10px;
} 
```

页眉和导航背景在 IE8 中不起作用。它确实适用于 Chrome 和 FF。我该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T11:52:42.277

您应该适用`display:block`于 header 和 nav 元素：

```
header {
  display: block;
  background: green;
  border: 10px solid black;
}

nav {
  display: block;
  margin-top:10px;
  background: #62D99C;
  border-radius: 10px;
  padding: 10px;
} 
```

看来您还需要包含以下js：

```
<!--[if lt IE 9]>
<script>
  document.createElement('header');
  document.createElement('nav');
</script>
<![endif]--> 
```

可以在这里找到原因：

[http://tatiyants.com/how-to-get-ie8-to-support-html5-tags-and-web-fonts/](http://tatiyants.com/how-to-get-ie8-to-support-html5-tags-and-web-fonts/)

简而言之，IE8 默认不支持 HTML5 元素，但通过执行此 javascript *（仅适用于 IE8 或更低版本）*，它开始识别这些元素。大多数开发人员使用某种形式`html5 shim`来解决这个问题。

[http://code.google.com/p/html5shim/](http://code.google.com/p/html5shim/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:56:49.647

看起来 IE8 不支持 HTML4 中不存在的 HTML5 功能（这包括新的元素`header`和`nav`）。请参阅问题的答案[是否 IE8 支持 HTML5 和 CSS3？](https://stackoverflow.com/a/5497718/112968)

尝试用旧的工作方式替换元素：`<div class="nav">`并使用 CSS-selector `.nav`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T08:16:31.167

**背景颜色在 Internet Explorer (IE) 上不起作用**

IE 在呈现网页之前应用了一些过滤器。这就是为什么某些页面颜色发生了变化。

您可以在 CSS 类中添加以下行来避免它。

```
 filter: none !important; 
```

# c# - 表示 SQL 数据库中的列表

> ID：13439832
> 
> 赞同：3
> 
> 时间：2012-11-18T11:50:17.530
> 
> 标签：c#, sql, database, database-design

我正在用 C# 使用 SQL 数据库做一个应用程序。

我有一个模型：

```
Person()
{
  string id;//unike key
  string name;
  List<string> responsableOf;//list of id
} 
```

我想把它表示成一个表。

哪些是表格的正确字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T11:54:54.787

这取决于该人与他将负责的其他人之间存在什么样的关系。

如果它是父子关系，即***组合***，您可以使用自引用表。就像是：

**`Persons`**具有以下列：

*   `Id`,
*   `name`.
*   `ParentId`同一张表的外键。

如果人和其他人之间的关系是一个***聚合***，并且一个人可能对许多其他人负责`person`：

**`Persons:`**

*   `Id`,
*   `name`.

**`usersresponsibilities`**：

*   `Id`,
*   `PersonId`,
*   `ResobonsiblePersonID`.

稍后，在这两种情况下，在您的前端应用程序中，您都需要将这些表中的数据作为对象而不是行来处理。你应该从对象的角度来思考。

在您的应用程序中，您当前的类`Person`应映射到此表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-18T11:54:18.600

解决方案将在一定程度上取决于您的约束：

## 如果一个人可以有几个人负责

您需要的是人员之间的多对多关系（以及包含其他字段、ID 和姓名的人员表）

您将表示使用关联两个 ID（外键）的表对于任何给定的行，该表将关联：

*   负责人身份证
*   负责人的身份证

构建您的列表就像在此表中查询具有给定责任 ID 的行一样简单。

## 如果一个人只能有一个人负责

您需要一个外键到您的人员表中的同一个表（责任 ID）。

然后，构建您的列表就像在人员表中查询具有给定责任 ID 的行一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:58:09.350

创建一个 id 和 responsableOfID 作为整数的表，而 responsableOfID 是另一个具有 id 和名称的表的外键

# ios - 苹果设备如何识别开放的 wifi 需要凭据

> ID：13439837
> 
> 赞同：1
> 
> 时间：2012-11-18T11:51:44.983
> 
> 标签：ios, wifi

对不起标题，但我不完全知道如何问这个问题，我认为这与编程有关。

如果您有一个苹果移动设备，并且您走进一个有开放 wifi 的地方（例如咖啡连锁店或机场上的许多地方），并且您尝试使用互联网，则会出现一个屏幕，要求您提供使用互联网的凭据. 此屏幕不在 safari 中，但 ios 识别它需要密码才能访问互联网并显示此*屏幕*。在英国，BT 开放区就是这样做的。

我想知道苹果设备如何识别这一点。是标准吗？（我还没有在安卓设备上看到这个）。我试过用谷歌搜索，但找不到任何东西（可能是因为我不完全知道要搜索什么）

以防万一，我**不是**在谈论需要密码的安全 wifi。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T11:54:00.383

我不了解 Apple，但 Windows 8 显然试图连接到 Microsoft 的 Web 服务器之一并验证这是否有效。

# jquery - jQuery 插入 div ul

> ID：13439838
> 
> 赞同：0
> 
> 时间：2012-11-18T11:52:01.967
> 
> 标签：jquery

我有以下 HTML 结构：

```
<div class="list-comments one">
    <ul>
        <li>
            <span>1</span>
            <p class="title"><a href="#">Welcome!</a></p>
            <div class="list-subcomments" style="display: none;">
                <div class="list-comments two">
                    <ul>
                        <li>
                            <span>2</span>
                            <span style="text-align:center;">Josh</span>
                        </li>
                    </ul>
                </div>
            </div>
        </li>
    </ul>
</div> 
```

我想在第一个 ul 中添加一个新的 li，如下所示：

```
var html = '';
html = '<li>';
html = '<span>1</span>';
html = '<p class="title"><a href="#">Antoher Welcome!</a></p>';
html = '<div class="list-subcomments" style="display: none;">';
html = '<div class="list-comments two">';
html = '<ul></ul>';
html = '</div>';
html = '</div>';
html = '</li>';
$(".one ul").append(html); 
```

我只是希望将它添加到第一个 ul 中，但它添加了两个 ul。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:54:31.883

```
$(".one ul:first").append(html); 
```

或者

```
$(".one > ul").append(html); 
```

小提琴 - [http://jsfiddle.net/D7RF3/](http://jsfiddle.net/D7RF3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T11:54:47.357

您可以使用`child`选择器：

```
$(".one > ul").append(html); 
```

或`:first`选择器：

```
$(".one ul:first").append(html); 
```

请注意，您正在覆盖值而不是连接它们，您应该`+=`代替`=`;

```
var html = '';
html += '<li>';
html += '<span>1</span>';
// ...
html += '</li>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T11:54:57.887

那是因为该 div 下方有两个`ul`元素。你有两个选择。

```
$('.one ul').first().append(html); 
```

或者

```
$('.one > ul').append(html); 
```

# java - java.lang.RuntimeException：无法实例化服务

> ID：13439842
> 
> 赞同：2
> 
> 时间：2012-11-18T11:52:35.030
> 
> 标签：java, android, service, runtime, instantiation

安装并运行动态壁纸后的错误日志基本上，我在动态壁纸应用程序上收到错误。当我设置壁纸时它崩溃了。有什么问题？

```
com.snailreactors.thestorm.SBLiveWallpaper: java.lang.ClassNotFoundException: com.snailreactors.thestorm.SBLiveWallpaper
at android.app.ActivityThread.handleCreateService(ActivityThread.java:2347)
at android.app.ActivityThread.access$1600(ActivityThread.java:130)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1277)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4745)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.ClassNotFoundException: com.snailreactors.thestorm.SBLiveWallpaper
at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
at android.app.ActivityThread.handleCreateService(ActivityThread.java:2344)
... 10 more 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>

<manifest
    xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.snailreactors.thestorm" android:versionCode="3" 
            android:versionName="1.15">
            <uses-sdk android:minSdkVersion="3" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE"/>
    <uses-feature android:name="android.software.live_wallpaper" />   

    <application
        android:label="@string/application_name"
        android:icon="@drawable/icon">

        <service
            android:label="@string/service_name"   
            android:name=".SBLiveWallpaper"
            android:permission="android.permission.BIND_WALLPAPER">
            <intent-filter>
                <action android:name="android.service.wallpaper.WallpaperService" />
            </intent-filter>
            <meta-data android:name="android.service.wallpaper" android:resource="@xml/lwp_resource" />
        </service>

        <activity
            android:label="Settings"
            android:name=".LiveWallpaperSettings"
            android:theme="@android:style/Theme.WallpaperSettings"
            android:exported="true">
        </activity>

    </application>
    <supports-screens 
        android:smallScreens="true"
        android:normalScreens="true"
        android:largeScreens="true" />
</manifest> 
```

再次：基本上，我在动态壁纸应用程序上遇到错误。当我设置壁纸时它崩溃了。有什么问题？

# weka - 使用 j48 树在分类中处理多标签数据集

> ID：13439846
> 
> 赞同：1
> 
> 时间：2012-11-18T11:53:20.670
> 
> 标签：weka

我正在尝试使用 j48 树来执行文本分类任务。我阅读了很多论文和网站，它们解释了如何使用具有单标签数据集的分类。在我的情况下，我的训练集中只有多标签数据，我可以在单个决策树中处理这些数据吗？或者唯一的解决方案是生成与标签数量一样多的树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T17:15:19.563

您可以使用具有自适应熵公式的树。如果您的数据集具有分层标签，则必须事先定义： [论文和代码](http://www.aber.ac.uk/en/cs/research/cb/dss/phenotype/)

# python - python3 telnet socket.gaierror: [Errno 8] nodename nor servname provided, or not known

> ID：13439856
> 
> 赞同：2
> 
> 时间：2012-11-18T11:54:36.350
> 
> 标签：python, telnet, telnetlib

我正在尝试通过 python3 脚本根据 hosts.txt 文件中的 IP 地址远程登录到路由器。但是我收到以下错误：

```
$ ./telnet_group_1.py  
10.1.1.1  
 Traceback (most recent call last):  
  File "./telnet_group_1.py", line 23, in <module>  
    tn = telnetlib.Telnet(host)  
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/telnetlib.py", line 209, in __init__  
    self.open(host, port, timeout)  
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/telnetlib.py", line 225, in open  
    self.sock = socket.create_connection((host, port), timeout)  
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/socket.py", line 386, in create_connection  
    for res in geta ddrinfo(host, port, 0, SOCK_STREAM):  
socket.gaierror: [Errno 8] nodename nor servname provided, or not known 
```

如果我使用相同的 IP 地址但在脚本中定义（不是取自 hosts.txt 文件），则脚本可以正常工作。请告知如何更改代码以使其正常工作？

脚本细节：

```
import telnetlib, socket  

hosts = open("hosts.txt", 'r')  
output = open("output.txt", 'w')  

username = 'admin'  
password = 'admin'  

for h in hosts:  
    host_s = str(h)      
    tn = telnetlib.Telnet(host_s)  
    tn.read_until(b'Username: ')  
    tn.write(username.encode('ascii') + b"\n")  
    tn.read_until(b'Password: ')  
    tn.write(password.encode('ascii') + b"\n")  
    tn.write(b"terminal len 0\n")  
    tn.write(b"show version\n")  
    tn.write(b"exit\n")  
    print(tn.read_all().decode('ascii'), file = output) 
```

hosts.txt 到目前为止仅包含一个条目 - 只是为了使其工作：

```
10.1.1.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T11:56:44.780

您想`.strip()`在文件中的行上使用`hosts`；否则包含换行符：

```
for h in hosts:  
    tn = telnetlib.Telnet(h.strip()) 
```

# java - 动态实例化一个类

> ID：13439862
> 
> 赞同：0
> 
> 时间：2012-11-18T11:55:04.957
> 
> 标签：java, reflection

我正在尝试了解反射并获取如下字段：

```
Class<?> inputClass = in.getClass(); 
Field[] classFields = inputClass.getFields(); 
```

到目前为止，代码都很好。现在我想遍历每个字段，打印它们的值，所以我这样做：

```
for (Field f : classFields) {
    System.out.println(f.get(new Object()).toString());
} 
```

为 IllegalAccessException 使用适当的 try/catch（为清楚起见省略）。我也试过在这里传入一个字符串，这也会产生下面描述的结果。每个 f 都有一个不是 Object、String 或等于 in 的类型。

这会引发异常：

```
Exception in thread "Thread-0" java.lang.IllegalArgumentException: Can not set java.lang.String field TestClass.testField to java.lang.Object
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:164)
at sun.reflect.UnsafeFieldAccessorImpl.throwSetIllegalArgumentException(UnsafeFieldAccessorImpl.java:168)
at sun.reflect.UnsafeFieldAccessorImpl.ensureObj(UnsafeFieldAccessorImpl.java:55)
at sun.reflect.UnsafeObjectFieldAccessorImpl.get(UnsafeObjectFieldAccessorImpl.java:36)
at java.lang.reflect.Field.get(Field.java:372)
at LearningReflection.messageToText(LearningReflection.java:88)
at LearningReflection$1.run(LearningReflection.java:180) 
```

我猜这是因为我传递了 Object 的实例（或 String，当我用 String 替换 Object 时），而不是该类实际包含的特定 Object 子类的实例。由于在编译时我不知道这将是什么，因此我需要从字段中提取有关类类型的信息，并在运行时将其实例化以传递给 get() 方法。这个猜测是否正确，如果正确，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:03:04.043

主要问题是您试图获取实例`TestClass`上字段的值。`Object`这是一个类型错误。`TestClass`传递to的实例`get`。

```
class TestClass {
  public Date d = new Date();

  public static void main(String[] args) throws Exception {
    MainClass.printFieldValues(new TestClass());
  }
}

public class MainClass {
  public static void printFieldValues(Object in) throws Exception {
    for (Field f : in.getClass().getFields())
      System.out.println(f.getName() + ": " + f.get(in));
  }
} 
```

请注意，这仅访问`public`类/对象的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:06:38.013

```
 Object o=Class.forName(qualifiedClassName).newInstance(); 
```

然后您可以将 o 转换为您的班级，然后调用适当的方法。qualifiedClassName 是类名的字符串表示形式，例如“TestClass”

# java - 如何将我的托管在线数据库与我的 Java 编程链接？

> ID：13439866
> 
> 赞同：1
> 
> 时间：2012-11-18T11:55:26.340
> 
> 标签：java, php, mysql

首先，我在 JAVA 编程方面不是很专业，但是如果您提到代码有多难，我会理解它...

我想创建一个与在线数据库连接的桌面应用程序，以从中插入/检索数据......我在谷歌上搜索了很多，但没有有用的答案，大多数人说这是不可能的，因为主机提供商在我使用 bluehost/godaddy 时避免外部访问控制面板中有远程 MySQL 可用...所以外部访问可用！

还有人说我必须使用php脚本来检索数据库链接并将其写入java代码但没有有用的链接......

如果这些解决方案之一是正确的，那么我该怎么做呢？如果有其他解决方案，如果您与我分享，我会很高兴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:15:31.863

> 还有人说我必须使用php脚本来检索数据库链接并将其写入java代码但没有有用的链接......

这听起来根本不对。Java 可以按照它的约定连接到 MySQL。如果您的程序是基于 Java 的，为什么还要在其中添加 PHP？我自己是一名 PHP 开发人员，我有一段时间没有接触过 Java，但是：

检查[Using MySQL With Java](http://dev.mysql.com/usingmysql/java/)，因为您需要使用 JDBC 驱动程序 (MySQL Connector/J)。

```
try {
    conn =
       DriverManager.getConnection("jdbc:mysql://IPADDRESSGOESHERE:PORTNUMBER/yourdatabase");

    // Do something with the Connection

} catch (SQLException ex) {
    // handle any errors
    System.out.println("SQLException: " + ex.getMessage());
    System.out.println("SQLState: " + ex.getSQLState());
    System.out.println("VendorError: " + ex.getErrorCode());
} 
```

# objective-c - 这条目标 C 线有什么作用？委托、自我、didSelectDate

> ID：13439871
> 
> 赞同：0
> 
> 时间：2012-11-18T11:56:08.310
> 
> 标签：objective-c, delegates, calendar

有人可以概述一下这条线到底是做什么的吗？

```
 [self.delegate calendar:self didSelectDate:self.selectedDate]; 
```

该行基本上用于在另一个类中的标签 dateLabel 上设置日期。

```
 CKCalendarView *calendar = [[CKCalendarView alloc] initWithStartDay:startMonday];
    calendar.delegate = self;

    self.dateFormatter = [[NSDateFormatter alloc] init];
    [self.dateFormatter setDateFormat:@"dd/MM/yyyy"];
    calendar.selectedDate = [self.dateFormatter dateFromString:@"18/11/2012"];
    calendar.minimumDate = [self.dateFormatter dateFromString:@"09/11/2012"];
    calendar.maximumDate = [self.dateFormatter dateFromString:@"29/11/2012"];

    calendar.frame = CGRectMake(10, 10, 300, 320);
    [self.view addSubview:calendar];

    self.dateLabel = [[UILabel alloc] initWithFrame:CGRectMake(10, CGRectGetMaxY(calendar.frame) + 4, self.view.bounds.size.width, 24)];
    [self.view addSubview:self.dateLabel]; 
```

关于上述行的作用的“夫妇行”详细解释将有很大帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T13:12:12.667

简而言之，您的日历有一个`CKCalendar`对象的实例，一个看起来是其中一个类的子类的视图`UIView`（我假设，因为我们无法分辨，因为您没有包含 .h 文件或完整的代码您正在使用的这个 .m 文件）。

大多数从 UIView 派生的类都需要一个*委托*来处理用户界面中的行为以及由用户界面生成的行为。（有关委托的功能的详细描述，请参阅委托[如何在 Objective-C 中工作？](https://stackoverflow.com/questions/1045803/how-does-a-delegate-work-in-objective-c)）。请注意，您在实例化后立即明确设置委托`calendar`：

```
calendar.delegate = self 
```

因此，通过该行，您使此类*既是*显示类又是委托类，因此您的类需要实现协议所需的任何方法（其中一个看起来是 `-(void)calendar:didSelectDate:`.）

您引用的代码行（基本上）说“使用`-(void)calendar:didSelectDate:`委托中找到的方法并将其自身和`selectedDate`作为该方法的参数/参数传递。”。

我会把那行写成：

```
[[self delegate] calendar:self didSelectDate:[self selectedDate]]; 
```

希望有帮助。

# c# - 如何增加循环内的计算结果

> ID：13439872
> 
> 赞同：-3
> 
> 时间：2012-11-18T11:56:12.520
> 
> 标签：c#, loops

我有一个循环，每次 Y - X 的结果大于或等于 1000 时，我希望另一个变量（Z）增加 30。所以每次 Y 和 X 之间的差异增加 1000，Z 增加30\. 所以：

```
3000 - 2000 = 1000, so Z = 30
3500 - 2000 = 1500, so Z = 30
4000 - 2000 = 2000, so Z = 60
4500 - 2000 = 2500, so Z = 60
5000 - 2000 = 3000, so Z = 90 
```

希望这能让它更清楚等等......

我想不通，有什么想法吗？

```
 while (Y >= X)
        {
            while (Y - X **==** 1000)
            {
                Z += 30;                    
                break;
            }
            result = (Y - X) + Z;
            break;
        } 
```

显然我知道这不起作用，也不整洁，我想不出该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:05:34.913

```
while (Y >= X)
{
  Y = Y - X;
  if (Y >= 1000)
  {
    Z += 30;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T12:03:14.843

```
for(int y = 1000;y<= 10000;y+=1000)
{
   for(int x = 1000;x< = 10000;x+=1000)
    {
          if(y-x>=1000)
            z+=30;
     }
} 
```

如果我的理解是正确的，只要 (yx) 大于或等于 1000，上述代码应将 z 增加 30。在循环外将 z 初始化为 0。

# php - ImageString 字体大小大于 5

> ID：13439879
> 
> 赞同：1
> 
> 时间：2012-11-18T11:56:46.653
> 
> 标签：php, gd

我相信这很简单，但我还是很初学者。有一个名为 ImageString 的 php 函数，它是我可以用来将文本转换为图像的唯一函数，我不知道为什么，但即使是 php 手册中的任何脚本（复制粘贴）也无法与我一起使用。

我想要的只是将字体大小更改为大于 5 的大小。

这是我的代码

```
header ("Content-type: image/jpeg"); 
// imagecreate (x width, y width)
$img_handle = imagecreatetruecolor (800, 600) or die ("Cannot Create image"); 
// ImageColorAllocate (image, red, green, blue)
$back_color = ImageColorAllocate ($img_handle, 0, 0, 0); 
$txt_color = ImageColorAllocate ($img_handle, 243,203,146); 
imagecolortransparent($img_handle, $back_color);
$text = 'soem text goes here';
ImageString($img_handle, 40, 10,90, $text, $txt_color);
Imagejpeg ($img_handle); 
ImageDestroy($img_handle); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:02:41.670

与我们在生成验证码图像时使用的相同技术可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T11:59:45.837

您在函数名称中使用大写字母。使用`imagecolorallocate`而不是`ImageColorAllocate`.

和相同`ImageString`，它们都需要小写。`Imagejpeg``ImageDestroy`

# android - Eclipse 中的 Android 错误：“无法执行 dex：无法将新索引 65799 合并到非巨型指令中！”

> ID：13439882
> 
> 赞同：47
> 
> 时间：2012-11-18T11:57:26.273
> 
> 标签：android, eclipse, opensaml

我正在尝试使用 Eclipse 使用 OpenSAML 的 Android 项目。我已经在构建路径中添加了所有必需的 jar 文件。现在，当我将程序作为 Android 应用程序运行时，会出现以下错误：

```
[2012-11-18 11:52:59 - Dex Loader] Unable to execute dex: Cannot merge new index 67075 into a non-jumbo instruction!
[2012-11-18 11:52:59 - MyTestProgram] Conversion to Dalvik format failed: Unable to execute dex: Cannot merge new index 67075 into a non-jumbo instruction! 
```

我用谷歌搜索了一下，但没有任何结果。这个错误可能意味着什么？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-19T16:31:52.473

我发现它对我有用的一种解决方案是添加`dex.force.jumbo=true`到我的`project.properties`.

有人指出：[https ://groups.google.com/forum/?fromgroups=#!topic/adt-dev/tuLXN9GkVas](https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/tuLXN9GkVas)

这是假设您正在运行 ADT 21，因为此功能在以前的版本中不可用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-26T09:39:12.877

同样的问题......只是把

```
dex.force.jumbo=true 
```

在 project.properties 的第一行

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-21T01:40:08.793

如果使用 gradle build，只需将 dexOptions 添加到 build.gradle 即可启用 jumbo 模式：

```
android {
    dexOptions {
        jumboMode = true
    }
} 
```

记得在你的新建筑之前运行“gradle clean”。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-02-03T08:58:11.437

我遇到了同样的问题，但我的 IDE 是 IntelliJ IDEA 13。在那个版本`dex.force.jumbo`中，文件中的指令`project.properties`被忽略了。

要启用它，只需转到**设置 | 编译器 | Android DX**并选择*Force jumbo 模式*选项。

希望它有所帮助（这是我能找到的唯一与 SO 相关的问题）。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-01-26T16:00:41.270

只是添加`jumboMode=true`对我的 gradle 构建不起作用。然而，这很有效（引用自 adt-dev 组中的 Xavier 作为对该区域中提交的错误的回复）：

> “尝试手动删除所有构建文件夹并再次构建，确保项目中的 dexOptions.jumboMode 设置为 true？
> 
> 存在一个问题，即根项目的构建没有在 clean 任务中删除，其中包含有关预索引库的一些信息。”

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-21T15:59:17.133

Adding some explanation:

This happens when Eclipse tries to incrementally build, when a change increases the number of string constants in the application. The original dex had non-jumbo instructions, and the new dex that's being merged into it has jumbo instructions. Doing a clean will show that it works when you build from scratch.

As long as the number of strings in your application is monotonically increasing, incremental builds will work going forward.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-18T07:02:16.743

我遇到了同样的问题，但在我的情况下，“dex.force.jumbo=true”命令并不能解决问题。我尝试更新 JDK 和 JRE ，这解决了问题。

希望这个答案有帮助

# java - Tomcat 6+ 的“无操作”会话管理器

> ID：13439884
> 
> 赞同：0
> 
> 时间：2012-11-18T11:57:41.483
> 
> 标签：java, tomcat, httpsession

我想在我的网络应用程序中完全禁用会话创建和管理，以消除当前与 Tomcat 标准会话管理器相关的内存（和其他资源）使用。这包括禁用 sesison cookie 和/或 url 重写，因为如果我成功了，将没有要跟踪的会话。

我的 Web 应用程序有一个 servlet，它将接收到的 xml 传递给 API/引擎。该引擎可以在 servlet 容器内部或外部运行，它以自己的方式创建、跟踪和管理会话。我对 Tomcat 中的会话的需求为零，我想将 Tomcat 用于会话管理的资源减少到最低限度。

我对该主题进行了一些搜索。搜索提出了一些主题，包括本网站上的一些主题。似乎解决这个问题的最严格的方法是创建自己的 Manager 实现，基本上，它提供了一个“空”实现，它做的最少。（有一些替代建议，但我发现它们相对较弱。这些建议包括“*不要调用`getSession()`*”和“将上下文的 'cookies' 属性设置为 false”。我认为实现一个会话管理器来做什么我想要的比这些建议更好，这是我选择走的路。）

鉴于此信息，滚动您自己的会话管理器是一个不错的方法，然后我下载了 Tomcat 源代码以查看与管理器实现相关的代码。这一切看起来都是可行的，但看起来我需要几个小时才能想出我在会话管理器上的尝试。在致力于这条道路和所涉及的工作之前，我想我会把它放在那里 - 有没有人可以共享 Tomcat 的最小会话管理器实现？一个什么都不做的最好，但我会从任何写过自己的会话管理器的人那里得到任何东西，包括技巧和战斗故事。我正在使用 Tomcat 6。

# log4perl - Log4perl 类别作为日志文件名

> ID：13439885
> 
> 赞同：3
> 
> 时间：2012-11-18T11:57:52.793
> 
> 标签：log4perl

我确定我很模糊并且遗漏了明显的东西，但是有没有一种简单的方法可以使用当前类别作为配置文件中的文件名而不诉诸子例程调用？

这样在下面可以使用而不是在文件名行`${category}.log`中重复`bin.nh.tpp`

```
log4perl.logger.**bin.nh.tpp**=INFO, BIN_NH_TPP_LOGFILE

log4perl.appender.BIN_NH_TPP_LOGFILE=Log::Log4perl::Appender::File
log4perl.appender.BIN_NH_TPP_LOGFILE.filename=${LOGS}/nh/**bin.nh.tpp**.log
log4perl.appender.BIN_NH_TPP_LOGFILE.mode=append
log4perl.appender.BIN_NH_TPP_LOGFILE.layout=PatternLayout
log4perl.appender.BIN_NH_TPP_LOGFILE.layout.ConversionPattern=[%d] %F{1} %L %c - %m%n 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T19:24:41.740

恐怕它比子程序更复杂。l4p conf 文件中的子程序允许包含在 conf 文件解析时已知的变量，例如时间/日期或用户 ID。您不能以这种方式修改日志时间行为。

我现在能想到的完成您想要的最简单的方法是自定义附加程序，例如

```
package FileByCategoryAppender;

use warnings;
use strict;
use base qw( Log::Log4perl::Appender::File );

sub new {
    my( $class, %options ) = @_;

    $options{filename } = "no-category.log";
    my $self = $class->SUPER::new( %options );
    bless $self, $class;
}

sub log {
    my( $self, %params ) = @_;

    my $category = $params{ log4p_category };
    $self->SUPER::file_switch( $category . ".log" );
    $self->SUPER::log( %params );
}

1; 
```

然后在你的脚本中使用它

```
use strict;
use warnings;

use Log::Log4perl qw( get_logger );

my $conf = q(
log4perl.category         = WARN, Logfile
log4perl.appender.Logfile = FileByCategoryAppender
log4perl.appender.Logfile.create_at_logtime = 1
log4perl.appender.Logfile.layout = \
  Log::Log4perl::Layout::PatternLayout
log4perl.appender.Logfile.layout.ConversionPattern = %d %F{1} %L> %m %n
);

Log::Log4perl::init(\$conf);

my $logger = get_logger("Bar::Twix");
$logger->error("twix error");

$logger = get_logger("Bar::Mars");
$logger->error("mars error"); 
```

这将导致在日志时创建两个日志文件：

```
# Bar.Mars.log
2012/11/18 11:12:12 t 21> mars error 
```

和

```
# Bar.Twix.log
2012/11/18 11:12:12 t 21> twix error 
```

# java - 为什么我的输出顺序看似随机（动作脚本 3.0）？

> ID：13439886
> 
> 赞同：2
> 
> 时间：2012-11-18T11:57:55.977
> 
> 标签：java, actionscript, for-loop, output

```
var personTab:Object=new Object()  
personTab.firstName='John'  
personTab.lastName='Appleseed'  
personTab.age=18  
for(var A:String in personTab)  
{  

    trace(A+': '+personTab[A])  
} 
```

> 输出顺序是姓氏、名字、年龄。我不明白为什么它不是名字，姓氏，年龄。此外，如果我将变量“A”的名称更改为“foo”，则顺序更改为 firstName、age、lastName。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T18:01:27.063

ActionScript 中的对象是无序的，基本上您可以将它们视为哈希表或关联数组，其中的值由它们的键引用（请参阅[文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Object.html)）。如果顺序对您很重要，您应该使用数组，或者，如果您还需要按键查找值的能力，请创建您自己的自定义集合来保留顺序。

# ios - 如何保存核心数据中的单个属性更改而不保存其他更改？

> ID：13439887
> 
> 赞同：0
> 
> 时间：2012-11-18T11:58:00.943
> 
> 标签：ios, core-data

我正在制作一个应用程序，它有一个要填写的表格，所有更改都进入主对象上下文，并在用户按下最终保存按钮时保存。

一切正常，直到我们得到一个更改，要求我们在几个屏幕中为备注添加一个功能，为此我在各个实体中添加了备注作为字符串属性。

现在，如果我在屏幕上进行一些更改并添加备注，单击备注的保存按钮，无论我是否保存其余更改，我都应该能够保存备注。

我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:24:55.650

无论是否设置了其余属性，您都可以保存它。

1.  获取它（如果不存在，您需要分配并初始化一个新的）。
2.  修改它。
3.  保存。

# php - 在 Magento (RESTful,PHP) 中创建新客户

> ID：13439888
> 
> 赞同：3
> 
> 时间：2012-11-18T11:58:04.227
> 
> 标签：php, magento, oauth

我正在尝试在 Magento 中创建一个新客户。这是我为此编写的 PHP 脚本

```
<?php
$callbackUrl = "http://localhost/magento/webservices/NewCustomer1.php";
$temporaryCredentialsRequestUrl = "http://localhost/magento/oauth/initiate?oauth_callback=". urlencode($callbackUrl);
$adminAuthorizationUrl = 'http://localhost/magento/admin/oauth_authorize';
$accessTokenRequestUrl = 'http://localhost/magento/oauth/token';
$apiUrl = 'http://localhost/magento/api/rest';
$consumerKey = 's3xt7w8lwhfrrfzrfvwm3lrilkf66d5n';
$consumerSecret = 'vr3eq1x899pz1cf4zzxjzx3q03t66r3n';

session_start();
if (!isset($_GET['oauth_token']) && isset($_SESSION['state']) && $_SESSION['state'] == 1) {
    $_SESSION['state'] = 0;
}
try {
    $authType = ($_SESSION['state'] == 2) ? OAUTH_AUTH_TYPE_AUTHORIZATION : OAUTH_AUTH_TYPE_URI;
    $oauthClient = new OAuth($consumerKey, $consumerSecret, OAUTH_SIG_METHOD_HMACSHA1, $authType);
    $oauthClient->enableDebug();

    if (!isset($_GET['oauth_token']) && !$_SESSION['state']) {
        $requestToken = $oauthClient->getRequestToken($temporaryCredentialsRequestUrl);
        $_SESSION['secret'] = $requestToken['oauth_token_secret'];
        $_SESSION['state'] = 1;
        header('Location: ' . $adminAuthorizationUrl . '?oauth_token=' . $requestToken['oauth_token']);
        exit;
    } else if ($_SESSION['state'] == 1) {
        $oauthClient->setToken($_GET['oauth_token'], $_SESSION['secret']);
        $accessToken = $oauthClient->getAccessToken($accessTokenRequestUrl);
        $_SESSION['state'] = 2;
        $_SESSION['token'] = $accessToken['oauth_token'];
        $_SESSION['secret'] = $accessToken['oauth_token_secret'];
        header('Location: ' . $callbackUrl);
        exit;
    } else {
        $oauthClient->setToken($_SESSION['token'], $_SESSION['secret']);
        $resourceUrl = "$apiUrl/customers/create";
        $customerData = json_encode(array(
            'firstname'           => 'demofirstname',
            'lastname'            => 'demolastname',
            'email_address'       => 'demo@gmail.com',
            'password'            => 'demo1234',
            'confirmation'        => 'demo1234',

        ));
        $headers = array('Content-Type' => 'application/json');
        $oauthClient->fetch($resourceUrl, $customerData, OAUTH_HTTP_METHOD_POST, $headers);
        print_r($oauthClient->getLastResponseInfo());
    }
} catch (OAuthException $e) {
    print_r($e);
}
?> 
```

我收到此错误

> OAuthException：第 47 行调用堆栈#TimeMemoryFunctionLocation 10.0010386016{main}( ) 中的 C:\wamp\www\magento\WebServices\newcustomer1.php 中的无效身份验证/错误请求（获得 405，预期 HTTP/1.1 20X 或重定向）。 .\newcustomer1.php:0 20.0017391216OAuth->fetch()..\newcustomer1.php:47)

我是 Oauth 和 PHP 的新手。如果有人可以提供帮助，我会很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T13:09:19.667

在第 36 行附近：

```
 $resourceUrl = "$apiUrl/customers/create"; 
```

去掉`create`最后的。现在是这样：

```
 $resourceUrl = "$apiUrl/customers/"; 
```

您已经必须`OAUTH_HTTP_METHOD_POST`为 REST 指定此动词。所以生成的资源 url 应该是：`http://localhost/magento/api/rest/customers/`

您收到的错误`HTTP 405 Method Not Allowed`意味着您的端点不允许`POST`或不知道它。在你的情况下，是后者。

在此处阅读有关资源端点的更多信息：http: [//www.magentocommerce.com/api/rest/Resources/resources.html](http://www.magentocommerce.com/api/rest/Resources/resources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-06T05:11:27.830

官方的 magento rest api 只允许您创建具有管理员权限的客户。使用管理员权限来做到这一点，或者只是为来宾权限实现一个自定义权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T13:06:54.153

我编写的这个**自定义 API就像轻而易举。**您需要从 Magento 管理面板创建一个 SOAP 用户，并在以下代码中添加 SOAP 用户和数据库凭据以使其工作。

```
require_once('../app/Mage.php' );
    $dbhost = 'localhost';
    $dbUsername = 'root';
    $dbPassword = 'password';
    $dbName = 'magento';
    $soapUsername = 'soapuser';
    $soapPassword = 'password'; 
    Mage::app("default");
    $store = Mage::app()->getStore();
    $storeId = $store->getId();
    $websiteId = Mage::app()->getStore()->getWebsiteId();
    $email = $_POST['email'];
    $firstname = $_POST['firstname'];
    $lastname = $_POST['lastname'];
    $password = $_POST['password'];
    $proxy = new SoapClient('http://yourdomain/magento/index.php/api/?wsdl'); // TODO : change url
    $session = $proxy->login($soapUsername, $soapPassword);
    try{
    $result = $proxy->call($session,'customer.create',array(array('email' => "$email", 'firstname' => "$firstname", 'lastname' => "$lastname", 'password' => "$password", 'website_id' => "$websiteId", 'store_id' => "$storeId", 'group_id' => 1)));
    echo json_encode("New Customer created with Id-$result");
    $custId = $result;
    $shoppingCartId = $proxy->call($session, 'cart.create', array(1));
    $customer = array(
        'firstname' => "$firstname",
        'lastname' => "$lastname",
        'email' => "$email",
        'password' => md5("$password"),
        'customer_id' => "$custId",
        'mode' => 'customer',
        'website_id' => "$websiteId", 
        'store_id' => "$storeId",
        'group_id' => 1
    );
    $resultCustomerSet = $proxy->call($session, 'cart_customer.set', array( $shoppingCartId, $customer, $storeId) );
    $db_handle = mysql_connect($dbhost, $dbUsername, $dbPassword) or die(mysql_error());
    $db_found = mysql_select_db($dbName, $db_handle);
    mysql_query("UPDATE `sales_flat_quote` SET `is_active` = '1' WHERE `customer_email` = '$email' ");
    mysql_query("INSERT INTO `wishlist` VALUES('','$custId','0','','$timestamp')");
    }
    catch( Exception $e ) {
     echo json_encode($e->getMessage());
     } 
```

# c# - 代码优先默认日期时间不起作用

> ID：13439893
> 
> 赞同：3
> 
> 时间：2012-11-18T11:59:42.017
> 
> 标签：c#, entity-framework, code-first

我有一个 DateTime 字段，只要将记录输入该表（它基本上是一个 DateCreated 字段），我就想将其设置为默认值。这是我的代码

```
public partial class User
    {
        public User()
        {
            this.DateCreated = DateTime.Now; //set default value
            Roles = new HashSet<Role>();
        }

        public ICollection<Role> Roles { get; set; } //many to many relationship

        public int UserId { get; set; }
        public string FirstName { get; set; }
        public string Surname { get; set; }
        public string Username { get; set; }
        public string Password { get; set; }
        public string City { get; set; }

        //foreign key
        public int CountryId { get; set; }
        //navigation properties
        public virtual Country Country { get; set; }

        //foreign key
        public int LanguageId { get; set; }
        //navigation properties
        public virtual Language Language { get; set; }

        public string EmailAddress { get; set; }
        public long FacebookId { get; set; }
        public DateTime DateCreated { get; set; }
    } }

    public class UserConfiguration : EntityTypeConfiguration<User>
    {
        public UserConfiguration()
        {
            ToTable("Users", schemaName: "Main");

            HasKey(s => s.UserId);

            Property(p => p.FirstName)
                .IsRequired().HasMaxLength(50); //translates to non-nullable     

            Property(p => p.Surname)
                .IsRequired().HasMaxLength(50);

            Property(p => p.Username)
                .IsRequired().HasMaxLength(20);

            Property(p => p.Password)
                .IsRequired().HasMaxLength(20);

            Property(p => p.City)
                .IsOptional().HasMaxLength(50); //not required

            Property(p => p.LanguageId)
                .IsRequired();

            Property(p => p.EmailAddress)
                .IsRequired().HasMaxLength(50);

            Property(p => p.FacebookId)
                .IsOptional();

            Property(p => p.DateCreated) 
                .IsRequired().HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
            //attribute ensures that DateCreated only gets saved to the database when you are adding a 
            //row, not when you are saving
        }
    }

    context.Users.Add(new User
                {
                    FirstName = "Test",
                    Surname = "User",
                    Username = "testuser72",
                    Password = "testuser72",
                    City = "London",
                    CountryId = context.Countries.Single(d => d.CountryName == "United Kingdom").CountryId,
                    LanguageId = context.Languages.Single(d => d.LanguageName == "English").LanguageId,
                    EmailAddress = "testuser@yahoo.co.uk",
                    Roles = new Role[] { context.Roles.Single(r => r.RoleName == "Content Editor"), context.Roles.Single(s => s.RoleName == "User") }
                }); 
```

为什么当我尝试使用上面的代码添加用户时，为什么会出现错误“无法将值 NULL 插入列 'DateCreated'，表 'Main.Users'；列不允许空值。插入失败。'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T13:02:03.723

使用“HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity)”选项，您说您希望它是一个自动递增的列。这不是你想要的。您想要 Computed，它表示该值由数据库自动填充，而不是由您填充。

仅更改此选项并不能解决您的问题。通过将其设置为 Computed，您说您不希望它采用您自己的值，因此在构造函数中设置它是没有意义的。您必须将数据库级别的默认值设置为“GETDATE()”。使用迁移时，将字符串添加到 defaultValueSql 参数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-03-13T23:12:35.257

一旦通过运行`Add-Migration 20170303_example`go to `20170303_example`file 生成迁移，然后

例如，查找 DateTime 列：

```
CreatedDate = c.DateTime(nullable: false) 
```

并将其更新为：

```
CreatedDate = c.DateTime(defaultValueSql: "GETDATE()") 
```

最后`Update-Database`在包管理器控制台中运行命令来更新数据库。

# c++ - C++ / 是否允许更改静态数组的大小？

> ID：13439898
> 
> 赞同：2
> 
> 时间：2012-11-18T12:00:19.427
> 
> 标签：c++, arrays, static-array

根据[静态数组与 C++ 中的动态数组中](https://stackoverflow.com/questions/2672085/c-static-array-vs-dynamic-array)的正确答案，静态数组具有固定大小。

但是，这编译并运行得很好：

```
int main(int argc, char** argv) {

int myArray[2];

myArray[0] = 0;
myArray[1] = 1;

cout<<myArray[0]<<endl;
cout<<myArray[1]<<endl;

myArray[4];

myArray[2] = 2;
myArray[3] = 3;

cout<<myArray[2]<<endl;
cout<<myArray[3]<<endl;

return 0;
} 
```

这是否意味着可以调整静态数组的大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-18T12:02:02.057

不，地狱里没有机会。您所做的只是在其范围之外非法访问它。这恰好不会为您抛出错误这一事实完全无关紧要。这是彻底的UB。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-18T12:08:35.360

你实际上并没有扩大阵列。让我们详细看看你的代码：

```
int myArray[2];

myArray[0] = 0;
myArray[1] = 1; 
```

您创建了一个包含两个位置的数组，索引从 0 到 1。到目前为止，一切都很好。

```
myArray[4]; 
```

您正在访问数组中的第五个元素（数组中肯定不存在的元素）。这是未定义的行为：任何事情都可能发生。你没有对那个元素做任何事情，但这并不重要。

```
myArray[2] = 2;
myArray[3] = 3; 
```

现在您正在访问元素 3 和 4，并更改它们的值。同样，这是未定义的行为。您正在更改创建数组附近的内存位置，但“仅此而已”。数组保持不变。

实际上，您可以通过以下方式检查数组的大小：

```
std::cout << sizeof( myArray ) / sizeof( int ) << std::endl; 
```

You'll check that the size of the array has not changed. BTW, this trick works in the same function in which the array is declared, as soon you pass it around it decays into a pointer.

In C++, the boundaries of arrays are not checked. You did not receive any error or warning mainly because of that. But again, accessing elements beyond the array limit is undefined behaviour. Undefined behaviour means that it is an error that may be won't show up immediately (something that is apparently good, but is actually not). Even the program can apparently end without problems.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-18T12:02:33.210

首先，这不是一个静态数组，它是一个在*自动存储*中分配的数组。

接下来，

```
myArray[4]; 
```

不是新声明，它是从先前声明的 2 元素数组的元素 #4 中丢弃的读取 - 未定义的行为。

接下来的作业

```
myArray[2] = 2;
myArray[3] = 3; 
```

写入未分配给程序的内存 - 也是未定义的行为。

# haskell - 获取二叉树并按顺序打印出其值的函数

> ID：13439902
> 
> 赞同：1
> 
> 时间：2012-11-18T12:00:58.697
> 
> 标签：haskell

我目前正在编写一个函数来获取二叉树并以正确的顺序（按横向顺序）打印出它的值。我遇到的问题是，当我调用该函数时，我一直收到一个非详尽的模式错误

```
 --k is the key and d is the value
 -- l is left tree and r is right tree
treeprint (Node l k d r)      =  treeprint l  ++ show k ++ show d ++ treeprint r 
treeprint Nil="" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T15:37:26.577

你*似乎*已经解决了你的问题，除了你需要一些括号和空格。

## 您的（当前）版本

我假设你正在使用

```
data Tree k d = Nil | Node (Tree k d) k d (Tree k d) 
```

虽然你没说。我将定义一两个示例树：

```
example1, example2 :: Tree Int String
example1 = Node (Node Nil 4 "Hello" Nil) 7 "there" (Node Nil 21 "hi" Nil)
example2 = Node example1 34 "well" (Node Nil 55 "This" (Node (Node Nil 73 "one's" Nil) 102 "much" (Node Nil 132 "bigger" Nil))) 
```

你的功能

```
treeprint (Node l k d r) =  treeprint l  ++ show k ++ show d ++ treeprint r 
treeprint Nil = "" 
```

编译正常，但因为没有空格或括号，输出令人困惑：

```
*Main> putStrLn $ treeprint example1
4"Hello"7"there"21"hi"
*Main> putStrLn $ treeprint example2
4"Hello"7"there"21"hi"34"well"55"This"73"one's"102"much"132"bigger" 
```

它是有序的，但被压在一起，树状结构消失了。

## 更多括号，更多空格，更清晰

让我们用每棵树周围的括号和空格来重写它：

```
tree_print (Node l k d r) = " (" ++ treeprint l  ++ show k ++ ":" ++ show d ++ treeprint r ++ ") "
tree_print Nil = "" 
```

所以现在更清楚了：

```
*Main> putStrLn $ tree_print example1
 ( (4:"Hello") 7:"there" (21:"hi") ) 
*Main> putStrLn $ tree_print example2
 ( ( (4:"Hello") 7:"there" (21:"hi") ) 34:"well" (55:"This" ( (73:"one's") 102:"much" (132:"bigger") ) ) ) 
```

## 压平树并获得更多括号！

也许您不想要括号，因为按顺序打印是为了使树变平。你可以只保留空间`:`和它会工作。或者，定义

```
toList :: Tree k d -> [(k,d)]
toList Nil = []
toList (Node t1 k d t2) = toList t1 ++ (k,d):toList t2 
```

这意味着您可以将`Show`实例用于列表：

```
*Main> toList example1
[(4,"Hello"),(7,"there"),(21,"hi")]
*Main> toList example2
[(4,"Hello"),(7,"there"),(21,"hi"),(34,"well"),(55,"This"),(73,"one's"),(102,"much"),(132,"bigger")] 
```

## 更漂亮

这是一种使用漂亮树库中的 a 打印树`Data.Tree.Pretty`的[方法](http://hackage.haskell.org/package/pretty-tree)。

我将不得不做一些导入：

```
import qualified Data.Tree as T
import Data.Tree.Pretty 
```

我已经导入`Data.Tree`了qualified，因为它还定义了一个数据构造函数`Node`。这意味着`T.Node`当我指的是导入的树时，我会使用它，但`Node`我指的是你的树。

它使用玫瑰树（每个节点可以有任意数量的子树）：

```
data Tree a = Node {
        rootLabel :: a,         -- ^ label value
        subForest :: Forest a   -- ^ zero or more child trees
    } 
```

并定义`drawVerticalTree :: Tree String -> String`我将使用哪个。我们需要做的就是将您的树转换为这棵树，我们将开展业务：

```
toTree :: (Show k,Show d) => Tree k d -> T.Tree String
toTree Nil = T.Node "-" []
toTree (Node t1 k d t2) = T.Node (show k ++ ":" ++ show d) [toTree t1,toTree t2] 
```

现在让我们显示（制作一个字符串）并打印（在 IO monad 中输出）：

```
showtree :: (Show k, Show d) => Tree k d -> String
showtree = drawVerticalTree.toTree

printtree :: (Show k, Show d) => Tree k d -> IO ()
printtree = putStrLn.('\n':).showtree 
```

这给出了很好的输出：

```
*Main> printtree example1

    7:"there"     
        |         
     ---------    
    /         \   
4:"Hello"  21:"hi"
    |         |   
    --        --  
   /  \      /  \ 
   -  -      -  - 
```

并且相当优雅地处理稍微大一点的例子：

```
*Main> printtree example2

                   34:"well"                   
                       |                       
         ------------------------              
        /                        \             
    7:"there"                55:"This"         
        |                        |             
     ---------       -------------             
    /         \     /             \            
4:"Hello"  21:"hi"  -         102:"much"       
    |         |                   |            
    --        --            ------------       
   /  \      /  \          /            \      
   -  -      -  -      73:"one's"  132:"bigger"
                           |            |      
                           --           --     
                          /  \         /  \    
                          -  -         -  - 
```

# objective-c - 目标C：下载线程不影响UI，甚至可能吗？

> ID：13439904
> 
> 赞同：1
> 
> 时间：2012-11-18T12:01:08.783
> 
> 标签：objective-c, grand-central-dispatch, cs193p

我正在通过 ItunesU 上的斯坦福课程，他们说下载内容的线程不应该对 UI 做任何事情，这应该只发生在主线程上。

好吧，在我的示例中，我正在从 Flicker 下载一张图片，并且我想将这张图片（通过 segue）设置在`UIScrollView`. 因此，当我在“侧面”线程中下载这张图片时，我正在设置图像的图像属性`UIScrollview`等。但这显然不起作用，因为我还不知道图像大小，我也不知道对该图像对象的引用尚未正确设置？

那你怎么处理呢？我希望我很清楚..这是我的例子：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(NSIndexPath *)sender{
NSDictionary *selectedPhoto = [self.photos objectAtIndex:sender.row];

    [self.defaults addPhotoToRecentlyViewed:selectedPhoto];
    [self.defaults saveDefaults];

    PhotoViewer *photoViewer = segue.destinationViewController;

    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleGray];
    photoViewer.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]initWithCustomView:spinner];
    [spinner startAnimating];

    dispatch_queue_t photoDownload = dispatch_queue_create("photoviewever", nil);

    dispatch_async(photoDownload, ^{        
        NSData *data = [NSData dataWithContentsOfURL:[FlickrFetcher urlForPhoto:selectedPhoto format:FlickrPhotoFormatLarge]];
        UIImage *image = [UIImage imageWithData:data];
        photoViewer.image = image;

        dispatch_async(dispatch_get_main_queue(), ^{

            photoViewer.title = [selectedPhoto objectForKey:FLICKR_PHOTO_TITLE];
            photoViewer.navigationItem.rightBarButtonItem = nil;
        });
    });
} 
```

和我的照片查看器：

```
#import "PhotoViewer.h"

@interface PhotoViewer ()

@property (nonatomic, strong) IBOutlet UIScrollView *scrollView;
@property (nonatomic, strong) IBOutlet UIImageView *imageView;

@end

@implementation PhotoViewer

@synthesize scrollView = _scrollView;
@synthesize imageView = _imageView;
@synthesize image = _image;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.scrollView.delegate = self;
    [self setupImage];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView{
    return self.imageView;
}

- (void)setupImage{
    self.imageView.image = self.image;
    self.imageView.frame = CGRectMake(0, 0, self.image.size.width, self.image.size.height);
    self.scrollView.contentSize = self.image.size;
    [self.imageView setNeedsDisplay];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:10:14.950

你应该移动这一行：

```
 photoViewer.image = image; 
```

进入你分派回主线程的“完成”块。PhotoViewer 似乎是一个视图控制器，因此它受制于与其他 UI 相同的“仅主线程”规则。此外，您似乎需要`-setupImage`从该主线程“完成”块再次调用。（否则，图像将永远不会被推送到图像视图中，如您所述。）

同样在 中`-setupImage`，您想`self.image`在寻址到它之前检查它是否返回一个非零值。根据您使用的编译器，调用返回结构的Objective C 方法的行为是“未定义的”（即self.image.size 返回一个CGSize 结构）。（尽管在最近的编译器中，它[返回一个零填充结构。](http://www.sealiesoftware.com/blog/archive/2012/2/29/objc_explain_return_value_of_message_to_nil.html)）

# c++ - 错误：声明冲突 - 指针不能是 int 吗？

> ID：13439914
> 
> 赞同：0
> 
> 时间：2012-11-18T12:02:52.190
> 
> 标签：c++, compiler-errors, g++

我正在尝试编译一个库，运行时`make`出现以下许多错误：

```
error: conflicting declaration ‘int x’
error: ‘x’ has a previous declaration as ‘Text* x’ 
```

这是代码：

```
.
.
.
class Text;
class Code {

    private:
            std::vector<std::string> *tokens;
            std::vector<std::string> *compounds;
            std::vector<std::string> *compound_xml;
            std::vector<std::string> *compound_xml_action;
            void set_helper(Text *x, int a, int b, int c, std::string field, std::string value);
            std::string itoa(int x);

    public:
            Code();
            ~Code();

            int analyse_code(Text *x, std::string c, int x, int y, int z);
            int print(Text *x, std::string c, int x, int y, int z);
            int is_class(Text *x, std::string c, int x, int y, int z);
            int is_class2(Text *x, std::string c, int x, int y, int z);
            int not_class(Text *x, std::string c, int x, int y, int z);

 .
 .
 . 
```

所以在`analyse_code`函数\方法中，我应该转换`int x`为`int a`还是`int wtv`其他原因导致错误？

由于该库的作者在许多功能中使用过`Text* x`，`int x`我想也许他知道他在做什么并且指针可以是`int`，或者我错误地认为他知道他在做什么？

无关：库是Adso，中文文本分析引擎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:07:59.637

您在声明中有两个名为“x”的参数，如下所示：

```
int not_class(Text *x, std::string c, int x, int y, int z); 
```

将其中一个命名为其他名称。例如：

```
int not_class(Text *txt, std::string c, int x, int y, int z); 
```

作者不是很好，所以也要小心其他错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T12:21:55.147

问题不仅存在于所有私有函数中，`analyse_code`而且存在于所有私有函数中。如果你有源代码（.c 文件），我也会在那里检查。

无论如何，您应该将其更改`Text *x`为其他任何内容，例如`Text *text`

# iphone - iPhone加速度计方向

> ID：13439915
> 
> 赞同：0
> 
> 时间：2012-11-18T12:02:57.360
> 
> 标签：iphone, accelerometer, direction

我正在开发一个应用程序，iPhone 在移动时会播放不同的声音（剑）。我想知道 iPhone 何时向左、向右、向上或向下移动（剑移动）。我该如何实施？我正在测试加速度计并编写了这段代码，但如果向左或向右移动它会返回相同的值。我怎么知道 iPhone 朝哪个方向移动？

代码：

```
- (void)accelerometer:(UIAccelerometer *)accelerometer
        didAccelerate:(UIAcceleration *)acceleration
{
    double const kThreshold = 1.0;

    if (fabsf(acceleration.x) > kThreshold) {
        NSLog(@"X+");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:09:33.617

左右都使用acceleration.x

我不确定哪个是负x，另一个是正x。

向上/向下和向后/向前相同。

它们都使用相同的轴（x、y 或 z），但一个方向是正变化，另一个是负变化。

通过使用 fabsf，您正在消除运动的负面影响。

你需要类似...

```
if (acceleration.x > kThreshold) {
    NSLog(@"X+");
} else if (acceleration.x < kThreshold * -1) {
    NSLog(@"X-");
} 
```

或其他东西。

# javascript - 使用 RadAjaxPanel 时绑定特定的 Javascript 函数

> ID：13439916
> 
> 赞同：0
> 
> 时间：2012-11-18T12:02:58.957
> 
> 标签：javascript, c#, jquery, .net

我有这个用于插入行字段的 asp.net 表行。现在你可以看到如果我点击添加陪同人员将添加一个新行。我的问题出在 BirthCountry 字段上，因为我为此使用了 javascript 插件，而我只能使用 ID 字段绑定插件。

插件的语法是

```
var as = new bsn.AutoSuggest("ContentPlaceHolderDefault_contentMain_newVisaRegistrationID_txtCountry", country); 
```

每次单击“添加陪同人员”时，如何实现特定国家/地区字段将绑定或加载自动建议初始化脚本？

这是屏幕截图。

![在此处输入图像描述](../Images/a98226416808b16305d9565077831214.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T21:47:39.497

您可以处理 ajax 完成，然后您可以使用 class="birthCountry" 将事件附加到每个元素，并将它们设置为自动完成。在你的情况下是这样的：

```
ajaxcomplete: function(){
   $.each($(".birthCountry"),function(key,value){
      var as = new bsn.AutoSuggest($(value).attr("id"), country);  
   });
}; 
```

# javascript - 如何使用 JavaScript 在服务器上写入文件？

> ID：13439923
> 
> 赞同：1
> 
> 时间：2012-11-18T12:03:36.460
> 
> 标签：javascript

环境：网络，每个客户端都连接到服务器。互联网访问被禁用。服务器不能运行服务器端脚本语言或类似的东西，它只能用于托管文件。[你知道，学校服务器。]
上下文：一个聊天，它只显示一个页面 ( `chat.html`)，人们编辑该页面以写一条消息。简化代码：

```
<meta http-equiv="refresh" content="1">
<iframe src="chat.html"> 
```

问题：编辑可能会覆盖先前的编辑。
附加通知：客户端（理论上）不允许运行外部程序。

我想到的解决方案如下：制作一个`<form>`，一旦你发送消息，编辑`chat.html`，附加消息并关闭文件。问题是我不知道如何打开文件。另外，我不能使用 jQuery 等库，因为计算机是“关闭的”（无法访问互联网，也无法从 USB 驱动器下载文件）。
到目前为止我尝试了什么：谷歌搜索了一段时间，但没有打开文件的解决方案。*SO*也是如此：由于安全问题，JS 无法访问*本地文件，但没有访问服务器上的文件。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-18T12:06:52.677

你不能。客户端 Javascript 无法编辑服务器文件。或与此相关的任何文件。如果您想在服务器上存储文件，您将需要任何类型的服务端脚本。

添加像 JQuery 这样的库也无济于事。他们只是 Javascript 的“帮手”，但不能做任何你单独使用 Javascript 做不到的事情。

# node.js - nodejs - req.body 未定义

> ID：13439925
> 
> 赞同：4
> 
> 时间：2012-11-18T12:03:47.897
> 
> 标签：node.js, express

我想将一些数据发布到服务器。问题是，服务器似乎无法接收数据。

所以我的帖子数据是这样的：

```
name=hello&email=there&message=sometext 
```

我的服务器代码是这样的：

```
var url  = require('url'),
    express = require('express'),
    http=require('http'),
    path = require('path'),
    nodemailer = require('nodemailer');

var app = express();
var server = http.createServer(app);

app.engine('.html', require('ejs').__express);
app.set('views', __dirname + '/views');
app.set('view engine', 'html');
app.use(express.static(path.join(__dirname, 'public')));

app.get('/', function(req, res){
    res.render('home');
});

app.use(express.bodyParser());

app.post('/', function(req, response){

    console.log(req.body);
    // console.log(request.body.name);

});

server.listen(4000);
console.log('server running ' + 'now ' + Date.now()); 
```

运行时`console.log(reg.body)`，终端输出为“未定义”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-29T22:08:39.683

默认情况下，所有查询字符串输出都会被解析`app.use(express.bodyParser());`..解决问题的简单方法是尝试记录 `req.query`，例如

```
console.log(req.query); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-16T05:57:07.940

移动 app.use(express.bodyParser())); 领先于 app.use(express.static(path.join(__dirname, 'public')));

# exchangewebservices - 更新 EmailMessage 后邮件正文发生变化

> ID：13439926
> 
> 赞同：1
> 
> 时间：2012-11-18T12:03:54.503
> 
> 标签：exchangewebservices, ewsjavaapi

我的目标是加载一封电子邮件，如果是新邮件，则将其标记为已读。

所以这就是我正在做的事情：

```
 EmailMessage email=EmailMessage.bind(service,itemId);
        email.load();
        email.setSubject(GeneralUtils.replaceSpecialCharacters(email.getSubject()));
        email.setBody(MessageBody.getMessageBodyFromText(GeneralUtils.replaceSpecialCharacters(email.getBody().toString())));
        if(!email.getIsRead()){ 
          email.setIsRead(true);
          email.update(ConflictResolutionMode.AutoResolve);
        } 
```

ISSUE：第一次阅读邮件正文时（在将邮件标记为已读之前）我可以正确阅读邮件正文，如下所示：

```
This is message body 
```

但在将邮件标记为已读并更新邮件后，再次尝试加载此邮件时，邮件正文加载如下：

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
This is message body
</body>
</html> 
```

请告知我为什么会出现这种行为，以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:19:44.340

我通过不设置处理后的主体来修复它，我**删除**了以下行，它工作正常：

```
email.setBody(MessageBody.getMessageBodyFromText(GeneralUtils.replaceSpecialCharacters(email.getBody().toString()))); 
```

# android - 为什么我收到错误“找不到 MyLibrarry.apk！”

> ID：13439927
> 
> 赞同：0
> 
> 时间：2012-11-18T12:04:03.120
> 
> 标签：android, eclipse, apk, android-library, library-project

我有一个引用 project 的 android 项目`MyLibrary`。我已经检查`Is Library`了项目`MyLibrary`并没有错误地构建它。

我已在 Projects 选项卡`MyLibrary`中`Main Project`的 Properties->android->Library and Java Build Path 中添加。我可以完全构建`Main Project`。

![在此处输入图像描述](../Images/570b364860ed071563375543fa2a6415.png)

![在此处输入图像描述](../Images/d902a14df478b35a00a245334a70dc0e.png)

但是当我启动`Main Project`我得到这个错误：

```
[2012-11-18 15:18:08 - MyLibrary] Could not find MyLibrary.apk! 
```

我已经清理了项目并研究了以下链接，但我仍然有这个错误。

[找不到 Library.apk！](https://stackoverflow.com/questions/6337673/could-not-find-library-apk)

[Android Eclipse - 找不到 *.apk](https://stackoverflow.com/questions/4778113/android-eclipse-could-not-find-apk)

[找不到 ****.apk + android](https://stackoverflow.com/questions/5273129/could-not-find-apk-android)

为什么以及如何解决它？

我应该提到，当我打开 Properties->android->Library 时，`Main Project`我看到插入的库有一个红十字。

是否与图片中引用路径中的斜杠`/`和反斜杠有关？`\`

![在此处输入图像描述](../Images/d0ef4e8b465da8fca4dabb14e21d9a51.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T06:26:24.057

感谢约克。位于`Main Project`驱动器 D:... 并`MyLibrary`位于 C:.... 我放在`MyLibrary`文件夹中`Main Project`，问题解决了。

# javascript - phonegap 结果集长度上的 SQLite 数据库每次都会增加

> ID：13439929
> 
> 赞同：2
> 
> 时间：2012-11-18T12:04:43.923
> 
> 标签：javascript, android, sqlite, cordova

我正在使用 phonegap 开发一个应用程序，并且我正在使用数据库作为 sqlite。我使用以下命令创建了一个表：

```
 var dbb;
   var shortName = 'Vaccine1';
   var version = '2.0';
   var displayName = 'vaccine';
   var maxSize = 100000;
dbb = window.openDatabase(shortName, version, displayName,maxSize); 
```

并使用此函数插入​​值..

```
function AddDBvalues()
{

 dbb.transaction(function(tx){
//tx.executeSql( 'DROP TABLE IF EXISTS Vaccin',nullHandler,nullHandler); 
tx.executeSql( 'CREATE TABLE IF NOT EXISTS Vaccin(Vday INTEGER NOT NULL,VName TEXT NOT NULL, CCountryid INTEGER NOT NULL , Sex TEXT NOT NULL)', [],nullHandler,errorHandler);},errorHandler,successCallBack);
dbb.transaction(function(transaction) {transaction.executeSql('INSERT INTO Vaccin(Vday,VName,CCountryid,Sex) VALUES (?,?,?,?)',["0","BCG","91","both"], nullHandler,errorHandler);});
dbb.transaction(function(transaction) {transaction.executeSql('INSERT INTO Vaccin(Vday,VName,CCountryid,Sex) VALUES (?,?,?,?)',["0","OPV dose 1 of 5","91","both"], nullHandler,errorHandler);});
dbb.transaction(function(transaction) {transaction.executeSql('INSERT INTO Vaccin(Vday,VName,CCountryid,Sex) VALUES (?,?,?,?)',["1","Hepatites B dose 1 of 2","91","both"], nullHandler,errorHandler);});
dbb.transaction(function(transaction) {transaction.executeSql('INSERT INTO Vaccin(Vday,VName,CCountryid,Sex) VALUES (?,?,?,?)',["42","DPT dose 1 of 3","91","both"], nullHandler,errorHandler);});
dbb.transaction(function(transaction) {transaction.executeSql('INSERT INTO Vaccin(Vday,VName,CCountryid,Sex) VALUES (?,?,?,?)',["42","OPV dose 2 of 5","91","both"], nullHandler,errorHandler);});
dbb.transaction(function(transaction) {transaction.executeSql('INSERT INTO Vaccin(Vday,VName,CCountryid,Sex) VALUES (?,?,?,?)',["70","DPT dose 2 of 3","91","both"], nullHandler,errorHandler);});
} 
```

并使用此功能从数据库中获取价值..

```
function ShowValue()
{
 var cnn = sessionStorage.getItem('cid');//getting from session 
  var cn=parseInt(cnn);
  alert (cn); //always show correct value
dbb.transaction(
 function (transaction) {
transaction.executeSql("SELECT * from Vaccin WHERE CCountryid='"+cn+"';",[],     dataHandler, errorHandler);});
function dataHandler(transaction, results){
      alert("first method" + results.rows.length);
    for (var i=0; i<results.rows.length; i++) {
      ...... }
}} 
```

我得到一个意外的错误是结果集的长度每次都会增加意味着如果第一次运行应用程序它显示正确的值，当我再次运行它时它只显示结果集的长度 = results.rows.length+results.rows.length意味着双倍等等....每次。

如果有人知道出了什么问题，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T13:18:30.773

每次运行应用程序时都会调用 AddDBValues 吗？IF NOT EXISTS 对插入语句没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T13:34:28.333

数据库在运行之间是否持久？如果是这样，那么数据会增加一倍，因为不是您要删除表格。在您`AddDBvalues()`的功能中，该`DROP ...`命令被注释掉。

```
//tx.executeSql( 'DROP TABLE IF EXISTS Vaccin',nullHandler,nullHandler); 
```

不相关，但您也可能存在 SQL 注入漏洞。该变量`cn`应该作为绑定变量传入，而不是简单地作为字符串添加到 SQL 中。

```
transaction.executeSql("SELECT * from Vaccin WHERE CCountryid='"+cn+"';",[],     dataHandler, errorHandler);}); 
```

# jquery - 如何从多项选择中获取最后一个取消选择的项目

> ID：13439930
> 
> 赞同：0
> 
> 时间：2012-11-18T12:04:58.090
> 
> 标签：jquery, html, select

我有 2 个选择元素，我使用第一个选择的选定选项值设置第二个多重选择的项目。

我将值绑定到多个类型的第二个选择。我正在隐藏中跟踪所选项目的值，因为如果用户选择第一个选择元素的另一个选项，则第二个选择绑定不同的选项值。

1- 选择具有类别组值的元素

2- 具有类别值的多选元素

例如第一个选择是类别组，当用户选择类别组时，我将该组的类别绑定到多个选择元素中。假设用户选择了 ID 为 1、4、5、7 的组。我将它们设置为隐藏字段中的逗号分隔值。如果用户选择另一个类别组，我将该组的类别绑定到多个选择元素。假设用户选择了类别 11、15、18。当前隐藏值为“1,4,5,7,11,15,18”。但随后从中取消选择 15。我必须将隐藏字段的值设置为：“1,4,5,7,11,18”。但我无法检测到哪个选项被取消选择。有没有办法以任何方式检测它？

也许我应该使用更好的算法。非常感谢任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T14:43:20.080

我将多选框更改为复选框列表，这样我可以单独跟踪每个项目的选择/取消选择更改。然后，如果未选中，则从隐藏值中删除，或者如果选中，则将值添加到列表中。这是做我正在做的事情的更好方法。

# php - Fuelphp Profile 类似逻辑或示例

> ID：13439934
> 
> 赞同：0
> 
> 时间：2012-11-18T12:05:23.623
> 
> 标签：php, ajax, logic, fuelphp, social-media-like

所以我在这部分有点迷失了。在我的网站上，我希望用户能够喜欢个人资料页面。

所以我的逻辑是这样的。我有一个名为 的数据库表`user_likes`，它包含 3 行，`id, user_id, liked_by`.

实际的个人资料页面上有一个类似的按钮，上面有一个类似的类。当用户单击它时，将数据插入`user likes table`并使用 ajax 将按钮文本更改为不一样，并将类更改为不一样。这就是我卡住的部分。

所以个人资料有一个`has many relation likes`，我可以计算收到的喜欢，但我被困在那部分如何在页面刷新后保持按钮不一样。

因为我的逻辑是这样的（但它失败了）：单击按钮，使用 ajax 插入数据，使用 ajax 更改按钮，通过 id 获取喜欢的内容，如果这等于登录的用户 id，则保持按钮不喜欢。

但由于它返回一个数组列表，我不能这样做。

所以我不希望任何人为我编写代码，如果它不是一个很大的要求，我只想给它一个提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T14:10:02.880

我看到你在FuelPHP论坛上发布了同样的问题，所以在这里我将尝试给你另一个解决方案。

为什么你的关系需要“id、user_id、like_by”？我认为你可以改进你的数据库修改一点你的表。

阅读您的问题，我认为您有这样的结构：

```
// USER TABLE
id
username
... something more 
```

如果您创建一个名为“LIKE”的表，您将遇到这种情况：

```
// LIKE
id
created_at
modified_at
... something more 
```

因此，现在您可以使用名为“users_likes”的表创建多对多关系：

```
// USERS_LIKES 
profile_id   // it wil be related to the user_id, is the user's profile being liked
liker_id     // it will be the user_id of the user that likes the profile 
```

因此，如果您想检索点赞数，您将拥有当前用户模型或配置文件用户模型中的所有信息。

# python - python中的execlp()

> ID：13439938
> 
> 赞同：7
> 
> 时间：2012-11-18T12:06:18.500
> 
> 标签：python

我正在通过自学阅读 Mark Luze，Oreilly 的 Programming python 第 4 版。有一个关于如何分叉子进程的示例，我不太明白：

```
os.execlp('python', 'python', 'child.py', #other args#) 
```

在交互式 shell（如 bash）中，我知道我可以输入`python child.py #args#`要求 python 解释器使用 args 运行 child.py。为什么 execlp() 函数中有两个“python”？如果我在函数中只放一个 python，我会得到一个错误，抱怨找不到文件或目录，这是 child.py 的第一个参数

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-18T12:13:16.240

第一个参数是要执行的程序（在 上找到`PATH`）。其余的是`sys.argv`程序的参数。

第*一个*这样的参数是用于调用它的程序名称，以及在 OS 进程列表中使用的显示值。它是`sys.argv[0]`python 脚本中的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-18T12:12:41.360

首先，`execlp`今天很少使用。在大多数情况下，您会使用[subprocess](http://docs.python.org/3/library/subprocess.html)模块，如下所示：

```
subprocess.call(['python', 'child.py']) 
```

的第一个参数[`execlp`](http://linux.die.net/man/3/execlp)是您要执行的文件。

后面的参数形成该程序的参数数组（[`sys.argv`](http://docs.python.org/3/library/sys.html#sys.argv)在 Python 中）。第一个参数是调用程序的名称。例如，`'-c'`如果程序正在使用该`-c`选项运行，Python 会将名称设置为。同样，[grep](http://linux.die.net/man/1/grep)的行为取决于第一个参数，因此用户可以执行`rgrep`来暗示`grep -r`.

# c# - 我应该在 try-catch 语句中包含哪些类型的代码块？

> ID：13439941
> 
> 赞同：6
> 
> 时间：2012-11-18T12:06:33.177
> 
> 标签：c#, .net, exception, exception-handling, try-catch

我现在和过去已经深入阅读并讨论了以下问题和文章以及许多其他问题和文章：

[何时使用 try/catch 块？](https://stackoverflow.com/questions/1722964/when-to-use-try-catch-blocks)

[主要方法代码完全在 try/catch 中：这是不好的做法吗？](https://stackoverflow.com/questions/4827628/main-method-code-entirely-inside-try-catch-is-it-bad-practice)

[何时使用 Try Catch 块](https://stackoverflow.com/questions/5199146/when-to-use-try-catch-blocks)

我将使这篇文章成为我组织中异常处理的编码标准！非常好的一个，但没有回答我： http: [//www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)

[try catch 块创建干净代码的最佳实践是什么？](https://stackoverflow.com/questions/5632881/what-is-the-best-practice-for-try-catch-blocks-to-create-clean-code)

[Java 或 C# 中异常管理的最佳实践](https://stackoverflow.com/questions/409563/best-practices-for-exception-management-in-java-or-c-sharp) 这里：我不喜欢这种说法 :( 您不应该尝试在每个可能的地方捕获每个异常。

[是否应该组合方法中的多个 Try/Catch 块](https://stackoverflow.com/questions/4177404/should-multiple-try-catch-blocks-in-a-method-be-combined)

当我需要决定用 try-catch 语句包含一些代码块时，我遇到了一个问题，我知道应该包含的代码是错误代码，并且我必须检查我可以检查的内容，但是例如：我需要在某个文本文件中写一行，我应该检查文件是否存在，如果我有写权限，我应该检查磁盘上是否有空间，或者磁盘是可写的，如果我检查了空间，如果在我写文件时发生了什么事（其他一些应用程序或线程使用了空间，或者可移动驱动器已被删除？），如果我检查了这些事情并处理了 IOException 和 SecurityException 以及其他潜在的异常，这是一个最佳实践吗？ ，或者我应该只检查而不使用try-catch？

另一个例子：我正在使用EntityFramework访问数据库，访问时可能会联系到数据库，我知道我应该检查连接是否关闭并尝试打开它，但是有很多很多东西可能导致这个语句失败，数据库可能在可移动驱动器上，读取时可能会删除该驱动器，DBMS的服务可能因任何原因停止，不会抛出空间异常，数据库的方案可能会在我尝试执行我的代码后改变****原因，如何防止我的代码失败，我可以检查所有可以检查的内容，然后继续吗？或者我应该使用 try catch 来处理我可以预期的异常，即使我已经检查过它们？

请给我你的答案的参考，而不是一般的答案！

**编辑**

并确保阅读：http: [//msdn.microsoft.com/en-us/library/seyhszts.aspx](http://msdn.microsoft.com/en-us/library/seyhszts.aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T13:28:32.893

好问题！您的链接之一（[丹尼尔·图里尼](http://www.codeproject.com/Articles/9538/Exception-Handling-Best-Practices-in-NET)）是我的最爱之一。当我的想法需要理顺时，我会一次又一次地回到它。

表达我对异常处理态度的一个好方法是：只*处理*你能**处理**的异常。这意味着您永远无法弄清楚如何应对任何可能出现的异常，并在您的代码中实现这一点。有一些“预期的”异常是可以处理的——但是代码对这些异常的响应本身就是一个设计决策。恕我直言，处理这些问题的优先级是不要在应用程序关闭后留下一团糟（或至少退出它所涉及的特定事务） -**不是**让应用程序无论如何都能够继续，因为关闭带有优雅的“我不知道为什么，但是发生了这个异常”通知（到日志/IT 电子邮件/MsgBox，无论如何）在某种程度上是“

这种设计的直接对立面是试图使应用程序成为一种“核世界末日幸存者”的异常处理。 *尝试*...我已经看到通过假设网络文件服务器已关闭来响应 IO 错误的代码，并分支到尝试以某种未设计的方式在 C: 驱动器上工作。以及尝试从 ATable 中选择的代码：如果表不存在，则创建它！！！每次有人写这样的代码，一个小负鼠就会死去。

图里尼说“永远不要吞下例外”。我在想的是对此的扩展：恕我直言，您必须非常小心地让应用程序继续运行，即使是在以已知原因响应已知的、确定类型的异常时：因为即使这构成“吞咽”异常. 做它，但要小心和做好。

因此，在我看来，通用的“任何其他情况”异常处理程序总是有空间的，它通过记录发生的事情的详细信息并关闭应用程序来将决定委托给更高的权力（人类）。

我的2c..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T15:15:23.320

恕我直言：在应用程序的最后一层捕获每个异常，以防止您的应用程序崩溃（在 UI、控制台应用程序的主体或某些服务方法的主体中......等）并在以下情况下处理它您可以或至少记录它，但是在内部层中，仅捕获您刚刚知道的异常以完美处理它们，并抛出或包装那些没有完美处理方式的异常，但是如果您的代码没有明确的界限在层之间（在我的情况下相同），您应该尝试在可能发生的异常情况下处理异常，并尝试以结构良好的方式重置（重写）此应用程序（我们将很快这样做！）！

# sql - 用于权限的 SQL 嵌套集层次结构

> ID：13439942
> 
> 赞同：1
> 
> 时间：2012-11-18T12:06:34.123
> 
> 标签：sql, sql-server-2008, hierarchy, nested-sets

我正在计划一个系统，其中用户将存储在组（例如董事会成员、地区、部门、团队）的嵌套集层次结构中，这将用于确定他们可以看到的数据级别。我需要规划层次结构以包含潜在的数千名用户。

要报告的数据存储在 SQL Server 2008 数据库中，每个适用的记录都与执行该操作（例如，电话）的用户的 ID 相关联

我需要查询数据库以收集适用于单个用户或层次结构中的用户集合的总数（例如，收集 Division X 成员一天内进行的所有呼叫的计数，或者，所有整个公司的电话）。

假设以下查询：

```
 SELECT Count(Id) FROM Calls 
    JOIN
    (
        SELECT Heirarchy.UserId 
        FROM Heirarchy
        {nested set joins}
        WHERE {nested set conditions to get relevant UserIds}
    ) H1
    ON Calls.UserId = H1.UserId 
    WHERE {conditions} 
```

由于层次结构将包含数千个用户，如果顶级组用户（例如，董事会成员）运行上述查询，*所有用户记录*将由子查询返回并匹配。

1）这是为这样一个系统建模的正确方法吗？

2）任何人都可以看到任何问题，如果是，建议改进？

3）任何人都可以提出替代方法来实现上述目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-13T11:34:12.387

这种方法效果很好 - 系统自 13 年 1 月以来一直运行，没有任何问题。

如果有人有替代品，仍然感兴趣

# algorithm - 选择恰好包含 K 个叶子的子树

> ID：13439944
> 
> 赞同：2
> 
> 时间：2012-11-18T12:06:45.653
> 
> 标签：algorithm, tree

我得到一棵`T`有`n`节点和`l`叶子的树。

我必须选择一些包含完全`k (<=l)`叶子的子树。如果我选择节点`t`'祖先'子树，我们不能选择`t`'子树。

例如：

![在此处输入图像描述](../Images/9608a80c2faab38af7beaa5a91c38eb0.png)

这是`T`具有 13 个节点（7 个叶子）的树。

如果我想选择`k = 4`叶子，我可以选择节点 4 和 6（或节点 2 和 5）。这是选择的最小数量。（我们也可以选择节点 6、7、8、9，但这不是最小值）。

如果我想选择`k = 5`叶子，我可以选择节点3，这是选择的最小数量。

我想选择最小数量的子树。我只能找到使用 BFS 和动态编程的算法`O(nk^2)`。`O(nk)`选择这个有更好的解决方案吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T19:19:32.910

实际上，要知道每个子树的叶子数，您只需要遍历每个节点**一次**，因此复杂性应该是`O(nm)`每个`m`节点的平均子节点数，在大多数情况下计算结果为，`O(n)`因为`m`它只是一个常数。为此，您应该：

*   查找树的哪些节点是叶子
*   上树，为每个节点保存其子树中的叶子数

您可以通过从叶子开始并将父母放入队列中来做到这一点。当您`n_i`从队列中弹出一个节点时，将每个子树中包含的叶子数相加，从每个子树开始`n_i`。完成后，标记`n_i`为已访问（因此您不会多次访问，因为每个孩子可以添加一次）

这给出了这样的结果：

```
^
|               f (3)              This node last
|              / \
|            /     \
|          /         \
|        /             \
|       d (2)           e (1)      These nodes second
|      /  \            /
|     /    \          / 
|    a (1)  b (1)    c (1)         These nodes first 
```

步骤是：

```
Find leaves `a`, `b` and `c`.
For each leave, add parent to queue   # queue q = (d, d, e)

Pop d                                 # queue q = (d, e)
Count leaves in subtree: d.leaves = a.leaves + b.leaves
Mark d as visited
Add parent to queue                   # queue q = (d, e, f)

Pop d                                 # queue q = (e, f)
d is visited, do nothing

Pop e                                 # queue q = (f)
Count leaves in subtree: e.leaves = c.leaves
Mark d as visited
Add parent to tree                    # queue q = (f, f)

Pop f                                 # queue q = (f)
Count leaves in subtree: f.leaves = d.leaves + e.leaves
Mark d as visited
Add parent to tree (none)

Pop f                                 # queue q = ()
f is visited, do nothing 
```

您还可以使用将忽略添加两次的节点的智能数据结构。请注意，您不能使用有序集，因为在“较高”节点之前探索“较低”节点非常重要。

在您的情况下，如果队列中的节点超过`k`叶子，您可以消除它们，并返回您发现有`k`叶子的每个节点，这将提供更快的算法。

# c++ - 为什么在进行 int / unsigned int 除法时使用 'divl'

> ID：13439948
> 
> 赞同：2
> 
> 时间：2012-11-18T12:06:55.723
> 
> 标签：c++, c, x86, unsigned-integer

我在 X86 中测试了这段代码。

```
void func()
{
  int a, b;
  unsigned int c, d;
  int ret;

  ret = a / b;  // This line use idivl, expected
  ret = c / d;  // this line use idivl, expected
  ret = a / c;  // this line use divl..., surprised 
  ret = c / a;  // this line use divl..., supriised
  ret = a * c;  // this line use imull, expected
} 
```

我在这里粘贴汇编代码：

```
func:
    pushl   %ebp
    movl    %esp, %ebp
    subl    $36, %esp
    movl    -4(%ebp), %eax
    movl    %eax, %edx
    sarl    $31, %edx
    idivl   -8(%ebp)
    movl    %eax, -20(%ebp)
    movl    -12(%ebp), %eax
    movl    $0, %edx
    divl    -16(%ebp)
    movl    %eax, -20(%ebp)
    movl    -4(%ebp), %eax
    movl    $0, %edx
    divl    -12(%ebp)
    movl    %eax, -20(%ebp)
    movl    -4(%ebp), %eax
    movl    %eax, -36(%ebp)
    movl    -12(%ebp), %eax
    movl    $0, %edx
    divl    -36(%ebp)
    movl    %eax, -20(%ebp)
    movl    -4(%ebp), %eax
    imull   -12(%ebp), %eax
    movl    %eax, -20(%ebp)
    leave
    ret 
```

你能告诉我，为什么 int 和 unsigned int 之间的划分使用 divl 而不是 idivl ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T12:32:32.450

由于 和 的类型`a`具有`c`相同的转换等级，但`a`有符号和`c`无符号，在除法之前`a`转换为和。`unsigned int``a / c``c / a`

因此，编译器会针对这些情况发出无符号除法指令`div`（以及`c / d`，其中两个操作数都是无符号的）。

乘法`a * c`也是无符号乘法。在这种情况下，编译器可以不使用带符号的乘法指令`imull`，因为无论是否使用，截断的结果都是相同的`mull`——`imull`只有标志不同，生成的代码不会测试这些。

# asp.net - 如何在asp.net中将数据库中的文件保存和检索为blob

> ID：13439949
> 
> 赞同：-3
> 
> 时间：2012-11-18T12:07:03.567
> 
> 标签：asp.net

我需要将数据库中的文件另存为二进制文件，以及检索存储为数据库中 blob 的二进制文件的方法。任何人都可以编写代码并告诉我如何将数据库中的文件保存为 blob 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T12:42:29.690

不知道您使用的是哪个 RDBMS，以及您是否使用 C# 或 VB.Net 进行编码，我只能为您指明一个大致的方向。这里有几个链接：

*   [**处理二进制大对象 (BLOB)**](http://www.c-sharpcorner.com/uploadfile/Ashush/working-with-binary-large-objects-blobs/)（使用 ADO.NET 的 C#）
*   [**将 BLOB 值写入数据库**](http://msdn.microsoft.com/en-us/library/4f5s1we0%28v=vs.71%29.aspx)**（使用 ADO.NET 的 VB.Net**）
*   [**使用实体框架将文件保存在数据库中（带有实体框架的**](https://stackoverflow.com/questions/2288163/save-files-in-database-with-entity-framework)C#）

# java - 根据外观从字符串中删除单词

> ID：13439953
> 
> 赞同：2
> 
> 时间：2012-11-18T12:07:28.397
> 
> 标签：java, regex, pattern-matching

在某些情况下，我必须删除字符串中的一个/多个单词。例如，我的字符串是`incabcincdefinc inc. inc`. 为此，我需要同时删除`inc.`和`inc`。即，输出应该是`incabcincdefinc`. 即，`inc`根据以下条件删除所有 s：

```
<space>inc<space>
<space>inc<.>
<space>inc<end string>
<space>inc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:49:12.233

你可能可以摆脱这样的事情：

```
str = str.replaceAll("[ ](?:inc|ltd|corp)\\b\\.?", ""); 
```

方括号仅用于使中间的空格字符更明显，只要保留空格，就可以省略它们。通过断言`\\b`业务实体扩展后有一个单词边界 ( ) 来满足您的条件。这意味着接下来没有字母、数字或下划线（它会捕获您的所有条件）。然后该模式还尝试包含一个文字句点 ( `\\.`)，但不关心是否有非 ( `?`)。一切都替换为空字符串。请注意，在您的第一个条件中，我不匹配并删除空格，因为那会使`SomeCompany inc inc`become `SomeCompanyinc`。

如果要不区分大小写地查找扩展名，则需要使用更长的语法：

```
Pattern pattern = Pattern.compile(
    "[ ](?:inc|ltd|corp)\\b\\.?",
    Pattern.CASE_INSENSITIVE
);
Matcher matcher = pattern.matcher(str);
str = matcher.replaceAll(""); 
```

# c++ - 向量的向量，堆与堆栈 (C++)

> ID：13439954
> 
> 赞同：2
> 
> 时间：2012-11-18T12:07:39.107
> 
> 标签：c++, vector

我想初始化一个包含指向课程指针的向量向量。我宣布了这一点：

```
std::vector<std::vector<Course*> > *CSPlan = 
        new std::vector<std::vector<Course*> >(smsNum); 
```

我想要做的是有一个向量向量，每个内部向量都是一个包含指向 Courses 的指针的向量，我希望 MAIN 向量的大小为`int smsNum`。此外，我希望它在堆上。

我的问题是：

1.  主向量和内部向量是否都分配在堆上？还是只有 MAIN 向量在堆上，它的索引是指向堆栈上其他较小向量的指针？

2.  我声明它的大小`int smsNum`，所以主向量的大小是 10，但是较小的向量呢？它们也有那么大，还是仍然是动态的？

我最终的目标是在堆上有一个向量向量，主向量和子向量都在堆上，只有主向量的大小为 smsNum，其余的都是动态的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-18T12:16:04.200

任何可以增长到用户想要的大小的结构都将在堆上分配。另一方面，内存堆栈用于分配静态分配的变量，程序在编译过程中可以静态控制大小。

因为你可以有这样的循环：

```
for (i = 0; i < your_value; i++) {
    vector.insert(...);
} 
```

考虑`your_value`到从标准输入读取的整数，编译器无法控制向量的大小，即它不知道您可以执行的最大插入量是多少。

为了解决这个问题，结构必须在堆上分配，它可能会增长到操作系统允许的大小——考虑到主内存和交换。作为补充，如果您使用指向向量的指针，您将简单地动态分配一个变量来引用该向量。这**不会**改变向量的内容必须在堆上分配的事实。

您将在您的堆栈中拥有：

*   存储变量“y”地址的变量“x”；

在你的堆里：

*   变量“y”的值，即对向量向量的引用；

*   您的向量向量的内容（由“y”访问，由“x”访问）。

# java - 在 Java 列表中禁用可变性

> ID：13439956
> 
> 赞同：5
> 
> 时间：2012-11-18T12:07:58.177
> 
> 标签：java, list, immutability

在不再需要突变的时间点，将 Java 的 List 接口的对象转换为不可变的等价物会很好。也就是说，客户端可以调用`freeze`使 List 不可变的方法。对我来说直接的好处是线程安全，没有内存开销~~深的~~复制。（**编辑**：如果人们认为所有线程都可以使用一个额外的不可变副本，那么他们是正确的。）

是否有提供此类功能的第三方接口或类？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-18T12:12:52.860

[Collections.unmodifiableList(List list)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#unmodifiableList%28java.util.List%29)怎么样？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-18T12:21:33.130

作为 Guava 库的一部分，有一个[ImmutableList](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html)类。您可以使用该方法从现有`copyOf`的创建一个，例如。`ImmutableList``Iterable`

`List<String> immutableList = ImmutableList.copyOf(list);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-18T12:13:00.593

尝试使用`CopyOnWriteArrayList`.

**CopyOnWriteArrayList**的行为与`ArrayList`该类非常相似，只是在修改列表时，不是修改底层数组，而是创建一个新数组并丢弃旧数组。这意味着当调用者获得一个迭代器（即*copyOnWriteArrayListRef.iterator()*）时，该迭代器在内部保存对底层 CopyOnWriteArrayList 对象数组的引用，该数组是不可变的，因此可以用于遍历而不需要在列表 copyOnWriteArrayListRef 上进行同步或需要在遍历之前克隆（） copyOnWriteArrayListRef 列表（即没有并发修改的风险）并且还提供更好的性能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-18T13:02:09.947

如果客户端仍然有对原始可变列表的引用，则直接使用 of`Collections.unmodifiableList`是不够的。

我将创建一个委托列表实现，它具有对原始可变列表（*委托*）的内部引用，并将**所有**方法调用转发给它。手动编写这样的代码是一个 PITA，但例如 Eclipse 可以为您自动生成它。

然后在调用该`freeze`方法时，我会用 包装原始列表，以`Collections.unmodifiableList`确保所有未来的方法调用都`FreezingList`只能通过不可修改的视图转到原始委托。

为了使事情更安全，但不太灵活，您可以更改以下构造函数，而不是将原始列表传递给它（仍然可以将原始可变列表的引用留给客户端）在内部实例化列表（例如作为`ArrayList`）。

```
public class FreezingList<E> implements List<E> {

    // the original list you delegate to (the delegate)
    private List<E> list;

    private boolean frozen = false;

    public FreezingList(List<E> list) {
        this.list = list;
    }

    public void freeze() {
        if (!frozen) {
            list = Collections.unmodifiableList(list);
            frozen = true;
        }
    }

    // all the delegating methods follow:
    public int size() {
        return list.size();
    }

    public E get(int index) {
        return list.get(index);
    }
    // etc. etc.
} 
```

# javascript - 如何将 URL 的 html 内容加载到 JavaScript 中的变量？

> ID：13439958
> 
> 赞同：-2
> 
> 时间：2012-11-18T12:08:19.667
> 
> 标签：javascript, html, xml

> **可能重复：**
> [Javascript 中的 HTTP GET 请求？](https://stackoverflow.com/questions/247483/http-get-request-in-javascript)

我有一个包含 XML 树的 url。我想读取该 url 内容，将其保存到变量中，提取 XML 树值，并将其绘制在表格中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T12:13:13.773

在 jQuery 中使用 AJAX 查询：

```
$.ajax({
  url: url,
  dataType: 'xml',
  success: function(data) {
     // Data is your xml content which you can work with
  }
}); 
```

# javascript - 导航菜单不显示在移动浏览器上

> ID：13439960
> 
> 赞同：0
> 
> 时间：2012-11-18T12:08:38.773
> 
> 标签：javascript, android

我试图找出当我使用移动设备和 iPad 访问我的页面时我的导航窗口没有显示的原因？

有什么想法可以帮助吗？

[http://egycotravel.com/trips.html](http://egycotravel.com/trips.html)

谢谢

对不起：这个链接有我正在谈论的导航栏，它有橙色背景和白色文本链接。当我在手机上打开这个 URL 时，导航链接没有显示出来……我想知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T00:03:23.940

在您的 style.css 文件中查找并修改此 CSS 代码：

```
ul.topnav li {
    float: left;
    margin: 0;
    padding: 0 4px 0 4px;
    position: relative; /*--Declare X and Y axis base for sub navigation--*/
}
ul.topnav li:hover {
    background:url(images/bg_hover.png) repeat;
}

ul.topnav li a{
    padding: 10px 2px;
    color: #fff;
    display: block;
    text-decoration: none;
    float: left;
    margin-right: 5px;
}
ul.topnav li a:hover{
    color: #3333CC;
    text-decoration: none;
} 
```

# c++ - 在 CUDA 中使用内部类型转换的奇怪错误

> ID：13439963
> 
> 赞同：3
> 
> 时间：2012-11-18T12:09:13.657
> 
> 标签：c++, casting, cuda

我无法弄清楚以下代码之间的区别是什么：

```
int t = __double2int_rd(pos.x/params.cellSize.x*2.0)&1;
if( t ==0) {...} 
```

和

```
if(__double2int_rd(pos.x/params.cellSize.x*2.0)&1 == 0) {...} 
```

第二个选项永远不会返回 true，而第一个选项的行为符合预期。

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:52:15.330

第二个表达式首先计算`(1==0)`其结果始终为假。然后`ANDs`它与函数的结果`__double2int_rd`。

因此，它实际上评估：

`if(__double2int_rd(pos.x/params.cellSize.x*2.0) & 0)`

这总是错误的。

第一个表达式的等价物是：

`if((__double2int_rd(pos.x/params.cellSize.x*2.0) & 1) == 0)`

注意括号。如果您不确定表达式的求值顺序，添加括号是一种很好的编程习惯。

# php - 验证文本框数组

> ID：13439965
> 
> 赞同：-5
> 
> 时间：2012-11-18T12:09:35.660
> 
> 标签：php, arrays, textbox

我试图验证一些具有数组名称的输入框。这次我使用的是 php 中的验证脚本。（[http://www.html-form-guide.com/php-form/php-form-validation.html](http://www.html-form-guide.com/php-form/php-form-validation.html)）

```
< form name="form1" action="page1.php" method="POST"><br/>
<br>
< input type=text name="value[]" /><br/>
< input type="text" name="value[]" /><br/>
< input type="text" name="value[]" /><br/>
<br/>
 < input type="submit" name=""/>
<br/><br/>
< /form> 
```

我阅读了验证脚本，但我无法找到数组的验证，任何人都可以建议它是如何工作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:20:24.220

乍一看，您的验证类不支持值数组。但是，不要绝望，有办法解决这个问题！（一种简单的方法就是放弃该课程，转而使用其他更开放的替代方案）。

您现在有三个选择：

1.  放弃允许数组的代码
2.  重写部分验证类以允许您通过引用传递它的数组
3.  欺骗。

我们将讨论选项 3。有一个鲜为人知的事实，即 _POST 是可读写的，而不仅仅是只读的。这是一个非常非常糟糕的做法，但在这种情况下，它会起作用。您将需要迭代您的数组并为所有这些重新分配新名称......然后对这些名称运行验证。

厚颜无耻的修复，但它允许您不必放弃代码。但是，如果您打算多次使用它，我强烈建议您花 5 分钟时间来实施解决方案 #1 或 #2。

# java - spring MVC控制器如何在ajax请求上绑定到多个模型

> ID：13439976
> 
> 赞同：2
> 
> 时间：2012-11-18T12:11:20.363
> 
> 标签：java, spring, spring-mvc

对我的控制器操作的发布请求来自 ajax，如下所示：

```
$.post("myurl.htm", { view: $("#selView").val(), 
    val1: "value1", val2: "value2"
}); 
```

我有两个模型`Foo`和`Bar`

```
public class Foo {
   public String val1;
   //getter/setters
}

public class Bar {
   public String val2;
   //getters/setters
} 
```

现在，我的控制器操作如下所示：

```
@RequestMapping(value="/myurl.htm", method=RequestMethod.POST)
public ModelAndView doSomething (
    @RequestParam(value="view", required=true) String view, 
    @RequestParam(value="val1", required=false) String val1, 
    @RequestParam(value="val2", required=false) String val2) {
  Foo foo = new Foo();
  Bar bar = new Bar();
  if (view.equalsIgnoreCase("something"))  
     foo.setVal1(val1);
  else if (view.equalsIgnoreCase("somethingelse"))  
     foo.setVal2(val2);

  fooService.doSomeStuffWithDb(foo);
  barService.doSomeStuffWithDb(bar);

} 
```

**问题**

1.  尽管如此，上述所有工作我认为应该有更好的方法来做到这一点......？如果我在我的发布请求中发布了 10 个参数怎么办，我的控制器操作中是否会有 10 个参数？这不会很好地扩展。

2.  那么，有没有一种方法可以让spring自动将参数绑定到模型上相关的getter/setter？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:28:35.153

spring 可以将请求参数作为 Map 注入：

```
@RequestMapping(value="/foo", method=RequestMethod.POST)
public ModelAndView doSomething (@RequestParam Model<String, String> params) {
    params.get("val1");
    params.get("val2");
    // ...
} 
```

使用未经修改的 javascript。这不像`@ModelAttribute`版本那样优雅，但可以很好地扩展很多参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-18T16:24:39.213

如果您将许多变量传递给控制器​​，最好开始使用一个对象来保存这些参数。此对象有时称为数据传输对象 (DTO)。

这是一个例子：

```
@RequestMapping(method = RequestMethod.POST, produces = "text/html")
public String create(@Valid Market market, BindingResult bindingResult, Model uiModel, HttpServletRequest httpServletRequest) {
    if (bindingResult.hasErrors()) {
        return "markets/create";
    }

    // store market

    return "redirect:/markets/" + encodeUrlPathSegment(market.getId().toString(), httpServletRequest);
} 
```

# java - Java swing dispose() 方法

> ID：13439980
> 
> 赞同：-1
> 
> 时间：2012-11-18T12:12:26.710
> 
> 标签：java, swing

我想在java中制作一个简单的文本编辑器（记事本），但我遇到了一个奇怪的错误，如果你打开一个新文件，关闭它，然后去关闭原始文件，关闭按钮不起作用......其他按钮工作......我在 ActionListener 中只有

```
frame.dispose(); 
```

还有另一种方法吗？编辑：`System.exit(0);`

为我工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T12:48:07.530

您可能会将函数*关闭文件*与此处的*关闭应用程序*混淆。当你关闭一个文件时，你只是想清除你的`JTextArea`（从[之前的编辑](https://stackoverflow.com/revisions/ff4e50d3-3138-4b64-abd5-d51c14b064d7/view-source)）：

```
input.setText(""); 
```

你打电话时

```
frame.dispose(); 
```

应用程序中的资源`JFrame`不再可用。这应该在退出应用程序时使用。

# game-engine - 在马蒂引擎+光滑的时间限制后摧毁一个实体

> ID：13439981
> 
> 赞同：-1
> 
> 时间：2012-11-18T12:12:38.303
> 
> 标签：game-engine, slick2d

有没有办法在超过预定义的时间限制后销毁实体。？我想在一艘船的寿命（以秒为单位）超过时摧毁它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T13:46:59.840

好的，我发现了一些东西，我们在 update 方法中作为参数获得的 delta 值是自上次调用 update 方法以来经过的时间（以毫秒为单位）。所以我们可以继续将它添加到变量中，直到达到生命极限。

# asp.net - 保护 IIS 文件夹不被 WebDeploy 删除

> ID：13439989
> 
> 赞同：0
> 
> 时间：2012-11-18T12:13:23.117
> 
> 标签：asp.net, iis, webdeploy

我的网络应用程序上有一个文件夹，用于存储用户上传的内容，即个人资料图片等。

当我使用 WebDeploy 时，有一个“保留额外文件（请勿删除）”选项，勾选后可确保不删除个人资料图片。

我正在寻找一种方法来确保即使没有勾选，某个文件夹也不会被删除。这样做的原因是我不希望其他开发人员将来意外禁用该功能。或者我。

有任何想法吗？我在这里看到了一些类似的问题，但似乎与我正在使用的 Visual Studio 2010 无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T05:02:33.190

（我假设您正在使用带有 Azure SDK 或 Visual Studio 2012 RTM 的 Visual Studio 2010 发布配置文件。如果不是，请创建一个`ProjectName.wpp.targets`在项目根目录中调用的 MSBuild 文件并将内容放入其中）

您可以通过在发布配置文件中进行设置来禁用所有形式的删除`<SkipExtraFilesOnServer>true</SkipExtraFilesOnServer>`（相当于您提到的复选框）。

要跳过特定目录，对此问题的评论意味着您可以使用以下语法：

```
<ItemGroup>
  <ExcludeFoldersFromDeployment Include="FolderName" />
</ItemGroup> 
```

但我以前从未见过，也没有测试过。否则，您可以指定显式跳过规则。“FolderName”在这里被跳过 - 请记住这`AbsolutePath`是一个正则表达式：

```
<MsDeploySkipRules Include="SkipFolderName">
  <SkipAction>Delete</SkipAction>
  <ObjectName>dirPath</ObjectName>
  <AbsolutePath>FolderName$</AbsolutePath>
</MsDeploySkipRules> 
```

**注意：**在[某些情况下](https://stackoverflow.com/questions/12576662/msdeploy-skip-rules-when-using-msbuild-publishprofile-with-visual-studio-2012)，使用 Visual Studio 时跳过规则不起作用，除非您也设置`UseMsDeployExe`为`true`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T17:08:11.603

您可以使用 msdeploy.exe.configsettings 文件在目标计算机上设置特定规则，同一文件夹中还有一个 msdeploy.exe.configsettings.example 文件。该文件位于 %program files%\IIS\Microsoft Web Deploy - 文件夹参见[Web Deploy Rules](http://technet.microsoft.com/en-us/library/dd568992%28v=ws.10%29.aspx)

您可以在此处设置 Rules 和 skipDirectives 并启用它们是否为默认值，以便获得预期的默认行为。

# iframe - facebook之类的盒子重复面孔..或不

> ID：13439991
> 
> 赞同：2
> 
> 时间：2012-11-18T12:13:47.993
> 
> 标签：iframe, facebook-likebox

为了不打扰，我试图阅读所有我能阅读的内容，但是 facebook like box 插件的行为是有线的。

我必须首先正确显示我的 Facebook 页面 (https://www.facebook.com/pages/tennisitgr/428483287200942) 中的所有内容。

当我尝试从[http://developers.facebook.com/docs/reference/plugins/like-box/](http://developers.facebook.com/docs/reference/plugins/like-box/)生成类似框插件的代码时：

*   如果我没有登录 facebook，我只能看到流、标题和喜欢我的页面但没有面孔的人数（已选中显示面孔选项..）。

*   如果我登录到 Facebook，我可以看到面孔，但显示的所有面孔都是重复的（我的除外）。

也许我的页面设置错误（我检查了权限..），因为当我尝试为另一个页面生成插件时，它会正确显示。

任何帮助，将不胜感激。

先感谢您。

尼科斯。

# uiscrollview - UIScrollView 的孩子在键盘显示后移动

> ID：13439992
> 
> 赞同：1
> 
> 时间：2012-11-18T12:14:20.590
> 
> 标签：uiscrollview, keyboard, uitextfield, location, move

键盘显示事件后，我的 UIScrollview 出现问题，显然我的 UITextField 像这样向上移动：

[http://i.stack.imgur.com/ccBSp.png](http://i.stack.imgur.com/ccBSp.png)

这是在显示键盘之后：

[http://i.stack.imgur.com/X6NU2.png](http://i.stack.imgur.com/X6NU2.png)

我完全按照示例进行，这是我的代码：

```
-(void) keyboardDidShow: (NSNotification *)notif {
if (keyboardVisible) {
    NSLog(@"Keyboard is already visible. Ignoring notofication.");
    return;
}

//The keyboard wasn't visible before
NSLog(@"Resizing smaller for keyboard");

// Get the size of the keyboard.
NSDictionary* info = [notif userInfo];
NSValue* aValue = [info objectForKey:UIKeyboardBoundsUserInfoKey];
CGSize keyboardSize = [aValue CGRectValue].size;

// Resize the scroll view to make room for the keyboard
CGRect viewFrame = self.view.frame;
viewFrame.size.height -= keyboardSize.height;
scrollView.frame = viewFrame;
keyboardVisible = YES;}

-(void) keyboardDidHide: (NSNotification *)notif {
if (!keyboardVisible) {
    NSLog(@"Keyboard is already hidden. Ignoring notification.");
    return;
}

// The keyboard was visible
NSLog (@"Resizing bigger with no keyboard");

//Get the size of the keyboard.
NSDictionary* info = [notif userInfo];
NSValue* aValue = [info objectForKey:UIKeyboardBoundsUserInfoKey];
CGSize keyboardSize = [aValue CGRectValue].size;

// Reset the height of the scroll view to its original value
CGRect viewFrame = self.view.frame;
viewFrame.size.height += keyboardSize.height;

scrollView.frame = viewFrame;
keyboardVisible = NO;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:48:56.350

您是否尝试过使用keyboardWasShown 和keyboardWasHidden 而不是WillShow 和WillHide？另外，我注意到您在显示和隐藏中都使用了“UIKeyboardBoundsUserInfoKey”。尝试“UIKeyboardFrameBeginUserInfoKey”和“UIKeyboardFrameEndUserInfoKey”

# c# - OAUTH2 - 登录 Google 帐户 - 无需服务

> ID：13439993
> 
> 赞同：0
> 
> 时间：2012-11-18T12:14:21.127
> 
> 标签：c#, login, oauth, google-account

如果有人可以帮助我提供战略投入，如何实现我的目标，那就太好了：

*   我写了一个 C# 桌面应用程序 (WPF)
*   我有一个 Google App Engine 项目，它为 Android 应用程序提供数据

现在我的桌面应用程序需要将一些数据传递给我的 App Engine 应用程序。因此，应用程序必须验证为 App Engine 应用程序的所有者。由于不推荐使用所有其他 Google 方法，我必须前往 OAUTH2 以让我的桌面应用程序将自己验证为所有者。

因此我必须在 Google APIs Console 上注册一个项目。

**但是**：我不需要列出的 Google APIS（地图，...）的任何服务，因为要以所有者身份进行身份验证，它绝对足以登录 Google 帐户（GmailAccount、Google 帐户等）。这让我的 App Engine 应用程序将我识别为所有者。

我将不胜感激有关以下方面的建议：

*   我应该注册一个没有服务的项目只是为了通过 OAUTH2 登录吗？（这可能吗？）

*   登录到另一个服务（意味着，采取最简单的方法，只是为了能够以所有者身份进行身份验证）似乎不是很“干净”的解决方案。这是对的，还是我应该走这条路？

..我还阅读了有关服务帐户的信息，但不想使用它，因为我希望也能够通过任何网络浏览器通过我的“人类”帐户来操作我的应用程序。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T12:37:55.163

您可以在不使用 Google 的任何其他服务的情况下提供 Google OAuth 登录。您的 OAuth 客户端将只有一个空范围。您应该能够在不启用任何服务的情况下获得基本的用户信息和电子邮件（这样您就可以通过全名以外的其他方式找出谁是谁）。

您仍然需要一种方法来标记您是您的应用程序中的您（可能只是在您的应用程序中硬编码您的电子邮件，然后检查谁使用 OAuth 进行身份验证是最简单的）

# c# - 在 Team Build 中，自动构建使用 VB6 库的 C# 应用程序的最佳实践方法是什么？

> ID：13439999
> 
> 赞同：2
> 
> 时间：2012-11-18T12:15:38.180
> 
> 标签：c#, tfs, vb6, tfsbuild

在 Team Build 中，自动构建使用 VB6 库的 C# 应用程序的最佳实践方法是什么？app 和 VbLib 都在不断发展。

目前我有一个 msbuild proj，它从命令行调用 VB6，构建 lib，lib 的 guid 更改等。然后我们手动生成一个互操作（通过 tlib），在 c# 解决方案中提交和引用互操作。

我想自动化我的 msbuild 文件中的 tlib 位，目前我们认为有人关闭了 VB6 lib 的 vbp 中的二进制兼容性，而目前我们部署时互操作似乎不起作用。我们是否应该生成互操作？或者我们应该将 vb lib 二进制文件检查到源代码控制中（这必须在构建服务器上构建后自动完成......）

任何想法或指示表示赞赏

[跨帖子到msdn](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/1f379895-9dcf-4e84-9055-31d313d822e6 "跨帖子到msdn")

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-18T20:57:03.170

没有真正的最佳实践。为了包含这些东西，您需要调用一堆命令行实用程序，这些可以使用自定义构建目标集成到 MsBuild 中。这些对象可以修改不断变化的事物。我会尝试在 Team Build 之外完全在 MsBuild 内部解决这个问题，因为从那里影响构建过程要容易得多，包括解决方案中的 .proj 文件。然后只需参考 Team Build 中的解决方案。

现有的 VB6 任务可以在此处调用 VB6 应用程序的编译：http: [//msbuildextensionpack.codeplex.com/](http://msbuildextensionpack.codeplex.com/)

但这并不容易。确保 VB6 项目不会发生太大变化可能要容易得多，或者如果可能的话，让 VB6 项目人员提供托管包装器作为其发布的一部分。