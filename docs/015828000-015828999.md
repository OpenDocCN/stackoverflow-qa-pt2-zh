# StackOverflow 问答 15828000-15828999

# android - 屏幕旋转后webview backstack丢失，页面的后退按钮历史记录，Android

> ID：15828000
> 
> 赞同：0
> 
> 时间：2013-04-05T07:16:33.620
> 
> 标签：android, webview, history, screen-orientation, back-stack

我在 Activity 中有一个 WebView，它在一个屏幕方向上效果很好。我可以导航到网站上的不同页面，当我点击后退按钮时，它会回到我之前访问过的上一个页面，

但是，当我将 Android 平板电脑从一个方向旋转到另一个方向时。就像从肖像到风景一样，这段历史消失了。我通过 saveInstanceState 将 WebView 当前所在的 URL 传递到下一个方向。

屏幕旋转后，新创建的 WeView 会按预期打开指向 URL 的页面。当我点击后退按钮时，它不会去任何地方。

我该如何解决这个问题？

这是我的一些代码，它是我处理后退按钮的部分。

```
 @Override
  public boolean onKeyDown(int keyCode, KeyEvent event) {   

if (keyCode == KeyEvent.KEYCODE_BACK){

    if (pageView.canGoBack()){

        if((coverImage.getVisibility())==(View.VISIBLE)){
            setYouTubeScreenDecor(false);

          FragmentManager fragmentManager = getFragmentManager();
          FragmentTransaction fragmentTransaction = 
             fragmentManager.beginTransaction();
          fragmentTransaction.hide(youTubePlayerFragment);
          fragmentTransaction.commit();
          if(playerVision!=null){
              playerVision.pause();
          }

         return true;

    } // end if
        else {
            pageView.goBack();

         return false;

        } // end else

    } // end if pageview.canGoBack

   } // event keycode

    return true;

 } // end if keyCode == KeyEvent.KEYCODE_BACK 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:29:15.760

我找到了答案。以 RTFM 为例。

WebBackForwardList restoreState(Bundle inState) 从给定的 Bundle 中恢复此 WebView 的状态。

WebBackForwardList saveState(Bundle outState) 保存在 onSaveInstanceState(Bundle) 中使用的此 WebView 的状态。

# html - 页面大小中间固定宽度

> ID：15828002
> 
> 赞同：-3
> 
> 时间：2013-04-05T07:16:38.743
> 
> 标签：html, css

我不确定它叫什么，但有人能告诉我如何制作一个 CSS 样式表，使所有页面都适合给定宽度，然后添加阴影类型效果，让它看起来像一个页面吗？

像这样的东西：http: [//www.news.com.au/](http://www.news.com.au/)

因此，您的两侧有白色（或灰色，或其他）边框，内容放置在“边框”内。

编辑：我试过这种风格，但它把盒子放在左上角：

```
style>
    html, body {
        background-color: #F0F0F0;
        width: 100%;
        margin: 0 auto;
        font-family: "Trebuchet MS", Helvetica, sans-serif;
        font-size: small;

    }

    #wrapper {
        background-color: #fff;
        width: 920px;
        padding: 20px;
        -moz-box-shadow: 0 0 5px #888;
        -webkit-box-shadow: 0 0 8px#888;
        box-shadow: 0 0 8px #888;
    }
</style> 
```

我的用法是：

```
<div id="wrapper">

    <h1>Location Search</h1>

    <h2>Simple Lookup</h2>

    ....

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:22:38.577

它可能是一个图像，但你可以用 box-shadow 制作类似的东西。

我认为它只是一个宽度为 960px 和 margin: 0 auto; 的包装器。和一点盒子阴影。所以是这样的：

CSS：

```
html,body{
background-color: #F0F0F0; // a little darker then the wrapper.
width: 100%;
padding: 0;
margin: 0 auto;
}

#wrapper{
background-color: #fff;
width: 920px; // because of padding.
margin: 0 auto;
padding: 20px;
-moz-box-shadow: 0 0 5px #888;
-webkit-box-shadow: 0 0 5px#888;
box-shadow: 0 0 5px #888;
} 
```

和这样的html。

HTML：

```
<div id="wrapper"> // you just put this div around all of your other divs so it makes it one big div.

...
Some divs for the layout.
...

</div> 
```

希望这对您有所帮助。

# paypal - 我有paypal的痛苦，家里有专家吗？

> ID：15828003
> 
> 赞同：0
> 
> 时间：2013-04-05T07:16:43.923
> 
> 标签：paypal

我一直在寻找一个体面的（最新的）Paypal 类，我可以用它来满足我非常简单的结帐要求，但是在没有这样的类的情况下，我试图自己推出一个类：

```
$paypal = array(
    'cmd'=>'_cart',
    'business'=>'kung@foo.com',
    'no_shipping'=> 1,
    'return'=>'http://www.foo.com',
    'cancel_return'=>'http://www.foo.com',
    'currency_code'=> 'GBP',
    'charset'=>'UTF-8'
); 

    $i=0;
    $cart = array();
    foreach ((array)$_SESSION['place_ad']['cart'] as $value)
    {
        $i++;
        $cart = array("item_name_$i" => $value['title'], "amount_$i" => $value['price']);
        $paypal = array_merge($paypal, $cart);
    }

header('Location: https://www.paypal.com/cgi-bin/webscr?'.http_build_query($paypal)); 
```

据我所见，一切都正确传递给了贝宝，但贝宝吐出来就像我在胡言乱语一样，出现以下错误：

> 我们检测到此购物车存在问题。如果问题仍然存在，请联系商家。

任何人都可以告诉我我做错了什么，因为我在贝宝集成方面是一个完全的新手。

# java - 如何使用 Liferay 从 MySQL 中检索 jsp 中的数据？

> ID：15828004
> 
> 赞同：0
> 
> 时间：2013-04-05T07:16:43.990
> 
> 标签：java, mysql, eclipse, jsp, liferay

我想从mysql中检索数据并插入数据。

我提供 3 个文件，一个 java 文件和两个 jsp 文件`edit.jsp`，`view.jsp`分别编辑和查看数据。

我已经使用创建表`ServiceBuilder`，我已经把我`portal-ext.properties`的类文件夹，告诉我这是完美的方法吗？我以正确的方式做吗？

我想先插入数据，然后我想从数据库中检索数据。

1.  我正在通过以下 jsp 文件插入数据 -`edit.jsp`

    ```
    <%@ taglib uri="http://java.sun.com/portlet" prefix="portlet" %>

    <jsp:useBean class="java.lang.String" id="addNameURL" scope="request" />
    <jsp:useBean class="java.lang.String" id="area" scope="request"/>
    <jsp:useBean class="java.lang.String" id="email" scope="request"/>
    <jsp:useBean class="java.lang.String" id="subject" scope="request"/>
    <jsp:useBean class="java.lang.String" id="compnay" scope="request"/>
    <jsp:useBean class="java.lang.String" id="designation" scope="request"/>

    <portlet:defineObjects />

    <form id="<portlet:namespace />helloForm" action="<%= addNameURL %>"method="post">
        <table>
            <tr>
                <td>Subject:</td>
                <td><input type="text" name="subject"></td>
            </tr>
            <tr>
                <td>
                Write Your Testimonial
                </td>
                <td><textarea name ="area"></textarea>
                </td>
            </tr>
            <tr>
                <td>Name:</td>
                <td><input type="text" name="username"></td>
            </tr>
            <tr>
                <td>Email:</td>
                <td><input type="text" name="email"></td>
            </tr>
            <tr>
                <td>Company:</td>
                <td><input type="text" name="company"></td>
            </tr>
            <tr>
                <td>Designation:</td>
                <td><input type="text" name="designation"></td>
            </tr>
        </table>

        <input type="submit" id="nameButton" title="Submit" value="Submit">
    </form> 
    ```

2.  我已经在以下 java 文件中编写了我的插入逻辑 - `Testimonial1`：

    ```
    package com.liferay.portlet;

    import java.io.IOException;
    import javax.portlet.ActionRequest;
    import javax.portlet.ActionResponse;
    import javax.portlet.GenericPortlet;
    import javax.portlet.PortletException;
    import javax.portlet.PortletMode;
    import javax.portlet.PortletPreferences;
    import javax.portlet.PortletRequestDispatcher;
    import javax.portlet.PortletURL;
    import javax.portlet.RenderRequest;
    import javax.portlet.RenderResponse;
    import org.apache.commons.logging.Log;
    import org.apache.commons.logging.LogFactory;
    import com.liferay.counter.service.CounterLocalServiceUtil;
    import com.liferay.portal.kernel.exception.SystemException;
    import com.liferay.portlet.model.testimonial;
    import com.liferay.portlet.service.testimonialLocalServiceUtil;

    public class Testimonial1 extends GenericPortlet {

        public void init()throws PortletException 
        {
            editJSP = getInitParameter("edit-jsp");
            viewJSP = getInitParameter("view-jsp");
        }

        public void doEdit(RenderRequest renderRequest,RenderResponse renderResponse)
                throws  IOException, PortletException 
        {
            renderResponse.setContentType("text/html");
            PortletURL addNameURL = renderResponse.createActionURL();
            addNameURL.setParameter("addName", "addName");
            renderRequest.setAttribute("addNameURL", addNameURL.toString());
            include(editJSP, renderRequest, renderResponse);
        }

        public void doView(RenderRequest renderRequest,RenderResponse renderResponse)throws 
        IOException, PortletException
        {
            PortletPreferences prefs = renderRequest.getPreferences();
            String username = (String) prefs.getValue("name", "");
            String area=(String)prefs.getValue("area", "testimonial");
            String email=(String)prefs.getValue("email", "");
            String subject=(String)prefs.getValue("subject", "");
            String company=(String)prefs.getValue("company", "");
            String designation=(String)prefs.getValue("designation", "");

        if (username.equalsIgnoreCase ("")) 
        {
            username = "";
        }
            renderRequest.setAttribute("userName", username);
            renderRequest.setAttribute("area",area);
            renderRequest.setAttribute("email",email);
            renderRequest.setAttribute("subject",subject);
            renderRequest.setAttribute("designation",designation);
            renderRequest.setAttribute("company",company);

            include(viewJSP, renderRequest, renderResponse);
        }

        public void processAction(ActionRequest actionRequest, ActionResponse actionResponse)
                throws IOException, PortletException 
        {
            String addName = actionRequest.getParameter("addName");

            if (addName != null)
            {
                PortletPreferences prefs = actionRequest.getPreferences();
                prefs.setValue("name", actionRequest.getParameter("username"));
                prefs.setValue("area",actionRequest.getParameter("area"));
                prefs.setValue("email",actionRequest.getParameter("email"));
                prefs.setValue("subject",actionRequest.getParameter("subject"));
                prefs.setValue("designation",actionRequest.getParameter("designation"));
                prefs.setValue("company",actionRequest.getParameter("company"));

                prefs.store();

                testimonial testimonial = null;

                try {
                    testimonialLocalServiceUtil.createtestimonial(CounterLocalServiceUtil.increment());
                    testimonial.setSubject(actionRequest.getParameter("subject"));
                    testimonial.setArea(actionRequest.getParameter("area"));
                    testimonial.setUsername(actionRequest.getParameter("username"));
                    testimonial.setEmail(actionRequest.getParameter("email"));
                    testimonial.setCompany(actionRequest.getParameter("company"));
                    testimonial.setDesignation(actionRequest.getParameter("designation"));
                    testimonialLocalServiceUtil.addtestimonial(testimonial);
                } catch (SystemException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                actionResponse.setPortletMode(PortletMode.VIEW);    
            }
        }

        protected void include(String path, RenderRequest renderRequest, RenderResponse renderResponse)
                throws IOException, PortletException 
        {
            PortletRequestDispatcher portletRequestDispatcher = getPortletContext().getRequestDispatcher(path);

            if (portletRequestDispatcher == null) 
            {
                _log.error(path + " is not a valid include");
            }
            else
            {
                portletRequestDispatcher.include(renderRequest, renderResponse);
            }
        }
        protected String editJSP;
        protected String viewJSP;
        private static Log _log = LogFactory.getLog(Testimonial1.class);
    } 
    ```

3.  我已经在以下文件中编写了我的视图逻辑 -`view.jsp`我想从以下文件中的数据库中检索数据：

    ```
    <%@ taglib uri="http://java.sun.com/portlet" prefix="portlet" %>

    <jsp:useBean id="subject" class="java.lang.String" scope="request"/>
    <jsp:useBean id="area" class="java.lang.String" scope="request"/>
    <jsp:useBean id="userName" class="java.lang.String" scope="request" />
    <jsp:useBean id="email" class="java.lang.String" scope="request"/>
    <jsp:useBean id="company" class="java.lang.String" scope="request"/>
    <jsp:useBean id="designation" class="java.lang.String" scope="request"/>
    <portlet:defineObjects />

    <p>This is the Testimonial portlet......... how are u all ..........</p>

    <p>Subject is ....<%=subject %></p>
    <p>Testimonial is .....<%=area %></p>
    <p>Hello <%= userName %>!</p>
    <p>your Email ......<%=email %></p>
    <p>your company .....<%=company %></p>
    <p>You are .......<%=designation %></p> 
    ```

4.  我的`service.xml`档案

    ```
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE service-builder PUBLIC "-//Liferay//DTD Service Builder 6.1.0//EN"  "http://www.liferay.com/dtd/liferay-service-builder_6_1_0.dtd">

    <service-builder package-path="com.liferay.portlet">
        <author>ubuntu</author>
        <namespace>perception</namespace>

        <entity name="testimonial" local-service="true" remote-service="true">
            <column name="subject" type="String"></column>
            <column name="area" type="String"></column>
            <column name="username" type="String"></column>
            <column name="email" type="String"></column>
            <column name="company" type="String"></column>
            <column name="designation" type="String"></column>
        </entity>
    </service-builder> 
    ```

5.  我的`portal-ext.properties`文件：

    ```
    #
    # MySQL 
    #

    jdbc.default.driverClassName=com.mysql.jdbc.Driver 
    jdbc.default.url=jdbc:mysql://localhost/lportal?useUnicode=true&characterEn
    coding=UTF-8&useFastDateParsing=false
    jdbc.default.username=root
    jdbc.default.password=ubuntu123

    schema.run.enabled=true
    schema.run.minimal=true 
    ```

我已经把我所有的文件都放好了，现在请告诉我我必须做些什么来插入和检索数据。

请告诉我插入代码是否正确？以及如何从数据库中检索数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:23:28.963

你可以看看 liferay 的 service builder。

*   [http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder](http://www.liferay.com/community/wiki/-/wiki/Main/Service+Builder)

*   [http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/service-build-2](http://www.liferay.com/documentation/liferay-portal/6.0/development/-/ai/service-build-2)

如果您的数据与 liferay 不在同一个数据库中，您仍然可以使用 service builder

*   [http://liferaytrends.blogspot.com/2012/05/blog-post.html](http://liferaytrends.blogspot.com/2012/05/blog-post.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T14:19:29.190

这是一条评论，但对于这种格式来说太长了——因此我将其添加为答案。

据我所知，您的代码存在一个重大缺陷，与基本问题无关：您使用 portlet VIEW 模式来显示数据，并使用 EDIT 模式来操作它。这是对 JSR-286 的常见误解，我学会了讨厌这种命名。

EDIT 旨在配置当前的 portlet - 当 EDIT 操作的结果是单个数据库记录的更改时，您几乎总是使用了错误的 portlet 模式。您必须使用 VIEW 模式（这只是 portlet 模式，与您的应用程序、读取或写入数据无关）。考虑到默认情况下 EDIT 模式只能由管理员访问，并且通常用于更改 PortletPreferences，很少用于更改数据库内容（这是一种简化，但是一个很好的经验法则）

出于这个原因，Liferay 在 UI 上将 EDIT 模式命名为“Preferences”，您通常通过 portlet 的上下文菜单导航到它（“Preferences”，原文如此！）

# java - 在 JFrame 上使用部分重绘进行多层 2D 图形的最佳方法？

> ID：15828005
> 
> 赞同：0
> 
> 时间：2013-04-05T07:16:52.727
> 
> 标签：java, swing

基本上，我想做一个国际象棋游戏。

这个想法是我有一张棋盘和各个棋子的图片。我可以开始工作的是一个 JPanel，我每次都会用棋子的新位置重新绘制所有内容，但这需要获取所有棋子的位置并用多达 33 张图片重新绘制棋盘，并使用双缓冲和全部。

我认为有点消耗资源。AFAIK，可以选择只重绘某个区域，但我想还有更好的方法。我能想象的是，每次只是移动或删除一两张图片，或者更确切地说是棋子，而不是重新绘制一些东西。

遗憾的是，我对那里的课程了解非常有限，所以我问是否有这样的方法，甚至是完全不同的方法，它比绘画/重新绘画更有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:37:59.387

与其再次发明轮子，不如使用[JGame](http://www.13thmonkey.org/~boris/jgame/)等支持 sprite 的游戏引擎来进行渲染。

另请注意，今天，渲染国际象棋的资源消耗是如此之小，以至于花一分钟来优化它就是浪费一分钟。你应该瞄准的是一个框架，它花费最少的时间来实现游戏的渲染，这样你就不必在游戏的这一部分上花费太多时间。

如果您觉得游戏引擎过于矫枉过正，那么使用带有自定义单元格渲染器的表格如何绘制每个单元格？该表将确保以最佳方式呈现更新。您甚至可以使用自定义`TableModel`来定义比赛场地。

# social-networking - 谷歌加分享链接响应问题

> ID：15828011
> 
> 赞同：1
> 
> 时间：2013-04-05T07:17:21.043
> 
> 标签：social-networking, google-plus

我正在使用下面的代码在 google plus 上共享链接。

```
 <html>
  <head>
    <script type="text/javascript">
      window.onPlusStart = function(x) {
        console.log('ops', x)
      }

      window.onPlusDone = function(x) {
        console.log('opd', x)
      }
    </script>
  </head>
  <body>     
      <div class="g-plus" data-action="share" data-href="http://test.com"
        data-onstartinteraction="onPlusStart"
       data-onendinteraction="onPlusDone">
    </div>
    <script type="text/javascript">
(function() {
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      })();
    </script>
  </body>
</html> 
```

问题：现在我在成功共享时在控制台日志中收到四次 onPlusDone 响应（响应 1：登录窗口前，响应 2：关闭登录窗口后，响应 3：关闭登录窗口后，响应 4：共享后成功地）。

但是成功分享后我只需要回复一个。

# jquery - jQuery 预加载 URL

> ID：15828013
> 
> 赞同：0
> 
> 时间：2013-04-05T07:17:26.847
> 
> 标签：jquery, preload

如果有人单击链接，我正在寻找一种预加载页面内容的解决方案，因为我主要是动态生成页面内容。

例如：

```
<a href="pagexy.php">click me</a>

    $('a').click(function{

       $('#preloader').show();

       $preloadurl($(this).attr('href')){
          done: // Open the URL / show the content
       }
    }); 
```

有没有使这成为可能的插件？如果这也适用于表单提交，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:24:23.287

对于我的画廊网站，我总是使用 Gaya Design 的[QueryLoader2](http://www.gayadesign.com/diy/queryloader2-preload-your-images-with-ease/)插件。

它看起来不错并且易于使用。希望你搜索类似的东西。

这是一个演示： http: [//gayadesign.com/scripts/queryLoader2/](http://gayadesign.com/scripts/queryLoader2/)

# ios - 应用程序在 iOS 6.XX 上首次启动时需要时间

> ID：15828015
> 
> 赞同：0
> 
> 时间：2013-04-05T07:17:31.210
> 
> 标签：ios, ipad, ios6

在 iPad 上的 iOS 6.XX 版本上，应用程序启动需要 5-6 秒。这在 iOS 5.X 上运行良好。在 iOS 6.XX 中，default.png 文件在屏幕上的停留时间会稍长一些加载时可能出现的问题。

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]; UIInterfaceOrientation 方向=[[UIApplication sharedApplication] statusBarOrientation];

```
if (orientation==UIInterfaceOrientationLandscapeLeft || orientation==UIInterfaceOrientationLandscapeRight)
{                                                         self.viewController=[[EBHomeViewController alloc] initWithNibName:@"EBHomeViewController-LA" bundle:nil] ;
}
else if(orientation==UIInterfaceOrientationPortrait || orientation==UIInterfaceOrientationPortraitUpsideDown)
{
    self.viewController=[[EBHomeViewController alloc] initWithNibName:@"EBHomeViewController-PT" bundle:nil] ;
}

navController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
self.window.rootViewController = navController;
[self.window makeKeyAndVisible]; 
```

applicationDidFinishLaunching 中没有繁重的代码。我们安装应用程序并首次打开它/重新启动 iPad 并启动应用程序需要时间。

# javascript - 在 JavaScript 中将字符串转换为整数数组，反之亦然

> ID：15828016
> 
> 赞同：3
> 
> 时间：2013-04-05T07:17:31.327
> 
> 标签：javascript, string

我有一个数组，每个单元格可以保留 4 个字节（2**32）。这个数组显示了我用 JS 编写的 VM 的内存。我也有字符串。只有一个地方我可以保留这个字符串——我上面描述的内存。

我决定将内存中的字符串显示为 C 字符串（特殊符号 NUL 作为字符串的结尾）。我目前的实现看起来很丑，我问你建议，有什么办法可以改进这种方法吗？也许还有其他方法可以做到这一点？

**将字符串转换为数组的部分代码：**

```
// demoMemory presents memory model
var DEMO_VOLUME = 16;
var demoMemory = new Array(DEMO_VOLUME);
for (var i = 0; i < DEMO_VOLUME; i++) demoMemory[i] = 0;

// convert string to hexidecimal string
var string = "Hello, World!", hexString = "";
for (var i = 0; i < string.length; i++) {
    hexString += string.charCodeAt(i).toString(16);
}

// convert hexidecimal string to array of strings
// each element of this array presents 4 symbols
var hexStringArray = hexString.match(/.{1,8}/g);

// add NUL (0x00) symbols to complete strings
while (hexStringArray[hexStringArray.length - 1].length != 8) {
    hexStringArray[hexStringArray.length - 1] += "00";
}

// convert to integer array
for (var i = 0; i < hexStringArray.length; i++) {
    demoMemory[i] = parseInt(hexStringArray[i], 16);
} 
```

**...然后回到字符串：**

```
// decode back to string
var resultString = "", decSymbolCode = 0;
for (var i = 0; i < demoMemory.length; i++) {
    hexString = demoMemory[i].toString(16);
    var hexSymbolCodeArray = hexString.match(/.{1,2}/g);
    for (var j = 0; j < hexSymbolCodeArray.length; j++) {
        decSymbolCode = parseInt(hexSymbolCodeArray[j], 16);
        resultString += String.fromCharCode(decSymbolCode);
    }
} 
```

*这段代码不明显，因为我使用 JS 字符串来构建十六进制字符串。我认为可以使用按位运算和掩码，但我不知道如何。也许我错了。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:56:32.647

这是一个使用掩码和按位运算将字符串转换为 32 位数字数组的代码，反之亦然：

```
var demoMemory = [];

function stringToArray(str) {
  var i,
      length = str.length,
      arr = [];

  for(i=0; i<length; i+=4) {
    arr.push(
      (((str.charCodeAt(i)   || 0) << 24)
      |((str.charCodeAt(i+1) || 0) << 16)
      |((str.charCodeAt(i+2) || 0) << 8)
      |((str.charCodeAt(i+3) || 0)))
    );
  }

  if(length % 4 === 0) {
    arr.push(0);
  }

  return arr;
}

function arrayToString(arr) {
  var i, j, chrCode,
      length = arr.length,
      str = [];

  label:
  for(i=0; i<length; i++) {
    for(j=24; j>=0; j-=8) {
      chrCode = (arr[i] >> j) & 0xFF;
      if(chrCode) {
        str.push(String.fromCharCode(chrCode));
      } else {
        break label;
      }
    }
  }

  return str.join('');
}

console.log(demoMemory = stringToArray('Hello, World!')); // => [1214606444, 1865162839, 1869769828, 553648128]
console.log(arrayToString(demoMemory)); // "Hello, World!" 
```

您可以在这里找到工作示例：http: [//jsbin.com/aselug/2/edit](http://jsbin.com/aselug/2/edit)

# jquery - JqG rid 从控制器加载 Json 数据

> ID：15828017
> 
> 赞同：0
> 
> 时间：2013-04-05T07:17:38.243
> 
> 标签：jquery, jqgrid

我正在使用 jqgrid，我想从 jquery 显示网格调用控制器返回我的 json 数据我的网格没有显示数据代码在这里

```
public JsonResult GetPlainobjectAsJson()
        {
            var rows = (getdatalist()
                .Select(c => new
                {
                    id = c.CatId,
                    cell = new []
                                        {
                                            c.CatId.ToString(),
                                            c.CatName,
                                            c.desc,
                                            c.desc1,
                                            c.desc10,
                                            c.desc11,
                                            c.desc12,
                                            c.desc13,
                                            c.desc14,
                                            c.desc15,
                                            c.desc16,
                                            c.desc17,
                                            c.desc18,
                                            c.desc19,
                                            c.desc2,
                                            c.desc20,
                                            c.desc21,
                                            c.desc22,
                                            c.desc23,
                                            c.desc24,
                                            c.desc25,
                                            c.desc3,
                                            c.desc4,
                                            c.desc5,
                                            c.desc6,
                                            c.desc7,
                                            c.desc8,
                                            c.desc9,
                                            c.ProId.ToString(),
                                            c.ProName
                                        }
                })).ToArray();
            return new JsonResult
            {
                Data = new
                {
                    page = 1,
                    records = rows.Length,
                    rows,
                    total = 1
                }
            };

        } 
```

这个函数生成json数据和这个函数

返回json结果

```
 public JsonResult GetPlainobject()
        {

            var res = GetPlainobjectAsJson();

            return Json(res, JsonRequestBehavior.AllowGet);
        } 
```

这是索引页

```
<script type="text/javascript">

    $(document).ready(function () {
        debugger;
        $("#treegrid").jqGrid({
            url: '@Url.Content("~/TreeGrid/GetPlainobject")',
            datatype: "json",
            mtype: "Get",
            colNames: ["CatId", "CatName", "desc", "desc1", "desc10", "desc11", "desc12", "desc13", "desc14", "desc15", "desc16", "desc17", "desc18",
                "desc19", "desc2", "desc20", "desc21", "desc22", "desc23", "desc24", "desc25", "desc3", "desc4", "desc5", "desc6",
                "desc7", "desc8", "desc9", "ProId", "ProName"],
            colModel: [
            { name: "CatId", index: "CatId", width: 150, key: true },
            { name: "CatName", index: "CatName", width: 200 },
            { name: "desc", index: "desc", width: 200 },
            { name: "desc1", index: "desc1", width: 300 },
            { name: "desc10", index: "desc10", width: 300 },
            { name: "desc11", index: "desc11", width: 150 },
            { name: "desc12", index: "desc12", width: 200 },
            { name: "desc13", index: "desc13", width: 300 },
            { name: "desc14", index: "desc14", width: 150 },
            { name: "desc15", index: "desc15", width: 200 },
            { name: "desc16", index: "desc16", width: 300 },
            { name: "desc17", index: "desc17", width: 150 },
            { name: "desc18", index: "desc18", width: 200 },
            { name: "desc19", index: "desc19", width: 300 },
            { name: "desc2", index: "desc2", width: 150 },
            { name: "desc20", index: "desc20", width: 150 },
            { name: "desc21", index: "desc21", width: 200 },
            { name: "desc22", index: "desc22", width: 300 },
            { name: "desc23", index: "desc23", width: 150 },
            { name: "desc24", index: "desc24", width: 200 },
            { name: "desc25", index: "desc25", width: 300 },
            { name: "desc3", index: "desc3", width: 200 },
            { name: "desc4", index: "desc4", width: 300 },
            { name: "desc5", index: "desc5", width: 150 },
            { name: "desc6", index: "desc6", width: 200 },
            { name: "desc7", index: "desc7", width: 300 },
            { name: "desc8", index: "desc8", width: 150 },
            { name: "desc9", index: "desc9", width: 200 },
            { name: "ProId", index: "ProId", width: 300 },
            { name: "ProName", index: "ProName", width: 150 }

            ],

            height: "auto",
            rowNum: 10,
            rowList: [10, 20, 30],
            pager:"#pager",
            gridview: true,
            viewrecords: true,
            caption: "Tree Grid Example",
            jsonReader : {
            root: "Data",
            page: "page",
            total: "total",
            records: "records"

            }

        });

    });

</script> 
```

帮我在哪里我错了....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:33:53.517

我认为你应该删除不需要`GetPlainobjectAsJson`的方法 return `JsonResult`。您不应将`JsonResult`其用作 的参数`Json`。取而代之的是，您可以包含`GetPlainobjectAsJson`inside of`GetPlainobject`和 place的代码主代码

```
return Json(new {
                page = 1,
                records = rows.Length,
                rows,
                total = 1
            }, JsonRequestBehavior.AllowGet); 
```

此外，您应该`jsonReader`从客户端代码中删除并`loadonce: true`改为包含。它将允许在 jqGrid 中使用*本地*排序、分页和数据排序/过滤。您可以从`colModel`所有`index`属性中删除，因为它们具有与属性相同的值`name`。

# jquery - 在 IE 中使用 dataview 时删除 rowspan

> ID：15828020
> 
> 赞同：1
> 
> 时间：2013-04-05T07:17:41.233
> 
> 标签：jquery, jquery-templates, dataview

我有以下模板

```
<ul class="sys-template" id="visitingCard">
  <li id="{{UiId}}">
    <div class="profiles">
      <div class="profile">
        <table border="1" style="width: 100%; ">
          <tr >
            <td rowspan="3" >
              Hello Dear
            </td>
          </tr>
          <tr>
            <td>
              ABC : ABC
            </td>
          </tr>
          <tr>
            <td>
              XXX : XXX
            </td>
          </tr>
        </table>
      </div>
    </div>
  </li>
</ul> 
```

在脚本中，我正在创建数据视图，如下所示：

```
var data=$create(
                   Sys.UI.DataView, 
                   {  data: 
                          { 
                             UiId: "UiId:1", 
                             UiName: "test"
                           } 
                   }, 
                   null, 
                   null, 
                   $get("visitingCard")
                 ); 
```

`$create()`当我在 IE 中使用时，删除了 td 中指定的行跨度。任何人都可以为此提供解决方案吗？

# c# - EWS 以其他格式保存/导出 EmailMessage

> ID：15828021
> 
> 赞同：4
> 
> 时间：2013-04-05T07:17:42.047
> 
> 标签：c#, exchangewebservices, ews-managed-api

我正在使用 EWS 托管 API 2.0。此时我可以将 EmailMessages 作为 *.eml 文件保存到我的硬盘。但是我无法正确打开它们以显示内容。

如何将 EmailMessage (.eml) 直接保存为 .html、.doc 或 .txt 文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T07:24:09.570

如果要将其保存为 .eml，请使用以下代码

```
message.Load(new PropertySet(ItemSchema.MimeContent));
MimeContent mimcon = message.MimeContent;
FileStream fStream = new FileStream("c:\test.eml", FileMode.Create);
fStream.Write(mimcon.Content, 0, mimcon.Content.Length);
fStream.Close(); 
```

对于 msg 文件，请查看以下链接：

[http://msdn.microsoft.com/en-us/library/cc463912%28EXCHG.80%29.aspx](http://msdn.microsoft.com/en-us/library/cc463912%28EXCHG.80%29.aspx)

将其保存为 .eml 文件后，您可以查看以下帖子进行解析：

[在 C# 中解析 .eml 文件的建议](https://stackoverflow.com/questions/936422/recommendations-on-parsing-eml-files-in-c-sharp)

希望它有帮助。

# php - 如何在 zend 框架 1.11 中翻译 URL

> ID：15828024
> 
> 赞同：1
> 
> 时间：2013-04-05T07:17:54.513
> 
> 标签：php, zend-framework

我要翻译

荷兰语：

[http://example.com/login](http://example.com/login) => [http://example.com/inloggen](http://example.com/inloggen)

德语

[http://example.com/login](http://example.com/login) => [http://example.com/anmelden](http://example.com/anmelden)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:07:27.463

看看下面的so问题：

[Zend Routes 翻译 URL](https://stackoverflow.com/questions/11155002/zend-routes-translate-urls?rq=1)

可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:22:11.397

看看这个文档[http://framework.zend.com/manual/1.11/en/zend.controller.router.html#zend.controller.router.routes.standard.translated-segments](http://framework.zend.com/manual/1.11/en/zend.controller.router.html#zend.controller.router.routes.standard.translated-segments)

希望有帮助！

# c#-4.0 - 无法在 c# windows 应用程序中打印面板

> ID：15828028
> 
> 赞同：0
> 
> 时间：2013-04-05T07:18:12.233
> 
> 标签：c#-4.0, windows-applications

嗨，我正在我的 Windows 应用程序中打印一个面板。当我单击打印面板时，它在我**单击**打印对话中的打印后打开打印对话框，它**会引发异常。**

```
System.CompoentModel.Win32Exception{"Access is denied"} 
```

这是我正在使用的代码。

```
Bitmap MemoryImage;

    private void btnPrint_Click(object sender, EventArgs e)
    {
        panel1.BackColor = Color.White;
        printDialog1.Document = printDocument1;

        if (printDialog1.ShowDialog() == DialogResult.OK)
        {
            printDocument1.Print();
        }
    }

    private void printDocument1_PrintPage(object sender, PrintPageEventArgs e)
    {
        Rectangle pagearea = e.PageBounds;
        e.Graphics.DrawImage(MemoryImage, (panel1.Width / 2) - (this.panel1.Width / 2), this.panel1.Location.Y);

    } 
```

请让我知道如何解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T10:07:07.460

试试看

```
private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
        {
            System.Drawing.Bitmap MemoryImage = new System.Drawing.Bitmap(panel1.Width, panel1.Height);
            Rectangle pagearea = e.PageBounds;
            panel1.DrawToBitmap(MemoryImage, panel1.ClientRectangle);
            e.Graphics.DrawImage(MemoryImage, (pagearea.Width / 2) - (this.panel1.Width / 2), this.panel1.Location.Y);
        } 
```

# java - 使用 servlet 提交表单时图像未检索

> ID：15828029
> 
> 赞同：1
> 
> 时间：2013-04-05T07:18:15.327
> 
> 标签：java, jsp, tomcat, servlets

我的 sql 中有一个图像，我想在网页中检索它，所以我开发了一个 servlet。现在，当我点击提交按钮时，它会调用 servlet，但不会显示图像，但如果我正在编写 localhost:8080/y/testimageServlet，则会在浏览器中显示图像。

imagetestServlet.java

```
import java.sql.*;
import DB.DataBaseConnection;

import java.io.IOException;
import java.io.InputStream;

import javax.servlet.ServletException;
import javax.servlet.ServletOutputStream;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class imagetestServlet
 */
@WebServlet("/imagetestServlet")
public class imagetestServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public imagetestServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    public void doGet(HttpServletRequest request, HttpServletResponse response) 
              throws IOException,ServletException {

                 Blob image = null;
                  Connection con = null;
                  Statement stmt = null;
                  ResultSet rs = null;
                  DataBaseConnection db= new DataBaseConnection();
                  ServletOutputStream out = response.getOutputStream();
                  try {
                  Class.forName("com.mysql.jdbc.Driver");
                  con=db.connet();
                  stmt = con.createStatement();
                  rs = stmt.executeQuery("select img from one where  id = '4'");
                  if (rs.next()) {
                  image = rs.getBlob(1);
                  } else {
                  response.setContentType("text/html");

                  out.println("<font color='red'>image not found for given id</font>");

                  return;
                  }
                  response.setContentType("image/gif");
             InputStream in = image.getBinaryStream();
              int length = (int) image.length();
              int bufferSize = 1024;
              byte[] buffer = new byte[bufferSize];
              while ((length = in.read(buffer)) != -1) {
              out.write(buffer, 0, length);
              }
              in.close();
              out.flush();

            } catch (Exception e) {
              response.setContentType("text/html");
              out.println("<html><head><title>Unable To Display image</title></head>");
              out.println("<body><h4><font color='red'>Image Display Error=" + e.getMessage() +
               "</font></h4></body></html>");
              return;
              } 
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

登录

```
<form id="f1" name="f1" action="imagetest" method="post" onsubmit="return ccheck()">

            <img  src="header.png"><br><br><br><br><br>
    <table >
        <tr>
            <td>
                <table class="table">
                    <tr>
                        <td>
                            <table class="table">
                                <tr>
                                    <td>
                                        <div class="content"><div class="signin-header"><h3>Welcome to DiaEmr</h3></div></div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="content">
                                        <div class="signin-box">
                                        <p class="one">
                                                Welcome to all at the <b>"Workshop on Ileal Interposition".</b><br>

                                                <b>Brazil</b> to inaugurate & launch this very important Data Registry<br>
                                                Key features of the solution-<br>
                                        </div>  
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td>image</td>
                        <td>
                            <table class="table" >
                                <tr>
                                    <td>
                                        <div class="content">
                                        <div class="signin-header">
                                        <h3>Portal Login</h3>
                                        </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <div class="content">
                                            <div align="center" class="signin-box">
                                                <table class="table">
                                                    <tr>
                                                        <td><b>User ID</b></td>
                                                        <td><input name="uid" type="text" /></td>
                                                    </tr>
                                                    <tr >
                                                        <td><b>Password</b></td>
                                                        <td><input name="cpass" type="password" /></td>
                                                    </tr>
                                                    <tr >
                                                        <td><input type="submit" 
                                                                class="button button-submit" value="Submit" /></td>
                                                        <td><input type="reset" class="button button-submit"
                                                                value="Reset" /></td>
<tr>New User<a href ="UserRegistration.jsp">Register</a></tr><br>
                                                        </tr>

                                                    </table>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
            </table>
        </td>
        </tr>
</table>

<div class="footer-bar">
    <img align="left" src="footer.png">
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:22:37.040

您的表单发送`post`请求，

```
<form id="f1" name="f1" action="imagetest" method="post" onsubmit="return ccheck()"> 
```

但是您只在您的 servlet 中定义了一个 doGet 方法。如果您在浏览器中导航`GET`（`POST`

您将需要更改表单以使用或在方法`get`中实现您的代码`doPost`

# android - 动态插入图像路径

> ID：15828033
> 
> 赞同：0
> 
> 时间：2013-04-05T07:18:39.843
> 
> 标签：android

我正在尝试使用来自[github](https://github.com/nostra13/Android-Universal-Image-Loader)的 universalimageloader 获取网格视图中的图像。但是，我不想从常量加载静态最终图像，而是想从服务器动态加载图像路径。所以我做了一个 jsonparser 从服务器加载信息并解析它。但我正在努力将其分配给 IMAGES 字符串数组。请建议我如何分配。我是安卓新手。

ImageConstants.java

```
import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.util.Log;

public class ImageConstant {

    public static String[] IMAGE1;
    private static String[] constants;
    public static String url = "http://ensign119.com/assets/image11.php";

        // JSON Node names
        protected static final String TAG_PRODUCTS = "image_path";
        protected static final String TAG_CID = "file_id";
        public static final String TAG_NAME = "file_name";

        // contacts JSONArray  
        JSONArray products = null;

    public String[] ImageConstant() {
        // TODO Auto-generated constructor stub

        new Message().execute(url);
        for(int i=0; i<IMAGE1.length;i++){
            constants[i] = IMAGE1[i];
        }

        for(String name:constants){
            Log.d("new path", name);
        }

        return constants;
    }

    class Message extends AsyncTask<String, Integer, ArrayList<HashMap<String, String>> > {
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
//      ProgressDialog progress = new ProgressDialog(Path.this);
        // Creating JSON Parser instance
        JSONParser jParser = new JSONParser();
                @Override
            protected ArrayList<HashMap<String, String>> doInBackground(String... params) {

                    Log.d("doInBackgound","backgound is running");

                    Log.d("json string ", jParser.getJSONFromUrl(url).toString());
                    // getting JSON string from URL
                    JSONObject json = jParser.getJSONFromUrl(url);

                    Log.d("path_parsing", "before parsing");
                    try {
                        // Getting Array of Contacts
                        products = json.getJSONArray(TAG_PRODUCTS);

                        // looping through All Contacts
                        for(int i = products.length()-1; i >=0; i--){
                            JSONObject c = products.getJSONObject(i);

                            // Storing each json item in variable
                            String cid = c.getString(TAG_CID).toString();
                            String name = c.getString(TAG_NAME);
                            // creating new HashMap
                            HashMap<String, String> map = new HashMap<String, String>();

                            // adding each child node to HashMap key => value
                            map.put(TAG_CID, cid);
                            map.put(TAG_NAME, name);

                            // adding HashList to ArrayList
                            mylist.add(map);
                            Log.d("mylist_value", mylist.toString());
                        }
                    } catch (JSONException e) {
                        e.printStackTrace();
                    }
                    Log.d("path_parsing", "after parsing");   
                    return mylist;

                }

            @Override
            protected void onPostExecute(ArrayList<HashMap<String, String>> result) {
//              if(progress.isShowing()){
//                  progress.dismiss();
//              }
                IMAGE1 = new String[result.size()];
                for(int i=0; i<result.size(); i++){
                   IMAGE1[i] = result.get(i).get("file_name");
                }
                for(String path: IMAGE1){
                    Log.d("path", path.toString());
                }
                Log.d("postExecute","Postexecute is running");
            }

            @Override
            protected void onProgressUpdate(Integer... values) {
                // TODO Auto-generated method stub
                super.onProgressUpdate(values);

            }

            @Override
            protected void onPreExecute() {
                // TODO Auto-generated method stub
            }
    }

} 
```

常量.java

```
public final class Constants {

    public static final String[] IMAGES = new String[] {

            "http://wrong.site.com/corruptedLink", // Wrong link
    };

    private Constants() {
    }

    public static class Config {
        public static final boolean DEVELOPER_MODE = false;
    }

    public static class Extra {
        public static final String IMAGES = "com.nostra13.example.universalimageloader.IMAGES";
        public static final String IMAGE_POSITION = "com.nostra13.example.universalimageloader.IMAGE_POSITION";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:18:57.747

**通用图像加载器**

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)。它基于惰性列表（工作原理相同）。但它还有很多其他配置。我更喜欢使用*Universal Image Loader*，因为它为您提供了更多配置选项。如果下载失败，您可以显示错误图像。可以显示带圆角的图像。可以缓存在磁盘或内存上。可以压缩图像。

在您的自定义适配器构造函数中

```
 File cacheDir = StorageUtils.getOwnCacheDirectory(a, "your folder");

 // Get singletone instance of ImageLoader
 imageLoader = ImageLoader.getInstance();
// Create configuration for ImageLoader (all options are optional)
ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(a)
      // You can pass your own memory cache implementation
     .discCache(new UnlimitedDiscCache(cacheDir)) // You can pass your own disc cache implementation
     .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
     .enableLogging()
     .build();
 // Initialize ImageLoader with created configuration. Do it once.
 imageLoader.init(config);
 options = new DisplayImageOptions.Builder()
 .showStubImage(R.drawable.stub_id)//display stub image
 .cacheInMemory()
 .cacheOnDisc()
 .displayer(new RoundedBitmapDisplayer(20))
 .build(); 
```

在你的 getView()

```
 ImageView image=(ImageView)vi.findViewById(R.id.imageview); 
  imageLoader.displayImage(imageurl, image,options);
  //provide imageurl, imageview and options
  //if constant is an array containing urls
  //instead of imageurl use constants[position]. 
```

您可以配置其他选项以满足您的需求。

与通用图像加载器一起，您可以查看持有人以实现平滑滚动和性能。[http://developer.android.com/training/improving-layouts/smooth-scrolling.html](http://developer.android.com/training/improving-layouts/smooth-scrolling.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:37:05.177

```
Try this, 
```

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

```
In GridView Adapter, add this code in your getView() method

ImageLoader imageLoader = new Imageloader(MainActivity.this);
imgLoader.DisplayImage(YOUR IMAGE PATH, YOUR IMAGEVIEW); 
```

# ruby - 带有设计的自定义密码字段（红宝石）

> ID：15828045
> 
> 赞同：5
> 
> 时间：2013-04-05T07:19:16.493
> 
> 标签：ruby, ruby-on-rails-3.1, devise, rubygems

我正在使用在 2 个 rails 应用程序之间共享的数据库。

使用 BCrypt 和 has_secure_password 对用户进行身份验证的 web 应用程序，以及我的应用程序，一个 REST API，使用 Devise 对用户进行身份验证。密码哈希是相同的。

所以，我想使用字段 password_digest 而不是 encrypted_pa​​ssword 通过设计进行身份验证，但我不知道如何！（我在文档中寻找，但一无所获）。所以，我必须将我的密码哈希从 password_digest 复制/粘贴到 encrypted_pa​​ssword 中。

这是我的会话控制器代码：

```
class SessionsController < Devise::SessionsController

before_filter :ensure_params_exist

def create
    build_resource
    resource = User.find_for_database_authentication(:email => params[:email])
    return invalid_login_attempt unless resource

    if resource.valid_password?(params[:password])
        #resource.ensure_authentication_token!  #make sure the user has a token generated
        sign_in("user", resource)
        render :json => { :authentication_token => resource.authentication_token, :lastname => resource.lastname, :firstname => resource.firstname, :last_sign_in => resource.last_sign_in_at }, :status => :created
    return
    end
    invalid_login_attempt
end

#def destroy
#   # expire auth token
#   @user=User.where(:authentication_token=>params[:auth_token]).first
#   @user.reset_authentication_token!
#   render :json => { :message => ["Session deleted."] },  :success => true, :status => :ok
#end

protected
    def ensure_params_exist
        return unless params[:email].blank?
        render :json=>{:success=>false, :message=>"missing email parameter"}, :status=>422
    end

    def invalid_login_attempt
        warden.custom_failure!
        render :json => { :errors => ["Invalid email or password."] },  :success => false, :status => :unauthorized
    end 
```

结尾

然后是我的用户模型

```
 class User < ActiveRecord::Base
  before_save :ensure_authentication_token
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :trackable, :token_authenticatable#, :registerable,
         #:recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me, :client_id, :firstname, :group_id, :lastname, :password, :password_confirmation, :role_id, :group_ids, :auth_token, :password_digest, :encrypted_password

  # Relations dans la base de données
  belongs_to :client
  belongs_to :role

  has_many :memberships
  has_many :groups, :through => :memberships

end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:31:01.370

我不知道 BCrypt/has_secure_password 是如何工作的，但您可以使用虚拟属性，如下所示

```
def encrypted_password
 return password_digest
end

def encrypted_password= value
 return password_digest
end 
```

或者更好的是，使用别名方法 set encrypted_pa​​ssword 和 encrypted_pa​​ssword= 作为 password_digest 和 password_digest= 的别名方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T04:09:07.890

我认为完成这项工作的最佳方法是使用`alias_attribute`. 这个问题可能很久以前就解决了，但我仍然想提出这个问题。

```
alias_attribute :encrypted_password, :password_digest 
```

# java - com.day.cq.search.impl.SimpleSearchImpl 是否公开 addPredicate() 方法？

> ID：15828052
> 
> 赞同：0
> 
> 时间：2013-04-05T07:19:46.160
> 
> 标签：java, jakarta-ee, search, content-management-system, aem

我需要过滤一些页面，以便它们不会出现在搜索中。为此，有一种方法称为

```
addPredicate(new Predicate("mytype", "type").set("group.4_group.1_property", "jcr:content/cq:template")); 
```

此方法不存在于`com.day.cq.wcm.foundation.Search`. 我不确定该`addPredicate`方法存在于哪个 API 中。

在 CQ5 文档中，据说此方法是在 中实现的`SimpleSearchImpl`，它存在于 package 中`com.day.cq.search.impl.SimpleSearchImpl`。但是，当我尝试导入该包时，它会抛出一个错误，指出该包无效。

如果`SimpleSearchImpl`不是`addPredicate`方法所需的类，您能告诉我该方法所需的类是`addPredicate`什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T08:27:05.817

`com.day.cq.search.SimpleSearch`接口是从包中导出的，`cq-search`但不是`com.day.cq.search.impl.SimpleSearchImpl`实现类。

您可以在此处查看导出包的列表：

```
http://localhost:4502/system/console/bundles/com.day.cq.cq-search 
```

您可以通过[调整 Resource](http://wem.help.adobe.com/enterprise/en_US/10-0/wem/developing/sling-adapters.html)或使用[SCR 引用来获得对 SimpleSearch 实现的引用](http://felix.apache.org/documentation/subprojects/apache-felix-maven-scr-plugin/scr-annotations.html)。

Alex Klimetschek 做了一个关于 [使用 QueryBuilder API] [http://www.slideshare.net/alexkli/cq5-querybuilder-adapttoberlin-2011](http://www.slideshare.net/alexkli/cq5-querybuilder-adapttoberlin-2011)的精彩演讲，作为 SimpleSearch 方法的替代方法，这可能有助于理解谓词.

# matlab - ^2 出错，表示矩阵应该是正方形

> ID：15828053
> 
> 赞同：0
> 
> 时间：2013-04-05T07:19:56.843
> 
> 标签：matlab, plot

我想绘制以下内容

```
y=linspace(0,D,100)

temp=y^2;

plot(y,temp); 
```

我收到一个错误`y^2`，它说矩阵应该是正方形的。

有没有另一种方法来绘制。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T07:24:27.403

由于情节，您没有收到该错误。你得到它是因为

```
temp=y^2 
```

相反，您应该使用

```
temp=y.^2 
```

`^`表示矩阵功率。`.^`是元素的力量。[您可以在此处](http://www.mathworks.com/help/matlab/matlab_prog/operators.html)找到有关 MATLAB 运算符的更多信息。

假设您有一个 3x3 矩阵，magic(3)。

```
A=magic(3)
A = 
     8     1     6
     3     5     7
     4     9     2 
```

这是矩阵 A 的平方（如 Dan 建议的那样，它是 A*A）：

```
A^2
ans =

    91    67    67
    67    91    67
    67    67    91 
```

这是包含 A 元素平方的矩阵：

```
A.^2
ans =
    64     1    36
     9    25    49
    16    81     4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:57:58.167

作为上述答案的替代方案，您可以考虑以下情况：

```
A = magic(3);

temp = bsxfun(@times,A,A); 
```

它检索相同的结果

```
temp = A.^2; 
```

操作员`.`将按元素应用您的正方形。`bsxfun`完全一样。

我希望这有帮助。

# python - 无法在我的 webpy 博客中创建类别，使用错误的默认值，使用浏览器方向栏输入（如别名）

> ID：15828055
> 
> 赞同：0
> 
> 时间：2013-04-05T07:20:02.137
> 
> 标签：python, blogs, categories, web.py

我正在尝试使用我尝试制作的 webpy 在我自己开发的博客中制作类别：

> mywebpage.com/c/categorieName

是显示类别的输入（如别名？¿？）

```
 urls = (   
    '/c/(.*)','index'
) 
```

那么索引类是：

```
class index(object):
    def GET(self,cat):
        seleccion = functions.categoria(db,cat)
        #seleccion = db.select('contenido',what="*",order="modificado DESC")
        #print seleccion
        return render.index(seleccion.getThread(),cat) 
```

我有一个带有一些帮助功能的 .py 文档：

```
class categoria(object):
    def __init__(self,datab,nombre='frutas'):
        '''
        Selecciona y asigna una lista o diccionario
        con el contenido de la base de datos dispuesto en
        objetos de la clase noticias.
        '''
        self.datab = datab #objeto database
        self.nombre = nombre #cadena con el nombre de la categoria
        self.n = self.getCat() #calculo del numero de la categoria PROBLEMAS
        self.thread = self.getThread()       

    def getCat(self):
        ''' returns the categorie number stored in the database
        '''
        a = self.datab.select('categorias',where='catName = $nombre', vars=dict(nombre=self.nombre))
        return a[0].catId

    def getThread(self):
        myvars = dict(numero= '%'+str(self.n)+'%' )
        d = self.datab.query("SELECT * FROM contenido WHERE category LIKE $numero", vars= myvars)
        #what="contentTitle,content,'update'",
        return d

    # db.query("SELECT * FROM foo WHERE x = $x", vars=dict(x='f'), _test=False)

    def __str__(self):
        'some more code, doesn't matter' 
```

我正确配置了 mysql 数据库并包含示例内容。我尝试使用该功能运行它，但我采取的最佳结果是为变量**cat**放置一个默认值，该值不允许我使用浏览器方向功能更改视图中的类别。

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:40:33.677

也许问题出在`seleccion.getThread`调用结果上。

在 webpy`db.query`返回`web.iterbetter`中，您只能迭代一次。您可以尝试返回`d.list()`而不是`d`，它将转换`web.iterbetter`为`list`。

UPD：也许我不明白你的问题，所以这是另一个尝试：

`'/c/(.*)','index'`映射意味着类别可以为空，因此您可以像这样在 GET 函数中设置默认值：`def GET(self,cat=None):`或者将映射更改为`'/c/(.+)','index'`，使其不适用于`'/c/'`请求路径。

# asp.net - 我们可以在不使用select语句的情况下选择表数据吗

> ID：15828057
> 
> 赞同：-13
> 
> 时间：2013-04-05T07:20:08.000
> 
> 标签：asp.net, mysql, sql

是否可以在不使用 select 语句的情况下使用索引来选择数据...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:21:42.670

**不**，你不能，无论如何你必须使用它。您可以使用存储过程并从 asp.net 调用它们，但`stored procedure`必须`select statement`从表中获取数据。

# r - 在 R 中添加带有颜色和范围的图例

> ID：15828058
> 
> 赞同：5
> 
> 时间：2013-04-05T07:20:12.193
> 
> 标签：r, colors, legend

以下示例代码根据 的值生成彩色点图`a`：

```
a <- sample(1:100)
rbPal <- colorRampPalette(c('red','blue'))
b <- rbPal(10)[as.numeric(cut(a,breaks = 10))]
plot(a,col=b,pch=16) 
```

我想在该图中添加一个图例，指示颜色所指的值范围。就像是：

```
 "#C60038" - [20.7 - 30.7]
 "#5500AA" - [60.4 - 70.3] 
```

（以上颜色代码为彩色圆点）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T07:27:51.487

您可以`cut()`使用函数将级别保存为单独的变量`levels()`。使用功能`gsub()`，您可以替换`,`为`-`和。然后在函数中提供图例的位置，用作标签的变量，将在图例中使用相同的 10 种颜色并制作实心点。`(``[``legend()``cuts``col=rbPal(10)``pch=16`

```
cuts<-levels(cut(a,breaks = 10))
cuts<-gsub(","," - ",cuts)
cuts<-gsub("\\(","[",cuts)
cuts
 [1] "[0.901 - 10.8]" "[10.8 - 20.7]"  "[20.7 - 30.7]"  "[30.7 - 40.6]"  "[40.6 - 50.5]"  "[50.5 - 60.4]"  "[60.4 - 70.3]" 
 [8] "[70.3 - 80.3]"  "[80.3 - 90.2]"  "[90.2 - 100]"  
plot(a,col=b,pch=16)
legend("top",cuts,col=rbPal(10),pch=16) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Pwqb2.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:30:45.260

如果你想产生你描述的确切图例，你可以使用`legend`这种方式：

```
a <- sample(1:100)
rbPal <- colorRampPalette(c('red','blue'))
b <- rbPal(10)[as.numeric(cut(a,breaks = 10))]
plot(a,col=b,pch=16)
legend('topright', legend=c("[20.7 - 30.7]", "[60.4 - 70.3]"), col=c("#C60038","#5500AA"), pch=16) 
```

这会给：

![在此处输入图像描述](https://i.stack.imgur.com/elAKk.png)

我建议您看一下`ggplot2`，它可以在自动创建图例的同时生成出色的图形，例如：

```
x <- sample(1:100)
y <- sample(1:100)
fact <- runif(100)
df <- data.frame(x,y,fact)
ggplot(data=df, aes(x=x,y=y,col=fact)) + geom_point() 
```

![在此处输入图像描述](https://i.stack.imgur.com/jF1Gm.png)

# .net - 代码编写优化

> ID：15828059
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:20:14.360
> 
> 标签：.net, vb.net

我有一个类人，具有 id、name、salary 属性。

```
class person
    friend id as long
    friend name as string
    friend salary as decimal
end class 
```

我不想列出工资清单。

```
Dim pList as new list(of person) 
```

pList 加载了 50 个条目

```
Dim SalaryList as new list(of decimal)
for each p as person in plist
    SalaryList.add(p.salary)
next 
```

好的，这行得通。但是有没有办法做到这一点：

```
Dim SalaryList as list(of decimal) = pList(each).salary 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:30:19.117

您可以使用[`Select`](http://msdn.microsoft.com/en-us/library/bb548891.aspx)投影：

```
Dim SalaryList = pList.Select(Function(p) p.salary).ToList() 
```

或者

```
Dim SalaryList = From p in pList
                 Select p.salary 
```

请注意，后者仅返回查询 ( `IEnumerable(Of Decimal)`) 而不是`List`. 如果您真的需要 a `List`，请调用[`ToList()`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)查询，但通常没有必要。

# c++ - 在 UML 中对类的引用/指针建模的正确形式是什么？

> ID：15828060
> 
> 赞同：3
> 
> 时间：2013-04-05T07:20:16.507
> 
> 标签：c++, uml

您有两个班级：A 级和 B 级。

为了成为实例，B 类需要有一个成员，即 A 类的对象。而且，B 类具有 A 类的所有特性，但不包括允许修改 A 类对象的功能。

B 类也有一些额外的特性，不使用继承的原因是因为如果 A 类的对象（用于实例 B 的对象）被更改，因此 B 类的实例的值也必须是改变了。

我用聚合来表示这种行为，但有些事情我不确定。一种是当 A 类的对象被销毁时，B 类的对象不会被销毁（即使对象 B 不再有意义，访问它的某些特性会引发运行时失败）。

我的意思是 B 类的对象引用 A 类的对象，而不是相反，就像在正常聚合中，通常对象将包含 B 类的对象。

这是否意味着它不是聚合而是组合？即使对象在被引用对象的生命周期结束后没有任何意义？或者这种行为应该如何成为模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:41:01.203

看这里 [http://en.wikipedia.org/wiki/Object_composition#Aggregation](http://en.wikipedia.org/wiki/Object_composition#Aggregation)

相反的聚合并不意味着所有权。这是你的情况。

销毁聚合对象后对象的行为如何，这与类图无关。

# java - 原始getter / setter方法需要java同步关键字？

> ID：15828067
> 
> 赞同：13
> 
> 时间：2013-04-05T07:20:48.637
> 
> 标签：java, synchronized

我读了一些java代码，发现了这些函数：

```
synchronized void setConnected(boolean connected){
   this.connected = connected;
}

synchronized boolean isConnected(){
   return connected;
} 
```

我想知道同步在这里是否有意义，或者只是作者不了解同步关键字的必要性？

我想同步在这里没用。还是我弄错了？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-05T07:24:13.160

关键字`synchronized`是确保线程安全的一种方式。当心：线程安全的（方式）比死锁​​更多，或者由于两个线程在没有同步的情况下递增一个 int 而丢失更新。

考虑以下类：

```
class Connection {
  private boolean connected; 
  synchronized void setConnected(boolean connected){
    this.connected = connected;
  }
  synchronized boolean isConnected(){
    return connected;
  }
} 
```

如果多个线程共享一个实例`Connection`并且一个线程调用`setConnected(true)`，`synchronized`那么其他线程就不可能一直看到`isConnected() == false`。该`synchronized`关键字保证所有线程都能看到该字段的当前值。

用更专业的术语来说，`synchronized`关键字确保了**内存屏障**（提示：google that）。

更详细地说：在释放监视器之前（即，在离开`synchronized`块之前）进行的每次写入都保证在获取相同监视器之后（即，在进入与同一对象同步的块之后）进行的每次读取都可以看到。在 Java 中，有一种叫做*先发生*（提示：google that）的东西，它不像“我按这个顺序编写代码，所以事情按这个顺序执行”那么简单。Using`synchronized`是一种建立前发生关系并保证线程看到内存的方法，就像你期望他们看到的那样。

在这种情况下，实现相同保证的另一种方法是消除`synchronized`关键字并标记字段`volatile`。提供的保证`volatile`如下：线程在 volatile 写入之前所做的所有写入都保证在后续对同一字段的 volatile 读取之后对线程可见。

最后一点，在这种特殊情况下，使用`volatile`字段而不是`synchronized`访问器可能会更好，因为这两种方法提供相同的保证，并且`volatile`-field 方法允许从不同线程同时访问该字段（如果`synchronized`版本争用太多）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T07:28:54.407

这里需要同步以防止内存一致性错误，请参阅[http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/memconsist.html)。尽管在这种具体情况下`volatile`将是更有效的解决方案

```
private volatile boolean connected;

void setConnected(boolean connected){
   this.connected = connected;
}

boolean isConnected(){
   return connected;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T07:25:03.483

作者可能在设计代码时考虑了多线程方法。这意味着方法是同步的，并且多个线程将无法同时访问同一对象实例上的同步代码。

# django - Django 按组计数

> ID：15828068
> 
> 赞同：4
> 
> 时间：2013-04-05T07:20:48.743
> 
> 标签：django

我需要创建一个报告，我可以在其中获取一年中每个月的值。

模型.py

```
class Ask(models.Model):
      team = models.CharField(max_length=255)
      date = models.DateField() 
```

团队中只有三个可能的值：A、B、C。

我如何计算每个月添加个人团队的次数？

我想为每年生成一份报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:19:53.520

我建议您在模型中添加`month`字段并在那里传递一个月`save`。这是帮助你运行这个：

```
from django.db.models import Count
Ask.objects.filter(date__year='2013').values('month', 'team').annotate(total=Count('team')) 
```

其他方法是使用[额外的](https://docs.djangoproject.com/en/dev/ref/models/querysets/#extra)参数并从日期字段中提取月份：

```
from django.db.models import Count
Ask.objects.filter(date__year='2013').extra(select={'month': "EXTRACT(month FROM date)"}).values('month', 'team').annotate(Count('team')) 
```

但[EXTRACT](http://www.w3schools.com/sql/func_extract.asp)方法依赖于数据库，例如在 SQLite 中不起作用

# javascript - 使用 JavaScript 在 CheckBox 中使用多级过滤器

> ID：15828069
> 
> 赞同：1
> 
> 时间：2013-04-05T07:20:51.837
> 
> 标签：javascript, jquery

我有一个过滤结果的复选框列表。带选项：

> 水疗(7)
> 酒吧(3)
> 水疗/酒吧(4)

括号（7,3,4）中的值分别表示具有上述设施的房间总数。当我选择 Spa 时，我想要的列表应该只显示 7 个结果（我有 7 个带 Spa 设施的房间）当我选择 Bar 时，我想要的列表应该只显示 3 个结果（我有 3 个带 BarFacility 的房间）当我选择 Spa/酒吧，那么我想要的列表应该只显示 4 个结果（我有 4 个带水疗/酒吧的房间）

如果我同时选择 Spa/Bar 和 Spa，那么我应该只得到 4 个结果。如果我同时选择 Spa/Bar 和 Bar，那么我应该只得到 3 个结果。

我面临的问题：当我选择 Spa/Bar and Spa 时，我得到 7 个结果。

代码 ：

```
 var selectedthemes = themes.split(',');
    var hotelThemes = '';
    var isThemeExist = false;
    for (var j = 0; j < e.HTName.length; j++) {
    if (e.HTName[j].HTName != null && typeof (e.HTName[j].HTName) != 'undefined')
    hotelThemes += (hotelThemes != "" ? "," : "") + 
    $.trim(e.HTName[j].HTName.toLowerCase());
    }

    for (var i = 0; i < selectedthemes.length; i++) {
    if (hotelThemes.indexOf($.trim(selectedthemes[i].toLowerCase())) >= 0)
    { isThemeExist = true; }
    else
    { return false; }
    }

    return isThemeExist; 
```

# c - 需要帮助调整位图文件的大小

> ID：15828071
> 
> 赞同：1
> 
> 时间：2013-04-05T07:21:09.507
> 
> 标签：c

我正在尝试调整位图文件的大小。该文件只是一个从命令提示符获取的常规文件，它采用一个整数来确定文件将被调整多少，并且一旦被接收，就会被处理并输出该文件的调整大小的图像。我觉得我很接近，但接近并不总是重要的。这是我的代码：

```
for (int i = 0, BHeight=abs(bi.biHeight);i<BHeight; i++)
{
    buffer = malloc(sizeof(RGBTRIPLE) * bi.biWidth); 

    // iterate over pixels in scanline
    for (int j = 0; j < bi.biWidth; j++)
    {
        fread(&triple, sizeof(RGBTRIPLE), 1, inptr);
        // temporary storage
        for (int k=0; i<factor;k++)
        {
            buffer[k]=triple;
        }

    }    //iterate over each pixel factor times  

    // write RGB triple to outfile 
    for(int i=0;i<factor;i++)
    {
        fwrite(&buffer[i], sizeof(RGBTRIPLE),1,outptr); 
    } 
} 
```

也许有人可以引导我朝着正确的方向前进。另外，我故意没有发布所有代码。但是，如果需要一切来诊断问题，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:27:16.470

您的 I/O 很可怕，您可能应该在开始处理*之前将所有图像加载到内存中。*

大多数缩放算法都需要对相邻像素进行 2D 访问；一次缩放一条扫描线会导致无法正确过滤，并且结果会很差。

此外，当然您必须修改位图文件的标题并在缩放后发出适当调整的标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-14T08:40:26.963

```
for (int k = 0; i < factor; k++)
{
    buffer[**k**] = triple;
} 
```

首先更改变量`k`，`buffer[k]`你必须初始化一个新变量`buffer[*]`，其值等于循环运行的次数，否则如果循环继续，缓冲区的值将被覆盖。

* * *

在下面的代码中

```
// write RGB triple to outfile 
for(int i = 0; i < factor; i++)
{
    fwrite(&buffer[i], sizeof(RGBTRIPLE), 1, outptr); 
} 
```

您不需要使用缓冲区的索引 in `buffer[i]`，因为当`fwrite`函数写入 outfile 时，光标会自动移动到下一个空白位置，就像您用键盘输入内容一样，光标会自动向右移动。而且，现在你假设要写一个扫描线或行，因素时间来输出文件，所以需要使用`bi.biWidth`instesd 的`1`. 因为您需要写一整行或`scanline`而不是一个像素。

* * *

所以你更正的代码会喜欢这样：

```
// iterate over pixels in scanline
for (int j = 0; j < bi.biWidth; j++)
{
    int cur = 0;
    fread(&triple, sizeof(RGBTRIPLE), 1, inptr);
    // temporary storage
    for (int k = 0; i < factor; k++)
    {
        buffer[cur] = triple;
        cur++;
    }

}    //iterate over each pixel factor times  

// write RGB triple to outfile 
for (int i = 0; i < factor; i++)
{
    fwrite(&buffer, sizeof(RGBTRIPLE), bi.biWidth, outptr); 
} 
```

希望对你有帮助

# r - ARMA(1,1)-GARCH(1,1) 的最大似然估计

> ID：15828073
> 
> 赞同：1
> 
> 时间：2013-04-05T07:21:15.920
> 
> 标签：r, optimization, volatility

遵循一些关于 ARMA(1,1)-GARCH(1,1) 的标准教科书（例如 Ruey Tsay 的金融时间序列分析），我尝试编写一个 R 程序来估计 ARMA(1,1) 的关键参数-英特尔股票收益的 GARCH(1,1) 模型。由于某种随机原因，我无法破译我的 R 程序出了什么问题。R 包 fGarch 已经给了我答案，但是我的自定义函数似乎没有产生相同的结果。

我想构建一个 R 程序来帮助估计基线 ARMA(1,1)-GARCH(1,1) 模型。然后我想调整这个基线脚本以适应不同的 GARCH 变体（例如 EGARCH、NGARCH 和 TGARCH）。如果您能在这种情况下提供一些指导，我们将不胜感激。下面的代码是用于估计英特尔股票收益的 ARMA(1,1)-GARCH(1,1) 模型的 6 个参数的 R 脚本。无论如何，我很高兴知道您的想法和见解。如果您有类似的示例，请随时分享您在 R 中的现有代码。非常感谢提前。

艾米丽

```
# This R script offers a suite of functions for estimating  the volatility dynamics based on the standard ARMA(1,1)-GARCH(1,1) model and its variants.
# The baseline ARMA(1,1) model characterizes the dynamic evolution of the return generating process. 
# The baseline GARCH(1,1) model depicts the the return volatility dynamics over time.
# We can extend the GARCH(1,1) volatility model to a variety of alternative specifications to capture the potential asymmetry for a better comparison:
# GARCH(1,1), EGARCH(1,1),  NGARCH(1,1), and TGARCH(1,1).

options(scipen=10)

intel= read.csv(file="intel.csv")
summary(intel)

raw_data= as.matrix(intel$logret)

library(fGarch)
garchFit(~arma(1,1)+garch(1,1), data=raw_data, trace=FALSE)

negative_log_likelihood_arma11_garch11=
function(theta, data)
{mean =theta[1]
 delta=theta[2]
 gamma=theta[3]
 omega=theta[4]
 alpha=theta[5]
 beta= theta[6]

 r= ts(data)
 n= length(r)

 u= vector(length=n)
 u= ts(u)
 u[1]= r[1]- mean

 for (t in 2:n)
 {u[t]= r[t]- mean- delta*r[t-1]- gamma*u[t-1]}

 h= vector(length=n)
 h= ts(h)
 h[1]= omega/(1-alpha-beta)

 for (t in 2:n)
 {h[t]= omega+ alpha*(u[t-1]^2)+ beta*h[t-1]}

 #return(-sum(dnorm(u[2:n], mean=mean, sd=sqrt(h[2:n]), log=TRUE)))
 pi=3.141592653589793238462643383279502884197169399375105820974944592
 return(-sum(-0.5*log(2*pi) -0.5*log(h[2:n]) -0.5*(u[2:n]^2)/h[2:n]))
}

#theta0=c(0, +0.78, -0.79, +0.0000018, +0.06, +0.93, 0.01)
theta0=rep(0.01,6)
negative_log_likelihood_arma11_garch11(theta=theta0, data=raw_data)

alpha= proc.time()
maximum_likelihood_fit_arma11_garch11=
nlm(negative_log_likelihood_arma11_garch11,
    p=theta0,
    data=raw_data,
    hessian=TRUE,
    iterlim=500)
#optim(theta0, 
#      negative_log_likelihood_arma11_garch11,
#      data=raw_data,
#      method="L-BFGS-B",
#      upper=c(+0.999999999999,+0.999999999999,+0.999999999999,0.999999999999,0.999999999999,0.999999999999),
#      lower=c(-0.999999999999,-0.999999999999,-0.999999999999,0.000000000001,0.000000000001,0.000000000001),
#      hessian=TRUE)

# We record the end time and calculate the total runtime for the above work.
omega= proc.time()
runtime= omega-alpha
zhours = floor(runtime/60/60)
zminutes=floor(runtime/60- zhours*60)
zseconds=floor(runtime- zhours*60*60- zminutes*60)
print(paste("It takes ",zhours,"hour(s)", zminutes," minute(s) ","and ", zseconds,"second(s) to finish running this R program",sep=""))

maximum_likelihood_fit_arma11_garch11

sqrt(diag(solve(maximum_likelihood_fit_arma11_garch11$hessian))) 
```

# asp.net-mvc-3 - 帖子 ID 在表单中不起作用

> ID：15828078
> 
> 赞同：0
> 
> 时间：2013-04-05T07:21:29.487
> 
> 标签：asp.net-mvc-3

我有一个帖子，我在其中定义了一个新的数据库实体。用户输入所需的值并提交表单后，我插入实体并将其发布回同一页面并显示其 ID。当我进入 ID 区域时`disabled`，`readonly`如下所示，它工作得很好。

```
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)
    <fieldset>

    ID:
    @Html.TextBoxFor(model => model.ID, new { disabled = "disabled", @readonly = "readonly" })

    <p><input type="submit" name="submit" value="Create" /></p>
    </fieldset>
} 
```

但是，当我仅`readonly`按如下方式输入时，它会插入实体，但不会查看 ID。

```
@Html.TextBoxFor(model => model.ID, new { @readonly = "readonly" }) 
```

我在表单中有另一个提交，它使用实体 ID。但是，我不能`disabled`在此处使用 ID 区域，因为它不会发布 ID 值。我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:37:32.513

`disabled`您可以在提交之前启用该字段。因此，请保持禁用 ID 字段。现在，在提交时启用它。IE; 如果您在“myButton”单击上提交表单，请将其添加到`document.ready()`：

```
$('#myButton').click(function(e)
{
    e.preventDefault();
    $("#ID").removeAttr('disabled');
    $('form').submit();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T00:31:49.323

我没有使用html扩展，而是直接写了：

```
<input type="text" name="ID" value="@Model.ID" readonly /> 
```

它就像一个魅力。

# c++ - 无法让 ios::beg 回到文件开头

> ID：15828081
> 
> 赞同：0
> 
> 时间：2013-04-05T07:21:45.573
> 
> 标签：c++, text, file-io

似乎总是对我造成问题的事情应该没问题。我不明白。：/

所以我试图确保我了解如何操作文本文件。我有两个文件，“infile.txt”和“outfile.txt”。“infile.txt”里面有六个数字，没有别的。这是我用来操作文件的代码。

```
#include<fstream>
using std::ifstream;
using std::ofstream;
using std::fstream;
using std::endl;
using std::ios;

int main()
{
ifstream inStream;
ofstream outStream;//create streams

inStream.open("infile.txt", ios::in | ios::out);
outStream.open("outfile.txt");//attach files

int first, second, third;
inStream >> first >> second >> third;
outStream << "The sum of the first 3 nums is " << (first+second+third) << endl;
//make two operations on the 6 numbers
inStream >> first >> second >> third;
outStream << "The sum of the second 3 nums is " << (first+second+third) << endl;

inStream.seekg(0); //4 different ways to force the program to go back to the beginning of the file
//2\. inStream.seekg(0, ios::beg);
//3\. inStream.seekg(0, inStream.beg);
//4\. inStream.close(); inStream.open("infile.txt");
//I have tried all four of these lines and only #4 works. 
//There has got to be a more natural option than just 
//closing and reopening the file. Right?

inStream >> first >> second >> third;
outStream << "And again, the sum of the first 3 nums is " << (first+second+third) << endl;

inStream.close();
outStream.close();
return 0;
} 
```

也许我不太了解流的工作原理，但我看到一些消息来源说 seekg(0) 应该将索引移回文件的开头。相反，这就是我从中得到的。

> 前 3 个数字之和为 8
> 
> 后 3 个数字之和为 14
> 
> 再一次，前 3 个数字的总和是 14

它回来了，但几乎不像我希望的那样。知道为什么会这样吗？为什么我的前三个尝试都失败了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:34:33.743

正如 Bo Persson 所说，这*可能*是因为您的输入遇到了文件结尾；它不应该，因为在 C++ 中，文本文件被定义为由 a 终止`'\n'`，但实际上，如果你在 Windows 下工作，很多生成文件的方法都会省略这个`'\n'`final——尽管它是正式要求的, 实际考虑将意味着即使`'\n'`缺少决赛，您也将确保它有效。而且我想不出任何其他原因为什么 `seekg`' 不起作用。 `inStream.seekg( 0 )`当然，这是未定义的行为，但在实践中，它几乎可以在任何地方工作。 *如果*并且是 恕我直言，比第一种形式更可取，`inStream.seekg( 0, ios::beg )`则保证可以工作。（单参数形式 *`inStream.good()``seekg`通常仅与 a 的结果一起`tellg`用作参数。）当然，它仅在实际输入源支持搜索时才有效：如果您从键盘或管道读取（但大概`"infile.txt"`是两者都不）。*

 *通常，您应该`inStream`在每次读取后检查状态，然后再使用结果。但是，如果唯一的问题是文件不以 结尾，那么即使您遇到文件结尾，最终读取后`'\n'`状态也可能会是 OK ( )。`!fail()`在这种情况下，无论如何你都需要`clear()` 。

请注意，上述注释适用于 C++-03 和先例。C++11 更改了 的单参数形式的规范，并要求它在其他任何事情*之前*`seekg`重置。（为什么这种变化只针对 的单参数形式 ，而不是两个参数形式？监督？）`eofbit` *`seekg`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:27:09.407

第二个输入到达流的文件结尾。该状态一直存在，直到您调用`inStream.clear()`清除其状态（除了搜索）。

使用符合 C++11 的编译器，选项 4 也应该像 close 和重新打开一样工作，现在将清除以前的状态。较旧的编译器可能不会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:24:59.203

尝试：

```
inStream.seekg(0, ios_base::beg); 
```**

# .net - 如何在 Visual Studio 中使用 .dll 类文件？

> ID：15828087
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:22:12.290
> 
> 标签：.net, visual-studio

我已经从 codeplex.com 下载了一个 .dll 文件的文件夹，以便在我的项目中添加和使用一个类，但我不知道如何使用它们。它是关于 c# 的 zip 文件，这里是链接： [http:// dotnetzip.codeplex.com/](http://dotnetzip.codeplex.com/)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:25:07.773

[添加](http://msdn.microsoft.com/en-us/library/wkze6zky%28v=vs.110%29.aspx)对 DLL 的引用并尝试示例代码：

```
 using (ZipFile zip = new ZipFile())
 {
     // add this map file into the "images" directory in the zip archive
     zip.AddFile("c:\\images\\personal\\7440-N49th.png", "images");
     // add the report into a different directory in the archive
     zip.AddFile("c:\\Reports\\2008-Regional-Sales-Report.pdf", "files");
     zip.AddFile("ReadMe.txt");
     zip.Save("MyZipFile.zip");
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:24:39.653

将它们作为引用添加到您的项目/解决方案中，并`using`在您希望使用的每个名称空间中包含语句。

然后这些类将可在您的应用程序中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:26:19.213

一般来说，当你想使用一个库时，你会想从阅读文档开始。

如果您扫描图书馆的主页，通常可以找到指向它的链接。在这种情况下，“文档”是屏幕顶部的选项卡。如果[单击它](http://dotnetzip.codeplex.com/documentation)，您将进入一个带有两个链接的页面：

*   [参考文档](http://dotnetzip.herobo.com/DNZHelp/Index.html)
*   [大量示例](http://dotnetzip.codeplex.com/wikipage?title=Examples&referringTitle=Documentation)，用于 VB、C#、Powershell 等。

这两个页面都是开始阅读以了解如何使用图书馆的好地方。

他们可能会告诉您下载`Ionic.Zip.dll`，将其引用添加到您的项目中，然后创建该`ZipFile`对象的实例。任何关于您选择的语言方言的好书都会有一节介绍如何添加对外部库的引用。

# xpages - Xpage extlib Dialog keepComponents true 和 JSF 组件

> ID：15828089
> 
> 赞同：0
> 
> 时间：2013-04-05T07:22:22.373
> 
> 标签：xpages, xpages-extlib

我对扩展库中的对话框控件有疑问：

我创建了一个 java 自定义控件，它可以搜索一些视图、收集一些数据并显示它。如果我将它放在 XPage 上，这很好用。

但我想在对话框中显示数据，所以我使用了扩展库中的对话框控件。在没有任何配置的情况下使用 Dialog 控件也可以正常工作，但是每次打开对话框时，我的控件都需要一些时间来搜索视图并显示数据。因此，为了减少用户的等待时间，我想使用`"keepComponents="true"`来自对话控制。

现在，如果我第一次打开对话框，一切都是完美的，但是如果我第二次打开它，它会显示第一次打开的内容以及来自我的 controlRenderer 的错误，它告诉我它无法从控件中获取 viewName . 每次我打开和关闭对话框时都会出现此错误。

我在 OpenNtf 上找到了一个帖子，来自某人在使用此选项时在他的对话框中遇到了多个内容的相同问题，但他没有得到任何问题的答案。这是组件的错误吗？我应该忘记这个选项并将我的数据缓存在一个 bean 中吗？为什么渲染器无法从组件中获取 Viewname？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T06:48:04.710

下面的答案假定您问题中的短语“java custom control”是指您开发的 JSF 组件；在 XPages 中，术语“自定义控件”通常指的是自定义控件设计元素的实例，它是 IBM 对“复合组件”的 JSF 概念的实现。

您已声明该组件最初按预期运行，但在后续请求中失败。这通常表明组件的`restoreState`和`saveState`方法没有正确实现。

当为应用程序启用默认序列化选项时，所有组件状态都会在每个请求结束时写入磁盘，并在下一次请求开始时读回内存。这两个操作分别由各个组件的`saveState`和方法处理。`restoreState`

例如，假设您定义了一个用于将 HTML 画布标签添加到 XPage 的组件，并决定支持与该元素关联的手势和触摸事件。因此，您的组件类将包含用于存储绑定到这些事件的任何代码的字段：

```
private String ongesturechange;
private String ongestureend;
private String ongesturestart;
private String ontouchcancel;
private String ontouchend;
private String ontouchmove;
private String ontouchstart; 
```

这些字段中的每一个通常都会有一个关联的“getter”和“setter”方法：

```
public String getOngesturechange() {
    return getStringProperty("ongesturechange", this.ongesturechange);
}

public void setOngesturechange(String ongesturechange) {
    this.ongesturechange = ongesturechange;
} 
```

当初始化该组件的实例时，与为该组件实例定义的每个属性关联的“setter”方法将传递为该属性定义的值。然后，对于初始页面请求的剩余部分，每个已定义属性的私有字段将存储设置的值。在请求结束时，该`saveState`方法将这些字段的值写入磁盘。典型的`saveState`方法类似于以下内容：

```
@Override
public Object saveState(FacesContext context) {
    Object[] properties = new Object[8];
    int idx = 0;
    properties[idx++] = super.saveState(context);
    properties[idx++] = this.ongesturechange;
    properties[idx++] = this.ongestureend;
    properties[idx++] = this.ongesturestart;
    properties[idx++] = this.ontouchcancel;
    properties[idx++] = this.ontouchend;
    properties[idx++] = this.ontouchmove;
    properties[idx++] = this.ontouchstart;
    return properties;
} 
```

调用`super.saveState()`执行相同的方法，但使用父类中定义的方法版本。因此，每个组件的磁盘表示本质上是一个嵌套数组：层次结构中的每一层都将其从其父类继承的所有属性存储在数组的第一个元素中，然后将其定义的所有属性存储在其他数组元素中.

当组件树在后续请求中恢复时，每个组件都会使用其`restoreState`方法来重构其所有字段的值。典型的`restoreState`方法类似于以下内容：

```
@Override
public void restoreState(FacesContext context, Object state) {
    Object[] properties = (Object[]) state;
    int idx = 0;
    super.restoreState(context, properties[idx++]);
    this.ongesturechange = ((String) properties[idx++]);
    this.ongestureend = ((String) properties[idx++]);
    this.ongesturestart = ((String) properties[idx++]);
    this.ontouchcancel = ((String) properties[idx++]);
    this.ontouchend = ((String) properties[idx++]);
    this.ontouchmove = ((String) properties[idx++]);
    this.ontouchstart = ((String) properties[idx++]);
} 
```

这分层地读回磁盘上的数据：每个类将一组属性传递给父类，然后将剩余的数组元素分配给保存组件状态时与它们关联的字段。

这个过程提供了一种跨请求维护组件状态的简单方法——每个继承层只需要关注层定义的新属性——但是这些状态维护方法很容易忘记实现。如果组件实现中省略了任一方法，则页面会“忘记”后续请求中的属性值，因为它们要么从未写入磁盘，要么未加载回内存，或两者兼而有之。

`false`假设这是您的问题的根本原因，当组件位于具有默认 ( ) 值的对话框中时，问题不会发生的原因`keepComponents`是，默认对话框行为是在对话框关闭。这种行为是出于性能原因：从理论上讲，存储仅存在于用户当前未与之交互的对话框中的组件的服务器端表示并没有任何好处。当对话框再次打开时，一个*新的*每个子组件的实例都是使用原始属性值创建的。在这种情况下，您的组件不保存其状态并不重要，因为每次使用它时，都会创建一个新实例。但是如果对话框被告知将其子级保留在组件树中，那么现在组件必须正确维护自己的状态......否则它的属性值在每个请求结束时被丢弃，并且后续请求不知道先前的值。

总之，是的，如果数据不太可能在请求之间发生足够的变化以证明在每个事件期间再次获取数据是合理的，那么您正在显示的数据应该缓存在 bean（或数据源）中。但是您所描述的特定行为的原因很可能是因为您的组件实现没有正确维护自己的状态。

# android - CoMIRVA包可以在android中使用吗？

> ID：15828091
> 
> 赞同：0
> 
> 时间：2013-04-05T07:22:24.977
> 
> 标签：android, speech-recognition, mfcc

我计划实时提取 MFCC 特征，以便在我的 android 应用程序中用于语音识别。同样，我发现在 java 中有一个名为 CoMIRVA 的包。我尝试将包用于我的应用程序，但出现了一些错误。

这是我创建 MFCC 类对象的代码部分。浮动采样率=8000；私有 MFCC mfcc_inst=新 MFCC（采样率）；

我还没有开始使用类中的任何方法。应用程序的其余部分包含使用 AudioRecord 和 AudioTrack 类进行实时音频录制和播放的代码。当我运行应用程序时，我在创建对象的行出现错误。我在下面发布日志文件的相关部分

E/AndroidRuntime(871)：致命异常：主要

E/AndroidRuntime(871): java.lang.VerifyError: comirva/audio/util/math/Matrix

E/AndroidRuntime(871)：在 comirva.audio.util.MFCC.getMelFilterBanks(MFCC.java:267)

E/AndroidRuntime(871): 在 comirva.audio.util.MFCC.(MFCC.java:162)

E/AndroidRuntime(871): 在 comirva.audio.util.MFCC.(MFCC.java:71)

E/AndroidRuntime(871)：在 com.example.mfcc.MFCCActivity.(MFCCActivity.java:46)

E/AndroidRuntime(871)：在 java.lang.Class.newInstanceImpl(Native Method)

E/AndroidRuntime(871)：在 java.lang.Class.newInstance(Class.java:1319)

E/AndroidRuntime(871)：在 android.app.Instrumentation.newActivity(Instrumentation.java:1023)

E/AndroidRuntime(871)：在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)

E/AndroidRuntime(871)：在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)

E/AndroidRuntime(871): 在 android.app.ActivityThread.access$600(ActivityThread.java:123)

E/AndroidRuntime(871): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)

E/AndroidRuntime(871)：在 android.os.Handler.dispatchMessage(Handler.java:99)

E/AndroidRuntime(871): 在 android.os.Looper.loop(Looper.java:137)

E/AndroidRuntime(871): 在 android.app.ActivityThread.main(ActivityThread.java:4424)

E/AndroidRuntime(871)：在 java.lang.reflect.Method.invokeNative(Native Method)

E/AndroidRuntime(871)：在 java.lang.reflect.Method.invoke(Method.java:511)

E/AndroidRuntime(871)：在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)

E/AndroidRuntime(871): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)

E/AndroidRuntime(871): 在 dalvik.system.NativeStart.main(Native Method)

谢谢！！

# websphere-6.1 - Websphere 应用程序服务器未启动

> ID：15828102
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:23:15.990
> 
> 标签：websphere-6.1

**我们有一个 Websphere 应用程序服务器实例，它因 OutOfMemory 而停机，并且在那之后没有启动。下面的日志中的错误消息。任何紧急帮助将不胜感激。WAS 版本是 6.0.2.33**

注册 JVM MBean 时出现问题。在 com.ibm.ws.management.component.AdminImpl.initialize(AdminImpl.java:405) ... 14 更多原因：com.ibm.websphere.management.exception.AdminException：**ADMN0005E: 服务无法激活 MBean：类型 JVM，协作者**com.ibm.ws.management.component.JVMMBean@6da65714，配置 ID JVM，描述符为空。在 com.ibm.ws.management.MBeanFactoryImpl.activateMBean(MBeanFactoryImpl.java:654) 在 com.ibm.ws.management.MBeanFactoryImpl.activateMBean(MBeanFactoryImpl.java:400) 在 com.ibm.ws.management.component.AdminImpl .initialize(AdminImpl.java:394) ... 14 更多原因：com.ibm.websphere.management.exception.DescriptorParseException: ADMN0001W: 服务无法解析 MBean 描述符文件 com/ibm/ws/management/descriptor /xml/JVM.xml。在 com.ibm.ws.management.descriptor.MBeanDescriptorLoader.loadDescriptor(MBeanDescriptorLoader.java:164) 在 com.ibm.ws.management.descriptor.MBeanDescriptorManager.loadDescriptorFile(MBeanDescriptorManager.java:349) 在 com.ibm.ws.management .descriptor.MBeanDescriptorManager。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:37:34.390

我认为您的 websphere 正在尝试使用 SUN JDK/JRE 而不是 IBM JDK/JRE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T06:06:54.057

您可以删除 Websphere 服务器的所有实例，然后您需要重新启动它并同步节点、节点代理，然后才能在 WAS 的环境路径中检查 jdk 版本。

# validation - Symfony 1.4 验证错误未签名

> ID：15828103
> 
> 赞同：2
> 
> 时间：2013-04-05T07:23:17.747
> 
> 标签：validation, save, symfony-1.4, symfony-forms, unsigned

当我尝试在 Symfony 1.4 中保存表单时，它给了我这些错误：

```
Validation failed in class CmsContentElementFile
4 fields had validation errors:

* 1 validator failed on title (unsigned)
* 1 validator failed on alt (unsigned)
* 1 validator failed on link (unsigned)
* 2 validators failed on direction (length, unsigned) 
```

这个错误是什么意思？

编辑：

来自表单字段的验证器：

```
 $this->setValidators(array(
              'title'      => new sfValidatorString(),
              'alt'        => new sfValidatorString(),
              'link'       => new sfValidatorString(),
              'width'      => new sfValidatorInteger(),
              'height'     => new sfValidatorInteger(),
              'direction'  => new sfValidatorPass()
          )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:30:37.420

现在可以了。问题是我给字段“方向”提供了参数“unsigned:1”，它也是一个 varchar。那可以解决问题。希望它对某人有所帮助。

# arrays - 如何优化heroku上的相交

> ID：15828109
> 
> 赞同：2
> 
> 时间：2013-04-05T07:23:32.907
> 
> 标签：arrays, postgresql, heroku

我有 postgresql 查询，我在其中检查两个数组的交集长度。我的查询的非常简化版本如下所示：

```
SELECT array_length(users.array & Array[1,2,3,4]) from users; 
```

它是更大查询的一部分，但这在这里并不重要。它在我的本地数据库上运行良好，但在 heroku 上，intarray 扩展名未列入白名单。

我发现了与数组相交的简单函数，但与`&`运算符相比，它相当慢。

```
CREATE OR REPLACE FUNCTION array_intersect(anyarray, anyarray)
RETURNS anyarray AS $$
  SELECT ARRAY( SELECT * FROM UNNEST( $1 ) WHERE UNNEST = ANY( $2 ) );
$$ LANGUAGE sql; 
```

在我的表的大约 2000 条记录上，使用`&`运算符需要大约`50ms`和使用上面的函数需要大约`150ms`。我想尽可能多地比较记录，但这个函数的扩展性不如'&'运算符。

有什么方法可以更快地做到这一点或将 intarray 添加到heroku？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T11:22:51.627

猜猜它可能取决于您的查询的其余部分，以及它需要如何优化。

我的第一次尝试是使用`unnest`and `intersect`... 创建所有昆虫长度的 CTE，然后在需要的地方从我的主要表达式中的 CTE 中获取值...类似于以下内容：

```
WITH merged AS (
    SELECT * FROM unnest(ARRAY[1,2,3]) 
    INTERSECT 
    SELECT * FROM unnest(ARRAY[1])
) 
SELECT count(*) as length FROM merged; 
```

如果这不合适，我会尝试一个函数*（就像你一样）*，但由于我只对长度感兴趣，我会让函数返回它（以避免不必要的转换为数组并返回）：

```
CREATE OR REPLACE FUNCTION array_count_intersects(anyarray, anyarray)
RETURNS bigint AS $$
    SELECT count(*) FROM (
        SELECT * FROM UNNEST($1) WHERE UNNEST = ANY($2)
    ) as merg;
$$ LANGUAGE sql;

SELECT array_count_intersects(ARRAY[1,2,3], ARRAY[1]); 
```

如果这仍然不够好，那么我会考虑创建一个中间表来存储/缓存在数据更改时通过触发器更新的相交数组的长度，然后使用这个中间表来查找我需要的长度我的主要查询根本不需要执行联合。

# php - 单击jQuery中的按钮更改图像大小

> ID：15828110
> 
> 赞同：0
> 
> 时间：2013-04-05T07:23:35.150
> 
> 标签：php, jquery

我正在处理图像上传，我需要为图像形状添加功能。

有横向、纵向、方形和全景按钮。当用户单击其中任何一个时，div 形状将相应更改。

这是正方形的代码，但是当我单击正方形时，它会拉伸图像。我想在不拉伸图像的情况下更改 div 的形状。

```
$('#Square').on('click', function(){
    var images = $("#uploadedImage");
    for(i=0; i<images.length; i++)
        images[i].onload = centerImage(images[i]);

    function centerImage(img) {
        if (img.width > img.height ) {
            var y = 160;
            var x = img.width/img.height*y;
            var marx = (x-y)/2;
            img.style.height = y+"px";
            img.style.marginLeft = -(marx) + "px";
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:55:59.673

如果没有更通用的代码，很难重新创建正在运行的示例，但是您的函数清楚地改变了变量 img 的尺寸，传递给函数的图像，而不是除被单击的图像之外的任何 div 或其他元素。如果您想根据图像的相同 HxW 测试更改 div，请将函数的 img.* 部分更改为 $('#DivYouWant').* ，您应该走上正确的轨道。类似于以下内容：

```
 function centerImage(img) {
        if (img.width > img.height ) {
            var y = 160;
            var x = img.width/img.height*y;
            var marx = (x-y)/2;
            $('#DivYouWannaMod').height = y+"px";
            $('#DivYouWannaMod').marginLeft = -(marx) + "px";
        }
    } 
```

# vb.net - CrystalDecisions.CrystalReports.Engine.LoadSaveReportException：加载报告失败 - VB.NET 2003

> ID：15828111
> 
> 赞同：2
> 
> 时间：2013-04-05T07:23:36.750
> 
> 标签：vb.net, crystal-reports

有人知道为什么会出现以下错误吗？

```
CrystalDecisions.CrystalReports.Engine.LoadSaveReportException: Load report failed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-23T10:56:10.493

根据您对 windows\Temp 的评论，这是由于应用程序池的身份无法访问 c:\windows\Temp （并且可能无法访问报告文件夹）引起的。

您可以通过授予具有必要权限的应用程序池凭据，或授予“网络用户”对 c:\windows\temp 文件夹（以及可能对报告文件夹）的读写权限来解决此问题。

之所以需要这个文件夹，是因为 Crystal 运行时会在运行时创建报表的动态副本，并将其放在 %temp% 文件夹中。它是显示在 Web 浏览器中的临时文件夹副本（带有附加到原始文件名的 GUID）。这是设计使然，是确保实时报告安全的有用功能。

在此之后，您必须在加载每个报告后进行适当的清理，因为**它们只是留在那里并填满临时文件夹！**

就像是：

```
CrystalReportViewer1.Dispose(); // if using the viewer
CrystalReportViewer1 = null;
report.Close(); // I can't remember if this is part of the reportDocument class
report.Dispose();
report = null;
GC.Collect(); // crazy but true. Monitor the temp folder to see the effect 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-10T13:40:15.747

Reckface 的回答很清楚，但要补充一些东西。

我设法让它使用这个：

```
protected void Page_Unload(object sender, EventArgs e)
{
    if (reportDocument != null)
    {
        reportDocument.Close();
        reportDocument.Dispose();
        crystalReportViewer1.Dispose();
    }
} 
```

这样做可能会导致工具栏上的按钮出现问题，因为文档已被处置，它们无法再找到文档路径。在这种情况下，文档需要在回发期间再次加载路径：[source](https://www.aspsnippets.com/Articles/ASPNet-Crystal-Reports-13-Visual-Studio-2010-CrystalReportViewer-Search-Button-Issue---No-valid-report-source-is-available.aspx)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2013-04-05T12:08:46.553

你甚至费心去谷歌吗？这是一个常见的例外；有数百个关于它的帖子散落在中间管周围。

Crystal .NET 运行时有著名的神秘错误消息。这只是意味着无法加载 .rpt 文件（或嵌入式报告）。有几个可能的根本原因：错误的文件名或路径、安全违规、您没有正确处理旧报告以及 windows/temp 被占用等。

做一些研究。如果您仍然卡住，请返回并详细说明问题（您的任何报告是否有效，这是一个网络应用程序吗？您正在使用什么代码等）

# c - 寻找素数给了我错误

> ID：15828115
> 
> 赞同：-2
> 
> 时间：2013-04-05T07:23:57.350
> 
> 标签：c

我想打印给定数字范围的除数。它工作正常。但是当我尝试修改它以放在`****`素数除数的末尾时，它的行为就像是奇怪的。

```
#include <stdio.h>
int main()
{
    int     a,start,rounds,b,c,k=0;

    printf("Please enter a number to start :");
    scanf("%d",&start);
    printf("Please enter how many numbers you want to print from that number :");
    fflush(stdin);
    scanf("%d",&rounds);

    for(a=start;a<=start+rounds;a++)
    {
         printf("\n\nThe divisors of number :%d are \n",a);

         for(b=1;b<=a;b++)
         {
             c=a%b;
             if(!c)
             {
                  k++;
                  printf("%d\n",b);
             }
          }
          //printf("%d",k);
          if((k==2)||(k==1))
             printf("***\n");
    }
    getchar();
    return 0;
} 
```

`printf`PS：-我用来查找素数的技巧是计算循环结束之前执行了多少条语句。它有什么问题吗？当我`//`从`printf`语句中删除时，它会打印如下。

```
start=========>k

  1   =========>1

  2   =========>3

  3   =========>5

  4   =========>8

  5   =========>10 
```

这是为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:29:51.913

> 如果((k==2)&&(k==1))

在当今的计算机中，k 不可能同时为 2**和**1。也许您的意思是说 k 是 2**还是**k 是 1 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:30:45.627

您需要`k`在外循环中重置回 0

```
printf("\n\nThe divisors of number :%d are \n",a);
k = 0; 
```

（而且，正如其他人指出的那样，您需要一个`||`操作员而不是`&&`最终测试）

# iphone - 如何在 iphone 中检查可变字符串是否包含字符串值？

> ID：15828116
> 
> 赞同：0
> 
> 时间：2013-04-05T07:24:01.217
> 
> 标签：iphone, ios, ipad

我已经将一些字符串值存储到 mutablearray 以存储到 nsuserdefaults.like 方式`

```
NSMutableArray *arrayObj = [NSMutableArray arrayWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"emoved"]];

    for(int i = 0 ; i<[searcharray count]; i++) 
    {
         NSLog(@"%@",searcharray); 
        NSDictionary *dictionarydate = [searcharray objectAtIndex:i];

        NSString *memeid=[[dictionarydate objectForKey:@"ID"]description];

        if([dictionarydate objectForKey:@"dateOfInfo"])
        {
            if ([arrayObj containsObject:memeid])
            {              

            }
            else
            {
                [arrayObj addObject:memeid];
            }
        }

    }
    [[NSUserDefaults standardUserDefaults] setObject:arrayObj forKey:@"emoved"]; 
```

` 所以当 printng 时你只需要一次添加一个值。但是当我打印那个值时，我看到相同的值被多次添加到数组中。我的方法有什么问题可以有人指出吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:35:12.833

你应该分配和初始化你的 NSMutableArray 像

```
NSMutableArray *arrayObj = [[NSMutableArray alloc] initWithArray:[[NSUserDefaults standardUserDefaults] objectForKey:@"emoved"]]; 
```

如果您不使用 ARC，请不要忘记在完成后立即释放您的 arrayObj

# iphone - 陀螺 CMA 姿态俯仰、横滚和偏航角问题

> ID：15828119
> 
> 赞同：1
> 
> 时间：2013-04-05T07:24:03.487
> 
> 标签：iphone, xcode, gyroscope, motion, angle

我在从 CMAttitude 类中获取俯仰角、滚动角和偏航角时遇到问题。

首先，我使用'CMMotionManager'类和属性x，y，z做了一个普通的陀螺并且工作正常。然后，我尝试将 CMAttitude 用于“绝对角度”，但我不起作用，因为它似乎没有更新数据。角度始终为 0（但不是错误或警告）

我在stackoverflow中搜索了很多，并使用了我找到的一些解决方案，但我遇到了同样的问题。这是我的代码：

```
- (void)viewDidLoad
{
  [super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.

  motionManager = [[CMMotionManager alloc] init];

  CMDeviceMotion *deviceMotion = motionManager.deviceMotion;
  CMAttitude *attitude = deviceMotion.attitude;
  referenceAttitude   = attitude;

  [motionManager startGyroUpdates];

  timer = [NSTimer scheduledTimerWithTimeInterval:1/30.0
                                         target:self
                                       selector:@selector(doGyroUpdate)
                                       userInfo:nil
                                        repeats:YES];
}

-(void)doGyroUpdate {

 //cambia el frame de referencia
  [motionManager.deviceMotion.attitude multiplyByInverseOfAttitude: referenceAttitude];

  double rRotation = motionManager.deviceMotion.attitude.roll*180/M_PI;
  double pRotation = motionManager.deviceMotion.attitude.pitch*180/M_PI;
  double yRotation = motionManager.deviceMotion.attitude.yaw*180/M_PI;

NSString *myString = [NSString stringWithFormat:@"%f",rRotation];
self.angYaw.text = myString;

myString = [NSString stringWithFormat:@"%f",pRotation];
self.angPitch.text = myString;

myString = [NSString stringWithFormat:@"%f",yRotation];
self.angRoll.text = myString;

} 
```

非常感谢！:D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T16:21:24.370

motionManager 有 4 种模式：加速度计、陀螺仪、磁力计和设备运动。

根据您的需要，您需要启动适当的模式：startAccelerometerUpdates、startGyroUpdates、startMagnetometerUpdates 或 startDeviceMotionUpdates。

您正在开始`startGyroUpdates`但正在阅读`deviceMotion`财产。在您的情况下，只有 gyroData 可用。

改为执行此操作，您将获得 deviceMotion 数据：

```
[motionManager startDeviceMotionUpdates]; 
```

# algorithm - 域名匹配算法

> ID：15828121
> 
> 赞同：0
> 
> 时间：2013-04-05T07:24:09.427
> 
> 标签：algorithm, match

我有一个公司列表，并希望匹配使用谷歌搜索获取的域，以确定哪些域可能属于同一公司。是否有任何现有算法可用于此用例（法律上也允许在商业项目中使用）。

例如，我将 Internet 电影数据库作为公司名称，并说 google 将结果返回给我，其中有效的结果可能是 internetmoviedatabase、internet-movie-database、the-internet-movie-database、theinternetmoviedatabase、internetmovies、internet-movies、imd、 imdb。（注意：我已从列表中排除 TLD 以使问题更简单）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:33:45.153

听起来您正在寻找一种近似的字符串匹配算法。不确定您是在寻找算法还是实现。

这里已经有一个问题： [字符串匹配算法](https://stackoverflow.com/questions/8853773/string-matching-algorithm)

一种可能的解决方案是使用 Levenshtein 距离：[http ://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)

如果你正在寻找一个实现，如果你谷歌“近似字符串匹配 C++”，这是第一个结果： http: [//www.chokkan.org/software/simstring/](http://www.chokkan.org/software/simstring/)

祝你好运！

# java - 将Java中控制台的输出写入文本文件

> ID：15828126
> 
> 赞同：0
> 
> 时间：2013-04-05T07:24:16.753
> 
> 标签：java

我想在文本文件中显示我的控制台输出。

```
public static void main(String [ ] args){
    DataFilter df = new DataFilter();   
    df.displayCategorizedList();
    PrintStream out;
    try {
        out = new PrintStream(new FileOutputStream("C:\\test1.txt", true));
        System.setOut(out);
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我在屏幕上正确地得到了我的结果，但没有得到文本文件？测试文件已生成，但它是空的？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:26:37.670

将系统输出流设置为文件后，您应该打印到“控制台”。

```
 DataFilter df = new DataFilter();   
    PrintStream out;
    try {
        out = new PrintStream(new FileOutputStream("C:\\test1.txt", true));
        System.setOut(out);
        df.displayCategorizedList();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } finally {
        if (out != null)
            out.close();
    } 
```

还要使用 finally 块来始终关闭流，否则数据可能不会刷新到文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:34:23.453

我建议采用以下方法：

> ```
> public static void main(String [ ] args){
>     DataFilter df = new DataFilter();   
>     try (PrintStream out = new PrintStream(new FileOutputStream("d:\\file.txt", true))) {
>           System.setOut(out);
>           df.displayCategorizedList();
>     } catch (FileNotFoundException e) {
>         System.err.println(String.format("An error %s occurred!", e.getMessage()));
>     }
> } 
> ```

这是使用 JDK 7 try-with-resources 功能 - 这意味着它处理您拥有的异常（如 FileNotFoundException），并且它还关闭资源（而不是 finally 块）。

如果您不能使用 JDK 7，请使用其他响应中建议的方法之一。

# python - 将字典值分配给 key == list[element] 的变量

> ID：15828131
> 
> 赞同：1
> 
> 时间：2013-04-05T07:24:30.473
> 
> 标签：python, list, python-2.7, dictionary

`c = d[s[0]]`where`c`是一个新变量，`d`是一个字典，`s`是一个列表。

我正在尝试做的是将与列表中的第一个元素相同的键的值分配给`c`. 我知道键在字典中，并且列表的第一个元素与该键相同。如何将该键的值分配给变量？我写的代码给了我一个超出索引的错误。

但是，代码：

```
a = s[0]
c = d[a] 
```

作品。为什么第一次尝试不起作用？这适用于 Windows 上的 Python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T04:31:07.340

我不知道为什么它不适合你。也许你`list`毕竟没有人口。这应该工作 -

```
>>> d={'world':'hunger'}
>>> s=['world']
>>> d[s[0]]
'hunger'
>>> c = d[s[0]]
>>> c
'hunger'
>>> 
```

Python 字典也有一个漂亮的特性，叫做[`has_key`](http://www.tutorialspoint.com/python/dictionary_has_key.htm). 它检查该字典中是否存在密钥。我用它来防止`KeyError`异常...您可以考虑使用它来防止意外崩溃。

# lua - Corona：游戏完成后重启场景

> ID：15828132
> 
> 赞同：0
> 
> 时间：2013-04-05T07:24:33.333
> 
> 标签：lua, coronasdk

当玩家完成游戏时，我想重新启动场景，即我想重新加载当前场景。我试过 storyboard:reloadScene() 没有成功。我还尝试清除场景然后重新加载它，也没有任何结果。

```
local function onEveryFramePoop()
if(foodBalls) then
    for i = foodBalls.numChildren, 1, -1 do
        local ball = foodBalls[i]

        if(ball.y > 200 and not(ball.isBeingPooped)) then
            ball.isBeingPooped = true

            local function tempRemove()
                if(foodBalls.numChildren)then
                    ball:removeSelf()
                    ball = nil
                    print("removed")
                end
            end
            physics.removeBody(ball)

            transition.to(ball, {time = 2000, y = 400, onComplete = tempRemove})
            audio.play(fartSound)
        end
    end

    if(foodBalls.numChildren == 0 and food.numChildren == 2) then

        reward.playRewardAnimation()
        Runtime:removeEventListener("enterFrame", onEveryFramePoop)     
        timer.performWithDelay(2500, reloadSceneWithDelay)  
    end
  end
end

function reloadSceneWithDelay()
     storyboard.gotoScene("levels.levelDigestion") -- **HERE I WANT TO RESTART SCENE**
end 
```

似乎什么都没有发生。我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:29:37.460

我没有使用故事板，但你可以试试这个：

在情节提要中创建一个黑色场景然后，当您要重新启动时，只需转到黑色场景，然后再转到您想去的场景。

问题可能与您试图从自身调用模块有关。

# java - 浏览 CKEditor 的 Servlet 以浏览数据库项目

> ID：15828133
> 
> 赞同：1
> 
> 时间：2013-04-05T07:24:39.480
> 
> 标签：java, javascript, servlets, ckeditor

我有名为 Category、Article、Poll 等的数据库实体。我需要为 CKEditor 编写一个浏览 servlet，通过它我应该能够浏览 DB 表行以与编辑器中的文本链接。请让我知道这是否可能。如果可能的话，请给我一个继续的方法。

# javascript - 客户端网站可达性测试

> ID：15828145
> 
> 赞同：3
> 
> 时间：2013-04-05T07:25:15.460
> 
> 标签：javascript, jquery, html

我正在构建一个通过apps.facebook.com 系统运行的Facebook 应用程序。这个问题不是专门针对 Facebook 应用程序的（所以如果您不熟悉这些应用程序，请不要停止阅读），但您很快就会明白为什么这很重要。

每当用户希望使用该应用程序时，他们首先会转到一个标准网站（地址更容易记住，我们以 xyz.com 为例），然后该网站会自动重定向到 Facebook 应用程序。但是，有两个可能的重定向目标：

1.  到标准的 Facebook 应用程序页面（例如 apps.facebook.com/xyz）。如果客户端可以访问该页面，则应该会发生这种情况。重要的是，客户端可能无法访问此页面的一个原因是，如果他们位于运行阻止 Facebook 的内容过滤器（例如学校、大学、某些工作场所）的网络上。

2.  如果客户无法访问 Facebook 应用程序页面，他们应该被重定向到主网站上的另一个页面（例如 xyz.com/nofacebook_login.html）。

如您所见，重定向决策需要基于**客户端**是否可以访问 Facebook 应用程序页面。因此，测试需要在客户端（大概）使用 Javascript、jQuery 或类似工具进行。但是，我不确定如何去做。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T10:46:42.520

由于同源策略，显而易见的解决方案（只需向远程域发送 AJAX 请求并查看响应是什么）不起作用。

你可以要求 Facebook 实现[跨域资源共享](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)协议。如果他们同意，剩下的就容易了。但是，如果不是，`$.ajax`- 或本地人`XmlHttpRequest`- 就不会这样做。

但是，虽然 XHR 受同源策略的约束，但发送 HTTP 请求的其他方式则不受限制：您可以创建一个带有`src`某个图像的图像 on `apps.facebook.com`，然后查看它是否加载。这里的问题是 facebook 提供其大部分内容来自`akamaihd.net`，不太可能与`apps.facebook.com`. 但是，我确实找到*了一张*来自以下网址的图片：http `apps.facebook.com`: [//apps.facebook.com/images/spacer.gif](http://apps.facebook.com/images/spacer.gif)（[http://facebook.com/images/spacer.gif](http://facebook.com/images/spacer.gif)也存在）。@RobW 还向我指出了 favicon（[http://apps.facebook.com/favicon.ico](http://apps.facebook.com/favicon.ico)）

要测试是否可以加载图像：

1.  创建一个新`img`元素
2.  添加一个`load`监听器和一个`error`监听器，它将执行重定向
3.  设置`img` `src`
4.  不需要将图像添加到文档中，但我还没有在任何地方进行测试。

```
var img = document.createElement("img");
img.onload = function(){location.href = "http://apps.facebook.com/xyz"};
img.onerror = function(){location.href = "http://xyz.com/nofacebook_login.html"};
img.src = "//apps.facebook.com/favicon.ico"; //thanks @RobW
document.body.appendChild(img); 
```

* * *

注意：Facebook 不保证任何一张图片都会一直存在。虽然它似乎很有可能会留下来，但它最终可能会消失。如果发生这种情况，每个人都会显示被阻止（您可能想检查错误代码，但我不知道阻止程序返回什么）。如果发生这种情况，请通知我或使用新的工作图像更新此答案。

# django - 如何在没有完整源代码的情况下将 django 服务器部署到生产环境中？

> ID：15828148
> 
> 赞同：1
> 
> 时间：2013-04-05T07:25:23.750
> 
> 标签：django, deployment, mod-wsgi, egg

我仍然是 Python 和 Django 的新手。我正在使用 Django 开发一个应用程序，该应用程序最终将进入生产服务器。它是为客户定制的 Web 应用程序。在做了一些研究之后，我发现这`Apache with mod_wsgi`是`Django`部署的最佳选择。我只需将代码复制并粘贴到生产服务器中，即可访问应用程序。但是，如果我不想提供整个源代码而只将可执行应用程序提供给客户端怎么办`(P.S client wants to deploy the application to their own server)`。这样的事情可能`Python/Django`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:45:13.537

您只能为他们提供与您的源代码文件相对应的 .pyc 文件。这将使他们更难查看您的源代码。然而，这是一个非常有限的措施（即他们仍然可以从您的源代码中恢复一些结构），这可能是一个坏主意。

# ios - 在 ios 中使用 nsxmlparser 检索 xml 文件

> ID：15828153
> 
> 赞同：0
> 
> 时间：2013-04-05T07:25:36.777
> 
> 标签：ios, objective-c, xml-parsing

我在ios中通过nsxmlparser读取xml文件时遇到问题，

```
<PRODUCTS>
    <PRODUCTSLIST>
        <PRODUCTDETAILS>
                <headertext> test header </headertext>
                <description><b style="font-size: x-small;">product, advantages</b></description>
        </PRODUCTDETAILS>
    </PRODUCTSLIST>
</PRODUCTS> 
```

当我使用nsxmlparser读取文件时，我能够获取headertext的值（测试头），**但**描述**属性**值包含html标签，所以我无法获得结果 `(<b style="font-size: x-small;">product, advantages</b>)`我得到的结果为空我怎样才能得到结果（`(<b style="font-size: x-small;">product, advantages</b>)`）描述**属性**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:42:39.573

从开发人员的角度来说，我不推荐使用 NSXMLParser，因为它解析 XML 文件的方式很费力。[关于选择正确的 XML Parser](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)有一篇很棒的文章。

我经常使用[KissXML 。](https://github.com/robbiehanson/KissXML)[您可以在此处](https://stackoverflow.com/questions/9274031/kissxml-not-returning-strings)找到使用它的退出教程。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:00:18.560

您的问题是“b”标签被认为是 XML 结构的一部分，请尝试转义“b”标签的“<”和“>”字符：
`@"&lt;b style=\"font-size: x-small;&gt;product, advantages&lt;/b&gt;"`
[请参阅此处](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)

# c# - 如何设置数据gridview的默认显示值？

> ID：15828155
> 
> 赞同：1
> 
> 时间：2013-04-05T07:25:40.953
> 
> 标签：c#, datagridview

我正在使用数据网格视图。我有一个对象列表，可以说。

```
class abc{
   public int i{get;set;}
   public long b{get;set;}
 }
 //in Form Load
 List<abc> objList = new List();
 listpopulate(); // populate the list.
 datgridvew.dtasource = objList; 
```

我想在哪里显示“-”， `Objabc.i value = 0` 并想在`Objabc.b = 1000` 我尝试单元格默认格式但徒劳的地方显示“好”。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:30:58.037

您可以为此使用事件，例如：

[`DataGridView.CellValueChanged Event`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellvaluechanged.aspx)

或者像这样使用[DataGridView.CellFormatting](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.cellformatting.aspx)事件：

```
private void DataGridView1_CellFormatting(object sender,
    DataGridViewCellFormattingEventArgs e)
{
    DataGridView dgv = (DataGridView)sender;
    if (dgv.Columns[e.ColumnIndex].Name == "i" &&
        e.RowIndex >= 0 &&
        dgv["i", e.RowIndex].Value is int) &&
        (((int)dgv["i", e.RowIndex].Value) == 0)
        {
           e.Value = "-";
           e.FormattingApplied = true;           
        }
    }
    else if (dgv.Columns[e.ColumnIndex].Name == "b" &&
        e.RowIndex >= 0 &&
        dgv["b", e.RowIndex].Value is int) &&
        (((int)dgv["b", e.RowIndex].Value) == 1000)
        {
           e.Value = "Good";
           e.FormattingApplied = true;           
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T07:47:32.980

在这里您可以**`Jquery`**在**客户端使用**

```
 $(document).ready(function () {
             $(".GRIDVIEWCLASSNAME").find("td").each(function () {
                    if ($(this).text() == "0")
                    {
                        $(this).html("-");
                    }
                     if ($(this).text() == "1000")
                    {
                        $(this).html("Good");
                    }
                });
        }); 
```

# php - 为什么我的 wordpress 网站无法在 Internet Explorer 中打开？

> ID：15828156
> 
> 赞同：-8
> 
> 时间：2013-04-05T07:25:44.050
> 
> 标签：php, javascript, wordpress

为什么我的`Wordpress`网站无法在 Internet Explorer 中打开？这需要很多时间，我的系统挂断了。

我的网站[网址](http://www.clerisysolutions.com/cs/endurocross/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:58:14.513

我在 Firefox 中查看了您的 HTML。它充满了错误。即“第 1388 行第 6 列 - 错误：未打开的元素“BODY”的结束标记”。

去清理你的 HTML，如果你还有问题，回来再问。

# actionscript-3 - Flash 自动查找曲线交点。我可以像在 actionscript 中使用 curveTo 一样使用该代码吗？

> ID：15828163
> 
> 赞同：2
> 
> 时间：2013-04-05T07:26:18.423
> 
> 标签：actionscript-3, path, intersection, intersect, curves

还是我必须沉迷于数学并自己做样条交叉数学？我知道二次 b 样条的基本数学。

我正在尝试制作程序随机生成的凯尔特结作品，它可以自己动画。我的灵感来自于 Kells 原著和同名动画。这意味着充其量它会非常复杂 - 大量曲线动画快速。我要生成 - 响应用户 - 具有最高复杂性的凯尔特结......这可能意味着只有 12 点随机动画并响应鼠标移动但是......我会喜欢成百上千的……总有一天。

开发一个移动的随机弯曲双线循环涂鸦很容易。我喜欢由 12 到 14 个随机点组成的曲线的外观。现在我想把它编织在下面。为此——我需要为每一帧快速找到大量随机曲线的交点。当我在 Flash 中以-not object-drawing 模式绘制曲线时...... Flash 会自动为我生成交点。

问题： - Actionscript 3.0 中是否有与在 Flash 绘图界面中如此容易完成的交叉点等效的交叉点类/方法/函数？

- 作为一名艺术家，您在 Flash 中所做的工作中，有多少像 Actionscript 3.0 中的 curveTo 这样很酷的类？

-我可以看到curveTo的源代码吗？

- 我可以扩展curveTo来做我想做的事吗？

-我一直在阅读和重新阅读参考资料以及如何扩展课程......我所做的。但是我如何学习如何扩展curveTo ...或Path类...可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T12:39:01.227

这是否是您正在寻找的东西：
[http ://actionsnippet.com/?p=965](http://actionsnippet.com/?p=965)

在此处查看演示：[http ://www.actionsnippet.com/swfs/bezier_intersect.html](http://www.actionsnippet.com/swfs/bezier_intersect.html)

# ios - 迁移核心数据和映射模型

> ID：15828168
> 
> 赞同：3
> 
> 时间：2013-04-05T07:26:33.090
> 
> 标签：ios, core-data, model, migration, mapping

我希望你一切都好:)

我有一个使用 Core Data 的数据库。在我的应用程序 V1.0 中，用户可以在应用程序中导入一些文件。现在，对于我的 V2.0，我想在我的模型中添加一个属性，但是拥有 V1.0 并且有一些存储文件的用户必须保存所有文件（如果他们升级应用程序则不能删除......） . 因此，我使用新属性创建了一个新的数据模型，并将当前版本化的核心数据模型设置为我的新数据模型......好的。但是，如果启动我的应用程序，该文件将被删除。

通常，我必须使用映射模型。但是怎么做呢？创建映射模型时，源数据模型和目标数据模型是哪个？

非常感谢你的帮助！祝大家有个美好的一天！:)

编辑：

如果我只添加一个新属性但不编辑属性名称，也许我不需要创建映射模型......不是吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:37:35.023

如果使用映射模型，您的源模型将是 v1.0 模型，目标将是您的新 v2.0 模型。通过使用轻量级迁移，您可以在不使用映射模型的情况下摆脱困境，[此处](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/vmLightweightMigration.html#//apple_ref/doc/uid/TP40004399-CH4-SW1)的文档。

这句话的要点是，您需要转到您的 App Delegate 并为持久存储设置相关选项。

它应该看起来像

```
NSDictionary *options = @{NSMigratePersistentStoresAutomaticallyOption: @YES, NSInferMappingModelAutomaticallyOption: @YES};

[persistentStoreCoordinator addPersistentStoreWithType:storeType configuration:config URL:storeURL options:options error:&error]; 
```

该`NSMigratePersistentStoresAutomaticallyOption`键告诉 Core Data 检查当前托管对象模型版本是否与您正在使用的存储不同，并将存储迁移到更新的模型。告诉它`NSInferMappingModelAutomaticallyOption`尝试自己进行映射。这是“轻量级迁移”位。

其中大部分已经存在，您需要做的就是添加选项字典。它将在`- (NSPersistentStoreCoordinator *)persistentStoreCoordinator`方法中。如果您至少没有设置，`NSMigratePersistentStoresAutomaticallyOption`则不会发生迁移。

轻量级映射在开发时也很有用。这意味着您可以对模型进行更改，而无需每次都重做映射。

# mongodb - Mongo ShardTag 范围与正则表达式

> ID：15828170
> 
> 赞同：0
> 
> 时间：2013-04-05T07:26:35.787
> 
> 标签：mongodb

我正在运行带有 3 个副本的 Shard，每个副本有 3 个服务器。

分片 1 分片 2 分片 3

我需要一些有关 ShardTags 的帮助，我的 Shard 密钥是域

现在我想添加 TagRange 这样的东西。

域名开始（^a 到 ^f）应该在 shard-1 上，域名从（^f 到 ^m）应该去 shard-2，域名开始（^n 到 ^z）到 shard-3。

这可能吗？

兄弟。

奥马尔

# html - angularjs localstorage显示数据

> ID：15828172
> 
> 赞同：1
> 
> 时间：2013-04-05T07:26:38.817
> 
> 标签：html, jquery, angularjs

我现在一直在尝试使用角度。我只是希望有人能帮助我为什么我不能像下面的代码那样获取本地存储数据。谢谢

```
[
    {
    "name": "firstname",
    "email": "email@yahoo.com"
    }
] 
```

服务.js

```
 getItem: function (item) {

      var temp =  localStorage.getItem(item);

      if (!temp){
        return [];
      }

      return JSON.Parse(temp);

 } 
```

控制器.js

```
 profile.push({
                name: 'firstname',
                email: 'rmail@yahoo.com'
 });

localStorage.setItem('profiles', JSON.stringify(profile));

 console.log(service.getItem('name') + ' : this should output the name');
 console.log(service.getItem('email') + ' : this should output the email'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:52:38.640

你能试试这个吗

```
var array = service.getItem('profiles');
for(var i=0;i<array.length;i++){
     console.log(array[i].name, array[i].email) 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T23:58:59.320

To forego using parsing and deal with any of this you can try a factory I recently created, it let's you store and retrieve arrays and objects. Also it let's you bind to $scope.variables:

[https://github.com/agrublev/Angular-localStorage](https://github.com/agrublev/Angular-localStorage)

# actionscript-3 - Flex/AS 3.0 中是否不需要调度事件

> ID：15828174
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:26:56.013
> 
> 标签：actionscript-3, apache-flex, flex3

我正在创建一个应用程序，我在其中调用了许多函数，但有人说，这不是正确处理函数的正确方法，您需要调度事件以获得更好的结果。请任何人告诉我调度事件的好处，因为许多网站只说“它执行一个事件”。

这个问题可能会让人觉得很愚蠢，但答案会帮助我以正确的方式学习 flex。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:34:56.033

一般来说，如果你发现自己编写的代码有`parent.somefunction()`或`outerdocument.someotherfunction()`，那就是使用事件的时候了。这样的代码使子组件依赖于它的父组件。在父类上执行函数的更好方法是`addEventListener()`在父类上使用注册侦听器函数，然后调用`dispatchEvent()`子类。

如果您开始为数据网格或列表组件编写 itemRenderers，您将需要学习这项技术。

# php - 通过 url 传播会话

> ID：15828177
> 
> 赞同：0
> 
> 时间：2013-04-05T07:27:11.910
> 
> 标签：php

在 php 中，根据手册：“访问您网站的访问者被分配了一个唯一的 id，即所谓的会话 id。这要么存储在用户端的 cookie 中，要么在 URL 中传播。”

**我何时以及为什么**更喜欢通过 url 而不是 cookie 传递会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:34:32.120

主要区别在于您的会话令牌可能会通过引荐来源网址发送到不同的域，但这可以通过检查源 IP 地址来缓解。除此之外，cookie 在 HTTP 标头中发送，URL 最终在请求行中。在安全性方面没有真正的区别，因为 HTTPS 对两者都进行了加密。但是请求 URL 可能会写入日志文件中，这是一个（很明显）风险。

Cookie 是传递会话令牌的默认处理程序，但是当它们在客户端被禁用时，您可以回退到查询字符串中的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:30:27.657

要回答这个问题，

**Cookie 可以修改（嗯，是的，被黑了），但会话不能。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:39:59.913

网址中的会话：

1.  在 url 中执行 session id 是一项相当大的工作。
2.  修复由 cookie 引起的安全问题只需少量工作。
3.  让每个网址都有结尾 ?session_id=foobar23454364634 看起来更丑

cookie 中的会话：

1.  携带带有 cookie 的 session_id 几乎没有多少工作量。
2.  意识到由 sessino cookie (XSRF) 导致的安全问题是一项中等量的工作。
3.  网址未修改。

您可以选择自己的方式来实现两者并让用户选择。

# jquery - 单击文本框时，JQuery 日历控件仅出现一次

> ID：15828192
> 
> 赞同：1
> 
> 时间：2013-04-05T07:27:57.297
> 
> 标签：jquery, asp.net

我有一个 JQuery 日历，它可以在我的网页上完美运行，但只有一次。在我选择日期并尝试单击文本框以更改日历不出现的日期后。

这是我的代码`

```
 $(document).ready(function () {           
        $("#<%= txtDatePicker.ClientID %>").datepicker();           
    }); 
```

`

```
<asp:TextBox ID="txtDatePicker" runat="server" OnTextChanged="txtDatePicker_TextChanged" AutoPostBack="True" ></asp:TextBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:17:34.103

好的，我想通了。这是因为 AutoPostBack。使用 AutoPostBack 时，这是部分页面加载，因此日期选择器不起作用。我将 datepicker 绑定添加到 pageLoad 函数中，它现在可以完美运行.....

谢谢你所有的答案

```
 function pageLoad() {
        $("#<%= txtDatePicker.ClientID %>").datepicker();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:29:29.113

您显示 datepicker 的语句仅在 上执行一次`document.ready`。您可以绑定事件以在获得焦点`focus`时打开它`TextBox`

```
$(document).ready(function () {           
    $("#<%= txtDatePicker.ClientID %>").datepicker();           

    $("#<%= txtDatePicker.ClientID %>").focus(function () {           
         $(this).datepicker();           
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:35:33.870

尝试更改为：

```
$(document).ready(function () {
   $("#<%= txtDatePicker.ClientID %>").on('click focus',function(){
      $(this).datepicker();
   }).datepicker();       
}); 
```

查看代码中发生了什么，您刚刚在页面加载 ( `doc ready`) 事件上初始化了 datepicker，因此如果您想更改日期，则必须绑定一个`focus`或的事件`click`，尽管两者都可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T07:34:47.833

```
<input type="text" id="date" placeholder="Choose a date..." value="" />

$(function () {
    $("#date").datepicker({
        dateFormat: "DD, d M yy",
        altField: selectedDay,
        altFormat: "DD",

    }); 
```

# android - Android Intents - 使用 Context 参数

> ID：15828196
> 
> 赞同：-2
> 
> 时间：2013-04-05T07:28:04.600
> 
> 标签：android, android-intent, android-context

对于 Intent 构造函数 -

```
Intent(Context context, Class myClass) 
```

*上下文*参数究竟指定了什么？

此外，我们是否需要将其设置为任何其他应用程序的上下文？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:34:19.490

根据[`Context`文档](http://developer.android.com/reference/android/content/Context.html)：

> 与有关应用程序环境的全局信息的接口。这是一个抽象类，其实现由Android系统提供。它允许访问特定于应用程序的资源和类，以及向上调用应用程序级操作，例如启动活动、广播和接收意图等。

或者换句话说，它是一个提供对您的应用程序的访问的类。

> 此外，我们是否需要将其设置为任何其他应用程序的上下文？

不，您的应用上下文由 Android 提供。

通常，对于“普通”应用程序，您不需要打扰上下文。除非您需要从另一个应用程序激活您的应用程序或在两个正在运行的应用程序之间发送消息。

如果你想启动一个应用程序，你不需要它的上下文，因为你通常没有另一个应用程序的上下文。相反，您可以[向 Android 索取它](http://developer.android.com/reference/android/content/pm/PackageManager.html#getLaunchIntentForPackage(java.lang.String))（使用应用程序名称），格式如下[`Intent`](http://developer.android.com/reference/android/content/Intent.html)：

```
Intent LaunchIntent = getPackageManager().getLaunchIntentForPackage("com.package.address");
startActivity(LaunchIntent); 
```

有关详细信息，请参阅[从 Android 上的另一个应用程序启动应用程序](https://stackoverflow.com/questions/3872063/android-launch-an-application-from-another-application)。

# python - 检查for循环python中的值

> ID：15828199
> 
> 赞同：-2
> 
> 时间：2013-04-05T07:28:30.733
> 
> 标签：python, django, django-templates

我有一个产品的多语言网站，我有图片，其中包含英语和西班牙语两种语言的内容。

我需要为特定站点区分它们，但是我将所有图像都放在一个 for 循环中

```
 {% for image in images %}  {% endfor %} 
```

图像名称就像

```
 image.jpg  
 image_en.jpg   
 image_sp.jpg 
```

对于英文网站，我需要“image.jpg”和“image_en.jpg”，对于西班牙语，我需要“image.jpg”和“image_sp.jpg”

我怎样才能区分它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:58:46.033

您可以在服务器站点上捕获语言。然后创建一组名称（如果是英语和西班牙语），然后在模板中简单地打印这些图像。这看起来很容易，但也许不是最好的。

# windows-phone-7 - 在添加计划任务时，在 wp7 的 vs2012 express 的 FILE 菜单中添加缺少的选项

> ID：15828203
> 
> 赞同：0
> 
> 时间：2013-04-05T07:28:47.167
> 
> 标签：windows-phone-7, visual-studio-2012, windows-phone-8

在尝试按照 msdn 文档为 Windows phone 实现后台代理时，提到的过程是：

> 若要在 Visual Studio 中创建使用计划任务的应用程序，请创建一个新的 Windows Phone 应用程序项目。此模板属于 Windows Phone 类别。接下来，将计划任务项目添加到您的解决方案中。从“文件”菜单中，选择“添加”->“新建项目...”。在添加新项目对话框中，选择 Windows Phone 计划任务代理。保留默认名称 ScheduledTaskAgent1，然后单击确定。

但我未能在 FILE 菜单中找到 ADD 选项。:(

请在这方面指导我。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:34:08.897

![在此处输入图像描述](https://i.stack.imgur.com/B0bHh.png) 尝试在解决方案资源管理器中右键单击解决方案，然后添加->新建项目

# php - 如果有空值，PHP CSV 文件导入不会导入数据

> ID：15828219
> 
> 赞同：0
> 
> 时间：2013-04-05T07:29:49.790
> 
> 标签：php, html, file, csv, import

我这里有这段代码，如果行前有逗号，它不会导入数据。这意味着该列中有一个空值，但我的代码无法识别它，因此根本不导入任何数据。任何想法我该如何解决？提前致谢！

```
 <?php
include "config.php";

if ($_FILES[csv][size] > 0) { 

    $file = $_FILES[csv][tmp_name]; 
    $handle = fopen($file,"r"); 

    do { 
        if ($data[0]) { 
            mysql_query("INSERT INTO norse5_proov (osakond, soetusaasta, it_number, tooteruhm, mudeli_nimetus, sn, riigivara_nr, inventaari_nr, maja, ruum, vastutaja, markus, kasutajanimi) VALUES 
                ( 
                    '".addslashes($data[0])."', 
                    '".addslashes($data[1])."',
                    '".addslashes($data[2])."',
                    '".addslashes($data[3])."',
                    '".addslashes($data[4])."',
                    '".addslashes($data[5])."',
                    '".addslashes($data[6])."',
                    '".addslashes($data[7])."',
                    '".addslashes($data[8])."',
                    '".addslashes($data[9])."',
                    '".addslashes($data[10])."',
                    '".addslashes($data[11])."',
                    '".addslashes($_SESSION['user'])."'
                ) 
            ") or die(mysql_error()); 
        } 
    } while ($data = fgetcsv($handle,1000,",","'")); 

    header('Location:insert.php?success=1'); die; 

} 

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:58:46.153

如果您必须首先检查您的条件，请不要使用 do while 循环，而是使用普通的 while 循环。这样你就不必检查你的数据了！

```
while ($data = fgetcsv($handle,1000,",","'")) 
{  
    mysql_query("INSERT INTO norse5_proov (osakond, soetusaasta, it_number, tooteruhm, mudeli_nimetus, sn, riigivara_nr, inventaari_nr, maja, ruum, vastutaja, markus, kasutajanimi) VALUES 
      ( 
      '".addslashes($data[0])."', 
      '".addslashes($data[1])."',
      '".addslashes($data[2])."',
      '".addslashes($data[3])."',
      '".addslashes($data[4])."',
      '".addslashes($data[5])."',
      '".addslashes($data[6])."',
      '".addslashes($data[7])."',
      '".addslashes($data[8])."',
      '".addslashes($data[9])."',
      '".addslashes($data[10])."',
      '".addslashes($data[11])."',
      '".addslashes($_SESSION['user'])."'
      ) 
    ") or die(mysql_error()); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:23:18.477

你需要改变

```
if ($data[0]) { 
```

至

```
 if (!empty($data)) { 
```

基本上，它现在正在做的是检查第一列中是否有数据，如果没有则忽略该行，如果将其更改为建议的，它将检查整行中是否有数据，并且如果有那么它将导入它，否则它将跳过。

# xslt - 按行分组 div（需要说明）

> ID：15828222
> 
> 赞同：0
> 
> 时间：2013-04-05T07:30:00.400
> 
> 标签：xslt, sitecore

我意识到你真的很擅长编程，而且你的答案是可靠的。

您是否可以帮助我解决我在使用 xslt 代码时遇到的问题？我是编程新手，所以我会很感激我能得到的任何帮助。

您可以在下面的链接中找到将 3 个 div 连续分组的解决方案，但我不知道如何将其应用到我的代码中。我正在使用 Sitecore，我有一个 div 块，它对应于生成的每个页面，以生成类似 Metro 的块，连续 3 个。到目前为止，我生成了所需的 div，但没有将它们连续放置三个。我的代码在下面找到。

[XSLT 如何用 div 包装每 3 个元素？](https://stackoverflow.com/questions/5604726/xslt-how-can-i-wrap-each-3-elements-by-div#)

我会很感激我能得到的任何帮助。

```
<?xml version="1.0" encoding="UTF-8"?>

<!--=============================================================
    File: ServicesFeatureblocks.xslt                                                   
    Created by: sitecore\admin                                       
    Created: 3/27/2013 11:50:57 AM                                               
    Copyright notice at bottom of file
==============================================================-->

<xsl:stylesheet version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:sc="http://www.sitecore.net/sc"
  xmlns:dot="http://www.sitecore.net/dot"
  exclude-result-prefixes="dot sc">

    <!-- output directives -->
    <xsl:output method="html" indent="no" encoding="UTF-8" />    

    <!-- parameters -->
    <xsl:param name="lang" select="'en'"/>
    <xsl:param name="id" select="''"/>
    <xsl:param name="sc_item"/>
    <xsl:param name="sc_currentitem"/>

    <!-- variables -->
    <!-- Uncomment one of the following lines if you need a "home" variable in you code -->
    <xsl:variable name="Services" select="sc:item('/sitecore/content/home/Services',.)" />
    <!--<xsl:variable name="home" select="/*/item[@key='content']/item[@key='home']" />-->
    <!--<xsl:variable name="home" select="$sc_currentitem/ancestor-or-self::item[@template='site root']" />-->    

    <!-- entry point -->
    <xsl:template match="*">
        <xsl:apply-templates select="$sc_item" mode="main"/>
    </xsl:template>

    <!--==============================================================-->
    <!-- main                                                         -->
    <!--==============================================================-->

    <xsl:variable name="group" select="3" />

    <xsl:template match="/">
        <xsl:apply-templates select="$sc_currentitem[position() mod $group = 1]" />
    </xsl:template>

    <xsl:template match="item" mode="inner">
        <div class="block orange">
            <xsl:value-of select="sc:fld('Title',.)" />
        </div>

        <item/>    

    </xsl:template>

    <xsl:template match="item">
        <div>
            <xsl:apply-templates
                select="./item|following-sibling::services/item[position() &lt; $group]" mode="inner" />

        </div>
    </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T19:34:12.490

如果您可以使用子布局而不是 xslt 渲染，您可以使用 Listview 和 GroupTemplate 轻松实现您的功能

```
<asp:ListView ID="listview1" runat="server" GroupItemCount="3" GroupPlaceholderID="groupPlaceholder"
                ItemPlaceholderID="itemPlaceholder">
                <LayoutTemplate>
                    <div class="productsContent">
                        <asp:PlaceHolder ID="groupPlaceholder" runat="server"></asp:PlaceHolder>
                    </div>
                </LayoutTemplate>
                <GroupTemplate>
                    <div class="product-rows">
                        <asp:PlaceHolder ID="itemPlaceholder" runat="server"></asp:PlaceHolder>
                    </div>
                </GroupTemplate>
                <ItemTemplate>
                    <div class="products">
                    </div>
                </ItemTemplate>
</asp:ListView> 
```

# java - 如何确定 JTextfield 的整数值？

> ID：15828223
> 
> 赞同：0
> 
> 时间：2013-04-05T07:30:03.313
> 
> 标签：java, swing, integer, jtextfield, parseint

我有一个 JTextField，用户**必须**在其中输入一个**数字**。

***我想检查该值以确保它包含 ** *Integer***。***

这是代码：

```
JTextField Tex_amount=new JTextField();
.
.
.
String s=Tex_amount.getText(); 
int a=Integer.parseInt(s); 
```

问题是如果用户在字段中输入字符串，我将面临错误： **java.lang.NumberFormatException**。那么如何检查价值呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T07:33:48.387

有三种方式

1.  将 JFormattedTextField 与数字格式化程序一起使用

2.  将 JSpinner 与 SpinnerNumberModel 一起使用

3.  将 DocumentFilter 添加到纯 JTextField

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T07:33:57.093

你可以使用 try..catch

```
try{
    int a = Integer.parseInt(s);
}
catch(ArithmeticException e){
    //Handel error here 
} 
```

# html - 使用 VB6 中的 MAPI 控件发送带有 HTML 内容的消息

> ID：15828226
> 
> 赞同：2
> 
> 时间：2013-04-05T07:30:25.027
> 
> 标签：html, vb6, mapi

如何使用带有 HTML 正文的 MAPI 发送邮件？我需要在消息正文中创建表。我正在使用 vb6 和 MAPI 控件。有任何想法吗？

```
Function MailSend(sSendTo As String, sSubject As String, sText As String) As Boolean
    On Error GoTo ErrHandler

    With MAPISession1
        If .SessionID = 0 Then
            .DownLoadMail = False
            .LogonUI = True
            .SignOn
            .NewSession = True
            MAPIMessages1.SessionID = .SessionID
        End If
    End With
    With MAPIMessages1
        .Compose
        .RecipAddress = sSendTo
        .AddressResolveUI = True
        .ResolveName
        .MsgSubject = sSubject
        .MsgNoteText = sText
        .Send False
    End With
    MailSend = True
    Exit Function
ErrHandler:
    'MsgBox Err.Description
    MailSend = False
End Function 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:46:11.163

MAPI 控件使用不处理 HTML 的简单 MAPI。直接使用 Simple MAPI (MAPISendMail) 时有一个技巧 - 将正文设置为 NULL 并附加 HTML 文件：它将用作邮件正文。我不知道这个技巧是否适用于 MAPI 控件。

为什么不切换到使用 Outlook 对象模型？它完全能够处理 HTML：

```
set App = CreateObject("Outlook.Application")
set NS = App.GetNmaespace("MAPI")
NS.Logon
set Msg = App.CreateItem(0)
Msg.To = sSendTo
Msg.Subject = sSubject
Msg.HTMLBody = sYourHTMLBody
Msg.Send 'or Msg.Display 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-18T12:14:43.753

保持 .MsgNoteText =""; .AttachmentPathName = 结果

IE。

```
With MAPIMessages1
    .Compose
    .RecipAddress = sSendTo
    .AddressResolveUI = True
    .ResolveName
    .MsgSubject = sSubject
    .MsgNoteText =""
    .AttachmentPathName = "c:\yourHtml.html"
    .Send False
End With 
```

# django - Django 员工用户封闭组

> ID：15828227
> 
> 赞同：1
> 
> 时间：2013-04-05T07:30:26.977
> 
> 标签：django, django-models, django-admin, django-admin-filters, django-admin-tools

我正在为小型组织开发一个 django 项目。组织可以注册到站点（由站点管理员标记为员工用户），为其他注册成员创建新用户和新服务。成员可以注册、登录并查看组织在他们的个人资料中放置的内容。

**现在的问题是，如果另一个组织注册到该站点，在标记为员工用户后，它将看到并可以管理由注册到该站点的其他组织创建的成员。**

我想让任何注册的组织只管理自己的成员，并隐藏其他注册的组织。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T18:10:58.333

我发现了这个：[http](http://www.b-list.org/weblog/2008/dec/24/admin/) ://www.b-list.org/weblog/2008/dec/24/admin/ 最后他解释了如何在管理站点中仅向对象所有者显示对象。

# c# - 使用 JSON.NET 进行部分反序列化，保留一些原始字段

> ID：15828230
> 
> 赞同：5
> 
> 时间：2013-04-05T07:30:28.240
> 
> 标签：c#, json, serialization, json.net, partial

我有这样的文件

```
{
    "Field1": 1,
    "Field2": 2,
    "Field3": {
        Type: "TheMotherLoad"
    }
} 
```

我想将其转换为此类，但保留字段 3“原始/原样”。

```
public class Fields {
    public int Field1 { get; set; }
    public int Field2 { get; set; }
    public string Field3 { get; set; }
} 
```

结果应该是

```
Field1 = 1, 
Field2 = 2, 
Field3 = "{ Type: "TheMotherLoad" }" 
```

Json.NET 可以吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T08:51:44.717

Field3 可以是一个 JObject。当您需要 JSON 时，只需调用 Field3.ToString()

# java - 返回java中循环中存在的值

> ID：15828232
> 
> 赞同：3
> 
> 时间：2013-04-05T07:30:34.270
> 
> 标签：java, loops, return-value

我想从循环中返回一个值。我的代码如下：

```
public long findLocationId(String location) throws SystemException
    {

        long locId = 1;

        List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);

            for(Location findLoc : locationList)  {
                if(location == findLoc.getLocationName())  {
                    locId = findLoc.getLocationId();

                    **return locId;**
                }
            }

    } 
```

当我尝试将返回值放入循环中时，我收到一条错误消息，指出要包含 return 语句。

我应该如何更改我的代码，以便我可以从循环本身返回一个值？

我想返回我在循环中获得的新 locId 值，而不是我最初设置为 locId = 1 的值；我想返回从循环中获得的 locId 的新值

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:21:43.773

有多种方法可以解决这个问题。

1.  使用 while 循环
2.  使用带有附加停止条件的 for 循环
3.  使用break关键字。

在介绍我们的逻辑之前先创建一个模板：

```
public long findLocationId(String locationName) throws SystemException
    {

        if(locationName == null) { //Here we cover first issue. 
            throw new IllegalArgumentException("THe locationName must not be null");
        }

        long locId = Long.MIN_VALUE; //We declare a default value that will be returned if none match found. 

        Collection<Location> locationList = getLocationList(); //The location can be read from another method so we are not binded to field.

        if(locationList == null || locationList.isEmpty()) {
            return locId; // Or throw an exception about invalid state.
        }

        //Place for the logic

        return locId;

    } 
```

* * *

通常，当我们不知道何时要停止迭代时，这表明我们应该从 while 循环开始。

所以让我们试试吧。

**解决方案 1 - while 方式。**

```
 Iterator<Location> iterator = locationList.iterator();

        while(iterator.hasNext() && Long.MIN_VALUE != locId) {

            Location location = iterator.next();

            if(locationName.equalsIgnoreCase(location.getLocationName())) {
                locId = location.getLocationId(); // This will change the locId, so second condition will be no longer true and loop will end.
            }

        } 
```

> 优点： - 它有效
> 
> 缺点： - 离开迭代器

我们不应该留下迭代器，因为这很容易出错。这导致我们下一个解决方案。

**解决方案 2 - 我们使用迭代器的模式而不是 while。**

```
 for(Iterator<Location> iterator2 = locationList.iterator();iterator.hasNext() && Long.MIN_VALUE != locId;) {

            Location location = iterator.next();

            if(locationName.equalsIgnoreCase(location.getLocationName())) {
                locId = location.getLocationId(); // This will change the locId, so second condition will be no longer true and loop will end.
            }
        } 
```

> 优点 - 它有效
> 
> 缺点 - 它很复杂，我们必须在阅读此代码时停止。

由于上述解决方案不易阅读，因此也应删除。

**解决方案 3 - 为什么 break 有用。**

```
for(Location location : locationList) {

            if(locationName.equalsIgnoreCase(location.getLocationName())) {
                locId = location.getLocationId();
                break;
            }

        } 
```

> 优点 - 有效 - 可读
> 
> 缺点 - 无

结论是代码应该是可读的。使用`break`，我们指出我们找到了匹配并且我们不想再继续前进。

美好的。但是案件什么时候`location`被发现呢？

我们返回的 OP 示例`1L`。这不是最佳选择，因为该值很可能用作 ID。

在前面的示例中，我使用了 long 的最小值。这在某些情况下是可以接受的，但我们仍然需要验证方法结果，并记录它。

最终的解决方案是额外的循环出口，即`return`关键字。

```
public long findLocationId(String locationName) throws SystemException
    {

        if(locationName == null) { //Here we cover fist issue. 
            throw new IllegalArgumentException("THe locationName must not be null");
        }

        Collection<Location> locationList = getLocationList(); //The location can be read from another method so we are not binded to field.

        if(locationList == null) {
            throw new IllegalStateException("THe location list was not initialized"); 
        }

        for(Location location : locationList) {

            if(locationName.equalsIgnoreCase(location.getLocationName())) {
                return location.getLocationId(); //We exit from the method.
            }

        }

        throw new SystemException("Could not found location for name:" + locationName); 

    } 
```

附加说明

在示例 OP have`location == findLoc.getLocationName()`中，此代码的问题是我们不应该使用`==`来比较对象类型[（详细信息）](https://stackoverflow.com/questions/767372/java-string-equals-versus/767379#767379)。当我们处理 String 类时推荐的方法是使用方法`String#equals(Object)`或 'String#equalsIgnoreCase(String)'。对于这个例子，我使用了第二个选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T07:32:03.687

这是因为函数中的所有控制流都应该以返回一个 long 值结束。

在您的情况下，假设列表中没有匹配项，因此 return 语句将永远不会被执行，这就是报告错误的原因。

要解决此问题，您可以在函数末尾添加一个带有默认值的 return 语句，或者如果您的逻辑允许，您可以抛出一个表示找不到位置的 execption。

解决方案1：如果`1`没有匹配则要返回

```
public long findLocationId(String location) throws SystemException {
    long locId = 1;
    List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,
            -1);
    for (Location findLoc : locationList) {
        if (location == findLoc.getLocationName()) {
            locId = findLoc.getLocationId();
            break;
        }
    }
    return locId;
} 
```

解决方案2：如果找不到位置则抛出异常

```
public long findLocationId(String location) throws SystemException {
    List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,
            -1);
    for (Location findLoc : locationList) {
        if (location == findLoc.getLocationName()) {
            return findLoc.getLocationId();
        }
    }
    throw new SystemException("Unable to find the location");
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T07:33:32.553

这是因为并不总是会出现`location == findLoc.getLocationName()`. 即使是这种情况，java 编译器也不知道你给程序提供了什么样的输入，所以它会告诉你，即使函数必须返回很长的值，它也可能不返回任何内容。

只需在函数末尾返回 -1L 或您的程序可以认为“未找到”的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T07:31:50.247

*必须有一个默认的 return 语句。由于只有返回语句也是有条件的，编译器将强制您使用默认语句。*

```
public long findLocationId(String location) throws SystemException{

    long locId = 1;
    List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);
    for(Location findLoc : locationList)  {
         if(location == findLoc.getLocationName())  {
             locId = findLoc.getLocationId();
                return locId;
         }
    }
    return locId; // default return value
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T07:37:23.517

```
public long findLocationId(String location) throws SystemException
    {

        long locId = 1;

        List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);

            for(Location findLoc : locationList)  {
                if(location == findLoc.getLocationName())  {
                    locId = findLoc.getLocationId();

                }
            }
          return locId;
    } 
```

试试这个你会得到答案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T07:31:57.770

```
public long findLocationId(String location) throws SystemException
    {

        long locId = 1;

        List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);

            for(Location findLoc : locationList)  {
                if(location == findLoc.getLocationName())  {
                    locId = findLoc.getLocationId();
                    break;
                }
            }
            return locId;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T07:32:08.907

那是因为你的`return`陈述在你的`if`陈述中，这是有条件的。因此，如果存在控件从未进入`if`块的情况，则该方法将没有`return`值。

`return`因此，在方法的末尾有一个默认值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-05T07:32:25.977

如果您的`if`声明没有找到任何与您的位置相同的位置，则意味着将会发生什么。这就是发生此编译错误的原因。因此，您必须在方法的末尾添加一个 return 语句。

```
public long findLocationId(String location) throws SystemException
{

    long locId = 1;

    List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);

        for(Location findLoc : locationList)  {
            if(location == findLoc.getLocationName())  {
                locId = findLoc.getLocationId();

                **return locId;**
            }
        }
return
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-05T07:32:30.097

如果您不使用更多执行循环，则应使用break语句从循环中出来。

**您不能在 for 循环中使用 return 语句，因为此 return 语句将调用多次。**

并且该方法一次只需要一个返回语句。
这里`break`的语句将跳出最里面的循环（这里是 for 循环）。

```
public long findLocationId(String location) throws SystemException
    {

        long locId = 1;

        List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);

            for(Location findLoc : locationList)  {
                if(location == findLoc.getLocationName())  {
                    locId = findLoc.getLocationId();
                   break;
                }
            }
     return locId;
    } 
```

更多详情：
[请访问这里](https://stackoverflow.com/questions/5097513/java-break-statement)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-04-05T07:32:44.830

您的 return 语句位于“if”语句中，这意味着如果“if”评估为 false，则不会到达。您需要在“if”语句之外的 return 语句。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-04-05T07:34:04.247

问题是：如果不满足循环中的条件，您的方法会返回什么？

需要返回一个默认值，`return`语句需要放在for循环之后。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-04-05T07:36:09.910

您的代码中有 2 个问题。

1.  一个方法必须有一个`return`，但是在`for`循环中，因为它也是一个条件流（它甚至可能不会运行一次），你必须提供一个替代的 return 语句。尽管它会返回先出现的东西。
2.  每个流程中都必须有一个`return`。但由于您的退货状况良好，因此如果为假`if`，则会缺少一条`return`声明。`if-expression`然后，您需要在外部提供替代的 return 声明`if`。（否则编译器会显示错误）

**在您的代码中：** for(Location findLoc : locationList) { if(location == findLoc.getLocationName()) { locId = findLoc.getLocationId(); 返回位置标识；} } 返回 locId; // 添加这个可以解决问题

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-04-05T07:38:41.093

如果找不到元素，您只需添加一个 return 语句。简单的独立示例：

```
public class Main {

    public static long findStringIDX(String[] myList, String myString) {

        long locId = 0;

        for (String s : myList) {
            if (myString.equalsIgnoreCase(s)) {
                return locId;
            }
            locId++;
        }
        return -1; // Not found

    }

    public static void main(String[] args) {
        String[] myList = new String[] { "hello", "world", "bobby" };
        System.out.println(findStringIDX(myList, "bobby"));
    }

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-04-05T07:38:52.333

简单的方法来做到这一点。

```
public long findLocationId(String location) throws SystemException
{
  long locId = 1; // but i suggest to put -1
  List<Location> locationList = LocationLocalServiceUtil.getLocations(-1,-1);
  for(Location findLoc : locationList)  {
    if(location == findLoc.getLocationName())  {
      return findLoc.getLocationId();
    }
  }
  return locId;
} 
```

# wordpress - php邮件附件在wordpress中失败

> ID：15828238
> 
> 赞同：1
> 
> 时间：2013-04-05T07:30:55.540
> 
> 标签：wordpress, attachment, php

我正在使用 wordpress 创建我的网站。有人可以帮我弄清楚为什么 php 邮件附件无法从我的 wordpress 文件夹以外的其他位置附加文件吗？？？这是我的代码：

```
$subject="Enquiry";
$to = "veena@phenomtec.com";
$from = $_POST['email'];
$url=$_POST['resume']; 
$attachment = chunk_split(base64_encode(file_get_contents($url)));
$filename = basename($url);
$parts=explode("?",$filename);
$filename = $parts[0]; 

    $boundary =md5(date('r', time())); 
    $headers = "From: $from\r\nReply-To: $from";
    $headers .= "\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed; boundary=\"_1_$boundary\"";
    $message="This is a multi-part message in MIME format.
    --_1_$boundary
     Content-Type: multipart/alternative; boundary=\"_2_$boundary\"

    --_2_$boundary
Content-Type: text/html; charset=\"iso-8859-1\"
Content-Transfer-Encoding: 7bit

$message

--_2_$boundary--
--_1_$boundary
Content-Type: application/octet-stream; name=\"$filename\" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment 

$attachment
--_1_$boundary--";

if ( mail($to, $subject, $message, $headers) ){

    echo "<script>alert('Your email message successfully sent.')</script>";
}
else{

 echo "<script>alert('Sorry, message delivery failed. Contact webmaster for more info.')</script>";
 } 
```

我可以从我的 wordpress 文件夹中附加文件。但我无法从其他位置附加文件。有人请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:58:43.763

首先确保您的表单中有 enctype="multipart/form-data" ：

```
<form method="post" enctype="multipart/form-data"> 
```

然后试试这段代码：

```
$subject="Enquiry";
$to = "veena@phenomtec.com";
$from = $_POST['email'];
$attachment = chunk_split(base64_encode(file_get_contents($_FILES['resume']['tmp_name'])));
    $filename = $_FILES['resume']['name'];

    $boundary =md5(date('r', time())); 

    $headers = "From: $from\r\nReply-To: $from";
    $headers .= "\r\nMIME-Version: 1.0\r\nContent-Type: multipart/mixed; boundary=\"_1_$boundary\"";
$message="This is a multi-part message in MIME format.
--_1_$boundary
Content-Type: multipart/alternative; boundary=\"_2_$boundary\"

--_2_$boundary
Content-Type: text/html; charset=\"iso-8859-1\"
Content-Transfer-Encoding: 7bit

$message

--_2_$boundary--
--_1_$boundary
Content-Type: application/octet-stream; name=\"$filename\" 
Content-Transfer-Encoding: base64 
Content-Disposition: attachment 

$attachment
--_1_$boundary--";

if ( mail($to, $subject, $message, $headers) ){

    echo "<script>alert('Your email message successfully sent.')</script>";
}
else{

 echo "<script>alert('Sorry, message delivery failed. Contact webmaster for more info.')</script>";
 } 
```

希望这会奏效:)

# c# - app.config 或 web.config 中的配置与 WCF 中的代码之间的关系

> ID：15828242
> 
> 赞同：8
> 
> 时间：2013-04-05T07:31:15.890
> 
> 标签：c#, wcf

WCF 中的服务主机如何与来自 web.config 或 app.config 的配置进行交互。当我创建服务主机时，我只在服务主机构造函数和服务类中指定一个 url。

但是在 app.config 或 web.config 我有另一个端点列表，每个端点都有自己的特定 url。那么 wcf 是如何处理这种情况的呢？它从 app.config 或 web.config 获取哪个端点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:38:07.137

端点的地址是相对于服务主机的基地址的。例如，如果您有这些端点：

```
<service name="MyService">
    <endpoint address="" binding="ws2007HttpBinding" contract="IMyService" />
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
</service> 
```

和 的服务主机 url `http://localhost:7777`，那么您将在 上公开您的服务`http://localhost:7777`，并在 上公开元数据`http://localhost:7777/mex`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:03:49.037

因此，一般而言，您的交互取决于几个因素 - 您的托管环境、您的代码以及您的网络或应用程序设置。

根据 MSDN ( [http://msdn.microsoft.com/en-us/library/ms733749.aspx](http://msdn.microsoft.com/en-us/library/ms733749.aspx) )：*有两种方法可以在 WCF 中为服务指定端点地址。您可以为与服务关联的每个端点指定绝对地址，也可以为服务的 ServiceHost 提供基地址，然后为与此服务关联的每个端点指定一个地址，该地址是相对于该基地址定义的。您可以使用这些过程中的每一个在配置或代码中指定服务的端点地址。如果不指定相对地址，则服务使用基地址。*

此外，您必须注意您的托管环境。例如 IIS 自己为端点生成你的基地址（即使它在配置中指定），同时在自主机中从配置中读取它。

上面的链接很好地描述了在代码或配置中指定地址的特性，以及它对宿主环境的依赖

# iphone - 配置文件名称

> ID：15828243
> 
> 赞同：0
> 
> 时间：2013-04-05T07:31:20.230
> 
> 标签：iphone, ios, ios-provisioning

我有一个新应用程序，并创建用于开发的配置文件。

我得到一个奇怪的错误：

```
Provisioning profile 'vallabici' specifies the Application Identifier
'com.ingeniaSoluciones.Vallabici' which doesn't match the current setting
'com.ingeniaSoluciones.Vallabici' 
```

一样的。我尝试清理项目，但它仍然无法正常工作。

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:35:36.653

它是一个小故障。它主要发生在您升级 xcode 时。我是如何解决的。我已经关闭了我的项目并删除了当前的配置文件并再次下载了它。并将其添加到管理器，然后启动我的项目并清理它并再次运行。

# file - 如何从python中的文件中获取随机值？

> ID：15828252
> 
> 赞同：0
> 
> 时间：2013-04-05T07:32:03.677
> 
> 标签：file, python-2.7, key-value, random-sample

自己解决这个问题会非常令人欣慰，但我无法做到。

我想从包含字典形式数据的文本文件中获取随机值，例如：

```
{'One': '1111111', 'Two': '2222222', 'Three': '3333333'} 
```

我尝试了一些变体，但代码目前是：

```
from random import *

table = open('file.txt')
random_value = random.choice(table.values()) 
```

当我尝试打印“random_value”（以查看它是否正常工作）时，出现错误：

```
AttributeError: 'file' object has no attribute 'values' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:45:14.563

`table`是一个文件对象，因此你想把它变成一个字典。这里我使用[`ast`](http://docs.python.org/3.4/library/ast.html)模块：

```
from random import choice # No need to import everything if you're going to use just one function
import ast
table = open('file.txt').read()
mydict = ast.literal_eval(table)
random_value = choice(mydict.values()) 
```

# php - 我们如何在 php 中访问 simpleXMLElement 对象

> ID：15828254
> 
> 赞同：0
> 
> 时间：2013-04-05T07:32:05.213
> 
> 标签：php, xml, object, simplexml

```
SimpleXMLElement Object
(
    [0] => CEM
) 
```

有一个[`SimpleXMLElement`](http://php.net/manual/en/class.simplexmlelement.php)像这样的对象。我尝试使用`$object->0`and访问它`$object->{0}`。但它给出了一个php错误。我们如何在不将其更改为另一种格式的情况下访问它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:51:51.353

从您的`print_r`输出来看，这可能不是很明显：

```
SimpleXMLElement Object
(
    [0] => CEM
) 
```

这只是一个包含字符串*CEM*的 XML 元素，例如：

```
<xml>CEM</xml> 
```

您可以通过转换为字符串来获得该值（请参阅[Basic SimpleXML usage ^(*Docs*)](http://php.net/simplexml.examples-basic)）：

```
(string) $object; 
```

当您有一个`SimpleXMLElement`对象并且不确定它代表什么时，使用它`echo $object->asXML();`来输出 XML 并对其进行分析比`print_r`单独使用更容易，因为这些元素具有很多您需要了解的魔力才能正确*读取*`print_r`输出。

上面的一个例子：

```
<?php

$object = new SimpleXMLElement('<xml>CEM</xml>');

print_r($object);

echo "\n", $object->asXML(), "\n";

echo 'Content: ', $object, "\n";  // echo does cast to string automatically 
```

输出：

```
SimpleXMLElement Object
(
    [0] => CEM
)

<?xml version="1.0"?>
<xml>CEM</xml>

Content: CEM 
```

（[在线演示](http://eval.in/14995)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-21T17:49:12.487

在您的情况下，它显示为您执行 print_r($object) 并且 $object 它是一个数组，因此您正在查看的不是 XML 对象，而是包含在 print_r() 的显示对象中的数组

无论如何，要访问 simpleXML 对象，您可以在此处使用 {} 语法：

```
$xmlString = '<uploads token="vwl3u75llktsdzi">
  <attachments>
    <attachment myattr="attribute value">123456789</attachment>
  </attachments>
</uploads>';

$xml  = simplexml_load_string($xmlString);
echo "attachment attribute: " . $xml->{"attachments"}->attributes()["myattr"] " \n";
echo " uploads attribute: " . $xml->{"uploads"}->attributes()["token"] . "\n"; 
```

您可以用 $myVar 或其他东西替换“附件”

请记住 attributes() 返回一个关联数组，因此您可以使用方括号或通过 array_keys() 访问数据或执行 foreach 循环。

在您的具体情况下可能只是

```
echo $object[0];  // returns string "CEM" 
```

# android - Android 应用程序的想法如何实现这一点

> ID：15828263
> 
> 赞同：-10
> 
> 时间：2013-04-05T07:32:58.623
> 
> 标签：android

我想创建一个非常独特的android app。我希望这个应用程序能够连接到任何类型的能量，无论是坏的还是好的......我的主要动机是将我的应用程序连接到鬼魂......这样它就可以成为人类和精神之间的界面......我的意思是如果那样的话应用程序安装在任何人的手机中，而不是应用程序应该连接到那个人的灵魂....
我不知道如何实现我们在 android foxnews 应用程序中看到的相同动画效果。显示启动画面后，主Activity的视图就流畅地显示出来了。我希望在启动画面和仪表板活动之间有相同的动画。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:51:41.163

这篇文章介绍了如何在活动之间切换时更改 Android 的默认动画。在阅读其余部分之前，请知道更改标准动画的代码可以在Android SDK附带的API Demo中找到。但是由于缺乏关于这个主题的适当文档并且很难找到解释它的地方，所以这里有一篇有助于帮助解决这两个问题的帖子。因此，更改两个活动之间动画的代码非常简单：只需在启动新的 后`overridePendingTransition()`从当前调用。此方法可从 Android 版本 2.0（API 级别 5）开始使用，它需要两个参数，用于定义当前.`Activity``Intent``Activity`

```
//Calls a new Activity  
startActivity(new Intent(this, NewActivity.class));  

//Set the transition -> method available from Android 2.0 and beyond  
overridePendingTransition(R.anim.push_left_in,R.anim.push_up_out); 
```

这两个参数是使用 XML 文件定义的动画的资源 ID（每个动画一个）。这些文件必须放在应用程序的 res/anim 文件夹中。这些文件的示例可以在 anim 文件夹内的 Android API 演示中找到。让我们看一下其中一个文件 (push_left_in.xml)：

```
<?xml version="1.0" encoding="utf-8"?>  
<set xmlns:android="http://schemas.android.com/apk/res/android">  
  <translate android:fromXDelta="100%p" android:toXDelta="0" android:duration="300"/>  
  <alpha android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" />  
</set> 
```

# php - 什么是唯一用户并为特定应用程序获得其价值在 Fluury 中

> ID：15828264
> 
> 赞同：0
> 
> 时间：2013-04-05T07:33:07.583
> 
> 标签：php, curl, flurry

Fluury 问题：我想知道，fluurry 中的唯一用户是什么意思，以及如何在flurry 中获得特定应用程序的价值？我有这个 api：[http](http://api.flurry.com/appInfo/getApplication?apiAccessCode=APIACCESSCODE&apiKey=APIKEY&versionName=VERSIONNAME&country=COUNTRY) ://api.flurry.com/appInfo/getApplication?apiAccessCode=APIACCESSCODE&apiKey=APIKEY&versionName=VERSIONNAME&country=COUNTRY 。我提供了访问代码和 api 密钥，因为版本名称和国家/地区是可选的，但它没有得到。

请回复并请帮助。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:59:42.193

请参阅 Flurry 的[支持页面](http://support.flurry.com/index.php?title=API/Code)以获取有关如何实现此目的的更多详细信息。

# asp.net - 在没有请求的情况下调用 Global.asax 中的 ApplicationStart 方法

> ID：15828267
> 
> 赞同：1
> 
> 时间：2013-04-05T07:33:19.047
> 
> 标签：asp.net, iis, iis-7, iis-8

我正在使用 iis 发布我的 asp.net 站点（我的本地机器有 iis v8，服务器的 iis v7）。但是我想在不调用页面的情况下立即在 Global.asax.cs 中启动一个函数。

*当我调用一个页面时，global.asax.cs Application_Start 方法启动。我想在没有页面调用请求的情况下启动它。*

```
 namespace ProductService.XmlFeed
{
    public class Global : HttpApplication
    {
        protected void Application_BeginRequest(Object sender, EventArgs e)
        {
            FtpUploaderMain.RegisterCacheEntry(); //this method I want to start without page call
        }

        void Application_Start(object sender, EventArgs e)
        {
            SimpleLogger.WriteLog("Application Started without a page call","D:\\log.txt");

            RegisterRoutes();

            //FtpUploaderMain.RegisterCacheEntry();
        }

        private void RegisterRoutes()
        {
            RouteTable.Routes.Add(new ServiceRoute("Products", new WebServiceHostFactory(), typeof(ProductXmlFeedService)));
        }
    }
} 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-21T14:46:31.403

您可以使用 IIS8 的 PreLoad 启用功能 - 对于 IIS 7.5，使用应用程序初始化 -

[http://www.iis.net/downloads/microsoft/application-initialization](http://www.iis.net/downloads/microsoft/application-initialization)

# android - Android：如何使用 GPS 测量距离

> ID：15828269
> 
> 赞同：3
> 
> 时间：2013-04-05T07:33:20.957
> 
> 标签：android, gps, distance, measure

我正在尝试制作一个应用程序，该应用程序在用户当前位置获取纬度和经度。并计算瞬时，用户以公里为单位行驶了多少距离。

“currentLat”和“currentLon”是用户当前的纬度和经度。但我不知道“endLat”和“ednLon”的纬度和经度。

对不起，我的英语不好。

提前致谢。

//////////////////////////////

我把它做成了应用程序，但现在只有一个小问题。当我第一次启动程序时，我得到值 5536，当我重新启动程序时，我得到正常值 0.0

再次为我糟糕的英语感到抱歉。:)

伙计们感谢你帮助我，你是最棒的:)

```
 public class Gps extends Activity   {

 TextView display;

  double currentLon=0 ;
  double currentLat=0 ;
  double lastLon = 0;
  double lastLat = 0;
  double distance;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_test);

    display = (TextView) findViewById(R.id.info);

  LocationManager lm =(LocationManager) getSystemService(LOCATION_SERVICE); 
                lm.requestLocationUpdates(lm.GPS_PROVIDER, 0,0, Loclist);
                Location loc = lm.getLastKnownLocation(lm.GPS_PROVIDER);

                if(loc==null){
                    display.setText("No GPS location found");
                    }
                    else{
                        //set Current latitude and longitude
                        currentLon=loc.getLongitude();
                        currentLat=loc.getLatitude();

                        }
                //Set the last latitude and longitude
                lastLat=currentLat;
                lastLon=currentLon ;

}

 LocationListener Loclist = new LocationListener(){

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

     //start location manager
     LocationManager lm =(LocationManager) getSystemService(LOCATION_SERVICE);

      //Get last location
     Location loc = lm.getLastKnownLocation(lm.GPS_PROVIDER);

    //Request new location
      lm.requestLocationUpdates(lm.GPS_PROVIDER, 0,0, Loclist);

      //Get new location
      Location loc2 = lm.getLastKnownLocation(lm.GPS_PROVIDER);

      //get the current lat and long
     currentLat = loc.getLatitude();
     currentLon = loc.getLongitude();

    Location locationA = new Location("point A");
        locationA.setLatitude(lastLat);
        locationA.setLongitude(lastLon);

    Location locationB = new Location("point B");
        locationB.setLatitude(currentLat);
        locationB.setLongitude(currentLon);

        double distanceMeters = locationA.distanceTo(locationB);

        double distanceKm = distanceMeters / 1000f;

        display.setText(String.format("%.2f Km",distanceKm ));

        }

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

 };

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T07:42:09.360

既然您有两个位置，为什么不考虑使用`distanceTo`：

```
float distanceMeters = location1.distanceTo(location2);
float distanceKm = distanceMeters / 1000f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:06:25.457

> 但我不知道“endLat”和“ednLon”的纬度和经度。

endLat、endLon 是一个令人困惑的名称：

您应该有 lastLat, lastLon：在上一次调用 onGpsUpdate 时收到的 lat,lon，将其保存到您的例如 distanceCalculator.lastLat 中，其中 distanceCalculator 是您存储 lastLat 和 lastLon 的对象

那么你应该在 onGPSUpdate 中提供 curLat, curLon: current lat, lon

然后计算从 (lastLat, lastLon) -> (curLat, curLon) 的距离，并更新您的 distanceCalculator.lastLat 和 lastLon。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:51:57.907

[关联](http://www.movable-type.co.uk/scripts/latlong.html)

```
var R = 6371; // Radius of the earth in km
var dLat = (lat2-lat1).toRad();  // Javascript functions in radians
var dLon = (lon2-lon1).toRad(); 
var a = Math.sin(dLat/2) * Math.sin(dLat/2) +
        Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * 
        Math.sin(dLon/2) * Math.sin(dLon/2); 
var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a)); 
var d = R * c; // Distance in km. 
```

# mysql - 数据库中的浮点值转换

> ID：15828279
> 
> 赞同：0
> 
> 时间：2013-04-05T07:34:05.020
> 
> 标签：mysql, floating-point, rounding, type-conversion

在我的数据库中，一些字段（金额，余额）被分配为浮动值，但现在我遇到了一个问题。如果金额为 1.56，则需要 1.6，然后我使用 Round(amount,2) 更改表仍然显示同样的问题。如果有人知道请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:50:30.350

浮点字段必须声明为 float(some_integer, 1) 以显示您描述的行为。这种声明中的第一个整数告诉 MySQL 总共有多少位是可见的，小数点左边的数字**+**小数点右边的数字。要在小数点左侧有 3 位数字，在小数点右侧有 2 位数字，您可以将其声明为`float(5,2)`.

就像 Doan Cuong 已经提到的，如果您选择十进制数据类型会更好。

[在这里](http://www.sqlfiddle.com/#!2/13f73/1/0)看到它的不同行为。

引用手册：

> DECIMAL 和 NUMERIC 类型存储精确的数字数据值。当保持精确的精度很重要时使用这些类型，例如货币数据。
> 
> FLOAT 和 DOUBLE 类型表示近似数值数据值。

有关数据类型的更多信息，请[在此处](http://dev.mysql.com/doc/refman/5.0/en/numeric-types.html)阅读更多信息。

# javascript - 解绑函数时遇到问题

> ID：15828285
> 
> 赞同：2
> 
> 时间：2013-04-05T07:34:23.150
> 
> 标签：javascript, jquery, dom

我有 4 张人的图像，每个人都有 4 张与他们相对应的食物图像。当一个人的名字被点击时，它会加粗他们的名字。如果您单击另一个名称，它会变为粗体。

我要做的第二件事是，当您单击每个人时，切换食物图像。到目前为止，他们似乎只是在编译，而不是转储以前的。我尝试取消绑定拉入图像的功能，以尝试在单击新名称时使图像消失，但我无法使其工作！

有谁知道我能做什么？非常感谢所有帮助！

```
$(document).ready(function(){
  $('a').click(function(){
    $(".onclick").removeClass('onclick');
    $(this).addClass('onclick');
    return false;
  });
  $('#Jim').click(function(){
    groceryList (Jim);
    $("#Jim").unbind();
    return false;
  });
  $('#Jane').click(function(){
    groceryList (Jane);
    $("#Jane").unbind();
    return false;
  });
  $('#Bob').click(function(){
    groceryList (Bob);
    $("#Bob").unbind();
    return false;
  });
  $('#Roberta').click(function(){
    groceryList (Roberta);
    $("#Roberta").unbind();
    return false;
  });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:37:48.187

```
$("#Jim").unbind().click(function (e) {

 //your content here 

 } 
```

随着您的点击被正确绑定或解除绑定

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:42:04.703

你必须`event`通过`.unbind(event)`：

```
$("#yourselectors").unbind('click'); 
```

### 笔记：

你没有正确设置你的小提琴，所以很难看出你的小提琴发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:45:57.097

您需要做的是，在添加下一批项目之前清除食物区域，而不是取消绑定单击处理程序：

```
function groceryList (a){
    "use strict";

    $('#food').children(':not(h2)').remove();
    // the rest of your function
} 
```

# android - 将 XML 字符串解析为 Sax 解析器 android

> ID：15828290
> 
> 赞同：1
> 
> 时间：2013-04-05T07:34:42.570
> 
> 标签：android

我有一个包含 xml 文件数据的字符串

如

```
<?xml version="1.0" encoding="UTF-8"?>

<data>

<type>
<lory>vroom</lory>
<car>crack</car>
</type>

<type>
<lory>doom</lory>
<car>chack</car>
</type>

</data> 
```

这保存在一个名为标签的字符串中；

我使用 sax 解析器检索数据如下

```
SAXHelper sh = null;

            try {
                sh = new SAXHelper(newxml);
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }

            sh.parseContent(""); 
```

saxhelper 类的一部分

```
class SAXHelper {

        public HashMap<String, String> userList = new HashMap<String, String>();
        private String data;

        public SAXHelper(String url1) throws MalformedURLException {
            this.data = new String(url1);
        }

        public RSSHandler parseContent(String parseContent) {
            RSSHandler df = new RSSHandler();
            try {

                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();
                XMLReader xr = sp.getXMLReader();
                xr.setContentHandler(df);
                xr.parse(data);

            } catch (Exception e) {
                e.printStackTrace();
            }
            return df;
        }
    } 
```

但我以这个错误结束，显示畸形错误。简而言之，我想将 xml 字符串传递给 sax 解析器以设置并获取结果。

```
04-05 11:25:18.390: W/System.err(2646):     at org.apache.harmony.xml.ExpatParser.openUrl(ExpatParser.java:760)
04-05 11:25:18.398: W/System.err(2646):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:289)
04-05 11:25:18.398: W/System.err(2646):     at org.apache.harmony.xml.ExpatReader.parse(ExpatReader.java:322)
04-05 11:25:18.398: W/System.err(2646):     at .CompteDetails$SAXHelper.parseContent(CompteDetails.java:228)
04-05 11:25:18.398: W/System.err(2646):     at .CompteDetails$loadingTask.doInBackground(CompteDetails.java:202)
04-05 11:25:18.398: W/System.err(2646):     at .details.CompteDetails$loadingTask.doInBackground(CompteDetails.java:1)
04-05 11:25:18.398: W/System.err(2646):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
04-05 11:25:18.398: W/System.err(2646):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-05 11:25:18.398: W/System.err(2646):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-05 11:25:18.398: W/System.err(2646):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
04-05 11:25:18.398: W/System.err(2646):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
04-05 11:25:18.398: W/System.err(2646):     at java.lang.Thread.run(Thread.java:1019)
04-05 11:25:18.402: W/System.err(2646): Caused by: java.net.MalformedURLException: Protocol not found: <?xml version="1.0" encoding="UTF-8"?>.. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:53:05.963

您正在传递原始 XML：

```
<?xml version="1.0" encoding="UTF- 
```

因此例外：

```
04-05 11:25:18.402: W/System.err(2646): Caused by: java.net.MalformedURLException: Protocol not found: <?xml version="1.0" encoding="UTF-8"?> 
```

# android - 使用 BaseAdapter 的 ListFragment 出现问题

> ID：15828291
> 
> 赞同：0
> 
> 时间：2013-04-05T07:34:43.380
> 
> 标签：android, nullpointerexception, loader, android-listfragment, baseadapter

我正在尝试使用自定义 BaseAdapter 创建一个列表。我收到 nullpointerexception 错误，似乎我无法将数据正确加载到适配器或视图错误。

下面是我的代码：
FragmentActivity

```
public class NewsItemListActivity extends FragmentActivity implements NewsItemListFragment.Callbacks {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_newsitem_list);        
        if (savedInstanceState != null) {
            mActivePosition = savedInstanceState.getInt(STATE_ACTIVE_POSITION);
        }
        if (findViewById(R.id.newsitem_detail_container) != null) {
            listfragment = ((NewsItemListFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.newsitem_list));
            listfragment.setActivateOnItemClick(true);      
        }
} 
```

Activity_newsitem_list 布局

```
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/newsitem_list"
    android:name="com.example.app.NewsItemListFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_marginLeft="16dp"
    android:layout_marginRight="16dp"
    tools:context=".NewsItemListActivity"
    tools:layout="@android:layout/list_content" /> 
```

列表片段

```
public class NewsItemListFragment extends ListFragment implements LoaderManager.LoaderCallbacks<List<NewsData>>{

    List<NewsData> listdata;
    CustomAdapter mListAdapter;

    public NewsItemListFragment() {
    }

    @Override 
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        // Initially there is no data 
        setEmptyText("No Data Here");

        mListAdapter = new CustomAdapter(getActivity(),listdata);
        setListAdapter(mListAdapter);

        // Start out with a progress indicator.
        setListShown(false);

        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<List<NewsData>> onCreateLoader(int arg0, Bundle arg1) {
        return new ListLoader(getActivity());
    }
    @Override
    public void onLoadFinished(Loader<List<NewsData>> arg0,
            List<NewsData> data) {
            listdata = data;
        mListAdapter.notifyDataSetChanged();
        if (isResumed()) {
            setListShown(true);
        } else {
            setListShownNoAnimation(true);
        }       
    }
    @Override
    public void onLoaderReset(Loader<List<NewsData>> arg0) {
        listdata = null;
    }

} 
```

基础适配器

```
public class CustomAdapter extends BaseAdapter{

    private List<NewsData> list;
    Context context;
    public CustomAdapter(Context c,List<NewsData> data){
        context = c;
        list = data;    
    }
    @Override
    public int getCount() {
        return list.size();
    }

    @Override
    public Object getItem(int position) {
        return list.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view;

        if (convertView == null) {
            LayoutInflater mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            view = mInflater.inflate(R.layout.list_layout, parent, false);
        } else {
            view = convertView;
        }

        NewsData item = list.get(position);
        ((TextView)view.findViewById(R.id.subject)).setText(item.getSubject());
        ((TextView)view.findViewById(R.id.cdate)).setText(item.getCDate());

        return view;
    }

} 
```

新闻数据类

```
public class NewsData {
    public String id;
    public String subject; 
    public String cdate;

        public NewsData(String id, String subject,String cdate) {
            this.id = id;
            this.subject = subject;
            this.cdate = cdate;
        }
        public String getId() {
            return id;
        }
        public void setId(String id) {
            this.id = id;
        }
        public String getSubject() {
            return subject;
        }
        public void setSubject(String subject) {
            this.subject = subject;
        }
        ........
} 
```

添加装载机

```
@Override
    public List<NewsData> loadInBackground() {
        List<NewsData> entries = null;
            .....
            return entries.add(new NewsData(i,subject,cdate));
}

@Override 
    public void deliverResult(List<NewsData> listOfData) {
        List<NewsData> oldNews = listOfData;
        mNewsData = listOfData;

        if (isStarted()) {
            // If the Loader is currently started, we can immediately
            // deliver its results.
            super.deliverResult(listOfData);
        }
    } 
```

错误日志

```
04-05 07:31:17.951: E/AndroidRuntime(1495): FATAL EXCEPTION: main
04-05 07:31:17.951: E/AndroidRuntime(1495): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.appapp/com.example.appapp.NewsItemListActivity}: java.lang.NullPointerException
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.os.Looper.loop(Looper.java:137)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.ActivityThread.main(ActivityThread.java:4745)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at java.lang.reflect.Method.invokeNative(Native Method)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at java.lang.reflect.Method.invoke(Method.java:511)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at dalvik.system.NativeStart.main(Native Method)
04-05 07:31:17.951: E/AndroidRuntime(1495): Caused by: java.lang.NullPointerException
04-05 07:31:17.951: E/AndroidRuntime(1495):     at com.example.appapp.CustomAdapter.getCount(CustomAdapter.java:25)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.widget.ListView.setAdapter(ListView.java:460)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.ListFragment.setListAdapter(ListFragment.java:182)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at com.example.appapp.NewsItemListFragment.onActivityCreated(NewsItemListFragment.java:96)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.Fragment.performActivityCreated(Fragment.java:1468)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:931)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1088)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1070)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1861)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.support.v4.app.FragmentActivity.onStart(FragmentActivity.java:547)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.Instrumentation.callActivityOnStart(Instrumentation.java:1163)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.Activity.performStart(Activity.java:5018)
04-05 07:31:17.951: E/AndroidRuntime(1495):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2032)
04-05 07:31:17.951: E/AndroidRuntime(1495):     ... 11 more 
```

抱歉发了这么长的帖子...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:59:35.517

其实很简单

我可以看到你没有初始化 `List<NewsData> listdata`
这就是你得到的原因`NullPointerException`。

您应该在使用它之前创建该列表的新实例。

写`listdata = new List<NewsData> ()`在你的`OnCreate ()`并在其中添加一些项目`List`

# jquery - 如何从日历中选择多个日期

> ID：15828292
> 
> 赞同：0
> 
> 时间：2013-04-05T07:34:44.303
> 
> 标签：jquery, jquery-plugins, wordpress

我是 wordpress .im 的新手，使用 jQuery UI Widgets 插件从 jquery 日历中选择日期。但我想在日历中选择多个日期。谁能帮我怎么做。任何其他插件都可以做到这一点。

谢谢

这是我的jQuery代码

```
 jQuery(document).ready(function() {

           jQuery('#pre-select-dates').multiDatesPicker({
    dateFormat : 'dd-mm-yy'
});
}); 
```

任何人都可以帮助我做到这一点......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:46:00.397

突出显示的日期有 1px 的黄色边框，但几乎看不到，所以我给它添加了红色。

[http://jsfiddle.net/TfmKJ/](http://jsfiddle.net/TfmKJ/)

可能对你有用，只是你看不到它。选定的日子有课`ui-state-highlight`

# python - 从 Windows 7 完全卸载 Python 2.7 的问题

> ID：15828294
> 
> 赞同：9
> 
> 时间：2013-04-05T07:34:48.550
> 
> 标签：python

几个月前，我在笔记本电脑上安装了 Python 2.7（我的操作系统是 Windows 7）。之后，我决定使用 Python xy 2.7.3 而不是“纯”Python；所以，按照建议，我删除了 Python 2.7 并尝试安装 Python xy 2.7.3。但是，当我尝试运行 .exe 文件进行安装时，会出现一个警告窗口，告诉我 Python 2.7 已经安装在我的计算机上。我尝试安装不同版本的 Python xy（2.6），一切正常；但是，我真的更喜欢使用最新版本的 Python xy。实际上，我不知道卸载 Python 2.7 时出了什么问题。有人有任何线索吗？我可以告诉你，我遵循了程序卸载的“正常”程序；控制面板 -> 程序 -> 删除程序

提前致谢

斯特凡诺

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-11T00:35:21.863

运行 regedit，备份并删除注册表项：

HKEY_LOCAL_MACHINE\软件\Python\

HKEY_CURRENT_USER\软件\Python

从 Canopy 更改为 Python(x,y) 时出现了我的问题。因此，还要删除卸载时留下的所有文件夹。 [https://support.enthought.com/entries/23580651-Uninstalling-Canopy](https://support.enthought.com/entries/23580651-Uninstalling-Canopy)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-06T22:24:54.087

我也有这个问题。这是由于第三方安装。即使您已经卸载了 python，它也会留下所有已安装的第三方库，我认为 Python(x,y) 只是检测到该目录。

要修复，请卸载 Python 2.7，然后检查 C:\Python27 是否仍然存在。如果是这样，请继续删除，然后尝试安装 Python(x,y)。这对我有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-17T21:45:51.577

我遇到了这个问题：
我试图卸载 python 并全新安装，原因是我的 pip 版本问题没有得到解决。
所以我删除了python文件夹，从系统路径中删除了python，当我试图从控制面板的“卸载程序”中卸载时，它显示“Windows安装包”错误窗口并且无法清除卸载。
我找到的解决方案是：在“卸载程序”中选择 python 并单击修复。然后卸载python，它对我有用。希望这会有所帮助并节省一些时间。
PS：我对python很陌生，任何纠正我的帮助将不胜感激。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T08:56:55.870

也许可以在那里给出答案。

从 Windows 卸载任何东西都会有多种副作用，完全存在于您的特定机器上。至于什么是常见的：

-> Python 在你的 windows 路径中设置自己。以下是修改windows路径的方法：http: [//www.computerhope.com/issues/ch000549.htm](http://www.computerhope.com/issues/ch000549.htm) 这意味着python有可能消失了，但路径条目可能没有。然而，这是一个猜测->需要更多信息

-> 你确定所有东西都从你的电脑上删除了吗？如果您已经完成了正常的卸载过程 - 尝试查找是否仍然存在任何 python 目录。

-> 第三方安装？您是否下载了仍然在您的机器上的任何库。

除此之外——它可以是任何东西——你给我们的信息越多，我们就能说得越多。

也许这篇文章会对你有所帮助：[如何从 Windows 机器中完全删除 Python？](https://stackoverflow.com/questions/3515673/how-to-completely-remove-python-from-a-windows-machine)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-15T22:17:23.450

我有 python 2.7.12 并想为 2.7.9 卸载它。我和你有同样的问题并修复它我试图删除所有本地文件然后卸载但它仍然给我同样的错误。因此，我决定修复 python 2.7.12，然后卸载它完美地工作并完全摆脱了错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-09T15:08:03.780

我安装了 python 2.7 并考虑了树冠。我想切换到 python(x,y) 来访问完整版的 OpenCV 库。python(x,y) 安装后抱怨 python 2.7 已经安装： 1) 使用 Windows 控制面板 2) 删除所有挥之不去的 python 文件 3) 删除上面建议的 windows 路径

直到我删除了所有与 python/enthough 相关的注册表项，python(x,y) 才安装没有问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-17T09:07:15.863

找到用于安装 Python 的设置文件。运行它并选择修复。如果这不能解决问题。转到 c:\Python(x,y) 并通过 shift+Del 完全删除此文件夹。

再次运行该设置文件并单击“更改”，最终将再次安装 Python。默认情况下，在我的情况下，添加路径并将该版本的 Python 设置为我系统上的默认版本的选项未选中，这可以通过在安装屏幕之一中查看红十字标记来确定。如果要设置为默认 Python 版本，请单击它，并单击选项以指示您希望将路径添加到 Windows 环境变量中。

无需触摸注册表，因为以前的注册表将再次被覆盖。就我而言，它起作用了。我收到如下错误：

致命的 Python 错误：Py_Initialize：无法加载文件系统编解码器 LookupError：未注册编解码器搜索功能：找不到编码

此外，从控制面板卸载失败。所以上面的步骤解决了我所有的问题。希望能帮助到你。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-11T22:51:37.877

1.  我已修复/修改以安装我要卸载的 Python 版本的所有组件。
2.  完成后，我单击卸载/更改，然后将其永久卸载。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-22T02:52:59.947

我之前安装了Enthought。当我想安装 Python(x,y) 时，遇到了上述问题。

在我尝试从控制面板卸载 Enthought 和 Python(x,y) 然后重新启动 PC 后，下次安装 Python(x,y) 时问题仍然存在。

我通过以下方式解决了这个问题：

1.  删除C:/User/UserName/AppData/中关于Python的所有相关文件，包括Enthought等第三方软件；
2.  删除用户和系统环境中的路径；=====如果我不做第三步，这两个步骤就失败了。=====
3.  正如@Daniel 所说，删除注册密钥。（如果您安装了有关 Python 的第三方软件，请包括所有以 py 为前缀的相关键。）

HKEY_LOCAL_MACHINE\软件\Python\

HKEY_CURRENT_USER\软件\Python

# c# - 动态添加 JavaScript 代码到 View

> ID：15828298
> 
> 赞同：0
> 
> 时间：2013-04-05T07:34:55.153
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我有一些代码来显示谷歌地图。在我的控制器中，我创建了 javascript：

```
MapCode = string.Format("<script type='text/javascript'>init_map('my_map', {0}, {1}, 20)</script>", location.Location.Coordinate.Latitude, location.Location.Coordinate.Longitude) 
```

但我不能只写我的观点：

@Model.MapCode

因为那只是显示实际的 javascript - 不执行它。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:38:10.440

用于[`HtmlHelper.Raw()`](http://msdn.microsoft.com/en-us/library/gg480740%28v=vs.98%29.aspx)输出未编码的原始 HTML 到视图。

```
@Html.Raw(Model.MapCode) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:39:02.840

您可以作为模型传递`location.Location`，然后在您的视图上执行此操作：

```
<script type='text/javascript'>init_map('my_map', '@Model.Coordinate.Latitude', '@Model.Coordinate.Longitude', 20)</script> 
```

以这种方式，您不必从控制器构建脚本，这始终不是一个好主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:42:12.220

我不认为混合服务器端和客户端（JavaScript 和 C#）代码是一种好的做法。

或者，如果您使用 jQuery，您可以使用[jQuery.getScript() 。](http://api.jquery.com/jQuery.getScript/)这样，您可以创建 AJAX 请求以获取数据并在 AJAX 回调中执行此操作。

# ssrs-2008 - 获取介于两者之间的值

> ID：15828302
> 
> 赞同：0
> 
> 时间：2013-04-05T07:35:08.123
> 
> 标签：ssrs-2008

在 Report Builder 3.0 中，我有一串以逗号分隔的值，例如“Value1、Value2、Value3、Value4”。我已经使用 Split() 来获得第一个和最后一个位置，但是我如何获得介于“Value1”和“Value4”之间的所有内容。我可以删除拆分函数创建的数组中的第一个和最后一个位置吗？我正在寻找的结果是“Value2，Value3”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T10:41:42.653

我可以想到几种方法：

```
=Trim(Split(Fields!valueString.Value, ",")(1))
  & ", "
  & Trim(Split(Fields!valueString.Value, ",")(2)) 
```

与您已经在做的类似，只需将两个值重新连接在一起。`Trim`只是有助于避免任何空白问题。

```
=Trim(Mid(Fields!valueString.Value
 , InStr(Fields!valueString.Value, ",") + 1
 , InStrRev(Fields!valueString.Value, ",") - InStr(Fields!valueString.Value, ",") - 1)) 
```

这只是使用基于逗号位置的字符串操作。再次 Trim 用于清理空白。

当您的输入字符串为意外格式时，这些都不一定是完美的，因此根据您的数据，可能需要进行额外检查，但对于`Value1, Value2, Value3, Value4`这两个表达式都`Value2, Value3`按要求返回。

# split - 在 HBase 中，如果单行大小超过区域最大大小会发生什么？

> ID：15828310
> 
> 赞同：-2
> 
> 时间：2013-04-05T07:35:22.813
> 
> 标签：split, row, hbase, region

我知道如果区域大小超过配置的最大大小，HBase 会将其拆分为 2 个区域，并且似乎 1 行仅位于 1 个区域中。那么如果行大小超过配置的最大区域大小会发生什么？

例如，如果我有一行有 100 列，每列包含 3M 字节，那么这一行总共有 300M 字节。并且最大区域大小设置为 256M，那么会发生什么？也许我无法成功插入这样的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:02:10.990

HBase 拆分是在行边界上完成的。如果一行恰好大于区域大小，则不会被拆分。

# nhibernate - 属性值的 NHibernate 生成器（来自序列或自动增量）

> ID：15828311
> 
> 赞同：0
> 
> 时间：2013-04-05T07:35:25.507
> 
> 标签：nhibernate, oracle10g

我有以下 nHibernate 映射和相应的类。映射工作正常。我希望从“1”开始自动插入“RfpId”字段的值。

```
<?xml version="1.0" encoding="utf-8"?>
<hibernate-mapping namespace="IBeam.Core.Models" assembly="IBeam.Core" xmlns="urn:nhibernate-mapping-2.2">
<class name="Rfp" table="EST_MRFP" schema="test$tran">
    <id name="Id" type="long">
        <generator class="sequence" >
            <param name="sequence">test$masters.global_sequence</param>
        </generator>
    </id>
    <property name="RfpId" column="RfpId" type="String" not-null="true" />
    <property name="Title" column="Title" type="String" not-null="true" />
  </class>
</hibernate-mapping> 
```

我怎样才能做到这一点？现在我已经创建了一个 oracle 序列“RfpSequence”。在插入每个类型的新记录之前，我通过运行查询`Rfp`从中获取 NEXTVAL 。`RfpSequence`有什么方法可以让 nHibernate 为我做到这一点，就像它为该`Id`领域所做的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:20:29.343

数据库是否负责增量？如果是这样尝试： -

```
<property name="RfpId" generated="always" update="false" insert="false" /> 
```

需要注意的是，NH 需要在插入后直接执行选择以更新值。

# python - 如果 (foo 或 bar 或 baz) 为无：

> ID：15828312
> 
> 赞同：8
> 
> 时间：2013-04-05T07:35:26.673
> 
> 标签：python, styles, correctness

我一直在重构一些相当笨拙的代码，并遇到了以下相当奇怪的结构：

```
#!/usr/bin/env python2.7
# ...
if (opts.foo or opts.bar or opts.baz) is None:
    # (actual option names changed to protect the guilty)
    sys.stderr.write("Some error messages that these are required arguments") 
```

...我想知道这是否有任何可能的意义。

我将其更改为：

```
#!/usr/bin/env python2.7 
if None in (opts.foo, opts.bar, opts.baz):
    # ... 
```

我确实启动了一个解释器并实际尝试了第一个构造......它似乎只在值全部为假**并且**这些假值中的最后一个为无时才有效。（换句话说，CPython 的实现似乎从***or***表达式链中返回第一个真值或最后一个假值）。

我仍然怀疑正确的代码应该使用在 2.5 中添加的***any()***或***all()***内置插件（有问题的代码已经需要 2.7）。我还不确定哪个是首选/预期的语义，因为我刚刚开始这个项目。

那么在任何情况下这个原始代码是有意义的吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:38:42.193

之所以这样做，是因为它`or`是一个短路运算符，详细信息在[docs](http://docs.python.org/2/library/stdtypes.html#boolean-operations-and-or-not)中。因此，您的第一`if`条语句等于：

```
if opts.baz is None 
```

我们可以猜出该代码的作者所期望的。我认为，正如你提到的，他考虑过使用`not all([opts.foo, opts.bar, opts.baz])`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T07:47:04.840

短路行为会导致`foo or bar or baz`返回三个布尔值中的第一个值，如果都是布尔值，则返回最后一个值。所以它基本上意味着“如果所有都是假的，最后一个是无”。

您更改的版本略有不同。 `if None in (opts.foo, opts.bar, opts.baz)`例如，`if`如果为 None 并且其他两个为 1，则将进入该块`opts.foo`，而原始版本不会（因为`None or 1 or 1`将评估为 1，这不是 None）。`if`当三个中的*任何*一个为 None 时，您的版本将输入，而不管其他两个是什么，而原始版本将`if`仅在*最后一个*为 None*并且*其他两个是任何 boolean-false 值时输入。

您想要两个版本中的哪一个取决于其余代码的结构以及选项可能采用的值（特别是，它们是否可能具有除 None 之外的布尔假值，例如`False`或`0`或空字符串）。直觉上你的版本似乎更合理，但如果代码中有这样的特殊技巧，你永远不知道会出现什么极端情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:54:05.013

我会选择

```
 if any(i is None for i in (opts.foo, opts.bar, opts.baz)) 
```

因为它准确地表达了预期的目标。

哦，

```
not all([opts.foo, opts.bar, opts.baz]) 
```

确实检查错误，而不是检查`None`.

原始代码似乎没有意义；它似乎是由不知道自己在做什么的人写的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:00:53.897

让我们试试你的两个代码：

```
In [20]: foo = True

In [22]: bar = None

In [23]: baz = None

In [24]: foo or bar or baz
Out[24]: True

In [25]: (foo or bar or baz) is None
Out[25]: False

In [28]: ((foo or bar or baz) is None) == (None in (foo, bar, baz))
Out[28]: False 
```

您可以看到您的重写与原始代码不同。

只有当所有变量都为 None 时，您的第一个条件才返回 True

```
In [19]: (None or None or None) is None
Out[19]: True 
```

所以你可以将你的第一个条件重写为：

```
if foo == bar == bar == None: 
```

# android-maps-v2 - Android Maps v2 API ...如何计算两个位置之间的距离（经纬度）

> ID：15828315
> 
> 赞同：6
> 
> 时间：2013-04-05T07:35:33.663
> 
> 标签：android-maps-v2

在我的“原生”Android 应用程序中，我试图计算地图上两个位置之间的英尺和/或米（如乌鸦飞翔）的距离。理想情况下，会有一种方法将两个 LatLng 值（因为这是我现成的）作为输入，并以米和/或码为单位返回距离。如上所述，我使用的是 Android Maps v2 API。

我查看了许多有关计算距离的帖子 (20-30)，但没有发现任何可以帮助我解决问题的帖子。同样，这是一个原生 Android 应用程序，我正在使用 Maps v2 API。

不确定这是否是最好的方法，但我目前正在尝试使用该`Location`方法：

```
distanceBetween(double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results) 
```

但不幸的是，应用程序每次都会崩溃，因为我得到的结果为空值。我已经通过调试器验证了我传入的纬度和经度虚拟值是有效的，并且值为`results`空（因此出现了问题）。这是LogCat：

```
04-04 23:48:04.770: D/onMapClick(17970): lat/lng: (32.90843038503306,-117.22537234425546)
04-04 23:48:08.710: D/dalvikvm(17970): threadid=1: still suspended after undo (sc=1 dc=1 s=Y)
04-04 23:48:08.710: D/dalvikvm(17970): GC_FOR_MALLOC freed 7010 objects / 641712 bytes in 121ms
04-04 23:48:24.980: D/AndroidRuntime(17970): Shutting down VM
04-04 23:48:24.980: W/dalvikvm(17970): threadid=1: thread exiting with uncaught exception (group=0x40020950)
04-04 23:48:25.100: E/AndroidRuntime(17970): FATAL EXCEPTION: main
04-04 23:48:25.100: E/AndroidRuntime(17970): java.lang.IllegalArgumentException: results is null or has length < 1
04-04 23:48:25.100: E/AndroidRuntime(17970):    at android.location.Location.distanceBetween(Location.java:394)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at com.example.googleplacesandmaps.PlacesMapActivity$1.onMapClick(PlacesMapActivity.java:259)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at com.google.android.gms.maps.GoogleMap$6.onMapClick(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at com.google.android.gms.internal.t$a.onTransact(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at android.os.Binder.transact(Binder.java:249)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at com.google.android.gms.maps.internal.IOnMapClickListener$Stub$Proxy.onMapClick(IOnMapClickListener.java:93)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at maps.i.s.b(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at maps.y.v.c(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at maps.y.bf.onSingleTapConfirmed(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at maps.d.v.onSingleTapConfirmed(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at maps.d.j.handleMessage(Unknown Source)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at android.os.Looper.loop(Looper.java:123)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at java.lang.reflect.Method.invokeNative(Native Method)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at java.lang.reflect.Method.invoke(Method.java:521)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:893)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:651)
04-04 23:48:25.100: E/AndroidRuntime(17970):    at dalvik.system.NativeStart.main(Native Method) 
```

这是我目前用来尝试计算距离的方法：

```
 Location.distanceBetween(Double.parseDouble(user_latitude), Double.parseDouble(user_longitude),
                fxdLatitude, fxdLongitude, results); 
```

被`results`定义为一个类变量： `private float[] results = null;`

不知道我在这里做错了什么。

同样，我宁愿有一种方法可以将两个 LatLng 作为输入参数，因为它们都很容易获得……但也许更重要的是，我只有一个位置可用作单独的经度、纬度值……第二个位置是仅可用作 LatLng 值，因为我通过 onMapClick （当用户点击屏幕时）获得它。因此，要使用该方法`distanceBetween`，我需要以某种方式将此 LatLng 值转换为纬度/经度对才能使用它。有人知道该怎么做吗？

希望有一种计算距离的简单方法和一种从 LatLng 值“提取”纬度/经度的简单方法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-11-14T08:19:19.240

如何从两者中制作 Location 对象？

```
private float distanceBetween(LatLng latLng1, LatLng latLng2) {

        Location loc1 = new Location(LocationManager.GPS_PROVIDER);
        Location loc2 = new Location(LocationManager.GPS_PROVIDER);

        loc1.setLatitude(latLng1.latitude);
        loc1.setLongitude(latLng1.longitude);

        loc2.setLatitude(latLng2.latitude);
        loc2.setLongitude(latLng2.longitude);

        return loc1.distanceTo(loc2);
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T01:16:55.357

您可以使用以下接受两个 LatLng 的函数来计算它们之间的距离。但在您使用它之前，请确保您的 LatLng 变量不为空。

> ```
> public static double distance(LatLng StartP, LatLng EndP) {
>     double lat1 = StartP.latitude;
>     double lat2 = EndP.latitude;
>     double lon1 = StartP.longitude;
>     double lon2 = EndP.longitude;
>     double dLat = Math.toRadians(lat2-lat1);
>     double dLon = Math.toRadians(lon2-lon1);
>     double a = Math.sin(dLat/2) * Math.sin(dLat/2) +
>     Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *
>     Math.sin(dLon/2) * Math.sin(dLon/2);
>     double c = 2 * Math.asin(Math.sqrt(a));
>     return 6366000 * c;
> } 
> ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-14T14:37:02.240

`private float[] results = null;`是错的。

您需要使用`private float[] results = new float[1];`和读取距离`results[0]`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-30T08:01:08.590

在**Kotlin**中，您可以：

定义要转换`LatLng`为的方法`Location`：

```
fun LatLng.toLocation() = Location(LocationManager.GPS_PROVIDER).also {
    it.latitude = latitude
    it.longitude = longitude
} 
```

在每个`LatLng`和使用`Location#distanceTo(...)`方法上调用它：

```
val distance = coords1.toLocation().distanceTo(coords2.toLocation()) 
```

为 定义扩展方法`LatLngBounds`：

```
fun LatLngBounds.computeDistance(): Float {
    return northeast.toLocation().distanceTo(southwest.toLocation())
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-11T07:40:30.850

是的，我认为 MaciejGórski 是对的。

计算出的距离存储在 results[0] 中。如果 results 的长度为 2 或更大，则初始方位存储在 results[1] 中。如果 results 的长度为 3 或更大，则最终方位存储在 results[2] 中。

# magento - 修改 Magento 核心文本

> ID：15828321
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:35:52.680
> 
> 标签：magento, checkout, core

我想在 Magento 结帐时将“发现”一词更改为“大来”。它们是已保存的信用卡支付网关的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:37:51.140

在 Mage Payment 等 config.xml

```
 <DI>
    <code>DI</code>
    <name>Discover</name>
    <order>30</order>
 </DI> 
```

在此处更改名称清除缓存并检查。

或者在您的 app/etc/local.xml 中将其添加到您的配置节点中并将 Discover 更改为适当的值

```
 </global>
    <payment>
        <cc>
            <types>
                <DI>
                    <code>DI</code>
                    <name>Discover</name>
                    <order>30</order>
                </DI>
            </types>
        </cc>
    </payment>
</global> 
```

# javascript - 向类原型添加方法，错误

> ID：15828327
> 
> 赞同：0
> 
> 时间：2013-04-05T07:36:15.170
> 
> 标签：javascript, class, methods

关于向对象添加方法的快速问题。

为什么我会返回错误？我检查了语法，它似乎是正确的。Javascript 新手。

```
// create your Animal class here
function Animal(name, numLegs) {
    this.name = name;
    this.numLegs = numLegs;
}

// create the sayName method for Animal
Animal.prototype.sayname = function() {
    console.log("Hi my name is " + this.name);
};

// test
var penguin = new Animal("Captain Cook", 2);
penguin.sayName(); 
```

尝试运行代码时出现此错误

```
TypeError: Object #<Animal> has no method 'sayName' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:37:03.587

是的，因为您已将方法声明为`sayname`使用小写`n`字母。

JavaScript 是一种区分大小写的语言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:40:02.803

您调用`sayName()`并添加的功能是`function sayname(){}`.

# iphone - 如何从目标文件 (Mach-o) 中获取 SEL (@selector())？SEL 如何存储在 Mach-o 中？

> ID：15828329
> 
> 赞同：6
> 
> 时间：2013-04-05T07:36:39.897
> 
> 标签：iphone, objective-c, reverse-engineering, ida, cydia-substrate

从 objc 来源我们可以看到它`SEL`被定义为`typedef struct objc_selector *SEL;`

我已经用[idaq](https://hex-rays.com/products/ida/support/download_demo.shtml)反汇编了我的 dylib ，我确实找到了`_MSHookMessageEx`从 libsubstrate.dylib 链接的函数调用

`_MSHookMessageEx`有以下签名

```
void MSHookMessageEx(Class class, SEL selector, IMP replacement, IMP *result); 
```

所以我们可以假设在源代码中有类似`@selector(someMethod:)`第二个参数的东西

在目标文件的数据部分，我可以看到源代码中使用的所有 CFStrings

![在此处输入图像描述](https://i.stack.imgur.com/ILvFr.png)

但是这里没有任何选择器字符串，所以我们可以看到`@selector()`没有转换成静态的`CFString`

我对找到传递给`_MSHookMessageEx`函数的选择器和类的字符串表示非常感兴趣。

**如何从目标文件 (Mach-o) 中获取 SEL (@selector())？SEL 如何存储在 Mach-o 中？**

谢谢！

**更新：**

我确实发现在调用方法之前 ida 方法表示中有一些字符串

![在此处输入图像描述](https://i.stack.imgur.com/PHGvO.png)

**我猜有些选择器会传递给函数。我对吗？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T08:18:11.667

选择器名称存储在`__objc_methname`段的`__TEXT`部分中：

```
:; otool -v -s __TEXT __objc_methname /System/Library/Frameworks/AppKit.framework/AppKit | head
/System/Library/Frameworks/AppKit.framework/AppKit:
Contents of (__TEXT,__objc_methname) section
0x000000000097cbd8  count
0x000000000097cbde  countByEnumeratingWithState:objects:count:
0x000000000097cc09  alloc
0x000000000097cc0f  initWithObjects:count:
0x000000000097cc26  release
0x000000000097cc2e  autorelease
0x000000000097cc3a  copy
0x000000000097cc3f  timeIntervalSinceNow 
```

指向选择器的指针存储在`__objc_selrefs`段的`__DATA`部分中：

```
:; otool -v -s __DATA __objc_selrefs /System/Library/Frameworks/AppKit.framework/AppKit | head
/System/Library/Frameworks/AppKit.framework/AppKit:
Contents of (__DATA,__objc_selrefs) section
0x0000000000d77d80  __TEXT:__objc_methname:initWithObjects:count:
0x0000000000d77d88  __TEXT:__objc_methname:copy
0x0000000000d77d90  __TEXT:__objc_methname:timeIntervalSinceNow
0x0000000000d77d98  __TEXT:__objc_methname:sharedAppleEventManager
0x0000000000d77da0  __TEXT:__objc_methname:_prepareForDispatch
0x0000000000d77da8  __TEXT:__objc_methname:_setLaunchTaskMaskBits:
0x0000000000d77db0  __TEXT:__objc_methname:_disableSuddenTermination
0x0000000000d77db8  __TEXT:__objc_methname:_appleEventActivationInProgress 
```

源代码中的A`SEL`实际上（当前）是指向选择器的 C 字符串名称的指针。所以如果你写这个：

```
SEL s = @selector(initWithObjects:count:); 
```

然后`s`实际上是 a `char const *`，它指向字符串`initWithObjects:count:`。直到最近，您还可以通过以下方式打印选择器名称：

```
NSLog(@"selector is %s", (char *)s); 
```

但是，Apple 更改了编译器（我相信从 Xcode 4.6 开始）以禁止将 a 强制转换`SEL`为 a `char *`，因此他们将来可能会更改选择器的实现。

无论如何，棘手的部分是机器代码`__objc_selrefs`使用 PC 相对寻址从该部分加载指针。PC 是“程序计数器”，即当前执行指令的地址。在 x86 架构上，它通常称为 IP（指令指针）或 EIP（扩展 IP）。

这就是您的反汇编相关说明中发生的事情：

```
1444    LDR R1, =(off_2038 - 0x145C)
        ...
1454    LDR R1, (PC,R1) 
```

指向选择器的指针从地址 0x2038 处的字加载。但是常量 0x2038 实际上并没有出现在机器代码中。通过分析程序的数据流，您的反汇编程序帮助您计算了它。存储在第一`LDR`条指令中的常量实际上是 0xBDC，因为 0xBDC + 0x145C = 0x2038。

您可能想知道为什么当第二`LDR`条指令位于地址 0x1454 时它使用 0x145C。当 ARM 处理器使用 PC 相对寻址计算地址时，PC 的值实际上是当前执行指令的地址**加 4 或加 8**（取决于处理器模式）。 [这记录在这里](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0473c/Cacdbfji.html)（可能还有其他地方）。

# android - 如何将片段与 Viewpager 一起用于滑动页面

> ID：15828333
> 
> 赞同：3
> 
> 时间：2013-04-05T07:36:56.873
> 
> 标签：android, android-viewpager, fragment

我对 Viewpager 和 Fragment 有疑问。我想创建滑动视图，因为我需要 Viewpager 的片段类。我怎么能实现这样的东西！

我通过网络搜索使用viewpager得到了类似的东西！

```
 public class ViewPagerFragmentActivity extends FragmentActivity {

    private PagerAdapter mPagerAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.viewpager_layout);

        // initialsie the pager
        this.initialisePaging();
    }

    /**
     * Initialize the fragments to be paged
     */
    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();
        fragments.add(Fragment.instantiate(this, Fragment0.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragment1.class.getName()));
        fragments.add(Fragment.instantiate(this, Fragment2.class.getName()));
        this.mPagerAdapter = new MyPagerAdapter(super.getSupportFragmentManager(), fragments);

        ViewPager pager = (ViewPager) super.findViewById(R.id.viewpager);
        pager.setAdapter(this.mPagerAdapter);
    }
} 
```

清单文件：

```
 <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name="slider.example.ViewPagerFragmentActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name="slider.example.Fragment0" android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait" />
        <activity android:name="slider.example.Fragment1" android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait" />
        <activity android:name="slider.example.Fragment2" android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait" />
<activity android:name=".MyPagerAdapter"></activity>
    </application> 
```

错误：

```
04-05 13:22:39.804: E/AndroidRuntime(468): FATAL EXCEPTION: main
04-05 13:22:39.804: E/AndroidRuntime(468): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{slider.example/slider.example.ViewPagerFragmentActivity}: java.lang.ClassNotFoundException: slider.example.ViewPagerFragmentActivity in loader dalvik.system.PathClassLoader[/data/app/slider.example-2.apk]
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1569)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.os.Looper.loop(Looper.java:123)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-05 13:22:39.804: E/AndroidRuntime(468):  at java.lang.reflect.Method.invokeNative(Native Method)
04-05 13:22:39.804: E/AndroidRuntime(468):  at java.lang.reflect.Method.invoke(Method.java:507)
04-05 13:22:39.804: E/AndroidRuntime(468):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-05 13:22:39.804: E/AndroidRuntime(468):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-05 13:22:39.804: E/AndroidRuntime(468):  at dalvik.system.NativeStart.main(Native Method)
04-05 13:22:39.804: E/AndroidRuntime(468): Caused by: java.lang.ClassNotFoundException: slider.example.ViewPagerFragmentActivity in loader dalvik.system.PathClassLoader[/data/app/slider.example-2.apk]
04-05 13:22:39.804: E/AndroidRuntime(468):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
04-05 13:22:39.804: E/AndroidRuntime(468):  at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
04-05 13:22:39.804: E/AndroidRuntime(468):  at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-05 13:22:39.804: E/AndroidRuntime(468):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1561)
04-05 13:22:39.804: E/AndroidRuntime(468):  ... 11 more 
```

任何人都可以指导我@thanks ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:45:37.343

我发现本教程对于创建 Fragment ViewPager 非常清晰和有帮助：

[http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/](http://thepseudocoder.wordpress.com/2011/10/13/android-tabs-viewpager-swipe-able-tabs-ftw/)

看看吧，另外请参考这里：

[http://androidtrainningcenter.blogspot.co.il/2012/10/viewpager-example-in-android.html](http://androidtrainningcenter.blogspot.co.il/2012/10/viewpager-example-in-android.html) [http://manishkpr.webheavens.com/android-viewpager-example/](http://manishkpr.webheavens.com/android-viewpager-example/) [http://manishkpr.webheavens.com /android-viewpager-circle-style-example/](http://manishkpr.webheavens.com/android-viewpager-circle-style-example/)

**没有标签的 ViewPager：**

[http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

更新：

首先删除这部分：

```
<activity android:name="slider.example.Fragment0" android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait" />
<activity android:name="slider.example.Fragment1" android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait" />
<activity android:name="slider.example.Fragment2" android:theme="@android:style/Theme.NoTitleBar" android:screenOrientation="portrait" />
<activity android:name=".MyPagerAdapter"></activity> 
```

不是片段或适配器不是活动，您不应该将它们写入清单文件。

并尝试更改这部分：

```
<activity android:name="slider.example.ViewPagerFragmentActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

对此：

```
<activity android:name=".ViewPagerFragmentActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:46:04.923

访问“[替换视图寻呼机中的片段](https://stackoverflow.com/questions/15649749/replacing-a-fragment-in-a-view-pager/15652478#15652478)”，查看寻呼机事务。当您正在寻找研究片段时，请访问-' [http://developer.android.com/guide/components/fragments.html#Lifecycle](http://developer.android.com/guide/components/fragments.html#Lifecycle) '

# openssl - 使用自定义 openssl 引擎防止私钥暴露

> ID：15828341
> 
> 赞同：1
> 
> 时间：2013-04-05T07:37:32.623
> 
> 标签：openssl, pkcs#12, sslengine

是否可以让引擎生成密钥对，让应用程序“使用”私钥（例如签名）而不实际暴露密钥？例如，openssl 会返回某种引用，但不会返回密钥本身。此外，应该有一种方法来存储密钥对（以及任何相关的证书链）并在以后检索它们。我们正在考虑将所有内容存储在 pkcs12 结构中。

你能给我一些指示如何在 C 中做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:19:01.597

这可以通过使用OpenSSL 支持的硬件安全模块 ( [http://en.wikipedia.org/wiki/Hardware_Security_Module ) 来实现。](http://en.wikipedia.org/wiki/Hardware_Security_Module)

我过去曾成功地将 nCipher HSM 与 OpenSSL 一起使用，但它们并不是唯一受支持的供应商。

# ios - 在 UIViewController 中加载 nib 文件

> ID：15828344
> 
> 赞同：6
> 
> 时间：2013-04-05T07:37:38.213
> 
> 标签：ios, uiviewcontroller, xib, nib

我正在尝试如何将 nib 文件加载到`UIViewController`.

我创建了一个名为**Email**的单独 nib 文件。首先我注意到当视图控制器被加载时，该`initWithNibName`方法没有被调用。`viewDidLoad`所以我像这样手动从方法中调用它，

```
[self initWithNibName:@"Email" bundle:[NSBundle mainBundle]]; 
```

那没起效。我也收到了一个警告，说*Expression result used*。

我在互联网上搜索并遇到了[这篇](http://www.indelible.org/ink/nib-loading/)文章并`loadView`按照描述的方法实现了这样的方法，

```
- (void)loadView
{
    [super loadView];

    UINib *nib = [UINib nibWithNibName:@"Email" bundle:nil];
    [nib instantiateWithOwner:self options:nil];
} 
```

该方法被调用但视图控制器仍然是空的！

谁能告诉我我在这里忽略了什么以及如何做到这一点？

谢谢你。

**更新：**

首先，感谢所有回复。然而**voromax**和**svena**的回答表明我应该删除 segues 并自动加载我不太喜欢的笔尖。Anil 的答案很有效，现在我还有最后一个障碍要跳。

我有多个笔尖文件。根据用户的选择，它应该加载一个特定的笔尖。所以我尝试的是，像这样把所有的笔尖放在数组中，

```
- (void)loadView
{
    [super loadView];

    NSArray *nibs = [[NSArray alloc] initWithObjects:
                     [[NSBundle mainBundle] loadNibNamed:@"Facsimile" owner:self options:nil],
                     [[NSBundle mainBundle] loadNibNamed:@"Email" owner:self options:nil],
                     [[NSBundle mainBundle] loadNibNamed:@"Memorandum" owner:self options:nil],
                     [[NSBundle mainBundle] loadNibNamed:@"ProjectMemo" owner:self options:nil], nil];

    self.view = [nibs objectAtIndex:0];
} 
```

并像这样使用它的索引访问它`self.view = [nibs objectAtIndex:1];`。但它会引发错误 *由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：'-[__NSArrayM _setViewDelegate:]：无法识别的选择器已发送到实例 0xd56fd20'*

为什么会出现这个错误？如果不可能，我愿意接受建议。

再次感谢。很抱歉有点拖了后腿。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T07:59:52.823

使用以下代码从 nib 加载视图并用作视图控制器的视图

```
- (void)loadView
{ 
[super loadView];

NSArray *nib =[[NSBundle mainBundle]loadNibNamed:@"test" owner:self options:nil];
self.view = [nib objectAtIndex:0];
} 
```

**编辑**

根据用户选择加载单个笔尖。查看加载单个笔尖

```
 NSArray *nib =[[NSBundle mainBundle]loadNibNamed:@"test" owner:self options:nil]; 
```

将返回一个对象数组。从您更新的问题中，我可以看到您将这些数组存储到另一个数组中。现在你的 nib 数组是一个 'array' 对象的数组。

```
 self.view = [[nibs objectAtIndex:0]objectAtIndex:0]; 
```

将工作。

但这不好，根据用户选择加载单个笔尖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:47:00.607

您不应该从该视图控制器的方法中为该视图控制器加载一个 nib。

如果你想从 nib 实例化一个视图控制器，你可以从那个视图控制器的外部进行，通常是呈现它的视图控制器。

如果您正在呈现的视图控制器中寻找已经设置出口连接的钩子，则覆盖`-awakeFromNib`是一种流行的选择。`-viewDidLoad`是另一个。

更新#1

```
- (BOOL)shouldPerformSegueWithIdentifier:(NSString *)identifier sender:(id)sender
{
   if ( /*do your segue identification stuff*/ ) {
      UIViewController *myViewController = /*init your view controller here*/
      UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:myViewController];
      [self presentViewController:navigationController animated:YES completion:nil];
      return NO;
   }
   return YES;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:47:45.797

您应该使用 nib 文件来实例化视图控制器本身，即

```
UIViewController *ctrl = [[UIViewController alloc] initWithNibName:@"Email" bundle:nil]; 
```

之后你可以展示这个控制器

**更新**

如果您需要选择应用程序逻辑应该加载哪个视图控制器，最好在一个故事板中创建所有视图控制器，跳过`instantiateViewControllerWithIdentifier:`故事板实例的硬 segue 绑定和使用方法来获取适当的视图控制器并呈现它手动。我假设您的表视图控制器已经在导航控制器中：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
    if (APPROPRIATE_INDEX_PATH) {
        UIViewController *ctrl = [self.storyboard instantiateViewControllerWithIdentifier:IDENTIFIER];
        [self.navigationController pushViewController:ctrl animated:YES];
    }
} 
```

# jquery - 使用 jquery 向下滚动 15% 后更改 div 颜色

> ID：15828348
> 
> 赞同：-5
> 
> 时间：2013-04-05T07:37:48.717
> 
> 标签：jquery, css, html, colors, scroll

我在下面有这个 jquery 代码，它使 div 滚动。但我也希望它在距离顶部下降 15% 时将 div 颜色更改为 #32200F。然后在距离顶部不到 15% 时返回原始背景。

```
<script type="text/javascript">
        $().ready(function() {
                var $scrollingDiv = $("#navbar");

                $(window).scroll(function(){            
                        $scrollingDiv
                                .stop()
                                .animate({"marginTop": ($(window).scrollTop() + 0) + "px"}, "slow" );
                });
        });
</script> 
```

这是我原始背景的 CSS 代码。我可以将其设为一个类以使其更容易：

```
#navbar {
     /* Fallback for web browsers that don't support RGBa */
     background-color: rgb(0, 0, 0);
     background-color: rgba(50,32,15,0.5);     
     /* For IE 5.5 - 7*/
     filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#4c32200F, endColorstr=#4f32200F);
     /* For IE 8*/
     -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#4c32200F, endColorstr=#4f32200F)";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:31:47.540

尝试：

```
$(document).ready(function () {
   var $scrollingDiv = $("#navbar");

   $(window).scroll(function () {
       $scrollingDiv.stop()
           .animate({
           "marginTop": ($(window).scrollTop() + 0) + "px"
       }, "slow");
       $scrollingDiv.css("background-color", (($(window).scrollTop() / $(document).height()) > 0.15) ? "orange" : "");
     });
}); 
```

[演示](http://jsfiddle.net/uMPuW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:53:44.833

```
<script type="text/javascript">
    $().ready(function() {
            var $scrollingDiv = $("#navbar");

            $(window).scroll(function(){            
                    $scrollingDiv
                            .stop()
                            .animate({"marginTop": ($(window).scrollTop() + 0)+ "px"},"slow");
                           $(".yourdiv").css('background-color', 'blue');
            });
    }); 
```

# c# - 记录另一个进程使用的串行端口数据

> ID：15828349
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:37:49.667
> 
> 标签：c#, serial-port

我有一个第三方工具，它允许我们通过串口连接到设备。要连接设备，该工具会通过串行端口发送信号。我们需要知道通过串口发送了什么信号。我们需要这些数据来实现其他一些逻辑。请给我建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:43:07.410

一种解决方案是使用[http://com0com.sourceforge.net/](http://com0com.sourceforge.net/)之类的设置虚拟串行端口，然后说真正的串行端口是 COM1

做 COM1 <--> 你的应用程序 <--> VIRTUALCOM1 <-- 虚拟连接 -> VirtualCOM2 <---- 第三方工具

您的应用程序在虚拟 com 和 COM1 之间传递数据，然后可以拦截您喜欢的任何数据

# c++ - 如何防止基于 ASIO 的服务器终止

> ID：15828359
> 
> 赞同：2
> 
> 时间：2013-04-05T07:38:24.310
> 
> 标签：c++, boost, network-programming, boost-asio

我一直在阅读一些 Boost ASIO 教程。到目前为止，我的理解是整个发送和接收都是一个循环，只能迭代一次。请看下面的简单代码：

客户端.cpp：

```
#include <boost/asio.hpp>
#include <boost/array.hpp>
#include <iostream>
#include <string>

boost::asio::io_service io_service;
boost::asio::ip::tcp::resolver resolver(io_service);
boost::asio::ip::tcp::socket sock(io_service);
boost::array<char, 4096> buffer;

void read_handler(const boost::system::error_code &ec, std::size_t bytes_transferred)
{
  if (!ec)
  {
    std::cout << std::string(buffer.data(), bytes_transferred) << std::endl;
    sock.async_read_some(boost::asio::buffer(buffer), read_handler);
  }
}

void connect_handler(const boost::system::error_code &ec)
{
  if (!ec)
  {        
    sock.async_read_some(boost::asio::buffer(buffer), read_handler);
  }
}

void resolve_handler(const boost::system::error_code &ec, boost::asio::ip::tcp::resolver::iterator it)
{
  if (!ec)
  {
    sock.async_connect(*it, connect_handler);
  }
}

int main()
{
  boost::asio::ip::tcp::resolver::query query("localhost", "2013");
  resolver.async_resolve(query, resolve_handler);
  io_service.run();
} 
```

程序`resolves`一个地址，`connects`到服务器和`reads`数据，最后**`ends`**在没有数据的时候。我的问题：我怎样才能继续这个循环？我的意思是，如何在我的应用程序的整个生命周期中保持客户端和服务器之间的这种连接，以便服务器在它*有*东西要发送时发送数据？我试图打破这个圈子，但所有的接缝都被困在里面`io_service.run()` 同样的问题也适用于我的服务器：

服务器.cpp：

```
#include <boost/asio.hpp>
#include <string>

boost::asio::io_service io_service;
boost::asio::ip::tcp::endpoint endpoint(boost::asio::ip::tcp::v4(), 2013);
boost::asio::ip::tcp::acceptor acceptor(io_service, endpoint);
boost::asio::ip::tcp::socket sock(io_service);
std::string data = "Hello, world!";

void write_handler(const boost::system::error_code &ec, std::size_t bytes_transferred)
{
}

void accept_handler(const boost::system::error_code &ec)
{
  if (!ec)
  {
    boost::asio::async_write(sock, boost::asio::buffer(data), write_handler);
  }
}

int main()
{
  acceptor.listen();
  acceptor.async_accept(sock, accept_handler);
  io_service.run();
} 
```

这只是一个例子。在实际应用程序中，我可能希望保持套接字打开并将其重用于其他数据交换（读取和写入）。我该怎么做。

我重视你的善意评论。如果您参考了一些解决此问题的简单解决方案，如果您提及它，我将不胜感激。谢谢

**更新（服务器示例代码）**

根据下面给出的答案（更新 2），我编写了服务器代码。请注意，代码已简化（尽管可以编译和运行）。另请注意，io_service 永远不会返回，因为它总是在等待新的连接。***这就是`io_service.run`永不回归和永远运行的方式***。每当您希望 io_service.run 返回时，只需让接受者不再接受即可。请以我目前不记得的许多方式之一来做这件事。（说真的，我们如何以干净的方式做到这一点？:)）

请享用：

```
#include <boost/asio.hpp>
#include <boost/thread.hpp>
#include <string>
#include <iostream>
#include <vector>
#include <time.h>
boost::asio::io_service io_service;
boost::asio::ip::tcp::endpoint endpoint(boost::asio::ip::tcp::v4(), 2013);
boost::asio::ip::tcp::acceptor acceptor(io_service, endpoint);
//boost::asio::ip::tcp::socket sock(io_service);
std::string data = "Hello, world!";

class Observer;
std::vector<Observer*> observers;

class Observer
{
public:
    Observer(boost::asio::ip::tcp::socket *socket_):socket_obs(socket_){}
    void notify(std::string data)
    {
        std::cout << "notify called data[" << data << "]" << std::endl;
        boost::asio::async_write(*socket_obs, boost::asio::buffer(data) , boost::bind(&Observer::write_handler, this,boost::asio::placeholders::error));
    }
    void write_handler(const boost::system::error_code &ec)
    {
         if (!ec) //no error: done, just wait for the next notification
             return;
         socket_obs->close(); //client will get error and exit its read_handler
         observers.erase(std::find(observers.begin(), observers.end(),this));
         std::cout << "Observer::write_handler  returns as nothing was written" << std::endl;
    }
private:
        boost::asio::ip::tcp::socket *socket_obs;
};

class server
{
public:
     void CreatSocketAndAccept()
     {
          socket_ = new boost::asio::ip::tcp::socket(io_service);
          observers.push_back(new Observer(socket_));
          acceptor.async_accept(*socket_,boost::bind(&server::handle_accept, this,boost::asio::placeholders::error));
     }
      server(boost::asio::io_service& io_service)
      {
          acceptor.listen();
          CreatSocketAndAccept();
      }

      void handle_accept(const boost::system::error_code& e)
      {
          CreatSocketAndAccept();
      }
private:
  boost::asio::ip::tcp::socket *socket_;
};

class Agent
{
public:
    void update(std::string data)
    {
        if(!observers.empty())
        {
//          std::cout << "calling notify data[" << data << "]" << std::endl;
            observers[0]->notify(data);
        }
    }

};
Agent agent;
void AgentSim()
{
    int i = 0;
    sleep(10);//wait for me to start client
    while(i++ < 10)
    {
        std::ostringstream out("");
        out << data << i ;
//      std::cout << "calling update data[" << out.str() << "]" << std::endl;
        agent.update(out.str());
        sleep(1);
    }
}
void run()
{
    io_service.run();
    std::cout << "io_service returned" << std::endl;
}
int main()
{
    server server_(io_service);

    boost::thread thread_1(AgentSim);
    boost::thread thread_2(run);
    thread_2.join();
    thread_1.join();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:32:47.803

您可以简化基于 asio 的 porgram 的逻辑，如下所示：每个调用 async_X 函数的函数都提供一个处理程序。这有点像状态机的状态之间的转换，其中处理程序是状态，而异步调用是状态之间的转换。只是退出处理程序而不调用 async_* 函数就像转换到结束状态。程序“所做”的一切（发送数据、接收数据、连接套接字等）都发生在转换期间。

如果你这样看，你的客户看起来像这样（只有“好路径”，即没有错误）：

```
<start>         --(resolve)----> resolve_handler
resolve_handler --(connect)----> connect_handler
connect_handler --(read data)--> read_handler
read_handler    --(read data)--> read_handler 
```

你的服务器是这样的：

```
<start>         --(accept)-----> accept handler
accept_handler  --(write data)-> write_handler
write_handler   ---------------> <end> 
```

由于您`write_handler`没有做任何事情，它会转换到最终状态，即`ioservice::run`返回。现在的问题是，在将数据写入套接字之后，您想做什么？根据这一点，您将必须定义一个相应的转换，即执行您想要执行的操作的异步调用。

**更新：** 从您的评论中，我看到您想等待下一个数据准备好，即下一个刻度。然后过渡如下所示：

```
write_handler   --(wait for tick/data)--> dataready
dataready       --(write data)----------> write_handler 
```

你看，这引入了一个新的状态（处理程序），我称之为它`dataready`，你也可以称之为它`tick_handler`或其他东西。转换回 write_handler 很简单：

```
void dataready()
{
  // get the new data...
  async_write(sock, buffer(data), write_handler);
} 
```

在某些计时器上，从 的过渡`write_handler`可以很简单。`async_wait`如果数据来自“外部”并且您不知道它们何时准备好，请等待一段时间，检查数据是否在那里，如果没有，请再等待一段时间：

```
write_handler    --(wait some time)--> checkForData
checkForData:no  --(wait some time)--> checkForData
checkForData:yes --(write data)------> write_handler 
```

或者，在（伪）代码中：

```
void write_handler(const error_code &ec, size_t bytes_transferred)
{
  //...
  async_wait(ticklenght, checkForData);
}

void checkForData(/*insert wait handler signature here*/)
{
  if (dataIsReady())
  {
    async_write(sock, buffer(data), write_handler);
  }
  else
  {
    async_wait(shortTime, checkForData):
  }
} 
```

**更新 2：** 根据您的评论，您已经有一个以某种方式进行时间管理的代理（调用 update every tick）。以下是我将如何解决这个问题：

1.  让代理拥有一个观察者列表，当更新调用中有新数据时，这些观察者会得到通知。
2.  让每个观察者处理一个客户端连接（套接字）。
3.  让服务器等待传入的连接，从它们创建观察者并将它们注册到代理。

我对 ASIO 的确切语法不是很确定，所以这将是手动伪代码：

服务器：

```
void Server::accept_handler()
{
    obs = new Observer(socket);
    agent.register(obs);
    new socket; //observer takes care of the old one
    async_accept(..., accept_handler);
} 
```

代理人：

```
void Agent::update()
{
    if (newDataAvailable())
    {
        for (auto& obs : observers)
        {
             obs->notify(data);
        }
    }
} 
```

观察员：

```
void Observer::notify(data)
{
    async_write(sock, data, write_handler);
}

void Observer::write_handler(error_code ec, ...)
{
     if (!ec) //no error: done, just wait for the next notification
         return;
     //on error: close the connection and unregister
     agent.unregister(this);
     socket.close(); //client will get error and exit its read_handler
} 
```

# asp.net - 带有状态服务器会话的 ASP.NET 中的 DDOS 攻击

> ID：15828360
> 
> 赞同：3
> 
> 时间：2013-04-05T07:38:25.163
> 
> 标签：asp.net, session, ddos

到处都找不到这个问题...

使用 ASP.NET 3.5，我有 3 个 Web 服务器，在一个 Web 场中，使用 ASP.NET 状态服务器（在不同的服务器上）。

所有页面都使用会话（他们阅读并更新会话）

问题：我的页面容易受到DDOS攻击，很容易被攻击，只要进入任何页面，按住'F5'键30-60秒，请求就会堆积在所有的Web服务器中。

我读到，如果您对会话进行多次调用，每个会话都会锁定会话，因此另一个请求必须等待才能获得同一个用户的会话，这种等待最终会导致 DDOS。

我们的解决方案非常原始，从阻止（母版页、自定义控件）调用会话并只允许页面调用，到添加禁用 F5 键的 javascript。

我刚刚意识到带有会话的 ASP.NET 很容易受到这种 DDOS 攻击！

有人遇到过类似的问题吗？任何全球/优雅的解决方案？请分享谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:55:46.357

检查这个：

[动态 IP 限制](http://www.iis.net/downloads/microsoft/dynamic-ip-restrictions)：IIS 的动态 IP 限制扩展为 IT 专业人员和主机提供了一个可配置的模块，通过临时阻止遵循的 HTTP 客户端的 Internet 协议 (IP) 地址，帮助减轻或阻止拒绝服务攻击或通过暴力破解密码一种可能有助于此类攻击的模式。可以配置此模块，以便可以在 Web 服务器或网站级别进行分析和阻止。

另外，检查这个：

[DoS 攻击](http://forums.iis.net/t/1162414.aspx)：大多数站点/数据中心将通过硬件而不是软件来控制 (D)DOS 攻击。防火墙、路由器、负载平衡器等。在 IIS 的应用程序级别上拥有它是无效的或不可取的。我不希望像这样的膨胀减慢 IIS。

此外，DDOS 预防是一个复杂的设置，甚至是死机硬件盒，只是为了处理它，需要大量的处理能力来处理不同的规则和分析。

查看您的网络环境基础设施并查看设置并查看您的硬件提供了什么保护，如果有问题，请查看专用硬件解决方案。您应该在链中尽快阻止 DDOS 攻击，而不是在网络服务器级别的最后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:16:04.270

好吧，对于最优雅的解决方案；它必须在`network level`. 由于“几乎”不可能将 DDOS 攻击与有效会话流量区分开来，因此您需要一种在网络流量上运行的学习算法；大多数企业级 Web 应用程序都需要网络级别的 DDOS 防御者。这些对于 DDOS 来说是相当昂贵且更稳定的解决方案。您可能会询问您的数据中心，他们是否有 DDOS 防御硬件，如果有，他们可以将您的服务器流量放在设备后面。这个市场上的两个主要竞争对手：

[http://www.arbornetworks.com/](http://www.arbornetworks.com/)

[http://www.riorey.com/](http://www.riorey.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-16T15:12:14.527

我们在工作中遇到了同样的问题。它尚未解决，但我们正在研究的两种解决方法是：

1.  更改会话状态提供程序，使其不锁定会话。如果您的应用程序逻辑允许这样做...
2.  升级会话状态服务器以使其更快（例如 SQL 2016 内存中会话状态）。这使用户更难引起问题，并意味着您的应用程序应该恢复得更快。

# matlab - Matlab - 如何在打印到屏幕时删除换行符？

> ID：15828361
> 
> 赞同：1
> 
> 时间：2013-04-05T07:38:29.100
> 
> 标签：matlab

例如有一个很大的分数

持续2个小时

还有需要看看还有多少

在外循环的屏幕上做输出

但是数值又很多，比如70000

问题 - 如何在打印到屏幕时删除换行符

不接收 70 000 行

并且只在一行中查看当前显示？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T07:47:26.510

而不是使用`disp`在屏幕上显示文本，使用`fprintf`，这需要您手动输入换行符。

比较

```
>> disp('Hello, '), disp('World')
Hello, 
World 
```

和

```
>> fprintf('Hello, '), fprintf('World\n')
Hello, World 
```

`\n`末尾的表示`'World\n'`换行符（或通常称为*换行符）。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T07:51:00.900

试试这个函数，你可以用它来代替`disp`字符串参数。它显示到命令窗口，并记住它显示的消息。下次调用它时，它首先从命令窗口中删除先前的输出（使用 ASCII 退格字符），然后打印新消息。

通过这种方式，您只能看到最后一条消息，并且命令窗口不会填满旧消息。

```
function teleprompt(s)
%TELEPROMPT prints to the command window, over-writing the last message
%
%       TELEPROMPT(S)
%       TELEPROMPT()      % Terminate
%
%       Input S is a string.

persistent lastMsg

if isempty(lastMsg)
    lastMsg = '';
end

if nargin == 0
    lastMsg = [];
    fprintf('\n');
    return
end

fprintf(repmat('\b', 1, numel(sprintf(lastMsg))));
fprintf(s);

lastMsg = s; 
```

# javascript - 如何从javascript获取变量到rails

> ID：15828371
> 
> 赞同：0
> 
> 时间：2013-04-05T07:38:50.000
> 
> 标签：javascript, ruby-on-rails

我得到这样的javascript：

```
 FB.api('/me', function(response) {
      var name = response.name;
          first_name = response.first_name;
      alert("Name: "+ name + "\nFirst name: "+ first_name);} 
```

我如何获得 Rails 控制器的`name`价值`first_name`？我使用 Rails 3.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:46:59.663

通过 ajax 或通过设置表单输入的值，将 javascript 数组的值放在请求参数中。我将在我的示例中使用 jQuery：

选项 1（ajax）：

```
$.post('/users/some_action', {"name" : name, "first_name", first_name}) 
```

选项2（设置表格）：

```
$('#name').val(name)
$('#first_name').val(first_name) 
```

在您的控制器中：

```
name = params[:name]
first_name = params[:first_name] 
```

# android - android：如何以编程方式获取给定 PID 的内存使用情况（ram）

> ID：15828372
> 
> 赞同：0
> 
> 时间：2013-04-05T07:38:50.473
> 
> 标签：android

我想以给定的时间速率记录给定应用程序的 ram 使用情况。我编写了代码来获取使用的完整内存值，但不知道如何获取给定 PID 的内存使用情况。

请帮帮我

这是我用来获取内存的代码

```
 ActivityManager localActivityManager = (ActivityManager)getSystemService("activity");
    ActivityManager.MemoryInfo localMemoryInfo = new ActivityManager.MemoryInfo();
    localActivityManager.getMemoryInfo(localMemoryInfo);
    Log.i("",String.valueOf(localMemoryInfo.availMem)); 
```

我想我可以使用 public MemoryInfo[] getProcessMemoryInfo (int[] pids) 来获取它，但不知道如何为它编码，因为我是一个 android 初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:45:18.070

```
ActivityManager localActivityManager = (ActivityManager)getSystemService(Context.ACTIVITY_SERVICE); // use Context.ACTIVITY_SERVICE not the literal "activity"
List<ActivityManager.RunningAppProcessInfo> procsInfo = localActivityManager.getRunningAppProcesses();

int[] pids = new int[procsInfo.size()];
for (int i = 0; i < procsInfo.size(); i++) {
    ActivityManager.RunningAppProcessInfo info = procsInfo.get(i);
    pids[i] = info.pid;
}

Debug.MemoryInfo[] procsMemInfo = localActivityManager.getProcessMemoryInfo(pids);
// now walk the procsMemInfo array 
```

如果您安排一个循环计时器定期重新查询正在运行的 pid 并查询内存信息，您可以使用时间戳来计算一段时间内的内存使用情况。

# shell - 在两个模式之间提取具有行号的匹配行

> ID：15828377
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:38:59.813
> 
> 标签：shell, sed, awk, grep

是否可以使用 sed、awk 或 grep 将行号复制到destinationphp 文件以进行模式匹配？例如，
我想将所有行号在**'<(single quot less than)**和**'>;(single quot greater than comma)**之间的行从 source.php 文件复制到destination.php

这是source.php![在此处输入图像描述](https://i.stack.imgur.com/O4QBM.png)

我有代码
**sed -ne "/''\;/wdestination.php" source.php**
输出看截图
![在此处输入图像描述](https://i.stack.imgur.com/gvl54.png)

但我想在行首复制匹配的行号，行数据如下一个屏幕截图所示
![在此处输入图像描述](https://i.stack.imgur.com/qqzH0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T10:36:17.077

```
sed -ne "/'</,/>'\;/{=;p}" source.php | sed 'N;s/\n/ /;wdestination.php' 
```

希望这就是你要找的 +

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:10:57.180

```
 awk " /'</ {printme = 1}; printme {print NR; print} ; />';/ {printme =0} " source.php | sed 'N;s/\n/ : /' > destination.php 
```

看看这是否有效 +

# java - 当您将鼠标移到 Java 中的文本字段上时，有没有办法显示像“云”一样的弹出窗口？

> ID：15828380
> 
> 赞同：1
> 
> 时间：2013-04-05T07:39:14.407
> 
> 标签：java, swing, tooltip, mouse, textfield

当我将鼠标悬停在Java中的文本字段上时，我正在寻找一种显示气球提示的方法，例如指导用户放置一些特定数据的方式：ID：0-0000-000或类似的东西.. .

除了 jOptionPane 之外，有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T07:42:55.913

我猜您正在寻找一种添加[工具提示](http://docs.oracle.com/javase/tutorial/uiswing/components/tooltip.html)的方法？试试这个：

```
// A textfield with tooltip that provides help text
JTextField textfield = new JTextField();
textfield.setToolTipText("<your help string here>"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T07:42:01.110

您可以使用该[`JtextField#setToolTipText(tipText)`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#setToolTipText%28java.lang.String%29)方法（注意**JTextField 扩展 JTextComponent 扩展 JComponent**）。

```
String toolTip = "Welcome";
myTextField.setToolTipText(toolTip); 
```

查看[javadocs](http://docs.oracle.com/javase/tutorial/uiswing/components/tooltip.html)以获取有关使用**ToolTips**的详细说明。

# ios - 自动调整 iphone4S 和 iphone5 的 UI 元素

> ID：15828383
> 
> 赞同：0
> 
> 时间：2013-04-05T07:39:25.483
> 
> 标签：ios, iphone-5, autoresize, iphone-4

在长时间搜索如何在 iphone4S 和 iphone5 上正确显示 UI 元素之后。我现在很困惑在 Xib 中显示 UI 元素的最佳方式是什么。我应该在尺寸检查器中使用自动调整大小功能还是应该使用自动布局？如果我使用自动调整大小，图像会失真。此外，我还看到人们在做以下事情

```
NSString *filename = @"image.png";
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    if (screenRect.size.height == 568.0f)
        filename = [filename stringByReplacingOccurrencesOfString:@".png" withString:@"-568h.png"];

    self.imageView.image = [UIImage imageNamed:filename]; 
```

有人可以帮助我解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:45:33.907

我认为您的方法是正确的，但是这段代码将是更简洁的方式。

```
NSString *filename;
CGRect screenBounds = [[UIScreen mainScreen] bounds];
    if (screenBounds.size.height == 568) {
        filename = @"image.png";
        self.imageView.frame = CGRectMake(0,0,400,300);
    } else {
        self.imageView.frame = CGRectMake(0,0,300,300);
    }
self.imageView.image = [UIImage imageNamed:filename]; 
```

而且，如果您想根据 iPhone 更改 imageview 的大小，也可以使用此代码。

# c# - 如何模拟静态引用的程序集？

> ID：15828384
> 
> 赞同：3
> 
> 时间：2013-04-05T07:39:27.350
> 
> 标签：c#, mocking, .net-assembly

在 C# 中，我有一个**application.exe**，它使用**library.dll**（编译时参考）。现在**library.dll**是用来和一些硬件通信的，速度很慢。是否可以在 Visual Studio 中创建另一个项目，该项目也将创建**library.dll**，但这将是一个模拟。我希望能够简单地替换 dll 文件，而无需重新编译 exe 或替换 Visual Studio 中的引用。我知道我可以在运行时加载 dll，但是否可以替换静态引用的 dll 而不会导致：

```
FileLoadException: The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

（我不使用强名称）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:52:01.217

它将是皮塔饼，试图模仿 dll 只是为了模拟目的。

我建议你在你的代码中加入特性，一个标志来指示代码是否应该以模拟模式运行，它根本不会调用/调用 dll/引用。

# jquery - 未捕获的 TypeError：更改 jQuery 加载方法时对象不是函数

> ID：15828387
> 
> 赞同：2
> 
> 时间：2013-04-05T07:39:44.183
> 
> 标签：jquery

这与此处相关：[在 $(window).load() 函数内运行 jQuery 但不在 $(document).ready 函数内运行](https://stackoverflow.com/questions/15826498/running-jquery-inside-window-load-function-but-not-inside-document-ready)

在我使用之前：

```
jQuery( document ).ready( function( $ ) { 
```

加载我的 jQuery UI 位置代码，但我决定尝试使用以下方法加载：

```
jQuery(window).load(function($) { 
```

现在我得到一个错误：

```
Uncaught TypeError: object is not a function 
```

这是我更改前的代码：

```
<script type='text/javascript'>
jQuery( document ).ready( function( $ ) {
var element_selector='.test';
if ( $(element_selector).length !== 0) {

var divname515e62e8355b0 = '#test_selector';
$(divname515e62e8355b0).children().wrapAll('<div class="mydoc cf">');

//jQuery UI Position code here

}

 });
</script> 
```

这是我更改后的代码：

```
<script type='text/javascript'>
jQuery(window).load(function($) {
var element_selector='.test';
if ( $(element_selector).length !== 0) {

var divname515e62e8355b0 = '#test_selector';
$(divname515e62e8355b0).children().wrapAll('<div class="mydoc cf">');

//jQuery UI Position code here

}

 });
</script> 
```

但我收到一个错误：

```
Uncaught TypeError: object is not a function 
```

这是问题行：

```
$(divname515e62e8355b0).children().wrapAll('<div class="mydoc cf">'); 
```

我检查了逗号，分号，似乎很好。可能是什么问题呢？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:47:02.340

那是因为在您的第二个代码中，`$`是一个事件对象，`.load()`它的行为不像`.ready()`方法，如果您想避免冲突，请使用自调用函数：

```
(function($) {
    $(window).load(function(event) {
        // ...
    });
})(jQuery); 
```

# jquery - jQuery 有没有办法在继续之前等待对象加载？

> ID：15828395
> 
> 赞同：4
> 
> 时间：2013-04-05T07:40:06.783
> 
> 标签：jquery

我有一个关于 cookie 的问题。我有一组按钮，它们显示与按下的按钮相关的特定表格。我设置了它来分配 cookie 值，并且我试图让它记住上次查看的内容，这样用户就不必在每次关闭页面时都重新选择所有内容。

```
if($.cookie('lastviewed') == "value") {
   $('#Button1').trigger('click');
   $('#Button2').trigger('click');
} 
```

按钮 1 在按钮 2 中加载，因此上述方法不起作用，因为它试图触发尚不存在的东西。

有没有办法让它在继续之前等待它加载？

编辑：我已经在使用 document.ready。单击按钮 1 将按钮 2 加载到页面上，我需要它等待它在按钮 2 中完成加载，然后再尝试单击它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:41:09.027

您需要使用[document.ready](http://api.jquery.com/ready/)来确保 html 元素在被 javascript/jQuery 访问之前可用。

```
$(document).ready(function(){
  if($.cookie('lastviewed') == "#value") {
     $('#Button1').trigger('click');
     $('#Button2').trigger('click');
  }    
}); 
```

> 虽然 JavaScript 在页面呈现时提供了用于执行代码的加载事件，但在完全接收到所有资产（例如图像）之前，不会触发此事件。在大多数情况下，只要完全构建了 DOM 层次结构，就可以运行脚本。传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。[参考](http://api.jquery.com/ready/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:50:36.947

你可能也想试试这个：

```
$(document).ready(function () {
    if ($.cookie('lastviewed') == "value") {
        setTimeout(function () {
            $('#Button1').trigger('click');
            $('#Button2').trigger('click');
        }, 100);
    }
}); 
```

延迟 100 毫秒后，这将在调用所有 $(document).ready() 处理程序后引发 click 事件。

# ruby-on-rails - 参数数量错误（1..3 为 4）

> ID：15828403
> 
> 赞同：0
> 
> 时间：2013-04-05T07:40:25.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我很难理解为什么使用destroy方法会发生这种情况，因为控制器和路由上的一切都很好！

如果有人通过这种方式请给我一个提示？

**路线**

```
 resources :users, :as => "" do
    resources  :sections, :only => [:new, :create, :destroy, :index] 
  end 
```

**控制器**

```
def destroy
    @section = Section.find(params[:id])
    @section.destroy
    redirect_to sections_url
    flash[:notice] = "Section deleted" 
  end 
```

**看法**

```
<%= render :partial => "section", :collection => @sections %> 
```

**部分的**

```
<%= link_to  section.name, section_path(current_user, section) %> 
<%= button_to 'Remove', current_user, section, :data => { :confirm => 'Confirm?' }, :class=> "buttom",  method: :delete %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:45:02.510

该错误意味着某些函数需要 1 到 3 个参数，但您给了它 4 个参数。

请查看错误中的行号并查找函数，然后打开文档并查找如何使用该函数。通常，函数作为实例方法和类方法的工作方式不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:48:13.870

问题似乎是这个方法调用：

```
button_to 'Remove', current_user, section, :data => { :confirm => 'Confirm?' }, :class=> "buttom",  method: :delete 
```

对`current_user`和`section`必须作为数组传递：

```
button_to 'Remove', [current_user, section], confirm: 'Confirm?', class: "buttom",  method: :delete 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:48:49.230

您的`button_to`辅助参数是错误的。

试试这个：

```
 <%= button_to 'Remove', {:action => :destroy, :user => current_user, :id => section}, {:data => { :confirm => 'Confirm?' }, :class=> "buttom",  method: :delete} %> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:02:15.950

**codeit**，**Stefan**做了你们所说的但没有奏效，所以我尝试了这条路并成功了！

```
<%= button_to 'Remove', section_path(current_user, section), :data => { :confirm => 'Confirm?' }, :class=> "button",  method: :delete %> 
```

# java - Java比较字符串

> ID：15828404
> 
> 赞同：0
> 
> 时间：2013-04-05T07:40:36.407
> 
> 标签：java, string, list

我有一个小问题。我必须对具有相同大小的字符串列表和要比较的字符串进行比较。这意味着我想将字符串与第一个列表进行比较以获取列表中比较字符串的索引，然后从该索引上的另一个列表中获取另一个字符串。

```
private String getStringOnIndex(List<String> list1, List<String> list2,String elem) 
{
                String elem2;

        for (int i = 0; i<list1.size();i++) {

            if(list1.get(i).equals(elem)){
                elem2 = list2.get(i);
                return elem2;

            } else {
                return "nope";
            }
        }

} 
```

像这样比较两个字符串是错误的。或者我应该使用运算符 ==。我知道字符串列表的样式并不好，但它只是一个临时解决方案。谢谢任何帮助:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T07:43:53.840

要回答您关于“字符串比较”的具体问题，您所做的是正确的。字符串内容比较应该使用`equals()`. 使用运算符`==`仅检查引用的相等性，而不是内容。

对于你现在正在做的工作，它看起来像是一个键值查找。您可以考虑进行一些重新设计，而不是存储 2 个列表，而是创建一个`Map<String, String>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:42:42.193

`==`**Java**中的运算符比较**对象引用**，以比较您应该使用的字符串`equals()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:44:05.107

```
if (list1.get(i).matches(elem)).... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T07:50:28.570

总是使用`equals`方法来比较两个字符串。如果您要比较参考，请使用`==`运算符。这里的讨论很有用[How do I compare strings in Java?](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T07:46:00.393

使用 equals() 方法比较对象的值，其中 == 运算符将比较对象引用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T07:51:02.963

`==`仅当 String 变量不是实例化`new`关键字时，运算符才能正常工作。认为：

```
String s1 = "abc";
String s2 = "abc"; 
```

然后`s1==s2`效果很好。

如果：

```
String s1 = new String("abc");
String s2 = new String("abc"); 
```

然后你必须使用`equals`方法来比较这些值。

最后，最好使用`equals`方法来比较字符串值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-05T08:04:13.010

问题不等于（这是正确的方法），您必须删除 else 表达式，如果不是，您将始终在第一次迭代时停止，解决方案：

```
private String getStringOnIndex(List<String> list1, List<String> list2,String elem) 
{
    String elem2;

    for (int i = 0; i<list1.size();i++) {
        if(list1.get(i).equals(elem)){
            elem2 = list2.get(i);
            return elem2;
        }
    }
    return "nope";

} 
```

# iphone - 媒体查询不适用于移动应用程序的 iframe

> ID：15828405
> 
> 赞同：10
> 
> 时间：2013-04-05T07:40:42.307
> 
> 标签：iphone, iframe, media-queries, mobile-application

在我的移动应用程序的 iframe 中加载网站时出现奇怪的问题。我有一个有七页的网站。当我在 iphone 的 safari 中浏览我的网站网址时。所有页面中的内容都呈现完美。但是如果我将**网站加载到我的移动应用程序内的**iframe 中，android 会在移动应用程序的iframe 内**正确呈现网站**。但是**在 iphone 中，其中三个页面的内容溢出了**，我看不到整页。下面列出了我的媒体查询。顺便说一句，我正在为我的网站使用引导框架。

```
 @media (min-width: 768px) and (max-width: 979px) {
      // css goes here
    }
    @media (min-width: 768px)
    {
     // css goes here        
    }
    @media (max-width: 767px) {
     // css  goes here              
    }
    @media (min-width: 1200px) {
        // css goes here              
    }
    @media (min-width: 768px) and (max-width: 979px) {
       // css goes here              
    }
    @media (max-width: 767px) {
       // css goes here 
    }
    @media (max-width: 480px) {
       // css goes here
    }
    @media (max-width: 320px)
    {
      // css goes here
    }
    @media (max-width: 240px)
    {
     // css goes here
    }
   @media (max-width: 979px) {
    // css goes here
    }
    @media (min-width: 980px) {
    // css goes here
    } 
```

是否还有其他针对 iphone 移动应用程序内部 iframe 的媒体查询。我是这个响应式媒体查询的新手。请帮忙。由于我将在两天内满足客户的最后期限，因此我必须解决此问题。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T18:35:36.037

有时浏览器不会呈现媒体查询功能。尝试将此添加到您的头部。可能你会得到一些运气。

```
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=no; target-densityDpi=device-dpi" /> 
```

# c++ - C 和 C++ 语言的 turboc++ 和 DevC++ 中的标识符长度？

> ID：15828411
> 
> 赞同：-5
> 
> 时间：2013-04-05T07:40:56.397
> 
> 标签：c++, c, compiler-construction, standards, identifier

我想知道 Turbo C++ 和 Dev-C++ 中 C 和 C++ 的变量标识符的长度是多少。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T07:55:33.660

如果您的意思是可变长度，那么它会因编译器而异

```
Microsoft C++: 2048 characters
Intel C++: 2048 characters
g++: No limit 
```

但请记住，C++ 标准的附件 B 表示实现应支持至少 1024 个字符长的标识符，但这不是强制性的。
**编辑：** DEV c++ 使用 GCC 的 MinGW 或 TDM-GCC 64 位端口作为其编译器。Dev-C++ 也可以与 Cygwin 或任何其他基于 GCC 的编译器结合使用。
和
Turbo C++ 本身是最初来自 Borland 的 C++ 编译器和集成开发环境和计算机语言，但最近它由 Embarcadero Technologies 分发，该技术在 2008 年收购了其 CodeGear 部门，获得了 Borland 的所有编译器工具（参考：wiki）
请[也看到这个](https://stackoverflow.com/questions/7392726/is-there-a-limit-to-the-length-of-identifier-names-in-c)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:58:56.347

C 标准，第 5.2.4.1 节说：

1) 内部标识符或宏名称中的 63 个有效初始字符（每个通用字符名称或扩展源字符都被视为单个字符）

2) 外部标识符中的 31 个有效初始字符（每个指定短标识符为 0000FFFF 或更少的通用字符名称被视为 6 个字符，每个指定短标识符为 00010000 或更大的通用字符名称被视为 10 个字符，每个扩展源字符被认为与相应的通用字符名称相同的字符数（如果有）

也看看[http://c0x.coding-guidelines.com/5.2.4.1.html](http://c0x.coding-guidelines.com/5.2.4.1.html)，但这正是标准所说的，正如@freak所提到的，它也可能因编译器而异

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:06:17.050

DevC++ 使用 GCC 的 minGW 端口（用于 C++ 的 g++），因此它具有`Unlimited`标识符长度

TurboC++：使用`iN`TCC 上的开关来获取最大标识符长度。

# c++ - 在 C++ 中预热一些变量

> ID：15828418
> 
> 赞同：0
> 
> 时间：2013-04-05T07:41:06.683
> 
> 标签：c++, data-structures

我有一个适用于某些数值的 C++ 库，这些值在编译时不可用，但在运行时立即可用，并且基于与机器相关的详细信息，简而言之，我需要显示分辨率、CPU 核心数和很快。

我的问题的关键点是：

*   我不能要求用户输入这个值（我的 lib 的编码器/用户和最终用户）
*   我只需要在应用程序启动后进行预热，这是一次只有一次的事情
*   此值稍后由方法和类使用

可能的解决方案是：

*   构建一个数据结构`Data`，声明一些用于`Data dummy`存储`dummy`所有内容的变量的名称，并且构造函数将处理相关值的一次性初始化
*   将第一个解决方案之类的东西包装在一个方法中，`WarmUp()`然后将此方法放在开始之后`main()`（这也是一个简单的记住和使用的东西）

仍未解决的大问题是：

*   用户可以声明多个数据结构，因为`Data`它是一种类型，并且在 C++ 中抛出 2-4-5-17 个相同类型的变量没有限制
*   该`WarmUp()`方法可能对其他类的设计有一点干扰，也可能发生该`WarmUp()`方法用于本地方法而不是`main()`.

当我无法控制库的实际使用时，我基本上需要在运行时强制创建 1 个特定类型的 1 个单个实例，或者至少我需要以一种用户会立即理解的方式来设计它错误是继续保持图书馆的使用尽可能直观和简单。

你能看到解决方案吗？

* * *

**编辑：**

由于我也在尝试获得多线程兼容的数据结构，因此我的问题也更加困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:48:05.103

如何使用懒惰创建单例？例如

```
struct Data
{
  static Data & instance()
  {
    static Data data_;
    return data_;
  }
private:
  Data()
  {
    //init
  }
} 
```

`Data`将在首次使用时初始化，当您调用时`Data::instance()`

**编辑：**至于多线程，请阅读[C++ 中的高效线程安全单例](https://stackoverflow.com/questions/2576022/efficient-thread-safe-singleton-in-c)

**Edit2** 使用 boost::call_once[实现](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=7&ved=0CGgQFjAG&url=http://jira.firebreath.org/secure/attachment/10201/singleton.h&ei=m4heUerjCMSo4gTVg4HoAQ&usg=AFQjCNHYxqxzcOxXTHsdKyr0THVEsj1_3g&sig2=cLaf9n33R7x5ySjeNURvcw&bvm=bv.44770516,d.bGE&cad=rja)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:49:34.160

预热通常与性能问题有关（让我想到处理器缓存，请参阅 GCC 的[__builtin_prefetch](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)）。

也许你想做一个[单例类](http://en.wikipedia.org/wiki/Singleton_pattern)，有很多解决方案（例如[这个 C++ 单例教程](http://www.yolinux.com/TUTORIALS/C++Singleton.html)）。

此外，如果性能是主要问题，您可以考虑在初始化（甚至在安装）时给出配置的参数。然后，您可以专门化您的代码，也许就像拥有模板并首先通过发出（在运行时 = 初始化时）适当的 C++ 存根源代码并编译它（在“运行时”，例如在初始化时）并[动态加载](http://en.wikipedia.org/wiki/Dlopen)它（使用插件和`dlopen`...）。另请参阅[此答案](https://stackoverflow.com/a/12322672/841108)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T10:34:04.833

首先，正如其他人所说，对此的明显（也是最好的）答案是单例。但是，由于您添加了多线程要求：有两种解决方案，具体取决于对象是否将通过使用单例的代码进行修改。（根据您的描述，我认为没有。）如果不是，那么使用单例的“幼稚”实现就足够了，并确保在启动线程*之前*初始化单例。如果在您进入 main 之前没有启动线程（否则我认为这是不好的做法），那么类似以下的内容在很大程度上就足够了：

```
class Singleton
{
    static Singleton const* ourInstance;
    Singleton();

    Singleton( Singleton const& );
    Singleton& operator=( Singleton const& );

public:
    static Singleton const& instance();
}; 
```

并在实施中：

```
Singleton const* Singleton::ourInstance = &Singleton::instance();

Singleton const&
Singleton::instance()
{
    if ( ourInstance == NULL ) {
        ourInstance = new Singleton;
    }
    return *ourInstance;
} 
```

不需要锁定，因为一旦线程启动，没有线程将修改任何内容。

如果单例是可变的，那么您必须保护对它的所有访问。你可以做类似上面的事情（ `const`显然没有 ），并将锁定留给客户端，但在这种情况下，我更喜欢锁定`instance`函数，并返回一个`std::shared_ptr`带有释放锁的删除器，这是获取的在`instance`函数中。我认为像下面这样的东西可以工作（但我从来没有真正需要它，所以没有尝试过）：

```
class Singleton
{
    static Singleton* ourInstance;
    static std::mutex ourMutex;

    class LockForPointer
    {
    public:
        operator()( Singleton* )
        {
            Singleton::ourMutex.unlock();
        }
    };
    class LockForInstance
    {
        bool myOwnershipIsTransfered;
    public:
        LockForInstance
            : myOwnershipIsTransfered( false )
        {
            Singleton::ourMutex.lock();
        }
        ~LockForInstance()
        {
            if ( !myOwnershipIsTransfered ) {
                Singleton::ourMutex.unlock();
            }
        }
        LockForPointer transferOwnership()
        {
            myOwnershipIsTransfered = true;
            return LockForPointer();
        }
    };
public:
    static std::shared_ptr<Singleton> instance();
}; 
```

和实施：

```
static Singleton* ourInstance = NULL;
static std::mutex ourMutex;

std::shared_ptr<Singleton>
Singleton::instance()
{
    LockForInstance lock;
    if ( ourInstance == NULL ) {
        ourInstance = new Singleton;
    }
    return std::shared_ptr<Singleton>( ourInstance, lock.transferOwnership() );
} 
```

这样，相同的锁用于检查 null 和访问数据。

# c# - 垫片自定义词典

> ID：15828423
> 
> 赞同：1
> 
> 时间：2013-04-05T07:41:24.063
> 
> 标签：c#, microsoft-fakes

我创建了一个类，它是字典类的扩展，如下所示：

```
public class PKMRelations : Dictionary<Guid, PKMRelation>, IDisposable 
```

我现在想填充 PKMRelations 的 Count 方法，以便它返回我想要的值。通常我只会添加一些元素，但由于当前配置，这是不可能的。

目前我无法弄清楚如何填充字典的 Count 方法。为了能够做到这一点，我必须为这个特定的通用字典类创建一个 Shim。

这完全有可能吗，如果可以，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:49:15.703

Count 不是 Dictionary 中的虚拟方法，因此您不能覆盖它！但是，您可以使用 new 关键字吗？因此，您可以添加以下属性

```
new int Count 
{
 get
 {
    //Your intercept code here
    return base.Count;
 }
} 
```

# java - 正则表达式检查具有 2 个或更多空格的字符串

> ID：15828425
> 
> 赞同：0
> 
> 时间：2013-04-05T07:41:28.657
> 
> 标签：java, regex

我试图编写一个正则表达式来验证以下字符串， **早上好 <3 个空格**

我尝试的正则表达式是**\s{2,}。**但是正则表达式匹配失败

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:45:19.137

字符串必须完全匹配

```
"Good   morning".matches(".*\\s{2}.*"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:45:29.780

“\早上好\Z”怎么样？

这似乎太明显了，但它确实有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T07:44:23.917

```
".*\s\s.*" 
```

*   任何字符序列（可能为空）
*   空间
*   空间
*   任何字符序列（可能为空）

# cuda - CUDA，在共享内存中存储数据时性能低下

> ID：15828426
> 
> 赞同：0
> 
> 时间：2013-04-05T07:41:29.377
> 
> 标签：cuda, shared-memory

这是我的问题，为了加快我的项目，我想将内核内部生成的值保存到共享内存中，但是，我发现保存该值需要很长时间。如果我删除**“THIS LINE”**（参见下面的代码），即删除**“THIS LINE”**，保存该值非常快（加速 100 倍！）。

```
extern __shared__ int sh_try[];

__global__ void xxxKernel (...)
{
  float v, e0, e1;
  float t;
  int count(0);
  for (...)
  {
     v = fetchTexture();
     e0 = fetchTexture();
     e1 = fetchTexture();
     t = someDeviceFunction(v, e0, e1);
     if (t>0.0 && t < 1.0)  <========== <THIS LINE>
       count++;
  }
  sh_try[threadIdx.x] = count;
}

main()
{
  sth..
  START TIMING:

  xxxKernel<<<gridDim.x, BlockDim.x, BlockDim.x*sizeof(int)>>> (...);

  cudaDeviceSynchronize();

  END TIMING.
  sth...
} 
```

为了解决这个问题，我简化了只将数据保存到共享内存中的代码。并停下来。据我所知，共享内存。是最有效的内存。除了注册，我想知道这种高延迟是正常的还是我做错了什么。请给我一些建议！！！先谢谢各位了！！！

特鲁迪

**更新：** 如果我用全局内存替换共享内存，它几乎需要相同的时间，没有**“这条线”**需要 33 毫秒，需要 297 毫秒。将数据保存到全局内存是正常的吗？与共享内存占用相同的时间。？这也是“编译器优化”的一部分吗？

我还检查了stackoverflow上的其他类似问题，即是否将数据保存到共享内存之间存在巨大的时间间隔，这可能是由编译器优化引起的，因为它对计算数据没有意义但不保存它们，所以编译器只是“删除”了那些毫无意义的代码。

我不确定我是否有同样的原因，因为这条线改变了游戏是一个假设 - **“这条线”**，当我评论它时，变量“计数”在每次迭代中都会增加，当我取消评论时，它会增加t 是有意义的。

有任何想法吗？请...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-16T13:57:02.457

通常，当由于相对较小的代码更改（例如在内核中添加或删除一行代码）导致较大的性能变化时，性能变化并不是由于该行代码的实际性能影响，而是由于由于编译器做出不同的优化决策，这可能导致内核中机器代码的大量添加或删除。

帮助确认这一点的相对简单的方法是查看生成的机器代码。例如，如果生成的机器代码的大小由于添加或删除单行源代码而发生显着变化，则可能是编译器做出了严重影响代码的优化决策。

尽管它不是机器代码，但出于这些目的，一个合理的代理是查看生成的 PTX 代码，这是编译器创建的中间代码。

`-ptx`您可以通过简单地将开关添加到您的编译命令来生成 ptx ：

```
nvcc -ptx mycode.cu 
```

这将生成一个名为`mycode.ptx`您可以检查的文件。当然，如果您的常规编译命令需要额外的开关（例如 -I/path/to/include/files），那么此命令可能需要这些相同的开关。该`nvcc` [手册](http://docs.nvidia.com/cuda/cuda-compiler-driver-nvcc/index.html)提供了更多关于代码生成选项的信息，并且有一个 PTX[手册](http://docs.nvidia.com/cuda/parallel-thread-execution/index.html)可以帮助您了解 PTX，但是您可能仅根据生成的 PTX 的大小（例如`.ptx`文件中的行数）。

# asp.net-mvc - 能够在不影响数据库的情况下保存（多个）更改 - 结构问题

> ID：15828427
> 
> 赞同：1
> 
> 时间：2013-04-05T07:41:29.957
> 
> 标签：asp.net-mvc, database, data-structures, visual-studio-lightswitch

我正在开发一个业务 Web 应用程序，它将维护一个包含多个表的数据库。要求之一是应该能够“保存您的工作”而不影响数据库，然后再将其拾取并继续工作。必须支持多个“储蓄”。

这个管理工具将在 ASP.NET MVC4 或微软的 LightSwitch 中开发，我还没有决定。

我的问题是我不知道如何在结构上解决这个问题，有没有任何已知的技术可以解决这个问题？我需要有人帮助我指出正确的方向，我被困在这里..

**编辑：**我将尝试用一个场景进一步解释

1.  我对一行进行了更改并保存，但更改应该只对我可见（不影响主数据库）。

2.  我意识到 1\. 中的更改很糟糕，并选择从更改同一行中的数据重新开始，我也对另一行进行了更改。我保存了这些更改（但仅限于我）

3.  现在我有两个储蓄（从第 1 步和第 2 步开始），我改变主意并且在 1\. 中所做的更改是正确的，我打开那个“保存文件”并将更改提交到主数据库。然后，我将从第 2 步中删除“保存文件”。

希望这能让情况更清楚。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:13:15.780

我能想到的最简单的方法是让数据库为您完成工作。

你可以：

1.  只需将某种类型的“状态”列（“已提交”、“未提交”等）添加到表中，并过滤掉任何显示“真实”数据的网格中的任何“未提交”记录。然后，您还可以在编辑网格中过滤另一种方式，仅显示“未提交”记录，或者如果您只想查看自己的记录，则可以保存 ID 而不是状态。
2.  添加另一个表来保存未提交的记录，而不是用额外的列“污染”实际表。

那有意义吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:26:22.393

如果你真的要构建一个事务类型的版本控制系统，那么你有一个巨大的工作要做。

查看一些流行的工具，如 SVN，了解它们支持的复杂程度和功能。

回滚数据库内的部分事务——尤其是具有约束和触发器的事务将非常困难。几乎所有事情都会在某个地方遇到问题。

您还可以考虑将未提交的事务存储在数据库之外——比如在一些本地 XML 结构中——然后在需要时只提交一次组件。

无论哪种方式，用于查找所有记录并确定要处理哪些记录的界面都将是一个挑战——不管原始应用程序。

# c++ - 感兴趣区域的唯一性和身份

> ID：15828441
> 
> 赞同：4
> 
> 时间：2013-04-05T07:42:31.210
> 
> 标签：c++, opencv

我目前正在使用 OpenCV 开发计算机视觉应用程序。该应用涉及目标识别和特征确定。一般来说，我会让一个目标穿过可见区域，然后在几秒钟内慢慢地穿过它。这应该让我能够从相机中找到超过 50-60 帧的目标。

我们已经使用 SWT 和 OCR 成功实现了检测算法（目标都有字母数字标识符，这使得它们相对容易被挑选出来）。我想要做的是尽可能多地使用来自每个目标的所有 50-60 次射击的数据。为此，我需要某种方法来识别图像 2 的特定 ROI 包含与图像 1 中的另一个 ROI 相同的目标。

我想从以前可能遇到过这个问题的任何人那里得到一点建议。如何在合理的误差范围内轻松/快速地识别 ROI #2 与 ROI#1 具有相同的目标？我的第一直觉是这样的：

1.  检测第一帧中的目标。
2.  计算第 1 帧中每个目标的某些独特特征。保存。
3.  获取第 2 帧。
4.  立即寻找与第 2 步中计算的 ROI 具有相同特征的 ROI。抓住这些并将它们发送到生产线上进行进一步处理，跳过第 5 步。
5.  在第 2 帧中检测新目标。
6.  将目标传递给线程以计算形状、颜色、GPS 坐标等。
7.  起泡，冲洗，重复。

我认为 SURF 或 SIFT 功能可能是实现此目的的一种方式，但我担心由于失真或颜色褪色，它们可能无法在帧与帧之间识别相同的目标。我不知道如何设置 SIFT/SURF 特征的阈值。

提前感谢您对此事的任何启发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:49:24.690

您可以做的一件事是局部均衡亮度和可能的饱和度。如果您没有使用 YCrCb 或 HSV 等高级空间，我建议您尝试一下。

你能假设物体没有移动得太快吗？如果您在检测例程中输入先前的位置，您可以减小您正在查看的窗口的大小。速度和运动方向也是如此。

我已经成功地使用了区域的直方图组合和形状描述符来可靠地检测它，您可以使用它或将其添加到 SURF/SIFT 分类器中。

# c# - 如何镜像 Matrix3D？

> ID：15828446
> 
> 赞同：0
> 
> 时间：2013-04-05T07:42:45.303
> 
> 标签：c#, matrix, 3d

我想镜像我的画。

我认为我需要为此镜像我的 Matrix3D……但我不知道如何做到这一点。

我试过这样：

```
 var transformation = sceneCamera.TransformationMatrix;
  var invertedTransformation = transformation;
  invertedTransformation.Invert();

  var trans = Transform3D.Identity.Value * transformation * invertedTransformation; 
```

但这不起作用。

正如您在图像中看到的，必须镜像报告中的绘图。

**提前致谢！**

![在此处输入图像描述](https://i.stack.imgur.com/2Oc7k.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:12:25.553

要“镜像”模型，您可以镜像相机变换或镜像对象变换。在相机中镜像会产生镜像图片的效果。镜像模型将镜像世界中的对象，无论您从何处查看它。

要在 x 方向上镜像相机，请将相机变换乘以具有 -1 x 分量和 1 用于其他缩放的矩阵。您可能必须偏移相机，因为镜像可能已将对象移出视野，具体取决于相机变换的设置方式。

```
var cameraTrans = sceneCamera.TransformationMatrix;
cameraTrans.Scale(new Vector3D(-1, 1, 1)); 
```

# asp.net - 查找列中不同值的计数

> ID：15828455
> 
> 赞同：2
> 
> 时间：2013-04-05T07:43:18.927
> 
> 标签：asp.net, sql, sql-server-2012

大家好，我正在尝试构建一个 sql 查询以在仪表板上显示一些信息。

我有一个表来存储我的销售数据。我的查询需要查找过去 7 天的总销售额，平均并根据区域（存在于用户表中）对其进行分组。我创建了一个临时表来获取项目sales.DashBoard_Items 表包含需要在仪表板上显示的特定项目。现在我的问题是我需要获取每个地区的商店数量以找到平均销售额。有人可以帮忙吗

```
Declare @TableTest 
table(itemid int,itemname varchar(100),itemdescription varchar(100),id int,itemidd int,userid int,orderdate varchar(40),qty int)

insert into @TableTest 
select * from DashBoard_Items join
 SalesQTY on SalesQTY.OrderDate>=  CONVERT(varchar(10) , DATEADD(DAY,-7,GETDATE()),126) 
 and OOS_DashBoard_CoreItems.itemid=SalesQTY.itemid

select distinct t.userid,u.region from @TableTest t join users u on t.userid=u.userid and region is not null 
```

以上选择查询返回

![在此处输入图像描述](https://i.stack.imgur.com/GF2s9.jpg)

如何从上述选择查询中获取区域计数

```
 region             count
 5 - SUN WEST            2
 2 - LONG ISLAND         3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:44:45.887

您需要分组`region`，然后使用`cont(*)`

```
SELECT region, count(*) 
FROM @TableTest
GROUP BY region; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:45:59.973

请试试：

```
SELECT 
    Region, 
    COUNT(*) AS [Count]
FROM YourTable 
GROUP BY Region 
```

或者

```
SELECT 
    DISTINCT Region, 
    COUNT(*) OVER (PARTITION BY Region)  AS [Count]
FROM YourTable 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T07:46:05.053

```
SELECT u.region, COUNT(*)
FROM @TableTest t JOIN users u ON t.userid=u.userid AND u.region IS NOT NULL
GROUP BY u.region 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T07:48:11.877

尝试

```
SELECT region, count( * )
FROM mytable
GROUP BY region 
```

# java - 在 Java 中，为什么我的字节数组的元素包含 2 个字节？

> ID：15828460
> 
> 赞同：1
> 
> 时间：2013-04-05T07:43:51.370
> 
> 标签：java, android

我正在编写一个基于 Java 的小型 Android 应用程序，该应用程序从蓝牙芯片接收基于 ac 的 unsigned char[] 字节数组并将其流式传输到字节数组中。

它是Android和蓝牙这一事实并不重要，它只是背景。但是，如果这有所作为，我将使用最低 API 8。

主要代码是：

```
InputStream is = socket.getInputStream();
DataInputStream dis = new DataInputStream(is);
byte[] buffer = new byte[1024];
bytesRead = dis.read(buffer, 0, 1024); 
```

但是，当我查看缓冲区的实际内容时，我会看到：

```
[0] 15 [0xf] [^O]   
[1] 15 [0xf] [^O]   
[2] 0 [0x0] [^@ (NUL)]  
[3] -119 [137] [0x89] [^É]  
[4] 2 [0x2] [^B]    
[5] 6 [0x6] [^F]    
[6] 26 [0x1a] [^Z]  
[7] -47 [209] [0xd1] [Ñ]    
[8] -1 [255] [0xff] [ÿ] 
[9] 104 [0x68] [h]  
[10]    -1 [255] [0xff] [ÿ] 
[11]    -46 [210] [0xd2] [Ò]    
[12]    -1 [255] [0xff] [ÿ] 
[13]    104 [0x68] [h]  
[14]    -19 [237] [0xed] [í]    
[15]    -128 [128] [0x80] [^À] 
```

以上是设置为显示的 eclipse Expression 视图的副本

1.  元素 [＃]
2.  有符号整数值
3.  如果为负，则为无符号整数值 [除非#2 为负，否则此值不会出现]
4.  十六进制值
5.  ASCII 值

我的问题是，如果这是一个字节数组，为什么某些十六进制值包含 2 个字节。查看元素 6 到 14，它们中的每一个都是 0x1a、0x12、0xff 等形式。字节 0 到 5 都是一个字节（除了元素 3）。

我认为这不是蓝牙方面的问题，因为我看到正在制作的实际代码，它是一个无符号字符 [] 数组，每个元素只有一个字节。另外，我记得在之前的一个涉及从在线 API 获取数据流的小项目中看到过类似的东西。

如何确保 Java 数组元素仅包含 1 个字节？就此而言，我觉得我不了解 Java 的一些重要内容，因为这让我感到困惑——Java 如何允许一个字节数组每个元素包含一个以上的字节？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:49:09.170

你混淆了字节和十六进制数字。

一个字节包含 8 位。十六进制数字从 0 到 F，因此只有 4 位（16 个值，16 = 2^4，因此 4 位）。因此，单个字节使用两个十六进制数字表示。

`0xf`相当于`0x0f`。前 4 位全为 0，后 4 位全为 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:51:39.007

一个字节是 8 位，因此可以容纳 0 - (2^8 - 1) 即 0-255 (0x0 - 0xff)。你所有的值都是一个字节。

# c# - 将 XML 数据批量插入 SQL Server 数据库

> ID：15828461
> 
> 赞同：0
> 
> 时间：2013-04-05T07:43:52.497
> 
> 标签：c#, sql-server, xml, restore

我正在从 SQL Server 备份和恢复选择性数据。我正在使用以下解决方案：

[将多个表从 mssql 导出到 xml](https://stackoverflow.com/questions/15802812/export-multiple-tables-from-sql-server-to-xml-for-restore)

并使用我想要的数据创建一个 xml。我现在如何创建一个函数来将这些数据恢复到 SQL Server 数据库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:48:11.397

使用[`SqlBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)，您可以将数据加载到数据表中，然后使用 SqlBulkCopy 可以将其插入表中。

[**SqlBulkCopy**](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)

> 让您可以使用来自其他源的数据有效地批量加载 SQL Server 表。

和

> SqlBulkCopy 类可用于仅将数据写入 SQL Server 表。但是，数据源不限于 SQL Server；可以使用任何数据源，只要数据可以加载到 DataTable 实例或使用 IDataReader 实例读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:49:43.943

实现此目的的最简单方法是使用集成服务和 CSV 文件。Xml 过于冗长并增加了所需的数据量。

# map - 获取 OpenLayers 边界框内的标记

> ID：15828465
> 
> 赞同：1
> 
> 时间：2013-04-05T07:44:12.353
> 
> 标签：map, openlayers

我使用 OPENLAYERS 3.0 在我的页面上绘制了一张地图。

在 document.ready() 中，我绘制了地图，并使用一些经度和纬度组合在其上绘制了一些标记。

我在地图上添加了画线、多边形和选择功能。

我的想法是在页面加载时在地图上绘制一些标记，我想绘制一个多边形或边界框，然后单击这些选择我应该能够在这些选择中绘制标记，是否可以做这
没有循环，任何人都请给我一个建议来完成这个。

我的 HTML 和 JAVASCRIPT 代码如下

```
var map, layer;
    var drawControls;
    OpenLayers.Feature.Vector.style['default']['strokeWidth'] = '2';
    $('document').ready(function () {

        console.log('in');
        OpenLayers.ProxyHost = "/proxy/?url=";
        map = new OpenLayers.Map('map');
        layer = new OpenLayers.Layer.WMS("OpenLayers WMS", "http://vmap0.tiles.osgeo.org/wms/vmap0", { layers: 'basic' });

        map.addLayer(layer);
        map.setCenter(new OpenLayers.LonLat(0, 0), 0);

        var newl = new OpenLayers.Layer.Text("text", { location: "./content/textfile.txt" });
        map.addLayer(newl);

        var markers = new OpenLayers.Layer.Markers("Markers");
        map.addLayer(markers);

        var size = new OpenLayers.Size(21, 25);
        var offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);
        var icon = new OpenLayers.Icon('http://www.openlayers.org/dev/img/marker.png', size, offset);
        //markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0, 0), icon));

        var halfIcon = icon.clone();
        //markers.addMarker(new OpenLayers.Marker(new OpenLayers.LonLat(0, 45), halfIcon));            
        var Latitudes = '12.98267,13.00118,12.97161,12.97977,12.92828,12.97597';
        var Longitudes = '80.26338,80.2565,80.24343,80.25288,80.23621,80.22121';
        var LatArray = Latitudes.split(',');
        var LonArray = Longitudes.split(',');
        for (var g = 0; g < LatArray.length; g++) {
            marker = new OpenLayers.Marker(new OpenLayers.LonLat(LonArray[g], LatArray[g]), icon.clone());
            //marker.setOpacity(0.2);
            marker.events.register('mousedown', marker, function (evt) { alert(this.icon.url); OpenLayers.Event.stop(evt); });
            markers.addMarker(marker);
        }

        //marker = new OpenLayers.Marker(new OpenLayers.LonLat(90, 10), icon.clone());
        //marker.setOpacity(0.2);
        //marker.events.register('mousedown', marker, function (evt) { alert(this.icon.url); OpenLayers.Event.stop(evt); });
        //markers.addMarker(marker);

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.zoomToMaxExtent();
        halfIcon.setOpacity(0.5);

        var renderer = OpenLayers.Util.getParameters(window.location.href).renderer;
        renderer = (renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;

        var vectors = new OpenLayers.Layer.Vector("Vector Layer",
        {
            renderers: renderer
        });
        vectors.events.on(
        {
            'featureselected': function (feature) {
                $('counter').innerHTML = this.selectedFeatures.length;

                $('myd').innerHTML = 'this.selectedFeatures.length :' + this.selectedFeatures.length + 'this.selectedFeatures[0].geometry.bounds :' + this.selectedFeatures[0].geometry.bounds;

            },
            'featureunselected': function (feature) {
                $('counter').innerHTML = this.selectedFeatures.length;                   
                $('myd').innerHTML = 'UNSEL this.selectedFeatures.length :' + this.selectedFeatures.length + 'this.selectedFeatures[0].geometry.bounds :' + this.selectedFeatures[0].geometry.bounds;

            }
        });

        map.addLayers([layer, vectors]);
        map.addControl(new OpenLayers.Control.LayerSwitcher());

        drawControls =
        {
            point: new OpenLayers.Control.DrawFeature(
                vectors, OpenLayers.Handler.Point
            ),
            line: new OpenLayers.Control.DrawFeature(
                vectors, OpenLayers.Handler.Path
            ),
            polygon: new OpenLayers.Control.DrawFeature(
                vectors, OpenLayers.Handler.Polygon
            ),
            select: new OpenLayers.Control.SelectFeature(
                vectors,
                {
                    clickout: false, toggle: false,
                    multiple: false, hover: false,
                    toggleKey: "ctrlKey", // ctrl key removes from selection
                    multipleKey: "shiftKey", // shift key adds to selection
                    box: true
                }
            ),
            selecthover: new OpenLayers.Control.SelectFeature(
                vectors,
                {
                    multiple: false, hover: true,
                    toggleKey: "ctrlKey", // ctrl key removes from selection
                    multipleKey: "shiftKey" // shift key adds to selection
                }
            )
        };

        for (var key in drawControls) {
            map.addControl(drawControls[key]);
        }

    });
   function init()
   {

    }

    function toggleControl(element) 
    {
        for (key in drawControls) {
            var control = drawControls[key];
            if (element.value == key && element.checked) {
                control.activate();
            }
            else {
                control.deactivate();
            }
        }
    }

    function update() 
    {
        var clickout = document.getElementById("clickout").checked;
        if (clickout != drawControls.select.clickout) 
        {
            drawControls.select.clickout = clickout;
        }
        var box = document.getElementById("box").checked;
        if (box != drawControls.select.box) 
        {
            drawControls.select.box = box;
            if (drawControls.select.active) 
            {
                drawControls.select.deactivate();
                drawControls.select.activate();
            }
        }
   } 
```

```
<div id="content"></div>
<h1 id="title">
    Markers Layer Example</h1>
<div id="tags">
    Marker, event, mousedown, popup, inco</div>
<div id="shortdesc">
    Show markers layer with different markers</div>
<div id="map" class="smallmap">
</div>
<ul id="controlToggle">
    <li>
        <input type="radio" name="type" value="none" id="noneToggle" onclick="toggleControl(this);"
            checked="checked" />
        <label for="noneToggle">
            navigate</label>
    </li>
    <li>
        <input type="radio" name="type" value="point" id="pointToggle" onclick="toggleControl(this);" />
        <label for="pointToggle">
            draw point</label>
    </li>
    <li>
        <input type="radio" name="type" value="line" id="lineToggle" onclick="toggleControl(this);" />
        <label for="lineToggle">
            draw line</label>
    </li>
    <li>
        <input type="radio" name="type" value="polygon" id="polygonToggle" onclick="toggleControl(this);" />
        <label for="polygonToggle">
            draw polygon</label>
    </li>
    <li>
        <input type="radio" name="type" value="selecthover" id="selecthoverToggle" onclick="toggleControl(this);" />
        <label for="selecthoverToggle">
            Select features on hover</label>
    </li>
    <li>
        <input type="radio" name="type" value="select" id="selectToggle" onclick="toggleControl(this);" />
        <label for="selectToggle">
            select feature (<span id="counter">0</span> features selected)</label>
        <ul>
            <li>
                <input id="box" type="checkbox" checked="checked" name="box" onchange="update()" />
                <label for="box">
                    select features in a box</label>
            </li>
            <li>
                <input id="clickout" type="checkbox" name="clickout" onchange="update()" />
                <label for="clickout">
                    click out to unselect features</label>
            </li>
        </ul>
    </li>
</ul>
<div id="myd">
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-21T13:29:47.940

这可能会有所帮助。

我在以下位置找到了完整的详细信息：

```
https://gis.stackexchange.com/questions/115500/how-to-find-markers-in-selected-dragbox-openlayers-3 
```

您还可以在此处查看现场演示：

```
http://jsfiddle.net/GFarkas/fk1mqq25/1/ 
```

# jquery - Jquery mobile - 更新按钮样式

> ID：15828468
> 
> 赞同：0
> 
> 时间：2013-04-05T07:44:14.750
> 
> 标签：jquery, html, jquery-mobile, markup, jquery-mobile-button

如果将项目添加到列表视图，则需要对其调用 refresh() 方法来更新样式并创建添加的任何嵌套列表。例如：

```
$('#mylist').listview('refresh'); 
```

如果我向页面添加按钮并刷新样式，我需要什么代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:00:12.067

这个：

```
$('buttonID').button(); 
```

工作示例：http: [//jsfiddle.net/Gajotres/m4rjZ/](http://jsfiddle.net/Gajotres/m4rjZ/)

还有另一个函数叫做**buttonMarkup()**，它用来改变一些已经设置样式的按钮属性，例如改变按钮图标：

```
$('buttonID').buttonMarkup({ icon: "star" }); 
```

在我的另一篇文章中阅读有关它的更多信息：**[jQuery Mobile：动态添加内容的标记增强](https://stackoverflow.com/a/14550417/1848600)**

**[以及官方文档](http://api.jquerymobile.com/button)**的链接。

# javascript - 使用 iScroll 创建具有 snap 功能的 Picker

> ID：15828471
> 
> 赞同：0
> 
> 时间：2013-04-05T07:44:18.047
> 
> 标签：javascript, html, css, iscroll

我正在尝试创建一个外观和感觉都像典型“选择器”的列表，这意味着它是一个在顶部和底部淡出的普通列表，中间有一个蒙版覆盖。 [例子](http://www.jamosolutions.com/images/ios_picker.jpg)

普通列表的问题是它从顶部的第一个 <li> 元素开始，而它应该在中间，然后向下滚动到它在底部的最后一个元素，而它应该在中间。

为了解决这个问题，我实现了一些**padding**。然而，在向下和向上滚动后，填充不再应用。我认为这与源代码中的***maxScrollY有关。***

有没有人尝试过这样的事情或替代品？

这是代码：

`var myScroll = new iScroll('hour-list-wrapper', { snap: "li", momentum: false, vScrollbar: false } );`

[http://jsfiddle.net/2kBdv/3](http://jsfiddle.net/2kBdv/3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:33:57.957

Mobiscroll 库会让您更轻松，请在此处查看演示[http://demo.mobiscroll.com/select/select](http://demo.mobiscroll.com/select/select)

如果您想为此创建自定义解决方案，您可以在源代码中寻找一些灵感。

# dynamics-crm-2011 - Crm 2011 插件不会在消息“RemoveMember”上触发

> ID：15828473
> 
> 赞同：0
> 
> 时间：2013-04-05T07:44:27.343
> 
> 标签：dynamics-crm-2011, dynamics-crm

我为 CRM 2011 构建了一个自定义插件。基本上，相同的插件已部署在两个不同的环境中：测试和专业。这些环境显然是双胞胎。相同的实体，相同的配置等。

该插件在更新特定布尔字段时触发。在真实值上，触发并将联系人添加到列表中。因此，使用相同的逻辑，在设置为 false 的相同字段上，触发并从列表中删除联系人。现在，在“测试环境”上，它会在两种情况下触发。但是在“专业环境”上，当布尔字段设置为 false 时，它​​不会触发！

我放弃任何关于逻辑错误实现的假设。因为它在第一个环境中运行良好。上面，在这种情况下它不写任何日志。这让我更加确信它根本不会触发。

有谁知道，可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:53:11.800

首先，绝对确定你的理论是正确的。在插件顶部抛出异常，看看是否在 CRM 中同时出现 True/False 异常弹出窗口。如果你这样做了，那么插件*会*在 True/False 更新时触发，并且你的代码有问题 - 我无法想象它是什么，因为它在 dev 中工作，但至少你已经证明它不是t CRM 插件基础设施的故障。

如果您没有收到 False 场景的弹出异常，唯一可能的答案是 CRM 的插件基础架构不认为应该更新该字段。当更新为 False 后屏幕刷新时，该字段是否仍显示 False 还是返回 True？可以通过从传递到 Pre-Operation 插件的实体的字段列表中删除字段更新来“取消”字段更新 - 是否可能有其他插件在此之前执行并可能取消该字段更新？

我能想到的最后一件事：你说的是更新，但你是说创建吗？如果该布尔字段的默认值在 Prod 中设置为 False，但在 Dev 中未设置为 False，则当您创建实体时，如果该字段设置为 False，则该字段将不会包含在字段更新列表中（因此不会触发您的插件），因为系统已经知道在 Create 上使用的默认值是 False。

# css - 简化 CSS

> ID：15828474
> 
> 赞同：0
> 
> 时间：2013-04-05T07:44:30.513
> 
> 标签：css, css-selectors

我有一些 CSS 属性要应用于很多 id。我需要简化我的代码，因为大约有 20 个 id！这是我的CSS：

```
 #a1_build ul,#a2_build ul,#a1_build li,#a2_build li,
 #a1_apply ul,#a2_apply ul,#a1_apply li,#a2_apply li,
 #a1_learn ul,#a2_learn ul,#a1_learn li,#a2_learn li
 {
    margin:0;
    padding:0;
    list-style:none;
    }
#a1_build ,#a2_build,
#a1_apply ,#a2_apply,
#a1_learn ,#a2_learn
       {
         margin-top:1em;
       }

#a1_build li,#a2_build li,#a1_apply li,#a2_apply li,
#a1_learn li,#a2_learn li
 { 
    width:696px;
    height:500px;
    overflow:hidden; 
    } 
```

现在，ID 将是 a1_build、a2_build....a10_build、a1_apply、a2_apply......a10_apply 和 a1_learn、a2_learn......a10_learn。我希望能够将其概括为 'a'+n+'_build'、'a'+n+'_apply' 和 'a'+n+'_learn' 并使 n 从 1-10 开始，这将使它变得很多更轻松！我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:51:44.560

是的，你可以做到这一点，使用`[a$=b]`特定属性结尾的字符串选择器的匹配结尾。这适用于 IE7 及更高版本。

[jsFiddle](http://jsfiddle.net/Tyriar/BMdvd/)

```
[id$=build] ul,
[id$=apply] ul,
[id$=learn] ul {
    margin:0;
    padding:0;
    list-style:none;
}
[id$=build],
[id$=apply],
[id$=learn] {
    margin-top:1em;
}

[id$=build] li,
[id$=apply] li,
[id$=learn] li { 
    width:696px;
    height:500px;
    overflow:hidden; 
} 
```

## 替代方法

我建议不要这样做，并使用更基于类的方法，如下所示：

[jsFiddle](http://jsfiddle.net/Tyriar/hwHpP/)

**HTML**

```
<div id="a1" class="a_section">
    <ul class="build">
        <li>item</li>
    </ul>
</div> 
```

**CSS**

```
.a_section .build {
    margin:0;
    padding:0;
    list-style:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:48:37.767

您可以使用 CSS nth-child 选择器..

```
p:nth-child(2) 
{
background:#ff0000;
} 
```

这是一个很棒的教程

[http://css-tricks.com/how-nth-child-works/](http://css-tricks.com/how-nth-child-works/)

# android - 读取图像，调整大小并重新保存：corona SDK

> ID：15828484
> 
> 赞同：1
> 
> 时间：2013-04-05T07:45:17.640
> 
> 标签：android, image, coronasdk, save

在我的电晕 SDK 中的一个应用程序中，我有一个以`home.png (480x380 px)`我的应用程序文件命名的图像。我想读取该图像，调整它的大小（到 240 x 240），然后将新图像保存为具有特定名称的 png 文件。

任何建议都是可观的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-31T17:26:10.900

目前，您无法在 Corona 中将图像调整为您想要的大小，但您可以使用**display.save()**代替。

[http://docs.coronalabs.com/api/library/display/save.html](http://docs.coronalabs.com/api/library/display/save.html)

> 我想将它保存在资源库中的任何位置

不，您不能在 Resources 目录中保存任何内容，而是使用 system.DocumentsDirectory。

更多信息：
[http ://docs.coronalabs.com/api/library/system/pathForFile.html](http://docs.coronalabs.com/api/library/system/pathForFile.html)

# asp.net - IIS 将管理员重定向到登录页面

> ID：15828486
> 
> 赞同：0
> 
> 时间：2013-04-05T07:45:19.343
> 
> 标签：asp.net, iis

这是在我的管理文件夹中的网络配置文件中

```
<configuration>
<system.web>
   <authorization>
     <allow roles="Admin"/>
     <deny users="*"/>
    </authorization>
</system.web>
</configuration> 
```

它在开发时工作，但在 IIS 服务器上部署它后，即使我以管理员身份登录并尝试转到 Admin 文件夹页面，它也会将我重定向到登录名。

如何解决？

**注意：这在部署到 IIS 之前工作得很好。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:28:02.897

解决了问题！始终`applicationName`在您的提供商中使用。

有关 IIS 故障排除的更多信息，请转到[此处](http://www.iis.net/learn/troubleshoot/security-issues/troubleshooting-forms-authentication)

# java - 如何将类的方法用于新类？

> ID：15828487
> 
> 赞同：0
> 
> 时间：2013-04-05T07:45:20.003
> 
> 标签：java

好吧，我在 A 类中有一个菜单方法，单击时会在模拟器中显示菜单。

如何将该方法用于我的新 B 类

我希望 B 类也可以使用这种方法：

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    //inflates the menu or this will show the activity
    MenuInflater awesome = getMenuInflater();
    awesome.inflate(R.menu.main, menu); //main is the xml main

    return true;
}

//this will manipulate the menu
public boolean onOptionsItemSelected(MenuItem item){
    switch (item.getItemId()) {
    case R.id.menuSweet:
        startActivity(new Intent("Sweet"));
        return true;

    case R.id.menuToast:
        Toast andEggs = Toast.makeText(MainActivity.this,
        "This is a toast", Toast.LENGTH_LONG);
        andEggs.show();
        return true;

    default:
        return super.onOptionsItemSelected(item);
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:59:36.773

根据您想要做的事情，您通常有两个大选择（其中很多）：子类化和组合：

## 子类化

因此，如果您的 B 类是 A 类行为的特化（B**是 A 的**特例），请扩展 A 类：

```
class A {
   public boolean onOptionsItemSelected(MenuItem item);
}

class B extends A {
   // some methods only B has.
} 
```

因此你可以打电话

```
B b = new B();
b.onOptionsItemSelected(someItem); 
```

## 作品

第二个选项是用它自己的同名方法包装对 A 的方法调用（所以 B**有一个**A 对象并使用它）：

```
class B {
    private A a = new A();

    public boolean onOptionsItemSelected(Item someItem) {
       a.onOptionsItemSelected(someItem);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:55:48.983

如果我没有误会，你期待吗？

```
class A
{
    public boolean menu(){
        System.out.println("Inside Menu");
        return true;
    }
}
class B
{
    public void testMethod()
    {
        A a = new A();
        System.out.println(a.menu());
    }
}
public class Test
{
    public static void main(String[] args) {
        B b =new B();
        b.testMethod();
    }
} 
```

# c# - windows phone 8 xaml 没有更新

> ID：15828502
> 
> 赞同：3
> 
> 时间：2013-04-05T07:46:02.690
> 
> 标签：c#, xaml, windows-phone-8

有没有人遇到过这个问题？我已经尝试重新创建整个解决方案，检查所有构建操作并复制到输出设置等。我现在可以更新 xaml 的唯一方法是卸载应用程序，然后每次重新部署。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T08:57:45.863

清洁和重建解决方案对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-07T09:15:56.820

.*.resx 文件访问修饰符可能设置为

```
No code generation 
```

尝试将其设置为

```
public 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:16:17.230

我通过转到源代码文件夹并删除了“只读”来修复它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-16T22:03:49.333

我遇到了同样的问题，从翻译服务下载的 resx 文件需要先“解锁”

# .net - 获取文件版本

> ID：15828509
> 
> 赞同：8
> 
> 时间：2013-04-05T07:46:16.533
> 
> 标签：.net, vb.net

`App.Major`我可以通过使用,`App.Minor`等在 vb6 中获取 exe 的文件版本（它自己的版本）`App.Revision`。但是我怎样才能在 vb.net 中获得相同的版本。我尝试使用以下 3 种方法。

```
Text1.Text = My.Application.Info.Version.Major & "." & My.Application.Info.Version.Minor & "." & My.Application.Info.Version.Build & "." & My.Application.Info.Version.Revision

Text2.Text = Me.GetType.Assembly.GetName.Version.ToString()

Text3.Text = My.Application.Info.Version.ToString() 
```

在所有 3 种情况下，它都返回了**程序集版本**（我在 xp 机器中创建的 exe 的 bin 文件夹中检查了它。在 Windows 8 中，当我看到文件属性时，我没有看到任何像程序集版本这样的选项）

默认情况下，程序集和文件版本是相同的。但是当我手动更改它时，`project properties->applicationassembly information->File version`我知道我的代码正在返回程序集版本。那么我怎样才能得到文件版本呢？什么是程序集和文件版本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T07:58:14.007

使用`FileVersionInfo.GetVersionInfo`，例如：

```
Dim myFileVersionInfo As FileVersionInfo =
    FileVersionInfo.GetVersionInfo([Assembly].GetExecutingAssembly().Location) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T20:04:33.247

所以在.NET 程序中，实际上有两个版本，而不仅仅是一个（我知道的）。程序集版本是您正在获取的，并且更容易在 .NET 中检索。它本质上是“.NET 的版本”，所以当程序集有不同的版本时，这就是它使用的版本。

然后是“文件版本”，或者在某个地方我看到微软甚至将其称为“程序集文件版本”，以使混乱更加严重。所以真的需要看看名称是否包含“文件”。程序集的这个“文件”版本与文件系统相关联，因此当您在 Windows 资源管理器中查看该版本时，您会得到这样的结果。

为什么微软将它们拆分为两个不同的东西并且没有将它们捆绑在一起，我不明白。也许有人可以进一步启发我。

我刚刚想出了获取 FileVersion 的代码。我发现这个问题是因为我也在寻找如何检索它（在 VB 中，而不是 C# 中）。我认为 C# 使大多数事情变得更容易，包括访问程序集。因此，这是检索程序*文件*版本的 VB 代码：

```
Dim fileName$ = System.Reflection.Assembly.GetExecutingAssembly().Location
Dim fileName2$ = Application.ExecutablePath ' this grabs the filename too,
' but #2 ends with ".EXE" while the 1st ends with ".exe" in my Windows 7.

' either fileName or fileName2 works for me.
Dim fvi As FileVersionInfo = FileVersionInfo.GetVersionInfo(fileName)
' now this fvi has all the properties for the FileVersion information.
Dim fvAsString$ = fvi.FileVersion ' but other useful properties exist too. 
```

哇，很多代码都应该像在 VB6 中一样简单。甚至可能是 App.Version.ToString 之类的。哇。一路走好，微软！至少这个并不像他们的一些特技那么难，就像只是演奏你自己的音乐串一样。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-28T01:48:32.640

实际上采用Shawns Answer并对其进行一些改进，您可以使用一行代码检索文件版本

```
Dim FileVer As String = FileVersionInfo.GetVersionInfo(Application.ExecutablePath).FileVersion 
```

或者您可以将其放在标签中

```
Me.Label1.Text = FileVersionInfo.GetVersionInfo(Application.ExecutablePath).FileVersion 
```

好样的！VB.NET 像往常一样简单....

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T07:58:34.080

获取应用程序版本的最简单方法是：

```
 My.Application.Info.Version.Major
    My.Application.Info.Version.MajorRevision 
```

等等

查看这篇文章了解程序集的描述：http: [//visualbasic.about.com/od/FWTools/a/FWAssemblies.htm](http://visualbasic.about.com/od/FWTools/a/FWAssemblies.htm) 作为一个快速信息：一个程序集可以包含多个文件 - 所以程序集版本比文件信息更好.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-12T16:58:18.500

以下是从程序集本身获取程序集文件版本信息的更可靠方法：

```
Function GetAssemblyFileVersion() As String
    Dim ProjectAssembly As Reflection.Assembly 
    ProjectAssembly = Reflection.Assembly.GetExecutingAssembly()

    For Each attr As Attribute In ProjectAssembly.GetCustomAttributes(False)
        If TypeOf attr Is Reflection.AssemblyFileVersionAttribute Then
            Dim FileVerAttr As Reflection.AssemblyFileVersionAttribute = attr
            Return FileVerAttr.Version
        End If
    Next

    Throw New Reflection.TargetInvocationException(
        New KeyNotFoundException(
            "Cannot find custom attribute 'AssemblyFileVersionAttribute'"))
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-23T01:10:47.590

这是我创建的一个扩展方法，用于返回`AssemblyFileVersion`. 此方法适用于应用程序和类库。

```
''' <summary>
''' Gets the AssemblyFileVersion from the specified assembly.
''' </summary>
''' <param name="Assembly">[Assembly] Assembly to get the Assembly File Version from.</param>
''' <returns>[String] The Assembly's file version.</returns>
<Extension>
Friend Function GetFileVersion(ByVal Assembly As Assembly) As String
    On Error GoTo Err
    Return DirectCast(Assembly.GetCustomAttribute(GetType(AssemblyFileVersionAttribute)), AssemblyFileVersionAttribute).Version
Err:
    Return Nothing
End Function 
```

记住， `Extension Methods`需要放在 a 中`Module`，不能在 a 中创建`Class`。如果您想了解更多关于`Extension Methods`在上面的搜索栏中键入它的信息。他们会让你的生活更轻松。;)

确保在您的模块中包含以下内容...

```
Imports System.Runtime.CompilerServices 
```

现在在任何程序集上，您都可以简单地调用这样的东西。

```
Dim Version as String = AnyAssembly.GetFileVersion() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-17T16:04:33.967

```
Dim verstr1 As String
        OpenFileDialog1.ShowDialog()
        Dim MyFileverInfo As FileVersionInfo = FileVersionInfo.GetVersionInfo(OpenFileDialog1.FileName)
        verstr1 = MyFileverInfo.FileName & vbCrLf & MyFileverInfo.InternalName _
            & vbCrLf & MyFileverInfo.CompanyName & vbCrLf & MyFileverInfo.FileMajorPart & vbCrLf & _
            MyFileverInfo.FileMinorPart 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-23T02:09:32.480

我筋疲力尽，但你试过了`Application.ProductVersion`吗？我在其他问题中没有看到。这将返回 xxxx 项目设置中的任何版本。请注意，对于 clickonce，您需要从其他站点获取它。

# asp.net - 当前上下文中不存在名称“windows”

> ID：15828510
> 
> 赞同：1
> 
> 时间：2013-04-05T07:46:16.710
> 
> 标签：asp.net

我正在尝试使用**windows.location**重定向到我的 Web 应用程序中的另一个页面，但它向我显示了上述错误，那么应该将哪些文件添加到页面中以使用相同的文件？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:09:47.077

是的，asp.net 中没有window.location。而是尝试在 response.redirect 中使用布尔值 true 作为 Response.Redirect("default.aspx",True);

# objective-c - 如何从 Unicode 字符串 U+20B9 中获取 Ascii 值以获取印度卢比符号？

> ID：15828514
> 
> 赞同：1
> 
> 时间：2013-04-05T07:46:29.363
> 
> 标签：objective-c, nsstring, nsstringencoding

如何从 Unicode 字符串 U+20B9 中获取 Ascii 值以获取印度卢比符号？我们尝试使用区域设置标识符，但它给出了美元。如何完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:50:10.500

它没有ASCII码。只有 Unicode 值 U+0000 到 U+007F 有 ASCII 码。

一些非标准字体分配了印度卢比符号来替换 ASCII 重音符 (`)，即 ASCII 60（和 Unicode U+0060）。这是一个愚蠢的错误分配，除了少数骄傲和错误地完成分配的字体之外，它不适用于字体。

从这里： http://in.answers.yahoo.com/question/index?qid= [20121011093254AAU72or](http://in.answers.yahoo.com/question/index?qid=20121011093254AAU72or)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:50:16.287

ASCII 不包括印度卢比符号的代码点。您无法获取它的 ASCII 值，因为它不存在。这就是他们发明Unicode的原因。

# haskell - 试图通过 fmap（过渡）使线世界移动，但它以某种方式向我显示错误（Haskell）

> ID：15828515
> 
> 赞同：0
> 
> 时间：2013-04-05T07:46:34.100
> 
> 标签：haskell, map

和我上一个问题一样，我要求通过有序列表制作一个有线世界，所以我编写了以下代码，（代码中的所有功能都在其他模块中以某种方式定义，所以，不用担心 XD，随意问我是否想看看那些“预定义的函数”）但是当我在终端上运行它时，它显示一个错误，这里是代码：

```
module Transitions.For_Ordered_Lists_2D (
   transition_world -- :: Ordered_Lists_2D Cell -> Sparse_Line Cell
) where

import Data.Cell (Cell (Head, Tail, Conductor, Empty))
import Data.Coordinates
import Data.Ordered_Lists_2D

-- Replace this function with something more meaningful:

xandy :: Element_w_Coord Cell -> Coord
xandy (e, (x, y)) = (x, y)

transition_sc :: Ordered_Lists_2D Cell -> Placed_Elements Cell -> Sparse_Line Cell
transition_sc world pec = case world of
Sparse_Line{y_pos = y, entries =  xline}: rest_of_sparse_lines  -> case pec of
        Placed_Element{x_pos = x, entry =  Head} : rest_of_placed_elements   -> (Sparse_Line{y_pos = y, entries = Placed_Element{x_pos = x, entry =  Tail} :  rest_of_placed_elements}) 
        Placed_Element{x_pos = x, entry =  Tail} : rest_of_placed_elements   -> (Sparse_Line{y_pos = y, entries = Placed_Element{x_pos = x, entry =  Conductor} : rest_of_placed_elements}) 
        Placed_Element{x_pos = x, entry =  Empty} : rest_of_placed_elements   -> (Sparse_Line{y_pos = y, entries = Placed_Element{x_pos = x, entry =  Empty} : rest_of_placed_elements}) 
        Placed_Element{x_pos = x, entry =  Conductor} : rest_of_placed_elements
            |element_occurrence Head neighbours == 1 || element_occurrence Head neighbours == 2    -> (Sparse_Line{y_pos = y, entries = Placed_Element{x_pos = x, entry =  Head} : rest_of_placed_elements}) 
            |otherwise                                                                             -> (Sparse_Line{y_pos = y, entries = Placed_Element{x_pos = x, entry =  Conductor} : rest_of_placed_elements}) 
                where
                    neighbours = local_elements (xandy (Conductor, (x, y))) world

transition_world :: Ordered_Lists_2D Cell -> Ordered_Lists_2D Cell
transition_world world = fmap (transition_sc world) world      

--the end
--the end
--the end 
```

但是它向我显示了以下错误：

```
u5363876@n114lt20:~/Desktop/lalal$ ./make_Wireworld
[10 of 20] Compiling Transitions.For_Ordered_Lists_2D ( Sources/Transitions/For_Ordered_Lists_2D.hs, x86_64/Transitions/For_Ordered_Lists_2D.o )

Sources/Transitions/For_Ordered_Lists_2D.hs:35:53:
    Couldn't match expected type `Placed_Elements Cell'
                with actual type `Sparse_Line Cell'
    Expected type: [Placed_Elements Cell]
      Actual type: Ordered_Lists_2D Cell
    In the second argument of `fmap', namely `world'
    In the expression: fmap (transition_sc world) world 
```

我完全被这个错误弄糊涂了 提前感谢任何可以帮助我的人。

@dave4420 这里是 Placed_Elements 和 Sparse_Lines 的定义

```
type Ordered_Lists_2D e = [Sparse_Line e]

data Sparse_Line e = Sparse_Line {y_pos :: Y_Coord, entries :: Placed_Elements e}

data Placed_Element  e = Placed_Element {x_pos :: X_Coord, entry :: e}
type Placed_Elements e = [Placed_Element e] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:43:20.117

你有：

```
transition_sc :: Ordered_Lists_2D Cell -> Placed_Elements Cell -> Sparse_Line Cell 
```

它期望它的第二个参数为`[Placed_Element Cell]`- 即Placed_Element 的列表。但相反，您正在映射它，因此一次只处理一个参数而不是整个列表。此外，您在列表中调用它`Sparse_Line Cell`！

碰巧，每个里面`Sparse_Line`都有一个列表`Placed_Element`，所以你*可以*让它工作。但是你需要“深入”到每个元素`Placed_Elements`才能到达那里。

尝试编写`transition_sc`类型的函数包装，`Ordered_Lists_2D Cell -> Sparse_Line Cell -> Sparse_Line Cell`看看是否可以帮助您走得更远。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T22:29:51.933

你有很奇怪的情况

不要使用

```
case pec of
    Placed_Element{x_pos = x, entry =  Head} : rest_of_placed_elements   -> ... 
```

改为使用

```
case entry (head pec) of
    Head   -> ... 
```

# java - 在 Objective-C 中解密 Java AES 加密

> ID：15828517
> 
> 赞同：0
> 
> 时间：2013-04-05T07:46:44.537
> 
> 标签：java, objective-c, aes

这个问题可能已经问过好几次了，但老实说，我还没有找到解决我问题的答案。

场景：我有一个来自服务器的加密文件，可能使用 Java。目标是在 iPhone (Objective-C) 中解密这个文件。

我尝试使用[FBEncryptorAES](https://github.com/dev5tec/FBEncryptor/blob/master/FBEncryptorAES.h)解密无济于事。

这是我在 Objective-C 中的解密：

```
NSData *returnData = [FBEncryptorAES decryptData:stream key:key iv:nil]; 
```

`stream`是从服务器获取的加密的NSData，`key`是 AES。

我还编写了等效的 Java 代码，我可以使用它正确解密数据，因此验证`key`我使用的每个字节都是相同的。这是上述Java代码：

```
SecretKeySpec key = new SecretKeySpec(key, "AES");
Cipher cipher = Cipher.getInstance("AES");
cipher.init(Cipher.DECRYPT_MODE, key);
cipherIn = new CipherInputStream(new FileInputStream(<decrypted-file>, cipher); 
```

有什么建议吗？

谢谢。

# ruby-on-rails - 比较这个简单的 ruby /rails 日期的最佳方法

> ID：15828521
> 
> 赞同：1
> 
> 时间：2013-04-05T07:46:56.480
> 
> 标签：ruby-on-rails, date, time

我有一个包含日期时间戳的对象，例如

```
 time = Sat, 06 Apr 2013 08:00:00 PDT -07:00 
```

我只是想比较对象时间，看看日期是否与明天的日期（月、日、年）匹配（与时间无关）。这项检查每天都会发生。

我正在尝试诸如：

```
 time == Date.tomorrow 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:49:17.330

做：

```
time.to_date == Date.tomorrow 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:28:46.777

尝试：

```
Date.parse(time) == Date.tomorrow 
```

# java - 在java中以像素读取和写入图像

> ID：15828527
> 
> 赞同：1
> 
> 时间：2013-04-05T07:47:02.207
> 
> 标签：java

我正在尝试使用`BufferedImage`. 但书写图像中的像素与其来源略有不同。我不擅长这种图像处理的东西。请任何人帮助我找出我在代码中犯的错误。

这是我的代码

```
File InImage=new File("source.jpg");
File OutImage=new File("out.jpg");

/* code for reading the image*/
BufferedImage image=ImageIO.read(InImage);
WritableRaster raster=image.getRaster();

/*  writing the same raster to a new image */
BufferedImage newImg=new BufferedImage(raster.getWidth(), raster.getHeight(),BufferedImage.TYPE_BYTE_GRAY);
                newImg.setData(raster);
ImageIO.write(newImg, "jpg", OutImage); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-06T04:38:03.303

```
import java.awt.image.BufferedImage;
import java.awt.image.Raster;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class ToGray {

    public static void main(String[] args) throws IOException {
        File file = new File("f:/lion.jpg");
        BufferedImage img = ImageIO.read(file);
        int width = img.getWidth();
        int height = img.getHeight();
        int[][] pixel = new int[width][height];
        Raster raster = img.getData();
        for (int i = 0; i < width; i++) {
            for (int j = 0; j < height; j++) {
                pixel[i][j] = raster.getSample(i, j, 0);
            }
        }

        BufferedImage theImage = new BufferedImage(width, height,
                BufferedImage.TYPE_INT_RGB);
        for (int i = 0; i < width; i++) {
            for (int j = 0; j < height; j++) {
                int value = pixel[i][j] << 16 | pixel[i][j] << 8
                        | pixel[i][j];
                theImage.setRGB(i, j, value);
            }
        }

        File outputfile = new File("f:/op.png");
        try {
            ImageIO.write(theImage, "png", outputfile);
        } catch (IOException e1) {

        }
}
} 
```

这段代码只是一个读取和写入灰度图像的示例。这里我使用光栅来读取图像并设置 rgb 来写入图像。您还可以使用 get 和 setRGB 来读取和写入图像。写入的图像格式必须是bmp、gif、png等。由于jpg、jpeg在这些格式写入后是有损压缩的，我们可能会得到全黑图像。看到图像的数组值我们可能会得到0或1或2个值作为像素强度。因此，使用 png。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:52:34.487

我几乎可以肯定原始图像不是 type `TYPE_BYTE_GRAY`。我建议您输出与输入相同的图像类型：

```
BufferedImage newImg = new BufferedImage(raster.getWidth(), raster.getHeight(), image.getType()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:59:01.817

这就是我如何处理图像尝试一下，它是为位图设计的，但你可以编辑它来做 jpg 和 png。它将它们加载到一个字节数组中进行处理。这是我能找到的最基本的工作版本，因为我已经进一步开发了它

```
 import java.awt.image.BufferedImage;
import java.io.ByteArrayInputStream;
import java.io.ByteArrayOutputStream;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;

public class ImageEdit 
{

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException 
    {
        // TODO Auto-generated method stub
        //loadBitmapToBytes("icon","resources");
        //WriteByteToBitmapFile("foo", "food", null);
    }

    public static byte [] loadBitmapToBytes (String filename, String dir) throws IOException
    {
        String a = "\\\\";
        String b = ".bmp";
        String readDir = dir + a + filename + b;
        BufferedImage image = ImageIO.read(new File(readDir));
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ImageIO.write(image, "bmp", baos);
        byte[] img=baos.toByteArray();
        return img;
    }

    public static void writeByteToBitmapFile (String filename, String dir, byte [] img) throws IOException
    {   
        String a = "/";
        String b = ".bmp";
        String writeDir = dir + a + filename + b;
        BufferedImage imageA = ImageIO.read(new ByteArrayInputStream(img));
        ImageIO.write(imageA, "BMP", new File(writeDir));
        System.out.println(writeDir);
    }

    public static byte [] invertBitmap(byte[] img)
    {
        int indexNo = 54;

        for(int i = 54; i < (img.length-54)/3; i++)
        {
            img[indexNo] = (byte) (255-img[indexNo]);
            indexNo++;
            img[indexNo] = (byte) (255-img[indexNo]);
            indexNo++;
            img[indexNo] = (byte) (255-img[indexNo]);
            indexNo++;
        }
        return img;
    }

    public static byte [] invertSingleBitmapChannel(char chanel, byte [] img)
    {
        String a = "Color Chanel bad Input";
        int indexNo = 54;
        for (int i = 54; i < (img.length-54)/3; i++, indexNo++ )
        {
            if (chanel == 'B' || chanel == 'b')
            {

                img[indexNo] = (byte) (255-img[indexNo]);
                indexNo+=2;

            }
            else if (chanel == 'G' || chanel == 'g')
            {
                indexNo++;
                img[indexNo] = (byte) (255-img[indexNo]);   
                indexNo++;
            }
            else if (chanel == 'R' || chanel == 'r')
            {
                indexNo+=2;
                img[indexNo] = (byte) (255-img[indexNo]);   
            }
            else
            {
                System.out.println(a);
                return null;
            }
        }
        return img;

    }

    public static byte [] greyFromBitmapColor(char fromColor, byte [] img)
    {   
        int temp;
        int indexNo = 54;
        String a = "Color Chanel bad Input";
        for(int i = 54; i < (img.length-54)/3; i++, indexNo++)
        {   
            if (fromColor == 'B' || fromColor == 'b')
            {
                temp = img[indexNo+2];
                img[indexNo] = (byte) temp;
                indexNo++;
                img[indexNo] = (byte) temp;
                indexNo++;
            }
            else if (fromColor == 'G' || fromColor == 'g')
            {
                temp = img[indexNo+1];
                img[indexNo] = (byte) temp;
                indexNo+=2;
                img[indexNo] = (byte) temp; 
            }
            else if (fromColor == 'R' || fromColor == 'r')
            {
                temp = img[indexNo];
                indexNo++;
                img[indexNo] = (byte) temp;
                indexNo++;
                img[indexNo] = (byte) temp; 
            }
            else
            {
                System.out.println(a);
                return null;
            }
        }

        return img;
    }

    public static byte [] greyFromBitmapAverage(byte [] img)
    {
        int temp;
        int indexNo = 54;
        for(int i = 54; i < (img.length-54)/3; i++, indexNo++)
        {
            temp = (img[indexNo]+img[indexNo+1]+img[indexNo+2])/3;
            img[indexNo] = (byte) temp;
            indexNo++;
            img[indexNo] = (byte) temp;
            indexNo++;
            img[indexNo] = (byte) temp;
        }

        return img;
    }

    public static byte [] removeChannelFromBitmap(char lostColor, byte [] img)
    {
        String a = "Color Chanel bad Input";
        int indexNo = 54;
        for(int i = 54; i < (img.length-54)/3; i++, indexNo++)
        {
            if (lostColor == 'B' || lostColor == 'b')
            {

                img[indexNo] = 0;
                indexNo+=2;

            }
            else if (lostColor == 'G' || lostColor == 'g')
            {
                indexNo++;
                img[indexNo] = 0;   
                indexNo++;
            }
            else if (lostColor == 'R' || lostColor == 'r')
            {
                indexNo+=2;
                img[indexNo] = 0;   
            }
            else
            {
                System.out.println(a);
                return null;
            }
        }

        return img;
    }

    public static byte [] greyFromDominantBitmapColor (byte [] img)
    {
        int indexNo = 54;
        long r = 0;
        long g = 0;
        long b = 0;
        char dom = 'b';

        for(int i = 54; i < (img.length-54)/3; i++, indexNo++)
        {   
                b += img[indexNo];
                indexNo++;
                g += img[indexNo];
                indexNo++;
                r += img[indexNo];  
        }

        if (b > 0)
            dom = 'b';
        if (g > b)
            dom = 'g';
        if (r > g)
            dom = 'r';

        greyFromBitmapColor(dom, img);
        return img;
    }

} 
```

这是测试课

```
 import java.io.IOException;

public class TestApp {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException 
    {
        byte [] img = ImageEdit.loadBitmapToBytes("fooInv","resources");
        //ImageEdit.invertBitmap(img);
        //ImageEdit.greyFromBitmapColor('r',img);
        ImageEdit.greyFromDominantBitmapColor(img);
        //ImageEdit.invertBitmap(img);
        //ImageEdit.writeByteToBitmapFile("fooInv", "resources", img);

        System.out.println("Done!");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T07:51:31.030

[JPEG](http://en.wikipedia.org/wiki/JPEG)是一种[有损](http://en.wikipedia.org/wiki/Lossy_compression)格式，读入和写出会丢失图像中的信息，因此每次保存时看起来都会有所不同。

为避免这种情况，请使用无损格式，例如[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)。

# visual-studio-2010 - 重置工具箱

> ID：15828531
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:47:09.237
> 
> 标签：visual-studio-2010, devexpress, components, toolbox

我想将我的工具箱恢复到原来的状态，每次我重置我的工具箱时，devexpress 控件都会回来。我希望 devexpress 控件可供我选择，但我不希望这些控件自动添加到我的工具箱中，尤其是在我单击重置工具箱之后。有任何想法吗？

我试过的

*   删除待定文件
*   删除 appdata/roaming/microsoft/visualstudio 中的 10.0 文件夹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:49:37.440

如果您在以下注册表位置找到任何 Devexpress 条目，只需将其删除并再次重置检查它是否仍然存在。

64 位：HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\VisualStudio\10.0\ToolboxControlsInstaller

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T20:21:11.413

这对我有用：实际上，我所做的是右键单击“任何”控件（不是工具箱标题）并选择“重置工具箱”

来源：[http ://forums.asp.net/t/1565790.aspx/1](http://forums.asp.net/t/1565790.aspx/1)

按着这些次序

1.  右键单击工具箱并按重置按钮，它将清除您添加的所有控件。
2.  接下来单击选择项目，不要取消选中任何选中的选项。
3.  只需单击您想要的 .dll 控制文件并按确定，它将添加您的控制并且不会禁用 asp.net 控件。

# spring-mvc - 子视图层仍然显示父表列部门ID的先前值，但父被删除

> ID：15828533
> 
> 赞同：0
> 
> 时间：2013-04-05T07:47:19.850
> 
> 标签：spring-mvc, spring-data-jpa

我被困在问题上，我使用 spring MVC 和 spring-data 制作了一个正常的项目，其中我有 dao 层、服务层、控制器和视图层。在这个项目中，我有`Department, employee,employeeproject`桌子。当我删除部门时，对应的员工表列`departmentId`设置为空。所以这在从 UI 中删除部门时正确反映在数据库中，但是当我再次通过`getALlEmployee`按钮看到员工时，那时部门的先前值仍显示在UI 而不是值在数据库中为空。当我重新启动服务器时，值没有显示为什么会这样？

这是我在所有三层中的函数 getAllEmployee()

在 DAO 层

```
 /**
     * Get the all employee detail from the database
     * 
     * @return list of employees
     */
    @Override
    public List<Employee> getAllEmployees() {
        List<Employee> employeeList = employeeRepository.findAll(new Sort(
                Direction.ASC, "employeeNumber"));

        return employeeList;
    } 
```

在服务层

```
 @Override
    public List<EmployeeBO> getAllEmployees() {
        List<EmployeeBO> employeeBOList = null;
        List<Employee> employeeList = employeeDAO.getAllEmployees();
        if (employeeList != null && employeeList.size() != 0) {
            employeeBOList = new ArrayList<EmployeeBO>();
            for (Employee employee : employeeList) {
                employeeBOList.add(convertEmployeeEntityToBO(employee));
            }
        }

     return employeeBOList; 
```

并在控制器中

```
@RequestMapping(value = "/GetAllEmployee", method = RequestMethod.GET)
public ModelAndView getAllEmployee(
        @ModelAttribute("employeeBO") EmployeeBO employeeBO) {
    ModelAndView modelAndView = new ModelAndView();
    List<EmployeeBO> list = employeeService.getAllEmployees();
    modelAndView.addObject("employeeBO", employeeBO);
    modelAndView.addObject("listEmployeeBO", list);
    modelAndView.setViewName("EmployeeList");
    return modelAndView;
} 
```

部门班波佐

```
 @Entity
@Table(name = "department")
public class Department extends BaseObject {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "DEPARTMENT_ID")
    private String departmentId;
    @Column(name = "DEPARTMENT_NAME")
    private String departmentName;
    @Column(name = "DEPARTMENT_LOCATION")
    private String departmentLocation;
    @OneToMany
    @JoinColumn(name = "DEPARTMENT_ID", insertable = false, updatable = false)
    Collection<Employee> employeeList = new ArrayList<Employee>(); 
```

员工波佐班

```
 @Entity
@Table(name = "employee")
public class Employee extends BaseObject {

    private static final long serialVersionUID = 1L;
    @Id
    @Column(name = "EMPLOYEE_NUMBER")
    private long employeeNumber;
    @Column(name = "FIRST_NAME")
    private String firstName;
    private String title;
    @Column(name = "DEPARTMENT_ID")
    private String departmentId;
    @Column(name = "MOBILE_NUMBER")
    private long mobileNumber;
    @Column(name = "DATE_OF_BIRTH")
    @Temporal(TemporalType.DATE)
    private Date dateOfBirth;

    @OneToMany(mappedBy = "employee", cascade = CascadeType.ALL, orphanRemoval = true)
    Collection<EmployeeProject> employeeProjectList = new ArrayList<EmployeeProject>(); 
```

这两个班级部门和员工 pozo 班级有 setter getter

部门仓库接口

```
 import java.util.List;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.jpa.repository.Modifying;
import org.springframework.data.jpa.repository.Query;
import org.springframework.data.repository.query.Param;

import com.nousinfo.tutorial.model.Department;

/**
 * Repository interface for {@link Department} instances. Provides basic CRUD
 * operations due to the extension of {@link JpaRepository}. Includes custom
 * implemented functionality by extending {@link JpaRepository}.
 * 
 * @author ankurj
 */
public interface DepartmentRepository extends JpaRepository<Department, String> {
    /**
     * Find all Department with the given department Name. This method will be
     * translated into a query by constructing it directly from the method name
     * as there is no other query declared.
     * 
     * @param name
     *            departmentName to be find
     * @return list of departments
     */
    public List<Department> findByDepartmentNameLike(String name);

    /**
     * 
     * update the employee with the given departmentId. This method will be
     * translated into a query using the one declared in the {@link Query}
     * annotation declared one.
     * 
     * @param departmentId
     *            departmentId to be set
     * @param deptId
     *            departmentId is to deleted
     * @return integer value
     */
    @Modifying
    @Query("UPDATE Employee set DEPARTMENT_ID = :departmentId WHERE DEPARTMENT_ID = :deptId")
    public int updateEmployeeDepartmentId(
            @Param("departmentId") String departmentId,
            @Param("deptId") String deptId);
} 
```

# c# - 以 XML 形式接收响应

> ID：15828536
> 
> 赞同：0
> 
> 时间：2013-04-05T07:47:26.820
> 
> 标签：c#, asp.net, sql-server, xml

当用户单击按钮时，我需要运行数据库查询以接收作为 XML 的数据库响应。我是新手，我找不到任何教程。这可能是因为我不知道如何搜索它。有人可以指点我一个描述如何做到这一点的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:50:24.643

我认为您需要查看“For XML”关键字，有几种方法可以塑造数据，但下面的 MSDN 链接是一个好的开始

[用于 XML 的 MSDN](http://msdn.microsoft.com/en-gb/library/ms178107.aspx)

# maven - maven-jaxb 插件 - 两个类具有相同的 XML 类型名称

> ID：15828539
> 
> 赞同：1
> 
> 时间：2013-04-05T07:47:36.730
> 
> 标签：maven, maven-jaxb2-plugin

以下问题，我有 2 个 WSDL 文件，我必须从中生成存根。但是两个 WSDL 文件都包含相同的 XML 类型名称（第二个 WSDL 是第一个 WSDL 的进一步阶段）。

我使用以下配置生成存根：

```
 <plugins>
    ..
        <plugin>
            <groupId>org.jvnet.jaxb2.maven2</groupId>
            <artifactId>maven-jaxb2-plugin</artifactId>
            <version>0.7.1</version>
            <executions>
                <execution>
                    <id>ws-source-gen-phase1</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <removeOldOutput>true</removeOldOutput>
                        <extension>true</extension>
                        <schemaDirectory>src/main/resources/META-INF/schema/xyz/</schemaDirectory>
                        <args>
                            <arg>-wsdl</arg>
                            <schemaFiles>src/main/resources/META-INF/schema/xyz/Service1.wsdl</schemaFiles>
                            <arg>-XautoNameResolution</arg>
                        </args>
                        <generatePackage>com.xyz.ws</generatePackage>
                        <generateDirectory>${project.build.directory}/generated-sources/xjc1</generateDirectory>
                    </configuration>
                </execution>
                <execution>
                    <id>ws-source-gen-phase2</id>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                    <configuration>
                        <removeOldOutput>true</removeOldOutput>
                        <extension>true</extension>
                        <schemaDirectory>src/main/resources/META-INF/schema/xyz/</schemaDirectory>
                        <args>
                            <arg>-wsdl</arg>
                            <schemaFiles>src/main/resources/META-INF/schema/xyz/Service2.wsdl</schemaFiles>
                            <arg>-XautoNameResolution</arg>
                        </args>
                        <generatePackage>com.xyz.ws.phase2</generatePackage>
                        <generateDirectory>${project.build.directory}/generated-sources/xjc2</generateDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins> 
```

这确实会生成我的存根，但如果我尝试将它们与 spring-ws 一起使用，我会收到以下错误。

应用程序上下文.xml：

```
<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory" />

<bean id="xyzMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPath"
        value="com.xyz.ws:com.xyz.ws.phase2" />
</bean>
<bean id="xyzUnmarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
    <property name="contextPath"
        value="com.xyz.ws:com.xyz.phase2" />
</bean>

<bean id="xyzServiceTemplate" class="org.springframework.ws.client.core.WebServiceTemplate">
    <constructor-arg ref="messageFactory" />
    <property name="marshaller" ref="xyzMarshaller"></property>
    <property name="unmarshaller" ref="xyzUnmarshaller"></property>
    <property name="defaultUri" value="${ThiemeRightAccessService.URI}" />
</bean>

<bean id="XyzServiceClient"
    class="com.ebcont.gtv.radbase.business.service.impl.XyzServiceClientImpl">
    <constructor-arg ref="xyzServiceTemplate"></constructor-arg>
</bean> 
```

错误：

```
Two classes have the same XML type name "{http://status.ws.xyz.com/}GetXyzObject1". Use 
@XmlType.name and @XmlType.namespace to assign different names to them.
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:24:41.297

显然你不能混合`com.xyz.ws`- `com.xyz.ws.phase2`JAXB 不知道要为`{http://status.ws.xyz.com/}GetXyzObject1`.

您可能需要为两个包创建两组 marshaller/unmarshaller/template/client。

# dynamic - 以编程方式在支持 bean 中创建和添加复合组件

> ID：15828540
> 
> 赞同：8
> 
> 时间：2013-04-05T07:47:42.010
> 
> 标签：dynamic, jsf-2, facelets, composite-component

我正在使用一个动态仪表板，用户可以在其中随意固定和删除项目。现在我有一个问题，我想从支持 bean 将现有的复合组件添加到视图中。我试图从互联网上找到正确的方法来做到这一点，但到目前为止还没有成功。这是我要添加的简单复合组件：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:composite="http://java.sun.com/jsf/composite">
    <!-- INTERFACE -->
    <cc:interface>

    </cc:interface>

    <!-- IMPLEMENTATION -->
    <cc:implementation>
        <h:outputText value="TEST"/>
    </cc:implementation>
</html> 
```

这是应该返回复合组件的代码：

```
public static UIComponent getCompositeComponent(String xhtml, String namespace) {
    FacesContext fc = FacesContext.getCurrentInstance();
    Application app = fc.getApplication();
    Resource componentResource = app.getResourceHandler().createResource(xhtml, namespace);

    UIPanel facet = (UIPanel) app.createComponent(UIPanel.COMPONENT_TYPE);
    facet.setRendererType("javax.faces.Group");
    UIComponent composite = app.createComponent(fc, componentResource);
    composite.getFacets().put(UIComponent.COMPOSITE_FACET_NAME, facet);

    return composite;
} 
```

这是我使用该功能的方式：

```
Column column = new Column();
UIComponent test = HtmlUtil.getCompositeComponent("test.xhtml", "comp");
column.getChildren().add(test); 
```

但是列内没有呈现任何内容。任何想法如何做到这一点？我不想使用 render="#{bean.isThisRendered}" 方式，因为它不适合我的用例。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-08T16:15:32.340

此代码不完整。您需要在[`FaceletContext#includeFacelet()`](http://docs.oracle.com/javaee/6/api/javax/faces/view/facelets/FaceletContext.html#includeFacelet%28javax.faces.component.UIComponent,%20java.net.URL%29)之后使用将复合组件资源包含在复合组件实现中。这是一个可以完成这项工作的实用方法。拥有父级很重要，因为它是`#{cc}`应该在 EL 范围内创建的上下文。所以这个实用方法也立即将复合添加为给定父级的子级。此外，为复合组件提供一个固定 ID 很重要，否则 JSF 将无法处理复合内的任何表单/输入/命令组件。

```
public static void includeCompositeComponent(UIComponent parent, String libraryName, String resourceName, String id) {
    // Prepare.
    FacesContext context = FacesContext.getCurrentInstance();
    Application application = context.getApplication();
    FaceletContext faceletContext = (FaceletContext) context.getAttributes().get(FaceletContext.FACELET_CONTEXT_KEY);

    // This basically creates <ui:component> based on <composite:interface>.
    Resource resource = application.getResourceHandler().createResource(resourceName, libraryName);
    UIComponent composite = application.createComponent(context, resource);
    composite.setId(id); // Mandatory for the case composite is part of UIForm! Otherwise JSF can't find inputs.

    // This basically creates <composite:implementation>.
    UIComponent implementation = application.createComponent(UIPanel.COMPONENT_TYPE);
    implementation.setRendererType("javax.faces.Group");
    composite.getFacets().put(UIComponent.COMPOSITE_FACET_NAME, implementation);

    // Now include the composite component file in the given parent.
    parent.getChildren().add(composite);
    parent.pushComponentToEL(context, composite); // This makes #{cc} available.
    try {
        faceletContext.includeFacelet(implementation, resource.getURL());
    } catch (IOException e) {
        throw new FacesException(e);
    } finally {
        parent.popComponentFromEL(context);
    }
} 
```

因此，在您的特定示例中，按如下方式使用它：

```
includeCompositeComponent(column, "comp", "test.xhtml", "someUniqueId"); 
```

# c# - 将客户端证书与 python 请求一起使用

> ID：15828549
> 
> 赞同：0
> 
> 时间：2013-04-05T07:47:59.447
> 
> 标签：c#, python, rest, ssl-certificate, python-requests

我想在我的 REST-Service 上使用客户端证书进行身份验证。在使用我在 Firefox 中生成的证书测试配置后，我会说我的配置是正确的，因为我的服务中的身份验证按预期工作。现在，我必须将此证书实现到我的 python 脚本中。我正在使用 python 请求：

```
rsp = requests.put(url='{0}recorditems/{1}'.format(daemonConfig['service']['url'], recorditemOID)
, data=body, headers=headers
, cert=daemonConfig['daemon']['certPath'], verify=False) 
```

但是当我通过此方法发送请求并在 Visual Studio 中开始调试时，对象 Request.ClientCertificate.Certificate 的长度为 0；不包括证书。证书肯定存在于我的配置中指定的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:19:25.547

如果您有应该传递给`verify`not的证书的路径`cert`。`cert`接受一个元组。此外，通过设置`verify=False`您告诉请求`cert`完全忽略该参数。

# python - Python islice 正在读取相同的行

> ID：15828550
> 
> 赞同：2
> 
> 时间：2013-04-05T07:47:59.867
> 
> 标签：python, readfile, readlines

我有一个应该分析的大日志文件（> 1GB），所以我写了一个 python 程序。我已经使用过`islice`，所以我可以分块（10,000 行）读取文件，这样我的服务器就不会耗尽内存。

我已经在 stackoverflow 上查找了一些`islice`解决方案并实现了一个，但该程序无法按预期工作，因为 isclice 每次都读取相同的行（但在读取整个文件后正确停止......）。我不能使用`with open`，因为它带有 python 2.5，我有 python 2.4...

我的代码如下所示：

```
 n = 100000;     # n lines
    inf = open(fn, "r")
    while True:
        next_n_lines = list(islice(inf, n))
        if not next_n_lines:
            break
        out_fn = produce_clean_logfile(next_n_lines)
        a, t = main(out_fn)
        send_log(a,t) 
```

你知道出了什么问题吗？

提前致谢。问候，约翰。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:51:32.497

```
from itertools import islice
n = 2;     # n lines
fn = "myfile"
inf = open(fn, "r")
while True:
    next_n_lines = list(islice(inf, n))
    if not next_n_lines:
        break
    print next_n_lines 
```

在 python 2.5、2.6、2.7 上为我工作 => 我可以看到按顺序显示的行。

该错误肯定来自您的其他功能，您能更新您的问题吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:14:46.507

您可以为此使用*groupby*

```
from itertools import groupby, count
with open(filename, 'r') as datafile:
    groups = groupby(datafile, key=lambda k, line=count(): next(line)//10000)
    for k, group in groups:
        for line in group:
            ... 
```

# javascript - 如何在 JQuery 中保持倒数第二个活动

> ID：15828553
> 
> 赞同：0
> 
> 时间：2013-04-05T07:48:06.200
> 
> 标签：javascript, jquery, jquery-ui

我的 MVC 应用程序中有简单的选项卡控件

看法

```
 <div class="span12" id="test" style="width: 810px;">
        <ul class="nav nav-tabs">
            <li class="active" id="li1"><a href="/#tab1"  data-toggle="tab">New Stream1</a></li>
            <li><a id="addspan" href="/#C" data-toggle="tab">+</a></li>
        </ul>
        <div class="tabbable">
            <div class="tab-content" id="tabContent">
                <div class="tab-pane active" id="tab1">
                   tab content
                </div>

            </div>
        </div>
    </div>

<script type="text/javascript">
    $(function () {
        var count = 2;
        $('#addspan').click(function () {
            $('li:last').prev().after('<li id="li' + count + '"><a href="/#tab' + count + '"data-toggle="tab">New Stream</a></li>');
             $('li:last').removeClass("active");
            $('li:last').prev().addClass("active");

        });

    });
</script> 
```

在单击“addspan”或（+）li 之后，我在最后一个 li 之前动态添加了一个 li，所以我的查询是在单击（+）li 之后将“.active”类添加到该 li，但我想保持新添加li 很活跃，我该怎么办？

在javascript中添加以下代码后，我观察到的另一种情况

```
<script type="text/javascript">
        $(function () {
            var count = 2;
            $('#addspan').click(function () {
                $('li:last').prev().after('<li id="li' + count + '"><a href="/#tab' + count + '"data-toggle="tab">New Stream</a></li>');

                 //to keep newly added li active

                 $('li:last').removeClass("active");
                $('li:last').prev().addClass("active");

            });

        });
    </script> 
```

它工作正常，它将“.active”类添加到倒数第二个 li，但是在完成 javascript 函数后，它再次将“.active”类添加到最后一个 li，我不知道为什么会这样？

请让我知道如何将“.active”类设置为新添加的 LI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:57:36.743

你可以简单地这样做：

```
var $li = $('<li id="li' + count + '"><a href="/#tab' + count + '"data-toggle="tab">New Stream</a></li>');

// Remove the previous active li class
$('li.active').removeClass("active");

// Add active class to new li
$li.addClass("active"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:57:56.890

你可以试试这个：

```
var count = 2;
$('#addspan').click(function (e) {
   e.preventDefault();
   $('li').removeClass("active");
   $('li:last').prev().after('<li id="li' + count + '"><a href="/#tab' + count + '"data-toggle="tab">New Stream</a></li>');
   $('li:last').prev().addClass("active");
}); 
```

做这些：

1.  尝试停止默认行为`e.preventDefault()`
2.  删除类`.active`
3.  添加新的李
4.  然后分配`.active`班级

### [检查小提琴](http://jsfiddle.net/2Q6Pb/)

* * *

或者这个：

```
var count = 2;
$('#addspan').click(function (e) {
   e.preventDefault();
   $('li').removeClass("active");
   $('li:last').prev().after('<li class="active" id="li' + count + '"><a href="/#tab' + count + '"data-toggle="tab">New Stream</a></li>');
}); 
```

# android - 如何使 UI 像警报对话框及其按钮（如确定和取消）用作选项卡

> ID：15828556
> 
> 赞同：0
> 
> 时间：2013-04-05T07:48:13.027
> 
> 标签：android, ios

我想制作一个类似于单击事件时出现的警报对话框的 UI，并且该 UI 的按钮（例如确定、取消）应该像选项卡一样工作。好像我点击 tab1 它应该加载 tab1 的内容等等。实际上它应该看起来像一个标签活动，它比主要活动相对小。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:57:59.003

尝试使用[PopupWindow](http://developer.android.com/intl/ru/reference/android/widget/PopupWindow.html)。希望它的帮助

编辑 [使用带有自定义布局的 PopupWindow 的简单示例](http://android-er.blogspot.com/2012/03/example-of-using-popupwindow.html)

EDIT2 特别适用于 MoJo

popup_layout

```
 <LinearLayout
        android:id="@+id/popup_main"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            a android:id="@+id/tv_1"
            />

         <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            a android:id="@+id/tv_2"
            />
         <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            a android:id="@+id/btn_1"
            />
    </LinearLayout>^ 
```

活动 onClick 事件

```
private void initializedPopup()
{
try {
   LayoutInflater inflater = (LayoutInflater) ConfirmActivity.this
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    //Inflate the view from a predefined XML layout
    View layout = inflater.inflate(R.layout.popup_layout,
            (ViewGroup) findViewById(R.id.popup_main));
    // create a 300px width and 470px height PopupWindow
    pw = new PopupWindow(layout, 300, 470, true);
    // display the popup in the center
    pw.showAtLocation(layout, Gravity.CENTER, 0, 0);

    mText1 = (TextView) layout.findViewById(R.id.tv_1);
    mText1 = (TextView) layout.findViewById(R.id.tv_2);
    Button btn1 = (Button) layout.findViewById(R.id.btn_1);
    cancelButton.setOnClickListener(buttonClickListener );

} catch (Exception e) {
    e.printStackTrace();
}
}

private OnClickListener buttonClickListener = new OnClickListener() {
public void onClick(View v) {
    pw.dismiss();
}
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T07:54:48.547

尝试：

```
Dialog Dr=new dialog(this);
Dr.setcontentview(R.layout.main);
Dr.show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:58:32.030

像正常活动一样做。然后在你的**styles.xml中添加这个**

```
<style name="DialogTheme" parent="android:Theme.Dialog">
        <item name="android:windowNoTitle">true</item>
    </style> 
```

然后将此设置为您活动的主题

```
<activity
            android:name=".ActivityName"
            android:label="@string/DialogTheme" > 
```

# database - 在jsp struts2中重新加载页面时如何保存数据

> ID：15828559
> 
> 赞同：1
> 
> 时间：2013-04-05T07:48:20.543
> 
> 标签：database, list, jsp, struts2, hashmap

我已经从数据库加载数据`ArrayList`。然后我使用该数据进行更新过程。我正在搜索并将数据加载到`ArrayList`. 这是搜索时加载数据的代码。

```
System.out.println("In search job method");

    region ="TEST";
    PcinitialdataEjb pcinEjb=new PcinitialdataEjb(region);
    pcinitiladataList = new ArrayList<Pcinitialdata>();

    System.out.println(hiddentableRadioButtonValue+"**************************************************************************");

    if(idSearchType.equalsIgnoreCase("comRef"))
    {
        pcinitiladataList=pcinEjb.getDataForEstNumber("510.00/EBS/12/0031","Commercial");
        System.out.println(idSearchType);
    }
    else if(idSearchType.equalsIgnoreCase("constructRef"))
    {

        pcinitiladataList=pcinEjb.getDataForEstNumber("510.00/EBS/12/0031","customerRef");
    }
    else if(idSearchType.equalsIgnoreCase("projJobNo"))
    {

        pcinitiladataList=pcinEjb.getDataForEstNumber("510.00/EBS/12/0031","projNoJobNo");
    }

    Pcinitialdata aa=new Pcinitialdata();
    aa.setDecrp("doorwerfxcv");
    pcinitiladataList.add(aa);
    System.out.println(pcinitiladataList.toString());
    for(int i = 0; i < pcinitiladataList.size(); i++) {   

        if(i==0)
        System.out.print(pcinitiladataList.get(i));

        if(i==1)
        System.out.print((String)pcinitiladataList.get(i).getDecrp());
    } 
```

此代码完美运行。我的问题是在我将数据加载到 jsp 表之后，然后我使用单选按钮选择原始数据。然后我单击加载按钮将数据加载到界面。但我的问题是当我单击加载按钮时，pcinitialdata 列表变为空。这是加载按钮单击的代码。

```
public String loadValuesForPage()
{
    if(pcinitiladataList.equals(null))
    {

        String resrult=searchJob();
    }

    for(int i = 0; i < pcinitiladataList.size(); i++) {   
        if((hiddentableRadioButtonValue.equalsIgnoreCase(pcinitiladataList.get(i).getEstNo())))
        {

            Pcinitialdata estNoObject=new Pcinitialdata();
            estNoObject=pcinitiladataList.get(i);

            fileNo=estNoObject.getEstNo();
        }
    }

    return SUCCESS;
} 
```

在完成更新过程之前如何保存数据？

当我单击更新按钮时，我的 arrayList 变为空。在我完成更新过程之前，有什么方法可以保存这些数据。我可以使用 Hoshmap 来做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:40:56.833

简单的！将您的数据存储到会话中，并在更新完成后从会话中删除您的数据。

在此示例中，我将带有名称的数组列表存储`myarrayList` 到带有键名称的会话中 `holdarrylist`

```
 if ( !session.containsKey(holdarrylist) ) 
{
// Place the arraylist into the session  eg. myarrayList  
session.put(myarrayList, holdarrylist); //myarrayList is your arraylist ato be kept in the session with the name  holdarrylist 
} else {

    ArrayList<Integer> list = (ArrayList<Integer>) session.get("holdarrylist");
     list.add( 1 /* Do here what ever you want */);
// Retrieve session data

    --------------
    //--do your updation work----
    //after remove the arraylist from session  
    //session.remove("holdarrylist");
 } 
```

# ios - 弹出视图控制器后出现的标签栏

> ID：15828568
> 
> 赞同：6
> 
> 时间：2013-04-05T07:48:56.463
> 
> 标签：ios, objective-c, xcode4.5

我正在开发一个 iOS 应用程序，在该应用程序中，我使用的是标签栏控制器。并且从标签栏控制器中导航到另一个视图控制器。在推送视图控制器之前，我正在设置该控制器的属性

```
viewController.hidesBottomBarWhenPushed = YES; 
```

我正在导航到另一个底部有标签栏的视图控制器。

问题是当我将视图控制器弹出回视图控制器时，选项卡栏也会出现在该视图中。弹出视图控制器时有没有办法隐藏标签栏？

如果有人可以帮助我解决这个问题，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:54:01.197

在这种情况下 viewWillAppear 方法将很有用。在您的 firstviewcontroller 中输入此代码

```
-(void)viewWillAppear:(BOOL)animated
{
   self.tabBarController.tabBar.hidden = YES;
} 
```

因此，当 secondviewcontroller 弹出时，它将调用此方法，并且您的底栏将被隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:33:07.587

**单击后退按钮时放置它**

```
[self.tabBarController.tabBar setHidden:YES];

[UIView animateWithDuration:0.5
                     animations:^{
                         self.tabBarController.tabBar.frame = CGRectMake(self.tabBarController.tabBar.frame.origin.x, self.tabBarController.tabBar.frame.origin.y+self.tabBarController.tabBar.frame.size.height, self.tabBarController.tabBar.frame.size.width, self.tabBarController.tabBar.frame.size.height);
                 } 
```

**我还有一个答案...**

**将这两种方法放在所有 ViewController** 中并**根据您的要求管理**`BOOL` **变量** `self.hidesBottomBarWhenPushed``YES``NO`

 **```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    self.hidesBottomBarWhenPushed = YES;
}
- (void)viewDidDisappear:(BOOL)animated
{   
    self.hidesBottomBarWhenPushed = NO;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T04:14:46.183

您可以改为在选项卡栏控制器上显示第二个视图控制器。如果你想让第二个视图控制器有一个导航栏，你可以把它放在一个新的导航控制器中。

如果这种方式不能解决您的问题，您可以构建一个自定义标签栏控制器，以便它可以位于导航控制器内。您可以将第二个视图控制器推送到该导航控制器。要创建自定义标签栏控制器，您可以参考[Apple 文档中的创建自定义容器视图控制器](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html)。我认为它在 iOS 5 及更高版本上运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-08T09:32:11.043

取决于您的应用程序的设计，您可以将中心对象设置为导航控制器的委托。并隐藏/显示标签栏。这个问题隐藏了[BottomBarWhenPushed，但是当弹出时](https://stackoverflow.com/questions/5569961/hidesbottombarwhenpushed-but-when-popped)也提供了一个解决方案，但是我不喜欢。顺便说一句，当用户浏览到第二级或更深层次时，再次显示底栏并不常见。**

# windows-8 - 在 Construct 2 的帮助下测试 Windows 8 应用程序时出错

> ID：15828570
> 
> 赞同：0
> 
> 时间：2013-04-05T07:49:12.783
> 
> 标签：windows-8, construct-2

我在 Construct 2 中尝试了一个空项目并将其导出为 Windows 8 应用程序项目，但出现此错误：

![在此处输入图像描述](https://i.stack.imgur.com/BmCVE.png)

不知道它到底是什么意思，也不知道该怎么做，一个线索会很好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:55:31.223

从控制面板打开“查看本地服务”（Cmd+W 并键入“本地服务”作为快捷方式）并启动或重新启动名为“Windows 防火墙”的服务。

# sql - postgresql：在标题上强制引用

> ID：15828574
> 
> 赞同：3
> 
> 时间：2013-04-05T07:49:22.857
> 
> 标签：sql, postgresql, csv, header, quote

我尝试在标题上强制引用。

```
Copy (
    SELECT *
    FROM "table"
)
TO <path> CSV HEADER FORCE QUOTE *; 
```

有了这个，我得到了标题，除了标题之外，所有的都用引号引起来。所以我想要完全相反的。

```
TO <path> CSV HEADER FORCE QUOTE HEADER; 
```

和

```
TO <path> CSV FORCE QUOTE HEADER; 
```

不工作。

知道如何管理这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T08:36:26.083

`COPY`至少在 9.2 和更早的版本中，PostgreSQL 的支持中没有这样的选项。正如您已经观察到的，标题没有被引用 - 或者更确切地说，它们始终处于自动引用模式，因此只有在包含分隔符或其他特殊字符时才会引用它们：

```
\copy (SELECT 1 AS "First Value", 2 AS "Second value", 3 AS "Third value, with comma") TO '/tmp/test.csv' WITH (FORMAT CSV, HEADER TRUE, FORCE_QUOTE *); 
```

产生：

```
First Value,Second value,"Third value, with comma"
"1","2","3" 
```

您将需要通过一个更灵活的外部工具来转换 CSV，该工具了解 CSV 在使用中的所有奇怪和美妙的好处，或者使用外部工具直接生成它。

在这种情况下，我通常编写一个简单的 Perl 或 Python 脚本，使用 perl 的 DBI 和 DBD::Pg 或 Python 的 psycopg2 查询数据库，并使用适当的 CSV 库来输出所需的 CSV 方言。这样的脚本往往很简单，并且它们通常比`\copy`CSV 然后解析和重写它更有效。

# ios - 在ios中点击后退按钮后调用什么方法

> ID：15828575
> 
> 赞同：7
> 
> 时间：2013-04-05T07:49:24.830
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller

我有 2 个带有导航控制器的视图控制器。当我`[self.navigationController popViewControllerAnimated:YES];`在第二个中使用时 - 第一个打开但 viewDidLoad 中的方法没有调用。在这种情况下，第一个控制器中调用的方法是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-05T07:55:35.233

导航控制器`viewWillAppear:`在将其视图放在屏幕上之前和`viewDidAppear:`之后发送到视图控制器。

`viewWillAppear:`在and里面`viewDidAppear:`，视图控制器可以检查`self.isMovingToParentViewController`. 如果`isMovingToParentViewController`是`YES`，则视图控制器首先被添加到导航控制器中（可能是因为它是导航控制器的根视图控制器，或者因为它正在被推送）。如果`isMovingToParentViewController`是`NO`，则视图控制器已经在导航控制器的堆栈中，并且正在弹出另一个视图控制器以显示它。

阅读[类参考](https://developer.apple.com/documentation/uikit/uiviewcontroller#1652793)[中的“处理与视图相关的通知”`UIViewController`](https://developer.apple.com/documentation/uikit/uiviewcontroller#1652793)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:50:39.977

在这种情况下，`viewWillAppear`方法将被调用。

```
-(void)viewWillAppear:(BOOL)animated
{

} 
```

# networking - xserver 未显示 Xsensor 的结果

> ID：15828577
> 
> 赞同：2
> 
> 时间：2013-04-05T07:49:37.553
> 
> 标签：networking, wireless, sensors, tinyos, nesc

我已经为 420cc 构建了示例 Xsensor，然后将其插入并将传感器板放在上面，在串行板的另一侧，我将 Xsniffer（TOSBase）构建到我需要将其放在 520MiP 串行 USB 上的微尘上。

要查看从 mote 1 发送到 mote 2 的消息，我尝试打开 cygwin 终端并键入，`xserve -device=com4`然后打开串行设备，但没有任何显示！

我尝试通过（XMeshBase）更改（TOSBase）以查看这是否有用，但是（XMeshBase）的这个mote在串行USB上使用它，但xserve上仍然没有输出。

注意：当我尝试打开 MoteVeiw 输出终端时，它给我它收到“收到心跳”但没有字段或数据！

我使用 Xmesh 发送数据包，但我得到了这个信息，我不明白这些数据的含义？我觉得他们是一样的！

这出现了什么？![Xserver](https://i.stack.imgur.com/XbZMt.png)

# jquery - jQuery 代码在不同服务器上的工作方式不同

> ID：15828578
> 
> 赞同：1
> 
> 时间：2013-04-05T07:49:37.613
> 
> 标签：jquery

我有以下 jQuery 片段：

```
$('#something').hover(
                function () {
                  $(this).stop().animate({'width':'220px'},1000, 'easeOutExpo').css('overflow','hidden'); 
                  $('.faded').stop().fadeTo('slow', 1);
                },
                function () {
                  $(this).stop().animate({'width':'40px'},1000, 'easeOutExpo').css('overflow','visible'); 
                  $('.faded').stop().fadeTo('slow', 0);
                }
           ); 
```

对于以下 HTML：

```
< li id="something">< a href="someurl" title="a thing">< span class="faded">some text< /span>< /a>< /li> 
```

这在我的本地服务器和我的在线服务器上就像魅力一样，但在客户端服务器上，这段代码被完全忽略，只有 css :hover 可以代替，即使同一个 .js 文件中的其他函数正常工作也是如此。所以任何人都可以帮助为什么会这样？

# entity-framework - 如何处理继承表上的级联删除？

> ID：15828579
> 
> 赞同：0
> 
> 时间：2013-04-05T07:49:40.177
> 
> 标签：entity-framework, inheritance, entity-framework-5, cascade, ef-model-first

在使用继承表时，我遇到了 ON DELETE CASCADE 的问题。

我有以下表格（模型优先） ![数据库模型](https://i.stack.imgur.com/11yEV.png)

现在，如果我想删除 Entity1 中的一个条目。

```
using (var ctx = new MyEntities())
{
   var first = ctx.Entity1Set.First();
   ctx.DeleteObject(first);
   ctx.SaveChanges();
} 
```

简单...但是 SaveChanges 引发以下异常。

> DELETE 语句与 REFERENCE 约束 FK_EntityA_inherits_BaseEntity 冲突。冲突发生在数据库“MyDB”、表“dbo.BaseEntitySet_EntityA”、列“Id”中。语句已终止。

我该如何解决？

* * *

## 更新

我注意到 VS2010 和 VS2012 模型设计器输出 SQL 的方式有所不同。

**VS2010**：

```
-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityA'
ALTER TABLE [dbo].[BaseEntitySet_EntityA]
ADD CONSTRAINT [FK_EntityA_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [dbo].[BaseEntitySet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
GO

-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityB'
ALTER TABLE [dbo].[BaseEntitySet_EntityB]
ADD CONSTRAINT [FK_EntityB_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [dbo].[BaseEntitySet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
GO 
```

**删除**通知不采取行动

 ****VS2012**

```
-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityA'
ALTER TABLE [BaseEntitySet_EntityA]
ADD CONSTRAINT [FK_EntityA_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [BaseEntitySet]
        ([Id])
    ON DELETE CASCADE ON UPDATE NO ACTION;
GO

-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityB'
ALTER TABLE [BaseEntitySet_EntityB]
ADD CONSTRAINT [FK_EntityB_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [BaseEntitySet]
        ([Id])
    ON DELETE CASCADE ON UPDATE NO ACTION;
GO 
```

关于**删除级联的通知**

那是相当有意义的...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:53:54.163

Visual Studio 2010 ADO 实体设计器中似乎存在一个错误，导致生成不正确的 SQL。

**VS2010：**

```
-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityA'
ALTER TABLE [dbo].[BaseEntitySet_EntityA]
ADD CONSTRAINT [FK_EntityA_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [dbo].[BaseEntitySet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
GO

-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityB'
ALTER TABLE [dbo].[BaseEntitySet_EntityB]
ADD CONSTRAINT [FK_EntityB_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [dbo].[BaseEntitySet]
        ([Id])
    ON DELETE NO ACTION ON UPDATE NO ACTION;
GO 
```

**删除**通知不采取行动

 ****VS2012**

```
-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityA'
ALTER TABLE [BaseEntitySet_EntityA]
ADD CONSTRAINT [FK_EntityA_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [BaseEntitySet]
        ([Id])
    ON DELETE CASCADE ON UPDATE NO ACTION;
GO

-- Creating foreign key on [Id] in table 'BaseEntitySet_EntityB'
ALTER TABLE [BaseEntitySet_EntityB]
ADD CONSTRAINT [FK_EntityB_inherits_BaseEntity]
    FOREIGN KEY ([Id])
    REFERENCES [BaseEntitySet]
        ([Id])
    ON DELETE CASCADE ON UPDATE NO ACTION;
GO 
```

关于**删除级联的通知**

将这些更改应用于数据库后，我可以毫无问题地删除。****

# html - HTML5 拖放文本：preventdefault vs move

> ID：15828580
> 
> 赞同：0
> 
> 时间：2013-04-05T07:49:43.650
> 
> 标签：html, drag-and-drop, contenteditable

我有两个带有格式化内容的 contenteditable div（例如，其中的段落带有粗体/斜体文本等），我想将选定的文本从一个移动到另一个。它本身运行良好，但我想在删除移动的文本时“清理”它，例如删除任何格式（“<b>hello</b>”将变为“hello”）。所以我决定像这样使用 HTML5 drop 事件：

```
 dropHandler = function(e) {
    text = e.dataTransfer.getData('text');

    if (document.caretRangeFromPoint)
    {
      range = document.caretRangeFromPoint(e.clientX, e.clientY);
    }
    else if (document.createRange && oe.rangeParent)
    {
      range = document.createRange();
      range.setStart(oe.rangeParent, oe.rangeOffset);
    }

    range.insertNode(document.createTextNode(text));

    return false;
  }; 
```

它可以工作并将“已清理”（纯）文本放置在正确的位置，但不会删除源内容可编辑 div 中最初选择的文本 - 因为默认行为被“return false”阻止 - 所以所需的文本移动变为文本副本。如何在预处理拖放文本的同时实现默认文本移动行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:29:32.847

使用[Selection](https://developer.mozilla.org/en/docs/DOM/Selection) API（IE <= 8 除外，它不支持）：

```
dropHandler = function(e) {
  text = e.dataTransfer.getData('text');

  if (document.caretRangeFromPoint)
  {
    range = document.caretRangeFromPoint(e.clientX, e.clientY);
  }
  else if (document.createRange && oe.rangeParent)
  {
    range = document.createRange();
    range.setStart(oe.rangeParent, oe.rangeOffset);
  }

  // Keep a reference to the text node so we can select it later
  var textNode = document.createTextNode(text);
  range.insertNode(textNode);

  var sel = window.getSelection();
  sel.deleteFromDocument();
  range.selectNodeContents(textNode);
  sel.removeAllRanges();
  sel.addRange(range);

  return false;
}; 
```

# php - jquery复选框的一些想法

> ID：15828582
> 
> 赞同：-1
> 
> 时间：2013-04-05T07:49:49.570
> 
> 标签：php, jquery, html, performance

我试图在我的查询中制作一个禁用计算的复选框，这是我的

表格代码：

```
<input type="hidden" name="stud_no[]" value="<?php echo
$row['student_no'];?>"> <input type="text" name="prelim[]"
value="<?php echo $row['prelim_pts']?>" id="prelim_<?php echo
$row['student_no'];?>" class="txtprelim" ></td> <td><input
type="text" name="midterm[]" value="<?php echo
$row['midterm_pts']?>" id="midterm_<?php echo $row['student_no'];?>"
class="txtmidterm" ></td> <td> <input type="text" name="final[]"
value="<?php echo $row['finals_pts']?>" id="final_<?php echo
$row['student_no'];?>" class="txtfinal" ></td> <td> <input
type="text" name="average[]" id="average_<?php echo
$row['student_no']; ?>" value="<?php echo $row['average_pts']; ?>"
readonly="readonly"> </td> <td><input type="checkbox"
name="disable[]" value="<?php echo $row['disable_comp'];?>"
class="dis"> </td> 
```

现在是我的 jquery 代码：

```
$(document).ready(function(){
                p="";       m="";       f="";

                $(".txtprelim").keyup(function(){           var id = $(this).attr("id").replace("prelim_","");
                p = $("#prelim_" + id).val();
                m = $("#midterm_" + id).val();
                f = $("#final_" + id).val();            Compute( p,m,f, id);            //alert($(".txtprelim").val());
                });
            $(".txtmidterm").keyup(function(){
                var id=$(this).attr("id").replace("midterm_","");
                    p = $("#prelim_" + id).val();
                    m = $("#midterm_" + id).val();
                    f = $("#final_" + id).val();

                Compute( p, m, f,id);           //alert($(".txtmidterm").val());
            });
            $(".txtfinal").keyup(function(){
                    var id=$(this).attr("id").replace("final_","");
                        p = $("#prelim_" + id).val();
                        m = $("#midterm_" + id).val();
                        f = $("#final_" + id).val();

                    Compute( p, m, f, id);

                    //alert($(".txtfinal").val());

                    //alert($("f").val());      }); 

        function Compute(p , m , f , studno){       //  alert("p="+p+" m="+m+"
f="+f);             var average="";
             average = parseFloat(p * 0.3) + parseFloat(m * 0.3 )+ parseFloat(f * 0.4);             $("#average_" +
studno).val(average.toFixed());

                //alert(average);       }

                    $("input[type='dis']").change ( function(){
                        var val =$(this).val();
                        if($(this).is(':checked'))
                        {
                            alert($(this).val());
                        }

                    });

                }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:54:21.980

So from what I understood this code should work better. Also in your last function there is no `type='dis'`. That's a `class`

```
$(document).ready(function() {
        p = "";
        m = "";
        f = "";

        var computeValues = function(){
            var id = $(this).attr("id").replace("prelim_", "").replace("midterm_", "").replace("final_", "");
            p = $("#prelim_" + id).val();
            m = $("#midterm_" + id).val();
            f = $("#final_" + id).val();
            Compute(p, m, f, id);
        };

        $("input").bind('keyup', computeValues);

        function Compute(p, m, f, studno) {
            var average;
            average = parseFloat(p * 0.3) + parseFloat(m * 0.3) + parseFloat(f * 0.4);
            $("#average_" + studno).val(average.toFixed());     
        }

        $(".dis").change(function() {
            var val = $(this).val();
            if ($(this).is(':checked')) {
                $("input").unbind('keyup', computeValues);
            } else {
                $("input").bind('keyup', computeValues).trigger('keyup');
            }
        });
    }); 
```

And a fiddle to test it [http://jsfiddle.net/Spokey/nhcsT/](http://jsfiddle.net/Spokey/nhcsT/)

UPDATDE:

You can add an `<input type="hidden" id="changeme" value="0">` in your form and when the user selects the `checkbox` the value of the `hidden input` will change to `1`

```
$(".dis").change(function() {
                var val = $(this).val();
                if ($(this).is(':checked')) {
                    $("input").unbind('keyup', computeValues);
                    $("#changeme").val('1');
                } else {
                    $("input").bind('keyup', computeValues).trigger('keyup');
                    $("#changeme").val('0');
                }
            }); 
```

# c - pthread导致的段错误？

> ID：15828593
> 
> 赞同：2
> 
> 时间：2013-04-05T07:50:27.477
> 
> 标签：c, segmentation-fault, pthreads

我已经在墙上敲了几个小时，试图找出导致这个段错误的原因。

我发现段错误始终`pthread_mutex_lock(lock)`在线 (38) 上发生。但是，我在锁周围放置了两个打印语句，其中只有一个打印，这是我断定在该指令处发生段错误的理由。

我是否正确使用了互斥锁，还是我的数组有`(buffer[]`误`numbermarker[]`？

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

int* numbermarker = NULL;
int* buffer = NULL;
int pullposition = 0;
int placeposition = 1;
pthread_mutex_t *lock;
int ceiling;

/*This method places one of the primes in the buffer. It 
offers a safe way to manage where the next value will be placed*/
void placevalue(int value)
{
    buffer[placeposition] = value;
    placeposition++;
}

/*This method pulls the next prime and increments to the next prime in the list*/
int takevalue()
{
    pullposition++;
    return buffer[pullposition-1];
}

void* threadmethod()
{   
    int k;
    int l;
    int firstval;
    while(1)
    {
        while(numbermarker[buffer[pullposition]-1]==0)
        {   
            printf("flag1 \n");
            pthread_mutex_lock(lock);
            printf("flag2 \n");
              numbermarker[buffer[pullposition]-1] = 1;
              l = takevalue();
            pthread_mutex_unlock(lock);
            firstval = 1;
            for(k=l+1;k<=ceiling;k++)
            {
                if(k%l != 0)
                {
                    if(firstval)
                    {
                        placevalue(k);
                        firstval = 0;
                    }
                }
                else
                {
                    numbermarker[k-1] = 1;
                }
            }
        }
    }
}

int main()
{
int numthreads;
int i;

printf("Enter number of threads: \n");
scanf("%d", &numthreads);

printf("Enter the highest value to check \n");
scanf("%d", &ceiling);

    /* This will hold 1's and 0's.
        1 = number has been checked or is
            confirmed not to be a prime
        0 = number is a possible prime

    The idea behind these values is that the next
    prime can always be identified by the 0 with
    the lowest index*/
numbermarker = (int*)malloc(sizeof(int)*(ceiling));

    /*This will hold the primes as they are found*/
buffer = (int*)malloc(sizeof(int)*(ceiling));

for(i=0; i<ceiling; i++)
{
    if(i<1)
    {
        numbermarker[i] = 1;
    }
    else
    {
        numbermarker[i] = 0;
    }

    buffer[i]=0;
    printf("%d \n",numbermarker[i]);
}

placevalue(2);

pthread_t **tid = (pthread_t **) malloc(sizeof(pthread_t *) * numthreads);

for(i=0;i<numthreads;i++)
{

    tid[i] = (pthread_t *) malloc(sizeof(pthread_t));
}

for(i=0;i<numthreads;i++)
{

    if(pthread_create(tid[i],
              NULL,
              threadmethod,
              NULL))
    {

        printf("Could not create thread \n");
        exit(-1);
    }
}       

int not_done = 1;
int sum;
while(not_done)
{
    sum = 0;    
    for(i=0; i<ceiling; i++)
    {
        sum += numbermarker[i];
    }
    if(sum == ceiling)
      not_done = 0;
}
for(i=0;i<numthreads;i++)
{
    if(pthread_join(*tid[i], NULL))
    {
        printf("Error Joining with thread \n");
    }
    free(tid[i]);
}
free(tid);

for(i=0;i<ceiling;i++)
{
    if(buffer[i] != 0);
        printf("%d \n", i);
}
free(buffer);
free(numbermarker);
buffer=NULL;
numbermarker=NULL;

return(0); 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T07:52:40.813

`lock`是一个未初始化的指针。您需要分配内存，然后在锁定互斥锁之前对其进行初始化。最简单的解决方法是改变

```
pthread_mutex_t *lock; 
```

至

```
pthread_mutex_t lock = PTHREAD_MUTEX_INITIALIZER; 
```

和（因为`lock`不再是指针）

```
pthread_mutex_lock(lock);
....
pthread_mutex_unlock(lock); 
```

至

```
pthread_mutex_lock(&lock);
....
pthread_mutex_unlock(&lock); 
```

# javascript - 如何使用 ASP / Javascript 在 pdf 文件上移动浏览器的滚动条？

> ID：15828605
> 
> 赞同：0
> 
> 时间：2013-04-05T07:50:48.173
> 
> 标签：javascript, html, pdf, asp-classic

如果有免费的 apis / 或其他项目，我正在寻找一些时间，以便**将浏览器的滚动条移动**到引用**pdf**文档的项目的位置。我想将用户重定向到我网站的 pdf 文件（“/Help.pdf”）直接到**所需的位置**。（例如，在标题或页码上）而不是在位置（x 或 y）上因屏幕分辨率而异。 ![在此处输入图像描述](https://i.stack.imgur.com/DglFA.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:52:20.243

您可以将参数传递给链接：

`<A HREF="http://www.example.com/myfile.pdf#glossary">`转到词汇表

`<A HREF="http://www.example.com/myfile.pdf#page=3">`转到第 3 页

[http://helpx.adobe.com/acrobat/kb/link-html-pdf-page-acrobat.html](http://helpx.adobe.com/acrobat/kb/link-html-pdf-page-acrobat.html)

# asp.net - 即使 Request.IsAuthenticated = true（使用 Windows 身份验证），Asp 也会重定向到 Login

> ID：15828607
> 
> 赞同：1
> 
> 时间：2013-04-05T07:50:58.393
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-membership

我有一个在 WAN 和 LAN 中运行的 web 应用程序。相同的代码在不同的 Web 应用程序中运行。在 WAN 中，我已将其配置为使用表单身份验证。它无缝地工作。但是 LAN 应用程序配置为使用 Windows 身份验证。

现在发生的情况是，网站说“Hello DOMAIN\TestUser”，这表明，

*   Request.IsAuthenticated 必须为真
*   User.Identity.Name 设置为正确的用户

**但是**：我总是在“帐户/登录”页面上找到自己。澄清一下：我的登录页面正在使用执行上述“Request.IsAuthenticated”的通用布局模板。

**我的问题**：当身份验证明显成功时，为什么我被重定向到登录页面？我该怎么做才能让它发挥作用？:)

我想这是我配置的关键部分：

```
 <system.web>
    <authentication mode="Windows">
      <forms loginUrl="~/Account/Login" timeout="2880" />
    </authentication>
    <membership defaultProvider="SimpleMembershipProvider">
      <providers>
        <clear />
        <add name="SimpleMembershipProvider" type="WebMatrix.WebData.SimpleMembershipProvider, WebMatrix.WebData" />
      </providers>
    </membership>
  </system.web> 
```

此 Web 应用程序的 IIS 设置为启用 Windows 身份验证并禁用所有其他身份验证方法。

（我正在使用 ASP.Net MVC 4）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:01:25.093

之前遇到过这种情况，并且必须将我的项目运行良好的本地 IIS 部署与部署在服务器上的进行比较。事实证明，有一些额外的 DLL**不应该被部署**。不过，我的情况与您的情况有些不同。该项目在我的本地机器上运行，但不在 LAN 环境中。需要删除的额外文件：

*   WebMatrix.Data.dll
*   WebMatrix.WebData.dll

我希望它与您的情况相同，这是一个难以解决的部署问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:33:58.350

取出`<forms loginUrl="~/Account/Login" timeout="2880" />`线和`<membership />`部分可能有帮助吗？

这会给你留下：

```
<system.web>
    <authentication mode="Windows"></authentication>        
</system.web> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:11:11.623

我在这里找到了解决方案： [http](http://martinnormark.com/asp-net-mvc-3-windows-authentication-problem-redirects-to-account-login) ://martinnormark.com/asp-net-mvc-3-windows-authentication-problem-redirects-to-account-login 在花了几个小时谷歌搜索后...

幸运的是，答案非常简单：将这两个属性添加到您的应用设置中：

```
 <appSettings>
    <add key="autoFormsAuthentication" value="false" />
    <add key="enableSimpleMembership" value="false"/>
  </appSettings> 
```

对我来说，这似乎是一种非常糟糕的做法……但是，它确实有效。

# asp.net - Datapager 恢复到原始数据

> ID：15828609
> 
> 赞同：0
> 
> 时间：2013-04-05T07:51:01.560
> 
> 标签：asp.net, vb.net, listview

我创建了一个链接到数据库的搜索页面，当页面加载时，我使用 VB Codebehind 设置它`SqlSelectCommand`，`ListView`因此它返回 0 结果，当客户端搜索项目时，我将 Sql 选择更改为`LIKE '%search%'`.

这一切都很好，但发生的情况是，当您单击第 2 页时，它会恢复为原始 sql 语句

我正在使用一个`Label`标题，我也根据搜索键动态更改以确保将数据返回到页面

你可以在这里预览我的网站 [http://www.barkingdog.co.za/asp/Search1.aspx](http://www.barkingdog.co.za/asp/Search1.aspx)

同样的问题在Office页面上，虽然我用sql select中的数据开始页面，但是当我点击例如。经济然后尝试转到第2页它显示原始内容的第2页

先感谢您

**VB**

```
Protected Sub SearchBox_TextChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles SearchBox.TextChanged
    Dim nval As String
    nval = Searchbox.Text
    BreadCrumb.Text = "Results for " + nval

    AllProductsOff.SelectCommand = "SELECT * FROM [cxpproducts] WHERE [Range]  LIKE '%" & nval & "%'"
End Sub

Protected Sub SearchButton_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles SearchButton.Click
    Dim nval As String
    nval = Searchbox.Text
    BreadCrumb.Text = "Results for " + nval

    AllProductsOff.SelectCommand = "SELECT * FROM [cxpproducts] WHERE [Range]  LIKE '%" & nval & "%'"
End Sub 
```

**ASP**

```
 <asp:TextBox ID="SearchBox" runat="server" 
    AutoPostBack="True"></asp:TextBox>

  <asp:Button ID="SearchButton" runat="server" 
    Text="Search" PostBackUrl="./Search1.aspx" style="margin-top: 0px" /> 
```

**列表显示**

```
 <LayoutTemplate>
   <div style="" align="center">
     <asp:DataPager ID="DataPager2" runat="server">
       <Fields>
         <asp:NextPreviousPagerField ButtonType="Link" ShowFirstPageButton="True" 
                        ShowNextPageButton="True" ShowPreviousPageButton="True" NextPageText=">>" LastPageText="Last" PreviousPageText="<<" />
         <asp:NumericPagerField />
         <asp:NextPreviousPagerField ButtonType="Link" ShowLastPageButton="True" 
                        ShowNextPageButton="False" ShowPreviousPageButton="False" />
       </Fields>
     </asp:DataPager>
   </div>
   <div ID="itemPlaceholderContainer" runat="server" class="style25">
     <span runat="server" id="itemPlaceholder" />
   </div>
   <div style="" align="center">
     <asp:DataPager ID="DataPager1" runat="server">
       <Fields>
         <asp:NextPreviousPagerField ButtonType="Button" ShowFirstPageButton="True" 
                        ShowNextPageButton="False" ShowPreviousPageButton="False" NextPageText=">>" PreviousPageText="<<" />
         <asp:NumericPagerField />
       </Fields>
     </asp:DataPager>
   </div>
 </LayoutTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:40:18.710

我只是在你的列表视图分页中猜测这个问题。请检查您在重新绑定 PagePropertiesChanging 事件上的列表视图时使用的查询，如下所示。

```
protected void ListView1_PagePropertiesChanging(object sender, PagePropertiesChangingEventArgs e)
{
    //set current page startindex, max rows and rebind to false
    lvDataPager1.SetPageProperties(e.StartRowIndex, e.MaximumRows, false);

    //rebind List View
    BindListView();
} 
```

请在以下链接中找到有关 Listview 中分页的更多详细信息。

[http://dotnet.dzone.com/articles/paging-listview-using](http://dotnet.dzone.com/articles/paging-listview-using)

# html - 设置单选按钮的样式

> ID：15828612
> 
> 赞同：0
> 
> 时间：2013-04-05T07:51:20.187
> 
> 标签：html, css

我想设置复选框的样式。我可以使用以下 HTML 标记和 CSS 来做到这一点。

但是问题是我有一些不同的 HTML 标记，我无法更改。无法更改的原因是它是由插件生成的，所以我需要编辑核心文件来更改它，我不想这样做。

那么如何在下面的 HTML 中添加相同的样式。

**工作 HTML：**

```
<input type="radio" id="radio">
<label for="radio"></label> 
```

**所需的 HTML：**

```
<li>
    <input id="option-11" type="radio" value="11">
    <label for="option-11">Option one</label>
</li> 
```

如您所见，虽然标记相似，但在上面的标签中用于显示文本。

**CSS：**

```
input[type="radio"], input[type="checkbox"] {
    display: none;
}

input[type="radio"] + label{
    background:url('http://refundfx.com.au/uploads/image/checkbox_empty.png');
    padding:0;
    display: inline-block;
    width:20px;
    height:20px;
}

input[type="radio"]:checked + label {
    background:url('http://refundfx.com.au/uploads/image/checkbox_full.png');
} 
```

**演示：http:** [//jsfiddle.net/JPSLm/](http://jsfiddle.net/JPSLm/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T08:10:16.477

它适用于您的代码，我不知道问题出在哪里。

[http://jsfiddle.net/sGqsL/](http://jsfiddle.net/sGqsL/)

HTML

```
<li>
    <input type="radio" id="radio" name="radiogroup"/>
    <label for="radio"></label>
</li> 
```

和 CSS

```
input[type="radio"], input[type="checkbox"] {
    display: none;
}

input[type="radio"] + label{
    background:url('http://refundfx.com.au/uploads/image/checkbox_empty.png');
    padding:0;
    display: inline-block;
    width:20px;
    height:20px;
}

input[type="radio"]:checked + label {
    background:url('http://refundfx.com.au/uploads/image/checkbox_full.png');
}

li {
    list-style-type: none;
} 
```

# google-app-engine - 使用 JSON 数据学习 Google Prediction API

> ID：15828616
> 
> 赞同：1
> 
> 时间：2013-04-05T07:51:29.780
> 
> 标签：google-app-engine, google-prediction

我发现了一些使用 Google Prediction API 的示例，但示例中只使用了 CSV 数据。我想向 Prediction API 提供这样组织的数据：

```
[{
    number: 1,
    type: 0,
    channels: [
        [1, 5, 3, ...], 
        [7, 1, 3, ...], 
        [1, 23, 7, ...], 
        [5, 4, 3, ...], 
        [1, 3, 3, ...], 
        [6, 4, 3, ...]]
}, ...] 
```

是否可以使用此类数据来学习模型，或者我只能使用 CSV？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T18:20:18.217

不可以。预测 API 目前仅支持 csv 格式。您可以轻松编写一个脚本来遍历 JSON 数组中的所有实例并将它们转换为逗号分隔的值。

# python - openerp 客户树视图

> ID：15828617
> 
> 赞同：0
> 
> 时间：2013-04-05T07:51:29.983
> 
> 标签：python, xml, treeview, openerp

这是我的模块代码，我继承了 res.partner 表并添加了一个列 partner_ref。我需要的是在我的项目中，我必须显示哪个客户是由谁推荐的。以及当前客户推荐的客户名单。

这是我的表定义：

```
from osv import fields, osv
import logging
_logger = logging.getLogger('realty')
class cust_ref(osv.osv):
    _description = "Reference"
    _inherit = 'res.partner'
    _columns = {
       'partref_id' : fields.many2one('res.partner', 'Referred by', required=False),
    }
cust_ref() 
```

这是xml代码：

```
<?xml version="1.0"?>
<insignierp>
        <data>
            <record id="partner_reference_ref_form" model="ir.ui.view">
                <field name="name">realty.res.partner.form.inherit</field>
                <field name="model">res.partner</field>
                 <field name="arch" type="xml"> 
                    <xpath expr="/form/notebook/page[@string='Accounting']" position='after'>
                        <page string='References'>

                        </page>
                    </xpath>
                 </field> 
            </record>
        </data>
</insignierp> 
```

![在此处输入图像描述](https://i.stack.imgur.com/i3ieO.png)

现在，我在这个参考页面中我需要在树视图中列出这个客户推荐的客户列表。我确实知道如何实现这一点。指导我解决这个问题。或任何建议和想法都会非常有帮助。谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:48:46.403

您必须创建另一个字段 one2many 以获取合作伙伴引用的合作伙伴列表。像：

```
'partref_id': fields.many2one('res.partner', 'Related Company'),
'ref_partner_ids': fields.one2many('res.partner', 'partref_id', 'Refrence partner'), 
```

并且您必须在您的视图中显示此 ref_partner_ids，然后通过“partref_id”引用此合作伙伴的合作伙伴显示在字段 ref_partner_ids 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:07:49.487

是的，你可以这样做：

```
<field name="ref_partner_ids">
    <tree string="Ref">
        <field name="one"/>
        <field name="two"/>
        <field name="three"/>
        ...................
        ..................
     </tree>
</field> 
```

# javascript - 如何使用javascript根据其值更改单元格的背景颜色？

> ID：15828622
> 
> 赞同：1
> 
> 时间：2013-04-05T07:51:39.073
> 
> 标签：javascript, php, html, css, formatting

我有一个包含 3 列的表：

*   field1 是一个类别
*   field2 和 field3 保存度量（准确地说是整数 1、2、3、4 和 5）。

使用 Javascript，我如何有条件地格式化表格中包含这些度量（特别是 field2 和 field3）的单元格的背景颜色以对应于以下颜色：

*   带有 1 的单元格是红色的
*   具有 2,3 和 4 的单元格为蓝色
*   有 5 个单元格是绿色的

这是我到目前为止所拥有的（现在它都在一个 HTML 文件中，就在我整理出来的时候），为了便于阅读，我已经把它分解了。我想我可能完全错过了 HTML 中的背景属性。我知道它可能，但不确定如何使用 Javascript 根据其内容动态更改表格单元格的背景颜色。

提前致谢。

## 脚本的开始

```
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.js"></script>
<script type="text/javascript">

$(document).ready(function(){
    $( "#status_report td.measure:contains('1')" ).css('background-color', '#fcc' );
});
</script>
<style type="text/css">
</style>
</head>
<body>
<table id="status_report">
<tr>
    <th>field1</th>
    <th>field2</th>
    <th>field3</th>
</tr>
<tr>
    <td class = "measure">Example</td>
    <td class = "measure">1</td>
    <td class = "measure">2</td>    
</tr>
</table>
</body>
</html> 
```

## 更新：

一条评论指出了一个语法错误（额外的分号），该错误已被删除，上面的代码工作正常。但是，发布了一个更好的答案并已被接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:01:16.430

你甚至可以用 PHP 做到这一点。为什么？因为 JS 在客户端执行，如果关闭，用户将看不到彩色单元格。

```
<?php 
$colors = array(
  1 => "red",
  2 => "blue",
  3 => "blue",
  4 => "blue"
  5 => "green"
) ;

foreach( $data as $row ) : ?>
<tr>
  <?php foreach($row as $num): ?>
    <td style="background-color: <?php echo (isset($colors[(int)$num]) ? $colors[(int)$num] : "white") ; ?>"><?php echo $num ; ?></td>
  <?php endforeach ; ?>
</tr>   
<? endforeach; ?> 
```

您也可以在 td 标签中使用类，而不是直接样式。

如果您仍然需要解决方案`JQuery`，我可以编辑我的答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:10:17.743

虽然您已经接受了答案，但 JavaScript 实现当然是可能的，这里使用纯 JavaScript 而不是 jQuery：

```
function formatCells(table){
    var tbody = table.getElementsByTagName('tbody')[0],
        cells = tbody.getElementsByTagName('td'),
        colors = ['red', 'blue', 'green'];
    for (var c = 0, len = cells.length; c < len; c++){
        if (cells[c].cellIndex > 0){
            switch (parseInt((cells[c].textContent || cells[c].innerText), 10)){
                case 1:
                    cells[c].style.backgroundColor = colors[0];
                    break;
                case 2:
                case 3:
                case 4:
                    cells[c].style.backgroundColor = colors[1];
                    break;
                case 5:
                    cells[c].style.backgroundColor = colors[2];
                    break;
            }
        }
    }
}

formatCells(document.getElementsByTagName('table')[0]); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sG3vU/)。

鉴于您最近添加的 HTML，您可以将上述内容应用于您自己的`table`内容，如下所示：

```
formatCells(document.getElementById('status_report')); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sG3vU/1/)。

**编辑**以提供一个健全的（和可扩展的）jQuery 解决方案，而不是为*每个*可能的替代方案提供单独的 jQuery 行：

```
var colorMap = {
    1 : 'red',
    2 : 'blue',
    3 : 'blue',
    4 : 'blue',
    5 : 'green',
};

$('#status_report td').css('background-color', function(){
    return colorMap[$(this).text()] || '';
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sG3vU/2/)。

而且，仅仅因为我喜欢纯 JavaScript，我想我会提供一个演示，说明如何通过扩展来实现相同的最终结果`Object.prototype`：

```
Object.prototype.propByTextValue = function(prop, obj){
    if (!obj){
        return this;
    }
    else {
        var that = this.length ? this : [this],
            txt = '';
        for (var i = 0, len = that.length; i < len; i++){
            that[i].style[prop] = obj[parseInt((that[i].textContent || that[i].innerText), 10)];
        }
    }
    return this;
};

var colorMap = {
    1 : 'red',
    2 : 'blue',
    3 : 'blue',
    4 : 'blue',
    5 : 'green',
};

document
.getElementById('status_report')
.getElementsByTagName('td')
.propByTextValue('background-color', colorMap); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/sG3vU/3/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T08:14:07.650

将数据属性添加到您的单元格：

```
<table id="status_report">
<tr>
    <th>fee_source_id</th>
    <th>field1</th>
    <th>field2</th>
    <th>field3</th>
</tr>

<?php foreach( $data as $row ) : ?>
<tr>
    <td data-bg="<?php echo $row['field1']; ?>"><?php echo $row['field1']; ?></td>
    <td data-bg="<?php echo $row['field2']; ?>"><?php echo $row['field2']; ?></td>
    <td data-bg="<?php echo $row['field3']; ?>"><?php echo $row['field3']; ?></td>  
</tr>

<? endforeach;
$dbh = null; ?>
</table> 
```

和 js ：

```
$(document).ready(function(){
    $( "#status_report .measure[data-bg='1']").css('background', 'red');
    $( "#status_report .measure[data-bg='2']").css('background', 'blue');
    $( "#status_report .measure[data-bg='3']").css('background', 'blue');
    $( "#status_report .measure[data-bg='4']").css('background', 'blue');
    $( "#status_report .measure[data-bg='5']").css('background', 'green');
}); 
```

演示：http: [//jsfiddle.net/pUw6u/](http://jsfiddle.net/pUw6u/)

# java - ActionBarSherlock 片段显示的数据与传递的数据不同

> ID：15828627
> 
> 赞同：0
> 
> 时间：2013-04-05T07:51:52.217
> 
> 标签：java, android, android-fragments, actionbarsherlock, android-viewpager

您好，感谢您提供帮助！

我正在尝试使用 ActionBarSherlcok 构建一个应用程序。当我单击选项卡时，我希望实例化相同的片段，但使用基于我单击的选项卡的动态数据。出于某种原因**，它一直向我显示错误的数据**，尽管传递了正确的参数值（我使用断点和监视对其进行了验证）。 ![参数值正确但数据错误](https://i.stack.imgur.com/FWMzh.jpg)

我已经阅读过 SimpleOnPageChangeListener、getCurrentItem，当然还有[Fragments Tutorial](http://developer.android.com/guide/components/fragments.html)。我依靠 SwipeyTabs 示例来创建它，并构建了一个简短的演示来展示我的问题：

这是我的 MainActivity.java

```
package il.co.gilead.testdynamicfragments;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockFragmentActivity;

import android.os.Bundle;
import android.support.v4.view.ViewPager;

public class MainActivity extends SherlockFragmentActivity {

    public static ViewPager mViewPager;
    private TabsAdapter mTabsAdapter;
    Integer intNumOfPages = 3;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        mViewPager = new ViewPager(this);
        mViewPager.setId(R.id.pager);
        setContentView(mViewPager);
        final ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        mTabsAdapter = new TabsAdapter(this, mViewPager);
        for (int i=1; i<=intNumOfPages; i++) {
            mTabsAdapter.addTab(bar.newTab().setText("Fragment "+i), 
                TestFrag.class, null);
        }
    }
} 
```

这是我的 TestFrag.java

```
package il.co.gilead.testdynamicfragments;

import com.actionbarsherlock.app.SherlockFragment;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class TestFrag extends SherlockFragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, 
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.frag_test, container, false);
        TextView tv = (TextView) v.findViewById(R.id.textView1);
        Integer pos = (MainActivity.mViewPager.getCurrentItem() + 1);
        tv.setText("Page " + pos.toString());
        return v;
    }
} 
```

我的activity_main.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <android.support.v4.view.ViewPager
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:id="@+id/pager" />

</RelativeLayout> 
```

和我的 test_frag.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

</LinearLayout> 
```

最后是我的 TabsAdapter

```
public class TabsAdapter extends FragmentPagerAdapter implements ActionBar.TabListener, ViewPager.OnPageChangeListener{
    private final Context mContext;
    private final ActionBar mActionBar;
    private final ViewPager mViewPager;
    private final ArrayList<TabInfo> mTabs = new ArrayList<TabInfo>();

    static final class TabInfo{
        private final Class<?> clss;
        private final Bundle args;

        TabInfo(Class<?> _class, Bundle _args){
            clss = _class;
            args = _args;
        }
    }

    public TabsAdapter(SherlockFragmentActivity fa, ViewPager pager) {
        super(fa.getSupportFragmentManager());
        mContext = fa;
        mActionBar = fa.getSupportActionBar();
        mViewPager = pager;
        mViewPager.setAdapter(this);
        mViewPager.setOnPageChangeListener(this);
    }

    public void addTab(ActionBar.Tab tab, Class<?> clss, Bundle args){
        TabInfo info = new TabInfo(clss, args);
        tab.setTag(info);
        tab.setTabListener(this);
        mTabs.add(info);
        mActionBar.addTab(tab);
        notifyDataSetChanged();
    }

    @Override
    public void onPageScrollStateChanged(int state) {    
    }

    @Override
    public void onPageScrolled(int position, float positionOffset, int positionOffsetPixels) {
    }

    @Override
    public void onPageSelected(int position) {
        mActionBar.setSelectedNavigationItem(position);
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        mViewPager.setCurrentItem(tab.getPosition());
        Object tag = tab.getTag();
        for (int i = 0; i<mTabs.size(); i++){
            if (mTabs.get(i) == tag){
                mViewPager.setCurrentItem(i);
            }
        }
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public Fragment getItem(int position) {
        TabInfo info = mTabs.get(position);
        return Fragment.instantiate(mContext, info.clss.getName(), info.args);
    }

    @Override
    public int getCount() {
        return mTabs.size();
    }
} 
```

如果您尝试一下，您会看到单击选项卡“片段 2”有时会显示“第 1 页”，有时会显示“第 3 页”，有时会显示“第 2 页”。我认为这与预加载片段或片段刷新有关，但此时我一无所知......

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:06:35.440

尝试改变这一点：

```
Integer pos = (MainActivity.mViewPager.getCurrentItem() + 1); 
```

对此：

```
Integer pos = (getActivity().mViewPager.getCurrentItem() + 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:39:44.660

我发现了问题所在。我浏览了 ActionBarSherlock 网站并查看了示例代码。实施与我的不同，但有一件事站了起来。以下是 MainActivity.java 中的代码更改：

```
for (int i=1; i<=intNumOfPages; i++)
{
    Bundle args = new Bundle();
    args.putInt("num", i);
mTabsAdapter.addTab(bar.newTab().setText("Fragment "+i), TestFrag.class, args);
} 
```

这是对 TestFrag.java 的补充：

```
public class TestFrag extends SherlockFragment {
    Integer intPageNum;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        Bundle args = getArguments();
        if (args != null)
            intPageNum = args.getInt("num");
        else
            intPageNum = 1;
    }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.frag_test, container, false);
        TextView tv = (TextView) v.findViewById(R.id.textView1);
        tv.setText("Page " + intPageNum.toString());
        return v;
    }
} 
```

如您所见，我`pos`完全放弃了使用。感谢大家的帮助！

# arrays - 找不到使用 STUArray 的函数的正确签名（GHC 也不能）

> ID：15828631
> 
> 赞同：5
> 
> 时间：2013-04-05T07:52:01.553
> 
> 标签：arrays, haskell, state, monads, state-monad

我使用 ST-Monad 和未装箱的 STArrays (STUArray) 构建了一个用于查找矩阵行列式的函数。矩阵的类型如下：

```
newtype Matrix e = Matrix (Array Int (UArray Int e)) 
```

也就是说，一个不可变数组，其中包含包含元素的不可变未装箱数组。这将要求我将 Predicate 添加`IArray UArray e`到处理 的函数中`Matrix`，而这又需要`FlexibleContexts`. 好的，完成。

用于计算行列式的函数具有以下签名：

```
detST :: (IArray UArray e, MArray (STUArray s) e (ST s),
          Num e, Eq e, Division e)
   => Array Int (UArray Int e) -> ST s e 
```

我还需要添加谓词`MArray (STUArray s) e (ST s)`，因为在内部数组被转换为可变数组（外部装箱，内部未装箱）。

这个函数可以这样使用：

```
main = do
    let m@(Matrix x) = matrix [ [1,-2,3,234]
                              , [5,2,3,-3]
                              , [7,18,3,40]
                              , [2,9,71,0] ]
        d = runST (detST x) :: Int -- needed for type check, ambiguous otherwise

print d 
```

工作正常。但是看看它有多丑！当然，我不想放弃 of 的内部结构`Matrix`（至少不会超出附加到我的函数的谓词已经让我这样做）。我想定义以下函数：

```
det :: Matrix e -> e 
```

而我不能。

我试过没有正确的签名：

```
det (Matrix arr) = runST (detST arr) 
```

失败。公平地说，我会让我的大脑工作：`detST`需要`IArray UArray e, MArray (STUArray s) e (ST s), Num e, Eq e, Division e`，所以需要，`det`不是吗？

```
det :: (IArray UArray e, MArray (STUArray s) e (ST s),
          Num e, Eq e, Division e) => Matrix e -> e 
```

失败。但我不明白怎么做。GHC ( **7.4.2** ) 给我的信息是：

```
Could not deduce (MArray (STUArray s) t (ST s))
  arising from a use of `detST' 
```

但是那个确切的术语在谓词中！

GHC 建议：

```
add (MArray (STUArray s) t (ST s)) to the context of
  a type expected by the context: ST s t
  or the inferred type of
     det :: (Eq t, Num t, IArray UArray t, Division t) => Matrix t -> t
or add an instance declaration for (MArray (STUArray s) t (ST s)) 
```

好的。至于我的理解，我已经做了第一件事。也确实存在一个实例`(MArray ...)`（否则，我怎么能在 main 中成功使用它？！）。

我不确定这里有什么问题。我相信它与 in 中的“隐藏”ST 状态有关`s`，并且 s与in`detST`不同，但我不知道如何为此编写类型。`s``s``det`

**什么是正确的定义`det`- 为什么？**

没有`det`编译的程序只使用`FlexibleContexts`，没有警告`-Wall`。完整的源代码可以在**[这里](https://gist.github.com/scravy/5317395)**找到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T09:45:01.343

我设法使用 Keegan McAllister[在本文中](http://mainisusuallyafunction.blogspot.se/2010/09/higher-rank-type-constraints.html)描述的技巧使其工作：

```
{-# LANGUAGE FlexibleContexts, ScopedTypeVariables, RankNTypes, GADTs #-}

data Evidence s e where
  Evidence :: (MArray (STUArray s) e (ST s)) => Evidence s e

data ElemType e = ElemType (forall s. Evidence s e)

det :: forall e . (IArray UArray e, Num e, Eq e, Division e)
       => ElemType e -> Matrix e -> e
det (ElemType e) mat = runST (f e mat)
  where
    f :: Evidence s e -> Matrix e -> ST s e
    f Evidence (Matrix arr) = detST arr 
```

用法：

```
main :: IO ()
main = do
    let m = matrix [ [1,-2,3,234]
                   , [5,2,3,-3]
                   , [7,18,3,40]
                   , [2,9,71,0] ]
    print $ det (ElemType Evidence) (m :: Matrix Int) 
```

问题源于缺少更高级别的约束 - `runST`has type `(forall s. ST s a) -> a`，因此您需要像`forall s . MArray (STUArray s) e (ST s)`GHC 不支持的约束。这个技巧可以让你让类型检查器相信这个约束实际上是成立的。我在上面链接的文章中可以更深入地讨论这个问题。

# php - 用php下载文件链接的函数

> ID：15828633
> 
> 赞同：0
> 
> 时间：2013-04-05T07:52:11.570
> 
> 标签：php

我想添加一些功能来下载前几天上传的文件。我不方便使用 php，所以我不知道如何为所有列出的文件添加函数和生成链接。

这是我的php代码：-

```
// Destination folder for downloaded files

$date = date('m.d.y'); 
mkdir("uploads/" . $date, 0777, true); 
$upload_folder = 'uploads/' . $date;

// If the browser supports sendAsBinary () can use the array $ _FILES
if(count($_FILES)>0) { 
    if( move_uploaded_file( $_FILES['upload']['tmp_name'] , $upload_folder.'/'.$_FILES['upload']['name'] ) ) {
        echo 'done';
    }
    exit();
} else if(isset($_GET['up'])) {
    // If the browser does not support sendAsBinary ()
    if(isset($_GET['base64'])) {
        $content = base64_decode(file_get_contents('php://input'));
    } else {
        $content = file_get_contents('php://input');
    }

    $headers = getallheaders();
    $headers = array_change_key_case($headers, CASE_UPPER);

    if(file_put_contents($upload_folder.'/'.$headers['UP-FILENAME'], $content)) {
        echo 'done';
    }
    exit();
} 
```

# javascript - 等待 GetJSON 异步完成

> ID：15828639
> 
> 赞同：0
> 
> 时间：2013-04-05T07:52:42.120
> 
> 标签：javascript, jquery, json, sharepoint, asynchronous

我有这个简单的 javascript 代码，它使用 REST 从 SharePoint 获取 spListItems 并填充下拉列表。填充下拉列表后，我想对其应用一些引导样式。我如何确定下拉列表的数量已完成/已完成。这样我就可以在下拉项目上应用样式。

```
 function populateDropDown(dropdownId, spList) {
        var url = "http://devportal/FormsRepository/_vti_bin/ListData.svc/" + spList;
        var dropdownControl = $('#' + dropdownId);
        $.getJSON(url, function (data) {
            $.each(data.d.results, function (key, value) {
                dropdownControl.append(
                    $('<option></option>').val(key).html(value.Title)
                );
            });
        });
      }
      //this lines does work properly as the dropdown is not populated yet
       $('.combobox').combobox(); 
```

您的时间和帮助将不胜感激。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:56:27.493

为什么不放

$('.combobox').combobox();

在 $.each 循环之后？

# asp.net-web-api - asp.net webapi odata $metadata 中缺少逆属性

> ID：15828643
> 
> 赞同：3
> 
> 时间：2013-04-05T07:52:50.880
> 
> 标签：asp.net-web-api, odata, breeze, jaydata

两个实体之间有非常简单的关系，我试图用 asp.net webapi odata 控制器公开它们，但 $metadata 似乎有问题。

当我在 $metadata 上运行 jaydatasvcutil.exe 时，我收到警告：inverseProperty other side missing。

当我使用轻风js loadNavigationProperty 我得到类似的错误。

即使使用官方示例，我也有问题。 [http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/working-with-entity-relations](http://www.asp.net/web-api/overview/odata-support-in-aspnet-web-api/working-with-entity-relations)

您可以在此处查看 $metadata [http://sdrv.ms/Z5Klfw](http://sdrv.ms/Z5Klfw)

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T19:31:15.867

当我们生成导航属性时，我们不会重用这些关系。

例如，假设您有简单的模型，

```
public class Product
{
    public int Id { get; set; }
    public Supplier Supplier { get; set; }
}
public class Supplier
{
    public int Id { get; set; }
    public Product[] Products { get; set; }
} 
```

我们生成的导航属性的 $metadata 如下所示，

```
<NavigationProperty Name="Supplier" Relationship="ProductsService.Models.ProductsService_Models_Product_Supplier_ProductsService_Models_Supplier_SupplierPartner" ToRole="Supplier" FromRole="SupplierPartner" />

<NavigationProperty Name="Products" Relationship="ProductsService.Models.ProductsService_Models_Supplier_Products_ProductsService_Models_Product_ProductsPartner" ToRole="Products" FromRole="ProductsPartner" /> 
```

请注意，我们正在生成两个关系而不是一个。我们这样做的原因是要弄清楚两个导航属性是否代表相同的关系是一个难题。以产品和制造商为例。

```
public class Manufacturer
{
    public int Id { get; set; }
    public Product[] RawMaterials { get; set; }
    public Product[] Produces { get; set; }
}
public class Product
{
    public int Id { get; set; }
    public Manufacturer[] Producers { get; set; }
    public Manufacturer[] Consumers { get; set; }
} 
```

弄清楚 Maufacturer.RawMaterials 和 Product.Consumers 应该共享相同的关系并且 Manufaturer.Produces 和 Product.Producers 应该共享相同的关系并非易事。我们选择不这样做，因为我们认识的客户并没有从这些信息中获得太多收益。

这一切都是因为 OData 使用与实体框架相同的 EDM 模型。Entityframework 需要此信息，因为它将这些关系映射到将成为数据库中的表的关联集。

我们选择不这样做的另一个原因是，这可能会在 OData V4 中消失。[在这里](https://www.oasis-open.org/committees/download.php/48587/odata-core-v4.0-wd01-part3-csdl-2013-03-19.doc)查看工作草案（第 23 页和第 57 页会很有趣）。简而言之，OData V4 中 $metadata 中的导航属性看起来更像这样，

```
<NavigationProperty Name="Category" Type="Self.Category" Nullable="false" Partner="Products" /> 
```

请注意，没有关系，也没有关联集。

# wpf - WPF 等效于 Flex VGroup

> ID：15828644
> 
> 赞同：0
> 
> 时间：2013-04-05T07:52:52.987
> 
> 标签：wpf, apache-flex, alignment

**什么是 WPF 等效于 Flex VGroup？**
我的意图是有一个复选框的垂直列表
Flex 声明看起来像这样

```
<s:VGroup>
  <s:CheckBox label="Item 1" />
  <s:CheckBox label="Item 2" />
  <s:CheckBox label="Item 3" />
</s:VGroup> 
```

我在 Grid 上胡闹，但没有取得多大成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:00:00.833

那应该做的工作。

```
<StackPanel Orientation="Vertical">
...
</StackPanel> 
```

[http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)

# algorithm - 寻找封闭骑士之旅的快速算法

> ID：15828645
> 
> 赞同：2
> 
> 时间：2013-04-05T07:52:53.587
> 
> 标签：algorithm, knights-tour

我正在学习骑士的巡回算法。我使用递归精细实现，但它需要很长时间，而且几乎不是封闭的旅行。

现在，我目前正在寻找一种快速算法来查找封闭式游览。有人可以推荐我一些算法吗？

**更新：**我在某处读过一个启发式，可以找到像这样的封闭骑士之旅：下一步的位置是`Min[F(x, y)]`哪里`F(x,y) is a set of f(x,y)=Min(x-1, n-x) + Min(y-1, n-y)`，是棋盘的大小。但是我该如何使用这种启发式方法呢？`(x, y)``n`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:59:25.573

骑士之旅问题实际上是在对应的图中找到一个哈密顿循环，已知它是 NP 难的，所以这个问题也可能很难解决。

但是，有几种启发式方法可以让您执行快速查找。Warnsdorff 规则就是这样的启发式方法之一：

**在每一步移动到方格，从该方格可以进行的动作较少。如果有几个这样的方格，移动到其中任何一个。**

这是一个非常好的启发式算法，长期以来一直被认为是骑士路径问题的解决方案，并且在计算机使用后很长时间才发现表明规则的第二部分可能导致错误决策的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T18:47:26.990

我今天解决了这个问题，在 Knight Graph 中实现了深度优先搜索（该图对 Knight 的可能动作进行建模）。

当我整个下午都在想为什么 Warnsdorff 的启发式方法还不够时，问题是我的出发点。

我从 (0,0) 位置开始 DFS。如果你从中间的某个地方开始，比如 (3,3)，看起来 DFS 得到了极大的改进。更改后，算法速度从（1 小时内无解）变为（1 秒内有1 个解）。

我也测试了你的 Min[F(x,y)] 启发式方法，它的性能似乎与 Warnsdorff 的规则相同（对于 8x8 表）。

# google-analytics - Analytics 接收事件，但不将它们记录在报告中

> ID：15828650
> 
> 赞同：9
> 
> 时间：2013-04-05T07:53:10.470
> 
> 标签：google-analytics

我一直在谷歌上寻找答案。我已经根据谷歌的跟踪代码建议检查了代码，我什至用他们的[示例代码](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)进行了测试。但我无法在 Google Analytics 中正确跟踪事件。我的代码已经在网站上发布了一段时间（大约一个月），所以这应该可以克服那里报告的任何滞后。

我正在使用异步版本的分析，它适用于页面跟踪和其他“正常”功能。尝试设置事件跟踪，我按照示例，等了一周。依然没有。我一直在调试，我没有任何“正常”问题（据我所知）。

所以：

触发的示例跟踪代码：

```
<a href="#" onClick="_gaq.push(['_trackEvent', 'Videos', 'Play', 'Baby\'s First Birthday']);">Play</a> 
```

这会触发一个事件，根据 ga_debug.js，该事件被成功触发。检查网络面板，我可以看到请求，_umt.gif 返回状态 200。

我已经检查了那里的请求字符串。一切似乎都很好。

但是检查GA，报告中没有任何内容。***但是***当您转到 GA Realtime > Events 时，您可以看到正在触发的事件！？

我可以触发页面上的事件或从控制台触发它们，相应的事件会显示在实时部分，但它们没有数据（类别、操作或标签）。

这很奇怪，即使触发 Google 自己的[示例代码](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide)也没有任何显示。

如果有人对从哪里开始调试有任何想法（或有类似的经验），很高兴听到。

![我在实时事件跟踪屏幕中看到：没有数据！](https://i.stack.imgur.com/49A3s.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T22:38:02.233

我已经为这个问题苦苦挣扎了三天。我知道这个线程很旧，但我在搜索过程中偶然发现了它。我想发布我的个人解决方案，以防其他人遇到此问题。

我的解决方案：

这是我终于找到它的地方：

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables)

在：“使用自定义变量”>“传统 (ga.js) 代码段”下（我们现在仍在使用 ga.js。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-08T20:51:18.803

我遇到了类似的问题并遇到了这个问题： [https ://issuetracker.google.com/issues/35353093](https://issuetracker.google.com/issues/35353093)

总之，我通过下面设置了 userId 属性。删除它开始对我进行历史跟踪。

```
ga('set', 'userId', username); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-25T17:58:24.113

这个问题被问了很多，答案几乎总是“Google Analytics 标准 SLA 是 24 小时”。日志在后台批量处理。在高峰期，这需要一段时间。

> Google Analytics（分析）服务器最多可能需要 24 小时才能更新——[来源：Google 文档——检查您的网络跟踪代码设置](https://support.google.com/analytics/answer/1008083?hl=en)

# c# - Calendar Extender 日期选择并转换为正确的格式

> ID：15828653
> 
> 赞同：1
> 
> 时间：2013-04-05T07:53:24.393
> 
> 标签：c#, asp.net, calendarextender

我正在从**文本框中的****日历**扩展器中选择值，并且我正在获取格式中的值，但我希望它以另一个**文本框** （）中的格式显示，如下所示**`{"MM/dd/yyyy"}``{"dd/MM/yyyy"}`**`txt_actualrightformat.Text`****

 ****```
DateTime wrongformat = DateTime.Parse(TextBox4.Text);
String rightformat = String.Format("{0:dd/MM/yyyy}", wrongformat.Date);
txt_actualrightformat.Text = rightformat.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:54:34.940

`DateTime`与格式无关，格式仅用于显示目的。如果您没有得到正确的日期，`wrongformat`那么您可以使用`DateTime.ParseExact`该格式。然后简单地

```
txt_actualrightformat.Text = wrongformat.ToString("dd/MM/yyyy"); 
```

**编辑：**

像这样使用`DateTime.ParseExcat`：

```
DateTime dt = DateTime.ParseExact(TextBox4.Text, "MM/dd/yyyy", CultureInfo.InvariantCulture);
txt_actualrightformat = dt.ToString("dd/MM/yyyy"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:59:19.140

试试这些

```
DateTime wrongformat = DateTime.Parse(TextBox4.Text);

txt_actualrightformat.Text =wrongformat.ToString("dd'/'MM'/'yyyy"); 
```

或者

```
 txt_actualrightformat.Text =String.Format(CultureInfo.InvariantCulture, "{0:dd/MM/yyyy}", _wrongformat ) 
```

**更新：**

我认为日期的格式**`TextBox4`确实是错误的**:-)
请注意，**“22/3/2013”** ​​它与**“d/M/yyyy”**格式匹配，与**“dd/MM/yyyy”格式不匹配**。- 对于**"dd/MM/yyyy"**它应该是**"22/03/2013"**。

```
DateTime dt;

if(DateTime.TryParseExact(TextBox4.Text, "dd/MM/yyyy", CultureInfo.InvariantCulture,
                           DateTimeStyles.None, out td))
{
  // Valid date used in `TextBox4` (NOTE : dd/MM/yyyy)!, you can use dt now as i explained above!.:-)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T11:50:45.597

在解析或转换任何日期时间值之前，请检查日历的日期格式。在您的 aspx 页面上转到 calendarExtender 并转到其属性然后找到格式并将格式设置为 dd/MM/yyyy 和今天的日期格式也这样做。然后从后面的代码中声明一个日期时间类型的变量，并简单地传递 calendarExtender 放置日期的文本框值并将文本框值转换为日期时间。该代码将类似于 public DateTime date{get;set;}

日期 = Convert.ToDateTime(txtDate.Text.ToString()); 在 sql server 中，该值将保存为“2016-02-09 00:00:00.000”这种格式****

# c# - 根据列值 C#.net 在 Crystal Report 中突出显示特定行

> ID：15828654
> 
> 赞同：1
> 
> 时间：2013-04-05T07:53:24.607
> 
> 标签：c#, sql-server-2008, crystal-reports

如何根据列值 C#.net 在 Crystal Report 中突出显示特定行

生成报告后，我想突出显示列中所有具有值的记录（假设“状态”）值 =“确定”

如果有办法在 C#.NET 中使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:01:57.263

您可以使用公式来更改文本属性，如下所示： [使用 Crystal Reports 中的公式更改文本对象的颜色](https://stackoverflow.com/questions/9125041/change-color-of-text-object-using-formula-in-crystal-reports)

编辑：

要突出显示，您可以转到边框选项卡并激活背景颜色复选框。然后添加公式以添加您之前想做的任何检查。

如果要突出显示所有行，您始终可以将相同的公式应用于行中的所有字段

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:14:35.477

在您的 crstal 报告中，右键单击要突出显示的相关字段对象，然后选择“格式化字段..”选项。在边框选项卡中勾选“背景”复选框，您可以输入条件以选择字段的背景颜色。脚本看起来像下面这样。

（注释：{user1.username} --> user1 是表，用户名是我的列。）

如果 {user1.username}='ok' 那么 crGreen

# html - IE10 - 表格 - 对齐不起作用

> ID：15828657
> 
> 赞同：1
> 
> 时间：2013-04-05T07:53:32.947
> 
> 标签：html, html-table, internet-explorer-10

由于我升级到 IE10，我的网页上的表格无法正确显示。下面是示例：

![](https://i.stack.imgur.com/XOXbT.jpg)

表格的头部显示正确，但似乎整个表格都放在一个（左）列或单元格中。

我搜索了解决方案，但我还没有找到任何有用的东西。

这是代码：

```
<table class="class" id="id">
<colgroup>
<col width="" style="display:none;"  />
<col width="190" />
<col width="160" />
<col width="100" />
<col width="170" />
<col width="120" />
</colgroup>
<thead>
<tr>
<td></td>
<td>heading1</td>
<td>heading2</td>
<td>heading3</td>
<td>heading4</td>
<td>heading5</td>
</tr>
</thead>
<tbody runat="server" id="tbody">
<tr>
<td style="display: none;">id</td>
<td><div style="float:left; width:15px; height:1.15em; text-align:right; padding-right:8px;"><img src="" alt="" title="" /></div><div style="clear:right; text-align:left; overflow:hidden;" title="">some value</div></td>
<td><div style="overflow: hidden; height:1.15em;" title="">some value</div></td>
<td><div style="overflow: hidden; height:1.15em;">some value</div></td>
<td><div style="overflow: hidden; height:1.15em;">some value</div></td>
<td><div style="overflow: hidden; height:1.15em;">some value</div></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T07:57:14.137

`<tr>`好吧，您显示的标记有点无效，因为您缺少`<tbody>`. 我会说 IE10 实际上显示*正确*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T15:42:37.317

浏览器运行正常。col 标记样式的[规范](http://www.w3.org/TR/CSS21/tables.html#columns)声明它们支持的唯一样式是`border`、`background`和。您正在使用，这是不受支持的。在您的标题行中，第一个单元格未明确设置，但在您的内容行中是。`width``visibility``display``display:none`

幸运的是，对于列`collapse`的`visibility`样式有一个特殊的值（实际上是 col 标签唯一允许的值），其行为方式与`display:none`. 它[似乎可以](http://jsfiddle.net/j67PD/2/)按您的意愿工作。

# windows - 构建和覆盖一个简单的 Winelib DLL

> ID：15828660
> 
> 赞同：3
> 
> 时间：2013-04-05T07:53:45.273
> 
> 标签：windows, dll, wine, getprocaddress, winelib

我有一个加载库的 Windows 可执行文件，我想创建一个将覆盖 Windows DLL 的 Winelib DLL。我搜索并尝试了2天，但它不起作用！请帮我 ！

基本上，我创建 mydll.c 和 mydll.spec 以使用以下命令构建 Winelib DLL：

```
winegcc -m32 -shared -o mydll.dll mydll.c mydll.spec 
```

现在我有**mydll.dll.so**并且我想覆盖**mydll.dll**（两者都在同一个地方）我该怎么办？我尝试重命名 mydll.dll 但调用该函数时出现页面错误！我还尝试使用 winecfg 配置覆盖或设置 WINEDLLPATH 等环境变量。我不明白如何进行。

* * *

我如何在我的 Windows 可执行文件中加载库

```
HINSTANCE DllHandle;
char str[255];
typedef int(__stdcall * tfp)(char * const);
DllHandle = LoadLibrary("mydll.dll");
tfp fp = (tfp)GetProcAddress(DllHandle, "myfunc");
fp(str);
FreeLibrary(DllHandle); 
```

mydll.spec

```
@ stdcall myfunc(str) 
```

我的dll.c

```
#include <windef.h>

int WINAPI myfunc(char * str)
{
  strcpy(str, "myfunc from the Winelib DLL");
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:55:47.097

用于`WINEDEBUG=+module`调试 DLL 加载问题。

我不相信 Wine`.dll.so`会在单个文件夹之外搜索本机文件，但[`dlls/ntdll/loader.c:load_builtin_dll`](https://github.com/wine-mirror/wine/blob/bedfb9cae224a369efa4588332a5518dbee57035/dlls/ntdll/loader.c#L2354)如果您想检查自己，代码就在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-30T14:43:26.760

我能够让它工作，但必须进行以下更改。

我在 Ubuntu 上使用 wine5，默认安装似乎是 64 位。我必须先重命名 wine 的可执行文件，因为它错误地使用了 32 位调用，这意味着它不适用于 64 位 dll。

安装 wine-tools (用于 winegcc)

```
apt-get install wine-tools 
```

修复wine64（因为exe似乎加载wine32然后出错）

```
cd /usr/lib/wine
mv wine wine32
ln -s wine64 wine 
```

生成文件

```
all:    mydll.dll.so testmydll.exe

mydll.dll.so:   mydll.c mydll.spec
        winegcc -shared -o mydll.dll mydll.c mydll.spec

testmydll.exe:  testmydll.c
        winegcc -mno-cygwin -o testmydll testmydll.c

clean:
        rm -f *.so
        rm -f *.exe
        rm -f *~ 
```

另外，您的代码中存在错误，我已更正。缺少 __stdcall 和 DLL 的名称。

# javascript - 空链接的 href 值

> ID：15828669
> 
> 赞同：8
> 
> 时间：2013-04-05T07:54:30.517
> 
> 标签：javascript, html

如果我使用`<a>`标签单击事件来触发 ajax 调用，并且我不希望链接物理上去任何地方，那么该`href`属性的正确值是多少？

是“#”还是留空？

（我理解这带来的可访问性问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T07:55:20.493

空是有效的。

虽然标准做法是使用`"#"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:55:54.777

最好是`#`因为某些浏览器不会`<a>`以空呈现`href`（例如 Google chrome 会将锚呈现为纯文本）。

# perl - 每行文件的shell命令

> ID：15828670
> 
> 赞同：0
> 
> 时间：2013-04-05T07:54:30.860
> 
> 标签：perl, shell, scripting

我正在尝试编写一个 Perl 脚本，它将执行以下操作：
1\. 打开一个文件，该文件在每一行中都包含多个文件的位置（例如文件 A，文件 B）
2\. 对每个文件执行 egrep 操作像 egrep "module|input|output"
3\. 将 egrep 的输出以相同的文件名 A、B 等存储在不同的目录中）

egrep 有更多的限制，但我可以稍后添加。

我的问题是如何执行第 2 步和第 3 步？在哪里，我在我的 Perl 脚本打开的文件的每一行上执行一个 shell 命令。例如，文件位置是，`design/rtl/name.v`我希望将 egrep 的结果存储在`design/fake/name.v`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:11:00.080

在shell（bash）中创建一个目录结果并在文件“list”中的一行中列出您的文件，然后在bash提示符下直接输入

```
for i in `cat list`;do egrep "string" $i > result/grep${i}; done 
```

这在 perl 中是类似的。错误行为更好，它可能会更快一点：真正的优势是可以更容易地添加额外的行为。将其保存为文件并作为“perl script list foo”运行，其中 script 是脚本的文件名，list 是文件列表的文件名，foo 是正在搜索的模式

```
#!/usr/bin/perl
#

my ( $file, $pattern ) = @ARGV;

open( my $fh, $file ) || "die $! $file\n";

while (<$fh>) {
    chomp;    #trim newline from filename
    my $togrep = $_;
    open( my $grepfh, $togrep ) || warn "$togrep $!";
    if ($grepfh) {
        open( my $output, ">result/$togrep" ) || die "$togrep $!";
        while ( grep( $pattern, <$grepfh> ) ) {
            print $output $_;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:10:45.283

像这样循环文件名：

```
while read file
do
   egrep "module|imput|ouput" "$file" > "/another/directory/${file##*/}" 
done < fileList.txt 
```

# php - 构造函数中的 CodeIgniter 变量

> ID：15828671
> 
> 赞同：0
> 
> 时间：2013-04-05T07:54:31.200
> 
> 标签：php, arrays, codeigniter, constructor

我查找了周围的主题，但我没有看到适合我的案例的内容。
所以，我有一个充满方法的控制器，以及一个加载我在这个特定控制器中常用的模型的构造函数。一切正常。我需要在构造函数中设置一个数组，例如

```
$data["content"]["something"] = "bla bla"; 
```

就这样。所以我将 $data["content"] 传递给视图加载器，我希望能够访问

```
$something 
```

， 但不是。它将它作为未定义的变量，但为什么呢？当我把它放在特定的方法中时，一切正常，但是当它在构造函数中时，它说未定义。有任何想法吗？谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:03:03.607

您不能在 View 中访问构造函数变量。您需要将其传递给控制器​​的方法并将其传递给视图。例如，

**在构造函数中：**

```
$data["content"]["something"] = "bla bla"; 
```

**在控制器的方法中：**

```
$data['something'] = $this->$data["content"]["something"]; 
```

现在您可以通过`$data`查看和访问，例如`echo $something`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:15:05.813

似乎您不了解此问题上的变量范围。而不是创建一个局部变量 $data 尝试使用 $this->data 它将可用于整个对象（控制器）

```
function __construct() {
    ...
    $this->data['content'] = array('test' => 'test');
    ...
} 
```

然后，您也可以使用变量 $this->data 将其传递给视图，并在执行期间随时附加/修改它。

```
$this->load->view('path/to/view', $this->data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-21T07:18:17.263

```
 $data["content"]["something"] = "bla bla";
  $this->load->view('path/to/view', $data); 
```

在视图中检索它

```
 echo $content["something"]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T08:00:28.857

你所要做的：

```
$data["content"] = "bla bla";
$data["something"] = "bla bla";

$this->load->view('path/to/view', $data); 
```

这样你的视图中就有了所有的数据字符串。

```
<?php echo $something; ?>

<?php echo $content; ?> 
```

在一个 $data 字符串中传递 2 个变量不是一个好主意。

# firefox - 如何从 Greasemonkey 脚本中排除 amazon.com？

> ID：15828679
> 
> 赞同：1
> 
> 时间：2013-04-05T07:55:19.423
> 
> 标签：firefox, greasemonkey

我有一个特定的 Greasemonkey 1.8 /Firefox 20 脚本（[自动查看剧透框](https://userscripts.org/scripts/show/112636)）在大多数网站上都很好用，但在 amazon.com 上它会破坏布局。

我试图在脚本设置中排除 amazon.com，但它不起作用。

由于 amazon.com 默认为 https:// 我已在

用户脚本 -> 自动查看剧透框 -> 选项 -> 用户设置：

包括页面：

```
*http://* 
```

排除页面：

```
*https://* 
```

然而，该脚本仍然适用于每个网站（是的，我已经清除了浏览器缓存）。

在脚本设置选项卡上，不可编辑的包含页面部分包含：

```
http://forums.kingdomofloathing.com/vb/showthread.php* 
```

我做错了什么？如何从 Greasemonkey 脚本中排除 amazon.com？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:04:24.887

参考Greasemonkey[的*包含*和*排除*规则](http://wiki.greasespot.net/Include_and_exclude_rules)。

不要使用`*http://*`，否则`*https://*`前面的星号会产生意想不到的结果。此外，并非所有亚马逊页面都使用 https。

在用户设置中，您可以使用
`http://*`
Included *Pages和**Excluded Pages*这四行：

```
http://amazon.com/*
http://*.amazon.com/*
https://amazon.com/*
https://*.amazon.com/* 
```

* * *

# 或者，

删除所有这些用户设置条目（如果不这样做，以下内容将不起作用），然后使用*编辑此用户脚本*按钮/菜单将脚本的元数据块更改为：

```
// ==UserScript==
// @name           Auto-view spoiler boxes
// @namespace      http://userscripts.org/users/75549
// @description    Lets you skip clicking the Show button to view spoilers
// @include        http://*
// @exclude        /^https?://.*amazon\.com/?/
// ==/UserScript== 
```

这使您可以使用 Greasemonkey 的正则表达式匹配来阻止所有常见的亚马逊（美国）地址，只需一行。

* * *

* * *

最后，并不是最好避免在每个页面上运行的脚本（`http://*`等）。如果您只包含对您来说有剧透问题的选定页面，您将获得更快、更流畅的体验。

# objective-c - 如何让 CCMenuItemSprite 选择器调用其他图层无效？

> ID：15828682
> 
> 赞同：1
> 
> 时间：2013-04-05T07:55:20.973
> 
> 标签：objective-c, cocos2d-iphone, kobold2d

当我在同一个 .m 文件中调用 void 时，下面的代码效果很好，但我希望我的选择器转到场景中的第二层以获取其“MoveUpSelected”void（其中包含我对精灵移动的操作）。我怎样才能做到这一点？

**HUDLayer.m 我的图层中的按钮代码，用于与其他图层通信**

```
 self.dpad = [CCSprite spriteWithFile:@"dpad.png"];
    CCSprite *dpadSelectedSprite = [CCSprite spriteWithTexture:[dpad texture]];
    dpadSelectedSprite.color = ccGRAY;
    //float dpadHeight = flareSprite.texture.contentSize.height;
    CCMenuItemSprite *dpadButtons = [CCMenuItemSprite itemWithNormalSprite:dpad selectedSprite:dpadSelectedSprite target:Level1 selector:@selector(MoveUpSelected)];
    dpadButtons.position = CGPointMake(size.width / 2, 150);
    [menu addChild:dpadButtons]; 
```

**Level1.m 我的第 2 层中的空白等待被第 1 层按钮调用**

```
- (void)MoveUpSelected {
    int yPosition = self.Player.position.y;
    yPosition += [self.Player texture].contentSize.height/2;

    CGSize size = [[CCDirector sharedDirector] winSize];
    if (yPosition >= (size.height - [self.Player texture].contentSize.height/2)) {
        yPosition = (size.height - [self.Player texture].contentSize.height/2);
    }

    self.Player.position = CGPointMake(self.Player.position.x, yPosition);
} 
```

我有一个 GameScene1.m 将两个图层保存在单独的文件中。

```
 +(id) scene
{
    CCScene *scene = [CCScene node];

    HudLayer *HUD = [HudLayer node];
    [scene addChild:HUD z:2];

    Level1 *layer = [Level1 node];
    [scene addChild:layer];

    return scene;
} 
```

请用代码行解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:59:06.640

很难理解你想做什么。正如斯蒂芬在他的评论中提到的那样，“使用无效”和“无效行动”短语没有任何意义。无论如何，如果您只想在 btn 单击时调用某个实例的方法，只需将其设置为菜单项的目标即可。在你的情况下

```
CCMenuItemSprite *dpadButtons = [CCMenuItemSprite itemWithNormalSprite:dpad selectedSprite:dpadSelectedSprite target:self selector:@selector(MoveUpSelected)]; 
```

用作`self`目标。将其更改为`self.parent`或任何其他实例和菜单项将尝试在此目标上调用选择器。

编辑：

```
CCMenuItemSprite *dpadButtons = [CCMenuItemSprite itemWithNormalSprite:dpad selectedSprite:dpadSelectedSprite target:levelInstance selector:@selector(MoveUpSelected)]; 
```

我您的编辑尝试使用类对象，而不是实例作为目标。所以它找不到静态方法。

# php - 如何在 URL 和页面中传递变量？

> ID：15828683
> 
> 赞同：0
> 
> 时间：2013-04-05T07:55:29.623
> 
> 标签：php

我在 index.php 中的代码：

```
<?php

$keyword = ($_GET['keyword']);
$adid = $_GET['adid'];

header("Location: http://www.tracking.com/base.php?asdf&keyword=&ad=" .$keyword .$adid);

?> 
```

跟踪链接应该以以下结尾：

```
&keyword={keyword}&ad={AdId} 
```

我需要通过 URL 将关键字和 AdId 传递到登陆页面，然后重定向并将这两个变量传递给跟踪链接。

这是我尝试的 URL：

```
www.example.com/?keyword={keyword}&ad={AdId} 
```

我不认为我可以测试我上面的格式是否正确，除非我运行搜索流量。

我需要帮助来获取正确的代码并获取正确传递它们的 URL。

编辑：我是否格式化了 URL 以正确传递变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T07:59:32.240

改变这个

```
header("Location: http://www.tracking.com/base.php?asdf&keyword=&ad=" .$keyword .$adid); 
```

至

```
header("Location: http://www.tracking.com/base.php?keyword=$keyword&ad=$adid"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T07:59:52.347

尝试这个：

```
header("Location:",'http://www.example.com/?&keyword='.$keyword.'&ad='.$adid); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:03:05.713

尝试这个..

```
<?php

$keyword = ($_GET['keyword']);
$adid = $_GET['adid'];

header("Location: http://www.tracking.com/base.php?keyword=$keyword&ad=$adid");

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:04:49.907

你可以试试：

```
 header("Location: http://www.tracing.com/base.php?asdf&keyword=$keyword&ad=$aid"); 
```

看来以后发帖了，啊。

# android - 如何中断 GLSurfaceView 渲染阶段并开始新的渲染阶段？

> ID：15828684
> 
> 赞同：0
> 
> 时间：2013-04-05T07:55:30.940
> 
> 标签：android, opengl-es-2.0, glsurfaceview

嗨 Android 开发人员，

当模式等于“Render_when_dirty”时，中断 GLSurfaceView 的当前渲染阶段并开始新的渲染阶段的最佳方法是什么？我通过检查标志并从“onDraw”方法中调用的实际渲染方法返回人为地停止“onDraw”方法中的渲染；然后，在主线程的上下文中，我调用“requestRender()”来刷新场景。但是，由于我不知道的原因，一些中间的旧框架显示的时间很短（另一方面，它们持续了很长时间，用户可以实现过渡） ; 在 opengl es 2.x 引擎渲染实际场景之前。它根本不影响任何东西；但是修起来很麻烦。你有什么建议？

由于破坏了 GLSurfaveView 的实际渲染线程，PS 在 onDraw 方法中抛出 InterruptedException 是无用的。

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:17:38.073

当您说绘制了一些旧帧时-您的意思是绘制的帧的一部分是旧的还是多次调用 onDraw() 仍会导致某些旧信息显示在显示器上。

我可以看到这里发生了一些事情。如果你有这样的 onDraw() ：

```
 onDrawFrame(){
  ... stuff ...
  if (stateVariableSet)
     return;
  ... stuff ... 
```

我的理解是，当函数完成运行时，后/前缓冲区会被交换和绘制。这里可能发生的一件事是，当您尝试更新 state/State 变量时，您会看到一些 onDrawFrame() 调用正在呈现。

另一方面，如果你有这样的事情：

```
 onDrawFrame(){
   ... stuff..
   semaphore.acquire(); // lock the thread waiting for the state to update
   ... stuff ... 
```

那么在锁定之前绘制的东西将是陈旧的（仅针对该帧 - 至少这是我所期望的）。

你也在多核系统上运行吗？

# php - 在 yii 中将语言作为变量作为 url 参数传递

> ID：15828687
> 
> 赞同：0
> 
> 时间：2013-04-05T07:55:32.213
> 
> 标签：php, internationalization, yii

我遇到了 yii 的问题，这看起来很简单，但我找不到合适的解决方案。我需要在网页中执行 I18N 并且我正在使用 yii，我已经完成了翻译，我发现可以像这样轻松地更改控制器类中的语言：

```
class Controller extends CController
{
    function init() {
        parent::init();
        if(isset($_GET['lang'])) {
            Yii::app()->language = 'lt';
        }
    }
} 
```

一切正常，但显然当 url 不包含语言参数时语言参数会丢失。一种解决方法是在整个站点的所有 url 中添加参数，但这似乎不是一个解决方案。

是否有一些更静态的传递参数的方式？也许在 yii 的 UrlManager 中有一些选项？或者也许还有另一种更动态地改变语言的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T06:56:55.527

如果你只在没有获取请求的情况下使用会话呢？但是在同一个 url 上显示不同的内容仍然是个坏主意。

```
 if(isset($_GET['lang'])) {
          $app->session['language'] = 'lt';
    } elseif($app->session->contains('language')) {
          $app->language = $app->session['language'];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:31:17.197

您可以轻松地将其作为静态参数添加到 url 管理器规则中。我建议在表单等中使用 url `/en/controller/action`，因此第一个参数始终是语言。我使用这种方法很长时间了，而且效果很好。

有关详细信息，请查看此答案：[https ://stackoverflow.com/a/4625710/133408](https://stackoverflow.com/a/4625710/133408)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:31:50.433

一个非常简单的解决方案是使用会话数据来记住用户跨页面的语言选择：

```
function init() {
    parent::init();
    $app = Yii::app();

    // If "lang" is specified, remember that
    if(isset($_GET['lang'])) {
        $app->session['language'] = 'lt';
    }

    // If we remember a language put it in use
    if($app->session->contains('language')) {
        $app->language = $app->session['language'];
    }

} 
```

# ruby-on-rails - X字符后如何在ruby on rails中换行？

> ID：15828688
> 
> 赞同：1
> 
> 时间：2013-04-05T07:55:32.650
> 
> 标签：ruby-on-rails, ruby

如果有标题，我正在使用此代码显示标题

```
<%= @user.headline if @user.headline? %> 
```

我将其限制为 100 个字符。如何在 50 个字符后打破这个标题并在下面显示破碎的部分？我打算让它们集中在两条线上。

**例如：**

如果这是超过 100 个字符的标题，那么我想像这样显示它

**展示：**

如果这是超过 100 个字符的标题，那么

我想这样显示

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:01:52.830

该[`word_wrap`](http://apidock.com/rails/ActionView/Helpers/TextHelper/word_wrap)方法专门用于解决此问题。

但是，它会插入换行符，而不是在 HTML 中换行（例如将不同的行包含在它们自己的`<p>`标签中）。在仔细研究了 TextHelper 的`word_wrap`方法是如何实现的之后，我会将该功能作为辅助方法来实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T08:02:11.397

您可以使用文本助手中的 word_wrap：

```
include ActionView::Helpers::TextHelper
# or in a controller
# helper :text

word_wrap(@user.headline, :line_width => 50) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T07:59:34.673

您可以按如下方式断开字符串：

```
head_line = @user.headline.scan(/.{1,50}/) 
```

在您的情况下，您可以使用`word_wrap`：

```
word_wrap(@user.headline, :line_width => 50) 
```

# python - purchase_landed_costs 模块错误 openerp 7

> ID：15828694
> 
> 赞同：0
> 
> 时间：2013-04-05T07:55:41.393
> 
> 标签：python, xml, openerp

```
File "/home/bellvantage/Documents/openerp-7.0/openerp-7.0/openerp/osv/orm.py", line 2177, in apply_inheritance_specs
    raise_view_error("Element '%s' not found in parent view '%%(parent_xml_id)s'" % tag, inherit_id)
  File "/home/bellvantage/Documents/openerp-7.0/openerp-7.0/openerp/osv/orm.py", line 2070, in raise_view_error
    %  (child_view.xml_id, self._name, error_msg))
AttributeError: View definition error for inherited view 'purchase_landed_costs.c2c_product_landed_cost_view' on model 'product.product': Element '<field name="active">' not found in parent view 'product.product_normal_form_view' 
```

当我去以产品形式创建产品时，出现了这个错误。thia 有什么问题

这是我的新数据库，其他模块没有任何问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:52:52.060

我细化了 purchase_landed_cost 模块中的错误，您尝试在 7 版本中安装 6.1 版本模块。现在字段处于活动状态，product_normal_form_view 中不再有退出。

# mysql - 是否可以在 MySQL 中使用 IF(cond1 AND cond2,result,else result)？

> ID：15828697
> 
> 赞同：1
> 
> 时间：2013-04-05T07:55:47.657
> 
> 标签：mysql, if-statement

如果连续 5 列的值为 0，我想做更新查询。我的第一个想法是：

```
UPDATE `table_name` 
SET `count` = IF(`col1`=0.00 AND 
                 `col2`=0.00 AND 
                 `col3`=0.00 AND 
                 `col4`=0.00 AND 
                 `col5`=0.00,  count+1, count) 
```

但我认为在 IF 条件下使用 AND 是行不通的。任何想法？之前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T07:57:33.997

使用`AND`in an`IF`是完全有效的，但正如 Grijesh 建议的那样，在`WHERE`子句中使用条件是通常的做法。

您的查询虽然不应该给出任何错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T07:59:29.287

我认为您需要这个，如果我没记错的话，对我来说看起来很简单：

```
UPDATE `table_name` 
SET    `count`= `count` + 1
WHERE  `col1`=0.00 AND `col2`=0.00 AND 
       `col3`=0.00 AND `col4`=0.00 AND 
       `col5`=0.00; 
```

**编辑**

@Bart Friederichs 的答案是正确的 AND/OR 在 if() 中是有效的

`IF()` **像** ：（[**`IF()`函数**](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)）

```
IF(<condition>, <value if true>, <value if false>) 
```

我执行以下实验，据此我相信您的查询会起作用。（*这只是我的想法，我不确定*）

```
mysql> SET  @a=IF(0 AND 1,5,3);
Query OK, 0 rows affected (0.00 sec)

mysql> SELECT @a;
+------+
| @a   |
+------+
|    3 |
+------+
1 row in set (0.00 sec) 
```

注意：您可以这样做`=`并且可以在 IF() 函数中使用 AND/OR。

# c# - 安装后 Windows 应用程序错误

> ID：15828706
> 
> 赞同：0
> 
> 时间：2013-04-05T07:56:14.727
> 
> 标签：c#, asp.net

将我的 Windows 应用程序安装到客户端计算机后，出现以下错误。但它在我的开发机器上正常工作。

> System.IO.FileNotFoundException：无法加载文件或程序集“Microsoft.Office.Interop.Word，版本=14.0.0.0，Culture=neutral，PublicKeyToken=71e9bce111e9429c”或其依赖项之一。该系统找不到指定的文件。文件名：“Microsoft.Office.Interop.Word，版本=14.0.0.0，文化=中性，PublicKeyToken=71e9bce111e9429c”

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:00:32.233

您需要在目标计算机上安装 Office 互操作程序集。它们可以从下面的链接以可再发行的形式下载

[http://www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

# css - 页面 Z 索引中的 Highslide

> ID：15828711
> 
> 赞同：0
> 
> 时间：2013-04-05T07:56:51.823
> 
> 标签：css, highslide

我的页面上的 inPage 画廊的 z 索引位置有问题。

我尝试了 hs.zIndexCounter 属性，但没有成功。我的导航有 z-index 10000。

这是我的活生生的例子：活生生的 [例子](http://www.angel-holidays.com/Deutsch/Ferienvilla-Mallorca/Porto_Petro/01974.html)

感谢您的帮助，

迈克尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T14:30:38.533

`hs.zIndexCounter`是不可覆盖的内联，这意味着你不能把它放在`var`. （请参阅参考页面中的“详细信息”：http: [//highslide.com/ref/hs.zIndexCounter](http://highslide.com/ref/hs.zIndexCounter)）您需要将其设置为这样的全局变量（在 之外`var`）：

```
hs.zIndexCounter = 1; 
```

# javascript - 在 setTimeout() 函数中使用更改的值

> ID：15828712
> 
> 赞同：0
> 
> 时间：2013-04-05T07:56:52.867
> 
> 标签：javascript, ajax

```
 //to make an ajax call to server to get to get the list data
    function makeAjaxCall()
    {
        loginSuccess =0;

        //to make an ajax call to server to get the supported banks details
        var xmlhttp;

        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp=new XMLHttpRequest();

        xmlhttp.onreadystatechange=function()
        {
            alert('here'+xmlhttp.readyState+'stat='+xmlhttp.status)
            if( xmlhttp.readyState==4 && xmlhttp.status==200 )
            {
                alert(xmlhttp.responseText)
                if(xmlhttp.responseText != '' )
                {
                    loginSuccess =1;
                    renderResponse(xmlhttp.responseText);
                }
                //else
                {

                }
            }
            //else if(  )
        }

        var params = "flagLogin="+flagLogin+"&listName="+selectedList+formData+loginPara;

        //var url = serverURL;
        var url = 'https://blah.com';

        //alert('param='+params)
        xmlhttp.open("POST",url,true);
        xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
        xmlhttp.send(params);

        setTimeout('showLoginAgain()',15000);

        // return
        return;
    } 
```

在上面的代码中，我正在进行 ajax 调用，我想在被调用`loginSuccess`时使用全局变量的值`showLoginAgain()`- 被调用后 15 秒`setTimeout()`。

如何使第二个ajax调用在调用`showLoginAgain()`第一个ajax调用时更改变量的值？

# java - 考虑到它们的名字，我如何将 Jbuttons 放入数组列表中？

> ID：15828714
> 
> 赞同：0
> 
> 时间：2013-04-05T07:56:56.977
> 
> 标签：java, swing, reflection, jbutton

我有这段代码，我想将页面中的所有按钮放入 arraylist 中，并考虑它们的名称，如果它的名称是例如 btn_2 它应该是列表的第二个元素。它给出了一个错误，并说不能将字段转换为 Jbutton，因为我的列表类型是 Jbutton 而不是字段。他不是我的所有代码，只是其中的一些代码，但所有代码都包含添加面板，然后向面板添加按钮以及一些标签。

```
getContentPane().setForeground(Color.DARK_GRAY);
getContentPane().setLocation(-405, -87);
setResizable(false);
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
getContentPane().setLayout(null);

panelPOD1 = new JPanel();
panelPOD1.setBounds(65, 13, 353, 313);
panelPOD1.setBorder(new BevelBorder(BevelBorder.RAISED, Color.DARK_GRAY, null, null, null));
getContentPane().add(panelPOD1);
panelPOD1.setLayout(null);

JPanel panel = new JPanel();
panel.setBorder(new SoftBevelBorder(BevelBorder.LOWERED, Color.DARK_GRAY, null, null, null));
panel.setBounds(10, 11, 59, 59);
panelPOD1.add(panel);
panel.setLayout(null);

btn_1 = new JButton();
btn_1.setText("");
btn_1.setEnabled(false);
btn_1.setBorder(new RoundedBorder());
btn_1.setBounds(17, 15, 26, 24);
panel.add(btn_1);

btn_3 = new JButton("");
btn_3.setEnabled(false);
btn_3.setForeground(SystemColor.textInactiveText);
btn_3.setBackground(SystemColor.activeCaption);
btn_3.setBounds(10, 15, 26, 24);
btn_3.setBorder(new RoundedBorder());
panel1.add(btn_3);
panel.setLayout(null);

btn_5 = new JButton("");
btn_5.setEnabled(false);
btn_5.setBounds(11, 15, 26, 24);
btn_5.setBorder(new RoundedBorder());
panel_1.add(btn_5);

btn_2 = new JButton("");
btn_2.setEnabled(false);
btn_2.setBounds(12, 15, 26, 24);
btn_2.setBorder(new RoundedBorder());
panel_2.add(btn_2);

btn_4 = new JButton("");
btn_4.setEnabled(false);
btn_4.setBounds(11, 15, 26, 24);
btn_4.setBorder(new RoundedBorder());
panel_3.add(btn_4);

JPanel panel_4 = new JPanel();
panel_4.setBorder(new BevelBorder(BevelBorder.LOWERED, null, null, null, null));
panel_4.setBounds(10, 81, 59, 59);
panelPOD1.add(panel_4);
panel_4.setLayout(null);

btn_6 = new JButton("");
btn_6.setEnabled(false);
btn_6.setBounds(10, 15, 26, 24);
btn_6.setBorder(new RoundedBorder());
panel_4.add(btn_6);

Integer search_index=0;
java.lang.reflect.Field[] fields;
Integer arrayIndex=0;
ArrayList<JButton> rockets;
boolean allFound=false;
while (!allFound)
{

  for (int i =0;i<fields.length;i++) 
  {
      if(fields[i].getName().equals("btn"+arrayIndex.toString()))   
      {

          rockets.add(arrayIndex,fields[i]);
      }

      if (arrayIndex==50)
      {
          allFound = true;
      }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:40:31.340

```
ArrayList<JButton> rockets = new ArrayList<JButton>();

btn_1 = new JButton();
btn_1.setText("");
btn_1.setEnabled(false);
btn_1.setBorder(new RoundedBorder());
btn_1.setBounds(17, 15, 26, 24);
rockets.add(btn_1);
panel.add(btn_1);

btn_2 = new JButton("");
btn_2.setEnabled(false);
btn_2.setBounds(12, 15, 26, 24);
btn_2.setBorder(new RoundedBorder());
rockets.add(btn_2);
panel_2.add(btn_2); 
```

如果您在布局中重新排列（=交换？）按钮，您只需将项目交换`rocket`

这样，如果您更改代码以重用单个变量，则无需创建单独的 JButton 实例。如果您需要识别一个实例，您应该继承 JButton 并添加一个标识符，而不是依赖于在 ArryList 中不可见的变量名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T09:49:13.397

像这里的其他人一样，我非常怀疑你是否应该以这种方式解决问题，但如果你坚持，这有效：

```
final int NUMBER_OF_BUTTONS = 50;
final String PREFIX = "btn_";
Field[] fields = getClass().getDeclaredFields();
JButton[] rockets = new JButton[NUMBER_OF_BUTTONS];

for (Field field : fields) {                        
    if(field.getName().startsWith(PREFIX)) {
        int index = Integer.parseInt(field.getName().substring(PREFIX.length())) - 1;
        rockets[index] = (JButton) field.get(this);
    }           
} 
```

我假设您的第一个按钮被调用`btn_1`，因此`-1`为索引。

# c# - LINQ to Entities 为没有主键的表返回不正确的结果

> ID：15828717
> 
> 赞同：0
> 
> 时间：2013-04-05T07:57:15.027
> 
> 标签：c#, sql-server, visual-studio-2010, linq, linq-to-entities

我发现 LINQ to Entities 需要表上的主键才能返回正确的结果。没有它，我会得到预期的行数，但包括重复的行（因此，错过的行）。此问题在[**此处**](https://stackoverflow.com/a/6082816/629287)和 [**此处**](https://stackoverflow.com/questions/9415799/linq-to-sql-query-has-wrong-values-in-results)进行了描述，我认为这是一个错误。

在我的一个表中，每一行都是唯一的，但我无法在所有字段中创建复合键，因为可空列不能在主键中使用（同样，我认为这是 SQL Server 的限制）。

那么...当使用 LINQ to Entities 从该表中进行选择时，如何获得正确的结果？我相信“关键”可能是在 Visual Studio 模型设计器的所有列中创建一个“实体密钥”，但我不确定如何执行此操作。在可为空的列上设置 Entity Key = true 会引发异常。

在一个阶段，我放弃并添加了一个启用自动增量的标识 int 列并将其用作 PK，这解决了问题，但由于一直在删除/插入大量数据（它是不可能简单地按计划重置自动增量计数器，因为并非所有行都被删除，从而导致冲突）。

我最后的手段是添加一个 bigint 标识列作为 PK，摆脱自动增量种子值重置器，并希望它在应用程序的生命周期内持续“足够长”，但我对此并不满意。（编辑：好的......它会持续足够长的时间。我主要关心的是性能）

# azure - Azure VM 位置是否有任何管理 API？

> ID：15828724
> 
> 赞同：0
> 
> 时间：2013-04-05T07:57:47.133
> 
> 标签：azure

我们分析了管理 API，但找不到用于查找 Azure VM 位置的 API。Azure VM 位置相当于其云服务位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:31:41.557

由于要创建虚拟机 Windows Azure 会自动创建云服务（并在其中托管该 VM），因此您可以使用[`Get Hosted Service Properties`](http://msdn.microsoft.com/en-us/library/windowsazure/ee460806.aspx)功能来查找位置，这就是您的 VM 的位置。如果您使用位置创建了 VM，那么这应该足够了。

但是，如果您使用关联组创建 VM，您将无法在该 API 调用中获取位置，但您将获得关联组。在这种情况下，您可以调用[`Get Affinity Group Properties`](http://msdn.microsoft.com/en-us/library/windowsazure/ee460789.aspx)并获取该关联组的位置，这将是您的 VM 的位置。

# c# - 计时器仅在表单关闭后启动

> ID：15828725
> 
> 赞同：1
> 
> 时间：2013-04-05T07:57:50.323
> 
> 标签：c#, winforms, timer, compact-framework2.0

我目前正在开发一个在装有 MS Compact Framework 2.0 的 Windows CE 5 设备上运行的 C# 应用程序。在这个应用程序中，我通过 BeginInvoke 从键盘挂钩异步调用单例对话框：

```
this.BeginInvoke((ThreadStart)delegate()
{
    DlgX.getInstance().display(TaskController.getInstance().getActiveTask().getValues(), true);
}); 
```

在对话框的显示方法中我想将焦点设置到某个控件。由于 Win CE 设备非常慢，我必须使用计时器来延迟 Focus() 的执行：

```
System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
timer.Interval = 600;
timer.Enabled = true;
timer.Tick += (EventHandler)delegate(object obj, EventArgs args)
{
    button1.Focus();
    timer.Dispose();
}; 
```

不幸的是，这不起作用。关闭对话框后，计时器就会立即执行。我究竟做错了什么？

预先感谢您的任何帮助！

编辑：这是对话框的整个 display() 方法：

```
public void display(List<InputRow> fvList, bool validate)
{
    this.fvList = fvList;
    ctlCount = (fvList.Count > 5 ? 5 : fvList.Count);
    for (int i = 0; i < ctlCount; i++)
    {
         //some 100% irrelevant stuff
    }
    button1.KeyDown += new KeyEventHandler(btnOK_KeyDown);
    button1.Click += new EventHandler(btnOK_Click);
    if (!this.Visible)
    {
        ShowDialog();
    }
    if (validate)
    {
        System.Windows.Forms.Timer timer = new System.Windows.Forms.Timer();
        timer.Interval = 600;
        timer.Enabled = true;
        timer.Tick += (EventHandler)delegate(object obj, EventArgs args)
        {
            button1.Focus();
            timer.Dispose();
        };
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:24:47.913

关闭表单时会评估计时器实例化和启用，因为`ShowDialog`它是*同步*的。你应该把你的计时器放在你的前面`ShowDialog`

# android - 使用 tesseract 优化图像以进行文本识别

> ID：15828728
> 
> 赞同：0
> 
> 时间：2013-04-05T07:58:01.047
> 
> 标签：android, opencv, tesseract

我的 android 项目有用户 tesseract ocr 来识别从相机拍摄的图像中的文本。但结果并不准确。我想使用opencv优化图像。**我想为以Bitmap.Config.ARGB_8888**格式解码的捕获图像实现以下目标：

1.  检测调整大小的图像中的对象。
2.  一旦对象被识别，计算它的边界 wrt 原始图像。（这是为了去除相机角度效果）
3.  通过应用透视变换从原始图像中提取对象。
4.  应用白平衡以消除亮化效果。

在 tess_two api 提供的示例中，他们使用**Leptonica**进行图像处理，例如在单词周围绘制边界框。但在我的情况下，我想使用**OpenCV** ...您的指导将不胜感激...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:15:50.520

这是你要求的很多，并且取决于对象可能是不可能的。您应该查看有关 2D 特征检测和对象检测的教程（[http://docs.opencv.org/doc/tutorials/features2d/table_of_content_features2d/table_of_content_features2d.html](http://docs.opencv.org/doc/tutorials/features2d/table_of_content_features2d/table_of_content_features2d.html)和[http://docs.opencv.org/doc/tutorials/ objdetect/table_of_content_objdetect/table_of_content_objdetect.html](http://docs.opencv.org/doc/tutorials/objdetect/table_of_content_objdetect/table_of_content_objdetect.html)）看看是否有什么可以使用的。

白平衡对照明没有任何作用，您应该进行自适应阈值处理或某种高通滤波。

# objective-c - 如何将主界面字段设置为空白？

> ID：15828733
> 
> 赞同：1
> 
> 时间：2013-04-05T07:58:28.563
> 
> 标签：objective-c, xcode, ipad

我在项目中使用 MainWindow-iPad 作为主界面。但现在我动态设置窗口`application:didFinishLaunchingWithOptions:`

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease]; 
```

所以我不需要 iPad 部署信息的主界面字段中的任何值。但是当我尝试清除这个字段时，它变成了 MainWindow。但我只为 iPhone 使用 MainWindow.xib。我想将主界面留空。我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T13:28:05.277

如果您使用情节提要，解决方案是取消选中“是初始视图控制器”。部署信息中的属性仍将被设置，但启动它会失败，因为它在这个故事板中找不到默认的视图控制器。相反，您在 didFinishLaunchingWithOptions 中执行的代码会被执行，因此结果是窗口将以您想要的界面开始。

# sql-server - 多部分标识符无法绑定sql server

> ID：15828736
> 
> 赞同：3
> 
> 时间：2013-04-05T07:58:38.477
> 
> 标签：sql-server

我正在尝试基于三个表检索行列表：`competences`, `user_competences`, `skills`. 我尝试以下查询，但它说

> 无法绑定多部分标识符“skillmgt.timestamp”

询问：

```
SELECT 
   Competences.*, User_Competence.e_ID
FROM 
   Competences 
INNER JOIN
   User_Competence ON User_Competence.c_ID = Competences.Competence_ID
WHERE 
   User_Competence.e_ID = 112 
   AND DATENAME(yyyy, skillmgt.timestamp) = YEAR(GETDATE()) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:02:14.780

您的“多部分标识符” Skillmgt.timestamp 无效，因为 Skillmgt 没有引用您在查询中使用的表或别名。你的意思是加入那张桌子吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T10:13:37.107

看看这是否有帮助

```
SELECT Competences.*, User_Competence.e_ID  
FROM Competences  
    INNER JOIN User_Competence ON User_Competence.c_ID = Competences.Competence_ID  
    INNER JOIN skillmgt SM ON User_Competence.e_ID = SM.eid  
WHERE  
    User_Competence.e_ID = 112  
    AND DATENAME(yyyy, SM.timestamp) = YEAR(GETDATE()) 
```

# html - 从 div 中剪出形状（三角形）并在后面显示背景

> ID：15828745
> 
> 赞同：0
> 
> 时间：2013-04-05T07:59:04.923
> 
> 标签：html, css

我正在尝试从 div 中切出一个三角形并显示 div 后面的背景...射击:-)

这就是我想要实现的（抱歉图像模糊）：

![剪出的三角形](https://i.stack.imgur.com/MBnKR.png)

***[请不要用 3 列解决方案或类似的解决方案来回答这个问题，我完全有能力以这种方式实现这一点......我只是想知道是否有任何很酷的 CSS 技巧可以通过少数几个来实现这一点图形，如果不是没有图形，尽可能？]***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T09:50:40.997

可以通过一些幻想和一些小技巧来伪造它：

*   用于`border-radius`切出div的透明角；
*   使用`::before`（或`::after`）伪元素创建一个与 div 相同背景颜色的大三角形；
*   用于`z-index`将三角形*放在*背景 div 之上，但在*div**内容*之下；
*   使用`transparent`与你的div大小相同的容器来容纳它，并申请`overflow: hidden`切割三角形的超出部分；

    等等！

**演示**：http: [//jsfiddle.net/e2Umv/](http://jsfiddle.net/e2Umv/)

不，我不知道这是可能的，我只是喜欢挑战和棘手的问题:)

HTML

```
<div class="someText" >
    this text is partially visible;<br/>
    this text is partially visible;<br/>
    this text is partially visible;<br/>
    this text is partially visible;<br/>
    this text is partially visible;<br/>
</div>
<div class="underneathContainer">    
    <div class="cutout">Hello cut out div</div>
</div> 
```

CSS

```
.someText{    
    background: green;
    position: absolute;
    z-index: 0;    
    top: 0;
}

.underneathContainer{
    margin: 20px;
    width: 260px;
    height: 260px;
    background: rgba(0,0,0,0);    
    overflow: hidden;
}

.cutout{    
    width: 200px;
    height: 200px;    
    background: silver;
    padding: 30px;    
    position: relative;
    z-index: 1;
    border-top-left-radius:30%;    
}
.cutout:before{    
    content: '';
    position: absolute;
    top: -44px;
    left: -30px;
    border-width: 60px 60px 60px 60px;
    border-style: solid;
    border-color: rgba(0,0,0,0) silver silver rgba(0,0,0,0);
    z-index: -1;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:11:17.087

我能想到的唯一适用于此的是[图像蒙版](http://thenittygritty.co/css-masking)。您可能必须将一个元素放在另一个元素之上才能在蒙版上显示内容。

对图像掩码的支持并不普遍（我相信目前只有 webkit），但这可能会随着时间的推移而改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T09:17:45.220

您可以将三角形与矩形分开并使用以下内容：

```
<div id="rectangle"><div id="mask"></div></div>

#rectangle{width:300px; height:120px; position:relative; margin-top:100px; background: rgb(30,87,153); /* Old browsers */
/* IE9 SVG, needs conditional override of 'filter' to 'none' */
background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzFlNTc5OSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiM3ZGI5ZTgiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
background: -moz-linear-gradient(top,  rgba(30,87,153,1) 0%, rgba(125,185,232,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(30,87,153,1)), color-stop(100%,rgba(125,185,232,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(30,87,153,1) 0%,rgba(125,185,232,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(30,87,153,1) 0%,rgba(125,185,232,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(30,87,153,1) 0%,rgba(125,185,232,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(30,87,153,1) 0%,rgba(125,185,232,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-8 */
}

#rectangle:after{content:" "; position:absolute; width:0px; height:0px; top:0; left:100px;border:1px solid white; border-color:transparent white transparent white; border-width:0px 50px 50px 50px;}

#mask{position:absolute; left:0; width:100px; height:50px; background:white;}
#mask:after{position:absolute; content:" "; left:200px; width:100px; background:white; height:50px; } 
```

[在这里](http://jsfiddle.net/Qs4a8/2/)拉小提琴。

# java - 根据收到的短信找出手机的位置

> ID：15828757
> 
> 赞同：0
> 
> 时间：2013-04-05T07:59:38.290
> 
> 标签：java, mobile, sms, location

我正在创建一个 java 应用程序来使用`jsms`API 在 pc 上接收消息。每当用户向拒绝发送特定消息时，它都会接收该消息并将其添加到数据库、电话号码和它所属的区域/地区。

区域可以是电话号码注册的区域，也可以是设备的当前位置。这些信息中的任何一个都会对我有所帮助。

如果有人可以指导我如何继续使用 java 代码找出该区域，我将非常高兴。

注意：我不是在寻找国家。我正在寻找州/地区。首选印度州。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:09:26.880

你可以试试[libphonenumber](https://code.google.com/p/libphonenumber/)。它基本上根据数字定义区域。

[这里](http://libphonenumber.googlecode.com/svn/trunk/javascript/i18n/phonenumbers/demo.html)有一个 JavaScript 尝试页面，您可以执行一些测试。

# c# - 将 DBContext 范围放入 IService

> ID：15828759
> 
> 赞同：1
> 
> 时间：2013-04-05T07:59:39.927
> 
> 标签：c#, .net, asp.net-mvc, entity-framework, ninject

我有一个网络应用程序和一个 Windows 服务应用程序。

Web 应用程序注入`IPersonService`到它的 MVC 控制器中。

Windows 应用程序也使用`IPersonService`.

例如，该服务需要 3 个依赖`IPersonRepo, IAddressRepo, IEmploymentRepo`项。

存储库的实现`DBContext`用于实体框架。

在网络应用程序中，我可以将 DBContext 注册为 `Bind<MyContext>().ToSelf().InRequestScope();`

在 Windows 服务中它更棘手。我可以离开它，这样 DBContext 是瞬态的，但这似乎是错误的。

所以我认为我可以让服务成为确定 DBContext 生命周期的范围，但我完全不确定我将如何去做以确保它适用于 Web 应用程序和 Windows 服务应用程序。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:59:20.167

如果所有 3 个存储库都使用相同的 DbContext 实例很重要，您可以执行以下操作：

```
var context = new DbContext(...);

Bind<IPersonRepo>().To<PersonRepo>().WithConstructorArgument("dbContext", context);
Bind<IAddressRepo>().To<AddressRepo>().WithConstructorArgument("dbContext", context);
Bind<IEmploymentRepo>().To<EmploymentRepo>().WithConstructorArgument("dbContext", context); 
```

像这样在 repos 之间共享相同的上下文实例。

如果存储库不知道彼此的实体（以及对这些实体的更改），您可以通过在瞬态范围内绑定（默认行为）简单地在每个 repo 中注入一个新的 DbContext 实例：

```
Bind<MyContext>().ToSelf(); 
```

# android - 在android中的framelayout中隐藏片段

> ID：15828760
> 
> 赞同：1
> 
> 时间：2013-04-05T07:59:43.460
> 
> 标签：android, android-fragments, android-framelayout

我遇到了一个小问题，因为我在 framelayout 中显示了我的片段，没有任何问题，但是当我尝试隐藏片段时，它不会隐藏并保持显示在我的布局中。

这是我所做的：

```
Fragment fragment = new FooterClass();      
FragmentTransaction ft = getSupportFragmentManager().beginTransaction(); 
```

显示片段

```
ft.setCustomAnimations(R.anim.slide_left_in, R.anim.slide_left_out).show(fragment).replace(R.id.footer_layout, fragment).commit(); 
```

隐藏片段

```
ft.setCustomAnimations(R.anim.slide_left_out, R.anim.slide_left_in).hide(fragment).commit(); 
```

它显示完美但不隐藏帮助我

# vb.net - XSD 数据验证在 .Net 4.0 中是否可靠？

> ID：15828764
> 
> 赞同：0
> 
> 时间：2013-04-05T07:59:54.570
> 
> 标签：vb.net, .net-4.0, xsd, validation, xmlschemaset

我使用服务提供者提供的 WSDL 和几个 XSD 文件编写了一个公共 SOAP Web 服务的客户端。我想找到一种简单的方法来根据 XSD 文件验证用户数据，因此我使用了 MSDN 中的标准示例，对 XSD 文件使用 XmlSchemaSet、XmlReader 和验证例程来捕获错误消息。（代码可在[http://msdn.microsoft.com/en-us/library/as3tta56.aspx](http://msdn.microsoft.com/en-us/library/as3tta56.aspx)) 它适用于某些数据元素，但其他数据元素在无效时不会引发错误。如果我包含“ValidationFlags = ValidationFlags 或 XmlSchemaValidationFlags.ReportValidationWarnings”，则会收到很多警告，例如“找不到元素 'MyRequest' 的架构信息”、“找不到属性 'TheDate' 的架构信息”、等等，但我可以在 VS2010 IDE 中打开 XSD 文件，它的 XML Schema Explorer 会显示这些元素和属性。

因此，对于熟悉以这种方式在 VS2010 中验证 XML 数据的人来说，我的主要问题是，XmlReader 验证可以处理的 XSD 文件的复杂性是否存在限制？目标命名空间的前缀是否会混淆 XmlReader？架构中定义了数千种复杂类型，分布在 7 个 XSD 文件中，这就是为什么我希望自动处理它，而不是为每个用户输入字段编写验证例程。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:26:12.920

.NET 验证可能并不完美，但它是业内最好的。他们肯定遇到的一个问题是模式加载器（我们使用自己的），它有时太容易被愚弄（我会说）。除上述内容外，我不知道您描述的任何其他限制。我们经常使用 .NET XmlSchemaSet 来加载和验证分布在**数百个**文件中、各种命名空间组合以及数千个元素、类型等的XSD。

# python - Django：我想识别一个哈希 url

> ID：15828765
> 
> 赞同：5
> 
> 时间：2013-04-05T07:59:56.113
> 
> 标签：python, django, web-services

我有一个像 `http://localhost/user/?hash={hash value generated}`

我需要配置 urls.py 以便识别此表单的任何 url 并且不会出错。

我目前将 urls.py 写为

`url(r'^user/(?P<hash>\w+)/$', 'Myapp.views.createnewpass'),`

这为有效哈希提供了 404 错误。

我该如何纠正这个错误？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T08:06:04.333

好吧，您应该清楚正则表达式与 URL 不匹配：它正在寻找 /user/hash/ 形式的 URL，而您有 /user/?hash=hash。

在任何情况下，查询参数（那些在 ? 之后的）都不会被 urls.py 处理，它们是在 request.GET 中传递的。所以你的 URLconf 应该只是`r'^user/$`.

# xml - 当我尝试解析 xml 时，名称不能以“：”字符开头，十六进制值 0x3A”

> ID：15828767
> 
> 赞同：2
> 
> 时间：2013-04-05T08:00:04.323
> 
> 标签：xml

我在尝试解析 xml 时收到错误消息“名称不能以 ':' 字符开头，十六进制值 0x3A”。xml 如图片中所附。你能帮我解决这个问题吗？我正在使用以下代码行来解析文档。我不知道为什么会出现这个错误，因为它只是在客户端网络中崩溃。在我这里，当我运行代码时，我没有收到任何错误。

xml如下。

```
<Fields>
  <Field name="ows_Target" value="jiraDevInstance" />
  <Field name="ows_MappingXML" value="<Mappings> 
  <Mapping id="1" source="EndDateTime" sourceDataType="DateTime" sourceDataFormat="MM/dd/yy hh:mm tt" target="duedate"  targetDataType="DateTime" targetDataFormat="YYYY-MM-DD hh:mm tt zzz"/><Mapping id="2" source="IssueRaisedBy"    sourceDataType="string" sourceDataFormat="#-1:domain/username" target="reporter" targetDataType="string"        targetDataFormat="username" /><Mapping id="3" source="RAName" sourceDataType="string" sourceDataFormat="#-          1:domain/username" targetDataType="string" target="submitter" targetDataFormat="username" /><Mapping id="4"             source="RCAComments" sourceDataType="string" target="summary" targetDataType="string" /><Mapping id="5"             source="RAComments" sourceDataType="string" target="summary" targetDataType="string" /></Mappings>" />
  <Filters>
    <Field name="TicketNumber" value="DT_MINT_2025" />
    <Field name="RemedyIncidenetNumber" />
  </Filters>
</Fields> 
```

我正在尝试将子节点的 xml 值分配给另一个 xml 文档。

```
XmlNode mappingNode;
mappingNode = inDoc.CreateElement("sample");
XmlNamespaceManager xmlNS = new XmlNamespaceManager(inDoc.NameTable);
xmlNS.AddNamespace("my", inDoc.NamespaceURI);
if (inDoc.SelectSingleNode("my:Fields/my:Field[@name='ows_MappingXML']",xmlNS) != null 
```

&& inDoc.SelectSingleNode("my:Fields/my:Field[@name='ows_MappingXML']",xmlNS).Attributes["value"].Value != null) mappingNode.InnerXml = inDoc.SelectSingleNode("my:Fields /my:Field[@name='ows_MappingXML']",xmlNS).Attributes["value"].Value;

inDoc.NamespaceURI 为空，而名称表中有一些条目。

任何帮助将不胜感激。如果您需要更多详细信息，请回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:56:35.867

我不太清楚为什么您会收到特定的错误消息，但是您不能以这种方式将 XML 元素放入 XML 属性中（`value="<Mappings> ...</Mappings>"`）。它根本不是 XML。

无法真正帮助您修复它，因为这完全取决于坏 XML 的来源。

# css - 背景图像路径无法正确渲染

> ID：15828771
> 
> 赞同：0
> 
> 时间：2013-04-05T08:00:16.910
> 
> 标签：css, django, background-image, less

我使用 Django Compress 能够直接使用更少的文件，而不必将它们转换为 css 文件，除了由于某种原因没有正确翻译路径的背景图像之外，它工作正常。

较少的文件链接到 base.html，如下所示：

```
<link rel="stylesheet/less" type="text/css" media="all" href="{{ STATIC_URL }}css/less/style.less" /> 
```

图像位于*static/images*中，而 less 文件位于*static/css/less*中。在较少的文件中，我像这样链接到它们：

```
background-image:url(".../images/sprite.png"); 
```

...应该可以正常工作，但根本不工作。查看渲染的 css 时，背景图像路径是：

```
"http://localhost:8000/static/css/less/.../images/sprite.png" 
```

出了什么问题，我该如何解决？

**注意：**我尝试了 1、2 和 3 个点，但没有任何运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:13:53.727

由于您的图像位于静态文件夹中，因此您必须返回两个目录：

```
backgroun-image: url('../../images/sprite.png'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:17:50.707

你的路径看起来不对。你的css找不到路径的路径，你可以检查路径并测试它！

尝试使用 2

```
background-image:url("../images/sprite.png") no-repeat;
background:1px solid red; 
```

看看有没有东西退出

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:06:44.730

三个点而不是两个。修复它。

```
background-image:url("../images/sprite.png"); 
```

# c# - 旧打印机文本格式c#

> ID：15828774
> 
> 赞同：1
> 
> 时间：2013-04-05T08:00:19.890
> 
> 标签：c#, printing, formatting, plaintext

我有以下 1996 年 UNIX 机器生成的输出...我们正在升级适用于 Windows 的软件，我需要从 C#创建这个确切的输出[http://pastebin.com/YBHpSYDW](http://pastebin.com/YBHpSYDW)

有些问题我无法处理，因为我不知道如何...

如果是纯文本，我如何确定列，将“IMPORTE”列设置为右侧？

我在 Excel 中完成了这个更易读、更灵活的输出。但他们想要这些令人毛骨悚然的旧东西*，因为有很多原因*，他们为这些人工作会变得疯狂，他们不想升级任何东西，只是软件，但保留所有令人毛骨悚然的旧东西@输出......

因此，如果有人知道这样做的方法，那将非常有帮助，谢谢。

**编辑** 输出是来自 SQL Server 的数据列表，旧数据存储在 MultiValue .DAT 和 .IDX 文件中，但现在它们在 SQL Server 中......所以基本上，生成值的代码如下

```
var Query = getRows(sel.DataTable).Select(row =>
{
    return new
    {
        banco = row["banco"].ToString(),
        emisora = row["emisora"].ToString(),
        sucursal = row["sucursal"].ToString(),
        fecha = row["fecha"].ToString(),
        identificacion = row["identificacion"].ToString(),
        importe = row["importe"].ToString(),
        importe_dec = row["importe_dec"].ToString(),
        provincia = row["provincia"].ToString(),
        referencia = row["referencia"].ToString(),
    };
}); 
```

然后我做一些 foreach 来创造魔法......例如

```
foreach (var banco in Query.GroupBy(l => l.banco)) 
```

所以问题是打印的输出文件......

**编辑 2** 得到它的工作，这是代码

```
private void generarFicheroPrt()
{
    try
    {
        SelectBD sel = new SelectBD(Program.ConexBD, "SELECT * FROM Seguros");
        var Query = getRows(sel.DataTable).Select(row =>
        {
            return new
            {
                banco = row["banco"].ToString(),
                emisora = row["emisora"].ToString(),
                sucursal = row["sucursal"].ToString(),
                fecha = row["fecha"].ToString(),
                identificacion = row["identificacion"].ToString(),
                importe = row["importe"].ToString(),
                importe_dec = row["importe_dec"].ToString(),
                provincia = row["provincia"].ToString(),
                referencia = row["referencia"].ToString(),
            };
        });
        using (StreamWriter sw = new StreamWriter(Program.path + @"\CV9005.prt"))
        {
            int i = 1;
            int pag = 0;
            int linea = 1;
            sw.WriteLine();
            sw.WriteLine("\x1b&l1O\x1b(s14H");
            decimal total = 0;
            foreach (var valor in Query.OrderBy(l => l.emisora))
            {
                if (linea == 48) linea = 1;
                if (linea == 1)
                {
                    pag++;
                    sw.WriteLine("\xc\t0125 BANCOFAR" + string.Empty.PadLeft(37, '\x20') + "COBRO POR VENTANILLA S. S. - CONTROL DE DOCUMENTOS     PAG.     "+ pag  +"\n\n");
                    sw.WriteLine("\t N.ORDEN  NUMERO REFERENCIA           IMPORTE  SUC.  EMISORA");
                    sw.WriteLine("\t -------  -----------------  ----------------  ----  -----------------------------------------------------------");
                    sw.WriteLine();
                }
                setSufijoEmisora(valor.emisora);
                decimal importe = Convert.ToDecimal(Int32.Parse(valor.importe) + "," + valor.importe_dec);
                string imp = importe.ToString("N2", Cultures.Spain);
                sw.WriteLine("\t\t" + string.Format("{0, 4}\t{1, -13}\t\t{2, 13}{3,6}  {4, -59}", i.ToString(), valor.referencia, imp, valor.sucursal, valor.emisora + " " + sufijoEmisora));
                i++;
                linea++;
                total = total + importe;
            }
            sw.WriteLine();
            sw.WriteLine("\t\t\t\t\t TOTAL .....\t" + string.Format("{0, 13}", total.ToString("N2", Cultures.Spain)));
        };
    }
    catch (Exception ex)
    {
        Logger.log(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:24:04.693

使用工具箱中的“PrintDocument”工具。

[http://msdn.microsoft.com/en-gb/library/system.drawing.printing.printdocument%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-gb/library/system.drawing.printing.printdocument%28v=vs.110%29.aspx)

这将帮助您进行基本的格式化。

**编辑**

要获得更丰富的格式和保存到文件，请使用 Microsoft.Office.Core 命名空间，

[http://msdn.microsoft.com/en-us/library/microsoft.office.core.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.core.aspx)

如果您想要非 ASCII 编码，请确保根据您的要求设置编码并使用所需的编码保存文件。

[http://msdn.microsoft.com/en-us/library/microsoft.office.core.msoencoding.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.core.msoencoding.aspx)

```
using(StreamWriter writer = new StreamWriter("a.txt", false, Encoding.UTF8))
{
   writer.WriteLine(s);
} 
```

# html - 选择 youtube 视频的 iframe

> ID：15828775
> 
> 赞同：0
> 
> 时间：2013-04-05T08:00:23.117
> 
> 标签：html, css, iframe, youtube

我有一个显示 youtube 视频图像的页面，用户可以从中选择视频。我像这样展示它们

```
<ul>
    <li>
        <div class="youtubeMediaContainer">
            <img src="video_preview_image1.jpg">
            <img src="play_icon.png">
        </div>
    </li>
    <li>
        <div class="youtubeMediaContainer">
            <img src="video_preview_image2.jpg">
            <img src="play_icon.png">
        </div>
    </li>
<ul> 
```

用户可以通过单击容器（图像，播放图标占用的区域除外）从此处选择这些视频（*通过选择我的意思是容器上出现一个大边框，指示其被选中）。*但是用户也可以通过点击播放图标来播放这些视频。单击时，*youtubeMediaContainer*的内容将替换为播放视频的 youtube iframe。

现在的问题是播放视频后，用户现在如何选择该视频。我可以在 iframe 上放置各种叠加层吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T23:36:59.877

为什么不在条目中创建一个单独的播放器 div 呢？方式：

```
<ul>
    <li>
        <div class="youtubeListEntry">
            <img src="video_preview_image1.jpg">
            <img src="play_icon.png">
            <div id="youtubeMediaPlaceholder1"></div>
        </div>
    </li>
    <li>
        <div class="youtubeListEntry">
            <img src="video_preview_image2.jpg">
            <img src="play_icon.png">
            <div id="youtubeMediaPlaceholder2"></div>
        </div>
    </li>
<ul> 
```

这样，您仍然可以保留原始结构，以便让用户选择视频。

# java - 运行存储在数据库字段中的 JSTL 代码

> ID：15828779
> 
> 赞同：0
> 
> 时间：2013-04-05T08:00:34.870
> 
> 标签：java, jsp, servlets, jstl, render

我想从存储到数据库中的字段生成动态页面。

如果我在将此代码打印到 JSP 页面时将 html 代码存储到数据库中，则该代码由导航器呈现。但是当我**将 JSTL 代码存储到数据库**中时，servlet 不会呈现此代码。

**数据库中的字段**：`<h1>Hello<c:out value="World"><c:/out></h1>`

**JSP代码**：`<c:out value="${module.content}">`

**导航响应**：`Hello`

**HTML 源代码**：`<h1>Hello<c:out value="World"><c:/out></h1>`

因此存储到数据库中的 JSTL 代码不会由 servlet 呈现。

是否有任何选项可以将 JSTL 代码存储到通过 servlet 呈现的数据库中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:11:13.763

JSP 文件被“编译”并转换为 Java 类文件，因此 JSP 接收到的每个值都只是数据，不能作为源代码的一部分添加。我认为你正在尝试做的是相当于这个：

```
String s=" a + b";
int a=1;
int b=1;
System.out.println("s"); //It won't show "2" 
```

# pentaho - 我如何在 Saiku 中管理示例数据源

> ID：15828780
> 
> 赞同：0
> 
> 时间：2013-04-05T08:00:41.860
> 
> 标签：pentaho, saiku

我在 Pentaho 4.8 中将 Saiku 作为插件安装。Saiku 附带了 SteelWheels 的示例数据。用户可以在下拉框中选择“选择一个立方体”。我只需要知道如何修改该示例数据中的数据？包含数据存储的文件在哪里？数据库如何与 XML 文件通信？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:28:57.360

您必须在 pentaho 模式工作台或 pentaho BI Server 中创建一个多维数据集。如果您在 Schema Workbench 中创建它，那么您必须在将模式发布到双服务器后发布它，您将能够直接在 Saiku 中看到选定的多维数据集服务器..

# jakarta-ee - Java EE 项目的体系结构

> ID：15828781
> 
> 赞同：1
> 
> 时间：2013-04-05T08:00:42.777
> 
> 标签：jakarta-ee, architecture, static, war, ear

我有一个带有 EAR 和 4 个 WAR 的 Java EE 项目。我有一些在战争中使用的 pojo。它们是包含静态变量和方法的类，并且在 WAR 中应该是相同的。它们应该放在哪里？

一些背景：我在其中一场战争中用常用的 pojos 继承了该项目。但是，我希望所有 4 个 WAR 都引用一些新的静态访问类的同一个实例。这在其中一场战争中是不可能的，因为每个 WAR 似乎都采用了它自己的静态类的运行时实例，并且在一个 WAR 中更改类并不会导致对另一个 WAR 中的类进行更改。

因此，为了解决这个问题，我将其安装在一个 JAR 中并将其部署到服务器上。但是现在每次部署项目时，如果 JAR 发生更改，也必须在服务器上构建和安装 JAR。

在这里部署它的人不喜欢这种架构，我想知道是否有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:11:05.697

是的，WAR 文件将在各自的类加载器下加载，因此它们看不到彼此的类。

您可以将 JAR 文件放在 EAR 的根目录中，并在每个 WAR 的清单中引用它。这些 JAR 有时称为“实用程序 JAR”。

我同意这种自包含部署比在其他地方拥有单独的 JAR 文件更可取。

# android - java.lang.RuntimeException：存根！在 Android 项目中运行 Junit

> ID：15828782
> 
> 赞同：6
> 
> 时间：2013-04-05T08:00:45.653
> 
> 标签：android, junit4

在一个 android 项目中，我尝试运行简单的 junit 测试。他们总是失败：

```
java.lang.RuntimeException: Stub!
at org.apache.http.impl.client.AbstractHttpClient.<init>(AbstractHttpClient.java:5)
at org.apache.http.impl.client.DefaultHttpClient.<init>(DefaultHttpClient.java:7)
at com.my.android.JsonParser.getJSONFromUrl(JsonParser.java:27)
at com.my.android.test.JsonParser_Test.getJson(JsonParser_Test.java:19) 
```

这是它失败的路线，任何新的班级启动都会这样做。

```
 public JSONObject getJSONFromUrl(String url) {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        ...
 } 
```

在几篇文章中，我发现`junit`jar 应该包含在`Android SDK`. 我这样做了`IntelliJ`，但我没有帮助。我正在使用`junit 4.9`和`Android SDK 4.2.2`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:02:23.953

我认为 robolectric 可能对你有用。

> 在 Android 模拟器或设备上运行测试很慢！构建、部署和启动应用程序通常需要一分钟或更长时间。这不是做TDD的方法。一定会有更好的办法。
> 
> 直接从 IDE 内部运行 Android 测试不是很好吗？也许您已经尝试过，但被可怕的“java.lang.RuntimeException: Stub!”挫败？

[http://pivotal.github.com/robolectric/](http://pivotal.github.com/robolectric/)

# ios - 如何嵌套块以使它们同时结束

> ID：15828786
> 
> 赞同：0
> 
> 时间：2013-04-05T08:01:02.920
> 
> 标签：ios, objective-c, grand-central-dispatch

我如何将这个方法变成一个块，直到'request startWithCompletionHandler'块完成它的请求和它自己的块中的代码？

我有一系列需要按顺序调用的块，但它们都需要代码来发送它们的请求。试图找到一种干净的方式来完成任务。

```
+(void)???????? ^block()
{
    FBRequest *request = [FBRequest requestForGraphPath:kFacebookQueryMeKey];
    [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
        ....
    }];
} 
```

添加信息：是的，我希望外部函数等到内部函数完成

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:13:42.593

这取决于你的意思。鉴于您的示例代码，您似乎希望您的函数在嵌套块完成时调用一个块。所以你想要这样的东西：

```
+ (void)doMyThingWithBlock:(void(^)(void))block
{
    FBRequest *request = [FBRequest requestForGraphPath:kFacebookQueryMeKey];
    [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

        // do whatever you want with the connection ...

        if (block) block();

    }];
} 
```

另一方面，也许您希望外部函数在返回之前等待嵌套块完成。在这种情况下，它有点复杂。您需要使用锁来等待块完成，如下所示：

```
#define kMyThingNotDone 0
#define kMyThingDone    1

+ (void)doMyThingAndWait
{
    NSConditionLock *lock = [[NSConditionLock alloc] initWithCondition:kMyThingNotDone];

    FBRequest *request = [FBRequest requestForGraphPath:kFacebookQueryMeKey];
    [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

        // do whatever you want with the connection ...

        [lock lock];
        [lock unlockWithCondition:kMyThingDone];

    }];

    [lock lockWhenCondition:kMyThingDone];
    [lock unlock];
} 
```

请注意 - 您不想在主线程上执行此操作，否则您将锁定用户界面。您还必须确保请求不会等待您从中调用它的线程上发生任何事情，否则您将最终陷入死锁。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-05T08:10:19.057

如果您唯一的要求是按顺序执行请求而 FBRequest 不为您执行（我不熟悉 API），则一种选择是将这些调用包装在串行队列中。

```
dispatch_queue_t mySerialQueue = dispatch_queue_create("com.mycompany.serializedrequests", NULL);
dispatch_async(mySerialQueue, ^{
   FBRequest *request = [FBRequest requestForGraphPath:kFacebookQueryMeKey];
   [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    ....
   }];
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T08:55:03.953

使用 facebook 之类的 API，您永远不会预先知道请求将花费多长时间（网络条件的变化/两端的负载/ ....），所以我不会使用任何线程锁定/等待它。

如果您将一个块传递给您的方法（它也可以封装其他块以按顺序执行）：

```
+(void) getFacebookDataWithCompletion:(void (^)(<some parameters))completion {

    FBRequest *request = [FBRequest requestForGraphPath:kFacebookQueryMeKey];
    [request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

       if (!error)
       {
           //Do your thing with the facebook result (update user info, ....)
       }
       if (completion)
       {
           //Now that you have what you need from fb run your block(s) 
           completion(<params>);
       }

    }];
  } 
```

# ruby-on-rails - 重构 Fat ActiveRecord 模型，现在怎么办？

> ID：15828787
> 
> 赞同：3
> 
> 时间：2013-04-05T08:01:10.320
> 
> 标签：ruby-on-rails, activerecord, refactoring

我一直在使用 CodeClimate 来改进我的代码库，并且我有一个模型类，对于那些不使用 CodeClimate 的模型类来说，它落在“方法之外的定义”和“总体复杂性”上，方法之外的定义是指类关联和验证等定义。总的整体复杂性就是它所说的，即我的个人方法都不是太复杂，以至于整个类都太复杂了。

现在我明白这可能是一个错误的立场，但我的分数上的 D 类很烦人，我很可能可以做更多的事情来改进这门课，所以我的问题是：

**如果我应该做些什么来简化这个 ActiveRecord 类呢？**

我的主要问题是我已经用尽了所有关于重构胖模型的方法，使用这篇文章[http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat- activerecord-models/](http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/)和类似的，我基本上只剩下：

*   范围 x2
*   attr_accessible x2
*   载波支架 x1
*   验证器 x4
*   协会 x16
*   Accept_nested_attributes_for x1
*   钩子，例如 after_save x3
*   对各种其他属性进行一些计算的方法，以使我的视图更具语义化且更易于理解
*   围绕关联的方法，处理空关联，合并关联

它是一个闭源项目，但鉴于此类中缺乏领域逻辑，我在这里分享了它。[https://gist.github.com/msaspence/5317419](https://gist.github.com/msaspence/5317419)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:17:55.830

回调是地狱。我的意思是，它们很有用，但它们很快就会使您的模型超载。

你的控制器中有一个动作来处理取消发布的事情吗？

如果是这样（我希望如此），可以将其移动/提取到服务对象：

```
after_save :email_author_if_first_published
def email_author_if_first_published
  if pending_was == true && pending == false
  self.create_activity key: 'action.publish'
  delay.send_action_published_email
end
end

def send_action_published_email
  ActionAuthorMailer.action_published(self, self.user).deliver
end 
```

* * *

这不应该属于模型，一些演示者应该更好：

```
def mixpanel_data_points
  {
    campaign_id: campaign_id,
    cause_id: cause_id
  }
end

def open_graph_type
  'campaign_action'
end

def facebook_invite_message
  "Please help me raise awareness on PatientsCreate. It'll take you 5 seconds and could create genuine change. Thanks"
end

def percentage_completed
  v = (participation_count.to_f/participation_target_count.to_f)*100
  v > 100.0 ? 100.0 : v
end 
```

* * *

这似乎不太好：

```
after_update :update_campaing_actions_count
def update_campaing_actions_count
  Campaign.decrement_counter(:actions_count, self.campaign_id_was)
  Campaign.increment_counter(:actions_count, self.campaign_id)
end 
```

因为即使没有更改campaign_id，您也会这样做

* * *

这看起来很糟糕：

```
def url
  open_graph_url "/actions/#{id}"
end 
```

* * *

不能说更多，我真的不知道在其他方法中什么是纯粹的数据或表示

# java - 当鼠标不再悬停在链接上时，SWT statusText 发生变化

> ID：15828791
> 
> 赞同：0
> 
> 时间：2013-04-05T08:01:34.160
> 
> 标签：java, browser, swt

我正在使用 SWT 创建一个 Web 浏览器，但在使用状态文本侦听器时遇到了问题。当鼠标悬停在链接上时它会更新，但当鼠标不再位于链接上时不会更新。

我尝试在 mouseMoved 侦听器中调用“updateListeners”，但是 statusText 侦听器仅作为类型化侦听器实现，我不相信可以更新，因为没有 SWT.StatusText 常量。我不相信这无论如何都会起作用，因为当鼠标离开链接时，状态文本在内部更新，它可能会改变并调用它自己的更改函数。

有什么建议么？我宁愿不使用 javascript（但如有必要），如果需要在内部更改某些内容，我将从源代码运行 SWT。

谢谢您的帮助！

# c# - jQuery 无法正确反序列化 json 对象

> ID：15828793
> 
> 赞同：0
> 
> 时间：2013-04-05T08:01:47.423
> 
> 标签：c#, jquery, asp.net, json

我无法成功反序列化从后面的 c# 代码传递的 JSON 对象。我一直在研究这 3 个小时，但无法理解原因。

这是我的 json 对象创建

```
struct specialitiy_struct {
    public int id;
    public string name;
};

[WebMethod]
public static string get_specialities(string ProfessionalID)
{
    Database db = DatabaseFactory.CreateDatabase("Connection");
    DbCommand dbCommand;
    dbCommand = db.GetStoredProcCommand("Select_Profes_Speciality");
    db.AddInParameter(dbCommand, "prof_id", DbType.Int16, Convert.ToInt16(ProfessionalID));
    IDataReader dr = db.ExecuteReader(dbCommand);

    List<specialitiy_struct> my_list = new List<specialitiy_struct>();
    specialitiy_struct my_speciality;

    while (dr.Read()) {
        my_speciality = new specialitiy_struct();
        my_speciality.id = Convert.ToInt16(dr["SpecialtyID"].ToString().Trim());
        my_speciality.name = dr["SpecialtyName"].ToString().Trim();
        my_list.Add(my_speciality);
    }
    JavaScriptSerializer serializer = new JavaScriptSerializer();
    return serializer.Serialize(my_list);
} 
```

这是反序列化json对象的jquery代码

```
$.ajax({
     type: "POST",
     url: "NotificationSettings.aspx/get_specialities",
     data: "{'ProfessionalID':'" + <%= Session["ProflId"].ToString().Trim() %> + "'}",
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     success: function (data, status) {
       $.each(data, function (dt) {
          var mydata = data.d;
          var obj = $.parseJSON(mydata);
          $("#txt_speciality").tokenInput("add", { name: obj.name, id: obj.id});
       });
     }
}); 
```

返回的 json 对象是这个

```
 d: "[{"id":67,"name":"Kardiyoloji"},{"id":1,"name":"Acil Tip"}]" 
```

我无法正确反序列化 json 对象，请帮我做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:15:04.453

您的问题是（部分）因为`data.d`是对象数组，而不是单个对象，因此您无法访问它`name`的`id`属性来获取有用的信息（它没有任何信息）。我怀疑你实际上应该做的是迭代`data.d`，而不是`data`像这样：

```
var d = $.parseJSON(data.d);
$.each(d, function(index, dt) {
    $("#txt_speciality").tokenInput("add", { name: dt.name, id: dt.id});
}); 
```

如果您从服务器返回有效的 JSON，那么您应该不需要自己解析它。如果您要返回一个具有 JSON 字符串属性的 JSON 对象，那么您应该更改它，因为绝对没有必要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:05:58.073

试试这个：

```
success: function (data) {
    $.each($.parseJSON(data.d), function (key, value) {
        $("#txt_speciality").tokenInput("add", {
            name: value.name,
            id: value.id
        });
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:11:18.313

我认为你的问题在这里：

```
$.each(data, function (dt) { // <----dt here
      var mydata = data.d; //<----data.d data here 
```

改成这样：

```
success: function (data, status) {
   $.each(data, function (i, dt) {
      var mydata = dt.d;
      var obj = $.parseJSON(mydata);
      $("#txt_speciality").tokenInput("add", { name: obj.name, id: obj.id});
   });
 } 
```

`d: "[{"id":67,"name":"Kardiyoloji"},{"id":1,"name":"Acil Tip"}]"`

似乎不是要循环的有效 json 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T08:16:42.873

你可以试试这个：

```
success: function (data, status) {
           var mydata = $.parseJSON(data);           
           $.each(mydata, function (index, element) {
              $("#txt_speciality").tokenInput("add", { name: element.name, id: element.id});
           });
         } 
```

如果这可行，则 JSON 内容类型可能未正确设置。

# ocaml - 到达标记时停止读取文件

> ID：15828805
> 
> 赞同：1
> 
> 时间：2013-04-05T08:02:15.247
> 
> 标签：ocaml

我有以下代码，只是我正在尝试做的基础知识：

```
let ic = open_in "file.txt" in
try
  while true do
    let line = input_line ic in
    print_endline line
  done
with End_of_file -> close_in ic 
```

我想要做的是将文件读入一个附加每一行的字符串，直到我到达“stop_here”这个词我尝试了几种我自己的方法并且完全搞砸了..这是在Windows操作系统上。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:31:49.970

在`while`循环内，添加一个测试`if line = "stop_here" then raise End_of_file`？

如果您想在仅*包含*此标记的行上停止，请对其进行优化。

# c# - 实体框架缓存问题

> ID：15828811
> 
> 赞同：60
> 
> 时间：2013-04-05T08:02:33.560
> 
> 标签：c#, asp.net-mvc, entity-framework, catch-all

我是实体框架的新手。

我已经使用 EF 在我的数据库中获取了一些值。它完美地返回，并且值显示在标签中。但是当我删除表中的所有值（不使用 EF）时，EF 查询将返回我的旧值。我知道 EF 将值存储在缓存中并返回缓存的数据以供后续运行。它是否正确？

那么，当我删除了数据库中的所有值，但 EF 返回旧值时，我该如何解决这个问题？

**编辑**：

现在我用`datamodel.SaveChanges()`. 但现在它也返回了相同的旧值。

我的示例查询如下所示：

```
SchoolBriefcaseEntities datamodel = new SchoolBriefcaseEntities();
datamodel.SaveChanges();
List<Compliance> compliance=new List<Compliance>();
IList<ComplianceModel> complianceModel;
if (HttpContext.Current.User.IsInRole("SuperAdmin"))
{
    compliance = datamodel.Compliances.Where(c => c.School.DistrictId == districtId).ToList();
} 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2015-05-11T14:29:09.913

如果您知道更改发生在 EF 之外并且想要刷新特定实体的 ctxt，则可以调用**[ObjectContext.Refresh](https://msdn.microsoft.com/en-us/library/bb896255.aspx)**

```
datamodel.Refresh(RefreshMode.StoreWins, orders); 
```

如果这看起来很常见，您应该在查询中禁用对象缓存：

```
SchoolBriefcaseEntities datamodel = new SchoolBriefcaseEntities();
datamodel.tblCities.MergeOption = MergeOption.NoTracking; 
```

或关闭特定实体的对象级缓存，

```
Context.Set<Compliances>().AsNoTracking(); 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-05-25T14:55:57.703

> 当您使用 EF 时，默认情况下每个上下文仅加载每个实体一次。第一个查询创建实体实例并将其存储在内部。任何需要具有相同键的实体的后续查询都会返回此存储的实例。如果数据存储中的值发生更改，您仍会收到包含初始查询值的实体

认真回答：

[https://stackoverflow.com/a/3653392/1863179](https://stackoverflow.com/a/3653392/1863179)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-04-05T08:33:39.287

除非您重新查询上下文，否则 EF 不会加载更改。EF 查询数据库并将它们加载到对象中，它监视您对对象而不是数据库执行的更改。EF 不跟踪直接对数据库所做的更改，也永远不会跟踪。

您已经加载了一个列表，该列表是您在内存中的缓存。即使调用 Save Changes 也不会刷新。您将不得不再次查询上下文，即创建新列表。

要查看更改您将不得不再次执行以下行，

```
datamodel.Compliances.Where(c => c.School.DistrictId == districtId).ToList() 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-05-14T15:13:06.500

我认为您应该遵循此处的其他一些解决方案，但您似乎想要清除缓存。您可以通过执行以下操作来实现此目的：

```
var count = datamodel.Compliances.Local.Count; // number of items in cache (ex. 30)

datamodel.Compliances.Local.ToList().ForEach(c => {
    datamodel.Entry(c).State = EntityState.Detached;
});

count = datamodel.Compliances.Local.Count; // 0 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-02T17:30:46.690

我建议您在创建上下文后对所有 EntitieSet 使用一些 MergeOption，如下所示：

```
var objSetProps = ctx.GetType().GetProperties().Where(prop => prop.PropertyType.IsGenericType && prop.PropertyType.GetGenericTypeDefinition() == typeof(ObjectSet<>));
foreach (PropertyInfo objSetProp in objSetProps)
{
    ObjectQuery objSet = (ObjectQuery)objSetProp.GetValue(ctx, BindingFlags.GetProperty, null, null, null);
    objSet.MergeOption = MergeOption.PreserveChanges;
} 
```

在此处阅读有关 MergeOption 的信息：http: [//msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx](http://msdn.microsoft.com/en-us/library/system.data.objects.mergeoption.aspx) 我认为您将使用 NoTracking。

如果要清除“缓存”实体，请将其分离。

```
var entidades = Ctx.ObjectStateManager.GetObjectStateEntries(EntityState.Added | EntityState.Deleted | EntityState.Modified | EntityState.Unchanged);
foreach (var objectStateEntry in entidades)
    Ctx.Detach(objectStateEntry.Entity); 
```

Ctx 是我的上下文。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-03-13T00:11:56.607

下面的代码帮助我的对象用新的数据库值刷新。Entry(object).Reload() 命令强制对象调用数据库值

```
GM_MEMBERS member = DatabaseObjectContext.GM_MEMBERS.FirstOrDefault(p => p.Username == username && p.ApplicationName == this.ApplicationName);
DatabaseObjectContext.Entry(member).Reload(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-11T13:15:36.147

首先，除非您只是在进行测试和开发，否则我不建议您修改系统外部的数据库。

EF DbContext 包含一个 IDisposable 接口。要释放任何缓存的数据，请手动进行 Dispose 调用或将数据库对象放在 using 块中。

```
 using (SchoolBriefcaseEntities datamodel = new SchoolBriefcaseEntities())
        {
            List<Compliance> compliance = new List<Compliance>();
            IList<ComplianceModel> complianceModel;
            if (HttpContext.Current.User.IsInRole("SuperAdmin"))
            {
                compliance = datamodel.Compliances.Where(c => c.School.DistrictId == districtId).ToList();
            }
        } 
```

这将确保上下文在下次使用时被清除并重新创建。确保为您的所有电话都这样做，而不仅仅是您遇到问题的电话。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-05-12T14:03:23.697

我怀疑这里的根本问题是你`DbContext`的时间太长了。我可以从您正在使用的事实中`HttpContext`看出您有一个 Web 应用程序，[使用 DbContext 时的一般准则](https://msdn.microsoft.com/en-gb/data/jj729737.aspx)包括

> 使用 Web 应用程序时，为每个请求使用一个上下文实例。

如果您使用的是 MVC，则可以在控制器中使用 Dispose 模式，如下所示：

```
public class EmployeeController : Controller
{
    private EmployeeContext _context;

    public EmployeeController()
    {
        _context = new EmployeeContext();
    }

    public ActionResult Index()
    {
        return View(_context.Employees.ToList());
    }

    protected override void Dispose(bool disposing)
    {
        if (disposing)
        {
            _context.Dispose();
        }
        base.Dispose(disposing);
    }
} 
```

但是你真的应该看看依赖注入来[管理 DbContext 生命周期](http://www.davepaquette.com/archive/2013/03/27/managing-entity-framework-dbcontext-lifetime-in-asp-net-mvc.aspx)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-05-14T12:18:23.287

我想你需要的是`GetDatabaseValues()`. 它的用法如下：

```
context.Entry(/*your entry*/).GetDatabaseValues(); 
```

以下信息来自[msdn](https://msdn.microsoft.com/en-us/data/jj592677.aspx)：

> 当前值是实体的属性当前包含的值。原始值是查询实体时从数据库中读取的值。数据库值是它们当前存储在数据库中的值。当查询实体后数据库中的值可能已更改时，例如当另一个用户对数据库进行并发编辑时，获取数据库值很有用。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-12T20:10:34.443

几个你可以做的事情。

1.  使用新的上下文。缓存的实体存储在上下文中。使用新的上下文会阻止它使用缓存。
2.  如果你真的想要一个全局/持久的上下文，你有两个子选项：a.) 总是调用 Reload 方法。db.Entry(entity).Reload() ...这会强制上下文重新加载该实体。b.) 使用 SqlDependency 对象来检测记录何时更改并根据需要重新加载实体。 [https://code.msdn.microsoft.com/How-to-use-SqlDependency-5c0da0b3](https://code.msdn.microsoft.com/How-to-use-SqlDependency-5c0da0b3)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-01-28T19:45:45.593

就我而言，这是一个错误的连接字符串。Entity 看起来做得很好，因为它从不抱怨，直到我将上下文设为本地并且它最终给了我错误消息。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-07-03T17:29:12.623

EF 与 find 方法的工作方式不同，该方法从上下文中提供数据。其他查询来自 db。如果对象已经在上下文中，则返回现有对象（条目中对象属性的当前值和原始值不会被覆盖数据库值）。在以下情况下对数据库执行查询：

[微软链接](https://docs.microsoft.com/en-us/ef/ef6/querying/)

它由 foreach (C#) 或 For Each (Visual Basic) 语句枚举。它由集合操作枚举，例如 ToArray、ToDictionary 或 ToList。LINQ 运算符（如 First 或 Any）在查询的最外层部分指定。调用以下方法：DbSet、DbEntityEntry.Reload 和 Database.ExecuteSqlCommand 上的 Load 扩展方法。当从数据库返回结果时，上下文中不存在的对象将附加到上下文中。如果对象已经在上下文中，则返回现有对象（条目中对象属性的当前值和原始值不会被数据库值覆盖）。

执行查询时，已添加到上下文但尚未保存到数据库的实体不会作为结果集的一部分返回。要获取上下文中的数据，请参阅本地数据。

如果查询没有从数据库返回任何行，则结果将是一个空集合，而不是 null。

# bash - 将命令的输出存储在 Bash 中的变量中。输出正在运行而不是存储

> ID：15828813
> 
> 赞同：1
> 
> 时间：2013-04-05T08:02:37.163
> 
> 标签：bash

我试图将 Bash 中命令的输出存储在变量中，但不是存储输出，而是将其解释为命令并运行。那不是我想要的。

`tmp="$($line | awk '{print $1}')"` 这会将输出`awk`作为命令运行。

`echo $line | awk '{print $1}'` 这会打印出我想要存储在变量中的输出。

如何从存储在变量中的第二行获取输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:05:09.613

你正在寻找这个：

```
tmp=$(echo "$line" | awk '{print $1}') 
```

但这是[对 Echo 的无用使用](http://fahdshariff.blogspot.com/2012/12/useless-use-of-echo.html)。请改用此处的字符串：

```
tmp=$(awk '{print $1}' <<< "$line") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:04:54.000

这应该工作

var=`回显 $line | awk '{打印 $1}'`

用反引号

# matlab - Matlab 中的功率谱（共轭矩阵乘法）：获取复数值而不是实数值。我的代码有什么问题？

> ID：15828814
> 
> 赞同：0
> 
> 时间：2013-04-05T08:02:49.977
> 
> 标签：matlab, image-processing, matrix-multiplication

这是我的代码，简单到我不敢相信它不起作用。

```
pckint = imread('pckint.jpg');
F = fft2(pckint);
Fcon = conj(F);
S = F*Fcon; 
```

现在，根据分配方向和我对主题的理解，我应该在我的功率谱“S”中获得真实值。但是，我得到了复杂的值。

很抱歉，当谈到 Matlab 时，我是一个完全的菜鸟，但我尝试搜索和理解我使用过的所有命令，但无济于事。请帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:14:51.973

您可以应用元素乘法，以便第 (i,j) 个元素与第 (i,j) 个元素相乘：

```
S = F.*Fcon; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:22:27.883

`F`我认为你的意思是和之间的元素乘法`Fconj`；见[维基文章](http://en.wikipedia.org/wiki/Phase_correlation)。

你正在做*矩阵*乘法，这只有在你有一个正方形图像时才有效；当我第一次尝试时，我的测试是使用矩形图像，所以我立即明白为什么它不正确:)

阅读[MATLAB 中的各种运算符](http://www.mathworks.nl/help/matlab/matlab_prog/operators.html)。

试试这个：

```
pckint = imread('pckint.jpg');
F = fft2(pckint);    
S = F.*conj(F);

any(imag(S(:)) ~= 0) 
```

结果：

```
ans = 
       0 
```

# javascript - 带有多线程的Javascript？

> ID：15828815
> 
> 赞同：0
> 
> 时间：2013-04-05T08:02:59.047
> 
> 标签：javascript, html, web-applications, web

我是桌面应用背景，在学习Javascript的时候，真的很难理解Javascript中的线程机制。

例如：

```
<!DOCTYPE HTML>
<html>
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("#btn1").click(function(){
        for (var i = 0 ; i < 100000 ; i ++){
            $("#loop1").html(i);

        }
    });

    $("#btn2").click(function(){
        for (var i = 0 ; i < 100000 ; i ++){
            $("#loop2").html(i);

        }
    });
});
</script>
</head>
<body>

Loop 1 : <p id="loop1"></p>
<button id="btn1">Button 1</button>
<br/><br/><br/>

Loop 2 : <p id="loop2"></p>
<button id="btn2">Button 2</button>

</body>
</html> 
```

当我单击按钮 1 时，浏览器会挂起，因此当我单击按钮 2 时，它不会响应。通常在桌面应用程序中，我会将循环发布到后台线程中。但是我将如何在 Javascript 中做到这一点？或者在Javascript中处理长时间处理的最佳方法是什么？

* * *

编辑：

下面的代码不起作用，但不知道为什么。

```
$("#btn1").click(function(){

        setTimeout( function(){
            for (var i = 0 ; i < 100000 ; i ++){
                $("#loop1").html(i);

            }
        }
        , 0);
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:05:59.770

Javascript 中没有原生的多线程。

一些技术尝试在 HTML5 规范 ( [WebWorkers](http://www.htmlgoodies.com/html5/tutorials/introducing-html-5-web-workers-bringing-multi-threading-to-javascript.html#fbid=OJpujR1p6iK) ) 中实现多线程，其他技术尝试在 javascript 本身中实现它，但基本规范 (ECMA) 是单线程的。

你可以在谷歌上搜索..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:09:36.923

正如之前的答案已经说明的那样，**WebWorkers是 Javascript 的***multi-threading*的唯一选择。不幸的是，如果您想进行 DOM 修改，就没有希望了。

大多数人忘记的是，当您调用函数时`setTimeout`，`setInterval` **UI 不会冻结并且仍会接收更新**。

```
function btnClickHandler() {
    setTimeout(doStuff, 1); // prevent UI freeze
}

function doStuff() {
    // do your stuff here
} 
```

在你的情况下：

```
var i, interval;

$("#btn1").click(function(){
    i = 0; // reset i

    // create interval
    interval = setInterval(btn1Handler, 1); // run btn1Handler every 1ms
});

function btn1Handler() {
    $("#loop1").html(i);

    if(i++ >= 100000) {
        // cancel the interval
        clearInterval(interval);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:06:28.960

除了如果您使用[网络工作者](http://www.html5rocks.com/en/tutorials/workers/basics/)（并且他们不能直接更改 DOM），您的浏览器中只有一个用户 javascript 线程。

事件被堆叠，直到您的函数返回。您可以有两个长时间运行的操作并行更改 DOM。

# java - 如何在 Gradle 中支持多种语言（Java 和 Scala）的多个项目？

> ID：15828819
> 
> 赞同：5
> 
> 时间：2013-04-05T08:03:12.347
> 
> 标签：java, scala, build, gradle

我正在尝试将我们过时的 Ant 构建转换为 Gradle。该项目包含大约 50 个 Java 子项目和 10 个 Scala 子项目。Java 项目仅包含 Java，Scala 项目仅包含 Scala。每个项目都是由 Java 然后 Scala 构建的，这大大减慢了我们的构建速度。

我想在根 build.gradle 文件中放置尽可能多的通用逻辑，如下所示：

```
subprojects {
    apply plugin: 'java'
    apply plugin: 'scala'

    sourceCompatibility=1.7
    targetCompatibility=1.7

    sourceSets {
        main {
            scala {
                srcDir 'src'
            }
            java {
                srcDir 'src'
            }
        }
        test {
            scala {
                srcDir 'test'
            }
            java {
                srcDir 'test'
            }
        }
    }

    repositories {
        mavenCentral()
    }

    dependencies {
        scalaTools "org.scala-lang:scala-compiler:2.9.3"
        compile "org.scala-lang:scala-library:2.9.3"
    }

    // Use the sbt compiler (not scalac ant task)
    tasks.withType(ScalaCompile) {
        scalaCompileOptions.useAnt = false
    }

    task showCompileClasspath << {
       sourceSets.main.compileClasspath.each { println it }
    }

    test {
        systemProperty "user.dir", projectDir
    }
} 
```

当我运行我的构建时，我得到以下输出，请注意`:esb-server:compileJava`并`:esb-server:compileScala`包含相同的警告，因此类被构建了两次。另请注意，每个其他项目都包含一个`compileJava`和`compileScala`

```
:common:assemble
:esb-server:compileJava
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
:esb-server:compileScala
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
:esb-server:processResources UP-TO-DATE
:esb-server:classes
:esb-server:jar
:esb-server:assemble
:plugins:compileJava UP-TO-DATE
:plugins:compileScala UP-TO-DATE
:plugins:processResources UP-TO-DATE
:plugins:classes UP-TO-DATE
:plugins:jar
:plugins:assemble
:raas-transform:assemble
:saxonee-helper:assemble
:scala-common:compileJava UP-TO-DATE
:scala-common:compileScala
/Users/iain.hull/code/trunk/ccdev/scala-common/src/com/workday/esb/assembly/audit/TreeAudit.scala:138: method first in trait IterableLike is deprecated: use `head' instead
    override def getLast():Option[AuditNode] = if (children.isEmpty) None else children.first.getLast
                                                                                        ^
one warning found
:scala-common:processResources UP-TO-DATE
:scala-common:classess
:scala-common:jar
:scala-common:assemble
:plugins:hibernatepersistence:compileJava
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
:plugins:hibernatepersistence:compileScala
Note: Some input files use or override a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
Note: Some input files use unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
:plugins:hibernatepersistence:processResources
:plugins:hibernatepersistence:classes
:plugins:hibernatepersistence:jar
:plugins:hibernatepersistence:assemble 
```

我知道`apply plugin`我的根目录顶部的两行`build.gradle`导致了这种行为。但是，如果我只对每个子项目应用正确的插件，我就无法将通用配置重构到我的 root`build.gradle`中。另一种方法是对所有东西都使用 Scala 插件，但这是最好的方法吗？

我可以使用 Java 插件编译 Java 项目并使用 Scala 插件编译 Scala 项目，并且仍然将我所有项目的通用构建配置重构到根目录`build.gradle`吗？在 Gradle 中支持多种语言的最佳方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:55:10.943

像这样的东西怎么样：

```
configure(subprojects.findAll {project  ->
    file('src/main/java').exists()
}) {
    apply plugin: 'java'
} 
```

```
configure(subprojects.findAll {project  ->
    file('src/main/scala').exists()
}) {
    apply plugin: 'scala'
} 
```

因为您的源目录是`src`，所以需要闭包内的其他一些鉴别器机制。

# ios - 如何使用 NSNotificationCenter 调用第二类中的方法？

> ID：15828820
> 
> 赞同：0
> 
> 时间：2013-04-05T08:03:15.930
> 
> 标签：ios, objective-c, cocoa-touch, nsnotificationcenter

我正在尝试使用`NSNotificationCenter`在第二类中调用方法，但出现错误：

第二类方法（request.m）：

```
-(void)getTheRequest:(NSString *)whereToCall; 
```

我试图这样称呼它`NSNotificationCenter`：

```
request *newRequest=[[request alloc]init];
[self performSelector:@selector(newRequest.getTheRequest:) withObject:@"mySite"]; 
```

但我在这部分“newRequest.getTheRequest”中遇到错误，它显示“预期表达式”。你们中的任何人都知道我该如何解决这个问题，或者我如何使用它`NSNotificationCenter`来调用不同类中的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:13:12.710

试试这个：

```
[newRequest performSelector:@selector(getTheRequest:) withObject:@"mySite"]; 
```

请注意，类名应以大写字母开头，getter 不应使用 Apple 编码标准的 get 前缀[Introduction to Coding Guidelines for Cocoa](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146i)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:17:26.217

我认为您的方法不是基于 NSNotificationCenter 的，您尝试做的是调用请求对象的方法。

在这种情况下，您将调用`request`而不是`self`：

```
request *newRequest=[[request alloc]init];
[request performSelector:@selector(getTheRequest:) withObject:@"mySite"]; 
```

`NSNotificationCenter`像这样使用：

在目标类中添加观察者：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(getTheRequest:) name:@"getTheRequest" object:nil]; 
```

实现目标方法：

```
-(void)getTheRequest:(NSString *)string{
  //do something
} 
```

并在第二课中发布通知：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"getTheRequest" object:@"mySite"]; 
```

不要忘记删除目标类中的观察者，如果忘记了，类对象的保留计数将保持为 1，并且不会从内存中释放。

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:@"getTheRequest" object:nil]; 
```

# javascript - 是否可以在 node.js 的同步函数中同时处理异步和同步函数结果？

> ID：15828821
> 
> 赞同：0
> 
> 时间：2013-04-05T08:03:21.040
> 
> 标签：javascript, node.js, asynchronous

我正在开发一个预处理较少的库，手写笔等。预处理器本质上可以是异步的，也可以是同步的。因为结果只会在构建阶段使用，所以在这里编写阻塞代码不是问题。

因为大多数预处理器都是同步的，并且库需要同步函数，所以我想知道是否有可能将预处理器函数包装在一个同步函数中，该函数可以处理来自预处理函数的同步和异步结果？

基本上有可能以某种方式做这样的事情吗？

```
syncFn = function(contents) {
  var res = syncOrAsyncFn(contents, function(err, contents) {
    res = contents
  })
  // .. do some magic here that waits for the results of syncOrAsyncFn
  return res; // Return the result from a function that could be async or sync
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:29:36.483

对不起，那是不可能的。每当一个代码块运行时，中间就不能运行**任何东西**，也就是说，NodeJS 中没有真正的并行性。因此，无论你做什么：`res = contents`line 只能在`syncFn`完成它所做的一切之后触发，即在所有同步操作完成代码块中的工作之后。

这迫使 NodeJS 程序员使用回调模式，例如：

```
syncFn = function(contents, callback) {
  syncOrAsyncFn(contents, function(err, contents) {
    callback(contents);
  })
} 
```

# paypal - 支付网关操作

> ID：15828822
> 
> 赞同：0
> 
> 时间：2013-04-05T08:03:23.097
> 
> 标签：paypal, payment-gateway

我正在开发一个 asp.net 网站并希望集成收款。用户购买积分，然后可以根据余额执行一些操作。我不想完全集成支付网关，因为这很复杂。Paypal 有两个选项 Standard 和 Pro。我更喜欢标准。

两个问题：

1.  用户已经登录到该站点。当涉及到使用非集成方法的支付部分时，我是否可以为支付网关使用相同的凭据，而无需用户再次（或至少限制）输入他们的详细信息？

2.  通过支付网关付款后，我希望用户能够执行一些操作（因为他们有余额）。因此，如果付款并经过验证，则向应用程序添加 x 积分。如果没有完全集成的解决方案，这可能吗？

我还没有决定支付提供商，欢迎提出建议。认为贝宝将是一个不错的选择。希望有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T11:53:49.603

您可以轻松地使用 paypal apis。但要确保 RBI 让你这样做，因为你的名字是印度人，所以我猜你是用印度的贝宝账户做的。在采取任何步骤之前，必须通过电子邮件/电话联系贝宝支持。'因为在他们的开发者网站[http://developer.paypal.com](http://developer.paypal.com)上有很多很棒的 api，但是当你开始使用它们时，它们不起作用，当你寻求支持时，它们会说 RBI....等等等等

# android - 与 Android 任务管理器通信

> ID：15828831
> 
> 赞同：1
> 
> 时间：2013-04-05T08:04:01.900
> 
> 标签：android

我在 android 上有一个无响应的应用程序，我需要杀死它并让用户手动启动它。如果我在 android 中使用 KillBackgroundTask，它只会重新启动任务。

有没有办法指示内置任务管理器终止任务（使用包名）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:26:10.453

试试这个代码

```
android.os.Process.killProcess(android.os.Process.myPid()); 
```

# java - struts2 约定插件无法正常工作

> ID：15828845
> 
> 赞同：4
> 
> 时间：2013-04-05T08:05:02.307
> 
> 标签：java, struts2, struts-validation, action-mapping, struts2-convention-plugin

我试图用约定插件 Struts2 运行应用程序。该应用程序很好，`struts.xml`配置如下：

```
<struts>

    <package name="struts2demo" extends="struts-default">
    <action name="hey" class="action.CountryAction" method="get">
       <result name="success">/index.jsp</result>
    </action>
    <action name="add" class="action.CountryAction" method="add">
       <result type="redirect" name="success">hey</result>
    </action>
    <!-- Add your actions here -->
    </package>

</struts> 
```

现在我删除了它`struts.xml`并添加了一些这样的注释：

```
@Namespace("/")
@ResultPath(value="/")
public class CountryAction extends ActionSupport implements ModelDriven<Country>{
    private List<Country> worldCountry;
    private Country country = new Country();

    public Country getCountry() {
            return country;
        }

    public void setCountry(Country country) {
            this.country = country;
        }

 //   HttpServletRequest request;
@Action(value="/hey",results={@Result(name="success",location="/index.jsp")})
    public String get() throws SQLException
    {
        CountryService cs = new CountryService();
        setWorldCountry(cs.getCountry());
      //  System.out.println(getWorldCountry());
        return SUCCESS;
    }

     public List<Country> getWorldCountry() {
        return worldCountry;
    }

    public void setWorldCountry(List<Country> worldCountry) {
        this.worldCountry = worldCountry;
    }

    @Override
    public Country getModel() {
        return country;
    }
} 
```

但是当我尝试运行应用程序时，出现以下错误：

**留言：**

```
There is no Action mapped for namespace [/] and action name [hey] associated with context path [/JustStruts2]. 
```

**我`web.xml`的是这样的：**

```
<filter>
        <filter-name>struts2</filter-name>
        <filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</filter-class>
        <init-param>
         <param-name>struts.devMode</param-name>
         <param-value>true</param-value>
      </init-param>
    </filter>

    <filter-mapping>
        <filter-name>struts2</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

如果我做错了，任何帮助将不胜感激。
问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T09:30:42.113

根据消息，Struts 通知您`[hey]`未在您的操作配置中找到。在`struts.xml`你定义它没有斜线。在注释中执行相同的操作。不要映射`index.jsp`可以由容器本身处理但不能由 Struts2 处理的映射。默认情况下使用名称“成功”，因此没有必要。

```
@Action(value="hey", results = { @Result(location="/page.jsp") }) 
```

请注意，这`@ResultPath`不是必需的。

# sql - 如何编写将表的列的值复制到另一个表的另一列的触发器？

> ID：15828846
> 
> 赞同：0
> 
> 时间：2013-04-05T08:05:05.807
> 
> 标签：sql, sql-server-2008, triggers

我有一张桌子**tblBilling**和**tblTotalFee**。我在**tblBilling**中的一列名为*RemainingAmount*，在**tblTotalFee**我有另一列名为*Due From Previous Month*。现在我想要的是当我在*Remaining Amount*中插入一个值时，我希望该值自动插入到*Due From Previous Month*中。我正在尝试编写一个触发器。但我就是做错了？？谁能帮我？？

我试过：

```
ALTER trigger [dbo].[trg_Billing_TotalFee] on [dbo].[tblBilling] 
after insert as 
insert into tblTotalFee(DueFromPreviousMonth) 
select RemainingAmount from inserted 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:38:12.983

给你一个例子：

```
 create table tblBilling (ID int identity(1000,1) primary key,
                         RemainingAmount int 
                         )
go
create table tblTotalFee (ID int identity(1000, 1) primary key,
                          DueFromPreviousMongh int)
go 
create trigger tr_tblBillingSync on tblBilling 
after insert 
as 
    insert into tblTotalFee (DueFromPreviousMongh)
    select RemainingAmount from inserted
go 
insert into tblBilling 
select 25
union all select 27
union all select 33
go
select * from tblBilling
select * from tblTotalFee
go 
```

最终输出结果：

```
 ID     |  RemainingAmount
-------------------------
1000   |    25
1001   |    27
1002   |    33 
```

```
 ID     |  DueFromPreviousMongh
-------------------------
1000   |    25
1001   |    27
1002   |    33 
```

# android - 我在哪里可以找到适用于 android 的 firefox 源代码？

> ID：15828851
> 
> 赞同：2
> 
> 时间：2013-04-05T08:05:18.473
> 
> 标签：android, firefox, open-source

如何获取 android 的 firefox 源代码？我找到了以下链接来下载一些包[http://hg.mozilla.org/services/fx-home/](http://hg.mozilla.org/services/fx-home/)但不知道 android 源代码是否存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T08:08:33.423

请查看 Fennec 的 Wiki（Firefox 移动版）： [https ://wiki.mozilla.org/Mobile/Fennec/Android](https://wiki.mozilla.org/Mobile/Fennec/Android)

构建说明和一切:-)

# logging - 通过存折 Web 服务参考记录错误我必须做什么

> ID：15828852
> 
> 赞同：0
> 
> 时间：2013-04-05T08:05:27.730
> 
> 标签：logging, ios6, error-logging, passbook

在 Logging Errors 中，设备向 webServiceURL/version/log 发送 POST 请求，那么此时服务器需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T03:32:46.607

要将输出记录到 PHP 日志中，您可以使用以下内容：

```
$log_items = json_decode(@file_get_contents('php://input'))->logs;
foreach($log_items as $key => $log_message)
    error_log("Passbook Error Log: " . $log_message, 0); 
```

# ruby - 为什么`inject`很慢？

> ID：15828858
> 
> 赞同：3
> 
> 时间：2013-04-05T08:05:56.063
> 
> 标签：ruby, benchmarking

这是基准

```
require 'benchmark'

# create random array
arr = 40000.times.map { rand(100000).to_s }

r1 = ''
r2 = ''
r3 = ''

Benchmark.bm do |x|
    x.report {
        r1 = (arr.map { |s|
            "[#{s}]"
        }).join
    }

    x.report {
        r2 = arr.inject('') { |memo, s|
            memo + "[#{s}]"
        }
    }

    x.report {
        r3 = ''
        arr.each { |s|
            r3 << "[#{s}]"
        }
    }
end

# confirm result is same
puts r1 == r2
puts r2 == r3 
```

这是结果

```
 user     system      total        real
   0.047000   0.000000   0.047000 (  0.046875)
   5.031000   0.844000   5.875000 (  5.875000)
   0.031000   0.000000   0.031000 (  0.031250)
true
true 
```

有什么方法可以让`inject`速度更快吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:12:23.597

这是我的猜测：与其他两种方法不同，方法 with`inject`不断创建越来越大的字符串。所有这些（除了最后一个）都是临时的，必须进行垃圾收集。那是浪费内存和CPU。这也是[Shlemiel the Painter 算法的](http://en.wikipedia.org/wiki/Schlemiel_the_Painter%27s_algorithm)一个很好的例子。

> ... Spolsky 进行类比的低效率是重复连接 C 风格的空终止字符数组（即字符串）的不良编程实践，其中必须从头重新计算目标字符串的位置每次都使用字符串，因为它不是从先前的连接中结转的。...

方法`map`创建了许多小字符串，因此，至少，它不会花费太多时间来分配内存。

### 更新

正如 Yevgeniy Anfilofyev 在评论中指出的那样，您可以通过不创建任何大字符串来避免创建许多大字符串。只需继续附加到`memo`.

```
r2 = arr.inject('') { |memo, s|
  memo << "[#{s}]"
} 
```

这是有效的，因为两者都`String#+`为`String#<<`字符串返回了一个新值。

# chef-infra - 厨师的安装错误

> ID：15828859
> 
> 赞同：1
> 
> 时间：2013-04-05T08:05:56.767
> 
> 标签：chef-infra

我在调试 chef-solo 时出错。

`....in 'from_file`当我通过 chef-recipes 安装 nginx 时，我可以看到同样的问题。我已经下载安装了`epel-release-5-4.noarch.rpm`，我也创建了`/etc/yum.repos.d/epel.repo`。

我该怎么办？

```
* package[vim] action install
* No version specified, and no candidate version available for vim
================================================================================
Error executing action `install` on resource 'package[vim]'
================================================================================

Chef::Exceptions::Package
-------------------------
No version specified, and no candidate version available for vim

Resource Declaration:
---------------------
# In /root/Development/chef-repo/site-cookbooks/vim/recipes/default.rb

  9: package "vim" do
 10:   action :install
 11: end
 12:

Compiled Resource:
------------------
# Declared in /root/Development/chef-repo/site-cookbooks/vim/recipes/default.rb:9:in `from_file'

package("vim") do
  action [:install]
  retries 0
  retry_delay 2
  package_name "vim"
  cookbook_name :vim
  recipe_name "default"
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T09:18:12.600

如果我从 rpm 安装了 epel-package，它已修复，现在我可以运行我的食谱了。

```
#
# Cookbook Name:: nginx
# Recipe:: default
#
# Copyright 2013, YOUR_COMPANY_NAME
#
# All rights reserved - Do Not Redistribute
#

yum_package "GeoIP"

yum_package "nginx" do
  action :install
end

template "nginx.conf" do
  path "/etc/nginx/nginx.conf"
  source "nginx.conf.erb"
  owner "root"
  group "root"
  mode 0644
  notifies :reload, 'service[nginx]'
end

service "nginx" do
  action [:enable,:start]
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T06:29:35.010

实际上，它似乎已安装。如果我尝试 nginx -t ，我发现了一些错误并且我修复了，那么这个厨师的食谱开始工作没有错误。

# php - 正则表达式 - 转义 '

> ID：15828861
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:05:58.233
> 
> 标签：php, regex

我正在尝试解析字符串并提取一些值。

突然，我被这里的符号困住了：

这是一些代码，用于描述我的情况：

```
// example string
$string = "@set('var', 'value')";

// regex that I'm using to extract the values
$regex = '@set\((.+),(.+)\)/'

// result that I'm getting
array("'var'", "'value'")

// desired result
array("var", "value") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T08:10:19.197

您正在将任何字符与`.+`规则匹配。如果您不希望引号出现在结果中，请避免使用它们。改写规则：

```
 $regex = "/@set\('([^']+)',\s*'([^']+)'\)/" 
```

# vb.net - VBNet 2008 Mobile：按钮中的新文本行

> ID：15828864
> 
> 赞同：0
> 
> 时间：2013-04-05T08:06:06.260
> 
> 标签：vb.net, mobile, button, newline, word-wrap

我到处找，希望你能给我最终的结果....我做了一个VBNet 2008 移动应用程序，我放置了一个大按钮，它应该包含一个换行的文本。我尝试了所有方法，包括带有“附加”的 StringBuilder 对象，或特殊字符，如 chr(10) & chr(13)、vbCrLf、Constants.vbCrLf、\n、vbNewLine 等，结果在应用程序时没有空格或正方形跑步！

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:07:51.990

标准按钮会自动换行 - 您无需对其执行任何操作。![在此处输入图像描述](https://i.stack.imgur.com/wUmnc.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T09:21:02.240

我不知道这对移动应用程序是否有帮助，但我刚刚将它用于 vb.net 网站

导入 System.Text.RegularExpressions

..并在页面加载

Button1.Text = Regex.Unescape("这是一个大按钮，有很多 \n 文本，用于查看文本 \n 是否换行")

# windows-phone-7 - WP7、WP8 如何设置几个 ResourceDictionaries 使用自定义 FontFamilies

> ID：15828872
> 
> 赞同：0
> 
> 时间：2013-04-05T08:06:40.683
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone, windows-phone-7.1.1

我想为某些控件设置自定义字体，所以如果我在唯一的**一个**ResourceDictionary 中设置一种字体并在样式中使用它，那么一切**正常**。但是这种方法对我来说并不好，因为我需要在**单独**的字典中使用字体声明，然后是使用它们的样式。

在`App.xaml`我制作了几个资源字典

```
<Application ...> 
   <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/ResourceAgencyDictionary.xaml"/>
                <ResourceDictionary Source="Resources/ResourceCommonDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources> 
   ....
</Application> 
```

在`ResourceAgencyDictionary.xaml`我有`MyFontFamilyNormal`声明

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"       
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <FontFamily x:Key="MyFontFamilyNormal">/GBAgencyCommon;component/Fonts/Fonts.zip#Gotham Book</FontFamily>
    .....    
</ResourceDictionary> 
```

在`ResourceCommonDictionary.xaml`我想使用该字体系列（`MyFontFamilyNormal`）：

```
 <ResourceDictionary ...>
        <Style x:Key="MyTextBlockValueStyle" BasedOn="{StaticResource PhoneTextBlockBase}" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource MyFontFamilyNormal}"/>
            ....
        </Style>
 </ResourceDictionary> 
```

项目编译但我得到一个运行时错误

System.Windows.Markup.XamlParseException 发生_HResult=-2146233087 _message=**找不到名称/键为 MyFontFamilyNormal 的资源**

有谁知道我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-17T23:37:13.147

对不起，伙计们，在互联网上搜索了很多解决方案，然后才找到它。解决方案很简单（我已经尝试过，但文件路径错误，没有注意到这是正确的方向）

所以在`App.xaml`

```
<Application ...> 
   <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources/ResourceCommonDictionary.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Application.Resources> 
   ....
</Application> 
```

是`ResourceAgencyDictionary.xaml` 一样的

在`ResourceCommonDictionary.xaml`

```
 <ResourceDictionary ...>

        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="ResourceAgencyDictionary.xaml"/>
        </ResourceDictionary.MergedDictionaries>

        <Style x:Key="MyTextBlockValueStyle" BasedOn="{StaticResource PhoneTextBlockBase}" TargetType="TextBlock">
            <Setter Property="FontFamily" Value="{StaticResource MyFontFamilyNormal}"/>
            ....
        </Style>
 </ResourceDictionary> 
```

注意：`Source="ResourceAgencyDictionary.xaml"`因为此文件与`ResourceCommonDictionary.xaml`

# google-drive-api - 访问 Drive API 的内部错误

> ID：15828876
> 
> 赞同：0
> 
> 时间：2013-04-05T08:06:53.600
> 
> 标签：google-drive-api

当我尝试访问 Google Drive API 时，`https://www.googleapis.com/drive/v2/files?q=title+%3D+%27data%27&alt=json&key=myapikey`我得到一个`500 Internal Error`.

假设它只是可怕的 API，我猜查询有些错误。有谁知道如何修复它甚至更好地查看实际错误？

# file - FrameBuffer 到 libgdx 或 OpenGL 中的文件

> ID：15828879
> 
> 赞同：2
> 
> 时间：2013-04-05T08:07:01.493
> 
> 标签：file, png, screenshot, libgdx

我正在尝试以最有效的方式截取屏幕截图。我使用 FrameBuffer 是截取屏幕截图的最有效方式，因为我可以在与渲染线程不同的线程中处理数据。如何从 FrameBUffer 获取信息并将其传输到文件中？

```
FrameBuffer m_fbo;

render(){
   m_fbo = new FrameBuffer(Format.RGB565, (int)(w * m_fboScaler), (int)(h * m_fboScaler), false);
   m_fboRegion = new TextureRegion(m_fbo.getColorBufferTexture());
   m_fboRegion.flip(false, true);
   m_fbo.begin();
   ...rendering...
   m_fbo.end();
   writeTextureRegionToFile(); - i need some lines of code for the implementation of this method
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T19:54:34.253

内容驻留在 OpenGL 管理的`FrameBuffer`内存中，因此（据我所知）您仍需要在渲染线程上使用 OpenGL API 获取这些字节。具体来说，您希望[该类`ScreenUtils`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/ScreenUtils.html) 获得`byte[]`包含您的[内容](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/utils/ScreenUtils.html)`RGBA8888`的`FrameBuffer`.

一旦你得到原始字节，你当然可以在不同的线程上进行任何压缩/转换/输出。有一个[论坛帖子](http://www.badlogicgames.com/forum/viewtopic.php?p=8358#p8358)有一个快速而肮脏的PNG作家。Libgdx 特定 (?)`CIM`格式也是一个选项（请参阅[`PixmapIO`类](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/graphics/PixmapIO.html)），但您必须将字节转换为`Pixmap`第一个。

# mercurial - 集成 Jenkins 和 Mercurial 的问题

> ID：15828881
> 
> 赞同：0
> 
> 时间：2013-04-05T08:07:12.040
> 
> 标签：mercurial, jenkins

我收到下一个错误：

```
java]Started by user anonymous
Building in workspace C:\Program Files (x86)\Jenkins\jobs\test1\workspace
$ hg clone --rev default --noupdate ssh://locahost/*/test1 "C:\Program Files  (x86)\Jenkins\jobs\test1\workspace"
remote: Unable to open connection:
remote: Host does not existabort: no suitable response from remote hg!
ERROR: Failed to clone ssh://locahost/*/test1
ERROR: Failed to clone ssh://locahost/*/test1
Finished: FAILURE 
```

在我使用过的詹金斯控制台的 mercurial 插件中

`Repository URL: ssh://locahost/*/test1`

`The rest options are in default`

任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:36:59.553

我不知道为什么你`*`的远程存储库路径中有一个字符，但这似乎可能是这个特定错误的罪魁祸首（它对我自己的 hg 服务器产生类似的错误）。

# django - Lighttpd - 无法启动，无法绑定端口，权限被拒绝

> ID：15828882
> 
> 赞同：1
> 
> 时间：2013-04-05T08:07:25.273
> 
> 标签：django, lighttpd

我已将 Lighttpd 与 Apache 并行安装（使用端口 80）。但是启动 lig​​httpd 给了我一个错误

```
Starting lighttpd: 2013-04-05 15:56:17: (network.c.379) can't bind to port:  81 Permission denied 
```

我在 lighttpd.conf 中所做的更改：

```
server.port = 81
server.use-ipv6 = "disable" 
```

我在这里想念什么？我正在使用 CentOS 6.3

**netstat -ltp**结果：

```
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address               Foreign Address             State       PID/Program name   
tcp        0      0 localhost:smux              *:*                         LISTEN      1947/snmpd          
tcp        0      0 *:mysql                     *:*                         LISTEN      15673/mysqld        
tcp        0      0 *:57071                     *:*                         LISTEN      1683/rpc.statd      
tcp        0      0 *:sunrpc                    *:*                         LISTEN      1665/rpcbind        
tcp        0      0 *:ndmp                      *:*                         LISTEN      2473/perl           
tcp        0      0 *:ssh                       *:*                         LISTEN      1959/sshd           
tcp        0      0 localhost:ipp               *:*                         LISTEN      1829/cupsd          
tcp        0      0 localhost:smtp              *:*                         LISTEN      2362/master         
tcp        0      0 *:sunrpc                    *:*                         LISTEN      1665/rpcbind        
tcp        0      0 *:http                      *:*                         LISTEN      15422/httpd         
tcp        0      0 *:45684                     *:*                         LISTEN      1683/rpc.statd      
tcp        0      0 *:ssh                       *:*                         LISTEN      1959/sshd           
tcp        0      0 localhost:ipp               *:*                         LISTEN      1829/cupsd          
tcp        0      0 localhost:smtp              *:*                         LISTEN      2362/master         
tcp        0      0 *:6556                      *:*                         LISTEN      1967/xinetd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:12:23.353

我找到了这个参考并解决了我的问题。问题是由于 SELinux 阻止 lighttpd 使用端口 81。

[更新链接] [https://www.visibilityspots.com/selinux.html](https://www.visibilityspots.com/selinux.html)

# java - 摩托罗拉 FX9500 上的 JamVM 问题 - 我该怎么办？

> ID：15828884
> 
> 赞同：10
> 
> 时间：2013-04-05T08:07:28.987
> 
> 标签：java, jamvm

我正在使用[摩托罗拉 FX9500](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/RFID/RFID+Readers/FX9500_US-EN) RFID 阅读器，它运行带有[jamvm](http://jamvm.sourceforge.net/) 1.5.0 版的 Linux（我只能向其部署应用程序 - 我无法更改 Java VM 或任何东西，因此我的选择受到限制） - 这就是我看到的我检查版本：

```
[cliuser@FX9500D96335 ~]$ /usr/bin/jamvm -version
java version "1.5.0"
JamVM version 1.5.4
Copyright (C) 2003-2010 Robert Lougher <rob@jamvm.org.uk>

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2,
or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

Build information:

Execution Engine: inline-threaded interpreter with stack-caching
Compiled with: gcc 4.2.2

Boot Library Path: /usr/lib/classpath
Boot Class Path: /usr/local/jamvm/share/jamvm/classes.zip:/usr/share/classpath/glibj.zip 
```

我需要编写一个应用程序，因此我获取了 Oracle Java SDK 1.5.0 并将其安装到我的 Windows 7 PC 上，因此它具有以下版本：

```
C:\>javac -version
javac 1.5.0 
```

考虑到我用该编译器编译的应用程序可以在上述 JamVM 上正常工作，我是不是过于理想化了？无论如何，我在无知中继续写这个小应用程序：

```
public final class TestApp {
    public static void main(final String[] args) {
        long p = Long.MIN_VALUE;
        int o = (int)(-(p + 10) % 10);
        System.out.println(o);
    }
} 
```

使用前面提到的 javac 编译器对其进行编译并在 PC 上运行，如下所示：

```
C:\>javac TestApp.java

C:\>java TestApp
8 
```

那里一切都好。生活是美好的，所以我把那个`.class`文件放在[FX9500](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/RFID/RFID+Readers/FX9500_US-EN)上，然后像这样运行它：

```
[cliuser@FX9500D96335 ~]$ /usr/bin/jamvm TestApp
-2 
```

哎呀，什么......正如你所看到的 - 它返回不同的结果。

那么，为什么以及谁错了，或者像规范一样不清楚如何处理这个计算（肯定不是）？难道是我需要用不同的编译器编译它？

* * *

**我为什么要关心这个？**

我遇到这种情况的原因是内部发生了完全一样的计算，`java.lang.Long.toString`并且我的实际应用程序中有一个错误，我正在注销很长一段时间并获得`java.lang.ArrayIndexOutOfBoundsException`. 因为我想要记录的值很可能在`Long`.

我想我可以通过检查 Long.MIN_VALUE 和 Long.MAX_VALUE 并记录“错误，我不能告诉你这个数字，但它真的是 Long.XXX，相信我，我会骗你吗？”来解决这个问题。但是当我发现这一点时，我觉得我的应用程序现在是建立在一个坚实的基础上的，它需要非常健壮。我正在认真考虑只是说 JamVM 不能胜任这项工作并用 Python 编写应用程序（因为读者也有 Python 运行时）。

我有点希望有人告诉我我是个笨蛋，我应该像....那样在我的 Windows PC 上编译它，然后它会起作用，所以请告诉我（如果这是真的，当然） ！

* * *

**更新**

Noofiz 让我思考（谢谢），我敲开了这个额外的测试应用程序：

```
public final class TestApp2 {
    public static void main(final String[] args) {

        long p = Long.MIN_VALUE + 10;

        if (p != -9223372036854775798L) {
            System.out.println("O....M.....G");
            return;
        }

        p = -p;

        if (p != 9223372036854775798L) {
            System.out.println("W....T.....F");
            return;            
        }

        int o = (int)(p % 10);

        if (o != 8) {
            System.out.println("EEEEEK");
            return;
        }

        System.out.println("Phew, that was a close one");
    }
} 
```

我再次在 Windows 机器上编译并运行它。

它打印`Phew, that was a close one`

我将`.class`文件复制到有问题的装置并运行它。

它打印...

……等等……

`W....T.....F`

哦亲爱的。我有点头晕，我想我需要一杯茶...

**更新 2**

我尝试的另一件事没有任何区别，是将 FX9500 上的 classes.zip 和 glibj.zip 文件复制到 PC，然后像这样进行交叉编译（这一定意味着编译后的文件应该没问题对？）：

```
javac -source 1.4 -target 1.4 -bootclasspath classes.zip;glibj.zip -extdirs "" TestApp2.java 
```

但是生成的 .class 文件在阅读器上运行时会打印相同的消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-06T01:14:45.833

我写了 JamVM。正如您可能猜到的那样，这些错误现在已经注意到了，而且 JamVM 甚至无法通过最简单的测试套件（GNU Classpath 有自己的 Mauve，OpenJDK 有 jtreg）。我经常在 ARM（FX9500 使用 PXA270 ARM）和 x86-64 上运行，但各种平台都作为 IcedTea 的一部分进行了测试。

所以我对这里发生了什么一无所知。我猜它只会影响 Java long，因为它们不经常使用，所以大多数程序都可以工作。JamVM 将 Java long 映射到 C long long，所以我的猜测是用于构建 JamVM 的编译器在 32 位 ARM 上为 long long 处理生成了不正确的代码。

不幸的是，如果您无法替换 JVM，那么您无能为力（除了避免多头）。您唯一能做的就是尝试关闭 JIT（一个简单的代码复制 JIT，也就是内联线程）。为此，请在命令行上使用 -Xnoinlining，例如：

jamvm -Xnoinlining ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T09:13:54.453

问题在于不同的模数实现：

```
public static long mod(long a, long b){
    long result = a % b;
    if (result < 0)
    {
        result += b;
    }
    return result;
} 
```

此代码返回**-2**，而这：

```
public static long mod2(long a, long b){
    long result = a % b;
    if (result > 0 && a < 0)
    {
        result -= b;
    }
    return result;
} 
```

返回**8**。JamVM 这样做的原因是我无法理解的。

来自 JLS：

> **15.17.3。余数运算符 %**
> 
> 在二进制数值提升（第 5.6.2 节）之后，整数操作数的余数运算产生一个结果值，使得 (a/b)*b+(a%b) 等于 a。

根据这个 JamVM 打破了语言规范。很坏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-04T14:33:39.063

我会发表评论，但出于某种原因，这需要声誉。

长否定在此设备上不起作用。我不明白它的确切性质，但如果你做两个一元减法，你会回到你开始的地方，例如 x=10; -x==4294967286；-x==10。4294967286 非常接近 Integer.MAX_VALUE*2 (2147483647*2 = 4294967294)。它更接近 Integer.MAX_VALUE*2-10！

它似乎与这一操作无关，并且不会以更基本的方式影响多头。避免在您自己的代码中进行操作很简单，并且通过对引导类路径的一些灵巧滥用可以避免 GNU 类路径代码中的调用，将它们替换为 *-1s。如果您需要从设备 GUI 启动应用程序，您可以将 -Xbootclasspath=... 开关包含到 args 参数中，以便将其传递给 JamVM）。

该错误实际上已经在后者（比最新版本）JamVM 代码中修复：* [https://github.com/ansoncat/jamvm/commit/736c2cb76baf1fedddc1eda5825908f5a0511373](https://github.com/ansoncat/jamvm/commit/736c2cb76baf1fedddc1eda5825908f5a0511373) * [https://github.com/ansoncat/jamvm/commit/ac83bdc886ac4f6e60d684de1b4d0a5e90f1c489](https://github.com/ansoncat/jamvm/commit/ac83bdc886ac4f6e60d684de1b4d0a5e90f1c489)

虽然对设备上的固定版本没有帮助。Rob Lougher 提到这个问题是发布新版本 JamVM 的一个原因，尽管我不知道这会是什么时候，也不知道摩托罗拉是否有足够的信心更新他们的固件。

FX9500 实际上是重新封装的 Sirit IN610，这意味着两个设备都有这个 bug。Sirit 比摩托罗拉更友好，并提供固件升级，将在不久的将来推出。我希望摩托罗拉也将修复包括在内，尽管我不知道双方之间安排的细节。

无论哪种方式，我们都在 FX9500 上运行了一个非常大的应用程序，而且长期的否定操作并没有被证明是一个不可逾越的障碍。

祝你好运，丹。

# macos - Mac 中的 POSIX 消息函数（msgsnd、msgrcv 等）手册页在哪里？

> ID：15828888
> 
> 赞同：3
> 
> 时间：2013-04-05T08:07:58.677
> 
> 标签：macos, message, manpage

我想查看 POSIX 标准消息函数的手册页：msgsnd、msgrcv 等。它们都在 sys/msg.h 中定义，并且使用它们的代码有效。但是在我的电脑 (Mac OS X Mountain Lion 10.8.3)、我朋友的 (OS X Lion) 或 Apple 在 Internet 上的开发人员页面中都找不到手册页。

我在哪里可以下载该手册以便我可以直接从终端访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:47:52.047

Apple 尚未发布该系列功能的手册页。我建议在[http://bugreport.apple.com/](http://bugreport.apple.com/)上提交错误报告，要求发布它们。同时，您可以使用[FreeBSD 手册页](http://www.freebsd.org/cgi/man.cgi?query=msgsnd&apropos=0&sektion=0&manpath=FreeBSD+9.1-RELEASE&arch=default&format=html)作为参考，因为这很可能是 OS X 实现的起源。

# c++ - 静态互斥锁和非静态互斥锁之间的区别

> ID：15828890
> 
> 赞同：2
> 
> 时间：2013-04-05T08:08:13.050
> 
> 标签：c++, mutex

我在 .cpp 中有一个代码

```
namespapce A
{
    namespace
    {
        static CMutex initMutex;
    }

    void init()
    {
        //code here
    }

    void uninit()
    {
        //code here
    }
} 
```

如果我删除互斥锁中的静态并且如果存在静态有什么不同？静态有什么用？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:31:17.167

如果互斥锁是静态的，并且如果它位于标头中并且该标头包含在 2 个 cpp 文件（2 个翻译单元）中，则第一个文件中的代码应用的锁将不会被第二个文件看到，这是危险的。这是因为 2 个单元具有互斥锁的单独静态。在这种情况下，最好使用全局互斥锁。

如果这是 C++，那么使用 RAII 机制来管理互斥锁和解锁。这是c++，类在哪里？将事物封装到一个类中。

RAII 例子（基础一，东西可以封装成类）： [http ://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:41:53.673

static 只做两件事：

*   使变量在程序的整个生命周期中都存在（但这是全局级别的，所以这里的任何东西都存在于整个程序生命周期中！）

*   使变量仅在声明它的翻译单元中可见（但这适用于匿名命名空间中的任何内容）。

所以，事实上，**在这个特定的上下文中**，**static 什么都不做**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T08:24:24.720

你有点混淆了C和C++。C 中的关键字`static`旨在将变量的范围缩小到翻译单元。您可以在翻译单元中全局定义它，但它对其他翻译单元不可见。Bjarne Stroustrup 建议`namespaces`在 C++ 中使用匿名而不是在 C 中使用`static`like。

从[这篇](https://stackoverflow.com/questions/154469/unnamed-anonymous-namespaces-vs-static-functions)文章中它说

C++ 标准在第 7.3.1.1 节未命名命名空间，第 2 段中写道：

```
The use of the static keyword is deprecated when declaring objects 
in a namespace scope, the unnamed-namespace provides a superior alternative. 
```

静态仅适用于对象、函数和匿名联合的名称，不适用于类型声明。

# c# - 如何检索应用模板的名称（键）？

> ID：15828896
> 
> 赞同：4
> 
> 时间：2013-04-05T08:08:51.000
> 
> 标签：c#, wpf

我有一个分配给按钮的模板：

```
<Button x:Name="btn_PatMat" Template="{StaticResource PatMat_Button}" ... 
```

如何`Key/String/Name`从所述按钮中检索此模板的？

伪代码：

```
String = btn_PatMat.Template.???.ToString() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T16:12:55.237

你不能。至少不是你尝试的方式。

引用[这篇关于 x:Key 的 SO 帖子](https://stackoverflow.com/a/4425632/302677)（强调我的）：

> `x:Key`用于作为值添加到字典中的项目，通常用于添加到 ResourceDictionary 的样式和其他资源。**设置 x:Key 属性时，对象上实际上没有相应的属性，甚至没有设置附加的依赖属性。**XAML 处理器仅使用它来了解调用 Dictionary.Add 时要使用的键。

`StaticResources`在加载过程中进行评估，因此一旦控件加载，该`Template`属性就不再设置为绑定，而是设置为`ControlTemplate`来自资源的副本，并且该对象上没有相应的属性设置为键。

您可以通过在加载按钮后检查按钮的 XAML 来验证这一点，方法是使用[XamlWriter.Save](http://msdn.microsoft.com/en-us/library/system.windows.markup.xamlwriter.save.aspx)之类的东西来查看它的 XAML 字符串。

我能想到的唯一可行的解​​决方案是遍历您的`.Resources`，并找到一个`ControlTemplate`等于您的 Button 的`ControlTemplate`. 我没有对此进行测试，它对于大型资源库可能不是很实用，但它可能是一种选择。

但是更好的解决方案可能是更改您的逻辑，以便可以通过任何对象需要的其他方式访问键值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:45:40.767

好吧，恐怕这是不可能的，因为它不是 WPF 的意图。有些人想要访问`x:Name`类似于`x:Key`，他们都不得不放弃。

请查看此[SO 帖子](https://stackoverflow.com/questions/7172030/how-to-access-xname-property-in-code-for-non-frameworkelement-objects)和此[附加链接](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/bf2aae92-6217-49d7-92e5-56c656b5703b)。

我能想象的唯一解决方法是从[ResourceDictionary](http://msdn.microsoft.com/de-DE/library/windowsphone/develop/system.windows.resourcedictionary%28v=vs.105%29.aspx)读取所有模板，实例化每个资源（如果可能），找到模板（如果它是例如样式）并将其与控件中找到的模板的当前实例进行比较。但这似乎是一个非常丑陋的解决方案，我不确定它是否会毫无问题地工作。

# javascript - 文本字段中的值未返回任何内容

> ID：15828900
> 
> 赞同：3
> 
> 时间：2013-04-05T08:09:07.427
> 
> 标签：javascript

我正在尝试构建一个小应用程序，用户在其中输入商店名称，该名称将成为图像的替代文本，其商店的 URL 将成为 ah ref，然后将生成一些复制和粘贴代码以用于他们网站。

我遇到的问题是，当尝试使用 vanilla JavaScript 读取商店名称的值时，没有显示任何内容。

请看我的小提琴：http: [//jsfiddle.net/willwebdesigner/gVCcm/](http://jsfiddle.net/willwebdesigner/gVCcm/)

```
$(document).ready(function() { 

    //  Creates a method and prototype for the Array for splicing up words
    Array.prototype.removeByValue = function(val) {
        for(var i=0; i<this.length; i++) {
            if(this[i] == val) {
                this.splice(i, 1);
                break;
            }
        }
    }

    var myStore = {
        storeName: document.getElementById("storeName").value,
        Url: document.getElementById("yourURL"),
        instructions: "<p>Please copy the code above and paste it into your webpage to display the shop4support logo and a link to your store.</p>",

        blackLogo: function() {
            return "&lt;img src=&quot;https://www.shop4support.com/Resources/home/information/InformationForProviders/Availables4s-bk.jpg&quot; alt=&quot;" + this.storeName + " is available on shop4support&quot; /&gt;";
        }
    }

    $("#urlForm").submit(function(e) {

        // Clear output form first
        $(output).html(' ');
        e.preventDefault();

        // Create an array for conditional statements
        var address = [];
        address = $(myStore.Url).val().split("www");

        // Need to put a conditional in here to detect if https://
        if(address[0] === "https://") {
            $(output)
                .slideDown()
                .prepend("&lt;a href=&quot;"+ $(myStore.Url).val() + "&quot;&gt;" + myStore.blackLogo() + "&lt;/a&gt; ")
                .append(myStore.instructions);

        } else if(address[0] === "http://") {
            // Remove the http part off the URL
            var removeHttp = address;
            removeHttp.removeByValue('http://');
            $(output)
                .slideDown()
                .prepend("&lt;a href=&quot;https://www" + removeHttp + "&quot;&gt;" + myStore.blackLogo() + "&lt;/a&gt; ")
                .append(myStore.instructions);

        } else {
            $(output)
                .slideDown()
                .prepend("&lt;a href=&quot;https://"+ $(myStore.Url).val() + "&quot;&gt;" + myStore.blackLogo() + "&lt;/a&gt; ")
                .append(myStore.instructions);
        }
    });
}); 
```

谢谢威尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:14:35.507

在您初始化 myStore 对象的那一刻，尚未填写值。您必须在提交时执行此操作。

因此，您可以将 移动`var myStore = {}`到提交回调中：

[http://jsfiddle.net/gVCcm/1/](http://jsfiddle.net/gVCcm/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:21:48.447

**将您的代码更新为：**

```
 $("#urlForm").submit(function(e) {
               myStore.storeName= (document.getElementById("storeName").value);
   /* The rest of your code */
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:23:16.607

在以下位置初始化您的 myStore 变量：

```
$("#urlForm").submit(function(e) {
 var myStore = {}
}); 
```

# ios - 是否可以有条件地禁用 NSManagedObject 属性的 NSValueTransformer？

> ID：15828901
> 
> 赞同：1
> 
> 时间：2013-04-05T08:09:09.910
> 
> 标签：ios, cocoa, core-data, nsvaluetransformer

具体来说，假设我有一个 NSManagedObject，其“statusCode”属性设置为可转换，还有一个可逆值转换器子类可以从 NSStrings 转换为 NSNumbers，反之亦然。这个想法是使用值转换器，以便我接收 JSON 和来自 JSON 中的“状态”键的字符串自动映射到表示 NSManagedObject 中的状态代码的 NSNumber。相反，如果我将 NSManagedObject 上传到服务器，此时其状态属性将从 NSNumber 转换为 JSON 的字符串。

到现在为止还挺好。但是，如果我还希望能够从 NSManagedObjec 的 status 属性中获取一个简单的 int，以便我可以将其与代码中的枚举进行 AND 操作，该怎么办？也就是说，我会撒谎以涵盖 3 种情况：

1.  `myManagedObject.status = [JSONResponse valueForKey:@"status"]`（应该使用转换器来做 NSString -> NSNumber）
2.  `[JSONforUpload setValue:myManagedObject.status forKey:@"status"]`（应该使用transformer来做NSNumber->NSString）
3.  从代码中的其他地方，任何类似于以下内容的内容：`if(myManagedObject.status & statusInProgress) ...`其中 statusInProgress 是一个枚举。

我想我可以暂时禁用值转换器，但是我不知道 NSManagedObject 是否有对它的引用，或者我是否应该从 NSValueTransformer 类中禁用它，这显然保留了一个已注册的转换器表？

我知道对于第三种情况，我可以做`[myManagedObject.status intValue]`然后做按位比较，但我想知道`intValue]`从这个对象的用户的角度来看，是否有任何方法可以自动返回。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:13:53.977

为什么不为 JSON 转换编写两个额外的方法并将属性保留为整数？那么你将拥有两全其美的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T11:19:00.893

一种方法是向转换器添加一个属性，以便它在字符串和枚举反转值之间切换。这会起作用，尽管我最终做了一个 enum<->string 转换器并且没有在可转换属性上使用它（相反，我将托管对象的属性保留为 int），而是仅为 JSON <-> 对象转换实例化它。之后，在整个代码中，我只是按原样使用 int 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T14:21:40.463

假设该实体有自己独特的托管对象子类，您还可以简单地在该类中添加另一对访问器方法来封装`NSNumber`和`int`值之间的转换。（或者添加一个瞬态属性，如果它需要成为模型的一部分。但是您仍然需要编写自定义访问器来同步值。）

# ajax - Ajax 出错，status = 0，但 Fiddler 返回 200

> ID：15828903
> 
> 赞同：1
> 
> 时间：2013-04-05T08:09:20.013
> 
> 标签：ajax

这是我的代码：

```
$.ajax({
            type: "POST",
            async: true,
            url: "/MyController/MyMethod",
            data: {
                items: grid.getAllRowIds()
            },
            success: function (data) {
                debugger;                    
            },
            error: function (a, b, c) {
                debugger;
            }
        }); 
```

参数是正确的，因为输入了控制器中的方法，但是ajax没有成功。相反，它会出错，状态码= 0。提琴手说一切正常。

到底是怎么回事？

并且响应文本是空字符串。

# python-2.7 - Raspberry Pi - Rainforest EMU-2 - Python - 从 SCE 智能电表读取时间

> ID：15828910
> 
> 赞同：0
> 
> 时间：2013-04-05T08:09:37.510
> 
> 标签：python-2.7, serial-port, raspberry-pi, epoch

我现在正在使用 Python 进行编程，这是我的第一个项目。任何帮助，将不胜感激。

我最近从 Rainforest 获得了一个可以读取我的电表的设备。该装置有一个可通过 USB 访问的 USB 端口。我设法将设备连接到我的 Raspberry Pi 并从串行端口中提取一个十六进制字符串。目前该字符串正在读取 0x18f0cb39。我需要获取这个数字并将其转换为正确的格式并将其输出为时间和日期。我正在编程的设备手册位于[http://www.rainforestautomation.com/sites/default/files/download/rfa-z106/raven_xml_api_r127.pdf](http://www.rainforestautomation.com/sites/default/files/download/rfa-z106/raven_xml_api_r127.pdf)

在将时代转换为时间和日期时，我很困惑。我把#'s放在有困难的行前面。

我写的代码是：

```
#!/usr/bin/env python
import serial
import time
serial.port = serial.Serial("/dev/ttyUSB0", 115200, timeout=0.5)
serial.port.write("<Command><Name>get_time</Name><Refresh>N</Refresh></Command>")
response=serialport.readline(none)
response=serialport.readline(none)
response=serialport.readline(none)
response=serialport.readline(none)
response=serialport.readline(none)
myString=response[13:23]
#struct_time = int(raw_input(((myString >> 40) +1970, (ts >> 32 & 0xFF) +1, ts >> 24 & 0xFF, ts>> 16)))
#thetime=time.strftime("%7-%m-%d-%H-%M-%s)
print myString 
```

在此先感谢您的帮助

斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:57:10.180

查看文档，我不完全了解您如何使用切片 13:23 从 TimeCluster 响应中获取时间（以十六进制表示），但您的问题的要点和您注释掉的代码似乎是如何做我将 0x18f0cb39 转换为本地日期和时间？

```
>>> import time
>>> help(time)
(output snipped, but this is so handy....)
>>> t = 0x18f0cb39
>>> time.ctime(t)
'Tue Apr  5 15:37:29 1983'
>>> time.localtime(t)
time.struct_time(tm_year=1983, tm_mon=4, tm_mday=5, tm_hour=15, tm_min=37, tm_sec=29, tm_wday=1, tm_yday=95, tm_isdst=0) 
```

由于您在 6 天前发布了您的问题，而今天是第 11 天，那么该答案中的日期似乎正好相差 30 年，所以我一定做错了什么，但也许这会让您朝着正确的方向或提示迈出一步别人为你写一个更好的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T22:05:42.550

根据 Rainforest RAVEn XML API 文档，对您的 GetTime 请求的 TimeCluster 响应说明了数据格式：

```
TimeCluster notifications provide the current time reported on the 
meter in both UTC and Local time. The time values are the number of 
seconds since 1-Jan-2000 UTC. 
```

正如您已经猜到的，Python 时间是自 1970 年 1 月 1 日以来的秒数。因此，您可以像这样从 2000 年 1 月 1 日的 Rainforest 纪元转换为 Python 纪元：

```
myString=response[13:23] 
seconds_since_2000 = int(myString, 16)
# compute number of seconds between 1-Jan-1970 and 1-Jan-2000
delta = calendar.timegm(time.strptime("2000-01-01", "%Y-%m-%d"))
time.ctime(seconds_since_2000 + delta) 
```

（注意：以上内容仅为示例。在生产系统中，您可能希望编写一个专用函数来在 RAVEn 生成的原始十六进制文本和 python 时间对象之间进行转换。）

# .net - 如何解析连续的文本流

> ID：15828911
> 
> 赞同：0
> 
> 时间：2013-04-05T08:09:37.840
> 
> 标签：.net, yacc, lex

我的任务是编写一个使用[管理界面](http://openvpn.net/index.php/open-source/documentation/miscellaneous/79-management-interface.html)控制 OpenVPN 的应用程序，这只是一个文本流。

我考虑过使用像 lex 和 yacc 这样的词法分析器和解析器生成器来完成这项工作。但由于也有以“>”开头的异步行，我不知道这是否可能。

我应该自己解析文本还是 lex 和 yacc（实际上是 fslex 和 fsyacc，因为我应该使用 F#）来处理这类事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T19:28:19.053

大概是可行的。您可以通过推翻`input`词法分析器来最好地处理异步行，并在最早阶段取出这些异步行。这些行应该以某种方式注入到稳定的令牌流中，还是可以/是否可以单独处理？注入稳定流将更加困难，除非您有容易检测到的点来注入它们。

# javascript - 在子数组Javascript中选择项目

> ID：15828914
> 
> 赞同：-1
> 
> 时间：2013-04-05T08:09:45.340
> 
> 标签：javascript, arrays

我生成了一个这样的数组，我想获取每个子数组中的第一项：

```
arrayName = [[item1,item2,item3,item4],[item1,item2,item3,item4],[item1,item2,item3,item4]]; 
```

我正在循环尝试这个：

```
var num = arrayName.length;
for (i=0; i < num; i++) {
var title1 = arrayName[i][0];
} 
```

但我对此保持警惕：

```
alert(title1);
=
[
[
[ 
```

我需要：

```
alert(title1);
=
item1
item1
item1 
```

我尝试过使用 .nodeValue、.firstChild 等，但仍然没有找到答案。什么是正确的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:14:45.790

```
var num = arrayName.length;
var title1 = new Array();
for (i=0; i < num; i++) {
title1.push(arrayName[i][0]);
}
console.log(title1); 
```

更好的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:47:02.167

我发现这就是数组的创建方式。每个子数组都被推入此数组，但它正在检测 [ 作为字符串的一部分。改变这个推动已经解决了我的问题。感谢您的意见：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T08:17:05.407

您可以使用[Array.prototype.map](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/map)方法。

```
var arrayName = [[item1,item2,item3,item4],[item1,item2,item3,item4],[item1,item2,item3,item4]];

var childrenArray = arrayName.map(function(childArray) { return childArray[0]; }); 
```

[JSFiddle 示例](http://jsfiddle.net/c78jS/)

# python - 带有 Python 3.3 的蓝牙服务器

> ID：15828916
> 
> 赞同：14
> 
> 时间：2013-04-05T08:09:55.120
> 
> 标签：python, python-3.x, bluetooth

Python 3.3 自带对蓝牙套接字的原生支持。[不幸的是，它的文档](http://docs.python.org/3.4/library/socket.html?highlight=af_bluetooth)还不是很好（文档中只提到了一次）。

谷歌搜索有[一篇](http://bitsofpy.blogspot.com.ar/2012/09/bluetooth-with-python-33.html)关于实现客户端的博客文章，但我找不到任何关于创建服务器的信息。

更具体地说，如何设置用户友好的名称并宣传服务。

所以，像

```
import socket

serverSocket = socket.socket(socket.AF_BLUETOOTH,
                             socket.SOCK_STREAM,
                             socket.BTPROTO_RFCOMM)
serverSocket.setTimeout(1)
serverSocket.bind(("", 1))
serverSocket.listen(1)

something.advertise_service(something something) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-29T23:08:52.980

*坏消息*：Python 似乎不支持您想开箱即用的功能。（至少不在[socketmodule.c](http://hg.python.org/cpython/file/84cef4f1999a/Modules/socketmodule.c#l1)中）。

我见过的大多数 python/蓝牙用户都在使用[`pybluez`](https://code.google.com/p/pybluez/)，尽管它自 2009 年以来就没有更新过。

*好消息*：我浏览了他们的源代码（用于 Linux 连接），找到了广告服务的相关信息。大多数代码本质上是从 python 2.2 版本的`socketmodule.c`.

`pybluez`确实为对象定义了一些额外的功能`socket`来实现所有这些蓝牙好东西。它不会变得太低级，而是取决于[`BlueZ`](http://www.bluez.org/)它。据我所知，它基本上采用 python 对象并创建预期的数据结构`BlueZ`并调用它。如果您不想/不能使用`pybluez`，您将不得不以某种方式实现这个缺失的功能。我认为您可以使用 c-types 来做到这一点。广告服务的相关部分在 [btmodule.c](https://code.google.com/p/pybluez/source/browse/trunk/bluez/btmodule.c)中，第 2562-2642 行。

的源代码中有一个 python-3 分支`pybluez`，虽然我不知道它是否有效。

如果您决定使用`pybluez`，取自[其来源的示例](https://github.com/karulis/pybluez/blob/master/examples/simple/rfcomm-server.py)

```
server_sock=BluetoothSocket( RFCOMM )
server_sock.bind(("",PORT_ANY))
server_sock.listen(1)

port = server_sock.getsockname()[1]

uuid = "94f39d29-7d6d-437d-973b-fba39e49d4ee"

advertise_service(server_sock, "SampleServer",
                  service_id = uuid,
                  service_classes = [ uuid, SERIAL_PORT_CLASS ],
                  profiles = [ SERIAL_PORT_PROFILE ], 
                  ) 
```

由于谷歌代码即将关闭，代码也可以在 github 上[找到](https://github.com/karulis/pybluez/)。

# knockout.js - 使用分页改进 CodeCamper

> ID：15828919
> 
> 赞同：2
> 
> 时间：2013-04-05T08:10:11.577
> 
> 标签：knockout.js, breeze, single-page-application, durandal

我一直在观看 John Papa 关于 Pluralsight 构建 SPA 的精彩视频。

现在，我正在尝试为 Sessions 页面实现分页，但我不确定我所做的是否是正确的方法。如果有人尝试过类似的事情，我将不胜感激。

这就是我所做的。

会话.html

* * *

```
 <section>
    <footer>
        <ul class="pager">
            <li>
                <button class="btn btn-info btn-small" data-bind="click: previous, enable:canPrev"><i class="icon-angle-left"></i>Previous</button>
            </li>
            <li>
                <button class="btn btn-info btn-small" data-bind="click: next, enable: canPrev">Next<i class="icon-angle-right"></i></button>

            </li>
        </ul>
    </footer>
</section> 
```

会话.js

* * *

```
 var  currentPage = ko.observable(), 

   activate = function () {
        currentPage(0);
        return datacontext.getSessionPartials(sessions);
   },

   previous = function () {
        currentPage(currentPage() - 1);
        return datacontext.getSessionPartials(sessions, true, currentPage());
    },

    canPrev = ko.computed(function () {
        return currentPage() > 0;
    }),

    canNext = ko.computed(function () {
        //return currentPage > 0;
    }),

    next = function () {
        currentPage(currentPage() +1);
        return datacontext.getSessionPartials(sessions, true, currentPage());
    },

   var vm = {
        //existing stuff plus the following:
        previous: previous,
        next: next,
        currentPage: currentPage,
        canPrev: canPrev,
        canNext: canNext,
    }; 
```

数据上下文.js

* * *

```
 var query = EntityQuery.from('Sessions')
            .select('id, title, code, speakerId, trackId, timeSlotId, roomId, level, tags')
            .skip(currentPage * 5).take(5)                
            .orderBy('timeSlotId, level, speaker.firstName')
            .inlineCount(true); 
```

这可行，除了 canNext，因为我不知道如何将 inlineCount 的结果添加到会话视图模型中。最好的方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T09:53:35.027

获取 inlineCount 在 datacontext.js 中添加这一行

```
 var getSessionPartials = function (sessionsObservable, totalpages,totalrecords, currentPage) {

        var query = EnityQuery.from('Sessions')
               .select('id, title, code, speakerId, trackId, timeSlotId, roomId, level, tags')
               .skip(currentPage * 5).take(5)
               .where("title","startsWith","A")
               .orderBy('timeSlotId, level, speaker.firstName')
               .inlineCount(true);

        return manager.executeQuery(query)
                .then(querySucceeded)
                .fail(queryFailed);

        function querySucceeded(data) {
            var list = partialMapper.mapDtosToEntities(
               manager, data.results, entityNames.session, 'id'
               );

            if (sessionsObservable) {
                sessionsObservable(list);
                totalpages(Math.ceil(data.inlineCount / 10));
                totalrecords(data.inlineCount);
            }

            log('Retireved Sessions from remote datasource', data, true);
        }
    }; 
```

在 session.js 添加

```
var currentPage = ko.observable();
var totalPages = ko.observable();
var totalrecords = ko.observable();

canNext = ko.computed(function () {
    return currentPage() < totalPages();
    //return true;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:35:13.070

使用 Breeze，您可以获得任意数量的行，因为 Breeze 会在其实体管理器中为您缓存它们。然后只在页面上显示您想要的那些。因此，对于 20 的页面大小，如果您愿意，可以抓取 40，然后显示 20。这样您已经有了下一个 20，并且知道是否还有另一个页面。您可以通过这种方式模拟虚拟分页。好的，好吧，它并不优雅，但它有效:)

另一种选择是使用记录计数来启动呼叫。我模糊地记得 Breeze 的人说可能有一种方法可以使用 Breeze 获得总记录数。我会请他们插话，因为我记不太清楚了。

如果您使用与获取计数相同的调用来获取数据，那么您可以将值设置为数据上下文中的实体。或者，您可以从您的方法返回一个包含会话和计数的包装对象。像这样的东西...

```
// inside the datacontext method's querySucceeded
// data is your session data you got back
// rowCount is the number of total rows.

return { sessions: data, rowCount: rowCount }; 
```

# ms-access - 在 Access 2010 中保存记录之前检查重复项

> ID：15828925
> 
> 赞同：0
> 
> 时间：2013-04-05T08:10:32.133
> 
> 标签：ms-access, ms-access-2010

在从表单保存数据时，我想检查重复的电子邮件和密码。如果电子邮件和密码已经在表格中，则提示一些消息。我也尝试了许多控制事件，但事件没有被触发；没啥事儿。也许我的代码是错误的，所以请帮助并指导我如何检查重复的电子邮件和密码。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:58:28.303

尽可能在表级别定义验证和约束通常被认为是一种好的做法。这样做时，您可以确保无论数据如何添加或更新（例如，通过导入、追加查询等），都会强制执行限制，并且您不必记住将验证规则添加到你建立的每一种形式。

在您的情况下，您将通过在表上定义唯一索引来“检查重复的电子邮件和密码”。在设计视图中打开表格后，您可以单击功能区“设计”选项卡上的“索引”按钮...

![丝带](https://i.stack.imgur.com/dXJ0S.png)

...然后在 [password] 和 [email] 字段上定义唯一索引：

![索引](https://i.stack.imgur.com/H1avd.png)

# apache - 如何在 /var/www/ 目录之外创建项目？

> ID：15828927
> 
> 赞同：6
> 
> 时间：2013-04-05T08:10:39.703
> 
> 标签：apache, ubuntu, directory

我有一个用于测试目的的具有静态 IP 的 Ubuntu 服务器，我想在 /var/www/ 目录之外创建一个项目（例如 hello-world），比如说在这个位置（/home/username/webroot/你好世界/）。它应该可以通过像这样的浏览器访问[http://xxx.xxx.xxx.xxx/hello-world/](http://xxx.xxx.xxx.xxx/hello-world/)我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:14:14.823

我会使用别名：

```
Alias /hello-world /home/www/foo
<Directory "/home/www/foo">
    Options -MultiViews -FollowSymLinks +SymLinksIfOwnerMatch
    AllowOverride all
</Directory> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:16:20.043

在您的 Apache-config 中启用[FollowSymlinks](https://httpd.apache.org/docs/2.4/mod/core.html#options)并在您的文件系统上创建一个符号链接。

```
ln -s /path/to/your/project /var/www/projectname 
```

并且替换内容很容易，无需重新加载服务器

```
rm /var/www/projectname
ln -s /path/to/your/project-v2 /var/www/projectname 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:13:59.063

您在 apache 的配置文件中配置虚拟主机：apache2.conf 或 httpd.conf：

```
<VirtualHost *:80>
        ServerPath /hello-world
        DocumentRoot /home/username/webroot/hello-world
</VirtualHost> 
```

# angularjs - AngularJS 在不同的地方处理不同的错误代码

> ID：15828932
> 
> 赞同：3
> 
> 时间：2013-04-05T08:11:01.587
> 
> 标签：angularjs, deferred, angularjs-service

我有一项服务，其中包含对所有 ajax 调用都使用的 $http 的通用调用。在这里，我有“集中式”错误处理，其中状态代码会导致重定向。

“FieldsSync”服务：

```
return $http({
    method: 'POST',
    url: url,
    data: $.extend(defaultPostData, postData)
}).error(function(data, status) {
    switch (status) {
        case 401: // "Unauthorized". Not logged in. 
            redirect.toLoginPage();
            break;
        case 403: // "Forbidden". Role has changed.
            redirect.toLogoutPage();
            break;
    }
}); 
```

当从控制器调用其中一个服务函数时，我总是返回延迟对象，以便能够连接更多错误回调，以便能够处理应该为用户带来某种反馈的错误。

控制器：

```
fieldsSync.createField(newField).success(function(data) {
    ...
}).error(function(data, status) {
    switch (status) { // <--- DO NOT WANT
        case 401:
        case 403:
            return; // These errors are handled (=redirects) in the generic error callback and we don't want to show do anything while it redirects.
    }
    ... // "Individual" error handling. =Displaying messages and stuff
}); 
```

但是因为我不希望在重定向发生之前弹出错误消息，如果已经处理了状态代码，我必须退出错误回调。

问题是：如何摆脱控制器中的开关盒？处理特定错误代码后是否可以退出错误回调链？还是有可能以一种不那么丑陋的方式解决这个问题？:)

这对我来说是一个反复出现的问题，我的思绪似乎卡住了。

我检查了文档，在 $http 或 $q 中找不到任何漂亮的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T16:45:24.203

我建议您使用 responseInterceptor 来处理这些情况：

[http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$http

当我遇到与您相同的“问题”时，我写了以下内容。它只是初稿，但您可以根据自己的需要进行改进

```
InternalServerErrorResponseInterceptor = function($q, InternalServerErrorService) {
    return function(promise) {
        return promise.then(function(response) {
            return response;
        }, function(response) {
            if (response.status > 499) {
                InternalServerErrorService.handleError();
                return $q.reject(response);
            }
            return $q.reject(response);
        });
    };
};
module.factory('InternalServerErrorResponseInterceptor', ['$q', 'InternalServerErrorService', InternalServerErrorResponseInterceptor]);
module.config(['$httpProvider', function($httpProvider) {
        $httpProvider.responseInterceptors.push('InternalServerErrorResponseInterceptor');
    }]); 
```

现在您的特定 InternalServerErrorService 可以按照您希望的方式处理它:)

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:30:10.430

我想出的一种解决方案是重做同步函数（puh！），这样它们就不会返回延迟对象。服务内的函数可以将回调作为参数。然后，我可以在调用该错误之前检查该错误是否已被通用错误处理处理。

伪代码：

服务：

```
fieldsSync.createField(newField, successCallback, failCallback) {
    ...
    genericErrorHandlerResultingInRedirects()
    if (not 401 || 403) {
        failCallback()
    }
}; 
```

控制器：

```
fieldsSync.createField({}, function successCallback(){}, function failCallback(){
    /* Handle errors that should give the user feedback */
}); 
```

其他解决方案是最受欢迎的。

# javascript - 如何使用字符串化文本和值在选择元素中发布所有选项？

> ID：15828933
> 
> 赞同：0
> 
> 时间：2013-04-05T08:11:05.080
> 
> 标签：javascript, dom, stringify

有一个`select`元素具有动态创建的选项。我想通过 ajax 等发布这些选项文本-值对...

是否可以将它们字符串化为文本值对？或者任何没有对文本值对进行字符串化的建议。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:15:55.920

如果您没有 jQuery，请使用它

```
function getSelectOptions(id){
    var select = document.getElementById('x');
    var obj = {};
    for(var i=0; i< select.options.length; i++){
        var option = select.options[i];
        obj[option.value] = option.innerHTML;
    }
    return obj;    
}
var opts = getSelectOptions('x');
console.log(opts, JSON.stringify(opts)) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/rYwGm/)

使用 jQuery

```
function getSelectOptions(id){
    var select = $('#' + id);
    var obj = {};
    $('option', select).each(function(i, v){
        var $this = $(this);
        obj[$this.val()] = $this.text();
    });
    return obj;    
}
var opts = getSelectOptions('x');
console.log(opts, JSON.stringify(opts)) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/jG5uA/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:20:32.260

在 GET 请求中，您可以以这种形式发送它们：

```
targetpage.php?option[key1]=value1&option[key2]=value2... 
```

服务器应该将其理解为键值数组。要获取选项值，请使用 Arun P Johny 建议的代码。

# java - 无需修改即可返回值

> ID：15828936
> 
> 赞同：0
> 
> 时间：2013-04-05T08:11:09.377
> 
> 标签：java

我在我的应用程序中使用 Setter getter 方法。我的包含 setter&getter 的课程是：

```
public class Product {

    private  ArrayList<Integer> id=new ArrayList<Integer>();

    public ArrayList<Integer> getId() {
        return id;
    }

    public void setId(ArrayList<Integer> id) {
        this.id = id;
    }
}

public class Check extends Activity {

    ArrayList<Integer> passedid=new ArrayList<Integer>();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_checkout_page);

        Intent checkoutintent=getIntent();
        Intent shopcart=getIntent();

        Product prodobj=new Product();
        passedid=prodobj.getId();   

        new LongRunningGetIO().execute();   
    }
} 
```

当我想对产品类的对象使用 getId() 方法时，它每次都返回空值。有什么方法可以返回存储在 setId() 方法中的 id 值。在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:15:56.593

> 有什么方法可以返回存储在 setId() 方法中的 id 值。

我对你的方法有点困惑。您想从您的列表中获取特定的 id，但您要返回整个列表。如何从您的列表中返回特定整数？然后您需要实现将值添加到列表的方法。

> 它每次都返回空值

您的列表无法返回，**`NULL`**因为您在代码中初始化了它。

## 更新：

```
ArrayList<Integer> passedid = new ArrayList<Integer>();
Product prodobj = new Product();
passedid = prodobj.getId(); 
```

这绝对没有任何意义。看，在这里你创建了新的 ArrayList passid，它是空的，然后分配下一个空的 ArrayList。

如果你想通过 Intents 传递数据，你需要使用 Intent 的方法：

```
putIntegerArrayListExtra(key, value) // for putting data to Intent
getIntegerArrayListExtra(key) // retrieving data from Intent 
```

> 你能建议我对我的问题中发布的产品类进行任何更改吗

所以可能你想将项目添加到你的列表中，所以你需要创建方法来实现这个目标：

```
public void add(int item) {
   this.id.add(item);
} 
```

或者只是创建一些 ArrayList，填充值，然后也使用你的 setter：

```
ArrayList<Integer> list = new ArrayList<Integer>();
list.add(1);
list.add(3);
Product product = new Product();
product.setId(list); 
```

# sql-server - 将主键列值分配给外键列

> ID：15828940
> 
> 赞同：0
> 
> 时间：2013-04-05T08:11:20.503
> 
> 标签：sql-server

我有两个名为`VisitorMaster`and的表`SupportVisitor`。在`VisitorMaster`我有一个称为`VisitorID1`主键的列（但不是标识列）。在`SupportVisitor`我有一个称为`VisitorID2`表的外键的列。`VisitorMaser`但我的要求是我希望将最后生成的列值`VisitorID1`插入到`VisitorID2`表`SupportVisitor`中。如何实现这一点..请帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T09:12:25.243

我认为您最好的选择是确保您使用事务将您的表包装`INSERT`到`VisitorMaster`表中，并且在事务中您获得`VisitorID`使用您插入的数据来查询它并最终`SupportVisitor`在提交之前将其放入的价值或回滚很多。

您可以使用触发器来执行此操作，但触发器是令人讨厌的事情，可能会产生各种意想不到的后果，因为它或多或少是无形的，所以我会避开它们。

最终，尽管我会问为什么您在一列中有一个非身份代理 PK？这是一个非常糟糕的设计。要么使用自然键（名字、姓氏、时间戳的组合或任何构成自然唯一键的组合），要么使用自动递增的身份字段作为代理 PK（然后您**可以**使用`SCOPE_IDENTITY`) 因为否则您的密钥非常不稳定，并且不能保证是唯一的。你是如何产生这个价值的？它是否保存在单独的表中（我知道一些数据库使用这种系统，尤其是 EAV 模型数据库，它在任何形状或形式上都不是一个好的系统，并且比任意值更容易处理)? 如果你对这个设计有任何影响，那么你应该改变它，因为它闻起来很臭，而且很可能在未来给你带来很多很多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:17:09.360

将记录插入到具有 IDENTITY 列的表中后，您可以通过选择范围标识来检索此行的数字标识：

```
INSERT INTO VisitorMaster (Name) VALUES ('Jane doe')

SELECT SCOPE_IDENTITY() -- Will retrieve ID for Jane Doe 
```

# url-redirection - URL 重定向到子域而不更改地址中的 URL

> ID：15828941
> 
> 赞同：1
> 
> 时间：2013-04-05T08:11:25.337
> 
> 标签：url-redirection

我是 Linux 新手，想使用 .htaccess 或代理进行 URL 重定向，使 URL 与 apache2 保持不变。

现在我想将我的主域[http://example.com/test](http://example.com/test)重定向到我的子域[http://test.example.com](http://test.example.com)而不更改地址栏中的 URL。

请帮助我给我一些指导方针 .htaccess 或代理或其他..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:18:21.653

如果您不希望更改 URL，则需要在两个虚拟主机/域之间设置反向代理，或者如果 example.com 只是别名、相同的 IP 并由相同的 Apache 虚拟主机提供服务，您可以使用内部重写。更多信息在[这里](https://stackoverflow.com/questions/13278439/using-htaccess-redirect-301-without-changing-url-in-address-bar)

你也可以试试这个。更多信息请[点击这里](https://stackoverflow.com/questions/14161394/redirect-domain-com-to-domain-com-category-without-changing-the-url-in-address-b)

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$ [NC]
RewriteRule ^/?(index.\php)?$ /category [L] 
```

这仅适用于[http://domain.com/](http://domain.com/)或[http://domain.com/index.php](http://domain.com/index.php)的请求，并且您将在[http://domain.com/category](http://domain.com/category)获得内容而无需更改 URL地址栏。`RewriteCond %{HTTP_HOST} ^(www\.)?domain\.com$`如果您不需要它，您甚至可能会丢失[NC] 行。

[这里](http://www.webmasterworld.com/apache/3323670.htm)还有一个有用的资源

```
RewriteEngine on 
RewriteBase / 
######## example.com ######## 
RewriteCond %{HTTP_HOST} ^.*example.com$ [NC] 
RewriteCond /www/quux-foo.com/www/root/v1%{REQUEST_URI} -d 
RewriteRule ^(.*[^/])$ %{REQUEST_FILENAME}/ [L]

RewriteCond %{HTTP_HOST} ^.*quux-foo.com$ [NC] 
RewriteCond %{REQUEST_URI} ^/v1/ 
RewriteRule ^(.*)$ - [F]

RewriteCond %{HTTP_HOST} ^.*example.com$ [NC] 
RewriteCond /www/quux-foo.com/www/root/v1%{REQUEST_URI} -f [OR] 
RewriteCond /www/quux-foo.com/www/root/v1%{REQUEST_URI} -d 
RewriteRule ^(.*)$ v1/$1 [L]

RewriteCond %{HTTP_HOST} ^.*example.com$ [NC] 
RewriteCond %{REQUEST_URI} !^/v1/ 
RewriteRule ^(.*)$ v1/index.php [L] 
######## example.com ######## 
```

# android - Ttitanium webview 和 HTML5 应用程序缓存

> ID：15828942
> 
> 赞同：2
> 
> 时间：2013-04-05T08:11:34.453
> 
> 标签：android, html, webview, titanium, application-cache

我正在使用 Titanium 为 Android 创建一个应用程序。该应用程序使用 webview 加载外部 HTML5 网页。网页使用清单来缓存页面和一些资产。这适用于 Android (Chrome) 中的桌面浏览器和第三方应用程序浏览器。

当我在 Titanium 构建应用程序的 web 视图中查看页面时，似乎没有使用清单，页面只是从服务器加载所有内容。当我使用手机的内置浏览器（HTC one X）时，也会出现同样的问题。

我想要完成的是页面离线可用，因此不需要互联网来查看缓存页面。是否有解决此问题的方法，或者我应该转向另一个方向来解决我的问题？

清单文件：

```
CACHE MANIFEST
# version 1 

leerlingen.html
jquery.js
style.css
handler.js

NETWORK:
* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:39:07.803

*第一：Titanium 提供的不仅仅是 WebView。如果您打算只显示网页，您可能应该看看 PhoneGap / Cordova，它可能会以更好的方式满足您的需求。*

* * *

正如您所注意到的，并非所有浏览器都按预期支持 HTML5 缓存功能。我不能说它是否不适用于一般的 Android 或仅适用于您的特定版本，因为 WebKit 通常支持它，但这取决于使用的 WebKit 版本。这可能会有所不同。

**编辑：**似乎（在本机 android 中）可以启用此功能，如下所示：[HTML5 中的应用程序缓存在 Android PhoneGap 应用程序中不起作用](https://stackoverflow.com/questions/12709673/application-cache-in-html5-doesnt-work-in-android-phonegap-application)。目前这在 Titanium 中是不可能的（可能有我不知道的非官方调整，但从[http://docs.appcelerator.com](http://docs.appcelerator.com)这是不可能的）。

我个人更喜欢另一种解决方案。自行缓存数据，无网络连接时显示。**但这**取决于您尝试实现的目标。很少有不经常更改的内容，这是有道理的。动态更改数据（例如 twitter 流）这将是困难的。这也取决于您的用户以及他们想要访问您的应用程序的位置。

还有一个悬而未决的问题：当你想使用所有缓存功能时，为什么要创建一个应用程序？创建一个简单的移动网页也可以完成同样的工作。创建应用程序时，我不会使用 HTML 5 的缓存功能。您应该将所有静态资源保留在应用程序中，并简单地从网络加载数据。这可以通过 Titanium 和 PhoneGap / Cordova 来实现。Titanium 对于原生 UI 和一些原生功能更有用，而 PhoneGap / Cordova 更适合基于 HTML5 的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T12:26:37.463

以防万一其他人遇到与我相同的问题，这就是我所做的。HTML5 的应用程序缓存似乎不适用于 Android 的内置浏览器以及 webviews。在 Titanium 中似乎无法控制 webview 以启用应用程序缓存。

我的解决方法是使用 Titanium 和它的 httpClient 函数（Titanium.Network.HTTPClient）来请求文件（HTML、CSS、javascript）并将其存储在本地应用程序文件系统（Titanium.Filesystem）中。

# java - Log.v 工作但无法在 android 模拟器中调试应用程序

> ID：15828943
> 
> 赞同：0
> 
> 时间：2013-04-05T08:11:36.747
> 
> 标签：java, android, debugging

我正在尝试调试应用程序，但它不工作。请有人可以建议我从我在下面发布的屏幕截图中发生了什么：

> ![在此处输入图像描述](https://i.stack.imgur.com/0SvtD.png)

@Kumar Bibek 感谢您的评论，但我仍然对您所说的感到困惑。我知道您告诉我它已禁用，但如果我切换它，它就会隐藏起来。它已被删除或显示为这样。从来没有没有十字架。

![在此处输入图像描述](https://i.stack.imgur.com/FFxGU.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:16:48.553

窗口 -> 显示视图 -> 其他... -> 调试 -> 断点

屏幕截图上有一个与图标相对应的符号（断点有一条线）。点击它，断点不会被跳过。

# php - mysql父ID循环

> ID：15828944
> 
> 赞同：2
> 
> 时间：2013-04-05T08:11:43.433
> 
> 标签：php, mysql, sql

我有两个 Mysql 表

```
participants

id   |   name   | lastname |
-----------------------------
1    |    Jon   |   Bush   |
-----------------------------
2    |  Stephen |   Eagle  | 
```

和

```
posts

id    |  parentid |  Title  |   text
--------------------------------------
1     |    1      |  Title1 |  Text1
---------------------------------------
2     |   1       | title3  |  text2
---------------------------------------
3     |      1    | title4  | text4
--------------------------------------
4     |      2    |   title |   ttext 
```

我需要离开桌子

```
--------------------------
id (1) | Jon   | Title1, title3, title4
------------------------------
id (2) | Stephen | title 
```

我尝试这样做

```
$result = mysql_query("SELECT name, Title, participants.id, parent FROM aposts, participants WHERE paricipants.id = parent.parent group by last_name  ORDER BY ......."); 
```

但是在这种情况下，我无法在父母身上找到这个父母的所有帖子......也许有人可以帮助我......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:14:35.180

我不确定这是否正是您想要的。看到你的例子，你想`Title`为每个`ID`和返回用逗号分隔`Name`。MySQL 有一个内置函数，称为`GROUP_CONCAT`连接行而不是列。

```
SELECT  a.ID, a.Name,
        GROUP_CONCAT(b.Title) TitleList
FROM    participants a
        INNER JOIN posts b
            ON a.ID = b.parentID
GROUP   BY  a.ID, a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/241cd/1)
*   [MySQL GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

输出

```
╔════╦═════════╦══════════════════════╗
║ ID ║  NAME   ║      TITLELIST       ║
╠════╬═════════╬══════════════════════╣
║  1 ║ Jon     ║ Title1,title3,title4 ║
║  2 ║ Stephen ║ title                ║
╚════╩═════════╩══════════════════════╝ 
```

# asp.net-mvc-3 - 如何将现有文件夹及其所有子文件夹和内容添加到解决方案中？

> ID：15828945
> 
> 赞同：18
> 
> 时间：2013-04-05T08:11:44.740
> 
> 标签：asp.net-mvc-3, visual-studio-2012

有没有办法将现有文件夹及其所有子文件夹和内容添加到 Visual Studio 2012 中的解决方案？一些方法，比如压缩它或类似的东西......？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-05T08:13:48.650

解决方案资源管理器中有一个名为`Show All files`. 单击它，然后选择要包含到项目中的文件夹：

![在此处输入图像描述](https://i.stack.imgur.com/kbbXa.png)

请注意不属于项目的文件夹如何以白色显示。您可以选择要包含的文件夹，右键单击它并`Include In Project`在上下文菜单中选择。这将递归地将所有文件包含到项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T17:07:23.470

您显示的文件夹是“项目文件夹”。这不适用于创建为“解决方案文件夹”的文件夹。如果您右键单击解决方案的顶部节点，您可以选择添加新的“解决方案文件夹”。但是，当你做这个 VS 时，2012 不会创建一个具有相应名称的系统文件夹。

到目前为止，我发现可行的是首先在 Visual Studio 中创建一个具有所需相对路径的“解决方案文件夹”，然后在该“解决方案文件夹”中创建一个新项目，在创建项目时要小心输入具有匹配的相对路径的项目的系统文件夹。VS 将为您创建系统文件夹，并在那里安装项目。（或者您可以将现有文件拖放到您创建的“解决方案文件夹”中，如果添加现有文件是您的目标；重要的一点是将系统相对路径与解决方案相关小路。）

# haskell - 与 unsafeCoerced 值一起使用时显示返回错误值

> ID：15828947
> 
> 赞同：5
> 
> 时间：2013-04-05T08:11:57.887
> 
> 标签：haskell, ghc, coercion

我正在尝试使用`unsafeCoerce`and `Int8`，`Word8`我发现了一些令人惊讶的行为（无论如何对我来说）。

`Word8`是一个 8 位无符号数，范围为 0-255。`Int8`是一个有符号的 8 位数字，范围为 -128..127。

由于它们都是 8 位数字，我认为将一个强制转换为另一个是安全的，并且只返回 8 位值，就好像它是有符号/无符号的一样。

例如，`unsafeCoerce (-1 :: Int8) :: Word8`我希望得到一个`Word8`255 的值（因为 -1 在有符号整数中的位表示与无符号整数中的 255 相同）。

但是，当我执行强制时，`Word8`行为很奇怪：

```
> GHCi, version 7.4.1: http://www.haskell.org/ghc/  :? for help
> import Data.Int
> import Data.Word
> import Unsafe.Coerce
> class ShowType a where typeName :: a -> String
> instance ShowType Int8 where typeName _ = "Int8"
> instance ShowType Word8 where typeName _ = "Word8"

> let x = unsafeCoerce (-1 :: Int8) :: Word8
> show x
"-1"
> typeName x
"Word8"
> show (x + 0)
"255"
> :t x
x :: Word8
> :t (x + 0)
(x + 0) :: Word8 
```

我不明白怎么`show x`回到`"-1"`这里。如果您查看，结果中`map show [minBound..maxBound :: Word8]`没有可能的值。此外，即使类型没有改变，向数字添加 0 会如何改变行为？奇怪的是，似乎只有类受到影响——我的类返回正确的值。`Word8``"-1"``Show``ShowType`

最后，代码`fromIntegral (-1 :: Int8) :: Word8`按预期工作，并返回 255，并与`show`. 编译器是否/可以将此代码简化为无操作？

请注意，这个问题只是出于对类型在 ghc 中的低级别表示方式的好奇。我实际上并没有在我的代码中使用 unsafeCoerce。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T13:46:35.517

就像@kosmikus 所说，两者`Int8`和`Int16`都是使用 实现的`Int#`，它在 32 位架构上是 32 位宽的（并且`Word8`在`Word16`引擎盖`Word#`下）。GHC.Prim 中的[这条评论更详细地解释了这一点。](http://www.haskell.org/ghc/docs/7.2.2/html/libraries/ghc-prim-0.2.0.0/GHC-Prim.html#g:1)

因此，让我们找出为什么这种实现选择会导致您看到的行为：

```
> let x = unsafeCoerce (-1 :: Int8) :: Word8
> show x
"-1" 
```

的`Show`实例`Word8` [定义为](http://hackage.haskell.org/packages/archive/base/latest/doc/html/src/GHC-Word.html#Word8)

```
instance Show Word8 where
    showsPrec p x = showsPrec p (fromIntegral x :: Int) 
```

并且[`fromIntegral`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:fromIntegral)只是`fromInteger . toInteger`。`toInteger`for的定义`Word8`是

```
toInteger (W8# x#)            = smallInteger (word2Int# x#) 
```

其中`smallInteger`（在 integer-gmp 中定义）是

```
smallInteger :: Int# -> Integer
smallInteger i = S# i 
```

并且`word2Int#`是具有类型的[primop](http://hackage.haskell.org/trac/ghc/wiki/Commentary/PrimOps)`Word# -> Int#` - C ++中的类似物`reinterpret_cast<int>`。这就解释了为什么您`-1`在第一个示例中看到：该值只是被重新解释为有符号整数并打印出来。

现在，为什么要加`0`给`x`你`255`？查看`Num`实例，`Word8`我们看到：

```
(W8# x#) + (W8# y#)    = W8# (narrow8Word# (x# `plusWord#` y#)) 
```

所以看起来`narrow8Word#`primop是罪魁祸首。让我们检查：

```
> import GHC.Word
> import GHC.Prim
> case x of (W8# w) -> (W8# (narrow8Word# w))
255 
```

它的确是。这就解释了为什么添加 0 不是无操作 -`Word8`添加实际上将值限制在预期范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T08:41:23.230

用过之后不能说有什么问题`unsafeCoerce`。如果您使用该功能，任何事情都可能发生。编译器可能将 a 存储`Int8`在一个单词中，并使用`unsafeCoerce`它来`Word8`破坏该单词中存储的内容的不变量。用于`fromIntegral`转换。

从`Int8`到`Word8`using的转换`fromIntegral`变成了`movzbl`在 x86 上使用 ghc 的指令，这基本上是一个空操作。

# php - Yii 样板文件在哪里解压文件

> ID：15828952
> 
> 赞同：0
> 
> 时间：2013-04-05T08:12:35.587
> 
> 标签：php, yii, boilerplate

我一直在努力寻找答案，但没有运气。是否应该将所有 zip 解压缩到 www 目录？这会很奇怪，因为网站的 url 看起来像`localhost/myapp/frontend/`。拥有像 Also 这样的链接会更好`localhost/myapp/`——放置所有文件（包括 yii 框架文件）似乎有点不安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T09:21:16.527

您可以通过编辑 中的文件来指定您的`localhost`目录。编辑这些行：`000-default``etc/apache2/sites-enabled`

```
[4]DocumentRoot /var/www
[9]<Directory /var/www/> 
```

例如，如果您`myapp`在 中`www/myapp`，那么您将导航到该页面：`localhost/myapp`

# c# - Migradoc 页脚注释跳过第一页

> ID：15828954
> 
> 赞同：0
> 
> 时间：2013-04-05T08:12:44.463
> 
> 标签：c#, migradoc

一切都很顺利，直到客户说他希望 pdf 的第一页成为封面。这意味着第一页应该没有边距，而下一页应该没有边距。我继承了所有导出文件的基类在它的构造函数中具有：

```
public ExportPDF()
{
    this.document = new Document();
    this.document.DefaultPageSetup.Orientation = Orientation.Portrait;

    this.document.Info.Author = GlobalBL.AdministratorFullName;
    this.document.FootnoteLocation = FootnoteLocation.BottomOfPage;
    this.document.FootnoteNumberStyle = FootnoteNumberStyle.Arabic;
    this.document.FootnoteStartingNumber = 1;

    this.document.DefaultPageSetup.PageFormat = PageFormat.A4;
    this.document.DefaultPageSetup.TopMargin = "1cm";
    this.document.DefaultPageSetup.BottomMargin = "2cm";
    this.document.DefaultPageSetup.LeftMargin = "1cm";
    this.document.DefaultPageSetup.RightMargin = "1cm";
    this.document.DefaultPageSetup.HeaderDistance = "0cm";
    this.document.DefaultPageSetup.FooterDistance = "0cm";
    this.document.UseCmykColor = false;

    DefineStyles();

    this.section = this.document.AddSection();
} 
```

我注意到，即使我评论脚注部分，没有任何变化，我仍然得到脚注编号。因此，在这种格式下，所有页面都会获得边距。如果我把它们拿出来，封面看起来很完美，但其余的页面却没有。但是我想在每一个导出的项目上我都可以做缩进或其他事情，还不知道，也许有人也可以对此有所了解......但是可以摆脱页码，更重要的是，怎么能我跳过了第一页（封面）的编号？真的希望有人能帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:20:14.373

脚注是脚注。我认为您不会在文档中使用脚注。

页眉和页脚是一个不同的故事。通常，您使用页脚添加页码。我想这就是你所做的。

在您的情况下，我会做什么：使用一个部分作为封面，并为文档的其余部分创建一个新部分（Document 类的方法 AddSection()）。

无论如何，您都不应该更改 DefaultPageSetup。每个部分都有自己的 PageSetup，因此您可以为封面页和文档的其余部分设置不同的边距。

# c# - 获取 XML 文件的属性值

> ID：15828961
> 
> 赞同：0
> 
> 时间：2013-04-05T08:13:12.300
> 
> 标签：c#, xml, xsd

我遇到了 XML 的问题，并在 XML 文件上写了一些信息。
我有几个描述我的 XML 的 xsd 文件。我用 etc 创建了一个大的 .cs 文件`"xsd/c testfile1.xsd testFile2.xsd..."`。一切都很顺利，看起来也不错。
但是，如果我使用一个创建的类，即 testfile1.xsd，它看起来像 `"<xs:complexType name="Header">"`在那个里面有一些普通的 xs:element 和东西，还有这个：`"<xs:attribute name="version" default="1.0.0.0"/>"`。这被翻译成：

```
"public Header() {
 this.versionField = "1.0.0.0";}" 
```

在生成的类“标题”中。它也得到了这个领域：`private string versionField;`

. （当然还有其他一些私有领域，但这些都很好用。）。所以我创建了所有类的实例，用数据填充它们并将它的写成一个 XML 文件：

```
 - XmlSerializer XmlSerRoot = new XmlSerializer(typeof(RootInformation))
   (the root of my xml!) 
 - StringWriterWithEncoding strWriter = new StringWriterWithEncoding(Encoding.GetEncoding("iso-8859-1"));
 - XmlDocument documentInXML = new XmlDocument();
 - XmlSerRoot.Serialize(strWriter, rootInformation); (Here is the XML, filled with values, and the Header.version got the value 1.0.0.0) 
 - string XmlString;
 - XmlString = strWriter.ToString(); (Here I can look at the created xml when debugging in VS and now the version-information is gone)
 - documentInXML.LoadXml(XmlString);
 - documentInXML.Save(myPath); 
```

但是当我查看 xml 文件时，`<Header>`它没有任何类似版本的东西。我希望我看起来像：`<Header version="1.0.0.0">`
我什至尝试在代码中做到这一点：

```
Header header = new Header(); 
header.version = header.version; 
and
with header.version = "1.0.0.0"; 
```

但是标签中仍然没有版本文本。所有其他标签都有其价值。就这样`<Header>`松散了这些额外的信息。
有人有小费吗？有很多地方我需要这个来工作。其他一切工作正常。

问候，/ E

这是一段示例代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Xml.Serialization;
using System.IO;
using System.Xml;
namespace TestAppXML
{
    class Program
    {
        static void Main(string[] args)
        {
            RootInfo rootInfo = new RootInfo();
            rootInfo.RootText = "This is the Root!";
            Header header = new Header();
            header.TestHeader = "This is HeaderText!";
            rootInfo.Header = header;
            XmlSerializer XmlSerRoot = new XmlSerializer(typeof(RootInfo));
            StringWriterWithEncoding strWriter = new StringWriterWithEncoding(Encoding.GetEncoding("iso-8859-1"));
            XmlDocument documentInXML = new XmlDocument();
            XmlSerRoot.Serialize(strWriter, rootInfo);
            string XmlString;
            XmlString = strWriter.ToString();
            documentInXML.LoadXml(XmlString);
            strWriter.Close();
            documentInXML.Save(@"C:\TestXml.xml");
        }
    }

    /// <remarks/>
    [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
    [System.SerializableAttribute()]
    [System.Diagnostics.DebuggerStepThroughAttribute()]
    [System.ComponentModel.DesignerCategoryAttribute("code")]
    [System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://acme.com")]
    [System.Xml.Serialization.XmlRootAttribute(Namespace = "http://acme.com", IsNullable = false)]
    public partial class RootInfo
    {
        private Header headerField;
        private string rootTextField;
        public Header Header
        {
            get { return this.headerField; }
            set { this.headerField = value; }
        }

        [System.Xml.Serialization.XmlElementAttribute(DataType = "normalizedString")]
        public string RootText
        {
            get { return this.rootTextField; }
            set { this.rootTextField = value; }
        }
    }

        [System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
        [System.SerializableAttribute()]
        [System.Diagnostics.DebuggerStepThroughAttribute()]
        [System.ComponentModel.DesignerCategoryAttribute("code")]
        [System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://acme.com")]
        public partial class Header
        {
            private string testHeaderField;
            private string versionField;
            public Header()
            {
                this.versionField = "1.0.0.0";
            }

            /// <remarks/>
            [System.Xml.Serialization.XmlElementAttribute(DataType = "normalizedString")]
            public string TestHeader
            {
                get { return this.testHeaderField; }
                set { this.testHeaderField = value; }
            }

            [System.Xml.Serialization.XmlAttributeAttribute()]
            [System.ComponentModel.DefaultValueAttribute("1.0.0.0")]
            public string version
            {
                get { return this.versionField; }
                set { this.versionField = value; }
            }
        }
        class StringWriterWithEncoding : StringWriter
        {
            private Encoding MyEncoding;
            public StringWriterWithEncoding(Encoding encoding)
                : base()
            {MyEncoding = encoding;}
            public override Encoding Encoding
            {
                get{return MyEncoding;}
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T16:37:35.263

没关系，我想我知道这个问题。这是因为这个 xsd.exe 为这些字段创建了“DefaultValueAttribute”。这会阻止该字段出现在 xml 中。也许一些 xsd-switch 可以做到这一点，我不知道......

# amazon-s3 - Amazon s3 存储桶策略限制访问无效

> ID：15828963
> 
> 赞同：1
> 
> 时间：2013-04-05T08:13:13.297
> 
> 标签：amazon-s3

我想限制亚马逊 s3 中的所有公共访问文件，除了某些站点（使用引用者），
目前我有这个存储桶策略

```
{
"Id":"foosite-test",
"Statement":[
  {
     "Sid": "Allow from foosite admin",
     "Action": "s3:GetObject",
     "Effect": "Allow",
     "Resource": "arn:aws:s3:::mybucket/*",
     "Principal": {
        "AWS":["*"]
     },
     "Condition": {
        "StringLike": {
               "aws:Referer": [
              "http://www.foosite.co.uk/admin/*",
              "http://www.foosite.co.au/admin/*"
           ]
        }
     }
  }
  ]
} 
```

但似乎这个政策没有效果。我可以复制粘贴 s3 对象 url 并且仍然可以访问该文件。这个政策有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:34:49.400

You need to add policy for deny also, that is to block all the other referer. I had answered similar question, but did not included the deny part in that sample policy. You can find my updated answer here: [Amazon S3 objects: is it possible to restrict public read policy to some IP adresses only ?](https://stackoverflow.com/questions/14622411/amazon-s3-objects-is-it-possible-to-restrict-public-read-policy-to-some-ip-adre/14622757#14622757)

In your case you have to use referer instead of IP.

# memory - GLSL 编译错误“内存耗尽”

> ID：15828966
> 
> 赞同：1
> 
> 时间：2013-04-05T08:13:40.807
> 
> 标签：memory, compiler-errors, glsl, shader

我正在尝试使用复杂的 if-else 决策树来实现 GLSL 片段着色器。不幸的是，着色器编译器很早就因“语法错误 - 内存耗尽”错误而失败。GLSL 中的代码大小或决策树深度是否有任何限制？任何建议如何克服这个问题？

```
bool block1(float p[16], float cb, float c_b) { 
  if(p[6] > cb)
   if(p[7] > cb)
    if(p[8] > cb)
     return true;
    else
     if(p[15] > cb)
      return true;
     else
      return false;
   else if(p[7] < c_b)
    if(p[14] > cb)
     if(p[15] > cb)
      return true;
     else
      return false;
    else if(p[14] < c_b)
     if(p[8] < c_b)
      if(p[9] < c_b)
       if(p[10] < c_b)
        if(p[11] < c_b)
         if(p[12] < c_b)
          if(p[13] < c_b)
           if(p[15] < c_b)
            return true;
           else
            return false;   // ';' : syntax error memory exhausted
          else
           return false;
         else
          return false;
        else
         return false;
       else
        return false;
      else
       return false;
     else
      return false;
    else
     return false;
   else
    if(p[14] > cb)
     if(p[15] > cb)
      return true;
     else
      return false;
    else
     return false;
  else if(p[6] < c_b)
   if(p[15] > cb)
    if(p[13] > cb)
     if(p[14] > cb)
      return true;
     else
      return false;
    else if(p[13] < c_b)
     if(p[7] < c_b)
      if(p[8] < c_b)
       if(p[9] < c_b)
        if(p[10] < c_b)
         if(p[11] < c_b)
          if(p[12] < c_b)
           if(p[14] < c_b)
            return true;
           else
            return false;
          else
           return false;
         else
          return false;
        else
         return false;
       else
        return false;
      else
       return false;
     else
      return false;
    else
     return false;
   else
    if(p[7] < c_b)
     if(p[8] < c_b)
      if(p[9] < c_b)
       if(p[10] < c_b)
        if(p[11] < c_b)
         if(p[12] < c_b)
          if(p[13] < c_b)
           if(p[14] < c_b)
            return true;
           else
            return false;
          else
           return false;
         else
          return false;
        else
         return false;
       else
        return false;
      else
       return false;
     else
      return false;
    else
     return false;
  else
   if(p[13] > cb)
    if(p[14] > cb)
     if(p[15] > cb)
      return true;
     else
      return false;
    else
     return false;
   else if(p[13] < c_b)
    if(p[7] < c_b)
     if(p[8] < c_b)
      if(p[9] < c_b)
       if(p[10] < c_b)
        if(p[11] < c_b)
         if(p[12] < c_b)
          if(p[14] < c_b)
           if(p[15] < c_b)
            return true;
           else
            return false;
          else
           return false;
         else
          return false;
        else
         return false;
       else
        return false;
      else
       return false;
     else
      return false;
    else
     return false;
   else
    return false;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T08:24:20.597

我将在这里冒险，因为我对着色器语言一无所知。

## 1.使用逻辑组合（和，或）

但是我知道一般逻辑和许多编程语言。像这样的构造的可能性很大：

```
if(p[8] < c_b)
 if(p[9] < c_b)
  if(p[10] < c_b)
   if(p[11] < c_b)
    if(p[12] < c_b)
     if(p[13] < c_b)
      if(p[15] < c_b)
       return true;
      else
       return false;   // ';' : syntax error memory exhausted
     else
      return false;
    else
     return false;
   else
    return false;
  else
   return false;
 else
  return false;
else
 return false; 
```

可以简单地等效为以下（单个）布尔表达式：

```
return (p[8] < c_b)
    && (p[9] < c_b)
    && (p[10] < c_b)
    && (p[11] < c_b)
    && (p[12] < c_b)
    && (p[13] < c_b)
    && (p[15] < c_b); 
```

您可能必须使用`and`而不是`&&`依赖于特定语言的确切语法。

## 2.消除冗余

我注意到至少有两个“子树”是完全相同的。更具体地说，例如第 57 行（为方便起见，此处压缩了格式）：

```
 if(p[13] < c_b) if(p[7] < c_b) if(p[8] < c_b) if(p[9] < c_b) if(p[10] < c_b) if(p[11] < c_b) if(p[12] < c_b) if(p[14] < c_b)
        return true;
    else return false; else return false; else return false; else return false; else return false; else return false; else return false; else return false; 
```

与第 83 行完全相同

```
 if(p[7] < c_b) if(p[8] < c_b) if(p[9] < c_b) if(p[10] < c_b) if(p[11] < c_b) if(p[12] < c_b) if(p[13] < c_b) if(p[14] < c_b)
       return true;
   else return false; else return false; else return false; else return false; else return false; else return false; else return false; else 
```

只是随着`(p[13] < c_b)`条件接近尾声。您很可能可以合并发生这种情况的分支。

**我建议不要手动执行此（艰苦的）过程，而是制作一个真值表（只需映射所有可能的输入）并推导出一个布尔表达式以从中生成结果值。**

# mysql - 使用庞大的数据库和哈希索引优化 php/mysql 翻译查找

> ID：15828969
> 
> 赞同：0
> 
> 时间：2013-04-05T08:13:48.523
> 
> 标签：mysql, hash, translation

我目前正在使用 utf8 mysql 数据库。它检查翻译是否已经在数据库中，如果没有，它会进行翻译并将其存储在数据库中。

```
SELECT * FROM `translations` WHERE `input_text`=? AND `input_lang`=? AND `output_lang`=?; 
```

（另一个字段是“output_text”。）对于基本数据库，它会首先逐字母比较输入文本与“input_text”“TEXT”字段。只要字符匹配，它就会继续比较它们。如果他们停止匹配，它将进入下一行。

我不知道数据库在低级别是如何工作的，但我假设对于基本数据库，它会在确定输入文本不在数据库中之前从数据库的每一行中搜索至少一个字符。

理想情况下，输入文本将被转换为哈希码（例如使用 sha1），并且每个“input_text”也将是一个哈希。然后，如果数据库被正确排序，它可以快速找到与哈希匹配的所有行，然后检查实际文本。如果没有匹配的哈希，那么即使没有手动检查每一行，它也不会返回任何结果。

是否有一种 mysql 存储引擎可以做这样的事情，或者是否有一些额外的 php 可以优化事情？应该将“input_text”设置为某种“索引”吗？（主要/唯一/索引/全文）

是否有另一种与 php 兼容且比 mysql 优越得多的数据库类型？

编辑：这讨论了 MySQL 的 B-Tree vs Hash 索引：

[http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)

哈希索引的任何限制对我来说都不是问题。它还说

它们仅用于使用 = 或 <=> 运算符的相等比较（但速度*非常*快）

[“非常”被他们用斜体表示]

新问题：

如何将“input_text”TEXT 设置为哈希索引？顺便说一句，多行包含相同的“input_text”......对于哈希索引可以吗？

[http://dev.mysql.com/doc/refman/5.5/en/column-indexes.html](http://dev.mysql.com/doc/refman/5.5/en/column-indexes.html)

说“MEMORY 存储引擎默认使用 HASH 索引”——这是否意味着我必须更改存储引擎并将列索引设置为 INDEX？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:34:01.487

An index will speed up the lookups a lot.

By default indexes in InnoDB and MyISAM use search trees (B-trees). There is a limitation on the length of the row the index so you will have to index only the 1-st ~700 bytes of text.

`CREATE INDEX txt_lookup ON translations (input_lang, output_lang, input_text(255));`

This will create an index on `input_lang`, `output_lang` and the 1-st 255 characters of `input_text`.

When you select with your example query MySQL will use the index to find the rows with the appropriate languages and the same starting 255 characters quickly and then it will do the slow string compare with the full length of the column on the small set of rows which it got from the index.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T08:28:51.000

一个普通的`INDEX`子句就足够了（确保索引所有字段，它在磁盘上会很大，但速度更快）。`FULLTEXT`使用`LIKE`子句时索引很好;-)

无论如何，对于这种查找，您应该使用 NoSQL 存储，例如`Redis`，它速度极快，并且具有内存存储，并且还通过快照进行数据持久性。

这里有一个 php 扩展：[https ://github.com/nicolasff/phpredis](https://github.com/nicolasff/phpredis)

您将拥有以下形式的 redis 键：`YOUR_PROJECT:INPUT_LANG:WORD:OUTPUT_LANG`为了更好地管理数据，只需将每个值替换为您的值即可；）

# windows-phone-8 - 在手机上存储 WP 状态

> ID：15828972
> 
> 赞同：1
> 
> 时间：2013-04-05T08:13:53.857
> 
> 标签：windows-phone-8, isolatedstorage, serializable

我想将应用程序的状态存储在手机上，以便在应用程序再次启动时重新创建它。

问题是我需要存储`IDictionary<string, object>`包括所有类型的东西。有什么好的方法可以做到这一点吗？

我不想像现在这样手动为每种类型都做。我正在将每种类型转换为 json，并将其保存为字符串。我目前需要手机上的文件系统，例如

```
MyApp \\ JObjects \\ asd.json
MyApp \\ Dictionary_string_int \\ asd2.json 
```

...等等，所以我可以稍后获取原始对象的类型并可以调用

`Deserialze< IDictionary<string, int> >(..)`例如

这是非常痛苦的。每次我想存储一个新类型时，我都必须先实现一个方法并对其进行测试。像这样的物体`IDicionary< string, IDicitionary<string, object>>`特别痛苦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:07:33.430

您可以使用独立存储将反序列化的 XML 保存并读取到单独的文件中。查看本教程以了解如何使用它：

[http://www.geekchamp.com/tips/all-about-wp7-isolated-storage---read-and-save-xml-files](http://www.geekchamp.com/tips/all-about-wp7-isolated-storage---read-and-save-xml-files)

该文章适用于 WP7，但也适用于 WP8。我认为它现在在 WP8 中被称为本地文件夹，但代码应该是一样的。

# java - 如何使用 Parasoft 从 java 文件中生成测试文件

> ID：15828974
> 
> 赞同：0
> 
> 时间：2013-04-05T08:13:54.487
> 
> 标签：java, junit, parasoft, jtest

我是 Parasoft 的新手。我使用 Parasoft 作为 Eclipse 的插件。今天我第一次在一个java文件上使用它，右键单击**Parasoft** -> **Test Using** -> **User-Defined** -> **my_configuration。**

如何使用 Parasoft 为 java 文件生成新的测试文件？如何修改已经为 java 文件创建的测试文件？我在 java 文件中进行了一些更改，我应该修改测试文件。我认为应该有一个选择，但我没有建立在网络上。Parasoft/Test Using/Builtin 中有什么东西？

如果我转到“Parasoft -> 测试使用 -> 内置 -> 生成并运行单元测试”，我可以为我的 java 文件生成一个新的测试文件。但是我想将测试用例自动添加到我现有的测试文件中。在我的测试文件头中，我有： * 由 Jtest 于 2012 年 10 月 2 日上午 9:07:30 创建。* Jtest 于 2012 年 10 月 25 日下午 2:35:22 更新，添加了 12 个测试用例。

我需要像上面第二行一样更新这个文件“*由 Jtest 于 2012 年 10 月 25 日下午 2:35:22 更新，添加了 12 个测试用例。”。

谢谢，

多里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:32:38.267

The automation for test class creation is configured in `Test Configuraion` tab `Generaiton`.

More you will find in the help, that is very outstanding and all required information are there. The lesson 11 should answer to all of your question.

# php - 将 PHP 会话变量传递到 HTML 表单中

> ID：15828975
> 
> 赞同：2
> 
> 时间：2013-04-05T08:13:56.033
> 
> 标签：php, forms, session-variables

我有从另一个 php 页面上的表单发布的会话变量，我可以使用以下命令来回显它们：

```
<?php $_SESSION['newsletterSignup'] = $_POST['newsletterSignup'];
echo "Email = ". $_SESSION['newsletterSignup'];
?> 
```

但我似乎无法将这些插入 HTML 表单字段：

```
<input type="text" name="email" id="email" size="36" "value="<?php echo $_SESSION['newsletterSignup'];?>" class="text-input" onBlur="emailval()" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T08:15:53.740

这应该工作......价值之前的报价可能搞砸了

```
<input type="text" name="email" id="email" size="36" value="<?php echo $_SESSION['newsletterSignup'];?>" class="text-input" onBlur="emailval()" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:16:09.863

你用

```
<input type="text" name="email" id="email" size="36" "value="<?php echo $_SESSION['newsletterSignup'];?>" class="text-input" onBlur="emailval()" /> 
```

一个`"`对许多。这是修复

```
<input type="text" name="email" id="email" size="36" value="<?php echo $_SESSION['newsletterSignup'];?>" class="text-input" onBlur="emailval()" /> 
```

另外，您是否使用过 session_start(); ?

# c# - 在 .NET 应用程序中查找非托管内存泄漏

> ID：15828979
> 
> 赞同：2
> 
> 时间：2013-04-05T08:14:08.690
> 
> 标签：c#, .net

我创建了一个读取文件并获取文件元数据的应用程序。当我启动应用程序时，私有工作集大约为 8MB（在任务管理器中查看）。当我扫描文件时，内存高达 150MB 并保持在那里。如果我使用相同的应用程序实例添加额外的文件，内存就会堆积起来。为了理解这种行为，我使用了一个内存分析器（Red gates），它向我展示了以下统计数据：-

在 150MB 的私有工作者集内存中

*   非托管内存：94MB
*   其他资源（字符串、数组等）：30MB

这让我感到困惑，因为我没有使用任何非托管代码或任何 Pinvoke 调用。我也试过 GC.Collect() 没有成功。

有人可以指导我如何减少我的应用程序的非托管内存使用量以及可能的原因。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-05T10:26:43.977

ANTS 的最新更新向您展示了应用程序的非托管内存使用了哪些 .NET 类。在设置屏幕中启用非托管内存分析后，导航到类列表并按新的“非托管大小”列排序。

尽管您可能没有故意使用非托管内存，但许多 .NET Framework 库确实使用本机资源 - 例如成像库。

# actionscript-3 - 匿名函数中变量的奇怪行为？

> ID：15828981
> 
> 赞同：3
> 
> 时间：2013-04-05T08:14:10.010
> 
> 标签：actionscript-3, flash, function, variables, anonymous-function

谁能解释为什么下面代码的跟踪结果是“5,5,5,5,5”而不是“1,2,3,4,5”以及如何让匿名函数引用收集元素数组？（在这个例子中，“var item”应该是指 list[0],[1],[2],[3],[4]）。

```
var list:Array=[1,2,3,4,5];
var funcs:Array=[];

for each(var item:int in list){
    funcs.push( function(){
       trace(item);
    });
}

for each(var func:Function in funcs){
    func();
}

trace result: 5,5,5,5,5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T10:45:55.170

您的代码的问题是您创建了一个稍后访问的闭包。对于您想要做的事情，您需要创建多个可以稍后访问的闭包。

```
var list:Array=[1,2,3,4,5];
var funcs:Array=[];

var closure_factory = function(index) {
    return function() { trace(index); };
};

for each(var item:int in list){
   funcs.push(closure_factory(item));
}

for each(var func:Function in funcs){
    func();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T09:17:37.993

这是两件事的结果：

1.  AS3 中的函数级范围：内部变量声明`for each(var item:int in list)`相当于`var item:int`在函数开头声明 a （在您的示例中，在代码开头）。

2.  匿名函数是闭包，它不仅包含您指定的代码，`trace(item)`还包含该代码运行的环境。具体而言，您的代码创建的每个匿名函数都知道它应该使用`item`变量（在函数范围内声明）用于打印（通过`trace()`）。

因此，发生的情况是，它`item`被分配了 的所有元素`list`，然后保留最后一个值（即 5）。它存在（不会超出范围），并且当这些匿名函数触发时，它们中的每一个看起来都相同`item`并打印相同的值。

# iphone - 从 fetchedResultsController fetchedObjects 中移除一个对象

> ID：15828983
> 
> 赞同：2
> 
> 时间：2013-04-05T08:14:18.200
> 
> 标签：iphone, ios, objective-c, ipad, core-data

是否可以从 fetchedResultsController fetchedObjects 中删除对象？

例如我有以下代码：

```
 NSPredicate *predicate = [NSPredicate predicateWithFormat:@"pack.packName IN %@", allowedPackNames];
            for (int i = 0; i < [tempFetchResults.fetchedObjects count]; i++){
                Author *author = [tempFetchResults.fetchedObjects objectAtIndex:i];
                NSSet *filteredQuotes = [author.quotes filteredSetUsingPredicate:predicate];
                if ([filteredQuotes count] > 0){
                  author.quotes = filteredQuotes;
                } else {
                  //remove this author from the fetchedObjects array 
                }
            } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T08:21:54.143

要从数据存储中删除对象：

```
[self.managedObjectContext deleteObject:object]; 
[self.managedObjectContext save:nil]; 
[self.fetchedResultsController self.fetchedResultsController.fetchRequest]; 
[tableView reloadData]; 
```

要从获取的结果控制器数组中删除对象，您需要更改谓词。确保禁用缓存（或更改缓存名称）以使其正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T08:27:20.460

我认为您可以定义一个“排除”属性或类似整数类型的属性，并将该属性合并到您的获取请求谓词中。现在，当您将报价标记为已排除时，获取的结果控制器将为您完成所有繁重的工作，而无需重新获取所有内容。

更新#1

在这里解决更大的问题，我认为在获取的结果控制器谓词中使用子查询是更好的主意。

尝试使用：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SUBQUERY(quotes, $x, $x.pack.packName IN %@).@count > 0", allowedPackNames]; 
```

作为获取结果控制器的获取请求的谓词，忘记手动过滤。

基本上，这个子查询应该为您做的就是过滤掉所有引用计数符合您的 packName 标准的作者。我承认我没有测试这个查询。如果您说这对您不起作用，我将自己解决问题并进行测试。

# c# - 为什么这段代码变慢了？

> ID：15828984
> 
> 赞同：4
> 
> 时间：2013-04-05T08:14:24.460
> 
> 标签：c#, xml, database, ms-access, slowdown

我目前正在将多个 Access 数据库转换为 Xml 文件。我以前做过这个，我仍然有以前项目的代码。但是，这段代码不会让我随心所欲地构建 xml，这是我这次需要做的。我正在使用`XDocument`with `for`-loops 来实现这一点，但是在 1000 行数据之后它变得非常慢。

阅读 XDocument 的工作原理告诉我`XElement.Add`实际上复制了整个 xml 代码并在将所有内容粘贴回文件时添加了新元素。如果这是真的，那么这可能就是问题所在。

这是从Access中读写数据到Xml的部分，看看有没有办法保存。转换具有 27 列和 12256 行的数据库需要将近 30 分钟，而只有 500 行的较小数据库大约需要 5 秒。

```
private void ReadWrite(string file)
{
    using (_Connection = new OleDbConnection(string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Mode=12;Data Source={0}", pathAccess)))
    {
        _Connection.Open();
        //Gives me values from the AccessDB: tableName, columnName, colCount, rowCount and listOfTimeStamps.
        GetValues(pathAccess);

        XDocument doc = new XDocument(new XDeclaration("1.0", "utf-8", "true"), new XElement(tableName));
        for (int rowInt = 0; rowInt < rowCount; rowInt++)
        {
            XElement item = new XElement("Item", new XAttribute("Time", listOfTimestamps[rowInt].ToString().Replace(" ", "_")));
            doc.Root.Add(item);

            //colCount"-1" prevents the timestamp from beeing written again.
            for (int colInt = 0; colInt < colCount - 1; colInt++)
            {
                using (OleDbCommand cmnd = new OleDbCommand(string.Format("SELECT {0} FROM {1} Where TimeStamp = #{2}#", columnName[colInt] , tableName, listOfTimestamps[rowInt]), _Connection))
                {
                    XElement value = new XElement(columnName[colInt], cmnd.ExecuteScalar().ToString());
                    item.Add(value);
                }
            }
            //Updates progressbar
            backgroundWorker1.ReportProgress(rowInt);
        }
        backgroundWorker1.ReportProgress(0);
        doc.Save(file);
    }
} 
```

这是我的旧转换器的代码。这段代码几乎不受数据库大小的影响，12 556 数据库只需要一秒钟的时间来转换。有没有办法合并这两者？

```
public void ReadWrite2(string file)
{
    DataSet dataSet = new DataSet();
    using (_Connection = new OleDbConnection(string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Mode=12;Data Source={0}", file)))
    {
        _Connection.Open();

        DataTable schemaTable = _Connection.GetOleDbSchemaTable(OleDbSchemaGuid.Tables, new object[] { null, null, null, "TABLE" });

        foreach (DataRow dataTableRow in schemaTable.Rows)
        {
            string tableName = dataTableRow["Table_Name"].ToString();

            DataTable dataTable = dataSet.Tables.Add(tableName);
            using (OleDbCommand readRows = new OleDbCommand("SELECT * from " + tableName, _Connection))
            {
                OleDbDataAdapter adapter = new OleDbDataAdapter(readRows);
                adapter.Fill(dataTable);
            }
        }
    }
    dataSet.WriteXml(file.Replace(".mdb", ".xml"));
} 
```

**编辑：**为了澄清，应用程序在执行时会变慢。无论数据库有多大，前 500 次都需要 5 秒。

**更新：**好的，所以我现在周末回来了，我在代码中做了一个小的调整，通过在一个循环中填充一个锯齿状数组并将它们写入另一个循环中的值来分离读取和写入。这证明了我的理论是错误的，事实上阅读需要花费很多时间。关于如何在不访问循环内的数据库的情况下用值填充数组的任何想法？

**UPDATE2：**这是切换到`DataReader.Read()`-loop 并立即收集所有数据后的最终结果。

```
public void ReadWrite3(string Save, string Load)
    {
        using (_Connection = new OleDbConnection(string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Mode=12;Data Source={0}", Load)))
        {
            _Connection.Open();
            GetValues(_Connection);

            _Command = new OleDbCommand(String.Format("SELECT {0} FROM {1}", strColumns, tables), _Connection);
            XDocument doc = new XDocument(new XDeclaration("1.0", "utf-8", "true"), new XElement("plmslog", new XAttribute("machineid", root)));
            using (_DataReader = _Command.ExecuteReader())
            {
                for (int rowInt = 0; _DataReader.Read(); rowInt++ )
                {
                    for (int logInt = 0; logInt < colCount; logInt++)
                    {

                        XElement log = new XElement("log");
                        doc.Root.Add(log);

                        elementValues = updateElementValues(rowInt, logInt);

                        for (int valInt = 0; valInt < elements.Length; valInt++)
                        {
                            XElement value = new XElement(elements[valInt], elementValues[valInt]);
                            log.Add(value);
                        }
                    }
                }
            }
            doc.Save(Save);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-08T18:38:18.410

原谅我，但我认为你让你的生活变得比它需要的更复杂。如果您使用一个`OleDbDataReader`对象，您可以打开它并逐行读取 Access 表，而无需将行数据缓存在数组中（因为您已经在 DataReader 中拥有它）。

例如，我有一些示例数据

```
dbID    dbName  dbCreated
----    ------  ---------
bar     barDB   2013-04-08 14:19:27
foo     fooDB   2013-04-05 11:23:02 
```

以下代码贯穿表格...

```
static void Main(string[] args)
{
    OleDbConnection conn = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\Documents and Settings\Administrator\Desktop\Database1.accdb;");
    conn.Open();

    OleDbCommand cmd = new OleDbCommand("SELECT * FROM myTable", conn);
    OleDbDataReader rdr = cmd.ExecuteReader();

    int rowNumber = 0;
    while (rdr.Read())
    {
        rowNumber++;
        Console.WriteLine("Row " + rowNumber.ToString() + ":");
        for (int colIdx = 0; colIdx < rdr.FieldCount; colIdx++)
        {
            string colName = rdr.GetName(colIdx);
            Console.WriteLine("    rdr[\"" + colName + "\"]: " + rdr[colName].ToString());
        }
    }
    rdr.Close();
    conn.Close();

    Console.WriteLine("Done.");
} 
```

...并产生结果...

```
Row 1:
    rdr["dbID"]: foo
    rdr["dbName"]: fooDB
    rdr["dbCreated"]: 2013-04-05 11:23:02
Row 2:
    rdr["dbID"]: bar
    rdr["dbName"]: barDB
    rdr["dbCreated"]: 2013-04-08 14:19:27
Done. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T08:22:35.657

您正在从嵌套循环内部访问数据库（所有行和列）

```
 using (OleDbCommand cmnd = new OleDbCommand(string.Format("SELECT {0} FROM {1} 
```

您最好将数据保存在数组或集合中，然后访问数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T08:24:51.270

简单的数学计算会告诉你原因。（数据量）

27 * 12256 = 330912

27 * 500 = 13500

330912 / 13500 = 24512

所以你的大声明是24512倍！

（浪费时光）

30*60 = 1800

1800 / 5 = 360

所以你的时间是 360 倍大！

您可以看到您的代码似乎没有做坏事。

# html - IE7 的 CSS 宽度：即使在 hack 之后，内联块也不起作用

> ID：15828995
> 
> 赞同：0
> 
> 时间：2013-04-05T08:14:55.723
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我正在尝试在我的网页上显示带有文本的图像列表。但在 IE7 中，它会将每个图像显示在另一个图像下方，而不是在另一个图像旁边。看起来是因为缺乏对 inline-block 的支持。我阅读了一些文章并在我的 CSS 中添加了一些东西，但它仍然无法正常工作。

他是HTML：

```
 <div id="image_example">
            <div class="accept">
                <h4>Acceptable</h4>
                <img width="84" height="150" src="some-image" alt="accept">
            </div>

            <div class="unaccept">
                <h4>Unacceptable</h4>
                <img width="112" height="150" src="some-image"">
            </div>

            <div class="unaccept">
                <h4>Unacceptable</h4>
                <img width="215" height="150" src="some-image">
            </div>

            <divclass="unaccept">
                <h4>Unacceptable</h4>
                <img width="165" height="150" alt="unaccept" src="some-image"">
            </div>

    </div> 
```

我的 CSS 看起来像这样::

```
.unaccept, .accept{
  display: inline-block;
  text-align: center;
  margin: 0 0.75em;
  zoom:1;//Added after reading other posts
  *display:inline; //Added after reading other posts
 } 
```

在阅读了很多关于这个问题的文章/页面后，我添加了最后两行。但它仍然无法正常工作。

我尝试在类接受中添加：*width:173px，但是当图像宽度更大时它会中断，如果我增加所有接受类的宽度宽度（即使图像宽度较小的地方也会增加，所以页面又不好看了）。

有人可以帮我吗？我想要的只是将这些图像以默认宽度并排显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:25:43.607

IE7 仅支持`inline-block`默认内联的元素。

改用`float: left;`它，它可以遵循标准，没有任何 IE 黑客：

```
.image_example { overflow: hidden; }

.unaccept, .accept {
    float: left;
    text-align: center;
    margin: 0 0.75em;
} 
```

演示：http: [//jsfiddle.net/Guffa/xCREN/](http://jsfiddle.net/Guffa/xCREN/)

# php - 在 iis express 上运行 php 站点

> ID：15828998
> 
> 赞同：3
> 
> 时间：2013-04-05T08:15:07.753
> 
> 标签：php, iis-express

我一直在尝试从 iis express 运行一个简单的 hello world php 站点，遵循这个问题[https://stackoverflow.com/a/7086364/744610](https://stackoverflow.com/a/7086364/744610)

但我不断从 iis 收到错误 500，并且在 cmd 中我可以看到有关收藏图标的 404 错误。

来自 500 错误的详细信息

```
Detailed Error Information:
Module     FastCgiModule
Notification       ExecuteRequestHandler
Handler    PHP-FastCGI
Error Code     0x80070002
Requested URL      http://localhost:32701/index.php
Physical Path      c:\myphpsite\index.php
Logon Method       Anonymous
Logon User     Anonymous
Request Tracing Directory      C:\Users\user\Documents\IISExpress\TraceLogFiles\PHPTEST 
```

我仔细检查了物理路径确实是正确的。

命令：

```
Request started: "GET" http://localhost:32701/index.php
Request ended: http://localhost:32701/index.php with HTTP status 500.0
Request started: "GET" http://localhost:32701/favicon.ico
Request ended: http://localhost:32701/favicon.ico with HTTP status 404.0
Request started: "GET" http://localhost:32701/index.php
Request ended: http://localhost:32701/index.php with HTTP status 500.0
Request started: "GET" http://localhost:32701/favicon.ico
Request ended: http://localhost:32701/favicon.ico with HTTP status 404.0 
```

我尝试了几次f5'ing，因此重复了。

我的 index.php

```
<html>
<body>
<?php
echo "Hello world";
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:49:37.283

为什么不简单地将 Web Matrix 与 PHP 一起使用。