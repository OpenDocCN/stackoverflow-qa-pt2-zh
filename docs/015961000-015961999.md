# StackOverflow 问答 15961000-15961999

# nlog - 什么是 nLog 的 log4net 的 %property 版本

> ID：15961002
> 
> 赞同：1
> 
> 时间：2013-04-12T00:11:09.163
> 
> 标签：nlog

使用 log4net 我可以做到

```
log4net.ThreadContext.Properties["custom1"] = "value";
log4net.ThreadContext.Properties["custom2"] = "other value"; 
```

在配置文件中我可以放

```
"|%logger|%message|%newline%property" 
```

它会渲染整个 ThreadContext Dictionary。

我在 nLog 中找到了一个叫做 MDC 的东西，但无论如何都找不到转储 MDC 字典包。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T08:11:14.833

在配置中定义目标时，您必须提供布局。例如：

```
<target xsi:type="Console" name="c" layout="${mdc:item=custom1}" /> 
```

但这只会呈现 custom1 值。无法呈现 MDC 中的所有属性。

# javascript - 有没有办法在应用元素后从元素中删除 fitVids() ？

> ID：15961004
> 
> 赞同：2
> 
> 时间：2013-04-12T00:11:10.833
> 
> 标签：javascript, jquery, video, responsive-design, fitvids

我正在将[FitVids](https://github.com/davatron5000/FitVids.js/blob/master/README.md)用于响应式视频。我这样实例化它：

```
$("#thing-with-videos").fitVids(); 
```

我想`fitVids()`应用于屏幕尺寸低于 480 像素的特定元素，并且我已经实现了这一点。但是，出于显示目的`fitVids()`，如果用户调整浏览器的大小以检查小宽度的显示，我还需要应用，并且我已经完成了类似这样的操作

```
jQuery(window).resize( function(){
    $("#other-thing-with-videos.small_width").fitVids();            
}); 
```

... 工作正常，但是，`fitVids()`似乎应用于引用的 DOM 元素，而不是像我首先想到的引用类，这意味着删除类（对于更宽的屏幕尺寸）不会删除`fitVids()`就像我想的那样。

那么有什么方法可以删除`fitVids()`我在元素上调用的内容吗？

编辑 - 我想知道[unbind](http://api.jquery.com/unbind/)方法是否可以用于此？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T00:40:06.530

以下将删除父 div 的类和任何样式：

```
$('#container').fitVids();
$("#btn").click(function () 
{
    $(".fluid-width-video-wrapper").removeClass("fluid-width-video-wrapper").removeAttr("style");
}); 
```

这几乎消除了 FitVid 效应。

**jsFiddle**：http: [//jsfiddle.net/hescano/m6Jwx/1/](http://jsfiddle.net/hescano/m6Jwx/1/)

**编辑**：我认为这个解决方案效果更好：

```
$.fn.unFitVids = function () {
    var id = $(this).attr("id");
    var $children = $("#" + id + " .fluid-width-video-wrapper").children().clone();
    $("#" + id + " .fluid-width-video-wrapper").remove(); //removes the element
    $("#" + id).append($children); //adds it to the parent
}; 
```

你只需像这样从你的元素中调用它：

```
$("#myDiv").unFitVids(); 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/m6Jwx/2/](http://jsfiddle.net/hescano/m6Jwx/2/)

我能看到的唯一缺点是，因为我从 DOM 中删除了元素，克隆了它们，并将它们放在 div 父级中，如果视频已经在播放，它将停止。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T15:35:40.110

Hanlets 代码是个好主意，但它假设您的选择器中只有 1 个视频。

下面的扩展代码循环遍历所有视频

```
$.fn.unFitVids = function () {
    $.each(this, function(i, el){
        var $wrapper = $(".fluid-width-video-wrapper", el),
            $children = $wrapper.children().clone();
        $wrapper.remove();
        $(el).append($children);
    })
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T11:33:22.880

您可以简单地使用：

```
$(".fluid-width-video-wrapper iframe").unwrap(); 
```

但是“.fluid-width-video-wrapper”在一些延迟后应用（在文档加载之后），所以你可以在一些延迟后触发该功能

```
setTimeout(function () {
  $(".fluid-width-video-wrapper iframe").unwrap()
}, 300); 
```

# django-admin - Django 自定义用户配置文件仅针对超级用户显示

> ID：15961006
> 
> 赞同：2
> 
> 时间：2013-04-12T00:11:39.010
> 
> 标签：django-admin

我在我的用户配置文件中添加了一个自定义的 ManyToMany 字段。如果我以超级用户身份登录，它可以正常工作并显示在管理页面中，否则，它不会显示在管理页面中。

```
#models.py
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    things = models.ManyToManyField(Thing)

    def __unicode__(self):
        return self.user.username

#admin.py
class ProfileInline(admin.StackedInline):
    model = UserProfile
    fk_name = 'user'
    max_num = 1
    filter_horizontal = ('things',)

class CustomUserAdmin(UserAdmin):
    inlines = [ProfileInline,] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T23:24:31.137

这是一个权限问题，适用于您的自定义字段的规则是导致此行为的原因。您应该检查适用于自定义字段的规则。

# backbone-events - 将主干事件绑定到多类选择器

> ID：15961008
> 
> 赞同：10
> 
> 时间：2013-04-12T00:11:48.793
> 
> 标签：backbone-events

我无法将以下事件附加到我的元素。

```
events = {
   "change .date-selector .date-range": "dateRangeSelectionChanged"
} 
```

Backbone.js 是否完全支持这一点？还是我使用了错误的语法？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-02-26T23:23:18.220

您可以用逗号（'，'）分隔选择器

```
events: { "change .date-selector,.date-range": "dateRangeSelectionChanged" } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-11-11T15:06:40.477

要选择多个类，您应该使用：

```
events = { "change .date-selector.date-range": "dateRangeSelectionChanged" } 
```

注意类之间删除的空间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T15:08:32.227

我认为你的问题是你有一个等于运算符，你应该有'：'

```
App.Namespeace.BestViewEver = Backbone.View.extend({
  events : { 
    "change .date-selector .date-range": "dateRangeSelectionChanged"
  }
}); 
```

# string - 根据字符串的当前长度将可变数量的字符附加到字符串

> ID：15961011
> 
> 赞同：0
> 
> 时间：2013-04-12T00:12:00.120
> 
> 标签：string, vba, excel, textbox

我有一个试图输出到文本框的名称、日期和标题列表。我希望输出的格式具有以下“列”：

姓名 | 日期 | 标题 | 索引号

由于这只是一个文本框，我必须使用制表符 [chr(9)] 来保持此表的“列”的间距。但是，由于人们有不同的长度名称，我需要能够输入不同数量的选项卡，以便每个“列”正确排列。（问题仅在名称和日期之间，其他“列”间隔正确）

我尝试了以下代码，它假设（很可能不正确）tab = 7 个空格（我尝试过其他数字）。它尝试将日期与初始日期标题标题对齐，该标题距左边缘 4 个选项卡。作为对我的符号的注释，为了简单起见，我用括号中的 [文本框] 和 [名称] 替换了文本框和名称的复杂路径。以下循环运行：

```
[Text Box].Text = "Name" & Chr(9) & Chr(9) & Chr(9) & Chr(9) & "Date" & Chr(9) & "Reason" & Chr(9) & "Index#" & Chr(10)

[[Begin Loop]]

[Text Box].Text = [Text Box].Text & [Name]

If Len([Name]) >= 0 And Len([Name]) < 7 Then
    [Text Box].Text = [Text Box].Text & Chr(9) & Chr(9) & Chr(9) & Chr(9)
ElseIf Len([Name])>= 7 And Len([Name]) < 14 Then
    [Text Box].Text = [Text Box].Text & Chr(9) & Chr(9) & Chr(9)
ElseIf Len([Name]) >= 14 And Len([Name]) < 21 Then
    [Text Box].Text = [Text Box].Text & Chr(9) & Chr(9)
ElseIf Len([Name]) >= 21 And Len([Name]) < 28 Then
    [Text Box].Text = [Text Box].Text & Chr(9)
End If

NOTE: I found that names that were an exact multiple of 7 were one tab too short, thus I added:

If Len([Name]) = 7 Or Len([Name]) = 14 Or Len([Name]) = 21 Then
    [Text Box].Text = [Text Box].Text & Chr(9)
End If

[[End Loop]] 
```

文本框中的 100 多行中的大多数都正确排列，但似乎一些 len = 14 的名称（不是全部）有一个额外的选项卡。当我删除为 7 的倍数添加额外选项卡的代码时，len = 14 的某些（不是全部）名称的选项卡不够充分。

有人对此有解决方案吗？或者我可以用另一种方式表示这些数据（即不是文本框）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:29:06.450

如果您这样做纯粹是为了视觉对齐并且不需要能够将内容复制+粘贴到 excel 或其他东西（如 CSV 等）中，那么您所做的几乎是正确的。

您将需要进行两次传递，第一次传递确定每个列的最大长度，第二次传递使用第一次传递的信息将其写出以正确对齐。

除非您使用固定宽度的字体，否则它可能会更具挑战性，因为它可能使用宽度而不是字符数来确定标签的移动方式。（对此不是 100% 确定）

**更新**

我尝试制作可以将工作表转换为空格对齐的字符串的东西，它可能会做你想做的事情:)

```
Const TABSIZE = 3

Public Function Main2(Optional ByVal SheetName As String = "Sheet1") As String
Dim Sheet As Worksheet: Set Sheet = ThisWorkbook.Worksheets(SheetName)
Dim Data As Variant
Dim Index, Row, Column As Long
Dim Max() As Integer
Data = Sheet.UsedRange.Value2
ReDim Max(LBound(Data, 2) To UBound(Data, 2))
' configure the Max() array with default values
For Index = LBound(Max) To UBound(Max)
    Max(Index) = 0
Next Index
' populate the Max() array with the maximum width
For Index = LBound(Data, 1) To UBound(Data, 1)
    For Column = LBound(Data, 2) To UBound(Data, 2)
        If Len(Data(Index, Column)) > Max(Column) Then
            Max(Column) = Len(Data(Index, Column))
        End If
    Next Column
Next Index
' add the tabsize to the max (add a gap between columns)
' note: the loop below is not required, has been rolled into the output loop
'For Index = LBound(Max) To UBound(Max)
'    Max(Index) = Max(Index) + TABSIZE
'Next Index
' output the data!
For Row = LBound(Data, 1) To UBound(Data, 1)
    For Column = LBound(Data, 2) To UBound(Data, 2)
        'Result = Result & Pad(Data(Row, Column), Max(Column))
        Result = Result & Pad(Data(Row, Column), Max(Column) + TABSIZE)
    Next Column
    Result = Result & vbCrLf
Next Row
' return it
Main2 = Result
End Function

' pad text to length with spaces
Public Function Pad(ByVal Text As String, ByVal Length As Long) As String
Pad = Text & Space(Length - Len(Text))
End Function 
```

# javascript - 在 HTML 头中获取 js 文件不起作用

> ID：15961012
> 
> 赞同：-1
> 
> 时间：2013-04-12T00:12:15.280
> 
> 标签：javascript, jquery, html

我有一个脚本“test.js”。test.js 的唯一内容是`console.log('hi from the script!')`. 为什么此消息不会显示在我的 chrome 或 firefox 的 js 控制台中？

`network`面板显示正确的`response`脚本。所以文件位置是正确的。

```
<html>
    <head>
        <script type="text/javscript" src="test.js"></script>
    </head>
    <body>
        <script type="text/javascript">
            console.log('hello?');
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T00:13:53.893

您在脚本类型中有错字。它应该是

```
<script type="text/javascript" src="test.js"></script> 
```

# c++ - 使用按钮打开网址

> ID：15961016
> 
> 赞同：0
> 
> 时间：2013-04-12T00:12:56.060
> 
> 标签：c++, objective-c, url, object, uiwebview

所以我已经做了一个应用程序，我有所有的工作功能，但是我用这个命令在角落里做了一个按钮

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://google.com/"]]]; 
```

当我单击按钮时，什么也没有发生。我正在尝试使按钮加载页面:) 请帮助，谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:33:31.927

如果您想在 Safari 中打开网站，请使用此代码

```
NSString *urlstring = [NSString stringWithFormat:@"http://www.google.com/"];
NSURL *url = [NSURL URLWithString:urlstring];
NSLog(@"url = %@",url);
[[UIApplication sharedApplication] openURL:url]; 
```

或者使用这个代码，如果你想在 UIWebview 中打开一个网站

```
 NSString *url=@"http://www.google.com";
 NSURL *nsurl=[NSURL URLWithString:url];
 NSLog(@"url = %@",nsurl);
 NSURLRequest *nsrequest=[NSURLRequest requestWithURL:nsurl];
 [webview loadRequest:nsrequest]; 
```

此外，请确保您已正确连接您的插座。

# google-drive-api - 将现有云端硬盘文件复制到 appdata 文件夹中

> ID：15961017
> 
> 赞同：5
> 
> 时间：2013-04-12T00:12:58.220
> 
> 标签：google-drive-api

我正在尝试使用 Drive SDK 中的新[应用程序数据](https://developers.google.com/drive/appdata)文件夹，但我希望创建用户选择的模板文件的副本，而不是创建示例代码所示的新文件。我的模板文件是 Google 可编辑的电子表格，保存在特定的云端硬盘帐户中，全世界都可读，它们的 ID 已在我的应用程序中配置。

[我首先通过在复制请求](https://developers.google.com/drive/v2/reference/files/copy)`appdata`的正文中指定为父 ID来尝试复制，如下所示

```
{
  "title": "New file",
  "parents": 
  [
    {
      "id": "appdata"
    }
  ]
} 
```

这在文本中产生了 403 错误

> appdata 文件夹中只允许包含内容存储在云端硬盘中的文件夹或文件

所以我尝试`root`在数组中添加为第二个父`parents`级，如下

```
{
  "title": "New file",
  "parents": 
  [
    {
      "id": "appdata"
    },
    {
      "id": "root"
    }
  ]
} 
```

这再次失败并出现 403，但错误略有不同

> appdata 内容不支持的方法

我还尝试`parents`在创建后更新新文件的属性，并将新值插入到新创建文件的父实体中，这两者都会产生相同的“不支持方法”错误。

所以我的问题是，是否可以在用户的​​ appdata 文件夹中创建 Drive 中现有字段的副本？这始终失败的事实表明，我可能不得不使用用户的正常存储空间，但如果可能的话，我想使用 appdata 文件夹将我的应用程序的内容与他们的一般驱动器文件分开。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-16T01:15:47.137

> 实际上，不幸的是，您目前无法在 appdata 文件夹中放置实时文件。这是我们正在考虑添加的内容，但在大多数情况下它没有意义，因为 appdata 文件夹的内容仅限于单个用户。

Cheryl Simon 谈 Google 云端硬盘开发者 - [https://plus.google.com/communities/107264319205603895037](https://plus.google.com/communities/107264319205603895037)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T09:33:16.087

我遇到了同样的问题。

因此，如果我在 appdata 文件夹中创建本机文档，我会得到：“appdata 文件夹中只允许包含存储在云端硬盘中的内容的文件夹或文件”

但是，我可以在那里放置一个非本地文档（例如 pdf）并访问它（例如查看它）。

我所追求的是能够对本地文档执行相同的程序。例如，“appdata 文件夹中只允许包含存储在云端硬盘中的内容的文件夹或文件”响应我得到的响应似乎更适用于快捷方式文件。我想知道为本地文档返回它是否是一个错误？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T22:52:00.607

好的谢谢。

回到最初的问题：是否可以将文件移动到 appdata 文件夹？例如，通过删除所有父级，然后将 appdata 添加为父级。

我收到以下响应：“appdata 内容不支持方法”

或者文件只能通过插入进入那里？

# php - $_SESSION 未正确转发变量

> ID：15961026
> 
> 赞同：2
> 
> 时间：2013-04-12T00:14:02.177
> 
> 标签：php, sql, session, variables

用户查询数据库和某些表字段必须在其他页面中存储和使用。

在第 1 页中，查询发生并且处方字段保存在变量 $_SESSION 中：

```
$query = " 
    SELECT 
        id, 
        full_name,
        address,
        email,
        telephone,
        prescription
    FROM patients 
    WHERE id 
    LIKE '%" . $patient_id . "%'";

    $PRESCRIPTION = 'prescription';

    $_SESSION['memory1'] = $PRESCRIPTION; 
```

在第 2 页变量需要重用的地方，我正在使用这个：`<?php echo "Our patient's prescription is: ".$_SESSION['memory1'];?></b>`

问题是在第一页我使用了这样的变量：`<?php echo htmlentities ($row[$PRESCRIPTION], ENT_QUOTES, 'UTF-8'); ?>`它正确地输出了实际的字段结果。但在第 2 页上，它是“字面上”显示字符处方而不是存储的内容。它在第 2 页的“处方”已经失去了它的意义。

我正在编辑问题以确认我`<?php echo "Our patient's prescription is: ".$_SESSION['memory1'];?>`在第 2 页中使用了此代码。因此指的是存储的变量。

关于回复说我在第 1 页太字面的帖子，那么当使用 $PRESCRIPTION 变量时，它为什么在第一页回显正常？如果文字被存储。在第 1 页我还会得到第 2 页的概率，它返回单词处方。但是不，在第 1 页中，我得到了我需要的实际表字段数据。在第 2 页中，我得到了处方词。

最后一件事，我没有使用 session_start，而是在每个文档的开头使用 ($_SESSION['user'])，因为我使用了 require("common.php"); 指定 conn 等

希望这进一步澄清。

谢谢，等待您的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T09:01:23.620

不确定，但我认为你想要的是：

第 1 页：

```
//Query goes here...

session_start();
$_SESSION['memory1'] = $row[$PRESCRIPTION];  //Store original value in session
echo htmlentities($row[$PRESCRIPTION], ENT_QUOTES, 'UTF-8');  //Display value 
```

第2页：

```
session_start();
echo htmlentities($_SESSION['memory1'], ENT_QUOTES, 'UTF-8');  //Display value 
```

重要的是您不要在会话中存储字符串的编码版本，您只需在第二页上显示该值时重新编码该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:16:11.110

始终确保您有

```
session_start(); 
```

在每个文件的顶部，以确保您维护会话。

# ruby-on-rails - 从循环中重构关联

> ID：15961029
> 
> 赞同：0
> 
> 时间：2013-04-12T00:14:35.303
> 
> 标签：ruby-on-rails, refactoring, associations

刚开始使用rails 并试图重构我的一些观点，我有点不知道去哪里寻找答案，因为我在每个循环中，我需要访问|item|。

我正在从 CSV 文件中提取作者，使用创建者表和 HABTM 与书籍的关联。原因有时作者既是插画家又是编辑，我不想为书籍作者的每个特定角色提供 3 个（甚至更多）表格。

图书模型（带 CSV 导入）

```
 writer = Creator.where(name: row['writer']).first_or_create!(row.to_hash.slice(:writer))
    book.creators << writer
    book.writer_id = writer.id 
```

图书视图

```
 books.each do |book|
     link_to book.creators.detect{|w| w.id == book.writer_id}.name, creator_path(id: book.writer_id) 
```

然后我为艺术家、编辑等复制它......

我首先在控制器中尝试了@books，但我需要知道循环中的哪本书。我不确定下一步要了解，所以我可以删除丑陋的东西。我已经看到了很多我想阅读的东西，但不确定哪一个适合这种需要。帮手？命名范围？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:35:26.190

这里的部分复杂性是通过使用`writer_id`etc. 而不是实际关联这一事实引入的，这可能会使事情变得更容易一些。但是，如果您要坚持当前的结构，那么您所拥有的可能与您想要的非常接近，尽管您可能希望将该`link_to`行更改为更简单：

```
link_to book.creators.find(book.writer_id).name, creator_path(book.writer_id) 
```

另一种选择是在您的模型中为作家和插画家设置自定义 getter 方法，这将使您更加简化事情：

```
# book.rb
def writer
  creators.find(writer_id) # This should allow you to still eager load it if you want
end

def illustrator
  creators.find(illustrator_id)
end

# in your view
link_to book.writer.name, creator_path(book.writer_id) 
```

（您也可以编写 setter 方法，尽管这会稍微复杂一些，并且可能不值得，除非您打算更改创建者。）

# android - 如何更新调用 Asynctask 的列表视图以调用 Web 服务

> ID：15961032
> 
> 赞同：0
> 
> 时间：2013-04-12T00:14:44.990
> 
> 标签：android

我知道有这个问题，但是，我不知道它对我有用，我认为它可能有点不同，我有一个网络服务来获取数据，我的活动中有一个 listView。我想更新这个列表视图。

我一直在尝试使用处理程序，但是，它不起作用，尽管，我很欣赏其他选择。我真的不知道，我是否应该从我的 AsyncTask 类中直接访问该列表，或者如何更新。

更新：所以，我没有对我的 AsyncTask 使用嵌套类，这样可能会更容易，但我不想这样做，因为我在代码的更多地方使用了这个类。我想知道如何访问活动并用我从 WS 获得的数据加载我的 ListView。我想使用 Handler 来做这件事是个坏主意。

我的活动课程是：

```
public class GameOnlineListActivity extends Activity {

private static final String TAG = "GameOnlineListActivity";

// List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

// List with datas
String users[];

// Handler on the main (UI) thread that will receive messages from the 
// second thread and update the progress.
final Handler handler = new Handler() {
    public void handleMessage(Message msg) {
        // Get the current value of the variable total from the message data
        // and update the progress bar.         
        users = msg.getData().getStringArray("users");
        adapter.notifyDataSetChanged();
        }

};

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_game_online_list);
    users = new String[0];
    callWebService();
    // Listview Data

    lv = (ListView) findViewById(R.id.list_view);
    inputSearch = (EditText) findViewById(R.id.inputSearch);

    // Adding items to listview

    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, users);
    lv.setAdapter(adapter); 
```

我的webservice代码有点长，因为我用同一个类来调用几个webservice，，

```
 public class WebServiceTask extends AsyncTask<String, Integer, String> {

private static final String TAG = "WebServiceTask";

// connection timeout, in milliseconds (waiting to connect)
private static final int CONN_TIMEOUT = 3000;

// socket timeout, in milliseconds (waiting for data)
private static final int SOCKET_TIMEOUT = 5000;

private int taskType;
private Context context = null;
private Activity activity = null;
private Handler handler;

private String processMessage = "Processing...";

private List<NameValuePair> params = new ArrayList<NameValuePair>();
private ProgressDialog pDlg = null;

public WebServiceTask(int taskType, Activity context, String processMessage, Handler h)     {

    this.taskType = taskType;
    this.activity = context;
    this.context = context;
    this.processMessage = processMessage;
    this.handler = h;

.....

private void handleResponse(String response) {
    try {

   ......

        case ConstantsTrivial.GET_USERS:

            respJSONArray = new JSONArray(response);
            listUsers = new ArrayList<Usuario>();

            for(int i=0; i<respJSONArray.length(); i++)
            {               
                JSONObject obj = respJSONArray.getJSONObject(i);                
                id = obj.getInt(ConstantsTrivial.USER_ID);
                userName = obj.getString(ConstantsTrivial.USER_NAME);
                keyId = obj.getString(ConstantsTrivial.USER_KEY_ID);
                usu = new Usuario(id, userName, keyId);

                listUsers.add(usu);

                String[] names = new String[listUsers.size()];
                int z = 0;                  
                for (Usuario u : listUsers){
                    names[z] = u.getUserName(); 
                    z++;
                }

                Message msg = handler.obtainMessage();
                Bundle b = new Bundle();
                b.putStringArray("users", names);            
                msg.setData(b);
                handler.sendMessage(msg);

            }
            Log.d(TAG,"Lista recuperada de Usuarios por webservice:" + listUsers);
            break;
        }

   } catch (Exception e) {
       Log.e(TAG, e.getLocalizedMessage(), e);
   }

 }

@Override
protected void onPostExecute(String response) {

    handleResponse(response);

    //pDlg.dismiss();

} 
```

我有一个解决方案，但我真的不喜欢它，我不想那样做......它真的很乱......这个代码真的依赖于那个活动，我也在寻找一些东西非常依赖，因为正如我所说，WebServicesTask 是一个可以从任何地方调用的类。:(

```
 case ConstantsTrivial.GET_USERS:

            respJSONArray = new JSONArray(response);
            listUsers = new ArrayList<Usuario>();
            String[] names = null;

            for(int i=0; i<respJSONArray.length(); i++)
            {               
                JSONObject obj = respJSONArray.getJSONObject(i);                
                id = obj.getInt(ConstantsTrivial.USER_ID);
                userName = obj.getString(ConstantsTrivial.USER_NAME);
                keyId = obj.getString(ConstantsTrivial.USER_KEY_ID);
                usu = new Usuario(id, userName, keyId);

                listUsers.add(usu);

                names = new String[listUsers.size()];
                int z = 0;                  
                for (Usuario u : listUsers){
                    names[z] = u.getUserName(); 
                    z++;
                }

            }
            Log.d(TAG,"Lista recuperada de Usuarios por webservice:" + listUsers);
            //NEW CODE, UPDATE!!!!
            ((GameOnlineListActivity)activity).adapter = new ArrayAdapter<String>(activity, R.layout.list_item, R.id.product_name, names);               
            ((GameOnlineListActivity)activity).lv.setAdapter(((GameOnlineListActivity)activity).adapter);
            ((GameOnlineListActivity)activity).adapter.notifyDataSetChanged();

            break;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:38:30.727

只需谷歌搜索“android listadapter asynctask”。你会发现很多例子，比如[这个](https://stackoverflow.com/questions/10335718/using-asynctask-to-display-data-in-listview)与你的任务非常相似的例子。

# c++ - 阻止程序打开您的程序

> ID：15961036
> 
> 赞同：1
> 
> 时间：2013-04-12T00:14:57.087
> 
> 标签：c++, vb.net, c#-4.0, wpf-4.0

好吧，假设我们不希望 hexworkshop 或 hxd 打开我制作的可执行文件。我该怎么做呢？甚至可能吗？基本上我正在寻找的是防止其他程序能够打开我的程序，而无需当时打开我的程序。

注意：我确实知道如何杀死进程，但这仅在程序当前打开时才有效。我想要的是防止程序即使在程序没有运行时也能够打开/读取 .exe。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T00:17:02.550

除非 Windows 本身阻止您这样做，否则根本不可能阻止 Windows 应用程序打开任何类型的文件。例如通过文件权限等。这几乎是无用的。即，如果您可以执行应用程序，您可以打开并阅读它，因为您需要能够执行此操作才能运行它。基本上你的程序是一个文件，操作系统就是这样对待它的。

* * *

由于您的目标是防止盗版或窃取您的软件，我听说的一种选择是将常规程序有效性检查放入代码中。

大多数黑客只会规避早期检查以使其运行，但是如果您的检查分散在整个代码中，那么黑客就很难规避这些检查。

另一种选择是使用加密狗。据我了解，您的程序在运行时由软件或加密狗加密和解密。但是，在某些时候它在内存中，因此内存转储将获取软件。

你能做的最好的事情就是让你的代码变得非常困难。但这并非不可能。

不能轻易被盗的软件的终极版是不能在您的 PC 上运行的软件。例如基于网络的服务。

顺便说一句，您在评论中描述的自毁或擦除 HDD 的软件在大多数国家可能是非法的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:38:04.597

应该可以通过在 Windows 中配置审计进程跟踪来确定应用程序上次运行的时间。以下链接可能会帮助您入门：

> [审计过程跟踪](http://technet.microsoft.com/en-us/library/cc775520%28WS.10%29.aspx)
> 
> [如何跟踪我的机器上来来去去的程序？](http://ask-leo.com/how_can_i_track_what_programs_come_and_go_on_my_machine.html)

进程跟踪将在 Windows 事件日志中创建条目，然后您可以使用 C++、C# 和/或 VB.Net 访问这些条目。

**通过这种方式，您可以轮询以查看程序是否正在运行（与您的程序冲突）并简单地退出您的应用程序。**

**编辑：**

> 注意：我确实知道如何杀死进程，但这仅在程序当前打开时才有效。我想要的是防止程序能够打开/读取.exe，即使程序没有运行

您将需要使用诸如[`Salamander protector`](http://www.remotesoft.com/salamander/protector.html)- .NET 保护器之类的工具，这是一种为您的 .NET 代码提供真正保护的技术。与通过符号重命名使反编译更加困难的混淆器相比，RemoteSofts 保护器完全停止 MSIL 反汇编和反编译。使用此工具，您可以放心，没有人能够窃取您的源代码。有了这个工具，你再也不用担心微软.NET平台的一个令人头疼的问题——反编译。

# visual-studio-2010 - 使用 VS2010 Professional 从 TFS 在线删除项目（TFSDeleteProject 不在我的电脑上！）

> ID：15961041
> 
> 赞同：2
> 
> 时间：2013-04-12T00:15:57.343
> 
> 标签：visual-studio-2010, tfs, project

我有 Visual Studio 2010 Professional，并且一直在使用 visualstudio.com 上的 TFS 服务。我已经阅读[了这个问题，它的答案](https://stackoverflow.com/questions/13635889/delete-team-project-from-free-team-foundation-service)以及网络上的其他内容。但是，TFSDeleteProject 似乎不是我的开发工具集的一部分。

那么，如何删除项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T12:04:46.690

由于 TFS@visualstudio.com 是基于 2012 的，因此最好（有时也需要）使用[Team Explorer 2012](http://www.microsoft.com/en-us/download/details.aspx?id=30656)执行管理功能。

无论您安装的是 2010 还是 2012，您都可以在以下位置找到您要查找的 EXE：

```
 C:\Program Files (x86)\Microsoft Visual Studio XX.0\Common7\IDE* 
```

*根据需要替换 (x86) 和 XX.0

此外，您的开始菜单中应该有一个 Visual Studio 20XX 命令提示符快捷方式。运行它将在路径中使用上述目录创建一个 CMD 会话。

# c# - 不允许使用 JSONP WCF 方法

> ID：15961044
> 
> 赞同：2
> 
> 时间：2013-04-12T00:16:38.110
> 
> 标签：c#, javascript, jquery, wcf, jsonp

我在下面定义了我的 WCF 联系人

```
 [OperationContract]
    [WebInvoke(Method = "POST",
        ResponseFormat = WebMessageFormat.Json,
        RequestFormat = WebMessageFormat.Json,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        UriTemplate = "GetUrlContent"

         )]
    List<string> GetUrlContent(List<string> urls);
} 
```

我有

```
<binding name="webHttpBindingWithJsonP" crossDomainScriptAccessEnabled="true" /> 
```

我的 JS 看起来像这样

```
 var Url = "http://192.168.1.100/WebContent.svc/GetUrlContent?callback=?";
var postdata= [];
postdata.push("http://cnn.com");
postdata.push("http://bbc.com");

    $.getJSON(Url , JSON.stringify(postdata), function (msg) {
        for (i in msg) {

            console.log(msg[i]);
        }
    }); 
```

Err Msg i Get is

> “网络错误：405 方法不允许 - http://192.168.1.100/WebContent.svc/GetUrlContent?callback=jQuery183043170534494375234_1365725164391&[%22http://cnn.com%22,%22http://bbc.com%22]&_= 1365725173310"

编辑这是我的新错误信息

```
 Exception type: InvalidOperationException 
    Exception message: Operation 'GetUrlContent' in contract 'IFetchWebContent' uses GET, but also has body parameter 'urls'. GET operations cannot have a body. Either make the parameter 'urls' a UriTemplate parameter, or switch from WebGetAttribute to WebInvokeAttribute.
   at System.ServiceModel.Description.WebHttpBehavior.ValidateGETHasNoBody(OperationDescription operation, String method)
   at System.ServiceModel.Description.WebHttpBehavior.<>c__DisplayClass10.<>c__DisplayClass13.<GetRequestDispatchFormatter>b__d() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:43:32.167

WCF 内置的 JSONP 支持仅限于`GET`请求；您将无法执行`POST`.

尝试将您的方法更改为`GET`：

```
[OperationContract]
[WebInvoke(Method = "GET",
    ResponseFormat = WebMessageFormat.Json,
    RequestFormat = WebMessageFormat.Json,
    BodyStyle = WebMessageBodyStyle.Wrapped,
    UriTemplate = "GetUrlContent")]
List<string> GetUrlContent(List<string> urls); 
```

# asp.net-mvc-4 - 为 MVC 应用程序使用虚拟目录时出现 global.asax 文件错误

> ID：15961052
> 
> 赞同：0
> 
> 时间：2013-04-12T00:17:52.710
> 
> 标签：asp.net-mvc-4, iis-7

我有一个工作的 MVC 4 应用程序部署到 IIS 服务器。我想在 IIS 中的另一个网站中复制这个 MVC 应用程序，所以我使用虚拟目录将工作 MVC 站点的 Bin、视图、脚本和图像链接到新站点。然后我将 global.asax 和 web.config 文件复制到新站点的根目录。查看新站点的内容视图时，它看起来与原始站点目录布局相同，只是文件夹是虚拟的。

当我在浏览器中运行新站点时，出现以下错误：

```
Parse Error: Parser Error Message: Could not load type 'PrApp.MvcApplication'.
<%@ Application Codebehind="Global.asax.cs" Inherits="PrApp.MvcApplication" Language="C#" %> 
```

我已经阅读了这一点，但找不到任何关于这一点的内容。大多数处理错误的程序集或缺少名称空间，但由于我知道程序集可以工作，我不确定为什么会收到此错误。我的假设是这个网站的功能与另一个网站完全一样，因为文件和 dll 都是“存在的”，但由于我缺乏编译代码的经验，这可能是一个糟糕的假设。

我的目标是在多个 IIS 站点中运行相同的 mvc 应用程序，这样它们每个都可以拥有自己的根目录，而我可以维护一个代码库。

任何帮助是极大的赞赏！

更新：IIS 的图像。- 突出显示的站点是具有虚拟目录的站点。另一个扩展站点是正在运行的 MVC 应用程序。

![在此处输入图像描述](https://i.stack.imgur.com/u7fhR.jpg)

更新 2：我从辅助站点的根目录中删除了 global.asax 文件，错误消失了。现在我收到以下错误：403 - 禁止访问：访问被拒绝。我也尝试将我的虚拟目录转换为应用程序，但无济于事。我不确定这是否是进步。如果您有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:01:34.093

好的。好吧，似乎没有什么能提供我们想要的东西，我们最终为我们的托管站点构建了真正的目录结构，然后根据需要在每个站点中创建了通过 webAPI 和/或 iFrames 与应用程序通信的 html 页面。

我唯一能想到的另一件事就是以某种方式以编程方式在数千个站点中维护相同的代码库。如果有人有任何其他想法，我会全力以赴！

# google-closure-compiler - 闭包编译器和闭包检查器

> ID：15961056
> 
> 赞同：0
> 
> 时间：2013-04-12T00:18:27.333
> 
> 标签：google-closure-compiler, google-closure

我正在阅读一本关于谷歌闭包的旧书，它告诉我使用闭包检查器调试代码。以下页面告诉我它已折旧：

[https://developers.google.com/closure/compiler/docs/inspector](https://developers.google.com/closure/compiler/docs/inspector)

它没有说明使用什么来代替。没有替代品就贬值了吗？如果是这种情况，它不会贬值，它会被取消，并且无法调试闭包编译的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T13:13:16.180

正如您所指出的，Closure-inspector 现在已过时。替代方案是 Chrome 现在原生支持源映射。

有关如何调试已编译代码的信息，请参阅我的答案：[Debugging Closure-compiler Compiled Javascript](https://stackoverflow.com/questions/14147479/potential-differences-between-compiled-and-uncompiled-javascript/14147795#14147795)

# iframe - 如何删除timeline.js iframe 上的滚动条？

> ID：15961057
> 
> 赞同：3
> 
> 时间：2013-04-12T00:18:28.260
> 
> 标签：iframe, scrollbar, timeline.js

我尝试将其发布到timeline.js Google 组，但它被删除了。

我在插件网站 ( [http://timeline.verite.co](http://timeline.verite.co) ) 和我们的测试站点上的外部 iFrame 上看到滚动条。

将 iframe 嵌入我们的网站时，我尝试添加：

```
<iframe scrolling="no" style="overflow:visible;" 
```

但是，当滚动条消失时，右边缘会被略微切断。

此外，建议的嵌入代码具有 width="100%"。

*   如果我把这个减少到 95%
*   iframe 比包含的 div 小得多
*   但右边缘仍然被略微切断
*   我们在 Mac 上的 Firefox、Chrome 和 Safari 中看到了这一点
*   我们还在timeline.js 网站上的预览中看到滚动条

我确定我遗漏了一些简单的东西，但在timeline.js 网站或Google 群组中看不到任何内容——除了其他帖子的一些“你做错了”评论。

删除 iFrame 中的滚动条有技巧吗？对不起，如果这很简单。

干杯

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T05:34:13.317

在 iframe 中添加宽度、高度和边框，如下所示

```
width='100%' height='700' frameborder='0' 
```

试试这个，我想现在它的作品

```
<iframe src='embed.verite.co/timeline/?source=0Aj2TitNEGaD2dHlqV3ZRcDhMYlY3MjZmUEt2aWQ0ckE&font=Bevan-PotanoSans&maptype=toner&lang=en' width='100%' height='100%' frameborder='0'></iframe> 
```

# fortran - 如何在 FORTRAN 中更快地写入二进制文件？

> ID：15961060
> 
> 赞同：3
> 
> 时间：2013-04-12T00:18:48.433
> 
> 标签：fortran, binary-data

我有以下用于写入二进制文件的代码：

```
CALL system_clock(Time1, rate)
OPEN( 1, FILE='Test.bin', STATUS='UNKNOWN', ACCESS='STREAM')

DO 275 I=1,NDOF
  DO 274 J=1,UBW
    IF (S(I,J).NE.0) THEN
      WRITE (1) I
      WRITE (1) J+I-1
      WRITE (1) (S(I,J))
    ENDIF
  274 CONTINUE
275 CONTINUE

CLOSE(1)
CALL system_clock(Time2)
print *, "elapsed time: ", real(Time2-Time1) / real(rate) 
```

我知道通过使用更少的 WRITE 语句，我可以让它更快。所以在循环内我使用以下代码，它更快：

```
IF (S(I,J).NE.0) THEN 
WRITE (1) I, J+I-1,  (S(I,J)) 
ENDIF 
```

有没有办法摆脱循环（因为它很耗时）或进行任何其他更改以获得更有效的代码？

请注意，我希望在我的写作中具有 I、J+I-1 和 S(I,J)（仅非零值）的顺序。此外，由于我使用 C++ 程序来读取二进制文件，因此我必须使用流访问。

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:53:04.587

您可以做的一件事是翻转数组的处理顺序。因此，在您的 do 语句中，只需将 i 与 j 切换。这是因为数组 S(i,j) 是二维的，它在内存中的存储方式对访问速度非常重要。存储取决于所使用的编程语言标准，Fortran（与 C 相对，但与 Matlab 类似）使用列优先形式的数组存储。因此访问内存最有效的方法是从第一行的元素开始依次遍历数组的每一列。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T08:36:08.673

我在生产代码中所做的是首先填充一个缓冲区，然后将其存储在一个写入命令中。它比只写列快得多，或者比写单个值快得多。类似于以下内容：

```
CALL system_clock(Time1, rate)

allocate the buffer with the sufficient size
offset = 0
buffer = 0

DO I=1,NDOF
  DO J=1,UBW
    IF (S(I,J) /= 0) THEN
      buffer(offset: offset + int_size-1) = transfer(I,buffer)
      offset = offset + int_size
      buffer(offset: offset + int_size-1) = transfer(J+I-1,buffer)
      offset = offset + int_size
      buffer(offset: offset + real_size-1) = transfer((S(I,J))
      offset = offset + real_size
    ENDIF
  end do
end do

OPEN( 1, FILE='Test.bin', STATUS='UNKNOWN', ACCESS='STREAM')

write (1) buffer(1:offset-1)

CLOSE(1)
CALL system_clock(Time2)
print *, "elapsed time: ", real(Time2-Time1) / real(rate) 
```

确实，数组的遍历顺序并不是*那么*重要。**[I/O 操作会极大地减慢您的速度](https://www.ibm.com/developerworks/mydeveloperworks/blogs/b10932b4-0edd-4e61-89f2-6e478ccba9aa/entry/improving_i_o_performance_in_xl_fortran3?lang=en)**。

PS 请不要在 Fortran 2003 中用 continue 结束你的循环，这很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T07:18:30.500

你可以做的另一件事是我称之为手动循环展开的事情。

```
CALL system_clock(Time1, rate)
OPEN( 1, FILE='Test.bin', STATUS='UNKNOWN', ACCESS='STREAM')

DO 275 I=1,NDOF
  DO 274 J=1,UBW,2
    IF (S(I,J).NE.0) THEN
      WRITE (1) I, J+I-1, S(I,J), I, J+I, S(I,J+1)
    ENDIF
  274 CONTINUE
275 CONTINUE

CLOSE(1)
CALL system_clock(Time2)
print *, "elapsed time: ", real(Time2-Time1) / real(rate) 
```

可以考虑更改循环顺序的选项（在 Fortran 中，由于矩阵的列主要存储，最左边的索引应该最快地更改）但我认为加速应该可以忽略不计，这是 I/O 所需要的.

**编辑**：如果`UBW`是奇怪的，你应该确保它`J`不会走得太远以避免数组越界错误。

```
...
IF ((S(I,J) .NE. 0) .AND. (J .LT. UBW)) THEN
  WRITE (1) I, J+I-1, S(I,J), I, J+I, S(I,J+1)
ELSE
  WRITE (1) I, J+I-1, S(I,J)
ENDIF
... 
```

# actionscript-3 - 是否可以将 swf 放在另一个 swf 中以更改键盘功能

> ID：15961071
> 
> 赞同：0
> 
> 时间：2013-04-12T00:20:07.563
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, flash-builder

我有一个使用 adobe alchemy 制作的库运行某种模拟器的 swf 文件。这个 swf 运行游戏，我们可以使用键盘控制它们，我没有重新映射键盘上按钮的选项，所以我问是否可以将此 swf 放在另一个包含重新映射按钮的接口的 swf 中键盘？如果有可能，那会影响模拟器的性能。你能给我一个如何做这些事情的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:07:42.153

我唯一能想到的就是这样的东西，它捕获一个标准`KeyboardEvent`，然后发送一个新`KeyboardEvent`的带有重新映射的`keyCode`值。

目前唯一的问题是每家出版社都会派出两个`KeyboardEvents`。第一个将是原始版本，后者将是重新映射的版本。

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyHandler);
stage.addEventListener(KeyboardEvent.KEY_UP, keyHandler);

function keyHandler(e:KeyboardEvent):void
{
    if(!e.cancelable)
    {
        var map:Object = {
            65: 20,
            66: 13
        };

        // Set up you own event.
        // The new KeyboardEvent is cancelable, so we can track it as such.
        var kbd:KeyboardEvent = new KeyboardEvent(e.type, true, true);
        kbd.keyCode = e.keyCode;

        for(var i:String in map)
        {
            // Set the keyCode of the new KeyboardEvent to the mapped value
            // as defined above.
            if(e.keyCode === int(i)) kbd.keyCode = map[i];
        }

        stage.dispatchEvent(kbd);
    }

    // Notice that you will be notified twice of a KeyboardEvent; once for
    // the original and once for the new one with the remapped (if applicable)
    // keyCode value.
    trace(e.keyCode);
} 
```

# c# - Windows 8 XAML - 制作自定义后退按钮

> ID：15961075
> 
> 赞同：0
> 
> 时间：2013-04-12T00:20:22.810
> 
> 标签：c#, xaml

我制作了一个与我的应用程序主题相匹配的后退按钮。这是原始后退按钮的代码：

```
 <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}" FontWeight="ExtraBold"/> 
```

如何用我自己的图像补充提供的后退按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:31:36.463

我会使用 Blend 来编辑模板。将其保存在 app.xaml 文件中后，您可以在应用程序的任何地方将其作为样式引用。

我找到了一些将 Blend 用于按钮的资源。

[http://msdn.microsoft.com/en-us/library/bb613598.aspx](http://msdn.microsoft.com/en-us/library/bb613598.aspx)

[http://www.codeproject.com/Articles/64937/Building-Better-Buttons-in-Expression-Blend-Silver](http://www.codeproject.com/Articles/64937/Building-Better-Buttons-in-Expression-Blend-Silver)

或者您可以将图像包装为其内容，然后删除边框。

```
<Button x:Name="MyButton" Height="32" Width="32" BorderBrush="{x:Null}" BorderThickness="0" Padding="0">
      <Image Source="someimage.png" Height="32" Width="32"></Image>
</Button> 
```

# javascript - 如何根据请求解析原始数据？

> ID：15961079
> 
> 赞同：0
> 
> 时间：2013-04-12T00:20:48.820
> 
> 标签：javascript, node.js

我有一个使用 Ajax 提交`post data`到数据库的表单，如下所示：

```
function markAsRead(id) {
    console.log('Triggered');
    $.ajax({
        type: 'POST',
        url: '/admin/assessment.html',
        data: id,
        success: function(data) {
            if (data.error) {
                console.log('We had an error.');
            } else if (data.success) {
                console.log('Marker updated.');
            }
        }
    })
}

(function() {
    var element = document.getElementsByName('markAsRead');
    for(var i = 0; i < element.length; i += 1) {
        element[i].addEventListener('click', function(e)  { e.preventDefault;
            markAsRead(this.getAttribute('data-value'));
        });
    }
})(); 
```

我的页面上有多个锚点，例如：

```
<a href="#" name="markAsRead" data-value="5135135">Mark As Read</a> 
```

我只是想知道，`Node.js`我该如何解析这些数据，我试过了：

```
var id = req.body.markAsRead;

  console.log('Data is ' + id); 
```

但它只是说未定义。有关如何解析此请求数据的任何信息都会很好。谢谢！（`Anchor`不在任何形式内）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:28:19.110

首先，您应该使用命名参数或比字符串更结构化的东西从客户端发布数据。

```
$.ajax({
    type: 'POST',
    url: '/admin/assessment.html',
    data: { id: id },
    success: function(data) {
        if (data.error) {
            console.log('We had an error.');
        } else if (data.success) {
            console.log('Marker updated.');
        }
    }
}) 
```

其次，当您在节点端解析 req.body 时，您正在解析作为请求正文发送的字符串，其中包括您的参数**{ id: 'somevalue' }**。你可以自己解析这个，但我猜你在node 的 http.Server 实现之上使用**express或其他抽象，它支持**[中间件堆栈](https://stackoverflow.com/questions/5284340/what-is-node-js-connect-express-and-middleware)。我建议使用[connect bodyParser()](http://www.senchalabs.org/connect/bodyParser.html)中间件，它将 req.body 字符串转换为具有已发布属性的对象。这将使**req.body.id**在节点的请求处理程序中对您可用。

# dns - Dreamhost 上的自定义 A DNS 记录有问题

> ID：15961082
> 
> 赞同：2
> 
> 时间：2013-04-12T00:21:01.850
> 
> 标签：dns, amazon-web-services, dreamhost

我使用 Dreamhost 托管我的域，并希望将 Amazon EC2 用于实际网站。

我正在尝试编辑 Dreamhost 上的 DNS，但他们有这个系统，其中有一个不可编辑的 A 记录和我添加的自定义 A 记录。

我遇到了奇怪的问题，DNS 交替解析为一个或另一个。这是设置后的几天。

当我执行 nslookup 时，两个 A 记录 IP 都得到一个奇怪的结果

```
$ nslookup mydomain.com ns1.dreamhost.com
Server:     ns1.dreamhost.com
Address:    66.33.206.206#53

Name:   mydomain.com
Address: 54.225.12.34
Name:   mydomain.com
Address: 67.205.56.78 
```

如果我使用 Amazon Route 53 或 Network Solutions 上的名称服务器，DNS 可以工作，但我认为 Dreamhost 可能会定期更改 MX 记录和其他重要内容，所以我宁愿将所有内容保留在 Dreamhost 上并在那里更改 A 记录。

有没有人让这个在 Dreamhost 上工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-15T00:39:58.247

不可编辑区域中的 A-recs 来自完全托管。转到管理域 > 单击删除。然后它们消失，只留下您想要的自定义 dns 记录。

# c# - const多维数组初始化

> ID：15961083
> 
> 赞同：15
> 
> 时间：2013-04-12T00:21:43.363
> 
> 标签：c#, arrays, constants

为什么以下工作？

```
class A
{
    public int[,] i = { { 1, 2, 3 }, { 1, 2, 3 }, { 1, 2, 3 } };

    static void Main(string[] args)
    {
    }
} 
```

而以下没有？

```
class A
{
    public const int[,] i = { { 1, 2, 3 }, { 1, 2, 3 }, { 1, 2, 3 } };

    static void Main(string[] args)
    {
    }
} 
```

它不允许将字符串以外的 const 引用类型分配为 null 以外的任何内容。由于它是一个数组（引用），因此必须为其分配 null（？）。如果它是常量且为空，它将如何初始化？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T00:26:42.350

如果我没记错的话，它是 C# 语言设计的一部分。`const`保留用于可以在编译时推断其内容的项目，即在程序甚至构建然后运行之前（期间）。C# 中的所有数组都是运行时数组（它们的长度是在程序运行时确定的，而不是在那之前），因此它们不能被制成`const`字段。我觉得这是 C# 的一个限制，但这就是他们决定这样做的方式。

引用类型可以为 null 的原因是它`null`是一个常量值，而您的初始化程序（在运行时生成）不是。`null`内置于语言中，因此通过该逻辑，它的值始终是已知的（因此，可用于编译时引用类型）。

编辑：

但是，您应该能够创建一个静态表，该表将在任何其他代码使用或需要它时被初始化：

```
public static int[,] i = { { 1, 2, 3 }, { 1, 2, 3 }, { 1, 2, 3 } };
       ^ Static Keyword 
```

您可以像访问它（如果它仍在`class A`）：

```
A.i[0, 1] 
```

我希望这可以帮助你

要了解更多信息，请查看 MSDN： http: [//msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(CS0134);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5) &rd=真](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(CS0134);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5)&rd=true)

编辑编辑：如果您需要将静态表铆接到代码上，并且在初始化后永远不要让任何人更改它，则有用于此`readonly`目的的关键字：

```
public static readonly int[,] i = { { 1, 2, 3 }, { 1, 2, 3 }, { 1, 2, 3 } };
       ^ Static ^Readonly Keywords 
```

请记住，它不会阻止您将事物重新分配到这些插槽中，但它与 C# 所能提供的一样固定，除了每次都创建一个属性或返回一个新数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T00:28:39.293

它不起作用，因为这是对`const`关键字的限制。

来自[MSDN](http://msdn.microsoft.com/en-us/library/e6w8fe1b%28v=vs.110%29.aspx)：

> const 关键字用于修改字段或局部变量的声明。它指定字段或局部变量的值是常数，这意味着它不能被修改。
> 
> 常量表达式是可以在编译时完全计算的表达式。因此，引用类型常量的唯一可能值是**string**和 null

如果您尝试定义一个无法更改的数组，也许您应该使用[`readonly`](http://msdn.microsoft.com/en-us/library/acdd6hb7.aspx)关键字，它将对字段或局部变量的更改限制在声明或构造函数中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T00:28:55.860

常量在编译时进行评估。数组是引用类型，创建引用类型的唯一方法是使用`new`关键字（在您的代码中隐含）。

`new`不能在常量表达式中使用，因为它不能在编译时计算。

请参阅 MSDN： http: [//msdn.microsoft.com/query/dev11.query ?appId=Dev11IDEF1&l=EN-US&k=k(CS0134);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5)&rd=true](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k(CS0134);k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.5)&rd=true)

# java - 带有 setBounds 的 drawLine 组件

> ID：15961084
> 
> 赞同：0
> 
> 时间：2013-04-12T00:21:50.273
> 
> 标签：java, swing, graphics, jcomponent, setbounds

我有一个问题，我似乎无法用我的 Java 代码解决。

我创建了一个显示地图的程序，当您单击地图时，您会在地图上得到一个边缘/节点。当我将两个节点相互连接时，将在连接的点之间显示一条线.

到目前为止一切都很好，或者我想，但是......当`x1,y1`坐标的值小于`x2,y2`......时很好

我发现是 setBounds 吓到我了……但我不知道如何解决我的问题，而且我似乎在周围的任何地方都找不到任何类似的问题……有没有人遇到过这种问题，如果是这样，你是如何解决这个问题的？

```
import java.awt.*;
import javax.swing.*;

public class DrawMyLine extends JComponent{
    private int fx, fy, tx, ty;
    private int h,w;
    private int m;
    private double k;
    private Destinations from;
    private Destinations to;

public DrawMyLine(Destinations from, Destinations to){
    this.from=from;
    this.to=to;
    setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));

    fx = from.getX();
    fy = from.getY();
    tx = to.getX();
    ty = to.getY();

    //w = Math.abs(tx - fx);
    //h = Math.abs(ty - fy);
    w = tx - fx;
    h = ty - fy;

    int x,y;

    if(ty>fy){ //This is my, not so great solution so far...
        x = fx;
        y = fy;
    }
    else{
        x = tx;
        y = ty;
    }

    setBounds(x+5,y+5, w, h); //How do I reverse the boundary?
    setPreferredSize(new Dimension(w, h));
    setMinimumSize(new Dimension(w, h));
    setMaximumSize(new Dimension(w, h));
    }

//@Override
protected void paintComponent(Graphics g){
        super.paintComponent(g);
        g.setColor(Color.BLACK);
        g.drawLine(0,0,w,h);
}

//Method to reduce the clickable area to 5 pixels from the line
public boolean contains(int x, int y){

    k = ((ty-fy)/(tx-fx));
    if(k >= 0){
        m = 0;
    }
    else{
        m = ty - fy;
    }
    return Math.abs(y - k * x - m) < 5;
}//contains 

public Destinations getFrom(){
    return from;
}
public Destinations getTo(){
    return to;
}

} 
```

并且主要（当连接两个节点时）：

```
DrawMyLine dml = new DrawMyLine(from,to);
panel.add(dml);
panel.repaint();
dml.addMouseListener(lineListener); 
```

谁能帮我？请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:48:11.180

不要反转边界，反转渲染。

想想这个...

![在此处输入图像描述](https://i.stack.imgur.com/aw4X8.png) ![在此处输入图像描述](https://i.stack.imgur.com/Jsrmf.png)

在上图中，唯一改变的是起点和终点。矩形的大小没有改变。

所有边界都必须使用正值。在 Swing 中，不存在具有负尺寸的矩形。

现在我的示例是使用 a 呈现的`java.awt.Point`，但基本概念仍然...

```
// Find the smallest point between the two
int x = Math.min(p1.x, p2.x);
int y = Math.min(p1.y, p2.y);
// Size is based on the maximum value of the two points differences...
int width = Math.max(p1.x - p2.x, p2.x - p1.x);
int height = Math.max(p1.y - p2.y, p2.y - p1.y); 
```

这现在为您提供了效果区域的大小。画线只是在两点之间画一条线（而不是`0, 0, width, height`你用过的线）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T15:42:43.760

好的 thx，我想我理解逻辑但是当我测试我的程序时，似乎这条线越界了。

```
import java.awt.*;
import javax.swing.*;

public class DrawMyLine extends JComponent{
    private int fx, fy, tx, ty;
    private int h,w;
    private int m;
    private double k;
    private Destinations from;
    private Destinations to;

    public DrawMyLine(Destinations from, Destinations to){
    this.from=from;
    this.to=to;
    setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));

    fx = from.getX();
    fy = from.getY();
    tx = to.getX();
    ty = to.getY();

    // Find the smallest point between the two
    x1 = Math.min(fx, tx);
    y1 = Math.min(fy, fy);
    // Size is based on the maximum value of the two points differences...
    int w = Math.max(fx - tx, tx - fx);
    int h = Math.max(fy - ty, ty - fy);

    setBounds(x1,y1, w, h);
    setPreferredSize(new Dimension(w, h));
    setMinimumSize(new Dimension(w, h));
    setMaximumSize(new Dimension(w, h));
}

//Method to reduce the clickable area to 5 pixels from the line
public boolean contains(int x, int y){

    k = ((ty-fy)/(tx-fx));
    if(k >= 0){
        m = 0;
    }
    else{
        m = ty - fy;
    }
    return Math.abs(y - k * x - m) < 5;
}//contains 

//@Override
protected void paintComponent(Graphics g){
    super.paintComponent(g);
    g.setColor(Color.BLACK);

    if(fx<tx || fy<ty){ // Something like this?
    g.drawLine(fx,fy,tx,ty);
    }
    else{
    g.drawLine(tx,ty,fx,fy);
    }
}

public Destinations getFrom(){
return from;
}
public Destinations getTo(){
return to;
}

} 
```

有些线的显示只是小块......见图片......

[http://imgur.com/Ue9VtEL](http://imgur.com/Ue9VtEL)

为什么会这样？

# ruby-on-rails - Rails：为 has_many 关系动态生成表单元素

> ID：15961087
> 
> 赞同：0
> 
> 时间：2013-04-12T00:22:12.113
> 
> 标签：ruby-on-rails, forms, associations

我有一个模型，`Lesson`，它`has_many :lesson_objectives`。每个都`Lesson`可以有无限数量的`LessonObjectives`- 这是问题的一部分。

我计划将这两个模型的控制器/视图集成在一起——这样每当有人想要创建一个`Lesson`时，他们也必须为其提供所有的`LessonObjective`s。我想要一个解决方案，默认情况下可能会向用户显示两个字段，例如 "Objecive 1" 和 "Objective 2" ，然后在用户键入时动态添加任何后续字段。当用户填写“Objective n”时，“Objective n+1”字段将自动出现。

但是我不确定两件事。

*   将此行为添加到视图中的最佳方法。它可能需要大量的 jQuery，我不确定最佳实践。例如，如果用户删除“Objecive 5”，然后“Objective 6”将不得不重新排列以填充“Objective 5”怎么办？

*   如何配置表单字段（名称、ID）以便 Rails 能够理解行为并能够在不违反 Rails 约定并保持其 RESTful 和 DRY 的情况下保存数据。

如果宝石可能有帮助，请随时提出建议！我一直在使用 SimpleForm 和其他一些。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:51:22.317

您是正确的，您需要深入研究 JQuery 以在输入默认的课程目标 2 后自动创建新的课程目标输入字段。

> 例如，如果用户删除“Objecive 5”，然后“Objective 6”将不得不重新排列以填充“Objective 5”怎么办？

最佳实践规定不涉及 JQuery，但会涉及 PARTIAL！和 AJAX。

这是关键，任何创建所有当前课程目标的显示都将是部分的。该部分将负责按顺序对目标进行编号。

然后，如果您有一个“删除”链接 (remote=>true)，并点击了删除课程目标的控制器操作，该控制器将渲染导致部分重新渲染的 javascript，这次是所有课程目标的新列表（减去您刚刚删除的那个）。

simple_form 很好，普通的旧 Rails 表单助手可以正常工作。您的意图不会影响您对表单技术的选择。

> 如何配置表单字段（名称、ID）以便 Rails 能够理解行为并能够在不违反 Rails 约定并保持其 RESTful 和 DRY 的情况下保存数据。

只需记住 rails 助手如何命名输入的基础知识：

如果您的表单是 foo，并且该表单中的输入是 bar，则它的名称是 'foo[bar]'

您可以使用开箱即用的普通旧导轨做任何您想做的事情。最难的部分将是 jquery 添加具有正确名称的新输入字段，以便它们正确发布。

# .net - 来自 .net 的 SQL Server 连接

> ID：15961088
> 
> 赞同：0
> 
> 时间：2013-04-12T00:22:19.467
> 
> 标签：.net, sql-server

我正在使用 SQL Server 学习 .net。我已经安装了 Visual Studio 2010 和 SQL Server 2008R2。

我在 SQL Server Management Studio 中工作没有任何问题。我可以使用数据库。

我正在尝试从.net 连接到数据库，以下是连接字符串

```
myconn.ConnectionString = 
                "Data Source=.\'Manuel-PC\'SQLINFMASTERIA;Initial Catalog=Northwind;Integrated Security=True"; 
```

我有以下错误在线`mycommand.Connection = myconn;`

> "Error relacionado con la red o específico de la instancia mientras se establecía una conexión con el servidor SQL Server。No se encontró el servidor o éste no estaba accesible. Compruebe que el nombre de la instancia es Correcto y que SQL Server está configurado para admissionir conexiones remotas. (provier:Named Pipes Provider, erro:40 - No se pudo abrir una conexión con SQL Server"。

我读过其他帖子，它们对 SQL Server 端和防火墙端的配置选项有帮助。

我可以连接到 Visual Studio 中的数据库，能够使用 Visual Studio 的工具浏览数据库的一个表。

但是，在运行程序时，我收到了同样的错误。

这个问题是否必须与安装的顺序有关？我的意思是，我先安装了 Visual Studio，然后安装了 SQL Server。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:25:32.200

假设我糟糕的翻译技能是正确的，那就是一般的“无法连接”错误，这可能意味着从“您错误地指定主机/端口”到“您提供的凭据不正确”。

您的连接字符串对我来说似乎不正确 -`.\`表示本地机器

看看这里： http: [//www.connectionstrings.com/sql-server-2008](http://www.connectionstrings.com/sql-server-2008)并仔细检查连接字符串的语法。

# css - 如何在SASS中将整数转换为十六进制

> ID：15961089
> 
> 赞同：5
> 
> 时间：2013-04-12T00:22:19.633
> 
> 标签：css, sass, hex, string-conversion

代替 Chris Eppstein 提到的作为 SASS 正在进行的工作的[Map 数据结构](http://chriseppstein.github.io)之类的东西，我正在尝试实现类似的东西 - 将字符串映射到相应的十六进制值，该值将用于指定 CSS 的 unicode 字符*内容*属性。（我正在尝试重构一些字体图标 SASS 代码。）

目前我有一些基本的东西，比如：

```
/*icon1  -->  \F000
  icon2  -->  \F001
  icon3  -->  \F002*/

@function u-char($name) {
    @if $name == icon1 {
        @return "000";
    } @else if $name == icon2 {
        @return "001";
    } @else if $name == icon3 {
        @return "001";
    }
}

@mixin icon-class($name) {
    ...
    content: "\f#{u-char($name)}";
    ...
} 
```

但我实际上是在尝试映射大量字符，所以这种方法很费力。我希望能够做类似的事情：

```
@function u-char($name) {
    $i: 0;
    $itemList: item1, item2, item3;

    @each $currItem in $itemList {
        @if $name == item1 {
            @return i-to-hex-str($i);
        }
        $i: $i + 1;
    }
} 
```

在 SASS 中有什么可以做整数到十六进制字符串的转换吗？还有另一种优雅的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-01T05:00:10.020

要回答您帖子中的最后一个问题，“在 SASS 中是否有任何东西可以将整数转换为十六进制字符串？”。嗯……不是内置的，但我认为这很清楚，而且代码行数相对较少：

```
/** Returns an at least one byte hex value */
@function dec-to-hex($d) {
    $hexVals: "A" "B" "C" "D" "E" "F";
    $base: 16;
    $quotient: $d;
    $result: "";
    @if $d == 0 {
        $result: "00";
    }
    @while $quotient != 0 {
        $mod: $quotient % $base;
        $quotient: floor($quotient / $base);
        @if $mod > 9 {
            $mod: nth($hexVals, $mod - 9);
        }
        @if $d < $base {
            $result: "0" + $mod;
        } @else {
            $result: $mod + $result;
        }
    }
    @return $result;
} 
```

这不会在字符串前面添加十六进制限定符（例如“0x”或“#”），但您可以将其硬编码到最后一行 ( `@return "#" + $result;`)，或者在调用函数时将其应用在原地。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-27T15:10:00.653

您帖子中最后一个问题的另一个实现：“在 SASS 中是否有任何东西可以将整数转换为十六进制字符串？” 这是一个最短的版本（不适用于最旧的版本，因为可能缺少 str-slice）。

```
@function decToHex($dec) {
    $hex: "0123456789ABCDEF";
    $first: (($dec - $dec % 16)/16)+1;
    $second: ($dec % 16)+1;
    @return str-slice($hex, $first, $first) + str-slice($hex, $second, $second)
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-16T00:35:23.250

前面的答案对我们不起作用，所以这里有两个快速函数用于将整数转换为多个不同的基数，包括十六进制：

```
@function decimal-to-base($decimal, $to_base, $chars: '0123456789abcdefghijklmnopqrstuvwxyz')
  @if type-of($decimal) != 'number'
    @error '$decimal must be an integer.'
  @if type-of($to_base) != 'number'
    @error '$to-base must be an integer.'
  @if type-of($chars) != 'string'
    @error '$chars must be a string.'
  @if $to_base < 2
    @error '$to-base must be larger than 1.'
  @if $to_base > str-length($chars)
    @error 'Length of $chars must be equal or larger than $to-base.'
  @return _decimal-to-base($decimal, $to_base, $chars)

@function _decimal-to-base($decimal, $to_base, $chars, $_accum: '')
  @if $decimal <= 0
    @return if($_accum != '', $_accum, '0')
  $remainder: $decimal % $to_base
  $char: str-slice($chars, $remainder + 1, $remainder + 1)
  $remaining_decimal: ($decimal - $remainder) / $to_base
  @return _decimal-to-base($remaining_decimal, $to_base, $chars, $char + $_accum) 
```

如果您不关心错误处理，您可以跳过长的第一个函数（它实际上只验证参数并设置默认字符）并复制第二个函数。

另外，请注意这是用 SASS 编写的，而不是 SCSS。对于 SCSS 支持，您需要添加一些花括号和分号。

**例子：**

*   十进制转十六进制：
    `decimal-to-base(15731618, 16) // "f00ba2".`

*   十进制转二进制：
    `decimal-to-base(34, 2) // "100010".`

*   查询字符串的时间戳：
    `decimal-to-base(1547598870, 2) // "pleb0y".`

*   绝对不是摩尔斯电码：
    `decimal-to-base(34, 2, '-.') // "-...-.".`

*   过度设计的整数到字符串：
    `decimal-to-base(123456, 10) // "123456".`

**已知警告：（**因为这是一个肮脏的实现）

*   输入小数必须是整数 >= 0。
*   最小基数为 2。
*   您需要小心处理大整数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-05-06T12:44:41.310

我在十六进制和十进制数之间来回更改数字的功能是

```
$hex-chars: "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F";

@function dec-to-hex($d) {
    $result: "";
    $rest: $d;
    @while $rest > 0 {
        $result: nth($hex-chars, $rest % 16 + 1) + $result;
        $rest: floor($rest / 16);
    }
    @return $result;
}

@function pow($number, $exponent) {
    $value: 1;
    @if $exponent > 0 {
        @for $i from 1 through $exponent {
            $value: $value * $number;
        }
    }
    @return $value;
}

@function hex-to-dec($d) {
    $result: 0;
    $number: inspect($d);
    $power: 0;
    @for $index from str-length($number) through 1 {
        $digit: str-slice($number, $index, $index);
        $value: index($hex-chars, $digit) - 1;
        $result: $result + ($value * pow(16, $power) );
        $power: $power + 1;
    }
    @return $result;
} 
```

十进制数被认为是数字，而十六进制被认为是字符串

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-12T01:07:33.297

我会这样做：

```
$icons: "000", "001", "002";

@function icon($i) {
  @return "\F#{nth($icons, 1)}";
}

h1::before {
  content: icon(1);
} 
```

**编辑：**

如果要将单词与值相关联，请尝试使用列表列表并遍历它们。我不会假装这是非常有效的，但它确实有效。如果 Sass 有哈希就好了。

```
$icons: '000' calendar, '001' inbox, '002' home

@function icon($call)
  @for $i from 1 through length($icons)
    @if $call == nth(nth($icons, $i), 2)
      @return "\F#{nth(nth($icons, $i), 1)}"

h1::before
  content: icon(calendar) 
```

# autocomplete - 如何为 CodeMirror 编辑器应用自动缩进？

> ID：15961091
> 
> 赞同：4
> 
> 时间：2013-04-12T00:22:24.993
> 
> 标签：autocomplete, editor, codemirror

我正在为多种语言（Groovy、Python、Beanshell、XSLT）使用通用 Codemirror 编辑器。根据下拉菜单中选择的语言，我为编辑器设置了相应的模式。

如何为上述语言应用自动缩进？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T10:35:02.000

CodeMirror 模式可以为其各自的语言提供缩进，并且大多数都可以（例如[python 模式](http://codemirror.net/mode/python/python.js)）。这可以通过检查模式的源以检查是否`indent(state, textAfter)`已实现来验证。从文档：

> 如果您希望您的模式提供智能缩进（通过 [`indentLine`](http://codemirror.net/doc/manual.html#indentLine)方法和`indentAuto`and`newlineAndIndent`命令，可以[绑定键](http://codemirror.net/doc/manual.html#option_extraKeys)`indent(state, textAfter)`），您必须 在模式对象上定义一个方法。

应用定义 的模式`indent(state, textAfter)`，并假设`smartIndent`设置为`true`（这是默认值）后，应该透明地提供自动缩进，您无需付出额外的努力。

如果一个模式不支持开箱即用的智能缩进，你可以自己实现它。请参阅文档中有关[编写 CodeMirror 模式](http://codemirror.net/doc/manual.html#modeapi)的部分。

# macos - 人们如何知道 OS X 应用程序中的 cmd？

> ID：15961095
> 
> 赞同：0
> 
> 时间：2013-04-12T00:23:52.177
> 
> 标签：macos, terminal

例如，这里有一些终端中的 cmd 可以配置应用程序的行为： `defaults write com.apple.mail DisableInlineAttachmentViewing -boolean YES`

人们如何知道该配置？苹果有用户手册告诉他们吗？或者无论如何都知道这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:50:33.283

看起来苹果没有关于该主题的任何手册。但世界各地也有[一些爱好者。](https://github.com/mathiasbynens/dotfiles/blob/master/.osx)有关其他信息，请参阅此[帖子。](http://mac.appstorm.net/general/app-news/hackers-defaults-for-os-x-released-on-githubs/)

# mysql - 如何加入/合并/联合两个压缩的 MySQL MyISAM 表？

> ID：15961098
> 
> 赞同：1
> 
> 时间：2013-04-12T00:24:05.517
> 
> 标签：mysql, join, merge, compression, union

我有一个大型压缩 MyISAM 表，我每个月左右都会向其中添加数据。到目前为止，表的大小是可控的，但是每次我想添加数据时都解压缩-插入-压缩非常烦人。

那么我怎样才能做到这一点而不必经历一个解压缩-插入-压缩循环呢？

另外，我有点不确定这里的命名法。它是联接、合并还是联合？[myisampack](http://dev.mysql.com/doc/refman/5.1/en/myisampack.html)文档提到了该选项`--join`，但我也发现 Ruben 的回答[在这里](https://stackoverflow.com/questions/2780537/speed-up-of-readonly-myisam-table)谈论`union`.

这里的最佳做法是什么？现在我以 table_{archive,new_data}.{frm,MYD,MYI} 开始和结束，仅此而已。不同的方法是否还涉及重命名表文件（如 myisampack 文档中所述）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-22T09:27:41.500

无法将任何记录插入到压缩表中。您必须为新数据创建一个新数据，我认为您手头有一个。因此，您可以将一张压缩另一张未压缩的两张表连接到一个新的压缩表中。然后发出 myisampack -rg 命令来重建密钥。 [https://dev.mysql.com/doc/refman/8.0/en/myisampack.html](https://dev.mysql.com/doc/refman/8.0/en/myisampack.html)

# iphone - 如何使 UIScrollView 与图标对齐（如 App Store：功能）

> ID：15961099
> 
> 赞同：6
> 
> 时间：2013-04-12T00:24:14.720
> 
> 标签：iphone, ios, xcode, cocoa, uiscrollview

我想要得到的是与此滚动视图相同的行为：

![App Store 功能滚动视图（左）](https://i.stack.imgur.com/6OtDs.png)

我知道这是使用 HTML 而不是本机 API，但我正在尝试将其实现为 UIKit 组件。

**现在，对于我正在寻找的行为：**

*   请注意，这是一个分页滚动视图，但“页面大小”小于视图的宽度。
*   当你从左到右滚动它时，每一页都会“捕捉”到最左边的项目。
*   当您从右端向左滚动它时，它会“捕捉”到最右边的项目。

相同的页面，但现在从右到左：

![App Store 功能滚动视图（右）](https://i.stack.imgur.com/w2M61.png)

**我试过的：**

*   我尝试使滚动视图小于它的超级视图并覆盖 hitTest，这让我得到了从左到右的行为。
*   我已经尝试实现 scrollViewWillEndDragging:withVelocity:targetContentOffset: 并设置我想要的 targetContentOffset 但由于我无法更改速度，它只是滚动太慢或太快。
*   我已经尝试实现 scrollViewDidEndDecelerating: 然后动画到正确的偏移量，但滚动视图首先停止然后移动，它看起来不自然。
*   我尝试实现 scrollViewDidEndDragging:willDecelerate: 然后动画到正确的偏移量，但滚动视图“跳跃”并且动画不正确。

我没主意了。

谢谢！

**更新：**

我最终使用了 Rob Mayoff 的方法，它看起来很干净。我对其进行了更改，使其在速度为 0 时起作用，例如当用户拖动、停止和释放手指时。

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView 
                     withVelocity:(CGPoint)velocity 
              targetContentOffset:(CGPoint *)targetContentOffset {
    CGFloat maxOffset = scrollView.contentSize.width - scrollView.bounds.size.width;
    CGFloat minOffset = 0;

    if (velocity.x == 0) {
        CGFloat targetX = MAX(minOffset,MIN(maxOffset, targetContentOffset->x));

        CGFloat diff = targetX - baseOffset;

        if (ABS(diff) > offsetStep/2) {
            if (diff > 0) {
                //going left
                baseOffset = MIN(maxOffset, baseOffset + offsetStep);
            } else {
                //going right
                baseOffset = MAX(minOffset, baseOffset - offsetStep);
            }
        }
    } else {
        if (velocity.x > 0) {
            baseOffset = MIN(maxOffset, baseOffset + offsetStep);
        } else {
            baseOffset = MAX(minOffset, baseOffset - offsetStep);
        }
    }

    targetContentOffset->x = baseOffset;
} 
```

此解决方案的唯一问题是滑动滚动视图不会产生“反弹”效果。感觉“卡住”了。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T01:57:24.140

Setting`scrollView.decelerationRate = UIScrollViewDecelerationRateFast`与 implementation 相结合`scrollViewWillEndDragging:withVelocity:targetContentOffset:`，似乎对我使用集合视图有用。

首先，我给自己一些实例变量：

```
@implementation ViewController {
    NSString *cellClassName;
    CGFloat baseOffset;
    CGFloat offsetStep;
} 
```

在`viewDidLoad`中，我设置了视图`decelerationRate`：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    cellClassName = NSStringFromClass([MyCell class]);
    [self.collectionView registerNib:[UINib nibWithNibName:cellClassName bundle:nil] forCellWithReuseIdentifier:cellClassName];
    self.collectionView.decelerationRate = UIScrollViewDecelerationRateFast;
} 
```

我需要`offsetStep`是适合视图屏幕边界的整数个项目的大小。我计算它`viewDidLayoutSubviews`：

```
- (void)viewDidLayoutSubviews {
    [super viewDidLayoutSubviews];
    UICollectionViewFlowLayout *layout = (UICollectionViewFlowLayout *)self.collectionView.collectionViewLayout;
    CGFloat stepUnit = layout.itemSize.width + layout.minimumLineSpacing;
    offsetStep = stepUnit * floorf(self.collectionView.bounds.size.width / stepUnit);
} 
```

在滚动开始之前，我需要`baseOffset`成为视图的 X 偏移量。我初始化它`viewDidAppear:`：

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    baseOffset = self.collectionView.contentOffset.x;
} 
```

然后我需要强制视图以`offsetStep`. 我在`scrollViewWillEndDragging:withVelocity:targetContentOffset:`. 根据`velocity`，我增加或`baseOffset`减少`offsetStep`。但我钳制`baseOffset`到最小值 0 和最大值`contentSize.width - bounds.size.width`.

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset {
    if (velocity.x < 0) {
        baseOffset = MAX(0, baseOffset - offsetStep);
    } else if (velocity.x > 0) {
        baseOffset = MIN(scrollView.contentSize.width - scrollView.bounds.size.width, baseOffset + offsetStep);
    }
    targetContentOffset->x = baseOffset;
} 
```

请注意，我不在乎是什么`targetContentOffset->x`。

这具有与最左侧可见项的左边缘对齐的效果，直到用户一直滚动到最后一项。此时它与最右侧可见项的右边缘对齐，直到用户一直滚动到左侧。这似乎与 App Store 应用程序的行为相匹配。

如果这对您不起作用，您可以尝试将最后一行 ( `targetContentOffset->x = baseOffset`) 替换为：

```
 dispatch_async(dispatch_get_main_queue(), ^{
        [scrollView setContentOffset:CGPointMake(baseOffset, 0) animated:YES];
    }); 
```

这也适用于我。

[你可以在这个 git 存储库](https://github.com/mayoff/stackoverflow-15961099-appStoreScrollView)中找到我的测试应用程序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-12T00:57:20.733

您可以打开`pagingEnabled`，或与and`decelerationRate = UIScrollViewDecelerationRateFast`结合使用（这将最大限度地减少滚动到一个位置然后再次动画到另一个位置的效果）。这可能不是您想要的，但它非常接近。并且通过使用它可以避免最后的瞬间跳跃。`scrollViewDidEndDragging``scrollViewDidEndDecelerating``animateWithDuration`

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
        [self snapScrollView:scrollView];
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self snapScrollView:scrollView];
} 
```

然后，您可以编写一个`snapScrollView`，例如：

```
- (void)snapScrollView:(UIScrollView *)scrollView
{
    CGPoint offset = scrollView.contentOffset;

    if ((offset.x + scrollView.frame.size.width) >= scrollView.contentSize.width)
    {
        // no snap needed ... we're at the end of the scrollview
        return;
    }

    // calculate where you want it to snap to

    offset.x = floorf(offset.x / kIconOffset + 0.5) * kIconOffset;

    // now snap it to there

    [UIView animateWithDuration:0.1
                     animations:^{
                         scrollView.contentOffset = offset;
                     }];
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-23T11:56:37.547

简单的解决方案，像 App Store 一样工作，无论有没有速度。`kCellBaseWidth`— 单元格的宽度。

```
- (void)scrollViewWillEndDragging:(UIScrollView *)scrollView
                     withVelocity:(CGPoint)velocity
              targetContentOffset:(inout CGPoint *)targetContentOffset
{
    NSInteger index = lrint(targetContentOffset->x/kCellBaseWidth);
    targetContentOffset->x = index * kCellBaseWidth;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-14T18:15:27.130

为斯威夫特代言。[@avdyushin](https://stackoverflow.com/a/23243572/4848310)的答案是迄今为止最简单的，正如 Ben 提到的，效果很好。尽管我确实从[@Rob](https://stackoverflow.com/a/15961379/4848310)的回答中添加了一段关于滚动视图结束的内容。总之，这个解决方案似乎工作得很好。

```
func scrollViewWillEndDragging(scrollView: UIScrollView, withVelocity velocity: CGPoint, targetContentOffset: UnsafeMutablePointer<CGPoint>) {

    if ((scrollView.contentOffset.x + scrollView.frame.size.width) >= scrollView.contentSize.width) {
        // no snap needed ... we're at the end of the scrollview
        return
    }

    let index: CGFloat = CGFloat(lrintf(Float(targetContentOffset.memory.x) / kCellBaseWidth))
    targetContentOffset.memory.x = index * kCellBaseWidth

} 
```

只需将您的添加`minimumLineSpacing`到`kCellBaseWidth`，然后瞧。

# mysql - 所有按 id 的记录在 30 天内消除两个日期列的重复项（如果存在）

> ID：15961100
> 
> 赞同：0
> 
> 时间：2013-04-12T00:24:15.820
> 
> 标签：mysql, window-functions

鉴于以下情况：

```
drop table if exists a;

create table a (
    id CHAR(30),
    d1 DATETIME,
    d2 DATETIME
);

insert into a values (1, '2012/1/1', '2012/1/2');
insert into a values (1, '2012/1/15', '2012/1/16');
insert into a values (1, '2012/1/25', '2012/1/26');
insert into a values (1, '2012/2/10', '2012/2/11');

insert into a values (2, '2012/1/1', '2012/1/2');
insert into a values (2, '2012/2/6', '2012/2/7'); 
```

我想返回每个 ID 的所有记录，但在 30 天内消除任何重复项（datediff(d2,d1) <= 30）：

```
+------+---------------------+---------------------+
| id   | d1                  | d2                  |
+------+---------------------+---------------------+
| 1    | 2012-01-01 00:00:00 | 2012-01-02 00:00:00 |
| 1    | 2012-02-10 00:00:00 | 2012-02-11 00:00:00 |
| 2    | 2012-01-01 00:00:00 | 2012-01-02 00:00:00 |
| 2    | 2012-02-06 00:00:00 | 2012-02-07 00:00:00 |
+------+---------------------+---------------------+ 
```

由于 1/15 和 1/25 在 1/1 的 30 天内，因此将它们删除。希望这是有道理的。在一次选择中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:28:20.353

此查询选择在它们之前 30 天或更短的时间内没有具有相同 id 的行的所有行：

```
select * from table a a1
where not exists (select 1 from table a a2 where a2.id = a1.id
and (days(a1.d1) - days(a2.d1) < 30) and (days(a1.d1) > days(a2.d1)) 
```

子查询的两个部分是：查找在我们之前但不超过 30 天的行，如果我们发现拒绝这一行。

根据需要替换您自己的 sql 风格的日期函数/日期差异函数

# jquery-ui - jQuery UI - 显示自动完成

> ID：15961101
> 
> 赞同：0
> 
> 时间：2013-04-12T00:24:19.577
> 
> 标签：jquery-ui, autocomplete

我正在使用 jQuery Autocomplete 作为输入框。我的“源”选项包含非常具体的逻辑来获取数据并根据标准对其进行排序/过滤。

当用户在 UI 中选择建议时，根据选择的建议类型，我需要再次调用自动建议。

据我了解[API](http://api.jqueryui.com/autocomplete/#method-search)，我需要触发`search`事件。如何触发该事件（从`select`事件内部）并定义事件处理程序以`search`再次调用自动建议。

基本上，我知道如何为事件创建事件处理程序，`search`但是如何从`select`事件内部和事件处理程序内部触发它，如何调用`source`来获取更新值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:33:37.390

找到了！参考[这里](https://stackoverflow.com/questions/12984151/trigger-search-from-select-within-jquery-ui-autocomplete)

从选择中调用：

```
$("#my-autocomplete").autocomplete("search", "SearchTerm"); 
```

我不需要显式处理`search`事件，我的`source`函数会自动触发。

# java - MySQL 连接器/J - 将 Java 字符串映射到 MySQL INT

> ID：15961104
> 
> 赞同：1
> 
> 时间：2013-04-12T00:24:44.077
> 
> 标签：java, mysql, sql, jdbc, mysql-connector

Connector/J的[文档](http://docs.oracle.com/cd/E17952_01/refman-5.0-en/connector-j-reference-type-conversions.html)说它可以轻松地将 MySQL INT 转换为 Java String 类型。（即，从结果集映射到 Java 类型。）

但这是否反过来起作用？换句话说，你能`String`在 MySQL 期望的预处理语句中使用 Java`INT`吗？这被认为是好的/坏的做法吗？

```
# pseudo-code
table EMPLOYEES 
(
    NAME VARCHAR(50)
    EMPLOYEE_NO INT(11)
)

// Java code
PreparedStatement prepStmt = 
    con.prepareStatement("SELECT * from EMPLOYEES where EMPLOYEE_NO=?");
prepStmt.setString(1, str);
ResultSet rs = prepStmt.execute(); // ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:01:15.467

根据[）的](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)[javadoc`setString(`](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#setString%28int,%20java.lang.String%29)（我的重点）：

> 将指定参数设置为给定的 Java 字符串值。驱动程序在将其发送到数据库时将其转换为**SQL VARCHAR 或 LONGVARCHAR**值（取决于参数的大小相对于驱动程序对 VARCHAR 值的限制）。

这意味着这**可能**不起作用，尽管它可能会起作用（我想一个 int 在发送时就像一个字符串一样表示），但如果事情发生变化，情况可能并非如此。无论哪种方式，我都不认为这是一种好的做法，因为字符串中可能存在非整数值。

相反，使用：

```
prepStmt.setInt(1, Integer.parseInt(str)); 
```

并按`NumberFormatException`您认为合适的方式处理。

* * *

此外，以下行无效，因为`execute()`返回`boolean`值。：

```
ResultSet rs = prepStmt.execute(); 
```

相反，您可以使用：

```
if (prepStmt.execute()) {
    ResultSet rs = prepStmt.getResultSet();
} 
```

或者

```
ResultSet rs = prepStmt.executeQuery(); 
```

# c# - AJAX 传递数据始终为空

> ID：15961107
> 
> 赞同：0
> 
> 时间：2013-04-12T00:25:10.727
> 
> 标签：c#, ajax, asp.net-mvc

我想通过 Ajax 函数传递模型数据，这是我的观点。这是部分观点

```
@model LMS.Models.COM_DELIVERY

            <script type="text/javascript">  
                function saveDelivery() {                  
                    $.ajax({

                        type: 'POST',
                        dataType: 'JSON',
                        url: '@Url.Action("SaveDelivery", "Business")',
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify($('#addDelivaryform').serialize()),

                        success: function (result) {

                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            alert(xhr.status);
                            alert(thrownError);
                        }
                    });

                }
    </script>

    @using (Html.BeginForm(null, null, FormMethod.Post, new { id = "addDelivaryform" }))
{ 

    @Html.ValidationSummary(true)

        <legend>Create Delivery </legend>
        <table>

        <tr><td>
        Contact
        </td>
        <td>
           @Html.EditorFor(model => model.CONTACT)
            @Html.ValidationMessageFor(model => model.CONTACT)

        </td></tr>

         <tr><td> Phone      
        </td>
        <td>       
        @Html.EditorFor(model => model.PHONE)
            @Html.ValidationMessageFor(model => model.PHONE)
        </td></tr>

           <tr><td>  Address    
        </td>
        <td>       
         @Html.EditorFor(model => model.ADDRESS_1)
            @Html.ValidationMessageFor(model => model.ADDRESS_1)
        </td></tr>

           <tr><td>  Street    
        </td>
        <td>       
         @Html.EditorFor(model => model.STREET)
            @Html.ValidationMessageFor(model => model.STREET)
        </td></tr>

           <tr><td>   Suburb   
        </td>
        <td>       
          @Html.EditorFor(model => model.SUBURB)
            @Html.ValidationMessageFor(model => model.SUBURB)
        </td></tr>

           <tr><td colspan="2">    

            <input type="button" value="Save Order Type"   onclick="saveDelivery();"  />

        </td>
        </tr>
        </table>

} 
```

这是控制器

```
public ActionResult SaveDelivery(COM_DELIVERY obj)
          {
             strig name = obj.CONTACT 
              return Json(new { success = true });
          } 
```

在我的控制器中 obj.CONTACT 始终为 null，即使我填写了 CONTACT 。这是阿贾克斯邮报

```
JSON

There are no child objects

Source
"CONTACT=hhhh&PHONE=&ADDRESS_1=&STREET=&SUBURB=&" 
```

那么如何获取控制器中的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:03:46.807

尝试创建匿名 JavaScript 对象，例如

```
<script type="text/javascript">  
                function saveDelivery() {     

                     var SendData = {
                               CONTACT: $.trim($('#Selecteditemid').val()),
                               PHONE: $.trim($('#Selecteditemid').val()),
                               ADDRESS_1: $.trim($('#Selecteditemid').val()),
                               STREET: $.trim($('#SelectedCompanyCode').val()),
                               SUBURB: $.trim($('#SelectedCompanyCode').val())
                              };
                    $.ajax({
                        type: 'POST',
                        dataType: 'JSON',
                        url: '@Url.Action("SaveDelivery", "Business")',
                        contentType: 'application/json; charset=utf-8',
                        data: JSON.stringify(SendData),
                        async: true,
                        processData: false,
                        success: function (result) {

                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            alert(xhr.status);
                            alert(thrownError);
                        }
                    });

                }
    </script>
/////////
[HttpPost]  
public ActionResult SaveDelivery(COM_DELIVERY obj)
 {
             strig name = obj.CONTACT 
             return Json(new { success = true });
 } 
```

# javascript - 对象 javascript

> ID：15961110
> 
> 赞同：0
> 
> 时间：2013-04-12T00:25:35.007
> 
> 标签：javascript, oop, object

谁能告诉我这段代码是什么意思？

```
var func = tool[ev.type];
if (func) {
  func(ev);
} 
```

tool 是在这个句子中声明的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:28:42.407

它引用了函数（对象）“工具”上的一个属性，它本身显然包含另一个函数。测试以确保函数存在，然后调用该函数。

工具是一个填充了事件处理程序的对象，对象“工具”中的属性名称对应于不同类型的事件。代码根据事件“类型”引用“工具”对象中的属性。例如：

```
var tool = {
    'click': function(evt) {}, // event handler for click
    'mousedown': function(evt) {}, // event handler for mousedown
    'mouseup': function(evt) {}, // event handler for mouseup
}

// User presses the mouse button down and doesn't release.
//       ev.type == 'mousedown'
//

// Save the property value (which should be an event handler)
// to a variable.
var func = tool[ev.type];

// Make sure func is defined before attempting to invoke it.
if (func) {
    // func is defined, invoke it and pass the event object to it
    func(ev);
} 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:43:50.687

除了上面的答案之外，从纯 JavaScript 的角度来看，查看一个更简单（且完整）的示例可能有助于理解这里发生的事情。

```
function Tool() {
    this.test = function(param) { // create a new method called 'test' on our Tool object
        console.log(param); // output the value of 'param' to the console
    }
}
var tool = new Tool(); // Create a new Tool
var func = tool['test']; // assign the 'test' method of 'tool' to the 'func' variable

func("input"); // run the 'func' function with "input" as the parameter 
```

# c++ - GLSL 片段着色器中的文件意外结束

> ID：15961112
> 
> 赞同：-1
> 
> 时间：2013-04-12T00:26:19.610
> 
> 标签：c++, glsl, shader, vertex

我只是在处理每个片段照明，在 Visual Studio 2010 C++ 中工作并使用 GLSL，由于某种原因，只有这个片段着色器有问题，我已经通过了有效的片段着色器，我所有的顶点着色器都工作了，所以这与这个特定的人有关。基本上我的着色器看起来像这样：

```
#version 120

varying vec3 normal;
varying vec3 lightDir;
varying vec4 ambient;
varying vec4 diffuse;

void main()
{
float NdotL = max(dot(lightDir,normalize(normal)),0.0);
gl_FragColor = vec4((NdotL * diffuse.rgb + ambient.rgb),  gl_FrontMaterial.diffuse.a);
} 
```

有没有人有任何想法可以提供帮助？正如我所说，我已经将多个着色器加载到程序中，但只有这家伙不起作用

编辑：将 vec3 切换为浮点数，仍然遇到同样的问题。停！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:34:46.547

`dot(lightDir,normalize(normal))` 是点积。所以它返回一个标量。

`max(scalar, scalar)`也计算为标量。

所以：

```
vec3 NdotL = max(dot(lightDir,normalize(normal)),0.0); 
```

尝试将标量分配给向量。这是无效的。

所以你可能想要的是：

```
float NdotL = max(dot(lightDir,normalize(normal)),0.0);
gl_FragColor = vec4((NdotL * diffuse.rgb + ambient.rgb),  gl_FrontMaterial.diffuse.a); 
```

# bash - 如何在 bash 测试命令中分配变量？

> ID：15961115
> 
> 赞同：1
> 
> 时间：2013-04-12T00:26:43.120
> 
> 标签：bash, shell

```
ok="1"
test -f no_such_file || (ok='0' && echo ggg)
> ggg
echo $ok
> 1 
```

为什么`$ok`还在`1`？在这种情况下我该怎么做`0`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:45:43.507

试试这样写：

```
test -f no_such_file || { ok='0'; echo ggg; } 
```

{ } 会给你分组，但不会启动子shell。&& 在这种情况下没有用，所以我用 ';' 代替了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T00:45:07.830

原因是它`(ok='0' && echo ggg)`在子外壳中运行，因为它包含在`()`s 中。如果你在没有括号的情况下运行它：

```
ok="1"
test -f no_such_file || ok='0' && echo ggg
> ggg
echo $ok
> 0 
```

您必须调整逻辑以将赋值语句留在`()`s之外

# java - Java - 创建背景为按钮的 JLabel

> ID：15961117
> 
> 赞同：0
> 
> 时间：2013-04-12T00:27:03.050
> 
> 标签：java, image, swing, jlabel

因此，我有一个扩展 JLabel 的类，我将其用作按钮（使用 clicklistener 类），并且我正在尝试将背景图像添加到标签（见下文），但是当我使用此标签时，文本在右侧的图像。有没有办法将图像用作实际背景？我想避免为每个按钮制作单独的图像。

```
public class DButton 
  extends JLabel
{

  URL imgPath;
  ImageIcon img;

  public DButton(int width, int height)
  {
      this.setOpaque(true);
      imgPath = getClass().getResource("/img/MainMenuButton.png");
      if(imgPath != null)
      {
          img = new ImageIcon(imgPath);
          this.setIcon(img);
      }else 
      {
          System.err.println("Cant find file");
      }
  }
  public DButton(int width, int height, String text)
  {
      this(width, height);
      this.setText(text);
  }    
} 
```

编辑：感谢大家的快速回复，我明白了（设置垂直和水平对齐）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:58:50.027

为什么不直接调整标签的垂直和水平属性呢？

![在此处输入图像描述](https://i.stack.imgur.com/dSdcJ.png)

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class BackgroundLabel {

    public static void main(String[] args) {
        new BackgroundLabel();
    }

    public BackgroundLabel() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {
            setLayout(new FlowLayout(FlowLayout.CENTER));
            try {
                BufferedImage icon = ImageIO.read(new File("Pony.png"));
                JLabel label = new JLabel("Flying Ponies");
                label.setIcon(new ImageIcon(icon));
                label.setHorizontalAlignment(JLabel.CENTER);
                label.setVerticalAlignment(JLabel.CENTER);
                label.setHorizontalTextPosition(JLabel.CENTER);
                label.setVerticalTextPosition(JLabel.CENTER);
                add(label);
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:49:39.750

您需要覆盖标签的绘制方法：

```
@Override
protected void paintComponent(Graphics g) {
    g.drawImage(imgPath, 0, 0, this);
    super.paintComponent(g);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T00:49:42.070

在

```
img = new ImageIcon(imgPath); 
```

尝试这个

```
image = img.getImage()
graphics = image.getGraphics()
graphics.drawString("Text", 0, 0) 
```

# javascript - Jquery移动按钮图标不会改变（通过代码）

> ID：15961118
> 
> 赞同：0
> 
> 时间：2013-04-12T00:27:07.237
> 
> 标签：javascript, jquery, jquery-mobile

我正在尝试在 jquery mobile 中创建一个在列表和网格视图之间切换的按钮。但是，当我按下/单击它时，我无法更改按钮图标。这是我的代码：

HTML

```
<a href="javascript:changeLayout()" class="ui-btn-right" data-role="button" data-icon="bars" data-iconpos="notext" data-theme="b" data-inline="true"></a> 
```

Javascript

```
function changeLayout() {
if ($('#changeLayout').data('icon') == 'grid'){
    $('#changeLayout').data('icon', 'bars');
    $('#changeLayout .ui-icon').addClass('ui-icon-bars').removeClass('ui-icon-grid');
}
else {
    $('#changeLayout').data('icon', 'grid');
    $('#changeLayout .ui-icon').addClass('ui-icon-grid').removeClass('ui-icon-bars');
} 
```

但是按钮图标不会改变。我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:49:15.367

在 jQuery`.data('x')`中，不会读取/写入元素的`data-x`属性 - 它读取/写入仅由 jQuery 处理的后台数据集。相反，您需要使用该`.attr()`方法。

请尝试以下操作：

```
function changeLayout() {
if ($('#changeLayout').attr('data-icon') == 'grid'){
    $('#changeLayout').attr('data-icon', 'bars');
    $('#changeLayout .ui-icon').addClass('ui-icon-bars').removeClass('ui-icon-grid');
}
else {
    $('#changeLayout').attr('data-icon', 'grid');
    $('#changeLayout .ui-icon').addClass('ui-icon-grid').removeClass('ui-icon-bars');
} 
```

请注意，虽然 jQuery 文档说您可以使用`.data('x')`access `data-x`，但我从未见过它真正起作用。`.attr('x')`只要代码中没有其他问题，更改为始终可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T10:32:35.273

我真的很傻。我忘记将 changelayout 的 id 分配给 HTML 中的按钮。我的错，不过谢谢！

# c - 如何创建数组的随机排列？

> ID：15961119
> 
> 赞同：10
> 
> 时间：2013-04-12T00:27:17.270
> 
> 标签：c

我用 C 语言编写了这个函数，我希望它创建一个随机排列或从 1 到 n 的数字列表。我很难让它没有重复的数字。因此，如果您有 n = 4，我希望它返回一个包含 1-4 每个仅一次的随机数组，例如：{1,3,4,2}

```
int* random(int n) 
{
    int* r = malloc(n * sizeof(int));
    // initial range of numbers
    for(int i=0;i<n;++i){
        r[i]=i+1;
    }
    // shuffle
    for (int i = 1; i <= n; ++i){
        int j = rand() % i;
        r[i] = r[j];
        r[j] = i;
  }
  return r;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-12T00:36:18.877

`for`将第二个循环更改为：

```
for (int i = n-1; i >= 0; --i){
    //generate a random number [0, n-1]
    int j = rand() % (i+1);

    //swap the last element with element at random index
    int temp = r[i];
    r[i] = r[j];
    r[j] = temp;
} 
```

这是一种 Fisher-Yates 洗牌算法。我听说使用`rand() % n`不均匀分布，你已经被警告过。

如果您想每次都生成唯一的排列，您可以将生成的排列存储在 a `Dictionary`or`Hashmap`中，然后每次返回时查找。我认为没有`C`内置的，但应该有可用的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:37:04.073

这可能不是最有效的方法，但是由于您已经在开始时填充了数组，因此您可以循环遍历元素并为每个元素选择一个 1 到 n 范围内的随机索引，然后交换该项目：

```
int* random(int n) 
{
    int* r = malloc(n * sizeof(int));
    for(int i=0;i<n;++i){
        r[i]=i+1;
    }
    for(int i=0; i<n; ++i){
        int randIdx = rand() % n;
        // swap r[i] with r[randIdx]
        int t = r[i];
        r[i] = r[randIdx];
        r[randIdx] = t;
    }
  return r;
} 
```

我不知道这是否是最有效的，或者即使它提供了最好的分布。但这很简单:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-17T08:20:15.787

如果你想重复以上几次，并且你不想每次都得到相同的排列，只需在开头添加以下行：

```
srand((unsigned)time(NULL)); 
```

# jquery - jQuery标签在新窗口中打开？

> ID：15961120
> 
> 赞同：1
> 
> 时间：2013-04-12T00:27:34.027
> 
> 标签：jquery, jquery-ui, asp.net-web-api

我刚刚开始使用 jQuery 选项卡——我将它托管在 Web.API 站点中。我在我的（剃刀渲染的）页面中创建了我的标签，如下所示：

```
<div id="tabs">
    <ul>
        <li><a href="WebApiAppOne">ApplicationOne</a></li>
        <li><a href="WebApiAppTwo">ApplicationTwo</a></li>
    </ul>
</div> 
```

我有以下 jQuery：

```
$( document ).ready( function () {
    $( "#tabs" ).tabs( {
        load: function ( event, ui ) {
            $( ui.panel ).delegate( 'a', 'click', function ( event ) {
                $( ui.panel ).load( this.href );
                event.preventDefault();
            } );
        },
        beforeLoad: function ( event, ui ) {
            ui.jqXHR.error( function () {
                ui.panel.html( "Unable to load tab content" );
            } );
        }
    } );
} ); 
```

第一个选项卡很好地显示了我的`WebApiAppOne`内容-但是当我单击下一个选项卡时，我直接转到`http://localhost/WebApiAppTwo`. 不在选项卡 2 内容区域内 - 选项卡已消失。

我的目标是将我在这个网站上的几个 Web 应用程序整合到一个共同的登录页面中，使用选项卡允许用户选择他们访问的应用程序。但我似乎无法让它正常工作。

对我做错了什么有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T20:34:52.637

我发现了问题——web.api 站点默认调用modernizer-2.5.3.js——不知何故这破坏了jQuery 的选项卡功能。

我不知道为什么，但评论这个电话解决了所有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:24:53.207

您将需要更改 href 属性并添加自定义属性。

```
<div id="tabs">
    <ul>
        <li><a href="#WebApiAppOne" data-link="WebApiAppOne">ApplicationOne</a></li>
        <li><a href="#WebApiAppTwo" data-link="WebApiAppTwo">ApplicationTwo</a></li>
    </ul>
</div>

<div id="WebApiAppOne">
    Lorem ipsum dolor sit amet, consectetuer adipiscing elit
</div>
<div id="WebApiAppTwo">
     Lorem ipsum dolor sit amet, consectetuer adipiscing elit
</div> 
```

然后使用 attr 读取自定义属性并加载面板。

```
 $( ui.panel ).load( $(this).attr("data-link")); 
```

# css - 相同大小的列表项

> ID：15961122
> 
> 赞同：1
> 
> 时间：2013-04-12T00:27:45.493
> 
> 标签：css, html, list, border, nav

我正在尝试使用列表项制作导航栏。我在它们周围设置了一个边框，我试图弄清楚如何使列表项周围的边框大小相等。它们似乎总是与边框内的文本大小一致。对不起，如果这是一个愚蠢的问题，我是网页设计的新手。

```
#nav {
  background-color: #000;
  height: 100px;
  padding-top: 20px;
}
li {
  display: inline;
  border: 1px outset #c4c4cc;
  background-color: #c4c4cc;
  font-family: Tahoma, Geneva, sans-serif bold;
  margin-left: 29px;
  font-weight: bold;
  padding: 12px;
}
```

```
<div id="nav">
  <ul>
    <li>About Us</li>
    <li>Contact Us</li>
    <li>Castings</li>
    <li>Machining</li>
    <li>Products</li>
    <li>Home</li>
  </ul>
</div>
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:49:00.813

不确定这是否正是您要找的，但试试这个 CSS：

```
#nav { 
  background-color: #000; 
  overflow: hidden;
} 

li { 
  float: left;
  background-color:#c4c4cc; 
  font-family:Tahoma, Geneva, sans-serif bold; 
  margin: 29px; 
  font-weight:bold; 
  padding:12px; 
}

ul {
  margin: 0px;
} 
```

这是一个带有示例的 js bin：http: [//jsbin.com/onakom/2/edit](http://jsbin.com/onakom/2/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-15T09:17:26.617

如果您希望所有列表项的宽度相同，则需要

1）在您的列表项上设置一个宽度（对应于，比如说，最宽的项目）

2）为了能够设置宽度，您需要将列表项的显示值从更改为`inline`，`inline-block`因为宽度不适用于内联元素。

**[小提琴](http://jsfiddle.net/danield770/yL0t743h/3/)**

```
#nav {
  height: 100px;
  padding-top: 20px;
}
li {
  display: inline-block;
  border: 1px outset #c4c4cc;
  font-family: Tahoma, Geneva, sans-serif bold;
  margin-left: 29px;
  font-weight: bold;
  padding: 12px;
  width: 100px;
  text-align: center;
}
```

```
<div id="nav">
  <ul>
    <li>About Us</li>
    <li>Contact Us</li>
    <li>Castings</li>
    <li>Machining</li>
    <li>Products</li>
    <li>Home</li>
  </ul>
</div>
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-12-15T08:15:21.613

您只需将标签的高度设置为`<li>`适合标签中文本的最大尺寸的值`<li>`。然后它工作。

# java - 在 Java 中对齐 printf 输出

> ID：15961130
> 
> 赞同：21
> 
> 时间：2013-04-12T00:28:29.320
> 
> 标签：java, alignment, printf, text-align

我需要从一个数组中显示一个项目列表及其价格，并希望调整价格。我几乎让它工作，但需要改进。下面是代码和输出。任何想法如何使所有价格一致？到目前为止，有些工作，但有些没有。提前致谢。

```
//for loop
System.out.printf("%d. %s \t\t $%.2f\n",
                i + 1, BOOK_TYPE[i], COST[i]); 
```

输出：

```
1\. Newspaper         $1.00
2\. Paper Back        $7.50
3\. Hardcover book        $10.00
4\. Electronic book       $2.00
5\. Magazine          $3.00 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-12T00:46:08.500

你可以试试下面的例子。请在宽度前使用“-”以确保左缩进。默认情况下，它们将正确缩进；这可能不适合您的目的。

```
System.out.printf("%2d. %-20s $%.2f%n",  i + 1, BOOK_TYPE[i], COST[i]); 
```

格式字符串语法：[http ://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)

格式化数字打印输出：[https ://docs.oracle.com/javase/tutorial/java/data/numberformat.html](https://docs.oracle.com/javase/tutorial/java/data/numberformat.html)

PS：这可以作为对 DwB 答案的评论，但我仍然没有评论的权限，所以回答它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T00:31:42.347

想到一个简单的解决方案是有一个`String`空间块：

```
String indent = "                  "; // 20 spaces. 
```

打印字符串时，计算实际缩进并将其添加到末尾：

```
String output = "Newspaper";
output += indent.substring(0, indent.length - output.length); 
```

这将调解字符串的空格数，并将它们全部放在同一列中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-12T00:35:55.240

[printf](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html#syntax)和类似 printf 的方法的格式规范采用可选的宽度参数。

```
System.out.printf( "%10d. %25s $%25.2f\n",
                   i + 1, BOOK_TYPE[i], COST[i] ); 
```

将宽度调整为所需值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-21T17:43:30.470

您可以参考此博客在控制台上打印格式化的彩色文本

[https://javaforqa.wordpress.com/java-print-coloured-table-on-console/](https://javaforqa.wordpress.com/java-print-coloured-table-on-console/)

```
public class ColourConsoleDemo {
/**
*
* @param args
*
* "\033[0m BLACK" will colour the whole line
*
* "\033[37m WHITE\033[0m" will colour only WHITE.
* For colour while Opening --> "\033[37m" and closing --> "\033[0m"
*
*
*/
public static void main(String[] args) {
// TODO code application logic here
System.out.println("\033[0m BLACK");
System.out.println("\033[31m RED");
System.out.println("\033[32m GREEN");
System.out.println("\033[33m YELLOW");
System.out.println("\033[34m BLUE");
System.out.println("\033[35m MAGENTA");
System.out.println("\033[36m CYAN");
System.out.println("\033[37m WHITE\033[0m");

//printing the results
String leftAlignFormat = "| %-20s | %-7d | %-7d | %-7d |%n";

System.out.format("|---------Test Cases with Steps Summary -------------|%n");
System.out.format("+----------------------+---------+---------+---------+%n");
System.out.format("| Test Cases           |Passed   |Failed   |Skipped  |%n");
System.out.format("+----------------------+---------+---------+---------+%n");

String formattedMessage = "TEST_01".trim();

leftAlignFormat = "| %-20s | %-7d | %-7d | %-7d |%n";
System.out.print("\033[31m"); // Open print red
System.out.printf(leftAlignFormat, formattedMessage, 2, 1, 0);
System.out.print("\033[0m"); // Close print red
System.out.format("+----------------------+---------+---------+---------+%n");
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-30T04:10:40.263

这是一个潜在的解决方案，它将根据最长的 bookTypes 值设置 bookType 列的宽度（即 bookTypes 值的格式）。

```
public class Test {
    public static void main(String[] args) {
        String[] bookTypes = { "Newspaper", "Paper Back", "Hardcover book", "Electronic book", "Magazine" };
        double[] costs = { 1.0, 7.5, 10.0, 2.0, 3.0 };

        // Find length of longest bookTypes value.
        int maxLengthItem = 0;
        boolean firstValue = true;
        for (String bookType : bookTypes) {
            maxLengthItem = (firstValue) ? bookType.length() : Math.max(maxLengthItem, bookType.length());
            firstValue = false;
        }

        // Display rows of data
        for (int i = 0; i < bookTypes.length; i++) {
            // Use %6.2 instead of %.2 so that decimals line up, assuming max
            // book cost of $999.99\. Change 6 to a different number if max cost
            // is different
            String format = "%d. %-" + Integer.toString(maxLengthItem) + "s \t\t $%9.2f\n";
            System.out.printf(format, i + 1, bookTypes[i], costs[i]);
        }
    }
} 
```

# ios - Opengl ES - 如何合并程序纹理

> ID：15961139
> 
> 赞同：0
> 
> 时间：2013-04-12T00:29:05.297
> 
> 标签：ios, objective-c, opengl-es-2.0, vuforia

我正在使用适用于 iOS 的 Qualcomm 增强现实 FrameMarkers 演示，并切换了我们的 3D 人员给我的模型（实际上他更像是一个涉足 3d 的 2d 人 - 这就是我试图解决这个问题的原因代码端；而不是 3D 端）。问题在于纹理 - 演示假定 2d 图像纹理绑定到 3d 模型。然而，我们的 3D 人员已经将纹理构建到对象本身中（例如程序纹理）。

最初，该物体看起来完全是黑色的，看不到任何细节。通过从演示中删除这些行，我设法使它变得更好：

```
glActiveTexture(GL_TEXTURE0);

glBindTexture(GL_TEXTURE_2D, [obj3D.texture textureID]); 
```

这让一切都变成了一种银色的颜色，我现在可以看到一些细节和一些表面的一些反射（它实际上应该在某些地方是半透明的，而不是纯粹的反射——所以这也是一个问题..）。

我在一些地方读到，为了实现半透明，这些命令是必需的；

```
glEnable(GL_BLEND);

glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

然而，对我来说 - 他们只是把整个屏幕变黑..

正确的： ![正确渲染](https://i.stack.imgur.com/RJQjs.jpg)

应用内： ![应用内渲染](https://i.stack.imgur.com/WMaaR.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T22:51:13.907

借助屏幕截图，我敢猜测您的设计师已经为面分配了适当的材料——您可能会有一个与 OBJ 文件一起使用的 .MTL 文件，其中包含很多以 和 开头的行——`Ka`但不是应用任何纹理。据我所知，该脚本采用了更多的视频游戏演示风格，在某些实现中，为表面提供的颜色属性被丢弃，仅应用纹理。`Kd``Ns``obj2opengl`

因此，从技术上讲，您禁用纹理是正确的，但如果您使用 ES 1.x，您可能想要添加的是`glMaterial`某处的一堆调用，使用脚本似乎没有保留的数据。或者，对于 ES 2.x，您需要模拟经典环境 + 漫反射 + 镜面光照模型的着色器，在 iOS 下，您可以通过将适当指定`GLKEffectPropertyMaterial`的相关`GLKBaseEffect`.

为了透明度，我最好的猜测是您的增强现实库没有正确设置合成 3d 和 2d 所需的状态，而是假设您将保留它。所以你必须调查一下。

您在寻找什么样的解决方案？您是否想要从现在开始可以适应任意模型的东西，或者只是将这个模型放入应用程序然后继续使用其他东西的问题？

如果是前者，那么您可能需要找到其他一些工具链；恐怕我无法提供建议，因为我更像是一个编写 OBJ 解析器，在运行时解析的那种人，而且我从来没有为 GLKit 更新过我的东西，所以它现在已经过时了。

如果是后者，那么最简单的方法可能是按材料拆分模型并分别导出每个组件（希望您的 3d 编辑器可以这样做），然后手动输入相关系数（没有那么多）并以合适的顺序绘制（透明度最后，可能，否则没关系）。

编辑：为了记录，当人们说程序纹理时，他们通常的意思是我给你一个公式`f(texture position)`，例如，当在多边形表面上评估时会产生看起来像大理石的东西。希望我能找到一些方法来进一步参数化和/或定义它，以便您可以放大和放大，获得更多细节。因此，它是一个生成 2d 图像的函数，否则我会将其放入位图中，具有灵活性和细节的优势。

# c++ - 二维数组

> ID：15961143
> 
> 赞同：1
> 
> 时间：2013-04-12T00:29:28.700
> 
> 标签：c++, arrays, multidimensional-array

我在作业中有一个问题，我使用以下方式定义二维数组：

```
// Allocating two two-dimensional matrix
int** matrix1 = new int*[rows];
for( int i=0; i!=rows; ++i )
matrix1[i] = new int[cols];
int** matrix2 = new int*[rows];
for( int i=0; i!=rows; ++i )
matrix2[i] = new int[cols]; 
```

我发现很难理解这种方法，即使在完成课程后，我也觉得这太令人困惑了。我在这学期通过在互联网上找到一种更简单的方法来管理，但我真的很想知道这里到底发生了什么。

有人可以用尽可能简单的词来解释吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:37:47.363

我认为这张图片很好地解释了它是如何组合在一起的。`array`成为你的矩阵之一。

![在此处输入图像描述](https://i.stack.imgur.com/nT8X5.gif)

`matrix1`指向一个指针数组（行），其中每个指针都指向一个整数数组（列）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:32:36.420

动态二维数组基本上是一个指针数组，从语法上讲，它是：

```
int** matrix1; //for integer 2D array 
```

`matrix1`是一个`array of pointers`指向 int 的。int 数组衰减到`int*`. 因此，您具有上述语法。为了更好地理解它，请考虑如何处理动态一维数组，如下所示：

```
int* A = new int[SIZE_OF_ARRAY]; 
```

这里，`A`是类型，如果是编译时间常数`int*`，它在功能上类似于静态数组。现在假设您有另一个静态数组，带有和编译时常量，但是，如果这些数组大小值在编译时不是常量，则需要动态分配内存，因此对于，您必须做与您相同的事情：`A[SIZE_OF_ARRAY]``SIZE_OF_ARRAY``B[ROWS][COLS]``ROWS``COLS``B``matrix1`

```
int **B; 
```

要分配内存，你必须先 allocate `how many pointers the array of pointers store`，同时，你还需要分配内存`for how many int elements each pointer points to`，所以你需要嵌套的 for 循环来实现这个目的。

在 C++ 中，最好使用`vector<vector<int>>`替换`int** matrix1`.

您可以在这里查看二维数组的内存布局：[http ://www.fredosaurus.com/notes-cpp/arrayptr/23two-dim-array-memory-layout.html](http://www.fredosaurus.com/notes-cpp/arrayptr/23two-dim-array-memory-layout.html)

# sql - SQL：如何将唯一约束应用于两个项目的组合（无序）是唯一的两列

> ID：15961144
> 
> 赞同：1
> 
> 时间：2013-04-12T00:29:34.640
> 
> 标签：sql

我有一个包含三列 ( `node1 varchar, node2 varchar, other_data int`)的表

node1 和 node2 是构成图边的节点。

因此`if node1 = A and node2 = B`，它相当于`node1 = B and node2 = A`.

有没有办法确保无法创建重复条目。

例如，如果输入以下内容：

```
node1 = A, node2 = B, other = 123 
```

如果有人尝试输入以下内容，则会失败，因为两个节点已经在表中：

```
node1 = B, node2 = A, other = 123 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:11:40.450

我通常会使用一个`CHECK`约束来实现这一点，这样`node1`总是排序早于`node2`：

```
create table T(
  node1 varchar(20) not null,
  node2 varchar(20) not null,
  other_data int null,
  constraint CK_T_node_order CHECK (node1<node2),
  constraint UQ_T_nodes UNIQUE (node1,node2)
) 
```

它增加了*少量*的复杂性，`INSERT`但使执行所需的约束非常容易。

当然，您还没有说您使用的是什么 SQL 产品。如果你的不支持`CHECK`约束（Grr. MySQL，我在看着你），你必须使用触发器来实现检查约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:13:45.873

编写一个触发器，在 node1 和 node2 的 SORTED 组合上构建一个构造字段，并尝试将其插入到唯一索引中。

# c# - 未设置连接参数时 SQLCommand 失败

> ID：15961145
> 
> 赞同：0
> 
> 时间：2013-04-12T00:29:35.230
> 
> 标签：c#, sql, sqlcommand, ssms

我正在使用下面这样的声明度过一段有趣的时光

```
SqlCommand RiskRevalCommand = 
    new SqlCommand("select * from CreditAdmin.dbo.CreditData_Test"); 
```

我直接从 SQL Server Management Studio 中的查询中获取了 SQL 语句，所以我知道它在那里工作，但现在当程序尝试执行此行时，它会导致抛出异常：

```
SqlDataReader reader = RiskRevalCommand.ExecuteReader(); 
```

错误内容如下：

> ExecuteReader：连接属性尚未初始化。

```
SqlConnection xavierConnection = 
    new SqlConnection("user id=FB\\user;"  +
        "password=password;" +
        "server=dataserver;" +
        "Trusted_Connection=yes;" +
        "database=CreditAdmin;" +
        "connection timeout=15");

try
{
    xavierConnection.Open();
}
catch (Exception e)
{
    MessageBox.Show(e.Message);
}

try
{
    SqlCommand RiskRevalCommand = new SqlCommand("select * from CreditAdmin.dbo.CreditData_Test");

SqlDataReader reader = RiskRevalCommand.ExecuteReader();

while (reader.Read())
{
    try
    {
        double.TryParse(reader["Available Balance"].ToString(), out _availability);
        ...
    }
}
catch (Exception e)
{
    MessageBox.Show(e.Message);
}

//close the connection
try
{
    xavierConnection.Close();
}
catch (Exception e)
{
    MessageBox.Show(e.Message);
} 
```

我应该对我的 SQL 语句进行哪些更改，以便它不会崩溃，并且我仍然可以为字段执行 TryParsing？

[另外，当它](https://stackoverflow.com/questions/15820582/getting-ugly-sql-query-to-work-in-c-sharp)起作用时，这到底是怎么破的？

（这就是`select *`我现在使用的地方）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:14:56.893

请记住在 SqlCommand 构造函数中添加 SqlConnection。

[http://msdn.microsoft.com/en-us/library/877h0y3a.aspx](http://msdn.microsoft.com/en-us/library/877h0y3a.aspx)

喜欢：

```
var cmd = new SqlCommand(thisSelectStatementString, myConnection); 
```

或者正如柯克所说：

```
var cmd = myConnection.CreateCommand(thisSelectStatementString); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:38:51.730

我认为您的连接在上面的尝试范围内被阻止，试试这个

```
 try
        {
            xavierConnection.Open();

            SqlCommand RiskRevalCommand = new SqlCommand("select * from CreditAdmin.dbo.CreditData_Test", xavierConnection/*don't forget this*/);

            SqlDataReader reader = RiskRevalCommand.ExecuteReader();

            while (reader.Read())
            {
               //no need to try-catch here
               double.TryParse(reader["Available Balance"].ToString(), out _availability);
                    ...
            }
         }

         catch (Exception e)
         {
              MessageBox.Show(e.Message);
         }

         finally
         {
              xavierConnection.Close();
         } 
```

并且您设置了`Trusted_Connection=true`但您已经设置了 a`username`并将其`password`更改为 false，

在您的连接字符串中尝试这种格式

```
ConnectionString = "server=Server; user id=FB\\user; password=top$secret;" +
            "database=dataserver; Trusted_Connection=false; Asynchronous Processing=true"; 
```

# windows - 单击磁贴时 Windows 应用程序崩溃

> ID：15961150
> 
> 赞同：0
> 
> 时间：2013-04-12T00:29:44.703
> 
> 标签：windows, windows-8

我已经制作了一些 Windows 基本应用程序，它们提供了有关特定事物的信息……但是当单击磁贴时，这些应用程序崩溃了。异常似乎在 InfoHub.exe

我使用 Windows 默认 Win8AppMaker 来创建应用程序。即我已经在excel文件中填写了数据，它已经自动生成了我使用过的代码..

谁能告诉我为什么我的应用程序崩溃了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-18T23:00:28.857

Windows 应用程序的广告已损坏并导致应用程序崩溃......我回去让他们知道，我的应用程序似乎运行良好，它已提交到应用程序商店......谢谢

# html - html5中属性后的空格

> ID：15961151
> 
> 赞同：0
> 
> 时间：2013-04-12T00:29:45.883
> 
> 标签：html, xhtml

我之前听说过，对于 xhtml，任何属性和标签的右括号之间都应该有一个空格。例如`<a href="example.com" >`，而不是`<a href="example.com">`. html5 是这样吗（对于 xhtml 也是如此）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:01:29.110

在这种情况下，它不是一个自闭合标签，*两种形式都是等效的，*在 HTML（至少 4+）和 XML（包括 XHTML）中都是有效的语法。评论中链接的类似问题是关于`/>`构造的，这些构造在历史上一直是“讨厌的”。

如果一个资源说“应该是”，那么他们只是在谈论一个约定，因为 XML（以及 XHTML）并不关心。现在，自闭合标签可以是一种不同的蠕虫（大部分是用 HTML5 规则“固定”的），但它们与这种特定的语法结构无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:59:21.310

这并没有什么不同。几乎所有浏览器都会正确读取它。我想不出有什么会读错的。

# cakephp - 从 hasMany 表关系中检索数据

> ID：15961153
> 
> 赞同：0
> 
> 时间：2013-04-12T00:29:56.307
> 
> 标签：cakephp, cakephp-2.1, has-many

我有 3 张桌子：

证书、请求和请求c

请求有很多请求c。Requestc 使用certificates_requests 表和has`id` `request_id`和`certificate_id`colouns。

我正在尝试从`Request`表中检索数据，并试图检索与该请求关联的证书的名称。

我正在尝试这个没有成功：

```
$options['joins'] = array (
                    array( 'table' => 'certificates_requests',
                            'alias' => 'Requestc',
                            'type' => 'left',
                            'conditions' => array('Certificate.id = Requestc.certificate_id')

                    )
    );
$certidoes = $this->Request->find('all', $options); 
```

我的模型：

```
class Certificate extends AppModel {

public $name = 'Certificate';}

class Request extends AppModel {

public $name = 'Request';

public $hasMany = array(
    'Requestc' => array(
        'foreignKey'    => 'request_id'
    )
); }

class Requestc extends AppModel {

public $name = 'Requestc';
public $belongsTo = 'Request';
public $useTable = 'certificates_requests'; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:35:31.377

对我来说，这看起来像是一种 HABTM 关系。

可包含的行为将解决您的问题。[在这里阅读更多](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)

```
<?php

// Request.php // Model
var $actsAs = array('Containable');
var $hasAndBelongsToMany = array(
    'Certificate' => array(
        'className' => 'Certificate',
        'joinTable' => 'certificates_requests',
        'foreignKey' => 'request_id',
        'associationForeignKey' => 'certificate_id'
    )
);

// Certificate.php // Model
var $actsAs = array('Containable');
var $hasAndBelongsToMany = array(
    'Request' => array(
        'className' => 'Request',
        'joinTable' => 'certificates_requests',
        'foreignKey' => 'certificate_id',
        'associationForeignKey' => 'request_id'
    )
);

// RequestsController.php
$this->Request->contain(array(
    'Certificate' => array(
        'fields' => array('id', 'name')
    )
));

$request = $this->Request->read(null, <requestIdHere>);
// $request = array(
//     'Request' => array(
//          '<requestData>',
//          ...
//     ),
//     'Certificate' => array(
//          [0] => array(
//              'id'     => <idGoesHere>,
//              'name'   => "<nameGoesHere>'
//          ),
//          [1] => array(
//              'id'     => <idGoesHere>,
//              'name'   => "<nameGoesHere>'
//          ),
//          [2] => array(
//              'id'     => <idGoesHere>,
//              'name'   => "<nameGoesHere>'
//          ),
//     )
// )
?> 
```

让我知道这是否可以解决您的问题。:)

-画

# lua - lua 代码反混淆

> ID：15961156
> 
> 赞同：1
> 
> 时间：2013-04-12T00:30:45.727
> 
> 标签：lua, deobfuscation

我最近下载了一些 lua 代码，我在里面发现了一些混淆的字符串。这让我想知道那里使用了什么样的混淆技术。有人有想法吗？

```
local code='\27\76\117\97\81\0\1\4\4\4\8\0\64\0\0\0\64\67\58\92\85\115\101\114\115\92\65\108\101\120\92\68\101\115\107\116\111\112'
loadstring(code)() 
```

编辑：更多（加密？）代码。

> '\196\2\28\66\0\1\198\193\194\2\25\128\129\3\22\64\14\128\197\193\0\0\198\193\ 195\3\6\2\196\2\220\129\0\1\218'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T00:58:10.577

棘手的部分是`loadstring`相关函数同时接受 lua 代码和 lua 字节代码。该调用`loadstring`只是传递字节编译的 lua 而不是 lua 源代码。

您可以轻松获得字节编译的 lua。你可以得到一个这样的例子

*   创建一个 lua 文件。
*   用luac编译生成lauc.out
*   使用十六进制查看器查看文件内容。

对于一个空的 lua 文件，我得到：

```
0000000: 1b4c 7561 5100 0104 0804 0800 0900 0000  .LuaQ...........
0000010: 0000 0000 4066 6f6f 2e6c 7561 0000 0000  ....@foo.lua....
0000020: 0000 0000 0000 0002 0201 0000 001e 0080  ................
0000030: 0000 0000 0000 0000 0001 0000 0001 0000  ................
0000040: 0000 0000 0000 0000 00                   ......... 
```

前 8 个字节到十进制的转换是：

```
27, 76, 117, 97, 81, 0, 1, 4 
```

与您的字符串中的转义字符匹配。

如果您想了解有关块中代码的更多详细信息，您需要将块写入文件并使用 lua 反编译工具进行调查。[ChunkSpy](http://chunkspy.luaforge.net/)、[luadec15](https://github.com/sztupy/luadec51/wiki)和[unluac](http://sourceforge.net/projects/unluac/)都在 lua wiki[工具页面](http://lua-users.org/wiki/LuaTools)中提及。

您提供的块中没有足够的内容让我更进一步，我认为它被截断了？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T00:49:21.620

看起来根本没有加密。似乎它只是一个字节序列。每个反斜杠代表一个带有字节码的字符。

27是escape，76是'L'，117是'u'，97是'a'等等。

通过一个简短的脚本运行它会给我这个字符串（符号是特殊字符，例如转义、标题开头和 null）：←LuaQ ☺♦♦ @@C:\Users\Alex\Desktop

[您可以在ascii 表](http://www.cdrummond.qc.ca/cegep/informat/professeurs/alain/images/ASCII1.GIF)中查找字节。

更新：一些研究告诉我 LuaQ 意味着它是一个预编译脚本或类似的东西。不过，我可能会走得很远。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-08T13:14:28.477

与其试图给你一个简单的答案，我想告诉你一些事情，以了解你是否在此过程中遇到这样的事情。

这种混淆不是很安全，实际上来自 ASCII 表。通常，这些类型的混淆是在 Lua 5.1 中进行的，并且可以很容易地用 a`:byte`和`table.concat`. 您可以使用更强大的 Troy 解释版本来简单地反转此代码，该版本可以绕过它周围的大多数安全性：

```
function loadstring(input)
   print(input)
end 
```

所以我希望你对这些东西的工作原理有所了解。如前所述，这可以通过使用`:byte`和`table.concat`使用来复制。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-18T11:24:27.623

如果它有加载字符串，那么一种可能并不总是有效的简单方法就是添加

**加载字符串 = 打印；**

在开始时

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-07-19T15:28:23.157

它易于反混淆加密

```
local a ='\196\2\28\66\0\1\198\193\194\2\25\128\129\3\22\64\14\128\197\193\0\0\198\193\195\3\6\2\196\2\220\129\0\1\218'
print(a) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-01T16:39:43.160

你可以这样做

旧代码：

```
loadstring(your string) 
```

你可以通过使用 print() 而不是 loadstring() 来查看/去混淆它

新代码：

```
print(your string) 
```

新脚本：

```
local code='\27\76\117\97\81\0\1\4\4\4\8\0\64\0\0\0\64\67\58\92\85\115\101\114\115\92\65\108\101\120\92\68\101\115\107\116\111\112'

print(code) 
```

# jquery - 如果我不使用注释但使用多动作控制器，@ResponseBody 的替代方法是什么？

> ID：15961159
> 
> 赞同：1
> 
> 时间：2013-04-12T00:31:10.117
> 
> 标签：jquery, spring-mvc

我有一个多动作控制器来处理所有相关请求。我创建了一个处理 ajax 请求的方法，并且该方法预计将返回一个字符串值作为响应。这个 Spring 应用程序不是“mvc:annotation-driven”。

具有处理 ajax 调用方法的控制器：

```
public class UserController extends MultiActionController { 

    private UserDelegate userDelegate;

    public void setUserDelegate(UserDelegate userDelegate) {
        this.userDelegate = userDelegate;
    }

    public String AjaxExample(HttpServletRequest request, HttpServletResponse response, HttpSession session) {
        String ip = request.getParameter("ip"));
        String sysName = userDelegate.getSysName(ip);
        return sysName;
    }

    //Several methods to handle other requests ...
} 
```

使用 jquery 我能够成功调用上面的“AjaxExample”方法。jquery函数如下图所示：

```
function callAjax() {
                        var ip = $('#ip').val();
                        $.ajax(
                            {
                                type: "POST",
                                url: "AjaxExample.do",
                                data: "ip=" + ip,
                                success: function(response) {
                                    alert(response);
                                },
                                error: function(e) {
                                    alert('Error: ' + e);
                                }
                            }
                        );
                    } 
```

我面临的问题是如何在不使用 @ResponseBody 注释的情况下返回字符串？

我可以只在这一种方法上使用注释吗？老实说，我实际上是通过`<mvc:annotation-driven/>`在我的应用程序配置文件中设置标签并使用@ResponseBody 注释“AjaxExample”方法来尝试的。那没有用，spring 仍然将字符串识别为未解决的视图。

我从来没有使用注释配置过spring，我对此的理解是有限的。@ResponseBody 注释不起作用是因为我没有用@Controller 注释我的控制器并且因为我没有用@Request 注释方法吗？但是我在我的应用程序配置文件中确实有一个 bean 定义，并且控制器中的其他方法工作正常。

请忍受我的无知，并启发我如何让这个方法将字符串返回给我的 ajax 调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:22:50.280

将返回类型更改为 void 然后将响应直接写入`HttpServletResponse`.

```
public void AjaxExample(HttpServletRequest request, HttpServletResponse response, HttpSession session) {
        String ip = request.getParameter("ip"));
        字符串系统名称；
        PrintStream printStream = new PrintStream(out);
        尝试 {
           out.print(sysName);
        } 捕捉（IOException e）{}
}

```

# jquery-mobile - Jquery Mobile + Angular：复选框被角度忽略

> ID：15961160
> 
> 赞同：0
> 
> 时间：2013-04-12T00:31:10.123
> 
> 标签：jquery-mobile, angularjs

鉴于以下情况：

```
<html ng-app>
...
<script>
    function Main($scope){
      $scope.checked = function() {
        alert("This will never show!");
      };
    }
</script>
<body>
<div data-role="page" ng-controller="Main">
    <div data-role="header">
    <h1>Sample</h1>
</div>
<div data-role="content">
    <label for="mybox">Click here!</label>
    <input id="mybox" type="checkbox" ng-model="boxval" ng-change="checked()">
</div>
</div>
</body>
</html> 
```

选中或取消选中该框不会触发方法调用。通过删除`<label>`标签，它将正常工作。

我知道 JQuery Mobile 正在对底层`<input type="checkbox">`标签进行一些花哨的操作，但是有没有一种简单的方法可以欺骗它来激活 ng-change？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T18:35:03.997

所以事实证明，要让它工作，我需要做的就是改变我的 javascript 导入的顺序，以便在 Angular 之前导入 jQuery。突然间，这一切都神奇地起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:43:31.573

为了工作，该`ngModel`指令是必需的`ngChange`。

（[http://docs.angularjs.org/api/ng.directive:input](http://docs.angularjs.org/api/ng.directive:input)）

# c++ - 您可以使用 windows gdi 制作自定义按钮和菜单吗？

> ID：15961161
> 
> 赞同：0
> 
> 时间：2013-04-12T00:31:14.953
> 
> 标签：c++, gdi

就像使用 gdi 创建带有图片的文件菜单一样？Windows 窗体中的菜单只是带有事件的动画吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:40:51.540

> 您可以使用 windows gdi 制作自定义按钮和菜单吗？就像使用 gdi 创建带有图片的文件菜单一样？

你*可以*这样做，但我不明白你为什么要这样做。所有的 Windows GDI 函数都记录[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145203.aspx)。它们有很多，您需要根据您想要完成的任务来确定要调用哪些。

例如，要绘制一张图片，您需要使用该函数从某处（如磁盘上的文件或应用程序的嵌入式资源）加载位图资源`LoadImage`，然后使用该`BitBlt`函数或其中之一将该位图绘制到屏幕设备上下文中它的近亲。处理`WM_PAINT`消息是获取可以绘制的设备上下文的首选方式。

从您的问题来看，您似乎对 GDI 的工作原理只有基本的了解。这将是一个真正的问题，因为你在这里提出的是一项相当庞大的任务。您实际上是在重新实现所有 Windows 用户界面。如果您绝对必须继续，我建议您先花一些时间学习使用 GDI 绘图的基础知识。或许可以拿起一本书，比如 Charles Petzold 的经典[Programming Windows, 5th Edition](https://rads.stackoverflow.com/amzn/click/com/157231995X)和/或 Feng Yuan 的优秀[Windows Graphics Programming: Win32 GDI and DirectDraw](https://rads.stackoverflow.com/amzn/click/com/0130869856)（虽然它们都已经绝版了很长时间；你需要寻找出用过的副本）。

> Windows 窗体中的菜单只是带有事件的动画吗？

就像汉斯的评论所说，不，菜单实际上是窗口。但操作系统本身会为您处理所有细节，创建菜单、显示项目、执行动画等。您所要做的就是使用与[菜单相关的 API 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/ff468865.aspx)。这真的很简单，而且效果很好。

您可以通过自己创建窗口并应用自己的动画来创建自己的菜单。但我又问：为什么？

# pascal - Pascal：在类段错误上调用空方法

> ID：15961163
> 
> 赞同：0
> 
> 时间：2013-04-12T00:31:19.880
> 
> 标签：pascal, freepascal, delphi

我有一个非常严酷的课程。

```
unit StuffClass;

{$mode objfpc}{$H+}

interface

type
  TStuffClass = class
    public
      procedure Update;
  end;

implementation

procedure TStuffClass.Update;
begin

end;

end. 
```

创建它的一个实例，并调用它的`Update`过程会导致程序 SIGSEGV..

什么..？它完全没有做任何事情。

我正在使用 Freepascal (& Lazarus) 32 位版本。

为什么这样做？

编辑：这是调用位：

```
//Creating it
constructor TEngine.Create(TV: pSDL_Surface);
begin
  Self.TV := TV;
  Self.StuffClass.Create;
end;

function TEngine.Update: Boolean;
begin
  WriteLN('Test');
  SDL_PumpEvents;

  Self.StuffClass.Update; //Crashes here.
  Update := True;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:36:48.330

你创造它是错误的。

您需要将返回的对象实例存储到一个变量中，然后改用该变量（引用）：

```
constructor TEngine.Create(TV: pSDL_Surface);
begin
  Self.TV := TV;
  Self.StuffClass := TStuffClass.Create;
end; 
```

现在您的其余代码可以使用它：

```
procedure TEngine.SomeOtherProcedure;
begin
  Self.StuffClass.Update;
end; 
```

# php - PHP比较工作时间

> ID：15961164
> 
> 赞同：0
> 
> 时间：2013-04-12T00:31:25.767
> 
> 标签：php, html, mysql

我正在创建一个 HTML 表格，它以两种不同的方式显示员工时间的分配。第一种方式，是一个ajax更新的队列，显示当前员工的行踪，完成。

第二种是用户可以输入过去“分配”的表格。现在，因为我的业务是 24/7，我决定将所有时间存储为 mysql 中的日期时间，所以我可以得到以下区别：

`2013-04-11 21:59:29`和`2013-04-12 01:52:29`

这是正在填写的表格：

```
 <form action="mafs.php" method="post" id="form1" name="form1" class="">     

                    <table id="tbl_past_allocation">
                      <tr>
                        <td class="txt-right" style="font-size:11px;">Employee Name</td>
                        <td ><input placeholder=" John Doe" style="width:100px; border-radius:10px;" type="text" name="peename" id="peename" /></td>
                      </tr>
                      <tr>
                        <td class="txt-right" style="font-size:11px;">Home Department</td>
                        <td>          <select style="width:140px; border-radius:10px;" name="phomedept">

                <option value="select">Select Department</option></center>
                <option value="ADC/NFC Shipping Department">ADC/NFC Shipping Department</option>
                <option value="Administration">Administration</option>
                <option value="Receiving Department">Receiving Department</option>
                <option value="Cable">Cable Department</option>
                <option value="Department">CPM Department</option>
                <option value="Dispatch Clerk">Dispatch Clerk</option>
                </select></td>
                      </tr>

                      <tr>
                        <td class="txt-right" style="font-size:11px;">Sent to Department</td>
                        <td>          <select style="width:140px; border-radius:10px;" name="psentdept">

                <option value="select">Select Department</option></center>
                <option value="ADC/NFC Shipping Department">ADC/NFC Shipping Department</option>
                <option value="Administration">Administration</option>
                <option value="BP Receiving Department">BP Receiving Department</option>
                <option value="Cable Department">Cable Department</option>
                <option value="CPM Department">CPM Department</option>
                <option value="Dispatch Clerk">Dispatch Clerk</option>
                <option value="Inventory Control Department">Inventory Control Department</option>
                <option value="IRM Shipping Department">IRM Shipping Department</option>
                <option value="Kitting Department">Kitting Department</option>
                <option value="Lead">Lead</option>
                <option value="LSC Receiving Department">LSC Receiving Department</option>
                <option value="LSC Shipping Department">LSC Shipping Department</option>
                <option value="NAR E&O Department">NAR E & O Department</option>
                <option value="Non-Conformance Department">Non-Conformance Department</option>
                <option value="Performance Department">Performance Department</option>
                <option value="Quality Auditors">Quality Auditors</option>
                <option value="Quality Department">Quality Department</option>
                <option value="Returns Department">Returns Department</option>
                <option value="Software Department">Software Department</option>
                <option value="Special Ops Team">Special Ops Team</option>
                <option value="Supervisors">Supervisors</option>
                <option value="Training/Meetings/Projects">Training/Meetings/Projects</option>

                </select></td>
                      </tr>

                       <tr>
                        <td class="txt-right" style="font-size:11px;">Time Sent</td>
                    <td ><input placeholder=" mm-dd-yy hh:mm:ss" style="width:140px; border-radius:10px;" type="text" name="ptimesent" id="ptimesent" /></td>
                      </tr>

                      <tr>
                        <td class="txt-right" style="font-size:11px;">Time Returned</td>
             <td ><input placeholder=" mm-dd-yy hh:mm:ss" style="width:140px; border-radius:10px;" type="text" name="ptimereturned" id="ptimereturn" /></td>
                      </tr>

                    </table>
                    <!--tbl_equipment_details closed-->
                            <div>
         <input class="button" value="Submit Record" name="pastadd" type="submit" style="width:300px; cursor:pointer; margin-top:5px;">
                            </div>  
                            </form> 
```

我在这方面遇到了一些不同的问题。

1.  首先，我很好奇哪种格式最适合存储这种类型的时间。

2.  用户在表单中输入此信息最容易的是什么？4个单独的输入然后将它们连接在一起？或 2 只要求他们以指定的格式输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:16:18.273

我认为单独的输入是最用户友好且最不容易出错的，因为它们都是选择框。然后将这些值连接在一起，就我个人而言，将它们转换为时间戳。时间戳也是 24/7 兼容的。:)

我总是使用 unix 时间戳来保存我的 GMT 日期。然后比较它们是简单的数学。

```
<?php

//
// Some comparison stuff
//

// 1 day = 86400 seconds
// mktime returns a unix timestamp.
$date1 = mktime(0, 0, 0, 1, 1, 2013); // Jan. 1st, 2013
$date2 = mktime(0, 0, 0, 1, 15, 2013); // Jan. 15th, 2013

// Get the difference
$diff = ($date2 / 86400) - ($date1 / 86400); // 14

echo $diff;

//
// Some conversion stuff
//
// Use mktime([$hour, $min, $sec, $mon, $day, $year]) if you have 
// a specific date you want converted into a timestamp, else use 
// time(), which is the current timestamp.
//
// Convert to human readable format
// 
$datetime = date("H:i:sa - M jS, Y", $timestamp); // $timestamp optional

echo $datetime; // e.g. 4:23:46pm - Jan 1st, 2013

?> 
```

PS 不要将我对“unix”时间戳的使用与 mysql 数据类型 TIMESTAMP 混淆。unix 时间戳是自 1970 年 1 月 1 日以来经过的秒数（作为整数）（？我相信？）。

// MySQL TIMESTAMP 数据类型。

```
The TIMESTAMP data type is used for values that contain both date and time parts.   
TIMESTAMP has a range of '1970-01-01 00:00:01' UTC to '2038-01-19 03:14:07' UTC. 
```

如果我做了任何不正确的假设，请不要犹豫纠正我。谢谢！

# python - 计算两个字符串之间的单词数python regexp

> ID：15961166
> 
> 赞同：1
> 
> 时间：2013-04-12T00:31:28.107
> 
> 标签：python, regex

我想检查一个较大字符串中两个字符串之间的单词数是否<n。例如，假设我有一个字符串，如“一只快速的棕色狐狸跳过懒狗”。我想看看字符串“brown fox”和“lazy dog”之间的距离是否在较大的字符串中<5。什么是合适的python正则表达式？

我按照[链接](http://www.powergrep.com/manual/xmpnear.html)试过了。我的代码是

```
s='a quick brown fox jumps over the lazy dog'
m=re.search("'brown fox'\W+(?:\w+\W+){1,4}'lazy dog'",s) 
```

但没有匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T00:35:13.677

您正在尝试匹配单引号，但字符串中没有：

```
>>> re.search("brown fox\W+(?:\w+\W+){1,4}lazy dog", s)
<_sre.SRE_Match at 0x3045850>

>>> re.search("brown fox\W+(?:\w+\W+){1,3}lazy dog", s)
<_sre.SRE_Match at 0x3045920>

>>> re.search("brown fox\W+(?:\w+\W+){1,2}lazy dog", s)
(None) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T00:35:41.293

尝试`brown fox\s+(\S+\s+){0,4}lazy dog`

# ios - 有没有办法使用私有 API 在 iOS 上自行卸载应用程序？

> ID：15961174
> 
> 赞同：3
> 
> 时间：2013-04-12T00:32:09.357
> 
> 标签：ios, iphone-privateapi

通常的免责声明：不应该去 AppStore。这是一个实验。

我正在寻找一些允许卸载应用程序本身的 API。如果它允许卸载第三方应用程序，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:56:58.023

我没有对此进行测试，但它看起来应该可以工作，因为它用于`NSFileManager`执行整个应用程序目录的简单删除

```
NSError *err;
[[NSFileManager defaultManager] removeItemAtPath:[[[NSBundle mainBundle] bundlePath] stringByDeletingLastPathComponent] error:&err];
if (err) {
    NSLog(@"%@", err);
}
else{
    NSLog(@"success");
} 
```

# c++ - 使用 warpPerspective() opencv 生成道路的俯视图

> ID：15961179
> 
> 赞同：5
> 
> 时间：2013-04-12T00:32:45.023
> 
> 标签：c++, opencv

我正在尝试实施**逆透视映射**来计算到道路上另一辆车的距离。我知道在应用函数之前我需要生成一个包含源点和目标点的变换矩阵`warpPerspective()`，但我不知道如何计算目标点。

我在这个论坛和其他网站上搜索过，但我无法将第一张图片转换为第二张图片：

[![图 1](https://i.stack.imgur.com/qvjT2.png)](https://i.stack.imgur.com/qvjT2.png)
[（来源：[shanetuohy.com](http://shanetuohy.com/fyp/Images/img.png)）]

[![图 2](https://i.stack.imgur.com/Q4QF5.png)](https://i.stack.imgur.com/Q4QF5.png)
[（来源：[shanetuohy.com](http://shanetuohy.com/fyp/Images/IPMim.png)）]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T10:55:47.877

您想要实现的目标要求您计算地平面、其在相机观察到的图像中的位置以及其在鹰视图中的位置之间的全像。

传统上，这是通过在大多数计算机视觉管道中提取特征（角点或关键点）来处理的，但这在这里是不切实际的：道路上没有特征（或变化的特征）。

您可以做的是在校准步骤中计算这些单应性，过程如下：

1.  将相机放在目标车辆上。将已知的矩形图案（通常是棋盘）放在车前的平坦地面上。如果您想要公制距离，那么您还需要知道图案的大小，否则您将只测量相对距离。

2.  使用此设置拍摄校准图案的照片。

3.  在图案的图像中，您需要检测它。这可以通过多种方式完成：如果您有图案的参考图像，您可以自动检测它，或者您可以手动单击 4 个外角。这将为您提供至少四个点对应（图案的每个外角对应一个）。点对应关系是在图像点（例如，4 个角）和参考位置之间建立的，参考位置是所述点在图案的参考图像中的位置（如果 oyu 有一个），或者是您想要的位置在鹰视图中点。

4.  从对应关系中，估计一个单应性`H`。`H`是一个 3x3 矩阵（请参阅任何计算机视觉参考资料，无论是在线还是教科书）。

这将向您输出相机所看到的内容与校准图案的参考位置之间的转换。如果您将图案的正面平行视图或其在鹰视图中的所需坐标作为参考，您就会得到您正在寻找的单应性。如果没有，您需要估计第二个单应性并将它们的结果链接起来。

请注意，在[Gary Bradski 的 Learning OpenCV 书中](http://shop.oreilly.com/product/9780596516130.do)考虑了此应用程序。你可以在书中阅读更多关于它的信息，并且很可能在网上找到原始代码。

# sql - 逗号分隔的 IN 语句中的最大项目数

> ID：15961182
> 
> 赞同：2
> 
> 时间：2013-04-12T00:33:35.413
> 
> 标签：sql, sql-server, tsql

一个简单的问题，但我认为它值得在这里给出答案。

我有一个 T-SQL 语句：

```
select Name
from MyTable
where ID IN (1,2,3,4,5,.....) 
```

在 SQL 中断之前，我可以在此选择中放入多少个逗号分隔的 ID？会断吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T01:09:39.810

列表的最大长度仅受最大批处理大小的限制，即 65536 个网络数据包。默认情况下，网络数据包为 4 KB。这样就产生了大约 268 MB 的 T-SQL 文本。如果每个元素的平均长度为 10 位，包括分隔符在内，`,`您可以在其中放置大约 2500 万个单独的值，仍然为查询的其余部分留出空间。

请参阅：[SQL Server 的最大容量规格](http://msdn.microsoft.com/en-us/library/ms143432.aspx)

# postgresql - 带有触发器的 Postgres 分区管理。问题更改表

> ID：15961183
> 
> 赞同：2
> 
> 时间：2013-04-12T00:33:35.770
> 
> 标签：postgresql, triggers, plpgsql, database-partitioning, postgresql-9.2

**简短的故事：** 我有一个分区的 postgres 数据库，其中有一个表来跟踪分区和触发器。触发器需要更改分区表上的约束（它们的valid_date [daterange] 会根据另一个分区的valid_date 更改）并且最好能够删除表，但这会导致错误，因为触发器链正在使用这些表。

> ```
> cannot ALTER TABLE "core_geometryrecord_8_2" because it is 
>     being used by active queries in this session 
> ```

**完整的问题：** **我正在对我的模式和触发器架构进行彻底的解释，以防万一，或者有人想知道为什么我觉得需要一个“复杂”的系统，尽管它可能没有必要。**

我正在重构一个大型几何数据数据库，以使其更容易和更快地使用。旧系统具有保存相关几何的“几何表”（美国的 IE 县）。数据实际上应该按“date_valid”和“geometrytable_id”分组。

我们决定使用带有 date_valid（日期范围）和 geometrytable_id（外键）约束的 postgres 分区。

因为日期很敏感，并且需要大量的簿记才能保持正确，所以我亲自尝试使用触发器管理大部分数据库（我已经知道我需要一个分区表的插入触发器，所以为什么不这样做）。

我设计了一组触发器来管理分区列表并在您插入或删除几何图形时进行所有簿记。这就是他们所做的。

*   在插入分区列表表时，创建分区表并应用约束。如果某个日期的 partitionvalid 与这个新的日期重叠（呼叫更新触发器），则修剪它。如果有一个分区在此日期之后的日期有效，则将新分区的结束日期修剪为下一个分区的开始日期（保持连续的时间线）。
*   从分区列表表中删除时，删除分区表。重新计算已删除分区（如果有）周围的 partition_list 条目（调用更新触发器）的日期范围，以使日期连续。
*   在更新分区列表表时，DROP OLD DATE CONSTRAINT，将分区表中所有行的 date_valid 更改为分区的新 date_valid 值，然后用新日期创建 DATE CONSTRAINT（约束是项目具有与分区完全相同的 date_valid ）。
*   在插入geometryrecord（分区表）时，找到应该使用的分区，或者插入到分区列表表中（TRIGGERS ON INSERT）。将 NEW 插入正确的分区。
*   在从几何记录中删除时，如果分区表现在为空，则从分区列表表中删除分区条目（CALLS DELETE TRIGGER）。

如果我在链中的任何触发器中完全触摸过它，它就会因为试图以任何方式改变桌子而对我生气。如果我直接插入到该表中，分区列表表的触发器可以完美地工作，但是从几何表中删除（它调用相同的触发器）会翻转，即使它所做的只是一个选择（查看分区表是否为空）。插入分区几何表也可能导致问题，因为我必须删除约束才能更改行的 date_valid。

必须有一种方法可以做到这一点，我只是不明白。（我还必须使删除表变得更加被动，“将其标记为通过 cron 作业删除”，因为我无法从源自我要删除的表的触发器调用中删除该表。）

非常欢迎任何建议。我简直不敢相信没有人需要做这样的事情，所以我想我只是不知道我在做什么:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T20:12:03.213

所以在四处挖掘和试验之后，我弄清楚了我需要什么，并认为我会记录我的发现。

这是有关基本 postgres 分区如何为任何感兴趣的人工作的文档页面：[http ://www.postgresql.org/docs/9.1/static/ddl-partitioning.html](http://www.postgresql.org/docs/9.1/static/ddl-partitioning.html)

要知道的关键点是，对于每个分区，您必须设置约束来指定可以在分区中找到的内容（拆分 id 以便每个表中只有 200,000 条记录只需要每个表一个约束）。这使得当您查询主表时，它会根据所有子表的约束快速检查请求。只有查询落在表约束范围内的表才会被进一步查询。如果您正确执行此操作，则只有一个表被真正查询。

**至于我学到了什么：**

首先，我认为根本不可能从自己的触发器中删除表。我对此的解决方案只是将其标记为通过其他机制删除（例如稍后要删除的表格）。问题在于它会一直存在，直到 Cron 作业运行。由于从自己的触发器更改表也是不可能的，因此该表仍将是一个分区，只是标记为稍后删除。如果您的分区正确，这可能不会导致任何问题。在我的情况下，可以有两个分区重叠（一个被标记为要删除，一个应该在那里）。这样做的副作用是，对于指定可能在这些表中的任何一个表中的内容的查询将同时命中这两个表。这对我来说很好，直到 Cron 工作到来，所以我很好，但有些情况可能不适用于这个问题。

其次，我意识到改变他们没有写入的表的插入工作正常，但是触发相同触发器链的删除和更新失败，因为会话正在使用这些表。我认为这很疯狂，但真正的问题是我在日期和外键上进行了分区，但被记录的 id 删除了。这导致 postgres 检查所有表的所有约束，这使其无法了解要使用哪个表，因此它只是检查了所有表。为了使删除工作，我所要做的就是指定我分区的信息，这样它就知道要查看哪个表，而不是扫描整个表集以查找 id。

**TLDR**如果您在一些任意（一组）列上对 postgres 表进行分区，请确保通过提供分区上的列来删除或更新记录，以便 postgres 可以知道要查看哪个表而不必扫描整个放。

# python - 在列表中查找唯一元组（忽略顺序），同时在 python 中保留其他元组的原始顺序？

> ID：15961185
> 
> 赞同：2
> 
> 时间：2013-04-12T00:33:38.437
> 
> 标签：python, tuples, list-comprehension

假设我有一个看起来像这样的列表：

```
a = [(1,2),(3,1),(2,1),(4,5),(9,3),(1,3)] 
```

之后，我想要看起来像这样的东西：

```
b = [(1,2),(3,1),(4,5),(9,3)] 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T00:50:58.620

```
b = []
seen = set()
for t in a:
    s = tuple(sorted(t))
    if s not in seen:
        seen.add(s)
        b.append(t) 
```

或者

```
seen = set()
b = [t for t in a if tuple(sorted(t)) not in seen and not seen.add(tuple(sorted(t)))] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T02:53:18.670

修改@Pavel 的解决方案，`frozenset`使其更高效，因为它避免了排序并且通常在原始速度上更快。这应该`O(nm)`与@Pavel 进行比较，后者应该是`O(n * m log(m))`列表`n`的`m`长度和每个元组的长度。

```
>>> a = [(1,2),(3,1),(2,1),(4,5),(9,3),(1,3)]
>>> b = []
>>> seen = set()
>>> for t in a:
        s = frozenset(t)
        if s not in seen:
            seen.add(s)
            b.append(t)

>>> b
[(1, 2), (3, 1), (4, 5), (9, 3)] 
```

这是差异的证明：

```
from timeit import timeit

def dosorted(a):
    b = []
    seen = set()
    for t in a:
        s = tuple(sorted(t))
        if s not in seen:
            seen.add(s)
            b.append(t)
    return b

def dofrozenset(a):
    b = []
    seen = set()
    for t in a:
        s = frozenset(t)
        if s not in seen:
            seen.add(s)
            b.append(t)
    return b

import random
a = [(1,2),(3,1),(2,1),(4,5),(9,3),(1,3)]
b = [tuple(random.randrange(3) for x in range(10)) for x in range(10)]
c = [tuple(random.randrange(3) for x in range(20)) for x in range(20)]

setup = '''
from __main__ import a, b, c, dosorted, dofrozenset'''

print timeit(setup=setup, stmt='dosorted(a)')
print timeit(setup=setup, stmt='dosorted(b)')
print timeit(setup=setup, stmt='dosorted(c)')
print timeit(setup=setup, stmt='dofrozenset(a)')
print timeit(setup=setup, stmt='dofrozenset(b)')
print timeit(setup=setup, stmt='dofrozenset(c)') 
```

* * *

```
9.23814695723 # dosorted(a)
26.8939069072 # dosorted(b)
86.6305864991 # dosorted(c)

5.99305211975 # dofrozenset(a)
10.708619182  # dofrozenset(b)
25.5252673175 # dofrozenset(c) 
```

* * *

您可以添加更多调整以使这些更快，例如使用列表理解，但这很快就会变得丑陋。可以与最后一种结合使用的另一种常见技术是：

```
seen_add, b_append = seen.add, b.append # speeds up name lookup 
```

然后可以从那时起直接调用这些，但请记住，过早优化是邪恶的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T00:40:52.973

只需把你的清单，做成一个集合，然后再把它变成一个清单

```
>>>a = [(1, 2), (3, 1), (2, 1), (4, 5), (9, 3), (1, 3)]
>>>sorted_tuples = [tuple(sorted(tuple_)) for tuple_ in a]
>>>list(set(sorted_tuples))
[(1, 2), (4, 5), (3, 9), (1, 3)] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-31T10:02:02.327

在 Python 3.7+（即字典维护插入顺序的版本）中，您可以简单地将列表转换为由元组的 freezesets 键控的字典并获取其值：

```
a = [(1,2), (3,1), (2,1), (4,5), (9,3), (1,3)]
d = {}

for x in a:
    d.setdefault(frozenset(x), x)

print(list(d.values()))  # [(1, 2), (3, 1), (4, 5), (9, 3)] 
```

# java - 如何从 ArrayList 中获取特定的子类？

> ID：15961189
> 
> 赞同：1
> 
> 时间：2013-04-12T00:34:15.213
> 
> 标签：java

我有一个名为“Entity”的类，它由“Player”和“Slime”暴民等其他类扩展。在另一个名为“Level”的类中，我有一个名为实体的 ArrayList，现在我将这些单独的类添加到 ArrayList。

```
for (Entity entity : entities) {
    entities.add(entity);
} 
```

在循环遍历 ArrayList 时，如何检查当前对象是 Player 还是 Slime？

```
for (Entity entity : entities) {
    if (entity == Player) {
        System.out.println("Player class!");
    }
} 
```

显然这不起作用，但我该怎么做呢？谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:35:58.540

使用`instanceof`检查对象类型的运算符。

```
for (Entity entity : entities) {
    if (entity instanceof Player) {
        System.out.println("Player class!");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:36:05.883

您可以使用`instanceof`运算符来检查对象的类型。

**例子**

```
if(entity instanceof Slime)
{
    // Is a mob.
} 
```

**解释**

有关如何`instanceof`工作的更详细信息，请查看此[链接](http://www.dreamincode.net/forums/topic/90094-instanceof-keyword/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T00:36:28.040

你可以做类似的事情

```
if(entity instanceof Player)
//do something 
```

# ios - 错误：尝试调用实例方法时使用未声明的标识符

> ID：15961190
> 
> 赞同：1
> 
> 时间：2013-04-12T00:34:16.227
> 
> 标签：ios, identifier

我知道这是我忽略的简单事情，但我终其一生都无法弄清楚出了什么问题。任何人都可以说明情况吗？将不胜感激。

```
#import "OnlineLayerViewController.h"

#import "MapBox.h"

#define kNormalMapID @"ianbruton.map-8uhua25t"
#define kRetinaMapID @"ianbruton.map-8uhua25t"

@implementation OnlineLayerViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    RMMapBoxSource *onlineSource = [[RMMapBoxSource alloc] initWithMapID:(([[UIScreen mainScreen] scale] > 1.0) ? kRetinaMapID : kNormalMapID)];

    RMMapView *mapView = [[RMMapView alloc] initWithFrame:self.view.bounds andTilesource:onlineSource];

    //THIS IS WHERE I'M GETTING THE ERROR
    [showDevicePosition : mapView];

    mapView.zoom = 14;

    mapView.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;

    //makes place names legible on retina devices
    mapView.adjustTilesForRetinaDisplay = YES;

    //Creates a point to draw
    RMPointAnnotation *annotation = [[RMPointAnnotation alloc] initWithMapView:mapView
                                                                  coordinate:mapView.centerCoordinate
                                                                  andTitle:@"Hello, world!"];

    //Draws point
    [mapView addAnnotation:annotation];

    [self.view addSubview:mapView];
}

//THIS IS THE METHOD I'M TRYING TO CALL
- (void)showDevicePosition : (RMMapView *) mapView
{
    mapView.centerCoordinate = mapView.userLocation.location.coordinate;
}

@end 
```

# oracle - Amazon RDS Oracle 是否支持分区？

> ID：15961192
> 
> 赞同：0
> 
> 时间：2013-04-12T00:34:24.840
> 
> 标签：oracle, amazon-rds, database-partitioning

最近我正在评估将当前应用程序迁移到 Amazon RDS Oracle 的可行性，因为数据规模越来越大。

我想知道 Amazon RDS Oracle 是否支持分区。如果是，如何配置？如果不是，那么如果数据规模超过了单实例的限制，我该如何扩展到多实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-13T21:33:53.113

没有亚马逊 RDS 不支持分区。

我的团队和 RDS 团队都在努力，RDS 团队无法达到 8 核 16 GB 机器的性能，即使他们无法执行。

所以我的结论是，如果我们有分区，那么不要选择 RDS。

# ios - iOS 框架接收 Apple 推送通知

> ID：15961193
> 
> 赞同：2
> 
> 时间：2013-04-12T00:34:31.257
> 
> 标签：ios, objective-c, frameworks, push-notification, apple-push-notifications

我有一个自定义构建的 iOS 框架，我希望将其分发给其他开发人员。问题是我希望我的服务器将 Apple 推送通知 (APNS) 传送到他们的应用程序，但是我们都无法控制其他人的 Apple Portal。

我正在寻找确定这是否可能，但需要一些帮助来进行头脑风暴。

我的想法：

*   将我的 CSR 交付给开发人员
*   让开发人员通过 Apple Portal 生成苹果证书并返回/上传到我的服务
*   使用他们的 .cert 和我的 .p12 创建 PEM
*   像往常一样使用 PEM 来传递推送通知（我的框架将使用适当的 UIAppDelegate 方法进行注册）

这是安全/安全的吗？我是否通过免费提供 CSR 来传递任何绝密信息？（如果有必要阻止一些窥探，我可以把它放在付费墙后面。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:41:08.593

Urban Airship 所做的正是您所描述的您正在尝试做的事情；可以说他们是“中间人”并处理推送通知，因此开发人员不必担心。他们做多个平台，而不仅仅是 iOS。[http://urbanairship.com](http://urbanairship.com)

所以它是安全的，具体取决于您为服务器实施的安全级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:31:43.350

为什么要将 CSR 交付给应用程序开发人员？

应用程序开发人员应为其应用程序创建一个推送证书，并向您发送 p12/PEM 文件及其密码。这就是您的服务器为他们的应用发送推送通知所需的全部内容。

如果您滥用他们的证书（例如，通过发送他们的应用垃圾邮件通知），他们可以撤销证书以阻止您的服务器发送更多通知。

由于苹果最近更改了他们的证书创建门户，现在可以为同一个应用程序创建多个证书。这意味着应用程序开发人员可以让多个提供商向他们的应用程序发送通知，并为每个提供商分配不同的推送证书。这将允许撤销一个提供者的证书而不影响其他提供者。

# android - Android UI线程的标识符

> ID：15961197
> 
> 赞同：1
> 
> 时间：2013-04-12T00:35:05.573
> 
> 标签：android, android-ui

我在Android平台写代码的时候，经常要注意UI的操作，只能在UI Thread中进行，我清楚的知道为什么GUI使用单线程来操作UI的widget，以防多线程线程同时操作。但是我想知道android系统如何区分UI线程和我们自己的非UI线程。UI线程有标识符吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:43:06.547

如果您想知道您是否在 UI 线程中，您可以执行以下操作：

```
if("main".equals(Thread.currentThread().getName())) {} 
```

因此，要回答您的问题，是的，UI 线程确实有一个标识符：“main”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:40:43.987

您从 MainActivity 调用的任何进程都在 UI 线程上运行。如果您不想在 UI 线程上运行某些东西，请在 AsyncTask 或后台线程中启动它。这将防止它阻塞用户界面，因此用户仍然可以与您的应用程序交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:09:55.893

此信息由 Android 框架保存，可以在其中进行调查。

但是，当您开发应用程序时，最佳实践是您应该避免判断或反向工程框架内部工作和调整您的应用程序。相反，您应该查看您的需求并找到实现它的方法。

在您的情况下，很明显您需要在 GUI 线程上执行一段代码。为此，您不需要将您的线程设为 GUI 线程。您可以通过以下方式之一执行此操作：

1.  使用 Runnables 并将您的代码发布到主要活动，例如；

    myActivity.post（新可运行（）{

    ```
    @override
    public void run(){
        // your code to be run on GUI thread
    } 
    ```

    )};

2.  如果活动不可访问，那么您可以找到应用程序的主处理程序并发布到它。就像是;

    处理程序 appHandler = new Handler(context.getMainLooper()); appHandler.post（新可运行（....

3.  您可以使用 runOnUIThread()

[http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)

# sql - 评估重复行时在 SQL 上返回 True False

> ID：15961203
> 
> 赞同：2
> 
> 时间：2013-04-12T00:35:36.020
> 
> 标签：sql, stored-procedures

我想创建一个仅在发生以下情况时返回 true 或 false 的存储过程：

我有一张桌子叫`GAS_cards`

```
idCard INT PK
idCardType INT 
```

我指定了各种身份证（到目前为止我有这个）

```
CREATE PROCEDURE [dbo].[GAS_cards_spEvaluateCards_many] 
    @cardString VARCHAR(100)
AS 

SELECT * 
FROM GAS_cards 
WHERE (@cardString = '-1' OR ',' + @cardString + ',' LIKE '%,' + CONVERT(VARCHAR, idCard) + ',%') 
```

我在这里要做的是以下评估。假设查询返回 10 行。一切都取决于`idCardType`. 如果至少一个值等于 3，则其余的也必须为 3；否则它应该返回一个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-13T08:49:16.330

在接受的答案中一切正常，但出于性能原因，如果这个单一结果，最好使用 RETURN 语句。我们有的例子`sp_checkexist`：

```
IF EXISTS(...) 
RETURN 0 
ELSE 
RETURN 1 
```

在其他地方，我们以这种方式检查 TRUE 或 FALSE 条件：

```
IF ( sp_checkexist(@variable)=1 ) 
... statement if TRUE
else
... statement if FALSE 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:03:23.570

试一试。我没有可用于测试的 SQL 实例，但在大多数情况下，我认为它可以解决问题。基本上，我采用 idCard 字符串值，然后将其添加到动态 sql 中以创建一个 id 表。然后我将表中的行数与值为 3 的行数进行比较。如果它们相等，则选择 1，否则选择 0。

```
CREATE PROCEDURE [dbo].[GAS_cards_spEvaluateCards_many] 
    @cardString VARCHAR(100)
AS 

--Temporary table for our cards
CREATE TABLE #Cards
(
 idCard int,
 idCardType int 
)

DECLARE @Sql nvarchar(max);

SET @Sql = 'INSERT INTO #Cards 
SELECT idCard, idCardType FROM GAS_cards
WHERE idCard in (' + @cardString + ')';

IF EXISTS(
SELECT * FROM #Cards c1
LEFT OUTER JOIN #Cards c2
   ON c1.idCard = c2.idCard
   AND c2.idCardType = 3 -- Your card type
WHERE
   c2.idCard IS NULL)
  SELECT 0
ELSE
  SELECT 1 
```

我想你也许可以使用

```
SET @TotalRows = @@rowcount 
```

但我不太确定动态 sql 的范围是否不会让您看到计数。另外，如果您要像您说的那样引入字符串，那么如果没有动态sql，我看不到如何做到这一点。该过程的输出参数也可能很好。

# c# - SqlDataAdapter 在设置批量大小时给出参数名称无效错误

> ID：15961208
> 
> 赞同：4
> 
> 时间：2013-04-12T00:36:10.377
> 
> 标签：c#, batch-processing, sqldataadapter

我正在尝试批量插入/更新 SqlDataAdapter。当我设置 UpdateBatchSize = 1 时，它可以工作，但将其设置为 2 会出现异常“指定的参数名称 'Id' 无效。”。

```
using (var sqlDataAdapter = new SqlDataAdapter
{
    UpdateBatchSize = 2
})
using (var connection = new SqlConnection("Data Source=server;Initial Catalog=DB;Integrated Security=True"))
using (var command = new SqlCommand("INSERT INTO Test (Id) VALUES (@Id)", connection)
{
    UpdatedRowSource = UpdateRowSource.None
})
{
    command.Parameters.Add("Id", SqlDbType.Int).SourceColumn = "Id";
    sqlDataAdapter.InsertCommand = command;

    var table = new DataTable("Test");
    table.Columns.Add("Id");
    table.Rows.Add(1);
    table.Rows.Add(2);
    sqlDataAdapter.Update(table);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:36:04.660

在反编译 SqlDataAdapter 并使用堆栈跟踪后，我来到了这一行。

```
if (!SqlCommandSet.SqlIdentifierParser.IsMatch(sqlParameter.ParameterName))
    throw ADP.BadParameterName(sqlParameter.ParameterName); 
```

事实证明，通常您可以从 SqlParameter 名称中省略 @，但是在执行此批处理时，它需要它。很奇怪。正确的线变成

```
command.Parameters.Add("@Id", SqlDbType.Int).SourceColumn = "Id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T00:47:24.043

```
 {
   sqlDataAdapter.Update(table);

 } 
```

这个参数对sqlDataAdapter无效，需要输入DataSet名后跟表名，我觉得应该是这样的：

```
 {

   sqlDataAdapter.Update(youDataSet,"YourTable");
    } 
```

# objective-c - 无法通过 POST 从objective-c 发送数据

> ID：15961212
> 
> 赞同：0
> 
> 时间：2013-04-12T00:36:23.473
> 
> 标签：objective-c, django, post, nsurlconnection

我正在为 iPhone 开发一个应用程序，但我被困在一个电话中，我必须通过 POST 发送数据，django 网络程序员告诉我应用程序必须接收

```
param_one = request.POST['param_one']
param_two = request.POST['param_two'] 
```

但我无法发送任何数据...

我正在学习objective-c，所以请你告诉我如何用一个例子来做？

PS：所有其他不发送任何数据或通过 url（GET 方法）传递数据的调用都可以正常工作，所以我正在正确建立连接

这是我正在使用的代码：

```
NSMutableDictionary *dict = [NSMutableDictionary dictionary];
[dict setObject:@"somename" forKey:@"user"];
NSString *jsonString = [dict JSONRepresentation];
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
NSMutableURLRequest *  request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://web.com/custom/url/call/"]];
[request setValue:jsonString forHTTPHeaderField:@"json"];
[request setHTTPMethod:@"POST"];
[request addValue:csrf forHTTPHeaderField:@"X-CSRFToken"];
[request setHTTPBody:jsonData];
senddata = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:40:16.757

您可能应该添加：

```
[request setValue:@"application/json; charset=UTF-8" forHTTPHeaderField:@"Content-Type"]; 
```

然后服务器将知道您发送的是 UTF-8 编码的 JSON，并且它能够适当地解析它。否则它只会得到一个无形的数据块。

除非出于调试目的，否则将 JSON 字符串同时放入标头和正文是非常奇怪的。

# sql - SQL 多个外键作为主键

> ID：15961213
> 
> 赞同：8
> 
> 时间：2013-04-12T00:36:26.150
> 
> 标签：sql, sql-server, sql-server-2008, foreign-keys, composite-primary-key

如果我声明下表是否隐含暗示两个外键都是唯一的主键，还是我需要做更多的事情来使两个属性都成为主键？

```
CREATE TABLE Report_has_Items
(
    ReportID int REFERENCES Report(ReportID) NOT NULL,
    ItemID int REFERENCES Item(ItemID) NOT NULL
) 
```

本质上，这两个属性都是来自其他表的外键，它们一起将形成一个唯一键。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T00:46:28.403

不，它没有。上表没有主键。如果要将字段用作主键，请使用：

```
CREATE TABLE Report_has_Items(
    ReportID int REFERENCES Report(ReportID) NOT NULL,
    ItemID int REFERENCES Item(ItemID) NOT NULL,
    PRIMARY KEY (ReportID, ItemID)
) 
```

或类似的东西，具体取决于您的 sql 语言。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T03:03:31.763

让我们命名我们的约束，嗯？

```
CREATE TABLE dbo.Report_has_Items(
    ReportID int NOT NULL,
       CONSTRAINT [FK_RHI_Report] (ReportId) REFERENCES dbo.Report(ReportID),
    ItemID int NOT NULL,
       Constraint [FK_RHI_Item] (ItemId) REFERENCES dbo.Item(ItemID),
    CONSTRAINT [PK_RHI] PRIMARY KEY (ReportID, ItemID)
) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T00:49:28.013

我不确定我是否完全理解您的问题，但我假设您正在尝试创建复合主键（具有多个属性的主键）。您可以执行以下操作。

```
CREATE TABLE Report_has_Items(
  ReportID int references Report(ReportID),
  ItemID int references Item(ItemID),
  PRIMARY KEY (ReportID , ItemID )
); 
```

**注意**：这对 (ReportID , ItemID ) 对于表必须是唯一的，并且两个值都不能为 NULL。

[这是一个非常有用的 SQL 查询链接](http://www.w3schools.com/sql/default.asp)

# c++ - 编写函数的基本问题。程序随机跳到结尾

> ID：15961220
> 
> 赞同：0
> 
> 时间：2013-04-12T00:37:19.820
> 
> 标签：c++

我对编写函数很陌生。这是我第一次尝试使用专门用于家庭作业的引用参数调用。该程序应根据用户输入的借款金额、每月还款额和利率来计算还清贷款所需的时间。程序应确保用户输入的付款数字不小于每月利息金额并检查负整数等。

我注释掉的区域是我在尝试将所有这些转换为使用引用参数调用的函数之前的第一次尝试。那时程序运行良好，我得到的输出结果只差一美元。在我像这样重写程序并尝试使其成为一个函数后，程序编译但在询问利率后中断到底部 cout 语句。我假设我的问题是在 interest1 函数中的某个地方，我将百分比转换为小数，但我不知道为什么它会在之后跳过其余的函数。

感谢您在此问题上提供的任何建议或其他任何看起来与程序本身有关的问题。

```
#include <iostream>
#include <fstream>
using namespace std;

double amount();
double interest1();
double pay(double amt, double interest);
void  payoff(double monthly, double Minpayment,double borrow,double interest, double&   
totalinterest,int& month);

int main()
{
 double monthly,month,totalinterest;

 cout << fixed;
 cout <<showpoint;
 cout <<setprecision(2);

double borrow=amount();
double interest=interest1();
double Minpayment=pay(borrow, interest);
void payoff(double monthly,double Minpayment,double borrow,double interest,double&       
totalinterest,int& month);

/*
//   cout << "What is the monthly payment amount? \n";
//   cin >> monthly;
//      if(monthly<Minpayment)
//       {
//          cout << "You must make payments of at least: " << Minpayment++ << endl;
//          cout << "Because your monthly payment is " << Minpayment << endl;
//          cout << "Dont get overwhelmed with debt!!!!!! \n";
//        }
//      else
//
//      {
//         int month = 1;
//         double totalinterest=0;
//         do
//          {
//            double Minpayment=pay(borrow, interest);
//            borrow=(borrow+Minpayment)-monthly;
//            totalinterest=totalinterest+Minpayment;
//            month++;
//          }while(borrow>monthly);
*/  
         cout << "Your debt will be paid off in " << month << " months \n";
         cout <<" with a final payment of " << borrow << endl;

         cout << "You paid " << totalinterest << " in interest. \n";

return 0;
}

double amount()
{
double borrow,amt;
        do
        {
                cout << "How much money do you want to borrow? \n";
                cin >> amt;

        if(amt<1)
        cout << "You must enter a positive number!";

        }while(amt<1);
borrow = amt;
return  borrow;
}

double interest1()
{
double rate;
  do
  {
    cout << "What is the annual interest rate expressed as a percent? \n";
    cin >> rate;
              if(rate<1)
             cout << "You must enter a positive number!";

  }while(rate<1);

double interest = (rate/12)*.01;
return  interest;
}   

double pay(double borrow,double interest)

{

double Minpayment=borrow*interest;
return  Minpayment;  
}

void payoff(double monthly,double Minpayment,double borrow,double interest, double& 
totalinterest,int& month)
{
    cout << "What is the monthly payment amount? \n";
    cin >> monthly;
      if(monthly<Minpayment)
        {
          cout << "You must make payments of at least: " << Minpayment++ << endl;
          cout << "Because your monthly payment is " << Minpayment << endl;
          cout << "Dont get overwhelmed with debt!!!!!! \n";
        }
      else
      {
        int month = 1;
         do
          {
            double Minpayment=pay(borrow, interest);
            borrow=(borrow+Minpayment)-monthly;
            double totalinterest=totalinterest+Minpayment;
            month++;

          }while(borrow>monthly);
       } 
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:40:12.877

调用内部函数时`main`，不再需要指定参数类型：

```
void payoff(double monthly,double Minpayment,double borrow,double interest,double&       
    totalinterest,int& month);  //wrong 
```

应该

```
payoff(monthly, Minpayment,borrow, interest, totalinterest, month); 
```

像你一样定义函数时，你应该把`double&`和`int&`放到函数的参数列表中。

# windows - Ant设置platforms.JDK_1.6.home不带参数

> ID：15961231
> 
> 赞同：2
> 
> 时间：2013-04-12T00:38:58.653
> 
> 标签：windows, ant, properties, java, java-home

我在尝试在 Windows 机器上运行 ant 时遇到问题。我收到以下错误：

```
BUILD FAILED
C:\Users\USER\testing\mercurial\project\NetbeansProject\nbproject\build-impl.xml:111: The J2SE Platform is not correctly set up.
 Your active platform is: JDK_1.6, but the corresponding property "platforms.JDK_1.6.home" is not found in the project's properties files.
 Either open the project in the IDE and setup the Platform with the same name or add it manually.
 For example like this:
     ant -Duser.properties.file=<path_to_property_file> jar (where you put the property "platforms.JDK_1.6.home" in a .properties file)
  or ant -Dplatforms.JDK_1.6.home=<path_to_JDK_home> jar (where no properties file is used) 
```

如果我执行`ant -Dplatforms.JDK_1.6.home=%JAVA_HOME%`它执行得很好，但是，有没有办法避免每次我需要构建程序时添加这个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T03:21:29.580

我认为不可能`ant`在命令行或构建脚本显式加载的属性文件之外设置属性。

如果您正在寻找一种不太冗长的启动方式`ant`，请尝试使用包装`.bat`文件或分配别名`doskey ant=ant "-Dplatforms.JDK_1.6.home=%JAVA_HOME%"`

# html - 绝对位置和边距：自动

> ID：15961232
> 
> 赞同：8
> 
> 时间：2013-04-12T00:39:04.497
> 
> 标签：html, css, position, margin

我有一个小问题，我希望我的页脚与`position: absolute`. 但是我`margin: auto`把它放在屏幕中间不再起作用了。

html:

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv='Content-Type' content='Type=text/html; charset=utf-8'>
        <link rel="shortcut icon" href="../IMAGES/favicon.ico">
        <title>TEST</title>
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="../css/stylesheet.css">
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <img src="../IMAGES/logo.png" />
            </div>
            <div id="logotitel">
                Den Allerstrafste "Ful-Ambi" Live-Band van groot Antwerpen en omstreken!
            </div>
        </div>
        <div id="nav">
            <div id="links">
                <a href="index.php"><div class="link">Home</div></a>
                <a href="wie.php"><div class="link">Wie is wie</div></a>
                <a href="fotos.php"><div class="link">Foto's</div></a>
                <a href="repertoire.php"><div class="link">Repertoire</div></a>
                <a href="links.php"><div class="link">Links</div></a>
                <a href="contact.php"><div class="link">Contact</div></a>
            </div>
        </div>
        <div class="clear"></div>
        <div id="content">
            TEST
        </div>
        <div class="clear"></div>
        <div id="footer">
            <div id="copy">
                Developed by Yoshi &copy vAntstAd
           </div>
       </div>
   </body>
</html> 
```

CSS：

```
/* PAGE LAYOUT */
html
{
        padding: 0px;
        margin: 0px;
}

body
{
        background-image: url(../IMAGES/background.png);
        padding: 0px;
        margin: 0px;
        color: white;
        font-family: 'Source Sans Pro', serif, sans-serif;
}

.clear
{
        clear: both;
}

/* HEADER */
#header
{
        width: 1100px;
        height: 150px;
        background-color: #282828;
        margin: auto;
        border-bottom: solid;
        border-color: red;
}

#logo
{
        width: 283px;
        height: 100px;
        margin: auto;
}

#logotitel
{
        width: 1100px;
        height: 50px;
        line-height: 50px;
        text-align: center;
        font-size: x-large;
}

/* NAV */
#nav
{
        width: 1100px;
        height: 50px;
        margin-top: 25px;
        margin-right: auto;
        margin-left: auto;
        margin-bottom: 25px;
        background-color: red;
}

#links
{
        width: 600px;
        height: 50px;
        margin: auto;
}

.link
{
        width: 100px;
        height: 50px;
        line-height: 50px;
        float: left;
        text-align: center;
        color: white;
        text-decoration: none;
}

.link:hover
{
        color: #282828;
        text-decoration: underline;
}

/* CONTENT */

#content
{
        width: 1100px;
        height: auto;
        margin: auto;
        color: #282828;
        position: relative;
}

/* FOOTER */

#footer
{
        width: 1100PX;
        height: 50px;
        position: absolute;
        bottom: 0;
        margin: auto;
        background-color: #282828;
}

#copy
{
        width: auto;
        float: right;
        margin-right: 5px;
        height: 50px;
        line-height: 50px;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-12T00:44:20.317

由于您知道页脚的宽度（1100 像素），因此您可以将`left:50%;margin-left:-550px`其居中。

**示例：居中一个绝对定位的元素**
[http://jsfiddle.net/vdWQG/](http://jsfiddle.net/vdWQG/)

因此，页脚将变为：

```
#footer
{
    width: 1100PX;
    height: 50px;
    position: absolute;
    bottom: 0;
    left:50%;           /* Add this */
    margin-left:-550px; /* Add this (this is half of #footers width) */
    background-color: #282828;
} 
```

* * *

如果您希望元素在用户向下滚动时粘贴在页面底部，请使用`position: fixed`而不是`position:absolute`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-16T09:40:09.467

要在底部有一个页脚，水平居中，您可以应用以下 CSS：

```
footer{
    width: 100%;
    max-width: 600px;
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    margin: 0 auto;
} 
```

这将使固定元素居中，但也会保持响应，因为当浏览器变得小于页脚宽度时，它会缩小。

有关示例，请参[见此 Fiddle](http://jsfiddle.net/38tjjdpd/4/)

# java - 从 JAR 中读取文件在 Windows 上不起作用

> ID：15961233
> 
> 赞同：5
> 
> 时间：2013-04-12T00:39:09.450
> 
> 标签：java, windows, file, jar, classloader

我正在尝试从打包在 JAR 中的文件以及读取它的类中读取。为此，我使用以下内容：

```
getClass().getClassLoader().getResourceAsStream(file) 
```

当我在 OSX 上创建和运行 JAR 文件时，这工作正常，但如果我在 Windows 上创建和运行 JAR 文件，上面的行返回 null。

我在这里错过了什么吗？如果我在 OSX 上创建 JAR 并在 Windows 上运行它，它工作正常。仅当我在 Windows 上创建 JAR 时才会出现此问题。

编辑：值得一提的是，JAR 文件中没有文件夹层次结构。一切都存储在一个级别，因此读取文件的类和文件本身都在同一个目录中。此外，这就是我在 OSX 和 Windows 上创建 JAR 文件的方式：

```
jar -cmf manifest.mf run.jar *.class file1 file2 
```

编辑 2：我要加载的文件是 java .properties 文件。我认为这不是导致问题的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:04:39.370

以 getClass().getResourceAsStream("/file1") 的方式尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T17:11:38.990

使用文件分隔符时，不要对它们进行硬编码！改用 java.io.File.separator： http: [//docs.oracle.com/javase/7/docs/api/java/io/File.html#separator](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separator)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T00:53:26.767

跳过类加载器部分。只需 getClass().getResource....

# magento - Magento 自定义模型覆盖

> ID：15961238
> 
> 赞同：0
> 
> 时间：2013-04-12T00:40:13.693
> 
> 标签：magento, model, sugarcrm

我是 Magento 的新手，所以请原谅我缺乏知识。我正在按照教程将联系人集成到 Magento 中并将其导入到`SugarCRM`. 本教程更改了 Magento 的核心功能，但我想编写一个模块并保持核心不变。我可以很容易地找到有关覆盖控制器、模型、助手等的信息。但我有一个问题。

例如，想象一下，每次用户在我的网站上注册时，他的联系信息都会导出到 SugarCRM。在保存联系人阶段，在我的模块中，我知道我可以编写特定代码并告诉它需要在完成 Magento 的某些特定核心功能之后或之前运行以保存联系人。
我真正不明白的是，Magento 怎么知道我有一个模块可以在我创建新帐户时执行某些操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:23:58.567

magento 处理这个问题的方式是使用事件/观察者。例如，如果您需要在下订单后将订单信息发送到另一个系统，您可以创建一个自定义模块来观察`sales_order_place_after`。

阅读更多@ [http://codemagento.com/2011/04/observers-and-dispatching-events/](http://codemagento.com/2011/04/observers-and-dispatching-events/)

要获取事件列表，请参阅[https://magento.stackexchange.com/questions/153/where-can-i-find-a-complete-list-of-magento-events](https://magento.stackexchange.com/questions/153/where-can-i-find-a-complete-list-of-magento-events)

有关如何使用观察者创建模块，请参阅[https://stackoverflow.com/a/12696681/1191288](https://stackoverflow.com/a/12696681/1191288)

# perl - 使用 Perl 插入 PostgreSQL 表

> ID：15961240
> 
> 赞同：1
> 
> 时间：2013-04-12T00:40:20.130
> 
> 标签：perl, postgresql

我正在尝试在 PostgreSQL 数据库中自动填充表。不幸的是，我没有让插入语句起作用。

第一行是一个整数 ID，第二列是数字数据类型。我正在使用 Perl 脚本来实现这一点。

我正在使用`rand`创建 0 到 1 之间的随机数的函数。第一个参数是变量`$id`；第二个参数是变量`$count`。

根据计数，该表将填充 ID，后跟一个随机数。

我正在使用 PostgreSQL 9.2.4。

```
-ID | Random_Number
-1 |  0.01
-1 |  0.03
-2 |  0.0566

#!/usr/bin/perl

use DBI;

my $id = <>;
my $count = <>;

my $db_host = 'localhost';
my $db_user = 'postgres';
my $db_pass = '12345';
my $db_name = 'postgres';

my $db = "dbi:Pg:dbname=${db_name};host=${db_host}";

$dbh = DBI->connect($db, $db_user, $db_pass, { RaiseError => 1, AutoCommit => 0 })
        || die "Error connecting to the database: $DBI::errstr\n";

for (my $loop = 0; $loop < $count; $loop++) {
    my $random_number = rand();
    my $loop++;
    my $query = "insert into random_table values($loop,$random_number)";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:56:18.263

这是不必要的复杂。只是：

```
CREATE TABLE random_table(id integer, random_value float); 
```

然后：

```
my $dbh = DBI->connect($db, $db_user, $db_pass,{ RaiseError => 1, AutoCommit => 0 })
my $sth $dbh->prepare("INSERT INTO random_table(id,random_value) SELECT x, random() FROM generate_series(?,?);")
my $result = $sth->execute(0, $count); 
```

（未经测试，但我很确定这是正确的）。

顺便说一句，你*真的*需要：

```
use strict;
use warnings;
use 5.10.1; // or whatever the oldest Perl you support is 
```

在你的脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:13:55.890

首先，您要重新声明 $loop 变量，这将掩盖其先前的声明。由于 ++ on an undefined value = 1，$query 中的 $loop 每次都是 1。

```
for(my $loop=0; $loop < $count;$loop++)
{
  my $random_number = rand();
  my $loop++; # Shouldn't be here
  my $query = "insert into random_table values($loop,$random_number)";
} 
```

如果你在 perl 上打开了警告，就会警告你这一点。

其次，您没有对 $query 做任何事情。这只是一个字符串。你必须执行它，例如$dbh->do($query)。

# windows - Ajaxplorer 下的字符集自行更改

> ID：15961242
> 
> 赞同：0
> 
> 时间：2013-04-12T00:40:32.883
> 
> 标签：windows, apache, character-encoding, locale, pydio

我在 Windows 下获得了 AjaxPlorer 4.23 的标准安装。诊断工具只是对除 SSL 部分之外的所有内容指示“OK”......

*   [该应用程序在http://some_domain.com/share](http://some_domain.com/share)下解压缩

*   我确保在 bootstrap_conf.php 中设置语言环境来定义（“AJXP_LOCALE”，“fr_FR.ISO-8859-1”）；我们是否使用了一些法语字符，例如 é、ç、è、â、ï...

*   出于某种我到目前为止忽略的原因，一个用户可能会登录，转到某个以法语字符命名的特定文件夹，然后他从 fsAccess 驱动程序收到一条错误消息，例如： message=opendir(ajxp.fs://aaa744f141829e991d80a21d5dde850b/Réunion du 2013 年 12 月 12 日）：无法打开目录：“fsAccessWrapper::dir_opendir”调用失败

*   我进入了 Ajaxplorer 的诊断工具来查看 LOCALE 变量。它现在设置为英语美国 1252。我是服务器的所有者，并且我是唯一可以访问它的人，由于某种原因，应用程序会自行更改编码....

*   最近，我遇到了一些用户尝试使用 IE10 访问应用程序并显示空白页面的问题。我有 apache 的解决方法来强制 IE10 像 IE9 一样模拟（在 LoadModule headers_module modules/mod_headers.so 下），它就像这部分的魅力一样。

*   有什么方法可以取消注释这个模块到 apache 可能让 Ajaxplorer 有足够的权限来改变一些东西来让我的法语编码字符集崩溃。

*   当我重新启动我的 Apache 服务器时，两分钟内一切正常。区域设置值为 C，在此之后，我只需刷新诊断工具即可，区域设置现在指示英语美国 1252，并且所有尚未登录的用户都很难使用法语口音来管理他们的文件夹/文件。

简历： AJXP_LOCALE 设置为 fr_FR.iso-8859-1 后，我在我的 apache 服务器上重新启动关于 dianostic 工具到 Ajaxplorer 本身。几分钟后，AJXP_LOCALE 自己更改为english.United States 1252。如果重新启动我的apache 服务器，几分钟后一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:29:31.330

最后，我在其他地方暗示了...

我的服务器本身没有设置为正确的语言环境（国家、语言）。但是我将 Ajaxplorer 覆盖并简单地丢弃了服务器操作系统设置的语言环境。

1.  因此，在我的 windows server 2008 R2 下，我将美国更改为加拿大，将英语更改为加拿大法语。
2.  重启阿帕奇
3.  将此值设置为 bootsrap_conf.php define("AJXP_LOCALE", "fr_FR.ISO-8859-1");

现在，当我检查 Ajaxplorer Locale 下的诊断工具时，现在定义为加拿大法语而不是 English_United States。

我现在可以在包含法语字符（如 éçû）的文件夹下浏览，并且可以与文件进行交互。

# locking - MF522-一种 RFID 阅读器 - 检查完整的卡号

> ID：15961243
> 
> 赞同：1
> 
> 时间：2013-04-12T00:40:33.923
> 
> 标签：locking, arduino, rfid

我使用的代码来自*[如何开始使用 Mifare MF522-AN 和 Arduino](http://www.grantgibson.co.uk/blog/2012/04/how-to-get-started-with-the-mifare-mf522-an-and-arduino/)*。

问题是，代码只检查第一对卡号：

```
if(serNum[0] == 88) { // Is the first pair equal to 88?
    Serial.println("Hello Grant");
} 
```

如何获取它以检查完整的卡号？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-06T05:00:44.227

希望这段代码能帮助你：

```
 String FullSerial = "";
                    FullSerial += serNum[0];
                    FullSerial += serNum[1];
                    FullSerial += serNum[2];
                    FullSerial += serNum[3];
                    FullSerial += serNum[4];

                    if(FullSerial == "THE_RFID") { //Change the Condition
                      Serial.println("Hello Grant");
                    } 
```

# python - 如何在 webkit/python GTK 中传递空参数

> ID：15961246
> 
> 赞同：1
> 
> 时间：2013-04-12T00:40:55.850
> 
> 标签：python, webkit, pygobject, webkitgtk

我正在使用使用 GTK 的简单 webkit 视图。我需要触发一些 xpath 查询。在加载文档后的某个时刻，我触发以下代码以获取 xpath 结果。

```
from gi.repository import WebKit 
from gi.repository import Gtk 
from gi.repository import GLib, GObject
.....
doc = frame.get_dom_document()
doc.evaluate(xpath, doc, doc.create_ns_resolver(doc), 8, None ) 
```

上面的调用以 TypeError 结束：参数 5 不允许 None 作为值。

我知道 call 是正确的并且在其他语言中使用过，但通常在其他语言中传递 NULL 或等效项 - 例如在最后一个参数的 webkit 的 Java 绑定中。

如何传递 NULL 以便 python 代码将其作为有效值接受？

# iphone - iOS：生产中的应用程序。什么尺寸？

> ID：15961251
> 
> 赞同：1
> 
> 时间：2013-04-12T00:41:27.553
> 
> 标签：iphone, ios, uiview

我正在 iOS 上开发我的第一个应用程序。几天以来我一直在使用这种语言，我将尽快在 Apple Store 中分享这个应用程序。但我有一个关于建筑的大问题。

目前，我有大约 40 种不同类型的视图、其他组件和大量 PNG (30x30)。我知道我可以通过开发一个小型框架来显着减少视图的数量，但由于这是我的第一个实践学习应用程序，我想快速了解所有标准组件，并在没有架构、可重用类的情况下开始这个开发或设计模式……不用想太多。

简而言之，我想知道生产中应用程序的实际大小和性能。我们是否有一些限制：

*   Apple Store（上传应用程序）
*   iPhone在使用过程中的内存容量
*   从苹果商店为用户下载应用程序等...

基本上，一个 iPhone 应用程序有大约 40 个屏幕是否可以接受？

此致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:49:17.767

无线下载的限制为 50 MB。

屏幕数量可能不会成为问题。与每个屏幕相关的可执行代码的数量可能不会很大。更大的问题是您将在应用程序中嵌入多少 PNG 数据。单个 30x30 PNG 不是很大。其中 40 个可能不会很大（取决于它们的压缩程度）。但是如果每个屏幕有几十个，或者每个屏幕都有一个大的高分辨率背景图像，那么数据总量可能会变得很大。

我的建议是，以最直接的方式开始开发一切。在您有一些证据表明这可能是一个问题之前，请不要担心尺寸。并在运行您愿意支持的最旧操作系统版本的实际设备（不要依赖模拟器）上进行大量测试。

# c - C: strtok_r的正确使用

> ID：15961253
> 
> 赞同：40
> 
> 时间：2013-04-12T00:41:33.183
> 
> 标签：c, char, strtok

我怎样才能使用 strtok_r 而不是 strtok 来做到这一点？

```
char *pchE = strtok(NULL, " "); 
```

现在我正在尝试`strtok_r`正确使用...但有时我会遇到问题`strtol`。我有一个执行 10 次（同时）的线程。

```
char *savedEndd1;
char *nomeClass = strtok_r(lineClasses, " ", &savedEndd1);
char *readLessonS = strtok_r (NULL, " ", &savedEndd1);
char *readNTurma = strtok_r(NULL, " ",  &savedEndd1);

if (readNTurma==NULL)
printf("CLASS STRTOL begin %s %s\n",nomeClass, readLessonS );
int numberNTurma = strtol(readNTurma, NULL, 10); 
```

而且我抓到了`readNTurma == NULL`好几次......这是为什么呢？无法理解它为什么来`NULL`？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-12T00:47:16.473

strtok_r的[文档](http://linux.die.net/man/3/strtok_r)非常清楚。

> strtok_r() 函数是一个可重入版本的 strtok()。saveptr 参数是一个指向 char * 变量的指针，strtok_r() 内部使用该变量来维护解析相同字符串的连续调用之间的上下文。
> 
> 在第一次调用 strtok_r() 时，str 应该指向要解析的字符串，并且忽略 saveptr 的值。在随后的调用中，str 应为 NULL，并且 saveptr 应自上次调用以来未更改。

所以你会有这样的代码

```
char str[] = "Hello world";
char *saveptr;
char *foo, *bar;

foo = strtok_r(str, " ", &saveptr);
bar = strtok_r(NULL, " ", &saveptr); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-01-09T12:48:36.900

测试示例：

```
#include <stdio.h>
#include <string.h>

int main(void)
{
    char str[] = "1,22,333,4444,55555";
    char *rest = NULL;
    char *token;

    for (token = strtok_r(str, ",", &rest);
         token != NULL;
         token = strtok_r(NULL, ",", &rest)) {   
        printf("token:%s\n", token);
    }

    return 0;
} 
```

结果。

```
token:1
token:22
token:333
token:4444
token:55555 
```

测试：[http ://codepad.org/6xRdIecI](http://codepad.org/6xRdIecI)

从我的重点是[linux文档：](https://linux.die.net/man/3/strtok_r)

```
char *strtok_r(char *str, const char *delim, char **saveptr); 
```

> strtok_r() 函数是一个可重入版本的 strtok()。**saveptr 参数是一个指向 char * 变量的指针，strtok_r() 在内部使用该变量，以维护解析相同字符串的连续调用之间的上下文**。
> 
> **在第一次调用 strtok_r()**时，str 应该指向要解析的字符串，并且**忽略 saveptr 的值。在随后的调用中，str 应该为 NULL，并且 saveptr 应该自上次调用以来保持不变**。
> 
> 可以使用指定不同 saveptr 参数的 strtok_r() 调用序列同时解析不同的字符串。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-05-11T08:20:49.407

我发布了一个经过测试的示例，以了解 strtok_r() 的正确用法，而不是在嵌套中使用 strtok()。

首先让我们取一个字符串“you,are,here”并使用分隔符“,”和“。”分隔。

> 使用 strtok()

```
#include<stdio.h>
#include<string.h>
int main(void) {

        char str[]="y.o.u,a.r.e,h.e.r.e";
        const char *p=",", *q=".";
        char *a,*b;

        for( a=strtok(str,p) ; a!=NULL ; a=strtok(NULL,p) ) {
                printf("%s\n",a);
                for( b=strtok(a,q) ; b!=NULL ; b=strtok(NULL,q) )
                        printf("%s\n",b);
        }

        return 0;
} 
```

输出：

> 你
> 你
> 你
> _

现在让我们使用 strtok_r() 来做同样的例子

> 使用 strtok_r()

```
#include<stdio.h>
#include<string.h>
int main(void) {

        char str[]="y.o.u,a.r.e,h.e.r.e";
        const char *p=",",*q=".";
        char *a,*b,*c,*d;

        for( a=strtok_r(str,p,&c) ; a!=NULL ; a=strtok_r(NULL,p,&c) ) {
                printf("%s\n",a);

                for( b=strtok_r(a,q,&d) ; b!=NULL ; b=strtok_r(NULL,q,&d) )
                        printf("%s\n",b);
        }

        return 0;
} 
```

输出：

> 你 你 在
> 这儿
> _ _ _ _ _ _ _ _ _

因此 strtok_r() 具有可重入属性，而 strtok() 不具有那样的功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T00:46:23.437

```
char str[]="string for sample";
char *reserve;
char *pchE = strtok_r(str, " ", &reserve);//when next call str -> NULL 
```

# ios - iOS读取流但返回null

> ID：15961254
> 
> 赞同：1
> 
> 时间：2013-04-12T00:41:35.747
> 
> 标签：ios, json, file-read

好的男孩和女孩，这是我的问题：

我想在我的 iOS 应用程序中读取 JSON 流，但是当我尝试时，它返回

```
2013-04-12 02:35:01.479 Test[81414:303] (null) 
```

但我的文件存在并且绝对不是空的！你可以在这里找到它[http://api.kalokod.com/cce/mainfeed.json](http://api.kalokod.com/cce/mainfeed.json)

我的阅读脚本是：

```
NSError *error;

    NSURL *file = [NSURL URLWithString:@"http://api.kalokod.com/cce/mainfeed.json"];

    NSString *string = [NSString stringWithContentsOfURL:file
                                                encoding:NSUTF8StringEncoding
                                                   error:&error];

    NSLog(@"%@", string); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:50:09.470

我怀疑[这](https://stackoverflow.com/questions/1931113/encoding-issue-cocoa-error-261)可能是您的问题——您的 JSON 字符串中有非 UTF8 字符。

记录您的日志`NSError *error`以查看您是否收到 Cocoa 错误 261。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:50:29.340

我测试了您的代码，并收到了`Cocoa Error 261`. 这意味着您尝试加载的 JSON 未使用 UTF-8 编码，因此`NSUTF8StringEncoding`无法使用。尝试这个

```
NSString *string = [NSString stringWithContentsOfURL:file
                                            encoding:NSASCIIStringEncoding
                                               error:&error]; 
```

# mysql - 使用 MySQL COUNT(1), COUNT(2) ...etc 使用 JOIN

> ID：15961258
> 
> 赞同：1
> 
> 时间：2013-04-12T00:41:58.017
> 
> 标签：mysql, join, count, benchmarking

我有 4 张桌子：

```
Table talks
table talks_fan
table talks_follow
table talks_comments 
```

我想要实现的是计算每一次谈话的所有评论、粉丝、追随者。

到目前为止，我想出了这个。

都`tables`具有`talk_id`且仅在`talks`表中是主键

```
SELECT
  g. *, 
  COUNT( m.talk_id ) AS num_of_comments,
  COUNT( f.talk_id ) AS num_of_followers

FROM
  talks AS g

LEFT JOIN talks_comments AS m
  USING ( talk_id )

LEFT JOIN talks_follow AS f
  USING ( talk_id )

WHERE g.privacy = 'public'
GROUP BY g.talk_id
ORDER BY g.created_date DESC 
LIMIT 30; 
```

我也尝试过使用这种方法

```
SELECT
  t.*,
  COUNT(b.talk_id) AS comments, 
  COUNT(bt.talk_id) AS followers 
FROM
  talks t
LEFT JOIN talks_follow bt
  ON bt.talk_id = t.talk_id
LEFT JOIN talks_comments b
  ON b.talk_id = t.talk_id
GROUP BY t.talk_id; 
```

两者都给我相同的结果......？！

**更新：创建语句**

```
CREATE TABLE IF NOT EXISTS `talks` (
`talk_id` bigint(20) NOT NULL AUTO_INCREMENT,
`user_id` mediumint(9) NOT NULL,
`title` varchar(255) NOT NULL,
`content` text NOT NULL,
`created_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`privacy` enum('public','private') NOT NULL DEFAULT 'private',
PRIMARY KEY (`talk_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=7 ;

 CREATE TABLE IF NOT EXISTS `talks_comments` (
`comment_id` bigint(20) NOT NULL AUTO_INCREMENT,
`talk_id` bigint(20) NOT NULL,
`user_id` mediumint(9) NOT NULL,
`comment` text NOT NULL,
`date_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`status` tinyint(1) NOT NULL DEFAULT '0',
 PRIMARY KEY (`comment_id`)
 ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=8 ;

 CREATE TABLE IF NOT EXISTS `talks_fan` (
`fan_id` bigint(20) NOT NULL AUTO_INCREMENT,
`talk_id` bigint(20) NOT NULL,
`user_id` bigint(20) NOT NULL,
`created_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
`status` tinyint(1) NOT NULL DEFAULT '1',
PRIMARY KEY (`fan_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ;

CREATE TABLE IF NOT EXISTS `talks_follow` (
`follow_id` bigint(20) NOT NULL AUTO_INCREMENT,
`talk_id` bigint(20) NOT NULL,
`user_id` mediumint(9) NOT NULL,
`date_created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE       CURRENT_TIMESTAMP,
PRIMARY KEY (`follow_id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=5 ; 
```

有效的最终查询

```
SELECT t.* ,  COUNT( DISTINCT b.comment_id ) AS comments, 
            COUNT( DISTINCT bt.follow_id ) AS followers, 
            COUNT( DISTINCT c.fan_id ) AS fans
FROM talks t

LEFT JOIN talks_follow bt ON bt.talk_id = t.talk_id
LEFT JOIN talks_comments b ON b.talk_id = t.talk_id
LEFT JOIN talks_fan c ON c.talk_id = t.talk_id

WHERE t.privacy = 'public'
GROUP BY t.talk_id
ORDER BY t.created_date DESC 
LIMIT 30 
```

编辑：整个问题的最终答案......

我已经修改了查询并在 PHP (Codeigniter) 中创建了一些代码来解决我的问题 apone 推荐 @Bill Karwin

```
 $sql="
    SELECT t.*,
                    COUNT( DISTINCT b.comment_id ) AS comments, 
                    COUNT( DISTINCT bt.follow_id ) AS followers, 
                    COUNT( DISTINCT c.fan_id ) AS fans,
                    GROUP_CONCAT( DISTINCT c.user_id ) AS list_of_fans
    FROM talks t

    LEFT JOIN talks_follow bt ON bt.talk_id = t.talk_id
    LEFT JOIN talks_comments b ON b.talk_id = t.talk_id
    LEFT JOIN talks_fan c ON c.talk_id = t.talk_id

    WHERE t.privacy = 'public'
    GROUP BY t.talk_id
    ORDER BY t.created_date DESC 
    LIMIT 30
    ";

    $query = $this->db->query($sql);
    if($query->num_rows() > 0)
    {

        $results = array();

        foreach($query->result_array() AS $talk){
            $fan_user_id = explode(",", $talk['list_of_fans']);
            foreach($fan_user_id AS $user){
                 if($user == 1 /* this supposed to be user id or session*/){
                     $talk['list_of_fans'] = 'yes';
                 }
            }

            $follower_user_id = explode(",", $talk['list_of_follower']);
            foreach($follower_user_id AS $user){
                 if($user == 1 /* this supposed to be user id or session*/){
                     $talk['list_of_follower'] = 'yes';
                 }
            }

             $results[] = array(
                    'talk_id'           => $talk['talk_id'], 
                    'user_id'           => $talk['user_id'],
                    'title'             => $talk['title'], 
                    'created_date'      => $talk['created_date'], 
                    'comments'          => $talk['comments'], 
                    'followers'         => $talk['followers'], 
                    'fans'              => $talk['fans'], 
                    'list_of_fans'      => $talk['list_of_fans'],
                    'list_of_follower'  => $talk['list_of_follower']                        
                    );

        }
    } 
```

我仍然相信可以在数据库中对其进行优化，然后使用结果...

我在想，如果每个 TALK 有 1000 名追随者和 2000 名粉丝，那么加载结果将需要更长的时间。如果你将 NO 乘以 10。或者我误会听到...

编辑：为查询测试添加基准...

我已经使用 codeigniter profiler 来了解查询完成执行需要多长时间。

据说我也开始逐渐在表格中添加数据

结果如下。

在将数据回答到数据库后测试数据库

```
Query Results time

table Talks
---------------
table data 50 rows.
Time: 0.0173 seconds

Table Rows: 644 rows
Time: 0.0535 seconds

Table Rows: 1250 rows
Time: 0.0856 seconds

Adding data to other tables
--------------------------
Talks = 1250 rows
talks_follow = 4115
talks_fan = 10 rows

Time: 2.656 seconds

Adding data to other tables
--------------------------
Talks = 1250 rows
talks_follow = 4115
talks_fan = 10 rows
talks_comments = 3650 rows

Time: 10.156 seconds

After replacing LEFT JOIN with STRAIGHT_JOIN

Time: 6.675 seconds 
```

似乎它对 DB 的负担非常重.....现在我正面临如何提高其性能的另一个困境

编辑：使用@leonardo_assumpcao 建议

```
After rebuilding the DB using @leonardo_assumpcao suggestion
for indexing few fields..........

Adding data to other tables
--------------------------
Talks       = 6000  Rows
talks_follow    = 10000 Rows
talks_fan   = 10000 Rows
talks_comments  = 10000 Rows

Time: 17.940 second 
```

这对于大量数据数据库来说是正常的吗......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T19:25:42.577

I can say this is (at least) one of the coolest select statements I improved today.

```
SELECT STRAIGHT_JOIN
  t.* ,
  COUNT( DISTINCT b.comment_id ) AS comments, 
  COUNT( DISTINCT bt.follow_id ) AS followers, 
  COUNT( DISTINCT c.fan_id )     AS fans

FROM
  (
    SELECT * FROM talks
    WHERE privacy = 'public'
    ORDER BY created_date DESC
    LIMIT 0, 30
  ) AS t

LEFT JOIN talks_follow   bt ON (bt.talk_id = t.talk_id)

LEFT JOIN talks_comments b  ON (b.talk_id = t.talk_id)

LEFT JOIN talks_fan      c  ON (c.talk_id = t.talk_id)

GROUP BY t.talk_id ; 
```

But it seems to me that your problem resides on your tables; A first step to obtain efficient queries is to index every field involved on your desired joins.

I've made some modifications on the tables you shown above; You can see its code [here](http://pastie.org/7493585) *(updated)*.
Quite interesting, isn't it? Since we're here, take also your ERR model:

![Tables](https://i.stack.imgur.com/JPlMv.png)

First try it using MySQL test database. Hopefully it will solve your performance troubles.

*(Forgive my english, it's my second language)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:38:15.420

您可以将其强制转换为一个查询，如下所示：

```
SELECT COUNT(*) num, 'talks' item         FROM talks
UNION
SELECT COUNT(*) num, 'talks_fan' item     FROM talks_fan
UNION
SELECT COUNT(*) num, 'talks_follow' item  FROM talks_follow
UNION
SELECT COUNT(*) num, 'talks_comment' item FROM talks_comment 
```

这将为您提供一个五行结果集，每个表一行。每行是特定表中的计数。

如果你必须把它全部放在一行中，你可以像这样做一个枢轴。

```
SELECT 
  SUM( CASE item WHEN 'talks'         THEN num ELSE 0 END ) AS 'talks', 
  SUM( CASE item WHEN 'talks_fan'     THEN num ELSE 0 END ) AS 'talks_fan', 
  SUM( CASE item WHEN 'talks_follow'  THEN num ELSE 0 END ) AS 'talks_follow', 
  SUM( CASE item WHEN 'talks_comment' THEN num ELSE 0 END ) AS 'talks_comment'
FROM 
(   SELECT COUNT(*) num, 'talks' item         FROM talks
    UNION
    SELECT COUNT(*) num, 'talks_fan' item     FROM talks_fan
    UNION
    SELECT COUNT(*) num, 'talks_follow' item  FROM talks_follow
    UNION
    SELECT COUNT(*) num, 'talks_comment' item FROM talks_comment
) counts 
```

（这没有考虑到您的`WHERE g.privacy =`子句，因为我不明白这一点。但是您可以`WHERE`在项目中的四个查询之一中添加一个子句`UNION`来处理它。）

请注意，这实际上是将四个单独表上的四个查询强制转换为一个查询。

而且，顺便说一句，表的主键 `COUNT(*)`和`COUNT(id)`何时是值没有区别。不计算is的行，但如果是主键，那么它是。但是速度更快，所以使用它。`id``COUNT(id)``id``NULL``id``NOT NULL``COUNT(*)`

**如果您需要每个不同谈话的粉丝、关注和评论行数，请进行**编辑，请执行此操作。**做一个联合和一个枢轴的想法是一样的，但是有一个额外的参数。**

 **```
SELECT 
      talk_id, 
      SUM( CASE item WHEN 'talks_fan'     THEN num ELSE 0 END ) AS 'talks_fan', 
      SUM( CASE item WHEN 'talks_follow'  THEN num ELSE 0 END ) AS 'talks_follow', 
      SUM( CASE item WHEN 'talks_comment' THEN num ELSE 0 END ) AS 'talks_comment'
FROM 
(   
          SELECT talk_id, COUNT(*) num, 'talks_fan' item     
            FROM talks_fan
        GROUP BY talk_id
    UNION
         SELECT talk_id, COUNT(*) num, 'talks_follow' item  
           FROM talks_follow
       GROUP BY talk_id
    UNION
         SELECT talk_id, COUNT(*) num, 'talks_comment' item 
           FROM talks_comment
       GROUP BY talk_id
) counts
GROUP BY talk_id 
```

在这样做（太）多年之后，我发现描述您需要的查询的最佳方式是对自己说“我需要一个结果集，每个 xxx 有一行，yyy、zzz 和QQ。”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:05:58.697

计数相同的原因是它在连接合并表之后对行进行计数。通过加入多个表，您正在创建[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。

基本上，您不仅要计算每次谈话有多少评论，还要计算每次谈话有多少评论 * 关注者。然后你将追随者计算为每次谈话有多少追随者*评论。因此，计数是相同的，而且它们都太高了。

这是编写查询以仅对每个不同的评论、关注者等计数一次的更简单方法：

```
SELECT t.*, 
  COUNT(DISTINCT b.comment_id) AS comments, 
  COUNT(DISTINCT bt.follow_id) AS followers 
FROM talks t
LEFT JOIN talks_follow bt ON bt.talk_id = t.talk_id
LEFT JOIN talks_comments b ON b.talk_id = t.talk_id
GROUP BY t.talk_id; 
```

* * *

回复您的评论：我不会在同一个查询中获取所有关注者。你可以这样做：

```
SELECT t.*, 
  COUNT(DISTINCT b.comment_id) AS comments, 
  COUNT(DISTINCT bt.follow_id) AS followers, 
  GROUP_CONCAT(DISTINCT bt.follower_name) AS list_of_followers
FROM talks t
LEFT JOIN talks_follow bt ON bt.talk_id = t.talk_id
LEFT JOIN talks_comments b ON b.talk_id = t.talk_id
GROUP BY t.talk_id; 
```

但是您会得到一个字符串，其中的追随者名称用逗号分隔。现在您必须编写应用程序代码来用逗号分割字符串，您必须担心某些追随者名称是否实际上已经包含逗号，等等。

我会做第二个查询，为给定的谈话获取关注者。无论如何，您可能只想显示特定谈话的关注者。

```
SELECT follower_name
FROM talks_follow
WHERE talk_id = ? 
```**

# jquery - 如何制作一个在向下滑动时向下滚动以显示 JQuery 的菜单

> ID：15961259
> 
> 赞同：1
> 
> 时间：2013-04-12T00:42:02.593
> 
> 标签：jquery, scroll, jquery-animate, menubar

我想要它类似于我的 Tumblr 网站[TZCraft Tumblr](http://thakyz.tumblr.com)但我似乎无法在任何地方找到代码，所以这是我的标题代码，但出现时没有动画：

```
 if (!!$('.sHeader').offset())
{
    var sHeadTop = $(".header").offset().top + 48;

    $(window).scroll(function()
    {
        var windowTop = $(window).scrollTop();
        var windowW = $(window).width();

        if (sHeadTop < windowTop)
        {
            $(".sHeader").css({position: 'fixed', opacity: 1, width: windowW});
        }
        else
        {
            $(".sHeader").css({position: "fixed", top: -64, opacity: 1, width: windowW});
        }
    });
} 
```

这是我的css代码：

```
div.sHeader
{
height: 64px;
background: -moz-linear-gradient(top, rgba(51,51,51,1) 0%, rgba(51,51,51,0) 100%);
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%, rgba(51,51,51,1)), color-stop(100%, rgba(51,51,51,0)));
background: -webkit-linear-gradient(top, rgba(51,51,51,1) 0%, rgba(51,51,51,0) 100%);
background: -o-linear-gradient(top, rgba(51,51,51,1) 0%, rgba(51,51,51,0) 100%);
background: -ms-linear-gradient(top, rgba(51,51,51,1) 0%, rgba(51,51,51,0) 100%);
background: linear-gradient(to bottom, rgba(51,51,51,1) 0%, rgba(51,51,51,0) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#333333', endColorstr='#00333333', GradientType=0 );
width: 100%;
top:-64px;
font-family: 'Oxygen Mono', Tahoma, Arial, sans-serif;
opacity:0;
position:fixed;
} 
```

这是我的 HTML：

```
 <div class="sHeader">
        <div class="line">
            &nbsp;
        </div>
        <div class="tabBox" id="logo1">
            <a href="./index.html"><img src="./img/f.png" id="logo" width="60" height="60"/></a>
        </div>
        <div class="line">
            &nbsp;
        </div>
        <div class="tabBox" id="tab1">
            <a href="./index.html">Home</a>
        </div>
        <div class="tabBox" id="tab2">
            <a href="http://www.twitter.com/">Twitter</a>
        </div>
        <div class="tabBox" id="tab3">
            <a href="./tzcraft/info.html">Info</a>
        </div>
        <div class="line">
            &nbsp;
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:21:26.800

一种策略是用 div 包装整个内容，并在该 div 之外提供另一个 UI，并且位置固定。然后使用滚动事件来显示或隐藏菜单。这应该比尝试将菜单移动到正文中更有效。

我只是在这里写了一个例子。

[http://jsbin.com/uwanuw/5/edit](http://jsbin.com/uwanuw/5/edit)

（出于某种原因，它只能在编辑视图中工作......我不熟悉这个工具，所以我不知道出了什么问题......但你会明白的）。

因此，在您的代码中，在滚动函数内部，根据 $(window).scrollTop() 的结果添加隐藏和显示逻辑。

下面是我的示例中的 javascript 代码。

```
$("#body").bind("scroll", function(e){
  if($(this).scrollTop() > 100 && $("#menu").css("display") == "none")
  {
    $("#menu").slideDown();
  }
  else if($(this).scrollTop() < 100 && $("#menu").css("display") != "none")
  {
    $("#menu").slideUp();
  }
}); 
```

# python - 在 python 中创建和旋转椭圆，同时检查碰撞

> ID：15961263
> 
> 赞同：0
> 
> 时间：2013-04-12T00:42:58.697
> 
> 标签：python, packing, collision

我已经设法创建了一些代码来创建各种光盘并检查冲突，但是我将如何为椭圆做呢？

```
height = 100
width= 100
circles = 15
radius = 4
xL = []
yL = []
count = 0
print("Placing ", circles, "circles on a" , width,\
      "x", height, "grid...")
for j in range(circles):
    x = randint(0,width-1)
    y = randint(0,height-1)
    if len(xList)>0:
        for i in range(len(xL)):
            distance = sqrt((xL[i] - x)**2 + (yL[i] - y)**2)
            if (distance < radius*2):
              print("Circle ", j, "collides with circle ", i)
              count += 1                  
    xL.append(x)
    yL.append(y)
print("Complete.", count, "collisions.") 
```

我需要完全重写代码吗？此外，作为后续行动，我已经能够实现一种算法，使圆盘稍微移动，然后在它们靠得更近时接受或拒绝移动。椭圆有点不同，因为我需要旋转它们。我该怎么做？

# sql - 如何在 SQL Server 中使用临时表来显示星期几

> ID：15961264
> 
> 赞同：1
> 
> 时间：2013-04-12T00:43:00.863
> 
> 标签：sql, sql-server, temp-tables

我正在尝试执行以下操作：我知道可能还有其他方法可以做到这一点，但必须使用临时表。

我相信我应该做的是制作一个临时表，显示一周中的每一天，并在其旁边显示本周迄今为止售出的书籍数量。如果您认为该问题需要其他内容，请告诉我。即使在阅读了临时表之后，我仍然不知道它们是如何工作的。

我在数据库中的表是：

*   作者
*   图书
*   类别
*   图书分类
*   顾客
*   订单
*   订单行
*   订单状态

我想你可以假设这些表格填充了什么样的字段。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:17:44.260

您没有提供列，所以这是一个猜测。这是你想要的？

```
select DATENAME(weekday, Orders.OrderDate) as [weekday], Orders.OrderDate as [Date], Category.Description as Category, Authors.State, isnull(SUM(OrderLine.Quantity),0) as [NumberSold]
into #booksales
from Books
Left Outer join OrderLine
on Books.BookID = OrderLine.BookID
Join Orders
on Orders.OrderID=OrderLine.OrderID
Join Authors
on Books.AuthorID = Authors.AuthorID
Join Category
on Books.CategoryID = Category.CategoryID
WHERE Orders.OrderDate BETWEEN @begindate AND @enddate
GROUP BY DATENAME(weekday, Orders.OrderDate), Orders.OrderDate, Category.Description, Authors.State 
```

这假定您有设置为一周的开始和结束日期的 DATE 类型的变量。

# java - 在 Java 中添加实例变量后，静态方法/变量的行为发生变化

> ID：15961265
> 
> 赞同：1
> 
> 时间：2013-04-12T00:43:03.070
> 
> 标签：java, inheritance, static-methods, static-members, abstraction

这不是一个问题，而是一个问题。我有几个类继承了以下抽象类：

```
public abstract class PixelEditorWindow {
    protected static int windowHeight, windowWidth;

    public PixelEditorWindow() {
        setWindowSize();
    }

    protected abstract void setWindowSize();

    public static int getWindowWidth() {
        return windowWidth;
    }

    public static int getWindowHeight() {
        return windowHeight;
    }
} 
```

我让每个类都继承了抽象方法setWindowSize，在那里他们设置了自己的窗口大小，并设置了这两个变量，如下：

```
protected void setWindowSize() {
    windowWidth = 400;
    windowHeight = 400;
} 
```

这完美无缺。但是我还需要它们所有人来跟踪它们现在包含的 JFrame，所以我通过以下方式修改了这个类：

```
public abstract class PixelEditorWindow {
    protected int windowHeight, windowWidth;
    JFrame frame;

    public PixelEditorWindow(JFrame frame) {
        this.frame = frame;
        setWindowSize();
    }

    public JFrame getFrame() {
        return frame;
    }

    protected abstract void setWindowSize();

    public int getWindowWidth() {
        return windowWidth;
    }

    public int getWindowHeight() {
        return windowHeight;
    }
} 
```

现在，所有继承的类都有相同的窗口大小，这是最后实例化的任何类型的窗口。~~我可以通过让另一个类继承这个所有子类都继承的类来修复它，但这比我想要的更混乱。~~编辑：刚刚意识到我也不能这样做，但是还有很多其他混乱的方法可以解决这个问题。为什么添加一个非静态实例变量会搞砸一切？或者我想一个更好的问题 - 为什么没有非静态实例变量允许它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:49:29.523

“静态”表示类级别的关联。

非静态意味着对象级别的关联。

基本上，我需要删除所有静态的东西。稍后当您知道为什么需要它时使用“静态”。

# sql - Oracle SQL 检查存在约束

> ID：15961268
> 
> 赞同：0
> 
> 时间：2013-04-12T00:43:22.793
> 
> 标签：sql, oracle, constraints, conditional-statements, exists

我在 Oracle SQL Developer 中有两个简单的表（Train 和 Driver），每个表都有一个共同的属性（driverid）。本质上，我想要做的是不允许对驱动程序表中的特定驱动程序元组进行任何更新，如果它们的 driverid 属性存在于火车表中。我试图添加以下约束，但它会抛出“此处不允许子查询”的错误。

```
alter table driver add constraint drivcheck CHECK 
 (NOT EXISTS(select driverid from train)) 
```

我做了一些挖掘，总体感觉是应该用触发器检查这种情况，所以我试图创建一个触发器来完成这项工作，但没有取得很大成功。下面的触发器是我已经想出的。

```
create trigger drivcheck4
before update on driver
for each row
begin
declare
cursor dri is
select driverid from train where 'N' IN  
          (select availability 
           from driver 
           inner join train on    driver.driverid=train.driverid
           );
dri2 NUMBER;
begin
open dri;
loop
fetch dri into dri2;
exit when dri%NOTFOUND;
if check (exists (select * from dri2)) THEN
//Throw Error Section
else
//Allow update operation to take place
end if;
end loop;
close dri;
end; 
```

我知道触发器可能执行的操作可能与描述的不同，但这只是我实验的结果。我最初的描述是我想要达到的目标。如果有人有任何想法，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:03:11.533

安德鲁，

您是否面临任何错误？以下内容应该可以工作。如果您也可以发布一些示例数据，那将很容易测试。

```
 create or replace trigger trg_bu_driver2
    before update on driver
    for each row
    declare
      l_cnt number;
    begin
    select count(*)
    into   l_cnt
    from   train
    where  driver_id = :new.driver_id;
    if (l_cnt > 0) then
       raise_application_error (-20001, 'new driver id exists in train table');
    end if;
    end trg_bu_driver2;
    / 
```

测试：

```
 SQL> select * from driver;

     DRIVER_ID COLUMN2
    ---------- --------------------
            10 driver1

    SQL> select * from train;

     DRIVER_ID   TRAIN_ID COLUMN3
    ---------- ---------- --------------------
            20        100 train1 
```

*   更新到火车表中不存在的驱动程序 ID。

    ```
     1  update driver
      2  set    driver_id = 30
      3* where  driver_id = 10
    SQL> /

    1 row updated.

    No issues.

    SQL> rollback;

    Rollback complete. 
    ```

--更新到存在于列车表中的驱动程序 ID 会引发错误。

```
 SQL> update driver
      2  set    driver_id = 20
      3  where  driver_id = 10
      4  ;
    update driver
           *
    ERROR at line 1:
    ORA-20001: new driver id exists in train table
    ORA-06512: at "DMART_ETL.TRG_BU_DRIVER2", line 9
    ORA-04088: error during execution of trigger 'DMART_ETL.TRG_BU_DRIVER2' 
```

# c# - 我可以定义一个类型变量，其中表示特定类的子类型的类型是唯一有效值吗？

> ID：15961272
> 
> 赞同：3
> 
> 时间：2013-04-12T00:43:30.703
> 
> 标签：c#, types

## 背景

我正在为一个小型个人游戏项目编写一些组件（[这种组件）。](http://cowboyprogramming.com/2007/01/05/evolve-your-heirachy/)在该系统中，实体具有属于不同类别的各种类型的组件。例如，组件的*IController*类别包括*KeyboardController*和*AiController*。一个实体有一组组件，并且每个类别应该只有一个组件。所有组件都继承自*IComponent*。

组件有一个*MetaType*属性，它应该报告它们对应的类型，以便说：“嘿，请把我当作这种类型的组件！” 此属性返回一个*Type*对象。AiController返回*typeof(IController) ，告诉实体**将此*视为其控制器。其他有效的 MetaType 是*typeof(AiController)*或*typeof(IComponent)*。它不应该能够返回任何任意类型，例如*typeof(int)* - 只是组件类型。

 ***## 我的问题

目前，我的组件可以报告 MetaType 的任意类型。例如，*AIController*实际上可以返回*typeof(int)* ——毕竟这是一个有效的 Type 对象。

我可以限制*Type*值，使得唯一有效的类型是*IComponent*是其祖先的任何类或接口的类型吗？我想这样的变量声明可能如下所示：

```
Type<IComponent> component; // This can only store certain types
Type where Type : IComponent component; // This too 
```

**我对这是否可能特别感兴趣**——在替代方法中没有那么多（我知道有几种方法，它们包括只允许这种行为，因为我是唯一使用此代码的人。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T01:25:18.630

您可以创建一个`MetaType`对象，其构造函数或工厂方法将采用受约束的泛型类型`IComponent`并提供对非约束的访问`Type`。但是由于它的构造函数是受约束的，所以*应该*保证你不会得到其他非 IComponent。

```
public class MetaType
{
    public Type ComponentType { get; private set; }

    private MetaType(Type componentType)
    {
        this.ComponentType = componentType;
    }

    public static MetaType Create<T>() where T : IComponent
    {
        return new MetaType(typeof(T));
    }
} 
```

您的用法可能如下所示：

```
MetaType validType = MetaType.Create<IComponent>(); //fine
MetaType validType = MetaType.Create<IController>(); //fine
MetaType validType = MetaType.Create<AIController>(); //fine

MetaType invalidType = MetaType.Create<int>(); //compiler error! 
```

编辑：我假设您的`IController`接口继承自`IComponent`，但如果不是，您可以添加工厂重载，`CreateController`并且`CreateComponent`每个重载都受唯一接口的约束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:05:58.640

不幸的是，不是直接的——虽然你可以在泛型中约束类型*参数*，但不能约束像你的字段这样的类型*变量。*`MetaType`这基本上就像试图约束一个`int`：您可以使用异常来确保它永远不会设置为无效值，但最终变量本身可以是正确类型的任何东西。***

# c - ROT13 代码中的错误 (C)

> ID：15961277
> 
> 赞同：2
> 
> 时间：2013-04-12T00:44:05.410
> 
> 标签：c, rot13

我的程序应该接受一个字符，如果它是一个字母，则使用 ROT13 对其进行编码，否则保持不变，然后打印结果。

我下面的代码适用于所有小写字母和大写字母 AM，但不适用于大写字母 NZ 和其他符号/数字。任何帮助表示赞赏:)

```
#include <stdlib.h>
#include <stdio.h>
#include <assert.h>

#define TRUE 1
#define FALSE 0

#define UPPER_START 65
#define UPPER_END 90
#define LOWER_START 97
#define LOWER_END 122

#define UPPER_MID 77
#define LOWER_MID 109

void testEncode (void); int isValid (char cipherChar); char encode (char letter);

int main (int argc, char* argv[]) {

    char cipherChar;

    scanf("%c", &cipherChar);
    if (isValid(cipherChar) == TRUE) {
        printf("%c", encode (cipherChar));
    } else if (isValid(cipherChar) == FALSE) {
       printf("%c", cipherChar);
    }
       return EXIT_SUCCESS;

}

int isValid (char cipherChar) {

    int valid;

    if ((cipherChar >= UPPER_START) &&
        (cipherChar <= UPPER_END)) {
        valid = TRUE;
    } else if ((cipherChar >= LOWER_START) &&
            (cipherChar <= LOWER_END)) {
        valid = TRUE;
    } else {
        valid = FALSE;
    }

    return valid;
}

char encode (char letter) {

    if ((letter <= UPPER_MID) || (letter <= LOWER_MID)) {
        letter = letter + 13;
    } else {
        letter = (letter - 13);
    }

    return letter;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:03:09.267

[ROT13](http://en.wikipedia.org/wiki/ROT13)通常不会影响除 之外的字符`[A-Za-z]`，所以我会说忽略那些。除非你也有理由轮换它们。例如，有时用 ROT5 处理 0-9。

无论如何，您`if`对子句的陈述`(letter <= UPPER_MID) || (letter <= LOWER_MID)`基本上是说，“在 'a' 之前的任何字符都添加了 13”，这就是 [NZ] 无法正常工作的原因。相反，尝试打破大小写逻辑并处理每个案例的环绕，如下所示：

```
if (letter >= UPPER_START && letter <= UPPER_END) {
    letter = letter + 13;

    if (letter > UPPER_END) {
        letter -= 13;
    }
} else if (letter >= LOWER_START && letter <= LOWER_END) {
    letter = (letter + 13);

    if (letter > LOWER_END) {
        letter -= 13;
    }
} 
```

# wordpress - 带侧边栏的自定义 WP3.5 媒体上传器

> ID：15961279
> 
> 赞同：1
> 
> 时间：2013-04-12T00:44:11.300
> 
> 标签：wordpress, media, uploader

我看过无数关于如何在没有侧边栏的情况下启动自定义版本的 WP3.5 媒体上传器的文章，但我终其一生都找不到任何能真正告诉你如何用一个来启动它的文章。

当用户使用“从 URL 插入”选项并希望在我的应用程序的其他区域启用“从 URL 插入”选项时，我已经做了很多修改，以允许用户侧载。

理想情况下，我希望在以图像模式查看上传器时，它显示为第三个选项，这样您就有了“上传文件”| '媒体库' | '从 URL 插入'，但没有做到这一点，我只想显示侧边栏......

我目前正在使用这个

```
ImageChooser = wp.media.frames.icsImageChooser = wp.media({
            // Set the title of the modal.
            title: 'Choose or Upload Image',

            // Tell the modal to show only images.
            library: {
                type: 'image'
            },
            // Customize the submit button.
            button: {
                // Set the text of the button.
                text: 'Use This'
            }
        }); 
```

有谁知道我需要添加什么来实现上述任何一个我想要的结果？

# c - 函数指针的内存分配

> ID：15961282
> 
> 赞同：4
> 
> 时间：2013-04-12T00:44:26.367
> 
> 标签：c, pointers, function-pointers

我有一个名为仓库的结构和一个通用链表，每个项目都指向一个仓库结构。

```
typedef struct linked{
    char type;
    void * item;
    struct linked * next;
    struct linked * prev;
}LinkedList;

typedef struct warehouse{
    char * name;
    float volume;
    float (* getPrice) (void * S);
    float (* getTotalDollarAmount)(void * S);
}house_t; 
```

当我试图让`getPrice`函数指针指向一个函数时`float price (void *S)`

```
void menu (LinkedList *house){
    char *c;
    float num;
    c = (char*)malloc(sizeof(char)*10);

    LinkedList *i;
    i = (LinkedList*)malloc(sizeof(LinkedList);
    house_t *sk;
    sk = (house_t *) malloc(sizeof(house_t));
    //i->item = (house_t *) malloc(sizeof(house_t));

    scanf("%c", c);

    ((house_t*)i->item)->getPrice = price;
    sk=findhouse(house, c);
    num = ((house_t*)i->item)->getPrice(sk);
    printf("%f",num);
} 
```

我遇到了错误的访问错误。因为每次我遇到错误的访问错误都是因为我没有为某些东西分配内存。但是我需要为函数指针分配内存吗？如果是这样，怎么做？

这里还有一些代码

```
float price (void *S)
{
    return ((house_t*)S)->volume;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:31:00.287

```
LinkedList *i;
i = NewLinkedList();

/* ... snip ... */

LinkedList *NewLinkedList()
{
    return NULL;
} 
```

根据您对 的定义`NewLinkedList()`，变量`i`是 now `NULL`。您尝试使用取消引用它，但如果is`i->item = ...`则不能这样做。我认为你真正想做的是在你的函数中为你的链表分配空间：`i``NULL``NewLinkedList`

```
LinkedList * NewLinkedList()
{
    LinkedList *result = malloc(sizeof(LinkedList));
    result->type = '\0';  // set to suitable initial value
    result->item = NULL;
    result->next = NULL;
    result->prev = NULL;
    return result;
} 
```

# c# - Code First 迁移实体框架种子错误

> ID：15961283
> 
> 赞同：1
> 
> 时间：2013-04-12T00:44:34.233
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-migrations

我在播种信息时使用实体框架运行代码优先迁移时遇到问题。我似乎无法弄清楚我做错了什么。这是我运行 update-database 时包管理器控制台给我的错误。

```
Running Seed method.
System.Data.Entity.Infrastructure.DbUpdateException: An error occurred while updating the entries. See the inner exception for details. ---> System.Data.UpdateException: An error occurred while updating the entries. See the inner exception for details. ---> 
System.Data.SqlClient.SqlException: The INSERT statement conflicted with the FOREIGN KEY constraint "FK_dbo.Blogs_dbo.Statuses_StatusId". The conflict occurred in database "GregGoodwin", table "dbo.Statuses", column 'Id'.
The statement has been terminated. 
```

有一个更大的堆栈跟踪并没有告诉我更多。无论如何，这是我的 Configuration.cs 种子代码。

```
var cat = new Category { CategoryTitle = "General", PostDate = DateTime.Now, Slug = "general" };
context.Categories.AddOrUpdate(cat);

var statusPub = new Status { StatusTitle = "Published", Slug = "published", PostDate = DateTime.Now };
context.Statuses.AddOrUpdate(statusPub);

var statusDraft = new Status { StatusTitle = "Draft", Slug = "draft", PostDate = DateTime.Now };
context.Statuses.AddOrUpdate(statusDraft);

var blogPost = new Blog
        {
            CategoryId = 1,
            AllowComments = true,
            PostDate = DateTime.Now,
            PostDescription = "Default post added to database",
            PostTitle = "Hello World",
            Slug = "hello-world",
            PostContent = "<p>Hello to the world</p>",
            StatusId = 1,
            Tags = "hello,world",
            ShortLink = "http://bit.ly/16Qt4wp"
        };
context.Blogs.AddOrUpdate(blogPost); 
```

现在这是我的模型

地位

```
[Table("Statuses")]
public class Status
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Required]
    public string StatusTitle { get; set; }
    public string Slug { get; set; }
    [DataType(DataType.Date), Timestamp]
    public DateTime PostDate { get; set; }
} 
```

类别

```
[Table("Categories")]
public class Category
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Required]
    public string CategoryTitle { get; set; }
    public string Slug { get; set; }
    [DataType(DataType.Date), Timestamp]
    public DateTime PostDate { get; set; }
} 
```

博客

```
[Table("Blogs")]
public class Blog
{
    [Key, DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [Required]
    public string PostTitle { get; set; }
    [Required]
    public string PostDescription { get; set; }
    [Required]
    public string PostContent { get; set; }
    public string Slug { get; set; }
    public string Tags { get; set; }
    public bool AllowComments { get; set; }
    public string ShortLink { get; set; }
    [DataType(DataType.Date), Timestamp]
    public DateTime PostDate { get; set; }

    public int StatusId { get; set; }
    public int CategoryId { get; set; }

    public virtual Category Category { get; set; }
    public virtual Status Status { get; set; }
} 
```

我究竟做错了什么？提前感谢您的帮助。

编辑：查看数据库后，我注意到正在添加类别，但状态和博客条目在我运行种子时没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:13:11.527

状态表中很可能没有带有 的记录`Id 1`。我们无法判断，因为这是一个标识列，因此没有传入 Id 属性。因此，尝试设置 Status 导航属性而不是 StatusID，它应该在`SaveChanges()`被调用时正确解析：

```
var blogPost = new Blog
        {
            CategoryId = 1,
            ...
            Status = statusDraft,
            ...
        }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-17T09:46:50.770

我有这个问题，这是我的解决方案。没有什么特别的，只是在插入数据库之前检查数据。

```
protected override void Seed(ApplicationDbContext context) {
        var gender = new[] { Gender.NotSpecified, Gender.Male, Gender.Female };
        var dbGender = context.Gender.ToList();
        for (byte i = 0; i < gender.Length; i++) {
            if (dbGender.FirstOrDefault(x => x.Name == gender[i]) != null) {
                context.Gender.Add(new Gender {
                    Id = i,
                    Name = gender[i]
                });
            }
        }
    } 
```

# opengl - 如何一起编译 OpenCV 和 OpenGL？

> ID：15961287
> 
> 赞同：0
> 
> 时间：2013-04-12T00:45:02.033
> 
> 标签：opengl, opencv, compilation, cmake

我想编写一个同时利用 OpenCV 和 OpenGL 的程序。我试图编译我用来自 OpenGL 的函数编写的 OpenCV 代码。我的代码无法编译。你们知道我是否必须在我的 CMakeLists 文件中添加任何额外的行，或者是否有任何其他方法可以在我的 OpenCV 设置中打开 OpenGl 兼容性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:48:34.540

OpenCV 和 OpenGL 是两个不同的库。它们之间没有重叠。所以要使用，只需包含它们。按照此链接[在 Ubuntu 中安装 OpenGL/Glut 库](http://www.kiwwito.com/article/installing-opengl-glut-libraries-in-ubuntu)

# ios - 在不知道当前视图控制器的情况下呈现模态控制器？

> ID：15961288
> 
> 赞同：22
> 
> 时间：2013-04-12T00:45:05.103
> 
> 标签：ios, modal-dialog, presentmodalviewcontroller

有没有办法在不知道可见视图控制器视图是什么的情况下以模态方式呈现视图控制器？基本上有点像您会在任何时间点显示警报视图。

我希望能够做类似的事情：

```
MyViewController *myVC = [[MyViewController alloc] init];
[myVC showModally]; 
```

我希望能够从应用程序中的任何位置调用它，并将其显示在顶部。我不想关心当前的视图控制器是什么。

我打算用它来显示登录提示。我不想使用警报视图，也不想在整个应用程序中使用登录演示代码。

对此有什么想法吗？还是有更好的方法来实现这一目标？我应该只实现自己的机制并在窗口顶部放置一个视图吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-12T01:25:39.607

好吧，你可以跟随链条。

开始于`[UIApplication sharedApplication].delegate.window.rootViewController`。

在每个视图控制器上执行以下一系列测试。

如果`[viewController isKindOfClass:[UINavigationController class]]`，则继续`[(UINavigationController *)viewController topViewController]`。

如果`[viewController isKindOfClass:[UITabBarController class]]`，则继续`[(UITabBarController *)viewController selectedViewController]`。

如果`[viewController presentedViewController]`，则继续`[viewController presentedViewController]`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-03-10T13:39:35.623

我在 Swift 中的解决方案（灵感来自 MartinMoizard 的要点）

```
extension UIViewController {
    func presentViewControllerFromVisibleViewController(_ viewControllerToPresent: UIViewController, animated flag: Bool, completion: (() -> Void)?) {
        if let navigationController = self as? UINavigationController {
            navigationController.topViewController?.presentViewControllerFromVisibleViewController(viewControllerToPresent, animated: flag, completion: completion)
        } else if let tabBarController = self as? UITabBarController {
            tabBarController.selectedViewController?.presentViewControllerFromVisibleViewController(viewControllerToPresent, animated: flag, completion: completion)
        } else if let presentedViewController = presentedViewController {
            presentedViewController.presentViewControllerFromVisibleViewController(viewControllerToPresent, animated: flag, completion: completion)
        } else {
            present(viewControllerToPresent, animated: flag, completion: completion)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2017-08-03T00:53:51.850

该解决方案为您提供了最顶级的视图控制器，以便您可以在呈现之前处理任何特殊情况。例如，也许您只想在最顶层的视图控制器不是特定的视图控制器时才显示您的视图控制器。

```
extension UIApplication {
    /// The top most view controller
    static var topMostViewController: UIViewController? {
        return UIApplication.shared.keyWindow?.rootViewController?.visibleViewController
    }
}

extension UIViewController {
    /// The visible view controller from a given view controller
    var visibleViewController: UIViewController? {
        if let navigationController = self as? UINavigationController {
            return navigationController.topViewController?.visibleViewController
        } else if let tabBarController = self as? UITabBarController {
            return tabBarController.selectedViewController?.visibleViewController
        } else if let presentedViewController = presentedViewController {
            return presentedViewController.visibleViewController
        } else {
            return self
        }
    }
} 
```

有了这个，您可以从任何地方展示您的视图控制器，而无需知道最顶层的视图控制器是什么

```
UIApplication.topMostViewController?.present(viewController, animated: true, completion: nil) 
```

或者仅当最顶层的视图控制器不是特定的视图控制器时才显示您的视图控制器

```
if let topVC = UIApplication.topMostViewController, !(topVC is FullScreenAlertVC) {
    topVC.present(viewController, animated: true, completion: nil)
} 
```

需要注意的一点是，如果当前正在显示 UIAlertController，`UIApplication.topMostViewController`将返回一个`UIAlertController`. 在 a 之上呈现`UIAlertController`有奇怪的行为，应该避免。因此，您应该`!(UIApplication.topMostViewController is UIAlertController)`在呈现之前手动检查，或者添加一个`else if`案例以返回 nil if`self is UIAlertController`

```
extension UIViewController {
    /// The visible view controller from a given view controller
    var visibleViewController: UIViewController? {
        if let navigationController = self as? UINavigationController {
            return navigationController.topViewController?.visibleViewController
        } else if let tabBarController = self as? UITabBarController {
            return tabBarController.selectedViewController?.visibleViewController
        } else if let presentedViewController = presentedViewController {
            return presentedViewController.visibleViewController
        } else if self is UIAlertController {
            return nil
        } else {
            return self
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-04-12T01:17:43.293

您可以在您的应用委托中实现此代码：

**AppDelegate.m**

```
-(void)presentViewControllerFromVisibleController:(UIViewController *)toPresent
{
    UIViewController *vc = self.window.rootViewController;
    [vc presentViewController:toPresent animated:YES];
} 
```

**AppDelegate.h**

```
-(void)presentViewControllerFromVisibleViewController:(UIViewController *)toPresent; 
```

**从哪里**

```
#import "AppDelegate.h"
...
AppDelegate *delegate = [UIApplication sharedApplication].delegate;
[delegate presentViewControllerFromVisibleViewController:myViewControllerToPresent]; 
```

在您的委托中，您将`rootViewController`获得`window`. 这将始终可见-它是所有事物的“父”控制器。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-12T01:43:59.480

我认为您不一定需要知道哪个视图控制器可见。您可以访问`keyWindow`应用程序并将模态视图控制器的视图添加到视图列表的顶部。然后你可以让它像`UIAlertView`.

**接口文件：** MyModalViewController.h

```
#import <UIKit/UIKit.h>

@interface MyModalViewController : UIViewController
- (void) show;
@end 
```

**实现文件：** MyModalViewController.m

```
#import "MyModalViewController.h"

@implementation MyModalViewController

- (void) show {
    UIWindow *window = [[UIApplication sharedApplication] keyWindow];
    //  Configure the frame of your modal's view.
    [window addSubview: self.view];
}

@end 
```

# c++ - 矢量合成角度和方向

> ID：15961291
> 
> 赞同：0
> 
> 时间：2013-04-12T00:45:46.333
> 
> 标签：c++

我正在处理一组点，我的目标是将 4 个向量加在一起并计算起点和终点之间的结果，

由于我已经准备好执行上述部分的代码，这似乎工作正常，但我不确定。

无论如何，我发布这个问题的真正原因是与由此产生的方向和角度有关。

我发现很难理解寻找结果角度和方向以及编程明智的概念。

考虑这种情况....图片

![在此处输入图像描述](https://i.stack.imgur.com/Krltp.png)

第一次添加向量“头 2 尾”

根据我对向量加法的了解，减去 x2 - x1, y2 -y1 这将使我发现错位差异并对 AE 中的所有点进行相同的计算

为了得到结果，我将所有点 x 平方根为 2 的幂，并将所有 y 位置添加到 2 的幂。

这种意识形态似乎运作良好......

但这里的问题是我如何获得结果的角度和方向......？

我用来计算结果的代码：

```
 double Pta; 
    double Ptb;
    Point  vect;
    float R1, R2;
    float resultant;

    for(vector<Point>::iterator iter_a = Left_Arm_xy.begin()+1; iter_a != Left_Arm_xy.end(); ++iter_a)
    {

        if(center.y <= 240)
        {
            vect.x = iter_a->x - (iter_a -1)->x;
            vect.y = iter_a->y - (iter_a -1)->y;

            vect_add.push_back(Point(vect.x,vect.y));

                for(vector<Point>::iterator iter_v = vect_add.begin(); iter_v - vect_add.begin() + 4 < vect_add.size(); iter_v+=4)
                {

                        R1 = iter_v->x + (iter_v +1)->x + (iter_v +2)->x + (iter_v +3)->x;
                        R2 = iter_v->y + (iter_v +1)->y + (iter_v +2)->y + (iter_v +3)->y;

                        resultant = sqrt(pow(R1,2) + pow(R2,2));

                }   

        } 
```

考虑一下这个......

好的，让我们考虑点 A[2,4]、B[4,8]、C[10,12]，为了添加这个向量，我添加向量/点，我减去点 B x4 - A x2 和点 B y8 - A y4 和点 C x10 - B x4 和点 C y12 - B y8 这将给我点之间的位移....现在要获得结果，我将所有点 X 和 Y 的 x 的 2+4+10 = 16 y 的 4+ 8+12 = 24，接下来我将平方根 16 ^2 + 24^2 = 28.84。因此，基于这些计算，其中结果不是数字，x 和 y 值如何获得方向和角度....？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T00:50:44.997

它是向量的简单求和。

```
(x, y) = (x1, y1) + (x2, y2) + ... = (x1+x2+..., y1+y2+...) 
```

当你有最终的向量时，它的角度是通过使用找到的

```
tan(angle) = y/x 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:56:23.623

两个向量之间的夹角一般定义为：

```
Angle = arccos( DotProduct(v1, v2) / ( Length(v1) * Length(v2) ) ); 
```

方向只是两个向量的减法：

```
Direction = v2 - v1; 
```

通常，您必须对其进行归一化以获得单位向量：

```
Len = SquareRoot( direction.x * direction.x + direction.y * direction.y );
Direction.x /= Len;
Direction.y /= Len; 
```

因此，您将拥有一个单位方向矢量和矢量的角度。

# associations - UML Papyrus 关联表示法

> ID：15961301
> 
> 赞同：4
> 
> 时间：2013-04-12T00:47:28.317
> 
> 标签：associations, uml, notation, papyrus

我正在 Papyrus 上创建一个 UML 类图，但我无法理解用于关联的符号。当关联设置为可导航时，该工具会在箭头尖端添加一个黑点作为默认符号。我可以通过将成员最终所有者从*分类器*更改为*关联*来删除点。两者在概念上的区别是什么？我在我的 UML 书中找不到关于分类器概念的任何讨论......

谢谢！！

PS：我在 Eclipse Juno 上使用纸莎草纸 4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T21:00:48.790

如果你知道类 A 有某种方式引用 B，通过一些函数或属性引用，例如，你从 A 到 B 的箭头。B 的实例是从 A 的 NAVIGABLE，但可能不是 A 的属性。

如果您知道属性 A 的一个是对 B 实例的一个或多个引用，您不仅可以绘制箭头，还可以绘制其末端的“点”。

很多时候人们在这两种情况下都简单地使用箭头。但严格使用点可以提供额外的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-13T11:23:15.073

如本[UML 关联参考](http://www.uml-diagrams.org/association-reference.html)中所述，黑点的语义是：

> 它可以解释为表明模型包含由点所触及的分类器表示的类型的属性

（有关更多信息，请参阅链接）

# google-chrome - Chrome 扩展复制和粘贴权限

> ID：15961302
> 
> 赞同：0
> 
> 时间：2013-04-12T00:47:52.690
> 
> 标签：google-chrome, google-chrome-extension, permissions

我正在写一个谷歌浏览器扩展。它有两个文本区域和一个按钮。单击按钮后，它会从第一个 textarea 获取代码，对其执行一些逻辑，然后在第二个 textarea 中传递并显示输出。当我在浏览器中打开 .html 文件时它工作正常，但是当我想将它用作扩展时它不起作用，当我单击按钮时没有任何反应。我认为这与权限有关，我已经在清单文件上添加了：“contextMenus”、“clipboardRead”、“clipboardWrite”权限，但它仍然不起作用。
如果有人可以帮助我，我将不胜感激。
谢谢
编辑：代码
**manifest.json**：

```
{
  "name": "MissLang Fix extension",
  "manifest_version": 2,
  "version": "1.0",
  "description": "fixing english to farsi typings.",
  "icons":{
    "128":"icon_128.png"
  },

  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "missLangFix.html"
  },

  "permissions": [
    "contextMenus",
    "clipboardRead",
    "clipboardWrite"
  ] 
```

}

**missLangFix.html**：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="style.css"/>
    <script src="script.js"></script>
    <title>MissLang Fix</title>
  </head>

  <body>
    <center>
      <div id="test"></div>
      <textarea class="txtarea" id="input" rows="4" cols="50"></textarea>
      <!--<div class="myBtn" onClick="myClick()">
        <b style="line-height:30px">fix</b>
      </div>-->
      <br/>
      <input type="button" value="fix" onclick="myClick()" />
      <br/>
      <textarea class="txtarea2" id="output" rows="4" cols="50" readonly="readonly"></textarea>
    </center>
  </body>
</html> 
```

**脚本.js**：

```
window.onload = myOnload();
function myOnload(){
  var myString = document.getElementById("txtarea").innerHTML = "";
}

function myClick(){
  var myString = document.getElementById("input").value;

  for(var i=0;i<myString.length;i++){
    myString = myString.replace("q","ض");
    myString = myString.replace("w","ص");
    myString = myString.replace("e","ث");
  }

  //document.getElementById("txtarea").value = myString;
  document.getElementById("output").innerHTML = myString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T16:10:49.517

好吧，问题是`onClick`按钮上的内联处理程序。只需将其移至您的 script.js`onLoad`处理程序，它就应该开始工作了。首先`id`在按钮上添加一个以简化此操作。

```
<input id="button" type="button" value="fix" /> 
```

接下来，获取该按钮并添加 onclick

```
function myOnload(){
  var myString = document.getElementById("txtarea").innerHTML = "";
  var button = document.getElementById("button");
  button.onclick= function(){myClick()};
}
... 
```

这是一个小提琴：http: [//jsfiddle.net/x2w2p/1/](http://jsfiddle.net/x2w2p/1/)

# asp.net - 使用“路由表”url格式传递一系列值的正确方法是什么

> ID：15961303
> 
> 赞同：0
> 
> 时间：2013-04-12T00:41:45.700
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4

我正在学习 ASP.NET MVC，使用以下 url 格式很容易将单个值传递给视图：

控制器/视图/ **ID**

在控制器的代码中，我可以简单地定义整数 id 参数，如下所示：

```
ActionResult View(int? id)
{
} 
```

但是什么是可接受的编程模式（在 ASP.NET MVC 中）来传递一系列值

控制器/视图/ **id1-id2**

View 方法（在代码隐藏中）会是什么样子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T09:59:55.390

首先是

```
controller/action/some-url-segment 
```

视图只是带有视图结果的操作方法返回的表示逻辑，通常将视图传递给模型。

其次：没有用于 ASP.NET MVC 视图的代码绑定文件，这不是 Web 表单。

服务器端可能的路由可以定义如下：

```
url: "{controller}/{action}/page-{pagenum}" 
```

这将捕获任何网址，例如`/admin/getuserlist/page-5`

一个操作方法也会接收这些 url 段参数。

```
ActionResult GetUserList(int pagenum) 
```

以上从路由中定义的 URL 段获取 ActionMethod 参数值。

您还可以通过查询字符串传递这些值：

```
/Admin/getuserlist?page=3&pagesize=45 
```

使用查询字符串传递值时，您不需要修改路由。

和一条路线，例如`url: {controller}/{action}/`

很乐意将该请求传递给：

```
ActionResult GetUserList(int page, int pagesize) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:36:16.510

**/控制器/索引?var1=1&var2=2&var3=3**

```
ActionResult Index(int? var1, int? var2, int? var3)
{
    Return Content(
        String.Format("You entered: {0}, {1}, {2}", var1, var2, var3));
} 
```

结果：

```
You entered: 1, 2, 3 
```

**/Controller/Index?values=1&values=2&values=3**

```
ActionResult Index(IEnumerable<int> values)
{
    Return Content(
        String.Format("You entered: {0}, {1}, {2}", values[0], values[1], values[2]));
} 
```

结果：

```
You entered: 1, 2, 3 
```

抱歉，我没有任何代码隐藏经验。我很好奇，你为什么用它？

# android - 从另一台设备移植内核

> ID：15961306
> 
> 赞同：-1
> 
> 时间：2013-04-12T00:48:00.177
> 
> 标签：android, kernel, porting, smartphone, cyanogenmod

我正在为我的设备开发 CM10，我想从另一台设备移植 3.4 内核（因为我的设备没有 3.4 内核）。

我对android开发相当陌生，因此我需要一些指导。

是的，我有 CM10 源并且我已经设置了我的设备和供应商目录。我仍然需要下载内核源代码。

另一个问题是我的手机是华为Ideos X5。移植内核的最佳手机是什么。它应该是与我的规格相同的设备吗？

如果您有任何问题，请询问。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:57:25.720

如果两个设备是相同的架构（即 ARMv7），并且内核没有静态链接到它的驱动程序，您可能能够完成内核移植。对于第一部分，您可以检查设备上的 /proc/cpuinfo - 通常任何具有相同功能集的处理器都应该可以工作。

然而，需要关注的是模块——运行底层硬件（GPS、加速度计、帧缓冲区等）所需的设备驱动程序。您可能没有这些源代码，因此如果您要移植内核，您必须确保内核版本的魔法是相同的——直到次要版本和额外版本。

# vb.net - 如何指定 Enumerable.Count() 而不是 List.Count？

> ID：15961308
> 
> 赞同：10
> 
> 时间：2013-04-12T00:48:11.453
> 
> 标签：vb.net, extension-methods

尝试使用 Visual Basic 中的[Enumerable.Count()](http://msdn.microsoft.com/en-CA/library/bb535181%28v=vs.100%29.aspx)扩展方法时，以下代码会导致编译时错误：

```
Imports System.Linq

Module Module1

    Sub Main()
        Dim l As New List(Of Foo) From {New Foo("a"), New Foo("b"), New Foo("a")}

        Dim i As Integer = l.Count(Function(foo) foo.Bar = "a")

        Console.WriteLine(i)
        Console.ReadLine()
    End Sub

    Class Foo

        Sub New(ByVal bar As String)
            Me.Bar = bar
        End Sub

        Public Property Bar As String
    End Class
End Module 
```

产生的错误是：

> 'Public ReadOnly Property Count As Integer' 没有参数，它的返回类型不能被索引。

我的目标是 .NET 4.0，所以应该支持扩展方法。还值得注意的是，C# 中的等效代码正确地推断出扩展方法......

为什么编译器无法推断 Enumerable.Count 的使用，给定我作为参数传递的谓词，以及如何*使用*扩展方法而不是 List 的 Count 属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-04T14:59:29.737

`Count`VB.Net 编译器首先尝试查找`List`实例，然后找到`Count`属性。使用此属性而不是扩展方法，因为字段和属性总是按名称隐藏扩展方法。我不知道这在 Visual Basic 语言规范中的位置，但您可以在此[MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/cc163317.aspx)中阅读更多内容：

> 字段和属性总是按名称隐藏扩展方法。图 4 显示了具有相同名称和各种调用的扩展方法和公共字段。尽管扩展方法包含第二个参数，但该字段会按名称隐藏扩展方法，并且使用此名称的所有调用都会访问该字段。各种重载调用都将编译，但它们在运行时的结果可能出乎意料，因为它们将绑定到属性并使用默认属性行为来返回单个字符或导致运行时异常。选择扩展方法的名称很重要，这样可以避免与属性、字段和现有实例方法发生冲突。

因此，`Count(Function(foo) foo.Bar = "a")`可能意味着：使用 调用`Count`-property `Function(foo) foo.Bar = "a"`，或获取`Count`-property 的结果并使用 对其进行索引`Function(foo) foo.Bar = "a"`，这可能是完全有效的，因为 VB.Net 中的索引属性可以采用任何参数。

这适用于 C#（我猜），因为 C# 编译器更容易区分方法调用和属性访问，因为与 VB.Net C# 不同的是，C# 不允许属性和索引属性上的任意参数。

* * *

要使用扩展方法，您可以像调用其他所有静态（共享）方法一样调用它：

```
Dim i As Integer = Enumerable.Count(l, Function(foo) foo.Bar = "a") 
```

或明确`Call`调用：`IEnumerable`

```
Dim i As Integer = l.AsEnumerable().Count(Function(foo) foo.Bar = "a") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:54:03.917

我不确定为什么您没有将重载作为选项，但是您应该能够将列表强制转换`IEnumerable(Of Foo)`为编译器将不再允许`List(Of Foo).Count`属性的点。

```
CType(l, IEnumerable(Of Foo)).Count(Function(foo) foo.Bar = "a") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-11T18:36:44.067

要回答你关于*为什么*VB 在这种情况下不能做 C# 的问题......

VB 允许您使用`()`名称后访问属性，还允许您通过省略`()`. 索引器也使用圆括号，而不是 C# 中的方括号。这些是旨在使编程更容易的巨大 VB 功能的示例，这实际上会导致更模棱两可、更难理解和容易出错的代码。

因此，在这种特殊情况下，VB 看到您正在访问 Count，并假定它后面的括号是 Count 属性的索引器，而不是 Count 函数的参数。

C# 看到圆括号，并意识到您没有访问索引器，您必须调用函数，因此查找函数。

当然，在 C# 中也有歧义的空间。例如，与扩展方法同名的属性，它返回一个委托类型，将优先于扩展方法被调用......

```
public Action Count { get; set; } 
```

啊……快乐的日子。

至于如何调用 IEnumerable.Count() 函数，强制转换（最好`DirectCast()`）或直接执行扩展方法`Enumerable.Count(...)`，远比创建一个全新的数组来调用 count 更可取......！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T13:10:35.670

如果列表转换为数组，它可以工作

```
 Dim l As New List(Of Foo) From {New Foo("a"), New Foo("b"), New Foo("a")}
    Dim i As Integer = l.ToArray.Count(Function(x) x.Bar = "a") 
```

# python - 碰撞检测未正确报告

> ID：15961309
> 
> 赞同：0
> 
> 时间：2013-04-12T00:48:18.617
> 
> 标签：python, tkinter

我之前发布过关于我正在从事的这个项目（你的回答有帮助！）但我仍然有点模糊为什么我的碰撞检测报告不完全正确。对于游戏所走的每一个图块，它都会返回 true，包括当我将我的玩家角色移动到可碰撞的图块上时。我只想知道我的碰撞检测算法是否有问题，或者其他地方是否有问题。

```
def checkPlayerEnvCollision(self,player):
    rowCount = 0
    for row in self.cLayer:
        colCount = 0
        for col in row:
            print("col: " + str(col))
            #print(str(self.Level.tileLayer[row][col]) + ": " + str(c[row][col]))
            if col:
                grid_position = (colCount*32, rowCount*32)
                collide_x = False
                collide_y = False

                print(str(grid_position))
                # check x axis for collision
                if player.x + 32 > grid_position[0]:
                    collide_x = True
                elif player.x < grid_position[0] + 32:
                    collide_x = True

                print("Player x: " + str(player.x) + " Player y : " + str(player.y))

                # check y axis for collision
                if player.y < grid_position[1] + 32:
                    collide_y = True
                elif player.y + 32 > grid_position[1]:
                    collide_y = True

                print("collide_x: " + str(collide_x) + " " + "collide_y: "+ str(collide_y))

                # act on a collision on both axis
                if collide_x and collide_y:
                    print("COLLISION DETECTED")
                else:
                    print("NOCOLLISION___")
            colCount += 1
        rowCount += 1 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:59:39.967

我认为这样的代码：

```
 if player.x + 32 > grid_position[0]:
                collide_x = True
            elif player.x < grid_position[0] + 32:
                collide_x = True 
```

需要改成这样：

```
 if grid_position[0] + 32 > player.x > grid_position[0]:
                collide_x = True 
```

（是的，它是 Python 的一个特性，你可以像这样链接比较运算符）

# elasticsearch - 用于 Solr 的 EmbeddedSolrServer 的 elasticsearch 等效项

> ID：15961312
> 
> 赞同：0
> 
> 时间：2013-04-12T00:48:28.067
> 
> 标签：elasticsearch, solrj

是否可以在没有 http 和序列化开销的情况下更新使用弹性搜索构建的索引？我正在寻找一个与 solrj 可用的 EmbeddedSolrServer 等效的弹性搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:13:58.230

当然可以，使用 elasticsearch，您可以轻松启动本地节点并将其嵌入到您的应用程序中。

对于本地节点，我的意思是本地发现，在 jvm 中本地。

查看[Java API](http://www.elasticsearch.org/guide/reference/java-api/client/)文档，其中有一个关于如何启动本地节点的示例：

```
Node node = nodeBuilder().local(true).node();
Client client = node.client(); 
```

完成后不要忘记将其关闭：

```
node.close(); 
```

看看我也写的这个博客：[elasticsearch beyond big data - running elasticsearch embedded](http://blog.trifork.com/2012/09/13/elasticsearch-beyond-big-data-running-elasticsearch-embedded/)。

# javascript - 带有红色色调的谷歌地图 - 通过 Javascript API

> ID：15961313
> 
> 赞同：0
> 
> 时间：2013-04-12T00:48:52.160
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

我正在使用 jquery-ui-map 通过 Javascript API 在我的网页上显示 Google 地图。

我想给整个地图一个 #ff0000 的色调，但我不完全确定如何在我目前使用的 Javascript 代码中实现它。

我怎么做？

```
 $(function() { 
            demo.add(function() {

                $('#map_canvas').gmap({'center': '57.7973333,12.0502107', 'zoom': 10, 'disableDefaultUI':true, 'callback': function() {
                    var self = this;
                    self.addMarker({'position': this.get('map').getCenter() }).click(function() {
                        self.openInfoWindow({ 'content': 'Hello World!' }, this);
                    }); 
                }});
            }).load();
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:29:28.070

gmap 有一个**backgroundColor**属性，我想你想要的是这样的

```
$('#map_canvas').gmap({'backgroundColor':#ff0000,'center': '57.7973333,12.0502107', 'zoom': 10,  'disableDefaultUI':true, 'callback': function(){} 
```

如果没有，您可以参考 Google maps api about MapOptions。 [https://developers.google.com/maps/documentation/javascript/reference#MapOptions](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)

# ajax - Rails数据表ajax json 414请求URI太大

> ID：15961323
> 
> 赞同：5
> 
> 时间：2013-04-12T00:49:43.910
> 
> 标签：ajax, ruby-on-rails-3.2, datatables

所以我尝试了[Railscasts](http://railscasts.com/episodes/340-datatables)教程，以及[ajax-datatables-rails](http://rubydoc.info/gems/ajax-datatables-rails/0.0.1/frames) gem 的教程。我正在从数据库创建客户列表——而不是用户。我相信我已经将其范围缩小到这样一个事实，即当`GET`通过 Datatables' 使用该方法时`sServerMethod`，我收到一个带有“ **Request-URI too large** ”的 414。当我使用该`POST`方法时，我只是为所有属性获取空值，除非`id`这是有意义的，因为 POST json 用于创建客户端。任何帮助是极大的赞赏！

这是我的代码和诊断响应：

```
// custom.js    
$("#datatable").dataTable({
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": $('#datatable').data('source'),
    }); 
```

回复：

```
http://127.0.0.1:3001/clients.json
Request-URI Too Large 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T22:31:54.727

设法通过安装 gem **thin**来修复错误。

`Gemfile`如果您遇到此问题，请将此行添加到您的：

```
gem 'thin' 
```

# java - Java - 通过 MouseListener 获取特定像素的强度值

> ID：15961328
> 
> 赞同：1
> 
> 时间：2013-04-12T00:50:11.190
> 
> 标签：java, image, mouselistener

有人能告诉我为了获得图像中一个特定像素（用户单击的像素）的像素强度需要使用的类吗，比如说，在某些 JPanel 中？如果这有所不同，这将是一个灰度图像。换句话说，假设用户点击图像中的某个点 (x, y)。我怎样才能得到这个点（x，y）的强度值？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T00:54:46.237

[机器人](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)可以为颜色做到这一点

使用方法

```
getPixelColor(int x, int y) 
```

有关将颜色转换为灰度的提示，请参阅此[问题](https://stackoverflow.com/questions/2780546/converting-a-number-to-a-greyscale-color-in-java)

# ruby - 使用空格拆分字符串，同时将 \n 保留为单独的元素

> ID：15961334
> 
> 赞同：3
> 
> 时间：2013-04-12T00:51:05.750
> 
> 标签：ruby, parsing, split, newline, whitespace

我正在使用 Ruby 并寻找一种方法来读取包含以下文本的示例字符串：

```
"This is a test
file, dog cat bark
meow woof woof" 
```

并将元素拆分为基于空格的字符数组，但将`\n`数组中的值保留为单独的元素。

我知道我可以用`string.split(/\n/)`得到

```
["this is a test", "file, dog cat bark", "meow woof woof"] 
```

也`string.split(/ /)`产生

```
["this", "is", "a", "test\nfile,", "dog", "cat", "bark\nmeow", "woof", "woof"] 
```

但我正在寻找一种方法来获得：

```
["this", "is", "a", "test", "\n", "file,", "dog", "cat", "bark", "\n", "meow", "woof", "woof"] 
```

有没有办法使用 Ruby 来完成这个任务？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T01:13:06.703

这是一件奇怪的事情，但是：

```
string.split /(?=\n)|(?<=\n)| /
#=> ["This", "is", "a", "test", "\n", "file,", "dog", "cat", "bark", "\n", "meow", "woof", "woof"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T01:30:50.323

你可以稍微改变你的逻辑，寻找你想要的东西，而不是寻找你想要的东西之间的分隔符。[`scan`](https://ruby-doc.org/core/String.html#method-i-scan)像这样的简单应该可以解决问题：

```
>> s.scan(/\S+|\n+/)
=> ["This", "is", "a", "test", "\n", "file,", "dog", "cat", "bark", "\n", "meow", "woof", "woof"] 
```

这假设重复`\n`当然应该是一个单一的标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T00:58:12.320

这不是特别优雅，但您可以尝试替换`"\n"`为`" \n "`（注意周围的空格`\n`），然后将生成的字符串拆分为`/ /`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T01:48:55.743

这是一个奇怪的要求，也许，如果您告诉我们您*为什么*要这样做，我们可以帮助您以更直接和传统的方式进行。

看起来您正在尝试拆分单词并且仍然知道原始行尾在哪里。将行拆分成单个单词对很多事情都很有用，但保持行尾……根据我的经验，这不是很多。

当我处理文本并需要拆分行进行处理时，我会这样做：

```
text = "This is a test
file, dog cat bark
meow woof woof"

data = text.lines.map(&:split) 
```

此时，`data`看起来像：

```
[["This", "is", "a", "test"],
 ["file,", "dog", "cat", "bark"],
 ["meow", "woof", "woof"]] 
```

我知道每个子数组是一个单独的行，所以如果我需要按行处理，我可以使用类似`each`or的迭代器来完成`map`，或者重建原始文本，我可以`join(" ")`使用子数组元素，然后`join("\n")`生成的行：

```
data.map{ |a| a.join(' ') }.join("\n")
=> "This is a test\nfile, dog cat bark\nmeow woof woof" 
```

# graph - 使用密码检测neo4j属性图中的循环

> ID：15961336
> 
> 赞同：13
> 
> 时间：2013-04-12T00:51:13.297
> 
> 标签：graph, neo4j, cycle, cypher

使用密码在相当大的图中检测循环的最佳方法是什么。

我有一个图，它有大约 250000 个节点和大约 270000 个关系，我想检测大约 10k 个节点和涉及 100k 个关系的子图中的循环。我写的密码就像

```
start 
      n = node:node_auto_index(some lucene query that returns about 10k nodes)

match
    p =  n-[:r1|r2|r3*]->n
return p 
```

然而，这并不是非常有效的。

有人可以建议一个更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-09-03T06:24:42.643

您目前使用的查询将返回每个节点的所有路径。将其更改为

```
start 
      n = node:node_auto_index(some lucene query that returns about 10k nodes)
where (n)-[*]->(n)
return distinct p, n 
```

一旦找到给定节点的路径，就会让 Neo4j 停止。它可能仍然会很慢，但肯定不会那么慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-16T23:22:53.950

1) 计数未标记的节点
2) 标记没有传出关系的节点（叶子）
3) 标记没有传入关系的节点（根）
4) 如果在 2 或 3 中标记了任何节点，则返回步骤 1

5）如果未标记的节点仍然存在，您至少有 1 个周期

如果仍有太多无法识别循环，则循环将位于未标记节点的集合中，
查看具有最少 [in|out] 边的节点可能会有所帮助

# php - 在表单中选择选项时如何关闭不同页面中的背景声音

> ID：15961338
> 
> 赞同：0
> 
> 时间：2013-04-12T00:51:59.993
> 
> 标签：php, html, settings

我有两个文件`settings.php`和`main.php`. 在 main.php 中，有背景音乐播放，我知道不是每个人都会喜欢，但有些人会喜欢。

```
<bgsound src="theme.mp3" loop="5"> 
```

在设置中，有一个带有两个单选按钮的表单可以打开或关闭它，但我不知道该怎么做。

```
<form id="form1" name="form1" method="post" action="">
  <fieldset>
  <legend>Application Settings</legend>
  <p>

  Background Music
    <label> <br />
    <input type="radio" name="Background Music" value="yes" id="Background Music_0" />
On</label>
    <br />
    <label>
     <input type="radio" name="Background Music" value="no" id="Background Music_1" />
 Off</label>
</form> 
```

当用户返回 main.php 时，关闭背景音乐的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:04:06.617

我会在用户登录后立即将所有内容存储在会话中。更改设置时，数据库和会话都应该更新，并且要在其中添加音乐，只需检查适当的会话变量即可。

# html - CSS 过渡在 Chrome 扩展中不起作用

> ID：15961340
> 
> 赞同：0
> 
> 时间：2013-04-12T00:52:42.107
> 
> 标签：html, css, google-chrome-extension

我正在尝试使“学分”一词在`:hover`编辑时展开以在 Chrome 扩展程序中显示学分。它不工作。
这是我的学分CSS：

```
.credits{
float: right;
text-align: right;
cursor: default;
}

.hiddencredits{
display: none;
width: 1px;
height: 1px;
-webkit-transition: width 2s, height 2s;
text-align: center;
cursor: default;
}

.credits:hover .hiddencredits{
display: block;
width: 100px;
height: 100px;
background: black;
color: white;
} 
```

当我将鼠标悬停在文本上时，它会打开演职员表，但不会出现过渡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:01:41.060

而不是`display`财产，使用`visibility`或`opacity`财产。

[http://jsfiddle.net/chKNw/1/](http://jsfiddle.net/chKNw/1/)

```
.credits {
    float: right;
    text-align: right;
    cursor: default;
}
.hiddencredits {
    visibility: hidden;
    width: 0;
    height: 0;
    -webkit-transition:width 2s, height 2s;
    text-align: center;
    cursor: default;
}
.credits:hover .hiddencredits {
    visibility: visible;
    width: 100px;
    height: 100px;
    background: black;
    color: white;
} 
```

# winapi - 如何通过软件控制光标？

> ID：15961341
> 
> 赞同：1
> 
> 时间：2013-04-12T00:52:54.450
> 
> 标签：winapi

基本上，我想开发一个不用鼠标就可以移动和控制光标的软件。但我不知道从什么开始。我有一个粗略的想法，即使用 C/C++ 调用 Windows API。任何人都可以提供一些教程或提示吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T01:21:07.147

您可以找出鼠标指针使用的[`GetCursorPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648390%28v=vs.85%29.aspx)位置，使用 移动它[`SetCursorPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648394%28v=vs.85%29.aspx)，并使用 发送鼠标点击[`SendInput`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx)。有一个从链接页面中使用它们的示例。

# c++ - Debian 上的音频采样

> ID：15961343
> 
> 赞同：0
> 
> 时间：2013-04-12T00:52:59.717
> 
> 标签：c++, audio, debian, alsa

我们正在使用 ALSA 运行 Debian，我们需要从音频输入行中提取音频样本。我们希望能够用这些样本填充缓冲区，因此在它们到来时对它们执行操作。

我们已经尝试直接查看 ALSA 调用，但由于很多资源都非常陈旧，因此我们遇到了折旧函数的问题。

关于这个问题的方向有什么好的参考或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:58:38.033

看看[http://jackaudio.org/](http://jackaudio.org/)

根据维基百科：

> JACK 音频连接套件（或 JACK）是一个专业的声音服务器守护程序，它为实现其 API 的应用程序之间的音频和 MIDI 数据提供实时、低延迟的连接。JACK 是递归的缩写。JACK 由 Paul Davis 领导的开源开发者社区开发（他在 2004 年因这项工作获得了开源奖）[3]，并且一直是 Linux 上专业音频软件的关键基础设施和事实上的标准自 2002 年成立以来。服务器是自由软件，在 GNU GPL 下获得许可，而库在更宽松的 GNU LGPL 下获得许可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:43:29.063

使用一些最新的示例，如下所示：

```
#include <alsa/asoundlib.h>

static char *device = "default"; /* capture device */

unsigned short buffer[2 * 24000];

int main(void)
{
    int err;
    snd_pcm_t *handle;
    snd_pcm_sframes_t frames;

    if ((err = snd_pcm_open(&handle, device, SND_PCM_STREAM_CAPTURE, 0)) < 0) {
        printf("open error: %s\n", snd_strerror(err));
        exit(EXIT_FAILURE);
    }
    if ((err = snd_pcm_set_params(handle,
                                  SND_PCM_FORMAT_S16,
                                  SND_PCM_ACCESS_RW_INTERLEAVED,
                                  2,
                                  48000,
                                  1,
                                  500000)) < 0) { /* 0.5 sec */
        printf(" open error: %s\n", snd_strerror(err));
        exit(EXIT_FAILURE);
    }

    for (;;) {
        frames = snd_pcm_readi(handle, buffer, 24000);
        if (frames < 0)
            frames = snd_pcm_recover(handle, frames, 0);
        if (frames < 0) {
            printf("snd_pcm_readi failed: %s\n", snd_strerror(err));
            break;
        }

        // ...
    }

    snd_pcm_close(handle);
    return 0;
} 
```

# java - 不可见的 JRadioButtons

> ID：15961344
> 
> 赞同：1
> 
> 时间：2013-04-12T00:53:03.937
> 
> 标签：java, swing, jframe, invisible, jradiobutton

我有三个不同的 JRadioButton，它们都添加到一个 JPanel 中。当我将 JPanel 添加到 JFrame 时，只显示 lvl3 JRadioButton。如果我将该行注释掉，则不会显示任何按钮。有什么我正在做的事情吗？还是我应该使用 JRaduiButtonGroups？

```
import javax.swing.*;
import java.awt.*;
import javax.swing.event.*;
import java.awt.event.*;
import java.util.Timer;

public class CastleDefenders {
static Timer timer;
Toolkit tlkt;
private JMenuBar mb2 = new JMenuBar();
private static boolean startGame = false;
private static JFrame f = new JFrame("Castle Defenders");
private static JFrame g = new JFrame("Castle Defenders");
private JRadioButton lvl1 = new JRadioButton("Easy");
private JRadioButton lvl2 = new JRadioButton("Normal");
private JRadioButton lvl3 = new JRadioButton("Hard");
private JPanel pnl = new JPanel();
private JTextField lbl = new JTextField("Welcome to Castle Defenders!");
private JButton btn = new JButton("START");
private JMenuBar mb = new JMenuBar();
private JMenu mnuFile = new JMenu("File");
private JPanel pnl2 = new JPanel();
private JMenuItem mnuItemQuit = new JMenuItem("Quit");
private JMenu mnuHelp = new JMenu("Help");
private JMenuItem mnuItemAbout = new JMenuItem("About");

public CastleDefenders(){
    lvl1.setToolTipText("Play the game on Easy");
    lvl2.setToolTipText("Play the game on Normal");
    lvl3.setToolTipText("Play the game on Hard");
    pnl2.add(lvl1);
    pnl2.add(lvl2);
    pnl2.add(lvl3);
    tlkt = Toolkit.getDefaultToolkit();
    timer = new Timer();
    pnl2.setBounds(50, 5, 1, 10);
    btn.setBounds(220, 240, 5, 1);
    f.setJMenuBar(mb2);
    g.setJMenuBar(mb2);
    mnuFile.add(mnuItemQuit);
    mnuHelp.add(mnuItemAbout);
    mb.add(mnuFile);
    mb.add(mnuHelp);
    mb2.add(mnuFile);
    mb2.add(mnuHelp);
    pnl.add(btn);
    pnl2.add(lbl);
    lbl.setBounds(0, 240, 10, 2);
    lbl.setEditable(false);
    f.getContentPane().setLayout(new BorderLayout());
    f.getContentPane().add(pnl, BorderLayout.CENTER);       
    f.addWindowListener(new ListenCloseWdw());
    g.getContentPane().setLayout(new BorderLayout());
    g.getContentPane().add(pnl2);   
    g.addWindowListener(new ListenCloseWdw());
    mnuItemAbout.addActionListener(new GetAboutInfo());     
    btn.addActionListener(new GetButtonClick());    
    mnuItemQuit.addActionListener(new ListenMenuQuit());

}

public class GetButtonClick implements ActionListener{
    public void actionPerformed(ActionEvent e){
        startGame = true;
        //JOptionPane.showMessageDialog(null, "WIP");
    }
}
public class GetAboutInfo implements ActionListener{
    public void actionPerformed(ActionEvent e){
        JOptionPane.showMessageDialog(null, "Made By Byron Lathi");
    }
}
public class ListenCloseWdw extends WindowAdapter{
    public void windowClosing(WindowEvent e) {
        System.exit(0);
    }
}
public class ListenMenuQuit implements ActionListener{
    public void actionPerformed(ActionEvent e){
        System.exit(0);
    }
}
public void launchFrameF(){
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    f.pack();
    f.setBounds(0, 0, 640, 680);
}
public void launchFrameG(){
    g.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    g.pack();
    g.setBounds(0, 0, 640, 680);
    g.getContentPane().add(lvl1).setBounds(1, 1, 1, 1);
    g.getContentPane().add(lvl2).setBounds(2, 2, 1, 1);
    g.getContentPane().add(lvl3).setBounds(3, 3, 1/2, 1/2);

}
public static void main(String args[]) {
    final CastleDefenders main = new CastleDefenders();
    main.launchFrameF();
    f.setVisible(true);
    do {
        System.out.print("");
    }while(startGame == false);
    if (startGame == true){
        JOptionPane.showMessageDialog(null, "We've come so far...");
        f.setVisible(false);
        main.launchFrameG();
        g.setVisible(true);
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:38:43.877

在您的代码中，您已经在 pnl2 JPanel 中有那些单选按钮，并且该面板已经添加到框架内容窗格中。通过在 launchFrameG() 方法中调用 getContentPane().add() 方法再次重新添加单选按钮替换框架的内容窗格，这会使您的面板被替换。仅添加最后添加的组件仍保留在内容窗格中。

# sql - 使用 SELECT 导致另一个 SELECT

> ID：15961349
> 
> 赞同：46
> 
> 时间：2013-04-12T00:53:20.767
> 
> 标签：sql, select

所以这是我的查询

```
SELECT 
    * 
FROM 
    Score  AS NewScores 
WHERE 
    InsertedDate >= DATEADD(mm, -3, GETDATE());

SELECT 
    ROW_NUMBER() OVER( ORDER BY NETT) AS Rank, 
    Name, 
    FlagImg, 
    Nett, 
    Rounds 
FROM (
    SELECT 
        Members.FirstName + ' ' + Members.LastName AS Name, 
        CASE 
            WHEN MenuCountry.ImgURL IS NULL THEN 
                '~/images/flags/ismygolf.png' 
            ELSE 
                MenuCountry.ImgURL 
        END AS FlagImg, 
        AVG(CAST(NewScores.NetScore AS DECIMAL(18, 4))) AS Nett, 
        COUNT(Score.ScoreID) AS Rounds 
    FROM 
        Members 
        INNER JOIN 
        Score 
            ON Members.MemberID = Score.MemberID 
        LEFT OUTER JOIN MenuCountry 
            ON Members.Country = MenuCountry.ID 
    WHERE 
        Members.Status = 1 
    GROUP BY 
        Members.FirstName + ' ' + Members.LastName, 
        MenuCountry.ImgURL
    ) AS Dertbl 
ORDER BY; 
```

该查询是为基于 GridView 的排行榜提供一个结果集，我想要的是只获得不到 3 个月的分数的平均值。如您所见，我将其分为两部分，显然它给出了这样的错误。

> 消息 4104，第 16 层，状态 1，第 2 行
> 
> `NewScores.NetScore`无法绑定多部分标识符“ ”。

这是因为这个`AVG(CAST(NewScores.NetScore AS DECIMAL(18, 4))) AS Nett`

我如何制作它以便我可以`NewScores`在那里使用，所以我只能得到不到 3 个月大的分数的平均值？

编辑：使用人们提供的答案，我通过在正确的位置使用连接解决了它，这是正确的查询：

```
SELECT ROW_NUMBER() OVER(ORDER BY NETT) AS Rank, Name, FlagImg, Nett, Rounds FROM (SELECT Members.FirstName + ' ' + Members.LastName AS Name, CASE WHEN MenuCountry.ImgURL IS NULL THEN '~/images/flags/ismygolf.png' ELSE MenuCountry.ImgURL END AS FlagImg, AVG(CAST(NewScores.NetScore AS DECIMAL(18, 4))) AS Nett, COUNT(NewScores.ScoreID) AS Rounds FROM Members INNER JOIN (SELECT * FROM Score WHERE InsertedDate >= DATEADD(mm, -5, GETDATE())) NewScores ON Members.MemberID = NewScores.MemberID LEFT OUTER JOIN MenuCountry ON Members.Country = MenuCountry.ID WHERE Members.Status = 1 GROUP BY Members.FirstName + ' ' + Members.LastName, MenuCountry.ImgURL) AS Dertbl ORDER BY Nett ASC 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-04-12T01:08:10.477

NewScores 是 Scores 表的别名 - 看起来您可以按如下方式组合查询：

```
SELECT 
    ROW_NUMBER() OVER( ORDER BY NETT) AS Rank, 
    Name, 
    FlagImg, 
    Nett, 
    Rounds 
FROM (
    SELECT 
        Members.FirstName + ' ' + Members.LastName AS Name, 
        CASE 
            WHEN MenuCountry.ImgURL IS NULL THEN 
                '~/images/flags/ismygolf.png' 
            ELSE 
                MenuCountry.ImgURL 
        END AS FlagImg, 
        AVG(CAST(NewScores.NetScore AS DECIMAL(18, 4))) AS Nett, 
        COUNT(Score.ScoreID) AS Rounds 
    FROM 
        Members 
        INNER JOIN 
        Score NewScores
            ON Members.MemberID = NewScores.MemberID 
        LEFT OUTER JOIN MenuCountry 
            ON Members.Country = MenuCountry.ID 
    WHERE 
        Members.Status = 1 
        AND NewScores.InsertedDate >= DATEADD(mm, -3, GETDATE())
    GROUP BY 
        Members.FirstName + ' ' + Members.LastName, 
        MenuCountry.ImgURL
    ) AS Dertbl 
ORDER BY; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-04-12T01:16:47.043

`WITH`如果您的 dbms 支持，您正在寻找的是带有子句的查询。然后

```
WITH NewScores AS (
    SELECT * 
    FROM Score  
    WHERE InsertedDate >= DATEADD(mm, -3, GETDATE())
)
SELECT 
<and the rest of your query>
; 
```

请注意，`;`上半场没有。HTH。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T01:01:45.643

您缺少 table `NewScores`，因此无法找到。加入这张桌子就行了。

如果你真的想避免直接加入它，你可以替换`NewScores.NetScore`为 `SELECT NetScore FROM NewScores WHERE {conditions on which they should be matched}`

# javascript - Javascript 正则表达式功能

> ID：15961351
> 
> 赞同：4
> 
> 时间：2013-04-12T00:53:37.093
> 
> 标签：javascript

我已经在这上面花了几个小时，但我似乎无法弄清楚这一点。

在下面的代码中，我试图准确了解其中的正则表达式是什么以及如何`url.match`工作。

由于代码如下，它不起作用。但是，如果我删除`(?:&toggle=|&ie=utf-8|&FORM=|&aq=|&x=|&gwp)`它似乎会给我我想要的输出。

但是，**我不想在不了解它在做什么的情况下删除它。**

我找到了一个非常有用的资源，但几个小时后我仍然无法准确确定这些表达式在做什么：

[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Using_Parenthesized_Substring_Matches](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Using_Parenthesized_Substring_Matches)

有人可以为我分解一下并解释它是如何解析字符串的。表达式本身和括号的位置对我来说并不是很清楚，坦率地说非常令人困惑。

任何帮助表示赞赏。

```
(function($) {    

  $(document).ready(function() {         

      function parse_keywords(url){
          var matches = url.match(/.*(?:\?p=|\?q=|&q=|\?s=)([a-zA-Z0-9 +]*)(?:&toggle=|&ie=utf-8|&FORM=|&aq=|&x=|&gwp)/);
          return matches ? matches[1].split('+') : [];

      }
      myRefUrl = "http://www.google.com/url?sa=f&rct=j&url=https://www.mydomain.com/&q=my+keyword+from+google&ei=fUpnUaage8niAKeiICgCA&usg=AFQjCNFAlKg_w5pZzrhwopwgD12c_8z_23Q";

      myk1 = (parse_keywords(myRefUrl));

      kw="";

      for (i=0;i<myk1.length;i++) {
          if (i == (myk1.length - 1)) {
          kw = kw + myk1[i];
          }
          else {
          kw = kw + myk1[i] + '%20';
          }
      }

      console.log (kw);

      if (kw != null && kw != "" && kw != " " && kw != "%20") {

      orighref = $('a#applynlink').attr('href');
      $('a#applynlink').attr('href', orighref + '&scbi=' + kw);
      }                     

  });  

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T01:06:05.183

让我们分解这个正则表达式。

```
/ 
```

开始正则表达式。

```
.* 
```

匹配零个或多个任何内容 - 基本上，我们愿意在字符串的任何位置将此正则表达式匹配。

```
(?:\?p=
|\?q=
|&q=
|\?s=) 
```

在这方面，`?:`意思是“不要捕获该组内部的任何东西”。见[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

`\?`意思是字面意思，通常是一个字符，`?`意思是“匹配前一个标记的 0 或 1 个副本”，但我们想要匹配一个实际的 ?。

除此之外，它只是在寻找多种不同的选项来选择（`|`意味着'如果我匹配我之前或之后的内容，则正则表达式是有效的。）

```
([a-zA-Z0-9 +]*) 
```

现在我们在任何排列中匹配零个或多个以下任何字符：`a-ZA-Z0-9 +`因为它在 a 内`()`，所以`?:`我们确实捕获它。

```
(?:&toggle=
|&ie=utf-8
|&FORM=
|&aq=
|&x=
|&gwp) 
```

我们看到另一个`?:`，所以这是另一个非捕获组。除此之外，它只是充满了由`|`s 分隔的文字字符，所以它没有做任何花哨的逻辑。

```
/ 
```

结束正则表达式。

总之，这个正则表达式在字符串中查找第一个非捕获组的任何实例，捕获其中的所有内容，然后查找第二个非捕获组的任何实例以“限制”它并返回这两者之间的所有内容非捕获组。（把它想象成一个“三明治”，我们寻找页眉和页脚并捕获我们感兴趣的所有内容）

正则表达式运行后，我们这样做：

返回匹配项？匹配[1].split('+') : [];

它抓取捕获的组并将其拆分`+`为字符串数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T01:24:46.940

对于这样的情况，使用[www.debuggex.com](http://www.debuggex.com/?re=.%2a%28?%3a%5C?p=%7C%5C?q=%7C&q=%7C%5C?s=%29%28%5Ba-zA-Z0-9%20%2b%5D%2a%29%28?%3a&toggle=%7C&ie=utf-8%7C&FORM=%7C&aq=%7C&x=%7C&gwp%29&flags=&str=http://www.google.com/url?sa=f&rct=j&url=https://www.mydomain.com/&q=my%2bkeyword%2bfrom%2bgoogle&ei=fUpnUaage8niAKeiICgCA&usg=AFQjCNFAlKg_w5pZzrhwopwgD12c_8z_23Q)（我构建的）将其可视化非常有帮助。它会立即向您显示正则表达式的结构，并允许您逐步完成。

在这种情况下，当您删除正则表达式的最后一部分时它起作用的原因是因为您的示例 url 中没有字符串`&toggle=`,`&ie=utf-8`等。要查看这一点，请在 debuggex 上拖动测试字符串上方的灰色滑块，您会看到它永远不会超过`&`最后一组中的。

# javascript - 在 switch 语句案例中使用 getElementByID.innerHTML？

> ID：15961353
> 
> 赞同：0
> 
> 时间：2013-04-12T00:53:46.017
> 
> 标签：javascript, html, switch-statement, innerhtml, getelementbyid

好吧，首先，这里是新手，所以我的问题答案可能非常简单，因为我错过了一些重要的事情。

我正在尝试使用 switch 语句，用 id="bbref" 切换出 h1 标记的 innerHTML。我将 userName 变量设置为“Lister”并创建了我的 switch 语句以将不同的行写入 h1 标记库，而不是为 userName 输入的名称。

出于某种原因，但是我的代码无法正常工作……有什么想法……或者我的大脑放屁明显吗？

这是代码：

```
 <!DOCTYPE html>
<html>
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Javascript Learning</title>
<script type="text/javascript">
var userName = "Lister";
switch (userName) {
    case "Lister" :
    document.write.getElementById("bbref").innerHTML = "Lister Is the Man!";
    break;
    case "Rimmer":
    document.write.getElementById("bbref").innerHTML = "Rimmer is a Smeg head...";
    break;
    default :
    doacument.write.getElementById("bbref").innerHTML = "It's all about \"The Cat\""
}

</script>
</head>
<body>
<header></header>
    <section>
        <article>
            <h1 id="bbref">Test Title</h1>
        </article>
    </section>
<footer></footer>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T00:58:23.477

你在那里搞砸了你的功能，改变：

```
document.write.getElementById("bbref").innerHTML = "Lister Is the Man!"; 
```

至：

```
document.getElementById("bbref").innerHTML = "Lister Is the Man!"; 
```

其余的以此类推。

`document.getElementById("bbref")`将获取元素并将`.innerHTML`成为元素内部的 HTML，更改它将直接更改可见的 HTML。所以什么都不需要`write`。

**小提琴：http:**
[//jsfiddle.net/H4hzE/](http://jsfiddle.net/H4hzE/)

* * *

**window.onload/$(document).ready()**

您在这里遇到的另一个问题是您的 javascript 代码在您的 HTML 呈现之前执行。将您的代码绑定到`window.onload`或`$(document).ready()`（如果使用 jQuery）以在页面加载后运行代码。

**window.onload 示例：**
[https ://developer.mozilla.org/en-US/docs/DOM/window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)

**jQuery 的 $(document).ready()：**
[http ://api.jquery.com/ready/](http://api.jquery.com/ready/)

**小提琴（使用window.onload）：http:**
[//jsfiddle.net/H4hzE/1/](http://jsfiddle.net/H4hzE/1/)

* * *

由于您说您是 JavaScript 新手，因此可能值得分享一些信息，`document.write()`因为我认为您可能有点误解了它的功能。:)

[http://www.w3schools.com/jsref/met_doc_write.asp](http://www.w3schools.com/jsref/met_doc_write.asp)
[http://javascript.info/tutorial/document-write](http://javascript.info/tutorial/document-write)
[https://developer.mozilla.org/en-US/docs/DOM/document.write](https://developer.mozilla.org/en-US/docs/DOM/document.write)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T00:59:34.043

document.write() 和 document.getElementById() 是两种不同的方法。在这种情况下，您只想使用 getElementById，因此在所有 3 种情况下都省略 .write，例如：

```
document.getElementById("bbref").innerHTML = "Lister Is the Man!"; 
```

# qt - 如何在 Qt 操作中添加本机图标？

> ID：15961354
> 
> 赞同：3
> 
> 时间：2013-04-12T00:53:49.160
> 
> 标签：qt, qt4, icons, qaction

这是我的 Qt 代码

```
openAction = new QAction("Open", this);
openAction->setShortcut(QKeySequence::Open); 
```

我知道我可以为此添加一个`Action`图标

```
openAction->setIcon(QIcon("file path from source file")); 
```

但我希望我可以添加`Native`这样的图标

![在此处输入图像描述](https://i.stack.imgur.com/6TuEf.jpg)

我应该怎么做？

* * *

是的！是的！是的！我自己得到了答案

你可以使用这个：

```
QIcon QIcon::fromTheme ( const QString & name, 
                         const QIcon & fallback = QIcon() ) [static] 
```

# objective-c - 有没有办法检测用户在 Mac 上是否有一段时间不活动？

> ID：15961355
> 
> 赞同：0
> 
> 时间：2013-04-12T00:53:54.513
> 
> 标签：objective-c, macos

我正在开发一个 Mac 应用程序来监控用户的行为以进行研究。我想检测用户是在积极使用计算机还是计算机只是处于待机状态。

是否有现有的方法来检测用户是否处于活动状态？

# c++ - 为什么可以取消引用 C++ 迭代器，尽管它不是指针？

> ID：15961360
> 
> 赞同：2
> 
> 时间：2013-04-12T00:54:20.223
> 
> 标签：c++, iterator, dereference

我正在阅读 C++ Primer 5th，遇到如下代码：

```
 string s("some string");
    if (s.begin() != s.end())
    {
      auto it = s.begin();   
      *it = toupper(*it);
    } 
```

`it`从迭代器接收到字符串中第一个字符的值`s`；然后将其更改为大写`toupper()`。它是如何`it`被取消引用的？它不应该只是一个 char 类型变量而不是指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T00:59:49.757

`it`是一个[迭代器](http://www.cplusplus.com/reference/iterator/)：

> 在 C++ 中，迭代器是任何对象，它指向一系列元素（例如数组或容器）中的某个元素，能够使用一组运算符（至少，递增 (++) 和取消引用 (*) 运算符）。
> 
> 迭代器最明显的形式是指针：指针可以指向数组中的元素，并且可以使用增量运算符 (++) 遍历它们。但是存在其他形式的迭代器。例如，每个容器类型（例如向量）都有一个特定的迭代器类型，旨在以有效的方式迭代其元素。
> 
> 请注意，虽然指针是迭代器的一种形式，但并非所有迭代器都具有与指针相同的功能。为了区分迭代器对特定算法的要求，存在五种不同的迭代器类别：

由于迭代器是**一个智能对象，其行为类似于指针**（最初指向字符串的开头 - 这是一个[容器](https://stackoverflow.com/a/1790103/866930)），并且迭代该容器，`it`因此可以取消引用，如您的代码示例中所示。因此，一般`it` **可以用作指针。**

在您的情况下，**字符串中指针的当前位置被分配给与该位置相同的*大写*字母**：

```
*it = toupper(*it); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:00:32.390

迭代器类型（这是使用 magic`auto`关键字掩盖的东西）是一个复杂的东西，而不是原始对象。

当您要求时`*it`，您将获得对该位置**的 char 的引用**。因此，您可以对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:14:00.840

```
 Shouldn't it just be a char type variable and not a pointer? 
```

"it" 是一个迭代器（类似对象的指针）而不是指针。选择迭代器而不是指针有一定的好处。一个显着的好处是将算法与容器分开。因此具有通用算法（仅受迭代器类型的约束），从而将容器与算法分离。

请看一下 [STL 迭代器 - 目的](https://stackoverflow.com/questions/3046050/stl-iterators-purpose)。

# c++ - 如何随机填充矢量 > 带有 0 和 1

> ID：15961362
> 
> 赞同：0
> 
> 时间：2013-04-12T00:54:37.147
> 
> 标签：c++

`vector<vector<bool>>`用 0 和 1随机化 a 的最简单方法是什么？我无法在网上找到答案，因此如果适用，请提供参考。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:08:37.597

[**现场演示**](http://liveworkspace.org/code/3UYHry)

```
#include <algorithm>
#include <iterator>
#include <iostream>
#include <ostream>
#include <cstdlib>
#include <vector>
using namespace std;

#define let const auto&

int main()
{
    let size = 128;
    let inner_size_max = 16;
    vector<vector<bool>> vs(size);

    for(auto &v : vs)
        generate_n(back_inserter(v),rand()%inner_size_max,[]
        {
            return rand()%2==0;
        });

    for(let v : vs)
    {
        for(let b : v)
            cout << b;
        cout << endl;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:38:49.473

[现场演示](http://liveworkspace.org/code/3o88lG%242)

我稍微偏爱可重用函数来生成单独的“行”，然后根据需要创建完整的“矩阵”。运行时间几乎与其他答案相同（由“实时工作区”确定（运行时间约 0.1 秒）

```
#include<iostream>
#include<vector>
#include<cstdlib>
#include<algorithm>

// this is a transparent, reusable function
template<size_t N>
std::vector<bool> generate_bits() {
  std::vector<bool> bits;
  bits.reserve(N);
  for(size_t k=0; k<N; k++) {
    bits.push_back(rand() % 2 == 0);
  }
  return stdbits; // rvo, or use std::move
}

int main() {
  std::vector<std::vector<bool>> bits;  
  bits.resize(128);  
  std::generate(bits.begin(), bits.end(), generate_bits<16>);

  // stole the cool printing statement
  for(auto&& v : bits) {
    for(auto&& b : v) {
      std::cout<<b;
    }
    std::cout<<std::endl;
  }  
  return 0;
} 
```

# python - python：用单个\替换路径中的双\\

> ID：15961365
> 
> 赞同：3
> 
> 时间：2013-04-12T00:54:53.037
> 
> 标签：python

使用字符串：

```
"D:\\Whatever\\Folder\\Etc 1" 
```

我最终想变成

```
"D:\Whatever\Folder\Etc 1" 
```

我正在使用以下 Python：

```
ln=line[:-1].replace('\n','').replace('\r','').replace("\\\\","\\").rstrip(' ') 
```

但它并没有起到作用——有没有更好的做法来削减斜线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T00:58:02.050

我认为您正在打印为原始字符串，请参阅：

```
>>> "D:\\Whatever\\Folder\\Etc 1"
'D:\\Whatever\\Folder\\Etc 1'
>>> 
>>> print "D:\\Whatever\\Folder\\Etc 1"
D:\Whatever\Folder\Etc 1 
```

还要检查这`'\\'`是单个字符（第一个 \ 是转义字符）：

```
>>> "D:\\Whatever\\Folder\\Etc 1"[2]
'\\' 
```

是你想要的吗？

正如你评论的：

```
>>> len("D:\\Whatever\\Folder\\Etc 1")
24
>>> "D:\\Whatever\\Folder\\Etc 1"[23]
'1'
>>> 
```

长度计算单个字符，正如我所说`'\\'`的是单个字符。字符串的长度是 24，最后一个 char 是 23 `1`。

更清晰：

```
>>> len('\\')
1 
```

另请参阅此示例：

```
>>> 'a\nb'
'a\nb'              # single \
>>> print 'a\nb'
a                   # no \ but, b printed on new line
b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:18:57.117

扩展 Eike 所说的：使用`/`而不是`\`A) 简化编写和 B) 确保您的代码在非 Windows 系统上运行时仍然有效。

另外，查看 中的函数`os.path`，例如：

```
>>> print os.path.abspath('d:/foo/bar/baz')
d:\foo\bar\baz
>>> print os.path.abspath('c:\\program files\\')
c:\program files 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T01:10:46.577

规范的方法是在文件名中使用斜线 ( `/`) 字符而不是反斜线 ( )。`\`这避免了混淆，并使您的程序可移植。Python 中所有与文件相关的函数都使用斜杠，Windows 也接受它们。

具体问题是逃避。反斜杠在常规 Python 字符串中被视为特殊字符。它用于表达其他难以表达的字符。例如`"\n"`换行符`"\t"`就是制表符。因此要表达反斜杠本身，你必须写`"\\"`, 这是一个单反斜杠字符。

如果您真的必须处理反斜杠，请使用*原始字符串*。这是编写字符串文字的另一种方法，其中反斜杠没有特殊含义。它们是这样创建的：

```
s = r"foo\bar" 
```

注意`r`开头的。变量`s`是一个包含 7 个字符的字符串。

但有一点复杂：`r"foo\"`是语法错误！原始字符串不能以反斜杠结尾。

# javascript - crm 2011 Polaris 流程表单上的 javascript

> ID：15961366
> 
> 赞同：0
> 
> 时间：2013-04-12T00:55:13.977
> 
> 标签：javascript, dynamics-crm-2011

除了使用 html 页面破解之外，如何在流程表单（Polaris 更新表单）上运行 javascript 代码？

Microsoft 是否不提供合适的选项/替代方案，因为事件处理程序使用经典表单打开？

我必须使用插件进行表单验证吗？我宁愿使用javascript。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:09:43.070

实际上 HTML Web Resource Hack 是使用 JavaScript 自定义新表单的唯一方法（并且是不受支持的自定义）

有必要等待 Microsoft 提供支持的方法的下一个更新。

如果您的客户仍想使用新表单并且您想使用插件进行自定义，请记住还要处理自动保存超时，以避免不必要的更新。

# css - Height=100% 不适用于 Internet Explorer 中的 iframe

> ID：15961370
> 
> 赞同：0
> 
> 时间：2013-04-12T00:55:51.293
> 
> 标签：css, internet-explorer

我对 jsp 中 iframe 的高度有疑问。

当我使用`height="100%"`它时它不起作用，但是当我使用`height ="400px"`它时它正在工作。当我更改为浏览器模式：IE8 和文档模式：IE8 标准时，它只会在 IE 中发生。

# sql - Rails 3 ActiveRecord 按子属性分组

> ID：15961374
> 
> 赞同：0
> 
> 时间：2013-04-12T00:56:20.493
> 
> 标签：sql, ruby-on-rails-3, activerecord

我希望对订户列表进行重复数据删除，并认为我应该：

全选：订阅

加入或包括他们的 :mailing_address

按 mailing_address.name 分组

计数 > 1

我一生都无法弄清楚这个的语法。

我正在尝试对此的变化：

`dupes = Subscription.joins(:mailing_address).group("mailing_address.name")`

但这给了我`Unknown column 'mailing_address.name'`

我尝试了各种变化，但似乎无法弄清楚......

并且无法开始知道该`.having`声明会是什么样子。

任何想法或指示都会非常有帮助！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:33:10.803

如果您的子模型是 MailingAddress 类，那么常规的表名称将是`mailing_addresses`（复数形式）。

```
dupes = Subscription.joins(:mailing_address).group("mailing_addresses.name") 
```

# jquery - 带有图像的 jQuery Masonry 流体布局

> ID：15961378
> 
> 赞同：0
> 
> 时间：2013-04-12T00:57:15.143
> 
> 标签：jquery, css, jquery-masonry

我这样发起砌体：

```
container.imagesLoaded(function () {
        container.masonry({
            itemSelector: '.my-brick',
            columnWidth: function (containerWidth) {
                return (containerWidth - 80) / 4;
            }
        });
}); 
```

问题是`.my-brick`包含比应该计算的 columnWidth 更宽的图像。我本来希望脚本将项目的`width`CSS 属性设置为 columnWidth，但它没有使列与图片一样宽。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:10:46.877

是的。您必须`.my-brick`使用 CSS 设置宽度。

建议使用网格系统。

如果您的布局中的项目元素具有多列宽度，则该`columnWidth`选项用于设置动态列宽，并且按列表示项目在 DOM 中设置的绝对位置。它用于`columnWidth`确定项目之间的距离。如果`columnWidth`未设置，则它将采用第一项的尺寸

# wcf - 如何在没有托管在 IIS 中的配置文件的 wcf 服务的代码中设置 maxreceivedmessagesize wcf 设置

> ID：15961382
> 
> 赞同：0
> 
> 时间：2013-04-12T00:57:51.410
> 
> 标签：wcf, iis, configuration, settings, maxreceivedmessagesize

我继承了一个项目，该项目包含一组托管在 iis 中的 wcf 服务，没有配置文件条目。我需要增加 maxreceivedmessagesize wcf 设置。我将如何在代码中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:13:06.563

试试这段代码，

```
BasicHttpBinding binding = proxy.Endpoint.Binding as BasicHttpBinding;
binding.MaxReceivedMessageSize = 20000000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-21T17:35:52.897

**为了将来参考**，您可以在 web.config 中添加它（正如评论中的@Tim 建议的那样）。请注意，basicHttpBinding 没有指定名称，因此它成为该绑定类型的默认配置。

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding maxReceivedMessageSize="2147483647"/>
        </basicHttpBinding>
    </bindings>
</system.serviceModel> 
```

# mysql - Joomla 编程的最佳实践数据库类型

> ID：15961384
> 
> 赞同：0
> 
> 时间：2013-04-12T00:58:02.503
> 
> 标签：mysql, joomla, joomla2.5

我很好奇其他人在为 Joomla 中的后端组件（或模块）构建数据库时发现什么是最佳选择。

例如，在数据库中的一个简单的后端轮播中，我将使用：

* * *

**id**为**smallint unsigned**，不希望项目数达到 65k

**img**我做**varchar**并将url指向要上传的文件

**我做的是**tinytext**，因为我不希望它的标题超过 255 个字符**。****

 ****描述**我一直在使用**文本**，因为我不希望它们达到 65k... 此外，如果单击轮播项目，此文本描述将显示在灯箱中的图片下方。

**链接** 这将进入不同类型的轮播，但例如，如果我有一个链接，我会像 img url 一样使用**varchar 。**

**在这里订购** 时，我使用**smallint unsigned**就像使用 id 一样，因为它可能会达到那个值（不像 ID 那样容易，它是自动增量的，因此即使在删除项目后也会不断增加......）。

**为此**发布我使用****tinyint** ...这是最好的选择吗？没有我知道的布尔值。**

 *** * *

我目前正在使用 MySQLi 并在 Joomla 2.5.9 上进行开发（但最终/很快将迁移到 3.x）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:16:09.243

我倾向于遵循 Joomla 中使用的内容！核心，以便我的表、模型、控制器等可以充分利用 JTable、JModel 等功能，所以：

```
`id` int(10) unsigned NOT NULL AUTO_INCREMENT,
`title` varchar(255) NOT NULL DEFAULT '',
`description` mediumtext NOT NULL,
`state` tinyint(3) NOT NULL DEFAULT '0',
`images` text NOT NULL,
`urls` text NOT NULL,
`ordering` int(11) NOT NULL DEFAULT '0', 
```

请注意，这不仅是因为使用`published`了`state`Published 和 Unpublished 状态（例如`Trashed`，`Archived`还有自定义选项）。****

# c# - 使用 C# 在进程运行时冻结表单

> ID：15961385
> 
> 赞同：0
> 
> 时间：2013-04-12T00:58:06.567
> 
> 标签：c#, forms, process, freeze

我希望你能帮助我解决这个问题。

我正在使用按钮通过表单启动一个进程，然后它会等到进程关闭以便恢复表单。问题是当进程运行时表单仍然是可点击的，但在进程关闭之前它不会做任何事情。例如，如果进程正在运行并且我再次单击按钮，然后我关闭进程，它将再次启动，因为我在运行时按下按钮。

所以，我根本不希望表单是可点击的。

这是代码：

```
private void button1_Click(object sender, EventArgs e)
{
    var something = new Process
    {
        StartInfo = new ProcessStartInfo
        {
            FileName = "something.exe"
        }
    };

    if (File.Exists("something.exe"))
    {
        something.Start();
        something.WaitForExit();
    }
    else
    {
        MessageBox.Show("Message.", "Title", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

我也尝试过：

```
 this.Enabled = false;
            something.Start();
            something.WaitForExit();
            this.Enabled = true; 
```

但无论出于何种原因，当进程关闭时，表单会被最小化。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:17:15.167

您的代码暗示当您调用 WaitForExit() 时主应用程序被阻塞......这只会导致 WM 消息为您的应用程序排队，一旦您的消息泵再次获得 CPU，它们将得到处理。解决此问题的一种方法是使用 BackgroundWorker 线程，并且在主应用程序为您运行进程时不要阻塞它。就在您启动工作线程之前，禁用主窗体，并在工作完成方法中重新启用主窗体。确保当您启动工作线程时，您说明进程永远不会返回...实现此目的的一种方法是在启动工作线程之前启动一个计时器，并在合理的时间内启动计时器，如果该计时器在线程完成之前到期取消它并重新启用 UI。

这是与您尝试实现的相似的背景工作线程的文档：http: [//msdn.microsoft.com/en-us/library/cc221403 (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/cc221403(v=vs.95).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:17:26.873

该表单已最小化，因为您的进程正在打开一个控制台来执行。所以你需要做的是在没有控制台的情况下执行这个过程。请参阅`ProcessStartInfo`：

```
private void button1_Click(object sender, EventArgs e)
{
    var something = new Process {
        StartInfo = new ProcessStartInfo {
            FileName = "something.exe",
            CreateNoWindow=true,
            UseShellExecute=false
        }
    };

    if (File.Exists("something.exe")) {
        this.Enabled = false;
        something.Start();
        something.WaitForExit();
        this.Enabled = true;
    } else {
        MessageBox.Show("Message.", "Title", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
} 
```

该表单像往常一样被禁用和启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:32:47.370

如果您想使用线程，那么可能只是禁用控件而不是以下形式：

```
 this.SetControlEnables(false);
        something.Start();
        something.WaitForExit();
        this.SetControlEnables(true); 
```

SetControlEnables 将根据需要保存表单启用或禁用上的所有控件。

# java - java数组输出中的间距

> ID：15961386
> 
> 赞同：1
> 
> 时间：2013-04-12T00:58:07.037
> 
> 标签：java, arrays, runtime-error

我的代码有问题。我被要求使用包含摩尔斯电码和类似值的 txt 创建一个并行数组。例如：A .- B -... 等等...

这是我的错误所在 -

```
public class Translate
{
String input;
String code[];
String alphabet[];

public Translate(String input)
{
    this.input = input;
}

public void setInput(String input)
{
    this.input = input;
}

public void setAlph(String[] alphabet)
{
    this.alphabet = alphabet;
}

public void setCode(String[] code)
{
    this.code = code;
}

public String getInput()
{
    return input;
}

public String getTranslate()
{
    String output = "";
    for(int i = 0; i < input.length(); i++)
    {
        for(int index = 0; index < alphabet.length; index++)
        {
            if(input.charAt(i) == alphabet[index].charAt(0)
            {
                output = output + code[index];
            }
        }
    }
return output;
}
} 
```

线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：36

我通常不寻求帮助，但我已经为此工作了几个小时。我能看到将 input.charAt 与字母（字符串）进行比较的唯一方法是将字符串解析为 char 或在末尾添加 .charAt。我试过做 alphabet[index].charAt(index)) 但这也不起作用。它给了我同样的错误，只有 1 而不是 36

UPD 我在 Translate.getTranslate(Translate.java:39) 处收到错误“线程“主”java.lang.NullPointerException 中的异常”

UPD 不再接收错误。然而，我对我的下一个任务感到困惑。我需要在多个代码字母之间添加一个空格，在单词之间添加 3 个空格。例如：如果“嘿”是用户输入，则输出应该是“.... -.--”，而我收到“....-.--”

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:27:42.380

看起来你的问题是`for(int index = 0; index <= alphabet.length; index++)`- 你不断增加`index`直到它等于字母表的长度，这将使它超出你得到的异常的结尾。你应该`index < alphabet.length`避免这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:27:45.407

您没有显示所有变量声明和示例输入，因此以下内容基于我对它们的猜测。

1.  看起来奇怪的是“<=”，应该是“<”

    for(int index = 0; index <= alphabet.length; index++)

2.  您不应该每次都遍历字母表，而是事先准备好映射。那会更有效率。

# php - export XML from mySQL with PHP

> ID：15961390
> 
> 赞同：3
> 
> 时间：2013-04-12T00:58:20.850
> 
> 标签：php, mysql, xml

I have a bit of problem with my code at the moment and I hope you can help me with it.

First of the tabels

```
SELECT artist, album, song
FROM artist 
LEFT JOIN album
on artist.artist_ID = album.artist_ID
LEFT JOIN song
on album.album_ID = song.album_ID
ORDER BY artist.artist, album.album_ID, song.song_ID 
```

Im trying to export it as an XML with help of php so im creating the XML direct in the document so i just can press a link to view and access the xml. But the problem im having is that the song dont stack under album. Instead they do this:

```
<music>
 <artist name="$artist1">
  <album name="$album1">
   <song>$song1</song>
  </album>
 </artist>
</music>
<music>
 <artist name="$artist1">
  <album name="$album1">
   <song>$song2</song>
  </album>
 </artist>
</music> 
```

I want then to stack like this:

```
<music>
 <artist name="$artist1">
  <album name="$album1">
   <song>$song1</song>
   <song>$song2</song>
   <song>$song3</song>
  </album>
 </artist>
</music> 
```

This is the PHP-code i use at the moment to export to XML, something dont work here. I have been trying to fix it the last 12 hours without luck.

```
$export = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n"; 
$export="<myTunes>";

while($row = mysqli_fetch_array($result))
{   
    $export.="<music>";
    $artist=$row["artist"];
    $album=$row["album"];
    $song=$row["song"];

    $export.="  <artist name='$artist'> 
                    <album name='$album'>
                        <song>$song</song>
                    </album>
                </artist>";
    $export.="</music>";
}
$export.="</myTunes>";

file_put_contents("export.xml", $export);
echo "<a href='export.xml' target='_blank'>Export database as XML</a>"; 
```

Please help if you can, im starting to loose my mind over here. Best Regards, Chris

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:50:25.437

I'll suggest a different approach that will lead to the XML you want.
1\. I'll use `XMLWriter`, which comes with PHP, and
2\. rely on querying the database quite often. Going to the database often will put some load onto your db-server, which is bad if you create those XML-files every minute or so, or if many users do this at the same time, it's ok if you do it once in a while :-)
3\. I'll access the database using `PDO` instead of those old and rusty `mysql_*-functions`, using `prepared statements`, which is a cool feature.

```
// setting up PDO
$dbLocation = 'mysql:dbname=db001;host=localhost';
$dbUser = 'user';
$dbPass = 'password';
$db = new PDO($dbLocation, $dbUser, $dbPass);

// prepare all queries...
$dbArtists = $db->prepare("SELECT * FROM artist");
$dbAlbums =  $db->prepare("SELECT * FROM album WHERE artist_ID=:artist_id");
$dbSongs =   $db->prepare("SELECT * FROM song WHERE album_ID=:album_id");

// fetch all artists
$dbArtists->execute();
$artists=$dbArtists->fetchAll(PDO::FETCH_ASSOC);

$x=new XMLWriter();
$x->openMemory();
$x->startDocument('1.0','UTF-8');
$x->startElement('music');

foreach ($artists as $artist) {

    $x->startElement('artist');
    $x->writeAttribute('name',$artist['artist']);

    // fetch all albums of this artist        
    $dbAlbums->execute(array(':artist_id' => $artist['artist_id']));
    $albums = $dbAlbums->fetchAll(PDO::FETCH_ASSOC);

    foreach ($albums as $album) {

        $x->startElement('album');
        $x->writeAttribute('name',$album['album']);

        // fetch all songs from this album            
        $dbSongs->execute(array(':album_id' => $album['album_id']));
        $songs = $dbSongs->fetchAll(PDO::FETCH_ASSOC);

        foreach ($songs as $song) {

            $x->startElement('song');
                $x->text($song['song']);
            $x->endElement(); // song
        } // foreach $songs

        $x->endElement(); // album
    } // foreach $albums

    $x->endElement(); // artist
} // foreach $artists

$x->endElement(); // music
$x->endDocument();
$xml = $x->outputMemory();

// now save $xml to a file etc. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:23:36.983

The code below reflects only the general idea of one of the algorithms and, of course, it should be refactored in production version.

```
$export = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>\n"; 
$export .= "<myTunes>";
$export .= "<music>";

$lastArtist = $lastAlbum = null;

while($row = mysqli_fetch_array($result))
{   
    $artist=$row["artist"];
    $album=$row["album"];
    $song=$row["song"];

    if(($lastArtist == null) and ($lastAlbum == null))
         $export.="<artist name='$artist'><album name='$album'>";
    else
    {
        if($artist != $lastArtist)
            $export.="</artist><artist name='$artist'>";

        if($album != $lastAlbum)
            $export.="</album><album name='$album'>";
    }

    $export.=" <song>$song</song>";  

    $lastArtist = $artist;
    $lastAlbum = $album;  
}
$export.="</album></artist></music>";
$export.="</myTunes>";

file_put_contents("export.xml", $export);
echo "<a href='export.xml' target='_blank'>Export database as XML</a>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:30:56.677

The problem seems to be that you're looping over all of your results and writing all of the information out with each iteration.

You might consider using two queries. The first to get your artist and album which you can loop over and then a second to get your songs, the results of which could also be looped over inside your outer loop to add the songs as child elements to your album element.

# java - 实现一个地图来计算字符频率

> ID：15961392
> 
> 赞同：0
> 
> 时间：2013-04-12T00:58:24.163
> 
> 标签：java, map, character, frequency

基本上我正在尝试使用字符串作为键（单个字符）和整数变量（字符频率）来实现映射。

程序运行时我得到不准确的频率。有谁知道我哪里出错了？

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.HashMap;
import java.util.Map;
import java.util.Scanner;

public class WordCount {

    public static void main(String[] args) throws FileNotFoundException{
        File f1 = new File("article.txt");
        Scanner scan = new Scanner(f1).useDelimiter("|");

        Map<String, Integer> wordMap = new HashMap<String, Integer>();
        String letter;
        Integer value = 0;

        while(scan.hasNext()){

            letter = scan.next();

            if(wordMap.containsKey(letter)) wordMap.put(letter, value++);

            else wordMap.put(letter, new Integer(value++));
        }
        System.out.println(wordMap);

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:03:29.480

看起来问题出在这里：

```
while(scan.hasNext()){
    letter = scan.next();

    if(wordMap.containsKey(letter)) wordMap.put(letter, value++);  // problem

    else wordMap.put(letter, new Integer(value++));
} 
```

if 语句应如下所示：

```
if (wordMap.containsKey(letter)) {
    Integer prev = wordMap.get(letter);
    wordMap.put(letter, prev++);
}  else {
    wordMap.put(letter, 1);
} 
```

不过，为了更好一点，您只想在地图上进行一次查找，如下所示：

```
Integer prev = wordMap.get(letter);
if (prev == null) {
    wordMap.put(letter, 1);
}  else {
    wordMap.put(letter, prev++);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:02:51.460

这一点是错误的

```
 Integer value = 0;

    while(scan.hasNext()){

        letter = scan.next();

        if(wordMap.containsKey(letter)) wordMap.put(letter, value++);

        else wordMap.put(letter, new Integer(value++));
    } 
```

应该

```
 while(scan.hasNext()){

        letter = scan.next();

        //get current count
        int value;
        if(wordMap.containsKey(letter)){
            value = wordMap.get(letter);
        }else {
            value = 0;
        }
        // increment count
        value++;
        wordMap.put(letter, value);
    } 
```

将值放入映射或其他任何东西都不会重置它，或者神奇地将属性重新同步到我们想要的（至少在 java 中它没有）所以我们每次想要修改它时都必须从映射中获取值.

否则我们所做的就是在地图中放置一个随机值。在您的版本中，您将拥有的是遇到最后一个字母实例时的字符数。

# google-chrome-extension - 如何从 chrome 扩展中的后台脚本访问当前活动选项卡的 DOM？

> ID：15961394
> 
> 赞同：0
> 
> 时间：2013-04-12T00:58:29.707
> 
> 标签：google-chrome-extension, contextmenu

我有一个 chrome 扩展，当突出显示一段文本时，它会在上下文菜单中添加几个项目。单击菜单项时，会向服务器发送查询，并将响应显示给用户。我的扩展有效，但有两个问题我希望做得更好。

首先是查询可能需要几秒钟，我想向用户显示查询已发送并正在等待的一些指示。将光标更改为等待会起作用，但浮动 HTML 块或工具提示之类的东西会更好。但是当我尝试在我的 javascript 中执行此操作时，文档修改最终会出现在背景页面上，而不是用户当前正在查看的页面上。如何访问当前页面的 DOM？

其次，与此相关的是，我的扩展程序当前通过打开一个弹出窗口来显示查询结果。我必须尝试从后台页面向弹出窗口发送消息，但时间有时很有趣，并且消息在弹出窗口准备好接收之前发送，所以它错过了它。真的，我只是希望“弹出窗口”成为当前活动页面中添加的 html 元素，我可以使用 javascript 与之交互。如果我可以访问该页面上的 DOM，我想我可以做到这一点，但我不知道如何。有没有办法做到这一点？

# ruby-on-rails - Ruby on Rails 删除的迁移仍在 Heroku 上运行

> ID：15961398
> 
> 赞同：3
> 
> 时间：2013-04-12T00:58:55.117
> 
> 标签：ruby-on-rails, git, heroku, migration, rake

因此，在开发过程中的某个时刻，我添加了一个迁移以向我的用户表中添加一列。此列添加了“美元”属性。之后，我决定通过编写删除迁移来删除“美元”属性。后来我不小心删除了初始迁移以添加美元，因此为了解决我在本地 SQLite 数据库上运行 db:migrate 时遇到的错误，我还删除了`RemoveDollarsFromUsers`迁移。

似乎这已经解决了问题，直到我部署到heroku。使用 重置数据库后`heroku pg:reset DATABASE`，我运行`heroku run rake db:migrate`并收到一条错误消息，指出“美元”不是用户的属性。日志文件显示它试图运行我之前删除的 RemoveDollarsFromUsers 迁移。

所以我仔细检查了我的 repo 是否是最新的，然后我尝试完全重置并在 heroku 上启动一个新应用程序，认为 heroku 可能正在记住旧的迁移。使用新的 heroku 应用程序时，我遇到了同样的错误，即使我正在推送的 repo 根本不应该对旧的迁移文件有任何引用。

这是一个git问题吗？我唯一能想到的是 git 正在通过 RemoveDollarsFromUsers 迁移推送旧版本，否则 heroku 怎么可能知道呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:18:35.763

因此迁移记录在模式迁移表中，并指定运行 rake 时从哪个点开始运行`db:migrate`，甚至`db:reset`和`db:setup`。

正如您所说，有时它会混淆，特别是如果您将迁移更改为下游。让它再次运行整个事情的一种简单方法是删除 shchema_migrations 表（尽管如果您在生产环境中并且有要保留的数据，这可能会有风险）。跑步`db:migrate`现在将一步一步地经历所有这些。

返回基础的最简单方法是创建一个新的迁移并复制`db/schema.rb`（使其反映您想要的样子）。然后，您可以删除其他迁移，删除数据库，然后运行新的迁移。

不过，请务必先备份您不想丢失的任何内容！

# iphone - 如何在滚动tableview iphone时隐藏带有动画的键盘

> ID：15961400
> 
> 赞同：0
> 
> 时间：2013-04-12T00:59:29.073
> 
> 标签：iphone, uitableview, ios5, uiscrollview

我正在尝试制作像 instagram 这样的评论部分，我可以在滚动过程中检查委托功能，如此[处](https://stackoverflow.com/questions/3520901/uitableview-delegate-action-when-tableview-is-scrolled)所述 但我不确定如何在显示和隐藏状态之间保持键盘。另外，如果有人知道如何在文本字段开始填充数据时向上移动内容？我附上了一个屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/fUxrC.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T05:52:41.047

保留对您的引用`UITextField/UItextView`（顺便说一句，[这](https://github.com/HansPinckaers/GrowingTextView)是一个模仿您描述的行为的好组件）。

正如您所指出的，您可以实现此方法

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
     [self.textFieldRef resignFirstResponder];
} 
```

**编辑**

[问题是iOS 应用程序中 iMessage 样式后退键盘](https://stackoverflow.com/questions/7780753/imessage-style-receding-keyboard-in-an-ios-app)的可能重复项，以及[如何像 Messages.app 中一样将 iPhone 键盘向下移动？](https://stackoverflow.com/questions/9815888/how-to-move-iphone-keyboard-down-like-in-messages-app)

# php - 使用 PHP 获取 MySQL 错误代码

> ID：15961402
> 
> 赞同：3
> 
> 时间：2013-04-12T00:59:34.240
> 
> 标签：php, mysql, pdo

我正在使用 PHP 和 PDO 连接到我的 MySQL 数据库。我配置了 PDO 连接，以便将任何 MySQL 错误作为异常抛出：

```
$dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

现在假设我执行了一个生成错误的 MySQL 命令并捕获了它，错误消息是这样的：

> SQLSTATE [23000]：违反完整性约束：1048 列“名称”不能为空

当我使用`$exception->getCode()`它时`23000`，我认为它来自 PHP 或其他东西。如何`1048`在 catch 块中获取特定的 MySQL 错误 ()？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T01:07:40.283

[PDOException](http://www.php.net/manual/en/class.pdoexception.php)对象有一个属性`errorInfo`，它是一个三元素数组，同样由`PDO::errorInfo()`. MySQL 错误代码是元素 1。

```
try {
    . . .
} catch (PDOException $e)
    $errorInfo = $e->errorInfo;
    error_log "MySQL error " . $errorInfo[1] . "\n";
} 
```

PS：请注意，仅仅回显错误不是正确的异常处理，我这样做只是为了展示如何访问信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T01:06:23.640

由于您使用的是 PDO，因此可以参考[这里](http://php.net/manual/en/pdo.errorinfo.php)，它提供了关于如何从 SQL 获取错误信息的出色描述和示例。

# java - Android - 将 TXT 文件作为电子邮件的附件发送失败（“无法发送附件”）

> ID：15961409
> 
> 赞同：3
> 
> 时间：2013-04-12T01:00:16.703
> 
> 标签：java, android, email, android-intent, email-attachments

我正在尝试让我的 Android 应用程序发送附有文件的电子邮件，并且我从 .txt 文件开始，因为这些很简单。

到目前为止，我有这个（发生在片段内）：

```
//Send the email
Intent mailIntent = new Intent(Intent.ACTION_SEND);
mailIntent.setType("text/Message");
mailIntent.putExtra(Intent.EXTRA_EMAIL  , new String[]{address});
mailIntent.putExtra(Intent.EXTRA_SUBJECT, "Test Email");
mailIntent.putExtra(Intent.EXTRA_TEXT   , "Hi!  This is a test!");

//Deal with the attached report
String FileName = "report.txt";
Calculator.generateReport(getActivity().getApplicationContext(), FileName);
//It will be called "report.txt"
File attachment = getActivity().getApplicationContext().getFileStreamPath(FileName);
if (!attachment.exists() || !attachment.canRead()) {
    Toast.makeText(getActivity().getApplicationContext(), 
                   "Attachment Error", 
                   Toast.LENGTH_SHORT).show();
    System.out.println("ATTACHMENT ERROR");
}
else
{
    Uri uri = Uri.fromFile(attachment);
    mailIntent.putExtra(Intent.EXTRA_STREAM, uri);
}

//Send, if valid!
try {
   startActivity(Intent.createChooser(mailIntent, "Send mail..."));
} catch (android.content.ActivityNotFoundException ex) {
    Toast.makeText(getActivity().getApplicationContext(), 
               "There are no email clients installed.", 
               Toast.LENGTH_SHORT).show();
} 
```

不幸的是，这似乎不起作用。现在我知道该文件存在；如果我在之后插入适当的代码`generateReport()`，我可以找到并访问该文件并读取其内容。它就在那里，我有正确的名字。

当我有选择电子邮件客户端的选项时，我选择了 Gmail，然后看到确实有一个`report.txt`文件附加到电子邮件中。但是，当我发送电子邮件时，我会收到一条通知，说明“无法发送附件”，并且电子邮件到达时没有任何附件。

我应该注意，我也尝试过其他意图类型，例如`text/plain`and `message/rfc822`，但无济于事。

关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T01:06:21.107

如果您已将文件保存为应用程序的私有文件，应用程序可以查看是否正常，但外部电子邮件客户端将无法看到它。

您需要将其写入外部存储，或将其公开。

使用[http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE](http://developer.android.com/reference/android/content/Context.html#MODE_WORLD_READABLE)或 [http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-05T05:50:41.247

### [https://stackoverflow.com/a/18548685/293280](https://stackoverflow.com/a/18548685/293280)

上面的 SO 回答了一个非常好的复制文件、将其附加到电子邮件、发送电子邮件以及最后删除复制文件的演练。

# java - 将图像缩略图添加到网格中的布局？

> ID：15961412
> 
> 赞同：3
> 
> 时间：2013-04-12T01:00:30.170
> 
> 标签：java, swing

我有一个图像列表。我需要将小缩略图添加到框架中。我目前有框架`SpringLayout`。如何在某些网格中添加缩略图，例如带有滚动窗格的时尚。照片列表可能很大，所以我需要一个滚动窗格。我不知道如何处理这个问题`SpringLayout`。我知道如何添加缩略图；真正的问题是如何在`SpringLayout`.

```
import java.awt.Color;
import java.awt.Container;

import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SpringLayout;

public class grid {

    /**
     * @param args
     */
    public grid() {

        JFrame frame = new JFrame("Hello");
        Container pane = frame.getContentPane();

        pane.setBackground(Color.WHITE);
        SpringLayout layout = new SpringLayout();
        pane.setLayout(layout);

        JPanel photoPanel = new JPanel();
        JScrollPane photoScroll = new JScrollPane(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS, JScrollPane.HORIZONTAL_SCROLLBAR_ALWAYS); 
        photoPanel.add(photoScroll);
        pane.add(photoPanel);

        layout.putConstraint(SpringLayout.WEST, photoPanel, 260, SpringLayout.WEST, pane);
        layout.putConstraint(SpringLayout.NORTH, photoPanel, 40, SpringLayout.SOUTH, pane);

        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        frame.pack();
        //frame.setSize(frame.getMaximumSize());
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frame.setLocationRelativeTo(null);
        frame.setResizable(true);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        new grid();
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T01:02:30.183

所以基本上，您需要某种位于滚动窗格中的容器（通常称为视图）。

为此，您应该添加图像。

![在此处输入图像描述](https://i.stack.imgur.com/odg1F.png)

```
import java.awt.BorderLayout;
import java.awt.Component;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.geom.AffineTransform;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileFilter;
import java.io.IOException;
import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class ImageGrid {

    public static void main(String[] args) {
        new ImageGrid();
    }

    public ImageGrid() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private JPanel imagesPane;

        public TestPane() {
            setLayout(new BorderLayout());
            imagesPane = new JPanel(new WrapLayout());
            add(new JScrollPane(imagesPane));
            JButton scan = new JButton("Scan");
            scan.addActionListener(new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    String path = "C:\\Users\\shane\\Dropbox\\Ponies";
                    File[] files = new File(path).listFiles(new FileFilter() {
                        @Override
                        public boolean accept(File pathname) {
                            String name = pathname.getName().toLowerCase();
                            return pathname.isFile() && (name.endsWith(".png")
                                    || name.endsWith(".jpg")
                                    || name.endsWith(".gif"));
                        }
                    });
                    imagesPane.removeAll();
                    for (File file : files) {
                        try {
                            ImagePane pane = new ImagePane(file);
                            imagesPane.add(pane);
                        } catch (Exception exp) {
                            exp.printStackTrace();
                        }
                    }
                    imagesPane.revalidate();
                    imagesPane.repaint();
                }
            });
            add(scan, BorderLayout.SOUTH);
        }
    }

    public class ImagePane extends JPanel {

        private Image img;

        public ImagePane(File source) throws IOException {
            img = ImageIO.read(source);
            if (img.getWidth(this) > 200 || img.getHeight(this) > 200) {
                int width = img.getWidth(this);
                int height = img.getWidth(this);
                float scaleWidth = 200f / width;
                float scaleHeight = 200f / height;
                if (scaleWidth > scaleHeight) {
                    width = -1;
                    height = (int)(height * scaleHeight);
                } else {
                    width = (int)(width * scaleWidth);
                    height = -1;
                }
                img = img.getScaledInstance(width, height, Image.SCALE_SMOOTH);
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (img != null) {
//                int width = img.getWidth();
//                int height = img.getHeight();
//                float scale = 1f;
//                AffineTransform at = new AffineTransform();
//                at.translate(
//                        (getWidth() / 2) - ((img.getWidth() * scale) / 2),
//                        (getHeight() / 2) - ((img.getHeight() * scale) / 2));
//                at.scale(scale, scale);
//                g2d.setTransform(at);
                g2d.drawImage(img, 0, 0, this);
            }
            g2d.dispose();
        }
    }

    /**
     * FlowLayout subclass that fully supports wrapping of components.
     */
    public class WrapLayout extends FlowLayout {

        private Dimension preferredLayoutSize;

        /**
         * Constructs a new
         * <code>WrapLayout</code> with a left alignment and a default 5-unit
         * horizontal and vertical gap.
         */
        public WrapLayout() {
            super();
        }

        /**
         * Constructs a new
         * <code>FlowLayout</code> with the specified alignment and a default 5-unit
         * horizontal and vertical gap. The value of the alignment argument must be
         * one of
         * <code>WrapLayout</code>,
         * <code>WrapLayout</code>, or
         * <code>WrapLayout</code>.
         *
         * @param align the alignment value
         */
        public WrapLayout(int align) {
            super(align);
        }

        /**
         * Creates a new flow layout manager with the indicated alignment and the
         * indicated horizontal and vertical gaps.
         * <p>
         * The value of the alignment argument must be one of
         * <code>WrapLayout</code>,
         * <code>WrapLayout</code>, or
         * <code>WrapLayout</code>.
         *
         * @param align the alignment value
         * @param hgap the horizontal gap between components
         * @param vgap the vertical gap between components
         */
        public WrapLayout(int align, int hgap, int vgap) {
            super(align, hgap, vgap);
        }

        /**
         * Returns the preferred dimensions for this layout given the
         * <i>visible</i> components in the specified target container.
         *
         * @param target the component which needs to be laid out
         * @return the preferred dimensions to lay out the subcomponents of the
         * specified container
         */
        @Override
        public Dimension preferredLayoutSize(Container target) {
            return layoutSize(target, true);
        }

        /**
         * Returns the minimum dimensions needed to layout the <i>visible</i>
         * components contained in the specified target container.
         *
         * @param target the component which needs to be laid out
         * @return the minimum dimensions to lay out the subcomponents of the
         * specified container
         */
        @Override
        public Dimension minimumLayoutSize(Container target) {
            Dimension minimum = layoutSize(target, false);
            minimum.width -= (getHgap() + 1);
            return minimum;
        }

        /**
         * Returns the minimum or preferred dimension needed to layout the target
         * container.
         *
         * @param target target to get layout size for
         * @param preferred should preferred size be calculated
         * @return the dimension to layout the target container
         */
        private Dimension layoutSize(Container target, boolean preferred) {
            synchronized (target.getTreeLock()) {
                //  Each row must fit with the width allocated to the containter.
                //  When the container width = 0, the preferred width of the container
                //  has not yet been calculated so lets ask for the maximum.

                int targetWidth = target.getSize().width;

                if (targetWidth == 0) {
                    targetWidth = Integer.MAX_VALUE;
                }

                int hgap = getHgap();
                int vgap = getVgap();
                Insets insets = target.getInsets();
                int horizontalInsetsAndGap = insets.left + insets.right + (hgap * 2);
                int maxWidth = targetWidth - horizontalInsetsAndGap;

                //  Fit components into the allowed width

                Dimension dim = new Dimension(0, 0);
                int rowWidth = 0;
                int rowHeight = 0;

                int nmembers = target.getComponentCount();

                for (int i = 0; i < nmembers; i++) {
                    Component m = target.getComponent(i);

                    if (m.isVisible()) {
                        Dimension d = preferred ? m.getPreferredSize() : m.getMinimumSize();

                        //  Can't add the component to current row. Start a new row.

                        if (rowWidth + d.width > maxWidth) {
                            addRow(dim, rowWidth, rowHeight);
                            rowWidth = 0;
                            rowHeight = 0;
                        }

                        //  Add a horizontal gap for all components after the first

                        if (rowWidth != 0) {
                            rowWidth += hgap;
                        }

                        rowWidth += d.width;
                        rowHeight = Math.max(rowHeight, d.height);
                    }
                }

                addRow(dim, rowWidth, rowHeight);

                dim.width += horizontalInsetsAndGap;
                dim.height += insets.top + insets.bottom + vgap * 2;

                //    When using a scroll pane or the DecoratedLookAndFeel we need to
                //  make sure the preferred size is less than the size of the
                //  target containter so shrinking the container size works
                //  correctly. Removing the horizontal gap is an easy way to do this.

                Container scrollPane = SwingUtilities.getAncestorOfClass(JScrollPane.class, target);

                if (scrollPane != null && target.isValid()) {
                    dim.width -= (hgap + 1);
                }

                return dim;
            }
        }

        /*
         *  A new row has been completed. Use the dimensions of this row
         *  to update the preferred size for the container.
         *
         *  @param dim update the width and height when appropriate
         *  @param rowWidth the width of the row to add
         *  @param rowHeight the height of the row to add
         */
        private void addRow(Dimension dim, int rowWidth, int rowHeight) {
            dim.width = Math.max(dim.width, rowWidth);

            if (dim.height > 0) {
                dim.height += getVgap();
            }

            dim.height += rowHeight;
        }
    }
} 
```

此示例包括[WrapLayout](http://tips4java.wordpress.com/2008/11/06/wrap-layout/)。缩放是为了速度和简单性而完成的，但是使用的方法是不可行的，看看[这个](https://stackoverflow.com/questions/11959758/java-maintaining-aspect-ratio-of-jpanel-background-image/11959928#11959928)以获得更好的方法。

我通常会在后台线程中加载和缩放图像，比如 a `SwingWorker`，但这是这个想法的一个例子。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-13T00:39:27.480

这个最近删除的[关于](https://stackoverflow.com/q/15978505/230513)`SIZE`同一主题的问题提示了这个示例，该示例使用随机大小的合成图像来说明在最大维度上缩放到特定的效果。

![图片](https://i.stack.imgur.com/4oGor.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.util.Random;
import javax.swing.*;

/** @see https://stackoverflow.com/a/15982915/230513 */
public class Thumbnails {

    private static final int SIZE = 128;
    private static final Random r = new Random();

    // Get a randomly sized image
    static private Image getImage() {
        int w = r.nextInt(SIZE) + SIZE / 2;
        int h = r.nextInt(SIZE) + SIZE / 2;
        BufferedImage bi = new BufferedImage(
            w, h, BufferedImage.TYPE_INT_ARGB);
        Graphics2D g2d = bi.createGraphics();
        g2d.setPaint(Color.lightGray);
        g2d.fillRect(0, 0, w, h);
        g2d.setColor(Color.black);
        String s = w + "\u00D7" + h;
        int x = (w - g2d.getFontMetrics().stringWidth(s)) / 2;
        g2d.drawString(s, x, 24);
        g2d.dispose();
        return bi;
    }

    // Get a panel with an image scaled to SIZE in the largest dimension
    // https://stackoverflow.com/a/15961424/230513
    private static JPanel getPanel() {
        Image original = getImage();
        int w = original.getWidth(null);
        int h = original.getHeight(null);
        float scaleW = (float) SIZE / w;
        float scaleH = (float) SIZE / h;
        if (scaleW > scaleH) {
            w = -1;
            h = (int) (h * scaleH);
        } else {
            w = (int) (w * scaleW);
            h = -1;
        }
        Image scaled = original.getScaledInstance(w, h, Image.SCALE_SMOOTH);
        JPanel p = new JPanel(new GridLayout()){

            @Override
            public Dimension getPreferredSize() {
                return new Dimension(SIZE, SIZE);
            }
        };
        p.add(new JLabel(new ImageIcon(scaled)));
        p.setBorder(BorderFactory.createLineBorder(Color.red));
        return p;
    }

    private static void createAndShowGUI() {
        JFrame f = new JFrame("PhotoAlbum55");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        JPanel panel = new JPanel(new GridLayout(6, 6));
        for (int i = 0; i < 6 * 6; i++) {
            panel.add(getPanel());
        }
        f.add(new JScrollPane(panel));
        f.pack();
        f.setSize(4 * SIZE, 4 * SIZE);
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {

        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

# php - 比较操作返回false时不显示结果

> ID：15961415
> 
> 赞同：1
> 
> 时间：2013-04-12T01:01:13.627
> 
> 标签：php

我试图显示比较操作的结果，`($a > $b)`它不显示以下代码的任何内容，而操作`($a < $b)`显示结果`1`。

我想知道为什么第一个操作没有`0`按原样返回`false`？

```
<?php
    $a = 1;
    $b = 5;
    print ($a > $b);
    echo "Output";
    print ($a < $b);
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:11:48.830

不幸的是，这是一个非常普遍的误解。`0`“是”不是`false`。`false`是`false`，一个布尔值。`0`是`0`，一个数字。在非类型安全比较中`0`松散地等于。`false`

当 you`echo`或`print` `false`时，它被转换为字符串。`false`转换为字符串是`""`，一个空字符串。`true`转换为字符串是`"1"`，字符串“1”。

阅读[http://php.net/manual/en/language.types.string.php#language.types.string.casting](http://php.net/manual/en/language.types.string.php#language.types.string.casting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:11:24.593

整数比较 ($a < $b) 具有返回类型**boolean**，可以是*true*或*false*。
*print*以这样的方式工作，它为*true*打印“1”，为*false 不*打印任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:13:52.200

这是由于 PHP 处理错误值的方式。

`echo ($a > $b)`也不会输出任何内容。

要让您的语句输出 0 以表示错误条件，您需要强制转换为整数：

```
print (int)($a > $b); 
```

# java - 将扫描仪对象传递给方法

> ID：15961418
> 
> 赞同：1
> 
> 时间：2013-04-12T01:01:31.823
> 
> 标签：java, java.util.scanner

如果我将扫描仪对象传递给方法，扫描仪会从输入的开头扫描还是继续扫描输入的剩余部分。这是我的代码：

```
public class Test {
  public void test(Scanner sc) {
    System.out.println(sc.nextLine());
  }

  public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    String str = sc.nextLine();
    System.out.println(str);

    Test t = new Test(sc);
    t.test();
  }
}

// here is the input file:
1 2 3 4 
5 6 7 8
9 1 2 3 
```

我已经在 Windows 和 Linux 上测试了这段代码，但我得到了两个不同的结果

第一个结果在方法测试中，它打印 5 6 7 8

第二个结果很难理解，它打印 1 2 3 4，仍然是输入的第一行。

这是否与不同版本的Java有关，谁能帮我解释一下，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:18:27.880

首先，您的代码中有一个错误>> Test t = new Test(sc)。它使用参数化构造函数，但我没有看到任何。

```
Q. if I pass a scanner object to a method, will the scanner scan from the beginning of
the input or continued to scan for the remaining part of the input ? 
```

在 Java 中，对象是通过 Ref（对对象堆地址的引用）而不是值（如在原始类型中）传递的。这就是为什么将对象传递给函数不会改变对象的原因。对象保持不变。

问候，拉维

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:08:58.210

扫描仪在这两种方法中都是同一个对象——您传递的是对同一个扫描仪的引用。因此，它不知道它是从程序中的一个新位置使用的——如果调用相同的方法，无论什么代码使用它，它都会忠实地做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T12:15:45.140

我认为你的问题已经到[了断线](http://en.wikipedia.org/wiki/Line_break_%28computing%29)。

从一个操作系统到另一个操作系统，新行的定义方式不同。如果您打印的值

```
System.getProperty("line.separator"); 
```

您将看到该属性的值在 Windows 和 Linux 中是不一样的。

我不知道您在哪里编写了输入文件，但它可能包含特定于操作系统的行分隔符。当您在另一个操作系统上运行程序时，您会以不同的结果结束。

我建议您像这样定义扫描仪文件的分隔符

```
sc .useDelimiter("\n|\r\n"); 
```

如果我没记错的话，**\n**代表 linux 新行，而 **\r\n**代表 windows 新行。

# java - 在二叉搜索树 Java 中查找单词？

> ID：15961436
> 
> 赞同：-2
> 
> 时间：2013-04-12T01:03:49.363
> 
> 标签：java, string, search, tree, binary-search-tree

我遇到的问题是我有一个二进制搜索三，并且所有节点都包含字符串值而不是整数值。它从 txt 文件中获取这些字符串，并将文件中的各个文本行作为节点放入树中。这没有问题。

我的问题是我需要一种方法来遍历我的树并找到一个特定的单词。我已经有单独的类 BinarySearchTree 和 BinaryTreeNode 作为我要创建的树的基础。它需要查找的单词位于一个名为“lookup test file copy.txt”的文件中，它需要将找到的单词写入另一个名为“SearchResults.txt”的文件中

我只是不知道该怎么做，所以我正在寻找建议。

这是我需要帮助的方法：

```
public boolean SearchWord(String target){
    //returns true if the target string exists in the dictionary
    // otherwise it returns false
    //ALSO you need to write the results of Search 
    //in an output file called "SearchResults.txt" 

    return false;
} 
```

这是我的所有代码，不包括上面提到的其他两个类，如果有帮助的话。

```
public class Dictionary {
    public BinaryTreeNode theBinaryTree; 
    /**
     * I need to read one string by one string
     * and then insert it into a tree. 
     * I need to read all of the strings in the source file, line by line, 
     * and insert them into my dictionary. 
     * After readinga  single string, it needs to put it into a tree. 
     * I first need to create the dictionary tree, 
     * and then implement these methods on the tree. 
     * The Dictionary type is string. 
     * @throws FileNotFoundException 
     */

    private BinaryTreeNode dictionaryTree;   // this is the tree within your dictionary class

       public Dictionary(String filePath) throws IOException{
             BufferedReader br = new BufferedReader(new FileReader("Dictionary.txt"));
             this.dictionaryTree = readFile(br);
             br.close();
       }

       public BinaryTreeNode readFile(BufferedReader reader) throws IOException{
             String word = reader.readLine();         
             if(word!=null){
                 return new BinaryTreeNode(word, readFile(reader), readFile(reader));            
             }else{
                 return new BinaryTreeNode() ;  // empty node or null?
             }      
         }

    /**
     * @return
     * Once again, I already have this method written and modified
     * within the BinarySearchTree class. 
     * I'm simply going to call it over here. 
     */
    public int CountWords(){
        //returns the number of words in the dictionary
        //This is just counting nodes. 

        BinarySearchTree Aria = new BinarySearchTree();
        return Aria.countNodes(dictionaryTree);     
    }

    public boolean SearchWord(String target){
        //returns true if the target string exists in the dictionary
        // otherwise it returns false
        //ALSO you need to write the results of Search 
        //in an output file called "SearchResults.txt" 

        return false;
    }

    /**
     * I already modified the print order method
     * in BinarySearchTree
     * to work with strings. 
     * So I just called it here on the dictionaryTree. 
     * @PrintOrderedDict()
     * 
     * However, I also had to modify the method, 
     * so that it wrote whatever values the method recieved
     * to teh output file. 
     */

    public void PrintOrderedDict() throws IOException{
        //Print the dictionary words 
        //in order in a new file called "OrderedDictionary.txt". 
        //Just modify print order to work with strings. 
        try {
        BinarySearchTree jojo = new BinarySearchTree();
        FileWriter fstream = new FileWriter("OrderedDictionary.txt");

        BufferedWriter out = new BufferedWriter(fstream);
        out.write(jojo.inorderPrint(dictionaryTree));

        out.close();}
        catch (Exception e) {
            System.err.println("Error");
        }

    }

    public boolean DeleteWord(String target){
        //delete the target word if it exits in the dictionary and return true
        //otherwise return false
        return false;
    }
} 
```

任何帮助或建议将不胜感激。

- - 编辑 - -

这也是“dictionary.txt”文件的一个小样本（放全篇太长了）

```
ourselves
out
over
own
same
shan't
she 
all 
```

这是“查找测试文件 copy.txt”文件：

```
the
program
a
ours
house
ME
ours
main
java
whom
with 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:25:11.630

您还没有包含最相关的代码，即 BinaryTreeNode，因此此处使用的字段名称是猜测，但是可以这样做：

字典中的方法：

```
public boolean SearchWord(String target){
    boolean found = theBinaryTree.contains(word);
    // write the values of "target" and "found" to file (code omitted)
    return found;
} 
```

BinaryTreeNode 中的方法：

```
private String word;
private BinaryTreeNode left;
private BinaryTreeNode right;

public boolean contains(String target) {
    if (target.equals(word))
        return true;
    BinaryTreeNode next = target.compareTo(word) < 0 ? left : right;
    return next != null && next.contains(target);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:27:54.067

这显然是一个作业，所以我不会从你那里窃取解决它的可能性，但我会给你一些提示，你可以用来轻松解决你的问题：

1.  如果我理解正确，您已经知道算法，所以您知道与数字有什么关系。你需要对字符串做同样的事情，只是你不知道如何比较字符串。

2.  使用`compareTo`方法。`s1.compareTo(s2)`是：

    *   正，如果 s1 > s2

    *   负数，如果 s1 < s2

    *   0，如果 s1.equals(s2)

3.  Comparable 是一个接口。如果一个类实现了 Comparable，它将有一个 compareTo 方法。字符串恰好实现了 Comparable，如您[在此处](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)看到的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:28:26.677

把问题分成几部分。

1）搜索如何读取文件。读取文件，并将结果回显到标准输出。这很容易，大约需要完成 1/3 的工作。

2）将一些随机单词写入文件。打开文件，写下单词，然后检查你的工作，也不难做到，离你越来越近了。

3）加载您的二叉搜索树并编写代码进行查找，这很容易。如果您的单词 .equals 当前节点，则返回 true 否则如果小于当前节点，则向左走，如果更大则向右走。如果您的指针为空，则返回 false；

4）把它们放在一起。

部分地克服这一点就没有那么压倒性了。

# apache-flex - 火花微调器触发点击

> ID：15961438
> 
> 赞同：0
> 
> 时间：2013-04-12T01:04:05.430
> 
> 标签：apache-flex

所以我被要求用键盘触发向上/向下微调器点击，但我找不到在哪里调度事件......

这是我尝试过的：

```
var item:Object=spinner.skin;
item.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN));
item.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP));
item.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
item.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN));
item.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP));
item.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK)); 
```

有任何想法吗？

编辑：我必须为数据网格行交换创建快捷方式。

```
if(e.keyCode==Keyboard.NUMPAD_ADD){
    spnOrder.value++;
    spnOrder.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
}
else if(e.keyCode==Keyboard.NUMPAD_SUBTRACT){
    spnOrder.value--;
    spnOrder.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
} 
```

微调器有一个通用处理程序，它用微调器的结果值交换数据网格上的行，对我来说，发出点击听起来是最干净的解决方案。

编辑2：

点击处理程序：

```
private function spnOrder_clickHandler(e:MouseEvent):void{
    var toIndex:int=spnOrder.value;
    var index:int=grid.selectedIndex;
    if(toIndex>-1 && toIndex<list.length && index>-1 && toIndex!=index){
        if(toIndex<index)
            list.addItemAt(list.removeItemAt(index-1),index)
        else
            list.addItemAt(list.removeItemAt(index+1),index);
        grid.setFocus();
        grid.setSelectedIndex(toIndex);
    }
    else{
        grid.setFocus();
        spnOrder.value=index;
    }
} 
```

微调器：

```
<s:Spinner 
    id="spnOrder"
    value="{grid.selectedIndex}"
    skinClass="skins.SpinnerInvertedSkin"
    click="spnOrder_clickHandler(event)" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:23:25.650

不要在皮肤上引用 incrementButton / decrementButton。在组件类上这样做。

```
var item:Object=spinner;
item.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN));
item.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP));
item.incrementButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK));
item.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_DOWN));
item.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.MOUSE_UP));
item.decrementButton.dispatchEvent(new MouseEvent(MouseEvent.CLICK)); 
```

事件可能正在正确调度，但没有事件侦听器正在侦听皮肤实例；因此不会对底层组件进行任何更改。

# c# - 排除/包括导航属性

> ID：15961442
> 
> 赞同：2
> 
> 时间：2013-04-12T01:04:53.130
> 
> 标签：c#, entity-framework, asp.net-mvc-4, asp.net-web-api

我有以下实体类，其中包含两个标量属性和两个导航属性

```
public class Artist
{
    public int Id { get; set; }

    public string Name { get; set; }

    public ICollection<ArtistGenre> ArtistGenres { get; set; }

    public ICollection<ArtistImage> ArtistImages { get; set; }
} 
```

仅对于此示例，我将调用控制器内部的实体上下文

```
using (var revrbContext = new RevrbContext())
{
    var response = revrbContext.Artists.Find(1);

    return Request.CreateResponse(HttpStatusCode.OK, response);
} 
```

响应数据确实会像这样

```
{"Id":1,"Name":"Test","ArtistGenres":null,"ArtistImages":null} 
```

我的问题是，我将如何从响应字符串中排除导航属性，但我希望在导航属性不为空或需要时仍然能够包含它们。

理想情况下，我想做这样的事情来包括导航属性

```
http://somewebsite.com/api/artist?id=1&bucket=genres&bucket=images 
```

但是，如果 URL 不继续任何存储桶参数，则响应不应包含任何相应的导航属性。

*更新*

我想出了一种通过将结果映射到匿名类型来省略属性的方法（我也可以使用 DTO），但仍然无法找到一种干净的方法来在需要导航属性时包含它们

将实体类型和单个导航属性映射到匿名类型：

```
var response =
await
revrbContext.Artists.Include("ArtistGenres.Genre")
            .Where(artist => artist.Id == 1)
            .Select(artist => new
                {
                    artist.Id,
                    Genre = artist.ArtistGenres.Select(
                                        article => new {article.Genre.Name})
                }).FirstOrDefaultAsync(); 
```

但是，如果我想包含多个导航属性，我可以有这样的东西：

```
if (bucket.Contains("images") && bucket.Contains("genres"))
{
    var response =
        await
        revrbContext.Artists.Include("ArtistArticles.Article")
                                .Include("ArtistImages.Image")
                                ...etc
}

if (bucket.Contains("images"))
{
    var response =
        await
        revrbContext.Artists.Include("ArtistImages.Image")
                            ...etc
} 
```

如您所见，代码开始变得重复和混乱。我希望有一种方法可以在执行查询之前明确地链接导航属性，无论它们是否已被请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T04:52:34.807

Asp.Net Web API 在后台使用 Json.Net 进行 JSON 序列化。在这种情况下，您可以将序列化程序设置为忽略 null 属性值。换句话说，当属性的值为 null 时，它不会出现在输出中。

为此，将以下行添加到 App_Start 文件夹中的 WebApiConfig.cs 文件中：

```
config.Formatters.JsonFormatter.SerializerSettings.NullValueHandling = 
    Newtonsoft.Json.NullValueHandling.Ignore; 
```

然后，您可以按照您的建议在您的方法中使用 URL 参数来确定是否在您的对象上设置这些属性值，从而选择性地将它们包含在响应中。

# database - 如果您不使用 ORM，那么处理样板 CRUD 的有效方法是什么？

> ID：15961445
> 
> 赞同：1
> 
> 时间：2013-04-12T01:05:50.730
> 
> 标签：database, database-design, sqlalchemy

我正在为一个站点编写一个类似论坛的组件，它的用例与 reddit 或 quora 之类的东西非常相似，其中创建了诸如主题、帖子、组等之类的东西。我正在使用 python 和 sqlalchemy 核心，但仍在争论我是否应该只使用 ORM。我不想使用它的真正原因是避免处理其他组件，因为我被告知生成的查询可能会导致问题，并且随着事情的发展，无论如何您都必须处理原始 sql 以进行优化.

对于那些不使用 ORM 来处理所有繁琐的 CRUD 和数据编组的人，我很好奇，你是把它全部写出来还是有其他方法？您如何处理繁琐的数据编组？有没有更好的方法来获取结果对象并简单地执行以下操作：

```
result = user_dao.get_user(userid)
user.name = result.name
user.email = result.email
user.passwd = result.password_hash
[...] 
```

对于某些对象/实体，当有 15 个以上的属性时，这可能会变得非常麻烦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:14:24.587

除了运行选择/更新/等语句之外，还有很多理由使用 ORM。例如，它允许您将自定义功能绑定到应用程序中的记录，它可以防止 SQL 注入，它允许您更有效地移动到模型后面的新类类型，以及许多其他事情。

是的，在某些情况下，您可能需要为应用程序编写自定义 SQL，但使用 ORM 中的连接功能，这并不常见。我知道 DBIx for Perl 提供了“虚拟”类型，您可以在其中将自定义选择语句放入类中，并且仍然能够编写与该对象相关联的方法。

将方法绑定到您选择的项目的能力提高了代码的干性。结合防止 SQL 注入，我建议您尝试使用 ORM，并且只有在您有充分理由的情况下才使用 ORM。无论如何，你用来处理 CRUD 和数据编组的任何东西最终都会成为一个新的“ORM”，那么为什么不让其他人为你做这些艰苦的工作呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-14T20:34:20.643

这个问题似乎不值得所有的反对。我认为作者在这里有一个合理的担忧。

我个人选择了 ORM 混合。像 SQL Alchemy 这样的东西对于我想要完成的事情来说往往有点太重了，而且它并不总是能产生最有效的查询。我完全理解你为什么会犹豫。

从多个表中获取字段时尤其如此。当我第一次开始使用 SQL Alchemy 时，我发现加入多个 SELECT 语句是一个艰难的决定。从那时起，我就开始避开传统的 ORM。

总的来说，斯蒂芬施密特对 ORM 提出了一个[不错的理由](http://codemonkeyism.com/orms/)，但我认为有一个快乐的中间立场。

也许看看[PyORMish](https://pypi.python.org/pypi/pyormish)？它真的很新，但经过很好的测试。它不是真正的 ORM（因此称为“ish”），但它减少了样板代码，同时在需要时提供对原始 SQL 的简单访问。

*免责声明：我是 PyORMish 的作者*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-14T21:26:55.043

我怀疑反对票来自我不是其中之一的 ORM 粉丝男孩。我是一名专业的软件工程师，并且使用过许多 ORM，尤其是。休眠。尽管创建 ORM 工具是为了减轻数据库编码工作的水平，并且在某些情况下确实如此，但我发现自己在大型项目中遇到了重大问题。

如果我已经对数据库和 SQL 了如指掌，为什么还要添加另一个第三方（我必须全部了解），它们之间必须以通用方式工作，并希望它以高效和有效的方式这样做？如果不是，我必须在高处和低处寻找一些低沉的解决方案，以迫使它做我想做的事。

然后，您甚至可能继续其他项目，其中选择了另一个 ORM，并且您也必须了解该 ORM 的来龙去脉......arg。

我的偏好是代码生成。像[CodeSmith](http://www.codesmithtools.com/)这样的东西是一个很棒的工具，你可以学习一次并应用于几乎任何东西。您可以编写自己的高效代码以按照您想要的方式工作，例如一个表的 CRUD，然后将其转换为一个模板，该模板将在几秒钟内为 100 个表生成相同的 CRUD。

我从表定义开始我的应用程序，然后为 CRUD sprocs 运行我的模板，然后我有使用这些 sprocs 的直接 ADO.Net 创建 DAL 的模板，然后是创建 MVC 模型、BAL、控制器和视图的模板。砰！我有一个来自数据库的完全可用的应用程序。然后，我将着手对最终结果进行定制。

我还设置了我的模板以使用“部分”类，因此我生成的大部分代码和自定义代码都是分开的，因此我可以随时重新生成代码，我想对模板进行更改以解决问题或添加功能等。它是添加一项功能**非常甜蜜**，例如为大型列表分页，并在几分钟内将其应用于 100 个表。

祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T01:50:20.623

好吧，如果您使用 ORM，那么您在优化时会处理原始 SQL。另一方面，如果没有 ORM，您将在编写新代码、调试旧代码、测试功能和更改数据库方案时处理原始 SQL。那是完全不同的。ORM 可以帮你解决很多问题。做一个男人，面对现实：你不想学习另一种技术，你在找借口。

许多 ORM 优化了您的 SQL，它们保护您免受多种攻击类型的侵害，并且它们代表了您的数据模型的新抽象级别。

相信我，您不会仅仅因为重命名列就搜索数千个旧的、硬编码的 SQL 查询......

# c# - 矩阵重载运算符 c#

> ID：15961448
> 
> 赞同：2
> 
> 时间：2013-04-12T01:06:07.877
> 
> 标签：c#, matrix, operators, overloading

我需要的是在 C# 中重载 Operator +，这样我就可以对 2 个矩阵求和。

我拥有的是这个功能：

```
public int[,] operator+(int[,] matriz1, int[,] matriz2)
    {
        int[,] retorno = new int[4, 4];
        for (int i = 0; i < 4; i++)
        {
            for (int j = 0; j < 4; j++)
            {
                retorno[i, j] = matriz1[i, j] + matriz2[i, j];
            }
        }
        return retorno;
    } 
```

例如，当我这样做时（WT，W1，W2 都是 int[4,4]）：

```
WT = W1 + W2; 
```

我收到一条错误消息：运算符 + 不能应用于 int[ *,* ] 和 int[ *,* ] 类型的操作数，我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T01:17:45.800

好吧，首先，在您尝试使用运算符之前，请尝试仅编译运算符方法。它不会编译，并且错误消息告诉：

> 错误 CS0563：二元运算符的参数之一必须是包含类型

这正是它所说的：如果你写一个 class ，你可以为(or )`C`写一个加法运算符。您不能定义不以某种方式涉及的运算符。所以，简单地说，因为你不是编写这个类的人，你不能为它定义一个操作符。`C + <any type>``<any type> + C``C``int[,]`

你最好的选择可能是`Matrix`自己定义一个类，然后你可以定义你想要的任何运算符。例如;

```
public class Matrix
{
    private readonly int[,] _values;

    public int this[int x, int y] {
        get { return _values[x, y]; }
    }

    public Matrix(int[,] values) {
        _values = values;
    }

    public static Matrix operator +(Matrix x, Matrix y) {
        int[,] m0 = x._values;
        int[,] m1 = y._values;
        int[,] newMatrix = /* add m0 and m1 */;
        return new Matrix(newMatrix);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T01:14:27.000

您不能为非自定义类型编写运算符：

> 运算符重载允许为其中一个或两个操作数是用户定义的类或结构类型的操作指定用户定义的运算符实现。

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/aa288467%28v=vs.71%29.aspx)

另一种方法可能是编写扩展方法：

```
public static class MatrixExtensions {
    public static  int[,] Add(this int[,] matriz1, int[,] matriz2)
    {
        int[,] retorno = new int[4, 4];
        for (int i = 0; i < 4; i++) {
            for (int j = 0; j < 4; j++) {
                retorno[i, j] = matriz1[i, j] + matriz2[i, j];
            }
        }
        return retorno;
    }
} 
```

并像这样使用它：

```
int[,] a = ...
int[,] b = ...
int[,] c = a.Add(b); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T01:15:32.457

在这种情况下它不起作用，因为必须为其工作的类完成运算符重载，在这种情况下，您只需为该方法包含的任何类重载它。基本上，当您执行 W1 + W2 时，它会查找为 定义的“+”运算符`int[,]`，该内置类型不存在该运算符。

要让它像您尝试做的那样在矩阵上工作，您需要创建一个`Matrix`类（可能在内部将其值存储为二维整数数组），然后重载该类的运算符。

# ruby - 当你的类没有定义 #each 时，返回 Enumerator::Lazy 的最佳方法是什么？

> ID：15961453
> 
> 赞同：5
> 
> 时间：2013-04-12T01:06:42.777
> 
> 标签：ruby, lazy-evaluation, enumerable, ruby-2.0

`Enumerable#lazy`依赖于您提供的可枚举`#each`方法。如果您的可枚举没有`#each`您不能使用的方法`#lazy`。现在`Kernel#enum_for`并`#to_enum`提供指定除以下以外的枚举方法的灵活性`#each`：

```
Kernel#enum_for(method = :each, *args) 
```

但是`#enum_for`和朋友们总是构造普通（非惰性）枚举器，从不`Enumerator::Lazy`。

我看到`Enumerator`在 Ruby 1.9.3 中提供了这种类似的#new 形式：

```
Enumerator#new(obj, method = :each, *args) 
```

不幸的是，该构造函数在 Ruby 2.0 中已被完全删除。此外，我认为它根本不可用`Enumerator::Lazy`。所以在我看来，如果我有一个带有方法的类，我想为其返回一个惰性枚举器，如果该类没有，`#each`那么我必须定义一些确实定义的帮助器类`#each`。

例如，我有一`Calendar`堂课。对我来说，从一开始就列举每个日期是没有意义的。一个`#each`是没用的。相反，我提供了一种从开始日期（懒惰地）枚举的方法：

```
 class Calendar
    ...
    def each_from(first)
      if block_given?
        loop do
          yield first if include?(first)
          first += step
        end
      else
        EachFrom.new(self, first).lazy
      end
    end
  end 
```

那个`EachFrom`类看起来像这样：

```
class EachFrom
  include Enumerable
  def initialize(cal, first)
    @cal   = cal
    @first = first
  end
  def each
    @cal.each_from(@first) do |yielder, *vals|
      yield yielder, *vals
    end
  end
end 
```

它有效，但感觉很重。也许我应该继承`Enumerator::Lazy`并定义一个构造函数，就像不推荐使用的构造函数一样`Enumerator`。你怎么看？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T01:37:14.077

`Enumerator`我认为您应该使用以下方法返回正常`to_enum`：

```
class Calendar
  # ...
  def each_from(first)
    return to_enum(:each_from, first) unless block_given?
    loop do
      yield first if include?(first)
      first += step
    end
  end
end 
```

这是大多数红宝石学家所期望的。即使它是无限的`Enumerable`，它仍然可以使用，例如：

```
Calendar.new.each_from(1.year.from_now).first(10) # => [...first ten dates...] 
```

如果他们真的需要一个惰性枚举器，他们可以称`lazy`自己为：

```
Calendar.new.each_from(1.year.from_now)
  .lazy
  .map{...}
  .take_while{...} 
```

如果你*真的*想返回一个惰性枚举器，你可以`lazy`从你的方法中调用：

```
 # ...
  def each_from(first)
    return to_enum(:each_from, first).lazy unless block_given?
    #... 
```

不过我不会推荐它，因为它会出乎意料（IMO），可能是矫枉过正并且性能会降低。

最后，您的问题中有几个误解：

*   `Enumerable`假设的所有方法`each`，而不仅仅是`lazy`。

*   您可以定义一个`each`需要参数的方法，如果您喜欢并包含`Enumerable`. 大多数方法`Enumerable`都不起作用，但是`each_with_index`还有一些其他方法会转发参数，因此这些方法可以立即使用。

*   `Enumerator.new`没有块的已经消失了，因为应该`to_enum`使用它。请注意，块形式仍然存在。也有一个构造函数`Lazy`，但它是从现有的`Enumerable`.

*   您说`to_enum`永远不会创建惰性枚举器，但这并不完全正确。`Enumerator::Lazy#to_enum`专门用于返回惰性枚举器。`Enumerable`该调用上的任何用户方法`to_enum`都会使惰性枚举器保持惰性。

# ruby - Ruby OpenSSL 无法解密

> ID：15961454
> 
> 赞同：2
> 
> 时间：2013-04-12T01:06:45.780
> 
> 标签：ruby, openssl, public-key-encryption

我能够加密文件，但是当我尝试解密它们时，我收到“错误读取输入文件”。我正在使用公钥/私钥对来加密用于加密文件的密码。这样只有私钥的所有者才能解密文件。

我的加密方法使用 Ruby OpenSSL 模块，如下所示：

```
file = params[:submission][:report].path
filename = params[:submission][:report].original_filename.gsub(" ", "_")

pubkey = OpenSSL::PKey::RSA.new File.read "#{Rails.root.to_s}/key/pubkey.pem"
cipher = OpenSSL::Cipher.new("aes-256-cbc")
cipher.encrypt
cipher.key = key = (0...50).map{ ('a'..'z').to_a[rand(26)] }.join

buf = ""
File.open("#{Rails.root.to_s}/evidence/#{filename}.enc", "wb") do |outf|
  File.open(file, "rb") do |inf|
    while inf.read(4096, buf)
      outf << cipher.update(buf)
    end
    outf << cipher.final
  end
end

encrypted_key = pubkey.public_encrypt key
File.open("#{Rails.root.to_s}/evidence/#{filename}_passphrase.bin", 'wb') {|f| f.write(encrypted_key) } 
```

然后我在 Linux 环境中使用 openssl 来处理解密

```
openssl rsautl -in file_passphrase.bin -out passphrase.txt -inkey privkey.pem -decrypt
openssl enc -a -d -aes-256-cbc -in file.enc -out file.pdf -pass file:passphrase.txt 
```

我也尝试过使用盐，加密/解密它与密码相同，我得到了同样的错误。

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T18:43:10.997

不完全是一个解决方案，但这有效。而不是 OpenSSL 模块，我只是使用系统命令：

```
file = params[:submission][:report].path
filename = params[:submission][:report].original_filename.gsub(" ", "_")
passphrase = (0...50).map{ ('a'..'z').to_a[rand(26)] }.join
system("openssl enc -a -e -aes-256-cbc -in #{file} -out #{Rails.root.to_s}/evidence/#{filename}.asc -pass pass:#{passphrase}")
system("echo #{passphrase} | openssl rsautl -out #{Rails.root.to_s}/evidence/#{filename}_password.bin -pubin -inkey #{Rails.root.to_s}/key/pubkey.pem -encrypt") 
```

然后使用与问题中相同的解密方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T23:21:00.963

您的加密文件是 base64 编码的。如果行长于 64 个字符，则 openssl 在撤消 base64 编码时会出现问题，并打印*error reading input file*。我不确定所有版本的 openssl 是否都存在问题。

想到了两个解决方案：

*   base64 首先使用另一个实用程序对文件进行解码，然后在`openssl enc`没有 -a 开关的情况下运行该命令
*   在加密和 base64 编码文件（在您的示例中为 file.enc）中每 64 个字符后插入一个换行符

# jquery-plugins - 带有事件链接的 jquery 循环标题

> ID：15961455
> 
> 赞同：0
> 
> 时间：2013-04-12T01:06:47.280
> 
> 标签：jquery-plugins, jquery, jquery-cycle

我正在使用 jquery 循环，它运行良好，但 jquery 事件不起作用。

我基本上循环带有标题的图像，我在“alt”属性中设置了标题。

在特定图像上，我调用模态，为图像分配一个类并让 jquery 产生一个模态 - 效果很好。

我还在标题中添加了一个链接，我可以在那里看到链接，但是当我点击链接时，jquery 不会被触发。

这是带有此标题和链接的图像。

```
<img class="openModal" src="images/video.jpg" alt="<div class='wrap'><h1 class='caption-title'>Video</h1><p class='caption-desc'>Aliquam lectus orc ac.<a class='button' class='openModal'>watch the video</a></p></div>"/> 
```

alt 标签包含一个带有类的锚点，用于调出模态框。

```
<a class='button' class='openModal'>watch the video</a> 
```

这是jQuery

```
 $('.openModal').on('click', function (e) {
    console.log('this is the click');
    e.preventDefault();
}); 
```

循环运行良好。

我单击图像，打开模式 - 完美。

我点击标题中的这个链接，它什么也没做。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:44:06.433

这可能是因为您在 HTML 插入页面之前绑定了事件。

尝试这个：

```
$('.cycleOrCaptionContainer').on('click', '.openModal', function(e) {
    console.log('this is the click');
    e.preventDefault();
}); 
```

`'.cycleOrCaptionContainer'`即使您在代码运行后附加此元素，也会`'click'`从具有 class 的子元素中侦听。`.openModal`

# node.js - Meteor - collection.find() 总是返回所有字段

> ID：15961456
> 
> 赞同：53
> 
> 时间：2013-04-12T01:06:51.440
> 
> 标签：node.js, mongodb, meteor

遇到这个（有点烦人的问题）我正在尝试查找集合中的所有记录，而不是显示（或显示）特定字段（分数）。这只是一个示例，并不反映我的实际代码，但问题总是可以重现的。我排除的字段非常大，我只是想生成一个可用记录的菜单。

类似的命令

```
 players.find({},{score:1})
    players.find({},{score:0}) 
```

始终返回每个字段，而不是触发 mongodb 中的排除/包含。我什么都不担心，因为模板可能可以控制将哪些数据呈现为 html？仍然感觉数据无论如何都传输到了客户端；并出现在控制台中。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-04-12T01:20:41.917

你的语法有点不对劲，应该是

```
CollectionName.find({}, {fields: {'onlyThisField':1}}); 
```

或者

```
CollectionName.find({}, {fields: {'everythingButThisField':0}}); 
```

您的模板确实控制了显示哪些数据，但仍有许多情况下字段限制是有意义的 - 数据隐私或效率（所有记录的某些字段，“当前”记录的所有字段）是两个常见的

你没有提到它，但这通常是在发布功能中 - 见[http://docs.meteor.com/#meteor_publish](http://docs.meteor.com/#meteor_publish) -`fields`客户端也可以使用修饰符，但它不限制发送到客户端的数据，只是到模板 - 服务器端字段减少/选择有不同的好处

--

仔细检查您是否也删除了该`autopublish`软件包，但是如果您有该软件包并编写自己的发布功能，您应该会看到一个警告，这是您最常使用的地方`fields`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-12T03:56:29.710

首先，如果你想控制 中的某些字段`Collection.find()`，你可以尝试这样做：

```
CollectionName.find({}, {fields: {field:1}}); 
```

但它只在服务器上工作。

或者试试这个：

在服务器上：

```
Meteor.publish("myCollection", function () {
    return SvseTree.find({},{fields: {field:1}});
}); 
```

在客户端：

```
Meteor.subscribe("myCollection"); 
```

然后运行`meteor remove autopublish`。

其次，如果要获取 Collection.find() 的数组，请尝试这样做：Collection.find().fetch();

# asp.net-mvc - 如何动态获取模型名称 mvc 4 c#4

> ID：15961457
> 
> 赞同：5
> 
> 时间：2013-04-12T01:07:13.640
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, model

使用 VS2012 和 MVC4，如何获取当前模型的名称？

我想使用模型名称本身动态命名一些变量。有办法吗？我找到了控制器和动作，但还没有找到任何模型信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T01:31:24.043

你试过这个吗？

```
@model.GetType().Name 
```

正如@Rowan Freeman 在下面的评论中指出的那样，您也可以从模型本身执行此操作：

```
GetType().Name; // or this.GetType().Name; 
```

...或者来自控制器的这个：

```
var model = new MyCustomViewModel();
var modelName = model.GetType().Name; 
```

# java - postgres的spring JDBC连接问题

> ID：15961461
> 
> 赞同：2
> 
> 时间：2013-04-12T01:08:05.703
> 
> 标签：java, spring, hibernate, jdbc

我在春天有一个 api，它在 postgres db 上执行 crud 操作。几次插入后，它试图打开一个新的 jdbc 连接并永远挂起。

```
[DEBUG,StatefulPersistenceContext,main] initializing non-lazy collections
[TRACE,JDBCContext,main] after autocommit
[DEBUG,ConnectionManager,main] transaction completed on session with on_close connection      release mode; be sure to close the session to release JDBC resources!
[TRACE,SessionImpl,main] after transaction completion
[INFO,Initializer,main] Creating publisher user for lisa penny
[DEBUG,DefaultListableBeanFactory,main] Returning cached instance of singleton bean 'transactionManager'
[DEBUG,HibernateTransactionManager,main] Creating new transaction with name     [org.temp.demo.core.dao.hb.GenericHibernateDAO.makePersistent]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''
[DEBUG,SessionImpl,main] opened session at timestamp: 13657283326
[DEBUG,HibernateTransactionManager,main] Opened new Session     
[org.hibernate.impl.SessionImpl@3a1ca1a4] for Hibernate transaction
[DEBUG,HibernateTransactionManager,main] Preparing JDBC Connection of Hibernate Session   [org.hibernate.impl.SessionImpl@3a1ca1a4]
[DEBUG,JDBCTransaction,main] begin
[DEBUG,ConnectionManager,main] opening JDBC connection 
```

它停在这里，任何人都可以提出一些建议吗？我没有任何线索

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-15T06:23:51.833

关闭事务和会话示例。找到你的自动装配类并作为我的例子进行更改。

```
public ContentResult insertNewContent( Content content )
    {
        ContentResult result = this.validateContent( content );

        if( result.hasErrors() == false )
        {
            Session session = this._hibernateSessionFactory.openSession();
            Transaction tx = null;

            try
            {
                //important !
                tx = session.beginTransaction();

                session.save( content );

                tx.commit();

                if( content.get_id() > 0 )
                {

                }
                else
                {
                    result.addError( ContentResult.CODES.ERROR_INVALID_ID );
                }

            }
            catch( HibernateException e )
            {
                //important !
                if( tx != null )
                {
                    tx.rollback();
                }
                ContentRepository.logger.error( "insertNewContent failed" );        
                e.printStackTrace();
            }
            finally
            {
                //important !
                session.close();
            }
        }

        return result;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-15T04:43:31.410

操作后必须关闭事务和会话。如果不是当前会话和事务正在打开，并且您为新操作打开了新事务。这将导致您的数据库挂起。

# mysql - MySQL：@@ 是什么意思？

> ID：15961463
> 
> 赞同：11
> 
> 时间：2013-04-12T01:08:16.490
> 
> 标签：mysql

我正在阅读此页面上的 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.1/en/set-statement.html](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)

它经常使用“@@”，但没有定义“@@”的含义。

另一个例子是变量名：

```
mysql> select @@hostname;
+------------+
| @@hostname |
+------------+
| server1    |
+------------+
1 row in set (0.00 sec)

mysql> select @hostname;
+-----------+
| @hostname |
+-----------+
| NULL      |
+-----------+
1 row in set (0.00 sec) 
```

什么是@与@@？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-12T01:26:23.973

## `@@`- 系统变量

`@@`用于[*系统变量*](https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html)。使用不同的后缀`@@`，您可以获得系统变量的*会话*或*全局*值。

当您在表达式中引用系统变量时`@@var_name`（即，当您未指定`@@global.`or时`@@session.`），如果会话值存在，MySQL 将返回会话值，否则返回全局值。（这与 不同`SET @@var_name = value`，后者总是指会话值。）

* * *

## `@`- 用户定义的变量

While`@`用于[*用户定义的变量*](https://dev.mysql.com/doc/refman/8.0/en/user-variables.html)。

* * *

### 更多细节

有关更多详细信息，请阅读官方 MySQL 参考手册中的以下部分：

*   [SET 语句](https://dev.mysql.com/doc/refman/8.0/en/set-statement.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-12T01:12:23.757

[使用系统变量](http://dev.mysql.com/doc/refman/5.5/en/using-system-variables.html)：

> 要明确指出变量是会话变量，请在其名称前加上 SESSION、@@session. 或 @@。

[用户定义的变量](http://dev.mysql.com/doc/refman/5.5/en/user-variables.html)：

> 用户变量写为@var_name，其中变量名var_name 由字母数字字符“.”、“_”和“$”组成。如果您将用户变量名称作为字符串或标识符引用（例如，@'my-var'、@"my-var" 或 @ `my-var`），则用户变量名称可以包含其他字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T01:15:17.543

来自相同的[文档](http://dev.mysql.com/doc/refman/5.1/en/set-statement.html)并[使用系统变量文档](http://dev.mysql.com/doc/refman/5.0/en/using-system-variables.html)-

> 要明确指出变量是全局变量，请在其名称前加上 GLOBAL 或 @@global.. 设置全局变量需要 SUPER 权限。
> 
> 要明确指出变量是会话变量，请在其名称前加上 SESSION、@@session. 或 @@。设置会话变量不需要特殊权限，但客户端只能更改自己的会话变量，不能更改任何其他客户端的变量。
> 
> 本地和@@local。是 SESSION 和 @@session.. 的同义词。
> 
> 支持系统变量的 @@var_name 语法以与其他一些数据库系统兼容。

# ruby-on-rails - Obtvse-Heroku 数据库接近行限制

> ID：15961464
> 
> 赞同：1
> 
> 时间：2013-04-12T01:08:16.650
> 
> 标签：ruby-on-rails, heroku

我最近用 Heroku 建立了一个 Obtvse 博客，今天我收到一封电子邮件，说它接近了 7749 行的行数限制。我只有两篇博文！这怎么可能？我应该担心吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:20:32.453

它可能是会话数据或垃圾评论。在某些时候 Heroku 会撤销你的写权限，但除非一个人是彻底的滥用，否则就目前的执法而言。也许您应该考虑分析您对表中行的使用：

```
$ heroku pg:psql -a my-app
=> \dt

             List of relations
 Schema |       Name        | Type  | Owner 
--------+-------------------+-------+-------
 public | foo               | table | fdr
 public | schema_migrations | table | fdr
(2 rows)

=> SELECT count(*) FROM foo;
 count 
-------
     1
(1 row) 
```

# asp.net-mvc-3 - 在 Glimpse 中查看 ADFS 声明的内容？

> ID：15961465
> 
> 赞同：2
> 
> 时间：2013-04-12T01:08:17.210
> 
> 标签：asp.net-mvc-3, glimpse

所以我在我的 mvc3 应用程序中安装了 glimpse ( [http://getglimpse.com/](http://getglimpse.com/) ) nuget 包。哇整洁的工具。但是有没有人想出如何在 glimplse 中检查 adfs 声明？我可以在服务器选项卡上看到“AUTH_USER”，但没有我从 adfs 获得的任何声明或角色。如果它不支持开箱即用可能会写一个插件。

**解决方案：** 我写了一个似乎很好用的插件。感谢您的帮助和出色的产品 Nik！

```
using System.Collections.Generic;
using System.Linq;
using Glimpse.AspNet.Extensions;
using Glimpse.Core.Extensibility;
using Microsoft.IdentityModel.Claims;

namespace ADFSClaimsPlugin
{
    public class ADFSClaimsInspector : TabBase
    {
        public override object GetData(ITabContext context)
        {
            var res = new List<string[]> { new[] { "Subject", "Type", "Value", "Value Type", "Issuer", "Original Issuer" } };
            var httpContext = context.GetHttpContext();

            var iPrincipal = (IClaimsPrincipal)httpContext.User;
            var identity = (IClaimsIdentity)iPrincipal.Identity;

            res.AddRange(identity.Claims.Select(c => new[] {  c.Subject==null?string.Empty:c.Subject.ToString(),c.ClaimType, 
                c.Value, c.ValueType, c.Issuer ,c.OriginalIssuer }));

            return res;
        }

        public override string Name
        {
            get { return "Claim Data"; }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:00:40.137

我不是这方面的专家，但[Maarten Balliauw 不久前](https://twitter.com/maartenballiauw)创建[了一个 Window Identity Foundation 插件](http://blog.maartenballiauw.be/post/2011/05/10/A-Glimpse-at-Windows-Identity-Foundation-claims.aspx)，它展示了声明令牌——这对你来说可能是一个很好的起点。

他的插件有点过时了（它将不再适用于 Glimpse 1.0+），但它应该很容易根据[自定义选项卡文档](http://getglimpse.com/Help/Custom-Tabs)进行更新和打包。

我也很乐意帮助你。你可以[在 Twitter 上联系我](https://twitter.com/nikmd23)。

# java - 当同一帧中有多个时，如何在特定的 JPanel 中进行绘制-Java

> ID：15961472
> 
> 赞同：0
> 
> 时间：2013-04-12T01:08:53.570
> 
> 标签：java, swing, jpanel, draw

更新 - 这与我昨天发布的以下链接有关。

[https://stackoverflow.com/questions/15916360/swing-gui-application-in-java-with-multiple-frames](https://stackoverflow.com/questions/15916360/swing-gui-application-in-java-with-multiple-frames)

如果我在这里做错了什么，我深表歉意，我试图在我以前的帖子中写下，但我找不到超出评论框的方法。

我对我的代码做了一些更改，现在我正在使用 3 个 JPanel。我为每个面板创建了一个类，除了将在 CardLayout 中保存其他两个的主要面板。主面板同时在我的主类和应用程序中创建。现在，当我按下按钮时，我正试图在两个面板中的一个上画一张快乐的脸，但它不起作用。

```
import statements;

public class JDataAnalyzerGui extends JFrame {

private static final String INTRO = "welcome";   
private static final String OPERATIONS = "operations";   
private CardLayout cardlayout = new CardLayout();   
private JPanel mainPanel = new JPanel(cardlayout);   
private WelcomePanel welcomePanel = new WelcomePanel();   
private OperationPanel operationPanel = new OperationPanel();   
private ReadFiles aFileReader;

public JDataAnalyzerGui() {

// adding panels to the main panel

    mainPanel.add(welcomePanel.getMainComponent(), INTRO);     
    mainPanel.add(operationPanel.getMainComponent(), OPERATIONS);

    welcomePanel.addAcceptActionListener(new ActionListener() {    //moves to next view where the buttons are and were the drawing should happen

        @Override     
        public void actionPerformed(ActionEvent e) {                
            int input = Integer.parseInt(welcomePanel.userInput.getText());  
            boolean isValid = isOptionValid(input);         
            if(isValid) {                
                cardlayout.show(mainPanel, OPERATIONS);              
                performActions(aFileReader);             
            }         
        }    
    });      

    operationPanel.addReturnActionListener(new ActionListener() {  //returns to welcome window         
        @Override        
        public void actionPerformed(ActionEvent e) { 
            Graphics pen = getGraphics();
            Object source = e.getSource();           
            if(source == operationPanel.aButton8) {              
                operationPanel.results.setText(null);
                welcomePanel.userInput.setText(null);                
                cardlayout.show(mainPanel, INTRO);           
            } 
```

// 当 button1 被按下时，我想从 operationPanel 在 panel2 上绘制一个字符串。

```
 else if(source == operationPanel.aButton1) {     

                operationPanel.results.setText("The maximun opening value was " + Calculations.hiOpenValue);  
                operationPanel.panel2.setBackground(Color.GREEN); 
                pen.setFont(new Font("Broadway", Font.ITALIC, 12));
                pen.setColor(Color.MAGENTA);
                pen.drawString("this is a test", 20, 40);

            }
            // code for the rest of buttons
        }      
    });   
}

private boolean isOptionValid(int option) {    

    switch(option) {    

    case 1:         
        aFileReader = new ReadFiles("newMSFT.csv");         
        return true;        

    case 4:             
        Object[] options = { "YES", "CANCEL" };         
        int reply = JOptionPane.showOptionDialog(null, "Are you sure you want to go?", "Confirm Exit", JOptionPane.DEFAULT_OPTION, JOptionPane.WARNING_MESSAGE, null, options, options[0]);         
        if(reply == JOptionPane.YES_OPTION)
        System.exit(0);         
        return false;       

    default:        
        JOptionPane.showMessageDialog(null, "That is an invalid option. Please try again");     
        return false;   
    }   
}

public void performActions(ReadFiles obj) {     
    // code for numeric calculations
}   

private JComponent getMainComponent() {      
    return mainPanel;   
}

private static void createAndShowUI() {     

    JFrame frame = new JFrame("Data Analyzer");      
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);      
    frame.getContentPane().add(new JDataAnalyzerGui().getMainComponent());     
    frame.pack();      
    frame.setLocationRelativeTo(null);      
    frame.setVisible(true);  
}

public static void main(String[] args) {      
    java.awt.EventQueue.invokeLater(new Runnable() {         
        public void run() {            
            createAndShowUI();         
        }      
    });   
}
} 
```

------------------ 操作Jpanel导入语句；

```
class OperationPanel {

JPanel mainPanel = new JPanel();  
JPanel panel1 = new JPanel(new FlowLayout());        
JPanel panel2 = new JPanel(new FlowLayout());
JPanel panel3 = new JPanel(new FlowLayout());
JLabel results = new JLabel ("");

JButton aButton1 = new JButton("Max Open");;   // 8 buttons in total, this is the one for painting

JButton aButton8 = new JButton("Return to Main");

public OperationPanel() {      

    mainPanel.setLayout(new GridLayout(3, 1));      
    mainPanel.add(panel1); 
    mainPanel.add(panel3);
    panel2.setBackground(Color.WHITE);      
    mainPanel.add(panel2);      
    panel1.add(aButton1);     
    // adding all buttons to panel1     
    panel2.add(results);                

}

public JComponent getMainComponent() {      
    return mainPanel;   
}

public void addReturnActionListener(ActionListener listener) {   // el que retorna a welcome view      
    aButton8.addActionListener(listener);     
    aButton1.addActionListener(listener);
    //addActionListener for all buttons
} 
```

}

-------------------- 欢迎面板类 WelcomePanel {

```
private JPanel mainPanel = new JPanel();   
JPanel panel1 = new JPanel();       
JPanel panel2 = new JPanel(new GridLayout(5,1));        
JPanel panel3 = new JPanel(new FlowLayout());
    JLabel greetings = new JLabel("Welcome to Data Analizer"); 
Font bigFont = new Font("Comic Sans", Font.BOLD, 30);
JLabel label1 = new JLabel("Please select one of these options:");  
JLabel label2 = new JLabel("1\. newMSFT.csv");
JLabel label3 = new JLabel("2\. XXX.csv");
JLabel label4 = new JLabel("3\. YYY.csv");
JLabel label5 = new JLabel("4\. QUIT");      
Font bigFont2 = new Font("Arial", Font.BOLD, 20);   
JTextField userInput = new JTextField(10);  
JButton aButton = new JButton("Accept");

public WelcomePanel() {

    mainPanel.setLayout(new GridLayout(3, 1));      
    greetings.setFont(bigFont);      
    label1.setFont(bigFont2);
    label2.setFont(bigFont2);
    label3.setFont(bigFont2);
    label4.setFont(bigFont2);
    label5.setFont(bigFont2);      

    mainPanel.add(panel1);     
    mainPanel.add(panel2);     
    mainPanel.add(panel3);
    panel1.add(greetings);
    panel2.add(label1);
    panel2.add(label2);
    panel2.add(label3);
    panel2.add(label4);
    panel2.add(label5);      
    panel3.add(userInput);     
    panel3.add(aButton);

    }

public void addAcceptActionListener(ActionListener listener) {  // este es el que llama a segunda ventana o view      
    aButton.addActionListener(listener);      
    userInput.addActionListener(listener);   
}

public JComponent getMainComponent() {     
    return mainPanel;   
} 
```

}

我不知道如何在特定面板中绘图。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:31:53.913

## 你可以...

使用玻璃板...

![在此处输入图像描述](https://i.stack.imgur.com/wCQLu.png)

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;

public class TestGlassPane04 {

    public static void main(String[] args) {
        new TestGlassPane04();
    }

    public TestGlassPane04() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridLayout(2, 2, 10, 10));
                frame.add(createBox(1));
                frame.add(createBox(2));
                frame.add(createBox(3));
                frame.add(createBox(4));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setGlassPane(new GlassPane());
                frame.getGlassPane().setVisible(true);
                frame.setVisible(true);
            }
        });
    }

    protected JLabel createBox(int box) {
        JLabel label = new JLabel("Box " + box);
        label.setBorder(new CompoundBorder(new LineBorder(Color.GRAY), new EmptyBorder(10, 10, 10, 10)));
        return label;
    }

    public class GlassPane extends JPanel {

        private BufferedImage background;

        public GlassPane() {
            setOpaque(false);
            try {
                background = ImageIO.read(getClass().getResource("/sillydash.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            if (background != null) {
                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;
                g2d.drawImage(background, x, y, this);
            }
            g2d.dispose();
        }
    }

} 
```

查看[如何使用根窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)了解更多详细信息...

## 或者你可以...

使用 JXLayer/ [JLayer](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)来完成更本地化的玻璃窗格版本...

# hadoop - 作业类型未定义 setNumMapTasks(int) - Hadoop MapReduce

> ID：15961475
> 
> 赞同：1
> 
> 时间：2013-04-12T01:09:02.757
> 
> 标签：hadoop, mapreduce

我无法将“job.setNumMapTasks(int)”添加到我的 MapReduce 程序的驱动程序中。当我尝试添加它时，我收到一个编译错误，指出“setNumMapTasks(int) 未定义作业类型”。但是，我可以添加等效的减速器“job.setNumReduceTasks(int)”。在我看来，如果我可以添加一个，我应该能够添加另一个。下面是我的司机。任何建议都非常受欢迎。

```
public int run(String[] args) throws Exception {
    Configuration conf = getConf();      
    Job job = new Job(conf, "PiCalc");        
    job.setJarByClass(PiCalc.class);            
    Path in = new Path(args[0]);
    Path out = new Path(args[1]);
    FileInputFormat.setInputPaths(job, in);
    FileOutputFormat.setOutputPath(job, out);
    job.setJobName("PiCalc"); 
    job.setNumMapTasks(20);
    job.setNumReduceTasks(10);
    job.setMapperClass(MapClass.class);
    job.setReducerClass(Reduce.class);   
    job.setInputFormatClass(KeyValueTextInputFormat.class);
    job.setOutputFormatClass(TextOutputFormat.class);
    job.setOutputKeyClass(IntWritable.class);
    job.setOutputValueClass(IntWritable.class);
    System.exit(job.waitForCompletion(true)?0:1);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:23:59.510

无需为作业设置地图任务的数量。映射任务的数量等于输入文件中的块数。

默认情况下，reducer 的数量等于 1，除非明确指定。

# c# - 在 WebApi 操作中使用 C# 关键字

> ID：15961481
> 
> 赞同：0
> 
> 时间：2013-04-12T01:09:54.483
> 
> 标签：c#, asp.net-web-api-routing

我正在替换旧版 Web 服务的控制器中编写操作。问题是我需要使用 C# 关键字 (ref) 作为参数。下面的代码无法编译，因为我使用的是保留字 ref。那么如何设置 WebApi Routing 来处理这个问题呢？

例子：

```
public class MyController : BaseController
{
    [ActionName("RedirectToItem")]
    [HttpGet]
    public HttpResponseMessage RedirectToItem(int ref)
    {
         // Do stuff...
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T01:15:31.540

您可以`@ref`在方法定义中使用来转义关键字并避免关键字冲突。

# ruby - 直接从Ruby中的字符串POST文件

> ID：15961482
> 
> 赞同：1
> 
> 时间：2013-04-12T01:10:12.137
> 
> 标签：ruby, rest, post, file-upload, multipartform-data

我有一个字符串： `text = "a bc def"`并且需要将它发送到一个 REST API 调用，该调用使用“多部分”来使用文件进行 POST 调用。看起来像这样：

```
post '/upload' do
  tempfile = params[:file][:tempfile] 
  filename = params[:file][:filename] 
  cp(tempfile.path, "public/uploads/#{filename}")
end 
```

我可以将`text`字符串写入本地下的临时文件`/tmp/some/temp/folder/abc.txt`并通过 POST 调用发送它，但是有没有办法直接发送它而不将其写入本地文件系统？我相信这样会更有效率。我需要先对其进行编码吗？Base64 编码会起作用吗？

```
require "base64"
encoded_file = Base64.encode64(text)
send_by_post(encoded_file) 
```

我只能使用 Ruby 1.8.7。

# java - 以编程方式（或替代方法）设置 Djava.library.path？

> ID：15961483
> 
> 赞同：7
> 
> 时间：2013-04-12T01:10:33.813
> 
> 标签：java, jvm

我希望以编程方式设置 VM 参数*Djava.library.path*。如果无法做到这一点，有什么替代方案（如果有的话）？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-13T05:14:59.183

使用这种方法很容易解决：

```
public static void addLibraryPath(String pathToAdd) throws Exception {
    Field usrPathsField = ClassLoader.class.getDeclaredField("usr_paths");
    usrPathsField.setAccessible(true);

    String[] paths = (String[]) usrPathsField.get(null);

    for (String path : paths)
        if (path.equals(pathToAdd))
            return;

    String[] newPaths = Arrays.copyOf(paths, paths.length + 1);
    newPaths[newPaths.length - 1] = pathToAdd;
    usrPathsField.set(null, newPaths);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-12T01:16:55.137

看看这个 java 文档[http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setProperty(java.lang.String](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#setProperty(java.lang.String) , java.lang.String)

你想调用 setProperty(String, String) 方法。

所以在你的情况下看起来像这样

```
System.setProperty("java.library.path","value_you_want"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-12T01:32:38.380

`java.library.path`使用 System.loadLibrary(String libname) 加载动态库时使用。System.load(String filename) 使用完整的文件名，不需要`java.library.path`.

# jquery - leaModal.js - 最简单的 jQuery 模态脚本故障排除

> ID：15961484
> 
> 赞同：3
> 
> 时间：2013-04-12T01:10:40.563
> 
> 标签：jquery, css, modal-dialog

男人哦男人。在使用了最简单的模态窗口脚本leanModal 之后，我仍然无法触发它。

[精益模态： http](http://leanmodal.finelysliced.com.au) ://leanmodal.finelysliced.com.au

我的网站：[http ://wlvrtn.com/sites/nms-leanmodal/](http://wlvrtn.com/sites/nms-leanmodal/)

帮助一个 jQuery 菜鸟？

* * *

头：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script type="text/javascript" src="_/js/jquery.leanModal.min.js"></script>
<script type="text/javascript">
        $(function() {
            $('a[rel*=leanModal]').leanModal({ top : 200, closeButton: ".modal_close" });       
        });
</script> 
```

CSS：

```
#lean_overlay {
position: fixed;
z-index: 10000;
top: 0px;
left: 0px;
height:100%;
width:100%;
background: #000;
display: none;
}

#test {
width: 600px;
display:none;
background: #FFF;   
} 
```

HTML：

```
<a class="request-consultation" rel="leanModal" name="test" href="#test">
    Request Complimentary Consultation
</a>                 

<div id="test">
    <p>Lorem ipsum dolor sit amet.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:24:03.190

您的代码完全有效，请检查您的`jquery.leanModal.min.js`路径是否正确。`_/`或者应该是`./`

看看这个[jsFiddle](http://jsfiddle.net/gAVuA/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-31T21:00:40.793

尝试添加第三个参数。

```
$('#foo').leanModal({top:100,overlay:0.5,closeButton:".modal_close"}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-25T12:34:51.700

您还应该添加 Jquery 库。

# html - 需要帮助将此导航菜单 css 居中

> ID：15961486
> 
> 赞同：0
> 
> 时间：2013-04-12T01:10:45.877
> 
> 标签：html, css, menu

我需要帮助使这个导航菜单居中。我对 css 还很陌生，需要完成一个学校项目

```
<html>
<head>
<title>Website</title>
<link rel="icon" " href="favicon.ico" />
<style>
ul.menu{list-style-type:none;margin:0;padding:0;padding-top:6px;padding-bottom:6px;}
li.menu{display:inline;}
a:link,a:visited.menu{font-weight:bold;color:#FFFFFF;background-color:#35BFD7;text-    align:center;padding:6px;text-decoration:none;text-transform:uppercase;}
a:hover,a:active.menu{background-color:#3597FF;}
body{background-image:url('background.gif');background-size:100% 100%;}
</style>
</head>
<body>
<ul class=menu>
<li class=menu><a href="default.asp">Home</a></li>
<li class=menu><a href="news.asp">News</a></li>
<li class=menu><a href="contact.asp">Contact</a></li>
<li class=menu><a href="about.asp">About</a></li>
</ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:17:22.387

```
<html>
<head>
<title>Website</title>
<link rel="icon" " href="favicon.ico" />
<style>
ul.menu{list-style-type:none;margin-left: auto;margin-right: auto;
width: 334px;padding:0;padding-top:6px;padding-bottom:6px;}
li.menu{display:inline;}
a:link,a:visited.menu{font-weight:bold;color:#FFFFFF;background-color:#35BFD7;text-    align:center;padding:6px;text-decoration:none;text-transform:uppercase;}
a:hover,a:active.menu{background-color:#3597FF;}
body{background-image:url('background.gif');background-size:100% 100%;}
</style>
</head>
<body>
<ul class=menu>
<li class=menu><a href="default.asp">Home</a></li>
<li class=menu><a href="news.asp">News</a></li>
<li class=menu><a href="contact.asp">Contact</a></li>
<li class=menu><a href="about.asp">About</a></li>
</ul>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:12:51.990

只需添加`text-align:center`到您的`<ul>`. 这将使所有元素`display:inline`居中。`display:inline-block`

[jsFiddle](http://jsfiddle.net/UrtfQ/)

```
ul.menu {
    text-align:center;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:13:27.503

假设您希望文本在页面中居中，而不仅仅是内嵌音乐，只需添加

```
body {
  text-align: center;
} 
```

如果需要，将 ul 包装在 div 中，然后将其居中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T21:29:52.140

如果您希望文本水平居中，那么“文本对齐：中心”应该可以解决问题。

但是，如果您希望所有列表项在一行中并排显示，则需要指定：

```
li {
    display: inline-block;
} 
```

# java - Netty：在异常时关闭客户端的连接

> ID：15961489
> 
> 赞同：1
> 
> 时间：2013-04-12T01:10:49.567
> 
> 标签：java, netty

所以我有一个 UDP 服务器，当我遇到异常时，我想关闭与客户端的连接。所以在我的处理程序中，我有以下内容：

```
@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) throws Exception {
    logger.error("Error received while processing message.", e.getCause());
    e.getChannel().close(); // this is bad mojo
} 
```

但是，这将关闭服务器套接字并且服务器停止接受新连接。但以该方法`e.getChannel().getRemoteAddress()`返回`null`。那么如何在不关闭整个服务器的情况下关闭与客户端的连接呢？

# c++ - 连续内存，OpenGL，以及如何包装顶点？

> ID：15961495
> 
> 赞同：5
> 
> 时间：2013-04-12T01:12:32.537
> 
> 标签：c++, opengl, graphics, opengl-es, 3d

因此，OpenGL 编程的一个关键要求是您以保证连续内存的方式存储顶点。我最近读了几本专业图形程序员写的不错的书，他们都使用了相同想法的变体：将顶点打包`struct`为 3的 a `floats`，x,y,z，然后将多个顶点打包为 c 样式数组或`std::vector`这些`structs`。它有效。

但是我在这个网站上一次又一次地看到它说 a`struct`不能保证内存连续性。有人说，如果您的结构包含所有内容，`floats`那么它们*可能*是连续的，但*不能保证。* 并且确实保证了这一点，但是如果您放入数组或向量中的内容不连续，那就无关紧要了`array`。`std::vector`

对于生产代码，我希望“*可能*”不会削减它。因此，尽管这两本书中的建议显然更适合学习，但我想知道还有哪些其他好的技术可以以*保证*连续内存的方式轻松组织顶点数据，或者，我会接受建议我不应该担心这个，这*可能已经*足够好了。

图形领域还有哪些常用的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T01:25:03.590

> 因此，OpenGL 编程的一个关键要求是您以保证连续内存的方式存储顶点。

不，真的。连续内存节省空间，但只要属性之间的步幅（以字节为单位的距离）在所有元素之间相同，这个东西就可以工作。

> 图形领域还有哪些常用的好方法？

简单、普通、平面的原始数据类型数组，例如`std::vector<float>`，或者`std::vector<char>`如果您只想要一块内存，您可以在其中手动连续地分散数据。您可以使用 getter 和 setter 方法以及抽象偏移量和步幅计算的迭代器接口很好地将其包装在一个类中。

如果您可以使用编译器扩展来指定其内存布局，您也可以使用结构。例如，GCC`__attribute__((packed))`将使元素的结构紧密，之间没有间隙。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T10:05:47.477

[OpenGL 数学库](http://glm.g-truc.net/)，`glm`，保证它的向量在内存中是连续且简单的，我个人用它来存储顶点：

```
std::vector<glm::vec3> positions;
std::vector<glm::vec2> texCoords; 
```

它还具有一个实用程序，可以在 OpenGL`glXXXv`函数中安全地转换其结构的地址。

如果您想在一个 VBO 中拥有所有内容，则必须创建某种复合结构，因为恐怕这`std::tuple<glm::vec3, glm::vec2>` [无法应对挑战](https://stackoverflow.com/questions/14597006/stdtuple-memory-alignment)，这有点令人难过。

* * *

看起来，[glm 行为*不受*标准的支持](https://stackoverflow.com/questions/13571898/c-opengl-glm-and-struct-padding)，尽管 C++11 可能已经改变了`alignas()`。但是，我想，在对齐结构方面几乎不可能做得更好，并且建议`static_assert`应该可以防止你在脚下开枪。

# chef-infra - 是否可以厨师`include_recipe`并指示`only_if`/not_if`条件？

> ID：15961496
> 
> 赞同：14
> 
> 时间：2013-04-12T01:12:36.337
> 
> 标签：chef-infra

我想满足`include_recipe` `only_if`一些条件。以下代码不会引发任何错误，但它也不关心`only_if`条件，因此在任何情况下都会执行：

```
include_recipe "cubrid" do
    only_if "hostname | grep 'blahblahshouldnotmatch'"
end 
```

**是否可以`include_recipe`仅在某些条件下进行？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-12T01:55:59.727

`include_recipe`不是 Chef 中的普通资源，而是普通方法。因此，它忽略了传递的块，随后忽略了`only_if`那里指定的条件。

幸运的是，恰好有一个解决方案。#chef freenode 频道的**松弛用户建议了以下解决方案，该解决方案非常有效。**

```
this_node_is_shard_broker = node["hostname"].include? "node2"
include_recipe "cubrid" if this_node_is_shard_broker 
```

`include_recipe`只有当当前运行节点的主机名是时，上面才会执行`node2`，这正是我想要实现的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-05-14T02:09:00.743

这工作得很好：

```
include_recipe "foo" if node['bar'] == 'baz' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-24T11:45:55.577

以上对我不起作用，但以下对我有用：

```
if node["hostname"].include? "node2"
  include_recipe "cubrid"
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-08T11:41:58.967

在所有建议的答案中

```
include_recipe "foo" if node['bar'] == 'baz' 
```

您忘记了一件极其重要的事情 - if 在编译阶段进行评估，如果 node['bar'] 在执行过程中发生更改， this if 将提供错误的结果，因为它将基于原始而不是更改价值。

有人可能会说，这是一种不好的做法，但在这样做之前要三思而后行。只是一个例子：在 chef-client 运行中安装包是一种常见的做法。之后重新加载 ohai 插件包可以看作是一种很好的做法，但是代码会发生什么：

```
include_recipe "my_cookbook::install" unless node['packages'].key?('mypackage') 
```

如果 mypackage 安装在同一客户端运行中较早执行的食谱中的某处？正确的答案是配方将被包括在内，而从代码中可以清楚地看出，期望它不是。

不幸的是，我至少不知道如何解决这个问题，因为 include_recipe 和可能的条件都是编译阶段评估的。AFAIK 没有办法根据其他食谱在相同的厨师客户端运行中所采取的操作来有条件地包括食谱。

# java - 是否可以将 JPanel 覆盖在另一个之上？

> ID：15961505
> 
> 赞同：0
> 
> 时间：2013-04-12T01:13:16.760
> 
> 标签：java, swing, jpanel, overlay

我正在尝试将较小的面板 ( `sub`) 覆盖在较大的面板 ( `parent`) 上。sub 的尺寸小于 parent 的尺寸。

```
JPanel sub = new JPanel();
JPanel parent = new CustomPanel(); 
```

我想覆盖父级的`paintComponent`方法以在左上角绘制 sub ，从顶部和左侧偏移 5 个像素。它看起来像这样：

```
class CustomPanel extends JPanel() {

    JPanel sub = null;

    public CustomPanel(JPanel sub) {
        this.sub = sub;
    }

    @Override
    public void paintComponent(Graphics g) {
        this.paintComponent(g);
        // TODO: Here is where I would call something like sub.paint();
        // However, I want sub to "start its paint" 5 pixels inside of
        // parent's dimensions. How do I specify this? 
```

是否可以告诉 sub 在特定位置绘制自己？可怕的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:10:37.357

为什么不直接`setLayout(null)`在父面板上，然后在将子面板添加到 parent 之前，使用它的`setBounds`方法设置它的位置和尺寸。这样就不需要`paintComponent`用于定位子面板了。

如果您的父面板应该具有与其他组件的特定布局，并且子面板应该覆盖所有这些，请查看[JLayer](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html) (Java 7) / [JXLayer](http://java.net/projects/jxlayer/) (Java 6)。

第三种解决方案可以使用[JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)。

# ios - 应用程序在启动时立即崩溃，仅在设备上

> ID：15961514
> 
> 赞同：4
> 
> 时间：2013-04-12T01:14:22.580
> 
> 标签：ios, objective-c, crash

我试图弄清楚为什么我正在开发的应用程序在我的设备上运行时立即开始崩溃（运行 iOS 6.1 的 iPhone 4）。我已经在这个应用程序上工作了大约 8 周，这个问题似乎突然出现了。

当我在模拟器上运行该应用程序时，它运行良好。当我尝试在我的设备上运行它时，它会崩溃，并在以下位置中断：

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

崩溃发生在 AppDelegate 方法之前

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

被调用。

我查看了设备崩溃日志，但没有看到任何可以让我了解正在发生的事情的线索。有谁知道我可以从哪里开始寻找解决方案？对于它的价值，这里是崩溃日志：

> 异常类型：EXC_CRASH (SIGABRT) 异常代码：0x0000000000000000, 0x0000000000000000 线程崩溃：0
> 
> 线程 0 名称：调度队列：com.apple.main-thread 线程 0 崩溃：0 libsystem_kernel.dylib 0x39e74350 __pthread_kill + 8 1 libsystem_c.dylib 0x39deb11e pthread_kill + 54 2 libsystem_c.dylib 0x39e2796e abort + 90 3
> GraphicsServices 04RegPister GraphicsServices 0x3d57daurce 0x35e2796e 0x357da684 _GSEventInitialize + 92 5 UIKit 0x33b2d0c8 UIApplicationMain + 552 6 CK-Ranker 0x000bbaf4 main (main.m:16) 7
> CK-Ranker 0x000bba7c 开始 + 36
> 
> 线程 1：0 libsystem_kernel.dylib 0x39e74d98 __workq_kernreturn + 8 1 libsystem_c.dylib 0x39dc2cf6 _pthread_workq_return + 14 2 libsystem_c.dylib 0x39dc2a12 _pthread_wqthread + 362 3 libsystem_c.dylib
> 0x394dc28a0 start_wqthread +
> 
> 线程 2 名称：调度队列：com.apple.libdispatch-manager 线程 2：0 libsystem_kernel.dylib 0x39e64648 kevent64 + 24 1
> libdispatch.dylib 0x39d9d4ec _dispatch_mgr_invoke + 792 2 libdispatch.dylib 0x39d8fdf4 _dispatch_mgr_thread$VARIANT$up
> 
> 线程 3：0 libsystem_kernel.dylib 0x39e74d98 __workq_kernreturn + 8 1 libsystem_c.dylib 0x39dc2cf6 _pthread_workq_return + 14 2 libsystem_c.dylib 0x39dc2a12 _pthread_wqthread + 362 3 libsystem_c.dylib
> 0x394dc28a0 start_wqthread +
> 
> Thread 4 name: WebThread Thread 4: 0 libsystem_kernel.dylib
> 0x39e63eb4 mach_msg_trap + 20 1 libsystem_kernel.dylib
> 0x39e64048 mach_msg + 36 2 CoreFoundation
> 0x31ca6040 __CFRunLoopServiceMachPort + 124 3 CoreFoundation
> 0x31ca4d9e __CFRunLoopRun + 878 4 CoreFoundation
> 0x31c17eb8 CFRunLoopRunSpecific + 352 5 CoreFoundation
> 0x31c17d44 CFRunLoopRunInMode + 100 6 WebCore
> 0x37c16500 RunWebThread(void*) + 440 7 libsystem_c.dylib
> 0x39dcd30e _pthread_start + 306 8 libsystem_c.dylib
> 0x39dcd1d4 thread_start + 4
> 
> Thread 0 crashed with ARM Thread State (32-bit): r0: 0x00000000 r1: 0x00000000 r2: 0x00000000 r3: 0x3b92d534 r4: 0x00000006 r5: 0x3b92db88 r6: 0x3b933ff4 r7: 0x2fd46c48 r8: 0x1ed7a570 r9: 0x001844f0 r10: 0x00000000 r11: 0x00000000 ip ：0x00000148 sp：0x2fd46c3c lr：0x39deb123 pc：0x39e74350 cpsr：0x00000010

我正在运行启用了 ARC 的 Xcode 4.6.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T01:21:46.113

您需要提供更多代码或告诉您的应用程序在启动时会做什么。

But its clear from the crash logs that the `Thread0` that main UI thread has been killed. This could be because on device there is a process called `watchdog`, it kills any processes which seem dubious. like take too much memory or take take too much time to show first screen on app startup & other things which "Apple" thinks would affect user experience. So...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T00:02:46.607

As it turns out there was a problem with my device. I reset my device and the crash disappeared. In future I'll be sure to remember to try resetting my device when I run into this crash.

# c# - 如何从 VisualState 更改模板化控件的属性？

> ID：15961517
> 
> 赞同：3
> 
> 时间：2013-04-12T01:14:30.233
> 
> 标签：c#, wpf, xaml, visualstates

如果我从控件模板中定义 VisualStates，是否可以从情节提要中更改模板化控件本身的属性？这是一个简单的例子：

```
<Window xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <Window.Template>
    <ControlTemplate TargetType="{x:Type Window}">
      <Grid>
        <VisualStateManager.VisualStateGroups>
          <VisualStateGroup x:Name="WindowStyleStates"
                            x:Uid="WindowStyleStates">
            <Storyboard x:Uid="Storyboard_1">
              <ObjectAnimationUsingKeyFrames Storyboard.TargetName="?????"
                                             Storyboard.TargetProperty="ResizeMode">
                <DiscreteObjectKeyFrame KeyTime="0"
                                        Value="CanResizeWithGrip" />
              </ObjectAnimationUsingKeyFrames>
            </Storyboard>
          </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
      </Grid>
    </ControlTemplate>
  </Window.Template>
</Window> 
```

问题是情节提要只能访问网格中定义的对象。如果我正在为 Window 定义 controltemplate，为什么我不能更改我正在模板化的 Window 上的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:40:38.757

您不需要`ControlTemplate`访问`VisualStateManager`. 这应该可以解决问题，尽管我没有尝试过。

```
<Window x:Name="YourWindow" ...>
    <VisualStateManager.VisualStateGroups>
        <VisualStateGroup x:Name="WindowStyleStates" x:Uid="WindowStyleStates">
            <Storyboard x:Uid="Storyboard_1">
                <ObjectAnimationUsingKeyFrames Storyboard.TargetName="YourWindow"
                                               Storyboard.TargetProperty="ResizeMode">
                    <DiscreteObjectKeyFrame KeyTime="0" Value="CanResizeWithGrip"/>
                </ObjectAnimationUsingKeyFrames>
            </Storyboard>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups>
</Window> 
```

`VisualStateManager.GoToState(...)`但是至少对于.Net 3.5，后面的代码似乎存在问题。但是有一个[解决方法](http://jack.ukleja.com/workaround-for-visualstatemanager-gotostate-not-working-on-window/)。我不知道这对你是否重要。

**回答标题中的问题：**我认为您误解了控件模板背后的概念。一个小例子...

```
<!-- A simple button with round corners -->
<Button>
  <Button.Template>
    <ControlTemplate>
      <Border x:Name="ButtonBorder"
              CornerRadius="10"
              BorderBrush="{TemplateBinding BorderBrush}"
              BorderThickness="{TemplateBinding BorderThickness}">
        <Grid>
          <ContentPresenter x:Name="ButtonContent"
                            Content="{TemplateBinding Content}" />
          <Border x:Name="ButtonBackground"
                  Background="{TemplateBinding Background}"
                  BorderBrush="{x:Null}"
                  BorderThickness="0" />
        </Grid>
      </Border>
    </ControlTemplate>
  </Button.Template>
</Button> 
```

如您所见，模板赋予`Button`了新外观。此外，视觉行为也被覆盖。好吧，在这种情况下，没有视觉行为，尽管按钮将按预期工作。
要定义视觉行为，您可以使用`VisualStateManager`预定义状态或自定义状态。但是您只能修改模板中的元素，这是合理的，因为您想重新实现按钮的外观。因此，您将添加`VisualStateManager`一个*ButtonBorder*。

# python - 捕获greenlets中引发的异常

> ID：15961518
> 
> 赞同：4
> 
> 时间：2013-04-12T01:14:39.243
> 
> 标签：python, exception, exception-handling, gevent, greenlets

我正在尝试捕捉greenlets中引发的异常。根据[本教程](http://sdiehl.github.io/gevent-tutorial/)，不幸的是'Greenlet中提出的异常，留在Greenlet中'。在下面的代码中，我有一个同步方法，它会生成爬虫绿叶。那些爬虫会引发 HTTPError 异常，我需要在同步方法的主体中捕获它。基于异常，在sync方法中我会设置Account对象的相应状态。知道如何在同步方法中捕获 greenlets 中引发的异常以完成此操作吗？先感谢您！

```
# this is standalone helper method
def crawl(item):
    try:
        item.refresh_children(False) # THROWS HTTPError exception
        greenlets = [gevent.spawn_link_exception(crawl, child) for child in item.children]
        gevent.joinall(greenlets)
    except HTTPError, e:
        print e.message
        raise e
    except (JSONDecodeError, InvalidCredentialsException) as e:
        print e.message
        raise e

# this is instance method of the Account class 
def sync(self):
    "Sync search index with data from source"
    try:
        greenlets = [gevent.spawn_link_exception(crawl, item) for item in self.get_navigation()]
        gevent.joinall(greenlets)
        self.date_synced = datetime.datetime.now()
        self.save()
    except HTTPError, e:
        if e.status_code == 401:
            self.status = 'revoked'
        else:
            self.status = 'error'
        self.save()
    except LinkedFailed, e:
        print e.message
        exception_name = e.message.split()[-1]
        if exception_name in ['HTTPError', 'JSONDecodeError']:
            self.status = 'error'
            self.save()
        elif exception_name == 'InvalidCredentialsException':
            self.status = 'revoked'
            self.save() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T15:40:00.853

Greenlets 将保存为 greenlet 或异常生成的函数的结果，如果引发了一个。您可以使用该方法获取结果或重新引发异常[`get`](http://www.gevent.org/gevent.html#gevent.Greenlet.get)。由于您似乎正在根据任何错误的greenlets更改状态，因此同步方法最终看起来像：

```
def sync(self):
    "Sync search index with data from source"
    greenlets = [gevent.spawn_link_exception(crawl, item) for item in self.get_navigation()]
    gevent.joinall(greenlets)
    try:
        results = [greenlet.get() for greenlet in greenlets]
    except HTTPError, e:
        if e.status_code == 401:
            self.status = 'revoked'
        else:
            self.status = 'error'
        self.save()
    except LinkedFailed, e:
        print e.message
        exception_name = e.message.split()[-1]
        if exception_name in ['HTTPError', 'JSONDecodeError']:
            self.status = 'error'
            self.save()
        elif exception_name == 'InvalidCredentialsException':
            self.status = 'revoked'
            self.save()

    self.date_synced = datetime.datetime.now()
    self.save() 
```

# css - float:none 被 float:left 覆盖

> ID：15961519
> 
> 赞同：0
> 
> 时间：2013-04-12T01:14:48.940
> 
> 标签：css, floating

嘿，这是我在这里的第一篇文章，我对 CSS 世界相当陌生。我有 2 段代码

```
.subCatImg.subCatImg
{
float:none;
} 
```

它控制一个特定的图像，以及控制其他几个对象的这段代码：

```
img.StoreProductImage {
float:left;
padding-right:5px;
margin:0px 5% 10px 5px;
} 
```

出于某种原因，即使 .subCatImg 具有更高的特异性，它的 float 仍然被 img.StoreProductImage 覆盖 - 我认为这是因为它是 float:none ，因此被 left 覆盖，但是即使添加 clear:both 仍然默认为 float:left . 有什么想法吗？

我还应该添加 - 如果我将 float:none 更改为向右或向左，它确实有效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:20:10.710

你确定特异性更高吗？img 是块元素与类选择器。你可以说

```
.subCatImg img.StoreProductImage{
    float:none;
} 
```

这假设图像是 .subCatImg 的孩子

Float right 可能看起来有效，因为它同时将 left 和 right 应用于元素，因为这两种情况都将匹配元素。

.subCatImg.subCatImg 是否像您在此处发布的那样声明在另一个之上？

# excel - Excel 到 Access 导入，列确定字段值

> ID：15961531
> 
> 赞同：0
> 
> 时间：2013-04-12T01:16:18.383
> 
> 标签：excel, ms-access, import, excel-2010, ms-access-2010

我正在尝试创建一个 Access 数据库来跟踪多个帐户的收入和支出。

我的困难在于，我的老板坚持要求负责报告这些账户支出的人员只能使用现有的 Excel 电子表格来这样做。我可以从 Excel 导入，但我被锁定在工作表的现有格式中。

简而言之，工作表具有以下列：

> 帐号 || 费用类型 A || 费用类型 B || C类费用（等）

我预计将来需要添加新的费用类型，因此表格需要适应这种情况。

我曾想过像这样构建费用表：

> 帐号_ID || 费用_类型 || 费用_日期 || 数量

有关存储在其自己的表中的类型的更多信息。但我不知道如何将电子表格的列映射到记录中的类型分类。目前大约有 300 个账户，有 5 种费用类型，并且两者都可能增长。

谁能帮我这个？我会接受任何类型的解决方案：Excel 技巧或更改我的数据库设置或任何其他可能有效的方法。

PS。我是 VBA 的新手——我只是在录制宏的意义上使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T12:15:53.033

将电子表格导入 Access 中的临时表后，您可以运行以下查询以“取消交叉表”数据

```
SELECT [Account ID] AS Account_ID, "Expense Type A" AS Expense_Type, 
        [Expense Type A] AS Amount
    FROM TempTable WHERE [Expense Type A] IS NOT NULL
UNION ALL
SELECT [Account ID] AS Account_ID, "Expense Type B" AS Expense_Type, 
        [Expense Type B] AS Amount
    FROM TempTable WHERE [Expense Type B] IS NOT NULL
UNION ALL
SELECT [Account ID] AS Account_ID, "Expense Type C" AS Expense_Type, 
        [Expense Type C] AS Amount
    FROM TempTable WHERE [Expense Type C] IS NOT NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:53:40.623

`Alt`使用+`D`和调用“旧”数据透视表向导`P`，选择多个合并范围和数据透视表，下一步，选择我将创建页面字段，下一步，输入范围，下一步，完成，然后双击总计交集。

# android - 重叠文本视图

> ID：15961533
> 
> 赞同：0
> 
> 时间：2013-04-12T01:16:29.367
> 
> 标签：android

```
xml file 

    RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:background="@drawable/list_selector" 
    android:orientation="horizontal" 
    android:padding="5dip">

    <LinearLayout 
    android:id="@+id/thumbnail" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:layout_alignParentLeft="true" 
    android:layout_marginRight="5dip" 
    android:padding="3dip">
   <ImageView 
      android:id="@+id/icon" 
      android:layout_width="80dip" 
      android:layout_height="80dip" 
      android:layout_gravity="top" 
      android:contentDescription="@string/app_name" 
      android:src="@drawable/high" /> 
   </LinearLayout>

   <TextView 
      android:id="@+id/newsaddress" 
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content" 
      android:layout_alignTop="@+id/icon" 
      android:layout_toRightOf="@+id/icon" 
      android:layout_marginLeft="75dip" 
      android:layout_centerVertical="true" 
      android:paddingBottom="9dip" 
      android:text="Cebu City" 
      android:textColor="#040404" 
      android:textSize="25dip" 
      android:textStyle="bold" 
      android:typeface="sans" /> 

   <TextView 
      android:id="@+id/newsdate" 
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content" 
      android:layout_below="@+id/newsaddress" 
      android:layout_alignLeft="@+id/newsaddress" 
      android:layout_alignBottom="@+id/icon" 
      android:paddingTop="5dip" 
      android:layout_centerHorizontal="true" 
      android:text="January 1 2000" 

      android:textColor="#343434" 
      android:textSize="15dip" /> 
    <TextView 
      android:id="@+id/newstitle" 
      android:layout_width="wrap_content" 
      android:layout_height="wrap_content" 
      android:layout_alignParentRight="true" 
      android:layout_centerVertical="true" 
      android:layout_marginRight="20dip" 
      android:layout_alignTop="@+id/newsaddress" 
      android:text="Fire" 
      android:textSize="30dip" /> 
   </RelativeLayout>

list xml 
    <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical">

    <ListView
        android:id="@+id/newslist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        />

    </LinearLayout> 
```

我有这个带有图像和几个文本视图的列表视图我的问题是当文本太长时它们相互重叠我尝试了几个像这样的帖子[如何调整文本字体大小以适应 textview](https://stackoverflow.com/questions/2617266/how-to-adjust-text-font-size-to-fit-textview/7875656#7875656)和这个[Auto Scale TextView Text to Fit in Bounds](https://stackoverflow.com/questions/5033012/auto-scale-textview-text-to-fit-within-bounds/7943310#7943310)但他们确实为我工作我怎么能解决这个问题这是这个程序的结果重叠文本来自第二个文本视图

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:12:20.013

你有几个小问题。

这些行将无法正常工作：

```
 android:layout_alignTop="@+id/icon" 
  android:layout_toRightOf="@+id/icon 
```

您不能从 LinearLayout 内部引用 id 来在相对布局中排列内容，即使它们都在同一个大布局中。

我改变了一些布局，并放入了一些更大的字符串来测试它，并改变了你的一些填充，因为它很可能因为图标的东西而有点古怪。

![在此处输入图像描述](https://i.stack.imgur.com/14sLj.png)

这是我使用的代码。我确定它不完全是您想要的，但我认为它指出了如何解决一些问题。

```
<?xml version="1.0" encoding="utf-8"?>

        <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@color/grey"
        android:orientation="horizontal"
        android:padding="5dip">

<LinearLayout
        android:id="@+id/thumbnail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="5dip"
        android:padding="3dip">
    <ImageView
            android:id="@+id/icon"
            android:layout_width="80dip"
            android:layout_height="80dip"
            android:layout_gravity="top"
            android:contentDescription="@string/app_name"
            android:background="@color/white" />
</LinearLayout>

<TextView
android:id="@+id/newsaddress"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignTop="@+id/thumbnail"
android:layout_toRightOf="@+id/thumbnail"
android:layout_marginLeft="2dp"
android:layout_centerVertical="true"
android:paddingBottom="0dip"
android:text="Cebu City in the south of france"
android:textColor="#040404"
android:textSize="25dip"
android:textStyle="bold"
android:typeface="sans" />

<TextView
android:id="@+id/newsdate"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_below="@+id/newsaddress"
android:layout_alignLeft="@+id/newsaddress"
android:paddingTop="1dip"
android:layout_centerHorizontal="true"
android:text="January 1 2000"

android:textColor="#343434"
android:textSize="15dip" />
<TextView
android:id="@+id/newstitle"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentRight="true"
android:layout_centerVertical="true"
android:layout_marginRight="20dip"
android:layout_below="@id/newsdate"
android:text="Fire is exploding all around us now"
android:textSize="30dip" />
        </RelativeLayout> 
```

# android - 从两个 Eclipse 工作区启动两个 android 模拟器

> ID：15961534
> 
> 赞同：0
> 
> 时间：2013-04-12T01:16:29.010
> 
> 标签：android, android-emulator

**问题陈述：-**

我有两个`Eclipse Workspace`。

在我的第一个 eclipse 工作区中，我有一个在一个模拟器上启动的项目，我可以在那个模拟器上看到我的应用程序，它在那里运行良好。我**始终提示拾取设备**设置已启用。一旦我启动应用程序，我就会选择我的第一个模拟器，即`Hack1`.

在我的第二个 Eclipse 工作区中，我也有相同的项目，但对 UI 做了一些小的改动。现在我正在尝试在另一个模拟器上启动我的应用程序（与第一个模拟器相同的配置，但使用了新名称）。但是，一旦我尝试启动该应用程序，我的第二个模拟器就没有启动？在这种情况下，一旦我启动应用程序，我就会选择我的第二个模拟器，即`Hack2`.

我不确定是什么问题。我试了几次？

任何人都知道可能是什么问题？

我只是想从一个 Eclipse 工作区启动模拟器，从另一个 Eclipse 工作区启动其他模拟器。但它们都是相同的项目，只是做了一些小的改动。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T11:33:05.070

我可以建议您首先杀死正在运行的进程..按照以下步骤操作...步骤 1：打开命令提示符步骤 2：键入 adb kill-server 步骤 3：键入 adb start-server 然后清除您的项目并运行...

# web-deployment - 部署 msdeploy iisApp 包时未设置应用程序池

> ID：15961535
> 
> 赞同：4
> 
> 时间：2013-04-12T01:16:32.533
> 
> 标签：web-deployment, msdeploy

我遇到了一个问题，msdeploy 没有为站点的子应用程序同步应用程序池信息（例如，默认网站）。

本质上，我希望我可以创建 webdeploy/msdeploy 包作为多个开发分支的夜间构建过程的一部分，然后将这些特定于分支的包部署到服务器进行冒烟测试。一切似乎都是合理的，但不幸的是，我找不到设置已部署包的 iisApp 打算使用的应用程序池的方法。我可以创建和部署包含 appPoolConfig 提供程序的包，以支持创建应用程序池本身，但如果我无法在我正在部署的应用程序上设置应用程序池，这将毫无用处。

顺便说一句，我觉得我几乎是在重复其他看起来相似的问题。使用 appPoolconfig 或 appPoolExtension 给出了各种答案，但我对这些没有运气。根据我的阅读，appPoolConfig 用于同步应用程序池本身，而不是“分配”给应用程序的应用程序池。顺便说一句，这种类型的同步操作效果很好。至于 appPoolExtension，我不知道它在打开时实际上做了什么，因为我发现生成的包没有区别。

我可以使用一组简单的步骤重新创建问题，这些步骤仅使用 msdeploy 而没有 WPP/webdeploy/msbuild，目的是它应该单独使用最低级别的工具：

Windows 8（注意：我也可以在 Win 2008 R2 上复制该问题），安装 IIS 和 Web Deploy 3.0。

1.  假设存在默认网站并安装了 .NET 4.0，请创建一个名为 TestPool 的新应用程序池。
2.  在 Default Web Site 下创建一个名为 TestApp 的新应用程序，并将其应用程序池分配给在步骤 1 中创建的 TestPool。
3.  打开具有对 msdeploy 的路径访问权限的命令提示符。
4.  类型 >

    ```
    msdeploy -verb:sync -source:iisApp="Default Web Site/TestApp" -dest:package=c:\temp\testapp.zip,encryptPassword="password" -enableLink:AppPoolExtension 
    ```

5.  现在我们有了一个包，我们可以从默认网站下删除 TestApp 并删除作为初始应用程序创建的一部分创建的任何剩余物理文件夹。
6.  假设我们仍然在 IIS 中将 TestPool 应用程序池配置为可用池，请键入 >

    ```
    msdeploy -verb:sync -source:c:\temp\testapp.zip,encryptPassword="password" -dest:iisApp="Default Web Site/TestApp" -enableLink:AppPoolExtension 
    ```

7.  转到 IIS Manager 并在 Default Web Site 下选择我们的 TestApp。单击 Basic Settings...，Application Pool 不是必需的 TestPool，而是为 Default Web Site 设置的默认池。

任何帮助表示赞赏。

编辑：只需对上述步骤进行变体，并在两个 msdeploy 命令行中将“iisApp”更改为“appHostConfig”，并保留应用程序池设置，因此从 msdeploy 的角度来看是成功的。但是，如果这是解决方案，如何通知 VS 2012 发布过程使用 appHostConfig 而不是 issApp？

编辑：在回答我自己的编辑时，这个答案有效：[https](https://stackoverflow.com/a/12741525/739097) ://stackoverflow.com/a/12741525/739097 。这引出了另一个问题，即如何在没有 IIS 的构建服务器上集成包创建，但我的想法是，首先根据所需的 IIS 设置、动态参数等创建模板包，但基本上没有内容。然后，构建过程将仅创建一个内容包，并将其与模板包同步，以创建用于部署的最终包。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T06:34:18.437

通过您的编辑，您的问题已经变得多方面，但我会一次解决一件事。

只有`appHostConfig`提供者可以创建全局 IIS 对象，例如站点和应用程序池。

`iisApp`只是`createApp`（可以将目录标记为应用程序）和`contentPath`（同步文件/文件夹）的组合。

为了打包/同步`appHostConfig`提供者而不是`iisApp`提供者，您需要做两件事：

1.  将您的项目文件标记为使用具有有效 URL 的 IIS（您可以覆盖 MSBuild 文件以通过定义来检查这些属性`WebPublishPipelineWAPProjectSettings`）
2.  `IncludeIisSettings=true`在您的发布配置文件中声明

但是，是的，这需要在构建服务器上安装 IIS（或者，至少，构建服务器可以访问 IIS 实例）。毕竟，MSDeploy 是一个*Web 同步框架*。

您可能会做的是手动生成一个包，其中包含您的网站*定义*和另一个在构建期间生成的包含*内容*的包。但是，请注意这一点，因为如果应用程序池包含高级选项并且包不是由与部署目标相同版本的 IIS 生成的，您可能会遇到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-04T06:51:16.460

```
<pre>
<code>
msdeploy.exe -source:package='mysite.zip' -dest:auto,computerName='https://myserver:8172/MsDeploy.axd',userName='myuser',password='mypwd',authtype='basic' -verb:sync -enableLink:AppPoolExtension -allowUntrusted -setParam:"IIS Web Application Name"="mysite"
</code>
</pre> 
```

# vb.net - 在 datagridview 中设置 SELECTEDROWS 列的值的最快方法是什么？

> ID：15961537
> 
> 赞同：0
> 
> 时间：2013-04-12T01:16:36.807
> 
> 标签：vb.net, vb.net-2010

我有这行代码将“TRUE”放在 selectedrows 的所有第一列上：

```
For Each row As DataGridViewRow In DataGridView1.SelectedRows
     row.Cells(0).Value = True
Next 
```

但是如果行数超过一百，则将单个值放入该列需要很多时间。row.Cells(0) 是一个布尔列，我只需要将它设置为选中/未选中。

我已经尝试检查是否存在可以设置列值的语法，但我从可用的语法和搜索引擎中都找不到任何有用的东西。希望你能帮我解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T04:31:20.487

如果`DataGridView`是数据绑定的，则不应直接修改单元格的内容。相反，您应该修改数据绑定对象。`DataBoundItem`您可以通过`DataGridViewRow`例如 c#访问该对象：

```
MyObject obj = (MyObject)dataGridView.CurrentRow.DataBoundItem;
obj.MyProperty = newValue; 
```

请注意，绑定对象应实现`INotifyPropertyChanged`，以便更改反映在[此处](https://stackoverflow.com/questions/1516252/how-to-programmatically-set-cell-value-in-datagridview)`DataGridView`的 Found

VB.net：

```
Dim obj As MyObject = DirectCast(dataGridView.CurrentRow.DataBoundItem, MyObject)
obj.MyProperty = newValue 
```

# c++ - 使用 head_return 和 tail_return 从链表中查找和删除

> ID：15961538
> 
> 赞同：-1
> 
> 时间：2013-04-12T01:16:40.100
> 
> 标签：c++, linked-list

我正在处理一个链表示例。我正在查找和删除函数，它遍历列表以查找特定元素。find_remove 函数不起作用。应用程序中的所有其他函数（head_return、tail_return 等）都可以工作

如果有人能指出我在 find_remove 上哪里出了问题，我将不胜感激。

```
#include <iostream>
using namespace std;

struct node_ll
{
    int payload;
    node_ll* next;//Pointer to the next node
};

void head_insert(node_ll** list, int pload)
{
    node_ll* temp = new node_ll;//Create a new node, and let temp be the address of that node.
    temp->payload = pload;//Set the payload of the struct whose address is temp to pload.
    temp->next = *list;//Set the next of the struct whose address is temp to the address of the old head of the list.
    *list = temp;//The address of the old head of the list is changed to the address of the struct temp.
};

void tail_insert(node_ll** list, int pload)
{
    if (*list == NULL)
    {
        head_insert(list, pload);
    }
    else
    {
        node_ll* temp = new node_ll;
        for (temp = *list; temp->next; temp = temp->next);
        temp->next = new node_ll;
        temp->next->payload = pload;
        temp->next->next = NULL;
    }
}

int head_return (node_ll** list)
{
    if (*list != NULL)
    {
    int temp = (*list)->payload;
      node_ll* trash = *list;
      *list = (*list)->next;
      delete trash;
      return temp;
    }
    else
    {
        return 0;
    }
}

int tail_return (node_ll** list)
{
    if (*list != NULL)
    {
      if ((*list)->next == NULL)
        {
            return head_return(list);
        }
        else
        {
      node_ll* trash;
            for (trash = *list; trash->next->next; trash = trash->next);
            int temp = trash->next->payload;
            delete trash->next;
            trash->next = NULL;
            return temp;
        }
    }
    else
    {
        return 0;
    }
}

void find_remove (node_ll** list, int pload)
{
    if (*list != NULL)
    {
        node_ll* temp;//Declared before loop for use after loop.
        for (temp = *list; temp->next; temp = temp->next)
        {
            if (temp->payload == pload)
            {
                int trash = head_return(&temp);
            }
        }
        if (temp->payload == pload)
        {
            int trash = tail_return(list);
        }
    }
}

void print_ll (node_ll** list)
{
  node_ll* temp = *list;//Let temp be the address of the node that is the head of the list.
    while(temp)// != NULL
    {
        cout << temp->payload << endl;//Print out payload of the struct whose address is temp.
        temp = temp->next;//Set the address of temp equal to the address stored in next of the struct whose address is temp.
    }
}

int main()
{
    node_ll *blist = NULL;
    tail_insert(&blist, 2);
    tail_insert(&blist, 4);
    tail_insert(&blist, 6);
    find_remove(&blist, 4);
    print_ll(&blist);
    cout << '\n';

    system("PAUSE");
    return 0;
} 
```

**编辑**：

这是我重写代码的尝试。

```
void find_remove (node_ll** list, int pload)
{
    if (*list != NULL)
    {
        while (*list && (*list)->payload == pload)
        {
            head_return(list);
        }
        if (*list != NULL)
        {
            node_ll* temp;
            for (temp = *list; temp->next->next; temp = temp->next)
            {
                if (temp->next->payload == pload)
                {
                    node_ll* trash = temp->next;
                    temp->next = temp->next->next;
                    head_return(&trash);
                }
            }
        }
    }
} 
```

**编辑2：** 谢谢！如果开头有多个匹配节点、中间有多个匹配节点或结尾有多个匹配节点，则此新解决方案有效。

```
void find_remove (node_ll** list, int pload)
{
    if (*list != NULL)
    {
        while (*list && (*list)->payload == pload)
        {
            head_return(list);
        }
        if (*list != NULL)
        {
            node_ll* temp;
            for (temp = *list; temp->next; temp = temp->next)
            {
                while (temp->next->next != NULL && temp->next->payload == pload)
                {
                    node_ll* trash = temp->next;
                    temp->next = temp->next->next;
                    head_return(&trash);
                }
            }
            if (temp->next == NULL && temp->payload == pload)
            {
                tail_return(list);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:35:36.637

崩溃是由于您的循环逻辑不正确，而且您没有跟踪前一个节点，这意味着您没有正确重置链表，这是最简单的修复：

```
void find_remove (node_ll** list, int pload)
{
    if (*list != NULL)
    {
        node_ll* temp, *prev=NULL;//Declared before loop for use after loop.
        for (temp = *list; temp != NULL; temp = temp->next)
        {
            if (temp->payload == pload)
            {
               if( NULL != prev )
               {
                  prev->next = temp->next ;
               }
                int trash = head_return(&temp);
            }

            prev=temp ;
         }
   }
} 
```

虽然老实说代码有很多样式问题，并且更像 C 样式代码而不是 C++ 样式代码。您可能需要考虑查看[Code Review](https://codereview.stackexchange.com/)。

**更新：**

如果您在修改后的代码中更改它，它会起作用：

```
for (temp = *list; temp->next != NULL; temp = temp->next)
                   ^^^^^^^^^^^^^^^^^^ 
```

在循环的顶部，您永远不知道是否`temp->next`为 NULL，因此这样做`temp->next->next`永远无效。

# javascript - 当您使用 angularjs 在同一字段中键入时，如何动态格式化输入字段文本

> ID：15961539
> 
> 赞同：4
> 
> 时间：2013-04-12T01:16:45.657
> 
> 标签：javascript, angularjs

[http://jsfiddle.net/crimsonalucard/238u6/](http://jsfiddle.net/crimsonalucard/238u6/)

javascript:

```
var myModule = angular.module('myModule', []);

myModule.controller('myController', function($scope){
});

myModule.directive('addColons', function(){
    return{
        restrict: 'A',
        require: 'ngModel',
        link: function(scope, element, attr, ngModel){
            ngModel.$parsers.push(addColons);
            ngModel.$formatters.push(addColons);
        }
    };
});

function insert(text, insertion, index)
{
    return text.slice(0,index) + insertion + text.slice(index);
}

function addColons(text)
{

    if(text.length !== undefined)
    {
        console.log("length is: " + text.length);
        for(var i = text.length-2; i>0; i-=2)
        {
            if(text.charAt(i) !== ':')
            {
                text = insert(text, ":", i);
            }
        }
    }
    return text;
} 
```

HTML：

```
<div ng-app="myModule">
    <div ng-controller="myController">
        <input add-colons type="text" ng-model="time"/>
        <p>How do I get the text in the input field above to dynamically change to be equivalent to the string below as I am typing?</p>
        <p>$scope.time = {{time}}</p>
    </div>
</div> 
```

请参阅上面的 JSFiddle。我希望输入字段中的文本使用 $scope.time 中看到的格式动态更新自身。这将如何完成？

所以基本上当我在输入字段中键入 (0000000) 时，我希望输入字段本身（不仅仅是 $scope.time）动态更改以匹配我将 $scope.time 格式化为 (0:00:00:00) 的内容.

（编辑：）我希望解决方案除了角度本身之外不使用任何其他库。我意识到 angular-UI 掩码指令是一种可能的解决方案，但这不是我想要的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T02:25:34.710

您可以使用 AngularUI 的 Mask 指令。[http://angular-ui.github.io/](http://angular-ui.github.io/)

[这里](https://groups.google.com/forum/?fromgroups=#!topic/angular/OnA1fohCQYU)也有一个关于这个话题的讨论，有一个例子。

# ios - iOS：1 小时后自动删除新的数据库条目

> ID：15961553
> 
> 赞同：0
> 
> 时间：2013-04-12T01:18:12.157
> 
> 标签：ios, objective-c, database, server-side

我正在构建一个允许“社交便利贴”的 iOS 应用程序。您和您的朋友可以创建一个共享墙，大家都可以在上面发布笔记。

我希望每张便利贴的“寿命”为 1 小时。例如，假设您在 3:00 发布了一条注释。从 3:00 到 3:59，您和您的朋友可以看到该便条。下午 4:00，该便笺被自动删除，您和您的朋友将无法再看到它。

除了自动删除功能之外，我已经构建了所有东西——我只是不确定如何实现这种东西。我不确定这样的事情是否可以在客户端（在应用程序本身）中实现。似乎某种服务器端进程必须连续运行，将每个笔记的时间戳与当前时间进行比较，如果时间戳与当前时间之间的差异大于 1 小时，则删除该笔记。（请记住，我目前使用[Parse](http://parse.com)作为我的后端。）

有什么建议么？

# php - 内爆一个阵列，然后移动到下一个阵列

> ID：15961555
> 
> 赞同：1
> 
> 时间：2013-04-12T01:18:36.297
> 
> 标签：php, foreach, implode

在 foreach 循环中内爆多个数组时遇到一点问题。

阵列现在看起来像这样。

```
Array (
[0] => Array ( [img] => /Content/ProductImages/big/9414339613250.jpg [prodtitle] => Heineken Lager 330ml Btls [unit] => 12pk [price] => [wasprice] => 26.99 [specprice] =>      ) 
[1] => Array ( [img] => /Content/ProductImages/big/7501064191367.jpg [prodtitle] => Corona Extra Beer 355ml Bottles [unit] => 12pk [price] => [wasprice] => 26.99 [specprice] => 22.99 )     
[2] => Array ( [img] => /Content/ProductImages/big/9414774095307.jpg [prodtitle] => Steinlager Lager 330ml Btls [unit] => 12pk [price] => [wasprice] => 23.99 [specprice] => 21.99 ) 
```

然而，在 foreach 循环中，它只会使第一个数组内爆循环必须进行的次数：

```
/Content/ProductImages/big/9414339613250.jpg','Heineken Lager 330ml Btls ','12pk ','','26.99','20.99
/Content/ProductImages/big/9414339613250.jpg','Heineken Lager 330ml Btls ','12pk ','','26.99','20.99
/Content/ProductImages/big/9414339613250.jpg','Heineken Lager 330ml Btls ','12pk ','','26.99','20.99 
```

我希望它在每个数组中移动。数字或数组不是特定的，因为可能会添加或减去项目。

```
/Content/ProductImages/big/9414339613250.jpg','Heineken Lager 330ml Btls ','12pk','','26.99','20.99
/Content/ProductImages/big/7501064191367.jpg','Corona Extra Beer 355ml Bottles ','12pk ','','26.99','22.99 
```

整个代码如下所示：

```
$html = file_get_html($url);

foreach($html->find('div.product-details-contents') as $content) {
    $detail['img'] = $content->find('img.product-details-image',0)->src;
    $detail['prodtitle'] = $content->find('span.title', 0)->plaintext;
    $detail['unit'] = $content->find('span.unit-size', 0)->plaintext;
    $detail['price'] = filter_var($content->find('span.price', 0)->plaintext, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION | FILTER_FLAG_ALLOW_THOUSAND);
    $detail['wasprice'] = filter_var($content->find('span.was-price', 0)->plaintext, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION | FILTER_FLAG_ALLOW_THOUSAND);
    $detail['specprice'] = filter_var($content->find('span.special-price', 0)->plaintext, FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION | FILTER_FLAG_ALLOW_THOUSAND);

    $product[] = $detail;

    $sqlstring = implode("','", $product[0]);
    echo $sqlstring;
}
print_r($product); 
```

此外，当`$sqlstring = implode("','", $product[0]);` `$product[0]`数量增加时，它会给出错误，例如：

> 警告：implode() [function.implode]：传递的参数无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:38:52.583

你说只有第一个数组正在内爆。好吧，看起来：

```
$sqlstring = implode("','", $product[0]); 
```

这种代码的和平总是使产品数组的第一个元素内爆。为什么不这样做：

```
$sqlstring = implode("','", $detail); 
```

# php - 使用 PHP 和 CIDR 计算 IP 范围

> ID：15961557
> 
> 赞同：3
> 
> 时间：2013-04-12T01:18:58.903
> 
> 标签：php, cidr

我在这个网站上看到了各种各样的问题和答案，但我仍然很难解决这个问题（可能是因为我感冒了）。无论如何，我正在尝试开发一个小型 Web 应用程序，该应用程序将为我们的每个办公室创建 IP 地址表。

比如说如果我为 10.1.10.0/4 创建一个新范围，它将创建一个数组（然后我可以将其打印到一个表中）：

```
 10.1.10.0 network ID
 10.1.10.1 gateway
 10.1.10.2 usable
 10.1.10.3 broadcast 
```

（并不是说它会自动插入描述，但这就是我们要做的）。

我很确定我将使用 ip2long/long2ip 将地址存储为整数，但仍然如此。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-16T20:29:24.993

正如您已经注意到的，所有 IPv4 地址都可以使用 转换为数字`ip2long()`，然后使用`long2ip()`. 我不确定您是否注意到关键的额外信息是顺序 IP 对应于顺序编号，因此您可以操纵这些数字！

给定一个 CIDR 前缀（例如，对于您的范围），您可以使用[位移运算符](http://www.php.net/manual/en/language.operators.bitwise.php)`$prefix = 30`计算该范围内的 IP 数量：

```
$ip_count = 1 << (32 - $prefix); 
```

然后使用以下命令遍历该范围内的所有 IP：

```
$start = ip2long($start_ip);
for ($i = 0; $i < $ip_count; $i++) {
    $ip = long2ip($start + $i);
    // do stuff with $ip...
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-03-18T20:01:45.567

**以下是基于 CIDR 计算真实 IP 范围的实际方法：**

最佳答案实际上是不正确的。它给出了错误的 IP 范围列表。

```
function ipRange($cidr) {
   $range = array();
   $cidr = explode('/', $cidr);
   $range[0] = long2ip((ip2long($cidr[0])) & ((-1 << (32 - (int)$cidr[1]))));
   $range[1] = long2ip((ip2long($range[0])) + pow(2, (32 - (int)$cidr[1])) - 1);
   return $range;
}

 var_dump(ipRange("207.64.1.68/28"));

 //////////////////OUTPUT////////////////////////
 // array(2) {
 //   [0]=>
 //   string(12) "207.64.1.64"
 //   [1]=>
 //   string(12) "207.64.1.79"
 // }
 ///////////////////////////////////////////////// 
```

IP：207.64.1.68

应该给我 207.64.1.64 和 207.64.1.79 内的所有 IP

其他答案不减去，它们仅来自 207.64.1.68 - 207.64.1.83（在 IP 范围块中不正确）

你可以在这里查看：[https ://www.ipaddressguide.com/cidr](https://www.ipaddressguide.com/cidr)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-18T20:30:58.670

我正在使用以下功能为我提供网络、第一个可用、最后一个可用和广播地址以及所有主机：

```
function ipv4Breakout ($ip_address, $ip_nmask) {
    $hosts = array();
    //convert ip addresses to long form
    $ip_address_long = ip2long($ip_address);
    $ip_nmask_long = ip2long($ip_nmask);

    //caculate network address
    $ip_net = $ip_address_long & $ip_nmask_long;

    //caculate first usable address
    $ip_host_first = ((~$ip_nmask_long) & $ip_address_long);
    $ip_first = ($ip_address_long ^ $ip_host_first) + 1;

    //caculate last usable address
    $ip_broadcast_invert = ~$ip_nmask_long;
    $ip_last = ($ip_address_long | $ip_broadcast_invert) - 1;

    //caculate broadcast address
    $ip_broadcast = $ip_address_long | $ip_broadcast_invert;

    foreach (range($ip_first, $ip_last) as $ip) {
            array_push($hosts, $ip);
    }

    $block_info = array(array("network" => "$ip_net"),
            array("first_host" => "$ip_first"),
            array("last_host" => "$ip_last"),
            array("broadcast" => "$ip_broadcast"),
            $hosts);

    return $block_info;
} 
```

我还注意到您要求根据 CIDR 表示法进行计算。这是我用来从 CIDR 转换为点分十进制的函数：

```
function v4CIDRtoMask($cidr) {
    $cidr = explode('/', $cidr);
    return array($cidr[0], long2ip(-1 << (32 - (int)$cidr[1])));
} 
```

我主要处理点分十进制而不是 CIDR 表示法。ipv4Breakout 函数通过长格式返回一个包含您需要的所有信息的多维数组。如果您想要实际的点分十进制 IP 地址，则需要使用 long2ip()。该函数需要点分十进制格式的 IP 地址和子网掩码。

希望这可以帮助您或其他任何人。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-12T00:10:07.420

我的版本可以帮助您使用变量。

```
<?php
$ip_address = "192.168.0.2";
$ip_nmask = "255.255.255.0";
ipv4Breakout($ip_address, $ip_nmask);

function ipv4Breakout ($ip_address, $ip_nmask) {
    //convert ip addresses to long form
    $ip_address_long = ip2long($ip_address);
    $ip_nmask_long = ip2long($ip_nmask);
    //caculate network address
    $ip_net = $ip_address_long & $ip_nmask_long;
    //caculate first usable address
    $ip_host_first = ((~$ip_nmask_long) & $ip_address_long);
    $ip_first = ($ip_address_long ^ $ip_host_first) + 1;
    //caculate last usable address
    $ip_broadcast_invert = ~$ip_nmask_long;
    $ip_last = ($ip_address_long | $ip_broadcast_invert) - 1;
    //caculate broadcast address
    $ip_broadcast = $ip_address_long | $ip_broadcast_invert;

    //Output
    $ip_net_short = long2ip($ip_net);
    $ip_first_short = long2ip($ip_first);
    $ip_last_short = long2ip($ip_last);
    $ip_broadcast_short = long2ip($ip_broadcast);
    echo "Network - " . $ip_net_short . "<br>";
    echo "First usable - " . $ip_first_short . "<br>";
    echo "Last usable - " . $ip_last_short . "<br>";
    echo "Broadcast - " . $ip_broadcast_short . "<br>";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-24T14:38:27.247

我创建了这个 php 函数以获取网络/范围的子网拆分。它适用于 ipv4 或 ipv6。
如果 php<5.4 然后使用这个 hex2bin 函数[https://github.com/dompdf/dompdf/issues/1692](https://github.com/dompdf/dompdf/issues/1692)

```
function divide_ip_range($cidr="2001:db8:abc:12ff::/54",$mindivs=2){ // input range 192.168.4.0/24 and returns array with the 1st range and 2nd range [0] => 192.168.4.0/25 , [1] => 192.168.4.127/25
  $outarr=array();
  list($ipaddr,$range) = explode('/', $cidr);
  for($rngsplit=1;pow(2,$rngsplit)<$mindivs;$rngsplit++){} // find to how many networks to divide
  $divs=pow(2,$rngsplit);    
  $divcidr=(int)$range+$rngsplit;
  if(preg_match("/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/",$ipaddr)){ // IPv4
    $ip_address_long = ip2long($ipaddr);
    $ip_nmask_long=(-1 << (32 - $range));
    $ip_net = $ip_address_long & $ip_nmask_long;
    $ip_broadcast_invert = ~$ip_nmask_long;
    $ip_last = ($ip_address_long | $ip_broadcast_invert) - 1;
    $ip_broadcast = $ip_address_long | $ip_broadcast_invert;
    $numofhosts=pow(2,32-$range)-2;
    for ($i=0;$i<$divs;$i++){
      $outarr[]=long2ip($ip_net+$i*ceil($numofhosts/$divs)+($i*ceil($numofhosts/$divs)%2) )."/$divcidr";
    }
    //echo "Net:$ipaddr/$range\nFirst:".long2ip($ip_net)."\nLast: ".long2ip($ip_last)."\nNumOfHosts:$numofhosts \n";
  } else if (preg_match("/^[0-9a-f:]+$/",$ipaddr)) { // IPv6 section 
    $ip_addr_bin = inet_pton($ipaddr);
    $ip_addr_hex = bin2hex($ip_addr_bin);
    $flexbits = 128 - $range; // Calculate the number of 'flexible' bits for first net
    $pos = 31; $addr_hex_first = $ip_addr_hex; $addr_hex_last = $ip_addr_hex;
    while ($flexbits > 0) {
      $orig_val = hexdec(substr($ip_addr_hex, $pos, 1)); // dec value of pos char. ex. f=15
      $mask = 0xf << (min(4,$flexbits)); // calculate the subnet mask. min() prevents comparison to be negative 
      $new_val_first = $orig_val & $mask;
      $addr_hex_first = substr_replace($addr_hex_first, dechex($new_val_first) , $pos, 1); // Put hex character in pos
      $segmask=(pow(2,min(4,$flexbits))-1); // Last address: OR it with (2^flexbits)-1, with flexbits limited to 4 at a time
      $new_val_last = $orig_val | $segmask;
      $addr_hex_last = substr_replace($addr_hex_last, dechex($new_val_last) , $pos, 1);
      $pos--; $flexbits -= 4; // Next nibble
    }
    $partpos=(4*floor($pos/4)); // The 4 digits that vary by the subnetting
    $partfirst=substr($addr_hex_first,$partpos,4);
    $partlast=substr($addr_hex_last,$partpos,4);
    $numofhosts=(hexdec($partlast)+1-hexdec($partfirst));
    for ($i=0;$i<$divs;$i++){
      $partdiv=dechex(hexdec($partfirst)+$i*$numofhosts/$divs);
      $addr_hex_div=substr_replace($addr_hex_first, $partdiv , $partpos, 4);
      $outarr[]=inet_ntop(hex2bin($addr_hex_div))."/$divcidr";
    }  
    //echo "Net:$ipaddr/$range\nFirst:".inet_ntop(hex2bin($addr_hex_first))."\nLast:".inet_ntop(hex2bin($addr_hex_last))."\nNumOfHosts:$numofhosts\nDivide at partpos:$partpos ($partlast+1-$partfirst)/$divs=$partdiv\n";
  }
  return $outarr;
} 
```

# python - 我如何以编程方式从宏内部获取包含宏的页面的完整呈现版本？

> ID：15961569
> 
> 赞同：0
> 
> 时间：2013-04-12T01:20:38.367
> 
> 标签：python, macros, moinmoin

我正在寻找一个 moinmoin 宏，它对页面的完全呈现版本执行一些处理（也许这最好通过一个动作来实现？我是 moinmoin 的新手，不确定最佳方法）。

有没有一种简单的方法可以让我获得包含宏的 moinmoin 页面的完整呈现版本？

似乎请求对象具有一些关闭的属性（例如页面和数据），但不是最终结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:05:01.917

你不能。

我想不出任何允许你这样做的宏语言，事实上，我看不出它怎么可能做到，因为它会触发无限递归。我也看不出有任何理由这样做。

如果要处理完全呈现的页面，则需要在页面呈现后进行，而不是从宏内部进行。我不知道用 MoinMoin 做到这一点的最好方法是什么。也许是一个 WSGI 中间件，假设您使用 WSGI 运行它。

这还取决于您要进行的处理。[例如， Diazo](http://docs.diazo.org/en/latest/)是一种非常棒的皮肤网站方式。

# delphi - 如何从后代组件中删除属性

> ID：15961579
> 
> 赞同：2
> 
> 时间：2013-04-12T01:22:04.310
> 
> 标签：delphi

我已经创建了一个 TListView 后代组件...它的功能完美无缺，但我想知道是否可以删除我不希望在后代中的 TListView 属性。我不想出现在对象检查器中的属性是 LargeImages、RowSelect、ShowColumnHeader、ShowWorkAreas、ViewStyle、OwnerData、OnData 和 OnDataFind。后代只有一种视图样式 vsIcon。

这是组件的接口部分：

```
 TImageEnListView = class(TListView)
  private
    FImageList: TImageList;
    FImageIndex: integer;
    FStringList: TStringList;
    FThumbnailWidth: integer;
    FThumbnailHeight: integer;
    FIconVerticalSpacing: integer;
    FIconHorzontalSpacing: integer;
    FFolder: string;
    FShadowedThumbnail: boolean;
    FShowCaptions: boolean;
    FShowTips: boolean;
    FBackgroundWorker: TBackgroundWorker;
    FTaskDialog: TTaskDialog;
    procedure BackgroundWorkerWork(Worker: TBackgroundWorker);
    { Event after threading is complete }
    procedure BackgroundWorkerWorkComplete(Worker: TBackgroundWorker; Cancelled: Boolean);
    { Event for feedback to GUI }
    procedure BackgroundWorkerWorkFeedback(Worker: TBackgroundWorker; FeedbackID,
      FeedbackValue: Integer);
  public
   { Public declarations }
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
    { Clears thumbnails, fileList and imageList }
    procedure ClearThumbnails;
    procedure InfoTip(Sender: TObject; Item: TListItem; var InfoTip: string);
    procedure Data(Sender: TObject; Item: TListItem);
    procedure DataFind(Sender: TObject; Find: TItemFind; const FindString: string;
      const FindPosition: TPoint; FindData: Pointer; StartIndex: Integer; Direction:
      TSearchDirection;
      Wrap: Boolean; var Index: Integer);
    procedure FillItems;
    property BackgroundWorker: TBackgroundWorker read FBackgroundWorker;
  published
    { Published declarations }
    property Folder: string read FFolder write FFolder;
    property FileList: TStringList read FStringList write FStringList;
    property ImageList: TImageList read FImageList write FImageList;
    property ThumbnailWidth: integer read FThumbnailWidth write FThumbnailWidth default 170;
    property ThumbnailHeight: integer read FThumbnailHeight write FThumbnailHeight default 120;
    property ShadowedThumbnail: boolean read FShadowedThumbnail write FShadowedThumbnail default
      True;
    property ShowTips: boolean read FShowTips write FShowTips default False;
    property ShowCaptions: boolean read FShowCaptions write FShowCaptions default True;
  end; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-12T01:24:25.050

[`TTCustomListView`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomListView)从而不是创建您的类`TListView`，并只公开您想要使其可见的属性和事件。您可以使用 VCL 源（在单元中）以完全相同的方式`ComCtrls`查看它是如何完成的（当然，除了将它们全部公开）。这是一个（非常无用的）示例，说明如何这样做：`TListView``TListView`

```
TImageEnListView = class(TCustomListView)
... other code
published
  // Only expose some of the properties that are protected
  // in TCustomListView. Meaningless from a use standpoint,
  // but demonstrates the technique
  property Columns;
  property ColumnClick;
  property Constraints;
  property DragCursor;
  property DragKind;
  property DragMode;
  property Enabled;
  property Font;
  property FlatScrollBars;
  property FullDrag;
  property GridLines;
  property HideSelection;
end; 
```

对于没有`TCustom`祖先的类，您可以创建一个包装类并将您想要更改的类作为私有字段包含在其中，并且仅通过您发布的新属性公开您想要的功能。像这样的东西应该让你开始（我只会公开一两个属性，你可以从那里得到它）：

```
type
  TMySpecialListView=class(TComponent)
  private
    FEnListView: TImageEnListView;
    function GetThumbnailHeight: Integer;
    function GetThumbnailWidth: Integer;
    procedure SetThumbnailHeight(Value: Integer);
    procedure SetThumbnailWidth(Value: Integer);
  public
    constructor Create(AOwner: TComponent); override;
  published
    property ThumbnailHeight: Integer read GetThumbnailHeight
      write SetThumbnailHeight;
    property ThumbnailWidth: Integer read GetThumbnailWidth
      write SetThumbnailWidth;
  end;

implementation

{ TMySpecialListView }

constructor TMySpecialListView.Create(AOwner: TComponent);
begin
  inherited;
  FEnhListView := TImageEnListView.Create(Self);
  FEnhListView.Parent := Self.Parent;
  // Set other properties needed like width and height. You
  // can get the ones you need from your current .dfm values
  // for a new blank form with your TImageEnListView dropped
  // on it.
end;

function TMySpecialListView.GetThumbnailHeight: Integer;
begin
  Result := FEnhListView.ThumbnailHeight;
end;

function TMySpecialListView.GetThumbnailWidth: Integer;
begin
  Result := FEnhListView.ThumbnailWidth;
end;

procedure TMySpecialListView.SetThumbnailHeight(Value: Integer);
begin
  if Value <> FEnhListView.ThumbnailHeight then
    FEnhListView.ThumbnailHeight := Value;
end;

procedure TMySpecialListView.SetThumbnailWidth(Value: Integer);
begin
  if Value <> FEnhListView.ThumbnailWidth then
    FEnhListView.ThumbnailWidth := Value;
end; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-08T12:15:54.957

在我看来，在 Object Inspector 中隐藏（删除）属性的最佳方法是使用：

`UnlistPublishedProperty(TImageEnListView , 'LargeImages')`

该`UnlistPublishedProperty`过程位于 DesignIntf​​.dcu 中，这意味着您的组件包应包含`designide`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T20:07:40.417

只是为了完整起见，除了[Ken 可能最适用的解决方案](https://stackoverflow.com/a/15961600/757830)之外，特此提供一个（可能有些牵强的）解决方案，用于在没有其他可能性时从子组件中*删除属性。*

[我在这里回答](https://stackoverflow.com/a/10194662/757830)的第三部分演示了如何通过注册组件 PropertyEditor 并覆盖`GetProperties`以过滤特定属性名称来过滤掉自定义组件的子组件的属性。

# java - Jersey：将数据保存在内存中

> ID：15961580
> 
> 赞同：0
> 
> 时间：2013-04-12T01:22:04.770
> 
> 标签：java, rest, jersey, jax-rs

我正在使用 Java 和 Jersey 构建一个简单的 REST Web 服务。我想在内存中存储一​​些可以在服务器在线期间访问的数据。例如：

`http://localhost:8080/register/<someusername>`

将添加到可以通过以下方式访问的 ArrayList/HashMap/etc

`http://localhost:8080/list`

这将列出注册用户。

我怎样才能做到这一点？

我知道这不是存储数据的好方法，但出于我的项目的目的，我希望它只在服务器在线时保存，并在它重新启动/停止时完全重置/任何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:35:50.913

如果您希望所有客户端的这些数据都相同，那么您可以使用

@Context ServletContext servletContext;

然后，将属性放在那里并在每次调用时从该属性中获取。

* * *

如果你有一些框架，比如 spring，那么你可以使用它的工具获取/设置值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:48:50.360

您还可以将 Jersey 类设为 a`@Singleton`并添加一个`ConcurrentHashMap`用于存储数据的字段。

# java - 基于文本的游戏 JTextArea 不显示 JTextField

> ID：15961581
> 
> 赞同：0
> 
> 时间：2013-04-12T01:22:11.680
> 
> 标签：java, swing, jtextfield, jtextarea

好的，所以我正在制作像 Zork 这样的基于文本的 Java 游戏。我正在使用一个简单的 GUI，它有一个 JTextField JTextArea ETC。我很难让用户在文本字段中输入例如“North”，并且让 JTextArea 甚至说北，更不用说执行命令了。这是我的代码。

```
import java.awt.Color;
import java.awt.Desktop.Action;
import java.util.Scanner;

import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JMenu;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class gameFrame {

    public static void main(String[] args) {
        //create variables for graphics
        String a = ("Adventure");
        JFrame frame = new JFrame(a);
        JPanel panel = new JPanel();
        JTextField input = new JTextField(25);
        JTextArea output = new JTextArea("Hello", 65, 30);
        JMenu exit = new JMenu("Exit");

        //add main parts together
        frame.add(panel);
        panel.add(input);
        panel.add(output);

        //frame
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
        frame.setResizable(false);
        frame.setSize(900, 600);

        //panel
        panel.setBackground(Color.WHITE);

        //input
        input.setForeground(Color.MAGENTA);
        String inputBox = input.getText();

        //output
        output.setEditable(false);
        output.setForeground(Color.MAGENTA);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:11:50.853

好的，所以您将 java 中的字符串与`do .... while ....`循环进行比较。你有没有尝试过这样的事情？

```
String inputBox = input.getText();
do {
  // Code to do whatever when inputBox equals "north"
  output.append("You went: North");
}
while(inputBox.equals/*IgnoreCase*/("north"); 
```

您还可以做的是`ActionListener`向 JTextField 添加一个。单击回车后，在 JTextArea 上显示 JTextField 的内容。

```
input.addActionListener(
  new ActionListener() {
    public void actionPerformed(ActionEvent event) {
      output.append(inputBox.getText());
    }
  }
); 
```

这是未编译的，未选中。

# arrays - 计算二维数组的页面错误数

> ID：15961582
> 
> 赞同：17
> 
> 时间：2013-04-12T01:22:23.670
> 
> 标签：arrays, operating-system, paging, page-fault

我正在努力学习考试。我找到了这个例子，但不明白他们是如何得到答案的。谁能解释一下吗？

问题：

> 考虑二维数组 A： int A[][] = new int[100][100]; 其中 A[0][0] 位于页面大小为 200 的分页内存系统中的位置 200。操作矩阵的小进程位于页面 0（位置 0 到 199）中。因此，每条指令都将从第 0 页获取。对于两个页框，使用 LRU 替换并假设第一个页框包含进程而另一个页框最初为空，以下数组初始化循环会生成多少页错误？

A：

```
for (int j=0;j<100;j++)
   for (int i=0; i<100; i++)
     A[i][j] = 0; 
```

乙：

```
for(int i=0; i<100; i++)
  for (int j=0; j<100; j++)
      A[i][j] = 0; 
```

给出的正确答案是：a：100 x 50 = 5000 b：50

我有点理解第一部分。共有50页。(10000/200=50) 并且每次 j 发生变化时，都会发生页面错误..所以总共有 100 个页面错误..但是为什么要乘以 50？为什么第二个是50？

谢谢！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T01:55:01.980

假设您的系统为您的进程分配了两个帧，这样`200 * sizeof(int)` 矩阵可以一次保存在内存中。矩阵的分配发生在[Row Major Order](http://en.wikipedia.org/wiki/Row-major_order#Row-major_order)中。

在第一个循环中**`A`**：

```
for (int j=0;j<100;j++)
   for (int i=0; i<100; i++)
     A[i][j] = 0; 
```

循环访问矩阵列的内存单元，如：

```
A[0][0], A[2][0], A[3][0], ...A[0][2], A[0][3], A[0][4], ......
  ^        ^        ^   
      row changes 
```

在每次迭代 中，**行更改**和分配以行为主，每行占用一页。因此代码`A`将导致每个替代`A[i][j]`访问的页面错误，因此页面错误的总数为 = 100 * 100 / 2) = 5000。

作为第二个代码**`B`**：

```
for(int i=0; i<100; i++)
  for (int j=0; j<100; j++)
      A[i][j] = 0; 
```

在每次迭代中逐行循环访问矩阵的内存单元，例如：

```
A[0][0], A[0][5], A[0][6],...,A[1][0], A[1][7], A[1][8],...,A[2][0], A[2][9],
     ^        ^        ^  
  column changes, row are same 
```

逐行访问（**仅在读取 100 次后读取行更改**时的列更改），一次加载一行，因此在行更改时发生页面错误（对于外部循环），并且对于每个替代行访问，都会发生页面错误，因此页面错误数 = 100/2 = 50。

我们可以用另一种方式来理解它，例如：
在主要行中，行索引更改的次数我们需要新页面来访问，因为页面数量很小，它在第一个循环中的每个替代索引更改时出现页面错误 A 循环行索引更改 100*100 次如 B 循环中的行索引更改 100 次，因此 A/B 中的缺页率 = 100*100/100 = 100，如果 A = 50,00 中发生缺页数，则 B 中缺页数 = 50， 00/100 = 50。

同样，您可以计算[Column-major 顺序](http://en.wikipedia.org/wiki/Row-major_order#Column-major_order)的页面错误数，因为矩阵具有相同的行数，并且 cols 结果将相同。

我的书中给出了类似的示例：
下载 pdf：[操作系统书籍 Galvin](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CC4QFjAA&url=http://it325blog.files.wordpress.com/2012/09/operating-system-concepts-7-th-edition.pdf&ei=8GlnUZSFNc3rrQe4qYDgDg&usg=AFQjCNHvytXcx-0_2TSlqbsj94nEd0JyKw&bvm=bv.45107431,bs.1,d.bmk)阅读第 9 章：虚拟内存部分：9.9.5 程序结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-29T05:04:37.213

这里的关键是查看从线性内存地址读取时所有数组访问的外观。还必须假设行优先 (C) 顺序才能使答案有意义。该问题还遗漏了单位，我们假设它们是字节（因此 A 必须以 1 字节类型保存）。

```
char *B = &(A[0][0]); (memory address 200) 
```

访问`A[i][j]`现在等同于`B[i*100 + j]`或`*(200 + i*100+j)`（行主要顺序）。两页可以放入内存。一个由程序获取（字节 0-199 - 也是 C 约定）。另一种是访问A，跨越100*100字节/（200字节/页）=50页。

由于 0-199 始终在内存中，因此另一页将寻址 n*200 到 (n+1)*200-1，其中 n 是某个整数——一次对应于 A 的 2 行。

最后，在页面错误时，最近最少使用 (LRU) 算法将刚刚从页面 0-199 读取一条指令，因此总是会丢弃保存 A 的旧部分的页面以读取 A 的新部分（当 n 更改时） ，每 2 行）。

因此，您可以通过读取 100x100 矩阵的行轻松查看发生了什么——每 2 行交换一个页面，并且在外部循环中重复 100 次（从左到右跨行）。这会导致 100x50 的页面错误。

在现实世界中，您可以使用[linux 命令](http://www.cyberciti.biz/faq/linux-command-to-see-major-minor-pagefaults/)或[getrusage](http://man7.org/linux/man-pages/man2/getrusage.2.html)跟踪页面错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T21:38:49.353

因此，二维数组中总共有 50 页，逐行或逐列存储。

如果您逐行存储页面并逐行访问它们，那么您将一遍又一遍地访问同一页面，直到到达下一页，因此您仅切换页面（导致页面错误）50次，因为有50页。

如果您逐行存储页面，并逐列（或虎钳）访问它们，您将从一个页面获取一个元素，切换页面，从另一页面获取一个元素，切换页面等。所以您仍然会经历50 页，但每页切换 100 次。

想象你正在阅读一篇论文。如果您一次阅读一页，那么您将每页翻一次。如果您从每一页中读取一行，然后重新开始并阅读第二行，第三行等。您将不得不一遍又一遍地翻阅整张纸，对于页面上的每一行（假设所有页面的编号相同）像数组一样的行数）...每次翻页都是页面错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-13T03:28:42.613

让我们看一个人为但内容丰富的例子。假设页面大小为 128 个字。考虑一个 C 程序，其功能是将 128×128 数组的每个元素初始化为 0。以下代码是典型的：

```
int i, j;
int[128][128] data;
for (j = 0; j < 128; j++)
  for (i = 0; i < 128; i++)
data[i][j] = 0;
```

请注意，该数组存储的主要是行；即数组存储data[0][0],data[0][1],···,data[0][127],data[1][0],data[1][1] ，···，数据[127][127]。对于 128 个单词的页面，每行占一页。因此，前面的代码将每一页中的一个字归零，然后每一页中的另一个字归零，以此类推。如果操作系统为整个程序分配的帧少于 128 个，那么它的执行将导致 128 × 128 = 16,384 个页面错误。

相反，假设我们将代码更改为

```
int i, j;
int[128][128] data;
for (i = 0; i < 128; i++)
for (j = 0; j < 128; j++)
data[i][j] = 0;
```

此代码在开始下一页之前将一页上的所有单词归零，从而将页面错误的数量减少到 128。

# c# - “无法将值 NULL 插入列”但我的列是 Nullable ... Entity Framework 5 asp.net MVC

> ID：15961585
> 
> 赞同：2
> 
> 时间：2013-04-12T01:23:20.040
> 
> 标签：c#, asp.net-mvc, entity-framework

我使用 asp.net MVC 互联网应用程序开始了一个项目...我对默认代码进行了一些更改...我创建了自己的用户上下文：

```
public class UsersDBContext : DbContext
{

    public DbSet<UserProfile> UserProfiles { get; set; } 
```

我对 AccountModel 做了一些更改：

```
[Table("UserProfile")]
public class UserProfile
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int UserId { get; set; }
    public string UserName { get; set; }
    public int? test { get; set; }

} 
```

我添加了此列测试。如您所见，此列可以为空.....但是在运行时，当我尝试注册用户时出现此错误：

无法将值 NULL 插入列“test”。列不允许空值。插入失败。

错误发生在这一行：

```
WebSecurity.CreateUserAndAccount(model.UserName, model.Password); 
```

有谁知道任何解决方案？

编辑：迁移代码：

```
 public override void Up()
    {
        AlterColumn("dbo.UserProfile", "test", c => c.Int());
    }

public override void Down()
    {
        AlterColumn("dbo.UserProfile", "test", c => c.Int(nullable: false));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:10:38.437

对数据库进行更改后，您是否更新了实体框架 edmx？我发现有时在进行更改后使用 edmx 设计器中的更新功能效果不佳。我会从 edmx 设计器中删除该表，然后重新添加它，然后重新构建您的解决方案。

# c#-4.0 - 重复结果

> ID：15961587
> 
> 赞同：0
> 
> 时间：2013-04-12T01:23:26.863
> 
> 标签：c#-4.0

```
string cmdStr = "Select iBranch_num,sConstant FROM rvk_BranchArea where sAreaCode='" + cbArea.Text.Trim() + "'";

SqlCommand cmd = new SqlCommand(cmdStr, sqlConn);
SqlDataReader dRarea = cmd.ExecuteReader();

while (dRarea.Read())

    {
      SqlConnection sqlConnProc = new SqlConnection(MyClass.GlobalConn());
      sqlConnProc.Open();

      SqlCommand cmdProc = new SqlCommand("dbo.rvk_GetSalesProductPAPC", sqlConnProc);
      cmdProc.CommandType = CommandType.StoredProcedure;

      cmdProc.Parameters.Add("@piDateFrom", SqlDbType.Int).Value = FromDT;
      cmdProc.Parameters.Add("@piDateThru", SqlDbType.Int).Value = ToDT;
      cmdProc.Parameters.Add("@BRANCH", SqlDbType.NVarChar).Value = dRarea[1].ToString();
      cmdProc.Parameters.Add("@brNum", SqlDbType.Int).Value = dRarea[0].ToString();
      cmdProc.Parameters.Add("@Area", SqlDbType.NVarChar).Value = cbArea.Text.Trim();
      cmdProc.ExecuteNonQuery();

      System.Data.DataTable dT = new System.Data.DataTable();
      SqlDataAdapter dA = new SqlDataAdapter(cmdProc);

      dA.Fill(dT);
      dgCatArea.DataSource = dT;

:
: 
```

当我在这里调用我的存储过程时得到了重复的结果，但是当我手动执行我的存储过程时它有一个正确的结果，也许我在这里循环执行的方式有问题，有人可以帮我解决这个问题。

# sql - SQL 查询，使用 MAX

> ID：15961590
> 
> 赞同：1
> 
> 时间：2013-04-12T01:23:37.677
> 
> 标签：sql, sqlite

我有一个包含列的表：人口、州和县

我想找到每个州人口最多的县。我也只想打印该县的名称和该县的最大人口。

我怎么能做这样的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:28:23.303

您应该能够使用子查询来获取每个州的最大人口，然后使用该结果来确定县：

```
select t1.county,
  t1.population
from yourtable t1
inner join
(
  select max(population) MaxPop, state
  from yourtable
  group by state
) t2
  on t1.population = t2.maxpop
  and t1.state = t2.state; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/de12b/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:29:51.840

您可以使用嵌套查询来执行此操作`EXISTS`：

```
SELECT m1.county, m1.population
FROM mytable m1
WHERE NOT EXISTS (
    SELECT 1 -- No other county in the state has more people
    FROM mytable m2
    WHERE m1.state=m2.state
      AND m2.population > m1.population
) 
```

如果单个州的多个县具有相同的`population`，则将返回*两个县。*

# ruby - MS SQL 红宝石宝石

> ID：15961594
> 
> 赞同：10
> 
> 时间：2013-04-12T01:24:14.027
> 
> 标签：ruby, sql-server, gem

我需要编写一个 ruby​​ 脚本来连接到 MS SQL Server 数据库，但是我发现的所有线程都指向将 ActiveRecord 绑定到 MS SQL 的 gem。是否有任何宝石可以让我这样做类似于 pg （对于 postgres [https://github.com/ged/ruby-pg](https://github.com/ged/ruby-pg)）？我只需要做一些非常简单的远程查询，非常感谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-12T03:31:58.070

最好的方法是使用 tiny_tds gem [https://github.com/rails-sqlserver/tiny_tds](https://github.com/rails-sqlserver/tiny_tds)

# java - 创建具有两种不同格式的文本框

> ID：15961596
> 
> 赞同：1
> 
> 时间：2013-04-12T01:24:17.820
> 
> 标签：java, apache-poi

我正在尝试创建一个具有两种不同类型格式的 org.apache.poi.hslf.model.TextBox。我希望一些文本是 14 号和粗体，其余的是 10 号而不是粗体。

我已经尝试过这样的事情：

```
TextRun run = textBox.createTextRun();
run.setText("small text"\n);

TextRun run = textBox.createTextRun();
RichTextRun format = run.getRichTextRuns()[0];
format.setBold(true);
format.setFontSize(14);
run.setText("big text"); 
```

但是，只显示“大文本”。

有谁知道如何做到这一点。我真的很想把它保存到一个 TextBox 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T22:43:26.150

您需要调用`TextRun.appendText()`而不是调用`TextRun.createTextRun()`两次，因为第二次调用将覆盖第一个实例。

```
import java.awt.geom.Rectangle2D;
import java.io.FileOutputStream;
import org.apache.poi.hslf.model.*;
import org.apache.poi.hslf.usermodel.*;

public class HslfTextBox {
    public static void main(String[] args) throws Exception {
        SlideShow ppt = new SlideShow();
        Slide s = ppt.createSlide();
        TextBox txt = new TextBox();
        txt.setAnchor(new Rectangle2D.Double(100,100,100,100));
        TextRun run = txt.createTextRun();
        RichTextRun rtr1 = run.getRichTextRuns()[0];
        rtr1.setText("small text\n");
        rtr1.setFontSize(10);
        RichTextRun rtr2 = run.appendText("big text\n");
        rtr2.setBold(true);
        rtr2.setFontSize(14);
        s.addShape(txt);

        FileOutputStream fos = new FileOutputStream("hssftext.ppt"); 
        ppt.write(fos);
        fos.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T16:04:14.997

问题是“setText()”覆盖了之前设置的文本，因此您只能看到最后设置的文本。为了在现有文本之后添加任何其他文本，请使用“appendText()”。

# c++ - 错误：map 中 operator= 的重载不明确 >::Elem::t3 = 0

> ID：15961598
> 
> 赞同：0
> 
> 时间：2013-04-12T01:24:23.700
> 
> 标签：c++, templates, null

我正在完成我的第二个模板类的工作（将我制作的旧地图类覆盖为模板），并且我正在花最长时间弄清楚如何为我的结构初始化空值。

我使用 2-3-4 树实现了一个映射，其中每个节点实际上是一个 4 节点，正确的值设置为 NULL（例如，一个 3 节点将有 2 个键/值对和三个孩子，第三对并且四个子指针设置为空。

我遇到的问题是我的模板引发错误（直接从我的终端复制）：

```
mymap.cpp:271:3: error: ambiguous overload for âoperator=â in âtemp->Map<int, std::basic_string<char> >::Elem::t3 = 0â 
```

我正在使用的导致此问题的代码是：

```
//k3 is a KEY value and t3 is a TYPE value
temp -> k3 = NULL;
temp -> t3 = NULL; 
```

现在，我知道*问题*是 NULL 关键字通常是为指针保留的，并且我相信解析为 \0 或 0，而 KEY 和 TYPE 可以是任何字面意思，可能不支持这样的值。

我的问题是在这种情况下设置空值的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:32:19.703

通常你想要的是默认构造函数获得的值。

```
#include <utility>
#include <iostream>
#include <string>

template <class A, class B>
void zero(std::pair<A, B>& p)
{
    p.first = A();
    p.second = B();
}

int
main()
{
    std::pair<int, std::string> p { 10, "foo" };

    std::cout << p.first << ' ' << p.second << '\n';
    zero(p);
    std::cout << p.first << ' ' << p.second << '\n';

    return 0;
} 
```

虽然，如果你想真正通用，默认构造函数的要求可能是一个问题。在这种情况下，您通常会给调用者一些方法来指定默认值。如：

```
template <class A, class B>
void zero(std::pair<A, B>& p, A a = A(), B b = B())
{
    p.first = a;
    p.second = b;
} 
```

# javascript - 用于 ajax 表单提交的返回类型是什么？

> ID：15961599
> 
> 赞同：0
> 
> 时间：2013-04-12T01:24:24.027
> 
> 标签：javascript, json, validation

我有一个“新帖子”表单，它在 UI 中是模态的。当用户提交它时，一个 ajax 调用将它发布到我的 Content 控制器中的 New Post 操作。我的问题是，控制器的响应类型应该是什么？

*   如果表单验证通过，我想给 UI 竖起大拇指，以便它可以关闭模​​式窗口并继续处理。我怀疑 JSON 在这里会是一个更好的选择，因为自省 HTML 并不那么干净。

*   如果表单未通过验证，我需要返回替换 HTML（这是重新呈现的表单，包括错误消息）。

我倾向于总是返回一个 JSON 对象。第一个属性将是一个布尔成功/失败指示器。如果插入失败，则会有第二个属性包含替换 HTML。

这听起来合理吗？有更好的选择吗？

我正在使用 jQuery 和 Zend Framework（并不是说它对答案有很大影响）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:19:11.580

对您的问题的简短回答：JSON。

而且您不必通过 ajax 响应返回 html，您可以通过 DOM 元素处理消息，例如：

```
$.ajax({
    type: "POST",
    url: "login.php",
    success: function(data) {
        if (data.field.status == 'failure') {
            if (data.field.username == 'fail') {
                $("div#usernameError").show();
            }
            if (data.field.password == 'fail') {
                $("div#passwordError").show();
            }
        } else {
            $("div#loginOverlay").dialog("close");
        }
    },
    dataType: "json"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T05:35:42.533

考虑以下两个 JSON 响应：

```
{
    "status": "error",
    "fields": ["username", "password"],
    "message": "Please enter valid username and password"
} 
```

```
{
    "status": "ok",
    "redirect": "http:/who.cares/form/complete"
} 
```

与其替换整个表单，我建议您做出回应，只回复重要的部分。

此外，每次你使用`innerHTML`，神杀了一只小猫 .. 并且你的 DOM 结构和引用也被破坏了。导致非常脆弱的 JS 代码。

# java - 有谁知道我在哪里可以找到 android 的 ICS 主页按钮的代码？

> ID：15961604
> 
> 赞同：0
> 
> 时间：2013-04-12T01:24:58.787
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, home-button

我希望能够修改该代码以使其成为双击而不是单击。原因是它太靠近我手机屏幕上的空格键。在按空格键或使用应用程序时，我总是不小心点击它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:37:36.237

它在[PhoneWindowManager](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3_r1/com/android/internal/policy/impl/PhoneWindowManager.java)中。这些行可能是您正在寻找的：

```
1821        // First we always handle the home key here, so applications
1822        // can never break it, although if keyguard is on, we do let
1823        // it handle it, because that gives us the correct 5 second
1824        // timeout.
1825        if (keyCode == KeyEvent.KEYCODE_HOME) {
1826
1827            // If we have released the home key, and didn't do anything else
1828            // while it was pressed, then it is time to go home!
1829            if (!down) {
1830                final boolean homeWasLongPressed = mHomeLongPressed;
1831                mHomePressed = false;
1832                mHomeLongPressed = false;
1833                if (!homeWasLongPressed) {
1834                    if (mLongPressOnHomeBehavior == LONG_PRESS_HOME_RECENT_SYSTEM_UI) {
1835                        try { 
```

# javascript - HighCharts：设置yAxis的值

> ID：15961610
> 
> 赞同：0
> 
> 时间：2013-04-12T01:25:47.283
> 
> 标签：javascript, highcharts, highstock

我在一张这样的图表中结合了牵引线和列 ![在此处输入图像描述](https://i.stack.imgur.com/v3lm7.png)

我想设置右 yAxis 显示 {0%, 20%, 40% 60%, 80%, 100%}，
左 yAxis 显示 {0, 10k, 20k, 30k, 40k, 50k}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:11:33.347

您可以使用**tickPositions** ( [http://jsfiddle.net/QzXbg/1/](http://jsfiddle.net/QzXbg/1/) ) 做到这一点：

```
 yAxis: [{ // Primary yAxis
                labels: {
                    style: {
                        color: '#89A54E'
                    }
                },
                title: {
                    text: 'Actual and forecast',
                    style: {
                        color: '#89A54E'
                    }
                },
                tickPositions: [0, 10000, 20000, 30000, 40000, 50000]
            }, { // Secondary yAxis
                title: {
                    text: 'MAPE',
                    style: {
                        color: '#4572A7'
                    }
                },
                tickPositions: [0, 20, 40, 60, 80, 100],
                labels: {
                    style: {
                        color: '#4572A7'
                    }
                },
                opposite: true
            }], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:01:19.367

您也可以只为每个轴使用 tickInterval 属性，而不必单独指定每个刻度。

IE：

```
yAxis:[{
   tickInterval:10000
},{
   tickInterval:20
}] 
```

假设您的右轴日期已经在您需要的 % 值中。如果没有，您将需要在格式化程序中计算轴标签的百分比。

# apache - 绝对链接和带有 /~username 的临时 URL

> ID：15961611
> 
> 赞同：1
> 
> 时间：2013-04-12T01:25:48.177
> 
> 标签：apache, mod-rewrite

我正在将一个大型站点移动到专用服务器。目前我必须像这样访问它 http://[dottedquad]/~username/index.php

这使我所有的绝对链接都中断了。

是否有一个 mod_rewrite 配方来说明如果找不到文件检查以 /~username 为前缀的相同路径？

还是一种无需更新文件即可设置基本href的全局方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:51:16.053

如果您需要检查文件是否存在...

```
#whatever your original rewrite rule is
RewriteRule ^(.+) regular/place/$1 [NC,QSA]

#if file does not exist
RewriteCond %{REQUEST_FILENAME} !-f

#use the other path
RewriteRule ^(.+) ~username/$1 [NC,QSA,L] 
```

如果 ReWriteCond 找到该文件，第二个重写规则将永远不会触发。如果是这样，第二个重写规则将触发。

我的正则表达式可能已关闭，但希望您能理解我在说什么。关键是“！-f”，它基本上应该检查文件。

# string - vhdl 字符串到字体 5x7

> ID：15961613
> 
> 赞同：0
> 
> 时间：2013-04-12T01:26:01.410
> 
> 标签：string, matrix, fonts, vhdl, led

我对 VHDL 很陌生，作为我的第一个项目，我创建了一个带有旋转文本的 20x7 LED 显示屏。现在所有`STD_LOGIC_VECTOR`打印在显示屏上的 s 都是手动设置的。

我想知道是否有可能`STD_LOGIC_VECTOR`从字符串（或字符？）中获取行的表示。我找到了[可用的字体](http://www.hwsw.no/snippets/5x7_LCD_font.php)，但我不知道从哪里开始......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T06:06:01.640

要表示您的字体表，您可以使用数组和常量。见下面的例子：

```
 type font_array is array(0 to 127, 0 to 5) of std_logic_vector(7 downto 0);
    constant font: font_array :=(
       (X"01",X"02",X"03",X"04",X"05",X"06"), -- row 0
       (X"11",X"12",X"13",X"14",X"15",X"16"), -- row 1
       ...
       (X"11",X"12",X"13",X"14",X"15",X"16") -- last row 
    ); 
```

要获得一行你的角色，你可以使用一个函数。见例子：

```
 function get_font_row(char_pos, row: integer) return std_logic_vector is
        variable result: std_logic_vector(5 downto 0);
    begin
        for i in 0 to 5 loop
            result(i):=font(char_pos, i)(row);
        end loop;

        return result;
    end get_font_row; 
```

这个字符行可以组合成一个 LED 行：

```
 led_row<=get_font_row(ch_h,n) & get_font_row(ch_a,n) & get_font_row(ch_l,n) & ...; 
```

其中“n”是您的 LED 行号，“ch_h”、“ch_a”和“ch_l”是字体在 font_array 中的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T06:17:56.917

要实现您在后面的评论中要求的功能，您首先需要一个翻译函数 char2int 来寻址您的数组。例子：

```
 function char2int (chr: character) return integer is
        variable i: integer;
    begin
        case chr is
        when 'H' => i:=0;
        when 'A' => i:=1;
        when 'L' => i:=2;
        when 'O' => i:=3;
        when others => i:=4;
        end case;

        return i;
    end char2int; 
```

那么主要功能就像您在 C 示例中所建议的那样：

```
 function string_to_bitfile(constant txt_str: string) return text_type is
        variable txt: text_type;
    begin
        for i in 0 to (txt_str'length-1) loop
            for j in 0 to 5 loop
                txt(6*i+j):=font(char2int(txt_str(i)),j);
            end loop;
        end loop;

        return txt;
    end string_to_bitfile; 
```

# php - 在 PHP 中，当电子邮件是唯一字段时，对新用户和返回用户的 MySQL 输入感到困惑

> ID：15961619
> 
> 赞同：0
> 
> 时间：2013-04-12T01:27:24.170
> 
> 标签：php, mysql

我是 PHP 和 MySQL 新手，当其中一个数据库字段为 UNIQUE 时，mysql_insert_id() 的行为对我来说已成为一堵墙。大大简化了，我有 2 张桌子。

**属性表**

PropertyID PK, AI

//许多属性描述符

UserID FK 到用户表

**用户表**

用户ID PK，人工智能

独特的电子邮件

密码

验证后，我将用户的电子邮件插入到 users 表中，并查看电子邮件是否已经存在，因此是返回用户。如果不存在，则将其插入并且是新用户。

```
$sql = "INSERT IGNORE INTO user ( email ) VALUES ( '$email' )";
//INSERT to a UNIQUE email causes an error & abort. With IGNORE, no INSERT happens (affected_rows=0)
$UserID = mysql_insert_id(); // is 0 if email exists in its UNIQUE field
if ( mysql_affected_rows() == 0 ) {//0 is existing user, else is new user} 
```

这可以很好地将新用户和回访用户分开，他们稍后会收到不同的消息。并且它设置了2个逻辑通道-一个用于输入新密码，第二个用于检查输入的密码是否匹配。

但是，用户的第二个条目（或第三个及以后）的 UserID 始终为 0，零，因为电子邮件字段是唯一的。因此，我无法在属性表中针对 UserID 进行有用的查询，因为所有返回的用户行都有 UserID=0

尽管进行了很多搜索，但我还没有找到或想出解决方案。如何将真正的 UserID（而不是 0 返回）放入新用户和返回用户的属性表中？

尝试具体回答。我在这方面没有很好地遵循一般指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:38:19.887

像这样：

```
$sql = "INSERT IGNORE INTO user ( email ) VALUES ( '$email' )";
mysql_query($sql);
//INSERT to a UNIQUE email causes an error & abort. With IGNORE, no INSERT happens   (affected_rows=0)
$UserID = mysql_insert_id(); // is 0 if email exists in its UNIQUE field

if($UserID==0) //no insert
{
  $email = mysql_real_scape_string($email);
  $sql = "select * from user where email = '$email'"; //check for user on table user
  $result = mysql_query($sql);
  $row = mysql_fetch_assoc($result);
  $UserID = $row['UserID']; //return the user id that matches de email
} 
```

PS：**使用 mysql 或 PDO** ...mysql 扩展程序正在被弃用...尝试 mysqli 扩展程序...mysqli 的程序方式与您在 PHP 上使用 mysql 扩展程序的方式非常相似。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:44:44.117

取自这个问题/答案 -[在使用 ON DUPLICATE KEY UPDATE 和 PHP 时获取 mysql_insert_id()](https://stackoverflow.com/questions/2634152/getting-mysql-insert-id-while-using-on-duplicate-key-update-with-php)

尝试从 更改`INSERT IGNORE`为`INSERT .. ON DUPLICATE KEY UPDATE`

```
$sql = "INSERT INTO user ( email ) VALUES ( '$email' ) ON DUPLICATE KEY UPDATE id=LAST_INSERT_ID(id) "; 
```

然后使用`id=LAST_INSERT_ID(id)`将获得`id`返回用户的`mysql_insert_id()`.

mysql 文档 - [`LAST_INSERT_ID(expr)`](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id) ,[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)

# label - 如何在 Zend Framework 2 中翻译表单标签？

> ID：15961628
> 
> 赞同：8
> 
> 时间：2013-04-12T01:28:05.880
> 
> 标签：label, zend-framework2, translation, translate, zend-form2

我不[明白](http://framework.zend.com/manual/2.1/en/modules/zend.form.view.helpers.html#formlabel)！.. 请有人解释一下，如何翻译表单标签？一个简单的例子会很棒。

先感谢您！

* * *

**类 Search\Form\CourseSearchForm**

```
...

class CourseSearchForm extends Form {

    ...

    public function __construct(array $cities) {
        parent::__construct('courseSearch');
        ...
        $this->add(array(
            'name' => 'city',
            'type'  => 'Zend\Form\Element\Select',
            'options' => array(
                'label' => 'Stadt',
                'value_options' => $this->cities,
                'id'  => 'searchFormCity',
            ),
        ));
        ...
    }
} 
```

**查看脚本 /module/Search/view/sea​​rch/search/search-form.phtml**

```
<?php echo $this->form()->openTag($form); ?>
<dl>
    ...
    <dt><label><?php echo $form->get('city')->getLabel(); ?></label></dt>
    <dd><?php echo $this->formRow($form->get('city'), null, false, false); ?></dd>
    ...
</dl>
<?php echo $this->form()->closeTag(); ?>
<!-- The formRow(...) is my MyNamespace\Form\View\Helper (extends Zend\Form\View\Helper\FormRow); the fourth argument of it disables the label. --> 
```

* * *

配置**`module/Application/config/module.config.php`**为：

```
return array(
    'router' => ...
    'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),
    'translator' => array(
        'locale' => 'de_DE',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ),
    'controllers' => ...
    'view_manager' => ...
); 
```

我还编辑了我的视图并使用了`FormLabel`视图助手：

```
<dt><label><?php echo $this->formLabel($form->get('city')); ?></label></dt> 
```

此外，我`FormLabel`在使用翻译器的地方（第[116-120](https://github.com/zendframework/zf2/blob/master/library/Zend/Form/View/Helper/FormLabel.php#L116)行）调试了 - 似乎没问题。

但它仍然无法正常工作。

* * *

编辑

`de_DE.po`我手动添加到文件中的标签（测试）项目被翻译。ZF2 方面的问题实际上是我使用`$form->get('city')->getLabel()`而不是`$this->formlabel($form->get('city'))`在视图脚本中使用。

现在的问题是，标签没有添加到`de_DE.po`文件中。但这不再是 ZF2 问题，所以我接受了 Ruben 的回答并打开了一个新的 Poedit 问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T02:37:21.597

而不是使用：

```
<?php echo $form->get('city')->getLabel(); ?> 
```

您应该使用 formlabel 视图助手。如果您已将其插入 ServiceManager，则此助手会在渲染期间自动使用您的翻译器。您很可能会在应用程序的模块 module.config.php 中使用它：

```
'service_manager' => array(
        'factories' => array(
            'translator' => 'Zend\I18n\Translator\TranslatorServiceFactory',
        ),
    ),

    'translator' => array(
        'locale' => 'en_US',
        'translation_file_patterns' => array(
            array(
                'type'     => 'gettext',
                'base_dir' => __DIR__ . '/../language',
                'pattern'  => '%s.mo',
            ),
        ),
    ), 
```

一旦你使用了 formlabel 视图助手：

```
echo $this->formLabel($form->get('city')); 
```

当然，请确保您的翻译在您的 .po 文件中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-27T13:02:07.557

我认为您的问题是 poedit （或类似工具）未检测到您的标签，因此您必须手动将它们添加到您的 poedit 目录（.po）

要让 poedit 等工具检测到您的标签字符串，您的字符串需要在**translate()**函数或**_()**中使用（可以在 Catalog/properties/sources 关键字中添加其他函数）

由于**_()**函数不是 ZF2 中的用户（今天），所以一个小技巧是在你的 index.php 中添加一个这样的函数（不需要修改任何东西，这样，在 poedit 参数中）：

```
// in index.php
function _($str) 
{ 
    return $str; 
} 
```

在你的代码中，当你的字符串在翻译函数之外时使用它

```
//...
    $this->add(array(
        'name' => 'city',
        'type'  => 'Zend\Form\Element\Select',
        'options' => array(
            'label' => _('myLabel') ,    // <------ will be detected by poedit
            'value_options' => $this->cities,
            'id'  => 'searchFormCity',
        ),
    ));
//... 
```

或者喜欢这样

```
$myLabel = _('any label string');  // <--- added to poedit catalog
//...
        'options' => array(
            'label' => $myLabel ,
            'value_options' => $this->cities,
            'id'  => 'searchFormCity',
        ), 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T07:05:34.833

@Ruben 说得对！

我使用[PoEdit](http://poedit.net/)来生成我的***.mo**文件并确保在文件中获得所有翻译，我在某处（例如在视图中）创建了一个名为**_lan.phtml**的文件，其中包含所有要翻译的文本：

```
<?php echo $this->translate("My label"); 
... ?> 
```

当然，必须配置**Poedit**才能找到我的关键字。检查这个[如何配置它](http://blog.hackix.com/2010/01/configuring-poedit-for-zend-framework-projects/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T10:48:45.707

所有解决方案都没有使用 ZF2 的力量。您必须正确配置您的 poedit：

所有的东西都在这里： [http ://circlical.com/blog/2013/11/5/localizing-your-twig-using-zend-framework-2-applications](http://circlical.com/blog/2013/11/5/localizing-your-twig-using-zend-framework-2-applications)

# java - Java.io.IOException，“错误文件号”USB 连接

> ID：15961629
> 
> 赞同：11
> 
> 时间：2013-04-12T01:28:10.443
> 
> 标签：java, android, usb

我正在我的 Android 手机和另一台设备之间建立 USB 附件连接。现在只是来回发送字节进行测试。一开始我会进行一些明确的交流，但它总是`Java.io.IOException: write failed: EBADF (Bad file number)"`在一秒钟左右后结束。有时阅读还活着，但写作却死了；其他人都死了。

我没有做任何超级花哨的事情，就像谷歌文档一样阅读和写作：

初始连接（在广播接收器内，我知道这部分至少在最初是有效的）：

```
if (action.equals(ACTION_USB_PERMISSION))
{
    ParcelFileDescriptor pfd = manager.openAccessory(accessory);
    if (pfd != null) {
        FileDescriptor fd = pfd.getFileDescriptor();
        mIn = new FileInputStream(fd);
        mOut = new FileOutputStream(fd);
    }
} 
```

阅读：

```
Thread thread = new Thread(new Runnable() {
    @Override
    public void run() {
        byte[] buf = new byte[BUF_SIZE];
        while (true)
        {
            try {
                int recvd = mIn.read(buf);
                if (recvd > 0) {
                    byte[] b = new byte[recvd];
                    System.arraycopy(buf, 0, b, 0, recvd);
                    //Parse message
                }
            }
            catch (IOException e) {
                Log.e("read error", "failed to read from stream");
                e.printStackTrace();
            }
        }
    }
});
thread.start(); 
```

写作：

```
synchronized(mWriteLock) {
    if (mOut !=null && byteArray.length>0) {
        try {
            //mOut.flush();
            mOut.write(byteArray, 0, byteArray.length);
        }
        catch (IOException e) {
            Log.e("error", "error writing");
            e.printStackTrace();
            return false;
        }
    }
    else {
        Log.e(TAG, "Can't send data, serial stream is null");
        return false;
    }
} 
```

错误堆栈跟踪：

```
java.io.IOException: write failed: EBADF (Bad file number)
W/System.err(14028):     at libcore.io.IoBridge.write(IoBridge.java:452)
W/System.err(14028):     at java.io.FileOutputStream.write(FileOutputStream.java:187)
W/System.err(14028):     at com.my.android.transport.MyUSBService$5.send(MyUSBService.java:468)
W/System.err(14028):     at com.my.android.transport.MyUSBService$3.onReceive(MyUSBService.java:164)
W/System.err(14028):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:781)
W/System.err(14028):     at android.os.Handler.handleCallback(Handler.java:608)
W/System.err(14028):     at android.os.Handler.dispatchMessage(Handler.java:92)
W/System.err(14028):     at android.os.Looper.loop(Looper.java:156)
W/System.err(14028):     at android.app.ActivityThread.main(ActivityThread.java:5045)
W/System.err(14028):     at java.lang.reflect.Method.invokeNative(Native Method)
W/System.err(14028):     at java.lang.reflect.Method.invoke(Method.java:511)
W/System.err(14028):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
W/System.err(14028):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
W/System.err(14028):     at dalvik.system.NativeStart.main(Native Method)
W/System.err(14028): Caused by: libcore.io.ErrnoException: write failed: EBADF (Bad file number)
W/System.err(14028):     at libcore.io.Posix.writeBytes(Native Method)
W/System.err(14028):     at libcore.io.Posix.write(Posix.java:178)
W/System.err(14028):     at libcore.io.BlockGuardOs.write(BlockGuardOs.java:191)
W/System.err(14028):     at libcore.io.IoBridge.write(IoBridge.java:447)
W/System.err(14028):     ... 13 more 
```

我到处都有日志记录，因此我知道这并不是什么太明显的事情，例如收到另一个权限请求（因此文件流在读取过程中被重新初始化）。流也没有关闭，因为我的代码中从来没有发生过这种情况（现在）。我也没有收到任何分离或附加的事件（如果发生，我会记录下来）。似乎没有什么不寻常的。它只是死了。

我想这可能是一个并发问题，所以我玩了锁和睡眠，我尝试过没有任何效果。我也不认为这是一个吞吐量问题，因为当我每次读取（在两端）都睡觉时它仍然会发生，并且一次读取一个数据包（超慢比特率）。缓冲区是否有可能以某种方式在另一端被溢出？我将如何解决这个问题？我确实可以访问另一端的代码，它也是一个 Android 设备，使用主机模式。万一这很重要，我也可以发布该代码 - 标准批量传输。

手机是否只是对 Android 配件模式的支持乏善可陈？我试过两部手机，它们都失败了，所以我怀疑是这样。

我想知道在 Android 上从 USB 写入或读取时通常会导致此错误的原因是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-09-22T03:29:08.383

我在我的代码中遇到了同样的问题，我发现它发生是因为 FileDescriptor 对象被 GCed。

我通过在活动（或服务）中添加 ParcelFileDescriptor 字段来解决此问题。

我检查了您的第一个代码片段和您基于的代码，后者在 Thread 中有 ParcelFileDescriptor 字段。

我认为如果你像下面这样编辑你的代码，它工作得很好。

```
ParcelFileDescriptor mPfd;
...

if (action.equals(ACTION_USB_PERMISSION))
{
    mPfd = manager.openAccessory(accessory);
    if (mPfd != null) {
        FileDescriptor fd = mPfd.getFileDescriptor();
        mIn = new FileInputStream(fd);
        mOut = new FileOutputStream(fd);
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-16T22:51:14.337

它最终成为一个线程问题。我需要更恰当地隔离写作，而不仅仅是阅读。

我最终使用[此代码](https://code.google.com/p/mover-bot/source/browse/trunk/Android-1.0/src/com/agentx3r/lib/USBControl.java)作为基础。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T12:32:03.787

好的，我注意到的一些事情似乎与我为打开附件模式所做的不同，我主要遵循 USB 附件的文档，所以它应该非常相似，据我所知，你`mIn.read(buf);`应该是。`mIn.read(buf, 0, 64);`

此外，您应该在类声明中声明`thread myThread;`。然后在你`BroadcastReceiver`内创建新的之后`FileInput/OutputStream`，都`myThread = new thread(myHandler, myInputStream);`跟着我的`myThread.start();`。

现在我注意到您正在从您的线程直接与 UI 进行通信。您应该使用一个处理程序，而不是线程将与之通信，然后再与您的 UI 通信，至少从我读过的内容来看。

这是我的处理程序和线程的示例：

```
final Handler mHandler = new Handler() {
    @Override
    public void handleMessage(Message msg){

    }
};

private class USB_Thread extends Thread {
    Handler thisHandler;
    FileInputStream thisInputStream;

    USB_Thread(Handler handler, FileInputStream instream){
        thisHandler = handler;
        thisInputStream = instream;
    }
    @Override
    public void run(){
        while(true) {
            try{
                if((thisInputStream != null) && (dataReceived == false)) {
                    Message msg = thisHandler.obtainMessage();
                    int bytesRead = thisInputStream.read(USB_Data_In, 0, 63);
                    if (bytesRead > 0){
                        dataReceived = true;
                        thisHandler.sendMessage(msg);
                    }
                }
            }
            catch(IOException e){

            }
        }
    }
} 
```

[此外，这里](http://www.ftdichip.com/Support/SoftwareExamples/Android_Projects.htm)还有一些演示打开附件应用程序。它们可能有助于您了解配件模式。

还有一些已知问题是应用程序没有以`ACTION_USB_ACCESSORY/DEVICE_ATTACHED`编程方式接收广播接收器。它只会通过清单文件接收它。您可以在[此处](http://code.google.com/p/android/issues/detail?id=25701)和[此处](http://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=25703)找到更多相关信息。

我实际上没有测试将`dataReceived`变量放入处理程序中，只是最近才更改了我的代码的那部分。我对其进行了测试，但它不起作用，所以试图记住我读过的内容，我认为这不是关于线程内的变量通信，而是试图使用类似`.setText()`. 我已经更新了我的代码以包含`dataReceived=true`在线程中。然后处理程序将用于更新 UI 上的项目，例如`TextView`s 等。

线

```
FileDescriptor fd = mFileDescriptor.getFileDescriptor();
mInputStream = new FileInputStream(fd);
mOutputStream = new FileOutputStream(fd);
usbThread = new USB_Thread(mHandler, mInputStream);
usbThread.start(); 
```

# c++ - ifstream没有打开文件

> ID：15961630
> 
> 赞同：4
> 
> 时间：2013-04-12T01:28:18.740
> 
> 标签：c++, ifstream

在这个函数中，我试图打开一个包含一组我想分配给我的矩阵数组的字符的文件，但是每当我运行这个程序时，控制台都会显示一个错误，指出文件未打开。另一个问题，如果我将该文件添加到我的资源文件夹中，我如何指定访问该文件而不是我在硬盘驱动器根目录中的文件？

```
ifstream readSecondMap("C:\\map_2.txt", ifstream::in);

void Stage::populateStage(ifstream &myStage, char (&myArray)[mapXcor][mapYcor]) {
    if(myStage.is_open()){
        for(int a = 0; a < mapXcor+1; ++a){
            for(int b = 0; b < mapYcor+1; ++b){
                myArray[a][b] = (char) myStage.get();
            }
        }
        myStage.close();        
    } else {
        std::cout << "Error: Unable to open File" <<std::endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:51:54.270

该问题很可能是以下问题之一：

1) map_2.txt 不存在于您在 ifstream 声明中指定的位置。

2）您没有足够的权限访问C盘的根文件夹。

我建议将文件移动到您的代码临时存储的同一文件夹中，并首先尝试使其与该位置一起工作，以验证问题是否与文件位置或访问权限有关，而不是您在代码中执行的操作。然后将其移动到您的资源文件夹，并使用相对路径名访问它（如果它有效）。如果当文件与代码位于同一文件夹中并且路径名正确写入时它不起作用，那么您可能在代码中做错了，需要发布大部分代码以公开发给我们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:51:02.390

正如@TianyunLing 所说：

我在 KUbuntu 12.10 上测试过：

1.  打开错误：如果`map_2.txt`不存在，则会发生错误。
2.  文件路径：

    > 文件夹 1 + -------
    > 文件 1 +------- 文件
    > 2文件
    > 夹
    > 2 +------- 程序
    > +-------文件 3

供您`program`访问文件1，使用`"../folder1/file1"`，访问`"file3"`，使用`file3`。（假设你不改变你的`program`工作目录）

还有一件事，您不需要指定`ifstream::in`for `ifstream`。

# ios - 奇怪的 atoi(char *) 问题

> ID：15961632
> 
> 赞同：3
> 
> 时间：2013-04-12T01:28:23.597
> 
> 标签：ios, c, atoi

我遇到了一个非常奇怪的问题`atoi(char *)`。我正在尝试将 a 转换`char`为它的数字表示（我知道它是一个数字），它在 98.04% 的时间里工作得很好，但在另外 1.96% 的时间里它会给我一个随机值。

这是我用来测试它的代码：

```
int increment = 0, repetitions = 10000000;
for(int i = 0; i < repetitions; i++)
{
    char randomNumber = (char)rand()%10 + 48;
    int firstAtoi = atoi(&randomNumber);
    int secondAtoi = atoi(&randomNumber);
    if(firstAtoi != secondAtoi)NSLog(@"First: %d - Second: %d", firstAtoi, secondAtoi);
    if(firstAtoi > 9 || firstAtoi < 0)
    {
        increment++;
        NSLog(@"First Atoi: %d", firstAtoi);
    }
}
NSLog(@"Ratio Percentage: %.2f", 100.0f * (float)increment/(float)repetitions); 
```

我`GNU99`在 XCode 4.6.1 中使用 C 语言方言。第一个 if （当第一个数字不等于第二个时）从不记录，所以两个 atoi 每次都返回相同的结果，但是每次结果都不同。“不正确的结果”似乎范围从 -1000 到 10000。我没有看到任何高于 9999 或低于 -999 的值。

请让我知道我做错了什么。

* * *

编辑：

我现在将角色设计更改为：

```
char numberChar = (char)rand()%10 + 48;
char randomNumber[2];
randomNumber[0] = numberChar;
randomNumber[1] = 0; 
```

但是，我正在使用：

```
MAX(MIN((int)(myCharacter - '0'), 9), 0) 
```

获取整数值。

我真的很感激所有的答案！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T01:31:20.173

`atoi`需要一个字符串。你没有给它一个字符串，你给了它一个`char`. 字符串被定义为以空字符*结尾的一些字符。*您正在调用 UB。

从文档：

> **如果 str 不指向有效的 C-string**，或者转换后的值超出 int 可表示的值范围，则会导致未定义的行为。

想要将一个字符“转换”为它的整数表示？不要把事情复杂化；

```
int x = some_char; 
```

A`char`已经是一个整数，而不是一个字符串。不要将单个`char`视为文本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:31:54.247

如果我没记错的话，`atoi`需要一个以 null 结尾的字符串（请参阅[此处的文档](http://en.cppreference.com/w/cpp/string/byte/atoi)）。

您正在传递一个基于堆栈的值，该值不必以空值结尾。我非常惊讶它甚至做对了：如果它永远找不到空终止符，它可能会永远读取数百个垃圾数字。如果您只想获取单个字符的数量（例如，字符的人类可读表示的数值），您为什么不这样做`int numeric = randomNumber - 48`呢？

# javascript - 使用 about:config 覆盖 Firefox 不安全警告

> ID：15961636
> 
> 赞同：3
> 
> 时间：2013-04-12T01:28:33.723
> 
> 标签：javascript, firefox, firefox-addon, html5-canvas, firefox-addon-sdk

我正在尝试编写一个简单的批处理脚本来截取一些内部网页的屏幕截图，并发现 Firefox 具有将窗口呈现到画布的能力：

```
var canvas = document.createElement('canvas');
var ctx = canvas.getContext("2d");
ctx.drawWindow(window, 0,0, 100, 200, "rgb(255,255,255)");
console.log(canvas.toDataURL("image/png")); 
```

但是，这似乎只保留表单扩展并引发错误：操作不安全。

我不需要将其发布给其他任何人，我很高兴仅对我的 Firefox 进行一些内部调整以避免创建扩展。是否有某种 about:config 设置（或其他）我可以调整以让它通过，即使它不在扩展中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T19:56:45.390

转到`about:config`并设置`devtools.chrome.enabled`为`true`
重新启动
转到要截屏的选项卡
按`Shift`+`F4`
切换环境到浏览器
粘贴以下代码段

```
var canvas = gBrowser.contentDocument.createElement('canvas');
var ctx = canvas.getContext("2d");
ctx.drawWindow(window, 0,0, 100, 200, "rgb(255,255,255)");
canvas.toDataURL("image/png"); 
```

将光标放在最后一行的末尾
按`Control`+`L`
任务完成！

# php - PHP加密/解密添加填充字符

> ID：15961638
> 
> 赞同：0
> 
> 时间：2013-04-12T01:29:03.147
> 
> 标签：php, encryption, character-encoding, blowfish, password-encryption

我正在尝试创建一个简单的 Encryption 类，但结果字符串正在用非 ascii 字符填充。我已经尝试了 rtrim()，转换为 utf8 等，如其他一些答案中所述。我到底错过了什么？这是将结果粘贴到 Notepad++ 时显示的字符

![在此处输入图像描述](https://i.stack.imgur.com/QMdU5.png)

Pastebin 包含[这里](http://pastebin.com/hXPtuZin)的字符。在 html 中显示为“t”，但将其复制到记事本中会显示其后的随机数据位。

```
class Crypter implements ICrypter {

private $Key;
private $Algo;

public function __construct($Algo = MCRYPT_BLOWFISH) {

    $this->Key = substr('key', 0, mcrypt_get_key_size($Algo, MCRYPT_MODE_ECB));
    $this->Algo = $Algo;

}

public function Encrypt($data) {

    //$iv_size = mcrypt_get_iv_size($this->Algo, MCRYPT_MODE_ECB);
    //$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

    $blocksize = mcrypt_get_block_size('blowfish', 'ecb'); // get block size
    $pkcs = $blocksize - (strlen($data) % $blocksize); // get pkcs5 pad length
    $data.= str_repeat(chr($pkcs), $pkcs); // append pkcs5 padding to the data

    $crypt = mcrypt_encrypt($this->Algo, $this->Key, $data, MCRYPT_MODE_ECB);
    return rtrim(base64_encode($crypt));

}

public function Decrypt($data) {

    $crypt = base64_decode($data);
    $iv_size = mcrypt_get_iv_size($this->Algo, MCRYPT_MODE_ECB);
    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
    $decrypt = mcrypt_decrypt($this->Algo, $this->Key, $crypt, MCRYPT_MODE_ECB, $iv);
    return rtrim($decrypt);
}
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T03:14:27.940

您需要在解密中处理与加密相同的填充。这是您的代码的一个工作示例：

```
<?php
class Crypter{

    private $Key;
    private $Algo;

    public function __construct($Algo = MCRYPT_BLOWFISH) {

        $this->Key = substr('key', 0, mcrypt_get_key_size($Algo, MCRYPT_MODE_ECB));
        $this->Algo = $Algo;

    }

    public function Encrypt($data) {

        //$iv_size = mcrypt_get_iv_size($this->Algo, MCRYPT_MODE_ECB);
        //$iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);

        $blocksize = mcrypt_get_block_size('blowfish', 'ecb'); // get block size
        $pkcs = $blocksize - (strlen($data) % $blocksize); // get pkcs5 pad length
        $data.= str_repeat(chr($pkcs), $pkcs); // append pkcs5 padding to the data

        $crypt = mcrypt_encrypt($this->Algo, $this->Key, $data, MCRYPT_MODE_ECB);

        return rtrim(base64_encode($crypt));

    }

    public function Decrypt($data) {

        $crypt = base64_decode($data);
        $iv_size = mcrypt_get_iv_size($this->Algo, MCRYPT_MODE_ECB);
        $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);
        $decrypt = mcrypt_decrypt($this->Algo, $this->Key, $crypt, MCRYPT_MODE_ECB, $iv);

        $block = mcrypt_get_block_size('blowfish', 'ecb');
        $pad = ord($decrypt[($len = strlen($decrypt)) - 1]);
        return substr($decrypt, 0, strlen($decrypt) - $pad);
    }
}

$crypter = new Crypter();
$data = "Some data to encrypt";
$encryptedData = $crypter->Encrypt($data);
$decryptedData = $crypter->Decrypt($encryptedData);
echo "Decrypted Data = [$decryptedData]\n"; 
```

请注意我用三行替换了您原来的`Decrypt()`返回行。

# cgal - CGAL::assign 函数

> ID：15961642
> 
> 赞同：0
> 
> 时间：2013-04-12T01:29:53.930
> 
> 标签：cgal

每个人。我是 CGAL 图书馆的新手。在这里，我正在阅读 CGAL 演示。该代码经常使用 CGAL::assign 函数，但我找不到对它的任何引用。任何人都可以指出我在哪里可以看到它是如何实现的？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T12:10:15.903

CGAL::assign 函数

该文档可在此处 [获得 http://doc.cgal.org/4.2/CGAL.CGAL.STL-Extensions-for-CGAL/html/classCGAL_1_1Object.html](http://doc.cgal.org/4.2/CGAL.CGAL.STL-Extensions-for-CGAL/html/classCGAL_1_1Object.html)

# php - MYSQLi 使用表单输入值选择查询

> ID：15961643
> 
> 赞同：0
> 
> 时间：2013-04-12T01:29:58.970
> 
> 标签：php, mysqli

我正在尝试创建一个搜索页面，该页面将允许用户在表单的“名称”和“位置”字段中键入值，然后将在 MYSQLi 查询中使用这些值。

但是这些值没有被解析到查询中。

正在从表单中`$_POST`正确获取值，如果 say ，查询将起作用`WHERE Name = 'name1'`，所以问题似乎是 bind_param 没有正确解析值。

为什么它不起作用？

```
 $name = $_POST['name'];
    $location = $_POST['location'];

    if ($result = $mysqli->prepare("SELECT * FROM table WHERE Name = ?")) {
        $result->bind_param("s", $name);
        $result->execute;
            if ($result->num_rows > 0) {                      
                echo "<table>";
                echo "<tr>";
                echo "<th>Name    </td>";
                echo "<th>Location</td>";
                echo "</tr>";
                while ($row = $result->fetch_object()) {
                    echo "<tr>";
                    echo "<td>" . $row->Name . "</td>";
                    echo "<td>" . $row->Location . "</td>";
                    echo "</tr>";
                }
            echo "</table>";
            }  
    }
    $mysqli->close(); 
```

# ruby - 使用 MKStorekit 和 Rubymotion

> ID：15961645
> 
> 赞同：2
> 
> 时间：2013-04-12T01:30:37.857
> 
> 标签：ruby, rubymotion, cocoapods, mkstorekit

MKStoreKitConfiguration 文件需要放在哪里才能被 Rubymotion/MKStorekit Cocoapod 识别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-14T22:28:24.110

它必须放在资源文件夹中。

# .net - Directory.GetFiles() 搜索模式

> ID：15961648
> 
> 赞同：5
> 
> 时间：2013-04-12T01:30:57.720
> 
> 标签：.net, regex

我有这个基本代码

```
Directory.GetFiles(filepath, "*.OUT") 
```

在文件路径中有一个名为`Filename.OUT`

上面的代码发现该文件很好。

现在，我通过附加一个 UniqueID 来重命名文件，这样文件就不会被再次拾取。

`Filename.OUT6F9619FF-8B86-D011-B42D-00C04FC964FF`

但是，该文件仍然被`Directory.GetFiles()`！

那么，搜索模式 ( `*.OUT`) 是正则表达式模式吗？如果是这样，这是有道理的。

[MSDN](http://msdn.microsoft.com/en-us/library/wz42302f.aspx)上的信息似乎并不暗示它是。如果没有，是否有我可以使用的模式使其不会被拾取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:38:36.287

在使用文件系统监视器时，我不得不自己处理这个问题。添加 MichaelPerrenoud 所说的内容您可以通过快速过滤器运行所有比赛，例如：

```
bool ExtensionOf ( String f, String targetext ) {
    return f.EndsWith( targetext );
} 
```

如果您不需要 的灵活性`targetext`，只需将其完全替换为`".OUT"`

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T01:35:23.363

这是预期的行为，因为在您链接的文档中它指出：

> 文件扩展名正好为三个字符的 searchPattern 返回具有三个或更多字符扩展名的文件，**其中前三个字符与 searchPattern 中指定的文件扩展名匹配。**

但相比之下，它指出：

> 具有一个、两个或三个以上字符的文件扩展名的 searchPattern 仅返回具有与 searchPattern 中指定的文件扩展名完全匹配的扩展名的文件。

所以在你的情况下，你将**不得不**过滤掉结果。我希望它是不同的。这对很多人来说都是个问题，包括我自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T01:49:19.103

您可以按 guid 的长度剥离（子字符串）输入字符串：

```
string fileName = "Filename.OUT";
string seed = "6F9619FF-8B86-D011-B42D-00C04FC964FF";
string input = fileName + seed;
string result = input.Substring(0, input.Length - seed.Length);
FileInfo file = new FileInfo(result);
Console.WriteLine(file.Extension); 
```

并像往常一样使用结果：

```
private static string StripSeed(string input)
{
    return input.Substring(0, input.Length - 36); // length of seed (guid)
}

Directory.EnumerateFile("*.*")
         .Select(p => StripSeed(p))
         .Select(f => new FileInfo(f))
         .Where(fi => fi.Extesnsion.Equals(".OUT", StringComparison.OrdinalIgnoreCase)); 
```

[沙盒。](https://ideone.com/CjO5Sw)

# serial-port - Arduino RXTX 循环

> ID：15961657
> 
> 赞同：1
> 
> 时间：2013-04-12T01:31:54.190
> 
> 标签：serial-port, arduino, xbee

我正在使用 2 个 arduino，每个 arduino 都附有一个 xbee。我希望 1 个 arduino 成为主人，第二个成为奴隶。我正在尝试通过串行发送一个命令，例如

```
Serial.write("Get Arduino1 Data"); 
```

然后我希望另一个 arduino 收到这个字符串并有类似的东西

```
if(inString == "Get Arduino1 Data") {
 Serial.write("Your data here");
 Serial.write(digitalRead(4));
} 
```

问题是 1）我无法让第二个 arduino 进入 if 语句，而 arduino 坐下，然后 rx 然后 tx，rx 然后 tx 等等，一堆重复的“获取 Arduino1 数据”字符串溢出监视器。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T10:52:32.673

您可以尝试将 PhysicalPixel 示例用于 Arduino IDE 的通信示例

```
void loop() {
// see if there's incoming serial data:
if (Serial.available() > 0) {
// read the oldest byte in the serial buffer:
incomingByte = Serial.read();
// if it's a capital H (ASCII 72), turn on the LED:
   if (incomingByte == 'H') {
     digitalWrite(ledPin, HIGH);
   } 
// if it's an L (ASCII 76) turn off the LED:
   if (incomingByte == 'L') {
     digitalWrite(ledPin, LOW);
   }
}
} 
```

请记住，您必须使用 SoftwareSerial 并且 XBee 模块必须使用 AT 模式

# android - 如何使用 Xamarin/Monogame 在 Android 应用的屏幕底部显示 AdMob 广告？

> ID：15961662
> 
> 赞同：9
> 
> 时间：2013-04-12T01:32:38.550
> 
> 标签：android, admob, xamarin, monogame

几个月前我一直在用 MonoGame 开发游戏，几天前我刚刚发布了它。现在，我正在尝试让 AdMob 正常工作，以便发布该应用的免费精简版。我是 Android 布局的新手，所以我不知道自己在做什么。

在网上搜索有关使用 MonoGame 实施 AdMob 的一些信息后，我能够在我的应用程序中显示广告，但该应用程序始终显示在屏幕顶部。我很难找到任何有关重新定位广告的信息，特别是使用 MonoGame/Xamarin。

这是有效的代码，并在屏幕顶​​部显示广告：

活动1.cs：

```
public class Activity1 : Microsoft.Xna.Framework.AndroidGameActivity
    {
        internal View adView = null;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);
            Game1.Activity = this;
            var g = new Game1();
            FrameLayout fl = new FrameLayout(this);
            fl.AddView(g.Window);
            adView = AdMobHelper.CreateAdView(this, "<my id here>");
            var layoutParams = new ViewGroup.LayoutParams(Android.Views.ViewGroup.LayoutParams.FillParent, Android.Views.ViewGroup.LayoutParams.WrapContent);

            fl.AddView(adView, layoutParams);
            SetContentView(fl);
            AdMobHelper.RequestFreshAd(adView);
            g.Run();

        }
    } 
```

这无需任何额外的布局即可工作。现在，这是我从几个涵盖该主题的网站中吸收的代码：

活动1.cs：

```
public class Activity1 : Microsoft.Xna.Framework.AndroidGameActivity
    {
        internal View adView = null;

        protected override void OnCreate(Bundle bundle)
        {
            base.OnCreate(bundle);

            Game1.Activity = this;
            var g = new Game1();
            SetContentView(Resource.Layout.Main);
            View gameView = FindViewById(Resource.Id.GameView);
            ViewGroup parent = (ViewGroup)gameView.Parent;
            int index = parent.IndexOfChild(gameView);
            parent.RemoveView(gameView);
            parent.AddView(g.Window, index);
            adView = FindViewById(Resource.Id.Ad);
            parent = (ViewGroup)adView.Parent;
            index = parent.IndexOfChild(adView);
            parent.RemoveView(adView);
            var layoutParams = adView.LayoutParameters;
            adView = AdMobHelper.CreateAdView(this, "<my id here>");
            adView.LayoutParameters = layoutParams;
            parent.AddView(adView, index);
            AdMobHelper.RequestFreshAd(adView);
            g.Run();
        }
    } 
```

还有我的附加 Main.axml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <SurfaceView
        android:id="@+id/GameView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
    <com.google.ads.AdView
        android:id="@+id/Ad"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_gravity="bottom" />
</FrameLayout> 
```

但是，当我运行它时，我在“SetContentView(Resource.Layout.Main);”这一行遇到了崩溃。在 Activity1.cs 中。Visual Studio 给出错误：

```
Unhandled Exception:
Android.Views.InflateException: Binary XML file line #1: Error inflating class com.admob.android.ads.AdView 
```

尽管错误输出窗口中没有任何错误要检查...有什么帮助吗？理想情况下，我只想让这个 admob 广告显示在我的应用程序底部。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-04T05:03:55.343

这是添加 admob 的代码。我已经成功了，它可能对你有用

```
<com.google.ads.AdView
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@+id/adView"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
ads:adSize="BANNER"
ads:adUnitId="Your Admob 15 digit alpha numeric ID"
/> 
```

并在您的活动中，在 onCreate 方法中添加以下代码

```
AdView adview = (AdView)findViewById(R.id.adView);
AdRequest re = new AdRequest();
re.setTesting(true);
adview.loadAd(re); 
```

这对我来说是工作。有关更多详细信息，您可以访问 admob 网站

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T02:26:19.103

这应该对你有用，我用这种方式没有问题。

```
public class Activity1 : Microsoft.Xna.Framework.AndroidGameActivity
{
    internal View adView = null;

    protected override void OnCreate(Bundle bundle)
    {
        base.OnCreate(bundle);
        Game1.Activity = this;
        var g = new Game1();
        FrameLayout fl = new FrameLayout(this);
        LinearLayout ll = new LinearLayout(this);
        ll.setOrientation(LinearLayout.VERTICAL);
        ll.setGravity(Gravity.BOTTOM);
        fl.AddView(g.Window);
        adView = AdMobHelper.CreateAdView(this, "<my id here>");
        ll.addView(adView);
        fl.AddView(ll);
        SetContentView(fl);
        AdMobHelper.RequestFreshAd(adView);
        g.Run();

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-23T01:27:05.510

**解决方案 #2**
无需任何编码的快速方法是将 xmlns 添加到应用程序元素和*AndroidManifest.xml*`ads:loadAdOnCreate="true"`中的`adView`元素

# mvvmcross - ViewModel LifeCycle，它什么时候被处理掉？

> ID：15961664
> 
> 赞同：13
> 
> 时间：2013-04-12T01:32:49.210
> 
> 标签：mvvmcross

在 mvvmcross v3 ViewModel

```
public class TimerViewModel : MvxViewModel
{
    System.Timers.Timer timer;

    public TimerViewModel()
    {
        timer = new System.Timers.Timer(500f);

        timer.Elapsed += HandleTimerElapsed;

        timer.Start();

    }

    void HandleTimerElapsed (object sender, ElapsedEventArgs e)
    {
        Debug.Log( "Time Elapsed" );
    }
} 
```

由于 MvxViewModel 没有实现 IDisposable，我应该把下面的代码放在哪里？

```
timer.Stop();
timer.Elapsed += HandleTimerElapsed; 
```

我发现 mvvmcross 代码有一些 MvxWeakEventSubscription，它是用来解决我的问题的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-15T18:42:37.363

没有简单的通用方法可以知道何时`dispose`使用 ViewModel - 特别是当您开始混合和匹配 ViewModel 演示样式以包括导航、选项卡、拆分视图、弹出、片段、列表等时，并且随着您包含越来越多的平台

因此，我过去关闭诸如计时器之类的东西的几种方法是：

**1.**有时我在 ViewModel 上使用了一个专门的接口，并确保在每个客户端上都正确调用它。

例如，我使用以下方法启动/停止了“页面”级别的视图：

*   Android 中的 OnPause/OnResume
*   Windows 中的 OnNavigatedTo/OnNavigatingFrom
*   iOS 中的 ViewDidAppear/ViewWillDisappear

我曾考虑将其添加为通用模式来执行此操作（已登录[https://github.com/slodge/MvvmCross/issues/74）-](https://github.com/slodge/MvvmCross/issues/74)但到目前为止，我还没有将其添加到 v3 中，因为我认为它会导致用户之间产生过多的误解——最好在极少数需要的情况下让他们这样做。

**更新**：我已经写了一篇关于这个的博客并发布了一个示例 - 请参阅[http://slodge.blogspot.co.uk/2013/11/n42-is-my-viewmodel-visible-can-i-kill.html](http://slodge.blogspot.co.uk/2013/11/n42-is-my-viewmodel-visible-can-i-kill.html)

**2.**有时我只是通过 MvvmCross Messenger 使用事件聚合 - 我使用它固有`WeakReference`的基于消息传递来确保 ViewModel 在视图完成后可以被垃圾收集。

这方面的一个例子是 InternetMinute 示例 - 它有一个“Tick 生成服务”，ViewModels 可以通过消息连接进行更新 - 请参阅：

*   服务 - [https://github.com/slodge/MvvmCross-Tutorials/tree/master/InternetMinute/InternetMinute.Core/Services/Tick](https://github.com/slodge/MvvmCross-Tutorials/tree/master/InternetMinute/InternetMinute.Core/Services/Tick)
*   使用服务的 ViewModel - 通过[https://github.com/slodge/MvvmCross-Tutorials/blob/master/InternetMinute/InternetMinute.Core/ViewModels/HomeViewModel.cs](https://github.com/slodge/MvvmCross-Tutorials/blob/master/InternetMinute/InternetMinute.Core/ViewModels/HomeViewModel.cs)

您可能会认为这有点低效 - 因为即使 ViewModel 不存在也会生成 Tick 消息 - 但它只是一个小的低效率。

**3.**我考虑过使用更多的最终事件——比如`OnNavigatingFrom(BACK)`和“onDestroy”以及对 UINavigationController 代表的一些“最终”检测……但我还没有理由在任何项目上“真正地”这样做。

# javascript - onclick没有激活指定的功能

> ID：15961677
> 
> 赞同：0
> 
> 时间：2013-04-12T01:34:50.863
> 
> 标签：javascript, html, function, input, onclick

到目前为止，我没有成功让第一个输入按钮启动表移位功能。目前我正在测试功能。我已经尽力通过一些教科书和在线搜索来查看格式，我认为我的语法是正确的。寻找关于为什么没有从按钮计算班次引用 tableShifts() 的建议。谢谢你。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
<TITLE>Couch Shifts</TITLE>
<script type="text/javascript">     

    function openWindow() 
        {
            window.open('','',"toolbar=no, menubar=no, directories=no, status=no, resizable=no, scrollbars=no, height=120,width=510");
        }

    function patientPosition()
        {
            var x = 1;
            var Position = document.getElementbyId("Position").value;
            switch (patPosition){
            case "HFS":
                x = x*1         
            case "HFP":
                x = x*-1            
            case "FFS":
                x = x*1         
            case "FFP":
                x = x*-1        
            }
        }

    function tableShifts() 
        {
            alert("test");
        }

    function parameters()
       {           
            var curVert = Number(document.getElementById("curVert").value),
            var curLat = Number(document.getElementById("curLat").value), 
            var curLong = Number(document.getElementById("curLong").value), 

            var pinVert = Number(document.getElementById("curVert").value),
            var pinLat = Number(document.getElementById("curVert").value),
            var pinLong = Number(document.getElementById("curVert").value);

            document.getElementById("gotoVert").value = curVert - pinVert;
            document.getElementById("gotoLat").value  = curLat + pinLat;
            document.getElementById("gotolong").value = curLong - pinLong; 
            }

</script>
  </HEAD>
  <BODY>
<select Id="Position">
    <option value="HFS">Head First Supine</option>
    <option value="HFP">Head First Prone</option>
    <option value="FFS">Feet First Supine</option>
    <option value="FFP">Feet First Prone</option>
</select><br><br>
<div style="margin-bottom: 120px;">
<style>
    label { float: left; width: 35px; }
    #column1{ float: left; position: relative; z-index: 0; width: 150px;}
    #column2{ float: left; position: relative; z-index: 2; width: 150px;}
    #column3{ float: left; position: relative; z-index: 1; width: 125px;}
    #button { position: absolute; }
</style>
<div id="column1">Current Position</br></br>
    <label for="Vert">Vert:</label>
    <input type="text", id="curVert" size="10" value="" /></br>
    <label for="Lat">Lat:</label>
    <input type="text" size="10", id="curLat" value="" /></br>
    <label for="Long">Long:</label>
    <input type="text" size="10", id="curLong" value="" />  
</div>

<div id="column2">Pinnicle Shifts<br><br>
    <label for="Vert">Vert:</label>
    <input type="text", id="pinVert" size="10" value="" /></br>
    <label for="Lat">Lat:</label>
    <input type="text", id="pinLat" size="10" value="" /></br>
    <label for="Long">Long:</label>
    <input type="text", id="pinLong" size="10" value="" />      
</div>

<div id="column3">Calculated Shifts</br></br>
    <label for="Vert">Vert:</label>
    <input type="text", id="gotoVert" size="10" value="" readonly="readonly" style="background-color:#D8D8D8 ;"/></br>
    <label for="Lat">Lat:</label>
    <input type="text", id="gotoLat" size="10" value="" readonly="readonly" style="background-color:#D8D8D8 ;"/></br>
    <label for="Long">Long:</label>
    <input type="text", id="gotoLong" size="10" value="" readonly="readonly" style="background-color:#D8D8D8 ;"/>       
</div><br />
</div>

<div id="button">
    <input type = "button" style="margin-top: 10px;" value="Calculate Shifts" onclick="tableShifts();" />
    <input type = "button" style="margin-top: 10px;" value="Reset" onclick=""/>
 </div> 
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:49:11.567

在功能上`tableShiftsss`你有：

```
 var gotoVert.value = curVert - pinVert;
    var gotoLat.value = curLat + pinLat;
    var gotolong.value = curLong - pinLong; 
```

这不是有效的 EcmaScript 方言（如 javascript）。

您可能希望将其更改为：

```
function tableShifts(){           
    var curVert = Number(document.getElementById("curVert").value),
         curLat = Number(document.getElementById("curLat").value), 
        curLong = Number(document.getElementById("curLong").value), 

        pinVert = Number(document.getElementById("curVert").value),
         pinLat = Number(document.getElementById("curVert").value),
        pinLong = Number(document.getElementById("curVert").value);

    document.getElementById("gotoVert").value = curVert - pinVert;
    document.getElementById("gotoLat").value  = curLat + pinLat;
    document.getElementById("gotolong").value = curLong - pinLong; 
} 
```

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:51:44.160

在你的 tableShiftsss() 里面，你说：

```
var gotoVert.value 
```

虽然它应该是：

```
document.getElementById("gotoVert").value 
```

这适用于所有这三个陈述。

此外，value 函数返回一个字符串而不是 int，因此您不能只添加结果。相反，您需要像这样转换为 int：

```
var curVert = parseInt(document.getElementById("curVert").value); 
```

您可能还有其他语法错误，但这取决于您使用浏览器的 Javascript 控制台进行调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T04:00:02.247

尝试这个

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
        <HTML>
        <HEAD>
        <TITLE>Couch Shifts</TITLE>
        <script type="text/javascript">     

            function tableShifts() 
                {
                    alert("test");
                }

        function openWindow() 
                {
                    window.open('','',"toolbar=no, menubar=no, directories=no, status=no, resizable=no, scrollbars=no, height=120,width=510");
                }

          function patientPosition()
                {
                    var x = 1;
                    var Position = document.getElementbyId("Position").value;
                    switch (patPosition){
                    case "HFS":
                        x = x*1         
                    case "HFP":
                        x = x*-1            
                    case "FFS":
                        x = x*1         
                    case "FFP":
                        x = x*-1        
                    }
                }

             function parameters()
               {           
                    var curVert = Number(document.getElementById("curVert").value);
                    var curLat = Number(document.getElementById("curLat").value);
                    var curLong = Number(document.getElementById("curLong").value); 

                   var pinVert = Number(document.getElementById("curVert").value);
                    var pinLat = Number(document.getElementById("curVert").value);
                    var pinLong = Number(document.getElementById("curVert").value);

                    document.getElementById("gotoVert").value = curVert - pinVert;
                    document.getElementById("gotoLat").value  = curLat + pinLat;
                    document.getElementById("gotolong").value = curLong - pinLong;
                    }

        </script>
          </HEAD>
          <BODY>
        <select Id="Position">
            <option value="HFS">Head First Supine</option>
            <option value="HFP">Head First Prone</option>
            <option value="FFS">Feet First Supine</option>
            <option value="FFP">Feet First Prone</option>
        </select><br><br>
        <div style="margin-bottom: 120px;">
        <style>
            label { float: left; width: 35px; }
            #column1{ float: left; position: relative; z-index: 0; width: 150px;}
            #column2{ float: left; position: relative; z-index: 2; width: 150px;}
            #column3{ float: left; position: relative; z-index: 1; width: 125px;}
            #button { position: absolute; }
        </style>
        <div id="column1">Current Position</br></br>
            <label for="Vert">Vert:</label>
            <input type="text" id="curVert" size="10" value="" /></br>
            <label for="Lat">Lat:</label>
            <input type="text" size="10" id="curLat" value="" /></br>
            <label for="Long">Long:</label>
            <input type="text" size="10" id="curLong" value="" />  
        </div>

        <div id="column2">Pinnicle Shifts<br><br>
            <label for="Vert">Vert:</label>
            <input type="text", id="pinVert" size="10" value="" /></br>
            <label for="Lat">Lat:</label>
            <input type="text", id="pinLat" size="10" value="" /></br>
            <label for="Long">Long:</label>
            <input type="text", id="pinLong" size="10" value="" />      
        </div>

        <div id="column3">Calculated Shifts</br></br>
            <label for="Vert">Vert:</label>
            <input type="text", id="gotoVert" size="10" value="" readonly="readonly" style="background-color:#D8D8D8 ;"/></br>
            <label for="Lat">Lat:</label>
            <input type="text", id="gotoLat" size="10" value="" readonly="readonly" style="background-color:#D8D8D8 ;"/></br>
            <label for="Long">Long:</label>
            <input type="text", id="gotoLong" size="10" value="" readonly="readonly" style="background-color:#D8D8D8 ;"/>       
        </div><br />
        </div>

        <div id="button">
            <input type = "button" style="margin-top: 10px;" value="Calculate Shifts" onclick="tableShifts();" />
            <input type = "button" style="margin-top: 10px;" value="Reset" onclick=""/>
         </div> 
        </BODY>
        </HTML> 
```

# solr - 2个solr查询之间的区别

> ID：15961678
> 
> 赞同：1
> 
> 时间：2013-04-12T01:34:52.703
> 
> 标签：solr

运行以下两个 solr 查询有什么区别。他们似乎给了我不同数量的结果。

```
 fq=field1:value1&fq=(field2:value21 OR field2:value22) 
```

相对

```
 fq=field1:value1&fq=field2:value21 OR field2:value22 
```

第一个给我一个更大的结果集，而第二个给我一个更小的结果集。括号在这种情况下有什么影响吗？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:16:52.593

查看本手册，了解在 SOLR 中使用布尔运算符

```
http://robotlibrarian.billdueber.com/solr-and-boolean-operators/ 
```

# c# - 如何将字符串放在字符的右侧？

> ID：15961679
> 
> 赞同：1
> 
> 时间：2013-04-12T01:35:02.207
> 
> 标签：c#, string

```
connectionString=Data Source=SERVER1;Initial Catalog=DATABASE1;Integrated Security=True 
```

我想捕获“=”右侧的所有内容。

我该怎么做呢？

```
Console.WriteLine(connectionString);

Data Source=SERVER1;Initial Catalog=DATABASE1;Integrated Security=True 
```

我试过了：

```
variable = string.Split('=')[1] 
```

但它只给了我“数据源”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T01:37:15.180

像这样：

```
var str = "connectionString=Data Source=SERVER1;Initial Catalog=DATABASE1;Integrated Security=True";
var res = str.Substring(str.IndexOf('=')+1); 
```

请注意，如果字符串中没有`'='`字符，则将返回整个字符串。如果存在多个`'='`字符，则将第一个字符用作“切点”，其余字符将被忽略。

[链接到 ideone 上的演示](http://ideone.com/IfL9iY)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:37:14.917

寻找第一个的位置，`=`然后从那里拿走所有东西：

```
string s = "connectionString=Data Source=SERVER1;Initial Catalog=DATABASE1;Integrated Security=True";
int position = s.IndexOf('=');
string rest = s.Substring(position + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T01:38:50.660

尝试：

```
Substring(yourstring.IndexOf('=')) 
```

它获取 = 符号的第一个索引，然后将所有内容都放在右边。

# tinymce - 如何使用 text-overflow:ellipsis 和 tinymce

> ID：15961680
> 
> 赞同：1
> 
> 时间：2013-04-12T01:35:06.157
> 
> 标签：tinymce, css

我有一个主详细信息类型视图设置，您可以在右侧（详细信息）输入数据，它将显示在左侧（详细信息）的摘要中。我使用 CSS 和 jQuery 完成了这个视图。所有数据都来自 mysql 数据库。

该问题是由 tinymce 插入到 textarea 中的 html 标签引起的。当我尝试使用`text-overflow:ellipsis;`CSS 显示它时，它没有放在省略号中。

CSS：

```
.OverflowData {
    text-overflow:ellipsis;
    overflow: hidden;
    white-space: nowrap;
} 
```

[这](http://jsfiddle.net/5evPs/)是一个精简的 jsFiddle，其中包含添加了 tinymce html 标记的结果数据以及左侧发生的情况。

现在[这](http://jsfiddle.net/5evPs/1/)是一个版本，我去掉了`<p>`标签并且省略号正确显示。

所以我的问题是：是否可以在第一种情况下正确显示摘要和省略号，还是必须事先从 tinymce textarea 中删除所有 html？

我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:51:27.967

设置必须在直接父级上，以便在添加到您的示例时有效（注意选择器中的“p”）：

```
.OverflowData p {
    text-overflow:ellipsis;
    overflow: hidden;
    white-space: nowrap;    
} 
```

# android - 以编程方式在 Android 中设置文本视图

> ID：15961685
> 
> 赞同：0
> 
> 时间：2013-04-12T01:35:26.067
> 
> 标签：android

我目前有：

```
final TextView tv = new TextView(this); 
final RelativeLayout rL = new RelativeLayout(this);
final EditText editText = (EditText)findViewById(R.id.editText);   
final Button b1 = (Button)findViewById(R.id.b1);    

 b1.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            rL.addView(tv);
            tv.setText(editText.getText());
            editText.setText("");

        }
    }); 
```

在我的 onCreate 方法中，但是当输入文本并按下我的按钮时，我的 textView 没有显示在屏幕上？是否有代码可以设置手机屏幕上的设置位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:45:47.550

这是你的问题

```
final RelativeLayout rL = new RelativeLayout(this); 
```

这个包含TextView 的RelativeLayout 甚至不会显示在屏幕上，您所做的只是创建一个RelativeLayout。

您应该做的是向您的 XML 布局文件添加一个 RelativeLayout（包含 EditText 和 Button 的同一个文件并执行以下操作

```
final RelativeLayout rL = (RelativeLayout)findViewById(R.id.myRelativeLayout);
...
rL.addView(tv); 
```

现在，由于您引用的是实际的 RelativeLayout，因此您的文本将可见。希望我有某种意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:47:56.030

你有基本布局吗？您正在将 EditText 添加到 RelativeLayout，但您需要将 RelativeLayout 添加到一些已经存在的布局。

首先，膨胀一些基本布局。然后在该布局上执行 findViewById。使用它来调用 addView(editText);

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/base_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
</RelativeLayout>

public class MyActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);

        RelativeLayout rl = (RelativeLayout)findViewById(R.layout.base_layout);
        rl.addView(yourTextView);

    }

} 
```

# ruby - 将 Ruby 程序更改为简单的桌面 Mac 应用程序

> ID：15961695
> 
> 赞同：2
> 
> 时间：2013-04-12T01:36:25.710
> 
> 标签：ruby, xcode, macruby

我有一个程序可以读取文件中的数据，更改某些元素并创建一个新文件。代码如下所示：

```
lines = IO.readlines('single_before_CAP.txt').map do |line|
a = line.split.each { |i| i.capitalize! }
a2 = a.join(" ")
File.open('single_after_CAP.txt', 'w') do |file|
  file.puts lines
end 
```

如何使用 Xcode 和 MacRuby 让这个程序作为 GUI 应用程序运行？如果不是 Xcode 和 MacRuby，我可以做另一个简单的任务来使它成为一个独立的 GUI 应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T01:53:52.070

一种好方法：

[http://macruby.org/](http://macruby.org/)

示例应用：

[https://github.com/MacRuby/MacRuby/wiki/Creating-a-simple-application](https://github.com/MacRuby/MacRuby/wiki/Creating-a-simple-application)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T01:55:37.533

听起来你想要的基本上是一个简单的包装应用程序，它在双击时运行你的脚本，而不是一个完整的 GUI。[鸭嘴兽](http://sveinbjorn.org/platypus)是最简单的方法。你只需给它你的脚本，设置几个参数（例如你的脚本是否需要一个文件作为参数），它会给你一个可双击的应用程序，可以选择包含一个简单的界面，如进度条或文本输出.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T01:49:25.160

如果你只想运行一个无头 ruby​​ 应用程序，你可以使用 Automator。只需创建一个新的工作流程，添加一行来执行您的应用程序，然后将其保存为“.app”。如果你愿意，我可以给你更具体的指示。

@jmitchell1009

具体说明：如果您不需要在程序中输入任何内容（如文件或参数），最简单的方法是：

1.  打开自动机
2.  选择新的“应用程序”（这会将您的最终输出保存为 .app，如果您想要其他内容，可以选择其他选项）
3.  选择“运行 Shell 脚本”操作，并将其拖到您的工作流程中。
4.  选择一个 shell 来运行它（如果你只是在运行一个 ruby​​ 应用程序，这并不重要）。
5.  选择输入应该去哪里（同样，如果你没有输入，它应该太重要了）
6.  输入 ruby​​ 应用程序的命令。诸如“ruby commandpath”之类的东西（当然不带引号）
7.  您可能需要运行几次以确保其正常工作。完成后，您可以保存工作流程，它会为您创建一个 .app。

如果您有任何问题，请告诉我。

# jquery - 变量不适用于 scrollTop

> ID：15961696
> 
> 赞同：0
> 
> 时间：2013-04-12T01:36:30.303
> 
> 标签：jquery, variables, cookies, scrolltop

我一直在寻找几个小时，却一无所获。

我正在检测用户滚动位置`beforeunload`并将其保存到 cookie（使用插件）。页面刷新后，页面现在应该滚动到这个位置，但它没有。

我可以看到位置已保存，我也可以在`alert()`.

`scrollTop`适用于“硬数字”，但不适用于 cookie 中的数据。

`parseInt`也无济于事。

任何想法为什么？提前非常感谢！

* * *

此代码不起作用：

```
window.onload = function() {
    setTimeout(function() {
    $(document).scrollTop(300);
}, 100); 
```

这行得通

```
vari = $.cookie("scrollTil");

window.onload = function() {
    setTimeout(function() {
    $(document).scrollTop(vari);
}, 100); 
```

* * *

编：

```
$(document).ready(function(){

vari = $.cookie("scrollTil");

window.onload = function() {
    setTimeout(function() {
        $(document).scrollTop(vari);
    }, 100);
}

$(window).unload(function(){
    $.cookie("scrollTil", $(window).scrollTop());
})
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:02:47.440

你的代码很好。但它并没有像你预期的那样工作，因为你在 $(window).unload(function() 中调用的 $(window).scrollTop() 总是返回 0。

当用户完成滚动时，您应该捕获滚动位置。您可以在此处找到解决方法

[Javascript：用户完成滚动后执行操作](https://stackoverflow.com/questions/4289473/javascript-do-an-action-after-user-is-done-scrolling)

# jsf - onkeydown 事件触发单击命令按钮

> ID：15961697
> 
> 赞同：0
> 
> 时间：2013-04-12T01:36:44.120
> 
> 标签：jsf, primefaces

在一个表单中有几个 primefaces inputtext 控件和命令按钮。在一个输入文本上按回车键需要激活相关命令按钮的单击。我怎样才能实现该功能？我什至尝试使用onkeydown，但找不到方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:11:42.370

在[RongNK](https://stackoverflow.com/users/1834700/rongnk)的指导下，我将代码更改如下，它完美地满足了我的目的。

添加了 CDATA 以包含 JavaScript。使用 \\ 转义：在 JSF 组件的 ID 中

```
 <h:form id="frmEn">
                <script type="text/javascript" language="JavaScript">
                    //<![CDATA[    
                    function forDx(e) {
                        if (e.keyCode === 13) {
                            $('#frmEn\\:btnDx').click();
                            return false;
                        } else {
                            return true;
                        }
                    }
                    function forIx(e) {
                        if (e.keyCode === 13) {
                            $('#frmEn\\:btnIx').click();
                            return false;
                        } else {
                            return true;
                        }
                    }
                    function forMx(e) {
                        if (e.keyCode === 13) {
                            $('#frmEn\\:btnMx').click();
                            return false;
                        } else {
                            return true;
                        }
                    }
                    function forRx(e) {
                        if (e.keyCode === 13) {
                            $('#frmEn\\:btnRx').click();
                            return false;
                        } else {
                            return true;
                        }
                    }
                    // ]]>
                </script> 

                <p:panel header="Encounter" >
                    <h:panelGrid columns="2" >
                        <p:panel header="Encounter Details" >

                            <h:panelGrid columns="4" >

                                <h:outputLabel value="Tests" ></h:outputLabel>
                                <p:autoComplete  id="txtIx"  value="#{encounterController.test }" completeMethod="#{encounterController.completeIx}"  styleClass="defaultTxt" onkeydown="return forIx(event)" >
                                </p:autoComplete>
                                <h:commandButton id="btnIx"  value="Add" action="#{encounterController.addTest()}">
                                    <f:ajax  execute="btnIx txtIx" render="tblIx" />
                                </h:commandButton>
                                <p:dataTable value="#{encounterController.ecIxs }" var="ix" id="tblIx" >
                                    <p:column >
                                        <f:facet name="header" >
                                            <h:outputLabel value="Tests"/>
                                        </f:facet>
                                        <h:outputLabel value="#{ix.concept.name}"></h:outputLabel>
                                    </p:column>
                                </p:dataTable>

                                <h:outputLabel value="Diagnosis" ></h:outputLabel>
                                <p:autoComplete  id="txtDx"  value="#{encounterController.diagnosis }" completeMethod="#{encounterController.completeDx}"  styleClass="defaultTxt" onkeydown="return forDx(event)" />
                                <h:commandButton id="btnDx"  value="Add" action="#{encounterController.addDiagnosis()}" >
                                    <f:ajax  execute="btnDx txtDx" render="tblDx txtDx" />
                                </h:commandButton>
                                <p:dataTable value="#{encounterController.ecDxs }" var="dx" id="tblDx" >
                                    <p:column >
                                        <f:facet name="header" >
                                            <h:outputLabel value="Diagnoses"/>
                                        </f:facet>
                                        <h:outputLabel value="#{dx.concept.name}"></h:outputLabel>
                                    </p:column>
                                </p:dataTable>

                                <h:outputLabel value="Treatment" ></h:outputLabel>
                                <p:autoComplete  id="txtRx"  value="#{encounterController.rx}" completeMethod="#{encounterController.completeRx}"  styleClass="defaultTxt" onkeydown="return forRx(event)">
                                </p:autoComplete>

                                <h:commandButton id="btnRx"  value="Add" action="#{encounterController.addRx()}">
                                    <f:ajax  execute="btnRx txtRx" render="tblRx" />
                                </h:commandButton>
                                <p:dataTable value="#{encounterController.ecRxs }" var="rx" id="tblRx" >
                                    <p:column >
                                        <f:facet name="header" >
                                            <h:outputLabel value="Treatment"/>
                                        </f:facet>
                                        <h:outputLabel value="#{rx.concept.name}"></h:outputLabel>
                                    </p:column>
                                </p:dataTable>

                                <h:outputLabel value="Plan" ></h:outputLabel>
                                <p:autoComplete  id="txtMx"  value="#{encounterController.plan }" completeMethod="#{encounterController.completeMx}"  styleClass="defaultTxt" onkeydown="return forMx(event)">
                                </p:autoComplete>

                                <h:commandButton id="btnMx"  value="Add" action="#{encounterController.addPlanOfAction() }">
                                    <f:ajax  execute="btnMx txtMx" render="tblMx" />
                                </h:commandButton>
                                <p:dataTable value="#{encounterController.ecMxs}" var="mx" id="tblMx" >
                                    <p:column >
                                        <f:facet name="header" >
                                            <h:outputLabel value="Plan"/>
                                        </f:facet>
                                        <h:outputLabel value="#{mx.concept.name}"></h:outputLabel>
                                    </p:column>
                                </p:dataTable>

                                <h:outputLabel value="Details" ></h:outputLabel>
                                <h:inputTextarea value="#{encounterController.current.comments}" styleClass="defaultTxtArea"></h:inputTextarea>
                                <h:outputLabel value="" ></h:outputLabel>
                                <h:outputLabel value="" ></h:outputLabel>

                                <h:outputLabel value="Charges" ></h:outputLabel>
                                <h:inputTextarea value="#{encounterController.current.charge}" styleClass="defaultTxt"></h:inputTextarea>
                                <h:outputLabel value="" ></h:outputLabel>
                                <h:outputLabel value="" ></h:outputLabel>

                                <h:outputLabel value=""></h:outputLabel>
                                <h:commandButton value="Save" action="#{encounterController.saveSelected()}"></h:commandButton>
                                <h:outputLabel value="" ></h:outputLabel>
                                <h:outputLabel value="" ></h:outputLabel>
                            </h:panelGrid>

                        </p:panel>
                        <p:panel header="Patient Details" >
                            <h:panelGrid columns="2" >
                                <h:outputLabel value="Name"></h:outputLabel>
                                <h:outputLabel value="#{encounterController.current.patient.person.name}"></h:outputLabel>

                                <h:outputLabel value="Age"></h:outputLabel>
                                <h:outputLabel value="#{encounterController.current.patient.person.age}"></h:outputLabel>

                                <h:outputLabel value="Date of Birth"></h:outputLabel>
                                <h:outputLabel value="#{encounterController.current.patient.person.dob}">
                                    <f:convertDateTime pattern="dd MMMM yyyy" />
                                </h:outputLabel>

                                <h:outputLabel value="Sex"></h:outputLabel>
                                <h:outputLabel value="#{encounterController.current.patient.person.sex.name}"></h:outputLabel>

                                <h:outputLabel value="Address"></h:outputLabel>
                                <h:outputLabel value="#{encounterController.current.patient.person.address}"></h:outputLabel>

                            </h:panelGrid>
                        </p:panel>
                    </h:panelGrid>

                </p:panel>

            </h:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:20:18.753

你可以试试（你需要自己找到在javascript中检测回车键）

xhtml:

```
<p:input onkeydown="test()" />
<p:commandButton styleClass="foo" /> 
```

javascript:

```
function test(){
$('.foo').click();
} 
```

您还可以查看： [How-to-programmatically-trigger-onclick-event](https://stackoverflow.com/questions/7281821/how-to-programmatically-trigger-onclick-event) 和 [How-to-refer-to-a-jsf-component-id-in-jquery](https://stackoverflow.com/questions/7132061/how-to-refer-to-a-jsf-component-id-in-jquery)

# forms - 树枝将数字字段呈现为文本

> ID：15961703
> 
> 赞同：1
> 
> 时间：2013-04-12T01:37:18.853
> 
> 标签：forms, symfony, twig

在我的表单类中，我添加了数字字段：

```
$builder->add('total_amount', 'number', array('required' => false)); 
```

在我的表单模板中：

```
{{ form_widget(form.total_amount, {'attr': {'class': 'field number_field'}}) }} 
```

但是，我的页面源显示：

```
<input type="text" id="ResearchDataForm_total_amount" 
    name="ResearchDataForm[total_amount]" class="field number_field" value="0" /> 
```

我期望 type="number"，但它呈现为 type="text"。为什么这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T04:19:33.020

symfony 形式中实际上有两个选项，一个是整数，另一个是数字。Number 主要用于小数点值。而整数仅适用于整数。如果您希望整数与整数一起使用，则可以选择自动四舍五入的数字。

在您检查此链接之前 [http://symfony.com/doc/current/reference/forms/types/integer.html](http://symfony.com/doc/current/reference/forms/types/integer.html)

输入类型编号是我个人不喜欢的，因为它仅由少数浏览器实现，您希望在所有浏览器中看起来都相似。这些东西实际上甚至可能会让普通用户感到困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:10:53.303

number 类型的字段是这样显示的（type="text"），不用担心，因为如果用户输入的不是数字，它会失败：

```
This value is not valid. 
```

[http://symfony.com/doc/current/book/forms.html#text-fields](http://symfony.com/doc/current/book/forms.html#text-fields)

[http://symfony.com/doc/current/reference/forms/types/number.html](http://symfony.com/doc/current/reference/forms/types/number.html)

# zurb-foundation - Foundation 4可以有一个范围吗？

> ID：15961704
> 
> 赞同：0
> 
> 时间：2013-04-12T01:37:24.987
> 
> 标签：zurb-foundation

Foundation 4 只能在页面的某些区域初始化吗？

例如，如果我有 2 个 div，我可以调用 Foundation("#div2") 并且所有 CSS 和 javascript 事件仅在 div#2 中应用吗？

谢谢一千！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T10:14:40.777

一般不会影响你的。例如网格系统主要由 CSS 控制。对于表单，除非您将`custom`类应用于表单，否则表单元素的 js 将不会启动。为了说明这一点，以下两种表单中的一种具有`custom`类，而另一种则没有。请注意，Foundation 将为带有`custom`类的表单添加两个锚标记和一个无序列表：

```
<form id="form1">
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</form>
<form id="form2" class="custom">
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</form> 
```

这是看到它在行动中[的小提琴。](http://jsfiddle.net/fDUxV/)

更新：对于一般的“部分格式”，是的，您可以将基础应用于页面的某些部分。但请注意，即使网格位于您定位的部分之外，仍将应用网格系统。同样，这是因为它们主要由 CSS 控制。这是另一个插图：

```
<h1>The Grid System will still be applied to this</h1>    
<div class="row1">
    <div class="large-5 large-centered columns">
        <p class="panel">Centered Div</p>
    </div>
</div>
<div id="foundationArea">
<h1>Only apply Foundation here</h1>
        <form id="form1" class="custom">
            <select>
                <option>1</option>
                <option>2</option>
                <option>3</option>
            </select>
        </form>
        <div class="row">
            <div class="large-6 columns panel">
                <p>Test</p>
            </div>
        </div>
</div>
<h1>Foundation is not allowed here</h1>
<form id="form2" class="custom">
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
    </select>
</form> 
```

[请参阅此更新的小提琴](http://jsfiddle.net/fDUxV/2/)以显示此处给出的更新示例。

# eclipselink - 使用 EclipseLink 是否可以在运行时为类创建 orm.xml 映射？

> ID：15961713
> 
> 赞同：2
> 
> 时间：2013-04-12T01:38:35.833
> 
> 标签：eclipselink

我是 EclipseLink 的新手。我正在尝试在运行时为类生成 orm 映射并进行映射。有可能吗？我看到了在运行时生成类的示例，但这不适合我的情况。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:28:17.533

这可能是可能的，具体取决于您尝试做什么以及何时。持久性单元是相当静态的创建，应该预先知道 - 就像 java 类本身一样。因此，如果您不使用动态实体，为什么不预先知道该类应该预先与持久性单元分开呢？

虽然这不是一个好主意，但您可以创建一个静态持久性单元并指定它使用定制器，如此处所述[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Customizers](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Advanced_JPA_Development/Customizers)您可以添加其中描述符或映射到持久性单元。定制器只运行一次，在初始化期间。因此，如果您想稍后进行更改，则需要使用 EntityManagerFactory 上的 refreshMetadata 刷新持久性单元，以使其重新加载持久性单元。运行 EntityManagers 不会受到更改的影响。

使用 EMF refreshMetadata，您还可以使用 MetadataRepository 为您的实体获取不同的或扩展的 ORM.xml 文件 - 这样您就可以合并对 xml 所做的更改，而不是使用定制器。这在这里有所描述：http: [//www.eclipse.org/eclipselink/documentation/2.5/solutions/extensible001.htm#CIAIJHAG](http://www.eclipse.org/eclipselink/documentation/2.5/solutions/extensible001.htm#CIAIJHAG)

# ruby-on-rails - has_secure_password、RSpec 和用户创建

> ID：15961714
> 
> 赞同：1
> 
> 时间：2013-04-12T01:38:36.530
> 
> 标签：ruby-on-rails, rspec, factory-bot

我正在尝试通过 Rspec 和用户登录来通过最小的测试。其中一部分意味着设置一个使用 has_secure_password 进行身份验证的用户。我正在尝试这个：

```
scenario 'test signin' do
  @attr = { :email => "jtjt@some.com",
             :password => "pass123"
  }
  User.create!(@attr)
  visit signin_path
  fill_in 'Email', with: 'jtjt@some.com'
  fill_in 'Password', with: 'pass123'
  click_button 'Log in'
end 
```

我已经添加了

```
attr_accessible :password, :password_confirmation 
```

但得到以下错误：

```
1) test login with email test signin
   Failure/Error: User.create!(@attr)
   NoMethodError:
     undefined method `password_digest=' for #<User:0x007fd89b02a028>
   # ./integration/email_login_spec.rb:15:in `block (2 levels) in <top (required)>' 
```

我尝试添加：password_confirmation 但实际上得到了相同的错误（？）。我将使用 FactoryGirl 之类的东西，但我想得到这件作品，我认为这很简单。知道我做错了什么吗？

谢谢

**编辑 2** 我们确实有 password_digest 字段，并且代码已经工作了一段时间。只是想在我接手项目时添加一些集成测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T10:34:28.103

还要确保您的用户模型`password_digest`中有[**attr_accessor**](http://apidock.com/ruby/Module/attr_accessor)。

# c++ - C++ const char* 到 const char* const

> ID：15961715
> 
> 赞同：4
> 
> 时间：2013-04-12T01:38:37.437
> 
> 标签：c++, constants, execvp

我目前正在为我的班级写一个作业，该作业应该充当一个非常基本的外壳。我快完成了，但我遇到了一个问题，`execvp`我的参数字符数组。这是我的代码的一个简单片段。

```
//Split the left content args
istringstream iss(left);
while(getline(iss, s, ' ')){
     v.push_back(s);
}

//Get the split string and put it into array
const char* cmd_left[v.size()+1];
for(unsigned int i = 0; i < v.size(); i++){
     cmd_left[i] = v.at(i).c_str();
}
cmd_left[v.size()] = 0;
v.clear(); 
```

这被...利用

```
execvp(cmd_left[0], cmd_left); 
```

我的错误是

```
assign3.cxx:96:34: error: invalid conversion from ‘const char**’ to ‘char* const*’ [-fpermissive] 
```

我知道问题是我的字符数组没有充满常量数据，所以我基本上需要从`const char*`to `const char* const`。我读了一些关于的东西`const_cast`，但我不确定这是否是我需要做的。

如果你好心，你能帮我让我的字符数组数组被那个函数正确接受吗？如果您需要我发布更多代码，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:04:44.770

问题是您不能将 const 变量传递给期望非常量参数的函数。

换句话说，`const char *`是 的子集`char *`。

去除`const`

```
/*const*/ char* cmd_left[v.size()+1]; 
```

`const_cast`在此处添加

```
cmd_left[i] = const_cast<char *>( v.at(i).c_str() ); 
```

你的代码的其他部分看起来很可疑，但这会让它编译

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:50:46.133

创建 const 动态元素数组并不容易，有时不可能，因为所有元素都必须在初始化程序 {} 中声明。但幸运的是，您可以告诉编译器您传递的数组至少在一定时间内将是 const 的。您可以执行以下操作，这将产生

```
&((char* const) (const_cast<char*>(cmd_left[0]) )) 
```

内部的 const_cast 将删除 std::string 所拥有的字符数组的常量性。因此，该函数很可能会更改 std::string 后面的字符数组的内容。当知道采用此类参数的函数的行为时，这可能没问题。

如果您想创建一个 char* 的 const 数组而不使用 const_cast 或使用 new/delete 管理内存，您可以使用 std::vector > 而不是字符串向量。

```
istringstream iss(left);
while(getline(iss, s, ' ')){
     v.push_back(std::vector<char>(s.length()+1));
     strcpy(&v.back().front(),s.c_str());
}

//Get the split string and put it into array
char* cmd_left[v.size()+1];
for(unsigned int i = 0; i < v.size(); i++){
     cmd_left[i] = &v.at(i).front();
}
cmd_left[v.size()] = 0;
v.clear();
execvp(cmd_left[0], &((char* const)cmd_left[0])); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:22:30.823

没有任何 const_cast：

```
istringstream iss(left);
while(getline(iss, s, ' ')){
     v.push_back(s);
}

//assuming v is not empty! which you were already
string command = v[0]; //store the command in a separate variable (this makes a copy of the string)

char* cmd_left[v.size()+1]; //not a (const char)*
for(unsigned int i = 0; i < v.size(); i++){
     cmd_left[i] = new char[v[i].size()+1];
     strcpy(cmd_left[i], v[i].c_str()); //copy contents of each string onto a new buffer
}
cmd_left[v.size()] = NULL;

v.clear(); //if you really want to; not necessary from the code you posted

//...
execvp(command.c_str(), cmd_left); 
```

# java - 特定于 Java 7 Eclipse 的套接字未连接

> ID：15961718
> 
> 赞同：0
> 
> 时间：2013-04-12T01:38:48.333
> 
> 标签：java, eclipse, java-7

尝试运行这个测试程序：[test socket connection with Java](https://stackoverflow.com/q/1273453) to connect to mail.iinet.net.au

在 Windows 7 64 位上运行

最初使用 jre1.6_27 在 Eclipse Indigo 64 位上一切正常，我升级到 jre1.7_17 并设置 eclipse 以使用 jre1.7 构建项目。如果我导出 jar 并从命令行运行它，一切正常。但是，通过 Eclipse 运行相同的 jar，我收到以下错误：

```
Attempting: mail.iinet.net.au port: 25 ....
Failure:    mail.iinet.net.au/203.0.178.192:25 message: SocketTimeoutException - connect timed out 
```

所以我升级到 Eclipse Juno 64 位，我遇到了同样的问题。通过命令行运行可以，但不能通过 Eclipse。

为什么升级到 jre1.7 并在 Eclipse Indigo/Juno 中运行上述代码会导致超时 - 但导出 jar 并从命令行运行可以正常工作。

此外，从 Windows 命令行 telnet 到 mail.iinet.net.au 也可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:33:43.817

如果您的防病毒软件阻止了 Java，我不会感到惊讶，我们遇到了类似的问题，卡巴斯基在 Eclipse 中阻止了来自 CouchBase 的调用。尝试暂时禁用/关闭您的防病毒软件并再次尝试验证

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T03:55:01.867

问题是 java 7 默认使用 IPv6 堆栈而不是 IPv4。[使用来自https://stackoverflow.com/a/11850724/458493](https://stackoverflow.com/a/11850724/458493)的详细信息修复它

# vb.net - 多视图一种形式

> ID：15961728
> 
> 赞同：0
> 
> 时间：2013-04-12T01:39:47.557
> 
> 标签：vb.net, forms, views

我希望在表单的左侧有一个导航窗格，它将相应地更改表单的右侧。我总是可以使用面板并将控件存储在面板上，但有更好的方法吗？选项卡控件会很好，但我不想看到实际的选项卡...

有没有办法做到这一点？

**看到答案后编辑：**

```
Dim uc As New UserControl1
Form1.Controls.Add(uc) 
```

将用户控件中的所有内容添加到 form1。或者，如果我有一个小组，我可以这样做：

```
Panel1.controls.add(uc) 
```

这会将其添加到面板中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:43:09.420

您可以使用面板，但您也可以将面板作为用户控件并将它们加载到单个面板实例中，甚至直接加载到表单中。

将它们放入 UserControls 还意味着您的表单生成的类不会被控件成员弄乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T05:03:17.383

我不得不同意@Dai 这是一个[很棒的主题。](http://www.vbforums.com/showthread.php?511530-Removing-Hiding-ALL-tabs-in-a-TabControl)它解释了如何在 ide 中设置面板。

# javascript - 如何提高到指数的幂？

> ID：15961731
> 
> 赞同：0
> 
> 时间：2013-04-12T01:40:38.007
> 
> 标签：javascript, math

如何使用 JavaScript计算*98 的 exp(13-5) 次幂？*

是这样吗？

```
Math.pow(98,Math.exp(8)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:41:50.377

当我需要处理会溢出标准浮点类型的大正数时，我会将这些数字存储为数字的对数。因此，我不会计算 98 的 exp(8) 次方，而是计算 exp(8) * log(98) 并使用它。我（还）没有遇到过这种情况，即使这种方法也不足以存储我需要的数字。但是，我遇到了几种情况，其中正确答案涉及将非常大的数字乘以非常小的数字，并且在这种情况下，使用我所描述的日志避免了会导致错误答案的上溢/下溢。

更新：我怀疑这是关于如何解决 98 ^ exp(8) 对于标准浮点类型来说太大的问题的某种家庭作业问题。在这种情况下，我认为我使用日志的建议会派上用场。例如，要在 C# 中打印出数字，您可以执行以下操作：

```
double x = Math.Exp(13 - 5) * Math.Log(98);  // the number required is exp(x)
int exponent = (int)Math.Floor(x / Math.Log(10));
double absissae = Math.Exp(x - exponent * Math.Log(10));
System.Diagnostics.Trace.WriteLine(absissae.ToString() + " E " + exponent.ToString()); 
```

产生输出

```
5.77130918514205 E 5935 
```

# iphone - 仅 iPhone 应用程序被拒绝，因为它是通用二进制文件

> ID：15961734
> 
> 赞同：3
> 
> 时间：2013-04-12T01:41:13.913
> 
> 标签：iphone, xcode, ipad, binary, itunes

我刚刚有一个 iPhone 唯一的应用程序被 iTunes 连接拒绝，因为......

> 在我们对您的应用程序的审查中，我们发现它是适用于 iPad 和 iPhone 的通用应用程序。因为它被设置为通用二进制文件，所以您的应用程序需要来自 iPhone 和 iPad 的屏幕截图。

该应用程序以前是一个通用二进制文件（以前从未批准过），我之前上传了一个 iPad 屏幕截图（只是一个占位符）以允许我上传二进制文件。（我必须上传然后自我拒绝一个二进制文件来测试 IAP。）

但据我所知，我的应用程序仅是 iphone 二进制文件。当我在 iOS iPad 模拟器上运行它时，它使用 2x 按钮以 iPhone 分辨率运行。然而，当我将这个（我认为）仅 iPhone 的二进制文件上传到 iTunes Connect 时，它仍然要求提供 iPad 屏幕截图。

在 Xcode 我有以下设置

> 目标-> 构建设置-> 目标设备系列 = iPhone。

和

> 目标->摘要->设备= iPhone。

当我在模拟器上运行它时，它再次像 iPhone 专用应用程序一样。我需要在 XCode 或 iTunes Connect 中设置其他设置吗？谢谢

* * *

编辑在我的应用程序被拒绝后，我从 iTunesConnect 中删除了占位符 iPad 屏幕截图。（在提交应用程序之前，我曾多次尝试这样做，但未能成功。我什至给审阅者写了一份开发人员说明，希望他们不会因此而对我的应用程序进行攻击。）我还删除了 ipad Default.png 从我的项目。其中两个动作之一修复了它。我想因为我一直在测试这个应用程序作为一个通用应用程序，它需要几次提交才能让 iTC 认识到我只是上传了一个 iPhone 版本。无论哪种方式，它现在都将其识别为仅 iphone 并获得了批准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T23:06:29.663

在我的应用程序被拒绝后，我从 iTunesConnect 中删除了占位符 iPad 屏幕截图。（在提交应用程序之前，我曾多次尝试这样做，但未能成功。我什至给审阅者写了一份开发人员说明，希望他们不会因此而对我的应用程序进行攻击。）我还删除了 ipad Default.png 从我的项目。其中两个动作之一修复了它。我想因为我一直在测试这个应用程序作为一个通用应用程序，所以 iTC 需要提交几次才能认识到我只是在上传一个 iPhone 版本。无论哪种方式，它现在都将其识别为仅 iphone 并获得了批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:58:25.990

只需将Sumary中的构建目标设备设置为iPhone ...检查plist ...也只需加载.xib文件iPhone，在您的项目中进行清理并重建..检查您是否没有加载某些目标

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T12:23:17.530

你不应该相信你所看到的`targets->Summary`。特别是，如果您曾经更改为“通用”并返回“iPhone”。

而不是`Summary`你应该经常检查`targets->Info`。

此外，如果您更改图标、方向等，通常会出现您只能在其中找到的剩菜`Info`

# html - 使用正则表达式 <(? .+)>(?(应答器).*itemprop=.*)

> ID：15961735
> 
> 赞同：0
> 
> 时间：2013-04-12T01:41:16.173
> 
> 标签：html, regex

您好，我有一些 html，我尝试使用正则表达式来查找所有获得 itemprop 属性的 HTML 标记。

我想使用正则表达式，因为我不确定 HTML 的完整性。

我试过这个正则表达式。

```
<(?<balise>.+)>(?(balise).*itemprop=.*) 
```

我想在我的组中匹配一个模式，但它不起作用。

有人可以帮助我

文本解析示例

```
<meta itemprop="currency" content="CDN" >
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml">
<head><span itemprop="name">My name</span> 
```

我只需要提取获取 itemprop 的 html 标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T21:55:11.313

正如评论中所指出的，使用正则表达式解析 html 远非理想，您应该考虑使用适当的框架。

但是，如果坚持使用正则表达式，您可以尝试以下方式：

```
(?<=<)\s*([^\s>]+?)(?=\s[^>]*(?<=\s)itemprop="[^<]*?/?>) 
```

查找由 组成的字符串`zero or more whitespace characters followed by one or more non whitespace and non > characters`，所述字符串必须以 a`<`开头，后跟（按给定顺序）：`a whitespace`, `zero or more non > characters`, `itemprop=" preceded by a space`, `zero or more non < characters`, `optional /`, `>`.

上面的正则表达式不能确保标签的属性关于`'`and正确平衡，`"`如果它包含非法字符/语法也不会失败。它只会断言标签有一个开始，一个包含多个空格的名称，一个 itemprop 属性并且标签是关闭的。

# ruby-on-rails - Rails：从数据库中检索模型 ID

> ID：15961738
> 
> 赞同：0
> 
> 时间：2013-04-12T01:42:11.570
> 
> 标签：ruby-on-rails

我正在尝试检索名为“gnib”的模型的 id，并将其以隐藏字段中的表单提交，以便用户在单击附加到每个 gnib 的提交按钮时有效地重新发布“gnib”。但是，当我单击按钮时，出现错误：

```
ActiveRecord::Recordnotfound in Sharescontroller#create
Couldn't find Gnib with id= 
```

如果有人可以帮助我解决这个问题，我将不胜感激。

**笔尖型号**

```
attr_accessible :title, :image, :content 
mount_uploader :image, ImagesUploader
belongs_to :user
validates :content, presence: true, length: { maximum: 80 }  
validates :user_id, presence: true
default_scope order: 'gnibs.created_at DESC'
has_many :reverse_shares, foreign_key: "regnib_id", class_name: "Share", dependent:     :destroy
has_many :regnibbers, through: :reverse_shares 
```

在我的用户模型中，我有：

**用户模型**

```
 has_many :gnibs, dependent: :destroy
 has_many :shares, foreign_key: "regnibber_id", dependent: :destroy
 has_many :regnibs, through: :shares 
```

我使用了一个名为“Share”的连接模型来促进转发或“regnib”功能。

**分享模型**

```
attr_accessible :regnib_id
belongs_to :regnibber, class_name: "User"
belongs_to :regnib, class_name: "Gnib"
validates :regnibber_id, presence: true
validates :regnib_id, presence: true 
```

在**共享控制器**中，我有：

```
 def create
 @gnib = Gnib.find(params[:share][:regnib_id])
 current_user.regnib!(@gnib)
 redirect_to @gnib
 end 
```

在**gnib 控制器**中，我有：

```
 def create
 @gnib = current_user.gnibs.build(params[:gnib])
 end 
```

在显示功能下的**用户控制器**中，我有：

```
 @gnib = current_user.gnibs.build(params[:gnib]) if signed_in? 
```

用于渲染**gnibs**的**部分**在用户展示页面中，如下所示：

 **```
<li>
 <span class="Title"><%= gnib.title %></span>
 <span class="Image"><%= image_tag gnib.image_url(:thumb) %></span>
 <span class="content"><%= gnib.content %></span>
 <span class="timestamp">
 Posted <%= time_ago_in_words(gnib.created_at) %> ago.
 </span>
 <%= render 'regnib_form' %>
</li> 
```

而**regnib**形式的**部分**是：

 **```
<% unless current_user?(@user) %>
<div id="regnib_form">
<% if current_user.regnibbing?(@gnib) %>
<% else %>
<%= form_for(current_user.shares.build(regnib_id: @gnib.id)) do |f| %>
<div><%= f.hidden_field :regnib_id %></div>
<%= f.submit "Regnib", class: "btn btn-large btn-primary" %>
<% end %>
<h4> Regnibs <%= @gnib.regnibbers.count %></h4>
<% end %>
</div>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:29:17.370

```
<div>
  <%= f.hidden_field :regnib_id %>
</div> 
```

应该：

```
<div>
  <%= f.hidden_field :regnib_id , :value=> @gnib.id %>
</div> 
```****

# bash - 如何使用 sudo bash 运行 Zend Studio 远程系统 SSH

> ID：15961741
> 
> 赞同：1
> 
> 时间：2013-04-12T01:42:48.103
> 
> 标签：bash, zend-framework, ssh, sudo, zend-studio

在常规 SSH 中，我可以使用密码“pwd”作为用户“foobar”登录，然后键入 sudo bash 和相同的密码“pwd”来执行超级用户活动。

我使用远程系统 SSH 访问为同一 SSH 服务器设置了 Zend Studio WorkSpace，并以用户“foobar”和密码“pwd”登录。

然后如何访问项目树？我得到的错误是：“操作失败。安全违规”。我如何在 Zend Studio 中使用密码“pwd”来 sudo bash 浏览 svn 存储库树，就像我以“root”身份登录并使用密码“thepwd”一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-03T09:42:06.017

更改该目录及其子目录的权限，使其可供用户 foobar 使用

```
sudo chmod u+rwx -R <directory> 
```

# php - 从 php 中的简单正则表达式返回字符串

> ID：15961746
> 
> 赞同：0
> 
> 时间：2013-04-12T01:43:15.517
> 
> 标签：php, regex

我需要使用正则表达式从另一个字符串中提取一个字符串。这是我的正则表达式：

```
/^httpamp$/ 
```

我查看了 php 函数 `preg_filter ( mixed $pattern , mixed $replacement , mixed $subject)`，但我不明白它是如何工作的。我知道模式是这样的：`/^httpamp$/`，并且`$subject`是我的初始字符串，但是替换的是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:58:54.250

元素指的`$replacement`是您想要替换模式的内容 - 作为数组或字符串，但您不需要`preg_filter()`用于标识子字符串。

如果您要识别字符串的一部分（无论长度如何），请使用`preg_match()`：

```
<?php
  // The string to seach
  $yourString = "the lazy fox";

  // The pattern to match
  $pattern = '/^the/';

  // The function to use
  preg_match($pattern, $yourString, $matches);

  // Output the $matches produced (formatted)
  echo '<pre>';
  print_r($matches);
  echo '</pre>';
?> 
```

您可以使用一些其他选项（标志/偏移），您可以在[此处找到更多信息](http://php.net/manual/en/function.preg-match.php)

# asp.net - 解密使用 FormsAuthentication.Encrypt 加密的数据

> ID：15961750
> 
> 赞同：0
> 
> 时间：2013-04-12T01:43:36.933
> 
> 标签：asp.net, forms-authentication, webforms

我正在部署在开发网络场上的 .Net 4.0 ASP.Net Web 应用程序中通过 FormsAuthentication.Encrypt(data) 将数据加密到 cookie 中。我已经指定了一个 machineKey 属性来对 ValidationKey、DecryptionKey 和 Decryption（算法）进行硬编码。
现在，我正在尝试使用我在开发工作站上构建的应用程序来解密该 cookie。我可以通过 Request.Cookies["CookieName"] 获取 cookie，但是当我尝试通过 FormsAuthentication.Decrypt(encCookie) 解密该值时，出现以下错误：

> 无法验证数据。在 System.Web.Configuration.MachineKeySection.EncryptOrDecryptData(Boolean fEncrypt, Byte[] buf, Byte[] 修饰符, Int32 开始, Int32 长度, Boolean useValidationSymAlgo, Boolean useLegacyMode, IVType ivType, Boolean signData) 在 System.Web.Security.FormsAuthentication .Decrypt(String encryptedTicket) at TuoVanitySite.Default.Page_Load(Object sender, EventArgs e) in c:\src\ets_2008\main\ebtDev\Sandboxes\rrozinov\TuoVanitySite\TuoVanitySite\Default.aspx.cs:line 22

这是我的网络配置中的模糊（键已删除）：

```
<machineKey 
  validationKey="keyA" 
  decryptionKey="keyB" 
  decryption="3DES" 
  compatibilityMode="Framework20SP1"/> 
```

有人处理过 machineKey 不够用的这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:00:51.300

好的，我能够找到解决问题的方法，但是我不确定为什么会这样。我必须将验证属性添加到 machineKey：

```
<machineKey 
  validationKey="keyA" 
  decryptionKey="keyB" 
  validation="SHA1"
  decryption="3DES" 
  compatibilityMode="Framework20SP1"/> 
```

让它有点有趣的是，无论我使用 SHA1 还是 3DES，我的代码都可以很好地解密。我确实确认服务器使用的是默认 SHA1。我仍然愿意为教育目的找到根本原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-27T23:16:54.527

正如“[如何：在 ASP.NET 2.0 中配置 MachineKey](http://msdn.microsoft.com/en-us/library/ff649308.aspx) ”一文中所述：

> 即使验证设置为 AES 或 3DES，也会使用 HMACSHA1

因此，如果兼容性模式设置为 Framework20SP1 或 Framework20SP2，则可能会使用 SHA1，而不管验证属性中设置了什么。

我目前正在为类似的任务而苦苦挣扎 - 在 Windows Server 2012 上的 IIS8 上部署的 ASP.Net 4.0 和 3.5SP1 Web 应用程序之间设置单点登录。它变得更加复杂，因为 Win2k12 具有 .Net 4.5.1，即“就地”升级到 4.0...

# jquery - jQuery多个setTimeout代码乱七八糟

> ID：15961752
> 
> 赞同：0
> 
> 时间：2013-04-12T01:43:53.940
> 
> 标签：jquery, animation, settimeout

我正在尝试使用 jQuery 中的 setTimeout 函数来创建动画。效果很好，动画也很完美，但是我的代码现在太乱了。

```
setTimeout(function() {
            $('p').fadeOut();

            setTimeout(function() {
                var heightLoading = $('#loading').height();
                $("#loading").css("margin-top", height);
                $('#loading').html("Anyways, I am a <span>Web Designer</span> and <span>Front-end Developper</span>").fadeIn();

                setTimeout(function() {
                    $('#name').fadeIn();
                }, 2000);
            }, 1000)
        }, 3000);

      }, 800);
}, 2000); 
```

有不同的方法吗？现在它是一个 setTimeout 中的一个 setTimeout，等等。如果我继续这样下去，这真的很令人困惑。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:14:35.157

您可以通过跳过 setTimeout 并使用内置的计时和回调来简化链接：

```
$('p').fadeOut(800, function () { var heighLoading.... 
```

如果您想进一步删除函数嵌套，这里有一个插件可能会有所帮助：

[http://creativecouple.github.io/jquery-timing/](http://creativecouple.github.io/jquery-timing/)

# java - 使用嵌套列表转换对象的设计模式

> ID：15961753
> 
> 赞同：0
> 
> 时间：2013-04-12T01:43:59.683
> 
> 标签：java, design-patterns, guava

我有一项服务，其流程基本上如下：

1.  接收输入对象。这只是一个 POJO 对象，我对它的设计没有太多发言权。
2.  转换为我的服务的规范化对象。
3.  对规范化对象执行一些业务逻辑，并收集一些关于它的额外数据。
4.  转换为数据传递到的另一个服务的输出对象。（另一个 POJO。）
5.  将转换后的数据传递给另一个服务。

但是，这意味着我的服务的很大一部分是从 type 转换`InputFoo`为 type`NormalizedFoo`到 type `OutputFoo`。

这将是一项非常容易的任务。我正在使用 Google Collections 库，并且可以有这样的类：

```
public class InputFooToNormalizedFooConverter implements Function<InputFoo, NormalizedFoo> {
  public NormalizedFoo apply(InputFoo input) {
    NormalizedFoo output = new NormalizedFoo();
    output.setProperty(input.getProperty());
  }
} 
```

和这样的另一个类：

```
public class NormalizedFooFooToOutputFooConverter implements Function<NormalizedFoo, OutputFoo> {
  public NormalizedFoo apply(InputFoo input) {
    NormalizedFoo output = new NormalizedFoo();
    output.setProperty(input.getProperty());
  }
} 
```

但是每种类型的 Foo 本质上都有这样的层次结构：

```
public class Foo {
   List<Bar> barItems;
   // .. other properties
}

public class Bar {
   List<Baz> bazItems;
   List<Quux> quuxItems;
   // .. other properties
}

public class Baz {
   // .. other properties
}

public class Quux {
   // .. other properties
} 
```

这意味着我有`NormalizedFooToOutputFooConverter`一个`NormalizedBarToOutputBarConverter implements Function<NormalizedBar, OutputBar>`类型等等。

更糟糕的是，输入与归一化模型并不*完全匹配。*这更像

```
public class InputFoo {
  public List<InputBar> bars;
  public List<InputBaz> bazs;
  public List<InputQuux> quuxs;
  // .. other properties
}

public class InputBar {
  private String barId;
  // .. other properties
}

public class InputBaz {
  private String barId;
  private String bazId;
  // .. other properties
}

public class InputQuux {
  private String barId;
  private String quuxId;
  // .. other properties
} 
```

在这些模型中，我可以根据每个模型的特征`Baz`来确定哪些模型`Quux`属于哪个模型。`Bar``barId`

在这一点上，我有大约 20 个不同的转换器用于 from `Input`to`Normalized`和`Normalized`to `Output`。更糟糕的是，其中一些具有`ReallyLongInputTypeToReallyLongNormalizedTypeConverter`创建极长类名的名称。我觉得我在这里做错了，所有的转换器。有没有更好的方法来组织我的转换器？

# c# - 在 C# 中注册和检索存储库的正确（最佳）方法

> ID：15961757
> 
> 赞同：0
> 
> 时间：2013-04-12T01:44:03.103
> 
> 标签：c#, inversion-of-control, repository-pattern

我正在处理的项目有很多用于传递 Repository 对象的样板代码。父对象创建一个存储库，将其传递给任何实用程序/辅助方法以执行某些特定工作，然后最终父对象调用提交或保存在存储库上。很多时候，这些实用程序/辅助方法调用其他方法，这也需要存储库。一方面，我们肯定错误地使用了存储库模式，因为许多这些辅助方法实际上只是将存储库用作 DAO 甚至只是一个数据库连接，运行一个快速查询并完成它。我的问题是避免传递这些存储库的最佳方法是什么？

最原始的方法是在这些辅助方法中创建存储库，然后销毁它们（使用子句），这样做有明显的缺点，而且它不利于 DRY。

我还看到人们将这些存储库注册为服务并以这种方式使用它们的示例。

请考虑线程安全。

专家对此有何看法？任何例子将不胜感激。

PS。我是一名高级 Java 人员，但几乎是 C# 的入门级，所以任何与 Java 相关的比较也会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:31:15.437

注册和检索存储库的“正确”方法是使用 DI 容器（我推荐[Autofac](http://code.google.com/p/autofac/wiki/GettingStarted)

```
builder.RegisterType<MyRepository>().AsImplementedInterfaces().InstancePerLifetimeScope(); 
```

*InstancePerLifeTimeScope*意味着它是线程范围的，因此每个线程只有一个实例。每个需要存储库的对象都将存储库接口作为构造函数依赖项。对于某些服务，存储库可以是方法参数。

存储库将使用（微）ORM 与数据库“对话”。在某些情况下，您需要可以直接从数据库中检索的数据甚至某些对象。在这种情况下，您有一个服务而不是一个存储库，尽管这两个实现（不是接口）都属于 DAL。

我假设所有的服务和存储库都作为抽象传递，所以每个需要服务或存储库的对象将只知道 IService 或 IRepository。DI 容器将注入具体类型，客户端对象不需要知道这些。

# php - 代码点火器 - 从数据库中选择正确值的表单下拉列表（使用 javascript 的州和城市）

> ID：15961760
> 
> 赞同：1
> 
> 时间：2013-04-12T01:44:35.737
> 
> 标签：php, javascript, html, codeigniter

我有一个类似的问题：[Code Igniter - form_dropdown 从数据库中选择正确的值](https://stackoverflow.com/questions/4331078/code-igniter-form-dropdown-selecting-correct-value-from-the-database)，但在这种情况下，我有 2 个下拉列表，州和城市（使用 JavaScript）。根据用户在州下拉菜单中选择的内容重新填充城市的下拉选项。

例如，当用户选择一个州（例如：纽约）时，“城市”的下拉选项将仅变为纽约的城市（例如：奥尔巴尼、阿姆斯特丹等）。

用户选择一个值后，点击保存，将其保存到数据库中。

问题是，我如何让下拉菜单自动选择用户在初始阶段选择的那个？如果它只有 1 个下拉选项，我可以做到。但在这种情况下，City 的下拉菜单会根据用户在 State 下拉选项中选择的内容重新填充。

控制器：

```
//this one i managed to get it automatically choose the one that's been selected by the user in the initial stage    
$username=$this->session->userdata('username'); 
$data['orgtype'] = $this->m_user->get_orgtype_dropdown($username);

//these two are the problem 
$data['state'] = $this->m_user->get_state_dropdown($username); 
$data['city'] = $this->m_user->get_city_dropdown($username); 
```

模型：

```
function get_orgtype_dropdown($username){
$sqlstr="SELECT * FROM a01 WHERE username='$username'";
$hslquery=$this->db->query($sqlstr);
   foreach($hslquery->result_array() as $row){
        $return[$row['orgtype']] = $row['orgtype'];
        }
    return $return;
}

function get_state_dropdown($username){
$sqlstr="SELECT * FROM a01 WHERE username='$username'";
$hslquery=$this->db->query($sqlstr);       
   foreach($hslquery->result_array() as $row){
        $return[$row['state']] = $row['state'];
        }
    return $return;
}

function get_city_dropdown($username){
$sqlstr="SELECT * FROM a01 WHERE username='$username'";
$hslquery=$this->db->query($sqlstr);       
   foreach($hslquery->result_array() as $row){
        $return[$row['city']] = $row['city'];
        }
    return $return;
} 
```

看法：

```
<?php
$orgtypeOption = array(
         'Academic'  => 'Academic',
         'Professional'    => 'Professional',                  
         );

    echo form_label("Organization Type : ");
    echo form_dropdown('orgtype', $orgtypeOption, $orgtype);
    echo br();
    echo form_label("State : ");            
    ?>
    <select name ="state" id="countrySelect" size="1" onChange="makeSubmenu(this.value)">
        <option></option>
        <option value="USA" <?php if ($state=="USA") echo 'selected="selected"';?>>USA</option>
        <option value="Singapore" <?php if ($state=="Singapore") echo 'selected="selected"';?>>Singapore</option>
        <option value="Jawa Timur" <?php if ($state=="Jawa Timur") echo 'selected="selected"';?>>Jawa Timur</option>
        <option value="Jawa Barat" <?php if ($state=="Jawa Barat") echo 'selected="selected"';?>>Jawa Barat</option>
    </select>
    <?php
    echo br();
    echo form_label("City : ");
    ?>
    <select name="city" id="citySelect" size="1">
        <option></option>
    </select> 
```

JavaScript：

```
var citiesByState = {
    USA: ["NY","NJ"],
    Singapore: ["taas","naas"],
    "Jawa Timur": ["Surabaya","Malang"],
    "Jawa Barat": ["Bandung","Banjar"]
};
function makeSubmenu(value) {
    if(value.length==0) document.getElementById("citySelect").innerHTML = "<option></option>";
    else {
        var citiesOptions = "";
        for(cityId in citiesByState[value]) {
            citiesOptions+="<option>"+citiesByState[value][cityId]+"</option>";
        }
        document.getElementById("citySelect").innerHTML = citiesOptions;
    }
}
function displaySelected() {
    var country = document.getElementById("countrySelect").value;
    var city = document.getElementById("citySelect").value;
    alert(country+"\n"+city);
}
function resetSelection() {
    document.getElementById("countrySelect").selectedIndex = 0;
    document.getElementById("citySelect").selectedIndex = 0;
} 
```

这是预览：[应用程序预览图片](https://lh4.googleusercontent.com/-Dr8yklo_fKQ/UWdngNtyqoI/AAAAAAAAAG4/XyRqhM9EYws/s549/Dropdown.jpg)

请帮忙

# clojure - How does one start programming with Clojure in Windows?

> ID：15961764
> 
> 赞同：13
> 
> 时间：2013-04-12T01:45:25.397
> 
> 标签：clojure, leiningen, clojurescript

I know it is possible to use CounterClockwise inside Eclipse, but I have been trying to get Leiningen to work so that I could use ClojureScript.

I downloaded leiningen using git clone. It then says run the script. I have tried lein self-install from inside PowerShell and inside the git bash environment.

In each I get an error about failing to download leiningen (which I thought I had with the git clone? hmm). It is interesting because one reads instructions that include things that don't make sense to Windows.

For example, inside Powershell, Windows doesn't understand export HTTP_CLIENT. It was only inside the git bash that I got a message that it is possible my HTTP client's certificate store does not have the correct certificate authority.

It then suggests this command, which runs ok, `export HTTP_CLIENT="curl --insecure -f -L -o"` but it doesn't fix the problem.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-12T05:50:46.367

The most recommended method AFAIK is to download the script [`lein.bat`](https://raw.github.com/technomancy/leiningen/stable/bin/lein.bat) and putting it on the `PATH` environment variable. I've tested this method on several systems (XP, Windows 7). There is no need to build leiningen from a git checkout yourself. If you have a Windows with Powershell installed `lein self-install` should download the core `.jar` file inside a directory `.lein` in your user directory. Else, make sure you install either `wget.exe` or `curl.exe` and put it on the `PATH`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T13:50:38.963

There is an installer for Leiningen on Windows. You just need to install Java SE 7 JDK and Leiningen for Windows. This page has detailed instructions with screen shots: [http://leiningen-win-installer.djpowell.net/](http://leiningen-win-installer.djpowell.net/)

Leiningen for Windows creates a PATH variable and Clojure REPL shortcut among other things. From the REPL you can create, build, and automate your Clojure project.

# python - 如何选择价值最高的钥匙

> ID：15961768
> 
> 赞同：2
> 
> 时间：2013-04-12T01:45:47.737
> 
> 标签：python

这是我所拥有的示例代码

```
my_dict = {'a':2, 'b':5, 'c':3, 'd':8, 'e':3} 
```

我怎样才能让它打印出价值最高的钥匙。例如在上面的代码中它会打印：

```
d 
```

这就是我想要打印的所有内容，只是具有最高价值的键。帮助将不胜感激谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T01:48:58.823

使用最大的键

```
max(my_dict, key=my_dict.get) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-12T01:49:33.133

像这样：

```
my_dict = {'a':2, 'b':5, 'c':3, 'd':8, 'e':3}
max(my_dict, key=my_dict.get)
=> 'd' 
```

请注意，`max`可以找到作为参数传递的任何可迭代的最大值，并且可选的 key 参数指定一个单参数选择器函数，用于确定每个对象中用于查找最大值的属性是什么。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T01:50:29.830

```
from operator import itemgetter
max(my_dict.iteritems(), key=itemgetter(1))[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T02:52:47.383

这与其他的略有不同：

```
d = {'a':2, 'b':5, 'c':3, 'd':8, 'e':3}
new_d = {d[i]:i for i in d.keys()} # reverses the dict {'a': 2} --> {2: 'a'}
new_d[max(new_d.keys())] 
```

# java - 如果不使用，为什么我们要在循环中为 head 赋值？

> ID：15961771
> 
> 赞同：-3
> 
> 时间：2013-04-12T01:45:55.613
> 
> 标签：java, linked-list, copy-constructor

```
public CarList(CarList cl)
{
    if(cl == null) throw new NullPointerException();
    if (cl.head == null)
        head = null;
    else
    {
        // Notice that you cannot issue head = cl.head; otherwise both heads will point at the passed list;

        head = null;
        // Now create and copy all the nodes in the list
        CarNode temp, temp2, temp3;
        temp = cl.head;
        temp2 = null;
        temp3 = null;

        while(temp != null)
        {
            if (temp2 == null)      // The case for the first node
            {
                temp2 = new CarNode(temp.getCar(), null);
                head = temp2;
            }
            else
            {
                temp3 = new CarNode(temp.getCar(), null);
                temp2.setNext(temp3);
                temp2 = temp3;
            }

            temp = temp.getNext();
        }
        // Avoid privacy leak; set all temporary pointers to null 
        temp = temp2 = temp3 = null;
    }
} 
```

我不太明白循环的作用......我无法解析代码。隐私权是否是由于临时变量持有地址这一事实？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:03:41.350

它用于：

```
 head = temp2; 
```

您的标签准确地说明了这里发生了什么。CarList 是一个表示单链表的类，其中列表的每个元素都包装在一个 CarNode 中，该 CarNode 包含该元素以及指向列表中下一个元素的链接。

'head' 变量指向列表中的第一个 CarNode。有问题的 while 循环，虽然它的变量名有问题，但它只是将参数列表复制到正在实例化的那个，为每个元素创建一个新的 CarNode。浏览它以获取 4 元素示例，您会看到它在做什么。

您最好查看“Lisp CAR 函数”以获取更多信息。 [这个页面](http://www.augustana.ab.ca/~mohrj/courses/common/csc370/lecture_notes/lisp2.html)也有很多关于它的信息。

# html - 固定居中的粘性页脚无法定位在中心..请想法

> ID：15961773
> 
> 赞同：0
> 
> 时间：2013-04-12T01:46:34.247
> 
> 标签：html, css

我有一个 600 像素宽的页脚图形，我想将它定位在页面的中心。我目前将它固定在浏览器的底部，这就是我想要的 - 如果您知道我的意思，我希望内容从页脚下方滚动。使用固定值，我的页脚挂在左侧。使用相对值，它居中，但粘在页面底部，我最终有大量空白区域向下滚动，直到看到页脚。事实上，删除整个 position: 属性与相对值具有相同的效果。

我怎样才能解决这个问题？

我在这里尝试了一些想法 -[如何在另一个 <div> 中水平居中 <div>？](https://stackoverflow.com/questions/114543/how-to-center-a-div-in-a-div-horizontally)但他们都没有工作=[

CSS

```
#footer {
position: fixed;
margin-top: -110px; 
height: 110px;
width: 600px;
margin: 0 auto;
clear:both;
bottom: 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T03:29:19.420

html:

```
<div class="footerWrap">
  <div class="footer"></div>
</div> 
```

CSS：

```
.footerWrap {
    width:100%;
    position:fixed;
    bottom:0;
}
.footer {
    margin:auto;
    width:600px;
    height:110px;
} 
```

工作[演示](http://jsfiddle.net/jhunlio/7qrhm/)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:51:57.223

尝试这个

```
html, body, and other div relative {
   width: 100%;
}

#footer {
    position: fixed;
    margin-top: -110px; 
    height: 110px;
    width: 600px;
    clear:both;
    bottom: 0;
    left: 50%;
    margin-left: -300px; /* half size of footer */
} 
```

# php - php输出Javascript的问题

> ID：15961779
> 
> 赞同：0
> 
> 时间：2013-04-12T01:47:35.797
> 
> 标签：php, javascript

我有一个我用 php 编写的图像旋转脚本，它从目录中随机查找图像，并输出 Javascript。

我将此文件称为：

```
<script type="text/javascript" src="getImage.php?t=home">
</script> 
```

这个文件 php 文件写道：

```
 document.write('<div id="slideshow"><img src="images/work/Rotate.jpg" alt="" class="active" /><img src="images/work/Rotate.jpg" alt="" /><img src="images/work/Rotate.jpg" alt="" /><img src="images/work/Rotate.jpg" alt="" /><img src="images/work/Rotate.jpg" alt="" /><img src="images/work/Rotate.jpg" alt="" /><img src="images/work/Rotate.jpg" alt="" /></div>'); 
```

并使用 php 标头：

```
Header("content-type: application/x-javascript"); 
```

将文件作为 Javascript 文件发送。

奇怪的是，这适用于不同公司的两个不同托管帐户，但不适用于第三个。

有人知道我可能会错过什么吗？我尝试更改标题内容类型并尝试添加[此](https://serverfault.com/questions/244828/set-mime-type-of-php-generated-javascript-file)

```
AddHandler application/x-httpd-php .js
AddType application/javascript .js 
```

到 .htaccess 但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:34:27.043

感谢您的回复。我将其更改为，`application/javascript`但这并没有解决它。

我更改了我的搜索查询并设法找到[了这篇文章](https://stackoverflow.com/questions/8227638/how-to-embed-php-script-in-javascript)，它说我必须将这`Header("content-type: application/x-javascript");`一行放在 php 文件的顶部。我把它放在中间，但由于某种原因，它在其他主机上运行良好。

谢谢

# c# - 在可移植类库中使用 x86 dll

> ID：15961781
> 
> 赞同：3
> 
> 时间：2013-04-12T01:47:55.670
> 
> 标签：c#, c++-cli, portable-class-library

## 最终目标

我有一个用 c++ 构建的 x86 dll。我需要能够使用可移植类库中的 dll。这可以是直接或间接的，但我想将整个应用程序保留在用户计算机上。

## 我试过的

我设计了一个 c++/cli 包装器来允许访问 dll。我确认它可以通过 x86 控制台 C# 项目工作。

*   我尝试直接从可移植类库中使用包装器，但它不允许引用。
*   我尝试使用 wcf 库中的包装器，但该库在跨平台 dll 方面存在问题。

我认为我让这种方式太复杂了，但我不熟悉一种方法来做我想做的事。我无法在 64 位中重建 dll 并进行并行加载 - 我只能选择使用 x86 dll。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T00:44:06.340

为什么需要从可移植类库中引用 C++ DLL？C++ DLL 不能在多个平台上使用。PCL 的重点是它们可以在多个平台上运行，但这意味着它们引用的所有内容也必须是 PCL。

可能我推荐的是使用抽象模式，如此[处](http://blogs.msdn.com/b/dsplaisted/archive/2012/08/27/how-to-make-portable-class-libraries-work-for-you.aspx)所述。

# ruby-on-rails - 向回形针宝石添加另一个字段

> ID：15961783
> 
> 赞同：0
> 
> 时间：2013-04-12T01:47:57.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我已经添加了回形针宝石，`rails generate paperclip pin image` 但是我想添加一个名为 : 的字段`title which would be a string`。

我试图将它添加到我的**pin.rb**文件中

```
class Pin < ActiveRecord::Base
  attr_accessible :description, :image, :title 
```

然后把它放在我的视图**html.erb**页面中却遇到了错误：`title did not schema`。如何将字段添加到 rails 中的引脚表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:51:35.477

您需要为此创建另一个迁移（或者只需将其添加到由回形针创建的迁移中，但最好添加另一个迁移）。您可以通过运行以下命令来做到这一点

```
rails g migration add_title_to_pins title
rake db:migrate 
```

# c++ - 动态地将类型名称传递给 static_cast

> ID：15961784
> 
> 赞同：0
> 
> 时间：2013-04-12T01:48:04.123
> 
> 标签：c++

是否可以在运行时动态选择要转换的类型？

例如，假设我有：

`ClassType * pointer=static_cast<ClassType*>(baseClassPointer);`

但是，在运行时，我想选择它是什么`ClassType`，而不是将其硬编码到函数中。

这可能吗？我想我想使用它的两种方法是传递一个`char *`包含我要使用的类型名称的实际值，或者以某种方式从现有类中提取类型信息并将其用作强制转换。

我想这样做的原因是我有几个来自公共基类的派生类。我可以获得每个派生类的基类的基本功能，但是如果我想要一个指针来访问仅存在于派生类中的某些特定功能，我需要像这样转换该指针。而且我想要一个函数，允许我为任何派生类动态地进行这种转换。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:54:41.013

每当您需要静态向上投射时，模板可能可以满足您的目的。

```
template <typename TTo> derived_cast ( BaseClass* b ) { 
     static_assert( std::is_base_of<BaseClass, TTo>::value, "You can't cast to a class that's not derived from BaseClass!" );
     return static_cast<TTo*>( b );
} 
```

然后语法变得更加压缩：

```
 Derived* d = derived_cast<Derived>( b ); 
```

确保`TTo`实际派生的 static_assert 等等。

现在，对于运行时，您必须使用`dynamic_cast`，但这涉及到您所拥有的代码所暗示的其他内容。

***编辑：***超越这一点是一种疯狂的龙。

在 C++ 中，动态转换和操作对象（在编译时不知道该类型）是不可能的，除非使用健壮的基类*或* `if/else`某种运行时标识符，*然后*提供静态类型信息。在几乎所有情况下，您最好只`virtual`在基类上使用一个方法，然后在派生类中覆盖它们。当您必须不断添加额外的情况时，打开字符串和其他东西不仅缓慢而且痛苦：不要这样做。但是，如果你不理会我的建议，这里有一些你可以使用的内置部件来获得你想要的东西：

`typeid`- 定义实现定义但对类唯一的对象 ( `type_info`) 的运算符，该对象与该类进行唯一比较。您可以比较它们`typeid( Dog) == typeid( Dog )`并正确获得真/假。这将为您提供一些运行时键入信息。

`dynamic_cast`- 在向上转换或转换为某种类型的类时失败的转换（简化定义，更多信息请参见[cppreference on`dynamic_cast`](http://en.cppreference.com/w/cpp/language/dynamic_cast)）。您可以使用它来动态转换指针和其他类似的东西，它会`null`在转换失败时返回。它在这里可能对您有所帮助，但您仍然需要静态地了解您正在使用的类型（例如，在打开 typeid 之后）。

有了这两个，您可以更好地实现您在另一个答案中看到的`string`用法。但仅此而已。其他任何事情都需要诸如`boost::variant`更强大的基类或不同的设计之类的东西。一个更强大的基类听起来像是你可以在这里使用的，但我不能 100% 肯定地说。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T02:04:02.453

即使您可以在运行时执行此操作（我认为您做不到），您将如何处理返回的派生类指针？您在编写代码时不知道会返回什么类型的对象，那么您怎么知道可以调用哪些方法呢？

我认为您最好将虚拟方法添加到您的基类以捕获必要的功能，或者您可以使用[Visitor Pattern](http://en.wikipedia.org/wiki/Visitor_pattern)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T01:53:11.113

坏设计被发现！重写你的派生类怎么样？你在搞一些非常危险的事情

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T01:54:20.103

例如，如果您有基类 Animal，并且您有派生类 Dog 和 Cat，您总是可以将 Animal 转换为 Dog 或 Cat（如果您知道它是哪一个）：

```
void doCustomOperation(Animal *animal, string runtimeDecision) {
    if (runtimeDecision == "dog") {
        ((Dog *)animal).bark();
    }
    if (runtimeDecision == "cat") {
        ((Cat *)animal).chaseMouse();
    }
} 
```

# apache-flex - 使用 as3svgrendererlib 在 flex 中渲染 svg 时类型强制失败

> ID：15961792
> 
> 赞同：0
> 
> 时间：2013-04-12T01:49:10.583
> 
> 标签：apache-flex, svg, type-coercion

我正在使用 as3svgrendererlib 在运行时在 flex 中显示 svg 文件。

我正在使用以下代码来执行此操作。

```
ProcessExecutor.instance.initialize(stage);
var svg:SVGDocument = new SVGDocument();
svg.parse(re.result as String);
addChild(svg); 
```

我在运行时收到以下错误。

```
TypeError: Error #1034: Type Coercion failed: cannot convert      com.lorentz.SVG.display::SVGDocument@110fdeb9 to mx.core.IUIComponent.
at mx.core::Container/http://www.adobe.com/2006/flex/mx/internal::addingChild()[C:\autobuild\3.2.0\frameworks\projects\framework\src\mx\core\Container.as:3259]
at mx.core::Container/addChildAt()[C:\autobuild\3.2.0\frameworks\projects\framework\src\mx\core\Container.as:2207]
at mx.core::Container/addChild()[C:\autobuild\3.2.0\frameworks\projects\framework\src\mx\core\Container.as:2140]
at mpt.project::GanttChartPopUP/createGanttChartResultHandler()[G:\MPT\MPT_Current_Code\CUB\MPTToolKit_UI\src\mpt\project\GanttChartPopUP.mxml:64]
at mpt.project::GanttChartPopUP/___GanttChartPopUP_Operation1_result()[G:\MPT\MPT_Current_Code\CUB\MPTToolKit_UI\src\mpt\project\GanttChartPopUP.mxml:74]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at mx.rpc::AbstractOperation/http://www.adobe.com/2006/flex/mx/internal::dispatchRpcEvent()[C:\autobuild\3.2.0\frameworks\projects\rpc\src\mx\rpc\AbstractOperation.as:198]
at mx.rpc::AbstractInvoker/http://www.adobe.com/2006/flex/mx/internal::resultHandler()[C:\autobuild\3.2.0\frameworks\projects\rpc\src\mx\rpc\AbstractInvoker.as:193]
at mx.rpc::Responder/result()[C:\autobuild\3.2.0\frameworks\projects\rpc\src\mx\rpc\Responder.as:43]
at mx.rpc::AsyncRequest/acknowledge()[C:\autobuild\3.2.0\frameworks\projects\rpc\src\mx\rpc\AsyncRequest.as:74]
at NetConnectionMessageResponder/resultHandler()[C:\autobuild\3.2.0\frameworks\projects\rpc\src\mx\messaging\channels\NetConnectionChannel.as:515]
at mx.messaging::MessageResponder/result()[C:\autobuild\3.2.0\frameworks\projects\rpc\src\mx\messaging\MessageResponder.as:199] 
```

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:58:04.547

得到了解决方案。

在此处引用此链接[Stack Overflow Question](https://stackoverflow.com/questions/9562697/flextype-coercion-failed-cannot-convert-flash-displayloader47262f1-to-mx-co?rq=1)

现在我的代码就像

```
ProcessExecutor.instance.initialize(stage);
var svg:SVGDocument = new SVGDocument();
svg.parse(re.result as String);
uic.addChild(svg);

<mx:UIComponent id="uic" width="100%" height="100%"/> 
```

# mysql - mysql改变表关系级联

> ID：15961794
> 
> 赞同：3
> 
> 时间：2013-04-12T01:49:14.683
> 
> 标签：mysql

我有这段代码来改变表关系但我想添加级联更新和删除操作我需要添加级联更新级联删除到这段代码

```
ALTER TABLE product_images
ADD FOREIGNKEY (product_id) REFERENCES products(product_id) 
```

这是一对多的关系我希望我的代码是正确的开始。我有一个 products 表和一个 product_images 表，其中每个产品都有很多图像

更新

```
ALTER TABLE product_images
ADD FOREIGN KEY (product_id) REFERENCES products(product_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:51:09.033

需要指定这些参考操作。[`RESTRICT`是默认的](http://lists.mysql.com/mysql/134872)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T03:59:03.983

我使用了它并且它工作正常：

```
ALTER TABLE tb1
ADD CONSTRAINT relationship_name FOREIGN KEY fieldName REFERENCES tb2(fieldName); 
```

# node.js - NodeJS 和 socket.io 聊天自定义

> ID：15961796
> 
> 赞同：1
> 
> 时间：2013-04-12T01:49:20.540
> 
> 标签：node.js, socket.io

我有一个使用 NodeJS、express 和 socket.io 的基本聊天系统。现在我想让服务器每 5 秒将日期插入到聊天流中。由于这不是由用户发起的，因此我在基本请求方面遇到了麻烦。我是 NodeJS 的新手，也许这只是我不理解的语法问题。无论如何，使用此当前代码，只有在有人发送聊天消息后才会插入日期。我希望这在服务器端自动发生。如果没有人聊天，日期仍将每 5 秒发送给客户端。我的问题很可能源于评论部分标题：“我如何在这里获得我的定期计时器......”相反，我试图将它插入到它说的底部 - “//***本部分发出通知...” 我是否以不同的方式构建功能或其他什么？提前致谢。

服务器.js

```
var express = require('express'),
app = express()
, http = require('http')
, server = http.createServer(app)
, io = require('socket.io').listen(server);

// listen for new web clients:
server.listen(8080);

app.get('/', function (req, res) {
res.sendfile(__dirname + '/index.html');
});         

app.get('/sio/socket.io.js', function (req, res) {
res.sendfile('/root/nodejs/node-v0.10.0/node_modules/socket.io/lib/socket.io.js');
});     

//How do I get my periodic timer in here so it can send the date every 5 seconds?
io.sockets.on('connection', function (socket) {
   socket.on('sendMessage', function (data) {
     socket.broadcast.emit('message', data);
     socket.emit('message', { text: '<strong>'+data.text+'</strong>' });   
   });   
});

// Periodic Running
var coolerInterval = function(func, interval, triggerOnceEvery) {
var startTime = new Date().getTime(),
    nextTick = startTime,
    count = 0;
triggerOnceEvery = triggerOnceEvery || 1;

var internalInterval = function() {
    nextTick += interval;
    count++;
    if(count == triggerOnceEvery) {
        func();
        count = 0;
    }
    setTimeout(internalInterval, nextTick - new Date().getTime());
};
internalInterval();
};

coolerInterval(function() {
showdate = new Date().getTime();
console.log( showdate );
  //Go ahead and send a notification to everyone.

  //***This section sends out the notification that a pick was made
    io.sockets.on('connection', function (socket) {
      socket.on('sendMessage', function (data) {
        socket.broadcast.emit('message', showdate);   
      });  
    });
  //***End sending out notification.    

}, 1000, 5);
//End Periodic 
```

这是浏览器中的 html - index.html

```
<html> 
   <body>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script>
          $(document).ready(function () {
            var socket = io.connect('http://dev.mysite.com:8080');
            socket.on('message', function (data) {
              $('#chat').append(data.text + '<br />');
            });

            $('#send').click(function () {
              socket.emit('sendMessage', { text: $('#text').val() });
              $('text').val('');
            });

          });
        </script>

        <div id="chat" style="width: 500px; height: 300px; border: 1px solid black">

        </div>    

        <input type="text" name="text" id="text">
        <input type="button" name="send" id="send" value="send">
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T02:16:49.347

它比你做的要简单得多。您可以将Interval( **)**设置为 5 秒，然后调用**io.sockets.emit()**，这会将消息发送到所有连接的套接字。

```
setInterval(function() {
    io.sockets.emit('message', (new Date()).getTime());
}, 5000); 
```

在第 18 行执行此操作，并删除下面的所有内容。

# php - 部署中的登录问题，为什么？

> ID：15961801
> 
> 赞同：0
> 
> 时间：2013-04-12T01:49:52.807
> 
> 标签：php, cakephp

我是 cakephp 的新手……我做了一个网络应用程序并部署到 hostgator，它给了我这个错误

```
Missing Method in UsersController
Error: The action index.html is not defined in controller UsersController 
```

我上传了没有登录部分的同一项目的旧版本，它工作正常......

我不知道我的错误在哪里，我想它在登录部分。
[这是](http://www.endyourif.com/cakephp-2-x-login-system/)我从中复制代码的示例登录页面。

我的应用控制器

```
class AppController extends Controller {  
    public $components = array('Auth', 'Paginator', 'Session', 'Search', 'RequestHandler');

    public $helpers = array('Html',
                            'Js' => array('Jquery'),
                            'Session');

    public function beforeFilter() {
        $this->Auth->loginRedirect = '/';
        $this->Auth->authError = 'You must be logged in to view this page.';
    }   
} 
```

用户控制器

```
class UsersController extends AppController {
    public $name = 'Users';
    public $uses = array('User');
    public $components = array('Auth' => array(
                                 'loginAction' => array(
                                     'controller' => 'users',
                                     'action' => 'login',
                                  ),
                                 'authError' => 'Did you really think you are allowed to see that?',
                                 'authenticate' => array('Form')
                              )
                         );

    public  function logout() {
        $this->redirect($this->Auth->logout());
    }

    public function login() {
        if ($this->request->is('post')) {
            $loggedIn = $this->Auth->login();
            if ($loggedIn) {                
                         return $this->redirect($this->Auth->redirect());
                //Success
            } else {
                $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');

            }
        }
    } 
```

登录.ctp

```
 <?php
         echo $this->Session->flash('auth');
        echo $this->Form->create('User', array('action' => 'login'));
        echo $this->Form->input('username');
       echo $this->Form->input('password');
       echo $this->Form->end('Login');

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T13:14:49.980

您必须访问 http://users/index

但是，您没有一个名为“索引”的操作来访问它。您可以尝试访问 http://users/login

您还必须参考 isAuthorized () 并查看是否需要这样做。在您的 AppController 中，您现在可以添加以下内容：

```
 public function isAuthorised (){
   return (true);
} 
```

可能需要进行其他更改。

# android - 在Android EditText中，如何强制写大写？

> ID：15961813
> 
> 赞同：166
> 
> 时间：2013-04-12T01:51:23.220
> 
> 标签：android, android-edittext, uppercase

在我的 Android 应用程序中，我有不同`EditText`的用户可以输入信息的位置。但我需要强制用户用大写字母书写。你知道这样做的功能吗？

* * *

## 回答 #1

> 赞同：373
> 
> 时间：2014-08-29T15:26:29.270

Android 实际上有一个[内置的 InputFilter](http://developer.android.com/reference/android/text/InputFilter.AllCaps.html)！

```
edittext.setFilters(new InputFilter[] {new InputFilter.AllCaps()}); 
```

小心，`setFilters` **将重置通过 XML 设置的所有其他属性**（即`maxLines`，，`inputType`... `imeOptinos`）。为了防止这种情况，请将您的过滤器添加到现有的过滤器中。

```
InputFilter[] editFilters = <EditText>.getFilters();
InputFilter[] newFilters = new InputFilter[editFilters.length + 1];
System.arraycopy(editFilters, 0, newFilters, 0, editFilters.length);
newFilters[editFilters.length] = <YOUR_FILTER>;  
<EditText>.setFilters(newFilters); 
```

* * *

## 回答 #2

> 赞同：130
> 
> 时间：2013-10-24T02:04:16.743

如果你想~~强制用户在 EditText 中~~*默认*使用大写字母，你只需要添加`android:inputType="textCapCharacters"`. （用户仍然可以手动更改为小写。）

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-04-12T01:57:28.093

仅通过 XML 强制大写锁定是不可能的。第三方库也无济于事。您可以`toUpper()`在接收端对文本执行 a 操作，但无法在键盘端阻止它

您可以使用 XML 将键盘设置为大写锁定。

**爪哇**

您可以将 设置`input_type`为 `TYPE_CLASS_TEXT| TYPE_TEXT_FLAG_CAP_CHARACTERS`。`keyboard`应该尊重这一点。

**科特林**

`android:inputType="textCapCharacters"`

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-04-12T05:02:36.873

您可以使用两种方式。

**第一种方式：**

`android:inputType="textCapSentences"`在您的 EditText 上设置。

**第二种方式：**

当用户输入数字时，您必须使用文本观察器并将小写字母更改为大写字母。

```
edittext.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {            

    }
        @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {             
    }
    @Override
    public void afterTextChanged(Editable et) {
          String s=et.toString();
      if(!s.equals(s.toUpperCase()))
      {
         s=s.toUpperCase();
         edittext.setText(s);
         edittext.setSelection(edittext.length()); //fix reverse texting
      }
    }
}); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-02-20T10:53:48.310

您可以将该`android:textAllCaps="true"`属性添加到 EditText 中的 xml 文件中。这将强制软输入键盘以全部大写模式出现。您输入的值将以大写形式显示。但是，这并不能确保用户只能输入`UpperCase`字母。如果他们愿意，他们仍然可以回退到小写字母。如果要确保输出`Edittext`全部大写，则必须使用类的`toUpperCase()`方法手动转换输入字符串`String`。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2017-12-13T06:05:36.153

使用输入过滤器

```
editText = (EditText) findViewById(R.id.enteredText);
editText.setFilters(new InputFilter[]{new InputFilter.AllCaps()}); 
```

* * *

## 回答 #7

> 赞同：13
> 
> 时间：2015-04-29T08:20:03.350

您应该将`android:inputType="textCapCharacters"`Edittext 放在 xml 文件中。

* * *

## 回答 #8

> 赞同：13
> 
> 时间：2017-11-07T17:23:24.403

更好... **Kotlin**中的*一个班轮*...

 **```
// gets your previous attributes in XML, plus adds AllCaps filter    
<your_edit_text>.setFilters(<your_edit_text>.getFilters() + InputFilter.AllCaps()) 
```

完毕！

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2013-04-12T02:01:26.590

与其担心处理键盘，为什么不接受任何输入，小写或大写并将字符串转换为大写？

以下代码应该会有所帮助：

```
EditText edit = (EditText)findViewById(R.id.myEditText);
String input;
....
input = edit.getText();
input = input.toUpperCase(); //converts the string to uppercase 
```

这是用户友好的，因为用户不必知道您需要大写字符串。希望这可以帮助。

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2019-06-18T05:02:13.440

对我来说，它通过添加**android:textAllCaps="true"**和**android:inputType="textCapCharacters"**

```
<android.support.design.widget.TextInputEditText
                    android:layout_width="fill_parent"
                    android:layout_height="@dimen/edit_text_height"
                    android:textAllCaps="true"
                    android:inputType="textCapCharacters"
                    /> 
```

* * *

## 回答 #11

> 赞同：9
> 
> 时间：2019-06-10T09:24:41.663

尝试使用以下任何一种代码都可以解决您的问题。

以编程方式：

```
editText.filters = editText.filters + InputFilter.AllCaps() 
```

XML：

```
android:inputType="textCapCharacters" with Edittext 
```

* * *

## 回答 #12

> 赞同：9
> 
> 时间：2018-07-29T14:07:56.483

在**kotlin**中，在 .kt 文件中进行更改：

```
edit_text.filters = edit_text.filters + InputFilter.AllCaps() 
```

使用合成属性直接访问带有 id 的小部件。在 XML 中，为您的编辑文本添加几个标志：

```
<EditText
    android:id="@+id/edit_text_qr_code"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    ...other attributes...
    android:textAllCaps="true"
    android:inputType="textCapCharacters"
    /> 
```

这会将键盘更新为启用大写。

* * *

## 回答 #13

> 赞同：8
> 
> 时间：2014-10-12T02:07:30.360

```
edittext.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {            

    }
        @Override
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                    int arg3) {             
    }
    @Override
    public void afterTextChanged(Editable et) {
          String s=et.toString();
      if(!s.equals(s.toUpperCase()))
      {
         s=s.toUpperCase();
         edittext.setText(s);
      }
      editText.setSelection(editText.getText().length());
    }
}); 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2016-10-19T11:14:15.400

只需这样做：

```
// ****** Every first letter capital in word *********
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="textCapWords"
    />

//***** if all letters are capital ************

    android:inputType="textCapCharacters" 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2019-12-18T11:26:26.627

试试这个代码，它会让你的输入变成大写

```
edittext.setFilters(new InputFilter[] {new InputFilter.AllCaps()}); 
```

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2018-11-17T19:10:29.137

简单的kotlin实现

```
fun EditText.onlyUppercase() {
    inputType = InputType.TYPE_CLASS_TEXT or InputType.TYPE_TEXT_FLAG_CAP_CHARACTERS
    filters = arrayOf(InputFilter.AllCaps())
} 
```

PS它似乎`filters`最初总是空的

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2018-07-10T10:25:28.083

要获得所有资金，请在 XML 中使用以下内容：

```
<EditText
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAllCaps="true"
    android:inputType="textCapCharacters"
/> 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2017-08-16T16:52:23.373

根据接受的答案，此答案的作用相同，但在 Kotlin 中。只是为了方便复制粘贴:·)

```
private fun EditText.autocapitalize() {
    val allCapsFilter = InputFilter.AllCaps()
    setFilters(getFilters() + allCapsFilter)
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2016-07-25T05:58:01.503

要在单击**edittext时获取****大写键盘**，请在您的xml中使用此代码，

 **```
<EditText
    android:id="@+id/et"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:hint="Input your country"
    android:padding="10dp"
    android:inputType="textCapCharacters"
    /> 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2016-08-27T15:45:49.717

我正在使用 Visual Studio 2015/Xamarin 为 Android 5.1 和 Android 6.0 构建我的应用程序（两者都安装了相同的 apk）。

当我`android:inputType="textCapCharacters"`在我的 axml 中指定时，AllCaps 键盘按预期出现在 Android 6.0 上，但不是 Android 5.1。我添加`android:textAllCaps="true"`到我的 axml 中，但在 Android 5.1 上仍然没有 AllCaps 键盘。我设置了一个过滤器`EditText.SetFilters(new IInputFilter[] { new InputFilterAllCaps() });`，当软键盘在 Android 5.1 上显示小写字符时，输入字段现在是 AllCaps。

**编辑：**我观察到并假设与操作系统相关的行为差异实际上是因为***我在测试设备上使用了不同版本的 Google 键盘。*** 一旦我将设备更新到最新的 Google 键盘（在撰写本文时发布于 2016 年 7 月），“全大写”行为在各个操作系统中都是一致的。现在，所有设备在键盘上都显示小写字符，但输入是全部大写，因为`SetFilters(new IInputFilter[] { new InputFilterAllCaps() });`

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2018-11-01T13:40:08.003

Xamarin 相当于 ErlVolton 的回答：

```
editText.SetFilters(editText.GetFilters().Append(new InputFilterAllCaps()).ToArray()); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-09-22T19:28:56.293

### 2021：答案

如果您想获得`EditText`from ，这是唯一的最新答案`EditTextPreference`。

为了更改`EditText`值或属性，您需要`setOnBindEditTextListener`根据新的 AndroidX Kotlin 设置回调。

```
findPreference<EditTextPreference>("key")?.setOnBindEditTextListener {
    it.filters = arrayOf<InputFilter>(InputFilter.AllCaps())
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-05-31T00:59:51.917

提议的解决方案的 Java 1-liner 可以是：

```
editText.setFilters(Lists.asList(new InputFilter.AllCaps(), editText.getFilters())
    .toArray(new InputFilter[editText.getFilters().length + 1])); 
```

注意它需要`com.google.common.collect.Lists`.

* * *

## 回答 #24

> 赞同：-2
> 
> 时间：2017-03-31T13:17:02.413

简单地说，将以下代码添加到您的 xml 文件的 EditText 中。

```
android:digits="ABCDEFGHIJKLMNOPQRSTUVWXYZ" 
```

如果您想同时允许大写文本和数字，请使用以下代码。

```
android:digits="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890" 
```****

# javascript - 在 URL 中导航慢到 id

> ID：15961814
> 
> 赞同：0
> 
> 时间：2013-04-12T01:51:24.440
> 
> 标签：javascript, jquery, url, jquery-animate

在我的主页上，我有一个带有 ID 的菜单，当我单击它时，它会滑动到相应的 div 并且它可以正常工作。

但是当我不在我的主页上并且我单击一个我希望能够转到主页然后滑动到该部分的项目时。

这是我现在使用的代码：

```
$('#mainMenu a').click(function(e){
    e.preventDefault();
    var div = $(this).attr('href');
    if('<?=get_site_url()?>/' == '<?=get_permalink()?>')
    {
        $('html, body').animate({scrollTop:$(div).position().top}, 'slow');
    }
    else
    {
        window.location.href = '<?=get_site_url()?>/'+div;
    }
}); 
```

这很好用，下一部分可以用，但我不能让它滑到 ID 上。

```
if (window.location.hash != "") {
    e.preventDefault();
    $('html, body').animate({scrollTop:$(window.location.hash).position().top}, 'slow');
} 
```

有没有办法可以防止浏览器直接跳转到该部分而不是滑动到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:04:42.647

尝试在开始时滚动到右上角，然后向下滚动：

```
if (window.location.hash != "") {
    $('html, body').scrollTop(0).animate({scrollTop:$(window.location.hash).position().top}, 'slow');
} 
```

此外，删除 e.preventDefault()，因为您没有定义任何名为`e`或`event`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:12:45.070

这就像一个魅力：

```
$('#mainMenu a').click(function(e){
    e.preventDefault();
    var div = $(this).attr('href');
    if('<?=get_site_url()?>/' == '<?=get_permalink()?>')
    {
        $('html, body').animate({scrollTop:$(div).position().top}, 'slow');
    }
    else
    {
        localStorage.setItem("hash", div);
        window.location.href = '<?=get_site_url()?>/';
    }
});

if (localStorage.getItem("hash")!=null) {
    $('html, body').animate({scrollTop:$(localStorage.getItem("hash")).position().top}, 'slow');
    localStorage.removeItem("hash");
} 
```

我没有将哈希值放在我的 url 中，而是将其存储在 localStorage 中，并在我的页面头部检查它是否已设置。

在发布问题后几分钟就建立了这个解决方案，感谢那些帮助我的人:)

# sql - 使用带有变量的 runSQL 将文件列表循环添加到表中

> ID：15961817
> 
> 赞同：1
> 
> 时间：2013-04-12T01:51:36.793
> 
> 标签：sql, ms-access, vba

很难让这个工作。

我正在循环通过对话框生成的文件列表并插入到表中。我无法让变量正常工作。查询表达式中的语法错误（缺少运算符）。

```
Dim SQLCode As String
Dim varFile As Variant

Access.DoCmd.OpenQuery ("ClearFileList")

Set fDialog = Application.FileDialog(1)
With fDialog
    .AllowMultiSelect = True
    .Title = "Select One or More Files"
    .Filters.Clear
    .Filters.Add "Lineviewer Files", "*.CSV"

    If .show = True Then
        For Each varFile In .SelectedItems
            SQLCode = "INSERT INTO Filelist ([FileName]) VALUES (" & varFile & ");"
            Access.DoCmd.RunSQL SQLCode

        Next
    End If
End With 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:59:33.860

字段`[FileName]`和文件名变量`varFile`都应该是文本数据类型。`varFile`因此，请在构建 SQL 语句时的值周围添加引号。这样数据库引擎就会将该值识别为文本。

```
SQLCode = "INSERT INTO Filelist ([FileName]) VALUES ('" & varFile & "');" 
```

另外，您不需要`INSERT`为每个选定的文件构建和执行语句。`dbAppendOnly`您可以使用该选项 将目标表作为 DAO 记录集打开。

```
Dim db As DAO.Database
Dim rs As DAO.Recordset
Set db = CurrentDb
Set rs = db.OpenRecordset("Filelist", dbOpenTable, dbAppendOnly) 
```

然后为每个选定的项目添加一行。

```
For Each varFile In .SelectedItems
    rs.AddNew
    rs!FileName = varFile 
    rs.Update
Next 
```

这种方法可能会更快，尽管您是否会真正注意到差异是值得怀疑的。`FileName`但它巧妙地避免引用所选项目，并且如果您是备忘录数据类型，它将容纳大于 255 个字符的文件路径名。

# php - 组的正则表达式多次捕获

> ID：15961819
> 
> 赞同：1
> 
> 时间：2013-04-12T01:51:46.767
> 
> 标签：php, regex

我正在使用正则表达式来捕获广告的尺寸

源内容是一个 HTML 文件，我正在尝试捕获如下内容：

```
size[200x400,300x1200] (could be 1-4 different sizes) 
```

我正在尝试一个具有不同大小的数组

我的捕获代码如下所示：

```
$size_declaration = array();
$sizes = array();
$declaration_pattern = "/size\[(\d{2,4}x\d{2,4}|\d{2,4}x\d{2,4},){1,4}\]/";
$sizes_pattern = "/\d{2,4}x\d{2,4}/";

$result = preg_match($declaration_pattern, $html, $size_declaration);
if( $result ) {
    $result = preg_match_all($sizes_pattern, $size_declaration[0], $sizes);
    var_dump($sizes);
} 
```

上面的代码产生了可用的结果：

```
$sizes = array(
  [0] => array (
    [0] => '200x400',
    [1] => '300x1200'
  )
) 
```

但这需要相当多的代码。我当时认为可以使用单个正则表达式收集结果，但我找不到有效的结果。有没有办法稍微清理一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:20:18.477

把它变成一个单一的表达式不是很实用；最好把它们分开；第一个表达式找到边界并对内部内容进行基本内容检查，第二个表达式将其分解为各个部分：

```
if (preg_match_all('/size\[([\dx,]+)\]/', $html, $matches)) {
    foreach ($matches[0] as $size_declaration) {
        if (preg_match_all('/\d+x\d+/', $size_declaration, $sizes)) {
            print_r($sizes[0]);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:50:12.060

唯一的方法是重复模式中的 4 个最终尺寸：

```
$subject = <<<LOD
size[523x800]
size[200x400,300x1200]
size[201x300,352x1200,123x456]
size[142x396,1444x32,143x89,231x456]
LOD;

$pattern = '`size\[(\d{2,4}x\d{2,4})(?:,(\d{2,4}x\d{2,4}))?(?:,(\d{2,4}x\d{2,4}))?(?:,(\d{2,4}x\d{2,4}))?]`';

preg_match_all($pattern, $subject, $matches, PREG_SET_ORDER);
foreach ($matches as &$match) { array_shift($match); }

print_r($matches); 
```

也可以使用对捕获组的引用来缩短模式：

```
$pattern = '`size\[(\d{2,4}x\d{2,4})(?:,((?1)))?(?:,((?1)))?(?:,((?1)))?]`'; 
```

或使用 Oniguruma 语法：

```
$pattern = '`size\[(\d{2,4}x\d{2,4})(?:,(\g<1>))?(?:,(\g<1>))?(?:,(\g<1>))?]`'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:14:50.230

这个稍微简单一点：

```
$html = "size[200x400,300x600,300x100]";
if (($result = preg_match_all("/(\d{2,4}x\d{2,4}){1,4}/", $html, $matches)) > 0)
    var_dump($matches);
// 
// $matches => 
//     array(
//          (int) 0 => array(
//              (int) 0 => '200x400',
//              (int) 1 => '300x600',
//              (int) 2 => '300x100'
//          ),
//          (int) 1 => array(
//              (int) 0 => '200x400',
//              (int) 1 => '300x600',
//              (int) 2 => '300x100'
//          )
//     )
// 
```

# java - 在方法中使用 Scanner

> ID：15961823
> 
> 赞同：3
> 
> 时间：2013-04-12T01:52:06.807
> 
> 标签：java, methods, input

我是编程新手，所以如果对此有一个非常简单的答案，我深表歉意，但实际上我似乎找不到任何东西。我在猜数字游戏中使用扫描仪对象进行用户输入。扫描仪在我的 main 方法中声明，并将在一个其他方法中使用（但该方法将在整个地方被调用）。

我试过将它声明为静态的，但 eclipse 对此很合适，不会运行。

```
 public static void main(String[] args) {
    int selection = 0;
    Scanner dataIn = new Scanner(System.in);
    Random generator = new Random();
    boolean willContinue = true;

    while (willContinue)
    {
        selection = GameList();

        switch (selection){
        case 1: willContinue = GuessNumber(); break;
        case 2: willContinue = GuessYourNumber(); break;
        case 3: willContinue = GuessCard(); break;
        case 4: willContinue = false; break;
        }

    }

}

public static int DataTest(int selectionBound){
    while (!dataIn.hasNextInt())
    {
        System.out.println("Please enter a valid value");
        dataIn.nextLine();
    }

    int userSelection = dataIn.nextInt;
    while (userSelection > selectionBound || userSelection < 1)
    { 
        System.out.println("Please enter a valid value from 1 to " + selectionBound);
        userSelection = dataIn.nextInt;
    }

    return userSelection;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T01:56:52.100

您看到这些错误的原因是该方法`dataIn`是*本地*的`main`，这意味着除非您将扫描仪显式传递给该方法，否则没有其他方法可以访问它。

有两种解决方法：

*   将扫描仪传递给`DataTest`方法，或
*   `static`在课堂上制作扫描仪。

以下是通过扫描仪的方法：

```
public static int DataTest(int selectionBound, Scanner dataIn) ... 
```

这是制作`Scanner`静态的方法：替换

```
Scanner dataIn = new Scanner(System.in); 
```

在`main()`与

```
static Scanner dataIn = new Scanner(System.in); 
```

*`main`方法*之外*。*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T01:58:53.497

您不能访问在其他方法中声明的变量，即使是 main 方法。这些变量具有*方法范围*，这意味着它们根本不存在于声明它们的方法之外。您可以通过将 Scanner 的声明移到所有方法之外来解决此问题。这样，它将享受类范围，并且可以在您的主类中的任何地方使用。

```
class Main{

     //this will be accessable from any point within class Main
     private static Scanner dataIn = new Scanner(System.in);

     public static void main(String[] args){ /*stuff*/ }

     /*Other methods*/
} 
```

作为 java 中的一般经验法则，变量不存在`{}`于声明它们的最小对之外（唯一的例外是`{}`定义类的主体）：

```
void someMethod() 
{ 
      int i; //i does not exist outside of someMethod
      i = 122;
      while (i > 0)
      {
           char c; //c does not exist outside of the while loop
           c = (char) i - 48;
           if (c > 'A')
           {
                boolean upperCase = c > 90; //b does not exist outside of the if statement
           }
      }

      {
          short s; //s does not exist outside of this random pair of braces
      }
} 
```*

# css - CSS：如何设置容器大小等于背景图像大小

> ID：15961824
> 
> 赞同：7
> 
> 时间：2013-04-12T01:52:07.770
> 
> 标签：css

我知道如何拉伸背景图像以适合其容器（使用`background-size`属性）。但是如何在不手动设置宽度和高度的情况下实现另一种方式呢？

为了更好地说明我的观点，假设我们有一个`p`带有一行文本的元素，并将其背景图像设置为 800*600 像素的图片。如何`p` **自动**调整宽度和高度为800*600？

我问这个问题是因为我正在寻找更好的工作流程。每次我在 Photoshop 中更改图像大小时，在 CSS 中更改宽度和高度非常烦人。工作流程如下：

1.  在 Photoshop 中更改图像（可能最终图像尺寸略有不同）
2.  记住新维度
3.  进入 CSS 文件寻找使用该图像作为 bg 的特定元素
4.  更改元素的宽度和高度（如果我还记得正确的话..）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T02:32:29.280

您可以使用`img`元素并将包含 div 的显示设置为，而不是使用背景图像`inline-block`。然后，您需要创建一个内部 div 来包装内容并将其绝对相对于包含 div 定位。由于`img`是流中唯一的东西，包含的 div 将相对于图像调整大小。

几乎是一个黑客，但我认为它会产生你正在寻找的效果。

[http://jsfiddle.net/Km3Fc/](http://jsfiddle.net/Km3Fc/)

**HTML**

```
<div class="wrap">
    <img src="yourImg.jpg" />
    <div class="content">
        <!-- Your content here -->
    </div>
</div> 
```

**CSS**

```
.wrap {
    display: inline-block;
    position: relative;
}

.wrap img + .content {
    position: absolute;
    top: 0;
    left: 0;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T02:12:55.473

您唯一的选择是以编程方式添加高度/宽度。Compass for Sass 具有可以在编译 CSS 文件时返回图像尺寸的功能：http: [//compass-style.org/reference/compass/helpers/image-dimensions/](http://compass-style.org/reference/compass/helpers/image-dimensions/)

```
.foo {
    height: image-height('my-img.png');
    width: image-width('my-img.png');
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T01:55:25.503

根据 CSS3 [w3schools](http://www.w3schools.com/cssref/css3_pr_background-size.asp)的文档，应该这样做：

```
div {
    background-size: contain; /* or cover */
} 
```

**编辑：**使用 javascript，您可以从 background-image 属性加载图像并设置容器的大小。

```
(function() {
    var img = new Image();
    var $mydiv = $('#mydiv');
    img.src = $mydiv.css('background-image').slice(4,-1);

    $mydiv.width(img.width).height(img.height);
})(); 
```

# ruby - 使用 RVM 安装 Ruby 版本时配置问题

> ID：15961825
> 
> 赞同：5
> 
> 时间：2013-04-12T01:52:11.917
> 
> 标签：ruby, linux, rvm, debian

RVM 已安装并正在运行。我正在尝试安装 Ruby 2.0，但是我尝试安装的任何版本都会发生这种情况。这是没有 ruby​​ 的全新安装的 rvm。我正在运行 Debian Squeeze。

运行后

```
rvm install 2.0 
```

我收到此错误：

```
Installing Ruby from source to: /home/user/.rvm/rubies/ruby-2.0.0-p0, this may take a while depending on your cpu(s)...
    ruby-2.0.0-p0 - #downloading ruby-2.0.0-p0, this may take a while depending on your connection...
    ruby-2.0.0-p0 - #extracted to /home/user/.rvm/src/ruby-2.0.0-p0 (already extracted)
    ruby-2.0.0-p0 - #configuring...................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................
    Error running './configure --prefix=/home/user/.rvm/rubies/ruby-2.0.0-p0 --disable-install-doc --enable-shared',
    please read /home/user/.rvm/log/ruby-2.0.0-p0/configure.log
    There has been an error while running configure. Halting the installation. 
```

当我阅读 /home/user/.rvm/log/ruby-2.0.0-p0/configure.log 时看到此错误

```
checking if make is GNU make... ./configure: line 18790: make: command
not found no checking for safe null command for make... configure:
error: no candidate for safe null command 
```

然后我运行：

```
rvm install 2.0.0 --autolibs=4 --debug 
```

然后我得到这个错误

```
ruby-2.0.0-p0 - #configuring... Error running './configure
--prefix=/home/user/.rvm/rubies/ruby-2.0.0-p0 --disable-install-doc --enable-shared', please read /home/user/.rvm/log/ruby-2.0.0-p0/configure.log There has been an error while running configure. Halting the installation.
__rvm_rm_rf already gone: /home/user/.rvm/tmp/26623* 
```

我不确定在此之后该怎么做

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-10T02:09:13.337

通常对于某些宝石，您可能还需要

```
apt-get install build-essential 
```

# json - 在服务堆栈中定制序列化/序列化 JSON

> ID：15961826
> 
> 赞同：2
> 
> 时间：2013-04-12T01:52:13.790
> 
> 标签：json, servicestack

我需要从 Service Stack 转换这个漂亮的默认 JSON：

```
{
      "Status": "ok",
      "LanguageArray": [{
      "Id": 1,
      "Name": "English"
      }, {
      "Id": 2,
      "Name": "Chinese"
      }, {
      "Id": 3,
      "Name": "Portuguese"
      }]
     } 
```

对于这个可憎的怪物：

```
{"status":"ok","language":{
     "0":{"id":"1", "name":"English"},
     "1":{"id":"2", "name":"Chinese"},
     "2":{"id":"3", "name":"Portuguese"},
     } 
```

出于我无法控制、定量或逻辑的原因。

我的问题是实现这一目标的最简单方法是什么？我需要对几乎所有数组执行此操作（它们是使用 C# 中的 List 实现的 IEnumerables）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T21:22:16.540

我认为我没有“最简单的方法”，这取决于您需要在哪里进行序列化以及格式的严格程度（区分大小写？间距？）

如果放置您的示例文本并将其转换为这样的类

```
public class Language
{
    public int Id { get; set; }
    public string Name { get; set; }
}

public class OuterLanguage
{
    public string Status { get; set; }
    public IEnumerable<Language> LanguageArray { get; set; }
} 
```

一种非常简单的方法是使用 Dto 来添加用于序列化数组的属性并忽略原始数组。

```
public class OuterLanguageDto
{
    public string Status { get; set; }
    [IgnoreDataMember]
    public IEnumerable<Language> LanguageArray { get; set; }
    public IDictionary<string, Language> language 
    { 
        get { return this.LanguageArray.ToDictionary(x => (x.Id - 1).ToString()); } 
    }
} 
```

当您需要序列化您的类（OuterLanguage）时，您使用 TranslateTo（或您首选的 Mapper）并将值复制到 Dto。

```
var jsonObj = obj.TranslateTo<OuterLanguageDto>();
var jsonStr = new JsonSerializer<OuterLanguageDto>().SerializeToString(jsonObj); 
```

您还可以查看[Custom Serialization](https://github.com/ServiceStack/ServiceStack.Text#custom-serialization-routines)。这将使您有一种方法可以将所有数组序列化为正确的格式。

```
JsConfig<IEnumerable<Language>>.SerializeFn = ToJson

private string ToJson(IEnumerable<Language> arr)
{
    var dict = arr.ToDictionary(x => x.Id - 1);

    var str = JsonSerializer.SerializeToString<Dictionary<int, Language>>(dict);

    return str;
} 
```

但是，我猜您可能需要做一些“魔术字符串工作”来获取自定义序列化数组的 json 字符串并在外部类（本示例中为 OuterLanguage）是被序列化的类时正确格式化它。

# iphone - 带“+”的电话号码与不带“+”的电话号码有区别吗？

> ID：15961831
> 
> 赞同：0
> 
> 时间：2013-04-12T01:53:31.167
> 
> 标签：iphone, ios, objective-c, openurl

带“+”的电话号码与不带“+”的电话号码有区别吗？

我的意思是一个数字，例如`A: +1(510)234-567`and `B:1510234567`。通话的号码是同一个号码吗？我想拨打从通讯录中获取哪个号码的电话。格式为A，使用后，

```
NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"-+() *#"];
txt = [[txt componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""]; 
```

数字格式为 B。

这是一个很好的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:59:18.580

来自维基百科文章*[电话号码计划](http://en.wikipedia.org/wiki/Telephone_numbering_plan)*，*国家代码*：

> 国家代码 - 只有在拨打其他国家的电话时才需要。在国际使用中，电话号码的前缀是国家代码，前面有一个“+”，并用空格代替连字符（例如，“+XX YYY ZZZ ZZZZ”）。这允许读者选择他们需要从他们的位置拨打的访问代码（也称为国际拨号数字）。但是，它通常与拨号字符串中必须在其前面的国际接入代码一起引用，例如在 NANP 国家（包括加拿大、百慕大和美国）中的“011”：“011-XX-YYY-ZZZ- ZZZZ”或大多数欧洲国家/地区的“00”：“00-XX-YYY-ZZZ-ZZZZ”。这可能会导致混淆，因为阅读器所在的位置可能会使用不同的访问代码。在 GSM 网络上，“+”

看起来`+`不是强制性的，但如果有人拨打国际区域，它会很清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-19T00:47:47.040

下面的代码可以帮你解决问题！试试。

```
- (NSURL *)makeCall:(NSString *)number
{
    NSString *txt = number;
    NSString *cleanedString = [[txt componentsSeparatedByCharactersInSet:[[NSCharacterSet characterSetWithCharactersInString:@"0123456789-+()"] invertedSet]] componentsJoinedByString:@""];
    NSURL *telURL = [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@", cleanedString]];
    return telURL;
}

BOOL bCanCall = [[UIApplication sharedApplication]canOpenURL:urlToCall];

if (bCanCall)
{
    UIWebView *callView = [[[UIWebView alloc]init] autorelease];
    [callView loadRequest:[NSURLRequest requestWithURL:urlToCall]];
    [self.view addSubview:callView];
} 
```

# data-binding - Scalatra 数据绑定

> ID：15961832
> 
> 赞同：1
> 
> 时间：2013-04-12T01:53:33.397
> 
> 标签：data-binding, scalatra

我正在使用命令模型绑定，并且查看了示例 github 项目，并且在使用依赖项时遇到了问题：

```
 "org.scalatra" % "scalatra-data-binding" % "2.2.0-RC1" 
```

以示例项目代码为例

```
abstract class TodosCommand[S](implicit mf: Manifest[S]) extends ModelCommand[S] with ParamsOnlyCommand
class CreateTodoCommand extends TodosCommand[Todo] {
  val name: Field[String] = asType[String]("name").notBlank.minLength(3)
}
case class Todo(id: Integer, name: String, done: Boolean = false) 
```

当我使用 CommandSupport 特征中的 command[CreateTodoCommand] 方法时，我无法编译，即

```
scala: type arguments [au.com.xxx.sapi.seo.CreateTodoCommand] do not conform to method command's type parameter bounds [T <: SeoServlet.this.CommandType]
    val cmd = command[CreateTodoCommand]
                     ^ 
```

我对 Scala 不太了解，但我假设 ParamsOnlyCommand 扩展了 Command 并且命令支持特征中有这一行，那么应该没有问题：

```
 type CommandType <: org.scalatra.databinding.Command 
```

任何想法为什么我会遇到这个问题？

干杯，克里斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T07:19:59.683

您遇到问题的原因很可能是我们仍在链接到一个古老的示例版本，文档不再适用。我以为我已经捕获了文档中的所有示例项目并将它们移至[https://github.com/scalatra/scalatra-website-examples](https://github.com/scalatra/scalatra-website-examples)，但显然我错过了这个。麻烦您了！

我会看看我今天是否可以解决这个问题，并提供一个编译示例。同时，您可能会尝试将所有与 Scalatra 相关的依赖项更新到 2.2.0 版本 - 看看是否可以立即修复任何问题。

Scalatra 的最新稳定版本目前是 2.2.1，但你需要小心命令，因为我记得 @casualjim 说过他在 2.2.0 和 2.2.1 之间改变了某种程度的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T07:32:55.913

在 Scalatra 2.2.1 中， "org.scalatra" %% "scalatra-commands" % "2.2.0" 我没有问题。但我不知道 scalatra-data-binding 也是独立的。

# c++ - 如何在 DOD 之后创建多层感知器？或者如何存储动态分配的数组？

> ID：15961835
> 
> 赞同：0
> 
> 时间：2013-04-12T01:53:42.980
> 
> 标签：c++, perceptron, data-oriented-design

首先，我对 DOD 的这个概念很陌生，虽然对它很陌生，但从程序员的角度来看，我发现它真的很令人兴奋。

不久前，我为自己制作了一个多层感知器作为 OO 项目，并且由于我现在正在学习 DOD，所以我认为使用这种范例来制作它会很好。

```
struct Neuron
{
    double bias;
    double error;
};

struct Layer
{
    Neuron* neurons;
    double* output;
    double** connections;
    unsigned numberNeurons;
};

struct Network
{
    unsigned numberInput;
    double* input;
    std::vector<Layer*> hidden;
    Layer*  output;
}; 
```

我知道它可能不是（而且几乎肯定不是）最好的格式，但我试图将我在不同图层数组中使用得更多的东西分开。但是数组的存储方式确实让我很感兴趣，因为它们应该作为一个结构堆叠在一起，以便更快地读取内存（或者我错过了什么？）。如果我没记错的话， new[] 将数组分配在内存中的某个位置，并且只存储指向该位置的指针，而结构中的静态数组将在其空间内分配。

基于此，我想到了制作层（和网络）模板结构：

```
template<unsigned n_neurons, unsigned n_connections>
struct Layer
{
    Neuron neurons[n_neurons];
    double output[n_neurons];
    double connections[n_neurons][n_connections];
    static const unsigned numberNeurons = n_neurons;
}; 
```

但是，如果 Layer 变成了这样的东西，是否有任何方法可以制作具有任意数量隐藏层的 Network 可变参数模板？还是我对静态数组的理解是错误的？创建此类数组（和访问时间）之间有什么区别吗？我的钥匙在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T16:33:41.977

虽然使用 C 风格的数组`Layer`意味着它们将在`struct`是否会提高性能的范围内进行分配，这取决于您访问数据的方式，并且通常在您开始遇到性能问题之前您不想过多担心优化。这就是为什么我想知道你为什么不使用`std::vector`它会对性能造成很小的影响，而且你不必跟踪大小或担心分配。否则很难对性能进行概括，它将是特定于应用程序的，您应该根据基准确定最佳方法。

至于为此示例使用 a`variadic template`应该`Network`可以让您很好地了解如何使其工作：

```
template<unsigned n_neurons, unsigned n_connections>
struct Network
{
    unsigned numberInput;
    double* input;
    std::vector<Layer<n_neurons,n_connections>*> hidden;
    Layer<n_neurons,n_connections>*  output;

    template <typename... Args>
    void helper( Layer<n_neurons,n_connections>* layer) 
    {
       std::cout << "final helper" << std::endl ;
       std::cout << layer->numberNeurons << std::endl ;
    }

    template <typename... Args>
    void helper( Layer<n_neurons,n_connections>* layer, Args... args) 
    {
       std::cout << "helper" << std::endl ;
       std::cout << layer->numberNeurons << std::endl ;
       helper( args... ) ;
    }

    template <typename... Args>
    Network(Args... args)
    {
       std::cout << "Network ctor()" << std::endl ;
       helper( args... ) ;
    }
};

int main()
{
   Network<10,5> N1( new Layer<10,5>(), new Layer<10,5>(), new Layer<10,5>() ) ;
} 
```

# ios - 在 UINavigationController 中前进

> ID：15961836
> 
> 赞同：0
> 
> 时间：2013-04-12T01:53:44.650
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller

我有 2 个视图，A 和 B。A 是表格视图，B 是详细视图。当在视图 A 中点击一个单元格时，会在视图 B 中加载适当的数据，我使用 [self.navigationcontroller pushviewcontroller] 来呈现它。这一切都很好，但是如果用户按下第 10 行，让视图 B 加载，返回并再次按下第 10 行，我希望它只是前进到已经加载的视图 B。导航控制器总是列出堆栈中只有一个视图。我是否必须手动将视图保存到导航控制器才能重新呈现？该项目使用 ARC 和 Storyboard，如果这有所不同的话。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:06:33.073

为此，您甚至不必关心自己`navigationcontroller`。在您的位置和居住地中有一个`UIViewController`变量（比如说`lastViewController`） 。`ViewController1``viewA``viewB`

在将`ViewController2`详细视图存储在`lastViewController`. 当您弹回并按下另一行时，检查它是否相同的 viewController 并显示相同的 viewController。

但我建议不要使用这种方法。保持简单，让我们`ViewControllerB`再次加载。可能会出现再次加载优先的情况，因为它可能会向用户显示更多最新信息 row10。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:26:30.193

你看到的行为是正确的！当需要 ViewController B 时，它会被创建并推送到导航控制器的堆栈中，我们会看到视图 B。当用户返回 ViewController A 并看到视图 A 时，不再需要 ViewController B，它和它的视图都会消失不存在了。

这是高效且轻量级的，并且非常有意义。一旦你回到 ViewController A 和视图 A，谁知道用户现在将点击哪一行？如果用户点击第 10 行并返回到 A，点击第 10 行并返回到 A，一遍又一遍，一个新的 ViewController B 将被创建并且每次都不存在。所以呢？从用户的角度来看，它是完全一致的；它*看起来*像同一个视图B！这才是最重要的。你*不想*回到*同一个*视图 B；您想重新创建视图 B。这就是你所做的。

确实，这就是 iOS 的天才之处。通过一个小屏幕，它可以让视图来来去去，而不会给内存和其他资源带来负担。

有关您在此处使用的 UINavigationController 架构的更多信息（主-详细信息），请参阅我的书：[http ://www.aeth.com/iOSBook/ch19.html#_navigation_controllers](http://www.apeth.com/iOSBook/ch19.html#_navigation_controllers)

# php - NGINX 重写 php 参数

> ID：15961840
> 
> 赞同：0
> 
> 时间：2013-04-12T01:54:09.307
> 
> 标签：php, nginx, url-rewriting, args

我在带有 php5-fpm 的 Ubuntu 10.4 上使用 NGINX 1.2.3。

```
http://example.com/step2.php?qid=RAUVGXF 
```

我想改写 `/step2.php?qid=RAUVGXF` 为 `/step2/RAUVGXF`

我怎样才能做到这一点？

我的 NGINX 配置的一部分如下所示：

```
root /var/www;

location ~ .php$ {
fastcgi_param HTTPS on;
try_files $uri =404;
fastcgi_split_path_info ^(.+\.php)(.*)$;
fastcgi_pass   unix:/var/run/php5-fpm.sock;
fastcgi_param  SCRIPT_FILENAME  /var/www$fastcgi_script_name;
include /etc/nginx/fastcgi_params;
fastcgi_index index.php;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T01:57:25.550

尝试：

```
rewrite ^/step2/ /step2.php?qid= last; 
```

# c++ - 类中的函数定义是否占用了类大小的一部分？

> ID：15961843
> 
> 赞同：2
> 
> 时间：2013-04-12T01:54:39.963
> 
> 标签：c++

认为：

```
Class A{
  float one;
  float two;
  float three;
 //... many, many member functions, and maybe static functions too ..
  } 
```

我可以假设，**无论这个类中有多少函数**，以下内容*通常*应该是正确的：

`sizeof(A)==sizeof(float)*3`

这样我什至可以断言：

`static_assert(sizeof(A) == sizeof(float) * 3, "Your class is padding memory.");`

这是准确的吗？

现在，假设 A 类继承自另一个类。我认为上述情况*不*正确，而是您必须在`sizeof`断言中添加基类中 ivars 的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:08:05.817

如果“A 类”具有虚函数或派生自具有虚方法的类，则无法通过手动汇总数据成员来准确确定 sizeof(A)。

这是因为编译器插入了一个名为 v-pointer 的隐藏指针，它指向 v-table。

如果你有虚拟基类，事情会变得更加复杂，因为隐藏的 v-base-pointer 可能会被编译器插入。

此外，这些隐藏指针在多态 C++ 对象的内存模型中插入的位置在编译器实现中会发生变化（因为这些细节不是 C++ 标准的一部分）。这就是为什么我们无法实现使用 C++ 开发的应用程序的二进制接口兼容性（编译一次并在所有平台上重用）的原因之一。（同样，这是发明 .Net 和 Java 的另一个原因！）。

简而言之，“C++”中多态类的内存模型与“C”不匹配（这就是我们在 C++ 中使用 extern“C”的原因之一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T01:59:00.067

```
many, many member functions, and maybe static functions too 
```

如果你的类`A`包含虚函数，那么

```
sizeof(A)==sizeof(float)*3 
```

不会是真的，因为`vtable/vptr`.

# jquery - 使用 jquery 设置 asp.net 标签的值并在 ASP.NET 中的 Page_Load 事件上访问它

> ID：15961848
> 
> 赞同：0
> 
> 时间：2013-04-12T01:55:00.000
> 
> 标签：jquery, asp.net

我有两个页面，一个是item.aspx，一个是details.aspx。现在 details.aspx 中有一个 asp.net 标签。我在页面正文中的标签之后使用 jquery 将项目的名称放在该标签中。

在 details.aspx 的页面加载上，标签显示项目的名称。它工作正常。但是我必须将值带到后端 c# ，而 Label.Text 无法读取。

当**我使用 Firebug 检查值时，跨度标签值为空**，但标签显示浏览器中的项目名称。可能是因为页面加载事件首先发生，然后 jquery 代码正在为标签设置项目名称。我们可以做一些工作来解决这个问题，以便我可以在 Page_Load 事件上使用 Label.Text 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T03:06:22.043

当请求被发送到服务器时，页面加载背后的代码发生在服务器上。

而 jquery 文档就绪发生在 window.onload 事件上，该事件发生在完整的 HTML 文档在浏览器中准备好显示时发生。

您可以使用 jquery 代码来设置标签文本。

**更新：**

```
<script>
        $(document).ready(function () {

            $("#Label1").html("chamara");
            $("#Label2").html($("#Label1").text());
        });
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:01:25.540

正如@tymeJV 所说，Hiddenfield 应该可以工作。

我不确定您是否在 document.ready 中设置隐藏字段的值。

您可能想在下面尝试。

```
<input type="hidden" id="hdnProductName" runat="server" readonly="readonly"/> 
```

如上所示将其设为只读并在客户端分配值，它将保留该值，您也可以将其设置为服务器端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T05:14:58.167

您可以使用 ASP 隐藏字段并在查询中分配它。

```
$hidden = ("#<% hiddenID.ClientID %>")
$hidden.val(" label value here") 
```

然后您可以在后面的代码中看到隐藏字段。很抱歉简短的回答，通过电话发布。

# android - Android - 从 URL 下载 json 数据

> ID：15961852
> 
> 赞同：0
> 
> 时间：2013-04-12T01:55:17.000
> 
> 标签：android, json, url, download

我使用 Google Directions API 来获取位置之间的时间，并且我试图将数据从 URL 获取到 JSON 对象中，以便我可以解析它以获得我需要的数据。网址是：

[http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false)

我使用意图访问此 URL。

```
String url = "http://maps.googleapis.com/maps/api/directions/json?origin=Chicago,IL&destination=Los+Angeles,CA&waypoints=Joplin,MO|Oklahoma+City,OK&sensor=false"
Intent intent = new Intent(android.content.Intent.ACTION_VIEW, Uri.parse(url));
startActivity(intent); 
```

这会在浏览器中显示 json 数据，我想将其放入 json 对象中，这样我就可以使用我需要的任何数据：

```
JSONObject durationObject = null; 
durationObject = jsonObject.getJSONObject("duration"); 
```

我在网上查过这个，但我尝试的一切最终都会崩溃或无法正常工作。下面是一些我尝试过但不起作用的代码。由于执行了 if 语句，因此没有任何内容最终写入 String 结果。

```
InputStream is = null;
String result = "";
JSONObject jsonObject = null;
try {   
    HttpClient httpclient = new DefaultHttpClient(); // for port 80 requests!
    HttpPost httppost = new HttpPost(url);
    HttpResponse response = httpclient.execute(httppost);
    HttpEntity entity = response.getEntity();
    is = entity.getContent();

    // Read response to string
    BufferedReader reader = new BufferedReader(new InputStreamReader(is,"utf-8"),1024);
    StringBuilder sb = new StringBuilder();
    String line = "";
    while ((line = reader.readLine()) != null) {
    sb.append(line + "\n");
    }
    is.close();
    result = sb.toString(); 

    if (result.isEmpty()) { 
        result = "nothing"; 
        Toast msg = Toast.makeText(getBaseContext(), result, Toast.LENGTH_LONG);
    msg.show();
    }
 // Convert string to object

    jsonObject = new JSONObject(result); 
```

这是 logcat 输出：

```
04-16 18:38:42.965: W/dalvikvm(9331): threadid=1: thread exiting with uncaught exception (group=0x40c371f8)
04-16 18:38:42.975: E/AndroidRuntime(9331): FATAL EXCEPTION: main
04-16 18:38:42.975: E/AndroidRuntime(9331): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.MainActivity}: android.os.NetworkOnMainThreadException
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.os.Looper.loop(Looper.java:137)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.ActivityThread.main(ActivityThread.java:4507)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at java.lang.reflect.Method.invokeNative(Native Method)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at java.lang.reflect.Method.invoke(Method.java:511)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at dalvik.system.NativeStart.main(Native Method)
04-16 18:38:42.975: E/AndroidRuntime(9331): Caused by: android.os.NetworkOnMainThreadException
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1099)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at java.net.InetAddress.lookupHostByName(InetAddress.java:391)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:242)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at java.net.InetAddress.getAllByName(InetAddress.java:220)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:137)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at com.example.test.MainActivity.onCreate(MainActivity.java:93)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.Activity.performCreate(Activity.java:4465)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
04-16 18:38:42.975: E/AndroidRuntime(9331):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
04-16 18:38:42.975: E/AndroidRuntime(9331):     ... 11 more 
```

我正在研究它，它似乎与启用的严格模式有关。有关如何解决此问题的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:38:34.847

这是我正在使用的工作代码

```
 private DefaultHttpClient httpclient = new DefaultHttpClient();

    public JSONObject getObjectInfo(String requestURL) throws Exception {

    JSONObject responseObject = null;
    Log.d(getClass().getSimpleName(), "HttpClient: getObjectInfo: "
            + requestURL);
    HttpGet httpget = new HttpGet(requestURL);
    HttpResponse response;
    try {
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        Log.d(getClass().getSimpleName(), "HttpClient: getObjectInfo: "
                + "respondreceived");
        if (entity != null) {
            InputStream instream = entity.getContent();
            Log.d("httpclient",
                    "HttpClient: getObjectInfo: converting to string");
            String jsonObjectString = Conversion
                    .convertStreamToString(instream);

            try {
                responseObject = new JSONObject(jsonObjectString);
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IllegalStateException e1) {
        e1.printStackTrace();
    } finally {

    }
    return responseObject;
} 
```

流转字符串的方法：

```
 public static String convertStreamToString(java.io.InputStream is) {

    try {
        return new java.util.Scanner(is).useDelimiter("\\A").next();
    } catch (java.util.NoSuchElementException e) {
        return "";
    }
} 
```

话虽如此，我建议使用 Jakson 库从收到的 json 对象创建一个类。[这](http://www.mkyong.com/java/how-to-convert-java-object-to-from-json-jackson/)是一个如何使用 Jakson 库的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T00:26:58.433

这里发生的事情很常见，您正试图在应用程序的主线程上执行一些长时间运行的操作。

这意味着，主线程负责更新 UI，以强制执行流畅的体验，如果 android 检测到您正在执行一些将阻塞的长时间运行操作，它将强制关闭应用程序，让您知道这很糟糕。

有许多替代解决方案，例如 AsynTask 或 IntentService。

IntentService 是在您向其发送意图时运行的服务：

```
public class NetworkHandler extends IntentService {
    @Override
    protected void onHandleIntent(Intent intent) {
         //Do what Saeid Farivar is saying here
    }
} 
```

要激活 IntentService，只需执行以下操作：

```
Intent intent = new Intent(mContext, NetworkHandler.class);
startService(intent); 
```

# c++ - BOOST_FUSION_ADAPT_TPL_STRUCT 和模板数组大小

> ID：15961855
> 
> 赞同：4
> 
> 时间：2013-04-12T01:55:18.417
> 
> 标签：c++, templates, boost, struct, boost-fusion

[由于BOOST_FUSION_ADAPT_TPL_STRUCT](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/adapted/adapt_tpl_struct.html)，我正在尝试迭代 C++ 模板结构。我的结构包含固定大小的多维数组，其大小是模板参数。如果我们考虑修改 Boost 的示例以适应我的问题：

```
#include <iostream>
#include <string>
#include <boost/fusion/adapted/struct/adapt_struct.hpp>
#include <boost/fusion/include/adapt_struct.hpp>

// Example:
// http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/adapted/adapt_tpl_struct.html

namespace demo
{
    template<typename T, unsigned int SIZE1, unsigned int SIZE2, typename Name, typename Age>
    struct employee
    {
        Name name;
        Age age;
        T ar[SIZE1][SIZE2];
    };
}

// Any instantiated demo::employee is now a Fusion sequence
BOOST_FUSION_ADAPT_TPL_STRUCT(
    (T)(SIZE1)(SIZE2)(Name)(Age),
    (demo::employee) (T)(SIZE1)(SIZE2)(Name)(Age),
    (Name, name)
    (Age, age)
    (T, ar[SIZE1][SIZE2]))

int main()
{
    demo::employee<float, 2, 2, std::string, int> e;
    e.name = "Bob";
    e.age = 25;
    e.ar[0][0] = e.ar[1][0] = 0.1;
    e.ar[0][1] = e.ar[1][1] = 0.2;
} 
```

编译失败。此外，如果我们只添加一个整数模板参数而不使用它作为数组大小，它也会失败。

这甚至可能`BOOST_FUSION_ADAPT_TPL_STRUCT`吗？如果没有，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:06:23.167

来自[文档](http://www.boost.org/doc/libs/1_53_0/libs/fusion/doc/html/fusion/adapted/adapt_tpl_struct.html)：

> 序列 (template_param0)(template_param1)... 声明了使用的**模板类型参数**的名称。

虽然您有**非类型模板参数** `SIZE`：

```
template<typename T, unsigned int SIZE, typename Name, typename Age>
struct employee 
```

您可以将其转换为类型模板参数并[`boost::mpl::int_`](http://www.boost.org/doc/libs/1_53_0/libs/mpl/doc/refmanual/int.html)用作进位大小的包装器。

现在，您的代码已[**编译**](http://liveworkspace.org/code/2NP3b4)。

```
template<int Size>
struct Array
{
    template<typename T>
    struct Of
    {
        typedef T type[Size];
    };
};

namespace demo
{
    template<typename T, typename SIZE, typename Name, typename Age>
    struct employee
    {
        Name name;
        Age age;
        T ar[SIZE::value];
    };
}

// Any instantiated demo::employee is now a Fusion sequence
BOOST_FUSION_ADAPT_TPL_STRUCT(
    (T)(SIZE)(Name)(Age),
    (demo::employee) (T)(SIZE)(Name)(Age),
    (Name, name)
    (Age, age)
    (typename Array<SIZE::value>::template Of<T>::type, ar))

 //...
 demo::employee<float, int_<2>, std::string, int> e; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T03:57:41.490

在与 Evgeny Panasyuk 进行了长时间的交谈后，我最终做了一些不同的事情。因为我希望能够对数据结构进行一些简单的算术运算，所以我决定使用`Eigen::Map`而不是`Boost::multi_array`因为它提供了广泛的运算符以及清晰的文档。

因此，较高级别的循环`boost::fusion::for_each`由 Eigen 处理，较低级别的循环由 Eigen 处理。数组线性映射到特征向量。大小在`data_eigen`的构造函数中传递。

```
#include <iostream>

#include <boost/fusion/adapted/struct/adapt_struct.hpp>
#include <boost/fusion/include/adapt_struct.hpp>
#include <boost/fusion/algorithm/iteration/for_each.hpp>
#include <boost/fusion/include/for_each.hpp>
#include <boost/bind.hpp>

#include <Eigen/Core>

namespace demo
{
template<typename T, int SIZE1, int SIZE2>
struct data
{
    T ar1[SIZE1][SIZE2];
    T ar2[SIZE1][SIZE2];
};

template<typename T>
struct EigenMap
{
    typedef Eigen::Map<Eigen::Matrix<T, Eigen::Dynamic, 1> > type;
};

template<typename T>
struct data_eigen
{
    template <int SIZE1, int SIZE2>
    data_eigen(data<T,SIZE1,SIZE2>& src)
        : ar1(typename EigenMap<T>::type(&src.ar1[0][0], SIZE1*SIZE2)),
          ar2(typename EigenMap<T>::type(&src.ar2[0][0], SIZE1*SIZE2))
    {
    }

    typename EigenMap<T>::type ar1;
    typename EigenMap<T>::type ar2;
};

struct print
{
    template<typename T>
    void operator()(const Eigen::Map<Eigen::Matrix<T, Eigen::Dynamic, 1> >& t) const
    {
        std::cout << t.transpose() << std::endl;
    }
};

struct scalarMult
{
    template<typename T, typename U>
    void operator()(T& t, U& u) const
    {
        t *= u;
    }
};

}

BOOST_FUSION_ADAPT_TPL_STRUCT
(
    (T),
    (demo::data_eigen) (T),
    (typename demo::EigenMap<T>::type, ar1)
    (typename demo::EigenMap<T>::type, ar2)
)

int main()
{
    typedef float REALTYPE;
    const int SIZE1 = 2;
    const int SIZE2 = 2;

    // Basic data structure with multidimensional arrays
    demo::data<REALTYPE, SIZE1, SIZE2> d;
    for (unsigned int i = 0; i < SIZE1; ++i)
        for (unsigned int j = 0; j < SIZE2; ++j)
        {
            d.ar1[i][j] = (i+1)*(j+1);
            d.ar2[i][j] = i + j;
        }

    // Eigen::Map + BOOST_FUSION_ADAPT_TPL_STRUCT
    demo::data_eigen<REALTYPE> eig_d(d);

    std::cout << "d:" << std::endl;
    boost::fusion::for_each(eig_d, demo::print());
    std::cout << std::endl;

    boost::fusion::for_each(eig_d, boost::bind<void>(demo::scalarMult(), _1, 2.0));
    std::cout << "2 * d:" << std::endl;
    boost::fusion::for_each(eig_d, demo::print());
    std::cout << std::endl;
} 
```

# c# - 获取资源管理器库中的所有目录

> ID：15961859
> 
> 赞同：10
> 
> 时间：2013-04-12T01:55:37.690
> 
> 标签：c#

如何将所有库位置添加到“我的音乐”？

对于此示例，我已将这些目录添加到库中：

```
E:\My Music
E:\Mp3 
```

我试过了：

```
Environment.GetFolderPath(Environment.SpecialFolder.MyMusic); 
```

但它返回：

```
C:\Users\MyUser\Music 
```

![](https://i.stack.imgur.com/lmyLy.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T08:00:56.373

添加到媒体播放器的任何库都应该在`AppData`目录中结束。

```
Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + @"\Microsoft\Windows\Libraries\Music.library-ms" 
```

也许这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T08:03:30.987

您是否正在尝试开发 Windows 应用商店应用程序？如果是，请按照[此处的建议尝试使用 Windows.Store 库](https://stackoverflow.com/questions/15098527/getting-a-list-of-all-the-environment-specialfolder-mymusic-folders)

MSDN：http: [//msdn.microsoft.com/it-it/library/windows/apps/windows.storage.knownfolders.musiclibrary](http://msdn.microsoft.com/it-it/library/windows/apps/windows.storage.knownfolders.musiclibrary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-06T09:14:29.647

我做了类似的事情，并在另一个 StackOverflow 问题中[使用 Windows API 代码包发布了完整的代码解决方案。](https://stackoverflow.com/a/31241361/277601)在您的情况下，您会发现以下代码：

```
 ICollection<IKnownFolder> allSpecialFolders = Microsoft.WindowsAPICodePack.Shell.KnownFolders.All; 
```

然后遍历这些文件夹以找到符合您需要的文件夹：

```
 string fpath = "";
    // Iterate over each folder and find the one we want
    foreach ( var folder in allSpecialFolders )
    {
        if ( folder.ParsingName == foldername )
        {
            // We now have access to the xml path
            fpath = folder.Path;
        }
    }

    if ( fpath == "" )
        return null;

    var intFolders = GetLibraryInternalFolders(fpath);

    return intFolders.Folders.ToList(); 
```

然后使用该`GetLibraryInternalFolders()`函数返回其中的多个文件夹。无论如何，请在另一个问题上查看我的完整代码解决方案。

# linux - Linux内核定时器..clock_event_device等

> ID：15961861
> 
> 赞同：1
> 
> 时间：2013-04-12T01:56:00.987
> 
> 标签：linux, timer, linux-kernel

有人可以向我解释一下 linux 计时器，尤其是下面的这些问题吗？

1.  如果我们提出一个新硬件（基于 ARM），我注意到我们可能需要注册一个新的计时器硬件。我们如何知道哪个定时器硬件用于调度程序或其他目的？

2.  广播定时器和它的用途是什么？我注意到我们需要它来从深度空闲（如 C3 状态）中唤醒，但它是如何“唤醒”系统的呢？

3.  您如何将计时器硬件注册为广播计时器？

4.  计时器本身可能注册了一些硬件（clockevents_register_device）......我们如何知道哪个用于哪个？

5.  而且，什么是本地计时器和全局计时器？

谢谢。任何解释都很棒。我只是在这里感到困惑。

# java - Android NDK，构建时找不到头文件

> ID：15961864
> 
> 赞同：0
> 
> 时间：2013-04-12T01:56:37.520
> 
> 标签：java, android, android-ndk, java-native-interface

使用 Android NDK 时，A.cpp 是我的入口点。

```
LOCAL_MODULE    := A
LOCAL_SRC_FILES := A.cpp 
```

但是 A.cpp 包括在子目录中找到的其他文件。

*   A.cpp 包含 dir1/B.cpp 语句 #include "B.cpp"
*   B.cpp 包含带有语句#include "C.cpp" 的 dir2/C.cpp

这会导致在编译期间找不到包含。

修复它的唯一方法是更改​​它是在语句中添加子文件夹：

```
#include "dir1/B.cpp" 
```

是否有无需将子文件夹添加到所有语句的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T01:59:32.567

`-I`使用命令行选项将 dir1 添加到包含路径

```
LOCAL_CFLAGS := -I./dir1 
```

# php - 在php中使用jquery ajax在加载页面上显示记录

> ID：15961867
> 
> 赞同：0
> 
> 时间：2013-04-12T01:57:02.680
> 
> 标签：php, jquery

我想在页面加载时加载数据，但如果我尝试这样做，则删除功能不起作用，每当我插入效果时，应该在表中看到效果而不刷新页面请检查我的代码在此要进行哪些更改

索引.php

```
<script src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.min.js" type="text/javascript"></script>
    <script type="text/javascript">
    $(document).ready(function(e) {
        $("#Submit").click(function(e) {

        var name = $('#name').val();        
        var message=$('#message').val();
        if($(":text").val().length==0)                      
        {
            $(":text").after('<span class="error">Field cannot be empty</span>');   
            $('#name').addClass('error');   
            $('#message').addClass('error');                
            return;
        }
        else{
            $('#name').removeClass('error');
            $('#message').removeClass('error');
            //$('#propspectDiv').removeClass('error');                          
            $('#propspectDiv').html('Submitting your Request.<img src="ajax.gif" />');  
            $.ajax({
                    url : 'data.php',                   
                    data:{
                        "name" : name,
                        "message" : message             
                    },
                    success : function(data){
                        window.setTimeout(function(){
                            $('#propspectDiv').html('Your Name is added to our records'); 
                            $('#data').css("display","block");  
                            $('#data').html(data);              
                        }, 2000);
                    },
                    complete:function(){
                    $('#myform').each(function(){
                    this.reset();   
                });
           }
                });
        }

        });

    $("a").click(function() {
       $.post('delete.php',{ id: $(this).attr("id")});
    }); 
    });

    </script>

    </head>
    <body>
    <form id="myform">
    <div id="wrapper">
     Name :    <input type="text" id="name"  />
                   </br>
     Message : <input type="text" name="message" id="message" />
                   </br>

        <input type="button" value="Submit"  id="Submit" />
        <div id="propspectDiv"></div>
        <table id="data" border="1" style="display:none;"></table>
    </div>
    </form>
    </body> 
```

数据.php

```
<?php
$name = $_REQUEST['name'];
$message = $_REQUEST['message'];
include('connection.php');

$sql = "INSERT INTO login (username,message) VALUES ('$name','$message')";

if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }

    $sqlnew = 'Select * from login order by id ASC';
    $res = mysql_query($sqlnew);
    echo'<tr>';
    echo'<td>SrNo.</td>';
    echo '<td>Name:</td>';
    echo '<td>Message:</td>';
    echo '<td>Delete</td>';
    echo'</tr>';
    $i=1;
    while($row = mysql_fetch_array($res))
    {
        echo '<tr>';
        echo'<td>'.$i.'</td>';
        echo'<td>'.$row['username'].'</td>';
        echo '<td>'.$row['message'].'</td>';
        echo"<td id=td1>
          <a href=delete.php?id=".$row['id']."&type=Delete>Delete</a></td>"; 
        echo '</tr>';
        $i++;
    }

?> 
```

删除.php

```
<?php
include('connection.php');

  if(isset($_REQUEST["id"]))
  {
  $cmd=mysql_query("delete from login where id=" .$_REQUEST["id"] .";");
   header("location: index.php");
  }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:00:49.053

看起来您正在获取链接的 ID 属性，但没有设置它...

```
$("a").click(function() {
   $.post('delete.php',{ id: $(this).attr("id")});
}); 
```

您现有的删除链接上没有 ID 属性：

```
 <a href=delete.php?id=".$row['id']."&type=Delete>Delete</a></td>"; 
```

另外-当jquery click事件完成所有工作时，您可能不需要指向delete.php的链接href。

此外，由于您通过 jquery 插入 html（包括删除方法），您可能需要使用“on”事件

我正在即兴做这个，所以代码可能有一些小错误，但我相信这是你想要采取的路径......

修改后可能如下所示：

**查询**

```
$("a").on("click", function(e) {
  e.preventDefault(); 
  $.post('delete.php',{ id: $(this).attr("id")});
  return false;
}); 
```

**关联**

```
echo"<td id=td1>
    <a id='".$row['id']."' href='#'>Delete</a>"; 
echo '</tr>'; 
```

需要注意的几件事...

1 - 在我删除相应的表行之前，我实际上并没有验证记录是否被删除 - 你可能想要实现一些东西来检查这个

2 - 删除表格行的替代方法是通过重新提取数据并输出它来更新表格 - 如果你知道我的意思

# c - 基础 C 程序，巴比伦算法

> ID：15961868
> 
> 赞同：1
> 
> 时间：2013-04-12T01:57:13.030
> 
> 标签：c, algorithm, math, integer, double

我是 C 语言的新手，正在尝试做一个我们在 uni 提供的实验室教程。

我们被要求做以下事情：

任务 1\. 计算数字 n 的平方根的巴比伦算法如下： 1\. 猜测答案（您可以选择 n/2 作为初始猜测）。

1.  计算 r = n / 猜测
2.  设置猜测 = (猜测 +r) / 2
3.  根据需要返回步骤 2 进行尽可能多的迭代。步骤 2 和 3 重复的次数越多，猜测就越接近 n 的平方根。

编写一个程序，为 n 输入一个整数，对巴比伦算法进行五次迭代，并将答案输出为小数点后两位。对于较小的 n 值，您的答案将是最准确的。

这是我写的：

```
#include <stdio.h>
#include <math.h>

int n;

main(void){
    printf("Enter a value for n: ");
    scanf("%d",&n);
    double guess = n / 2;
    for (int i = 0; i < 5; i++) {
        double r = n / guess;
        double guess = (guess + r) / 2;
    }
    printf("%d",guess);
} 
```

我哪里出错了？它吐出荒谬的结果；例如，如果我输入“4”作为 n，答案应该在“2”左右，但每次都会给出不同的巨大结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:10:55.310

另一种解决方案是：

```
guess = guess / 2.0; 
```

这将“强制”进行浮点运算。

并且变量`guess`已经在范围内。你不能重新声明它（就像你在循环中所做的那样）。您只能将其设置为新值。

而且您还需要将其更改`printf`为：

```
printf("%f",guess); 
```

检查此链接以获取有关 printf 格式化程序的更多信息：

[http://www.cplusplus.com/reference/cstdio/printf/](http://www.cplusplus.com/reference/cstdio/printf/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T01:59:39.477

巴比伦算法对我来说似乎不正确，应该是这样的，

```
 int i;
   float n,guess=1;

   printf("\nEnter the Number: ");
   scanf("%f",&n);
   for(i=0;i<PRECISION;i++)
   {
       guess=(guess+n/guess)/2;
   }
   printf("\nThe Square root of %f is %f",n,guess); 
```

您的程序中还有其他可能的错误，

可能存在整数除法的问题，

线`double guess = n / 2;`

应该`double guess = (double) n / 2;`

也`printf()`应该是`printf("%lf",guess);`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T02:00:12.200

这里有一些问题。

`guess`首先，您已经确定了循环内部的第二个实例的范围。拿走`double`那条线上的声明。所以它应该变成：

```
guess = (guess + r) / 2; 
```

其次，因为`guess`是`double`你需要在调用中使用`%f`而不是。`%d``printf`

```
printf( "%f", guess ); 
```

* * *

一旦你得到它的工作，考虑运行算法，直到达到一定的准确性。

```
const double epsilon = 0.0001;
double guess = (double)n / 2.0;
double r = 0.0;
while( fabs(guess * guess - (double)n) > epsilon )
{
    r = (double)n / guess;
    guess = (guess + r) / 2.0;
} 
```

# java - 获取对象类并实例化新实例

> ID：15961870
> 
> 赞同：5
> 
> 时间：2013-04-12T01:57:19.003
> 
> 标签：java, reflection, subclass

我希望做类似的事情：

```
SubClass c = var.getClass();
SuperClass varCopy = new SubClass(); 
```

换句话说，我知道 varCopy 的超类在编译时会是什么，但我不确定哪个子类会被实例化。有没有办法在 Java 中做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-12T02:03:10.837

你可以按照这些思路做一些事情。

```
Class<? extends SuperClass> clazz = var.getClass();
SuperClass varCopy = clazz.newInstance(); 
```

请注意，`clazz.newInstance()`如果它没有默认的空构造函数，则会抛出 IllegalAccessException。

# c# - 如何告诉 [Authorize] 属性使用带有自定义消息处理程序的基本身份验证？

> ID：15961875
> 
> 赞同：1
> 
> 时间：2013-04-12T01:57:37.873
> 
> 标签：c#, asp.net-mvc, security, asp.net-web-api, authorization

我正在阅读 Badri L. 撰写的*Pro ASP .NET Web API 安全*性中的第 8 章，尝试为将由 HTTP/JS 客户端使用的 Web 应用程序实现基本身份验证。

我已将以下身份验证处理程序添加到我的 WebAPI 项目中：

```
public class AuthenticationHandler : DelegatingHandler
    {
        private const string SCHEME = "Basic";
        protected async override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,
                                                                               System.Threading.CancellationToken
                                                                                   cancellationToken)
        {
            try
            {
                // Request Processing
                var headers = request.Headers;
                if (headers.Authorization != null && SCHEME.Equals(headers.Authorization.Scheme))
                {
                    Encoding encoding = Encoding.GetEncoding("iso-8859-1");
                    // etc 
```

当我使用 [Authorize] 在我的 API 中装饰方法并在`if`上面的语句中设置断点时，`headers.Authorization`在第一次请求时为 null。如果我继续这个休息时间，if 语句会再次被击中，这次`headers.Authorization.Scheme`是“协商”，而不是“基本”：

![在此处输入图像描述](https://i.stack.imgur.com/MKSEp.png)

我已经在 WebApiConfig 中注册了我的处理程序：

```
config.MessageHandlers.Add(new AuthenticationHandler()); 
```

但是我不知道为什么 Authorize 属性不尊重基本身份验证，或者为什么 - 因为该方案不是“基本”并且`if()`我的处理程序返回`false`- 我应该从我的 API 控制器获取数据得到`401 Unauthorized`.

我没有在我的 web.config 中指定任何 authenticationType。

知道我做错了什么吗？

编辑：完整处理程序：

```
public class AuthenticationHandler : DelegatingHandler
    {
        private const string SCHEME = "Basic";
        protected async override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request,
                                                                               System.Threading.CancellationToken
                                                                                   cancellationToken)
        {
            try
            {
                // Request Processing
                var headers = request.Headers;
                if (headers.Authorization != null && SCHEME.Equals(headers.Authorization.Scheme))
                {
                    Encoding encoding = Encoding.GetEncoding("iso-8859-1");
                    string credentials = encoding.GetString(Convert.FromBase64String(headers.Authorization.Parameter));
                    string[] parts = credentials.Split(':');
                    string userId = parts[0].Trim();
                    string password = parts[1].Trim();
                    // TODO: Authentication of userId and Pasword against credentials store here
                    if (true)
                    {
                        var claims = new List<Claim>
                            {
                                new Claim(ClaimTypes.Name, userId),
                                new Claim(ClaimTypes.AuthenticationMethod, AuthenticationMethods.Password)
                            };
                        var principal = new ClaimsPrincipal(new[] {new ClaimsIdentity(claims, SCHEME)});
                        Thread.CurrentPrincipal = principal;
                        if (HttpContext.Current != null)
                            HttpContext.Current.User = principal;
                    }

                }

                var response = await base.SendAsync(request, cancellationToken);
                // Response processing
                if (response.StatusCode == HttpStatusCode.Unauthorized)
                {
                    response.Headers.WwwAuthenticate.Add(new AuthenticationHeaderValue(SCHEME));
                }
                return response;
            }
            catch (Exception)
            {
                // Error processing
                var response = request.CreateResponse(HttpStatusCode.Unauthorized);
                response.Headers.WwwAuthenticate.Add(new AuthenticationHeaderValue(SCHEME));
                return response;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T07:43:12.853

> 当我使用 [Authorize] 装饰 API 中的方法并在上面的 if 语句处设置断点时，headers.Authorization 在第一次请求时为空。

这是意料之中的。这就是它应该如何工作的方式。浏览器仅在收到 401 时才会显示弹出窗口以从用户那里获取凭据。后续请求将具有带有基本方案中凭据的授权标头。

> 如果我继续这个休息时间，if 语句会再次被击中，这次是 headers.Authorization.Scheme 作为“Negotiate”，而不是“Basic”：

是的，正如 Dominick 所回答的（是 Dominick 吗？），您启用了 Windows 身份验证，这就是您从浏览器获取协商方案的原因。您必须在配置中或使用 IIS 管理器禁用所有身份验证方法。

> 但是我不知道为什么 Authorize 属性不尊重基本身份验证，或者为什么 - 因为该方案不是“基本”并且我的处理程序中的 if() 返回 false - 我正在从我的 API 控制器获取数据当我应该得到 401 Unauthorized 时。

Authorize 属性对基本身份验证一无所知。它只关心身份是否经过身份验证。由于您启用了匿名身份验证（我猜是这种情况），因此 Authorize 属性很高兴，并且消息处理程序响应处理部分没有 401 来添加 WWW-Authenticate 响应标头，指示 Web API 在基本方案中需要凭据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T06:53:48.117

看起来您在 IIS 中为您的应用启用了 Windows 身份验证。禁用配置中的所有身份验证方法（system.web 和 system.webServer）并允许匿名，因为您在消息处理程序中进行了自己的身份验证。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T03:14:51.117

我认为您需要在 global.asa 上注册处理程序

这篇文章看起来不错：[http ://byterot.blogspot.com.br/2012/05/aspnet-web-api-series-messagehandler.html](http://byterot.blogspot.com.br/2012/05/aspnet-web-api-series-messagehandler.html)

你的 global.asa.cs 会是这样的：

```
public static void Application_Start(GlobalFilterCollection filters) {
   //...
   GlobalConfiguration.Configuration.MessageHandlers.Add(new AuthenticationHandler());
} 
```

# cuda - nVIDIA 驱动程序如何将设备索引分配给 GPU？

> ID：15961878
> 
> 赞同：2
> 
> 时间：2013-04-12T01:58:05.250
> 
> 标签：cuda, nvidia

假设在单个节点上，有几个具有不同计算能力的设备，nvidia 如何对它们进行排名（我的排名是指 cudaSetDevice 分配的数字）？

有没有关于这方面的一般指导方针？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T02:41:56.797

[我相信与cudaGetDevice](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__DEVICE_1g2c4d7ed289cf972eb9e21296ea19b669)和[cudaSetDevice](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__DEVICE_1g418c299b069c4803bfb7cab4943da383)对应的设备的顺序（即 CUDA 运行时枚举顺序应该基于确定最快设备并使其成为第一的启发式算法，或者基于[PCI 枚举顺序。您可以使用](http://en.wikipedia.org/wiki/PCI_configuration_space#Bus_enumeration)[deviceQuery 示例](http://docs.nvidia.com/cuda/cuda-samples/index.html#device-query)确认这一点，它根据为 cudaSetDevice 枚举的顺序打印设备的属性（包括 PCI ID）。

但是，我建议不要以此为基础做出任何决定。PCI 枚举顺序并没有什么神奇之处，甚至系统 BIOS 升级之类的事情都可以改变设备枚举顺序（交换设备、移动到另一个系统等）

通常最好查询设备（请参阅 deviceQuery 示例），然后根据返回的特定设备和/或其属性做出决定。您还可以使用[cudaChooseDevice](http://docs.nvidia.com/cuda/cuda-runtime-api/index.html#group__CUDART__DEVICE_1g028e5b0474379eaf5f5d54657d48600b)启发式地选择设备。

您可以使 CUDA 运行时根据CUDA 8 中的[环境变量](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#env-vars)设置（或缺少）选择“Faster First”或“PCI Enumeration Order” 。

# jquery - JQuery 淡出/隐藏以前的 DIVS

> ID：15961879
> 
> 赞同：2
> 
> 时间：2013-04-12T01:58:16.407
> 
> 标签：jquery, hidden, fadeout

我正在尝试创建一个简单的页面，其中 3 个 div 与各种内容相互重叠。每个 DIV 中都有一个图像（一个 NEXT 按钮），它应该淡出最初显示的 DIV，并淡入第二个 DIV。在第 2 个 DIV 内，是另一个 FadeOut DIV 2 和 FadeIn DIV 3 的 NEXT 按钮。

我在隐藏之前显示的 DIV 时遇到了问题，并且所有 3 个最终都将所有内容都显示在彼此之上。

请帮忙：

```
<!DOCTYPE html>
<html>
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js">
</script>
</head>

<style>
div {
width:80px; 
display:none;
height:80px; 
z-index : 1;
position: fixed; 
top: 20px; 
left: 20px; 
}

div#one { background:#f00; }
div#two { background:#0f0; }
div#three { background:#00f; }

form {
    border: thick solid #1D4600;
        height: 500px;
}
</style>
</head>

<body>
<form>
    <div id="one" style="display:inline !important">
<input type="text" name="textfield" id="textfield" />
<img src="test.gif" width="95" height="72" class="nextlink"></div>

    <div id="two"><a href="#">link2</a>
<img src="test.gif" width="95" height="72" class="nextlink">
<input type="text" name="textfield" id="textfield" />
</div>

    <div id="three">Other text</div>
</form>

<script>
  $("img.nextlink").click(function(event) {
  $("div:hidden:first").fadeIn("slow");
 });
</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:25:19.007

也许是这样的？代码可以用来清理，但这应该让你有一个好的开始

```
$("div:first").show();

$("img.nextlink").click(function(event) {
   $(this).parent().hide();
    if ($(this).parent().next("div").length == 0) {
        $("#one").fadeIn("slow");
    }
    else
    {
        $(this).parent().next("div").fadeIn("slow");
    }
}); 
```

**演示：http:** [//jsfiddle.net/CK9H8/](http://jsfiddle.net/CK9H8/)

# android - 说话时如何写下语音识别结果？

> ID：15961880
> 
> 赞同：0
> 
> 时间：2013-04-12T01:58:19.760
> 
> 标签：android, speech-recognition

我正在使用传统的语音识别 Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH); 一切都很好，没问题。

但是，现在，我想在我的应用程序中写下用户仍在说话时的语音识别结果，就像语音输入那样。我能怎么做？

谢谢

# css - Foundation 3 - 下拉菜单下推页面，如何防止这种情况？

> ID：15961889
> 
> 赞同：2
> 
> 时间：2013-04-12T00:12:31.627
> 
> 标签：css

我正在使用 Foundation 3 构建一个响应式站点，并且我有一个下拉菜单，当屏幕尺寸较小时，它会向下推内容而不是覆盖下面的内容。我不确定为什么会发生这种情况，或者我可能做了什么导致这种情况。

有问题的网站在[这里](http://blue.bcwebinc.com/~minerals/)。该网站还有其他一些问题，但这是让我非常困惑的问题。

修复它的最佳方法是什么，以便下拉菜单不会压低其余内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T01:45:43.373

不确定您是否正在寻找特定于您的框架的解决方案，但这里是我为满足您的要求所做的更改。

```
.nav-bar.right {
  position:absolute;
  z-index:100;
  background-color:#fff;
  top:5px;
  border:2px solid #ccc;
  border-top-width:0px;
}

.top-bar.expanded {
  overflow:visible;
} 
```

似乎工作得很好（我只在 Chrome 26 中测试过）。随意调整，你需要！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-23T04:22:53.023

对于 Foundation 5，我刚刚为自己创建了这个 hack，我想 id 分享一下。

```
.top-bar.expanded {
    overflow:visible;
}
.top-bar-section ul {
    position: absolute;
    right: 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-30T10:38:47.110

只需添加：

```
<nav class="top-bar" data-options="scrolltop: false"> 
```

或初始化：

```
$(document).foundation('topbar', {scrolltop: false}); 
```

阻止所有可怕的跳跃

# php - 我使用这个 PHP 代码错了吗？（使用条纹）

> ID：15961895
> 
> 赞同：4
> 
> 时间：2013-04-12T01:59:39.673
> 
> 标签：php, stripe-payments

我正在使用 Stripe 作为支付网关。我可以成功获得 Stripe 所称的卡的“令牌”，此处对此进行了解释： [https](https://stripe.com/docs/checkout#api) ://stripe.com/docs/checkout#api 很好。我在我的条带仪表板中成功收到了令牌。现在我需要做的是实际向该卡（令牌）收费。他们是这样说的：“您已经获得了用户的信用卡详细信息，现在怎么办？现在您向他们收费。这发生在您的服务器上，最快的方法是使用我们的客户端库之一。” 好吧，他们在该页面上提供了所需的 php：

```
 // Set your secret key: remember to change this to your live secret key in          production
       // See your keys here https://manage.stripe.com/account
        Stripe::setApiKey("sk_test_68YYnDTKPzcxxRZbkxEJtOVq");

        // Get the credit card details submitted by the form
        $token = $_POST['stripeToken'];

        // Create the charge on Stripe's servers - this will charge the user's card
         try {
          $charge = Stripe_Charge::create(array(
           "amount" => 1000, // amount in cents, again
             "currency" => "usd",
             "card" => $token,
              "description" => "payinguser@example.com")
               );
                } catch(Stripe_CardError $e) {
               // The card has been declined
                } 
```

你可以在这里看到他们是如何解释的： [https ://stripe.com/docs/tutorials/charges](https://stripe.com/docs/tutorials/charges)

这就是事情出错的地方。1) 在这段代码中，哪里真正指出了要收取什么卡？！我的私人仪表板中有卡的令牌 ID 号。我现在需要给它充电，但这段代码并没有说明这张卡的任何信息。我看到的唯一地方是：

```
 $token = $_POST['stripeToken']; 
```

'stripeToken' 我要在这里输入卡的 ID 号吗？

2）我创建了一个简单的页面来运行它：

```
 <div id="payment">

    <form action="charge-cards.php">
        <?php require 'Stripe.php';?>

        <input type="submit">
</form>

</div><!--end payment--> 
```

“charge-cards.php”是 Stripe 提供的顶部代码。当我点击提交时，我收到以下错误：

```
 Fatal error: Class 'Stripe' not found in /home/preemin/public_html/fun.dit       /testing/charge-cards.php on line 5 
```

谁能看到我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-12T16:32:47.670

我认为值得退后一步，回顾一下基础知识。首先，为了提供安全的信用卡交易，并确保 PCI 合规性，Stripe 提供了一个 javascript 库来加密和传输敏感的信用卡数据。他们提供了一个[示例表格](https://stripe.com/docs/tutorials/forms)

请注意表单没有提交操作这一事实。还要特别注意没有一个敏感卡字段具有名称属性的事实。除了他们提供的安全方法之外，不得通过任何其他方式提交*此*表格。尝试这样做会使您承担责任。

当您提交该表单时，使用他们提供的 js 类（请参见[步骤 2](https://stripe.com/docs/tutorials/forms)），它会返回您说您已经拥有的卡令牌。您可以将该卡令牌存储在您的数据库中而不会出现任何安全问题——它只是一个任意数字，对黑客来说没有任何意义。

获得该令牌后，您有两个选择：

1.  立即使用它进行一次性充电，或
2.  存储它并创建一个可以多次收费的客户对象。

您需要意识到的是，**Stripe 不存储该卡令牌！**如果你失去了它，你就无法找回它。你必须生成一个新的。此外，**您可以将其用于多次收费的唯一方法是创建一个客户对象**。换句话说，除非您将其存储在客户对象上，否则它只适用于一次充电。因此**，如果您在将其附加到客户对象之前对其进行收费，则它不再有效**。

现在再次回到基础，正如 IOIO MAD 所描述的，您必须在要从中调用 Stripe 方法的任何 php 文件的顶部做两件事：

1.  包括 Stripe php 库
2.  设置密钥

唯一使用公钥的时间是当您进行 javascript 调用以提交卡片表单时。

如果你想立即给卡充值，你必须右转并回叫服务器，发送你刚刚回来的卡哈希。您可以使用 ajax 来执行此操作，或者将其粘贴在随后发布的表单字段中。第 3 步向您展示了一种可以执行此操作的方法。

但是让我们假设您想在实际为卡充电之前做其他事情。为了扩展您的示例，假设我已经在一个页面上收集了我的客户卡，然后在我的结帐页面上，我想提交费用：

```
<?php
require('path/to/Stripe.php'); // MUST be done before any Stripe:: call
Stripe::setApiKey("sk_test_mkGsLqEW6SLnZa487HYfJVLf");

// retrieve stored card hash. Could have got it to this page in any number of
// ways, including: stored in cookie, stored in session, stored in database.
// Let's assume stored in session for sake of simplicity of example

$cardHash = $_SESSION['stripeToken'];
?>
<div id="payment">
    <form action="charge-cards.php">
        <?php require 'Stripe.php';?>
        <input name="stripeToken" type="hidden" value="<?= $cardHash ?>" />
        <input type="submit">
    </form>
</div> 
```

提交此表单后，charge-cards.php 将从变量中获取`$cardHash`，`$_POST`因此您将遵循[Stripe 给出的示例](https://stripe.com/docs/tutorials/charges)：

```
<?php
require('path/to/Stripe.php'); // MUST be done before any Stripe:: call
Stripe::setApiKey("sk_test_mkGsLqEW6SLnZa487HYfJVLf");

// Get the credit card details submitted by the form
$token = $_POST['stripeToken'];

// Create the charge on Stripe's servers - this will charge the user's card
try {
    $charge = Stripe_Charge::create(array(
    "amount" => 1000, // amount in cents, again
    "currency" => "usd",
    "card" => $token,
    "description" => "payinguser@example.com")
    );
} catch(Stripe_CardError $e) {
    // The card has been declined
}
?> 
```

如果您仍然遇到问题，请使用适当的调试技巧来检查您的 $_POST 变量是否包含卡片哈希。如果一切都失败了，请联系 Stripe 客户支持。他们的 API 是一流的，他们的文档和支持也是如此。

EDIT 4/15/13 OP 正在使用[快速结帐方法](https://stripe.com/docs/checkout#api)并使用自定义按钮。以上大部分内容仍然适用。

自定义按钮部分中概述的代码为自定义按钮分配了一个单击处理程序，该处理程序返回一个回调函数，当执行该函数时，将隐藏的输入附加到表单，将 stripeToken 分配给该字段，然后提交表单。就在提交表单之前，console.log 或提醒 stripeToken 以确保您具有合法值：

```
$('#customButton').click(function(){
  var token = function(res){
    var $input = $('<input type=hidden name=stripeToken />').val(res.id);

    // alert the value of stripeToken
    alert('stripeToken = ' + res.id);

    $('form').append($input).submit();
}; 
```

这将与此结合使用：

```
<form action="/charge" method="post">
  <script src="https://checkout.stripe.com/v2/checkout.js" class="stripe-button"
      data-key="pk_test_yourprivatekeyhere"></script>
</form> 
```

所以应该发生的是在用户按下结帐按钮后，表单应该有一个名为“stripeToken”的隐藏输入字段，其中包含令牌值。您可以从表单中获取该令牌并稍后提交。或者，您可以收听“令牌”事件，该事件将绑定到您的按钮：

```
jQuery(function($){
  var $button = $('#customButton');

  $button.on('token', function(e, token){
    $button.after('<hr /><p>Your Stripe token is: <strong>' + token.id + '</strong></p>');
  });
}); 
```

免责声明：我还没有使用简单的结帐方法。此代码未经测试

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-12T02:20:20.660

我认为您可能缺少一些“包含”， `Class 'Stripe' not found` 这意味着在调用之前没有包含由“Stripe”类组成的 PHP 文件@

注意：需要 PHP >= 5.2 环境

下载[Stripe PHP 库](https://code.stripe.com/stripe-php-latest.zip)

将其提取到您的家中！

让我们创建一个名为 config.php 的文件，我们将在其中设置一些初始配置。

```
<?php
require_once('./lib/Stripe.php');

$stripe = array(
  "secret_key"      => "sk_test_mkGsLqEW6SLnZa487HYfJVLf",
  "publishable_key" => "pk_test_czwzkTp2tactuLOEOqbMTRzG"
);

Stripe::setApiKey($stripe['secret_key']);
?> 
```

然后在您的代码文件上方（假设 yours.php）

```
 include "config.php";
 // Get the credit card details submitted by the form
  $token = $_POST['stripeToken'];
 //rest as you go! 
```

# c++ - 联合行为

> ID：15961901
> 
> 赞同：1
> 
> 时间：2013-04-12T02:00:39.487
> 
> 标签：c++, class, unions

是否有可能从联盟中获得以下行为？

```
class A : public Base //Base is an abstract base class.
{
  public:
    A( int );
    virtual void foo() //A virtual function from Base.
    {
      //I don't want to have to specify if it's oneOption or twoOption.
      // I would like it to just call whichever one's is defined in mData.
      mData.foo();
    }
  private:
    union B
    {
      C oneOption; //A class which inherits from Base.
      D twoOption; //Another class which inherits from Base.
    } mData;
}; 
```

基本上，我想要一个包含派生类联合的类。然后我想根据我的 Union 来实现所有的虚函数基类。

如果它太令人困惑，我可以尝试重新措辞。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:17:59.907

工会的成员不允许有构造函数。

你可以这样做：

```
void PickC() { new (oneOption) C; }
void PickD() { new (twoOption) D; }
C * GetC() { return (C*) oneOption; }
D * GetD() { return (D*) twoOption; }

private:

union B
{
  char oneOption[ sizeof(C) ]; //A class which inherits from Base.
  char twoOption[ sizeof(D) ]; //Another class which inherits from Base.
} mData; 
```

但它严重丑陋。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-12T02:05:28.400

从技术上讲，您可以，语法是正确的，编译器将允许您按预期处理这两个实例变量（具有通常适用于联合的相同约束）。

实际上，当存在互斥时似乎没有必要，您可以轻松地使用指向实例的指针：

```
CommonAncestor *mData; 
```

通过使用在语言中不存在多态性时使用的构造，我可以看到许多可维护性问题。

# iphone - 动画 CAEmitterCell Color 属性

> ID：15961910
> 
> 赞同：6
> 
> 时间：2013-04-12T02:01:32.180
> 
> 标签：iphone, ios, caemitterlayer, caemittercell

我有一个`CAEmitterCell`，我已经设置了一个特定的颜色。文档说[这个属性是可动画](https://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CAEmitterCell_class/Reference/Reference.html)的，我想为我游戏中的不同玩家（所有玩家一开始都选择他们的颜色）在多种不同颜色之间制作动画。

这是我的`EmitterCell`设置：

```
//
    // Emitter Cells
    //

    // 'New Emitter' cell configuration
    newEmitter = [CAEmitterCell emitterCell];
    newEmitter.scaleSpeed = 10;
    newEmitter.lifetime = 2.481715;
    newEmitter.velocity = 332.3636968085106;
    newEmitter.contents = newemitterImg;
    newEmitter.name = @"New Emitter";
    newEmitter.color = [[UIColor colorWithRed:0.50 green:0.00 blue:1.00 alpha:1.00] CGColor];
    newEmitter.scaleRange = 4.178236607142859;
    newEmitter.lifetimeRange = 1.6;
    newEmitter.greenRange = -2.775558e-17;
    newEmitter.birthRate = 40;
    newEmitter.emissionRange = -6.283185306666667;
    newEmitter.scale = 0;

    //
    // Emitter Cell Chains
    //
    emitter.emitterCells = [NSArray arrayWithObjects:newEmitter, nil]; 
```

这里是我在这种情况下测试颜色变化的地方，只是在两种不同颜色之间跳跃：

```
-(void)changeColor {

    if (color == 0) {
        color = 1;
        NSLog(@"color = 1");

        [UIView animateWithDuration:1.5 delay:0 options:0 animations:^{
            newEmitter.color = [[UIColor colorWithRed:0.50 green:0.00 blue:1.00 alpha:1.00] CGColor];
        } completion:^(BOOL finished) {[self performSelector:@selector(changeColor) withObject:nil afterDelay:2];}];
    } else {
        color = 0;
        NSLog(@"color = 0");
        [UIView animateWithDuration:1.5 delay:0 options:0 animations:^{
            newEmitter.color = [[UIColor colorWithRed:1.00 green:0.50 blue:0.10 alpha:1.00] CGColor];
        } completion:^(BOOL finished) {[self performSelector:@selector(changeColor) withObject:nil afterDelay:2];}];
    }

} 
```

但是，当我运行它时，颜色永远不会改变。我在这里误解了“ **Animatable** ”的性质，还是我只需要以不同的方式处理它`CAEmitterCell`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-21T22:09:47.760

事实上，CAEmitterCells 是不同的。要使动画在它们上运行，您需要执行以下步骤：

1.为您的 CAEmitterCell 命名，例如：

`newEmitter.name = @"fire";`

2.通过CAEmitterLayer实例访问这个发射器的动画属性：

```
//Set first before doing CABasicAnimation so it sticks
newEmitter.redSpeed = 1.0;

//Access the property with this key path format: @"emitterCells.<name>.<property>"
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"emitterCells.fire.redSpeed"];
anim.fromValue = @(0.0);
anim.toValue = @(1.0);
anim.duration = 1.5;
anim.fillMode = kCAFillModeForwards;
[emitter addAnimation:anim forKey:@"emitterAnim"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-24T07:18:59.380

尝试这个：

```
 [newEmitter.emitterCells[0] setColor:[[UIColor yellowColor] CGColor]]; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-21T06:37:49.273

您可以使用这些属性为发射器颜色设置动画。

```
newEmitter.redSpeed = 1.0;
newEmitter.greenSpeed = 1.0;
newEmitter.blueSpeed = 1.0; 
```

# rdf - 映射数据的 swrl 规则

> ID：15961914
> 
> 赞同：1
> 
> 时间：2013-04-12T02:02:38.297
> 
> 标签：rdf, owl, protege, swrl

我开发了一个本体来识别患者并将其映射到我的示例 SQL 数据库（包括 100 名患者）。这意味着我们在本体中没有任何个体。那么，如何在规则选项卡中为以下 sparql 查询运行类似的 swrl 规则：

```
SELECT DISTINCT ?x WHERE {
  { ?x :PatientCode ?c .
    FILTER (?c = "1"^^xsd:double). }
  OPTIONAL {
    ?x :hasRiskFactor ?p.
    ?p :MeasureType ?u.
    FILTER( ?u = "ENDOC"^^xsd:String ||
            ?u = "DIETITIAN"^^xsd:String ||
            ?u = "ATTPOD"^^xsd:String ||
            ?u = "ATTOPH"^^xsd:String)
  }
  FILTER (!bound(?u))
} 
```

# .net - 我有一个@HTML.dropdownlistfor 但有属性多选，我怎样才能获得选定值的列表？

> ID：15961917
> 
> 赞同：1
> 
> 时间：2013-04-12T02:03:02.087
> 
> 标签：.net, asp.net-mvc-4

我有这个代码是`DropDownList`一个`MultiSelect`选项

```
@Html.DropDownListFor(
    model => model.areas,
    new MultiSelectList((SelectList)ViewBag.myareas), new { id = "idarea" }) 
```

但我无法获取所选值的列表。

我试图`List`在我的 POCO 类中使用一个属性来获取它，但只返回一个值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-28T22:29:49.890

您的`areas`财产应定义为：

```
public List<int> areas { get; set; } 
```

您的 HTML：

```
@Html.DropDownListFor(model => model.areas, new MultiSelectList(Model.ListOfAreas, "AreaID", "AreaName"), new { id = "idarea" }) 
```

`ListOfAreas`包含所有可能`Areas`的选择。

当然，您可以`MultiSelectList`在控制器中创建对象，将其与 Model/ViewModel 中的其他数据一起传递，然后在视图中使用：

```
@Html.DropDownListFor(model => model.areas, Model.MSLAreas, new { id = "idarea" }) 
```

# dojo - 如何在 Dojo 中检索标签以获得额外的语言环境

> ID：15961921
> 
> 赞同：2
> 
> 时间：2013-04-12T02:03:53.860
> 
> 标签：dojo

对于希望在同一页面上显示多种语言的奇怪场景，我如何利用 Dojo 的 extraLocale 功能以辅助语言标记标签？

假设我在 Dojo 中定义了一个额外的语言环境，如下所示

```
var dojoConfig = {
locale : "en",
extraLocale: [ "zh-cn", "ja-jp" ]
}; 
```

如果我随后以以下方式定义一个类，如果我尝试使用 i18n，我总是会得到一个已经包含 MyClass_nls 的所有英文标签的对象。如何指定一个额外的语言环境，例如“zh-cn”，以便它查找 MyClass_nls 的中文版本？

```
define(
    [   "dojo/_base/declare", "dojo/_base/lang",
    "dijit/_TemplatedMixin",
            "dijit/_WidgetsInTemplateMixin",
            "dojo/text!./templates/MyClass.html",
            "dojo/i18n!./nls/MyClass_nls" ],

    function(declare, lang, _TemplatedMixin,
            _WidgetsInTemplateMixin, template, i18n) {

        return declare(
                "group.test.MyClass",
                [ _TemplatedMixin, _WidgetsInTemplateMixin,
                        Evented ],
                { 
```

像这样的东西会起作用，但我相信这不需要 dojoConfig 中的 extraLocale 功能

```
var bundle = i18nResolver.getLocalization("group/mypath", "MyClass_nls", "zh-cn"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-30T03:19:50.050

您可以通过在模块 ID 中包含语言环境来显式加载语言环境包。因此，`dojo/i18n!./nls/MyClass_nls`将成为`dojo/i18n!./nls/zh-cn/MyClass_nls`显式加载 zh-cn 语言环境。您不需要使用`extraLocale`，这是在 Dojo 1.6 和更早版本中预加载语言环境的遗留机制。

# virtualenv - 如何在某个 virtualenv 中列出已安装的软件包？

> ID：15961926
> 
> 赞同：86
> 
> 时间：2013-04-12T02:04:32.050
> 
> 标签：virtualenv, pip

你可以`cd`去`YOUR_ENV/lib/pythonxx/site-packages/`看看，但是有什么方便的方法吗？

`pip freeze`列出所有安装的包，包括系统环境的。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2014-07-09T18:16:12.497

您只能在`virtualenv`by [`pip freeze --local`](http://pip.readthedocs.org/en/latest/reference/pip_freeze.html#cmdoption-l) 或 中列出包[`pip list --local`](http://pip.readthedocs.org/en/latest/reference/pip_list.html#cmdoption-l)。无论您是否在`virtualenv`.

请注意，限制`virtualenv`不使用全局站点包并不是问题的答案，因为问题在于如何分离两个列表，而不是如何限制我们的工作流程以适应工具的限制。

感谢@gvalkov[在此处](https://stackoverflow.com/a/12552695/1959808)的评论。参照。也是[这个问题](https://github.com/pypa/pip/issues/85)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-12T10:34:37.347

在 virtualenv 中调用`pip`命令应该列出隔离环境中可见/可用的包。确保使用`--no-site-packages`默认使用选项的最新版本的 virtualenv。这种方式使用 virtualenv 的目的是创建一个 python 环境，而无需访问安装在系统 python 中的包。

接下来，确保使用`pip`virtualenv ( `YOUR_ENV/bin/pip`) 中提供的命令。或者只是激活 virtualenv (source `YOUR_ENV/bin/activate`) 作为调用 python 解释器或 pip 的正确命令的便捷方式

```
~/Projects$ virtualenv --version
1.9.1

~/Projects$ virtualenv -p /usr/bin/python2.7 demoenv2.7
Running virtualenv with interpreter /usr/bin/python2.7
New python executable in demoenv2.7/bin/python2.7
Also creating executable in demoenv2.7/bin/python
Installing setuptools............................done.
Installing pip...............done.

~/Projects$ cd demoenv2.7/
~/Projects/demoenv2.7$ bin/pip freeze
wsgiref==0.1.2

~/Projects/demoenv2.7$ bin/pip install commandlineapp
Downloading/unpacking commandlineapp
Downloading CommandLineApp-3.0.7.tar.gz (142kB): 142kB downloaded
Running setup.py egg_info for package commandlineapp
Installing collected packages: commandlineapp
Running setup.py install for commandlineapp
Successfully installed commandlineapp
Cleaning up...

~/Projects/demoenv2.7$ bin/pip freeze
CommandLineApp==3.0.7
wsgiref==0.1.2 
```

我的回答中奇怪的是包'wsgiref'在virtualenv中是可见的。它来自我的系统python。目前我不知道为什么，但可能在您的系统上有所不同。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-04-22T15:47:27.277

列出 virtualenv 中已安装的包

第1步：

> **工作环境名称**

第2步：

> **点冻结**

它将显示所有已安装的软件包以及已安装的软件包和版本

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2020-08-04T08:25:46.297

在 Python3 中

```
pip list 
```

空 venv 是

```
Package    Version
---------- ------- 
pip        19.2.3 
setuptools 41.2.0 
```

* * *

创造新环境

```
python3 -m venv your_foldername_here 
```

启用

```
cd your_foldername_here
source bin/activate 
```

停用

```
deactivate 
```

你也可以站在文件夹里，给虚拟环境起个名字/文件夹（python3 -m venv name_of_venv）。

Venv 是 Python 3.3 之后附带的 virtualenv 的一个子集。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2016-05-09T23:48:53.413

如果您仍然有点困惑，`virtualenv`您可能不会从 Ioannis 和 Sascha 的答案中了解如何结合这些重要技巧。即这是您需要的基本命令：

```
/YOUR_ENV/bin/pip freeze --local 
```

这可以很容易地在其他地方使用。例如，这是一个方便且完整的答案，适合在您通过 virtualenvwrapper 设置的所有环境中安装所有本地包：

```
cd ${WORKON_HOME:-~/.virtualenvs}
for dir in *; do [ -d $dir ] && $dir/bin/pip freeze --local >  /tmp/$dir.fl; done
more /tmp/*.fl 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-06-04T06:14:52.767

你为什么不试试***pip list***

请记住我在 python 版本 3.7.3 上使用 pip 版本 19.1

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-09-09T07:57:06.547

如果您正在使用`pip 19.0.3`和`python 3.7.4`。然后`pip list`在你的 virtualenv 中执行命令。它将显示所有已安装的软件包以及各自的版本。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-21T17:20:49.087

在我的情况下，烧瓶版本只在下面可见，所以我不得不去 C:\Users\\AppData\Local\flask\venv\Scripts>pip freeze --local

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-10-15T05:03:09.907

`.venv/bin/pip freeze`在 bash 中为我工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-03-01T21:16:08.027

仅使用 python3 可执行文件，来自：

**吉特巴什：**

```
winpty my_venv_dir/bin/python -m pip freeze 
```

**Linux：**

```
my_venv_dir/bin/python -m pip freeze 
```

# java - 通过下载管理器下载时覆盖文件

> ID：15961936
> 
> 赞同：1
> 
> 时间：2013-04-12T02:05:36.837
> 
> 标签：java, android, android-download-manager

我无法找到如何做到这一点。我用asycntask下载。当我这样做时，下载时它总是会覆盖文件。现在，当我切换到下载管理器时，它将下载具有相同文件名的文件，除了旁边有一个数字（例如 dl-1.zip）。下载时覆盖文件非常重要。我怎么能这样做？

# javascript - 将类方法作为回调绑定到 jquery 滑块 UI 组件

> ID：15961939
> 
> 赞同：0
> 
> 时间：2013-04-12T02:05:39.697
> 
> 标签：javascript, jquery

参考下面的代码，我有一个类方法，它返回指定滑块控件行为的对象列表，以及在调整滑块以调整适当值时应用作回调的 oject 方法。这是一个对象，用于指定以下控件的绑定和参数：Pre Gain、Distortion 和 Post Gain。

```
DistortionPedal.prototype.getControlBindings = function(){
    return new Array({
            name: "Pre Gain",
            min: 0,
            max: 1,
            defaultValue: 0.2,
            inc: 0.05,
            setMethod: this.setPreGain.bind(this)
        }, {
            name: "Distortion",
            min: 0,
            max: 1,
            defaultValue: 0.95,
            inc: 0.05,
            setMethod: this.changeDistortion.bind(this)
        }, {
            name: "Post Gain",
            min: 0,
            max: 1,
            defaultValue: 0.5,
            inc: 0.05,
            setMethod: this.setPostGain.bind(this)
        }
    );
}; 
```

然后我有以下代码，它使用这些控件定义来构建滑块组件。

```
//var pedal instantiated earlier as a DistortionPedal object
var pedalControls = pedal.getControlBindings()
for(var x = 0; x < pedalControls.length; x++){
    var controlId = "control_" + id + "_" + x;
    var control = pedalControls[x];

     $("#" + id ).append(control.name + "<div id = '" + controlId + "'></div>");
     $("#" + controlId).slider({
        range: "min",
        min: control.min,
        max: control.max,
        step: control.inc,
        value: control.defaultValue,
        slide: function( event, ui ) {
            control.setMethod(ui.value); //this is where things get strange
        }
    });
} 
```

如您所见，它创建了滑块并设置了各种参数。问题是所有滑块最终都会调用 setPostGain 作为回调函数，即使只有一个控件（列表中的最后一个）具有该回调方法。知道发生了什么吗？

**更新** 根据提供的答案，更新的代码是：

```
for(var x = 0; x < pedalControls.length; x++){
    var controlId = "control_" + id + "_" + x;
    (function(control){
         $("#" + id ).append(control.name + "<div id = '" + controlId + "'></div>");
         $("#" + controlId).slider({
            range: "min",
            min: control.min,
            max: control.max,
            step: control.inc,
            value: control.defaultValue,
            slide: function( event, ui ) {
                control.setMethod(ui.value);
            }
        });
    })(pedalControls[x]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:36:54.583

您的`control`变量不在闭包内，因此幻灯片回调将在`control`调用幻灯片时获取上次存储在变量中的任何值。试试这个：

```
$(pedal.getControlBindings()).each(function(index) {
    var controlId = "control_" + id + "_" + index;
    var control = this;

    $("#" + id ).append(control.name + "<div id = '" + controlId + "'></div>");
    $("#" + controlId).slider({
        range: "min",
        min: control.min,
        max: control.max,
        step: control.inc,
        value: control.defaultValue,
        slide: function( event, ui ) {
            control.setMethod(ui.value); //this is where things get strange
        }
    });
}); 
```

# java - JSP 页面应如何检查身份验证

> ID：15961940
> 
> 赞同：9
> 
> 时间：2013-04-12T02:05:44.057
> 
> 标签：java, jsp, authentication, web-applications

我是网络编程新手。我要求一种通用模式来执行检查身份验证之类的操作。这是场景：

该网站有一个供访问者使用的登录页面。它将获取用户名和加密密码并将它们发送到服务器，然后从服务器获取错误代码（用户名/密码不匹配）或身份验证密钥。当用户登录成功后，我希望网站自动跳转到`main.jsp`展示网站主要功能的页面。

在这种情况下，我想`main.jsp`检查用户身份验证。也就是说，我不希望像用户可以直接打开这样的事情发生`www.example.com/main.jsp`，如果他们这样做，我想将他们重定向到登录页面。

那么如何跨页面传递身份验证信息，如何防止用户在未登录的`main.jsp`情况下直接访问？我需要使用会话或任何东西吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-14T15:17:56.620

您可以尝试使用**过滤器**：

> 过滤器可以在请求到达 servlet 之前对其进行预处理，对离开 servlet 的响应进行后处理，或者两者都做。过滤器可以拦截、检查和修改请求和响应。

**注意：**确保在用户登录后添加会话属性，您可以在过滤器上使用该会话属性

在您的**login.jsp**添加：

```
session.setAttribute("LOGIN_USER", user); 
//user entity if you have or user type of your user account... 
//if not set then LOGIN_USER will be null 
```

**web.xml**

```
<filter>
    <filter-name>SessionCheckFilter</filter-name>
    <filter-class>yourjavapackage.SessionCheckFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <!--url-pattern>/app/*</url-pattern-->
    <url-pattern>/main.jsp</url-pattern> <!-- url from where you implement the filtering -->
</filter-mapping> 
```

**SessionCheckFilter.java**

```
public class SessionCheckFilter implements Filter {

  private String contextPath;

  @Override
  public void init(FilterConfig fc) throws ServletException {
    contextPath = fc.getServletContext().getContextPath();
  }

  @Override
  public void doFilter(ServletRequest request, ServletResponse response, FilterChain fc) throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse res = (HttpServletResponse) response;  

    if (req.getSession().getAttribute("LOGIN_USER") == null) { //checks if there's a LOGIN_USER set in session...
        res.sendRedirect(contextPath + "/login.jsp"); //or page where you want to redirect
    } else {
      String userType = (String) req.getSession().getAttribute("LOGIN_USER");
      if (!userType.equals("ADMIN")){ //check if user type is not admin
        res.sendRedirect(contextPath + "/login.jsp"); //or page where you want to  
      }
      fc.doFilter(request, response);
    }
  }

  @Override
  public void destroy() {
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-12T03:36:26.897

> JSP 页面应如何检查身份验证

它不应该。您应该使用容器管理的身份验证，并通过 URL 模式在 web.xml 中定义登录名/安全性。

* * *

由 Glen Best 添加：

例如，在 web.xml 中添加类似这样的内容：

```
<security-constraint>
   <display-name>GET: Employees Only</display-name>
   <web-resource-collection>
      <web-resource-name>Restricted Get</web-resource-name>
      <url-pattern>/restricted/employee/*</url-pattern>
      <http-method>GET</http-method>
   </web-resource-collection>
   <auth-constraint>
      <role-name>Employee</role-name>
   </auth-constraint>
   <user-data-constraint>
      <transport-guarantee>CONFIDENTIAL</transport-guarantee>
   </user-data-constraint>
</security-constraint> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-25T08:53:44.133

这也适用于我

```
<filter>
    <filter-name>SessionCheckFilter</filter-name>
    <filter-class>yourjavapackage.SessionCheckFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>SessionCheckFilter</filter-name>
    <!--url-pattern>/app/*</url-pattern-->
    <url-pattern>/main.jsp</url-pattern> <!-- url from where you implement the filtering -->
</filter-mapping>

public class SessionCheckFilter implements Filter {

  private String contextPath;

  @Override
  public void init(FilterConfig fc) throws ServletException {
    contextPath = fc.getServletContext().getContextPath();
  }

  @Override
  public void doFilter(ServletRequest request, ServletResponse response, FilterChain fc) throws IOException, ServletException {
    HttpServletRequest req = (HttpServletRequest) request;
    HttpServletResponse res = (HttpServletResponse) response;  

    if (req.getSession().getAttribute("LOGIN_USER") == null) { //checks if there's a LOGIN_USER set in session...
      req.getRequestDispatcher("login.jsp").forward(req, resp); //or page where you want to redirect
    } else {
      String userType = (String) req.getSession().getAttribute("LOGIN_USER");
      if (userType.equals("ADMIN")){ //check if user type is admin
        fc.doFilter(request, response); it redirected towards main.jsp
      }

    }
  }

  @Override
  public void destroy() {
  }
} 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2015-12-30T14:52:54.697

如何使用：

```
String username = request.getRemoteUser(); 
```

# jquery - jQuery Flot - 显示准确的值

> ID：15961948
> 
> 赞同：1
> 
> 时间：2013-04-12T02:07:20.220
> 
> 标签：jquery, tooltip, decimal, flot

我注意到 jQuery Flot 正在对结果进行四舍五入。但是，当您将鼠标悬停在工具提示中的峰值和谷值上时，我想显示结果的实际十进制值。但不是 x 或 y 轴标签，而是图形结果本身。

所以我想要“44.05”而不是“44”。

有什么我可以做的吗？我看到的一切都只是轴标签。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:59:31.747

工具提示应该允许你这样做 - 看看这个小提琴[http://jsfiddle.net/Rnusy/](http://jsfiddle.net/Rnusy/)

```
 var previousPoint = null;
        $("#placeholder").bind("plothover", function (event, pos, item){
            $("#x").text(pos.x.toFixed(2));
            $("#y").text(pos.y.toFixed(2));
            if (item) {
                if (previousPoint != item.dataIndex){
                    previousPoint = item.dataIndex;

                    $("#tooltip").remove();
                    var x = item.datapoint[0].toFixed(2),
                        y = item.datapoint[1].toFixed(2);

                        showTooltip(item.pageX, item.pageY, y);
                                                    }
                    }
                else {
                    $("#tooltip").remove();
                    previousPoint = null;
                    }

            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-08T14:08:44.687

要在工具提示中显示准确的值，请执行以下操作：

```
tooltipOpts: {
    content: "%s : %y.2",
} 
```

其中“y”是您的值，2 是小数位数。

# jquery - JQuery无限水平背景图像平移

> ID：15961949
> 
> 赞同：1
> 
> 时间：2013-04-12T02:07:26.863
> 
> 标签：jquery, image, infinite-loop, panning

好的，所以我有一张我想用作背景的图像，但让它像下图一样滚动。

任何人都可以帮助我解决这个问题或将我链接到正确的方向吗？希望不是视差，除非你能帮助我了解如何实现这种效果。我也没有要求任何人为我做这件事，我只是需要一些指导。

没关系，在从搜索中发布此内容后可能连续搜索了 3 个小时，但没有找到我正在寻找的东西，我终于找到了我想要实现的目标。如果其他人需要此结帐的帮助，请查看[此](http://www.creativejuiz.fr/blog/doc/infinite-slideshow/)站点 - [http://www.creativejuiz.fr/blog/doc/infinite-slideshow/](http://www.creativejuiz.fr/blog/doc/infinite-slideshow/)

```
$(function(){
   setInterval(function(){
      $(".slideshow ul").animate({marginLeft:-350},800,function(){
         $(this).css({marginLeft:0}).find("li:last").after($(this).find("li:first"));
      })
   }, 3500);
}); 
```

![http://imageshack.us/scaled/landing/191/slideshowmain.gif](https://i.stack.imgur.com/8w4ug.gif)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:19:49.893

如果我没记错的话，你应该克隆它两次，然后将一个克隆放在原始图像之前，另一个放在原始图像之后。然后为他们三个设置动画并不断改变他们的位置以模拟无限滚动。（我会试着为你做一个小提琴）

# mysql - 插入性能随大索引（MYSQL）而下降

> ID：15961950
> 
> 赞同：0
> 
> 时间：2013-04-12T02:07:41.250
> 
> 标签：mysql

最近，我发现其中一台服务器的磁盘 I/O 流量很高。由于某些诊断后在某些表上写入索引而导致的高 I/O。我做了几次评估测试，发现mysql在向具有大索引的表中插入记录时会占用大量写入。

索引列的数据类型是 varchar(15) 和 varchar(17) ，两者都是非唯一索引，如果我将 20000 条记录加载到具有 10000 条记录的表中，则磁盘上只有 80 次写入，而磁盘上有 1700 次写入时即使插入的记录数相同，表也会增长到 2000 万（在索引列上有大约 100 万个不同的值）。

引擎是 MyISAM。

增加索引的大小也会增加每次插入磁盘上的写入次数。

它是 BTREE 索引行为吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:10:18.340

使用 InnoDB 而不是 MyISAM。

InnoDB 通过缓冲对二级索引的写入、尽可能合并它们以及延迟昂贵的 I/O 来提供帮助。[您可以在 MySQL 手册中的Controlling InnoDB Change Buffering](http://dev.mysql.com/doc/refman/5.5/en/innodb-performance-change_buffering.html)下阅读有关此功能的更多信息。

* * *

回复您的评论：

将新值插入 B 树可能会很昂贵。如果叶级别没有空间，则插入可能会导致拆分树的非叶节点的级联效应，可能一直到树的顶部。这可能会导致大量 I/O，因为树的不同节点可能彼此相距很远地存储在磁盘上。

其他缓解策略是通过将使用较少的数据移动到另一个表来缩小表。或者通过使用[MySQL 表分区](http://dev.mysql.com/doc/refman/5.5/en/partitioning.html)来使一张逻辑表由许多单独的物理表组成。每个这样的子表必须具有相同的索引，但是每个单独的索引会更小。

* * *

这里有一个动画示例：http: [//www.bluerwhite.org/btree/](http://www.bluerwhite.org/btree/)

查看示例“将键 33 插入 B-Tree (w/Split)”，其中显示了将值插入过度填充的 B-tree 节点的步骤，以及 B-tree 的响应操作。

现在想象一下，示例插图只显示了更深的 B-tree 的底部（如果您的索引 B-tree 有数百万个条目，就会出现这种情况），并且填充父节点本身可能是溢出，并且强制分裂操作继续向上树中的更高级别。如果到树顶部的所有祖先节点都已被填充，则这可以一直持续到树的最顶部。

# facebook - 想制作一个连续运行的应用程序，怎么做？

> ID：15961960
> 
> 赞同：0
> 
> 时间：2013-04-12T02:09:10.803
> 
> 标签：facebook, google-app-engine, heroku

我正在开发一个应用程序，我希望它执行以下操作：

1) 在特定时间自动发布到用户的墙上（比如每天上午 11:00）

2）每当帖子发布在用户的墙上时，它都会采取一些行动

我怎样才能做到这一点？基本上，我怎样才能让它在特定时间发布？我怎样才能使它成为一个触发的事件？或者我可以使用服务器不断循环直到它是正确的时间？

我是菜鸟，所以请发布尽可能多的细节！例如，我可以使用 Google App Engine 执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:38:26.070

在 appengine 上连续运行可以通过后端完成，但您可能应该使用 cron 来触发在特定时间/间隔运行的任务。请参阅“用于 Python 的 Cron 计划任务” [https://developers.google.com/appengine/docs/python/config/cron](https://developers.google.com/appengine/docs/python/config/cron)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:40:48.723

您可以将最大和最小实例设置为 1-1，但您需要拥有企业帐户才能执行此操作。[https://developers.google.com/appengine/docs/adminconsole/instances](https://developers.google.com/appengine/docs/adminconsole/instances)

缺点是您需要为现有实例 24/7/365 小时付费（因为实例是常驻的）并且您不会扩展。

# ios - 以编程方式卸载/删除/禁用配置文件

> ID：15961961
> 
> 赞同：0
> 
> 时间：2013-04-12T02:09:31.457
> 
> 标签：ios

我想找到一种方法以编程方式卸载/删除/禁用 ios iphone/ipad 上的配置文件...

我有企业经销许可证。该应用程序用于内部分发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T17:01:10.487

我见过的唯一可以帮助删除 iOS 上的配置文件的解决方案是使用 MDM 应用程序。这是一个包含更多信息的链接：

[http://www.enterpriseios.com/story/2013/01/28/Enterprise_In_House_Certificate_Life_Extended#comment-7798](http://www.enterpriseios.com/story/2013/01/28/Enterprise_In_House_Certificate_Life_Extended#comment-7798)

# java - 将超类型的数组转换为子类型

> ID：15961962
> 
> 赞同：3
> 
> 时间：2013-04-12T02:09:35.310
> 
> 标签：java, arrays, casting

这是否有特殊原因导致运行时异常而不是 Java 中的编译时错误？

```
Object[] objects = new Object[10];
String[] strings = (String[])objects; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T02:25:00.713

由于这种情况，必须在运行时进行检查：

```
public class Test {
  public static void main(String[] args){
    String[] stringsBase = {"aaa", "bbb", "ccc"};
    Object[] objects = stringsBase;
    String[] strings = (String[])objects;
    System.out.println(strings[1]);
  }
} 
```

这是一个有效的工作程序。在不进行流分析的情况下，编译器不知道对象是否引用了作为 Object[] 创建的数组，或者在本例中作为 String[] 创建的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:19:28.360

因为**这是语言规范定义的编译时行为。**简短的版本是`Object[]`可以将 an 强制转换为 a`String[]`而不会生成编译时错误，因为`Object`可以将 an 强制转换为 a`String`而不会生成编译时错误。

* * *

长答案只是我引用了 JLS。来自[Java 语言规范 § 5.5.1。参考类型转换：](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)

> 给定一个编译时引用类型 S（源）和一个编译时引用类型 T（目标），如果由于以下规则而没有发生编译时错误，则存在从 S 到 T 的强制转换。
> ...
> 如果 S 是数组类型 SC `[]`，即 SC 类型的组件数组：
> ...
> 
> *   **如果 T 是 TC 类型的数组`[]`，即 TC 类型的组件数组，则除非满足以下条件之一，否则会发生编译时错误：**
>     *   TC 和 SC 是相同的原始类型。
>     *   TC 和 SC 是引用类型，类型 SC 可以转换为 TC。

根据关于强制转换的同一部分中的一条前面的规则，`Object`s 可以进行强制转换为`String`s：

> 如果 S 是类类型：
> 
> *   **如果 T 是类类型，那么 |S| <: |T|，或 |T| <: |S|。否则，会发生编译时错误。**

以防万一你想知道：

> [如果根据§5.5.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.5.1)中的规则没有发生编译时错误，则引用类型的表达式可能会转换为另一个引用类型。

* * *

请注意，[JLS 用于`|T|`表示类型的擦除，`T`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.6)并且[S :> T 表示 S 和 T 之间存在超类型关系。](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.10)因此“|S| <: |T| 或 |T| <: |S|” 可以理解为“S 的擦除是 T 的子类型、相同类型或超类型”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:16:59.693

强制转换是 Java 出于灵活性目的而提供的一个根本不安全的特性。如果您的编译器设置正确调整，该代码会生成“未经检查”的警告。

# javascript - 尝试替换所有锚点中的内容，但内容没有被替换

> ID：15961963
> 
> 赞同：2
> 
> 时间：2013-04-12T02:09:53.180
> 
> 标签：javascript, jquery

我正在尝试用作为类 nav ( .nav a ) 后代的所有锚点中的相应 unicode 字符替换所有内容，具体取决于它是什么。

但是这个 javascript / jQuery 似乎没有做任何事情。

它没有显示任何错误，只是没有发生任何事情。

我做错了什么，如何用 javascript / jQuery 将某些文本替换为其他某些文本？

这是代码：

```
$(document).ready(function(){
    var navigationLinks = $('.nav a');
for(var i=0; i < navigationLinks.length; i++){
    var thisLink = navigationLinks.eq(i);
    switch(thisLink.html()){
        case "About":
            thisLink.html().replace(/About/g,'&#xe00f;');

        case "Work":
            thisLink.html().replace(/Work/g,'&#xe010');

        case "CV":
            thisLink.html().replace(/CV/g,'&#xe00c');

        case "Resume":
            thisLink.html().replace(/Resume/g,'&#xe00d;');

        case "down":
            thisLink.html().replace(/down/g,'&#xe00d;');

        case "Mail":
            thisLink.html().replace(/Mail/g,'&#xe011;');

        case "Dribbble":
            thisLink.html().replace(/Dribbble/g,'&#xe015;');

        case "GooglePlus":
            thisLink.html().replace(/GooglePlus/g,'&#xe012;');

        case "Facebook":
            thisLink.html().replace(/Facebook/g,'&#xe013;');

        case "Twitter":
            thisLink.html().replace(/Twitter/g,'&#xe014');

        default:
            thisLink.html().replace(thisLink.html(),thisLink.html());
    }
}
}); 
```

这是我尝试过的代码的实时示例，但它不起作用。.nav 类中的锚点内的文本仍然是原始文本，而不是 unicode：[https ://dl.dropboxusercontent.com/u/270523/help/replace/index.html](https://dl.dropboxusercontent.com/u/270523/help/replace/index.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:17:24.700

`html()` **获取**，`innerHTML`而`html("string")` **设置**. _ `innerHTML`您必须重新设置值；你不能只调用`replace`一个字符串。

例如，您可以重做`case`语句以遵循此约定：

```
var myHtml = thisLink.html();
switch (myHtml) {
    case "About":
        thisLink.html(myHtml.replace(/About/g, '&#xe00f;'));
        break; 
```

或将其用于`.html()`通话：

```
thisLink.html(function (i, oldVal) {
    return oldVal.replace(/About/g, '&#xe00f;');
}); 
```

此外，您需要包含`break`每个`case`, 以防止执行下一个块。

此外，循环匹配元素的 jQuery 方法是 with `.each()`，而不是 for 循环（尽管仍然非常有效）。所以像：

```
$('.nav a').each(function () {
    var thisLink = $(this);
    var myHtml = thisLink.html();
    // The rest of the code...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:18:08.513

**演示：http:** [//jsfiddle.net/7hKTs/](http://jsfiddle.net/7hKTs/)

请注意，您可以更简洁地执行此操作，但我想保留您的原始结构，以便您可以看到我在上下文中所做的更正。

*   在`switch`语句中添加了中断。
*   在`replace()`. `html()`是一种方法；您需要对其返回值做一些事情（例如将其分配给变量）。

**示例 1** `thisLink.html().replace(/About/g,'&#xe00f;');`：. 这将获取链接的 HTML，对其进行调用`replace()`，但未使用的返回值`replace()`。这不会产生预期的效果。

**示例 2：** `thisLink.html(thisLink.html().replace(/About/g,'&#xe00f;'));`现在将修改后的 HTML 传递给`html()`方法。在这一行中，它通过带参数和不带参数的调用来获取*和*设置 HTML 。`html()`

**示例 3：**但是，示例 #2 在多次使用时非常冗长/重复，因此我们可以做一些更简单的事情：

```
// get the value
var html = thisLink.html();

// handle any number of cases here

// note the assignment of the return value of html()
html = html.replace(/About/g, '&#xe00f;');

// set the value
thisLink.html(html); 
```

另见：[http ://api.jquery.com/html/](http://api.jquery.com/html/)

**完整示例**

```
$(document).ready(function () {
    var navigationLinks = $('.nav a');
    for (var i = 0; i < navigationLinks.length; i++) {
        var thisLink = navigationLinks.eq(i);
        var html = thisLink.html();

        switch (html) {
            case "About":
                html = html.replace(/About/g, '&#xe00f;');
                break;
            case "Work":
                html = html.replace(/Work/g, '&#xe010');
                break;
            case "CV":
                html = html.replace(/CV/g, '&#xe00c');
                break;
            case "Resume":
                html = html.replace(/Resume/g, '&#xe00d;');
                break;
            case "down":
                html = html.replace(/down/g, '&#xe00d;');
                break;
            case "Mail":
                html = html.replace(/Mail/g, '&#xe011;');
                break;
            case "Dribbble":
                html = html.replace(/Dribbble/g, '&#xe015;');
                break;
            case "GooglePlus":
                html = html.replace(/GooglePlus/g, '&#xe012;');
                break;
            case "Facebook":
                html = html.replace(/Facebook/g, '&#xe013;');
                break;
            case "Twitter":
                html = html.replace(/Twitter/g, '&#xe014');
                break;
        }

        thisLink.html(html);
    }
}); 
```

* * *

## 选择

**演示：http:** [//jsfiddle.net/7hKTs/5/](http://jsfiddle.net/7hKTs/5/)

我更喜欢这种方法，因为它几乎完全将标记从脚本中取出。相反，我们使用`data-*`属性来存储替代的 HTML 字符串。

**HTML**

```
<nav class="nav">
    <ul>
        <li><a href="#" data-alt="&#xe00f;">About</a></li>
        <li><a href="#" data-alt="&#xe010;">Work</a></li>
        <li><a href="#" data-alt="&#xe00c;">CV</a></li>
        <!-- etc -->
    </ul>
</nav> 
```

**JavaScript**

```
$(document).ready(function () {
    $('.nav a').each(function () {
        var obj = $(this);
        obj.html(obj.data("alt"));
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-12T02:26:20.870

鉴于`switch`/`case`已经使用完全匹配，全局 RegExp 和`replace`实际上正在重复工作：

```
switch(thisLink.html()){
    case "About":
        thisLink.html('&#xe00f;');
        break;

    case "Work":
        thisLink.html('&#xe010;');
        break;

    // etc.
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-12T03:00:33.490

我相信使用替换地图并使用以下方法迭代每个锚点会容易得多`.each()`：

```
$(document).ready(function() {
    var navigationLinks = $('.nav a'),
    replacements = {
        "About": '&#xe00f;',
        "Work": '&#xe010',
        "CV": '&#xe00c',
        "Resume": '&#xe00d;',
        "down": '&#xe00d;',
        "Mail": '&#xe011;',
        "Dribbble": '&#xe015;',
        "GooglePlus": '&#xe012;',
        "Facebook": '&#xe013;',
        "Twitter": '&#xe014'
    };

    navigationLinks.each(function() {
        var $this = $(this),
        txt = replacements[$this.text()];

        if (txt) {
            $this.text(txt);
        }
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-12T03:31:54.987

我想我也会考虑我的 2 美分。与其他提到的概念相同。这个例子使用了一个地图和 jquery 的 $.each 函数。

```
var hashMap = { 'About' : '&#xe00f;', 'Work' : '&#xe010;', 'CV' : '&#xe00c;' }

$.each($('.nav a'), function(index, value) { 
        var x = $(value).html(); 
        $(value).html(hashMap[x]); 
} ); 
```

# java - 需要帮助将输入从 String 拆分为 int

> ID：15961968
> 
> 赞同：1
> 
> 时间：2013-04-12T02:10:19.657
> 
> 标签：java, string, split, int

我让用户输入这种格式的分数问题（4/8–3/12 或 3+2/3 或 12/16*4 或 -2/3/64/96），需要将两个分数拆分为一个数组，然后我需要提取两者的分子和分母，这样我就可以在我的另一个文件中简化它们并进行它要求的任何计算，所以我需要使用一个数组，这样我就可以调用其中有符号的元素。

```
System.out.println("Enter Fraction:");
String answer = s.nextLine(); 

String[] numbers = answer.split(" ");
System.out.print(numbers); 
```

有没有办法将数组拆分为 int 变量？我搞不清楚了。解决方案可能很简单，但在这个项目中已经工作了 7 个小时左右。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T02:19:23.340

您可以使用简单的正则表达式拆分输入，如下所示：

```
Pattern p = Pattern.compile("\\d+|[+-/*]");
String inp = "2/3/64/96";
Matcher m = p.matcher(inp);
while (m.find()) {
    System.out.println(m.group());
} 
```

这个解决方案的核心是一个正则表达式：

```
\\d+|[+-/*] 
```

`\\d+`表示“一个或多个数字；`[+-/*]`表示“任何一个`+`、、、`-`或`/`” `*`。

这是[关于 ideone 的演示](http://ideone.com/R1U6ke)。

请注意，您的程序需要非常小心地确定 a`+`或 a`-`是一元“更改符号”还是二元运算：当符号位于开头或紧跟在另一个运算符之后时，它是一元的；否则，它是二进制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:17:56.873

Eric Lippert 在处理这些问题时给出了我所见过的最好的建议。

用英文/伪代码写出问题，然后开始将伪代码更改为真实代码。

```
Get Answer from user
Break Answer up to the 2 fractions/numbers and the math operator
Take the 2 different fractions and convert them to a double, float, whatever you need
Apply the math operation to the 2 numbers from the above step
Output the answer 
```

现在只需开始用你将如何做到这一点来替换每一行。我相信您可能可以弄清楚每一步，但有时我们在考虑整个问题时会迷失方向。如果您无法确定单个步骤，请发布您尝试过的代码，我们可以帮助解决特定问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:27:50.043

到目前为止，您的代码只是将输入拆分为表达式。您仍然需要将表达式拆分为分数。

当您已经有分数字符串数组时，您可以将每个元素拆分为 2 个整数：

1.  将其拆分为子字符串`split("/")`

2.  使用方法将每个子字符串转换为 int `Integer.parseInt()`。

# ios - 视图更改时更改标签数据

> ID：15961970
> 
> 赞同：0
> 
> 时间：2013-04-12T02:10:47.543
> 
> 标签：ios, uilabel, uisegmentedcontrol

我需要关于填充我的 uilabels 的帮助。我有三个 uiview，每个都有五个标签。当视图更改时，我需要更改标签数据，我正在使用 uisegmentedbutton 更改视图..最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:38:57.393

您以与引用视图完全相同的方式执行此操作，例如`viewPanel1`. 您需要为每个属性或实例变量。假设它是一个属性。如果标签是在笔尖中创建的，则必须为该属性创建一个插座。如果标签是在代码中创建的，则必须在创建时将每个标签分配给一个属性。现在您可以使用该属性来引用它所指向的标签。

假设我有

```
@property (nonatomic, weak) UILabel* label1 
```

然后稍后我可以创建标签并将其放入界面中：

```
UILabel* lab = ...
self.label1 = lab;
[someView addSubview:lab]; 
```

然后甚至稍后我可以参考标签：

```
self.label1.text = @"Bart Simpson Was Here"; 
```

让我们用一组标签来做。我们有：

```
@property (nonatomic, strong) NSMutableArray* labels1; 
```

然后稍后我必须实际制作数组：

```
self.labels1 = [NSMutableArray new]; 
```

然后再稍后我可以创建标签并将其放入界面中，并将其添加到数组中：

```
UILabel* lab = ...
[self.labels1 addObject:lab];
[someView addSubview:lab]; 
```

然后甚至稍后我可以参考标签：

```
self.labels1[0].text = @"Bart Simpson Was Here"; 
```

（因为这是添加到的*第一个*标签`labels1`）

# windows - Winsxs文件夹（windows运行时程序集目录）中的文件夹名称是什么意思

> ID：15961971
> 
> 赞同：2
> 
> 时间：2013-04-12T02:10:54.993
> 
> 标签：windows, windows-runtime, winsxs

**背景：**

*   位于`C:\windows\Winsxs`文件夹中的 Windows 共享运行时库
*   在 Winsxs 中，有两个重要的子文件夹也位于`policies`和`Manifests`
*   除此之外，还有很多运行时程序集位于彼此的子文件夹中。
*   里面的所有子文件夹`Winsxs`并 `policies` 具有相同的命名格式。

**例如文件夹名称：**

*   运行时间：`x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.30729.1_x-ww_6f74963e`
*   政策：`x86_policy.9.0.Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_x-ww_b7353f75`

据我所知，名称的第一部分 (x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.30729.1) 描述了程序集或策略的“processorArchitecture”( `x86`)、“Name”( `Microsoft.VC90.CRT`)、“publicKeyToken”( `1fc8b3b9a1e18e3b`) 和“Version”( `9.0.30729.1`)。

**问题：**`x-ww_6f74963e` assembly( ) 或 policy( `x-ww_b7353f75`) 文件夹名称 的最后一部分描述了什么？

* * *

好的，这是最初的问题（但故事很长）。我在 Windows XP 计算机上部署了我的 C++ MFC 应用程序，该计算机以前安装了一些 C++ 重新分发包和一些运行时程序集的安全补丁。所以这些预装的 C++ 再分发包会自动在`Winsxs/policies`. 这些策略强制使用新的运行时程序集，而不是我的应用程序使用和部署的程序集。但有时这些较新的 DLL 不存在，因为某些其他应用程序删除或程序集可能已损坏。所以我正在寻找一种方法来部署专门用于我的应用程序的运行时程序集（这意味着我的应用程序必须使用它曾经部署的程序并忽略策略）。所以我认为子目录名称的最后一部分与应用程序的身份相关联。我需要找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T23:19:24.463

如果您不能信任全局缓存（在 WinXP 上非常容易损坏它），您可能必须安装程序集的私有副本并在应用程序配置中覆盖它们。

这是我用来覆盖一些程序集以进行调试的 hack：

在您的 exe 文件夹中，删除名为 yourexename.exe.config 的文件，其中包含将真实程序集版本重定向到全局缓存中永远不会存在的策略信息。例如：

```
<configuration>
    <windows>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity type="win32" name="someassemblyname" processorArchitecture="x86" publicKeyToken="sometoken"/>
                <bindingRedirect oldVersion="1.0.0.0-1.0.999.998" newVersion="1.0.999.999"/>
            </dependentAssembly>
        </assemblyBinding>
    </windows>
</configuration> 
```

获取您要使用的程序集的内容，将其放入同一文件夹并编辑清单以具有您在上面使用的版本。例如

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <noInheritable></noInheritable>
    <assemblyIdentity type="win32" name="someassemblyname" version="1.0.999.999" processorArchitecture="x86" publicKeyToken="sometoken"></assemblyIdentity>
    <file name="somedll.dll"/>
</assembly> 
```

最后，您将在安装文件夹中获得以下文件：

```
yourexename.exe
yourexename.exe.config
somedll.dll
someassemblyname.manifest 
```

您的可执行文件将获取 dll 的私有副本。

更多信息：[应用程序配置文件](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374182%28v=vs.85%29.aspx)

编辑：如果您遇到诸如“应用程序未能正确初始化”或“并排配置不正确”之类的问题（一旦您开始使用 sxs，您**将拥有它们），请使用****[sxstrace](http://technet.microsoft.com/en-us/library/hh875651%28v=ws.10%29.aspx)**工具进行诊断（尽管在 Windows XP 上不可用）。这将准确地告诉您哪个组件会导致问题。

# php - W3C 验证警告，名称属性正在逐步淘汰？PHP $_POST 和表单提交会发生什么？

> ID：15961974
> 
> 赞同：-2
> 
> 时间：2013-04-12T02:11:45.857
> 
> 标签：php, html, attributes, w3c, w3c-validation

知道 name 属性的继承者是什么吗？

根据 w3c 验证器 ....

```
Validation Output: 4 Warnings

Below is a list of the warning message(s) produced when checking your document.

    Warning Line 12, Column 21: The name attribute is obsolete. Consider putting an id attribute on the nearest container instead.

    <p><a name="_GoBack"></a></p> 
```

好的，所以我们并不真正关心实际的代码行...我最关心的是 NAME 属性...如果他们不赞成使用它，我们将如何向 php 提交输入字段？

这是我的主要问题......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T02:13:27.977

此警告专门讨论`anchor`元素。该`name`属性对于表单元素仍然完全有效。

对于`anchor`s，它已被弃用，而支持`id`，您可以使用它通过主题标签链接到。

# windows-phone-8 - WindowsPhone 8 （跳转到另一个应用程序

> ID：15961975
> 
> 赞同：0
> 
> 时间：2013-04-12T02:12:07.033
> 
> 标签：windows-phone-8

WindowsPhone 8 （跳转到另一个应用程序） 我想在我的应用程序中调用其他应用程序，这个应用程序我不知道任何消息，只知道名称，我该如何使用

. 等待 Windows 系统。启动器。LaunchUriAsync(new Uri("微信:"));

“微信”应该放在这里叫我要使用的程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:36:28.833

`WMAppManifest.xml`首先，您必须在 Extensions 标签下编写以下协议。`Launcher.LaunchUriAsync`此后，您可以使用方法从具有指定协议名称的任何其他应用程序启动您的应用程序。

```
<Protocol Name="webchat" NavUriFragment="LaunchUri=%s" TaskID="_Default"/> 
```

如需进一步说明，您可以参考以下链接。

[http://msdn.microsoft.com/en-in/library/windowsphone/develop/jj206987(v=vs.105).aspx](http://msdn.microsoft.com/en-in/library/windowsphone/develop/jj206987(v=vs.105).aspx)

# python - 如何以与 pylab 的 specgram() 相同的方式绘制频谱图？

> ID：15961979
> 
> 赞同：15
> 
> 时间：2013-04-12T02:12:49.507
> 
> 标签：python, audio, matplotlib, spectrogram

在 Pylab 中，该`specgram()`函数为给定的幅度列表创建频谱图，并自动为频谱图创建一个窗口。

我想生成频谱图（瞬时功率由 给出`Pxx`），通过在其上运行边缘检测器对其进行修改，然后绘制结果。

```
(Pxx, freqs, bins, im) = pylab.specgram( self.data, Fs=self.rate, ...... ) 
```

问题是，每当我尝试`Pxx`使用`imshow`or绘制修改后的内容时，都会`NonUniformImage`遇到以下错误消息。

> /opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/image.py:336：用户警告：非线性轴不支持图像。warnings.warn("非线性轴不支持图像。")

例如，我正在处理的部分代码如下。

```
 # how many instantaneous spectra did we calculate
    (numBins, numSpectra) = Pxx.shape

    # how many seconds in entire audio recording
    numSeconds = float(self.data.size) / self.rate

    ax = fig.add_subplot(212)
    im = NonUniformImage(ax, interpolation='bilinear')

    x = np.arange(0, numSpectra)
    y = np.arange(0, numBins)
    z = Pxx
    im.set_data(x, y, z)
    ax.images.append(im) 
    ax.set_xlim(0, numSpectra)
    ax.set_ylim(0, numBins)
    ax.set_yscale('symlog') # see http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.set_yscale
    ax.set_title('Spectrogram 2') 
```

## 实际问题

如何使用 matplotlib/pylab 绘制具有对数 y 轴的类图像数据？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-12T02:17:27.467

使用`pcolor`或`pcolormesh`。`pcolormesh`速度要快得多，但仅限于直线网格，因为 pcolor 可以处理任意形状的单元格。 ~~`specgram`使用`pcolormesh`，如果我没记错的话。~~（它使用`imshow`。）

举个简单的例子：

```
import numpy as np
import matplotlib.pyplot as plt

z = np.random.random((11,11))
x, y = np.mgrid[:11, :11]

fig, ax = plt.subplots()
ax.set_yscale('symlog')
ax.pcolormesh(x, y, z)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/PqVh1.png)

您看到的差异是由于绘制了`specgram`返回的“原始”值。实际绘制的是`specgram`缩放版本。

```
import matplotlib.pyplot as plt
import numpy as np

x = np.cumsum(np.random.random(1000) - 0.5)

fig, (ax1, ax2) = plt.subplots(nrows=2)
data, freqs, bins, im = ax1.specgram(x)
ax1.axis('tight')

# "specgram" actually plots 10 * log10(data)...
ax2.pcolormesh(bins, freqs, 10 * np.log10(data))
ax2.axis('tight')

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/tK3Yn.png)

请注意，当我们使用 绘制事物时`pcolormesh`，没有插值。（这是要点的一部分`pcolormesh`——它只是矢量矩形而不是图像。）

如果你想要对数规模的东西，你可以使用`pcolormesh`它：

```
import matplotlib.pyplot as plt
import numpy as np

x = np.cumsum(np.random.random(1000) - 0.5)

fig, (ax1, ax2) = plt.subplots(nrows=2)
data, freqs, bins, im = ax1.specgram(x)
ax1.axis('tight')

# We need to explictly set the linear threshold in this case...
# Ideally you should calculate this from your bin size...
ax2.set_yscale('symlog', linthreshy=0.01)

ax2.pcolormesh(bins, freqs, 10 * np.log10(data))
ax2.axis('tight')

plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/EUdyA.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-08T11:02:30.997

只是为了补充乔的答案......我的视觉输出`specgram`与`pcolormesh`困扰我的（因为嘈杂的壁虎也是）之间的差异很小。

事实证明，如果您传递从`specgram`to返回的频率和时间箱`pcolormesh`，它会将这些值视为使矩形居中而不是边缘的值。

稍微摆弄一下就能让他们更好地对齐（尽管仍然不是 100% 完美）。现在颜色也一样。

```
x = np.cumsum(np.random.random(1024) - 0.2)
overlap_frac = 0
plt.subplot(3,1,1)
data, freqs, bins, im = pylab.specgram(x, NFFT=128, Fs=44100, noverlap = 128*overlap_frac, cmap='plasma')
plt.title("specgram plot")

plt.subplot(3,1,2)
plt.pcolormesh(bins, freqs, 20 * np.log10(data), cmap='plasma')
plt.title("pcolormesh no adj.")

# bins actually returns middle value of each chunk
# so need to add an extra element at zero, and then add first to all
bins = bins+(bins[0]*(1-overlap_frac))
bins = np.concatenate((np.zeros(1),bins))
max_freq = freqs.max()
diff = (max_freq/freqs.shape[0]) - (max_freq/(freqs.shape[0]-1))
temp_vec = np.arange(freqs.shape[0])
freqs = freqs+(temp_vec*diff)
freqs = np.concatenate((freqs,np.ones(1)*max_freq))

plt.subplot(3,1,3)
plt.pcolormesh(bins, freqs, 20 * np.log10(data), cmap='plasma')
plt.title("pcolormesh post adj.") 
```

[![谱图_解释_v01](https://i.stack.imgur.com/rfKUE.png)](https://i.stack.imgur.com/rfKUE.png)

# knockout.js - 在剔除网格中加载日历控件

> ID：15961980
> 
> 赞同：0
> 
> 时间：2013-04-12T02:12:54.433
> 
> 标签：knockout.js, calendar

我有一个使用淘汰赛开发的网格。现在我想在 2 列的网格内放置一个日历。我在我的应用程序中包含了 jquery.findflight-datepicker.js。我正在使用 .js 文件中的 setDatePicker 方法。在运行应用程序时，我无法在我的页面上看到日历。需要帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:02:29.410

你在使用 koGrid 吗？在 koGrid 中，您可以为列规格设置模板。在您的中，您可以尝试使用 ko 绑定来使用模板并让模板为您完成所有显示。

# android - 如何管理 AsyncTask 和需要对话框

> ID：15961985
> 
> 赞同：1
> 
> 时间：2013-04-12T02:13:21.927
> 
> 标签：android, ssh, dialog, android-asynctask, fingerprint

在我的第一个严肃项目的后期状态中，我对 Android 开发还很陌生。简而言之，该程序将 ssh 进入 Linux 主机并执行命令。但我发现自己在试图完成这件事时真的陷入了困境。

我正在使用 ganymed-ssh2 来做 ssh grunt-work。

当点击“活动”按钮时，我希望程序启动 SSH 会话，验证主机指纹 - 必要时提示接受，然后按程序发出远程命令。但这看似简单的几个步骤，却被以下变得非常复杂：

1.  ssh 无法在 UI 线程中执行，所以我必须启动一个 AsyncTask，所以我在接下来的麻烦中描述的所有内容都不在前台 UI 线程中。
2.  要激活 ssh 指纹识别代码，我需要在我的 AsyncTask 类中进行这样的调用：

    ```
    @Override
    protected String doInBackground(String... command) {
        String result;
    result = "";
    try {
      /* Create a connection instance */            
          Connection conn = new Connection(connect.getHost(), connect.getPort());

      /* Now connect */
      ConnectionInfo info = conn.connect(new AdvancedVerifier());

          boolean isAuthenticated = false;
      // first try public key if defined
      if (connect.getPrivateKey() != null)
      isAuthenticated = conn.authenticateWithPublicKey
             (connect.getUserid(), connect.getPrivateKey(), null);  
      // if failed, or not defined, try password if provide
          if (!isAuthenticated && connect.getPassword() != null)
      isAuthenticated = conn.authenticateWithPassword(connect.getUserid(), 
                 new String (connect.getPassword()));

          // all else, get out
          if (!isAuthenticated)
            throw new IOException("Authentication failed.");

      /* Create a session */
          Session sess = conn.openSession();
          sess.execCommand(command[0]);
    } 
    ```

但是，conn.connect(new AdvancedVerifier()) 行会导致调用 AdvancedVerifier 的回调接口类，从而在 connect 调用时中断执行路径以调用该类：

```
 class AdvancedVerifier implements ServerHostKeyVerifier
    {
        public boolean verifyServerHostKey(String hostname, int port, 
          String serverHostKeyAlgorithm,
          byte[] serverHostKey) throws Exception
        {
            final String host = hostname;
            final String algo = serverHostKeyAlgorithm;

            /* Check database   - code removed*/
            /* assuming fingerprint needs verification */

            String hexFingerprint =
                KnownHosts.createHexFingerprint(serverHostKeyAlgorithm,
                    serverHostKey);

            String msg = "Hex Fingerprint: " + hexFingerprint;

            /* right here, I need to display dialog of fingerprint, 
               and ask user for to continue;
               If user accepts, return true, else return false.

               If return true, the above class continues after connect(), if false
               it is aborted.
            */
            return UserAccepts? true : false;
       }
     } 
```

好吧，以我有限的经验，这似乎引发了很多非常混乱的代码。首先，我需要重新连接到 UI 线程，显示一个对话框，然后如果用户选择 OK，然后从 verifyServerHostKey() 返回“true”，分离 UI 线程，并允许 ssh 连接代码恢复。所有这些都无法使用模式对话框。
坦率地说，我真的不知道从哪里开始，正在寻找想法、指导等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:36:24.200

我终于找到了至少一种解决问题的方法。在我的 AdvancedVerifier 类之间使用等待/通知组合并在 onProgressUpdate 中使用 AlertDialog，我能够在用户接受/拒绝主机指纹时暂停验证程序类。

不知道是否有更好的方法，但我想我可以用这个。

# python - 在 Python 中使用正则表达式为单词添加引号

> ID：15961990
> 
> 赞同：2
> 
> 时间：2013-04-12T02:14:28.567
> 
> 标签：python, regex

我正在尝试使用正则表达式用相同的单词替换句子中的每个单词，但引用（我的意思是字母，没有数字）。

例如`4 python code`应该转换为`4 "python" "code"`.

但是这段代码产生了错误的结果

```
>>> import re
>>> s = "4 python code"
>>> re.sub(r'([a-z]*)', r'"\1"', s)
'""4"" "python" "code"' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T02:15:58.417

改变，

```
re.sub(r'([a-z]*)', r'"\1"', s) 
```

至

```
re.sub(r'([a-z]+)', r'"\1"', s) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-12T02:21:35.937

根据您将运行它的次数以及性能的重要性，您可能需要考虑编译您的正则表达式。如果您想要大写字母，您可能还想要`\w`而不是`[a-z]`- 或者您可以使用`[a-zA-Z]`.

```
>>> replacer = re.compile("(\w+)")
>>> replacer.sub(r'"\1"', "4 python code")
'"4" "python" "code"' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:39:18.543

另一种不使用`re`.

```
s = "4 python code"
new = " ".join([item if item.isdigit() else '"{}"'.format(item) for item in s.split()]) 
```

# html - 幻灯片在 https 下不起作用

> ID：15961995
> 
> 赞同：-2
> 
> 时间：2013-04-12T02:14:46.157
> 
> 标签：html, css, https

所以我在主页上有这个幻灯片，显示了五张幻灯片。它工作正常，但不在 https 下

Firefox 加载很好，在 https 下没有问题，但在 chrome 和 IE9/10 下都没有

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:08:36.840

一旦可能的问题是您的网页中可能存在一些语法错误。尝试通过 Visual Studio 到 Dreamweaver 等软件运行它以查找错误。某些网络浏览器可以宽容，但大多数浏览器并非如此。

# javascript - 了解 zepto.matches 函数

> ID：15961998
> 
> 赞同：0
> 
> 时间：2013-04-12T02:15:08.153
> 
> 标签：javascript, zepto

在 zepto 的源代码中，我发现在 zepto.matches 函数中，有一个后备执行，

```
zepto.matches = 函数（元素，选择器）{
    if (!element || element.nodeType !== 1) 返回 false
    var matchesSelector = element.webkitMatchesSelector || element.mozMatchesSelector ||
                          element.oMatchesSelector || element.matchesSelector
    如果（matchesSelector）返回matchesSelector.call（元素，选择器）
    // 回退到执行选择器：
    var match, parent = element.parentNode, temp = !parent
    if (temp) (parent = tempParent).appendChild(element)
    匹配=〜zepto.qsa（父，选择器）.indexOf（元素）
    temp && tempParent.removeChild(元素)
    返回匹配
  }

```

尽管使用了正常的 matchSelector 方式，但我对后备非常好奇，为什么要在前面添加**~ ：**
`~zepto.qsa(parent, selector).indexOf(element)`

```
   document.getElementById("test");
   $.zepto.matches(a,"#test") // -1

```

它返回 -1 ，是对的还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T02:41:12.850

这是[按位 NOT 运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#.7E_%28Bitwise_NOT%29)。在这种情况下，它用于有一个布尔返回值`indexOf`：`indexOf`方法（数组，字符串），如果没有找到匹配则返回 -1，如果找到匹配则返回位置。当然，该位置也可以为 0。所以使用按位 NOT 运算符：

```
console.log(~-1); // 0
console.log(~0) // -1
console.log(~1) // -2
// and so on 
```

所以因为在 JS`0`中被认为是一个“Falsy”值，而任何其他数字——除了`NaN`——是一个“Truthy”值，如果没有找到该元素，`~zepto.qsa(parent, selector).indexOf(element)`就会返回，因此线程可以在`0`代码：

```
var isFound = ~zepto.qsa(parent, selector).indexOf(element);

if (isFound) {
  // do something
} 
```

但是，在这种情况下，我希望 zepto 方法返回一个真正的布尔值，因为它是一个 API 方法。在这种情况下，我宁愿简单地使用：

```
match = zepto.qsa(parent, selector).indexOf(element) > -1; 
```

或者

```
match = !!~zepto.qsa(parent, selector).indexOf(element); 
```

`!`它用于具有正确布尔表示的双精度：如果`indexOf`返回`-1`，则将其`~`转换为`0`，然后是第一个`!`in `true`，第二个是 in `false`，这是我们期望的“未找到”的布尔值。

Bitwise NOT 它也用于其他一些技巧，比如这个：

```
var words = ["a", "b", "c", "b", "b"];
var frequency = words.reduce(function(freq, word) {
    freq[word] = -~freq[word];
    return freq;
}, {}) 
```

此代码返回一个对象，如`{a:1, b:3, c:1}`; 它基本上计算数组中相同字符串值的频率。在这里，按位 NOT 它与[一元否定运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Arithmetic_Operators#-_.28Unary_Negation.29)一起使用以具有增量计数器：所以如果`freq[word]`是`undefined`- 因为这个词还没有在“字典”中 - 那么`~undefined`is `-1`，并且一元否定变成了`1`。下次我们会有`-~1`，因此`- -2`，所以`2`；然后`-~2`会`3`等等。

位运算符非常有用，但也更容易被滥用。在某些情况下是必要的（例如，[零填充右移](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)它是目前 JS 中唯一可以替代 的方法`ToUint32`）它们不是，它们可能导致代码难以阅读。

但他们绝对值得为人所知。

# date - tcpdf 日期错误消息：未定义的偏移量：2

> ID：15961999
> 
> 赞同：0
> 
> 时间：2013-04-12T02:15:14.483
> 
> 标签：date, tcpdf

我有一个日期（datepicker jquery）$fecha_constancia：

```
public function generarReporte(){

            $data_b = array();

            $container = $this->input->get_post('opc_report', TRUE);
            $paciente = $this->input->get_post('paciente', TRUE);
            $odontologo = $this->input->get_post('odontologo', TRUE);
            $fecha_constancia = $this->input->get_post('fecha_constancia', TRUE);
            $diagnostico = $this->input->get_post('diagnostico', TRUE);
            $reposo= $this->input->get_post('reposo', TRUE);

            $reposo = $reposo*7;
            list($day,$mon,$year) = explode('/',$fecha_constancia);
            $nueva_fecha = date('d/m/Y',mktime(0,0,0,$mon,$day+$reposo,$year));

            $data_a = array(
                'fecha_constancia' => $fecha_constancia,
                'diagnostico' => $diagnostico,
                'fecha_reposo' => $nueva_fecha,
                'dias_reposo' => $reposo 
```

但是当我要花时间制作 pdf 时，我会得到以下结果：

遇到 PHP 错误 严重性：通知消息：未定义的偏移量：2 文件名：controllers/constancia.php 行号：38

遇到 PHP 错误 严重性：通知消息：未定义的偏移量：1 文件名：controllers/constancia.php 行号：38

是问题出在日期上，而不是如何解决

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T05:44:45.920

检查 $fecha_constancia 的值是否为日/月/年格式的实际日期。

这是第 38 行，对吗？：

```
list($day,$mon,$year) = explode('/',$fecha_constancia); 
```

根据错误消息，$fecha_constancia 中没有斜杠。它不能为 $mon 和 $year 分配任何东西，因为 explode 正在返回一个包含单个元素的数组。