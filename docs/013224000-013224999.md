# StackOverflow 问答 13224000-13224999

# mysql - 全文搜索带引号的字符串

> ID：13224005
> 
> 赞同：0
> 
> 时间：2012-11-04T23:19:58.497
> 
> 标签：mysql, full-text-search

我想对包含引号的字符串执行全文搜索，例如字符串是`["test1","test2","test1test"]`并且我只想搜索`"test1"`，所以它不应该返回`"test1test"`。

我计划在要搜索的字符串是（未引用的）输入参数的过程中使用它，因此在匹配之前需要在该参数周围添加引号）。上面示例的调用将是`CALL sarch("test");`

什么是正确的语法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:55:50.150

如果您使用`=`，它将按照您的预期进行全字匹配。

```
 SELECT * FROM TABLE1 WHERE TEXTCOL = 'text1'; 
```

这将只返回具有精确值的行，即`text1`。

另一方面，如果你想执行包含类型的搜索（你试图避免），你可以使用`LIKE`运算符：

```
 SELECT * FROM TABLE1 WHERE TEXTCOL LIKE '%text1%';//text1 anywhere in the string
   SELECT * FROM TABLE1 WHERE TEXTCOL LIKE '%text1'; //text1 with any prefix 
   SELECT * FROM TABLE1 WHERE TEXTCOL LIKE 'text1%'; //text1 with any suffix 
```

如果没有，请提供有关您的要求的明确详细信息。

# html - iOS 应用程序中使用什么功能或方法打开相机？

> ID：13224006
> 
> 赞同：-1
> 
> 时间：2012-11-04T23:20:02.520
> 
> 标签：html, objective-c

我希望能够在我正在创建的游戏应用程序中打开相机。该游戏应用程序是使用 iOS Objective C 和 HTML 构建的。我想知道在本机端使用哪些功能，以及在 HTML 和 JS 端使用哪些其他功能？

我知道我必须使用 UIImagePickerController，我不完全明白有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:26:54.977

在 iPad 上，您必须使用`UIImagePickerController`对象和委托，并`UIPopoverController`在 popover 中显示选择器。我的应用程序中的一些代码。我用它从库或相机中加载图像。

```
- (IBAction)choosePhoto:(id)sender {

UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.delegate = self;

if ([sender tag] == FROM_LIBRARY) {
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypePhotoLibrary]) {
        picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    }
    else {
        picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    }
}
else if ([sender tag] == FROM_CAMERA) {
    if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera]) {
        picker.sourceType = UIImagePickerControllerSourceTypeCamera;
    }
    else {
        picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
    }
}

pop = [[UIPopoverController alloc] initWithContentViewController:picker];
pop.delegate = self;
[pop presentPopoverFromRect:CGRectMake(234, 372, 300, 300) inView:self.view permittedArrowDirections:0 animated:YES];

[self hideMenu];
} 
```

那么你必须使用`UIImagePickerControllerDelegate`方法`-(void)imagePickerController:(UIImagePickerController *)pk didFinishPickingMediaWithInfo:(NSDictionary *)info`来获取图像。

一切都在这里[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

# compiler-errors - 每 10 分钟发送一次电子邮件通知

> ID：13224011
> 
> 赞同：-2
> 
> 时间：2012-11-04T23:20:57.840
> 
> 标签：compiler-errors, notifications

*com.plateausystems.elms.util.helper.ElmsNotifyException：在 com.plateausystems.elms.bo.apm.impl.ApmServiceImpl.sendScheduledMails 发送预定邮件时出错（ApmServiceImpl.java:284）*

我们有这个自动过程，系统会在某个时间段或您设置的任何时间发送电子邮件通知。现在该过程每 10 分钟发送一次电子邮件通知。我检查了数据库，这就是我得到的错误。现在我不知道如何才能阻止它预定的邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:30:08.837

事实上，除了它坏了，你没有其他信息。

因此，您可以在 ApmServiceImpl.java 的 sendScheduledMails 方法中添加额外的日志记录。实际捕获抛出的异常的日志记录。

一旦你知道异常（出了什么问题），你就可以修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:38:58.920

如果您有源代码，请调试并获取原因。如果没有，您也许可以使用 cavaj 访问代码，看看在什么情况下会抛出 ElmsNotifyException。太糟糕了，您没有异常原因的类型。

如果代码过去可以工作，现在它崩溃了，我猜问题出在环境中。可能不再允许使用的端口，或者系统的凭据不再已知。

我会检查并查看它停止工作时发生的情况，例如系统升级。祝你好运。

# iphone - 如何设置 AFImageViewer 框架的初始视图？

> ID：13224021
> 
> 赞同：1
> 
> 时间：2012-11-04T23:22:28.037
> 
> 标签：iphone, uiscrollview, uipagecontrol, image-viewer

我正在为一个应用程序构建一个照片库，该应用程序从 facebook 页面加载最新的墙壁图片。我有一个缩略图库和一个详细视图，就像许多其他照片库一样。

我发现了这个不错的小框架，它可以通过页面控制在滚动视图中管理图像的下载和呈现： [https ://github.com/AdrianFlorian/AFImageViewer](https://github.com/AdrianFlorian/AFImageViewer)

如果我不想从索引 0 开始，我只是不知道如何设置初始视图？也就是说，如果用户点击“中间”的图像，我将一个整数传递给框架类。但它去哪儿了？任何提示将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T19:38:06.800

好的，终于找到了。很明显，我觉得发布它有点愚蠢..但也许其他人同样愚蠢并且发现信息很有价值。

图像查看器有一个页面控件，该控件具有当前页面的属性，只需将其设置为所选图像的索引即可。

imageViewer.pageControl.currentPage = *selected_image_integer*;

编辑：好的，所以它不是那么简单。它不能正确滚动图像数组。如果您“向下”滚动，它总是在第一个选定的图像上结束，一些图像会显示两次，有时它们的顺序不同。

# c++ - c++程序返回默认0

> ID：13224027
> 
> 赞同：0
> 
> 时间：2012-11-04T23:23:29.790
> 
> 标签：c++, class, object

我完成了这个基本上只是一个矩形类的初学者 C++ 程序。该程序编译得很好，我遇到的唯一问题是它返回的宽度为零，我不知道为什么。如果有人能告诉我哪里出错并帮助我，我将不胜感激。

```
#pragma once
class theRectangle
{
private:
    int height;
    int width;

public:

    theRectangle();

    theRectangle(int _height, int _width);

    int calcArea() const;

    int calcPerimeter() const;

    bool is_Square()const;

    int Get_Height() const;

    void Set_Height(int _hight);

    int Get_Width() const;

    void Set_Width(int _width);

};

#include "theRectangle.h"
#include <iostream>
using namespace std;
//default constructor
theRectangle::theRectangle()
{
    height = 0;
    width = 0;
}

//parameterized constructor
theRectangle::theRectangle(int _height, int _width)
{

    height = _height;
    width = _width;

}
//get height function
int theRectangle::Get_Height() const
{

    return height;
}
//get width function
int theRectangle::Get_Width() const
{

    return width;
}

//calculate area function
int theRectangle::calcArea() const
{
    return (height*width);
}
//calculate perimiter function
int theRectangle::calcPerimeter() const
{
    return (height+height+width+width);
}
//is square function
bool theRectangle::is_Square()const
{
    if(height == width)
    {
        return true;
    }
    else
    {
        return false;
    }
}

//set height function
void theRectangle::Set_Height(int _height)
{
    height = _height;
}
//set width function
void theRectangle::Set_Width(int _width)
{
    height = _width;
}

#include "theRectangle.h"
#include <iostream>
#include <string>

using namespace std;

void printRectangle(const theRectangle& rec);

int main()
{

    theRectangle rectangleONE;
    int number;
    int numbertwo;

    cout << "\n Please type the height the 1st rectangle:  ";
    cin >> number;
    rectangleONE.Set_Height(number);
    cout << "\n Please type the width of the 1st rectangle: ";
    cin >> numbertwo;
    rectangleONE.Set_Width(numbertwo);

    theRectangle rectangleTWO;
    int numberthree;
    int numberfour;
    //ask user/save data
    cout << "\n Please type the height of the 2nd rectangle:  ";
    cin >> numberthree;
    rectangleTWO.Set_Height(numberthree);
    cout << "\n Please type the width of the 2nd rectangle: ";
    cin >> numberfour;
    rectangleTWO.Set_Width(numberfour);

    theRectangle rectangleTHREE;
    int numberfive;
    int numbersix;

    cout << "\n Please type the height of the 3rd rectangle:  ";
    cin >> numberfive;
    rectangleTHREE.Set_Height(numberfive);
    cout << "\n Please type the width of the 3rd rectangle:  ";
    cin >> numbersix;
    rectangleTHREE.Set_Width(numbersix);

    //print data
    cout << "\nFor rectangle one: ";
    printRectangle(rectangleONE);
    cout << "\nFor rectangle two: ";
    printRectangle(rectangleTWO);
    cout << "\nFor rectangle three: ";
    printRectangle(rectangleTHREE);

system("PAUSE");
return 0;
}

//print rectangle function
// Purpose: print info on rectangle
// Parameters:none
// Returns: none
void printRectangle(const theRectangle& rec)
{
    cout << "\nHeight is:  "    << rec.Get_Height();
    cout << "\nWidth is:  "     << rec.Get_Width();
    cout << "\nArea is:  "      << rec.calcArea();
    cout << "\nPerimeter is:  " << rec.calcPerimeter();
    if (rec.is_Square())
        cout << "\n This rectangle is a Square. ";  

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T23:24:50.940

您的`setWidth`函数实际上是设置您的`height`成员变量，将`width`成员设置为 0：

```
//set width function
void theRectangle::Set_Width(int _width)
{
    height = _width;
} 
```

它应该是：

```
//set width function
void theRectangle::Set_Width(int _width)
{
    width = _width;
} 
```

# 3d - 计算两点之间的矩形并检测位置是否在其中

> ID：13224028
> 
> 赞同：0
> 
> 时间：2012-11-04T23:23:33.277
> 
> 标签：3d, geometry

我正在尝试基本上在游戏中创建一条道路，并且正在努力解决如何检测我现有的几何图形是否真的在这条路上。

基本上我有一个 x,y,z 坐标列表，如果我在所有坐标之间画一条直线，这就是我想要遵循的路径（假设任意宽度）。

问题是我有一个法线/顶点/索引列表，但不知道如何“检测”在我的道路范围内什么在我的道路范围内，什么不在。

任何人都对我如何基本上纠正一个功能有任何想法：

IsPointOnRoad(float[3] 点)

有人对如何做到这一点有任何想法吗？可悲的是，我对我的数学很生疏，并且一直在努力思考这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:04:54.823

经过大量搜索后通过谷歌找到了这个（我的应用程序使用 GLM）：

[http://folk.uio.no/bartloms/teaching/INF3320/2012/code/LineSegment.hpp](http://folk.uio.no/bartloms/teaching/INF3320/2012/code/LineSegment.hpp)

大帮助！

# java - java GUI 3d立方体在所有方面着色

> ID：13224034
> 
> 赞同：0
> 
> 时间：2012-11-04T23:24:05.433
> 
> 标签：java, user-interface, layout, 3d, shapes

我有一个任务，我需要为一个正在绘制的 3d 立方体设置动画，并用一条一条连接的线来形成立方体。之后，立方体的每一面都需要用不同的颜色着色，一旦每一个都被着色，暂停，然后为下一个面着色。

我该怎么做呢？我提供了我的代码，我尝试在制作立方体后立即填充背景方块，但出现以下错误：

```
 Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: Coordinate out of   bounds!
    at    sun.awt.image.IntegerInterleavedRaster.getDataElements(IntegerInterleavedRaster.java:203)
    at java.awt.image.BufferedImage.getRGB(BufferedImage.java:881)
    at drawCube.floodFill(drawCube.java:50)
    at drawCube.main(drawCube.java:181) 
```

这是我的代码，让我知道最好的方法是什么。

```
import java.awt.image.BufferedImage;
import javax.swing.JLabel;
import javax.swing.ImageIcon;
import java.awt.Point;

class drawCube
{
  static void fillImage(BufferedImage image, int red, int green, int blue)
{
int packedRGB = packRgb(255,255,255);//white

for (int y=0;y<image.getHeight(null);y++)
{
  for (int x=0;x<image.getWidth(null);x++)
    image.setRGB(x,y,packedRGB);
}
}

public static void floodFill(BufferedImage image, int x,int y, int fillColor)
{
java.util.ArrayList<Point> examList=new java.util.ArrayList<Point>();

int initialColor=image.getRGB(x,y);
examList.add(new Point(x,y));

while (examList.size()>0)
{
  Point p = examList.remove(0);  // get and remove the first point in the list
  if (image.getRGB(p.x,p.y)==initialColor)
  {
    x = p.x;  y = p.y;
    image.setRGB(x, y, fillColor);  // fill current pixel

    examList.add(new Point(x-1,y));        // check west neighbor
    examList.add(new Point(x+1,y));        // check east neighbor
    examList.add(new Point(x,y-1));        // check north neighbor
    examList.add(new Point(x,y+1));        // check south neighbor

   // waitNS(1);    // delay to see floodFill() work
   // repaintImage(image);

  }
}
} 

 private static void repaintImage(BufferedImage image)
 {
_imageLabel.setIcon(new ImageIcon(image));
_imageLabel.repaint();   
 }

public static void waitNS(long ns)  
{
try {  Thread.sleep(ns);  }   // Pause ns
  catch (Exception ignore) { ; }
}

public static int packRgb(int r,int g,int b)
{
 return (r*256+g)*256+b;
}

static JLabel _imageLabel;
public static void main(String[] args) throws Exception
{
// create an 300x300 RGB image
BufferedImage image=new BufferedImage(300,300,BufferedImage.TYPE_INT_RGB);

// fill the image with green color
fillImage(image,0,255,0);        

JLabel imageLabel=new JLabel();
_imageLabel = imageLabel;  // make it global
imageLabel.setIcon(new ImageIcon(image));
imageLabel.setText("Filling the box with yellow color ...");

javax.swing.JFrame window=new javax.swing.JFrame();
window.setTitle("Cube Experiment");
window.setDefaultCloseOperation(javax.swing.JFrame.EXIT_ON_CLOSE);

window.add(imageLabel);

window.pack();
window.setVisible(true);

java.awt.Graphics2D gr=(java.awt.Graphics2D) image.getGraphics();

int x1 = 50; int y1 = 150;
int x2 = 150; int y2 = 150;
int x3 = 150; int y3 = 250;
int x4 = 50; int y4 = 250;

gr.setColor(new java.awt.Color(0,0,0));  // blue
gr.setStroke(new java.awt.BasicStroke(2));  // set pen width to 2 pixels

gr.drawLine(50, 150, 150, 150);
repaintImage(image);
waitNS(500);

gr.drawLine(150, 150, 150, 250);
repaintImage(image);
waitNS(500);

gr.drawLine(150, 250, 50, 250);
repaintImage(image);
waitNS(500);

gr.drawLine(50, 250, 50, 150);
repaintImage(image);
waitNS(500);

 gr.drawLine(0, 300, 100, 300);
 repaintImage(image);
 waitNS(500);

 gr.drawLine(0, 300, 50, 250);
 repaintImage(image);
 waitNS(500);

 gr.drawLine(100, 300, 150, 250);
 repaintImage(image);
 waitNS(500);

 gr.drawLine(100, 300, 100, 200);
repaintImage(image);
waitNS(500);

 gr.drawLine(0, 285, 0, 200);
repaintImage(image);
waitNS(500);

 gr.drawLine(0, 200, 100, 200);
repaintImage(image);
waitNS(500);

 gr.drawLine(0, 200, 50, 150);
 repaintImage(image);
 waitNS(500);

 gr.drawLine(100, 200, 150, 150);
 repaintImage(image);
 waitNS(500);

// fill the square with yellow color
int yellow = packRgb(255,255,0);
int black = packRgb(0,0,0);
//floodFill(image,(x1+x2)/2, (y1+y4)/2, yellow);//flood fill at center

imageLabel.setIcon(new ImageIcon(image));
imageLabel.setText("Completed !");

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T19:19:12.297

这里有两个问题：ArrayIndexOutOfBoundsException 和一个不幸的巧合。

您的洪水方法包括一个循环，该循环从上一个测试点向每个方向生成点，但没有说明何时停止。结果是可以在300x300区域之外生成一个点，调用image.getRGB(int,int)时抛出异常。
在对元素进行循环操作时，记住数组的限制通常是一个好主意。例如：

```
if(x-1>0) examList.add(new Point(x-1,y));   // check west neighbour
if(x+1<300) examList.add(new Point(x+1,y)); // check east neighbour
if(y-1>0) examList.add(new Point(x,y-1));   // check north neighbour
if(y+1<300) examList.add(new Point(x,y+1)); // check south neighbour 
```

或者不那么精确：

```
 if (p.x>0 && p.y>0 && p.x<300 && p.y<300 && image.getRGB(p.x,p.y)==initialColor) 
```

此外，您开始洪水的点恰好位于立方体的其中一条构造线上，因此这些线被填充而不是空间。选择起点时要更加小心。

```
floodFill(image, 60, 160, java.awt.Color.yellow.hashCode()); 
```

应该管用。

希望这可以帮助。

# java - 如何使用 JUNIT 测试 spring jdbcTemplate？

> ID：13224036
> 
> 赞同：5
> 
> 时间：2012-11-04T23:24:13.233
> 
> 标签：java, spring, junit, datasource, jdbctemplate

我有一个我正在尝试测试的 DAO，它使用 jdbcTemplate。spring jdbcTemplate 上有一个 datasoruce 属性，需要设置它才能工作。但是，当 JUNIT 测试运行时，数据源不存在并且 bean 创建失败。如何设置 jdbcTemplate 的数据源以在 JUNIT 测试用例中工作？

任何帮助表示赞赏。

谢谢

```
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'thisDatasource' defined in class path resource [userDataBaseContext.xml]: Invocation of init method failed; nested exception is javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1420)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    ... 33 more
Caused by: javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.factory.initial
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:645)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:288)
    at javax.naming.InitialContext.getURLOrDefaultInitCtx(InitialContext.java:325)
    at javax.naming.InitialContext.lookup(InitialContext.java:392)
    at org.springframework.jndi.JndiTemplate$1.doInContext(JndiTemplate.java:154)
    at org.springframework.jndi.JndiTemplate.execute(JndiTemplate.java:87)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:152)
    at org.springframework.jndi.JndiTemplate.lookup(JndiTemplate.java:178)
    at org.springframework.jndi.JndiLocatorSupport.lookup(JndiLocatorSupport.java:95)
    at org.springframework.jndi.JndiObjectLocator.lookup(JndiObjectLocator.java:105)
    at org.springframework.jndi.JndiObjectFactoryBean.lookupWithFallback(JndiObjectFactoryBean.java:201)
    at org.springframework.jndi.JndiObjectFactoryBean.afterPropertiesSet(JndiObjectFactoryBean.java:187)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1479)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 40 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:00:28.113

使用[Spring 测试框架](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/testing.html)。它允许您的单元测试利用为您的应用程序上下文配置的 Spring 容器。设置完成后，您可以在数据源上使用 @Autowired 来注入测试 jdbcTemplate 所需的数据源。

这是我使用 Spring-Data 进行的一项测试的示例。

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.transaction.annotation.Transactional;
import org.tothought.entities.Post;
import org.tothought.entities.PostPart;
import org.tothought.entities.Tag;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
@Transactional
public class PostRepositoryTest {

    @Autowired 
    TagRepository tagRepository;

    @Test
    public void findOneTest() {
        Post post = repository.findOne(1);
        assertNotNull(post);
        assertTrue(post.getTags().size()>1);
    }
} 
```

注意`@ContextConfiguration`注释。此注释指向用于设置 Spring 容器的上下文，然后我从中注入我的存储库。由于我没有为我的上下文指定名称，因此 Spring 在与我的测试类相同的目录中搜索名为 PostRepositoryTest-context.xml 的配置文件。上面提供的文档中更详细地描述了此设置。

要开始使用该项目，请在您的 pom.xml 文件中包含以下内容。

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-test</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:25:40.997

我使用以下链接中的信息解决了我的问题：

[如何使用 Spring 测试模拟的 JNDI 数据源？](https://stackoverflow.com/questions/5940895/how-to-test-a-mocked-jndi-datasource-with-spring)

我没有使用 spring 文件中定义的数据源，而是创建了一个新的数据源：

```
<bean id="thisDatasource"
class="org.springframework.jdbc.datasource.DriverManagerDataSource"
p:driverClassName="com.microsoft.sqlserver.jdbc.SQLServerDriver"
p:url="jdbc:sqlserver://sqlserver:1234;databaseName=myTables"
p:username="userid"
p:password="passw0rd" /> 

<bean id="databaseUserDAOTest" 
class="com.spring.security.custom.user.detail.DatabaseUserDAO" >
<!-- Inject the datasource of the jdbcTemplate -->
<property name="dataSource" ref="thisDatasource" />        
</bean> 
```

# html - 在 HTML5 视频上映射区域

> ID：13224037
> 
> 赞同：5
> 
> 时间：2012-11-04T23:24:19.567
> 
> 标签：html, video, html5-video

在 HTML 中的图像上，`<map>`标签允许您指定图像中可以操作的区域。是否有类似的东西可以与 HTML5`<video>`标签一起使用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T13:43:25.760

`<map>`不适用于`<video>`元素，但你可以伪造它。

一种方法是制作透明图像并将其放置在视频顶部。制作一个 1x1 像素、完全透明的 png 文件，并像这样设置它：

```
<div id="container" style="position: relative; width: 640px; height: 360px;">
    <video src="foo.webm" width="640" height="360" style="position: absolute;"></video>
    <img src="pixel.png" usemap="mymap" width="640" height="360" style="position: absolute;"/>
</div> 
```

当您使用它时，您不妨节省一些网络开销并将该 png 加载为 DataURI。应该很小。

您甚至可以使用 Popcorn.js 在视频的不同时间换出不同的图像映射。

不利的一面是您将失去点击视频的能力，因为它被图像挡住了。因此，如果您想使用本机控件，请确保通过将高度设置得小一些，在底部留出一些空间。

# facebook - 将 Facebook 签到添加到网站

> ID：13224046
> 
> 赞同：1
> 
> 时间：2012-11-04T23:25:31.493
> 
> 标签：facebook, checkin

我有一个网站，其中包含本地社区的不同场地资料页面，我们希望发布他们在 facebook 上收到的签到。我如何显示他们的签到，是否有可能根据男性或女性来区分签到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:57:37.727

是的，您可以使用 FQL 执行此操作：

[https://developers.facebook.com/docs/reference/fql/checkin/](https://developers.facebook.com/docs/reference/fql/checkin/)

示例查询将是：

`SELECT author_uid, tagged_uids, message, timestamp FROM checkin WHERE page_id = 166793820034304`

这只会返回公共签到，将此处使用的 page_id 替换为您创建的页面的 ID，您将看到该位置的任何内容。然后，您可以使用 author_uid 和 tagged_uids 来查询 Graph API（或 FQL）用户对象：

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

该对象包括一个`gender`字段。

# xml - 项目级别的作者和类别提要元素是否必须与渠道级别匹配？

> ID：13224047
> 
> 赞同：1
> 
> 时间：2012-11-04T23:25:34.947
> 
> 标签：xml, rss, feed, atom-feed

我注意到提要在顶级提要级别和提要项级别都有这些元素：

```
<feed>
  <author> ... </author>
  <category> ... </category>

  <item>
    <author> ... </author>
    <category> ... </category>
  </item>

  ... 
```

提要级别的内容是否必须与项目级别的内容相匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:40:26.123

它们不必相同。

把它想象成一部恐怖故事选集。在顶层你有编辑，在每`<item>`一层你都有一个单独故事的作者。有时，如果编辑者也是项目的作者，这些可能是相同的，因为它们通常在单作者博客上。

> [`<author>`的子元素`<item>`](http://cyber.law.harvard.edu/rss/rss.html#ltauthorgtSubelementOfLtitemgt "哈佛法学院的 RSS 2.0")
> 
> 这是项目作者的电子邮件地址。对于通过 RSS 聚合的报纸和杂志，作者是撰写所`<item>`描述文章的人。对于协作网络博客，项目的作者可能与总编辑或网站管理员不同。`<author>`对于由单个人创作的博客，省略该元素是有意义的。

这与`<category>`元素相同。在顶部，它描述了针对野外其他提要/站点的整个提要。在每个项目上，它都会与网站上的其他帖子进行比较。

高通道级别没有`<author>`标签。相反，您应该使用其中一个`<managingEditor>`或`<webMaster>`元素作为有效 RSS 提要的一部分。

如果您担心将电子邮件地址放在这些元素中，您可以`<author>`完全跳过该元素，因为它是可选的并且不会影响您的 RSS 的格式正确的验证。

# asp.net - Gridview连续多个单选按钮

> ID：13224048
> 
> 赞同：0
> 
> 时间：2012-11-04T23:25:44.797
> 
> 标签：asp.net, gridview, radio-button

Gridview连续多个单选按钮

我在 Gridview 中连续三个 RadioButtons。我需要得到检查状态，但是当你选择一个按钮时它永远不会改变。这是代码：

```
 <asp:TemplateField>
         <ItemTemplate>
               <asp:RadioButton runat="server" GroupName="venc" ID="rdo0" Checked="True" />
         </ItemTemplate>
       </asp:TemplateField>

       <asp:TemplateField HeaderText="2° Venc.">
         <ItemTemplate>
              <asp:RadioButton runat="server" GroupName="venc" ID="rdo3"    />
          </ItemTemplate>
       </asp:TemplateField>

    protected void gvCuotas_RowCommand(object sender, GridViewCommandEventArgs e)
    {
        for (int i = 2; i < 5; i++)
        {
            radio = (RadioButton)fila.FindControl("rdo" + i);
            if (radio.Checked)
               {
                  vencimiento = i; //never gets here.
                  break;
               }
            }
        }
   } 
```

ASP。

```
<asp:GridView ID="gvCuotas" runat="server" AutoGenerateColumns="False" 
                        Caption="Cuotas Pendientes"  capCellSpacing="2" CellPadding="2" 
                    HeaderStyle-BackColor="Aqua" HorizontalAlign="Center" Width="80%" 
                        BorderStyle="Solid" onrowcommand="gvCuotas_RowCommand" 
                        onrowdatabound="gvCuotas_RowDataBound" > 
```

在后面：

```
public partial class Cuota1 : System.Web.UI.Page
{
    DataClasses1DataContext baseAlumnos = new DataClasses1DataContext();

    protected void Page_Load(object sender, EventArgs e)
    {

        var cuotas = from p in baseAlumnos.Cuotas where p.Pagado.Equals(0) 
                     select new { p.Mes, p.Observacion, p.Vencimientos, p.Pagado};

        gvCuotas.DataSource = cuotas;
        gvCuotas.DataBind();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:10:31.920

修改您的标记以在 gridview 中包含 OnRowCommand 事件处理程序

```
<asp:GridView runat="server" ID="gv" AutoGenerateColumns="False" OnRowCommand="OnRowCommand">
    <Columns>
        <asp:TemplateField>
         <ItemTemplate>
               <asp:RadioButton runat="server" GroupName="venc" ID="rdo0" Checked="True"/>
         </ItemTemplate>
       </asp:TemplateField>

       <asp:TemplateField HeaderText="2° Venc.">
         <ItemTemplate>
              <asp:RadioButton runat="server" GroupName="venc" ID="rdo3"    />
          </ItemTemplate>
       </asp:TemplateField>
       <asp:ButtonField HeaderText="Confirm" ButtonType="Button" />
    </Columns>
</asp:GridView> 
```

这是 OnRowCommand 事件处理程序的代码

```
protected void OnRowCommand(object sender, GridViewCommandEventArgs e)
{

    int index = Convert.ToInt32(e.CommandArgument);
    GridViewRow gvRow = gv.Rows[index]; 

    for (int i = 2; i < 5; i++)
    {
        var radio = (RadioButton)gvRow.FindControl("rdo" + i);
        if (radio!=null && radio.Checked)
           {
              //This point will hit for the selected radiobutton 
              break;
           }
    }
} 
```

请确保您仅在页面加载时绑定数据，而不是在页面回发时绑定数据。

```
protected void Page_Load(object sender, EventArgs e)
{
    if(!IsPostBack){ 
        var cuotas = from p in baseAlumnos.Cuotas where p.Pagado.Equals(0) 
                 select new { p.Mes, p.Observacion, p.Vencimientos, p.Pagado};
        gvCuotas.DataSource = cuotas;
        gvCuotas.DataBind();
    }
} 
```

# python - 制作 str.find 函数

> ID：13224049
> 
> 赞同：-4
> 
> 时间：2012-11-04T23:25:52.780
> 
> 标签：python

我一直在尝试为我正在做的一堂课创建 str.find 方法，但我不太确定它是如何完成的。如果有人可以帮助我，请做。如果有帮助，我正在 python 2.7 上运行。我试图在更大的序列中找到一个子序列以及它在序列中出现的次数。前任。ACAAGATGCCATTGTCCCCCGGCCTCCTGCTGCTGCTGCTCTCCGGGGCCACGGCCACCGCTGCCCTGCCCCTGGAGGGTGGCCCCACCGGCCGAGACAGCGAGCATATGCAGGAAGCGGCAGGAATAAGGAAAAGCAGCCTCCTGACTTTCCTCGCTTGGTGGTTTGAGTGGACCTCCCAGGCCAGTGCCGGGCCCCTCATAGGAGAGGAAGCTCGGGAGGTGGCCAGGCGGCAGGAAGGCGCACCCCCCCAGCAATCCGCGCGCCGGGACAGAATGCCCTGCAGGAACTTCTTCTGGAAGACCTTCTCCTCCTGCAAATAAAACCTCACCCATGAATGCTCACGCAAGTTTAATTACAGACCTGAA

现在我必须找到每个TTG出现在逗号中的位置。再次感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T23:34:34.263

Python 中的方法可以通过类访问方法转换为普通函数。

```
>>> 'abc'.find('b')
1
>>> str.find('abc', 'b')
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T23:34:19.017

Python 的`string.find`方法是[`fastsearch`由`stringlib/fastsearch.h`](http://hg.python.org/cpython/file/daa1a7a51319/Objects/stringlib/fastsearch.h). 该函数实现了著名的[Boyer-Moore 算法](http://en.wikipedia.org/wiki/Boyer%E2%80%93Moore_string_search_algorithm)的一个版本。

# html - HTML更改换行触发器？

> ID：13224062
> 
> 赞同：5
> 
> 时间：2012-11-04T23:28:14.383
> 
> 标签：html, css, web

CSS/HTML 中是否有任何方法可以更改哪些字符导致文本中的换行符被允许？例如，如果我有包含文本“fooooooo/barrrrrrrrr”的表格数据，它不会分成两行，但如果它包含“fooooooo barrrrrrrrr”，它会。

有没有办法将标点符号添加到可以触发换行符的内容中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T06:14:34.703

在 CSS/HTML 中无法更改导致、允许或阻止文本换行符的字符集。但是，每次*出现*一个字符都可能影响这些事情。也就是说，您不能笼统地说“允许在 '/' 之后换行”，但您可以在特定出现的“/”之后注入一些标记或内容以允许在那里换行。

请注意，浏览器具有不同的换行行为。例如，Opera 将斜杠“/”视为允许在其后换行。行为也可能取决于上下文。请参阅我[在浏览器中换行](http://www.cs.tut.fi/~jkorpela/html/nobr.html)的页面。

对于任何知道实用方法并且不太担心标准化者不愿意接受它的人来说，认为过去很简单：`<wbr>`标签。它仍然是简单实用的方式，例如`fooooooo/<wbr>barrrrrrrrr`，但它不再是最跨浏览器的方式。较新的方式，零宽度空格 U+200B，可以写成`&#x200b;`HTML，在现代浏览器上运行良好，但在一些旧版本的 IE 上，它会造成混乱（在这个控制字符出现的地方会显示一个小矩形）。

如果您愿意使用有些冗长的代码，您可以将这两种方式结合起来。您将同时使用`<wbr>`一个包含空内容但具有零宽度空间的内联元素作为生成的内容。这避免了 IE 6 上的问题，因为它不支持在 CSS 中生成的内容（但可以识别`<wbr>`标记）。例子：

```
fooooooo/<wbr><a class=wbr></a>barrrrrrrrr 
```

使用 CSS 代码

```
.wbr:after { content: "\00200B"; } 
```

测试和演示：[jsfiddle](http://jsfiddle.net/yxRUQ/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-04T23:33:55.993

不，但是有 Unicode 字符（最值得注意的是，U+200B 零宽度空格）将允许在指定点换行，同时不插入任何可见字符或空格。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-04T23:34:38.313

您可以使用[css word-wrap 属性](http://www.w3schools.com/css3/css3_text_effects.asp#normal)，以便您的长字根据其容器宽度被破坏：

```
word-wrap: break-word; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T23:57:41.443

没有办法告诉浏览器允许对特定字符进行换行。

CSS3属性将通过允许在*任何*字符`word-wrap: break-word;`上换行来帮助您到达那里。如果文本长于其包含元素的计算最大宽度，则会发生这种情况。

 *如果您在服务器端动态生成 HTML 输出，您可以进行正则表达式搜索和替换，以便在您想要（可选）换行的字符之前插入一个空格，但是在不知道上下文的情况下，很难更具体关于那个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T23:46:08.857

作为替代方案，我过去使用过以下内容：

```
<span style="display:block;float:left;" /> 
```

或者更好的是在你的css中定义这个：

```
.shy { display:block; float:left; } 
```

然后使用：

```
<span class="shy" /> 
```

因此，无论您将上述内容放在字符串中的何处，如果需要，它将充当中断。

```
stringthathasnospaceswhatsoever<span class="shy" />willbreakjustjustatthespan. 
```*

# haxe - 是否可以在 Haxe 中检测当前的操作系统？

> ID：13224070
> 
> 赞同：3
> 
> 时间：2012-11-04T23:29:23.657
> 
> 标签：haxe

在 Haxe 中，有什么方法可以获取当前操作系统的名称吗？我正在寻找一种适用于所有 Haxe 目标语言的方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T23:29:23.657

使用 Sys.systemName() 获取操作系统的名称 - 这适用于多种目标语言。

# jquery - 制作一个 jQuery 文本滑块

> ID：13224075
> 
> 赞同：0
> 
> 时间：2012-11-04T23:29:58.080
> 
> 标签：jquery, html, css

所以基本上我有多个名为quote 的div 类，其中包含一个文本和一个blockquote。我怎样才能使它每 5 秒**淡出**到下一个报价类？

标记如下所示：

```
<div id="quoteWrapper">
<div class="quote">

    <blockquote>Quote goes here</blockquote>

    <p class="quoteBy">Author</p>

</div>

<div class="quote">

    <blockquote>Second Quote goes here</blockquote>

    <p class="quoteBy">Author</p>

</div>

<div class="quote">

    <blockquote>Third Quote goes here</blockquote>

    <p class="quoteBy">Author</p>

</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:06:46.960

[这里](https://stackoverflow.com/questions/914951/show-and-hide-divs-at-a-specific-time-interval-using-jquery)有一个类似的问题。我要做的是创建一个使用 jquery 淡出当前报价并在回调中淡出下一个的间隔。您可以通过添加一个类来确定当前显示的报价

```
<div class="quote visible">

    <blockquote>Quote goes here</blockquote>

    <p class="quoteBy">Author</p>

</div>

<div class="quote">

    <blockquote>Second Quote goes here</blockquote>

    <p class="quoteBy">Author</p>

</div> 
```

然后

```
setInterval(showQuote, 5000);

...

function showQuote() {
    // get visible quote
    $('.quote.visible').fadeOut(function() {
        // remove visible class from old quote and add it to new
        // get next quote and fadeIn() when fadeout finishes
    });
} 
```

# c# - AutoMapper 复杂的嵌套映射

> ID：13224083
> 
> 赞同：6
> 
> 时间：2012-11-04T23:31:04.277
> 
> 标签：c#, mapping, automapper, projection

我已经[在 AutoMapper 的 GitHub 上阅读了这个示例](http://docs.automapper.org/en/stable/Nested-mappings.html)，但该示例假设只有一种映射 InnerSource 的方法：

```
Mapper.CreateMap<OuterSource, OuterDest>();
Mapper.CreateMap<InnerSource, InnerDest>();
Mapper.AssertConfigurationIsValid();

var source = new OuterSource
    {
        Value = 5,
        Inner = new InnerSource {OtherValue = 15}
    };

var dest = Mapper.Map<OuterSource, OuterDest>(source); 
```

在我的项目中，我正在序列化使用 EF 创建的具有循环引用的对象。这样做的原因是我需要从不同的“方向”到达对象。例如，如果我要求提供用户列表，我想查看他们关联的项目。如果我要求一个项目，我想查看与该项目关联的用户。

这些循环引用可以变得相当深，例如`User.Role.Project.TaskTime.User`,`User.TaskTime.Project.Task.TaskType.VisibleToRole.Role.User`等。

所以我需要嵌套映射相当深，它的完成方式取决于第一个映射是什么。

目前我正在做：

```
Mapper.CreateMap<User, UserFull>()
    .ForMember("TaskTimes", opt => opt.MapFrom(src => Mapper.Map<ICollection<TaskTime>, UserTaskTime>(src.TaskTimes)));
Mapper.CreateMap<TaskTime, UserTaskTime>()
    .ForMember("Task", opt => opt.MapFrom(src => Mapper.Map<Task, UserTaskTimeTask>(src.Task)));
//... 
```

该片段的视图模型如下所示：

```
public class UserFull
{
    public string Email { get; set; }
    public string Name { get; set; }

    public virtual ICollection<TaskTime> TaskTimes { get; set; }
    //...
}

public class UserTaskTime
{
    public int Id { get; set; }
    public Task Task { get; set; }
    //...
}

public class UserTaskTimeTask
{
    //...
} 
```

这是正确的吗？我应该从视图模型中投影每个成员并使用投影手动映射它吗？还是有更清洁的方法来做到这一点？

# c - 如何将整数指针设置为数字，并使其表现为非指针整数？

> ID：13224088
> 
> 赞同：3
> 
> 时间：2012-11-04T23:31:34.617
> 
> 标签：c, pointers

这是当前不起作用的代码。我需要 j 作为指针。

```
Substring(const char a[],int x,int y,char b[])
{
    int *j=0;
    for(x;x<=y&&a[x]!='\0';x++)
    { b[*j]=a[x];
         *j++;}
    b[*j] ='\0';
    return (b);

} 
```

以下代码运行良好，唯一的问题是 j 不是指针。

```
Substring(const char a[],int x,int y,char b[])
    {
        int j=0;
        for(;x<=y&&a[x]!='\0';x++)
        { b[j]=a[x];
             j++;}
        b[j] ='\0';
        return (b);

    } 
```

我希望第一个代码表现得像第二个，关于如何做到这一点的任何想法？代码编译并执行，但它停止工作。调试没有帮助。我不能使用超过 1 个变量 - j。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T23:33:24.653

像这样：

```
int real_j = 0;
int * j = &real_j;

// ...

++(*j); 
```

这当然是完全没有意义的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-04T23:36:31.047

不好了

`int *j = 0;`将`j`指向 0 （或`NULL`）。

方法一：

```
int jx = 0;
int *j = &jx; 
```

方法二：

```
 int *j = malloc(sizeof(int));
    *j = 0;
....
 ///don't forget to free(j); 
```

# iphone - UICollectionView registerCell - 空白单元格

> ID：13224090
> 
> 赞同：9
> 
> 时间：2012-11-04T23:31:51.770
> 
> 标签：iphone, objective-c, ipad, uicollectionview

我刚刚开始第一次玩 UICollectionView。似乎工作得很好，但有一个问题和一个关于它的问题。

我的 UICollectionView 设置如下，并带有一个自定义单元格：

```
- (NSInteger)collectionView:(UICollectionView *)view numberOfItemsInSection:(NSInteger)section
{
    return 10;
}

- (NSInteger)numberOfSectionsInCollectionView: (UICollectionView *)collectionView
{
    return 1;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    ContactCell *cell = [cv dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];
    cell.nameLbl.text = @"text";

    return cell;
}

- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout sizeForItemAtIndexPath:(NSIndexPath *)indexPath
{
    return CGSizeMake(145, 95);
}

- (UIEdgeInsets)collectionView:
(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout insetForSectionAtIndex:(NSInteger)section
{
    return UIEdgeInsetsMake(10, 10, 10, 10);
} 
```

所以这都是花花公子，但是我已将此行添加到`viewDidLoad`：

```
[collectionView registerClass:[ContactCell class] forCellWithReuseIdentifier:@"Cell"]; 
```

这造成了麻烦，我不明白为什么。当我启用此行时，我的所有单元格都变为空白。怎么会？我错过了什么？

另外，据我了解，如果该行启用可重用单元格，为什么我必须使用集合视图而不是表视图？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-05T00:42:03.397

您的情节提要会自动注册您在情节提要中设计的单元格，以获取您在界面构建器的右侧窗格中为该单元格指定的重用标识符。通过为该重用标识符重新注册您的类，集合视图只需在您的子类上调用 alloc init 并期望以编程方式设置视图。

从[文档中](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html)：

> 如果您之前使用相同的重用标识符注册了类或 nib 文件，则您在 cellClass 参数中指定的类将替换旧条目。如果你想从指定的重用标识符中注销类，你可以为 cellClass 指定 nil。

如果您想**在故事板之外**设计单元格，您可以以编程方式设置界面或在单独的 xib 中设置单元格，然后调用

`- (void)registerNib:(UINib *)nib forCellWithReuseIdentifier:(NSString *)identifier`

笔尖必须有一个顶级视图，它是您的自定义子类的一个单元格，并在界面构建器中设置了正确的重用标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-25T13:45:49.570

消除

```
[self.collectionview registerClass:[NewCell class] forCellWithReuseIdentifier:@"Cell"]; 
```

对于故事板，我们不需要这条线

# objective-c - ObjectiveC：将方法参数传递给块内的块？

> ID：13224093
> 
> 赞同：0
> 
> 时间：2012-11-04T23:32:42.860
> 
> 标签：objective-c, ios, objective-c-blocks

我有一个方法：

```
- (void)myMethod:(NSError *)error
{
    [[self.data allKeys] enumerateUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
        __block NSString *channelName = obj;
        NSArray *subArray = [self.data objectForKey:obj];
        [subArray enumerateUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
            Wrapper *wrapper = obj;
            [wrapper handleError:error forChannel:channelName];
        }];
    }];
} 
```

1) 我需要为内部块的参数 obj、idx 和 stop 使用不同的名称吗？

2）我是否需要将channelName定义为__block？

3）我是否需要在所有块之外定义一个弱自我并在块中使用它？

编辑：

`channelName`由内部块使用，并传递给处理程序块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:38:39.830

您不需要为内部块使用不同的参数名称，除非内部块需要访问外部块的参数。在内部块中，重复的名称只是隐藏了外部块的参数。如果需要，不同的名称将消除隐藏。

`__block`如果要在块中修改变量，您只需要标记变量。对于变量的只读访问，`__block`不需要。

我对`self`问题的一部分并不积极。通常，当您使用可能导致保留周期的变量时，您会在 Xcode 中看到警告。除非您看到警告，否则您应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:39:11.360

**我在做正确的事吗？**
它做你需要它做的事吗？

**我是否需要为内部块的参数 obj、idx 和 stop 使用不同的名称？**
你试过了吗？它有效吗？

**我是否需要将 channelName 定义为 __block？**
你真的在任何地方使用它吗？如果不是，为什么要宣布这一切？

**我是否需要在所有块之外定义一个弱自我并在块中使用它？**
不，这里没有保留周期

* * *

您可以考虑在字典上使用块枚举来稍微清理一下

```
[self.data enumerateKeysAndObjectsUsingBlock:^(id key, NSArray *subArray, BOOL *stop) {
    [subArray enumerateUsingBlock:^(id obj, NSUInteger idx, BOOL *stop){
        Wrapper *wrapper = obj;
        [wrapper handleError:error];
    }];
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T23:39:45.957

> 我在做正确的事吗？

~~不，您在两个参数列表前面都缺少块文字声明符 (^)。~~ 是的。

> 我是否需要为内部块的参数 obj、idx 和 stop 使用不同的名称？

不，这些参数是块的参数，并且可以在其范围内访问。

> 我是否需要将 channelName 定义为 __block？

不，它是在块的范围内声明的，并且只在该块内进行修改，因此它不需要`__block`说明符。 `__block`将块范围之外的变量声明为在块的上下文中是可变的。

> 我是否需要在所有块之外定义一个弱自我并在块中使用它？

不，但这是个好主意。块保留其范围。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T00:37:31.013

您的块同步运行并且不会复制到堆中，因此您无需做任何额外的事情。不需要考虑特殊的内存管理（即，不需要弱引用）并且您不需要`__block`限定符（除非内部块需要修改外部变量）。

换句话说，您在这里所拥有的只是一个普通的旧嵌套 for 循环。内存管理与实际的 for 循环没有什么不同。

# javascript - z-index 不会将 div 定位在另一个之上

> ID：13224094
> 
> 赞同：1
> 
> 时间：2012-11-04T23:32:44.760
> 
> 标签：javascript, html, css

我有以下代码：

```
 <div class="centered"  >
        <div class="vinyl" id="vinyl1" style="z-index:2;"></div>
         <div style="z-index:5;">
          <img src="images/center-image.png"/>
          </div>
        </div>
     </div>
<style>
.centered {
  position: fixed;
  top: 50%;
  left: 50%;
  margin-top: -230px;
  margin-left: -250px;
}
</style>
<script>
var div = document.getElementById('vinyl1');
var property = getTransformProperty(div);
if (property) {
    var d = 0;
    setInterval(
        function () {
            div.style[property] = 'rotate(' + (d++ % 360) + 'deg)';
        },
        100
    );
}
</script> 
```

如您所见，id为vinyl1的div会旋转。但是，我想在里面找到那个 div 的中心，一个带有静态图像的静态 div。（在演示中它在 div 下，上面有数字 360）我试图把 z-index.

1.  z-index 不起作用，它仍然在下面显示
2.  如何将图像准确定位在中心？

[你可以在这里](http://www.360andbeyond.co.il/index1.php)看到演示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T23:38:04.147

您应该将包含 360 度图像徽标的 div 放在乙烯基 div 中。

像这样：

```
<div class="vinyl" id="vinyl1" style="z-index:2;">
    <div style="z-index:5;">
       <img src="images/center-image.png"/>
    </div>
</div> 
```

并添加位置：相对；到乙烯基 div 和位置：绝对到 div 里面。

**编辑**

尽管您希望它们一起旋转。如果您不希望它们一起旋转，请将其再次放置在外面。不确定其余的标记，但这应该可以解决问题。在居中的 div 内创建另一个容器，并为其提供相对位置。让乙烯基 div 保持正常定位，并将绝对位置添加到包含图像的 div 中。

像这样的东西：

```
<div class="extra_wrap">
    <div class="vinyl" id="vinyl1" style="z-index:2;"></div>
    <div class="image_holder" style="z-index:5;">
       <img src="images/center-image.png"/>
    </div>
</div> 
```

和CSS：

```
.extra_wrap {position: relative;}

.image_holder {position: absolute; top: 150px; left: 150px;} 
```

当然，为 image_holder div 添加 top 和 left 值以将其定位在中心。

希望能帮助到你。

# magento - Magento 1.7.02 下载器登录后显示“无法找到命令同步”错误

> ID：13224095
> 
> 赞同：0
> 
> 时间：2012-11-04T23:32:55.057
> 
> 标签：magento

我正在尝试访问 magento 下载器，但是，在使用我的管理员凭据登录到下载器后，我看到了“找不到命令同步”错误，而不是显示已安装模块列表的屏幕。帮助？

除了为 app/etc 文件夹中新安装的模块设置 true 为 false 之外，我还尝试通过 system->configuration-->Advanced 页面卸载模块。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:26:53.510

我打赌您可能`_Header.php`对目录中的命令文件没有足够的权限`downloader/lib/Mage/Connect/Command`。

窥探文件 lib/Mage/Connect/Command.php 会产生以下函数：

```
public static function registerCommands()
{
    $pathCommands = dirname(__FILE__).DIRECTORY_SEPARATOR.basename(__FILE__, ".php");
    $f = new DirectoryIterator($pathCommands);
    foreach($f as $file) {
        if (! $file->isFile()) {
            continue;
        }
        $pattern = preg_match("/(.*)_Header\.php/imsu", $file->getFilename(), $matches);
        if(! $pattern) {
            continue;
        }
        include($file->getPathname());
        if(! isset($commands)) {
            continue;
        }
        $class = __CLASS__."_".$matches[1];
        foreach ($commands as $k=>$v) {
            $commands[$k]['class'] = $class;
            self::$_commandsAll[$k] = $commands[$k];
        }
        self::$_commandsByClass[$class] = $commands;
    }
} 
```

作为**权宜之计**，您可能想先尝试一下`chmod 777 /downloader`，看看会发生什么。

如果您可以描述您的开发设置，这将有所帮助，这样我们就可以更清楚地了解这个问题。是Linux吗？是窗户吗？通常上述解决方案适用于大多数 linux 设置。

**编辑**

另外，如果上述方法不起作用，还要检查一件事：

运行`php -i | grep -i pear`并查看包含路径中是否有梨。

# html - 是否可以在没有 Java、Flash 或某些第三方安装的情况下录制用户的屏幕？

> ID：13224096
> 
> 赞同：0
> 
> 时间：2012-11-04T23:33:13.297
> 
> 标签：html, google-chrome, webkit

是否可以让用户在不借助 Flash 或 Java 的情况下录制他们的屏幕（在他们的许可下）？

这是 Webkit 浏览器所需要的。

# c++ - 如何更新已在 C++ 中使用 TrackPopupMenu 显示的上下文菜单

> ID：13224099
> 
> 赞同：1
> 
> 时间：2012-11-04T23:33:21.490
> 
> 标签：c++, winapi, drop-down-menu

假设我使用带有 TPM_RETURNCMD 标志的 TrackPopupMenu() API 显示弹出上下文菜单。在显示上下文菜单时，我需要查看是否在键盘上按下了 Shift 或 Ctrl 键，并根据它更新上下文菜单中的一些菜单项。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:52:23.740

你必须调用一些东西来修改菜单项，`::SetMenuItemInfo()`然后调用 `::DrawMenuBar()`来重绘它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T13:36:58.377

这不是您正在开发的平台的标准用户体验。我知道我会对这种行为感到恼火。在打开菜单之前按元键是 Windows 平台的标准。例如，在资源管理器中右键单击项目时按住 shift 会提供修改后的上下文菜单（例如，“打开方式...”或“在新进程中打开”）。

**遵循平台约定。**我不希望 Mac 上的应用程序表现得像 Windows 上的应用程序，我也不希望 Windows 上的应用程序表现得像 Mac 上的应用程序。如果您不遵守约定，您就会冒着一大群恼怒用户的风险。[参见 Lotus Notes，SAP]

# c - 在结构中使用指向动态二维数组的指针

> ID：13224113
> 
> 赞同：2
> 
> 时间：2012-11-04T23:34:51.197
> 
> 标签：c, struct, segmentation-fault, malloc, multidimensional-array

我一直在为我的电磁仿真课程编写一段代码，但遇到了一个问题。我决定做一些额外的事情，将原始计算扩展到多达 10^8 个元素的非常大的网格，所以现在我必须使用 malloc()。

到目前为止，一切都很好，但是由于我更喜欢​​将代码保存在库中，然后使用编译器的 inline 选项进行编译，因此我需要一种在函数之间传递信息的方法。所以，我开始使用结构来跟踪网格的参数，以及指向信息数组的指针。我通过以下方式定义了结构：

```
typedef struct {
    int    height;
    int    width;
    int    bottom; //position of the bottom node
    unsigned int***  dat_ptr;//the pointer to the array with all the data
    } array_info; 
```

其中指向无符号整数的三重指针是指向二维数组的指针。我必须这样做，否则它是按值传递的，我无法从函数内更改它。

现在，当我尝试使用以下函数为结构分配内存时：

```
void create_array(array_info A)//the function accepts struct of type "array_info" as argument
{
    int i;

    unsigned int** array = malloc(sizeof(*array) * A.height);//creates an array of arrays
    for(i = 0; i<A.height; ++i)
    {
        array[i] = malloc(sizeof(**array) * A.width);//creates an array for each row
    }
    *A.dat_ptr=array;//assigns the position of the array to the input pointer
} 
```

执行操作时出现分段错误。我不明白为什么：sizeof(*A.dat_ptr) 与 sizeof(array) 相同。因此，在最坏的情况下，我应该在某个地方出现胡言乱语，而不是在分配行中，对吧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:44:08.493

您要么需要从函数返回`array_info`结构（修改后的），要么（更通常）将指向`array_info`结构的指针传递给函数，以便您所做的更改会影响调用函数中的值。

```
typedef struct
{
    int    height;
    int    width;
    int    bottom;
    unsigned int **dat_ptr;  // Double pointer, not triple pointer
} array_info;

void create_array(array_info *A)
{
    unsigned int **array = malloc(sizeof(*array) * A->height);
    for (int i = 0; i < A->height; ++i)
        array[i] = malloc(sizeof(**array) * A->width);
    A->dat_ptr = array;
} 
```

我假设您在某处检查内存分配；不过，合乎逻辑的地方是这个函数。从部分失败中恢复是很繁琐的（但如果您要从函数返回而不是从程序退出，则这是必要的）。

```
void create_array(array_info *A)
{
    unsigned int **array = malloc(sizeof(*array) * A->height);
    if (array != 0)
    {
        for (int i = 0; i < A->height; ++i)
        {
             if ((array[i] = malloc(sizeof(**array) * A->width)) == 0)
             {
                 for (int j = 0; j < i; j++)
                      free(array[j]);
                 free(array);
                 array = 0;
                 break;
             }
        }
    }
    A->dat_ptr = array;
} 
```

调用函数知道如果`dat_ptr`成员在返回时为空，则函数失败`create_array()`。提供成功/失败返回值可能会更好。

我使用的是 C99，所以调用代码可能是：

```
array_info array = { .height = 10, .width = 20, .dat_ptr = 0 };
create_array(&array);
if (array->dat_ptr == 0)
    ...error handling... 
```

请注意，其中的代码`create_array()`可能需要检查空指针、负数或零宽度或高度。我不清楚`bottom`元素应该包含什么，所以我没有初始化它，这给了我使用指定初始化程序的一半借口。您也可以非常清楚地编写初始化程序，而无需使用指定的初始化程序。

# api - 社交引擎访问查看方法

> ID：13224122
> 
> 赞同：0
> 
> 时间：2012-11-04T23:36:51.030
> 
> 标签：api, zend-framework, socialengine

我在 SocialEngine 中编写我的 API，当我尝试调用我曾经在控制器中调用的视图方法时遇到了一些问题，即

*   $this->view->htmlLink()
*   $this->view->baseUrl()
*   $this->view->translate()
*   等等

我在工厂脚本中发现我可以从访问 Zend 框架 Zend_Registry::get('Zend_Translate')->_() 的 Api 调用 translate() 方法，但我想这可能不是最好的方法（我没有找不到其他方法……）

那么，如何从模块的 API 访问这些方法，以便在我调用 Engine_Api::_()->getApi()->myMethod() 时它们通过我的控制器？

泰！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:04:20.410

您可以在任何地方执行此操作：

```
$view = Zend_Registry::get('Zend_View');
echo $view->baseUrl(); 
```

# javascript - 如果浏览器转到新 URL 并返回（通过后退按钮），iframe 内容会卡住

> ID：13224124
> 
> 赞同：0
> 
> 时间：2012-11-04T23:36:55.177
> 
> 标签：javascript, jquery, iframe, browser-history

我正在使用 jquery iframe 插件在同一页面上显示新内容。它运作良好。但是，如果我转到父窗口中的新 URL 并使用 BACK 按钮返回，则所有 iframe 链接都会在父窗口转到新 URL 之前加载最后打开的 iframe url。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:31:20.193

好像您使用的是旧版本的漂亮照片，它不会更新 url 中的哈希值。当前版本可以，请查看主要插件演示。哈希允许书签和历史支持，插件应该在页面加载时读取哈希并打开适当的画廊

单击演示时地址栏中的哈希更新示例：

`#prettyPhoto[pp_gal2]/3/`

# c++ - 在未来的 C++1x 中将如何实现最小垃圾收集支持？

> ID：13224127
> 
> 赞同：6
> 
> 时间：2012-11-04T23:37:27.813
> 
> 标签：c++, c++11, garbage-collection, iso

我刚刚看过 Herb Sutter 的 Future C++ 演示文稿，其中提到他和其他一些人致力于垃圾收集提案。Straustrup 已经提到了最小化垃圾收集支持的几个原因。我还找到了一个：[http](http://c2.com/cgi/wiki?AlgorithmsThatDemandGarbageCollection) ://c2.com/cgi/wiki?AlgorithmsThatDemandGarbageCollection 我试图在谷歌上搜索有关未来垃圾收集的实施细节的信息，但只找到了与他们相应的旧提案（2005-2007）垃圾收集将通过特殊类型的指针（我猜类似于 C++\CLI 和 C++\CX）来实现。但是，现在是什么？

有人可以为我澄清这一点。未来的 C++ 中会出现什么样的垃圾回收？一些有用的和新的文章和具有技术细节的建议的链接将不胜感激，非常有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T23:42:00.240

该标准不会“实施垃圾收集”。它将描述符合标准的 C++ 程序与垃圾收集器的交互。特别是，据我记得，现有的措辞已经在 C++0x 的工作草案中，描述了安全派生指针是什么（即垃圾收集器可以找到哪些指针），它说垃圾收集是可选的，并且它不调用析构函数。它*没有*添加任何新类型的指针。

**编辑：** N2960 草案中有这样的措辞。您可以进行二进制搜索以找到最新版本。

# wordpress - Wordpress 小部件页面内容

> ID：13224130
> 
> 赞同：1
> 
> 时间：2012-11-04T23:38:07.223
> 
> 标签：wordpress, widget

我有一个页面是条目列表（一个链接和一些文本）。我想在另一个页面上有一个小部件，显示此列表的第一个条目 - 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T05:08:14.870

对于最近的更新，您必须使用插件或帖子，然后在该特定页面上显示这些帖子。当您创建新帖子时，它将自动显示在该页面上。

# android - 在按钮的 finish() 上清除 SharedPreferences

> ID：13224135
> 
> 赞同：2
> 
> 时间：2012-11-04T23:38:59.940
> 
> 标签：android, sharedpreferences

我只是在清除共享首选项数据时遇到了一点问题。

```
 protected void onStop(){

    super.onStop();
    SharedPreferences settings = getSharedPreferences("SharedP", 0);

    SharedPreferences.Editor editor = settings.edit();
    editor.putString("inputValue", et1.getText().toString());
    editor.commit();
}

private void exitOptionsDialog() {
    new AlertDialog.Builder(this)
            .setTitle("Exit")
            .setMessage("Are you sure you want to exit?")
            .setNegativeButton("No", 
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialoginterface, int i) { } })
            .setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialoginterface, int i) {
                            SharedPreferences settings = getSharedPreferences("SharedP", 0);
                            SharedPreferences.Editor editor = settings.edit();
                            editor.clear();
                            editor.commit();
                            finish(); 
```

这是一个退出按钮，表示“是”，此按钮将退出应用程序并清除之前输入/保存的数据。

我测试应用程序，然后在 textview 框中输入值，按主页，然后返回应用程序，值在那里并且一切正常且正常工作。所以我去我的菜单->退出->弹出对话框询问用户退出与否，是的，应用程序只是关闭它，但是当我再次运行应用程序时，值仍然在文本视图中。

不知道我做错了什么:(

PS：我刚刚更新了 editor.remove("SharedP"); 与 editor.clear(); 问题仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:08:13.373

您可以使用`editor.clear();` [SharedPreferences.Editor clear()](https://developer.android.com/reference/android/content/SharedPreferences.Editor.html#clear%28%29)

```
SharedPreferences.Editor editor = settings.edit();
editor.clear();
editor.commit(); 
```

# php - 从数据库中提取多个问题的是/否单选按钮的帮助

> ID：13224140
> 
> 赞同：0
> 
> 时间：2012-11-04T22:46:47.060
> 
> 标签：php

嘿伙计们，我需要这个问卷表格的一些帮助。

目前使用的表有：

```
 user
    userid| username

answers
aswerid|quesid|ans|userid|date

ques
quesid|ques 
```

下面的表格是我正在使用的表格，但是我遇到了单选按钮的错误....有人可以提供建议吗？

```
 $query = mysql_query("SELECT * FROM ques", $con) 
                            or die("Cannot Access tblprequeations From Server");
        echo"<div id='quesform' class='quesform'>";     
    echo"<form name='QForm' method='post' action='answers.php' onsubmit='return validateQForm(this);'>";

    echo"<p>";
        while($row = mysql_fetch_array($query))
        {
        echo"<p>";

            echo"<label>".$row['quesid']."</label>&nbsp; &nbsp;";
            echo"<label>".$row['ques']."</label>&nbsp; &nbsp;";
    echo"<input type='radio' name='ans' value='yes' if (isset($_POST['ans']) && $_POST['ans'] == 'yes') echo'checked'/>";
    echo"<input type='radio' name='ans' value='no' if (isset($_POST['ans']) && $_POST['ans'] == 'no') echo'checked'/>";

        echo"</p>";
        }
        echo"</p>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:59:25.983

```
echo "<input type='radio' name='ans' value='no' ".((isset($_POST['ans']) && $_POST['ans'] == 'no')?'checked':'')."/>"; 
```

1.  不要在 echo 中使用 if 语句。

2.  不要在回声中回声。

3.  如果您有条件在字符串中添加某些内容，请始终使用连接。

4.  ((isset($_POST['ans']) && $_POST['ans'] == 'no')?'checked':'') -> if else 语句的另一种方式

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T22:53:12.080

```
echo"<input type='radio' name='ans' value='no' if (isset($_POST['ans']) && $_POST['ans'] == 'no') echo'checked'/>"; 
```

您不是`"`从一开始`echo`就关闭，它应该在关闭之前关闭`if`

PS：题外话，投票结束。

# bash - 如何在 bash-shell 中为不同的字符设置读取？

> ID：13224142
> 
> 赞同：-2
> 
> 时间：2012-11-04T23:39:22.227
> 
> 标签：bash

如何设置不同字符的读取？有谁知道解决方案？

```
while true
do
    read -sn3 KEY

        case "$KEY" in
             $'\x1b[A') echo "press arrow up";;   # OK
             $'\x1b[B') echo "press arrow down";; # OK
             $'\x1b[15~') echo "press key F5";;   # Problem !!!
        esac
done 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:25:04.583

这有点矫枉过正！

因此，我首先要嘱咐您看一下`dialog`,`whiptail`和其他`curses`shell 包装器。

但这一切都可以完成这项工作。（我希望你永远不会把它们放在生产阶段；-）

```
$ char=""; while [ ! "$char" ] ;do
    char="$(
        (
            stty -echo raw
            dd bs=1 if=/dev/tty of=/dev/fd/4 >/dev/null 2>&1 &
            sleep .1
            kill $! 2>/dev/null
            stty sane
        ) 4>&1 >/dev/null
    )"
    done
$ echo -n "$char" | od -A n -t c
 033   [   2   4   ~ 
```

**更新**（再次）

...假设您不会在 0.1 秒内按下两个不同的键。（这甚至不可能是真的，但如果在对话框菜单上，这可能是......）

从那里：

```
readKey() {
    local char
    while [ ! "$char" ] ;do
        char="$(
            (
                stty -echo raw
                dd bs=1 if=/dev/tty of=/dev/fd/4 >/dev/null 2>&1 &
                sleep .1
                kill $! 2>/dev/null
                stty sane
            ) 4>&1 >/dev/null
        )"
      done
    printf -v ${1:-REPLY} "$char"
}
str=""
while [ "$str" != "exit" ] ;do
    readKey KEY
    str+="$KEY"
    [ ${#str} -gt 4 ] && str="${str:${#str}-4}"
    case "$KEY" in
         $'\x1b[A') echo "press arrow up";;   # OK
         $'\x1b[B') echo "press arrow down";; # OK
         $'\x1b[15~') echo "press key F5";;   # Ok, for me.
         * ) echo "pressed: '$(echo -n "$KEY"| od -A n -t c)'" ;;
    esac
done 
```

比敲一些键...

```
press key F5
press arrow up
press arrow down
pressed: ' 033   [   F'
pressed: ' 033   [   6   ~'
pressed: ' 033   [   3   ~'
pressed: '   q'
pressed: '   e'
pressed: '   x'
pressed: '   i'
pressed: '   t' 
```

点击*`e x i t`*结束循环。

# android - jQuery Mobile 和 websockets 与 android

> ID：13224143
> 
> 赞同：1
> 
> 时间：2012-11-04T23:39:27.460
> 
> 标签：android, jquery-mobile, websocket

我需要实现这样的东西。我在互联网上搜索，我发现了这个[http://caniuse.com/#feat=websockets](http://caniuse.com/#feat=websockets)。如果我需要将 jquery mobile 与 android（在 android 浏览器中）集成，是否可以避免此限制？

* * *

我尝试使用我的 android 4.0 手机和 android 浏览器[访问 http://www.websocket.org/echo.html](http://www.websocket.org/echo.html)，我得到支持 websocket ......他们真的支持吗？有人有这方面的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:53:00.347

您可以通过 Flash 后备 (https://github.com/gimite/web-socket-js) 在支持（并已启用）Flash 的设备上使用内置 Android 浏览器来使用 WebSocket。

您可以在 Google Chrome for Mobile（完整 RFC6455）、Firefox Mobile（完整 RFC6455）或 Opera Mobile（仅 Hixie-76）等替代 Android 浏览器上本地使用 WebSocket

# java - 持久化对象 jpa 时出现 java.lang.StackOverflowError

> ID：13224145
> 
> 赞同：7
> 
> 时间：2012-11-04T23:39:38.327
> 
> 标签：java, jpa, persistence, ejb-3.0

我正在使用 JPA、JSF、EJB、Derby 构建应用程序。此时应用程序仍然很小。我在应用程序中有一个表格来添加新产品。将数据添加到数据库时，它会顺利进行，直到我重新启动应用程序或服务器。当我重新启动我得到的服务器或应用程序`java.lang.StackOverflowError`时，我仍然可以在数据库中查询产品数据库所代表的数据，但无法创建产品。截至目前，我在数据库中只有 5 个条目，但我担心这种情况会这么早发生。

这是 Ejb（为简单起见，删除了 Getter、setter 和构造函数）：

```
@Stateless
public class ProductEJB{

    @PersistenceContext(unitName = "luavipuPU")
    private EntityManager em;

    public List<Product> findAllProducts()
    {
        TypedQuery<Product> query = em.createNamedQuery("findAllProducts", Product.class);
        return query.getResultList();
    }

    public Product findProductById(int productId)
    {
        return em.find(Product.class, productId);
    }

    public Product createProduct(Product product)
    {
        product.setDateAdded(productCreationDate());
        em.persist(product);
        return product;        
    }    

    public void updateProduct(Product product)
    {
        em.merge(product);
    }

    public void deleteProduct(Product product)
    {
        product = em.find(Product.class, product.getProduct_id());
        em.remove(em.merge(product));
    } 
```

这是 ProductController（为简单起见，移除了 Getter、setter 和构造函数）：

```
 @Named
@RequestScoped
public class ProductController {

    @EJB
    private ProductEJB productEjb;
    @EJB
    private CategoryEJB categoryEjb;

    private Product product = new Product();
    private List<Product> productList = new ArrayList<Product>();

    private Category category;
    private List<Category> categoryList = new ArrayList<Category>();

    public String doCreateProduct()
    {
        product = productEjb.createProduct(product);
        productList = productEjb.findAllProducts();
        return "listProduct?faces-redirect=true";
    }

    public String doDeleteProduct()
    {
        productEjb.deleteProduct(product);
        return "deleteProduct?faces-redirect=true";
    }

    public String cancelDeleteAction()
    {
        return "listProduct?faces-redirect=true";
    }

    @PostConstruct
    public void init()
    {
        categoryList = categoryEjb.findAllCategory();
        productList = productEjb.findAllProducts();        
    } 
```

类别实体（为简单起见，删除了 Getters、setters、hash() 和构造函数）：

```
@Entity
@NamedQueries({
    @NamedQuery(name= "findAllCategory", query="SELECT c FROM Category c")        
})
public class Category implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private int category_id;
    private String name;
    private String description;
    @OneToMany(mappedBy = "category_fk")
        private List<Product> product_fk;

 // readObject() and writeObject() 

    private void readObject(ObjectInputStream ois) throws IOException, ClassNotFoundException
    {
        // default deserializer
        ois.defaultReadObject();

        // read the attributes
        category_id = ois.readInt();
        name = (String)ois.readObject();
        description = (String)ois.readObject();

    }

    private void writeObject(ObjectOutputStream oos) throws IOException, ClassNotFoundException
    {
        // default serializer
        oos.defaultWriteObject();

        // write the attributes
        oos.writeInt(category_id);
        oos.writeObject(name);
        oos.writeObject(description);

       }

 @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final Category other = (Category) obj;
        if (this.category_id != other.category_id) {
            return false;
        }
        if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name)) {
            return false;
        }
        if ((this.description == null) ? (other.description != null) : !this.description.equals(other.description)) {
            return false;
        }
        if (this.product_fk != other.product_fk && (this.product_fk == null || !this.product_fk.equals(other.product_fk))) {
            return false;
        }
        return true;
    } 
```

产品实体（为简单起见，移除了 Getter、setter、hash() 和构造函数）：

```
@Entity
@NamedQueries({
    @NamedQuery(name="findAllProducts", query = "SELECT p from Product p")

})
public class Product implements Serializable
{
    private static final long serialVersionUID = 1L;

    @Id @GeneratedValue(strategy= GenerationType.AUTO)
    private int product_id;
    private String name;
    private String description;
    protected byte[] imageFile;
    private Float price;
    @Temporal(TemporalType.TIMESTAMP)
    private Date dateAdded;        
    @ManyToOne
    private Category category_fk;
    @ManyToOne
    private SaleDetails saleDetails_fk;

    // readObject() and writeObject() methods

    private void readObject (ObjectInputStream ois)throws IOException, ClassNotFoundException
    {
        // default deserialization
        ois.defaultReadObject();

        // read the attributes
        product_id = ois.readInt();
        name = (String)ois.readObject();
        description = (String)ois.readObject();

        for(int i=0; i<imageFile.length; i++ )
        {
            imageFile[i]=ois.readByte();
        }

        price = ois.readFloat();
        dateAdded = (Date)ois.readObject();
        category_fk = (Category)ois.readObject();
        saleDetails_fk = (SaleDetails)ois.readObject();

    }

@Override
public boolean equals(Object obj) {
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    final Product other = (Product) obj;
    if (this.product_id != other.product_id) {
        return false;
    }
    if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name)) {
        return false;
    }
    if ((this.description == null) ? (other.description != null) : !this.description.equals(other.description)) {
        return false;
    }
    if (!Arrays.equals(this.imageFile, other.imageFile)) {
        return false;
    }
    if (this.price != other.price && (this.price == null || !this.price.equals(other.price))) {
        return false;
    }
    if (this.dateAdded != other.dateAdded && (this.dateAdded == null || !this.dateAdded.equals(other.dateAdded))) {
        return false;
    }
    if (this.category_fk != other.category_fk && (this.category_fk == null || !this.category_fk.equals(other.category_fk))) {
        return false;
    }
    if (this.saleDetails_fk != other.saleDetails_fk && (this.saleDetails_fk == null || !this.saleDetails_fk.equals(other.saleDetails_fk))) {
        return false;
    }
    return true;
}

    private void writeObject(ObjectOutputStream oos) throws IOException, ClassNotFoundException
    {
        // default serialization
        oos.defaultWriteObject();

        // write object attributes
        oos.writeInt(product_id);
        oos.writeObject(name);
        oos.writeObject(description);
        oos.write(imageFile);
        oos.writeFloat(price);
        oos.writeObject(dateAdded);
        oos.writeObject(category_fk);
        oos.writeObject(saleDetails_fk);

    } 
```

这是堆栈跟踪：

```
 javax.faces.el.EvaluationException: java.lang.StackOverflowError
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102)
    at javax.faces.component.UICommand.broadcast(UICommand.java:315)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1550)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:281)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:655)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:161)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:331)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$AdapterCallable.call(ContainerMapper.java:317)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.StackOverflowError
    at java.util.Vector$Itr.<init>(Vector.java:1120)
    at java.util.Vector.iterator(Vector.java:1114)
    at java.util.AbstractList.hashCode(AbstractList.java:540)
    at java.util.Vector.hashCode(Vector.java:988)
    at org.eclipse.persistence.indirection.IndirectList.hashCode(IndirectList.java:460)
    at com.lv.Entity.Category.hashCode(Category.java:96)
    at com.lv.Entity.Product.hashCode(Product.java:148)
    at java.util.AbstractList.hashCode(AbstractList.java:541) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-05T23:25:52.680

你的班级有你正在做的班级的`Category`清单`Products`和`equals`方法`Category`

```
if (this.product_fk != other.product_fk && (this.product_fk == null || !this.product_fk.equals(other.product_fk))) {
    return false;
} 
```

它调用类`equals`上的方法，类上的方法`Product``equals``Product`

```
if (this.category_fk != other.category_fk && (this.category_fk == null || !this.category_fk.equals(other.category_fk))) {
    return false;
} 
```

它再次调用该`equals`方法，整个过程重复导致堆栈溢出。`Category`

解决方案：

1.  要么删除双向依赖。
2.  修复equals方法。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T14:51:50.143

正如@Sajan 提到的。你的 equals() 有一个循环依赖。您需要更改 Category 类中的 equals() 方法，以不引用 'Product' 列表和 'categoryId' 。大概应该是这样——

```
 public class Category implements Serializable
{
   ...
 @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }

        if ((this.name == null) ? (other.name != null) : !this.name.equals(other.name)) {
            return false;
        }
        if ((this.description == null) ? (other.description != null) : !this.description.equals(other.description)) {
            return false;
        }
        return true;
    }
} 
```

在 Product 类的 equals() 方法中，您可能必须删除“ProductId”和“Price”。

equals() 和 hashcode() 方法很重要，因为当您使用处于分离状态的对象并将它们添加到 java.util.Set 时，它们确定对象相等性。推荐的实现是在您的 equals() 和 hashcode() 实现中使用“形成自然键标识符的属性”。

类别 - 假设您有具有 ProductA 和 ProductB 的 CategoryA。不可能将相同的 ProductA 和 ProductB 绑定到称为 CategoryB 的不同类别。因此，它们不应该是 equals() 实现的一部分。

产品 - 是否在 Product.equals() 中包含“类别”取决于“类别”是否是产品的自然键标识符的一部分。您在 Category 中使用 List 的事实意味着您不太关心对象的相等性。如果您担心 equal()，我建议您将其更改为 Set。

如果您有以下情况 -

> 类别 -
> 
> 电子产品
> 
> 产品1 -
> 
> 名称 - 相机 | 价格 - $100 | 类别 - 电子产品
> 
> 产品2 -
> 
> 名称 - HandyCam | 价格 - $200 | 类别 - 电子产品

如果“电子”类别有两个产品，如上图所示。如果您有以下示例代码 -

```
 session.startTransaction();
    Category electronics = session.get(Category.class, 1234);
    Set<Product> products = electronics.getProducts();
    session.commit();

    Product camera = product.get(0);
    camera.setPrice("300");
    products.add(camera); 
```

当您更改相机的价格并将其重新添加到集合中时，您要确保集合仍然只包含两个元素，而不是添加第三个新元素，因为您正在修改现有产品，而不是添加新产品。

对于上述场景，您需要在“Product”的 equals() 方法中包含“Category”和“name”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T23:46:25.927

我怀疑循环依赖是问题的根本原因。我认为您已经映射到对象`Product`中的一个`Category`或`SaleDetails`两个对象。如果是这样，它将在序列化`Product`对象时调用循环引用问题，而将导致`StackOverFlow`错误。

我认为你有两个选择：

1.  `bi-dreictional`如果可以避免，请删除映射。
2.  请在你的,和类中实现`readObject()`和`writeObject()`方法，避免在圈子中读/写对象。`Product``Category``SaleDetails`

编辑：

```
 private void writeObject(ObjectOutputStream oos) throws IOException {
    // default serialization 
    oos.defaultWriteObject();
    // write the object attributes
    oos.writeInt(product_id);
    oos.writeObject(name);
    oos.writeObject(description);
    oos.write(imageFile);
    oos.writeFloat(price);
    oos.writeObject(dateAdded);
    oos.writeObject(category_fk);
    oos.writeObject(saleDetails_fk);
  }

   private void readObject(ObjectInputStream ois) 
                                    throws ClassNotFoundException, IOException {
      // default deserialization
      ois.defaultReadObject();
      //read the attributes
      product_id = ois.readInt();
      name = (String)ois.readObject();
      description = (String)ois.readObject();
      imageFile = ois.read();
      price = ois.readFloat();
      dateAdded = (Date)ois.readObject();
      category_fk = (Category)ois.readObject();
      saleDetails_fk = (SaleDetails)ois.readObject();
    } 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-04T23:45:45.910

似乎问题出在 Category 类中 - equals 做了一些反过来调用 equals 的事情，创建了一个无限循环

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-04T23:50:28.900

从`List.equals`and`Vector.equals`调用中，我认为有一个列表`X`包含一个向量，该向量`Y`包含`X`您实体中某处的列表。对该列表执行 equals 调用将遍历该列表，该列表将遍历该向量，该向量将遍历该列表......等等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-01T07:58:29.517

您的代码中有一个循环结构。类生成的方法，包括**equals、hashCode、toString**不能处理这种循环行为。这些方法没有处理这种情况的方法。

请从可能导致这些情况的方法中排除字段。

# python - 在 WebFaction 的子文件夹中部署烧瓶应用程序

> ID：13224147
> 
> 赞同：1
> 
> 时间：2012-11-04T23:39:46.850
> 
> 标签：python, flask, webfaction

我在这里遵循说明：http: [//flask.pocoo.org/snippets/65/](http://flask.pocoo.org/snippets/65/)

但是有些东西写的不是很清楚。

所以我的结构是这样的：

```
/<username>/webapps/flask/
----__init__.py
/<username>/webapps/flask/htdocs/
----index.py
----config.py
----/app/     (this is my flask application where i have views.py).
----/tmp/ 
```

我的**__init__.py：**

```
class WebFactionMiddleware(object):
    def __init__(self, app):
        self.app = app
    def __call__(self, environ, start_response):
        environ['SCRIPT_NAME'] = '/app'
        return self.app(environ, start_response)

app.wsgi_app = WebFactionMiddleware(app.wsgi_app) 
```

我的**index.py：**

从烧瓶导入应用程序作为应用程序

我的**httpd.conf：**

```
WSGIPythonPath /home/<username>/webapps/flask/htdocs/
#If you do not specify the following directive the app *will* work but you will
#see index.py in the path of all URLs
WSGIScriptAlias /app /home/<username>/webapps/flask/htdocs/index.py

<Directory /home/<username>/webapps/flask/htdocs>
    AddHandler wsgi-script .py
    RewriteEngine on
    RewriteBase /app
    WSGIScriptReloading On
</Directory> 
```

我从控制面板安装为“wsgi 3.4/Python2.7”，但我必须使用easy-install2.6安装SSH SQLAlchemy、flask-login等，因为easy-install2.7不存在。

服务器错误日志说：

```
 from flask import app as application
[Sun Nov 04 23:29:12 2012] [error] [client 127.0.0.1] ImportError: No module named flask 
```

（我确实重启了apache2）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:03:18.133

好吧，错误消息清楚地表明您没有安装 Flask。如果您像 Python 2.7 一样在 webfaction 控制面板中创建了应用程序，那么您还需要为 Python 2.7 安装所有库和 Flask 本身。你说你用easy_instal2.6安装了所有东西，所以这意味着你为Python 2.6安装了所有东西。

我会说首先为 Python 2.7 安装所有的 libs 和 deps（flask），然后再试一次。另外我建议开始使用virtualenv，因为它有助于以后不要弄乱软件包版本（一些关于如何在webfaction上使用virtualenv部署的简短信息[http://manavgoel.net/blog/post/2012/7/Deploying-烧瓶-网站-on-webfaction](http://manavgoel.net/blog/post/2012/7/Deploying-flask-website-on-webfaction)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T08:58:16.390

查看[https://community.webfaction.com/questions/12718/installing-flask](https://community.webfaction.com/questions/12718/installing-flask)

确保相应地遵循链接中的步骤。对于第 2 步，有很多方法可以通过。但我希望你这样做。

一个。首先将其复制到文本编辑器中并更改 APPNAME = "urflaskname" 请 unix 区分大小写。

湾。之后将文件保存为 anyname.sh（unix 脚本）

C。传输到服务器并运行

```
chmod a+x anyname.sh 
```

d。然后现在在服务器上运行它来安装flask并让你为网络做好准备

```
./anyname.sh 
```

一切都完成了。

您也可以直接按照步骤操作，但为了确保一切正义，请尝试仅复制和编辑 APPNAME

# javascript - Javascript之谜：函数中的变量

> ID：13224148
> 
> 赞同：3
> 
> 时间：2012-11-04T23:40:17.813
> 
> 标签：javascript, function

好的，我很难过，主要是因为我使用的javascript不够。我知道这是一个数组指针问题（我必须在函数中复制数组......），但不知道如何解决它。我能麻烦您解释一下为什么我的 Javascript 版本不起作用而 Python 版本起作用吗？它应该反转一个数组（我知道有一个内置的），但我的问题是：Javascript 中的数组与 Python 中的数组有何不同？

```
Javascript (does not work): 

function reverseit(x) {

  if (x.length == 0) { return ""};
  found = x.pop();
  found2 = reverseit(x);
  return  found + " " + found2 ;

};

var out = reverseit(["the", "big", "dog"]);

// out == "the the the" 
```

===========================

```
Python (works):

def reverseit(x):
    if x == []: 
        return ""
    found = x.pop()
    found2 = reverseit(x)
    return  found + " " + found2

out = reverseit(["the", "big", "dog"]);

// out == "dog big the" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-04T23:43:08.627

它应该是...

```
 var found = x.pop();
  var found2 = reverseit(x); 
```

如果不本地化这些变量，您会将它们声明为全局变量 - 并在每次`reverseit`调用时重写它们的值。顺便说一句，如果开发人员的浏览器支持这些错误（在我看来应该如此），则可以使用`'use strict';`指令 ( [MDN ) 来防止这些错误。](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/Strict_mode)

显然，代码在 Python 中工作，因为`found`并且`found2` *是*本地的。

但是看看 JS 生活的光明面：你可以像这样写这个函数：

```
function reverseit(x) {
  return x.length 
         ? x.pop() + " " + reverseit(x) 
         : "";
};
console.log(reverseit(['the', 'big', 'dog'])); 
```

...根本没有声明任何局部变量。

# javascript - 从 Tampermonkey 脚本访问“head”变量

> ID：13224150
> 
> 赞同：0
> 
> 时间：2012-11-04T23:40:56.940
> 
> 标签：javascript, google-chrome, greasemonkey, tampermonkey

我正在编写一个填写表单的用户脚本（用于 Chrome 中的 Tampermonkey），它应该从页面中已经存在的 JavaScript 中获取变量并将这些变量放入表单中。到目前为止，这是我的代码：

```
document.getElementById('entry_1').value = window.a1[0]; 
```

对 entry_2 到 entry_5 和 a1 到 a5 重复。a1 定义如下：

```
var a1 = new Array("Green","green"); 
```

所以运行用户脚本应该将值“Green”放在表单字段entry_1中。但是，我得到了这个：

```
TypeError: Cannot read property '0' of undefined
at Function.eval (eval at <anonymous> (eval at eventHandler (eval at <anonymous> (chrome-extension://dhdgffkkebhmkfjojejmpbldmpobfkfo/content.js:56:21))), <anonymous>:65:53) 
```

如前所述，我使用的是 Chrome。在 javascript 控制台中运行用户脚本代码可以正常工作，并且确实会更改表单字段。如何从 Tampermonkey 脚本中获得相同的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:58:13.390

正确的方法是使用`unsafeWindow`而不是`window`，如下所示：

```
document.getElementById('entry_1').value = unsafeWindow.a1[0]; 
```

但是请注意，这在 Chrome JS 控制台中不起作用。

# javascript - 如何从 javascript 访问 my_ruby_obj.price 作为 my_ruby_obj.to_json 发送到浏览器？

> ID：13224151
> 
> 赞同：-3
> 
> 时间：2012-11-04T23:40:56.413
> 
> 标签：javascript, jquery, ruby, ajax, json

**在红宝石中：**

```
class Obj
  attr_accessor :price
end

my_ruby_obj = Obj.new 
```

把 my_ruby_obj.to_json

```
"\"#<Obj:0x1c9b018>\"" 
```

**服务器将 my_ruby_obj.to_json 发送到浏览器**（sinatra，使用 content_type :json）以响应 jquery ajax 请求（使用 $.get），该请求正确定义了 json 的返回类型，并启动了一个回调函数（数据），它执行以下操作：

`console.log(data);`

返回：

```
#<Obj:0x1c9b018> 
```

**现在我如何访问 javascript/jquery 中的“data.price”属性，**就像我通常在 ruby​​ 对象上访问它的属性一样？（“my_ruby_obj.price”）

我试过 console.log(data.price);

```
> Undefined 
```

我觉得我在这里遗漏了一大块..我想这与 json 如何处理对象有关..

有什么帮助吗？ *如果可能的*话，我正在寻找使用 jquery 的正确方法。

谢谢

**编辑：** 试图了解发生了什么，我在回调中尝试了这个：

```
newdata = $.parseJSON(data); 
```

但调试控制台停止显示：

```
> uncaught exception: Invalid JSON: #<Obj:0x1c9b018> 
```

我确实在 ruby​​ 对象上调用了 .to_json ，那为什么这么说呢？...

[[**新编辑：** ]]

似乎来自自定义类的对象的 ruby​​ json 序列化不像我想象的那样工作：

从这里引用：[https ://stackoverflow.com/a/4464721/988591](https://stackoverflow.com/a/4464721/988591)

> 对于您自己的类中的对象，这将更加困难。对于下面的类， to_json 将产生类似 `"\"#<A:0xb76e5728>\""`. 这可能是不可取的。为了有效地将您的对象序列化为 JSON，您应该创建自己的 to_json 方法。

示例如下...但是..哇...没有更简单的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:32:02.633

**好的，我找到了我想要的东西**！一种自动化的快速解决方案，它还具有其他好处（更快的速度！）。

标准 json gem 仅适用于某些类（数组、哈希、..），不能将您创建的自定义类/对象转换为 JSON。它不知道如何组织数据，除非您为自己的类编写自定义 .to_json 方法，这是我试图避免的。

所以最后我找到了一个叫做**Oj**的 gem ：[Optimized Json](https://github.com/ohler55/oj) (gem install oj)

引用作者的话：

> 顾名思义，优化的 JSON (Oj) 是为了提供速度优化的 JSON 处理而编写的。它被设计为 Yajl 和其他常见 Ruby JSON 解析器的更快替代方案。到目前为止，它**的解析速度比 Yajl 快 2 倍，编写 JSON 的速度快 3 倍或更多倍**。
> 
> **Oj 有几种转储或序列化模式，它们控制如何将对象转换为 JSON。**这些模式在默认选项中使用 :mode 选项设置，或者作为 dump() 方法的选项之一。
> 
> ***:object*模式会将任何 Object 转储为 JSON 对象，其键与 Ruby 对象的变量名匹配，但不带 '@' 字符**。这是最高性能模式。

我这样使用它：

**`json = Oj.dump(guy, mode: :object)`**但在我的情况下，它也可以在没有 mode: :object 的情况下工作。

现在`console.log(data);`显示：

```
({'^o':"Human", x:38, y:58, name:"Jack", bday:{'^t':1352083824.5625}, age:50}) 
```

**现在序列化运行良好，我终于可以做到了：**

**`console.log(data.age);`// ---> 50**

序列化也更快。

..这是一段漫长的旅程；）

非常感谢图书馆作者： http: [//twitter.com/# !/peterohler](http://twitter.com/#!/peterohler)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:27:22.200

您通过 javascript 返回对象的字符串表示形式，而不是对象本身。

您需要为它返回一个 JSON 表示：

```
render json: my_ruby_obj.to_json 
```

或者更好的是，如果您知道需要访问的字段：

```
render json: {price: my_ruby_obj.price} 
```

# c++ - omp 有序子句如何工作？

> ID：13224155
> 
> 赞同：23
> 
> 时间：2012-11-04T23:41:51.683
> 
> 标签：c++, parallel-processing, openmp

```
vector<int> v;

#pragma omp parallel for ordered schedule(dynamic, anyChunkSizeGreaterThan1)
    for (int i = 0; i < n; ++i){
            ...
            ...
            ...
#pragma omp ordered
            v.push_back(i);
    } 
```

这填充`v`了一个`n`大小有序的列表。

当到达`omp ordered`块时，所有线程都需要等待可能的最低迭代线程完成，但是如果没有一个线程被指定为特定的迭代呢？或者 OpenMP 运行时库是否始终确保最低迭代由某个线程处理？

另外，为什么建议将`ordered`子句与 ? 一起使用`dynamic schedule`？会`static schedule`影响性能吗？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-05T11:06:48.333

The `ordered` clause works like this: different threads execute concurrently until they encounter the `ordered` region, which is then executed sequentially in the same order as it would get executed in a serial loop. This still allows for some degree of concurrency, especially if the code section outside the `ordered` region has substantial run time.

There is no particular reason to use `dynamic` schedule instead of `static` schedule with small chunk size. It all depends on the structure of the code. Since `ordered` introduces dependency between the threads, if used with `schedule(static)` with default chunk size, the second thread would have to wait for the first one to finish all iterations, then the third thread would have to wait for the second one to finish its iterations (and hence for the first one too), and so on. One could easily visualise it with 3 threads and 9 iterations (3 per thread):

```
tid  List of     Timeline
     iterations
0    0,1,2       ==o==o==o
1    3,4,5       ==.......o==o==o
2    6,7,8       ==..............o==o==o 
```

`=` shows that the thread is executing code in parallel. `o` is when the thread is executing the `ordered` region. `.` is the thread being idle, waiting for its turn to execute the `ordered` region. With `schedule(static,1)` the following would happen:

```
tid  List of     Timeline
     iterations
0    0,3,6       ==o==o==o
1    1,4,7       ==.o==o==o
2    2,5,8       ==..o==o==o 
```

I believe the difference in both cases is more than obvious. With `schedule(dynamic)` the pictures above would become more or less random as the list of iterations assigned to each thread is non-deterministic. It would also add an additional overhead. It is only useful if the amount of computation is different for each iteration and it takes much more time to do the computation than is the added overhead of using dynamic scheduling.

Don't worry about the lowest numbered iteration. It is usually handled to the first thread in the team to become ready to execute code.

# javascript - 为什么 Twitter Bootstrap 的轮播对我不起作用？

> ID：13224156
> 
> 赞同：1
> 
> 时间：2012-11-04T23:41:54.033
> 
> 标签：javascript, html, css, twitter-bootstrap

我有以下代码：

```
<html>
    <head>
        <link href="css/bootstrap.min.css" rel="stylesheet" />
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
        <script>
          $(document).ready(function(){
            $('.carousel').carousel();
          });
        </script>
    </head>

    <body>
        <div id="welcome-carousel" class="carousel slide"><!-- class of slide for animation -->
          <div class="carousel-inner">
            <div class="item active"><!-- class of active since it's the first item -->
              <img src="img/image1.png" alt="" />
            </div>
            <div class="item">
              <img src="img/image4.png" alt="" />
            </div>
            <div class="item">
              <img src="img/image3.png" alt="" />
              <div class="carousel-caption">
                <p>Hello to the WORLD!</p>
              </div>
            </div>
            <div class="item">
              <img src="img/image2.png" alt="" />
              <div class="carousel-caption">
                <p>Hello to the WORLD!</p>
              </div>
            </div>
            <div class="item">
              <img src="img/image1.png" alt="" />
              <div class="carousel-caption">
                <p>Hello to the WORLD!</p>
              </div>
            </div>
          </div><!-- /.carousel-inner -->
          <!--  Next and Previous controls below
                href values must reference the id for this carousel -->
            <a class="carousel-control left" href="#welcome-carousel" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#welcome-carousel" data-slide="next">&rsaquo;</a>
        </div>
    </body>
</html> 
```

它在 index.html 文件中。在同一目录中，有一个名为 js 的目录，其中包含 boostrap.min.js，还有一个名为 css 的目录，其中包含 boostrap.min.css。最后，一个名为 img 的文件夹，其中包含我下载时 TB 提供的 haphling 图片，以及我画廊的图片。

基本上，它看起来像这样：![http://i.imgur.com/YnRtq.png](../Images/40e1203414bd0bc7e8c35b8ba67d9d6f.png)

当我单击箭头时，图像不会改变。另外，我希望箭头在图像内，而不是像那样向右。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:04:13.173

看起来好像您没有参与进来`bootstrap-carousel.js`- 这是使用 Carousel 功能所必需的。

[如果您正在构建 Bootstrap 的自定义版本（可在此处获得：http: //twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html) ），我不知道您上面的代码，但如果您不是，则需要下载/include（或远程调用）：

```
<script src="js/bootstrap-carousel.js"></script> 
```

除了缩小的基础版本。

您可能希望考虑的一个新添加/选项是： http: [//www.bootstrapcdn.com/](http://www.bootstrapcdn.com/)，这是一个好主意，可能会派上用场。

您还排除了`http:`in call*`//ajax.googleapis.com`*

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-12T12:50:07.033

在 iOS Safari 上遇到轮播问题，发现一个线程表示包含的 .css 文件错误地忽略了包含某些浏览器的浏览器前缀。我的错误略有不同（无法加载幻灯片图像）我用当前版本替换了我以前的 bootstrap.css 文件（一直使用 3.2.1 更新到 3.3.2），这解决了问题。一定要喜欢一个简单的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:09:09.193

在您的 HTML 中使用 Bootstrap Carousel 的所有元素并像这样写下 Jquery

```
<script type="text/javascript">
!function ($) {
     var $window = $(window)

    $(document).ready(function() {
        $('.carousel').carousel();
    });
} (window.jQuery)
</script> 
```

# php - 跨域GET JSON编码字符串？

> ID：13224162
> 
> 赞同：2
> 
> 时间：2012-11-04T23:42:26.297
> 
> 标签：php, javascript, jquery

我有一个用 Javascript 编写的用于 Phonegap 的应用程序，它从我服务器上的 PHP 脚本中检索 JSON 编码的字符串。

当它是一个跨域请求时，是否可以从 Javascript 中的 PHP 中检索这个 JSON 编码的字符串？

我目前使用的是 Yahoo 的 YQL，它通过 jQuery AJAX 检索字符串，但我不想依赖 Yahoo 的服务，特别是因为它在正常运行时间方面今天非常不稳定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:52:42.860

对于跨域 GET，如果您拥有端点，我建议将其修改为使用[JSONP](http://en.wikipedia.org/wiki/JSONP)

因为浏览器`<script>`标签可以从不同的域加载脚本，这是解决跨域问题的一种方法，无需担心跨浏览器支持。它确实带来了一些您应该注意的潜在跨站点脚本问题（我建议阅读我上面链接的 wiki 页面）。

如果使用 JSONP API 调用非常容易`jQuery`，但是通过`<script>`自己动态注入标签、将`src`属性设置为 API 端点并创建自己的回调函数，调用成功后调用的回调函数仍然很简单.

修改您的服务器端点以采用`callback`参数。用回调包装你的 json 响应。

例如（不是真正的代码）

```
//example api url
//http://tempuri/apiendpoint?callback=foo 

//example url handler (not in PHP)
app.get('/apiendpoint',function() {
  return query.callback + '({"json": "value"});'
}); 
```

如果您不想支持 JSONP，可以启用跨域资源共享 (CORS)。iOS 和 Android 网络浏览器都支持它。为了添加对 CORS 的支持，您需要修改端点以发送适当的标头：

```
'Access-Control-Allow-Origin'
'Access-Control-Allow-Methods'
'Access-Control-Allow-Headers' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:46:35.717

有一个名为 ACD（AJAX 跨域）的 Perl 脚本，我过去使用它非常成功 - 在[这里查看](http://www.ajax-cross-domain.com)。最好的部分是您不必依赖外部服务。

它是这样工作的：

```
<script type="text/javascript" src="http://my-domain.com/cgi-bin/ACD/ACD.js?uri=(http://www.google.com)"></script>
<script type="text/javascript">
 alert(ACD.responseText); //Should alert the source of google.com
</script> 
```

# sql - ORDER BY 取决于列类型

> ID：13224164
> 
> 赞同：4
> 
> 时间：2012-11-04T23:43:07.437
> 
> 标签：sql, postgresql, types

我的表格如下：

```
a | b
-----
1 | a
2 | b 
```

在我的查询中，我想根据列的类型更改 order by 子句。

所以像

```
get_data($order_by_column) {

  ....
  ORDER BY
    CASE 
      WHEN is_numeric($order_by_column) THEN $order_by_column
      ELSE CHAR_LENGTH($order_by_column)
    END
} 
```

我已经检查过了，似乎很难像上面的查询那样动态地确定列类型。实现这一目标的替代方案（或替代方案）是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T00:07:15.137

您可能对以下内容感兴趣[**`pg_typeof()`**](http://www.postgresql.org/docs/current/interactive/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)：

```
ORDER BY
   CASE pg_typeof($order_by_column)
      WHEN 'integer'::regtype THEN $order_by_column
--    WHEN 'text'::regtype THEN ...
--    WHEN 'boolean'::regtype THEN ...
      ELSE length($order_by_column)
   END 
```

请注意，`CASE`语句的分支需要返回匹配的类型，这恰好是这里的情况，因为`$order_by_column`两者`length($order_by_column)`都返回`integer`。

[有关手册中的](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)[对象标识符类型`regtype`](http://www.postgresql.org/docs/current/interactive/datatype-oid.html)的更多信息。

查找所有已注册的类型：

```
SELECT * from pg_type 
```

再次，更多关于[`pg_type`手册](http://www.postgresql.org/docs/current/interactive/catalog-pg-type.html)。

# python - 通过 Python API 为 Yum Repos 安装 PGP 密钥

> ID：13224166
> 
> 赞同：0
> 
> 时间：2012-11-04T23:43:11.513
> 
> 标签：python, fedora, yum

我看过[类似的问题](https://stackoverflow.com/search?q=%5Bpython%5D+yum)，但没有人提到我应该如何处理这个问题。我想编写一个快速而肮脏的脚本，帮助我在新的 Fedora 安装上引导 Puppet 来尝试一些我想尝试的东西。通过仔细阅读这里的问题。我为我的需要修复了一些示例代码。

```
[root@srv ~]# python puppet-bootstrap.py 
[ 11/03/2012 02:16:47 PM ] begin bootstrap install for puppet client
[ 11/03/2012 02:16:47 PM ] package not found on system, installing
warning: rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID 1aca3465: NOKEY
Public key for ruby-1.9.3.286-18.fc17.x86_64.rpm is not installed
Retrieving key from file:///etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-x86_64
Importing GPG key 0x1ACA3465:
 Userid     : "Fedora (17) <fedora@fedoraproject.org>"
 Fingerprint: cac4 3fb7 74a4 a673 d81c 5de7 50e9 4c99 1aca 3465
 Package    : fedora-release-17-1.noarch (@fedora)
 From       : /etc/pki/rpm-gpg/RPM-GPG-KEY-fedora-x86_64
Traceback (most recent call last):
  File "puppet-bootstrap.py", line 17, in <module>
    yb.processTransaction()
  File "/usr/lib/python2.7/site-packages/yum/__init__.py", line 6053, in processTransaction
    self._checkSignatures(pkgs,callback)
  File "/usr/lib/python2.7/site-packages/yum/__init__.py", line 6096, in _checkSignatures
    self.getKeyForPackage(po, self._askForGPGKeyImport)
  File "/usr/lib/python2.7/site-packages/yum/__init__.py", line 5798, in getKeyForPackage
    raise Errors.YumBaseError, _("Didn't install any keys")
yum.Errors.YumBaseError: Didn't install any keys 
```

那么我将如何编写一个简短的小代码来通过 YUM Python API 接受 PGP 密钥呢？有问题的发行版几乎不会受到影响，因此在此脚本的情况下必须正确签署 PGP 密钥。以前有人做过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T12:49:48.640

请加

```
yb.conf.assumeyes = True 
```

在适当情况下。egyou 代码应该是这样的：

```
#!/usr/bin/python
import yum

yb = yum.YumBase()
yb.conf.installroot = "/ipportvm/gittest/rootfs_testrootfs"
yb.conf.assumeyes = True
yb.conf.yumvar['releasever'] = '6'
for i in ("openssh-server", "plymouth", "rsyslog", "acpid", "ntp", "epel-release"):
    yb.install(name=i)
yb.resolveDeps()
yb.buildTransaction()
yb.processTransaction() 
```

# objective-c - 如何在两个字符串中找到公共子字符串

> ID：13224167
> 
> 赞同：2
> 
> 时间：2012-11-04T23:43:21.513
> 
> 标签：objective-c, ios

在过去的两天里，我一直在努力解决一个问题，并想知道社区是否可以提供帮助。我有一个 NSString 的数字，我需要比较有多少数字与另一个字符串中的数字数量相匹配。

例子：

```
 String 1: 14523 25623 651 88

     String 2: 9123 88 14523 333 
```

根据这两个字符串，我们可以看到它们都包含“88”和“14523”。所以有2场比赛。我不知道如何通过代码弄清楚这种比较。

我曾想过简单地使用一个子字符串来分解字符串 1 并将每个值与字符串 2 进行比较，但这非常低效。我相信有更好的方法。

任何人都可以提供任何建议吗？一个例子将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-04T23:45:42.697

为每个字符串创建一组子字符串。然后做两个集合的交集以找到公共子字符串。

```
NSString *string1 = @"14523 25623 651 88";
NSString *string2 = @"9123 88 14523 333";
NSSet *setA = [NSSet setWithArray:[string1 componentsSeparatedByString:@" "]];
NSSet *setB = [NSSet setWithArray:[string2 componentsSeparatedByString:@" "]];
NSMutableSet *common = [setA mutableCopy];
[common intersectSet:setB];
NSLog(@"common substrings = %@", common); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T23:50:21.960

```
    NSString *str1 = @"14523 25623 651 88";
    NSString *str2 = @"9123 88 14523 333";
    NSArray *chunks = [str1 componentsSeparatedByString:@""];
    NSArray *chunks2 = [str2 componentsSeparatedByString:@""];
    NSMutableSet *intersection = [NSMutableSet setWithArray:chunks];
    [交集 intersectSet:[NSSet setWithArray:chunks2]];
    NSLog(@"%@", [intersection allObjects]);

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T23:52:38.793

您创建两个数组：

具有方法 componentsSeparatedByString 的第一个数组和字符串一。

第二个数组，方法为 componentsSeparatedByString，字符串为 2。

现在，将第二个数组中的元素添加到第一个数组，仅当第一个数组不包含此元素时才添加。

# ios - iOS：通过单击表格单元格查看详细信息时，无法从 UITableView 详细视图导航回主视图

> ID：13224168
> 
> 赞同：0
> 
> 时间：2012-11-04T23:43:38.873
> 
> 标签：ios, uitableview, uinavigationcontroller

我已经使用情节提要构建了一个主/从表（下面的概要设置图）。导航控制器做得很糟糕，但不幸的是我现在已经走得太远了。如果相关，我在 iOS 6 中运行。

我的问题是，当通过我的主视图上的“添加”按钮（通过 segue 代码工作）从主视图导航到详细视图时，“完成”按钮代码成功地将我带回主视图。但是，如果我通过单击单元格（通过*didSelectRowAtIndexPath*）导航到详细信息视图，单击“完成”会将我推回到实例化并推送情节提要的视图。

**didSelectRowAtIndexPath:**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
  {
     DetailsViewController *detailView = [self.storyboard instantiateViewControllerWithIdentifier:@"AddDetails"];
    [self.navigationController pushViewController:detailView animated:YES];
  } 
```

我已经尝试了所有我能想到的返回主表视图，但我尝试的任何方法都不起作用。我努力了：

```
 [self.navigationController popViewControllerAnimated:YES];

   [self dismissViewControllerAnimated:YES completion:nil]; 
```

和

```
 MasterViewController *masterView = [self.storyboard instantiateViewControllerWithIdentifier:@"masterView"];
   [self.navigationController pushViewController:masterView animated:YES]; 
```

这是我的故事板设置的图像：

![在此处输入图像描述](../Images/28f8e1ee3f912aa84e83ec7a5572cb10.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:00:47.993

看来你有一个非常奇怪的控制器安排。特别是您有两个导航控制器。

我建议使用以主控制器作为根控制器的单个导航控制器进行广告安排。当您从主控制器转到详细控制器时，您可以在*同一个*导航控制器中执行此操作。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:05:07.737

popViewController 是使用详细视图和导航控制器时的正确调用。如果这不起作用，那是非常错误的，因为您已成功使用导航控制器进行推送。

基本上你必须能够在弹出时访问你用来推送的同一个导航控制器。您甚至可以考虑在该详细视图上设置自定义导航控制器属性，并在您执行推送时分配它 - 然后也使用它来弹出。

# php - 字符串转换的 PHP 竞速条件

> ID：13224173
> 
> 赞同：0
> 
> 时间：2012-11-04T23:44:11.350
> 
> 标签：php, datetime, race-condition

我有一个非常奇怪的问题。

当我运行我的一段代码时，我收到一条错误消息，说`$carDay->date`不是对象。但是当我在调试模式下运行它时，它工作正常。所以我认为这是一种赛车条件。

$trip 是 ORM 数据库 (MySQL) 中的一个对象，而 getStart-> 只是一个 getter，它以这种格式“20120929T024754”获取开始日期。我将该字符串转换为日期，然后对日期进行处理。但是就像我说的，当我在没有调试的情况下运行它时，当我想访问它时，日期似乎没有及时转换。有谁知道为什么或我能做些什么？

```
 private function calculateIntLate($trip) {
    $carDay = $trip->getStart();
    $carDay_date = $this->convertStringToDateTime($carDay);

    $carDate = $carDay_date->date;
  }

  public function convertStringToDateTime($string) {
    //012345678901234 
    //20120929T024754
    $year = substr($string, 0, 4);
    $month = substr($string, 4, 2);
    $day = substr($string, 6, 2);
    $hour = substr($string, 9, 2);
    $minute = substr($string, 11, 2);
    $second = substr($string, 13, 2);
    $dateTime = new \DateTime($year . '-' . $month . '-' . $day . ' ' . $hour . ':' . $minute . ':' . $second);
    return $dateTime;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:45:58.073

你可能想要这个：

```
$carDate = $carDay_date->date; 
```

不是

```
$carDate = $carDay->date; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:28:19.580

好的，

[我在这里](https://bugs.php.net/bug.php?id=49382)找到了答案。

显然你不能使用 Datetime->date 属性

# c - 尽管传递了正确的标志，如何修复“未定义的引用”链接器错误？

> ID：13224174
> 
> 赞同：2
> 
> 时间：2012-11-04T23:44:16.813
> 
> 标签：c, ubuntu, linker-errors, pcap

我正在尝试编译[这个名为 Pirni 的 C 程序](http://code.google.com/p/n1mda-dev/source/browse/#svn/trunk/pirni)，它最初是为 iPhone 制作的，我想在 linux Ubuntu 12.04 LTS 上运行它。它很短，（3 个 C 文件和 1 个头文件）。但我收到以下错误。我确实已经`libpcap-dev`安装并且我确实包含`-lpcap`了所以我不知道可能出了什么问题。

```
gcc -Wall -pthread -lpcap pirni.c threads.c sniffer.c -o pirni -lnet
pirni.c: In function ‘set_forwarding’:
pirni.c:31:2: warning: implicit declaration of function ‘sysctlbyname’ [-Wimplicit-function-declaration]
/tmp/cc3sf284.o: In function `set_forwarding':
pirni.c:(.text+0xfd): undefined reference to `sysctlbyname'
/tmp/ccvGjyMo.o: In function `processPacket':
sniffer.c:(.text+0x1b): undefined reference to `pcap_dump'
/tmp/ccvGjyMo.o: In function `initSniffer':
sniffer.c:(.text+0xfa): undefined reference to `pcap_open_live'
sniffer.c:(.text+0x15a): undefined reference to `pcap_lookupnet'
sniffer.c:(.text+0x1af): undefined reference to `pcap_compile'
sniffer.c:(.text+0x1dd): undefined reference to `pcap_setfilter'
sniffer.c:(.text+0x222): undefined reference to `pcap_dump_open'
sniffer.c:(.text+0x27c): undefined reference to `pcap_loop'
collect2: ld returned 1 exit status
make: *** [main] Error 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T23:45:32.647

```
gcc -Wall -pthread -lpcap pirni.c threads.c sniffer.c -o pirni -lnet
                   ^^^^^^ 
```

把它移到最后，这样链接器就知道它应该链接哪些符号。

使用命令行中的库，链接器看到到目前为止它不需要任何符号`libpcap`，因此忽略它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T23:45:50.013

说这个：

```
gcc -Wall -pthread pirni.c threads.c sniffer.c -o pirni -lnet -lpcap
#                                                       ^^^^^^^^^^^^ 
```

图书馆需要在本地翻译单元*之后列出。*您的`ld`手册将详细告诉您原因（这与缺失符号的搜索和插入方式有关）。

# ruby-on-rails - Rails命名空间错误？

> ID：13224176
> 
> 赞同：3
> 
> 时间：2012-11-04T23:44:46.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.2

我有这个`config/routed.db`：

```
namespace :admin do
  resources :users
  resources :events
end 
```

我`User`使用 Rails 提供的脚手架生成了模型，然后我简单地使用 Rails 生成了一个管理员/管理员控制器，`generate`并将所有与用户相关的东西移动到控制器/视图/帮助器内的管理子目录中。是的，我确实必须`admin_`在几个地方添加，并且在部分表单中我必须将其更改`form_for(@user)`为`form_for([:admin, @user])`.

当我尝试创建新用户时（这是我`POST`的用户数据），我收到以下错误消息：

```
undefined method `user_url' for #<Admin::UsersController:0x13f408e0> 
```

应用程序级跟踪显示此处引发了错误：

```
app/controllers/admin/users_controller.rb:47:in `create' 
```

引发此错误的代码行：

```
format.html { redirect_to @user, :notice => 'User was successfully created.' } 
```

上面的行在`respond_to`块内。

所以，我有两个问题：

1.  我该如何解决这个问题？
2.  有没有更聪明、更好的 Rails 方式来做到这一点？

* * *

*此外，如果您建议我以更智能、更好的方式*重新执行此操作，则可以加分！好吧，无论如何我都会这样做！:D

* * *

## 更新

哦，我差点忘记了一些可能相关的东西！我还`Admin::UsersController`继承自`Admin::AdminController`（通常反过来继承自`ApplicationController`）：

`Admin::UsersController < Admin::AdminController`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T00:00:58.180

您还需要在重定向中使用命名空间：

```
redirect_to [:admin, @user] #... 
```

或者

```
redirect_to admin_user_path(@user) #... 
```

# mysql - 为什么这个 MySQL 查询在 MySQL 5.1.56 中这么慢？

> ID：13224177
> 
> 赞同：2
> 
> 时间：2012-11-04T23:44:54.257
> 
> 标签：mysql

以下查询在 MySQL 5.0.67 中执行 0.3 秒，在 MySQL 5.1.56 中执行 3.0 秒。为什么后面的版本慢了十倍？

（数据库从 5.0.67 导出并导入到 5.1.56，因此结构相同。）

```
SET @num :=0, @current_shop_id := NULL, @current_product_id := NULL;

#this query limits the results of the query within it by row number (so that only 10 products get displayed per store)

SELECT * FROM (

#this query adds row numbers to the query within it

SELECT *, @num := IF( @current_shop_id = shop_id, IF(@current_product_id=product_id,@num,@num+1), 0) AS row_number, @current_shop_id := shop_id AS shop_dummy, @current_product_id := product_id AS product_dummy FROM (

SELECT shop, shops.shop_id AS
shop_id, p1.product_id AS product_id
    FROM products p1
    INNER JOIN sex ON
    sex.product_id=p1.product_id AND
    sex.sex=0 AND
    sex.date >= (SUBDATE(NOW(),INTERVAL 7 DAY)) INNER JOIN
    shops ON
    shops.shop_id = p1.shop_id 

    ORDER BY shop
) AS testtable

) AS rowed_results WHERE
rowed_results.row_number>=0 AND
rowed_results.row_number<(0+10) 
```

5.0.67 中此查询的 EXPLAIN 计划

```
id  select_type table   type    possible_keys   key key_len ref rows    Extra
1   PRIMARY <derived2>  ALL NULL    NULL    NULL    NULL    5433    Using where
2   DERIVED <derived3>  ALL NULL    NULL    NULL    NULL    5433     
3   DERIVED sex ALL product_id_2,product_id NULL    NULL    NULL    379571  Using where; Using temporary; Using filesort
3   DERIVED p1  ref PRIMARY,shop_id,shop_id_2,product_id,shop_id_3  product_id  4   mydatabase.sex.product_id   1    
3   DERIVED shops   eq_ref  PRIMARY PRIMARY 4   mydatabase.p1.shop_id   1 
```

5.1.56 中此查询的 EXPLAIN 计划

```
1   PRIMARY <derived2>  ALL NULL    NULL    NULL    NULL    491 Using where
2   DERIVED <derived3>  ALL NULL    NULL    NULL    NULL    491 
3   DERIVED shops   ALL PRIMARY NULL    NULL    NULL    163 Using filesort
3   DERIVED p1  ref PRIMARY,shop_id,shop_id_2,product_id,shop_id_3  shop_id_2   4   mydatabase.shops.shop_id    41  
3   DERIVED sex eq_ref  product_id_2,product_id product_id_2    5   mydatabase.p1.product_id    1   Using where 
```

索引

5.0.67 的产品表

```
Keyname Type    Cardinality Action  Field
PRIMARY  PRIMARY     502437              product_id
shop_id  UNIQUE  502437              shop_id
link
title_2  UNIQUE  502437              title
image
brand    INDEX   38649           brand
title    INDEX   251218              title
date     INDEX   125609              date
shop_id_2    INDEX   87              shop_id
product_id   INDEX   502437              product_id
date
shop_id_3    INDEX   125609              shop_id
date
sale_date    INDEX   187             sale_date 
```

5.1.61 的产品表

```
Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  product_id  493078  A       
 Edit    Drop   shop_id BTREE   Yes No  shop_id 0   A       
link    493078  A   
 Edit    Drop   title_2 BTREE   Yes No  title   0   A       
image   493078  A   
 Edit    Drop   brand   BTREE   No  No  brand   123269  A   YES 
 Edit    Drop   title   BTREE   No  No  title   493078  A       
 Edit    Drop   date    BTREE   No  No  date    41089   A       
 Edit    Drop   shop_id_2   BTREE   No  No  shop_id 12026   A       
 Edit    Drop   product_id  BTREE   No  No  product_id  493078  A       
date    493078  A   
 Edit    Drop   shop_id_3   BTREE   No  No  shop_id 12026   A       
date    49307   A   
 Edit    Drop   sale_date   BTREE   No  No  sale_date   5940    A 
```

5.0.67 的商店表

```
 Keyname    Type    Cardinality Action  Field
PRIMARY  PRIMARY     163             shop_id 
```

5.161 的商店表

```
Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   PRIMARY BTREE   Yes No  shop_id 163 A 
```

5.0.67 的性别表

```
Keyname Type    Cardinality Action  Field
product_id_2     UNIQUE  506094              product_id
sex
product_id   INDEX   506094              product_id 
```

5.1.61 的性别表

```
Action  Keyname Type    Unique  Packed  Column  Cardinality Collation   Null    Comment
 Edit    Drop   product_id_2    BTREE   Yes No  product_id  0   A       
sex 496732  A   
 Edit    Drop   product_id  BTREE   No  No  product_id  496732  A 
```

MySQL 5.1.61 的 my.cnf 文件

```
[mysqladmin]
user=username

[mysqld]
basedir=/opt/bitnami/mysql
datadir=/opt/bitnami/mysql/data
port=3306
socket=/opt/bitnami/mysql/tmp/mysql.sock
tmpdir=/opt/bitnami/mysql/tmp

character-set-server=UTF8
collation-server=utf8_general_ci

max_allowed_packet=16M
wait_timeout = 120
long_query_time = 1
log_slow_queries
log_queries_not_using_indexes
query_cache_limit=2M
query_cache_type=1
query_cache_size=8M
innodb_additional_mem_pool_size=8M
innodb_buffer_pool_size=16M
#innodb_log_file_size=128M
#tmp_table_size=64M
#max_connections = 2500
#max_user_connections = 2500
#innodb_flush_method=O_DIRECT
#key_buffer_size=64M

[mysqld_safe]
mysqld=mysqld.bin

[client]
default-character-set=UTF8
port=3306
socket=/opt/bitnami/mysql/tmp/mysql.sock

[manager]
port=3306
socket=/opt/bitnami/mysql/tmp/mysql.sock
pid-file=/opt/bitnami/mysql/tmp/manager.pid
default-mysqld-path=/opt/bitnami/mysql/bin/mysqld.bin 
```

我注意到如果我删除用于添加行号的外部查询，时间差会下降到 0.3 秒而不是 0.7 秒。

```
SELECT shop, shops.shop_id AS
shop_id, p1.product_id AS product_id
    FROM products p1
    INNER JOIN sex ON
    sex.product_id=p1.product_id AND
    sex.sex=0 AND
    sex.date >= (SUBDATE(NOW(),INTERVAL 7 DAY)) INNER JOIN
    shops ON
    shops.shop_id = p1.shop_id 

    ORDER BY shop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:42:18.720

新数据库中的一些索引显示基数 0，而在旧数据库中它们显示一个很大的值。这可能意味着新数据库对索引的效率有一个错误的认识。分析表会更新有关表保存的值的信息，以便数据库知道要选择哪个索引。

跑

```
ANALYZE TABLE table_name 
```

对于您拥有的每张桌子。或者，您可以使用单个命令分析所有表：

```
ANALYZE TABLE products, shops, ... 
```

参考：[http ://dev.mysql.com/doc/refman/5.1/en/analyze-table.html](http://dev.mysql.com/doc/refman/5.1/en/analyze-table.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:55:54.023

尝试放入一些 USE INDEX (http://dev.mysql.com/doc/refman/5.1/en/index-hints.html)，并尝试找到使用索引的正确顺序。在大型查询中，mysql 通常很难找到要使用的正确索引。

# javascript - CSS Resize 手柄与 resize: both 属性

> ID：13224184
> 
> 赞同：7
> 
> 时间：2012-11-04T23:45:33.117
> 
> 标签：javascript, jquery, css

我正在使用 CSS3 属性：

```
resize: both;
overflow: none; 
```

这会在元素的右下角放置一个调整大小的句柄。

我的第一个问题是：我可以使用这个 CSS 属性在元素上放置其他句柄吗？即我可以在右边缘放一个把手吗？我知道除非元素绝对定位，否则这并不总是有效。

第二个问题是：我可以将句柄设计为更适合我的应用程序吗？

我不能使用 jQuery 调整大小；我用我正在尝试做的事情（CKEditor 中的 Div）对其进行了测试，但它不起作用。如果没有人可以解决上述问题，也许可以使用替代插件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:52:26.840

查看这篇文章，这是同一个问题：[HTML5/CSS3 - Change the look of resize handles](https://stackoverflow.com/questions/7670194/html5-css3-change-the-look-of-resize-handles)

然而归根结底是不可能做到这一点，但是有一个使用背景图像的解决方法：

```
textarea {
  height: 300px;
  width: 300px;
  position: relative;
  background: #fff url(http://merchantmomphotoeditor.com/pixenate/docs/resize_handle2.gif) 100% 100% no-repeat;
} 
```

见[http://jsfiddle.net/q5kdr/](http://jsfiddle.net/q5kdr/)

# php - 使用 Jquery 和 Ajax 处理 PHP 会话

> ID：13224197
> 
> 赞同：0
> 
> 时间：2012-11-04T23:46:54.883
> 
> 标签：php, jquery, ajax, session

所以我想弄清楚这里出了什么问题！

我使用 Ajax 登录和注销用户并刷新文档的某些部分。一切正常，但是当我注销时，我必须单击我的链接两次才能看到更改。

完成所有指令后，我似乎正在破坏会话。

这是它的工作原理（或几乎！）

文件 html/php

```
 <div id="top">  
<?php 
$top = new top();
$top->display();
?>
</div> 
```

所以我只是调用一个制作文档顶部内容的类，这工作正常。

在您登录时的顶部，您有注销选项和以下 jquery/ajax 调用

```
 $("#unlog").live("click",function(){
     req_content("top","user","logout","goodbye");
       }); 
```

因此，当我单击注销时，我运行 req_content() 函数，这一切正常

现在，当我单击它时，运行我的有点 ajax_query 响应程序

```
if($ajax_action=='logout'){

     unset($_SESSION['user']);
     session_destroy();

require('class.php');

$top=new top();
$top->display();

 } 
```

现在发生的事情是我运行了查询，但是在会话变量实际上被破坏之前页面有点刷新。如果我再次单击它，它会按预期工作，因为会话已经被破坏。

任何人都可以解释这个吗？该过程与我的登录相同，并且工作正常。

req_content() 函数

```
function req_content(box,user,action,query) {

    var xhr = getXMLHttpRequest();
    document.getElementById(box).innerHTML="<img src='img/load.gif' alt'Loading....'>";
    xhr.onreadystatechange = function() {

        if (xhr.readyState == 4 && (xhr.status == 200 || xhr.status == 0)) {
            document.getElementById(box).innerHTML=xhr.responseText;
        }

    };

    var sVar1 = encodeURIComponent(box);     /* Endroit ou on demande le contenu*/
    var sVar2 = encodeURIComponent(user);    /* Qui demande le contenu(facultatif)*/
    var sVar3 = encodeURIComponent(action);  /* Quel action veut-on effectuer*/
    var sVar4 = encodeURIComponent(query);   /* La requete pour efectuer l'action*/

    xhr.open("GET", "ajax_http.php?box=" + sVar1 + "&user=" + sVar2 + "&action=" + sVar3 +"&query=" + sVar4, true);
    xhr.send(null);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T23:53:18.990

尝试在此脚本中添加重定向：

```
 if($ajax_action=='logout'){

         unset($_SESSION['user']);
         session_destroy();

/* HERE INSERT A REDIRECT like header("location: someurl");*/

    require('class.php');

    $top=new top();
    $top->display();

     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:02:13.377

您的描述是您正在单击一个链接。页面可能在 AJAX 完成之前刷新。

尝试：

```
$("#unlog").live("click", function() {
    req_content("top", "user", "logout", "goodbye");
    /* prevent browser default event on element such as link being followed, or form being submmitted*/
    return false;
}); 
```

除了发回正常内容，您还可以从 php 返回：

```
 print_r( $_SESSION); 
```

作为对 AJAX 的响应，看看会发回什么。它将被放入预期内容所在的页面中。

# php - PHP 语法 - 为 wordpress 网站组合两个 PHP 字符串

> ID：13224198
> 
> 赞同：0
> 
> 时间：2012-11-04T23:47:17.907
> 
> 标签：php, wordpress, custom-post-type

我正在尝试组合两个 PHP 片段，以便可以从 Wordpress 页面中删除某个自定义帖子类别。

这是主要的 PHP 片段 `<?php query_posts($query_string . '&cat=-21'); ?>`

我想将其包含在其中，因此它只会删除帖子类别 `( 'post_type' => 'portfolio' )`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T23:54:39.083

我认为这就是你所追求的：

```
<?php query_posts($query_string . '&cat=-21&post_type=portfolio');?> 
```

现在只会显示投资组合，这是您想要的吗？参考：[http ://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

# django - Django 保存：单击保存数据库时未在 admin.py 上更新

> ID：13224199
> 
> 赞同：0
> 
> 时间：2012-11-04T23:47:22.690
> 
> 标签：django, django-templates, django-admin, django-views

这是我的编码：

视图.py

```
def form_valid(self, form):
    form.save()
    return HttpResponseRedirect(reverse("departmentt_view")) 
```

相关模板：

```
<form action="{% url Condition_view department_id patient_NO %}" method="post">
    {% csrf_token %}
<input type="submit" value="Save"/> 
```

当我单击保存时，它应该更新 admin.py 中的数据库并返回到第一页`departmentt_view`。但是当我点击保存它返回空白（白页）但仍然指向相同的添加`127.0.0.1:8000/Diablo/1/123456/Condition`

谁可以帮我这个事。提前谢谢你。

编辑程序：

视图.py

```
def form_valid(self, request, department_id, patient_NO):
    if request.method == 'POST':
        form = ConditionForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(reverse("departmentt_view"))
    return(reverse("form_valid")) 
```

网址.py

```
url(r'^diablo/(?P<department_id>\d+)/(?P<patient_NO>\d+)/Condition/$', 'diabloreb.views.form_valid', name='form_valid'), 
```

更改为此代码后，我有另一个错误说`could not import diablorab.views.form_valid`父模块不存在。

所以我改回这个

```
url(r'^diablo/(?P<department_id>\d+)/(?P<patient_NO>\d+)/Condition/$', ConditionView.as_view(), name = 'Condition_view',), 
```

当我更改此网址时，我会得到相同的输出，其中仅显示白页。

相关模板

```
<form action="." method="post">
    {% csrf_token %}
<input type="submit" value="Save"/> 
```

我完全迷路了。谁能帮我。太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:20:28.827

尝试：-

```
<form action="." method="post">
    {% csrf_token %}
<input type="submit" value="Save"/> 
```

所以它提交到同一页面。

如果同一个页面是`127.0.0.1:8000/Diablo/1/123456/Condition`，那么这个 url 中似乎有 3 个不同的参数。

您的 urls.py 正则表达式应该指向您的视图函数，例如：-

```
url(r'^Diablo/(?P<department_id>\d+)/(?P<patient_NO>\d+)/condition/$',   
'yourapp.views.form_valid',
name='form_valid'), 
```

您的`form_valid`视图函数定义应该总共接受 4 个参数，如下所示：-

```
def form_valid(request, department_id, patient_NO):

    form = YourForm()

    if request.POST == 'POST':
        form = YourForm(request.POST)
        if form.is_valid():
            # do whatever you else you need.
            form.save()  
            return HttpResponseRedirect(reverse("departmentt_view"))

    return(reverse("form_valid") 
```

请注意，它不像声明`form.save()`代码中显示的那样简单。您实际上需要确保`YourForm`定义和导入您的表单类（在我的示例代码中，是我所指的表单类），以便您的视图函数可以使用它并执行分配，`form = YourForm(request.POST)`以便您的表单类接收 POST- ed 来自提交表单的用户的变量（可以说是“POST 请求”）。

**已编辑**

视图函数只接受 2 个参数。

# asp.net - 我的应用程序使用什么用户来访问文件系统？

> ID：13224202
> 
> 赞同：1
> 
> 时间：2012-11-04T23:47:41.320
> 
> 标签：asp.net, security, iis

我有一个应用程序`System.UnauthorizedAccessException`在尝试从文件系统读取时出错。

我查看了应用程序池，发现它正在使用`Network Service`它的身份。IIS 应用程序允许使用现有帐户进行匿名身份验证，我们称之为`IUSR-MYSERVER`。它也已`Integrated Windows authentication`启用。

如果我转到有问题的文件夹并`Everyone`使用读取+执行权限添加，错误就会消失。但是，如果我添加`IUSR-MYSERVER`或`NETWORK SERVICE`具有相同的权限，我仍然会得到相同的错误。

当我查看事件日志中的错误条目时，它的用户为`N/A`.

我的应用程序试图以什么用户身份访问文件系统？我认为只使用会很糟糕`Everyone`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:43:45.620

如果 Web 应用程序使用模拟，则当前登录的用户（或匿名用户的 IUSR）将访问该文件 - 使用集成 Windows 身份验证和 IE 将导致单点登录，因此打开浏览器的用户将访问该文件.

如果不使用模拟，则使用应用程序池标识。

要在代码中确定当前登录的用户，请使用`System.Threading.Thread.CurrentPrincipal.Identity.Name`- 但请注意，这并不代表正在访问文件的帐户。

要确定执行代码的实际身份，请使用`System.Security.Principal.WindowsIdentity.GetCurrent().Name`.

# ios - 如何从 RGBA 创建 UIColor？

> ID：13224206
> 
> 赞同：48
> 
> 时间：2012-11-04T23:48:53.070
> 
> 标签：ios, objective-c, rgb, nsattributedstring, uicolor

我想`NSAttributedString`在我的项目中使用，但是当我尝试设置颜色时，不是来自标准集（`redColor`,`blackColor`等`greenColor`）`UILabel`的颜色以白色显示这些字母。这是我的代码行。

```
[attributedString addAttribute:NSForegroundColorAttributeName
                         value:[UIColor colorWithRed:66
                                               green:79
                                                blue:91
                                               alpha:1]
                         range:NSMakeRange(0, attributedString.length)]; 
```

我尝试使用`CIColor`Core Image 框架制作颜色，但它显示了相同的结果。我应该在我的代码中进行哪些更改才能以正确的方式执行它？

Thx 的答案，伙计们！

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-11-04T23:50:58.103

您的值不正确，您需要将每个颜色值除以 255.0。

```
[UIColor colorWithRed:66.0f/255.0f
                green:79.0f/255.0f
                 blue:91.0f/255.0f
                alpha:1.0f]; 
```

文档状态：

```
+ (UIColor *)colorWithRed:(CGFloat)red
                    green:(CGFloat)green
                     blue:(CGFloat)blue
                    alpha:(CGFloat)alpha 
```

**参数**

**red** 颜色对象的红色分量，指定为 0.0 到 1.0 之间的值。

**green** 颜色对象的绿色分量，指定为 0.0 到 1.0 之间的值。

**blue** 颜色对象的蓝色分量，指定为 0.0 到 1.0 之间的值。

**alpha** 颜色对象的不透明度值，指定为 0.0 到 1.0 之间的值。

[参考这里。](http://developer.apple.com/library/ios/documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/clm/UIColor/colorWithRed%3agreen%3ablue%3aalpha%3a)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-01-23T00:52:07.240

我最喜欢的宏之一，没有项目没有：

```
#define RGB(r, g, b) [UIColor colorWithRed:(float)r / 255.0 green:(float)g / 255.0 blue:(float)b / 255.0 alpha:1.0]
#define RGBA(r, g, b, a) [UIColor colorWithRed:(float)r / 255.0 green:(float)g / 255.0 blue:(float)b / 255.0 alpha:a] 
```

使用类似：

```
[attributedString addAttribute:NSForegroundColorAttributeName
                         value:RGB(66, 79, 91)
                         range:NSMakeRange(0, attributedString.length)]; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-04T23:51:33.507

`UIColor`使用范围从 0 到 1.0，而不是整数到 255 .. 试试这个：

```
// create color
UIColor *color = [UIColor colorWithRed:66/255.0
                                 green:79/255.0
                                  blue:91/255.0
                                 alpha:1];

// use in attributed string
[attributedString addAttribute:NSForegroundColorAttributeName
                         value:color
                         range:NSMakeRange(0, attributedString.length)]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-07T16:01:24.357

请尝试代码

```
[attributedString addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithRed:77.0/255.0f green:104.0/255.0f blue:159.0/255.0f alpha:1.0] range:NSMakeRange(0, attributedString.length)]; 
```

像

```
Label.textColor=[UIColor colorWithRed:77.0/255.0f green:104.0/255.0f blue:159.0/255.0f alpha:1.0]; 
```

UIColor 的 RGB 分量在 0 和 1 之间缩放，最高不超过 255。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-06T06:20:19.707

自从@Jaswanth Kumar 问起，这是[LSwift](https://github.com/superarts/LSwift/blob/master/src/LFramework.swift)`Swift`的版本：

```
extension UIColor {
    convenience init(rgb:UInt, alpha:CGFloat = 1.0) {
        self.init(
            red: CGFloat((rgb & 0xFF0000) >> 16) / 255.0,
            green: CGFloat((rgb & 0x00FF00) >> 8) / 255.0,
            blue: CGFloat(rgb & 0x0000FF) / 255.0,
            alpha: CGFloat(alpha)
        )
    }
} 
```

用法：`let color = UIColor(rgb: 0x112233)`

# jquery - 替代 (window).scroll

> ID：13224207
> 
> 赞同：0
> 
> 时间：2012-11-04T23:49:02.180
> 
> 标签：jquery, scroll, window, fadein, fadeout

> **可能重复：**
> [ScrollTop 在 Chrome 中真的很生涩](https://stackoverflow.com/questions/13222978/scrolltop-really-jerky-in-chrome)

我正在使用以下代码来获取返回顶部按钮和导航以在用户滚动后淡入。问题是每次滚动时都会触发它，因此导致滚动非常生涩。有没有另一种方法可以做到这一点，它可能只会触发一次功能？

```
 $(function () {
    $(window).scroll(function () {
        if ($(this).scrollTop() > 600) {
            $('#backToTop, #navigation').fadeIn();
        } else {
            $('#backToTop, #navigation').fadeOut();
        }
    });
    }); 

   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:09:19.580

也许设置一个超时...

```
function scrollit(){  
    if ($(this).scrollTop() > 600) {
    $('#backToTop').fadeIn();
    } else {
    $('#backToTop').fadeOut();
    }
     }

var timer;

$(window).scroll(function () {

window.clearTimeout(timer);
timer = window.setTimeout(function(){ scrollit(); }, 2000);

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:54:18.163

您可以实现[Ben Alman 的 jQuery 油门或去抖动](http://benalman.com/projects/jquery-throttle-debounce-plugin/)插件。基本上，这将您的功能限制为仅运行一定次数。两者的区别在官网上有解释：

> 好吧，简单地说：虽然节流将函数的执行限制为每延迟毫秒不超过一次，但去抖动保证函数只会执行一次（给定指定的阈值）。

# ruby-on-rails-3 - 有没有办法在创建对象后使用回形针上传和附加图像？

> ID：13224208
> 
> 赞同：0
> 
> 时间：2012-11-04T23:49:04.837
> 
> 标签：ruby-on-rails-3, paperclip

我一直在阅读的关于使用回形针的教程都包括这样的内容

```
<% form_for @product, :html => { :multipart => true } do |form| %>
  <ol class="formList">
    <!-- Other fields go here... -->
    <li>
      <%= form.label :photo, "Photo" %>
      <%= form.file_field :photo %>
    <li>
      <%= form.submit "Submit" %>
    </li>
  </ol>
<% end %> 
```

在我看来，您需要在单击提交之前上传照片。在我的网站上，我希望用户能够创建产品，然后如果他们想添加照片，请单击产品视图中的上传照片按钮。然后上传的照片将被添加到产品中。这可以使用回形针或其他任何东西吗？还是我需要一个单独的照片/图像模型并通过它提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:01:03.050

好吧，即使只是为产品添加照片，您仍然在执行产品模型的更新。因此，它应该是您发布的产品模型的正常形式，但没有其他字段。只需为添加照片过程制作不同的表单视图。

您可以将 ?photo=1 之类的参数传递给产品资源的编辑操作，以呈现正确的视图，并可能使该编辑操作类似于 ajax，因此它看起来更即时。但是，模型的更新操作将无法通过 ajax 进行，因为您上传了图像。

# c++ - GCC -Wunused-function 不起作用（但其他警告正在起作用）

> ID：13224209
> 
> 赞同：6
> 
> 时间：2012-11-04T23:49:06.343
> 
> 标签：c++, c, gcc, compiler-warnings

我试图通过使用 GCC 的`-Wunused-function`标志在我的代码库中找到未使用的函数。

正如我所料，编译下面的代码会`gcc -Wall -Wunused-function main.cpp`打印一个`unused variable`警告：

```
warning: unused variable ‘x’ [-Wunused-variable] 
```

但是，编译器不会给出`unused-function`警告。 **我该怎么做才能让 GCC 注意到未使用的功能`foo()`？**

```
// main.cpp

void foo(){ } //should (but doesn't) trigger 'unused function' warning

int main (int argc, char **argv){
    int x; //correctly triggers 'unused variable' warning
    return 0;
} 
```

请记住，我**确实想要**未使用的功能警告。这**不是**“我如何摆脱警告”的问题。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-04T23:54:57.303

非静态函数永远不会被视为“未使用”，因为它的符号已导出并且可供其他编译单元使用，这是 gcc 无法检测到的。`-Wunused-functions`仅记录以警告已声明但未调用的*静态函数。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-04T23:55:55.220

来自 gcc 文档：

> -Wunused-function：每当声明了静态函数但未定义或未使用非内联静态函数时发出警告。此警告由 -Wall 启用。

如您所见，您已经定义并声明了一个非静态函数。此外，您的函数没有被内联（您需要使用`-O3`优化）。

到目前为止，我不确定您要求的内容是否存在于 gcc 中。:-) 但它是开源的.. 也许你可以实现它？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-20T10:09:24.713

You can find unused non-static functions using [linker optimisation](https://blog.flameeyes.eu/2008/01/today-how-to-identify-unused-exported-functions-and-variables).

I compiled your main.cpp with

```
gcc -ffunction-sections -fdata-sections -Wl,--gc-sections -Wl,--print-gc-sections main.cpp 
```

And the output

```
/usr/bin/ld: Removing unused section '.text._Z3foov' in file '/tmp/cc9IJvbH.o' 
```

Shows that `foo()` is unused and the linker could remove it.

# c# - twitter bootstrap、html 控件和 asp.net 代码

> ID：13224211
> 
> 赞同：1
> 
> 时间：2012-11-04T23:49:39.373
> 
> 标签：c#, asp.net, html

我正在开发一个使用 twitter bootstrap 和 asp.net 开发的网站。

我想知道如何从页面后面的代码访问 html 控件。例如，

```
<div class="control-group">
<label class="control-label" for="name">
Your Name</label>
<div class="controls">
                <input type="text" class="input-xlarge" name="ApplicantName" id="AppName" placeholder="First Name and Last Name" >
            </div>
        </div> 
```

如何获取或设置申请人名称文本框的值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T23:56:48.597

向控件添加一个`runat`属性并将值设置为`server`，它将可以在代码隐藏中访问。

```
<input type="text" id="txtName" runat="server" /> 
```

现在在代码隐藏中，您可以访问它。

```
txtName.Value="this is set from codebehind"; 
```

# django - NoReverseMatch（与pk相关）：django

> ID：13224213
> 
> 赞同：0
> 
> 时间：2012-11-04T23:50:14.953
> 
> 标签：django, django-forms, django-templates, primary-key

我想从表单中获取发布的数据并显示它们。我使用“{% url uasite1.views.sell_detail sell_detail.pk %}”根据他们的pk提取数据。

然而，只是 [ NoReverseMatch ・・・, Reverse for 'uasite1.views.sell_detail' with arguments '('',)' and keyword arguments '{}' not found.] 出现了。我的代码有什么问题？

模型.py

```
from django.db import models
from django.forms import ModelForm

class Sell(models.Model):
    subject = models.CharField(max_length=100)
    price = models.CharField(max_length=100)
    condition = models.CharField(max_length=100)
    email = models.EmailField()
    body = models.CharField(max_length=200) 
```

表格.py

```
from django.forms import ModelForm
from uasite1.models import Sell

class SellForm(ModelForm):
    class Meta:
        model = Sell 
```

视图.py

```
from django.shortcuts import render_to_response,get_object_or_404
from django.http import HttpResponseRedirect
from uasite1.forms import SellForm
from uasite1.models import Sell
from django.template import RequestContext

def sell_detail(request, pk):
    sell = get_object_or_404(Sell, pk=int(pk))
    return render_to_response('sell_display.html',{'sell':sell})

def sell_create(request):
    context = {}
    if request.method == 'POST':
        form = SellForm(request.POST)
        if form.is_valid():
            new_sell = form.save()
            return HttpResponseRedirect('/sechand/%d/' % new_sell.pk)
    else:
        form = SellForm()
    context['form'] = form
    return render_to_response('sell.html',context,context_instance = RequestContext(request))

def Electronics(request):
    latest_sell_list = Sell.objects.all()[:5]
    return render_to_response('electronics.html',{'latest_sell_list':latest_sell_list}) 
```

网址.py

```
from django.conf.urls import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    url(r'^sechand/$','uasite1.views.sell_create'),
    url(r'^sechand/(\d+)/$', 'uasite1.views.sell_detail'),
    url(r'^electronics/$', 'uasite1.views.Electronics'),
    url(r'^admin/', include(admin.site.urls)),
) 
```

电子产品.html

```
{% extends 'base.html' %}
{% block extrahead %}
    <p><strong>Electronics</strong></p>

{% endblock %}

{% block content %}

    <p><a href="{% url uasite1.views.sell_detail sell_detail.pk %}">{{ sell.subject }}</a></p>

{% endblock %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:29:38.040

改变
`<a href="{% url uasite1.views.sell_detail sell_detail.pk %}">`

到：
`<a href="{% url uasite1.views.sell_detail sell.pk %}">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:32:09.490

有几个错误。

1：更改您的网址

```
url(r'^sechand/(\d+)/$', 'uasite1.views.sell_detail'), 
```

到

```
url(r'^sechand/(P<pk>\d+)/$', 'uasite1.views.sell_detail'), 
```

这使得 url 接受传递给 view 的参数`pk`。

2：您的`Electronics()`视图表明您正在将列表传递给模板，因此您需要更新模板以迭代此列表并适当地呈现列表中的每个项目。并确保正确使用变量名。

```
{% block content %}

    {%for sell in latest_sell_list %}
        <p><a href="{% url uasite1.views.sell_detail sell.pk %}">{{ sell.subject }}</a></p>

    {%endfor%}
{% endblock %} 
```

# jquery - jQuery MagicLine Navigation 可以垂直工作吗？

> ID：13224217
> 
> 赞同：0
> 
> 时间：2012-11-04T23:50:31.303
> 
> 标签：jquery, navigation, nav, sliding, vertical-scrolling

我想在我的网站导航上使用[这里看到的魔术线效果。](http://css-tricks.com/jquery-magicline-navigation/)唯一的问题是我有一个垂直导航，本教程只解释了如何在水平导航上使用魔术线。

我的问题（或问题）是：
（1）魔术线可以垂直工作而不是水平工作吗？
(2) 这将如何实现？
(3) 如果做不到，有没有其他方法可以达到类似的效果，特别是垂直导航？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:10:17.323

我决定为你准备一些东西。它远非完美，但它应该让你朝着正确的方向前进。我试图提供体面的文档，以便您可以进一步使用此插件。由于时间紧迫，我没有做太多彻底的测试。希望这会有所帮助。

[**首先，工作jsFiddle的链接**](http://jsfiddle.net/3eTwQ/)

现在，代码

```
/**
 * You can target the .vLine class and change anything you want
 * Core Propreties that should be left untouched are:
     1\. top value
     3\. position declaration
 * Any other CSS properties should be changed to suit your style.
 * In some cases, you may want to change the left / right values
 * to fit the needs of the position of the vLine
 * simply use $('.vLine').css('left/right', 'value');
 */

(function($){
    //define methods of the plugin
    var methods = {
        init: function(options){

            //set up some default values
            var defaults = {
                'side' : 'right'            
            }

            //for each element with vLine applied
            return this.each(function(){

                //override defaults with user defined options
                var settings = $.extend({}, defaults, options);       

                //cache variable for performance
                var $this = $(this);

                //wrap the UL with a positioned object just in case
                $this.wrap('<div style="position:relative;width:'+$this.css('width')+';height:'+$this.css('height')+';"></div>');

                //test to see if element exists, if not, append it
                if(!$('.vLine').length){

                    //parent is the ul we wrapped
                    //insert the vLine element into the document
                    $this.parent().append($('<div style="position:absolute;top:'+$this.position().top+'px;height:'+$this.height() / $this.find('li').length+'px;width:3px;" class="vLine"></div>'));                            
                    //do we want to show it on the left or right?
                    if(settings.side = 'right'){
                        $('.vLine').css('right', '0');
                    }else if(settings.side = 'left'){
                        $('.vLine').css('left', '0');
                    }
                }

                //define the hover functions for each li
                $this.find('li').hover(function(e){                       
                    $('.vLine').stop().animate({
                        top: $(this).position().top    
                    },200);    
                }, function(e){  
                   //we want to reset the line if this is met
                   if(['UL', 'LI'].indexOf(e.toElement.tagName) == -1){
                        $('.vLine').stop().animate({
                            top: '1px'
                        });                            
                    }                    
                });                
            });
        }            
    }

    //make it a function!
    $.fn.vLine = function( method ) {
        if (methods[method]) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if (typeof method === 'object' || !method) {
            return methods.init.apply(this, arguments);
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.vLine' );
        }
    };
})(jQuery);

//on document ready
$(function(){

    //invoke our vLine!
    $('ul').vLine();
});​ 
```

# uml - 我可以在用例中扩展演员吗？

> ID：13224218
> 
> 赞同：3
> 
> 时间：2012-11-04T23:50:34.653
> 
> 标签：uml, actor, extend, use-case

我可以在用例中扩展演员吗？例如我有“普通用户”、“学生用户”和“教师用户”......每个用例“普通用户”都使用它，默认情况下“学生用户”和“教师用户”也使用它......所以我可以为“学生用户”和“教师用户”扩展“普通用户”吗？那很受欢迎吗？非常感谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T23:55:13.910

是的，例如，您可能有一个数据库管理员和一个 Active Directory 管理员。

您可以将常见需求分解为新的基本角色“系统管理员”，以获得简化模型。

您可以像其他任何方式一样表示actor泛化，绘制一条带有闭合箭头的实线，从专门的actor指向基本actor。

# python - 从 IDLE shell 中的脚本插入 IDLE 历史记录

> ID：13224221
> 
> 赞同：0
> 
> 时间：2012-11-04T23:51:20.573
> 
> 标签：python, python-idle

我希望能够将代码从脚本推送到 IDLE shell 历史记录中，这样

```
>>>somecode = """
def somefunc():
    pass
"""
>>>idlelib.some_unknown_add_to_history_method(somecode)
>>><ALT-p> 
```

结果是：

```
>>>def somefunc():
    pass 
```

这样我就可以编辑和重新评估 somefunc ，就像我手动将代码粘贴或输入到 shell 中一样。有没有现有的方法可以做到这一点，还是我需要编写一个空闲扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:46:55.350

IDLE 不提供将项目插入其 shell 历史记录的方法。您可以更改 PyShell.py 中的代码。

查看[IdleX](http://idlex.sourceforge.net)项目，了解大量 IDLE 扩展示例。有一个扩展可以跨 IDLE 会话提供持久的历史记录，这可能是编写您自己的扩展的一个很好的起点。请参阅该项目中的 PersistentHistory.py。

您可能会喜欢它的 SubCode 扩展，它允许您通过按 Ctrl+Enter 直接从编辑器中编辑和重新评估部分代码。您还可以在编辑器中突出显示代码并按 F9 运行它。

# google-app-engine - Gtalk OAuth 令牌连接到 Gtalk 服务

> ID：13224224
> 
> 赞同：1
> 
> 时间：2012-11-04T23:51:47.233
> 
> 标签：google-app-engine, xmpp

我正在实现一个 xmpp 客户端（现在只用于 gtalk）。

我从获取 OAuth2 令牌开始，如[OAuth 2.0 Authorization](https://developers.google.com/talk/jep_extensions/oauth)中所述。一旦获得令牌，我也在寻求有关如何连接到 gtalk 服务器的帮助。我已经阅读[了示例](https://developers.google.com/talk/jep_extensions/oauth#3)，但不确定如何在 GAE 上实现 SASL 身份验证。

接下来，如何让它像聊天客户端一样工作，让真实用户可以聊天。我已经看到了可以制作聊天机器人的示例，以及其他[需要](https://developers.google.com/appengine/articles/using_xmpp)用户输入用户名和密码才能聊天的[示例。](http://code.google.com/p/xmppwebchat/)

但我的想法是对我的 GAE 应用程序使用 Google 的身份验证，然后让我的应用程序的行为类似于真正的 gtalk 用户的聊天客户端。请指出我如何实现这一目标的正确方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T15:04:46.400

我想我在实现 gtalk XMPP 客户端时遇到了类似的障碍。检索访问令牌一切顺利，但随后我来到这一部分：

（来自[https://developers.google.com/talk/jep_extensions/oauth](https://developers.google.com/talk/jep_extensions/oauth)）：

```
<auth xmlns="urn:ietf:params:xml:ns:xmpp-sasl" 
    mechanism="X-OAUTH2"
    auth:service="oauth2"
    xmlns:auth="http://www.google.com/talk/protocol/auth">  
  base64("\0" + user_name + "\0" + oauth_token)
</auth> 
```

它要求用户名。这是您遇到的问题吗？就我个人而言，此时我遇到了障碍，因为显然因为它是 OAuth，所以程序不知道用户名。我不确定谷歌对此的建议是什么，我无法找到任何信息。

无论如何，假设您可以正确地通过 XMPP 服务器的身份验证，它的行为应该与任何其他 XMPP 服务器一样。

我发现的一些关于 gtalk XMPP 实现的事情可能会对您或其他人有所帮助：

*   要连接的服务器可以是 talk.google.com 或 xmpp.google.com
*   元素的“to”属性`<stream:stream>`似乎需要是“gmail.com”而不是服务器地址
*   服务器使用的证书需要验证为来自“gmail.com”而不是服务器地址（启动 TLS 时）
*   此页面可能会有所帮助：[https](https://developers.google.com/cloud-print/docs/rawxmpp) ://developers.google.com/cloud-print/docs/rawxmpp （一切都到步骤＃2）

在不知道你在用什么编码的情况下，很难直接回答你的问题。如果您像我一样，并且正在从头开始实施 XMPP 客户端，我只能祝您好运（这将是一段漫长的旅程）。但是，如果您使用 XMPP 框架来减轻负担，那么它们中的大多数应该有内置的东西来处理 gtalk ......

# matlab - 查找矩阵的从到距离（matlab）

> ID：13224225
> 
> 赞同：3
> 
> 时间：2012-11-04T23:52:04.017
> 
> 标签：matlab, matrix, distance

以下矩阵 a 表示从到距离：

```
a = [0 3 5 6; 4 0 2 9; 9 1 0 4; 8 3 8 0];

a =

 0     3     5     6
 4     0     2     9
 9     1     0     4
 8     3     8     0 
```

（即从 2 到 4 = 9，从 1 到 2 = 3 等）

矩阵***a***是静态的（不改变），还有另一个矩阵***b***发生变化。一个示例输入是：

```
b = [1; 4; 2; 1; 3; 4; 1];

b =

 1
 4
 2
 1
 3
 4
 1 
```

我正在寻找第一行和第二行之间的距离 - 并为所有行执行该任务以输出：

```
b =

 1  
 4  6
 2  3
 1  4
 3  5
 4  4
 1  8 
```

其中第二列是从矩阵***a***获得的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:13:39.407

这是一个单行解决方案：

```
%#Set parameters of problem
a = [0 3 5 6; 4 0 2 9; 9 1 0 4; 8 3 8 0];
b = [1; 4; 2; 1; 3; 4; 1];
aSize = size(a);

%#The one-line solution 
Soln = [b, [NaN; a(sub2ind(aSize, b(1:end-1), b(2:end)))]]; 
```

或者，非矢量化解决方案是：

```
%#Set parameters of problem
a = [0 3 5 6; 4 0 2 9; 9 1 0 4; 8 3 8 0];
b = [1; 4; 2; 1; 3; 4; 1];
T = length(b);

%#Preallocate a distance vector
bDist = NaN(T, 1);

%#Loop over b getting the distance for each pair
for t = 2:T
    bDist(t, 1) = a(b(t-1), b(t));
end

%#Combine b and bDist into a single matrix.
Soln = [b bDist]; 
```

那么哪种解决方案是最优的呢？在我的机器（R2012b，Linux Mint v12）上，临界点长度`b`约为650。如果`b`大于650，则使用矢量化解决方案（即单线）。如果`b`小于 650，则使用循环。

顺便说一句，如果您想知道，单行解决方案通过使用函数将连续的对转换`b`为矩阵的行和列索引来工作。然后通过使用这些索引进行索引来找到解向量。`a``sub2ind``a`

ps 一个不对称的距离矩阵？听起来是个有趣的问题！

# c++ - 在 C++ 中动态添加变量

> ID：13224227
> 
> 赞同：3
> 
> 时间：2012-11-04T23:52:15.403
> 
> 标签：c++, dynamic-variables

我正在为学校做一个项目。情况是这样的：

> > 您应该能够为***n***名学生输入权重。计算学生的平均体重并输出有多少学生的体重低于 65 公斤。

到目前为止，我有这个 C++ 源代码示例：

```
#include <cstdlib>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    int number_of_students;

    cout << "How many students would you like to add?: ";
    cin >> number_of_students;
    cout << endl;
    cout << endl;

    cout << "--------------------------------------------" << endl;
    cout << "---------- ENTER STUDENT'S WEIGHT ----------" << endl;
    cout << "--------------------------------------------" << endl;
    cout << endl;

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

这基本上没什么，因为我目前被困住了。当用户输入例如 6 个学生时，我不知道我可以为谁添加例如 6 个新的权重变量。

**编辑：**

我可以计算平均体重，找出有多少学生的体重低于 65 公斤。只有我坚持定义将添加多少学生的变量数量。计算学生的平均体重并输出有多少学生的体重低于 65 公斤。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T23:54:38.053

您需要将重量存储在某种大小可变的*容器中。*非常推荐使用标准库中的容器，最典型的选择是`std::vector`.

```
#include<vector>
#include<algorithm>  //contains std::accumulate, for calculating the averaging-sum

int main(int argc, char *argv[])
{
    int number_of_students;

    cout << "How many students would you like to add?: ";
    cin >> number_of_students;
    cout << endl;
    cout << endl;

    cout << "--------------------------------------------" << endl;
    cout << "---------- ENTER STUDENT'S WEIGHT ----------" << endl;
    cout << "--------------------------------------------" << endl;
    cout << endl;

    std::vector<float> weights(number_of_students);

    for(int i=0; i<number_of_students; ++i) {
      cin >> weights[i];
    }

    cout << "Average is: " << std::accumulate(weights.begin(), weights.end(), 0.f)
                                      / number_of_students
      << std::endl;

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-04T23:55:54.163

您可以在循环中使用一个变量。例子：

```
for (int i = 0; i < number_of_students; i++) {
    int weight;
    cin >> weight;
    if (weight < 65)
        result++;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T23:54:34.420

使用**[new](http://www.cplusplus.com/reference/std/new/operator%20new%5B%5D/)**运算符创建一个整数**数组**。

```
cin >> number_of_students;
int* x = new int[number_of_students]; 
```

你现在有一个数组`size=number_of_students`。用它来存储重量。

* * *

**编辑**以这种方式处理它并不是最好的（处理内存泄漏等）。请注意评论和其他答案，尤其是。不使用**[中间存储](https://stackoverflow.com/a/13224254/759019)**和基于**[std::vector](https://stackoverflow.com/a/13224244/759019)**的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-04T23:58:00.143

也许没有得到这个问题，但你可以创建一个一定长度的数组，比如

```
int* a = new int[number_of_students];

for (int i = 0; i < number_of_students; i++) {
    cin >> a[i];
} 
```

希望它有所帮助，祝你好运......

# javascript - 从中获取价值并写输出我想使用“排名”中的值来确定“排行榜”中打印的内容我似乎无法弄清楚我哪里出错了。我认为这是我最接近让它发挥作用的一次。如何将局部变量 team 从函数内部传递到“排行榜”？ <title< h1="">> ID：13224233
> 
> 赞同：1
> 
> 时间：2012-11-04T23:53:17.260
> 
> 标签：javascript

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:51:21.283

这应该可以满足您的需求：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http-//www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
        <title>Jose Cuervo PBV</title>
        <link href="rosters.css" rel="stylesheet" type="text/css" />
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>
    <img src = "./images/Cuervo_Logo.jpg" alt = "Cuervo PBV Logo" />
    <select id='standings' name='standings' onchange="listTeam(this)">
        <option value='0'>First Place</option>
        <option value='1'>Second Place</option>
        <option value='2'>Third Place</option>
        <option value='3'>Fourth Place</option>
        <option value='4'>Fifth Place</option>
    </select>
    <select id='leaderBoard' name='leaderBoard' multiple="multiple" size="1" style="width: 300px;" ></select>
    <script type="text/javascript">
        //put script block at end of body to ensure all other elements have already
        //been loaded into the DOM (and therefore exist when we need them to.
        //
        //"new Array" is not helpful here, so use literal notation instead.
        var teams = [
                "Jenny Kropp         Whitney Pavlik",
                "Jennifer Fopma      Brooke Sweat",
                "Kristen Batt        Raquel Ferreira",
                "Emily Day           Heather Hughes",
                "Christal Engle      Tealle Hunkus"
            ],
            listTeam = function listTeam(sel) {
                var val = document.getElementById('standings').value, //get the selected value
                    team = teams[val],  //get the selected team, based on value
                    opt = document.createElement('option'), //create an <option> element
                    lb = document.getElementById('leaderBoard'), //get the leaderBoard select element
                    children = lb.children.length, //store the number of <option> child elements
                    child = null, //declare a variable to store an <option> child element
                    i = 0; //incrementor
                opt.innerText = team; //set the innerText
                for (i = 0; i < children; i += 1) {
                    //loop through every child element of leaderBoard
                    child = lb.children[0]; //store reference to element
                    lb.removeChild(child); //remove from leaderBoard
                }
                lb.appendChild(opt); //add new <option> element 
            };
        listTeam(); //call function on initial load as the leaderBoard select element has a selected child
    </script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T23:58:45.387

由于您想将结果放在选项元素中，您可以在您正在使用的函数中执行 innerHTML。所以这看起来像下面这样：

```
 function listTeam(sel) {
     var i = document.getElementById('standings').value;
     var team = teams[i];

     document.getElementById('leaderBoardOptions').innerHTML = team;

  } 
```

当然，在选项元素上放一个 id。

`<option id="leaderBoardOptions"></option>`

也看看[这个](http://www.tizag.com/javascriptT/javascript-innerHTML.php)网站它有一些关于使用innerHTML的很好的解释</title<>

# c++ - C++11初始化类静态常量数组

> ID：13224235
> 
> 赞同：8
> 
> 时间：2012-11-04T23:53:20.567
> 
> 标签：c++, gcc, c++11, gcc4.7

这就是我正在尝试的。MinGW g++ 4.7.0。

```
#include <iostream>
#include <string>

class Fruit
{
public:
    enum Value { APPLE, ORANGE, BANANA, NONE };
    static const Value VALUES[4] = { APPLE, ORANGE, BANANA, NONE };
    Fruit (Value v = NONE) : v_(v) { };
    std::string to_string () const {
        switch (v_) {
            case APPLE: return "apple";
            case ORANGE: return "orange";
            case BANANA: return "banana";
            default: return "none";
        }
    }
private:
    Value v_;
};

int main (int argc, char * argv[])
{
    for (Fruit f : Fruit::VALUES)
        std::cout << f.to_string() << std::endl;
    return 0;
} 
```

我尝试编译它并获得以下输出：

```
>g++ -std=c++0x test.cpp
test.cpp:9:66: error: 'constexpr' needed for in-class initialization of static d
ata member 'const Fruit::Value Fruit::VALUES [4]' of non-integral type [-fpermis
sive]

>g++ -std=c++0x -fpermissive test.cpp
test.cpp:9:66: warning: 'constexpr' needed for in-class initialization of static
 data member 'const Fruit::Value Fruit::VALUES [4]' of non-integral type [-fperm
issive]
cc1l4Xgi.o:test.cpp:(.text+0x1a): undefined reference to `Fruit::VALUES'
collect2.exe: error: ld returned 1 exit status 
```

C++11 是否应该允许在这样的类中初始化静态 const 数组？还是必须像 C++11 之前那样在类之外定义它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-05T00:05:56.243

> test.cpp:9:66：错误：类内初始化非整数类型的静态数据成员“const Fruit::Value Fruit::VALUES [4]”需要“constexpr”[-fpermissive]

编译器告诉我们缺少什么：

```
class Fruit
{
public:
    enum Value { APPLE, ORANGE, BANANA, NONE };
    static constexpr Value VALUES[4] = { APPLE, ORANGE, BANANA, NONE };
    //     ^^^^^^^^^
...
}; 
```

* * *

> cc1l4Xgi.o:test.cpp:(.text+0x1a): 未定义对“Fruit::VALUES”的引用

为了使链接器满意，您必须在源文件（而不是头文件）中的某处添加此行：

```
constexpr Fruit::Value Fruit::VALUES[4]; 
```

* * *

编辑：由于 c++17 我们有[内联变量](https://stackoverflow.com/questions/38043442/how-do-inline-variables-work)，并且每个 constexpr 变量都是内联的，所以在 C++17 中问题得到了解决。

# google-app-engine - Google App Engine 中的任务测试强制在 SDK 中同步任务执行还是等待所有任务执行？

> ID：13224236
> 
> 赞同：1
> 
> 时间：2012-11-04T23:53:25.250
> 
> 标签：google-app-engine

您知道如何强制 GAE SDK 同步执行任务以进行单元测试以检查任务结果吗？

您知道如何在单元测试中等待队列中的所有任务执行以检查任务结果吗？

任务的默认异步执行不允许简单的测试，因此不适合例如在使用任务队列更新后检查计数器。

考虑测试这样简单的代码（完成测试后检查结果）。

```
 payload = pickle.dumps(args, protocol = pickle.HIGHEST_PROTOCOL)
  task = taskqueue.Task(url = TASK_ADD_ORDER_REVIEW_COUNTER,
                        payload = payload)
  task.add(queue_name = COUNTERS_QUEQUE) 
```

可以跳过 task.add 并直接从 TASK_ADD_ORDER_REVIEW_COUNTER 调用代码，但这是非常丑陋的解决方法，我认为它应该更简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:55:36.920

我建议您将测试分为两部分：

1.  检查是否添加了任务
2.  检查处理任务的处理程序是否按预期工作

对于 1.，我会像这样使用 ext.testbed

```
from google.appengine.ext import testbed

def setUp():
  self.testbed = testbed.Testbed()
  self.testbed.activate()
  self.testbed.init_taskqueue_stub()

def test():
  [do whatever triggers tasks]
  stub = self.testbed.get_stub('taskqueue')
  tasks = stub.get_filtered_tasks() # see (taskqueue_stub.py for details[2])
  [verify tasks is what you expected] 
```

对于 2.，我会按照[处理程序测试文章](https://developers.google.com/appengine/docs/python/tools/handlertesting)向您的任务处理程序发送请求。毕竟，任务是作为普通的 POST 请求（编码为请求参数的参数）调用的。

[1](https://developers.google.com/appengine/docs/python/tools/handlertesting) [http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/taskqueue/taskqueue_stub.py#2453](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/api/taskqueue/taskqueue_stub.py#2453)

# java - 初始化数组时出现空指针异常

> ID：13224239
> 
> 赞同：2
> 
> 时间：2012-11-04T23:54:16.407
> 
> 标签：java

我正在编写一个程序，该程序可以输入需要安排的各种讲座请求。讲座有开始时间和结束时间。要求是安排最大数量的讲座。（算法是按结束时间安排它们并选择不重叠的讲座--贪婪策略）。为了做到这一点，我有一个“讲座”课程和一个“LectureScheduling”课程。我创建了一个输入数组（讲座）。然后我要求用户输入各种请求。但是，我收到错误“线程“主”java.lang.NullPointerException 中的异常”。请帮忙。谢谢你。PS：我在“input[i].time[0] = in.nextInt();”这一行有错误。确切的错误是：lecturescheduling.LectureScheduling 的线程“main”java.lang.NullPointerException 中的异常。

// 讲座课.. time[0] 是开始时间，time[1] 是讲座结束时间

```
 class lecture{
     int[] time= new int[2];

     lecture (int a, int b){
          time[0]=a;
          time[1]=b;        
     }
 } 
```

// LectureScheduling 类的一部分

```
public static void main(String[] args) {
    Scanner in = new Scanner(System.in);
    System.out.println("Input number of lectures ");
    int arraylength = in.nextInt();
    lecture [] input= new lecture[arraylength] ; 
    for (int i=0; i<arraylength; i++){
        System.out.println("Input start time of lecture "+ i);
        input[i].time[0] = in.nextInt();        
        System.out.println("Input end time of lecture "+ i);
        input[i].time[1] = in.nextInt();        
        System.out.println();
    }
    input=SortByStartTime(input);
    input=CreateSchedule(input);
    PrintSchedule(input);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-04T23:56:10.767

分配对象数组时，实际上只是分配引用，而不是对象本身（`lecture [] input= new lecture[arraylength] ;`不创建类型的对象`lecture`，不像 C++ 等值类型语言）。因此，当您访问：

```
input[i].time[0] = in.nextInt(); 
```

无需先创建`lecture`for的实例`input[i]`，您将获得 NPE。

要解决它，您需要在尝试访问它之前`new`对每个对象使用运算符（假设空构造函数可见并已定义）：`lecture`

```
input[i] = new lecture(); 
```

* * *

PS在java中有一个约定类型名称（例如`lecture`，它是一种类型） - 以大写字母开头。所以我建议重命名`lecture`为`Lecture`.

# c++ - 空闲内存在 GCC 构建上运行良好，但在 MSVC 上运行良好

> ID：13224247
> 
> 赞同：1
> 
> 时间：2012-11-04T23:54:47.887
> 
> 标签：c++, gcc, memory, visual-c++, free

我最近试图将我的 C++ 应用程序从 Mac (gcc) 迁移到 Windows (MSVC2010)。但是我的代码中有两行导致崩溃：

```
if (block != NULL)
    free(block); 
```

这两行在 Mac OS 上的 gcc 下工作得非常好，但在 Windows 上崩溃。如果我在 Visual Studio 中评论它们会导致内存泄漏。“块”被分配为：

```
uchar* block = (uchar*)malloc(_bytes_per_pixel * _width * _height);
memset(block, 0xff, _bytes_per_pixel * _width * _height); 
```

然后它从另一个库传递给一个 API 函数来填充它的值。

我想知道什么可能导致 free() 崩溃，以及为什么它只在 MSVC(Windows) 而不是 gcc(Mac OS) 下崩溃。我是 C++ 和 stackoverflow 的新手，所以如果有人能提供帮助，我将不胜感激。

# ruby-on-rails - 如何使用表单构建器为 Rails 中的表单助手添加属性？

> ID：13224248
> 
> 赞同：1
> 
> 时间：2012-11-04T23:54:53.310
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在 Rails 中构建一个表单构建器，为它添加一个`disabled`属性`text_field`和`select`助手。这是我的代码的简化版本：

```
class LabelFormBuilder < ActionView::Helpers::FormBuilder  
  %w[text_field select].each do |method_name|
    define_method(method_name) do |name, *args|
      super(name, :disabled => true, *args)
    end  
  end
end 
```

随着`text_fields`属性被正确添加，但`selects`事情变得有点棘手，我不断收到`undefined method merge for #<Array:0x10b5229a0>`错误。

这是我的视图代码（再次简化）：

```
<%= f.label :name %>
<%= f.text_field :name %>      # works!

<%= f.label :person %>
<%= f.select(:person_id, current_user.person_names, :prompt => 'Please select...') %>  # does not work! 
```

我怎样才能让我上面班级的第 4 行也能在`select`帮手上工作？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:40:02.453

`select`for**[在此处](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_options_helper.rb#L765)**使用以下方法签名`ActionView::Helpers::FormBuilder`定义

```
def select(method, choices, options = {}, html_options = {}) 
```

`text_field`for**[在此处](https://github.com/rails/rails/blob/master/actionpack/lib/action_view/helpers/form_helper.rb#L1204)***（动态）*`ActionView::Helpers::FormBuilder`定义，具有以下方法签名

 *```
def text_field(method, options = {}) 
```

这是一个问题；您的代码`{ disabled: true }`作为`choices`参数传递，这不是 Rails 所期望的。

我看到的另一个问题与我对您的意图的混淆有关

```
super(name, :disabled => true, *args) 
```

因为您`options`在重载方法中显式地进行`{ disabled: true }`，忽略从您的视图传入的任何选项。

我认为独立重载每个方法是最简单的。

```
class LabelFormBuilder < ActionView::Helpers::FormBuilder  
  def text_field(method, options={})
    options.reverse_merge! disabled: true
    super(method, options)
  end

  def select(method, choices, options = {}, html_options = {})
    html_options.reverse_merge! disabled: true
    super(method, choices, options = {}, html_options = {})
  end
end 
```

注意使用`reverse_merge!`. 这是一个 Rails 方法`Hash`，允许您为散列项提供默认值*（例如上面所做的默认选项）*。这允许将其他选项传递给您正在重载的方法，同时提供合理的默认值，`:disabled`但仍允许根据具体情况对其进行覆盖*（您将直接传递`disabled: false`给`select`or`text_field`调用）*。

这是未经测试的，但应该让你接近你所追求的。*

# javascript - 如何为数组数组制作 Javascript 输出括号。（对于Highcharts）

> ID：13224250
> 
> 赞同：1
> 
> 时间：2012-11-04T23:54:59.597
> 
> 标签：javascript, arrays, highcharts

嗨，我正在使用 highcharts，我正在尝试动态创建一个数组数组以提供给图表。

我想出了如何制作数组的数组，但输出格式不是 highcharts 想要提供的。

我正在尝试动态生成一个数组，输出将是：

[[10, 3500], [11, 3400], [12, 3300], [13, 3200], [14, 3100], [15, 3000], [16, 2900], [17, 2800], [ 18, 2700], [19, 2600], [20, 2500]]

但我得到的是：

10,3500,11,3400,12,3300,13,3200,14,3100,15,3000,16,2900,17,2800,18,2700,19,2600,20,2500

如何让 Javascript 输出括号以使格式正确？

```
<html>
<head>

  Max Price: <input id="max_price_input" type="number" value=3500><br>
  Min Price: <input id="min_price_input" type="number" value=2500><br>
  Max People: <input id="max_people_input" type="number" value=20><br>
  Min People: <input id="min_people_input" type="number" value=10><br>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script>

chart = void 0;

$(document).ready(function() {
    var max_price, min_price, max_people, min_people, chart;
    max_price=document.getElementById("max_price_input").value;
    min_price=document.getElementById("min_price_input").value;
    max_people=document.getElementById("max_people_input").value;
    min_people=document.getElementById("min_people_input").value;

    var price_change = max_price - min_price;
    var steps = max_people - min_people;
    var price_step = price_change*1.0/steps;
    var price = max_price;
    var people = 10;
    var priceArray = [];

        for (var i=0;i<=steps;i++)
    { 
        priceArray[i] = [];
                priceArray[i][0] = [people, price];
        price-=price_step;
        people+=1
    }

document.getElementById("price_steps").innerHTML=priceArray

  return chart = new Highcharts.Chart({

    chart: {
      renderTo: "chart",
      type: "spline"
    },
    title: {
      text: "Dynamic Price Chart"
    },
    xAxis: {
      title: {
        text: "People"
      }
    },
    yAxis: {
      plotLines: [
        {
          color: "#FF0000",
          width: 2,
          value: 0
        }
      ],
      title: {
        text: "Price"
      }
    },
    tooltip: {
      formatter: function() {
        return "People: " + this.x + "<br/> Price: " + this.y;
      }
    },
    series: [
      {
        name: "Price",
        data: priceArray
      }
    ]
  });
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T23:59:30.070

您错误地创建了数组：

```
// [[[1, 2]]]
var arr = [];
arr[0] = [];
arr[0][0] = [1, 2]; 
```

相反，你想要：

```
for (var i = 0; i <= steps; i++) {
    priceArray[i] = [people, price];
    price -= price_step;
    people += 1
} 
```

您的代码中还有一些其他问题，例如：

您的 html 元素应该进入正文。

这不会显示实际值：

```
document.getElementById("price_steps").innerHTML=priceArray 
```

相反，请尝试：

```
JSON.stringify(priceArray); 
```

# javascript - jQuery Supersized：更改拇指库鼠标悬停

> ID：13224253
> 
> 赞同：1
> 
> 时间：2012-11-04T23:55:50.430
> 
> 标签：javascript, jquery, thumbnails, supersized

我正在使用[jQuery Supersized 插件](http://www.buildinternet.com/project/supersized/)。

我想要实现的是用[这个效果](http://demo.superdit.com/jquery/zoom_hover/)`mouseover`改变拇指画廊的效果。`ul#thumb-list`

有一个清晰的想法去[我的网站](http://www.malvasiaoggianu.it)；单击`vino > vigna`并单击相机图标：

有人帮我吗？

提前致谢，K.

# ruby - 坚持 LearnStreet Ruby 培训。简单的 Ruby 代码

> ID：13224256
> 
> 赞同：5
> 
> 时间：2012-11-04T23:55:59.353
> 
> 标签：ruby

尝试使用新的 LearnStreet 在线教程学习 Ruby。

试图通过他们的问答系统获得帮助，但似乎没有人回答他们。

> “现在可以在 account 对象上实现withdraw! 方法，它接受一个参数amount 并将余额减少指定的金额吗？定义方法后，继续从账户中提取100 美元并检查余额。”

是问题，我得到了两个提示

> " 提示 1 代码 @balance = @balance - amount 减少 @balance 的金额。
> 
> 提示 2 然后调用方法撤消！在帐户对象上 - account.withdraw!(100)。"

我的尝试是

```
def

account.widthdraw!

@balance = @balance - amount

end

account.withdraw!(100) 
```

有什么我想念的想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:13:53.777

> “现在可以在 account 对象上实现withdraw! 方法，它接受一个参数amount 并将余额减少指定的金额吗？定义方法后，继续从账户中提取100 美元并检查余额。”

一步一步来：

*   “你现在可以在账户对象上实现withdraw！方法吗？

    ```
    class Account
      def withdraw!
      end
    end 
    ```

*   它需要一个参数量...

    ```
    class Account
      def withdraw!(amount)
      end
    end 
    ```

*   并将余额减少指定金额？

    ```
    class Account
      def withdraw!(amount)
        @balance = @balance - amount
      end
    end 
    ```

*   确定方法后，继续从账户中提取 100 美元并检查余额。”

    ```
    account = Account.new
    account.withdraw!(100) 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-04T23:57:42.847

我想你会想要这样的东西。

```
class Account

    def withdraw! amount
         @balance -= amount
    end

end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-28T13:37:43.773

这是这个问题的答案：

```
def account.withdraw!(amount)
    @balance = @balance - amount
end
account.withdraw!(100) 
```

# lua - Corona SDK 分割镜像

> ID：13224257
> 
> 赞同：0
> 
> 时间：2012-11-04T23:55:59.900
> 
> 标签：lua, coronasdk

有什么方法可以使用 Corona SDK 分割图像。例如，我有一个 100 x 100 像素的图像。我需要从这张图片中创建 4 张 50 x 50 像素的图片。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:07:04.813

是的……有。

但我猜你是在问怎么做。

在这种情况下，您需要使用 display.captureBounds()

从手册中复制并粘贴示例以获得全屏图像的右下角。

```
-- Set up a bounds table for capturing the bottom-right quadrant of the screen.
local screenBounds =
{
    xMin = display.contentWidth / 2,
    xMax = display.contentWidth,
    yMin = display.contentHeight / 2,
    yMax = display.contentHeight,
}

-- Capture the bounds of the screen.
local myCaptureImage = display.captureBounds(screenBounds) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T04:52:19.693

如果您使用原始图像（比如说 100x100）作为 50x50 的精灵的 spritesheet，它会将图像“分割”成 4 个精灵，您以后可以使用这些精灵来显示图像的这些部分。

见[http://developer.coronalabs.com/reference/index/spritenewspritesheet](http://developer.coronalabs.com/reference/index/spritenewspritesheet)

# google-chrome-extension - 在site1的动态iframe中修改site2的内容

> ID：13224260
> 
> 赞同：0
> 
> 时间：2012-11-04T23:56:12.163
> 
> 标签：google-chrome-extension

网站结构：

```
Site1
-dynamic iframe (using document.write)
--iframe src="site2" 
```

我想用我的 chrome 扩展更改 site2 的内容。

使用从 site1 遍历 iframe 的内容脚本将不起作用。一旦它到达 site2 chrome 就会对安全性进行肛门处理，并且无法通过清单设置进行例外处理。清单文件：

```
"content_scripts": [
    {
        "matches": ["http://site1/*"],
        "js": ["script.js"],
    }
],
"permissions": [
    "tabs"
], 
```

所以我试图让脚本直接在site2上运行（清单文件）：

```
"content_scripts": [
    {
        "matches": ["http://site2/*"],
        "js": ["script.js"],
    }
],
"permissions": [
    "tabs"
], 
```

它没有用。当 site2 在另一个站点的 iframe 中时，它似乎不起作用。

这是我使用的测试脚本：

```
function check_player() {
    //var player = document.getElementById("player");
    var player = self.document.getElementById("player");
    if (player) {
        console.log(player);
    } else {
        setTimeout("check_player()", 100);
    }
}
check_player(); 
```

那我该怎么办？你有什么建议吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T09:43:17.803

您需要为清单上的内容脚本指定 all_frames: true 。这样，它将在具有匹配 url 的所有 iframe 中运行您的脚本。请参阅[http://developer.chrome.com/extensions/content_scripts.html](http://developer.chrome.com/extensions/content_scripts.html)

# android - 在模拟器上运行时，拍照并按检查以使用拍摄的照片后，它什么也不做..[Android]

> ID：13224261
> 
> 赞同：1
> 
> 时间：2012-11-04T23:56:15.433
> 
> 标签：android, android-emulator, android-camera

```
public class FulfillPhotoTaskActivity extends Activity implements OnClickListener {

ImageView iv;
Uri outputFileUri;
Button takePhoto;
Button uploadPhoto;
Bitmap bmp;
Intent cameraIntent;
File file;
final static int cameraData = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_fulfill_photo_task);
    initialize();

}
private void initialize() {
    iv = (ImageView) findViewById(R.id.imageView1);
    takePhoto = (Button) findViewById(R.id.takePhoto);
    takePhoto.setOnClickListener(this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_fulfill_photo_task, menu);
    return true;
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/tmp");
    String folder = root.toString(); 
    file = new File(folder, "fileName" + ".jpg");
    Uri outputFileUri = Uri.fromFile(file);

    cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

    startActivityForResult(cameraIntent, cameraData);
}

protected void onActivityResult(int requestCode, int resultCode, Intent data){
    super.onActivityResult(requestCode, resultCode, data);
    if(requestCode == RESULT_OK)
    {
        Bundle extras = data.getExtras();
        bmp = (Bitmap) extras.get("data");
        iv.setImageBitmap(bmp);

    }
}

} 
```

当我在模拟器上运行这个程序时，在拍照并按下检查以使用拍摄的照片后，它什么也没做 - 它不会转到`ImageView`.

这段代码有错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:00:54.853

Android 模拟器充满了数不胜数的错误。这听起来很简单，但你在实际设备上试过吗？我在模拟器上有很多不好的juju，在进入设备后就消失了。

# oauth - 在自己的移动应用程序中进行身份验证

> ID：13224264
> 
> 赞同：1
> 
> 时间：2012-11-04T23:57:04.063
> 
> 标签：oauth, basic-authentication, mobile-application

*即将打开具有 OAuth 访问权限的公共 api，没问题。主站点使用 api，但使用基本身份验证（受限于我们的内部 ip 范围）*

**下一步是计划一个移动应用程序，但应该如何处理那里的身份验证？**

第一个想法是为我们的 appid 创建一个特殊的登录屏幕，使其看起来像身份验证（而不是授权），但对我们的 appid 进行逆向工程并不难。

（例如）facebook 如何在 facebook iphone 应用程序中处理登录？外观说他们正在使用身份验证，但如果是这样，他们如何阻止其他人使用它？

建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:03:36.220

我想您会在本文档和特定段落中找到答案： [https ://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-threatmodel-07#section-5.2.3.4](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-threatmodel-07#section-5.2.3.4)

# c# - WebRequest.GetResponse 等待完成

> ID：13224265
> 
> 赞同：1
> 
> 时间：2012-11-04T23:57:09.330
> 
> 标签：c#, asp.net, openstreetmap

我正在用 C# 编写一个 ASP.NET 服务器，它需要从外部服务器获取一堆图像。我遇到的问题是图像是从我的方法返回的，但看起来它们只加载了一半。

这是通过我的服务器加载磁贴时的样子（它是 OSM 循环地图磁贴）：

![瓷砖.png](../Images/b6a022efab0df3e627a21cc63bb4241a.png)

如果我只是在浏览器中打开它（当然来自同一个 URL），这就是它的样子：

![5.png](../Images/92e77d6d951b7d061495f69916c9ac4a.png)

我很清楚所有字节都没有通过网络传输，但我不确定它们在哪里丢失。这就是我的代码的样子：

```
private byte[] GetTile(string url)
{
    var response = WebRequest.Create(url).GetResponse();

    Stream respStr = response.GetResponseStream();

    byte[] buf = new byte[response.ContentLength];
    respStr.Read(buf, 0, buf.Length);

    return buf;
} 
```

这也不是正确的方法。我的字节去哪儿了？在我从函数返回之前，是否有推荐的方法来等待来自服务器的所有字节到达？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:06:53.920

`respStr.Read(buf, 0, buf.Length);`Read 不保证它会读取`buf.Length`字节。你应该检查它的返回值。或者简单地说，您可以使用将其复制到另一个流`CopyTo`

```
private byte[] GetTile(string url)
{
    var response = WebRequest.Create(url).GetResponse();

    Stream respStr = response.GetResponseStream();

    MemoryStream m = new MemoryStream();
    respStr.CopyTo(m);

    return m.ToArray();
} 
```

您也可以为此使用[WebClient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)

```
private byte[] GetTile(string url)
{
    using (WebClient wc = new WebClient())
    {
        return wc.DownloadData(url);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:02:15.187

我只是在模仿 Jon Skeet 的回答，因为它直接适用于您的问题。[从流中创建字节数组](https://stackoverflow.com/questions/221925/creating-a-byte-array-from-a-stream)

也许如果有人搜索类似的关键字，这个答案可以为他们指明正确的方向。你不是第一个也绝对不会是最后一个遇到这个问题的人。

该`Stream.Read()`方法不保证将在 Stream 中读取所有字节，这在引用网络流时尤其明显。您需要确保检查返回值以绝对确定整个流已被消耗：

```
public static byte[] ReadFully(Stream input)
{
    byte[] buffer = new byte[16*1024];
    using (MemoryStream ms = new MemoryStream())
    {
        int read;
        while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            ms.Write(buffer, 0, read);
        }
        return ms.ToArray();
    }
} 
```

# html - 使用 Modernizr 检测拖放

> ID：13224266
> 
> 赞同：0
> 
> 时间：2012-11-04T23:57:09.040
> 
> 标签：html

我有一个网站部分依赖于 HTML5 中的拖放。我希望该网站在主页上提醒用户他们的浏览器是否支持它，我曾尝试使用 Modernizr 但没有成功。

我已经使用modernizr 站点创建了一个自定义文件（此实例中包含的文件选择了所有HTML5 选项），但它什么也没做。我尝试过创建几个，但没有任何乐趣。

```
 <!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
<script src="js/modernizr.custom.75231.js"></script>
<script>

   if(Modernizr.draganddrop){
      alert("Your browser supports drag and drop!!");
   }else{
      alert("Sorry, browser does not support drag and drop!");
   }

</script>

</head>

<body>
Some text
</body>
</html> 
```

我错过了什么吗？

谢谢

只是为了更新，我再次创建了modernizr文件以包含所有CSS选项，现在它检测到每个浏览器，包括IE 7作为拖放兼容

```
js/modernizr.custom.18141.js 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:21:59.327

我变了

```
if(Modernizr.draganddrop) 
```

至

```
if (window.FileReader && Modernizr.draganddrop) 
```

然后它工作正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T17:31:49.377

它有点棘手。iOS7 报告它同时支持 FileReader 和拖放图片上传。由于我正在寻找一个更通用的文件上传，这是我无法用 iOS 完成的，所以我需要另一个答案。

Modernizr 第 57 期在[这里](https://github.com/Modernizr/Modernizr/issues/57)讨论了这个问题。现在有了 Windows 8 和触摸和鼠标，它很棘手。chriskeeble 中间有我成功使用的代码。它依赖于 Modernizr 和代理检测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-25T07:41:03.667

**Modernizr在****Windows-Safari v5.1.7**中返回了拖放的误报（最新版本——现在正在寻找最终版本！）。这并不奇怪，因为（我被告知）以前的版本（v5.0.x）具有功能拖放基础设施（Modernizr 检测到）。Modernizr 不会轻易发现事件失火错误（这表明正确的检测方案可能需要包含一些 url 数据库查询）。

> 注意：Safari v5.1.7 不会触发 ondrop 事件（相反，它往往会误触发错误的 ondragleave 事件，这几乎肯定会破坏解决此错误的任何代码可赎回努力。如果您使用 jquery 修复一个浏览器的一个版本，你还不如放弃 javascript 没有它。

我曾希望（完全没有希望）**Modernizr**检测*可能会*带来一些聪明的补救措施，但是随着苹果从 Windows Safari 中撤出支持（错误，恕我直言），我想知道为什么目前的基础设施迫使开发人员支持有缺陷的产品；适当的补救措施是完全召回版本，开发人员的责任是在用户使用具有已知缺陷的浏览器版本时提醒用户——即使是每个浏览器（注意：每个浏览器的每个版本都应该证明有缺陷，要求更好的规格）。

# javascript - Javascript 触控属性

> ID：13224267
> 
> 赞同：1
> 
> 时间：2012-11-04T23:57:12.420
> 
> 标签：javascript, android, ios, touch

我正在编写一个应该在 PC 浏览器和移动设备浏览器上运行的应用程序，无论是手机还是平板电脑。我在要执行操作的页面上使用 9 个画布元素，但事情是这样的：

我用于画布的库允许我使用和读取一个名为“layer”（layerX 和 layerY）的属性，以便每个“canvas”元素位于不同的图层上（尽管我没有明确告诉它是新层，一切正常）。

但是当我在移动设备上进行测试时，根据[这篇](http://www.sitepen.com/blog/2011/12/07/touching-and-gesturing-on-iphone-android-and-more/)文章，触摸设备没有这个属性，这导致应用程序无法按预期工作，即触摸没有任何反应，触摸参数为空。

所以现在我遇到了一个问题，我要么使用'client'属性，但我只能对第一个绘制的画布元素执行操作，或者如果我让它使用'layer'则什么都没有发生。

我怎样才能解决这个问题？我不应该能够使用“图层”属性，因为画布库允许我拥有该属性吗？或者要使用它，我应该明确声明每个画布元素都是一个新层？

此致，

# c - 单核上的 OpenMP

> ID：13224269
> 
> 赞同：2
> 
> 时间：2012-11-04T23:57:38.493
> 
> 标签：c, performance, openmp, cpu-usage

我可以在具有单核 cpu 的机器上使用 OpenMP 吗？性能会有一些提升吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T23:05:03.883

是的你可以。您可以使用 OpenMP 指令对代码进行注释，并且仍然按顺序运行应用程序。为此，您必须在没有 OpenMP 标志 ( `e.g.,` `-fopenmp`) 的情况下编译和运行应用程序。

您可以在单核上使用 OpenMP，并且仍然可以通过例如在具有超线程的单核 CPU 中运行多线程程序来提高性能。

有一些内存绑定算法可以利用超线程，因为在执行期间，一些线程仍将等待获取内存，而其他线程将进行计算。在极少数情况下，超线程的收益可能来自分支预测的改进。

然而，由于 OpenMP 指令固有的开销，大多数情况下，即使使用单线程，使用单核 OpenMP 也会减慢应用程序的速度。此外，线程也在“争夺”相同的资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T18:12:59.683

您可能会在程序同时具有 I/O 绑定和 CPU 绑定部分的情况下获得优势……如果线程“1”是 I/O 绑定的，那么线程“2”可以执行其 CPU 绑定的事情。如果这会变得更加明显该程序的部分执行在 I/O 上非常繁重

# bit-manipulation - 按位运算的有符号和无符号之间的区别

> ID：13224273
> 
> 赞同：2
> 
> 时间：2012-11-04T23:57:53.563
> 
> 标签：bit-manipulation, bitwise-operators, unsigned, signed

按位运算的有符号变量和无符号变量之间有什么区别吗？
例如，在处理无符号数时：
`AND 00000111, 00001101`
将产生 00000101。

但是在处理带符号的数字时会发生什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T09:34:45.040

假设 2 的补码用于有符号数，关心有符号性的操作（即它们对于位串的有符号和无符号解释是不同的）是：

*   分配
*   模数
*   右移
*   比较（相等除外）
*   双倍宽度乘法（在程序集之外很少见）

与签名无关的操作是：

*   添加
*   减法
*   否定（`-x`意思`~x + 1`）
*   按位和
*   按位或
*   按位异或
*   按位不（`~x`表示`-x - 1`）
*   左移
*   乘法
*   比较（仅相等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T23:59:12.917

无符号和有符号数字是对位串的解释。`AND`操作员没有这个概念，而是在单个位上工作。结果无论如何都是一样的。

# facebook - 创建移动“智能重定向”

> ID：13224286
> 
> 赞同：1
> 
> 时间：2012-11-04T23:59:51.420
> 
> 标签：facebook, mobile

我们创建 Facebook 应用程序（标签），但问题是这些标签在移动设备上或 Facebook iOS 应用程序内不起作用。ShortStack 和 WildFire 等公司最近开始使用“智能 URL”，以允许他们的 Facebook 应用程序在移动设备上运行——我想对我的应用程序做类似的事情。

我想创建一个可以在 Facebook 上发布的 URL，例如“ExampleURL.com/Facebook-Contest/”。如果有人在全尺寸浏览器中访问该 URL，我希望它将他们定向到 Facebook 选项卡。但是，如果他们从移动设备或应用程序中访问该链接，我希望它重定向到我将在我自己的服务器（Facebook 之外）上托管的移动 HTML 版本的比赛。这与 WildFire 和 ShortStack 完成这些“智能 URL”的方式相同。

我没有创建重定向的经验，所以我希望有人可以为我指出如何使这成为可能的正确方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:14:40.410

我找到了一个生成这些类型 URL 的服务——在 Facebook 上运行完美。

[http://smarturl.it](http://smarturl.it)

# java - 异常Junit 4.10后的Mockito验证

> ID：13224288
> 
> 赞同：77
> 
> 时间：2012-11-05T00:00:02.450
> 
> 标签：java, junit, mockito, junit-rule

我正在测试一个带有预期异常的方法。我还需要验证在抛出异常后（在模拟对象上）调用了一些清理代码，但看起来验证被忽略了。这是代码。我正在使用 Junit`ExpectedException` `Rule`来验证预期的异常。

```
@Rule
public ExpectedException expectedEx = ExpectedException.none();

@Test
public void testExpectedException()
{
   MockedObject mockObj = mock(MockedObj.class);
   MySubject subject = new MySubject(mockedObj);
   expectedEx.expect(MyException.class);
   expectedEx.expectMessage("My exception message.");
   subject.someMethodThrowingException();
   verify(mockObj).
       someCleanup(eq(...));
} 
```

似乎`verify`完全被忽略了。无论我放入什么方法`verify`，我的测试都通过了，这不是我想要的。

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-11-05T00:48:56.403

`ExpectedException`通过[JUnit @Rule](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/TestRule.java)[将整个测试方法包装](https://github.com/junit-team/junit/blob/master/src/main/java/org/junit/rules/ExpectedException.java#L239)在 try-catch 块中。当您的代码抛出异常时，它会向上堆栈到最近的 try/catch，这恰好位于 ExpectedException 实例中（它会检查它是否是您期望的异常）。

在 Java 中，如果方法中发生未捕获的异常，则控制权将永远不会返回到该方法稍后的语句。相同的规则在这里适用：**在异常发生后，控制永远不会返回到测试中的语句。**

从技术上讲，您可以将验证放在 finally 块中，但这往往是[一个坏习惯](http://today.java.net/article/2006/04/04/exception-handling-antipatterns#throwFromWithinFinally)。**编辑：**您的被测系统可能会抛出意外异常，或者根本没有异常，这将为您提供有用的失败消息和跟踪；但是，如果该失败导致您的验证或断言在`finally`块中失败，那么 Java 将显示该错误，而不是有关意外异常或意外成功的消息。这会使调试变得困难，特别是因为您的错误将来自错误根本原因之后的代码行，错误地暗示上面的代码成功了。

如果你真的需要在异常发生后验证状态，基于每个方法，你总是可以恢复到这个习惯用法：

```
@Test
public void testExpectedException()
{
  MockedObject mockObj = mock(MockedObj.class);
  MySubject subject = new MySubject(mockedObj);
  try {
    subject.someMethodThrowingException();
    fail("Expected MyException.");
  } catch (MyException expected) {
    assertEquals("My exception message.", expected.getMessage());
  }
  verify(mockObj).someCleanup(eq(...));
} 
```

*更新：使用 Java 8 的 lambda 表达式，您可以在 try 块中*[简洁地](http://blog.jooq.org/2014/05/23/java-8-friday-better-exceptions/)包装函数式接口调用，以使其有用。我想对这种语法的支持将进入许多标准测试库。

```
assertThrows(MyException.class,
    () -> systemUnderTest.throwingMethod()); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2019-05-01T16:24:37.013

一旦在 UT 中抛出异常，下面的所有代码都将被忽略。

```
@Test(expected = Exception.class)
public void testExpectedException() {
   MockedObject mockObj = mock(MockedObj.class);
   MySubject subject = new MySubject(mockedObj);
   subject.doSomething(); // If this line results in an exception then all the code below this will be ignored.
   subject.someMethodThrowingException();
   verify(mockObj).
       someCleanup(eq(...));
} 
```

为了解决这个问题并验证所有调用，我们可以使用**try**和**finally**。

```
@Test(expected = Exception.class)
    public void testExpectedException() {
          MockedObject mockObj = mock(MockedObj.class);
          MySubject subject = new MySubject(mockedObj);
          try {
               subject.someMethodThrowingException(); 
          } finally {
             verify(mockObj).
             someCleanup(eq(...));
          }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-21T21:45:52.563

[带有捕获异常的](https://code.google.com/p/catch-exception/)更优雅的解决方案

```
@Test
public void testExpectedException()
{
    MockedObject mockObj = mock(MockedObject.class);
    MySubject subject = new MySubject(mockObj);

    when(subject).someMethodThrowingException();

    then(caughtException())
            .isInstanceOf(MyException.class)
            .hasMessage("My exception message.");

    verify(mockObj).someCleanup(eq(...));
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-05T02:59:29.550

我还没有尝试过，但是除了 Jeff Bowman 的出色回答之外，您可能还可以选择使用带有 try...finally 构造的 ExpectedException 规则，将您的验证语句放在 finally 块中。

# c# - 如何将 Line-In Live Recording 和正在播放的声音文件混合到 Skype 输入流中？

> ID：13224291
> 
> 赞同：1
> 
> 时间：2012-11-05T00:00:14.027
> 
> 标签：c#, naudio

所以我查看了[http://channel9.msdn.com/coding4fun/articles/Skype-Voice-Changer](http://channel9.msdn.com/coding4fun/articles/Skype-Voice-Changer)。我开始阅读拦截 Skype 音频。

我的理解是，最重要的部分是

```
void OnMicServerExecute(object sender, DataReceivedEventArgs args)
{
  toolStripStatusLabel1.Text = "Got " + args.Buffer.Length + " bytes";
  if (outStream != null)
  {
    // give the input audio to the beginning of our audio graph
    bufferStream.SetLatestInBuffer(args.Buffer);
    // process it out through the effects
    outputStream.Read(args.Buffer, 0, args.Buffer.Length);
    // play it back
    outStream.Write(args.Buffer, 0, args.Buffer.Length);
  }
} 
```

因此，您设置了一个 TCPServer，您可以将 mic-data 从 Skype 流式传输到。然后用修改后的数据替换流并将其提供给 outStream，它再次被传递到另一端。所以 outputStream 必须以某种方式包含我的内容。这就是问题所在。我的麦克风与 LINE-IN 连接。我希望将 LINE-IN 流与我当前正在播放的声音文件混合使用

```
void abspielen(string Dateiname, float ZielAmplitude)
{
  Klangwiedergabegeraet = new WaveOutEvent();
  Klangwiedergabegeraet.DeviceNumber = cbAusgabegeraete.SelectedIndex;
  timer1.Enabled = true;
  ISampleProvider StueckchenHalter = null;
  try
  {
    StueckchenHalter = CreateInputStreamS(Dateiname,ZielAmplitude);
  }
  catch (Exception createException)
  {
    MessageBox.Show(String.Format("{0}", createException.Message), "Error Loading File");
      return;
  }
  try
  {
    Klangwiedergabegeraet.Init(new SampleToWaveProvider(StueckchenHalter));
  }
  catch (Exception initException)
  {
    MessageBox.Show(String.Format("{0}", initException.Message), "Error Initializing Output");
      return;
  }
  Klangwiedergabegeraet.Play();
} 
```

并转发到 Skype。

我在将头绕在混音器上时遇到问题，无法从 e.buffer 交付的东西中使用

```
void waveInStream_DataAvailable(object sender, WaveInEventArgs e) 
```

并流式传输。当服务器启动并且我没有使用混音器但波流开始播放时，音量降低并且速度增加。当我听到 Skype 播放时，它反而变慢了。

请给我一条完成此任务的路线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T10:54:18.767

您需要使用`BufferedWaveProvider`. 当您从 接收数据时`WaveIn`，将接收到的数据放入`BufferedWaveProvider`. 然后，您可以将其与 Skype 的输入混合，或完全替换它。

# matlab - Matlab中带有ode45的二阶差分方程

> ID：13224292
> 
> 赞同：0
> 
> 时间：2012-11-05T00:00:26.990
> 
> 标签：matlab, ode

所以我需要求解 x''(t) = -x(t)^p 初始条件 x(0)= 0 和 v(0) = x'(0) = v_o = 1。参数 p 的值是 1。

这就是我所拥有的：

```
function [t, velocity, x] = ode_oscilation(p)

y=[0;0;0];
    % transform system to the canonical form

    function y = oscilation_equation(x,p)
        y=zeros(2,1);
        y(1)=y(2);
        y(2)=-(x)^p;
        %  to make matlab happy we need to return a column vector
        % so we transpose (note the dot in .')
        y=y.'; 
    end

    tspan=[0, 30]; % time interval of interest

    [t,velocity,x] = ode45(@oscilation_equation, tspan, 1); 

    t = y(:,1);
    xposition=y(:,3);
    velocity=y(:,2); 

end 
```

这是我收到的错误消息：

> > ode_oscillation(1) 使用 odearguments 时出错（第 91 行） ODE_OSCILLATION/OSCILATION_EQUATION 必须返回列向量。

ode45 错误（第 114 行）[neq, tspan, ntspan, next, t0, tfinal, tdir, y0, f0, odeArgs, odeFcn, ...

ode_oscillation 错误（第 17 行）[t,velocity,x] = ode45(@oscilation_equation, tspan,1);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:33:27.627

这里有一些问题。首先，来自`help ode45`：

> ode45 求解非刚性微分方程，中阶方法。
> 
> ```
> [TOUT,YOUT] = ode45(ODEFUN,TSPAN,Y0) with TSPAN = [T0 TFINAL] integrates 
> the system of differential equations y' = f(t,y) from time T0 to TFINAL 
> with initial conditions Y0\. 
> ```

请注意，`ode45`需要一个函数`f(t,y)`，其中`size(t) == [1 1]`用于时间和`size(y) == [1 N]`或`[N 1]`用于解决方案值。您`oscilation_equation`将输入参数的顺序反转，并且输入一个常量参数`p`而不是 time `t`。

此外，初始条件`Y0`的大小应与`y`; 所以`size(y0) == [N 1]`或`[1 N]`。你只是有`1`，这显然会导致错误。

此外，您的输出参数`t`,`xposition`和`velocity`将被完全忽略和错误，因为`y`未**设置为**来自的输出参数`ode45`，最重要的是，它们的名称与 的输出参数不对应`ode_oscilation`。此外，它们从列中提取的顺序`y`不正确。

因此，总而言之，将所有内容更改为：

```
function [t, v, x] = ode_oscilation(p)

    % initial values
    y0 = [0 1];           

    % time interval of interest
    tspan =[0 30]; 

    % solve system 
    [t,y] = ode45(@(t,y) [y(2); -y(1)^p], tspan, y0);

    % and return values of interest
    x = y(:,1);
    v = y(:,2);

end 
```

# linux - 从 Vim 在另一个 shell 中执行命令

> ID：13224301
> 
> 赞同：4
> 
> 时间：2012-11-05T00:01:42.860
> 
> 标签：linux, vim

我在开发工作流程中使用了两台显示器，一台是用于编辑的全屏 vim 会话，另一台是我运行`make && ./test`以显示结果的全屏终端。我经常发现自己在后台打开了一堆其他窗口（浏览器、更多 shell 等）。我不喜欢这个有几个原因：

*   我不喜欢在得到我的制作窗口之前记住我必须点击多少次标签。
*   在 Ubuntu 中，当前焦点所在的窗口没有强烈的视觉反馈。我可能可以对此做点什么，但这是一个单独的问题。
*   老实说，我很懒惰，而且`:w alt-tab up-arrow enter alt-tab`击键次数太多了。

我认为一个好的解决方案可能是`make && ./test`在另一个窗口中运行一个 vim 命令，但我想不出如何做到这一点。我可以编写一个服务器/客户端脚本，等待来自 vim 的一些通知，然后运行命令，但看起来应该有一个更简单的解决方案。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:20:01.970

感谢[吉姆的评论](https://stackoverflow.com/questions/13224301/perform-a-command-in-another-shell-from-vim#comment18012017_13224301)让我开始。这就是我现在正在做的事情：

在第一个监视器上：（`tmux new-session -s dev`创建一个名为 dev 的新 tmux 会话）

在第二台显示器上：（`tmux new -t dev`连接到该新会话）

在第二台显示器上：（`Ctrl-b + c`创建一个新窗口）

我[分叉了 vimux](https://github.com/alexlegg/vimux)并编写了将命令发送到另一个窗口的函数。所以现在在 vim 中我可以使用`:call VimuxRunCommandWin("make && ./test")`.

而且我认为这可能足以拖延一天......

# php - 有人遇到强制 PHP SimpleXMLElement 节点名称为大写的方法吗？

> ID：13224303
> 
> 赞同：4
> 
> 时间：2012-11-05T00:02:08.880
> 
> 标签：php, simplexml, xmlnode, addchild

API 集成文档指定所有节点名称都区分大小写。我正在使用 PHP SimpleXMLElement，但看不到强制大写节点名称的方法。有人遇到过强制节点名称为大写的方法吗？

```
 $xmlstr = '<Request>'.
        '</Request>';

$sxe = new SimpleXMLElement($xmlstr);
$authentication = $sxe->addChild('Authentication');
$authentication->addChild('Version', '2.0');
$processid = $sxe->addChild('Process ID=importSale');
$importsale = $processid->addChild('importSale');
$importsale->addChild('SCRIPTCODE', '<![CDATA[SCRIPT001]]>');
$importsale->addChild('PRODID','<!CDATA[DNTMAN]]>');
echo $sxe->asXML(); 
```

在“查看源代码”中查看时，“SCRIPTCODE”和“PRODID”都是小写的。如何强制这些为大写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T02:19:42.263

从理论上讲，您提供的代码已经完成了这项工作！默认情况下，添加到 simpleXMLElement 的所有子项都将保留其原始大小写！

```
$sxe = new SimpleXMLElement('<Request></Request>');
$authentication = $sxe->addChild('Authentication');
$authentication->addChild('Version', '2.0');
$processid = $sxe->addChild('Process ID=importSale');
$importsale = $processid->addChild('importSale');
$importsale->addChild('SCRIPTCODE', '<![CDATA[SCRIPT001]]>');
$importsale->addChild('PRODID','<!CDATA[DNTMAN]]>');
echo $sxe->asXML(); 
```

你得到执行代码是这样的：

```
<Request>
    <Authentication>
        <Version>2.0</Version>
    </Authentication>
    <Process>
        <Process ID=importSale>
            <SCRIPTCODE><![CDATA[SCRIPT001]]></SCRIPTCODE>
            <PRODID><!CDATA[DNTMAN]]></PRODID>
        </importSale>
    </Process>
</Request> 
```

`SCRIPTCODE`并且`PRODID`都保持大写！

注意：这不是将 cdata 添加到节点值的正确方法......这将导致 html-entity 转换，如`&lt;!CDATA[]]&gt;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-05-04T22:51:57.967

不要查看源代码，而是尝试将输出回显到屏幕：

```
echo htmlentities($sxe->asXML()); 
```

# objective-c - getter ios Objective c的递归问题

> ID：13224315
> 
> 赞同：2
> 
> 时间：2012-11-05T00:03:16.433
> 
> 标签：objective-c, ios

我有这个属性：

```
@property (nonatomic, getter = getSolutionsCount, setter = setSolutionsCount:) NSInteger solutionsCount; 
```

和实施

```
- (NSInteger)getSolutionsCount {
    return self.solutionsCount;
} 
```

我在这个方法上得到了 EXC_BAD_ACCESS `- (NSInteger)getSolutionsCount`。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:06:58.523

该行`self.solutionsCount`被翻译为`[self getSolutionCount]`. 您正在进行递归调用。

如果您只是想返回合成的 ivar，那么甚至不要实现此方法。但如果你这样做，那么只需调用`return _solutionCount;`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T00:08:03.710

点语法基本上是调用 getter 的快捷方式。您的 getter 方法中有无限递归。

您需要做的是直接返回实例变量：

```
- (NSInteger)getSolutionsCount {
    //latest xcode makes variables with _property name automatically
    return _solutionsCount;

    //older versions of xcode or having written @synthesize solutionsCount
    //will necessitate
    //return solutionsCount;
} 
```

仅供参考，objective-c 约定是将 getter 方法定义为变量名。如果您不在属性声明中编写 getter，则假定与属性名称相同的 getter

编辑：我也假设这不是你的 getter 的整个实现，因为如果它让编译器自动为你做，你不需要写任何东西。（或通过`@synthesize propertyName = _propertyName`使用旧版本的 xCode 在您的实现块中编写）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T00:07:19.100

问题在于它`self.solutionsCount`与 相同`[self getSolutionsCount]`，因此您的 getter 是直接递归的。您可能希望直接访问底层 ivar，为此请使用`self->_solutionsCount`. 或者，如果您不想显式使用`self`，只需`_solutionsCount`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T00:14:32.040

这里有几个问题：

1.  根据命名约定，getter 不应该以 get 开头。要读取您需要使用的值`self.solutionsCount`。因此，您不需要在属性声明中指定 getter 方法的名称。

2.  您不需要指定 setter 的名称，因为它会自动生成。

该属性应如下所示：

```
@property (nonatomic, assign) NSInteger solutionsCount; 
```

1.  您无需编写自定义 getter 实现即可使其工作。要求编译器为您综合方法：

    @synthesize 解决方案计数；

如果您想直接访问实例变量，请让编译器为您合成它：

```
@synthesize solutionsCount = _solutionsCount; 
```

1.  首先阅读objective-c 和命名约定文档。他们将提供巨大帮助。

祝你好运！

# ruby-on-rails - Rails 中的 Mailer 问题 - 视图未呈现

> ID：13224316
> 
> 赞同：0
> 
> 时间：2012-11-05T00:03:26.947
> 
> 标签：ruby-on-rails, actionmailer

我是 Rails 邮件程序的新手。我已经部署到heroku，并且电子邮件可以正常发送和接收。问题是没有一个邮件程序正在呈现视图。

情况并非总是如此。我一定是移动了对该连接至关重要的东西并断开了连接。您能告诉我如何将视图重新连接到邮件程序吗？

我在 Rails 3.2 上，这里是您可能需要回答的信息：

在邀请模型中：

```
after_create do |invitation|
   InvitationMailer.delay.invitation_email(self)
end 
```

在邮件中：

```
class InvitationMailer < ActionMailer::Base
  helper ActionView::Helpers::UrlHelper
 default from: "noreply@lumeo.com"

 def invitation_email(invite)
   @invitation = invite

   mail(to: invite.recipient_email, 
    subject: "Invitation",
    :template_path => 'mailers/invitation_email')
 end
end 
```

最后，视图位于视图/邮件中：

```
You are invited to join our beta!

    <%= link_to 'Sign Up', signup_with_token_url(@invitation.token) %> 
```

这条线的路由正确，并且像我过去测试过的那样工作，但是视图不再呈现在电子邮件的正文中......

开发日志：

```
Started POST "/invitations" for 127.0.0.1 at 2012-11-04 17:00:22 -0800
Processing by InvitationsController#create as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SwmmoRObXNI5PoXYhGFc4zsqLulSJ4iq0v9VbcRBJ3E=", "invitation"=>{"recipient_email"=>"brian@labyrinth.com"}, "commit"=>"Send Invite"}
  User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
   (0.2ms)  BEGIN
  User Load (0.4ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'brian@labyrinth.com' LIMIT 1
   (0.2ms)  UPDATE "users" SET "invitation_limit" = 6, "updated_at" = '2012-11-05 01:00:22.236722' WHERE "users"."id" = 2
  SQL (0.3ms)  INSERT INTO "invitations" ("created_at", "recipient_email", "sender_id", "sent_at", "token", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Mon, 05 Nov 2012 01:00:22 UTC +00:00], ["recipient_email", "brian@labyrinth.com"], ["sender_id", 2], ["sent_at", nil], ["token", "650e4773e64a1120355e5392ecfea2fefb47dabf"], ["updated_at", Mon, 05 Nov 2012 01:00:22 UTC +00:00]]

Sent mail to brian@labyrinth.com (917ms)
Date: Sun, 04 Nov 2012 17:00:22 -0800
From: noreply@lumeo.com
To: brian@labyrinth.com
Message-ID: <50970fa63e33c_6673fd1a1035ae061987@Retina.local.mail>
Subject: Invitation
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

   (1.6ms)  COMMIT
Redirected to http://localhost:3000/invitations
Completed 302 Found in 942ms (ActiveRecord: 3.3ms)

Started GET "/invitations" for 127.0.0.1 at 2012-11-04 17:00:23 -0800
Processing by InvitationsController#index as HTML
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
  Invitation Load (0.3ms)  SELECT "invitations".* FROM "invitations" 
  Rendered invitations/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_stylesheets.html.erb (4.7ms)
  Image Load (0.5ms)  SELECT "images".* FROM "images" WHERE "images"."parent_id" = 2 AND "images"."parent_type" = 'User' LIMIT 1
  Role Load (0.4ms)  SELECT "roles".* FROM "roles" INNER JOIN "assignments" ON "roles"."id" = "assignments"."role_id" WHERE "assignments"."user_id" = 2
  Rendered layouts/_header.html.erb (9.6ms)
  Rendered layouts/_footer.html.erb (0.6ms)
Completed 200 OK in 31ms (Views: 26.4ms | ActiveRecord: 2.0ms) 
```

Heroku 日志：

```
 2012-11-05T01:09:21+00:00 app[web.2]: Started POST "/invitations" for 76.175.198.239 at       2012-11-05 01:09:21 +0000
 2012-11-05T01:09:22+00:00 app[worker.1]: [Worker(host:4ba7555d-5659-4f95-a8fb-13326b458480 pid:2)] Starting job worker
2012-11-05T01:09:22+00:00 app[worker.1]: Starting the New Relic Agent.
2012-11-05T01:09:22+00:00 app[worker.1]: [Worker(host:4ba7555d-5659-4f95-a8fb-13326b458480 pid:2)] New Relic Ruby Agent Monitoring DJ worker host:4ba7555d-5659-4f95-a8fb-13326b458480 pid:2
2012-11-05T01:09:23+00:00 app[web.2]: Processing by InvitationsController#create as HTML
2012-11-05T01:09:23+00:00 app[web.2]:   Parameters: {"utf8"=>"✓", "authenticity_token"=>"Utls4PaX/7TkwyZkhZnkm3pf8llGoX/j5LskL+9rO40=", "invitation"=>{"recipient_email"=>"brian@labyrinthvisuals.com"}, "commit"=>"Send Invite"}
2012-11-05T01:09:23+00:00 app[web.2]:   User Load (1.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 4528 LIMIT 1
2012-11-05T01:09:23+00:00 app[web.2]:    (3.2ms)  BEGIN
2012-11-05T01:09:23+00:00 app[web.2]:   User Load (3.4ms)  SELECT "users".* FROM "users" WHERE "users"."email" = 'brian@labyrinthvisuals.com' LIMIT 1
2012-11-05T01:09:23+00:00 app[web.2]:    (0.8ms)  UPDATE "users" SET "invitation_limit" = 90, "updated_at" = '2012-11-05 01:09:21.797013' WHERE "users"."id" = 4528
 2012-11-05T01:09:23+00:00 app[web.2]:   SQL (1.6ms)  INSERT INTO "invitations" ("created_at", "recipient_email", "sender_id", "sent_at", "token", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["created_at", Mon, 05 Nov 2012 01:09:21 UTC +00:00], ["recipient_email", "brian@labyrinthvisuals.com"], ["sender_id", 4528], ["sent_at", nil], ["token", "53e21931e3481036c9019f8245e518b5ce8343aa"], ["updated_at", Mon, 05 Nov 2012 01:09:21 UTC +00:00]]
2012-11-05T01:09:23+00:00 app[web.2]: 
2012-11-05T01:09:23+00:00 app[web.2]: Sent mail to brian@labyrinthvisuals.com (886ms)
2012-11-05T01:09:23+00:00 app[web.2]: Date: Mon, 05 Nov 2012 01:09:22 +0000
2012-11-05T01:09:23+00:00 app[web.2]: From: noreply@lumeo.com
2012-11-05T01:09:23+00:00 app[web.2]: To: brian@labyrinthvisuals.com
2012-11-05T01:09:23+00:00 app[web.2]: Message-ID: <509711c25d54a_2fc899c84342@52b7b88c-4573-408e-8219-a12f9c4087fb.mail>
2012-11-05T01:09:23+00:00 app[web.2]: Subject: Invitation
2012-11-05T01:09:23+00:00 app[web.2]: Mime-Version: 1.0
2012-11-05T01:09:23+00:00 app[web.2]: Content-Type: text/plain;
2012-11-05T01:09:23+00:00 app[web.2]:  charset=UTF-8
2012-11-05T01:09:23+00:00 app[web.2]: Content-Transfer-Encoding: 7bit
2012-11-05T01:09:23+00:00 app[web.2]: 
2012-11-05T01:09:23+00:00 app[web.2]: 
2012-11-05T01:09:23+00:00 heroku[router]: POST www.lumeo.com/invitations dyno=web.2 queue=0 wait=0ms service=1857ms status=302 bytes=98
2012-11-05T01:09:23+00:00 app[web.2]:    (3.7ms)  COMMIT
2012-11-05T01:09:23+00:00 app[web.2]: Redirected to http://www.lumeo.com/invitations
2012-11-05T01:09:23+00:00 app[web.2]: Completed 302 Found in 1543ms (ActiveRecord: 22.2ms)
2012-11-05T01:09:23+00:00 app[web.2]: 
2012-11-05T01:09:23+00:00 app[web.2]: 
2012-11-05T01:09:23+00:00 app[web.2]: Started GET "/invitations" for 76.175.198.239 at    2012-11-05 01:09:23 +0000
2012-11-05T01:09:24+00:00 heroku[router]: GET www.lumeo.com/invitations dyno=web.2 queue=0 wait=0ms service=727ms status=200 bytes=8052
2012-11-05T01:09:24+00:00 app[web.2]:   Role Load (1.5ms)  SELECT "roles".* FROM "roles" INNER JOIN "assignments" ON "roles"."id" = "assignments"."role_id" WHERE "assignments"."user_id" = 4528
2012-11-05T01:09:24+00:00 app[web.2]:   Rendered layouts/_header.html.erb (544.9ms)
2012-11-05T01:09:24+00:00 app[web.2]:   User Load (0.9ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 4528 LIMIT 1
2012-11-05T01:09:24+00:00 app[web.2]:   Invitation Load (2.3ms)  SELECT "invitations".* FROM "invitations" 
2012-11-05T01:09:24+00:00 app[web.2]: Processing by InvitationsController#index as HTML
2012-11-05T01:09:24+00:00 app[web.2]:   Rendered invitations/index.html.erb within layouts/application (4.8ms)
2012-11-05T01:09:24+00:00 app[web.2]:   Rendered layouts/_stylesheets.html.erb (0.8ms)
2012-11-05T01:09:24+00:00 app[web.2]:   Image Load (1.6ms)  SELECT "images".* FROM "images" WHERE "images"."parent_id" = 4528 AND "images"."parent_type" = 'User' LIMIT 1
2012-11-05T01:09:24+00:00 app[web.2]:   Rendered layouts/_footer.html.erb (1.3ms)
2012-11-05T01:09:24+00:00 app[web.2]: Completed 200 OK in 708ms (Views: 664.3ms | ActiveRecord: 39.2ms)
2012-11-05T01:09:24+00:00 app[web.1]: => Booting Thin
2012-11-05T01:09:24+00:00 app[web.1]: => Rails 3.2.3 application starting in production on http://0.0.0.0:59079
2012-11-05T01:09:24+00:00 app[web.1]: => Call with -d to detach
2012-11-05T01:09:24+00:00 app[web.1]: => Ctrl-C to shutdown server
2012-11-05T01:09:24+00:00 app[web.1]: ** [NewRelic][11/05/12 01:09:23 +0000 1a2f3028-d8e6-415a-889a-de99cac2c096 (2)] INFO : Dispatcher: thin
2012-11-05T01:09:24+00:00 app[web.1]: ** [NewRelic][11/05/12 01:09:23 +0000 1a2f3028-d8e6-415a-889a-de99cac2c096 (2)] INFO : Application: sharp-flower-5688
2012-11-05T01:09:24+00:00 app[web.1]: ** [NewRelic][11/05/12 01:09:23 +0000 1a2f3028-d8e6-415a-889a-de99cac2c096 (2)] INFO : New Relic Ruby Agent 3.4.1 Initialized: pid = 2
2012-11-05T01:09:24+00:00 app[web.1]: ** [NewRelic][11/05/12 01:09:24 +0000 1a2f3028-d8e6-415a-889a-de99cac2c096 (2)] INFO : NewRelic::Agent::Samplers::DelayedJobSampler sampler not available: No DJ worker present
2012-11-05T01:09:24+00:00 app[web.2]: Connected to NewRelic Service at collector-5.newrelic.com
2012-11-05T01:09:24+00:00 app[web.2]: ** [NewRelic][11/05/12 01:09:24 +0000 52b7b88c-4573-408e-8219-a12f9c4087fb (2)] INFO : Reporting performance data every 60 seconds. 
```

请帮忙。这些是我在公开发布之前需要做的最后几件事……明天……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:19:15.357

如果文件名或路径不正确，视图将不会呈现。

在这种情况下，您应该：

```
app/views/invitation_mailer/invitation_email.text.erb 
```

如果你还想要 html：

```
app/views/invitation_mailer/invitation_email.html.erb 
```

您不必设置 :template_path

# python - 在 Emacs 的 python 模式中使用 IPython

> ID：13224317
> 
> 赞同：3
> 
> 时间：2012-11-05T00:03:35.090
> 
> 标签：python, emacs

在 Emacs 中使用 python-mode 时，我想将 IPython 设置为我的默认解释器。目前，每当我打开`.py`Emacs 时，都会打开缓冲区和常规 Python 解释器。如何将 python-mode 配置为默认使用 IPython？

# r - R - 如何更改已移动到图表顶部的两个 x 轴的字体样式和大小？

> ID：13224320
> 
> 赞同：6
> 
> 时间：2012-11-05T00:04:22.127
> 
> 标签：r, fonts, size

我在更改两个 x 轴上的字体样式和大小时遇到​​了麻烦，这两个 x 轴都已移至图表顶部。

到目前为止，这是我的代码：

```
x1<-Temperature
x2<-Salinity

y<-Depth
par(mar=c(4, 4, 8, 4))

plot(x2,y, type="l",col="darkgrey",ylim=rev(range(0,300)),las=2,xlim=(range(32.5,34.5)),xaxt='n',xlab='',font.axis=2,lwd=3,ylab="Depth [m]",font=2,font.lab=2,cex.lab=1.3,cex.axis=1.2)
axis(side=3, line=4)
par(new=TRUE)
plot(x1,y, type="l",col="black",ylim=rev(range(0,300)),las=2,xaxt='n',xlab='',lwd=3,ylab='Depth [m]',font=2,font.lab=2,cex.lab=1.3,cex.axis=1.2)
axis(side=3, line=0)
par(new=TRUE) 
```

这成功地改变了我的 y 轴，但保持我的 x 轴不变。

帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T00:19:53.820

通读 , 的帮助`axis`，`?axis`查看`...`参数的文档：

```
 ...: other graphical parameters may also be passed as arguments to
      this function, particularly, ‘cex.axis’, ‘col.axis’ and
      ‘font.axis’ for axis annotation, ‘mgp’ and ‘xaxp’ or ‘yaxp’
      for positioning, ‘tck’ or ‘tcl’ for tick mark length and
      direction, ‘las’ for vertical/horizontal label orientation,
      or ‘fg’ instead of ‘col’, and ‘xpd’ for clipping.  See ‘par’
      on these. 
```

因此，只需`cex.axis`像`axis`对`plot`. 这是一个**可重现的示例**（请注意我是如何组成数据的，即使数据不真实，至少它使示例具有可重现性并且仍然可以解决您的问题）：

```
x1 <- runif(10)
x2 <- runif(10) * 2 + 32.5
y <- runif(10) * 300

par(mar=c(4, 4, 8, 4))    
plot(x2,y, type="l",col="darkgrey",ylim=rev(range(0,300)),las=2,xlim=(range(32.5,34.5)),xaxt='n',xlab='',font.axis=2,lwd=3,ylab="Depth [m]",font=2,font.lab=2,cex.lab=1.3,cex.axis=1.2)

# added in various font/axis labels as in above
axis(side=3, line=4,font.axis=2,font.lab=2,cex.lab=1.3,cex.axis=1.2)

par(new=TRUE)
plot(x1,y, type="l",col="black",ylim=rev(range(0,300)),las=2,xaxt='n',xlab='',lwd=3,ylab='Depth [m]',font=2,font.lab=2,cex.lab=1.3,cex.axis=1.2)
axis(side=3, line=0,font.axis=2,font.lab=2,cex.lab=1.3,cex.axis=1.2) 
```

![在 R 中设置轴属性](../Images/29f5a80ac17137eaafe08a6fc0d003cf.png)

（您随后调用`axis`where从调用中*替换*轴`plot`，因此不使用来自`plot`它的轴参数，而是使用来自的轴参数`axis`）。

# c++ - 如何在 C++ 中唯一地表征一个数组？

> ID：13224321
> 
> 赞同：0
> 
> 时间：2012-11-05T00:04:38.977
> 
> 标签：c++, arrays

是否可以在 C++ 中表征整数数组？一旦特征化，包含相同元素集的数组将具有相同的特征。我在考虑*hashcode*行，每个 hashcode 将唯一标识一个数组！

例如`ary[]={4,5,3,2,4}`，`ary_two[]={4,4,2,3,5}`两者都应该具有相同的特征/哈希码！

我正在尝试解决这个问题（在采访中提出）：正在生成许多可变大小的数组。对于每个数组，确定我们是否在包含与该数组相同的元素之前遇到过一个数组！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:18:53.550

一种可能的解决方案是使用元素散列本身（假设数组的内容是可散列的）。`xor`然后只需将它们与一些合适的功能（例如 an或更好的功能）折叠在一起`+`。确保折叠函数是可交换和关联的，否则数组的顺序会有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:24:38.483

调查[std::hash](http://en.cppreference.com/w/cpp/utility/hash)。你可能可以重载它来做你想做的事。例如，如果您希望数组具有值`{4, 5, 3, 2, 4}`并`{4, 4, 2, 3, 5}`散列到相同的值，您可以像这样专门化它：

```
template<> struct hash<std::array<int, 5>>
{
    size_t operator()(const std::array<int, 5> &ary) const
    {
        return std::accumulate(std::begin(ary), std::end(ary), 0U) * 16777619;
    }
}; 
```

# r - 在 OS X 上分析 Rcpp 代码

> ID：13224322
> 
> 赞同：27
> 
> 时间：2012-11-05T00:04:47.847
> 
> 标签：r, profiling, rcpp

我有兴趣在 OS X（Mountain Lion 10.8.2）下分析一些 Rcpp 代码，但分析器在运行时崩溃。

玩具示例，使用`inline`，只是为了花足够的时间让分析器注意到。

```
library(Rcpp)
library(inline)

src.cpp <- "
  RNGScope scope;
  int n = as<int>(n_);
  double x = 0.0;
  for ( int i = 0; i < n; i++ )
    x += (unif_rand()-.5);
  return wrap(x);"

src.c <- "
  int i, n = INTEGER(n_)[0];
  double x = 0.0;
  GetRNGstate();
  for ( i = 0; i < n; i++ )
    x += (unif_rand()-.5);
  PutRNGstate();
  return ScalarReal(x);"

f.cpp <- cxxfunction(signature(n_="integer"), src.cpp, plugin="Rcpp")
f.c <- cfunction(signature(n_="integer"), src.c) 
```

如果我使用 GUI Instruments（在 Xcode 中，版本 4.5 (4523)）或命令行`sample`，两者都崩溃： Instruments 立即崩溃，而 sample 在崩溃前完成处理示例：

```
# (in R)
set.seed(1)
f.cpp(200000000L)

# (in a separate terminal window)
~ » sample R  # this invokes the profiler
Sampling process 81337 for 10 seconds with 1 millisecond of run time between samples
Sampling completed, processing symbols...
[1]    81654 segmentation fault  sample 81337 
```

如果我执行相同的过程，但使用 C 版本（即`f.c(200000000L)`），则仪器和`sample`工作正常，并产生类似的输出

```
Call graph:
1832 Thread_6890779   DispatchQueue_1: com.apple.main-thread  (serial)
  1832 start  (in R) + 52  [0x100000e74]
    1832 main  (in R) + 27  [0x100000eeb]
      1832 run_Rmainloop  (in libR.dylib) + 80  [0x1000e4020]
        1832 R_ReplConsole  (in libR.dylib) + 161  [0x1000e3b11]
          1832 Rf_ReplIteration  (in libR.dylib) + 514  [0x1000e3822]
            1832 Rf_eval  (in libR.dylib) + 1010  [0x1000aa402]
              1832 Rf_applyClosure  (in libR.dylib) + 849  [0x1000af5d1]
                1832 Rf_eval  (in libR.dylib) + 1672  [0x1000aa698]
                  1832 do_dotcall  (in libR.dylib) + 16315  [0x10007af3b]
                    1382 file1412f6e212474  (in file1412f6e212474.so) + 53  [0x1007fded5]  file1412f6e212474.cpp:16
                    + 862 unif_rand  (in libR.dylib) + 1127,1099,...  [0x10000b057,0x10000b03b,...]
                    + 520 fixup  (in libR.dylib) + 39,67,...  [0x10000aab7,0x10000aad3,...]
                    356 file1412f6e212474  (in file1412f6e212474.so) + 70,61,...  [0x1007fdee6,0x1007fdedd,...]  file1412f6e212474.cpp:16
                    56 unif_rand  (in libR.dylib) + 1133  [0x10000b05d]
                    38 DYLD-STUB$$unif_rand  (in file1412f6e212474.so) + 0  [0x1007fdf1c] 
```

如果我做错了什么，是否有其他首选方式，或者这是不可能的，我真的很感激一些建议。鉴于 Rcpp 的主要用途之一似乎是加速 R 代码，我很惊讶没有找到更多关于此的信息，但也许我找错了地方。

这是在带有 R 2.15.1 (x86_64-apple-darwin9.8.0)、Rcpp 0.9.15 和 g++ --version 的 OS X 10.8.2 上报告“i686-apple-darwin11-llvm-g++-4.2 (GCC) 4.2 .1（基于 Apple Inc. build 5658）（LLVM build 2336.11.00）”。

# 一个办法

感谢 Dirk 在下面的回答，以及他在这里的演讲[http://dirk.eddelbuettel.com/papers/ismNov2009introHPCwithR.pdf](http://dirk.eddelbuettel.com/papers/ismNov2009introHPCwithR.pdf)，我至少有一个使用 Google perftools 的部分解决方案。首先，从这里[http://code.google.com/p/gperftools/](http://code.google.com/p/gperftools/)安装，并在编译 C++ 代码时将 -lprofiler 添加到 PKG_LIBS。然后要么

(a) 运行 R as `CPUPROFILE=samples.log R`，运行所有代码并退出（或使用 Rscript）

(b) 使用两个小实用函数来打开/关闭分析：

```
RcppExport SEXP start_profiler(SEXP str) {
  ProfilerStart(as<const char*>(str));
  return R_NilValue;
}

RcppExport SEXP stop_profiler() {
  ProfilerStop();
  return R_NilValue;
} 
```

然后，在 R 中你可以做

```
.Call("start_profiler", "samples.log")
# code that calls C++ code to be profiled
.Call("stop_profiler") 
```

无论哪种方式，该文件`samples.log`都将包含分析信息。这可以看

```
pprof --text /Library/Frameworks/R.framework/Resources/bin/exec/x86_64/R samples.log 
```

产生类似的输出

```
Using local file /Library/Frameworks/R.framework/Resources/bin/exec/x86_64/R.
Using local file samples.log.
Removing __sigtramp from all stack traces.
Total: 112 samples
  64  57.1%  57.1%       64  57.1% _unif_rand
  30  26.8%  83.9%       30  26.8% _process_system_Renviron
  14  12.5%  96.4%      101  90.2% _for_profile
   3   2.7%  99.1%        3   2.7% Rcpp::internal::expr_eval_methods
   1   0.9% 100.0%        1   0.9% _Rf_PrintValueRec
   0   0.0% 100.0%        1   0.9% 0x0000000102bbc1ff
   0   0.0% 100.0%       15  13.4% 0x00007fff5fbfe06f
   0   0.0% 100.0%        1   0.9% _Rf_InitFunctionHashing
   0   0.0% 100.0%        1   0.9% _Rf_PrintValueEnv
   0   0.0% 100.0%      112 100.0% _Rf_ReplIteration 
```

对于一个真实的例子，这可能会提供更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:15:55.647

我很困惑，你的例子不完整：

*   你没有显示和的（微不足道的）`cfunction()`调用`cxxfunction()`

*   您没有显示如何调用探查器

*   您没有分析 C 或 C++ 代码 (!!)

您可以编辑问题并使其更清晰吗？

此外，当我运行它时，这两个示例确实给出了相同的速度结果，因为它们本质上是相同的。[ Rcpp 可以让你在调用中使用糖随机数函数来执行此操作。]

```
R> library(Rcpp)
R> library(inline)
R> 
R> src.cpp <- "
+   RNGScope scope;
+   int n = as<int>(n_);
+   double x = 0.0;
+   for ( int i = 0; i < n; i++ )
+     x += (unif_rand()-.5);
+   return wrap(x);"
R> 
R> src.c <- "
+   int i, n = INTEGER(n_)[0];
+   double x = 0.0;
+   GetRNGstate();
+   for ( i = 0; i < n; i++ )
+     x += (unif_rand()-.5);
+   PutRNGstate();
+   return Rf_ScalarReal(x);"
R> 
R> fc   <- cfunction(signature(n_="int"), body=src.c)
R> fcpp <- cxxfunction(signature(n_="int"), body=src.c, plugin="Rcpp")
R> 
R> library(rbenchmark)
R> 
R> print(benchmark(fc(10000L), fcpp(10000L)))
         test replications elapsed relative user.self sys.self user.child sys.child
1   fc(10000)          100   0.013        1     0.012        0          0         0
2 fcpp(10000)          100   0.013        1     0.012        0          0         0
R> 
```

# hover - 悬停到href img src？

> ID：13224323
> 
> 赞同：-1
> 
> 时间：2012-11-05T00:04:52.923
> 
> 标签：hover, image, href

嘿，我已经尝试了一段时间，但没有运气。我有以下代码：

`<a href="iframelink opened in fancybox"><img src="image link"></a>`

如何将图像悬停应用到 img src？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:32:15.103

使用背景图像代替`<img>`标签的示例。

```
<a href="...." rel="fancybox"><a> 
```

CSS：

```
a[rel=fancybox] {
  display: block;
  background: url('image1.jpg') no-repeat 0 0 transparent;
  width: 100px; 
  height: 100px;
}

a[rel=...]:hover {
  background: url('image2.jpg') no-repeat 0 0 transparent;
} 
```

您可能需要预加载图像。

使用 JS：

```
<a href="" rel="" onmouseover="this.getElementById('i1').src='/images/image_hover.jpg'" onmouseout="this.getElementById('i1').src='/images/image.jpg'">
<img id="i1" src="/images/image.jpg">
</a> 
```

# android - 无法使 LazyForeignCollection 成为急切的集合

> ID：13224324
> 
> 赞同：2
> 
> 时间：2012-11-05T00:05:02.157
> 
> 标签：android, ormlite

尝试从我的 POJO 中读取外部集合时出现此错误

```
AndroidRuntime(589): Caused by: java.lang.IllegalStateException: Internal DAO
    object is null.  Lazy collections cannot be used if they have been deserialized. 
```

有问题的集合是`answers1`我标记为“渴望”的集合

```
@ForeignCollectionField (eager=true)
private ForeignCollection<TextAnswer> answers1; 
```

为什么当我调试下面的方法时

```
public List<TextAnswer> getAnswers() {      
    return new ArrayList<TextAnswer>(answers1);
} 
```

它告诉我该集合是一个 LazyForeignCollection？我很困惑。

在我使用 ForeignCollections 的任何其他课程中，我都没有这个问题:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:15:51.450

> 如果已经反序列化，则不能使用惰性集合。

有趣的问题。首先，该消息*仅*在`LazyForeignCollection`课堂上。`answer1`该字段是否有可能*曾经*是惰性的并被序列化？是否涉及序列化？除非对象已被序列化，否则a 中的`dao`字段`ForeignCollection`永远不应存在。`null`

我现在的假设是您正在反序列化该类的先前版本。如果不是这种情况，那么我不知道。

# css - 如何在每个 h3 之后引用一个 Div

> ID：13224329
> 
> 赞同：0
> 
> 时间：2012-11-05T00:05:34.260
> 
> 标签：css

如果我有这样的事情

```
<h3><a href="#">Pay Info</a></h3>
    <div id="pay-Wrapper" >
       ...content
    </div>
<h3><a href="#">Car Info</a></h3>
    <div id="car-Wrapper" >
       ...content
    </div>
<h3><a href="#">Loan Info</a></h3>
    <div id="loan-Wrapper" >
       ...content
    </div> 
```

如何在 css 中引用每个 h3 之后的 div，以便我可以设置我想要应用于页面中任何 h3 之后的所有第一个 div 的样式？

这是我绑的，但没有运气：

```
h3 div 
{
    height:100px; 
    overflow-x:hidden; 
    overflow-y:auto; 
    position:relative; 
    left:0; 
    top: 0; 
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T00:06:33.910

> 我如何在 CSS 中引用`div`每个之后的内容，`h3`以便我可以设置我想要在页面中的`div`任何内容之后首先应用的样式`h3`？

使用这个相邻的兄弟选择器...

```
h3 + div {
    /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:10:01.513

`h3 + div { ... }`

这也称为相邻[兄弟选择器](http://www.w3.org/TR/CSS2/selector.html#adjacent-selectors)。

还请查看以下内容： [CSS 如何在另一个元素之后选择第一个出现的元素](https://stackoverflow.com/questions/4623328/css-how-to-select-first-occuring-element-after-another-element)

这是同一个问题

# python - 强制 Memcache 中的项目立即可用

> ID：13224338
> 
> 赞同：1
> 
> 时间：2012-11-05T00:07:05.367
> 
> 标签：python, google-app-engine, memcached

使用 Google App Engine NDB，memcache 的大部分方面都是自动处理的。但是，一个项目在被读取至少一次之前不会在 Memcache 中可用。所以首先必须使用 get 读取项目，然后 memcache 存储它。Put() 将其从内存缓存中删除。

但是，我需要在放置时立即在 memcache 中可用。我是 memcache 的新手，所以我不完全确定幕后的一切是如何运作的，但有两种方法可以做到这一点：

1.  在实体的 put() 之后，立即执行 get()，以便它在 memcache 中可用。
2.  在 put() 之后，立即手动设置 memcache 中的项目。这是有道理的，但我不确定这种方法是否有任何问题。如果我在 memcache 中手动设置某些内容，这会干扰 NDB 的其余自动 memcache 处理吗？ **另外**，在手动设置 memcache 中的内容时我应该使用什么键，以便在获取时，自动 memcache 处理程序知道要查找什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T11:07:41.980

I suspect you are referring to this:

> Memcache does not support transactions. Thus, an update meant to be applied to both the Datastore and memcache might be made to only one of the two. To maintain consistency in such cases (possibly at the expense of performance), the updated entity is deleted from memcache and then written to the Datastore. A subsequent read operation will find the entity missing from memcache, retrieve it from the Datastore, and then update it in memcache as a side effect of the read. Also, NDB reads inside transactions ignore the Memcache.

So if you need something to be available on put then you'll have to cache it in memcache yourself.

Which brings us to 2)

If you manually set something in memcache AFAIK it won't interact with NDB's automatic caching in any way. Also AFAIK you can't set a manual memcache entry with a key that the automatic version will then be able to automatically work with.

You simply have to build a layer of memcache around your content that you explicitly control. Every time you to do a put you use a function that puts to the datastore then into memcache, invalidating existing entries if required. Likewise for get, you try memcache first then fall back to the datastore. Which sounds almost exactly like what NDB is doing already for you!

Perhaps look at the Policy functions options for finer control: [https://developers.google.com/appengine/docs/python/ndb/cache#policy_functions](https://developers.google.com/appengine/docs/python/ndb/cache#policy_functions)

Don't forget however that the in context cache might well be doing what you want already:

> The in-context cache persists only for the duration of a single incoming HTTP request and is "visible" only to the code that handles that request. It's fast; this cache lives in memory. When an NDB function writes to the Datastore, it also writes to the in-context cache. When an NDB function reads an entity, it checks the in-context cache first. If the entity is found there, no Datastore interaction takes place.
> 
> Queries do not look up values in any cache. However, query results are written back to the in-context cache if the cache policy says so (but never to Memcache).

So if your put and subsequent get is happening in the same request it's coming out of the in-context cache in any case.

# python - GAE 在没有流量后返回 404

> ID：13224341
> 
> 赞同：2
> 
> 时间：2012-11-05T00:07:08.893
> 
> 标签：python, google-app-engine

我是 GAE 和 python 的新手（也是我在 Stack Overflow 上的第一篇文章）。我在 GAE 上有一个基本站点。我正在使用 Python 2.7。它的流量很少，因为此时我是唯一一个访问它的人。

问题是，每当我在一段时间不活动（超过 10 到 15 分钟）后点击主 URL 时，我都会从我的 ISP（罗杰斯）收到 404。大约 15 秒后，如果我重试主 url，页面就会加载。

我认为这可能是因为实例必须启动。所以我升级了一个付费的 GAE 帐户，并将其设置为始终运行至少一个实例。GAE 仪表板至少显示一个在过去一天运行的实例。但问题仍然存在。

这是我的 app.yaml

```
application: resumesite
version: 1
runtime: python27
api_version: 1
threadsafe: yes

handlers:
  - url: /static
    static_dir: static

  - url: /.*
    script: main.app

inbound_services:
  - warmup

libraries:
  - name: jinja2
    version: latest 
```

任何帮助，将不胜感激

# ios - 如何正确使用 dispatch_sync？

> ID：13224344
> 
> 赞同：5
> 
> 时间：2012-11-05T00:07:23.837
> 
> 标签：ios, objective-c, objective-c-blocks, grand-central-dispatch

我从一个自定义的 NSObject 类获取 twitter 时间线数据，这个类具有调用 API 和解析数据的所有核心。我从我的视图控制器调用这个类，它有一个表视图，需要用来自 twitter 的数据填充表视图。但是由于 dispatch_sync 的一些问题，我的视图控制器调用了 twitter 类，并且控制在 Array（我用来填充 tableview）填充数据之前返回到视图控制器。

这是一些代码：

```
#import <UIKit/UIKit.h>
#import "SecondViewController.h"
#import "SpinnerController.h"
#import "proAlertView.h"
#import "SBJson.h"
#import <Accounts/Accounts.h>
#import <Twitter/Twitter.h>

@interface TwitterDataLoad : NSObject<UIAlertViewDelegate>
{
    NSMutableData * receivedData;
    NSArray * results;
    NSArray * cellContent;
    NSMutableArray * totalContent;
    SpinnerController * spinner;
    proAlertView * av;
    NSString *json_string;
    NSDictionary * jsonResults;
    SBJsonParser * parser;
    NSMutableArray * dataForTable;

}
@property(nonatomic, strong) ACAccount * account;
@property(nonatomic, strong) NSArray * accounts;
@property(nonatomic, strong) ACAccountStore * accountStore;
@property (nonatomic ,retain) SecondViewController * tbView;

- (void)loadData;

@end

#import "TwitterDataLoad.h"

@interface TwitterDataLoad ()

@end

@implementation TwitterDataLoad
@synthesize tbView;

-(id) init {
    self = [super init];
    if (self) {
        [self loadData];
    }
    return self;
}

- (void)loadData
{
    dataForTable = [[NSMutableArray alloc]init];
    //Twitter new code

    if (_accounts == nil) {
        if (_accountStore == nil) {
            _accountStore = [[ACAccountStore alloc] init];
        }
        ACAccountType *accountTypeTwitter =
        [_accountStore
         accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];
        [_accountStore requestAccessToAccountsWithType:accountTypeTwitter
                                     withCompletionHandler:^(BOOL granted, NSError *error) {
                                         if(granted) {
                                             dispatch_sync(dispatch_get_main_queue(), ^{
                                                 _accounts = [_accountStore
                                                                  accountsWithAccountType:accountTypeTwitter];

                                                 [self sendRequest];
                                             });
                                         }
                                     }];
    }
}

-(void) sendRequest {

    totalContent = [[NSMutableArray alloc]init];
    _account = [_accounts objectAtIndex:0];

    TWRequest *postRequest = [[TWRequest alloc]
                              initWithURL:
                              [NSURL URLWithString:@"https://api.twitter.com/1/statuses/user_timeline.json?screen_name=test&count=20"]
                              parameters:nil
                              requestMethod:TWRequestMethodGET];

    av = [[proAlertView alloc]initWithTitle:nil message:@"Getting latest news..." delegate:self cancelButtonTitle:nil otherButtonTitles:nil, nil];
    UIActivityIndicatorView * indicator = [[UIActivityIndicatorView alloc]initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    indicator.frame = CGRectMake(120, 55, 35, 35);
    [av addSubview:indicator];
    [indicator startAnimating];
    [av setBackgroundColor:[UIColor clearColor] withStrokeColor:[UIColor blackColor]];
    [av show];

    [postRequest setAccount:_account];
    [postRequest performRequestWithHandler:^(NSData *responseData,
                                             NSHTTPURLResponse *urlResponse,
                                             NSError *error) {
        if ([urlResponse statusCode] == 200) {
            NSError *jsonError = nil;
            results = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonError];

            dispatch_sync(dispatch_get_main_queue(), ^{
                [av dismissAlert];
                [self parseJson];
            });
        }
        else {
            [self showMessage];
        }
    }];

}

-(void)showMessage {

    av = [[proAlertView alloc]initWithTitle:@"Connection Problem" message:@"Please confirm the device is connected to the Internet." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [av setBackgroundColor:[UIColor clearColor] withStrokeColor:[UIColor blackColor]];
    [av show];
}

-(void)parseJson {

    NSMutableArray * complete = [[NSMutableArray alloc]init];
    for (NSDictionary * tweets in results)
        {
        NSString * status = [tweets objectForKey:@"text"];
        NSString * date = [tweets objectForKey:@"created_at"];
        NSDictionary * user = [tweets objectForKey:@"user"];
        NSString * artistName = [user objectForKey:@"name"];
        NSString * screenName = [user objectForKey:@"screen_name"];
        NSString * artistImage = [user objectForKey:@"profile_image_url"];
        cellContent = [NSArray arrayWithObjects:status,date,artistName,screenName,artistImage, nil];
        [complete addObject:cellContent];
        }

        SecondViewController * tmpView = [[SecondViewController alloc]initWithNibName:@"SecondViewController_iPhone" bundle:nil];
            tmpView.dataToDisplay = complete;
} 
```

这个类是这样调用的：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    TwitterDataLoad * data = [[TwitterDataLoad alloc] init];
    [data loadData];
    NSArray * temp = dataToDisplay;
} 
```

我知道我以错误的方式返回值，但我尝试通过 loadData 消息本身将它返回到视图控制器，但它也不起作用，所以我只是在尝试这个。请不要在意那个。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T15:38:48.077

好吧，我发现了这个问题。dispatch_sync 正在做它应该做的问题是与调用 dispatch_sync 的其他两个语句（其他块）

```
[_accountStore requestAccessToAccountsWithType:accountTypeTwitter
                                         withCompletionHandler:^(BOOL granted, NSError *error) 
```

所以这是一个异步调用，当程序控制回到主队列时调用调度同步，因为我们定义它是这样的：dispatch_sync(dispatch_get_main_queue()) 并且该方法在控制返回到主队列之前返回，因此该数组没有任何价值。所以为了解决这个问题，我在我的调用类中写了一个块，一旦这个数据调用结束，它就会得到返回调用。如果您想要整个代码，请给我发电子邮件@ghostsmitm@gmail.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:14:57.670

加载数据后，您应该调用`reloadData`您的。`UITableView`您可以在调用后执行此操作`loadData`。

# verilog - Verilog问题中的零标志

> ID：13224350
> 
> 赞同：0
> 
> 时间：2012-11-05T00:08:42.400
> 
> 标签：verilog, modelsim

我正在尝试在 verilog 中构建一个 32 位 ALU，而我之前只做了一点行为 verilog，所以我在使用这段代码时遇到了一些困难：

```
module ZERO_FLAG(flag, control, inputA, inputB);
  input [2:0] control;
  input [31:0] inputA, inputB;
  output flag;

  reg flag;

  always @(control or inputA or inputB) begin
    case (control)
      1: flag <= (|(inputA ~& inputB));
      3'bxxx, 3'bxx0, 3'bxx1, 3'bx0x,
      3'bx00, 3'bx01, 3'bx1x, 3'bx10,
      3'bx11, 3'b0xx, 3'b0x0, 3'b0x1,
      3'b00x, 3'b000, 3'b01x, 3'b010,
      3'b011, 3'b1xx, 3'b1x0, 3'b1x1,
      3'b10x, 3'b100, 3'b101, 3'b11x,
      3'b110, 3'b111: flag <= 0;
    endcase
  end
endmodule 
```

出于某种原因，Modelsim 在 1 的情况下对 inputA 和 inputB 之间的 NAND 不满意。基本思想是我只想在减法发生时抛出一个零标志，然后我希望结果是 OR 减少位两个输入的与非。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T08:40:39.653

值得一提的是补充 IEEE 1364.1-2002 A.8.6 下的其他答案，这`~&`是有效的 Verilog 语法，但只能作为一元运算符使用。这意味着它只需要一个右手参数。

```
 &(4'b0000) => 1'b0
 &(4'b0101) => 1'b0
 &(4'b1111) => 1'b1

~&(4'b0000) => 1'b1
~&(4'b0101) => 1'b1
~&(4'b1111) => 1'b0 
```

可用的一元运算符有：

```
+, -, !, ~, &, ~&, |, ~|, ^, ~^, ^~ 
```

其中`&, ~&, |, ~|, ^, ~^, ^~`有归约运算符，如上所示将归约到 1 位值。这`^`意味着 XOR。

可用的位运算符：

```
+, -, *, /, %, ==, !=, ===, !==, &&, ||, **,
<, <=, >, >=, &, |, ^, ^~, ~^, >>, <<, >>>, <<< 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:45:58.177

我会尝试将这一行重写为：

```
1: flag <= |(~(inputA & inputB)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:06:13.640

不幸的是，Verilog 中没有二进制 NAND。唯一的二进制位运算符是 AND(&)、OR(|)、XOR(^) 和 XNOR（~^ 和 ^~）。

# c - C 中的 UNIX 共享内存和信号量

> ID：13224357
> 
> 赞同：0
> 
> 时间：2012-11-05T00:09:45.620
> 
> 标签：c, unix, shared-memory

一周前我开始了解和使用信号量和共享内存，并实际创建了这个程序；问题是我找不到任何问题。我已经看了好几个小时，一切似乎都是正确的。代码编译，我可以创建构建但是当我执行它时没有任何反应。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/ipc.h> 
#include <sys/shm.h>
#include <stdio.h>
#include <sys/fcntl.h>
#include <semaphore.h>

#define MAXCHILDS 4
#define MAX_SIZE 10
#define MAX_WRITES 4

typedef struct{
    int m[MAX_SIZE][MAX_SIZE];
} matrix;

/*fork variables*/
pid_t child[MAXCHILDS];
/*semphores variables */
sem_t *empty, *full, * mutex;
/*share memory id*/
int shmid;
/*shared memory array pointer */
matrix * sh_mem;
/*pointer to matrix*/
int **p;

void init(){
      /*create pointer to matrix*/
      p = &sh_mem->m;
     /*semaphores unlink and creation */    
     sem_unlink("EMPTY");
     empty=sem_open("EMPTY",O_CREAT|O_EXCL,0700,MAX_WRITES);
     sem_unlink("FULL");
     full=sem_open("FULL",O_CREAT|O_EXCL,0700,0);
     sem_unlink("MUTEX");
     mutex=sem_open("MUTEX",O_CREAT|O_EXCL,0700,1);
    /*initialize shared memory */
    shmid = shmget(IPC_PRIVATE,sizeof(matrix),IPC_CREAT|0777);
    /*map shared memory*/
    sh_mem = (matrix*)shmat(shmid,NULL,0);
    if(sh_mem== (matrix*)(-1)){
        perror("shmat");
    }
}

void writer(int ** m){
    int i,k;
    for(i = 0;i<MAX_SIZE;i++){
        for(k= 0;k<MAX_SIZE;k++){
            m[i][k] = 0;
        }
    }
}

void reader(int **m){
    int i = 0;
    int k = 0;
    for(i = 0;i<MAX_SIZE;i++){
        for(k= 0;k<MAX_SIZE;k++){
            printf(m[i][k]);
        }
        printf("\n");
    }
}

void terminate() {
  sem_close(empty);
  sem_close(full);
  sem_close(mutex);
  sem_unlink("EMPTY");
  sem_unlink("FULL");
  sem_unlink("MUTEX");
  shmctl(shmid, IPC_RMID, NULL);
}

int main(int argc, char **argv)
{
    int i;
    init();

    for(i = 0;i<MAXCHILDS;i++){
        if ((child[i] = fork()) < 0) // error occured
        {
            perror("Fork Failed");
            exit(1);
        }
        if ((child[i] = fork())==0){
            writer(sh_mem->m);
            exit(0);
        }
    }
    /*father*/  
    reader(sh_mem->m);
    wait(NULL);

    terminate();

    return 0;
} 
```

孩子们应该在共享内存中写入矩阵，父亲应该读取共享内存数组并打印矩阵。你能帮我解决这个问题吗？谢谢您的帮助 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:53:16.693

这里的主要错误是，`reader`并`writer`采用与传递给它们不同类型的参数，正如`gcc -Wall`指出的那样：

```
test.c: In function ‘main’:
test.c:92:13: warning: passing argument 1 of ‘writer’ from incompatible pointer type [enabled by default]
test.c:49:6: note: expected ‘int **’ but argument is of type ‘int (*)[10]’
test.c:97:5: warning: passing argument 1 of ‘reader’ from incompatible pointer type [enabled by default]
test.c:58:6: note: expected ‘int **’ but argument is of type ‘int (*)[10]’ 
```

如所提供的，该程序在父母和每个孩子中都有段错误。据我所知，当我将参数类型`reader`和`writer`from更改`int **m`为（以及下面的修复程序）时，程序成功运行。`int m[MAX_SIZE][MAX_SIZE]`

还有许多其他错误：

*   你需要`#include <sys/wait.h>`。
*   未使用全局`int **p`，其初始化与读取器和写入器函数具有相同的类型错误。
*   `printf`调用需要一个`reader`格式字符串；我用过`"%d "`。
*   正如 Jonathan Leffler 指出的那样，您`fork()`每次只需在`main`.

除了最后一个之外，所有这些都被编译器警告突出显示。

在研究这个程序失败的原因时，我还用来`strace -f`确定哪些系统调用和进程实际上被破坏了。例如，与信号量相关的系统调用似乎正在成功返回——尽管正如 Jonathan 指出的那样，您应该检查它们的返回值是否有错误，因为尽早失败会使调试问题变得更加容易。

# serial-port - Arduino COM 端口不起作用

> ID：13224360
> 
> 赞同：15
> 
> 时间：2012-11-05T00:10:01.377
> 
> 标签：serial-port, arduino

我最近买了一个 Arduino Uno。获得必要的电缆后，我决定将示例上传到芯片。

我没有看到闪烁，而是收到了一个错误，例如`processing.app.SerialException: Serial port 'COM1' not found. Did you select the right one from the Tools > Serial Port menu?`

是的，我试过了。但即使串行端口监视器似乎也没有打开。再说一次，我得到了一些不值得一提的例外。

在我发现我的串行 COM 端口不起作用（通过 Portmon.exe），并发现我什至可能没有任何（设备管理器中没有 COM 端口）后，我还尝试下载驱动程序用于 COM 端口，但它也失败了。

有人说是因为我的 Acer Aspire 5742 的主板。有人说原因是Windows 7。

长话短说，如果有人能帮助我解决我的 COM 端口问题并修补我破碎的梦想，我将不胜感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-23T15:31:58.380

在 Windows 8 / 7 中安装 Arduino 驱动程序。

（我为 Uno r3 尝试过，但我相信它适用于所有 Arduino 板）

插入您的 Arduino 板

转到**控制面板**--->**系统和安全**--->**系统**--->在左侧窗格中的**设备管理器**

展开**其他设备**。

在其他设备下，您会注意到一个带有**黄色小错误图形**的图标。（拔下连接到任何串行端口的所有其他设备）

右键单击该设备--->**更新驱动程序软件**

选择**浏览我的电脑以获取驱动程序软件**

点击 Browse ---> Browse 找到您从 Arduino 网站下载**的 Arduino Environmen t 文件夹。**如果没有下载，那么[http://arduino.cc/en/Main/Software](http://arduino.cc/en/Main/Software)

浏览**标记后包括子文件夹**。

单击下一步--->您的驱动程序将被安装。

Collapse Other Devices ---> **Expand Port**（它在设备管理器中只在其他设备下）

你会看到 Arduino Written ---> 寻找它的 COM PORT（关闭设备管理器）

转到**Arduino环境**--->**工具**--->**串行端口**--->选择设备管理器中端口中提到的**COM端口。**（如果您使用任何其他 Arduino Board 而不是 UNO，则在 board 中选择相同的）

上传您的杀手级程序并查看它们的工作情况。. .

我希望这**会有所帮助**。. .

**欢迎**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T13:55:26.233

你安装驱动了吗？请参阅#4 下的 Arduino[安装说明。](http://arduino.cc/en/Guide/Windows)我不知道那台机器，但我怀疑它没有*任何*COM 端口。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-28T21:43:07.860

我已经安装了我的驱动程序，并且通过一个无源 USB 集线器连接了 Arduino。将它移动到我电脑的 USB 端口使其工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-24T23:10:11.553

摘要：如何解决fedora 17中“找不到串行端口'COM1'”的步骤。

今天在 Fedora 17 中安装 Arduino 的软件包。（yum install arduino）我有同样的问题：我决定上传一个示例到芯片。并得到相同的错误“找不到串行端口'COM1'”。

在这种情况下，当我运行 Arduino 程序时，会出现一些横幅，警告我我的用户不在“拨出”和“锁定”组中。你想在这个组中添加你的用户吗？我单击添加按钮，但由于某种原因程序失败并且什么也没说。

**第一步**：识别 Arduino 设备拔下你的 Arduino 并列出 /dev 文件：

```
#ls -l /dev 
```

插入你的 Arduino 并列出 /dev 文件

```
#ls -l /dev 
```

查找插入之前没有的新文件（设备），例如：

> ttyACM0 或 ttyUSB1

阅读此属性：

```
ls -l /dev/ttyACM0

crw-rw---- 1 root dialout 166, 0 Dec 24 19:25 /dev/ttyACM0 
```

第一个 c 表示 Arduino 是字符设备。

用户所有者：root

群主：拨出

市长人数：166

次要号码：0

**Step2**：将您的用户设置为组所有者。

如果你这样做：

```
groups <yourUser> 
```

而且您不在“拨出”和/或“锁定”组中。将自己添加到此组中以 root 身份运行：

```
usermod -aG lock <yourUser>
usermod -aG dialout <yourUser> 
```

重启电脑，`/dev/<yourDeviceFile>`上传前设置为你的串口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-27T02:42:45.290

不需要拔掉插头，只需卸载您的端口，重新启动并再次安装驱动程序。您将在 LPT & PORT 部分下看到 arduino COM 端口。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-21T14:22:58.063

此修复/解决方案对我有用：设备管理器->端口->右键单击Arduino Uno->更新驱动程序软件->自动搜索更新的驱动程序软件

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-07-11T08:56:59.920

我重新启动了计算机，然后再次打开了 IDE，它可以正常工作，而上述方法都没有。

也许您也必须执行上述操作，但请确保也重新启动计算机。

# jquery - 更改 Fancybox 的背景颜色

> ID：13224361
> 
> 赞同：1
> 
> 时间：2012-11-05T00:10:03.323
> 
> 标签：jquery, html, css, fancybox

我想让 Fancybox 的背景颜色透明。

显而易见的方法是在你的 CSS 中使用“.fancybox-skin”，但这会影响所有的花式框，我需要它来改变。因此需要使用 wrapCSS 发送设置。

Fancybox有一个参数“wrapCSS”，可以通过原始js调用传入，但我不知道如何使用它。它只是说“字符串”： http: [//fancyapps.com/fancybox/#useful](http://fancyapps.com/fancybox/#useful)

我一直在尝试传递 CSS `{wrapCSS: "background: red"}`，但它不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:16:57.000

使用 wrapCSS 添加一个类，然后在你的 CSS 中：

```
.whateverYouChooseforWrapCSS .fancybox-skin {
  background: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T15:10:17.017

为 bg 使用 css：

```
#fancy_bg
{
    background-color:000000 !important;
} 
```

# python - Python中的主成分分析（PCA）

> ID：13224362
> 
> 赞同：80
> 
> 时间：2012-11-05T00:10:11.793
> 
> 标签：python, scikit-learn, pca

我有一个 (26424 x 144) 数组，我想使用 Python 对其执行 PCA。但是，网络上没有特定的地方可以解释如何完成此任务（有些网站只是根据自己的方式进行 PCA - 我找不到通用的方法）。任何有任何帮助的人都会做得很好。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-11-05T00:48:03.210

即使已经接受了另一个答案，我还是发布了我的答案；接受的答案依赖于[已弃用的功能](http://matplotlib.org/api/mlab_api.html?highlight=mlab#deprecated-functions)；此外，这个已弃用的函数基于*奇异值分解*(SVD)，它（尽管完全有效）是计算 PCA 的两种通用技术中更占用内存和处理器的。由于 OP 中数据数组的大小，这在这里特别重要。使用基于协方差的 PCA，计算流程中使用的数组仅为*144 x 144*，而不是*26424 x 144*（原始数据数组的维度）。

*这是使用来自SciPy的****linalg***模块的 PCA 的简单工作实现。因为这个实现首先计算协方差矩阵，然后在这个数组上执行所有后续计算，所以它使用的内存远少于基于 SVD 的 PCA。

 **（除了 import 语句之外， NumPy*中的 linalg 模块也可以在下面的代码中不做任何更改的情况下使用，这将是*from numpy import linalg as LA*。）

此 PCA 实施的两个关键步骤是：

*   计算***协方差矩阵***；和

*   取这个*cov*矩阵的***eivenvectors*** & ***eigenvalues***

 *在下面的函数中，参数**dims_rescaled_data**指的是重新缩放的数据矩阵中所需的维*数*；此参数的默认值只有二维，但下面的代码不限于二维，它可以是小于原始数据数组列号的*任何值。*

* * *

```
def PCA(data, dims_rescaled_data=2):
    """
    returns: data transformed in 2 dims/columns + regenerated original data
    pass in: data as 2D NumPy array
    """
    import numpy as NP
    from scipy import linalg as LA
    m, n = data.shape
    # mean center the data
    data -= data.mean(axis=0)
    # calculate the covariance matrix
    R = NP.cov(data, rowvar=False)
    # calculate eigenvectors & eigenvalues of the covariance matrix
    # use 'eigh' rather than 'eig' since R is symmetric, 
    # the performance gain is substantial
    evals, evecs = LA.eigh(R)
    # sort eigenvalue in decreasing order
    idx = NP.argsort(evals)[::-1]
    evecs = evecs[:,idx]
    # sort eigenvectors according to same index
    evals = evals[idx]
    # select the first n eigenvectors (n is desired dimension
    # of rescaled data array, or dims_rescaled_data)
    evecs = evecs[:, :dims_rescaled_data]
    # carry out the transformation on the data using eigenvectors
    # and return the re-scaled data, eigenvalues, and eigenvectors
    return NP.dot(evecs.T, data.T).T, evals, evecs

def test_PCA(data, dims_rescaled_data=2):
    '''
    test by attempting to recover original data array from
    the eigenvectors of its covariance matrix & comparing that
    'recovered' array with the original data
    '''
    _ , _ , eigenvectors = PCA(data, dim_rescaled_data=2)
    data_recovered = NP.dot(eigenvectors, m).T
    data_recovered += data_recovered.mean(axis=0)
    assert NP.allclose(data, data_recovered)

def plot_pca(data):
    from matplotlib import pyplot as MPL
    clr1 =  '#2026B2'
    fig = MPL.figure()
    ax1 = fig.add_subplot(111)
    data_resc, data_orig = PCA(data)
    ax1.plot(data_resc[:, 0], data_resc[:, 1], '.', mfc=clr1, mec=clr1)
    MPL.show()

>>> # iris, probably the most widely used reference data set in ML
>>> df = "~/iris.csv"
>>> data = NP.loadtxt(df, delimiter=',')
>>> # remove class labels
>>> data = data[:,:-1]
>>> plot_pca(data) 
```

下图是这个 PCA 函数在虹膜数据上的直观表示。如您所见，2D 转换将 I 类与 II 类和 III 类清晰地分开（但 II 类与 III 类没有区别，这实际上需要另一个维度）。

![在此处输入图像描述](../Images/eeb310a8bc9bfec954777ed26ec51b0c.png)

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-11-05T00:42:25.803

您可以在 matplotlib 模块中找到一个 PCA 函数：

```
import numpy as np
from matplotlib.mlab import PCA

data = np.array(np.random.randint(10,size=(10,3)))
results = PCA(data) 
```

结果将存储 PCA 的各种参数。它来自 matplotlib 的 mlab 部分，它是与 MATLAB 语法的兼容层

编辑：在博客[nextgenetics](http://blog.nextgenetics.net/?e=42)上，我发现了如何使用 matplotlib mlab 模块执行和显示 PCA 的精彩演示，玩得开心并查看该博客！

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2015-01-13T23:16:36.977

另一个使用 numpy 的 Python PCA。与@doug 相同的想法，但没有运行。

```
from numpy import array, dot, mean, std, empty, argsort
from numpy.linalg import eigh, solve
from numpy.random import randn
from matplotlib.pyplot import subplots, show

def cov(X):
    """
    Covariance matrix
    note: specifically for mean-centered data
    note: numpy's `cov` uses N-1 as normalization
    """
    return dot(X.T, X) / X.shape[0]
    # N = data.shape[1]
    # C = empty((N, N))
    # for j in range(N):
    #   C[j, j] = mean(data[:, j] * data[:, j])
    #   for k in range(j + 1, N):
    #       C[j, k] = C[k, j] = mean(data[:, j] * data[:, k])
    # return C

def pca(data, pc_count = None):
    """
    Principal component analysis using eigenvalues
    note: this mean-centers and auto-scales the data (in-place)
    """
    data -= mean(data, 0)
    data /= std(data, 0)
    C = cov(data)
    E, V = eigh(C)
    key = argsort(E)[::-1][:pc_count]
    E, V = E[key], V[:, key]
    U = dot(data, V)  # used to be dot(V.T, data.T).T
    return U, E, V

""" test data """
data = array([randn(8) for k in range(150)])
data[:50, 2:4] += 5
data[50:, 2:5] += 5

""" visualize """
trans = pca(data, 3)[0]
fig, (ax1, ax2) = subplots(1, 2)
ax1.scatter(data[:50, 0], data[:50, 1], c = 'r')
ax1.scatter(data[50:, 0], data[50:, 1], c = 'b')
ax2.scatter(trans[:50, 0], trans[:50, 1], c = 'r')
ax2.scatter(trans[50:, 0], trans[50:, 1], c = 'b')
show() 
```

产生与更短的相同的东西

```
from sklearn.decomposition import PCA

def pca2(data, pc_count = None):
    return PCA(n_components = 4).fit_transform(data) 
```

据我了解，使用特征值（第一种方式）对于高维数据和更少的样本更好，而如果样本比维度更多，则使用奇异值分解更好。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-11-05T00:24:49.993

这是一份工作`numpy`。

这是一个教程，演示如何使用`numpy`的内置模块（如`mean,cov,double,cumsum,dot,linalg,array,rank`.

[http://glowingpython.blogspot.sg/2011/07/principal-component-analysis-with-numpy.html](http://glowingpython.blogspot.sg/2011/07/principal-component-analysis-with-numpy.html)

请注意，`scipy`这里也有很长的解释 - [https://github.com/scikit-learn/scikit-learn/blob/babe4a5d0637ca172d47e1dfdd2f6f3c3ecb28db/scikits/learn/utils/extmath.py#L105](https://github.com/scikit-learn/scikit-learn/blob/babe4a5d0637ca172d47e1dfdd2f6f3c3ecb28db/scikits/learn/utils/extmath.py#L105)

`scikit-learn`图书馆有更多 的代码示例 - [https://github.com/scikit-learn/scikit-learn/blob/babe4a5d0637ca172d47e1dfdd2f6f3c3ecb28db/scikits/learn/utils/extmath.py#L105](https://github.com/scikit-learn/scikit-learn/blob/babe4a5d0637ca172d47e1dfdd2f6f3c3ecb28db/scikits/learn/utils/extmath.py#L105)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-01-02T22:29:58.263

这是 scikit-learn 选项。在这两种方法中，都使用了 StandardScaler，因为[PCA 受比例影响](http://scikit-learn.org/stable/auto_examples/preprocessing/plot_scaling_importance.html#sphx-glr-auto-examples-preprocessing-plot-scaling-importance-py)

方法 1：让 scikit-learn 选择**最小**数量的主成分，以便保留至少 x%（在下面的示例中为 90%）的方差。

```
from sklearn.datasets import load_iris
from sklearn.decomposition import PCA
from sklearn.preprocessing import StandardScaler

iris = load_iris()

# mean-centers and auto-scales the data
standardizedData = StandardScaler().fit_transform(iris.data)

pca = PCA(.90)

principalComponents = pca.fit_transform(X = standardizedData)

# To get how many principal components was chosen
print(pca.n_components_) 
```

方法 2：选择主成分的数量（在本例中，选择 2）

```
from sklearn.datasets import load_iris
from sklearn.decomposition import PCA
from sklearn.preprocessing import StandardScaler

iris = load_iris()

standardizedData = StandardScaler().fit_transform(iris.data)

pca = PCA(n_components=2)

principalComponents = pca.fit_transform(X = standardizedData)

# to get how much variance was retained
print(pca.explained_variance_ratio_.sum()) 
```

来源：[https ://towardsdatascience.com/pca-using-python-scikit-learn-e653f8989e60](https://towardsdatascience.com/pca-using-python-scikit-learn-e653f8989e60)

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-01-27T15:21:26.307

**更新：** `matplotlib.mlab.PCA`自 2.2 版（2018-03-06）以来确实[已弃用](https://matplotlib.org/api/mlab_api.html#matplotlib.mlab.PCA)。

~~该库`matplotlib.mlab.PCA`（在[此答案](https://stackoverflow.com/a/13224566/2771733)中使用）**未被**弃用。因此，对于所有通过 Google 来到这里的人，我将发布一个使用 Python 2.7 测试的完整工作示例。~~

小心使用以下代码，因为它使用了现已弃用的库！

```
from matplotlib.mlab import PCA
import numpy
data = numpy.array( [[3,2,5], [-2,1,6], [-1,0,4], [4,3,4], [10,-5,-6]] )
pca = PCA(data) 
```

现在在“pca.Y”中是主成分基向量的原始数据矩阵。可以在[此处](https://www.clear.rice.edu/comp130/12spring/pca/pca_docs.shtml)找到有关 PCA 对象的更多详细信息。

```
>>> pca.Y
array([[ 0.67629162, -0.49384752,  0.14489202],
   [ 1.26314784,  0.60164795,  0.02858026],
   [ 0.64937611,  0.69057287, -0.06833576],
   [ 0.60697227, -0.90088738, -0.11194732],
   [-3.19578784,  0.10251408,  0.00681079]]) 
```

您可以使用`matplotlib.pyplot`来绘制这些数据，只是为了让自己相信 PCA 会产生“好”的结果。该`names`列表仅用于注释我们的五个向量。

```
import matplotlib.pyplot
names = [ "A", "B", "C", "D", "E" ]
matplotlib.pyplot.scatter(pca.Y[:,0], pca.Y[:,1])
for label, x, y in zip(names, pca.Y[:,0], pca.Y[:,1]):
    matplotlib.pyplot.annotate( label, xy=(x, y), xytext=(-2, 2), textcoords='offset points', ha='right', va='bottom' )
matplotlib.pyplot.show() 
```

查看我们的原始向量，我们会看到 data[0] ("A") 和 data[3] ("D") 非常相似，data[1] ("B") 和 data[2] (" C”）。这反映在我们的 PCA 转换数据的 2D 图中。

[![PCA 结果图](../Images/570e8b90a8c8b1b4906eb5e74b589a8f.png)](https://i.stack.imgur.com/gYtfR.png)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-05-28T19:34:09.307

## 除了所有其他答案之外，这里还有一些用于绘制`biplot`using`sklearn`和`matplotlib`.

```
import numpy as np
import matplotlib.pyplot as plt
from sklearn import datasets
from sklearn.decomposition import PCA
import pandas as pd
from sklearn.preprocessing import StandardScaler

iris = datasets.load_iris()
X = iris.data
y = iris.target
#In general a good idea is to scale the data
scaler = StandardScaler()
scaler.fit(X)
X=scaler.transform(X)    

pca = PCA()
x_new = pca.fit_transform(X)

def myplot(score,coeff,labels=None):
    xs = score[:,0]
    ys = score[:,1]
    n = coeff.shape[0]
    scalex = 1.0/(xs.max() - xs.min())
    scaley = 1.0/(ys.max() - ys.min())
    plt.scatter(xs * scalex,ys * scaley, c = y)
    for i in range(n):
        plt.arrow(0, 0, coeff[i,0], coeff[i,1],color = 'r',alpha = 0.5)
        if labels is None:
            plt.text(coeff[i,0]* 1.15, coeff[i,1] * 1.15, "Var"+str(i+1), color = 'g', ha = 'center', va = 'center')
        else:
            plt.text(coeff[i,0]* 1.15, coeff[i,1] * 1.15, labels[i], color = 'g', ha = 'center', va = 'center')
plt.xlim(-1,1)
plt.ylim(-1,1)
plt.xlabel("PC{}".format(1))
plt.ylabel("PC{}".format(2))
plt.grid()

#Call the function. Use only the 2 PCs.
myplot(x_new[:,0:2],np.transpose(pca.components_[0:2, :]))
plt.show() 
```

[![在此处输入图像描述](../Images/4a73eb8e7f65020a4959075f47b22867.png)](https://i.stack.imgur.com/pxul5.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-03T12:12:00.540

我制作了一个用于比较不同 PCA 的小脚本，作为答案出现在这里：

```
import numpy as np
from scipy.linalg import svd

shape = (26424, 144)
repeat = 20
pca_components = 2

data = np.array(np.random.randint(255, size=shape)).astype('float64')

# data normalization
# data.dot(data.T)
# (U, s, Va) = svd(data, full_matrices=False)
# data = data / s[0]

from fbpca import diffsnorm
from timeit import default_timer as timer

from scipy.linalg import svd
start = timer()
for i in range(repeat):
    (U, s, Va) = svd(data, full_matrices=False)
time = timer() - start
err = diffsnorm(data, U, s, Va)
print('svd time: %.3fms, error: %E' % (time*1000/repeat, err))

from matplotlib.mlab import PCA
start = timer()
_pca = PCA(data)
for i in range(repeat):
    U = _pca.project(data)
time = timer() - start
err = diffsnorm(data, U, _pca.fracs, _pca.Wt)
print('matplotlib PCA time: %.3fms, error: %E' % (time*1000/repeat, err))

from fbpca import pca
start = timer()
for i in range(repeat):
    (U, s, Va) = pca(data, pca_components, True)
time = timer() - start
err = diffsnorm(data, U, s, Va)
print('facebook pca time: %.3fms, error: %E' % (time*1000/repeat, err))

from sklearn.decomposition import PCA
start = timer()
_pca = PCA(n_components = pca_components)
_pca.fit(data)
for i in range(repeat):
    U = _pca.transform(data)
time = timer() - start
err = diffsnorm(data, U, _pca.explained_variance_, _pca.components_)
print('sklearn PCA time: %.3fms, error: %E' % (time*1000/repeat, err))

start = timer()
for i in range(repeat):
    (U, s, Va) = pca_mark(data, pca_components)
time = timer() - start
err = diffsnorm(data, U, s, Va.T)
print('pca by Mark time: %.3fms, error: %E' % (time*1000/repeat, err))

start = timer()
for i in range(repeat):
    (U, s, Va) = pca_doug(data, pca_components)
time = timer() - start
err = diffsnorm(data, U, s[:pca_components], Va.T)
print('pca by doug time: %.3fms, error: %E' % (time*1000/repeat, err)) 
```

pca_mark 是[Mark's answer 中的 pca](https://stackoverflow.com/a/27933271/3162918)。

pca_doug 是道[格答案中的 pca](https://stackoverflow.com/a/13224592/3162918)。

这是一个示例输出（但结果很大程度上取决于数据大小和 pca_components，因此我建议使用您自己的数据运行您自己的测试。此外，facebook 的 pca 针对标准化数据进行了优化，因此它会更快并且在这种情况下更准确）：

```
svd time: 3212.228ms, error: 1.907320E-10
matplotlib PCA time: 879.210ms, error: 2.478853E+05
facebook pca time: 485.483ms, error: 1.260335E+04
sklearn PCA time: 169.832ms, error: 7.469847E+07
pca by Mark time: 293.758ms, error: 1.713129E+02
pca by doug time: 300.326ms, error: 1.707492E+02 
```

**编辑：**

fbpca的[diffsnorm](https://fbpca.readthedocs.io/en/latest/index.html?highlight=diffsnorms#fbpca.diffsnorm)函数计算 Schur 分解的谱范数误差。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-15T19:29:10.267

这可能是人们可以为 PCA 找到的最简单的答案，包括易于理解的步骤。假设我们想要从 144 中保留 2 个主要维度，这提供了最大的信息。

首先，将您的二维数组转换为数据框：

```
import pandas as pd

# Here X is your array of size (26424 x 144)
data = pd.DataFrame(X) 
```

然后，有两种方法可以使用：

**方法一：手动计算**

第 1 步：在 X 上应用列标准化

```
from sklearn import preprocessing

scalar = preprocessing.StandardScaler()
standardized_data = scalar.fit_transform(data) 
```

第二步：求原始矩阵 X 的协方差矩阵 S

```
sample_data = standardized_data
covar_matrix = np.cov(sample_data) 
```

第 3 步：找到 S 的特征值和特征向量（这里是 2D，所以每个 2）

```
from scipy.linalg import eigh

# eigh() function will provide eigen-values and eigen-vectors for a given matrix.
# eigvals=(low value, high value) takes eigen value numbers in ascending order
values, vectors = eigh(covar_matrix, eigvals=(142,143))

# Converting the eigen vectors into (2,d) shape for easyness of further computations
vectors = vectors.T 
```

第 4 步：转换数据

```
# Projecting the original data sample on the plane formed by two principal eigen vectors by vector-vector multiplication.

new_coordinates = np.matmul(vectors, sample_data.T)
print(new_coordinates.T) 
```

这`new_coordinates.T`将是具有 2 个主成分的大小 (26424 x 2)。

**方法 2：使用 Scikit-Learn**

第 1 步：在 X 上应用列标准化

```
from sklearn import preprocessing

scalar = preprocessing.StandardScaler()
standardized_data = scalar.fit_transform(data) 
```

第 2 步：初始化 pca

```
from sklearn import decomposition

# n_components = numbers of dimenstions you want to retain
pca = decomposition.PCA(n_components=2) 
```

第 3 步：使用 pca 拟合数据

```
# This line takes care of calculating co-variance matrix, eigen values, eigen vectors and multiplying top 2 eigen vectors with data-matrix X.
pca_data = pca.fit_transform(sample_data) 
```

这`pca_data`将是具有 2 个主成分的大小 (26424 x 2)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-07T22:37:18.317

此示例代码加载日本收益率曲线，并创建 PCA 组件。然后，它使用 PCA 估计给定日期的移动，并将其与实际移动进行比较。

```
%matplotlib inline

import numpy as np
import scipy as sc
from scipy import stats
from IPython.display import display, HTML
import pandas as pd
import matplotlib
import matplotlib.pyplot as plt
import datetime
from datetime import timedelta

import quandl as ql

start = "2016-10-04"
end = "2019-10-04"

ql_data = ql.get("MOFJ/INTEREST_RATE_JAPAN", start_date = start, end_date = end).sort_index(ascending= False)

eigVal_, eigVec_ = np.linalg.eig(((ql_data[:300]).diff(-1)*100).cov()) # take latest 300 data-rows and normalize to bp
print('number of PCA are', len(eigVal_))

loc_ = 10
plt.plot(eigVec_[:,0], label = 'PCA1')
plt.plot(eigVec_[:,1], label = 'PCA2')
plt.plot(eigVec_[:,2], label = 'PCA3')
plt.xticks(range(len(eigVec_[:,0])), ql_data.columns)
plt.legend()
plt.show()

x = ql_data.diff(-1).iloc[loc_].values * 100 # set the differences
x_ = x[:,np.newaxis]
a1, _, _, _ = np.linalg.lstsq(eigVec_[:,0][:, np.newaxis], x_) # linear regression without intercept
a2, _, _, _ = np.linalg.lstsq(eigVec_[:,1][:, np.newaxis], x_)
a3, _, _, _ = np.linalg.lstsq(eigVec_[:,2][:, np.newaxis], x_)

pca_mv = m1 * eigVec_[:,0] + m2 * eigVec_[:,1] + m3 * eigVec_[:,2] + c1 + c2 + c3
pca_MV = a1[0][0] * eigVec_[:,0] + a2[0][0] * eigVec_[:,1] + a3[0][0] * eigVec_[:,2]
pca_mV = b1 * eigVec_[:,0] + b2 * eigVec_[:,1] + b3 * eigVec_[:,2]

display(pd.DataFrame([eigVec_[:,0], eigVec_[:,1], eigVec_[:,2], x, pca_MV]))
print('PCA1 regression is', a1, a2, a3)

plt.plot(pca_MV)
plt.title('this is with regression and no intercept')
plt.plot(ql_data.diff(-1).iloc[loc_].values * 100, )
plt.title('this is with actual moves')
plt.show() 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-17T18:02:35.383

为了`def plot_pca(data):`工作，有必要更换线路

```
data_resc, data_orig = PCA(data)
ax1.plot(data_resc[:, 0], data_resc[:, 1], '.', mfc=clr1, mec=clr1) 
```

有线条

```
newData, data_resc, data_orig = PCA(data)
ax1.plot(newData[:, 0], newData[:, 1], '.', mfc=clr1, mec=clr1) 
```**

# sql - SSRS - 钻取表达式

> ID：13224365
> 
> 赞同：0
> 
> 时间：2012-11-05T00:10:47.577
> 
> 标签：sql, reporting-services

这是我的向下钻取表达式....我设置向下钻取的字段有两个值 - 空置 - 占用

当空置时，它将执行此操作（它不会执行任何操作并停留在同一个报告上，即没有向下钻取。

=iif(Fields!status.Value = "Vacant", Nothing, Globals!ReportName)

但是当“被占用”时，我希望下钻启动另一个报告。这是报告的路径。

/RANNNIP/FYTR 报告/FYTRReport_Detail_drill

是否可以在同一个表达式中使用它？

这是我目前的表达方式 - 但显然不起作用

=iif(Fields!status.Value = "Vacant", Nothing, Globals!ReportName) & iif(Fields!status.Value = "Occupied", Globals!ReportFolder /RAN NGN/FYTR Reports/FYTRReport_Detail_drill)

# makefile - cmake cygwin make.exe 错误

> ID：13224368
> 
> 赞同：6
> 
> 时间：2012-11-05T00:11:09.090
> 
> 标签：makefile, cygwin, cmake

我遇到了 CMake 2.8.9 的问题。我使用图形用户界面。我尝试制作一个makefile（食人魔1.8）。
因为我有 Windows 7 x64，所以我将 CygWin 与 gcc.exe 和 g++.exe 以及 make.exe（位于 bin 目录中）一起使用。
当我尝试“配置”时，CMake 记录以下错误：

```
The C compiler identification is unknown
The CXX compiler identification is unknown
Check for working C compiler: G:/cygwin/bin/gcc.exe
Check for working C compiler: G:/cygwin/bin/gcc.exe -- broken
CMake Error at G:/Program Files/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):
The C compiler "G:/cygwin/bin/gcc.exe" is not able to compile a simple test program.

It fails with the following output:

Change Dir: H:/Ogre/gcc18/CMakeFiles/CMakeTmp

Run Build Command:G:/cygwin/bin/make.exe "cmTryCompileExec2682355191/fast"

/usr/bin/make -f CMakeFiles\cmTryCompileExec2682355191.dir\build.make
CMakeFiles/cmTryCompileExec2682355191.dir/build

D e r B e f e h l " m T r y C o m p i l e E x e c 2 6 8 2 3 5 5 1 9 1 .  d i r " i s t e n t w e d e r f a l s c h g e s c h r i e b e n o d e r  k o n n t e   n i c h t   g e f u n d e n   w e r d e n . 

makeMakefile:116: recipe for target `cmTryCompileExec2682355191/fast' failed

: *** [cmTryCompileExec2682355191/fast] Error 1

CMake will not be able to correctly generate this project.
Call Stack (most recent call first):
CMakeLists.txt:44 (project)

Configuring incomplete, errors occurred! 
```

而 D er B efehl " m T ry C ompil e.......
表示“命令 "mTryCompile......" 拼写错误或找不到

```
$ make -version
GNU Make 3.82.90
Built for i686-pc-cygwin
Copyright (C) 2010  Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law. 
```

```
gcc-Version 4.5.3 (GCC) 
```

我的缓存如下所示：

```
//Path to a program.
CMAKE_AR:FILEPATH=G:/cygwin/bin/ar.exe

//Choose the type of build, options are: None(CMAKE_CXX_FLAGS or
// CMAKE_C_FLAGS used) Debug Release RelWithDebInfo MinSizeRel.
CMAKE_BUILD_TYPE:STRING=

//Enable/Disable color output during build.
CMAKE_COLOR_MAKEFILE:BOOL=ON

//CXX compiler.
CMAKE_CXX_COMPILER:FILEPATH=G:/cygwin/bin/g++.exe

//C compiler.
CMAKE_C_COMPILER:FILEPATH=G:/cygwin/bin/gcc.exe

//Flags used by the compiler during all build types.
CMAKE_C_FLAGS:STRING=

//Flags used by the compiler during debug builds.
CMAKE_C_FLAGS_DEBUG:STRING=

//Flags used by the compiler during release minsize builds.
CMAKE_C_FLAGS_MINSIZEREL:STRING=

//Flags used by the compiler during release builds (/MD /Ob1 /Oi
// /Ot /Oy /Gs will produce slightly less optimized but smaller
// files).
CMAKE_C_FLAGS_RELEASE:STRING=

//Flags used by the compiler during Release with Debug Info builds.
CMAKE_C_FLAGS_RELWITHDEBINFO:STRING=

//Flags used by the linker.
CMAKE_EXE_LINKER_FLAGS:STRING=' '

//Flags used by the linker during debug builds.
CMAKE_EXE_LINKER_FLAGS_DEBUG:STRING=

//Flags used by the linker during release minsize builds.
CMAKE_EXE_LINKER_FLAGS_MINSIZEREL:STRING=

//Flags used by the linker during release builds.
CMAKE_EXE_LINKER_FLAGS_RELEASE:STRING=

//Flags used by the linker during Release with Debug Info builds.
CMAKE_EXE_LINKER_FLAGS_RELWITHDEBINFO:STRING=

//Install path prefix, prepended onto install directories.
CMAKE_INSTALL_PREFIX:PATH=C:/Program Files (x86)/OGRE

//Path to a program.
CMAKE_LINKER:FILEPATH=G:/cygwin/bin/ld.exe

//Path to a program.
CMAKE_MAKE_PROGRAM:FILEPATH=G:/cygwin/bin/make.exe

//Flags used by the linker during the creation of modules.
CMAKE_MODULE_LINKER_FLAGS:STRING=' '

//Flags used by the linker during debug builds.
CMAKE_MODULE_LINKER_FLAGS_DEBUG:STRING=

//Flags used by the linker during release minsize builds.
CMAKE_MODULE_LINKER_FLAGS_MINSIZEREL:STRING=

//Flags used by the linker during release builds.
CMAKE_MODULE_LINKER_FLAGS_RELEASE:STRING=

//Flags used by the linker during Release with Debug Info builds.
CMAKE_MODULE_LINKER_FLAGS_RELWITHDEBINFO:STRING=

//Path to a program.
CMAKE_NM:FILEPATH=G:/cygwin/bin/nm.exe

//Path to a program.
CMAKE_OBJCOPY:FILEPATH=G:/cygwin/bin/objcopy.exe

//Path to a program.
CMAKE_OBJDUMP:FILEPATH=G:/cygwin/bin/objdump.exe

//Value Computed by CMake
CMAKE_PROJECT_NAME:STATIC=OGRE

//Path to a program.
CMAKE_RANLIB:FILEPATH=G:/cygwin/bin/ranlib.exe

//Path to a program.
CMAKE_SH:FILEPATH=G:/cygwin/bin/sh.exe

//Flags used by the linker during the creation of dll's.
CMAKE_SHARED_LINKER_FLAGS:STRING=' '

//Flags used by the linker during debug builds.
CMAKE_SHARED_LINKER_FLAGS_DEBUG:STRING=

//Flags used by the linker during release minsize builds.
CMAKE_SHARED_LINKER_FLAGS_MINSIZEREL:STRING=

//Flags used by the linker during release builds.
CMAKE_SHARED_LINKER_FLAGS_RELEASE:STRING=

//Flags used by the linker during Release with Debug Info builds.
CMAKE_SHARED_LINKER_FLAGS_RELWITHDEBINFO:STRING=

//If set, runtime paths are not added when installing shared libraries,
// but are added when building.
CMAKE_SKIP_INSTALL_RPATH:BOOL=OFF

//If set, runtime paths are not added when using shared libraries.
CMAKE_SKIP_RPATH:BOOL=OFF

//Path to a program.
CMAKE_STRIP:FILEPATH=G:/cygwin/bin/strip.exe

//If true, cmake will use relative paths in makefiles and projects.
CMAKE_USE_RELATIVE_PATHS:BOOL=ON

//If this value is on, makefiles will be generated without the
// .SILENT directive, and all commands will be echoed to the console
// during the make.  This is useful for debugging only. With Visual
// Studio IDE projects all commands are done without /nologo.
CMAKE_VERBOSE_MAKEFILE:BOOL=OFF

CYGWIN:BOOL=ON

//Value Computed by CMake
OGRE_BINARY_DIR:STATIC=H:/Ogre/gcc18

//Value Computed by CMake
OGRE_SOURCE_DIR:STATIC=H:/Ogre/ogre_src_v1-8-1/ogre_src_v1-8-1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T07:43:11.770

在 Cygwin 下，您不能使用常规的 Windows CMake 安装。您必须使用 Cygwin 安装程序安装 UNIX 版本的 CMake。

# python - 如何在python中使用类

> ID：13224369
> 
> 赞同：0
> 
> 时间：2012-11-05T00:11:12.997
> 
> 标签：python, class

我有一个书单和用户对该书的评分列表。

[用户1,2,1,3,6]..
[用户2,4,1,4 2]..

[Book1,Book2,Book3,Book4]
评分从 (1-4)

例如，如果书 1 是“教皇”
，则该书的排名为 [3,3,3,2]
，打印输出为教皇 [3,3,3,2] []

使用类

这是我班级的布置。

```
class Book(object):
      booktotal=0
      accept=[]
      def __init__(self, Title= " ", Rating=()):
          self.scale=[1,2,3,4]
          self.book = Title
          self.rating= Rating
          self.accept=[]
          book.population +=1
      def AddRating(self,rating):
          if rating in self.scale:
              accepted.append(rating)
          else:
              pass

          return self.accept

      def Average(self):
          Avg=sum[accept]/3

      def __str__(self):
          return '{0} - {1} - {2}'.format(self.book, self.rating,self.accept) 
```

我如何让它打印出平均和评论数量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:25:38.717

你所拥有的东西可以大大减少。

*   `population`没有在任何地方定义。所以这是一个错误。
*   你的平均计算是错误的。它只需要在`__str__`方法中计算。
*   使用该`len`函数获取列表中元素的数量。

    ```
    class Book(object):               
      scale=(1,5)

      def __init__(self, title):        
          self.title = title
          self.ratings = []

      def rate(self,rating):
          if rating in range(self.scale[0]-1, self.scale[1]+1):
              self.ratings.append(rating)

      def __str__(self):
          return '"{0}" rates an average of {1} from {2} reviews.'.format(
             self.title, sum(self.ratings)/float(len(self.ratings)), len(self.ratings))

    >> mybook = Book('Zen of Python')
    >> mybook.rate(5)
    >> mybook.rate(3)
    >> mybook.rate(5)
    >> str(mybook)
    >> "Zen of Python" rate an average of 4.333333333 from 3 reviews. 
    ```

# android - android将复合布局捕获到位图

> ID：13224373
> 
> 赞同：1
> 
> 时间：2012-11-05T00:12:24.550
> 
> 标签：android, layout, bitmap, capture

我需要将多滚动（这意味着它不是单个屏幕布局，它需要滚动才能看到完整内容）捕获到位图。我成功地使用以下代码模式来捕获屏幕大小的屏幕布局：

```
renderingView.buildDrawingCache(true);
Bitmap bmpForSend = renderingView.getDrawingCache(true).copy(Config.RGB_565, false);
renderingView.destroyDrawingCache(); 
```

其中 renderingView 是由许多 View/Layouts 组成的顶层布局。我不想尝试以捕获->滚动->捕获的方式执行此操作...必须有另一种方法来执行此操作。

# c - 伯克利套接字通信，发送和接收结构

> ID：13224374
> 
> 赞同：0
> 
> 时间：2012-11-05T00:13:07.020
> 
> 标签：c, struct, berkeley-sockets

我有一个任务，我要为游戏实现一个得分服务器。游戏完成后，游戏将发送（）玩家姓名（char *name）和得分（int score）到服务器进行注册，receive（），服务器将发送回5个最高分。

我们将使用 Berkeley 套接字和 C。在阅读和研究了一些示例之后，我只能找到只发送单个变量的示例。

```
write(sd, "Hello World", 12);

char buf[13];
read(sd, buf, 12);
buf[12] = '\0'; 
```

通常做什么？发送每个变量（名称和分数）是单独的 write() 函数，还是创建一个包含两个变量的结构？

在阅读了**Beej 的网络编程指南**之后，我遇到了我必须考虑的字节顺序（大/小端序）问题，这在第*7.4 节序列化 - 如何打包数据*下显示，除了在所有示例代码包中它们浮动和单个变量，有没有办法打包整个结构？

还有一节*7.5 Sone of Data Encapsulation*涉及创建一个描述客户端和服务器如何通信的协议，对我来说，这看起来更像一个结构，我不会做，但是没有显示原理的代码。

* * *

简而言之：我想在服务器和客户端之间建立稳定的通信，在这里我交换的不仅仅是单个变量，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:26:26.370

在网络通信中，没有变量或结构的概念。你正在做的是发送一个字节序列。

所以发送结构体的思路，和发送单个值是一样的：将结构体转换成字节序列（序列化），写入socket，在另一端，将字节序列转换回结构体（反序列化）。

所以现在你的问题变成了序列化之一：我如何序列化一个结构？

这只是序列化结构的各个值的组成。

> 更常见的是什么

通常您希望减少网络流量。因此，如果您有所有要预先发送的数据，那么一次发送会更有效，然后通过单独发送每个名称/分数对来手动分块数据。

# java - 从文件读取到数组时出错

> ID：13224375
> 
> 赞同：1
> 
> 时间：2012-11-05T00:13:19.170
> 
> 标签：java, arrays, file

我正在尝试从文件中读取并将文件中的每一行添加到我的数组“Titles”中，但不断收到错误消息：

> 线程“主”java.lang.ArrayIndexOutOfBoundsException 中的异常：0

有任何想法吗？由于行读取，我收到错误：

```
 Titles[lineNum] = m_line; 
```

**我的代码：**

```
String[] Titles={};
int lineNum;            
m_fileReader = new BufferedReader(new FileReader("random_nouns.txt"));
m_line = m_fileReader.readLine();           
while (m_line != null)              
{       
        Titles[lineNum] = m_line;               
        m_line = m_fileReader.readLine();               
        lineNum++;              
} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:19:37.203

数组索引从 0 开始。如果数组的长度为 N，则最后一个索引将为 N-1。当前您的数组的长度为零，并且您正在尝试访问索引 0 处的元素（确实存在）。

```
String[] Titles={};//length zero 
```

在你的while循环中

```
 Titles[lineNum] = m_line;  //trying to access element at 0 index which doesnt exist. 
```

我建议您在您的情况下使用**ArrayList**而不是 Array 。因为 ArrayList 是动态的（你不必为它指定大小）

```
 List<String> titles = new ArrayList<String>();

       while (m_line != null)              
      {       
        titles.add(m_line);               
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:19:49.030

Array 不像 ArrayList 那样可增长。在字符串数组中添加元素之前，您需要指定`String[]`

```
String titles[] = new String[total_lines] ; 
```

或者你可以简单地添加每一行`ArrayList`然后最后转换成一个像这样的数组

```
int totalLineNumbers;
ArrayList<String> list = new ArrayList();            
m_fileReader = new BufferedReader(new FileReader("random_nouns.txt"));                  m_line = m_fileReader.readLine();           
while (m_line != null)              
{       
        list.add(m_fileReader.readLine());

}
String titles[] = (String[]) list.toArray();
totalLineNumbers = titles.length ; 
```

# ubuntu - 在不使用 xdtool 或类似工具的情况下模拟 Ubuntu 终端中的按键

> ID：13224382
> 
> 赞同：2
> 
> 时间：2012-11-05T00:14:14.003
> 
> 标签：ubuntu, terminal, simulate

我想运行一个命令，然后“告诉”命令行按字母“M”

但我不能使用像 xdtool 这样的工具或额外的软件。

示例：top -n 1 然后 M（按）

有谁知道？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T14:19:08.760

没有简单的内置方式来编写像 top 这样的交互式工具。特别是`top -n 1`立即退出，所以它无论如何都不会听“M”命令。

但是，如果您想要的是哪些程序使用最多内存的列表，您可以使用非交互式`ps`工具以您喜欢的任何顺序生成列表。例如，下面的命令将按内存使用情况显示前 5 个程序：

```
ps -A -o %mem,args --sort -%mem | head -6 
```

`-A`意味着 ps 将检查所有正在运行的进程。

`-o %mem,args`意味着 ps 将打印它检查的每个进程的`%mem`（使用的内存占总内存的百分比）和（包括参数的完整命令行）。`args`

`--sort -%mem`表示 ps 将按`%mem`列按降序对结果进行排序（升序为`--sort %mem`）。

`| head -6`表示输出将通过`head`命令进行管道传输，配置为显示前 6 行输出（一行标题，加上列表中的前五个进程）。

# c - 指向结构的指针

> ID：13224383
> 
> 赞同：-1
> 
> 时间：2012-11-05T00:14:17.733
> 
> 标签：c, pointers

我正在做任务。我从结构开始：

```
struct figures_struct
{
    char figure_name[130];
    double figure_coordinates[1000000];
}; 
```

当我从文件中读取图形的名称时，我将其存储到结构中，如下所示：

```
strcpy(figures[i].figure_name,f_name); 
```

现在我必须修改我的代码并且需要使用动态内存。我做了：

```
struct figures_struct
{
    char figure_name[130];
    double figure_coordinates[100000];
};

struct figures_struct *figures = malloc(size * sizeof(struct figures_struct)); 
```

现在，如何将图形名称存储到我的结构中？`figures[i].figure_name`似乎没有工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:21:41.290

`strcpy(figures[i].figure_name, f_name);`

这仍然适用于指针（因为指针和数组在 C 中几乎可以互换）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:21:04.020

只要“i”小于“size”，它就会起作用。

# php - JSON & 符号转换导致错误

> ID：13224384
> 
> 赞同：1
> 
> 时间：2012-11-05T00:14:20.230
> 
> 标签：php, geocode, ampersand

当我尝试解析我的地理编码链接时，由于 amp; 陈述。在我“json_decode”字符串之前，我有一个名为 www.something.com/something?bla=bla&sensor=true 的链接，但是当我将它作为参数发送到函数时，它的 & 字符被转换为`&amp;`. 像这样的链接

```
http://maps.googleapis.com/maps/api/geocode/json?address=Bekirdere,%20%C4%B0zmir&sensor=true 
```

工作正常，但链接喜欢

```
http://maps.googleapis.com/maps/api/geocode/json?address=Bekkirdere,%20%C4%B0zmit&amp;sensor=true 
```

没有给出任何结果。(`&`转换为`&amp;`)

我怎样才能阻止它被转换？

我的解析器功能：

```
function get_url_contents($url) 
{
    $url = str_replace(' ', '%20', $url); 
    $crl = curl_init();
    $timeout = 5;
    curl_setopt ($crl, CURLOPT_URL,$url);
    curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
    $ret = curl_exec($crl);
    curl_close($crl);
    return $ret;
}

function __construct($url)
{
    $json = $this->get_url_contents($url);
    $this->_jsonArray = json_decode($json, true);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:23:42.913

PHP [urlencode()](http://php.net/manual/en/function.urlencode.php)函数比执行 str_replace 更好，您应该只对 URL 中作为 GET 值的部分进行编码；您不应该对整个 URL 进行编码，因为正如您所指出的，这也会对将变量彼此分开的 & 符号进行编码。

您需要像这样构建 URL：

```
$url = 'http://maps.googleapis.com/maps/api/geocode/json?address=';
$url .= urlencode('Bekirdere, Izmir');
$url .= '&sensor=true'; 
```

然后`curl`按上述方式拨打电话。

我已经测试了下面的测试脚本，它可以工作：

```
$url = 'http://maps.googleapis.com/maps/api/geocode/json?address=';
$url .= urlencode('Bekirdere, Izmir');
$url .= '&sensor=true';

$crl = curl_init();
$timeout = 5;
curl_setopt ($crl, CURLOPT_URL,$url);
curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
$ret = curl_exec($crl);
curl_close($crl);

$returned_data = json_decode($ret, true);
var_dump($returned_data); 
```

您需要将其放入您的代码结构或重构您的类以接收`$address`参数（例如，'Izmir, Turkey'）而不是完整的 URL（就像现在一样）。这样，您就可以在构建完整的 URL 以传递给`curl`.

# ruby - OptParse 中带有 2 个参数的选项

> ID：13224386
> 
> 赞同：2
> 
> 时间：2012-11-05T00:14:33.340
> 
> 标签：ruby, command-line-arguments, optparse

我正在尝试做一些看起来像这样的事情：

```
opt_parser = OptionParser.new do |opt|
    opt.banner = "Test"
    opt.separator ""
    opt.on("-t", "--test arg1 arg2", "Test") do |arg1, arg2|
        puts arg1
        puts arg2
    end
end 
```

问题是它返回`arg1`, 但`arg2`返回`nil`. 如何使这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T01:34:06.280

**为给定选项指定值列表**的公认方法是**重复该选项**（例如，C 编译器`-D`接受的选项），例如[`java`](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/java.html)

```
my_script.rb --test=arg1 --test=arg2 
```

在某些情况下，您的论点的性质可能是您可以负担得起**使用分隔符而不会引入歧义**（例如`-classpath`选项 to[`java`](http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/java.html)或更清楚地是`-o`选项 to [`ps`](http://linux.die.net/man/1/ps)），因此如果`arg1`并且`arg2`永远不能通常包含逗号`,`，那么您也可以接受例如

```
my_script.rb --test=arg1,arg2 
```

支持上述两种约定的代码将类似于以下内容：

```
require 'optparse'
...
test_vals = []
...
opt_parser = OptionParser.new do |opt|
    ...
    opt.on("-t", "--test=arg1[,...]", "Test") do |arg|
        test_vals += arg.split(',')
    end
    ...
end

opt_parser.parse!

puts test_vals.join("\n") 
```

然后：

```
$ my_script.rb --test=arg1 --test=arg2
arg1
arg2

$ my_script.rb --test=arg1,arg2
arg1
arg2

$ my_script.rb --test=arg1 --test=arg2,arg3
arg1
arg2
arg3 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-07T18:23:26.170

如果 vladr 的回答是可以接受的，另一种方法是`Array`作为第三个参数传递给`#on`：

```
require 'optparse'

test_vals = []

opt_parser = OptionParser.new do |opt|
  opt.banner = "Test"
  opt.separator ""
  opt.on("-t", "--test arg1[,...]", Array, "Test") do |args|
    test_vals += args
  end
end

opt_parser.parse!

puts test_vals.join("\n") 
```

# latex - R --markdown to latex - 表格不显示

> ID：13224390
> 
> 赞同：7
> 
> 时间：2012-11-05T00:15:03.347
> 
> 标签：latex, markdown, knitr, xtable, pandoc

我在 Rstudio 中使用 Knitr 来生成降价文件。我通过 xtable 包显示表格，它很好地显示在 html 文件中。但是，当我通过 pandoc 将 .md 转换为乳胶时-乳胶文件不包含应有的表格，而仅包含表格中的值而没有任何命令。

## Markdown - Knitr 输入

为了给出更好的思路，下表提供了数据行的示例：

```
```{r table, results='asis', echo=FALSE} 
r = read.table("C:/aR_files/data.txt",sep=",", header=TRUE,as.is=TRUE)
r$X = NULL;
print(xtable(r), type='html') 
``` 
```

## 乳胶

```
In order to give a better idea, the following table provides a sample of
data rows:

Row1

Row2

Val1

Val1 
```

我想我可能缺少一个乳胶包，所以我下载了 ctable.sty，但我仍然得到相同的输出。任何想法表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-25T15:36:07.763

我使用与您非常相似的工作流程，您最好的选择是放弃通常笨重`xtable`的包并使用该`pander`包来打印您的表格。`pander()`您可以在通用函数中包装您可能希望显示为表格的任何对象。`pandoc.table()`这是具有多个选项的函数的包装器。如果您指定选项`style = "XXX"`，您可以实现您在此处询问的内容。您可以选择 4 种不同的样式；“multiline”（默认）、“grid”、“simple”或“rmarkdown”。我经常在 Rstudio 中编写 rmarkdown 文档，然后使用 pander 包将它们转换为 Word 文档：

```
library(pander)
Pandoc.convert("C:/Users/BlahBlahBlah/Document.md", format="docx") 
```

在转换为 .docx 格式后，所有 4 种表格样式都会变成表格对象，但只有一种表格样式在 .docx 文档和初始“knit”产生的 .html 文件中看起来正确。这种风格是“rmarkdown”。您可以实现这两种方式。一种是：

```
```{r table, results='asis'}
pandoc.table(myTable, style = "rmarkdown")
``` 
```

但是，我更喜欢在文档开头全局设置表格样式，以确保我所有的表格都具有相同的格式，并允许我使用更简洁`pander(x)`而不是更冗长`pandoc.table(x, style = "someStyle")`：

```
```{r table, results='asis'}
panderOptions("table.style", "rmarkdown")
pander(myTable)
``` 
```

`rmarkdown`然而，使用这种风格有一些副作用。主要是不支持单元格内的换行符，请买家注意。我尝试了不同的样式并最终决定我喜欢“多行”的默认样式，因为它在单元格内具有换行符的灵活性，即使我生成的 .html 文件看起来很傻。不过这并不困扰我，因为我实际上只使用从 .md 文件转换而来的 .docx 文件。我写了[一篇](http://r-norberg.blogspot.com/2013/06/generating-tables-using-pander-knitr.html)关于制作可能有用的漂亮表格的博客文章。它权衡了几种方法的优缺点，包括`xtable()`几种`pander()`情况。

# python - PySide.QtGui.QDialog 问题

> ID：13224391
> 
> 赞同：1
> 
> 时间：2012-11-05T00:15:11.890
> 
> 标签：python, pyside

我想在我的无边界对话框周围画一个框架，同时它会以交互方式调整大小，但它看起来好像`QDialog.setSizeGripEnabled(True)`并且`QWidget.resizeEvent`不能很好地协同工作。对话框无法以交互方式调整大小，这是一个已知问题吗？

```
class MyDialog(QtGui.QDialog):

    def __init__(self,x,y):
        QtGui.QDialog.__init__(self)
        self.setWindowFlags(QtCore.Qt.FramelessWindowHint)
        self.setGeometry(x,y,250,300)    
        self.setSizeGripEnabled(True)

        self.frame = QtGui.QFrame(self)
        self.frame.setGeometry(self.rect())
        self.frame.setFrameShape(QtGui.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtGui.QFrame.Plain)
        etc...

    def resizeEvent( self, event ):
        r = self.rect()
        s = event.size()
        self.frame.setGeometry( r.x(), r.y(), s.width(), s.height() ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:41:17.650

这里的问题是，您在`resizeEvent`不传递它的情况下覆盖它，这似乎破坏了生成的尺寸夹点的功能。

最简单的解决方案是调用：

```
 super(MyDialog, self).resizeEvent(event) 
```

在您的事件处理程序中。另一种选择是将您自己的添加`QResizeGrip`到您的框架中：

```
class MyDialog(QtGui.QDialog):

    def __init__(self,x,y):
        # [...]
        self.frame.setLayout(QtGui.QVBoxLayout())
        self.sizeGrip = QtGui.QSizeGrip(self.frame)
        self.frame.layout().addWidget(self.sizeGrip, 0,
                QtCore.Qt.AlignRight | QtCore.Qt.AlignBottom)
        self.setStyleSheet("QSizeGrip {background-color: #202020}") # make it visible
        # [...] 
```

这样做的好处是您可以自由安排尺寸握把。

# svn - SVN：如何将阶段设置为子分支

> ID：13224396
> 
> 赞同：0
> 
> 时间：2012-11-05T00:16:10.653
> 
> 标签：svn, ssh, merge, symlink, stage

嗨，这是我的 SVN 结构：

```
TRUNK
BRANCH
    --STAGING
TAGS
    --tag1 
```

所以这里的目标是在子分支“STAGING”上进行所有开发，一旦准备好投入生产，所有更改将被合并到 tag1 并滚动到 TRUNK（生产）

如何将 TRUNK 设置为 public_html Production 并将登台设置为 Public_html 登台

你可以在这里看到服务器文件夹结构

```
 /var/svn/projects/ (trunk, branch and tags are here)

/home/production/public_html <--- producction
/home/staging/public_html <-- staging 
```

当我对 Staging 做出承诺时，我希望它会在 staging 网站上上线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:44:55.003

看看[詹金斯](http://jenkins-ci.org)。这是一个持续构建系统，但它所做的其中一件事是监视 Subversion URL 并对更改采取行动。例如，您可能有一个暂存分支，当 Jenkins 检测到更改时，它将签出或导出服务器上该分支上的文件。

最简单的方法是让 Jenkins 在您的登台服务器上运行。Jenkins 本身使用最少的资源，所以这应该不是问题。在 Jenkins 上设置工作以查看您的暂存 URL。设置作业，因此作业的工作目录是您的暂存区域的网站 URL。（这可以在作业本身中轻松配置）。然后当 Jenkins 看到暂存 URL 发生变化时，它会更新暂存区域。

一个更好的主意是有两个目录。您有实际的暂存目录和另一个目录，即下一个暂存区域。Jenkins 可以`svn export`对其他目录执行操作，然后将旧的暂存目录移开，并将新目录移动到暂存目录。这样一来，您的暂存目录就不会因为 Jenkinds 进行更新而处于不一致的状态。更好的是，Jenkins 可以将您的服务器上下移动，作为移动新暂存区域的一部分。

顺便说一下，Jenkins 是开源的并且可以免费使用。它也很容易设置。这是一个包含它自己的网络服务器的单个 jar 文件。只需运行`java -jar jenkins.war`它，它就会在您的服务器上的 8080 端口上启动并运行。（可以通过传递参数轻松更改端口）。其他一切都是不言自明的。单击*新工作*链接并填写表格。

# html - 有没有更有效的方法用 CSS 制作 div 背景和边框？

> ID：13224401
> 
> 赞同：-1
> 
> 时间：2012-11-05T00:16:54.117
> 
> 标签：html, css

在我的应用程序中，我有大量具有相同背景和边框但大小不同的 div。

为其中的每一个使用一个特定的背景图像是非常低效的，尤其是在带宽和性能方面。

我将向您展示背景 div 和边框，并告诉您我想要做什么。

![这就是我的 div 的样子](../Images/b6f3076271ee73ead8a70897e61976ff.png)

所以我认为将 div 分成 4 个角（总是相同的）、4 个边（背景重复：重复 x 或重复 y）和一个中心 div 会更有效

![在此处输入图像描述](../Images/e53d06942ca0920bf084cfae387ec2e7.png)

您认为使用 CSS 2 有更好的方法吗？（我不想使用 CSS 3，以获得最大的兼容性）

对于客户端的浏览器或服务器来说，这会消耗资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:10:58.960

我建议使用`box-shadow`and `border-radius`：

```
div {
  width: 200px;
  height: 125px;
  margin: 25px auto;
  background: white;
  border: 1px solid #aaaaaa;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  -ms-border-radius: 3px;
  -o-border-radius: 3px;
  border-radius: 3px;
  -webkit-box-shadow: 1px 0 3px rgba(0, 0, 0, 0.1), -1px 0 3px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 1px 0 3px rgba(0, 0, 0, 0.1), -1px 0 3px rgba(0, 0, 0, 0.1);
  box-shadow: 1px 0 3px rgba(0, 0, 0, 0.1), -1px 0 3px rgba(0, 0, 0, 0.1);
} 
```

[演示](http://codepen.io/anon/pen/wmGic)

# c# - 使用 SimpleMembershipProvider 更新自定义用户配置文件字段？

> ID：13224405
> 
> 赞同：7
> 
> 时间：2012-11-05T00:17:41.727
> 
> 标签：c#, .net, sql, asp.net-mvc, asp.net-membership

`UserProfile`我在名为的表中添加了一个自定义字段，`ClassOfYear`并且可以在注册过程中将数据导入配置文件，如下所示：

```
var confirmationToken = WebSecurity.CreateUserAndAccount(model.UserName,
    model.Password,
    propertyValues: new { ClassOfYear = model.ClassOfYear },
    requireConfirmationToken: true); 
```

但是，现在我希望能够在管理配置文件时更新配置文件，但我似乎找不到这样做的方法。**我需要自己简单地更新`UserProfile`表格吗？如果没有，这样做的适当方法是什么？**

仅供参考，我使用 Dapper 作为我的数据访问层，以防万一。但是，`UserProfile`如前所述，如果这是我应该做的，我可以通过 Dapper 更新表，我只是认为`WebSecurity`该类或类似的东西已经有了方法，因为自定义用户配置文件字段与该`CreateUserAndAccount`方法集成。

谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T16:59:08.117

除了创建时，SimpleMembershipProvider 代码中没有任何内容可以对附加字段执行任何操作。

只需从您的 ORM 中自己查询值。

您可以使用 WebSecurity.GetUserId(User.Identity.Name) 来获取用户的 id，然后使用 Dapper 来查询 UserProfile 表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-21T13:09:47.537

以防万一有人遇到同样的问题。在与 SimpleMembership 进行了多次斗争后，我得到了一个解决方案，它填充了 pages_Membership 和我的自定义用户表。为了澄清，请按照我的代码：

```
public ActionResult Register(RegisterModel model)
    {
        if (ModelState.IsValid)
        {
            TUsuario userDTO= new TUSer()
                {
                    Name = model.Name,
                    Login = model.Login,
                    Pass = model.Pass.ToString(CultureInfo.InvariantCulture),
                    Active = true,
                    IdCompany = model.IdCompany,
                    IdUserGroup = model.IdUserGroup,
                };
            try
            {
                WebSecurity.CreateUserAndAccount(model.Login, model.Pass, new { IdUser = new UserDAL().Seq.NextVal(), Name = userDTO.Name, Login = userDTO.Login, Active = userDTO.Active, Pass = userDTO.Pass, IdCompany = userDTO.IdCompany, IdUserGroup = userDTO.IdUserGroup });

                WebSecurity.Login(model.Login, model.Pass); 
```

在诅咒了很多框架之后，这给了我一股清新的空气:)

PS.: users 表是在 global.asax 文件中使用 WebSecurity.InitializeDatabaseConnection 函数指定的。

# java - 在 Number 的通用子类上使用加法运算符

> ID：13224406
> 
> 赞同：1
> 
> 时间：2012-11-05T00:17:43.880
> 
> 标签：java, generics

有人能告诉我为什么这段代码会给我一个编译错误吗？

```
public class Main {

    public static void main(String[] args) {
        System.out.println(sum(2, 6.9));
    }

    public static <T extends Number<T>> T sum(T a, T b) {
        T result = a + b;      // compile-error here
        return result;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T00:24:18.123

`Number`不是泛型类，所以你不能参数化它：

```
public abstract class Number implements java.io.Serializable {
...
} 
```

此外，该`+`运算符仅适用于 , 等原始类型`int`，`long`而不适用于,等`Number`子类型。（编辑：它将通过取消装箱对这些类型进行操作，是的，但它不能自动将结果装箱到适当的包装类中。）`Integer``Long`

（你偶然发现了一个原因`Number`是多态性的一个糟糕的例子。它实际上只执行对象到基元的转换。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:46:50.453

您可以改为创建一个接口

```
public interface ALU  <T extends Number> {

    public  T add(T a, T b);
} 
```

并使您的主类实现所创建的接口。

```
public class Main implements ALU <Integer>. 
```

并在您的主类中创建方法添加。

```
public Integer add(Integer a, Integer  b){
        return a + b;
    } 
```

这将起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:22:02.430

错误`The operator + is undefined for the argument type(s) T, T`是因为`The type Number is not generic; it cannot be parameterized with arguments <T>`

eclipse 中突出显示的错误提供了此信息，不确定其他 IDE 是否提供相同的信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T00:27:44.363

你必须使用：

```
a.doubleValue()+b.doubleValue() 
```

因为 Number 是一个类，不支持运算符 +

# ms-access - MS Access 在表单关闭时停止插入命令

> ID：13224407
> 
> 赞同：3
> 
> 时间：2012-11-05T00:18:26.050
> 
> 标签：ms-access, ms-access-2007, vba

我一直在 Access 的一个项目上工作，我工作的时间越长，我就越不屑一顾。我整天都在谷歌搜索并尝试解决方法，但我找不到我想要做的事情。

我有一个链接到表格的表格。我有一个按钮可以将表单的记录设置为新记录。如果您开始在记录开始更新的任何一个文本框中输入内容，那么此时它并没有真正进行插入。但是，如果我离开记录，则会调用更新。如果用户不想添加我可以找到的新记录，我无法阻止更新发生。我正在使用

```
 DoCmd.GoToRecord , , acNewRec 
```

让表单让所有文本框都转到新记录。此时，一旦您开始在任何文本框中输入内容，您就无法返回。自动编号会增加，我有 sku 构建器，它将自动编号连接到前缀以充当序列号。

我需要做的是想办法让更新在用户点击关闭时取消。我尝试禁用关闭，但您始终可以右键单击该栏并从那里选择关闭。这与提示表单关闭的任何内容一起提交正在进行的记录并随后触发“afterUpdate”事件。我阅读了一些 Microsoft 文档，并且在工作流程中首先调用了“form_unload”，但插入总是在此之前进行。我也尝试过使用“beforeUpdate”，但是一旦您尝试写入其中一个框而不是在“afterUpdate”之前，它就会触发

beforeUpdate 和 afterUpdate 之间的空间似乎有一个相当大的漏洞。我不认为这是我在这里尝试尝试的非常复杂的操作，但也许我已经研究了很长时间，我错过了一个更简单的解决方案。我只需要取消插入操作或提示用户他们正在关闭带有打开记录的表单。如果他们击中没有插入将触发，是的，它会。

另外，由于我的时间表，我没有兴趣为 ADO 重写。我只需要快速将一些表格放在一起并完成它。还有很多我不想为 ADO 插入设置的字段。它们都是构建的，但我有一个让我感到悲伤的问题，我需要将此解决方案应用于所有表单。

TLDR - 如果用户已输入文本并尝试退出表单，则停止插入数据绑定表单。

解决方案编辑：将表单更改为模式/弹出窗口并禁用关闭。添加一个按钮来处理关闭。添加布尔标志

```
 Private Sub Form_BeforeInsert(Cancel As Integer)
 NR = True
 End Sub 
```

然后添加关闭按钮的代码。

```
 Private Sub cmdClose_Click()
 Dim msgRes As VbMsgBoxResult

If NR Then
     msgRes = MsgBox("Do you want to save the current new record?", vbYesNoCancel, "Closing form...")
     If msgRes = vbYes Then
         DoCmd.RunCommand acCmdSaveRecord
         DoCmd.Close
     ElseIf msgRes = vbNo Then
         Me.Undo
         DoCmd.Close
     End If
 End If
 DoCmd.Close

 End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:31:09.337

您始终可以执行 a`Me.Undo`或`DoCmd.RunCommand acCmdUndo`FormClose 或者如果您仍然无法使其正常工作（我在 Access 中花了很多时间，我知道它可能很挑剔）您可以执行`DoCmd.RunSql ("Delete * from TableName where Id=NewID")`

你也可以试试这个：

```
DoCmd.DoMenuItem acFormBar, acEditMenu, 8, , acMenuVer70
DoCmd.Close , , acSaveNo 
```

您可能还想禁用关闭按钮并创建一个按钮来取消记录，以便您可以将所有代码放在那里。如果您将表单模式设置为对话框，您将无法右键单击关闭它。

# php - 用 PHP 恢复 Mysql 数据库？

> ID：13224408
> 
> 赞同：0
> 
> 时间：2012-11-05T00:18:48.900
> 
> 标签：php, mysql, windows

我对这段代码所做的是：我要求用户选择要恢复的备份（检查）当用户点击“提交”按钮时，将文件移动到服务器的本地地毯（检查）我调用系统函数来调用mysql.exe 恢复本地服务器中的sql文件（这里有问题）

```
<?php

if($_FILES['enviar']){
$file_name="Respaldo.sql";
move_uploaded_file($_FILE['enviar']['tmp_name'],"Backups/$file_name");
$batche=system("C:/WAMP/BIN/MYSQL/MYSQL5.5.24/bin/mysql.exe -u root test < C:/WAMP/WWW/Backups/respaldo.sql");
echo $batche;

}
?> 
```

如果我将这个“C:/WAMP/BIN/MYSQL/MYSQL5.5.24/bin/mysql.exe -u root test < C:/WAMP/WWW/Backups/respaldo.sql”复制到 Windows shell 中，它会恢复备份没有任何问题，任何帮助？..谢谢

- - 编辑 - -

问题是当我调用系统函数时它不执行恢复任务，数据库仍然是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-21T05:02:18.130

```
$batche=system("C:/WAMP/BIN/MYSQL/MYSQL5.5.24/bin/mysql.exe -u root test < C:/WAMP/WWW/Backups/respaldo.sql"); 
```

而不是上面的代码，您将替换如下：

```
$batche=**shell_exec** ("C:/WAMP/BIN/MYSQL/MYSQL5.5.24/bin/mysql.exe -u root test < C:/WAMP/WWW/Backups/respaldo.sql"); 
```

# java - Java swing 在其他组件上绘制对象

> ID：13224421
> 
> 赞同：3
> 
> 时间：2012-11-05T00:20:48.130
> 
> 标签：java, swing, jpanel, paintcomponent

我正在尝试制作一个小型绘画程序。我在`JPanel`上面绘制对象`JFrame`（我使用的是 Netbeans 6.9）。我有一些基本功能，如字体、线条和填充矩形。我正在使用标准方法来绘制要覆盖的`paintComponent()`.

```
class .... extends JPanel
{
@Override
void paintComponents(Graphics g)
{
.......
}
} 
```

问题是当我在一个区域上绘制文本时，它会被绘制在它的后面而不是在它的顶部。基本上我想在之前在`JPanel`. 我真的不想切换到其他类型的分层窗格。一种非常幼稚的方法是撤消每个对象并以相反的顺序绘制它们（最后一个在前）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T04:46:54.657

您将需要覆盖`paintComponent(Graphics g)`并且不要忘记调用`super.paintComponent(Graphics g);`

```
class .... extends JPanel
{
    @Override
    protected void paintComponent(Graphics g)
    {
        super.paintComponent(g);//honor paintComponent an call super to draw other components that were added to the JPanel
        .......
    }
} 
```

您可能还需要覆盖`getPreferredSize(..)`并`JPanel`返回适当的大小，以便`JPanel`可见：

```
class .... extends JPanel
{
    @Override
    public Dimension getPreferredSize()
    {
        return new Dimension(300,300);
    }
} 
```

编辑：

根据您的操作，您可能还想查看[GlassPane](http://docs.oracle.com/javase/tutorial/uiswing/components/rootpane.html)，它允许您在整个`JFrame`窗口上设置一个透明窗格并且也可以绘制，这将导致图形绘制在所有其他窗格之上，如下所示：

![在此处输入图像描述](../Images/7c7e1881f3354b5b29a0b391e0953f26.png)

# java - 导出到 JAR 时 LTI-Civil Project 出现奇怪错误

> ID：13224422
> 
> 赞同：2
> 
> 时间：2012-11-05T00:20:58.130
> 
> 标签：java, native, webcam

大纲： 1\. 我的项目使用 LTI-CIVIL 来捕获网络摄像头。2\. 在 Eclipse 中，一切正常。3\. 由于 LTI_CIVIL 使用本机库来访问硬件，我选择使用 JarClassLoader（可在此处找到信息[http://www.jdotsoft.com/JarClassLoader.php#download](http://www.jdotsoft.com/JarClassLoader.php#download)) 允许在运行时将本机库解压缩到临时文件夹中。一切正常，我什至可以访问网络摄像头捕获流，直到...我尝试使用从网络摄像头提交的图像，该图像类型为 com.lti.civil.NativeVideoFormat。问题是，当从可执行 jar 运行时，它说这个类显然没有实现 com.lti.civl.VideoFormat 。我什至打印了在 eclipse 上运行的代码的 getClass() 并验证了网络摄像头 Image 的类型相同。但是，当我打印出 getClass() instanceof NativeVideoFormat 时，在 Eclipse 版本中打印为 true，但在 jar 版本中打印为 false。

有趣的是，这个问题以前也出现过，但没有解决方案： [https ://forums.oracle.com/forums/thread.jspa?messageID=10637883刻](https://forums.oracle.com/forums/thread.jspa?messageID=10637883&#10637883)

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:54:36.560

您说“它显然确实”实现了该接口，但我认为问题在于它**实际上**没有。我认为您有该接口类型的多个“化身”。

运行时类（或接口）的真实类型取决于`Class`对象的身份：

*   如果`clazz == clazz2`那么它们代表相同的类型。（测试相同条件的`equals(Object)`方法...）`Class`
*   否则，*无论*类名如何，它们都不会。

您的应用程序对类加载器的使用似乎导致一个`.class`文件在两个不同的类加载器中加载了两次。我怀疑您的`JarClassLoader`实例没有正确的父类加载器。

# xml - Jmeter正则表达式提取器在xml中查找ItemID

> ID：13224425
> 
> 赞同：4
> 
> 时间：2012-11-05T00:21:37.177
> 
> 标签：jmeter, xml, regex, expression, jmeter, extractor

我是[jmeter](/questions/tagged/jmeter "显示标记为“jmeter”的问题")的新手；我希望我能很好地向你描述我的问题。

我正在尝试使用正则表达式从 xml 元素中提取 ItemID 属性。然后我在另一个请求中使用它。这是我试图从中提取 ItemID 的 XML 响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<Promise >
 <SuggestedOption>
      <Option TotalShipments="1">
           <PromiseLines TotalNumberOfRecords="1">
                <PromiseLine ItemID="Col_001" >
                     <Assignments>
                          <Assignment InteractionNo="1" >
                          </Assignment>
                     </Assignments>
                </PromiseLine>
           </PromiseLines>
     </Option>
 </SuggestedOption>
</Promise> 
```

我的正则表达式提取器设置如下：

```
Reference Name: item
Regular Expression: .?ItemID=(.+?)*
Template: $1$
Match No.: 1 
```

在第二个请求中，我将 ItemID 设置如下 ... ItemID=${item} ...

我知道当我使用设置为“Col_001”的默认值时，它工作正常。所以我的表达显然有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:48:09.747

试试这个表达式：

```
\bItemID\s*=\s*"([^"]*)" 
```

解释

```
NODE                     EXPLANATION
--------------------------------------------------------------------------------
  \b                       the boundary between a word char (\w) and
                           something that is not a word char
--------------------------------------------------------------------------------
  ItemID                   'ItemID'
--------------------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
--------------------------------------------------------------------------------
  =                        '='
--------------------------------------------------------------------------------
  \s*                      whitespace (\n, \r, \t, \f, and " ") (0 or
                           more times (matching the most amount
                           possible))
--------------------------------------------------------------------------------
  "                        '"'
--------------------------------------------------------------------------------
  (                        group and capture to \1:
--------------------------------------------------------------------------------
    [^"]*                    any character except: '"' (0 or more
                             times (matching the most amount
                             possible))
--------------------------------------------------------------------------------
  )                        end of \1
--------------------------------------------------------------------------------
  "                        '"' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:53:39.650

另一种选择是使用 xpath 提取器来执行此操作：

*   [http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor](http://jmeter.apache.org/usermanual/component_reference.html#XPath_Extractor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-27T13:13:44.763

尝试以下正则表达式：

```
ItemID="(.+)" 
```

# asp.net-mvc - ASP.NET MVC3 中的链接服务器和分布式事务

> ID：13224427
> 
> 赞同：1
> 
> 时间：2012-11-05T00:21:44.377
> 
> 标签：asp.net-mvc, distributed-transactions

我在执行引用链接服务器的存储过程的函数导入时遇到问题。 **问题**

无法执行操作，因为链接服务器的 OLE DB 提供程序“SQLNCLI10”...无法开始分布式事务。

**到目前为止我做了什么**

我已经能够在 SSMS 和 Classic ASP Web 应用程序中执行这个存储过程。从 MVC 应用程序运行存储过程时，这似乎只是一个问题。我尝试以 MVC 应用程序的 Web.Config 中指定的用户身份运行 SSMS，经典 ASP 网站和 MVC 应用程序的连接字符串几乎相同

**问题**

为了在 mvc3/entity 框架中启用分布式事务，我需要做些什么特别的事情吗？

# android - 加载应用程序时更改日期差异

> ID：13224428
> 
> 赞同：1
> 
> 时间：2012-11-05T00:21:47.377
> 
> 标签：android, simplecursoradapter

因此，我使用 SimpleCursor Adapter 加载我的任务列表，并且在每一行中都有一个文本视图，其中包含剩余时间。我想要做的是在用户进入 listview 活动时更新列表行，以便更新剩余时间。我遇到的问题是简单的光标适配器用数据库中的项目填充列表，我需要通过动态计算通过android更改剩余时间文本，并且只访问过期的数据库。

我尝试将剩余时间存储到数据库中，然后在显示列表时更新它，但这不起作用并且看起来很乱。

编辑：我确实知道如何计算时差。我只想知道如何用光标项和非光标项填写列表。

# python - Python - 帕斯卡三角形

> ID：13224429
> 
> 赞同：-6
> 
> 时间：2012-11-05T00:21:49.370
> 
> 标签：python

你好，我坚持这个练习。我正在做帕斯卡三角形，但似乎做得不够好，所以我大学的检查程序会接受它。我必须使用`def pascals_triangle(n)`where `n=8`。我可以让它工作，但问题在于输出 - 我得到数组......就像这样：

```
[1]
[1, 1]
[1, 2, 1]
[1, 3, 3, 1] 
```

定义还说，每一行都应该写在**矩阵 P[64]**的行中，并且应该将空白位置设置为 0。我必须使用 for 循环，并且一行的打印命令应该如下所示：

```
print "%d %d %d %d %d %d %d %d" % (P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8]) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:30:35.717

你在看这样的东西：

```
def pascal_iteration(n):
    rows = list()
    lr = None
    for i in range(n+1):
        try:
            lr = [1] + [lr[i] + lr[i+1] for i in range(len(lr) - 1)] + [1]
        except Exception:
            lr = [1]
        rows.append(' '.join(str(v) for v in lr))
    return rows

rows = pascal_iteration(8)
l = len(rows[-1])
print '\n'.join(v.center(l) for v in rows) 
```

输出：

```
 1           
         1 1          
        1 2 1         
       1 3 3 1        
      1 4 6 4 1       
    1 5 10 10 5 1     
   1 6 15 20 15 6 1   
 1 7 21 35 35 21 7 1  
1 8 28 56 70 56 28 8 1 
```

# database - 在 postgresql 中以图形方式查看数据

> ID：13224432
> 
> 赞同：1
> 
> 时间：2012-11-05T00:22:22.867
> 
> 标签：database, postgresql

在过去的几天里，我一直在试图弄清楚 postgresql 是如何工作的。有些东西我不明白。有没有办法以图形方式查看表格中的数据？类似于 MySQL 的 phpMyadmin 的东西？还是只能通过查询来查看数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T00:26:24.283

试试 pgadmin3。[http://www.pgadmin.org/](http://www.pgadmin.org/)

如果你在你的机器上使用包管理器`MacPorts`，你也可以使用`sudo port install pgadmin3`.

以下是一些示例屏幕截图，它们将指导您找到可以选择“查看数据”的位置。

![在此处输入图像描述](../Images/5be4c1f99e1d21a31a74d19e9ed5f810.png)

确保您已连接到您的 postgresql 服务器和您感兴趣的特定数据库。

然后单击其层次结构打开`public`，其中将包含另一个名为 的组`Tables`，如下所示：-

![在此处输入图像描述](../Images/f23a15ac5365a1e527651c1ab4e492af.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:25:31.273

`pgAdmin`您可以从[pgadmin.org](http://www.pgadmin.org/)下载一个名为的免费程序。

# php - PHP json_encode 包含数组的括号

> ID：13224433
> 
> 赞同：0
> 
> 时间：2012-11-05T00:23:23.453
> 
> 标签：php, json

我正在使用`json_encode`将 PHP 数组转换为 json，它似乎工作正常，除了一件事。

如果我有一个这样的多维数组：

```
$person = array(
  'name' => 'John Smith',
  'age' => 36,
  'siblings' => array(
    'male' => array('John Doe','Mark'),
    'female' => array('Jane Doe','Jane Smith')
  )
); 
```

我希望它把括号放在周围，`siblings`但它只在`male`and周围做`female`，即：

```
{
  "name":"John Smith",
  "age":36,
  "siblings":{
    "male":[
      "John Doe",
      "Mark"
    ],
    "female":[
      "Jane Doe",
      "Jane Smith"
    ]
  }
} 
```

而且我要`"siblings":[{ ... }]`

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:25:18.553

```
$person = array(
  'name' => 'John Smith',
  'age' => 36,
  'siblings' => array(array(
    'male' => array('John Doe','Mark'),
    'female' => array('Jane Doe','Jane Smith')
  ))
); 
```

这将给出你想要的，但它没有多大意义

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:25:07.663

JavaScript 不支持关联数组，因此关联数组被转换为对象。

但是您可以像遍历数组一样遍历对象。

```
var i, j;
for (i in siblings) {
   for (j = 0; j < i.length; i++) {
       i[j];
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T00:29:10.240

你可以这样做：

```
$person = array(
  'name' => 'John Smith',
  'age' => 36,
  'siblings' => array(
    array(
      'gender' => 'male',
      'name' => 'John Doe',
    ),
    array(
      'gender' => 'male',
      'name' => 'Mark',
    ),
    array(
      'gender' => 'female',
      'name' => 'Jane Doe',
    ),
    array(
      'gender' => 'female',
      'name' => 'Jane Smith',
    ),
  )
); 
```

# c++ - Qt creator - .ui 表单在新窗口中显示

> ID：13224434
> 
> 赞同：4
> 
> 时间：2012-11-05T00:23:30.413
> 
> 标签：c++, qt, user-interface, qt-creator, qwidget

我正在 Qt creator 中创建一个 GUI。现在我有不同的 .ui 表单，它们与我的 GUI 的不同部分相对应。我的 login.ui 窗口在您第一次运行程序时出现。当您单击 loginButton 时，会显示一个带有我的 MainMenuScreen.ui 表单的新窗口。我的问题是我不希望 MainMenuScreen 在新窗口中打开...我希望应用程序只有一个窗口并且内容会更改...任何方式我都可以通过保留单独的 .ui 表单而不使用堆叠小部件？我的 LoginScreen.ui 和 MainMenuScreen.ui 都扩展了 QWidget，并且在我的 Login.cpp 中我有一个 onclick 事件函数，它调用 show() 并创建我的 MainMenuScreen 的新窗口。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:47:33.060

我认为您可以调用 QMainWindow 的[setCentralWidget()](http://doc.qt.digia.com/qt/qmainwindow.html#setCentralWidget)方法来重置窗口中显示的小部件。

# c++ - Qt 编辑自定义数据结构

> ID：13224435
> 
> 赞同：0
> 
> 时间：2012-11-05T00:23:41.057
> 
> 标签：c++, qt

我正在尝试利用模型/视图架构来实现我的目标，但我不确定这是否是用于此任务的合适工具。

我有一个我一直在使用的材质系统，我最近创建了一个使用 Qt 的编辑器，它使用 a`QGraphicsView`来显示相互连接以形成最终片段着色器代码的项目，这非常好用，但是我很难找到一种显示这些自定义数据结构的方法，无需为每种类型的项目手动编码小部件。

这些自定义数据结构只是具有成员的类，我希望根据每个成员类型使用接口进行修改。例如，如果项目是`Value`在我的材质系统中表示单个变量（如纹理）的项目，我希望能够有 2 个可编辑区域，一个用于磁盘上纹理的路径，一个用于变量名称。

解释这样的自定义结构并根据它们的类型创建小部件，然后映射这些小部件以编辑/显示它们的最佳方法是什么。我发现的所有谷歌搜索都将我引向了该`Model/View`架构，但似乎这更适用于 SQL 数据库和 XML 文件之类的东西。

```
class Value
{
  std::string  m_strType, m_strName, m_strValue, m_strLocation; 
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:21:10.850

听起来您正在寻找诸如[Property Browser Framework](https://doc.qt.io/archives/qq/qq18-propertybrowser.html)之类的东西。简而言之，您将创建所有要编辑[属性](https://doc.qt.io/archives/4.3/properties.html)的成员，然后使用属性浏览器框架创建一个模型，然后您可以将视图附加到该模型。

# objective-c - NSLog 替代品？

> ID：13224438
> 
> 赞同：2
> 
> 时间：2012-11-05T00:23:50.440
> 
> 标签：objective-c, ios

**原始问题：** 对于 iOS 应用程序，NSLog 的替代日志记录模块是什么？请解释您亲身经历的利弊。

**附加请求 1：** 我确实尝试使用 TestFlight TFLog，它也有助于将日志上传到他们的服务器，但是当应用程序在后台运行时需要记录时，它似乎受到限制。有助于滚动/压缩日志文件和服务器上传的日志系统将有很大帮助。

**附加要求2：** 有人写的另一个NSLog问题是Apple不喜欢在您提交应用程序进行生产时。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T00:27:13.970

总是有`printf`函数族，它们通常比 快`NSLog`，但不支持`%@`对象的格式说明符。

最近我一直在使用优秀的[Lumberjack](https://github.com/robbiehanson/CocoaLumberjack)框架进行日志记录，它是异步的，不会对您的代码产生性能影响。它还具有大量用于日志输出格式的自定义功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:54:16.653

如果您有兴趣制作自己的 NSLog 变体（完全替代），请查看[此处](http://www.karlkraft.com/index.php/2009/03/23/114/)。

如果您不想制作自己的 NSLog 而是想自定义当前的 NSLog 可以看看[这个页面上](http://iphonedevsdk.com/forum/tutorial-discussion/68451-tutorial-customising-the-nslog-function.html)列出的一些技巧。

就个人而言，我更喜欢 redo-NSLog-from-scratch 方法，因为它提供了更多的控制。然而，它确实需要更多的时间来实现，并且您必须了解变量参数列表及其实现才能使其正常工作。当您想将 va_lists 传递给不同的函数时，这变得特别痛苦。制作自己的版本的一个方便的功能是，您可以设置功能以记录到您喜欢的任何地方（控制台或不同的日志文件） - 这一切都`fprintf`在一天结束时回到智能调用。

另一方面，如果您只想就地自定义 NSLog，那么您真正需要做的就是熟悉一些方便的编译器宏（例如`__LINE__, __PRETTY_FUNCTION__`，等）。这是更简单的方法，可能就是您所追求的，但它提供的控制不如您自己的控制。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:35:12.940

你可能已经知道了，但是在 XCode 中调试时你总是可以观察变量值

看看这个 [Xcode 有监视窗口吗？](https://stackoverflow.com/questions/6500718/does-xcode4-have-a-watch-window)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T01:02:37.667

我知道的最好的选择是宏，您可以将它与任何预定义的 C 宏`__FILE__`、`__PRETTY_FUNCTION__`等一起使用。

**原型**

```
#define MyLog(args...) MyLogImpl(__FILE__,__PRETTY_FUNCTION__,args);

void MyLogImpl(const char *filename, const char *funcPrettyName, NSString *formatStr, ...); 
```

**执行**

有了`va_start() va_end()`你就可以得到格式。为了弥补`printf`格式支持的不足，您将使用以下值：

```
NSString *messageStr =  [[NSString alloc] initWithFormat:formatStr arguments:replacingArgumentParameters]; 
```

然后您可以将标准消息与任何其他数据一起打印，例如

```
fprintf(stderr, "%s %s", filename, messageStr); 
```

它不仅为您提供消息本身，还为您提供调用 MYLog 的文件名。

另一个有用的技巧是将消息限制为当前的 log_level 或运行配置。

如果你觉得自己有足够的经验，你也可以继续尝试重新定义标准的 NSLog 宏。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-26T09:41:35.640

正如“A-Live”所说，最好的选择是宏。只需在您的 .pch 文件中定义以下宏。

```
#ifdef DEBUG
   #define debug(format, ...) CFShow((__bridge void *)[NSString stringWithFormat:@"%s [LINE: %d] ==>> " format,__PRETTY_FUNCTION__, __LINE__, ## __VA_ARGS__]);
#else
#endif 
```

现在，如何使用上述宏？

**样本**

```
debug(@"Version Number is 1.0"); 
```

笔记：

您可以通过编辑架构来禁用所有***调试日志。***在编辑架构下选择第一个选项卡，即“**信息**”

在“信息”选项卡中，将构建配置设置为“发布”，然后按“确定”按钮。

![在此处输入图像描述](../Images/a1d0104e77aecea42f912e5252dc3015.png)

# xml - JSON 变量不读取为文本

> ID：13224439
> 
> 赞同：0
> 
> 时间：2012-11-05T00:24:02.567
> 
> 标签：xml, json, google-maps-api-3, google-maps-markers

我正在尝试从具有执行此操作的 xml 处理功能的某人的代码中学习：

```
$(xml).find("page").find("user").each(function(){
...
    var user = $(this);         
    var userId = $(user).find("Id").text();
...
    MAP.setMarkerClickListener(TRACKER.users[userId].mapMarker[0].marker,function (){
        MAP.openInfoWindow(TRACKER.users[userId].mapMarker[0].infoWindow, TRACKER.users[userId].mapMarker[0].marker);   
    }); 
```

效果很好，但是我正在使用 JSON 构建一个应用程序，并且我尝试做类似的事情：

```
for (var i=0; i<json.users.length; i++) {
    var user = json.users[i];
...
    MAP.setMarkerClickListener(TRACKER.users[user.id].mapMarker.marker,function(){
        MAP.openInfoWindow(TRACKER.users[user.id].mapMarker.infoWindow, TRACKER.users[user.id].mapMarker.marker);   
    }); 
```

我认为问题在于将原始 XML 的文本传递到函数中。在我的情况下，变量被传入，因此变量在函数使用的值中保存的最后一个值。我尝试将 JSON.stringify 变量转换为新变量，但它不起作用。

我的成功为每个标记添加了一个侦听器，但是它们调用执行函数，就好像它们是最后一个标记一样。

任何想法如何使用 JSON 进行这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:14:00.850

可能是 JSON 数据无效
您能否显示 JSON 响应数据。

循环json数据的方式应该是这样

```
$.each(json.users,function(key,data){
  ...
  MAP.setMarkerClickListener(TRACKER.users[data.id].mapMarker.marker,function(){
   MAP.openInfoWindow(TRACKER.users[data.id].mapMarker.infoWindow, TRACKER.users[data.id].mapMarker.marker);   
  });
}); 
```

# python - python tkinter二十一点游戏，添加两个变量时输入错误

> ID：13224441
> 
> 赞同：0
> 
> 时间：2012-11-05T00:24:16.237
> 
> 标签：python, python-2.7, tkinter, typeerror

这是我的代码：

```
from __future__ import division 
from Tkinter import *
import tkMessageBox
import os
import subprocess
from random import randrange
from random import shuffle
from random import choice
from time import sleep
import sys, time
from select import select

class MyApp(object):

    a = choice(range(1, 12))
    b = choice(range(1, 12))
    money = 100
    bet = 5
    hand = 0

    def __init__(self):
        self.root = Tk()
        self.root.wm_title("The Game of 21")
        Label(self.root, text="Balance: %d" %(self.money)).grid(row=0, column=0, sticky=E)
        Label(self.root, text="Choose Bet:").grid(row=2, column=0, sticky=E)
        Button(self.root, text="5", command=self.bet).grid(row = 2, column = 1)  #create a button
        Button(self.root, text="10", command=self.bet).grid(row = 2, column = 2)  #create a button
        Button(self.root, text="25", command=self.bet).grid(row = 2, column = 3)  #create a button
        Button(self.root, text="50", command=self.bet).grid(row = 2, column = 4)  #create a button

        Button(self.root, text="Deal", command=self.gameOn).grid(row = 5, column = 1)  #create a button
        Button(self.root, text="Exit", command=self.root.destroy).grid(row = 5, column = 2)  #create a button

        self.root.mainloop()

    def gameOn(self):
        """Setup the application's main window as a 2x5 grid"""
        self.root = Tk()
        self.root.wm_title("The Game of 21")
        self.bet = DoubleVar()

        self.cards = StringVar()
        Label(self.root, text = 'Cards dealt:').grid(row = 1, column = 0, sticky = W) #cards dealt
        Label(self.root, text = self.a).grid(row = 1, column = 1, sticky = E)        # card 1 (aka card a)
        Label(self.root, text = ',').grid(row = 1, column = 2)      # inserting a comma between card1 and card2
        Label(self.root, text = self.b).grid(row = 1, column = 3)        # card 2 (aka card b)
        Label(self.root, text = 'Total = %d' %(self.a + self.b + self.hand)).grid(row = 1, column = 4)  # card 1 + card 2
        Label(self.root, text = "Time remaining:").grid(row = 3, column = 1) 

        Button(self.root, text="Hit", command=self.hit).grid(row = 2, column = 0)  #create a button
        Button(self.root, text="Stand" , command=self.stand).grid(row = 2, column = 1) # create a button

#   def bet(betAmount):
#       self.bet = 10

    def hit(self):
        self.hand = choice(range(1, 12))  
        total = self.hand + self.a + self.b 
        dealerHand = choice(range(14,25))

        self.root.destroy()

        result = "Dealer wins. You lose."
        if dealerHand > 21 and total < 22: 
            self.money = self.money - self.bet
            result = "Winner! Winner! Chicken Dinner!"
        if total > 21:
            result
            self.money = self.money - self.bet
        elif total > dealerHand:
            self.money = self.money + self.bet
            result = "Winner! Winner! Chicken Dinner!" 
        elif total == dealerHand: 
            self.money = self.money - self.bet
            result = "Dealer wins. You lose." 
        tkMessageBox.showinfo("Results" , "Hand = %d\nDealer = %d\n%s" %((self.hand + self.a + self.b), (dealerHand), result)) # print result

    def stand(self): 
        self.hand = 0
        total = self.hand + self.a + self.b 
        dealerHand = choice(range(14,25))    
        self.root.destroy()

        result = "Dealer wins. You lose."
        if dealerHand > 21 and total < 22: 
            self.money += bet
            result = "Winner! Winner! Chicken Dinner!"
        if total > 21: 
            self.money += bet
            result
        elif total > dealerHand: 
            self.money += bet
            result = "Winner! Winner! Chicken Dinner!" 
        elif total == dealerHand: 
            self.money += bet
            result = "Dealer wins. You lose." 
        print self.money
        tkMessageBox.showinfo("Results" , "Your hand: %d\nDealer: %d\n%s" %((self.hand + self.a + self.b), (dealerHand), result)) # print result

MyApp() 
```

基本上我想做的是创建一个二十一点类型的游戏，我想要四个按钮（我已经做了），当你点击它们时它会改变`bet`变量。我的问题是即使我尝试将默认变量设置为 5 它也不起作用；我得到一个类型错误。我也不知道如何在资金上下波动时更新第一个窗口上的“余额”。对于凌乱的代码很抱歉，这是漫长的一天，我想我已经尽可能多地自己完成了。

编辑：弹出的错误是：

```
line 75, in hit
    self.money = self.money - self.bet
TypeError: unsupported operand type(s) for -: 'int' and 'instance' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:33:16.863

`self.bet`是一个`DoubleVar`。为了获取`bet`所持有的数据，您需要，`self.bet.get()`

# c++ - 为什么选择 BSTR 以及如何将其转换为 QString？

> ID：13224445
> 
> 赞同：2
> 
> 时间：2012-11-05T00:24:55.947
> 
> 标签：c++, qt, winapi, kinect, bstr

我正在使用函数返回 BSTR 的 Microsoft Kinect SDK。我需要得到一个 QString 或 std::string。

这是我尝试过的：

```
BSTR bstr = s->NuiUniqueId();

// QString qs((QChar*)bstr, SysStringLen(bstr));

std::wstring ws(bstr);

ui->lblDetails->setText(QString::fromStdWString(ws)); 
```

使用此解决方案，程序崩溃。使用注释掉的行，我得到“未解析的外部符号 SysStringLen”。

SysStringLen 是要走的路，但我需要添加一些额外的库（API 不会已经包含它）还是有其他解决方案？

* * *

附加问题：微软为什么要这样做？我是说：

```
#if !defined(_NATIVE_WCHAR_T_DEFINED)
typedef unsigned short WCHAR;
#else
typedef wchar_t WCHAR;
#endif
typedef WCHAR OLECHAR;
typedef OLECHAR* BSTR;
typedef BSTR* LPBSTR; 
```

这样的事情背后的原因是什么？即使他们发现在内部使用它是有益的，他们难道不能在 API 中使用普通的 char 数组或 std::(w)string 来让其他人的生活更轻松吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:35:10.800

您可以将`BSTR`对象转换为`char *`，然后将其转换为 QString。这里：

```
QString *getQStringFromBstr(BSTR bstrVal){
  char *p= const_cast<char *>(_com_util::ConvertBSTRToString(bstrVal));
  return new QString(p);
} 
```

COM 被设计为与语言无关的二进制均衡器。这意味着我可以在 C++ 中使用 VB 函数，在 C#（与 COM 互操作）中使用 C++ 函数。这就是大多数字符串和少数函数被更改为*语言中性*字符串 IIRC 的原因。

# c# - 如何在 XNA 中控制高清视频播放位置和速度？

> ID：13224448
> 
> 赞同：4
> 
> 时间：2012-11-05T00:25:07.633
> 
> 标签：c#, visual-studio-2010, performance, video, xna

我正在**使用 Visual Studio 2010**和**XNA 4.0**在 C# 中为 Windows 开发游戏。我希望能够设置和更改高清视频的播放位置，并根据用户输入反向播放视频。

我很难找到从哪里开始。XNA 的 videoPlayer 类不提供这些类型的功能。我读到 XNA DirectShow 现在已经过时并且在使用高清视频时速度很慢。

我不太明白如何在我的项目中使用或实现诸如 ffmpeg 之类的工具。似乎有些人有类似的问题并发布了解决方案，但没有太多细节。这些在下面。

*   与核心 DX 功能进行互操作。

*   编写一个托管 c++ 包装器来互操作 ffmpeg。

*   编写一个 mpeg 解码器。

我不确定什么是最好的以及从哪里开始。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T00:31:05.437

VideoPlayer 类有一个“PlayPosition”属性，您应该可以使用它。

否则（我不知道您的视频文件有多大，也不知道多长时间）尝试一个图像序列并为当前图像序列设置动画并通过用户输入进行控制。当然，使用图像序列会使音频反转（如果有音频）等变得非常复杂。

最后但同样重要的是，您可以在这里查看是否可以从这个 mpeg 解码器中找出任何东西： [https ://www.box.com/shared/ojzfv0qzfx](https://www.box.com/shared/ojzfv0qzfx)

其他可能有助于 mpeg 解码的东西： http: [//chrisa.wordpress.com/2007/11/21/decoding-mpeg2-information/](http://chrisa.wordpress.com/2007/11/21/decoding-mpeg2-information/)

# c# - XNA Game Studio 4.0 平台滚动问题

> ID：13224451
> 
> 赞同：1
> 
> 时间：2012-11-05T00:25:33.467
> 
> 标签：c#, scroll, xna-4.0

一周前我是 XNA 的新手，但我在 C# 方面做了很多工作。我下载了 4.0 Platformer 入门套件。我浏览了教程，现在我试图让我的程序在我的角色向右移动时水平滚动背景（如超级马里奥兄弟）。

我让它工作了一些，但我的角色最终离开了屏幕，我的对象留在了框架中。用文字很难画出完美的画面，所以我录制了一段正在发生的事情的视频并放在[这里](http://www.phoenixwebpro.com/game.wmv)。

我不确定对齐在哪里。我包括我的 Player.cs 和 Layer2.cs。

请原谅我的背景音乐；我刚刚添加了我可以在网上找到的第一个 .wma 文件。

```
Player.cs
#region File Description
//-----------------------------------------------------------------------------
// Player.cs
//
// Microsoft XNA Community Game Platform
// Copyright (C) Microsoft Corporation. All rights reserved.
//-----------------------------------------------------------------------------
#endregion

using System;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Input.Touch;

namespace Platformer
{
/// <summary>
/// Our fearless adventurer!
/// </summary>
class Player
{
    // Animations
    private Animation idleAnimation;
    private Animation idleAnimationBack;
    private Animation runAnimation;
    private Animation jumpAnimation;
    private Animation celebrateAnimation;
    private Animation dieAnimation;
    private SpriteEffects flip = SpriteEffects.None;
    private AnimationPlayer sprite;

    // Sounds
    private SoundEffect killedSound;
    private SoundEffect jumpSound;
    private SoundEffect fallSound;

    public Level Level
    {
        get { return level; }
    }
    Level level;

    public bool IsAlive
    {
        get { return isAlive; }
    }
    bool isAlive;

    // Physics state
    public Vector2 Position
    {
        get { return position; }
        set { position = value; }
    }
    Vector2 position;

    private float previousBottom;

    public Vector2 Velocity
    {
        get { return velocity; }
        set { velocity = value; }
    }
    Vector2 velocity;

    // Constants for controling horizontal movement
    private const float MoveAcceleration = 13000.0f;
    private const float MaxMoveSpeed = 1750.0f;
    private const float GroundDragFactor = 0.48f;
    private const float AirDragFactor = 0.58f;

    // Constants for controlling vertical movement
    private const float MaxJumpTime = 0.30f;
    private const float JumpLaunchVelocity = -3500.0f;
    private const float GravityAcceleration = 3400.0f;
    private const float MaxFallSpeed = 550.0f;
    private const float JumpControlPower = 0.14f; 

    // Input configuration
    private const float MoveStickScale = 1.0f;
    private const float AccelerometerScale = 1.5f;
    private const Buttons JumpButton = Buttons.A;
    private const Buttons BackwardButton = Buttons.LeftStick;

    /// <summary>
    /// Gets whether or not the player's feet are on the ground.
    /// </summary>
    public bool IsOnGround
    {
        get { return isOnGround; }
    }
    bool isOnGround;

    /// <summary>
    /// Current user movement input.
    /// </summary>
    private float movement;

    // Jumping state
    private bool isJumping;
    private bool wasJumping;
    private float jumpTime;
    private bool isBackwards;

    private Rectangle localBounds;
    /// <summary>
    /// Gets a rectangle which bounds this player in world space.
    /// </summary>
    public Rectangle BoundingRectangle
    {
        get
        {
            int left = (int)Math.Round(Position.X - sprite.Origin.X) + localBounds.X;
            int top = (int)Math.Round(Position.Y - sprite.Origin.Y) + localBounds.Y;

            return new Rectangle(left, top, localBounds.Width, localBounds.Height);
        }
    }

    /// <summary>
    /// Constructors a new player.
    /// </summary>
    public Player(Level level, Vector2 position)
    {
        this.level = level;

        LoadContent();

        Reset(position);
    }

    /// <summary>
    /// Loads the player sprite sheet and sounds.
    /// </summary>
    public void LoadContent()
    {
        // Load animated textures.
        idleAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewIdle"), 0.1f, true);
        idleAnimationBack = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewIdleBack"), 0.1f, true);
        runAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewRun5"), 0.1f, true);
        jumpAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewJump2"), 0.1f, false);
        celebrateAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewJump"), 0.1f, false);
        dieAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewDie"), 0.1f, false);

        // Calculate bounds within texture size.            
        int width = (int)(idleAnimation.FrameWidth * 0.4);
        int left = (idleAnimation.FrameWidth - width) / 2;
        int height = (int)(idleAnimation.FrameWidth * 0.9);
        int top = idleAnimation.FrameHeight - height;
        localBounds = new Rectangle(left, top, width, height);

        // Load sounds.            
        killedSound = Level.Content.Load<SoundEffect>("Sounds/PlayerKilled");
        jumpSound = Level.Content.Load<SoundEffect>("Sounds/PlayerJump");
        fallSound = Level.Content.Load<SoundEffect>("Sounds/PlayerFall");
    }

    /// <summary>
    /// Resets the player to life.
    /// </summary>
    /// <param name="position">The position to come to life at.</param>
    public void Reset(Vector2 position)
    {
        Position = position;
        Velocity = Vector2.Zero;
        isAlive = true;
        sprite.PlayAnimation(idleAnimation);
    }

    /// <summary>
    /// Handles input, performs physics, and animates the player sprite.
    /// </summary>
    /// <remarks>
    /// We pass in all of the input states so that our game is only polling the hardware
    /// once per frame. We also pass the game's orientation because when using the accelerometer,
    /// we need to reverse our motion when the orientation is in the LandscapeRight orientation.
    /// </remarks>
    public void Update(
        GameTime gameTime, 
        KeyboardState keyboardState, 
        GamePadState gamePadState, 
        TouchCollection touchState, 
        AccelerometerState accelState,
        DisplayOrientation orientation)
    {
        GetInput(keyboardState, gamePadState, touchState, accelState, orientation);

        ApplyPhysics(gameTime);

        if (IsAlive && IsOnGround)
        {
            if (Math.Abs(Velocity.X) - 0.02f > 0)
            {
                sprite.PlayAnimation(runAnimation);
            }
            else
            {
                sprite.PlayAnimation(idleAnimation);
            }
        }

        // Clear input.
        movement = 0.0f;
        isJumping = false;
    }

    /// <summary>
    /// Gets player horizontal movement and jump commands from input.
    /// </summary>
    private void GetInput(
        KeyboardState keyboardState, 
        GamePadState gamePadState, 
        TouchCollection touchState,
        AccelerometerState accelState, 
        DisplayOrientation orientation)
    {
        // Get analog horizontal movement.
        movement = gamePadState.ThumbSticks.Left.X * MoveStickScale;

        // Ignore small movements to prevent running in place.
        if (Math.Abs(movement) < 0.5f)
            movement = 0.0f;

        // Move the player with accelerometer
        if (Math.Abs(accelState.Acceleration.Y) > 0.10f)
        {
            // set our movement speed
            movement = MathHelper.Clamp(-accelState.Acceleration.Y * AccelerometerScale, -1f, 1f);

            // if we're in the LandscapeLeft orientation, we must reverse our movement
            if (orientation == DisplayOrientation.LandscapeRight)
                movement = -movement;
        }

        // If any digital horizontal movement input is found, override the analog movement.
        if (gamePadState.IsButtonDown(Buttons.DPadLeft) ||
            keyboardState.IsKeyDown(Keys.Left) ||
            keyboardState.IsKeyDown(Keys.A))
        {
            movement = -1.0f;
        }
        else if (gamePadState.IsButtonDown(Buttons.DPadRight) ||
                 keyboardState.IsKeyDown(Keys.Right) ||
                 keyboardState.IsKeyDown(Keys.D))
        {
            movement = 1.0f;
        }

        // Check if the player wants to jump.
        isJumping =
            gamePadState.IsButtonDown(JumpButton) ||
            keyboardState.IsKeyDown(Keys.Space) ||
            keyboardState.IsKeyDown(Keys.W) ||
            touchState.AnyTouch();

        // Check if the player is pushing up.
        isBackwards =
        gamePadState.IsButtonDown(Buttons.DPadUp) ||
        gamePadState.ThumbSticks.Left.Y > 0 ||
        keyboardState.IsKeyDown(Keys.Up);

    }

    /// <summary>
    /// Updates the player's velocity and position based on input, gravity, etc.
    /// </summary>
    public void ApplyPhysics(GameTime gameTime)
    {
        float elapsed = (float)gameTime.ElapsedGameTime.TotalSeconds;

        Vector2 previousPosition = Position;

        // Base velocity is a combination of horizontal movement control and
        // acceleration downward due to gravity.
        velocity.X += movement * MoveAcceleration * elapsed;
        velocity.Y = MathHelper.Clamp(velocity.Y + GravityAcceleration * elapsed, -MaxFallSpeed, MaxFallSpeed);

        velocity.Y = DoJump(velocity.Y, gameTime);

        // Apply pseudo-drag horizontally.
        if (IsOnGround)
            velocity.X *= GroundDragFactor;
        else
            velocity.X *= AirDragFactor;

        // Prevent the player from running faster than his top speed.            
        velocity.X = MathHelper.Clamp(velocity.X, -MaxMoveSpeed, MaxMoveSpeed);

        // Apply velocity.
        Position += velocity * elapsed;
        Position = new Vector2((float)Math.Round(Position.X), (float)Math.Round(Position.Y));

        // If the player is now colliding with the level, separate them.
        HandleCollisions();

        // If the collision stopped us from moving, reset the velocity to zero.
        if (Position.X == previousPosition.X)
            velocity.X = 0;

        if (Position.Y == previousPosition.Y)
            velocity.Y = 0;

        DoBackwards(gameTime);
    }

    /// <summary>
    /// Calculates the Y velocity accounting for jumping and
    /// animates accordingly.
    /// </summary>
    /// <remarks>
    /// During the accent of a jump, the Y velocity is completely
    /// overridden by a power curve. During the decent, gravity takes
    /// over. The jump velocity is controlled by the jumpTime field
    /// which measures time into the accent of the current jump.
    /// </remarks>
    /// <param name="velocityY">
    /// The player's current velocity along the Y axis.
    /// </param>
    /// <returns>
    /// A new Y velocity if beginning or continuing a jump.
    /// Otherwise, the existing Y velocity.
    /// </returns>
    private float DoJump(float velocityY, GameTime gameTime)
    {
        // If the player wants to jump
        if (isJumping)
        {
            // Begin or continue a jump
            if ((!wasJumping && IsOnGround) || jumpTime > 0.0f)
            {
                if (jumpTime == 0.0f)
                    jumpSound.Play();

                jumpTime += (float)gameTime.ElapsedGameTime.TotalSeconds;
                sprite.PlayAnimation(jumpAnimation);
            }

            // If we are in the ascent of the jump
            if (0.0f < jumpTime && jumpTime <= MaxJumpTime)
            {
                // Fully override the vertical velocity with a power curve that gives players more control over the top of the jump
                velocityY = JumpLaunchVelocity * (1.0f - (float)Math.Pow(jumpTime / MaxJumpTime, JumpControlPower));
            }
            else
            {
                // Reached the apex of the jump
                jumpTime = 0.0f;
            }
        }
        else
        {
            // Continues not jumping or cancels a jump in progress
            jumpTime = 0.0f;
        }
        wasJumping = isJumping;

        return velocityY;
    }

    private void DoBackwards(GameTime gameTime)
    {
        Animation idleOrig = idleAnimation;

        // If the player pushes up
        if (isBackwards)
        {
            idleAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewIdleBack"), 0.2f, true);
        }
        else
        {
            idleAnimation = new Animation(Level.Content.Load<Texture2D>("Sprites/Player/DrewIdle"), 0.1f, true);
        }
    }

    /// <summary>
    /// Detects and resolves all collisions between the player and his neighboring
    /// tiles. When a collision is detected, the player is pushed away along one
    /// axis to prevent overlapping. There is some special logic for the Y axis to
    /// handle platforms which behave differently depending on direction of movement.
    /// </summary>
    private void HandleCollisions()
    {
        // Get the player's bounding rectangle and find neighboring tiles.
        Rectangle bounds = BoundingRectangle;
        int leftTile = (int)Math.Floor((float)bounds.Left / Tile.Width);
        int rightTile = (int)Math.Ceiling(((float)bounds.Right / Tile.Width)) - 1;
        int topTile = (int)Math.Floor((float)bounds.Top / Tile.Height);
        int bottomTile = (int)Math.Ceiling(((float)bounds.Bottom / Tile.Height)) - 1;

        // Reset flag to search for ground collision.
        isOnGround = false;

        // For each potentially colliding tile,
        for (int y = topTile; y <= bottomTile; ++y)
        {
            for (int x = leftTile; x <= rightTile; ++x)
            {
                // If this tile is collidable,
                TileCollision collision = Level.GetCollision(x, y);
                if (collision != TileCollision.Passable)
                {
                    // Determine collision depth (with direction) and magnitude.
                    Rectangle tileBounds = Level.GetBounds(x, y);
                    Vector2 depth = RectangleExtensions.GetIntersectionDepth(bounds, tileBounds);
                    if (depth != Vector2.Zero)
                    {
                        float absDepthX = Math.Abs(depth.X);
                        float absDepthY = Math.Abs(depth.Y);

                        // Resolve the collision along the shallow axis.
                        if (absDepthY < absDepthX || collision == TileCollision.Platform)
                        {
                            // If we crossed the top of a tile, we are on the ground.
                            if (previousBottom <= tileBounds.Top)
                                isOnGround = true;

                            // Ignore platforms, unless we are on the ground.
                            if (collision == TileCollision.Impassable || IsOnGround)
                            {
                                // Resolve the collision along the Y axis.
                                Position = new Vector2(Position.X, Position.Y + depth.Y);

                                // Perform further collisions with the new bounds.
                                bounds = BoundingRectangle;
                            }
                        }
                        else if (collision == TileCollision.Impassable) // Ignore platforms.
                        {
                            // Resolve the collision along the X axis.
                            Position = new Vector2(Position.X + depth.X, Position.Y);

                            // Perform further collisions with the new bounds.
                            bounds = BoundingRectangle;
                        }
                    }
                }
            }
        }

        // Save the new bounds bottom.
        previousBottom = bounds.Bottom;
    }

    /// <summary>
    /// Called when the player has been killed.
    /// </summary>
    /// <param name="killedBy">
    /// The enemy who killed the player. This parameter is null if the player was
    /// not killed by an enemy (fell into a hole).
    /// </param>
    public void OnKilled(Enemy killedBy)
    {
        isAlive = false;

        if (killedBy != null)
            killedSound.Play();
        else
            fallSound.Play();

        sprite.PlayAnimation(dieAnimation);
    }

    /// <summary>
    /// Called when this player reaches the level's exit.
    /// </summary>
    public void OnReachedExit()
    {
        sprite.PlayAnimation(celebrateAnimation);
    }

    /// <summary>
    /// Draws the animated player.
    /// </summary>
    public void Draw(GameTime gameTime, SpriteBatch spriteBatch)
    {
        // Flip the sprite to face the way we are moving.
        if (Velocity.X > 0)
            flip = SpriteEffects.FlipHorizontally;
        else if (Velocity.X < 0)
            flip = SpriteEffects.None;

        // Draw that sprite.
        sprite.Draw(gameTime, spriteBatch, Position, flip);
    }
}
} 
```

* * *

```
Layer2.cs
#region File Description
//-----------------------------------------------------------------------------
// Layer2.cs
//
// Microsoft XNA Community Game Platform
// Copyright (C) Microsoft Corporation. All rights reserved.
//-----------------------------------------------------------------------------
#endregion 
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Content;

namespace Platformer
{
class Layer
{
    public Texture2D[] Textures { get; private set; }
    public float ScrollRate { get; private set; }

    public Layer(ContentManager content, string basePath, float scrollRate)
    {
        // Assumes each layer only has 3 segments.
        Textures = new Texture2D[3];
        for (int i = 0; i < 3; ++i)
            Textures[i] = content.Load<Texture2D>(basePath + "_" + i);

        ScrollRate = scrollRate;
    }

    public void Draw(SpriteBatch spriteBatch, float cameraPosition)
    {
        // Assume each segment is the same width.
        int segmentWidth = Textures[0].Width;

        // Calculate which segments to draw and how much to offset them.
        float x = cameraPosition * ScrollRate;
        int leftSegment = (int)Math.Floor(x / segmentWidth);
        int rightSegment = leftSegment + 1;
        x = (x / segmentWidth - leftSegment) * -segmentWidth;

        spriteBatch.Draw(Textures[leftSegment % Textures.Length], new Vector2(x, 0.0f), Color.White);
        spriteBatch.Draw(Textures[rightSegment % Textures.Length], new Vector2(x + segmentWidth, 0.0f), Color.White);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T07:27:40.603

最好从样品套件开始。但是套件并没有应有的那么好。因此，我强烈建议不要使用该套件，而是使用其他示例来开始。

在这里，我列出了其中的一些，包括横向滚动游戏和 2D 游戏。

[Rimer 的 2D 教程](http://www.riemers.net/eng/Tutorials/XNA/Csharp/series2d.php)是我发现的最好的 2D XNA 游戏入门教程之一。即使它有3D系列。

【Nick Gravelyn 的瓷砖引擎教程系列】（[http://www.youtube.com/playlist?list=PL0A865073DA96A7DA](http://www.youtube.com/playlist?list=PL0A865073DA96A7DA)）精彩视频教程系列包括2D地图编辑器、动画、边界绑定、碰撞。创建精彩的 2D 游戏所需的几乎所有知识。横向滚动，RPG风格。

最后但并非最不重要的三个必须有书 [学习 XNA](http://www.amazon.in/Learning-XNA-4-0-Aaron-Reed/dp/1449394620/ref=sr_1_9?ie=UTF8&qid=1376032978&sr=8-9&keywords=XNA) [XNA 游戏编程食谱](http://www.amazon.in/XNA-Game-Programming-Recipes-Problem-solution/dp/159059925X/ref=sr_1_21?ie=UTF8&qid=1376033012&sr=8-21&keywords=XNA) [构建游戏独立开发人员的实用指南](http://www.amazon.in/Building-Xna-3-0-Games-Independent/dp/143021869X/ref=sr_1_4?ie=UTF8&qid=1376033056&sr=8-4&keywords=james+silva+xna)

我希望我的回答可以帮助您学习 XNA。

# html - 如何在 iOS 应用程序上启动相机视图全屏？

> ID：13224453
> 
> 赞同：2
> 
> 时间：2012-11-05T00:25:54.093
> 
> 标签：html, objective-c

我想在 iOS 上调用相机以打开全屏视图我在 iPhone 上使用什么功能？另外我如何调用指南针绘制在 iOS 相机视图的顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:58:07.263

我认为下面的链接可能会对您有所帮助。让我知道是否有效..!!!!

快乐编码！！！！！！

[iOS相机UIView在iPad上覆盖全屏？](https://stackoverflow.com/questions/11448631/ios-camera-uiview-overlay-full-screen-on-ipad)

# c++ - 一元否定运算符会在函数调用之前出现吗？

> ID：13224454
> 
> 赞同：1
> 
> 时间：2012-11-05T00:26:00.617
> 
> 标签：c++, compiler-construction, operators, operator-precedence

我手边没有编译器，但这激起了我的好奇心。如果我有这样的代码：

```
float a = 1;
float b = 2;

-a.add(b); 
```

它会运行为：

```
add(-a, b); 
```

或者

```
-add(a, b); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:27:09.517

`float`除了没有方法的事实之外`add`，当然还有第二个——除非语言以某种方式知道`add`函数的属性。否则它可能是完全错误的：想象一下如果你`-f(x)`用`f(-x)`for替换会发生什么`f(x) = x * x`！

但是，如果编译器知道这`add`只是一个加法（例如，它内*联*函数），那么只要结果保持不变，它就可以选择它想要的任何方式。

对于表达式`-a.add(b)`，肯定`(-a) + b`不同于`-(a + b)`，所以编译器只会选择正确的一个。根据[优先级表](http://en.cppreference.com/w/cpp/language/operator_precedence)，函数调用具有较高的优先级，因此`-(add(a, b))`会被选中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:29:22.547

后者，因为符号在加法/减法方面很重要。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:31:34.110

假设您定义了类似的东西`float add(float a, float b) { return a + b; }`，那么它将是第二个。函数调用具有比一元减号更高的运算符优先级，因此它将调用函数，然后一元减号结果。

# java - 在java中只接受一个数字

> ID：13224455
> 
> 赞同：3
> 
> 时间：2012-11-05T00:26:01.457
> 
> 标签：java

我正在编写一个简单的程序，它接受多个输入并显示最大的然后是第二大的。我唯一的问题是我希望程序只接受个位数。我知道这可以追溯到基础，但请耐心等待。到目前为止我写的代码是：

```
import javax.swing.JOptionPane;

public class Largest 
{
    public static void main (String args[]) 
    {
        /*Set variables and include a while function to force the program to take
        * ten numbers before proceeding to the rest of the program. */
        int counter = 0;
        int number = 0;
        int largest = 0;
        int second = 0;

        while (counter < 10)
        {
            // Set the counter
            counter++;
            //Input integer, set the largest number as the first output
            number = Integer.parseInt(JOptionPane.showInputDialog("Enter integer"));
            if (number >= largest) {
                largest=number;
            } else if (number >= second && number <= largest) {
                // Set the second largest integer as the output
                second=number;
            }
        }

        //Display the largest number, followed by the second largest number
        System.out.println("Largest number input: " + largest);
        System.out.println("Second largest input: " + second); 

        System.exit(0);             //terminate the application
    }                   //end method main
}                       //end class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:47:49.967

对于这类问题，就个人而言，我会使用[`DocumentFilter`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)

它允许您限制进入字段的字符类型以及字符数。

![在此处输入图像描述](../Images/49be4a005b77bfa3c5bb6a1ebc3239e9.png)

```
public class RestrictInput {

    public static void main(String[] args) {
        new RestrictInput();
    }

    public RestrictInput() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                JTextField field = new JTextField(2);
                field.setHorizontalAlignment(JTextField.RIGHT);
                ((AbstractDocument) field.getDocument()).setDocumentFilter(new RestrictFilter());
                JPanel panel = new JPanel(new GridBagLayout());
                GridBagConstraints gbc = new GridBagConstraints();
                gbc.gridx = 0;
                gbc.gridy = 0;
                panel.add(new JLabel("Please enter a integer:"), gbc);
                gbc.gridx++;
                gbc.anchor = GridBagConstraints.WEST;
                gbc.weightx = 1;
                panel.add(field, gbc);

                int result = JOptionPane.showConfirmDialog(null, panel, "Input", JOptionPane.OK_CANCEL_OPTION, JOptionPane.QUESTION_MESSAGE);
                if (result == JOptionPane.OK_OPTION) {
                    System.out.println("Use entered " + field.getText());
                }

            }
        });
    }

    public class RestrictFilter extends DocumentFilter {

        public void insertString(DocumentFilter.FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {
            String currentText = fb.getDocument().getText(0, fb.getDocument().getLength());
            if (currentText.startsWith("-") || text.equals("-") || fb.getDocument().getLength() < 1) {
                String value = text.substring(0, 1);
                if (value.equals("-")) {
                    if (currentText.startsWith("-")) {
                        super.remove(fb, 0, 1);
                    } else {
                        super.insertString(fb, 0, value, attr);
                    }
                } else if (fb.getDocument().getLength() < 2 && (value.equals("-") || Character.isDigit(value.charAt(0)))) {
                    super.insertString(fb, offset, value, attr);
                }
            }
        }

        public void replace(DocumentFilter.FilterBypass fb, int offset, int length, String string, AttributeSet attr) throws BadLocationException {
            if (length > 0) {
                fb.remove(offset, length);
            }
            insertString(fb, offset, string, attr);
        }
    }
} 
```

查看[MDP 的 Weblog](http://www.jroller.com/dpmihai/entry/documentfilter)和[Text Component Features](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)，尤其是*实现文档过滤器部分*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T00:29:36.573

```
//Set the counter
counter++;
while (true) {
    //Input integer, set the largest number as the first output
    number = Integer.parseInt(JOptionPane.showInputDialog("Enter integer"));
    if (number < 10 && number > -10) break; //If it's one digit, it's OK
    JOptionPane.showMessageDialog(null, "Enter only one digit",
        "Too many digits", JOptionPane.ERROR_MESSAGE);
} 
```

这样做是启动一个无限循环。如果数字只有一位，它将结束循环并继续。否则，它将再次从循环的开头开始并要求一个有效的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:30:55.810

只需使用自定义 JOptionDialog ，您将 JTextField 限制为 1 个字符宽度。

# c# - UDP 代码故障排除

> ID：13224456
> 
> 赞同：1
> 
> 时间：2012-11-05T00:26:11.587
> 
> 标签：c#, java, android, udp, wireshark

我正在开发一个在网络上的对等点之间发送数据的系统。一个应用程序是用 Java 为 Android 编写的。另一个应用程序是在 PC 上用 C# 编写的。

我在 Android 上用 Java 编写代码来发送 UDP 数据报。我编写了 C# 代码来发送和接收数据报。我试图将消息从 Android 发送到 PC。我可以在 WireShark 中看到该消息，但在我的程序中看不到。所以，我把我的程序放在第二台电脑上。我成功地从我的电脑向第二台电脑发送了一条消息。但是，当我尝试从第二台 PC 向我的 PC 发送消息时，它失败了。我可以在我的 PC 上的 WireShark 中看到它，但不是我的应用程序。我不知道接下来要尝试什么。你有什么建议吗？为什么 UDP 数据包在 WireShark 中可见，但在我的应用程序中不可见？

```
Here is my code.

//C# code on PC
//Sender
sending_socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, rotocolType.Udp);
send_to_address = IPAddress.Parse(strIPAddress);
sending_end_point = new IPEndPoint(send_to_address, intPort);
sending_socket.EnableBroadcast = true;
byte[] bytMessage = Encoding.ASCII.GetBytes(strMessage);
sending_socket.SendTo(bytMessage, sending_end_point);

//Listener
UdpClient listener = new UdpClient(listenPort);
IPEndPoint groupEP = new IPEndPoint(IPAddress.Any, listenPort);
byte[] bytReceiveDataByteArray;
try
{
   listener.EnableBroadcast = true;

   while (isRunning)
   {
      //listen for data from sender
      bytReceiveDataByteArray = listener.Receive(ref groupEP);
      //Fire an event to send the data to the hosting code
      if (DataReceived != null)
      {
         DataReceivedEventArgs e = new DataReceivedEventArgs(bytReceiveDataByteArray);
         DataReceived(this, e);
      }
   }
}

//Java code on Android
DatagramSocket socket = new DatagramSocket();
InetAddress serverIP = InetAddress.getByName(strIpAddress);
byte[] outData = (strMsg).getBytes();
DatagramPacket out = new DatagramPacket(outData,outData.length, serverIP,50005);
socket.send(out);
socket.close(); 
```

谢谢，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:25:23.210

如果我理解当您的程序在特定 PC 上运行时问题正确（我们称之为“Windows1”），它永远不会收到 UDP 数据包。它不会从 Java Android 或在不同 PC 上运行的 C# 代码接收它们（我们称之为“Windows2”）。

但是，当您在“Windows2”上运行程序时，它确实会收到来自“Windows1”的消息。听起来您在“Windows1”上启用了防火墙，并且对 UDP 端口 50005 没有例外。在“Windows2”上，您的防火墙已关闭或有 50005 例外，这就是它接收来自“Windows1”的消息的原因。

请注意，由于 UDP 不是面向连接的，防火墙错误不会导致通常的连接超时错误。消息只是被丢弃，你永远不会收到错误。

# svn - SubWCRev 以代码 9009 退出

> ID：13224460
> 
> 赞同：7
> 
> 时间：2012-11-05T00:26:45.617
> 
> 标签：svn, visual-studio-2008, tortoisesvn

> 错误 50 命令 "SubWCRev "C:\Users\texasman\Desktop\flash\FD\" "C:\Users\texasman\Desktop\flash\FD\FlashDevelop\Properties\AssemblyInfo.cs.rev" "C:\Users \texasman\Desktop\flash\FD\FlashDevelop\Properties\AssemblyInfo.cs"" 退出，代码为 9009。FlashDevelop

我在尝试构建 flashdevelop 的最新主干时遇到了这个错误。我有兴趣使用该程序为我的网站开发一些 Flash。但我所做的一切我都无法构建它导致该错误。

我试过 vs 2008，这是规定的版本，我只是用 vs 2010 试过。

我正在使用 tortoisesvn 将其拉下。并在赢得 7 时。

```
 AssemblyInfo.cs.rev - exists in the folder.
 AssemblyInfo.cs     - does not exist in the folder. 
```

我到处寻找我可以使用和/或理解的解决方案。

这是我第一次遇到这样的问题`svn`，但我必须补充一点，我以前从未`svn`主动使用过。我已经通过svn下载了程序，但从来没有任何问题。

怎么了，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T02:18:59.693

好的，我为修复此特定错误所做的工作是将系统变量“%FILE_DEBUG%”添加到系统环境变量中，并添加到 SubWCRev.exe 的正确路径。

无论出于何种原因，tortoiseSVN 在安装过程中都没有添加它。

因此，如果其他人遇到类似的问题，请先检查一下。

检查的典型位置是右键单击我的计算机并选择属性。在第一个选项卡上会有一个用于环境变量的按钮。以防万一您使用多个帐户，请在下方列表中添加一个新帐户。添加 var name %FILE_DEBUG% 和 c:\full\path\to\SubWCRev.exe 的完整路径。

感谢您的帮助，我希望这对其他人有所帮助。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T01:25:44.643

看不到您的命令有任何问题，除了（与问题无关）

*   Uleless 引用 Mars 围绕命令和参数（无空格 - 无标记）
*   在 WC 中保存 subwcrev'ed 文件 - 不是最佳选择（你必须不要忘记 svn：忽略它）

共同点：`SUBWCREV WC-PATH TPL-FILE RES-FILE`是正确的模式，如果

*   C:\Users\texasman\Desktop\flash\FD\ 是工作副本（最好的情况 - 干净）
*   AssemblyInfo.cs.rev 包含 SubWCRev 关键字

调试步骤：

1.  在命令提示符下运行没有模板文件的 SubWCRev：`subwcrev.exe C:\Users\texasman\Desktop\flash\FD\`
2.  使用简短而简单的模板运行 SubWCRev
3.  增加 AssemblyInfo.cs.rev 模板的复杂性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-22T14:07:39.050

与 Visual-Studio 2012 类似的错误。在命令提示符下手动运行命令并且它有效。

通过退出 Visual Studio 并重新运行它来解决问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-06-21T16:43:00.603

我有同样的问题。在这种情况下，我认为 9009 来自 Visual Studio 而不是 SubWCRev.exe。在[https://stackoverflow.com/a/1988703/90236](https://stackoverflow.com/a/1988703/90236)中找到了对我有用的答案。它解释了如何将安装 subwcrev.exe 的目录添加到您的 %PATH% 环境变量中。

就我而言，我遵循了[http://www.diogonunes.com/blog/embed-svns-revision-into-assemblyinfos-version-number/](http://www.diogonunes.com/blog/embed-svns-revision-into-assemblyinfos-version-number/)中的示例，并且有一个预构建事件，例如：

```
"C:\Program Files\TortoiseSVN\bin\SubWCRev.exe" $(ProjectDir). $(ProjectDir)Properties\AssemblyInfo_template.cs $(ProjectDir)Properties\AssemblyInfo.cs 
```

我的错误是我没有正确引用 Exe 的路径，因此“程序文件”路径中的空格导致了 9009 错误。修复我引用的路径修复了错误。

# magento - Magento - Magmi - Small_Image 未显示在前端

> ID：13224469
> 
> 赞同：1
> 
> 时间：2012-11-05T00:28:30.707
> 
> 标签：magento, import, magento-1.7, magmi

我正在使用 Magmi 将可配置产品导入 Magento。Magento CE 1.7

导入工作正常，Magmi 不会引发错误、异常或警告。

多个图像在后端看起来很好，我可以将鼠标悬停在它们上面，那里没有问题。

但是，当我浏览网站上的产品时，“主”图像也不会显示为“小”图像。如果我在没有 Magmi 的情况下手动添加产品和图像，“主”图像也会显示为“小”图像。

我附上了我的 Magmi 设置、前端视图问题和后端视图的图片。

[http://imgur.com/a/7m3Ha](http://imgur.com/a/7m3Ha)

CSV 文件是：

```
 configurable_attributes,media_gallery,sku,name,store,attribute_set,type,categories,product_websites,size,cost,description,options_container,page_layout,price,required_options,short_description,image,small_image,thumbnail,image_label,small_image_label,thumbnail_label,status,tax_class_id,visibility,weight,qty,min_qty,use_config_min_qty,is_qty_decimal,backorders,use_config_backorders,min_sale_qty,use_config_min_sale_qty,max_sale_qty,use_config_max_sale_qty,is_in_stock,notify_stock_qty,use_config_notify_stock_qty,manage_stock,use_config_manage_stock,stock_status_changed_auto,use_config_qty_increments,qty_increments,use_config_enable_qty_inc,enable_qty_increments,,ILUNOV1236S,Black Pocket Out Trackie Shorts,default,Default,simple,,base,Small,,,Block after Info Column,,310,0,,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV123601_big.jpg,,,,1,0,1,0,10,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,,ILUNOV1236M,Black Pocket Out Trackie Shorts,default,Default,simple,,base,Medium,,,Block after Info Column,,310,0,,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV123601_big.jpg,,,,1,0,1,0,10,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,,ILUNOV1236L,Black Pocket Out Trackie Shorts,default,Default,simple,,base,Large,,,Block after Info Column,,310,0,,/ILUNOV1236/ILUNOV123601_big.jpg,/ILUNOV1236/ILUNOV123601_big.jpg,/ILUNOV1236/ILUNOV1236-01_big.jpg,,,,1,0,1,0,10,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,,ILUNOV1236XL,Black Pocket Out Trackie Shorts,default,Default,simple,,base,X-Large,,,Block after Info Column,,310,0,,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV123601_big.jpg,/ILUNOV1236/ILUNOV1236-01_big.jpg,,,,1,0,1,0,10,0,1,0,0,1,1,1,0,1,1,,1,0,1,0,1,0,1,0,size,/ILUNOV1236/ILUNOV1236-02_big.jpg;/ILUNOV1236/ILUNOV1236-01_big.jpg,ILUNOV1236,Black Pocket Out Trackie Shorts,default,Default,configurable,Pants,base,,,"Back by popular demand. Pocket out trackie shorts are the effortless choice coming in a soft textured material. Details include four over-sized patch pockets in total - two on the front and two on the back - with a I Love Ugly logo patch on the back too. Pair with any t-shirt or shirt in the range and you can't go wrong.<br />",,,310,1,abc,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV1236-01_big.jpg,/ILUNOV1236/ILUNOV1236-01_big.jpg,,,,1,0,4,0,0,0,1,0,0,1,1,1,0,1,1,,1,0,0,0,1,0,1,0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:59:13.513

以防万一您指的`More Images`是产品视图页面上的“小图”。

使用 Magmi 导入时，您需要在 csv 中的图像字段中附加一个“+”，这样它就不会被自动排除在画廊中的显示之外。如果正在检查排除标志，您将能够在 Magento 管理员中看到。

[http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Image_attributes_processor#Explicit_.E2.80.9Cexclude.E2.80.9D_flag_management。](http://sourceforge.net/apps/mediawiki/magmi/index.php?title=Image_attributes_processor#Explicit_.E2.80.9Cexclude.E2.80.9D_flag_management.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:33:17.787

其他人有这个问题，现阶段没有解决方案。

来自 Magento 论坛上的开发者本人：

**嗨，你是我解释的“名称别名”的受害者。最终的 magento 图像存储在 media/catalog 示例下的名称相关目录结构中：源名称：MB1000.jpg 将在 magento 产品图像存储中存储为 media/catalog/M/B/MB1000.jpg 无论使用何种目录结构，使用 2 次相同的名称，magmi 会将其存储为相同的目标文件。magmi 图像插件将源图像复制到其最终目录/名称。由于您在不同的源目录中有 2 次相同的文件名，因此 magmi 将目标图像（magento 存储的图像）标识为存在，因此除了关联的标签之外不修改任何内容。这是一个特定的用例，我可以尽快尝试解决。同时，以不同的方式重命名您的文件，所有文件都将被很好地导入。**

# c# - 多线程 Web 请求上的 C# 错误

> ID：13224471
> 
> 赞同：2
> 
> 时间：2012-11-05T00:28:40.880
> 
> 标签：c#, multithreading, httpwebrequest

我正在尝试使用多个线程进行网络请求，但如果我尝试使用超过 2 个线程，我会收到错误

```
Index was outside the bonds of the array 
```

在这条线上：

```
string username = ScrapeBox1.Lines[NamesCounter].ToString(); 
```

这是代码：

```
while (working)
{
    while (usernamescount > NamesCounter)
    {
        string username = ScrapeBox1.Lines[NamesCounter].ToString();
        string url = "http://www.someforum.com/members/" + username + ".html";
        var request = (HttpWebRequest)(WebRequest.Create(url));
        var response = request.GetResponse();
        request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:16.0) Gecko/20100101 Firefox/16.0";

        using (var responseStream = response.GetResponseStream())
        {
            using (var responseStreamReader = new StreamReader(responseStream))
            {

                var serverResponse = responseStreamReader.ReadToEnd();
                int startpoint = serverResponse.IndexOf("Contact Info</span>");
                try
                {
                    string strippedResponse = serverResponse.Remove(0, startpoint);
                    ExtractEmails(strippedResponse);

                }
                catch { }

            }
        }
        NamesCounter++;
        textBox1.Text = NamesCounter.ToString();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:58:39.027

此代码不是线程安全的。

您需要执行 HttpWebRequest 的代码是原子的并且在循环通过集合的上下文之外。

例如

```
public void MakeHttpWebRequest(string userName)
{
    string url = "http://www.someforum.com/members/" + userName + ".html";
    var request = (HttpWebRequest)(WebRequest.Create(url));
    var response = request.GetResponse();
    request.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:16.0) Gecko/20100101 Firefox/16.0";

    using (var responseStream = response.GetResponseStream())
    {
        using (var responseStreamReader = new StreamReader(responseStream))
        {

            var serverResponse = responseStreamReader.ReadToEnd();
            int startpoint = serverResponse.IndexOf("Contact Info</span>");
            try
            {
                string strippedResponse = serverResponse.Remove(0, startpoint);
                ExtractEmails(strippedResponse);

            }
            catch { }

        }
    }
} 
```

假设 ScrapeBox.Lines 实现了 IEnumerable，我建议使用[Parallel.ForEach](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)并将 ScrapeBox.Lines 作为迭代的 IEnumerable 传递。

现在，还有一个问题，从 HttpWebRequest 读取响应的代码仍然需要将其输出写入共享位置。以线程安全的方式实现这一点。一种常见的方法是使用信号量。您需要一个可供每个线程实例访问的对象。类级别的私有变量`private object sharedMutex = new object();`会起作用。那么代码`ExtractEmails(strippedResponse);`应该改成 `lock(sharedMutex) { ExtractEmails(strippedResponse); }`

如果没有该`ExtractEmails(<string>)`方法的代码，我无法为此提供线程安全的实现，因此部分解决方案可能仍然会导致问题。

# asp.net-mvc - HTML5 与 ASP.NET MVC

> ID：13224473
> 
> 赞同：3
> 
> 时间：2012-11-05T00:28:43.580
> 
> 标签：asp.net-mvc, html

我们正在计划一个新项目，我们希望将 ASP.NET 与 MVC 模式结合使用。我们还希望能够访问 HTML5 中包含的新功能。但是我们没有发现很多信息或人们朝着同一方向前进。

与 HTML5 的 ASP.NET MVC 是否存在某种矛盾，或者主题是如此琐碎以至于只有少数人在谈论它？

（问题重新表述）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:32:35.357

ASP.NET MVC 可以很好地生成有效的 HTML5，您完全可以在您的应用程序中使用它。ASP.NET MVC 是生成 HTML 的模板和后端，包括 HTML5 和它的所有新功能！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:58:44.313

即使 ASP.NET MVC 没有生成有效的 HTML5（它确实生成了），您也可以[使用模板](http://www.hanselman.com/blog/ASPNETMVCDisplayTemplateAndEditorTemplatesForEntityFrameworkDbGeographySpatialTypes.aspx)准确地输出您想要的 HTML。

# python - 格式化包含 ${} 的 python 字符串

> ID：13224474
> 
> 赞同：3
> 
> 时间：2012-11-05T00:28:47.133
> 
> 标签：python, string, format

我需要使用 format() 方法打印出包含 ${} 的字符串

例如，我想打印出来

`"hello ${a} hello"`

使用这个 python 代码

```
print "{string1} ${a} {string1}".format(string1="hello") 
```

但是，我得到 KeyError'a'，因为 format() 需要 {a} 的输入字符串。如何教 format() 忽略 ${a}？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:32:10.177

您需要将 { 和 } 加倍到 {{ 到 }}：

```
print "{string1} ${{a}} {string1}".format(string1="hello") 
```

# java - 运行“jar cf”后，内部类不包含在 JAR 文件中

> ID：13224475
> 
> 赞同：3
> 
> 时间：2012-11-05T00:29:04.823
> 
> 标签：java, jar

我有以下文件：

```
java_classes/TerrainMesh.class
java_classes/TerrainMesh$Vertex.class 
```

它们是从以下来源编译的：

```
class TerrainMesh {
  static class Vertex {
      // ...
    }
  }
} 
```

我正在构建一个这样的 JAR 文件：

```
jar cf jar/cities.jar -C java_classes "cities/TerrainMesh.class" -C java_classes "cities/TerrainMesh$Vertex.class" 
```

检查 JAR 内容`jar tf jar/cities.jar`给了我：

```
META-INF/
META-INF/MANIFEST.MF
cities/TerrainMesh.class 
```

如您所见，`TerrainMesh$Vertex.class`JAR 文件中缺少 。可以预见的是，当调用`TerrainMesh`使用内部`Vertex`类的方法时，我得到`java.lang.NoClassDefFoundError`. 我很确定这是因为内部类不包含在 JAR 中。

如何将内部类放入 JAR 文件中？`jar cf`忽略它似乎真的很奇怪。

对于它的价值，我已经验证`jar tf`在其他人制作的 JAR 文件上运行*确实*显示了内部类。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T00:33:40.873

解决方案是在调用时避开美元符号`jar cf`：

```
jar cf jar/cities.jar -C java_classes "cities/TerrainMesh.class" -C java_classes "cities/TerrainMesh\$Vertex.class" 
```

# ios - 带有 RESTKIT 的 ESPN iOS API

> ID：13224481
> 
> 赞同：2
> 
> 时间：2012-11-05T00:30:06.257
> 
> 标签：ios, objective-c, api, restkit, espn

**编辑-我最近在 Git 上发布了一个关于如何解决这个问题的教程......下面是一个链接 [https://github.com/lukejgeger/ESPN-API-Example.git](https://github.com/lukejgeger/ESPN-API-Example.git)**

我正在使用 ESPN API，我只是想用 NBA 的所有球队来填充表格视图。我正在使用 restkit 并且遇到了一些麻烦。

下面是一些代码

```
RKURL *baseURL = [RKURL URLWithBaseURLString:@"http://api.espn.com"];

RKObjectManager *objectManager = [RKObjectManager objectManagerWithBaseURL:baseURL];
objectManager.client.baseURL = baseURL;

RKObjectMapping* taskMapping = [RKObjectMapping mappingForClass:[Team class]];
[taskMapping mapKeyPath:@"name" toAttribute:@"teamName"];
[objectManager.mappingProvider setObjectMapping:taskMapping forResourcePathPattern:@"/teams"];
[objectManager loadObjectsAtResourcePath:[NSString stringWithFormat:@"/v1/sports/basketball/nba/teams?apikey=%@",kAPIKey] delegate:self];
[objectManager.mappingProvider setMapping:taskMapping forKeyPath:@"name"]; 
```

我收到响应代码 200，但我收到错误消息

```
231 Encountered errors during mapping: Could not find an object mapping for keyPath 
```

我为团队返回的 JSON 的完整响应如下

```
{
    "sports": [
    {
        "name": "basketball",
        "id": 40,
        "leagues": [
        {
            "name": "National Basketball Assoc.",
            "abbreviation": "nba",
            "id": 46,
            "groupId": 7,
            "shortName": "NBA",
            "teams": [
            {
                "id": 1,
                "location": "Atlanta",
                "name": "Hawks",
                "abbreviation": "ATL",
                "color": "002B5C",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/1"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/1/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/1/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/atl/atlanta-hawks?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=1&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 2,
                "location": "Boston",
                "name": "Celtics",
                "abbreviation": "BOS",
                "color": "006532",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/2"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/2/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/2/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/bos/boston-celtics?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=2&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 3,
                "location": "New Orleans",
                "name": "Hornets",
                "abbreviation": "NO",
                "color": "0093B1",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/3"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/3/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/3/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/no/new-orleans-hornets?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=3&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 4,
                "location": "Chicago",
                "name": "Bulls",
                "abbreviation": "CHI",
                "color": "000000",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/4"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/4/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/4/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/chi/chicago-bulls?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=4&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 5,
                "location": "Cleveland",
                "name": "Cavaliers",
                "abbreviation": "CLE",
                "color": "061642",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/5"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/5/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/5/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/cle/cleveland-cavaliers?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=5&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 6,
                "location": "Dallas",
                "name": "Mavericks",
                "abbreviation": "DAL",
                "color": "0C479D",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/6"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/6/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/6/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/dal/dallas-mavericks?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=6&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 7,
                "location": "Denver",
                "name": "Nuggets",
                "abbreviation": "DEN",
                "color": "0860A8",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/7"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/7/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/7/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/den/denver-nuggets?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=7&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 8,
                "location": "Detroit",
                "name": "Pistons",
                "abbreviation": "DET",
                "color": "FA002C",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/8"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/8/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/8/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/det/detroit-pistons?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=8&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 9,
                "location": "Golden State",
                "name": "Warriors",
                "abbreviation": "GS",
                "color": "00275D",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/9"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/9/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/9/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/gs/golden-state-warriors?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=9&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 10,
                "location": "Houston",
                "name": "Rockets",
                "abbreviation": "HOU",
                "color": "D40026",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/10"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/10/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/10/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/hou/houston-rockets?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=10&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 11,
                "location": "Indiana",
                "name": "Pacers",
                "abbreviation": "IND",
                "color": "061642",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/11"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/11/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/11/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/ind/indiana-pacers?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=11&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 12,
                "location": "Los Angeles",
                "name": "Clippers",
                "abbreviation": "LAC",
                "color": "FA0028",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/12"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/12/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/12/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/lac/los-angeles-clippers?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=12&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 13,
                "location": "Los Angeles",
                "name": "Lakers",
                "abbreviation": "LAL",
                "color": "542582",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/13"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/13/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/13/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/lal/los-angeles-lakers?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=13&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 14,
                "location": "Miami",
                "name": "Heat",
                "abbreviation": "MIA",
                "color": "000000",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/14"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/14/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/14/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/mia/miami-heat?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=14&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 15,
                "location": "Milwaukee",
                "name": "Bucks",
                "abbreviation": "MIL",
                "color": "003813",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/15"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/15/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/15/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/mil/milwaukee-bucks?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=15&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 16,
                "location": "Minnesota",
                "name": "Timberwolves",
                "abbreviation": "MIN",
                "color": "0E3764",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/16"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/16/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/16/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/min/minnesota-timberwolves?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=16&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 17,
                "location": "Brooklyn",
                "name": "Nets",
                "abbreviation": "BKN",
                "color": "06143F",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/17"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/17/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/17/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/bkn/brooklyn-nets?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=17&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 18,
                "location": "New York",
                "name": "Knicks",
                "abbreviation": "NY",
                "color": "225EA8",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/18"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/18/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/18/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/ny/new-york-knicks?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=18&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 19,
                "location": "Orlando",
                "name": "Magic",
                "abbreviation": "ORL",
                "color": "0860A8",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/19"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/19/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/19/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/orl/orlando-magic?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=19&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 20,
                "location": "Philadelphia",
                "name": "76ers",
                "abbreviation": "PHI",
                "color": "000000",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/20"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/20/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/20/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/phi/philadelphia-76ers?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=20&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 21,
                "location": "Phoenix",
                "name": "Suns",
                "abbreviation": "PHX",
                "color": "23006A",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/21"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/21/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/21/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/phx/phoenix-suns?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=21&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 22,
                "location": "Portland",
                "name": "Trail Blazers",
                "abbreviation": "POR",
                "color": "000000",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/22"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/22/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/22/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/por/portland-trail-blazers?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=22&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 23,
                "location": "Sacramento",
                "name": "Kings",
                "abbreviation": "SAC",
                "color": "393996",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/23"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/23/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/23/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/sac/sacramento-kings?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=23&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 24,
                "location": "San Antonio",
                "name": "Spurs",
                "abbreviation": "SA",
                "color": "000000",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/24"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/24/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/24/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/sa/san-antonio-spurs?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=24&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 25,
                "location": "Oklahoma City",
                "name": "Thunder",
                "abbreviation": "OKC",
                "color": "C67C03",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/25"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/25/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/25/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/okc/oklahoma-city-thunder?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=25&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 26,
                "location": "Utah",
                "name": "Jazz",
                "abbreviation": "UTAH",
                "color": "06143F",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/26"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/26/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/26/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/utah/utah-jazz?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=26&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 27,
                "location": "Washington",
                "name": "Wizards",
                "abbreviation": "WSH",
                "color": "0E3764",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/27"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/27/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/27/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/wsh/washington-wizards?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=27&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 28,
                "location": "Toronto",
                "name": "Raptors",
                "abbreviation": "TOR",
                "color": "CE0F41",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/28"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/28/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/28/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/tor/toronto-raptors?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=28&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 29,
                "location": "Memphis",
                "name": "Grizzlies",
                "abbreviation": "MEM",
                "color": "5D76A8",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/29"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/29/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/29/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/mem/memphis-grizzlies?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=29&ex_cid=espnapi_public"
                        }
                    }
                }
            },
            {
                "id": 30,
                "location": "Charlotte",
                "name": "Bobcats",
                "abbreviation": "CHA",
                "color": "FE3310",
                "links": {
                    "api": {
                        "teams": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/30"
                        },
                        "news": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/30/news"
                        },
                        "notes": {
                            "href": "http://api.espn.com/v1/sports/basketball/nba/teams/30/news/notes"
                        }
                    },
                    "web": {
                        "teams": {
                            "href": "http://espn.go.com/nba/team/_/name/cha/charlotte-bobcats?ex_cid=espnapi_public"
                        }
                    },
                    "mobile": {
                        "teams": {
                            "href": "http://m.espn.go.com/nba/clubhouse?teamId=30&ex_cid=espnapi_public"
                        }
                    }
                }
            }]
        }]
    }],
    "resultsOffset": 0,
    "resultsLimit": 50,
    "resultsCount": 30,
    "timestamp": "2012-11-05T00:40:18Z",
    "status": "success"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:39:05.460

你的问题在这里：

```
[objectManager.mappingProvider setMapping:taskMapping forKeyPath:@"name"]; 
```

由于 taskMapping 将“name”映射到“teamName”，因此为 keyPath“name”分配该映射将导致以下搜索：“name.name”，这显然不是您想要的。其余代码似乎是正确的，我只是删除该行，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:59:47.793

下面是一个关于如何在 iOS 上使用 ESPN-API 的教程

[https://github.com/lukejgeger/ESPN-API-Example.git](https://github.com/lukejgeger/ESPN-API-Example.git)

# ruby-on-rails-3.2 - Rails：确认修饰符回调？

> ID：13224482
> 
> 赞同：12
> 
> 时间：2012-11-05T00:30:18.243
> 
> 标签：ruby-on-rails-3.2, unobtrusive-javascript, link-to, view-helpers, link-to-remote

我想调用一个以用户对确认框的响应为条件的 javascript 函数。

例如，我有以下锚点：

```
<%= link_to 'Sign Out', destroy_session_path, confirm: 'Are you sure that you would like to sign out?', method: :delete %> 
```

我应该放弃不显眼的 javascript 并将我自己的 jQuery 回调绑定到我的锚点吗？

还是有一些神奇的方法可以将回调函数传递给 Rails url 助手？我没有在[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html)中看到任何关于回调的讨论。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-05T01:36:39.583

通过跟踪`link_to`源代码，我看到`:confirm`修饰符被传递给[convert_options_to_data_attributes](http://apidock.com/rails/ActionView/Helpers/UrlHelper/convert_options_to_data_attributes)方法，该方法指向现在与 Rails 捆绑的[ujs 脚本（通过 jQuery 的不显眼的 javascript）。](https://github.com/rails/jquery-ujs/blob/master/src/rails.js)在这里我们发现最终用户的响应被传递给了一个`confirm:complete`使用`data-confirm`html 中的属性调用的事件。

所以看起来答案是“不，你不能通过 url helper 传递回调”。但是你可以在你的回调中`app/javascript`监听这个事件。考虑到我仍然让 Rails 处理事件预防和传播，这似乎是实现我的目标的最不显眼的方式。我等待所有这一切发生，然后调用我的函数。

```
$(document).on('confirm:complete', function (e, answer) {
  if (answer) {
    // user confirmed!
    myCallbackFunction();
  } else {
    // user canceled!
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T20:12:10.290

我有一个类似的问题（[How to use inline :confirm option for html helpers with AJAX calls?](https://stackoverflow.com/questions/15959047/how-to-use-inline-confirm-option-for-html-helpers-with-ajax-calls)）。@Micah 的答案，即使有效，也不是“Rails 3 方式”。

1.  remote: true 选项需要添加到 link_to 助手中，例如

`link_to 'Sign Out', destroy_session_path, remote: true, confirm: 'Are you sure that you would like to sign out?', method: :delete`

2.  在控制器更改`respond_to`块中回答 js

3.  创建一个名称与您的方法对应的 js 文件，例如 destroy_session.js.coffee

### app/views/competitions/destroy_session.js.coffee：

```
jQuery ->
  $("form[data-remote]").on "ajax:success", (e, data, status, xhr) ->
    $(e.currentTarget).closest('tr').fadeOut()` 
```

希望有帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-20T02:59:25.843

在 2020 年，接受的答案对我不起作用。我最终做了这样的事情：

```
$(document).on('confirm:complete', function (e) {
  if (e.originalEvent.detail[0]) {
    // user confirmed!
    myCallbackFunction();
  } else {
    // user canceled!
  }
}); 
```

# ios - 在 GLK 视图控制器中使用 GLKView

> ID：13224483
> 
> 赞同：2
> 
> 时间：2012-11-05T00:30:35.357
> 
> 标签：ios, glkit, xcode-storyboard

我一直试图解决这个问题，但没有成功。我创建了一个故事板，它在 GLK 视图控制器中嵌入了一个 GLKView（我无法发布图像，因为我还没有足够的声望点）。我似乎无法让我的绘图代码使用 GLKView 而不是 GLK View Controller 的视图进行绘图。我尝试在 myGLKViewController.m 的 ViewDidLoad 中执行以下操作：

```
GLKView *view = (GLKView *)self.view;
view.context = self.context;

// adding to make myGLKView the actual view used
self.view.frame = _myGLKView.frame;
[self.view addSubview:_myGLKView]; 
```

[注意：_myGLKView 是故事板中嵌入的 GLKView 的出口。使用调试器，它确实有正确的界限，所以我知道我在正确的轨道上]。我已经尝试了各种组合，但我根本无法让它工作。我正在使用 xcode 4.5.1 和 iOS 6。提前感谢您的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T08:21:54.063

当您从情节提要加载时，与控制器一起加载的视图是嵌入式视图，因此您似乎正在尝试将视图添加为其自身的子视图。可能的结果是您的视图不再连接到窗口，并且不会显示。

如果您删除对 addSubview 和自定义插座的调用，您应该能够使用 self.view，它已经表示通过视图控制器超类中的插座的连接。

# python - Sort() 在 Python for Dict 中无法正常工作

> ID：13224487
> 
> 赞同：0
> 
> 时间：2012-11-05T00:31:14.330
> 
> 标签：python, sorting, csv, dictionary

我有一个包含许多列的 CSV 文件。我正在尝试根据其中一列中的值对行进行排序（按数字降序排列）。而且我只希望它输出前 10 名。但是，当我使用以下代码时，我得到的输出不正确。

```
import csv
f = open('SNPs.csv', "rU")
reader = csv.reader(f)
output = [row for row in reader]
output.sort(key=lambda x: x[32], reverse=True)
print dict((row[10], (row[11], row[8], row[32])) for row in output[:10]) 
```

输出类似于：

```
'XRgroup8': ('38', '2', '0.47'), '2': ('30', '13', '0.37'), 'Chromosome': ('Position', 'Distance', 'GC'), 'XRgroup5': ('54', '1', '0.45') 
```

很明显，它没有返回 10 个值，而且它们也不按顺序排列。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:38:29.093

您需要知道的第一件事：
Python 的 dicts 是无序的，因此无法排序。

如果您需要维护顺序的字典，请查看[http://docs.python.org/2/library/collections.html#collections.OrderedDict](http://docs.python.org/2/library/collections.html#collections.OrderedDict)

第二件事：

dict 的键是唯一的。
如果您尝试添加字典中已经存在的键，则该值将被覆盖。
这是您没有获得您希望的所有元素的最可能原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:36:38.503

列表已排序，`output`但字典是无序的，这就是为什么您在结果字典中看不到任何顺序的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T00:36:57.960

您正在对*字符串*进行排序（按*字典顺序*排序），但希望它们按*数字顺序排序*。这不会发生。您可能希望将您的排序`key`功能更改为：`lambda x: float(x[32])`这样您就可以根据按*数字*排序的浮点数进行排序。

* * *

另请注意，字典不会保留任何该顺序（您可以使用 a`collections.OrderedDict`代替——但我假设您已经知道这一点）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T00:37:22.203

奔跑的那一刻

```
print dict((row[10], (row[11], row[8], row[32])) for row in output[:10]) 
```

您已将排序后的输出 ( `output.sort(...)`) 转换为无序字典，而字典本质上是作为 Python 中的哈希表实现的。详细解释 - [http://mail.python.org/pipermail/python-list/2000-March/048085.html](http://mail.python.org/pipermail/python-list/2000-March/048085.html)

# php - PHP printf 存储和输出

> ID：13224494
> 
> 赞同：1
> 
> 时间：2012-11-05T00:32:11.283
> 
> 标签：php, printf, output

我知道 printf 用于输出， sprintf 用于存储。

但在这段代码中：

```
$str = printf('%.1f', 1.3);
echo $str; 
```

为什么输出 1.33？我假设它会输出 1.31.3？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T00:36:24.123

[**PHP 中的printf**](http://php.net/manual/en/function.printf.php)函数实际上做了两件事：打印其参数（根据格式字符串，作为第一个发送）并返回此打印字符串的长度。

通常不使用返回的值`printf`- 但在这种情况下不是。由于（按格式）`printf`这里必须打印“1.3”字符串（小数点后只有一位），它的长度是 3 - 所以它存储在`$str`变量中并在下一个语句中打印（带有`echo`）。所以整个输出是'1.33'。

作为旁注，这...

```
$str = print(1.3);
echo $str; 
```

... 打印 '1.31'，因为[**print**](http://php.net/manual/en/function.print.php)也做了两件事 - 打印它的参数并返回 1。

# android - AndEngine重力不起作用

> ID：13224497
> 
> 赞同：2
> 
> 时间：2012-11-05T00:32:25.010
> 
> 标签：android, andengine, gravity

大家好，我正试图让一个精灵落在我的游戏中。我搜索了整个网络，我这样做了：

```
 scene = new Scene();

    main = new Sprite(sX, sY, mainTextureRegion);
    main.setScale(1);
    main.setFlippedHorizontal(true);
    scene.attachChild(main);
    mPhysicsWorld = new PhysicsWorld(new Vector2(0, SensorManager.GRAVITY_EARTH), false);
    final FixtureDef objectFixtureDef = PhysicsFactory.createFixtureDef(1, 0.5f, 0.5f);
    final Body body = PhysicsFactory.createBoxBody(mPhysicsWorld, main, BodyType.DynamicBody, objectFixtureDef);
    mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(main, body, true, true));
    final Vector2 gravity = new Vector2(0, 5f);
    mPhysicsWorld.setGravity(gravity);

    scene.registerUpdateHandler(new IUpdateHandler() {
        @Override
        public void onUpdate(float pSecondsElapsed) {
            mPhysicsWorld.onUpdate(pSecondsElapsed);
        }

        @Override
        public void reset() {}
    }); 
```

但是当我启动游戏时，精灵并没有掉下来！为什么 ？？请让我绝望！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T05:59:59.953

Sprite 不使用物理，但 body 使用。您应该使用物理连接器（将您的精灵与您的身体连接起来）：

设置主体变量：

```
Body yourBody = PhysicsFactory.createBoxBody(mPhysicsWorld, main, BodyType.DynamicBody, objectFixtureDef); 
```

然后使用这个物理连接器：

```
mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(main, yourBody, true, true)); 
```

对不起我的英语不好。

# html - 我的网站上所有浏览器都忽略了@font face css 规则。请帮我

> ID：13224501
> 
> 赞同：3
> 
> 时间：2012-11-05T00:33:16.853
> 
> 标签：html, css, fonts

基本上我一直在把头发扯下来。我已经尝试了所有可以在网上找到的东西，但无法在我的网站上使用任何自定义字体。我不是网页设计师，如果有人可以帮助我，我将不胜感激。以下代码是我的 css 文件中的内容：

```
@font-face {
font-family: "digitica";
src: url("digitica.eot");
url("digitica.woff") format("woff");
url("digitica.otf") format("opentype");
url("digitica.ttf") format("truetype");
url("digitica.svg#webfont") format("svg");
font-weight: normal;
font-style: normal;
} 
```

我已将所有字体类型上传到服务器，并指的是字体如下：

```
.xyz {
font-family: "digitica"; <<<< Does the space matter between : & "digitica"?
} 
```

然后放置：

```
<div class="xyz"> 
```

在这个自定义字体中我想要的文本周围

```
<!-- end .xyz --></div> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T00:36:59.117

```
src: url("digitica.eot"),
url("digitica.woff") format("woff"),
url("digitica.otf") format("opentype"),
url("digitica.ttf") format("truetype"),
url("digitica.svg#webfont") format("svg"); 
```

使用逗号而不是分号来分隔字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:37:38.693

你的`@font-face`语法是错误的。尝试：

```
@font-face {
    font-family: 'digitica';
    src: url('digitica.eot');
    src: url('digitica.eot?#iefix') format('embedded-opentype'),
         url('digitica.woff') format('woff'),
         url('digitica.ttf')  format('truetype'),
         url('digitica.svg#digitica') format('svg');
    }

.xyz {
    font-family: "digitica";
    } 
```

# ruby - 如何使用自定义 RR 通配符匹配器？

> ID：13224507
> 
> 赞同：0
> 
> 时间：2012-11-05T00:34:08.553
> 
> 标签：ruby, rspec, rr

我为[RR](https://github.com/btakita/rr)创建了一个通配符匹配器，它通过将 JSON 字符串解析为哈希来匹配它们。这是因为 JSON（反）序列化不保留顺序；如果我们有：

```
{ 'foo': 42, 'bar': 123 } 
```

...然后在（反）序列化之后，我们可能会发现我们的更新方法被调用：

```
{ 'bar': 123, 'foo': 42 } 
```

通配符匹配器如下所示：

```
class RR::WildcardMatchers::MatchesJsonString

  attr_reader :expected_json_hash

  def initialize(expected_json_string)
    @expected_json_hash = JSON.parse(expected_json_string)
  end

  def ==(other)
    other.respond_to?(:expected_json_hash) && other.expected_json_hash == self.expected_json_hash
  end

  def wildcard_matches?(actual_json_string)
    actual_json_hash = JSON.parse(actual_json_string)
    @expected_json_hash == actual_json_hash
  end
end

module RR::Adapters::RRMethods
  def matches_json(expected_json_string)
    RR::WildcardMatchers::MatchesJsonString.new(expected_json_string)
  end
end 
```

...我们像这样使用它：

```
describe 'saving manifests' do

  before do
    @manifests = [
      { :sections => [], 'title' => 'manifest1' },
      { :sections => [], 'title' => 'manifest2' }
    ]

    mock(manifest).create_or_update!(matches_json(@manifests[0].to_json)) { raise 'uh oh' }
    mock(manifest).create_or_update!(matches_json(@manifests[1].to_json))

    parser = ContentPack::ContentPackParser.new({
                                                  'manifests' => @manifests
                                                })
    @errors = parser.save
  end

  it 'updates manifests' do
    manifest.should have_received.create_or_update!(anything).twice
  end
end 
```

这符合[RR 文档](http://www.rubydoc.info/github/btakita/rr/master/RR/WildcardMatchers)。但是，它不`mock()`期望与 JSON 匹配的参数，而是期望参数是一个`MatchesJsonString`对象：

```
 1) ContentPack::ContentPackParser saving manifests updates manifests
     Failure/Error: mock(Manifest).create_or_update!(matches_json(@manifests[0].to_json)) { raise 'uh oh' }
     RR::Errors::TimesCalledError:
       create_or_update!(#<RR::WildcardMatchers::MatchesJsonString:0x13540def0 @expected_json_hash={"title"=>"manifest1", "sections"=>[]}>)
       Called 0 times.
       Expected 1 times.
     # ./spec/models/content_pack/content_pack_parser_spec.rb:196 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:47:25.333

答案是我链接的文档中有错字。这（我的重点）：

```
#wildcard_matches?(other)

wildcard_matches? is the method that actually checks the argument against the expectation. It should return true if other is considered to match, false otherwise. In the case of DivisibleBy, wildcard_matches? reads: 
```

...实际上应该是：

```
#wildcard_match?(other)

... 
```

我的一位同事建议我们将我们的代码与 rr gem 中定义的匹配器之一进行比较，然后差异就很明显了。

# ubuntu - Linux (Ubuntu)：通过命令行安全移除 U 盘

> ID：13224509
> 
> 赞同：50
> 
> 时间：2012-11-05T00:34:42.500
> 
> 标签：ubuntu, usb

如果您的 shell 脚本可以帮助您在完成工作后**安全地移除闪存盘，那就太好了。**该解决方案有望满足以下需求：

1.  假设闪存盘`/media/A`与许多其他闪存盘一起安装，并且代码可以选择性地仅删除`/media/A`而不干扰其他磁盘。例如，我可以`/media/A`作为参数传递。
2.  一个轻量级的解决方案。安装另一个大小为 100MB 的包来完成任务会让人发疯。
3.  我知道一些命令，比如`hdparm`它们的文档很难阅读。如果有人可以为我提供解决方案，我希望他/她也可以提供参数的解释等。
4.  如果代码可以处理各种闪存盘（例如，我在 2003 年购买的 32 MB 的旧闪存盘）（以及可选的便携式磁盘），则最好。
5.  它应该达到右键单击磁盘→单击“安全删除驱动器”的确切效果。安全问题将占上风，否则可能只是拔掉通常不会受伤的磁盘。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-11-05T01:27:50.027

您可以使用 udisk 执行此操作。默认情况下不安装，但安装起来很容易（一旦安装，包的大小就像一个兆字节）......

```
sudo apt-get install udisks 
```

安装后，您可以使用以下命令分离 USB 驱动器...

```
sudo udisks --unmount /dev/sdb1
sudo udisks --detach /dev/sdb 
```

第一行卸载它。就像任何其他分区一样，此时您仍然可以重新安装它。第二行将其分离。在此之后，它会断电，您必须将其移除/重新插入才能重新安装。

澄清一下，*sdb*是设备，*sdb1*、*sdb2*、*sdb3*等是设备上的分区。此外，您需要先卸载所有挂载点，然后再尝试分离设备。通常使用 USB 记忆棒/驱动器只有一个，但这是一个您应该知道的警告。

从挂载点获取设备名称需要你从挂载或其他东西中拉出来。

# algorithm - 在树中寻找最短路径

> ID：13224512
> 
> 赞同：1
> 
> 时间：2012-11-05T00:34:47.817
> 
> 标签：algorithm, tree, graph-theory, dynamic-programming, shortest-path

我很难找到以下问题的解决方案。

*假设一家公司需要在未来五年内拥有一台机器。每台新机器的成本为 100,000 美元。一台机器在第 i 年运行期间的年运行成本如下：C1 = 6000 美元，C2 = 8000 美元，C3 = 12,000 美元。一台机器在交易之前最多可以保留三年。这意味着机器可以在前两年保留或交易，并且必须在其三岁时交易。i 年后的价值交易是 t1 = 80,000 美元，t2 = 60,000 美元，t3 = 50,000 美元。如果公司打算在第 0 年购买一台新机器，公司如何在五年期间（第 0 年到第 5 年）将成本降至最低？*
*设计基于动态规划的最优解。*

这个问题可以用树来表示。这是图表。 ![树表示](../Images/e5d7e5550cf45c2f88090c86bed108f5.png)

现在我认为在上述树中找到最短路径将为我提供最佳解决方案。但我不知道该怎么做。以下是我的问题，

*   关于这个问题有一个经典的问题吗？（如[旅行推销员问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem)或[变革问题](http://en.wikipedia.org/wiki/Change-making_problem)）
    *   如果是，那是什么？有哪些方法可以解决？
    *   如果没有，那么如何解决这个问题。

也欢迎任何其他建议。

伙计们，我需要一些关于这个问题的指导和帮助。（不要认为这是要求你完成我的作业。）我在[这里](http://chansmsc.blogspot.com/2012/05/dynamic-programming-solution-for-buying.html)找到了这个问题的完整 Java 实现。但它没有使用动态规划来解决问题。先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T04:04:49.603

该公司希望在 5 年内将成本降至最低。在第 0 年，他们将购买一台机器，并且每年他们必须决定该机器是保留还是交易。为了达到最佳解决方案，我们必须在每年年底做出一系列选择。当我们做出每个选择时，经常会出现相同的子问题。因此，我们到达了一个位置，即给定的子问题可能来自多个部分的选择集。在设计基于动态规划的最优解时，我们可以通过结合子问题的解来解决问题。

让阶段对应于每年。状态是该年机器的年龄。决定是保留机器还是以旧换新。设 Ft(x) 是从时间 t 到时间 5 产生的最小成本，假设机器在时间 t 内使用了 x 年。 **基本情况**：

由于我们必须在 5 年末交易机器 F5(x)=-S[x]

*   第0年我们买了一台新机器F0(1)=N+M[1]+F1(0)
*   5岁至3岁范围内：0
*   保留现有机器最多 3 年：Ft(3)=N+M[0]+Ft+1(0) ；t≠0,1,2

    > def Fxy（自我，时间，年龄）：
    > 
    > ```
    >  if self.Matrix[time][age]==None: <- Overlaping subproblems avoided
    >         if(time>5 or age>2):
    >             return 0
    >         if time==5:
    >             self.Matrix[time][age]=T=self.S[age]
    >             self.Flag[time][age]='TRADE'                
    >         elif time==0: 
    >        self.Matrix[time][age]=K=self.N+self.M[0]+self.Fxy(time+1,time)
    >             self.Flag[time][age]='KEEP'             
    >         elif time==3 and age==2: 
    >        self.Matrix[time][age]=T=self.S[age]+self.N+self.M[0]+self.Fxy(time+1,0)
    > 
    >             self.Flag[time][age]='TRADE'                
    >         else:
    >             T=self.S[age]+self.N+self.M[0]+self.Fxy(time+1,0)                   
    >             if age+1<len(self.Matrix[0]):
    >                 K=self.M[age+1]+self.Fxy(time+1,age+1)  
    >             else:
    >                 K=self.M[age+1]
    >             self.Matrix[time][age]=min(T,K)             
    >             if(self.Matrix[time][age]==T and self.Matrix[time][age]==K):
    >                 self.Flag[time][age]='TRADE OR KEEP'
    >             elif(self.Matrix[time][age]==T):
    >                 self.Flag[time][age]='TRADE'
    >             else:
    >                 self.Flag[time][age]='KEEP'
    >         return self.Matrix[time][age]
    >     else:           
    >         return self.Matrix[time][age] 
    > ```

可以通过绘制包含所有可能路径并采用最小成本路径的决策树来实现最佳解决方案。我们使用递归算法遍历每个树级别并制作当前决策点出现的路径。例如：当它穿过 F1(0) 时，它有 'TRADE OR KEEP' 决定与之绑定。然后我们可以遍历两条可能的路径。当它遍历 F2(1) 时，因为它有 'KEEP' 决定，所以我们递归地遍历 F3(2)，右孩子。当'TRADE'遇到时，左孩子不断地到达叶子。

```
def recursePath(self,x,y):
    if(x==5):           
        self.dic[x].append(self.Flag[x][y])         
        return self.Flag[x][y]

    else:   
        if(self.Flag[x][y]=='TRADE OR KEEP'):
            self.recursePath(x+1,y)             
            self.recursePath(x+1,y+1)               

        if(self.Flag[x][y]=='KEEP'):
            self.recursePath(x+1,y+1)               

        if(self.Flag[x][y]=='TRADE'):
            self.recursePath(x+1,y)         

        self.dic[x].append(self.Flag[x][y])         
        return self.Flag[x][y] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T04:50:31.000

我想我找到了一个更简单的动态程序解决方案。

Suggest Cost(n) 是在第 n 年销售时的总成本。而保持一台机器1、2、3年的成本为cost1,cost2,cost3（本题为26000、54000、76000）。

然后我们可以将问题划分为如下子问题：

```
**Cost(n)= MIN( Cost(n-1)+cost1, Cost(n-2)+cost2, Cost(n-3)+cost3 );** 
```

所以我们可以用“自下而上的方式”来计算它，也就是 O(n)。

我已经使用 C 实现并测试了它：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct costAndSell_S{
    int lastSellYear;
    int cost;
};

int operatCost[3]={6000,8000,12000};
int sellGain[3]={80000,60000,50000};
int newMachinValue=100000;
int sellCost[3];
struct costAndSell_S costAndSell[20];

void initSellCost(){

    memset( costAndSell, 0, sizeof(costAndSell));
    sellCost[0]=operatCost[0]+newMachinValue-sellGain[0];
    sellCost[1]=operatCost[0]+operatCost[1]+newMachinValue-sellGain[1];
    sellCost[2]=operatCost[0]+operatCost[1]+operatCost[2]+newMachinValue-sellGain[2];

    costAndSell[0].cost=100000;
    return;
}

int sellAt( int year ){
    if ( year<0){
        return(costAndSell[0].cost );
    }
    return costAndSell[year].cost;
}

int minCost( int i1, int i2, int i3 ){
    if ( (i1<=i2) && (i1<=i3) ){
        return(0);
    }else if ( (i2<=i1) && (i2<=i3) ){
        return(1);
    }else if ( (i3<=i1) && (i3<=i2) ){
        return(2);
    }
}
void findBestPath( int lastYear ){
    int i;
    int rtn;
    int sellYear;
    for( i=1; i<=lastYear; i++ ){
        rtn=minCost( sellAt(i-1)+sellCost[0], sellAt(i-2)+sellCost[1], sellAt(i-3)+sellCost[2]);
        switch (rtn){
            case 0:
                costAndSell[i].cost=costAndSell[i-1].cost+sellCost[0];
                costAndSell[i].lastSellYear=i-1;
                break;
            case 1:
                costAndSell[i].cost=costAndSell[i-2].cost+sellCost[1];
                costAndSell[i].lastSellYear=i-2;
                break;
            case 2:
                costAndSell[i].cost=costAndSell[i-3].cost+sellCost[2];
                costAndSell[i].lastSellYear=i-3;
                break;
        }
    }
    sellYear=costAndSell[lastYear].lastSellYear;
    printf("sellAt[%d], cost[%d]\n", lastYear, costAndSell[lastYear].cost );

    do{
            sellYear=costAndSell[sellYear].lastSellYear;
            printf("sellAt[%d], cost[%d]\n", sellYear, costAndSell[sellYear].cost );
    } while( sellYear>0 );
}

void main(int argc, char * argv[]){
    int lastYear;
    initSellCost();
    lastYear=atoi(argv[1]);
    findBestPath(lastYear);
} 
```

输出是：

```
sellAt[5], cost[228000]
sellAt[3], cost[176000]
sellAt[0], cost[100000] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T08:04:19.233

如果你想要像 Dijkstra 这样的东西，为什么不直接做 Dijkstra 呢？您需要在图形解释中更改一些内容，但这似乎非常可行：

Dijkstra 将根据最低成本标准结算节点。将该标准设置为“公司损失的钱”。您还将在 Dijkstra 解决节点，您需要确定究竟什么是节点。考虑一个节点是一个时间和一个属性状态，例如第 4 年和 x 年的工作机器。在第 0 年，损失的钱将是 0，您将没有机器。然后，您添加所有可能的边缘/选择/状态转换，这里是“购买机器”。您最终会在 Dijkstra PQ [第 1 年，第 1 年的工作机器] 上以一定的成本获得一个新节点。

从那时起，您可以随时出售机器（产生 [year 1, no machine] 节点），购买新机器 [year 1, new machine]）或继续使用相同的机器（[year 2, machine of age 2]） . 您只需继续开发最短路径树，直到获得第 5 年（或更多）所需的一切。

然后你有一组节点 [第 i 年，年龄 j 的机器]。要在第 i 年找到最适合贵公司的方案，只需在所有可能性中寻找它（我认为它永远是 [第 i 年，没有机器]）以获得您的答案。

由于 Dijkstra 是一种全对最短路径算法，它为您提供了所有年份的所有最佳路径

编辑：java的一些伪代码首先你应该创建一个节点对象/类来保存你的节点信息。

```
Node{
int cost;
int year;
int ageOfMachine;
} 
```

然后你可以添加节点并解决它们。确保您的 PQ 正在根据成本字段对节点进行排序。从根开始：

```
PQ<Node> PQ=new PriorityQueue<Node>();
Node root= new Root(0,0,-1);//0 cost, year 0 and no machine) 
PQ.offer(root); 
int [] best= new int[years+1];
//set best[0..years] equal to a very large negative number
while(!PQ.isEmpty()){
   Node n=PQ.poll();
   int y=n.year;
   int a=n.ageOfMachine;
   int c=n.cost;
   if(already have a cost for year y and machine of age a)continue;
   else{
      add [year y, age a, cost c] to list of settled nodes;
      //examine all possible further actions
      //add nodes for keeping a machine and trading a machine
      PQ.offer(new Node(cost+profit selling current-cost of new machine,year+1,1));
      PQ.offer(new Node(cost,year+1,age+1);//only if your machine can last an extra year
      //check to see if you've found the best way of business in year i
      if(cost+profit selling current>best[i])best[i]=cost+profit selling current;
   }
} 
```

沿着这些思路的东西会给你最好的做法，以达到成本最好的第一年[i]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T00:59:04.763

您提供的链接是动态编程 - 代码很容易阅读。我建议好好看看代码，看看它在做什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T08:26:23.443

我认为它不能使用动态编程，因为我找不到最佳子结构和重叠子问题。第 N 年的成本取决于第 N-1、N-2 和 N-3 年的行为。很难找到最优的子结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-05T08:01:58.120

以下方法可能有效。

每年年底，你有两个选择。您可以选择交易或选择再支付一年的维护费用。除了第三年，你别无选择。你必须确定交易。

这可以通过递归方法来解决，您可以在交易中选择最低成本，而不是在特定年份进行交易。

可以为第 n 年（无交易）的偏移量维护一个表，以便无需重新计算值

# html - HTML5在 Firefox 中不起作用，但在 IE 中起作用

> ID：13224518
> 
> 赞同：0
> 
> 时间：2012-11-05T00:35:32.330
> 
> 标签：html, css

这是一个非常令人沮丧的问题......我制作了一个使用 CSS3 样式的 HTML5 按钮 - 这个按钮在 IE 中（功能上）有效，但是当我在 Firefox（v 16.0.2）中打开我的页面时，该按钮不起作用（例如你不能点击它——它什么也不做）。更奇怪的是，我放了一个标准的 a href 链接只是为了测试（在同一页面上，在按钮旁边），我什至不能点击它（例如它什么都不做）。我已经在 IE 9 和 FireFox 16.0.2 的两台不同机器上测试了这个页面。

这是我的按钮的 HTML 代码：

```
<p><button type="button" onClick="location.href='index.php'" class="navigationButton">Back to World Map</button> 

<!-- test link -->
<a href="index.php">home</a></p> 
```

和CSS：

```
.navigationButton {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    color: #ffffff;
    padding: 10px 20px;
    background: -moz-linear-gradient(
        top,
        #86eb86 0%,
        #013006);
    background: -webkit-gradient(
        linear, left top, left bottom, 
        from(#86eb86),
        to(#013006));
    background: -ms-linear-gradient(#86eb86, #013006);
    background: -o-linear-gradient(#86eb86, #013006);
    background: linear-gradient(#86eb86, #013006);
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#86eb86', endColorstr='#013006');

    -moz-border-radius: 15px;
    -webkit-border-radius: 15px;
    border-radius: 15px;
    border: 3px solid #171717;
    -moz-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 10px rgba(087,087,087,0.7);
    -webkit-box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 10px rgba(087,087,087,0.7);
    box-shadow:
        0px 1px 3px rgba(000,000,000,0.5),
        inset 0px 0px 10px rgba(087,087,087,0.7);
    text-shadow:
        0px -1px 0px rgba(000,000,000,0.4),
        0px 1px 0px rgba(255,255,255,0.3);
} 
```

如果我对这个按钮的实现适用于其他任何人（在 IE 和 Firefox 中），请告诉我 - 否则如果我做错了什么，也请告诉我一个解释。

干杯!

**编辑：** 这是其中一页的完整代码。它是由 PHP/MySQL 动态生成的...

```
<?php

require_once("includes/dbconnect.php");

$title = "";
$regionName = "";
$mapScript = "";
$mapDivStyle = "";
$pageDimensions = "";
$footerMargin = "";

function numberFormat($item){

    return number_format($item, 0, '.', ',');
}

if(isset($_GET['region'])){
 $region = htmlentities($_GET['region']);

 if($region == "northAmerica")
 {
     $regionName = "North America";
     $title = $regionName . ' | WorldTravel Tourism App';
     $mapScript = "js/northAmerica.js";
     $mapDivStyle = " style=\"width: 800px; height: 707px; margin-bottom:20px;\"";
     $pageDimensions = " style=\"width: 960px; height: 1050px;\"";
     $footerMargin = " style=\"margin-top:1159px;\"";
 }
 else if($region == "southAmerica")
 {
     $regionName = "South America";
     $title = $regionName . " | WorldTravel Tourism App";
     $mapScript = "js/southAmerica.js";
     $mapDivStyle = " style=\"width: 800px; height: 668px; margin-bottom:20px;\"";
     $pageDimensions = " style=\"width: 960px; height: 950px;\"";
     $footerMargin = " style=\"margin-top:1059px;\"";
 }
 else if($region == "eurasia")
 {
     $regionName = 'Eurasia';
     $title = $regionName . " | WorldTravel Tourism App";
     $mapScript = "js/eurasia.js";
     $mapDivStyle = " style=\"width: 800px; height: 415px; margin-bottom:20px;\"";
     $pageDimensions = " style=\"width: 960px; height: 900px;\"";
     $footerMargin = " style=\"margin-top:1009px;\"";
 }
 else if($region == "africaMiddleEast")
 {
     $regionName = "Africa and the Middle East";
     $title = $regionName . " | WorldTravel Tourism App";
     $mapScript = "js/africaMiddleEast.js";
     $mapDivStyle = " style=\"width: 800px; height: 799px; margin-bottom:20px;\"";
     $pageDimensions = " style=\"width: 960px; height: 1150px;\"";
     $footerMargin = " style=\"margin-top:1259px;\"";
 }
 else if($region == "oceania")
 {
     $regionName = 'Oceania';
     $title = $regionName . " | WorldTravel Tourism App";
     $mapScript = "js/oceania.js";
     $mapDivStyle = " style=\"width: 738px; height: 527px; margin-bottom:20px;\"";
     $pageDimensions = " style=\"width: 960px; height: 800px;\"";
     $footerMargin = " style=\"margin-top:859px;\"";

 }
 else{
     $invalidRegion = $region;
     $title = "Region not found | WorldTravel Tourism App";
 }
}
else{
    header("Location: index.php");
}
?>
<!DOCTYPE HTML>
<html>
    <head>
        <title><?php echo($title); ?></title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <link href="css/styles.css" rel="stylesheet" type="text/css">
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <script type="text/javascript" src="Scripts/swfobject.js"></script>
        <script type="text/javascript" src="<?php echo ($mapScript) ?>"></script>
    </head>

    <body>

        <div class="container">

          <header class="header">
          <p style="margin-left:-14px;"><img src="images/world_globe.png" class="headerImage" alt="World Globe" /></p>
          <p style="margin-top:-150px; margin-left:150px; color:white; font-family:'Comic Sans MS', cursive; font-weight:bold; font-size:35px;">WorldTravel Global Tourism Application</p>
          </header>

          <div class="content"<?php echo ($pageDimensions); ?>>
            <h1><?php echo($regionName); ?></h1>

            <?php

            if(isset($invalidRegion)){
                echo ("<p>Sorry, the region \"$invalidRegion\" is not valid</p>");
            }

            ?>

            <?php if(isset($region)){ ?>
            &nbsp;
            <div id="flashContent" <?php echo $mapDivStyle; ?>>
            </div>   
            <?php } ?>
            <p></p>
            <?php

            if(!isset($invalidRegion)){

                $query = "SELECT * FROM region WHERE region.regionID = (SELECT region.regionID from region WHERE region.regionName = '$region');";

                $result = mysql_query($query, $connection);
                $row = mysql_fetch_assoc($result);
                $regionPopulation = numberFormat($row['regionPopulation']);
                $regionLandArea = numberFormat($row['regionLandArea']);
                $populationDensity = round((($row['regionPopulation'])/($row['regionLandArea'])), 2);
                $regionCountries = $row['regionCountries'];
                $numberPrefix = "";

                echo("<p><span class=\"infoHeadings\">Region population:</span> " . $regionPopulation . ".</p>");
                echo("<p><span class=\"infoHeadings\">Region land area:</span> " . $regionLandArea . " square kilometers.</p>");
                echo("<p><span class=\"infoHeadings\">Population density:</span> " . $populationDensity . " people per square kilometer.</p>");
                echo("<p><span class=\"infoHeadings\">Countries in region:</span> " . $regionCountries . ".</p>");

            }
            ?>

            <p><button type="button" onClick="location.href='index.php';" class="navigationButton">Back to World Map</button><p> 

            <!-- test link -->
            <p><a href="index.php">home</a></p>

          </div>

          <div class="footer"<?php echo ($footerMargin); ?>>
          </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T06:32:05.400

事实证明，我的一个元素的 z 索引是问题所在。在我的页面上，我的页脚 div 的 z-index 为 20，上边距为 500px，主要内容区域的 z-index 值较低（按钮所在的位置）。因为边距区域“覆盖”了按钮，所以我无法单击主要内容区域中的任何链接或按钮。

所以我已经解决了这个问题，虽然我仍然想知道为什么 FireFox 没有读取 z-indexing 而 IE 没有 - 我使用 Google 的 html5shiv 在旧版本的 IE 中启用 html5 元素）。

# html - css3“新”样式的flexbox无法在chrome中拉伸textarea

> ID：13224520
> 
> 赞同：7
> 
> 时间：2012-11-05T00:35:54.810
> 
> 标签：html, google-chrome, css, flexbox

我无法让 css3 灵活框布局模型在最新的 chrome 中工作，例如：

```
<!DOCTYPE html>
<html lang="en">
  <head>
      <style type="text/css">
        body { 
            background: #FFF;
        }

        div.content {
            position: fixed;
            width: 50%;
            height: 80%;
            top: 10%;
            left: 25%;
            padding: 10px;
            background-color: #FFFFFF;
            box-shadow: 0px 0px 25px 5px #333333;
            border-radius: 10px;

            display: -webkit-flex;
            -webkit-flex-flow: column;
            -webkit-align-items: stretch;
        } 

        div.content > * {
            -webkit-flex: 1 1 auto;
            padding: 10px;
            margin: 10px;
            background-color: #FFFFFF;
            border: 2px solid gray;
            height:0;
        }
      </style>
  </head>
  <body>
    <div class="content">
      <div>
          <label>label content</label>
      </div>

      <textarea>Text area test</textarea>

      <div></div>

      <input type="text" value="input field" />
    </div>
  </body>
</html>​ 
```

（这个的[jsfiddle](http://jsfiddle.net/nKzhk/7/)）

在上面的示例中，所有元素在主轴上正确弯曲，div 和 span 也在交叉轴上正确拉伸，但是输入和文本区域在交叉轴上没有正确拉伸。根据[规范](http://www.w3.org/TR/2012/CR-css3-flexbox-20120918/)，他们应该。

我不是在寻找解决方法，而是想知道我是否做错了什么或者我在规范中遗漏了什么会阻止它工作的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T16:49:34.083

Textareas 和 input 标签不会自动继承 flexbox 的 max-width 属性，因为它们不是盒子模型的一部分。为了让它们充当 div，您需要将它们包装在 div 中并赋予它们 100% 的宽度。这适用于当前版本的 Chrome 和 Canary。

[http://jsfiddle.net/nKzhk/29/](http://jsfiddle.net/nKzhk/29/)

```
 textarea {
        width: 100%;
    }

<div class="content">
  <div>
      <label>label content</label>
  </div>

    <div><textarea>Text area test</textarea></div>

  <div></div>

    <div><input type="text" value="input field" /></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-14T23:56:52.153

正如@ebidel 所指出的，这原来是一个浏览器实现错误，在最近的版本中不再是问题。

# jquery - 为什么 JS Lint 在 JQuery 库中报错？

> ID：13224522
> 
> 赞同：0
> 
> 时间：2012-11-05T00:35:58.273
> 
> 标签：jquery, asp.net-mvc-3, jslint, jshint

> **可能重复：**
> [如果 jQuery 验证失败，那么 JSLint 有什么用？](https://stackoverflow.com/questions/505251/what-good-is-jslint-if-jquery-fails-the-validation)

为什么我收到 JS 提示错误“‘函数’后缺少空格。” 对于一个空的 mvc 3 项目？

错误在第 28 行的文件“jquery-1.5.1-vsdoc.js”中“（函数（窗口，未定义）{”。

库不是按照标准编码的吗？

JS Lint/Hint 正在报告此文件中的最大错误数，也在“jquery-1.5.1.js”中。

我没有修改该文件 - 当我创建一个空的 MVC3 项目时它自动包含在内。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:42:00.697

像 jsHint 和 jsLint 这样的 Linter 是帮助工具。他们帮助团队以标准方式编码，但他们并没有真正检查您的脚本是否存在实际错误。对于这种反馈，您将更多地关注[esprima.js](http://esprima.org/)类型的工具。

这意味着您不必购买 linter 附带的任何默认值。事实上，这些工具很容易配置，以最适合您和您的团队工作流程（[jsHint 选项页面](http://www.jshint.com/docs/)）。

对于 jQuery，您可以在他们的 github 项目上找到他们的 jsHint 设置：[https ://github.com/jquery/jquery/blob/master/.jshintrc](https://github.com/jquery/jquery/blob/master/.jshintrc)

如果您将选项设置为这些，则不应出现任何错误。这就是为什么大多数编辑器允许你为每个项目设置一个 linter 配置，这样你就可以轻松地遵循每个项目的指导方针。

所以请记住，linter 只是帮助你的工具，而不是任何形式的大 T。

希望这有帮助！

# ios5 - 比较两个 UIImage

> ID：13224523
> 
> 赞同：1
> 
> 时间：2012-11-05T00:36:04.530
> 
> 标签：ios5, uiimage, quartz-graphics

有没有办法只检查两个 UIimages 是否不同。现在我正在使用以下方法，它工作正常，但需要时间。有没有其他选择？如果有任何不匹配区域的像素，它应该返回 false。

```
if ([UIImagePNGRepresentation(lastImage)                       
   isEqualToData:UIImagePNGRepresentation(newImage)] )
  {
     return true;
  }
else
  {
     return false;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T19:55:37.870

if you use TIFF there's no image conversion done. Takes very little time.

```
NSData *data = [image TIFFRepresentation];
NSData *data2 = [image2 TIFFRepresentation];

if ([data isEqualToData:data2]) {
    // Do Stuff
} 
```

# google-app-engine - DataNucleus 库和 maven-gae-plugin

> ID：13224524
> 
> 赞同：0
> 
> 时间：2012-11-05T00:36:06.290
> 
> 标签：google-app-engine, datanucleus, maven-gae-plugin

我正在使用 maven-gae-plugin 来管理 Google AppEngine 项目，但我不知道如何包含使用 JPA 所需的库。

[谷歌的文档](https://developers.google.com/appengine/docs/java/datastore/jpa/overview)说：

> 类路径必须包含 JAR 'datanucleus-core-*.jar'、'datanucleus-jpa-*'、'datanucleus-enhancer-*.jar'、'asm-*.jar' 和 'geronimo-jpa-*。 'appengine-java-sdk/lib/tools/' 目录以及所有数据类中的 jar'（其中 * 是每个 JAR 的相应版本号）。

我怎样才能告诉插件把所有的罐子放在类路径中？

到目前为止，我只是将`pom.xml`文件设置编辑`gae.version`为`1.7.3`（离开`datanucleus.version`并`1.1.5`运行`mvn gae:unpack`，但我无法让它工作。

首先，我有问题`javax.persistance`没有找到。我必须手动添加它`pom.xml`吗？

如果我这样做，开发服务器会启动，但我无法使用存储：我收到以下错误：

> 严重：找到 com.sharecost.entities.User 类的元数据，但该类没有增强！！请在运行 DataNucleus 之前增强类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:41:52.963

我找到了问题第二部分的解决方案。查看`POM.xml`文件，我发现所有实体都应该在一个`**/model`包中。

我仍然不知道是否`javax.persistence`真的需要手动包含依赖项。

# python - 如何使用 Python 从服务器/网站导入文件/列表

> ID：13224527
> 
> 赞同：0
> 
> 时间：2012-11-05T00:36:26.777
> 
> 标签：python

我想通过使用 python 必须从服务器/网站获取的标准 txt 文件来获得一个始终更新的列表。

例子

```
 women =["Dare1","Dare2","Dare3","Dare4","Dare5","Dare6"]

   men = ["Dare1","Dare2","Dare3","Dare4","Dare5","Dare6"] 
```

然后一旦程序重新打开，它会抓取更新的 txt

```
 women =["Dare1","Dare2","Dare3","Dare4","Dare5","Dare6","Dare7"]

   men = ["Dare1","Dare2","Dare3","Dare4","Dare5","Dare6"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T00:41:19.737

那么这个文本文件是在您的目标服务器上自动生成/更新的吗？如果您知道显示此文本文件的 url，那么它就像实现一个`urlretrieve`使用 python 的`urllib`模块来检索它并`cron`在您自己的系统上实现一个以便定期运行该 python 脚本一样简单。

这是它的用法示例：-

```
fName = "CFE_{0}{1}_VX.csv".format(m_codes[month],str(year)[-2:])
save_path = os.path.join(path, fName)
if os.path.exists(save_path) or forceDownload:
    print 'File already downloaded, skipping'
    return

urlStr = "http://cfe.cboe.com/Publish/ScheduledTask/MktData/datahouse/{0}".format(fName)
print 'Getting: %s' % urlStr
try:
    print save_path
    urlretrieve(urlStr, save_path)
except Exception as e:
    print e 
```

在这种情况下，我正在从芝加哥期权交易所下载一个 csv 文件。

# java - 如何将我创建的类的实例添加到 MultipartEntity？

> ID：13224529
> 
> 赞同：2
> 
> 时间：2012-11-05T00:36:40.797
> 
> 标签：java, android, multipartentity

所以我有一个我创建的 Workout 类，我想使用 HttpPost 将它发送到服务器。有没有办法可以将该类添加到 MultipartEntity 或者我应该如何发布它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T03:26:56.760

首先你的类必须实现 java.io.Serializable。

```
 MultipartEntity e = new MultipartEntity();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ObjectOutputStream oos = new ObjectOutputStream(baos);
        oos.writeObject(yourserializableobject);
        oos.flush();
        oos.close();
        InputStreamBody isb = new InputStreamBody(new ByteArrayInputStream(baos.toByteArray()), "o");
        e.addPart("o", isb); 
```

# backbone.js - 如果我覆盖“获取”，我如何填充主干模型？

> ID：13224530
> 
> 赞同：1
> 
> 时间：2012-11-05T00:36:41.063
> 
> 标签：backbone.js, google-places-api

我正在构建一些 JS 来使用主干访问 Google Places JS API。到目前为止，我真的坚持使用模型绑定。

我覆盖了“获取”以使用 Google API。对 Google 的调用工作得很好。

```
var Places = Backbone.Collection.extend({
    model: Place,

    fetch: function(options) {
        // SNIPPET //

        service = new google.maps.places.PlacesService(map);
        service.nearbySearch(request, this.googlePlaceCallback);

        // SNIPPET //
    },

    parse: function(response){
        // nerver  called
    },

    googlePlaceCallback: function(results, status) {
        // I do something here and is properly called after Google returns a response
    }

}); 
```

我还定义了一个非常简单的 View：

```
var MapView = Backbone.View.extend({

    initialize: function() {
        this.model = new Places();
        this.model.bind("reset", this.render, this);
        this.model.fetch();
    },

    render : function () {
        console.log( this.model.toJSON() );
    }

}); 
```

我不知道如何填充“模型”。谷歌返回预期结果，但我可以将它们设置为骨干模型。我需要在“googlePlaceCallback”中做些什么？我可能还需要覆盖“解析”，因为谷歌结果并不是很有趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:17:26.553

假设 results 是您想要的结果的集合，您应该能够实现回调，如下所示：

```
googlePlaceCallback: function(results, status) {
    this.add(results);
} 
```

由于 Places 是一个骨干集合，您只需在上面的代码中调用以下方法：http: [//backbonejs.org/#Collection-add](http://backbonejs.org/#Collection-add)

您还必须`this`在 googlePlaceCallback 函数中获得正确的引用（您想`this`成为 Collection）。一种方法是使用 Underscores`bindAll`方法 ( [http://underscorejs.org/#bindAll](http://underscorejs.org/#bindAll) )，您可以使用它来确保 Backbone 类中的所有方法都具有`this`Collection 本身的上下文。您可以在初始化时执行此操作，如下所示：

```
initialize: function() {
    _.bindAll(this);
} 
```

此外，没有调用 parse 的原因是因为您正在覆盖 fetch，并且 fetch 调用 parse。如果您查看带注释的主干代码，您将能够看到方法调用：[http ://backbonejs.org/docs/backbone.html](http://backbonejs.org/docs/backbone.html)

# ruby - 使用 BinData 从二进制数据创建用户定义的原始类型？

> ID：13224535
> 
> 赞同：2
> 
> 时间：2012-11-05T00:37:29.737
> 
> 标签：ruby, bindata

我有一组文件，我必须每晚从旧的 Cobol 系统下载它们。我将这些文件从二进制数据文件转换为 MySql 表。

我编写了一个 Ruby 程序，将 BinData 用于单个文件结构。每个文件中有几个字段包含压缩十进制数据 (Cobol COMP-3)。以下代码用于读取其中一个二进制文件，我编写了代码将该字段转换`amt1`为浮点十进制字段。

这段代码的问题在于，对于每个打包字段，我必须重复字段转换的代码，更糟糕的是，将每个字段的小数位数硬编码到代码中（参见程序中的注释代码）。

代码示例：

```
require 'bindata'
require 'bigdecimal'

class WangRec < BinData::Record
  string  :cust_no,         :read_length => 6
  string  :doc_date,        :read_length => 6
  string  :doc_no,          :read_length => 6
  string  :doc_type,        :read_length => 1
  string  :apply_to_no,     :read_length => 6
  string  :cust_no_alt,     :read_length => 6
  string  :apply_to_no_alt, :read_length => 6
  string  :doc_due_date,    :read_length => 6
  string  :amt1,            :read_length => 6 
  string  :amt2,            :read_length => 5
  string  :ref,             :read_length => 30
  string  :slsmn1,          :read_length => 3
  string  :slsmn2,          :read_length => 3
  string  :slsmn3,          :read_length => 3
  string  :amt3,            :read_length => 5
end

def packed(packed_field, dec_pos) 
  unpkd_field = packed_field.unpack('H12')
  num, sign = unpkd_field[0][0..-2], unpkd_field[-1]
  unless sign == 'f'
    amt = num.insert(0, '-')
  end

  if dec_pos > 0
    dec_amt = amt.insert((dec_pos + 1) * -1, '.')
  end

  return dec_amt.to_f 

end

wang_aropnfile = File.open('../data/wangdata/AROPNFIL.bin', 'rb')

count = 0

while !wang_aropnfile.eof?
  rec = WangRec.read(wang_aropnfile)

# The following line of code would have to be repeated for each
# packed field along with the decimal places
  amt1 = packed(rec.amt1, 2)

  puts "#{rec.cust_no} #{rec.doc_type} #{rec.doc_date} #{amt1}"

  count += 1
end

puts count 
```

如何创建我自己的名为 的数据类型原语`pkddec`，它接受一个`read_length`和`dec_pos`参数并创建一个`class PackedDecimal << BinData ::Primitive`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:19:02.720

实际上，我不能因为回答我的问题而受到赞扬，但非常感谢“BinData”的创建者 Dion Mendel 在 Ruby Forge 的支持中回答了这个问题。我昨晚在芝加哥时间接近午夜时提交了这个问题，今天早上醒来发现迪翁·孟德尔（Dion Mendel）的答案大约在 3 小时后得到了回答。我想与社区分享他的答案并展示工作代码。

```
require 'bindata'
require 'bigdecimal'

class PkdDec < BinData::Primitive
  mandatory_parameter :length
  default_parameter   :dec_pos => 0

  string  :str, :read_length => :length

  def get
    str_length = eval_parameter(:length)
    dec_pos    = eval_parameter(:dec_pos)
    unpkd_field = str.unpack("H#{str_length * 2}").first
    num, sign = unpkd_field[0..-2], unpkd_field[-1]
    unless sign == 'f'
      num = num.insert(0, '-')
    end

    if dec_pos > 0
      dec_amt = num.insert((dec_pos + 1) * -1, '.')
    else
      dec_amt = num
    end

    return dec_amt.to_f 

  end

  def set(dec_val)

    #  Not concerned about going the other way
    #  Reverse the get process above

  end

end

class WangRec < BinData::Record
  string  :cust_no, :read_length => 6
  string  :doc_date, :read_length => 6
  string  :doc_no,  :read_length => 6
  string  :doc_type,  :read_length => 1
  string  :apply_to_no, :read_length => 6
  string  :cust_no_alt, :read_length => 6
  string  :apply_to_no_alt, :read_length => 6
  string  :doc_due_date,    :read_length => 6
  PkdDec  :amt1,            :length => 6,  :dec_pos => 2 
  PkdDec  :amt2,            :length => 5,  :dec_pos => 2
  string  :ref,             :read_length => 30
  string  :slsmn1,          :read_length => 3
  string  :slsmn2,          :read_length => 3
  string  :slsmn3,          :read_length => 3
  PkdDec  :amt3,            :length => 5,  :dec_pos => 2

end

wang_aropnfile = File.open('../data/wangdata/AROPNFIL.bin', 'rb')

count = 0

while !wang_aropnfile.eof?
  rec = WangRec.read(wang_aropnfile)
  puts "#{rec.cust_no} #{rec.doc_type} #{rec.amt1} #{rec.amt2} #{rec.amt3}"

  count += 1
end

puts count 
```

再次感谢 Dion Mendel

# php - 检查外部 PHP 文件中的致命错误？

> ID：13224537
> 
> 赞同：2
> 
> 时间：2012-11-05T00:37:36.100
> 
> 标签：php, error-handling

例如，从我的 index.php 文件中，我想检查另一个 PHP 文件是否执行没有错误（如果是，则包含它），如果它确实失败并返回致命错误，我显然喜欢不包括它。有什么建议么？谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:49:34.063

您可以使用CLI的`-l` [参数：](http://www.php.net/manual/en/features.commandline.options.php)`php`

```
php -l filename.php 
```

并解析输出。

```
$o = `php -l filename.php`;

if (strpos($o, 'No syntax errors detected') !== false) {
    echo 'No errors';
} else {
    echo 'There are errors';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:49:44.250

您可能不想单独运行第二个文件。也就是说，你可以做两件事之一......

1.) 如果您真的想将它用作单独执行的包含，您可以使用诸如 CURL 之类的东西调用它，并让它输出预期结果或失败消息，然后读取并采取相应措施。

2.) 在 try/catch 语句中包含您的函数/类/等执行，以正确处理遇到的任何错误。[http://php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)可能会对您提供更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T00:54:24.673

这会将脚本作为一个单独的进程运行，没有共享变量/函数/状态/范围等...

```
$cmd = 'php file.php';
exec($cmd, $ar, $exit_status);
$wasFatal = $exit_status == 255; 
```

它很有可能使用与您的网络服务器 php.ini 不同的 php.ini 运行，因此请期待配置甚至 php 版本的差异。

# git - git-rev-list 的排序

> ID：13224541
> 
> 赞同：6
> 
> 时间：2012-11-05T00:38:32.873
> 
> 标签：git, git-rev-list

git-rev-list 如何排序它返回的提交？

我主要指的是并发开发分支上的提交，然后合并到主分支中。提交似乎没有按日期排序，这是有道理的，因为提交可以从过去或未来的不同时间中挑选出来。

例如，这里有一些历史`git-log`......

```
*   Sat, 25 Aug 2012 11:37:23 -0700 8238401
|\  
| * Thu, 23 Aug 2012 12:29:09 -0700 c9de861
* |   Fri, 24 Aug 2012 16:29:01 -0700 b7e8827
|\ \  
| * | Mon, 14 May 2012 20:46:30 +0200 0a1db74
| * | Mon, 14 May 2012 17:54:25 +0200 e03e71d
| * | Fri, 13 Jul 2012 12:01:11 +0200 bffa852
* | |   Fri, 24 Aug 2012 15:45:13 -0700 09fad50
|\ \ \  
| * | | Fri, 24 Aug 2012 12:19:22 -0700 97a17e4
| * | | Thu, 9 Aug 2012 19:43:25 -0700 5f4a61a
| * | | Fri, 3 Aug 2012 14:28:07 -0700 0c8858d
| * | | Thu, 2 Aug 2012 13:00:58 -0700 aa13bf0
| * | | Wed, 18 Jul 2012 14:30:15 -0700 decff7b
* | | |   Fri, 24 Aug 2012 15:43:19 -0700 091c742 
```

这是通过 rev-list 输出的相同历史记录。

```
$ git rev-list HEAD --max-count=13
8238401ccb9f7018c927866896bea583d351ad2a # 1 root
c9de8611d6a3e77757a714cdf6acf46178b1d622 # 2 descends into the second parent
b7e8827b8bbca0c69d85be34cc4a88888c1152f2 # 3 first parent of root
09fad5069636fb2e8cacf15817834e3d32ff6b8e # 4 descends into the first parent
091c742af985cc78711727ca06a24ae42b376fae
7fbca880aa5c011257ef734d0b5bfd5545dbaf6b
07c06f7a83640e11d6be13a87f02e986ecc6e4b3
1168410426293aef8ce33becb277ff225595e183
97a17e4e9fa5cafa531ff79cb88a9ee5c224a613
0a1db746fbcaf09681e446250f75581cc8f8fd05
e03e71da56608f60770eb80767dcd94e698cdcae
5f4a61aea834fe25ce1596bc9c0e0b5e563aa98b
0c8858de8c82bae3fd88513724689a07d231da7e 
```

rev-list 命令如何决定是列出第一个父级还是下降到第 n 个父级的提交图中？例如，在查看 (1) 之后，rev-list 下降到第二个父级 (2)。然而，在查看 (3) 之后，它下降到第一个父级 (4)。这种行为是否明确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T01:05:40.833

默认情况下，提交按时间倒序排列。您可以根据您传递的选项以不同的顺序获得输出。有关其他选项，请参阅[git-rev-list](http://www.kernel.org/pub/software/scm/git/docs/git-rev-list.html)手册页中的*提交排序*部分。

`git log`默认情况下也按时间倒序排列。但是，当您使用它运行它时`--graph`，意味着`--topo-order`.

最后，按日期提交排序是按*提交*日期完成的，但默认输出`git log`显示*作者*日期。使用补丁、精选和变基，这两者可能会不同步。

最后两点应该解释为什么您的两个输出的排序不同，以及为什么表面`git rev-list`上没有按日期排序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-29T20:40:51.600

> 这种行为是否明确？

在 Git 2.34（2021 年第 4 季度）中，修订遍历 API 已通过利用提交图（如果可用）来确定是否可以从任何现有 ref 访问提交，从而优化了修订遍历 API。

请参阅[Patrick Steinhardt ( ) 的](https://github.com/pks-t)[提交 f559d6d](https://github.com/git/git/commit/f559d6d45e7e58ae1f922213948723de77ea77bd)、[提交 809ea28](https://github.com/git/git/commit/809ea28f809e52d3204b597637b2f5e072c140f8)、[提交 bf9c0cb](https://github.com/git/git/commit/bf9c0cbddbcd730e4312ba5e19f8b8a2edd65bb3)、[提交 f45022d](https://github.com/git/git/commit/f45022dc2fd692fd024f2eb41a86a66f19013d43)（2021 年 8 月 9 日）和[提交 29ef1f2](https://github.com/git/git/commit/29ef1f27fed21b5b7d3c996a01f1364e7e841917)（2021 年 8 月 5 日[）](https://github.com/pks-t)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 a5619d4](https://github.com/git/git/commit/a5619d4f8d91a179d0e21aa16fda52fb4f0f7eaf))^(中，2021 年 9 月 3 日）)[`pks-t`](https://github.com/pks-t)
^([`gitster`](https://github.com/gitster))

> ## [`connected`](https://github.com/git/git/commit/f45022dc2fd692fd024f2eb41a86a66f19013d43): 不对输入修订进行排序
> 
> ^(签字人：Patrick Steinhardt)

> 为了计算从一组提示中可到达的对象是否都已连接，我们使用这些提示作为正引用进行修订遍历，并且`--not --all`.
> `--not --all`将导致修订遍历将所有预先存在的引用加载为无趣，这在具有许多引用的存储库中可能非常昂贵。
> 
> 对命令进行基准测试`git-rev-list`突出显示，迄今为止最昂贵的单个阶段是输入修订的初始排序：在加载所有引用之后，我们首先按作者日期对提交进行排序。
> 在一个拥有大约 220 万个引用的真实存储库中，它约占`git-rev-list`.
> 
> 最终，连通性检查根本不应该真正关心输入修订的顺序。
> 我们只关心我们是否真的可以走所有的物体，直到我们到达截止点。
> 所以对输入进行排序完全是浪费时间。
> 
> 引入一个新的“ `--unsorted-input`”标志，`git-rev-list`这将导致它不对提交进行排序，并调整连接检查以始终通过该标志。
> 这导致以下加速，在克隆中执行[`gitlab-org/gitlab`](https://gitlab.com/gitlab-org/gitlab.git)：
> 
> ```
> Benchmark #1: git rev-list  --objects --quiet --not --all --not $(cat newrev)
>   Time (mean ± σ):      7.639 s ±  0.065 s    [User: 7.304 s, System: 0.335 s]
>   Range (min … max):    7.543 s …  7.742 s    10 runs
> 
> Benchmark #2: git rev-list --unsorted-input --objects --quiet --not --all --not $newrev
>   Time (mean ± σ):      4.995 s ±  0.044 s    [User: 4.657 s, System: 0.337 s]
>   Range (min … max):    4.909 s …  5.048 s    10 runs
> 
> Summary
>   'git rev-list --unsorted-input --objects --quiet --not --all --not $(cat newrev)' ran
>     1.53 ± 0.02 times faster than 'git rev-list  --objects --quiet --not --all --not $newrev' 
> ```
> 
> 请注意，并非所有 ref 对客户端都是可见的。

`rev-list-options`现在在其[手册页](https://github.com/git/git/blob/f45022dc2fd692fd024f2eb41a86a66f19013d43/Documentation/rev-list-options.txt#L971-L975)中包含：

> ## `--unsorted-input`
> 
> 按照在命令行中给出的顺序显示提交，而不是按提交时间以相反的时间顺序对它们进行排序。不能与`--no-walk`或结合使用`--no-walk=sorted`。

`rev-list-options`现在在其[手册页](https://github.com/git/git/blob/f45022dc2fd692fd024f2eb41a86a66f19013d43/Documentation/rev-list-options.txt#L983-L984)中包含：

> 不能与`--graph`. 不能与 `--unsorted-input`if`sorted`或没有参数相结合。

* * *

2018 年：

Git 2.16（2018 年第一季度）将允许[`git describe`](https://git-scm.com/docs/git-describe)在用作`git describe <blob>`. [（在“哪个提交有这个 blob？](https://stackoverflow.com/a/48027778/6309)
”中 查看更多信息）

在这种情况下， git rev-list 添加了一个新订单。
请参阅[Stefan Beller (](https://github.com/stefanbeller) [)](https://github.com/stefanbeller)的[提交 ce5b6f9](https://github.com/git/git/commit/ce5b6f9be84690ba38eba10c42b3f7c7e2511abb)。[`stefanbeller`](https://github.com/stefanbeller)

> ## `revision.h`: 按照提交的顺序引入 blob/tree walk

> 在遍历提交时按看到树对象的顺序列出树对象的功能将在下一个提交中使用，在这里我们`git describe`不仅要描述提交，还要描述 blob。

这意味着[`git rev-list`手册页](https://github.com/git/git/blob/ce5b6f9be84690ba38eba10c42b3f7c7e2511abb/Documentation/rev-list-options.txt#L677-L692)有一个新的对象遍历顺序：

> ```
> --in-commit-order:: 
> ```
> 
> 按提交的顺序打印树和 blob id。
> 树和 blob id 在提交首次引用后打印。

# c++ - 从C ++中的整数数组中获取最大数

> ID：13224543
> 
> 赞同：1
> 
> 时间：2012-11-05T00:39:11.153
> 
> 标签：c++, arrays, input, max

我的学校还有另一项任务，它是：

> > 编写一个程序，从三个输入的数字中输出最大的数字

到目前为止，我已经这样做了：

```
#include <cstdlib>
#include <iostream>

using namespace std;

int main(int argc, char *argv[])
{
    int* numbers = new int[3];

    for(int i = 0; i < 3; i++) {
        cout << "Input number no. " << (i + 1);
        cin >> numbers[i];
        cout << endl;
    }

    system("PAUSE");
    return EXIT_SUCCESS;
} 
```

C++ 中是否有一个辅助函数/方法可以在我的`numbers`数组中找到最大的数字？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:42:59.313

在以下代码片段中，`max`将包含列表中的最高数字：

```
int i;
int max=numbers[0];
for(i=1;i<3;i++)
{
   if(numbers[i]>max) max=numbers[i];
} 
```

注意：您的数组看起来太小了 - 它的大小为 2，我很确定您想要 3 的大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T00:46:26.553

有一种算法可以找到*容器*中的最大元素( [`std::max_element`](http://en.cppreference.com/w/cpp/algorithm/max_element))，但这是不合适的。您的情况可以通过*不断*消耗内存来解决，因此您不需要存储所有数字。在任何给定点，您只需要记住当前的最大值。

想象一下，您必须处理数以亿计的数字。然后将它们全部存储是不可取的。

当然，在内部，`max_element`算法和我刚才建议的一样，但它假设你已经有了容器。如果你不这样做，那么只需即时更新最大值。boost.accumulators 库可以做到这一点，但我相信你可以自己编写它——它应该只需要一两行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T13:25:36.813

这里不需要数组。看看他们进来的数字：

```
int largest = std::numeric_limits<int>::min();
for (int i = 0; i < 3; ++i) {
    int value;
    std::cin >> value;
    if (largest < value)
        largest = value;
} 
```

# email - 将第二个域名指向现有站点，同时保留电子邮件帐户

> ID：13224544
> 
> 赞同：0
> 
> 时间：2012-11-05T00:39:14.277
> 
> 标签：email, dns, cpanel, domain-name, nameservers

我尝试搜索 SO，但所有答案似乎都涉及 .htaccess 和 301 重定向。我想知道是否有办法只使用 cpanel 和 DNS 提供程序接口来做到这一点。

只是我拥有两个域名：`mysite.com`和`thissite.com`

两者目前都指向服务器，并且都有与之关联的电子邮件地址。

我想指出`thissite.com`而不`mysite.com`破坏已经关联的电子邮件地址`thissite.com`

起初我将名称服务器更改为`thissite.com`与 相同，`mysite.com`但这会破坏电子邮件，所以我很快将它们改回来。

然后我将 的 A 记录更改`thissite.com`为指向 的 IP 地址`mysite.com`。不过，似乎也发生了同样的问题 - 电子邮件地址仍然损坏。

谁能在这里指出我正确的方向？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:06:28.603

通常 A 记录与电子邮件无关。可能自您的第一次实验以来，由 DNS 引起的电子邮件问题仍在缓存中。

DNS 将目标 SMTP**服务器**存储在 MX 类型记录中，其中域的电子邮件。查看 thissite.com 的 MX 记录。

```
nslookup
set type=mx
thissite.com 
```

如果您的域有正确的 MX 记录，那么 A 记录对于电子邮件无关紧要。

# c++ - 很多杂散错误 - “错误：C++ 程序中的杂散'\210'”

> ID：13224545
> 
> 赞同：2
> 
> 时间：2012-11-05T00:39:27.000
> 
> 标签：c++

> **可能重复：**
> [Xcode 给出 3 个语法错误，处理程序中的 Stray '\342'](https://stackoverflow.com/questions/3442858/xcode-gives-3-syntax-errors-dealing-with-stray-342-in-program)

```
if(mGamma[i−1][j] == min(mGamma[i − 1][j], mGamma[i][j − 1], mGamma[i − 1][j − 1])) 
```

上面的行给了我这些错误：

```
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\210’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\222’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\342’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\210’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\222’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\342’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\210’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\222’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\342’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\210’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\222’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\342’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\210’ in program
/home/rajat/iCub/tutorials/src/vectordtw.h:91:3: error: stray ‘\222’ in program 
```

其中 mGamma 定义为`vector<vector<double> > mGamma`，*min*函数采用三个值并返回最小值。这些错误来自哪里，我该如何摆脱它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:48:29.907

该错误消息意味着文件中的某些字节与编译器理解的任何字符都不对应，因此它会打印出它们的八进制值并告诉您这不可能是有效的 C(++) 程序。

您显示的字节序列似乎是 U+2212 MINUS SIGN 的 UTF-8 编码。尽管这是用于“正确”Unicode 文本中的减号的“适当”字符（这就是它以这种方式从 PDF 中复制出来的原因），但 C 系列的“基本源字符集”仍然以 ASCII 为中心；您需要用 U+002D HYPHEN-MINUS 替换每个减号。正如您通常键入的那样，用减号键入每个字符应该可以解决问题。

# c++ - 带有指向对象初始化的指针的数组

> ID：13224548
> 
> 赞同：0
> 
> 时间：2012-11-05T00:40:13.417
> 
> 标签：c++, arrays, class, pointers

我目前正在使用 C++，我面临着这个挑战。这是头文件中我的类的代码：

```
class PID
{
   private:
   int PID;
   int total;

   public:
   PID(); // Constructor
   int returnPID(); // Returns PID.
}; 
```

这是cpp文件中的代码声明：

```
PID::PID()
{
    PID=INT_MAX;
    total=0;
}

int PID::returnPID()
{
    return PID;
} 
```

这是包含指向类 PID 对象的指针的表的 main 中的声明和初始化：

```
PID* table[1000000];

for (int i=0; i<1000000; i++)
{
    table[i]=new PID;
} 
```

所以我想这使用我在上面创建的构造函数将 PID 设置为 MAX_INT。**当我尝试在初始化中使用 returnPID 访问 table[i].PID 的内容时，一切正常**，如下所示：

```
for (int i=0; i<1000000; i++)
{
    table[i]=new PID;
    int display=table[i]->returnPID();
    cout<<display<<endl;
} 
```

当我尝试在外部和初始化之后访问 table[i] 内容时，就会出现问题。我的主要崩溃并返回一个数字（-1073741571）作为错误。似乎连一个来自 main 的命令都没有执行。这是似乎重现问题的代码示例：

```
for (int i=0; i<1000000; i++)
{
    table[i]=new PID;
}
for (int i=0; i<1000000; i++)
{
    int display=table[i]->returnPID();
    cout<<display<<endl;
} 
```

我已经为此工作了两个多小时，但没有找到任何解决方案，这似乎不合逻辑。有人对此有任何解释吗？

**编辑：**任何少于 1.000.000 个点的表都可以正常工作。也许它与此有关，尽管我仍然没有看到联系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:53:51.883

> 有人对此有任何解释吗？

看来您的堆栈空间已用完。

您的编译器可以处理一百万个整数，而不是一百万个 PID* 吗？

> 任何点数少于 1.000.000 的表都可以正常工作。也许它与此有关，尽管我仍然没有看到联系。

它与此有关。

我试过这个：

```
int main(){
    int bec[10000000];
    for (int i=0; i<10000000;i++){
        bec[i] = i;
    }
    printf("%d\n",rand()%1000);
    return 0;

} 
```

它的段错误与您的原因相同。

解决这个问题的唯一方法是使用更少的堆栈空间。您可以在 main 之外声明 bec 并且不为此使用堆栈空间，或者您可以使用 std::vector。你有很多选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:06:15.530

```
PID* table[1000000]; 
```

有你的问题。这是一个自动分配的 1,000,000 个指针数组，或 [最多] 800 万字节。堆栈空间通常是相当有限的，而且您使用了很多。当我说“有限”时，我的意思是 8KB，而不是 8MB。

当你回顾这一点时，结果[通常并不漂亮](http://gcc.gnu.org/onlinedocs/gcc-3.4.6/gnat_ugn_unw/Stack-Overflow-Checking.html)。

8MB 对于自动分配来说已经*很多*了（你可以称之为“在堆栈上”）；所以，考虑调整你的存储机制，或者考虑使用动态分配——一个 nice怎么样`std::vector`？

[顺便说一句..拥有一个与它所在的类同名的成员变量是愚蠢的。]

# php - 我是否足够保护我的网站免受 sql 注入？

> ID：13224549
> 
> 赞同：1
> 
> 时间：2012-11-05T00:40:15.150
> 
> 标签：php, html, mysql, sql, web

我创建了一个网站，我只显示我的数据库表中的项目，我将变量从一个页面传递到另一个页面以显示某些项目，我的网站中的表项目没有添加、删除或编辑只是显示信息。

```
$aaa = _POST['aaa'];

$databasehost = "localhost";
$databasename = "mydb";
$databaseusername = "user";
$databasepassword = "password";

// Connect to the database server
$dbcnx = @mysql_connect($databasehost, $databaseusername, $databasepassword);
 if (!$dbcnx) {
 echo( "<font color='red'><P>can't connect to server.</P></font>" );
 exit();
  }
 // Select the database
 if (! @mysql_select_db($databasename) ) {
 echo( "<font color='red'><P>can't connect to db </P></font>");
 exit();
  }

 $aaa = mysql_real_escape_string($aaa)

 // and with $aaa I do my query 
```

我已经读过用 mysql_real_escape_string() 保护我的变量我停止向我的查询注入任何东西，但我觉得很容易受到以下影响：

```
 $databasehost = "localhost";
 $databasename = "mydb";
 $databaseusername = "user";
 $databasepassword = "password"; 
```

我只是偏执，还是有办法保护这些连接到服务器和数据库的信息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:43:08.613

在没有访问您的服务器的情况下，任何人都无法查看数据库连接信息（因为 PHP 在服务器上执行，而不是发送到用户的浏览器）。话虽如此，如果您担心，您可能需要考虑将这些变量放在配置文件中，并对其进行加密。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:45:27.437

如果您的目标是严格防止通过 $aaa 变量进行注入，那么您应该没问题。正如@MikeG 指出的那样，您可能应该将连接信息移动到Web 根目录之外的单独配置文件中以提高安全性（如果有人获得您的数据库凭据，您无需担心注入）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T03:09:01.817

没关系，但是如果您对此感到担忧，只需使用[mysql_real_escape_string](http://us1.php.net/mysql_real_escape_String)转义所有传递给数据库的值，然后将 intval/floatval 用于数值。

这不是完美的安全性，但总比不这样做要好。

# java - arraylist 的线程安全实现

> ID：13224552
> 
> 赞同：1
> 
> 时间：2012-11-05T00:40:27.097
> 
> 标签：java, concurrency

所以如果一个程序这样做：

```
 static ArrayList<X> a = null;
    static{
            for(;;){X x = new X(); a.add(x)}
          } 
```

在共享列表上，静态初始化之后调用的唯一操作是 get() 和 xt()

```
 X x = a.get(i); x.t(); 
```

并且 X 无权访问容器并且是线程安全的，这应该意味着像这样使用 Arraylist，没有同步是线程安全的，对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T00:43:01.437

如果没有任何修改`ArrayList`，那么您就没有理由担心它的线程安全性。

默认情况下，该静态块是线程安全的，因为它仅在加载类时运行一次（用于初始化）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T00:51:07.783

如果打算在创建列表后不对其进行修改，则强制执行：`ArrayList`将[`Collections.unmodifiableList()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#unmodifiableList(java.util.List)).

更好的是，如果您有 Guava 可用，请使用[`ImmutableList`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/ImmutableList.html).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T11:20:55.607

线程安全只是可写对象的问题。初始化后，您的 ArrayList 是不可变的 - 因此是线程安全的。考虑在你的数组列表周围使用不可修改的包装器——它会

1.  明确数组不是要修改的
2.  防止将来发生意外修改

为了完整起见，请注意这样一个事实，虽然对 ArrayList 的操作是线程安全的，但对元素的操作不是。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T00:42:57.927

Vector 是您想要的同步集合。

仅仅因为 Collection 的元素是线程安全的，并不能保证容器本身是线程安全的。基于我对并发的理解。

如果`t`修改了支持集合，则它不是线程安全的。例如`t`定义如下：

```
this.list.remove(this.x); 
```

这将是不安全的。

# r - 如何更有效地将巨大的向量列表转换为矩阵？

> ID：13224553
> 
> 赞同：66
> 
> 时间：2012-11-05T00:40:34.230
> 
> 标签：r, list, matrix, performance

我有一个长度为 130,000 的列表，其中每个元素都是长度为 110 的字符向量。我想将此列表转换为维度为 1,430,000*10 的矩阵。我怎样才能更有效地做到这一点？\我的代码是：

```
output=NULL
for(i in 1:length(z)) {
 output=rbind(output,
              matrix(z[[i]],ncol=10,byrow=TRUE))
} 
```

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-11-05T01:08:47.120

这应该等同于您当前的代码，只是要快得多：

```
output <- matrix(unlist(z), ncol = 10, byrow = TRUE) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-05T01:05:18.353

我*想*你想要

```
output <- do.call(rbind,lapply(z,matrix,ncol=10,byrow=TRUE)) 
```

即结合@BlueMagister 的使用`do.call(rbind,...)`与`lapply`语句将单个列表元素转换为11 * 10 矩阵...

基准测试（显示@flodel 的`unlist`解决方案比我的快 5 倍，比原来的方法快 230 倍......）

```
n <- 1000
z <- replicate(n,matrix(1:110,ncol=10,byrow=TRUE),simplify=FALSE)
library(rbenchmark)
origfn <- function(z) {
    output <- NULL 
    for(i in 1:length(z))
        output<- rbind(output,matrix(z[[i]],ncol=10,byrow=TRUE))
}
rbindfn <- function(z) do.call(rbind,lapply(z,matrix,ncol=10,byrow=TRUE))
unlistfn <- function(z) matrix(unlist(z), ncol = 10, byrow = TRUE)

##          test replications elapsed relative user.self sys.self 
## 1   origfn(z)          100  36.467  230.804    34.834    1.540  
## 2  rbindfn(z)          100   0.713    4.513     0.708    0.012 
## 3 unlistfn(z)          100   0.158    1.000     0.144    0.008 
```

如果这可以适当地扩展（即您没有遇到内存问题），那么在一台可比较的机器上，完整的问题大约需要 130*0.2 秒 = 26 秒（我在 2 岁的 MacBook Pro 上做了这个）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-05T00:50:00.600

获取有关您的输出的示例信息会有所帮助。*不推荐*递归地使用`rbind`越来越大的东西。我的第一个猜测可以帮助你：

 *```
z <- list(1:3,4:6,7:9)
do.call(rbind,z) 
```

如果需要，请参阅[相关问题](https://stackoverflow.com/questions/7224938/can-i-rbind-be-parallelized-in-r)以提高效率。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-12-04T16:13:32.157

你也可以使用，

```
output <- as.matrix(as.data.frame(z)) 
```

内存使用情况非常相似

```
output <- matrix(unlist(z), ncol = 10, byrow = TRUE) 
```

`mem_changed()`可以使用from进行验证`library(pryr)`。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2016-09-14T07:39:42.577

您可以使用 as.matrix 如下：

```
output <- as.matrix(z) 
```*

# android - 关于Android中按钮的非常简单的例子？

> ID：13224554
> 
> 赞同：3
> 
> 时间：2012-11-05T00:40:36.057
> 
> 标签：android, eclipse, user-interface, button

我想要一个非常简单的按钮，带有一些解释/可视化的东西，也许是 onCreate/onLauncher 来做让你微笑的事情！我在这里尝试过按钮，但[在](https://i.stack.imgur.com/ekk9R.jpg)[这里](http://pastie.org/5189178)出错，如果有人可以指导我找到一个关于 Android 中按钮的现成可用示例，这可能是最简单的。历史显示了 R 和 XML 文件的问题，如果有人能清楚地说明如何做到这一点，这可能是最简单的：一个非常简单的按钮。它的目录树等？

**请提供一个关于 Android 中按钮的简单示例，仅此而已。**

> ![在此处输入图像描述](../Images/07e2c9d01be681319f759aa675eee566.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:42:47.007

进入按钮的 xml 并设置“runClient”的 onClick 属性。

```
<Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="runClient"
        android:text="=)" /> 
```

## 更新：

您应该在 Eclipse 中看到类似的内容。

![在此处输入图像描述](../Images/17d0bc16b478c2cc31902c190e93f578.png)

## 更新 2：

这是一个示例 android 项目文件树。突出显示的是 layout.xml 应该在的位置。

![在此处输入图像描述](../Images/011da92e3ecd65a1f817162447e46720.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T22:14:10.987

首先，让我们看看您的[`test.java`](http://pastie.org/5189178)，它不会按原样工作。我希望您了解面向对象编程的基本概念并摆脱静态方法。

在 Android 中有一个[`Activity`](http://developer.android.com/reference/android/app/Activity.html)需要扩展的类。如果您遵循[Lazy Ninja 的回答](https://stackoverflow.com/a/13225086/83047)，[Eclipse 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)可能已经为您创建了该插件（它可能被称为`MainActivity.java`）。简单地说，一个活动代表你应用程序中的一个视图。在您的简单示例中，大多数（如果不是全部）您的代码都属于该类。

在 Android 中，您不使用`public static void main(String[] args)`，而是覆盖活动的[`onCreate`](http://developer.android.com/reference/android/app/Activity.html#onCreate(android.os.Bundle))方法。在[`AndroidManifest.xml`](http://developer.android.com/guide/topics/manifest/manifest-intro.html)您定义您的活动（此时您只需要一个）以及哪个是您的应用程序启动时启动的活动，以及哪个是`onCreate`整个应用程序的起点（再次参见 Eclipse 创建的结构）。

`onCreate`您应该[`setContentView`](http://developer.android.com/reference/android/app/Activity.html#setContentView(int))使用您希望在该活动中使用的布局进行调用。布局`setContentView`作为来自生成的 R 类的整数参数提供给 ，就像`R.layout.layout_file_name`映射到 .xml 文件中的 XML 文件一样`res/layout/layout_file_name.xml`。

布局文件是包含所需布局声明的文件。在您的情况下，它可能具有 a[`LinearLayout`](http://developer.android.com/guide/topics/ui/layout/linear.html)作为根元素和两个[`Button`](http://developer.android.com/guide/topics/ui/controls/button.html)s。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T00:58:14.097

在您的主要活动中使用如下内容：

```
//Part of onCreate
Button b1;
setContentView(whatever.it.is);
b1 = (Button)findViewById(R.id.buttonID);

b1.setOnClickListener(buttonAddOnClickListener);

//Outside of onCreate, on its own
Button.OnClickListener buttonAddOnClickListener  = new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        //Switch statement so you don't have to use a lot of click listeners
        switch (arg0.getId()) {
            case R.id.b1:
                doSomething();
            case R.id.b2:
                doSomethingElse();
        }
    }
}; 
```

在您的 XML 中，当您实现按钮时，请确保添加以下内容：

```
android:id="@+id/anID" 
```

将 anID 更改为您想要的 id。

此外，我更喜欢 IntelliJ ( [http://www.jetbrains.com/idea/](http://www.jetbrains.com/idea/) ) 进行 Android 编程。您的 XML 应位于名为“res”的文件夹中，然后位于子目录“layout”中。如果您没有看到这些文件夹，您的项目可能没有正确设置。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T02:44:26.830

逐步回答您的问题：

1.  大多数情况下，XML 文件存储在 /res 文件夹中，您可以在其中定义 Android UI 的界面。例如，如果您的应用中有 2 个活动，则可以创建 2 个 xml 文件（活动的布局）代表这 2 个活动。
2.  在 /src 目录中仅用于 java 文件。XML 文件应在 /res/... 目录中创建。
3.  XML 文件的每个视图都有一个 id。当你第一次创建一个 android 项目时。主要活动已经使用活动类的方法设置了您的第一个应用程序的内容视图。

    **setContentView(R.layout.main)**

-layout - 表示 /res 文件夹中的布局文件夹 -main - 表示 /res/layout 文件夹中的 XML 文件。

[您可以通过android 文档](http://developer.android.com/guide/topics/ui/declaring-layout.html)了解更多信息

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-02T18:55:22.887

制作按钮或任何其他 Android GUI 的最简单方法是使用 REBOL 3：

```
REBOL [] 
load-gui 
view [button "Click Me" on-action [request "" "Clicked!"]] 
```

这是一个功能齐全的 GUI 程序，具有核心 REBOL 语言的所有功能，可用于网络、列表处理、文本解析、文件管理等。该程序以及 R3 的任何其他程序都将在 Android 和桌面操作系统上运行，使用*完全相同的*代码。看一眼：

[http://rebolforum.com/index.cgi?f=printtopic&permalink=Nick25-Aug-2013/10:08:38-7:00&archiveflag=new](http://rebolforum.com/index.cgi?f=printtopic&permalink=Nick25-Aug-2013/10:08:38-7:00&archiveflag=new)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-05T02:08:13.877

日食

1.  单击文件 -> 新建 -> 其他，将弹出一个对话框。
2.  从对话框中，选择 Android -> Android 应用程序项目，然后点击下一步。
3.  将弹出一个 New Android Project 对话框，填写 Application、Project 和 packages 名称选择 SDK 版本
4.  按照向导进行操作，直到单击完成

在那里，您将拥有您的 android 项目文件。您的布局 xml 文件将是 res -> 布局文件夹。
我认为您应该阅读[Android 培训](http://developer.android.com/training/basics/firstapp/index.html)以帮助您入门。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-10T01:17:52.680

看起来您更新的信息和代码没有正确初始化按钮。

不需要这条线：

```
setContentView(myButton1); 
```

什么 setContentView(); 它是否设置了xml视图。

```
Button myButton1 = (Button) findViewById(R.id.button1); 
```

上面这行是对你真正有好处的。您现在可以使用：

```
myButton1.setOnClickListener(buttonListener);

Button.OnClickListener buttonListener  = new Button.OnClickListener(){
    @Override
    public void onClick(View arg0) {
        //Switch statement so you don't have to use a lot of click listeners
        switch (arg0.getId()) {
            case R.id.myButton1:
                doSomething();
            case R.id.b2:
                doSomethingElse();
        }
    }
}; 
```

此外，您设置的代码不是 Android 设置。您正在使用

```
public static void main(String[] args) 
```

您不希望在 Android 项目中使用它。请观看一些有关如何正确设置的视频。这一行：

```
Button myButton1 = (Button) findViewById(R.id.button1); 
```

出现错误，因为您的 IDE 现在不知道“R”，因为项目设置不正确。一旦你这样做了，你的很多问题都会得到解决。您将运行它而不是通过 main(String[] args)、onCreate() 等来运行它......我再次强烈推荐 IntelliJ，它使设置 Android 项目变得非常容易，甚至比 Eclipse 更容易。

# ios - 自定义 UITableViewCell 中的 contentView 宽度错误？

> ID：13224556
> 
> 赞同：6
> 
> 时间：2012-11-05T00:40:56.147
> 
> 标签：ios, uitableview

在我覆盖的 UITableViewCell 子类中，`layoutSubviews`因为我需要计算几个子视图的帧。我所有计算的基础是内容视图的宽度。这就是我开始实施的`layoutSubviews`样子：

```
- (void) layoutSubviews
{
  [super layoutSubviews];  // invoke this to set up the content view's bounds

  CGFloat contentViewWidth = self.contentView.bounds.size.width;

  [...]  // calculate and assign frames to subviews
} 
```

我已经开始在 iPhone 模拟器的分组表视图中对此进行测试。单元格应该只包含内容视图中的内容，即我已经关闭了所有周围的花哨的东西。具体来说，我通过将附件类型设置为 来禁用附件视图`UITableViewCellAccessoryNone`。由于这个原因，附件视图被隐藏了，尽管它的边界/框架属性仍然报告了 20/20 的大小。

基于所有这些，以及下面的简单说明，我希望上述代码片段中的内容视图宽度报告为 300。

```
<----------- screen width = 320 ----------->
+------------------------------------------+
|                                          |
|    <--- content view width = 300 --->    |
|    +--------------------------------+    |
|<-->|         table view cell        |<-->|
| 10 +--------------------------------+ 10 |
|                                          |
|                  [...]                   | 
```

但事实并非如此，实际报出的内容视图宽度是270！

一些研究表明，这 30 个缺失点包括 a）附件视图的 20 个宽度，以及 b）内容视图和附件视图之间的 10 个间距。我尝试将附件视图大小设置为 0/0，效果是内容视图宽度现在报告为 290。稍微好一点，但仍然相差 10 分。我也尝试将`accessoryView`属性设置为`nil`，但视图只是由`[super layoutSubviews]`.

最后，问题是：有没有办法**真正**禁用附件视图，使其不包含在内容视图宽度的计算中？或者，跳过调用`[super layoutSubviews]`并简单地自己计算宽度是否安全？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-23T21:44:36.343

重新审视这个问题后，我发现我无法再重现问题中描述的行为。现在的行为符合预期：

*   表格视图单元格的默认附件样式是`UITableViewCellAccessoryNone`
*   财产`accessoryView`归还`nil`
*   内容视图宽度报告为 302

我现在在 iPhone 5.1 模拟器上的 Xcode 4.2 中对此进行测试。当我问这个问题时，我相信我仍然在运行 iPhone 4.3 模拟器。我现在必须假设该问题仅存在于 4.3 模拟器中，或者是由于我的某些 Xcode 配置错误，或者一开始完全是虚构的。

作为记录：我的解决方法是在内容视图中应用一个新宽度`layoutSubviews`：

```
- (void) layoutSubviews
{
  [super layoutSubviews];

  CGRect contentViewFrame = self.contentView.frame;
  contentViewFrame.size.width = 302;
  self.contentView.frame = contentViewFrame;

  [...]
} 
```

# java - java 引用

> ID：13224559
> 
> 赞同：-2
> 
> 时间：2012-11-05T00:41:05.770
> 
> 标签：java, reference

我的问题是关于幕后引用:)

所以我试图编写一个递归实现来查找给定 ArrayList (getPermsOfMe) 的所有排列。我在我要询问的两个特定行上写了“看这里”。我将 thisPerm 添加到 allPermutations 中，然后稍后在代码中更改 thisPerm，然后将 allPermutations 中先前添加的值更改为新值。

```
public ArrayList<ArrayList<Integer>> allPermsHelper(ArrayList<Integer> getPermsOfMe, ArrayList<ArrayList<Integer>> allPermutations, ArrayList<Integer> thisPerm){
    if (getPermsOfMe.isEmpty()){
        System.out.println("thisPerm = " + thisPerm);
        allPermutations.add(thisPerm); //LOOK HERE
        System.out.println("allPermutations = " +allPermutations);
    }
    else {
        for (int i = 0; i<ofMe.size(); i++){

            //swapping the two specified elements in getPermsOfMe
            x = getPermsOfMe.get(i);
            getPermsOfMe.set(i, getPermsOfMe.get(getPermsOfMe.size()-1));
            getPermsOfMe.set(getPermsOfMe.size()-1, x);

            if (thisPerm.isEmpty()){
                thisPerm.add(getPermsOfMe.remove(getPermsOfMe.size()-1));
            }
            else{
                thisPerm.add(0,getPermsOfMe.remove(getPermsOfMe.size()-1));
            }

            allPermsHelper(getPermsOfMe, allPermutations, thisPerm);  
            getPermsOfMe.add(0,thisPerm.remove(0)); // LOOK HERE
        }
    } 
    return allPermutations;
}

//an example output (if getPermsOfMe was [123]):
thisPerm = [123]
allPermutations = [[123]]
thisPerm = [231]
allPermutations = [[231],[231]]
thisPerm = [321]
allPermutations = [[321],[321],[321]]
... 
```

myQuestion 是为什么（就对象和引用而言）先前的值在添加后不会保持不变。所以首先我添加了[123]。接下来我添加了 [231]，但后来 allPermuations 是 [[231][231]] 而不是 [[123][231]]。

此外，对我来说，一旦添加它，该值就不会成立，这似乎有点违反直觉。Java（以及我假设其他一些语言）这样做是有原因的吗？

这是我第一次在 stackoverflow 上提问，所以如果我应该做些什么来让我的问题更容易或者让我知道的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:10:46.227

好吧，我现在明白了:) 这是一些更好的示例代码：

```
 ArrayList<Integer> list = new ArrayList<Integer>();
    ArrayList<ArrayList<Integer>> listOfList = new ArrayList<ArrayList<Integer>>();
    list.add(13);
    list.add(42);
    listOfList.add(list);
    System.out.println("list = " + list);
    System.out.println("listOfList = " + listOfList);

    list1.add(46);
    System.out.println("list = " + list);
    System.out.println("listOfList = " + listOfList); 
```

有输出：

```
list = [13, 42]
listOfList = [[13, 42]]
list = [13, 42, 46]
listOfList = [[13, 42, 46]] 
```

你期望它是：

```
list = [13, 42]
listOfList = [[13, 42]]
list = [13, 42, 46]
listOfList = [[13, 42]] 
```

问题是，在 Java 中，列表是对象的集合（或者可能是原语，但在这种情况下，我们关注的是列表列表，即对象列表）。对象包含可修改的数据。如果我们有一所高中的学生名单，并且我们改变了学生，难道不应该在将他们直接放入其中的所有列表中都改变他们吗？所以Java就是这样工作的，通过在幕后使用内存指针。如果您想为一所静态的高中制作学生列表，则必须克隆所有学生，然后将它们放入您的列表中。同样在 Java 中，您需要克隆对象以确保它的修改不会影响列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:13:25.527

**如何：**在幕后，任何适合 an 的东西`Object`都只是一个参考，这包括列表和数组。这与诸如`int`or之类的原语不同`double`。

```
int primitive = 14;
int anotherPrimitive = primitive;
System.out.println(anotherPrimitive); // 14
primitive = 12;
System.out.println(anotherPrimitive); // still 14

String[] array = new String[] {"this is a string in the array"};
String[] anotherArray = array;
System.out.println(anotherArray); // ["this is a string in the array"]
array[0] = "now i've changed it";
System.out.println(anotherArray); // ["now i've changed it"] 
```

碰巧 a`ArrayList`是一种对象，它存储对象引用。这意味着，如果您更改它指向的对象，列表中的内容也会发生变化。

**为什么：**在没有用户明确询问的情况下自动复制整个对象图没有多大意义。存储引用非常便宜（内存中 4 或 8 个字节），复制也非常便宜（通常需要一个处理器周期）。`double`每次有人键入时复制 1000 秒的数组`doubleList.add(aThousandDoubles);`可能会不必要地浪费大量时间和内存。此外，也许您不*想要*不同的参考；也许你有一个，如果每次你将一个项目添加到列表中时，实现都复制对象`List<Foo> monitoredFoos`，你将失去读取更改的能力。`List`

因此，让简单的实现简单地存储对现有实例的引用是有意义的`add`，并留给程序员复制对象当且仅当您想要并且需要复制对象时。

# html - 带有 onclick 链接的嵌入式 youtube 播放器在同一嵌入式播放器中播放另一个视频

> ID：13224561
> 
> 赞同：1
> 
> 时间：2012-11-05T00:41:20.070
> 
> 标签：html, youtube, embed, hyperlink

我的问题是在 FF 中一切正常，但不适用于 chrome/IE/safari。如果有人可以提供帮助，将不胜感激！PS：无法使用 iFrame。

这是代码：代码的第一部分需要开始脚本和结束脚本，因为脚本代码不会显示。

```
 <script>
     function play(clip){
       document.getElementById("frame").src= 
         "http://www.youtube.com/v/"+clip+"&autoplay=0&rel=0";
     } 
    </script>

    <object width="375" height="295">
       <param name="movie" value=""></param>
       <param name="wmode" value="transparent"></param>
       <param name="border" value="0"></param>
       <param name="allowFullScreen" value="true"></param>
       <param name="allowscriptaccess" value="always"></param>
       <embed id ="frame" src="http://www.youtube.com/v/CsGYh8AacgY?version=3&amp;hl=en_US&rel=0" type="application/x-shockwave-flash" border="0" allowfullscreen=true allowscriptaccess = always wmode="transparent" width="375" height="295"></embed>
    </object><br />

    <B>Choose Video:</B>
    <a href="#" onclick="play('CsGYh8AacgY'); return false" style="color:#9b9898; font-size:12">Charlie 1</a> | 
    <a href="#" onclick="play('QFCSXr6qnv4'); return false" style="color:#9b9898; font-size:12">Charlie 2</a> | 
    <a href="#" onclick="play('eaCCkfjPm0o'); return false" style="color:#9b9898; font-size:12">Charlie 3</a> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:01:53.507

问题是没有设置电影参数。但是，我不确定直接设置是否会导致电影重新加载。如果你不反对使用一些 javascript 库，我会这样做：

```
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
     function play(clip){
       var mv = "http://www.youtube.com/v/"+clip+"&autoplay=0&rel=0";
       swfobject.embedSWF(mv, "myContent", "375", "295", "8");
     }
     $(document).ready(function() {
       play('CsGYh8AacgY');
     });
    </script>

    <div id="myContent"></div>
    <br />

    <B>Choose Video:</B>
    <a href="#" onclick="play('CsGYh8AacgY'); return false" style="color:#9b9898; font-size:12">Charlie 1</a> |
    <a href="#" onclick="play('QFCSXr6qnv4'); return false" style="color:#9b9898; font-size:12">Charlie 2</a> |
    <a href="#" onclick="play('eaCCkfjPm0o'); return false" style="color:#9b9898; font-size:12">Charlie 3</a> 
```

这使用 SWFObject 和 JQuery 库。SWFObject 是处理加载 Flash 电影的对象。JQuery 在这里并不是绝对必要的，我只是在页面完全加载时使用它来加载默认视频`$(document).ready`。我指向谷歌托管的库，但如果您愿意，您可以下载它们并在本地提供它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-05T09:58:24.230

尝试这个，

```
 $('a.video').click(function () {
     var id = $(this).attr('data-youtube');
     var src = '//www.youtube.com/embed/'+id;
     var iframe = '<iframe id="youtube" width="560" height="315" frameborder="0" src="'+src+'" allowfullscreen></iframe>';
     $(".video-wrapper").html(iframe);
     return false;
 }); 
```

[https://jsfiddle.net/rakesh_vadnal/pyktnz7r/2/](https://jsfiddle.net/rakesh_vadnal/pyktnz7r/2/)

# vb.net - 应用程序在 Printing.PrinterSettings.InstalledPrinters 迭代时冻结/挂起

> ID：13224562
> 
> 赞同：1
> 
> 时间：2012-11-05T00:41:48.513
> 
> 标签：vb.net, system.printing

我有以下代码将已安装打印机的列表放入组合框中：

```
 For Each s As String In Printing.PrinterSettings.InstalledPrinters
        edtPrinter.Items.Add(s)
    Next 
```

但是，我在单个客户端安装时遇到问题，可能是假脱机服务，该迭代挂起并锁定了我的应用程序。通过单击该特定计算机上控制面板中的“设备和打印机”，我可以在资源管理器中触发相同的“挂起”。重新启动 Spool32 会导致应用程序释放，直到再次命中迭代。

与其解决他们的假脱机问题，不如在假脱机问题出现时如何最好地实施某种超时或以其他方式防止此调用冻结我的应用程序？我真的不能毫无困难地在单独的线程上调用它 - 有没有更好的方法来调用这个属性而不会使我的应用程序处于冻结状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:34:24.380

一种可能性：在未安装打印机的机器上访问 Windows 打印功能时，有时 Windows 会崩溃。确保您的客户至少安装了一台打印机。

# html - 两行多列的 Xml 到表转换的 XSL

> ID：13224567
> 
> 赞同：1
> 
> 时间：2012-11-05T00:42:29.863
> 
> 标签：html, xml, xslt, xpath

我一直在尝试解决我上周提出的一个问题。

[XSL 用于 Xml 到表的转换](https://stackoverflow.com/questions/13131529/xsl-for-xml-to-table-transformation)。

我必须将每个部分的第一页和最后一页号输出到一个有两行的表中。

我对如何将两行表与 Muenchian 分组方法集成感到困惑

XSLT 1.0 解决方案正是我所需要的。我在下面有一个解决方案，但我需要两行。

任何建议或指导将不胜感激。

输入：

```
<root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="2" section="Arsenal">Arsenal</page> 
  <page number="3" section="Arsenal">Arsenal</page> 
  <page number="4" section="Arsenal">Arsenal</page> 
  <page number="5" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="8" section="Chelsea">Chelsea</page> 
  <page number="9" section="Chelsea">Chelsea</page> 
  <page number="10" section="Chelsea">Chelsea</page> 
  <page number="11" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="14" section="ManUnited">ManUnited</page> 
  <page number="15" section="ManUnited">ManUnited</page> 
  <page number="16" section="ManUnited">ManUnited</page> 
  <page number="17" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="20" section="ManCity">ManCity</page> 
  <page number="21" section="ManCity">ManCity</page> 
  <page number="22" section="ManCity">ManCity</page> 
  <page number="23" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page> 
 </root> 
```

输出：

```
<table>
<tr>
<td>Arsenal</td>
<td></td>
<td>Chelsea</td>
<td></td>
<td>ManU</td>
<td></td>
<td>ManCity</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>6</td>
<td>7</td>
<td>12</td>
<td>13</td>
<td>18</td>
<td>19</td>
<td>24</td>
</tr>
</table> 
```

这是我当前的 XSLT 逻辑。

```
<table>
<tr>
<xsl:apply-templates select="page[generate-id() = generate-id(key('kSection', @section))]"/>
</tr>                       
</table>
</xsl:template> 
<xsl:template match="page">
<td>
<xsl:value-of select="@section"/>
</td>
<td>
<xsl:value-of select="@number"/>
</td>
<td>
<xsl:value-of select="key('kSection', @section)[last()]/@number"/>
</td>
</xsl:template>
</xsl:stylesheet> 
```

问候JJ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:54:16.063

首先，您需要`section`明智地分组，然后获取第一个和最后一个节点`for-each`

```
Group by `section`
  for-each `section`
    if position =1 or position = last
      print it 
```

这是一个 xsl 1.0 分组示例参考。希望你能继续

[XSLT 仅选择行集中的最后一个版本元素](https://stackoverflow.com/questions/13174409/xslt-select-only-last-version-element-in-rowset/13174595#13174595)

**在 xslt 中 **

```
<xsl:key name="k" match="page" use="@section"/>

<xsl:template match="/root">
    <table border="1">
        <tr>
            <xsl:for-each select="page[generate-id() = generate-id(key('k', @section))]">
                <td  colspan="2">
                    <xsl:value-of select="."/>
                </td>
            </xsl:for-each>
        </tr>    
        <tr>
        <xsl:for-each select="page[generate-id() = generate-id(key('k', @section))]">
            <xsl:variable name="key">
                <xsl:value-of select="."/>
            </xsl:variable>
            <xsl:for-each select="../page[@section=$key]">
                <xsl:if test="(position() = 1) or (position() = last())">
                    <td>
                        <xsl:value-of select="current()/@number"/>
                    </td>
                </xsl:if>
            </xsl:for-each>
        </xsl:for-each>
        </tr>
    </table>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:19:06.700

采用：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:template match="/root">
    <table>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
      </tr>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]" mode="page"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page">
    <td>
      <xsl:value-of select="."/>
    </td>
    <td></td>
  </xsl:template>

  <xsl:template match="page" mode="page">
    <td>
      <xsl:value-of select="@number"/>
    </td>
    <td>
      <xsl:value-of select="key('k', @section)[last()]/@number"/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

输出：

```
<table>
  <tr>
    <td>Arsenal</td>
    <td />
    <td>Chelsea</td>
    <td />
    <td>ManUnited</td>
    <td />
    <td>ManCity</td>
    <td />
  </tr>
  <tr>
    <td>1</td>
    <td>6</td>
    <td>7</td>
    <td>12</td>
    <td>13</td>
    <td>18</td>
    <td>19</td>
    <td>24</td>
  </tr>
</table> 
```

# codeigniter - CodeIgniter、CI-Merchant 和 Paypal 沙盒

> ID：13224575
> 
> 赞同：2
> 
> 时间：2012-11-05T00:43:55.877
> 
> 标签：codeigniter, paypal-sandbox, ci-merchant

我正在尝试使用 CodeIgniter 制作一个小购物车，我发现 CI-Merchant 可以通过本指南[http://ci-merchant.org/](http://ci-merchant.org/)与支付网关一起使用，但我真的不明白如何让它与 Paypal 一起使用沙盒。

```
$this->load->library('merchant');
$this->merchant->load('paypal_express');
$settings = array(
    'username' => 'test@test.com',
    'password' => '********',
    'signature' => 'Test Store',
    'test_mode' => true);

$this->merchant->initialize($settings);
$params = array(
    'amount' => 12.00,
    'currency' => 'CAD',
    'return_url' => 'http://payment.test.com',
    'cancel_url' => 'http://payment.test.com/cancel');

$response = $this->merchant->purchase($params);
$this->load->view('welcome_message'); 
```

我知道这段代码不能做很多事情，但它什么也没做。只是加载视图，没有任何反应，我不明白。所以，我的问题是，你知道教程或者只是如何让 CI Merchant 与 Paypal Sandbox 一起工作吗？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T21:53:22.563

艾斯的评论很到位。您的代码没有任何问题，但您需要检查`$response`对象以查看结果（或错误消息）是什么。

```
$response = $this->merchant->purchase($params);
if ($response->success())
{
    // mark order as complete
    $gateway_reference = $response->reference();
}
else
{
    $message = $response->message();
    echo('Error processing payment: ' . $message);
    exit;
} 
```

您也可以简单地尝试这个来检查对象：

```
$response = $this->merchant->purchase($params);
echo '<pre>';
print_r($response);
exit; 
```

# java - 如何在 Spring MVC JavaEE 中重定向到另一个站点

> ID：13224576
> 
> 赞同：6
> 
> 时间：2012-11-05T00:43:58.673
> 
> 标签：java, spring, redirect, spring-mvc, jstl

我已经在谷歌上搜索了一段时间，但找不到有关此特定方法的明确答案或文档。

我想使用这种方法重定向到另一个站点，例如 stackoverflow.com ......但我不知道该怎么做。任何帮助将不胜感激。

```
@RequestMapping(value = "/redirectTravelocity", method = RequestMethod.GET)
private ModelAndView processForm()
{
    ModelAndView modelAndView = new ModelAndView( "redirect:stackoverflow.com" );
    Map<String, Object> model = modelAndView.getModel();

    model.put( "error", "this.is.my.error.code" );
    return new ModelAndView( "redirect:stackoverflow.com", model );
} 
```

它不起作用，它在我的网站内重定向并崩溃......我知道这很愚蠢，但我不知道该怎么做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T01:02:33.720

这是一种方法：

```
@RequestMapping(value = "/redirectTravelocity", method = RequestMethod.GET)
private String processForm()
{
    return "redirect:http://stackoverflow.com";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T10:42:29.147

更改`redirect:stackoverflow.com`为`redirect:http://stackoverflow.com`

# python - Emacs 的 Python 模式中的下拉自动完成

> ID：13224577
> 
> 赞同：3
> 
> 时间：2012-11-05T00:44:01.077
> 
> 标签：python, emacs

我已经安装了 python-mode 并且可以自动完成`M-Tab`，但是当我执行它时，可能的完成最终会出现在我的另一个开放框架中。有没有办法让emacs，

1.  使用下拉菜单向我显示潜在的完成（或 Vim 风格的快速修复框架）
2.  `M-tab`当我一遍又一遍地按下时自动填写潜在的完成？

**编辑：**经过一番浏览后，我意识到[自动完成](http://cx4a.org/software/auto-complete/)是我正在寻找的插件（至少在下拉菜单方面），但我仍然不确定如何获得`python-mode`候选检测自动完成。我试过`ac-python`了，但它似乎冻结了 emacs ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T14:30:24.187

[https://github.com/auto-complete](https://github.com/auto-complete)的作者之一也在创建[emacs-jedi](https://github.com/tkf/emacs-jedi)，它基本上是 Emacs 中 Python 的自动完成（它使用[Jedi](https://github.com/davidhalter/jedi)自动完成库）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:52:48.777

M-TAB 确实完成，而不是自动完成。“自动”表示不需要密钥。自动完成由多个环境提供，主要基于公司模式或 auto-complete.el

[http://gabrielelanaro.github.com/emacs-for-python](http://gabrielelanaro.github.com/emacs-for-python)，后者

[https://github.com/pdee/pdee](https://github.com/pdee/pdee)，基于 Pymacs/company

或通过集市，也基于 Pymacs/公司

bzr 分支 lp:python-mode/components-python-mode

# java - 对于滚动条和其他内容，设置窗口的外观不会改变

> ID：13224582
> 
> 赞同：0
> 
> 时间：2012-11-05T00:45:57.360
> 
> 标签：java, swing, user-interface, look-and-feel, uimanager

因此，我使用以下代码将我的程序的外观设置为 windows，因为我真的不喜欢任何主题，如 nimbus 或默认的摇摆主题，但某些组件仍然以旧的外观和感觉出现，而不是我的窗户拉法。

使用的代码：

```
try {
    for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
        if ("Windows".equals(info.getName())) {
            UIManager.setLookAndFeel(info.getClassName());
            break;
        }
    }
} catch (Exception e) {
} 
```

但是，滚动条和组合框之类的东西仍然看起来像这样：

![1](../Images/ef0f95cb69987c53bc1c82dd8c2b62f4.png)

滚动条也一样，它们不像我的窗口的滚动条。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:05:17.307

> 我在初始化任何东西之前添加了外观变化，这似乎已经成功了，..

不用担心，但还要看看[`getSystemLookAndFeelClassName()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/UIManager.html#getSystemLookAndFeelClassName%28%29)哪个比硬编码 Windows 更好：

*   随着时间的推移，它将是可靠的。
*   它也适用于 OS X 和 *nix。

# javascript - Twitter Bootstrap 轮播不会在悬停/鼠标悬停时暂停

> ID：13224586
> 
> 赞同：4
> 
> 时间：2012-11-05T00:46:50.070
> 
> 标签：javascript, jquery, html, css, twitter-bootstrap

代码：

```
<html>
<head>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap.no-icons.min.css" rel="stylesheet">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>        
    <script>
      $(document).ready(function(){
        $('#welcome-carousel').carousel({
          interval: 5000,
        });
      });
    </script>
</head>

<body><div style="width:600px;margin:auto;">
    <div id="welcome-carousel" class="carousel slide"><!-- class of slide for animation -->
      <div class="carousel-inner">
        <div class="item active"><!-- class of active since it's the first item -->
          <img src="img/image1.png" alt="" />
        </div>
        <div class="item">
          <img src="img/image4.png" alt="" />
        </div>
        <div class="item">
          <img src="img/image3.png" alt="" />
          <div class="carousel-caption">
            <p>Hello to the WORLD!</p>
          </div>
        </div>
        <div class="item">
          <img src="img/image2.png" alt="" />
        </div>
        <div class="item">
          <img src="img/image1.png" alt="" />
        </div>
      </div><!-- /.carousel-inner -->
      <!--  Next and Previous controls below
            href values must reference the id for this carousel -->
        <a class="carousel-control left" href="#welcome-carousel" data-slide="prev">&lsaquo;</a>
        <a class="carousel-control right" href="#welcome-carousel" data-slide="next">&rsaquo;</a>
    </div>
    </div>
    <p>hey</p>
</body> 
```

如果我将鼠标悬停在幻灯片上，它不会停止幻灯片。为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T00:57:21.833

尝试（在你的情况下）：

```
 $(document).ready(function(){
    $('#welcome-carousel').carousel({
      interval: 5000,
      pause: "hover"
    });
  }); 
```

根据文档：http: [//twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T09:44:07.783

我们刚刚在 bootstrap 2.2.1 的轮播中发现了一个错误，当您将鼠标悬停在幻灯片/过渡中间的轮播上时，轮播不会在悬停时暂停。您可以在此处查看有关此问题的更多信息 - [https://github.com/twitter/bootstrap/issues/5747](https://github.com/twitter/bootstrap/issues/5747)

# android - 并且带有日期的声明会归还一切

> ID：13224588
> 
> 赞同：3
> 
> 时间：2012-11-05T00:47:17.283
> 
> 标签：android, greendao

我在 GreenDAO 中查询时遇到问题。

这是代码：

```
QueryBuilder<Thing> qb = this.thingDao.queryBuilder();
qb.and(Properties.StartDate.lt(this.cal.getTime()), Properties.EndDate.ge(this.cal.getTime()));
List<Thing> thingsForToday = qb.list(); 
```

我希望 GreenDAO 只返回 cal.getTime() 过去的 StartDate 的东西，而不是 cal.getTime() 传递的 EndDate 的东西。我所看到的是，GreenDAO 只返回任何给定日期的每个数据集（事物）。无论是在 StartDate 之前还是 EndDate 之后。我做错了什么还是这是一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T09:42:36.463

不要使用and()，使用where()。

“和”/“或”方法旨在以不同的方式使用。引用“and”的JavaDoc：

> 通过使用 AND 组合给定条件来创建 WhereCondition。返回的 WhereCondition 必须在 where(WhereCondition, WhereCondition) 或 whereOr(WhereCondition, WhereCondition, WhereCondition) 中使用。

# javascript - 如何通过javascript动态添加和删除样式组件？

> ID：13224595
> 
> 赞同：0
> 
> 时间：2012-11-05T00:48:18.207
> 
> 标签：javascript

> **可能重复：**
> [在javascript中动态添加/删除样式](https://stackoverflow.com/questions/2578577/dynamically-add-remove-style-in-javascript)

需要编写 javascript 函数来禁用和启用元素的选择。我写了示例代码：

```
<style type="text/css">
.unselectable {
  -moz-user-select: -moz-none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  user-select: none;
}
.selectable {
  -moz-user-select: text;
  -khtml-user-select: text;
  -webkit-user-select: text;
  user-select: text;
}
</style>
<script>
function makeUnselectable(node) {
  if (node.nodeType == 1) {
    node.unselectable = true;
  }
  var child = node.firstChild;
  while (child) {
    makeUnselectable(child);
    child = child.nextSibling;
  }
}
function makeSelectable(node) {
  if (node.nodeType == 1) {
    node.unselectable = false;
  }
  var child = node.firstChild;
  while (child) {
    makeSelectable(child);
    child = child.nextSibling;
  }
}
</script> 
```

但是这段代码不正确并且不起作用。如何通过javascript动态添加和删除样式组件？所有当前元素的样式和类都应该保留！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:02:56.417

我认为这是正确的：

```
 <style type="text/css">
    .unselectable {
      -moz-user-select: -moz-none;
      -khtml-user-select: none;
      -webkit-user-select: none;
      user-select: none;
    }
  </style>
  <script>
  function hasClass(ele,cls) {
    return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
  }
  function addClass(ele,cls) {
    if (!this.hasClass(ele,cls)) ele.className += " "+cls;
  }
  function removeClass(ele,cls) {
    if (hasClass(ele,cls)) {
      var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
      ele.className=ele.className.replace(reg,' ');
    }
  }
  function makeUnselectable(node) {
    if (node.nodeType == 1) {
      addClass(node, "unselectable");
    }
    var child = node.firstChild;
    while (child) {
      makeUnselectable(child);
      child = child.nextSibling;
    }
  }
  function makeSelectable(node) {
    if (node.nodeType == 1) {
      removeClass(node, "unselectable");
    }
    var child = node.firstChild;
    while (child) {
      makeSelectable(child);
      child = child.nextSibling;
    }
  }
  </script> 
```

感谢：[rockycode.com/blog/addremove-classes-raw-javascript](http://rockycode.com/blog/addremove-classes-raw-javascript)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T00:51:29.720

可以使用 Jquery 看一下 css 方法：[http ://api.jquery.com/css/](http://api.jquery.com/css/)

# objective-c - 如何在 ios 应用程序中的相机全屏视图上绘制？

> ID：13224600
> 
> 赞同：2
> 
> 时间：2012-11-05T00:49:15.533
> 
> 标签：objective-c, ios, html

我想在我的 iOS 应用程序的相机视图顶部放置指南针或图像？

背景：我正在创建一个应用程序，它将在本机端使用 iOS 打开相机，然后在 HTML 端打开相机而不使用电话间隙或科尔多瓦。我正在使用本机桥接，我想在我的 iOS 应用程序的相机视图顶部放置一个移动指南针，我应该使用什么方法？任何有用的代码？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:03:15.283

使用 的`cameraOverlayView`属性`UIImagePickerController`在相机顶部设置叠加层。查看[苹果文档](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html#//apple_ref/occ/instp/UIImagePickerController/cameraOverlayView)以获取更多详细信息。您可以添加任何`UIView`作为覆盖视图。

为了使用磁力计，您必须使用 CoreLocation 和以下委托方法：

```
- (void) locationManager:(CLLocationManager *)manager
             didUpdateHeading:(CLHeading *)newHeading 
```

将 a 旋转`UIView`到北：

```
float heading = newHeading.magneticHeading; //in degrees
float headingDegrees = (heading*M_PI/180); //assuming needle points to top of iphone. convert to radians
self.imageView.transform = CGAffineTransformMakeRotation(headingDegrees); 
```

您可能还会发现这些问题很有用：

*   [在应用程序中使用原生 iOS 指南针](https://stackoverflow.com/questions/9264838/use-native-ios-compass-within-an-app)
*   [如何在ios4中绘制像iphone 3gs这样的指南针？](https://stackoverflow.com/questions/3390843/how-can-i-draw-a-compass-like-iphone-3gs-in-ios4)

# objective-c - 是否可以在 NSPredicate 中使用嵌套的 SUBQUERY？

> ID：13224601
> 
> 赞同：6
> 
> 时间：2012-11-05T00:49:25.253
> 
> 标签：objective-c, subquery, nspredicate, one-to-many

如您所见，我有两个一对多的关系。是否可以编写这样一个嵌套的子查询，我想选择所有 A，其中任何属于 B 到 A 下的任何属于 C 满足特定条件？

![在此处输入图像描述](../Images/047ac1c41962a1aa706982cd755a5cc7.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T06:22:30.427

您可以将 SUBQUERY 嵌套在谓词中。但似乎单个 SUBQUERY 在这里就足够了（如果`ds`是从to*的一对一*关系），例如`C``D`

```
[NSPredicate predicateWithFormat:@"SUBQUERY(bs, $x, ANY $x.cs.ds.name = %@).@count > 0", name]; 
```

# c++ - 如何将 char* 插入地图 ?

> ID：13224606
> 
> 赞同：0
> 
> 时间：2012-11-05T00:49:50.373
> 
> 标签：c++, string, map, char

我有 2 个单词`char*`，我想将它们插入`map<string,string>`，因此我尝试了 2 种方法，但它们没有用 -

第一种方式——

```
#include <iostream>
#include <string>
#include <map>
using namespace std;
void main()
{
    map<string,string> myMap ; 
    char cWord[4] = "abc"; 
    char cValue[4] = "123";
    myMap.insert(cWord,cValue) ; 
} 
```

我有一个错误 -

```
/usr/include/c++/4.4/bits/stl_tree.h: In member function ‘void std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(_II, _II) [with _InputIterator = char*, _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Val = std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _KeyOfValue = std::_Select1st<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >]’:
/usr/include/c++/4.4/bits/stl_map.h:553:   instantiated from ‘void std::map<_Key, _Tp, _Compare, _Alloc>::insert(_InputIterator, _InputIterator) [with _InputIterator = char*, _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >]’
testString.cpp:10:   instantiated from here
/usr/include/c++/4.4/bits/stl_tree.h:1324: error: no matching function for call to ‘std::_Rb_tree<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::_Select1st<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > >::_M_insert_unique_(std::_Rb_tree_iterator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, char&)’
/usr/include/c++/4.4/bits/stl_tree.h:1206: note: candidates are: std::_Rb_tree_iterator<_Val> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique_(std::_Rb_tree_const_iterator<_Val>, const _Val&) [with _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Val = std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _KeyOfValue = std::_Select1st<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >] 
```

第二种方式——

```
 // same include's as above ..
    map<string,string> myMap ; 
    // char* init ..    
    char cWord[4] = "abc"; 
    char cValue[4] = "123";

    // string ..
    string word(cWord) ; 
    string value(cValue) ; 
    myMap.insert(word,value) ; 
```

我有一个错误 -

```
error: ‘::main’ must return ‘int’
In file included from /usr/include/c++/4.4/map:60,
                 from testString2.cpp:3:
/usr/include/c++/4.4/bits/stl_tree.h: In member function ‘void std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(_II, _II) [with _InputIterator = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Val = std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _KeyOfValue = std::_Select1st<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >]’:
/usr/include/c++/4.4/bits/stl_map.h:553:   instantiated from ‘void std::map<_Key, _Tp, _Compare, _Alloc>::insert(_InputIterator, _InputIterator) [with _InputIterator = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >]’
testString2.cpp:15:   instantiated from here
/usr/include/c++/4.4/bits/stl_tree.h:1323: error: no match for ‘operator++’ in ‘++__first’
/usr/include/c++/4.4/bits/stl_map.h:553:   instantiated from ‘void std::map<_Key, _Tp, _Compare, _Alloc>::insert(_InputIterator, _InputIterator) [with _InputIterator = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >]’
testString2.cpp:15:   instantiated from here
/usr/include/c++/4.4/bits/stl_tree.h:1324: error: no match for ‘operator*’ in ‘*__first’ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T00:54:57.637

正如您从[文档](http://www.cplusplus.com/reference/stl/map/insert/)¹`map.insert`中看到的，您需要的重载采用单个参数。那里不是很明显，但它需要一个`pair<string, string>`，包含键和值。例如，您可以这样做：

```
myMap.insert(make_pair(string(cWord),string(cValue))); 
```

它将 转换`char[]`为`string`“即时”，`pair`与它们一起创建并将其插入到地图中；你不能这样做`make_pair(cWord, cValue)`，因为没有从`pair<char *, char *>`to的隐式转换`pair<string, string>`；

`operator[]`^(不过，在这种情况下，使用2)会更容易：

```
myMap[cWord]=cValue; 
```

请注意，在这里您可以避免构建`string`临时文件，因为在这种情况下，编译器可以自动创建它们。

顺便说一句，它是`int main`，不是`void main`。

* * *

1.  [这](http://en.cppreference.com/w/cpp/container/map/insert)是更精确和最新的 C++11 添加，但恕我直言，新手不太清楚。

2.  但是请记住，当键已经存在时， `insert`and的语义是不同的：覆盖，而 while什么也不做。`operator[]``operator[]``insert`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:53:42.303

像这样：

```
myMap[cWord] = cValue; 
```

或者，使用一对：

```
myMap.insert(std::pair<std::string const, std::string>(cWord, cValue)); 
```

或与`emplace`：

```
myMap.emplace(cWord, cValue); 
```

如果你想无条件地设置映射值，你应该使用`[]`-accessor，如果你想控制键已经存在的情况，你应该使用`emplace`/函数。`insert`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:54:18.450

```
#include <iostream>
#include <string>
#include <map>
using namespace std;
void main() //first mistake, it should be int main()
{
    map<string,string> myMap ; 
    char cWord[4] = "abc"; 
    char cValue[4] = "123";
    myMap.insert(cWord,cValue) ; //third mistake, char * != string.
    //and return 0;
} 
```

整改：

```
#include <iostream>
#include <string>
#include <map>
using namespace std;
int main()
{
    map<string,string> myMap ; 
    string cWord = "abc", cValue = "123";
    myMap[cWord] = cValue ;
    return 0; 
} 
```

# javascript - 如何为我的 jQuery 选择器动态构建元素 ID？

> ID：13224610
> 
> 赞同：-1
> 
> 时间：2012-11-05T00:50:07.853
> 
> 标签：javascript, jquery

我想通过使用循环来减少这段代码。我怎样才能做到这一点？

```
$("#whiteJenisPembayaran1").live('focus', function() {
    $("#whiteJenisPembayaran1").typeahead(typeaheadConfig);
});
$("#whiteJenisPembayaran2").live('focus', function() {   
    $("#whiteJenisPembayaran2").typeahead(typeaheadConfig);
});
$("#whiteJenisPembayaran3").live('focus', function() {
    $("#whiteJenisPembayaran3").typeahead(typeaheadConfig);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:01:04.747

你可以改变HTML？如果是，最好的方法是为这些元素设置**类**属性。
这样你就可以这样做：

HTML：

```
<div class="whiteJenisPembayaran" id="whiteJenisPembayaran1"></div>
<div class="whiteJenisPembayaran" id="whiteJenisPembayaran2"></div>
<div class="whiteJenisPembayaran" id="whiteJenisPembayaran3"></div>
<div class="whiteJenisPembayaran" id="whiteJenisPembayaran4"></div> 
```

Javascript：

```
$(".whiteJenisPembayaran").live('focus', function() {
    $(this).typeahead(typeaheadConfig);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:54:48.700

```
$("#whiteJenisPembayaran1, #whiteJenisPembayaran2, #whiteJenisPembayaran3").live('focus', function() {
    $(this).typeahead(typeaheadConfig);
}); 
```

或者现在更“正确”的方式：

```
$(document).on('focus', '#whiteJenisPembayaran1, #whiteJenisPembayaran2, #whiteJenisPembayaran3', function() {
    $(this).typeahead(typeaheadConfig);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T00:55:01.680

```
function bindListener(index) {
    var key = '#whiteJenisPembayaran' + index;
    $(key).live('focus', function() {
        $(key).typeahead(typeaheadConfig);
    });
}

var n = 5; // your max
for (var i = 1; i <= n; ++i) {
    bindListener(index);
} 
```

这样做是为了防止循环内绑定事件的关闭问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T00:55:57.717

您可以使用属性选择器 [id^=string] 来选择 ID 以字符串开头的所有内容。

```
$("[id^=whiteJenisPembayaran]").live('focus', function() {
    $(this).typeahead(typeaheadConfig);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T00:56:30.493

您可以拥有一个包含所有 id 的数组，如下所示：

```
ids = [ '#whiteJenisPembayaran1', '#whiteJenisPembayaran2', '#whiteJenisPembayaran3' ];

for (i = 0; i < ids.length; i++) {
    $(ids[i]).live('focus', function() {
        $(ids[i]).typeahead(typeaheadConfig);
    });
} 
```

# php - php上传脚本

> ID：13224611
> 
> 赞同：-2
> 
> 时间：2012-11-05T00:50:10.763
> 
> 标签：php, mysql, database, file-upload

我正在尝试在名称与当前会话变量用户名相同的表的“歌曲”列中插入数据。但它给出以下错误解析错误：语法错误，意外'"'，期望 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

```
mysql_query("INSERT INTO ".$_SESSION['username']."('songs') VALUES(\"$_FILES["file"]["name"]\")"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:52:03.323

试试这个，

```
mysql_query("INSERT INTO ".$_SESSION['username']."(songs) VALUES('\\" . $_FILES['file']['name'] . "\\')" 
```

*   *删除表名*周围的单引号 *`song`*
**   `song`用 single 包装 的值*   在中使用单引号`$_FILES['file']['name']`*   逃脱`\`_`\`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T00:53:13.610

试试这个：

```
mysql_query("INSERT INTO ".$_SESSION['username']."('songs') VALUES(\"".$_FILES["file"]["name"]."\")"); 
```

变量中的引号引起了问题。*

# php - 如果数据库中的字符串末尾包含数字，它仍然不应该在 php 中生成字符串

> ID：13224614
> 
> 赞同：2
> 
> 时间：2012-11-05T00:50:38.420
> 
> 标签：php, mysql, sql, mysqli

我有一个应用程序，你可以[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text6.php)查看。当您打开应用程序时，您会看到一个提交按钮，只需单击该按钮，您就会看到它会在下面生成字符串。如果您继续单击该按钮，它会在字母“A”和“B”之间生成 2 个字母字符串。

如果在“SessionId”列下的数据库中，我有一行字符串“AB”。然后，当我继续单击提交按钮时，它不会生成字符串“AB”。我已经对此进行了测试，并且效果很好。因此，如果字符串末尾不包含数字，这不是问题。

我遇到的问题是这个。如果我想创建多个考试。假设字符串是“AA”并且我有 3 个考试，它不会在数据库中插入字符串“AA”，因为有多个“AA”，所以它在数据库中的每个“AA”之后连接一个数字，这样它显示为“AA1”、“AA2”和“AA3”。

但问题是，如果它这样做了，那么当您再次使用该应用程序并继续单击“提交”按钮时，您会看到它仍然会生成字符串“AA”，因为它不应该这样做，因为字符串“AA”被用于数据库为“AA1”、“AA2”和“AA3”。我目前在数据库中有这三个值，但它仍然在应用程序中生成字符串。

所以我的问题是，如果字符串在数据库中并且末尾连接了一个数字，我该如何阻止它在应用程序中生成字符串？

下面是应用程序的代码：

```
<?php

 // connect to the database
 include('connect.php');

  /* check connection */
  if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    die();
  }

function id_generator(){ 

          $id = ""; 
          $a = array( "A" , "B", "C" ); 

      for( $i = 0 ; $i < 2 ; $i++ ){ $r = rand( 0 , 1 );
       $id .= $a[ $r ]; 

   }

   return $id;

   };

   $is_there = true;

      while( $is_there ){
    $id = id_generator(); // your function to generate id;
    $result = "SELECT SessionId FROM Session WHERE SessionId LIKE CONCAT(?, '%')";

    $stmt=$mysqli->prepare($result);
    // You only need to call bind_param once
    $stmt->bind_param("1",$id);
    // execute query
    $stmt->execute(); 
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbSessionId);

    $stmt->store_result();

    $stmtnum = $stmt->num_rows();

    if($stmtnum == 0) {
    $is_there = false;
}
}

 ?>

    <h1>CREATING A NEW ASSESSMENT</h1>

        <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
        <p>
        <input id="courseSubmit" type="submit" value="Submit" name="submit" />
        </p>
        </form>

        <?php
if (isset($_POST['submit'])) {

        ?>

        <br/>

         <form action="QandATable.php" method="post" id="sessionForm">
         <p><strong>1: Your Assessment ID: </strong><span id="idFont"><?php echo $id; ?></span></p>
         <input type='hidden' name='id' value='<?php echo $id; ?>' />

        </form>

        <?php

        }
        ?>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:38:45.797

```
// You only need to call bind_param once
$stmt->bind_param("1",$id); 
```

将其更改为：

```
// You only need to call bind_param once
$stmt->bind_param("s",$id); 
```

bind_param 函数的第一个参数告诉解析器它是什么类型的参数（即字符串、int 等）： http: [//php.net/manual/en/mysqli-stmt.bind-param.php](http://php.net/manual/en/mysqli-stmt.bind-param.php)

# php - 从 PHP 中的当前请求中获取 http 标头

> ID：13224615
> 
> 赞同：46
> 
> 时间：2012-11-05T00:50:44.270
> 
> 标签：php, nginx, http-headers

是否可以使用 PHP 获取当前请求的 http 标头？我**没有**使用 Apache 作为网络服务器，而是使用 nginx。

我尝试使用`getallheaders()`，但我得到了`Call to undefined function getallheaders()`.

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-07-11T10:05:10.987

取自文档，有人写了[评论](http://www.php.net/manual/en/function.getallheaders.php#84262)...

```
if (!function_exists('getallheaders')) 
{ 
    function getallheaders() 
    { 
       $headers = array (); 
       foreach ($_SERVER as $name => $value) 
       { 
           if (substr($name, 0, 5) == 'HTTP_') 
           { 
               $headers[str_replace(' ', '-', ucwords(strtolower(str_replace('_', ' ', substr($name, 5)))))] = $value; 
           } 
       } 
       return $headers; 
    } 
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-01-09T10:29:19.003

改进了@Layke 他的功能，使其使用起来更加安全：

```
if (!function_exists('getallheaders'))  {
    function getallheaders()
    {
        if (!is_array($_SERVER)) {
            return array();
        }

        $headers = array();
        foreach ($_SERVER as $name => $value) {
            if (substr($name, 0, 5) == 'HTTP_') {
                $headers[str_replace(' ', '-', ucwords(strtolower(str_replace('_', ' ', substr($name, 5)))))] = $value;
            }
        }
        return $headers;
    }
} 
```

（希望我可以将其添加为对他的回答的评论，但仍然建立在那个声誉的基础上——我的第一个回复之一）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-27T18:56:00.273

**nginx 的组合 getallheaders() + apache_request_headers()**

```
 function get_nginx_headers($function_name='getallheaders'){

        $all_headers=array();

        if(function_exists($function_name)){ 

            $all_headers=$function_name();
        }
        else{

            foreach($_SERVER as $name => $value){

                if(substr($name,0,5)=='HTTP_'){

                    $name=substr($name,5);
                    $name=str_replace('_',' ',$name);
                    $name=strtolower($name);
                    $name=ucwords($name);
                    $name=str_replace(' ', '-', $name);

                    $all_headers[$name] = $value; 
                }
                elseif($function_name=='apache_request_headers'){

                    $all_headers[$name] = $value; 
                }
            }
        }

        return $all_headers;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-05T00:53:39.763

您可以将您的服务器升级到 PHP 5.4，从而使您可以通过 fastcgi 访问[getallheaders()](http://php.net/getallheaders)`foreach` ，或者只需使用循环和一些正则表达式从 $_SERVER 解析您需要的内容。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-01-07T14:44:18.227

这个问题最终在 PHP 7.3.0 中得到解决，请查看[发行说明](http://php.net/ChangeLog-7.php#7.3.0)。

> 修复了错误[#62596](http://bugs.php.net/62596)（PHP-FPM 缺少 getallheaders()）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-31T18:34:19.350

这应该有效：

```
<?php 

print_r(
  array_intersect_key(
    $_SERVER,
    array_flip(
      preg_grep(
        '/^HTTP_/', 
        array_keys($_SERVER),
        0
      )
    )
  )
); 
```

# javascript - Win8 Metro-JS 应用程序可以自己截屏吗？

> ID：13224618
> 
> 赞同：5
> 
> 时间：2012-11-05T00:51:24.320
> 
> 标签：javascript, windows, windows-8, microsoft-metro, screenshot

我想使用我的游戏当前状态的屏幕截图作为面板，帮助用户找出他们正在查看的保存状态。我可以捕捉数据并生成它，但这很麻烦，如果有某种方式可以说“我想要一张自己的屏幕截图”，那将为我节省大量时间。

我对其他应用程序的屏幕截图不感兴趣。

Metro JS（或Modern UI，我猜它现在被称为）应用程序可以以某种方式自我截图吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T02:23:08.343

不，没有官方方法可以给自己截屏。我尝试在本地调用 SendKeys 作为 hack，看看您是否可以将 PrintScreen 键发送到 Window，然后将结果从剪贴板中提取出来。如果无论如何都要这样做，那就是（尽管我没有提到我的运气）。要从 JS 应用程序调用它，您需要使用 C# 或 C++ 编写代码，然后将其公开为由 JS 代码引用和调用的 Windows 运行时组件。

如果在不自己复制数据渲染的情况下有任何解决方法，我想就是这样。

# javascript - 'this'关键字在Javascript中返回对象原型中的窗口对象？

> ID：13224620
> 
> 赞同：16
> 
> 时间：2012-11-05T00:51:42.087
> 
> 标签：javascript, prototypejs, this, prototype, function-prototypes

我在一个类中有以下功能：

```
MyClass.prototype.myFunction = function(item, args) 
{       
    console.log(this);
} 
```

此函数是从我无权更改的外部库调用的。当它被调用时，控制台将“this”记录为窗口对象，而不是实际的实例对象。在搜索stackoverflow时，我发现了这句话：

> 这是根据方法的调用方式设置的，而不是根据方法的编写方式设置的。因此对于 obj.method()，这将在 method() 中设置为 obj。对于 obj.method.call(x)，method() 内部的 this 将设置为 x。它由它的调用方式决定。这也意味着如果你将它作为回调传递给例如 onclick，这将被设置为全局窗口对象，而不是你所期望的。

我假设这是正在发生的事情，我无法改变它的调用方式。我的问题是，不管它是如何被调用的，无论如何都要获取对象的实例吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-07-28T17:40:30.890

这是与 Javascript 的常见混淆。很容易认为它们的行为就像其他语言中的扩展方法一样，但在 Javascript 中，更改上下文非常容易，`this`以至于它经常是偶然完成的。

所以：

```
MyClass.prototype.myFunction = function(args) 
{
    // You expect [this] to refer to an instance of MyClass
    this.somePropertyOfMyClass;
}; 
```

然后你可以调用它：

```
var x = new MyClass();
x.myFunction(args) 
```

然而，在 Javascript 中调用函数的方式可以改变`this`所指的内容：

```
var y = somethingElse();
x.myFunction.call(y, args); // now in myFunction [this] refers to y 
```

更有可能的是，许多库使用`this`上下文进行链接和事件 - 容易犯错误。例如在 jQuery 中：

```
var $thing = $('.selector');
$thing.click(x.myFunction); // now in myFunction [this] refers to $thing 
```

`x.myFunction`对于编写 jQuery 的人来说，以这种方式调用会破坏它可能并不明显。他们可以通过以下方式解决这个问题（假设他们知道实施）：

```
$thing.click(function() { x.myFunction(); }); 
```

如果您希望自己`MyClass`能够适应这样的调用，请不要使用`prototype`- 而是使用对象的属性：

```
function MyClass() {
    var self = this;
    // ...
    this.myFunction = function(args) 
    {
        // [self] will always refer to the current instance of MyClass
        self.somePropertyOfMyClass;
    };
} 
```

`prototype`请注意，更现代的浏览器 Javascript 引擎在优化此类调用方面非常出色，因此除非您已经确定需要额外的性能，否则我不会使用just 作为优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T01:09:57.883

大概一个函数引用被传递给其他函数来调用，而另一个函数类似于：

```
function otherFunction(args, fn) {
    ...
    fn();
    ...
} 
```

为确保该方法获得`this`所需，您可以执行以下操作：

```
// Create a local variable referencing the `this` you want
var instance = this;

// Pass a function that has a closure to the variable
// and sets the appropriate this in the call
otherFunction(args, function(){myMethod.call(instance)}) 
```

现在将是任何`this`参考。请注意，如果您在调用之后和调用方法之前更改 的值，将获得该新值。`myMethod``instance``instance``otherFunction``myMethod`

如果这是一个问题，您也可以处理它。

哦，您还可以在构造函数中处理这个问题，方法是为每个实例提供它自己的方法，该方法对该实例有一个闭包：

```
function MyObj(name) {
  var instance = this;
  instance.name = name;
  instance.getName = function() {
    return instance.name;
  }
}

var anObj = new MyObj('fred');

// Call as a method of anObj
alert(anObj.getName());  // fred 

// Pass method as a reference
var x = anObj.getName;

// Unqualified call
alert(x());  // fred 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-06-13T17:55:51.923

规则是：

**当`this`从函数调用时，它指的是全局对象（通常是`Window`）。
当`this`从方法调用时，它指的是所有者对象（即您正在使用该方法的当前对象）。**

例子：

```
function Tryme() {

    var that = this

    function func2() {
        console.log("'this' from 'func2':", this)
    }

    function func3() {
        console.log("'that' from 'func3':", that)
    }

    this.method1 = function () {
        console.log("'this' from 'method1':", this)
    }

    this.method2 = function () {
        func2()
    }

    this.method3 = function () {
        func3()
    }
}

myinstance = new Tryme()

myinstance.method1() // displays the object 'myinstance'
myinstance.method2() // displays the object 'Window'
myinstance.method3() // displays the object 'myinstance' 
```

**示例中发生了什么？**

当您调用`.method1()`并显示`this`时，您当前处于对象的方法中`myinstance`。所以`this`将引用对象本身（即。`myinstance`）。

当你调用时`.method2()`，这个方法会调用被调用对象内的一个本地`myinstance`函数`func2()`。这个函数`func2()`是函数而不是方法，所以`this`指的是全局对象`Window`。

当你调用时`.method3()`，这个方法会调用被调用对象内的一个本地`myinstance`函数`func3()`。此函数`func3()`是函数而不是方法，因此`this`指的是全局对象`Window`（如 中`func2()`）。但是在 中`func3()`，我们显示的是 的内容`that`，它是对象内的局部变量`myinstance`。`that`是一个对象，该对象已使用`this`when的值进行了初始化，该值`this`引用了所有者对象（即。`myinstance`）。在 JavaScript 中，如果你用( )`object2`的值进行初始化，那么当你改变一个对象的值时，另一个对象的值也会改变。所以总是指的是哪个值`object1``object2 = object1``that``this``myinstance`，即使值发生`this`变化。**请记住**：`this`是一个关键字，它指的是一个对象，它不是一个变量。

**你的情况发生了什么？**

您`this`从函数中调用，因此`this`指的是全局对象 ( `Window`)。

@Keith 建议可以做什么，即。创建一个对象，您将在其中创建一个`self`（或`that`）对象，该对象等于`this`您感兴趣的实例的 ，然后`self`在函数中使用该对象（它将引用`this`您感兴趣的对象）。

**更多信息**

这里：[https](https://www.w3schools.com/js/js_this.asp)
://www.w3schools.com/js/js_this.asp 这里：[https ://crockford.com/javascript/private.html](https://crockford.com/javascript/private.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T01:23:24.863

一种解决方法是`myFunction()`为每个实例创建一个副本，即在构造函数中创建它而不是在原型上创建它，因为这样您就可以`this`在构造函数中引用存储为局部变量的引用：

```
function MyClass() {
    var self = this;
    this.myFunction = function(item, args) {
        // use self instead of this
        console.log(self);
    };
    // other constructor code here
} 
```

但是当然，为每个实例创建一个函数会使用更多的内存——这可能是也可能不是问题，具体取决于函数的大小。一个折衷方案可能是在构造函数中为您的函数放置一个包装器，并在原型上定义实际函数：

```
function MyClass() {
    var self = this;
    this.myFunction = function(item, args) {
        return self.wrappedMyFunction(item, args);
    };

    // your other constructor code here
}    
MyClass.prototype.wrappedMyFunction = function(item, args) 
{       
    console.log(this);
} 
```

# c++ - Xcode 无法识别我的动态库

> ID：13224623
> 
> 赞同：1
> 
> 时间：2012-11-05T00:52:18.880
> 
> 标签：c++, c, xcode, dll

我使用 C/C++ 库模板构建了一个自定义动态库。在图书馆里面我有2个文件：

简单动作.c

```
#include <stdio.h>
#include "SimpleActions.h"

void println(char* string)
{
    printf("%s", string);
} 
```

简单动作.h

```
#ifndef PracticeLibrary_SimpleActions_h
#define PracticeLibrary_SimpleActions_h

void println(char*);

#endif 
```

然后，我在库上进行了构建。

然后，我创建了一个名为 TestLibrary 的新项目。我通过转到 Build Phases -> Link Binaries With Libraries -> + -> Add Other -> (path to my library) 将我的库添加到构建路径

我的库现在出现在构建路径中。现在我制作了这个文件：

```
#include <stdio.h>
#include "SimpleActions.h" //<<---- ERROR

int main(int argc, const char * argv[])
{

    // insert code here...
    printf("Hello, World!\n");
    return 0;
} 
```

我收到一条错误消息，提示“未找到 SimpleActions.h”。我做错了什么？

* * *

我将 SimpleActions.h 添加到我的构建路径中，然后我能够构建并运行该项目，但出现以下错误：

```
dyld: Library not loaded: /usr/local/lib/libPracticeLibrary.dylib
Referenced from: /Users/*****/Library/Developer/Xcode/DerivedData/UseLibrary-detiyfzxdbczfhlgufhfkvk/Build/Products/Debug/UseLibrary
Reason: image not found
(lldb) 
```

# java - 如果用户输入不是字符串，如何抛出异常？

> ID：13224624
> 
> 赞同：0
> 
> 时间：2012-11-05T00:52:19.283
> 
> 标签：java, string, numbers, ioexception

我的问题是，当用户输入字母以外的任何内容时，我需要抛出异常。

我无法改变我正在使用 BufferedReader 的事实，因为它是学校作业的一部分。这是我的代码：

```
public static String phoneList(String lastNameInput, String nameInput)
        throws IOException {

    BufferedReader bufferedreader = new BufferedReader(
            new InputStreamReader(System.in));

    try {

        System.out.println("Please input your first name.");
        // User input block
        String input = bufferedreader.readLine();
        nameInput = input;
    } catch (IOException e) {
        System.out.println("Sorry, please input just your first name.");
    }

    try {
        System.out.println("Please input your last name.");
        String input2 = bufferedreader.readLine();
        lastNameInput = input2;
    } catch (IOException e) {
        System.out
                .println("Sorry, please only use letters for your last name.");
    }
    return (lastNameInput + ", " + nameInput);

} 
```

那么如果用户输入包含数字或非字母字符，我可以使用什么方法引发异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T00:53:58.140

如果您的意思是字符串应该只包含字母，那么使用 String.matches(regex)。

```
if(bufferedreader.readLine().matches("[a-zA-Z]+")){
System.out.println("user entered string");
}
else {
throw new IOException();
} 
```

"[a-zA-Z]" 正则表达式只允许来自 az 或 AZ 的字母

或者如果你不想使用正则表达式。如果不是数字，您将不得不遍历字符串并检查每个字符。

```
try{

        System.out.println("Please input your first name.");
        //User input block
        String input = bufferedreader.readLine();
        nameInput = input;
         for(int i=0; i<nameInput.length();i++){
             if(Character.isLetter(nameInput.charAt(i))){
                continue;
              }
              else {
                throw new IOException();
              }
           }
        } catch(IOException e){
            System.out.println("Sorry, please input just your first name.");
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T01:04:23.967

> 我的问题是，当用户输入字符串以外的任何内容（即 int、float 或 double）时，我需要抛出异常。

你问的没有意义。为了说明，“12345”是一个字符串。是的。因此，如果您调用`readLine()`并且该行仅包含数字，您将得到一个仅包含数字的字符串。

因此，要解决您的问题，在您读取字符串后，您需要对其进行*验证*以确保它是可接受的“名字”。您可以通过多种方式做到这一点：

*   最粗略的方法是遍历字符串，检查每个字符我们是否可以接受。
*   一种稍微不那么粗糙（但可能是错误的）的方法可能是尝试将字符串解析为浮点数的整数。（作为练习，弄清楚我为什么说“可能是错的”。）
*   优雅的方法是使用`java.util.regex.Pattern`和匹配可接受名称的模式，并排除不需要的东西，如数字、嵌入的空格和标点符号。

正如@DanielFischer 的评论指出的那样，您需要仔细考虑名称中应该接受哪些字符。口音是一个例子，其他的可能是西里尔字母或汉字……或连字符。

# javascript - 如何更改输入值 onfocus 和 onblur（无 jquery）

> ID：13224643
> 
> 赞同：2
> 
> 时间：2012-11-05T00:55:08.700
> 
> 标签：javascript, search, focus, field, placeholder

我写了一些代码，有点像使用 JavaScript 替代 HTML5 占位符，但它不起作用。据我所知（以我对 js 的平庸知识），一切都应该工作，但事实并非如此。请帮忙！！！这是我的代码：

**JavaScript：**

```
(function(){
    var field = document.getElementById('placeholder');
    var placeholdertext = "Search box"; // << change this to whatever you want the placeholder text to be

    field.setAttribute("onblur", "if(value=='') { value = '" + placeholdertext + "'")
    field.setAttribute("onfocus", "if(value=='" + placeholdertext + "') { value = '' }")
})(); 
```

**HTML**

```
<input type="search" value="Search box" id="placeholder"> 
```

# 编辑：

我不想使用 jQuery 或 inline-html-coding，拜托。感谢您的帮助，伙计们！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:03:27.823

在您的代码中替换`value`为`this.value`（因为您需要检查触发事件的元素的值，而不是某个全局变量），[它将起作用](http://jsfiddle.net/FpFmv/)。

作为旁注，也许我更喜欢`placeholder`在这里仍然使用属性，只为不支持它的浏览器提供一个 JS 垫片。这也将简化 javascript 代码部分，因为您不必使用一些变量来存储一些与 DOM 相关的数据：

```
field.onblur = function() {
  if (this.value === '') {
    this.value = this.getAttribute('placeholder');
  }
};

field.onfocus = function() {
  if (this.value === this.getAttribute('placeholder') ) {
    this.value = '';
  }
}; 
```

...事实上，我更喜欢使用`addEventListener/attachEvent`here 而不是`onblur/onfocus`，如[本答案](https://stackoverflow.com/a/13214985/1229023)中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-12T12:43:43.357

```
<input type="text" value="Enter The User Name" onblur="if(this.value == '') { this.style.color='#f00'; this.value='Enter The User Name'}" onfocus="if (this.value == 'Enter The User Name') {this.style.color='#000'; this.value=''}" /> 
```

在没有 Jquery 的情况下试试这个

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T01:03:45.973

没有 jQuery：

```
field.onblur = function() {
  if (field.value == '') {
    field.value = placeholdertext;
  }
};

field.onfocus= function() {
  if (field.value == placeholdertext ) {
    field.value = '';
  }
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T01:00:32.237

我没有对此进行测试，但如果我理解你的问题，这应该可以。如果它有效，请不要忘记点击复选标记。

```
 var field = document.getElementById('placeholder');
    var placeholdertext = "Search box";

    field.bind('onblur', function() {
        if (field.text() === '') {
            field.text(placeholdertext);
        }
    });

    field.bind('onfocus', function() {
        if (field.text() === '') {
            field.text(placeholdertext);
        }
    }); 
```

# javascript - 使用 Javascript if 语句显示或隐藏 div

> ID：13224646
> 
> 赞同：0
> 
> 时间：2012-11-05T00:55:32.990
> 
> 标签：javascript

当谈到 javascript 时，我是一个完整的初学者，我正在尝试创建一个简单的 if/else 语句来显示不同的 div。

```
<script>
   if (window.FileReader && Modernizr.draganddrop){
      alert("Your browser supports drag and drop!!");
      document.getElementById(no).style.display = 'none';
   }else{
      alert("Sorry, browser does not support drag and drop!");
      document.getElementById(yes).style.display = 'none';
   }
</script> 
```

然后，在体内

```
<div id="yes">Drag and drop yes</div>

<div id="no">Drag and drop no</div> 
```

虽然 modernizr 工作得很好，但脚本显示两个 div

任何帮助都将受到极大的欢迎

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T00:58:47.747

问题是 getElementById 需要一个字符串，据我所知，您没有声明是/否。

```
if (window.FileReader && Modernizr.draganddrop) {
    alert("Your browser supports drag and drop!!");
    document.getElementById('no').style.display = 'none';
} else {
    alert("Sorry, browser does not support drag and drop!");
    document.getElementById('yes').style.display = 'none';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T00:59:15.263

该脚本在元素存在之前运行。使用该`load`事件使代码在页面完全加载后运行：

```
<script>
window.onload = function() {
   if (window.FileReader && Modernizr.draganddrop){
      alert("Your browser supports drag and drop!!");
      document.getElementById('no').style.display = 'none';
   }else{
      alert("Sorry, browser does not support drag and drop!");
      document.getElementById('yes').style.display = 'none';
   }
};
</script> 
```

此外，正如 Evan 所发现的，您使用的是`no`and`yes`而不是字符串`'no'`and `'yes'`。

# math - ID3 和 C4.5：“增益比”如何规范“增益”？

> ID：13224649
> 
> 赞同：3
> 
> 时间：2012-11-05T00:56:13.490
> 
> 标签：math, statistics, computer-science, data-mining, classification

ID3 算法使用“信息增益”度量。

C4.5 使用“增益比”度量，即信息增益除以`SplitInfo`，而`SplitInfo`对于记录在不同结果之间平均分配的拆分，则较高，否则较低。

**我的问题是：**

这如何帮助解决信息增益偏向于具有许多结果的分裂的问题？我看不出原因。`SplitInfo`甚至不考虑结果的数量，只考虑拆分中记录的分布。

很可能是结果数量很少（比如 2 个），并且记录在这 2 个结果之间平均分配。在这种情况下，`SplitInfo`高，增益比低，C4.5 不太可能选择结果很少的拆分。

另一方面，可能结果数量很少，但分布很不均匀。在这种情况下，`SplitInfo`低，增益率高，并且更有可能选择具有许多结果的拆分。

我错过了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T05:49:06.500

> SplitInfo 甚至不考虑结果的数量，只考虑拆分中记录的分布。

但它**确实**考虑了结果的数量。（即使它*也*取决于分布，正如您所指出的）。您的比较是在具有相同（“低”）结果数量的两种情况之间进行的，因此它不可能说明`SplitInfo`随着结果数量的变化而变化。

考虑以下 3 种情况，为便于比较，均采用均匀分布：

*   均匀分布的 10 种可能结果

    `SplitInfo = -10*(1/10*log2(1/10)) = 3.32`

*   100 种可能的结果，分布均匀

    `SplitInfo = -100*(1/100*log2(1/100)) = 6.64`

*   1000 种可能的结果，分布均匀

    `SplitInfo = -1000*(1/1000*log2(1/1000)) = 9.97`

因此，如果您必须在 3 种可能的拆分方案之间进行选择，仅使用`Information Gain`ID3，则将选择后者。但是，`SplitInfo`在 中使用`GainRatio`，应该清楚的是，随着选择数量的**增加**，`SplitInfo`will 也会上升，而`GainRatio`will**下降**。

所有这些都是通过假设均匀分布的分裂来解释的。然而，即使分布不均匀，上述情况仍然适用。 `SplitInfo`随着可能结果的数量越来越多，将会越来越高。是的，如果我们保持可能结果的数量不变并改变结果分布，那么`SplitInfo`会有一些差异......但也会如此`Information Gain`。

# image - 自定义裁剪的 Wordpress 缩略图，在媒体库中使用裁剪时被覆盖

> ID：13224650
> 
> 赞同：1
> 
> 时间：2012-11-05T00:56:28.870
> 
> 标签：image, wordpress, thumbnails, crop

我使用此函数在我的 functions.php 文件中定义了自定义缩略图大小：

```
add_theme_support( 'post-thumbnails' );
if ( function_exists( 'add_image_size' ) ) { 
add_image_size( 'address', 960, 250, true );
} 
```

只要我在上传图片后不使用 Wordpress 后端中的“编辑图片”功能（裁剪工具），它就可以正常工作。当我这样做时，我定义的高度（250px）不再被考虑。

有没有其他人遇到过这个问题并知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:33:41.200

这是一个已知问题。我在某处读到它将在即将发布的版本中解决。在此之前，您可以在`functions.php`. 只需调整图像大小。

```
if (function_exists('add_image_size')) {
    add_image_size( 'dummy-1', 940, 450, true );
    add_image_size( 'dummy-2', 480, 0 );
}

global $_wp_additional_image_sizes;
foreach ( $_wp_additional_image_sizes as $name =&gt; $image_size ){
    update_option( $name."_size_w", $image_size['width'] );
    update_option( $name."_size_h", $image_size['height'] );
    update_option( $name."_crop", $image_size['crop'] );
}

add_filter( 'intermediate_image_sizes', 'regenerate_custom_image_sizes' );
function regenerate_custom_image_sizes( $sizes ){
    global $_wp_additional_image_sizes;
    foreach ( $_wp_additional_image_sizes as $name =&gt; $size ){
        $sizes[] = $name;
    }
    return $sizes;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T07:46:11.310

“编辑图像”功能仅考虑用于裁剪、调整大小、旋转和其他次要“编辑”的原始文件（“完整”）图像。您可以在此处指定是否要所有尺寸、仅缩略图或除缩略图以外的所有尺寸。

# spring - com.googlecode.ehcache.annotations.Cacheable 的 @cacheable 不适用于 spring

> ID：13224653
> 
> 赞同：1
> 
> 时间：2012-11-05T00:56:56.157
> 
> 标签：spring, ehcache

我是 ehcache 和 spring 注释集成的新手。我在**spring 2.5中使用****com.googlecode.ehcache.annotations.Cacheable**注释，如下所示，它从不缓存返回值。返回一个空列表，并且每次控制器进行调用时都会调用该方法。请帮帮我。**`cache.getKeys()`**

 **下面的方法是一个接口的实现，控制器根据映射 jsp 的请求调用该接口`URL.cacheID`始终是常量，我的想法是将检索到的值存储在 hashmap 中，并在应用程序需要时访问这些映射。

```
 @Override
 @Cacheable(cacheName="partnerMapping")
 public String retrievePartnerMappings(String cacheID) {
   partnerCodeToNameMapping = new HashMap<String, String>();
   partnerNameToCodeMapping = new HashMap<String, String>();
   Cache cache = cacheManager.getCache("partnerMapping");
   log.debug(cache.getKeys().toString());
   try {
   log.debug("Querying for partner mappings...");
   Collection<PartnerMapping> partnerMappings = this.getSimpleJdbcTemplate()
      .query(
          sqlStatements.getProperty("selectAllSql"),
          ParameterizedBeanPropertyRowMapper
              .newInstance(PartnerMapping.class));
   for (PartnerMapping mapping : partnerMappings) {
     partnerCodeToNameMapping.put(mapping.getPartnerCode().toUpperCase(),
        mapping.getPartnerName());
     partnerNameToCodeMapping.put(mapping.getPartnerName(), mapping
        .getPartnerCode().toUpperCase());
   }
   return "success";
 } catch (DataAccessException e) {
  log.error("Unable to retrieve the partner mappings!!", e);
  return "fail";
 }
} 
```

ehCache.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="http://ehcache.org/ehcache.xsd">

<cache name="partnerMapping" maxElementsInMemory="100" eternal="false"
   overflowToDisk="false" timeToLiveSeconds="120" timeToIdleSeconds="120"/>
</ehcache> 
```

弹簧上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns:context="http://www.springframework.org/schema/context"
xmlns:ehcache="http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring"
xsi:schemaLocation="http://www.springframework.org/schema/beans                         
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd        
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-2.5.xsd
http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring 
http://ehcache-spring-annotations.googlecode.com/svn/schema/ehcache-spring/ehcache-spring-1.1.xsd">

  <ehcache:annotation-driven />
  <context:annotation-config />
  <context:component-scan base-package="com.spring.ehcache" />

  <ehcache:config cache-manager="cacheManager">
    <ehcache:evict-expired-elements interval="60" />
  </ehcache:config>

  <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
    <property name="configLocation"  value="/WEB-INF/ehcache.xml"/>
  </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:36:47.733

设法得到这个工作。我在主 dispatcherServlet xml 中包含了 ehcache 配置，而不是单独的 xml 配置，然后包含在 spring 上下文中。**

# c# - Windows 应用商店应用程序崩溃、质量报告和 CEIP

> ID：13224661
> 
> 赞同：2
> 
> 时间：2012-11-05T00:57:51.180
> 
> 标签：c#, crash, windows-8, crash-reports, windows-store-apps

Microsoft 的 Antoine Leblond[在这里讨论](http://blogs.msdn.com/b/windowsstore/archive/2012/06/27/improving-apps-with-quality-reports.aspx)了 Windows Store 仪表板如何显示应用程序崩溃，这很好。

另外，Microsoft 有[一篇文章](http://technet.microsoft.com/en-us/library/jj618322.aspx)讨论了他们的 Windows 客户体验改善 (CEIP) 系统，并指出 CEIP 在 Windows 8 中默认关闭。但是，该文章也这样说：

> 安装 Windows 8 并首次启动计算机时，会出现 Initial Configuration Tasks 对话框。接受初始配置任务的默认建议会开启客户体验改善计划

对我来说，这表明大多数用户可能会接受默认设置，并且 CEIP 将在大多数人的安装中打开。

所以我的主要问题是：**Windows 应用商店仪表板中的质量报告是通过 CEIP 完成的，还是绕过 CEIP 并且始终为 Windows 应用商店应用程序发送报告？**

有点相关，这些质量报告是否有效并为 C# 应用程序和 C++ 应用程序发送堆栈跟踪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T21:21:36.160

我想这篇文章或许能给出答案：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh967787.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh967787.aspx)

如果我没记错的话，质量报告属于**分析数据收集**，根据文章，无论是否启用 CEIP，它总是被收集。

# php - 自定义字段 wordpress

> ID：13224662
> 
> 赞同：0
> 
> 时间：2012-11-05T00:57:52.020
> 
> 标签：php, html

我正在尝试通过在以下步骤中发布帖子来添加在自定义字段中分配的值：我创建了一个新帖子，添加了一个新的自定义字段，我在其中指定了一个名称和一个值。

**PHP**

我将以下脚本添加到 index.php 循环中，恰好在**while**及其参数开始的位置以及我希望分别添加该字段的 HTML 中

```
<?php while ( have_posts() ) : the_post(); ?>
<?php the_meta();?>

<?php echo get_post_meta(get_the_ID(), 'key');?> 
```

如果我做得对，我最难理解的是 HTML。当我使用 firefox 和 firebug 启动该站点时，我检测到该帖子并找到应该添加该字段的 html。但是我注意到 WP 会自动为原始帖子生成段落标签，所以我真的不知道我应该在哪里添加 get_post_meta 以便将其添加到我的帖子中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T07:27:37.000

试试这个代码，这将删除你的段落标签，

```
<?php while ( have_posts() ) : the_post(); ?>
    <?php echo get_the_Content(); ?>
    <div class="custom-field">
        <?php $customfield = get_post_meta(get_the_ID(), 'key'); echo $customfield[0];?>
    </div>
<?php endwhile; ?>` 
```

# javascript - 原型和 async.forEach 的范围问题

> ID：13224663
> 
> 赞同：1
> 
> 时间：2012-11-05T00:58:04.863
> 
> 标签：javascript, node.js, asynchronous, coffeescript

我有一个我不明白的范围问题。

我有这个对象有一些方法：

```
FileInfo = (file) ->
   @name = path.basename(file.path);

FileInfo::uploadImage = (filename, callback) ->

FileInfo::handleImage = (version, callback) ->
   # Here I would like to call uploadImage 
```

我从 async.forEach 循环中调用 handleImage 为：

```
async.forEach options, fileInfo.handleImage,  (err) - 
```

我想从 handleImage 中调用 uploadImage，但我得到 TypeError: Object # has no method 'uploadImage'

我在handleImage中尝试了以下内容：

```
this.uploadImage 
```

也：

```
that = this
that.uploadImage 
```

都不工作。

如果我在 forEach 循环之外调用 fileInfo.handleImage ，它可以很好地处理这个或那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:00:26.480

更改`fileInfo.handleImage`为`fileInfo.handleImage.bind(fileInfo)`（假设`fileInfo`是 的一个实例*）*`FileInfo`。

它正在丢失您期望的`this`绑定（即该函数执行时的*值*，`this`不要与[*执行上下文*](http://ecma-international.org/ecma-262/5.1/#sec-10.3)混淆，请参阅注释），因为您不会立即调用它，只需传递对它的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T13:44:00.450

您可以使用上面建议的绑定或粗箭头 (=>)

但是，要使胖箭头起作用，您需要使用惯用的 Coffeescript 类。通过分配原型槽以正常的 Javascript 方式构建类是行不通的。

```
class FileInfo
    constructor: (file) -> 
        @name = path.basename(file.path);

    uploadImage: (filename, callback) ->

                                     ---- fat arrow here
                                     V
    handleImage: (version, callback) =>
    # Here I would like to call uploadImage 
```

以这种方式使用它将强制 CoffeeScript 编译器为您生成 Javascript 中的绑定。

# lua - 如何使用 LUA 在相对路径中转换绝对路径？

> ID：13224664
> 
> 赞同：0
> 
> 时间：2012-11-05T00:58:09.337
> 
> 标签：lua, path, relative-path

我有两个绝对文件路径（`A`和`B`）。我想转换`A`为`B`. 我如何使用 Lua 脚本来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:13:48.410

执行此操作的算法是：

1.  将两条路径都转换为规范形式。（即从文件系统根目录开始，没有尾部斜杠，没有双斜杠等）
2.  从这两个路径中，删除它们的公共前缀。（例如从`A="/a/b/c/d.txt" B="/a/b/e/f.txt"`到`A="c/d.txt" B="e/f.txt"`）
3.  通过路径分隔符拆分剩余路径。（所以你最终会得到`A={"c", "d.txt"} B={"e", "f.txt"}`
4.  如果原始路径`B`指向常规文件，则删除`B`. 如果它指向一个目录，则保持原样。（对于我们的示例，您会得到`B={"e"}`）
5.  对于 B 中剩下的每个项目，`..`在 的开头插入 a `A`。（结果为`A={"..", "c", "d.txt"}`）
6.  加入内容`A`使用路径分隔符得到最终结果：`"../c/d.txt"`

这是一个**非常粗略**的实现，不需要库。它不处理任何边缘情况，例如`from`和`to`是相同的，或者一个是另一个的前缀。（我的意思是在这些情况下该函数**肯定会中断**`mismatch`，因为将等于`0`。）这主要是因为我很懒；也因为代码已经有点长了，这会更加损害可读性。

```
-- to and from have to be in a canonical absolute form at 
-- this point
to = "/a/b/c/d.txt"
from = "/a/b/e/f.txt"

min_len = math.min(to:len(), from:len())
mismatch = 0
print(min_len)

for i = 1, min_len do
    if to:sub(i, i) ~= from:sub(i, i) then
        mismatch = i
        break
    end
end

-- handle edge cases here

-- the parts of `a` and `b` that differ
to_diff = to:sub(mismatch)
from_diff = from:sub(mismatch)

from_file = io.open(from)
from_is_dir = false
if (from_file) then
    -- check if `from` is a directory
    result, err_msg, err_no = from_file:read(0)
    if (err_no == 21) then -- EISDIR - `from` is a directory

end

result = ""
for slash in from_diff:gmatch("/") do
    result = result .. "../"
end
if from_is_dir then
    result = result .. "../"
end
result = result .. to_diff

print(result) --> ../c/d.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:27:15.293

`pl.path.relpath`从 Penlight 库 ( [doc](http://stevedonovan.github.com/Penlight/api/modules/pl.path.html#relpath "文档") / [source](https://github.com/stevedonovan/Penlight/blob/b121e7a461688ffb16616231804de5e7df5c1b8f/lua/pl/path.lua#L300 "资源") ) 中使用。

# ios - 如何在涉及标签栏、表格视图和导航控制器的两个视图之间切换？

> ID：13224671
> 
> 赞同：0
> 
> 时间：2012-11-05T00:59:11.460
> 
> 标签：ios

我有一个带有两个标签的标签栏控制器。第一个选项卡显示类型 A 的表格视图。如果单击单元格，则类型 A 的视图被推送到导航堆栈上。如您所料，该视图有一个后退按钮，可从导航堆栈中弹出视图并显示 A 类型事物的表格视图。

第二个选项卡显示类型 B 的表格视图。如果单击单元格，则类型 B 的视图被推送到导航堆栈上。同样，正如您所期望的，该视图还有一个后退按钮，可以从导航堆栈中弹出视图并显示 B 类型事物的表格视图。

A 型视图还有一个按钮，它在概念上将 A 型事物转换为 B 型事物。在视觉上，A 型视图被 B 型视图替换。在幕后，我需要将 A 型视图从导航堆栈中弹出，将选项卡更改为 B 型表事物，然后将 B 型视图控制器弹出到导航堆栈，以便 B 类视图的后退按钮将用户带回 B 类事物表。

我实现这一点的第一个想法是将我的 A 型视图上的按钮链接到我的选项卡栏控制器的实现，它会弹出现有的 A 型视图，将选项卡更改为 B 型事物的列表，然后将 B 型视图推送到导航堆栈。但这会从 A 型视图创建对选项卡栏控制器的否则不必要的引用。

有一个更好的方法吗？也许有一个自定义的segue？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:28:03.067

如果你觉得这个引用不合适，那么它听起来像是 NSNotification 的工作。无论哪个类最适合执行您的导航逻辑，都可以侦听自定义 @"switchToBThings" 通知，否则将与请求切换的按钮完全分离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T23:48:55.653

自从发布我的问题以来，我了解到没有必要维护我自己对标签栏控制器的显式引用，因为每个 UIViewController 都有属性：`parentViewController`。

这意味着我可以从我的类型 A 视图访问我的自定义标签栏控制器，而无需维护我自己的引用。结果，我的代码现在更简单了。当按下类型 A 视图上的按钮时，在类型 A 的视图控制器中执行以下代码：

```
[(MyCustomTabBarController *)[[self parentViewController] parentViewController] switchToViewOfTypeB:referenceToObjectOfTypeA]; 
```

其中 switchToViewOfTypeB 是自定义标签栏控制器上执行 segue 的代码。

在这种情况下，我比使用通知更喜欢这种方法，因为从类型 A 视图中可以清楚地看出，它是负责执行 segue 的自定义选项卡栏。

# php - 创建新的核心类（不替换）

> ID：13224673
> 
> 赞同：0
> 
> 时间：2012-11-05T00:59:22.173
> 
> 标签：php, codeigniter, core

现在我不是最伟大的 Code Igniter 人，但我正在寻找一种方法来创建其他核心类。我的代码没有扩展当前核心的目的，也没有将其创建为控制器的用途。

是否有某个地方指定了要自动加载的内容？我从一个非常基本的文件开始`Application/core/world.php`

```
Class CI_Worlds{

    function __construct(){
        die('this is the end of the world');
    }
}

?> 
```

尝试使用`$this->load->library('Worlds');` Have 访问它还尝试了类名的其他替代方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:04:10.257

所有自动加载的文件都在`config/autoload.php`. 如果您想创建一个全新的类，请将其放在库目录中。

如果你想自动加载它，打开`config/autoload.php`并在 $autoload['libraries'] 下包含类名：

```
$autoload['libraries'] = array('CI_Worlds'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T12:41:59.027

通过自动加载类`$autoload[...]`有一个小缺点：类的对象会自动实例化，并且可以使用`->class_name`from CI ,,superobject'' 访问（请查看`Loader::_ci_autoloader()`）`system/core/Loader.php`。可访问性并不优雅，但实例化可能是不需要的或不必要的。

这是我的解决方案：

归档`MY_Loader.php`_`application/core`

```
<?php

defined('BASEPATH') OR exit('No direct script access allowed');

class MY_Loader extends CI_Loader
{
  const MY_AUTOLOADER_CONFIG = 'my_autoloader';

  /******************************************************************************************/

  private $search_paths = array();

  /******************************************************************************************/

  private function register_autoloader(array $search_paths)
  {
    foreach($search_paths as $path)
      if ($path = realpath($path))
        $this->search_paths[] = $path;

    if (empty($this->search_paths))
      throw new LogicException('Autoloader search_paths does not contain any valid path');
    else
      spl_autoload_register(array($this, 'autoloader'));
  }

  /**
    * Based on idea from http://www.highermedia.com/articles/nuts_bolts/codeigniter_base_classes_revisited
    */
  private function autoloader($class_name)
  {
    if (!class_exists($class_name, false)) // false == no autoload ;)
      foreach($this->search_paths as $path)
      {
        $file_name = $path.DIRECTORY_SEPARATOR.$class_name.'.php';
        if (file_exists($file_name))
          include_once($file_name);
      }      
  }

  /******************************************************************************************/

  /**
    * extension of CI_Loader::_ci_autoloader()
    */
  protected function _ci_autoloader()
  {
    $config = load_class('config', 'core');
    if ($config->load(self::MY_AUTOLOADER_CONFIG, TRUE, TRUE))
      $this->register_autoloader(
        $config->item('search_paths', self::MY_AUTOLOADER_CONFIG)
      );

    parent::_ci_autoloader();
  }

} 
```

还有一个例子`config/my_autoloader.php`

```
<?php

$config['search_paths'] = array(
  APPPATH.'core'
); 
```

此代码中包含的类不会自动实例化。

另外值得记住一些缺点：如果加载了此代码的类也加载了 CI 代码的某个地方，则 CI 可能会失败。或者换句话说：必须保持文件和类不相互干扰。

# jquery - 一旦某些东西被 .remove() - 可以买回来吗？还是可以刷新原始来源？jQuery

> ID：13224678
> 
> 赞同：0
> 
> 时间：2012-11-05T00:59:44.783
> 
> 标签：jquery

我有点问题，只是想知道这是否可能？

可以说我有这个...

```
<div id="box">

     <div data-ground="1">ONE</div>
     <div data-ground="2">TWO</div>
     <div data-ground="3">THREE</div>
     <div data-ground="4">FOUR</div>

</div> 
```

我用它来删除除一个特定div之外的所有...

```
$('#box div[data-group!=3]').remove(); 
```

现在无论如何要带回`div#box`- 在它们被删除后的原始子元素？

我做了一个小提琴...... [http://jsfiddle.net/motocomdigital/N8vUy/4/](http://jsfiddle.net/motocomdigital/N8vUy/4/)

任何建议都会非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:03:56.153

除了从头开始重新创建它们并重新插入父节点之外，您无法恢复已删除的节点。

根据您的目的，也许可以选择隐藏节点并在需要时显示它。

```
$('#box div[data-group!="3"]').hide(); // hide node
$('#box div[data-group!="3"]').show(); // show node 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:07:02.530

该[`remove`方法](http://api.jquery.com/remove/)不仅将元素从 DOM 中取出，它还将取消绑定事件并删除元素的 jQuery 数据，因此即使您保留对元素的引用，也不能将它们重新插入 DOM 中。

当您想保留元素时，请使用该[`detach`方法：](http://api.jquery.com/detach/)

```
var el = $('div[data-group!=3]');
el.detach();

$('#box').append(el); 
```

演示：http: [//jsfiddle.net/Guffa/N8vUy/10/](http://jsfiddle.net/Guffa/N8vUy/10/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:11:09.097

$('a#button').on('点击', function (){

```
$('div [data-group!="3"]').remove(); 
```

});

在 div 标签之后放置 1 个空格，这就是为什么在您单击链接后所有 div 标签都消失的原因。

对于你的第一个问题
，你不能把它带回来。

尝试使用 .hide() 和 .show()
或尝试使用 .toggle()

# perl - 在 Perl 中拆分包含数字的字符串

> ID：13224684
> 
> 赞同：2
> 
> 时间：2012-11-05T01:00:36.853
> 
> 标签：perl, split

我想拆分一个字符串（有数字）。在下面的示例中，我想在 k 和 k1 处拆分字符串。

```
my @array1=("0","23","1","4","65","7");
$k=1;$k1=0;
my $j=join("",@array1);
my @ar=split(/($k|$k1)/,$j);
print join(";",@ar),"\n\n"; 
```

输出是`;0;23;1;4657`

在上面的输出中，额外的分号“;” 正在打印

预期的输出是`0;23;1;4657`

当我为以下示例尝试上述代码时，输​​出是正确的`(0;5;123;4;6)`：额外的分号不在此处打印。

```
my @array1=("0","5","1234","6");
$k=5;$k1=4; 
```

我不确定，第一个示例出于什么原因打印额外的分号“;”

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:15:04.820

不同之处在于，当您围绕第一个字符进行拆分时，您会在开头得到一个空值。因此额外的; 在 0 之前（和在 "" 之后）。你会同样发现 ;; 分割两个相邻字符时

所以最简单的解决方法是使用 grep 删除空字符串：

```
my @ar=split(/($k|$k1)/,$j);
@ar = grep /./, @ar; 
```

这将删除 @ar 中的空字符串。

从更大的角度来看，您可能想看看为什么要加入字符串只是为了将它们分开。你也在一个地方分裂了一个可能出现在另一个地方的数字。就像 $k=1 和 @array1 = (11, 23, 1, 4);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:15:49.033

这是一个非常人为的例子，有很多问题（例如，$k 和 $k1 需要用“my”声明，你应该`use strict`等等）而且它可能会做一些你不想要的事情。

最重要的是，您看到前导分号的原因是，如果您使用与字符串开头匹配的分隔符进行拆分，则[split](http://perldoc.perl.org/functions/split.html)将为此返回一个空列表元素。

```
print join ';', split /0/, '0123'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T02:06:44.813

这段代码中有一些我不知道的有趣行为，其他答案中也没有提到。a on 正则表达式通常会发生的情况`split`是，您要拆分的字符会从结果中省略。但是，似乎如果您在正则表达式中捕获了括号，则捕获的材料将保留在结果中。

### 脚本

```
#!/usr/bin/env perl

use strict;
use warnings;

my @array1 = ("0", "23", "1", "4", "65", "7");
my $j = join("", @array1);
my $k;
my $k1;
my @ar;
print "Join [$j]\n";

$k = 1;
$k1 = 0;
printf "%-25s", "Version 1 /($k|$k1)/:";
@ar = split(/($k|$k1)/, $j);
print "[", join(";", @ar), "]\n";

printf "%-25s", "Version 2 /($k|$k1)/:";
$k = "1";
$k1 = "0";
@ar = split(/($k|$k1)/, $j);
print "[", join(";", @ar), "]\n";

printf "%-25s", "Version 3 /[01]/:";
@ar = split(/[01]/, $j);
print "[", join(";", @ar), "]\n";

printf "%-25s", "Version 4 /(0|1)/:";
@ar = split(/(0|1)/, $j);
print "[", join(";", @ar), "]\n";

printf "%-25s", "Version 5 /0|1/:";
@ar = split(/0|1/, $j);
print "[", join(";", @ar), "]\n";

printf "%-25s", "Version 6 /([46])/:";
@ar = split(/([46])/, $j);
print "[", join(";", @ar), "]\n";

printf "%-25s", "Version 7 /(?:[46])/:";
@ar = split(/(?:[46])/, $j);
print "[", join(";", @ar), "]\n"; 
```

### 输出

```
Join [02314657]
Version 1 /(1|0)/:       [;0;23;1;4657]
Version 2 /(1|0)/:       [;0;23;1;4657]
Version 3 /[01]/:        [;23;4657]
Version 4 /(0|1)/:       [;0;23;1;4657]
Version 5 /0|1/:         [;23;4657]
Version 6 /([46])/:      [0231;4;;6;57]
Version 7 /(?:[46])/:    [0231;;57] 
```

如您所见，当拆分字符串的正则表达式中存在捕获括号时，将保留（捕获的）拆分字符。当括号丢失或显式非捕获（版本 7）时，不保留拆分字符。

而且，如果您仔细阅读手册，[`split`](http://perldoc.perl.org/functions/split.html)说明确实包含以下段落：

> 如果 PATTERN 包含[捕获组](http://perldoc.perl.org/perlretut.html#Grouping-things-and-hierarchical-matching)，则对于每个分隔符，为组捕获的每个子字符串生成一个附加字段（按照指定组的顺序，根据[反向引用](http://perldoc.perl.org/perlretut.html#Backreferences)；如果任何组不匹配，则它捕获`undef`值而不是子字符串。另外，请注意，只要有分隔符（即，每当发生拆分时），就会产生任何此类附加字段，并且此类附加字段不计入 LIMIT。

接下来是一些例子。

在 Mac OS X 10.7.5 上使用 Perl 5.16.0 进行测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T02:27:49.480

一种选择是使用正则表达式而不是`split`. 这适用于您显示的两个数据集：

```
use strict;
use warnings;

my @array1 = ( "0", "23", "1", "4", "65", "7" );
my $k      = 1;
my $k1     = 0;

my $j      = join( '', @array1 );
my @ar = $j =~ /([$k$k1]|[^$k$k1]+)/g;
print join( ";", @ar ); 
```

输出：

```
0;23;1;4657 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T11:36:42.980

Perl 提供了一个非常强大的正则表达式替换结构，在这种情况下不需要执行`split`-fu 和-fu：`join`

```
$string =~ s{(?:$k|$k1)\K}{;}g ; 
```

# listview - ListView 图标崩溃应用程序的 ArrayAdapter

> ID：13224685
> 
> 赞同：1
> 
> 时间：2012-11-05T01:00:48.180
> 
> 标签：listview, crash, android-arrayadapter, logcat

我对 Android 开发非常陌生，几乎没有经验。但是，我查找了有关如何在列表视图中获取文本旁边的图标的教程。我按照教程进行操作，在没有出现错误后，启动了我的应用程序。当我单击任何按钮时，即使是不受阵列适配器影响的按钮，应用程序也会崩溃。

这是 ArrayAdapter 代码

[http://pastebin.com/2GQn4Ugr](http://pastebin.com/2GQn4Ugr)

这是显示列表视图的 .class 文件的代码

[http://pastebin.com/mWU6UWLv](http://pastebin.com/mWU6UWLv)

最后，这里是 logcat

```
11-04 16:59:02.492: E/AndroidRuntime(28578): FATAL EXCEPTION: main
11-04 16:59:02.492: E/AndroidRuntime(28578): java.lang.NullPointerException
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.ArrayAdapter.createViewFromResource(ArrayAdapter.java:392)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.ArrayAdapter.getView(ArrayAdapter.java:362)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.AbsListView.obtainView(AbsListView.java:2451)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.ListView.makeAndAddView(ListView.java:1780)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.ListView.fillDown(ListView.java:678)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.ListView.fillFromTop(ListView.java:738)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.ListView.layoutChildren(ListView.java:1631)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.AbsListView.onLayout(AbsListView.java:2281)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.View.layout(View.java:11338)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.ViewGroup.layout(ViewGroup.java:4238)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.View.layout(View.java:11338)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.ViewGroup.layout(ViewGroup.java:4238)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1644)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1502)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1415)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.View.layout(View.java:11338)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.ViewGroup.layout(ViewGroup.java:4238)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.widget.FrameLayout.onLayout(FrameLayout.java:431)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.View.layout(View.java:11338)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.ViewGroup.layout(ViewGroup.java:4238)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1667)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2624)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.os.Looper.loop(Looper.java:137)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at android.app.ActivityThread.main(ActivityThread.java:4517)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at java.lang.reflect.Method.invokeNative(Native Method)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at java.lang.reflect.Method.invoke(Method.java:511)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
11-04 16:59:02.492: E/AndroidRuntime(28578):    at dalvik.system.NativeStart.main(Native Method) 
```

感谢：D

# r - R XLConnect 包不断创建损坏的文件

> ID：13224692
> 
> 赞同：1
> 
> 时间：2012-11-05T01:02:51.443
> 
> 标签：r, export-to-excel, xlsx

我正在尝试使用带有 R 的 XLConnect 包来导入一些 Excel 数据，进行一些修改然后保存它。每次我这样做虽然它损坏了文件。我尝试使用 XLConnect 创建一个工作簿，然后立即保存它，但即使是 XLConnect 创建的文件也已损坏。每次我尝试在 Excel 中打开它们时，我都会收到错误消息。这是我用来尝试创建文件然后保存它的非常简单的代码。

```
library(rJava)
library(XLConnectJars)
library(XLConnect)

wb.new <- loadWorkbook("myNewExcelFile.xlsx", create= TRUE)
saveWorkbook(wb.new) 
```

每次我做这个 Excel 都会给我一个错误，说文件已损坏。我可以在 R 中创建 Workbook 对象并对其进行操作，但我无法在不损坏的情况下保存它。这是我的环境：

> Windows 7 专业版 64 位
> 
> Java 1.7.0_06 64 位
> 
> RStudio 版本。0.96.331
> 
> R版。2.15.2 64 位

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:18:24.607

正如我在上面的评论中提到的，这不是一个完整的解决方案，而只是一个粗略的解决方法。我最近发现，如果我最初写入较旧的格式，特别是`.xls`文件，然后`.xlsx`在需要时将其转换为 Excel 中，XLConnect 会更稳定一些。

# php - 截至 2012 年 11 月，通过 json 和 php 获取 youtube 数据的正确语法是什么？

> ID：13224694
> 
> 赞同：4
> 
> 时间：2012-11-05T01:03:23.797
> 
> 标签：php, json, syntax, youtube-api

我很难通过 json 和 php 获取 youtube 视频数据。

我花了整整一夜和早上尝试来自网络和堆栈溢出的代码片段。

他们不工作的事实向我表明我没有使用最新的语法。

我认为提出这个问题的最清楚的方法是询问截至 2012 年 11 月以下属性是否正确。

所以这是我的初始变量声明：

```
$json = file_get_contents("http://gdata.youtube.com/feeds/api/videos/{$random_text}?v=2&alt=json");
$json_data = json_decode($json); 
```

谁能告诉我以下是否正确：

```
1\.  $video_title = $json_data->{'entry'}->{'title'};
2\.  $video_date = $json_data->{'entry'}->{'published'};
3\.  $video_duration = $json_data->{'entry'}->{'media:group'}->{'yt$duration'};
4\.  $video_views = $json_data->{'entry'}->{'yt$statistics'}->{'viewCount'};
5\.  $video_description = $json_data->{'entry'}->{'content'}; 
```

我不想通过提供太多其他代码和信息来淡化这个问题，但我得到的错误之一是：

```
Catchable fatal error: Object of class stdClass could not be converted to string 
```

所以我知道其中一个属性是不正确的。

谢谢你的帮助，我要去喝杯咖啡，然后再回来！

**研究**

这些资源是对我试图获取的属性的直接 api 引用并且应该可以工作，但它们似乎不是:(。

提要和入口结构：

[https://developers.google.com/youtube/2.0/developers_guide_protocol_understanding_video_feeds#Understanding_Video_Entries](https://developers.google.com/youtube/2.0/developers_guide_protocol_understanding_video_feeds#Understanding_Video_Entries)

条目的内容：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_entry](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_entry)

标题标签：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_title](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_title)

发布标签：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_published](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_published)

yt：持续时间标签：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:duration](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:duration)

yt:statistics > viewCount 标签：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:statistics](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt:statistics)

内容标签（视频说明）：

[https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_content](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_content)

**代码示例**（根据要求）

所以我正在做的是：

*   我有一个表格
*   提交后由 php 文件 (insert.php) 处理
*   它对数据进行一些更改，然后提交到数据库
*   我在以 $final_li_code 开头的行收到错误消息（但如果不包含 json 变量，则那里的代码有效，所以问题出在 json 变量上）
*   （我被告知此表单容易受到 sql 注入的影响，但它不是面向公众的表单，即它受 htaccess/htpasswd 保护）。

这是 insert.php 中的相关代码：

```
// basic form information
$field1 = $_POST["field1"];
$field2 = $_POST["field2"];
$original_link = $_POST["link"];
// add class and video display information
$random_text = array_pop(explode('/',$original_link)); 
$final_value = "<a class=\'youtube\' href=\"http://www.youtube.com/embed/".$random_text."?rel=0&autohide=1&showinfo=0&autoplay=0&iv_load_policy=3&amp;wmode=transparent\">link</a>";
//start getting the youtube information
$thumb = "<img src=\"http://i.ytimg.com/vi/".$random_text."/mqdefault.jpg\">";
$json = file_get_contents("http://gdata.youtube.com/feeds/api/videos/{$random_text}?v=2&alt=json");
$json_data = json_decode($json);
$video_title = $json_data->entry->title;
$video_date = $json_data->entry->published;
$video_duration = $json_data->entry->media:group->yt:duration;
$video_views = $json_data->entry->ytstatistics->viewCount;
$video_description = $json_data->entry->content;
// put it all together to create an <li>
$final_li_code = "<li class=\".{$field1} .{$field2}\">{$thumb}<div id=\"video_information\"><h3>{$video_title}</h3><div id=\"video_information_left\"><span id=\"date\">{$video_date}</span><span id=\"duration\">{$video_duration}</span><span id=\"another_id\">{$field2}</span></div><div id=\"video_information_right\"><span id=\"video_views\">{$video_views}</span><span id=\"yet_another_id\">{$field1}</span></div><span id=\"description\">{$video_description}</span></div></li>"; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:06:29.813

收到您的 SOS 信息。以下是您需要进行的更改：

```
$video_title = $json_data->{'entry'}->{'title'}->{'$t'};
$video_date = $json_data->{'entry'}->{'published'}->{'$t'};
$video_duration = $json_data->{'entry'}->{'media$group'}->{'yt$duration'}->{'seconds'};
$video_views = $json_data->{'entry'}->{'yt$statistics'}->{'viewCount'};
$video_description = $json_data->{'entry'}->{'media$group'}->{'media$description'}->{'$t'}; 
```

请注意，后面`$t`是文字，而不是名为 的变量。`$``t``$t`

视频 id gzDS-Kfd5XQ 的示例输出：

> string(66) “芝麻街：雷·查尔斯与伯特和厄尼一起唱“我有一首歌”
> 
> 字符串（24）“2008-08-06T18：56：56.000Z”
> 
> 字符串（3）“129”
> 
> 字符串（6）“828277”
> 
> string(342) "欲了解更多视频和游戏，请访问我们的新网站 [http://www.sesamestreet.org](http://www.sesamestreet.org)
> 
> 在这段视频中，Bert 和 Ernie 与 Ray Charles 一起表演。
> 
> Sesame Street 是 Sesame Workshop 的作品，这是一个非营利性教育组织，它还为世界各地的儿童制作 Pinky Dinky Doo、The Electric Company 和其他项目。”

PS：如果您对关联数组感到满意，请将 true 作为第二个参数传递给`json_decode`：

```
mixed json_decode(string $json [, bool $assoc = false [, int $depth = 512 [, int $options = 0]]]) 
```

PPS：数据更容易`var_dump`，找到你需要的所有位，然后编写代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:43:50.400

您收到的错误意味着您正在尝试打印出一个对象。您可以使用 var_dump($json_data) 更好地了解您正在使用的对象。然后您可以找出可以打印哪些字符串。

为了获得更好的帮助，请包含显示您的问题的最短代码示例。从 youtube 检索数据的行最终给出 400 错误。此外，您给出的错误表明您正在尝试打印一个值。您提供的示例代码均未尝试打印值。打印 $video_title 可能有效，而打印另一个值无效。

# encode - 如何以编程方式对 AVI 文件进行“屏幕录制”

> ID：13224698
> 
> 赞同：2
> 
> 时间：2012-11-05T01:04:08.367
> 
> 标签：encode, avi, wmv, screen-recording

我有一个 AVI 文件，其日期时间横幅在视频播放时按秒递增。时间横幅由专有编解码器放在 AVI 上；[它不在文件元数据中，在通过二进制编辑器](https://stackoverflow.com/questions/1724586/can-i-hex-edit-a-file-in-visual-studio)查看时看起来像开始时间的 avi 文件中也没有任何明显的东西。

理想情况下，我想将文件拼接在一起，进行一些叠加，将它们编码为 wmv 格式并通过 Windows Media Services 流式传输。但是，当我将（使用表达式编码器）编码为 wmv 时，我丢失了日期时间横幅。

是否有可用的 API 或工具，我可以在编码之前（或期间）以编程方式“屏幕记录”视频日期时间？

# actionscript-3 - 如何在 Flash 游戏中添加坡道？

> ID：13224704
> 
> 赞同：-2
> 
> 时间：2012-11-05T01:05:21.440
> 
> 标签：actionscript-3, flash

我是一个大新手，这并不是一个真正的编程问题，但我说，我想制作一款涉及[像这样卷起坡道的游戏：](http://diyskate.com/img/ramps/mini_03/18.gif)

向上移动，类似于它在旧的 Sonic the Hedgehog 游戏中的工作方式或其他东西，我将如何去做，我在哪里可以找到一个好的资源来学习这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:23:08.720

当你上坡时，你会获得势能。实际上，你的动能变成了势能。

```
K = 0.5 * m * v^2

P = 0.5 * m * g * h 
```

在哪里：

*   `K`是动能
*   `P`是势能
*   `m`是质量
*   `v`是速度
*   `g`是重力
*   `h`是高度

因为你在做动画，最简单的就是用当前帧的瞬时速度来估计下一帧的位置。你避免了积分方程。

你所需要的只是高度的变化。假设您从 移动`h0`到`h1`... 这为您提供了新的动能`K1`，这意味着您的速度会降低：

```
K1 = 0.5 * m * v^2 - (h1-h0) * m * g 
```

并获得新的速度`v1`：

```
0.5 * m * v1^2 = K1

               = 0.5 * m * v^2 - (h1-h0) * m * g

0.5 * m * (v1^2 - v^2) = -(h1-h0) * m * g

v1 = sqrt( v^2 - (h1 - h0) * g ) 
```

然后你找出你的新位置，把它夹在坡道上，然后在那个位置找到坡道法线。您使用它来调整您的方向单位向量并将该向量乘以新速度以获得新`x`的`y`和`z`速度分量。

# rest - Neo4j REST Cypher 和参数：什么可以是通过 REST 进行的 Cypher 查询中的参数

> ID：13224711
> 
> 赞同：0
> 
> 时间：2012-11-05T01:06:16.760
> 
> 标签：rest, neo4j, cypher

我正在尝试使用参数使这个查询工作但没有运气。我总是遇到同样的错误。

```
expected either node or relationship here
"start n={start} match n-[r:{rel}]-() return n, n.name, r, r.since"
         ^ 
```

然后，我删除了`{start}`参数，并在关系中使用了一个 backtip (`)，它就像一个魅力。

```
start n=node(*) match n-[r:`{rel}`]-() return n, n.name, r, r.since 
```

那么，使用参数的正确方法是什么，我可以在查询中的哪里使用它们？

以防万一，backtip`{start}`也不起作用。下一个请求也不起作用。

```
POST /db/data/cypher {"query": "start n=node({start}) match n-[r:`{rel}`]-() return n, n.name, r, r.since", "params": {"start": "*", "rel": "l353456"}} 
```

我正在使用 1.9M01

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:24:37.873

反引号`start`（因为 start 是关键字）看起来像这样

```
POST /db/data/cypher {"query" : "start n=node({`start`}) return n", "params": {"start":0}} 
```

在 Neo4j Http 控制台上测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:16:40.420

Javier，[http://docs.neo4j.org/chunked/snapshot/cypher-parameters.html](http://docs.neo4j.org/chunked/snapshot/cypher-parameters.html)列出了模式，所以在你的情况下，我认为

```
start n=({start}) match n-[r:XXX]-() return n, n.name, r, r.since 
```

是你能做的。关系类型被视为更改查询的结构，因此不可参数化。您将不得不重新提交查询或在您的客户端代码中连接查询。

# c# - WinRT Gridview 具有可调整的磁贴大小

> ID：13224716
> 
> 赞同：3
> 
> 时间：2012-11-05T01:07:23.220
> 
> 标签：c#, windows-runtime, winrt-xaml

我的 WinRT 应用程序中有一个 GridView，我希望能够在其上添加/删除项目，还希望能够单击项目并使其动态调整大小以在单击时显示更多信息。我试图改变 GridView 中项目的高度和宽度，但它们似乎忽略了任何大小变化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T04:18:15.903

要完成此功能，最好的办法是尝试使用 VariableSizedWrapGrid。查看[此博客](http://blog.jerrynixon.com/2012/08/windows-8-beauty-tip-using.html)以获取有关此的更多信息。

但是，我不推荐此功能。如果您希望显示更多信息，请导航到新页面。如果您只想显示一点点信息，请显示一个弹出窗口。音乐应用程序有一个使用弹出窗口显示更多数据的好例子。

# applescript - 使用 Applescript/Automator 检查活动的 Internet 连接

> ID：13224718
> 
> 赞同：5
> 
> 时间：2012-11-05T01:07:39.067
> 
> 标签：applescript, action, automator

我有一个 Automator 工作流程来 ping 服务器，并下载我经常使用的计划的最新副本。然后将此时间表复制到我的保管箱中，以便我可以在手机上查看它。在工作流下载最新计划之前，它会从 Dropbox 中删除旧计划。

这很好用，除非我没有有效的互联网连接。当我没有有效的 Internet 连接时，工作流程仍会打开保管箱，删除旧的日程安排，并尝试下载最新的日程安排。因为没有连接，所以不会下载任何东西。然后，如果我的连接变为活动状态，则空的保管箱将同步，并且计划将从我的手机中删除。

我正在尝试添加几行 applescript 代码来 ping 服务器以查看我是否有活动连接。如果我不这样做，请等待大约 5 秒钟，然后再次 ping。我想要 5 次 ping 尝试，此时如果我仍然没有活动连接，那么我想完全退出。

我对applescript很陌生，所以我对如何处理来自命令的错误感到困惑，在这种情况下，是ping。如果命令“ping -o www.apple.com”失败，请等待 5 秒并重试 ping。如果 5 次尝试失败，则完全退出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T02:00:33.380

也许是这样的？

```
repeat with i from 1 to 5
    try
        do shell script "ping -o www.apple.com"
        exit repeat
    on error
        delay 5
        beep
        if i = 5 then error number -128
    end try
end repeat
say "Connected" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-10T17:40:22.590

如果域不可用，上述脚本会导致 automator 的 applescript 挂起。如果您添加 -t X ，它在 AppleScript 编辑器中工作正常，其中 X 是秒数 ping 应该超时，否则它也会无限期挂起。

```
repeat with i from 1 to 2
    try
        do shell script "ping -o -t 2 www.googleasda.com"
        exit repeat
    on error
        say "Couldn't connect"
        delay 2
        say "Error after delay 5"
        beep
        if i = 2 then error number -128
    end try
end repeat
say "Connected" 
```

# iphone - 如何在 iOS 上调用 Rootviewcontroller

> ID：13224719
> 
> 赞同：1
> 
> 时间：2012-11-05T01:07:40.983
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

在我的 iOS 应用程序启动中，我检查用户是注册用户还是新用户（如 facebook 和 skype），而不是如果用户未注册，我正在导航应用程序以使用我的应用程序委托注册屏幕：

```
 if (user != register){

        RegisterViewController *registerViewController = [[RegisterViewController alloc] init];
                RearViewController *rearViewController = [[RearViewController alloc] init];

        UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:registerViewController];

        self.viewController = revealController;

        self.window.rootViewController = self.viewController;

        self.window makeKeyAndVisible];
    }else {

FrontViewController *frontViewController = [[FrontViewController alloc] init];
            RearViewController *rearViewController = [[RearViewController alloc] init];

UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:frontViewController];

RevealController *revealController = [[RevealController alloc] initWithFrontViewController:navigationController rearViewController:rearViewController];

self.viewController = revealController;

self.window.rootViewController = self.viewController;

[self.window makeKeyAndVisible];

} 
```

这样，如果用户未注册，我现在将注册屏幕作为主窗口，

我的问题是：用户完成注册后，我的屏幕顶部有两个导航控制器

我正在使用：

```
[[self navigationController] pushViewController:revealController animated:YES]; 
```

由于用户现在已注册，因此将应用程序导航到我的主 viewController，

如何解决这个问题，还有其他方法可以解决注册用户问题吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:19:52.947

由于您需要另一个根视图控制器，为什么不设置它而不是推送到另一个 navController 堆栈：

```
[[UIApplication sharedApplication] keyWindow].rootViewController = revealController; 
```

# java - 从外部方法为字段（“全局变量”）赋值

> ID：13224724
> 
> 赞同：0
> 
> 时间：2012-11-05T01:10:02.843
> 
> 标签：java, android

我想向`ArrayLists`下面代码中声明的三个元素添加元素，但我似乎遇到了一些与变量范围相关的问题。**免责声明：**我对 Java 很陌生，可能只是我在做一些非常愚蠢的事情。另请注意，我正在使用[Parse Android API](https://www.parse.com/docs/android/api/)。（我在代码中添加了一些注释以更好地突出我正在尝试解决的问题）。谢谢！

```
public class MatchesActivity extends Activity implements OnItemClickListener {

ArrayList<String> titles = new ArrayList<String>();
ArrayList<String> descriptions = new ArrayList<String>();
ArrayList<Bitmap> images = new ArrayList<Bitmap>();
String school;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.matches_layout);

    ParseQuery query = new ParseQuery("Profile");
    query.whereEqualTo("userName", ParseUser.getCurrentUser().getUsername().toString());
    query.getFirstInBackground(new GetCallback() {
        public void done(ParseObject obj, ParseException e) {
            if (e == null) {
                school = obj.getString("school");
                ParseQuery query2 = new ParseQuery("Profile");
                query2.whereEqualTo("school", school);
                query2.findInBackground(new FindCallback() {
                    public void done(List<ParseObject> scoreList, ParseException e) {
                        if (e == null) {
                            // scoreList.size() == 3 here
                            for (int i = 0; i < scoreList.size(); i++){
                                titles.add(scoreList.get(i).getString("fullName"));
                                descriptions.add(scoreList.get(i).getString("sentence"));

                                ParseFile profileImg = (ParseFile) scoreList.get(i).get("pic");
                                try { 
                                    profileImg.getDataInBackground(new GetDataCallback() {
                                        public void done(byte[] data, ParseException e) {
                                            if (e == null) {
                                                Bitmap bMap = BitmapFactory.decodeByteArray(data, 0,data.length);
                                                images.add(bMap);
                                            } else {
                                                Toast.makeText(getApplicationContext(),"Error: " + e.getMessage(),Toast.LENGTH_SHORT).show();
                                            }
                                            // AT THIS POINT THE ARRAYLIST "IMAGES" IS BEING ASSIGNED VALUES
                                        }

                                    });
                                } catch (NullPointerException npe) {
                                    images.add(BitmapFactory.decodeResource(getResources(), R.drawable.ic_prof));
                                }           
                            }           
                            // HERE, THE SIZE OF TITLES AND DESCRIPTION IS 3, HOWEVER, IMAGES HAS NO ELEMENTS (WHEN I EXPECTED IT TO HAVE 3)
                        } else {
                            Toast.makeText(getApplicationContext(),"Error: " + e.getMessage(), Toast.LENGTH_SHORT).show();
                        }
                    }
                });
            } else {
                Toast.makeText(getApplicationContext(),"Error: " + e.getMessage(), Toast.LENGTH_SHORT).show();
            }
        }
    });
    // ALL LISTS ARE EMPTY AT THIS POINT (BUT I WOULD LIKE TO USE THEM HERE)
} 
```

**问题已解决：** 由于它是由*Yogendra Singh*和*twaddington 提出*的，该`getDataInBackground`方法作为辅助线程运行，在我到达代码中需要在那里检索信息的特定位置之前没有机会完成。由于我的最终任务是使用从我的 Parse 数据库中检索到的信息动态填充 listView，因此我只是决定按照[此处](https://stackoverflow.com/questions/10084184/how-can-i-inflate-a-listview-dynamically-in-android?lq=1)的提示并在`getDataInBackground`. 那行得通！感谢大家的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:34:30.660

您已将列表声明为`Class member attributes`. 这些属性可以在类的任何非静态方法中直接访问。你在方法中使用它们做得很好`onCreate`。

一个观察员说明：您可能希望将变量定义为`private`.

可能还有一些其他问题与变量的范围相关联。如果您认为存在问题，请分享正在观察的具体问题。

**编辑**：正如怀疑的那样，这个问题是由于列表在后台填充的事实。**当它到达最后一行（打印大小）时，很可能还没有填充列表。**

**请注意：** `A GetCallback is used to run code after a ParseQuery is used to fetch a ParseObject in a background thread.`这意味着 GetCallBack 正在后台运行（异步模式）。

# ios - 如何观察 NSMetadataItem 的 iCloud 更新？

> ID：13224727
> 
> 赞同：4
> 
> 时间：2012-11-05T01:10:29.237
> 
> 标签：ios, icloud

Apple的[代码示例](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/DocumentBasedAppPGiOS/ManageDocumentLifeCycle/ManageDocumentLifeCycle.html)建议观察[NSMetadataQueryDidUpdateNotification](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMetadataQuery_Class/Reference/Reference.html)以检测 iCloud 中的更改，但这会在每个 iCloud 事务中触发多次。每次 NSMetadataQueryDidUpdateNotification 触发时，他们的应用都会处理“fileListReceived”消息中的文件。

对于具有许多文档的应用程序，这不是一个理想的解决方案。

[voromax](https://stackoverflow.com/users/310903/voromax)[在这里](https://stackoverflow.com/a/11592461/1798896)建议更好的解决方案是观察 NSMetadataItem 的属性值。

谁能解释/展示/详细说明这将如何工作，或提供替代解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:08:51.490

NSMetadataQuery is good for watching the iCloud file container for files that appear or disappear (i.e. add or remove). While you're correct in that the notification can fire often, whether it's sub-optimal or not in your app depends on what you do with the data returned. The example reloads the entire list each time but if you need to handle a lot of documents that are potentially updated often, you could come up with a more sophisticated approach that only operates on the changes.

For watching changes (to the contents) of documents in the container (for instance if they are open and you want to update the UI with changes), you need to combine the metadata query with observing UIDocumentStateChangedNotification for each document you care about in this context. It will tell you when the document has been updated and you can react - update the UI, etc...

I believe the question you linked is talking about using KVO to track the properties of individually returned NSMetadataItems, specifically the download status, to determine exactly when a document has finished downloading (or uploading) from iCloud. This would be useful for displaying a progress bar, for example. This is not a good substitute for UIDocumentStateChangedNotification but it could be a good compliment. To really have a robust UIDocument/iCloud implementation, many apps combine all of these methods to give the user the best experience.

Hope that helps.

# c# - C# + HTML UL，按字母顺序“向下”排序列表

> ID：13224730
> 
> 赞同：0
> 
> 时间：2012-11-05T01:11:14.107
> 
> 标签：c#, html, razor

我有一个已经按字母顺序排序的字符串列表。但是我想在网页上“向下”显示字母列表。

即：列表为“1”、“2”、“3”、“4”、“5”、“6”、“7”，列数为4

目前我的 HTML 页面显示如下：

```
1     2     3     4
5     6     7 
```

我希望它改为这样显示

```
1     3     5     7
2     4     6 
```

我正在使用 Razor 遍历列表并构建一个无序列表。

有没有人有提示或算法以这种方式排序？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:34:58.787

通常，您执行以下操作：

```
int nrows = list.Count / nCols;

for (int i = 0; i < nrows; ++i)
{
    for (int j = 0; j < nCols; ++j)
    {
        // display item[(i * nCols) + j] in column j
    }
} 
```

我不知道库中是否有自动的东西可以为你做到这一点。

# php - 在 PHP 链接中传递变量

> ID：13224732
> 
> 赞同：-4
> 
> 时间：2012-11-05T01:11:29.910
> 
> 标签：php

> **可能重复：**
> [php - 在回显字符串中插入变量](https://stackoverflow.com/questions/8054989/php-insert-a-variable-in-an-echo-string)

我有一个链接，当点击它时会调用下一页，并且应该将两个变量传递给页面，第一个是 Manu，第二个是fuel_type。

问题是我似乎无法获得识别变量的代码，而是通过美元符号和变量名而不是值。

代码在下面，我尝试过几种不同的方法，但我的想法已经不多了。

```
 .'<a href=\act/manufacturer.php?manufacturer=$manu&fuel_type=$fuel_type>'.$manu.'</a>'. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:24:52.850

首先，确保变量包含您想要的（来自超全局 GET 变量）：

```
$manu = $_GET['manu'];
$fuel_type = $_GET['fuel_type']; 
```

然后，您有两个选择：

1.  使用双引号`"`代替单引号，引号内的变量会被展开

    ```
    "My dog is named $dog_name, and is $dog_age years old"; 
    ```

2.  将单引号内的字符串与变量连接起来：

    ```
    'My dog is named ' . $dog_name . ', and is ' . $dog_age . ' years old.'; 
    ```

绝对确定，但是在使用变量或将它们显示到浏览器之前对变量进行清理。至少，您希望删除任何 HTML/JS 代码，然后进行一些检查以确保结果是您期望的类型和长度。有很多关于 SO 讨论如何做到这一点的问题，快速搜索*[php] sanitize GET variables*会发现它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:13:11.763

[单引号不解析变量](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.single)，而双引号可以。更改您的引号，您的链接应该可以正常工作。

例子：

```
."<a href=\act/manufacturer.php?manufacturer=$manu&fuel_type=$fuel_type>".$manu.'</a>'. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T01:13:53.670

您必须在 ' 之外插入 var

像这样：

```
.'<a href=\act/manufacturer.php?manufacturer='.$manu.'&fuel_type='.$fuel_type.'>'.$manu.'</a>'. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T01:15:10.140

单引号不允许解析变量，双引号可以。所以你最好做类似的事情：

```
"<a href=\act/manufacturer.php?manufacturer=$manu&fuel_type=$fuel_type>$manu</a>"; 
```

- 或者在你的情况下 -

```
'<a href=\act/manufacturer.php?manufacturer='.$manu.'&fuel_type='.$fuel_type.'>'.$manu.'</a>' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-05T01:16:34.267

您可以将变量包裹在花括号周围以转义变量表达式：

```
'<a href=\act/manufacturer.php?manufacturer={$manu}&fuel_type={$fuel_type}>'.$manu.'</a>'. 
```

# map - mapcat 使用 map 和 concat

> ID：13224733
> 
> 赞同：7
> 
> 时间：2012-11-05T01:11:30.860
> 
> 标签：map, clojure, concat, reduce

为了更好地理解*mapcat*，我举了一个例子：

```
user>  (mapcat #(list % %) [1 2 3])
(1 1 2 2 3 3) 
```

并试图重现文档描述的内容，故意使用*map*和*concat*：

```
user> (doc mapcat)
clojure.core/mapcat
([f & colls])
  Returns the result of applying concat to the result of applying map
  to f and colls.  Thus function f should return a collection. 
```

通过做这个：

```
user>  (concat (map #(list % %) [1 2 3]))
((1 1) (2 2) (3 3)) 
```

但是，如您所见，它不起作用。但是，我可以像这样使用 reduce，但不知道它是否正确：

```
user>  (reduce #(concat %1 %2) (map #(vec (list % %)) [1 2 3]))
(1 1 2 2 3 3) 
```

以上方法有效，但我不知道这是否是使用*map*和*concat重新**创建 mapcat*的正确方法。

基本上我想了解*mapcat*的工作原理。

发生了什么，如何访问*mapcat*的源代码？（我正在使用 Emacs + nrepl）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T01:22:57.377

```
user=> (source mapcat)
(defn mapcat
  "Returns the result of applying concat to the result of applying map
  to f and colls.  Thus function f should return a collection."
  {:added "1.0"}
  [f & colls]
    (apply concat (apply map f colls)))
nil
user=> 
```

原因[`reduce`](http://clojuredocs.org/clojure_core/clojure.core/reduce)也有效，因为它有效：

```
(concat (concat '(1 1) '(2 2)) '(3 3)) 
```

[`apply`](http://clojuredocs.org/clojure_core/clojure.core/apply)，如源代码中所用，扩展为：

```
(concat '(1 1) '(2 2) '(3 3)) 
```

在您最初的尝试中[`concat`](http://clojuredocs.org/clojure_core/clojure.core/concat)：

```
 user=> (map #(list % %) [1 2 3])
  ((1 1) (2 2) (3 3))
  user=> (concat (list '(1 1) '(2 2) '(3 3)))
  ((1 1) (2 2) (3 3))
  user=> (concat [1])
  (1) 
```

您可以看到，如果您`concat`使用单个参数调用，它会返回该参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T04:21:20.383

`concat`是一个可变参数函数，即它可以采用 n 个参数，其中每个参数是一个值序列，即签名变为`(defn concat [& lst]])`. 而在您的示例中，您使用单个参数调用 concat ，假设 concat 需要连接一个 seq 的值，这就是您得到结果的原因，即返回相同的列表列表。

`(apply concat(apply map #(list % %) [1 2]))`不会工作。

`(apply map #(list % %) [[1 2]])`或`(apply map #(list % %) [1 2] [])`将工作。

这是因为 apply 期望最后一个参数是一个值序列，并且该值序列中的每个项目都将作为参数传递给应用函数。在您应用失败的情况下，调用将扩展`(map #(list % %) 1 2)`为错误的，并且错误消息还显示它无法将 long 转换为序列，因为映射需要序列作为参数。

# apache-pig - PIG：分组时接收错误

> ID：13224736
> 
> 赞同：3
> 
> 时间：2012-11-05T01:11:56.680
> 
> 标签：apache-pig

我有一个叫 Ftel 的包。`describe Ftel;`结果如下 -

```
Ftel: {billVal:int, billCount:int} 
```

Ftel 的转储示例是 -

```
(20,1)
(5,1)
(5,1)
(10,1)
...
etc. 
```

我使用命令对上面的包进行了分组`Gtel = group Ftel by billVal;`

现在，`Dump Gtel;`抛出以下错误 -

## 猪堆栈跟踪

```
ERROR 1066: Unable to open iterator for alias Gtel

org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias Gtel
at org.apache.pig.PigServer.openIterator(PigServer.java:765)
at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:615)
at    
org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:303)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:168)
at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:144)
at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:76)
at org.apache.pig.Main.run(Main.java:455)
at org.apache.pig.Main.main(Main.java:107)
Caused by: java.io.IOException: Job terminated with anomalous status FAILED
at org.apache.pig.PigServer.openIterator(PigServer.java:755) 
```

我不知道是什么导致了这个问题。请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T01:25:14.607

作为对未来搜索者的提示，我在使用在集群上运行良好的脚本时遇到了同样的问题。

问题是映射器输出仍在被压缩。在我的脚本中注释掉这些选项修复了它：

```
SET mapred.compress.map.output 'true';
SET mapred.map.output.compression.codec 'org.apache.hadoop.io.compress.GzipCodec'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T12:25:37.993

现在可以了...我刚刚将 Ftel 从

Ftel：{billVal：int，billCount：int}

至

Ftel: {billVal:chararray, billCount:int}

似乎分组仅在组键是 chararray 时才有效。有谁知道为什么？

# php - 想让html表格中的数据正确显示

> ID：13224737
> 
> 赞同：1
> 
> 时间：2012-11-05T01:12:13.527
> 
> 标签：php, html, sql, mysqli

我对如何在我的 php 代码中显示正确的表格布局有疑问：

我想在表格中显示答案及其文本输入。现在它显示如下：

```
QuestionNo   Question             Answer        Marks Per Answer     
1            What is 2+2          B             (text input)         
2            Name the 3 hobbits?  BCE           (text input) 
```

我想更改表格的显示，使其如下所示：

```
 QuestionNo  Question             Answer        Marks Per Answer 
 1           What is 2+2?          B             (text input)
 2           Name the 3 Hobbits?   B             (text input)                   
                                   C             (text input)
                                   E             (text input) 
```

1.  正如您从新显示器中看到的那样。我希望每个问题的每个答案都显示在他们自己的行中，而不是在一行中显示每个问题的所有答案，这就是它目前正在做的事情。
2.  我希望文本输入也显示在自己的行中，例如答案：

我的问题是，如何实现第 1 点和第 2 点才能匹配新布局？

以下是当前显示的代码：

```
 <?php  
    $assessment = $_SESSION['id'] . $sessionConcat;
    include('connect.php');

    $query = "SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionContent, 
      GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer, 
    q.QuestionMarks 
    FROM Session s 
    INNER JOIN Question q ON s.SessionId = q.SessionId
    JOIN Answer an ON q.QuestionId = an.QuestionId AND an.SessionId = q.SessionId
    WHERE s.SessionName = ?
    GROUP BY an.SessionId, an.QuestionId
    ORDER BY q.QuestionId, an.Answer
    ";

    // prepare query
    $stmt=$mysqli->prepare($query);
    // You only need to call bind_param once
    $stmt->bind_param("s", $assessment);
    // execute query
    $stmt->execute(); 

    // This will hold the search results
    $searchQuestionId = array();
    $searchQuestionContent = array();
    $searchAnswer = array();

    // Fetch the results into an array
    // get result and assign variables (prefix with db)
    $stmt->bind_result($dbQuestionId, $dbQuestionContent, $dbAnswer);
    while ($stmt->fetch()) {
    $searchQuestionId[] = $dbQuestionId;
    $searchQuestionContent[] = $dbQuestionContent;
    $searchAnswer[] = $dbAnswer;
    }   
    ?>      
    </head>
    <body>
    <form id="QandA" action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
    <?php 
echo "<table border='1' id='markstbl'>
      <tr>
      <th class='questionth'>Question No.</th>
      <th class='questionth'>Question</th>
      <th class='answerth'>Answer</th>
      <th class='answermarksth'>Marks per Answer</th>
      <th class='noofmarksth'>Total Marks</th>
      </tr>\n";
      $previous_question_id = null;
      foreach ($searchQuestionContent as $key=>$question) {
        if ($previous_question_id == $searchQuestionId[$key]) {
      $searchQuestionId[$key] = '';
      $question = '';
  }else{
      $previous_question_id = $searchQuestionId[$key];
  }
        echo '<tr class="questiontd">'.PHP_EOL;
        echo '<td class="optiontypetd">'.htmlspecialchars($searchQuestionId[$key]).'</td>' . PHP_EOL;
        echo '<td>'.htmlspecialchars($question).'</td>' . PHP_EOL;
        echo '<td class="answertd">';
        echo $searchAnswer[$key];
        echo '</td>' ;
        echo '<td class="answermarkstd"><input class="individualMarks" name="answerMarks[]" id="individualtext" type="text" "/></td>' . PHP_EOL;
        echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>' . PHP_EOL;
}
        echo "</table>" . PHP_EOL;

    ?>
    </form>
    </body> 
```

下面是会话、问答表的样子：

会话表：

```
SessionId (auto)  SessionName
1                 AAA
2                 AAB 
```

问题表：

```
SessionId  QuestionId (auto)  QuestionContent
1          1                  What is 2+2?
1          2                  Name the 3 hobbits? 
```

答案表：

```
AnswerId (auto) SessionId  QuestionId   Answer
1               1          1           B   
2               1          2           B
3               1          2           C
4               1          2           E 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:23:25.593

更改并`GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR '') AS Answer`尝试`Answer`在`foreach`循环中进行此更改。

```
$previous_question_id = null;
foreach ($searchQuestionContent as $key=>$question) {
  if ($previous_question_id == $searchQuestionId[$key]) {
    $searchQuestionId[$key] = '';
    $question = '';
  } else {
    $previous_question_id = $searchQuestionId[$key];
  } 
```

# asp.net - Asp RequiredFieldValidator Text 属性停止显示，但 ErrorMessage 仍显示在验证摘要中

> ID：13224742
> 
> 赞同：0
> 
> 时间：2012-11-05T01:13:16.930
> 
> 标签：asp.net, webforms, webpage, lifecycle, requiredfieldvalidator

我遇到了RequiredFieldValidator 文本属性的问题。我的 asp web 表单有一个面板。在覆盖的 OnPreInit 中，我创建了一个带有文本框和 RequiredFieldValidator 的表，并将其存储到会话变量中，在每次回发时，我将表保存到此会话中并加载它。当我运行代码时，验证器很好。通过每次回发，只要未填写文本框并且验证摘要显示错误消息，表格中就会显示 Text 属性。当我填写文本框时，验证器显示有效，这是正确的；Text 属性不再显示，validatorssummary 不再显示错误。然后，当我删除文本框中的内容并导致回发（单击按钮）时，会发生奇怪的事情。错误消息显示在错误消息中，当我调试 RequiredFieldValidator 时。IsValid 为假。但是文本属性永远不会显示备份！？我认为我可能会丢失视图状态的某些内容，可能是RequiredFieldValidator 上的预渲染，或者我保存/恢复会话状态的方式。

我已经尝试了我能想到的一切。感谢您的任何帮助！！！！

**aspx.cs**

```
namespace AccessManagementRepeatingTableAsp
    {
        using System;
        using System.Collections;
        using System.Collections.Generic;
        using System.Data;
        using System.Data.SqlClient;
        using System.Diagnostics;
        using System.Drawing;
        using System.Globalization;
        using System.Linq;
        using System.Security;
        using System.Transactions;
        using System.Web;
        using System.Web.UI;
        using System.Web.UI.WebControls;

        public partial class webform : System.Web.UI.Page
        {
            private Table testTable = new Table();

            protected override void OnPreInit(EventArgs e)
            {            
                if (!this.IsPostBack)
                {
                    TextBox targetTextBox = new TextBox();
                    string targetTextBoxId = Guid.NewGuid().ToString();
                    targetTextBox.ID = targetTextBoxId;

                    RequiredFieldValidator targetRequiredValidator = new RequiredFieldValidator();               
                    targetRequiredValidator.ID = Guid.NewGuid().ToString();
                    targetRequiredValidator.ForeColor = Color.Red;
                    targetRequiredValidator.ErrorMessage = "programatic";
                    targetRequiredValidator.Text = "testvalidator";
                    targetRequiredValidator.ControlToValidate = targetTextBoxId;
                    targetRequiredValidator.Display = ValidatorDisplay.Dynamic;
                    targetRequiredValidator.Visible = true;

                    TableCell textCell = new TableCell();
                    textCell.Text = "textCell";
                    textCell.Controls.Add(targetTextBox);

                    TableCell validatorCell = new TableCell();
                    validatorCell.Text = "validatorCell";
                    validatorCell.Controls.Add(targetRequiredValidator);

                    TableRow row = new TableRow();
                    row.Cells.Add(textCell);
                    row.Cells.Add(validatorCell);
                    this.testTable.Rows.Add(row);
                    Session["test"] = this.testTable;
                }
                else
                {
                    this.testTable = (Table)Session["test"];
                    RequiredFieldValidator rfv = (RequiredFieldValidator)this.testTable.Rows[0].Cells[1].Controls[0];
                    rfv.Validate();
                    Session["test"] = this.testTable;
                }

                 this.testPanel.Controls.Add(this.testTable);

                RequiredFieldValidator rfv2 = (RequiredFieldValidator)this.testTable.Rows[0].Cells[1].Controls[0];
                rfv2.Validate();
                Page.Validate();

                base.OnPreInit(e);
            }

            protected void submitButton_Click(object sender, EventArgs e)
            {
                Page.Validate();
                if (Page.IsValid)
                {
                    this.statusLabel.ForeColor = Color.Blue;
                    this.statusLabel.Text = "Status: Valid";
                }
                else
                {
                    this.statusLabel.ForeColor = Color.Red;
                    this.statusLabel.Text = "Status: Invalid";
                }
            }
        }    
    } 
```

**aspx**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="AccessManagement.aspx.cs" Inherits="AccessManagementRepeatingTableAsp.webform" %>

<!DOCTYPE html>
<style type="text/css">
  div {padding: 0; margin: 0; } /* generated div */
  div.centeredDiv {padding: 0; margin: 0; margin-left:auto; margin-right:auto;} /* generated div */
  table.tblFormat {margin-left:auto; margin-right:auto;}
  td.tdFormat {text-align:left;}
  td.tdHidden {visibility:hidden}
  .centered { margin-left:auto; margin-right:auto;}
</style>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
<form id="Form" runat="server">
    <div>
        <asp:Button ID="submitButton" runat="server" Text="Submit" OnClick="submitButton_Click" />
        <br />
        <asp:ValidationSummary ID="ValidationSummary1" runat="server" />
        <br />
        <asp:Label ID="statusLabel" runat="server" Text="Label"></asp:Label>
        <br />
    </div>
    <asp:Panel ID="testPanel" runat="server">
    </asp:Panel>

    <br />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:33:58.630

我想我找到了问题所在。当 requiredfieldvalidator 设置为有效 (.isvalid = true) 时，它会添加一个属性键：'style' 值：display:none。然后当文本被删除并且验证器为假时，该属性仍然存在。我的解决方法是挂钩验证器的呈现并始终删除此属性。然后，如果验证器无效，我只会写出错误消息。这就是我的意思：

首先将验证器的呈现重定向到您自己的方法：

```
validator.SetRenderMethodDelegate(validator_SetRenderMethodDelegate); 
```

接下来在validator_SetRenderMethodDelegate 方法中总是移除'style' 属性。

```
private void validator_SetRenderMethodDelegate(HtmlTextWriter output, Control container)
{
    if (!this.IsPostBack)
    {
        RequiredFieldValidator localRFV = ((RequiredFieldValidator)container);
        RequiredFieldValidator tableRFV = (RequiredFieldValidator)this.testTable.Rows[0].Cells[1].Controls[0];

        string[] keys = new string[((RequiredFieldValidator)container).Attributes.Count];
        localRFV.Attributes.Keys.CopyTo(keys, 0);
        foreach (string key in keys)
        {
            string current = localRFV.Attributes[key];
            if (key == "style")
            {
                localRFV.Attributes.Remove(key);
                tableRFV.Attributes.Remove(key);
                Session["test"] = this.testTable;
            }
        }

        if (!localRFV.IsValid)
        {
            output.Write(localRFV.Text);
        }
    }
} 
```

我认为这并不完美，但这是朝着正确方向迈出的一步。

# regex - MongoDB/PyMongo：如何在正则表达式搜索中“转义”参数？

> ID：13224753
> 
> 赞同：9
> 
> 时间：2012-11-05T01:14:04.040
> 
> 标签：regex, mongodb, pymongo

我正在使用 pymongo 并希望搜索以特定字符序列开头的项目。我可能会这样实现：

```
items = collection.find({ 'key': '/^text/' }) 
```

这应该可以，但是如果`text`是一个变量呢？我可以做类似的事情：

```
items = collection.find({ 'key': '/^' + variable + '/' }) 
```

但是现在如果 in 中的文本`variable`包含任何具有特殊正则表达式含义的字符（例如`$`），则查询不再按预期运行。**有没有办法进行某种参数绑定？**我必须给自己消毒`variable`吗？这甚至可靠吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T01:19:50.873

您必须以编程方式组装正则表达式。所以要么：

```
import re
regex = re.compile('^' + re.escape(variable))
items = collection.find({ 'key': regex }) 
```

或者

```
items = collection.find({'key': { '$regex': '^' + re.escape(variable) }}) 
```

请注意，代码用于[`re.escape`](http://docs.python.org/2/library/re.html#re.escape)对包含特殊字符的字符串进行转义。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-05T01:20:06.423

这是概念：您必须使用[正则表达式](http://www.mongodb.org/display/DOCS/Advanced+Queries)

```
items = collection.find({
     'key' : {
         $regex : yourRegex
     }
}) 
```

# html - 100% 最小高度包装打破背景

> ID：13224755
> 
> 赞同：1
> 
> 时间：2012-11-05T01:14:59.920
> 
> 标签：html, css

我在为导航栏提供背景的包装器上有一个重复的背景。它应该一直延伸到页面下方。我曾希望通过将包装器的最小高度设置为 100% 来实现这一点。当我这样做时，背景消失了。有谁知道为什么？

这是网站：[https ://hodkiewicz-zieme-and-hirthe180.myshopify.com/](https://hodkiewicz-zieme-and-hirthe180.myshopify.com/)

这是相关的CSS：

```
.wrapper {
    width: 940px;
    min-height: 100%;
    margin: 0 auto;
    text-align: left;
    background-image: url({{'body-bg.png' | asset_url}});
    background-repeat: repeat-y;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:27:59.697

每当您浮动元素时，父元素通常会崩溃，您需要使用 clearfix hack 来修复它

[http://css-tricks.com/snippets/css/clear-fix/](http://css-tricks.com/snippets/css/clear-fix/)有一个很好的复制类到你的样式表，并在你的包装类旁边使用它`class="wrapper clearfix"`

这个浮动使包装器崩溃 `#navbar {float:left}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:37:32.140

在 div class="content" 下面添加以下 htm/css：

HTML：

```
<div class="content">...</div>
<div class="clear-fix"></div> 
```

CSS：

```
.clear-fix {
    clear: both;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T05:56:48.323

嗨，您`floating`在您`child elements`的`clear`父母中使用过，`wrapper div`所以这就是问题出现的原因，因此`clear`您的父母`wrapper div`有`overflow:hidden;`问题会解决。

**使用下面提到的 CSS 更新您的 CSS**

**CSS**

```
.wrapper {
    background-image: url("http://static.shopify.com/s/files/1/0098/1262/t/107/assets/body-bg.png?2789");
    background-repeat: repeat-y;
    margin: 0 auto;
    min-height: 100%;
    overflow: hidden;
    text-align: left;
    width: 940px;
} 
```

# c - 99瓶啤酒递归似乎不起作用

> ID：13224759
> 
> 赞同：3
> 
> 时间：2012-11-05T01:15:20.517
> 
> 标签：c, recursion

好的，这是我在学习过程中编写的简单代码。

```
void SingTheSong (int NumOfBottles)
{
    if (NumOfBottles == 0){
        printf("there are simply no more bottles of beer on the wall. \n");
    }

    else {
        printf("%d bottles of beer on the wall, %d bottles of beer.\n", NumOfBottles, NumOfBottles);
        int Bottleless = NumOfBottles - 1;
        printf("Take one down pass it around, %d bottles of beer on the wall. \n", Bottleless);

        SingTheSong(Bottleless);
        printf("Put a bottle in the recycling bin, there are now %d empty bottles in the bin.\n", NumOfBottles);
    }
}

int main(int argc, const char * argv[])
{
    SingTheSong(99);
    return 0;
} 
```

我唯一不明白的是为什么程序运行时 SingTheSong(Botteless) 函数从 1 开始，为什么在墙上有 0 瓶啤酒后它显示 printf() 语句。只是有点困惑，因为我认为花括号中的所有内容都在 else 语句中被执行，然后再运行 else 语句。为什么不是这样？

示例：“墙上有 99 瓶啤酒，99 瓶啤酒。拿下一个，传过来，墙上有 98 瓶啤酒。将一瓶放在回收箱中，现在垃圾桶里有 1 个空瓶” “墙上98瓶啤酒，98瓶啤酒。拿下来，传过来，墙上97瓶啤酒。把一瓶放在回收箱里，现在垃圾桶里有2个空瓶子”

我知道他是初学者的东西，我是初学者。有人可以向我解释一下，所以我不再绕圈子了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:29:37.933

想象一下，您知道`SingTheSong`打印什么方法`N`。`if`现在分别交易语句的两个分支。当`NumOfBottles`为零时，打印“没有瓶子”消息，然后返回。当`NumOfBottles`不为零时，我们做以下三件事：

*   打印瓶数`N`
*   打印任何`SingTheSong`打印的方法`N-1`
*   打印回收信息`N`

中间行是*递归*的：它可以扩展为相同的三行，如下所示：

*   打印瓶数`N`
*   打印瓶数`N-1`
*   打印任何`SingTheSong`打印的方法`N-2`
*   打印回收信息`N-1`
*   打印回收信息`N`

您可以一次又一次地这样做，直到中间线变成“啤酒用完”消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:49:40.920

这是一个函数递归，当你启动 SingTheSong(Bottleless) 从 99 到 1 时，它会调用 Bottleless 为 99,98,97……1 的函数。在 SingTheSong(1) 之后，然后继续 printf

" printf("把瓶子放到回收箱里，现在回收箱里有 %d 个空瓶子。\n", NumOfBottles);"

然后回到 SingTheSong(2)，随着它继续，终于回到 SingTheSong(99)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:26:02.230

您正在重复您的功能`SingTheSong`，*然后再*`printf`了解回收箱中的瓶子数量。

回收站逻辑也有一个缺陷——你需要将回收站中当前的瓶子数量递归地传递给你的函数——现在的方式，如果你按照上面描述的方式修复了行的顺序，它将总是比墙上的瓶子总数少一个，因为它们在垃圾箱中。

下面是一些伪代码来展示这种递归应该是什么样子：

```
function singTheSong(bottlesOnWall,bottlesInBin) {
    if (bottlesOnWall == 0) {
        print("There are no more bottles.\n");
    } else {
        printf("%d bottles of beer on the wall, %d bottles of beer.\n", bottlesOnWall, bottlesOnWall);
        bottlesOnWall--;
        bottlesInBin++;
        printf("Take one down pass it around, %d bottles of beer on the wall.\n", bottlesOnWall);
        printf("Put a bottle in the recycling bin, there are now %d empty bottles in the bin.\n", bottlesInBin);
        singTheSong(bottlesOnWall,bottlesInBin);
    }
}

singTheSong(99,0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T01:28:45.207

嗯，我不明白你在哪里面临问题，但这里有解释：

对于 NumOfBottles = 99：

```
printf("%d bottles of beer on the wall, %d bottles of beer.\n", NumOfBottles, NumOfBottles); // = 99 bottles of beer on the wall, 99 bottles of beer.
int Bottleless = NumOfBottles - 1; // 98
printf("Take one down pass it around, %d bottles of beer on the wall. \n", Bottleless); //98 bottles of beer on the wall. 
SingTheSong(98) 
```

对于 NumOfBottles = 98：

```
printf("%d bottles of beer on the wall, %d bottles of beer.\n", NumOfBottles, NumOfBottles); //= 98 bottles of beer on the wall, 98 bottles of beer
int Bottleless = NumOfBottles - 1; // 97
printf("Take one down pass it around, %d bottles of beer on the wall. \n", Bottleless); //97 bottles of beer on the wall
SingTheSong(97); 
```

...

最后当 NumOfBottles = 0 时： printf("墙上根本没有啤酒瓶了。\n"); //墙上再也没有啤酒瓶了。//现在返回！

现在，这将被打印 99 次：

```
printf("Put a bottle in the recycling bin, there are now %d empty bottles in the bin.\n", NumOfBottles);//starting from 1 upto 99\. 
```

这就是为什么它不是那样的原因，因为递归函数是在那之前调用的`printf("Put a bottle...")`。

解决方案：

```
void SingTheSong (int NumOfBottles)
{
    if (NumOfBottles == 0){
       printf("there are simply no more bottles of beer on the wall. \n");
    } 

     else {
         printf("%d bottles of beer on the wall, %d bottles of beer.\n", NumOfBottles, NumOfBottles);
         int Bottleless = NumOfBottles - 1;
         printf("Take one down pass it around, %d bottles of beer on the wall. \n", Bottleless);
         printf("Put a bottle in the recycling bin, there are now %d empty bottles in the bin.\n", 99-Bottleless);
         SingTheSong(Bottleless);
     }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T01:31:49.290

不是一个完整的答案。只是显示您可能想要补充其他答案的内容。

```
void SingTheSong (int bottlesOnWall, int bottlesInBin)
{
    if (bottlesOnWall == 0){
        printf("there are simply no more bottles of beer on the wall. \n");
    }

    else {
        printf("%d bottles of beer on the wall, %d bottles of beer.\n",bottlesOnWall, bottlesOnWall);
        printf("Take one down pass it around, %d bottles of beer on the wall. \n", --bottlesOnWall);
        printf("Put a bottle in the recycling bin, there are now %d empty bottles in the bin.\n", ++bottlesInBin);

        SingTheSong(bottlesOnWall, bottlesInBin);
    }
} 
```

您最初可以像这样调用函数：

```
SingTheSong(99, 0); 
```

此外，您可能想了解更多关于[递归](http://www.cprogramming.com/tutorial/lesson16.html)的信息。

# android - android-arduino 通信的建议协议

> ID：13224760
> 
> 赞同：8
> 
> 时间：2012-11-05T01:15:44.570
> 
> 标签：android, arduino, adk

使用 Android Open Accessory 标准，我有一个 android 供电设备与通过 USB 连接的 arduino mega ADK 微控制器来回通话。我想知道在数据链路层级别最好的通信协议是什么。

从 android 和 arduino 方面来看，它是基于文件的简单 IO，例如 write(buffer[], buffer_length), read(buffer[], buffer_length)。

做了一些研究，我发现了这个[链接](https://stackoverflow.com/questions/815758/simple-serial-point-to-point-communication-protocol)，标题为“简单的串行点对点通信协议”，建议使用 HDLC 协议。这会是一个很好的运行协议还是有更好的协议？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T11:16:37.267

这对您来说可能完全是矫枉过正，但我​​已经成功地使用[MQTT](http://mqtt.org/)[从 Arduino](http://knolleary.net/arduino-client-for-mqtt/)（通过以太网）与[ActiveMQ 代理](http://activemq.apache.org/mqtt.html)进行通信（这可能是您的情况下发生矫枉过正的地方）。

今天晚些时候我会尝试挖掘一些源代码。

**编辑**：我[在 Android/MQTT 上找到了这个资源](http://mqtt.org/wiki/doku.php/mqtt_on_the_android_platform)，这对你来说可能很方便。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T10:50:36.970

有很多方法可以让 Android 和 Arduino 相互交流。[查看此演示文稿](http://sudarmuthu.com/blog/building-robots-using-arduino-and-android-at-droidcon)以了解一些建议的方法。

如果你能给出你的具体要求，那么我可以建议你最好的协议。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T06:47:45.853

在 Aurduino 上使用 MQTT 的详细指南[http://www.redbooks.ibm.com/abstracts/redp4929.html](http://www.redbooks.ibm.com/abstracts/redp4929.html)

Aurdino 的 MQTT 客户端[http://knolleary.net/arduino-client-for-mqtt/](http://knolleary.net/arduino-client-for-mqtt/)

这里有大量关于 Android MQTT 的信息[http://mqtt.org/wiki/mqtt_on_the_android_platform](http://mqtt.org/wiki/mqtt_on_the_android_platform)

# jquery - JQuery 自动完成悬停突出显示宽度

> ID：13224762
> 
> 赞同：3
> 
> 时间：2012-11-05T01:16:06.413
> 
> 标签：jquery, jquery-autocomplete

我有一个 jquery 自动完成文本框设置。

它在用户输入地址时检索地址并正确返回数据。

自动完成下拉菜单是最宽地址结果的宽度，这是我想要的。

但是，当我通过将鼠标悬停在结果顶部来突出显示列表中的地址时，它只会突出显示文本，而不是一直突出到自动完成文本框的边缘。

无论如何要更改此设置，以便突出显示的背景将一直延伸到列表中每个项目的自动完成文本框的边缘？

```
.ui-menu 
{
    list-style: none;
    padding: 2px;
    margin: 0;
    display: no;
    float: left;
    background-color: white;
    border: 1px solid #DDD;
    font-family: 'PTSansRegular', 'Helvetica Neue', Helvetica, Arial;
    font-size: 17px;
}

.ui-autocomplete li.ui-menu-item 
{
    padding: 1px;  
    width:350px;
}

.ui-autocomplete a.ui-menu-item-alternate 
{
    background-color: White;  
}

.ui-autocomplete a.ui-state-hover 
{
    font-weight: normal !important;  
    background-color: #003768;
    color:White;
}

a.ui-state-hover 
{
    width: 100px;
} 
```

//JQuery代码

```
$(document).ready(function () {

    $('#Suburb').autocomplete({
        source: function (request, response) {
            $.ajax({
                url: '@Url.Action("GetAddress", "ClientDetails")',
                data: { suburb: request.term },
                dataType: 'json',
                type: 'POST',
                success: function (data) {
                    response($.map(data, function (item) {
                        return {
                            label: item.Locality + ', ' + item.State + ', ' + item.Pcode,
                            value: { locality: item.Locality, postCode: item.Pcode, state: item.State, country: 'Australia' }
                        }
                    }));
                }
            });
        },
        minLength: 4,
        select: function (event, ui) {
            console.log(ui.item.value);
            $('#Suburb').val(ui.item.value.locality);

            $("#StateID option").each(function () {
                if ($(this).text() == ui.item.value.state) {
                    $(this).attr('selected', 'selected');
                }
            });

            $('#Postcode').val(ui.item.value.postCode);

            $("#CountryID option").each(function () {
                if ($(this).text() == ui.item.value.country) {
                    $(this).attr('selected', 'selected');
                }
            });

            $('#Password').focus();
            return false;
        },
        open: function() {
            $( this ).removeClass( "ui-corner-all" ).addClass( "ui-corner-top" );
        },
        close: function() {
            $( this ).removeClass( "ui-corner-top" ).addClass( "ui-corner-all" );
        }            
    });

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T02:34:52.613

每个都`<li>`应该有`class="ui-menu-item"`

```
.ui-menu-item {
margin: 0;
padding: 0;
zoom: 1;
float: left;
clear: left;
width: 100%;
} 
```

现在你有了 -

```
.ui-autocomplete li.ui-menu-item 
{
    padding: 1px;  
    width:350px;
} 
```

我有这个`<a>`，它可以工作

```
.ui-menu-item a {
text-decoration: none;
display: block;
padding: .2em .4em;
line-height: 1.5;
zoom: 1;
} 
```

# bash - sudo'd mysqldump over ssh 语法？

> ID：13224763
> 
> 赞同：1
> 
> 时间：2012-11-05T01:16:17.077
> 
> 标签：bash, ssh, mysqldump, sudo

我想要一个命令：

*   ssh 以用户 foo 的身份进入我的服务器，使用我设置的公钥
*   使用 /etc/mysql/debian.cnf 默认文件执行某个数据库的 mysqldump
*   到标准输出，所以我可以在本地管道它
*   在远程服务器上执行 sudo 时，因为不允许用户 foo 读取 /etc/mysql/debian.cnf。foo 被允许 sudo bash 但不允许 sudo mysqldump。

这是我想出的最好的：

`echo 'mysqldump --defaults-file=/etc/mysql/debian.cnf dbname' | ssh -t -i keys/id_rsa -l foo example.com sudo bash -s`

这个丑陋的野兽可以工作，但会产生：`Pseudo-terminal will not be allocated because stdin is not a terminal.`，而且我真的不喜欢回声。肯定有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:20:43.180

`ssh -i keys/id_rsa foo@example.com sudo bash -c "'mysqldump --defaults-file=/etc/mysql/debian.cnf dbname'"`

这仅在 sudo 不需要询问密码时才有效。如果是这样，您需要`-t`选择 ssh。

注意双引号和单引号。外部引号将被您的本地 shell 删除，整个`'mysqldump --defaults-file=/etc/mysql/debian.cnf dbname'`字符串将作为单个参数传递给 ssh。SSH 会将其传递给远程 sudo，因此您的远程将看到单引号。远程 bash 需要单引号将 -c 之后的部分解释为单个参数。

# sql - 查询设计器报表生成器 3.0 中的条件语句

> ID：13224764
> 
> 赞同：1
> 
> 时间：2012-11-05T01:16:18.003
> 
> 标签：sql

我正在使用 Excel 作为我的数据源的报表生成器。我很难在查询设计器中创建查询文本。当我尝试简单组语句的条件语句时出现错误。

我有这样的声明：

```
 SELECT [Flight No],[Full Name],[Date],[Selected Routing 1] AS Routing,
 [Selected ETD 1] AS ETD,[Selected ETA 1] AS ETA
 FROM [Sheet1$] 
```

这将返回这些值：

```
 Flight No   Full Name     Date       Routing   ETD   ETA
 1           Peter Hansen  10/1/2012  BNE-MEL   1755  2020
 2           Black Hansen  10/2/2012  BNE-MEL   1756  2021+1 
```

现在，我想创建一个条件语句，即当 ETA 的编号为 +1 时，日期将加 1。因此表格应如下所示：

```
 Flight No   Full Name     Date       Routing   ETD   ETA
 1           Peter Hansen  10/1/2012  BNE-MEL   1755  2020
 2           Black Hansen  10/3/2012  BNE-MEL   1756  2021+1 
```

当我尝试在报表生成器中使用这样的 SQL 语句时，我似乎得到了一个错误：

```
 SELECT [Flight No],[Full Name],If([Selected ETA 1] LIKE '*+*',[Date]+1,[Date]) 
 AS DATE, [Selected Routing 1] AS Routing,[Selected ETD 1] AS ETD,
 [Selected ETA 1] AS ETA
 FROM [Sheet1$] 
```

错误说：

```
 An error occurred while executing the query.
 ERROR [42000撛] [Microsoft][ODBC Excel Driver] Undefined function 'if' in expression.
 (Microsoft SQL Server Report Builder)

 ERROR [42000撛] [Microsoft][ODBC Excel Driver] Undefined function 'if' in expression.     
 (ACEODBC.DLL) 
```

如果可能，请给我参考。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T09:16:46.020

正如您在错误中看到的那样，尚未实现 IF 函数以供在该上下文中使用。最好的办法是使用[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)代替：

```
SELECT [Flight No],[Full Name]
    , CASE WHEN [Selected ETA 1] LIKE '*+*' THEN [Date]+1 ELSE [Date] END AS [DATE]
    , [Selected Routing 1] AS Routing ,[Selected ETD 1] AS ETD,
[Selected ETA 1] AS ETA
FROM [Sheet1$] 
```

请注意，您应该避免使用保留关键字作为对象名称。我指的是您别名为 [DATE] 的列。 *日期*是自 SQL Server 2008 以来的数据类型。

既然我们已经进入了最佳实践方向，我也不会在对象名称中使用空格。它为您省去了每次编写查询时都需要输入方括号的麻烦。

最后，我将研究一种在真实数据库中导入 Excel 工作表的方法，而不是直接从报告中引用它。尽管它有效，但并不真正推荐它。任何有权访问该文件的用户都可能将其弄乱，从而导致您的报告中断。

# forms - symfony2 用表单上传文件

> ID：13224770
> 
> 赞同：0
> 
> 时间：2012-11-05T01:16:55.267
> 
> 标签：forms, file-upload, symfony

我设法创建了一个带有文件上传选择按钮的表单。事情是我不知道下一步如何保存和检索这个上传文件？

我的实体看起来像这样

```
 /**
 * @var File $file       
 * 
 */    
private $file;  

/**
 * Set file

 * @param Fichier $file 
 */
public function setFile($file)
{
    $this->file = $file;
}

/**
 * Get file
 * @return fichier
 */
public function getFile()
{
    return $this->file;
} 
```

我的表格包含

```
 $builder   

           ->add("file", "file")
    ;
} 
```

到目前为止一切顺利，但是当我点击创建时，不知道我的文件会发生什么

我的控制器包含：

```
public function createAction(Request $request)
{
    $entity  = new Candidat();
    $form = $this->createForm(new CandidatType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();

        #foreach($entity->getFile() as $file)
        #                      {
        #                        $file->upload();
        #                  }

        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('candidat_show', array('id' => $entity->getId())));
    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
} 
```

# optimization - 计算常数的性能

> ID：13224776
> 
> 赞同：1
> 
> 时间：2012-11-05T01:17:47.630
> 
> 标签：optimization, interpreted-language, compiled-language

以下两个伪代码块在编译语言和解释语言的速度方面如何比较？（忽略位数）

本质上，将变量写成几个常数的函数，而不是事先计算，会不会有任何性能损失？这通常会使代码更清晰。

```
permanentNum = (3.1416 / 3) + 1.5708
return permanentNumber / userInputNumber 
```

.

```
permanentNum = 2.6179
return permanentNumber / userInputNumber 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:20:32.617

首先努力使代码清晰。

然后测量性能。如果存在性能问题，请确定瓶颈。

任何瓶颈都不太可能出现在常量分配（编译或解释代码）中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T01:24:30.517

Mitch Wheat 的评论绝对正确；优化是在您拥有清晰正确的代码之后才要做的事情，并且只有在必要时才要做。

但是，要回答这个问题，这显然取决于语言。任何适用于类 C 语言的体面的编译器都有一个常量折叠优化通道。在 GCC、Oracle 的 javac 或任何广泛使用的编译器上，您的两个示例将生成相同的代码。

解释性语言可能足够慢，以至于一些额外算术运算的成本不是您的瓶颈，无论它是否在解析时进行常量折叠。:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T01:25:38.687

编译器通常会像这样优化常量，因此即使您编写`(3.1416 / 3) + 1.5708`最终将出现在目标代码中的值也是`2.6179`. 解释器*可能会*做同样的事情，但由于他们是在运行时做的，所以是的，性能会更低。

但是，差异可能可以忽略不计，因此，正如 Mitch Wheat 所说，您应该支持代码清晰。理论分析是一回事，但确定特定代码（在特定环境中）的实际瓶颈是什么的唯一方法是测试、分析和测量。

# objective-c - 填充 NSMutableArray 供以后在 obj-c 中使用

> ID：13224779
> 
> 赞同：2
> 
> 时间：2012-11-05T01:18:05.053
> 
> 标签：objective-c, ios, nsmutablearray

你如何用一组容量填充 NSMutableArray 以供以后使用？

基本上我想设置一个 NSMutableArray 作为我的游戏对象的地图，所以我有这条线......

```
gameObjects = [[NSMutableArray alloc] initWithCapacity:mapWidth*mapHeight]; 
```

我曾希望它会创建并填充我的 MutableArray，这样我就可以使用这种索引访问它......

```
int ii = (cellY*mapWidth)+cellX;

NSDictionary *currentObject = [gameObjects objectAtIndex:ii]; 
```

但我刚刚了解到 initWithCapacity 不会填充数组，所以我应该创建空白对象来填充它，还是有一个 Null 可以填充它？我也可以用 2 个 for 循环来做到这一点，还是有类似 "initWith:myObject" 的指令？

我希望能够检查数组中的某个索引以查看那里是否存在对象，因此我需要能够访问该索引点，并且我只能在那里有东西或者我得到一个越界错误。

我将把这个 NSMutableArray 用作对象网格，它是一个组织为二维数组的一维数组，所以我需要能够用 mapWidth*mapHeight 填充它，然后计算索引并执行检查数组中的那个索引。

我看过这里并用谷歌搜索，但找不到任何像我要问的东西。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:20:55.753

我认为您正在寻找的是`[NSNull null]`. 这正是您想要的 - 占位符值。

[您可以在此问题](https://stackoverflow.com/questions/836601/whats-the-difference-between-nsnull-null-and-nil)中找到有关该主题的更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T01:42:34.230

`initWithCapacity`只是一种性能优化——它对数组行为没有影响，它只是让代码“隐藏起来”，而不必在添加更多条目时重复扩大内部数组。

所以如果你想要一个“预分配”的数组，你需要用 NSNull 对象或类似的东西来填充它。然后，您可以使用`isKindOfClass`来判断对象是否是正确的类型，或者只是`==`将条目与`[NSNull null]`. （因为只有一个 NSNull 对象，所以它总是有相同的地址）。

（或者您可以使用 C 风格的指针数组，其中`nil`包含空槽的值。）

但是你最好使用 NSMutableDictionary 来代替——不需要预先填充，如果元素不存在，你会得到一个`nil`指针。对于键，使用与您的数组索引相对应的 NSNumber 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:21:39.077

`initWithCapacity`只是暗示`NSMutableArray`它应该支持这么多对象。在您添加它们之前，它实际上不会有任何对象。此外，数组中的每个条目都是指向对象的指针，而不是标准 c 数组中通常具有的结构。

你需要改变你对问题的看法。如果你不向数组中添加一个对象，它就不在那里。因此，正如您所说，您可以用“空”对象预先填充数组，这很奇怪。或者，您可以根据需要添加对象。

# php - 存储的数据库 url 不回显图像

> ID：13224782
> 
> 赞同：0
> 
> 时间：2012-11-05T01:18:56.267
> 
> 标签：php, mysql, jpeg

我有一个带有表的 MySQL 数据库，该表具有以下字段：

txtProductBowlImage：示例“ C:\BowlPhotos\Thumbs\MapleTi07-030tmb.jpg”

我想使用该字段中的数据来生成可以打印到文本文件的图像。

我读取数据然后尝试将其回显到屏幕上……我看到一个小图标，但没有图像。

这是代码：

```
 <?php
 $con = mysql_connect("localhost","xxxxxxx","zzzzzzzzzzzzzzz");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("scwdb", $con);

$result = mysql_query("SELECT * FROM tblsplintersbowlinventory WHERE txtVenue = 'Shoreline'");

while($row = mysql_fetch_array($result))
  {
  echo $row['intProductID'] . " " . $row['txtProductBowlCode'] . " " . $row['txtProductBowlImage'] . "]";
  echo "<br />";
  echo "<br />";
  echo 'txtProductBowlImage: ' . $row['txtProductBowlImage'];
  echo "<br />";
  $img = $row['txtProductBowlImage'];
  echo '...............$img: ' . $img;
  echo "<br />";
  echo "<img src=" . $img . ">";
  echo "<img src='C://BowlPhotos//Thumbs//Ash07-013_btmb.jpg'>";
  echo "<img src='Ash07-013_btmb.jpg'>";
  echo "<br />";
  echo "==================";
  echo "<br />";
  }

mysql_close($con);
?> 
```

请注意，我尝试 3 次显示图像： 1：使用 db 中的 url 并将其放入 echo 语句中，此 url 在数据中使用“\”分隔符。2：在 echo 语句中嵌入实际文本路径和文件名的示例，此 url 在 url 中使用“/”分隔符。3：在回显语句中仅嵌入文件名，不嵌入路径

当我运行它时，我得到以下输出：

![在此处输入图像描述](../Images/b80dfff6452f87c8b947e08efb64f67b.png)

Echo #1 & #2 生成图标，echo #3 显示与 php.ini 位于同一文件夹中的图像的本地副本。

由此看来，它是未使用的路径，无论是使用“\”还是“/”分隔符。

我认为 '\' 可能被视为一种转义，但为什么带有 '/' 的 url 不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:36:03.877

以下所有内容都是错误的，因为[“由于安全限制，在所有现代浏览器中都禁用了与本地资源的链接”](https://stackoverflow.com/a/5246334/677331)

> 要链接到**本地**​​图像，请使用格式
> 
> ```
> <img src='file:///C:/path/to/image/pic.jpg'> 
> ```
> 
> 您可以使用正斜杠替换反斜杠
> 
> ```
> $img = str_replace('\\', '/', $row['txtProductBowlImage']); 
> ```
> 
> 现在您可以`file:///`像这样在路径周围添加和单引号
> 
> ```
> echo "<img src='file:///" . $img . "'>"; 
> ```
> 
> 使用双引号，您可以跳过点运算符来附加字符串并使用
> 
> ```
> echo "<img src='file:///$img'>"; 
> ```
> 
> 美元`$img`将被视为变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T03:33:39.673

它使您尝试从本地计算机获取文件。所以你必须运行一个处理 php 的网络服务器

您可能正在尝试读取服务器无法访问的图像。

尝试将文件与您的 html 或 php 文件一起放置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T06:47:28.107

好的，在 JonOsterman 非常感谢的帮助下，最终的工作代码是：

```
 <?php
$con = mysql_connect("localhost","root","Madge1938");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("scwdb", $con);

$result = mysql_query("SELECT * FROM tblsplintersbowlinventory WHERE txtVenue = 'Shoreline'");

while($row = mysql_fetch_array($result))
{
echo $row;
echo "<span>" . $row['intProductID'] . " " . $row['txtProductBowlCode'] . " " . $row['txtProductBowlImage'] . "</span>";
echo "<br />";
$img = $row['txtProductBowlImage'];
echo "<span> Original img: " . $img . " </span>";
$img = str_replace('\\', '/', $img);
echo "<br />";
$img = str_replace('C:/BowlPhotos/Thumbs/', 'Thumbs/', $img);
echo "<span>Folder img: " . $img . " </span>";
echo '<img src="' . $img . '">';
echo "<br />";
$img = str_replace('Thumbs/', '', $img);
echo "<span>Local img: " . $img . " </span>";
echo '<img src="' . $img . '">';
echo "<br />";
echo "<span>done</span><br />";
}

mysql_close($con);
? 
```

有许多变化，但最大的惊喜是 php 无法打开不在同一文件夹或 php 文件子文件夹中的文件夹！当我将整个文件夹移动到 php 文件夹的子文件夹时，上面的代码就会运行！

此外，如上所示，HTML 不需要本地文件的“file:///”...

我应该提一下，这仅在我的本地服务器上运行 - 而不是在网络上。它仅供我自己使用，用于跟踪我制作和销售的木碗。

再次，非常感谢乔恩......

# intellij-idea - IntellIJ 编辑器未出现

> ID：13224784
> 
> 赞同：6
> 
> 时间：2012-11-05T01:19:11.323
> 
> 标签：intellij-idea

我将 IntellIJ 安装更新到最新版本 (11.1.4)，现在编辑器窗口没有出现。双击文件，跳转到源代码，没有任何反应。没有错误消息，它只是没有出现。如果我双击 xml 布局文件，预览窗口可以工作，但没有编辑器窗口。已安装并重新安装；回到较早的版本，它在那里也不起作用。我不知所措。有任何想法吗？

更新：如果我创建一个新项目，编辑器就可以工作。更新 2：idea.log 文件包括这个（我不知道 ins.android.sdk.AndroidSdkData 是什么）：

```
2012-11-04 20:40:52,481 [   2677]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $APP_CONFIG$/macros.xml file is null 
2012-11-04 20:40:52,481 [   2677]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $APP_CONFIG$/macros.xml 
2012-11-04 20:40:52,482 [   2678]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $APP_CONFIG$/quicklists.xml file is null 
2012-11-04 20:40:52,482 [   2678]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $APP_CONFIG$/quicklists.xml 
2012-11-04 20:40:52,564 [   2760]   INFO - pl.stores.ApplicationStoreImpl - 76 application components initialized in 1285 ms 
2012-11-04 20:40:52,575 [   2771]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $APP_CONFIG$/customization.xml file is null 
2012-11-04 20:40:52,575 [   2771]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $APP_CONFIG$/customization.xml 
2012-11-04 20:40:52,674 [   2870]   INFO - ij.openapi.wm.impl.IdeRootPane - App initialization took 3385 ms 
2012-11-04 20:40:53,136 [   3332]   INFO -                  TestNG Runner - Create TestNG Template Configuration 
2012-11-04 20:40:53,138 [   3334]   INFO -                  TestNG Runner - Create TestNG Template Configuration 
2012-11-04 20:40:53,253 [   3449]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/dynamic.xml file is null 
2012-11-04 20:40:53,253 [   3449]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/dynamic.xml 
2012-11-04 20:40:53,280 [   3476]   INFO - api.vfs.impl.local.FileWatcher - 1 paths checked, 0 mapped, 202 mks 
2012-11-04 20:40:53,366 [   3562]   INFO - ellij.project.impl.ProjectImpl - 137 project components initialized in 403 ms 
2012-11-04 20:40:53,563 [   3759]   INFO - .module.impl.ModuleManagerImpl - 4 modules loaded in 197 ms 
2012-11-04 20:40:53,625 [   3821]   INFO - api.vfs.impl.local.FileWatcher - 6 paths checked, 0 mapped, 150 mks 
2012-11-04 20:40:54,187 [   4383]   INFO - .roots.impl.DirectoryIndexImpl - Directory index initialized in 271 ms, indexed 1611 directories 
2012-11-04 20:40:54,207 [   4403]   INFO - pl.PushedFilePropertiesUpdater - File properties pushed in 18 ms 
2012-11-04 20:40:54,237 [   4433]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $APP_CONFIG$/plainTextFiles.xml file is null 
2012-11-04 20:40:54,237 [   4433]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $APP_CONFIG$/plainTextFiles.xml 
2012-11-04 20:40:54,246 [   4442]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/gant_config.xml file is null 
2012-11-04 20:40:54,246 [   4442]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/gant_config.xml 
2012-11-04 20:40:54,253 [   4449]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/gradle.xml file is null 
2012-11-04 20:40:54,253 [   4449]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/gradle.xml 
2012-11-04 20:40:55,855 [   6051]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/IntelliLang.xml file is null 
2012-11-04 20:40:55,855 [   6051]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/IntelliLang.xml 
2012-11-04 20:40:56,995 [   7191]   INFO - leEditor.impl.EditorsSplitters - splitter 
2012-11-04 20:40:56,996 [   7192]   INFO - leEditor.impl.EditorsSplitters - splitter 
2012-11-04 20:40:57,233 [   7429]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/codeStyleSettings.xml file is null 
2012-11-04 20:40:57,233 [   7429]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/codeStyleSettings.xml 
2012-11-04 20:40:57,234 [   7430]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/projectCodeStyle.xml file is null 
2012-11-04 20:40:57,234 [   7430]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/projectCodeStyle.xml 
2012-11-04 20:40:58,145 [   8341]   INFO - indexing.UnindexedFilesUpdater - Indexable files iterated in 3911 ms 
2012-11-04 20:40:58,146 [   8342]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update started: 0 files to update 
2012-11-04 20:40:58,146 [   8342]   INFO - indexing.UnindexedFilesUpdater - Unindexed files update done in 0 ms 
2012-11-04 20:40:58,362 [   8558]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/fileColors.xml file is null 
2012-11-04 20:40:58,362 [   8558]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $PROJECT_CONFIG_DIR$/fileColors.xml 
2012-11-04 20:41:00,420 [  10616]   INFO - ins.android.sdk.AndroidSdkData - For input string: "20.0.1" 
java.lang.NumberFormatException: For input string: "20.0.1"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Integer.parseInt(Integer.java:458)
    at java.lang.Integer.parseInt(Integer.java:499)
    at org.jetbrains.android.sdk.AndroidSdkData.parsePackageRevision(AndroidSdkData.java:86)
    at org.jetbrains.android.sdk.AndroidSdkData.<init>(AndroidSdkData.java:73)
    at org.jetbrains.android.sdk.AndroidSdkData.parse(AndroidSdkData.java:167)
    at org.jetbrains.android.sdk.AndroidPlatform.parse(AndroidPlatform.java:83)
    at org.jetbrains.android.sdk.AndroidSdkAdditionalData.getAndroidPlatform(AndroidSdkAdditionalData.java:119)
    at org.jetbrains.android.facet.AndroidFacet.addResourceFolderToSdkRootsIfNecessary(AndroidFacet.java:532)
    at org.jetbrains.android.facet.AndroidFacet.access$500(AndroidFacet.java:103)
    at org.jetbrains.android.facet.AndroidFacet$3.run(AndroidFacet.java:440)
    at com.intellij.ide.startup.impl.StartupManagerImpl$6.run(StartupManagerImpl.java:230)
    at com.intellij.ide.startup.impl.StartupManagerImpl.runActivities(StartupManagerImpl.java:203)
    at com.intellij.ide.startup.impl.StartupManagerImpl.access$100(StartupManagerImpl.java:41)
    at com.intellij.ide.startup.impl.StartupManagerImpl$4.run(StartupManagerImpl.java:170)
    at com.intellij.openapi.project.DumbServiceImpl.updateFinished(DumbServiceImpl.java:213)
    at com.intellij.openapi.project.DumbServiceImpl.access$1000(DumbServiceImpl.java:51)
    at com.intellij.openapi.project.DumbServiceImpl$IndexUpdateRunnable$1$3.run(DumbServiceImpl.java:363)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:702)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:672)
    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:699)
    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:538)
    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:420)
    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:378)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
2012-11-04 20:41:00,459 [  10655]   INFO - ins.android.sdk.AndroidSdkData - For input string: "20.0.1" 
java.lang.NumberFormatException: For input string: "20.0.1"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
    at java.lang.Integer.parseInt(Integer.java:458)
    at java.lang.Integer.parseInt(Integer.java:499)
    at org.jetbrains.android.sdk.AndroidSdkData.parsePackageRevision(AndroidSdkData.java:86)
    at org.jetbrains.android.sdk.AndroidSdkData.<init>(AndroidSdkData.java:73)
    at org.jetbrains.android.sdk.AndroidSdkData.parse(AndroidSdkData.java:167)
    at org.jetbrains.android.sdk.AndroidPlatform.parse(AndroidPlatform.java:83)
    at org.jetbrains.android.sdk.AndroidSdkAdditionalData.getAndroidPlatform(AndroidSdkAdditionalData.java:119)
    at org.jetbrains.android.facet.AndroidFacet.addResourceFolderToSdkRootsIfNecessary(AndroidFacet.java:532)
    at org.jetbrains.android.facet.AndroidFacet.access$500(AndroidFacet.java:103)
    at org.jetbrains.android.facet.AndroidFacet$3.run(AndroidFacet.java:440)
    at com.intellij.ide.startup.impl.StartupManagerImpl$6.run(StartupManagerImpl.java:230)
    at com.intellij.ide.startup.impl.StartupManagerImpl.runActivities(StartupManagerImpl.java:203)
    at com.intellij.ide.startup.impl.StartupManagerImpl.access$100(StartupManagerImpl.java:41)
    at com.intellij.ide.startup.impl.StartupManagerImpl$4.run(StartupManagerImpl.java:170)
    at com.intellij.openapi.project.DumbServiceImpl.updateFinished(DumbServiceImpl.java:213)
    at com.intellij.openapi.project.DumbServiceImpl.access$1000(DumbServiceImpl.java:51)
    at com.intellij.openapi.project.DumbServiceImpl$IndexUpdateRunnable$1$3.run(DumbServiceImpl.java:363)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:702)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:672)
    at com.intellij.ide.IdeEventQueue.defaultDispatchEvent(IdeEventQueue.java:699)
    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:538)
    at com.intellij.ide.IdeEventQueue._dispatchEvent(IdeEventQueue.java:420)
    at com.intellij.ide.IdeEventQueue.dispatchEvent(IdeEventQueue.java:378)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
2012-11-04 20:41:01,305 [  11501]   INFO - tor.impl.FileEditorManagerImpl - Project opening took 8374 ms 
2012-11-04 20:41:01,719 [  11915]   INFO - dom.attrs.AttributeDefinitions - Found tag with unknown parent: AndroidManifest.AndroidManifestCompatibleScreens 
2012-11-04 20:41:07,522 [  17718]   INFO - roid.compiler.tools.AndroidApt - [/Users/neveu/Dev/android-sdk-macosx/platform-tools/aapt] [package] [-m] [--non-constant-id] [-J] [/private/var/folders/xb/hg6cdxt51rs8lylmmjw0fk8m0000gp/T/android_apt_autogeneration6157451500950136901tmp] [-M] [/Users/neveu/Dev/magic_android/3rdParty/facebook/AndroidManifest.xml] [-S] [/Users/neveu/Dev/magic_android/3rdParty/facebook/res] [-I] [/Users/neveu/Dev/android-sdk-macosx/platforms/android-14/android.jar] 
2012-11-04 20:41:08,706 [  18902]   INFO - roid.compiler.tools.AndroidApt - [/Users/neveu/Dev/android-sdk-macosx/platform-tools/aapt] [package] [-m] [-J] [/private/var/folders/xb/hg6cdxt51rs8lylmmjw0fk8m0000gp/T/android_apt_autogeneration3143184519400737414tmp] [-M] [/Users/neveu/Dev/magic_android/AndroidManifest.xml] [-S] [/Users/neveu/Dev/magic_android/res] [-I] [/Users/neveu/Dev/android-sdk-macosx/platforms/android-15/android.jar] 
2012-11-04 20:41:08,763 [  18959]   INFO - roid.compiler.tools.AndroidIdl - [/Users/neveu/Dev/android-sdk-macosx/platform-tools/aidl] [-p/Users/neveu/Dev/android-sdk-macosx/platforms/android-15/framework.aidl] [-I/Users/neveu/Dev/magic_android/magic/src] [-I/Users/neveu/Dev/magic_android/src] [-I/Users/neveu/Dev/magic_android/3rdParty/Tapjoy] [-I/Users/neveu/Dev/magic_android/gen] [/Users/neveu/Dev/magic_android/src/com/android/vending/billing/IMarketBillingService.aidl] [/Users/neveu/Dev/magic_android/gen/com/android/vending/billing/IMarketBillingService.java] 
2012-11-04 20:41:14,004 [  24200]   INFO - dom.attrs.AttributeDefinitions - Found tag with unknown parent: AndroidManifest.AndroidManifestCompatibleScreens 
2012-11-04 20:41:18,781 [  28977]   INFO - s.impl.stores.FileBasedStorage - Document was not loaded for $APP_CONFIG$/cachedDictionary.xml file is null 
2012-11-04 20:41:18,782 [  28978]   INFO - .impl.stores.XmlElementStorage - Document was not loaded for $APP_CONFIG$/cachedDictionary.xml 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T02:16:04.597

如果出现此类问题，首先要检查的是**idea.log**文件 ( `Help`| `Reveal Log in ...`)。

这可能有助于了解发生了什么问题，并且在某些情况下，您将能够从记录的异常中识别出根本案例（例如损坏的缓存或某些不兼容的插件）。

`File`| **Invalidate Caches**是接下来要尝试的事情。如果它不能解决问题，请转到[插件设置](http://www.jetbrains.com/idea/webhelp/updating-installing-and-uninstalling-plugins-from-a-repository.html)并禁用/卸载所有非捆绑插件（如果有的话）。

没有帮助？如果工作需要紧急完成并且您没有时间进一步调查，请重命名/删除[IDEA 文件夹](http://devnet.jetbrains.net/docs/DOC-181)（配置、缓存、插件）以使用所有默认值开始并创建一个新项目。

想要保留设置和项目文件？[联系支持](http://www.jetbrains.com/support/support.jsp?pr=IDEA)以`idea.log`解决问题。

# c# - 需要数据库推荐 -> 列式、嵌入式（如果可能）

> ID：13224787
> 
> 赞同：9
> 
> 时间：2012-11-05T01:19:31.717
> 
> 标签：c#, sql, database, api, concurrency

编辑：由于到目前为止的答案，我想更多地关注我喜欢归零的内容：一个允许在内存中写入（可能是简单的 C# 代码）并具有持久性以访问数据的存储选项的数据库到目前为止，从 R. Redis 内部看起来最有希望。我还考虑实际使用类似于 Lockfree++ 或 ZeroMQ 的东西，以避免将数据同时写入数据库，而是通过消息总线/其他实现发送所有要持久化的数据，并让一个“参与者”处理所有写入操作到内存数据库或其他解决方案。除了 Redis 之外还有其他想法（有些人提到了 SQLite，我仍然需要测试它的性能）。还有其他建议吗？

我正在寻找满足以下大部分要求的理想数据库结构/解决方案，但到目前为止我完全失败了。你能帮忙吗？

我的任务：我在 .Net 4.5 (C#) 中运行一个进程并生成（通常）我想在其他应用程序中用于进一步分析的值类型，因此喜欢保留在内存中或保留在磁盘上。更多内容如下。数据是在不同的任务/线程中生成的，因此基于行的数据格式不能很好地匹配这种情况（因为在不同的线程中生成的数据是在不同的时间生成的，因此没有对齐）。因此，我认为列式数据结构可能是合适的，但如果我错了，请纠正我。

例子：

Tasks/Thread #1 在给定的时间戳生成以下数据

datetime.ticks / 输出数据的值

1000000001 233.23

1000000002 233.34

1000000006 234.23 ...

任务/线程#2 在给定的时间戳生成以下数据

datetime.ticks / 输出数据的值

1000000002 33.32

1000000005 34.34

1000000015 54.32 ...

我不需要在 .Net 运行时对齐时间戳，我首先是在保存数据并稍后在 R 或 Python 中处理数据之后。

我的要求：

*   快速写入、快速写入、快速写入：可能会发生我每秒生成 100,000-1,000,000 个数据点并且需要持久化（最坏情况）或将数据保留在内存中的情况。可以在自己的线程上运行写入，因此该过程可以滞后于数据生成过程，但限制是 16gb RAM（64 位代码），更多信息如下。

*   首选是柱状 db 格式，因为它很适合我以后如何查询数据，但如果对上面的示例有意义，我对任何其他结构持开放态度（如果所有其他要求，文档/键值也可以满足，尤其是在写入速度方面）。

*   可以从 .Net 中引用的 API。示例：HDF5 可能被某些人认为是有能力的，但我发现他们的 .Net 端口很糟糕。支持 .Net 的东西会更好一点，但如果满足所有其他要求，那么我可以处理类似于 HDF5 .Net 端口的东西.

*   尽可能并发写入：如前所述，我喜欢从不同的任务/线程并发写入数据。

*   我受到 16gb 内存的限制（以 64 位运行 .Net 进程），因此我可能会寻找并非纯粹在内存中的东西，因为有时我可能会生成比这更多的数据。有时会持续存在的内存中的东西或纯粹的持久性模型可能更可取。

*   首选嵌入式，但如果客户端/服务器解决方案中的服务器可以作为 Windows 服务运行，则没有问题。

*   在数据访问方面，我非常喜欢已经存在 R 和 Python 接口的数据库解决方案，因为我喜欢在 Python 中使用 Panda 库进行时间序列对齐和其他分析，并在 R 中运行分析。

*   如果 API/库还支持 SQL/SQL/Linq/ 之类的查询，这将是非常棒的，但通常我只需要绝对的基本框架，例如在开始日期和结束日期之间加载列数据（给定“键”/索引是这种格式），因为我在 R/Python 中分析和运行查询。

*   如果它带有管理控制台或数据可视化器，那将是一个加分项，但不是必须的。

*   应该是开源的或在“范围内”定价（不，KDB 在这方面不符合条件；-）

好的，这是我到目前为止所拥有的，这也是我所得到的，因为大多数数据库解决方案在写入性能要求上已经失败了：

*   Infobright 和 Db4o。我喜欢我目前阅读的内容，但我承认我没有检查任何性能统计数据
*   自己做了点什么。我可以轻松地以二进制格式存储值类型并通过 datetime.ticks 索引数据，我只需要以某种方式编写脚本来加载/反序列化 Python/R 中的数据。但如果我想添加并发、查询引擎和其他好东西，这将是一项艰巨的任务。因此，我寻找已经存在的东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-08T16:01:38.917

我无法评论——低代表（我是新来的）——所以你会得到一个完整的答案......

首先，你确定你需要一个数据库吗？如果快速写入速度和对 R 的可移植性是您最关心的问题，那么您是否考虑过平面文件机制？根据您的意见，您愿意批量写入，但需要持久性；如果这些是我的要求，我会编写一个闪电般快速的直接到磁盘缓冲系统，然后构建一个单独的任务，定期获取磁盘文件并将它们移动到 R 的数据存储中，并且只有当 R 读取平面文件首先是不够的。

如果您可以事后进行对齐，那么您可以编写线程以在主并行循环中分隔文件，每隔一段时间切断每个文件，并将对齐和数据库加载留给子进程。

因此（在蹩脚的伪代码中），构建一个线程进程，您将使用 backgroundworker 或类似的方法调用它，并包含一个唯一标识每个工作人员以及每个文件流（任务/线程）的线程名字符串：

```
file_name = threadname + '0001.csv' // or something
open(file_name for writing)
while(generating_data) {
    generate_data()
    while (buffer_not_full and very_busy) {
        write_data_to_buffer
        generate_data()
    }
    flush_buffer_to_disk(file_name)
    if(file is big enough or enough time has passed or we're not too busy) {
        close(file_name)
        move(file_name to bob's folder)
        increment file_name
        open(file_name for writing)
    }
) 
```

高效快速的文件 I/O 和缓冲是[一个简单而常见的问题](https://stackoverflow.com/questions/955911/how-to-write-super-fast-file-streaming-code-in-c)。没有什么比这更快了。然后，您可以编写另一个进程来执行数据库加载，而不用担心那里的性能：

```
while(file_name in list of files in bob's folder sorted by date for good measure)
{
    read bob's file
    load bob's file to database
    align dates, make pretty
} 
```

而且我不会用 C# 编写该部分，我会对其编写批处理脚本并使用数据库的本机加载程序，这将与您可以从头开始构建的任何内容一样快。

如果您在同一硬件上运行，则必须确保两个循环不会干扰太多。也就是说，以更高的优先级运行任务线程，或者构建一些互斥锁或性能限制器，以便在线程运行时数据库负载不会占用资源。我肯定会隔离数据库服务器和硬件，这样平面文件的文件 I/O 就不会受到损害。

如果你在 Unix 上，FIFO 队列会起作用，但你不是。:-)

此外，我想，硬件对您的性能影响比数据库引擎更大。如果您的预算有限，我猜您使用的是 COTS 硬件，因此选择固态硬盘可能会相当便宜地提高性能。正如我所说，将 DB 存储与平面文件存储分开会有所帮助，并且 R、数据库和线程的 CPU/RAM 都应该理想地隔离。

我的意思是选择数据库供应商可能不是你最大的问题，除非你有很多钱可以花。否则，您大部分时间都会受到硬件的约束。数据库调优是一门艺术，虽然您可以在最高端获得较小的性能提升，但拥有一个优秀的数据库管理员将使大多数数据库的性能保持在同一个范围内。我会看看 R 和 Python 支持什么以及你对什么感到满意。如果您以柱状方式思考，请查看 R 和 C# 对 Cassandra（我的投票）、Hana、Lucid、HBase、Infobright、Vertica 等的支持，然后根据价格和支持选择一个。对于单一商品机器上的传统数据库，我还没有看到任何 MySQL 无法处理的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T06:58:05.307

这不是要回答我自己的问题，而是要跟踪我迄今为止测试过的所有数据库以及为什么它们还没有满足我的要求：每次我尝试编写 100 万个单个对象（1 个长对象，2 个浮点数）到数据库。对于 ooDB，我将对象放入一个集合并编写集合本身，类似于 Redis 等键/值的故事，但也尝试将简单的整数（1 百万）写入 InfoBright 等柱状数据库。

*   Db4o，写入速度非常慢：一个集合中的 100 万个对象大约需要 45 秒。后来优化了集合结构，也把每个对象都单独写了，这里就不怎么喜欢了。
*   InfoBright：同样的事情，写入速度非常慢，这让我很惊讶，因为它以列格式组织数据，但我认为“知识树”只在查询数据时才起作用，而不是在保存平面数据结构/表时-像结构。
*   Redis（通过 BookSleeve）：适用于 .Net 的出色 API：完整的 Redis 功能（尽管在 Windows 机器上运行服务器与 Linux 或 Unix 机器相比存在一些缺点）。性能非常快......每秒超过 100 万个项目。我使用 Protocol Buffers（protobuf-net，均由 Marc Gravell 编写）序列化了所有对象，仍然需要使用该库进行更多操作，但 R 和 Python 都可以完全访问 Redis DB，这是一个很大的优势。爱它至今。Marc 围绕 Redis 基本函数编写的 Async 框架非常棒，非常简洁，而且到目前为止它工作得很好。我还想多花一点时间来试验 Redis 列表/集合类型，因为到目前为止我只序列化为字节数组。
*   SqLite：我纯粹在内存中运行，并设法在大约 3 秒内写入 100 万个值类型元素。对于纯 RDBMS 来说还不错，显然内存选项确实加快了速度。我只创建了一个连接、一个事务、创建了一个命令、一个参数，并且只是在一个循环中调整了参数的值，并在每次迭代时运行 ExecuteNonQuery。然后事务提交在循环外运行。
*   HDF5：虽然有一个 .Net 端口，并且还有一个库可以以某种方式处理 R 中的 HDF5 文件，但我强烈反对任何人这样做。这是一场纯粹的噩梦。.Net 端口写得非常糟糕，哎呀，整个 HDF5 概念都值得怀疑。它是一种非常古老且在我看来已经过时的存储矢量化/列数据的解决方案。这是 2012 年而不是 1995 年。如果不能从之前存储它们的文件中完全删除数据集和向量，那么我不认为这是一种烦恼，而是一个主要的设计缺陷。一般来说，API（不仅仅是.Net）的设计和编写都非常糟糕，恕我直言，有大量的类对象，没有人在没有花费数小时研究文件结构的情况下，了解如何使用。我认为这在一定程度上可以从非常稀少的文档和示例代码中得到证明。此外，h5r R 库是一场戏剧，绝对是一场噩梦。它的编写也很糟糕（通常由于刷新错误导致文件无法正确关闭并且它会损坏文件），该库甚至无法正确安装在 32 位操作系统上......并且它继续存在。我写的关于 HDF5 的文章最多，因为我把大部分时间都花在了这篇文章上……最后得到了最大的挫败感。拥有一个可从 R 和 .Net 访问的快速列式文件存储系统的想法很诱人，但它并没有实现它在 API 集成和可用性或缺乏可用性方面的承诺。它的编写也很糟糕（通常由于刷新错误导致文件无法正确关闭并且它会损坏文件），该库甚至无法正确安装在 32 位操作系统上......并且它继续存在。我写的关于 HDF5 的文章最多，因为我把大部分时间都花在了这篇文章上……最后得到了最大的挫败感。拥有一个可从 R 和 .Net 访问的快速列式文件存储系统的想法很诱人，但它并没有实现它在 API 集成和可用性或缺乏可用性方面的承诺。它的编写也很糟糕（通常由于刷新错误导致文件无法正确关闭并且它会损坏文件），该库甚至无法正确安装在 32 位操作系统上......并且它继续存在。我写的关于 HDF5 的文章最多，因为我把大部分时间都花在了这篇文章上……最后得到了最大的挫败感。拥有一个可从 R 和 .Net 访问的快速列式文件存储系统的想法很诱人，但它并没有实现它在 API 集成和可用性或缺乏可用性方面的承诺。

更新：我放弃了测试velocityDB只是因为似乎没有任何适配器可以从R中访问数据库。我目前正在考虑用图表库编写我自己的 GUI，它可以从写入的二进制文件访问生成的数据，或者通过无代理消息总线 (zeroMQ) 发送或通过 LockFree++ 发送到“参与者”(我的 gui)。然后我可以从 C# 中调用 R 并将结果返回到我的 GUI。这可能会给我最大的灵活性和自由，但显然也是最乏味的编码。在我的测试过程中，我遇到了越来越多的限制，每次 db 测试我都越来越喜欢这个想法。

**结果：感谢您的参与。最后，我将赏金积分授予 Chipmonkey，因为他部分建议了我认为解决我的问题的重要点（尽管我最终选择了我自己的不同解决方案）。我最终在内存存储中的 Redis 和从 .Net 到 R.dll 的直接调用之间进行了混合。Redis 允许不同进程访问其存储在内存中的数据。这使得它成为一种方便的解决方案，可以将数据快速存储为 Redis 中的键/值，然后从 R 中访问相同的数据。此外，我通过其 .dll 和出色的 R.Net 库直接发送数据并调用 R 中的函数。在我的机器上将 100 万个值类型的集合传递给 R 大约需要 2.3 秒，这已经足够快了，因为我可以方便地传递数据，**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-10T18:20:04.313

请注意：我曾经在一个德尔福论坛上遇到过类似的问题。我可以帮助他使用我当时编写的一个简单的 ID-key-value 数据库后端（一种 NoSQL 引擎）。基本上，它使用 B-Tree 来存储三元组（32 位 ObjectID、32 位 PropertyKey、64 位值）。我可以设法实时保存大约 500k/秒的值（大约 5 年前）。当然，数据在所有三个值（ID、property-ID 和 value）上都建立了索引。您可以通过忽略值索引来优化它。

我仍然拥有的源代码在 Delphi 中，但我会考虑使用 C# 实现类似的东西。我不能告诉你它是否能满足你的性能需求，但如果一切都失败了，试试看。使用缓冲写入也应该大大提高性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-10T22:21:30.903

我会采用结合持久性存储的方式（我个人更喜欢 db4o，但您可以使用文件以及上面提到的）并以这种方式将对象存储到内存中：

使用 BlockingCollection<T> 将对象存储在内存中（我相信您将获得比 1000000/s 更好的性能将对象存储在内存中），而不是拥有一个或多个处理线程来消耗对象并将它们存储到持久数据库中

```
// Producing thread
for (int i=0; i<1000000; i++)
    blockingCollection.Add(myObject);

// Consuming threads
while (true)
{
      var myObject = blockingCollection.Take();
      db4oSession.Store(myObject); // or write it to the files or whathever
} 
```

BlockingCollection 几乎解决了生产者-消费者工作流程，如果您将使用它们的多个实例并使用 AddToAny/TakeFromAny，您可以获得任何类型的多线程性能

每个消费线程可以有不同的 db4o 会话（文件）以达到所需的性能（db4o 是单线程的）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-14T17:27:20.413

既然你想使用 ZeroMQ 为什么不使用 Memcache 而不是 Redis 呢？
据我所知，ZeroMQ 不提供持久性。Memcache 也不提供持久性，并且比 Redis 快一点。
或者换一种方式，如果你使用 Redis 为什么不使用 beanstalk MQ？
如果您想使用 Redis（用于持久性），您可能希望从 ZeroMQ 切换到 beanstalk MQ（也是一个快速的内存队列，但也具有通过日志记录的持久性）。Beanstalk 也有 C# 库。

# c++ - 在 ubuntu 中使用 Opencv 编译警告

> ID：13224789
> 
> 赞同：0
> 
> 时间：2012-11-05T01:19:37.157
> 
> 标签：c++, ubuntu, opencv, syntax

亲爱的社区最近我一直在研究一点 Opencv，我发现眼球追踪的东西很有趣，所以我找到了一个开始的源代码，但是当我尝试编译它时，我收到了这个警告：

ojos2.cpp:15:5: 警告：'int main(int*, char**)' 的第一个参数应该是 'int' [-Wmain]

更清楚一点，我是从 Ubuntu 终端编译的，这里是代码

```
#include "cv.h"

#include"highgui.h"

IplImage* GetThresholdedImage(IplImage* img)
{

IplImage *imgHSV=cvCreateImage(cvGetSize(img),8,3);
cvCvtColor(img,imgHSV,CV_BGR2HSV);
IplImage *imgThresh=cvCreateImage(cvGetSize(img),8,1);
cvInRangeS(imgHSV,cvScalar(0, 84, 0, 0),cvScalar(179, 256, 11, 0),imgThresh);
cvReleaseImage(&imgHSV);
return imgThresh;
}

int main(int *argv,char **argc)
{

IplImage *imgScribble= NULL;
char c=0;
CvCapture *capture;
capture=cvCreateFileCapture("main.avi");

if(!capture)
{
    printf("Camera could not be initialized");
    exit(0);
}
cvNamedWindow("Simple");
cvNamedWindow("Thresholded");

while(c!=32)
{
    IplImage *img=0;
    img=cvQueryFrame(capture);
    if(!img)
        break;
    if(imgScribble==NULL)
        imgScribble=cvCreateImage(cvGetSize(img),8,3);

    IplImage *timg=GetThresholdedImage(img);
    CvMoments *moments=(CvMoments*)malloc(sizeof(CvMoments));
    cvMoments(timg,moments,1);

    double moment10 = cvGetSpatialMoment(moments, 1, 0);
    double moment01 = cvGetSpatialMoment(moments, 0, 1);
    double area = cvGetCentralMoment(moments, 0, 0);

    static int posX = 0;
    static int posY = 0;

    int lastX = posX;
    int lastY = posY;

    posX = moment10/area;
    posY = moment01/area;
     // Print it out for debugging purposes
    printf("position (%d,%d)\n", posX, posY);
    // We want to draw a line only if its a valid position
    if(lastX>0 && lastY>0 && posX>0 && posY>0)
    {
        // Draw a yellow line from the previous point to the current point
        cvLine(imgScribble, cvPoint(posX, posY), cvPoint(lastX, lastY), cvScalar(0,255,255), 5);
    }
    // Add the scribbling image and the frame...

    cvAdd(img, imgScribble, img);

    cvShowImage("Simple",img);
    cvShowImage("Thresholded",timg);
    c=cvWaitKey(3);
    cvReleaseImage(&timg);
    delete moments;

}
//cvReleaseImage(&img);
cvDestroyWindow("Simple");
cvDestroyWindow("Thresholded");
} 
```

任何帮助都会很有用

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:25:51.007

原型应该是`int main (int argv, char *argc[])`，它的指针`argv`主要是错误的——`char **argc`并且`char *argc[]`是说同一件事的两种方式，但是将它写为指向字符数组的指针而不是指向指针的指针更清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:29:00.100

int main(int argv,char **argc) 警告消失了。

# ruby-on-rails - 将 sqlite3 文件移动到新服务器

> ID：13224799
> 
> 赞同：1
> 
> 时间：2012-11-05T01:20:41.463
> 
> 标签：ruby-on-rails, sqlite

[我已经阅读了http://www.sqlite.org](http://www.sqlite.org)的主页。说我可以简单地为新的 RoR 站点（炼油厂 CMS）上传给我的 sqlite3 文件并且它将可用，这是否正确？我似乎找不到任何有关“安装”数据库的权限或任何程序的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:12:47.540

sqlite 文件*是*数据库，因此您应该能够毫无问题地将其复制到另一个服务器/位置。

如果您的应用程序的`config/database.yml`文件已配置*（针对配置服务器的环境）*指向数据库的路径，并且应用程序用户可以根据其权限读取该文件，则无需再做任何事情。

# bash - 选项卡扩展和“./” bash shell

> ID：13224804
> 
> 赞同：2
> 
> 时间：2012-11-05T01:21:12.133
> 
> 标签：bash, scripting, environment, ubuntu-12.04, kubuntu

也许这里有人可以帮助我。在两台机器上安装了 Ubuntu 12.04 LTS (kubuntu)。`.bashrc`和`.bash_profile`文件是相同的，因为每台机器上的文件结构是相同的。

**在机器 1 上**：我在终端窗口中运行 bash 脚本，简单：`./scriptname.sh`

**在机器 2 上**：我不能这样做，必须使用：`sh scriptname.sh` 我也不能使用`./`和制表符完成脚本文件名。

所有可执行位都设置正确，所有文件和文件夹都具有正确的权限。在脚本的标题中，shebang 设置正确。

任何想法为什么会发生这种情况？

如果我尝试使用以下命令执行脚本`./file_motion_grab.sh`：

```
bash: ./file_motion_grab.sh: Permission denied 
```

当我尝试`ls -l`时，我得到：

```
-rwxrwxrwx 1 adelie adelie 351 Nov 4 20:32 file_motion_grab.sh 
```

的输出`getfacl`是：

```
# file: file_motion_grab.sh
# owner: adelie
# group: adelie
user::rwx
group::rwx
other::rwx 
```

更一般 - 第二台机器上的任何新脚本都必须调用： sh scriptname.sh .bash 文件中可能有问题。但不确定在哪里看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:07:38.820

我建议尝试`ls -al`检查文件和目录的权限。另外，请尝试`getfacl file.sh`，因为有时 ACL 权限会覆盖正常的 Unix 权限位。

然后我会尝试`head -n 1 file.sh | xxd`查看第一行，并确保 shebang 作为文件的前两个字符正确存在。有时，隐藏字符（如 Unicode BOM）可能会导致无法正确解释它。

然后我会检查外壳本身的权限。`ls -l /bin/bash`和`getfacl /bin/bash`。我还会检查其他口译员是否会发生这种情况；你可以`#!/bin/sh`用于脚本吗？`#!/bin/python`（或 Perl，或 Ruby，或类似的东西）？区分这种情况是仅发生在其他 shell 上`/bin/bash`还是发生在其他 shell 上会很有帮助。

此外，`ls /proc/sys/fs/binfmt_misc`请查看您是否配置了任何可能会干扰 shell 脚本的正常解释的二进制格式。

尝试从另一个帐户进行测试（如果可以的话）。问题是您帐户独有的吗？我也会尝试重新启动，以防只是一些暂时的损坏导致问题（再次，如果可以的话）。

（答案原本是一系列评论）

# keyboard-shortcuts - 如何制作移动图片文件的热键

> ID：13224805
> 
> 赞同：1
> 
> 时间：2012-11-05T01:21:15.363
> 
> 标签：keyboard-shortcuts, hotkeys

我的电脑中有百万张图片，我想对它们进行分类和排序，每个人都放在一个单独的文件夹中。所以我给我老婆做一个文件夹，给我儿子一个，另一个给我另一个儿子等等……现在我想一张一张地打开图片，当我看到这张给我妻子的照片时，我会按一个键，让我们说“M”作为她名字的第一个字母，这张照片将被剪切过去或发送到我妻子的文件夹中。当我看到这张照片是给我儿子的时，我会按一个键，让我们说“D”作为他名字的第一个字母，然后这张照片将被剪切过去或发送到我儿子的文件夹等……如果我能做到这一点将节省很多时间，我不能手动剪切和超过百万张图片。我怎么能这样？？？？

# c++ - 使用流而不是 snprintf

> ID：13224807
> 
> 赞同：2
> 
> 时间：2012-11-05T01:21:34.663
> 
> 标签：c++, c

我对 C++ 流 API 不太熟悉，我想在 C++ 中使用流转换 C 代码，

```
char sHex[20] = {0};
int numid = 2;

snprintf( sHex, sizeof(sHex) - 1, "%X", numId ); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T01:26:08.360

```
stringstream ss;
ss << uppercase << hex << numId;
string res = ss.str(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:30:46.857

看看[Understanding C++ Streams and Stream Buffers](https://web.archive.org/web/20120624033115/http://www.dyn-lab.com/articles/c-streams.html)，它可能对你有所帮助，就像帮助了我一样。

# html - CSS 菜单弹出不正确

> ID：13224810
> 
> 赞同：0
> 
> 时间：2012-11-05T01:21:54.953
> 
> 标签：html, css

我正在尝试制作一个外观精美的菜单，该菜单可以扩展并显示其中的选项，但是我在正确设置 CSS 时遇到了问题。我想让子菜单从城市名称中弹出。但我无法让城市名称适合那里。

CSS

```
ul { margin : 80px 0 0 0; padding: 0;  white-space : nowrap;}

li a { padding-left: 10px; }

li {
    display     : block;
    padding     : 2px 10px 2px 40px;
    margin      : 0 0 15px 0;
    background  : #929292; 
    width       : 0;
    overflow    : hidden;
    cursor      : pointer;
    -webkit-transform: rotate(0deg) translateX(0px); 
    -webkit-transition: all 0.33s linear 0s;
    -moz-transform: rotate(0deg) translateX(0px);
    -moz-transition: all 0.33s linear 0s;
}

li:hover {  
    background : #fff; width: 180px;
    -webkit-transform: rotate(0deg) translateX(0px) translateY(0px); 
    -moz-transform: rotate(0deg) translateX(0px) translateY(0px);
} 
```

HTML

```
<ul>
    <li>Florence<a href="flo.php">Florence</a></li>
    <li>Tuscumbia<a href="tusc.php">Tuscumbia</a></li>
    <li>Muscle Shoals<a href="ms.php">Muscle Shoals</a></li>
    <li>Sheffield<a href="shef.php">Sheffield</a></li>
</ul>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T09:51:37.370

这可能不是最好的方法，但你可以使用类：

```
<ul>
    <li class="flo">Florence<a href="flo.php">Florence</a></li>
    <li class="tusc">Tuscumbia<a href="tusc.php">Tuscumbia</a></li>
    <li class="ms">Muscle Shoals<a href="ms.php">Muscle Shoals</a></li>
    <li class="shef">Sheffield<a href="shef.php">Sheffield</a></li>
</ul>​​​​​​​​​​​​​​​​​​​​​​​​​

 .flo { width: 50px; }
 .tusc { width: 60px; }
 .ms { width: 82px; }
 .shef { width: 50px; } 
```

这是一个小提琴：http: [//jsfiddle.net/tylergreen/SQGrY/](http://jsfiddle.net/tylergreen/SQGrY/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T22:49:38.813

你可以给左边的标签一个包装器和一个固定的宽度：

**HTML**

```
<ul class="mainMenu">
    <li>
        <div class="label">Florence</div>
        <ul class="subMenuLevel1">
            <li><a href="flo.php">Florence 1</a></li>
            <li><a href="flo.php">Florence 2</a></li>
            <li><a href="flo.php">Florence 3</a></li>
        </ul>
    </li>

    <li>
        <div class="label">Florence</div>
        <ul class="subMenuLevel1">
            <li><a href="flo.php">Florence 1</a></li>
            <li><a href="flo.php">Florence 2</a></li>
            <li><a href="flo.php">Florence 3</a></li>
            <li><a href="flo.php">Florence 4</a></li>
            <li><a href="flo.php">Florence 5</a></li>
        </ul>
    </li>

    <li>
        <div class="label">Florence</div>
        <ul class="subMenuLevel1">
            <li><a href="flo.php">Florence 1</a></li>
            <li><a href="flo.php">Florence 2</a></li>
        </ul>
    </li>
</ul>​ 
```

**CSS**

```
body {
    font-family: Arial, san-serif;
}

.mainMenu {
    margin: 80px 0 0 0;
    padding: 0;
}

.mainMenu > li {
    display: block;
    position: relative;
    margin: 0 0 15px 0;
    background: #929292; 
    width: 160px;
    white-space: nowrap;
    list-style-type: none;
    -webkit-transition: background 0.33s linear 0s;
    -moz-transition: background 0.33s linear 0s;
    transition: background 0.33s linear 0s;
}
.mainMenu > li > .label {
    padding: 5px 20px;
    text-align: right;
}

.mainMenu > li:hover {  
    background : #eeeeee; 
}

.subMenuLevel1 {
    position: absolute;
    top: 0px;
    left: 160px;
    width: 0px;
    margin: 0px;
    padding: 0px;
    overflow: hidden;
    background: #929292;
    -webkit-transition: all 0.33s linear 0s;
    -moz-transition: all 0.33s linear 0s;
    transition: all 0.33s linear 0s;
}

.mainMenu > li:hover > .subMenuLevel1 {
    width: 160px;
    background: #eeeeee;
}
.subMenuLevel1 > li {
    margin: 0px;
    padding: 0px;
    list-style-type: none;
}
.subMenuLevel1 > li > a {
    display: block;
    padding: 5px 20px;
    color: #000000;
    text-decoration: none;
    -webkit-transition: background 0.33s linear 0s;
    -moz-transition: background 0.33s linear 0s;
    transition: background 0.33s linear 0s;
}
.subMenuLevel1 > li > a:hover {
    background: #dddddd;
} 
```

[**演示**](http://jsfiddle.net/bD3QT/6/)

# r - xtable的排序输出

> ID：13224814
> 
> 赞同：1
> 
> 时间：2012-11-05T01:23:07.860
> 
> 标签：r, xtable

我有一个数据集，我用它创建一个表，但现在我希望输出按字母顺序排序。`order`，`sort`否则`sort.list`我不上班。这是我所拥有的一个例子。

```
library(maptools)
data(wrld_simpl)
tab.test <- xtable(subset(wrld_simpl@data, select=c(NAME, REGION)))
head(tab.test)
% latex table generated in R 2.15.1 by xtable 1.7-0 package
% Sun Nov  4 19:58:19 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rll}
  \hline
 & NAME & REGION \\ 
  \hline
ATG & Antigua and Barbuda &  19 \\ 
DZA & Algeria &   2 \\ 
AZE & Azerbaijan & 142 \\ 
ALB & Albania & 150 \\ 
ARM & Armenia & 142 \\ 
AGO & Angola &   2 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

我希望能够按`NAME`，`REGION`甚至是第一列对其进行排序，这`ISO3`似乎是默认的左列。感谢您的帮助，包括对类似问题的提示（我在寻找治疗方法时可能忽略了它们）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:03:40.790

`xtable`据我所知，这与

鉴于这`wrld_simpl`是一个我认为使用尝试修改对象`SpatialPolygonsDataFrame`的插槽副本会更容易。`data``S4`

该`plyr`包装具有很好的功能`arrange`，使订购变得容易。不清楚要不要按`NAME`then排列，我就单独`REGION`举个 order by 的例子`NAME`

```
wrld_data <- wrld_simpl@data

library(plyr)

arranged_data <- arrange(wrld_data, NAME)
# this was nice syntax for
# wrld_data[order(wrld_data$NAME),]

# subset colums
subset_data <- subset(arranged_data, select = c(NAME, REGION))

head(subset_data)

           NAME REGION
1 Aaland Islands    150
2    Afghanistan    142
3        Albania    150
4        Algeria      2
5 American Samoa      9
6        Andorra    150 
```

只是为了表明您的问题不`xtable`相关

```
.x <- xtable(subset_data)

head(.x)
% latex table generated in R 2.15.2 by xtable 1.7-0 package
% Mon Nov 05 13:03:27 2012
\begin{table}[ht]
\begin{center}
\begin{tabular}{rlr}
  \hline
 & NAME & REGION \\ 
  \hline
1 & Aaland Islands & 150 \\ 
  2 & Afghanistan & 142 \\ 
  3 & Albania & 150 \\ 
  4 & Algeria &   2 \\ 
  5 & American Samoa &   9 \\ 
  6 & Andorra & 150 \\ 
   \hline
\end{tabular}
\end{center}
\end{table} 
```

# jquery - jQuery触发更改而不会失去焦点？

> ID：13224820
> 
> 赞同：1
> 
> 时间：2012-11-05T01:23:38.153
> 
> 标签：jquery, bind

我有一个脚本，像这样：

```
$(".b").hide();
$(".uid").bind("change", function() {
    if($(this).val().length>0) {
        $(".b").show();
    } else {
        $(".b").hide();
    }
}); 
```

这正如您所期望的那样工作，但是，要显示“.b”，我必须离开“.uid”的焦点。有什么办法可以得到“。” 在不点击“.uid”外部的情况下显示？这是一个提交按钮，在将某些内容输入文本字段之前一直隐藏，我希望它在输入内容后立即显示，而无需单击该字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:26:50.167

您可以`keyup`改用：

```
$(".b").hide();
$(".uid").on("keyup", function() {
    if($(this).val().length>0) {
        $(".b").show();
    } else {
        $(".b").hide();
    }
});​ 
```

[http://jsfiddle.net/zerkms/YCGw9/](http://jsfiddle.net/zerkms/YCGw9/)

# python - 如何在 python 脚本中引用 openshift 的 env 目录？

> ID：13224823
> 
> 赞同：1
> 
> 时间：2012-11-05T01:24:47.980
> 
> 标签：python, cron, openshift

OpenShift 具有以下默认目录：

```
# $_ENV['OPENSHIFT_INTERNAL_IP']  - IP Address assigned to the application
# $_ENV['OPENSHIFT_GEAR_NAME']  - Application name
# $_ENV['OPENSHIFT_GEAR_DIR']   - Application dir
# $_ENV['OPENSHIFT_DATA_DIR']  - For persistent storage (between pushes)
# $_ENV['OPENSHIFT_TMP_DIR']   - Temp storage (unmodified files deleted after 10 days) 
```

如何在 python 脚本中引用它们？示例脚本“在日志目录中创建了一个日志文件并登录到数据目录？

```
from time import strftime

now= strftime("%Y-%m-%d %H:%M:%S")
fn  = "${OPENSHIFT_LOG_DIR}/test.log"
fn2 = "${OPENSHIFT_DATA_DIR}/test.log"
#fn  = "test.txt"

input = "appended text " + now + " \n"

with open(fn, "ab")  as f: 
       f.write(input)
with open(fn2, "ab") as f: 
       f.write(input) 
```

这些脚本可以与 cron 一起使用吗？

**编辑 BASH 文件：**

```
#! /bin/bash

#date >> ${OPENSHIFT_LOG_DIR}/new.log
source $OPENSHIFT_HOMEDIR/python-2.6/virtenv/bin/activate
python file.py
date >> ${OPENSHIFT_DATA_DIR}/new2data.log 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:28:21.180

```
import os

os.getenv("OPENSHIFT_INTERNAL_IP") 
```

应该管用。

所以用你的例子，修改为： -

```
import os
OPENSHIFT_LOG_DIR = os.getenv("OPENSHIFT_LOG_DIR") 
fn  = os.path.join(OPENSHIFT_LOG_DIR, "test.log") 
```

而且，是的，如果需要，您可以通过引用您的 bash 脚本来使用 cron 调用此 python 脚本...例如：-

```
 #!/bin/bash
 date >> ${OPENSHIFT_LOG_DIR}/status.log
 chmod +x status
 cd ${OPENSHIFT_REPO_DIR}/wsgi/crawler
 nohup python file.py 2>&1 & 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T03:29:13.037

这些变量 OPENSHIFT_* 在 OpenShift 上作为环境变量提供——因此 $_ENV["OPENSHIFT_LOG_DIR"] 是在 php 脚本中获取值的示例。

在 python 中，相当于 os.getenv("OPENSHIFT_LOG_DIR")。对上面 Calvin 的帖子进行了编辑并提交了它们。

回复：file.py 存在于何处的问题——使用 os.getenv("OPENSHIFT_REPO_DIR") 作为所有代码将位于应用程序运行的设备上的基本目录。因此，如果您的文件位于 .openshift/misc/file.py - 那么只需使用：

```
os.path.join(os.getenv("OPENSHIFT_REPO_DIR"), ".openshift", "misc", "file.py") 
```

获得完整路径。

或者在 bash 中，等价于：

```
$OPENSHIFT_REPO_DIR/.openshift/misc/file.py 
```

高温高压

# entity-framework - ef5 数据库第一个数据注释

> ID：13224834
> 
> 赞同：3
> 
> 时间：2012-11-05T01:26:12.710
> 
> 标签：entity-framework, visual-studio-2012, data-annotations, ef-database-first

我正在使用 VS2012 启动 MVC4。我还将 EF5 与“数据库优先”方法一起使用来创建我的类。

但是，由于可以重新生成生成的眼镜，我无法将数据注释详细信息用于帮助验证。

我已经看到了一些使用 MetaData 和部分类的代码片段，但我想知道是否有人知道一个小的可编译示例，我可以查看并分解以更好地了解各种类如何相互链接。

非常感谢您的帮助。戴夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-25T09:48:55.550

您可以通过扩展模型来实现您所需要的。假设 EF 为您生成了以下实体类：

```
namespace YourSolution
{
    using System;
    using System.Collections.Generic;

    public partial class News
    {
        public int ID { get; set; }
        public string Title { get; set; }                  
        public int UserID { get; set; }

        public virtual UserProfile User{ get; set; }
    }
} 
```

并且您想要做一些工作来保留您的数据注释和属性。因此，请按照以下步骤操作：

首先，在某个地方（无论你想要什么，但最好是在`Models`）添加两个类，如下所示：

```
namespace YourSolution
{
    [MetadataType(typeof(NewsAttribs))]
    public partial class News
    {
         // leave it empty.
    }

    public class NewsAttribs
    {            
        // Your attribs will come here.
    }
} 
```

然后将您想要的属性和属性添加到第二类 -`NewsAttribs`这里。：

```
public class NewsAttrib
{
    [Display(Name = "News title")]
    [Required(ErrorMessage = "Please enter the news title.")]
    public string Title { get; set; }

    // and other properties you want...
} 
```

**笔记：**

1）生成的实体类的命名空间和你的类**必须相同**——这里`YourSolution`。

2）您的第一个类**必须**是`partial`并且其名称**必须**与 EF 生成的类相同。

经历这个，你的属性再也不会丢失了......

# c# - 日期选择器 - 没有反应

> ID：13224836
> 
> 赞同：0
> 
> 时间：2012-11-05T01:27:05.440
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我正在尝试将 datapicker 添加到我的项目中。我遵循了一个教程。

我已将以下代码添加到 DatePickerReady.js 文件中：

```
$(function () {
    $(".datefield").datepicker(); 
}); 
```

我在 Views\Shared_Layout.cshtml 文件的 head 元素底部添加了以下代码。

```
<link href="@Url.Content("~/Content/themes/base/jquery.ui.core.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.datepicker.css")" rel="stylesheet"  type="text/css" />
<link href="@Url.Content("~/Content/themes/base/jquery.ui.theme.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/jquery.ui.core.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.ui.datepicker.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/DatePickerReady.js")" type="text/javascript"></script> 
```

我已将此添加到 Views\Home\Index.cshtml

```
@model Nullable<DateTime>

 @{
    string dts ="";
    if (Model != null)
    {
        dts = ((DateTime)Model).ToShortDateString();

    }
    @Html.TextBox("start", String.Format("{0:d}", dts), new { @class = "datefield", type = "date"  })
} 
```

但是当我关注/单击文本框时，它什么也不做。日历没有出现。我也没有收到任何错误。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:59:50.997

首先确保您已包含所有脚本，从您发布的脚本中我没有看到 jquery.js，还要确保这些脚本确实可用，即检查他们的路径。

使用 firebug 并查看单击 dateTime 文本框时是否出现任何控制台错误。

接下来检查该类是否附加到 html 文本框输入并且还进行了 jquery 调用，验证这些。

这是在 ASP.NET MVC 3 中使用 Datepicker 的简单分步指南：ASP.NET MVC[中 jquery Date Picker 简介](http://yassershaikh.com/introduction-to-jquery-date-picker-in-asp-net-mvc/)

我很想知道它是`DatePickerReady.js`做什么的？

# google-app-engine - GoogleAppEngine Datastore：将密钥返回给用户

> ID：13224837
> 
> 赞同：0
> 
> 时间：2012-11-05T01:27:19.323
> 
> 标签：google-app-engine, google-cloud-datastore

将存储实体的密钥返回给用户的最佳实践是什么？

就我而言，我想让用户创建实体并将其还给他他们的密钥，以便他将来能够处理它们。

例如，我的用户应该能够创建一个`group`，提供组参数。我的系统应该返回给他一个自动生成的密钥。

我现在正在使用

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Key key; 
```

这是最佳做法吗？

我应该返回给用户什么？我看到有一种`KeyFactory.keyToString`方法应该返回密钥的字符串表示形式，但它对我来说似乎信息量太大。

一个数字标识符或一个字符串就足以满足我的目的。我只希望它们自动生成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T12:19:48.843

按照您指定实体的方式`Key`，键是自动生成的，并`long`从数据存储中分配类型的值。为了得到这个值，你执行`Long id = key.getId()`假设你已经从实体获取了密钥。

希望这可以帮助！

# android - 从模拟器调用切换 Android 模拟器网络流量

> ID：13224839
> 
> 赞同：0
> 
> 时间：2012-11-05T01:27:49.607
> 
> 标签：android, android-emulator

我正在编写脚本来管理大量 Android 模拟器，我需要禁用其中一些模拟器上的所有网络流量。因为我在无头服务器上执行所有这些操作，所以我无法使用[模拟器文档](http://developer.android.com/tools/help/emulator.html#KeyMapping)中描述的 F8 热键。

我目前正在通过使用的空代理路由 TCP 流量`emulator-arm ... -http-proxy 0.0.0.0:0`，这会阻止我想要的流量。

我认为这运行良好，直到我在运行脚本时注意到一些奇怪的错误消息。控制台开始输出`accept too many open files`并检查打开的文件，`lsof`显示大量消息“无法识别协议”

```
...
emulator- 19463 username   19u     sock                0,6       0t0 1976595845 can't identify protocol
emulator- 19463 username   20u     sock                0,6       0t0 1976595847 can't identify protocol
... 
```

我发现的唯一“解决方案”是杀死所有的模拟器，然后等到再次达到这个限制，这根本不是一个解决方案。

在调用模拟器时还有其他方法可以做到这一点吗？我是否错误地使用`-htt-proxy`交换机来阻止流量？

[其他人通过使用飞机模式手动执行此操作](https://stackoverflow.com/questions/8499812/how-to-disable-internet-connection-in-android-emulator)找到了阻止流量的解决方案，但这对我来说是不可行的，因为我正在通过脚本控制模拟器。我可以使用我的脚本将关键事件发送到模拟器并以飞行模式打开手机，但我更喜欢比这更可靠的东西。

编辑：即使我没有通过空路由路由 TCP 流量，我似乎也会收到“无法识别协议”错误，所以我不知道发生了什么。鉴于我的情况，任何人都可以验证这个空路由方法是最好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T21:37:31.470

尝试使用 QEMU -net-forward 参数：

```
$ANDROID_SDK/tools/emulator -avd $AVD_NAME -qemu -net-forward 0.0.0.0:0.0.0.0:80:127.0.0.1:8888 
```

您将需要更新`127.0.0.1:8888`到您的空代理的地址。

# c++ - 在异常处理程序中，MessageBox() 成功返回 IDOK 但从未显示

> ID：13224844
> 
> 赞同：0
> 
> 时间：2012-11-05T01:28:36.330
> 
> 标签：c++, windows, winapi, exception-handling

我正在使用一个名为 windows_error 的自写异常类，它继承自 std::runtime_error，我用它来正确处理来自 Windows API 函数的意外错误。

一直到调用堆栈的底部，在我的 WinMain 函数的末尾，我捕获了所有尚未处理的 windows_error 异常。我打算通过在程序终止之前显示一条错误消息来处理它们，如下所示：

```
int WINAPI wWinMain(HINSTANCE inst, HINSTANCE prev, wchar_t *cmdline, int winshow)
{
    // Initialize result to EXIT_FAILURE in case the program terminates due to
    // an exception.
    int result = EXIT_FAILURE;

    try {
        result = sIRC()();
    }
    catch (windows_error &e) {
        e.basicHandler();
    }

    return result;
} 
```

basicHandler 成员函数如下所示：

```
void windows_error::basicHandler() const
{
    std::wostringstream ss;

    ss << L"An unexpected error has occurred in a Windows function.\n\n" \
          L"Function " << m_api << L" was called by " << m_caller << L" in " << m_srcFile << L" at line " << m_srcLine << L". " \
          L"It returned error " << m_error << L":\n\n" << m_errorMessage;

#ifdef _CONSOLE
    std::wcout << L"\n" << ss.str();
#else
    auto result = MessageBox(HWND_DESKTOP, ss.str().c_str(), L"Windows error!", MB_ICONERROR);
    result = result; // I added this line so I can put a breakpoint in the debugger
#endif // _CONSOLE
} 
```

当我开始使用我正在开发的程序时，效果很好。但现在该计划开始增长。在尝试新代码时，我注意到程序似乎意外终止。通过在 Visual C++ 2010 调试器中运行它，我注意到抛出了 windows_error 异常。通过逐步执行 basicHandler 函数，我可以看到 MessageBox 函数返回 1 (IDOK) 而没有实际显示消息框...

什么可能导致这种行为？

我知道我的描述有点含糊，但我不知道还有什么要添加的……我在 MSDN 上找不到任何表明这种行为甚至可能发生的东西。我没有可以传递给 MessageBox 的父窗口句柄，因为它们在堆栈展开期间都被销毁了。我也很肯定堆栈不会通过窗口过程或任何其他 Windows 回调展开。

任何提示都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:03:24.597

雷蒙德在他对我的问题的评论中提供了我需要的提示。在堆栈展开期间，我的 user_interface 类的析构函数在窗口句柄上调用 DestroyWindow，因为它在那时仍然有效。我不知道的是 MessageBox 将生成的 WM_QUIT 消息解释为自行关闭。我以为消息框有自己的内部消息队列？

我能够通过修改我的 user_interface 类的析构函数来解决我的问题。

它是：

```
if (_wnd)
    DestroyWindow(_wnd); 
```

我将其更改为：

```
if (_wnd) {
    DestroyWindow(_wnd);

    MSG msg = MSG();
    while (msg.message != WM_QUIT) {
        GetMessage(&msg, 0, 0, 0);
    }
} 
```

这有效，但似乎有点难看。有什么建议可以改进吗？

# asp.net-mvc-3 - Azure 部署到新的操作系统系列

> ID：13224847
> 
> 赞同：6
> 
> 时间：2012-11-05T01:29:02.503
> 
> 标签：asp.net-mvc-3, azure, azure-deployment

我最近更新了我的 Web 应用程序以针对需要部署到 Windows Server 2012 的 ASP.NET 4.5。通过在 ServiceConfiguration 部署文件中将 osFamily 值设置为 3 来实现。

但是，一旦我将它部署在 staging 中，我就无法转换为产品，因为生产具有与 staging 不同的操作系统版本，并且它错误地告诉我这不是它可以做的事情。

没有删除会导致停机的旧生产环境并翻转暂存以替换空的生产实例，我如何在不停机的情况下从 Windows Server 2008 过渡到 2012？

**编辑：**这特定于从 2008 年迁移到 2012 年，我相信早期版本是可能的，但是当我尝试从 2-3 编辑托管服务的 osFamily 值时出现以下错误。

> 不允许从 OS 系列 2 升级到 OS 系列 3

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T10:43:01.410

不幸的是，目前不支持从 OS 系列 1 和 2 升级到 3 - [http://msdn.microsoft.com/en-us/library/windowsazure/hh472157.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh472157.aspx)

> 更新期间不支持以下项目： • 更改角色名称。删除然后添加具有新名称的角色。
> 
> • 更改升级域计数。
> 
> • 减少本地资源的规模。
> 
> • 从客户操作系统系列 1 或 2 更新到客户操作系统系列 3。
> 
> **您可以通过将使用来宾操作系统系列 3 的新程序包部署到暂存环境并执行 VIP 交换来解决此限制。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:27:35.180

您应该能够从管理门户中执行此操作。请参阅[如何从管理门户升级 Windows Azure 来宾操作系统](http://msdn.microsoft.com/en-us/library/windowsazure/gg433101.aspx)。

**编辑**：这将适用于 2008 SP2 到 2008 R2，但不适用于 2012。

# list - 无法在 Scala 中向 List() 添加元素

> ID：13224851
> 
> 赞同：-7
> 
> 时间：2012-11-05T01:29:38.663
> 
> 标签：list, scala, element, add

有人可以帮我解决初学者的问题吗？我编写了一个函数来检查声明，但我无法将元素 Symbol() 添加到 List env。我不明白这是怎么回事。

```
def check_decl(env: List[Symbol])(decl: Declare): Unit = decl match{
case VarDec(varName, varType)=>{
  lookupForInsert(env)(varName.toString()) match {
    case Some(_) => throw Redeclared(Variable,varName.toString())
    case None => {
          varType match{
          case ArrayType(lower, upper, element)=>{
            if(lower > upper) throw SizeIsNotNegative(decl)
          }
          case IntType=>
          case RealType=>
          case BoolType=>
          case StringType=>
        }             
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:03:45.400

在 Scala 中，默认情况下你有不可变的列表，你不能向它“添加”一些东西。在 Java 中修改列表（或更类似的，堆栈）的所有操作都将在 Scala中生成一个*新的、修改后的列表。*或者，您有可变类，例如`ListBuffer`，其行为更像 Java 列表。

# google-maps-api-3 - 从谷歌地图渲染复杂的图像

> ID：13224852
> 
> 赞同：1
> 
> 时间：2012-11-05T01:30:24.953
> 
> 标签：google-maps-api-3

有什么方法可以从***复杂***的谷歌地图中捕获图像，并带有一些自定义叠加层，如热梯度。看图：![在此处输入图像描述](../Images/b5966e8f2b1b62a51339dd428230ac51.png) 谷歌静态地图 API 只能用简单的折线或标记生成静态地图（图像），在我的情况下这显然是不够的，我希望用户捕获这种图像并在那里分享它 twitter fb of g+

看到[谷歌地图图片？](https://stackoverflow.com/questions/1142821/google-maps-image)，这是一个类似的问题。但在我的情况下不是很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T06:40:06.393

**这不被允许。**看这里：

[https://developers.google.com/maps/faq#tos_screenshots](https://developers.google.com/maps/faq#tos_screenshots)

> **在印刷材料和离线媒体**中使用 Google 地图图像须遵守发布于以下网址的许可指南：
> 
> [http://www.google.com/permissions/geoguidelines.html](http://www.google.com/permissions/geoguidelines.html)

您可以请求许可，但我认为获得许可并不容易，除非您是付费商业客户。

# ruby-on-rails - 现有对象的rails中的嵌套表单

> ID：13224854
> 
> 赞同：0
> 
> 时间：2012-11-05T01:30:40.477
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

在我的应用程序中，我有一个页面，我希望管理员用户能够更新我的“包”模型的特定特征，该模型属于“订单”模型和“项目”模型。这有点复杂，但我基本上想在一个表格中显示属于给定项目的所有包，以特定方式排序（这就是我下面的 packages_for_log 方法所做的），两个空格用于更新项目的重量。理想情况下，所有更新都应该一次提交，页面底部有一个提交按钮。我尝试了一大堆解决方案，我当前的解决方案如下，但是当我访问服务器中的页面时出现此错误：

```
undefined method `actual_lbs' for #<ActionView::Helpers::FormBuilder:0x007ff67df6c9c8> 
```

该错误让我感到困惑，因为我希望我在包实例上调用该方法，而不是助手。有点糊涂。无论如何，我的代码如下。视图的相关部分：

```
<% form_for(@item) do |a| %>
  <% @item.packages_for_log.each do |p| %>
    <%= a.fields_for p do |i| %>
     <tr>
        <td><%= p.order.name %></td>
        <td><%= p.order.processed_notes %></td>
      <% if p.order.user %>
        <td><%= "#{p.order.user.name.first(3).upcase}-#{p.id}" %></td>
      <% else %>
        <td><%= p.order.id %></td>
      <% end %>
        <td>
          <%= i.text_field :actual_lbs %>
        </td>
        <td>
          <%= i.text_field :actual_oz %>
        </td>
          <%= i.hidden_field :true_weight, value: (i.actual_lbs + i.actual_oz/16) %>
     </tr>
    <% end %>
  <% end %>
<% end %> 
```

package.rb 模型文件的相关部分：

```
 attr_accessible :order_id, :price, :true_weight, :actual_lbs, :actual_oz
 attr_accessor :actual_lbs, :actual_oz  # These two are virtual attributes for the above calc 
```

我将资源 :packages 添加到我的路由文件中。

知道我做错了什么吗？对我来说重要的是我循环创建一个基于“p”的表，然后编辑同一个“p”对象。只是不知道该怎么做。Rails 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:37:00.240

我认为你的问题是这一行：

```
<%= i.hidden_field :true_weight, value: (i.actual_lbs + i.actual_oz/16) 
```

你需要把 p.actual_lbs 和 p.actual_oz

编辑：顺便说一句，您可能需要将真实重量计算移至您的控制器操作（CREATE 操作）。我不认为 :true_weight 会按照您的意图通过上述方法。

# jquery - 如何在导航列表（twitter bootstrap）中保持活动链接？

> ID：13224855
> 
> 赞同：2
> 
> 时间：2012-11-05T01:30:45.263
> 
> 标签：jquery, symfony, twitter-bootstrap

我想在单击链接时显示一个活动链接（例如，当用户在 link1 上时该链接保持活动状态）（我正在使用 Symfony2 和 Twitter 引导程序）

```
<ul class="nav nav-list">
  <li class="active"> <a href="/link1">Link</a> </li>
  <li class=""> <a href="/link2">Link</a> </li>
  <li class=""> <a href="/link3">Link</a> </li>        
</ul> 
```

**编辑**
菜单的模板在每个页面中作为一个块导入（我使用的是 twig），例如对于 link1.html.twig，我会：
{% include menu.html.twig %}

代码html...

ETC

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T03:26:59.037

这应该工作:)

**jQuery**

```
var x = $(location).attr('href').replace( 'http://yourdomain.com' , ""); // Step 1
$('a[href="' + x + '"]').addClass('active'); // Step 2 
```

**编辑**

解释

（第 1 步）您几乎在 x 变量“http://yourdomain.com/page.html”中捕获了完整的 url 和页面名称，删除了域名“http://yourdomain.com”，留下了“ /page.html'

（第 2 步）匹配具有值“/page.html”的链接并将类“活动”添加到其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T04:00:25.843

我假设在每个页面上都有导航元素。您只需要更改哪个元素具有“活动”类。

**Link1**处于活动状态，因为这是 Link1.html：

```
<ul class="nav nav-list">
  <li class="active"> <a href="/link1">Link</a> </li>
  <li class=""> <a href="/link2">Link</a> </li>
  <li class=""> <a href="/link3">Link</a> </li>        
</ul> 
```

**Link2**处于活动状态，因为这是 Link2.html：

```
<ul class="nav nav-list">
  <li class=""> <a href="/link1">Link</a> </li>
  <li class="active"> <a href="/link2">Link</a> </li>
  <li class=""> <a href="/link3">Link</a> </li>        
</ul> 
```

如果您正在做的事情比仅仅进入新页面更复杂，请更新您的问题并解释，因为您的问题有点模糊，否则上述内容应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T20:44:29.860

一种`POCSS`（Plain Ol' CSS）方法来做到这一点：

在你的`main.twig`文件中

```
<body class="{% block body_class 'home' %}">
<!-- stuff here -->
<ul class="nav nav-list">
  <li class="nav-home"> <a href="/">Link</a>Home</li>
  <li class="nav-about"> <a href="/about">About Us</a> </li>
  <li class="nav-contact"> <a href="/contact">Contact Us</a> </li>        
</ul> 
```

在`about_page.twig`模板中

```
{% block body_class 'page-about' %} 
```

在你的`CSS`文件中

```
.page-about .nav-about, .page-home .nav-home, .page-contact .nav-contact {
  /* Active styles here */
} 
```

这样做的好处是您可以根据 body 类设置在页面上设置其他内容，例如：

```
.page-about a { h1: green; }
.page-home a { h1: blue; }
.page-contact a { h1 : pink; } 
```

# filesystems - 哪个FTP服务器支持大量客户端

> ID：13224861
> 
> 赞同：2
> 
> 时间：2012-11-05T01:32:02.317
> 
> 标签：filesystems, lan, ftp-server

我有一个带局域网的练习室。学生做练习是很常见的。一个学生在电脑上创建了一些文件，我想要： - 他/她看不到其他人的文件。- 他/她可以继续处理他/她的文件。

我认为这适合 FTP 服务器。但是哪个 fpt 服务器可以支持超过 3000 个客户端呢？或者这个问题有替代方案吗？谢谢。

# postgresql - 从一年中的某一天提取日期并将其放在单独的列中

> ID：13224863
> 
> 赞同：2
> 
> 时间：2012-11-05T01:32:15.017
> 
> 标签：postgresql, datetime

我有`MOD17A1.A2002047.h20v09.058.2007117021342.hdf`存储在我的数据库中的文件。我有一列文件名是这样的（列的名称是`_filename_`）。`2002047`在文件名中表示 2002 年的第 47 天。我必须将日期格式的日期提取`2002-02-16`到每个文件名的单独列中。

我想出了这个解决方案：

```
with S as (
   select (select substring(filename from 10 for 4) || (select hiph)
          || (select substring(filename from 14 for 3))) as D
  ,mytable.rid as s_rid from mytable)
update mytable
set date_column = (select (to_date(d , 'IYYY-IDDD')')::date)
from S
where id=s_id 
```

这个解决方案的唯一问题是我需要一个`_hiph_`所有值都是`'-'`. 有没有办法在没有此`_hiph_`列的情况下在 postgresql 中运行此命令？或者任何替代解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:55:53.523

在解开这个..怪物之后，我能够简化它..有点..

```
UPDATE mytable
SET    date_column = to_date(substr(filename, 10, 7), 'IYYYIDDD'); 
```

严重地。

这将更新表中的*所有*行。

`hiph`- 显然`-`不需要连字符 ( )。只需在`to_date()`.

正如所评论的，这会根据 ISO 格式为您的示例生成日期“2002-02-15”。
如果天数从*1 月 1*日开始，请改用该模式`'YYYYDDD'`。
[更多关于手册中的内容。](http://www.postgresql.org/docs/current/interactive/functions-formatting.html#FUNCTIONS-FORMATTING-DATETIME-TABLE)

# vb6 - VB6/MS 使用保存的记录访问异常行为

> ID：13224865
> 
> 赞同：1
> 
> 时间：2012-11-05T01:33:06.623
> 
> 标签：vb6

我有一个 VB6 应用程序，它链接到一个 MS Access DB。数据输入屏幕上的所有记录都是使用 ADO/SQL 写入或读取的。

在一个用户站点（使用 Win 7 - 他的 UAC 设置为最高安全性，因此一开始，读取/写入错误！此外，应用程序和数据（子文件夹）文件夹设置为只读。所以一次我通过将“所有用户”的安全更改为 FULL CONTROL 来纠正所有这些问题，记录已写入数据库。但是，当我直接从 MS Access 打开 MDB 时，我无法在 3 个表中的任何一个表中看到任何记录客户端从前端输入数据。

所以 1\. 要么 MS Access 隐藏表中包含数据和显示的行和空白表，要么 2\. 在 Data 子文件夹中有一个隐藏的 MDB 副本（当程序检查 MDB 文件的可用性时）启动，如果不可用，它会发布消息框错误

有没有人见过这种行为，如果它是#2，我如何在 Win 7 中显示所有文件 - 请记住，MDB 不是操作系统文件，因此默认情况下不应隐藏。或者这是一些 AV（赛门铁克）活动吗？

请参阅 Y 2004 中的此链接，这与我的问题完全相同 - 但没有答案： [http ://www.pcreview.co.uk/forums/hidden-records-t1086918.html](http://www.pcreview.co.uk/forums/hidden-records-t1086918.html)

感谢任何人可以摆脱的任何帮助

问候方兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:34:11.047

这听起来像是一个设计不当的应用程序，它将可写数据（此处为 MDB 文件）放在受保护的文件夹（“程序文件”）中，并且在没有应用程序清单说明它是“Vista 感知”的情况下运行。如果您这样做，Windows 将尝试为程序安装一组标准的 appcompat shim，在这种情况下，文件虚拟化 shim 很可能正在工作。

这会导致每个用户在其虚拟存储文件夹中创建原始数据的私有副本。这些私人副本是更新的内容。

相反，正确的清单会导致此安全违规的致命运行时错误，从而更快地了解做错了什么，并且通常会导致更快的解决方案。

诸如 INI 文件、MDB 文件和其他必须更新并可供系统任何用户使用的应用程序资源之类的内容应放入安装程序在 [CommonAppData] 下创建的特定于应用程序的文件夹中。您的安装程序应在子文件夹上设置所需的安全属性以包含可写文件，以便所有用户都具有所需的访问权限。这里的默认值是“所有者”访问权限，这可能不是您想要的（文件创建者拥有完全访问权限，其他人拥有读取访问权限）。

这适用于任何版本的 Windows，包括带有 IE4 桌面更新的 Windows 95。通过安装程序 MSI 软件包很容易完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:43:57.960

您是否 100% 确定正在写入哪个 MDB 文件？如果您正在编写然后在 VB6 中看到您的记录，但在您打开的 MDB 中看不到它们，则可能是它正在对不同的文件执行此操作。

我建议您使用进程监视器来准确验证 VB6 应用程序正在写入哪个文件。这将允许您进一步排除故障。

[http://technet.microsoft.com/en-us/sysinternals/bb896645](http://technet.microsoft.com/en-us/sysinternals/bb896645)

它可能有点忙，但它可以让您准确确定正在写入哪个文件，而不管您对代码的操作做出任何假设。

# objective-c - 最新的 iOS 用户跟踪

> ID：13224866
> 
> 赞同：1
> 
> 时间：2012-11-05T01:33:07.743
> 
> 标签：objective-c, ios, ios6

> **可能重复：**
> [不推荐使用 UIDevice uniqueIdentifier - 现在该怎么办？](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now)

我是 iOS 开发的新手，对如何跟踪用户感到困惑。我需要为服务器端的某些个性化功能识别独特的设备/用户。

我听说 UDID 不再受支持，那么执行此操作的认可方式是什么？还是我必须让新用户先注册？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T03:52:36.717

```
[UIDevice currentDevice].identifierForVendor 
```

这在给定设备上来自给定供应商的所有应用程序中都是相同的。

# javascript - IE 和 firefox 在 scroll() 上的行为不可预测地更新 location.hash

> ID：13224867
> 
> 赞同：0
> 
> 时间：2012-11-05T01:33:09.400
> 
> 标签：javascript, jquery, internet-explorer-9

我正在尝试通过检查长滚动站点中当前活动的 div 来更新 location.hash。这工作正常是 chrome，但在 Firefox 和 IE 中失败。我已经使用 console.log 进行了测试，并且能够在控制台中看到 id，但是一旦我尝试将其输入到位置哈希中，滚动就会在页面上停止工作，或者无法预测地跳来跳去！

```
$(window).scroll(function () {
$('div').each(function(){
    if (
      $(this).attr('class')=='article' && $(this).offset().top < window.pageYOffset + 10 
    && $(this).offset().top + $(this).height() > window.pageYOffset + 10
    ) {
       window.location.hash = $(this).attr('id')
    }
});

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:45:52.923

首先，您需要了解滚动事件每秒触发多次。将其与您用于搜索 DOM 的方法相结合...查找每个`div`，然后过滤所有那些`div`您想要的，并每秒多次执行此操作...您正在不必要地重载浏览器。

在这个简单的演示中滚动窗口，查看脚本触发的频率；[http://jsfiddle.net/tRx2P/](http://jsfiddle.net/tRx2P/)

如果您要重复在 DOM 中搜索相同的元素，将它们缓存到变量中将大大提高性能。搜索 DOM 比搜索包含元素的缓存变量要昂贵得多

```
/* use jQuery selector that already filters out all the other `div` in page*/
var $articles= $('.article');
/* now use the variable inside your functions*/
$( window).scroll(function(){
    $articles.each(.....
    /* use the same cache principles for "$(this)" to help avoid needless function calls*/
}) 
```

现在真正重要的部分是你应该减少每秒需要检查的次数。在用户仍在滚动时多次更新哈希没有任何好处......并重载浏览器来执行此操作

演示的此修改仅在用户未滚动 300 毫秒时触发代码，这可能会增加到 1/2 秒甚至更多。它通过不断设置超时延迟来做到这一点 [http://jsfiddle.net/tRx2P/2/](http://jsfiddle.net/tRx2P/2/)

您现在应该能够使这些概念适应您拥有的代码

# java - 用 Java 开发的可定制模块化 GUI

> ID：13224868
> 
> 赞同：0
> 
> 时间：2012-11-05T01:33:25.967
> 
> 标签：java, user-interface, customization, modularity

对于我学士学位的最后一个项目，我想开发一个具有完全可定制的 GUI 的即时通讯工具。我希望有一个带有模块化组件的应用程序，可以随意添加和删除，并根据需要在窗口周围移动（有点像在 Visual Studio 2010 中移动组件的方式）。如果有人有任何资源或有用的研究主题，他们可以指出我的方向，这将极大地帮助我在这个项目中站稳脚跟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:45:50.283

[Netbeans 平台](http://netbeans.org/features/platform/)是一个成熟的应用程序框架，用作 Netbeans 编辑器的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:42:14.493

**[SWT](http://www.eclipse.org/swt/)**（用于构建 Eclipse IDE 的 ui 工具包）和**[Eclipse 富客户端平台](http://wiki.eclipse.org/index.php/Rich_Client_Platform)**完全支持可停靠容器 - 这就是您想要使用的工具包！

# r - 将 R interpeter 和 R 作为共享库安装在同一棵树下

> ID：13224871
> 
> 赞同：9
> 
> 时间：2012-11-05T01:34:31.320
> 
> 标签：r, installation, shared-libraries, rpy2

我对如何将 R（通过编译）安装为共享库感到有些困惑。

[此处](http://rpy.sourceforge.net/rpy_faq.html)的说明（[Rpy2](http://rpy.sourceforge.net/rpy2.html)）说我应该执行以下操作：

```
 # <go to the R source directory>
  make distclean
  ./configure --enable-R-shlib
  make
  make install 
```

但第一个`make`( `make distclean`) 将删除同一目录树下任何以前安装的 R（例如`bin`文件夹的内容）。

如果我想为 R 解释器和共享库使用相同的安装怎么办？例如，假设我想使用解释器安装 R 包，然后安装的共享库从 Rpy2 调用 R（和那些包）。

否则，我如何安装 R 包以通过 Rpy2 使用？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T01:52:25.897

```
./configure --enable-R-shlib 
```

除了通常构建的内容（可执行文件、文档等...）之外，还会告诉构建 R 的共享库

还

```
make install 
```

将安装 R（默认为`/usr/local`）。这是您要查找 R 可执行文件的地方。调用`make distclean`只会影响构建目录，不会影响安装的 R。

# django - 在Django中基于名称显示图像的正确有效方法是什么

> ID：13224875
> 
> 赞同：0
> 
> 时间：2012-11-05T01:36:17.823
> 
> 标签：django, django-templates, django-views

我对 Django 真的很陌生。我很难根据名称和 url 模式显示图像。

所以基本上 url 由其中的几个变量组成，我希望能够使用它来获取以这些变量命名的特定图像。

**例子：**

```
localhost:8080/farm/chicken 
```

这将在我的*../static/images/*文件夹中获取图像并获取：

```
farm_chicken.jpg 
```

**另一个例子：**

```
localhost:8080/zoo/alligator 
```

将得到：

```
zoo_alligator.jpg 
```

我可以获取 url 参数。那么，我是否应该在我的`views.py`文件中创建这些图像名称并将名称（zoo_alligator）传递到一个上下文中，以便稍后由模板检索？这是正确的方法吗？

谢谢大家的建议！我感谢所有的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:40:56.197

一般来说，你实际上不会做那样的事情。您应该做的是将图像作为上下文变量从您的视图函数发送到您的模板。

如果你是使用你的url节点来决定显示哪张图片，那么在你对应的视图函数中，你实际上是在使用“alligator”或者“chicken”来加载对应的`Animal`class。

一旦实例化了正确的`animal`对象，您可以将此动物对象发送到您的 django 模板并使用类似于以下的片段加载到图像中：-

像这样：-

```
{% if animal.get_latest_medium_url %}
    <img id="animal_image" class="img-rounded left" src="/media/{{ animal_image }}" />
{% endif %} 
```

这`get_latest_medium_url`是 my 中的一种方法，`Merchant class`它在那里计算 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T02:43:05.790

> 那么，我是否应该在我的 views.py 文件中创建这些图像名称并将名称（zoo_alligator）传递到稍后由模板检索的上下文中？这是正确的方法吗？

当然，这是一种方法。像这样的东西：

```
(r'show/(?P<in_path>.*)$','someapp.image_view') 
```

然后在`image_view`：

```
def image_view(request,in_path):
    img = in_path.replace('/','_')+'.jpg'
    return render(request,'some_template.html',{'path':img}) 
```

但是，由于您的视图非常简单 - 您可以将路径从 直接传递到模板`urls.py`，使用[`direct_to_template`](https://docs.djangoproject.com/en/1.4/ref/generic-views/#django-views-generic-simple-direct-to-template)：

```
from django.views.generic.simple import direct_to_template

(r'show/(?P<in_path>.*)$',direct_to_template,{'template':'some_template.html'}) 
```

在`some_template.html`：

```
<img src="{{ params.in_path }}"> 
```

问题是您不会完成字符串格式化，因为默认过滤器没有“替换”功能。您可以轻松编写自定义过滤器：

```
@register.filter
@stringfilter
def format_path(the_path):
    return the_path.replace('/','_')+'.jpg' 
```

然后修改模板：

```
<img src="{{ params.in_path|format_path }}"> 
```

您应该阅读有关[编写自定义过滤器和标签](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/)的文档以获取更多详细信息，包括存储过滤器代码的位置以确保 django 可以找到它。

# php - PHP - 在客户端限制发布数据失败

> ID：13224877
> 
> 赞同：2
> 
> 时间：2012-11-05T01:36:36.667
> 
> 标签：php, javascript, validation

全部。我想分享我的代码中发生的一些问题。我有一个使用 php 发布并保存到 mysql 数据库的 HTML 表单。如果数据总数不是100，我会给出一个验证表，它不能发布。我使用 javascript 在客户端或 HTML 中执行此限制。像这样的东西：

```
$("#submit").click(function(event) {

                    var total_I     = $("#total_I").val();
                    var total_III   = $("#total_III").val();
                    var total       = 0;
                    /* stop form from submitting normally */
                   if($("#eval-form").validate().form())
                   { 
```

当我们做一些测试计划时，它工作得很好。但是当这个网站启动并一次访问大约500个用户时，有一些数据少于100个数据保存在数据库中。我的问题是，如何克服这个问题？有什么方法可以更好地限制这种情况吗？首先，感谢您的回答

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:40:15.263

如果我要写一本关于网络安全的书，标题应该是**“永远不要相信客户”**。

您并不能真正控制客户端，因此如果关闭了 javascript 或有人将自定义查询放在一起，或者如果客户端的行为不正确，您可能会得到错误的数据。

从用户界面的角度来看，客户端验证是一个极好的工具。它可以更早地发现错误，并且在正确实施时可以减少用户的挫败感。

作为一种安全或策略执行措施，客户端验证是无用的。您必须检查您在服务器端实际收到的数据，即使这意味着重复在客户端上完成的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:41:21.160

当您使用 Jquery 进行验证时，客户端最好在服务器端也替换它。

因此，在 PHP 中的脚本（我假设它构成您的标签）上，您可以插入数据的第二次验证。

这将确保数据遵循您的验证。

# r - 调用基于参数汇总数据框并应用于数据框和nls的函数

> ID：13224883
> 
> 赞同：2
> 
> 时间：2012-11-05T01:37:57.350
> 
> 标签：r, function, dataframe, vectorization

我正在处理天气数据和水电费账单，并正在尝试估计非线性回归模型。

我想出了一个问题。我调用的用于计算天气统计数据的函数，加热和冷却度天数，（HDD 和 CDD）不能应用于数据帧，nls 不能使用它。显然，我遗漏了一些关于函数参数的非常明显的东西。

有人可以指出我在下面的 HDD 和 CDD 功能哪里出了问题吗？

以下是一些生成虚假天气和计费数据的代码问题的简单示例。

```
# Generate Fake Weather Data
CZ<-c(1,2)
Date<-c('2001-01-01','2001-01-02','2001-01-03','2001-01-04')
Weather<-expand.grid(CZ,Date)
names(Weather)<-c("CZ","Date")
Weather$AvgTemp<-rnorm(8,mean= 60,sd=20)

#Generate Fake Billing Data
ID<-as.numeric(1:10)
CZ<-c(1,2)
StartDate<-'2001-01-01'
EndDate<-'2001-02-01'
FakeBilling<-data.frame(cbind(ID,CZ,StartDate,EndDate))
FakeBilling$KWH<-rnorm(10,mean=1000, sd=200)

#Heating and cooling degree functions
HDD<- function(b,CZ,StartDate,EndDate) {
    Temps<-Weather$AvgTemp[Weather$CZ==CZ&as.Date(Weather$Date) >=as.Date(StartDate) &     as.Date(Weather$Date) < as.Date(EndDate)];

    sum((b-Temps)/(1+exp(-5*(b-Temps))))
}

CDD <- function(b,CZ,StartDate,EndDate) {
Temps<- Weather$AvgTemp[as.character(Weather$CZ)==as.character(CZ) &     as.Date(Weather$Date) >=as.Date(StartDate)& as.Date(Weather$Date) < as.Date(EndDate)]

    sum((Temps-b)/(1+exp(-5*(Temps-b))))
}

#these work
HDD(60,1,'2001-01-01','2001-02-01')
# [1] 29.34333
CDD(60,1,'2001-01-01','2001-02-01')
# [1] 53.49393

# This does not. Lots of warnings about length
HDD(60,FakeBilling$CZ,FakeBilling$StartDate,FakeBilling$EndDate)
# [1] NA
# Warning messages:
#   1: In is.na(e1) | is.na(e2) :
#   longer object length is not a multiple of shorter object length
# 2: In `==.default`(Weather$CZ, CZ) :
#   longer object length is not a multiple of shorter object length
# 3: In `>=.default`(as.Date(Weather$Date), as.Date(StartDate)) :
#   longer object length is not a multiple of shorter object length
# 4: In `<.default`(as.Date(Weather$Date), as.Date(EndDate)) :
#   longer object length is not a multiple of shorter object length

# Would like to run this but get similar error.
nls(KWH~load + heatload*(HDD(base,CZ,StartDate,EndDate)) ,start=c(load=200,     heatload=.1,base=65), data=FakeBilling, na.action=na.omit)
# Error in numericDeriv(form[[3L]], names(ind), env) : 
#   Missing value or an infinity produced when evaluating the model
# In addition: Warning messages:
#   1: In is.na(e1) | is.na(e2) :
#   longer object length is not a multiple of shorter object length
# 2: In `==.default`(Weather$CZ, CZ) :
#   longer object length is not a multiple of shorter object length
# 3: In `>=.default`(as.Date(Weather$Date), as.Date(StartDate)) :
#   longer object length is not a multiple of shorter object length
# 4: In `<.default`(as.Date(Weather$Date), as.Date(EndDate)) :
#   longer object length is not a multiple of shorter object length
# 5: In is.na(e1) | is.na(e2) :
#   longer object length is not a multiple of shorter object length
# 6: In `==.default`(Weather$CZ, CZ) :
#   longer object length is not a multiple of shorter object length
# 7: In `>=.default`(as.Date(Weather$Date), as.Date(StartDate)) :
#   longer object length is not a multiple of shorter object length
# 8: In `<.default`(as.Date(Weather$Date), as.Date(EndDate)) :
#   longer object length is not a multiple of shorter object length 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:16:58.820

您的函数未设置为矢量化函数。您可以使用`mapply()`.

```
with(FakeBilling, mapply(HDD, b = 60, CZ = CZ, StartDate = StartDate, EndDate = EndDate))
#----
[1] 29.33481 13.39434 29.33481 13.39434 29.33481 13.39434 29.33481 13.39434 29.33481 13.39434 
```

还有`Vectorize()`一个给出等效结果的函数：

```
HDDvec <- Vectorize(HDD)
HDDvec(60,FakeBilling$CZ,FakeBilling$StartDate,FakeBilling$EndDate)
#----
[1] 29.33481 13.39434 29.33481 13.39434 29.33481 13.39434 29.33481 13.39434 29.33481 13.39434 
```

# sql - 为什么左连接返回的结果与 NOT IN 不同？

> ID：13224886
> 
> 赞同：0
> 
> 时间：2012-11-05T01:38:31.207
> 
> 标签：sql, sql-server, sql-server-2008

以下查询的行为有些奇怪：

```
SELECT #batches.OutTo, PO_Number, CONVERT(varbinary, #batches.OutTo) , convert     (varbinary, PO_Number), 
    CASE WHEN convert(varbinary, #batches.OutTo) NOT IN (SELECT convert(varbinary,    PO_Number) FROM #pos) 
         THEN 'NOT IN' ELSE 'IN' END
FROM #batches LEFT JOIN #pos ON 
    convert(varbinary, #batches.OutTo) = CONVERT(varbinary, PO_Number)
WHERE #batches.OutTo IS NOT NULL
GROUP BY #batches.OutTo, #pos.PO_Number

OutTo       PO_Number   (No column name)    (No column name)    (No column name)
311117      NULL        0x333131313137      NULL                    IN
311130      311130      0x333131313330      0x333131313330          IN
311259      NULL        0x333131323539      NULL                    IN
L001934     L001934     0x4C303031393334    0x4C303031393334        IN
L001988     NULL        0x4C303031393838    NULL                    IN
L002002     NULL        0x4C303032303032    NULL                    IN 
```

正如你所看到的，左连接行为正确，但 NOT IN 没有，返回 IN 的值应该是 NOT IN。为什么是这样？它是一个错误，还是我不知道的 SQL 的一个特性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:46:37.490

试试这个（你不需要子查询）：

```
SELECT #batches.OutTo, PO_Number, CONVERT(varbinary(35), #batches.OutTo) , 
    convert     (varbinary(35), PO_Number), 
    CASE WHEN convert(varbinary(35), PO_Number) IS NULL THEN 'NOT IN' 
         ELSE 'IN' END

FROM #batches 
LEFT JOIN #pos ON 
    convert(varbinary(35), #batches.OutTo) = CONVERT(varbinary(35), PO_Number)
WHERE #batches.OutTo IS NOT NULL
GROUP BY #batches.OutTo, #pos.PO_Number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:44:50.140

您正在使用`SELECT convert(varbinary, PO_Number) FROM #pos`没有任何过滤条件的子查询，我认为这会导致附加值并使其返回，`IN`因为值可能存在于列表中。

要解决此问题，我认为您还需要在子查询中添加适当的 where 子句，例如：

```
 SELECT convert(varbinary,    PO_Number) FROM #pos 
                          WHERE #batches.OutTo IS NOT NULL 
```

# c++ - C++ 中的堆栈溢出修正

> ID：13224889
> 
> 赞同：0
> 
> 时间：2012-11-05T01:38:59.630
> 
> 标签：c++, stack-overflow

我在一本书中读到下面的代码，它说这很容易受到堆栈溢出的影响。虽然使用了 fgets() ，但我无法理解，为什么它容易受到攻击？

我的理解是，使用 fgets() 而不是 gets() 通常可以通过在末尾放置一个 null 来帮助我们摆脱缓冲区溢出。我错过了什么吗？应该用什么代替 fgets() 来纠正堆栈溢出？

```
void getinp(char *inp, int siz)
{
   puts("Input value: ");
   fgets(inp, siz, stdin);
   printf("buffer3 getinp read %s\n", inp);
}

void display(char * val)
{
   char tmp[16];
   sprintf(tmp, "read val: %s\n", val);
   puts(tmp);
}

int main(int argc, char *argv[])
{
   char buf[16];
   getinp(buf, sizeof(buf));
   display(buf);
   printf("buffer3 done\n");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:43:57.363

In`display` `tmp`被声明为 16 `char`s 长，但你正在写（使用`sprintf`）不仅`val`（保证为 16 个字符或更少），而且还有`"read val: "`final `\n`）。

这意味着如果用户插入超过 16-11=5 个字符，您的`display`.

一种解决方案可能是声明`buf`in`display`足够大以存储`val`额外的文本，尽管在现实世界中您只需写入`stdout`using `printf`（没有中间缓冲区）。

此外，通常当您有 a`sprintf`并且存在缓冲区溢出的一些潜在风险时，您会`snprintf`使用它（实际上，我*总是*使用它）；`snprintf`，而不是溢出缓冲区，如果输出太长，则截断输出，并返回如果输出缓冲区足够大，将写入的字符数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:42:44.053

在显示中，无法确定 val + 12 个字节是否适合 16 个字符的缓冲区。

# matlab - 如何向量化这个for循环matlab

> ID：13224890
> 
> 赞同：3
> 
> 时间：2012-11-05T01:39:48.743
> 
> 标签：matlab, loops, for-loop, vectorization

```
divisible = 0;
low = input('Start Value: ');
high = input('End Value: ');
divisor = input('Divisor: ');
mask = mod([low:high],divisor);

  for index = low:high
     if mask(index) == 0
        divisible = divisible + 1;
     end
  end 
```

这个想法是计算没有余数的次数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:45:05.337

试试这条线而不是循环

```
 divisible = sum(mask(low:high)==0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T01:44:26.630

这是一个单行解决方案：

```
%#Set the inputs
LB = 3;
UB = 28;
Divisor = 3;

%#A one-line solution
Count = sum(mod((LB:UB)', Divisor) == 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:56:27.793

首先，您的例程会在任何时候给您一个错误`low > 1`，因为 mask 将从 1 开始并且具有 high - low + 1 个元素（并且当要求 mask(high) 时，您会得到错误）。

其次，你自己几乎得到了答案：

`mask = mod([low:high],divisor);`

将是一个包含 0 的向量，表示相应的值可以被除数整除。如果你这样做`mask == 0`，你将得到一个 1 和 0（真或假）的向量。

下一步是添加所有这些 1 和 0：

`sum(mask==0)`

所以你消除了 for...end 循环

# c - C 语义：“col -= size--”在表达式中具有 ++ 或 -- 操作

> ID：13224893
> 
> 赞同：1
> 
> 时间：2012-11-05T01:40:08.613
> 
> 标签：c, syntax

真正的简短和简单：

说`col = 10`，`size = 8`。然后执行以下操作：

```
col -= size--; 
```

那么在对 col 进行减法之前，size 是否会被减去 7（所以 col = 3）？还是 col = 2？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:43:21.970

`size--`产生 的先前值`size`，因此这等效于：

```
col -= size;
-- size; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:43:09.020

`size--`递减大小并返回原始值（`--size`将递减并返回新值）。

右边的表达式在左边之前计算，所以右边的值会从 中减去`col`。

如果`col = 10`和`size = 8`，那么在 之后`col -= size--`，`size`将等于 7 并且`col`等于 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T01:43:22.407

当`++`or`--`出现在操作数之后时，先返回值，然后递增/递减。如果之前出现，则相反。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T01:48:09.017

答案应该是`col = 8`。如何？

`col -= size--;`是这样解释的：

在编译器的头脑中：

编译器：嗯，`size--`嗯？好吧好吧，什么`col`？`10`? 而且`size`是.. `8`？Fine 设置`col`为`2`经过该操作然后递减`size`。

如果是：`col -= --size;`它将是：

编译器：嗯，`--size`嗯？好吧好吧，什么`size`？`8`? 将其设置为`7`.. 并且`col`是`10`? 所以减法后的答案是`col = 3`。所以编译器认为它是老板。

# javascript - modal.confirm 在销售队伍中？

> ID：13224898
> 
> 赞同：0
> 
> 时间：2012-11-05T01:40:23.233
> 
> 标签：javascript, jquery, salesforce

```
if ((Modal.confirm && Modal.confirm('some text here')) || (!Modal.confirm && window.confirm('same text here'))) navigateToUrl('some link here','DETAIL','submit'); 
```

我在按钮的 onClick 条件上有上面的代码。只是想知道术语 modal.confirm 和 window.confirm 是什么意思？另外，在弹出窗口中单击“确定”如何将我导航到该链接，因为在上述情况下没有提及“确定”？

谢谢山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-27T11:04:11.933

window.confirm() 是基本的（确定，取消）警报，如果您想抓住“确定”按钮，您必须执行以下操作：

```
var result = window.confirm('You sure ?');
    if (result) {
        // Ok case
    } else {
        // Cancel case  
} 
```

[https://developer.mozilla.org/en-US/docs/Web/API/Window.confirm](https://developer.mozilla.org/en-US/docs/Web/API/Window.confirm)

# javascript - 用js验证表单

> ID：13224899
> 
> 赞同：1
> 
> 时间：2012-11-05T01:40:37.150
> 
> 标签：javascript, validation

嗨，我让我的脚本正常工作，然后我通过 w3 验证器运行它并更改了我告诉我的错误，现在它在第一个邮政编码处停止验证，我已经塞满了，不记得发生了什么变化，bigg 教训一次做一件事，我一直在拔头发试图让它再次工作，但不知道是否有任何 1 可以花时间看它，我将不胜感激，谢谢

```
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
        <title>Joes Fruit and Vegetable Store</title>
        <script>
            //calender dropdown menu 
            var monthtext = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];

            function populatedropdown(dayfield, monthfield, yearfield) {
                var today = new Date()
                var dayfield = document.getElementById(dayfield)
                var monthfield = document.getElementById(monthfield)
                var yearfield = document.getElementById(yearfield)
                for (var i = 0; i < 31; i++)
                dayfield.options[i] = new Option(i, i + 1)
                dayfield.options[today.getDate()] = new Option(today.getDate(), today.getDate(), true, true) //select today's day
                for (var m = 0; m < 12; m++)
                monthfield.options[m] = new Option(monthtext[m], monthtext[m])
                monthfield.options[today.getMonth()] = new Option(monthtext[today.getMonth()], monthtext[today.getMonth()], true, true) //select today's month
                var thisyear = today.getFullYear()
                for (var y = 0; y < 20; y++) {
                    yearfield.options[y] = new Option(thisyear, thisyear)
                    thisyear += 1
                }
                yearfield.options[0] = new Option(today.getFullYear(), today.getFullYear(), true, true) //select today's year
            }
            // function validate
            function validate_form() {
                valid = true;
                // validate name
                /*   if ( document.input.name.value == "" )
        {
                alert ( "Please enter your name" );
                valid = false;
        }
                                                                // validate address
                if ( document.input.address.value == "" )
        {
                alert ( "Please enter your address address" );
                valid = false;
        }                                                       
                                                                // validate suburb town
                if ( document.input.town.value == "" )
        {
                alert ( "Please enter your Suburb or town" );
                valid = false;
        } 

                                                            // validate postcode        

        var y = document.getElementById("postcode").value;
       if(isNaN(y)||y.indexOf(" ")!=-1)
       {
          alert("Postcode must be in numbers.");
          document.getElementById("postcode").focus();
          return false;
       }

       if (y.length>4 || y.length<4)
       {
            alert("Postcode should be 4 digit");
            document.getElementById("postcode").focus();
            return false;
       }  
        */
                // validate home phone
                var y = document.getElementById('hphone').value;
                if (isNaN(y) || y.indexOf(" ") != -1) {
                    alert("Home Phone number must be in numbers.");
                    document.getElementById('hphone').focus();
                    return false;
                }
                if (y.length > 10 || y.length < 10) {
                    alert("Home Phone number should be 10 digit");
                    document.getElementById('hphone').focus();
                    return false;
                }
                // validate work phone
                var y = document.getElementById('wphone').value;
                if (isNaN(y) || y.indexOf(" ") != -1) {
                    alert("work Phone number must be in numbers.");
                    document.getElementById('wphone').focus();
                    return false;
                }
                if (y.length > 10 || y.length < 10) {
                    alert("Work Phone number should be 10 digit");
                    document.getElementById('wphone').focus();
                    return false;
                }
                // validate fax
                var y = document.getElementById('fax').value;
                if (isNaN(y) || y.indexOf(" ") != -1) {
                    alert("Fax number must be in numbers.");
                    document.getElementById('fax').focus();
                    return false;
                }
                if (y.length > 10 || y.length < 10) {
                    alert("Fax Phone number should be 10 digit");
                    document.getElementById('fax').focus();
                    return false;
                }
                // validate email   
                {
                    var x = document.forms["input"]["email"].value;
                    var atpos = x.indexOf("@");
                    var dotpos = x.lastIndexOf(".");
                    if (atpos < 1 || dotpos < atpos + 2 || dotpos + 2 >= x.length) {
                        alert("Not a valid e-mail address");
                        return false;
                    }
                }
                // validate radio buttons
                var o = document.getElementById('rad1');
                var t = document.getElementById('rad2');
                if ((o.checked == false) && (t.checked == true)) {
                    // validate alternative address
                    if (document.input.street.value == "") {
                        alert("Please enter alternative address address");
                        valid = false;
                    }
                    // validate suburb town
                    if (document.input.suburb.value == "") {
                        alert("Please enter alternative Suburb or town");
                        valid = false;
                    }
                } // validate postcode  
                var y = document.getElementById('postcode2').value;
                if (isNaN(y) || y.indexOf(" ") != -1) {
                    alert("Postcode must be in numbers.");
                    document.getElementById('postcode2').focus();
                    return false;
                }
                if (y.length > 4 || y.length < 4) {
                    alert("Alternative Postcode should be 4 digit");
                    document.getElementById('postcode2').focus();
                    return false;
                }
                // validate message box
                var o = document.getElementById('card');
                if ((o.checked == true)) {
                    if (document.input.message.value == "") {
                        alert("Please enter message");
                        valid = false;
                    }
                    return valid;
                }
            }
        </script>
    </head>

    <body>  <b>Order form for Joe's Fruit Shop</B><br><br>

<b> * means you must fill in the details.</B><br><br>
<b>Your details:</b>
        <br>
        <br>
        <!-- Beggining of Form -->
        <form name="input" action="cal2.html" onsubmit="validate_form ()">
            <!--name form -->* Name:
            <input type="text" name="name" onclick="this.value='';" value="Enter your name with first">
            <br>
            <br>
            <!-- Address form -->* Address:
            <input type="text" name="address" onclick="this.value='';" value="Enter your street address">
            <br>
            <br>
            <!-- Suburb state dropdown form-->* Suburb or Town:
            <input type="text" name="town" onclick="this.value='';"
            value="suburb">State:
            <select name="state">
                <option value="NSW">NSW</option>
                <option selected="selected" value="QLD">QLD</option>
                <option value="SA">SA</option>
                <option value="WA">WA</option>
                <option value="TAS">TAS</option>
                <option value="VIC">VIC</option>
                <option value="NT">NT</option>
                <option value="ACT">ACT</option>
            </select>
            <!-- post code form -->* Postcode:
            <input type=text name="postcode" onclick="this.value='';" value="****">
            <br>
            <br>
            <!-- Home phone form-->* Phone:
            <input type=text name="hphone" onclick="this.value='';" value="x-xxxx-xxx">
            <!-- work phone form -->Work phone
            <input type=text name="wphone" onclick="this.value='';" value="x-xxxx-xxx">
            <br>
            <br>
            <!-- Fax form-->*Fax:
            <input type=text name="fax" onclick="this.value='';" value="0x-xxxx-xxx">
            <!-- Email form-->Email address:
            <input type=text name="email" onclick="this.value='';" onsubmit="return validateForm();"
            value="Enter your current email">
            <br>
            <br>
            <br>
            <!-- credit card--> <b>Credit card details:</b>
            <br>
            <br>* Type:
            <select name="credit card">
                <option selected="selected" value="AMEX">Amex</option>
                <option value="Visa">Visa</option>
                <option value="Mastercard">Mastercard</option>
            </select>*Expiry date:
            <select name="expiration_month">
                <option value="">Choose...</option>
                <option selected="selected" value="1">January</option>
                <option value="2">Febuary</option>
                <option value="3">March</option>
                <option value="4">April</option>
                <option value="5">May</option>
                <option value="6">June</option>
                <option value="7">July</option>
                <option value="8">August</option>
                <option value="9">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
            </select>
            <select name="expiration_year">
                <option value="">Choose...</option>
                <option selected="selected" value="2012">2012</option>
                <option value="2013">2013</option>
                <option value="2014">2014</option>
                <option value="2015">2015</option>
                <option value="2016">2016</option>
                <option value="2017">2017</option>
                <option value="2018">2018</option>
                <option value="2019">2019</option>
                <option value="2020">2020</option>
            </select>
            <br>
            <br>
             <B>Purchase details</B><br><br>                                    <!-- Product dropdown form-->
* Product:
<select name="product">
<option value="carrot">Bag of carrots</option>
<option value="zucchini">Zucchini</option>
<option value="cabbage">Cabbage</option>
<option value="grapes">Grapes</option>
<option value="tomatoes">TAS</option>
<option value="apples">Apples</option>
<option value="banana">banana</option>
<option selected="selected" value="cucumber">Cucumber</option>
</select>
                                                                <!-- Quantity dropdown form-->
Quantity:
<select name="quantity">
<option selected="selected" value="1">1</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
<option value="8">8</option>
</select>

<br><br><br>
* <B>Deliver to:</B>
<br><br>
                                                                    <!-- Address Radio buttons-->
<input type='radio' id="rad1" name='radio' value='Home address'  checked="checked">Home Address<br>
<input type='radio' id="rad2" name='radio' value='Other address'/>Other Address<br><br>

                                                                    <!--other address-->

                                                                    <!-- street form-->
Street <input type=text name="street" onclick="this.value='';" value="Street"><br><br>
                                                                    <!-- Suburb form-->
Suburb <input type=text name="suburb" onclick="this.value='';" value="Suburb or town"><br><br>
                                                                    <!-- State dropdown form-->
State <select name="state">
<option value="NSW">NSW</option>
<option selected="selected" value="QLD">QLD</option>
<option value="SA">SA</option>
<option value="WA">WA</option>
<option value="TAS">TAS</option>
<option value="VIC">VIC</option>
<option value="NT">NT</option>
<option value="ACT">ACT</option>
</select><br><br>
                                                                <!-- post code form -->
Postcode:<input type=text name="postcode2" onclick="this.value='';" value="****"><br><br><br>

* Date delivery required:
                                                                    <!-- Calender drop down menu-->

<select id="daydropdown">
</select> 
<select id="monthdropdown">
</select> 
<select id="yeardropdown">
</select> 

<script type="text/javascript">

//populatedropdown(id_of_day_select, id_of_month_select, id_of_year_select)
window.onload=function(){
populatedropdown("daydropdown", "monthdropdown", "yeardropdown")
}
</script>

                                                                    <br><br>
                                                                    <!-- include a card option-->

Include a card: <input type="checkbox" name="card" value="Yes">Yes<br><br>
Personal message on card: <textarea rows="10" name="message" cols="30" onclick="this.value='';" >Enter your personal message here</textarea><br><br>
Click on <b>Submit</b> when done; click on <b> Clear form</b> to reset.
            <!-- submit button-->
            <input type="submit" value="Submit">
            <!-- reset button-->
            <input type="reset" value="Reset">
        </form>
    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:52:57.330

当您尝试通过 Id 获取元素并检查 null 的 value 属性时，您的脚本失败了。

```
 var y = document.getElementById('hphone').value; 
```

这会引发异常并退出，然后表单提交

给你的元素 ID 以匹配 name 属性，它应该没问题

```
 <input type=text name="hphone" id="hphone" onclick="this.value='';" value="x-xxxx-xxx"> 
```

将您的 onsubmit 属性更改为以下以取消提交验证错误

```
<form name="input" action="cal2.html" onsubmit="return validate_form ()"> 
```

要检查默认值，您可以添加数据属性并交叉检查验证中的值。

```
* Phone: <input type=text name="hphone" id="hphone" onclick="this.value='';" data-default="x-xxxx-xxx" value="x-xxxx-xxx"> 

var element = document.getElementById('hphone');
var y = element.value;
var defValue = element.attributes["data-default"].value;

if(isNaN(y)||y.indexOf(" ")!=-1|| y === defValue )
{
    alert("Home Phone number must be in numbers.");
    document.getElementById('hphone').focus();
    return false;
} 
```

如果您的目标是兼容 HTML5 的浏览器，则可以使用 placeholder 属性。 [http://www.w3schools.com/html5/att_input_placeholder.asp](http://www.w3schools.com/html5/att_input_placeholder.asp)

# javascript - 使用 javascript 和 onchange 事件检查表单中的名称字段是否包含数字

> ID：13224904
> 
> 赞同：2
> 
> 时间：2012-11-05T01:41:43.013
> 
> 标签：javascript

我是菜鸟的定义，我不知道我在做什么。我必须使用 javascript 创建一个函数来对表单中的“名称”字段执行验证。检查将查看是否输入了任何内容或名称是否包含数字。最重要的是，我必须使用 onchange 事件。我尝试搜索，我得到了答案，我看到答案中有 jquery 代码，我不能在这个问题中使用它。我不知道该怎么做，有人可以帮忙吗？这是我正在使用的表格

```
 <form method="get">
        <label for="name">Name</label>
        <input type="text" id="name" placeholder="Name" onChange="" >
        <br>
        <label for="age">Age</label>
        <input type="age" id="age" placeholder="Age">
        <br>
        <label for="location">Location</label>
        <input type="location" id="location" placeholder="Location">
        <br>
        <button type="submit">Submit</button>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:59:44.457

这是一个带有输入参数的 javascript 函数。它将使用正则表达式检查输入值中是否包含任何数字字符。如果是这样，它会发送一个警报，然后删除所有数字字符（再次使用正则表达式）。然后它将检查输入值是否为空字符串，如果是则发送警报。

```
function checkName(input) {

    // Check if input contains a digit
    if (/\d/.test(input.value)) {
        alert('Name contains a number');

        // Remove all digit characters
        input.value = input.value.replace(/\d/gi, '');
    }

    // Check if input is empty
    if (input.value === '') {
        alert('Name is empty');
    }

    return true;
}​ 
```

将您的函数调用添加到输入的 onChange 属性，传入*此*对象作为函数的变量引用：

```
 <input type="text" id="name" placeholder="Name" onChange="checkName(this)" > 
```

这是一个演示此工作的演示：http:
[//jsfiddle.net/PMKsS/1/](http://jsfiddle.net/PMKsS/1/)

有什么要注意的。此函数只会在名称输入值更改时调用，因为这就是 onChange 调用将执行的操作。因此，表单提交时不会检查名称输入是否为空。

此外，这值得一读：[为什​​么在 HTML 中使用 onClick() 是一种不好的做法？](https://stackoverflow.com/questions/5871640/why-is-using-onclick-in-html-a-bad-practice). 它解释了如何通过 javascript 而不是通过属性添加 javascript 事件侦听器，以及为什么采用其他方式不是很好。虽然它没有提供在纯 javascript 中执行此操作的方法。

# c# - 在 C# 中从 Observable 集合中搜索和删除内容？

> ID：13224907
> 
> 赞同：3
> 
> 时间：2012-11-05T01:42:08.100
> 
> 标签：c#, foreach

我在这里遇到了麻烦。我有一个可观察的集合，如果它符合特定标准，我想删除其中的一些东西。

这是代码：

```
foreach (Record record in SwearJarController.Records)
        {
            if (record.Word == "Hi")
            {

                SwearJarController.Records.Remove(record);
                Datastore.DB.Records.DeleteOnSubmit(record);

            }
        } 
```

Records 是集合的名称，record 是类。显然，它在“foreach”部分感到困惑。

我应该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T01:46:41.327

您不能修改正在枚举的集合。您必须在 foreach 上执行`ToArray()`or ：`ToList()`

```
foreach (Record record in SwearJarController.Records.ToArray())
{
    if (record.Word == "Hi")
    {
            SwearJarController.Records.Remove(record);
            Datastore.DB.Records.DeleteOnSubmit(record);
    }
} 
```

* * *

清理版：

```
foreach (Record record in SwearJarController.Records
                          .Where(x => String.Equals(x.Word, "Hi")
                          .ToArray())
{
    SwearJarController.Records.Remove(record);
    Datastore.DB.Records.DeleteOnSubmit(record);
} 
```

注意：您也应该真正使用`String.Equals(...)`和使用`StringComparison`枚举。我不确定您的比较是否意味着区分大小写和/或序数/当前文化/不变文化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:45:36.323

在处理该集合时，您无法对其进行修改。您可以运行一个 for 循环，计数从 Records.Count 下降到 0 并以这种方式删除。那应该工作

例子：

```
for(int x = SwearJarController.Records.Count - 1 ; x >= 0; x--)
{
    Record record = SwearJarController.Records[x];
    if(record.Word == "Hi")
    {
        SwearJarController.Records.Remove(record);
        Datastore.DB.Records.DeleteOnSubmit(record);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:54:02.447

正如其他人已经说过的那样，您无法在迭代时修改集合。

干净地删除记录的最佳选择是执行以下操作：

```
foreach (var record in SwearJarController.Records
    .Where(r => r.Word == "Hi")
    .ToArray())
{
    SwearJarController.Records.Remove(record);
    Datastore.DB.Records.DeleteOnSubmit(record);
} 
```

`SwearJarController.Records`这会在删除之前过滤和快照您的集合。

首先进行过滤会限制创建大型数组的可能性。

# jquery - jQuery变量到ID问题

> ID：13224909
> 
> 赞同：1
> 
> 时间：2012-11-05T01:42:17.460
> 
> 标签：jquery, string, variables

我有一个类名为 nav 的按钮，当单击按钮时，会读取 ID 并将变量“pre”设置为 ID。设置变量后，我将删除部分 id，“-link”。这部分工作正常，但可能是我的问题所在。删除“-link”后，我将尝试使用 pre 的其余部分来定位页面上 div 的 id 并为其设置动画。所以我使用另一个变量来破解......

```
curr = '$("#'+pre+'")'; 
```

这“似乎”创造了我需要的东西，但是当我在动画中定位 curr 时，什么也没有发生。可能 b/c 我创建了一个字符串，这就是我的知识开始褪色的地方。

下面是完整的功能。我计划将其与具有相应 div 的多个按钮一起使用，因此为整个类使用单个函数会很好。

```
var pre = null;
var curr = null;     
$('.nav').click(function(){
               pre = $(this).attr("id");
               pre = pre.substring(0, pre.indexOf("-link"));
               curr = '$("#'+pre+'")';
               alert(curr);
                curr.animate({opacity:1}, {
                   duration:250,
                   queue:true,
                   complete:function(){
                     //  alert("calling moveOld");
                       moveOld();
                       }
               });

           }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:44:32.170

你不需要引号，这就是问题所在。

```
$('#'+ pre) 
```

# ember.js - Ember.js 简单小部件

> ID：13224913
> 
> 赞同：0
> 
> 时间：2012-11-05T01:42:59.160
> 
> 标签：ember.js

我一直试图让我的头脑围绕在 Ember.JS 上，并且浏览了大量的文档和线程，但是我从每个人那里得到了无穷无尽的混合音调和不同的方向。我正在尝试将一个简单的小部件放在一起，该小部件将具有：

*   导航
*   身体
*   页脚

我从一个非常简单的应用程序开始，我想象我会有一个父视图，在那个父视图中我会有子视图/嵌套视图。例如，我会：

```
Nav View
Body View
Footer View 
```

我只是不知道如何实现嵌套视图。这是我的代码： var App = Ember.Application.create();

```
 App.ApplicationController = Ember.Controller.extend();
    App.ApplicationView = Ember.View.extend({
      templateName: 'application'
    });

    App.aplicationController = Ember.Controller.extend();

    App.Router = Ember.Router.extend({
      root: Ember.Route.extend({
        index: Ember.Route.extend({
          route: '/'
        })
      })
    })

    App.initialize(); 
```

我将非常感谢任何帮助。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T06:21:27.247

有几种方法可以创建嵌套视图。我创建了一个简单的 JSFiddle 来演示其中的两种方式：使用`view`Handlebars 助手和使用 outlet。

[http://jsfiddle.net/QU2BQ/2/](http://jsfiddle.net/QU2BQ/2/)

希望有帮助。如果您有任何问题，请在此处回复。

# linker - IAR 链接器无法识别 .a 库

> ID：13224915
> 
> 赞同：0
> 
> 时间：2012-11-05T01:43:13.263
> 
> 标签：linker, arm, iar, .a, stm32f4discovery

我正在为 ST 的带有 ARM Cortex-M4F 内核的 STM32F4-Discovery 开发套件开发应用程序。

我在我的应用程序中使用 FreeRTOS，它旨在使用电路板的麦克风和扬声器输出。

我正在尝试使用 ST 的音频播放和录制演示作为设置麦克风 I2S 接口的示例。但是我在这个例子的 PDM 过滤器库上遇到了困难。该库作为`.a`文件提供，当我尝试将其复制到我的项目中时，我在链接期间收到此消息：

> 致命错误[Li004]：文件“C:\Users\Daniel\Desktop\FreeRTOSV7.3.0\FreeRTOS\Demo\CORTEX_M4F_STM32F407ZG-SK\libPDMFilter_IAR.a”不是对象或存档文件

我试着弄乱链接器选项并说要手动添加这个库。但没有结果。有谁知道如何`.a`在 IAR 中链接库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T07:36:35.653

好吧，如果链接器抱怨 .a 文件不是库，这意味着 EWARM 正在将 .a 文件传递​​给链接器，因此修改链接器选项可能不起作用。我宁愿怀疑您的 .a 文件在某种程度上已损坏。如果你在编辑器中打开你的 .a 文件，它应该以字符串开头`!<arch>`。

# sql - SQL 外键约束还是静态值？

> ID：13224918
> 
> 赞同：0
> 
> 时间：2012-11-05T01:43:35.090
> 
> 标签：sql, constraints, foreign-key-relationship, sql-server-2012

我有两张桌子：

*   客户（ID、姓名、HomeAddressId）
*   地址（ID、街道、城市、州）

我想放置一个外键约束，`Customer`以便 HomeAddressId 有效，但我也想允许 -1 作为有效值（即使它不是其中一个`Address.Id`值）。这真的可能吗？而且，如果是这样……怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:46:27.053

不可以。外键是绝对的，外键中的值必须存在于它所引用的主键中。

但是，您可以将外键列声明为 NULLable，然后将 NULL 用于“未知”或“未定义”值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:48:45.397

如果是这样的话，你为什么不让`null`价值放在`HomeAddressID`桌子`Customers`上呢？但仍然在其上添加*外*键约束。

```
CREATE TABLE Customer
(
    Id INT, 
    Name VARCHAR(50), 
    HomeAddressId INT NULL,
    CONSTRAINT tb_fk FOREIGN KEY (HomeAddressId) REFERENCES Address(ID)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:52:29.233

你不能这样做，也不应该这样做。由于这是外键约束的主要规则，要保证数据的一致性。

可能您需要添加一个新列，例如`IsValid`作为列值有效性的标志

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T01:55:24.647

上述答案中的解决方案是正确的方法。但是，如果您仍然需要坚持使用 -1 方法，请在 Address 表中创建一个默认条目，ID 为 -1，所有其他列为 null 或“未知”。这样你的外键约束是有效的。

# c++ - 使用 UnitTesting (cppunit) 中另一个文件中定义的结构时出错

> ID：13224919
> 
> 赞同：0
> 
> 时间：2012-11-05T01:43:46.603
> 
> 标签：c++, visual-c++, cppunit

我有一个`Parser.h`, 定义了一个 struct `StmtParent`：

```
...
struct StmtParent;

class Parser {
... 
```

然后在`Parser.cpp`：

```
struct StmtParent {
    int stmtNo;
    int parent;
};
... 
```

好像没事吧？然后我有一个单元测试（cppunit）：

```
# in ParserUnitTests.h
#include "header\Parser.h"

# in ParserUnitTests.cpp
void ParserUnitTests::testParseProcSideEffects() {
...
stack<StmtParent> follows;
    ... 
```

然后我收到如下错误：

```
error C2027: use of undefined type 'StmtParent' 
```

为什么，我可以使用像`Parser::parseLine()`. 为什么我不能访问结构？所以我尝试包含`Parser.h`在`ParserUnitTests.cpp`（尽管我已经将它包含在标题中）。然后我得到：

```
Error   8   error C2146: syntax error : missing ';' before identifier 'm_cCurToken' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\parser.h    52
Error   9   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\parser.h    52
Error   10  error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\parser.h    52
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:14:23.310

`Parser.h`没有定义结构，它前向声明它。因此，当您尝试将其用作 的模板参数时，它是不完整的`stack`，并且您不能将不完整的类型用作 STL 容器的参数：

> C++11 草案 3035, 17.4.3.6, 第 2 段：
> 
> 特别是，在以下情况下效果是不确定的：
> 
> ...
> 
> > 如果在实例化模板组件时将不完整的类型 (3.9) 用作模板参数，除非该组件特别允许。

您可以检查[一下](http://www.drdobbs.com/the-standard-librarian-containers-of-inc/184403814)以进行推理。

# python - 从 python 脚本制作键盘输入命令

> ID：13224920
> 
> 赞同：3
> 
> 时间：2012-11-05T01:43:52.490
> 
> 标签：python, io, keyboard

有什么方法可以从我的程序中进行键盘输入。假设我的程序从套接字接收“1”。如何将这些数据转换为实时键盘击键。表示当接收到“1”时，计算机会认为我按下了“1”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T01:58:39.823

在 Windows 中，您可以使用 pywin32 进行按键操作。有关代码示例，请参阅[此](https://stackoverflow.com/a/136780/314013)先前的答案。

在 Linux 中，使用 xsendkey 或 xsendkeycode 已经涵盖了[这个先前的答案](https://stackoverflow.com/a/2576118/314013)

对于 Mac，另一个使用 PyQt 或 wxPython的[先前答案。](https://stackoverflow.com/a/6868212/314013)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-18T19:30:16.117

看看这个[https://github.com/SavinaRoja/PyUserInput](https://github.com/SavinaRoja/PyUserInput)它在 python 中对鼠标和键盘的跨平台控制

键盘控制适用于 X11(linux) 和 Windows 系统。但是目前还没有mac支持。

```
from pykeyboard import PyKeyboard
k = PyKeyboard()
k.tap_key(k.numpad_keys[1], n=1)  # Tap 1 on the numpad once. 
```

# ios - 如何在 Cocos2d-x 中检查 sprite 是否按下完成？

> ID：13224922
> 
> 赞同：0
> 
> 时间：2012-11-05T01:43:56.140
> 
> 标签：ios, touch

我的屏幕上有几个按钮和一个操纵杆，我想检查其中一个是否不再被按下，我当然可以检查手指是否在按钮内以检查放开哪个按钮，但是怎么能我知道手指是否不再在按钮中？就像分配触发每个按钮的触摸，然后检查是否是松开的那个。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:51:35.340

好的，没关系，我看到触摸有一个唯一的 ID 并使用了它，但是谢谢。

# c - C中的通用二叉搜索树

> ID：13224924
> 
> 赞同：4
> 
> 时间：2012-11-05T01:44:15.750
> 
> 标签：c, generics, binary-tree, function-pointers, binary-search-tree

我已经实现了一个二叉搜索树，但我也想让它通用。代码如下：

```
typedef struct treeNode {
  int data;
  struct treeNode *left;
  struct treeNode *right;
} treeNode; 
```

和功能：

```
treeNode* FindMin(treeNode *node) {
  if(node==NULL) {
    /* There is no element in the tree */
    return NULL;
  }
  if(node->left) /* Go to the left sub tree to find the min element */
    return FindMin(node->left);
  else 
    return node;
}

treeNode * Insert(treeNode *node,int data) {
  if(node==NULL) {
    treeNode *temp;
    temp = (treeNode *)malloc(sizeof(treeNode));
    temp -> data = data;
    temp -> left = temp -> right = NULL;
    return temp;
  }

  if(data > (node->data)) {
    node->right = Insert(node->right,data);
  }
  else if(data <= (node->data)) {
    node->left = Insert(node->left,data);
  }
/* Else there is nothing to do as the data is already in the tree. */
  return node;
}

treeNode * Delete(treeNode *node, int data) {
  treeNode *temp;
  if(node==NULL) {
    printf("Element Not Found");
  }
  else if(data < node->data) {
    node->left = Delete(node->left, data);
  }
  else if(data > node->data) {
    node->right = Delete(node->right, data);
  }
  else {
    /* Now We can delete this node and replace with either minimum element 
       in the right sub tree or maximum element in the left subtree */
    if(node->right && node->left) {
        /* Here we will replace with minimum element in the right sub tree */
        temp = FindMin(node->right);
        node -> data = temp->data; 
        /* As we replaced it with some other node, we have to delete that node */
        node -> right = Delete(node->right,temp->data);
    }
    else {
        /* If there is only one or zero children then we can directly 
            remove it from the tree and connect its parent to its child */
        temp = node;
        if(node->left == NULL)
            node = node->right;
        else if(node->right == NULL)
            node = node->left;
        free(temp); /* temp is longer required */ 
    }
}
  return node;

}

void PrintInorder(treeNode *node) {
  if (node != NULL) {
    PrintInorder(node->left);
    printf("%d ",node->data);
    PrintInorder(node->right);
  }
} 
```

首先是改变结构

```
int data; 
```

至

```
void *data; 
```

用更多代码编辑：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct treeNode {
  void *data;
  struct treeNode *left;
  struct treeNode *right;
}treeNode;

treeNode * Insert(treeNode *node, void *data, int sizeOfType, int (*compare) (void *arg1, void *arg2)) { 
  if(node==NULL) {
    treeNode *temp;
    temp = malloc(sizeof(*temp));
    temp->data = malloc(sizeOfType);
    memcpy(temp->data, data, sizeOfType);
    temp -> left = temp -> right = NULL;
    return temp;
  }

  if(compare(data, node->data) == 1) {
    node->right = Insert(node->right, data, sizeof(int), compare(data, node->data));
  }
  else if(compare(data, node->data) == -1 || compare(data, node->data) == 0) {
    node->left = Insert(node->left, data, sizeof(int), compare(data, node->data));
  }
  return node;
}

void print(void* a) { 
printf("%d ",*(int*)a); 
}

void InorderGeneric(treeNode *node, void(*p)(void *)) { 
  if (node != NULL) {                                
    InorderGeneric(node->left, p);
    p(node->data);  
    InorderGeneric(node->right, p); 
  }
}

int int_sorter( void *first_arg, void *second_arg ) {
  int first = *(int*)first_arg;
  int second = *(int*)second_arg;
  if ( first < second ) {
    return -1;
  }
  else if ( first == second ) {
    return 0;
  }
  else {
    return 1;
  }
}

int main(void) {
  treeNode *root = NULL;
  int item;
  void *v;

  printf("Add nodes in binary tree:\n");
  while (scanf("%d ", &item) == 1) {
    v = &item;
    root = Insert(root, v, sizeof(int), int_sorter);
  }

  printf("\n---Initial tree---\n");
  printf("IN-order walk of tree:\n");
  InorderGeneric(root, print);
  printf("\n");

  return 0;
 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T01:58:08.170

您将需要为使用的每种数据类型创建一个比较函数，并将函数指针传递给每个需要知道两条数据是否相等或大于/小于彼此的函数。只有这个函数必须知道内部数据类型。

这个函数看起来像：

```
int compare_X(const void *d1, const void *d2) 
```

如果两个对象相等，函数应该返回 0，如果 d1 指向的对象小于，则返回小于 0，否则返回大于 0。根据您在特定树中存储的数据类型，您将拥有一系列这些功能，例如`compare_int`、等。`compare_double`

然后，您可以将此参数添加到需要比较两个对象的函数中：

```
int (*cpm_fptr)(const void *, const void *) 
```

现在例如在`Insert`,`if(data > (node->data))`会变成：

```
if (cmp_fptr(data, node->data) > 0) /* data > node->data */ 
```

还：

```
if (cmp_fptr(data, node->data) == 0) /* data == node->data */

if (cmp_fptr(data, node->data) < 0) /* data < node->data */ 
```

的签名`Insert`现在看起来像：

```
treeNode * Insert(treeNode *node, int data, 
                  int (*cpm_fptr)(const void *, const void *)) 
```

如果你的内部类型是`int`，你可以这样称呼它：

```
Insert(node, my_int, compare_int); 
```

这就是函数喜欢`bsearch`并且`qsort`能够对任何类型的数据进行操作的方式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T02:34:18.030

`union`您可以随时使用 a来表示要存储的数据以及联合体所表示的类型的信息。如下所示：

```
typedef struct _generic_data {
    union {
        int         i;              /* Integer */
        long        l;              /* Long */
        float       f;              /* floating point */
        double      d;              /* double precision floating point */
        char        c;              /* char */
        char        *s;             /* c string */
        struct {
            void        *blob;      /* Arbitrary blog of binary data */
            int         size;       /* Size of this blob */
        }           b;              /* You may not really need it
                                     * So you can get rid of this struct
                                     * if you want.
                                     */
    } value;                        /* To access the above values */
    int type_id;                    /* To identify which data type is actually 
                                     * being stored in this generic data struct
                                     */
} generic_data; 
```

当然，`unsigned`为了完整起见，您也应该具有上述类型的相应类型。设置`type_id`为明确标识元素。例如：

```
const int char_type_id = 1;
const int long_type_id = 2;
....
const int blob_type_id = 10;
const int error_type_id = -42; 
```

依此类推，因此以下成立`generic_data gd;`

*   当`gd.type_id == char_type_id`, then`gd.value.c`是有效值。
*   其余类型相同。

所以现在，你`Node`看起来像：

```
typedef struct treeNode {
  generic_data*   data;
  struct treeNode *left;
  struct treeNode *right;
} treeNode; 
```

您需要将您的功能修改为

```
treeNode * Insert(treeNode *node, generic_data* data);
treeNode * Delete(treeNode *node, generic_data* data); 
```

您还需要一个能够在两个`generic_data`值之间进行比较的函数。像这样的东西：

```
long compare_generic(generic_data* lhs, generic_data* rhs) {
    if ( lhs == NULL || rhs == NULL ) {
        return error_type_id;
    }
    if ( lhs->type_id != rhs->type_id ) {
        /*
         * ERROR: Trying to compare two different types.
         * Do appropriate error handling here.
         * return some eror code.
         */
        return error_type_id;
    }
    switch( lhs->type_id ) {
        case char_type_id: return (long)(lhs->value.c - rhs.value.c); break;
        case int_type_id:  return (long)(lhs->value.i - rhs.value.i); break;
        /*
         * Something similarly logical for long, float, double.
         * The basic idea if this function returns 0 
         *
         * void *blob allows you to store arbitrary binary data. You 
         * may not need it, but if you do, there should be some way to
         * compare between the two.
         */
        default:
            /*
             * No type_id matches.
             * Handle this error case.
             * return some error code.
             */
            return error_type_id;
            break; /* Just a habbit to always have a break so that
                    * you don't have to deal with special cases.
                    */
    }
} 
```

这将用于替换您现有的代码，如下所示：

*   `if(data < node->data)`对此：`if ( compare_generic( data, node->data ) < 0 )`
*   `if(data > node->data)`对此：`if ( compare_generic( data, node->data ) > 0 )`
*   `if(data == node->data)`对此：`if ( compare_generic( data, node->data ) == 0 )`

您现在必须格外小心地访问您的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:51:05.430

如果您真的希望它在 C 中，您将需要一种更复杂的方法（将树中的数据类型存储在变量中并在必要时执行类型转换）。

但是，如果您决定在 C++ 中做同样的事情，您可以使用模板。网上有很多关于模板的示例。

希望这可以帮助！

# .net - Petapoco - 无法自动加入

> ID：13224925
> 
> 赞同：1
> 
> 时间：2012-11-05T01:44:17.100
> 
> 标签：.net, model-view-controller, orm, petapoco, micro-orm

我有一个对象调用 Country 和另一个调用 CounytryRegions 如下所示

```
[TableName("Countries"),
PrimaryKey("Code", autoIncrement = false)]
public class Country
{
    public Country()
    {
        this.CountryRegions = new List<CountryRegion>();
    }

    public string Code { get; set; }
    public string Name { get; set; }

    [Foliaco.DataAccess.ResultColumn()]
    public List<CountryRegion> CountryRegions { get; set; }

}

[TableName("CountryRegions"),
PrimaryKey("Code", autoIncrement = false)]
public class CountryRegion 
{
    public CountryRegion()
    {
        this.Country = new Country();
    }

    public string Code { get; set; }
    public string Name { get; set; }

    public string CountryCode { get; set; }

    [Foliaco.DataAccess.ResultColumn()]
    public Country Country { get; set; }

} 
```

如果我执行下面的 sql

```
 Country country = this.DB.Fetch<Country,CountryRegion>("select * from dbo.countries c join dbo.countryregions cr on c.Code = cr.CountryCode where c.Code = @0","US").FirstOrDefault(); 
```

我期望在 Country 类的 CountryRegions 属性上获得该国家/地区的所有相关记录，但我得到了以下错误

无法自动加入 CountryRegion

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:10:11.613

我想我根据他们的文档发现了问题我需要创建一个 Realtor 类来加载列表，请参阅[Petapoco 文档](http://www.toptensoftware.com/Articles/115/PetaPoco-Mapping-One-to-Many-and-Many-to-One-Relationships)中的一对多部分，我还发现了这个帮助类[OneTOMany](http://schotime.net/blog/index.php/2011/08/21/petapoco-one-to-many-and-many-to-one/)，它使 Realtor 类更通用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-27T02:11:09.573

我刚刚使用基于 PetaPoco 的 NPoco 库遇到了这个错误。

我的问题是我打电话`.Fetch`而不是`.FetchOneToMany`.

# unix - 将时间添加到 mysqldump cron 作业？

> ID：13224926
> 
> 赞同：7
> 
> 时间：2012-11-05T01:44:17.897
> 
> 标签：unix, cron, mysqldump, cron-task

以下作品：

```
/usr/bin/mysqldump -u[username] -p[password] --all-databases --single-transaction > /home/[domain]/public_html/backups/full_backup_`date -I`.sql 
```

结果为“full_backup_2012-11-04.sql”

cron 作业每分钟运行一次，但文件名每天只运行一次……我也想在文件名中包含小时和分钟……（最后，cron 作业可能每隔一小时左右运行一次)

所以 date -I works... date 的其他典型选项似乎不起作用...是否有任何文件显示 -I 有效？如果是这样，该文档可能还有其他可行的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:50:04.523

改用`date +%Y-%m-%d_%H-%M-%S`（或任何其他格式）：

**已编辑**

为避免来自 CRON 的电子邮件中的主题过长，请使用创建文件`/home/<your user>/mycron.sh`（文件名和位置只是一个示例）：

```
#!/bin/sh
/usr/bin/mysqldump -u[username] -p[password] --all-databases --single-transaction > /home/[domain]/public_html/backups/full_backup_`date +%Y-%m-%d_%H-%M-%S`.sql 
```

确保你`chmod +x /home/<your user>/mycron.sh`.

此日期格式将输出：

```
full_backup_2012-11-05_08-49-19.sql 
```

然后在您的 cron 中使用脚本的名称，即：

```
[cron parameters]    /home/<your user>/mycron.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:21:54.037

`date -Iminutes`可能是要走的路，它使用 ISO 8601 格式。[Wiki 页面](http://en.wikipedia.org/wiki/Date_%28Unix%29#Options)有一些信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:31:29.207

虽然我的原始脚本有效，但这样的事情可能要简单得多：

```
mysqldump [options] | gzip -c > /backups/data-$(date +%a-%H00).sql.gz 
```

这特别将保留 7 天的备份。它通过使用星期几加上小时来工作。所以它看起来像`data-Mon-00.sql.gz`（星期一午夜）。当一周到来时，以前的备份会被覆盖。

如果您将您的 cron 设置为每 6 小时运行一次，您将获得多达 28 个备份`(24/6) * 7 = 28`。

要使用 mysqldump 获得一致的备份，您必须锁定表，因此只能从副本或低容量服务器执行此操作。mysqldump 还会制作完整快照，因此您最终会为每个备份创建完整快照，这最终会占用大量磁盘空间。对于大型数据库，这很快就会变得难以管理。您也可能不想信任副本以从中获取备份，因为副本也必须保持同步。

更好的选择是[Percona 的 xtrabackup](http://www.percona.com/doc/percona-xtrabackup/2.1/)。它是开源的，所以它是免费的。它需要 InnoDB 表，并且能够对您的主 MySQL 服务器进行热备份，而无需停机或锁定（无论如何您都不应该使用 MyISAM）。它使用经过修改的 InnoDB 引擎和 InnoDB 的崩溃恢复功能来确保备份是一致的。它甚至可以对基本快照进行增量备份，因此您可以进行数百个备份，并使其占用单个快照的大小。它适用于 MySQL、MariaDB、PerconaDB（MySQL 的分支）以及 InnoDB 和 XtraDB（在 MariaDB 和 Percona 中改进了 InnoDB）。

就我个人而言，我会坚持使用 xtrabackup，甚至不会使用 mysqldump。您必须在命令行方面做同样多的工作，并且您还可以获得小型增量备份的额外好处。有一些工具可以自动使用 xtrabackup，即使在 Galera 集群中也是如此。[Facebook 使用它](https://www.facebook.com/note.php?note_id=10150098033318920)。

* * *

原脚本：

下面的脚本以“backup.sql.gz”为例，将其转换为类似 backup-13Nov2012-01_30.sql.gz 的内容，然后使用硬链接旋转文件。

```
#!/bin/bash
###########################################################################
# snapshot
#
#     Rotates snapshots of backups using hard links
#
#     Keeps track of:
#          - 48 hours of snapshots (48*60/interval)
#          - 60 days worth of midnight snapshots
#          - 24 months of snapshots from the 1st
#     Ussage:
#          snapshot /path/to/backup.sql.gz
#          mysqldump ... | gzip -c | snapshot /path/to/backup.sql.gz
#
###########################################################################

if ! hash date 2> /dev/null; then
        echo "-snapshot: date command not found" 1>&2
        exit 1
fi

if ! hash ln 2> /dev/null; then
        echo "-snapshot: ln: command not found" 1>&2
        exit 1
fi

# Date Info

month=$(date +"%b")
day=$(date +"%d")
year=$(date +"%Y")
time=$(date +"%H_%M")
date=$(date +"%d%b%Y")
dateFirst=$(date --date="$month 01" +"%d%b%Y" 2> /dev/null)

# Test to see if we're using GNU date or BSD date

if [ "$dateFirst" == "" ]; then
        dateFirst=$(date -v1d +"%d%b%Y")
        back2date=$(date -v-2d +"%d%b%Y")
        back2monthY=$(date -v-2m +"%b%Y")
        back2year=$(date -v-2y +"%Y")
else
        back2date=$(date --date="-2 day" +"%d%b%Y")
        back2monthY=$(date --date="-2 month" +"%b%Y")
        back2year=$(date --date="-2 year" +"%Y")
fi

if [ "$dateFirst" == "" ]; then
        echo "-snapshot: Unknown version of date command." 1>&2
        exit 1
fi

# Directories

filepath=$1
backup=$2

if [ "$filepath" == "" ]; then
        echo "-snapshot: Expecting filename as first argument" 1>&2
        exit 1
fi

if [ "$backup" == "" ]; then
        backup=/backup
fi

if [ ! -d "$backup" ]; then
        echo "-snapshot: Directory "$backup" doesn't exist" 1>&2
        exit 1
fi

snapshots=$backup/snapshots
daily=$backup/daily
monthly=$backup/monthly
basename=${filepath##*/}
ext=${basename#*.}
basename=${basename%%.*}
filename=$basename-$date-$time.$ext

##############################
# Make new snapshot
##############################

if [ ! -d "$snapshots/$date" ]; then
        mkdir -p "$snapshots/$date"
fi

if [ -t 0 ]; then
        if [ ! -f "$filepath" ]; then
                echo "-snapshot: '$filepath' doesn't exist" 1>&2
                exit 1
        fi

    ln "$filepath" "$snapshots/$date/$filename"
else
    cat > "$snapshots/$date/$filename"
fi

##############################
# Daily/monthly snapshots
##############################

if [ "$time" == "00_00" ]; then
        if [ ! -d "$daily/$month$year" ]; then
                mkdir -p "$daily/$month$year"
        fi

        ln "$snapshots/$date/$filename" "$daily/$month$year/$filename"

        if [ "$day" == "01" ]; then
                if [ ! -d "$monthly/$year" ]; then
                        mkdir -p "$monthly/$year"
                fi

                ln "$snapshots/$date/$filename" "$monthly/$year/$filename"
        fi
fi

##############################
# Clean up old snapshots
##############################

if [ -d "$snapshots/$back2date" ]; then
        rm -fr "$snapshots/$back2date"
fi

if [ -d "$daily/$back2monthY" ]; then
        rm -fr "$daily/$back2monthY"
fi

if [ -d "$monthly/$back2year" ]; then
        rm -fr "$monthly/$back2year"
fi 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-18T17:53:06.950

如果您想在 crontab 条目中完成所有操作（而不是 shell 脚本），方法如下：

```
/usr/bin/mysqldump -u[username] -p[password] --all-databases --single-transaction > /home/[domain]/public_html/backups/full_backup_`date +\%F_\%R`.sql 
```

文件名将输出为：full_backup_2017-08-18_17:52.sql

您的命令的关键更改是：`date +\%F_\%R`

Note: The % in the date command must be escaped in crontab, otherwise you'll likely get an EOF error. It will work on the command line without escaping the % but won't in crontab. Hope this helps.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T01:50:30.203

date(1) 命令有一个“+[FORMAT]”选项。我相信您想要的选项是 '%s' 或 '%N' 选项，这将分别给你秒或纳秒。根据您的 MySQL 路径，我假设您使用的是 Linux。如果确实如此，您可以在[此处](http://linux.die.net/man/1/date)找到手册页，该手册将为您提供更多详细信息。

# ruby - rvm config：没有这样的文件或目录

> ID：13224930
> 
> 赞同：3
> 
> 时间：2012-11-05T01:44:56.040
> 
> 标签：ruby, osx-lion, rvm

当我运行时`rvm list`，它显示：

```
rvm rubies

=> /Users/ohho/.rvm/scripts/list: line 321: /Users/ohho/.rvm/rubies/ruby-1.8.7-p371/config: No such file or directory
ruby-1.8.7-p371 [  ]
 * ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

这是一个错误还是我可以忽略它？

更新

错误消失后`rvm get stable`更新`rvm 1.16.16`为`rvm 1.16.17`. rvm 升级后会显示一个`config`文件。`~/.rvm/rubies/ruby-1.8.7-p371/`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:17:00.310

这是在 rvm 1.16.16 中生成配置文件的错误 - 它已经解决，更新 rvm 应该足以修复它：

```
rvm get stable #or:
rvm get head 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T02:42:17.600

这不是一个严重的错误信息；所以你可以忽略它。

但是，该消息很可能出现，因为`ruby-1.8.7-p371`版本卸载未成功完成。

尝试运行`rvm cleanup`- 它可能会删除陈旧的文件夹。

您可以进入`/Users/ohho/.rvm/rubies/`文件夹，然后运行`rm -rf ruby-1.8.7-p371`以完全删除该文件夹

或者，尝试删除它，然后重新安装，如下所示：

```
rvm remove ruby-1.8.7-p371
rvm install ruby-1.8.7-p371 
```

# windows - 使用批处理文件解压缩压缩文件夹中的文件

> ID：13224932
> 
> 赞同：0
> 
> 时间：2012-11-05T01:45:07.053
> 
> 标签：windows, batch-file, unzip

基本上，我想这样做是因为用户不应该选择提取目标目录。我的意思是，他只是打开 .batch 文件，并且必须自动完成解压缩，但并非所有文件都必须在同一目录中解压缩。批处理文件压缩在同一文件夹中。他打开 zip 文件，然后打开压缩的批处理文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T11:36:58.673

不使用批处理文件，但可以使用[vbscript](http://www.computerhope.com/forum/index.php?topic=66630.0)（如 Juri Ruut 所述）或[powershell](http://forums.jamssupport.com/Topic72.aspx)。

这两个链接都有一个很好的例子。

# python - 从数据库 SQLAlchemy 返回多个字段

> ID：13224933
> 
> 赞同：1
> 
> 时间：2012-11-05T01:45:08.067
> 
> 标签：python, sqlalchemy

这一行：

```
used_emails = [row.email for row
           in db.execute(select([halo4.c.email], halo4.c.email!=''))] 
```

回报：

```
['first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com', 'first.last@domain.com'] 
```

我用它来查找匹配项：

```
if recipient in used_emails: 
```

如果找到匹配项，我需要从数据库的同一行中提取另一个字段（halo4.c.code）。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T01:51:18.313

我会说我的 SQLAlchemy 经验是有限的（所以很抱歉，如果这太离谱了），但是当你得到你的结果时，创建一个字典（而不是列表）是否可行，以 为键`email`，用代表行中所有数据的值 ( `SELECT *`)？这样，如果您找到匹配的电子邮件，您可以引用该键的值并提取您需要的数据（即`halo4.c.code`）。这应该会为您节省另一个数据库命中，因为该值将存在于您的字典中。

在 Python 2.7 中，类似：

```
used_emails = {row.email: row.code for row in select([halo4.c.email, halo4.c.code], halo4.c.email != '')} 
```

或者在 Python 2.6 中：

```
used_emails = dict(
    (row.email, row.code) for row in db.execute(
        select([halo4.c.email, halo4.c.code]halo4.c.email!=''))) 
```

然后你可以使用类似的东西：

```
if recipient in used_emails:
    # This may not be the proper syntax - happy to troubleshoot if not
    print used_emails[recipient] 
```

# javascript - 自动执行Javascript？

> ID：13224935
> 
> 赞同：0
> 
> 时间：2012-11-05T01:45:33.340
> 
> 标签：javascript

我有这个脚本使整个网站变灰，并在单击文本“showPopUp”时弹出一个对话框。我的问题是如何让这个脚本在页面加载时自动执行？

脚本：

```
<script type="text/javascript">
    function showPopUp(el) {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById(el)
        cvr.style.display = "block"
        dlg.style.display = "block"
        if(document.body.style.overflow = "hidden") {
            cvr.style.width = "1024"
            cvr.style.height = "100&#37;"
        }
    }

    function closePopUp(el) {
        var cvr = document.getElementById("cover")
        var dlg = document.getElementById(el)
        cvr.style.display = "none"
        dlg.style.display = "none"
        document.body.style.overflowY = "scroll"
    }
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:49:51.917

```
window.onload = function() {
  showPopUp('yourObjeID');
}; 
```

或者

```
<body onload="showPopUp('yourObjeID');"> 
```

或在正文结束之前插入脚本：

```
...
<script>
    showPopUp('yourObjeID');
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T01:46:29.270

使用`window.onload`. [https://developer.mozilla.org/en-US/docs/DOM/window.onload](https://developer.mozilla.org/en-US/docs/DOM/window.onload)上的文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T01:48:07.410

更好的方法是使用“document.ready”事件，而不是window.load，因为load事件只是在所有页面资源加载后触发，而ready事件是在文档准备好之后触发（所有HTML都加载并DOM 准备好了）。

请注意，“document.ready”事件不是在 JavaScript 中实现的事件，而是由一些 JavaScript 库（如 jQuery）“模拟”的。

我没有写一个例子，而是得到了这两个链接，看看：

*   [javascript：如何在没有 jquery 的情况下编写 $(document).ready 之类的事件](https://stackoverflow.com/questions/3989095/javascripthow-to-write-document-ready-like-event-without-jquery)
*   [window.onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)

# c++ - 无法从文件中读取行并将它们放入变量中（C++）

> ID：13224936
> 
> 赞同：2
> 
> 时间：2012-11-05T01:45:35.213
> 
> 标签：c++, file, function, io

我正在为学校编写一个 C++ 程序，它正在出现，但我在这个特定领域遇到了麻烦。

我需要从另一个函数的循环中调用一个函数。我需要读取 5 行并将读取的每个数字集合放入一个双精度值。现在我只是想确保我可以正确读取文件。目前，每当我运行程序时，它都会循环并打印五次信息，但似乎只打印最后一行的数字五次。

我的代码中的什么使得我的程序只适用于我的输入文件的最后一行？

这是我的信息：

**需要读取的输入文件：**

```
1121 15.12 40                                                                                     

9876 9.50 47

3333 22.00 35

2121 5.45 43

9999 10.00 25

```

**我正在使用的代码：**

```
 double process_employee(double& employeeNumber, double& employeeRate, double& employeeHours)

 {

     ifstream employeeInputFile;

     employeeInputFile.open("employee input file.txt");

     if(employeeInputFile.fail())
     {
         cout << "Sorry, file could not be opened..." << endl;

        system("pause");
         exit(1);
     }

     //For some reason, this is only printing the data from the last line of my file 5 times
     while (!employeeInputFile.eof())  
     {
         employeeInputFile >> employeeNumber >> employeeRate >> employeeHours;
     }

}

void process_payroll()
{   
     double employeeNumber = 1.0;
     double employeeRate = 1.0;
     double employeeHours = 1.0;

     cout << "Employee Payroll" << endl << endl;
     cout << "Employee  Hours   Rate    Gross   Net Fed State   Soc Sec" 
          << endl;

     //caling process_employee 5 times because there are 5 lines in my input file
     for(int i = 1; i <= 5; i++)
     {
         process_employee(employeeNumber, employeeRate, employeeHours);

         cout << "Employee #: " << employeeNumber << " Rate: " << employeeRate << " Hours: " 
         << employeeHours << endl;
     }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T01:49:21.093

这`while (!employeeInputFile.eof())`意味着它将一直读取行直到文件结束。每次执行主体时，它都会覆盖最后读取的值。

当后续`process_payroll`调用时`process_employee`，它会重新打开流并再次执行相同的操作，因此相同的值会打印 5 次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T01:50:42.817

从省略下面的 while 循环开始：

```
 //For some reason, this is only printing the data from the last line of my file 5 times
 while (!employeeInputFile.eof())  
 {
     employeeInputFile >> employeeNumber >> employeeRate >> employeeHours;
 } 
```

然后你会注意到你只得到*第一*行输入。您应该考虑将输入流传递给`process_employee`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T01:54:34.413

你不断覆盖你的变量：

```
while (!employeeInputFile.eof())  
{
   employeeInputFile >> employeeNumber >> employeeRate >> employeeHours;
} 
```

您需要将它们保存在中间，例如：

```
std::vector<EmployeeStructure> someVector;

while (!employeeInputFile.eof())  
{
   employeeInputFile >> employeeNumber >> employeeRate >> employeeHours;
   someVector.push_back(EmpoyeeStructure(employeeNumber, employeeRate, employeeHours));
} 
```

然后，传递该向量并打印信息。

# sql - 将数值传递给 sqlplus

> ID：13224945
> 
> 赞同：1
> 
> 时间：2012-11-05T01:46:57.600
> 
> 标签：sql, shell, sqlplus, ksh

我想在使用之前将 ksh shell 变量作为整数传递给 sqlplus 或将变量转换为数字。这是我编写的代码（不起作用）：

```
echo
echo "Enter the day of run (1,2,3,..,N ) :" | tee -a $sqllog
read day

typeset -i first_range

if [ $day -eq 1 ]; then
first_range=5000
elif [[ $day -eq 2 ]]; then
first_range=105000
elif [[ $day -eq 3 ]]; then
first_range=205000
elif [[ $day -eq 4 ]]; then
first_range=305000
elif [[ $day -eq 5 ]]; then
first_range=405000
elif [[ $day -eq 6 ]]; then
first_range=505000
elif [[ $day -eq 7 ]]; then
first_range=605000
fi

echo "first_range value : ${first_range}" | tee -a $sqllog
{
sqlplus -S ${SF_PSTN_CONN_STRING} << EOF

alter session enable parallel DML;
--alter session set  db_file_multiblock_read_count=128;
alter session enable parallel query;

set heading off
set verify off
set echo off
set pages 0
set timi on
set lines 300
set trimspool on

# Drop table TMP_DAILY_PSTN_CMP_11035

drop table TMP_DAILY_PSTN_CMP_11035;

# Create TMP Table TMP_DAILY_PSTN_CMP_11035 from TMP_OA_PSTN_CMP_11035

Create table TMP_DAILY_PSTN_CMP_11035 (
        ACTION_OBJID NUMBER,
        CONTRACT_OBJID NUMBER,
        STATUS varchar2(40),
        UPDATE_DATE DATE
)
partition by range(ACTION_OBJID)(
partition p1 values less than (${first_range})) NOLOGGING parallel;

prompt the day of run is $day;

begin
        for k in 2..200
        loop
                execute immediate
                        'alter table TMP_DAILY_PSTN_CMP_11035 add partition p'||k||' values less than ('||${first_range}+(k*5000)||')';
        end loop;
end;
/ 
```

我得到的错误是：

```
Enter the day of run (1,2,3,..,N ) :
2
first_range value : 105000

Session altered.

Session altered.

Table dropped.

Elapsed: 00:00:00.03

Table created.

Elapsed: 00:00:00.02
the day of run is 2
begin
*
ERROR at line 1:
ORA-06502: PL/SQL: numeric or value error: character to number conversion error
ORA-06512: at line 4 
```

我该如何解决这个问题，即将字符转换为数字，甚至`typeset -i`似乎不起作用。将变量传递给 sqlplus 很容易，很多问题都涉及到它，但我特别想传递一个整数值并使用它

编辑：我正在使用 oracle 10g db。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T04:19:03.567

通过使用此代码将 char 转换为 sql 中的整数解决的问题：

```
VARIABLE ret_val NUMBER
:ret_val := 1;
PRINT ret_val
begin
                                for k in 2..200
                                loop
                                   SELECT (select to_number(${first_range}) from dual)+5000*(k-1) INTO :ret_val FROM dual;
                execute immediate
                        'alter table TMP_DAILY_PSTN_CMP_11035 add partition p'||k||' values less than ('||:ret_val||')';
        end loop;
end;
/ 
```

一定要告诉你是否找到更好的选择。

# r - 为什么根据先前的命令，summary() 为模型输出不同的标签因子级别？

> ID：13224946
> 
> 赞同：1
> 
> 时间：2012-11-05T01:47:13.853
> 
> 标签：r

我正在开展一个大型 R 项目，以对公共数据集执行不同的分析。我为每个分析构建了几个单独的脚本，以及按顺序调用每个脚本的高级脚本。每个脚本首先调用一个`init.R`擦除内存的脚本 ( `rm(list=ls(all=TRUE))`)。

我最近发现`summary()`（并且，我认为`coef()`）会根据脚本的顺序产生不同的输出。`lm()`在使用or `gam()`(包)拟合模型的脚本中`mgcv`，如果首先运行这些脚本，则在“新” R 会话中，`summary()`输出会列出带有完整标签的因子。

但是，如果我首先运行其他脚本，这些脚本使用简单的嵌套`aov()`函数并使用其他一些包生成一些图形和其他输出，然后重新运行前面提到的脚本，`summary()`而不是生成使用数字标记的因子级别的输出（“编码”值，而不是实际的因子水平标签）。

不幸的是，这不是我可以使用最小的工作示例轻松“重现”的东西，因为我还没有完全确定在我的脚本中这种行为发生了哪些变化。我在快速测试中确认了一些事情：

*   在脚本之间使用 清除内存`rm(list=ls())`，因此内存中不应有任何内容导致此更改。
*   `summary()`本身并没有改变：模型拟合函数实际上产生的输出略有不同（如 确认`all.equal()`），这更令人不安。以不同顺序运行脚本时生成的已保存对象在加载时可靠地生成相同的输出，但该输出根据用于生成拟合模型对象的脚本顺序而有所不同（即使在每个脚本之间清除了内存）。
    *   根据脚本的顺序，`summary( lm(...) )`还输出模型项的不同估计值，但残差摘要、R^2 和整体 F 检验相同。很奇怪。
*   我无法通过删除先前脚本中加载的包来恢复默认（所需）行为。加载包的顺序重要吗？
*   退出并重新启动 R 后恢复默认行为
    *   这个答案似乎没有解决问题： [Reset R instance](https://stackoverflow.com/questions/3716764/reset-r-instance)

理想情况下，我希望我的项目能够通过简单地`source()`依次执行每个脚本来重现所有结果和输出，但是这个奇怪的“错误”（在我的代码中 - 我不是将此归咎于 R）意味着输出不是一致并取决于顺序:(

除了保留在内存中的对象或包之外，还有什么东西可以改变模型拟合函数的工作方式，或者将因子级别存储在传入的数据框中？

## 编辑

我意识到上述问题的答案是对比选项（见下文）。新问题：

如何将 options() 重置为默认设置，即 R 启动时使用的值？“出厂默认设置”是 `options(contrasts=c("contr.treatment","contr.poly")))`，但我想知道是否有办法重新启动到内部默认设置（以防它们不是“出厂默认设置”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T01:47:13.853

比较输出后，我意识到我正在查看不同的对比，并记得“违规”脚本更改了默认的对比选项：

`options(contrasts=c("contr.sum","contr.poly"))`

所以，这就解释了上面所有的困惑。希望这可以节省其他人的麻烦。新问题：

如何重置`options()`为默认设置，即 R 启动时使用的值？

# ios - 如何在我的 iOS 6 项目中包含自定义框架（GitHub 的 Mantle）？

> ID：13224949
> 
> 赞同：3
> 
> 时间：2012-11-05T01:47:30.860
> 
> 标签：ios, objective-c, frameworks, github-mantle

我想在我的 iOS 应用程序中使用 Github 的 Mantle 框架。我正在使用 XCode 4.5 和 iOS SDK 6。我该怎么做？

这是框架：[https ://github.com/github/Mantle](https://github.com/github/Mantle)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:54:27.940

您应该考虑使用[CocoaPods](https://github.com/CocoaPods/CocoaPods)来管理项目的依赖项。它就像 Ruby gems 一样工作，你只需要这样做：

### 添加一个名为`Podfile`

```
platform :ios
'Mantle', '0.2' 
```

### 然后安装依赖

```
$ gem install cocoapods
$ pod install 
```

在最后一个命令之后，不要再使用你的`.xcodeproj`了。使用`.xcworkspace`.

### 寻找其他框架

```
$ pod search restkit // For instance 
```

# javascript - 使用 javascript 更改 svg 中所有元素的填充

> ID：13224952
> 
> 赞同：0
> 
> 时间：2012-11-05T01:47:54.837
> 
> 标签：javascript, jquery, svg, fill

我想更改 SVG 中所有元素的填充颜色。元素都是矩形和多边形类型。我没有设置默认颜色。

这是一个示例文件：

[http://www.kingoslo.com/instruments/test.svg](http://www.kingoslo.com/instruments/test.svg)

我怎样才能最优雅地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T03:36:00.373

如果你有 jQuery：

```
$('svg').children().css('fill', '#ffffff'); 
```

编辑：请注意，这假设矩形和多边形是 svg 元素的直接子元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T12:47:17.047

另一种类似于 Robert Longson 的变体：

```
document.documentElement.style.fill = 'blue'; 
```

我更喜欢 documentElement 而不是 rootElement，因为它在 DOM Core 中，而且它们几乎是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-23T11:38:22.703

在使用具有大量嵌套元素的复杂 SVG 时，这对我有用：

`$('svg').find('path, text').css('fill', '#ffffff')`

# android - 如何在 Android 上的 EditText 字段中实现弹出？

> ID：13224955
> 
> 赞同：0
> 
> 时间：2012-11-05T01:48:26.367
> 
> 标签：android, android-listview, android-edittext

我想知道是否有人可以告诉我如何实现这里第二张图片中显示的这个 EditText 弹出窗口。

![在此处输入图像描述](../Images/a033f3baa23b0ff0725736645bd8870f.png)

![在此处输入图像描述](../Images/c4c54fda3ea654bf3b73761242622f4d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T05:46:40.180

有几种方法可以做到这一点。我通过在这里实现一个解决方案回答了一个类似的问题`ListView`：

[单击eclipse中的按钮后如何显示项目？](https://stackoverflow.com/questions/13658682/how-to-display-item-after-clicked-the-button-in-eclipse/13660943#13660943)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T02:23:54.830

您的意思是，当您单击 + 按钮时，EditText 的新视图将添加到布局中。试试这个[Q/A](https://stackoverflow.com/questions/4733021/add-new-view-to-layout-upon-button-click-in-android)它可能对你有帮助。

# c - 如何从完整字符串中获取子字符串？

> ID：13224958
> 
> 赞同：0
> 
> 时间：2012-11-05T01:49:02.493
> 
> 标签：c

我必须尝试使用​​ GetSubstring 函数来打印结果，以便

```
printf(GetSubstring("character", 4, 3, resultArray)); 
```

输出`act`

限制：不能调用其他函数或宏，不能添加任何其他变量，不能将变量设置为0。只能更改函数GetSubstring。

这是我当前的代码。

```
#include <stdio.h>
#include <stdlib.h>
char *GetSubstring(const char source[], int start, int count, char result[]);

int main(void)
{
const char source[] = "one two three";
char result[] = "123456789012345678";

puts(GetSubstring("character", 4, 3, result));

return(EXIT_SUCCESS);
}

char *GetSubstring(const char source[], int start, int count, char result[])
{
    char *copy = result;
    for (; *source != '\0' || *source == source[start]; start--)
    {
        while (*source != '\0')
        {
        *result++ = *source++;
        }

    }

    *result = '\0';
    return (copy);                                      // outputs character
    // return (result);                                 // outputs 012345678
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T02:01:04.597

此行应该终止字符串：

```
*result += '\0' 
```

但这不是因为您将零添加到现有值。尝试将其设置为零：

```
*result = '\0' 
```

更重要的是，你的循环很古怪。这包含很多麻烦的食谱：

```
for (; *source != '\0' || *source == source[start]; start--)
{
    while (*source != '\0')
    {
        *result++ = *source++;
    }
} 
```

为什么不从 开始`start`，然后*递增*...

```
int i = 0;
const char *str = &source[start];

while( i < count && *str != '\0' ) {
    result[i++] = *str++;
}
result[i] = '\0'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:58:19.487

错误似乎在这里：`result += '\0'`. 应该是`*result = '\0';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T02:09:08.527

这是我的解决方案。

1.  在堆上为您的子字符串腾出空间

2.  遍历源代码，直到到达字符串的末尾或完成复制。将字符复制到要返回的子字符串

3.  添加终止字符

4.  返回结果

希望这可以帮助

```
char *GetSubstring(const char source[], int start, int count, char result[])
{
    int i = 0;
    char *substr = (char *) malloc(sizeof(char));
    for (; source[start] != '\0' && count > 0; count--)
    {
        substr[i++] = source[start++];
    }

    substr[i] = '\0';
    return (substr);                                   
} 
```

# php - Mailchimp 双重选择加入和网站帐户确认

> ID：13224971
> 
> 赞同：0
> 
> 时间：2012-11-05T01:50:53.713
> 
> 标签：php, mysql, mailchimp

我有一个网络应用程序，人们必须通过单击电子邮件中的链接来确认帐户的创建，该链接将他们从“已注册”表移动到“帐户”表，以便他们可以登录。我想开始发送所有我的用户是一个时事通讯，但我不想给他们都发送一封 Mailchimp 选择加入电子邮件，所以我想知道我是否可以使用 MailChimp API 将 MailChimp 选择加入我的网络应用程序确认并尝试杀死两个一石鸟？

我曾尝试以 CSV 格式下载我的帐户表并尝试将其导入，但我必须每周对所有新用户执行此操作，这可能需要一段时间并且可能会遇到一些问题。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T02:00:52.130

当然可以！

[http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php](http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php)

```
// Send data to Mailchimp
require_once('inc/MCAPI.class.php');
$api = new MCAPI('your-api-key');

$result = $api->listSubscribe( 'list-number', $data['email'], $merge_vars, 'html', false ); 
```

# orchardcms - 如何将 Orchard 搜索限制为博客文章（或任何内容类型）？

> ID：13224976
> 
> 赞同：1
> 
> 时间：2012-11-05T01:51:35.337
> 
> 标签：orchardcms

Orchard 的内置搜索模块将搜索（和索引）网站上的所有内容。将索引/搜索（或搜索结果）限制为特定内容类型的最佳方法是什么？（实际上我只需要将其限制为博客文章）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T03:28:57.880

不要索引其他类型。内容类型编辑器中有一个“索引此内容类型以供搜索”复选框。

# ios - 在 Objective C 的不同环境中使用不同的值

> ID：13224978
> 
> 赞同：0
> 
> 时间：2012-11-05T01:52:14.847
> 
> 标签：ios

根据 Obj-C 中的环境，为我的代码库中的常量定义不同值的最优雅方法是什么

例如

```
BASE_URL = http://localhost_ in development environment
BASE_URL = http://myproddomainname in prod/release environment 
```

# javascript - 为什么 `this===window` 给了我错误的信息？

> ID：13224979
> 
> 赞同：9
> 
> 时间：2012-11-05T01:52:23.167
> 
> 标签：javascript

我一直在测试以下代码，但 Firefox16 和 Chrome22 给了我不同的结果。

```
console.log(this===window); //false in Firefox and true in Chrome
console.log(this.window===window); //true in both Firefox and Chrome
(function(){
    console.log(this===window); //false in Firefox and true in Chrome
    console.log(this.window===window); //true in both Firefox and Chrome
})(); 
```

据我记得，Chrome 的回答是正确的：除非用 , 调用`new`，否则`this`总是与全局对象相同`window`，这导致了一种称为范围安全构造函数的模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T02:00:04.583

假设它`window`是全局对象，但在 ES5 之前，没有规范来定义它。这只是约定（即“DOM 0”的一部分）。在[ES5 §15.1](http://ecma-international.org/ecma-262/5.1/#sec-15.1)中，有：

> 在 HTML 文档对象模型中，全局对象的 window 属性就是全局对象本身

我猜这至少使它成为 ECMAScript 标准的非规范部分。

一段时间以来，`window`和 全局对象之间存在歧义，但对于大多数用途来说，它们是同义词。只有某些情况存在差异。

关于声明：

> 除非用 new 调用，否则它总是与全局对象窗口相同

一点也不。函数的`this`关键字由函数的调用方式设置。在非严格模式下，如果在进入执行上下文时`thisBinding`提供 no ，则将其设置为全局对象。在严格模式下，它保持原样（即它可能是未定义的，，，，`null`任何`0`东西）。

> 这导致了一种称为范围安全构造函数的模式

我不确定那是什么意思。函数`this`与作用域无关。当`new`运算符与函数调用一起使用时，该函数充当构造函数，并将其`this`设置为一个新对象，就像由`new Object()`. 这似乎更像是`new`运算符的功能，而不是“范围安全构造函数”的概念。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T02:13:23.840

这实际上在 Firefox 的[Web 控制台文档](https://developer.mozilla.org/en-US/docs/Tools/Web_Console)本身中得到了回答：

> 注意：在使用 Web 控制台时，`this`不是`window`对象，因为它会在内容中运行的代码中。这使您可以在不污染内容命名空间的情况下创建变量。

# android - 为什么我的布局无法解决？(安卓/Java)

> ID：13224983
> 
> 赞同：0
> 
> 时间：2012-11-05T01:53:03.960
> 
> 标签：android, layout, resolve

好吧，到目前为止，我的程序一直在工作，保持可编译性和一切，我试图给它添加声音，所以我创建了一个文件夹“raw”，并停留在 mp3 文件中。然后我尝试使用它，无论出于何种原因，一切都开始出现错误。我 Ctrl+Z'd 直到它回到我尝试添加声音之前。程序仍然出错。我删除了原始文件夹，仍然有错误[在下面的程序中标记] 请注意，这只是我程序中的 1 个类，还有其他类。

```
package scouting.form;

import android.R;//Don't use android.R here; use a fully qualified name for each usage instead - this one only comes up *sometimes...*
import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;

public class Login extends Activity {

    Button login;
    EditText user;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_login);//Error: activity_login cannot be resolved or is not a field
        login=(Button) findViewById(R.id.button1);//NO ERROR even though the next line has an error...
        user=(EditText) findViewById(R.id.editText1);//Error: editText1 cannot be resolved or is not a field
        login.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                Intent openScouting = new Intent("com.cody.graham.SCOUTING");
                startActivity(openScouting);
            }
        });
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_login, menu);//Error: activity_login cannot be resolved or is not a field
        return true;
    }
} 
```

我知道布局和菜​​单仍然存在，它们一直存在，我可以打开布局并确认布局文件夹中的“activity_login”布局中还有一个编辑文本框和编辑文本盒子确实有线

```
android:id="@+id/editText1" 
```

在里面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T01:55:12.227

看到顶部了吗？

```
import android.R;//Don't use android.R here; use a fully qualified name for each usage instead - this one only comes up *sometimes... 
```

您可能应该注意该评论的内容。;) 删除 for 的导入`android.R`，它将使用您项目的`R`文件，这就是在哪里`activity_login`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:58:17.983

你导入错了`R.java`。您应该导入 Eclipse 生成的那个（在您的*gen*文件夹中）。您可以通过键入自动导入它`control-shift-o`。您可能还需要运行 Project>Clean，这在添加资产时有时是需要的。

至于raw文件夹，一定要放在`res/`目录下。

# backbone.js - 获取集合时未设置 idAttribute

> ID：13224985
> 
> 赞同：3
> 
> 时间：2012-11-05T01:53:09.107
> 
> 标签：backbone.js

我正在使用骨干集合从服务器获取 mongodb 集合。由于 id 存储为“_id”，因此我使用 idAttribute 将其映射到“_id”。

```
(function(){
  var PlaceModel = Backbone.Model.extend({
    idAttribute: "_id",
  });
  var PlaceCollection = Backbone.Collection.extend({
    url: "http://localhost:9090/places",
    initialize: function(options){
      var that = this;
      this.fetch({
        success: function(){
          console.log("Success!", that.toJSON());
        },
        error: function(){
          console.log("Error");
        }
      });
    }
  });

  var place = new PlaceCollection({model:PlaceModel});

}()); 
```

但后来当我尝试访问模型的“idAttribute”时，该删除一个条目时，它返回“id”而不是“_id”，这意味着视图中的 this.model.isNew() 为所有返回“true”从服务器获取的记录。因此，我无法删除或向服务器添加条目。

但是，如果我使用这样的原型设置 idAttribute（而不是在 PlaceModel 定义中）：

```
Backbone.Model.prototype.idAttribute = "_id"; 
```

然后它正确地将 idAttribute 映射到“_id”，一切正常。可能会发生什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T04:21:41.657

当你这样说时：

```
var place = new PlaceCollection({model:PlaceModel}); 
```

这或多或少是一样的，就像这样说：

```
var o     = new Backbone.Model({ model: PlaceModel });
var place = new PlaceCollection([ o ]); 
```

您没有设置集合“类”的[`model`](http://backbonejs.org/#Collection-model)属性，您只是创建了一个包含一个模型的集合（一个普通`Backbone.Model`实例，而不是 a `PlaceModel`），并且该模型具有一个`model`value 属性`PlaceModel`。

因此，鉴于所有这些，该集合不知道它的模型应该有`idAttribute: "_id"`，甚至不知道它的模型应该是`PlaceModel`. 您想查看`model`创建时间`PlaceCollection`，而不是创建`place`时间：

```
var PlaceCollection = Backbone.Collection.extend({
  url: "http://localhost:9090/places",
  model: PlaceModel,
  //...
});

var place = new PlaceCollection; 
```

# .net - WPF ItemContainerGenerator 一对多映射

> ID：13224987
> 
> 赞同：0
> 
> 时间：2012-11-05T01:53:20.453
> 
> 标签：.net, wpf, itemscontrol

是否可以创建一个[ItemContainerGenerator](http://msdn.microsoft.com/en-us/library/ms611040.aspx)从每个数据项生成多个可视项？我有一组自定义对象，它们具有两个独立的视觉效果，我希望将它们添加到同一个 ItemsControl 中。不希望将它们显示为它们的原始对，因此为包含两个视觉对象的每个数据项创建一个带有面板的模板并没有多大用处。但是，这两个视觉效果必须保持相互联系，因为它们会响应彼此的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T02:11:23.577

MVVM 在这里进行救援。创建一个虚拟机来显示您的数据，这样您就可以得到一对一的视图，这不是更容易吗？

我不知道这是否是您特定情况的解决方案。也许有更多的细节，我们可以告诉...

# git - git fast-import 流的合并语义是什么？

> ID：13224990
> 
> 赞同：9
> 
> 时间：2012-11-05T01:53:38.953
> 
> 标签：git, git-fast-import

我编写并维护了一个名为 reposurgeon 的开源工具，它可以编辑版本控制存储库历史记录，并可用于在 VCS 之间移动项目历史记录。最近我提供了对读取 Subversion 转储文件和 repos 的全面支持。但是有一件事 reposurgeon 还没有做得很好，那就是通过复制到 git 样式的 DAG 合并来翻译 Subversion 分支合并。

为了使这部分正确，我需要比我更好地理解 git fast-import 流中合并提交的语义。我的问题是关于合并提交后哪个版本的内容应该是可见的。

当然，合并提交附加的文件修改使它们的内容在那里可见。我的问题是关于提交*未*触及的路径。

1.  如果一条路径仅在合并的一个提交链祖先上有内容，我假设内容应该是可见的。那是对的吗？

2.  如果一条路径在合并之前的多个提交链中包含内容，那么哪个版本将可见？

3.  如果一个文件沿着某些路径被删除到合并，什么规则预测它什么时候在合并修订中被删除？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T02:19:24.700

如果我理解您的问题，您想知道在将提交的内容流式传输到其中时，您可以使用哪些快捷方式快速导入。

据我从阅读`git/fast-import.c`和手册页中可以看出，快速导入初始化树以从“from”命令中提供的树中进行新的提交。“filemodify” 和朋友们从那个状态开始构建将在最后提交的新树。

遇到“合并”命令时，快速导入命令似乎根本不会改变树；如果您想包含除第一个以外的父母的更改，则需要准确指定要引入的文件。您可以使用标记或对象哈希来命名“filemodify”的其他分支文件。

* * *

编辑：啊，让我们更深入地了解 git 模型。

在 git 中，提交指向一棵树，该树代表被跟踪的目录层次结构的全部内容，就像提交时一样。提交不携带任何关于他们与父母有何不同的信息；理论上，如果需要，您可以通过比较这些树来重建差异。

合并提交与非合并提交的区别仅在于它有两个或多个父级。它仍然有一棵树，准确记录了执行合并后版本中的内容。它仍然没有记录任何关于其作者如何将父母组合成合并版本的信息。git "porcelain" 命令喜欢`git log`做`git diff`魔术来重建对所发生事件的有用描述。

从概念上讲，要创建一个新的提交对象，您需要描述路径到该提交中文件内容的完整映射。（很多聪明之处在于使它变得高效和简单，而不是糟糕。）

该`git fast-import`命令为常见情况提供了一种快捷方式：通常，您从中导出的 VCS 可以告诉您此提交是如何形成的，与同一分支上最近一次提交的某种差异。在这种情况下，您可以有效地将差异编码为快速导入的流格式，以实现更简单、更快速的导入。

但是您必须记住，这只是从头开始重新构建整个树的捷径。